# StackOverflow 问答 10384000-10384999

# java - 如何对 javax.naming.Referenceable 的实现进行单元测试？

> ID：10384008
> 
> 赞同：1
> 
> 时间：2012-04-30T12:49:23.540
> 
> 标签：java, unit-testing, jakarta-ee, jms, jndi

我正在开发一个 JMS 提供程序来规范，它要求某些对象实现[Referenceable](http://docs.oracle.com/javase/6/docs/api/javax/naming/Referenceable.html)。我已经在我的 JMS ConnectionFactory 上实现了 getReference()，并且我创建了一个[对象工厂](http://docs.oracle.com/javase/6/docs/api/javax/naming/spi/ObjectFactory.html)来将引用转换为对象。我正在尝试找出一种有效的单元测试方法。

Spring 的 SimpleNamingContext 不符合要求：

```
Context ctx = ~~new SimpleNamingContext();~~
ctx.bind("testFactory", connFactory);
ConnectionFactory testConnFactory = (ConnectionFactory)ctx.lookup("testFactory");
Assert.assertEquals(connFactor, testConnFactory); 
```

它给了我一个误报，因为 SimpleNamingContext 是一个模拟对象。对象是相同的，*getReference 和我的对象工厂都没有被调用*。

我已经研究过可能连接一个 Jetty 服务器进行测试，但这可能比我需要的多一点。

理想情况下，我正在寻找一个简单的 Context 类，我可以像上面的示例一样直接连接到该类，它实际上将在幕后执行我的 JNDI 特定方法。除此之外，我将就如何对此进行单元测试提出其他建议。

我正在使用 Java [Referenceable Objects and References](http://docs.oracle.com/javase/jndi/tutorial/objects/storing/reference.html)教程来定义它们应该如何实现。

提前致谢。

更新：我不确定这是否相关，但这里是[object factory](https://github.com/carterpage/nevado/blob/master/src/main/java/org/skyscreamer/nevado/jms/resource/NevadoReferencableFactory.java)，这是我正在尝试测试的[Referenceable.getReference()实现。](https://github.com/carterpage/nevado/blob/master/src/main/java/org/skyscreamer/nevado/jms/NevadoConnectionFactory.java#L131)

结论：根据 Nicholas 在下面的建议，我使用了 RefFSContextFactory。这是我在 JUnit 测试中用来生成上下文的代码：

```
@Rule public TemporaryFolder folder = new TemporaryFolder();

private Context getContext() throws MalformedURLException, NamingException {
    Hashtable env = new Hashtable();
    env.put(Context.INITIAL_CONTEXT_FACTORY, 
        "com.sun.jndi.fscontext.RefFSContextFactory");
    env.put(Context.PROVIDER_URL, folder.getRoot().toURI().toURL().toString());
    Context ctx = new InitialContext(env);
    Assert.assertNotNull(ctx);
    return ctx;
} 
```

现在工作的测试类的完整源代码在[这里](https://github.com/carterpage/nevado/blob/master/nevado-jms/src/test/java/org/skyscreamer/nevado/jms/resource/ReferencableTest.java)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:02:28.757

您可以使用文件系统上下文提供程序。这是 jar 的一个[来源](https://repository.sonatype.org/service/local/repositories/central-proxy/content/com/sun/messaging/mq/fscontext/4.5.1-b03/fscontext-4.5.1-b03.jar)。[这里](http://docs.oracle.com/javase/jndi/tutorial/getStarted/examples/naming.html)有一个例子。

# php - Flash 横幅和 PHP

> ID：10384009
> 
> 赞同：1
> 
> 时间：2012-04-30T12:49:24.977
> 
> 标签：php, flash

出于某种原因，我正在尝试这样做：

```
<OBJECT id="affMV737" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" width="468" height="60">
<param name="movie" value="http://www.domain.com/view.php?banner_id=1">
<param name="allowScriptAccess" value="always">
<embed src="http://www.domain.com/view.php?banner_id=1" width="468" height="60" allowScriptAccess="always" ALIGN="" TYPE="application/x-shockwave-flash" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"></embed>
</object> 
```

我在 php 中打印完整的 URL，但 flash 没有加载...但是如果我将 flash 代码中的 src 更改为 php 中的打印结果，则横幅正在工作。

有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:03:08.193

不清楚你想要什么，但我想这会有所帮助

**而不是这个：**

```
http://www.domain.com/view.php?banner_id=1 
```

**试试这样：**

```
<?php echo file_get_contents('http://www.domain.com/view.php?banner_id=1');?> 
```

**更新：**

另一个猜测..您需要将 view.php 更改为以下内容：

```
header('Content-type: application/x-shockwave-flash');
echo file_get_contents('http://domain.com/files/bnrs/blabla.swf'); 
```

# c++ - C++ 调试半影游戏，tidtable.c 中的错误

> ID：10384010
> 
> 赞同：1
> 
> 时间：2012-04-30T12:49:29.533
> 
> 标签：c++, visual-studio-2010

好的，所以我正在尝试编译我自己的 Penumbra：Overture，这是一款来自 FrictionalGames 的开源游戏。当我在 Visual Studio 2010 调试模式下运行游戏时，出现以下错误：

```
First-chance exception at 0x011e0b0e in Penumbra.exe: 0xC0000005: Access violation reading location 0xbaadf011.

Unhandled exception at 0x76f115de in Penumbra.exe: 0xC0000005: Access violation reading location 0xbaadf011\. 
```

然后visual studio问我是要中断执行还是继续，如果我按继续，它会从游戏源跳转到tidtable.c，当我一次又一次按继续时，它会在第145行和第498行之间跳转。这就是所有信息我现在可以考虑给予。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:00:52.960

> 访问冲突读取位置 0xbaadf011

那是 0xbaadf00d + 4。0xbaadf00d 是用于[初始化](http://www.nobugs.org/developer/win32/debug_crt_heap.html)使用 HeapAlloc() 分配的内存的值。换句话说，游戏的源代码中存在错误。它忘记初始化一个指针。查看调用堆栈窗口以查看哪些代码使用了该指针，回溯到包含该指针的对象被分配的位置。

在访问冲突之后，您无法继续运行或调试程序。您最终进入了 tidtable.c，因为它包含在心脏病发作后终止您的程序的 CRT 代码。

# django - Django：基于空间点的 m2m 查询返回空字典 - 但应包含结果

> ID：10384022
> 
> 赞同：3
> 
> 时间：2012-04-30T12:50:28.863
> 
> 标签：django, many-to-many, geospatial, contains, geodjango

嗨 Stackoverflow 人，

我对 Django 中的 m2m 查询感到困惑。我有一个模型 RadioStations 列出了一个大陆周围的广播电台（简称名称和可用国家），并具有以下声明：

```
class Station(models.Model):
    name = models.CharField(_('Station Name'), max_length=255
    reference = models.URLField(_('Link'), blank=True, verify_exists=True)  
    country = models.ManyToManyField(WorldBorder) 
```

WorldBorder 类遵循[此处](https://docs.djangoproject.com/en/dev/ref/contrib/gis/tutorial/#geographic-models)的 GeoDjango 示例。

现在我想搜索美国的所有电台。如果我使用：

`s = Station.objects.filter(country__name__contains = "United States")`

我得到了美国的所有电台。但是，如果我现在使用用户位置进行搜索，例如

```
pnt = fromstr('POINT(-96.876369 29.905320)', srid=4326)
s = Station.objects.filter(country__mpoly__contains = pnt) 
```

查询的结果是空的（即使该点位于美国 **这是否与进行 m2m 查询的方式有关？为什么查询的结果会是空的？是否有解决 m2m 关系的不同方式？**

谢谢你的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:58:23.937

`fromstr`当我尝试 geodjano 时，我无法成功地进行任何地理空间查询 。为了解决我使用的问题`Point`。

```
from django.contrib.gis.geos import Point

pnt = Point(-96.876369, 29.905320) 
```

也许您可以尝试使用 hte 点类？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:34:56.873

该问题的解决方案如下：

而不是从`Stations`to `WorldBorder`，我最终选择了另一种方式。`attribute_set.all()`Django 允许通过该方法进行反向查找。

解决方案是查找哪个国家/地区`Point`包含

> 国家 = WorldBorder.objects.get(mpoly__contains = ref_point)

然后查找所有`Stations`包含该国家的所有内容

> station_list = country.stations_set.all()

请注意，这`set.all()`需要获取查询，而不是过滤查询。可以在[此处](https://docs.djangoproject.com/en/dev/topics/db/queries/#many-to-many-relationships)找到有关 set.all() 方法的更多背景信息。

# intellij-idea - 将 jquery ui 添加到 intellij idea 项目中

> ID：10384027
> 
> 赞同：1
> 
> 时间：2012-04-30T12:51:12.117
> 
> 标签：intellij-idea, jquery-ui-dialog

我想将 jquery ui 添加到我的项目中，我已将 jquery-ui.js、jquery.js 和 jquery-ui.css 添加到我的项目中，但想法无法识别 jquery-ui 函数（我的问题是 dialog() 函数）。我认为这是 intellij idea 的问题并运行了我的项目，但不是我想要的。你能告诉我我的代码有什么问题吗？这是我的代码：

$(document).ready(function() { $("#dialog").dialog("open"); });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:57:13.620

在您“打开”对话框之前，您必须“准备”它 - 假设在您的 index.html 中有以下标签：

```
<div id="msg_dialog" hidden></div>
<div>
    <button onclick="showDialog(); return false;">click me!</button>
</div> 
```

那么在你的javascript中你应该有：

```
function showDialog() {
    $('msg_dialog').dialog('open');
}

$(document).ready(function() {
    $('#msg_dialog').dialog({
            autoOpen: true,
            modal: true,
            resizable: false,
            buttons: {
                Dismiss: function () {
                    $(this).dialog('close');
                }
            }
        });
}); 
```

或类似的东西。

# mysql - 当 mysql 查询中缺少数据时，我想显示关系数据

> ID：10384028
> 
> 赞同：2
> 
> 时间：2012-04-30T12:51:13.933
> 
> 标签：mysql, sql, database

我想显示关系数据，当 mysql 查询中缺少数据时，我有以下查询

```
SELECT u.user_email, um1.value AS school, um.value AS postcode
FROM `wp_users` AS u, `wp_bp_xprofile_data` AS um, `wp_bp_xprofile_data` AS um1
WHERE u.ID = um.user_id
AND u.ID = um1.user_id
AND um.field_id =322
AND um1.field_id =69 
```

这会显示一个电子邮件地址、学校名称和邮政编码。我想弄清楚的是如果学校或邮政编码不在数据库中，如何获取所有电子邮件，即即使数据丢失也显示值

干杯，有钱

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:00:49.937

```
SELECT u.user_email 
,       um1.value AS school
,       um.value AS postcode
FROM `wp_users` AS u
LEFT JOIN `wp_bp_xprofile_data` AS um
  ON u.ID = um.user_id
  AND um.field_id = 322
LEFT JOIN `wp_bp_xprofile_data` AS um1
  ON u.ID = um1.user_id
  AND um1.field_id = 69 
```

# jsf - 数据在 单击命令按钮时消失

> ID：10384032
> 
> 赞同：6
> 
> 时间：2012-04-30T12:51:19.170
> 
> 标签：jsf

我正在使用 JSF 1.1。我有一个带有请求范围 bean 和只读输入字段的 JSF 页面。

```
<h:inputText id="dt" value="#{bean.sdate}" readonly="#{bean.disable}" />
<a onclick="cal('dt');"><img src="fr.gif" border="0"></a> 
```

当我使用 JavaScript 设置输入值并单击命令按钮时，输入字段中的数据就会消失。

这是如何引起的，我该如何解决。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-30T18:26:18.910

那是因为属性设置为`readonly`. 如果这`true`为 ，则 JSF 不会处理提交的值，因此模型不会被更新。如果您想将其设置为`readonly`呈现视图**并**让 JSF 处理提交的值，那么您需要使其`true`仅在呈现响应阶段进行评估。你可以用[`FacesContext#getRenderResponse()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#getRenderResponse%28%29)这个。您需要在您的`isDisable()`方法中执行此操作。

```
public boolean isDisable() { // TODO: rename to isReadonly().
    return FacesContext.getCurrentInstance().getRenderResponse();
} 
```

注意：在 JSF2 中，您也可以在视图中访问`FacesContext#getCurrentInstance()`，`#{facesContext}`这会在模型中节省一些样板：

```
<h:inputText ... readonly="#{facesContext.renderResponse}" /> 
```

另请注意，当您使用 JSF2 时`<f:viewParam>`，这种方法将不再适用于 GET 请求。有关解释和解决方法，另请参阅[Make ap:calendar readonly](https://stackoverflow.com/questions/17639415/make-pcalendar-readonly/)。

# c# - 客户关怀加速器的成功实施？

> ID：10384036
> 
> 赞同：5
> 
> 时间：2012-04-30T12:51:32.263
> 
> 标签：c#, dynamics-crm, dynamics-crm-2011

您知道 Dynamics CRM 2011 的客户关怀加速器框架的任何成功实施吗？PowerPoint演示看起来很棒，但是当我尝试查找这方面的信息时，我真的找不到很多。

我问的原因是因为我的一位客户希望我调查一下。目的是创建一个与 Dynamics CRM 紧密集成的复合 UI。

下载 CCA 后，我尝试编译代码，但它需要一个未随 CCA 分发的 DLL。事实证明，这是 WPFCAB 的旧版本，据我所知不再维护（http://wpfcab.codeplex.com/），但现在是 Smart Client Contrib 的一部分（也是从 2008 年开始）。我的同事认为这也是旧的，已被 PRISM 取代。

我的问题很简单，对于 CRM 2011 是否有任何（成功的）CCA 实施，并且是否得到积极维护？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T03:41:40.703

从历史上看，我发现大多数 MS 提供的加速器都不太令人满意：要么太不完整，要么功能非常完整但不够灵活。有一些例外（在 CRM v4 中，事件加速器提供了一组漂亮的预配置实体，但门户端是垃圾），但总的来说，我认为它们是 MSCRM 能力的一个很好的演示，但不是在客户中 -可用的场景。

对于 CRM2011，我尝试使用的加速器刚刚采用旧的 CRM4 代码并将其推送到 4>2011 转换器，几乎没有或根本没有整理。

如果您是一位称职的编码人员，我会跳过加速器并使用 MS SDK 或使用 oData API 在 HTML/JavaScript 中从头开始编写一些东西。

（注意：我是 MS 合作伙伴的 CRM 顾问，我几乎不做任何服务器端编码 - 开发人员可能对此有不同的看法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T02:50:31.307

是的，CCA（客户服务加速器）有很多成功的实施。您可以自己尝试从下面给出的链接安装它。这里有几个链接，您可以查看[http://crmmongrel.blogspot.in/2011/08/customer-care-accelerator-for-dynamics.html](http://crmmongrel.blogspot.in/2011/08/customer-care-accelerator-for-dynamics.html) [http://community.dynamics.com/crm/b/crminogic/存档/2012/08/07/tips-to-install-cca-for-crm-2011.aspx](http://community.dynamics.com/crm/b/crminogic/archive/2012/08/07/tips-to-install-cca-for-crm-2011.aspx)

请注意 - 您必须从安装 CRM 的服务器执行此操作。

PS - 这也适用于 CRM 2013。

希望这可以帮助。

# mysql-python - 如何在mysql中获取列数据类型和值

> ID：10384043
> 
> 赞同：0
> 
> 时间：2012-04-30T12:52:06.787
> 
> 标签：mysql-python

我需要一个查询，它提供列数据类型及其数据操作值。例如，如果我输入这样的查询`select * from table`；我需要一个响应，例如：

```
id  id type     fname   fname type  active  active type
1   integer     Tommy   varchar     True    boolean 
```

谁能给我任何关于如何实现这一目标的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:48:14.883

```
SHOW COLUMNS FROM mydb.mytable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:16:07.353

describe [table name] 将吐出列名和类型。另一个有用的命令是 show tables - 列出所有表。

# css - 动态元标题中的一个单词大写

> ID：10384045
> 
> 赞同：0
> 
> 时间：2012-04-30T12:52:12.897
> 
> 标签：css, wordpress, title, meta, capitalize

有没有办法在动态元标题中将一个单词大写？

基本上我在元标题中使用了一个 slug，但它是小写的。我想把那个词大写，但我不确定最好的方法是什么？

```
<title><?php $taxonomy = 'propertytype'; $queried_term = get_query_var($taxonomy);$term = get_term_by( 'slug', $queried_term, $taxonomy ); echo $term->slug; ?> the rest of the thitle goes here</title> 
```

有没有一种方法可以将标题中的 slug 大写？

非常感谢

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:17:23.440

```
<?php
$taxonomy = 'propertytype';
$queried_term = get_query_var($taxonomy);
$term = get_term_by( 'slug', $queried_term, $taxonomy );
$cap = ucwords($term->slug);
?>
<title><?=$cap?>the rest of the thitle goes here</title> 
```

# jquery - 使用usemap将鼠标悬停在img的映射区域上时如何使用jquery触发图像交换

> ID：10384047
> 
> 赞同：0
> 
> 时间：2012-04-30T12:52:26.740
> 
> 标签：jquery, hover

我有以下代码：

```
<img src="images/menu-home-off.png" width="153" height="37" border="0" usemap="#menuhome" />
<map name="menuhome" id="menuhome">
<area shape="poly" coords="12,0,153,0,153,35,1,35" href="#" />
</map> 
```

地图 (menuhome) 仅占用图像的选择 (menu-home-off.png)。预期目标是当鼠标滑过图像的地图 (menuhome) 区域时，将 menu-home-off.png 交换为 menu-home-on.png。

我发现许多 jquery 鼠标悬停在图像交换代码片段上，但不能完全弄清楚如何应用这样的东西。页面上还将有许多地图/图像

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:02:21.087

这不适合你吗？

```
$('#menuhome area').on('hover', function(e){
    console.log("hovered.");
}); 
```

示例：http: [//jsfiddle.net/6ReMp/3/](http://jsfiddle.net/6ReMp/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:57:42.587

`$('area').mouseover(function()`....不适合你？

如果您要添加多个区域，请确保为每个区域指定一个 id 或一个类，以使其更易于交互。

# html - 清除或重置按钮

> ID：10384050
> 
> 赞同：0
> 
> 时间：2012-04-30T12:52:39.230
> 
> 标签：html, forms, button, reset

我有一个表格和一个有效的重置按钮。当我单击按钮时，所有输入和文本区域框都被清除。我想知道是否有一种方法可以创建一个清除/重置按钮，它只会清除一些输入，而不是我的文本区域框中的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:01:46.433

这是[jsfiddle](http://jsfiddle.net/9T45A/)解决方案。

```
<form>
    <input type="text" class="clearit" /><br />
    <input type="text" class="clearit" /><br />
    <input type="text" class="clearit" /><br />
    <textarea id="t5"></textarea><br />
    <input type="reset" id="reset" />
</form>

$(document).ready(function(){ 
    $('#reset').on('click',function(e){
        e.preventDefault();
        $('.clearit').val("");
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:00:26.123

Assign all input elements a class let suppose inputs and different ids let suppose the id of text area is text_area.

```
<input type  = "textarea " id = "textarea "> 
```

Now with jquery

```
$(function(){
   $('.inputs').each(function()
   {
        var id = $(this).attr('id');
         if(id == 'textarea '){

         }else{
           $(this).attr('value',"");
         }
   });
}) 
```

Done!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:01:00.913

use jquery it will help u , give the class to fields which u want to clear on click of button and give id to your button

```
 $('#id_of_button').click(function(){
    $('.input_field_class').val("");
     }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T13:01:59.790

见链接

[http://www.javascript-coder.com/javascript-form/javascript-reset-form.phtml](http://www.javascript-coder.com/javascript-form/javascript-reset-form.phtml)

基本上，与其从重置按钮调用 form.reset() ，不如调用一个外部函数来清除您需要的字段并保持其余部分不变。

希望它能解决你的问题！

# entity-framework - EF Power Tool - 自定义文件

> ID：10384057
> 
> 赞同：3
> 
> 时间：2012-04-30T12:53:35.363
> 
> 标签：entity-framework

我已经更新了 EF 电动工具 tt 文件以按照我喜欢的方式生成代码，但我也希望它能够从数据库中生成枚举。如果您使用数据库优先或设计优先，最新的 EF 中的枚举支持很好，它很好地为您创建了一个枚举类并将其全部连接起来，但在代码优先中它没有。如果你想拥有表格和枚举，你必须自己做一些事情。我希望找到一种简单的方法来为我指定的表运行枚举 tt，以创建我修改后的 EF 电动工具 tt 然后使用的枚举类。

# php - 出现在每一页而不是页面内容上的 Wordpress 帖子

> ID：10384058
> 
> 赞同：1
> 
> 时间：2012-04-30T12:53:36.913
> 
> 标签：php, html, css, wordpress

Wordpress 页面不工作。

我在这个 wordpress 网站上遇到了一些问题，它运行良好，然后所有内容都消失了，现在它在每个页面上显示帖子，而不是那些页面所见即所得的内容。

我可以看到这是一件简单的事情，但我不知道为什么它不起作用，我以前从未遇到过这个问题？

```
<?php get_header(); ?>

    <div id="content">
    <div id="greybread"><?php if (function_exists('dimox_breadcrumbs')) dimox_breadcrumbs(); ?></div>

<?php if (have_posts()) : while (have_posts()) : the_post(); ?>     

        <div class="post" id="post-<?php the_ID(); ?>">
        <div class="singlepage"><?php the_title(); ?></div>

 <?php if ( has_post_thumbnail()) : ?>
   <div style="float:left; margin:20px 10px 10px 0px; border:1px solid #CCCCCC;">
   <?php the_post_thumbnail( array(200,200) ); ?>
   </div>
 <?php endif; ?>

<div class="entry">
                <?php the_content('<p class="serif">Read more &raquo;</p>'); ?>

                <?php wp_link_pages(array('before' => '<p><strong>Pages:</strong> ', 'after' => '</p>', 'next_or_number' => 'number')); ?>

            </div>
            <?php the_tags(__('Tags: '), ', ', ' '); ?>
        </div>

        <?php endwhile; endif; ?>
    <?php edit_post_link('Edit this entry.', '<p>', '</p>'); ?>
    </div>

<?php get_sidebar(); ?>

<?php get_footer(); ?> 
```

以上是我在 page.php 网站上使用的代码 - 哪个不起作用？怎么了？因为它以前工作过，我有一段时间没有更改此页面上的任何内容！？

任何方向的帮助将不胜感激！很多！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:08:01.877

除了 page.php，您还有其他页面模板吗？我会确保您的页面使用的是您打算使用的模板。例如，如果要删除 page.php，您的站点可能会尝试从 archives.php 中提取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T17:13:24.340

您可以尝试删除除循环之外的所有其他内容：

```
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>
<?php endwhile; endif; ?> 
```

然后你会看到问题是否在 page.php 文件中，但似乎不是。如果您说您没有更改此文件中的任何内容。在问题发生之前您做的最后一件事是什么？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T13:37:43.253

一定是某个插件有问题。

检查它们。可能是`dimox_breadcrumbs`插件导致了问题。

如果它导致问题使用`breadcrumb nav xt`插件。

**编辑：**

您可以使用以下代码检查 SQL 查询：

```
add_action('wp_head','check_my_sql_query');

function check_my_sql_query(){
   var_dump($GLOBALS['wp_query']);
} 
```

在转储中查找整个查询。然后检查它的语法。把这个放在你的`functions.php`

**编辑：** 标题必须包含的另一件事是调用`wp_head();`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-30T13:43:47.240

尝试删除你的 if (have_posts()) 并坚持使用 while 循环。

所以

```
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?> 
```

变成

# html - 避免/HTML标签改变和行？

> ID：10384061
> 
> 赞同：4
> 
> 时间：2012-04-30T12:53:45.630
> 
> 标签：html, css, colgroup

有没有办法限制/约束`<colgroup>`/ `<col>`HTML 标签中定义的样式的“操作”字段。

给定下表：

```
<table>
    <colgroup>
        <col align="center" />
        <col align="center" style="background-color: lightgrey;" />
        <col align="center" />
    </colgroup>
    <thead>
        <tr>
            <th>Column A</th>
            <th>Column B</th>
            <th>Column C</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1.a</td>
            <td>1.b</td>
            <td>1.c</td>
        </tr>
        <tr>
            <td>2.a</td>
            <td>2.b</td>
            <td>2.c</td>
        </tr>
    </tbody>
</table> 
```

我`background-color: lightgrey;`不希望将其应用于“B 列”单元格（第二个`th`）`thead`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:03:39.947

您始终可以特别为该单元格应用样式，或者`<tr>`为您的标题行设置整个样式。

[http://jsfiddle.net/QQ7LJ/](http://jsfiddle.net/QQ7LJ/)

```
 <tr style="background-color:white;">
        <th>Column A</th>
        <th>Column B</th>
        <th>Column C</th>
 </tr> 
```

简而言之：不，没有办法“限制”css，它将匹配每个可用的目标，并且你的样式`<col>`将匹配整个列。为了获得不同的样式，您需要以某种方式覆盖它，最简单的方法是显式设置与一般样式不匹配的样式。

编辑，您也可以在样式表块中执行此操作，方法是使用 CSS3 选择器`:nth-of-type`并将选择器范围限定为`<tbody>`元素。

[http://jsfiddle.net/QQ7LJ/1/](http://jsfiddle.net/QQ7LJ/1/)

```
tbody td:nth-of-type(2) {
 background-color: lightgrey;   
}​ 
```

以及对 HTML 的更改（其他一切都相同）

```
<colgroup>
    <col align="center" />
    <col align="center"/>
    <col align="center" />
</colgroup> 
```

# mysql - SQL - 如果不遵守条件，则不显示任何内容

> ID：10384064
> 
> 赞同：0
> 
> 时间：2012-04-30T12:54:03.117
> 
> 标签：mysql, select, conditional-statements

我使用此查询返回一些信息：

```
select tick.ticketid 'Ticket', tick.subject 'Sujet', FROM_UNIXTIME(tick.dateline)     'Reception', FROM_UNIXTIME(logs1.dateline) 'Verification', FROM_UNIXTIME(logs2.dateline)     'Debut trait.',
FROM_UNIXTIME(logs3.dateline) 'Fin trait.', tick.prioritytitle 'Priorite',  tick.tickettypetitle 'Genre', tick.timeworked/60 'Temps de travail', tick.fullname  'Createur'
from swtickets tick, swticketauditlogs logs1, swticketauditlogs logs2, swticketauditlogs logs3
where tick.ticketid = logs1.ticketid 
and tick.ticketid = logs2.ticketid
and tick.ticketid = logs3.ticketid
and logs1.actionmsg like '%to: Pre-analysis%'
and (logs2.actionmsg like '%to: Handled%' or logs2.actionmsg like '%to: In Progress%')
and (logs3.actionmsg like '%to: Pre-closed%' or logs3.actionmsg like '%to: Closed%')
group by tick.ticketid 
```

我选择了 swticketauditlogs 表的 3 倍，因为对于我的查询的每一行，我需要表的同一列的三倍，但具有其他条件。

我的问题是，使用此代码，如果不遵守表 swticketauditlogs 上的三个条件之一，则不会选择票证。我想要的是：

已选择工单，且未遵守条件的字段为空白。

但我不知道如何做到这一点......

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:00:46.223

You will have to replace you implicit joins by explicit [`LEFT JOIN`s](http://en.wikipedia.org/wiki/Join_%28SQL%29):

```
...
FROM swtickets tick
LEFT JOIN swticketauditlogs logs1
       ON (     logs1.ticketid = tick.ticketid
            AND logs1.actionmsg LIKE '%to: Pre-analysis%'
          )
LEFT JOIN swticketauditlogs logs2
       ON 
... 
```

If a record is found, the values are returned, otherwise your selected columns are `NULL`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:01:04.537

You want to use [outer joins](http://en.wikipedia.org/wiki/Join_%28SQL%29#Outer_joins) (which don't eliminate non-matching rows from other tables):

```
SELECT
  tick.ticketid                 AS `Ticket`,
  tick.subject                  AS `Sujet`,
  FROM_UNIXTIME(tick.dateline)  AS `Reception`,
  FROM_UNIXTIME(logs1.dateline) AS `Verification`,
  FROM_UNIXTIME(logs2.dateline) AS `Debut trait.`,
  FROM_UNIXTIME(logs3.dateline) AS `Fin trait.`,
  tick.prioritytitle            AS `Priorite`,
  tick.tickettypetitle          AS `Genre`,
  tick.timeworked/60            AS `Temps de travail`,
  tick.fullname                 AS `Createur`
FROM
  swtickets AS tick
  LEFT JOIN swticketauditlogs AS logs1 ON (
         logs1.ticketid = tick.ticketid
    AND  logs1.actionmsg LIKE '%to: Pre-analysis%'
  )
  LEFT JOIN swticketauditlogs AS logs2 ON (
         logs2.ticketid = tick.ticketid
    AND (logs2.actionmsg LIKE '%to: Handled%'
     OR  logs2.actionmsg LIKE '%to: In Progress%')
  )
  LEFT JOIN swticketauditlogs AS logs3 ON (
         logs3.ticketid = tick.ticketid
    AND (logs3.actionmsg LIKE '%to: Pre-closed%'
     OR  logs3.actionmsg LIKE '%to: Closed%')
  )
GROUP BY tick.ticketid 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T13:01:29.897

使用`LEFT JOIN`s：

```
select ...
from swtickets tick
left join swticketauditlogs logs1 on tick.ticketid = logs1.ticketid and logs1.actionmsg like '%to: Pre-analysis%'
left join swticketauditlogs logs2 on tick.ticketid = logs2.ticketid and (logs2.actionmsg like '%to: Handled%' or logs2.actionmsg like '%to: In Progress%')
left join swticketauditlogs logs3 on tick.ticketid = logs3.ticketid and (logs3.actionmsg like '%to: Pre-closed%' or logs3.actionmsg like '%to: Closed%')
group by tick.ticketid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T13:00:45.207

You want to use `LEFT JOIN`s:

```
select tick.ticketid 'Ticket', tick.subject 'Sujet', FROM_UNIXTIME(tick.dateline)     'Reception', FROM_UNIXTIME(logs1.dateline) 'Verification', FROM_UNIXTIME(logs2.dateline)     'Debut trait.',
FROM_UNIXTIME(logs3.dateline) 'Fin trait.', tick.prioritytitle 'Priorite',  tick.tickettypetitle 'Genre', tick.timeworked/60 'Temps de travail', tick.fullname  'Createur'
from
swtickets tick
    left join
swticketauditlogs logs1
    on
      tick.ticketid = logs1.ticketid and
      logs1.actionmsg like '%to: Pre-analysis%'
    left join
swticketauditlogs logs2
    on
      tick.ticketid = logs2.ticketid and
      (logs2.actionmsg like '%to: Handled%' or logs2.actionmsg like '%to: In Progress%')
    left join
swticketauditlogs logs3
    on
      tick.ticketid = logs3.ticketid and
      (logs3.actionmsg like '%to: Pre-closed%' or logs3.actionmsg like '%to: Closed%')
group by tick.ticketid 
```

Left joins produce nulls in the columns from the right table, if the join doesn't succeed. (Note that these *are* nulls, not "blank" - whatever that may mean).

# php - 如何在 JavaScript 中将 PHP 文件名指定为变量值？

> ID：10384065
> 
> 赞同：1
> 
> 时间：2012-04-30T12:54:10.467
> 
> 标签：php, javascript, html, upload

我使用这个 html5 脚本来获取我的 php 表单中的文件信息。我想要的不是上传文件，而是只获取文件名而不上传文件。可能吗？

这是脚本：

```
<script>
function handleFileSelect(evt) {
var files = evt.target.files; // FileList object

// files is a FileList of File objects. List some properties.
var output = [];
for (var i = 0, f; f = files[i]; i++) {
  output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',
              f.size, ' bytes, last modified: ',
              f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',
              '</li>');
 }
document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
}

document.getElementById('files').addEventListener('change', handleFileSelect, false);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T18:12:43.473

给定以下形式：

```
<form name="myForm" action="send.php">
    <input type="file" id="fileSelect">
    <input type="hidden" name="filename">
    <input type="submit">
</form> 
```

要停止文件实际上传，不要给文件输入字段一个`name` 属性。相反，您创建一个`hidden`输入字段，当用户选择一个文件时，使用文件名填充该字段，例如：

```
<script>
    var fileSelect = document.getElementById('fileSelect');

    var handleFileSelect = function(e) {
        var files = e.target.files;
        if(files.length === 1) {
            document.forms.myForm.filename.value = files[0].name;
        }
    };

    fileSelect.addEventListener('change', handleFileSelect, false);
</script> 
```

现在，当用户提交表单时，您可以使用`$_GET['filename']`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:59:43.067

No, you can't know the file name without uploading it and checking `$_FILES` array.
You can however issue an AJAX request that will upload the file and return the filename so you can add it in your views

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:03:37.977

您已经在`f.name`javascript 变量中有文件名。如果要将其发送到服务器，只需将其放在表单内的隐藏输入中即可。或者您可以使用 ajax 请求发送此值。

# java - 当需要自定义插入行为时，我是否必须对 RowSorter 进行自定义实现？

> ID：10384066
> 
> 赞同：2
> 
> 时间：2012-04-30T12:54:18.393
> 
> 标签：java, swing, tablerowsorter

我需要一个与 TableRowSorter/DefaultRowSorter 提供的插入行为不同的 JTable。

我需要一个表格，这样当用户插入一行时，新插入的行应该低于光标所在的行，并且光标放置在新插入的行上。让我用一个例子来说明：

初始状态 - 表有 4 行：

```
0\. Row 1
1\. Row 2 <-- cursor here
2\. Row 3
3\. Row 4 
```

用户的光标在第二行，用户触发插入。新插入的行出现在下面，光标也移动到那里：

```
0\. Row 1
1\. Row 2 
2\. New row <-- cursor here
3\. Row 3
4\. Row 4 
```

我很清楚我有两种方法可以解决这个问题。

第一种方法是更改​​我的模型，因此插入是在模型中的正确位置完成的。我不喜欢这种解决方案，因为这意味着模型索引将在插入的行下方的所有行中发生变化。这是完成我需要的最简单的方法，但是，正如我所说，以模型索引更改引起的潜在大开销为代价......

第二种方法是实现一个 RowSorter，它将维护自己的 videToModel[] 和 modelToView[] 数组，并在插入行时保持正确的顺序。自然，我从扩展 TableRowSorter 开始，但问题是 modelToView 和 viewToModel 是私有数组，我无法访问它们，所以在过滤行时会出现问题......

我试图避免编写自己的 RowSorter 实现，因为它需要时间才能做到正确......

**2013-10-07 更新：** 我通过实现自己的 RowSorter 实现了这一点。在尝试了这两种方法后，我意识到第二种方法给了我更多的灵活性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:43:14.407

不确定我是否应该刚刚编辑我的原始答案，但我认为现在完全错误。

我认为您的第一个解决方案是最好的。在我亲眼看到它之前，我不会担心在表模型中插入数据成本高昂（或者如果你知道你有数十万行或其他东西）。

所以 - 这样的事情是我想要的：

```
int modelIndex = table.convertRowIndexToModel(table.getSelectedRow());
tableModel.insertRow(modelIndex, myRowVector); 
```

看一眼`DefaultTableModel`代码，看起来这可能是一个相当快的方法，尽管可能没有办法绕过`Vector.insertElementAt()`开销......我愿意打赌它的开销完全低于使用 a `RowSorter`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:10:45.687

获取使用 RowSorter 正确排序的 JTable 的“正确”方法是覆盖`AbstractTableModel.getColumnClass(int)`. 然后你可以调用`DefaultRowSorter.setSortKeys()`来指定排序顺序。

这些方法将允许您以任何顺序在模型中添加/删除行，并满意它们将以“正确”的排序顺序显示。

如果您需要特殊排序，即基于对象`compareTo()`方法以外的其他内容进行排序，您可以调用`DefaultRowSorter.setComparator()`以提供您自己的比较函数来处理该列。

我不确定你所说的“光标”是什么意思，但如果你的意思是应该选择任何新插入的行，那将通过调用来完成`JTable.setRowSelectionInterval()`，它需要*视图索引*，所以它们需要被转换（例如转换你的模型索引，可能是您刚刚插入到视图索引中的模型中的最后一行）。

# sql - 如何根据位置接近度取平均值

> ID：10384076
> 
> 赞同：3
> 
> 时间：2012-04-30T12:55:05.050
> 
> 标签：sql, database, google-maps, gps

我有一个带有地理标记值（经度、纬度、值）的 SQL 表。该表快速累积并有数千个条目。因此，在表中查询某个区域的值会返回非常大的数据集。

我想知道位置接近一个值的平均值的方法，这里有一个例子：

桌子：

```
Long            lat           value
10.123001       53.567001      10
10.123002       53.567002      12
10.123003       53.567003      18
10.124003       53.568003      13 
```

假设我当前的位置是 10.123004、53.567004。如果我要查询附近的值，我将得到四个原始值，其值为 10、12、18 和 13。如果数据集相对较小，这将有效。如果数据很大，我想查询 sql 以获取四舍五入的位置（10.123、53.567）并需要 sql 返回类似

```
Long            lat           value
10.123       53.567      10 (this is the average of 10, 12, and 18)
10.124       53.568      13 
```

这可能吗？我们如何根据位置平均大数据集？

sql数据库首先是正确的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:08:35.183

`GROUP BY`舍入的列，并且 AVG 聚合函数应该可以正常工作：

```
SELECT ROUND(Long, 3) Long, 
       ROUND(Lat, 3) Lat, 
       AVG(value) 
 FROM Table
 GROUP BY ROUND(Long, 3), ROUND(Lat, 3) 
```

根据需要添加 WHERE 子句进行过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:10:02.623

这是一些粗略的伪代码，可能是一个开始。您需要为项目使用的 SQL 方言中的 round 函数提供正确的精度参数，因此请了解我作为 Round 的第二个参数提供的 3 是数字舍入到的精度小数位数，如您的原始帖子所示。

选择round(lat,3),round(long,3),avg(value) 分组round(lat,3),round(long,3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T14:30:29.147

舍入方法的问题在于边界条件——当点接近边界时会发生什么。

但是，对于给定点的邻域，最好使用以下内容：

```
select *
from table
where long between @MyLong - @DeltaLong and @MyLong + @DeltaLong and
      lat between @MyLat - @DeltaLat and @MyLat + @DeltaLat 
```

为此，您需要定义@DeltaLong 和@DeltaLat。

如果这是您的问题，则四舍五入可以很好地进行总结。

# android - MediaStore - 用于查询所有类型文件（媒体和非媒体）的 Uri

> ID：10384080
> 
> 赞同：34
> 
> 时间：2012-04-30T12:55:21.603
> 
> 标签：android, mediastore

在[MediaStore.Files](http://developer.android.com/reference/android/provider/MediaStore.Files.html)类中，它提到，

> 媒体提供者表包含媒体存储中所有文件的索引，包括非媒体文件。

我有兴趣查询 PDF 等非媒体文件。

我正在使用 CursorLoader 来查询数据库。构造函数的第二个参数需要一个 Uri 参数，该参数对于媒体类型 Audio、Images 和 Video 很容易获得，因为它们中的每一个都为它们定义了一个`EXTERNAL_CONTENT_URI`常量`INTERNAL_CONTENT_URI`。

对于 MediaStore.Files 没有这样定义的常量。我尝试使用该`getContentUri()`方法，但无法找出`volumeName`. 我尝试提供“/mnt/sdcard”以及将设备连接到系统时出现的卷名，但徒劳无功。

[我在 Google Groups 上](https://groups.google.com/forum/?fromgroups#!topic/android-developers/6hUaqt_1ubY)看到了类似的问题，但没有解决。

编辑：我也尝试使用 Uri.fromFile(new File("/mnt/sdcard/")) 和 Uri.parse(new File("/mnt/sdcard").toString()) 但这也没有成功.

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-30T13:25:40.340

它是`"external"`或者`"internal"`尽管内部（系统文件）在这里可能没有用。

```
ContentResolver cr = context.getContentResolver();
Uri uri = MediaStore.Files.getContentUri("external");

// every column, although that is huge waste, you probably need
// BaseColumns.DATA (the path) only.
String[] projection = null;

// exclude media files, they would be here also.
String selection = MediaStore.Files.FileColumns.MEDIA_TYPE + "="
        + MediaStore.Files.FileColumns.MEDIA_TYPE_NONE;
String[] selectionArgs = null; // there is no ? in selection so null here

String sortOrder = null; // unordered
Cursor allNonMediaFiles = cr.query(uri, projection, selection, selectionArgs, sortOrder); 
```

如果你只想`.pdf`你可以检查 mimetype

```
// only pdf
String selectionMimeType = MediaStore.Files.FileColumns.MIME_TYPE + "=?";
String mimeType = MimeTypeMap.getSingleton().getMimeTypeFromExtension("pdf");
String[] selectionArgsPdf = new String[]{ mimeType };
Cursor allPdfFiles = cr.query(uri, projection, selectionMimeType, selectionArgsPdf, sortOrder); 
```

# android - Android：在 onSavedInstance 中保存数据

> ID：10384084
> 
> 赞同：1
> 
> 时间：2012-04-30T12:55:42.287
> 
> 标签：android, savestate

我不知道如何将 bean 类的对象保存在 onSavedInstance 中，并通过检查 savedInstanceState 为 null 在 onCreate 中检索它。

到目前为止，我一直在尝试此代码，但无法保存/检索值：-

```
public class BookActivity extends Activity{

private ArrayList<Bitmap> bitmaps = null;
private ArrayList<Book> bookData = null;  //Book is the bean class
private TextView bookTitle = null;
private ArrayList<Feature> bookIds = null; // Another bean class

@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    savedInstanceState.putSerializable("bookThumb", bookData);
    savedInstanceState.putSerializable("bookBitmaps", bitmaps);
    savedInstanceState.putSerializable("featureBook", bookIds);
  super.onSaveInstanceState(savedInstanceState);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.penguin_main);

    if(savedInstanceState!=null){
    bookData = (ArrayList<String>) savedInstanceState.getSerializable("bookThumb");
    bookData = (ArrayList<String>) savedInstanceState.getSerializable("bookThumb");
    bookData = (ArrayList<String>) savedInstanceState.getSerializable("bookThumb");
    }
    else{
        Toast msg = Toast.makeText(getApplicationContext(), "Values Not Restored!!!", Toast.LENGTH_LONG);
        msg.setGravity(Gravity.CENTER, msg.getXOffset() / 2, msg.getYOffset() / 2);
        msg.show();
        }
} 
```

}

我应该怎么做才能保存我的位图和 Book 的对象，以便它不会在方向更改时生成类的新实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:17:15.837

您可以将它们保存为 Parcelable ArrayLists

```
savedInstanceState.putParcelableArrayList("bookThumb", bookData);
savedInstanceState.putParcelableArrayList("bookBitmaps", bitmaps);
savedInstanceState.putParcelableArrayList("featureBook", bookIds); 
```

但是，您`Book`和`Feature`类将需要实现`Parcelable`此功能。Bitmap 已经是一个 parcelable 类

# java - 在Java中运行带有前置参数的exe

> ID：10384087
> 
> 赞同：-5
> 
> 时间：2012-04-30T12:55:47.593
> 
> 标签：java, windows, subprocess, installutil

我想在java中运行一个带有预参数的exe。例如，如果这是在命令提示符下执行的。

```
C:\> installutil myApp.exe 
```

installutil 是 myApp.exe 的前置参数（或命令）。在这里，它不同于将普通参数传递给`Runtime.getRuntime().exec()`or `Process.start()`;

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T13:05:22.083

命令提示符中没有“预参数”之类的东西。`runIt`必须是一个实际的命令，在这种情况下`myApp.exe`是`runIt`.

您尝试运行的程序似乎是 .NET 框架 SDK 的一部分，`PATH`在安装过程中没有安装 - 您可能正在使用*Visual Studio 命令提示符*。在我的机器上，完整路径是`C:\Windows\Microsoft.NET\Framework\v4.0.30319\InstallUtil.exe`，在你的机器上会是类似的，你需要使用这个完整路径启动程序。

# c++ - 重载字符串的插入和提取运算符

> ID：10384088
> 
> 赞同：3
> 
> 时间：2012-04-30T12:55:54.087
> 
> 标签：c++, string, operator-overloading, ostream, insertion

我想实现这两个函数，以便能够输入和输出我的类的对象。我已经让 >> 运算符工作了，但没有那么多 <<。

这是我的 .h 文件中的代码：

```
 class MyString
    {
        public:
            MyString();
            MyString(char *message);
            ~MyString();
            void Print();

            void Copy(MyString& rhs);
            int Length();

            MyString& operator()(const int index, const char b);
            char& operator()(const int i);
            MyString& operator=(const MyString& rhs);
            bool operator==(const MyString& other) const;
            bool operator!=(const MyString& other) const;
            const MyString operator+(const MyString& rhs) const;

            MyString& operator+=(const MyString& rhs);

       private:

            char *String;
            int Size;
    };

    istream& operator>>(istream& input, MyString& rhs);
    ostream& operator<<(ostream& output, const MyString& rhs); 
```

这是我的 .cpp 文件中两个函数的代码：

```
 MyString::MyString()
{
    char temp[] = "Hello World";

    int counter(0);
    while(temp[counter] != '\0') {
            counter++;
    }
    Size = counter;
    String = new char [Size];
    for(int i=0; i < Size; i++)
            String[i] = temp[i];

}
MyString::MyString(char *message)
 {

    int counter(0);

    while(message[counter] != '\0') {
            counter++;
    }
    Size = counter;
    String = new char [Size];
    for(int i=0; i < Size; i++)
            String[i] = message[i];

}

  MyString::~MyString()
  {
    delete [] String;
  }
 int MyString::Length()
  {
    int counter(0);

    while(String[counter] != '\0')
    {
            counter ++;
    }

    return (counter);
  }

const MyString MyString::operator+(const MyString& rhs) const
 {

    char* tmp = new char[Size + rhs.Size +1];

    for(int i = 0; i < Size; i++)
    {
            tmp[i] = String[i];
    }
    for(int i = 0; i < rhs.Size+1; i++)
    {
             tmp[i+Size] = rhs.String[i];
   }

const MyString MyString::operator+(const MyString& rhs) const
  {

    char* tmp = new char[Size + rhs.Size +1];

    for(int i = 0; i < Size; i++)
    {
            tmp[i] = String[i];
    }
    for(int i = 0; i < rhs.Size+1; i++)
    {
            tmp[i+Size] = rhs.String[i];
    }

    MyString result;

    delete [] result.String;
    result.String = tmp;
    result.Size = Size+rhs.Size;

    return result;

  }
MyString& MyString::operator()(const int index, const char b)
 {
    if(String[index] == '\0')
    {
            exit(1);
    }
    else
    {

            String[index] = b;
    }

  }

MyString& MyString::operator=(const MyString& rhs)
 {

    if(this != &rhs)
    {

            delete [] String;
            String = new char[rhs.Size];
            Size = rhs.Size;

    for(int i = 0; i < rhs.Size+1 ; i++)
    {
            String[i] = rhs.String[i];
    }

    }

    return *this;

 }
  void MyString::Copy(MyString& rhs)
 {
    delete [] String;
    Size = rhs.Size;
    String = new char[rhs.Size];

    String = rhs.String;
  }

MyString& MyString::operator+=(const MyString& rhs)
  {

    char* tmp = new char[Size + rhs.Size + 1];

    for(int i = 0; i < Size; i++)
    {
            tmp[i] = String[i];
    }

    for(int i = 0; i <rhs.Size+1; i++)
    {
            tmp[i+Size] = rhs.String[i];
    }

    delete [] String;
    String = tmp;

    Size += rhs.Size;

    return *this;

 }

bool MyString::operator!=(const MyString& other) const
 {

    return !(*this == other);

  }
bool MyString::operator==(const MyString& other)const
  {
    if(other.Size == this->Size)
    {
            for(int i = 0; i < this->Size+1; i++)
            {
                    if(&other == this)

                            return true;
            }
    }
    else
            return false;
  }

 char& MyString::operator()(const int i)
{

    if( String[i] == '\0')
    {
            exit(1);
    }
    else
    {

    return String[i];

      }
 }

   void MyString::Print()
 {
    for(int i=0; i < Size; i++)
            cout << String[i];
    cout << endl;

  }

istream& operator>>(istream& input, MyString& rhs)
{
    char* temp;
    int size(256);
    temp = new char[size];
    input.getline(temp,size);
    rhs = MyString(temp);
    delete [] temp;

    return input;
}

ostream& operator<<(ostream& output, const MyString& rhs)
{
    char* p;
    int size(256);
    p = new char[size];
    output << rhs.MyString(p);
    delete [] p;
    return output;
} 
```

以下是它在 main.cpp 文件中的调用方式：

```
cin >> SearchString >> TargetString; // Test of cascaded string-extraction operator<</*

if(SearchString.Find(ConstString) != -1) {       
  cout << ConstString << " is not in " << SearchString << endl;  } 

else {       
  cout << ConstString << " is in " << SearchString << endl;
  cout << "Details of the hit: " << endl;       
  cout << "Starting poisition of the hit: " << SearchString.Find(ConstString) << endl;                
  cout << "The matching substring is: " << SearchString.Substring(SearchString.Find(ConstString), ConstString.length()); } 
```

同样， cin>> 运算符完美运行，但请帮助我弄清楚如何输出字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:01:26.207

不太确定你在问什么。实现取决于您希望如何输出字符串。

对于一些原始输出，代码很可能如下所示：

```
output << rhs.get_data(); 
```

# c# - 标点问题

> ID：10384097
> 
> 赞同：0
> 
> 时间：2012-04-30T12:56:42.570
> 
> 标签：c#, string, concatenation

这是一个读取 CSV 文件的程序，将值添加到字典类，然后分析文本框中的字符串以查看是否有任何单词与字典条目匹配。它会将缩写词（LOL、ROFL 等）替换为它们的真实单词。它通过将输入的文本拆分为单个单词来匹配字符串。

```
public void btnanalyze_Click(object sender, EventArgs e)
{
    var abbrev = new Dictionary<string, string>();
    using (StreamReader reader = new StreamReader("C:/Users/Jordan Moffat/Desktop/coursework/textwords0.csv"))
    {
        string line;
        string[] row;

        while ((line = reader.ReadLine()) != null)
        {
            row = line.Split(',');

            abbrev.Add(row[0], row[1]);
            Console.WriteLine(abbrev);
        }
    }

    string twitterinput;
    twitterinput = "";
    // string output;
    twitterinput = txtInput.Text;

    char[] delimiterChars = { ' ', ',', '.', ':', '\t' };
    string text = twitterinput;
    string[] words = twitterinput.Split(delimiterChars);

    string merge;
    foreach (string s in words)
    {
        if (abbrev.ContainsKey(s))
        {
            string value = abbrev[s];
            merge = string.Join(" ", value);
        }

        if (!abbrev.ContainsKey(s))
        {
            string not = s;
            merge = string.Join(" ", not);
        }

        MessageBox.Show(merge);
    }
} 
```

问题是如果有标点符号，程序就不会翻译这个词。我意识到我使用的字符集意味着标点符号不是问题，但也不允许我在打印时保留它。有没有办法可以忽略最后一个字符，而不是删除它，并仍然保留它以供输出？我试图将它写入一个新变量，但我也找不到这样做的方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:04:36.407

这似乎过于复杂。你可以用正则表达式和反向引用做同样的事情。

```
foreach(var line in yourReader)
{
    var dict = new Dictionary<string,string>(); // your replacement dictionaries
    foreach(var kvp in dict)
    {
        System.Text.RegularExpressions.Regex.Replace(line,"(\s|,|\.|:|\\t)" + kvp.Key + "(\s|,|\.|:|\\t)","\0" + kvp.Value + "\1");
    }
} 
```

我一起破解了这个正则表达式，所以它可能不正确，但这是基本思想。

# html - Kinetic JS - 分层问题

> ID：10384100
> 
> 赞同：4
> 
> 时间：2012-04-30T12:56:53.773
> 
> 标签：html, canvas, kineticjs

我有两个不同的阶段。而且，我正在向它们添加图层并放置两个图像对象。

现在，我已经为这些图像对象提供了“点击”事件。

但是，由于最近添加的层位于其他层之上，因此只有顶层会触发事件。

**问题：**点击紫色指示器，我收到警报。但是，黄色指示器不会触发任何事件，因为它位于图层后面。

> （检查底部提供的[JSFiddle](http://jsfiddle.net/v4u2chat/aqf9Y/8/)链接）

如何克服这个问题..？

这是我用来添加和定位图像的代码示例。

**工作 JS Fiddle 链接：http:** [//jsfiddle.net/v4u2chat/aqf9Y/8/](http://jsfiddle.net/v4u2chat/aqf9Y/8/)

**注意：**使用滑块更改图像的位置。

**图像定位代码**

```
$function positionImage(stage,centerX,centerY,radius,startingAngle,endingAngle,targetValue4ImagePositioning,divIdvalue)
    {
        var imgLayer        =   new Kinetic.Layer();
        var angleInDegress  =   360*targetValue4ImagePositioning-90-5;
        var angleInRadians  =   (Math.PI/180)*angleInDegress;

        imgLayer.rotate((Math.PI/180)*(360*targetValue4ImagePositioning));

        var arcEndX   =   centerX+ ((radius+25)*Math.cos(angleInRadians));
        var arcEndY   =   centerY+ ((radius+25)*Math.sin(angleInRadians));

        imgLayer.setX(arcEndX);
        imgLayer.setY(arcEndY);

        var kineticImage = new Kinetic.Image(
        {  
            x: 0
            ,y: 0
            ,width:18
            ,height:22
            ,image: $('#'+divIdvalue)[0]
            ,id:'kineticImage_'+divIdvalue

        });
        kineticImage.on("click", callBackFn);

        imgLayer.add(kineticImage);
        stage.add(imgLayer);

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:54:08.333

感谢`**Steve**`您的意见。

实际问题出在舞台上。我正在使用两个不同的阶段，这不是必需的。

现在，我将代码更改为单阶段，它就像魅力一样工作：）

图层不会占据整个画布区域。它只会占据我们为其创建图层的形状区域。所以，层没有大惊小怪或问题。

更新的[JS Fiddle](http://jsfiddle.net/v4u2chat/aqf9Y/9/)可以从下面提到的链接中找到。

[http://jsfiddle.net/v4u2chat/aqf9Y/9/](http://jsfiddle.net/v4u2chat/aqf9Y/9/)

# facebook - 预加载通过 CURL 加载的图像

> ID：10384102
> 
> 赞同：1
> 
> 时间：2012-04-30T12:57:04.057
> 
> 标签：facebook, image, facebook-graph-api, curl

我正在使用使用 curl 的 Facebook SDK 加载大量 facebook 个人资料图像。

我正在尝试使用在图像加载之前显示的加载动画。

由于图像是通过 curl 加载的，因此在文档准备好后仍会加载，我不知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:25:44.647

作为一个

curl 的结果可以/甚至可以设置在数组中。您可以在页面加载时将该数组循环到 javascript 数组中，当 curl 完成时，javascript 可以接管并加载数组中的每个图像，并且加载等待图像可以在其位置加载。“这就是我将加载图像交换为对象的方式。”

# java - 使用 Java EE 将文件存储在云中

> ID：10384103
> 
> 赞同：2
> 
> 时间：2012-04-30T12:57:16.223
> 
> 标签：java, jakarta-ee, cloudbees

我正在使用 CloudBees 部署我的 Java EE 应用程序。在那我需要写入和读取文件，我不会从 CloudBees 找到任何云文件系统。请向我推荐任何免费的云文件系统存储和访问该文件系统的 java 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:49:01.573

使用 jclouds，您可以在使用一致 API 的同时将内容存储在多个不同的云中。[http://www.jclouds.org/](http://www.jclouds.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T06:04:50.157

您可以存储文件 - 但是它们将是短暂的并且不会在集群中共享。为此，您需要存储在 DB 或 s3 或类似文件中（还有一个 webdav 选项）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T13:49:19.370

RUN@Cloud 上的文件系统确实不是持久的，也不是分布式的。当应用程序重新部署/重新启动时，存储在那里的文件将“消失”，如果应用程序在集群中的多个节点上横向扩展，则不会被复制。

最佳选择 afaik 是使用可以配置的 jclouds 中性 API ( [http://www.jclouds.org/documentation/quickstart/aws/](http://www.jclouds.org/documentation/quickstart/aws/) )使用存储服务 (amazon s3 从您的 RUN 实例的低网络延迟中受益)使用 filsystem 存储（[http://www.jclouds.org/documentation/quickstart/filesystem/](http://www.jclouds.org/documentation/quickstart/filesystem/)），以便您可以在自己的计算机上进行测试，并将文件存储内容缓存在临时目录中 - 如 System.getProperty("java. io.temp") - 以获得最佳性能。

这将需要一个“预热”阶段，以便从文件存储中填充此缓存，但是您将充分利用这两个词。

# java - 在运行时获取 @XmlType 的命名空间

> ID：10384104
> 
> 赞同：2
> 
> 时间：2012-04-30T12:57:36.670
> 
> 标签：java, xml, xml-serialization, jaxb

我试图`schemaLocation`在编组生成的`xjc`类实例时正确输出属性。根元素类如下所示：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "rootElement"
})
@XmlRootElement(name = "ROOTELEMENT")
public class ROOTELEMENT {
    // Members
} 
```

我看到`package-info.java`包中有一个类，所有生成的类都在其中，内容如下：

```
@javax.xml.bind.annotation.XmlSchema(
    namespace = "http://my.own.namespace", 
    elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED)
package my.generated.classes.package; 
```

[JAXB XJC 代码生成](https://stackoverflow.com/a/2161592/851811)的答案——Marshaller 生成的 xml 中缺少“schemaLocation”建议设置 `Marshaller.JAXB_SCHEMA_LOCATION`属性，它确实有效：

```
marshaller.setProperty(Marshaller.JAXB_SCHEMA_LOCATION, "http://my.own.namespace my_schema.xsd"); 
```

但我想避免输入命名空间，如：

```
String namespace = getNamespace(rootElementInstance);
marshaller.setProperty(Marshaller.JAXB_SCHEMA_LOCATION, namespace + " my_schema.xsd"); 
```

我将不胜感激有关如何实现该`getNamespace()`功能的任何提示。

* * *

**编辑**：我已经看到`XmlRootElement`and`XmlType`注释具有`namespace()`方法，这似乎是我所追求的（实际上，它们似乎委托于`XmlSchema`提供的`package-info.java`）。但是，我无法获得`ROOTELEMENT`转换为任何这些类型的实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:22:08.207

您需要抓住您的包裹（例如，`ROOTELEMENT.class.getPackage()`如果 ROOTELEMENT 在您想要的包裹中，则使用）。然后你可以简单地处理它如下：

```
Package package = // Here retrieve the package;
String namespace = package.getAnnotation(XmlSchema.class).namespace();
...etc... 
```

# eclipse - 我怎样才能摆脱警告m2eclipse“目标就地，爆炸，清单被m2e忽略”

> ID：10384109
> 
> 赞同：6
> 
> 时间：2012-04-30T12:57:48.510
> 
> 标签：eclipse, maven, maven-3, m2eclipse, eclipse-wtp

如何摆脱以下 m2eclipse 警告？

```
maven-war-plugin goals "inplace", "exploded", "manifest" are ignored by m2e 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-21T15:17:00.507

以下片段对我有用：

```
<pluginExecution>
  <pluginExecutionFilter>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <versionRange>[1.0,)</versionRange>
      <goals>
        <goal>manifest</goal> <!-- put the goal you're executing in your pom.xml file -->
      </goals>
    </pluginExecutionFilter>
    <action>
      <ignore />
    </action>
</pluginExecution> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:58:20.323

据我所知，这个警告是从[m2e-wtp](https://github.com/sonatype/m2eclipse-wtp)发出的，它提供了一组与 Eclipse Web Tools Project (WTP) 一起使用的 m2e 连接器。

m2e-wtp 包含一个[`lifecycle-mapping-metadata.xml`](https://github.com/sonatype/m2eclipse-wtp/blob/master/org.maven.ide.eclipse.wtp/lifecycle-mapping-metadata.xml)文件，该文件包含：

```
 <pluginExecution>
      <pluginExecutionFilter>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <versionRange>[1.0,)</versionRange>
        <goals>
          <goal>inplace</goal>
          <goal>exploded</goal>
          <goal>manifest</goal>
        </goals>
      </pluginExecutionFilter>
      <action>
        <ignore>
            <message>maven-war-plugin goals "inplace", "exploded", "manifest" are ignored by m2e</message>
        </ignore>
      </action>
    </pluginExecution>
  </pluginExecutions> 
```

因此，我认为没有办法抑制此警告，除了 (1) 停止使用 m2e-wtp 或 (2) 降级到 m2e-wtp 的 0.14 版，因为此警告是在 0.15中[添加的。](https://issues.sonatype.org/browse/MECLIPSEWTP-204)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T13:50:44.780

看看您是否可以找到 maven-war-plugin 的 m2e 连接器，或者配置您的 POM 以告诉 Eclipse 忽略它或无论如何运行它。更高版本的 m2e 可能包含您需要的连接器，因此升级插件可能会有所帮助。[此 stackoverflow 答案中的](https://stackoverflow.com/questions/6352208/how-to-solve-plugin-execution-not-covered-by-lifecycle-configuration-for-sprin)更多详细信息和背景。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-10T20:59:59.203

实际上，我只是通过在 Eclipse 的问题视图中右键单击它来删除此警告消息，但它还没有回来。

像 lehphyro 所做的那样，用忽略操作更新我的 POM 对我不起作用。

# c++ - QWebView 中的 evaluateJavaScript 不调用 javascript 函数

> ID：10384114
> 
> 赞同：1
> 
> 时间：2012-04-30T12:58:15.817
> 
> 标签：c++, qt, google-maps, google-maps-markers, qwebview

我有以下问题：我在 QWebView (Google Maps) 的代码中加载了地图表单 HTML 文件。在这个 HTML 文件中，我定义了一个 javascript 函数，它应该在地图上以指定的坐标添加一个带标签的标记。这是代码：

JavaScript 函数：

```
function addLMarker(lat, lng, label) {
    var marker = new MarkerWithLabel({
        position: new google.maps.LatLng(lat, lng),
        draggable: false,
        raiseOnDrag: false,
        map: map,
        labelContent: label,
        labelAnchor: new google.maps.Point(0, 0),
        labelClass: "labels",
        labelStyle: {opacity: 0.75}
    });
    markers.push(marker);
    return true;
} 
```

C++ 函数：

```
QString SCRIPT_ADDMARKERWITHLABEL = tr("addLMarker(%1, %2, \"%3\")");
void addMarkerWithLabel(QPointF pos, QString label) {
    page()->mainFrame()->evaluateJavaScript(SCRIPT_ADDMARKERWITHLABEL.arg(pos.x()).arg(pos.y()).arg(label));
} 
```

我确定从我的应用程序中正确调用了 JS 函数，但是它对我的 QWebView 框架没有影响。当我在浏览器中调用此函数时，它会正确执行并在地图上的给定位置放置一个标记。问题出在哪里？我错过了什么吗？

**编辑：** 它突然开始工作。我意识到函数代码没有正确执行（尽管在浏览器中工作）所以我打开了 DeveloperExtras，这样我就可以在我的 QWebView 中检查 JS 的情况。我只是将这个：粘贴`QWebSettings::globalSettings()->setAttribute(QWebSettings::DeveloperExtrasEnabled, true);`到我的主窗口的构造函数中，然后 javascript 代码开始工作。删除这条线后，它仍然可以正常工作。我不会称其为解决方案，但是，它以某种方式对我有用。

# python - re.escape 修改行为

> ID：10384115
> 
> 赞同：0
> 
> 时间：2012-04-30T12:58:16.063
> 
> 标签：python, regex

我有一个正则表达式来匹配看起来像这样的中间名：

```
first_name = 'Matthew'
last_name = 'Walsh'
for char in first_name:
    new_first_name+='(' + char.lower() + '|' + char.upper() + ')'
for char in last_name:
    new_last_name+='(' + char.lower() + '|' + char.upper() + ')'

middle_name_regex_str = "\b?((" + new_first_name + " (?P<middle_name1>[A-Z][^ ]?[a-z]* )?" + new_last_name + ")|(" + new_last_name + " (?P<middle_name2>[A-Z][^ ]?[a-z]* )?" + new_first_name + "))" 
```

这是它适用的模式：

> MATTHEW B. WALSH, DMD\n出生：\n俄亥俄州阿克伦\n大学：\n1998 年，肯扬学院文学学士

对于这种模式，它可以正常工作，并且与中间名“B”匹配。

但是我想安全起见并转义名字和姓氏，但是当我添加`re.escape`它时失败：

```
middle_name_regex_str = "\b?((" + re.escape(new_first_name) + " (?P<middle_name1>[A-Z][^ ]?[a-z]* )?" + re.escape(new_last_name) + ")|(" + re.escape(new_last_name) + " (?P<middle_name2>[A-Z][^ ]?[a-z]* )?" + re.escape(new_first_name) + "))" 
```

现在正则表达式不正确匹配：

```
regex = re.compile(middle_name_regex_str)
regex.search('MATTHEW B. WALSH, D.M.D.\nBorn:\nAkron, Ohio\nCollege:\nBachelor of Arts, Kenyon College, 1998') 
```

这什么都不返回。

从不改变表达式行为的意义上说， re.escape 不应该安全使用吗？在非字母数字字符之前添加反斜杠会导致它不匹配怎么办？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:17:37.557

在已经包含正则表达式特殊字符的东西上使用 re.escape 将查找那些*文字*字符。

这里有两个建议：

1.  如果可能的话，为什么不`re.IGNORECASE`不管大小写都用它来测试正则表达式？

2.  如果没有，你可以做这样的事情

`first_name= 'Matthew'`

```
last_name = 'Walsh'

first_name_re = "".join('(%s|%s)' % (re.escape(c.upper()),re.escape(c.lower())) for c in first_name)
last_name_re = "".join('(%s|%s)' % (re.escape(c.upper()),re.escape(c.lower())) for c in last_name)

# now that they are safe -we can simply put them in the middle of the regex
middle_name_regex_str = "\b?((%s (?P<middle_name1>[A-Z][^ ]?[a-z]* )?%s)|(%s (?P<middle_name2>[A-Z][^ ]?[a-z]* )?%s))" % (first_name_re, last_name_re, first_name_re, last_name_re) 
```

不确定此处格式化 args 的顺序，但你明白了

# java-me - J2ME中Hashtable的排序

> ID：10384117
> 
> 赞同：0
> 
> 时间：2012-04-30T12:58:21.803
> 
> 标签：java-me, hashtable

我有一些数据，我已经按一些顺序将它们添加到 Hashtable 我现在想要做的是以我输入的相同顺序获取数据

我可以使用什么数据类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:07:23.113

A`Hashtable`不保留任何顺序。
如果您需要广告订单访问权限，请查看是否提供了[Linked Hash Map](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedHashMap.html "LinkedHashMap")`JavaME`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T19:38:03.370

假设您的键是一个字符串，您可以向它添加一些排序，并为排序的数据提供一个 getter 方法。请参见下面的示例：

```
    静态 int 顺序；
    哈希表映射 = 新哈希表（）；

    无效放置（字符串键，对象值）{
        map.put(order + key, value);
        订单++；
    }

    枚举 getSorted() {
        枚举键 = map.keys();
        向量 sortedKeys = new Vector();

        而 (keys.hasMoreElements()) {
            String key = (String) keys.nextElement();
            插入排序（键，排序键）；
        }

        向量 sortedData = new Vector();
        键 = sortedKeys.elements();
        而 (keys.hasMoreElements()) {
            String key = (String) keys.nextElement();
            sortedData.addElement(map.get(key));
        }

        返回 sortedData.elements();
    }

```

[您可以在http://en.wikipedia.org/wiki/Insertion_sort](http://en.wikipedia.org/wiki/Insertion_sort)找到插入排序算法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:31:26.403

您可以下载 Java SE 的源代码并通过删除泛型轻松地在 J2ME 中使用 LinkedHashMap（但您可能还需要在其父类和接口上执行此操作）。[你可以在这里](http://docd.zx6.ru/proj/j2me/Port/port.zip)找到适用于 Java ME 的 LinkedHashMap

# sql - Generate series of incremented numbers from a mutually shared base

> ID：10384121
> 
> 赞同：1
> 
> 时间：2012-04-30T12:58:35.287
> 
> 标签：sql, sql-server-2008, cursor, increment

I have a table called `SharedNumber`, which has only one field - an integer number called `LastNumber` which can have one and only one entry.

There are about 40 or 50 odd completely separate Access databases that use this `LastNumber` entry as a common reference point. It is essentially being used to manually generate unique primary keys for a system that isn't able to generate them by itself. It is ugly and messy, and I am in the process of gradually weaning them off one by one, but in the interim I need to build a process in SQL Server which would reference this same entry.

I am dealing with the following:

**1.**

The shared number table:

```
create table SharedNumber
( 
    [LastNumber] int not null
) ON [PRIMARY]

Insert into SharedNumber
values
(234) --This is the most recent shared number 
```

**2.**

An input data table (`InputTable`) that will continuously receive new entries, and for which new `ContractID` fields values need to be generated manually by incrementing `LastNumber`. For simplicty, let's say this table is uniquely defined on `Name`.

```
create table InputTable
(

    [ContractID] int NULL,
    [Name] varchar(50) not null
 ) ON [PRIMARY]

Insert into InputTable
values
(101,'ABC'),
(102,'DEF'),
(NULL,'GHI'),
(NULL,'JKL'),
(NULL,'MNO') 
```

Entries 'GHI', 'JKL' and 'MNO' need `ContractID` values, so I want to incrementally create new numbers for them, based on `LastNumber`, and then update `LastNumber` to the last one that was generated. The eventual result I want is:

```
ContractID    Name
101           ABC
102           DEF
235           GHI
236           JKL
237           MNO

LastNumber
237 
```

Anyone have any ideas on a good way to do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:44:18.190

一种选择是直接在合同表的 DDL 中执行此操作。这使用两列和一个计算列：

```
create table whatever (
    BuiltInContractId int identity(1000000,1) not null, -- the 1000000 is just to set a range for contract ids
    OverrideContractId int, -- what a user inputs,
    ContractId as coalesce(OverrideContractId, BuiltInContractId),
    . . .
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:05:45.790

在插入时使用代替触发器。

甚至更好：在一个中心位置解决应用程序逻辑中的问题。

# iphone - UINavigationBar background image does not change with rotation

> ID：10384123
> 
> 赞同：2
> 
> 时间：2012-04-30T12:58:39.110
> 
> 标签：iphone, ios, uiimage, uiappearance

I am trying to use a background image using the appearance methods in iOS 5\. I’m setting the background images with these statements:

```
UIImage *portraitImage = [UIImage imageNamed:@"test_bar_portrait.png"];
UIImage *landscapeImage = [UIImage imageNamed:@"test_bar_landscape.png"];
[[UINavigationBar appearance] setBackgroundImage:portraitImage forBarMetrics:UIBarMetricsDefault];
[[UINavigationBar appearance] setBackgroundImage:landscapeImage forBarMetrics:UIBarMetricsLandscapePhone]; 
```

When I run the app, the correct image appears in portrait and landscape, but when I rotate back to portrait, it still has the landscape image shown.

I created a sample test application here: [http://dl.dropbox.com/u/7834263/Appearance%20Test.zip](http://dl.dropbox.com/u/7834263/Appearance%20Test.zip)

And screen shots of what is happening:

![normal portrait](../Images/6bebb5b58a432b19f752f8e61e87580a.png)

![normal landscape](../Images/e32919cf5a94eaf9862569001dc7cae3.png)

![incorrect portrait](../Images/36e5671914707dcde26e9cef5ee4920f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T13:33:24.830

我尝试将您的代码更改为以下代码，它对我来说效果很好。

```
UIImage *portraitImage = [UIImage imageNamed:@"test_bar_portrait.png"];
UIImage *landscapeImage = [UIImage imageNamed:@"test_bar_landscape.png"];
[[UINavigationBar appearance] setBackgroundImage:portraitImage forBarMetrics:UIBarMetricsDefault];
[[UINavigationBar appearance] setBackgroundImage:landscapeImage forBarMetrics:UIBarMetricsLandscapePhone];

self.navigationController.navigationBar.autoresizingMask = UIViewAutoresizingFlexibleTopMargin; 
```

请检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-11T08:10:25.120

**斯威夫特 2.0：**

```
let portraitImage: UIImage = UIImage(named: "Navbar.portrait.png")!
let landscapeImage: UIImage = UIImage(named: "Navbar.landscape.png")!
UINavigationBar.appearance().setBackgroundImage(portraitImage, forBarMetrics: .Default)
UINavigationBar.appearance().setBackgroundImage(landscapeImage, forBarMetrics: .CompactPrompt)
self.navigationController!.navigationBar.autoresizingMask = .FlexibleTopMargin 
```

# entity-framework - 实体框架模型优先：导航属性未更新

> ID：10384133
> 
> 赞同：1
> 
> 时间：2012-04-30T12:59:12.323
> 
> 标签：entity-framework, entity-framework-4

[一切都被剥离以突出问题]

```
SchemeRequest
------------------------------
Id
SchemeId [FK to Schemes Table]
------------------------------

using(var scope = new TransactionScope())
{
    var request = new SchemeRequest { SchemeId = [schemeId] };
    this.dbContext.SchemeRequests.Add(request);
    this.dbContext.SaveChanges();

    this.mailer.SendMail(request); // request.Scheme is null when it should not be

    scope.Complete();
} 
```

我首先使用 EF 模型。现在调用 SaveChanges 后，SchemeRequest 中的导航属性 Scheme 为空。我不确定为什么。任何人都可以帮忙吗？还有另一个导航属性似乎工作正常。我如何调试这个，即我如何找出幕后发生的事情。？

我检查并仔细检查了关系、属性等，但一切似乎都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:11:57.320

预计不会加载导航属性。您只保存一个新实体而不设置其导航属性。当您保存父实体时，EF 不会自动加载另一个实体。

但是，导航属性将在两种情况下设置：

*   您在 new 中设置的`Scheme`已加载并附加到上下文。EF 会自动修复关系并设置导航属性。`SchemeId``SchemeRequest`

*   如果您使用延迟加载，导航属性将在`SchemeId`您访问它后立即加载。但是，您需要创建新`SchemeRequest`的作为延迟加载代理，而不是使用`new`：

    ```
    var request = this.dbContext.SchemeRequests.Create();
    request.SchemeId = schemeId; 
    ```

# php - 在字符串中查找@提及

> ID：10384136
> 
> 赞同：6
> 
> 时间：2012-04-30T12:59:28.103
> 
> 标签：php, regex

尝试用锚标记替换所有出现的@提及，到目前为止我有：

```
$comment = preg_replace('/@([^@ ])? /', '<a href="/$1">@$1</a> ', $comment); 
```

采用以下示例字符串：

```
"@name kdfjd fkjd as@name @ lkjlkj @name" 
```

到目前为止一切正常，但我想忽略那个单一的“@”符号。我尝试在“[^@]”之后使用“+”和“{2,}”，我认为这会强制执行最少数量的匹配，但它不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T13:02:30.480

替换问号 ( `?`) 量词（“可选”）并`+`在您的字符类别后添加一个（“一个或多个”）：

```
@([^@ ]+) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-30T13:08:49.787

正则表达式

```
(^|\s)(@\w+) 
```

可能是你所追求的。

它基本上意味着，行首或空格，然后是 @ 符号，后跟 1 个或多个单词字符。

例如

```
preg_match_all('/(^|\s)(@\w+)/', '@name1 kdfjd fkjd as@name2 @ lkjlkj @name3', $result);
var_dump($result[2]); 
```

给你

```
Array
    (
        [0] => @name1
        [1] => @name3
    ) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-30T02:44:42.083

我喜欢 Petah 的回答，但我稍微调整了一下

```
preg_replace('/(^|\s)@([\w.]+)/', '$1<a href="/users/$2">@$2</a>', $text); 
```

主要区别在于：

*   该`@`符号不包括在内。仅用于显示，不应在 URL 中
*   允许`.`字符（注意：`\w`包括下划线）
*   在替换中，我`$1`在开头添加以保留空格

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-30T13:16:33.077

替换`?`为`+`将起作用，但不像您期望的那样。

`@name`您的表达式在字符串末尾不匹配。

```
$comment = preg_replace('#@(\w+)#', '<a href="/$1">$0</a> ', $comment); 
```

这应该做你想要的。`\w+`代表字母 (a-zA-Z0-9)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-10T21:08:19.910

我建议在匹配`@`当时的一个或多个不是空格或`@`.

“一个或多个”量词 ( `+`)**可防止匹配未提及 one 的提及**。

使用lookbehind 是一个好主意，因为它不仅**可以防止匹配电子邮件地址和其他此类不需要的子字符串**，它还要求正则表达式引擎主要搜索`@`s 然后检查前面的字符。这应该会提高模式性能，因为空格的数量应该始终超过评论中提及的数量。

如果输入文本是多行或可能包含换行符，则添加`m`模式修饰符将告诉`^`匹配所有行开头。如果可以使用换行符和制表符，则 is 使用起来会更可靠`(?<=^|\s)@([^@\s]+)`。

代码：（[演示](https://3v4l.org/Fgvov)）

```
$comment = "@name kdfjd @@ fkjd as@name @ lkjlkj @name";

var_export(
    preg_replace(
        '/(?<=^| )@([^@ ]+)/',
        '<a href="/$1">@$1</a>',
        $comment
    )
); 
```

输出：（单引号来自`var_export()`）

```
'<a href="/name">@name</a> kdfjd @@ fkjd as@name @ lkjlkj <a href="/name">@name</a>' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T13:03:18.557

尝试：

```
'/@(\w+)/i' 
```

# c# - 在 C# 中验证 android in app 购买

> ID：10384142
> 
> 赞同：3
> 
> 时间：2012-04-30T12:59:49.763
> 
> 标签：c#, android, json, in-app-purchase, in-app-billing

在我们的应用程序中，我们有一个应用程序内购买。客户端向 google play 请求购买，并将从 google play 收到的所有信息（收据、nonce、订单等和签名）发送到用 c# 编写的服务器进行验证。我正在使用[这篇文章中的代码示例](https://stackoverflow.com/questions/5605124/android-in-app-billing-verification-of-receipt-in-dot-netc)

问题是验证失败。

注意：客户端以 JSon 格式发送所有数据，为此我们操作从 google play 返回的字符串，如下所示：

在客户端

```
data = data.replace("\"", "\\\""); 
```

在服务器端

```
data = data.Replace("\\", ""); 
```

编辑：JSON 代码示例，从 App 到服务器

```
{
    "data": "{\\\"nonce\\\":3768004882572571381,\\\"orders\\\":[{\\\"notificationId\\\":\\\"android.test.purchased\\\",\\\"packageName\\\":\\\"com.company.appname\\\",\\\"orderId\\\":\\\"transactionId.android.test.purchased\\\",\\\"purchaseState\\\":0,\\\"productId\\\":\\\"android.test.purchased\\\",\\\"purchaseTime\\\":1335790350398}]}",
    "signature": "ML6ocr89x3+oT3ZKnQBEE2mNEVj6LHwt+L4I/bnhl+xCpJcjhsAIhfAumeCKwXonJV4Oh9n3Sa7SVT0F7S9XcgE2xGcf2zOZmxHB1wQcyM7fQiGj39Cyb2zuYf3T6Cs1eerDzHaO1teVQZyIhBPJf4cszD/WikSpHcF8zBTvV58FkRVwl2NR4CEvI2FrKFek8Xq2O4CsclCpS5UJorMKRAer9pcSD1BkFzynQJffbaDcRLFZ7i9vABV+GZ/xWxMGPuYYE77GYk8Q2fejgmwiZ3ysY0VjEfGRCpSA==",
    "userId": 1
} 
```

编辑：该测试失败。验证是一个布尔变量，应该是真的

```
using (RSACryptoServiceProvider rsa = new RSACryptoServiceProvider())
            {
                RSAParameters rsaKeyInfo = new RSAParameters()
                {
                    Exponent = Convert.FromBase64String(ConfigurationManager.AppSettings["RsaKeyInfo.Exponent"]),
                    Modulus = Convert.FromBase64String(ConfigurationManager.AppSettings["RsaKeyInfo.Modulus"])
                };
                rsa.ImportParameters(rsaKeyInfo);
                verified = rsa.VerifyData(Encoding.ASCII.GetBytes(data), "SHA1", Convert.FromBase64String(signature));
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:32:23.933

问题是客户端将从谷歌收到的 JSON 字符串转换为 JSONObject，然后将其转换回 toString()。这导致一些 json 项在字符串中的位置发生变化，从而为签名创建了不同的字节对象，但失败了。

例如 - 这是从谷歌收到的 JSON：

```
{
    "nonce": 1165723044405495300,
    "orders": [
        {
            "notificationId": "android.test.purchased",
            "orderId": "transactionId.android.test.purchased",
            "packageName": "com.company.appname",
            "productId": "android.test.purchased",
            "purchaseTime": 1335874740360,
            "purchaseState": 0
        }
    ]
} 
```

如果您将其操作为 JSONObject ( `new JSONObject(json)`)，然后返回到字符串 ( `json.toString()`)，则可能会导致某些 json 项目的位置发生变化，例如（请注意 orderId 不再是订单数组中的第二个）：

```
{
        "nonce": 1165723044405495300,
        "orders": [
            {
                "notificationId": "android.test.purchased",
                "packageName": "com.company.appname",
                "productId": "android.test.purchased",
                "purchaseTime": 1335874740360,
                "orderId": "transactionId.android.test.purchased",
                "purchaseState": 0
            }
        ]
    } 
```

GetBytes(data) 不返回相同的结果，因此验证失败。

解决方案当然是避免操纵从google接收到的json字符串。只需将其放入您正在构建的 JSONObject 中即可。jsonObj.put（“数据”，jsonStringFromGoogle）。

# sql-server-2008 - 需要使用嵌套游标并获取“无效对象名称”

> ID：10384144
> 
> 赞同：1
> 
> 时间：2012-04-30T13:00:13.210
> 
> 标签：sql-server-2008, tsql, cursor

首先，让我马上声明，我很清楚游标通常是邪恶的，不应该使用——我只是想使用集合，但就是想不出针对这个特定问题的基于集合的解决方案. 如果你告诉我去做一些基于集合的操作，那么我完全赞成，如果你能告诉我你将如何编写这个特定的问题。

基本上，我有很多库存物品需要购买。我想根据最便宜的可用价格进行采购，我知道供应商的价格和他们的库存水平。这里还有一个包装尺寸的问题，如果可能的话，我想按包装尺寸购买。

我已经将我需要购买的东西的清单`#needorders`以及供应商的库存水平和价格拉入了`#orderedprices`。下面我遍历游标`CUR_NEEDED`并创建辅助游标`CUR_AVAILABLE`：

```
 DECLARE CUR_NEEDED CURSOR LOCAL SCROLL_LOCKS
FOR
SELECT        GoodID
        , ConditionID
        , QuantityToShip
        , OrderStatusID
        , RetailerID
        , PackSize
FROM        #needorders
ORDER BY      GoodID
        , ConditionID
        , PurchaseDate DESC
FOR UPDATE

OPEN CUR_NEEDED
FETCH NEXT FROM CUR_NEEDED INTO @GoodID, @ConditionID, @QuantityToShip, @OrderStatusID, @RetailerID, @PackSize

WHILE @@FETCH_STATUS = 0
    BEGIN
        DECLARE CUR_AVAILABLE CURSOR LOCAL SCROLL_LOCKS
        FOR
        SELECT        SupplierStocklistItemID
                , SupplierID
                , StockLevel
                , SupplierCurrencyID
                , CostPrice
        FROM        #orderedprices
        WHERE       #orderedprices.GoodID = @GoodID
        AND     #orderedprices.ConditionID = @ConditionID
        AND     #orderedprices.StockLevel > 0
        ORDER BY    #orderedprices.PriceRank
        FOR UPDATE

        OPEN CUR_AVAILABLE
        FETCH NEXT FROM CUR_AVAILABLE INTO @SupplierStocklistItemID, @SupplierID, @StockLevel, @SupplierCurrencyID, @CostPrice

        WHILE @@FETCH_STATUS = 0
            BEGIN
                /*
                Buy as many @PackSize as we need to cover how many we require, unless the supplier
                only has a certain number, in which case buy that number.
                E.g., need 14, pack size 5, 2 suppliers
                Supplier A has 11
                Supplier B has 40
                Buy 9 from Supplier A, with our remaining need being 3.
                Buy 5 from supplier B, with our remaining need being -2
                */
                --feed rows into #supplierpurchasesbase while @StockLevel > 0

                --Figure out how many we need to buy, based upon PackSize
                IF @QuantityToShip % @PackSize > 0
                    BEGIN
                        SET @Buy = @QuantityToShip - @QuantityToShip % @PackSize + @PackSize
                    END
                ELSE
                    BEGIN
                        SET @Buy = @QuantityToShip
                    END

                IF @StockLevel < @Buy
                    BEGIN
                        --PRINT 'Supplier only has ' + CAST(@StockLevel AS VARCHAR) + ' for us to buy.'
                        SET @Buy = @StockLevel
                    END

                INSERT INTO #supplierpurchasesbase (
                      GoodID
                    , ConditionID
                    , SupplierStocklistItemID
                    , Quantity
                    , SupplierID
                    , SupplierCurrencyID
                    , CostPrice
                    , RetailerID )
                SELECT    @GoodID
                    , @ConditionID
                    , @SupplierStocklistItemID
                    , @Buy
                    , @SupplierID
                    , @SupplierCurrencyID
                    , @CostPrice
                    , @RetailerID

                --update @QuantityToShip & the row in CUR_AVAILABLE
                IF @StockLevel <= @Buy
                    BEGIN
                        UPDATE  CUR_AVAILABLE
                        SET StockLevel = @StockLevel - @Buy
                        WHERE   CURRENT OF CUR_AVAILABLE

                        SET @QuantityToShip = 0
                    END
                ELSE
                    BEGIN
                        UPDATE  CUR_AVAILABLE
                        SET StockLevel = 0
                        WHERE   CURRENT OF CUR_AVAILABLE

                        SET @QuantityToShip = @QuantityToShip - @Buy
                    END

                --update the stocklevel so we don't see the thing again if we've used it up.

                IF @QuantityToShip = 0  --Don't need any more
                    BEGIN
                        UPDATE  CUR_NEEDED
                        SET OrderStatusID = @StatusPendingPO
                        WHERE   CURRENT OF CUR_NEEDED

                        BREAK
                    END
                ELSE    --Need more, move next, if we can
                    FETCH NEXT FROM CUR_AVAILABLE INTO @SupplierStocklistItemID, @SupplierID, @StockLevel, @SupplierCurrencyID, @CostPrice
            END
        CLOSE       CUR_AVAILABLE
        DEALLOCATE  CUR_AVAILABLE

        FETCH NEXT FROM CUR_NEEDED INTO @GoodID, @ConditionID, @QuantityToShip, @OrderStatusID, @RetailerID, @PackSize
    END
CLOSE       CUR_NEEDED
DEALLOCATE  CUR_NEEDED 
```

我遇到的问题是我得到了错误

> 无效的对象名称“CUR_AVAILABLE”。

当我尝试更新时`CURRENT OF CUR_AVAILABLE`。

我尝试将`CUR_AVAILABLE`光标定义为`@CUR_AVAILABLE`但得到不同的错误。我尝试在 的循环`CUR_AVAILABLE`之外定义光标，我尝试不关闭/取消分配光标等。这些似乎都不起作用。`WHILE``CUR_NEEDED`

在这里我会出错的任何想法（除了不使用集合，除非您有基于集合的解决方案）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:04:43.883

以下查询使用递归 CTE，因此不能被视为真正基于集合的解决方案。尽管如此，我仍然希望它比您的两个游标表现更好（或者至少值得尝试）：

```
WITH buys (
  GoodID,
  ConditionID,
  SupplierStocklistItemID,
  Quantity,
  SupplierID,
  SupplierCurrencyID,
  CostPrice,
  RetailerID,
  PriceRank,
  RemainingNeed,
  PackSize
)
AS (
  SELECT
    GoodID,
    ConditionID,
    SupplierStocklistItemID = 0,
    Quantity                = 0,
    SupplierID              = 0,
    SupplierCurrencyID      = 0,
    CostPrice               = CAST(0.00 AS decimal(10,2)),
    RetailerID,
    PriceRank               = 0,
    RemainingNeed           = QuantityToShip,
    PackSize
  FROM #needorders
  UNION ALL
  SELECT
    p.GoodID,
    p.ConditionID,
    p.SupplierStockListItemID,
    Quantity = y.CurrentBuy,
    p.SupplierID,
    p.SupplierCurrencyID,
    p.CostPrice,
    b.RetailerID,
    p.PriceRank,
    RemainingNeed = b.RemainingNeed - y.CurrentBuy,
    b.PackSize
  FROM #orderedprices p
  INNER JOIN buys b ON p.GoodID = b.GoodID
    AND p.ConditionID = b.ConditionID
    AND p.PriceRank = b.PriceRank + 1
  CROSS APPLY (
    SELECT RemainingNeedAdjusted =
      (b.RemainingNeed + b.PackSize - 1) / b.PackSize * b.PackSize
  ) x
  CROSS APPLY (
    SELECT CurrentBuy = CASE
      WHEN x.RemainingNeedAdjusted > p.StockLevel
      THEN p.StockLevel
      ELSE x.RemainingNeedAdjusted
    END
  ) y
  WHERE p.StockLevel > 0
    AND b.RemainingNeed > 0
)
SELECT
  GoodID,
  ConditionID,
  SupplierStocklistItemID,
  Quantity,
  SupplierID,
  SupplierCurrencyID,
  CostPrice,
  RetailerID
FROM buys
WHERE PriceRank > 0
ORDER BY
  GoodID,
  ConditionID,
  PriceRank 
```

基本上，CTE 形成的行与您的查询插入的行几乎相同`#supplierpurchasesbase`，除了它还具有用作内部变量的辅助列。（不过，它们不会被最终的 SELECT 拉动。）

锚点部分基于表形成一组 0 数量记录`#needordered`，以及辅助列的初始值。递归部分包含所有逻辑：计算要购买的数量，为下一次迭代更新“剩余需求”数量，检查是否需要下一次迭代。

已经做出了某些假设，如果它们与您的实际情况不符，我希望您能够找到解决方法。例如，数量、包装大小被假定为整数，并且部分逻辑依赖于此，因为它使用整数除法。还假设`PriceRank`是一个从 1 开始的整数序列，每个 都是唯一的`(GoodID, ConditionID)`。

[可以在 SQL Fiddle 上](http://sqlfiddle.com/#!3/ca082/1)找到、测试、修改和测试此脚本以及最小的测试设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:53:42.553

问题是双重的：更新语法不应该是：

```
UPDATE  CUR_AVAILABLE
SET StockLevel = @StockLevel - @Buy
WHERE   CURRENT OF CUR_AVAILABLE 
```

相反，语法应该是：

```
UPDATE  #orderedprices
SET StockLevel = @StockLevel - @Buy
WHERE   CURRENT OF CUR_AVAILABLE 
```

此外，为了可更新，临时表需要有一个主键：

```
ALTER TABLE #orderedprices ADD CONSTRAINT PRIMARY KEY CLUSTERED (RowCtr) 
```

吸取了教训，我想，但找到解决方案确实让我有些悲伤！

# google-docs-api - Google docs 文件上传和移动收藏问题

> ID：10384149
> 
> 赞同：1
> 
> 时间：2012-04-30T13:00:49.217
> 
> 标签：google-docs-api, google-drive-api

问题 #1

当我将文件上传到谷歌文档时，我收到创建的状态代码“201”，但是当我尝试打开文件时，似乎我做错了什么，因为我无法打开它，当我尝试在我的 PC 上下载并打开它，我看到的是二进制数据而不是文本或图像。当前语言是 APEX，但我认为它是可以理解的。

首先，我获取上传 URL，然后将数据放入该 URL；

```
public void getUploadURL()
{
    Httprequest req = new Httprequest();
    req.setEndpoint('https://docs.google.com/feeds/upload/create-session/default/private/full?convert=false');
    req.setMethod('POST');
    req.setHeader('GData-Version', '3.0');
    req.setHeader('Authorization', 'OAuth '+accessToken);
    req.setHeader('Content-Length', '359');
    req.setHeader('X-Upload-Content-Type', fileType);
    req.setHeader('X-Upload-Content-Length', fileSize);

    Dom.Document requestDoc = new Dom.Document();

    String xml =
            '<?xml version=\'1.0\' encoding=\'UTF-8\'?>'
            +'<entry xmlns="http://www.w3.org/2005/Atom" xmlns:docs="http://schemas.google.com/docs/2007">'
            +'<title>'+fileName+'</title></entry>';

    requestDoc.load(xml);
    req.setBodyDocument(requestDoc);
    Http h = new Http();
    Httpresponse res = h.send(req);
    System.debug('response=\n'+res.getHeader('Location'));
    uploadFIle(res.getHeader('Location'));
}

public void uploadFIle(String uploadUrl)
{
    Httprequest req = new Httprequest();
    req.setEndpoint(uploadUrl);
    req.setMethod('PUT');
    req.setHeader('GData-Version', '3.0');
    req.setHeader('Authorization', 'OAuth '+accessToken);
    req.setHeader('Host', 'docs.google.com'); 
    req.setHeader('Content-Length', fileSize);
    req.setHeader('Content-Type', fileType);
    req.setBody(''+binaryData);
    Http h = new Http();
    Httpresponse res = h.send(req);
    System.debug('response=\n'+res.getBody());
} 
```

至于“binaryData”属性-我使用这样的javascript从页面接收它：

```
<input type="file" id="myuploadfield" onchange="getBinary()"/>
    <script>
        function getBinary()
        {
            var file = document.getElementById('myuploadfield').files[0];
            fileSizeToController.val(file.size.toString());
            fileNameToController.val(file.name.toString());
            fileTypeToController.val(file.type.toString());
            var r = new FileReader();
            r.onload = function(){ binaryToController.val(r.result); };
            r.readAsBinaryString(file);
        }
    </script> 
```

r.onload = function(){ binaryToController.val(r.result); }; - 这是将文件二进制数据发送到我的控制器的字符串。

问题 #2

我正在尝试将一个集合（文件夹）移动到另一个，并使用[这篇文章](https://developers.google.com/google-apps/documents-list/#adding_a_resource_to_a_collection)（协议选项卡而不是 .NET）。问题是我需要移动集合而不是复制它，当我使用这篇文章将我的集合添加到另一个集合时，我目前正在添加对我的集合的引用，而不是将整个集合从一个地方移动到另一个地方。

请告诉我我做错了什么。

感谢您的考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:00:25.463

当您执行`'' + binaryData`.

一般来说，我在使用[文件切片方面](http://www.html5rocks.com/en/tutorials/file/dndfiles/#toc-slicing-files)取得了更大的成功，这里是 webkit 的一个例子：

```
var chunk = this.file.webkitSlice(startByte, startByte + chunkSize, file_type);
// Upload the chunk
uploadChunk(startByte, chunk, callback); 
```

# c++ - 查找未知连续循环的最小值和最大值

> ID：10384156
> 
> 赞同：3
> 
> 时间：2012-04-30T13:01:19.107
> 
> 标签：c++, algorithm, while-loop

我试图找到下面给出的连续 while 循环的最小值和最大值，但不知何故我无法得到正确的逻辑。请让我知道我哪里出错了。

```
while (true)
   {
         Function(&RawX, &RawY, &RawZ);// Keeps generating new RawX,Y and Z values

         if(MaxRawX < RawX)
            MaxRawX = RawX;
         if(MinRawX > RawX)
            MinRawX = RawX;

         Output("MaxRawX:%0.2f",MaxRawX);
   } 
```

我使用上述算法面临的问题是 RawX、RawY 和 RawZ 的值在不断变化。例如：在某一时刻，我的值范围从 -46 到 -35。我希望我的程序将 MinRawX 显示为 -46，将 MaxRawX 显示为 -35。在其他时候，我的值可能在 201 到 215 之间，我希望它显示 MaxRawX 为 215，MinRawX 显示为 201。它基本上是我从硬件接收到的一些传感器角度数据。考虑到这是非常基本的但无法弄清楚，我确信我在这里做错了。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T13:20:45.277

如果我理解正确，您希望在**给定时间范围内**拥有最小值和最大值。您使用的解决方案保持程序开始以来的最小值和最大值。

根据您的需要，您有几种解决方案：例如，您可以不时重置最小值和最大值，就像@dirkgently 建议的那样。如果您想要一个移动范围，以便在任何时间点都有`n`最后一次测量的最小值和最大值，那么您将不得不使用更复杂的解决方案。我唯一能想到的是将测量值保存在 FIFO 容器中：

```
std::deque<int> lastRawXs;
const int frameSize = 100; // only keep the last 100 measures    

while (true)
{
    // Keeps generating new RawX,Y and Z values
    Function(&RawX, &RawY, &RawZ);// 

    if (lastRawXs.size() >= frameSize)
    {
        lastRawXs.pop_front();
    }
    lastRawXs.push_back(RawX);

    typedef std::deque<int>::const_iterator iterator;
    std::pair<iterator, iterator> minMaxRawX =
        boost::minmax_element(lastRawXs.begin(), lastRawXs.end());

    Output("MinRawX:%0.2f", *minMaxRawX.first);
    Output("MaxRawX:%0.2f", *minMaxRawX.second);
} 
```

**编辑**：这是使用[循环缓冲区](http://en.wikipedia.org/wiki/Circular_buffer)的替代（更好）解决方案：

```
const int frameSize = 100;
std::circular_buffer<int> lastRawXs(frameSize);

while (true)
{
    Function(&RawX, &RawY, &RawZ); // keeps generating new RawX,Y and Z values

    lastRawXs.push_back(RawX); // overwrites old measures if buffer is full

    typedef std::circular_buffer<int>::const_iterator iterator;
    std::pair<iterator, iterator> minMaxRawX =
        boost::minmax_element(lastRawXs.begin(), lastRawXs.end());

    Output("MinRawX:%0.2f", *minMaxRawX.first);
    Output("MaxRawX:%0.2f", *minMaxRawX.second);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T13:21:04.963

似乎您只需要*最近*的最大/最小值，因此您可以执行以下操作：

```
const int MAX_AGE = 1000; // number of samples before min/max expires
int MinRawXAge = INT_MAX;
int MaxRawXAge = INT_MAX;

while (true)
{
    if (MinRawXAge > MAX_AGE) // test to see whether MinRawX has expired
    {
        MinRawX = INT_MAX;
        MinRawXAge = 0;
    }

    if (MaxRawXAge > MAX_AGE) // test to see whether MaxRawX has expired
    {
        MaxRawX = INT_MIN;
        MaxRawXAge = 0;
    }

    Function(&RawX, &RawY, &RawZ); // Keeps generating new RawX, Y and Z values

    if (MaxRawX < RawX) // test for new MaxRawX
    {
        MaxRawX = RawX;
        MaxRawXAge = 0;
    }
    else
    {
        MaxRawAge++;
    }

    if (MinRawX > RawX) // test for new MinRawX
    {
        MinRawX = RawX;
        MinRawXAge = 0;
    }
    else
    {
        MinRawAge++;
    }

    Output("MinRawX: %0.2f, MaxRawX: %0.2f", MinRawX, MaxRawX);
} 
```

这会跟踪最小值和最大值的*年龄*（以样本为单位），当它们超过预定阈值（在上述情况下为 1000 个样本）时，它们“过期”并被更新的最小值/最大值替换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T13:09:37.193

好吧，您的规范可能有问题。

您的代码将连续打印当前最大值。但从您的描述看来，您实际上并不想要最大值。所以你想要什么？

在开始编写代码之前，您需要正确的规范。

# exception - DATA_ERR：Chrome 中的 DOM IDBDatabase 异常 5，如何修复？

> ID：10384163
> 
> 赞同：2
> 
> 时间：2012-04-30T13:01:53.770
> 
> 标签：exception, dom, google-chrome, indexeddb

像这样的代码：

```
var transaction = db.transaction(["main"], IDBTransaction.READ_WRITE);
var store = transaction.objectStore("main");
var request = store.add(object); 
```

它在 Firefox 中正常工作，但在 Chrome 中，它在最后一行抛出“DATA_ERR：DOM IDBDatabase Exception 5”。这个例外是什么意思？如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T00:42:11.450

如果您的 ObjectStore 具有 autoIncrement:true，Chrome 会抛出此错误。 [[来源]](http://www.raymondcamden.com/index.cfm/2012/4/26/Sample-of-IndexedDB-with-Autogenerating-Keys)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T22:30:38.980

IndexedDB [Exception 5](https://developer.mozilla.org/en/IndexedDB/IDBDatabaseException)表示“提供给操作的数据不符合要求”。这通常是因为您添加了一个唯一索引，例如，同时提供了一个缺少该属性的对象。

我的猜测是您缺少索引属性，但要确定地回答这个问题，我需要查看您的`main`objectStore 设置代码和`object`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T07:56:58.300

这至少在 2 个不同的场合发生在我身上：（a）当我升级数据库版本并写入旧版本时，以及（b）另一种情况，当它通过添加 onerror 和 onsuccess 处理程序奇怪地得到修复时，就像这样. 也许其中之一对您有用...

```
req.onerror = function () {
    console.log("Oppsie!");
}
req.onsuccess = function () {
    console.log("Hurrah!");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T05:49:48.737

此错误可能由多种原因引起。我相信这可能是 Linux Chrome 版本 22.0.1197.0 (145517) 上的错误。我使用了相同的代码，Firefox 工作但 Chrome 引发了这个错误。我试图清除一切。最后，我使用以下命令启动了 Chrome：

```
./chrome --user-data-dir=/tmp/chrome 
```

它奏效了。

# javascript - Gmap 标记悬停缩放

> ID：10384164
> 
> 赞同：2
> 
> 时间：2012-04-30T13:01:54.770
> 
> 标签：javascript, html, google-maps

我可以在悬停时更改标记大小吗？我需要在悬停时增加标记大小（2-3 px）并在鼠标移出时减小到默认大小。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T13:09:18.600

如果您使用自定义图标，则可以轻松更改鼠标悬停时的图像：

```
[...]

var marker_image_medium = new google.maps.MarkerImage('medium.png');
var marker_image_big = new google.maps.MarkerImage('big.png');

var marker = new google.maps.Marker({
    position: myLatlng, 
    map: map,
    icon: marker_image_medium,
    title: "Exemple"
});

google.maps.event.addListener(marker, 'mouseover', function() {
    marker.setIcon(marker_image_big);
});
google.maps.event.addListener(marker, 'mouseout', function() {
    marker.setIcon(marker_image_medium);
}); 
```

这是一个部分示例，您必须初始化地图、声明 myLatlng 等。

**编辑**：oups，setIcon() 上的小错误，已更正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T10:59:33.217

你需要改变

```
google.maps.event.addListener(marker, 'mouseout', function() {
    marker.setIcon(marker_image_medium);
}); 
```

到

```
google.maps.event.addListener(marker, 'mouseout', function() {
    this.setIcon(marker_image_medium);
}); 
```

`mouseover`这是在和上更改图像的正确方法`mouseout`。

函数内部需要使用`this`而不是`marker`

# java - 当我在第一个下拉选择中选择值时，如何在第二个下拉选择中添加值？

> ID：10384167
> 
> 赞同：1
> 
> 时间：2012-04-30T13:01:58.733
> 
> 标签：java, wicket, dropdownchoice

我有两个下拉选择，从第一个下拉选择中选择值后，我需要
从数据库表中选择相关值列表并将此列表添加到第二个
下拉选择中。这是我的示例代码供参考。
给我任何提示或参考。

```
 HTML:
 <select wicket:id="DDCStartDate" style=" width : 98px;"></select>
 <select wicket:id="DDCEndDate" style=" width : 98px;">. 
```

Java代码：

```
 final DropDownChoice DDCStartDate=new DropDownChoice("DDCStartDate",new    
         PropertyModel(collectionReportModel, "DDCStartDate"),lst);
  add(DDCStartDate);
  DDCStartDate.setOutputMarkupId(true);

  final DropDownChoice DDCEndDate=new DropDownChoice("DDCEndDate",);
  add(DDCEndDate);
  DDCEndDate.setOutputMarkupId(true); 
```

POJO代码：

```
 private Date DDCStartDate;
private Date DDCEndDate;
    public Date getDDCStartDate() 
{
    return DDCStartDate;
}
public void setDDCStartDate(Date dDCStartDate) 
{
    DDCStartDate = dDCStartDate;
}

public Date getDDCEndDate() {
    return DDCEndDate;
}
public void setDDCEndDate(Date dDCEndDate) {
    DDCEndDate = dDCEndDate;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T13:24:47.817

您可以使用 AJAX 回调来执行此操作。检查 Wicket 示例中的“下拉选择示例”。

[http://www.wicket-library.com/wicket-examples/ajax/](http://www.wicket-library.com/wicket-examples/ajax/)

[这](http://www.wicket-library.com/wicket-examples/ajax/wicket/bookmarkable/org.apache.wicket.examples.source.SourcesPage?5&SourcesPage_class=org.apache.wicket.examples.ajax.builtin.ChoicePage)是向您展示如何使用正确模型执行此操作的重要文件。

# ios - 在 staticLibrary 中加密字符串时出错

> ID：10384170
> 
> 赞同：1
> 
> 时间：2012-04-30T13:02:06.043
> 
> 标签：ios, ios5, encryption, ios4, ios-simulator

在我的应用程序中，我使用加密和解密。

在将字符串输入到本地数据库之前，我正在对其进行加密，在从数据库中获取数据之后，我正在对其进行解密并在我的应用程序中使用。它工作正常。我从 [下面的链接中使用了加密/解密](http://blog.objectgraph.com/index.php/2010/04/20/encrypting-decrypting-base64-encode-decode-in-iphone-objective-c/)

**加密时：**

```
 NSString *myKey=@"any string more than 8 char";

    NSData *data ; 
    NSData *encryptedData; 
    NSString *encryptPassword,*encryptPasscode;

    // 1) Encrypt

    data = [password dataUsingEncoding: NSASCIIStringEncoding];
    encryptedData = [data AESEncryptWithPassphrase:myKey];

    // 2) Encode Base 64

    [Base64 initialize];
    encryptPassword = [Base64 encode:encryptedData]; 
```

**解密时：**

```
 NSData *decryptedData;
    NSData  *b64DecData;

    field1 = (char *) sqlite3_column_text(selectPasscodeStatement, 0);
    NSString *fieldStr1 = [[NSString alloc] initWithUTF8String: field1];

     // 3) Decode Base 64

      b64DecData = [Base64 decode:fieldStr1];

     // 4) Decrypt

       decryptedData = [b64DecData AESDecryptWithPassphrase:myKey];

       retrivedPasscode = [[NSString alloc] initWithData:decryptedData encoding:NSASCIIStringEncoding]; 
```

但我已经为同一个项目制作了 staticLibrary。我在另一个项目中使用那个 staticLibrary。当我运行该项目时，在加密时它给了我下面的错误

> **-[NSConcreteMutableData AESEncryptWithPassphrase:]：无法识别的选择器发送到实例 0x6a3fe40**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:06:44.523

您是否导入了类别头文件：

```
#import "NSData-AES.h" 
```

我相信有`AESDecryptWithPassphrase`定义的方法。没有它，应用程序不知道该方法。

只是为了澄清-您必须将类别头文件导入到要使用该类别添加的功能的每个文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T07:05:32.317

您需要在项目的构建设置中进行更改，它将静态库与主项目链接。跟着这些步骤：

1）单击构建设置选项卡。

2）搜索“其他链接器标志”。

3）添加'-all_load'标志。

4）构建并运行项目。

它对我来说很好。

# cocos2d-android - cocos2d中场景和图层的区别

> ID：10384172
> 
> 赞同：5
> 
> 时间：2012-04-30T13:02:23.243
> 
> 标签：cocos2d-android

谁能告诉我COCOS2D中场景和图层之间的区别。我对此感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:07:36.373

兄弟，很简单。每当您使用 COCOS2D 时，您都会拥有一个扩展 Layer 的类。您将从主要活动中调用。所以对于一个可显示的屏幕，只能有一层。在类（扩展图层）中可以有任意数量的场景。您甚至可以设置各个场景的尺寸。但是，请确保在从一个场景切换到另一个场景后立即释放内存......享受...... :)

# mysql - MySQL：使用 mysqldump 转储完整数据库时，存储过程、函数和触发器会发生什么

> ID：10384174
> 
> 赞同：4
> 
> 时间：2012-04-30T13:02:39.700
> 
> 标签：mysql

我一直`mysqldump`用于备份目的。我们这里有一个新的数据库，里面有很多函数、过程和触发器。如果我进行完整的数据库备份，这些函数、过程或触发器会发生什么情况？

这些触发器、函数和过程也会被转储吗？在这种情况下是否需要采取任何预防措施？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T13:06:03.780

> 默认情况下，mysqldump 将备份所有触发器，但不备份存储过程/函数。有 2 个 mysqldump 参数控制此行为：
> 
> ```
> –routines (procedures and functions) – false by default
> –triggers – true by default 
> ```

[http://www.ducea.com/2007/07/25/dumping-mysql-stored-procedures-functions-and-triggers/](http://www.ducea.com/2007/07/25/dumping-mysql-stored-procedures-functions-and-triggers/)

# iphone - iOS蓝牙打印机？

> ID：10384177
> 
> 赞同：13
> 
> 时间：2012-04-30T13:02:56.127
> 
> 标签：iphone, ios, ipad, printing, zebra-printers

是否有人建议一款能够使用良好的 SDK 打印收据的移动打印机，以无线连接开发的 iOS 应用程序？打印机应该很小，并且应该使用可充电电池供现场使用。我不能使用 wifi，因为并非总是可以使用受信任的接入点（客户场所），所以我想使用蓝牙，但当然欢迎任何建议！

仅供参考，我已经检查了适用于 iOS 的 Zebra 打印机 SDK，但它似乎只能使用 TCP/IP 地址进行打印，这意味着（据我所知）我应该使用 wifi。在我的情况下，应用程序应该在与蜂窝网络连接的 iPad 上现场使用。在 iPad 中，没有热点，并不总是有可用的 wifi 接入点将 iPad 和打印机连接到同一网络以使用 TCP/IP 地址。这就是我猜测最后机会应该是蓝牙的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T18:13:47.370

遗憾的是 iOS5 不支持蓝牙打印。

[http://support.apple.com/kb/ht3647](http://support.apple.com/kb/ht3647)

您是否考虑过通过 WEP 连接到网络打印机的 VPN？

或者，可以使用自己的电子邮件地址设置某些打印机。PDF 附件可以通过此地址发送以进行打印。这些电子邮件可以加密发送。

我知道这不是理想的答案，但在 iOS 正确更新之前它可能暂时有效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T05:59:08.677

是的，我有适用于 IOS 设备的蓝牙打印机，它是 Apple MFI 认证的

请参阅此 URL [http://www.bluebamboo.com/other_file/P25i%20Datasheet%20%28EN%29%20v1.0%2009-Oct-2011.pdf的详细信息](http://www.bluebamboo.com/other_file/P25i%20Datasheet%20%28EN%29%20v1.0%2009-Oct-2011.pdf)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T07:43:55.520

我知道您已经接受了一个答案，但这是另一个答案：让技术人员带上他们自己的无线基站（也许是 AirPort Express）并创建自己的无线网络（无法访问互联网，但不需要），并具有适当的安全性. 然后，您可以使用任何支持 HP 无线功能的打印机，并将 iOS 设备和打印机连接到由无线接入点创建的 wifi 网络（应使用 DHCP 设置以在 192.168.xx 等不可路由范围内提供 IP 地址，明显地）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-30T14:16:17.043

我们还有一个通过 MFI 认证的蓝牙打印机以及一个易于理解的 iOS SDK。请查看 Appstore 上的 EZPay App。该应用程序目前是日文的（我们的一位客户），但描述解释了一些关于打印机的信息。我目前正在旅行，但如果你给我发一封来自 App Store 联系信息的电子邮件。我可以给你一些其他的东西。干杯... B

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-24T04:12:07.443

无需开发完整的 SDK，查看 Mobi Print。它已经实现了 Zebra sdk 并连接到任何 Web 服务或 ODBC 数据库。它还在该应用程序中存储了标签/收据格式，因此只需上传您的格式，就可以了。

[这是 Mobi Print 的链接](http://www.arrowheadphx.com/mobi-print/)

# apache - 使用 mod_jk 在 Apache 和 Tomcat 之间映射 URL

> ID：10384181
> 
> 赞同：1
> 
> 时间：2012-04-30T13:03:09.013
> 
> 标签：apache, tomcat, ubuntu, url-rewriting, mod-jk

我正在使用`Apache/2.2.14`and`Apache Tomcat/6.0.29`在`Ubuntu Server 10.04.3 LTS`.

这是我的`jk.conf`：

```
JkWorkersFile /etc/libapache2-mod-jk/workers.properties
JkMount       /portal/* worker1
JkLogLevel    debug
JkMountCopy   All 
```

这是我的`workers.properties`：

```
ps=/

# Define 1 real worker named worker1
worker.list=worker1

# Set properties for worker named worker1 to use ajp13 protocol,
# and run on port 8009
worker.worker1.type=ajp13
worker.worker1.host=localhost
worker.worker1.port=8009
worker.worker1.lbfactor=1
worker.worker1.socket_keepalive=1
worker.worker1.socket_timeout=300 
```

问题是，每当我尝试通过 apache 通过[http://my.host.com/portal](http://my.host.com/portal)访问 tomcat 时，tomcat 都会回复：

```
13:39:30,683 INFO  [PortalImpl:3829] Current URL /portal/ generates exception: null 
```

如果我为工作人员使用不同的挂载点，问题就会消失：

```
JkMount       /portal/* worker1 
```

但这迫使我在这里访问我的 tomcat 实例：[http://my.host.com](http://my.host.com)，这是我不想要的。

有什么方法可以使用重写 URL`mod-jk`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:07:15.893

如果您只使用 mod_proxy 而不是 mod_ajp，则可以跳过所有配置...

```
ProxyPass /foo http://localhost:8080/bar
ProxyPassReverse /foo http://localhost:8080/bar 
```

这会将 /foo 代理到在端口 8080 上运行的本地服务器 URL /bar。

# wcf - WCF REST 与 Windows Phone 通信

> ID：10384182
> 
> 赞同：1
> 
> 时间：2012-04-30T13:03:18.560
> 
> 标签：wcf, windows-phone-7, rest, azure

关于从我的 Windows Phone 应用程序通过 RestSharp 发送到我创建的自托管 WCF 服务的休息请求，我遇到了一些麻烦。该请求在模拟器中运行良好，并且请求返回结果，但是当我尝试在实际设备上的应用程序上执行请求时，它失败并且请求不返回任何内容。

经过大量研究后，我发现 Windows Phone 显然不支持 webHttpBinding，因此我需要在我的**Web.config**文件中添加一个**basicHttpBinding**端点。但是，当我尝试这样做时，我遇到了与拥有多个端点相关的几个错误，而且我似乎无法找到任何解决方案来成功使用这两个端点。当我导航到 localhost:81/mywebservice.svc 时，将端点切换到 basicHttpBinding 并注释掉 webHttpBinding 也会导致错误

 **```
 "System.InvalidOperationException: For request in operation analyseFace to be a stream the operation must have a single parameter whose type is Stream." 
```

请求应附加请求的流。它显示了一个使用原始代码和相同地址的普通帮助页面。

**我的 web.config 文件**

```
 <trace>
      <listeners>
        <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
          name="AzureDiagnostics">
          <filter type="" />
        </add>
      </listeners>
    </trace>
  </system.diagnostics>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
        <behavior name="servicebehavior">
          <!--<serviceMetadata httpGetEnabled="true"/>-->
          <serviceDebug includeExceptionDetailInFaults="true" httpHelpPageEnabled="true"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="restbehavior">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <services>
        <service behaviorConfiguration="servicebehavior" name="VizageAPIWebRole.vizage">
          <endpoint address="" behaviorConfiguration="restbehavior" binding="webHttpBinding" name="RESTEndPoint" contract="VizageAPIWebRole.Ivizage" />
          <!--<endpoint address="" binding="basicHttpBinding" contract="VizageAPIWebRole.Ivizage" />-->
        </service>
    </services>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <bindings>
      <webHttpBinding>
        <binding name="RestBinding">
          <readerQuotas maxStringContentLength="5242880" maxArrayLength="16384" maxBytesPerRead="4096" />
          <security mode="None">
          </security>
        </binding>
      </webHttpBinding>
    </bindings>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

**我的 WCF 服务**

```
[ServiceContract]
public interface Ivizage
{
    [WebInvoke(UriTemplate = "/agerecog/{auth}", Method = "POST")]
    VizageResult analyseFace(string auth, Stream dataStream);

} 
```

我想知道是否有人可以帮助我确定我必须在 web.config 中编辑哪些代码才能使这对两个端点都有效，因为到目前为止我尝试过的事情都没有运气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:42:56.273

您的代码似乎是 REST 服务，但 basicHttpBinding 支持 SOAP。所以请继续使用 webHttpBinding。但是在Windows Phone端，不能使用WCF，需要使用WebClient或者HttpWebRequest来访问REST服务。WCF 只能帮助我们访问一个 SOAP 服务。

此外，您提到该应用程序在模拟器中运行良好，因此不太可能是编码问题。如果您可以检查您的真实手机设备是否能够访问互联网，那就更好了。另请确保您使用的是云服务的地址，而不是 127.0.0.1。本地地址在真实设备上不起作用。

此致，

明旭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:31:11.653

从异常和您的配置 - 您正在使用默认使用 basicHttpBinding 的简化配置。您必须明确定义服务端点

```
 <services>
      <service  name="WcfRest.Ivizage">
        <endpoint behaviorConfiguration="restbehavior" binding="webHttpBinding"
         contract="WcfRest.Ivizage" />
      </service>
 </services> 
```

编辑：看起来不[支持webHttp](http://msdn.microsoft.com/en-us/library/dd470110%28VS.95%29.aspx)**

# php - 如何验证excel表值，以便只有正确的数据类型值通过php插入mysql数据库

> ID：10384188
> 
> 赞同：0
> 
> 时间：2012-04-30T13:03:50.343
> 
> 标签：php

我想将 .csv 文件实际导入数据库，我的问题是当我验证 excel 表的数据时，只有实际数据应该插入数据库。如果其中一行与实际数据类型不匹配，那么它应该`this rows can not be insert in to database`仅使用 php.ini 显示消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:06:27.940

[http://php.net/manual/en/function.fgetcsv.php](http://php.net/manual/en/function.fgetcsv.php)有时手册很好。:)

# mysql - 如何将数据导入 MySQL 模型 (EER)？

> ID：10384189
> 
> 赞同：3
> 
> 时间：2012-04-30T13:03:54.413
> 
> 标签：mysql, sql, mysql-workbench, data-modeling, eer-model

我是 EER 图和可视化数据库建模的新手。

我有一个我创建的 mySQL 模型 (EER)，我们正向工程师使用导出的 SQL 创建我们的数据库。

在 EER 中编辑表格时，您也可以插入数据。在本例中，我有一条 SQL 语句，将 250 个国家/地区插入表中。

如何针对我的 EER 运行此 SQL 脚本 - 还是我必须手动输入每一个？

**附加想法：**也许我可以指定一个在正向工程数据库时需要运行的存储过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:40:40.790

从 MySQL Workbench 5.2.45 开始，可以选择从 CSV 文件导入。马克提交了一个功能请求，这就是结果。:)

工作台 -> 模型 -> 模型注释 -> 插入 -> 从外部文件导入记录。

# episerver - 是否可以根据文件类型和文件名对 ImageVault 进行排序？

> ID：10384198
> 
> 赞同：0
> 
> 时间：2012-04-30T13:05:15.513
> 
> 标签：episerver

我正在使用以下代码对 ImageVault 中的图像进行排序：

```
//ImgListControl is of type:ImageStoreNET.Developer.WebControls.IVFileList
ImgListControl.SortBy = IVFileSortBy.FileName;
ImgListControl.SortDirection = IVSortDirection.Ascending; 
```

但是，我想对 IVFileSortBy.FileExtension 进行分组，然后对 FileName 进行排序这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:46:14.487

您可能不得不放弃 ImageVault:IVAlbumTree 的使用（如果这是您正在使用的控件？）并自己构建一些东西。我相当确定使用 LINQ .OrderBy(x => extension).ThenBy(x => name) 很容易获得您所追求的排序。

# powershell - 确定从哪里执行脚本

> ID：10384199
> 
> 赞同：1
> 
> 时间：2012-04-30T13:05:18.810
> 
> 标签：powershell, share, local, delete-file

我有一个脚本，可以将项目发送到回收站（如果选择）或永久删除项目。如果脚本在本地运行，则回收片可以正常工作。

但是，如果它是从另一台计算机运行的——在这种情况下，我的本地计算机针对服务器上的共享文件夹运行脚本——删除是**永久**的，并且不会被发送到回收站。脚本（在之前的运行中）通过首先将存档位设置为 TRUE 来决定要删除的**内容****，**然后（在查看要保留多少备份之后）取消设置要在下一次删除的项目的存档位执行相同的脚本。

我的想法是更改主脚本以将文件标记为删除，但仅在脚本在本地运行时才执行删除文件的物理操作，或者将回收脚本（单独）作为任务在将删除该项目并将其发送到将以设定的时间间隔运行的回收站的服务器上。

我的问题-

1.  在 Powershell（使用 2.0）中，您如何确定源计算机与目标计算机？在这种情况下，脚本是从 MyPC 运行的，它的目标是 Server1。
2.  无论目标是映射驱动器 (Drive Y:) 还是服务器名称 (\Server1) 的目标，脚本都将运行。在这两种情况下，您如何区分上述问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:29:49.267

1.  您可以使用 $env:COMPUTERNAME 获取本地计算机名称。使用它将值与目标服务器名称进行比较。

2.  对于每个文件，您必须首先检查驱动器是否是映射驱动器，如果是，则从 wmi 实例获取服务器名称并将其与 $env:COMPUTERNAME 进行比较。

`Split-Path`您可以使用cmdlet获取文件的 Drive 限定符：

```
PS> $drive = Split-Path Q:\test.txt -Qualifier
PS> $drive
Q: 
```

然后使用 WMI 获取服务器名称：

```
PS> (gwmi win32_logicaldisk -filter "drivetype=4 and deviceid='$drive'").ProviderName.Split('\')[2]    
Server1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T20:25:43.743

OP写道：

> @Shay - 感谢您的帮助。我从您在各种 Powershell 网站上发表的许多帖子中学到了很多东西。
> 
> 我几乎可以使用您建议的所有内容，并且只需要添加一行额外的代码即可使其正常工作。我检查了属性`([System.Uri]$markedFile).IsUnc`以确定我读取的文件名是否是 UNC 名称。
> 
> 如果驱动器已映射，则返回 False，如果是 UNC，则返回 True。由此，我可以获取服务器名称并与环境进行比较。代码如下。
> 
> ```
> $markedFile = "\\Server1\foldername1\Error.log"
> #$markedFile = "Y:\foldername1\Error.log"
> 
> $TargetComputer = $null
> $thisComputer = Get-Content env:computername
> if (Test-Path $markedFile) {  # if file exists
>     if (([System.Uri]$markedFile).IsUnc) { # if it's a UNC name & not a mapped drive name
>         $TargetComputer = ([System.Uri]$markedFile).Host
>         }
>     else {  #file is not a UNC name, it must be a mapped drive 
>         $drive = Split-Path $markedFile -Qualifier
>         $TargetComputer = (gwmi win32_logicaldisk -Filter "drivetype=4 and deviceid = '$drive'").Providername.split('\')[2]
>     }
> } 
> ```
> 
> 上面的代码可以使用任何一种方式。再次感谢你的帮助！

# mysql - 使用 MySQL Workbench 搜索所有表

> ID：10384201
> 
> 赞同：15
> 
> 时间：2012-04-30T13:05:27.880
> 
> 标签：mysql, mysql-workbench

我可以使用 MySQL GUI 在所有表中搜索字符串吗？

或者是这样的：[mySQL 查询在数据库中的所有表中搜索字符串？](https://stackoverflow.com/questions/7523039/mysql-query-to-search-all-tables-within-a-database-for-a-string)唯一的解决方案？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-07-14T17:16:49.343

是的。

> 从 中`Schema Tree`，选择要搜索的表和/或模式，右键单击，然后`Search Data Table`从上下文菜单中选择 ...。

搜索有一些选项：

> 搜索符合以下条件的表字段：`"CONTAINS"`、`"Search using ="`、`"Search using LIKE"`、`"Search using REGEXP"`。这些搜索选项不区分大小写。

![在此处输入图像描述](../Images/7b5642a3b3e3749e1887ba9fb3b2ca77.png)

[您可以在官方文档](https://dev.mysql.com/doc/workbench/en/wb-develop-sql-editor-table-search.html)中获得更多信息。

# hadoop - hadoop可以用作分布式队列服务器吗？

> ID：10384204
> 
> 赞同：3
> 
> 时间：2012-04-30T13:05:44.063
> 
> 标签：hadoop, distributed-computing

我正在考虑学习hadoop，但不确定它是否能解决我的问题。基本上我有一份工作，有一个队列和一群工人。每个工作人员完成少量工作，然后保存结果（如果成功）或将其发送回队列以进行进一步处理。我的问题是可扩展的，受到网络带宽（ec2）的限制，它永远无法跟上多个 CPU 处理数据的速度。我想也许我可以在 hadoop 集群中用 Java 运行我的工作，并让 hadoop 通过队列分配工作。这会是更好的方法吗？我假设hadoop可以排队并尝试尽可能在本地运行作业以最小化带宽使用并最大化cpu使用率是正确的？我的程序非常受 cpu 限制，但我最近的大多数性能问题都与通过网络传递工作有关（我希望尽可能地将工作保持在本地），但我看到的 hadoop 教程和我的问题之间的区别是在教程中，所有的工作都是提前知道的，而我的程序不断地为自己生成新的工作（直到它最终完成）。这会起作用吗？它会帮助我减少通过网络传递消息的影响吗？但是我看到的hadoop教程和我的问题之间的区别在于，在教程中所有的工作都是预先知道的，而我的程序不断地为自己生成新的工作（直到它最终完成）。这会起作用吗？它会帮助我减少通过网络传递消息的影响吗？但是我看到的hadoop教程和我的问题之间的区别在于，在教程中所有的工作都是预先知道的，而我的程序不断地为自己生成新的工作（直到它最终完成）。这会起作用吗？它会帮助我减少通过网络传递消息的影响吗？

抱歉，我是 hadoop 新手，想知道它是否可以解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:15:52.700

Hadoop 就是在大型数据集上以类似批处理的模式运行作业。很难让它具有某种类似队列的行为，但并非不可能。有 Apache ZooKeeper，如果您需要，它会为您提供同步以构建队列。

有很多工具可以解决看起来您正在尝试解决的问题。我建议看看[RabbitMQ](http://www.rabbitmq.com/)。如果你使用 python，[Celery](http://celeryproject.org/)非常棒。

# iphone - UIView 阴影不起作用

> ID：10384207
> 
> 赞同：26
> 
> 时间：2012-04-30T13:05:47.800
> 
> 标签：iphone, objective-c, ios, ios5

这是我的代码。

```
listView.layer.masksToBounds = NO;
listView.layer.shadowOffset = CGSizeMake(-3, 3);
listView.layer.shadowColor=[[UIColor blackColor] CGColor];
listView.layer.shadowRadius = 4;
listView.layer.shadowOpacity = 1.0;
[listView.layer setShouldRasterize:YES]; 
```

它适用于阴影效果。

在改变的同时

```
listView.layer.masksToBounds = YES; 
```

我没有得到阴影效果。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-30T13:17:46.397

阴影实际上是在 UIView 下方绘制的。如果您将 maskToBounds 设置为 YES，这将剪辑 UIView 框架之外的任何绘图。 [这是一个更详细地描述了这一点的 SO 链接。](https://stackoverflow.com/questions/3690972/why-maskstobounds-yes-prevents-calayer-shadow)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-04-30T13:17:43.437

阴影绘制在图层边界之外。你必须设置`listView.layer.masksToBounds = NO`才能看到阴影

如果你设置`listView.layer.masksToBounds = YES`了，你就不能在边界之外画任何东西，所以你不能得到阴影

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-04T08:12:48.333

只有以下对我有用

```
[self.view bringSubviewToFront:subView]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T19:16:20.517

如果您必须使用，`masksToBounds = YES;`请查看[此 SO 帖子](https://stackoverflow.com/questions/11437750/uiview-round-corners-with-shadow)。它告诉您如何通过使用两个嵌套视图在视图上同时使用阴影和圆角（在这种特殊情况下）：外部视图投射阴影并且不遮罩边界，而内部视图具有圆角和遮罩边界。

# c# - 连接字符串中的 DataSource 参数产生“不支持关键字”

> ID：10384208
> 
> 赞同：5
> 
> 时间：2012-04-30T13:05:49.253
> 
> 标签：c#, sql-server

我的代码：

```
SqlConnection conn = new SqlConnection("DataSource=a;InitialCatalog=b;User ID=c;Password=d"); 
```

我得到错误：

```
Keyword not supported: 'datasource'. 
```

该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T13:07:56.880

`Data Source`是两个字。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T13:08:22.043

用法是：

```
Data Source=myServerAddress;Initial Catalog=myDataBase;User Id=myUsername;Password=myPassword; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T13:08:06.453

它应该是这种形式：

```
Data Source= 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T13:08:11.217

关键字是“数据源”，有一个空格。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-30T13:09:38.013

数据和源之间有一个空格“Data Source=a;”

# ruby-on-rails - 在薄轨上安全地停止 em-websocket

> ID：10384209
> 
> 赞同：7
> 
> 时间：2012-04-30T13:05:49.647
> 
> 标签：ruby-on-rails, eventmachine, thin, em-websocket

我有一个在瘦服务器上运行的 Rails 应用程序以利用 EventMachine 运行循环。问题是我希望能够包含 em-websocket 来处理来自 ws 的信息，并在不停止 EM 运行循环的情况下停止和启动 websocket。这就是我启动 websocket 的方式。

```
EventMachine::WebSocket.start(:host => "0.0.0.0", :port => 8080) do |ws|
  ws.onopen { }
  ws.onclose { }
  ws.onmessage { |msg| }
end 
```

问题出在开始/停止代码中。来自 em-websocket 的文档

```
#Start WebSocket
def self.start(options, &blk)
  EM.epoll
  EM.run do

    trap("TERM") { stop }
    trap("INT")  { stop }

    EventMachine::start_server(options[:host], options[:port],
      EventMachine::WebSocket::Connection, options) do |c|
      blk.call(c)
    end
  end
end

#Stop WebSocket
def self.stop
  puts "Terminating WebSocket Server"
  EventMachine.stop
end 
```

问题是内部 em-websocket 代码不跟踪来自 EM:start_server 的签名以便能够调用 EventMachine::stop_server(signature) 来关闭它。有没有一种方法可以在不修改 em-websocket 的情况下覆盖这些功能，以便我可以安全地启动/停止这些 websocket？我希望它的性能更像标准的 Eventmachine 服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:21:19.197

在我看来，您不需要使用 EM::Websocket.start()。而是编写自己的开始/停止代码，然后您可以自己管理签名。

```
# start a ws server and return the signature
# caller is responsible for +trap+ing to stop it later using said signature.
def start_ws_server(options, &blk)
  return EventMachine::start_server(options[:host], options[:port],
    EventMachine::WebSocket::Connection, options) do |c|
    blk.call(c)
  end
end

# stop a previously started ws server
def stop_ws_server(signature)
  EventMachine::stop_server signature
end 
```

因此，现在您可以启动和捕获签名，并在以后使用它来停止它。start 方法中没有陷阱代码，因为此时签名是未知的。由于您在方法之外捕获信号，因此您也可以在外部捕获并在那里使用存储的信号。

# sql-server - 根据 where 子句和左连接获取所有父母和孩子的数量

> ID：10384215
> 
> 赞同：0
> 
> 时间：2012-04-30T13:06:08.463
> 
> 标签：sql-server, tsql

我在俱乐部和会议之间有一对多的结构

```
Clubs
Id    
1     
2
3
4

Meetings
Id    ClubId    MeeetingDate
1      1        2010-Mar-01
2      1        2010-Apr-01
3      2        2011-May-01
4      3        2011-Aug-01
5      3        2012-Sep-01
6      3        2012-Aug-01 
```

我想获得**所有**俱乐部和大于`getDate()`

所以结果是

```
Club.Id    Count
1            0     (there are 0 meetings > getDate)
2            0     (there are 0 meetings > getDate)  
3            2     (there are 2 meetings > getDate)
4            0     (there are NO meetings) 
```

我有一个解决方案，但它很丑！我的解决方案包含两个联合，一个存在，一个不存在。我确信有更好的方法，但我不得不承认这些天我写的 SQL 不多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:17:09.273

```
SELECT c.id, 
       SUM(CASE WHEN m.meetingDate>GetDate() THEN 1 ELSE 0 END) AS Count
FROM clubs c
LEFT JOIN meetings m
    on c.id = m.clubid 
GROUP BY c.id 
```

并以测试脚本作为证明（或者以防万一有人可以改进以上内容！）：

```
;with clubs(id)
AS
(
    SELECT 1
    UNION SELECT 2
    UNION SELECT 3
    UNION SELECT 4
),
meetings(id, clubid, meetingdate)
AS
(
    SELECT 1,1,CAST('2010-03-01' AS DATE)
    UNION SELECT 2,1,'2010-04-01'
    UNION SELECT 3,2,'2011-05-01'
    UNION SELECT 4,3,'2011-08-01'
    UNION SELECT 5,3,'2012-09-01'
    UNION SELECT 6,3,'2012-08-01'
)
select c.id, SUM(CASE WHEN m.meetingDate>GetDate() THEN 1 ELSE 0 END) AS Count
from clubs c
left join meetings m
on c.id = m.clubid 
group by c.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:20:43.103

我的愚蠢疏忽。这里：

```
Select a.clubid, isnull(b.meetingcount,0) meetingcount    From clubs a
Left outer join (select clubid, count(*) meetingcount
                               From meetings 
                            Where meetingdate>getdate
 Group by clubid) b
On a.clubid=b.clubid 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T13:23:01.963

```
select c.id, count(m.id) as Count
from Clubs c
  left outer join Meetings m
    on c.id = m.clubid and 
       m.meetingdate > getdate() 
group by c.id 
```

# actionscript-3 - 如何检索具有特定颜色的位图数据的一部分

> ID：10384218
> 
> 赞同：1
> 
> 时间：2012-04-30T13:06:16.127
> 
> 标签：actionscript-3

我有一个位图数据，其中包含两种颜色，例如黑色和白色。现在黑色区域是透明的，白色区域是可见的。现在图像应该只能在白色区域而不是黑色透明区域上可点击。我们应该怎么做？

PS：白色区域不在常规位置，我的意思是它们在随机位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:28:59.873

Sam 的回答很好，但是既然您说您知道所讨论的像素是位图数据的一部分，您可以跳过拍摄舞台快照而直接检查位图数据。我认为它可以很简单：

```
stage.addEventListener(MouseEvent.CLICK, eventHandler);

function eventHandler(event:MouseEvent):void
{
   if (myBitmapData.getPixel(event.stageX, event.stageY) == 0xffffff)
   {
       // do something
   }
} 
```

此外，如果您想考虑 alpha，您将需要使用[getPixel32()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#getPixel32%28%29)而不是 getPixel()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:48:52.413

```
//add listener for mouse clicks
stage.addEventListener(MouseEvent.CLICK, eventHandler);

function eventHandler(event:MouseEvent):void
{
    //1x1 bitmapData to store snapshot
    var bmd:BitmapData = new BitmapData(1, 1);
    //matrix object to 'move' stage so that pixel under mouse is effectively at 0,0
    var matrix:Matrix = new Matrix();
    //'move' stage according to mouse x,y values
    matrix.translate(-event.stageX, -event.stageY);
    //take snapshot of stage
    bmd.draw(stage, matrix);
   //get colour from snapshot data
   var pixel:uint = bmd.getPixel(0, 0);
   //trace result
   trace("colour = "+pixel.toString(16));
} 
```

取自[http://blog.leeburrows.com/2011/06/get-pixel-colour-below-mouse-pointer/](http://blog.leeburrows.com/2011/06/get-pixel-colour-below-mouse-pointer/)

编辑因为我有时间：

所以在你的情况下，而不是：

```
trace("colour = "+pixel.toString(16)); 
```

你会使用：

```
if(pixel.toString(16) == "ffffff") // if clicked pixel is white
{
    //do something
} 
```

# ruby-on-rails - Ruby 中未初始化的常量 LoginController。

> ID：10384219
> 
> 赞同：0
> 
> 时间：2012-04-30T13:06:18.697
> 
> 标签：ruby-on-rails

我是Ruby的新手。我按照本教程安装：`http://udooz.net/blog/2011/02/facebook-app-using-rails-koala/`

现在，当我这样做时： rails generate controller

rails 生成控制器主页索引

我收到此错误：

```
/home/hiccup-pro/Documents/qstack/config/environment.rb:8:in `<top (required)>': undefined local variable or method `config' for main:Object (NameError)
from /home/hiccup-pro/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.3/lib/rails/application.rb:103:in `require'
from /home/hiccup-pro/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.3/lib/rails/application.rb:103:in `require_environment!'
from /home/hiccup-pro/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.3/lib/rails/commands.rb:25:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我修好了它。至少那个错误，但现在我有一个不同的错误，那就是：未初始化的常量 LoginController。我搜索了一下，发现我不应该在 environment.rb 中提及 config.*。无论如何，这是我的环境.rb

```
# Load the rails application
require File.expand_path('../application', __FILE__)

# Initialize the rails application
Qack::Application.initialize!
config.action_controller.allow_forgery_protection = false 
```

那么，为什么我会收到此`uninitialized constant LoginController`错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:25:32.513

没有看到你的 environment.rb 很难说，但我最好的拍摄是你把代码

```
config.action_controller.allow_forgery_protection = false
config.gem "koala" 
```

街区外

```
Rails::Initializer.run do |config|
  ....
end 
```

那是在 environment.rb 里面。如果没有这样的块添加它是这样的：

```
Rails::Initializer.run do |config|
  config.action_controller.allow_forgery_protection = false
  config.gem "koala"
end 
```

# google-app-engine - GAE 简单数据模型错误 '_ReverseReferenceProperty' 对象没有属性 'fetch'

> ID：10384220
> 
> 赞同：1
> 
> 时间：2012-04-30T13:06:20.977
> 
> 标签：google-app-engine, google-cloud-datastore

我有一对多的模型方案。一切似乎都是正确的，数据填充工作但`linkitem_set.fetch`失败了：

> AttributeError: '_ReverseReferenceProperty' 对象没有属性 'fetch'

这里还有一个关于 SO 的问题，错误相同，但没有解决方案。我的代码如下：

```
class Project(db.Model):
   name = db.StringProperty()

class LinkItem(db.Model):
   url = db.StringProperty()
   project = db.ReferenceProperty(Project)

class Show(webapp2.RequestHandler):
   def get(self):
      links = Project.linkitem_set.fetch(100)
      self.response.headers['Content-Type'] = 'text/plain'
      for li in links:
         self.response.out.write(li + '/r/n')

class PopulateDb(webapp2.RequestHandler):
   def get(self):
      prj = Project(name = 'SomeProject 1')
      prj.put()
      for i in range(1000):
         rlink = random.betavariate(1, 2)
         link = LinkItem(url = str(rlink), project = prj)
         link.put() 
```

我正在使用 Python 2.7 并在本地进行了测试和托管。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:18:10.610

我认为问题在于该`linkitem_set`集合仅存在于 的*实例*中`Project`，但您正试图在类本身上使用它。

您的代码应该看起来更像这样：

```
class Show(webapp2.RequestHandler):
   def get(self):
      prj_name = "" # Get a valid value, probably from URL params
      prj_to_show = Project.all().filter("name=", prj_name).get()
      if prj_to_show is not None:
          links = prj_to_show.linkitem_set.fetch(100)
          self.response.headers['Content-Type'] = 'text/plain'
          for li in links:
              self.response.out.write(li + '/r/n') 
```

# ios - 如何在OpenGLES中的球运动内画一条线？

> ID：10384223
> 
> 赞同：1
> 
> 时间：2012-04-30T13:06:41.517
> 
> 标签：ios, opengl-es

目前我正在使用 iphone 中的 OpenGLES 在球类游戏应用程序中工作，使用 GL_TRIANGLE_STRIP 从左到右绘制球和运动动作，然后 GL_LINES 画一条线，但线不能在球运动内部绘制，如何解决这个问题？

我尝试了示例代码：

```
#1

- (void)update
{
    self.timeSinceLastSpawn += self.timeSinceLastUpdate;
    self.timeSinceLastSpawn = 0;

    if (self.timeSinceLastSpawn > 2.0)
    {
        [self target]; // Call the Method target
    }

     for (SGGSprite * sprite in self.children) //SGGSprite is a class
     {
          [sprite update:self.timeSinceLastUpdate]; // call the update method in SGGSprite class.
     }
}

#2
- (void)update:(float)dt 
{
    GLKVector2 curMove = GLKVector2MultiplyScalar(self.moveVelocity, dt); 
    self.position = GLKVector2Add(self.position, curMove); 
}

#3
- (void)target
{
    SGGSprite * target = [[SGGSprite alloc] initWithFile:@"Ballimage.png" effect:self.effect];
    [self.children addObject:target]; 

    int minY = target.contentSize.height/2;
    int maxY = 320 - target.contentSize.height/2;
    int rangeY = maxY - minY;
    int actualY = (arc4random() % rangeY) + minY;

    if(actualY <= 100)
    {
        actualY = 215;
    }

    target.position = GLKVector2Make(480 + (target.contentSize.width), actualY);    
    int minVelocity = 480.0/12.0;
    int maxVelocity = 480.0/6.0;
    int rangeVelocity = maxVelocity - minVelocity;
    int actualVelocity = (arc4random() % rangeVelocity) + minVelocity;
    target.moveVelocity = GLKVector2Make(-actualVelocity, 0);
}

#4
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect 
{
        glClearColor(1, 1, 1, 1);
        glClear(GL_COLOR_BUFFER_BIT); 
        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
        glEnable(GL_BLEND);

        for (SGGSprite * sprite in self.children)  // SGGSprite is a class, render method in SGGSprite class
        {
            [sprite render];             
        }
}

#5
- (void)render
{
    self.effect.texture2d0.name = self.textureInfo.name;
    self.effect.texture2d0.enabled = YES;
    self.effect.transform.modelviewMatrix = self.modelMatrix; // Call the method modelMatrix
    [self.effect prepareToDraw];

    long offset = (long)&_quad;
    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);

    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, geometryVertex)));
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, textureVertex)));
    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);
}

#6
- (GLKMatrix4) modelMatrix
{
    GLKMatrix4 modelMatrix = GLKMatrix4Identity;    
    modelMatrix = GLKMatrix4Translate(modelMatrix, -self.position.x, -self.position.y, 0);
    modelMatrix = GLKMatrix4Translate(modelMatrix, self.contentSize.width, self.contentSize.height+140, 0);
    return modelMatrix; 
}

// To draw a line, when the user tab on a screen.

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView:touch.view]; 

    float xPosition = location.x;
    float yPosition = location.y;

        X =  xPosition/50;
        resultX = X - 4.8;

        Y = yPosition/61.538461538461538;
        resultY = Y - 3.2;

        self.effect = [[GLKBaseEffect alloc] init];
        [self.effect prepareToDraw];
        Test1 = YES;

        const GLfloat line[] =
        {
            0.0f, 0.5f,
            resultX, resultY,
        };

        // Create buffer object array
        GLuint bufferObjectNameArray;

        // Have OpenGL generate a buffer name and store the buffer object array 
        glGenBuffers(1, &bufferObjectNameArray);

        // Bind the buffer object array to the GL_ARRAY_BUFFER target buffer  
        glBindBuffer(GL_ARRAY_BUFFER, bufferObjectNameArray);

        // Send the line data over to the target buffer
        glBufferData(
                     GL_ARRAY_BUFFER,   // the target buffer 
                     sizeof(line),      // the number of bytes to put into the buffer
                     line,              // a pointer to the data being copied 
                     GL_STATIC_DRAW);   // the usage pattern of the data 

        // Enable vertex data to be fed down the graphics pipeline to be drawn
        glEnableVertexAttribArray(GLKVertexAttribPosition);

        // Specify how the GPU looks up the data
        glVertexAttribPointer(
                              GLKVertexAttribPosition, // the currently bound buffer holds the data 
                              2,                       // number of coordinates per vertex 
                              GL_FLOAT,                // the data type of each component 
                              GL_FALSE,                // can the data be scaled 
                              2*4,                    // how many bytes per vertex (2 floats per vertex)
                              NULL);         
        glDrawArrays(GL_LINES, 0, 2);
} 
```

# php - PDO 与 pg_* 函数

> ID：10384224
> 
> 赞同：9
> 
> 时间：2012-04-30T13:06:43.027
> 
> 标签：php, postgresql, pdo, libpq

他们都准备好了声明。pg_* 是 libpq 的包装器。正确的？

我喜欢 PHP 中的 PDO，但我以后不会更改数据库。我应该使用哪个库？有什么基准吗？PHP版本：5.4

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T19:37:02.827

PDO 提供了一个很好的接口，但更通用性也意味着处理每个后端的细微特性的麻烦更多。如果您查看[bugtracker](https://bugs.php.net/search.php)，它有许多未解决的问题，其中一些是严重的。

这是 postgresql 的一个轶事证据：PDO 的解析器在将 standard_conforming_strings 设置为 ON（现在是默认值，从 PG-9.1 开始）时遇到问题。使用 php-5.3.9 的测试用例：

```
$dbh->exec("SET standard_conforming_strings=on");
$p=$dbh->prepare("SELECT 1 WHERE 'ab\' = :foo AND 'cd' = :bar");
$p->execute(array(":foo" => "ab", ":bar" => "cd")); 
```

execute() 在 PDO 层意外失败，出现 `Database error: SQLSTATE[HY093]: Invalid parameter number: :foo`. 似乎无法将 :foo 识别为参数。

如果查询在 之后停止`'ab\'=:foo`，没有其他条件，那么它可以正常工作。或者，如果其他条件不包含字符串，它也可以正常工作。

这个问题看起来与[issue #55335](https://bugs.php.net/bug.php?id=55335)相似，在我看来，这被认为是*Not a bug ，这是完全错误的。*[实际上，我什至自己破解了 PDO 来修复它，但是以一种与其他后端不兼容的方式，所以没有补丁。我对查询词法分析器如此通用感到不安。]

另一方面，pg_* 更接近于 libpq，这种问题一开始就不太可能发生，而且如果发生的话，也更容易解决。

所以我的观点是，PDO 并非一切都很好。在内部，它肯定比 pg_* 更具挑战性，而且更复杂意味着更多的 bug。这些错误是否已解决？基于某些 bugtracker 条目，不一定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T13:33:28.183

恕我直言，使用直接接近具体 DB 的函数（如`pg_`、`oci_`等`mysql[i]_`）总是比使用 PDO 或任何 DBMS 层（Doctrine、dibi 等）快一点。

但是在 OOP 架构中使用 PDO 或任何 DBMS 层应该是更好的方法（恕我直言，再次），因为您学习使用该层，因此将在任何数据库引擎后面使用它。当然，如果您在应用程序中更改数据库引擎，您不必费心重写整个应用程序。

即使您不打算更改数据库引擎，我也建议您使用 PDO。但那只是我的个人意见 ：-）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T13:35:38.543

我认为这更多的是品味问题。 `PDO`可能因为它被编译而更快，或者它可能不是因为它充当包装器。我相信速度差异会足够小，不会影响您的决定。

这纯粹是推测，但`PDO`它是新的并且现在似乎是数据库连接的标准，因此在代码方面对它的支持可能会增加，而对它的支持`mysql_*`可能`pg_*`会继续减弱。

的主要优点`PDO`是它的抽象将允许您稍后切换到不同的数据库，但我打赌您不会，所以这可能也不应该影响您的决定。

我个人更喜欢与`PDO`. 传递和控制对象比“资源”变量更容易。

# objective-c - 在通用应用程序上分离 iPhone 和 iPad 类有什么优势吗？

> ID：10384228
> 
> 赞同：6
> 
> 时间：2012-04-30T13:07:11.013
> 
> 标签：objective-c, ios, xcode, coding-style, dry

我有一个通用（适用于 iPhone 和 iPad）应用程序。

在文件夹结构中将 iPad 与 iPhone 类分开有什么好处吗？

这是我的意思的一个例子：

```
- MyApp
    - Resources
    - Classes
        - iPad
            - SomeUniqueClassOnIPad.h
            - SomeUniqueClassOnIPad.m
        - iPhone
            - SomeUniqueClassOnIPhone.h
            - SomeUniqueClassOnIPhone.m
    - SomeUniversalClass.h
    - SomeUniversalClass.m 
```

这在objective-c项目中很常见吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T13:35:37.790

编码中的规则之一是永远不要有重复的代码，所以如果您的视图正在做不同的事情，或者数据是否应该根据它是 iPad 还是 iPhone（例如，不同的数据源？）进行不同的处理，那么它肯定应该在不同的类中, 如果没有.. 那么没有。使用同一个类。

在这种情况下你可以实现的一个常见的东西是一种帮助器，如果你愿意的话，它是一个委托类，它处理代码中发生的所有常见方法和操作。

黄金法则：尽可能少写代码！更少的代码 == 更易于维护并且质量更高。因此，在不影响您的要求的情况下编写尽可能少的代码。此外，拆分代码使其更容易（单元）测试，从而更容易重用。

我希望这回答了你的问题。

***更新***
我知道有一个术语，只是可以想到它。重复代码被称为“DRY-violation”。DRY 代表 Don't Repeat Yourself，这是软件开发的一个原则，旨在减少各种信息的重复，在多层架构中特别有用。
更多信息：[维基百科上的 DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:40:17.447

对我来说，这取决于 iPhone 和 iPad 视图之间的共性。如果有单独的 xib 文件但它们都包含相同的元素，则很容易决定使用相同的类。

如果 iPhone 和 iPad 的 xib 文件具有独特的元素，那么分离类可能会更好。

另一种选择是创建一个由 iPhone 和 iPad 类共享的基类，用于您确实希望将它们分开的案例。基类将包含它们之间的通用代码，例如，启动数据请求或通用自定义视图。

# java - 使用自定义起点对 ArrayList 对象属性进行排序

> ID：10384231
> 
> 赞同：1
> 
> 时间：2012-04-30T13:07:23.443
> 
> 标签：java, sorting, arraylist, conditional-statements

我的问题是关于如何通过其中一个属性对具有自定义对象的 ArrayList 进行排序，但从自定义条件开始。

让我更好地解释一下，这是我的代码：

```
public static void sortArrayListByProperty(ArrayList colorList){

        Collections.sort(colorList, new Comparator(){

            public int compare(Object emp1, Object emp2){

                int intValue1 = ((ColorCounter)emp1).getIntColorValue();        
                int intValue2 = ((ColorCounter)emp2).getIntColorValue();

                if(intValue1 < intValue2)
                    return 1;
                else if(intValue1 > intValue2)
                    return -1;
                else
                    return 0;    
            }
        });
    } 
```

这会将我的 ArrayList 从大到小排序。

但我想要的是从我将指定的起始编号对我的 ArrayList 进行排序。

例如，如果 ArrayList 包含

```
5 3 9 1 14 
```

假设我希望数字从 3 开始，那么我需要

```
3 5 9 14 1 
```

我希望足够清楚...

是否可以？

@Joachim Sauer

谢谢，我稍微编辑了您的代码并更改了返回值，它起作用了！

编辑代码：

```
if (cv1 >= threshold && cv2 < threshold) {
   return -1;
} else if (cv2 >= threshold && cv2 < threshold) {
   return -1;
} else if (cv1 < cv2) {
   return 1;
} else if (cv1 > cv2) {
   return 1;
} else {
   return 0;    
} 
```

测试示例：

```
16777215
16448250
15790320
4013373 
```

按 15790320 排序：

```
15790320
16448250
16777215
4013373 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:14:17.090

你可以试试这个：

```
public class ColorCounterComparator implements Comparator<ColorCounter> {
  private final threshold;

  public ColorCounterComparator(final int threshold) {
    this.threshold = threshold;
  }

  @Override
  public int compare (ColorCounter c1, ColorCounter c2) {
    int cv1 = c1.getIntColorValue();
    int cv2 = c1.getIntColorValue();

    if (cv1 >= threshold && cv2 < threshold) {
       return -1;
    } else if (cv2 >= threshold && cv2 < threshold) {
       return 1;
    } else if (cv1 < cv2) {
       return -1;
    } else if (cv1 > cv2) {
       return 1;
    } else {
       return 0;    
    }
  }
} 
```

这显然是未经测试的，可能有一些错误，并且可能已经翻转了 -1/1 值。但它应该向您展示基本思想;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:15:10.093

使用ArrayList sublist 方法创建一个子列表，然后对这个子列表进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:13:36.167

未经测试，但你明白了：你有两种情况

*   两个数字都低于起始数字（在您的示例中为 3）或两者都高于 ==> 比较它们
*   一个数字低于起始编号，另一个高于 ==> 第一个在您的自定义排序顺序中的第二个之后：

* * *

```
if (intValue1 < start && intValue2 < start || intValue1 >= start && intValue2 >= start) {
    if(intValue1 < intValue2)
        return 1;
    else if(intValue1 > intValue2)
        return -1;
    else
        return 0;    
} else {
    if (intValue1 < start)
        return -1;
    else
        return 1;
} 
```

# objective-c - MonoTouch 上的 Objective C 绑定

> ID：10384233
> 
> 赞同：5
> 
> 时间：2012-04-30T13:07:39.303
> 
> 标签：objective-c, xamarin.ios

嗨，我目前正在开发一个 monotouch 应用程序，我需要使用 IDBlue 框架从 ipad 连接到他们的蓝牙阅读器，但是作为没有 .a 的框架提供，我应该如何继续进行绑定以便我可以在单点触控上使用它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T13:14:55.247

最简单的方法是在您的解决方案中创建一个绑定项目。

[本文档](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types)描述了整个过程。

还有一个工具 ( [Parser.exe](http://github.com/mono/monomac/blob/f84cbb892691998c7424e8fedc08854d1e976816/src/parse.cs) ) 可以帮助生成绑定。令人惊讶的是，“Binding Objective-C Types”文档中没有提到这个工具。这不是一个完整的解决方案，但会给您一个良好的开端。

# plone - 粘贴的文件夹对 Plone 不可见，但对 Zope 不可见

> ID：10384240
> 
> 赞同：1
> 
> 时间：2012-04-30T13:08:10.067
> 
> 标签：plone

当我试图在我们的 Intranet Plone 站点中将文件夹从一个地方剪切和粘贴到另一个地方时，我遇到了一个非常奇怪的问题。粘贴操作返回错误“剪贴板中没有任何内容”。然而，它已经离开并从原来的位置删除了文件夹，看起来好像还没有插入到新位置。显示发生粘贴的文件夹的内容视图不会显示粘贴的文件夹。但是，通过ZMI界面我可以看到粘贴**已经**发生了。很明显，在粘贴的内容成功移动之前发生了错误，并且处于奇怪的状态。

例如，站点搜索可以在新粘贴的位置找到内容，并且面包屑显示这些内容页面位于文件夹下方，否则 Plone 不可见。

是否有可能 - 也许通过 ZMI - 让这个文件夹在 Plone 世界中可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T23:25:12.873

这是一个奇怪的错误。让文件夹在 Plone 中显示的快速解决方案是转到 ZMI，然后访问 portal_catalog，然后找到（在选项卡之一中）重建目录的按钮。这应该会重新生成目录索引（在您进行剪切/粘贴时可能无法更新，这不是您自己的过错），因此 Plone 中的所有视图（文件夹列表等）都将显示新索引（视图使用目录来知道要显示什么）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T13:03:12.360

与我将文件夹从一种语言文件夹复制到另一个语言文件夹相同的问题，粘贴的对象仅在 ZMI 中可见

正如 fRiSi 所说，问题出在分类选项卡 > 语言中的语言类别

因为我在一个文件夹中有很多子对象，所以我运行下面的脚本以递归方式更改语言分类

基于[将 LinguaPlone 子语言转换回所有内容的语言？](https://stackoverflow.com/questions/5514958/convert-linguaplone-sub-language-back-to-language-for-all-content/5515518#5515518)

```
path = '/'.join(context.getPhysicalPath())

for brain in context.portal_catalog(path={'query': path, 'depth': 1000}, Language="it"):
    obj = brain.getObject()
    obj.setLanguage('en')
    obj.reindexObject(idxs=['Language'])

    print brain.getURL()

return printed 
```

# c# - .NET ListBox - 禁用鼠标悬停选择项目

> ID：10384247
> 
> 赞同：1
> 
> 时间：2012-04-30T13:08:33.527
> 
> 标签：c#, wpf, xaml, listbox, selection

我有一个单选模式的 ListBox，其中包含一些项目。我实现了用户能够通过拖放重新排序项目。一切正常，但它看起来真的很难看，因为如果鼠标按钮按下并且光标在一个项目上移动，列表框会自动选择一个项目。

具体来说：为了在某些情况下禁用闪烁，我仅在将项目拖动到另一个项目的一半以上时才移动项目。当我开始将 item1 拖到 item2 上以将其放在 item2 后面时，我希望在拖动时选择 item1。发生的情况是，只要光标移到 item2 上， item2 就会被选中。我怎样才能摆脱这种行为？

我已经尝试在拖动项目时在 PreviewMouseMove 中设置 e.Handled = true ，但这无济于事。

如果您想查看代码，请访问：http: [//pastebin.com/GTj96qV9](http://pastebin.com/GTj96qV9)。这是一种行为，它使任何将 IList 作为 DataSource 的列表框都可以通过拖动来重新排序其内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:30:43.623

对我来说最干净的解决方案是从 ItemsControl 继承并实现我自己的“选择器”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:28:17.590

这可能会搞砸放置部分，但是您是否尝试过让 ListBoxItem 鼠标捕获？MSDN 对此有[更多详细信息](http://msdn.microsoft.com/en-us/library/system.windows.uielement.capturemouse.aspx)。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:33:07.543

这是一个列表视图。而且我没有详细介绍您的代码。但是我在 ListViewItem 上做了 PreviewMouseLeftButtonDown，我没有你描述的问题。

```
 <ListView.ItemContainerStyle>
            <Style TargetType="{x:Type ListViewItem}">
                <EventSetter Event="PreviewMouseLeftButtonDown" Handler="ListView1Item_PreviewMouseLeftButtonDown" />
                <Setter Property="AllowDrop" Value="True" />
                <EventSetter Event="DragDrop.Drop" Handler="ListView1Item_DragDrop" />
                <Style.Triggers>                     
                    <DataTrigger Binding="{Binding DispDetail}" Value="False">
                        <Setter Property="Visibility" Value="Collapsed"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ListView.ItemContainerStyle> 
```

# cobol - cobol 移动语句

> ID：10384250
> 
> 赞同：2
> 
> 时间：2012-04-30T13:08:39.227
> 
> 标签：cobol

假设我有一个 02 级变量作为 cobybook (testcopy) 的一部分

```
02 level-1-var
   05 var-1
   05 var-2
   05 var-3
   05 var-4 
```

我在我的程序中使用了这本字帖两次。

```
01  usage-1.
    copy testcopy.

01  usage-2.
    copy testcopy. 
```

我现在只想将usage-1的2级05变量移动到usage-2 **。**有什么办法可以避免 2 个 move 语句？

并使用类似的东西

```
 MOVE (var-2, var-3) of usage-1   TO 
 (var-2, var-3) of usage-2 
```

我是 cobol 的新手，想知道是否可以这样做..这可以在我的程序中节省很多移动语句..（提高性能）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T13:20:06.777

不，不是在标准 COBOL 中，尽管某些实现很可能对这类事情进行了扩展。如果简洁的代码是您的要求之一，我可能不会选择 COBOL 作为理想的语言 :-)

您可能需要分两步完成：

```
move var-2 of usage-1 to var-2 of usage-2.
move var-3 of usage-1 to var-3 of usage-2. 
```

如果您愿意对您的字帖做一些更改，例如^((a))：

```
02  level-1-var
    05  var-1
    05  var-2-and-3
        09  var-2
        09  var-3
    05  var-4 
```

你可能会发现你可以这样做：

```
move var-2-and-3 of usage-1 to var-2-and-3 of usage-2. 
```

* * *

^((a))显然，我刚刚反映了您在问题中的内容。您几乎肯定需要`pic`关于该数据的子句（可能还有更多`.`字符）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T22:03:19.070

这种类型的需求由 MOVE CORRESPONDING 动词直接回答。MOVE CORRESPONDING 对其操作数采用组级别并将名称相似的基本项目从一个移动到另一个，但有几个限制，其中包括相似的数据类（即，不能混合字母数字和数字）。您实施的精细手册包含所有限制。

如果我没记错的话，MOVE CORRESPONDING 也是一个可选特性，所以有些编译器可能不支持它。

移动对应，您的请求是在 COBOL 世界中引发强烈意见的事情之一。有人说您应该使用 COPY REPLACING 来生成唯一的数据名称并对所有 MOVE 进行编码。别人说你做的很好。我的观点是“视情况而定”。如果它是一个非常简单的程序，我可能会走 MOVE CORRESPONDING 路径，但如果有重要的业务逻辑，那么我宁愿编写所有代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:59:02.230

您最好的办法是制作您的字帖，以便您可以为每个字段设置一个“前缀”，然后使用 REPLACING 为不同的 COPY 语句提供不同的前缀。这样你就不必为所有字段编码 OF/IN，它会使程序和列表更清晰。

Paxdiablo 是做你想做的事的最巧妙的方法，尽管你想做它的原因会很有趣。

我很惊讶没有人提到“参考修改”：

```
MOVE usage-1 ( 3 : 5 ) TO usage-2 ( 3 : 5) 
```

其中 3 是数据中的起始位置，5 是长度。我更喜欢 Paxdiablo 的定义。

没有人建议重命名，这并不奇怪。

```
 01  A-TABLE. 
       05  A-T-1 PIC XX. 
       05  A-T-2 PIC X. 
       05  A-T-3 PIC 9\. 
       05  A-T-4 PIC XXX. 
       05  A-T-5 PIC X(4). 
       66 A-TABLE-EXTRA RENAMES A-T-2 THRU A-T-3\. 
   01  B-TABLE. 
       05  B-T-1 PIC XX. 
       05  B-T-2 PIC X. 
       05  B-T-3 PIC 9\. 
       05  B-T-4 PIC XXX. 
       05  B-T-5 PIC X(4). 
       66 B-TABLE-EXTRA RENAMES B-T-2 THRU B-T-3\. 

       MOVE A-TABLE-EXTRA TO B-TABLE-EXTRA 
```

就像 MOVE CORRESPONDING 一样，这是要避免的（与我的评论相同的原因，加上没有人使用 66 级，所以没有人知道他们在做什么）。

另一种方法是为您的每个 01 级重新定义，但为什么还要去那个麻烦。

# asp.net - ASP.net - 从 URL 获取 ID

> ID：10384252
> 
> 赞同：2
> 
> 时间：2012-04-30T13:08:55.543
> 
> 标签：asp.net, url, query-string

我有一个数据列表，我通过 URL 将用户的用户 ID 发送到另一个页面：

```
<asp:HyperLink ID="LastNameLabel" runat="server" Text='<%# Eval("LastName") %>' NavigateUrl='<%# FormatUrl( (int) Eval("FriendsAccountID")) %>' /> 
```

和功能：

```
protected string FormatUrl(int FriendsAccountID)
{
    return "WebForm3.aspx?" + FriendsAccountID;
} 
```

* * *

这行得通，但我有点菜鸟，我不确定在下一页上后如何获取 ID。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:11:42.437

将您的代码更改为：

```
protected string FormatUrl(int FriendsAccountID) { return "WebForm3.aspx?UserID=" + FriendsAccountID; } 
```

然后您可以像这样访问 UserID：

```
Request.QueryString["UserID"]; 
```

这是[MSDN 上 QueryString](http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring.aspx)的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:13:31.660

您应该将 ID 设置为该 url 变量，如下所示：

```
protected string FormatUrl(int FriendsAccountID)
{
  return "WebForm3.aspx?FriendID=" + FriendsAccountID.ToString();
} 
```

在其他页面（在您的情况下为 WebForm3.aspx）用户 Request.Params 或 QueryString 以获取该值：

```
protected void Page_Load(object sender, EventArgs e)
{
    int friendID = -1;

    if (Request.Params["FrientID"] != null && int.TryParse(Request.Params["FrientID"], out friendID)
    {
      // you got a valid friend id in friendID variable
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T13:10:49.597

使用**会话**并传递您的`ID`使用`query string`。然后从其他页面您可以轻松访问该 ID

# mysql - 按时间排序从？

> ID：10384253
> 
> 赞同：0
> 
> 时间：2012-04-30T13:09:04.137
> 
> 标签：mysql, time, sql-order-by

例如，您可以在 MYSQL 中轻松按时间排序

```
"SELECT * from table WHERE date = 2012-04-29 order by time" 
```

然后，MYSQL 将按从 00:00:00 开始的时间排序

我的问题是可以告诉 MYSQL 从 06:00:00 开始而不是默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:13:01.093

你可以试试这个查询：

```
SELECT * 
FROM table 
WHERE date = 2012-04-29 
   AND TIME>= 06:00:00
ORDER BY time; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:34:20.683

```
SELECT *
  FROM table
 WHERE date = 2012-04-29
 ORDER BY CASE WHEN hour(time) < 6 THEN 1 ELSE 0 END, time; 
```

不过，我发现将日期和时间分开更容易出错。

# android - 使用 Java 访问 phonegap 创建的表 - android

> ID：10384254
> 
> 赞同：0
> 
> 时间：2012-04-30T13:09:12.123
> 
> 标签：android, sqlite, cordova, phonegap-plugins

我使用 phonegap 在 SQLite 中创建了一个表。如何使用 Java 访问此表？因为我已经创建了一个后台进程（作为 phonegap 插件），它需要从已经创建的表中检索数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:31:08.830

您的数据库位于

在 Eclipse 上：

> **窗口>打开透视图>其他>DDMS**

-- 在文件资源管理器选项卡中

> **数据>数据>your_package_name>数据库>your_DB_fileName**

因此，在任何时候，如果数据库成功创建并在其各自的位置可用，那么您可以使用路径以编程方式读取它

> **/data/data/your_package_name/databases/your_DB_fileName**

# java - Java 邮件服务器

> ID：10384255
> 
> 赞同：1
> 
> 时间：2012-04-30T13:09:18.427
> 
> 标签：java, email

我希望能够从我的 Java Server 应用程序发送/接收邮件。是否有标准工具链可供使用？[主要是我正在用 Java 编写一个企业网络应用程序，我需要一种方法来 (1) 发送包含授权码的电子邮件和 (2) 接收投诉。]

谢谢！

编辑：我很抱歉。这完全是我的错。我在规范中不清楚。

当我说发送/接收电子邮件时，我的意思是：我需要我的应用程序能够运行它自己的邮件*服务器*。我没有正在使用的外部 imap/pop3 帐户。我的应用程序需要提供邮件服务器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T13:18:48.567

[Apache James](http://james.apache.org/)项目可能是一个很好的起点。它是一个用 Java 编写的全功能 SMTP 服务器。我确信可以将其他 Java 应用程序与 James 连接和/或编写 James 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:12:07.927

您正在寻找的是 java 邮件，它与 EE 兼容[这里是链接](http://www.oracle.com/technetwork/java/javamail/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T03:42:33.873

[绝对是一个不错的选择是位于http://javaemailserver.sourceforge.net/](http://javaemailserver.sourceforge.net/)的 Java 电子邮件服务器 (JES) 。它是用于发送和接收邮件的完整服务器。“JES 是用 java 编程语言编写的多功能混合 MTA/MDA 服务器。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T13:46:09.923

您可以在 Java EE 标准 JavaMail API 的帮助下发送和接收电子邮件。如果您的应用程序启用了 spring，您可以使用 org.springframework.mail 包，它有一些很好的抽象实用程序。除此之外，您还需要像上面提到的 James 一样拥有 MTA（邮件运输代理）。

# node.js - Socket.IO 是多线程的吗？

> ID：10384257
> 
> 赞同：9
> 
> 时间：2012-04-30T13:09:26.787
> 
> 标签：node.js, socket.io

我有一个`socket.io`监听套接字的服务器：

```
io.sockets.on('connection', function(socket){
    socket.on('myEvent', function(data){
        socket.emit('eventReceived', { status: 1 });
    });
}); 
```

这段代码在多线程中工作吗？如果两个客户端会发出`myEvent`事件，它会同时为两个客户端工作吗？还是会一个接一个地处理？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T21:21:43.313

Node.js 中没有任何东西是多线程的，包括通过 npm 提供的任何包。核心中有一个实验性集群模块

[http://nodejs.org/docs/v0.10.2/api/cluster.html](http://nodejs.org/docs/v0.10.2/api/cluster.html)

# php - 有人通过 .htaccess 连接后如何检索用户名？

> ID：10384258
> 
> 赞同：2
> 
> 时间：2012-04-30T13:09:34.080
> 
> 标签：php, apache, .htaccess

我用 htaccess 和 htpasswd 保护了我网站上的一个文件夹。

我想知道当用户输入用户名/密码以检索用户名并将其存储在 php 变量中时是否有可能，这样我就不必制作 html 连接表单。

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T13:11:27.657

你试过了吗：

```
$_SERVER['PHP_AUTH_USER'] 
```

PHP 有一个[记录 HTTP 身份验证](http://php.net/manual/en/features.http-auth.php)的页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T13:12:32.267

不`$_SERVER['PHP_AUTH_USER']`工作？

[http://php.net/manual/en/features.http-auth.php](http://php.net/manual/en/features.http-auth.php)

# c - 获取目录中的文件列表

> ID：10384263
> 
> 赞同：3
> 
> 时间：2012-04-30T13:09:45.600
> 
> 标签：c, dirent.h

我正在开发一个 C 项目，我需要在其中获取目录中的文件列表。我正在使用 dirent.h，但在让它工作时遇到了一些问题，我正在 Linux 下构建程序。

当我尝试构建程序时，出现以下错误

```
myClass:error: âDIRâ undeclared (first use in this function)
myClass:408: error: (Each undeclared identifier is reported only once
myClass:408: error: for each function it appears in.)
myClass:408: error: âdirâ undeclared (first use in this function)
myClass:410: warning: implicit declaration of function âopendirâ
myClass:413: warning: implicit declaration of function âreaddirâ
myClass:413: warning: assignment makes pointer from integer without a cast
myClass:415: error: dereferencing pointer to incomplete type
myClass:417: warning: implicit declaration of function âclosedirâ 
```

下面是我正在使用的代码

```
int logMaintenance(void *arg)
{
    DIR *dir;
    struct dirent *ent;
    dir = opendir(directory);
    if (dir != NULL)
    {
        while ((ent = readdir (dir)) != NULL)
        {
            printf("%s\n", ent->d_name);
        }
        closedir(dir);
    }
    else
    {
        printf("Failed to read directory %i", EXIT_FAILURE);
    }
    return 0;
} 
```

我不明白这些错误是什么意思，特别是当它说 DIR 在我包含 Liunux 的 dirent.h 头文件时未声明时。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T15:59:24.690

您应该确保：

*   您`#include <dirent.h>`，而不是`"dirent.h"`，以便使用系统搜索头文件的路径来定位该文件。
*   您`dirent.h`的项目中的某个地方没有可以取而代之的文件。

当尝试调试这种奇怪的问题时，请向 GCC 询问预处理后的输出`gcc -E`。您可以查看它包含哪些文件（包括路径）。这可以有很大帮助。

如果您使用的是 Microsoft Visual Studio，请转到以下问题：
[Microsoft Visual Studio：opendir() 和 readdir()，如何？](https://stackoverflow.com/questions/883594/microsoft-visual-studio-opendir-and-readdir-how)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:18:46.093

我不确定，但似乎总是有人告诉我你总是需要一个 main 函数......但是我只有 8 个月（2 个学期）的 C++ 学习。我只是为了安全而练习它，但是，我也会使用：

`int main(int argc, char **argv)`或者 `int main(int argc, char *argv[])`而不是 `int logMaintenance(void *arg)`

（使用dirent.h时）。

# php - 批准表格提交

> ID：10384264
> 
> 赞同：0
> 
> 时间：2012-04-30T13:09:46.937
> 
> 标签：php, mysql

我仍然是 php 初学者，无法创建批准表单，

这个想法是

用户提交表单在表格的已批准行中设置默认值“0”..

所以在幕后，管理员会显示该表中已批准 =“0”的所有成员

这是代码

```
<code> 

    <?php
    $con = mysql_connect("localhost","ebarea_epic","...");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("ebarea_epic", $con);

$query = "select * from medicalrep where approved='0'";

$result=mysql_query($query);

echo "<table border='1'>
<tr>
<th>User Name</th>
<th>Password</th>
<th>Mobile </th>
<th>Address</th>
<th>Faculty</th>
<th>Graduation Year</th>
<th>Region</th>
<th>Area</th>
<th>Line</th>
<th>Appointment Date</th>
<th>Resign Data</th>
<th>Job Title</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['ID'] . "</td>";
  echo "<td>" . $row['username'] . "</td>";
  echo "<td>" . $row['password'] . "</td>";
  echo "<td>" . $row['Mobile'] . "</td>";
  echo "<td>" . $row['Address'] . "</td>";
  echo "<td>" . $row['Faculty'] . "</td>";
  echo "<td>" . $row['Graduation Year'] . "</td>";
  echo "<td>" . $row['Region'] . "</td>";
  echo "<td>" . $row['Line'] . "</td>";
  echo "<td>" . $row['Area'] . "</td>";
  echo "<td>" . $row['Appointment'] . "</td>";
  echo "<td>" . $row['Resign'] . "</td>";
  echo "<td>" . $row['job_title'] . "</td>";  
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?>
</code> 
```

我只想为每个表用户添加复选框，并且在检查时他们的状态在已批准的列中更改为 1

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:05:23.823

```
 $con = mysql_connect("localhost","ebarea_epic","...");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("ebarea_epic", $con);

$query = "select * from medicalrep where approved='0'";

$result=mysql_query($query);

$i = 1; //counter for the checkboxes so that each has a unique name
echo "<form action='process.php' method='post'>"; //form started here
echo "<table border='1'>
<tr>
<th>User Name</th>
<th>Password</th>
<th>Mobile </th>
<th>Address</th>
<th>Faculty</th>
<th>Graduation Year</th>
<th>Region</th>
<th>Area</th>
<th>Line</th>
<th>Appointment Date</th>
<th>Resign Data</th>
<th>Job Title</th>
<th>Update</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['ID'] . "</td>";
  echo "<td>" . $row['username'] . "</td>";
  echo "<td>" . $row['password'] . "</td>";
  echo "<td>" . $row['Mobile'] . "</td>";
  echo "<td>" . $row['Address'] . "</td>";
  echo "<td>" . $row['Faculty'] . "</td>";
  echo "<td>" . $row['Graduation Year'] . "</td>";
  echo "<td>" . $row['Region'] . "</td>";
  echo "<td>" . $row['Line'] . "</td>";
  echo "<td>" . $row['Area'] . "</td>";
  echo "<td>" . $row['Appointment'] . "</td>";
  echo "<td>" . $row['Resign'] . "</td>";
  echo "<td>" . $row['job_title'] . "</td>";
  echo "<td><input type='checkbox' name='check[$i]' value='".$row['ID']."'/>";   
  echo "</tr>";
  $i++;
  }
echo "</table>";
echo "<input type='submit' name='approve' value='approve'/>";
echo "</form>";

mysql_close($con); 
```

现在来了 process.php

```
if(isset($_POST['approve'])){
                if(isset($_POST['check'])){
                    foreach ($_POST['check'] as $value){
                        $sql = "UPDATE post SET post_approved = 1 WHERE ID = $value"; //write this query according to your table schema
                        mysql_query($sql) or die (mysql_error());
                    }
                }
            } 
```

## **虽然您在这里使用 mysql_* 函数，但我建议您使用** [PDO](http://www.phpeveryday.com/articles/PDO-Prepared-Statement-P550.html)

**编辑：**

根据您的要求，这是更新。

在您的管理面板脚本中更改此代码：

```
echo "<input type='submit' name='approve' value='approve'/>"; 
```

删除上面的行并添加它：

```
echo "<input class='action' type='button' name='approve' value='approve' />";
   echo "<input class='action' type='button' name='edit' value='edit' />";
   echo "<input class='action' type='button' name='delete' value='delete' />";
   echo "<input type='hidden' name='action' value='' id='action' />"; //Action (edit, approve or delete) will be set here which will be passed as POST variable on form submission 
```

现在你需要一些 javascript 来做一些技巧。

在您的管理面板脚本中添加以下代码，最好是 head 部分

```
<script type="text/javascript" src="jquery-1.7.min.js"></script>
<script type="text/javascript">
            $(document).ready(function(){
                $('.action').click(function(){
                    var action = $(this).attr('name');
                    $('#action').val(action);
                    $(this).closest('form').submit();

                })
            })
     </script> 
```

现在来修改 process.php 文件

```
if (isset($_POST['approve'])) {
    if (isset($_POST['check'])) {
        foreach ($_POST['check'] as $value) {
            $sql = "UPDATE post SET post_approved = 1 WHERE ID = $value"; //write this query according to your table schema
            mysql_query($sql) or die(mysql_error());
        }
    }
} elseif(isset($_POST['edit'])){
    //do the edit things here
} elseif(isset($_POST['delete'])){
    foreach ($_POST['check'] as $value){
        $sql = "DELETE FROM post WHERE ID=$value";//modify it
        mysql_query($sql) or die(mysql_error());
    }
} 
```

**笔记**

您可能不想多选复选框进行编辑。您只需要稍微调整上面的 javascript 代码，它就会在表单提交时将 ID 作为 post 变量发送，您可以从中检索一个条目的详细信息，然后会出现编辑功能。我把它留给你。试试看，在这里发布你的试用代码，如果它不起作用，我会给你一个解决方案。

# .net - Janus Grid：格式化满足条件的列数据

> ID：10384267
> 
> 赞同：1
> 
> 时间：2012-04-30T13:10:15.113
> 
> 标签：.net, number-formatting, janus

我在 Janus 网格中有一个数字列。如果它们小于零，我想要做的是显示其中的数字（1234）。我已经设法将这些数字的颜色更改为红色，但是只有当它们小于零时，我才需要一些帮助才能在数字周围放置大括号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T21:01:36.067

这里的技巧是设置列的 FormatString。

数字的 FormatString 分为 3 个部分，每个部分用分号分隔。

此处记录了数字的 FormatString：http: [//msdn.microsoft.com/en-us/library/0c899ak8.aspx](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

标题为“;”的部分 Section Separator'涵盖了您需要的内容。

您可以在列的 GridEx 设计器中设置格式字符串。第一部分是正数的格式，第二部分是负数，第三部分是格式化零。

您没有说明您的方案中是否涉及小数位，但假设您需要 2 个小数位，您可以将其用作起点：

```
col.FormatString =  "0.00;(0.00);IsZero" 
```

用这个 FormatString 举 3 个例子：

1.  7
2.  -13.4
3.  0

会给出结果

1.  7.00
2.  (13.40)
3.  为零

# sql - SSRS 报告，组过滤

> ID：10384278
> 
> 赞同：3
> 
> 时间：2012-04-30T13:10:54.073
> 
> 标签：sql, reporting-services, business-intelligence

我有带有特定过滤器的组。在这些组中，我几乎没有带有条件的“计数”表达式。一切都很好。但是当组没有任何元素时，它就会消失。但我需要在“计数”单元格中显示该组的“0”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:51:28.840

这里有两个建议。

在您的查询中使用 ISNULL 函数。

```
 Select
 ISNULL(YourExpression, 0)
 From Table 
```

在 SSRS 中，对要消除空值的字段使用表达式。

```
 iif(fields!Field.Value is nothing , 0 , Fields!Field.Value) 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:30:11.690

使用以下表达式：

```
=iif(isnothing(Field!Name.value),0,count(Field!Name.value)) 
```

# mysql - mysql：为 mysql 调整或自定义操作系统（red-hat 或 ubuntu）

> ID：10384280
> 
> 赞同：0
> 
> 时间：2012-04-30T13:11:10.337
> 
> 标签：mysql, operating-system, installation, performance

我想知道操作系统级别是否有任何东西可以查看和调整，这可能有助于下一步安装的 mysql。

我知道一些需要考虑的事情

```
 file system: some file systems will fit better for mysql and its engines 
                 behavior
    open file  : We should be able to open enough number of file as MYISAM 
                 opens 3 files for each table
    Architecture : 64 bit is recommended than 32 bit. 
```

我还能在这里调整或考虑什么。提前谢谢....

# c# - 查询是否禁用了 Windows 服务（不使用注册表）？

> ID：10384284
> 
> 赞同：6
> 
> 时间：2012-04-30T13:11:37.977
> 
> 标签：c#, service, registry

是否有可用于查询 Windows 服务是否被禁用的 .NET (C#) 方法或 API 调用？相关的 MSDN 文章[在这里](http://support.microsoft.com/kb/103000)。

我想避免直接查询注册表。下面是我现在正在使用的一些代码（它有效）。但是，我正在寻找更优雅且侵入性更小的东西。

```
const String basepathStr = @"System\CurrentControlSet\services\";
String subKeyStr = basepathStr + servicenameStr;

using (RegistryKey key = Registry.LocalMachine.OpenSubKey(subKeyStr))
{
    return (int) key.GetValue("Start");
} 
```

我确实找到了一个[类似的问题](https://stackoverflow.com/questions/1939611/get-the-disabled-status-of-a-windows-service)，但我希望有一个更好的答案，因为答案可能已经过时（3 年过去了）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T14:43:35.153

这是我决定使用的代码中最相关的部分......感谢大家的帮助！

```
 StartupState state = StartupState.Unknown;
    try
    {
        PermissionSet fullTrust = new PermissionSet(System.Security.Permissions.PermissionState.Unrestricted);
        fullTrust.Demand();
        string wmiQuery = @"SELECT * FROM Win32_Service WHERE Name='" + servicenameStr + @"'";
        ManagementObjectSearcher searcher = new ManagementObjectSearcher(wmiQuery);
        ManagementObjectCollection results = searcher.Get();
        foreach (ManagementObject service in results)
        {
            if (service["StartMode"].ToString() == "Disabled")
                state = StartupState.Disabled;
            else
                state = StartupState.Enabled;
        }
        return state;
    }
    catch (SecurityException se)
    {
        return StartupState.Refused;
    }
    catch (Exception e)
    {
        return StartupState.Error;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T13:14:50.040

使用`ServiceController`该类获取有关服务的信息。

**编辑**
似乎你不能做的事情之一`ServiceController`就是获得启动类型。谷歌搜索显示了以下博客文章，其中包含使用 P/Invoke 获取服务启动类型的代码：http: [//peterkellyonline.blogspot.de/2011/04/configuring-windows-service.html](http://peterkellyonline.blogspot.de/2011/04/configuring-windows-service.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:25:17.410

向 System.Management 添加一个引用，以下代码将为您提供 StartMode

```
 string wmiQuery = "SELECT * FROM Win32_Service WHERE Name='YourServiceName'";
        var searcher = new ManagementObjectSearcher(wmiQuery);
        var results = searcher.Get();

        foreach (ManagementObject service in results)
        {
            Console.WriteLine(service["StartMode"]);
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T13:30:16.110

ServiceController 类不提供此信息。您应该使用 WMI。详细解决方法见[这里](http://www.codeproject.com/Articles/7665/Extend-ServiceController-class-to-change-the-Start)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-30T13:21:31.403

**WMI**可以是另一种查询 Windows 服务状态的方法

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-04-30T13:23:18.407

您可以使用：

```
using System.ServiceProcess; 
```

然后通过以下方式链接您要查看状态的服务：

```
// Link by service name
ServiceController TheServiceName = new ServiceController();
TheServiceName.ServiceName = "Spooler";

// Link by display name
ServiceController TheDisplayName = new ServiceController();
TheDisplayName.ServiceName = "Print Spooler"; 
```

例如检查 isRunning 状态：

```
if (TheServiceName.Status == ServiceControllerStatus.Running)
    MessageBox.Show("The service is running."); 
```

# php - 如何为 Doctrine 中表范围内的对象设置序列参数？

> ID：10384286
> 
> 赞同：0
> 
> 时间：2012-04-30T13:11:41.397
> 
> 标签：php, zend-framework, doctrine, doctrine-orm

鉴于我有一个 Gallery 对象和 Photo 对象。图库有很多照片。我希望能够管理画廊范围内的照片顺序（画廊范围内的画廊也是如此）。我需要找到并存储一个序列的 int 值，该值将是数据库中已经存在的序列的 inceremnted 值，对于给定画廊或画廊范围内的照片。

解决这个问题的最佳方法是什么？首先想到的是在 PrePersistCallback 中获取序列并增加它。但是模型不应该通过存储库获取任何其他模型。

我可以在控制器中进行控制，手动获取和设置序列，但这可能会导致代码重复。

所以也许我不知道这个在 Doctrine 中的构建有一些特殊的行为？

谢谢楼上的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:54:28.223

只是为了回答我的问题以供将来参考。“Gedmo”库（以及许多其他库）中有一个不错的可排序行为扩展，可以对您的实体进行排序操作。

更多信息： http: [//gediminasm.org/article/sortable-behavior-extension-for-doctrine2](http://gediminasm.org/article/sortable-behavior-extension-for-doctrine2)

# iphone - 我应该使用 ABPersonViewController 还是 ABUnknownPersonViewController

> ID：10384291
> 
> 赞同：0
> 
> 时间：2012-04-30T13:11:48.677
> 
> 标签：iphone, ios, abpersonviewcontroller

我正在展示一个使用`ABPersonViewController`. 现在我有一个案例，我必须显示一个不在我的通讯录中的人的记录（详细信息）。我有这个人的属性（姓名/电话号码/电子邮件/地址）。我不想将此人联系人保存在我的通讯录中。但我需要显示人员详细信息（显示所有人员属性）。我应该使用`ABPersonViewController`or`ABUnknownPersonViewController`在这种情况下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:35:32.387

`ABUnknownPersonViewController`用于表示部分人员，并且可以选择禁止将联系人添加到地址簿。

```
ABUnknownPersonViewController *unknownPersonViewController = [[ABUnknownPersonViewController alloc] init];
unknownPersonViewController.allowsAddingToAddressBook = NO;
unknownPersonViewController.displayedPerson = person; //person is an ABRecordRef 
```

# c# - 在 page_load 之前运行按钮事件处理程序

> ID：10384300
> 
> 赞同：5
> 
> 时间：2012-04-30T13:13:22.143
> 
> 标签：c#, asp.net

我有一张桌子，里面有我数据库中的所有对象。我将它们加载到我的 Page_Load 函数中。我有一个文本字段和一个按钮，当单击该按钮时，我希望该单击的处理程序放置一个新对象，该对象的名称写在数据库的文本字段中。

现在，我希望单击后发生的情况是页面再次加载表中的新项目。问题是按钮事件处理程序在 Page_Load 函数之后运行。

对此的解决方案是在 Page_Load 中使用 IsPostBack 或使用预加载功能。一个问题是，如果我有 3 个不同的按钮，我将不得不在它们之间进行区分，而不是拥有 3 个不同的便捷功能。

有没有没有这个问题的解决方案？

代码：

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (Session["userId"] == null)
                Response.Redirect("Login.aspx");

            // LOAD DATA FROM DB
        }

        protected void CreateObject(object sender, EventArgs e)
        {
            // SAVE THE NEW OBJECT
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T14:49:42.257

也许您应该尝试在 PreRender 期间加载数据而不是 Load

```
 protected void Page_Load(object sender, EventArgs e)
    {
        this.PreRender += Page_PreRender
        if (Session["userId"] == null)
            Response.Redirect("Login.aspx");
    }

    protected bool reloadNeeded {get; set;}

    protected void CreateObject(object sender, EventArgs e)
    {
        // SAVE THE NEW OBJECT
        reloadNeeded = true;
    }

    protected void Page_PreRender(object sender, EventArgs e)
    {
        if(reloadNeeded || !IsPostBack)
        // LOAD DATA FROM DB
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T13:26:04.680

您可以检查事件目标并执行所需的操作：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
    {
         string eventTarget = Page.Request.Params["__EVENTTARGET"];
         if(whatever)
         {
             //do your logic here
         }
    }
} 
```

[在 Page_Load 事件中获取控件名称，使回帖](http://geekswithblogs.net/mahesh/archive/2006/06/27/83264.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:06:01.413

使用[Page_PreRenderComplete](http://msdn.microsoft.com/en-us/library/system.web.ui.page.onprerendercomplete.aspx)事件来检索您的表。这样一来，在所有用户事件触发后，您的页面将始终拥有可用的最新数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T15:20:21.480

为什么不将单击事件中的内容移动到新方法中。然后将该方法作为页面加载的第一行调用？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-17T15:11:14.697

一个老问题，但我在带有主/内容页面的 C#/ASP.NET 网站中遇到了同样的问题：单击主页面上的链接应该更改内容页面上网格视图的查询参数。正如您所说，按钮单击事件*在* `Page_Load`. 但它是*之前* `Page_LoadComplete`处理的（请参阅有关[ASP.NET Page Life Cycle](https://msdn.microsoft.com/en-us/library/ms178472.aspx)的信息），因此您可以在那里更改页面内容。

就我而言，我通过在母版页的单击事件中设置会话变量、在内容页面的 Page_LoadComplete 事件中获取此变量并基于此进行数据绑定来解决了该问题。

**母版页：**

```
<asp:LinkButton ID="Btn1" runat="server" OnCommand="LinkCommand" CommandArgument="1" >Action 1</asp:LinkButton>
<asp:LinkButton ID="Btn2" runat="server" OnCommand="LinkCommand" CommandArgument="2" >Action 2</asp:LinkButton>

protected void LinkCommand(object sender, CommandEventArgs e)
{
  HttpContext.Current.Session["BindInfo", e.CommandArgument.ToString());
} 
```

**内容页：**

```
protected void Page_LoadComplete(object sender, EventArgs e)
{
  string BindInfo = HttpContext.Current.Session["BindInfo"].ToString();
  YourBindDataFunction(BindInfo);
} 
```

# php - 如何在 php 类中显式声明成员 var 的类型

> ID：10384303
> 
> 赞同：9
> 
> 时间：2012-04-30T13:13:32.317
> 
> 标签：php

如果我可以显式声明成员 var 的类型（尤其是其他类作为成员），那么我的 IDE（例如 Dreamweaver）可以知道该成员的成员。

```
class PHPClass(){
    OtherClass $member_var;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-30T13:17:01.653

唯一的方法是使用这样的文档：

```
class MyClass {

    /**
     * @var OtherClass This is my other class
     */
    private $other;

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T13:16:18.333

你不能在 PHP 中做到这一点，但你可以通过使用[类型提示](http://us3.php.net/manual/en/language.oop5.typehinting.php)来接近：

```
class PHPClass
{
    protected $member_var;

    public function __construct(OtherClass $member)
    {
        $this->member_var = $member;
    }
} 
```

不过，我不知道这是否会对您在 Dreamweaver 中有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-03T12:33:02.817

我知道这个问题已经有将近十年的历史了，但是……在 PHP 7.4 中，属性定义可以有类型声明。

[https://www.php.net/manual/en/language.oop5.properties.php#language.oop5.properties.typed-properties](https://www.php.net/manual/en/language.oop5.properties.php#language.oop5.properties.typed-properties)

# filter - 安卓椭圆过滤器

> ID：10384305
> 
> 赞同：0
> 
> 时间：2012-04-30T13:13:35.917
> 
> 标签：filter, pitch-tracking

我需要为我正在尝试开发的音高检测算法实现一个低通椭圆滤波器。那里有任何可以在这里使用的库吗

# mongodb - 在 MongoDB 中配置 GridFS Chunksize

> ID：10384307
> 
> 赞同：4
> 
> 时间：2012-04-30T13:13:37.367
> 
> 标签：mongodb, gridfs

我目前正在研究使用 MongoDB 存储电子邮件数据。因为电子邮件的大小可能会变得相当大（比如 10 兆）。

我相信 GridFS 非常适合这个。让我有点害怕的是，文档对 gridFS 中的分片大小不是很清楚。据我了解，gridFS 中的分片大小不等于正常的分片大小，但默认为 256kb。这在我看来是一种很大的空间浪费，因为许多电子邮件的大小不会超过 50kb。

有没有办法在 GridFS 中配置文件的分片大小以使其更适合存储邮件？

干杯，马蒂亚斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:05:19.433

您不必担心尺寸。即使块大小为 256kb，50kb 的文档（包含您的电子邮件）仍将仅使用 50kb（+ 少量开销）。

块大小在驱动程序中配置。例如，您可以使用 PHP 驱动程序：

```
$gridFs->storeFile( 'filename.txt', array( 'chunkSize' => 50 * 1024 ) ); 
```

在 Java 驱动程序中，您可以在[GridFSInputFile](http://api.mongodb.org/java/2.7.0/com/mongodb/gridfs/GridFSInputFile.html#setChunkSize%28long%29)上调用[setChunkSize](http://api.mongodb.org/java/2.7.0/com/mongodb/gridfs/GridFSInputFile.html)。

但总的来说，您不必担心 chunkSize。

# c# - C# 参数化方法数组或参数化方法列表

> ID：10384308
> 
> 赞同：1
> 
> 时间：2012-04-30T13:13:37.537
> 
> 标签：c#, methods

我想声明一个参数化的方法数组或方法列表。这意味着将有一个方法数组，我可以通过使用数组的索引来调用该方法，同时我想为该方法提供一个参数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:23:44.310

如果您知道方法签名，则可以执行以下操作：

使用接受`int`并返回 a的方法示例`string`：

```
var functionList = new List<Func<int, string>>();

functionlist.Add(SomeMethod)

functionlist[0](12345); //call the function

//Assuming you had this:
public string SomeMethod(int val) { ... 
```

# android - 如何确保android使用默认字体？

> ID：10384311
> 
> 赞同：2
> 
> 时间：2012-04-30T13:13:46.717
> 
> 标签：android, android-fonts

我正在构建一个应用程序，并希望确保它使用 android 提供的默认“sans”字体类型。

我安装了一些奇怪的字体并将其设置为我的手机使用的字体，这样我就可以测试我的操作是否有效。

然后我更改了所有屏幕使用的主题，因此它包含以下行：

```
<item name="android:typeface">sans</item> 
```

虽然这没有任何影响......

如果我将主题字体行更改为：

```
<item name="android:typeface">serif</item> 
```

然后它确实起作用了，奇怪的字体没有显示，但我得到了默认的 android serif 字体......当我使用等宽字体时也会发生同样的情况......

但是当我使用 sans （或正常）时，它使用新安装的字体。

有谁知道实现这一目标的好方法？

* * *

编辑：我需要一种方法来为整个应用程序设置它，而不是为每个项目单独设置

* * *

Edit2：即使我在 xml 中设置它也不起作用。到目前为止，我认为衬线有效果，因为奇怪的字体没有衬线版本。所以android默认使用自己的字体。

**我怎样才能让安卓总是使用它自己的内置字体？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:18:16.460

你可以这样做，

```
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="#00FF00"
    android:typeface="serif"
    android:text="@string/hello" /> 
```

变成这样：

```
<TextView
    style="@style/CodeFont"
    android:text="@string/hello" /> 
```

通过定义一个 xml 主题文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="CodeFont" parent="@android:style/TextAppearance.Medium">
        <item name="android:layout_width">fill_parent</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:textColor">#00FF00</item>
        <item name="android:typeface">shreif</item>
    </style>
</resources> 
```

您还可以将样式应用于应用程序的所有活动：

```
<application android:theme="@style/CustomTheme"> 
```

或者只是一项活动：

```
<activity android:theme="@android:style/Theme.Dialog"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:47:26.770

这是我前段时间提出的一个问题，但一直没有找到答案。没关系。我认为最后：设备的每个供应商都可以为您提供另一种默认字体。

所以我决定在应用程序中打包“我自己的”字体。

（嗯，我想这里的每个人都在学习）

# c# - 连接到 MySQL 产生服务器找不到错误和超时

> ID：10384312
> 
> 赞同：0
> 
> 时间：2012-04-30T13:13:47.087
> 
> 标签：c#, mysql

我无法使用 C# 从远程计算机连接到我的 mysql 服务器。我知道服务器正在工作，因为我可以通过 phpmyadmin 访问所有表。我在服务器上关闭了防火墙，我为任何主机配置了用户，并且连接字符串的格式为：

```
Server=ip address;Uid=user;Pwd=password;Database=db name; 
```

但是，当我为 SqlConnection 对象调用 Open 方法时，我得到了一个找不到通用服务器的错误，它显然只是超时了该方法所花费的时间。我不知道我是否错过了 mysql 服务器的一些配置，我真的不知道接下来要尝试什么......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T13:15:51.333

听起来像您 using `SqlConnection`，它连接到**Microsoft SQL Server**数据库。

您需要使用 MySQL 客户端库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:19:23.687

该类`SqlConnection`用于专门连接到 Microsoft SQL Server。要连接到 MySQL 数据库，您需要下载[MySQL Connector/NET](http://forums.mysql.com/list.php?47)，然后使用`MySqlConnection`该类，该类很好地反映了`SqlConnection`相关类。

# jsp - 如何在同一个提交页面中显示 JSP 页面的结果？

> ID：10384313
> 
> 赞同：1
> 
> 时间：2012-04-30T13:13:58.637
> 
> 标签：jsp, struts

我正在使用struts 1.3.8。在 JSP 中，我有一些搜索工具。一旦用户按下搜索按钮，结果将以记录的形式出现。
如何在搜索按钮下的同一搜索页面中显示结果记录？请尽快回复.. 提前致谢
，
Laxman Chowdary

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:20:10.940

你有两个选择：

1.  让表单自己提交，并生成具有相同搜索表单的页面，预​​先填写用户提交的内容，以及表单之后的搜索结果。这是典型的“Web 1.0”方式，Struts 表单域非常适合这项任务。
2.  在提交表单时使用 JavaScript 向服务器发送 AJAX 请求，并使服务器生成部分页面，仅包含搜索结果。在 AJAX 响应处理程序中，将搜索结果插入到页面的 DOM 树中。服务器也可以回答原始搜索结果（即非 HTML 格式），例如使用 JSON，然后 JavaScript 响应处理程序将遍历结果并在 DOM 中动态创建适当的 HTML 元素。

编辑：

详细说明第一种方法：有两个操作（`showSearchForm`和`executeSearch`）都使用相同的 ActionForm （包含搜索表单字段）。

第一个操作只是用默认搜索值填充表单，并分派给显示表单和结果的 JSP。由于没有要显示的结果，它只会显示搜索表单。

第二个动作验证表单，执行搜索，将搜索结果存储到请求属性中或直接存储到 ActionForm 中，然后分派到与第一个动作相同的 JSP。这一次，JSP 将找到要显示的结果，并因此显示它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:23:17.490

使用阿贾克斯。

如果我用 jQuery 来做

```
jQuery.ajax(
    url: getSomething, 
    datatype: "JSON",
    success:function(data){
     //parse and call add new records in the table
 }); 
```

或者

再次使用 Ajax，在 struts 中说您将检索到的记录放在会话中。

然后是另一个具有逻辑或读取会话属性并创建 html 表的 jsp，只需返回该页面。由于数据已经在会话中，您的 jsp 将被填充。因此，您的 ajax 调用将如下所示：

```
jQuery.ajax(
        url: getSomething, 
        success:function(data){
         jQuery('#IdOfElementWhereTheHTMLTableNeedsToBeAdded').append(data);
     }); 
```

# java - 在 Matlab 中创建图形并在 Java 程序中显示它们

> ID：10384320
> 
> 赞同：3
> 
> 时间：2012-04-30T13:14:27.193
> 
> 标签：java, matlab, graph

我需要生成矩阵图并在 JSP 上显示这些图。该项目是用 Java 开发的，到目前为止，我所有与矩阵相关的操作都是使用 MatLabControl API [http://code.google.com/p/matlabcontrol/](http://code.google.com/p/matlabcontrol/)执行的。

我想返回 MATLAB 生成的矩阵（尤其是特征值矩阵和小波）。MATLAB 提供了一个函数“im2java”，将图形图像从其 MATLAB 表示形式转换为 java.awt.Image。我用于在 MatlabControl 中获取图像数据的代码如下：

```
public Image produceEigenValueGraph(final double [][] matrix) {
final double [][] maxEigenValueMatrix =
            extractOutMaxEigenValues(matrix);
    Image matlabPlotImage = null;
    try {
        MatlabNumericArray matLabEigenValueMatrix =
                new MatlabNumericArray(maxEigenValueMatrix, null);
        matLabTypeConverter.setNumericArray("eigen", 
                                            matLabEigenValueMatrix);
        matLabProxy.setVariable("amountOfTime", matrix.length - 1);
        matLabProxy.eval("time");
        matLabProxy.eval("plot(time, eigen)");
        matLabProxy.eval("frame=getframe");
        final Object [] returnedMatlabArguements =
                matLabProxy.returningEval("im2java(frame.cdata)", 1);
        matlabPlotImage =
                (Image)returnedMatlabArguements[0];
    } catch (MatlabInvocationException mie) {
        mie.printStackTrace();
    }
    return matlabPlotImage;
} 
```

代码返回一个嵌套异常：

```
Caused by: java.io.WriteAbortedException: writing aborted; 
java.io.NotSerializableException: sun.awt.image.ToolkitImage 
```

这基本上结束了上述代码工作的任何希望，除非我的使用不正确。

**注意**代码确实生成了正确的图形，但无法在 java.awt.Image 中返回它

我的问题是：

```
 -Is the above code the correct/only way to return images to a java program from Matlab?
    -If it is what would be the best alternatives to using Matlab, Java API or otherwise? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:28:54.157

这是导致异常的行吗？

```
matlabPlotImage = (Image)returnedMatlabArguements[0]; 
```

回答你的问题

“-上述代码是从 Matlab 将图像返回到 java 程序的正确/唯一方法吗？”

您可以从 Matlab 调用 java 类，因此您也可以在 Matlab 文件中使用 java 并调用它来替换

```
final Object [] returnedMatlabArguements = matLabProxy.returningEval("im2java(frame.cdata)", 1);
matlabPlotImage = (Image)returnedMatlabArguements[0]; 
```

由于 Image 不可序列化，因此引发错误。一种选择是使用 matlab 或 java 将其保存为某种图像格式（jpg、png、tiff）的文件，并返回 File 而不是 Image。

“-如果它是使用 Matlab、Java API 或其他方式的最佳选择吗？”

Mathworks 提供了一个 Java api 来执行您可以实现的许多线性代数计算。 [http://math.nist.gov/javanumerics/jama/#Package](http://math.nist.gov/javanumerics/jama/#Package)

或者，Apache Commons Math 项目提供了广泛的线性代数函数以及其他工具。[http://commons.apache.org/math/userguide/linear.html](http://commons.apache.org/math/userguide/linear.html)

我会查看其他帖子以获取有关在 java 中绘图的建议

[用 Java 构建图](https://stackoverflow.com/questions/3263106/constructing-graphs-in-java)

[用于 Web 应用程序的 Java 图形库？](https://stackoverflow.com/questions/661639/java-graphing-libraries-for-web-applicattions)

# database - 使用 cakephp 2.1 将 excel 作为 mysql 表导入

> ID：10384321
> 
> 赞同：0
> 
> 时间：2012-04-30T13:14:27.520
> 
> 标签：database, excel, cakephp, import

召集所有 cakephp 大师！！

我到处寻找，捆绑所有优秀的读者、作家、助手，但无济于事。

我真的需要将一个 excel 文件导入到一个表中，无论它是创建一个表还是插入到一个现有的表中，根据使用 cakephp 2.1 的 excel 列迭代

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:36:58.087

使用 CSV 文件而不是 excel 文件（因为如果您尝试为此目的使用 excel，您的问题会变得更加复杂，因为 excel 文件的结构比简单的 csv 文件非常复杂）您可以使用 ms excel 轻松地将 excel 文件导出到 csv，或任何其他电子表格应用程序

看到这些链接

1.  [http://mrphp.com.au/code/importing-data-csv-cakephp](http://mrphp.com.au/code/importing-data-csv-cakephp)

2.  [http://narendravaghela.com/cakephp/read-csv-file-in-cakephp/](http://narendravaghela.com/cakephp/read-csv-file-in-cakephp/)

# ios - iphone数据交换的Json思维导图

> ID：10384322
> 
> 赞同：0
> 
> 时间：2012-04-30T13:14:35.553
> 
> 标签：ios, xcode

我正在创建一个应用程序，用户可以在其中创建文档并将其上传到网络上。有点像pages和Icloud。用户可以添加图像、文本字段，并且在未来的视频中，所有这些都添加到 NsMutableArray 通过知道我正在以编程方式截取页面并将其上传到 Dropbox，然后在 UITableView 中进行动态播放。它工作正常，但它是屏幕截图，因此您无法滚动文本并查看视频。

为此，我决定使用 json。我正确地集成了库，但我很困惑。我无法理解它是如何工作的。我是否需要分别上传所有片段，然后创建一个带有图像位置和大小的 json 文件，以将所有内容放在 tableview 中，或者实际将图像转换为 json 语言？如何创建 json 文件并添加对象？json 编写器、序列化和解析器有什么区别？

但最让我困惑的是，我是否需要将所有的数据json语言转换？那我该如何进行。我需要一个清晰的头脑计划！谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:06:56.347

JSON 只是一种以简单的基于文本的形式表示数据的方式，就像简单的 XML 一样。表示二进制数据（如图像）的最常见方法是将数据进行 base 64 编码，使其成为 ascii 字符串，并将其嵌入到 JSON 数据中。

Writer：获取一个数据结构，NSDictionary、NSArray、YourObject 等，并将其转换为它的 JSON 表示形式。序列化：将 JSON 表示转换为可以通过网络发送的东西 解析器：读取和解析 JSON 数据结构，就像任何其他解析器一样，输出可以是许多东西，例如 DOM 树、一系列事件或到某个原生对象的映射。

至于您需要如何在应用程序中发送/接收数据，这很难说，您可能希望进行小的异步调用以检索少量数据并逐个组装它们，或者接收整个“页面”在一个单个文档。这些更多是关于您的应用程序行为方式的设计决策。JSON 只是一种将原生对象转换为某种基于文本的格式、通过网络发送它们并再次将它们重新组合成原生对象的方法。

网上有很多很好的基本 JSON 教程，谷歌搜索会找到一些很好的初学者教程。

# android - 如何根据手机的加速度计判断是左手还是右手

> ID：10384325
> 
> 赞同：0
> 
> 时间：2012-04-30T13:14:40.910
> 
> 标签：android, iphone, accelerometer, kinect

是否有可能根据加速度计数据获取有关持有 kinect 的手的信息？

如果没有，是否有任何可能获取有关持有设备的手的信息。我首先假设我使用的是基于 iPhone 或 Android 的手机。

我想将这些数据与 kinect 一起使用，以便我可以通过使用 kinect 设备提供的联合跟踪来显示拿着手机的手中的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:40:28.220

没有*简单*的方法来检测哪只手，但我敢打赌，随着时间的推移，左手和右手会产生不同的加速度计特征，然后您可以通过机器学习对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:16:51.707

据我所知，没有任何设备能够通过简单地握住设备来检测哪只手握着设备。

你想拿着kinect吗？你不应该这样做，因为它会导致阅读不准确。

我假设您没有握住 kinect，那么在这种情况下，您的 kinect 将能够分辨出哪只手握着 kinect。

# matlab - matlab 查询以查看应用程序的使用情况

> ID：10384331
> 
> 赞同：0
> 
> 时间：2012-04-30T13:15:06.900
> 
> 标签：matlab

我有一个包含超过 600 万条记录的 MySQL 表，每条记录都有一个纪元时间戳。我需要绘制一天中的所有时间戳。换句话说，我需要查看在上午 7 点到 8 点、上午 8 点到 9 点等之间有多少个时间戳 - 对于一天中的所有 24 小时块。我不需要它们按星期或月份的日期绘制，只需要一天中的时间。每个时间戳都采用 UTC。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:25:20.973

您可以使用 MySQL 的[`FROM_UNIXTIME`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)函数从数据库中获取日期字符串，并将结果转储到文件中，然后您可以将其读入 MATLAB。接下来，提取每条记录的时间的方法之一是使用 MATLAB 的[`datevec`](http://www.mathworks.com/help/techdoc/ref/datevec.html)函数，分别获取日期字符串的每个组件：

```
datevec('2007-11-30 10:30:19')

ans =

    2007          11          30          10          30          19 
```

例如，如果您将数据作为带有日期字符串的长向量读入，则可以应用`datevec`到该向量，然后获取结果矩阵的“小时列”。然后，您可以使用[`hist`](http://www.mathworks.com/help/techdoc/ref/hist.html)或[`histc`](http://www.mathworks.com/help/techdoc/ref/histc.html)函数制作计数的直方图，具体取决于您是要指定 bin 中心还是 bin 边缘。如果您有一个 hour 专栏`H`，那么应该可以使用类似的东西`hist(H, 0:23)`。对于数据的性质，该`histc`函数可能更自然一些，但涉及的程度略高；检查文档。

# ruby-on-rails - Rails：在哪里定义 facebook 应用程序 ID，以便设计初始化程序和控制器可以使用它。

> ID：10384335
> 
> 赞同：0
> 
> 时间：2012-04-30T13:15:21.020
> 
> 标签：ruby-on-rails, devise, global-variables, yaml, omniauth

我正在尝试设置 fb 应用程序 ID（由omniauth 使用），以便其全局设计初始化程序和控制器。

**更多信息**

我在设计初始化程序（config/initializer/devise.rb）中需要它，以便我可以设置 config.omniauth：facebook、fb_app_id、fb_app_secret

**尝试的解决方案**

我尝试将此信息添加到 yml 文件（[http://railscasts.com/episodes/85-yaml-configuration-file](http://railscasts.com/episodes/85-yaml-configuration-file)）中，但是，看起来 yml 哈希是为控制器设置的，但我不能将它用于设计初始化程序。

```
/home/ubuntu/myapp/config/initializers/devise.rb:215:in `block in <top (required)>': uninitialized constant APP_CONFIG (NameError) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T16:52:20.167

对于那些感兴趣的人，我最终将变量写在 config/environments/production.rb & config/environments/development.rb

您可以通过添加来设置全局变量：

```
config.fb_app_id = 23839282 
config.fb_app_secret = aj32j32j4jk 
```

（在 production.rb 或 development.rb 中设置一个合适的）

然后可以在初始化程序中使用它们，也可以在我的实际应用程序的视图、控制器等中使用它们。

```
Rails.configuration.fb_app_id
Rails.configuration.fb_app_secret 
```

阅读第二个答案： [如何在 Rails 中定义自定义配置变量](https://stackoverflow.com/questions/1450285/how-to-define-custom-configuration-variables-in-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:17:03.220

我通过添加一个初始化程序（称为`env.rb`）来设置我需要的各种环境变量（`ENV['FACEBOOK_APP_ID']`例如 ）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:35:54.377

我遇到了类似的问题，但我找到了不同的解决方案。我从 devise.rb 中将 ENV['FACEBOOK_APP_ID'], ENV['FACEBOOK_APP_SECRET'] 传递到 CONFIG.OMNIAUTH。然后我添加环境变量 (~/.bash_profile) 或 heroku config:add FACEBOOK_APP_ID。这允许我安装到新环境并重新生成 APPID，而无需推送新代码。

# upload - 出于安全原因，escapeshellarg() 已被禁用

> ID：10384336
> 
> 赞同：7
> 
> 时间：2012-04-30T13:15:21.907
> 
> 标签：upload, codeigniter-2

当我想以任何形式上传任何内容时，我会在我的网站上看到**警告：escapeshellarg() 出于安全原因已被禁用**消息。我能做些什么来解决这个问题？

我的框架是 codeigniter 最终版本。

这是完整的警告：

```
A PHP Error was encountered

Severity: Warning

Message: escapeshellarg() has been disabled for security reasons

Filename: libraries/Upload.php 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-11T12:05:29.550

操作员将静音该`@`函数可能引发的任何 PHP 错误。**你永远不应该使用它！**

解决方案：

1.  从in文件中删除`escapeshellarg`字符串`disable_functions``php.ini`

2.  如果您无权访问该文件，请要求您的主机提供商删除从 php.ini 文件中删除该`escapeshellarg`字符串`disable_functions``php.ini`

3.  做你自己的`escapeshellarg`。该函数仅转义给定字符串中的任何单引号，然后在其周围添加单引号。

    ```
    function my_escapeshellarg($input)
    {
        $input = str_replace('\'', '\\\'', $input);
        return '\''.$input.'\'';
    } 
    ```

    并做这样的事情：

    ```
    // $cmd = 'file --brief --mime ' . escapeshellarg($file['tmp_name']) . ' 2>&1';
    $cmd = 'file --brief --mime ' . my_escapeshellarg($file['tmp_name']) . ' 2>&1'; 
    ```

    但最好的办法是扩展`Upload.php`库并覆盖`_file_mime_type`函数，而不是更改 CodeIgniter 的核心，这样如果你想更新 CodeIgniter 就不会丢失它。

    有用的链接：[https ://www.codeigniter.com/user_guide/general/core_classes.html](https://www.codeigniter.com/user_guide/general/core_classes.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T05:00:23.090

尝试

```
$cmd = 'file --brief --mime ' . @escapeshellarg($file['tmp_name']) . ' 2>&1'; 
```

从system/libraries文件夹中打开Upload.php文件放在第1066行`@`前面，然后把`escapeshellarg($file['tmp_name'])`这个文件上传到application/libraries文件夹下会更好，否则没问题，你可以替换系统的Upload.php文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T06:13:03.847

1.  从 php.ini* 文件的 disable_functions 中删除 escapeshellarg 字符串

2.  如果您无权访问 php.ini* 文件，请让您的托管服务提供商删除上面的字符串

3.  更改允许运行 escapeshellarg 功能的托管服务提供商。

从这个网站：[http ://www.2by2host.com/articles/php-errors-faq/disabled_escapeshellarg/](http://www.2by2host.com/articles/php-errors-faq/disabled_escapeshellarg/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-27T11:43:34.383

解决此问题的另一种简单方法是将您的应用程序从以下位置移动`development`到`production`：

在您的应用程序根目录中打开`index.php`并更改

```
define('ENVIRONMENT', 'development'); 
```

至

```
define('ENVIRONMENT', 'production'); 
```

# sql - Oracle SQL - 在月份-当前年份（-1）到月份-当前年份之间选择日期

> ID：10384337
> 
> 赞同：4
> 
> 时间：2012-04-30T13:15:23.437
> 
> 标签：sql, oracle, date-arithmetic

我有一个包含日期的列以及表中的其他列。我希望能够：

显示与上一年 9 月 1 日到当年 7 月 30 日相匹配的所有行。

我知道一些需要做的事情，只是不确定日期的具体语法。

```
SELECT * FROM xx
WHERE ASM_DATE BETWEEN TRUNC(SYSDATE-1,'YY') AND TRUNC(SYSDATE,'YY'); 
```

这就是我到目前为止所拥有的..

我知道我可以使用 SYSDATE 和 'YYYY' 来获取当前年份，然后为上一年执行 -1，但是我不确定如何指定除此之外的月份。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T13:18:41.613

```
SELECT
  *
FROM
  xxx
WHERE
      ASM_DATE >= ADD_MONTHS(TRUNC(SYSDATE, 'MONTH'), -12)
  AND ASM_DATE <  ADD_MONTHS(TRUNC(SYSDATE, 'MONTH'),   1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T13:19:37.423

看看oracle ADD_MONTHS 函数。

在[oracle 参考中有完整的日期时间函数列表。](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions001.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-06T05:03:04.303

比如说，当前月份是**April of 2015**。

上个月的一年数据（从**2014 年 2 月 1 日**到2015 年 3 月**31 日**）：

```
SELECT *
FROM xx
WHERE 
ASM_DATE BETWEEN ADD_MONTHS(TRUNC(SYSDATE, 'MM'), -14) 
AND
LAST_DAY(ADD_MONTHS(TRUNC(SYSDATE, 'MM'), -1)) 
```

包括当月在内的一年数据（从**2014 年 3 月 1 日**至2015 年 4 月**30 日**）：

```
SELECT *
FROM xx
WHERE 
ASM_DATE BETWEEN ADD_MONTHS(TRUNC(SYSDATE, 'MM'), -13) 
AND
LAST_DAY(TRUNC(SYSDATE, 'MM')) 
```

# javascript - 如何在 Node.js 中追加到新行

> ID：10384340
> 
> 赞同：114
> 
> 时间：2012-04-30T13:15:56.197
> 
> 标签：javascript, node.js, newline

我正在尝试使用 Node.js 将数据附加到日志文件，并且工作正常，但不会进入下一行。 `\n`似乎在我下面的函数中不起作用。有什么建议么？

```
function processInput ( text ) 
{     
  fs.open('H://log.txt', 'a', 666, function( e, id ) {
   fs.write( id, text + "\n", null, 'utf8', function(){
    fs.close(id, function(){
     console.log('file is updated');
    });
   });
  });
 } 
```

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-04-30T13:17:56.870

看起来您正在 Windows 上运行它（给定您的`H://log.txt`文件路径）。

尝试使用`\r\n`而不仅仅是`\n`.

老实说，`\n`很好；您可能正在记事本或其他不呈现非 Windows 换行符的文件中查看日志文件。尝试在不同的查看器/编辑器（例如写字板）中打开它。

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2015-09-18T18:29:01.503

请改用 os.EOL 常量。

```
var os = require("os");

function processInput ( text ) 
{     
  fs.open('H://log.txt', 'a', 666, function( e, id ) {
   fs.write( id, text + os.EOL, null, 'utf8', function(){
    fs.close(id, function(){
     console.log('file is updated');
    });
   });
  });
 } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-08-29T05:36:46.237

使用`\r\n`组合在节点 js 中追加新行

```
 var stream = fs.createWriteStream("udp-stream.log", {'flags': 'a'});
  stream.once('open', function(fd) {
    stream.write(msg+"\r\n");
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-27T10:57:19.877

或者，您可以使用[fs.appendFile](https://nodejs.org/api/fs.html#fsappendfilepath-data-options-callback)方法

```
let content = 'some text';
content += "\n";
fs.appendFile("helloworld.txt", content, (err) => {
    return console.log(err);
}); 
```

# objective-c - 如何访问 sudzc.com SOAP 结果中的数组字段？

> ID：10384349
> 
> 赞同：1
> 
> 时间：2012-04-30T13:16:38.070
> 
> 标签：objective-c, zend-framework, soap, nsmutablearray, sudzc

很抱歉问了一些愚蠢的问题，但我仍然遇到 Objective-C 语法的问题。所以，我从我的 sudzc.com 生成的代码中得到了这个 SOAP 响应。它应该包含一个带有`veh_id`和`version`作为列的 SQL SELECT 结果。

我作为响应对象得到的是一个 NSMutableArray，

```
NSMutableArray* soapArray = (NSMutableArray*)value; 
```

所以我走过它：

```
unsigned count = [soapArray count];
while (count--) {
   id myobj = [soapArray objectAtIndex:count];
   NSLog(@"myobj: %@", myobj); 
} 
```

我得到的打印输出是这样的：

```
myobj: {
item =     {
    key = version;
    value = 1;
}; 
```

对于 SQL 结果的每一行。如果这是数组元素的打印输出，为什么只有`version`列而不是`veh_id`列？

如何访问`myobj`类型对象上的键值`id`？我必须先投吗？

这是从 Zend Soap-Server 返回的 XML 字符串：

```
<?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://www.[myurl].com/soap" xmlns:ns2="http://xml.apache.org/xml-soap" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><ns1:getActiveVehiclesResponse><return SOAP-ENC:arrayType="ns2:Map[23]" xsi:type="SOAP-ENC:Array"><item xsi:type="ns2:Map"><item><key xsi:type="xsd:string">veh_id</key><value xsi:type="xsd:string">1</value></item><item><key xsi:type="xsd:string">version</key><value xsi:type="xsd:string">1</value></item></item><item xsi:type="ns2:Map"><item><key xsi:type="xsd:string">veh_id</key><value xsi:type="xsd:string">3</value></item><item><key xsi:type="xsd:string">version</key><value xsi:type="xsd:string">1</value></item></item><item xsi:type="ns2:Map"><item><key xsi:type="xsd:string">veh_id</key><value xsi:type="xsd:string">4</value></item><item><key xsi:type="xsd:string">version</key><value xsi:type="xsd:string">1</value></item></item></return></ns1:getActiveVehiclesResponse></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:39:04.327

不。你不需要强制转换它，因为它显示了所有获取的数据，我面临的问题是处理程序方法值（id 类型）只返回第一个元素。

检查以下代码： `...`

 `request = [service myServiceCall:self action:@selector(myHandlerMethod:) param:param1];

...

}

-(void) myHandlerMethod:(id)value{

NSString *xmlString = [[NSString alloc] initWithData:request.receivedData encoding:NSUTF8StringEncoding]; // now if the "value" returned is type as some array of some object,then any arrays don't handle serialization of all the elements of the array it holds. The following code prints just outer tag. (e.g. )

NSLog("%@",xmlString);` 

`}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:20:39.503

终于找到解决办法了！问题在于 deserializeAsDictionary 函数。由于我的 Soap xml 字符串被构造为将每个数据库列作为项目 - 键 - 值 - 键 - 值等，它在键“项目”下添加每一列，因此 deserializeAsDictionary 函数覆盖该行

```
[d setObject:v forKey:[child name]] 
```

已经添加的对象。在第一个镜头中，我添加了一个列迭代器，现在将列称为“item1、item2、..”（可能需要进一步优化）：

```
// Deserializes the element in a dictionary.
+(id)deserializeAsDictionary:(CXMLNode*)element {
NSLog(@"deserializeAsDictionary = %@, children: %d", element.stringValue, [element childCount]);

if([element childCount] == 1) {
    CXMLNode* child = [[element children] objectAtIndex:0];
    if([child kind] == CXMLTextKind) {
       NSLog(@"child %@ added", [child stringValue]);
        return [[[element children] objectAtIndex:0] stringValue];
    }
}

NSMutableDictionary* d = [NSMutableDictionary dictionary];
NSInteger i = 1;
NSString *objKey;
for(CXMLNode* child in [element children]) {
    id v = [Soap deserialize:child];
    if(v == nil) { 
        v = [NSNull null]; 
    } else {
        if([[child name] isEqualToString:@"(null)"]) {
            objKey = [NSString stringWithFormat:@"%@",[child stringValue]];
        } else if([[child name] isEqualToString:@"key"] || [[child name] isEqualToString:@"value"]) { 
            objKey = [NSString stringWithFormat:@"%@",[child name]];
        } else {
            objKey = [NSString stringWithFormat:@"%@%d",[child name],i++];
        }

    }

    [d setObject:v forKey:objKey];
    NSLog(@"child %@ added", objKey);
}
return d;
} 
```

结果数组现在看起来像：

```
},
    {
    item1 =         {
        key = "veh_id";
        value = 29;
    };
    item2 =         {
        key = version;
        value = 1;
    };
} 
```

# ruby-on-rails-3 - MongoDB无限滚动排序结果

> ID：10384354
> 
> 赞同：3
> 
> 时间：2012-04-30T13:16:59.507
> 
> 标签：ruby-on-rails-3, mongodb

我在尝试实现以下目标时遇到问题：

我想要一个具有“无限”滚动功能的页面，并且所有获取的结果都按某些属性进行排序。代码当前的工作方式是放置查询、对结果进行排序并显示它们。问题是，一旦用户到达页面底部并放置了新查询，此查询的结果就会被排序，但在它自己的上下文中。也就是说，如果您总共有 100 个结果，而第一个查询只显示 50 个，那么它们会被排序。但是下一个查询（对于接下来的 50 个）仅根据这 50 个结果对结果进行排序，而不是基于 100 个（总结果）。

那么，我是否必须一次获取所有结果，对它们进行排序，然后对它们应用一些分页逻辑，或者 MongoDB 是否可以通过对结果进行排序来实际进行无限滚动（AJAX 请求）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:31:40.640

使用 MongoDB 有几种方法可以做到这一点。您可以使用`.skip()`and`.limit()`命令（在此处记录：[http](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-CursorMethods) ://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-CursorMethods ）将分页应用于查询。

或者，您可以在查询中添加一个子句，例如：`{sorted_field : {$gt : <value from last record>}}`。换句话说，过滤掉排序值小于当前结果页中最后一个结果项的查询的匹配项。例如，如果结果的第 1 页返回文档 A 到 D，那么要检索下一页 2，您使用附加的 filter 重复相同的查询`x > D`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:43:16.760

让我先说我没有使用 MongoDB 的经验（尽管我知道它是一个 NoSQL 数据库）。

然而，这个问题在某种程度上是一个通用的数据库问题（您可能会得到更多的回复来标记它）。我已经使用 Cassandra（另一个，虽然完全不同的 NoSQL 数据库）实现了这样的功能，但是同样的原则也适用。

使用最后检索到的记录的 sorted-by 属性，并根据它在数据库中进行范围搜索。因此，假设您的数据库包含以下一组字母：

```
A
B
C
D
E
F
G 
```

..你一次检索 2 个字母，你会`A, B`先检索。当需要更多记录时，您可以使用 B 对数据库中的字母集进行范围搜索。用简单的英语来说，这将是这样的：

> 获取后面出现的字母，`B`将结果限制为 2

简要看一下 MongoDB 教程，您似乎[有条件运算符](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-ConditionalOperators)来帮助您实现这一点。

# javascript - 将 HTML/CSS 传单导出为图像或 pdf 以进行打印

> ID：10384359
> 
> 赞同：2
> 
> 时间：2012-04-30T13:17:10.297
> 
> 标签：javascript, jquery, html, css, printing

我正在为遛狗者创建一个基于 Web 的传单设计器，以自定义要打印的传单。这是非常基本的，并使用 jQuery 将 DIV 的内容/文本更改为他们在传单上想要的内容......

我的问题是如何让他们打印传单。理想情况下，他们希望在每个 A4 页面上选择 2 个或 4 个传单。或导出为 pdf 或图像以带到打印机。我已经研究过将 html/css 导出为 PDF 或图像，但似乎找不到任何适合这种情况的东西。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:18:31.107

Webkit HTML to PDF\Image 应该完全符合您的要求：

[http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T13:33:07.357

我建议`print`在主样式表中使用媒体类型：

```
@media print
{
  /* style sheet for print goes here */
} 
```

或者，在它自己的样式表中分离打印样式：

```
<link href="foo.css" media="print" rel="stylesheet" type="text/css" /> 
```

这允许您定义在使用浏览器的打印对话框（文件->打印...）时显示的自定义样式。这样，您的最终用户可以打印到他们的打印机、打印到 PDF（或 Microsoft XPS 文档编写器）或他们想要打印到的任何其他内容，而无需依赖根据过去的经验受制于的第三方库转换 CSS 样式时的怪癖和不准确之处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:23:49.673

您有很多选择......这只是一个，以防您想在不做太多工作的情况下将网页导出为 PDF：

[推荐？对于我们特定的 HTML -> PDF 项目](https://stackoverflow.com/questions/4350835/recommendation-for-our-specific-html-pdf-project/4846457#4846457)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T13:25:56.833

只是为了更多的选择，还有 phantomJS，它也使用 webkit 渲染引擎。QtPDF 是它在幕后使用的 pdf 引擎

[http://phantomjs.org/](http://phantomjs.org/)

这假设您有一个可以执行命令行脚本的服务器。我最近在一个项目中使用了它，它非常适合转换 HTML->PNG。没有对 PDF 功能进行广泛的亲自测试。

# security - 远程访问 Cpanel

> ID：10384374
> 
> 赞同：0
> 
> 时间：2012-04-30T13:17:59.160
> 
> 标签：security, api, cpanel

我想让我的用户（已经在我的应用程序中通过身份验证）通过 API 自动登录到他们的 Cpanel 帐户。如果我知道特定帐户的密码，那就没问题了。但是，我不认为我可以找回任何帐户的密码？如果可以，请告诉我要使用哪个 API 函数？如果没有，我该怎么做才能实现我想要的？

谢谢

埃尔辛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T22:36:12.910

看起来 cPanel 有一种提供安全远程登录的方法，如下所示：http: [//docs.cpanel.net/twiki/bin/view/AllDocumentation/SecureRemoteLogins](http://docs.cpanel.net/twiki/bin/view/AllDocumentation/SecureRemoteLogins) 您可以在`/usr/local/cpanel/Cpanel/LogMeIn.pm`

我有一个`LogMeIn.pm`准备就绪的 PHP 实现（易于理解并移植到任何其他语言）~~，但在分享之前，我正在与 cPanel 的法律人员进行清理。~~

在与 cPanel 的运营副总裁交谈后，`LogMeIn.pm`只要版权和许可声明保持不变，它现在已获得双重许可，允许在其他地方进行修改和使用。

我的 PHP 端口可以在这里找到：[https](https://gist.github.com/4440574) ://gist.github.com/4440574我决定将它实现为一个与原始类非常相似的静态类，但你可以很容易地将它变成一个程序函数。

使用它就像

```
LogMeIn::getLoggedInUrl('username', 'password', 'example.com', 'cpanel'); 
```

这将`false`在失败时返回，在成功时返回一个带有 URL 的字符串，该 URL 将使用户登录。

如果您运行的是 PHP 5.3.0 或更高版本，您可以将其添加到 cPanel 命名空间（添加`namespace cPanel;`在 之后的行`<?php`），以防止它与您已经编写（或将要编写）的应用程序中的任何内容发生冲突。

# java - 运行“mvn compile”时出现依赖关系错误

> ID：10384376
> 
> 赞同：1
> 
> 时间：2012-04-30T13:18:08.360
> 
> 标签：java, maven, deployment

继续我之前的帖子

[将java战争部署到heroku，pom.xml错误](https://stackoverflow.com/questions/10330095/deploying-java-war-to-heroku-pom-xml-error)

当我像“mvn package”一样编译时出现以下错误..即使有库

```
package org.hibernate does not exist

package org.springframework.transaction.annotation does not exist

package org.springframework.jdbc.core.simple does not exist

package com.microsoft.sqlserver.jdbc does not exist 
```

**pom.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.cim</groupId>
    <artifactId>controllers</artifactId>
    <name>abc</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>
    <properties>
        <java-version>1.6</java-version>
        <org.springframework-version>3.0.6.RELEASE</org.springframework-version>
        <org.aspectj-version>1.6.9</org.aspectj-version>
        <org.slf4j-version>1.5.10</org.slf4j-version>
        <spring.version>3.0.6.RELEASE</spring.version>
        <hibernate.version>3.6.7.Final</hibernate.version>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.apache.tomcat.embed</groupId>
            <artifactId>tomcat-embed-core</artifactId>
            <version>7.0.27</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tomcat.embed</groupId>
            <artifactId>tomcat-embed-logging-juli</artifactId>
            <version>7.0.27</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tomcat.embed</groupId>
            <artifactId>tomcat-embed-jasper</artifactId>
            <version>7.0.27</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tomcat</groupId>
            <artifactId>tomcat-jasper</artifactId>
            <version>7.0.27</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tomcat</groupId>
            <artifactId>tomcat-jasper-el</artifactId>
            <version>7.0.27</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tomcat</groupId>
            <artifactId>tomcat-jsp-api</artifactId>
            <version>7.0.27</version>
        </dependency>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>${hibernate.version}</version>
</dependency>
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-entitymanager</artifactId>
    <version>${hibernate.version}</version>
    <exclusions>
        <exclusion>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
        </exclusion>
        <exclusion>
            <groupId>dom4j</groupId>
            <artifactId>dom4j</artifactId>
        </exclusion>
    </exclusions>
</dependency>
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-ehcache</artifactId>
    <version>${hibernate.version}</version>
</dependency>
<dependency>
    <groupId>org.hibernate.javax.persistence</groupId>
    <artifactId>hibernate-jpa-2.0-api</artifactId>
    <version>1.0.1.Final</version>
</dependency>
<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib-nodep</artifactId>
    <version>2.2</version>
</dependency>
<dependency>
    <groupId>javax.transaction</groupId>
    <artifactId>jta</artifactId>
    <version>1.1</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-jdbc</artifactId>
    <version>${spring.version}</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-orm</artifactId>
    <version>${spring.version}</version>
</dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <!-- AspectJ -->
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>${org.aspectj-version}</version>
        </dependency>

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
            <scope>runtime</scope>
        </dependency>

        <!-- @Inject -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>

        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        **<dependency>
        <groupId>com.microsoft.sqlserver</groupId>
        <artifactId>sqljdbc4</artifactId>
        <version>4.0</version>
        </dependency>**

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>${java-version}</source>
                    <target>${java-version}</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.2</version>
                <configuration>
                    <warName>abc</warName>
                </configuration>
            </plugin>
            <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.4</version>
            <executions>
                <execution>
                    <id>copy-dependencies</id>
                    <phase>package</phase>
                    <goals><goal>copy-dependencies</goal></goals>
                </execution>
            </executions>
        </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.5</version>
                <configuration>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>

        </plugins>
        <pluginManagement>
<plugins>
    <!-- Ignore/Execute plugin execution -->
    <plugin>
        <groupId>org.eclipse.m2e</groupId>
        <artifactId>lifecycle-mapping</artifactId>
        <version>1.0.0</version>
        <configuration>
            <lifecycleMappingMetadata>
                <pluginExecutions>
                    <!-- copy-dependency plugin -->
                    <pluginExecution>
                        <pluginExecutionFilter>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-dependency-plugin</artifactId>
                            <versionRange>[1.0.0,)</versionRange>
                            <goals>
                                <goal>copy-dependencies</goal>
                            </goals>
                        </pluginExecutionFilter>
                        <action>
                            <ignore />
                        </action>
                    </pluginExecution>
                </pluginExecutions>
            </lifecycleMappingMetadata>
        </configuration>
    </plugin>
   </plugins></pluginManagement>
    </build>
</project> 
```

**错误**

```
D:\HUV\UVisitors>mvn compile
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building abc 1.0.0-BUILD-SNAPSHOT
[INFO] ------------------------------------------------------------------------
Downloading: http://repo.maven.apache.org/maven2/com/microsoft/sqlserver/sqljdbc4/4.0/sqljdbc4-4.0.p
om
[WARNING] The POM for com.microsoft.sqlserver:sqljdbc4:jar:4.0 is missing, no dependency information
 available
Downloading: http://repo.maven.apache.org/maven2/com/microsoft/sqlserver/sqljdbc4/4.0/sqljdbc4-4.0.j
ar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.808s
[INFO] Finished at: Mon Apr 30 21:08:40 IST 2012
[INFO] Final Memory: 3M/15M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project controllers: Could not resolve dependencies for project co
m.cim:controllers:war:1.0.0-BUILD-SNAPSHOT: Could not find artifact com.microsoft.sqlserver:sqljdbc4
:jar:4.0 in central (http://repo.maven.apache.org/maven2) -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following arti
cles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

请帮助我

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T16:09:25.243

以下依赖项在公共 Maven 存储库中不可用，因为其许可证未足够打开：

```
 <dependency>
        <groupId>com.microsoft.sqlserver</groupId>
        <artifactId>sqljdbc4</artifactId>
        <version>4.0</version>
   </dependency> 
```

您必须在私有存储库中提供此依赖项，或者使用您的源代码和本地存储库提供此依赖项。

看看下面的文章： http: [//mpashworth.wordpress.com/2012/04/15/adding-microsoft-sql-server-jdbc-driver-to-nexus-and-local-maven-repository/](http://mpashworth.wordpress.com/2012/04/15/adding-microsoft-sql-server-jdbc-driver-to-nexus-and-local-maven-repository/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-26T18:19:56.233

对我有用的是：

1.  下载[sqljdbc4-4.0.jar](https://www.dropbox.com/s/cfgo01rljugl7zg/sqljdbc4-4.0.jar?dl=0)
2.  保存到：`drive\path\to\profile\.m2\repository\com\microsoft\sqlserver\sqljdbc4\4.0`
3.  在该路径上，创建一个名为`sqljdbc4-4.0.pom`
4.  将其保存在文件中：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
             xmlns="http://maven.apache.org/POM/4.0.0"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

        <modelVersion>4.0.0</modelVersion>
        <groupId>com.microsoft.sqlserver</groupId>
        <artifactId>sqljdbc4</artifactId>
        <version>4.0</version>
    </project> 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-13T07:54:12.460

最近微软宣布开源 Microsoft JDBC Driver for SQL Server！现在您可以直接使用以下依赖项，而不是添加外部库：

```
<dependency>
<groupId>com.microsoft.sqlserver</groupId>
<artifactId>mssql-jdbc</artifactId>
<version>6.1.0.jre8</version> 
</dependency> 
```

# php - 最佳用法：加载产品目录提要

> ID：10384378
> 
> 赞同：2
> 
> 时间：2012-04-30T13:18:11.563
> 
> 标签：php, xml-parsing

我需要我们的网站从不同的网上商店加载多个产品目录。这些是 xml 提要。用法将是：显示产品，查看产品 ID 的库存行，按名称搜索产品...

加载它们的最佳方法是什么？

1/ 解析 xml 并将所有产品存入一个“巨大的表” 1.1/ mysql 2.2/ Nosql 表

2 / 或者将它们存储到 xml 文件中，并在每次我需要检索有关产品的信息时挖掘文件。

3/有更好的解决方案！？

PS：我们目前在php和mysql下工作

感谢您的回答;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:20:10.607

将数据放入数据库中，检索它会快得多。而且您通常需要比存储数据更频繁地检索数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:22:11.720

如果这些提要没有完全更改，最好将更改添加到 mysql 数据库并从那里读取它们。它会更快。

# python - 为开源库调试 python setup.py - bcfg2

> ID：10384382
> 
> 赞同：0
> 
> 时间：2012-04-30T13:18:34.170
> 
> 标签：python, packaging, setup.py, pypi

当我安装`bcfg2`- [http://bcfg2.org](http://bcfg2.org)使用

```
pip install git+git://git.mcs.anl.gov/bcfg2.git#egg=Bcfg2 
```

或者

```
pip install bcfg2 
```

我可以开始`bcfg2`工作了。调用`sudo bcfg2-admin init`，按预期向我显示设置配置步骤/标准输入提示。

当我介绍这样的`-e`选项时（在新的/干净的虚拟环境中），

```
pip install -e git+git://git.mcs.anl.gov/bcfg2.git#egg=Bcfg2 
```

我尝试打电话`sudo bcfg2-admin init`，我收到一条错误消息：-

```
calvin$ bcfg2-admin init
Traceback (most recent call last):
  File "/Users/calvin/.virtualenvs/bcfg2/bin/bcfg2-admin", line 7, in <module>
    execfile(__file__)
  File "/Users/calvin/.virtualenvs/bcfg2/src/bcfg2/src/sbin/bcfg2-admin", line 6, in <module>
    import Bcfg2.Server.Core
ImportError: No module named Bcfg2.Server.Core 
```

这让我认为`setup.py`写的方式有问题`bcfg2`。该文件位于此处 - [https://github.com/Bcfg2/bcfg2/blob/master/setup.py](https://github.com/Bcfg2/bcfg2/blob/master/setup.py)

感谢 pythonistas 的任何输入，他们是 python 打包和 setup.py 配置方面的专家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:01:39.360

您已安装到虚拟环境 ( `-e`)。但是，当您使用 sudo 运行它时，python 会以 root 身份执行，而没有可用的虚拟环境。

如果你运行`sudo su`，你应该被放到一个 root shell 中。然后您可以激活虚拟环境并运行 bcfg2-admin。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T08:03:55.383

有`setup.py`一个错误。

想通了，修复了它并向`bcfg2`维护者发送了一个拉取请求。

参考 - [https://github.com/Bcfg2/bcfg2/pull/28](https://github.com/Bcfg2/bcfg2/pull/28)

# ios - 由于内存使用异常，启用了 CATiledLayer 且具有 drawRect 定义的子视图的 UIView 崩溃

> ID：10384383
> 
> 赞同：2
> 
> 时间：2012-04-30T13:18:37.507
> 
> 标签：ios, ipad, uiview, catiledlayer

我们在 iPad 3 上发生内存不足崩溃，我们追踪到以下情况：

使用 CATiledLayer 并绘制内容（例如 PDF）的 UIView 具有带有自己的 drawRect 方法的子视图（例如，突出显示搜索结果）。这使得 Core Animation 消耗大量内存（在 VM Tracker 工具中超过 100 MB），并且很容易导致崩溃。虽然所有设备都存在此问题，但只有在 iPad 的 Retina 显示屏上，缓存大小才会变得过大。

这可以通过 Apple 的[PhotoScroller](http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html)示例重现：子类 UIView，取消注释 drawRect，并将实例添加到 TilingView。该应用程序将在 iPad 3 上崩溃。评论 drawRect 解决了内存使用问题。

现在，我们可以放下子视图并在最顶层的 UIView 中进行绘图。但是，使用子视图很方便（因为我们在 PDF 之上表示不同的、独立的层）。两个问题：

1.  什么是好的解决方法？最好是允许我们继续使用多个视图的。
2.  为什么会发生这种情况？我猜缓存机制正在加班，但如果了解它背后的技术细节会很棒。

谢谢！

**编辑：**

我想详细说明凯的回答。该问题确实与 CATiledLayer 无关，而是与实现 drawRect 的 UIViews 的使用有关。

在 PhotoScroller 的情况下，我创建了一个 UIView，它的图像大小 - 2000x2000 或更大，如果 drawRect 存在，它会创建一个巨大的后备存储。

在我们的应用程序中，覆盖视图是全屏的（在 iPad 3 上 =~11 MB），每页大约有 5 个。滚动时我们在内存中最多保留三页，这意味着超过 150 MB 的额外内存。不好玩。

所以解决的办法就是优化drawRect掉，或者少用这样的view。回到绘图板它是:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:36:40.063

To 2.：每当您`drawRect`在`UIView`子类中实现并拥有该类的大量实例时，您的内存使用量就会急剧增加。原因是`UIKit`视图/子视图处理中的许多优化技巧（例如缩放或滚动时）不适用于此类对象，因为框架不知道您在做什么/您在绘制什么。所以 - 独立于视网膜或不 - 避免实现`drawRect`，特别是当有许多对象或多层子视图时。

To 1.：我没有完全理解您正在尝试的内容，但我实现了一个 PDF-Viewer，它还能够在 PDF 之上显示其他内容。我用普通的 UIView 层次结构、图像等完成了这一切，我担心这是你能得到的唯一可靠的工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:28:08.500

我的经验：

1.  永远不要将子视图添加到由 CATiledLayer 支持的 UIView
2.  永远不要将子图层添加到 CATiledLayer

不幸的是，这似乎是唯一实际的答案——Apple 的实现在许多不同的方面都出现了可怕的错误（不仅仅是性能——渲染本身开始出现视觉伪影错误，Apple 的一些渲染代码变得奇怪等等）。

在实践中，我总是这样做：

UIView : 视图 +-- UIView w/ CATiledLayer : tiledLayerView +-- UIview : subViewsView

...并安全地将视图和子视图添加到“subViewsView”。工作正常。

# android - java.lang.UnsatisfiedLinkError: dbopen

> ID：10384386
> 
> 赞同：6
> 
> 时间：2012-04-30T13:18:44.357
> 
> 标签：android, unit-testing

我正在尝试在 android 应用程序中的代码块上编写一个 Android 测试用例。代码块将与数据库（sqlcipher 库函数）特别是 dbopen() 函数进行交互。运行应用程序时，它工作正常。当我们尝试为该代码块（涉及数据库交互）执行测试用例时。它给出以下错误：java.lang.UnsatisfiedLinkError: dbopen

任何人都可以对此进行调查并提出建议。

测试用例不能有权调用正在调用 sqlcipher 库函数的函数。需要任何权限，或者这种类型的测试用例是否有任何特定程序？

完整的错误日志：

```
 04-30 12:08:33.997: I/TestRunner(2169): started: teststateMachine(com.americanlogistics.mdd.rhapsody.view.test.SigninViewsateMachineTest)
            04-30 12:08:34.147: W/dalvikvm(2169): No implementation found for native Linfo/guardianproject/database/sqlcipher/SQLiteDatabase;.dbopen (Ljava/lang/String;I)V
            04-30 12:08:34.164: I/TestRunner(2169): failed: teststateMachine(com.americanlogistics.mdd.rhapsody.view.test.SigninViewsateMachineTest)
            04-30 12:08:34.164: I/TestRunner(2169): ----- begin exception -----
            04-30 12:08:34.184: I/TestRunner(2169): java.lang.UnsatisfiedLinkError: dbopen
            04-30 12:08:34.184: I/TestRunner(2169):     at info.guardianproject.database.sqlcipher.SQLiteDatabase.dbopen(Native Method)
            04-30 12:08:34.184: I/TestRunner(2169):     at info.guardianproject.database.sqlcipher.SQLiteDatabase.<init>(SQLiteDatabase.java:1870)
            04-30 12:08:34.184: I/TestRunner(2169):     at info.guardianproject.database.sqlcipher.SQLiteDatabase.openDatabase(SQLiteDatabase.java:863)
            04-30 12:08:34.184: I/TestRunner(2169):     at info.guardianproject.database.sqlcipher.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:897)
            04-30 12:08:34.184: I/TestRunner(2169):     at info.guardianproject.database.sqlcipher.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:107)
            04-30 12:08:34.184: I/TestRunner(2169):     at com.americanlogistics.mdd.rhapsody.database.SendQueueDBAdapter.open(SendQueueDBAdapter.java:45)
            04-30 12:08:34.184: I/TestRunner(2169):     at com.americanlogistics.mdd.rhapsody.database.SendQueueDBAdapter.databaseHelperInstance(SendQueueDBAdapter.java:38)
            04-30 12:08:34.184: I/TestRunner(2169):     at com.americanlogistics.mdd.rhapsody.common.ApplicationController.startDatabase(ApplicationController.java:530)
            04-30 12:08:34.184: I/TestRunner(2169):     at com.americanlogistics.mdd.rhapsody.view.test.SigninViewsateMachineTest.teststateMachine(SigninViewsateMachineTest.java:61)
            04-30 12:08:34.184: I/TestRunner(2169):     at java.lang.reflect.Method.invokeNative(Native Method)
            04-30 12:08:34.184: I/TestRunner(2169):     at java.lang.reflect.Method.invoke(Method.java:507)
            04-30 12:08:34.184: I/TestRunner(2169):     at junit.framework.TestCase.runTest(TestCase.java:154)
            04-30 12:08:34.184: I/TestRunner(2169):     at junit.framework.TestCase.runBare(TestCase.java:127)
            04-30 12:08:34.184: I/TestRunner(2169):     at junit.framework.TestResult$1.protect(TestResult.java:106)
            04-30 12:08:34.184: I/TestRunner(2169):     at junit.framework.TestResult.runProtected(TestResult.java:124)
            04-30 12:08:34.184: I/TestRunner(2169):     at junit.framework.TestResult.run(TestResult.java:109)
            04-30 12:08:34.184: I/TestRunner(2169):     at junit.framework.TestCase.run(TestCase.java:118)
            04-30 12:08:34.184: I/TestRunner(2169):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
            04-30 12:08:34.184: I/TestRunner(2169):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
            04-30 12:08:34.184: I/TestRunner(2169):     at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529)
            04-30 12:08:34.184: I/TestRunner(2169):     at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1448)
            04-30 12:08:34.184: I/TestRunner(2169): ----- end exception ----- 
```

代码：

测试用例中的下面一行是间接调用 sqlcipher 库函数。

ApplicationController.getInstance().startDatabase(this.getContext().getApplicationContext());

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-10T13:24:14.327

我在为 Android 集成 SQLCipher 时遇到了同样的错误。我的解决方案是打电话

```
SQLiteDatabase.loadLibs(Context context) 
```

在按照建议使用数据库本身之前。在应用程序的派生类中调用它的好地方。

[请在此处查看说明](http://sqlcipher.net/sqlcipher-for-android/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:30:17.107

```
No implementation found for native Linfo/guardianproject/database/sqlcipher/SQLiteDatabase;.dbopen (Ljava/lang/String;I)V 
```

您的代码似乎与您正在运行的版本不兼容。确保它们兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:52:39.903

[http://www.coderanch.com/t/79145/Websphere/Native-lib-already-loaded-another](http://www.coderanch.com/t/79145/Websphere/Native-lib-already-loaded-another)

这个“不满意的链接”错误可能是由于已经加载了一个类，但是运行时类加载器层次结构中的错误类加载器。

疯狂的猜测是 Sqllite 包在那里并且在 Classpath 中，但是在运行测试的场景中，错误的加载器实例加载了 DB 包。

# php - PHP：具有色调混合模式的颜色叠加

> ID：10384390
> 
> 赞同：1
> 
> 时间：2012-04-30T13:19:04.600
> 
> 标签：php, blend, mode, colorize, hue

谁能告诉我如何在 PHP 中实现与 Adob​​e Photoshop 中相同的效果 - 颜色叠加 -> 混合模式：色调

这个东西使所有彩色像素（非灰度像素）着色。我的项目需要它 - [http://iconizer.net](http://iconizer.net)。我设法进行了着色，但它也绘制了灰色阴影。我需要保持阴影和其他灰度像素不变。我可以通过逐像素扫描来做到这一点，但这太疯狂了。必须有一个更简单的解决方案。有人知道吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:22:27.627

使用专门的图像编辑工具，例如 imagemagick。然后让 PHP 用你想要的选项调用它。它会更快，并为您省去很多麻烦。

[http://www.imagemagick.org/script/index.php](http://www.imagemagick.org/script/index.php)

# c# - 属性内容设置了多次

> ID：10384395
> 
> 赞同：2
> 
> 时间：2012-04-30T13:19:30.653
> 
> 标签：c#, visual-studio-2010, windows-phone-7

我想在一个滚动查看器中有文本块和超链接按钮，但它说属性内容设置了不止一次......

```
 <!--ContentPanel - place additional content here-->

        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0">
            <ScrollViewer>
                <TextBlock HorizontalAlignment="Left" Margin="1,15,0,85" Width="460" Height="1500" Name="TextBlock1" TextWrapping="Wrap"> 
            <LineBreak />
        <Run FontFamily="Segoe WP" FontSize="27" FontWeight="ExtraBlack" TextDecorations="Underline">
           Weider 6 pack Training is a perfect exercise for flat stomach. 
            </Run>
            <LineBreak />
        <Run Text="This easy training programme has many advantages." FontSize="27" />
        <LineBreak />
        <Run Text="1\. It's perfect for beginners and for experts" FontWeight="ExtraBlack" TextDecorations="Underline" FontSize="27" />
        <Run Text=" – exercises are easy and begin with the basic level, so every beginner can use them but they get more complicated pretty fast so advanced sportsmen can also be interested in them." FontSize="27" />
        <LineBreak />
        <Run Text="2.It helps not only carve your muscles but also burn fat" FontWeight="ExtraBlack" TextDecorations="Underline" FontSize="27" />
        <Run Text=" – during the exercise you not only use your abdominal rectus but you also move your legs and arms. It is also because W6 puts pressure on the number of repetitions. It carves your muscles but also burns fat. You can train W6 for about 40 minutes without taking any breaks – you use up all glycogen in blood and start burning the fat." FontSize="27" />
        <LineBreak />
        <Run Text="3.It is easy " FontStyle="Normal" FontWeight="ExtraBlack" TextDecorations="Underline" FontSize="27" />
        <Run Text="– it is a really easy training set which you can train almost anywhere. All you need is flat ground." FontSize="27" />
        <LineBreak />
        <Run Text="4.It gives excellent results" FontStyle="Normal" FontWeight="ExtraBlack" TextDecorations="Underline" FontSize="27" />
        <Run Text=" – if you want to have a flat stomach W6 is designed just for you. You can see the first effects after just a week and after a whole series it is really impressive." FontSize="27" />"
        <LineBreak />
                </TextBlock>
            <HyperlinkButton Content="HyperlinkButton" Height="30" HorizontalAlignment="Left" Margin="144,489,0,0" Name="HyperlinkButton1" VerticalAlignment="Top" Width="200" />
        </ScrollViewer>

    </Grid>

</Grid> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T13:22:18.897

ScrollViewer 中有两个控件：Textblock 和 HyperlinkBut​​ton。将它们分组到一个网格中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:20:58.240

您应该将其包装在 a`StackPanel`或 a`Grid`中。这样，您仍然可以设置`Content`一次属性，但其中包含多个项目。

# android - 是否可以从我的应用程序的快速搜索框中更改图标？

> ID：10384400
> 
> 赞同：1
> 
> 时间：2012-04-30T13:19:48.867
> 
> 标签：android

所以我已经实现了我的应用程序的[快速搜索框](http://developer.android.com/resources/articles/qsb.html)。一切都很好，但出现在搜索框左侧的图标是我的应用程序的启动器图标。但我想动态定制它。我想知道这是否可能，如果可以，我该如何实现？

提前致谢。

# database - Cloudant 与 JustOneDB - 选择哪一个？

> ID：10384402
> 
> 赞同：-1
> 
> 时间：2012-04-30T13:20:10.327
> 
> 标签：database, cloud, appharbor, cloudant, justonedb

当我在[AppHarbor](https://appharbor.com/)上部署应用程序时，我正在尝试决定与我的应用程序一起使用哪个附加数据库。我有两个选择：[JustOneDB](https://appharbor.com/addons/justonedb)或[Cloudant](https://appharbor.com/addons/cloudant)。我正计划开发一个 Web 和移动应用程序，它应该可以处理 TB 级的数据。

我正在寻找最简单的解决方案来部署我的数据库，而不需要对数据库和表进行分区。我想要一个可以处理大量数据的数据库，但将分片和分区架构从开发人员手中移开。

我还想要一个解决方案，让我可以轻松备份我的大型数据库并轻松恢复它。

根据我的阅读，Cloudant 和 JustOneDB 是最受欢迎的两个，它们可以作为 AppHarbor 上的附加组件提供，以便于部署。

我需要你的建议，我应该选择哪一个，每一个的优缺点。我正在 Visual Studio 中使用 ASP.NET 和 C# 开发我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T12:28:44.370

Cloudant 博客上有一篇关于将 MyCouch .Net 库与 Cloudant 数据库一起使用的文章： [https ://cloudant.com/blog/how-to-customize-quorum-with-cloudant-using-mycouch/](https://cloudant.com/blog/how-to-customize-quorum-with-cloudant-using-mycouch/)

Cloudant 还提供高达 5 美元以上的免费托管服务，如果您想在本地开发并将其同步到云以进行生产/部署，可以使用 Apache CouchDB 的复制。多主复制不是许多其他数据库提供的。

祝您的申请好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:05:59.060

您可能还应该考虑[MongoDB](https://appharbor.com/addons/mongohq)和[RavenDB](https://appharbor.com/addons/ravenhq)。

如果您刚刚开始，您首先要考虑的应该是找到一个可以让您快速入门并构建您心目中的应用程序的数据库。当应用程序取得成功并真正吸引了数 TB 的数据时，您就可以开始担心如何扩展它了。如果应用程序的架构合理，那么调整它以使用适当的数据存储不应该是一项艰巨的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:28:48.027

评论已被发起人删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-31T12:41:47.940

MyCouch.Cloudant 刚刚发布。除了 CouchDb 和 Cloudant 核心功能支持之外，[MyCouch.Cloudant NuGet](https://www.nuget.org/packages/MyCouch.Cloudant)包增加了对搜索的支持。将添加更多 Clo​​udant 特定功能。它是用 C# 编写的，支持 .Net40、.Net45 和 Windows 商店应用程序。

[您将在 GitHub](http://github.com/danielwertheim/mycouch)存储库中找到有关 MyCouch 的更多信息。

# c# - 在 .NET 中对类型参数进行约束有什么意义（基类和接口约束）

> ID：10384413
> 
> 赞同：6
> 
> 时间：2012-04-30T13:20:43.913
> 
> 标签：c#, .net, generics

我正在研究一个小型类库，它自然涉及使用泛型来完成这项任务。但是有一点我对泛型不太了解：为什么我需要使用泛型类型参数，然后将类型参数约束到特定的基类或接口。

这是我的意思的一个例子：

```
public class MyGenericClass<T> where T : SomeBaseClass
{
    private T data;
} 
```

这是没有泛型的实现

```
public class MyClass
{
    private SomeBaseClass data;
} 
```

这两个定义是否相同（如果是，那么我在这里看不到使用泛型的好处）？

如果不是，我们在这里使用泛型有什么好处？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T13:25:11.530

与仿制药的几乎所有用途一样，消费者受益。约束类型为您提供与通过强输入参数获得的相同优势（或者您可以执行其他操作，例如确保有一个公共无参数构造函数或确保它是值类型或引用类型），同时仍保留泛型的优点你的类或函数的消费者。

例如，使用泛型还可以让您获得*指定*的实际类型，如果它具有任何特定值的话。

这个例子有点做作，但看看这个：

```
public class BaseClass
{
    public void FunctionYouNeed();
}

public class Derived : BaseClass
{
    public void OtherFunction();
}

public class MyGenericClass<T> where T: BaseClass
{
    public MyGenericClass(T wrappedValue)
    {
        WrappedValue = wrappedValue;
    }

    public T WrappedValue { get; set; }

    public void Foo()
    {
        WrappedValue.FunctionYouNeed();
    }
}

...

var MyGenericClass bar = new MyGenericClass<Derived>(new Derived());

bar.Foo();

bar.WrappedValue.OtherFunction(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:28:11.367

区别在于前者将新类定义为特定类型；后者只是简单地定义了一个具有该类型*字段*的普通类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T13:28:52.167

这都是关于类型安全的。使用泛型，您可以返回一个具体类型 (T)，而不是一些定义泛型类中所需 API 的基类型。因此，您的方法的调用者不必将结果转换为具体类型（这是一个容易出错的操作）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T13:29:45.940

主要区别在于用法。在第一种情况下，用法可以有：

```
MyGenericClass<SomeDerivedClass> Variable
Variable.data.SomeDerivedProperty = X 
```

因此，当您使用该类时，您仍然可以访问 SomeDerivedClass 中的任何内容，而无需回溯到它。

第二个示例不允许这样做。

```
MyClass.data = SomeDerivedClassInstance
MyClass.data.SomeDerivedProperty = X //Compile Error
((SomeDerivedClass)MyClass.data).SomeDerivedProperty = X //Ewwwww 
```

您将不得不转换回 SomeDerivedClass （这是不安全的）以使用特定于派生类的东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T13:29:56.990

我认为除了通用版本限制您的**Class**之外没有很大的区别，而第二个只是对班级**成员**的限制。如果你在你的第一个类中添加了更多的成员和方法，你就会有同样的约束。

# android - WifiManager getSSID() 抛出 NPE ......为什么？

> ID：10384415
> 
> 赞同：0
> 
> 时间：2012-04-30T13:20:52.493
> 
> 标签：android, nullpointerexception

尝试在 onResume 中测试 wifi SSID isEmpty 或 equals("null") 时，我得到了一个 NPE。这是我设置它的方式：

```
Class MyActivity extends Activity{

    WifiManager myWifiManager;

    public void onCreate(Bundle savedInstanceState) {

        myWifiManager = (WifiManager)getSystemService(Context.WIFI_SERVICE);
    ...
}

    protected void onResume() {

           if (myWifiManager.isWifiEnabled() && !(myWifiManager.getConnectionInfo().getSSID().equals("null"))) {
...
} 
```

我已经确定它是抛出 NPE 的 getSSID。让我感到困惑的是，我没有在我的 onCreate （或任何其他方法）中取消 WifiManager 对象，如果我单独测试 myWifiManager.isWifiEnabled ，它工作得很好，所以很明显该对象仍然存在。我可以记录 myWifiManager.getConnectionInfo().getSSID() 并获取 null 或上述值（取决于是否连接了 wifi）。所以不知道为什么会被抛出。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:30:37.157

您对 null 的检查是错误的；你必须使用`==`. 你不能调用`equals()`一个不存在的对象，或者你得到一个异常。你需要这样做：

```
myWifiManager.getConnectionInfo().getSSID() == null 
```

现在，如果`getConnetionInfo()`可以返回 null （并且 Javadoc 似乎表明它可以），那么您需要`==`在调用它们的任何方法之前检查那些 using ，例如

```
if (myWifiManager != null && myWifiManager.isWifiEnabled() &&
    myWifiManager.getConnectionInfo().getSSID() != null) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:32:10.337

[文档](http://developer.android.com/reference/android/net/wifi/WifiInfo.html#getSSID%28%29)说：

> 如果当前没有连接网络，SSID 可能为空。

意味着你不能调用`.equals()`null。同样检查 null 不应该由.`equals("null")`而不是`getSSID() == null`.

# qt - 使用 dbus 进行 Qt 编译

> ID：10384417
> 
> 赞同：1
> 
> 时间：2012-04-30T13:21:04.930
> 
> 标签：qt, compilation, dbus

我正在尝试用 dbus 编译 qt，但它给了我以下异常。我已经在系统中安装了 dbus 1.3 版，我正在使用以下配置命令。有人可以指出我应该做什么。

```
configure -dbus -I/usr/include/dbus-1.0 -L/usr/local/dbus/lib -ldbus-1 -fast -prefix /home/thwijeth/Software/qt-4.8.1-com-debug -v 
```

先感谢您。

```
qdbus_symbols_p.h:39: fatal error: dbus/dbus.h: No such file or directory
compilation terminated.
In file included from qdbusconnection_p.h:51,
             from qdbusconnection.cpp:33:
qdbus_symbols_p.h:39: fatal error: dbus/dbus.h: No such file or directory
compilation terminated.
make[1]: *** [qdbuserror.o] Error 1
make[1]: *** Waiting for unfinished jobs....
make[1]: *** [qdbusconnection.o] Error 1
In file included from qdbusconnectioninterface.cpp:33:
qdbus_symbols_p.h:39: fatal error: dbus/dbus.h: No such file or directory
compilation terminated.
make[1]: *** [qdbusconnectioninterface.o] Error 1
In file included from qdbusconnection_p.h:51,
             from qdbusintegrator.cpp:33:
qdbus_symbols_p.h:39: fatal error: dbus/dbus.h: No such file or directory
compilation terminated.
make[1]: *** [qdbusintegrator.o] Error 1
make[1]: Leaving directory `/home/thwijeth/Software/qt-repo/qt-4.8.1-src/src/dbus'
make: *** [sub-dbus-make_default-ordered] Error 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-31T09:40:14.590

对于这个丢失的标题，这个解决方案对我来说很好。但是，我得到了一个不同的错误`fatal error: dbus/dbus-arch-deps.h: No such file`。我通过将此文件从复制`/usr/lib/x86_64-linux-gnu/dbus-1.0/include/dbus`到`/usr/include/dbus-1.0/dbus/`. 我不知道为什么这个标题`/usr/include`从一开始就没有在目录中。但这是我解决问题的方法。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:28:11.410

验证是否`/usr/include/dbus-1.0`包含`dbus`目录，如果不包含，验证是否`/usr/include/dbus-1.0`包含`dbus.h`，如果是，则需要创建指向`dbus-1.0`as的符号链接`dbus`

`ln -s dbus-1.0 /usr/include/dbus`

然后尝试重新运行配置。

# javascript - 关于“清理”的建议？帆布

> ID：10384420
> 
> 赞同：0
> 
> 时间：2012-04-30T13:21:13.463
> 
> 标签：javascript, canvas, mootools

我正在创建一个 mootools 类并使用[Mootools 画布库](http://forvar.de/js/mcl/)基本上只是创建（目前）一个小方块，只要在另一个画布项目区域上有点击事件。想象一下 Photoshop 钢笔工具和节点。

```
var Pentool = new Class({
    Implements: [Events, Options],
    initialize: function(canvasel) {

        CANVAS.init({
                canvasElement : canvasel,
                enableMouse : true
        });

        var _self = this;

        //add a layer
        var layer = CANVAS.layers.add( new Layer({
                id : 'myLayer'
        }));

        var area = new CanvasItem({
            id: 'area_',
            w: 360,
            h: 500,
            interactive: true,

            events: {
                onDraw: function(ctx) {
                    ctx.fillStyle = 'rgba(255,255,255,0.3)';
                    ctx.fillRect(0, 0, this.w, this.h);
                    this.setDims(0, 0, this.w, this.h)
                },
                onClick: function(x, y) {
                    _self.addNode(layer, x, y);
                }
            }

        })

        layer.add(area);

        CANVAS.draw();

    },
    addNode: function(layer, x, y) {
        var node = new CanvasItem({
            id: 'node_',
            x: x,
            y: y,
            fillStyle : 'rgba(255,0,0,1)',
            events: {
                onDraw: function(ctx) {
                    ctx.fillStyle = this.fillStyle;
                    ctx.fillRect(this.x, this.y, 12, 12);
                }
            }

        });

        layer.add(node);        
        CANVAS.draw();

    }
}) 
```

现在我已经尝试了一切来阻止这种情况，但是每当我点击不止一次时，不透明度就会上升（请参阅不透明度填充）。我该如何阻止这种情况发生？我认为，我需要正确“清除”画布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:23:14.933

我自己对画布还很陌生，但发现这`ctx.beginPath()`会给你一个“新的开始”，但你还需要再做`moveTo()`一次，并再次绘制所有多边形和线条。

```
ctx.fillStyle="rgba(255,255,255,0.5)";
ctx.fillRect(10,10,50,50);
ctx.beginPath();
ctx.fillRect(70,10,50,50); 
```

这将绘制出同样不透明的盒子。

# iphone - 如何在饼图上显示文本？

> ID：10384425
> 
> 赞同：2
> 
> 时间：2012-04-30T13:21:52.313
> 
> 标签：iphone, objective-c, ios5, text, pie-chart

我使用以下代码创建了一个饼图。在这里，我将`x`和`y`作为 100% 的总和以在饼图上显示`x%`为红色和`y%`绿色。

在红色上我想显示确切的`x%`（示例`45%`（或）`55%`），在绿色上我想显示确切的`y%`（示例`55%`（或）`45%`）。

在我的应用程序中，`X`和`Y`值是变量。每次我运行我的应用程序时，这些值都会发生变化。我想用绿色和红色显示饼图以及这些区域的百分比。我如何制作框架以显示该区域的百分比？

**.m 文件**

```
- (void)drawRect:(CGRect)rect
{
// Drawing code

 int x = 25;
 int y = 42;

 float sum = x + y;
 float mult = (360/sum);

 float startDeg = 0;
 float endDeg = 0;

 int x = 74;
 int y = 60;
 int r = 60;

 CGContextRef ctx = UIGraphicsGetCurrentContext();
 CGContextSetRGBStrokeColor(ctx, 1.0, 1.0, 1.0, 1.0);
 CGContextSetLineWidth(ctx, 2.0);

 startDeg = 0;
 endDeg = (x * mult);
 if(startDeg != endDeg)
 {
 CGContextSetRGBFillColor(ctx, 0.0, 0.8, 0.0, 1.0);
 CGContextMoveToPoint(ctx, x, y);
 CGContextAddArc(ctx, x, y, r, (startDeg)*M_PI/180.0, (endDeg)*M_PI/180.0, 0);
 CGContextClosePath(ctx);
 CGContextFillPath(ctx);
 }

 startDeg = endDeg;
 endDeg = endDeg + (y * mult);
 if(startDeg != endDeg)
 {
 CGContextSetRGBFillColor(ctx, 0.8, 0.0, 0.0, 1.0);
 CGContextMoveToPoint(ctx, x, y);
 CGContextAddArc(ctx, x, y, r, (startDeg)*M_PI/180.0, (endDeg)*M_PI/180.0, 0);
 CGContextClosePath(ctx);
 CGContextFillPath(ctx);
 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:56:25.923

您可以在 drawRect 方法中使用 NSString drawInRect 绘制一个字符串。例如：

```
[percentageString drawInRect:CGRectMake(100, 100, 30, 20) 
                    withFont:font 
               lineBreakMode:UILineBreakModeClip 
                   alignment:UITextAlignmentLeft]; 
```

**更新**

以下是如何找到用于放置文本的 x、y：

```
CGFloat startDegree = 180;                             // start at 180
CGFloat endDegree = degree;                            // end at some value

CGFloat mid = (endDegree + startDegree) / 2;           // find midpoint
CGFloat rad = DEGREES_TO_RADIANS(mid);                 // convert to radians

// center is center of pie chart
// radius is how big the pie chart is
// 30 is extra to draw text outside circle

CGFloat x =  center.x + ((radius + 30) * cos(rad));    
CGFloat y = center.y + ((radius + 30) * sin(rad));

NSLog(@"X Y: %f %f %f", x, y, degree);

NSString *text = @"Test";   
[text drawInRect:CGRectMake(x, y, 50, 44) withFont:[UIFont systemFontOfSize:14.0f]]; 
```

我有一个示例饼图，所以我使用了它。它有一个带度数的滑块。在示例中，我可以从 180 度到 360 度绘制饼图的一部分。

# javascript - 突出显示 UIWebView 中的文本

> ID：10384426
> 
> 赞同：0
> 
> 时间：2012-04-30T13:21:58.410
> 
> 标签：javascript, ios, object

我正在开发一个具有多个 UIWebView 的 iOS 应用程序。我想选择并突出显示 webView 中的文本，但我想存储此选择以在用户重新启动应用程序时重新选择相同的文本。请问我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:54:15.007

将其存储在用户默认值中，并在重新启动时重新读取。
如果文本字段有标签属性，您可以从用户默认值中写入/读取选择的标签

例子：

```
// access the user defaults for your app:
defaults = [NSUserDefaults standardUserDefaults];

// write to user defaults
[defaults setInteger:myTextField.tag forKey:@"selectedFieldsTag"];

// read from user defaults (on launch?)
NSInteger selectedTag = [defaults integerForKey:@"selectedFieldsTag"]; 
```

编辑：以上内容可以很好地存储信息和检索，但是如果您开始存储更多数据而不仅仅是一个标签，那么您可能需要考虑使用核心数据或其他方式进行存储/检索。至于找到用户选择的内容，这远不那么简单。这个链接解释了它是如何完成的：

[http://zaldzbugz.posterous.com/how-to-mark-or-get-the-highlighted-string-ins](http://zaldzbugz.posterous.com/how-to-mark-or-get-the-highlighted-string-ins)

# c# - C# 幻灯片仅在所有幻灯片/图片框不可见的时间结束后才显示最后一张图片

> ID：10384433
> 
> 赞同：0
> 
> 时间：2012-04-30T13:22:27.120
> 
> 标签：c#, datetime, slideshow, picturebox, imagelist

我目前正在尝试创建一个程序，该程序将显示 ImageList 中的图片幻灯片，其中显示来自 ListView 的可变显示时间，这是通过 numericUpDown 访问的，但是当我单击按钮开始时，什么都没有发生，直到时间幻灯片结束，显示最后一张幻灯片，然后立即消失（如果我在最后省略“pictureBox1.Visible = false”，它会保留）。

当前代码：

```
private void buttonSlideshow_Click(object sender, EventArgs e)
{
    pictureBox1.Visible = true;

    for (int s = 0; s < listView1.Items.Count; s++)
    {
        listView1.Items[s].Selected = true;
        pictureBox1.Image = imageList1.Images[s];

        DateTime later = DateTime.Now.AddMilliseconds((double)numericUpDown1);
        while (DateTime.Now < later)
        {
        }

    }
        pictureBox1.Visible = false;
} 
```

我已经尝试了很多版本（包括使用计时器和切换代码）不知道出了什么问题

numericUpDown1 是幻灯片的时长，一直用整数测试，还是不行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:41:47.703

这样做：

```
while (DateTime.Now < later) 
```

正在阻塞您的 UI 线程。当你让它忙着旋转它的轮子时，它不能重绘屏幕。请改用带有回调的计时器。

您需要稍微修改您的代码。不要使用 for 循环，而是为当前幻灯片定义一个变量，在单击处理程序中将其初始化为零，使图片框可见，加载第一张图片，然后启动计时器。

在您的计时器处理程序中，您将增加当前索引，根据幻灯片列表的长度检查它，如果您仍有幻灯片要显示，请加载下一张然后再次启动计时器（或者您可以使用计时器它会反复触发，尽管您可能要小心在处理完最后一个之前它不会再次触发）。如果没有更多的幻灯片，你只需清理并让你的图片框再次不可见。

最后一点，注意计时器将在哪个线程上触发。在 win 表单中，您可以使用在 UI 线程上触发的 System.Windows.Forms.Timer，您不会遇到任何问题。在 WPF 中，您可以使用也在 UI 线程上触发的 DispatcherTimer。其他计时器通常在它们自己的线程中运行，您必须处理将任何应该更新 UI 的东西推回 UI 线程。

# google-app-engine - 如何优化数据存储中的一对多查询

> ID：10384434
> 
> 赞同：0
> 
> 时间：2012-04-30T13:22:27.510
> 
> 标签：google-app-engine, google-cloud-datastore, python-2.7

由于数据存储对引用的实体进行额外查询，我的应用程序出现延迟问题。我收到了关于如何使用 get_value_for_datastore() 函数处理单值属性的[好建议。](https://stackoverflow.com/q/10368312/1010991)但是我的应用程序也有一对多的关系，如下面的代码所示，我还没有找到预取这些实体的方法。结果是在尝试显示包含 200 个文档及其相关文档文件的表格时出现不可接受的延迟 (>6000ms)。

（可能永远不会超过 10.000 个文档或 DocumentFiles）

有没有办法解决这个问题？

*模型.py*

```
class Document(db.Expando):
    title = db.StringProperty()
    lastEditedBy = db.ReferenceProperty(DocUser, collection_name = 'documentLastEditedBy')  
...

class DocUser(db.Model):
    user = db.UserProperty()
    name = db.StringProperty()  
    hasWriteAccess= db.BooleanProperty(default = False)
    isAdmin = db.BooleanProperty(default = False)
    accessGroups = db.ListProperty(db.Key)
...

class DocumentFile(db.Model):
    description= db.StringProperty()
    blob = blobstore.BlobReferenceProperty()
    created = db.DateTimeProperty() # needs to be stored here in relation to upload / download of everything    
    document = db.ReferenceProperty(Document, collection_name = 'files')

    @property
    def link(self):     
        return '<a href="/file/serve/%s">%s</a>' % (self.key().id(),self.blob.filename) 
... 
```

*主文件*

```
docUsers = DocUser.all()
docUsersNameDict = dict([(i.key(), i.name) for i in docUsers])

documents = Document.all()
for d idocuments:        
    out += '<td>%s</td>' % d.title    
    docUserKey = Document.lastEditedBy.get_value_for_datastore(d)
    out +='<td>%s</td>' % docUsersNameDict.get(docUserKey)
    out += '<td>'                           
    # Creates a new query for each document, resulting in unacceptable latency
    for file in d.files: 
        out +=  file.link + '<br>'
    out += '</td>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:32:14.670

将链接非规范化并存储在您的文档中，以便快速获取链接。

您需要注意，当您更新 DocumentFile 时，您需要更新关联的 Document。这是在您从数据存储中读取链接的频率远高于更新链接的假设下运行的。

非规范化通常是 App Engine 性能不佳的解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:43:25.117

异步加载文件。在 d.files 上使用 get_value_for_datastore，它应该返回一个键的集合，然后你可以执行 db.get_async(key) 来返回一个未来的对象。您将无法像您所做的那样以程序方式写出您的结果，但是为所有文档组装一个部分请求/字典应该是微不足道的，其中包含待处理的未来 get() 集合，然后当您进行迭代时构建结果，您可以最终确定期货，这将在不阻塞 {~0ms 延迟}的情况下完成。

基本上，您需要两次迭代。第一次迭代将通过并异步请求您需要的文件，第二次迭代将通过，最终确定您的获取并构建您的响应。

[https://developers.google.com/appengine/docs/python/datastore/async](https://developers.google.com/appengine/docs/python/datastore/async)

# mysql - 如何比较 MySql 中的两个时间戳？

> ID：10384443
> 
> 赞同：3
> 
> 时间：2012-04-30T13:23:08.877
> 
> 标签：mysql, timestamp, sql-update

时间戳字段是`DATETIME`格式类似于 的列`2012-03-19 00:23:14`。如何比较两行时间戳并找到较大的时间戳？我正在使用的下面的查询不起作用。

```
UPDATE report 1 status = 'time is larger' WHERE EXISTS 
  (SELECT ip_src, layer4_sport, timestamp FROM  
      (SELECT ip_src, layer4_sport, timestamp from report 1) AS tmpb  
   WHERE  report 1.layer4_sport = tmpb.layer4_sport 
   AND report 1.ip_src = tmpb.ip_src  
   AND  report 1.timestamp > tmpb.timestamp 
   GROUP BY ip_src, layer4_sport,  timestamp HAVING COUNT(*) = 2) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T13:47:58.087

您可以尝试使用 if 语句来验证 A 时间戳是否大于 B 时间戳。

```
select if(UNIX_TIMESTAMP('2009-02-01 00:00:00') > UNIX_TIMESTAMP('2009-01-01 00:00:00'), true, false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:31:54.457

尝试 `UNIX_TIMESTAMP()`,`UNIX_TIMESTAMP(date)`函数来比较两个时间戳。

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T04:22:04.533

感谢上帝，现在查询正常。

表名后缺少的是 SET 语法，并且 EXISTS 中应该省略 GROUP BY 语法。

```
UPDATE report 1 SET status = 'time is larger' WHERE EXISTS 
  (SELECT ip_src, layer4_sport, timestamp FROM  
  (SELECT ip_src, layer4_sport, timestamp from report 1) AS tmpb  
   WHERE  report 1.layer4_sport = tmpb.layer4_sport 
   AND report 1.ip_src = tmpb.ip_src  
   AND  report 1.timestamp > tmpb.timestamp) 
```

# ckeditor - 在 CKEditor 中添加自定义标签后，空白被修剪

> ID：10384445
> 
> 赞同：0
> 
> 时间：2012-04-30T13:23:16.383
> 
> 标签：ckeditor, space

```
function sidebar(editor)
{   
    var selection = editor.getSelection();
    if(selection.getSelectedText()!="")
    {       
        var range = selection.getRanges();  
        var customNode = editor.document.createElement( 'cdl:sidebar' );
        var extractedContent = range[0].extractContents();
        customNode.append(extractedContent);
        var sidebarHolder = editor.document.createElement("sidebarHolder");
        sidebarHolder.append(customNode);
        var nodeHtml = sidebarHolder.getHtml();
        editor.insertHtml(nodeHtml+" ");        
    }  
    else {
        showErrorMessage("Selection is not proper");
    }   
} 
```

这是我的代码。每当我在“请发表评论或更正”语句中选择一个像“请”这样的词时，在添加标签之后请。“请发表”之间的空格会被修剪。但是当我选择“请”时（带有空格），代码正常工作。而且，我希望该标签在编辑器中不可见，它应该在源面板中可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:59:54.670

尝试将 html 附加到 ckeditor 实例而不是添加文本。

# javascript - 如何使网站上的 tfl 小部件更大

> ID：10384456
> 
> 赞同：0
> 
> 时间：2012-04-30T13:24:07.697
> 
> 标签：javascript, html, css, jquery-mobile

所以我试图在我的 jQuery Mobile 网站上使用 TFL 小部件，但是它很小。我尝试通过 CSS 设置高度和宽度，但它不起作用，我希望它覆盖整个页面。我也试过在 TFL 网站上使用这两个版本，一个是固定宽度的，一个是可变宽度的，但它们都没有正常工作。

对此的任何帮助将不胜感激。

非常感谢。

抱歉，格式有点乱。这是我的代码：

```
 <html>
    <head>
<title></title>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js">        </script>
<link rel="stylesheet" href="css/style.css">
   </head>
 <body>
<div data-role="page">

    <div data-role="header">
        <h1>Page Title</h1>
    </div>

    <div data-role="content">
        <div class="tflwidget">
<script language="JavaScript" src="http://www.tfl.gov.uk/tfl/syndication/widgets/serviceboard/embeddable/serviceboard-iframe-stretchy.js"></script></div>

    </div>

    <div data-role="footer" style="position:absolute; bottom: 0; left:0; right:0">
        <h4>Footer</h4>
    </div>

</div>

 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:33:06.457

好吧，您不会对带有 css 的 iframe 做太多事情。您想显式设置 iframe 的高度和宽度属性，如果父元素足够大，100% 可能是正确的值。

# regex - VS2008 REGEX 搜索中的堆栈溢出

> ID：10384457
> 
> 赞同：0
> 
> 时间：2012-04-30T13:24:14.697
> 
> 标签：regex, visual-studio, cobol

如果所有“IF”都有相应的“END-IF”，我试图在一个巨大的 COBOL 文件中查找。据我所知，使用 Visual Studio 2008 它有一个带有正则表达式功能的搜索工具。（不过，在阅读了 Jeff Atwood 的文章后，我知道 Visual Studio 中的正则表达式与真正的交易不太一样。）

无论如何，我想出了这个表达：

```
<(IF)#(.*\n*)#END-IF\n 
```

这似乎溢出了堆栈，非常不方便（见下图）。所以我想知道，是否有可能在 VS 中进行这种搜索？如果是的话，正则表达式会是什么样子？

> -->我想知道是否所有的“IF”都有一个结束的“END-IF”

谢谢。

![VS2008中正则表达式搜索期间的堆栈溢出](../Images/ab30ad49b68b4e078166209dea03666a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:53:19.303

您在这里遇到的是尝试使用正则表达式执行递归解析的情况，通常这会给您带来麻烦。当我读到它时（当然，我不熟悉 Visual Studio 在这里使用的风格），您的正则表达式会尝试匹配尽可能多的行，直到它找到一个 END-IF——包括匹配另一个 END-IF。换句话说，当呈现

```
IF condition-1
    statement-1
END-IF
IF condition-2
    statement-2
END-IF 
```

找到一个匹配项，而不是两个。

另外，想想你想如何处理这种情况：

```
IF condition-1
    IF condition-2
        statement-1
    END-IF
END-IF 
```

除非您尝试编写自己的语言翻译器或 COBOL lint 工具，否则我认为您可以满足于编译器会找到匹配的 END-IF，或者在段落末尾标记未闭合的 IF。

# .net - 回滚到没有添加/删除程序的 ClickOnce 应用程序的先前版本

> ID：10384459
> 
> 赞同：0
> 
> 时间：2012-04-30T13:24:19.717
> 
> 标签：.net, deployment, clickonce

基本上都在标题中，但我仍会进一步解释。

ClickOnce 应用程序的设计目的是无需管理员权限即可轻松安装。但是，要将 ClickOnce 应用程序回滚到其先前版本，您必须使用添加/删除程序功能，如 Microsoft 文档中所述。

问题是在我的企业中，一个特定的策略阻止用户使用这个功能。在这里以管理员身份运行 appwiz.cpl 无济于事，因为 ClickOnce 应用程序是由用户安装的。

那么有没有其他方法可以将 ClickOnce 应用程序回滚到以前的版本？

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:44:13.750

在我之前的一份工作中，我们没有让我们的用户选择是否升级。每个版本都以其版本作为最低版本推出。然而，这确实产生了令人讨厌的副作用，即在新版本出现问题时不允许用户降级。

为了解决这个问题，每次我们发布一个版本时，我们都会再次将相同的版本发布到不同的位置，但版本会增加两次（换句话说，版本会*高于我们的下一个版本）会发布*）。如果我们不得不回滚，我们只需要将版本从次要位置复制到主要位置，然后用该特定版本中的文件覆盖主 .application 文件。

这确实要求您对版本控制有所约束，因为整个方法取决于备份版本高于*当前*版本的下一个更高版本，因此 ClickOnce 认为它实际上是更新的。您不想将版本设置*得*太高，因为您发布的任何版本来替换它自然也必须有一个更高的版本。

例如，它可能是这样的：

```
Publish version 1.0.0 to primary location and 1.2.0 to backup location
Clients update
Publish version 1.1.0 to primary location and 1.3.0 to backup location
Clients update
Calamity ensues
Copy version 1.2.0 from backup to primary (which is, in reality, version 1.0.0)
Clients update
All is well
Publish version 1.3.0 to primary location and 1.5.0 to backup location
etc. 
```

有几个限制：

*   如上所述，您的版本控制必须严格
*   回滚后发布的更新（以上版本 1.3.0）无法回滚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:14:06.870

您可以编写一个小程序来执行此操作。您可以使用[此处](http://msdn.microsoft.com/en-us/library/ff369721.aspx)找到的卸载代码。卸载将始终显示一个对话框，询问用户是否确定。代码在该对话框中搜索 OK 按钮并单击它。您可以随时修改它以查找恢复版本的按钮（我不记得文本），然后选择它，然后单击“确定”按钮。

# ios - UIWebView - 我应该期待什么加载时间？

> ID：10384463
> 
> 赞同：0
> 
> 时间：2012-04-30T13:24:37.487
> 
> 标签：ios, uiwebview, nsurlrequest

我浏览了很多帖子，但似乎找不到关于 UIWebView 加载时间和预期性能的任何内容。

我有一个应用程序调用大小约为 4.2KB 的缓存 html 页面。通过 wi-fi 连接渲染视图大约需要 3.5 秒。这是好是坏？

我正在尝试尽快获取该页面，但我真的找不到更多我可以做的事情。所以我想问题是，我应该得到比这更好的性能吗？

任何有用的链接将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:41:16.280

它实际上与 HTML 的大小没有太大关系。虽然 4.2Kb 相当大。渲染性能主要与它渲染的“什么”有关。例如，如果你有很多表，或者更糟糕的是——嵌套表——那么渲染会非常慢。如果你的 HTML 使用了糟糕的递归实体定义，它也会非常慢。我建议充分利用 HTML5 进行复杂的渲染。

# linux - 静态链接 openssl 到 sqlcipher

> ID：10384464
> 
> 赞同：3
> 
> 时间：2012-04-30T13:24:38.650
> 
> 标签：linux, sqlite, openssl, sqlcipher

我已经为 Linux 构建了 sqlcipher，但它依赖于 openssl。我想通过静态链接将 sqlcipher 配置为在没有外部 openssl 库的情况下工作。我用这个命令配置 sqlcipher

```
./configure --prefix=/home/admin/Downloads/qt-everywhere-opensource-src-4.8.0/src/plugins/sqldrivers/sqlcipher/ --disable-shared --enable-static --enable-tempstore=yes CFLAGS="-DSQLITE_HAS_CODEC" LDFLAGS="/usr/lib64/libcrypto.a"
make 
```

之后我得到了下一个字符串：

```
 /libtool --mode=link gcc   -DSQLITE_HAS_CODEC -DSQLITE_OS_UNIX=1 -I. -I./src -I./ext/rtree -D_HAVE_SQLITE_CONFIG_H -DNDEBUG  -I/usr/include -DSQLITE_THREADSAFE=1 -DSQLITE_OMIT_LOAD_EXTENSION=1   /usr/lib64/libcrypto.a  -DHAVE_READLINE=0  \
                -o sqlite3 ./src/shell.c libsqlite3.la \
                 -lpthread  -rpath "/home/admin/Downloads/qt-everywhere-opensource-src-4.8.0/src/plugins/sqldrivers/sqlcipher/lib"  
libtool: link: gcc -DSQLITE_HAS_CODEC -DSQLITE_OS_UNIX=1 -I. -I./src -I./ext/rtree -D_HAVE_SQLITE_CONFIG_H -DNDEBUG -I/usr/include -DSQLITE_THREADSAFE=1 -DSQLITE_OMIT_LOAD_EXTENSION=1 -DHAVE_READLINE=0 -o sqlite3 ./src/shell.c  /usr/lib64/libcrypto.a ./.libs/libsqlite3.a -lpthread -Wl,-rpath -Wl,/home/admin/Downloads/qt-everywhere-opensource-src-4.8.0/src/plugins/sqldrivers/sqlcipher/lib
./.libs/libsqlite3.a(sqlite3.o): In function `sqlcipher_activate':
sqlite3.c:(.text+0xb66): undefined reference to `EVP_get_cipherbyname'
sqlite3.c:(.text+0xb70): undefined reference to `OPENSSL_add_all_algorithms_noconf'
./.libs/libsqlite3.a(sqlite3.o): In function `sqlcipher_random':
sqlite3.c:(.text+0xc0c): undefined reference to `RAND_bytes'
./.libs/libsqlite3.a(sqlite3.o): In function `sqlcipher_codec_ctx_set_cipher':
sqlite3.c:(.text+0x11a2): undefined reference to `EVP_get_cipherbyname'
sqlite3.c:(.text+0x11ba): undefined reference to `EVP_CIPHER_key_length'
sqlite3.c:(.text+0x11d4): undefined reference to `EVP_CIPHER_iv_length'
sqlite3.c:(.text+0x11ee): undefined reference to `EVP_CIPHER_block_size'
sqlite3.c:(.text+0x11fd): undefined reference to `EVP_sha1'
sqlite3.c:(.text+0x1205): undefined reference to `EVP_MD_size'
./.libs/libsqlite3.a(sqlite3.o): In function `sqlcipher_page_hmac':
sqlite3.c:(.text+0x1880): undefined reference to `HMAC_CTX_init'
sqlite3.c:(.text+0x1885): undefined reference to `EVP_sha1'
sqlite3.c:(.text+0x18b9): undefined reference to `HMAC_Init_ex'
sqlite3.c:(.text+0x18d9): undefined reference to `HMAC_Update'
sqlite3.c:(.text+0x18f8): undefined reference to `HMAC_Update'
sqlite3.c:(.text+0x1917): undefined reference to `HMAC_Final'
sqlite3.c:(.text+0x1929): undefined reference to `HMAC_CTX_cleanup'
./.libs/libsqlite3.a(sqlite3.o): In function `sqlcipher_page_cipher':
sqlite3.c:(.text+0x1b35): undefined reference to `EVP_CipherInit'
sqlite3.c:(.text+0x1b4a): undefined reference to `EVP_CIPHER_CTX_set_padding'
sqlite3.c:(.text+0x1b7a): undefined reference to `EVP_CipherInit'
sqlite3.c:(.text+0x1ba2): undefined reference to `EVP_CipherUpdate'
sqlite3.c:(.text+0x1bcc): undefined reference to `EVP_CipherFinal'
sqlite3.c:(.text+0x1be2): undefined reference to `EVP_CIPHER_CTX_cleanup'
./.libs/libsqlite3.a(sqlite3.o): In function `sqlcipher_cipher_ctx_key_derive':
sqlite3.c:(.text+0x1d3a): undefined reference to `PKCS5_PBKDF2_HMAC_SHA1'
sqlite3.c:(.text+0x1e08): undefined reference to `PKCS5_PBKDF2_HMAC_SHA1'
collect2: ld returned 1 exit status
make: *** [sqlite3] Error 1 
```

我已经安装了 openssl 和 openssl-dev 软件包并且 /usr/lib64/libcrypto.a 存在。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:55:28.927

Adjust your CFLAGS to include the path to the OpenSSL header files. Something like this:

```
CFLAGS="-DSQLITE_HAS_CODEC -I/path/to/openssl/include" 
```

# php - 将 Facebook 图形 URL 转换为 sdk 格式

> ID：10384467
> 
> 赞同：1
> 
> 时间：2012-04-30T13:24:54.573
> 
> 标签：php, facebook, facebook-graph-api

如何将代码转换为 php sdk 格式

兑换

```
https://graph.facebook.com/".$FBId."/apprequests?message=".$msg."&method=post" 
```

至

```
$this->Facebook->api('/me/permissions/',POST,array(......)); 
```

希望我说清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:44:50.973

```
$that->Facebook->api('/'.$FBId.'/apprequests?message=".$msg."&method=post',POST,array(......)); 
```

# objective-c - RestKit 手动保存对象

> ID：10384468
> 
> 赞同：2
> 
> 时间：2012-04-30T13:25:04.430
> 
> 标签：objective-c, ios, core-data, restkit

我花了几个小时尝试插入/添加对象，但发生了重复的记录。即使已经存在，也会重新插入营销活动记录。我错过了什么吗？

以下是我的代码：

**运动.h**

```
@interface Campaign : NSManagedObject

@property (nonatomic, strong) NSNumber* campaignId;
@property (nonatomic, strong) NSString* title;

@end 
```

**卡片.h**

```
@class Campaign;

@interface Card : NSManagedObject

@property (nonatomic, strong) NSNumber* cardId;
@property (nonatomic, strong) NSString* name;
@property (nonatomic, strong) Campaign* campaign;

@end 
```

**视图控制器.m**

```
...

Campaign* campaign = [Campaign object];
campaign.campaignId = [NSNumber numberWithInt:1];
campaign.title = @"Hello world";

Card* card = [Card object];
card.cardId = @"1234567890";
card.campaign = campaign;

[[[RKObjectManager sharedManager] objectStore] save:nil]; 
```

**编辑的 ViewController.m**

```
...
RKManagedObjectMapping* cardMapping = [RKManagedObjectMapping mappingForClass:[Card class] inManagedObjectStore:[RKObjectManager sharedManager].objectStore];
[cardMapping mapKeyPath:@"id" toAttribute:@"cardId"];
[campaignMapping mapKeyPath:@"name" toAttribute:@"name"];
cardMapping.primaryKeyAttribute = @"cardId";

RKManagedObjectMapping* campaignMapping = [RKManagedObjectMapping mappingForClass:[Campaign class] inManagedObjectStore:[RKObjectManager sharedManager].objectStore];
[campaignMapping mapKeyPath:@"id" toAttribute:@"campaignId"];
[campaignMapping mapKeyPath:@"title" toAttribute:@"title"];
campaignMapping.primaryKeyAttribute = @"campaignId";

Campaign* campaign = [Campaign object];
campaign.campaignId = [NSNumber numberWithInt:1];
campaign.title = @"Hello world";

Card* card = [Card object];
card.cardId = @"1234567890";
card.campaign = campaign;

[[[RKObjectManager sharedManager] objectStore] save:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:33:09.657

是的，将 .primaryKeyAttribute 添加到您的映射中。当您通过 rest kit 导入数据时，这将为您完成 pk 工作。如果你只是用 Restkit 做“正常”的核心数据，你需要自己处理参照完整性等。

# html - 单击时以特定大小显示 PDF 的 HTML

> ID：10384471
> 
> 赞同：0
> 
> 时间：2012-04-30T13:25:17.447
> 
> 标签：html, pdf, browser-plugin

我有一个上传的 PDF，当在浏览器中单击时，它会使用 Adob​​e 或用户拥有的任何插件显示。但它是一个相当大的文件，所以我想知道是否有办法打开它，比如说，特定大小或原始文件的百分比。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:12:46.413

是的，可以以特定百分比或适合视图模式打开它。您可以使用指向要显示的页面的 Goto 操作来设置文档的 Open 操作。当您设置目标页面时，您还可以选择设置所需的缩放或适合模式。

# java - 依赖注入、延迟注入实践

> ID：10384473
> 
> 赞同：2
> 
> 时间：2012-04-30T13:25:24.170
> 
> 标签：java, spring, dependency-injection

一个简单（且冗长）的问题，而不是一个简单的答案。使用一些 DI 框架（Spring、Guice）我得出的结论是，其他人提出的一些实践并不那么容易实现。我似乎真的停留在这个水平上。

我将尝试尽可能简单地介绍这一点，即使某些细节可能会丢失。我希望这个问题会很清楚。

假设我有一个 StringValidator，一个负责验证字符串的简单类。

```
package test;

import java.util.ArrayList;
import java.util.List;

public class StringValidator {
    private final List<String> stringList;
    private final List<String> validationList;

    private final List<String> validatedList = new ArrayList<String>();

    public StringValidator(final List<String> stringList, final List<String> validationList) {
        this.stringList = stringList;
        this.validationList = validationList;
    }

    public void validate() {
        for (String currentString : stringList) {
            for (String currentValidation : validationList) {
                if (currentString.equalsIgnoreCase(currentValidation)) {
                    validatedList.add(currentString);
                }
            }
        }
    }

    public List<String> getValidatedList() {
        return validatedList;
    }
} 
```

依赖性是最低的，允许像这样的简单测试：

```
package test;

import org.junit.Assert;
import org.junit.Test;

import java.util.ArrayList;
import java.util.List;

public class StringValidatorTest {
    @Test
    public void testValidate() throws Exception {
        //Before
        List<String> stringList = new ArrayList<String>();
        stringList.add("FILE1.txt");
        stringList.add("FILE2.txt");

        final List<String> validationList = new ArrayList<String>();
        validationList.add("FILE1.txt");
        validationList.add("FILE20.txt");

        final StringValidator stringValidator = new StringValidator(stringList, validationList);

        //When
        stringValidator.validate();

        //Then
        Assert.assertEquals(1, stringValidator.getValidatedList().size());
        Assert.assertEquals("FILE1.txt", stringValidator.getValidatedList().get(0));
    }
} 
```

如果我们想进一步增加灵活性，我们可以使用 Collection<> 而不是 List<>，但我们假设这不是必需的。

创建列表的类如下（使用任何其他接口标准）：

```
package test;

import java.util.List;

public interface Stringable {
    List<String> getStringList();
}

package test;

import java.util.ArrayList;
import java.util.List;

public class StringService implements Stringable {

    private List<String> stringList = new ArrayList<String>();

    public StringService() {
        createList();
    }

    //Simplified
    private void createList() {
        stringList.add("FILE1.txt");
        stringList.add("FILE1.dat");
        stringList.add("FILE1.pdf");
        stringList.add("FILE1.rdf");
    }

    @Override
    public List<String> getStringList() {
        return stringList;
    }
} 
```

和：

```
package test;

import java.util.List;

public interface Validateable {
    List<String> getValidationList();
}

package test;

import java.util.ArrayList;
import java.util.List;

public class ValidationService implements Validateable {

    private final List<String> validationList = new ArrayList<String>();

    public ValidationService() {
        createList();
    }

    //Simplified...
    private void createList() {
        validationList.add("FILE1.txt");
        validationList.add("FILE2.txt");
        validationList.add("FILE3.txt");
        validationList.add("FILE4.txt");
    }

    @Override
    public List<String> getValidationList() {
        return validationList;
    }
} 
```

我们有一个带有 main 方法的 Main 类：

```
package test;

import java.util.List;

public class Main {
    public static void main(String[] args) {
        Validateable validateable = new ValidationService();
        final List<String> validationList = validateable.getValidationList();

        Stringable stringable = new StringService();
        final List<String> stringList = stringable.getStringList();

        //DI
        StringValidator stringValidator = new StringValidator(stringList, validationList);
        stringValidator.validate();

        //Result list
        final List<String> validatedList = stringValidator.getValidatedList();
    }
} 
```

因此，假设类在运行时（当用户想要时）生成列表。“直接”（静态）绑定是不可能的。

如果我们想提供尽可能低的耦合，我们将使用列表为我们提供运行验证所需的数据（StringValidator）。

但是，如果我们想使用容器来帮助我们使用“胶水代码”，我们可以将两个“服务”注入到 StringValidator 中。这将为我们提供正确的数据，但代价是耦合。此外，StringValidator 将承担实际调用依赖项的额外责任。

如果我以这种方式使用委托，我的代码就会被不需要的责任（不是我想要的）弄得乱七八糟。

如果我不这样做，我看不出有什么方法可以工作（提供者可以为我提供正确的列表，但同样，存在依赖关系）。

**更普遍的问题是 - 有没有办法使用 DI 框架实际创建一个完全解耦的应用程序，或者这是某种理想？您在哪些情况下使用 DI 框架，在哪些情况下不使用？DI 框架真的是“新的”吗？**

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:16:07.133

这是一个有点难以回答的问题，特别是因为它是一个人为的例子，但是如果我们假设您的类已经完全按照您的需要设计，那么这里依赖注入的正确应用很简单。您似乎专注于 StringValidator 的可测试性，并试图通过依赖注入对其进行魔术处理。您*应该*关注可测试性的地方是您的 Main 类。这就是您引入紧密耦合和不可测试代码的地方，也是 DI 容器将显示其价值的地方。正确应用 DI 和 IoC 原则可能会导致类似这样的结果：

```
public class Main {
    @Autowired
    private Validateable validateable;
    @Autowired
    private Stringable stringable;

    public void main() {
        final List<String> validationList = validateable.getValidationList();
        final List<String> stringList = stringable.getStringList();
        StringValidator stringValidator = new StringValidator(stringList, validationList);
        stringValidator.validate();
        final List<String> validatedList = stringValidator.getValidatedList();
    }

    public static void main(String[] args) {
        Container container = new ...;
        container.get(Main.class).main();
    }
} 
```

换句话说，您所有的手动接线都将移交给 DI 容器的控制。这就是重点。就个人而言，我不会对此感到满意，因为您仍然有一些看起来像“组件”类的东西——StringValidator——被你的代码实例化。我会寻找重新设计事物的方法，以摆脱代码中的这种硬依赖，并将这种创建也交给容器。

至于这个“新新”，不，DI容器不是新的。他们已经存在了很长一段时间。如果您的意思是“我应该使用一个吗？”，那么我想我的回答通常是“是”，尽管模式比任何特定的实现都更重要。好处是公认的，它更多的是一种思维方式，而不是一个实际的框架。正如我刚刚演示的那样，您的 Main 类本质上是一个原始 DI 容器。

**更新：**如果您主要关心的是如何处理 StringValidator 的输入，则有几个选项。您的“stringList”和“validationList”没有理由不能由 DI 容器管理并注入您的 StringValidator。然后这些列表的来源取决于容器。它们可能来自您的其他对象或通过测试注入。或者，也许您希望更改有关 StringValidator 如何获取其输入的抽象？在这种情况下，也许这样的事情会更好地满足您的需求：

```
public class StringValidator {
    private SourceOfStrings stringSource;
    private SourceOfStrings validationStringSource;

    private final List<String> validatedList = new ArrayList<String>();

    ...

    public void validate() {
        for (String currentString : stringSource.getStrings()) {
            for (String currentValidation : validationStringSource.getStrings()) {
                if (currentString.equalsIgnoreCase(currentValidation)) {
                    validatedList.add(currentString);
                }
            }
        }
    }

    public List<String> getValidatedList() {
        return validatedList;
    }
}

interface SourceOfStrings {
    List<String> getStrings();
} 
```

注意：*不是*线程安全的。在线程环境中，我肯定会采取额外的步骤来消除将结果存储在字段中并调用额外的方法调用来获取它的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:28:27.027

我终于觉得我明白了！抱歉，我的问题中缺少信息。**Ryan Stewart**写道：“没有理由您的“stringList”和“validationList”不能由 DI 容器管理并注入到您的 StringValidator。”，也许他有这个想法。如果你这样做了，那就是我正在寻找的答案，你的答案是正确的，所以谢谢你。我是通过在 Spring 中进行实验自己发现的。

如果我使用包含列表的类，则生成的类无法接收列表。它们是动态创建的，我看不到将它们带到 StringValidator 的方法。动态意味着 - 没有容器的控制。

我可以注入它们的唯一方法是将它们直接注入 StringValidator。

但我忘记了一件事。Spring 更加灵活（根据我的经验） - 坦率地说，我不知道如何在 Guice 中解决这个问题（还没有真正尝试过，也许我会试一试）。

为什么不动态创建列表，并在容器生命中使用该列表作为可用于注入所需类的列表？

![在此处输入图像描述](../Images/69ece64419e9a27cd98df8999d5ba207.png)

关键是，当容器初始化列表时：

```
package test;

import org.springframework.stereotype.Component;

import java.util.ArrayList;

@Component
public class StringList extends ArrayList<String> {
}

package test;

import org.springframework.stereotype.Component;

import java.util.ArrayList;

@Component
public class ValidationList extends ArrayList<String> {
} 
```

或者，如果您更喜欢 xml 方式（已评论）：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context" xmlns:jee="http://www.springframework.org/schema/jee" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd         http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd         http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd         http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.1.xsd         http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">
    <context:component-scan base-package="test"/>

    <!--<bean id="validationList" class="java.util.ArrayList" scope="singleton"/>-->
    <!--<bean id="stringList" class="java.util.ArrayList" scope="singleton"/>-->
</beans> 
```

该列表可以在容器的整个生命周期中使用，从而在应用程序中使用。

```
package test;

import org.springframework.stereotype.Component;

import javax.inject.Inject;
import java.util.ArrayList;
import java.util.List;

@Component
public class StringService implements Stringable {

    private List<String> stringList;

    @Inject
    public StringService(final ArrayList<String> stringList) {
        this.stringList = stringList;
        createList();
    }

    //Simplified
    private void createList() {
        stringList.add("FILE1.txt");
        stringList.add("FILE1.dat");
        stringList.add("FILE1.pdf");
        stringList.add("FILE1.rdf");
    }

    @Override
    public List<String> getStringList() {
        return stringList;
    }
}

package test;

import org.springframework.stereotype.Component;

import javax.inject.Inject;
import java.util.ArrayList;
import java.util.List;

@Component
public class ValidationService implements Validateable {

    private List<String> validationList;

    @Inject
    public ValidationService(final ArrayList<String> validationList) {
        this.validationList = validationList;
        createList();
    }

    //Simplified...
    private void createList() {
        validationList.add("FILE1.txt");
        validationList.add("FILE2.txt");
        validationList.add("FILE3.txt");
        validationList.add("FILE4.txt");
    }

    @Override
    public List<String> getValidationList() {
        return validationList;
    }
} 
```

而且，我不必担心服务，因为列表现在在容器中，过着自己的生命周期，因此每次我请求它们时都可用。

```
package test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import java.util.ArrayList;
import java.util.List;

@Component
public class StringValidator {
    private List<String> stringList;
    private List<String> validationList;

    private final List<String> validatedList = new ArrayList<String>();

    @Autowired
    public StringValidator(final ArrayList<String> stringList,
                           final ArrayList<String> validationList) {
        this.stringList = stringList;
        this.validationList = validationList;
    }

    public void validate() {
        for (String currentString : stringList) {
            for (String currentValidation : validationList) {
                if (currentString.equalsIgnoreCase(currentValidation)) {
                    validatedList.add(currentString);
                }
            }
        }
    }

    public List<String> getValidatedList() {
        return validatedList;
    }
} 
```

答案实际上看起来很简单，但我花了一些时间才到达这里。

所以，Main 类看起来像这样，一切都由容器处理。

```
package test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.stereotype.Component;

import java.util.List;

@Component
public class Main {
    @Autowired
    private StringValidator stringValidator;

    public void main() {
        stringValidator.validate();
        final List<String> validatedList = stringValidator.getValidatedList();
        for (String currentValid : validatedList) {
            System.out.println(currentValid);
        }
    }

    public static void main(String[] args) {
        ApplicationContext container = new ClassPathXmlApplicationContext("/META-INF/spring/applicationContext.xml");
        container.getBean(Main.class).main();
    }
} 
```

**这似乎是可能的。因此，回顾一下答案 - 您始终可以在容器中动态创建类，并且可以很好地解耦！**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:13:50.853

我有点困惑，但你的意思是你想在不依赖任何类的情况下使用 DI？这可能通过注解或自定义类加载器实现，但它会很慢而且很难做到。也许你可以澄清你想要什么？

# sql - 获取叶级递归选择

> ID：10384480
> 
> 赞同：2
> 
> 时间：2012-04-30T13:25:43.843
> 
> 标签：sql, postgresql, recursive-query

我有一个带有 id,parent_forum_post_id 的表 forumposts，对于给定的 id=1221，我发现它的孩子数。

```
with recursive all_posts (id, parentid, root_id) as (
    select  t1.id,
            t1.parent_forum_post_id as parentid,
            t1.id as root_id
    from    forumposts t1

    union all

    select  c1.id,
            c1.parent_forum_post_id as parentid,
            p.root_id
    from    forumposts c1
    join    all_posts p on p.id = c1.parent_forum_post_id
)
select      (count(*)-1) as child_count
from        all_posts
where       root_id=1221
group by    root_id; 
```

我现在需要的是完全相反的：对于给定的 id，找出它的级别，这取决于他的父母数量（它是父母，它是父母的父母，直到它在它的 parent_forum_post_id 列中找到 null）。希望这是有道理的。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T00:17:46.510

此查询可以在很大程度上简化为：

```
WITH RECURSIVE p AS (
    SELECT parent_forum_post_id AS p_id
    FROM   forumposts
    WHERE  id = 1221   

    UNION ALL
    SELECT f.parent_forum_post_id
    FROM   p
    JOIN   forumposts f ON f.id = p.p_id
    )
SELECT count(*) AS level
FROM   posts; 
```

也应该快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T13:39:29.223

```
WITH recursive
  anticendent
AS
(
  SELECT
    id                       AS post_id,
    parent_forum_post_id     AS anticendent_post_id,
    1                        AS distance
  FROM
    forumposts

  UNION ALL

  SELECT
    anticendent.post_id,
    forumposts.parent_forum_post_id,
    distance + 1
  FROM
    anticendent
  INNER JOIN
    forumposts
      ON forumposts.id = anticendent.anticendent_post_id
)

SELECT
  post_id,
  MAX(distance)  AS level
FROM
  anticendent
GROUP BY
  post_id
WHERE
  post_id = 1221 
```

或者...

```
SELECT
  *
FROM
  anticendent
WHERE
  post_id = 1221
  AND anticendent_post_id IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T13:37:50.410

如果我理解正确，您希望特定节点的层次结构深度给定其 id（根为 1 级）。这适用于 postgresql：

```
with recursive all_posts (id, parentid, node_id) as (
    select  t1.id,
            t1.parent_forum_post_id as parentid,
            t1.id as node_id
    from    forumposts t1

    union all

    select  c1.id,
            c1.parent_forum_post_id as parentid,
            p.node_id
    from    forumposts c1
    join    all_posts p on p.parentid = c1.id
)
select      count(*) as level
from        all_posts
where       node_id=1221   
group by    node_id; 
```

# java - ValueAnimator 改变背景颜色

> ID：10384484
> 
> 赞同：3
> 
> 时间：2012-04-30T13:26:03.063
> 
> 标签：java, android, android-layout

我想创建一个背景颜色不断从红色变为蓝色的屏幕。由于某种原因，当我尝试实例化 ValueAnimator 时它总是崩溃。我不知道我的代码有什么问题

谢谢

**动画类**

```
public BackgroundAnimation(Context context){
    super(context);
    ValueAnimator colorAnim = ObjectAnimator.ofInt(R.anim.animator, "backgroundColor", Color.RED, Color.BLUE);
    colorAnim.setDuration(3000);
    colorAnim.setEvaluator(new ArgbEvaluator());
    colorAnim.setRepeatCount(ValueAnimator.INFINITE);
    colorAnim.setRepeatMode(ValueAnimator.REVERSE);
   colorAnim.start();

} 
```

**动画师.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">   
   <objectAnimator
         android:propertyName="backgroundColor"/>
</set> 
```

**主班**

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.menu);

    LinearLayout container = (LinearLayout) findViewById(R.id.container);
    container.addView(new BackgroundAnimation(this));

} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">

<TextView
    android:id="@+id/TextView01"
    android:gravity="center"
    android:textSize="20sp"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>

<TextView
    android:id="@+id/TextView02"
    android:gravity="center"
    android:textSize="20sp"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>

<ImageView
    android:id="@+id/ImageView01"
    android:layout_width="fill_parent"
    android:layout_height="300sp"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-22T09:12:25.780

您可以使用 ObjectAnimator 更改背景颜色：

对于 API >= 21 ：

```
ObjectAnimator colorAnimator = ObjectAnimator.ofArgb(travelersListView.getBackground().mutate(), "tint", mCurrentBackground, mFadeColor);
colorAnimator.setInterpolator(new AccelerateDecelerateInterpolator());
colorAnimator.start(); 
```

对于 API 16 的向后支持，请使用以下命令：

```
ObjectAnimator colorAnimator = ObjectAnimator.ofObject(travelersListView.getBackground().mutate(), "tint", new ArgbEvaluator(), mCurrentBackground, mFadeColor);
colorAnimator.setInterpolator(new AccelerateDecelerateInterpolator());
colorAnimator.start(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T13:30:03.133

LinearLayout 的 XML 文件中没有 id 参数。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:id="@+id/container"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-19T10:48:39.170

```
@Override
public void onCreate(Bundle icicle) {
super.onCreate(icicle);
setContentView(R.layout.menu);

LinearLayout container = (LinearLayout) findViewById(R.id.container);

changeBackground(container, "#F44336", "#2196F3"); //#F44336 : Red , #2196F3 : Blue

}

public void changeBackground(final View view, String color1, String color2) {
    ValueAnimator anim = new ValueAnimator();
    anim.setIntValues(Color.parseColor(color1), Color.parseColor(color2));
    anim.setEvaluator(new ArgbEvaluator());
    anim.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
        @Override
        public void onAnimationUpdate(ValueAnimator valueAnimator) {

            view.setBackgroundColor((Integer) valueAnimator.getAnimatedValue());
        }
    });

    anim.setDuration(2000);
    anim.setRepeatCount(ValueAnimator.INFINITE);
    anim.setRepeatMode(ValueAnimator.REVERSE);
    anim.start();
} 
```

**试试这个，希望这有帮助**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T08:27:08.563

没有变体`ObjectAnimator.ofInt()`将资源 ID 作为参数。请阅读本文以在 XML 中声明动画。 [http://developer.android.com/guide/topics/graphics/prop-animation.html#declaring-xml](http://developer.android.com/guide/topics/graphics/prop-animation.html#declaring-xml)

# google-maps - 如何使用不同的 Google Maps API？

> ID：10384487
> 
> 赞同：0
> 
> 时间：2012-04-30T13:26:09.823
> 
> 标签：google-maps, google-maps-api-3, google-places-api

我想使用谷歌地图 API。我查看了：[https](https://developers.google.com/maps/documentation/places/) ://developers.google.com/maps/documentation/places/ ，发现有不同的 API：

1.  Google 地方信息 API
2.  Google Places-Autocomplete API
3.  Google Maps JavaScript API v3 等

我可以在 Eclipse 中通过 JavaScript 使用所有这些吗？还是只有 Google Maps JavaScript API v3？Google Maps JavaScript API v3 是否包含 Google Places API 和 Google Places-Autocomplete API？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:52:50.437

您绝对应该使用 v3 - 其他版本已弃用，并且在某些时候将不受支持，甚至可能不可用。

来自[https://developers.google.com/maps/documentation/javascript/places](https://developers.google.com/maps/documentation/javascript/places)：

> Places 服务包含在一个独立的库中，与主要的 Maps API JavaScript 代码分开。

您只需要包含另一个脚本引用即可获得额外的 Places 库，它包括 Places Autocomplete。

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=true_or_false"></script> 
```

# c# - 如何将所有资源包含到一个 html 文件中？

> ID：10384494
> 
> 赞同：6
> 
> 时间：2012-04-30T13:27:18.233
> 
> 标签：c#, html

是否有任何 c# 库或任何免费工具可以将具有许多引用资源的 html 文件转换为一个“一体化”的 html 文件？

主要任务是只有一个文件，这意味着我需要包含

1.  Javascript 外部文件 - 这可能意味着将所有带有 'src' 属性的 'script' 标签替换为从引用文件中读取的内容的 'script' 标签。
2.  图片 - 用数据 uri 替换 src="picture.png" - 类似 src="data:image/png;base64,encodedContent..."
3.  CSS 文件
4.  可能我忘记了什么:)

这个 HTML 文件必须在所有浏览器中都可读，这就是为什么我不能使用 MHT 文件格式（在 Safari、iPad 上不可读......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:38:10.320

您可以使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)来读取/写入 html 文档。HTML Agility 支持 XPath，因此您可以获得要修改的节点列表。

使用它，更改图像标签的属性值应该很容易。您还可以获取外部 js 引用列表，阅读它们，然后相应地更新脚本标记。

# asp.net - 如何在 asp.net 2003 中使用 json

> ID：10384500
> 
> 赞同：0
> 
> 时间：2012-04-30T13:27:49.387
> 
> 标签：asp.net, json, asp.net-1.1

我在 asp.net 应用程序中使用带有 jquery 的 JSON 对象。该代码适用于 VS2008，但是当我在 VS2003 中移动 sam 代码时，它显示 JSON 未定义。代码如下

```
var mes = $('#filePath').val();
alert("File Path: " + mes);
var jsonText = JSON.stringify({ sFilePath: mes }); 
```

在第三行它给出了错误：Microsoft JScript 运行时错误：'JSON' is undefined

任何人都可以帮助解决这个问题。我需要添加任何参考。

在此先感谢 Eshwer N

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:30:49.093

这闻起来不像是 ASP.NET 问题。而是尝试将 json2.js 作为脚本标签的一部分 -

[http://www.json.org/](http://www.json.org/)

[https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

[http://www.json.org/js.html](http://www.json.org/js.html)

```
<script src="http://wherever.com/json2.min.js" type="text/javascript"></script> 
```

# cakephp-2.0 - Cakephp 2 Auth白屏死机

> ID：10384501
> 
> 赞同：0
> 
> 时间：2012-04-30T13:28:05.833
> 
> 标签：cakephp-2.0, authentication

问题：每当尝试访问需要授权的页面时，我都会得到一个白屏，没有重定向到什么都不登录。此外，当尝试登录时，它只是重定向回登录页面，没有登录错误（它确实尝试并通过登录过程）。有问题的页面通过 beforeFilter 但是当它进入 AUTH 阶段时它会死掉。

我有：

设置 /app/tmp/cache 文件夹是可写的，我从模型、持久性等文件夹中清除了所有文件

调试设置为 2

今天早些时候它工作得非常好，直到我执行了一些更新。

它在我的开发机器上运行良好。

从 1.2 到 2.1 构建了 20 多个 CakePHP 站点，这个白屏令人讨厌。

我无权访问 PHP 日志，因为它是共享托管服务器。

有什么想法可以让我尝试找到问题吗？

# c++ - 如何为 pimpl 类重载 ostream operator<<？

> ID：10384506
> 
> 赞同：2
> 
> 时间：2012-04-30T13:28:21.370
> 
> 标签：c++

这是我到目前为止所尝试的：

```
class Fahrzeug
{
public:

    std::string Id() const;
    void Id(const std::string &id);

    friend std::ostream& operator<< (std::ostream &out, const Fahrzeug &fzg)
    {
        out << Id();
        return out;
    }

private:
    struct DatenImpl;
    boost::scoped_ptr<DatenImpl> _datenImpl;
}; 
```

这会产生编译器错误：

> 错误 C2352：Id() - 非法调用非静态成员函数

**如何为“pimpled”类实现 ostream 运算符<<？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T13:29:24.457

你的定义应该是：

```
friend std::ostream& operator<< (std::ostream &out, const Fahrzeug &fzg)
{
    out << fzg.Id();  // <--- qualify call to Id()
    return out;
} 
```

运算符不是`class`成员，尽管在`class`.

# namespaces - 我在哪里可以查找 stylecop 规则的命名空间，以便我可以抑制它们？

> ID：10384508
> 
> 赞同：0
> 
> 时间：2012-04-30T13:28:24.133
> 
> 标签：namespaces, stylecop, suppress

似乎有各种问题专门询问如何抑制特定的 stylecop 警告，例如：

```
[SuppressMessage("Microsoft.StyleCop.CSharp.OrderingRules", "SA1202:ElementsMustBeOrderedByAccess"] 
```

但是我在哪里可以权威地查看规则的短名称以及（特别是）包含它的命名空间。我已经下载了 stylecop 项目并查看了项目规则集，但没有发现任何有用的东西。似乎有一些以 SA 为前缀的全局规则，我找不到关于它们的好的参考。

这谈论抑制规则，但不会导致 SA 规则上的命名空间信息 [https://blogs.msdn.com/b/sourceanalysis/archive/2009/08/10/rule-suppressions.aspx?Redirected=true](https://blogs.msdn.com/b/sourceanalysis/archive/2009/08/10/rule-suppressions.aspx?Redirected=true)。

[http://stylecop.soyuz5.com/SA1202.html](http://stylecop.soyuz5.com/SA1202.html)之类的文档在提供规则类别名称方面非常无用，但对实际的命名空间却没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:12:02.370

我不知道任何包含该名称空间的已发布文档，但您当然可以在源代码中查找它。

[http://stylecop.codeplex.com/SourceControl/changeset/view/fee0baa87dd0#Project%2fSrc%2fAddIns%2fCSharp%2fAnalyzers%2fOrderingRules.cs](http://stylecop.codeplex.com/SourceControl/changeset/view/fee0baa87dd0#Project%2fSrc%2fAddIns%2fCSharp%2fAnalyzers%2fOrderingRules.cs)

从上面的文件中，您可以看到排序规则的完全限定名称是**StyleCop.CSharp.OrderingRules**。

[http://stylecop.codeplex.com/SourceControl/changeset/view/fee0baa87dd0#Project%2fSrc%2fAddIns%2fCSharp%2fAnalyzers%2fOrderingRules.xml](http://stylecop.codeplex.com/SourceControl/changeset/view/fee0baa87dd0#Project%2fSrc%2fAddIns%2fCSharp%2fAnalyzers%2fOrderingRules.xml)

从此文件中，您可以获得**shortname:longname**值。对于排序规则，我们可以看到它是**SA1202:ElementsMustBeOrderedByAccess**。

# html - 在返回按钮单击时填充请求

> ID：10384513
> 
> 赞同：0
> 
> 时间：2012-04-30T13:28:48.530
> 
> 标签：html, jsp, servlets, request, back-button

所以我遇到了一个问题。我将某些字段存储在从页面到页面的请求中，因为每个页面都需要在我使用跨页面的收集器中填充不同的字段。问题是返回按钮。

如果我单击链接进入我的登录页面，服务器会使用适当的页面名称和事件名称等填充来自请求的收集器，以允许我导航到登录页面。（某些东西必须加载，所以它必须通过一个 servlet）。但是，在该页面上，有用于广告之类的静态模块，因此单击其中一个广告会将您带到一个单独的静态页面，该页面不需要这些属性即可访问。在 Chrome、Safari 和 FF 中，如果我在访问此静态页面后单击返回按钮，浏览器会要求我重新加载请求才能查看该页面。然而，在 IE8 中，没有页面重新加载。它只是将我踢回页面，并没有填充请求，并且它与我的抱歉页面一起崩溃。

我需要知道是否有办法在点击后退按钮时填充请求，以及如何做到这一点。否则，我的 servlet 在尝试访问这些字段时会抛出一个空指针，因为它们在请求中都是空的。任何帮助将不胜感激。我什至不确定这是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:01:26.803

我猜您正在使用`POST`请求导航到每个页面。`POST`应该*只*用于发送一些与页面视图不同的用户操作 - 登录、购买东西、更改设置等。浏览器要求用户确认他们想要使用 重新访问页面`POST`，然后才意味着状态更改。请参阅[POST 和 GET 有什么区别？](https://stackoverflow.com/questions/3477333/what-is-the-difference-between-post-and-get)

对于用户不采取行动的简单内容页面，最好使用`GET`请求。*此外，在服务器*`request.getSession()`端获取和存储用户字段更为常见。也就是说，您只发送一次，然后为每个请求查找它们。查找有关 java 中的会话跟踪的教程。

# java - 我如何只能关闭 JDialog 框？

> ID：10384515
> 
> 赞同：1
> 
> 时间：2012-04-30T13:28:55.253
> 
> 标签：java, swing, jframe, jdialog

我从 JFrame 调用 JDialog 但问题是当我退出 JDialog 框时，整个程序退出意味着 JFrame 窗口也退出。我不能只退出 JDialog 框窗口。我如何只能关闭 JDialog 框？

在此处输入代码

```
package subtitlemakerofvedio;

 public class About extends javax.swing.JDialog {

/** Creates new form About */
public About(java.awt.Frame parent, boolean modal) {
    super(parent, modal);
    initComponents();
}

/** This method is called from within the constructor to
 * initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is
 * always regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jLabel1 = new javax.swing.JLabel();
    jLabel2 = new javax.swing.JLabel();
    jLabel3 = new javax.swing.JLabel();
    jLabel4 = new javax.swing.JLabel();
    jLabel5 = new javax.swing.JLabel();
    Close_Button = new javax.swing.JButton();

    setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
    setTitle("About: SubTitle Editor 4.8.1.1");

    jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/about.png"))); // NOI18N
    jLabel1.setText("jLabel1");

    jLabel2.setFont(new java.awt.Font("Tahoma", 1, 15));
    jLabel2.setText("SubTitle Editor ");

    jLabel3.setText("A simple subtitle editor of vedio ");

    jLabel4.setText("<html>You can make bangla and english subtitle using this software");

    jLabel5.setText("Product version: 4.8.1.1");

    Close_Button.setText("Close");
    Close_Button.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            Close_ButtonActionPerformed(evt);
        }
    });

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 129, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                .addGroup(layout.createSequentialGroup()
                    .addGap(18, 18, 18)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addComponent(jLabel2, javax.swing.GroupLayout.DEFAULT_SIZE, 194, Short.MAX_VALUE)
                        .addComponent(jLabel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jLabel4, javax.swing.GroupLayout.DEFAULT_SIZE, 214, Short.MAX_VALUE)
                        .addComponent(jLabel5, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addContainerGap(22, Short.MAX_VALUE))
                .addGroup(layout.createSequentialGroup()
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(Close_Button, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addContainerGap())))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jLabel1)
        .addGroup(layout.createSequentialGroup()
            .addGap(11, 11, 11)
            .addComponent(jLabel2)
            .addGap(18, 18, 18)
            .addComponent(jLabel3)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(1, 1, 1)
            .addComponent(jLabel5, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(18, 18, 18)
            .addComponent(Close_Button))
    );

    pack();
}// </editor-fold>

/**
* @param args the command line arguments
*/
/*
public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            About dialog = new About(new javax.swing.JFrame(), true);
            dialog.addWindowListener(new java.awt.event.WindowAdapter() {
                public void windowClosing(java.awt.event.WindowEvent e) {
                    System.exit(0);
                }
            });
            dialog.setVisible(true);
        }
    });
}
*/
     // Variables declaration - do not modify
     private javax.swing.JButton Close_Button;
      private javax.swing.JLabel jLabel1;
       private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
      private javax.swing.JLabel jLabel4;
        private javax.swing.JLabel jLabel5;
     // End of variables declaration

   } 
```

现在是 JFrame 示例代码

```
/*
* JFrame_of_subtitle.java
*
* Created on Apr 2, 2012, 5:58:46 AM
*/

package subtitlemakerofvedio;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Timer;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.event.TableModelEvent;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableModel;

public class JFrame_of_subtitle extends javax.swing.JFrame
{
    /** Creates new form JFrame_of_subtitle */
    public MediaPanel media_play;
    public  javax.swing.Timer time;
    public JFrame_of_subtitle(MediaPanel media, javax.swing.Timer t)
    {
        super("Subtitle Editor 4.8.1.1");
        media_play=media;
        time=t;
        initComponents();
    }

    private void initComponents() {
           //some code.......
    }              

    //this is for the JDialog box 
    private void About_menuitemActionPerformed(java.awt.event.ActionEvent evt)
    { 
        // TODO add your handling code here:
        //About a=new About(this, rootPaneCheckingEnabled);

        About dialog = new About(new javax.swing.JFrame(), true);
        dialog.addWindowListener(new java.awt.event.WindowAdapter()
        {
            @Override public void windowClosing(java.awt.event.WindowEvent e)
            {
                System.exit(0);
            }
        });

        dialog.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:10:52.363

好吧，您要在窗口关闭后退出程序。

```
dialog.addWindowListener(new java.awt.event.WindowAdapter() {
    @Override
    public void windowClosing(java.awt.event.WindowEvent e) {
        System.exit(0);
    }
}); 
```

尝试设置：

```
dialog.setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE); 
```

因此，当它关闭时，您的窗口将被丢弃。

编辑：只需将我输入的第一个代码替换为第二个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-22T20:05:27.293

也许尝试使用 closeAndHide() 而不是 System.exit(0)。System.exit(0) 用于告诉一切关闭。

# java - 如何找到一列mysql的最大值并返回该值？

> ID：10384519
> 
> 赞同：1
> 
> 时间：2012-04-30T13:29:20.887
> 
> 标签：java, mysql, mysql-error-1064, sqlexception

我想搜索一列的最大值，但找到的值总是收到 0

```
public  int maXnumR()
{
    DataBase s = DataBase.getInstance();
    int numR= getnumR();

    String req1 = "SELECT max(`idrf`) FROM   `reference`  WHERE `numR` = "
        + numR + " GROUP BY `numR` ";

    try 
    {
        Statement m=  s.getConn().createStatement();
        ResultSet r1 = m.executeQuery(req1);
        while (r1.next()) 
        {
            maxnumR =r1.getInt("idrf");
            nbp++;  
        } 
    } 
    catch (SQLException e1) 
    {
        e1.printStackTrace();
        System.out.println("maXnumR : "+e1);
    } 
    return maxnumR;
} 
```

maXnumR 返回 0 并且表不为空。

如果我执行查询，它适用于 MySQL

错误：

```
java.sql.SQLException: Column 'idrf' not found.
maXnumR : java.sql.SQLException: Column 'idrf' not found.
idrf existe:0 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T13:31:13.257

尝试

```
SELECT max(`idrf`) as idrf 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T13:32:48.027

就像卢卡说的那样，问题是您的查询没有返回名为“idrf”的列，而是更像：“max(idrf)”。

这意味着当您使用时`getInt("idrf")`，查询返回的结果集中没有匹配项。

话虽如此，您需要使用

```
SELECT max(`idrf`) as idrf 
```

（或您的 resultSet 列的任何其他名称），就像 Luca 回答的那样，并将其用作 getInt 的键。

# javascript - 跨域 API 调用阻碍了 Javascript API

> ID：10384529
> 
> 赞同：1
> 
> 时间：2012-04-30T13:30:08.873
> 
> 标签：javascript, jquery, iframe, cross-domain

我需要为我的社交网站提供类似于“与 Facebook 共享”的功能。Facebook 使用嵌套的 iframe 和 xd_receiver 概念。我想编写一个 JavaScript API（托管在我的域上的 JS 文件），不同的站点可以使用它来调用我的 Web 服务器 API，以便在我的社交网站上分享、发布或推荐。我有几个问题 -

1.  即使我提供了 JS API，并且差异站点使用源加载 JS 文件，如果进行任何 API 调用，它将再次成为跨域调用（如果我理解正确的话）并且会在服务器上被拒绝？如何克服这种情况？

2.  有没有其他更好的机制来实现这个功能？

请提出建议，以便我可以继续实施。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:40:07.980

我认为默认的方法是使用 jsonp 来绕过跨域限制。 [http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)。不过，它可能需要更改您的 api。用户通过`src`传入函数回调的脚本标签请求您的 api。您的 api 会将您的 json 响应返回给指定的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:19:52.483

你知道他们为什么使用 iframe 而不是简单的使用 JSONP/Images/scripts 获取请求吗？

答案是安全。我不能编写一个脚本来单击他们的按钮，该按钮会自动“喜欢”该页面。

使用带有 JSONP 的普通旧 JavaScript 将允许开发人员自动单击按钮。你希望这种情况发生吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:41:35.793

这些请求是由浏览器发出的，而不是来自 JS 文件，因此，您的请求每次从另一个域站点发出时都是跨域的。

如果您实施了推荐人验证，您的服务器只会拒绝跨域请求。

如果您的 API 需要来自您网站的自定义内容，您可以使用 JSONP...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T13:46:48.007

要允许跨域请求，您需要在 HTTP 响应中设置以下 Header：

```
Access-Control-Allow-Origin: * 
```

实施将根据您使用的后端而有所不同。

如果请求的 Origin 标头中的主机不是请求的主机，则响应必须在 Access-Control-Allow-Origin 标头中包含列出的 Origin。将此标头设置为 * 将允许所有来源。

有关跨源资源共享的非常具体的信息，请参见[http://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)。如果您不喜欢阅读 w3c 文档，请查看[MDN 的入门](https://developer.mozilla.org/en/HTTP_access_control)。

注意：Internet Explorer 在跨域请求方面做自己的事情。如果您对 IE 有疑问，这个[答案是一个好的开始。](https://stackoverflow.com/questions/3362474/jquery-ajax-fails-in-ie-on-cross-domain-calls)

# android - android - 当设备与Android中的数据线连接时，如何通过编码将在edittext中键入的文本直接保存到D'驱动器？

> ID：10384534
> 
> 赞同：0
> 
> 时间：2012-04-30T13:30:29.087
> 
> 标签：android

我有两个edittextbox 和一个用于同步的按钮。用户将在两个编辑文本框中键入他们的姓名和年龄。每当我按下同步按钮时，在编辑文本框中输入的数据每次都应存储并更新在 PC 的“D”驱动器中，因为设备使用数据线与 PC 连接。

# javascript - Javascript阻止表单传递数据

> ID：10384538
> 
> 赞同：-2
> 
> 时间：2012-04-30T13:30:43.240
> 
> 标签：javascript, html, forms, validation, if-statement

解决了我的javascript问题。抱歉，这主要是我的错，因为我复制并粘贴了我的代码，而不是再次重写它。奇怪的是，它似乎没有将变量从表单传递到流程页面，因为我已经回显了 SQL 语句。这个表单在java脚本之前确实有效，我添加的只是邮政编码：对于每一行，即使在删除javascript之后它仍然不起作用：S对不起明天的截止日期，我很恐慌。

```
 <script type="text/javascript">
            function checkForm()
            {
                var username = document.getElementById('username').value;
                if(username.length < 5)
                {
                    alert("Username is to short");
                    return false;
                }
                else if (username.length<16)
                {
                    alert("Username is to long");
                    return false;
                }

                var firstName = document.getElementById('firstName').value;
                if(firstName.length <3)
                {
                    alert("Forname is to short");
                    return false;
                }

                var lastName = document.getElementById('lastName').value;
                if (lastName.length <3)
                {
                    alert("Surname is to short");
                    return false;
                }

                var address = document.getElementById('address').value;
                if (address.length <8)
                {
                    alert("Address is to short");
                    return false;
                }

                var town = document.getElementById('town').value;
                if (town.length <3)
                {
                    alert ("Town is to short");
                    return false;
                }

                var postCode = document.getElementById('postCode').value;
                if (postCode.length <6)
                {
                    alert ("Invalid Post Code");
                    return false;
                }
                else if (postCode.length>8)
                {
                    alert("Invalid Post Code");
                    return false;
                }

                var cardType = document.getElementById('cardType').value;
                if (cardType.length <3)
                {
                    alert ("Please enter a valid card type");
                    return false;
                }

                var password = document.getElementById('password').value;
                if (password.length <6)
                {
                    alert ("You password must be between 6-12 characters");
                    return false;
                }
                else if(password.length>12)
                {
                    alert ("Your password must be between 6-12 characters");
                    return false;
                }
                else
                {
                    return true;
                }

            }

            function checkUsername()
            {
                var username = document.getElementById('username').value;
                var element = document.getElementById('username1');
                if(username.length < 5)
                {
                    element.innerHTML = "Username is to short";
                    element.style.color = "red";
                }
                else if (username.length >16)
                {
                    element.innerHTML = "Username is to long";
                    element.style.color = "red";
                }
                else
                {
                    element.innerHTML = "Username";
                    element.style.color = "green";
                }
            }
            function checkFname()
            {
                var firstName = document.getElementById('firstName').value;
                var element = document.getElementById('firstname1');
                if(firstName.length < 3)
                {
                    element.innerHTML = "Forname is to short";
                    element.style.color = "red";
                }
                else
                {
                    element.innerHTML = "Forname";
                    element.style.color = "green";
                }
            }
            function checkLname()
            {
                var lastName = document.getElementById('lastName').value;
                var element = document.getElementById('surname1');
                if(lastName.length < 3)
                {
                    element.innerHTML = "Surname is to short";
                    element.style.color = "red";
                }
                else
                {
                    element.innerHTML = "Surname";
                    element.style.color = "green";
                }
            }
            function checkAddress()
            {
                var address = document.getElementById('address').value;
                var element = document.getElementById('address1');
                if(address.length < 8)
                {
                    element.innerHTML = "Address is to short";
                    element.style.color = "red";
                }
                else
                {
                    element.innerHTML = "Address";
                    element.style.color = "green";
                }
            }
            function checkTown()
            {
                var town = document.getElementById('town').value;
                var element = document.getElementById('town1');
                if(town.length < 3)
                {
                    element.innerHTML = "Town is to short";
                    element.style.color = "red";
                }
                else
                {
                    element.innerHTML = "Town";
                    element.style.color = "green";
                }
            }
            function checkPostCode()
            {
                var postCode = document.getElementById('postCode').value;
                var element = document.getElementById('postcode1');
                if(postCode.length < 6)
                {
                    element.innerHTML = "Post code is to short";
                    element.style.color = "red";
                }
                else if (postCode.length>8)
                {
                    element.innerHTML = "Post Code To Long";
                    element.style.color = "red";
                }
                else
                {
                    element.innerHTML = "Post Code";
                    element.style.color = "green";
                }
            }

                function checkCard()
                {
                    var cardType = document.getElementById('cardType').value;
                    var element = document.getElementById('card1');
                    if(cardType.length < 3)
                    {
                        element.innerHTML = "Card is to short";
                        element.style.color = "red";
                    }
                    else
                    {
                    element.innerHTML = "Card Type";
                    element.style.color = "green";
                    }
                }
                function checkPassword()
            {
                var password = document.getElementById('password').value;
                var element = document.getElementById('password1');
                if(password.length < 6)
                {
                    element.innerHTML = "Password is to short";
                    element.style.color = "red";
                }
                else if (password.length>16)
                {
                    element.innerHTML = "Password is to long";
                    element.style.color = "red";
                }
                else
                {
                    element.innerHTML = "Password";
                    element.style.color = "green";
                }
            }

</script>

    <p><b><h3>Welcome User Please Register</h3></b></p>
    <form action="registerUserProcess.php" id="registerUserForm" method="post" name="registerUserForm" >

    <table> 
    <tr><td><label id="username1">Username:</label></td><td><input id="username" type="text" size="16" onBlur='checkUsername();'/></td></tr>
    <tr><td><label id="firstname1">Forename:</label></td><td><input id="firstName" type="text" size="20" onBlur="checkFname();" /></td></tr>
    <tr><td><label id="surname1">Surname:</label></td><td><input id="lastName" type="text" size="30" onBlur="checkLname();" /></td></tr>
    <tr><td><label id="address1">Address:</label></td><td><input id="address" type="text" size="50" onBlur="checkAddress();" /></td></tr>
    <tr><td></td><td><input id="address2" type="text" size="50" onBlur="" /></td></tr>
    <tr><td><label id="town1">Town:</label></td><td><input id="town" type="text" size="50" onBlur="checkTown();" /></td></tr>
    <tr><td><label id="postcode1">Post Code:</label></td><td> <input type="text" id="postCode" size="8" onBlur="checkPostCode();" /></td></tr>
    <tr><td><label id="contact1">Contact No:</label></td><td> <input type="number" id="contact" size="12" onBlur="checkContactNo();" /></td></tr>
    <tr><td>Card Number:</td><td><input type="number" id="cardNo1" size="4" /> - <input type="number" id="cardNo2" size="4" /> - <input type="number" id="cardNo3" size="4" /> - <input type="number" id="cardNo4" size="4" /></td></tr>
    <tr><td><label id="card1">Card Type</label></td><td> <input type="text" id="cardType" size="8" onBlur="checkCard();" /></td></tr>
    <tr><td>Email Address:</td><td><input id="emailAddress" type="text" size="50" /></td></tr>
    <tr><td><label id="password1">Password:</label></td><td><input id="password" type="password" size="16" onBlur="checkPassword();" /></td></tr>
    <tr><td><label id="terms1">Accept Terms & Conditions:</label></td><td><input type="checkbox" id="termsConditions" value="yes" onBlur="checkTerms();" /></td></tr>
    <tr><td><input type="reset" id="resetForm" value="Reset" id="resetForm" /></td><td><input type="submit" id="submitUser" value="Submit" id="submitUser" onSubmit='return checkForm();' /></td></tr>
    </table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:33:14.987

函数：checkForm()：

如果要：您需要更改第二个 else：

```
else if (username.length<16)) needs to be > 16. 
```

--

函数：检查用户名（）：

您拼写错误的长度。将其更改为：

```
else if (username.length>16) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:33:47.577

这对于一个问题来说代码太多了，但我注意到第一个函数中的一些事情：

```
else if (username.length<16) // This should probably be username.length > 16
{
    alert("Username is to long");
    return false;
}

if (isNAN(contact)) // this should probably be !isNaN(contact)
{
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T13:36:28.713

您在以下内容中拼错了长度：`username.lenght>16`

这就是你的时间太长不起作用的原因。

```
 function checkUsername()
        {
            var username = document.getElementById('username').value;
            var element = document.getElementById('username1');
            if(username.length < 5)
            {
                element.innerHTML = "Username is to short";
                element.style.color = "red";
            }
            else if (username.lenght>16)
            {
                element.innerHTML = "Username is to long";
                element.style.color = "red";
            }
            else
            {
                element.style.color = "green";
            }
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T13:48:05.590

正如其他人所说，请检查您的语法。中`checkform()`，应该是

```
else if (username.length > 16)) instead of < 16 
```

在`checkUsername()`你拼写长度错误。

但你的主要问题在于你的回报。在`checkform()`您应该只`return true`在所有内容都经过验证后才将其放在最后，否则该函数将在第一次验证后退出。

你也可以重构所有这些。你有很多功能可以做几乎相同的事情。如果您创建一个函数，该函数采用最小字符、最大字符和控件来验证参数，您可以在 20 到 30 行中完成所有代码。

另外，您似乎复制粘贴了一些函数而没有更改变量或目标控件的名称。实际上，您`Username`在每个函数中都将其分配为变量，但在条件中更改名称，这意味着您使用了取消分配变量。

# unit-testing - 如何只运行有序测试？

> ID：10384541
> 
> 赞同：1
> 
> 时间：2012-04-30T13:30:55.390
> 
> 标签：unit-testing, visual-studio-2012

在 Visual Studio 11 中，我面临一个复杂的问题。

我正在使用单元测试资源管理器来运行单元测试。但是，它显示了我的正常单元测试和我的有序测试，它们基本上也是按特定顺序运行的测试集合。

这对我来说效果不佳，因为我希望设置“构建后运行测试”。但是，正如您所料，发生的情况是它单独运行我所有的测试，然后运行我的*有序*测试，如下图所示。

![在此处输入图像描述](../Images/6394f1732366c9a93e3dddc985f69c08.png)

我真的很想在构建完成时只运行我的有序测试。我对帮助我做到这一点的第三方插件/扩展不感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:24:16.403

我最终使用了构建服务器，然后按如下方式配置了我的构建配置，它将运行所有测试的文件扩展名为 orderedtest：

![在此处输入图像描述](../Images/55302822a2a0698960ad89934fd366d9.png)

# ios - 在 Apple 的 Appstore 中为客户发布应用程序

> ID：10384548
> 
> 赞同：0
> 
> 时间：2012-04-30T13:31:26.903
> 
> 标签：ios, app-store

我们正在为多个客户开发 iOS 应用程序。

并非所有人都已在苹果开发计划中注册。

我们是否有可能使用我们的帐户发布应用程序，但在应用商店中显示他们的姓名和联系信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:34:29.963

不，除了自定义支持和 Web URL 之外，这是不可能的。但是，如果您的客户是认真的，他们应该能够负担得起该帐户的 99 美元。你确定要这样做吗？毕竟它是您的帐户，因此您会显示该应用程序及其所有声誉和评论等。我不希望我的客户应用程序出现在我的正常开发帐户中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T13:32:52.910

您的公司将被列为出版商。但是您可以将他们的 URL 和支持信息以及任何内容放在描述区域中。

# timestamp - 需要有关 unix 时间戳的帮助

> ID：10384550
> 
> 赞同：1
> 
> 时间：2012-04-30T13:31:42.510
> 
> 标签：timestamp, unix-timestamp

基本上，我正在创建一个邮件系统，如果他们自 30 天以来没有登录，则向我的非活动成员发送邮件以在他们的帐户中进行活动。

我以前的登录日期以 unixtimestamp 存储在我的数据库中，因此我编码如下。

```
 select email from myusers where WHERE DATE_ADD(FROM_UNIXTIME(prelogin), INTERVAL 30 DAY) < CURDATE()"; 
```

但是这段代码在 30 天后几乎每天都会发送连续邮件，因为我已将 cron 设置为每天运行一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:35:55.263

假设您只希望每 30 天发送一封电子邮件，并且只有在他们 30 天没有登录的情况下，我怀疑最简单的解决方案是在您的表中添加*另一个*`last_email_sent_time`名为.

`prelogin` *然后*，仅在距新专栏至少 30 天后才发送电子邮件。

而且，当您发送电子邮件时，将该新列更新为当前日期，这样您就不会再打扰他们一个月左右了。

* * *

另一方面，如果您只想在他们三十天未登录后发送*一次电子邮件，那是类似的事情。*

创建一个指示电子邮件已发送的新列，并且仅在该列为假（或`N`您想用来指示它的任何内容）时发送它。发送它将将该列设置为 true，登录会将其设置为 false（以及更改`prelogin`）。

* * *

如果您*不想*添加额外的列（出于某种奇怪的原因），您可以`prelogin`在发送电子邮件时简单地更新，尽管我不建议这样做，因为它会丢失可能在其他地方使用（或有用）的信息。

# asp.net - Sql Server 查询 DropDownList 选定值

> ID：10384554
> 
> 赞同：0
> 
> 时间：2012-04-30T13:32:02.397
> 
> 标签：asp.net, sql-server, vb.net, tsql

我有一个 DropDownList 从 sql server 中的表中提取值。我希望下拉列表根据用户的选择填充值列表，但也显示我的表格其余部分的内容，以防他们需要更改某些内容。例如：

ddl1 的值为：1, 2, 3, 4, 5 用户选择 5，所以 ddl2 中显示的值为 5，但如果您展开 ddl2 您还会看到值 1、2、3、4...

这是我的加载事件中的代码......

```
 If Not IsPostBack Then
      result = dal.dbConnect(DAL.dbType.SqlServer, ConfigurationManager.AppSetting("SQLServerConnection"))
        If result = "Successful" Then
          Try
            dt = dal.ExecuteSelectStoredProc(DAL.dbType.SqlServer, "StoredProc1", "@obj1", DropDownList1.Text)
            DropDownList2.DataSource = dt
            DropDownList2.DataTextField = dt.Columns.Item(1).ToString
            DropDownList2.DataBind()
            Catch ex As Exception
            End Try
         End If
    End If 
```

存储过程...

```
 USE [DB1]
    GO
    SET ANSI_NULLS ON
    GO
    SET QUOTED_IDENTIFIER ON
    GO
    ALTER PROCEDURE [dbo].[StoredProc1]
    @obj1 nvarchar(4)
    AS
    BEGIN
    SET NOCOUNT ON;
    SELECT [Obj1], [obj2]
    FROM [DB1].[dbo].[Code]
    WHERE [obj1] = @obj1
    END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:37:47.420

您需要将 AppendDataBoundItems 属性设置为 true 以保留 DDL 中的现有值：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.appenddatabounditems.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.appenddatabounditems.aspx)

如果您希望使用 DDL 实现级联效果，请查看以下内容：

[http://www.codersbarn.com/post/2007/07/21/Code-Snippet-Cascading-DropDownLists.aspx](http://www.codersbarn.com/post/2007/07/21/Code-Snippet-Cascading-DropDownLists.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:42:19.737

我不清楚你为什么想要两个下拉列表，或者每个下拉列表中有什么。

如果您只是想要一个包含表中所有值的下拉列表，但显示的值是先前选择的值，只需说“ddl.SetSelectedValue(somevalue)”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:35:13.563

在您的`SelectedIndex`Change 事件方法中，编写以下内容：

```
ddl2.SelectedValue = ddl1.SelectedValue; 
```

# eclipse - 将 Java EE 源代码添加到 Eclipse 项目

> ID：10384556
> 
> 赞同：0
> 
> 时间：2012-04-30T13:32:11.867
> 
> 标签：eclipse, jakarta-ee, maven, jboss

使用 Eclipse，我配置了一个 Java EE 项目以在其类路径中包含 JBoss 7.1 Runtime。（我使用“项目属性”->“Java 构建路径”->“库”中的“添加库”按钮执行此操作）。

我使用 Maven 来构建项目，并且“通常”这工作正常。但是，当我调试此应用程序时，Java EE 源类不可用。以防万一我查看了 JBoss 运行时，但显然源不存在。我的主要问题是：有人可以告诉我将 Java EE 源代码添加到我的 Eclipse 项目以便在调试时可用的最佳方法是什么？

另外，如果我正在使用 Maven，可以将 Java EE 库添加为 JBoss 运行时，就像我目前在我的项目中所做的那样？或者它被认为是在项目 POM 中声明对 Java EE 的依赖的更好方法？

我开始怀疑 JBoss 运行时方法是否是添加 Java EE 二进制类的“正确”方法，因为奇怪的是，Maven 有时无法编译应用程序，因为它再也看不到 Java EE 类。我解决了从构建路径（在 Eclipse 项目配置中）删除 JBoss Runtime 并再次添加它们的问题。幸运的是，这种编译并不经常发生，所以直到现在我一直能够解决这个问题。

感谢您的任何反馈。

# android - android发送短信并获得越来越多的发送和发送通知

> ID：10384558
> 
> 赞同：1
> 
> 时间：2012-04-30T13:32:28.450
> 
> 标签：android, sms

我有一种发送短信的方法。此方法注册两个待处理的意图来接收发送和传递报告。

我发送第一条消息并收到它的发送和传递报告，然后发送另一条消息。在接收第二条消息的报告时，我收到第一条消息的报告，然后是第二条消息。如果我发送另一条消息，我会收到第一条和第二条消息的报告，然后是第三条消息。

有什么问题？

来源：

```
public void sendSms(String phoneNumber, String cmd ...) {
    sentPI      = PendingIntent.getBroadcast(this, sendSmsCounter++, new Intent(SENT),      PendingIntent.FLAG_CANCEL_CURRENT);
    deliveredPI = PendingIntent.getBroadcast(this, deliverCounter++, new Intent(DELIVERED), PendingIntent.FLAG_CANCEL_CURRENT);

    sendingBroadcastReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    displayMessage("Sms Sent");
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    displayMessage("Sending SMS error: Generic failure");
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    displayMessage("Sending SMS error: No service");
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    displayMessage("Sending SMS error: Null PDU");
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    displayMessage("Sending SMS error: Radio off");
                    break;
            }               
        }
    };

    this.registerReceiver(sendingBroadcastReceiver, new IntentFilter(SENT));

    deliveryBroadcastReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
           switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    displayMessage("SMS Delivered");
                    break;
                case Activity.RESULT_CANCELED:
                    displayMessage("SMS delivery error: SMS Canceled");
                    break;                        
            }               
        }
    };

    this.registerReceiver(deliveryBroadcastReceiver, new IntentFilter(DELIVERED));

    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, cmd, sentPI, deliveredPI); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:49:18.990

使用此代码发送和接收发送的通知

```
send.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            String phoneNo = "Phone number";
            String message = "Content of the msg";
            if (phoneNo.length() > 0 && message.length() > 0) {
                TelephonyManager telMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
                int simState = telMgr.getSimState();
                switch (simState) {
                case TelephonyManager.SIM_STATE_ABSENT:
                    displayAlert();
                    break;
                case TelephonyManager.SIM_STATE_NETWORK_LOCKED:
                    // do something
                    break;
                case TelephonyManager.SIM_STATE_PIN_REQUIRED:
                    // do something
                    break;
                case TelephonyManager.SIM_STATE_PUK_REQUIRED:
                    // do something
                    break;
                case TelephonyManager.SIM_STATE_READY:
                    // do something
                    sendSMS(phoneNo, message);
                    break;
                case TelephonyManager.SIM_STATE_UNKNOWN:
                    // do something
                    break;
                }

            } else {
                Toast.makeText(getBaseContext(),
                        "Please enter both phone number and message.",
                        Toast.LENGTH_SHORT).show();
            }

        }

private void sendSMS(String phoneNumber, String message) {
    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";

    PendingIntent sentPI = PendingIntent.getBroadcast(YourActivity.this, 0,
            new Intent(SENT), 0);

    PendingIntent deliveredPI = PendingIntent.getBroadcast(YourActivity.this,
            0, new Intent(DELIVERED), 0);

    // ---when the SMS has been sent---

    registerReceiver(new BroadcastReceiver() {

        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode()) {
            case Activity.RESULT_OK:
                Toast.makeText(YourActivity.this, "SMS sent",
                        Toast.LENGTH_SHORT).show();
                break;
            case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                Toast.makeText(YourActivity.this, "Generic failure",
                        Toast.LENGTH_SHORT).show();
                break;
            case SmsManager.RESULT_ERROR_NO_SERVICE:
                Toast.makeText(YourActivity.this, "No service",
                        Toast.LENGTH_SHORT).show();
                break;
            case SmsManager.RESULT_ERROR_NULL_PDU:
                Toast.makeText(YourActivity.this, "Null PDU",
                        Toast.LENGTH_SHORT).show();
                break;
            case SmsManager.RESULT_ERROR_RADIO_OFF:
                Toast.makeText(getBaseContext(), "Radio off",
                        Toast.LENGTH_SHORT).show();
                break;

            }
        }
    }, new IntentFilter(SENT));

    // ---when the SMS has been delivered---
    registerReceiver(new BroadcastReceiver() {
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode()) {
            case Activity.RESULT_OK:
                Toast.makeText(YourActivity.this, "SMS delivered",
                        Toast.LENGTH_SHORT).show();
                break;
            case Activity.RESULT_CANCELED:
                Toast.makeText(YourActivity.this, "SMS not delivered",
                        Toast.LENGTH_SHORT).show();
                break;
            }
        }
    }, new IntentFilter(DELIVERED));

    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);
    Intent smsintent = new Intent(YourActivity.this, SecondActivity.Activity);
    startActivity(smsintent);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T17:01:08.040

通过在 OnReceive() 方法的末尾添加这一行来解决问题：

```
 MyActivity.this.unregisterReceiver(this); 
```

仔细看看：

```
sendingBroadcastReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        switch (getResultCode())
        {
            case Activity.RESULT_OK:
                displayMessage("Sms Sent");
                break;
            // ...    
        }
        MyActivity.this.unregisterReceiver(this);               
    }
}; 
```

在接收到广播并处理之后，我们不再需要这个广播接收器，所以我们从我们的 Activity 中取消注册它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:48:49.990

你把它放在你的onPause中了吗？

```
@Override
    protected void onPause() {
        super.onPause();
        if (bRSMS_has_been_sent != null){
            unregisterReceiver(bRSMS_has_been_sent);
            bRSMS_has_been_sent = null;
        }
        if (brSMS_has_beed_delivered != null){
            unregisterReceiver(brSMS_has_beed_delivered);
            brSMS_has_beed_delivered = null;
        }
    } 
```

`bRSMS_has_been_sent`我的`brSMS_has_beed_delivered` 接收者在哪里？

确保你取消注册接收器，否则你有几个闲逛。

如果您想看到自己，只需使用静态变量并在每次调用发送方法时增加它并在接收器中执行日志输出。通过这种方式，您可以看到实际触发了哪个接收器。如果您注册所有接收者并且从不取消注册其中任何一个，您应该会看到多个接收者被解雇。

# ruby-on-rails - Rails 和 ajax 请求：不使用 csrf 工作？

> ID：10384566
> 
> 赞同：2
> 
> 时间：2012-04-30T13:32:55.033
> 
> 标签：ruby-on-rails, ajax, post, csrf, csrf-protection

我正在使用以下代码向 rails 发出 AJAX POST 请求：

```
 var new_note = {
    title: "New note"
  };
  $.post('/notes.json',
    {
      auth_token: auth_token,
      note: new_note
    },
    function(data, textStatus, jqXHR){
      console.log(textStatus);
      console.log(jqXHR);
      var createdNoteIndex = self.notes.push(new Note());
      self.openNote(self.notes()[createdNoteIndex - 1]);
    }, "json")
    .error(function(jqXHR, textStatus, errorThrown){
      alert("error");
      console.log(jqXHR);
      console.log(textStatus);
      console.log(errorThrown);
    }); 
```

我忘了插入 csrf 令牌，所以我认为创建操作会失败：

```
 # POST /notes.json
  def create
    @note = current_user.notes.new(params[:note])

      if @note.save
        respond_with { render json: @note, status: :created, location: @note }
      else
        respond_with { render json: @note.errors, status: :unprocessable_entity }
      end
  end 
```

但是数据库中的记录已经创建，而请求以 500 错误结束：

```
Started POST "/notes.json" for 127.0.0.1 at 2012-04-30 15:26:33 +0200
Processing by NotesController#create as JSON
  Parameters: {"auth_token"=>"zJzKxPnvx5dQDTcFWi5k", "note"=>{"title"=>"New note"}}
MONGODB (0ms) taccuino_development['users'].find({:_id=>BSON::ObjectId('4f9c670a809ad20869000002')}).limit(-1).sort([[:_id, :asc]])
MONGODB (0ms) taccuino_development['notes'].insert([{"_id"=>BSON::ObjectId('4f9e9309809ad223f5000007'), "title"=>"New note", "user_id"=>BSON::ObjectId('4f9c670a809ad20869000002')}])
Completed 500 Internal Server Error in 8ms

AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  app/controllers/notes_controller.rb:26:in `create'

  Rendered /home/matteo/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.2ms)
  Rendered /home/matteo/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /home/matteo/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (14.8ms) 
```

我没有禁用 csrf 保护，所以它应该给出一个关于令牌丢失的错误，但它没有......

**编辑：**

在阅读了两个答案后，我有：

*   删除了 jquery_ui 文件

添加此代码以替换 csrf 令牌的 jquery_ui 函数，并设置 auth_token 以进行设计：

```
 $.ajaxSetup({
    beforeSend: function(xhr, settings) {
      if (settings.crossDomain) return;              
      var csrf_token = $('meta[name="csrf-token"]').attr('content');
      var auth_token = $('meta[name="auth_token"]').attr('content');

      xhr.setRequestHeader('X-CSRF-Token', csrf_token);
      xhr.setRequestHeader('auth_token', auth_token);
    }
  }); 
```

删除了 before_file authenticate_user！来自控制器，并将与 current_user 相关的创建操作替换为不同的操作：

```
 def create
    @note = Note.new(params[:note])

      if @note.save
        respond_with { render json: @note, status: :created }
      else
        respond_with { render json: @note.errors, status: :unprocessable_entity }
      end
  end 
```

然后我禁用了 CSRF 保护，但我仍然遇到同样的错误......所以问题是另一个问题，但我真的不明白什么会导致双重重定向，因为记录是在数据库中正确创建的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:48:53.000

如果您已包含`jquery_ujs.js`在您的应用程序中，CSRF 令牌将自动添加到 AJAX 请求中。[你可以在这里](https://github.com/rails/jquery-rails/blob/master/vendor/assets/javascripts/jquery_ujs.js#L79)看到。

这也与您的顺便说一句无关`DoubleRenderError`。那是你对`respond_with`.

**编辑：**

不要禁用 CSRF 保护。只是不要。

您不需要自己添加令牌，一切都应该自动进行。

您的操作导致错误的原因是`respond_with`. 如果您只响应 json 请求，它应该是这样的：

```
# POST /notes.json
def create
  @note = current_user.notes.new(params[:note])

  if @note.save
    render json: @note, status: :created, location: @note
  else
    render json: @note.errors, status: :unprocessable_entity
  end
end 
```

但是，因为 Rails 已经知道这种模式（这是一种约定），所以您可以将其缩短为：

```
respond_to :json #, :html, :xml (optionally)

def create
  @note = current_user.notes.create(params[:note])
  respond_with @note
end 
```

更多细节`respond_with`在[这里](http://api.rubyonrails.org/classes/ActionController/MimeResponds.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:56:11.763

大约一年前，由丢失或无效的 csrf 令牌触发的行为发生了变化。新行为不是引发异常，而是重置会话，因此处理请求时就像用户未登录一样。

您可以通过在此处定义`handle_unverified_request`和实现所需的行为来控制此行为。

# java - TestNG，工厂和参数化测试描述

> ID：10384571
> 
> 赞同：1
> 
> 时间：2012-04-30T13:33:19.430
> 
> 标签：java, testing, testng, factory, parameterized

我刚刚了解到我可以嵌套 TestNG 工厂。耶！但是我不喜欢所有测试名称都相同。这是我的例子：

testng.xml：

```
<suite>
    <test name="TNGTST" >
        <classes>
            <class name="FactoryLevel1" />
        </classes>
    </test>
</suite> 
```

FactoryLeve1.java：

```
import org.testng.annotations.Factory;
public class FactoryLevel1 {
    @Factory
    public Object[] createTest() {
        Object[] res = new Object[3];
        for (int i = 1; i <= 3; i++)
            res[i - 1] = new FactoryLevel2(i);
        return res;
    }
} 
```

FactoryLeve2.java：

```
import org.testng.annotations.Factory;
public class FactoryLevel2 {
    int inst;
    public FactoryLevel2(int inst) {
        this.inst = inst;
    }
    @Factory
    public Object[] createTest() {
        Object[] res = new Object[10];
        for (int i = 1; i <= 10; i++)
            res[i - 1] = new TestClass(i * inst);
        return res;
    }
} 
```

TestObj.java：

```
import org.testng.annotations.Test;
public class TestObj {
    int inst;
    public TestObj(int inst) {
        this.inst = inst;
    }
    @Test
    public void printMethod() {
        System.out.println("Instance: " + inst);
    }
} 
```

我的问题是 Intellij IDEA 显示所有带有名称的测试`TNGTST [printMethod()]`，我猜 Jenkins 会为所有测试显示类似的东西（我不知道这些工具是如何获得它的）。**我可以以某种方式以非静态方式**为测试创建自己的名称吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:50:34.227

让您的测试类实现`org.testng.ITest`并覆盖`getName()`以返回您想要的。我相信 IDEA 尊重这一点（不是 100% 肯定，试试吧）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-05T15:34:47.290

Cedric Beust 的解决方案是正确的（实施`org.testng.ITest`）。

该方法称为**getTestName**：

```
@Override
public String getTestName() {
    return "custom_" + i++;
} 
```

IDEA 14 授予它：

[![带有描述和 IDEA 14 的 TstNG](../Images/e44f2a64f7e7dcae1adc9fe8abbc6048.png)](https://i.stack.imgur.com/p8Ive.png)

# c++ - 为什么 bind() 有时会在对方连接时给出 EADDRINUSE？

> ID：10384575
> 
> 赞同：4
> 
> 时间：2012-04-30T13:33:43.710
> 
> 标签：c++, sockets, udp, bind

在我的 C++ 应用程序中，我将 ::bind() 用于 UDP 套接字，但在极少数情况下，由于连接丢失而重新连接后，即使重试多次，我也会收到 errno EADDRINUSE。将接收数据的 UDP 连接的另一端重新连接良好并等待 select() 指示有要读取的内容。

我想这意味着本地端口正在使用中。如果为真，我怎么会泄漏本地端口，以便另一端可以正常连接？这里真正的问题是另一端连接正常并且正在等待，但这一端卡在 EADDRINUSE 上。

- 编辑 -

这是一个代码片段，显示我已经在我的 TCP 套接字上执行 SO_REUSEADDR，而不是在我遇到问题的这个 UDP 套接字上：

```
// According to "Linux Socket Programming by Example" p. 319, we must call
// setsockopt w/ SO_REUSEADDR option BEFORE calling bind.
// Make the address is reuseable so we don't get the nasty message.
int so_reuseaddr = 1; // Enabled.
int reuseAddrResult
  = ::setsockopt(getTCPSocket(), SOL_SOCKET, SO_REUSEADDR, &so_reuseaddr,
                 sizeof(so_reuseaddr)); 
```

这是我完成后关闭 UDP 套接字的代码：

```
void
disconnectUDP()
{
  if (::shutdown(getUDPSocket(), 2) < 0) {
    clog << "Warning: error during shutdown of data socket("
         << getUDPSocket() << "): " << strerror(errno) << '\n';
  }
  if (::close(getUDPSocket()) < 0 && !seenWarn) {
    clog << "Warning: error while closing data socket("
         << getUDPSocket() << "): " << strerror(errno) << '\n';

  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T13:38:28.807

是的，这很正常。您需要`SO_REUSEADDR`在绑定之前设置套接字，例如在 *nix 上：

```
int sock = socket(...);

int yes = 1;
setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, &yes, sizeof(yes)); 
```

如果您有通过创建新套接字重新连接的单独代码，请将其也设置在该套接字上。这只是与操作系统的默认行为有关——损坏的套接字上的端口会暂时失效。

*[编辑] 这不应该适用于 UDP 连接。也许您应该发布用于设置套接字的代码。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T14:24:57.423

在 UDP 中没有失去连接这样的事情，因为没有连接。您可能会丢失已发送的数据包，仅此而已。

不要重新连接，只需重用现有的`fd`.

# java - 在没有 RoundingMode 的 BigDecimal 数字中检索点之后的数字

> ID：10384581
> 
> 赞同：2
> 
> 时间：2012-04-30T13:34:16.987
> 
> 标签：java, bigdecimal

如何在 BigDecimal 中仅保留 3 个值？

我找到了一个解决方案，但它需要一个 RoundingMode

```
 BigDecimal d = BigDecimal.valueOf(0.5649);
    System.out.println(d.remainder(BigDecimal.ONE));
    System.out.println(d.remainder(BigDecimal.ONE).divide(BigDecimal.valueOf(1), 3, RoundingMode.CEILING)); 
```

我想保持一个准确的数字而不四舍五入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:37:34.377

只需使用 setScale 和 RoundingMode.DOWN

> 舍入模式向零舍入。从不增加丢弃分数之前的数字（即截断）。

例如

```
BigDecimal.valueOf(0.5649).setScale(3, RoundingMode.DOWN) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:42:32.740

BigDecimal 不打算用于此类限制。只需要 3 位小数是一个奇怪的要求。也许您只想向用户显示 3 位小数？

如果是这样，我建议使用：`java.text.DecimalFormat`

如果你真的想确保你永远不会用比小数点后 3 位更高的精度进行计算，我建议你自己制作代表/班级。在内部，您将值保存为`long`（或适当的类/原语），但值是实际值的 1000 倍。所有的计算都是通过内部表示完成的，当被要求输入一个值时，将内部值除以 1000.0d 并转换为`double`（或适当的）并返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:32:20.637

我会用`double`这个。

```
double d = 0.5649;
d = (long) (d * 1000) / 1000.0; // round down.
System.out.println(d); 
```

印刷

```
0.564 
```

或者

```
d = (long) (d * 1000 + 0.5) / 1000.0; // round half up. 
```

# css - CSS/HTML 水平对齐 div

> ID：10384591
> 
> 赞同：3
> 
> 时间：2012-04-30T13:35:32.273
> 
> 标签：css, alignment

所以我需要 div 水平对齐并填充上一行留下的空白，如下所示：

![http://i45.tinypic.com/eqrudv.jpg](../Images/67a98b33f3deb11d98c7632e53d4ae57.png)

这可以实现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T13:38:40.880

使用纯 CSS 无法自动执行此操作，但 Javascript 可以帮助您。有一个名为[Masonry](http://masonry.desandro.com/)的好图书馆，它完全可以满足您的需求。

# jquery - 如何从href中提取名称属性？

> ID：10384592
> 
> 赞同：0
> 
> 时间：2012-04-30T13:35:32.977
> 
> 标签：jquery

在这方面还是新的......对不起！我有一个用于多个页面的模板，每个页面的功能都不同。如中，布局看起来相同，但页面可能用于设计、上传、定价或获取模板。

如果他们知道他们的产品尺寸，左边是一个按钮。点击按钮将他们带到基于他们需要的适当页面（即，如果他们点击上传按钮，则上传页面）。该按钮是动态的，模板如下：

```
<a id="sg-start-button" class="button blue" href="javascript:void(0);" name="<?php echo $guide_action; ?>">Start Designing!</a> 
```

并且脚本应该从“名称”属性中提取值并采取相应的行动。

我只是不确定如何指定 jquery 来查看该值。这是我所拥有的：

```
$('#sg-start-button').click(function() {
    var $guide_action = $('#sg-start-button').I NEED THIS();
    if($guide_action == 'design') start_action(0);
    if($guide_action == 'upload') start_action(1);
    if($guide_action == 'template') start_action(2);
    if($guide_action == 'price') start_action(3);
}); 
```

我尝试了 attr 标签 (.attr('name')) 但不是这样。感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:37:29.227

```
$('#sg-start-button').click(function() 
{
    console.log($(this).prop('name'));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T13:36:44.690

```
$('#sg-start-button').click(function() {
  console.log($(this).attr('name'));
  console.log($(this).attr('href'));
}); 
```

我想你想要这样的东西：

```
$('#sg-start-button').click(function(e) {
    e.preventDefault();
    var $guide_action = $(this).attr('name');
    if($guide_action == 'design') start_action(0);
    if($guide_action == 'upload') start_action(1);
    if($guide_action == 'template') start_action(2);
    if($guide_action == 'price') start_action(3);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:41:04.797

`attr("name")`作品。看看[这个 jsfiddle](http://jsfiddle.net/gopi1410/Z7gG9/)

```
$('#sg-start-button').click(function() {
  var guide_action = $('#sg-start-button').attr("name");
  alert(guide_action);
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T13:43:01.653

你应该使用 attr() 方法。

所以你的代码看起来像：

```
$('#sg-start-button').click(function() {

     var $guide_action = $('#sg-start-button').prop('name');

     switch($guide_action) {

        case 'design':
          start_action(0);
          break;

        case 'upload':
          start_action(1);
          break;

        case 'template':
          start_action(2);
          break;

        case 'price':
          start_action(3);
          break;

    }

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T13:43:43.847

在您的示例中，您应该使用`prop()`：

```
$('#sg-start-button').click(function() {
    var guideAction = $(this).prop('name')
}); 
```

`data-x`但是，IMO 使用属性会更具语义性，如下所示：

```
<a id="sg-start-button" class="button blue" href="#" data-guide-action="<?php echo $guide_action; ?>">Start Designing!</a> 
```

```
$('#sg-start-button').click(function(e) {
    e.preventDefault();
    var guideAction = $(this).data("guide-action")
}); 
```

# c# - 字符串正则表达式帮助 C#

> ID：10384595
> 
> 赞同：-3
> 
> 时间：2012-04-30T13:35:40.370
> 
> 标签：c#, regex

我正在尝试创建一个读取字符串的正则表达式，如果最后一个字符类似于 !"£$% 等，它会忽略最后一个字符，读取字符串（以允许我的代码在字典类中查找它) 然后输出字符串，最后的字符被忽略。这实际上是可能的，还是我必须删除最后一个字符？

至今...

```
foreach(var line in yourReader)
{
    var dict = new Dictionary<string,string>(); // your replacement dictionaries
    foreach(var kvp in dict)
    {
        System.Text.RegularExpressions.Regex.Replace(line,"(\s|,|\.|:|\\t)" + kvp.Key + "(\s|,|\.|:|\\t)","\0" + kvp.Value + "\1");
    }
} 
```

我也被告知要试试这个

```
var trans = textbox1.Text;

foreach (var kvp in d) //d is my dictionary so use yours
{
     trans = trans.Replace(kvp.Key, kvp.Value);
}

textbox2.Text = trans; 
```

但实际上不知道它做了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:33:19.623

我没有发现使用正则表达式的任何意义，所以我希望这会有所帮助：

```
 const int ARRAY_OFFSET = 1;

        List<char> ForbiddenChars = new List<char>()
        {
            '!', '@', '#', '$', '%', '^', '&', '*', '£' //Add more if you'd like
        };

        string myString = "Hello World!&";

        foreach (var forbiddenChar in ForbiddenChars)
        {
            if (myString[myString.Length - ARRAY_OFFSET] == forbiddenChar)
            {
                myString = myString.Remove(myString.Length - ARRAY_OFFSET);
                break;
            }
        } 
```

**编辑：**

我检查了旧代码，它有一个问题：当字符串的最后一个“禁止”字符按`ForbiddenChars`数组顺序时，它会删除所有这些字符。如果您的字符串是“Hello World&!” 它会删除两个！和 ＆。所以我设置了一个`break;`，这将不再是一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:39:14.473

看看[Regex.Replace](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace.aspx)。一个正则表达式，如`[!"£$%]$`应该做你需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:15:51.067

在您的情况下，我建议对一系列字符使用正则表达式来删除 !"£$% 等。

你想在你的情况下使用它的方式是这样的：

```
"<the bit you want to capture>(?:[!-%]\\r)" 
```

该`(?:[!-%]\\r)`位匹配但不存储范围 !-% 中的单个字符，该字符正好位于回车符之前。

我还建议使用这个方便的 reg ex 表达式备忘单：

[http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)

# cordova - 如何将 Sencha Touch 2 集成到 Cordova (Phonegap) 项目中

> ID：10384596
> 
> 赞同：3
> 
> 时间：2012-04-30T13:35:44.720
> 
> 标签：cordova, sencha-touch-2

我正在尝试将 ST2 应用程序集成到 PhoneGap 中；但我遇到了问题。

我已将 cordova.js 添加到 app.json 中：

```
{   
    "path": "resources/js/cordova-1.6.1.js",
    "update": "delta"
},
{   
    "path": "resources/js/test.js",
    "update": "delta"
} 
```

测试.js：

```
function alertDismissed() {}

function showAlert() {
    navigator.notification.alert(
        'You are the winner!',  // message
        alertDismissed,         // callback
        'Game Over',            // title
        'Done'                  // buttonName
    );
} 
```

在视图中，我创建了一个虚拟按钮：

```
items: [{
    text: 'test',
    action: showAlert(),
}], 
```

当我点击按钮时；函数“showAlert()”被正确启动；但没有正确执行我有一个错误：

```
Uncaught TypeError: Cannot call method 'alert' of undefined 
```

显然是因为对象“导航器”没有被执行。

问题：是否可以同时运行 cordova/senchatouch2 ？如果是这样，正确的方法是什么？

解决了：

在 app.js 之前添加 cordova.js

```
 {   
        "path": "resources/js/cordova-1.6.1.js",
        "update": "delta"
    },
    {
        "path": "sdk/sencha-touch.js"
    },
    {
        "path": "app.js",
        "update": "delta"
    }, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:37:40.133

只需包含 index.html 文件中的 cordova.js 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T02:46:24.480

这是一篇关于“**带有 PhoneGap 的 Sencha Touch MVC 应用程序**”的好文章[http://www.sencha.com/learn/a-sencha-touch-mvc-application-with-phonegap/](http://www.sencha.com/learn/a-sencha-touch-mvc-application-with-phonegap/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T05:47:11.377

您可以参考以下博客将 senchatouch 和 phonegap 与自定义插件集成：

[http://hynridmobileapps.blogspot.in/](http://hynridmobileapps.blogspot.in/)

# google-maps-api-3 - google maps api v3：处理用户点击地图类型控制？

> ID：10384597
> 
> 赞同：2
> 
> 时间：2012-04-30T13:35:48.170
> 
> 标签：google-maps-api-3, controls, dom-events

我需要处理当用户点击的情况与`mapTypeControl`设置时不同的情况`map.setMapTypeId()`。如何收听地图类型控件的点击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:02:16.313

您无法侦听默认 UI 控件集上的事件。但是，如果您严格专注于区分`mapTypeControl`and的点击`map.setMapTypeId()`，您可以使用您控制可能调用的代码`setMapTypeId()`并添加一些状态管理代码的事实：

```
// First, add a new state var:
var typeIdChangedInCode = false;

// Then, anywhere in your code where you call setMapTypeId(), add this:
typeIdChangedInCode = true;
map.setMapTypeId( newTypeId ); 

// Finally, include state checking code in the map event listener:
google.maps.event.addListener( map, "maptypeid_changed", function( evnt ) {
    if ( typeIdChangedInCode ) {
        //handle the scenario in the non-click way, but REMEMBER TO:
        typeIdChangedInCode = false;
    }
    else {
        //handle the scenario in the map click way
    }
}); 
```

这应该使您能够以您需要的方式处理两种不同的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:51:59.493

```
 google.maps.event.addListener(map, 'maptypeid_changed', function(e){
           alert(map.getMapTypeId());
   }); 
```

# .net - WPF的Binding引擎在转换值时有哪些特殊值？

> ID：10384599
> 
> 赞同：7
> 
> 时间：2012-04-30T13:35:56.700
> 
> 标签：.net, wpf, ivalueconverter, imultivalueconverter

我已经知道可以从 IValueConverter 实现返回的[Binding.DoNothing](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.donothing.aspx)以表示不应发生其他操作。

但是，我找不到参考或文档很好地总结了其他特殊值是什么 - 例如返回后备值。这些是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-30T14:10:11.570

[`Binding.DoNothing`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.donothing.aspx)是*您从值转换器主动返回*的对象实例；它指示绑定引擎根本不更新目标属性的值。这是 Josh Smith 的[一个很好的例子](http://joshsmithonwpf.wordpress.com/2007/08/20/prevent-a-binding-from-updating-too-frequently/)，说明你可以用它做什么。

[`FallbackValue`](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.fallbackvalue.aspx)是您在绑定上设置的属性；它允许您在以下情况下指定要应用于目标属性的值：

*   无法解析绑定源（例如错误的绑定路径），或者
*   绑定属性值等于[`DependencyProperty.UnsetValue`](http://msdn.microsoft.com/en-us/library/system.windows.dependencyproperty.unsetvalue.aspx)，或
*   用于绑定的值转换器引发异常，或
*   用于绑定返回的值转换器`DependencyProperty.UnsetValue`，或
*   绑定管道生成的值对目标属性无效（例如错误类型）

[`TargetNullValue`](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.targetnullvalue.aspx)也是您在绑定上设置的属性；如果源属性的值为 ，它允许您指定要应用于目标属性的值`null`。例如，如果将文本框绑定到字符串属性`TargetNullValue`，如果源字符串为`null`.

# c++ - 在单独的文件中创建类（初学者）

> ID：10384602
> 
> 赞同：3
> 
> 时间：2012-04-30T13:36:18.653
> 
> 标签：c++, class, static-libraries

我对 C++ 真的很陌生，我试图在一个单独的文件中创建一个类，我遇到了一个问题。我基本上从 newboston 逐字复制了教程[http://thenewboston.org/watch.php?cat=16&number=15 。](http://thenewboston.org/watch.php?cat=16&number=15)但是，因为事情不起作用。尝试运行主文件时出现此错误：

```
C:\Users\Akavall\Desktop\C++ Stuff\New C++ stuff\class_try.o:class_try.cpp|| undefined reference to `Burrito::Burrito()'|
||=== Build finished: 1 errors, 0 warnings ===| 
```

另外，当我创建课程时。**工作区**图标是独立的，而它应该（我相信）包括我刚刚创建的类的 .cpp 和 .h 文件夹。

我的猜测是我的路径在某处没有正确设置，但我不知道如何解决这个问题。有什么建议么？

这是我正在使用的代码：

主文件 (class_try.cpp)

```
#include <iostream>
#include "Burrito.h"

using namespace std;

int main()
{

    Burrito bo;
    return 0;
} 
```

类文件：Burrito.h

```
#ifndef BURRITO_H
#define BURRITO_H

class Burrito
{
    public:
        Burrito();

};

#endif // BURRITO_H 
```

墨西哥卷饼.cpp

```
#include "Burrito.h"
#include <iostream>

using namespace std;

Burrito::Burrito()
{
    cout<<"something silly"<<endl;
} 
```

我应该怎么做才能解决这个问题？

先感谢您

编辑：

我正在使用 CodeBlocks，并且我在 32 位 Windows 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:03:55.130

如果您像链接的教程那样使用 MSVC，则需要首先创建一个项目。创建项目后，添加要在其中包含/编译的所有头文件 (.h) 和源文件 (.cpp/.cxx)。现在，MSVC 从这一点开始让这一切变得容易；您可以简单地编译（只要所有内容都正确添加到您的项目中），它会为您编译。

**额外信息** 下面的信息与这个问题没有直接关系（或者至少看起来不是这样，因为您使用的是 Windows），但如果您愿意，它们旨在帮助您作为开发人员的成长。

但是，如果您决定使用命令行编译器（即 MingW）或在 *nix 环境中工作，请务必注意您需要显式编译每个对象（无需链接；在 gcc/mingw 中，此标志为`-c`） . 然后在编译几个未链接的对象结束时，将所有对象和主源文件一起编译（这次是链接），它将创建一个可执行文件。

但是，我建议在尝试使用命令行编译器之前，让您熟悉/熟悉通过 IDE 执行此过程。因为无论如何它通常是一个自动化的过程（即大多数开发人员最终都会为这种事情编写 Makefile，实际上）你不会因为不这样做而真正失去太多（立即，无论如何）。这只是你学习时要注意的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-02T05:54:47.820

使用命令行编译器你可以试试这个：

```
g++ class_try.cpp Burrito.cpp -o executable_name 
```

这将链接您的两个 .cpp 文件并创建一个可执行文件，您只需键入即可运行该可执行文件

```
./executable_name 
```

# iphone - 在后台调用方法以获取 Facebook 通知和 Twitter 提及

> ID：10384606
> 
> 赞同：0
> 
> 时间：2012-04-30T13:36:36.467
> 
> 标签：iphone, facebook-graph-api, twitter, nsthread

我想在后台调用一个方法来检查 Facebook 和 Twitter 的新通知和提及。我怎样才能做到这一点 ？目前我在视图上调用方法只会出现在主视图中。如果有任何通知，那么我还必须显示徽章计数。我是否应该为此目的使用 NSThread。我不太了解 NSThreads。

请帮忙

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:08:56.223

您可以根据您的要求使用 NSOperationQueue。它同时执行一组 NSOperation 对象。并实现一个委托方法来更新徽章。

[http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW1](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW1)

# tree - 序言括号

> ID：10384609
> 
> 赞同：0
> 
> 时间：2012-04-30T13:36:53.253
> 
> 标签：tree, prolog, brackets

我在 Prolog 中处理树木；树节点使用形式为*Left-NodeValue-Right*或*nil*的术语表示。为了强制执行优先级，使用圆括号。请注意，圆括号至关重要，因为树 (nil-5+nil)-3+nil 和 nil-5+(nil-3+nil) 显然不同。我的问题是：如何处理括号？

我尝试的一种解决方案是使用 concat_atom(+List,-Atom)。但是表达式 [(,nil,)] 显然会给出错误，并且 ['(',nil,')'] 会产生原子'(nil)'，而不是 (nil)。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:33:43.820

首先，您为什么选择如此不寻常的代表？用三元项表示内部节点似乎更合适`node(Left, Value, Right)`。您改为将其表示为`-(-(Left, Value), Right)`，这似乎有点不合适。至于您的问题：要强制执行优先级，只需在写下该术语时自己使用括号即可。Prolog 顶层将在答案中自动以“正确”的方式打印术语，我认为不需要使用 concat_atom/2，或者如果有，请解释为什么不能直接输入术语。

# c++ - 将嵌入的资源保存到文件系统

> ID：10384610
> 
> 赞同：4
> 
> 时间：2012-04-30T13:36:57.140
> 
> 标签：c++, winapi

我使用此代码加载嵌入式资源（位图图像​​）

```
HRSRC hResInfo = ::FindResource(hInstance, MAKEINTRESOURCE(resourceId), RT_BITMAP);
HGLOBAL hRes = ::LoadResource(hInstance, hResInfo);
LPVOID memRes = ::LockResource(hRes);
DWORD sizeRes = ::SizeofResource(hInstance, hResInfo); 
```

它工作正常。

如何将其保存到文件**C:\image.bmp**？

此代码仅创建空文件：

```
HANDLE hFile = ::CreateFile(L"C:\\image.bmp", GENERIC_WRITE, 0, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);
DWORD dwWritten = 0;
::WriteFile(hFile, memRes, sizeRes, &dwWritten, NULL);
::CloseHandle(hFile); 
```

**解决方案：**
在资源中创建新类型“BMP”并放置图像
HRSRC hResInfo = FindResource(hInstance, MAKEINTRESOURCE(resourceId), **_T("BMP")** );

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:49:15.273

`CreateFile()`, `WriteFile()`, 和`CloseHandle()`.

`WriteFile()`需要一个指针和一个大小，因此可以直接从锁定的资源写入。

# android - Android Canvas.drawPicture 不适用于带有冰淇淋三明治的设备

> ID：10384613
> 
> 赞同：3
> 
> 时间：2012-04-30T13:37:00.260
> 
> 标签：android, canvas, android-4.0-ice-cream-sandwich, hardware-acceleration

我想在 a`Picture`上画一个`Canvas`by

```
mCanvas.drawpicture(mPicture, mRect) 
```

使用目标 API 7 `<uses-sdk android:minSdkVersion="7"/>`，它在 API<14 的设备中完美运行，但在具有冰淇淋三明治的设备中，它不起作用。显然这是因为硬件加速不支持 canvas.drawPicture：[不支持的绘图操作](http://developer.android.com/guide/topics/graphics/hardware-accel.html) 我试图通过禁用清单中的硬件加速来解决这个问题：

```
<application android:hardwareAccelerated="false" ...> 
```

但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T11:58:27.703

我有同样的问题，并通过仅在将绘制的视图上以编程方式关闭硬件加速来解决`Picture`

```
view.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

但是[setLayerType](http://developer.android.com/reference/android/view/View.html#setLayerType%28int,%20android.graphics.Paint%29)自 API 11 起才受支持。因此请改用此方法：

```
public static void setHardwareAccelerated(View view, boolean enabled){
    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
        if(enabled)
            view.setLayerType(View.LAYER_TYPE_HARDWARE, null);
        else view.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T13:56:09.857

尝试替换`drawPicture`为`drawBitmap`. 语法几乎相同，您只需要传递一个源矩形（只需使其成为图像的大小）和一个绘画（如果您不编辑图像可以为空）。

# batch-file - 使用 psexec 的 dos 批处理脚本每次循环时都会显示“帮助”文本

> ID：10384614
> 
> 赞同：0
> 
> 时间：2012-04-30T13:37:00.993
> 
> 标签：batch-file, dos, psexec

目前正在编写一个脚本来 ping /24 子网上的每个主机，然后执行另一个脚本，该脚本在那些在线的机器上运行 psexec。ping 扫描脚本称为 ping.bat，而在机器上实际运行 psexec 的另一个脚本称为 deploy_mir.bat。我可以简单地在远程主机上运行 deploy_mir.bat，它运行起来没有问题。

我遇到的问题是每次 mir.bat 运行时，它本身包含一个循环，它会在 cmd 窗口中显示 psexec 的帮助信息。据我所知，一切正常，除了每次运行 mir.bat 内部的循环时，我的 cmd 窗口都会充满 psexec 的帮助信息。我没有启用@echo，并不是说它会导致这种情况。

希望快速修复，但如果需要我的代码来获得答案，请发布它。

无论如何发布代码...

```
@echo on

setlocal EnableDelayedExpansion

set /p ipAddress="enter ip address: "

for /l %%i in (1,1,255) do (
ping -n 1 %ipAddress%.%%i | find "TTL" > nul

if !errorlevel! == 0 (
call deploy_mir.bat %ipAddress%.%%i
)
)

endlocal 
```

**deploy_mir.bat 代码**

```
@ECHO OFF

echo "Mir Agent deployment to: %1"

rem net use T: \\%1\C$ /user:administrator "password"
net use T: \\%1\C$ /user:administrator "username"

copy /y conf.xml T:\WINDOWS\
copy /y setup_mir.bat T:\WINDOWS\
net use t: /delete

rem psexec \\%1 -i -u administrator -p "password" c:\windows\setup_mir.bat
psexec \\%1 -i -u administrator -p "username" c:\windows\setup_mir.bat 
```

运行 deploy_mir.bat 所需的 cmd 行结果

```
C:\DOCUME~1\socuser2\MIR>deploy_mir.bat 10.180.145.66
"Mir Agent deployment to: 10.180.145.66"
The command completed successfully.

        1 file(s) copied.
        1 file(s) copied.
        1 file(s) copied.
t: was deleted successfully.

PsExec v1.94 - Execute processes remotely
Copyright (C) 2001-2008 Mark Russinovich
Sysinternals - www.sysinternals.com

c:\windows\setup_mir.bat exited on 10.180.145.66 with error code 0.

C:\DOCUME~1\socuser2\MIR> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:58:12.187

只是一个建议。不确定它是否会解决您的问题，但可能会提供一些指导：

我的第一步将是一个小测试，通过在某些测试批处理文件上显式调用 psexec 代替调用 deploy_mir.bat %ipAddress%.%%i 行。如果没有出现帮助消息，因为 deploy_mir.bat 可以自行查找，请尝试将其内容显式放置在同一行调用 deploy_mir.bat %ipAddress%.%%i 的位置。如果可行，那么我们一直在替换的上述行中存在一些问题。我相信 dos / batch 将从这行代码中打开一个子 shell 并在该范围内运行它的代码。这可能是导致问题的原因。只是猜测提供的信息。

代码特定说明：

@echo 已启用，但您说这不在您的问题中。！错误级别！== 0 应该是 !errorlevel! 方程 0

一些一般说明：

通常，我曾经将参数传递给带引号的批处理脚本，然后在批处理脚本中去掉引号`%~1`。对于 if 条件类似，如 !someVar! == a 如果 someVar 未设置/为空，则会抛出错误，而 "!someVar!" == "a" 将不符合 if 条件的标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:01:42.667

我不知道为什么从循环外调用它时它会起作用。但是`psexec`deploy_mir.bat 中的行应该有`cmd /c`.

```
psexec \\%1 -i -u administrator -p "username" cmd /c c:\windows\setup_mir.bat 
```

# cocoa - NSComboBox 显示来自属性的核心数据实体绑定的唯一项目

> ID：10384615
> 
> 赞同：2
> 
> 时间：2012-04-30T13:37:02.267
> 
> 标签：cocoa, cocoa-bindings, nsarraycontroller, nscombobox

`NSTableView`我有一个典型的 Mac CoreData 应用程序，它`NSArrayController`在`NSTableView`. 我有一个`Entity`(Pigeon) ，其`NSString`属性 (color) 显示在 中`NSComboBox`，以便用户可以输入自己的颜色字符串或从下拉列表中选择先前选择的颜色。这是通过绑定 to 的内容值来完成`NSComboBox`的`Pigeons.arrangedObjects.colour`。这太接近我想要的了，但是因为它是鸽子存在的所有颜色的数组（而不是一组），重复值列在下拉列表中`NSComboBox`. 因此，例如，如果为一只鸽子的颜色输入了蓝色，并且也为第二只鸽子选择了它，那么蓝色会在列表中显示两次。

有没有办法以某种方式过滤它以删除重复值？我已经尝试制作第二个`NSArrayController`绑定到`Pigeons.arrangedObjects.colour`并设置一个`NSPredicate`来过滤它，但我似乎无法找出一个`NSPredicate`过滤掉重复值的方法。我想对颜色的值使用绑定，以便在应用程序运行时，如果添加或删除颜色（可能在输入颜色时出错），那么下拉列表将更新为只有当前为鸽子输入的颜色值。

不显示这些重复值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T00:56:03.730

我在打电话，有点懒，但我认为您正在寻找一个看起来像这样的键路径：@“@distinctunionofobects.someproperty”...或谷歌键路径运算符。

# java - IllegalStateException：这是什么意思？

> ID：10384616
> 
> 赞同：0
> 
> 时间：2012-04-30T13:37:02.193
> 
> 标签：java, illegalstateexception

有人可以解释为什么我会收到以下错误吗？

> 线程“AWT-EventQueue-0”java.lang.IllegalStateException 中的异常：在 java.awt.Component.addNotify 处调用 java.awt.Container.increaseComponentCount(Container.java:3978) 处的 increaseComponentCount() 方法时，Peer 不存在(Component.java:6917) 在 java.awt.Container.addNotify(Container.java:2758) 在 javax.swing.JComponent.addNotify(JComponent.java:4743) 在 java.awt.Container.addImpl(Container.java: 1114) 在 javax.swing.CellRendererPane.addImpl(CellRendererPane.java:106) 在 java.awt.Container.add(Container.java:410) 在 javax.swing.CellRendererPane.paintComponent(CellRendererPane.java:134) 在 javax。 swing.plaf.basic.BasicTableUI.paintCell(BasicTableUI.java:2115) 在 javax.swing.plaf.basic.BasicTableUI.paintCells(BasicTableUI.java:2016) 在 javax.swing.plaf.basic。BasicTableUI.paint(BasicTableUI.java:1812) at javax.swing.plaf.ComponentUI.update(ComponentUI.java:161) at javax.swing.JComponent.paintComponent(JComponent.java:778) at javax.swing.JComponent.paint (JComponent.java:1054) 在 javax.swing.JComponent.paintToOffscreen(JComponent.java:5221) 在 javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295) 在 javax.swing.RepaintManager.paint(RepaintManager.java: 1206) 在 javax.swing.JComponent._paintImmediately(JComponent.java:5169) 在 javax.swing.JComponent.paintImmediately(JComponent.java:4980) 在 javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770) 在 javax。 swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728) 在 javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677) 在 javax.swing。在 java.awt 的 java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251) 的 javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621) 的 RepaintManager.access$700(RepaintManager.java:59)。 EventQueue.dispatchEventImpl(EventQueue.java:705) 在 java.awt.EventQueue.access$000(EventQueue.java:101) 在 java.awt.EventQueue$3.run(EventQueue.java:666) 在 java.awt.EventQueue$3。在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) 在 java.awt.EventQueue.dispatchEvent(EventQueue.java:675) 在 java.security.AccessController.doPrivileged(Native Method) 运行(EventQueue.java:664) ) 在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128) 在 java.awt.java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)。EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:121) at java.awt.WaitDispatchSupport$2.run(WaitDispatchSupport.java:182) at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:221) at java.security.AccessController.doPrivileged （本机方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:41:26.820

我的猜测是你有一些线程问题。您是否有任何机会错误地覆盖 addNotify() ？

[http://mindprod.com/jgloss/addnotify.html](http://mindprod.com/jgloss/addnotify.html)

# c# - 如何远程强制会员用户注销 asp.net？

> ID：10384618
> 
> 赞同：0
> 
> 时间：2012-04-30T13:37:06.603
> 
> 标签：c#, asp.net

我想让管理员角色的成员强制任何用户在没有交互的情况下注销。

比方说，我想在 gridView 中获取所有在线用户的列表，然后通过选择其中一个用户，该用户将被注销。

为了注销选定的用户，我在选择按钮单击中写了什么？

# cryptography - ECDSA 的椭圆曲线：选择“生成器”

> ID：10384623
> 
> 赞同：6
> 
> 时间：2012-04-30T13:37:22.757
> 
> 标签：cryptography, elliptic-curve

`G(Gx, Gy)`-- 也称为**生成器**-- 是有限域上椭圆曲线 ( *EC ) 上的一个点。*有限域大小 = `p`-- 素数模数。

假设我们有一个*EC(Fp)*：`y**2 = x**3 + ax + b (mod p)`
应该如何`G`选择它的点？

是否必须在*EC(Fp)*上找到每个点，然后选择其中之一？
或者`Gx`\`Gy`必须以某种方式具体？

我唯一知道的是：`G`的顺序必须是素数。

*PS* 对不起我的英语，谢谢。

# jquery-ui - 启用 jQuery 自动完成自动填充

> ID：10384628
> 
> 赞同：1
> 
> 时间：2012-04-30T13:37:39.730
> 
> 标签：jquery-ui, autocomplete, autofill

我正在使用核心 jQuery UI 自动完成功能，它运行良好，但我需要在输入时填写输入字段。

例如，如果我输入 Ger 国家名称的其余部分（很多）应该显示为灰色。我用黑色输入的文字。

如何使用核心插件实现这一目标？我相信它被称为自动填充，但我测试过的所有 3rd 方插件都不能完全工作。

# c++ - 用空格初始化 char 数组

> ID：10384632
> 
> 赞同：9
> 
> 时间：2012-04-30T13:37:44.237
> 
> 标签：c++, c, string, char

我想要一个用空格填充的 20 个字符的 NULL('\0') 终止字符串。

目前我正在按照以下方式进行操作

```
char foo[20];  
for (i = 0; i < num_space_req; i++)        //num_space_req < 20  
{  
    foo[i] = ' ';  
}

foo[num_space_req] = '\0'; 
```

上面有没有更好的方法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-30T13:39:32.207

您可以使用以下内容将数组初始化为空格：

```
memset(foo, ' ', num_space_req);
foo[num_space_req] = '\0'; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-30T13:46:19.367

```
std::string foo(num_space_req,' '); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-30T13:44:29.397

由于问题有一个 C++ 标签，惯用的方法是：

```
std::fill(foo, foo + num_space_req, ' ');
// or
std::fill_n(foo, num_space_req, ' '); 
```

请注意，它在 C 中不起作用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T13:40:52.047

你可以用`memset`这种东西。

```
memset (foo, ' ', num_space_req) 
```

[http://www.cplusplus.com/reference/clibrary/cstring/memset/](http://www.cplusplus.com/reference/clibrary/cstring/memset/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-30T13:44:58.117

正如[@OliCharlesworth](https://stackoverflow.com/a/10384653/1119701)所说，最好的方法是使用`memset`：

```
char bla[20];

memset(bla, ' ', sizeof bla - 1);
bla[sizeof bla - 1] = '\0'; 
```

请注意，在 GNU C 中，您还可以使用以下扩展（范围指定初始值设定项）：

```
char bla[20] = {[0 ... 18] = ' ', [19] = '\0'}; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-30T16:08:07.333

如果你想在编译时初始化数组，你可以修改你的 char`foo[20];`声明如下：

`char foo[20] = {0x20};`

如果您需要在运行时将数组初始化为空格，则可以使用以下内容：

```
memset(foo, ' ', sizeof(foo) -1);
foo[20] = '\0'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-30T13:42:25.823

memset 可能比您的 for 循环更好地优化，它可能完全相同。选择以下之一：

```
memset( foo, ' ', sizeof(foo) -1 );
memset( foo, ' ', 19 );
memset( foo, ' ', 19 * sizeof(char) ); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-30T13:42:38.353

```
#include <cstring>
void makespace(char *foo, size_t size) {
  memset((void*)&foo, ' ', size - 1);
  foo[size] = 0;
}
// ...
makespace(foo, 20); 
```

# html - 什么是最好的方法或测试网站的兼容性

> ID：10384642
> 
> 赞同：0
> 
> 时间：2012-04-30T13:38:38.447
> 
> 标签：html, css

我一直在为我志愿服务的慈善机构创建一个网站，并想检查它的浏览器兼容性，所以我一直在使用浏览器截图网站向我展示该网站在不同浏览器配置下的外观图片

我的问题是我应该寻找多少向后兼容性我目前的目标是主要浏览器的最后 5 个版本，即 chrome firefox 歌剧和 safari 是否需要确保最后 5 个版本得到支持，或者我应该瞄准假设最后 2 个版本或更兼容，代码最有可能与大多数版本兼容，但我知道 css 中的圆角等某些部分不受支持，因此大多数使用旧浏览器的人可能无法正确看到它，我是否应该让它对他们可见或只是有一个弹出框 lil youtube 说您使用旧版浏览器以获得最佳效果使用新版浏览器并将它们链接到它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:44:12.203

我们练习支持 IE 6、7、8、9、Firefox 3.6+、Chrome 15+

我们使用安装了实际浏览器的虚拟机进行测试。

但最好看看谁在访问您的网站，并迎合他们使用的内容。即使用 Google Analytics 来查看您最常用的浏览器并首先关注它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:46:08.453

实际上，这主要取决于您的目标受众。非 IE 浏览器在降低版本时不是什么大问题，因此您可能会注意到，即使它们的最后 5 个版本也完全或几乎完全（没有重大缺陷）呈现页面相同。你要照顾的是IE。在当前版本 9 中，有些人仍在使用 IE6 仍然令人难以置信，但这是一个可悲的事实。你只需要看看是否值得为这样的老歌优化你的网站。指向较新版本的链接似乎是最好的解决方案，甚至还有一些插件可以模仿本机 IE 信息工具栏。

另外，请小心使用 html5 和 css3。

更新

[在此处](http://cookbooks.adobe.com/post_Rounded_Corners___Border_Radius__css3_and_IE_versi-18564.html)查看一些有用的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:44:09.337

理想情况下，您应该使用[Microsoft Expression Web SuperPreview 之](http://expression.microsoft.com/en-us/dd565874)类的工具。这使您可以在本地安装的浏览器中并排查看您的站点。还有一项高级服务，它将在各种浏览器和版本中比较您的网站以进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T13:44:10.693

试试[browsershots.org](http://browsershots.org/)。

这是一个不错的网站，可以输出您的网站在其他浏览器中的外观图像。

# c#-4.0 - Document.BuiltInDocumentProperties 使文档变脏并提示每次保存

> ID：10384643
> 
> 赞同：0
> 
> 时间：2012-04-30T13:38:39.087
> 
> 标签：c#-4.0, ms-word, vsto, word-automation

[Document.BuiltInDocumentProperties](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.word.document.builtindocumentproperties%28v=vs.100%29.aspx)使文档变脏并提示每次保存，即使没有任何更改。

我正在尝试在文档更改事件中获取文档的模板

```
ActiveDocument.BuiltInDocumentProperties["Template"] 
```

但[ActiveDocument.CustomDocumentProperties](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.word.document.customdocumentproperties.aspx)工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:11:02.943

```
Template template = (Template)ActiveDocument.get_AttachedTemplate(); 
```

此代码还获取文档的模板，它不会使文档变脏。但仍然想知道为什么***ActiveDocument.BuiltInDocumentProperties["Template"]***会使文档变脏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:09:38.400

我不知道为什么这会使文档变脏的逻辑，也许这是一个错误。您可以通过执行以下操作来解决它。

> ActiveDocument.Saved = true;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-22T13:41:29.597

更安全：

```
dim isSaved as boolean

isSaved = activeDocument.Saved
myTemplate = ActiveDocument.BuiltInDocumentProperties("Template")
ActiveDocument.Saved = isSaved 
```

# java - 对象的队列长度

> ID：10384645
> 
> 赞同：0
> 
> 时间：2012-04-30T13:39:00.540
> 
> 标签：java

我有以下队列类：

```
class Queue
{

    private Object[] data;
    private int numOfElements;
    private int head;
    private int tail;

    Queue(int size)
    {
        if (size <= 0)
            throw new IllegalArgumentException("Size must be greater or equals 0.");

        data = new Object[size];
        head = 0;
        tail = 0;
        numOfElements = 0;
    }

    void enqueue(Object obj)
    {
        data[tail] = obj;
        tail = (tail + 1) % data.length;

        if (numOfElements < data.length)
            numOfElements++;
    }

    Object dequeue()
    {
        if (numOfElements == 0)
            throw new EmptyQueueException();

        Object dequeuedObject = data[head];
        data[head] = null;
        head = (head + 1) % data.length;

        numOfElements--;

        return dequeuedObject;
    } 
```

我这样称呼方法入队：`test_queue.enqueue(new Event(arg1, arg2));`

该`Event`对象包含两个整数，它们设置为 arg1 和 arg2 的值。`data.length`内部方法如何`enqueue`工作？如何正确获取 Event 对象的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:43:08.167

`data.length`返回您的元素数`data`，即您的数组（实例字段）。您可能正在寻找类似 C's 的东西`sizeof`，但据我所知 Java 不提供它。

你为什么要它？由于您仅在数组中存储对堆上对象的**引用**，因此每个数组元素的大小基本上是恒定的。

顺便问一下，你有没有想过使用链表或内置队列实现（[`Queue<E>`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Queue.html)）而不是数组？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:46:24.490

data.length 将只返回静态数组数据的大小，因此在这种情况下，您传递给 Queue 构造函数的大小。对于入队方法，它不需要Event元素的大小，因为数据数组本身并不存储元素，而是对元素的引用，并且无论事件是否发生，引用都是固定大小的对象字段（您提到的两个整数）实际上已被设置。

# debugging - 大量调试信息与play框架

> ID：10384648
> 
> 赞同：0
> 
> 时间：2012-04-30T13:39:19.543
> 
> 标签：debugging, logging, playframework

在运行带有调试日志记录的 de Playframework 时，我突然得到了很多非常冗长的调试信息。我不知道这是怎么发生的，也看不到如何改变它。我将 DEBUG 级别用于我自己的日志记录，但我自己的日志消息现在被框架的 DEBUG 输出吞没了，速度很快。

我所做的唯一一件事（我认为）被称为“播放依赖项”，它可能已经下载了可能永远不会下载的记录器版本等。

另外，当我自己添加一个依赖项时，我在运行“依赖项”时使用了 --verbose 命令，但这不应该影响我认为的框架本身的运行。我在文档中找不到任何内容。任何可以帮助我改变这一点的人。我附上了一个 DEBUG 输出的小样本以作说明。

（编辑：我正在使用 Play！1.2.4。无论我在配置文件中设置什么日志记录级别，调试信息都会一直显示）

> id 为 id5_，user0_.addDate 为 addDate5_，user0_.lastUpdate 为 lastUpdate5_，user0_.app_id 为 app11_5_，user0_.blocked 为 block5_，user0_.email 为 email5_，user0_.firstName 为 firstName5_，user0_.lastName 为 lastName5_，user0_.passwordHash 为password8_5_，user0_.userName 作为 userName5_，user0_.userType 作为 userType5_ 从用户 user0_ where user0_.userName=? 限制 ？14:32:26.631 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将打开 ResultSet（打开 ResultSets：0，全局：0） 14:32:26.631 [play-thread-1] DEBUG org. hibernate.loader.Loader - 结果行：EntityKey[models.User#1] 14:32:26.631 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将关闭 ResultSet（打开 ResultSets：1，全局： 1) 14:32:26.631 [play-thread-1] 调试 org.hibernate.jdbc。AbstractBatcher - 即将关闭 PreparedStatement（打开 PreparedStatements：1，全局：1） 14:32:26.631 [play-thread-1] DEBUG oheStatefulPersistenceContext - 初始化非惰性集合 14:32:26.634 [play-thread-1] DEBUG org .hibernate.jdbc.AbstractBatcher - 即将打开 PreparedStatement (打开 PreparedStatements: 0, global: 0) 14:32:26.634 [play-thread-1] DEBUG org.hibernate.SQL - 选择 user0_.id 作为 id5_, user0_.addDate as addDate5_, user0_.lastUpdate as lastUpdate5_, user0_.app_id as app11_5_, user0_.blocked as blocked5_, user0_.email as email5_, user0_.firstName as firstName5_, user0_.lastName as lastName5_, user0_.passwordHash as password8_5_, user0_.userName as userName5_ , user0_.userType as userType5_ from User user0_ where user0_.userName=? 限制 ？14:32:26.635 [play-thread-1] 调试 org.hibernate.jdbc。lastUpdate 为 lastUpdate5_，user0_.app_id 为 app11_5_，user0_.blocked 为 block5_，user0_.email 为 email5_，user0_.firstName 为 firstName5_，user0_.lastName 为 lastName5_，user0_.passwordHash 为 password8_5_，user0_.userName 为 userName5_，user0_.userType 为userType5_ 来自用户 user0_ 其中 user0_.userName=? 限制 ？14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将打开 ResultSet（打开 ResultSets：0，全局：0） 14:32:26.638 [play-thread-1] DEBUG org. hibernate.loader.Loader - 结果行：EntityKey[models.User#1] 14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将关闭 ResultSet（打开 ResultSets：1，全局： 1）14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将关闭 PreparedStatement（打开 PreparedStatements：1，全局：1）app_id 作为app11_5_，user0_.blocked 作为blocked5_，user0_.email 作为email5_，user0_.firstName 作为firstName5_，user0_.lastName 作为lastName5_，user0_.passwordHash 作为password8_5_，user0_.userName 作为userName5_，user0_.userType 作为userType5_ from User user0_ where user0_ .用户名=？限制 ？14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将打开 ResultSet（打开 ResultSets：0，全局：0） 14:32:26.638 [play-thread-1] DEBUG org. hibernate.loader.Loader - 结果行：EntityKey[models.User#1] 14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将关闭 ResultSet（打开 ResultSets：1，全局： 1）14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将关闭 PreparedStatement（打开 PreparedStatements：1，全局：1）app_id 作为app11_5_，user0_.blocked 作为blocked5_，user0_.email 作为email5_，user0_.firstName 作为firstName5_，user0_.lastName 作为lastName5_，user0_.passwordHash 作为password8_5_，user0_.userName 作为userName5_，user0_.userType 作为userType5_ from User user0_ where user0_ .用户名=？限制 ？14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将打开 ResultSet（打开 ResultSets：0，全局：0） 14:32:26.638 [play-thread-1] DEBUG org. hibernate.loader.Loader - 结果行：EntityKey[models.User#1] 14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将关闭 ResultSet（打开 ResultSets：1，全局： 1）14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将关闭 PreparedStatement（打开 PreparedStatements：1，全局：1）user0_.email 作为 email5_，user0_.firstName 作为 firstName5_，user0_.lastName 作为 lastName5_，user0_.passwordHash 作为 password8_5_，user0_.userName 作为 userName5_，user0_.userType 作为 userType5_ from User user0_ where user0_.userName=? 限制 ？14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将打开 ResultSet（打开 ResultSets：0，全局：0） 14:32:26.638 [play-thread-1] DEBUG org. hibernate.loader.Loader - 结果行：EntityKey[models.User#1] 14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将关闭 ResultSet（打开 ResultSets：1，全局： 1）14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将关闭 PreparedStatement（打开 PreparedStatements：1，全局：1）user0_.email 作为 email5_，user0_.firstName 作为 firstName5_，user0_.lastName 作为 lastName5_，user0_.passwordHash 作为 password8_5_，user0_.userName 作为 userName5_，user0_.userType 作为 userType5_ from User user0_ where user0_.userName=? 限制 ？14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将打开 ResultSet（打开 ResultSets：0，全局：0） 14:32:26.638 [play-thread-1] DEBUG org. hibernate.loader.Loader - 结果行：EntityKey[models.User#1] 14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将关闭 ResultSet（打开 ResultSets：1，全局： 1）14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将关闭 PreparedStatement（打开 PreparedStatements：1，全局：1）user0_.passwordHash as password8_5_, user0_.userName as userName5_, user0_.userType as userType5_ from User user0_ where user0_.userName=? 限制 ？14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将打开 ResultSet（打开 ResultSets：0，全局：0） 14:32:26.638 [play-thread-1] DEBUG org. hibernate.loader.Loader - 结果行：EntityKey[models.User#1] 14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将关闭 ResultSet（打开 ResultSets：1，全局： 1）14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将关闭 PreparedStatement（打开 PreparedStatements：1，全局：1）user0_.passwordHash as password8_5_, user0_.userName as userName5_, user0_.userType as userType5_ from User user0_ where user0_.userName=? 限制 ？14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将打开 ResultSet（打开 ResultSets：0，全局：0） 14:32:26.638 [play-thread-1] DEBUG org. hibernate.loader.Loader - 结果行：EntityKey[models.User#1] 14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将关闭 ResultSet（打开 ResultSets：1，全局： 1）14:32:26.638 [play-thread-1] DEBUG org.hibernate.jdbc.AbstractBatcher - 即将关闭 PreparedStatement（打开 PreparedStatements：1，全局：1）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:14:05.497

这些日志消息来自[logback](http://logback.qos.ch/)库。将 logback.xml 配置文件添加到类路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:14:34.417

您可以创建一个 log4j.properties 文件并将其放在您的 conf 文件夹中。然后根据您的要求对其进行修改。

# c# - 带有基类限定符的枚举 TryParse

> ID：10384654
> 
> 赞同：2
> 
> 时间：2012-04-30T13:39:35.493
> 
> 标签：c#, resharper

我有一个枚举（比方说 DemoEnum），我想解析这个枚举的值。我在写信

```
DemoEnum value;
if(DemoEnum.TryParse("input", out value))
{
   this.Value = value;
} 
```

现在 resharper 建议我使用基类限定符。

我只想知道使用基类限定符有什么好处？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T13:42:00.023

通常，使用尽可能通用的解决方案是一个好主意。

```
DemoEnum.TryParse("input", out value) 
```

与调用相同（您只是从继承的类而不是基类进行静态调用）：

```
Enum.TryParse<DemoEnum>("input", out value) 
```

使用基类限定符 ( `Enum`) 而不是您的特定枚举 ( `DemoEnum`) 将使您免受`DemoEnum`未来更改可能产生的副作用。现实情况是，如果您将 DemoEnum 更改为类而不更改名称，您真的只会遇到问题。

在使用类时，这通常是一个更大的问题（在这些情况下，ReSharper 会给出相同的指导）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T01:56:50.543

该`TryParse()`方法是`Enum`类中定义的静态方法。由于您的枚举继承了`Enum`类的所有内容，因此它还“继承”了静态成员。这不是真正的继承，静态成员只是从类中可见。

其他答案是错误的，因为正在为您完成一些特殊的翻译。您所做的只是从派生类访问静态成员，因为*所有*静态成员都可以通过您的枚举访问。您从中访问静态方法的标识符的类型与泛型参数是什么完全没有关系*，*只有编译器能够从它们中推断出什么（或者您明确提供）。

为了说明我的观点，请考虑以下两个枚举：

```
enum First { A, B }
enum Second { A, B }

First firstVar;
Second secondVar;
// note we're using the `First` name
First.TryParse("A", out firstVar);  // valid, firstVar <= First.A
First.TryParse("B", out secondVar); // still valid, secondVar <= Second.B

// is equivalent to
Enum.TryParse<First>("A", out firstVar); // generic type is inferred from type of firstVar
Enum.TryParse<Second>("B", out secondVar); // generic type is inferred from type of secondVar 
```

* * *

ReSharper 告诉您的是，您应该从实际定义成员的类中访问静态成员。你为什么要这样做？

考虑如果您的派生类型定义了具有相同名称的静态成员会发生什么。（在这种情况下不可能使用枚举，但通常适用于类）那么您的代码会发生什么？通过派生类访问静态成员的任何代码都将采用新值，您可能不会收到有关它的新警告。这可能是也可能不是所需的行为，因此 ReSharper 会先发制人地警告您应该使用定义它的实际类（基类）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:42:10.507

看起来 Resharper*建议*您使用 Enum.TryParse - [http://msdn.microsoft.com/en-us/library/dd783499.aspx](http://msdn.microsoft.com/en-us/library/dd783499.aspx)

我敢打赌，如果您查看 IL... DemoEnum.TryParse 只是在做一个 base.TryParse

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-30T13:49:35.413

当您编写`DemoEnum.TryParse`时，编译器会将其转换为`Enum.TryParse<DemoEnum>`. 没有功能上的区别，并且您实际上不需要与可能的副作用隔离，因为您无法在`enum`类型中定义方法，因此`TryParse`无法重新定义。我最好的猜测是这是一种风格偏好。

# django - Django send_mail 不工作

> ID：10384657
> 
> 赞同：15
> 
> 时间：2012-04-30T13:39:43.407
> 
> 标签：django, django-email

当使用发送电子邮件的视图时没有任何反应，然后我将 send_mail(...) 输入 python shell 并返回 1 但我没有收到任何电子邮件。

这是我的 settings.py

```
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_PORT = 587
EMAIL_HOST_USER = 'workorbit@gmail.com'
EMAIL_HOST_PASSWORD = 'P@ssw0rd5'
EMAIL_USE_TLS = True 
```

这是视图：

```
def send_email(request):
    send_mail('Request Callback', 'Here is the message.', 'workorbit@gmail.com',
        ['charl@byteorbit.com'], fail_silently=False)
    return HttpResponseRedirect('/') 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-30T14:32:13.993

调整您的设置：

```
DEFAULT_FROM_EMAIL = 'workorbit@gmail.com'
SERVER_EMAIL = 'workorbit@gmail.com'
EMAIL_USE_TLS = True
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_PORT = 587
EMAIL_HOST_USER = 'workorbit@gmail.com'
EMAIL_HOST_PASSWORD = 'P@ssw0rd5' 
```

调整您的代码：

```
from django.core.mail import EmailMessage

def send_email(request):
    msg = EmailMessage('Request Callback',
                       'Here is the message.', to=['charl@byteorbit.com'])
    msg.send()
    return HttpResponseRedirect('/') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-24T04:33:04.817

Google 现在提供了一种生成密码的方法，您可以将其用于需要中继邮件的应用程序。它与您通过网络邮件登录时使用的密码不同。

登录 Google 并开始使用应用密码。这允许您使用 16 位密码访问 google 服务，包括发送电子邮件的能力。请参阅下文

[https://support.google.com/accounts/answer/185833?hl=en](https://support.google.com/accounts/answer/185833?hl=en)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T04:39:39.007

如果您**不关心** *防止标头注入*：（您应该关心它：[https](https://docs.djangoproject.com/es/1.9/topics/email/#preventing-header-injection) ://docs.djangoproject.com/es/1.9/topics/email/#preventing-header-injection ，但让我们继续）

`settings.py`: _

```
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_PORT = 587
EMAIL_HOST_USER = 'user@gmail.com'
EMAIL_HOST_PASSWORD = 'pass'
EMAIL_USE_TLS = True 
```

（`views.py`示例）：

```
from django.views.generic import View
from django.core.mail import send_mail
from django.http import HttpResponse, HttpResponseRedirect

class Contacto(View):
        def post(self, request, *args, **kwargs):
            data = request.POST
            name = data.get('name', '')
            subject = "Thanks  %s !" % (name)
            send_mail(subject, data.get('message', ''), 'user@gmail.com', [data.get('email', '')], fail_silently=False)
        return HttpResponseRedirect('/') 
```

> 这是发送电子邮件的危险方式

当您第一次尝试发送电子邮件时，您会收到一封谷歌电子邮件，建议您不要这样做。您必须“激活”“安全性较低的应用程序”（[https://www.google.com/settings/security/lesssecureapps](https://www.google.com/settings/security/lesssecureapps)）并重试。第二次工作。

# mysql - 从模型进行正向工程后，如何自动执行 MySQL 脚本或例程

> ID：10384659
> 
> 赞同：5
> 
> 时间：2012-04-30T13:40:01.163
> 
> 标签：mysql, database-design, mysql-workbench, eer-model, forward-engineer

我在 MySQL Workbench 中构建了一个 EER 模型，我转发工程以创建数据库。正向工程完美运行，数据库按预期从图表创建。

除了表之外，我还包含一些存储过程（又名例程）在模型中。这些例程被设计为只运行一次，一旦数据库设置完成。它们会自动将必要的数据插入表中。

我的问题是，一旦创建表，我如何才能让正向工程过程自动调用/执行这些例程之一。

此刻，我必须对数据库进行正向工程，然后手动调用存储过程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T12:06:20.717

在工作台上的 EER 图中，右键单击一个表并选择编辑表。这将在底部打开一个带有几个选项卡的窗格。选项卡是表、列、索引、外键等。有一个选项卡称为插入。此选项卡允许您将记录插入模型数据库。

当您单击插入选项卡时，它将显示一个网格。将要插入的记录添加到此网格中。**确保提交这些记录**。例如，请参见屏幕截图。

![工作台数据插入](../Images/e45a9db84c52264dda74844aa9e583d2.png)

现在，当您在第一个屏幕上对数据库进行正向工程时，有一个选项可以生成插入语句。勾选选项正向工程师，您要插入的数据将在您创建模型时编写脚本。保存脚本，这样您就可以一遍又一遍地运行它，而无需进入 MySQL 工作台。

![勾选插入选项](../Images/dfd03db2a89a3483237ed9d953601b18.png)

我没有在工作台中找到更新、删除或进行其他数据操作的选项，但我认为这就是您要寻找的。

注意：要直接导入记录，您将无法通过工作台执行此操作；没有选择。您可以将记录保存到文件中。但是，要导入/创建它们，您需要一次添加一个（来自建模器）。但是，您可以使用已有记录备份 MySQL 数据库。然后将这些 INSERT 语句从 MYSQL 备份脚本复制到您的设置脚本中。

步骤是：

1.  创建数据库。

2.  将带有设置/配置记录的文件导入新创建的数据库

3.  备份数据库

4.  打开备份文件，然后将您要查找的 INSERT 语句复制并粘贴到 MySQL Workbench 创建的设置脚本中

更新：

当您进入正向工程中要执行的审查脚本步骤时，我做了一些实验，您最后也可以通过编辑脚本来调用存储过程（如您所提到的）。完成后将脚本保存到文件并进行测试。

希望有帮助！

# wpf - 将模板数据字段绑定到实例（通过“使用自定义路径表达式”？）

> ID：10384660
> 
> 赞同：0
> 
> 时间：2012-04-30T13:40:03.630
> 
> 标签：wpf, xaml, data-binding, expression-blend

我创建了一个按钮模板，其中包含一个图像和一个文本块。由于我想改变两者的外观，我认为它们需要在模板中。但是，当然，并非此模板的每个实例都应呈现相同的文本和图像。

到目前为止，我在 TextBlock / Image 的“文本”/“源”值字段中发现了一个名为“使用自定义路径表达式”的有前途的属性：

```
Data Binding... > Element Property > Use a custom path expression 
```

我现在想在按钮的实例上设置这个值。我已经尝试`myText="Lorem Ipsum"`在 Button 的 XAML 中手动插入 a ，但这似乎不起作用。

预先感谢您的帮助！

**更新：**这就是 XAML 的样子：

```
<TextBlock [...] Text="{Binding myText, ElementName={x:Null}, FallbackValue=Lorem}"/> 
```

我如何访问或修改它，以便可以访问它？

**更新 2：** TextBlock 和 Image 已经存在绑定。目前，Button 的 XAML 如下所示：

```
<s:SurfaceButton Command="{Binding SearchCustomCommand}" Style="{DynamicResource BasicButton}">
    <StackPanel Orientation="Vertical" Height="60" Width="48" IsHitTestVisible="False">
        <Image Source="{StaticResource ImageSourceToolboxSearchIcon}" 
            [...]
            Stretch="Uniform" />
        <TextBlock Text="{lex:LocText ToolboxButtonSearchesCustom}" 
            FontFamily="{DynamicResource button.font}" 
            [...]
            FontSize="{DynamicResource button.size}" 
            Foreground="{DynamicResource button.color.default}"/>
    </StackPanel>
</s:SurfaceButton> 
```

我现在想将图像和文本框提取到模板（也已经存在），所以我可以以这样的方式引用按钮（模板中包含所有关于大小和颜色等的信息，并且只有对按钮实际实例中的资源 - 能够单独更改 echt 按钮的图像/文本）：

```
<s:SurfaceButton
    Command="{Binding SearchPopularCommand}"
    Style="{DynamicResource ToolboxButtonBig}"
    ImageSource="{StaticResource ImageSourceToolboxSearchIcon}"
    TextBlockSource="{lex:LocText ToolboxButtonSearchesCustom}"/> 
```

我已经将 StackPanel 的整个 XAML 以及包含的 TextBlock 和 Image 复制到了模板中。现在这些都显示在每个按钮上（这很好），但我无法更改它们的内容。

如果描述很差，我很抱歉 - 我对 WPF 很陌生......

**更新 3：**经过进一步研究，我发现了与我类似的问题 - 这显然比我能更好地描述问题：

*   [wpf中带有图像和文本的按钮模板](https://stackoverflow.com/q/2726986/1147455)
*   [使用控件模板创建图像+文本按钮？](https://stackoverflow.com/q/1933127/1147455)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:12:58.043

不需要编辑按钮的模板来插入图像和文本，您可以像这样设置 Button.Content 属性：

```
<Button>
        <Button.Content>
            <StackPanel Orientation="Horizontal">
                <Image Source="../Images/image.png"/>
                <TextBlock Text="Lorem Ipsum"/>
            </StackPanel>
        </Button.Content>
    </Button> 
```

它会运作良好。上面的例子可以简化，但我这样插入它是为了更好地理解发生了什么。

编辑：以下是如何以两种不同方式完成的示例：覆盖模板：

```
<Button Content="Lorem Ipsum">
        <Button.Template>
            <ControlTemplate TargetType="Button">
                <StackPanel Orientation="Horizontal">
                    <Image x:Name="ButtonImage" Source="../Images/mouseNotOverImage.png"/>
                    <ContentPresenter Margin="2"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        RecognizesAccessKey="True" />
                </StackPanel>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="ButtonImage" Property="Source" Value="../Images/mouseOverImage.png"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Button.Template>
    </Button> 
```

完整的按钮模板定义你可以在[这里](http://msdn.microsoft.com/en-us/library/ms753328.aspx)找到 修改样式：

```
<Button>
        <Button.Style>
            <Style TargetType="Button">
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Content">
                            <Setter.Value>
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="../Images/mouseOverImage.png"/>
                                    <TextBlock Text="Lorem Ipsum"/>
                                </StackPanel>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="False">
                        <Setter Property="Content">
                            <Setter.Value>
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="../Images/mouseNotOverImage.png"/>
                                    <TextBlock Text="Lorem Ipsum"/>
                                </StackPanel>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Button.Style>
    </Button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:09:11.267

您的第一个选择是定义一个样式（或多个样式），例如

```
<Window.Resources>
    <Style x:Key="MyButton" TargetType="{x:Type Button}" >
        <Setter Property="Content">
            <Setter.Value>
                <Grid>
                    <Image .../>
                    <TextBlock Text="Test"/>
                </Grid>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>

<Grid>
    <Button Style="{StaticResource MyButton}" />
</Grid> 
```

您的第二个选择是使用 Blend 复制默认按钮样式并对其进行编辑

```
<Window.Resources>
    <Style x:Key="MyButton" TargetType="{x:Type Button}" >
        <Setter Property="Content">
            <Setter.Value>
                <Grid>
                    <TextBlock Text="Test"/>
                </Grid>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="ButtonFocusVisual">
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate>
                    <Rectangle Margin="2" SnapsToDevicePixels="true" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="1" StrokeDashArray="1 2"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <LinearGradientBrush x:Key="ButtonNormalBackground" EndPoint="0,1" StartPoint="0,0">
        <GradientStop Color="#F3F3F3" Offset="0"/>
        <GradientStop Color="#EBEBEB" Offset="0.5"/>
        <GradientStop Color="#DDDDDD" Offset="0.5"/>
        <GradientStop Color="#CDCDCD" Offset="1"/>
    </LinearGradientBrush>
    <SolidColorBrush x:Key="ButtonNormalBorder" Color="#FF707070"/>
    <Style x:Key="MyButtonStyle" TargetType="{x:Type Button}">
        <Setter Property="FocusVisualStyle" Value="{StaticResource ButtonFocusVisual}"/>
        <Setter Property="Background" Value="{StaticResource ButtonNormalBackground}"/>
        <Setter Property="BorderBrush" Value="{StaticResource ButtonNormalBorder}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Padding" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Themes:ButtonChrome x:Name="Chrome" BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderPressed="{TemplateBinding IsPressed}" RenderDefaulted="{TemplateBinding IsDefaulted}" SnapsToDevicePixels="true">

                        <!-- put your text and image here -->

                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>

                    </Themes:ButtonChrome>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsKeyboardFocused" Value="true">
                            <Setter Property="RenderDefaulted" TargetName="Chrome" Value="true"/>
                        </Trigger>
                        <Trigger Property="ToggleButton.IsChecked" Value="true">
                            <Setter Property="RenderPressed" TargetName="Chrome" Value="true"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="#ADADAD"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>
<Grid>
    <Button Content="Button" HorizontalAlignment="Left" Margin="167,151,0,0" VerticalAlignment="Top" Width="75" Style="{DynamicResource MyButtonStyle}"/>
</Grid> 
```

第三种选择是基于默认按钮样式创建自定义控件。然后，您可以创建依赖属性并使用模板绑定。

# java - 在 GridLayout JPanel 中访问本地定义的 JButton

> ID：10384662
> 
> 赞同：2
> 
> 时间：2012-04-30T13:40:05.950
> 
> 标签：java, swing, jbutton, grid-layout

假设您在 NxN 网格中有一个 JButton 的 GridLayout，代码如下：

```
JPanel bPanel = new JPanel();
bPanel.setLayout(new GridLayout(N, N, 10, 10));
    for (int row = 0; row < N; row++)
    {
        for (int col = 0; col < N; col++)
        {
            JButton b = new JButton("(" + row + ", " + col + ")");
            b.addActionListener(new ActionListener()
            {
                public void actionPerformed(ActionEvent e)
                {

                }
            });
            bPanel.add(b);
        }
    } 
```

如何通过 setText() 单独访问网格中的每个按钮以更改按钮的名称？这需要在实际按下相关按钮之外完成。

因为每个按钮在本地实例化为“b”，所以当前无法为每个按钮设置全局可访问的名称。可以做些什么来独立访问每个按钮？像 JButton[][] 这样的数组可以保存对所有按钮的引用吗？如何在上面的代码中进行设置？

任何输入表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T14:21:48.290

你可以，

1)`putClientProperty`

```
buttons[i][j].putClientProperty("column", i);
buttons[i][j].putClientProperty("row", j);
buttons[i][j].addActionListener(new MyActionListener()); 
```

和

```
public class MyActionListener implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        JButton btn = (JButton) e.getSource();
        System.out.println("clicked column " + btn.getClientProperty("column")
                + ", row " + btn.getClientProperty("row"));
} 
```

2)[动作命令](http://docs.oracle.com/javase/tutorial/uiswing/events/intro.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T13:44:40.570

您可以创建一个数组（或列表或其他东西）来存储所有按钮。或者您可以使用`public Component[] getComponents()`bPanel (Container) 的方法。

# tapestry - Tapestry5.2.6 中的 Zone 和 Jquery 问题

> ID：10384663
> 
> 赞同：2
> 
> 时间：2012-04-30T13:40:05.873
> 
> 标签：tapestry, zone

我正在将我的 Web 应用程序从 Tapestry 版本 5.1.0 迁移到 5.2.6。我正在使用 jquery 对话框来处理弹出的显示（而不是弹出窗口）。

在使用 Tapestry v5.1.0 时，我使用了 jquery js（版本 1.6.2）库和 Tapestry 标准 js 库（原型 n 其他 js），没有任何差异。但是现在，当我迁移到 Tapestry v5.2.6 时，javascripts 中存在冲突。如果我在页面中注释掉 jquery js 导入，则区域工作，即更新但对话框不起作用，如果我在页面中包含 jquery js，对话框工作正常，但它显示区域更新事件错误，显示“元素'selectZone ' 没有关联的 Tapestry.ZoneManager 对象。”

所以基本上，我需要在 Tapestry v5.2.6 的页面中同时使用 jQuery 和原型 js。请提出相同的方法。

问候，
马亨德拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:54:25.467

确保[在“无冲突”模式下包含 JQuery，](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)这样它就不会与prototypejs 发生冲突。

否则，您可能需要考虑使用[tapestry5-jquery](http://tapestry5-jquery.com/)来完全消除prototypejs。我更喜欢prototypejs 实现（一个原因是tapestry 代码更整洁），但这是许多用户喜欢的选项。

# java - 从文件创建父类的子类

> ID：10384666
> 
> 赞同：0
> 
> 时间：2012-04-30T13:40:14.613
> 
> 标签：java, constructor

我正在尝试创建一个菜单屏幕，我希望能够创建它，以及它的任何进一步的动态排列。我创建了一个 MenuItem 帮助器类来处理显示的菜单项，它读取名称、图像并设置下一个状态（稍后处理）。我想知道的是，如何创建特定的以下屏幕（它们都将是我的屏幕类的某个子类）？

将特定对象传递到 menuItems 的最有效方法是什么？我是否需要预先创建每个可能的屏幕，然后以它的序列化形式回读，或者我可以动态创建它们。我希望能够做一些简单的事情，比如阅读文字字符串“new SubClass(...)”并采取行动，但我不知道该怎么做。任何其他建议都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:29:38.620

如果我理解正确，您想要的是一种从文本文件中读取字符串命令并基于此命令显示屏幕的机制。

因此，将“显示屏幕”命令的界面提取到一个界面中。例如：

```
public interface ScreenDisplayer {
    void displayScreen(Screen mainScreen);
} 
```

然后构建一个`Map<String, ScreenDisplayer>`：

```
map.put("screen1", new ScreenDisplayer() {
    @Override
    void displayScreen(Screen mainScreen) {
        // TODO display screen 1
    });
// same for all the other commands 
```

当单击“菜单项”时，从地图中获取 DisplayScreen 并调用它：

```
String command = selectedMenuItem.getCommand();
ScreenDisplayer displayer = map.get(command);
displayer.displayScreen(mainScreen); 
```

# java - 在输入证书之前检查 CA 的证书？

> ID：10384669
> 
> 赞同：2
> 
> 时间：2012-04-30T13:40:23.037
> 
> 标签：java, certificate, keystore

我正在使用以下代码将客户端证书插入到我的 servertruststore

```
 FileInputStream fileInputStream = new FileInputStream( "c:/server.jks" );
    keyStore.load( fileInputStream, "keystore".toCharArray() );
    fileInputStream.close();
    keyStore.setCertificateEntry( alias, new X509Certificate( trustedCertificate ) );

    FileOutputStream fileOutputStream = new FileOutputStream("c:/server.jks" );
    keyStore.store( fileOutputStream, "keystore".toCharArray() );
    fileOutputStream.close(); 
```

现在我看到证书已输入到我的信任库中，但签署客户端证书的 CA 证书不在我的信任库中。所以我想知道在将证书输入密钥库之前，有什么方法可以检查 CA 的证书是否可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:22:04.273

我想您要做的就是验证证书是由根授权机构颁发的还是自签名的。我假设您使用的是默认的 java 密钥库，即 cacerts。我没有测试过代码，但我认为这可能是您问题的解决方案：

1.  从以下链接获取和修改的代码：

[如何在 Java 中获取受信任的根证书列表？](https://stackoverflow.com/questions/3508050/how-can-i-get-a-list-of-trusted-root-certificates-in-java)

```
 String filename = System.getProperty("java.home") + "/lib/security/cacerts".replace('/', File.separatorChar);
        Set<X509Certificate> additionalCerts = new HashSet<X509Certificate>();
        FileInputStream is = new FileInputStream(filename);
        KeyStore keystore = KeyStore.getInstance(KeyStore.getDefaultType());
        String password = "changeit";
        keystore.load(is, password.toCharArray());

        // This class retrieves the most-trusted CAs from the keystore
        PKIXParameters params = new PKIXParameters(keystore);

        // Get the set of trust anchors, which contain the most-trusted CA certificates
        Iterator it = params.getTrustAnchors().iterator();
        while( it.hasNext() ) {
            TrustAnchor ta = (TrustAnchor)it.next();
            // Get certificate
            X509Certificate cert = ta.getTrustedCert();
            additionalCerts.add(cert);
        } 
```

2.  然后您可以使用以下代码将客户端证书和包含所有根 CA 的 Set 传递给以下代码的 verifyCertificate(X509Certificate cert, Set additionalCerts) 方法：

[http://www.nakov.com/blog/2009/12/01/x509-certificate-validation-in-java-build-and-verify-chain-and-verify-clr-with-bouncy-castle/](http://www.nakov.com/blog/2009/12/01/x509-certificate-validation-in-java-build-and-verify-chain-and-verify-clr-with-bouncy-castle/)

# android - Meteor 的可扩展性和性能

> ID：10384670
> 
> 赞同：2
> 
> 时间：2012-04-30T13:40:44.720
> 
> 标签：android, iphone, performance, meteor

最近我真的很喜欢用 Meteor 进行实验，到目前为止，我发现它是一个非常简洁的小应用程序。我决定将一个旧应用程序迁移到流星上，并且已经取得了一些不错的进展。该应用程序是实时比分更新应用程序。虽然我已经能够展示这个概念，但我发现了 2 个可能阻止我使用它的问题。

1) 数据以前存在于 mySQL 数据库中，所以我编写了一个脚本来将数据导出到 .js 文件中。对于那些可能想要做类似的人，PHP 代码的主要部分在这里。

```
$handle = fopen($output_file, "w");

foreach ( $tables as $key => $table ) {
        $query = "SELECT * FROM $table_prefix$table";
        $res = mysql_query($query);
        while ( $row = mysql_fetch_assoc($res) ) {

                $newTableName = "";

                $parts = explode("_", $table);
                foreach ( $parts as $k => $v ) {
                        $newTableName .= ucfirst($v);
                }

                $string = $newTableName.".insert({";
                $first = true;
                foreach ( $row as $columnName =>  $value ) {
                        if ( !$first ) { $string .= ", "; }
                        $string .= "$columnName : \"$value\"";
                        $first = false;
                }
                $string .= " });";
                print $string . "<br>";

        }
} 
```

虽然这对大多数表格都有效，但我有一张特别包含所有事件信息的表格。这个单独的 .js 文件包含 3600 行插入语句，看起来当它在应用程序中时，应用程序会中断。例如，如果我将文件重命名为“event.js.save”，那么应用程序就可以了。更具体地说，有了这个 .js 文件，当我部署应用程序时，我得到..

```
mac:app user$ meteor deploy <domain>.meteor.com
Deploying to <domain>.meteor.com.  Bundling ...

Errors prevented deploying:
Exception while bundling application:
RangeError: Maximum call stack size exceeded 
```

那么，问题 1 是 - 为测试此应用程序的可扩展性做了多少工作？

2）我遇到的第二个问题是关于移动性能。我花了很长时间让样式表在所有平台上看起来都很好，并且看到移动设备上的电池电量耗尽的速度真的很失望。

当我在 Safari 中加载页面时，右上角的“进度”动画一直在旋转，据我所知，5% 的电池电量可能会在 10 分钟内耗尽。

问题 2 - 如何使浏览器的连接保持活动状态？有什么办法可以减少对移动浏览器的影响？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:28:20.430

1：应用程序具有很强的可扩展性，如果流星站点在没有计划的情况下在一天之内就可以很好地管理大量流量的发布。您的错误的原因是，据我所知，您不能连续调用那么多相同的语句，因为 js 认为它​​正在崩溃。我认为有办法改变这一点，或者绕过它。

至于他们所做的测试，我不确定，我个人会通过遍历数据并插入数据来导入数据，而不是像调用那么多电话一样（我认为这是问题所在）。

2：这是一个正在旋转的错误，但它会不断检查 ajax 或类似方法。将来会使用我希望效率更高的套接字。也许将来会有一种方法来降低查询的数量和网络密集型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:12:25.440

为上述问题提供更新的源代码：

正如其中一个答案所讨论的，问题似乎出在插入行的数量上，并且是 Javascript 破坏而不是 Meteor。我已经更新了代码，并认为其他人可能会感兴趣。

以下 PHP 为表提供 JSON 输出...

```
// we connect to example.com and port 3307
$link = mysql_connect('localhost', 'username', 'password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
$db = mysql_select_db("databasename");
$tables = array (
        $_REQUEST["table"]
        );
$table_prefix = "tableprefix_";
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json');
foreach ( $tables as $key => $table ) {
        $query = "SELECT * FROM $table_prefix$table";
        $res = mysql_query($query);
        $first = true;
        print "[";
        while ( $row = mysql_fetch_assoc($res) ) {
                if ( !$first ) { print ", "; }
                $first = false;
                print ( json_encode($row) . "\n");
        }
        print "]";
}
mysql_close($link); 
```

然后我可以在 javascript 中使用以下内容来加载数据。

```
Events = new Meteor.Collection("event");

if (Meteor.is_server) {
  Meteor.startup(function () {
    if (Events.find().count() === 0) {
        $.getJSON('/ajax/event.json', function(data) {
                $.each(data, function(key, val) {
                        Events.insert(val);
                });
        });
    }
  });
} 
```

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2012-05-01T17:58:02.307

乔纳森金斯顿说，

> 1：应用程序具有很强的可扩展性，如果流星站点在没有计划的情况下在一天之内就可以很好地管理大量流量的发布。

这很有趣，因为 Meteor 的主页不是 Meteor 应用程序，由于安全/可扩展性原因，他们不得不将所有 Meteor 演示应用程序下线。

期待下一代 FUD 被漂亮的演示和黑客新闻帖子所欺骗的愚蠢程序员传播。

# iphone - 设备轮换问题

> ID：10384673
> 
> 赞同：0
> 
> 时间：2012-04-30T13:40:57.757
> 
> 标签：iphone, objective-c

我检测屏幕改变方向：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(detectOrientation) name:@"UIDeviceOrientationDidChangeNotification" object:nil]; 
```

当它调用我调用这个方法：

```
if(orientation == UIInterfaceOrientationPortrait || orientation == UIInterfaceOrientationPortraitUpsideDown) { 
     [md changeToBigNowPlaying:YES withLayer:avPlayerLayer];
}else{
     [md changeToBigNowPlaying:NO withLayer:avPlayerLayer];
} 
```

在这个函数中我做这些事情：

```
-(void)changeToBigNowPlaying:(BOOL)flag withLayer:(AVPlayerLayer*)layer{
    if (flag) {
        //To portrait

        [landVC.view removeFromSuperview];
        [layer removeFromSuperlayer];
        [self.window addSubview:tab.view];
    }else {
        //To landscape

        [tab.view removeFromSuperview];
        [landVC setUpNewLayer:layer];
        [self.window addSubview:landVC.view];
    }
} 
```

这就是解释：

我有带有视图控制器的标签栏，当我检测到用户将屏幕旋转为横向时，我删除了标签栏并添加了 UIViewController(landVC)，当我再次将其旋转为纵向时，我删除了landvc并再次添加了标签栏。

我的问题是当我首先旋转到时`UIInterfaceOrientationLandscapeLeft`，它会显示屏幕`UIInterfaceOrientationLandscapeRight`。但是当我旋转到`UIInterfaceOrientationLandscapeRight`第一个时，我看到了它应该看到的屏幕，当我从这种情况旋转到`UIInterfaceOrientationLandscapeLeft`我看到屏幕也很好。

知道为什么当我旋转到`UIInterfaceOrientationLandscapeLeft`并且看到landVc 时出现问题`UIInterfaceOrientationLandscapeRight`

在landVC UIViewController 我实现：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    if(interfaceOrientation == UIInterfaceOrientationLandscapeRight){
        return YES;
    }else if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft) {
        return YES;
    }else {
        return NO;
    }
} 
```

# 编辑

```
-(void)detectOrientation{
    UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];

    if(orientation == UIInterfaceOrientationPortrait || orientation == UIInterfaceOrientationPortraitUpsideDown) {
        [md changeToBigNowPlaying:YES withLayer:avPlayerLayer];
    }
    if(orientation == UIInterfaceOrientationLandscapeRight || orientation == UIInterfaceOrientationLandscapeLeft) {
        [md changeToBigNowPlaying:NO withLayer:avPlayerLayer];
    }
} 
```

# c++ - C++：结构定义问题中指向结构的指针

> ID：10384676
> 
> 赞同：0
> 
> 时间：2012-04-30T13:41:01.460
> 
> 标签：c++, pointers, struct, definition, next

考虑那段代码：

```
struct myStruct
{
    myStruct *next;
}; 
```

接下来是结构定义中声明的结构指针，对吧？

- 下一个 - 的用处是什么？我该如何使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:43:35.807

似乎它是链表的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T13:43:46.870

如果您想将这些结构链接在一起以便稍后遍历它们，您可以使用 next。当然，在 myStruct 中有其他成员会更有意义。

例子：

```
struct myStruct
{
    int       data;
    myStruct *next;
};

myStruct st_1;
myStruct st_2;

st_1.data = 1;
st_2.data = 2;

st_1.next = &st_2; //st_1.next->data is now 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T13:43:14.343

这个指针的用途是你在`myStruct`. 您可以使用此指针与其他结构保持直接关系`myStruct`（通过指针）并直接操作它们（例如“了解”其他对象）。

例如（请注意，出于所有意图和目的，C++ 中的结构都是公共类），

```
class Test
{
public:
  doSomethingToTheOtherStruct() {
    if(t != NULL)
      t->touch();

  setTouched(bool touch) {
    touched = touch;
  }

  setT(Test* other) {
    t = other;
  }

  bool isTouched() const {
    return touched;
  }

private:
  Test* t;
  bool touched;
}; 
```

这个类有一些非常简单的方法可以展示使用指针的威力。下面是一个使用它的例子。

```
#include <iostream>
using namespace std;
int main()
{
  Test t1;
  Test t2;
  Test* t3 = new Test;

  // Notice that we set the pointers of each struct to point to a different one
  // This is not necessary, but is definitely more useful than setting it to itself
  // since you already have the "this" pointer in a class.
  t1->setT(&t2);
  t2->setT(t3);
  t3->setT(&t1);

  cout<< t1.isTouched() << t2.isTouched() << t3->isTouched() << endl;

  t1->doSomethingToTheOtherStruct();
  t2.doSomethingToTheOtherStruct();

  cout<< t1.isTouched() << t2.isTouched() << t3->isTouched() << endl;

  delete t3;

  return 0;
} 
```

请注意此代码的结果。`t1`从未设置为 touched，而是无意中（通过指针），`t2`并`t3`成为“touched”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T14:10:33.670

正如其他人指出的那样，它是指向同一个类的指针并且成员变量被称为“next”这一事实表明它是一个链表。

如果变量是指向同一类但称为“父”的指针，则很可能是某种父/子关系。（例如 GUI 小部件，其父级也是小部件）。

您可能会质疑为什么允许您这样做：答案是指向数据类型的指针大小都相同，因此编译器已经知道该指针需要多少字节。

出于同样的原因，您可以在您的类（或结构）中拥有一个指向仅声明了数据类型而未定义其数据类型的类型的指针。（很常见）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T13:46:33.087

那是对的。这种嵌套结构用于 [链表](http://en.wikipedia.org/wiki/Linked_list "链表")。

# magento - 在产品报告网格 Magento 中添加下拉属性

> ID：10384677
> 
> 赞同：2
> 
> 时间：2012-04-30T13:41:02.100
> 
> 标签：magento, report

我正在尝试将新产品属性添加到 Reports->Products Ordered 网格。我复制`/app/code/core/Mage/Adminhtml/Block/Report/Product/Sold/Grid.php`到 `/app/code/local/Mage/Adminhtml/Block/Report/Product/Sold/Grid.php`并添加如下属性：

```
protected function _prepareColumns()
    {
        $this->addColumn('created_at', array(
            'header'    =>Mage::helper('reports')->__('Create At'),
            'index'     =>'created_at'
        ));
        $this->addColumn('sku', array(
            'header'    =>Mage::helper('reports')->__('sku'),
            'index'     =>'sku'
        ));
        $this->addColumn('name', array(
            'header'    =>Mage::helper('reports')->__('Product Name'),
            'index'     =>'name'
        ));
        $this->addColumn('color', array(
            'header'    =>Mage::helper('reports')->__('Color'),
            'index'     =>'color',
            'type'      => 'options'
        ));
        $this->addColumn('size', array(
            'header'    =>Mage::helper('reports')->__('Size'),
            'index'     =>'size'
        ));
        $this->addColumn('price', array(
            'header'    =>Mage::helper('reports')->__('Price'),
            'width'     =>'120px',
            'type'      =>'currency',
            'currency_code' => $this->getCurrentCurrencyCode(),
            'index'     =>'price'
        ));

        $this->addColumn('ordered_qty', array(
            'header'    =>Mage::helper('reports')->__('Quantity Ordered'),
            'width'     =>'120px',
            'align'     =>'right',
            'index'     =>'ordered_qty',
            'total'     =>'sum',
            'type'      =>'number'
        ));

        $this->addExportType('*/*/exportSoldCsv', Mage::helper('reports')->__('CSV'));
        $this->addExportType('*/*/exportSoldExcel', Mage::helper('reports')->__('Excel'));

        return parent::_prepareColumns();
    } 
```

问题是，“颜色”和“大小”是下拉属性，这就是它们显示选项值而不是选项文本的原因。如何在网格中显示下拉属性的文本值？

**编辑 1**

谢谢 BOOMER ...我已经按照您的建议更改了 Grid.php，它现在显示空白颜色列。这是我所做的：

```
 protected function _prepareCollection()
    {
        $collection = Mage::getModel('catalog/product')->getCollection()->addAttributeToSelect('color');

        parent::_prepareCollection();
        $this->getCollection()
            ->initReport('reports/product_sold_collection');
        return $this;
    }

    /**
     * Prepare Grid columns
     *
     * @return Mage_Adminhtml_Block_Report_Product_Sold_Grid
     */
    protected function _prepareColumns()
    {
        $colors = Mage::getResourceModel('eav/entity_attribute_option_collection')
            ->setAttributeFilter(80) // set your attribute ID here
            ->setStoreFilter()
            ->load()
            ->toOptionHash('option_id', 'value');

        $this->addColumn('created_at', array(
            'header'    =>Mage::helper('reports')->__('Create At'),
            'index'     =>'created_at'
        ));
        $this->addColumn('sku', array(
            'header'    =>Mage::helper('reports')->__('sku'),
            'index'     =>'sku'
        ));
        $this->addColumn('name', array(
            'header'    =>Mage::helper('reports')->__('Product Name'),
            'index'     =>'name'
        ));
        $this->addColumn('color', array(
            'header'    =>Mage::helper('reports')->__('Color'),
            'index'     =>'color',
            'type'      => 'options',
            'options' => $colors
        ));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:00:36.747

首先确保您在`_prepareCollection()`方法中添加要选择的属性，例如：

`$collection = Mage::getModel('catalog/product')->getCollection()->addAttributeToSelect('color');`

在您的内部，您`_prepareColumns()`需要定义要使用的选项集合：

```
$colors = Mage::getResourceModel('eav/entity_attribute_option_collection')
            ->setAttributeFilter(15) // set your attribute ID here
            ->setStoreFilter()
            ->load()
            ->toOptionHash('option_id', 'value'); 
```

请务必相应地设置属性 ID。然后在您的 addColumns 中使用此集合列表，如下所示：

```
$this->addColumn('color', array(
            'header'    =>Mage::helper('reports')->__('Color'),
            'index'     =>'color',
            'type'      => 'options',
            'options' => $colors
        )); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T10:42:08.957

我建议您使用不同的方法，至少对于自定义属性。尝试用`$colors =`以下内容替换您的操作

```
$attribute = Mage::getModel('eav/config')->getAttribute('catalog_product', 'color');
$colors = array();
foreach( $attribute->getSource()->getAllOptions(true, true) as $option ) {
   $colors[$option['value']] = $option['label'];
} 
```

我通常用 if 条件替换 foreach 中的语句以避免重复的空白选项，即：

```
if ($option['label'])
    $sets[$option['value']] = $option['label']; 
```

# .net - 如何在 WCF 服务和客户端之间共享对象？

> ID：10384681
> 
> 赞同：2
> 
> 时间：2012-04-30T13:41:25.420
> 
> 标签：.net, wcf, service, remoting

我在分布式系统中有三个依赖 WCF 服务进行通信的程序。如果我有 WCF 服务库中使用的数据类型，如何从引用了该服务的客户端访问它？

我能够从客户端控制台应用程序实例化 WCF 服务中定义的对象，尽管我无能为力。我无法访问任何对象的成员方法或字段。

例如，我有这个在服务库和客户端中使用的 Transaction 对象类：

```
[DataContract]
public class Transaction
{
    public int checkoutID;
    public DateTime time;
    public List<object> products;
    public double totalPrice;
    public bool complete;

    [OperationBehavior]
    public void Start(int ID)
    {
        checkoutID = ID;
        products = new List<object>();
        complete = false;
    }

    [OperationBehavior]
    public void Complete()
    {
        time = DateTime.Now;
        complete = true;
    }
} 
```

这取自服务 (IService) 的接口文件，其中定义了另一个类，称为 CompositeType。我错过了什么？我认为 WCF 服务允许远程处理方法和数据类型？

感谢任何可以提供帮助的人，我在 WCF 方面遇到了一段时间的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T13:46:43.323

WCF 是一个**消息传递**系统——所有客户端和服务器共享都是**服务契约**（例如服务方法和使用的数据类型的结构）。

客户端和服务器之间的线路基本上是数据协定对象的 XML 序列化表示。但是默认情况下，WCF**不共享**代码——只共享契约（例如不共享数据类型/类，只共享它们的 XML 表示）。

因此，默认情况下，当客户端为给定服务创建客户端代理时，它将能够确定服务方法和来回传递的数据的 XML 格式 - 并根据该信息创建客户端在线上具有完全相同的 XML 表示的数据类 - 但它们是不同的 .NET 类（在客户端命名空间中）。

如果您控制通信的两端（服务器和客户端）并且都使用 .NET，*则可以*执行以下操作：

*   将您的服务和数据合同放入单独的程序集中（`YourService.Contracts`或类似的东西）

*   让服务器端代码引用该程序集并使用它的接口和类型

*   **在**创建客户端代理之前，添加对该共享合同程序集的引用

*   在这种情况下，当您创建客户端代理（使用`Add Service Reference`或`svcutil`命令行工具）时，WCF 运行时将检测到它已经知道所需的类型（因为这些类型是在共享程序集中定义的），并且它将**重用这些共享类型**，而不是创建新的仅限客户端的数据类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:46:11.937

我无法完全理解您的问题，但从上面粘贴的代码中，您正在与 WCF 客户端共享方法，而不是字段/属性。您还需要在字段中应用 [DataMember] 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:46:17.510

将 [DataMember] 标记添加到字段 - 然后将它们序列化。

此外，[OperationContract] 应该在方法上，而不是 [OperationBehavior]

# sql-server-2008 - 使用 WHERE 插入

> ID：10384685
> 
> 赞同：2
> 
> 时间：2012-04-30T13:41:50.663
> 
> 标签：sql-server-2008, insert

我正在尝试插入不在from中的`JobNo`and列。我写了这个查询，我得到了一个错误。`CellNo``Table_1``View_1`

请帮我纠正这个问题。

我正在使用 SQL Server 2008

```
INSERT INTO Table_1(ID, JobNo, CellNo)
   SELECT View_1.ID, View_1.JobNo, View_1.CellNo
   FROM View_1
   WHERE View_1.JobNo 
   AND View_1.CellNo NOT IN (SELECT JobNo, CellNo FROM Table_1) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T13:47:31.717

问题是您的`WHERE`子句-您无法比较这样的字段集。 **您一次只能比较一个字段。**

请尝试：

```
WHERE View_1.JobNo NOT IN(SELECT JobNo FROM Table_1) 
AND View_1.CellNo NOT IN (SELECT CellNo FROM Table_1) 
```

或者，您可以使用单个`EXISTS`语句：

```
INSERT INTO Table_1(ID, JobNo, CellNo)
SELECT View_1.ID, View_1.JobNo, View_1.CellNo
FROM View_1 v
WHERE NOT EXISTS (SELECT 1 FROM Table_1 t
                  WHERE t.JobNo = v.JobNo
                  AND t.CellNo = v.CellNo) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:50:21.683

由于您使用的是 SQL Server 2008，因此可以使用以下[`MERGE`](http://msdn.microsoft.com/de-de/library/bb510625.aspx)语句：

```
MERGE INTO Table_1 dst
USING (
  SELECT View_1.ID, View_1.JobNo, View_1.CellNo
  FROM View_1
) src
ON src.JobNo = dst.JobNo
AND src.CellNo = dst.CellNo
WHEN NOT MACHED THEN INSERT (ID, JobNo, CellNo)
  VALUES (src.ID, src.JobNo, src.CellNo) 
```

我个人觉得一个`MERGE`比`INSERT .. SELECT .. WHERE`.

# facebook - Facebook 点赞按钮 - onclick 设置 cookie

> ID：10384690
> 
> 赞同：-1
> 
> 时间：2012-04-30T13:42:21.110
> 
> 标签：facebook, facebook-like, fbml

我正在为我的客户制作一些 Facebook “东西”，他希望在点击后设置 cookie 并且在 24 小时内不会看到这个类似框。不要问我为什么 :) 所以我做了函数 like():

```
<script type="text/javascript">
function liked(){
   days=1; 
   myDate = new Date();
   myDate.setTime(myDate.getTime()+(days*24*60*60*1000));
   document.cookie = 'liked=button; expires=' + myDate.toGMTString();
} 
```

但我不知道如何强制 facebook like 按钮调用此功能。我在 FB 开发人员和这个网站上也找到了一些代码，但我不知道在哪里使用它。

> FB.Event.subscribe('edge.create', function(response) { alert('You like the URL: ' + response); } );

有人可以帮我吗？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:01:34.987

这个对我有用：

```
<script>
window.fbAsyncInit = function() {
                    FB.Event.subscribe("edge.create", function(response) { alert("You liked the URL: " + response); } );
                    };</script> 
```

# javascript - 定义参数时，主干视图事件似乎不执行函数

> ID：10384693
> 
> 赞同：0
> 
> 时间：2012-04-30T13:42:26.897
> 
> 标签：javascript, backbone.js, coffeescript, backbone-events

对于我的一个主干视图，我有以下代码：

```
class GD.Views.Result extends Backbone.View
  template: JST['mobile/templates/result']
  tagName: 'tr'
  className: 'result'
  events:
    'click' : 'showDetail'
    'click #favourite' : 'addFavourite(Favourite)'
    'click #like' : 'addFavourite(Like)'
    'click #dislike' : 'addFavourite(Dislike)'
   render: ->
     $(@el).html(@template(model: @model))
     this
   addFavourite: (type) ->
     event.preventDefault()
     attributes =
       id: @model.id
       type: type
       cluster: @model.cluster
     @collection.create attributes,
     wait: true
     success: @updateIcons
     error: @handleError
   showDetail: ->
     ...
   updateIcons: ->
     ...
   handleError: ->
     ... 
```

我在控制台中收到此错误：

```
Uncaught Error: Method "addFavourite(Favourite)" does not exist 
```

我真的不明白为什么 AddFavourite 方法而不是 showDetail 方法会发生这种情况 - 您是否不允许将需要定义参数的方法传递给任何事件？

非常感谢您的任何帮助（！）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:32:03.893

正如@Derick 解释的那样，如果一个`events`元素的值是一个字符串，它会在你的视图对象上命名一个方法，所以你不能这样指定参数。您需要（示例在 JS 中）：

1.  仅提供方法名称作为字符串，然后确定方法中的类型。例如

    ```
    events : {

      'click #favourite' : 'addFavourite',

      'click #like' : 'addFavourite',

      'click #dislike' : 'addFavourite'

    } 
    ```

    ```
    addFavourite : function ( event ) {

      event.preventDefault();

      var type = event.target.id;

    } 
    ```

2.  提供一个函数对象（在本例中，通过函数表达式）。在这种情况下，您可以提供一个调用泛型`addFavorite`方法并将类型传递给它的函数，例如：

    ```
    events : {

      'click #favourite' : function ( event ) {

        this.addFavourite( event, 'favourite' );

      },

      'click #like' : function ( event ) {

        this.addFavourite( event, 'like' );

      },

      'click #dislike' : function ( event ) {

        this.addFavourite( event, 'dislike' );

      }

    } 
    ```

    ```
    addFavourite : function ( event, type ) {

      event.preventDefault();

    } 
    ```

从我在您的示例中可以看到，我会选择选项＃1。

请注意，这可以变得更加动态，例如：

```
events : function () {

  var events = {};

  var view = this;

  [

    'favourite',

    'like',

    'dislike'

  ].forEach( function ( type ) {

    events[ "click #" + type ] = ( function ( type ) {

      return function ( event ) {

        view.addFavourite( event, type );

      };

    } )( type );

  };

  return events;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:00:32.163

不要在事件配置中指定参数。事件配置用作查找，它是通过名称完成的，而不是通过方法签名。

```
class GD.Views.Result extends Backbone.View
  template: JST['mobile/templates/result']
  tagName: 'tr'
  className: 'result'
  events:
    'click' : 'showDetail'
    'click #favourite' : 'addFavourite'
    'click #like' : 'addFavourite'
    'click #dislike' : 'addFavourite'
   render: ->
     $(@el).html(@template(model: @model))
     this
   addFavourite: (type) ->
     event.preventDefault()
     attributes =
       id: @model.id
       type: type
       cluster: @model.cluster
     @collection.create attributes,
     wait: true
     success: @updateIcons
     error: @handleError
   showDetail: ->
     ...
   updateIcons: ->
     ...
   handleError: ->
     ... 
```

# java - 关于成功ajax的确认对话

> ID：10384694
> 
> 赞同：0
> 
> 时间：2012-04-30T13:42:27.670
> 
> 标签：java, jquery, ajax

```
jQuery("#uploadForm").ajaxForm({
    target: '#location'
    success :funcion(){}
}).submit(); 
```

我正在提交上述表格，并更新一个 Div。成功后，我想显示一个带有 yes 或 no 的确认对话。在用户响应中，我想再次进行 ajax 调用。

我该怎么做..请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:46:20.380

```
jQuery("#uploadForm").ajaxForm({
    target: '#location'
    success :function(){
       // show your dialogue
       var response = window.confirm('Yes or NO?');
       if(response) {
          // code for yes

       } else {
          // code for no

       }
    }
}).submit(); 
```

你也可以试试这个：

```
var options = { 
    target:     '#location', 
    url:        'your_url', 
    success:    function() { 
        alert('Thanks for your comment!'); 
    } 
}; 

jQuery("#uploadForm").ajaxForm(options).submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:47:15.883

您正在寻找`confirm`功能。

```
jQuery("#uploadForm").ajaxForm({
    target: '#location'
    success: funcion() {
        var result = confirm("OK or cancel?");
        if(result) {
            // User clicked OK
        }
        else {
            // User clicked cancel
        }
    }
}).submit(); 
```

当然，您可以将任何您想要的消息放入确认功能

* * *

来源：[Tizag - Javascript 教程 - 确认](http://www.tizag.com/javascriptT/javascriptconfirm.php)

# magento - ““xxxxxx”的请求数量不可用”仅在客户转到新页面时显示...

> ID：10384698
> 
> 赞同：0
> 
> 时间：2012-04-30T13:42:45.827
> 
> 标签：magento

假设我们只有 1,000 个数量的产品，但客户添加了 5,000 个，它应该在尝试添加 5,000 个数量后立即显示错误消息[“xxxxxx”的请求数量不可用]。但是，在我们正在构建的站点上，直到他们单击新页面后才会显示此错误消息。

这是发生它的网站的链接：http: [//partytimebr.com/natures-imprint-7-round-dinner-plate.html](http://partytimebr.com/natures-imprint-7-round-dinner-plate.html)

任何帮助表示赞赏！谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:57:55.773

确保您`<?php echo $this->getMessagesBlock()->getGroupedHtml() ?>`在模板上有您希望消息块出现的位置。在基本模板中，它位于`app/design/frontend/base/default/template/catalog/product/view.phtml`. 确保将其带到您的模板中。[（请参见此处的](http://svn.magentocommerce.com/source/branches/1.7/app/design/frontend/base/default/template/catalog/product/view.phtml)第 39 行）

# ruby - 如何在 Ruby 中生成初始化程序？

> ID：10384700
> 
> 赞同：7
> 
> 时间：2012-04-30T13:43:04.147
> 
> 标签：ruby, initializer

是时候让它更短了：

```
class Foo
  attr_accessor :a, :b, :c, :d, :e

  def initialize(a, b, c, d, e)
    @a = a
    @b = b
    @c = c
    @d = d
    @e = e
  end
end 
```

我们有 'attr_accessor' 来生成 getter 和 setter。

我们有什么可以通过属性生成初始化器吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-30T14:08:36.030

最简单的：

```
Foo = Struct.new( :a, :b, :c ) 
```

生成访问器和初始化器。您可以通过以下方式进一步自定义您的课程：

```
Foo = Struct.new( … ) do
  def some_method
    …
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T14:20:29.727

我们可以创建这样的东西`def_initializer`：

```
# Create a new Module-level method "def_initializer"
class Module
  def def_initializer(*args)
    self.class_eval <<END
      def initialize(#{args.join(", ")})
        #{args.map { |arg| "@#{arg} = #{arg}" }.join("\n")}
      end
END
  end
end

# Use it like this
class Foo
  attr_accessor   :a, :b, :c, :d
  def_initializer :a, :b, :c, :d

  def test
    puts a, b, c, d
  end
end

# Testing
Foo.new(1, 2, 3, 4).test

# Outputs:
# 1
# 2
# 3
# 4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T13:56:51.590

您可以使用像[构造函数](http://rubygems.org/gems/constructor)这样的宝石。从描述：

> 声明式意味着通过将哈希传递给构造函数来定义对象属性，构造函数将设置相应的 ivars。

它很容易使用：

```
Class Foo
  constructor :a, :b, :c, :d, :e, :accessors => true
end

foo = Foo.new(:a => 'hello world', :b => 'b',:c => 'c', :d => 'd', :e => 'e')
puts foo.a # 'hello world' 
```

如果您不希望使用访问器生成 ivars，则可以省略 :accessors => true

希望这会有所帮助/Salernost

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T13:58:39.703

```
class Foo
  class InvalidAttrbute < StandardError; end

  ACCESSORS = [:a, :b, :c, :d, :e]
  ACCESSORS.each{ |atr| attr_accessor atr }

  def initialize(args)
    args.each do |atr, val|
      raise InvalidAttrbute, "Invalid attribute for Foo class: #{atr}" unless ACCESSORS.include? atr
      instance_variable_set("@#{atr}", val)
    end
  end
end

foo = Foo.new(a: 1)
puts foo.a
#=> 1

foo = Foo.new(invalid: 1)
#=> Exception 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T14:06:07.480

```
class Module
  def initialize_with( *names )
    define_method :initialize do |*args|
      names.zip(args).each do |name,val|
        instance_variable_set :"@#{name}", val
      end
    end
  end
end 
```

# java - 登录到远程 Windows 服务器并执行 .bat 文件

> ID：10384702
> 
> 赞同：1
> 
> 时间：2012-04-30T13:43:11.570
> 
> 标签：java, batch-file, remote-desktop

我们可以使用 Java 在远程 Windows 桌面上执行 .bat 文件吗？批处理文件检查系统服务，如果它关闭，它假设与我本地机器中的 Java 程序通信，然后它应该再次执行并运行服务，并再次联系 Java 程序：

我的批处理文件目前只是检查服务是否启动，然后它会启动服务：

所以两个问题：

1.  我们可以通过我的 Java 代码远程执行批处理文件吗：
    如果可以的话：
2.  该代码是否可以根据特定条件与批处理文件通信（这里我的条件是服务/服务是否正在运行）？：

请看下面的批处理文件：

```
@ECHO OFF

for /f "tokens=3" %%a in ('sc query "aspnet_state"^|find "STATE"') do (
if %%a==4 (goto running)
    (sc start aspnet_state goto stopped)
   )
  :stopped
  msg * stopped but now it is running
  goto :eof
:running
msg * running 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:55:01.887

您对如何在远程 Windows 机器上执行 .bat 文件有任何想法吗？您是否考虑过将批处理文件传送到远程 Windows 机器？考虑获得运行这样的脚本所需的管理权限？在来回通信期间考虑防火墙问题？

您似乎正在设计的东西看起来类似于木马恶意软件。它们的工作方式——它们感染目标机器（交付阶段），然后代理将不时与服务器机器通信（通信阶段），以查看服务器机器是否需要代理来完成任何工作。这是最可靠的，因为通常允许出站连接，而入站（连接到代理的服务器）几乎总是被禁止。收到命令日志后，代理将执行命令（执行阶段），然后将结果发布回服务器（通信返回阶段）。

像这样的东西。

PS：Java 不是首字母缩写词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:18:41.957

1.  您是否考虑过将 BAT 文件复制到服务器并使用 Windows 计划任务将其设置为每小时运行一次（这不是最好的主意，但这似乎是您的目标）？

2.  您正在使用的`sc`命令实际上可以单独支持与远程机器的连接，例如`sc \\REMOTE.COMPUTER start aspnet_state)`. 这可以在任何机器上设置和运行，前提是执行命令的用户有权在远程计算机上启动服务（无论如何你都需要这样做）。

3.  只要您在 Windows 机器上运行它，您就可以使用[JNA](https://github.com/twall/jna)进行本机 API 调用。请参阅下面的示例

*例子：*

```
W32ServiceManager manager = new W32ServiceManager("REMOTE.COMPUTER", null);
manager.open(SC_MANAGER_CONNECT);

W32Service aspNetService = manager.openService(
     "aspnet_state", 
     SERVICE_QUERY_STATUS | SERVICE_START
);

if (aspNetService.queryStats().dwCurrentState != SERVICE_RUNNING) {
    aspNetServices.startService();
}

aspNetService.close(); 
```

* * *

**编辑**

关于您的第一条评论：由于涉及的 API，提供登录远程服务器的凭据要复杂得多。一般来说，我只是建议确保您的进程以您要远程登录的用户身份运行。或者，[waffle 项目](https://github.com/dblock/waffle/tree/master/Source/JNAWindowsAuthProvider/src/waffle/windows/auth)具有在 NTLM 身份验证上下文中使用 JNA 模拟用户的代码。这可以扩展到您的情况。Windows API 的关键函数是[`LogonUser`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184%28v=vs.85%29.aspx)和[`ImpersonateLoggedOnUser](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378612%28v=vs.85%29.aspx)，它们都已经映射到提供的 JNA [Advapi32](http://twall.github.com/jna/3.4.0/javadoc/com/sun/jna/platform/win32/Advapi32.html)包装器中。要点是这样的：

```
Advapi32.INSTANCE.LogonUser(username, domain, password, LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, handle);
Advapi32.INSTANCE.ImpersonateLoggedOnUser(handle);
// do something as user here...
Advapi32.INSTANCE.RevertToSelf(); // drop the impersonated token 
```

您可能需要调用[DuplicateTokenEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446617%28v=vs.85%29.aspx)才能成功调用服务。有关模拟的详细信息，请参阅链接的 Microsoft 文档。其中大部分内容在 Advapi32 的 Javadocs 中是重复的（上面也有链接），但是该文档并没有将您链接到各种函数之间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:21:53.517

感谢 Headstart 但是我建议对代码进行一些更改：

```
 W32ServiceManager serviceManager = new W32ServiceManager("TPADDCM13", null);   
    serviceManager.open(Winsvc.SC_MANAGER_ALL_ACCESS); //here is the change 
    W32Service service = serviceManager.openService("DmServerSppdev02",  
    Winsvc.SC_MANAGER_ALL_ACCESS);  
   if( service.queryStatus().dwCurrentState != Winsvc.SERVICE_RUNNING)//here
   {
       service.startService(); 
       service.close();
       System.out.println("Done");       } 
```

谢谢你的帮助我做到了:)

# jpa - 使用 Play 框架提交事务

> ID：10384703
> 
> 赞同：2
> 
> 时间：2012-04-30T13:43:12.990
> 
> 标签：jpa, transactions, playframework

我有一个长时间运行的过程（视频渲染），其中偶尔会更新数据库以指示进度。但是，如何在不为其他进程锁定数据库的情况下做到这一点。我尝试使用 @NoTransaction 注释，但现在似乎没有对数据库进行任何更新。

在如此漫长的过程中，有没有办法在需要时创建一个事务？即搜索对象并将其保存在变量中，然后打开事务、进行更改、保存并关闭事务，以便将其提交到数据库。（那里可能需要刷新，但这很好）。

有什么建议么？我只能在 Play 中找到回滚功能！文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:34:51.660

如果您使用的是 Play 1.2.4，请查看有关[作业](http://www.playframework.org/documentation/1.2.4/jobs)的文档。这应该适用于您的任务。

如果您使用的是 Play 2.0，您可能需要查看[此处](http://www.playframework.org/documentation/2.0/JavaAsync)的异步编程部分。

# r - 给定均值和标准差的 rnorm 的最大和最小密度

> ID：10384707
> 
> 赞同：0
> 
> 时间：2012-04-30T13:43:22.283
> 
> 标签：r, plot

我有看起来像这样的数据。我想在给定标准偏差 ( `SD`) 和平均值 ( `MEAN`) 列表的情况下找到最大和最小密度：

```
info0 info1 info2 SD Mean
10x     0       e0      0.38    1.14
10x     0       e2      0.74    1.48
10x     0       e4      1       1.85
10x     0       e6      1.24    2.27
10x     0.1     e0      0.35    1.13
10x     0.1     e2      0.69    1.44
10x     0.1     e4      0.96    1.82
10x     0.1     e6      1.21    2.23
10x     0.5     e0      0.34    1.12
10x     0.5     e2      0.67    1.4
10x     0.5     e4      0.95    1.75
10x     0.5     e6      1.19    2.17
10x     1       e0      0.29    1.09
10x     1       e2      0.59    1.32
10x     1       e4      0.87    1.66
10x     1       e6      1.11    2.06
10x     2       e0      0.23    1.06
10x     2       e2      0.5     1.24
10x     2       e4      0.79    1.54
10x     2       e6      1.04    1.9
10x     4       e0      0.22    1.0.5
10x     4       e2      0.41    1.15
10x     4       e4      0.65    1.37
10x     4       e6      0.91    1.7 
```

我试过这个但失败了。

```
dat <- read.table("test.dat", header = TRUE)
densities <- apply(dat[, 4:5], 1, function(x) rnorm(n = 1000000, mean = x[2], sd = x[1]))

maxden <- max(densities)
minden  <- min(densities) 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:58:59.983

我首先建议你不要对如此庞大的数据集和如此大量`n`的`rnorm`. 这使得`browser`在代码中抛出 a 并弄清楚发生了什么变得容易。首先，数据中的平均值是一个因素，因为您对格式化做了一些事情。

```
 str(dat)
'data.frame':   24 obs. of  5 variables:
 $ info0: Factor w/ 1 level "10x": 1 1 1 1 1 1 1 1 1 1 ...
 $ info1: num  0 0 0 0 0.1 0.1 0.1 0.1 0.5 0.5 ...
 $ info2: Factor w/ 4 levels "e0","e2","e4",..: 1 2 3 4 1 2 3 4 1 2 ...
 $ SD   : num  0.38 0.74 1 1.24 0.35 0.69 0.96 1.21 0.34 0.67 ...
 $ Mean : Factor w/ 24 levels "1.0.5","1.06",..: 6 13 19 24 5 12 18 23 4 11 ... 
```

这必须在代码中解决。

现在我们可以看到使用代码来获得我们想要的东西（当您实际使用它时，您必须调整 rnorm 中的 n 并为代码提供更多行，但出于测试目的，这是理想的）：

```
densities <- apply(dat[1:10, 4:5], 1, function(x) {
        rnorm(n = 10, mean = as.numeric(x[2]), sd = as.numeric(x[1]))
    }
) 
```

# c - 与等效的二维数组混淆

> ID：10384711
> 
> 赞同：1
> 
> 时间：2012-04-30T13:43:41.100
> 
> 标签：c, arrays

我的行大小是固定的，但列大小一直在变化。这就是为什么我想在列级别使用指针。但我不确定如何在 C 中使用此功能。请帮助我。

```
int array[rows][columns]; //row size fixed but column size is not fixed. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:48:55.887

您需要声明一个指针数组。像这样：

```
int *array[rows]; 
```

后来根据需要，给每一行分配内存。您可以为此使用 malloc 或 calloc 函数。

```
for(int i=0; i<rows; i++){
    array[i] = (int *) malloc(columns * sizeof(int));
} 
```

此方法还允许具有不同大小的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:49:11.843

如果除了一个维度之外的所有数组都是固定的，这就是您描述的情况，您可以避免使用指针数组：您可以将一行定义为`int[rows]`，并创建一个行数组，如下所示：

```
typedef int row_t[rows]; 
```

现在您可以传递由如下数组组成的二维数组`row_t`：

```
int total(row_t array[], int len) {
    int res = 0;
    for (int c = 0 ; c != len ; c++) {
        for (int r = 0 ; r != rows ; r++) {
            res += array[r][c];
        }
    }
    return res;
}

int main() {
    row_t *matrix = malloc(columns*sizeof(row_t));
    for (int c = 0 ; c != columns ; c++) {
        for (int r = 0 ; r != rows ; r++) {
            matrix[r][c] = r*r+c*c;
        }
    }
    printf("%d\n", total(matrix, columns));
    free(matrix);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:49:20.300

您不能在数组维度中使用变量，因此请使用指向指针的指针

```
int **array;

array = (int **)malloc(sizeof(int *) * rows);
for (int i = 0; i < rows; ++i) {
    array[i] = (int *)malloc(sizeof(int) * columns); 
    for (int j = 0; j < columns; j++) {
       array[i][j] = value;
    }
} 
```

当然不要忘记释放它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T13:51:14.467

您可以通过拥有一个 int* 数组来做到这一点，例如

```
int* array[row];
for (int i = 0; i < row; ++i)
    array[i] = (int*)malloc(i * sizeof(int)); 
```

然后您可以像访问静态数据一样访问数据。

```
int val = array[myRow][myColumn]; 
```

您必须确保以与分配内存相同的模式释放内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T13:57:43.950

自 13 年以来，现在 C 允许在声明数组时使用动态大小。这称为可变长度数组，VLA。

如果你真的有大数组，这可能会爆炸你的堆栈。但是您仍然可以`malloc`使用 2D 数组的所有简单性来分配这样的野兽：

```
size_t n = SOME_COMPLICATED_VALUE;
size_t m = ANOTHER_ONE;
double (*A)[n] = malloc(double[m][n]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T14:20:05.357

如果每一行可以有不同的列数，那么一般的做法是声明一个指针数组，然后为每一行动态分配该行的元素数：

```
int *array[ROWS];

array[i] = malloc(sizeof *array[i] * number_of_columns_for_row_i); 
```

请注意，完成后，您必须单独释放每一行：

```
for (i = 0; i < ROWS; i++)
  free(array[i]); 
```

如果所有行的列数都*相同*，但对于数组的每个实例，该数字可能会发生变化，那么您有多种选择。如果您使用的是符合 C99 的编译器，则可以使用*可变长度数组*，其中数组维度直到运行时才知道：

```
int columns;

// get number of columns somehow

int array[ROWS][columns]; 
```

VLA 很方便，但也有其局限性；它们不能是成员`struct`或`union`类型，也不能被声明`static`或在文件范围内。这种方法的最大优点是您不必担心在完成后释放任何东西。这种方法的最大*缺点*是您可能没有足够的内存来满足请求；与动态分配对象的内存相比，可用于变量的内存空间`auto`通常非常有限。此外，语言标准 (C11) 的最新版本使 VLA 成为可选，因此它们可能不会在未来的所有实现中都可用。

或者，您可以像这样动态分配数组：

```
int (*array)[ROWS];
int columns;

// get number of columns somehow

array = malloc(sizeof *array * columns); 
```

请注意，这一次，`array`是*指向 的数组`int`*的指针，而不是指向 的指针数组`int`。这种方式的好处是数组内存是连续分配的，`free`-ing内存就像写一样简单

```
free(array); 
```

缺点是如果你的数组*真的很大*或者动态内存池*真的很碎片化*，你可能没有足够大的内存块来满足请求。

如果您*不需要*连续分配所有行，则使用第一种单独分配每一行的方法；只需对列数使用相同的值：

```
int *array[ROWS];
int columns;

// get number of columns

for (i = 0; i < ROWS; i++)
  array[i] = malloc(sizeof *array[i] * columns); 
```

# jquery - jquery对话框高度和宽度问题

> ID：10384712
> 
> 赞同：1
> 
> 时间：2012-04-30T13:43:43.130
> 
> 标签：jquery, jquery-ui

最初我在页面中心显示具有固定高度和宽度的 jquery 对话框。现在我想在对话框中放置一个包含大量 html 内容的 div。现在我想根据具有动画功能的 div 高度和宽度动态增加对话框高度和宽度，但我希望该对话框应位于页面中心。

当对话框第一次在页面中心打开时，稍后如果我更改高度和宽度，则对话框不在页面中心。因此，请帮助我了解当高度和宽度将随动画功能增加时如何强制对话框粘贴在页面中心的概念。

## 这样我正在使用对话框....这是我的小代码

```
 $(document).ready(function () {

         $("#dialog").dialog({
             autoOpen: false,
             bgiframe: true,
             height: 85,
             width: 330,
             modal: false,
             draggable: true,
             resizable: false,
             position: 'center',
             show: {
                 effect: "fade",
                 duration: 1000
             },
             hide: {
                 effect: "fade",
                 duration: 500
             },
             open: function (type, data) {
                 $(this).parent().appendTo("form");
             }
         });
         }); 
```

如果可能的话，请向我展示示例代码的技巧。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:52:41.723

您可以简单地使用对话框的“minHeight”选项，而不是将 javascript 观察程序放在 div 上。

[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/) -> 选项

这使您的代码看起来像这样：

```
 $("#dialog").dialog({
         autoOpen: false,
         bgiframe: true,
         minHeight: 85,
         width: 330,
         modal: false,
         draggable: true,
         resizable: false,
         position: 'center',
         show: {
             effect: "fade",
             duration: 1000
         },
         hide: {
             effect: "fade",
             duration: 500
         },
         open: function (type, data) {
             $(this).parent().appendTo("form");
         }
     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:47:53.443

你可以试试这个：**[DEMO](http://jsfiddle.net/NBzL9/)**

这会自动动态增加对话框的高度

HTML：

```
<div id="dialog">
    <div id="body">I'm a dialog</div>
</div> 
```

脚本：

```
<script>
     $('#dialog').dialog(
      "resize", "auto"
     );
     $('#dialog').dialog();
     setTimeout(function() {
        $('#body').append("Hello!<br>");
        setTimeout(arguments.callee, 1000);
      }, 1000);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:50:46.183

好的，如果不考虑如何调整元素的大小，这会起作用吗？

```
$(#dialog).resize(function(){
    var $host = $("#idOfParent");
    var hostHeight = $host.Height();
    var hostWidth = $host.Width();
    // center dialog on screen
    this.left = (hostWidth - this.width) / 2
    this.top= (hostHeight - this.height) / 2
}); 
```

[http://api.jquery.com/resize/](http://api.jquery.com/resize/)

# windows - Windows server 2008 R2 中的动态文件加密

> ID：10384718
> 
> 赞同：0
> 
> 时间：2012-04-30T13:43:56.063
> 
> 标签：windows, encryption, backup, gnupg

在通过 FTP 将文件复制到远程存储时，是否可以在 Windows 中“即时”加密文件？

我不知道这个描述是否足够好，但我想做一些事情`gpg -e file > ftp://xxx`

还是我只需要依靠cygwin？

我使用的是 Windows Server 2008 R2，我正在复制的文件大小约为 750GB，因此无法先对其进行加密然后再复制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:48:23.450

通过 ftp 写入本地存储的文件将仅反映从客户端发送给它的字节。收到后必须对其进行加密，b 因为据我所知 ftp 没有本机加密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:58:11.430

没有任何内置到 FTP 的东西。如果您使用 SFTP 或 SCP，或基于 SSL/TLS 的 WEBDEV，您可以获得传输加密，但另一端的数据仍将被加密。事实上，FTP 中缺乏加密（用于传输）是开发 SFTP 的原因

如果你不介意写一些代码，你可以让 C# 加密数据，因为它很容易复制它。

从 AES 获取加密流，然后使用网络流/ftp 流简单地返回流。这应该避免将数据写回磁盘。您只需一次读取几个字节的磁盘，加密，然后将数据写入网络。

你也许可以用 powershell 做类似的事情。

# symfony - 你如何在 Symfony2 中压缩包含的 Twig JavaScript 文件？

> ID：10384719
> 
> 赞同：0
> 
> 时间：2012-04-30T13:44:03.053
> 
> 标签：symfony, twig

在 Symfony2 中，我有许多标准 JavaScript 文件，我使用 Twig YUI 过滤器将它们包含并压缩到一个文件中，如下所示：

```
{% javascripts
    '@WebIlluminationShopBundle/Resources/public/js/jquery.js' 
    '@WebIlluminationShopBundle/Resources/public/js/ui.js' 
    '@WebIlluminationShopBundle/Resources/public/js/tools.js' 
    '@WebIlluminationShopBundle/Resources/public/js/overlay.js' 
    '@WebIlluminationShopBundle/Resources/public/js/uniform.js' 
    '@WebIlluminationShopBundle/Resources/public/js/slider.js' 
    '@WebIlluminationShopBundle/Resources/public/js/global.js' 
    output='js/shop-compressed.js' filter='yui_js' %}
    <script src="{{ asset_url }}" type="text/javascript"></script>
{% endjavascripts %} 
```

然后在我的 Twig 模板中包含特定的 JavaScript Twig 文件，这些文件将数据作为来自控制器的变量传递给它们：

```
{% include 'SomeCompanySomeBundle:ControllerName:testScript.js.twig' with {'variable1': variable1, 'variable2': variable2} %} 
```

有没有办法像我使用 YUI 过滤器使用的主要 JavaScript 文件一样压缩这个 JavaScript？

这可能是不可能的，但只是想知道是否有人肯定是新人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:56:36.473

Twig 生成的 JS 文件需要在每次请求时使用 Twig 上下文刷新，儿子这是不可能的！

# c# - 从 ParameterInfo 获取所有嵌套类型

> ID：10384733
> 
> 赞同：2
> 
> 时间：2012-04-30T13:44:43.723
> 
> 标签：c#, reflection

对于我正在开发的应用程序，我正在尝试显示一个模板，该模板将显示（运行时确定的）方法的参数是什么样的。我正在处理的测试用例应该显示“PERSON = (FIRST = first; LAST = last);”，其中名为 Person 的参数具有 Name 类型，Name 有两个属性，First 和 Last。以下代码改为显示“PERSON = ();”。

GetNestedTypes 没有返回任何东西，有什么想法吗？

```
public static string GetParameterTemplate(MethodInfo method)
{
    StringBuilder output = new StringBuilder();
    foreach (ParameterInfo pi in method.GetParameters())
    {
        output.Append(parameterTemplateHelper(pi.Name, pi.ParameterType));
    }
    return output.ToString();
}

private static string parameterTemplateHelper(string pName, Type pType)
{
    string key = pName.ToUpper();
    string value = "";

    if (pType.IsPrimitive)
    {
        // it's a primitive
        value = pName.ToLower();
    }
    else if (pType.IsArray)
    {
        if (pType.GetElementType().IsPrimitive)
        {
            // array of primitives
            value = String.Format("{0}1, {0}2;", pName.ToLower());
        }
        else
        {
            // array of objects
            StringBuilder sb = new StringBuilder();
            foreach (Type t in pType.GetElementType().GetNestedTypes(BindingFlags.Public | BindingFlags.NonPublic))
            {
                sb.Append(parameterTemplateHelper(t.Name, t));
            }
            value = String.Format("({0}), ({0});", sb);
        }
    }
    else
    {
        // object
        StringBuilder sb = new StringBuilder();
        Type[] junk = pType.GetNestedTypes(BindingFlags.Public | BindingFlags.NonPublic);
        foreach (Type t in pType.GetNestedTypes())
        {
            sb.Append(parameterTemplateHelper(t.Name, t));
        }
        value = String.Format("({0});", sb.ToString());
    }

    string output = key + " = " + value.ToString();
    return output;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:51:15.447

您的代码正在寻找嵌套类型 - 即在`Person`. 这*与*在`Person`.

这是一个具有嵌套类型的类：

```
public class Name
{
    public class Nested1 {}
    public class Nested2 {}
} 
```

这是一个具有属性的类：

```
public class Name
{
    public string Name { get; set; }
    public string Name { get; set; }
} 
```

我的猜测是，你的情况更像是第二个而不是第一个......所以使用`Type.GetProperties`而不是`Type.GetNestedTypes`.

# mysql - HTTP 标头中的 unicode 用户代理是否合法？

> ID：10384741
> 
> 赞同：10
> 
> 时间：2012-04-30T13:45:20.210
> 
> 标签：mysql, http, user-agent

我正在维护的应用程序使用“latin1”字符集将从 Web 日志中提取的用户代理加载到 MySQL 表列中。有时，它无法加载如下所示的用户代理：

`Mozilla/5.0 (Iâ?; CPU iPhone OS 5_0_1 like Mac OS X) AppleWebKit/534.46 (KHTML^C like Gecko) Version`

我怀疑它正在窒息`Iâ?`。我正在努力弄清楚是否应该支持它，或者它是否是上游日志系统引入的损坏。这是 HTTP 标头中的合法用户代理吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-30T13:52:50.750

RFC 2616 (HTTP 1.1)[规定](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2)消息头内容必须是*“由`*TEXT`令牌、分隔符和引用字符串中的一个或组合组成”*。如果您查看 TEXT 等的[定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html#sec2.2)，您会发现合法字符是那些字节值不在 [0, 31] 范围内且不等于 127 的字符；`â`因此，据我所知，根据规范，诸如此类的字符是合法的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T14:30:11.967

从技术上讲，注释中允许使用大于 127 的八位字节。RFC 2616 使它们默认为 ISO-8859-1，但 HTTPbis（即将发布的 RFC 2616 修订版）删除了该规则，因此有时在遥远的将来，我们可能能够转向理智的编码。

建议：去除所有大于 127 的八位字节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T13:59:52.880

HTTP 1.1 [RFC2616](https://www.rfc-editor.org/rfc/rfc2616)参考 ISO-8859-1，它是一个基于拉丁文的单字节字符集。

考虑到 HTTP 流量**应该是**单字节的，我也将 latin1 字符集用于我的类似日志。决定只是让我的索引更小。

如果将 UTF8 与 VARCHAR 一起使用，则只有多字节的字符需要额外的字节，因此在表空间中，它并不多。但是，索引以固定宽度存储，因此，它们会用空格填充以备不时之需（UTF8 索引是 latin1 索引的三倍）。

如果偶尔的奇怪标题不可读，它不会影响我。但是，如果您不为该列编制索引，则不妨使用 UTF8。

# objective-c - 从 NSDictionary 获取数据

> ID：10384742
> 
> 赞同：0
> 
> 时间：2012-04-30T13:45:20.683
> 
> 标签：objective-c, ios, xcode, nsdictionary

我有两个 json 文件，它们由 key country_id （一个国家 - 许多城市）链接，数据来自我在`NSDictionary`s 中编写的 json 文件。

问题：如果我从第一个`NSDictionary`（国家数据字典）中选择一个国家，如何在其他字典（城市数据字典）中显示绑定到所选国家 ID 的所有数据？

* * *

**我试过什么？**

我接下来尝试做：检查第二个（城市数据字典）的所有键值`NSDictionary`是否等于所选的county_id

```
 //dict3 - dictionary of cities data
  for (int i = 0; i<=[[dict3 valueForKey:@"country_id"] count];i++)
      {
      if ([[[dict3 valueForKey:@"country_id"] objectAtIndex:i] isEqualToString:appDelegate.idSelectedCountry])
      {
        NSLog(@"object %@",[nameCities objectAtIndex:i]);   //array of cities name
      }} 
```

但是因为我的 JSON 文件很大，所以计算时间太长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:50:45.770

您应该将**核心数据**用于此类事情，并与 City 和 Country 实体建立关系。它会更快，更正确。看这个教程： [http ://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

**更新**：如果您出于某些原因想要像现在一样真正使用 NSDictionary，您至少可以使用块。它比循环快一点：

```
[dictionary enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop){
    [self processKey:key value:obj];
}]; 
```

# c# - 将 smallint 转换为 int 的 Datarow 字段扩展方法

> ID：10384743
> 
> 赞同：3
> 
> 时间：2012-04-30T13:45:22.023
> 
> 标签：c#, sql-server, int, extension-methods, field

我在 SQL Server 中有一列`smallint`类型。我通过 Ado.net 阅读了包含此字段的行。

当我得到`DataRow`那个 SQL Server 行时，我尝试将它转换为整数，如下面的代码：

```
int value = datarow.Field<int>("myColumnName"); 
```

因为领域是`smallint`，我觉得我应该转换成`int`。但它抛出一个异常说

> 指定的演员表无效......

我不想使用`Convert.ToInt32`或其他功能。我想使用 Datarow 的字段扩展方法。我怎样才能做到这一点？
**编辑：**

```
datarow.Field<int>("myColumnName"); // doesnt work
datarow.Field<Int16>("myColumnName"); // doesnt work
datarow.Field<short>("myColumnName"); // doesnt work
Convert.ToInt32(datarow["myColumnName"]) // works but i dont want it 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:51:47.393

请参阅[SQL Server 数据类型映射 (ADO.NET)](http://msdn.microsoft.com/en-us/library/cc716729.aspx)。

`SMALLINT`是 SQL Server 中的 16 位整数，因此它映射到`Int16`.NET

因此，您应该使用

```
Int16 value = datarow.Field<System.Int16>("MyColumnName") 
```

读取值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T07:30:23.020

使用，datarow.Field<byte>("myColumnName");

# c# - 从 XML 更新 SQL Server 表

> ID：10384745
> 
> 赞同：4
> 
> 时间：2012-04-30T13:45:43.930
> 
> 标签：c#, .net, xml, sql-server-2008, tsql

我正在尝试在 C# 中创建一个小型控制台应用程序，以便根据 XML 文件的内容以最快的方式在 SQL Server 2008 中的产品表 (ITEMS) 上执行插入操作。我已经有一个 .XSD 文件，其中包含到 SQL 表的正确映射（对于下面概述的方法，这可能不是必需的）。

这是我的方法的高级：

1.  读取 XML，使用它来创建表。
2.  使用从 XML 文件创建的表对 ITEMS 表执行 MERGE。
    2a。如果该项目存在，请更新它。
    2b。如果该项目不存在，则插入它。
3.  创建仅包含插入 XML 的记录的日志。

考虑以下 ITEMS 表和 XML 文件：

**项目**

```
 Item_Id    Name    Price  
     1       Coke     5.00  
     2       Pepsi    3.00  
     3       Sprite   2.00 
```

**项目.XML**

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
   <Item>
    <Id>5</Id>
    <Name>Mountain Dew</Name>
    <Price>4.50</Price>
   </Item>
   <Item>
    <Id>3</Id>
    <Name>Sprite Zero</Name>
    <Price>1.75</Price>
   </Item> 
```

导入后，ITEMS 表应如下所示：

**项目**

```
 Item_Id    Name         Price  
     1       Coke          5.00  
     2       Pepsi         3.00  
     3       Sprite Zero   1.75  
     5       Mountain Dew  4.50 
```

完成后，我还需要生成一个 XML 格式的日志文件，其中包含插入到表中的“新”记录 (ITEMS_LOG.XML)：

**项目日志.XML**

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
   <Item>
    <Id>5</Id>
    <Name>Mountain Dew</Name>
    <Price>4.50</Price>
   </Item> 
```

我曾尝试使用 SQLXMLBulkLoad 来实现这一点，但不幸的是，它没有提供我需要的日志记录，也不允许我访问从 SQL Server 返回的任何消息（即插入/更新的消息）。尽管我有中级的 SQL 专业知识，但我对使用 XML 还是很陌生，尤其是在这种情况下。任何帮助/指导将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T09:03:38.493

您可以使用`merge`with`output`到表变量，然后查询表变量以构建日志 XML。

将它放在一个存储过程中，您将项目 XML 作为输入参数，将日志 XML 作为输出参数。

```
create procedure AddItemXML
  @ItemsXML xml,
  @ItemsLogXML xml out
as

declare @Changes table
(
  Item_Id int,
  Name nvarchar(20),
  Price money,
  Action nvarchar(10)
);

merge Items as T
using
  (
    select T.N.value('Id[1]', 'int') as Item_Id,
           T.N.value('Name[1]', 'varchar(20)') as Name,
           T.N.value('Price[1]', 'money') as Price
    from @ItemsXML.nodes('/Item') T(N)
  ) as S
on T.Item_Id = S.Item_Id
when matched then
  update set Name = S.Name, Price = S.Price
when not matched then
  insert (Item_Id, Name, Price) values (S.Item_Id, S.Name, S.Price)
output inserted.Item_Id,
       inserted.Name,
       inserted.Price,
       $action 
  into @Changes;

set @ItemsLogXML = 
  (
    select Item_Id as ID,
           Name,
           Price
    from @Changes
    where Action = 'INSERT'
    for xml path('Item'), type
  ); 
```

[SE-Data 的](https://data.stackexchange.com/stackoverflow/query/68762/merge-xml)工作样本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T08:27:50.713

希望这对您有所帮助，我所做的是创建一个存储过程，如下所示。基本上，存储过程采用 xml 值并检查从代码传递的标志并确定它是插入还是更新：

```
DECLARE @xml xml
SET @xml = @xmlCredentials

SELECT
      item.value('@Id', 'int') As ID,
      item.value('@AgentID', 'int') As AgentID,
      item.value('@Username', 'varchar (50)') As Username,
      item.value('@Password', 'varchar (50)') As [Password],
      item.value('@IsDirty', 'bit') As IsDirty,
      item.value('@IsDeleted', 'bit') As IsDeleted
INTO #tmp
FROM @xml.nodes('Credentials/Credential') x(item)

BEGIN TRY
BEGIN TRAN
      INSERT INTO Credentials (AgentID, Username, [Password])
          SELECT
              AgentID, Username, [Password]
          FROM
              #tmp
          WHERE
              ID = 0 AND IsDirty = 1
      UPDATE c
      SET c.[AgentID] = t.AgentID,
          c.[Username] = t.Username,
          c.[Password] = t.[Password]
      FROM
          [dbo].[Credentials] c
      JOIN 
          #tmp t ON t.Id = c.ID
      WHERE
          t.IsDirty = 1 AND t.IsDeleted = 0

      DELETE FROM [dbo].[Credentials]
      FROM [dbo].[Credentials] c
      JOIN #tmp t ON t.Id = c.ID
      WHERE 
          t.IsDirty = 1 AND t.IsDeleted = 1

      COMMIT TRAN
END TRY
BEGIN CATCH

      IF @@TRANCOUNT > 0
            ROLLBACK TRAN

      DECLARE @errorMSG varchar(4000)
      DECLARE @errorSeverity int
      DECLARE @errorState int

      SET @errorMSG = ERROR_MESSAGE()
      SET @errorSeverity = ERROR_SEVERITY()
      SET @errorState = ERROR_STATE()

      RAISERROR (@errorMSG,
                        @errorSeverity, @errorState);

END CATCH

SELECT [ID], [AgentID], [Username], [Password]
FROM [dbo].[Credentials] 
```

在后面的代码中，我有我的 xml 并将 xml 作为参数传递给存储过程：

```
// read xml and assign it to string variable
string xml = readxml();

try
{
    string command = "EXEC SaveCredentails '" + xml + "'";
}
catch(Exception e)
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:24:53.813

我会使用临时表将 xml 导入 SQL Server 表。添加一个额外的列来指示操作（插入或更新）。然后像往常一样使用常规 sql 执行 upserts。然后，您可以使用临时表生成所需的 XML 日志记录（读取操作列以确定它是插入还是更新）。

# activemq - ActiveMQ消息确认

> ID：10384748
> 
> 赞同：1
> 
> 时间：2012-04-30T13:45:59.540
> 
> 标签：activemq

有什么方法可以让我仅根据消息 ID 确认消息。我的场景是这样的：

1.  Web 服务从带有 ActiveMQSession.INDIVIDUAL_ACKNOWLEDGE 的 activemq 接收到消息。
2.  将此消息发送给客户端。
3.  客户端在使用消息 id 处理后发送确认

这里的要求是 web 服务应该能够根据消息 id 确认消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:36:12.477

现在，您只能调用相应消息对象上的确认（）方法来确认该特定消息。但请记住，在代理中不存在的消息对象上调用确认（）方法将导致“无法将确认与分派的消息相关联”异常。

# events - （如何访问）GWT 的 Datagrid 的 Scrollbar

> ID：10384749
> 
> 赞同：1
> 
> 时间：2012-04-30T13:46:08.187
> 
> 标签：events, gwt, datagrid

所以我可以添加例如事件？当您到达滚动条的末尾时，我想让数据网格自动加载更多记录（如展示示例，唯一的区别是我使用的是数据网格）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:39:16.923

使用 OnScroll 事件加载更多数据。

# vb.net - VB .net - 存储过程 - 行数计数

> ID：10384751
> 
> 赞同：0
> 
> 时间：2012-04-30T13:46:08.663
> 
> 标签：vb.net

我又回来了，因为我正在等待咖啡开始，还有另一个问题，似乎没有导致我的脑细胞正常放电。

我设置了以下代码来确定从过程循环返回的所有行的行号。

```
linenum = 0
Do While (rsData.Read())
  linenum = linenum + 1
loop 
```

现在我正在尝试编写一个按钮，该按钮将根据返回的行号将用户移动到不同的部分。

因此，如果只有一个值为 1 的 linenum，他们会获得一个“应用”按钮。

如果总 linenum 值大于 1，他们会得到一个按钮来“选择应用日期”。

现在我又在放屁了，如果有一个 1+ 的 linenum 如何确定应该显示的按钮，我想不出逻辑。它需要包含 1 的值以及不止一个 linenum，因此按钮应显示“选择应用按钮”。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:50:40.050

`DataTable`我认为填充并使用行索引或从存储过程返回行号会更好。

```
SELECT ROW_NUMBER() OVER(ORDER BY SalesYTD DESC) AS Row, FirstName, LastName, ROUND(SalesYTD,2,1) AS YTD 
FROM Sales.vSalesPerson
WHERE TerritoryName IS NOT NULL AND SalesYTD <> 0 
```

看起来您`SqlDataReader`当前正在使用 a ，因此调整起来应该不会太困难，因此它会返回 a `DataTable`：

```
DataTable table = new DataTable();

using (SqlDataAdapter adap = new SqlDataAdapter(cmd))
{
    adap.Fill(table);        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:51:12.693

不清楚您要完成什么，但要直接回答您的问题：

```
if linenum = 0 then
  mybutton.visible = false
else if linenum = 1 then
  mybutton.visible = true
  mybutton.text = "Apply"
else
  mybutton.visible=true
  mybutton.text = "Apply select"
end if 
```

但我认为，如果 linenum > 1，您还必须在某个地方为用户提供要从中选择的事物列表，以及选择其中一个的方法。比如建立一个下拉框什么的。

# php - (PHP) 图片无法显示，因为它包含错误

> ID：10384756
> 
> 赞同：1
> 
> 时间：2012-04-30T13:46:19.180
> 
> 标签：php, image, show

我已经阅读了几乎所有与此相关的主题。我不知道是什么原因造成的。

这是显示图像的代码

```
<html>
<body>
<?php 

                    mysql_connect('localhost','root','') or die("Unable to Connect: ".mysql_error());
                    mysql_select_db("punjabi") or die("Unable to Select Database: ".mysql_error());

                    $sql = "SELECT imagename, mimetype, imagedata
                            FROM images WHERE ID = 1";

                    $result = @mysql_query($sql);
                    if(!$result)
                    {
                        die(mysql_error());
                    }

                    $file = mysql_fetch_array($result);

                    $imagename = $file['imagename'];
                    $mimetype = $file['mimetype'];
                    $imagedata = $file['imagedata'];

                    header("content-type: $mimetype");

                    echo($imagedata);

?> 
```

这是插入图像的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Add Post</title>
<style type="text/css">
    *
    {
        margin:0px;
        padding:0px;
    }
</style>

</head>

<body bgcolor="#333333">

<?php if(isset($_POST['submit'])):
        {

            if (!is_uploaded_file($_FILES['uploadfile']['tmp_name']))
            {
                die("$uploadfile is not an uploaded file!");
            }

            $uploadfile = $_FILES['uploadfile']['tmp_name'];
            $uploadname = $_FILES['uploadfile']['name'];
            $uploadtype = $_FILES['uploadfile']['type'];
            $uploaddesc = $_POST['desc'];

            $tempfile = fopen($uploadfile,'rb');
            $filedata = fread($tempfile,filesize($uploadfile));
            $filedata = addslashes($filedata);
            $sql = "INSERT INTO images SET
            imagename = '$uploadname',
            mimetype = '$uploadtype',
            description = '$uploaddesc',
            imagedata = '$filedata'";
            $ok = @mysql_query($sql);
            if (!$ok) die("Database error storing file: " .mysql_error());

            $sql = "Select id from images where imagename = '$uploadname'";
            $result = @mysql_query($sql);
            if(!$result) die(mysql_error());
            if(mysql_num_rows($result)!=1) die(mysql_error());

            $row = mysql_fetch_array($result);
            $imageid = $row['id'];

            $title = $_POST['title'];
            $content = $_POST['content'];

            $sql = "INSERT into posts SET
                    title = '$title',
                    content = '$content',
                    imageid = '$imageid'";
            if(!@mysql_query($sql))
            {
                die(mysql_error());
            }

            header("Location:http://localhost/punjabi/adminhome.php");  

        }

?>

<?php else: ?>

    <div id="post">
        <form action="<?php echo($_SERVER['PHP_SELF']) ?>" method="post" enctype="multipart/form-data" >
            Title: <input type="text" name="title" /><br /><br /><br />
            Content:<br /> <textarea cols=100 rows="40" wrap="hard" name="content" /></textarea><br /><br />
            Image: <input type="file" name="uploadfile" /><br /><br />
            Image Desc: <input type="text" name="desc" /><br /><br />
            <input type="submit" value="Submit" name="submit" />
        </form>
    </div>

<?php endif; ?>
</body>
</html> 
```

这是表结构：

```
CREATE TABLE filestore (
-> ID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
-> FileName VARCHAR(255) NOT NULL,
-> MimeType VARCHAR(50) NOT NULL,
-> Description VARCHAR(255) NOT NULL,
-> FileData MEDIUMBLOB
->); 
```

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:48:11.667

问题是，当您这样做时，标头已经发送：

```
<html>
<body>
<?php 
```

所以你不能再为图像设置标题：

```
header("content-type: $mimetype"); 
```

只需在 php 标记解决该问题之前摆脱 html（图像不是 html / 文本）即可。

# python - Numpy 数组元素除法（1/x）

> ID：10384757
> 
> 赞同：14
> 
> 时间：2012-04-30T13:46:19.053
> 
> 标签：python, numpy, division

我的问题很简单，假设我有一个像

```
array = np.array([1, 2, 3, 4]) 
```

我想得到一个像

```
[1, 0.5, 0.3333333, 0.25] 
```

但是，如果你写类似

```
1/array 
```

或者

```
np.divide(1.0, array) 
```

它行不通。

到目前为止，我发现的唯一方法是编写如下内容：

```
print np.divide(np.ones_like(array)*1.0, array) 
```

但我绝对肯定有更好的方法来做到这一点。有谁有想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-30T13:48:22.320

`1 / array`进行整数除法并返回`array([1, 0, 0, 0])`.

`1\. / array`将数组转换为浮动并完成技巧：

```
>>> array = np.array([1, 2, 3, 4])
>>> 1\. / array
array([ 1\.        ,  0.5       ,  0.33333333,  0.25      ]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T13:49:33.163

我试过 ：

```
inverse=1./array 
```

这似乎有效......原因

```
1/array 
```

不起作用是因为您的数组是整数并且进行`1/<array_of_integers>`整数除法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-11T03:04:19.290

获取整数数组中每个元素的倒数的其他可能方法：

```
array = np.array([1, 2, 3, 4]) 
```

使用 numpy 的倒数：

```
inv = np.reciprocal(array.astype(np.float32)) 
```

投掷：

```
inv = 1/(array.astype(np.float32)) 
```

# windows-phone-7 - 如何禁用水平滚动条进入枢轴控件WP7。？

> ID：10384762
> 
> 赞同：0
> 
> 时间：2012-04-30T13:46:31.457
> 
> 标签：windows-phone-7

我有图像，我也在缩放这个图像拖动这个图像并在这个画布上移动，

所以画布在枢轴控件内，一旦我尝试从左到右移动，它将转到下一个枢轴项，所以我想将此水平滚动条停止到此枢轴项中。？

注意：我曾尝试使用 Touch.FrameReported，但在我的情况下不值得。

谢谢..！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:52:34.107

[您可以尝试使用Silverlight Toolkit for Windows Phone](http://silverlight.codeplex.com/releases/view/75888)中的 Lockable Pivot 控件：-

[http://www.windowsphonegeek.com/articles/Windows-Phone-Toolkit-LockablePivot-in-depth](http://www.windowsphonegeek.com/articles/Windows-Phone-Toolkit-LockablePivot-in-depth)

# asp.net - Foreach MVC3 MembershipUser

> ID：10384764
> 
> 赞同：-1
> 
> 时间：2012-04-30T13:46:36.227
> 
> 标签：asp.net, c, asp.net-mvc-3, foreach

我已经实现了一个继承 TableServiceEntity 的类，它添加了一些名为 UserEntity 的属性。

在一个视图中，我想做一个 foreach 循环来显示所有这样的条目：

```
@model MembershipUserCollection 
```

如果我做

```
 @foreach (UserEntity user in Model) {

     <td>

        @Html.DisplayFor(modelItem => user.ID_client)
    </td>
     <td>
        @Html.DisplayFor(modelItem => user.Username)
    </td>
....
....

} 
```

VS2010 告诉我不能将对象类型从“System.Web.Security.MembershipUser”转换为“AzureTableStorage.UserEntity”。

如果我改变模型

```
@model UserEntity 
```

这向我展示了另一个错误..

foreach 语句无法对“UserEntity”类型的变量进行操作，因为“UserEntity”不包含“GetEnumerator”的公共定义

并且 UserEntity 类具有这样声明的属性..

```
 public class UserEntity : TableServiceEntity
   {

    public UserEntity(string partitionKey, string rowKey) : base(partitionKey, rowKey)
    {
    }

    public UserEntity() : this(Guid.NewGuid().ToString(), String.Empty)
    {
    }

    public int ID_client { get; set; }
    public String Username { get; set; }
    public String Password { get; set; }
    public String Email { get; set; } 
```

……………………………………………………………………………………………………

（用户名和其他一些属性与 MembershipUser 相同。但不是全部，我额外添加了 3 或 4 个）。

有人可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:33:08.193

你在做什么是行不通的。错误消息告诉你。

这是该向导生成的所有代码的问题，是您不了解它是如何工作的。因此，当某些东西坏了，你不知道如何修复它。我建议您了解为什么会收到您遇到的错误。他们是有原因的。如果你理解了原因，解决方案就会更加明显。

# android - 为两个不同的活动连续调用 startActivity 时，没有为第一个活动调用 onCreate

> ID：10384765
> 
> 赞同：2
> 
> 时间：2012-04-30T13:46:37.497
> 
> 标签：android

我有三个活动**A**、**B**和**C**。

在`onCreate()`A 中，我调用`startActivity(...)`了两个连续的语句来启动 B 和 C。但是 android 不会`onCreate()`立即调用活动 B。相反，当我按回 C 时，因为它位于堆栈顶部。然后它调用`onCreate()`B 和其他生命周期方法。

这是我的示例代码的样子。

```
public class A extends Activity {

  @Override 
  protected void onCreate(Bundle savedInstanceState) {

  super.onCreate(savedInstanceState);

  startActivity(this, B.class); 
  startActivity(this, C.class);
  }
} 
```

为什么对活动 B 的 onCreate 的调用被推迟的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:27:41.687

它会将您对 onCreate 的连续调用排队。一旦您按回创建的最后一个活动（在本例中为 C），将创建活动 B，从而在 B 上调用 onCreate。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T13:49:41.797

简而言之，您将 startActivity 命令推入队列，而 B 正在等待轮到它。如果你想要 A -> B -> C，从 B 的 onCreate 调用 C。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:56:34.007

您可以使用Activity 的`finish()`in `OnPause(`) 从堆栈中清除 Activity，而不是您正在执行的操作。

# iphone - 一个设备可以在多个 iOS 开发者计划帐户中使用吗？

> ID：10384776
> 
> 赞同：9
> 
> 时间：2012-04-30T13:47:25.757
> 
> 标签：iphone, ios

我正在我的 iOS 开发者计划帐户下开发应用程序并在设备上进行测试，但它将使用另一个帐户发布。客户想在他的设备上测试应用程序但使用我的帐户（他还没有帐户，也许我无法访问它），所以我需要在我的帐户上注册他的设备。此设备可以同时注册到另一个帐户，或者如果不能，如果我将它从我的设备中删除，可以立即在另一个帐户中使用？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T13:49:55.213

您可以将设备注册到任意数量的开发者帐户。请注意，您每年最多只能为 1 个开发者帐户注册 100 台不同的设备。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T13:54:18.187

“每个会员年度，您最多可以注册 100 台 iOS 设备进行测试和临时分发。请注意：虽然您可以从您的帐户中删除设备，但它将继续计入您的 100 台设备限制。” [在这里](https://developer.apple.com/support/account/)您可以找到实现此功能的帮助。

-=-=-=-=-=-=-=-=-=-=-=-=-

至于你的问题，我有相同的设备连接了多个帐户，所以这样做没有问题。唯一的**“限制”**是我上面列出的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:50:29.287

您可以使用多个帐户注册设备。此外，一个帐户最多可以同时注册 100 台设备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T14:09:26.747

“每个会员年度，您最多可以注册 100 台 iOS 设备进行测试和临时分发。

我可以注册多少台 iOS 设备进行测试和临时分发？

每个会员年度最多允许注册 100 台 iOS 设备进行测试和临时分发。请注意：虽然您可以从您的帐户中删除设备，但它将继续计入您的 100 台设备限制。

我可以使用与我的 iOS 开发者计划关联的 Apple ID 加入 iOS 开发者企业计划吗？

不可以。您必须设置一个新的 Apple ID 才能加入 iOS 开发者企业计划。

使用 iOS SDK 和 Xcode 进行开发有什么要求？

要使用 iOS SDK 和 Xcode 进行开发，您必须拥有运行 Mac OS X Snow Leopard 或更高版本的基于 Intel 的 Mac，并且您必须注册为 Apple Developer。

作为注册的 Apple 开发人员，我可以在 iOS 开发中心访问哪些内容？

作为注册的 Apple 开发人员，您可以访问最新版本的 iOS SDK 以及 iOS 开发中心提供的相关资源和信息。

要访问在设备上测试应用程序所需的工具和信息，您需要加入 iOS 开发者计划、iOS 开发者企业计划或两者。

# php - 带有标头的卷曲请求 - 将主体 a 与标头分开

> ID：10384778
> 
> 赞同：10
> 
> 时间：2012-04-30T13:47:50.623
> 
> 标签：php

我有一个代码

```
 $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_HEADER, 1);        
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
    $ret = curl_exec($ch);
    $responseCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch); 
```

现在我想从 $ret 中提取没有标题的正文。知道怎么做吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-03-24T21:45:39.340

raina77ow 的反应很好。从评论看来，有一些条件会导致“爆炸”不起作用。我找到了一种对我更有效的方法，并认为我会分享。

通过调用 curl_getinfo($ch, CURLINFO_HEADER_SIZE) 可以获得响应头的长度。所以我做了以下事情：

```
// Original Code
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);        
curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
$ret = curl_exec($ch);
$responseCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);

// Added Code
$header_len = curl_getinfo($ch, CURLINFO_HEADER_SIZE);
$header = substr($ret, 0, $header_len);
$body = substr($ret, $header_len);

// Back to Original Code
curl_close($ch); 
```

这对我很有用。我希望它可以帮助别人。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-30T13:52:49.213

这个怎么样：

```
list($headers, $content) = explode("\r\n\r\n", $ret, 2); 
```

...哪个应该在 $content 变量中为您提供请求的主体？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-09T07:11:43.917

*[在此线程](https://stackoverflow.com/a/41135574/195835)中借鉴@Geoffrey 出色的答案...*

该线程提供的其他一些解决方案*没有*正确执行此操作。

*   当打开或服务器以 100 代码响应时，拆分打开`\r\n\r\n`是不可靠的。`CURLOPT_FOLLOWLOCATION`
*   通过检测标头的大小`CURLINFO_HEADER_SIZE`也并不总是可靠的，尤其是在使用代理或在某些相同的重定向场景中。

**获取标头最可靠的方法是使用[`CURLOPT_HEADERFUNCTION`](https://curl.haxx.se/libcurl/c/CURLOPT_HEADERFUNCTION.html).** 然后你可以删除`curl_setopt($ch, CURLOPT_HEADER, 1);`，你的身体会很干净，没有标题。

这是使用 PHP 闭包执行此操作的一种非常简洁的方法。它还将所有标头转换为小写，以便跨服务器和 HTTP 版本进行一致处理。

```
$ch = curl_init();
$headers = [];
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

// Run the following function for each header received
// Note: Does NOT handle multiple instances of the same header. Later one will overwrite.
//       Consider handling that scenario if you need it.
curl_setopt($ch, CURLOPT_HEADERFUNCTION, function($curl, $header) use (&$headers) {
    $len = strlen($header);
    $header = explode(':', $header, 2);
    if (count($header) >= 2)
        $headers[strtolower(trim($header[0]))] = trim($header[1]);
    return $len;
});

$data = curl_exec($ch);
print_r($headers); 
```

# xml - SSIS - XML/XSD 使用 WCF 服务解析和存储实体

> ID：10384780
> 
> 赞同：1
> 
> 时间：2012-04-30T13:47:55.280
> 
> 标签：xml, wcf, service, ssis, xsd

我们必须开发一个加载 Xml 文件及其 XSD 文件的 SSIS 包，该包应该从 XML 文件中提取所有信息并将所有存在实体转换为其对象表示，然后将这些对象发送到其相应的 Web 服务（在我们的例子中，我们有三个 WCF 服务）知道一些实体应该被发送到一个特定的服务而不是另一个。

我的问题是： 1\. 如何将所有实体从 XML 转换为它们的对象表示？2.“Web 服务任务”是否能够将复杂对象发送到 WCF 服务？如果没有，有什么替代方法？3.如何根据数据类型进行服务选择

提前致谢

萨米尔。

# android - 使用在 Android 的 ListView 中选择的字符串数组中的字符串设置 TextView

> ID：10384787
> 
> 赞同：0
> 
> 时间：2012-04-30T13:48:25.873
> 
> 标签：android, android-intent, textview, arrays, settext

好了，简单总结一下。该应用程序以 listView（由字符串数组填充）打开，当您点击列表中的一个项目时，它会将您带到另一个 listView（由字符串数组填充），其中包含与您点击的第一个项目相关联的项目。在第二个 listView 中，我想点击一个项目并让它显示一个带有来自另一个字符串数组的关联项目的 textView。到目前为止，我有前两个 listViews 工作，但无法让 textView 工作。我已经为此头疼了两天了，我感到非常沮丧。能否请你帮忙？！

这是我的字符串 xml 文件：

```
<string-array name="topics">
<item>Idioms</item>
<item>Travel</item>
<item>Small Talk</item>
<item>Tips</item>
<item>App Data</item>
</string-array>

<string-array name="idioms">
    <item>Cash Chow</item>
    <item>No Spring chicken</item> 
</string-array>

<string-array name="travel">
    <item>Asking for Change</item>
    <item>Bus and Train Schedule</item>
</string-array>

<string-array name="idioms_description">
    <item>A cash cow is a blah blah blah</item>
    <item>No spring chicken means blah blah blah</item>
</string-array>

<string-array name="travel_description">
    <item>This is a test for Asking for change</item>
    <item>This is a test for Bus and train schedules</item>
</string-array> 
```

这是我的 getIntent 和我应该设置文本的地方。我将其留空，因为到目前为止我所尝试的一切都失败了，我只是不知道如何从所选数组中获取正确的字符串。

```
public class DetailLanguagePoints extends Activity{

private int position;
private TextView mLanguagePoint;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.detail_view);
        mLanguagePoint = (TextView) findViewById(R.detail.languagepoints);

      Bundle extras = getIntent().getExtras();

      //int[] arrayIds = new int[]{R.array.idioms, R.array.travel};
      position = extras.getInt("listposition");

      int[] stringarrayIds = new int[]{R.array.idioms_description, R.array.travel_description};

      String[] subTopics = getResources().getStringArray(stringarrayIds[position]);

      String description = subTopics[position];

      final String TAG = "MyActivity";
      Log.d(TAG,description);

      mLanguagePoint.setText(description);      

    }

} 
```

我发现空异常错误的问题是什么，我没有`findViewById()`在`setcontentView()`. 我这样做了，它解决了问题，它现在正在工作！感谢所有提供建议的人！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:06:49.777

你想在 TextView 中显示什么？两个子项用新行分隔？如果是这样，那么只需更改`mLanguagePoint.setText()`为`mLanguagePoint.setText(subTopics[0] + "\n" + subTopics[1])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:00:41.153

所以你只想设置`subTopics`成一个ListView？

```
ListView listView = (ListView) findViewById(R.id.listView1);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, subTopics);
listView.setAdapter(adapter); 
```

否则，请发布您如何因任何 logcat 错误而失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:56:00.500

使用此代码`mPosition = i.getIntExtra("listposition");` 而不是此代码`mPosition = i.getIntExtra("listposition", 0);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T14:11:17.030

首先初始化mLanguagePoint。尝试类似的东西

然后在第二个列表视图上添加`onItemClickListener()`

```
public void onItemClick(AdapterView<?> arg, View view, int position,long id) {

 mLanguagePoint.setText(subTopics[position]);
} 
```

# xml - 使用 Schematron 和 xsltproc 验证 XSD 架构

> ID：10384788
> 
> 赞同：2
> 
> 时间：2012-04-30T13:48:26.853
> 
> 标签：xml, validation, xsd, schematron

我在验证与 Schematron 结合的 SXD 模式时遇到了困难。

按照本[指南](http://www.topologi.com/resources/schtrn_xsd_paper.htm)中描述的步骤，我`<xs:appinfo>`在 XSD 文档中的标记之间合并了 schematron，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:element name="Test">

        <xs:annotation>
            <xs:appinfo>
                <sch:pattern name="Testing schematron" xmlns:sch="http://purl.oclc.org/dsdl/schematron">
                    <sch:rule context="Test">
                        <sch:assert test="@Attribute1">Attribute 1 exists</sch:assert>
                    </sch:rule>
                </sch:pattern>
            </xs:appinfo>
        </xs:annotation>

        <xs:complexType> 
            <xs:attribute name="Attribute1" type="xs:string" use="optional"/>
            <xs:attribute name="Attribute2" type="xs:string" use="optional"/>
        </xs:complexType>
    </xs:element>

</xs:schema> 
```

该文档应该测试（或验证）该文档

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<Test Attribute1="attr1"/> 
```

[使用 schematron页面](http://code.google.com/p/schematron/wiki/RunningSchematronWithGNOMExsltproc)上列出的简单的基于 xsltproc 的脚本。不幸的是，我在脚本的最后一步收到以下错误消息。

```
step3.xsl:13: parser error : Extra content at the end of the document
plates select="*|comment()|processing-instruction()" mode="M0"/></axsl:template>
                                                                               ^
cannot parse step3.xsl 
```

我很感激帮助找出这个错误的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T15:09:43.693

您的架构是正确的，并且做了它应该做的事情......

问题出在脚本上：这个脚本期望接收一个 Schematron 模式，而你给它一个带有嵌入规则的 XML 模式，这是一种不同的野兽。

要进行验证，您需要运行第一个转换，该转换将从 XML Schema 中提取 Schematron 并对这个结果运行 validate。

您还可以使用 xmllint (libxml) 根据 XML Schema 验证文档，这是一种不同的操作。

为此，您可以将脚本下载[ExtractSchFromXSD.xsl更改为：](http://code.google.com/p/schematron/source/browse/trunk/schematron/code/ExtractSchFromXSD.xsl?r=c2e53e4ad6f7fd871be9750dca358f3f10520f39)

```
#!/bin/bash

echo XSD validation
xmllint -schema $1 $2

echo Step0 ...
xsltproc ExtractSchFromXSD.xsl $1 > schema.sch

echo Step1 ...
xsltproc iso_dsdl_include.xsl schema.sch > step1.xsl

echo Step2 ...
xsltproc iso_abstract_expand.xsl step1.xsl > step2.xsl

echo Step3 ...
xsltproc iso_svrl_for_xslt1.xsl step2.xsl > step3.xsl

echo Validation ...
xsltproc step3.xsl $2 | tee result.svrl 
```

或者，您可以使用本机支持模式中嵌入的 Schematron 规则的实现，或者使用诸如[oXygen 之](http://www.oxygenxml.com/validation.html)类的工具。

# objective-c - 在单例类 (ARC) 中使用 MKReverseGeocoder

> ID：10384789
> 
> 赞同：1
> 
> 时间：2012-04-30T13:48:40.817
> 
> 标签：objective-c, ios, xcode, singleton, reverse-geocoding

我正在尝试为天气功能（全部包含）创建一个单例类，以便我可以在单个分配的对象中更改/更新/调用整个应用程序中的天气数据。

除了一个奇怪的小错误外，我让它正常工作。我在运行 iOS < 5 的设备上使用 MKReverseGeocoder。CLGeocoder 在 iOS 5+ 上运行良好。基本上，这就是应用程序中发生的情况：

在应用程序委托中，在启动时，我创建了我的天气单例的共享实例。除非有一个 UIView 期望报告天气结果，否则这个实例不会做任何事情。加载报告天气的视图时，如果该位置尚未在首选项中静态设置，则应用程序会尝试提取您的当前位置。

这有效，我可以记录设备当前位置的坐标。完成后，我立即开始尝试反向定位这些坐标。方法 MKReverseGeocoder start 确实被执行，我可以记录实例的 isQuerying 属性为真，所以我知道它正在尝试对坐标进行地理定位。（是的，我将委托设置为我的共享实例，并且该实例的类型为 MKReverseGeocoderDelegate）。

现在这是奇怪的部分。如果我是第一次启动应用程序，并且第一次将天气 UIView 添加到屏幕上，MKReverseGeocoder 会启动但从不调用委托方法。如果我然后关闭应用程序并再次打开它（第二次），则会查找当前位置，并且 MKReverseGeocoder 确实调用了委托方法并且一切正常。它只是不想在第一次启动时工作，无论我调用它多少次（我有一个可以启动查找的按钮）。

这完全令人费解。iOS 5 CLGeocoder 在首次启动和每次后续启动时都能正常工作。MKReverseGeocoder 在初始启动时不起作用（因为它不调用委托方法），但在后续启动时起作用。

下面是相关代码：

```
-(void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFailWithError:(NSError *)error{

    NSLog(@"error getting location:%@", error);
    self.reverseGeocoder = nil;
    [[NSNotificationCenter defaultCenter] postNotificationName:@"errorGettingLocation" object:nil userInfo:[NSDictionary dictionaryWithObject:error forKey:@"error"]];

}
- (void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFindPlacemark:(MKPlacemark *)pm
{
    //update placemark and get weather from correct placemark
    placemark = pm;
    NSLog(@"singleton placemark: %@",placemark);
    [self getLocationFromPlacemark];
    self.reverseGeocoder = nil;
}

- (void) getReverseGeoCode:(CLLocation *)newLocation
{
    NSLog(@"reversGeocode starting for location: %@", newLocation);
    NSString *ver = [[UIDevice currentDevice] systemVersion];
    float ver_float = [ver floatValue];
    if (ver_float < 5.0) {
        //reverseGeocoder = nil;
        self.reverseGeocoder = [[MKReverseGeocoder alloc] initWithCoordinate:newLocation.coordinate];
        self.reverseGeocoder.delegate = self;
        [self.reverseGeocoder start];
        if(self.reverseGeocoder.isQuerying){
            NSLog(@"self.reverseGeocoder querying");
            NSLog(@"self.reverseGeocoder delegate %@", self.reverseGeocoder.delegate);
            NSLog(@"self %@", self);
        }else {
            NSLog(@"geocoder not querying");
        }
    }
    else {
        [reverseGeocoder5 reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, NSError *error){

            if([placemarks count]>0){
                placemark = [placemarks objectAtIndex:0];
                [self getLocationFromPlacemark];
            }
            else{
                if (error) {
                    NSLog(@"error reverseGeocode: %@",[error localizedDescription]);

                }
            }
        }];

    }
} 
```

另外，我将 reverserGeocoder 设置为（非原子，强）属性并对其进行合成。请记住，这在第二次干净启动后工作正常（当已经加载了天气 UIView 时）。对日志的调用甚至没有被命中（这就是我假设委托方法没有被命中的原因）。

任何投入将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:17:52.857

我最终弄清楚了……嗯，有点。而不是使用 MKReverseGeocoder，我只是对谷歌地图进行静态查找 ala[如何处理 iOS 4.3 中的 MKReverseGeocoder / PBHTTPStatusCode=503 错误？](https://stackoverflow.com/questions/5232822/how-to-deal-with-mkreversegeocoder-pbhttpstatuscode-503-errors-in-ios-4-3)

完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:21:20.620

MKReverseGeocoder 不再存在......在 iOS 5 中您必须导入 CoreLocation 并使用 CLGeocoder。下面只是一些示例示例代码：

```
 CLGeocoder *geoCoder = [[CLGeocoder alloc] init];
        CLLocation *location = [[CLLocation alloc] initWithLatitude:37.33188 longitude:-122.029497];

        [geoCoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemark, NSError *error) {
            CLPlacemark *place = [placemark objectAtIndex:0];
            if (error) {
                NSLog(@"fail %@", error);

            } else {
                NSLog(@"return %@", place.addressDictionary);
            }

        }]; 
```

# css - div占据了另一个div的所有边距空间

> ID：10384790
> 
> 赞同：1
> 
> 时间：2012-04-30T13:48:48.077
> 
> 标签：css, html

我有一个宽度为 960 像素且边距为 0 自动（集中）的内容 div，我想将一个 div 占据左边距的所有空间，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:00:10.500

[演示 jsBin](http://jsbin.com/oluwos/2/edit)

```
 #container{
    position:relative;
    width:300px;/*change this*/
    margin:0 auto;
    height:200px;
    background:#cf5;
    padding-left:50%;
    margin-left:-150px; /*half the width*/
  }
  #centered{
    width:300px;
    height:100%;
    position:absolute;
    right:0px;
    background:#eea;
  } 
```

HTML：

```
 <div id="container">  
    <div id="centered">centered</div>  
  </div> 
```

这里： http: [//jsbin.com/oluwos/3/edit](http://jsbin.com/oluwos/3/edit)是另一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:16:58.307

使用 display: table，像这样：

[http://jsfiddle.net/yVFzh/](http://jsfiddle.net/yVFzh/)

```
<div class="wrapper">
              <div class="left-column">&nbsp;</div>
              <div class="centre"></div>
              <div class="right-column">&nbsp;</div>
            </div>​

            html,
            body{
                width:100%;
            }
            .wrapper{
                display:table;
                width:100%;
            }
            .wrapper > div{
                display: table-cell;
                background: blue;
                height:400px;
            }
            .wrapper .centre{
                width: 960px;
                background: yellow;
            }​ 
```

# c# - 在 C# 中按“Escape”键刷新页面/Web 部件？

> ID：10384801
> 
> 赞同：0
> 
> 时间：2012-04-30T13:49:20.297
> 
> 标签：c#, jquery, asp.net, html

我想在用户按下“Escape”键时触发刷新事件，或者更愿意在按下 Esc 键时触发图像点击事件实现此目的的最佳方法是什么？谢谢

```
 $clone.click(function (e) { //action when magnified image is clicked on
        var $this = $(this)
        var imageinfo = $this.data('$relatedtarget').data('imgshell')
        jQuery.imageMagnify.refreshoffsets($(window), $this.data('$relatedtarget'), imageinfo) //refresh offset positions of original and warped images
        $this.stop().animate({ opacity: 0, left: imageinfo.attrs.x, top: imageinfo.attrs.y, width: imageinfo.attrs.w, height: imageinfo.attrs.h }, setting.duration,
        function () {
            $this.hide()
            $this.data('$relatedtarget').css({ opacity: 1 }) //reveal original image
        }) //end animate
    }) //end click

//This is what I put in, but I'd like it to not just refresh but actually perform the same         function as OnClick as above
$(document).keyup(function (e) { //action when magnified image is clicked on
 if (e.keyCode == 27) { //escape key 
     window.location.reload(); 

        }
}) //end click

 $clone.keyup(function (e) { //action when 'Esc' key is pressed after magnifying image 

        if (e.keyCode == 27) { //escape key 

        var $this = $(this)
        var imageinfo = $this.data('$relatedtarget').data('imgshell')
        jQuery.imageMagnify.refreshoffsets($(window), $this.data('$relatedtarget'), imageinfo) //refresh offset positions of original and warped images
        $this.stop().animate({ opacity: 0, left: imageinfo.attrs.x, top: imageinfo.attrs.y, width: imageinfo.attrs.w, height: imageinfo.attrs.h }, setting.duration,
        function () {
            $this.hide()
            $this.data('$relatedtarget').css({ opacity: 1 }) //reveal original image
        }) //end animate
                 }
    }) //end 

     }
    }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:57:26.037

我会为此使用jQuery。实现非常简单：

```
$(document).keyup(function(e) {    
    if (e.keyCode == 27) { //escape key

        //trigger the image click logic
        $("img").trigger("click"); 

        //reload the page if you still need to
        window.location.reload();
    }
}); 
```

如果您希望触发回发，您应该能够使用`__doPostBack`并覆盖`RaisePostBackEvent`代码隐藏中的方法：

```
$(document).keyup(function(e) {    
    if (e.keyCode == 27) { //escape key
        __doPostBack("<%= Page.ClientID %>", "argument");
    }
}); 
```

在代码隐藏中：

```
protected override void RaisePostBackEvent(IPostBackEventHandler source, string eventArgument)
{
    base.RaisePostBackEvent(source, eventArgument);
    if (source == Page)
    {

    }        
} 
```

# c# - 从 web.config 获取多个连接字符串

> ID：10384803
> 
> 赞同：12
> 
> 时间：2012-04-30T13:49:24.503
> 
> 标签：c#, web-config, connection-string

如何通过 C# 中的代码从 web.config 中获取所有连接字符串的名称？

我试过这个：

```
System.Configuration.Configuration webConfig = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~");
ConnectionStringsSection x = webConfig.ConnectionStrings;
string here = x.SectionInformation.Name; 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-30T13:54:47.033

```
 foreach (ConnectionStringSettings c in System.Configuration.ConfigurationManager.ConnectionStrings)
    {
        //use c.Name
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-11-15T16:20:15.333

这是使用 LINQ 获取连接字符串名称列表的方法：

```
List<string> names = ConfigurationManager.ConnectionStrings
    .Cast<ConnectionStringSettings>()
    .Select(v => v.Name)
    .ToList(); 
```

或者你可以建立一个字典：

```
Dictionary<string/*name*/, string/*connectionString*/> keyValue = ConfigurationManager.ConnectionStrings
    .Cast<ConnectionStringSettings>()
    .ToDictionary(v => v.Name, v => v.ConnectionString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:58:53.573

不特定于连接字符串，但可能仍然有帮助。

```
System.Web.HttpContext ctx = System.Web.HttpContext.Current;

Configuration config;

if (ctx != null)
    config = WebConfigurationManager.OpenWebConfiguration(ctx.Request.ApplicationPath); 
```

# asp.net-mvc-3 - 扩展 Html 助手

> ID：10384804
> 
> 赞同：2
> 
> 时间：2012-04-30T13:49:32.670
> 
> 标签：asp.net-mvc-3, html-helper

我即将重写所有常见的 MVC Html 助手，以提供一些内部本地化功能。我试图找到一种方法，不破坏当前框架助手自己所做的事情。例如; 我想重写“LabelFor”html 助手而不改变它在 MVC 框架中的实际作用，除了只改变它的“InnerHtml”。由于框架助手返回“MvcHtmlString”，我实际上不知道如何使用它。

```
public static class MvcLabelExtensions
{        
    public static MvcHtmlString Label(this HtmlHelper html, string expression)
    {
       MvcHtmlString baseResult = System.Web.Mvc.Html.LabelExtensions.Label(html, expression);
       // want to change InnerHtml here... ??? ..
       return baseResult;
    }
} 
```

# delphi - 表单最小化时如何在表单标题中显示进程状态？

> ID：10384808
> 
> 赞同：0
> 
> 时间：2012-04-30T13:49:50.217
> 
> 标签：delphi

当表单在任务栏上最小化时，我想在表单标题上显示实时进程状态。

当表单状态为 wsnormal 时，它会显示。当表单最小化时，我还想在 form.caption 上显示状态。

```
procedure Tform1.Button1Click(Sender: TObject);
var
i:integer;
begin
form1.WindowState:=wsminimized;
for i:=0 to 10000 do //10000 files
  begin

  //process files

  form1.caption:=inttostr(i)+'/'+inttostr(10000); //not showing
  application.processmessage;
  end;
end; 
```

当进程完成并且表单状态为 wsnormal 时，form1.caption 显示状态“10000/10000”。

我正在使用德尔福 7.0

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:53:14.793

当窗体最小化时，您看不到它的标题栏，因此没有必要更新它，是吗？也许您正在谈论旧版本 Microsoft Windows 中任务栏中显示的标题（以及新版本中的非默认设置）？您可以使用`Application.Title`. 还是您正在考虑 Aero Peek 功能？实际上，您可以在那里看到表单的标题，即使表单最小化，它也会正常更新。

# ios - sqlite3 NSDictionary 内存泄漏

> ID：10384810
> 
> 赞同：0
> 
> 时间：2012-04-30T13:50:12.137
> 
> 标签：ios, sqlite, nsdictionary

我让我的 sqlite 执行查询代码如下。Instruments 在 NSDictionary 分配和释放行（在 while 循环内）中捕获了内存泄漏。有人能指出那些 alloc/release 有什么问题吗？

```
- (NSMutableArray *)executeQuery:(NSString *)sql arguments:(NSArray *)args {
    sqlite3_stmt *sqlStmt;

    if (![self prepareSql:sql inStatament:(&sqlStmt)])
        return nil;

    int i = 0;
    int queryParamCount = sqlite3_bind_parameter_count(sqlStmt);
    while (i++ < queryParamCount)
        [self bindObject:[args objectAtIndex:(i - 1)] toColumn:i inStatament:sqlStmt];

    NSMutableArray *arrayList = [[NSMutableArray alloc]init]; // instrument marks leak 0.1 % on this line
    NSUInteger rcnt= arrayList.retainCount;
    int columnCount = sqlite3_column_count(sqlStmt);
    while ([self hasData:sqlStmt]) {
        NSMutableDictionary *dictionary = [[NSMutableDictionary alloc] init];  // instrument marks leak 13% on this line
        for (i = 0; i < columnCount; ++i) {
            id columnName = [self columnName:sqlStmt columnIndex:i];
            id columnData = [self columnData:sqlStmt columnIndex:i];
            [dictionary setObject:columnData forKey:columnName];
        }
        [arrayList addObject:dictionary];
        [dictionary release];// instrument marks leak 86.9 % on this line
    }

    sqlite3_finalize(sqlStmt);
    rcnt=arrayList.retainCount;
    return arrayList ;
} 
```

非常感谢任何帮助/指针。这几天一直在为此苦苦挣扎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:18:36.260

如果您不使用 ARC，那么我建议您将退货线路更改为：

```
return [arrayList autorelease]; 
```

否则你可能会泄露完整的arrayList。

# c++ - 不能连接超过 2 个字符串

> ID：10384812
> 
> 赞同：0
> 
> 时间：2012-04-30T13:50:25.683
> 
> 标签：c++, arrays, char

我编写了一个有两个参数的函数，因此可以连接 2 个字符串数组。但是，我需要使用相同的函数来连接五个参数。这就是我卡住的地方，因为我的功能无法正常工作。我只保留最后一个追加。我粘贴了下面的代码。您的帮助将不胜感激。我用 C++ 编写了代码，我使用的是 dev-C++。

```
#include<iostream>
#include<conio.h>

using namespace std;

char *Append(char *str, char *add)
{
 int m=5;
 static char buffer[150];  
 char *p=buffer;
 while(*p++=*str++);
 p--;
 while(*p++=*add++);  

 return buffer;  

}

int main()
{
 static char *buffer1;
 char *temp=" "; 
 char *str="Be, ";
 char *add="or not to be, ";
 char *str3="that's the question ";
 char *str4="Whether 'tis Nobler in the mind to suffer ";
 char *str5="The Slings and Arrows of outrageous Fortune,";

 buffer1=Append(str, add);
 cout<<buffer1;
 ///while(*temp++=*buffer1++);//where the problem starts!  
 /// temp--;
 Append(temp, str);    ///i am trying to append all strings into temp!!
 buffer1=Append (temp, add);
 cout<<endl<<buffer1;

 getch();
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:55:55.150

您正在将连接的字符串写入静态缓冲区 ( `static char buffer[150];`)。每次调用 append 函数时，都会写入同一个缓冲区，这意味着您会覆盖上一次调用 append 创建的字符串。

```
 buffer1=Append(str, add); // buffer1 contains "Be, or not to be, "
 Append(temp, str); // buffer1 now contains " Be, " even though you don't assign the result of Append to buffer1 
```

但是，如果您这样做，您仍然可以使其工作：

```
buffer1=Append(str, add);
Append(buffer1, str3);
Append(buffer1, str4);
Append(buffer1, str5); 
```

尽管您必须小心不要超出缓冲区。

这是因为当您将 buffer1 作为第一个字符串传入时，append 函数的第一步是将先前连接的字符串复制到自身中，第二步是添加新字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:16:48.650

您的问题对我来说并不完全清楚。仍然，假设您希望 Append() 多次用于连接连续的 5 个字符串，请像这样使用 main()。

```
int main()
 {
 static char *buffer1;
 char *temp=" "; 
 char *str="Be, ";
 char *add="or not to be, ";
 char *str3="that's the question ";
 char *str4="Whether 'tis Nobler in the mind to suffer ";
 char *str5="The Slings and Arrows of outrageous Fortune,";

 buffer1=Append(str, add);
 cout<<buffer1;
 ///while(*temp++=*buffer1++);//where the problem starts!  
 /// temp--;
 buffer1=Append(buffer1, str3);    ///i am trying to append all strings into temp!!
 buffer1=Append(buffer1,str4);
 buffer1=Append(buffer1,str5);
 cout<<endl<<buffer1;

 getch();
return 0;
} 
```

# java - 如何在 Java 中实现 MCI 解析器

> ID：10384814
> 
> 赞同：0
> 
> 时间：2012-04-30T13:50:32.733
> 
> 标签：java, c++

我想解析一个 mci 文件格式以在 java 中存储 petri 网展开前缀，以便我可以使用它来生成 SAT 公式

以下文本描述了用于存储 Petri 网展开前缀的 MCI 文件格式。

下面，CHAR 是 1 字节的 char，UINT4 是 little-endian（即最低有效字节在最低地址，其他字节按照重要性递增顺序。） 4 字节 unsigned int（Intel 很少-字节序）。

*   条件总数 (UINT4)

*   事件总数 (UINT4)

*   对于每个事件（从第一个到最后一个）：--原始转换的编号（UINT4）

*   对于每个条件（从第一个到最后一个）： -- 原始位置的编号（UINT4） -- 预设事件的编号（UINT4）；如果条件是初始的，则为 0 -- NULL(UINT4) 终止的 postset 事件编号列表 (UINT4)

*   对于每个截止事件 -- 截止事件的数量 (UINT4) -- 对应事件的数量 (UINT4) 或 NULL(UINT4) 如果对应的事件是虚拟初始事件

*   分隔 NULL(UINT4)

*   对于每个配置： -- NULL(UINT4)-终止的事件编号列表。（这被一些古老的模型检查器使用；PUNF 不会创建它，只是输出终止的 NULL（UINT4）。）

*   分隔 NULL(UINT4)

*   原始网络中的总位置数（UINT4）

*   原始网络中的转换总数（UINT4）

*   位置/转换名称的最大字符串长度 (UINT4)（用于解析器中的内存分配）

*   对于原始网络中的每个位置： -- 名称（NULL(CHAR) 终止的字符串）

*   分隔 NULL(UINT4)

*   对于原始网络中的每个转换： -- 名称（NULL(CHAR) 终止的字符串）

*   终止 NULL(UINT4)。

***注意：我已经用 C++ 实现了，但我想用 java 实现。供您参考。我使用了很多工具将其转换为 java，但它们都没有完全工作。因此，我将感谢你们的任何帮助。此外，如果需要，我会将代码放入 C++ 中。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:14:29.350

我认为您正在寻找[DataInputStream](http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html)。

这应该允许您阅读您的个人 uint4 和字符。

# php - 如何为 PHPMailer 设置 DSN（交付状态通知）？

> ID：10384821
> 
> 赞同：3
> 
> 时间：2012-04-30T13:50:47.390
> 
> 标签：php, email, smtp, phpmailer

我试图找出使用 PHPMailer 时如何设置 DSN。我知道在 SMTP 协议级别，DSN 在 RCPT TO 之后指定，例如 RCPT TO: NOTIFY=SUCCESS,FAILURE ORCPT=rfc822;recipientemail@gmail.com

另外，如果可能的话，我想将 DSN 定向到发件人地址以外的地址。感谢任何指针，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T08:52:17.317

我发现PHPMailer不支持DSN，所以我不得不自己修改class.smtp.php。

原始代码：

```
fputs($this->smtp_conn,"RCPT TO:<" . $to . ">" . $this->CRLF); 
```

改成：

```
 fputs($this->smtp_conn,"RCPT TO:<" . $to . "> NOTIFY=SUCCESS,FAILURE ORCPT=rfc822;" . $to ."" . $this->CRLF); 
```

至于将 DSN 定向到发件人地址以外的地址，这可以通过定义来实现：

```
 $mail->Sender = "bounced@email.com"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-27T10:34:03.053

我只是测试，它对我有用，修改**class.smtp.php**

**原始代码：**

```
public function recipient($toaddr)
{
    return $this->sendCommand(
        'RCPT TO',
        'RCPT TO:<' . $toaddr . '>',
        array(250, 251)
    );
} 
```

**例如，更改为：**

```
public function recipient($toaddr)
{
    return $this->sendCommand(
        'RCPT TO',
        'RCPT TO:<' . $toaddr . '> NOTIFY=SUCCESS,FAILURE ORCPT=rfc822;',
        array(250, 251)
    );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T18:18:02.833

在我能看到的 smtp 文件中没有 fputs($this->smtp_conn,"RCPT TO:<" . $to . "> 等行的最新版本的 phpmailer 中，如何做到这一点？

最接近它，我可以看到是唯一提到 RCPT TO 的地方。

```
public function recipient($toaddr)
{
    return $this->sendCommand(
        'RCPT TO',
        'RCPT TO:<' . $toaddr . '>',
        array(250, 251)
    );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-05T12:02:44.073

我发现了在 PHPMAiler 上设置 DSN 的官方命令：

$mail->dsn = '成功，失败，延迟';

有可能按时使用这三个命令，或者隔离。

前任：

```
$mail = new PHPMailer(true);
$mail->dsn = 'SUCCESS'; 
```

服务器上默认启用 SUCCESS 和 FAILURE 命令，但 SUCCESS 是启用返回“交付状态通知”（Notificação de Status de Entrega）的必要条件。

注意：验证“PHPMailer.php”的第 343 行以获得更多说明。

# lucene - Sitecore + Lucene + QueryOccurance。不应返回所需的结果

> ID：10384823
> 
> 赞同：2
> 
> 时间：2012-04-30T13:50:52.353
> 
> 标签：lucene, lucene.net, sitecore, sitecore6

我正在使用 Alex Shybas Advanced DatabaseCrawler，它运行良好......几乎......我正在用于汽车销售应用程序，您可以在其中使用以下值搜索汽车

型号 制造 燃油 里程 价格 年份（注册日期）

我有多个 NumericRange 查询：

1.  -1000 - 0（这是给那些不想在线价格的经销商。他们把价格写成-1）
2.  从下到上，即。（10000 - 20000）这是我想要排序的

它们都在同一个 NumericRangeSearchParam() 中，请参见下面的代码。问题在于 Sitecore.Search.QueryOccurance.Should，因为它使 lucene 完全无视价格限制。IE

我将尝试在下面用返回的价格来说明

下限：1000 上限：2000

应为 -1、500、1000、25000

必须没有（如预期的那样）

我不应该只得到-1和1000吗？

我希望你们中的一个人能提供帮助，因为这让我发疯！

下面的代码：

```
 public List<SkinnyItem> DoSearch(CarSearchParameters parameters, string sortby, bool reverse, string indexName)
    {
        Database db = Sitecore.Context.Database;
        string  id = db.GetItem(SitecoreHelper.GetBilSalgsItem().Paths.FullPath+"/"+ Helpers.URLEncoder.ToFriendlyUrl(parameters.Make) + (!string.IsNullOrEmpty(parameters.Model) ? "/" + Helpers.URLEncoder.ToFriendlyUrl(parameters.Model) : ""), LanguageManager.GetLanguage("da")).ID.ToString();
        var param = new CombinedSearchParam()
        {
            FullTextQuery = "",
            Language = "da",
            LocationIds = id,
            RelatedIds = "",
            ShowAllVersions = false,
            TemplateIds = ""

        };
        Item settings = Helpers.SitecoreHelper.GetSettings();

        Sitecore.SharedSource.Search.Searcher searcher = new Sitecore.SharedSource.Search.Searcher(indexName);
        var items = new List<SkinnyItem>();

        //Tilføjer felter med værdier -Make -Model -Trim
        var fields = new FieldValueSearchParam();
        fields.Refinements.Add("Make", parameters.Make);
        fields.Occurance = Sitecore.Search.QueryOccurance.Must;

        if(parameters.Model != string.Empty)
            fields.Refinements.Add("Model", parameters.Model);
        if(parameters.Fuel != string.Empty)
            fields.Refinements.Add("Fuel", parameters.Fuel);

        //Tilføjer Numeriske ranges
        var km = new NumericRangeSearchParam();
        km.Ranges.Add(new NumericRangeSearchParam.NumericRangeField("KM", 0, parameters.MaxKM));

        //Angivet som must fordi at den skal være mellem disse værdier
        km.Occurance = Sitecore.Search.QueryOccurance.Must; 

        //Tilføjer 2 Ranges da bilen enten skal være mellem det valge range eller mindre end 0
        var price = new NumericRangeSearchParam();
        price.Ranges.Add(new NumericRangeSearchParam.NumericRangeField("Price", -1000, 0));
        price.Ranges.Add(new NumericRangeSearchParam.NumericRangeField("Price", parameters.StartPrice, parameters.EndPrice));

        //Should da den bare skal være en af dem (Svarer til ||, OR)
        price.Occurance = Sitecore.Search.QueryOccurance.Should;

        //Tilføjer datointervallet
        var dates = new DateRangeSearchParam();
        dates.Ranges.Add(new DateRangeSearchParam.DateRangeField("ModelDate", new DateTime(parameters.StartYear, 1, 1, 0, 0, 0), new DateTime(parameters.EndYear,12, 31, 23, 59, 59)));
        dates.Occurance = Sitecore.Search.QueryOccurance.Must;

        param.DateRanges.Add(dates);
        param.NumericRanges.Add(price);
        param.NumericRanges.Add(km);
        param.FieldValues.Add(fields);

        //Checker om der er angivet sortering
        if (sortby != null)            
            items.AddRange(searcher.GetItems(param, new Sort(new SortField(sortby, reverse))));
        else
            items.AddRange(searcher.GetItems(param));
        return items;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:14:17.760

我怀疑它可能与生成的布尔逻辑有关。在搜索器组成其内部 lucene 查询后，我会在搜索器中放置一个断点并查看生成的查询值。然后查看括号的平衡，以确保在错误的位置没有 Must。

您还可以使用[Luke](http://code.google.com/p/luke/)对原始索引执行相同的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:40:26.113

Sitecore 实现 Lucene 的方式似乎存在错误，这就是我的查询以这种方式运行的原因。

# c# - 如何用 gridview 控件的值填充文本框？

> ID：10384825
> 
> 赞同：2
> 
> 时间：2012-04-30T13:51:04.850
> 
> 标签：c#, asp.net, gridview, textbox

只需一个常规值，您就可以编写类似

```
 protected void GridView1_SelectedIndexChanged(Object sender, EventArgs e)
{
    GridViewRow email = GridView1.SelectedRow;
    txtbox.Text = email.Cells[5].Text;

} 
```

但是，我想用 gridview 中的文本框控件的值填充该文本框。我有一个行列表，根据我选择的行，该文本框将填充该控件值。任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:54:55.307

试试下面的代码。

```
TextBox tb = GridView1.SelectedRow.FindControl("textboxId") as TextBox;
textbox.Text = tb.Text; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:54:55.943

试试这个：

```
GridView1.RowCommand += GridView1_RowCommand;
private void GridView1_RowCommand(object sender, System.Web.UI.WebControls.GridViewCommandEventArgs e)
{
        if (e.CommandName == "Select")
        {
            int index = Convert.ToInt32(Convert.ToString(e.CommandArgument));
            GridViewRow row = GridView1.Rows[index];
            this.NameTextBox.Text = Server.HtmlDecode(row.Cells[1].Text);

        }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T14:10:40.867

我建议为此使用数据键。这比使用单元格索引要容易得多，也可靠得多：

```
<asp:GridView ID="Gridview1" runat="server" DataKeyNames="Column1, Column2" ...> 
```

然后，在代码隐藏中，您可以访问如下值：

```
protected void GridView1_SelectedIndexChanged(Object sender, EventArgs e)
{
    GridViewRow email = GridView1.SelectedRow;
    txtbox.Text = (string)GridView1.DataKeys[email.RowIndex]["Column1"];    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-12T07:48:48.913

您可以在此处找到更好的代码，了解如何使用表单的文本框值填充 gridview。 [http://sharepoint-2010-world.blogspot.in/2013/10/populating-grid-with-form-values.html](http://sharepoint-2010-world.blogspot.in/2013/10/populating-grid-with-form-values.html)

# ios - 哪个图形框架适用于项目？

> ID：10384832
> 
> 赞同：0
> 
> 时间：2012-04-30T13:51:25.633
> 
> 标签：ios, graphics, opengl-es, core-animation, core-graphics

我的意图是“边做边学”来创造一架从远处接近的飞机，就像过山车一样。它将从远处开始（小且无法识别）并且结束/停止开始能够读取例如引擎微调器的窗口或中心上的消息/问候语。

目前，我认为这样做的框架是：

*   UIKit
*   核心动画
*   打开 GL ES
*   核心图形

这可能的最高级别是多少？如果飞机的路径是直的，更高的水平是可能的吗？还有其他可以使用的框架吗？（我读过 cocos2d，但更喜欢先学习苹果的。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:04:19.143

Ray Wenderlich 有一些很好的 iOS 入门教程，包括一些基本的动画教程。

看看这些： [http ://www.raywenderlich.com/tutorials](http://www.raywenderlich.com/tutorials)

这将是一个很好的起点...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:06:25.823

UIImage 中有一个新的“动画图像”功能。WWDC 2011 视频中的 *16:33*开始讨论： [Cocoa Touch 有哪些新功能？](https://developer.apple.com/videos/wwdc/2011/?id=100)

这类似于为您的应用程序提供“动画 gif”，仅包含一系列图像。无需创建实际的 gif。

这使您可以创建动态图像。然后，要进一步对这些（或静态图像）进行动画处理（例如在屏幕上移动它们、调整它们的大小或更改它们的 alpha 半透明度），请查看 Core Animation WWDC 视频和指南：

> 世界开发者大会 2010

*   [核心动画实践，视频第 1 部分](https://developer.apple.com/videos/wwdc/2010/?id=424)
*   [实践中的核心动画，视频第 2 部分](https://developer.apple.com/videos/wwdc/2010/?id=425)

    > 世界开发者大会 2011

[核心动画基础视频](https://developer.apple.com/videos/wwdc/2011/?id=421)

以及[核心动画指南](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T23:49:29.993

你喜欢 2D 还是 3D 动画？如果你想要 2D，Core Animation 是显而易见的选择。Core Animation 非常强大，但 Apple 文档充其量是模糊的。Marcus Zarra Core Animation 这本书不错，但没有涵盖太多 iOS 特定的动画代码。它和 Bill Dudney Core Animation 书籍都需要更新。两者都值得拥有，但都需要更新，并且它们的 iOS 部分需要大大扩展。

如果您想要带有透视的 3D 动画，那么 OpenGL 是您唯一的选择。然而，OpenGL 是一个需要学习的熊。

# maven - Maven 项目通过 apache fop 生成 PDF 文件

> ID：10384835
> 
> 赞同：1
> 
> 时间：2012-04-30T13:51:30.653
> 
> 标签：maven, apache-fop, maven-pdf-plugin

我正在寻找一个示例 maven pom，它将使用 xsl:fo 转换从 XML 文档生成 PDF 文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:30:50.217

最好的解决方案是使用[docbkx-maven-plugin](http://code.google.com/p/docbkx-tools/)，它非常适合从 DocBook 源生成 pdf 和 HTML。请参阅[示例](https://github.com/khmarbaise/maui/blob/master/pom.xml)以全面了解其工作原理。

```
<plugin>
  <groupId>com.agilejava.docbkx</groupId>
  <artifactId>docbkx-maven-plugin</artifactId>
  <version>2.0.14</version>
</plugin> 
```

# php - 如果从析构函数调用构造函数会发生什么？

> ID：10384836
> 
> 赞同：-3
> 
> 时间：2012-04-30T13:51:38.320
> 
> 标签：php, constructor, destructor, infinite-loop

从 __destruct() 调用 __construct() 函数，

```
<?php

public function __construct() {
    echo "Hi";
}

public function __destruct() {
    $this->__construct();
}

?> 
```

它会创建无限循环吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:00:33.163

不，不会的。`__construct`只是直接调用而不是使用的常规函数`new ClassName;`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T14:03:01.053

不，但这会：

```
class Test {

    public function __construct() {
        echo "Hi";
    }

    public function __destruct() {
         new Test();
    }

}

new Test(); 
```

示例：http: [//ideone.com/94XUg](http://ideone.com/94XUg)

# javascript - 当 needle 是变量时替换全局

> ID：10384838
> 
> 赞同：0
> 
> 时间：2012-04-30T13:51:42.240
> 
> 标签：javascript, regex

当要替换的针是变量时，如何使用全局修饰符？

```
var needle = '/'+key+'/g';
str = str.replace(needle, trans[key]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:00:54.330

为此交换你的针：

```
var needle = new RegExp(key, "g"); 
```

# codeigniter - 在 codeigniter 中，如何将数组值从控制器传递到同一视图页面？

> ID：10384839
> 
> 赞同：2
> 
> 时间：2012-04-30T13:51:46.660
> 
> 标签：codeigniter, views

我是codeigniter的新手。在 jquery 和 ajax 的帮助下，我使用多个下拉列表来选择城市和类别。为了选择城市，我已经加载了视图页面“索引”并将控制器中的值传递为：

```
$this->load->view('index',$data); 
```

但现在为了选择类别，我想再次传递值并加载索引视图页面。我已经用作。

```
$this->load->view('index',$arrCategory); 
```

$arrCategory 是一个数组。现在的问题是，*索引视图页面正在同一个索引视图页面中加载。*但我可以在视图页面中获取数组值。

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:04:25.317

你可以做：

```
$data = $other_datas;
$data['arrCategory'] = $arrCategory;

$this->load->view('index',$data); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T18:07:57.543

如需更多说明

```
$data['otherData'] = $other_dropdown;
$data['arrCategory'] = $arrCategory;

$this->load->view('index',$data); 
```

# javascript - 制作文本编辑字段

> ID：10384841
> 
> 赞同：0
> 
> 时间：2012-04-30T13:51:49.250
> 
> 标签：javascript, html, css, text-editor, onenote

我是 HTML5、CSS3 和 JavaScript 的初学者。我达到了使用 Microsoft 的 OneNote 试用版的限制。我非常喜欢这个程序，我想把它制作成一个 html 版本，这样我就不必掏空我的口袋来购买付费版本了。

我需要帮助的部分是您输入笔记的部分。我不知道如何在 html 中制作文本编辑字段。有可能做这样的事情吗？如果它只能做与记事本相同的功能，我会很满意。只要我能够做简单的类型和编辑功能。有人可以告诉我如何编写代码或将我带到一个教授此类内容的网站吗？

谢谢！托尼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:07:12.240

那里有很多解决方案。Nicedit、CKEditor 等。这些都有富文本界面，并且是 javascript 管理的。

最简单的解决方案是只使用只`<textarea>`允许纯文本输入的 a 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:20:16.163

最简单的方法是`<textarea>`在 HTML 中使用标签。也见这个[链接](http://www.w3.org/TR/html-markup/textarea.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:21:12.870

在实现 textarea 标签后，您还可以使用 HTML5 数据缓存通过浏览器在本地保存笔记。

这是一个简洁的小插件，安装/使用应该相对较小。

[https://github.com/ekdevdes/storage.js](https://github.com/ekdevdes/storage.js)

# php - “preg_match()：编译失败：括号不匹配”在 PHP 中用于有效模式

> ID：10384843
> 
> 赞同：13
> 
> 时间：2012-04-30T13:51:53.123
> 
> 标签：php, regex, preg-match

想知道是否有人可以解释为什么在 PHP 的 preg_match 函数中使用以下正则表达式会失败：-

```
<?php
$str = '\tmp\phpDC1C.tmp';

preg_match('|\\tmp\\([A-Za-z0-9]+)|', $str, $matches);

print_r($matches);
?> 
```

这会导致错误消息“preg_match(): Compilation failed: unmatched parentheses”，尽管模式似乎是有效的。我已经使用在线[PHP 正则表达式测试器](http://www.pagecolumn.com/tool/pregtest.htm)和 Linux 工具 Kiki 对其进行了测试。似乎 PHP 正在转义左括号而不是反斜杠。

我通过使用 str_replace 将反斜杠换成正斜杠来解决这个问题。这适用于我的情况，但很高兴知道为什么这个正则表达式会失败。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-30T13:55:53.293

要对文字反斜杠进行编码，您需要对其进行两次转义：一次用于字符串，一次用于正则表达式引擎：

```
preg_match('|\\\\tmp\\\\([A-Za-z0-9]+)|', $str, $matches); 
```

在 PHP 中（使用单引号字符串时），这仅与实际的反斜杠相关；其他正则表达式转义可以使用单个反斜杠：

```
preg_match('/\bhello\b/', $subject) 
```

这在[手册](http://de.php.net/manual/en/regexp.reference.escape.php)中有介绍（请参阅页面顶部标有“注意：”的框）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:01:36.317

你必须使用`|\\\tmp\\\([A-Za-z0-9]+)|`表达式

但是由于字符串的具体形式，有更好的方法来获取文件名。例如：

```
substr($str, 5, -4); 
```

考虑内存使用情况

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:24:47.493

使用下一个正则表达式：

```
php >$str = '\tmp\phpDC1C.tmp'; 
php >preg_match('/[\\\\]tmp[\\\\]([A-Za-z0-9]+)/', $str, $matches);
php >print_r($matches);
Array
(
  [0] => \tmp\phpDC1C
  [1] => phpDC1C
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T13:56:04.773

奇怪的是，我刚刚使用您提到的相同在线正则表达式测试器进行了测试，并且编译时没有错误：

```
<?php 
$ptn = "/<;?php $str = '\tmp\phpDC1C.tmp'; 
preg_match('|\\tmp\\([A-Za-z0-9]+)|', $str, $matches); print_r($matches); ?>;/";
$str = "";
preg_match($ptn, $str, $matches);
print_r($matches);
?> 
```

# javascript - 将两个 json/javascript 数组合并为一个数组

> ID：10384845
> 
> 赞同：71
> 
> 时间：2012-04-30T13:52:05.723
> 
> 标签：javascript, jquery, json

我有两个 json 数组，比如

```
var json1 = [{id:1, name: 'xxx' ...}]
var json2 = [{id:2, name: 'xyz' ...}] 
```

我希望它们合并到单个数组中

```
var finalObj = [{id:1, name: 'xxx' ...},{id:2, name: 'xyz' ...}] 
```

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-04-30T13:55:08.787

你想要的[`concat`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/concat)方法。

```
var finalObj = json1.concat(json2); 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-04-30T13:54:31.957

在第一次出现时，“合并”这个词会让人认为您需要使用[.extend](http://api.jquery.com/jQuery.extend/)，这是“合并”JSON 对象的正确 jQuery 方式。但是，`$.extend(true, {}, json1, json2);`将导致共享相同键名的所有值被参数中提供的最新值覆盖。正如对您问题的审查所示，这是不希望的。

您要寻找的是一个简单的 javascript 函数，称为[.concat](http://www.w3schools.com/jsref/jsref_concat_array.asp)。这将像：

```
var finalObj = json1.concat(json2); 
```

虽然这不是原生 jQuery 函数，但您可以轻松地将其添加到 jQuery 库中以供将来使用，如下所示：

```
;(function($) {
    if (!$.concat) {
        $.extend({
            concat: function() {
                return Array.prototype.concat.apply([], arguments);
            }
        });
    }
})(jQuery); 
```

然后根据需要回忆它，例如：

```
var finalObj = $.concat(json1, json2); 
```

您还可以将它用于这种类型的多个数组对象，例如：

```
var finalObj = $.concat(json1, json2, json3, json4, json5, ....); 
```

如果你真的想要它 jQuery 风格并且非常简短和甜美（又名缩小）

```
;(function(a){a.concat||a.extend({concat:function(){return Array.prototype.concat.apply([],arguments);}})})(jQuery); 
```

```
;(function($){$.concat||$.extend({concat:function(){return Array.prototype.concat.apply([],arguments);}})})(jQuery);

$(function() {
    var json1 = [{id:1, name: 'xxx'}],
        json2 = [{id:2, name: 'xyz'}],
        json3 = [{id:3, name: 'xyy'}],
        json4 = [{id:4, name: 'xzy'}],
        json5 = [{id:5, name: 'zxy'}];

    console.log(Array(10).join('-')+'(json1, json2, json3)'+Array(10).join('-'));
    console.log($.concat(json1, json2, json3));
    console.log(Array(10).join('-')+'(json1, json2, json3, json4, json5)'+Array(10).join('-'));
    console.log($.concat(json1, json2, json3, json4, json5));
    console.log(Array(10).join('-')+'(json4, json1, json2, json5)'+Array(10).join('-'));
    console.log($.concat(json4, json1, json2, json5));
});
```

```
center { padding: 3em; }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<center>See Console Log</center>
```

[jsFiddle](http://jsfiddle.net/SpYk3/pNQwY/)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-04-30T13:55:54.010

你可以试试合并

```
var finalObj = $.merge(json1, json2); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-30T13:54:55.090

由于您使用的是 jQuery。jQuery.extend() 方法怎么样？

[http://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

> 描述：将两个或多个对象的内容合并到第一个对象中。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-10-24T10:09:42.073

***你可以使用 Es 6 的新特性来做到这一点：***

```
var json1 = [{id:1, name: 'xxx' , ocupation : 'Doctor' }];

var json2 = [{id:2, name: 'xyz' ,ocupation : 'SE'}];

var combineJsonArray = [...json1 , ...json2];

//output should like this [ { id: 1, name: 'xxx', ocupation: 'Doctor' },
  { id: 2, name: 'xyz', ocupation: 'SE' } ] 
```

或者您可以在两个 json 数组之间放置额外的字符串或任何内容：

```
var json3 = [...json1 ,"test", ...json2];

// output should like this : [ { id: 1, name: 'xxx', ocupation: 'Doctor' },
  'test',
  { id: 2, name: 'xyz', ocupation: 'SE' } ] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-27T10:54:19.137

也许，您可以使用 javascript 的数组语法：

```
var finalObj =[json1 , json2] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-04T06:25:11.940

如果使用 es6，您可以使用新的 js 扩展运算符：

```
var json1 = [{id:1, name: 'xxx'}]
var json2 = [{id:2, name: 'xyz'}]
var finalObj = [...json1, ...json2]

console.log(finalObj)
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-04T06:07:54.423

**您可以使用Lodash** `_.merge`函数来实现这一点。

```
var json1 = [{id:1, name: 'xxx'}];
var json2 = [{id:2, name: 'xyz'}];
var merged = _.merge(_.keyBy(json1, 'id'), _.keyBy(json2, 'id'));
var finalObj = _.values(merged);

console.log(finalObj);
```

```
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.10/lodash.min.js"></script>
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-07-14T08:49:39.650

试试下面的代码，使用 jQuery 扩展方法：

```
var json1 = {"name":"ramesh","age":"12"};

var json2 = {"member":"true"};

document.write(JSON.stringify($.extend(true,{},json1,json2))) 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2017-03-07T11:59:50.803

```
var json1=["Chennai","Bangalore"];
var json2=["TamilNadu","Karanataka"];

finaljson=json1.concat(json2); 
```

# java - 查看 Java 程序进行的所有系统调用

> ID：10384850
> 
> 赞同：11
> 
> 时间：2012-04-30T13:52:37.217
> 
> 标签：java, linux, system-calls

如何查看我的 Java 程序正在进行哪些系统调用？是否有可以在 Linux 上执行此操作的工具？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T05:27:34.680

使用 strace。但我的情况有一个窍门。选项`-f`是必需的，与 相同`--follow-forks`。例如，下面的代码：

```
public class Foo {
    public static void main (String [] args) {
        System.out.println("XXX");    
    }
} 
```

运行`javac Foo.java`编译后，`strace java Foo 2>&1 | grep write`什么也不打印。但是`strace -f java Foo 2>&1 | grep write`打印：

```
[pid 11655] write(3, "0x63", 4)         = 4
[pid 11655] write(3, "\0", 1)           = 1
[pid 11655] write(3, "\0", 1)           = 1
[pid 11655] write(3, "\0", 1)           = 1
[pid 11655] write(3, "\0", 1)           = 1
[pid 11655] write(3, "\0", 1)           = 1
[pid 11655] write(3, "\0", 1)           = 1
[pid 11655] write(3, "\0", 1)           = 1
[pid 11655] write(3, "\0", 1)           = 1
[pid 11655] write(1, "XXX", 3XXX)          = 3
[pid 11655] write(1, "\n", 1 
```

`[pid 11655] write(1, "XXX", 3XXX) = 3`显示为 进行的系统调用`System.out.println("XXX")`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-30T15:58:30.323

使用[strace](http://linux.die.net/man/1/strace)：

```
strace -f java your_program 
```

或者

```
strace -f -p <pid of your java program> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T13:56:15.883

见 ltrace [http://linux.die.net/man/1/ltrace](http://linux.die.net/man/1/ltrace)

# android - 如何从java文件在Android中创建EditText

> ID：10384860
> 
> 赞同：2
> 
> 时间：2012-04-30T13:53:19.280
> 
> 标签：android

如何使 Android 中的 EditText 仅从 Java 文件而不是 XML 中获取数字输入？我还需要将其设为最多允许 6 个数字的密码字段吗？

我检查了[Android: How do you create an EditText feild in java class](https://stackoverflow.com/questions/9857232/android-how-do-you-create-an-edittext-feild-in-java-class)

以及 [如何从 java 代码创建 EditText 数字（有符号和无符号十进制）](https://stackoverflow.com/questions/10302304/how-to-create-edittext-numeric-signed-and-unsigned-decimal-from-java-code)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:59:27.500

这在 XML 中很容易。这就是我们如何处理这个java文件。

```
EditText et = new EditText(context);                     
// setting input type filter        
et.setInputType(InputType.TYPE_CLASS_NUMBER);                    
// setting input max length
InputFilter maxLengthFilter = new InputFilter.LengthFilter(inp.getLength());
et.setFilters((new InputFilter[]{ maxLengthFilter }));
// settin it to password 
et.setTransformationMethod(PasswordTransformationMethod.getInstance()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:59:48.297

将 setInputType 用于以下一个或多个值：

[http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType](http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:06:56.560

我已经这样做了`XML`，只需添加

`android:numeric="decimal`

在里面`<EditText />`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T14:13:32.957

做这个：

```
LinearLayout mLinearLayout = new LinearLayout(this);
mLinearLayout = (LinearLayout)findViewById(R.id.mylinearlayout);

Button lButton = (Button)findViewById(R.id.mybtnid);
lButton.setOnClickListener(new View.OnClickListener() {
public void onClick(View arg0) {
    EditText lEditText = new EditText(this);
    lEditText .setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, 
                                         LayoutParams.WRAP_CONTENT));
     lEditText.SetText("Text Here");
     mLinearLayout.addView(lEditText);

EditorInfo ed = new EditorInfo();
ed.inputType = InputType.TYPE_CLASS_PHONE;                          
lEditText.setInputType(ed.inputType);

InputFilter[] FilterArray = new InputFilter[1];
FilterArray[0] = new InputFilter.LengthFilter(6);
lEditText.setFilters(FilterArray); 
```

或查看此[博客](http://androidblogger.blogspot.pt/2009/01/numeric-edittext-and-edittext-with-max.html)以了解最大长度限制

Aditya的答案有密码的方法，我认为它更好

最好的祝福

# android - 是关于增强现实还是相机预览？

> ID：10384861
> 
> 赞同：1
> 
> 时间：2012-04-30T13:53:21.783
> 
> 标签：android, android-camera, surfaceview, augmented-reality, surfaceholder

我有一点小小的询问，请不要低估它。

我有一个实现 Render 的类，另一个 CLass 实现了 Surface.callback。

当我运行实现surface.Callback的类时，我设法显示相机预览。

当我运行实现渲染的类时，我设法显示 3D 形状。

现在，我想在相机预览上显示 3D 形状。

我的问题是，我应该学习和阅读什么来实现这一目标？是关于增强现实的吗？

或者我只需要了解更多相机预览的工作原理？

您的回答将是有意义的并受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:02:18.797

只需阅读如何覆盖表面。

增强现实是关于根据相机中显示的内容显示图形（通常它会检测标记并根据它显示图形）。

# linq-to-entities - LINQ to Entities 无法识别方法“System.DateTime Parse(System.String)”方法

> ID：10384862
> 
> 赞同：1
> 
> 时间：2012-04-30T13:53:22.733
> 
> 标签：linq-to-entities

我是 Linq 的新手，以下查询不断返回“无法识别 System.DateTime”错误。我试过 Parse 和 Convert 都没有。这是我的查询：

mrcEntities 上下文 = GetContext();

```
 var query = from c in context.tblClients
                    where (c.FirstName != null || c.LastName != null)
                       && c.EligibilityDate >= DateTime.Parse("10/01/2011")
                       && c.EligibilityDate <= DateTime.Parse("04/30/2012")
                      orderby c.ClientID
                    select new
                    {
                        ClientID = c.ClientID,
                        FirstName = c.FirstName,
                        LastName = c.LastName,
                        MiddleName = c.MidName,
                        SSN = c.SSN,
                        DOB = c.DOB,
                        Sex = c.Gender,
                        Ethnic = c.EthnicCode
                    };

        clientRowCnt = query.Count(); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T13:57:28.690

这是因为 EF 无法将 DateTime.Parse 转换为商店中可用的函数。如果您替换对 DateTime.Parse() 的调用结果并在查询中使用这些变量，它应该可以正常工作。

```
var from = DateTime.Parse("10/01/2011");
var to = DateTime.Parse("04/30/2012");
var query = from c in context.tblClients
                    where (c.FirstName != null || c.LastName != null)
                       && c.EligibilityDate >= from
                       && c.EligibilityDate <= to
                      orderby c.ClientID
                    select new
                    {
                        ClientID = c.ClientID,
                        FirstName = c.FirstName,
                        LastName = c.LastName,
                        MiddleName = c.MidName,
                        SSN = c.SSN,
                        DOB = c.DOB,
                        Sex = c.Gender,
                        Ethnic = c.EthnicCode
                    };

        clientRowCnt = query.Count(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T13:57:36.740

只需解析查询之外的日期。或者使用构造函数来创建日期，甚至不解析它（你已经知道它看起来的值。

```
DateTime start = DateTime.Parse("10/01/2011");
DateTime emd = DateTime.Parse(04/30/2012);

var query = from c..... 
```

或使用：

```
DateTime start = new DateTime(2011, 10, 01);
DateTime end = new DateTime(2012, 04, 30);

var query = from c..... 
```

您还可以安全地解析查询的投影部分中的字符串，因为该部分是在检索数据后在客户端执行的。所以

```
var query = from c...
select
    new {
        EligibilityDate = Datetime.Parse(c.EligibilityDate)
    } 
```

只有在选择条件中需要解析值时，才需要将其作为 DateTime 值提供。

到目前为止，更好的解决方案是修复数据库模式，或者甚至只是将计算列添加到现有模式中，该模式在服务器上进行解析并公开正确的类型列。

# objective-c - iPhone：如何从金额字符串中获取货币符号？

> ID：10384863
> 
> 赞同：2
> 
> 时间：2012-04-30T13:53:27.887
> 
> 标签：objective-c, ios

我有一份不同货币的金额列表（例如 10.99 美元、20.55 欧元）。我想找出每个字符串的货币符号以解析金额。

你有什么想法 ？

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:02:56.300

您可以使用正则表达式来查找第一个不是数字或小数分隔符的符号：

```
NSError *error = NULL;
NSRegularExpression *symbol= [NSRegularExpression
    regularExpressionWithPattern:@"[^0-9.,]"
    options:NSRegularExpressionCaseInsensitive
    error:&error];
NSRange r = [symbol
    rangeOfFirstMatchInString:myString
    options:0
    range:NSMakeRange(0, [myString length])];
if (!NSEqualRanges(r, NSMakeRange(NSNotFound, 0))) {
    NSLog(@"Currency symbol is '%@'", [myString substringWithRange:r]);
} 
```

# eclipse - Eclipse 无法处理 CSS3 动画

> ID：10384865
> 
> 赞同：4
> 
> 时间：2012-04-30T13:53:44.917
> 
> 标签：eclipse, css, formatting, newline

我想知道是否有人可以告诉我为什么 eclipse 似乎决定不正确格式化 css3 动画的代码，更具体地说，它在关键帧规则中插入换行符。有关如何解决此问题的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T11:54:40.813

根据[此评论](https://bugs.eclipse.org/bugs/show_bug.cgi?id=324731#c8)

> 此外，CSS3 不是默认的 CSS 级别。因此，您需要在项目级别或文件级别修改 Web 内容设置，方法是右键单击项目或文件并选择属性。选择 Web Content Settings 并将 CSS Profile 更改为“Cascading Style Sheets, level 3”。

验证您的 WTP 版本是否至少为 3.2.3。

试试看。如果您仍然遇到格式问题，我建议您在 Eclipse Bug 跟踪中添加一个问题。

您也可以尝试安装[Aptana Studio 3](http://www.aptana.com/products/studio3/download) Eclipse 插件版本。

# java - ThreadPoolExecutor 如何中断空闲线程？

> ID：10384868
> 
> 赞同：1
> 
> 时间：2012-04-30T13:53:56.300
> 
> 标签：java, java.util.concurrent

刚翻了一下源码`ThreadPoolExecutor`发现一旦时间达到keepAliveTime的设定值并且allowCoreThreadTimeOut为true就会中断所有空闲的worker。

对我来说有点奇怪，它只能在 runState >= SHUTDOWN 时调用中断方法：

下面的代码来自`getTask()`.`ThreadPoolExecutor`

```
Runnable getTask() {
...
if (workerCanExit()) {
    if (runState >= SHUTDOWN) // Wake up others
        interruptIdleWorkers();
    return null;
   }
} 
```

这是否意味着所有空闲线程只能在 runState >= SHUTDOWN（SHUTDOWN、STOP 或 TERMINATED）时被中断？也就是说当状态为RUNNING时它们不会被中断。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:20:18.237

你说的对。调用此`getTask()` 方法`ThreadPoolExecutor`以获取工作线程运行的下一个任务。此代码块仅在方法调用未标识任何 Runnable 任务以执行时才执行。因此，如果没有发现要执行的内容，它必须检查关闭状态。

来自java文档`workerCanExit()`

> 检查获取任务失败的工作线程是否可以退出。如果池正在停止，或者队列为空，或者至少有一个线程可以处理可能非空的队列，即使允许核心超时，我们也允许工作线程死亡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-10T06:20:26.973

例如，将 ThreadPoolExecutor 配置为：corePoolSize=1，maxPoolSize=5，workQueueSize=1，keepAliveTime=60s，allowCoreThreadTimeOut=false。

当你同时提供 5 个任务（每个任务都比较耗时）时，这 5 个任务中的一个会进入 workQueue，其他 4 个任务将立即由几乎同时新创建的 4 个工作线程处理。

此时工作线程总数为4(workerThreadCount=4)。一旦一个线程完成其任务，它将通过调用阻塞方法 workQueue.take() 或 workQueue.poll(keepAliveTime) 等待 workQueue。至于调用哪个阻塞方法，由workerThreadCount决定。

例如（假设），在某个时间点，workerThread-0正在处理task-0；task-1 留在工作队列中；workerThread-1 正在处理任务 2；workerThread-2 正在处理任务 3；workerThread-3 正在处理 task-4，workerThreadCount==4。

1.  workerThread-3 完成了task-4，此时[workerThreadCount==4] > [corePoolSize==1]，它将通过workQueue.poll(keepAliveTime) 从workQueue 中获取下一个task(task-1)。然后，继续处理task-1，这次workerThreadCount==4。ThreadPoolExecutor.java 的代码段如下：

    `while (task != null || (task = getTask()) != null) { task.run(); } private Runnable getTask() { boolean timed = allowCoreThreadTimeOut || wc > corePoolSize; Runnable r = timed ? workQueue.poll(keepAliveTime, TimeUnit.NANOSECONDS) : workQueue.take(); }`

2.  然后workerThread-0完成task-0，因为[workerThreadCount==4] > [corePoolSize==1]，它仍然通过workQueue.poll(keepAliveTime)从workQueue获取下一个任务。但是，这次 workQueue 是空的，所以 workerThread-0 会被阻塞在上面，workerThread-0 的状态是**TIMED_WAITING**。一旦 keepAliveTime 过去，workQueue.poll(keepAliveTime) 将返回 null，接下来，workerThread-0 将从 Runnable.run() 返回，并变为**TERMINATED**。这次workerThreadCount==3。
3.  然后workerThread-1完成task-2，它会以与workerThread-0相同的方式返回。这次workerThreadCount==2。
4.  然后workerThread-3完成task-1，它会以与workerThread-1相同的方式返回。这次workerThreadCount==1。
5.  然后workerThread-2完成了task-3，但是这次[workerThreadCount==1]不超过[corePoolSize==1]，所以当workQueue.take()从workQueue获取下一个任务时会阻塞，直到有一个workQueue 中的可用任务。它的状态是**WAITING**。

注意：源代码来自JDK8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:14:10.367

确切地。正确的任务（如果允许中断）必须检查自身是否有中断标志并终止（即从 run() 返回）。

# java - args4j：在解析过程中哪个参数抛出了 CommandLineException？

> ID：10384870
> 
> 赞同：0
> 
> 时间：2012-04-30T13:54:09.113
> 
> 标签：java

我正在使用 args4j 来解析给我的程序的参数。

这是我定义 2 个 Date 类型参数的代码。处理程序只解析给定的日期，如果日期格式错误，则抛出 CommandLineException。

```
@Option(name="-b", metaVar="<beginDate>", handler=DateOptionHandler.class, usage="...")
private Date beginDate;

@Option(name="-e", metaVar="<endDate>", handler=DateOptionHandler.class, usage="...")
private Date endDate; 
```

如果它是引发异常的 beginDate 或 endDate，我需要能够返回不同的代码（int 值）。

目前，我的主要方法如下所示：

```
CmdLineParser parser = new CmdLineParser(this);
parser.setUsageWidth(120);

try {
    parser.parseArgument(args);
} catch (CmdLineException e) {
    /* Print usage if an error occurs during the parsing */
    System.err.println(e.getMessage());
    System.err.println("Usage : java LaunchProgram [options]");
    e.getParser().printUsage(System.err);

    /* What I need to do : */
    if(optionWhichThrewTheException.equals("-b") return 2;
    if(optionWhichThrewTheException.equals("-e") return 3;

    /* Other arguments */
    return -1;
} 
```

但我不知道如何知道哪个参数引发了异常（我查看了 CmdLineException 方法，但什么也没找到）。

有没有办法获取无法解析的参数？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:21:44.983

我从未使用过 args4j，但查看它的文档，似乎异常是由选项处理程序引发的。因此，使用 BDateOptionHandler 和 EDateOptionHandler，它们会抛出包含所需信息的 CmdLineException 的自定义子类：

```
public class BDateOptionHandler extends DateOptionHandler {
    @Override
    public int parseArguments(Parameters params) throws CmdLineException {
        try {
            super.parseArguments(params);
        }
        catch (CmdLineException e) {
            throw new ErrorCodeCmdLineException(2);
        }
    }
}

public class EDateOptionHandler extends DateOptionHandler {
    @Override
    public int parseArguments(Parameters params) throws CmdLineException {
        try {
            super.parseArguments(params);
        }
        catch (CmdLineException e) {
            throw new ErrorCodeCmdLineException(3);
        }
    }
}

...
try {
    parser.parseArgument(args);
} 
catch (CmdLineException e) {
    ...
    if (e instanceof ErrorCodeCmdLineException) {
        return ((ErrorCodeCmdLineException) e).getErrorCode();
    }
} 
```

# c# - 在 Monotouch 中为整个应用程序设置默认的 UILabel 颜色

> ID：10384871
> 
> 赞同：0
> 
> 时间：2012-04-30T13:54:09.920
> 
> 标签：c#, xamarin.ios, monotouch.dialog

我已经想出了如何设置标题栏的色调并为我的所有视图设置了背景图像，但是对于我的生活，我无法弄清楚如何为节标题等设置默认的 UILabel 颜色。我不想让我的代码手动将我的所有颜色设置为 UIColor.Black。有没有办法获取不同 UIElements 的列表以及为每个元素设置默认值（颜色、字体、大小）的方法？我对标签的颜色特别感兴趣，但任何其他信息都会对未来非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T00:39:02.320

从 iOS 5 开始，有一个[`UIAppearance`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html)类可以处理许多 UI 元素的全局外观。

它与 MonoTouch 一起工作的方式是`Appearance`在这些类型上存在一个名为 的内部类型。您可以直接从中设置属性（使用 MonoDevelop 的代码完成很容易）。例如

```
UILabel.Appearance.BackgroundColor = UIColor.Blue; 
```

遗憾的是，它并没有涵盖您可能想要的每个控件的所有内容（在 iOS 5 之前它也不会工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:31:37.950

这有点骇人听闻，但这可以解决问题，并且它适用于该子类的各种其他 UI 控件`UIView`。这假设你有自己的子类`DialogViewController`（我的有很多方便的节省时间的东西，我所有的视图子类我的 DVC 来工作）。

```
 protected void ForAllSubviewUIControlsOfType<TUIType>(Action<TUIType, int> actionToPerform) where TUIType : UIView
    {
        processSubviewUIControlsOfType<TUIType>(this.View.Subviews, actionToPerform, 0);
    }

    private void processSubviewUIControlsOfType<TUIType>(UIView[] views, Action<TUIType, int> actionToPerform, int depth) where TUIType : UIView
    {
        if (views == null)
            return;
        if (actionToPerform == null)
            return;
        foreach (UIView view in views)
        {
            if (view.GetType () == typeof(TUIType))
            {
                actionToPerform((TUIType)view, depth);
            }
            if (view.Subviews != null)
            {
                foreach (UIView subview in view.Subviews)
                {
                    processSubviewUIControlsOfType<TUIType>(view.Subviews, actionToPerform, depth + 1); 
                }
            }
        }
    } 
```

要解决原始问题并更改部分中所有标签的文本颜色，您需要执行以下操作：

```
 public override void ViewDidAppear (bool animated)
    {
        base.ViewDidAppear (animated);
        ForAllSubviewUIControlsOfType<UILabel>((label, depth) => {
            if ( /*label.Superview is UIView && label.Superview.Superview is UITableView*/ depth == 1 )
            {
                label.TextColor = UIColor.Black;
            }
        });
    } 
```

注释掉的部分是确定标签是否存在于一个部分中，然后我决定返回一个`int depth`计数以查看它是否在视图中。

**编辑**：似乎这不是完美的解决方案......深度计数因这些元素而异。我必须在接下来的一两天内找到更好的办法。

# clojure - 为什么 Clojure 在等效功能方面比 mit-scheme 快得多？

> ID：10384875
> 
> 赞同：10
> 
> 时间：2012-04-30T13:54:26.840
> 
> 标签：clojure, scheme, mit-scheme

我在 Clojure 中找到了这段代码来筛选出前*n 个*素数：

```
(defn sieve [n]
  (let [n (int n)]
    "Returns a list of all primes from 2 to n"
    (let [root (int (Math/round (Math/floor (Math/sqrt n))))]
      (loop [i (int 3)
             a (int-array n)
             result (list 2)]
        (if (>= i n)
          (reverse result)
          (recur (+ i (int 2))
                 (if (< i root)
                   (loop [arr a
                          inc (+ i i)
                          j (* i i)]
                     (if (>= j n)
                       arr
                       (recur (do (aset arr j (int 1)) arr)
                              inc
                              (+ j inc))))
                   a)
                 (if (zero? (aget a i))
                   (conj result i)
                   result))))))) 
```

然后我在 Scheme 中编写了等效的（我认为）代码（我使用 mit-scheme）

```
(define (sieve n)
  (let ((root (round (sqrt n)))
        (a (make-vector n)))
    (define (cross-out t to dt)
      (cond ((> t to) 0)
            (else
             (vector-set! a t #t)
             (cross-out (+ t dt) to dt)
             )))
    (define (iter i result)
      (cond ((>= i n) (reverse result))
            (else
             (if (< i root)
                 (cross-out (* i i) (- n 1) (+ i i)))
             (iter (+ i 2) (if (vector-ref a i)
                               result
                               (cons i result))))))
    (iter 3 (list 2)))) 
```

计时结果是：对于 Clojure：

```
(time (reduce + 0 (sieve 5000000)))
"Elapsed time: 168.01169 msecs" 
```

对于 mit 方案：

```
(time (fold + 0 (sieve 5000000)))
"Elapsed time: 3990 msecs" 
```

谁能告诉我为什么 mit-scheme 慢了 20 倍以上？

*更新*：“不同之处在于迭代/编译模式。在我编译了 mit-scheme 代码后，它的运行速度相当快。– abo-abo 2012 年[4 月 30 日 15:43](https://stackoverflow.com/questions/10384875/why-is-clojure-much-faster-than-mit-scheme-for-equivalent-functions#comment13391719_10385446) ”

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-30T14:33:18.857

与解释型语言相比，Java 虚拟机的现代版本具有极好的性能。大量的工程资源进入了 JVM，特别是热点 JIT 编译器、高度优化的垃圾收集等。

我怀疑你看到的差异主要是因为这个。例如，如果您查看[Java 程序是否更快？](http://benchmarksgame.alioth.debian.org/u64q/compare.php?lang=java&lang2=yarv)您可以看到 java 与 ruby​​ 的比较，这表明 java 在其中一个基准测试中的表现要好 220 倍。

你没有说你正在运行你的 clojure 基准测试的 JVM 选项。尝试使用`-Xint`以纯解释模式运行的标志运行 java，看看有什么区别。

此外，您的示例可能太小而无法真正预热 JIT 编译器。使用更大的示例可能会产生更大的性能差异。

让您了解 Hotspot 对您的帮助程度。我在我的 MBP 2011（四核 2.2Ghz）上运行了您的代码，使用带有默认选项（-server 热点）和解释模式（-Xint）的 java 1.6.0_31，并看到了很大的不同

```
; with -server hotspot (best of 10 runs)
>(time (reduce + 0 (sieve 5000000)))
"Elapsed time: 282.322 msecs"
838596693108

; in interpreted mode using -Xint cmdline arg
> (time (reduce + 0 (sieve 5000000)))
"Elapsed time: 3268.823 msecs"
838596693108 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T08:54:30.090

至于比较 Scheme 和 Clojure 代码，在 Clojure 端有一些事情需要简化：

*   不要在循环中重新绑定可变数组；
*   删除许多显式的原始强制，性能没有变化。从 Clojure 1.3 开始，如果这样的函数签名可用，函数调用中的文字将编译为原语，并且通常性能差异非常小，以至于它很快就会被循环中发生的任何其他操作所淹没；
*   将原始长注释添加到 fn 签名中，从而消除 n 的重新绑定；
*   不需要调用 Math/floor —— int 强制具有相同的语义。

代码：

```
(defn sieve [^long n]
 (let [root (int (Math/sqrt n))
       a (int-array n)]
   (loop [i 3, result (list 2)]
     (if (>= i n)
       (reverse result)
       (do
         (when (< i root)
           (loop [inc (+ i i), j (* i i)]
             (when (>= j n) (aset a j 1) (recur inc (+ j inc)))))
         (recur (+ i 2) (if (zero? (aget a i))
                          (conj result i)
                          result))))))) 
```

# web-services - 使用 Web 界面保护金融应用程序

> ID：10384878
> 
> 赞同：1
> 
> 时间：2012-04-30T13:54:37.787
> 
> 标签：web-services, security, web2py

我正在设计一个应用程序，用户将能够通过 Web 界面远程登录和使用。

安全性是最重要的（想想信用卡和个人银行业务类型信息）——所以我需要确保我已经确定了安全方面——HARD。

我打算通过传统（有状态）网页以及 Web 服务来提供应用程序功能。

对于它的价值，我打算使用 web2py 作为我的 Web 应用程序框架。

是否有一份我可以遵循的指导方针清单，以确保我涵盖了所有领域？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:41:09.933

一站式购物： [https ://www.owasp.org/index.php/Main_Page](https://www.owasp.org/index.php/Main_Page)

阅读并牢记每一个建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:28:11.043

到目前为止，您最大的威胁是编写在您的 Web 应用程序层中引入漏洞的服务器端 Web 应用程序代码。这不是您可以检查的清单。对于初学者，请确保您对 OWASP 前十名中的项目 100% 满意，并了解如何安全地针对它们进行编码。如果您不是 Web 应用程序漏洞方面的专家，强烈考虑聘请帮助审查 Web 层的人员。至少，我会考虑联系一家安全测试公司来执行某种形式的渗透测试，最好是使用代码审查组件。

如果您曾经对信用卡数据进行过任何操作，则需要遵守 PCI DSS，这将需要至少每季度由经批准的扫描供应商进行远程测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:03:34.697

你至少应该考虑以下几点：

*   验证。让用户以某种方式登录。他们使用哪种身份验证方法取决于您的目标是提供什么

*   隐私。确保他们发送的信息只对他们和您的应用程序可见，而不是窃听者。

在最简单的情况下，SSL 可以同时处理上述两个问题。它将始终提供加密，但也可用于身份验证或至少使一些简单的身份验证机制更安全。要看的一件事是 ssl 的安全性。ssl 很容易受到中间人的攻击，特别是当用户已经与他们的雇主建立信任关系时——他们可以继续安装一个实际上是 mim 的 ssl 网关。

*   授权。确保用户只能看到您希望他们看到的内容，而不能再看到。

这实际上取决于您使用的技术。

*   非信誉。确保用户不能对他们执行的操作提出异议

这是一个非常开放的问题。从法律上讲，这很少（从不？）使用，所以它取决于......例如用户请求操作的签名日志可能就足够了。

# android - Android 分享图片用户体验的最佳实践

> ID：10384880
> 
> 赞同：1
> 
> 时间：2012-04-30T13:54:45.020
> 
> 标签：android, user-experience, image-uploading

我有一个 Android 应用程序，用户可以使用它与服务器上的图像共享帖子。

图像由相机拍摄 - 因此我将尺寸更改为较小的尺寸并压缩它。我还需要图像采用 2 种格式 - 常规和缩略图。

我想最好在设备上创建 2 个版本和 U/L 两者？

我也是在BG做的，所以用户不会被长时间屏蔽......这是一个好的行为吗？我应该阻止用户 10-20-30 秒（取决于网络速度吗？）

常见的用途是什么？推荐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:08:39.897

不...如果您只上传大图像并让服务器负责缩略图生成，那将是更好的体验。这样，您可以最大限度地减少用户的数据使用量，以及上传图像所需的时间。

另外，绝对不要阻止用户......在后台上传，让用户继续使用应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:12:42.080

*   使用多部分内容类型发送图像。

*   如果您有一个额外的步骤，用户开始输入其他信息（如标题、描述等），您可以开始上传您的图像，这样用户就不会注意到延迟（异步执行）。这就是 Instagram 所做的。

*   说到你的尺寸，`Bitmap`我认为你应该考虑只发送一个普通版本，让缩略图由服务器完成。但是，您必须对其进行压缩（JPEG/PNG），也可以将其缩小 2 倍，否则您可能会遇到内存错误。

*   附带说明（与您的问题没有真正相关），在显示大量`Bitmap`. 在 Honeycomb 之前，`Bitmap`分配在本机堆上，但在 VM 堆上进行计算（如果我没记错的话），所以不要简单地指望 VM 堆上剩下多少内存。如果您还没有，这个[演讲](http://www.youtube.com/watch?v=_CruQY55HOk)值得一看。

# javascript - 输入框和css改变颜色

> ID：10384891
> 
> 赞同：0
> 
> 时间：2012-04-30T13:55:15.010
> 
> 标签：javascript, css, user-interface, frontend

我有一个如下所示的输入框，

```
<input id="basic-search" type="text" value="Enter keyword or phrase" title="basic-search" class="form-text" size="38" onclick = "this.className = 'focused'; javascript:Reset();" onblur = "javascript:Reset();" /> 
```

.focused 和 form-text 的 css 是，

```
.focused {
color:black;
}

.form-text
{
    background-color: #FFF;
    color: #CCC;
} 
```

加载时输入框的内容是“输入关键字或短语”，最初是灰色的。单击此框并在输入错误时字体颜色变为黑色（效果很好）。当删除内容时，选项卡到下一个字段或在鼠标上按内容“输入关键字或短语”变为黑色。它应该仍然是灰色的。我应该在css中做些什么改变？任何投入都会有所帮助。谢谢。

注意：我注意到 stackoverflow 中的“标题”字段可以正常工作。我希望我的 boc 以同样的方式工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:02:18.407

使用 onfocus 而不是 onclick。此外，对于您的 onblur，请附加 css 类：

jsFiddle：http: [//jsfiddle.net/QybRX/14/](http://jsfiddle.net/QybRX/14/)

```
<input id="basic-search" type="text" value="Enter keyword or phrase" title="basic-search" class="form-text" size="38" onfocus="this.value=''; this.className = 'focused'; javascript:Reset();" onblur = "basicSearch()" />
<input type="text"/>

<script>    
    function basicSearch()
    {
        var element = document.getElementById("basic-search");

        if ( element.value.length == 0 )
        {
            element.value = 'Enter keyword or phrase';
            element.className = 'form-text';
        }
        else
        {
            element.className = 'focused';
        }

        javascript:Reset();
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:00:04.317

发生的事情是，当用户单击它时，您将“聚焦”类添加到输入字段，但该类永远不会被删除。您要么需要删除类 onblur，要么切换到使用`:focus`CSS 中的选择器，如下所示：

```
.form-text
{
  background-color: #FFF;
  color: #CCC;
}

#basic-search:focus
{
  color: black;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:02:38.967

您是否试图模仿[HTML5 占位符属性](http://www.w3schools.com/html5/att_input_placeholder.asp)？如果是这样，您可能想看看[这篇文章](http://webdesignerwall.com/tutorials/cross-browser-html5-placeholder-text)

# javascript - Javascript 添加错误消息

> ID：10384893
> 
> 赞同：0
> 
> 时间：2012-04-30T13:55:39.393
> 
> 标签：javascript, html

我是 javascript 新手，想知道以下错误消息是什么意思：

你好*_* _ NaN

NaN 是什么意思？

我的脚本如下：

```
 <script type="text/javascript">
function validateForm()
{
var x=document.forms["myForm"]["name"].value;
if (x==null || x=="")
  {
  alert("What Is Your Name?");
  return false;
  }
}

function addNos(){
    var a, b, res;
    a= parseFloat(document.myForm.salary.value);
    b= parseFloat(document.myForm.requiredamount.value);
    res = a+b;
    window.alert("Hello" + a + b );
}

</script>

    <form name="myForm" action="" onsubmit="return validateForm()" method="post">

<label>Your Name</label> <br /><br /><input name="name" type="text" />

<br /><br />
<label>Your Salary</label><br /><br />
<select name="salary">
  <option value="10000">10000</option>
  <option value="20000">20000</option>
  <option value="30000">30000</option>
</select>

<br /><br />
<label>Required Amount</label><br /><br />
<input name="requiredamount" type="radio" value="5000" /> 5000
<input name="requiredamount" type="radio" value="10000" /> 10000
<input name="requiredamount" type="radio" value="15000" /> 15000
<input name="requiredamount" type="radio" value="20000" /> 20000

<br /><br />

<input name="" type="submit" value="Get Quote" onclick="addNos()" />

</form> 
```

我正在尝试将所需的金额与薪水相加，并让名称出现在对话框中。

有人知道anwseR吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:57:29.110

NaN 表示不是数字。除以零或添加未定义的值时，可能会发生这种情况。

维基： [http ://en.wikipedia.org/wiki/NaN](http://en.wikipedia.org/wiki/NaN)

好的，我没有时间测试您的代码，但看起来您的 JavaScript 正在尝试在用户输入值之前访问表单元素？（意味着它们是未定义的）。

需要下载 jQuery 来执行此操作：

你可以将你的 JavaScript 代码包围在`$(document).ready(function(){ //your code {);`

**如何检测 NaN 的原因**

1.  已加载 html 元素（有时 html 在 javascript 之后加载）
2.  值是否未定义？
3.  你除以零吗？
4.  JavaScript 有[http://www.w3schools.com/jsref/jsref_isnan.asp](http://www.w3schools.com/jsref/jsref_isnan.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:01:13.960

```
function addNos(){
    var a, b, res;
    a= parseFloat(document.myForm.salary.value);
    b= parseFloat(document.myForm.requiredamount.value);
    res = a+b;
    window.alert("Hello" + a + b );
} 
```

您依靠用户输入来正确输入数字。您应该在解析之前使用 RegEx 验证输入是否为数字。

[http://jsfiddle.net/rMgeB/](http://jsfiddle.net/rMgeB/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:02:18.957

它的意思是“不是数字”（NaN）。如果“salary”字段或“requiredamount”字段中有一些非数字值，则会发生这种情况。例如，如果您分别具有值“100”和“Blah”，则用于计算 a 的 parseFloat() 将返回数字 100，而用于 b 的 parseFloat() 将返回 NaN，因为“Blah”没有数字表示。随后，当您尝试在警报框中添加 100 和 NaN 时，您将看到您所看到的行为。

您可以使用 isNaN() 函数仔细检查这些值：

```
a = parseFloat(...);
if (isNaN(a))
{
    alert("Sorry, you must enter a real number");
    return;
} 
```

希望这能说明问题。

编辑：

最有可能的情况是您的输入中有一个 $ 。`parseFloat("$100") == NaN`而`parseFloat("100") == 100`因此您需要先去除代码中的任何前导美元符号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T14:03:09.873

尝试这个：

[http://jsfiddle.net/LEX84/](http://jsfiddle.net/LEX84/)

如果选择了单选按钮，我没有添加测试。如果未选择单选按钮，则结果为 NaN。

获取单选按钮是从这里：[javascript selected radio](https://stackoverflow.com/questions/6533138/javascript-selected-radio)

```
function validateForm()
{
var x=document.forms["myForm"]["name"].value;
if (x==null || x=="")
  {
  alert("What Is Your Name?");
  return false;
  }
}

function getCheckedRadioId(name) {
    var elements = document.getElementsByName(name);

    for (var i=0, len=elements.length; i<len; ++i)
        if (elements[i].checked) return elements[i].value;
}
function addNos(){
    var a, b, res;
    a= parseFloat(document.myForm.salary[document.myForm.salary.selectedIndex].value);
    alert(a);
    b= parseFloat(getCheckedRadioId("requiredamount"));
    res = a+b;
    window.alert("Hello " + a + " " + b );
} 
```

# c# - 如何在 WCF 服务中使用 RequestContext 映射路径

> ID：10384894
> 
> 赞同：12
> 
> 时间：2012-04-30T13:55:48.553
> 
> 标签：c#, asp.net, .net, wcf, xsd

这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/aa702682.aspx)说：

`HttpContext: Current is always null when accessed from within a WCF service. Use RequestContext instead.`

我想要做的是从我的 IIS 托管的 WCF 服务中加载一些 XSD 文件。问题是，我无法弄清楚如何像在任何旧的香草 ASP.NET 网站中那样执行 Server.MapPath()，例如：

`HttpContext.Current.Server.MapPath(schemaUri);`

在 IIS 托管的 WCF 服务中使用 RequestContext 的等效方法是什么？

这些模式位于服务应用程序根目录下的“Schemas”目录中。使用 web.config 中的自定义配置部分引用它们，如下所示：

```
<schemas>
    <add uri="~/Schemas/foo.xsd" xmlNamespace="http://foo.bar/types" />
</schemas> 
```

我试图像这样加载：

`var schemaUri = HttpContext.Current.Server.MapPath(schema.Uri);`

在普通的 ASP.NET 网站中工作正常，而不是在 IIS 托管的 WCF 服务中。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-30T14:01:18.577

您可以使用[HostingEnvironment.MapPath](http://msdn.microsoft.com/en-us/library/system.web.hosting.hostingenvironment.mappath.aspx)。

# windows-phone-7 - 实现本地餐厅搜索

> ID：10384895
> 
> 赞同：2
> 
> 时间：2012-04-30T13:55:49.670
> 
> 标签：windows-phone-7, search, bing, proximity

我目前正在尝试在我的 Windows Phone 7 应用程序中使用类似于本地侦察员（搜索按钮 -> 邻近度）的功能。

我想获取我当前位置附近的 10 家顶级餐厅或酒吧/俱乐部。获取用户的地理位置是很容易的部分。

现在我想将此位置传递给 API 并获取结果。

我尝试了 Bing Search API，但我不知道如何获取特殊位置，例如餐馆。并且 SOAP 服务连接在我的手机上不起作用。

然后我从其他 API 中搜索...似乎也可以使用 Google 或 Yahoo (PlaceFinder) 或者 Foursquare。但在进一步调查之前，您是否有任何想法来实施 Bing 的本地侦察员的简单解决方案？

还是有另一种实现此功能的方法？

哦，我是法国人，但不是专门针对市场，所以我想使用国际服务。

非常感谢。

达米安

**编辑 ：**

我想我找到了解决方案的一部分： [Get business type/industry from Bing Phonebook API](https://stackoverflow.com/questions/6912031/get-business-type-industry-from-bing-phonebook-api/7002207#7002207)

由于我想使用必应搜索 WSDL，我添加了对 [http://api.search.live.net/soap.asmx?AppId=42](http://api.search.live.net/soap.asmx?AppId=42)的服务引用（其中 42 是我的应用程序密钥）。

当我（从我的手机）执行一个简单的测试时：

```
 public void Test()
    {
        BingPortTypeClient bing = new BingPortTypeClient();
        SearchRequest request = new SearchRequest();
        request.AppId = AppId; 
        request.Sources = new SourceType[] { SourceType.Web };
        request.Query = "restaurant";

        bing.SearchCompleted += new EventHandler<SearchCompletedEventArgs>(bing_SearchCompleted);
        bing.SearchAsync(request);
   }

   void bing_SearchCompleted(object sender, SearchCompletedEventArgs e)
   {

   } 
```

我收到以下异常：

```
There was no endpoint listening at http://api.search.live.net/soap.asmx that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details.

Inner : The remote server returned an error: NotFound. 
```

我认为使用这个 API 会更容易和有据可查...

# jdo - jdo：以编程方式在 DataNucleus 中创建多个持久性单元

> ID：10384900
> 
> 赞同：3
> 
> 时间：2012-04-30T13:55:55.277
> 
> 标签：jdo, datanucleus

我有两个不同的数据源，我需要两个不同的`PersistenceManagerFactory`. 我总是可以通过写一个`persistence.xml`文件来得到这个。但我希望以编程方式表示这一点。尽管第二个数据源保持相对不变，但第一个数据源可能会通过插件对其进行添加。这些插件可以带有一个或多个 JDO 注释类。A`persitance.xml`在这里不是一个好主意，因为我希望它们在运行时加载。

在 Hibernate（和 JPA）中，这可以通过创建配置对象并向其添加所有带注释的类来实现。每当我看到一个新插件被加载时，我总是可以`SessionFactory`通过查看`@Entity`注释来关闭并使用插件中的额外类重新加载它。

在 DataNucleus/JDO 中有类似的方法吗？

我尝试在 Google 上搜索它，但我最终只能在[DataNucleus 网站上](http://www.datanucleus.org/products/datanucleus/jpa/persistence_unit.html)解释如何编写`persitence.xml`文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-05T22:27:45.687

下面的 Scala 代码演示了如何`PersistenceManager`动态创建一个。您只需填充地图并将其传递给`JDOHelper#getPersistenceManagerFactory`.

```
private val pu  = props(db.driver, db.url, db.username, db.password)
private val pmf = JDOHelper.getPersistenceManagerFactory(pu.asJava)
private val pm  = pmf.getPersistenceManager.asInstanceOf[JDOPersistenceManager] 
```

下面您可以看到一个示例，说明在和的情况`H2`下您可能愿意如何填充此类地图：`MongoDB``PostgreSQL`

```
 def props(driver: String, url: String, username: String, password: String): Map[String, Any] =
    driver match {
      case "org.h2.Driver" =>
        Map[String, Any](
          "javax.jdo.option.Mapping"                 -> "h2",
          "datanucleus.schema.autoCreateAll"         -> "true",
          "javax.jdo.PersistenceManagerFactoryClass" -> "org.datanucleus.api.jdo.JDOPersistenceManagerFactory",
          "javax.jdo.option.ConnectionDriverName"    -> driver,
          "javax.jdo.option.ConnectionURL"           -> url,
          "javax.jdo.option.ConnectionUserName"      -> username,
          "javax.jdo.option.ConnectionPassword"      -> password
        )

      case "org.postgresql.Driver" =>
        Map[String, Any](
          "datanucleus.schema.autoCreateAll"         -> "true",
          "javax.jdo.PersistenceManagerFactoryClass" -> "org.datanucleus.api.jdo.JDOPersistenceManagerFactory",
          "javax.jdo.option.ConnectionDriverName"    -> driver,
          "javax.jdo.option.ConnectionURL"           -> url,
          "javax.jdo.option.ConnectionUserName"      -> username,
          "javax.jdo.option.ConnectionPassword"      -> password,
          "javax.jdo.option.RetainValues"            -> "true",
          "javax.jdo.option.RestoreValues"           -> "true",
          "javax.jdo.option.Optimistic"              -> "true",
          "javax.jdo.option.NontransactionalWrite"   -> "false",
          "javax.jdo.option.NontransactionalRead"    -> "true",
          "javax.jdo.option.Multithreaded"           -> "true",
          "javax.jdo.option.IgnoreCache"             -> "false"
        )

      case "mongodb.jdbc.MongoDriver" =>
        Map[String, Any](
          "javax.jdo.option.Mapping"                 -> "mongo",
          "datanucleus.schema.autoCreateAll"         -> "true",
          "javax.jdo.PersistenceManagerFactoryClass" -> "org.datanucleus.api.jdo.JDOPersistenceManagerFactory",
          "javax.jdo.option.ConnectionDriverName"    -> driver,
          "javax.jdo.option.ConnectionURL"           -> url,
          "javax.jdo.option.ConnectionUserName"      -> username,
          "javax.jdo.option.ConnectionPassword"      -> password
        )

      case _ => throw new IllegalArgumentException(s"unknown driver %s".format(driver))
    } 
```

# php - Drupal 7 模块开发建议

> ID：10384915
> 
> 赞同：2
> 
> 时间：2012-04-30T13:56:43.903
> 
> 标签：php, drupal-7, drupal-modules

最近我们开始了一个项目，我们需要实现一个网页，该网页应该能够管理谷歌地图标记和位置，以及它们的附加信息。然而，要求是将其作为 Drupal 模块来执行，以便客户将其嵌入到由 Drupal 提供支持的现有网页中。

我有使用 JSF 等 Java 技术开发网页的强大背景，并且我以前使用过像 cake php 这样的 PHP MVC 框架，但这就是我认为我对 Drupal 中使用的模块开发过程如此困惑的原因（钩子方法和约定...）。

首先，我一直在看 Packt 的 Drupal 7 模块开发书，我刚刚完成了第 4 章，您应该在其中实现和主题化单个博客模块。然而，通过使用直到那时所展示的技术......我发现仅通过将其主题化为列表或使用渲染 API 来实现支持谷歌地图的（块？？？）非常困难。

我发现真正有趣的是可以使用主题模板并基于它们创建块内容；通过仅传递变量和 priting php statemnets ......，但它也没有在书中得到很好的解释。所以这就是为什么我想问你在哪里可以找到更多关于主题模板的资源，这样我就可以将我的 html 标记和 js 函数放在那个模板上，并将处理后的变量传递给它。

我遇到的另一个问题是......，为了快速启动我的模块，我最应该关注的主题是什么，我基本上需要的是在地图上放置标记的能力（我猜是使用 Javascript V3 API.. .)，然后向服务器发送 AJAX 回调以更新选定的标记信息并将其添加到我的会话中？变量..（使用 JSF 和 Primefaces 之类的框架真的很容易......但是在 php 世界中我迷路了）我想我应该看看 Drupal 实体和字段接下来......还有小部件？对？？？

您可以提出的任何建议都很棒，我刚刚开始使用 Drupal，现在我感到有点不知所措和迷茫，即使查看 API 的 Drupal 网站文档对于初学者来说也很困难。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:06:07.157

Drupal 对于初学者来说是一团糟。你将不得不忘记你在 java 中学到的所有好的实践，并学习 drupal 的方式。做到这一点（imo）的最好方法是从极小的开始。在开始模块开发之前，先做一些非常简单的主题教程。

在你开始创建一个模块之前，看看里面有什么是很重要的。那里有大量不同状态的模块。对于 drupal 7，我使用[http://drupal.org/project/gmap](http://drupal.org/project/gmap)和 Location 模块来提供您描述的功能。

要快速启动您的模块，您将不得不慢速启动，抱歉；具有非常基本的主题和模块开发。我已经购买了 Apress**的 Drupal 7 权威指南。**它提供了开发人员从头开始维护、创建和设计 drupal 7 项目所需的所有信息。它是由程序员编写的，比令人困惑的文档更容易理解。

[此外，在http://drupal.stackexchange.com](http://drupal.stackexchange.com)上发帖非常宝贵。kiamlaluno、berdir 和 clive 对所有有关 drupal 的知识都非常了解，并提供的答案将节省数小时搜索或摸索 drupal 的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T06:16:27.757

是的，您应该阅读上面提到的书，并观看 Lullabot 和 Mustarseed 媒体的播客。我同意 Drupal 的学习曲线很陡峭。但是一旦你学会了它，你会惊讶于它的健壮性，而且你不会喜欢在没有 Drupal 的情况下开发一个网站。

# android - 在android中更改语言环境后重新加载视图

> ID：10384916
> 
> 赞同：5
> 
> 时间：2012-04-30T13:56:45.037
> 
> 标签：android, locale

我想更改我的 android 应用程序中的语言环境，所以我使用了以下代码：

```
Locale locale = new Locale('fr'); // or whatever
Locale.setDefault(locale);
Configuration config = new Configuration();
config.locale = locale;

getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics()); 
```

但问题是我的观点没有任何改变。我应该如何重新加载它们以使语言环境更改可见？

编辑：每个视图都会受到影响：按钮、文本视图、复选框。当然，如果我手动设置视图的文本，那么它可以工作，但我不想在每个小部件上调用 setText() ......我知道是因为用户名显示在视图中并且在注销后它没有更新/ 用另一个用户登录。所以我手动更新了文本视图，但是在我发现更改语言环境时每个视图的问题都是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:01:55.810

我猜您是在问如何`Activity`在更改语言环境时“重新加载”您所在的位置。

据我所知，您必须重新布局/重新创建`View`s 或重新设置其中的文本。但是，如果您找到更好的解决方案，请分享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T04:26:33.683

好吧，我找到了解决方案，并想分享。
将此添加到您的清单中

```
android:configChanges="locale" 
```

并在您的活动中覆盖 onConfigurationChanged()

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
  // refresh your views here
  super.onConfigurationChanged(newConfig);
} 
```

去[这里](http://developer.android.com/intl/de/guide/topics/manifest/activity-element.html#config)了解更多信息。希望能帮助到你。:)

# java - 领导 ”？” 使用 SAX 解析数据时

> ID：10384919
> 
> 赞同：1
> 
> 时间：2012-04-30T13:56:52.403
> 
> 标签：java, sax

在解析 utf8 和 xml 文件中的文本时，我多次遇到问题。它放置一个领先的“？” 在我解析的第一条数据上。

这是 XML：

```
<dictionary>
  <word id="1" level="1" simp="爱" trad="愛">
    <pinyin>ai4</pinyin>
    <part>verb</part>
    <definition>to love</definition>
  </word> 
```

这是 SAX：

```
@Override
    public void startElement(String namespaceURI, String localName,
                String qName, Attributes atts) throws SAXException {
        if (localName.equals("word")) {
            word = new Word();
            word.setId(atts.getValue("id")); 
```

当它拉出第一个 id 时，它会拉出“?1”而不是“1”，但它不会对之后的任何数据执行此操作。它抛出的异常是：

04-30 21:42:42.240：E/AndroidRuntime(1418)：原因：java.lang.NumberFormatException：无法将“？1”解析为整数

我没有看到“？” 当我物理打开 XML 文件时，它是从哪里来的？为什么它只影响第一件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:08:11.757

之前有什么吗？即使它不是问号，它也可能是一个不受支持的字符，正在被问号替换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:08:36.543

我的猜测是你有一个编码问题。您的输入文件是否有声明

```
<?xml version="1.0" encoding="UTF-8" ?> 
```

如果您没有编码，那么任何事情都可能发生。

您是否创建了这些文件并在所有文件上设置了编码？因为否则某些工具可能会破坏编码。特别是剪切和粘贴或某些文本编辑工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:14:49.307

也许问题在于`1`根据 NCName 定义（http://www.w3.org/TR/1999/REC-xml-names-19990114/#NT-NCName），这不是 XML 中的有效标识符。

`NCName ::= (Letter | '_') (NCNameChar)*`

# c# - 发生错误时发送电子邮件

> ID：10384920
> 
> 赞同：33
> 
> 时间：2012-04-30T13:56:54.373
> 
> 标签：c#, email, log4net

目前我的应用程序正在使用 log4net 来记录错误，为此的 web.config 如下：

```
<log4net>
    <appender name="FileAppender" type="log4net.Appender.RollingFileAppender">
      <file type="log4net.Util.PatternString" value="../../logs/gateway_%date{yyyyMMdd}.log" />
      <appendToFile value="true" />
      <rollingStyle value="Date" />
      <datePattern value="yyyyMMdd" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] – %message%newline" />
      </layout>
    </appender>
    <root>
      <level value="DEBUG" />
      <appender-ref ref="RollingLogFileAppenderOutput" />
    </root>
  </log4net> 
```

但是，客户现在希望通过电子邮件将每个错误发送给他们。

执行此操作的最简单方法是什么，您可以在 web.config 文件中执行此操作吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-30T14:01:26.207

你应该使用`SmtpAppender`

```
<appender name="SmtpAppender" type="log4net.Appender.SmtpAppender">
    <to value="to@domain.com" />
    <from value="from@domain.com" />
    <subject value="test logging message" />
    <smtpHost value="SMTPServer.domain.com" />
    <bufferSize value="512" />
    <lossy value="true" />
    <evaluator type="log4net.Core.LevelEvaluator">
        <threshold value="WARN"/>
    </evaluator>
    <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%newline%date [%thread] %-5level %logger [%property{NDC}] - %message%newline%newline%newline" />
    </layout>
</appender>

<logger name="ErrorLogger">
    <level value="Error" />
    <appender-ref ref="FileAppender" />
</logger>
<logger name="EmailLogger">
    <level value="Error" />
    <appender-ref ref="SmtpAppender" />
</logger> 
```

为了仅针对特定错误发送电子邮件，您可以执行以下操作

```
try
{
  // your logic
}
catch (MySpecificException ex)
{
   // I only send emails for exception of type MySpecificException 
   LogManager.GetLogger("EmailLogger").Error(ex); 
}
catch (Exception ex)
{
   // Just log to a file for the rest
   LogManager.GetLogger("ErrorLogger").Error(ex); 
} 
```

# android - 带有 ListItems 的 Android 视图流

> ID：10384926
> 
> 赞同：0
> 
> 时间：2012-04-30T13:57:13.913
> 
> 标签：android, android-listview, adapter

我正在使用 android-viewflow 库 (https://github.com/pakerfeldt/android-viewflow) 来启用水平分页。在每一页上，我想显示一个数据列表视图，每个页面都不同。

我遇到的一般实施问题是：

1.  我是否需要为每个页面上的每个 ListView 创建一个单独的适配器或使用相同的适配器，为每个页面提供不同的数据，并且当我向左/向右页面时“Android 只知道如何处理它”？
2.  我正在努力使用用于水平分页（而不是列表视图）的适配器的 getView 方法。当我向左/向右切换页面时，我认为 getView 是我需要实现代码的地方，该代码检索要显示的数据并将其放入该页面的列表视图中。这是正确的还是我需要以不同的方式处理事情？

感谢您对理解这一点的任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:05:32.803

我建议使用 ViewPager 支持类而不是 ViewFlow 进行水平分页。它更灵活，更易于使用。[http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:26:38.830

使用[片段](http://developer.android.com/guide/topics/fundamentals/fragments.html)和[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)。这是一个[例子](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabsPager.html)

# objective-c - 带有c数组的singelton？

> ID：10384932
> 
> 赞同：0
> 
> 时间：2012-04-30T13:57:32.370
> 
> 标签：objective-c

我正在尝试放入我的 singelton ac 数组，以便以后构建一个环形缓冲区。尝试设置属性时出现错误。

```
 @interface globals : NSObject
    {

        SInt16 bufBuf[2000];
..
    }

@property (nonatomic, assign, readwrite) SInt16 bufBuf; 
```

然后`@synthesize`在 .m 文件中

我不得不说我要`bufbuf`非常快地将音频回调缓冲区写入。（可以吗？）出了什么问题，我该如何解决？多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:10:18.793

您没有说错误是什么，但很可能是您在属性中使用的类型与您在成员变量中使用的类型不同。

尝试更多类似的东西：

```
@interface globals : NSObject {
  SInt16* bufBuf;
}

@property (nonatomic, assign, readwrite) SInt16* bufBuf; 
```

您需要`malloc`在方法中使用缓冲区`init`。

# php - 重命名上传的图像不起作用

> ID：10384937
> 
> 赞同：0
> 
> 时间：2012-04-30T13:57:46.303
> 
> 标签：php, mysql, image, upload

我正在尝试在上传时更改文件名。这个图像名称是我要插入到数据库中的`4f9e9118b753cIMAGE.jpeg`，但只有`IMAGE.jpeg`（原始图像名称）仍然保留在文件系统中。以下是我正在使用的代码部分：

```
if (isset($_FILES['userupload']['name'])) {
   $uploaddir = "uploads/";

     switch($_FILES['userupload']['type']) {
                case "image/gif":
                case "image/jpeg":
                case "image/jpg":
                case "image/png":
          $uploaddir .= 'pictures/';
          break;
     }         

     foreach($_FILES as $userupload){   
          $t = uniqid();
          $type = $userupload['type'];
          $name = $userupload['name'];
          $size = $userupload['size']; 
          $image_name = $t."$name";

          if(move_uploaded_file($_FILES['userupload']['tmp_name'], $uploaddir . $file)) {
              $query = "INSERT INTO users ( image_name ) VALUES ( '$image_name' )";  
              mysql_query($query) or die (mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:01:51.307

你需要插入这一行

```
move_uploaded_file($_FILES["userupload"]["tmp_name"],$uploaddir.$image_name); 
```

查询前

# c# - WF4提升属性可以直接通过InstanceStore查询吗？

> ID：10384940
> 
> 赞同：0
> 
> 时间：2012-04-30T13:58:02.220
> 
> 标签：c#, .net, workflow-foundation-4, workflow-foundation

在我之前的问题[Resuming a persisted Window Workflow 4 Activity 不知道具体的活动类型的情况下继续我的问题](https://stackoverflow.com/questions/10349088/resuming-a-persisted-window-workflow-4-activity-without-knowing-concrete-type-of)

有没有办法直接通过`InstanceStore`（在我的例子中是[SqlWorkflowInstanceStore](http://msdn.microsoft.com/en-us/library/system.activities.durableinstancing.sqlworkflowinstancestore.aspx)实例）查询提升的属性，给定一个 workflowId？

我可以使用 SQL 直接查询数据库，但想知道这是否可以直接通过我已经在我的代码中使用的实例存储来完成。我一直在查看[SqlWorkflowInstanceStore.Execute](http://msdn.microsoft.com/en-us/library/system.runtime.durableinstancing.instancestore.execute.aspx)方法和[QueryActivatableWorkflowsCommand](http://msdn.microsoft.com/en-us/library/system.runtime.durableinstancing.instancestore.execute.aspx)但看不到它们完全符合我的要求。

这可能吗，如果可以，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:44:26.013

您必须使用 SQL 命令来查询提升的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T17:33:34.567

它以这种方式对我有用：使用持久性参与者来存储活动类型，然后使用实例视图来检索这种类型。

```
InstanceHandle handle = instanceStore.CreateInstanceHandle(instanceId);
InstanceView view = instanceStore.Execute(handle, new LoadWorkflowCommand(), TimeSpan.FromSeconds(30));
string activityType = view.InstanceData[MyParticipantExtension.GetActivityTypeXName()].Value as string; 
```

# web-services - 太多 WSP5018：在 server.log 中加载了 WSIT 配置

> ID：10384942
> 
> 赞同：2
> 
> 时间：2012-04-30T13:58:05.413
> 
> 标签：web-services, glassfish, jax-ws

在我的 glassfish server.log 中，我发现了太多且频繁出现的消息

WSP5018：从文件加载 WSIT 配置：file:/usr/src/glassfishv3.0.1/glassfish/domains/domain1/applications/MY_APP/META-INF/wsit-client.xml。

我认为它出现在 jax-ws 客户端初始化 Web 服务的端口时。我通过在 ejb 会话 bean 中制作它来调用 web 服务。

如何避免有很多关于它的信息消息？我在初始化 web 服务客户端时出错了？

# xml - .rc 文件与外部 xml 文件

> ID：10384945
> 
> 赞同：1
> 
> 时间：2012-04-30T13:58:16.333
> 
> 标签：xml, string

我有一个程序需要菜单中的帮助链接。帮助链接因语言、版本、用户类型（管理员指南或用户指南）而异，因此有十几个链接。我应该将所有这些链接放在程序目录下的外部 XML 文件中，还是只将硬代码放在具有巨大字符串表的 .rc 文件中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:00:57.007

如果您将所有内容都放在 .rc 文件中，则对重构不利。如果我是你，我会使用外部 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:13:20.410

您必须考虑是否希望最终用户能够看到此文件。由于 XML 是基于文本的，因此更改该文件非常容易。

如果链接列表稍后确实发生了变化（例如未来的更新），那么只有一个 XML 文件会容易得多。

最后，这并不重要，只是对您来说方便的问题。我会使用 XML 文件，因为我习惯了这种方法。

# html - 如何保持弹出菜单项处于活动状态？

> ID：10384956
> 
> 赞同：1
> 
> 时间：2012-04-30T13:59:20.737
> 
> 标签：html, css, navigation

我在此页面上使用弹出菜单：[http ://www.orientalhealthsolutions.com/](http://www.orientalhealthsolutions.com/)

中心导航有两个弹出链接：免疫系统的一个是有问题的。当您将鼠标悬停在免疫系统上时，子菜单会飞出，但它仅在前两项上处于活动状态。如果您尝试将鼠标悬停在 Food Sensitivity 上，它可能会或可能无法访问。

我为它编写代码的方式与我为女性健康编写的代码相同，它可以正常工作。

这是HTML：

```
<ul id="nav-one" class="dropmenu">
<li id="brain"><a href="{site_url}conditions-treated/brain-and-memory-neurological"><img class="gold-dot" src="/photos/gold-dot.png" alt="" /> Brain & Memory</a></li>
<li id="digestive"><a href="/conditions-treated/digestive-gut-disorder"><img class="gold-dot" src="/photos/gold-dot.png" alt="" /> Digestive Disorders</a></li>
<li id="diabetes"><a href="/conditions-treated/diabetes-blood-sugar-disorder"><img class="gold-dot"  src="/photos/gold-dot.png" alt="" /> Diabetes & Blood Sugar</a></li>
<li id="immune"><a href="#"><img class="gold-dot" src="/photos/gold-dot.png" alt="" /> Immune System</a>
<ul>
<li><a href="/conditions-treated/immune-auto-immune-disorders">Autoimmune</a></li>
<li><a href="/conditions-treated/immune-allergies">Allergies</a></li>
<li><a href="/conditions-treated/immune-food-sensitivities">Food Sensitivity</a></li>
</ul>
</li>

<li id="fertility"><a href="/conditions-treated/fertility-Infertility-female-male"><img class="gold-dot" src="/photos/gold-dot.png" alt="" /> Fertility</a></li>
<li id="womens-health"><a href="/conditions-treated/"><img class="gold-dot" src="/photos/gold-dot.png" alt="" /> Women's Health</a>
<ul>
<li><a href="/conditions-treated/womens-health-PCOS-endometriosis-menstrual-disorder">Women&rsquo;s health issues</a></li>
<li><a href="/conditions-treated/womens-health-menopause">Menopause</a></li>
<li><a href="/conditions-treated/womens-health-breast-pain-associated-with-lactation">Lactation breast pain</a></li>
</ul>
</li>
<li id="mens-health"><a href="/conditions-treated/andropause-male-menopause"><img class="gold-dot" src="/photos/gold-dot.png" alt="" /> Men's Health</a></li>
<li id="pain"><a href="/conditions-treated/pain-musculo-skeletal-pain"><img class="gold-dot" src="/photos/gold-dot.png" alt="" /> Pain</a></li>
<li id="cancer"><a href="/conditions-treated/cancer-side-effects-of-chemotherapy-radiation"><img class="gold-dot" src="/photos/gold-dot.png" alt="" /> Cancer</a></li>
</ul> 
```

这是CSS：

```
ul#nav-one  { 
    width: 240px; 
    height: 393px; 
    position: absolute;
    top: 0;
    left: 0; 
    z-index: 100; 
    }   

ul#nav-one li#brain         { position: absolute; top: 30px  ; left: 110px;}
ul#nav-one li#digestive     { position: absolute; top: 70px  ; left: 65px; }
ul#nav-one li#diabetes      { position: absolute; top: 110px ; left: 35px; }
ul#nav-one li#immune        { position: absolute; top: 150px ; left: 19px; }
ul#nav-one li#fertility     { position: absolute; top: 190px ; left: 12px; }
ul#nav-one li#womens-health { position: absolute; top: 230px ; left: 18px; }
ul#nav-one li#mens-health   { position: absolute; top: 270px ; left: 35px; }
ul#nav-one li#pain          { position: absolute; top: 310px ; left: 60px; }
ul#nav-one li#cancer        { position: absolute; top: 350px ; left: 110px;}

ul#nav-one li#womens-health,
ul#nav-one li#immune            { padding-right: 90px; }
ul#nav-one li a:link,
ul#nav-one li a:visited         { color: #710006; text-decoration: none;}
ul#nav-one li a:hover           { text-decoration: underline; }

ul#nav-one li#womens-health:hover           { border-bottom: 1px solid #8a2d31; }
ul#nav-one li#womens-health a:hover         { text-decoration: none;  }
ul#nav-one li#womens-health ul li a:hover   { text-decoration: underline; }

ul#nav-one li#immune:hover          { border-bottom: 1px solid #8a2d31; }
ul#nav-one li#immune a:hover        { text-decoration: none;  }
ul#nav-one li#immune ul li a:hover  { text-decoration: underline; }

ul.dropmenu {
    float: left;
    margin: 0px; 
    padding: 0px;
    display: block;
    position: relative;
}

.dropmenu li a, .dropmenu li{
    display: block;
}

.dropmenu li{
    list-style: none;
    position: relative; 
    top: 1px;
    margin-bottom: 1px;
}

.dropmenu li span {
    display:block;
    float:right;
    height:10px;
    position:absolute;
    right:10px;
    top:13px;
    width:10px;
}

.dropmenu li a, .dropmenu li div {
    display:block;
    text-decoration:none;
    width: 100%;
}

/* Submenu */
.dropmenu li ul {
    display: none;
    position: absolute;
    width: 148px;
    left: 150px;
    top: 22px;
    padding: 0px;
    margin: 0px;
}

ul#nav-one li ul li    { padding: 5px 0; }

.dropmenu li:hover > ul {
    display: block; 
    margin-left: -6px;
    height: 100px;
    border: 1px solid #850006;
    background: rgba(247,238,219,0.9);
}

.dropmenu li ul li, .dropmenu li ul li a {
    float: none;    
    color: #0657AD;
    text-transform: none;
    text-indent: 10px;
    display: block;
    margin: 0;
    padding: 0;
}

.dropmenu li ul li{
    _display: inline;   
}

.dropmenu li ul li a:link,
.dropmenu li ul li a:visited {
    color: #850006;
    display:block;
    text-decoration:none;
}

.center_content { width: 100%; margin: 0; padding: 0; }

#placeholder    { width: 170px; height: 300px; float: left; }
#topics         { float: right; width: 82%; border-top: 1px solid #d4d8b5; }

.health-topic { 
    width: 32%;
    float: left;
    border-right: 1px solid #d3d8b2;
    margin: 15px 10px 10px 0;

 }

.health-topic.last { margin-right: 0; padding-right: 0; border-right: none; } 

.health-topic h4    { 
    color: #6a0506; 
    font-size: 1.4em; 
    font-weight: normal; 
    margin-bottom: 0; text-shadow: #eaeaea 1px 1px 1px; }

.health-topic h4 { 
    text-align: center; 
    margin-top: 15px; 
    line-height: 1em;
    margin-bottom: 5px;
    padding-bottom: 0;
    }
.health-topic p { 
    text-align: center; 
    line-height: 1em; 
    margin-bottom: 20px;
    margin-top: 0;
    padding-top: 0; 
    }
.health-topic img   { max-width: 75%; margin: 0 auto; } 
```

任何帮助使食物敏感性始终可触摸，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:12:14.003

问题是由`padding-right: 90px`. 当您达到*食物敏感性*时，您现在将鼠标悬停在下一项的填充上，因此菜单会退出。一个简单的解决方案是改为应用您的填充`:hover`。

只需更改此规则：

```
ul#nav-one li#womens-health, ul#nav-one li#immune {
    padding-right: 90px;
} 
```

到

```
ul#nav-one li#womens-health:hover, ul#nav-one li#immune:hover {
    padding-right: 90px;
} 
```

# jsf - JSF：在支持 bean 中处理 UI 驱动的事件后尊重组件绑定方法？

> ID：10384959
> 
> 赞同：1
> 
> 时间：2012-04-30T13:59:30.313
> 
> 标签：jsf, jsf-2, primefaces

最后，当数据表结构根据外部源定义时，我已经管理了如何在 JSF 中使用类似*DOM的方法构建真正的动态表。*（[具有动态列的 DataTable](https://stackoverflow.com/questions/2951729/datatable-with-dynamic-columns)正是我所需要的）基本上，以下代码对我来说已经足够了：

```
<p:layoutUnit position="west">
    <!-- 2 -->
    <p:tree value="#{tableViewsPageBean.root}" var="node" dynamic="true" cache="false"
                                        selectionMode="single" selection="#{tableViewsPageBean.selectedNode}">
        <!-- 3 -->
        <p:ajax event="select" listener="#{tableViewsPageBean.onNodeSelect}"/>
        <p:treeNode id="treeNode">
            <h:outputText value="#{node}"/>
        </p:treeNode>
    </p:tree>
</p:layoutUnit>
<p:layoutUnit position="center">
    <h:panelGroup>
        <h:panelGroup rendered="#{tableViewsPageBean.isRegeneratable}">
            <p:commandButton value="#{fu:$(languageBean, 'REGENERATE')}"
                             action="#{dynamicTableViewBean.regenerate}"/>
        </h:panelGroup>
        <!-- 1 -->
        <h:panelGroup binding="#{dynamicTableViewBean.dataTableGroup}"/> 
    </h:panelGroup>
</p:layoutUnit> 
```

但是有一个问题我目前不知道如何解决。如果你看一下上面的代码，你可以在注释中看到代表支持 bean 方法流的数字标记：

1.  `binding="#{dynamicTableViewBean.dataTableGroup}"`
2.  `selection="#{tableViewsPageBean.selectedNode}"`
3.  `listener="#{tableViewsPageBean.onNodeSelect}"`

这个顺序对我不好，因为`h:panelGroup`必须在用户更改树视图中的选择后定义绑定。简单地说，最好的流程是：

1.  `selection="#{tableViewsPageBean.selectedNode}"`（前 2 个）
2.  `listener="#{tableViewsPageBean.onNodeSelect}"`（之前 3 个）
3.  `binding="#{dynamicTableViewBean.dataTableGroup}"`（之前 1 个）

所以我可以构建一个尊重树中用户选择的数据表组件。那么这是一种强制执行上述方法的另一种顺序的方法吗？使用的 PrimeFaces 版本：3.2

提前致谢。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:20:57.777

它在 JSP 上的旧 JSF 1.x 中以这种方式工作，但在 Facelets 上的 JSF 2.x 中不再如此。但是调用顺序应该无关紧要。只需将`binding`getter/setter 设置为普通的 getter/setter 并操作`dataTableGroup`侦听器方法的内部即可。毕竟是相同的对象引用。

```
public void onNodeSelect(NodeSelectEvent event) {
    dataTableGroup.getChildren().add(...);
    // ...
} 
```

您只需要添加该`update`属性`<p:ajax>`，以便在 ajax 请求完成时真正更新绑定的面板组或其父面板组之一，否则您将有效地看到视图中没有任何变化。

例如

```
<h:form id="formId">
    ....
    <p:ajax event="select" listener="#{tableViewsPageBean.onNodeSelect}" update=":formId:groupId" />
    ...
    <h:panelGroup id="groupId" binding="#{dynamicTableViewBean.dataTableGroup}"/> 
    ...
</h:form> 
```

顺便说一句，您知道 PrimeFaces 的[`<p:columns>`组件](http://www.primefaces.org/showcase/ui/datatableDynamicColumns.jsf)吗？如果您想要的只是动态列，这可能是一个更好的解决方案。`UIComponent`在黑暗的 JSF 1.x 时代，这种解决方案并不存在，这就是为什么应用了笨拙的`binding`解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:20:26.767

您不能强制绑定表达式在之后执行，因为它是 JSF 生命周期的一个特性 - 在请求处理的一开始就设置绑定（在“恢复视图”阶段）。
我还建议从动作侦听器（即 in`#{tableViewsPageBean.onNodeSelect}`和/或`#{dynamicTableViewBean.regenerate}`）触发基于模型的树更新，因为它们是在“调用应用程序”阶段执行的（在提交的值已被转换、验证并应用于模型对象之后）只是在“渲染响应”之前。
您仍然可以使用从绑定表达式获得的 PanelGroup 引用，并在 Java 代码中对其子项进行操作。

# sql - 如何在 IF 语句以及 BEGIN..END 块中使用@@ROWCOUNT？

> ID：10384963
> 
> 赞同：12
> 
> 时间：2012-04-30T13:59:49.797
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

我的代码如下：

```
SET @var = (SELECT var FROM dbo.varDB WHERE varName = @varName)

IF (@@ROWCOUNT > 0)
    BEGIN
        //carry out insert
    END 
```

我是否正确地说这将始终为*@@ROWCOUNT返回**1* ，因为它最后执行分配？

 *如果是这样，让我能够做到的最优雅的解决方案是什么：

*   使用存储在其中的查询结果创建变量
*   测试查询是否返回任何结果

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T14:06:30.840

它返回一个的原因是因为您已经分配了一个值（某个任意值）。`EXISTS`正如@Sive 建议的那样，您应该使用而不是手动计数。原因是 EXISTS 的性能不会比 COUNT 差，并且在您描述的用例中，实际计数是多少并不重要。您想知道计数是零还是大于零。

以您所做的方式将该值分配给变量的问题是，如果有多个匹配的行会发生什么？让我们尝试一下：

```
DECLARE @foo TABLE([var] INT, varname SYSNAME);
INSERT @foo VALUES (1,N'bob'),(2,N'bob');
DECLARE @var INT;
SET @var = (SELECT [var] FROM @foo WHERE varname = N'bob 
```

结果：

> 消息 512，级别 16，状态 1，第 4 行
> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

现在，如果`varname`是唯一的，我会这样做：

```
SELECT @var = [var] FROM dbo.varDB WHERE varName = @varName;
IF @var IS NOT NULL
BEGIN
    // carry out insert
END
ELSE
BEGIN
    PRINT 'Already existed! ' + RTRIM(@var);
END 
```

如果`varname`不是唯一的，那么我*不确定*您将使用单个值做什么。拉的是哪一个？想象一下这个场景：

```
DECLARE @foo TABLE([var] INT, varname SYSNAME);
INSERT @foo VALUES (3,N'bob'),(2,N'adam'),(1,N'bob');
DECLARE @var INT;
SELECT @var = [var] FROM @foo WHERE varname = N'bob';
PRINT @var; 
```

会`@var`是1还是3？谁知道？如果您只捕获可能的许多值中的一个，那为什么重要呢？你打算对那一行而不是其他行做些什么吗？

此外，如果您打算从该表中插入数据，为什么不简单地放弃预先检查、行数等，然后说：

```
INSERT dbo.SomeTable(column1 --,...other columns
  SELECT var --,...other columns
  FROM dbo.varDB
  WHERE varName = @varName; 
```

如果该行不存在，则不会发生插入。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T14:17:01.313

您可以将变量设置为`NULL`（只是为了确定）。

如果您的查询没有返回任何行，@var 仍然是`NULL`.
如果它返回一行，`@var`将有一个值
如果它返回多行，您将有一个异常。

```
SET @var = NULL

SET @var = (SELECT var FROM dbo.varDB WHERE varName = @varName)
IF @var IS NOT NULL
BEGIN
//carry out insert
END 
```

**更新**

如果你真的想使用而不是你可以使用而`@@ROWCOUNT`不是分配你的价值。`select``set`

```
SELECT @var = var FROM dbo.varDB WHERE varName = @varName
IF (@@ROWCOUNT > 0)
BEGIN
//carry out insert
END 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-30T14:01:25.943

您可以使用`EXISTS`. `@varName`这将在执行包含在*BEGIN*和*END*之间的语句之前检查给定值是否存在至少一条记录。

*脚本*：

```
 IF EXISTS (SELECT var FROM dbo.varDB WHERE varName = @varName)
    BEGIN
         //carry out insert
    END 
```

*MSDN 文档*：[**存在 (Transact-SQL)**](http://msdn.microsoft.com/en-us/library/ms188336.aspx)

# 根据评论，更新#1：

我不明白知道价值的要求。如果您要获取计数，我认为您可能想要使用 COUNT。

```
DECLARE @recordsCount
SELECT @recordsCount = COUNT(var) FROM dbo.varDB WHERE varName = @varName

IF recordsCount > 0 
BEGIN
  // your statements
END 
```

# 根据评论，更新#2：

如果您想在 BEGIN 和 END 中使用结果集本身，那么问题需要更多关于如何在语句中使用结果集的详细信息。根据进一步的输入，您甚至可能不需要 IF 语句。为您的问题提供清晰的解决方案所需的更多详细信息。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-30T14:05:32.943

您可以选择并测试返回的行数：

```
SELECT @var = var FROM dbo.varDB WHERE varName = @varName
IF (@@ROWCOUNT > 0)
BEGIN
   //carry out insert
END 
```*

# air - 我可以在我的 Adob e Air 应用程序中使用多个 SQLite 数据库吗？

> ID：10384964
> 
> 赞同：0
> 
> 时间：2012-04-30T13:59:50.030
> 
> 标签：air, sqlite

我正在开发一个 Air 应用程序。

我可以在我的 Adob​​e Air 应用程序中使用多个 SQLite 数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:09:09.153

该[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/data/SQLConnection.html)暗示是的，您可以：

> SQLConnection 实例用于管理本地 SQL**数据库文件**（本地**数据库**）的创建和连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:54:49.757

在@Donal Fellows 之后，有一个警告似乎并没有出现在最前沿 - 但实际上是我后来发现的 SQLite 规范的一部分。如果**任何**表将与不同数据库中的表相关 - 您将无法运行某些查询。例如，在创建表中 - 您将无法为不同数据库中的表创建外键。关键是将每个数据库视为一个单独的实体，即使您从模板数据库开始 - 最终您仍然需要将表/索引/视图复制到工作数据库。

# python - 使用 Python 从点生成矩形

> ID：10384971
> 
> 赞同：6
> 
> 时间：2012-04-30T14:00:17.157
> 
> 标签：python, gis, points, polygons

我有一个充满点的文本文件。它们在每一行上由逗号限制的 (x,y) 对分隔。例如。

```
-43.1234,40.1234\n
-43.1244,40.1244\n
etc. 
```

我现在需要在每个点周围创建一个多边形。多边形必须距离该点有 15 公里的缓冲区。我无权访问 ArcGIS 或任何其他为我提供此功能的 GIS，所以在这一点上，我想知道是否有人有数学知识可以帮助我入门？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:17:14.590

您想使用[GDAL/OGR/OSR](http://www.gdal.org/ogr/)，它可以进行投影、缓冲，甚至可以为您编写 Shapefile。

为了将纬度/经度转换为公制缓冲区的米，您需要一个投影坐标系。在下面的示例中，我使用动态加载和缓存的 UTM 区域。这将在大地水准面上计算 15 公里。

我还计算了 GIS 缓冲区，它是一个圆形多边形，以及计算缓冲区的包络，它是你寻找的矩形。

```
from osgeo import ogr, osr

# EPSG:4326 : WGS84 lat/lon : http://spatialreference.org/ref/epsg/4326/
wgs = osr.SpatialReference()
wgs.ImportFromEPSG(4326)    
coord_trans_cache = {}
def utm_zone(lat, lon):
    """Args for osr.SpatialReference.SetUTM(int zone, int north = 1)"""
    return int(round(((float(lon) - 180)%360)/6)), int(lat > 0)

# Your data from a text file, i.e., fp.readlines()
lines = ['-43.1234,40.1234\n', '-43.1244,40.1244\n']
for ft, line in enumerate(lines):
    print("### Feature " + str(ft) + " ###")
    lat, lon = [float(x) for x in line.split(',')]
    # Get projections sorted out for that UTM zone
    cur_utm_zone = utm_zone(lat, lon)
    if cur_utm_zone in coord_trans_cache:
        wgs2utm, utm2wgs = coord_trans_cache[cur_utm_zone]
    else: # define new UTM Zone
        utm = osr.SpatialReference()
        utm.SetUTM(*cur_utm_zone)
        # Define spatial transformations to/from UTM and lat/lon
        wgs2utm = osr.CoordinateTransformation(wgs, utm)
        utm2wgs = osr.CoordinateTransformation(utm, wgs)
        coord_trans_cache[cur_utm_zone] = wgs2utm, utm2wgs
    # Create 2D point
    pt = ogr.Geometry(ogr.wkbPoint)
    pt.SetPoint_2D(0, lon, lat) # X, Y; in that order!
    orig_wkt = pt.ExportToWkt()
    # Project to UTM
    res = pt.Transform(wgs2utm)
    if res != 0:
        print("spatial transform failed with code " + str(res))
    print(orig_wkt + " -> " + pt.ExportToWkt())
    # Compute a 15 km buffer
    buff = pt.Buffer(15000)
    print("Area: " + str(buff.GetArea()/1e6) + " km^2")
    # Transform UTM buffer back to lat/long
    res = buff.Transform(utm2wgs)
    if res != 0:
        print("spatial transform failed with code " + str(res))
    print("Envelope: " + str(buff.GetEnvelope()))
    # print("WKT: " + buff.ExportToWkt()) 
```

# email - Prestashop：从 BackOffice 激活帐户后无法向用户发送电子邮件

> ID：10384972
> 
> 赞同：0
> 
> 时间：2012-04-30T14:00:23.747
> 
> 标签：email, account, prestashop, activation

我到处找，找不到我的问题的答案。我想在注册时取消激活用户帐户，然后在 BackOffice 中激活它。我设法做到了这一点，但我想在他的帐户被激活时向用户发送一封电子邮件，所以我在激活/取消激活单选按钮旁边添加了一个按钮，我在 AdminCustomers.php 中添加了以下内容

```
 <input type="submit" value="'.$this->l('   Send Email to inform user   ').'"/> 
```

但我不知道如何发送电子邮件。我的问题对你来说似乎很简单，但我是 php/html 的新手，所以对我来说有点难。我搜索并找到了许多发送电子邮件的示例，但似乎没有一个有效。

编辑：我这样做的原因是我们有两种类型的客户：个人和公司。对于公司，我们需要验证提供的信息（例如：增值税号）。然后激活帐户，因为它可以让他们获得特价。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:53:08.120

你在哪里激活帐户？您应该只添加代码以在激活帐户后发送电子邮件 - 添加额外步骤（管理员可能忘记执行）似乎没有意义。

在一个模块中，我将使用如下内容：

```
private function _emailNewAccount($customer, $address, $messages)
  {
    $configuration = Configuration::getMultiple(array('PS_LANG_DEFAULT', 'PS_SHOP_EMAIL', 'PS_SHOP_NAME'));
    $id_lang = (int)$configuration['PS_LANG_DEFAULT'];
    $template = 'new_account';
$subject = $this->l('New Account', $id_lang);
    $templateVars = array(
      '{firstname}' => $customer->firstname,
      '{lastname}' => $customer->lastname,
      '{address1}' => $address->address1,
      '{address2}' => !empty($address->address2) ? $address->address2 : $this->l('--',     $id_lang),
      '{city}' => $address->city,
      '{postcode}' => $address->postcode,
      '{email}' => $customer->email,
      '{messages}' => is_array($messages) ? implode("\n", $messages) : (isset($messages) ? $messages : ''),
      '{phone}' => !empty($address->phone) ? $address->phone : $this->l('n/a', $id_lang),
      '{mobile}' => !empty($address->phone_mobile) ? $address->phone_mobile : $this->l('n/a', $id_lang),
      '{customer_id}' => (int)$customer->id
    );
    $iso = Language::getIsoById((int)($id_lang));
    if (file_exists(dirname(__FILE__).'/mails/'.$iso.'/'.$template.'.txt') AND file_exists(dirname(__FILE__).'/mails/'.$iso.'/'.$template.'.html'))
      Mail::Send($id_lang, $template, $subject, $templateVars, $customer->email,$customer->firstname.' '.$customer->lastname, $configuration['PS_SHOP_EMAIL'], $configuration['PS_SHOP_NAME'], NULL, NULL, dirname(__FILE__).'/mails/');
} 
```

显然您还需要创建相应的文本和 html 电子邮件模板。在这种情况下，这些将在我的模块目录中：/modules/mymodulename/mails/en/new_account.html /modules/mymodulename/mails/en/new_account.txt

您在模板中使用上面定义的字段，因此对于纯文本模板，您可能在`new_account.txt`：

```
Hi {firstname} {lastname},

 You have just registered on {shop_name}.

 Address:

 {address1}
 {address2}
 {city}, {postcode}
 Telephone: {phone}, Mobile: {mobile}

 {messages} 
```

如果您在问题中包含您迄今为止尝试过的内容可能会很好......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:22:11.513

我最终为此创建了一个模块。它与 Prestashop 1.5 完美配合。

# javascript - 在页面上加载样式表（不仅是 DOM）时触发的事件

> ID：10384981
> 
> 赞同：0
> 
> 时间：2012-04-30T14:01:02.153
> 
> 标签：javascript, jquery

我尝试使用[http://api.jquery.com/ready/](http://api.jquery.com/ready/)回调来执行代码，我只想在页面完全加载时才开始。但是，这会在加载 DOM 时触发，并且经常会发生样式表未完全加载的情况。

如何确保在 DOM 之后加载特定代码以及加载样式表（甚至所有内容）？我发现了一些类似的问题（比如[这个](https://stackoverflow.com/questions/8681440/is-there-event-that-triggers-after-dom-was-loaded-but-before-any-external-assets)），但它们与样式表加载无关，我对此特别感兴趣。

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:10:21.593

如果您真的不介意等待所有内容（包括图像等）加载，那么您可以使用标准[`load`](http://api.jquery.com/load-event/)事件：

```
$(window).load(function() {
    // your code here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:05:03.847

我首先想到了 RequireJS，但似乎他们有特定的原因使它不能很好地工作。[http://requirejs.org/docs/faq-advanced.html#css](http://requirejs.org/docs/faq-advanced.html#css)

他们确实提供了一种可能的技巧“有些人已经实现了一种方法，他们寻找一种众所周知的样式来应用于特定的 HTML 元素，以了解是否加载了样式表。”

# portability - GLib 的便携性如何？

> ID：10384988
> 
> 赞同：10
> 
> 时间：2012-04-30T14:01:23.317
> 
> 标签：portability, glib

我知道这个问题可能听起来很奇怪，因为 GLib 是一个可移植库，但它的可移植性如何？举一个例子：GLib（包括 GObject）是在微控制器上运行还是依赖于某种操作系统？

我可以在哪里使用 GLib 是否有任何限制，或者它会在可以运行 C 代码的任何地方运行吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T14:39:38.560

我能找到的关于 GLib 依赖关系的唯一资源是：

[编译 GLib 包](http://developer.gnome.org/glib/2.28/glib-building.html)

查看“依赖项”部分 - 非可选依赖项似乎是：

*   一个`iconv`函数
*   一个`gettext`函数
*   线程实现
*   [PCRE](http://www.pcre.org/)库

这意味着您需要将这些中的每一个提供（或移植）到任何目标系统（例如微控制器）。虽然不是不可逾越的障碍，但线程实现通常意味着某种形式的操作系统。

另外值得注意的是，GLib 似乎依赖于“托管”C 环境，因此您还需要将标准 C 库移植到目标环境（与“独立”C 环境相反，标准 C 的子集不需要移植标准 C 库）。请参阅[托管和独立环境](http://publications.gbdirect.co.uk/c_book/preface/hosted_and_free_standing.html)。同样，这通常意味着至少一种*非常*基本的操作系统形式。

# java - Java 在 JTextField 上显示结果

> ID：10384995
> 
> 赞同：2
> 
> 时间：2012-04-30T14:01:51.137
> 
> 标签：java, swing, jtextfield

开始使用 netbeans 制作一个简单的 GUI，现在我遇到了一些问题。

我有这个：

```
package my.sccsymapp;

public class sccsymapp extends javax.swing.JFrame {
    /*SOME CODE*/                                     
    public static void main(String args[]) {
        /*SOME CODE*/
    }
    // Variables declaration - do not modify
    private javax.swing.JTextField tempmedespCost;
    // End of variables declaration
} 
```

如果我运行它，它会按预期工作。`test`放在我的 JTextField 上。

但我想做的是`tempmedespCost.setText("test");`在我的代码的其他类中使用。

我有这堂课：

```
package my.sccsymapp;

import java.util.*;

public class Servico extends sccsymapp{
    /*SOME CODE*/ 
    public void relat (){
    /*SOME CODE*/ 
    tempmedespCost.setText("test");
    }
    /*SOME CODE*/ 
} 
```

它现在说：

`tempmedespCost has private access in my.sccsymapp.sccsymapp`

所以我改成`tempmedespCost`了public。

现在没有显示错误，运行没有错误，但`test`没有放在我的 JTextField 上。

你能给我指出一些方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T14:05:38.467

`tempmedespCost`在您的班级中被定义为私有

`private`成员只能由属于该类成员的函数访问。类的孩子（如 `Servico`）不能访问私有字段。

您可以将 的可见性更改`tempmedespCost`为 protected 或创建一个 getter 让您访问`tempmedespCost`

[我建议您阅读Controlling Access to Members of a Class](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)中有关 Java 可见性的一些文档。

# c# - 添加 https 绑定时 Microsoft.Web.Administration 中的 NullReferenceException

> ID：10384996
> 
> 赞同：8
> 
> 时间：2012-04-30T14:01:51.777
> 
> 标签：c#, ssl, iis-7

我正在尝试以编程方式将绑定添加到我的默认网站，但是我一直在 Microsoft.Web.Administration dll 中收到空引用异常。最初我想与绑定一起分配证书。我可以用这个查询我想要的证书：

```
var store = new X509Store(StoreName.Root, StoreLocation.LocalMachine);
store.Open(OpenFlags.OpenExistingOnly | OpenFlags.ReadWrite);

var certificate = store.Certificates.Find(X509FindType.FindByIssuerName,
                                                  "TEST_SELF_SIGNED", true)
                                                  .OfType<X509Certificate>().FirstOrDefault(); 
```

这正确地给了我我想要的证书，它是非空的并且有我期望的信息。

```
Site site = GetSite("Default Web Site");
var binding = site.Bindings.Add("*:443", certificate.GetCertHash(), "https"); 
```

鉴于我的变量或示例代码中的任何其他项都不是空的（包括返回 20 字节数组的 GetCertHash），我对为什么在这里得到空感到困惑。我什至尝试了以下重载：

```
site.Bindings.Add("*:443", "https"); 
```

而且我仍然得到相同的空引用堆栈：

```
System.NullReferenceException 未处理
  Message=对象引用未设置为对象的实例。
  来源=Microsoft.Web.Administration
  堆栈跟踪：
       在 Microsoft.Web.Administration.Configuration.SetDirty()
       在 Microsoft.Web.Administration.ConfigurationElement.SetDirty()
       在 Microsoft.Web.Administration.ConfigurationElement.SetAttributeValue（字符串属性名，对象值）
       在 Microsoft.Web.Administration.Binding.SetBindingProperty（字符串属性名称，字符串值）
       在 Microsoft.Web.Administration.BindingCollection.Add（字符串 bindingInformation，字节 [] certificateHash，字符串 certificateStoreName）
       在 C:\Projects\Cube\trunk\src\AutoUpdate\TestApp\Program.cs:line 33 中的 TestApp.Program.Main(String[] args)
       在 System.AppDomain._nExecuteAssembly（RuntimeAssembly 程序集，字符串 [] 参数）
       在 System.AppDomain.ExecuteAssembly（字符串 assemblyFile，证据 assemblySecurity，String [] args）
       在 Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       在 System.Threading.ThreadHelper.ThreadStart_Context（对象状态）
       在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态，布尔 ignoreSyncCtx）
       在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态）
       在 System.Threading.ThreadHelper.ThreadStart()
  内部异常：
```

这是一个演示问题的完整测试应用程序，以及我用来生成示例证书的 selfssl 命令行参数：

> selfssl.exe /T /N:CN=TEST_SELF_SIGNED /K:512 /V:9999 /Q

```
class Program
{
    static void Main(string[] args)
    {

        using (ServerManager manager = new ServerManager())
        {
            var store = new X509Store(StoreName.Root, StoreLocation.LocalMachine);
            store.Open(OpenFlags.OpenExistingOnly | OpenFlags.ReadWrite);

            var certificate = store.Certificates.Find(X509FindType.FindByIssuerName, "TEST_SELF_SIGNED", true).OfType<X509Certificate>().FirstOrDefault();

            Site site = GetSite("Default Web Site");
            site.Bindings.Add("*:443", certificate.GetCertHash(), store.Name);

            store.Close();

            manager.CommitChanges();
        }
    }

    public static Site GetSite(string siteName)
    {
        using (var serverManager = new ServerManager())
        {
            return serverManager.Sites.Where(p => p.Name.ToLower() == siteName.ToLower()).FirstOrDefault();
        }
    }
} 
```

只是为了覆盖我的基础，安装了 Iis 并手动分配证书就可以了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T16:20:27.647

所以我通过反编译 Microsoft.Web.Administration dll 并在堆栈中查找来找到答案。事实证明，如果您获得一个带有辅助函数的站点，它不会在该站点上设置内部 ServerManager 属性。

导致问题的 dll 的功能是 Microsoft.Web.Administration::Configuration

```
internal void SetDirty()
{
  if (this._hasBeenCommitted || this._configurationManager.Owner.ReadOnly)
    throw new InvalidOperationException(Resources.ObjectHasBeenCommited);
  this._isDirty = true;
} 
```

这里唯一可能为 null 的是`_configurationManager`or `_configurationManager.Owner`。我检查了`Owner`它是什么，它`ServerManager`告诉我我可能应该`Site`从服务器管理器的 using 块中查询。一旦我这样做了，null ref 就消失了，一切正常。不幸的是，他们没有检查空值，但也许假设没有服务器管理器上下文，没有人会在站点对象上采取行动。

无论如何，这是更新的代码：

```
class Program
{
    static void Main(string[] args)
    {

        using (var serverManager = new ServerManager())
        {
            var selfSignedCnName = "TEST_SELF_SIGNED";
            var websiteName = "Default Web Site";

            var site = serverManager.Sites.Where(p => p.Name.ToLower() == websiteName.ToLower()).FirstOrDefault(); 
            var store = new X509Store(StoreName.Root, StoreLocation.LocalMachine);
            store.Open(OpenFlags.OpenExistingOnly | OpenFlags.ReadWrite);

            var certificate = store.Certificates.Find(X509FindType.FindByIssuerName, selfSignedCnName, true).OfType<X509Certificate>().FirstOrDefault();

            site.Bindings.Add("*:443:", certificate.GetCertHash(), store.Name);

            store.Close();

            serverManager.CommitChanges();
        }
    }

} 
```

从我最初的帖子中也很清楚，将整个代码块包装在服务器管理器中并不意味着什么，它们不是级联的。您必须从它来自的服务器管理器对站点采取行动。

# jquery - jquery 循环 - 无法通过传递循环（'0'）来重置寻呼机

> ID：10384998
> 
> 赞同：-3
> 
> 时间：2012-04-30T14:01:55.007
> 
> 标签：jquery, jquery-cycle

我的主页中有两个选项卡，每个选项卡都有一个 jquery 循环滑块。它具有寻呼机控件，上一个，下一个控件。要求是在播放选项卡中的所有幻灯片时打开另一个选项卡。反之亦然。

我通过 after 选项中的以下代码实现了它：

```
after: function(curElement, nextElement, options, forwardFlag) {  
               if (options.currSlide == 4)   
                   {
                       $('#slider1 ul').cycle('pause');   
                       setTimeout(function(){          
                       $('#home-page-tabs').tabs('select', 1);       
                       $('#slider ul').cycle('resume').cycle('0');  
                       }, 10000);  
                   }
               }, 
```

现在，一旦第一个选项卡幻灯片完成，第二个选项卡就会自动打开，并与第一张幻灯片一起打开。但是，寻呼机控件不会重置为第一个。它显示错误的数字。我怎样才能让寻呼机显示正确的号码？那是0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:31:26.060

删除单引号就可以了。