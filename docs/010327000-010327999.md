# StackOverflow 问答 10327000-10327999

# file-sharing - 如何识别从其他 PC 到我的 PC 的所有共享文件夹

> ID：10327007
> 
> 赞同：0
> 
> 时间：2012-04-26T03:55:16.803
> 
> 标签：file-sharing

许多 PC 连接到 LAN。PC 可以与其他 PC 用户共享文件夹/数据。如何识别所有其他 PC（或 IP 地址）已将某些文件夹共享到我的 PC？有什么办法可以找出这个吗？请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:31:13.403

如果您有 Windows 操作系统，您可以转到“网上邻居”，在那里您会找到所有可以从您的 PC 访问的计算机。

# function - 将python中的二维数组元素移动到“相反”侧的函数

> ID：10327013
> 
> 赞同：2
> 
> 时间：2012-04-26T03:56:12.393
> 
> 标签：function, multidimensional-array, python-3.x, ppm

我目前正在为学校编写一个程序，该程序允许我将 .ppm 文件加载到 main 中，然后运行一系列函数，允许用户以各种方式操作显示的图像文件（也可以通过另一个函数完成）方法。我需要能够操作此文件的一种方法是在水平轴上进行“翻转”。因此，我需要我的函数将每一行的元素移动到它们的“相反”位置。例如，如果我的数组看起来像这样 [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14] 我需要我的函数来扭转它 [ 14、13、12、11、10、9、8、7、6、5、4、3、2、1、0]。

注意：每 3 个元素代表一个像素的 RGB 值，所以我不确定中间 3 个元素应该如何表现，但我会认为它需要保持不变。

到目前为止，这是我的功能：

```
def Switch(image_arry, cols, rows):

for y in range(rows):

    for x in range(0, cols):

        r1 = image_arry[y][x*3]
        g1 = image_arry[y][x*3+1]  
        b1 = image_arry[y][x*3+2]

        r2 = image_arry[y][x*3 -3]
        g2 = image_arry[y][x*3 - 2]  
        b2 = image_arry[y][x*3 - 1]

        image_arry[y][x*3] = image_arry[y][x*3 -3]
        image_arry[y][x*3+1] = image_arry[y][x*3 - 2]
        image_arry[y][x*3+2] = image_arry[y][x*3 - 1] 
```

注意：由于这是一门大学课程，我不允许在我的程序中使用我们在本课程中尚未涵盖的任何内容（这是一个 4 个月、100 级的课程，因此范围不是很广）。而且我也不允许使用 break 或 while(1) 语句。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:56:47.840

首先，您应该将每个像素作为数组中的一个条目。这意味着您需要将 RGB 值保留在一个对象中，而不是像本例中那样三个。

由于你不能使用类，我建议让每个像素都是一个元组或列表。因此，一个黑色像素、一个灰色像素和一个绿色像素的三像素行将如下所示：

```
row = [(0,0,0,), (128, 128, 128), (0, 255, 0)] 
```

您现在可以像这样反转该行：

```
row.reverse() 
```

该行现在将是：

```
row = [(0,0,0,), (128, 128, 128), (0, 255, 0)] 
```

翻转的代码很简单：

```
for row in image:
    row.reverse() 
```

# javascript - 内部链接被 mod_pagespeed 更改

> ID：10327016
> 
> 赞同：2
> 
> 时间：2012-04-26T03:56:21.807
> 
> 标签：javascript, mod-pagespeed

我注意到在我的网站上使用 mod_pagespeed 时，它会更新我的内部链接。

当我打开时，`/`我的导航看起来像：

```
<ul>
    <li><a href="foo/bar"></a></li>
    <li><a href="example"></a></li>
</ul> 
```

但是当我在`/foo`同一个导航上时，看起来像：

```
<ul>
    <li><a href="bar"></a></li>
    <li><a href="/example"></a></li>
</ul> 
```

当我在`/example`它看起来像：

```
<ul>
    <li><a href="/foo/bar"></a></li>
    <li><a href="example"></a></li>
</ul> 
```

有没有办法阻止这种行为，因为它破坏了一些依赖于`href`每个链接属性的 JS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T16:42:08.260

您可以通过添加禁用此功能

```
ModPagespeedDisableFilters trim_urls 
```

到你的`pagespeed.conf`文件。有关更多详细信息，请参阅[https://developers.google.com/speed/docs/mod_pagespeed/filter-trim-urls](https://developers.google.com/speed/docs/mod_pagespeed/filter-trim-urls)。

# java - Telnet 进入主机并执行命令

> ID：10327020
> 
> 赞同：4
> 
> 时间：2012-04-26T03:56:37.080
> 
> 标签：java, exec, telnet

我正在使用 Apache commons-net lib 远程登录到 PC。连接到该服务器后，我希望能够在它（服务器）上执行命令。在 Java 中实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:09:48.133

您最好使用[JSch](http://www.jcraft.com/jsch/)远程登录到远程计算机并执行命令。查看[示例](http://www.jcraft.com/jsch/examples/)部分 - 它包含您需要的一切。

# php - 如何让 Hello World 与 Spawn-fcgi 和 php 一起使用

> ID：10327034
> 
> 赞同：0
> 
> 时间：2012-04-26T03:59:16.470
> 
> 标签：php, spawn-fcgi

我正在尝试为 php 运行 spawn-fcgi 脚本，但出现以下错误。

```
spawn-fcgi -n -d /home/ubuntu/workspace/Gold-Lantern/glPixelServer/php/ -s /tmp/nginx9010.socket -u www-data -f /home/ubuntu/workspace/Gold-Lantern/glPixelServer/php/pixel.php
/home/ubuntu/workspace/Gold-Lantern/glPixelServer/php/pixel.php: 1: Syntax error: newline unexpected 
```

下面是脚本的内容：

```
<html>
<head>
<title>My First PHP Page</title>
</head>
<body>
<?php
echo "Hello World!";
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:10:58.807

解决方案#1：您的第一行应该是：

```
#!/usr/bin/php 
```

并确保权限设置为执行（chmod a+x）

解决方案#2：将启动命令更改为：

```
... -u www-data -f /usr/bin/php /home/ubuntu/workspa... 
```

# python - 字符串的所有字符都属于一个集合吗？

> ID：10327040
> 
> 赞同：3
> 
> 时间：2012-04-26T04:00:08.350
> 
> 标签：python, set

是否有一种直接的方法可以确定字符串的所有字符是否都属于给定的字符集？我有以下循环代码，我觉得可以缩短：

```
def allInSet(mystr, myset):
    result = True
    for char in mystr:
        result &= (char in myset)
    return result 
```

例子：

```
>>> allInSet("yyyow", set(['a','e','i','o','u','w','y']))
True
>>> allInSet("yowza", set(['a','e','i','o','u','w','y']))
False 
```

也，`list(mystr) in set(['a','b','c'])`没有工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T04:06:15.017

```
>>> set("aeiou").issuperset("hello world")
False
>>> set("aeiou").issuperset("eoo")
True 
```

# android - 从 google places api 解析签入 XML

> ID：10327041
> 
> 赞同：0
> 
> 时间：2012-04-26T04:00:09.280
> 
> 标签：android, google-places-api, checkin

我正在尝试从 Google Places API 获取签到位置，但是当我尝试通过 url.openStream() 读取 XML FileNotFoundException 时出现错误。我的密钥是正确的，因为我尝试在浏览器的其他 URL 中使用它。如果有人使用过此功能，请告诉我如何操作。这是我的代码：

```
 public String checkingMessage()
    {
    String strURL = "https://maps.googleapis.com/maps/api/place/check-in/xml?sensor=true&key=" + GOOGLE_API_KEY;
    URL url;
    try 
    {
        url = new URL(strURL.replace(" ", "%20"));

        // Standard of reading a XML file
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setNamespaceAware(true);
        DocumentBuilder builder;
        Document doc = null;
        XPathExpression expr = null;
        builder = factory.newDocumentBuilder();

        doc = builder.parse(new InputSource(url.openStream()));

        // Create a XPathFactory
        XPathFactory xFactory = XPathFactory.newInstance();

        // Create a XPath object
        XPath xpath = xFactory.newXPath();

        // Compile the XPath expression
        expr = xpath.compile("//reference/text()");
        // Run the query and get a nodeset
        Object result = expr.evaluate(doc, XPathConstants.NODESET);
        NodeList nodes = (NodeList) result;

        String answer = nodes.item(0).getNodeValue();
        Toast.makeText(getApplicationContext(), answer, Toast.LENGTH_LONG);

    }catch(Exception ex){
        ex.printStackTrace();
    }
    return null;    
} 
```

如果我在浏览器中使用直接 url，我会收到以下错误：

```
400: Your client has issued a malformed or illegal request. That’s all we know. 
```

我不知道 json 解析，所以我使用的是 XML。我认为输出应该是这样的，因此我试图获取参考值：

```
 <CheckInRequest>
   <reference>place_reference</reference>
 </CheckInRequest> 
```

更新：我尝试使用 HttpResponse 并获得对 Entity 的响应，如下所示

```
if (httpResponse.getStatusLine().getStatusCode() == 200){
    strResult = EntityUtils.toString(httpResponse.getEntity());
  } 
```

但后来我得到 MalFormedException

```
doc = builder.parse(strResult); // doc is Document type 
```

无论哪种方式，我怎样才能将 xml 结果放入 doc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:00:11.443

我认为您正在尝试获取签到位置。我也想这样做。但是目前签入 API 似乎是 POST-only，至少我是这样阅读 API 文档的。这意味着您的应用程序可以签入，但您无法查询谁在哪里签入（甚至您自己也不行）。

# php - 将日期字符串转换为完整日期

> ID：10327045
> 
> 赞同：0
> 
> 时间：2012-04-26T04:00:21.963
> 
> 标签：php, mysql, date, formatting

我正在从我的数据库中返回一个日期并将其转换为格式化的日期，但它没有显示完整的月份，而是显示为“Apr”。有没有办法让它显示整个月份而不仅仅是缩写？

**代码**

```
while(($row = mysql_fetch_array($query_date)))
    $date[] = date("M d",strtotime($row[0])); 
```

这就是我的数据库返回`2012-04-25 22:07:35`的内容，日期函数返回这个`Apr 25`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:04:44.807

格式应该是，

```
while(($row = mysql_fetch_array($query_date)))
    $date[] = date("F d",strtotime($row[0])); 
```

在这里，您可以获得所有格式..

[http://php.about.com/od/learnphp/ss/php_functions_3.htm](http://php.about.com/od/learnphp/ss/php_functions_3.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:03:17.283

使用`F` [http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

```
$date[] = date("F d",strtotime($row[0])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:03:59.377

`F`不应该`M`...

```
$date[] = date("F d",strtotime($row[0])); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T04:35:24.100

检查此链接： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)，它可以为您提供有关日期格式所需的信息

在你的情况下，你需要改变

```
$date[] = date("M d",strtotime($row[0])); 
```

至

```
$date[] = date("F d",strtotime($row[0])); 
```

“F”返回整月（1 月到 12 月）。

# java - 将 Base64 编码的图像字符串加载到 JLabel

> ID：10327046
> 
> 赞同：3
> 
> 时间：2012-04-26T04:00:22.913
> 
> 标签：java, swing, base64, jlabel

我让转换器在这里工作

```
公共类 ImageProcessor {
    公共静态无效Base64TImage（字符串base64）{
        尝试 {            
            byte[] btDataFile = new sun.misc.BASE64Decoder().decodeBuffer(base64);
            File of = new File("yourFile.png");
            FileOutputStream osf = new FileOutputStream(of);
            osf.write(btDataFile);
            osf.flush();
        } 捕捉（IOException ex）{
            Logger.getLogger(ImageProcessor.class.getName()).log(Level.SEVERE, null, ex);
        }

    }
    公共静态无效主要（字符串参数[]）{
        字符串 base64 = "iVBORw0KGgoAAAANSUhEUgAAAMcAAABqCAYAAAAIh0X2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAEihJREFUeNrsXctvG8cZH9H0Q35ElOM4aWBYzKvoIa6YOMihKOD1vYDZHHsRBTRAewp96y30oUVvof+BZH3uIdSlPZbqpUAax1TTAmnqxKTi+FXFImW9qUdn6Blp+HF2d/Y9tL4PoGUud2dn5/t+32vm2xnZ3d0lSEhIg5Rl/4yMjETW4O7yexP0T5F+LPrJ8b+Mmuyzs7XV7D5eanTbTxr0e+PU2zc7yAYkE2mEWY4owEFBcYn+qUhgcKWd7hbZ/KFNtpZWGGhq9FOlQGkhS5CeGXBQUEwywdYFBaTt9U2y8XCB7Gx02dc6/ZQQJEhDDw4KjA84MMJZne0dsv5ggWyvrLGvbfopU4DcQPYgDR04KCjGOChKUXaGAYS6WeKrTQEyjSxCGhpwcGAw96cQR4dWW/eEi4UAQRoecMQNDOFirdy5SyP2vRQzc7GuI6uQUgHHO++8o3Xy57MTn5KnadpYaXt1nazdfSgfsqz3ySyyC8lIy0GtxkdMiyfVsbXvH4kAnVGTWSucE0FKkjKa7tSVJIHB6OjZ0/LXfNL3R0LytBw8zmCaO5d050D2iqV482g9kEyyHHYawGB05Pm+2+bQeiAZYzn4kpB6mh0Eqd02tRzjyDYkEyxHNe0OHs4912c9nnxx8QqyDSlVcFCrMUVinM/QpUPHj8FDJWQbUtqWo2JEBw9nSeboYfmQhWxDSg0cPNbIm9LJQ6PHoGt1CVmHlJblMCorpHCt0HogJQ8OqZLPnE4ePYLgQDLCchSN6+ThLDxUQNYhpQGOkpEd7Q/Kc8g6pETBwV0qI7XySKYfxxiUIyVtOYz15UcGXSskpETBUTS2o4PgyCP7kOKknsRdvHhxGAPdvNRvJKR4wHHz5k0RbwyVNmb9RkJKwq3C9CgSEoIDCckfODDARUIaRnCwN5IAaiL7kBAcakJwICE4GLG3siMhpQUOo2l3a7vv+6m3b+JL3pAQHGybAiQkBIfSagy4VHVkHRKCg8UbGwOWo4GsQ0JwEGUaF8GBhODogWNtA90qpMRp742Hu8vvGbnn8tbyKlm/9z/5UJN+XmH/OfW23sLDV89PsH0L/VYPtr+db82hiBxcygJXxbj1VQqXKojVKJEAb1ShoBL3sylQcI/CA+xWtU21HIBqftuggn2VW46iw3MyxcBefVpRtG8xcFCg3KKfMRSZA+ZWsZ2dPp+dSHRzGi2rsb5J1ubvEwDgvRdJW+/7b3PxfwsDzzn+wpkRcM4EBwm0pHV67mUUmwPkVj0tGppomta5bnvJ1WoEKXai2n/AcijaadHzLDK4/6FFgTOFLtbBjDmMIbZxpsKlspO6PwVAhwKkSAYXOLJjqYKDu3cFon4hBuNjnfV/WIWSPt8l2v/ZtPsggyN0Z7b+u0Y2//yYbN9eI1u3VgZ+P/T6MbKRPUnIm +Pk0Buj5PgFQo6dV+8N0l1alneUJVxIEx0wyiBmQWzS/y6vHB+8K5Ila2jEbMwKNWibMyEYNsXBWdQ4l/WtqhIy+tsif462k1Kk113WuMdHHIgzHudNEvftLCqin/Rc5tLWeTKkSYKvvu4lUQCf2h5GICd7ClmF2+L7DSTdW8tk/eMHSkD0xRC31+kN1wn5aoGsrpwg3z16kWw/f5K88CvS+8hA6S4OuFSVlJRIDYDD4sIzwy2LpYjVBFjkwbYkt67sxzVjWoxbzTy0EACUlmRNeiDi4C4DS1Lgv5cV1qeqY6G5EJf5PbwsVZPzrwjGqsG/N0HfBOVJ8NXiZYlPBbKfsbQ0r2/L8xzswAfEx4Y12/c3yeof5j1B4UaPF86QRw9e7v3/3O8I+dFvqUtFVsjGwx/6BvfQ6NFX4GSg7jwHYOqHEGh0AEc8hEBmHpv/GAfn3JKZKrfHr7cVTGHa8pqmdi4D15Jd2/IQWiiEJThvwzU61KRFHetGr/1EUhq6zzIlAY+BugCfQ8GfClcCxMnVotf8FYyvsj/wPMh3PnYV/ly1jFvA60Yb1H16Mv2fUMBgdPrMAsm/9jXJZLbJ3T8S8u9fELL091VTrAZRCKHKLLfdrucuChzbCmeGlwCWgTBNOwFDut9VDta2pI3rHAzyuXOKfhU0hHwMWNOS5nDKVqDq8BwF8LzXGChcgPEhAEZDB6guYzct3GAIjpYOQFavf08txnfU2uxEIoDHRtfJ+Ve+6QFk9UtCbv/6ebL29d67cZsnfzxxw6Bip6CJC1Wa3PKwGCVJUCw/M/b8XEsCCHPxbMVcja3bJ5dnyXOr4EUWcN+c/P4GB8achrsJFWcpAh4zgNqqtVWu/ubK7+fJxp8WIpc4BpBzPJu8s5wh3/ 7mRQGQ3sMqip0Sy1pEkTHjWrLuoknhPcvATZgLcM85ICwFhUs54+Lz+wF6RcPaWFKw3HFp23KzjlJ7UJGXo1jyw9pg/VOBY8YpQ8CAsfmXxdgE8fiJFXL2pXt9APny3fONlIudZOGqhxz8J4VYVY703DlZyHIKhQDjhpyi/3m360Cix/YSTM2xlNfL1cKMk4oyGszp0drHD2IFhhyDHD+xvAcQ9tCKYqekrMYkcG2iXkFQcwiorbCWSpGBctP8tosgO1mNpqKdkgY4mmHnMLjLWQBKphQ1/53AcUPWNpt/65D1jx8mJpTCegg/9R/nRqdSAMYVqHEjMNkFYIVaHhpWZW2CWo+20z34czW9wMEtQ0Fy9W6Adkuq9Wf8WNFv0seFL2VFhq0TEd/HGPhYoJ/10BD17fubOZauTZJY/DGWe0w67dN7mo+6V7ULn813YgKC0NY5sr9AUc6alMJM3il8buJihXK6mbAALl1RcoEmADhtyWNgv08qlEFJcvVuSNeVwTnXXQBfDcknaOUqQS0RT+2qFBjjQcWt2IkNTJkBI6qslB86c/YhFJg4F0UW+aCLlbkiDcqO5SMChuwjl1KoFWl4JANsNxeJC2ZJIeBeLpvcVsMr0NZwQ3PA+l4L0Z6l+Oy177ojzOLP06v1OXykS06e6pDlJ3tWukytR1VYjydfXPRT7OR1ynU+8HlJW7PAkESkkQrSoJdNXLjIl8rINT1MYVx1AIsNrqtLVrHP6oAYKozV+EQRZ4TdT8YCCrjAwd1LJ2ddgDEW5mGioLHxRRkcwt2JS7Ba/KMElU+gWC6/NQPEKUmtKZOX6e8JObd8wiLYCu1vK1zGaYUlqQUExpQi4A4dZyjcsRm+vIfJfTPjEXOkujHlqeeWehODGn661yBEEZfoWKA9P5jsF05BMNhwptrD/bEiGs68RixTc3CRipIs2A7XOQX8QqhrQYTZYdFiOcZVuzaPY+ bkYidoNZrEgF1b7989JwfmPSZT16on7QGLnQbWVimKnRyvp+eq2uxbs6No7xOg+XpLI+h5LYc+LoKxz9FzQ2lJ2uYd2W2k7Y3rnicda9DvbzlcB5+xBMBUpNfO+OyziNVkd6pG2/llwDFw5RMkudjJKKshiE0MAnAURTYkYLHTwDFVO05WggEHWiJ4rqK9aX5OSXIRa7QtS6VN6blVAOAybTNw4MlTsLLlqDmNHb+30NQ5LvTi2qrHdRAcOSm7NUN8WnDaZgUAo7eAMuiOXhp86qOMQ6xhTLmsmBCMwc2I3RUD7U2T/jmLgosPXgVuSkV2xYSL5/ZRuHmy1ap4xB2qTFPbLZHAA/A64FPBxRXzcmHhfIZIqXc0rh/zmK3X6oMqIC+aYjVE1orFHTs7hxIFhwCIkwVxiz9cfity7Sc0scWyMNJKUHFfUYUoC1uN1yV0dJnLaUoRLLdc+tgi6jfRVJ3uISkS24E/tle8Jtrg540pAMX6PacR9wlXjIHpckA+MZrMOATiRtGx0TX5a+7Ld/UjY8MsS4cMvgGlxNOUqkxKCQTUjOmTPu43BYRM9xVDttcxWbAkkNxQJCAY0PzOCcD5DAZMnX4PxCgefHJ7m0w1A1yqCWLgu6tY3OGReUkNIHzwYX8mpd8gwZWyAiC34IJALmwl0l+XwYSNJRXGxD3kDyfWzqdAoMvCQrn0zQkcto/JO3ht1e1+it8+ANaHPe9V+Vx+PlMSl6TPFLB4dQ0+ sXMugT4wwDBlZWUVZn8YiA3ebFIAcHGtxJqhvELYa7xIR2XCZ7jQVyUN2RN8HtjafHKNkP11brLLUuFxSB24Xjng6wsB2HNJZEF0ejbu1tkSiCs+3JGqlNDxilPgeE4o4iH2LLsa9yUKiyXzqaTgkygCa0oWb2/CNuMQfBlmOQaC8jAxUc4hmxOEmg4uSJkPutsy5htckKFwM+Fo0mt3JReKSdFlfr4tWRKL7M+pVPh9C7xfVf7/y7Jb40PAxHPVdKyG5Fp1JNfc7yRylPFuFSgIt77kyeDykeZeDfnjwmtjxNC3HrKXMczfea3PHP5s61PfL1fjIKgpGOD2pg4djacVjzi1xTWmLBhNztCWyz0nOVML0jW9jyzMYfpPjzMXp66oPfe0BLx8tSqyS37HyCum0+mD1zVe95DBcYWEXE5sKji4INU0Y5WS7AroDGhYcIRloo/MlZMgawuZbtYp7WeKog9Z4Mc/k8TXB+m6jI0ALkhk9Gr6iThTM32Jj1EWBCfPMkNmw2jvKJgad3tBkgo6v7tpXngMBv1RC3MQdypo+wfCckShiYZF2/npj5d/7vZ7UsCOExhePOllq2i8MUGQEgVGGsJlAriHyfoKy5EfNoGNuNgpUY1kIjB0XSud62SrExWo0rC82YMQb0TBkGHT9FG6XlFnmkyJM7xiTTEJmDOZSetro/BQO+wgBGHQMGvBYXVP4w7A3fram+dYfOv1gQIgk2jh0Yu9j0SVC5/NXwtY7DRwDBYwBSh2CtSeqi3dPoZ9bt17s/PkY376HPYZ/I5bVGMgSICDLVIzdl3V3daEXEu+B46Ab1n3bV69zg8yUej33DCaMo1JPhOtRtBJQKPdKqmWQ1Dd1AA1rvb8BrlxuB1eqd0k3E6d59JdguLVRnYYfNXVlZPwUDPtDE6IIhpHofe6r9924457/Aihz2KnyPodhk8Z04GxvnZMFYynnjqKUjMnOQ8Sx0xyFJraRD4ZbzkUVqNh2sC7CbeuplMJmM6yjyAuSZA5iDBCpjNOfvsQpO9eMQz8PSsJnGUmOE4kHm9E5VrJFWZBQBKHi6FZ7BSZ2+hnCUpcrmDQdjOSqzIsliNycMQ17xA2ADelT0kFwaaR0W4VsxogU8VA3FtdG1Ua1y0w1nVTdFKEQbV0EC3rx/0I2y/dNv2OUZTFTn74pAJH3URwPFl6Dh4K+q7VyLIvSaRIdQUpjKDqrMj1qyzkdoOOUxSxTVRktFu1vDQWCTjiWkBomis2LDQsy/974Djd+GbOtAFkVqPbPQJdqpkwDPF6PYxXAD3MxU5R9CPoSoBhK3YSnywIdC1TwNFZHHjPsZ2mtsZip3SAHScwdIud2B9j5g+6m4fhWipGqe0VgsVOB7vYSVgOI14FClbgilijbxSw2Cl6BYDFTs7gEDuOproIkVkNsOVAalYDi52w2AlqaNOsRv3sS/dmox6EoIHasGpBU6yTaQG4W19FPYc4domkOOeheHkbo/yZsw9bEDQXPpsnWOwU/Lmx2Em/2Ek+Jm97lSjduf0G2VjvK4mt/uTNf15VFDv1wIHFTtEnBLDYSR1zCKqQGNOmbu4UAEaT90VV7GRsgBpXe1jspP9cURU7qSxH4tbDwZ2yqNXoxRpf/eunA9fEbTm8zo8aOMMQlzhZzCgyU1Fnt6Lgk1OxUympAWfZqbutARxWBDAUxU5DG1xGBVgT+n2Qi51muWsVK0i2tzPk7nweuk02Bca1faty0vjsCxY7hR8nv31IsthJRWIjlEJcwGCuFIgzGhQY09DlShsAWOwU/L7PQrGTijqkfz+62IFBFGu7krAcWOwU3mocxGKnObK/NVckM+cshvieulJgxS1z4crUanSg1XDKVGGxExY76QI5bLGTF0DEhvKhXKzHC2d6KVsg8BU5xpBJUewUq7bEYie1SxhEwTxLxU5exO76Fnk67+DbzXqaqn2VPHrwsgyM3ra4TsBgpCh2SnTQsNjJvAxSkmPUsxynG9+IZetexARZbKXL4pG8W1zBhLvTHodxQ5NbC9dN1xXFTrFnlrwYgDs7HdydnXSpw0FybakzNpnJ7FgjI7tWt3s4v9U9UmDzFus00FbMdrO4xRbzF543GSx2SlVbY7FTOsCOExhePPm/AAMAAP61LDVrLLgAAAAASUVORK5CYII=";            
        Base64TImage(base64);
    }
}

```

该转换器创建一个文件并将其放在当前工作目录中。但我不想创建文件，我希望这张图片直接转到 JLabel。那可能吗 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T05:13:22.883

这是基于您的代码的示例：

```
byte[] btDataFile = new sun.misc.BASE64Decoder().decodeBuffer(base64);
BufferedImage image = ImageIO.read(new ByteArrayInputStream(btDataFile));
JOptionPane.showMessageDialog(null, "", "Image", 
        JOptionPane.INFORMATION_MESSAGE, 
        new ImageIcon(image)); 
```

我建议您避免使用`sun.misc.BASE64Decoder`，因为`sun.* packages are not part of the supported, public interface`这里有[详细信息](http://www.oracle.com/technetwork/java/faq-sun-packages-142232.html)。您可以轻松地从 Apache Commons 切换到[Base64](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html)，即：

```
byte[] btDataFile = Base64.decodeBase64(base64);
BufferedImage image = ImageIO.read(new ByteArrayInputStream(btDataFile));
JOptionPane.showMessageDialog(null, "", "Image", 
        JOptionPane.INFORMATION_MESSAGE, 
        new ImageIcon(image)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-19T22:50:03.093

以[http://commons.apache.org/proper/commons-codec/为例](http://commons.apache.org/proper/commons-codec/)

```
 JLabel jLabelImagen = new JLabel(); 
    byte[] imageByte = org.apache.commons.codec.binary.Base64.decodeBase64(base64); 
    ByteArrayInputStream inputStream = new ByteArrayInputStream(imageByte);                         
    BufferedImage bufImage = ImageIO.read(inputStream);
    ImageIcon icon = new ImageIcon(bufImage);
    jLabelImagen.setIcon(icon); 
```

# javascript - 如何使用jquery用div包围图像标签

> ID：10327050
> 
> 赞同：1
> 
> 时间：2012-04-26T04:00:50.620
> 
> 标签：javascript, jquery

我有一个包含内部 div 标签标签的 div 标签。如何在 x 个 div 标签周围添加打开和关闭标签。

前任

```
 <div id="resizable">
        <div><img class="img1 image" src="images/lion5.jpg" /></div>
        <div><img class="img2 image" src="images/lion1.jpg"/></div>
        <div><img class="img2 image" src="images/lion2.jpg"/></div>
        <div><img class="img2 image" src="images/lion3.jpg"/></div>
    </div> 
```

添加将代码转换为：

```
<div id="resizable">
    <div class="row">
        <div><img class="img1 image" src="images/lion5.jpg" /></div>
        <div><img class="img2 image" src="images/lion1.jpg"/></div>
    </div>
    <div class="row">
        <div><img class="img2 image" src="images/lion2.jpg"/></div>
        <div><img class="img2 image" src="images/lion3.jpg"/></div>
    </div>
</div> 
```

希望任何人都可以告诉我一个脚本来动态地执行此操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T04:23:54.530

完成@Derek 回答后，您可以循环使用[.slice()](http://api.jquery.com/slice/)并使用[.wrapAll()](http://api.jquery.com/wrapAll/)来完成工作。

```
var c = $('#resizable').children();

for (var i = 0 ; i < c.length ; i+=2) {
    c.slice(i,i+2).wrapAll('<div class="row"></div>');
}​ 
```

演示：http: [//jsfiddle.net/SAtrc/1/](http://jsfiddle.net/SAtrc/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T04:06:50.133

干得好：

[http://api.jquery.com/wrap/](http://api.jquery.com/wrap/) - 包括示例和用法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:19:52.450

我可能使用的顺序是首先，将第一个 div.row 插入 div#resizable，然后开始将您想要的内部 div 移动到该 div 中。然后，附加另一个 div.row 并将剩余的内部 div 移动到该 div 中。用小提琴来演示，但这是我攻击它的方式。

这是执行此操作的 jsfiddle：http: [//jsfiddle.net/rsPGv/](http://jsfiddle.net/rsPGv/)

```
var $firstDiv = $('<div />').prependTo('div#resizable').addClass('row');
$('div div:nth-child(2)').appendTo($firstDiv);
$('div div:nth-child(2)').appendTo($firstDiv);
var $secondDiv = $('<div />').insertAfter($firstDiv).addClass('row');
$('div div:nth-child(3)').appendTo($secondDiv);
$('div div:nth-child(3)').appendTo($secondDiv); 
```

您需要通过 firebug 或 web 开发工具检查 DOM 以查看更新的 DOM。代码不是很干，毫无疑问可以重构为更优雅，但这确实完成了任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T04:20:21.833

您可以使用 jquery 选择父元素的每个子元素，然后用您想要的任何标签包装它们：

```
$('div.row > img').wrap('<div></div>'); 
```

如果您需要进一步说明，可以参考这些链接：

[http://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/)

[http://api.jquery.com/wrap/](http://api.jquery.com/wrap/)

# c# - IEnumerable 上的快速操作？

> ID：10327053
> 
> 赞同：1
> 
> 时间：2012-04-26T04:00:53.570
> 
> 标签：c#, silverlight, windows-phone

我有一个 Windows Phone 项目，它需要搜索大约 70,000 个 XML 条目的数据库，选择与查询匹配的那些项目，然后返回这些项目以显示在列表框中。

使用 LINQ，我可以在合理的时间内（< 2 秒）进行实际搜索。但是，加载具有大量条目的列表框似乎需要相当多的时间。因此，我想显示 10 个项目，然后允许用户按 Next，如果他们想查看更多内容。

我遇到的问题是对 IEnumerable 类型的对象执行任何类型的操作都会花费完全不合理的时间。这包括 Count、.Take(10) 和 .ToList()；这些操作中的每一个都需要大约一分钟才能运行，这对于我正在编写的软件来说是完全不合理的。

最终，我不在乎数据的格式是什么，只要我可以轻松地按位置访问条目即可。我只是在寻找一种可以让我轻松输出这些数据的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:38:11.607

您没有明确说明这一点，但我假设您正在对 XElement 或 XmlElement 进行操作。您应该首先将 XML 反序列化为对象。（有工具可以从给定的 XML 生成 XSD，然后您可以从 XSD 中获取类）。

之后，您的 LINQ 应该会更快，并且数据也应该需要更少的 RAM。

如果这不正确，请使用更多详细信息更新您的问题。

# android - 在android中显示图像

> ID：10327055
> 
> 赞同：1
> 
> 时间：2012-04-26T04:01:01.867
> 
> 标签：android

我正在尝试在 android 中显示图像。过程是我从网上下载 1 张图像并尝试在屏幕上显示它，我面临的问题是在活动屏幕中我无法设置内容视图和图像.以下是代码：

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

活动画面：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.);---->Here i cant set as main

        Bitmap bitmap = DownloadImage(
                "http://www.allindiaflorist.com/imgs/arrangemen4.jpg");
            ImageView img = (ImageView) findViewById(R.id.);  //here i cant set the image id
            img.setImageBitmap(bitmap);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T04:13:53.807

使用 Android 智能图像视图。这是使用 URL 显示图像的最简单方法。这是[链接](http://loopj.com/android-smart-image-view/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:22:19.640

只需使用 Project -> Clean 清理项目。如果它仍然存在，运行项目，它们通常会消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:06:54.987

清理你的项目。有时它不需要 R.java 文件。

# asp.net - 如何在网格视图的 SelectedIndexChanging 上应用 javascript

> ID：10327056
> 
> 赞同：0
> 
> 时间：2012-04-26T04:01:04.277
> 
> 标签：asp.net, gridview

我已经编写了一个 javascript，我正在使用它**onblur**文本框的事件，它位于 gridview 内。当我执行gridview 的**SelectedIndexChanging时，应该为我触发相同的脚本。**这是我的脚本

```
<script type="text/javascript">
function total(txtQuantity, txtRate, txtAmount) {
    var col1;
    var totalcol1 = 0;
    var weight = document.getElementById(txtQuantity).value;
    var rate = document.getElementById(txtRate).value;
    var tot = weight * rate;
    document.getElementById(txtAmount).value = tot.toFixed(2).toString();
    var grid = document.getElementById('<%=grdInvoice.ClientID %>');

    for (i = 0; i < grid.rows.length; i++) {
        col1 = grid.rows[i].cells[4];
        //col2 = grid.rows[i].cells[1];

        for (j = 0; j < col1.childNodes.length; j++) {
            if (col1.childNodes[j].type == "text") {
                if (!isNaN(col1.childNodes[j].value) && col1.childNodes[j].value != "") {
                    totalcol1 += parseInt(col1.childNodes[j].value)
                }
            }
        }
    }
    document.getElementById('<%= lblTotal.ClientID %>').innerHTML = totalcol1.toFixed(2).toString();
    document.getElementById('<%=lblResultbalance.ClientID%>').innerHTML = totalcol1.toFixed(2).toString();
    document.getElementById('<%=TextBox1.ClientID%>').value = totalcol1.toFixed(2).toString();
} 
```

有人能帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:34:22.700

在你的活动中试试这个

```
ScriptManager.RegisterStartupScript(this, GetType(), "script", "total('" + txt1.ClientID + "','" + txt2.ClientID + "','" + txt3.ClientID + "')", true); 
```

# objective-c - youtube 全屏视频不调用 viewWillAppear 或 viewWillRotate

> ID：10327058
> 
> 赞同：1
> 
> 时间：2012-04-26T04:01:10.230
> 
> 标签：objective-c, ios, ipad, uiviewcontroller

所以我有一个 UIWebView，有时它里面有一个 youtube 嵌入式播放器。当我播放它并进入全屏并旋转然后关闭视频时，它不会调用 viewWillAppear 或 willRotateTo .... 这是为什么？当设备旋转时，我需要进行一些视图调整，但是当播放器出现时，由于某种原因，这些方法都没有被调用。是的，我正确设置了 shouldAutoRotateToInterfaceOrientation 。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:09:12.957

您可以使用以下解决您的 UIwebView 问题，viewWillAppear 或 willRotateTo.. 从不调用 UIWebView。您可以通过观察@"UIMoviePlayerControllerDidExitFullscreenNotification" 模式来检测全屏模式的结束：

```
- (void)viewDidLoad
{
    [[NSNotificationCenter defaultCenter] addObserver:self
        selector:@selector(moviePlayerDidExitFullscreen:)
        name:@"UIMoviePlayerControllerDidExitFullscreenNotification"
        object:nil];
}

- (void)viewDidUnload
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

- (void)moviePlayerDidExitFullScreen:(NSNotification *)notification
{
    // This is where you do whatever you want.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:36:38.620

您的控制器必须是 a`UIViewController`否则`viewWillAppear`不会调用委托。

# vb.net - 从字符串“”到类型“Double”的转换无效

> ID：10327067
> 
> 赞同：1
> 
> 时间：2012-04-26T04:02:50.387
> 
> 标签：vb.net, visual-studio-2010

这个功能一直给我带来问题，我似乎找不到合适的组合来让它工作。如果达到一定金额，我正在尝试应用折扣，但我不断收到转换错误。我需要做什么才能定义所有内容以使其正常工作？

```
Function coupon() As Decimal

        Dim decdiscount As Decimal
        Dim inta, intb, intc As Decimal

        inta = 20.0
        intb = 40.0
        intc = 60.0

        If lblSubtotal.Text > inta Then
            decdiscount = 0.05
        End If

        If lblSubtotal.Text > intb Then
            decdiscount = 0.1
        End If

        If lblSubtotal.Text > intc Then
            decdiscount = 0.2
        End If

        Return decdiscount
    End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:21:57.633

您确实应该为您的项目启用[Option Strict](http://msdn.microsoft.com/en-US/library/zcd4xwzs.aspx)。通过让您知道在输入时进行了隐式转换，它将帮助您避免运行时的转换错误。然后，您可以按照 BluesRockAddict 和 Andrew Kennan 的建议使用[Decimal.TryParse方法。](http://msdn.microsoft.com/en-us/library/9zbda557.aspx)

从上面的链接：

> 当您将 Option Strict 设置为 On 时，Visual Basic 会检查是否为所有编程元素指定了数据类型。可以显式指定数据类型，也可以使用本地类型推断指定数据类型。建议为所有编程元素指定数据类型，原因如下：
> 
> *   它为您的变量和参数启用 IntelliSense 支持。这使您能够在
>     键入代码时查看它们的属性和其他成员。
> *   它使编译器能够执行类型检查。类型检查可帮助您找到由于类型转换错误而可能在运行时失败的语句。它还标识对
>     不支持这些方法的对象的方法的调用。
> *   它加快了代码的执行速度。这样做的一个原因是，如果您没有为编程元素指定数据类型，Visual
>     Basic 编译器会为其分配 Object 类型。编译后的代码可能必须
>     在 Object 和其他数据类型之间来回转换，这
>     会降低性能。

在您的情况下，它将标记您代码中的隐式转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T04:08:43.283

您应该使用[Decimal.Parse()](http://msdn.microsoft.com/en-us/library/system.decimal.parse%28v=vs.71%29.aspx)或[Decimal.TryParse()](http://msdn.microsoft.com/en-us/library/9zbda557.aspx)，例如：

```
If Decimal.Parse(lblSubtotal.Text) > inta Then
    decdiscount = 0.05
End If

or

Dim subTotal As Decimal = Decimal.Parse(lblSubtotal.Text, Globalization.NumberStyles.AllowDecimalPoint)

If subTotal > inta Then
    decdiscount = 0.05
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:09:35.710

我希望 lblSubtotal.Text 的值不是数字。也许尝试这样的事情：

```
Dim subTotal as Decimal
If Not Decimal.TryParse(lblSubTotal.Text, subTotal) Then
' Throw an exception or something
End If

If subTotal > inta Then
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T04:13:07.990

您需要将字符串转换为十进制您不能像这样将字符串与十进制进行比较

```
 If System.Convert.ToDecimal(lblSubtotal.Text) > inta Then
            decdiscount = 0.05
        End If 
```

# silverlight - WP7/Silverlight：ScrollViewer 中的非活动按钮，IsHitTestVisible=False... 在 Pivot 中

> ID：10327072
> 
> 赞同：1
> 
> 时间：2012-04-26T04:03:22.730
> 
> 标签：silverlight, windows-phone-7, xaml, scrollviewer

我在我的应用程序上取得了一些不错的进展，但遇到了一个让我难过的问题。我希望有人能提供他们的专业知识吗？

我的应用程序旨在成为“记分表”......其中一个 PivotItems 具有 ScrollViewer（水平滚动，垂直禁用），内部有一个水平方向的 StackPanel。这个 StackPanel 包含一个“ScoreSheet”用户控件，它基本上是一个带有各种文本框的网格。所以......有点像这样（除了 ScoreSheet 项目以编程方式添加到 StackPanel）：

```
<controls:PivotItem>
   <controls:PivotItem.Header>
      <TextBlock Text="score sheet" FontSize="45" Height="80" />
   </controls:PivotItem.Header>

   <ScrollViewer Width="470" Height="560" VerticalAlignment="Top" x:Name="sv_scoresheets" MaxHeight="560" MinHeight="560" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled" IsHitTestVisible="False">
      <StackPanel Name="sp_scoresheets" Orientation="Horizontal">
         <local:ScoreSheet></local:ScoreSheet>
         <local:ScoreSheet></local:ScoreSheet>
         <local:ScoreSheet></local:ScoreSheet>
      </StackPanel>
   </ScrollViewer>

</controls:PivotItem> 
```

概念是“上一个”和“下一个”按钮位于页面底部的 ApplicationBar 中，它们会触发 ScrollViewer 向左或向右的动画（即当前轮次 * ScoreSheet 的宽度）。通过在 ScrollViewer 上将“IsHitTestVisible”设置为“False”，用​​户无法手动将显示的 ScoreSheet 移动到一个奇怪的位置，并且在 PivotItems 之间向左/向右滑动仍然可以按预期工作。

这一切都很好。:)

但是...问题出在 ScoreSheet 控件上，我想要一些按钮和文本框，以便用户可以在网格中输入分数。通过在 ScrollViewer 上设置“IsHitTestVisible”，点击/等。只是被忽略。

I tried setting "IsHitTestVisible" to "True" and instead running a function on the ScrollViewer's ManipulationStarted event (calling "e.Complete()")... but although that lets me access controls inside the ScoreSheet, I can't swipe left/right between PivotItems anymore.

So… can anyone help? I was thinking maybe I could refine the ManipulationStarted behavior somehow, maybe "passing along" the action to the Pivot control instead of having the ScrollViewer move? Or some other way I can make the ScrollViewer "inactive" but allow the controls within to be interactive?

I'd really appreciate any help. Thanks for your time!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:26:39.043

Firstly, I would say that your intended usage of the scrollviewer breaks the intended design of the scrollviewer and the pivot (a common mistake windows phone developers, including myself, have made). The main reason this is generally considered a bad practice is that it implements a side ways navigation paradigm that is intended to *only* be provided by the Pivot control and the Panorama control.

With that said, it doesn't mean your particular use is 100% bad, I think that there are times when breaking the rules is okay. I would just encourage you to do some research and really make sure you're not going to confuse the user, or force them to learn a navigation paradigm that they are not already familiar with through the phone's operating system, and apps that properly make use of the controls provided by the SDK.

Okay, so now that's out of the way, if you determine this really is the best design for your app, you'll need to do the following to accomplish what you want:

## Instead of Using a Horizontal ScrollViewer, use a Pivot control inside your Pivot control

You'll need create a header template that is essentially empty so that you don't take up any space in the upper area of inner scrolling section.

This also makes a lot more sense because the horizontal scrolling you are trying to accomplish is by "section" instead of a continuous scroll. This saves you the trouble of having to think about exactly how many pixels you are scrolling (instead you can just use XAML to change the width of your PivotItems

## Disable the scrolling functionality of the pivot scroll by the user

This can be done a number of different ways of varying complexity, and almost warrants a question on it's own. See [here](http://blogs.msdn.com/b/luc/archive/2010/11/22/preventing-the-pivot-or-panorama-controls-from-scrolling.aspx?wa=wsignin1.0) for one way to accomplish this.

Another thing to do (which gives you more control) is to capture the `ManipulationStarted`, `ManipulationDelta`, and `ManipulationCompleted` events on the inner pivot item. **if** you detect the delta manipulation containing a horizontal component, then inside the method handler for the `ManipulationDelta` event, set `e.Handled = true`. To cancel the inner Pivot's ability to handle the horizontal scrolling. That will look something like the following:

```
// Event handler for ManipulationDelta event on your inner Pivot control
public void OnManipulationDelta(ManipulationDeltaEventArgs e)
{
    if(e.DeltaManipulation.Translation.X != 0)
        e.Handled = true;
} 
```

As you will discover, this can provide some odd behavior. Ideally, you'll want to figure out what works best for your app, but typically you want to check for more than just != 0 on the X component, and allow the user some little bit of x, just incase they hit the control at a weird angle such that the X component has a value of 1.

## Implementing the buttons to move to the right or the left:

This should be pretty simple, just make use of the Pivot.SelectedIndex property.

**However, in *most* cases, this is a bad idea. Be REALLY sure you are a good exception to standard practice (preferably by giving your app to someone who has never used it but owns a windows phone, and see if they intuitively understand how to use your app.**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T02:16:38.460

Many thanks to Paul for his input and advice. A Pivot offered some extra flexibility, but still had similar issues to the ScrollViewer control when IsHitTestVisible="False" (in that buttons and other controls on the contained elements would become unusable). Also, aesthetically for this app, I found I preferred the multiple ScoreSheets being right next to each other when the Previous/Next buttons were pressed and they were animated to show the new sheet (as PivotItems, one would scroll out of view before the next scrolled into place).

After some more thought and experimentation, I achieved the desired effect like this:

```
<Canvas Width="470" Height="560" VerticalAlignment="Top" MaxHeight="560" MinHeight="560" MinWidth="470" MaxWidth="470">
   <Canvas.Clip>
      <RectangleGeometry Rect="0,0,470,560" />
   </Canvas.Clip>
   <StackPanel Name="sp_scoresheets" Orientation="Horizontal" CacheMode="BitmapCache">
      <local:ScoreSheet /></local:ScoreSheet>
      <local:ScoreSheet /></local:ScoreSheet>
      <local:ScoreSheet /></local:ScoreSheet>
   </StackPanel>
</Canvas> 
```

The "Canvas.Clip" let me hide the ScoreSheets on either side of the currently visible one, and I could animate the Canvas.Left position of the StackPanel when the Previous/Next buttons were pressed.

By avoiding the ScrollViewer or Pivot, there were no events to handle/override, and the controls in the StackPanel could then be accessed as I intended.

'hopefully that might be of help to others. :)

# c - strcat 覆盖我的字符串

> ID：10327075
> 
> 赞同：2
> 
> 时间：2012-04-26T04:03:46.970
> 
> 标签：c, unix, strcat

我想不通。当我在我的 Windows 机器上使用 Code::Blocks 编译这段代码时，它工作得很好，但是当我尝试在 Cygwin 或学校的实际 Unix 机器下使用 Make 编译它时，我得到了下面的奇怪行为。我将“client1.txt”传递给 translate()。

```
void translate(char* filepath){

  char output_filepath[181];
  strcpy(output_filepath, filepath);
    printf("%s\n", output_filepath);      //this prints out "client1.txt" which is correct
  char* ptr = strcat(output_filepath, ".translated");
    printf("%s\n", output_filepath);      //this prints out ".translated" which is wrong
    printf("%s\n", ptr);                  //also prints out ".translated" wrong again

...more stuff...
} 
```

当尝试在 output_filepath 上使用 fgets 时，这会导致分段错误。有谁知道发生了什么？我需要解释更多吗？它必须能够在 Unix 下编译。

这是整个程序，我希望它不会太长。这是我的老师给我们的一个程序，但我什至无法运行它。它只是给了我一个分段错误，我已经在上面的部分中找到了它。

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>

struct tparam{
int tid;
};

int NTHREADS  =  5;
#define LOOPS         10000
int qfilled = 0;
int qin = 0;
int qout = 0;
char queue[3000][2][161];
char dic[7000][2][161];
int dic_size = 0;
pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;
pthread_mutex_t flag_mutex = PTHREAD_MUTEX_INITIALIZER;

char * dummystatus[10];

char * lookup(char * word)
{
int i;
for(i = 0; i < dic_size; ++i)
{
    if(strcmp(word, dic[i][0])==0)
        return dic[i][1];
}
return word;
}
void translate(char filepath[])
{
char output_filepath[181];
strcpy(output_filepath, filepath);
strcat(output_filepath, ".translated");

FILE * client_file = fopen(filepath,"r");
FILE * translated_client_file = fopen(output_filepath,"w");
char line [161];
char * tmpPtr;
char * token;
while((tmpPtr=fgets(line, 160, client_file))!= NULL) {
    if(strcmp(line,"\n") == 0 || line == NULL)
        continue;
    token = strtok_r(line, " \t\n", dummystatus);

    while(token != NULL && strcmp(token,"\n") != 0){
        fputs(lookup(token), translated_client_file);
        fputs(" ", translated_client_file);
        token = strtok_r(NULL, " \t\n", dummystatus);
    }
    fputs("\n", translated_client_file);
}
fclose(client_file);
}
void *do_work(void * p) {
  struct tparam * param = (struct tparam *)p;

  while(qfilled != 1);//wait for queue to be filled

  int cindex;
  while(1){
      //check for more clients
  pthread_mutex_lock(&mutex);
  if(qout >= qin){
    pthread_mutex_unlock(&mutex);
    break;
  }
  //process client
  cindex = qout;
  printf("Thread %d is handling client %s\n",param->tid, queue[cindex][1]);
  qout++;
  pthread_mutex_unlock(&mutex);

  char filepath[161];
  if(queue[cindex][0][strlen(queue[cindex][0])-1] == '\n')
      strncpy(filepath,queue[cindex][0],strlen(queue[cindex][0])-1);
  else
    strcpy(filepath,queue[cindex][0]);
  translate(filepath);
  printf("Thread %d finished handling client %s\n",param->tid, queue[cindex][1]);

      //usleep(rand()%100000+10000);
  }
  pthread_exit(NULL);
}

void addDicEntry(char line[]){
char * first = strtok_r(line, " \t", dummystatus);
char * second = strtok_r(NULL, " \t", dummystatus);
char englishWord[161];
if(1==1 || second != NULL)
{
    strcpy(dic[dic_size][0], first);
    strncpy(englishWord, second, strlen(second)-1);
    englishWord[strlen(second)-1] = '\0';
    strcpy(dic[dic_size][1], englishWord);
    dic_size++;
}
}

int main(int argc, char *argv[]) {

srand(time(NULL));
  if(argc < 2){
printf("No dictionary file provided\n");
exit(1);
  }
  //read dictionary
  int i;
  for(i = 0; i < 10; ++i)
dummystatus[i] = (char*)malloc(10);

  FILE * dic_file = fopen(argv[1],"r");
  if(dic_file == NULL)
 {
printf("Dictionary file does not exist\n");
exit(1);
  }
  char line [161];
  char * tmpPtr;
  while((tmpPtr=fgets(line, 160, dic_file))!= NULL) {
if(strcmp(line,"\n") == 0 || strcmp(line,"") == 0 || line == NULL)
    break;
addDicEntry(line);
  }
  fclose(dic_file);
  //End read dictionary

  //Creating threads
  if(argc >= 3)
NTHREADS = atoi(argv[2]);

  pthread_t * threads = (pthread_t *)malloc(NTHREADS*sizeof(pthread_t));
  pthread_attr_t attr;

  pthread_attr_init(&attr);
  pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_JOINABLE);
  for (i=0; i<NTHREADS; i++) {
struct tparam * param = (struct tparam *)malloc(sizeof(struct tparam *)*1);
param->tid = i+1;
//printf("Thread %d is being created\n",param->tid);
pthread_create(&threads[i], &attr, &do_work, param);
  }
 //End creating threads

  //insert clients in Q
  FILE * clients_file = fopen("clients.in","r");

  char cid_str[10];
  while((tmpPtr=fgets(line, 160, clients_file))!= NULL) {
if(strcmp(line,"\n") == 0 || strcmp(line,"") == 0 || line == NULL)
    break;
pthread_mutex_lock(&mutex);
strcpy(queue[qin][0],line);
sprintf(cid_str, "%d", qin+1);
strcpy(queue[qin][1],cid_str);
qin++;
pthread_mutex_unlock(&mutex);
  }
  fclose(clients_file);
//for (i=0; i<qin; i++)
//printf("%s\n", queue[i][0]);
  qfilled = 1;
  printf("Q Filled\n");
  //End insert clients in Q

  //printf("Waiting for Threads\n");
  for (i=0; i<NTHREADS; i++)
pthread_join(threads[i], NULL);
  //printf("Threads Finished\n");

  pthread_attr_destroy(&attr);
  pthread_exit(NULL);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T05:44:32.897

我怀疑这个问题比“覆盖你的字符串”更微妙。它更多的是覆盖输出线上的数据的问题。试试这个代码：

```
#include <string.h>
#include <stdio.h>

void translate(char* filepath)
{
  char output_filepath[181];

  strcpy(output_filepath, filepath);
    printf("%s\n", output_filepath);      //this prints out "client1.txt" which is correct
  char* ptr = strcat(output_filepath, ".translated");
    printf("%s\n", output_filepath);      //this prints out ".translated" which is wrong
    printf("%s\n", ptr);                  //also prints out ".translated" wrong again
}

int main(void)
{
    translate("client1.txt\r");
    return(0);
} 
```

Mac OS X 10.7.3 上的输出：

```
client1.txt
.translated
.translated 
```

您在文件路径参数字符串的末尾有一个回车符，这导致了这个明显的难题。

您可以通过`od`或`hd`类似程序提供程序的输出。我的被​​称为`odx`，但任何事情都会做（你的程序被调用`x39`完全没有理由，除了它是一个新的文件名）：

```
$ ./x39 | odx
0x0000: 63 6C 69 65 6E 74 31 2E 74 78 74 0D 0A 63 6C 69   client1.txt..cli
0x0010: 65 6E 74 31 2E 74 78 74 0D 2E 74 72 61 6E 73 6C   ent1.txt..transl
0x0020: 61 74 65 64 0A 63 6C 69 65 6E 74 31 2E 74 78 74   ated.client1.txt
0x0030: 0D 2E 74 72 61 6E 73 6C 61 74 65 64 0A            ..translated.
0x003D:
$ 
```

如果我不得不猜测，您从在 Windows 机器上创建的文件中读取文件名`client1.txt`（`gets()`在它之前。

我看到主要代码正在使用`fgets()`- 比`gets()`！— 但它不具备处理 CRLF 行尾的能力。您的代码不会检查文件名是否已成功打开；这迟早会导致核心转储（特别是因为磁盘上的输入文件名不太可能以 CR 结尾，`'\r'`因此打开几乎肯定会失败）。

*   **总是**，但总是在使用文件流指针或文件描述符之前检查文件打开函数是否成功。

相信我; 确实很少会在例程中发现像`strcat()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:15:34.257

表现出这种“无法解释的怪异”行为的 AC 程序确实表明某种内存损坏 - 在多线程程序中更可能发生。因此，您可能已经将问题“缩小”到代码的这一部分，因为那是症状出现的地方，但这不是错误所在。

您是否尝试过`translate()`在其正常上下文之外运行？在 gdb 中启动程序，在 main() 上中断，然后运行`translate("client1.txt")`​​. 它的行为是否正确？

如果是，这确实表明程序的其他部分正在破坏内存。找出哪一部分的唯一方法是研究所有代码，或者使用@jbleners 在评论中建议的工具，如 valgrind。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:19:08.340

好吧，它当然*应该*像你期望的那样工作。

一种可能的替代方法是使用`sprintf`：

```
void translate(char *filepath) { 
    char output_filepath[181];

    sprintf(output_filepath, "%s.translated", filepath);
    printf("%s\n", output_filepath);
} 
```

这*应该*会产生与您正在使用的结果相同的结果（应该），但是如果您遇到某种错误，也许不同的功能会更好地工作。快速测试表明它对我有用，但我很确定使用`strcpy`/的版本`strcat`也会，所以你必须测试才能知道。

编辑：这是一个完整的演示程序：

```
#include <stdio.h>

void translate(char *filepath) { 
    char output_filepath[181];

    sprintf(output_filepath, "%s.translated", filepath);
    printf("%s\n", output_filepath);
}

int main(){
    translate("client1");
    return 0;
} 
```

对我来说，使用我目前方便的编译器（VC++ 10，g++ 4.7），这会产生预期的输出（“client1.translated”）。

# java - 特定模式的正则表达式

> ID：10327076
> 
> 赞同：1
> 
> 时间：2012-04-26T04:03:50.400
> 
> 标签：java, javascript, regex, regex-negation

如前所述，任何人都可以帮助我使用正则表达式。

我有一个 xml 元素“文档”，它有一个属性“范围”，其中范围应该只采用以下格式的值。

范围 = "1,2,3,4,5"

或者

范围 = "1,2,3-6,10-12,15,20-30"

或者

范围=“全部”

一点帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T04:08:32.353

```
^\d(?!.*,-)[\d\,\-]*\d$|^all$|^\d+$ 
```

应该适用于您的数字。输入只能是数字、逗号、破折号或单词`all`。

[http://regexr.com?30p7f](http://regexr.com?30p7f)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T04:14:59.517

`all|[1-9][0-9]*(-[1-9][0-9]*)?(,[1-9][0-9]*(-[1-9][0-9]*)?)*`

我假设不允许使用零和前导零。

正则表达式不是确保数字按升序排列的好方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T04:31:29.957

正如@minopret 提到的，这可能最好不要用正则表达式完全处理。我将`split(",")`字符串然后迭代结果数组以确保它们按升序排列。您可以在此时正则表达式每个单独的数组元素，以确保它们匹配如下内容：

```
\d+(-\d+)? 
```

# java - jasperreports-4.5.1.jar 包含什么罐子

> ID：10327077
> 
> 赞同：1
> 
> 时间：2012-04-26T04:03:54.257
> 
> 标签：java, swing, jasper-reports, netbeans-7

我是 Jasper Reports 的新手。我已经在 jasperreports-4.5.1 中包含了许多 jar，但是每次当我在类路径中包含不同的 jar 文件时都会遇到不同的异常。请告诉我在 jasperreports-4.5.1.jar 中包含哪些罐子，这样我就不会遇到任何异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:54:57.657

您可以在 Maven 存储库中找到它。 [http://mvnrepository.com/artifact/net.sf.jasperreports/jasperreports/4.5.1](http://mvnrepository.com/artifact/net.sf.jasperreports/jasperreports/4.5.1)

# python - 无法识别 PPM 文件数据

> ID：10327079
> 
> 赞同：3
> 
> 时间：2012-04-26T04:04:06.723
> 
> 标签：python, tkinter, image, ppm

我正在写一个简单的图片编辑器。它使用 PPM 文件。据我所知，我觉得我的代码应该可以工作。但是，我收到此错误

```
Traceback (most recent call last):
  File "/home/zach/Downloads/piceditor (1).py", line 84, in <module>
    main()
  File "/home/zach/Downloads/piceditor (1).py", line 69, in main
    image = Image(Point(100,100), filename)
  File "/home/zach/Downloads/graphics.py", line 770, in __init__
    self.img = tk.PhotoImage(file=pixmap[0], master=_root)
  File "/usr/lib/python3.1/tkinter/__init__.py", line 3272, in __init__
    Image.__init__(self, 'photo', name, cnf, master, **kw)
  File "/usr/lib/python3.1/tkinter/__init__.py", line 3228, in __init__
    self.tk.call(('image', 'create', imgtype, name,) + options)
_tkinter.TclError: couldn't recognize data in image file "pig.ppm" 
```

我的代码看起来像这样

```
def main():
print("Image Editor")
print()
filename = input("name of image file: ")
print()

with open(filename) as f:
    formatind = f.readline()
    width, height = [int(x) for x in f.readline().split()]
    colordepth = f.readline()
    array = []
    for line in f:
        array.append([int(x) for x in line.split()])

win = GraphWin("Image Editor!", width, height)

image = Image(Point(100,100), filename)

Display(image, array, width, height, win)

inf.close()
win.getMouse()
win.close()

main() 
```

我的显示功能看起来像这样

```
def Display(image, array, width, height, win):

for i in range(width):
    for j in range(0, height, 3):
        colors = color_rgb(array[i][j], array[i][j+1], array[i][j+2])
        image.setPixel(i, j, colors)
        image.draw(win)

return 
```

这是我正在使用的 ppm 文件

```
P3
6 8
255
249 249 249 255 255 255 250 250 250 255 255 255 250 250 250 250 250 250 254 255 255 251 255 255 
249 251 255 253 249 255 255 248 255 255 234 255 255 242 255 255 245 253 255 246 243 255 253 241 
255 255 237 255 255 237 252 255 241 249 255 246 249 255 253 254 255 255 255 252 255 255 248 241 
255 251 239 254 247 241 252 254 253 252 255 255 251 255 255 242 242 242 255 255 255 241 241 241 
0 0 0 0 0 0 4 4 4 20 20 20 236 236 236 252 252 252 254 255 253 248 255 250 
0 0 0 0 0 0 4 4 4 20 20 20 236 236 236 252 252 252 254 255 253 248 255 250 
```

我一生都无法弄清楚为什么它无法识别文件中的数据。

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:28:08.033

为什么不使用[PIL](http://www.pythonware.com/products/pil/)库？在文档中，它声称它可以处理 PPM 文件。但是我不熟悉使用 PIL 处理 PPM 文件。

[示例](http://www.pythonware.com/library/pil/handbook/introduction.htm)：打开一个 PPM 文件，从该文件创建一个对象，然后可用于编辑该文件。

# objective-c - 自定义日志记录方法 MyLog 不适用于 Objective-C 中的高页面字符

> ID：10327082
> 
> 赞同：0
> 
> 时间：2012-04-26T04:04:38.090
> 
> 标签：objective-c, console, text-based, console-output

我正在尝试使用自定义记录器为基于文本的游戏提供干净的控制台输出。以下是相关方法的代码：

```
void MyLog(NSString *format, ...)
{
    va_list args;
    va_start(args, format);
    NSString *formattedString = [[NSString alloc] initWithFormat:format arguments: args];
    va_end(args);
    [[NSFileHandle fileHandleWithStandardOutput] writeData:[formattedString dataUsingEncoding: NSNEXTSTEPStringEncoding]];
    [formattedString release];
} 
```

这是这个例子的用法：

```
NSLog(@"Unicode text: \u2665");
NSLog(@"ASCII Text");
MyLog(@"Unicode text: \u2665");
MyLog(@"ASCII text"); 
```

和输出：

```
2012-04-26 00:08:53.614 TextCraft[11319:a0f] Unicode text: ♥
2012-04-26 00:08:53.617 TextCraft[11319:a0f] ASCII Text
ASCII text 
```

如您所见，**MyLog 函数适用于低页字符，但当它尝试打印高页字符时，它只是跳过整行。有人知道为什么是这样吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:16:47.237

您在调用 -dataUsingEncoding: 时使用了 NSNEXTSTEPStringEncoding，它只是 ASCII 加上一些附加内容。如果你想支持 Unicode，你应该使用合适的编码，比如 NSUTF8StringEncoding。

# android - 如何在 Google Maps Android 上绘制线条叠加层

> ID：10327086
> 
> 赞同：3
> 
> 时间：2012-04-26T04:04:56.517
> 
> 标签：android, overlay, line, draw, android-maps

我正在尝试在我的地图项目上画一条线，但无法画线。我在哪里以及如何声明覆盖？我尝试了各种方法，但无法使其正常工作。即，代码只是在 Eclipse 中显示错误。我不想做的是绘制从 A 到 B 的路线，而是在我移动时绘制路线。

```
// Creating a MapView
public class Gpstrack extends MapActivity {
    private MapView map;
    private MapController controller;
    private Projection projection;
    ArrayList<GeoPoint> geoPointsArray = new ArrayList<GeoPoint>();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        initMapView();
        initMyLocation();

        TabHost.TabSpec spec;

        TabHost th = (TabHost)findViewById(R.id.tabhost);
        th.setup();

        spec = th.newTabSpec("tag1");
        spec.setContent(R.id.map_Tab);
        spec.setIndicator("Map");
        th.addTab(spec);

        spec = th.newTabSpec("tag2");
        spec.setContent(R.id.log_Tab);
        spec.setIndicator("Log");
        th.addTab(spec);

        spec = th.newTabSpec("tag3");
        spec.setContent(R.id.details_Tab);
        spec.setIndicator("Details");
        th.addTab(spec);

        spec = th.newTabSpec("tag4");
        spec.setContent(R.id.student_Tab);
        spec.setIndicator("Student Info");
        th.addTab(spec);

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    //Map and Controls
    private void initMapView() {
        map = (MapView) findViewById(R.id.mvMain);
        controller = map.getController();
        map.setSatellite(true);
        //map.setStreetView(true);
        map.setBuiltInZoomControls(true);
    }

    //Creates an Overlay that marks current position
    private void initMyLocation() {
        final MyLocationOverlay overlay = new MyLocationOverlay(this, map);

        overlay.enableMyLocation();
        overlay.enableCompass();
        overlay.runOnFirstFix(new Runnable() {
            public void run() {
                controller.setZoom(17);
                controller.animateTo(overlay.getMyLocation());
                map.getOverlays().add(overlay);

            }

        });

    }

    //Experiment
    class MyOverlay extends Overlay {
        public void draw(Canvas canvas, MapView mapv, boolean shadow) {
            super.draw(canvas, mapv, shadow);
            Projection projection = mapv.getProjection();
            Path p = new Path();

            for (int i = 0; i < geoPointsArray.size(); i++) {
                if (i == geoPointsArray.size() -1) {
                    break;
                }
                Point from = new Point();
                Point to = new Point();
                projection.toPixels(geoPointsArray.get(i), from);
                projection.toPixels(geoPointsArray.get(i + 1), to);
                p.moveTo(from.x, from.y);
                p.lineTo(to.x, to.y);
                }

            Paint mPaint = new Paint();
            mPaint.setStyle(Style.STROKE);
            mPaint.setColor(Color.GREEN);
            mPaint.setAntiAlias(true);
            mPaint.setStrokeWidth(5);
            canvas.drawPath(p, mPaint);
            mapv.invalidate();
            super.draw(canvas, mapv, shadow);

        }
    }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:34:52.343

您是否尝试使用此演示来实现[Google Map Overlay](http://eagle.phys.utk.edu/guidry/android/mapOverlayDemo.html)。

希望您对这个演示有所了解。

享受。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:50:54.930

我认为你应该试试这个链接 [在谷歌地图上画一条线/路径](https://stackoverflow.com/questions/2176397/drawing-a-line-path-on-google-maps) 和这个[J2ME/Android/BlackBerry - 行车路线，两个位置之间的路线](https://stackoverflow.com/questions/2023669/j2me-android-blackberry-driving-directions-route-between-two-locations)。我认为这应该对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:45:24.147

在你的覆盖类中，你可以像这样画线

```
public class MapOverlay extends com.google.android.maps.Overlay

    {
        Canvas canvas;

        @Override
        public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
                long when)
        {
            // TODO Auto-generated method stub
             super.draw(canvas, mapView, shadow);
            this.canvas=canvas;
            Point screenpoint = new Point();

             mapView.getProjection().toPixels(p, screenpoint);
             Bitmap bmp = BitmapFactory.decodeResource(
                        getResources(), R.drawable.pushpin);            
                    canvas.drawBitmap(bmp, canvas.getWidth()/4, 
                            canvas.getHeight()/4, null);  

                    Paint paint = new Paint();
                    paint.setColor(Color.BLACK);
                    canvas.drawLine(canvas.getWidth()/4, canvas.getHeight()/4,
                            canvas.getWidth()/2, canvas.getHeight()/2, paint);
                    return true;

        }  

        return true;
    }    

    } 
```

画线功能就像

```
 public void drawLine (float startX, float startY,
 float stopX, float stopY, Paint paint) 
    Since: API Level 1 Draw a line segment with the specified start and stop x,y coordinates, using the specified paint. 

    Parameters
    startX  The x-coordinate of the start point of the line 
    startY  The y-coordinate of the start point of the line 
    paint  The paint used to draw the line 
```

如果你想画一条路径，你可以参考这个问题

[J2ME/Android/BlackBerry - 行车路线，两个地点之间的路线](https://stackoverflow.com/questions/2023669/j2me-android-blackberry-driving-directions-route-between-two-locations/2023685#2023685)

# grails - 如何在 groovy Mehods 中处理多种返回类型？

> ID：10327091
> 
> 赞同：2
> 
> 时间：2012-04-26T04:05:25.297
> 
> 标签：grails, groovy

我需要有一个方法来在成功的情况下返回 Id，在失败的情况下返回错误列表。前代码片段：

```
def save = {
   def errors = []
    if(Employee.save(flush:true)){
      return Employee.id
    }else{
      errors.add("Can't be saved")
      return errors.
    }

   } 
```

在服务类 ICalling Employee.save() - .. 那么如何检查 save 方法返回的是错误还是 id

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T09:26:28.343

我同意 Burk 不要返回不同的类型，这可能会导致意外错误。该问题的另一个解决方案是使用 Java 的异常处理机制。您可以将上下文字段添加到将保存验证错误列表的异常。捕获异常后，您可以提取错误。

```
void save(Employee employee) {
    // do save
    // ...

    // on error:
    def errors = [ "terrible error nr. 5" ]
    throw new ValidationException(errors)
}

try {
    fooService.save(employee)
} catch(ValidationException e) {
    def errors = e.erorrs
    // do stuff with the errors
} 
```

另一个优点：当没有预期的验证错误时，可以在 Groovy 中省略 try-catch 块，这使代码更简洁，因为您不必关心任何验证错误字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T04:58:48.477

不要这样做——即使你可以让它在 Groovy 中更有用，这也是个坏主意。不过，在这种情况下，有一些简单的解决方案。如果您只是传递 Employee 实例并将其保存在 service 方法中，则无需返回任何内容：

```
void save(Employee employee) {
   employee.save(flush:true)
} 
```

这是因为如果成功，id 会在你传入的实例上设置，如果不成功，`errors`属性中会出现一个或多个验证错误（实际有用时无需返回通用错误消息）错误信息可用）。

例如，这将是您在调用服务的控制器中拥有的代码：

```
def employee = new Employee(...)
fooService.save(employee)
if (employee.hasErrors()) {
   // do something with employee.errors
}
else {
   // success - use the id if you need via employee.id
} 
```

如果你想传入数据来创建和保存新实例并返回一个Employee（这是我通常采取的方法），它是类似的：

```
Employee save(String name, int foo, boolean bar, ...) {
   Employee employee = new Employee(name: name, foo: foo, bar: bar, ...)
   employee.save(flush:true)
   return employee
} 
```

`save`在第二种情况下，将call 和分开很重要`return`，因为如果`save`返回验证错误`null`并且您希望始终返回非 null 实例。所以不要这样做：

```
return employee.save(flush:true) 
```

如果将它们分开，则可以检查错误和/或 ID。

此外，请确保不要*像*在代码中那样在服务中使用闭包 ( `def save = { ...`)。只有方法是事务性的，因为 Spring 事务处理不知道 Groovy 闭包——它们只是 Groovy 调用的字段，就好像它们是方法一样，但它们不是。

# wpf - 如何在 WPF 中动态创建保存和加载 XAML 文件

> ID：10327094
> 
> 赞同：0
> 
> 时间：2012-04-26T04:05:44.227
> 
> 标签：wpf, sql-server-2005, c#-4.0

我的要求是使用 WPF 动态创建一个 XAML 文件并从保存的目录中加载该文件。从数据库中，我计划在创建文件时向 XAML 添加控件。我是否可以将其保存为编译格式并在运行时加载。请帮助我提供示例代码或参考..

关于阿尼什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:19:07.810

“以编译格式保存它”可能很棘手，但您可以轻松保存/加载 XAML 并在 WPF 应用程序中使用 XAML，但使用 XamlReader 和 XamlWriter 类。 [http://fritzenhammer.wordpress.com/2006/08/12/xamlwriter-and-xamlreader-wpf-serialization/](http://fritzenhammer.wordpress.com/2006/08/12/xamlwriter-and-xamlreader-wpf-serialization/)

# c# - 在并行任务期间跟踪失效的 WebDriver 实例

> ID：10327095
> 
> 赞同：2
> 
> 时间：2012-04-26T04:05:53.447
> 
> 标签：c#, webdriver, task-parallel-library, thread-local

我看到一些使用 Selenium WebDriver 运行并行嵌套循环 Web 压力测试的死实例怪异，例如，点击 300 个独特页面，每个页面有 100 次展示。

我“成功地”让 4 - 8 个 WebDriver 实例使用 a`ThreadLocal<FirefoxWebDriver>`来隔离每个任务线程，并在 ParallelOptions 实例上使用 MaxDegreeOfParallelism 来限制线程。我只对外部循环（页面集合）进行分区和并行化，并检查每个分区的“长时间运行任务”方法开头`.IsValueCreated`的`ThreadLocal<>`容器。为了便于稍后进行清理，我将每个新实例添加到由线程 ID 键入的 ConcurrentDictionary 中。

无论我使用何种并行化或分区策略，WebDriver 实例都会偶尔执行以下操作之一：

*   启动但从不显示 URL 或进行展示
*   启动，运行任意数量的展示次数，然后在某个时候闲置

当其中任何一个发生时，并行循环*最终*似乎会注意到一个线程没有做任何事情，它会产生一个新的分区。如果*n*是允许的线程数，这将导致*n 个*生产线程只有大约 50-60% 的时间。

清理最后仍然可以正常工作；可能有 2n 个或更多打开的浏览器，但有效率的和无效率的都会被清理干净。

有没有办法监视这些无用的 WebDriver 实例，并且 a) 立即清除它们，加上 b) 让并行循环立即替换任务段，而不是像现在通常那样滞后几分钟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:23:56.533

我遇到了类似的问题。事实证明，WebDriver 没有找到打开端口的最佳方法。如此处所述[，](https://groups.google.com/forum/?fromgroups#!topic/selenium-developers/nYFkIgXQcbw)它会在端口上获得系统范围的锁定，找到一个打开的端口，然后启动实例。这可能会使您尝试启动端口的其他实例饿死。

我通过直接在委托中指定一个随机端口号来解决这个问题，`ThreadLocal<IWebDriver>`如下所示：

```
 var ports = new List<int>();
        var rand = new Random((int)DateTime.Now.Ticks & 0x0000FFFF);

        var driver = new ThreadLocal<IWebDriver>(() =>
        {
            var profile = new FirefoxProfile();
            var port = rand.Next(50) + 7050;
            while(ports.Contains(port) && ports.Count != 50) port = rand.Next(50) + 7050;
            profile.Port = port;
            ports.Add(port);
            return new FirefoxDriver(profile);
        }); 
```

这对我来说非常有效，尽管如果您最终使用了未解决的列表中的所有 50 个，则会出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:00:33.127

> 由于没有`OnReady`事件或`IsReady`属性，我通过在创建每个实例后将线程休眠几秒钟来解决它。这样做似乎给了我 100% 持久、正常运行的 WebDriver 实例。

感谢您的[建议](https://stackoverflow.com/questions/10265684/selenium-webdriver-c-sharp-multithreading/10282760#comment13342067_10282760)，我已经`IsReady`在我的开源项目[Webinator](http://webinator.codeplex.com/)中实现了功能。如果需要，请使用它，或使用下面列出的代码。

我尝试实例化 25 个实例，它们都可以正常工作，所以我现在对算法很有信心（我利用 HtmlAgilityPack 来查看元素是否存在，但为了简单起见，我将跳过它）：

```
public void WaitForReady(IWebDriver driver)
{
    var js = @"{ var temp=document.createElement('div'); temp.id='browserReady';" +
             @"b=document.getElementsByTagName('body')[0]; b.appendChild(temp); }";
    ((IJavaScriptExecutor)driver).ExecuteScript(js);

    WaitForSuccess(() =>
    {
        IWebElement element = null;
        try
        {
            element = driver.FindElement(By.Id("browserReady"));
        }
        catch
        {
            // element not found
        }

        return element != null;
    },
    timeoutInMilliseconds: 10000);

    js = @"{var temp=document.getElementById('browserReady');" +
         @" temp.parentNode.removeChild(temp);}";
    ((IJavaScriptExecutor)driver).ExecuteScript(js);
}

private bool WaitForSuccess(Func<bool> action, int timeoutInMilliseconds)
{
    if (action == null) return false;

    bool success;
    const int PollRate = 250;
    var maxTries = timeoutInMilliseconds / PollRate;
    int tries = 0;
    do
    {
        success = action();
        tries++;
        if (!success && tries <= maxTries)
        {
            Thread.Sleep(PollRate);
        }
    }
    while (!success && tries < maxTries);
    return success;
} 
```

假设是如果浏览器正在响应 javascript 函数并正在查找元素，那么它可能是一个可靠的实例并且可以使用。

# java - java.lang.ClassFormatError：不兼容的魔法值 218774561

> ID：10327098
> 
> 赞同：6
> 
> 时间：2012-04-26T04:06:18.877
> 
> 标签：java, class, jar, applet, classformaterror

大家好，我今天正在为 Java 制作我的第一个小程序。我一直在服务器上使用子域，但我不知道该怎么做，因为我遇到了这个非常奇怪的错误。

我在服务器中有我的 jar 和所有东西，但每次我尝试加载 Applet 时都会发生这种情况。

> java.lang.ClassFormatError：类文件 Evolution/EvolutionApplet 中不兼容的魔法值 218774561

经过研究，似乎不兼容的魔法值意味着 .jar 中的某些内容已损坏

这是网站[http://dementedgames.site88.net/Main.html](http://dementedgames.site88.net/Main.html) 如果您需要网站上的 html 代码，jar 名称是 Evolution。

编辑：小程序应该从 Evolution.EvolutionApplet 而不是 Evolution.Evolution 启动

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T04:22:50.690

一个有效的 Java 类的[魔法值](https://en.wikipedia.org/wiki/Magic_number_(programming))是`0xCAFEBABE`，它是 的十六进制值`3405691582`。这由文件的前 4 个字节表示。但是您得到`218774561`的又是 ASCII 字符`CR`, `LF`,`<`和`!`（CRLF 是换行符）。要自己查看，请运行以下代码：

```
int magic = 218774561;
ByteBuffer b = ByteBuffer.allocate(4);
b.putInt(magic);
System.out.println(new String(b.array())); 
```

这与网站提供的小程序相结合表明它是 a 的开始，`<!DOCTYPE>`而后者又表明它是一个 HTML 文档。

因此，请求`Evolution.jar`显然*实际上*返回了一个 HTML 文档。当您将浏览器地址栏中的当前请求 URI 更改为指向小程序的 URL（例如`/page.html`，将 URL 末尾更改为`/Evolution.jar`）时，您应该能够自己看到它。然后，您将看到浏览器在尝试下载小程序时*实际检索到的内容。*也许这是一个简单的 HTTP 404 错误文档。

要修复它，只需确保`archive`属性中的 URL 正确。它与您在浏览器地址栏中看到的当前请求 URL 相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:55:06.260

原来的问题现在似乎已经解决了。[我可以从http://dementedgames.site88.net/Evolution.jar](http://dementedgames.site88.net/Evolution.jar)下载 Jar

## 更新

看来这个`Evolution.Evolution`类不是小程序！使用以下命令从命令行运行它：

```
java -jar Evolution.jar 
```

产生一个框架（具有非常“复古”的外观）！因此，忘记这个小程序的废话，并使用**[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)****从链接启动框架。**

## 旧答案

OTOH 它现在抛出一个`ClassNotFoundException`（在检查了 Jar 之后）让我认为它应该是：

```
<html>
<head>
<title>Evolution</title>
</head>
<body bgcolor="#000000" text="#906060">
<center>
<applet code="Evolution.Evolution" archive="Evolution.jar" width="800" height="600">
</applet>
</center>
</body>
</html> 
```

该属性有两个`code`值得注意的变化。

1.  `.class`扩展名已被删除。一件小事，添加它是可以容忍的，但不正确。
2.  `Applet`从类名中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:32:04.950

上面的 BalusC 已经很好地解释了它。除此之外，您还可以查看此链接 [Thread: Incompatible magic value 218774561 error in applet](https://forums.oracle.com/forums/thread.jspa?threadID=2222635)

似乎你的小程序标签的代码库和/或代码属性需要正确指出。

# java - 从 .pfx 文件中检索到的证书私钥与个人 My Store 有什么区别？

> ID：10327099
> 
> 赞同：0
> 
> 时间：2012-04-26T04:06:18.830
> 
> 标签：java, certificate, private-key, pfx

我想知道从 .pfx 文件和个人 My Store 中检索到的证书私钥之间有什么区别。我使用java语言检索了这两种类型的证书私钥。

**从个人 My Store 检索：**

**私钥**：*RSAPrivateKey [大小=2048 位，类型=Exchange，容器={DE6E412F-9F87-4E26-8A3A-9C1DAC06A110}]*

**通过用户输入从 .pfx 文件中检索：**

**私钥：** *RSA Private CRT Key modulus: c5fa714a47a29dd5344035ef10484eb5b477d8caf8a9466c94e700a3ab2298a21fba809b9f426c5c2f8bf7263c1ca261e2310d097031bf0727361c0d7b0a432a310a4f5fb0f3e268ee42e64c3f6081d64a586dd90e87e7443246491ef9bb9d5ec8decae31240d49a8e1dcdb4f56baa3c170e5d6529d4a1cac192d628716083344763b267b1643a325e80935eafc31ff3900d859f05668677f28619800d52c0a89e353d208f72671558a9feb9dfbbb809cb99e50b375620ccde8bfe2d45b74df7e07925f9ccb0eb84a54d92937a0b631e4115d67b7f29f6a4256341d1b038be49a08b24ee12e5cc93006e7668eebf14888693260e43f47961c87372b6ebafbe57 public exponent: 10001 private exponent:3863f45eeef68fb449b4bc6802a045e315ab4951cef010421f4b88f0156fbe3ff77f9ce036c5a9adbc5146ad5a53e1a0b5d7b8d9e65e15064991ecfd9dfd37524e339c962a05dd887bcd0c61cd6f84abeff32e1eb437db949e294cec88bf7abca3c469cfb1c44b8a564e80e8393b587ad32a6149ce57655a2636d7cf1f34194a8b8369daea458dc0e37172ea29ab4004ca6a7e571e4118474121239f58628bee948e08e4d0780e691b66009aacf60eb833053d3a58ca3f98e3fe4b2a2e1e1e254f8f11737692895b0f7b8c8644cc00e6fc3cd6153613cfb9fd1a1f4b649a88849a34f0178cc0b12974dec9a6143850fd9a04a1c64d83839d89d0bb168eb968d9 primeP: ddad2933da59cbc2a7129df80e5ddd730ce4711f056fff802699dc12816dcd742a8bcb8bff10acc4eb43bb24dbaf8e3db3b1e026a39a69042907aed105aa344131da0817749ef25d02ce51e34adabede8e4a09b2dae5268b5da4e154939e10a67b2cd9ebe9fcfb93c1c5508dacb2a7d7b4821bc83f97e30d1973e32538bb1b15 primeQ:e4a1eeb2137558806760445f25f6a90a9450160e153782c0c1ac4b76e63aeec605093764cb02d40a1ab74cdb7180c02e9052c40b7bcb4aafd9e24a4797cda0d5090bf70665ddd55de041bb3d48a0359e28a831a2db77ae5265316b26b3722a52d019c98a8c4e34999f8f90671691d172ea4f4e020f5ce31d70018976621c9ebb primeExponentP: 5aa210c58591cf305fb4c9e780a03a096f0cfb7f2e6ef32cc71b831201df0df05ff0d6210001265240ca697a91637ea9958db552b6f34bda8a97fc8eb35d3a8e293eb6ae385d40446d004414c5271880cff64f6ed3f67ac2e25fa64d3929982f290f566e113600fa11708615d6b518d0a599c89820000eb1ed65274ab19e365d primeExponentQ: ad7b31e36d605d071169ba777816f1ad555c6f5fc0399ebd2437d80b20271786a9cb947ca68e3ed66bef2a2258bd9915bbed1154a55a5c11930261da711556344fe904479683fca27ec7618bdecfb1df907a0f2fc3d7cc2e391a86739735c9678d00042d5cc8faa096b218a0204004ed6d5d3f93d0946ac0ab7c7f1194e0a29 crtCoefficient:7f70f9439d3ab04af8dc5ff8f11fbc60d3e62d5a6220c9421de09374f431214f7cba3cb8eb302c8c79a5c84555c5e29ebec9edc2d1547fd07aea860888a50d5aa1aa2eeb5a40d2f46523bd8fa4125c34dde6a91f9f3c88e9bc3bee484e9367125b20c630fcf2e8144ea31f688a67def228fdcdc02dd6b64e23e0bd67e330c5e6*

请解释一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:36:02.887

你的私人保持不变。您可以在密钥容器引用的 Microsoft 密钥存储中生成您的私钥。当您从 PFX 导入您的私钥时，该私钥将导入到 PFX 证书上下文引用的 Microsoft 密钥存储字节中。

# wpf - 如何让物业变动冒泡？

> ID：10327101
> 
> 赞同：1
> 
> 时间：2012-04-26T04:06:46.100
> 
> 标签：wpf

我有以下结构：Window1 -> UserControlA -> UserControlB -> UserControlC

每个都有自己的视图模型。如何在 UserControlA 上创建依赖于 UserControlC 属性的属性？

我唯一能想到的就是从 B 公开 C 的属性更改事件，这样我就可以从 A 监听 C 的事件并更新 A 的依赖属性。问题是这似乎太做作了，所以我认为必须有一个更简单的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:28:14.450

你可以做两件事：

1.  按照你在问题中提到的做：让每个父母观察自己的孩子。

2.  使用 RoutedEvents：在 C 上公开[一个 RoutedEvent](http://msdn.microsoft.com/en-us/library/ms742806.aspx)并在 A 上处理它。

**编辑**

在考虑了您的问题之后：

如果它是您想要冒泡的 C 的 ViewModel 的属性，则只能使用第一个选项，因为 RoutedEvents 仅在 UI 控件上受支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:07:31.110

您可以链接`Dependency Properties`来实现这一点。您需要在所有用户控件中公开 dp 。绑定`UserControlC`with`UserControlB`和 then的属性`UserControlA`。这样，每当更改 in 属性时`UserControlC`，属性 in`UserControlA`也会更改。

a.xaml.cs

```
class VewModelA : INotifyPropertyChanged
{
    prop TextA {get {return thevalue;} set : set thevalue & RaisePropertyChanged("TextA")}
} 
```

b.xaml.cs

```
class ViewModelB : INotifyPropertyChanged
{
    prop TextB {get {return thevalue;} set : set thevalue & RaisePropertyChanged("TextB")}
} 
```

C.xaml.cs

```
class ViewModelC : INotifyPropertyChanged
{
    prop TextC {get {return thevalue;} set : set thevalue & RaisePropertyChanged("TextC")}
} 
```

A.xaml

```
<controls:B TextB={Binding TextA, Mode=TwoWay}" /> 
```

B.xaml

```
<controls:C TextC={Binding TextB, Mode=TwoWay}" /> 
```

每当更改 C 的 Text 时，绑定都会更新 TextA 的值。当然，您必须在控制模板中将 dp 与其相应的视图模型属性进行映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:14:30.823

一个简单的解决方案可能是使用作为 Prism [http://compositewpf.codeplex.com/的一部分提供的 EventAggregator 机制](http://compositewpf.codeplex.com/)

# probability - 二维数组中发生分组的概率

> ID：10327104
> 
> 赞同：0
> 
> 时间：2012-04-26T04:06:57.380
> 
> 标签：probability, combinatorics, multidimensional-array

我有一个随机选择的 5 种颜色的 10x10 方形 2d 数组。基本上是一个 10x10 像素的位图。我试图弄清楚让我们说 6 个相同颜色的概率在 4 路分组中。通过 4 路分组，我的意思是它的邻居就像直接位于当前像素的上、下、左或右的彩色像素。我知道平均而言，图像上应该存在每种颜色的 20 个像素，但我在试图找出一个公式来找到一组相似颜色像素的概率时迷失了方向。

我记得曾经在组合数学课上做过这样的计算，并且非常感谢任何关于我可以在哪里重新学习其中一些的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:16:09.860

本[参考资料](http://blog.iseesystems.com/tag/2d-array/)可能对您有用。

# c++ - 带有 std::map.find 的 gcc 3.4 内部编译器错误

> ID：10327110
> 
> 赞同：0
> 
> 时间：2012-04-26T04:08:39.937
> 
> 标签：c++, stl, gcc3

有没有人在 gcc 3.4 中遇到以下错误，boost 1.34.1 冲突的代码如下：

```
class Symbol
{
/// ...
bool operator<( const Symbol& rhs ) const;
};
typedef boost::function< double( const XYZ::Date& ) > F;
typedef std::map<Symbol, F> M;

M aMap; // properly instantiated
Symbol s; // properly instantied

M::const_iterator it = aMap.find( s ); // dies in this call, see below 
```

Symbol.h:97 引用一个 bool operator<( const Symbol& ) const 成员函数，它比较 Symbol 类型的两个实例。这在所有编译器上都可以正常工作，除了 gcc 3.4 会导致以下内部编译器错误。

**/XYZ/include/XYZ/AAA/Type/Symbol.h:97：内部编译器错误：在 gen_subprogram_die 中，位于 dwarf2out.c:11278**

我一直试图在网上找到任何指向上述失败原因的指针，但找不到任何解决方案。有没有人通过任何改变遇到过这个？或者有人指出为什么 gcc 编译器在那个时候死掉了？

谢谢你的帮助。

```
/XYZ/AAA/Type/Symbol.h: In member function `bool XYZ::Symbol::operator<(const XYZ::Symbol&) const':
/XYZ/AAA/Type/Symbol.h:97:   
instantiated from `bool std::less<_Tp>::operator()(const _Tp&, const _Tp&) const [with _Tp = XYZ::Symbol]'
/usr/local/include/c++/3.4.5/bits/stl_tree.h:1125:   
instantiated from 

`typename std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::const_iterator std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::find(const _Key&) const 
[with 
_Key = XYZ::Symbol, 
_Val = std::pair<const XYZ::Symbol, boost::function<double ()(const XYZ::Date&), std::allocator<void> > >, 
_KeyOfValue = std::_Select1st<std::pair<const XYZ::Symbol, boost::function<double ()(const XYZ::Date&), std::allocator<void> > > >, 
_Compare = std::less<XYZ::Symbol>, 
_Alloc = std::allocator<std::pair<const XYZ::Symbol, boost::function<double ()(const XYZ::Date&), std::allocator<void> > > >
]'

/usr/local/include/c++/3.4.5/bits/stl_map.h:513:  

instantiated from 

`typename std::_Rb_tree<_Key, std::pair<const I, T>, std::_Select1st<std::pair<const I, T> >, _Compare, _Alloc>::const_iterator std::map<_Key, _Tp, _Compare, _Alloc>::find(const _Key&) const 

[with 
_Key = XYZ::Symbol, 
_Tp = boost::function<double ()(const XYZ::Date&), std::allocator<void> >, 
_Compare = std::less<XYZ::Symbol>, 
_Alloc = std::allocator<std::pair<const XYZ::Symbol, boost::function<double ()(const XYZ::Date&), std::allocator<void> > > >
]'

AFunc.cpp:70:   instantiated from here
/XYZ/include/XYZ/AAA/Type/Symbol.h:97: internal compiler error: in gen_subprogram_die, at dwarf2out.c:11278 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:58:33.727

尝试其中之一：

1.  升级你的 gcc :)
2.  尝试不同的编译器标志。
3.  尝试制作该头文件的副本并尝试剥离 Symbol 类的声明，直到错误停止，然后从那里获取它。看看你是否可以在你正在编译的平台上没有声明的情况下逃脱。
4.  如果您的目标是获取特定发行版的二进制文件，请尝试在虚拟机中创建该发行版的安装（如果您仍然可以获得它！），升级其 gcc 并使用它进行编译。

我的建议是选项 1。gcc3 的最后一次官方更新我可以在 2006 年 3 月找到它 3.4.6。它不会很快得到修复。

# java - 为什么拆箱强制转换为具体类而不是数字

> ID：10327112
> 
> 赞同：0
> 
> 时间：2012-04-26T04:08:46.300
> 
> 标签：java

例如，取消装箱 Integer 会导致转换为 Integer，然后调用 intValue()。为什么不简单地转换为 Number 后跟必要的 intValue() 来获取原语？自然，问题延伸到拆箱所有其他包装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:25:29.910

一方面，我注意到 Integer 是最终的。在对 Integer 类型（引用）的表达式调用 intValue 时，无需检查实例类型是否覆盖 intValue。这对于类型（引用）Number 的表达式是必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:58:57.553

如果Java按照您的建议进行操作，那将破坏装箱/拆箱不会导致精度损失的非常重要的功能。Java 中已经有一个既定原则，即必须使用强制转换运算符明确要求任何丢失精度的转换。写是违法的

```
final int i = 1L; 
```

所以如果这有效，那就错了：

```
final int i = Long.valueOf(1); 
```

# c++ - 动态长度字符串数组

> ID：10327123
> 
> 赞同：0
> 
> 时间：2012-04-26T04:09:40.763
> 
> 标签：c++, string, visual-c++, file-io

我是 C++ 的新手。我想编写一个程序来从具有格式数据的文件中读取值：

```
text<tab or space>text
text<tab or space>text
... 
```

（...表示更多这样的行）

文件中的行数**各不相同**。现在，我想读取这个文件并将文本存储到 1 个 2D 字符串数组或 2 个 1D 字符串数组中。我该怎么做？

此外，我想在这个数组上运行一个 for 循环来处理文件中的每个条目。我怎么写那个循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:22:29.377

您正在寻找一个可调整大小的数组。试试`std::vector<string>`。[您可以在此处](http://www.cplusplus.com/reference/stl/vector/)找到文档。

编辑：您可能还可以通过打开文件、循环计算文件的行数、生成固定大小的数组、关闭并重新打开文件，然后循环遍历文件来填充数组来做到这一点。但是，不建议这样做，因为它会增加您的运行时复杂性，远远超过管理向量所涉及的轻微开销，并且它会使您的代码对于任何阅读它的人来说更加混乱。

（ps - 我同意@matthias-vallentin，你应该能够在网站上找到这个，只需最少的工作）

# java - php中未调用解密函数

> ID：10327126
> 
> 赞同：1
> 
> 时间：2012-04-26T04:10:01.853
> 
> 标签：java, php, encryption

我在java中使用加密并在php中执行解密。
我正在使用以下代码在 java 中进行加密。

```
String iv = "fedcba9876543210";
IvParameterSpec ivspec;
KeyGenerator keygen;
Key key;

ivspec = new IvParameterSpec(iv.getBytes());

keygen = KeyGenerator.getInstance("AES");
keygen.init(128);
key = keygen.generateKey();

keyspec = new SecretKeySpec(key.getEncoded(), "AES"); 

Cipher cipher;
byte[] encrypted;

cipher = Cipher.getInstance("AES/CBC/NoPadding");
cipher.init(Cipher.ENCRYPT_MODE, keyspec, ivspec);
encrypted = cipher.doFinal(padString(text).getBytes());

private String padString(String source) {
  char paddingChar = ' ';
  int size = 16;
  int padLength = size - source.length() % size;

  for (int i = 0; i < padLength; i++) {
    source += paddingChar;
  }

  return source;
} 
```

对于 php 中的解密，我使用以下代码：

```
function decrypt($code, $key) {
  $key = $this->hex2bin($key);
  $code = $this->hex2bin($code);

  $td = mcrypt_module_open("rijndael-128", "", "cbc", "fedcba9876543210");

  mcrypt_generic_init($td, $key, CIPHER_IV);
  $decrypted = mdecrypt_generic($td, $code);

  mcrypt_generic_deinit($td);
  mcrypt_module_close($td);

  return utf8_encode(trim($decrypted));
}

function hex2bin($hexdata) {
  $bindata = "";

  for ($i = 0; $i < strlen($hexdata); $i += 2) {
    $bindata .= chr(hexdec(substr($hexdata, $i, 2)));
  }

  return $bindata;
} 
```

加密工作正常，但在 php 的此功能解密期间流程停止：

```
$td = mcrypt_module_open("rijndael-128", "", "cbc", "fedcba9876543210"); 
```

所以我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:41:56.707

你得到什么错误？

你有安装/编译 PHP 的 mcrypt 吗？ [信息在这里](http://us2.php.net/manual/en/mcrypt.requirements.php)

# jquery - 使用 jQuery 发送 POST；服务器认为 GET

> ID：10327127
> 
> 赞同：2
> 
> 时间：2012-04-26T04:10:32.247
> 
> 标签：jquery, ajax, post, get

这是我的javascript：

```
function sendAttack(attacker,defender,hpChange){
    USER_LAST_TIMESTAMP = Math.round(new Date().getTime() / 1000.0);
    var attack = new Attack(TURN_ID,attacker,defender,hpChange);
    attack.action_sequence = ACTION_QUEUE;
    var attackJSON = JSON.stringify(attack);
    jQuery.ajax({
        type: "POST",
        url: urlLeader + "attacks.json",
        data: attackJSON,
        success: function(data){
            ACTION_QUEUE++;
        }
    })  
} 
```

在`setup.js`上面加载之前：

```
jQuery.ajaxSetup({
    accepts: 'application/json',
    dataType: 'jsonp'
}); 
```

这是我调用该函数时服务器收到的内容：

```
2012-04-26T03:57:44+00:00 app[web.1]: Started GET "/attacks.json?callback=jQuery17103089843031743851_1335412646794&{%22attacker%22:2,%22defender%22:3,%22hp_change%22:6.799999999999997,%22action_sequence%22:0}&_=1335412659141" for 167.206.19.130 at 2012-04-26 03:57:44 +0000 
```

不是“获取”。这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:19:37.530

也许[jquery.com 上的这个论坛帖子](http://forum.jquery.com/topic/post-query-with-jquery-ajax-and-jsonp-datatype)描述了您的问题：

> 跨域 JSONP 请求是使用动态脚本标签创建的，因此只能使用 GET 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:25:45.657

我怀疑这段 jQuery 代码负责：

```
// Handle cache's special case and global
jQuery.ajaxPrefilter( "script", function( s ) {
    if ( s.cache === undefined ) {
        s.cache = false;
    }
    if ( s.crossDomain ) {
        s.type = "GET";
        s.global = false;
    }
}); 
```

即跨域脚本请求（由 JSONP 使用）将其`type:`字段重置为`GET`.

这是因为 JSONP 根本不使用`XMLHTTPRequest`，它会伪造一个`<script>`标签，然后您的浏览器会创建自己的`GET`请求来检索该资源。

# java - 如何在启动时初始化 spring 集成：网关？

> ID：10327130
> 
> 赞同：0
> 
> 时间：2012-04-26T04:10:55.543
> 
> 标签：java, spring, spring-integration

我正在使用 spring 集成通过活动 mq 进行通信。我有以下配置。

```
<integration:channel id="riskApprovalRequestChannel"/>
    <integration:channel id="riskApprovalResponseChannel"/>

    <jms:outbound-gateway id="riskApprovalServiceGateway"
                          request-destination-name="${risk.approval.queue.request}"
                          reply-destination-name="${risk.approval.queue.response}"
                          request-channel="riskApprovalRequestChannel"
                          reply-channel="riskApprovalResponseChannel"
                          connection-factory="jmsConnectionFactory"
                          receive-timeout="1000"/>

    <integration:gateway id="riskApprovalService" service-interface="com.my.ServiceInterface"
                         default-request-channel="riskApprovalRequestChannel"
                         default-reply-channel="riskApprovalResponseChannel"/> 
```

这很好用，除了第一个请求很慢。我总是在第一个请求时达到 1 秒超时。显然某处发生了一些延迟加载。

我的问题是，如何在启动时进行完全初始化以避免第一个请求总是超时？

干杯，

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:50:39.140

问题可能是建立连接。

您可以做的一件事是将供应商 ConnectionFactory 包装在 Spring CachingConnectionFactory 中（出于性能原因，无论如何都要这样做），并在初始化期间调用 createConnection()。

有很多方法可以做到这一点 - 包括使用 init 方法、@PostConstruct 方法或使用 afterPropertiesSet() 的 InitializingBean 将连接工厂注入其他 bean；它将在上下文初始化期间调用。

这将导致缓存的连接被急切地连接。

您可能希望在 try 块中执行此操作，以避免由于 JMS 代理不可用而导致应用程序上下文无法初始化（当然消息传递仍然会失败，但是当代理可用时，应用程序将启动并准备好连接） .

# php - 如何通过 PHP/readfile 提供 .dmg 文件？

> ID：10327135
> 
> 赞同：6
> 
> 时间：2012-04-26T04:11:52.393
> 
> 标签：php, http-headers, readfile, dmg

我没有运气从我的在线商店提供 .dmg。我将代码简化为以下代码以进行调试，但无论我得到一个零字节文件是什么：

```
header('Content-Type: application/x-apple-diskimage');   // also tried octet-stream
header('Content-Disposition: attachment; filename="My Cool Image.dmg"');
$size = filesize('/var/www/mypath/My Cool Image.dmg');
header('Content-Length: '.$size);
readfile('/var/www/mypath/My Cool Image.dmg'); 
```

相同的代码适用于我提供的许多其他文件类型：bin、zip、pdf。有什么建议么？谷歌教授不是我的朋友。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T18:22:38.320

找到了解决方案。罪魁祸首是 readfile() 并且可能与内存有关。代替 readfile() 行，我使用这个：

```
$fd = fopen ('/var/www/mypath/My Cool Image.dmg', "r");
while(!feof($fd)) {
    set_time_limit(30);
    echo fread($fd, 4096);
    flush();
}
fclose ($fd); 
```

它现在可以正确处理所有文件类型，包括 DMG。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T04:37:29.713

文件名中不应包含空格（对于 Web 托管文件，不应使用空格）

尝试这样的事情或重命名你的文件，没有空格：

```
<?php 
$path ='/var/www/mypath/';
$filename = 'My Cool Image.dmg';

$outfile = preg_replace('/[^a-zA-Z0-9.-]/s', '_', $filename);

header('Content-Type: application/x-apple-diskimage');   // also tried octet-stream
header('Content-Disposition: attachment; filename="'.$outfile.'"');

header('Content-Length: '.sprintf("%u", filesize($file)));

readfile($path.$filename); //This part is using the real name with spaces so it still may not work
?> 
```

# javascript - 无法缩放 UIWebView

> ID：10327137
> 
> 赞同：0
> 
> 时间：2012-04-26T04:12:09.397
> 
> 标签：javascript, iphone, ios, uiwebview, zooming

我们的应用程序包含 UIWebview，它显示一个 HTML 页面，该页面使用触摸事件来显示一些图像。问题在于缩放 HTML 内容。当用户触摸屏幕时，html 元素会对其进行处理，并防止 UIWebView 的默认缩放行为。但我需要这两个功能。我该如何解决这个问题？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:44:31.660

嗨，您需要将 WebView 的 Scale Page to Fit 属性打开为 YES

您可以从 Interface builder 执行此操作，如下所示 ![在此处输入图像描述](../Images/4981d005bb6b49212c80a614d71b0362.png)

或者你也可以这样做

[`webView setScalesPageToFit:YES];`

希望能帮助到你。

# ruby-on-rails-3 - 使用 ruby gem net-ssh 配置 Juniper 路由器

> ID：10327141
> 
> 赞同：1
> 
> 时间：2012-04-26T04:12:33.527
> 
> 标签：ruby-on-rails-3, configuration, router, net-ssh

我希望能够使用 ruby​​ net-ssh gem 来更改 Juniper M10i 路由器。但是，发送“配置”后，我无法发送任何配置命令。

例如，通过 ssh 登录到路由器后，我想发出以下三个命令：

```
configure
show system
exit 
```

使用 net-ssh 库，我尝试了以下操作但没有成功：

```
# net-ssh (2.3.0)
require 'net/ssh'

session = Net::SSH.start(host, user, :password => password)
session.exec!('term length 0')
session.exec!('term width 0')

channel = session.open_channel do |ch|
  puts "Channel open."

  ch.on_close do |ch|
    puts "Channel is closing!"
  end

  ch.on_data do |ch, data|
    puts "Data #{data}!!!!!!!!!!"
  end

  ch.exec "configure" do |ch, success|
    puts "FAIL: configure" unless success
  end

  ch.exec "show system" do |ch, success|
    puts "FAIL: show system" unless success
  end

  ch.exec "exit" do |ch, success|
    puts "FAIL: exit" unless success
  end
end
session.loop 
```

执行后，我得到以下输出：

```
Channel open.
FAIL: show system
FAIL: exit
Data Entering configuration mode
!!!!!!!!!!
Channel is closing! 
```

那么如何在“configure”之后正确传递“show system”命令呢？

**解决了：**

我偶然发现了以下帖子：[https ://stackoverflow.com/a/6807178/152852](https://stackoverflow.com/a/6807178/152852)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:41:02.680

根据帖子[https://stackoverflow.com/a/6807178/152852](https://stackoverflow.com/a/6807178/152852)，附加的 gem“ **net-ssh-telnet** ”提供了我正在寻找的确切行为。

```
require 'net/ssh'
require 'net/ssh/telnet'

session = Net::SSH.start(host, user, :password => password)
t = Net::SSH::Telnet.new("Session" => session, "Prompt" => prompt)

puts t.cmd 'configure'
puts t.cmd 'show | compare'
puts t.cmd 'exit'
puts t.cmd 'exit' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-11T20:23:56.457

我知道这是一个非常古老的问题，但作为参考，我发现了两个专门为 Cisco/Juniper 交换机自动化包装 telnet/SSH 会话的 ruby​​ 库：

*   [expect4r](https://github.com/jesnault/expect4r) (Cisco iOS/瞻博网络 JunOS)
*   [红宝石-思科](https://github.com/jtimberman/ruby-cisco)

# android - 安卓：xml还是json？

> ID：10327143
> 
> 赞同：1
> 
> 时间：2012-04-26T04:12:52.913
> 
> 标签：android, ruby-on-rails-3, android-4.0-ice-cream-sandwich

我很好奇在我的 android 应用程序中使用 json 或 xml 是否更方便？还是没关系？

在 Flash 应用程序中使用 xml 肯定更方便，但在 javascript（至少在我看来）中，使用 json 更方便。我有一个可以方便地提供 json 或 xml 的 rails 后端，所以我现在正在尝试做出选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:19:45.837

JSON 在 Android 中会非常简单。您已经拥有它的库，您可以使用其类来解析 JSON 文件或内容。解析 XML 有一些痛苦。我建议使用 JSON。如果您需要任何使用 JSON 进行解析的示例，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T04:19:49.817

Android SDK 有 org.json 或 org.xml 包，所以我认为这不是 Android sdk 的问题，而是您的应用程序/api 设计的问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T04:29:51.410

好吧，我推荐 JSON 的原因不是易于使用，而是网络带宽。与 XML 相比，JSON 消息的大小更小。因此，考虑这一点也是为了选择一个而不是另一个。

其次，您也可以使用[Gson 另一个库](http://code.google.com/p/google-gson/)`org.json`来简化您的实现，与 Android 平台附带的实现相比，它更易于使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T04:29:00.263

与 XML 相比，JSON 非常易于使用。Android 同时支持 JSON 和 XML。这里已经给出了详细的示例。这将讨论何时使用 JSON 和 XML

[http://www.ibm.com/developerworks/xml/library/x-andbene1/](http://www.ibm.com/developerworks/xml/library/x-andbene1/)

希望这会帮助你。

# php - PHP代码对我来说不理解。请解释

> ID：10327145
> 
> 赞同：-1
> 
> 时间：2012-04-26T04:13:17.400
> 
> 标签：php, arrays, api, associative-array

```
$arr = NSZone::find_all(array('per_page'=>20, 'page'=>1)); 
```

返回结果是

```
 [0] => NSZone Object
        (
            [xml_skip_attribs:protected] => Array
                (
                    [0] => id
                )

            [vals:protected] => Array
                (
                    [total_count] => 3
                )
        ) 
```

他正在访问

```
arr[0]['vals:protected']['total_count'] in this way arr[0]->total_count() 
```

这意味着 total_count() 是一个函数，而根据数组结构，它看起来像数组索引。 **请解释一下这段代码，它是如何工作的？**什么是 [vals:protected]，它也可以是公共的、私有的等，请问您知道更多解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:23:49.453

根据输出，`arr[0]`是一个对象（NSZone），它显然有一个`total_count`方法可以返回您在 中看到的值`[total_count]`。

即使您看到`protected`范围解析，因为它是类`total_count`的假定成员变量，`NSZone`它对方法可用`total_count`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T04:24:16.550

那不是一个数组，而是`print_r($arr)`NSZone **Object**的一个，如果您不在该类中，这意味着您在与您使用 print_r($arr) 相同的范围内访问它并且该属性设置为私有/受保护，那么您将无法访问其中的值如果您在对象之外，则需要添加某种 getter，或将其更改为公共对象。

如果该类使用[__get()](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)魔术方法，您可能可以像这样访问它： `$arr->total_count;`

或者您可以添加一个方法来获取它，并像这样访问它：`$arr->getCount();`

```
public function getCount(){
  return $this->vals->total_count;
} 
```

但是没有看到课程，很难说，所以我可能完全出局了。

# macos - 可可：以退格键等效的菜单栏项

> ID：10327148
> 
> 赞同：5
> 
> 时间：2012-04-26T04:13:55.477
> 
> 标签：macos, cocoa, nsmenuitem, backspace

我想将 IB 中菜单栏项的等效键设置为退格键（删除光标左侧），但由于某种原因，这似乎不起作用。我可以为其分配各种键，例如 CMD+Backspace 或 fn+Backspace（删除键，即从右侧删除），但是当我分配普通的退格键时，它根本不注册。

我是否必须做一些不同的事情才能使用退格键？

PS：我不想以任何其他方式处理密钥。它必须是等效的菜单项键。

**编辑：**我使用 IB 为菜单项设置等效键。我知道我之前说过，但有些人看不懂。我知道如何在 IB 中设置它，它适用于除退格键之外的所有内容。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T04:39:19.480

请参考[NSMenuItem 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSMenuItem_Class/Reference/Reference.html)`setKeyEquivalent:`中的方法描述：

> 如果要将 Backspace 键指定为菜单项的等效键，请使用单个字符串[`NSBackspaceCharacter`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSText_Class/Reference/Reference.html#//apple_ref/c/econst/NSBackspaceCharacter)（在`NSText.h`as中定义`0x08`），对于 Forward Delete 键，使用`NSDeleteCharacter`（在`NSText.h`as中定义`0x7F`）。**请注意，这些字符与您`NSEvent`在按下这些键时从按键事件中获得的字符不同。**

顺便说一句，我通常可以通过按下它在界面生成器中将菜单项的键等效项设置为退格键，它在我的示例应用程序中工作（从 Xcode 模板创建，将文件关闭的键等效项设置为退格键）。我在雪豹上使用 Xcode 4.2。您的方案中是否存在任何键绑定冲突？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-12T19:33:08.180

这是旧的，但我有同样的问题，它正在杀死我。事实证明，当我设置 keyDown 处理程序时，我最后没有调用 super.keyDown(theEvent) 。不知何故，多键快捷键（如 cmd+delete）仍会触发事件，但单字符退格键不会。

这修复了它：

```
override func keyDown(theEvent: NSEvent) {
    ...
    super.keyDown(theEvent)
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-02T07:56:40.000

使用“\u{08}”作为密钥等效字符串，它可以工作

```
menu=NSMenuItem(title: "Delete Note", action: nil, 
     keyEquivalent: "\u{08}") 
```

我从

```
let menu=window!.menu
print(menu?.item(at: 1)?.submenu?.item(at: 1)?.keyEquivalent)//set Delete key from xib file 
```

NSBackspaceCharacter 也有 keycode 8

```
menu=NSMenuItem(title: "Delete Note", action: nil, 
     keyEquivalent: String(Unicode.Scalar(NSBackspaceCharacter)!)) 
```

# python - 数据存储在本地主机上，但不在 gae 数据存储上？

> ID：10327151
> 
> 赞同：2
> 
> 时间：2012-04-26T04:14:35.447
> 
> 标签：python, google-app-engine, google-cloud-datastore

出于某种原因，我创建的表单将数据插入到本地主机上的数据库中。我将它部署到 gae，表单工作但没有任何内容插入数据存储区？

这是我的模型文件：

```
from django.db import models
# from django.contrib.auth.models import User

# Create your models here.
class Company(models.Model):
    id = models.IntegerField(primary_key=True);
    name = models.CharField(max_length=100, null=True);
    address = models.CharField(max_length=100, null=True);
    phone = models.CharField(max_length=15, null=True);
    website = models.CharField(max_length=50, null=True);
    email = models.EmailField(max_length=50, null=True);
    hiring = models.BooleanField(default=False);    
    latitude = models.DecimalField(max_digits=20, decimal_places=10, null=True);
    longitude = models.DecimalField(max_digits=20, decimal_places=10, null=True);
    approved = models.BooleanField(default=False);
    date_added = models.DateTimeField(auto_now_add=True);
    about_us = models.TextField(max_length=500, null=True); 
```

我的表格：

```
from django import forms
from company.models import Company

class SignUpCompanyForm(forms.ModelForm):
    class Meta:
        model = Company; 
```

我的html表单：

```
{% block content %} 
    <div id="content">
        <!-- a form for sign up -->
        <form id="sign" action="/sign_up_company" method="post">
            <table>{{ form }}</table>
            <input type="submit" value="Sign Up" />
        </form>
    </div>
{% endblock %} 
```

我的视图功能：

```
def sign_up(request):
    if request.method == 'POST':
        form = SignUpCompanyForm(request.POST);
        if form.is_valid():
            company = form.save(commit=False);
            company.save();
            # company.put();

    return HttpResponseRedirect('/confirmation'); 
```

表单的操作映射到“sign_up”。

当我运行“python manage.py syndb”时，我得到：

```
C:\Users\Joe\Desktop\test>python manage.py syncdb
Creating tables ...
Installing custom SQL ...
Installing indexes ...
No fixtures found.
Exception AttributeError: "'NoneType' object has no attribute 'mkstemp'" in <bound method DatastoreFileStub.__del__ of <google.appengine.api.datastore_file_stub
.DatastoreFileStub object at 0x029874F0>> ignored 
```

我的 app.yaml：

```
application: app_name
version: 1
runtime: python27
api_version: 1
threadsafe: yes

builtins:
- remote_api: on

inbound_services:
- warmup

libraries:
- name: django
  version: latest

handlers:
- url: /css
  static_dir: css

- url: /_ah/queue/deferred
  script: djangoappengine.deferred.handler.application
  login: admin

- url: /_ah/stats/.*
  script: djangoappengine.appstats.application

- url: /media/admin
  static_dir: django/contrib/admin/media
  expiration: '0'

- url: /.*
  script: djangoappengine.main.application 
```

我的 index.yaml：

```
indexes:

- kind: django_admin_log
  properties:
  - name: user_id
  - name: action_time
    direction: desc

- kind: django_content_type
  properties:
  - name: app_label
  - name: name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:02:39.023

App Engine 不支持 Django 模型。您必须使用 App Engine 的 db.models 或 ndb.models API 编写模型。

另一种选择是使用 Django-nonrel。它是适用于 App Engine 或 MongoDB 的 Django 1.3 的一个分支。这将允许您使用 Django 模型。

在当地取得成功有点奇怪。您的 Django 设置必须配置为使用 SQLite 等 SQL 数据库，它可能实际上并未写入 dev_appserver 数据存储。

# wcf - 自追踪实体 - 如何更新导航属性？

> ID：10327160
> 
> 赞同：1
> 
> 时间：2012-04-26T04:16:37.250
> 
> 标签：wcf, silverlight, entity-framework, data-binding, self-tracking-entities

我正在使用带有自我跟踪实体的 EF 开发应用程序。因为 STE 不支持延迟加载，所以在更改外键后更新实体导航属性的首选方法或最佳实践是什么？这在这里解释：

[http://msdn.microsoft.com/en-us/library/ff407090.aspx](http://msdn.microsoft.com/en-us/library/ff407090.aspx)

“当你通过设置外键属性改变对象之间的关系时，引用导航属性设置为null，并且不同步到客户端上相应的主体实体。图附加到对象上下文后（例如，在你调用 ApplyChanges 方法），外键属性和导航属性是同步的。”

此问题已在此处解决：

[http://blogs.msdn.com/b/diego/archive/2010/10/06/self-tracking-entities-applychanges-and-duplicate-entities.aspx](http://blogs.msdn.com/b/diego/archive/2010/10/06/self-tracking-entities-applychanges-and-duplicate-entities.aspx)

但这真的是最好的方法吗？你们已经使用或想到了哪些方法来解决此限制？我发现很难相信任何人都在使用自我跟踪实体，如果它很难在您的数据网格中显示导航属性并且在您对记录进行更改时将它们设置为 null。发生这种情况时，它在我的应用程序中看起来很时髦。当然，我可以在保存并更新这些属性后返回服务器，但我的数据网格中会有一堆空导航属性，直到我调用保存在服务器上。

例如，我有一个主详细信息场景，其中我的用户从数据网格中选择一条记录，然后在下面的表单中对其进行编辑。当更改我的组合框绑定到的外键时，绑定到数据网格中导航属性的记录被设置为空。当外键更改时，如何避免这种行为并更新导航属性？

如果我尝试通过设置导航属性而不是外键来更改关系，则在尝试提交更改时会出现以下异常：

“AcceptChanges 无法继续，因为对象键值与 ObjectStateManager 中的另一个对象冲突。在调用 AcceptChanges 之前，请确保键值是唯一的。”

是否无法将主详细信息数据网格绑定到实体的导航属性？任何有关克服此问题的帮助或指导将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T22:39:02.437

有点令人沮丧的是，关于这些类型的问题的信息似乎很少。最后，我能够通过执行此博客文章中的#2 建议并将我的服务调用分组到一种方法来解决这个问题：

[http://blogs.msdn.com/b/diego/archive/2010/10/06/self-tracking-entities-applychanges-and-duplicate-entities.aspx](http://blogs.msdn.com/b/diego/archive/2010/10/06/self-tracking-entities-applychanges-and-duplicate-entities.aspx)

问题是，如果我想返回数据库并重新加载我的数据，我还必须重新加载任何查找表，以便它们返回同一个图表以避免错误。我希望这在 STE 的未来版本中有所改变。

# css - 如何在 Opera 中删除文本框的轮廓

> ID：10327162
> 
> 赞同：0
> 
> 时间：2012-04-26T04:16:45.493
> 
> 标签：css, textbox, opera, outline

我测试了下面的代码，但没有成功：

![在此处输入图像描述](../Images/7da9c9dd6f2bb7f5f56b5d50de924e63.png)

```
input[type="text"]:focus, input[type="password"]:focus {
    outline:none;
    -moz-transition: box-shadow 0.3s ease-out 0s;
    background-clip: padding-box;
    border: 1px solid #B6B6B6;
    border-radius: 3px 3px 3px 3px;
    color: #404040;
    font-size: 16px;
    height: auto;
    line-height: 16px;
    padding: 10px;
} 
```

这里有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T23:02:33.263

Opera 将黄色轮廓应用于已保存登录信息的表单输入。我认为不可能用 CSS 覆盖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-16T10:20:01.420

对我来说，它适用于 Opera/Safari/Chrome 上的添加

```
input:focus {
  outline: 0 none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:23:44.470

而不是使用大纲：无；尝试使用边框：0；给定大纲：不会产生跨浏览器问题...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T04:50:14.503

将此添加到您正在使用的CSS中

```
textarea:focus {
 outline-width: 0;
} 
```

# c# - 即时调试器在编译期间抛出错误

> ID：10327164
> 
> 赞同：0
> 
> 时间：2012-04-26T04:16:58.507
> 
> 标签：c#, .net, visual-studio-2010

我正在使用 VS 2008。我有一个 C# 应用程序。

当我尝试构建/运行项目时，它会打开 JUST IN TIME 调试器，因为某种原因使我无法单步执行发生异常的代码。

我怎样才能摆脱这个及时提示？

我确实去了 tools=>options-->debugging and disabled JUST IN TIME，现在它给了我一条错误消息：

projectname 中出现未处理的 win32 异常。及时调试此异常失败并出现以下错误...基本上我猜它正试图及时打开

如何获得正常的编译器调试功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:23:59.500

查看以下 MSDN 文章：[即时调试](http://msdn.microsoft.com/en-us/library/5hs4b7a6.aspx)。听起来在您的情况下，您可能希望确保已删除 JIT 的注册表项。

此外，以下似乎适用于您的情况：

> 中发生未处理的 win32 异常。即时调试此异常失败并出现以下错误：登录的用户无权调试崩溃的应用程序。
> 
> 此消息表明即时调试失败，因为您没有适当的访问权限。有关所需权限的信息，请参阅 [已过时] 远程调试权限。

# python - Python 和 MatPlotlib：ValueError 和 skip_header

> ID：10327165
> 
> 赞同：0
> 
> 时间：2012-04-26T04:17:19.653
> 
> 标签：python, matplotlib

好的，我有这个简化的代码来绘制一个简单的等高线图：

```
try:
   header = input("\nEnter the number of rows to skip for the text file's header: ") 
except (NameError, SyntaxError, TypeError, ValueError) as e: 
   print 'This is not a valid integer. This program will be terminated.'
   sys.exit(0)

z = np.genfromtxt(mapdocument.txt,skip_header= header)
(rows,cols) = z.shape

pyplot.figure()
pyplot.contour(x, y, z, 10)
pyplot.show() 
```

假设skip_header应该是5。我想知道如果用户输入的值不是5，我应该怎么做才能避免程序在最后崩溃。

这是我得到的错误：

```
Traceback (most recent call last):
  File "F:\sampletask1.py", line 134, in <module>
  z = np.genfromtxt(filename,skip_header= header)
  File "C:\Python_1\lib\site-packages\numpy\lib\npyio.py", line 1560, in genfromtxt
    raise ValueError(errmsg)
ValueError: Some errors were detected !
    Line #9 (got 348 columns instead of 2)
    Line #10 (got 348 columns instead of 2)
    Line #11 (got 348 columns instead of 2)
    and so on 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:25:12.807

尝试将`np.genfromtxt`行放在 try 块内。然后，您可以捕获异常并使用它做任何您喜欢的事情。

# javascript - 选择排序算法不起作用...警告...我是新手

> ID：10327166
> 
> 赞同：0
> 
> 时间：2012-04-26T04:17:22.010
> 
> 标签：javascript, algorithm, selection

我的算法不起作用，我是所有算法和 javascript 的新手，我似乎无法弄清楚为什么它不起作用。

**这是数组 (23, 19, 35, 12, 30)**

**最大值 = 0**

这就是我所拥有的...

```
For K= 0 to n – 2 

  MAX = 0

      For j = 0 to n – k - 2

                         If item[j] > item[MAX]
                         MAX = item[j] 

                  end if
          end for 
      swap n - k - 2 with item[MAX] 
   end for
end SelectionSort 
```

我哪里出错了？谢谢！！！！

另外，如果有人能告诉我如何在跟踪表中使用它，我会很高兴的！

亲切的问候克雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:23:26.887

在这个表达式中使用 max 会导致问题 item[MAX]，它将是 j。请考虑一下，然后像这样重试，选择排序[演示](http://jsfiddle.net/eKfgz/1/)

```
 var arr = new Array (23, 19, 35, 12, 30);         
     temp = 0;

     for( k = 0; k < arr.length-1; k++)
     {

        for( j = k+1;  j < arr.length; j++)
        {

            if (arr [k] > arr [j])
            {

                 temp = arr[k];
                 arr[k] = arr[j];
                 arr[j] = temp;
            }
         }
     }

for(k = 0; k < arr.length; k++)
    alert(arr[k]);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:56:57.493

我相信您的代码中有一些错误。首先，这两个地方的上限应该是 n - k -1 而不是 n -k-2（如果索引 nk-1 已经是最大值，则不要移动索引元素）。此外，您应该将 item[nk-1] 与 item[MAX] 交换（而不是您编写的索引）。我相信这样的事情应该有效：

```
 For K= 0 to n – 1 
   MAX = 0
   For j = 0 to n – k - 1
      If item[j] > item[MAX]
        MAX = item[j] 
      end if
   end for 
   swap item[n - k - 1] with item[MAX] 
  end for
end SelectionSort 
```

# moq - Moq VerifySet(Action) 奇怪的行为

> ID：10327169
> 
> 赞同：1
> 
> 时间：2012-04-26T04:17:47.673
> 
> 标签：moq

我使用 Moq 来测试一些行为。我想将设置视图的模型属性验证为 Message 类的新实例：

```
[TestFixture]
public class MessageFormPresenterTests
{
    private NameValueCollection queryString;
    private Mock<IDatabase> mockDatabase;
    private Mock<HttpContextBase> mockHttpContext;
    private Mock<HttpRequestBase> mockRequest;
    private Mock<HttpResponseBase> mockResponce;
    private Mock<IMessageFormView> mockView;
    private MessageFormPresenter presenter;

    [SetUp]
    public void SetUp()
    {
        this.queryString = new NameValueCollection();
        this.mockDatabase = new Mock<IDatabase>();
        this.mockHttpContext = new Mock<HttpContextBase>();
        this.mockRequest = new Mock<HttpRequestBase>();
        this.mockResponce = new Mock<HttpResponseBase>();
        this.mockView = new Mock<IMessageFormView>();

        this.mockHttpContext.SetupGet(c => c.Request).Returns(this.mockRequest.Object);
        this.mockHttpContext.SetupGet(c => c.Response).Returns(this.mockResponce.Object);

        this.mockRequest.SetupGet(r => r.QueryString).Returns(this.queryString);

        this.presenter = new MessageFormPresenter(this.mockView.Object) { Database = this.mockDatabase.Object, HttpContext = this.mockHttpContext.Object };
    }

    [Test]
    public void ViewLoad_QueryStringNotHasMessageIdParameter_PopulateViewModelAsNewMessage()
    {
        // Act
        this.mockView.Raise(v => v.Load += null, new EventArgs());

        // Assert
        this.mockView.VerifySet(v => v.Model = It.Is<Message>(m => m.Id == 0));
    }
} 
```

但即使我没有在 MessageFormPresenter 中编写此功能，此测试也通过了。当我将断点设置为操作调用 (v.Model = It.Is(m => m.Id == 0)) 并调试我的测试时，Model 属性返回为“Castle.Proxies.MessageProxy”类型并具有默认的所有属性值（当然，Id 属性的值是 0）。

为什么会这样？我没有设置任何要返回的东西，Moq 默认情况下应该返回 null。

PS对不起我的英语不好。我希望你明白我在说什么）

UPDATE1：MessageFormPresenter 类：

```
 public class MessageFormPresenter : Presenter<IMessageFormView>
{
    private IDatabase database;

    public MessageFormPresenter(IMessageFormView view)
        : base(view)
    {
        View.Load += this.View_Load;
    }

    public IDatabase Database
    {
        get { return this.database ?? (this.database = DatabaseFactory.DatabaseInstance); }
        set { this.database = value; }
    }

    private void View_Load(object sender, EventArgs e)
    {
        int messageId;
        var messageParam = Request.QueryString[QueryParamNames.MessageId];

        if (messageParam == null)
        {
            View.Model = new Message();
            return;
        }

        if (!View.IsAdmin)
        {
            Response.Redirect(PageUrls.AccessDenied, true);
            return;
        }

        if (int.TryParse(
            messageParam,
            NumberStyles.AllowLeadingWhite | NumberStyles.AllowTrailingWhite,
            CultureInfo.InvariantCulture,
            out messageId))
        {
            View.Model = this.Database.Single<Message>(messageId);
        }
        else
        {
            Response.Redirect(PageUrls.DefaultPage, true);
        }
    }
} 
```

`Presenter<IMessageFormView>`WebFormsMvp 框架提供的基类。

UPDATE2：如果我使用严格的行为 TargetInvocationException 将被抛出 MessageFormPresenter 的基本构造函数，即使我设置了`Mock<IMessageFormView>`.

# d3.js - 带有标记的力图上的 D3 鱼眼

> ID：10327176
> 
> 赞同：1
> 
> 时间：2012-04-26T04:18:36.243
> 
> 标签：d3.js, path, force-layout, markers, fisheye

我喜欢新的鱼眼插件 (http://bost.ocks.org/mike/fisheye/)，但想让它在使用路径和标记而不是线条的力图上工作。我是 D3 的新手，到目前为止结合了标记演示，鱼眼演示打败了我，我想知道是否有人成功并能指出我正确的方向。

干杯本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:40:36.577

vis.on("mousemove", function() { if (rmbMenuHidden) { fisheye.center(d3.mouse(this));

```
 node
            .each(function(d) { d.display = fisheye(d); })
            .attr("cx", function(d) { return d.display.x; })
            .attr("cy", function(d) { return d.display.y; })
            .attr("r", function(d) {  d.display.r=d.display.z * 10; return d.display.r;});

        path.attr("d", function(d) {

            var dx = d.t.display.x - d.s.display.x;
            var dy = d.t.display.y - d.s.display.y;

            var h= Math.sqrt(dx * dx + dy * dy);
            var htr = h-d.t.display.r-d.edgeWidth-1;
            var cos=dx/h;
            var sin=dy/h;

            var dxt = cos*htr+d.s.display.x;
            var dyt = sin*htr+d.s.display.y;

            //clip source to circle radius too
            var dxs = cos*d.s.display.r+d.s.display.x;
            var dys = sin*d.s.display.r+d.s.display.y;

                var dx = d.t.display.x - d.s.display.x,
                dy = d.t.display.y - d.s.display.y;
                dr = Math.sqrt(dx * dx + dy * dy);
                return "M" + d.s.display.x + "," + d.s.display.y + "A" + dr + "," + dr + " 0 0,1 " + dxt + "," + dyt;
        });
    }
} 
```

# c++ - 在 100 个数字的数组中找到 5 个最高数字的总和

> ID：10327178
> 
> 赞同：-4
> 
> 时间：2012-04-26T04:18:42.667
> 
> 标签：c++, algorithm

数组中有 100 个数字，我需要找出其中前 5 个最高数字的平均值。

也以同样的方式计算其中前 5 个最低数字的平均值。我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T04:20:30.383

使用 Hoare 的选择算法（或中位数的中位数，如果您需要绝对确定计算复杂度），然后添加顶部分区（并除以其大小以获得平均值）。

这比用排序代替分区的明显方法要快一些——分区是 ( `O(N)`) ，而排序是`O(N log(N) )`。

编辑：在 C++ 中，对于真正的代码（即，除了家庭作业之外的任何内容，其中部分要求是完全自己完成任务），您可以使用`std::nth_element`将输入划分为前 5 名和其他所有内容。

Edit2：这是补充@Nils'的另一个快速演示，但这是一个完整的C ++ 11 regalia（可以这么说）：

```
#include <numeric>  
#include <algorithm>
#include <iostream>
#include <iterator>
#include <vector>

int main(){
    std::vector<int> x {1, 101, 2, 102, 3, 103, 4, 104, 5, 105, 6};

    auto pos = x.end() - 5;

    std::nth_element(x.begin(), pos, x.end());

    auto sum = std::accumulate(pos, x.end(), 0);
    auto mean = sum / std::distance(pos, x.end());

    std::cout << "sum = " << sum << '\n' << "mean = " << mean << "\n";

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T04:42:47.860

Jerry 已经解释了它是如何工作的。我只想在 C++ 中添加一个实用的代码示例：

```
#include <algorithm>

int averageTop5 (int list[100])
{
  // move top 5 elements to end of list:
  std::nth_element (list, list+95, list+100);

  // get average (with overflow handling)
  int avg = 0;
  int rem = 0;      
  for (int i=95; i<100; i++)
  {
    avg += list[i]/5;
    rem += list[i]%5;      
  }

  return avg + (rem /5);  
} 
```

使用 Jerrys std::accumulate 这将成为一个两行但可能会因整数溢出而失败：

```
#include <algorithm>
#include <numeric>
int averageTop5 (int list[100])
{
  std::nth_element (list, list+95, list+100);
  return std::accumulate (list+95, list+100, 0)/5;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:19:54.550

按升序对它们进行排序并添加最后五个数字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T04:44:07.387

将前 5 个数字复制到一个数组中。确定该数组中最小元素的位置。对于列表其余 95 个数字中的每一个，将其与最小的数字进行比较。如果新数字更大，则替换它并重新确定新的最小数字在您的短名单中的位置。

最后，对数组求和并除以 5。

# javascript - 无限滚动网格和 MVC

> ID：10327180
> 
> 赞同：0
> 
> 时间：2012-04-26T04:19:04.557
> 
> 标签：javascript, extjs

假设我们遵循一篇原创文章[http://www.sencha.com/learn/the-mvc-application-architecture](http://www.sencha.com/learn/the-mvc-application-architecture)并拥有这样的商店：

```
Ext.define('AM.store.Users', {
    extend: 'Ext.data.Store',
    model: 'AM.model.User',
    autoLoad: true,

    proxy: {
        type: 'ajax',
        url: 'data/users.json',
        reader: {
            type: 'json',
            root: 'users',
            successProperty: 'success'
        }
    }
}); 
```

我们决定实现一个无限滚动网格。为此，我们需要手动删除`autoLoad: true`和调用。`store.guaranteeRange(...)`

那么这样做的最佳地点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:17:49.853

```
Ext.define('AM.store.Users', {
    extend: 'Ext.data.Store',
    model: 'AM.model.User',
    autoLoad: true,
    remoteSort: true,
    buffered: true,
    pageSize: 100,
    proxy: {
        type: 'ajax',
        url: '/postdata/list',
        limitParam: 'size',
        startParam: undefined,
        reader: {
            type: 'json',
            root: 'data',
            successProperty: 'success'
        }
    }
}); 
```

在这里演示[http://ext4all.com/post/extjs-4-1-grid-infinite-scroll-in-mvc](http://ext4all.com/post/extjs-4-1-grid-infinite-scroll-in-mvc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:00:16.753

渲染网格的地方。您可以覆盖`afterRender()`方法，或者如果它是模式网格/对话框 - 在呈现之前加载商店。

一对旁注（我试图说明`autoLoad`通常`false`适用于所有商店的观点：

*   如果您将在您的应用程序中使用任何身份验证 - 您将必须`autoLoad`在所有商店中禁用。
*   如果您有更多的商店（比如 5-10+？），强烈建议您也禁用它。您不希望在应用程序启动时同时加载所有这些。
*   很多时候，您需要保证在商店加载后发生了某些事情，然后您再次禁用`autoLoad`、订阅加载事件和`load()`商店。

# java - 在java中用Object定义静态

> ID：10327183
> 
> 赞同：-1
> 
> 时间：2012-04-26T04:19:18.887
> 
> 标签：java

一位面试官这样问我：

```
class Employee{
    private string empname;

    public String getEmpname() {
        return empname;
    }
    public void setEmpname(String empname) {
        this.empname = empname;
    }
}

class EmpDetails{    
    private static Employee emp;
    public static List fillData(){
        emp=new Employee();
        List l=new ArrayList();
        System.out.println("static after new creation fillData"+System.identityHashCode(emp));
        emp.setEmpname("suresh");
        emp.setDesignation("Sr.Software Engineer");
        l.add(emp);
        emp=new Employee();
        System.identityHashCode(emp);
        System.out.println("static after new creation fillData"+System.identityHashCode(emp));
        emp.setEmpname("Prasad");
        emp.setDesignation("Software Engineer");
        l.add(emp);
        return l;    
    }
} 
```

如果在下面定义会发生什么

```
private static Employee emp; 
```

用员工对象定义静态和非静态非访问修饰符有什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:32:05.230

如果一个字段被定义为静态，则该字段的值由该特定类的所有实例共享。但是，在您的情况下，该字段被定义为私有，这限制了类的实例在类外访问它。当您调用填充 dataget() 时，它将创建 Employee 列表，静态 emp 字段将保存最后一个 emp("Prasad") 的值。如果创建了 EmpDetails 类的任何其他实例，并且您尝试使用其他方法（例如 GetEmp()）在不调用 fillData 的情况下访问 emp，那么它将返回设置为“Prasad”的 emp 的最后一个值。
就设计而言，这种方法是不正确的，因为 EmpDetails 类由于静态 Employee 对象而指向一个 Employee。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:22:27.520

如果`Employee`在类中定义一个静态成员字段`EmpDetails`——这意味着所有`EmpDetails`实例共享同一个`Employee`实例。如果没有更多的上下文，你的问题的其余部分并没有多大意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:51:33.443

*您应该考虑阅读实例变量*和*类变量*之间的区别，例如阅读有关该主题的[Oracle 教程。](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)

# regex - PL/SQL Reg Exp 找到最后一个数字并拆分

> ID：10327192
> 
> 赞同：0
> 
> 时间：2012-04-26T04:19:56.113
> 
> 标签：regex, string, plsql, split

如何使用 reg 表达式找到字符串中的最后一个数字，然后将右侧的所有内容放入 c1 列，然后从最后一个数字左侧的所有内容 + 1 个字符进入 c2 列？

**例如 1**

```
string = 1234john4345 this is a test. 
```

结果

```
c1 = 1234john4345  
c2 = this is a test. 
```

**例如 2**

```
string = 1234john4345a this is a test. 
```

结果

```
c1 = 1234john4345a  
c2 = this is a test. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:48:16.883

```
select test
    --Group 1: Match everything up to the last digit, and one other character
    --Group 2: Everything after group 1
    ,regexp_replace(test, '(.*[[:digit:]].)(.*)', '\1') c1
    ,regexp_replace(test, '(.*[[:digit:]].)(.*)', '\2') c2
from
(
    select '1234john4345 this is a test.' test from dual union all
    select '1234john4345a this is a test' test from dual
); 
```

# iphone - ios - AVAudioPlayer - audioPlayerDidFinishPlaying 有时在剪辑中随机调用

> ID：10327195
> 
> 赞同：0
> 
> 时间：2012-04-26T04:20:30.357
> 
> 标签：iphone, ios, avaudioplayer

我有一个 AVAudioPlayer 正在播放的大约 30 分钟的 mp3 文件。有时，`audioPlayerDidFinishPlaying:successfully`被调用（成功标志设置为 TRUE），即使它只有 5 分钟进入剪辑。它很少发生，但它可以发生在剪辑中的任何位置。

我只注意到当用户按下用户界面上的按钮或移动滑块时会发生这种情况。他们在用户界面上按下按钮的速度越快，它发生的可能性就越大。

任何想法可能导致此问题，或如何解决？

更多信息：一次只播放一种声音。按钮操作不播放声音。AVAudioPlayer 在我的主 ViewController 中本地声明。我在 iPhone 3GS 和 iPhone 4s 上进行了测试。这个问题在 iPhone 4s 上很少发生。在 3GS 上更频繁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:08:08.477

好的，从昨天开始我遇到了同样的问题。不要我们是否有同样的问题，但我会把它扔在这里

在滑块 ValueChanged 事件处理程序中，我尝试根据滑块的新位置更新视图元素。但是在 updateViewMethod 中，我调用了另一个

```
slider.value = self.player.currentTime; 
```

删除它解决了我的问题。

所以简而言之，你的定时器的回调应该更新滑块，但滑块 valuechanged 处理程序不应该重做工作。

# android - 相当于Android中的iOS NSNotificationCenter？

> ID：10327200
> 
> 赞同：16
> 
> 时间：2012-04-26T04:21:11.013
> 
> 标签：android, iphone, ios

Android 中是否有相当于 iOS 类 NSNotificationCenter 的东西？是否有任何库或有用的代码可供我使用？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-26T04:46:51.720

在 Android 中，没有像 ios 中那样的中央通知中心。但是你基本上可以使用[Observable](http://developer.android.com/reference/java/util/Observable.html)和[Observer](http://developer.android.com/reference/java/util/Observer.html)对象来完成你的任务。

您可以像下面这样定义一个类，只需修改它以供单例使用并添加同步以供并发使用，但想法是相同的：

```
public class ObservingService {
    HashMap<String, Observable> observables;

    public ObservingService() {
        observables = new HashMap<String, Observable>();
    }

    public void addObserver(String notification, Observer observer) {
        Observable observable = observables.get(notification);
        if (observable==null) {
            observable = new Observable();
            observables.put(notification, observable);
        }
        observable.addObserver(observer);
    }

    public void removeObserver(String notification, Observer observer) {
        Observable observable = observables.get(notification);
        if (observable!=null) {         
            observable.deleteObserver(observer);
        }
    }       

    public void postNotification(String notification, Object object) {
        Observable observable = observables.get(notification);
        if (observable!=null) {
            observable.setChanged();
            observable.notifyObservers(object);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-20T10:00:20.180

看看 Square 的 Otto 活动巴士：

[http://square.github.com/otto/](http://square.github.com/otto/)

它具有与 NSNotificationCenter 基本相同的功能，但由于注释和静态类型，它更容易遵循事件遵循的组件和路径的依赖关系。它比现有的 Android 广播 API IMO 更易于使用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-06-11T14:55:16.560

我有同样的奇迹..所以我写了这个：

```
public class NotificationCenter {

    //static reference for singleton
    private static NotificationCenter _instance;

    private HashMap<String, ArrayList<Runnable>> registredObjects;

    //default c'tor for singleton
    private NotificationCenter(){
        registredObjects = new HashMap<String, ArrayList<Runnable>>();
    }

    //returning the reference
    public static synchronized NotificationCenter defaultCenter(){
        if(_instance == null)
            _instance = new NotificationCenter();
        return _instance;
    }

    public synchronized void addFucntionForNotification(String notificationName, Runnable r){
        ArrayList<Runnable> list = registredObjects.get(notificationName);
        if(list == null) {
            list = new ArrayList<Runnable>();
            registredObjects.put(notificationName, list);
        }
        list.add(r);
    }

    public synchronized void removeFucntionForNotification(String notificationName, Runnable r){
        ArrayList<Runnable> list = registredObjects.get(notificationName);
        if(list != null) {
            list.remove(r);
        }
    }

    public synchronized void postNotification(String notificationName){
        ArrayList<Runnable> list = registredObjects.get(notificationName);
        if(list != null) {
            for(Runnable r: list)
                r.run();
        }
    }

} 
```

一个用法是：

```
 NotificationCenter.defaultCenter().addFucntionForNotification("buttonClick", new Runnable() {
        @Override
        public void run() {
            Toast.makeText(MainActivity.this, "Hello There", Toast.LENGTH_LONG).show();
        }
    }); 
```

试图使界面尽可能类似于 IOS，但更简单（不需要对象注册）。

希望有帮助:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-20T15:08:37.487

在 Behlül 回答的基础上，我更改了代码以使其更接近 iOS NSNotificationCenter。

另一件事：通知将在主线程上触发

```
package com.oxygen.utils;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import android.os.Handler;

public class NotificationCenter {

//---------------- event type list ---------------------

    public static enum NotificationID{
        IMAGES_CACHE_READY
    } 

//---------------- singelton ---------------------------    

        private static NotificationCenter instance = null;

        private NotificationCenter() { observables = new HashMap<NotificationID, MyObservable>();   }

        public static synchronized NotificationCenter singelton() {
            if (instance == null) {
                        instance = new NotificationCenter ();
            }
            return instance;
        }

//-------------------------------------------

                public class Notification {

                    private Object poster;  // the object that post the event
                    private Object info;    // event specific data 
                    private NotificationID id;      // event name

                    public Notification(Object poster, NotificationID id, Object info) {
                        super();
                        this.poster = poster;
                        this.info = info;
                        this.id = id;
                    }

                    public Object getPoster() {
                        return poster;
                    }

                    public Object getInfo() {
                        return info;
                    }

                    public NotificationID getId() {
                        return id;
                    }
                }
        //-------------------------------------------

                public interface Notifiable {
                    public void onNotification(Notification notify);
                }

//-------------------------------------------

        protected class MyObservable {
            List<Notifiable> observers = new ArrayList<Notifiable>();

            public MyObservable() {
            }

            public void addObserver(Notifiable observer) {
                if (observer == null) {
                    throw new NullPointerException("observer == null");
                }
                synchronized (this) {
                    if (!observers.contains(observer))
                        observers.add(observer);
                }
            }

            public int countObservers() {
                return observers.size();
            }

            public synchronized void deleteObserver(Notifiable observer) {
                observers.remove(observer);
            }

            public synchronized void deleteObservers() {
                observers.clear();
            }

            public void notifyObservers(Notification notify) {
                int size = 0;
                Notifiable[] arrays = null;
                synchronized (this) {
                        size = observers.size();
                        arrays = new Notifiable[size];
                        observers.toArray(arrays);
                }
                if (arrays != null) {
                    for (Notifiable observer : arrays) {
                        observer.onNotification(notify);
                    }
                }
            }
        }

//-------------------------------------------

        HashMap<NotificationID, MyObservable > observables;

        public void addObserver(NotificationID id, Notifiable observer) {
            MyObservable observable = observables.get(id);
            if (observable==null) {
                observable = new MyObservable ();
                observables.put(id, observable);
            }
            observable.addObserver(observer);
        }

        public void removeObserver(NotificationID id, Notifiable observer) {
            MyObservable observable = observables.get(id);
            if (observable!=null) {         
                observable.deleteObserver(observer);
            }
        }

        public void removeObserver(Notifiable observer) {
             for (MyObservable observable : observables.values()) {
                 if (observable!=null) {         
                    observable.deleteObserver(observer);
                }    
            }
        }

        public void postNotification(final Object notificationPoster, final NotificationID id, final Object notificationInfo) {

            final MyObservable  observable = observables.get(id);
            if (observable!=null) {

                // notification post to the maim (UI) thread    
                // Get a handler that can be used to post to the main thread
                Handler mainHandler = new Handler(AppContext.get().getMainLooper());

                Runnable myRunnable = new Runnable() {

                    @Override
                    public void run() {
                        observable.notifyObservers(new Notification(notificationPoster, id, notificationInfo) );
                    }
                };

                mainHandler.post(myRunnable);
            }
        }
} 
```

监听器示例：

```
public class CustomGridViewAdapter extends ArrayAdapter<Category>  implements Notifiable {
    int layoutResourceId;

    public CustomGridViewAdapter(Context context, int layoutResourceId) {
        super(context, layoutResourceId);
        this.layoutResourceId = layoutResourceId;

        loadCategories(false);
        NotificationCenter.singelton().addObserver(NotificationID.IMAGES_CACHE_READY, this);
    }

    public void onDestroy() {
        NotificationCenter.singelton().removeObserver(this);            
    }

    @Override
    public void onNotification(Notification notify) {
        switch (notify.getId()) {
        case IMAGES_CACHE_READY:
            loadCategories(true);
            break;
        }
    }
...
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-06T08:38:18.523

如果您不想使用 Observer - 如果您希望 Fragment 成为您的 Observer，这可能会出现问题，因为您不能扩展一个以上的类 - 您可以使用 google 的 Guava 库（[https://code.google。 com/p/guava-libraries/](https://code.google.com/p/guava-libraries/) ) 用于 "Function" 和 "Multimap" - 虽然您也可以使用 HashMap> 作为 subscibersCollection

并实现这样的事情：

```
 import java.util.Collection;
import com.google.common.collect.ArrayListMultimap;
import com.google.common.base.Function;

public class EventService {

    ArrayListMultimap<String, Function<Object, Void>> subscibersCollection;

    private static EventService instance = null;

    private static final Object locker = new Object();

    private EventService() {
        subscibersCollection = ArrayListMultimap.create();
    }

    public static EventService getInstance() {
        if (instance == null) {
            synchronized (locker) {
                if (instance == null) {
                    instance = new EventService();
                }
            }
        }
        return instance;
    }

    /**
     * Subscribe to the notification, and provide the callback functions in case
     * notification is raised.
     * 
     * @param notification
     *            - notification name
     * @param func
     *            - function to apply when notification is raised
     */
    public void addSubscription(String notification, Function<Object, Void> func) {
        synchronized (subscibersCollection) {
            if (!subscibersCollection.containsEntry(notification, func)) {
                subscibersCollection.put(notification, func);
            }
        }
    }

    /**
     * Remove subscription from notification
     */
    public void removeSubscription(String notification,
            Function<Object, Void> func) {
        synchronized (subscibersCollection) {
            subscibersCollection.remove(notification, func);
        }
    }

    /**
     * raise notification for all its subscribers
     * 
     * @param notification
     *            - notification name
     * @param data
     *            - update data
     */
    public void publish(String notification, Object data) {
        Collection<Function<Object, Void>> observableList = subscibersCollection
                .get(notification);
        for (Function<Object, Void> func : observableList) {
            func.apply(data);
        }
    }
} 
```

# css - IE和FF的区别。颜色

> ID：10327205
> 
> 赞同：0
> 
> 时间：2012-04-26T04:22:05.580
> 
> 标签：css, internet-explorer, firefox

我在下面的 CSS 代码中发现了 IE7 和 FF 的区别：

```
.list-common-wrapper .button-unfixed .button-unfixed-normal[disabled] .button-background, #id-chart-editor-active-event .button-unfixed .button-unfixed-normal[disabled] .button-背景，.three-lists .button-unfixed .button-unfixed-normal[disabled] .button-background {
    背景： url("../images/button/btn_var_bg.gif") 不重复向左滚动 -120px 透明；
    颜色：#777777；
    光标：默认；
    文字装饰：无；
}
list.css（第 122 行）
.list-common-wrapper .button-unfixed .button-unfixed-normal .button-background, #id-chart-editor-active-event .button-unfixed .button-unfixed-normal .button-background, #id-profile -editor-move-attributes-buttons .button-unfixed .button-unfixed-normal .button-background {
    颜色：#333333；
    光标：指针；
}
list.css（第 132 行）
.button-unfixed-normal .button-background {
    背景： url("../images/button/btn_var_bg.gif") 无重复向左滚动 0 透明；
    显示：块；
    填充：2px 8px 4px 12px；
}
button.css（第 111 行）
继承自a.button-unfixed-def #
.list-common-wrapper .button-unfixed .button-unfixed-normal[disabled], #id-chart-editor-active-event .button-unfixed .button-unfixed-normal[disabled], #id-profile-editor -move-attributes-buttons .button-unfixed .button-unfixed-normal[disabled] {
    颜色：#777777；
    光标：默认；
    文字装饰：无；
}
list.css（第 142 行）
.list-common-wrapper .button-unfixed .button-unfixed-def {
    字体大小：12px；
    行高：130%；
}
list.css（第 163 行）
.button-unfixed .button-unfixed-正常 {
    颜色：#333333；
    文字装饰：无；
}
button.css（第 104 行）
.button-unfixed .button-unfixed-def {
    光标：默认；
    字体大小：12px；
    行高：130%；
}
button.css（第 93 行）
一个 {
    颜色：#175DB5；
    文字装饰：下划线；
}

```

它表明颜色 #777777 在 IE7 和 FF 中显示不同（看箭头）：

![在此处输入图像描述](../Images/1473e5fc10da2cf65fb20e77db6e417e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:50:45.360

由于附加了背景图像，您可能会看到差异。

在 IE7 的情况下 - 它根本不支持背景的速记属性。 [http://www.w3schools.com/cssref/css3_pr_background.asp](http://www.w3schools.com/cssref/css3_pr_background.asp)

这需要改变

```
background: url("../images/button/btn_var_bg.gif") no-repeat scroll left -120px transparent; 
```

至：

```
background-image: url('../images/button/btn_var_bg.gif');
background-repeat: no-repeat;
...and so on.... 
```

# php - PHP - 身份验证

> ID：10327210
> 
> 赞同：0
> 
> 时间：2012-04-26T04:22:38.600
> 
> 标签：php, authentication

我现在正在使用身份验证脚本为我的入门 PHP 类做作业。它只需要检查是否设置了 $_SESSION，但是当我将代码植入文件中时，页面只是保持白色。

```
<?php
if (isset($_SESSION['loggedin']) {
echo "<span><a href='http://xxx/php/insert.php' target='_blank'>Add    Item</a></span>
<span><a href='http://xxx/php/update.php' target='_BLANK'>Update Menu</a></span>"; }
else {
echo "<span><a href='xxx/php/login.php' target='_blank'>Add   Item</a></span>";
}
?> 
```

删除代码后，它工作得非常好 - 当然没有应该显示的所需 div

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:26:15.200

这意味着您的会话尚未设置。使用`session_start()`页面顶部的功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T04:26:16.370

您有语法错误。您的`if`陈述缺少一个右括号。

在开发过程中，您应该始终关注 php 错误日志。当它没有直接告诉你哪里出了问题时，它会给你一个强烈的暗示。在这种情况下，您会得到一个解析错误和一个行号，并且很明显出了什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:36:52.107

为了可读性，跳入和跳出 PHP 通常比使用`echo`大量 HTML 更好。

```
<?php if (isset($_SESSION['loggedin']): ?>
    <span><a href='http://xxx/php/insert.php' target='_blank'>Add Item</a></span>
    <span><a href='http://xxx/php/update.php' target='_blank'>Update Menu</a></span>
<?php else: ?>
    <span><a href='xxx/php/login.php' target='_blank'>Add Item</a></span>
<?php endif; ?> 
```

`if():`请注意、`else:`和的替代语法`endif;`。它有助于避免语法错误，并且大多数 IDE 都对混合内容提供了良好的支持。此外，您可以为您的标记属性使用双引号，这虽然只是风格，但通常是首选。

就会话管理而言，`session_start()`就像其他人提到的那样，您应该在每个请求的开头附近的某个地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T05:36:27.547

请先`session_start()`在页面顶部检查。然后

```
<?php
  if (isset($_SESSION['loggedin']) && !empty($_SESSION['loggedin'])) {
    echo "<span><a href='http://xxx/php/insert.php' target='_blank'>Add    Item</a></span>
     <span><a href='http://xxx/php/update.php' target='_BLANK'>Update Menu</a></span>"; }
  else {
        echo "<span><a href='xxx/php/login.php' target='_blank'>Add   Item</a></span>";
     }
   ?> 
```

谢谢

# ruby-on-rails - 如何处理错误“找不到 id=0 的模型”

> ID：10327212
> 
> 赞同：2
> 
> 时间：2012-04-26T04:22:57.737
> 
> 标签：ruby-on-rails, null

从我的实际数据库中抽象出来，我有 Model1 和 Model2 以及 Model1 has_and_belongs_to_many Model2 和 Model2 has_and_belongs_to_many Model1。在注册页面中，我有以下内容：

```
= f.hidden_field :model2_ids 
```

但是，在数据库中没有现有模型 2 的情况下进行注册时，我收到以下错误：

```
"Couldn't find Model2 with id=0" 
```

在参数中，您可以看到：

```
"model2_ids"=>"[]", 
```

我想这评估为 NULL，这就是我得到错误的原因。我怎样才能解决这个问题？

更新：

通过在视图中设置条件，我可以通过没有现有模型 2 或没有设置模型 2_id 的注册来避免这个问题。model2_ids 是通过邀请模型在控制器中设置的，并且在某些注册情况下存在邀请，其中邀请模型指定了模型 2。在一个示例案例中，我在参数中看到：

```
 "model2_ids"=>"[1]", 
```

但是，我得到了同样的错误，并且从服务器日志中得到了这个输出：

```
 Invitation Load (1.2ms)  SELECT "invitations".* FROM "invitations" WHERE "invitations"."token" = '80c98940448829e7edc623f9886e6930434e245c' LIMIT 1
  Model2 Load (51.8ms)  SELECT "model2s".* FROM "model2s" WHERE "model2s"."id" = $1 LIMIT 1  [["id", 0]]
Completed 404 Not Found in 222ms

ActiveRecord::RecordNotFound (Couldn't find Listing with id=0):
  app/controllers/registrations_controller.rb:12:in `create' 
```

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:37:19.083

在控制器中，您可以签入控制器，但如果您的参数看起来像

```
params[model_ids] = "" so query will be   if  params[model_ids] == "" 
```

或者如果你的参数看起来像 \

```
params[model_ids] = [] so query will be   if  params[model_ids] == [] 
```

如果你的参数看起来像

```
params[model_ids] = [""] so query will be   if  params[model_ids] == [""] 
```

现在在控制器中，您可以提供任何条件或使用异常处理来处理此运行时错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:23:45.917

Model1 的对象尚未保存到数据库中，那么如何获取属于 Model1 的 Model2 对象。

如果您正在为用户构建表单

```
<% form_for @user do |f|%>
<% end %> 
```

那么你可能需要一个类似下面的条件

```
unless @user.new_record?
  <%= f.hidden_field :model2_ids %>
end 
```

# ruby-on-rails - Rails 3x 部署错误找不到链轮

> ID：10327214
> 
> 赞同：0
> 
> 时间：2012-04-26T04:22:59.487
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, sprockets

每当我尝试开始一个新的 Rails 项目时，我都会不断收到错误消息。我是 Ruby 的新手，以前从未使用过 Rails。我见过类似的问题，但是我无法扣除为了让框架正常运行而需要更改的内容。

这就是我所处的位置以及我得到的...

```
Mac-Pro:rails beracus$ rails new my_first_app
/Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find sprockets (~> 2.1.2) amongst [RedCloth-4.2.9, actionmailer-3.2.3, actionpack-3.2.3, activemodel-3.2.3, activerecord-3.2.3, activeresource-3.2.3, activesupport-3.2.3, arel-3.0.2, builder-3.0.0, bundler-1.1.3, erubis-2.7.0, hike-1.2.1, i18n-0.6.0, journey-1.0.3, json-1.6.6, mail-2.4.4, mime-types-1.18, multi_json-1.3.2, polyglot-0.3.3, rack-1.4.1, rack-cache-1.2, rack-ssl-1.3.2, rack-test-0.6.1, rails-3.2.3, railties-3.2.3, rake-0.9.2.2, rdoc-3.12, rubygems-bundler-0.9.0, rubygems-update-1.8.23, rvm-1.11.3.3, sprockets-2.4.0, sqlite3-1.3.6, thor-0.14.6, tilt-1.3.3, treetop-1.4.10, tzinfo-0.3.33, yard-0.7.5] (Gem::LoadError)
    from /Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:777:in `block in activate_dependencies'
    from /Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:766:in `each'
    from /Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:766:in `activate_dependencies'
    from /Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:750:in `activate'
    from /Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:780:in `block in activate_dependencies'
    from /Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:766:in `each'
    from /Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:766:in `activate_dependencies'
    from /Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:750:in `activate'
    from /Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems.rb:1232:in `gem'
    from /Users/beracus/.rvm/gems/ruby-1.9.3-p125/bin/rails:18:in `<main>'
Mac-Pro:rails beracus$ 
```

# 回应帕尼瓦尼

Mac-Pro:~ beracus$ ruby​​ -v ruby​​ 1.9.3p125 (2012-02-16 修订版 34643) [x86_64-darwin10.8.0] Mac-Pro:~ beracus$ rails -v /Users/beracus/.rvm/rubies/ ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find sprockets (~> 2.1.2) amongst [RedCloth-4.2.9, actionmailer-3.2.3, actionpack-3.2.3, activemodel-3.2.3, activerecord-3.2.3, activeresource-3.2.3, activesupport-3.2.3, arel-3.0.2, builder-3.0.0, bundler-1.1.3, erubis-2.7.0, hike-1.2.1, i18n-0.6.0, journey-1.0.3, json-1.6.6, mail-2.4.4, mime-types-1.18, multi_json-1.3.2, polyglot-0.3.3, rack-1.4.1, rack-cache-1.2, rack-ssl-1.3.2, rack-test-0.6.1, rails-3.2.3, railties-3.2.3, rake-0.9.2.2, rdoc-3.12, rubygems-bundler-0.9.0, rubygems-update-1.8.23, rvm-1.11.3.3, sprockets-2.4.0, sqlite3-1.3.6, thor-0.14.6, tilt-1.3.3, treetop-1.4.10, tzinfo-0.3.33, yard-0.7.5] (Gem::LoadError) from /Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:777:in`block in activate_dependencies' 来自 /Users/beracus/.rvm/rubies/ruby-1.9.3-p125/ lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:766:in `each' from /Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:766:in`activate_dependencies' 来自 /Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/ rubygems/specification.rb:750:in `activate' from /Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:780:in`block in activate_dependencies' from /Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:766:在`each' from /Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:766:in`/Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:750:in 的 activate_dependencies 中`activate' from /Users/beracus/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems.rb:1232:in`gem' 来自 /Users/beracus/.rvm/gems/ruby-1.9.3-p125/bin/rails:18:in `' Mac-Pro:~ beracus$ rvm -v

rvm 1.13.0（最新）作者 Wayne E. Seguin，Michal Papis [https://rvm.io/]

Mac-Pro:~ beracus$

# statistics - Python多元分析？- 从 3.6M 记录集中的 3-10 记录对中生成唯一 ID？

> ID：10327228
> 
> 赞同：0
> 
> 时间：2012-04-26T04:24:21.357
> 
> 标签：statistics, data-mining, python-2.7, mysql-python, multivariate-testing

我是数据挖掘的新手，对统计数据和 python 不熟悉。

我们有一个问题，我们`case_reports`在 mysql 数据库中有来自某个政府机构的表，其中我们有 1 个或多个字段`id`：`case`，理论上他们说这`case`是唯一的，但可以有多个字段`case`：`id`非常相似但不完全不同其他行字段中的数据，例如`date_rcvd,age,dosage,wt,age,route of administration,submission_type etc`BUT FOR THE SAME PATIENT。

```
 THEORETICALLY 'IDEAL' OF CASE REPORT SET FOR ONE PATIENT

  | id = 55 | case = 1 | age = 20 | source = x    | drug = az | date = p
  | id = 12 | case = 1 | age = null | source = y    | drug = az | date = q
  | id = 11 | case = 1 | age = 20 | source = null | null      | date = g
  | id = 15 | case = 1 | age = 20 | source = z    | drug = z  | date = m

                        THE PROBLEM SET EXAMPLE FOR ONE PATIENT

  | id = 55 | case = 1 | age = 20   | source = x       | drug = az    | date = p
  | id = 12 | case = 2 | age = 20   | source = y    | drug = az     | date = q
  | id = 55 | case = 1 | age = 20   | source = null   | null         | date = g
  | id = 55 | case = 1 | age = null | source = x    | drug = az   | date = null 
```

我们只是希望能够通过某种聚类方法对 unique_id 进行 GROUP BY，因此我们最终在查询案例 id 时得到单个结果而不是 4 个结果，我可以使用大约 12 个其他字段进行匹配。

`case`= 据称是唯一的患者病例 rpt，随着病例的发展和记录，它们可以持续进行。 `id`= parameter_id 链接到与之相关的其他表`case`

再次在理论中“他们”说这些多`case`条记录应该至少有一个不同的`id`数字，但如果它们没有：“”只需使用`id`最新的`process_date`并使用它和`DELETE id,case < recent and that 'will probably be the correct one leaving the proper`案例`“” - 不放心：那个案例可以来自不同的报告来源，来自电子提交的重复提交以及备份邮寄报告，或反映来自该 id:case 的不同报告来源的后续病例报告。

我在考虑某种 k 均值聚类方法？

任何资源、代码示例链接、启动策略都会受到赞赏，通常不能期望整个答案神奇地只是寻找一种方法来开始。

我已经形成了`CASE`几个人独有的零假设，`ids`并定义了问题并收集了数据来证明我的零假设，即许多独特的`id`链接与许多独特的联系`ids`——这是他们过时的、资金不足的处理/报告系统的公认缺陷。数据是专有的，否则我会分享更多。

```
**UPDATED EXAMPLE DATA @idris IGNORE ABOVE EXAMPLE**

+---------+---------+----------+----------+----------+----------+----+-----+----------+
| id      | case    | date     | rept_dt  | mfr_dt   | foll_seq | wt | age | gndr_cod |
+---------+---------+----------+----------+----------+----------+----+-----+----------+
| 4610164 | 3118662 | 20050314 | 20050311 | 20050301 | 2        |  0 |  51 | M        |
| 4622120 | 3118662 | 20050322 | 20050321 | 20050314 | 3        |  0 |  0  | M        |
| 4622120 | 3118662 | 20050329 | 20050325 | 20050314 |          |  0 |  51 | M        |
| 4802410 | 3118662 | 20051013 | 20051012 | 20051004 | 5        |  0 |  51 | M        |
+---------+---------+----------+----------+----------+----------+----+-----+----------+ 
```

最好的，

科林

# wordpress - 如何在 wp_tag_cloud 中显示特定类别名称

> ID：10327230
> 
> 赞同：0
> 
> 时间：2012-04-26T04:25:07.480
> 
> 标签：wordpress, taxonomy, tag-cloud

正常`wp_tag_cloud`情况下按分类显示**标签云**，但似乎不支持过滤排除类别。标签除外。

有什么方法可以显示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:33:28.017

也许这

```
$args = array('taxonomy' => 'category' );
 wp_tag_cloud( $args ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:26:28.910

如果您想使用插件执行此操作，这可能会对您有所帮助

1.  [http://wordpress.org/extend/plugins/sensitive-tag-cloud/](http://wordpress.org/extend/plugins/sensitive-tag-cloud/)
2.  [http://wordpress.org/extend/plugins/sensitive-tag-cloud/](http://wordpress.org/extend/plugins/widget-category-cloud/)
3.  [http://thedeadone.net/download/tdo-tag-fixes-wordpress-plugin/](http://thedeadone.net/download/tdo-tag-fixes-wordpress-plugin/)

# css - 在 Twitter Bootstrap 中定位 div 整个视口宽度

> ID：10327231
> 
> 赞同：3
> 
> 时间：2012-04-26T04:25:07.737
> 
> 标签：css, positioning, twitter-bootstrap

您如何在 Bootstrap 中设置 div 的样式以跨越视口的整个宽度（没有固定定位）在“行”和“跨度”的正常 12 网格系统中？

在 Bootstrap 源码中，`navbar-fixed-top`该类使用固定的位置`left`和`right`属性来实现此效果：

```
.navbar-fixed-top,
.navbar-fixed-bottom {
  position: fixed;
  right: 0;
  left: 0;
  z-index: 1030;
  margin-bottom: 0;
} 
```

但是，无论滚动如何，此导航栏都会保留在窗口中。在没有固定定位的情况下实现相同的视口整个宽度需要哪些样式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T13:40:04.140

您可以通过将`body`and`html`标记的高度和宽度拉伸 100%，然后将子 div 定义为相同的宽度来获得该​​效果。我们这样做是因为宽度和高度是相对的，所以如果我们定义一个宽度/高度为 100% 的 div，它只会拉伸到`body`and`html`标签。看看这个例子：

```
html, body {
    width:100%;
    height:100%;
}

body {
    padding-top:60px;
}

.wrapper {
    height: 100%;
    width: 100%;
}

.huge {
    width:100%;
    height:100%;
    background-color:#eee;
} 
```

[演示](http://jsfiddle.net/BYLVK/1/show/)，[在这里](http://jsfiddle.net/BYLVK/1/)编辑。

**注意**`.huge`：由于`padding-top`添加到主体以为顶部导航栏让路，因此向div的主体添加了一些额外的高度，如果删除该填充，它将成为“真实”的 100% 高度而不是 100% 高度 +现在的前 60px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T16:25:56.083

如果您想利用 Bootstrap 3 网格并构建全宽布局（将行拉伸到整个视口宽度），您应该考虑两件事：

1.  Bootstrap 的`.row`类将 margin 属性设置为：`margin: 0 -15px;`。
2.  网格内容[应包含在包含元素](http://getbootstrap.com/css/#grid)中以抵消上述边距。

## CSS

```
.container-full-width {
    padding: 0 15px; /* Offset .row's margin */
    width: 100%;
}
/* Optional. See comment below. */
.row {
    padding-left: 70px;
    padding-right: 70px;
} 
```

## HTML

```
<body>
  <div class="container-full-width">
    <div class="row">
      ...
    </div>
  </div>
...
</body> 
```

请记住，`.row`元素没有边距，但可以通过覆盖`.row`类的填充属性并设置预期边距来修复它。

或者，您可以考虑覆盖`.row`类并偏移边距值，但这需要为不同的媒体/设备类型设置不同的值。

值得检查它是否同样适用于 Bootstrap 2。

# asp.net - 如何在带有下载选项的网页上显示上传的文件？

> ID：10327234
> 
> 赞同：0
> 
> 时间：2012-04-26T04:25:15.443
> 
> 标签：asp.net

我正在使用文件上传控件上传文件。成功上传后，当我查看该页面时，我想在页面上显示该上传的文件，该页面也可以选择下载它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:57:41.410

只需设置带有扩展名的路径和文件名，仅此而已。

```
 <a id="A1" href='path/filename' runat="server" target="_blank">
      <asp:Label ID="lblFileName" runat="server" Text='filename'>
       </asp:Label>
      </a> 
```

# python - 从python中的循环将值附加到单个列表或数组

> ID：10327235
> 
> 赞同：1
> 
> 时间：2012-04-26T04:25:27.217
> 
> 标签：python, arrays, for-loop, numpy, append

```
import numpy as np
import itertools
a = np.array([[1, 1, 3, 0, 0, 3, 2], [1, 3, 0, 0, 0, 3, 2], [1, 1, 10, 0, 0, 1, 0]])
for row in a:
    sites = a.shape[0]
    species = a.shape[1]
    Chao = []
    sing = np.where(row == 1, 1, 0)
    doub = np.where(row == 2, 1, 0)
    spec = np.where(row > 0, 1, 0)
    F1 = (sum(sing))**2
    F2 = float((sum(doub)))*2
    Sobs = sum(spec)
    if F2 == 0:
        Ch = Sobs
    else:
        Ch = Sobs + (F1/F2)
    Chao.append(Ch)
    print Chao 
```

当我打印 Chao 时，这个循环的产品我目前有这个：

[7][4.5][4]

但是，我想要一个看起来像这样的数组或列表：

([7][4.5][4])

numpy 或 list 中的哪些函数允许我在 python 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:34:14.877

逻辑是正确的。Chao 列表应该在循环之外初始化。

# php - 正则表达式新手需要一个模式来匹配特定的字符串模式

> ID：10327241
> 
> 赞同：1
> 
> 时间：2012-04-26T04:26:04.867
> 
> 标签：php, regex

嗨，我正在尝试匹配搜索字符串，以便如果我们的邮政编码位于字符串的开头，则返回邮政编码的匹配项以及字符串的其余部分。这就是我到目前为止所拥有的

```
$str = "90210 Beverly Hills, CA";
$res = preg_match('/^((\d{5})(-\d{4})?)\s+(.+?)$/', $str, $matches); 
```

但是当我 print_r 匹配时，它会返回一个额外的空间键。

```
Array
(
    [0] => 90210 Beverly Hills, CA
    [1] => 90210
    [2] => 90210
    [3] =>
    [4] => Beverly Hills, CA
) 
```

无论如何我可以改进模式并返回不是空字符串的匹配项吗？这个实例有更好的模式吗？此外，如果只给出一个邮政编码或一个文本字符串，它将返回 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:33:29.680

```
^((\d{5})?(.*+))$ 
```

[http://rubular.com/r/bZJe4p1k9O](http://rubular.com/r/bZJe4p1k9O)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:38:16.560

您的匹配组 3 不是空格。它是空的（或者可能是未定义的或其他东西 - 我没有深入参与 PHP）。空值表示与可选组`(-\d{4})`(US ZIP+4) 不匹配。我想你会想要保持你的表情不变，这样你就可以很容易地检测到没有 ZIP+4 的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:39:55.413

答案是*否定*的。对模式括号的目视检查表明第四个匹配项是 -1234 （四个额外的邮政编码——不知道它们的正式名称），在你的示例中，它是空的。您的问题有点不清楚您想要实际捕获什么。我会留下一个你可能会觉得有用的构造：

```
(?: ...) 
```

如果您有`?:`括号，则表示不应进行捕获。您可以在“破折号四位数”子模式之前添加它，它不会被添加到`matches`.

# jquery - 在 html 正文中附加一个巨大的图像时显示一个预加载器图像

> ID：10327242
> 
> 赞同：0
> 
> 时间：2012-04-26T04:26:10.600
> 
> 标签：jquery, load, append, preloader

在 html 正文中附加一个巨大的图像之前，我需要显示一个预加载器图像。在我的脚本中，只有在完成加载后，鼠标悬停事件才会显示带有图像的工具提示。图像需要很长时间才能完成。同时我想在页面上显示一些东西。

```
this.screenshotPreview = function(){    
xOffset = 10;
yOffset = 30;
$('a.screenshot').hover(function(e){
    this.t = this.title;
    this.title = '';    
    var c = (this.t != '') ? '<br/>' + this.t : '';
    $('body').append('<p id="screenshot"><img src="images/image.png" alt="Url preview" />'+ c +'</p>');
    $('#screenshot')
    .css('top',(e.pageY - xOffset) + 'px')
    .css('left',(e.pageX + yOffset) + 'px')
    .fadeIn('fast');                        
},
function(){
   this.title = this.t; 
   $('#screenshot').remove();
}); 
$('a.screenshot').mousemove(function(e){
    $('#screenshot')
    .css('top',(e.pageY - xOffset) + 'px')
    .css('left',(e.pageX + yOffset) + 'px');
});         
};

// starting the script on page load
$(document).ready(function(){
screenshotPreview();
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:38:49.353

请在此 div #screenshot 上设置预加载器背景图像，

当这个 div 附加时，BG 将在显示 IMG 巨大图像之前显示

# android - c2dm 将应用程序 ID 返回为 null

> ID：10327246
> 
> 赞同：1
> 
> 时间：2012-04-26T04:26:34.913
> 
> 标签：android, android-c2dm

我是 android 新手，我在实现推送通知时遇到问题。

正如我阅读的教程中所述，我在 c2dm 中注册并获得了 Auth 令牌，然后在 UrbanAirShip 中注册，使用包 xxxx，获得了应用程序密钥和秘密。

我的项目团队最初使用 API 2.1，当时我通过氦气传输在设备和模拟器中获得了 AppId。

然后我们将API更改为2.2，当时我再次使用另一个发件人ID在c2dm中注册，获得了Auth token，并再次使用新帐户在UrbanAirShip中注册，获得了密钥和秘密。

对于通过 c2dm 传输的前几次尝试，我得到了 AppId，然后在设备和模拟器中我只得到了 null，错误如下所示，

我不知道出了什么问题，无论是 API 级别的更改，还是 c2dm 中的多个发件人 id 注册，或者 UrbanAirShip 中的多个注册相同的包名或卸载次数太多。我已添加 Manifest 文件和 Application 的 oncreate 方法，请指导我取回 AppId。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="xxxx"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.UPDATE_DEVICE_STATS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" >
    </uses-permission>
    <uses-permission android:name="com.android.vending.BILLING" />
    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.RECORD_VIDEO" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.SEND_SMS" />    
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
    <uses-permission android:name="android.permission.VIBRATE"/>

     <!-- REQUIRED for C2DM  -->
    <!-- Only this application can receive the messages and registration result -->
    <permission android:name="xxxx" android:protectionLevel="signature" />
    <uses-permission android:name="xxxx.permission.C2D_MESSAGE" /> 
    <!-- This app has permission to register and receive message -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" />

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="10" />

    <application
        android:icon="@drawable/logo"
        android:label="@string/app_name"
        android:name="xx"
        android:debuggable="true"
        android:allowClearUserData="true"
        android:enabled="true" >

        <activity
            android:label="@string/app_name"
            android:name=".activities.SplashActivity"
            android:screenOrientation="portrait" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
....
<!-- REQUIRED -->
        <receiver android:name="com.urbanairship.CoreReceiver">
            <!-- REQUIRED IntentFilter - For Helium and Hybrid -->
            <intent-filter>
              <action android:name="android.intent.action.BOOT_COMPLETED" />
              <action android:name="android.intent.action.ACTION_SHUTDOWN" />
            </intent-filter>
        </receiver>

        <!-- REQUIRED for C2DM and Hybrid -->
        <receiver android:name="com.urbanairship.push.c2dm.C2DMPushReceiver"
                android:permission="com.google.android.c2dm.permission.SEND">
          <!-- Receive the actual message -->
          <intent-filter>
              <action android:name="com.google.android.c2dm.intent.RECEIVE" />
              <category android:name="xxxx" />
          </intent-filter>
          <!-- Receive the registration id -->
          <intent-filter>
              <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
              <category android:name="xxxx" />
          </intent-filter>
        </receiver>

        <!-- REQUIRED -->
        <!-- The 'android:process' parameter is optional. Set it to a value starting
            with a colon (:) to make it run in a separate,
            private process -->
        <service android:name="com.urbanairship.push.PushService"
                android:process=":com.urbanairship.push.process"/>

        <!-- OPTIONAL, if you want to receive push, push opened and registration completed intents -->
        <receiver android:name="xxx.push_notifications.IntentReceiver" />

        <service android:name="xxx.inapp.BillingService" />

        <receiver android:name="xxx.inapp.BillingReceiver" >
            <intent-filter >
                <action android:name="com.android.vending.billing.IN_APP_NOTIFY" />
                <action android:name="com.android.vending.billing.RESPONSE_CODE" />
                <action android:name="com.android.vending.billing.PURCHASE_STATE_CHANGED" />
            </intent-filter>
        </receiver>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:31:33.397

在模拟器中运行时会出现问题。您需要在设备中运行它（并且应该设置 Gmail 帐户 - 否则会出现错误）。此外，它应该是 2.2+。仅 2.2+ 设备支持推送。将 minSDK 版本更改为 2.2 并在设备中试用。它会起作用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:55:04.247

您需要确保您使用的是您想要的 SDK 的“google api”版本，并且还需要有一个启用市场的有效 google 帐户。这是 c2dm 的要求。

# jquery - 你能告诉我这是不是坏了？Jquery UI .soretable()“sortout”在“sortreceive”触发之前不会触发

> ID：10327247
> 
> 赞同：0
> 
> 时间：2012-04-26T04:26:36.900
> 
> 标签：jquery, events, drag, portlet, jquery-ui-sortable

当拖动门户离开列时，我期待“sortout”事件触发。“sortover”事件按预期触发。我不确定这是它应该工作的方式还是 jquery UI 被破坏。

这是演示代码[http://jsfiddle.net/kY7SV/6/](http://jsfiddle.net/kY7SV/6/) 将所有 portlet 拖出列，它应该会折叠。将 portlet 拖到折叠的列上，它应该会展开。

帮助表示赞赏

为 Merlyn 编辑重要的部分：

```
<ul id="sm" class="sm">
    <li id=list1><div style="background-color:red">1</div>
        <div class="column" id='col1'>
            <div class="portlet">
                <div class="portlet-header">Feeds</div>
                <div class="portlet-content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit</div>
            </div>
            <div class="portlet">
                <div class="portlet-header">News</div>
                <div class="portlet-content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit</div>
            </div>
        </div>
    </li>
    <li id=list2><div style="background-color:yellow">2</div>
        <div class="column" id='col2'>
            <div class="portlet">
                <div class="portlet-header">Shopping</div>
                <div class="portlet-content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit</div>
            </div>
            <div class="portlet">
                <div class="portlet-header">Messages</div>
                <div class="portlet-content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit</div>
            </div>
        </div>
    </li>
    <li id=list3><div style="background-color:blue">3</div>
        <div class="column" id='col3'>
            <div class="portlet">
                <div class="portlet-header">Links</div>
                <div class="portlet-content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit</div>
            </div>
            <div class="portlet">
                <div class="portlet-header">iMAGES</div>
                <div class="portlet-content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit</div>
            </div>
        </div>
    </li>
</ul>
​
$(function() {
    $(".column").sortable({
        connectWith: ".column"
    });

    $(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick'></span>").end().find(".portlet-content");

    $(".portlet-header .ui-icon").click(function() {
        $(this).toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick");
        $(this).parents(".portlet:first").find(".portlet-content").toggle();
    });

    $(".column").disableSelection();

    $(".column").bind("sortremove", function(event, ui) {
        var listitem = $(this).parents('li');
        var cnt = $(this).children().length;
        if (cnt < 1) {
            $(listitem).css('maxWidth', '25px');
        }
    });

    $(".column").bind("sortover", function(event, ui) {
        var listitem = $(this).parents('li');
        $(listitem).css('maxWidth', '');
    });

    $(".column").bind("sortout", function(event, ui) {
        var listitem = $(this).parents('li');
        var cnt = $(this).children().length;
        if (cnt < 1) {
            $(listitem).css('maxWidth', '25px');
        }
    });

    $(".column").bind("sortreceive", function(event, ui) {
        var listitem = $(this).parents('li');
        $(listitem).css('maxWidth', '');
    });

});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:52:32.193

### 问题

问题是您选择了错误的项目。`li`总是包含两个孩子： text和`div`container `div`。它不直接包含您的项目。

`ui.sender`不过，似乎直接给出了来源`li`。您可以调用`$(ui.sender).children().count`以获取要拖出的列的计数。

在进行拖动时，事件期间的子计数`out`将始终为或更多，并且仅当触发触发时计数才会为。这可能与事件触发的时间有关，或者在拖动时它可能会留下某种占位符元素。`1``0`

### 建议的解决方案

我建议重新考虑演示，至少在`out`事件方面。确定您何时*仍在拖动*以及何时从该事件内部*完成拖动是一个棘手的逻辑。*`out`在你拖动东西时留下一个大的放置目标也是一个很好的 UI 设计。

和事件有更明显的计数`remove`。`receive`我会坚持调整这些事件的大小。

### 我是怎么想出来的

我打开了我的 javascript 控制台（浏览器中的 F12），并在`out`事件中插入了一个控制台写入语句。在 chrome 上，这是`console.out(...item to log here...)`. 我玩弄了各种可用的对象（`this`、`event`、`ui`），并检查了`outerHTML`它们的各种 HTML 元素属性。

一旦你弄清楚如何选择正确的元素，找出问题的计数部分的简单方法是用当前子计数更新元素的文本。然后你会看到它按列实时更新。我正在登录，并注意到它永久卡在`2`，这使我了解到选择了错误的元素这一事实。

### 笔记

我无法弄清楚所有属性`this`应该是什么，并且它们似乎随着时间而变化。 [该文档](http://jqueryui.com/demos/sortable/#event-out)没有太大帮助。如果我对 JavaScript 事件（一般而言）有更多了解，这可能有助于我弄清楚:)

# tsql - 将相关行分成组

> ID：10327252
> 
> 赞同：2
> 
> 时间：2012-04-26T04:27:24.000
> 
> 标签：tsql

我有一些已证明难以处理的遗留产品数据。产品可以与 1、2 或 3 个部件一起出售，并且系统的设计方式是，订购产品的部件 2 和 3 只是该产品第一行之后的后续行。

这是一些示例数据....

```
----------------------------------------------------------
OrderId     Sku     Type     Row_Id   OtherColumns...
----------------------------------------------------------
123         001     Double   0        Other stuff..
123         001     Double   1        Other stuff..
123         001     Double   2        Other stuff..
123         001     Double   3        Other stuff..
123         002     Single   4        Other stuff..
123         003     Triple   5        Other stuff..
123         003     Triple   6        Other stuff..
123         003     Triple   7        Other stuff..
123         001     Double   8        Other stuff..
123         001     Double   9        Other stuff..
123         002     Single   10        Other stuff..
123         002     Single   11        Other stuff..
123         002     Single   12        Other stuff..
123         002     Single   13        Other stuff.. 
```

旧软件 (VB) 通过遍历行并在循环时向前看，从行中获取所需的信息，然后跳过它们来处理这个问题。

快进 8 年……我在新工作中继承了这个系统，并从头开始重写了这个系统。我遇到的问题是将旧数据转换为我的新格式。

我正在寻找一种方法来选择相同的数据，并按适当的段号对其进行分区。我使用 RANK() OVER(PARTITION BY) 没有成功。我想我只是做得不对。

理想情况下，我希望能够生成如下所示的结果集：（注意 Segment 列）

```
-------------------------------------------------------------------
OrderId     Sku     Type     Row_Id     Segment   OtherColumns...
-------------------------------------------------------------------
123         001     Double   0          1         Other stuff..
123         001     Double   1          2         Other stuff..
123         001     Double   2          1         Other stuff..
123         001     Double   3          2         Other stuff..
123         002     Single   4          1         Other stuff..
123         003     Triple   5          1         Other stuff..
123         003     Triple   6          2         Other stuff..
123         003     Triple   7          3         Other stuff..
123         001     Double   8          1         Other stuff..
123         001     Double   9          2         Other stuff..
123         002     Single   10         1         Other stuff..
123         002     Single   11         1         Other stuff..
123         002     Single   12         1         Other stuff..
123         002     Single   13         1         Other stuff.. 
```

理想情况下，我想避免使用游标或循环。我将使用查询来迁移从多个表派生的数百万条记录。

在此先感谢您的帮助。

**编辑** 我已经更新了示例数据，以表明我确实有需要隔离的背靠背组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T05:45:00.857

```
select OrderId,
       Sku,
       Type,
       Row_Id,
       (row_number() over(partition by Type order by Row_Id) - 1) %
        case Type
          when 'Single' then 1
          when 'Double' then 2
          when 'Triple' then 3
        end + 1
from YourTable
order by Row_Id 
```

[SQL小提琴](http://sqlfiddle.com/#!6/e38d3/3)

# c - C 编程 - 分析一行

> ID：10327253
> 
> 赞同：-2
> 
> 时间：2012-04-26T04:27:40.830
> 
> 标签：c

如果我有 3 个来源，如“ab c”，如何将 a 与 b 与 c 分开？

```
struct target *t = target_start;
    char *source_start = p_colon+1;
    while (*source_start == ' ' || *source_start == '\t')
      { source_start++; }
    char *source_end = source_start;
    while (*source_end == ' ' || *source_end == '\t')
      { source_end--; }
    char *p_space = strchr(source_start,' ');
    //while(p_space != NULL)

//list_sources_append(&sources, source_start);
list_targets_append(&sources, t->source = source_start);
source_end++;
*source_end = '\0'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T04:30:39.223

查找 strtok() 函数以将字符串分解为一系列标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T04:41:21.653

假设文件名由空格分隔，并且不包含任何空格，最简单的方法可能是`sscanf(input, "%s %s %s", a, b, c);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-18T08:11:15.010

使用 isspace()，应该可以。

# c# - 将列表中的记录传递到组合框，然后解析其中的一部分以将值返回给方法

> ID：10327257
> 
> 赞同：0
> 
> 时间：2012-04-26T04:28:14.677
> 
> 标签：c#, winforms, linq

这里有三个要素。

1.  带有一堆方法的旅行费用清单
2.  Windows 窗体（tripChoose 是一个组合框，listExpenses 是一个列表框）
3.  对象本身（旅行费用）

我只想将 e.Trip 传递给“ToFind”方法。相反，整个字符串被传递。我只需要以某种方式解析出 e.Trip。有任何想法吗？我仍然希望在组合框中同时显示金额和行程，但我只需要 e.Trip 即可传递给该方法。见下文：

在表格中，我有这个

```
private void LoadExpenseListSums()
{
    expenseTotalSelect.Items.Clear();
    var dateSorted =
        from e in roster
        group e by e.Trip into tripGroup
        select new { Trip = tripGroup.Key, SumAmount = tripGroup.Sum(e => e.Amount) };
    foreach (var e in dateSorted)
        tripChoose.Items.Add(string.Format("{0} | ${1}", e.Trip, e.SumAmount));
}

private void tripChoose_SelectedIndexChanged(object sender, EventArgs e)
{
    listExpenses.Items.Clear();
    tripTextBox.Clear();
    descriptionTextBox.Clear();
    amountTextBox.Clear();
    paymentMethodTextBox.Clear();
    noteTextBox.Clear();
    IEnumerable<TripExpense> selectedExpenses = roster.ToFind((string)tripChoose.SelectedItem);
    foreach (TripExpense item in selectedExpenses)
        listExpenses.Items.Add(item);            
} 
```

LoaExpenseListSums 发生在加载表单时，我希望 e.Trip`roster.ToFind((string)tripChoose.SelectedItem);`成为传递给此方法的唯一部分

```
 public IEnumerable<TripExpense> ToFind(string trip)
    {
        return this.Where(e => e.Trip == trip);
    } 
```

如果 LoadExpenseListSums 被这样重写，它工作正常：

```
 private void LoadExpenseListSums()
        {
            expenseTotalSelect.Items.Clear();
            var dateSorted =
                from e in roster
                group e by e.Trip into tripGroup
select new { Trip = tripGroup.Key };
            foreach (var e in dateSorted)
                tripChoose.Items.Add(e.Trip);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:19:35.607

我看到你正在这样做：

```
foreach (var e in dateSorted) 
    tripChoose.Items.Add(string.Format("{0} | ${1}", e.Trip, e.SumAmount)); 
```

然后，你想完成这个：

```
roster.ToFind((string)tripChoose.SelectedItem); 
```

但是，当您完成 ToFind 事情时，您希望它只需要 e.Trip，而不是 e.SumAmount。

现在，假设我写的是你要求的东西，你可以做一些简单的事情......

首先，请确保`string.Format("{0} | ${1}", e.Trip, e.SumAmount)`按照您在此处的内容编写。然后可以`tripChoose.SelectedItem`根据|删除不需要的部分 格式的字符。作为一个想法，您可以像这样使用 for：

```
string myItem = (string)tripChoose.SelectedItem;
int removingIndex;
for (int i = 0; i < myItem.Length; i++)
{
    if (myItem[i] == '|')
    {
        removingIndex = i;
        i = myItem.Length;
    }
}
myItem.Remove(removingIndex); 
```

这是最好的方法吗...？不，但这是基本思想。

现在，您可以使用只有 e.Trip 部分`roster.ToFind`的字符串。`myItem`

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:54:55.463

我想采取一些不同的方法来做到这一点。

声明一个临时类。

```
 public class tempTrip
  {
       public string Trip;
       public string dispText { get; set;} 
  } 
```

现在更改 LoadExpenseListSums() 函数

```
 private void LoadExpenseListSums() 
 {     expenseTotalSelect.Items.Clear();     
        var dateSorted =         
                     from e in roster        
                     group e by e.Trip into tripGroup         
                      select new  tempTrip 
                       { Trip = tripGroup.Key, dispText = string.Format("{0} | ${1}",  tripGroup.Key, tripGroup.Sum(e => e.Amount)).Tostring() };     

          tripChoose.DisplayMember =  "dispText";
          tripChoose.DataSource = dateSorted.ToList<tempTrip>();       
} 
```

现在在 tripChoose_SelectedIndexChanged ，你可以写

```
 IEnumerable<TripExpense> selectedExpenses = roster.ToFind(((tempTrip)tripChoose.SelectedItem).Trip); 
 // this will give you Trip from the selected item. 
```

# sql - 查询多个数据库服务器？

> ID：10327258
> 
> 赞同：0
> 
> 时间：2012-04-26T04:28:15.693
> 
> 标签：sql

我正在为监控应用程序开发数据库，​​并且整理了所有业务逻辑。一切都很好，但其中一个要求是监控数据要完全独立。

我在我的网络服务器上使用本地数据库来做一些事件处理和缓存通知。由于我的监控数据库上每个系统都有一个事件行，因此很容易获取 id 并在需要时查询监控数据，并且由于这只是我的 Web 服务器使用的东西，因此可以在外部强制执行完整性。查询也不是问题，因为所有关系都是一对一的，因此非常简单。

我的问题来自用户管理。我最初的计划是将它放在另一个数据库上（以满足单独保留监控数据库的要求），但我认为当我想到这一点时我并没有直截了当地思考。我可以很容易地获取用户可以访问的系统的所有 ID，但是我怎样才能有效地将其传递给另一个数据库上的查询呢？有解决方案吗？制作一串 ors 似乎是一个丑陋且有问题的解决方案。

我想这种问题不是很常见吗？当必须集成不同的数据库服务器时，大多数开发人员会怎么做？无论如何，我倾向于只是说服我的雇主将用户管理数据放在同一个数据库中，但我想知道这种事情是否可以完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T04:34:40.467

有几种方法可以完成您的目标：

*   使用链接服务器等概念（SQL Server - [http://msdn.microsoft.com/en-us/library/ms188279.aspx](http://msdn.microsoft.com/en-us/library/ms188279.aspx)）

*   前端驱动数据库层的单个连接字符串

*   使用复制之类的东西来复制数据

此外，单个数据库服务器实例上的多个数据库的概念似乎不会违反您的业务需求，我以您提供的详细信息为起点进行调查。

# matlab - 多步预测神经网络

> ID：10327260
> 
> 赞同：0
> 
> 时间：2012-04-26T04:28:45.850
> 
> 标签：matlab, machine-learning, neural-network, time-series, nntool

我一直在使用 matlab 神经网络工具包。这里我使用的是 NARX 网络。我有一个数据集，其中包含一个对象的价格以及一段时间内购买的对象的数量。本质上，该网络进行一步预测，其数学定义如下：

y(t)= f (y(t -1),y(t -2),...,y(t -ny),x(t -1),x(t -2),..., x(t -nx))

这里 y(t) 是时间 t 的价格，x 是金额。所以我使用的输入特征是价格和数量，目标是时间 t+1 的价格。假设我有 100 条此类交易的记录，每笔交易都包含价格和金额。那么基本上我的神经网络可以预测第 101 笔交易的价格。这适用于一步预测。但是，如果我想进行多步预测，比如说我想预测 10 笔交易（第 110 笔交易），那么我假设我对价格进行一步预测，然后将其反馈到神经网络中。我一直这样做，直到达到第 110 个预测。但是，在这种情况下，在我预测了第 101 个价格之后，我可以将此价格输入神经网络以预测第 102 个价格，但是，我不知道第 101 笔交易的物品数量。我该怎么做？我正在考虑将我的目标设置为比当前交易多 10 笔交易的交易价格，这样当我预测第 101 笔交易时，我实际上是在预测第 110 笔交易的价格。这是一个可行的解决方案，还是我以完全错误的方式解决这个问题。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T06:55:08.743

与科斯塔斯所说的类似，一旦你有了预测的 101 价格，你就可以使用所有数据来预测 101 的数量，然后用它来预测 102 的价格，然后使用 102 的价格来预测 102 的数量，等等。但是，这加剧了您对每个变量的预测中的任何错误。为了缓解这种情况，您可以添加其他几个功能，例如对过去值的逐渐减少的折扣或在预测中使用的误差度量（在强化学习领域搜索[时间差异学习以寻找类似的想法）。](http://webdocs.cs.ualberta.ca/~sutton/papers/sutton-88.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:49:42.970

我想你可以使用一个单独的神经网络对 x 进行时间序列预测，以便产生 x(t+1) 直到 x(t+10)，然后使用这些值来提供另一个 ANN 来预测 y(t)。

# ios - 在没有 UIWebView 或 MPMoviePlayer 的情况下播放 .mov 文件

> ID：10327261
> 
> 赞同：1
> 
> 时间：2012-04-26T04:28:48.850
> 
> 标签：ios, xcode, ios4, uiwebview, mpmovieplayercontroller

我正在尝试播放带有 .mov 扩展名的视频文件。它没有在我的 MPMoviePlayerController 中播放视频。我需要在我的应用程序中播放这种类型的文件。是否可以在不使用 MPMoviePlayerController 或 UIWebView 的情况下播放视频文件？

请任何人在这个问题上建议我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:48:55.167

我以前从未直接使用过它，但请看一下[AVPlayer Class Reference](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009530)。

在“概览”下，您将看到：

> 您使用 AVPlayer 对象来实现控制器和用户界面以进行单项或多项播放。多项目案例支持高级行为。

如果您查看[AV Foundation 编程指南（在此处链接）](https://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40010188)，您会看到 Apple 在 AV 基础上构建了媒体播放器。

# r - 酒吧上方的注释：

> ID：10327267
> 
> 赞同：11
> 
> 时间：2012-04-26T04:30:23.467
> 
> 标签：r, ggplot2

ggplot 中闪避的条形图再次让我难过。几周前，我询问了有关在栏上注释文本的问题（[链接](https://stackoverflow.com/questions/9815226/annotate-values-above-bars-ggplot-faceted)），并得到了很好的使用响应`+ stat_bin(geom="text", aes(label=..count.., vjust=-1))`。我想，既然我已经有了计数，我将只提供它们，而不是`..`之前和之后，我告诉`stat_bin`那`position`是`dodge`。它将它们排列在组的中心并上下调整。应该是小事。请帮我把文字越过栏。

![在此处输入图像描述](../Images/445963671b4a84775e3665b88e852a9a.png)

```
mtcars2 <- data.frame(type=factor(mtcars$cyl), 
    group=factor(mtcars$gear))
library(plyr); library(ggplot)
dat <- rbind(ddply(mtcars2,.(type,group), summarise,
    count = length(group)),c(8,4,NA))

p2 <- ggplot(dat,aes(x = type,y = count,fill = group)) + 
    geom_bar(colour = "black",position = "dodge",stat = "identity") +
    stat_bin(geom="text", aes(position='dodge', label=count, vjust=-.6)) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T04:45:39.497

我无法让位置闪避对齐，所以我最终创建了一个 position_dodge 对象（这是正确的术语吗？），将其保存到一个变量中，然后将其用作两个几何图形的位置。~~有点令人生气的是，他们似乎仍然有点偏离中心。~~

```
dodgewidth <- position_dodge(width=0.9)
ggplot(dat,aes(x = type,y = count, fill = group)) + 
  geom_bar(colour = "black", position = dodgewidth ,stat = "identity") +
  stat_bin(geom="text", position= dodgewidth, aes(x=type, label=count), vjust=-1) 
```

![在此处输入图像描述](../Images/180065fa82235654721a2e7a0019a9f3.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-26T05:00:01.363

**更新** `geom_bar()`需求`stat = "identity"`

我认为这也可以满足您的要求。

```
mtcars2 <- data.frame(type = factor(mtcars$cyl), group = factor(mtcars$gear))
library(plyr); library(ggplot2)
dat <- rbind(ddply(mtcars2, .(type, group), summarise, count = length(group)), c(8, 4, NA))

p2 <- ggplot(dat, aes(x = type,y = count,fill = group)) + 
  geom_bar(stat = "identity", colour = "black",position = "dodge", width = 0.8) +
  ylim(0, 14) +
  geom_text(aes(label = count, x = type, y = count), position = position_dodge(width = 0.8), vjust = -0.6)
p2 
```

![在此处输入图像描述](../Images/da361cffe70476e5877a5f0c785847af.png)

# php - 我可以检查 PHP 中是否存在 Apache 模块吗？

> ID：10327270
> 
> 赞同：3
> 
> 时间：2012-04-26T04:30:50.283
> 
> 标签：php, apache

我在不同的服务器上运行了许多站点。在某些服务器上，Apache 服务器安装了 GeoIP 模块，这样我就可以通过它们的 IP 地址找到它们的位置。例如，要获取他们的国家/地区名称，我可以这样做：

```
$countryName = apache_note("GEOIP_COUNTRY_NAME"); 
```

但是，在一些不使用 GeoIP 模块的服务器上，这似乎会引起麻烦。

似乎检查是否存在`$countryName comes`返回空测试是不够的。我似乎只是在没有任何错误消息的情况下出现 HTML 渲染失败。`apache_note("GEOIP_COUNTRY_NAME")``isset()`

那么，有没有一种方法可以`if`在 PHP 中创建一个语句来测试该 GeoIP 模块是否存在于 Apache 中？

*（请注意，在未安装 GeoIP 模块的服务器上，我无权访问 Apache 设置，因此无法选择安装该模块。）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T04:38:25.303

您应该能够使用 apache_get_modules [http://php.net/manual/en/function.apache-get-modules.php](http://php.net/manual/en/function.apache-get-modules.php) 来查看模块是否已加载。只需检查模块是否在返回的数组中。但是，如果您将 PHP 作为 CGI 调用，这显然不起作用。

```
$mods = apache_get_modules();

if (array_search('mod_geoip',$mods)){
   print "GEO IP exist";
}else{
   print "GEO IP Doesn't Exist";
} 
```

# installation - Wix：如何使用 FileInUse 对话框

> ID：10327273
> 
> 赞同：1
> 
> 时间：2012-04-26T04:31:31.140
> 
> 标签：installation, wix, windows-installer

安装应要求关闭所有浏览器：iexplore.exe、chrome.exe 和 firefox.exe，但应提示用户这样做。我无法显示 FileInUse 对话框。以下是相关部分 - 我错过了什么？使用 CloseMessage="yes"，它们都会关闭，但我希望 FilesInUse 出现。

```
<UI>
  <UIRef Id="WixUI_InstallDir" />
  <UIRef Id="WixUI_ErrorProgressText" />
  <DialogRef Id="FilesInUse" />
  <DialogRef Id="MsiRMFilesInUse" />
</UI>

<InstallUISequence>
  <Custom Action="WixCloseApplications" Before="AppSearch" />
</InstallUISequence>

<InstallExecuteSequence>
  <Custom Action="WixCloseApplications" Before="InstallValidate" />
</InstallExecuteSequence>

<util:CloseApplication Id="CloseIE" CloseMessage="no"
                       Description="Internet Explorer is still running."
                       ElevatedCloseMessage="no"
                       RebootPrompt="no"
                       Property="IERunning"
                       Target="iexplore.exe"/>
<util:CloseApplication Id="CloseChrome" CloseMessage="no"
                       Description="Chrome is still running."
                       ElevatedCloseMessage="no"
                       RebootPrompt="no"
                       Property="ChromeRunning"
                       Target="chrome.exe"/>
<util:CloseApplication Id="CloseFirefox" CloseMessage="no"
                       Description="Firefox is still running."
                       ElevatedCloseMessage="no"
                       RebootPrompt="no"
                       Property="FirefoxRunning"
                       Target="firefox.exe"/> 
```

**更新** 从日志中，似乎发生了一些事情，但没有关闭也没有提示。下面的日志发生了两次（如我所料），一次在 AppSearch 之前，一次在 InstallValidate 之前，但从来没有调用 FileInUse 对话框。我尝试将 WixUI_InstallDir 更改为 Mondo，但这没有帮助。

```
Action 22:28:12: WixCloseApplications. 
Action start 22:28:12: WixCloseApplications.
WixCloseApplications:  Entering WixCloseApplications in C:\Users\tim\AppData\Local\Temp\MSIC78D.tmp, version 3.6.2809.0
WixCloseApplications:  Checking App: iexplore.exe 
WixCloseApplications:  App: iexplore.exe found running, 2 processes, setting 'IERunning' property.
WixCloseApplications:  Checking App: chrome.exe 
WixCloseApplications:  App: chrome.exe found running, 7 processes, setting 'ChromeRunning' property.
WixCloseApplications:  Checking App: firefox.exe 
Action ended 22:28:13: WixCloseApplications. Return value 1. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:26:57.457

在把同样的问题搞砸了一段时间之后，我想我可以说你**不能那样解决它**。

看，问题是只有 Win7 和 Vista 有重启管理器，它允许你检测正在运行的程序，并且**只有那些使用你的文件的**程序。这就是 FilesInUse 对话框的用途。您现在可能已经意识到，如果没有安装这些文件，它们就无法使用，所以就是这样：您无法按照您尝试的方式解决它。事实上，你**甚至在 WinXP 中根本没有 Restart Manager**。

我发现的其他解决方案是：

*   继续您开始的方式，但使用大量自定义操作创建您自己的对话框
*   在 C/C++ 中制作您的自定义操作 Dll，它可以检查正在运行的进程并向 MSI 发出信号以显示 FilesInUse 对话框。（您必须了解如何制作自定义操作 Dll，但我建议您使用此解决方案）

如果您还没有解决它，希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-24T15:14:33.770

老问题的新答案。愿它帮助某人。开始：

在这些情况下，[ClosePromtCA](http://www.codeproject.com/Articles/584105/Prompt-user-to-close-applications-on-install-unins)应该可以很好地工作。它只是强制用户关闭指定的进程——在上面的例子中是 chrome.exe、firefox.exe... 此外，自定义操作是开源的，因此应该很容易根据您的需要进行调整。

# jquery - 使用jquery隐藏元素时删除输入值

> ID：10327274
> 
> 赞同：1
> 
> 时间：2012-04-26T04:31:31.977
> 
> 标签：jquery, input

我有一个 div 元素

```
<div id=form><form id="formstuff">form input stuff</div></div> 
```

当用户点击另一个元素时显示/隐藏（或切换）

```
<div id="close"></div> 
```

如果`#form`显示并且用户决定输入值，但突然决定只单击`#close`按钮以关闭`#form`元素而不删除值。`#form`当用户决定关闭或隐藏（）时，您将如何删除所有输入值？

是做类似的事情的唯一方法`$(this).val('');`还是有类似的事情，`.empty();`但我不想删除样式等，只是文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:02:03.960

试试这个：http: [//jsfiddle.net/96FJp/](http://jsfiddle.net/96FJp/)

用户界面：

```
<form id="thisForm">
    <input type="text" value="HellO">
    <input type="text" value="World">

    <input type="button" value="wow"/>   
</form>

<input type="button" id="test">​ 
```

jQuery：

```
$('#test').click(function() {    
    $('input:not([type=button])', '#thisForm').val('');
 }); 
```

​<hr/> 要包含其他输入，只需在 jQuery 选择器上加一个逗号，执行以下操作：http: [//jsfiddle.net/dpRJy/1/](http://jsfiddle.net/dpRJy/1/)

用户界面：

```
<form id="thisForm">
    <input type="text" value="HellO">
    <input type="text" value="World">

    <input type="button" value="wow"/>  

    <select id="country">
        <option value="">--Select Country--</option>
        <option value="PH">Philippines</option>
        <option value="CN" selected>China</option>        
        <option value="CA">Canada</option>                
    </select>      

    <br/>
    <input id="drink" type="radio" name="drink" value="Water"> Water<br>
    <input id="drink" type="radio" name="drink" value="Beer"> Beer<br>
    <input id="drink" type="radio" name="drink" value="Wine" checked>Wine<br/>    
</form>

<input type="button" id="test">​ 
```

jQuery：

```
$('#test').click(function() {    
    $('input:not([type=button]),select', '#thisForm').val('');

    // radio button doesn't fit nicely to method val value clearing,
    // have to do this:
    $('input:radio','#thisForm').prop('checked', false);
 });
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:35:57.317

`$(this).val('');`或者

```
$(this).attr('value',''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:38:22.030

$(selector).empty() 用于删除所有子元素以及其中的文本。由于您希望保留 stye 和元素，因此对父表单使用子选择器并将每个元素的值设置为 ''。

$('#form').children().val('');

$('#form').children().attr('value','');

# scala - scala - 将泛型类型限制为特定类型

> ID：10327276
> 
> 赞同：2
> 
> 时间：2012-04-26T04:32:02.663
> 
> 标签：scala

有时，我会处理包含以下内容的java：

```
def printDbl(d:Double) { println("dbl: " + d) }
def printInt(i:Int) { println("int: " + i) } 
```

自然，我想把它包装在一些 scala 中，最终看起来像这样：

```
def print[T:Manifest] (t:T) {
  if (manifest[T] <:< manifest[Int]) { printInt(t.asInstanceOf[Int]) ; return }
  if (manifest[T] <:< manifest[Double]) { printDbl(t.asInstanceOf[Double]) ; return }

  throw new UnsupportedOperationException("not implemented: " + manifest[T])
} 
```

但是当我运行以下命令时，我得到一个运行时异常：

```
print(1)
print(2.0)
print("hello") 
```

我似乎记得有一种方法可以在编译时捕获它，但我似乎无法用谷歌搜索它。也许一些巧妙的隐含转换？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T04:37:28.533

为什么不直接利用方法重载并像这样编写 Scala 包装器？：

```
object Printer {
  def print(d: Double) { printDbl(d) }
  def print(i: Int) { printInt(i) }
} 
```

这非常简单，并提供了所需的行为：

```
import Printer._
print(1.)          // dbl: 1.0
print(1)           // int: 1
print("hello")     // compile-time type error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:54:11.197

```
scala> object SpecType {
     |   trait SpecType[T] {
     |     def is(s: String): Boolean
     |   }
     |   implicit object DoubleType extends SpecType[Double] {
     |     def is(s: String) = s == "Double"
     |   }
     |   implicit object IntType extends SpecType[Int] {
     |     def is(s: String) = s == "Int"
     |   }
     | }
defined module SpecType 

scala> import SpecType._
import SpecType._

scala> def print[T: SpecType](x: T) {
     |   if(implicitly[SpecType[T]].is("Int")) println("Int")
     |   if(implicitly[SpecType[T]].is("Double")) println("Double")
     | }
print: [T](x: T)(implicit evidence$1: SpecType.SpecType[T])Unit

scala> print(1)
Int

scala> print(1.0)
Double

scala> print("")
<console>:21: error: could not find implicit value for evidence parameter of typ
e SpecType.SpecType[String]
              print("") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T17:46:03.243

这是我想出的最好的

```
class CanPrint[T] (t:T) { def getT = t}
implicit def canPrint(i:Int) = new CanPrint[Int](i)
implicit def canPrint(d:Double) = new CanPrint[Double](d)    

def print[T:Manifest] (t:CanPrint[T]) {
    if (manifest[T] <:< manifest[Int]) { printInt(t.getT.asInstanceOf[Int]) ; return }
    if (manifest[T] <:< manifest[Double]) { printDbl(t.getT.asInstanceOf[Double]) ; return }

    throw new UnsupportedOperationException("not implemented: " + manifest[T])
} 
```

以下不编译

```
print(1)
print(1.0)
print("hello") 
```

以下是我所期望的

```
print(1)
print(1.0) 
```

但是，这是一个糟糕的代码，因为我必须导入隐式 defs 才能使其工作，并且作为此代码的使用者，我所看到的只是方法签名说我必须传入一个可以实例化的 CanPrint 对象。

```
print(new CanPrint("hello")) // pwned 
```

我可以将构造函数设为私有并且只能由隐式方法或类似方法访问吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-11T16:51:54.967

```
def printDbl(d:Double) { println("dbl: " + d) }
def printInt(i:Int) { println("int: " + i) }

trait Printer[T] { def print(t:T) }
class PD extends Printer[Double] { def print(d:Double) = printDbl(d) }
class PI extends Printer[Int] { def print(i:Int) = printInt(i) }
implicit val pd = new PD()
implicit val pi = new PI()

def print[T](t:T)(implicit printer:Printer[T]) = printer.print(t)

print(1) // 1
print(2.0) // 2.0
print("hello") // Error:(88, 7) could not find implicit value for parameter printer: A$A336.this.Printer[String] 
```

# windows-phone-7 - Windows Phone - 呼叫默认网络浏览器

> ID：10327284
> 
> 赞同：3
> 
> 时间：2012-04-26T04:33:30.433
> 
> 标签：windows-phone-7

我正在尝试开发 Windows Phone 应用程序，我想知道如何在启动程序时调用具有特定 URL（例如[http://www.google.com](http://www.google.com)）的默认网络浏览器？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T05:58:47.450

当您按照您所说的（Internet Explorer）启动“程序”时，您使用以下代码：

```
WebBrowserTask browser = new WebBrowserTask();
browser.URL = new Uri("http://www.google.com", UriKind.Absolute);
browser.Show(); 
```

WebBrowser 任务位于 Microsoft.Phone.Tasks 命名空间内，其文档位于：[Microsoft.Phone.Tasks.WebBrowserTask](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.webbrowsertask(v=vs.92).aspx)

您还应该知道“默认”浏览器始终是 Internet Explorer，因为目前用户无法将替代浏览器定义为他们的“默认”浏览器。

**编辑**：

在仔细阅读您的问题后，我可以说有一点模棱两可。如果您想在应用启动时立即启动浏览器，您应该了解以下内容：

1.  此类应用程序将无法通过 Microsoft 的市场验证（查看[Windows Phone 的应用程序认证要求](http://msdn.microsoft.com/en-us/library/hh184843(v=vs.92).aspx)

2.  即使它没有通过认证，它也将是一种奇怪的应用程序……对您的用户没有多大用处。

但是，如果您打算在用户单击按钮时启动手机的浏览器，那么我发布的上述代码将按照您的意愿工作，只需确保在其所在代码文件的顶部包含此行：

```
using Microsoft.Phone.Tasks; 
```

希望有帮助！

# php - 以相同的引用对 SQL 结果执行操作

> ID：10327288
> 
> 赞同：-2
> 
> 时间：2012-04-26T04:33:49.567
> 
> 标签：php, mysql, search-engine

我正在构建一个搜索引擎的东西。

我的查询分解了一个查询字符串，然后`SELECT`为字符串中的每个单词拆分了与该单词关联的所有参考 ID。

我有一种方法可以为每个查询词的每个 id 提供相关性分数。但是，如果我的查询多次返回 id，我正在寻找一种跟踪方法。谁能指出我正确的方向。我正在使用 PHP 和 mySQL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:45:56.127

好吧，您可以使用 PHP 或 SQL 来实现：

一个代码示例（没有错误检查，假设您直接使用 mysql api - 您不应该这样做）：

```
<?php
$sql = 'SELECT ...';
$result = mysql_query($sql);
$ids = array();
while ($row = mysql_fetch_object($result)) {
    $id = $row->id;
    if (array_key_exists($id, $ids)) {
        print 'id '. $id . ' exists';
        continue;
    }
    $ids[$id] = true;
}
?> 
```

使用 SQL，您可以尝试 HAVING 语句，如下所示：

```
SELECT * FROM whatevs HAVING COUNT(id) > 1 
```

由于我不知道您的表格布局，因此很难编写实际工作的代码/SQL。

# c# - 从 jQuery 调用处理程序不起作用

> ID：10327289
> 
> 赞同：0
> 
> 时间：2012-04-26T04:33:54.890
> 
> 标签：c#, jquery, ajax, asp.net-3.5, handler

我需要从 jQuery 调用处理程序（ashx）文件以在运行时获取一些数据。我的 jQuery 函数如下所示：

```
 var pID = 3;
         var tID = 6;

         $("#Button1").click(function() {
            var urlToHandler = "Controller/TestHandler.ashx";
            $.ajax({
                type: "POST",
                url: urlToHandler,
                data: "{'pID':'" + pID + "', 'tID':'" + tID + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(msg) {
                    alert(msg);
                }
            });
        }); 
```

我的处理程序代码：

```
 <%@ WebHandler Language="C#" Class="TestHandler" %>

using System;
using System.Web;

public class TestHandler : IHttpHandler
{    
    public void ProcessRequest (HttpContext context)
    {
        String pID = context.Request.Params["pID"];
        String tID = context.Request.Params["tID"];
        context.Response.ContentType = "text/plain";
        context.Response.Write(pID + " " + tID);
    }

    public bool IsReusable
    {
        get {
            return false;
        }
    }
} 
```

问题是代码执行没有到达处理程序代码。我可以从处理程序文件所在的同一目录中的同一 jQuery 函数调用其他 Web 表单 (aspx) 文件。所以这不是任何路径问题。

我是这个处理程序文件概念的新手。我用谷歌搜索了很多，但在我的代码中找不到任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:37:26.457

在更改了我传递 json 数据的方式（如@DRAKO 所建议的那样）并从 ajax 回发调用中删除了 contentType 之后，它起作用了。还修正了路径。

```
$("#Button1").click(function() {
    var urlToHandler = "TestHandler.ashx";
    $.ajax({
        type: "POST",
        url: urlToHandler,
        data: { pID: pID, tID: tID },
        dataType: "json",
        success: function(msg) {
            //do something with the msg here...
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T04:47:41.790

我认为您将 json 数据传递给处理程序的方式不正确。

还要确保处理程序的路径正确，并在处理程序的控制台中写入一行以检查它是否被调用。试试这段代码

```
$("#Button1").click(function(){

        $.ajax({
            type: "POST",
            url: "/Controller/TestHandler.ashx",
            data: {pID:pID, tID:tID},
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(msg) {
                alert(msg);
            },
            error: function(){
                alert("Error");
            }

        });
    }); 
```

# c# - C# Visual Studio 2010 发布文件

> ID：10327290
> 
> 赞同：-4
> 
> 时间：2012-04-26T04:34:10.690
> 
> 标签：c#, visual-studio-2010

是否可以选择将文件打包以分发到单个可执行文件中，而不是三个可执行文件、一个文件夹和其他杂项文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:40:04.773

ILMerge 实用程序可用于将不同的程序集合并为单个程序集。可从[http://www.microsoft.com/download/en/details.aspx?id=17630下载](http://www.microsoft.com/download/en/details.aspx?id=17630)

资源文件也可以嵌入到程序集中。

# javascript - 可以对所有对象进行原型制作

> ID：10327297
> 
> 赞同：0
> 
> 时间：2012-04-26T04:34:32.363
> 
> 标签：javascript, prototype

在 javascript 中，有没有办法对所有对象进行原型制作。一个简单的用例是，我有一个功能：

```
testFn(el) {
    if(el.isElement()) {
        //Do something
    }
} 
```

这里我想测试一下传入函数的对象是不是一个DOM元素。通常我会使用这个功能：

```
function isElement(el) {
    if(typeof el == 'object' && 'nodeType' in el && el.nodeType === 1 && el.cloneNode) {
        return true;
    }
    return false;
} 
```

然而，我发现自己一遍又一遍地重写这段代码。如果我可以简单地制作 Object 的原型，并在我可能需要的时候为每个对象即时提供这个函数，那就太好了。原型对象似乎给了我错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:39:18.370

> 有没有办法对所有对象进行原型制作

您可以`prototype`使用`Object`：

```
Object.prototype.isElement = function () {
    return typeof this == 'object' && 'nodeType' in this && this.nodeType === 1 && this.cloneNode
} 
```

# django - Heroku 上的 Django + MongoDB

> ID：10327300
> 
> 赞同：2
> 
> 时间：2012-04-26T04:34:46.593
> 
> 标签：django, mongodb, heroku, django-nonrel, django-mongodb-engine

我想在 Heroku 上使用 Django 和 MongoDB。在他们的文档中，[Heroku/Cedar 上的 Django 入门：Postgres 数据库配置](https://devcenter.heroku.com/articles/django#postgres_database_config)中说，附加了一些代码`settings.py`以使用`DATABASE_URL`.

有什么办法可以避免这种情况吗？因为`DATABASES`需要在`django_mongodb_engine`这里，也需要其他设置，例如（从[compSocSci](http://compsocsci.blogspot.co.uk/2012/02/getting-started-with-django-heroku-and.html)拖动的示例）

```
DATABASES = {
  'default': {
    'ENGINE': 'django_mongodb_engine',
    'NAME': 'heroku_app1234567',
    'USER': 'heroku_app1234567',
    'PASSWORD': 'abcdefghijklmnopqrstuvwxyz',
    'HOST': 'ds031117.mongolab.com',
    'PORT': '31117',
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:58:28.130

好的，所以在联系 Heroku 支持后，我已经找到了执行此操作的方法。
您所要做的就是删除共享的 PostgreDB 插件，注入的代码
不会修改`DATABASES`.

```
$ heroku addons:remove shared-database:5mb 
```

请注意，您仍然需要包含`psycopg2`在您的`requirements.txt`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:21:29.603

如果您根本不指定`DATABASE_URL`（如果可能的话），它应该可以工作。

# javascript - 当用户离开我的网站时，在页面上附加一个标题（他们也会去）

> ID：10327307
> 
> 赞同：0
> 
> 时间：2012-04-26T04:35:58.287
> 
> 标签：javascript, html, frames

我想要完成的是，当重定向到外部页面时，加载的页面上有某种框架，因此它会很快让他们回到我的网站。我已经尝试过框架集（丑陋）和 iframe，但有些网站阻止页面加载到框架中，我无法让它正常工作。我想弄清楚在 div 中加载外部站点是否更好。所以我恳求帮助解决这个问题。

谢谢！抢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T04:41:12.287

最简单的方法是在新选项卡/窗口中打开外部链接。不过，有些用户会觉得这很烦人，所以请注意。否则，放人。他们知道如何使用后退按钮，并且构建某种方式将目标站点放入框架并为他们提供返回您的站点的行为比大多数用户想要的更具破坏性和意想不到的行为。即使打开新窗口或选项卡也会破坏标准的用户体验，但它比使用框架要少得多。

再一次，让他们走。他们知道后退按钮在哪里。如果您希望用户回来，拥有吸引他们回来的内容比一些让他们回来的小工具更具吸引力。

# android - 在 adobe air 中使用 android Intent

> ID：10327308
> 
> 赞同：3
> 
> 时间：2012-04-26T04:36:22.887
> 
> 标签：android, android-intent, air, barcode, zxing

我来这里已经有一段时间了。

目前，我正在尝试在 Adob​​e AIR 中开发一个应用程序，该应用程序具有使用设备相机功能的一维条形码阅读器。我尝试使用 ZXing 的库并遵循[http://www.remotesynthesis.com/post.cfm/adding-a-qr-code-reader-in-flex-on-android](http://www.remotesynthesis.com/post.cfm/adding-a-qr-code-reader-in-flex-on-android)示例。QR 读得很好，但是我无法让一维条码阅读器工作。即使使用 MultiFormatReader 类。

尽管如此，我还是从 Android Market 试用了 ZXing 的 BarcodeScanner，它在我的设备上运行良好。所以，我一直在考虑使用 ZXing 的 android Intent 来处理读取并将结果传递回我的 AIR 应用程序。但是，我不知道如何从 AIR 启动 android 意图。

任何建议都非常感谢，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-28T11:04:51.350

如果您正在 Android 上开发 Air，您可以考虑使用扩展来为您完成这项工作！结帐[http://myappsnippet.com/qr-code-scanner-native-extension-adobe-air](http://myappsnippet.com/qr-code-scanner-native-extension-adobe-air)这是一个 AS3 库，它使用 Zxing Java 库并扫描 QR 码并将结果返回给您的 AS3 项目。

# javascript - 通过 jquery 链接到特定选项卡

> ID：10327310
> 
> 赞同：1
> 
> 时间：2012-04-26T04:36:27.420
> 
> 标签：javascript, jquery, tabs

我需要你的帮助！

我的网站中有 jquery 的选项卡功能。它运作良好。

这是 <head> 中的 javascript

```
<script type="text/javascript">
// When the document loads do everything inside here ...
$(document).ready(function(){
    // When a link is clicked
    $("a.tab").click(function () {
    // switch all tabs off
    $(".active").removeClass("active");
    // switch this tab on
    $(this).addClass("active");
    // slide all content up
    $(".content").slideUp();
    // slide this content up
    var content_show = $(this).attr("title");
    $("#"+content_show).slideDown();
    });
});
</script> 
```

和 html 来源在这里！

```
<ul id="tabs">
    <li><a href="#" title="type1" class="tab active">type1</a></li>
    <li><a href="#" title="type2" class="tab">type2</a></li>
</ul>
<section id="type1" class="content">
    <p>contents1contents1contents1contents1contents1</p>
</section>
<section id="type2" class="content content_2">
    <p>contents2contents2contents2contents2</p>
</section> 
```

但我需要将按钮链接到特定选项卡。类别存档页面中有一个按钮，当用户单击该按钮时，该页面将打开，其中包含第二个选项卡中的内容，ID 名为“type2”。

[此页面](http://d2o0t5hpnwv4c1.cloudfront.net/001_Tabbed/site/jQuery.html)引用了上述来源，这 是我正在处理[的页面。](http://hikarimoushikomi.com/east/ryoukin/flets-next/)

我在等你的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:48:32.460

假设您上面的 html 文件名为 index.html，您可以创建如下链接：

```
<a href="index.html#!type2">click</a> 
```

然后：

```
$(document).ready(function(){
    function doTab() {
        $(".active").removeClass("active");
        $(this).addClass("active");
        $(".content").slideUp();
        var content_show = $(this).attr("title");
        $("#"+content_show).slideDown();
    }

    // When a link is clicked
    $("a.tab").click(doTab);

    if (window.location.hash) {
        $('a[title="' + window.location.hash.substring(2) + '"]').click();
    }
}); 
```

# java - 构建按每个优先级排序的元素数组（在数组列表中的对象内部定义）

> ID：10327311
> 
> 赞同：1
> 
> 时间：2012-04-26T04:36:31.850
> 
> 标签：java, arrays, sorting, collections

我有一个 type 列表`List<Element<Integer, Integer>>`，其中每个元素包含两个整数，一个是 entityId，另一个是该实体的优先级。现在我需要创建一个`Integer[]`entityIds 数组，该数组已根据`Element`对象中每个实体的优先级进行排序。

我只能访问列表的迭代器。创建这种优先排序的 entityIds 数组的最佳方法是什么？

* * *

# 我的想法：

使用迭代器首先创建一个元素数组，使用`Arrays.sort()`& 使用优先级对它们进行排序，然后创建一个新的整数数组并从该排序数组中复制 entityIds。这是一个好主意吗 ？或者还有比这更好的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:48:54.037

将您的列表放入带有查看优先级的比较器的 PriorityQueue 中；然后遍历优先级队列并收集数组。

未经测试的代码如下；请随时修正错别字。

```
Integer[] getSortedEntityIds(Iterator<Element<Integer, Integer>> iter) {
  Comparator<Element<Integer,Integer>> comp = new Comparator<Element<Integer, Integer>>() {
    @Override
    public int compare(Element<Integer,Integer> ela, Element<Integer,Integer> elb) {
      return ela.getPriority().compareTo(elb.getPriority());
    }
  };

  PriorityQueue<Element<Integer,Integer>>pq = new PriorityQueue<Element<Integer,Integer>>(256, comp);
  // If you had the access to the whole list, you wouldn't have to iterate, you could just pass it into the pq constructor
  while(iter.hasNext() {
    pq.add(iter.next());
  }

  Integer[] sortedEntityIds = new Integer[pq.size()]

  for(int i = 0; i < pq.size(), i++) {
    Element<Integer, Integer>el = pq.remove();
    sortedEntityIds[i] = el.getEntityId();
  }

  return sortedEntityIds;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:47:39.603

1.  创建第二个列表。
2.  从原始列表中获取下一项。
3.  遍历第二个列表并找到具有更高优先级的第一个项目。
4.  在它之前插入当前项目。
5.  转到 2 或结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:54:57.147

您可以使用自定义比较器以您认为合适的任何方式对列表元素进行排序。

```
final List<Element<Integer, Integer>> list = new ArrayList<Element<Integer, Integer>>();
list.add(new Element<Integer, Integer>(1, 1));
list.add(new Element<Integer, Integer>(4, 4));
list.add(new Element<Integer, Integer>(3, 3));
list.add(new Element<Integer, Integer>(2, 2));
list.add(new Element<Integer, Integer>(5, 5));

Collections.sort(list, new Comparator<Element<Integer, Integer>>() {

    @Override
    public int compare(final Element<Integer, Integer> x,
            final Element<Integer, Integer> y) {
        return x.getPriority().compareTo(y.getPriority());
    }
});

// Prints elements in ascending order of priority
System.out.println(Arrays.toString(list.toArray())); 
```

# python - Python os 和 gob：在单个文件与多个文件上执行脚本时的不同结果

> ID：10327312
> 
> 赞同：0
> 
> 时间：2012-04-26T04:36:41.110
> 
> 标签：python

我正在编写一个 python shell 脚本，该脚本可以选择在指定目录中的单个 .wav 文件或所有 .wav 文件上执行一个函数（将一组方法从 2D numpy 数组写入数据文件）。

例如，

```
> myscript.py --file=audio.wav --data="data.tab" 
```

应该将浮点值写入 data.tab。

```
> myscript.py --path="path/with/audio_files" --data="data.tab" 
```

应该将一组浮点值写入 data.tab。

我有一个包含一堆 WAV 文件的文件夹。当我在单个文件上执行路径时（使用 --file 选项），结果与使用 --path 选项处理文件时的结果不同。

我已经通过 3 种方式实现了路径文件：

1) 使用 os.listdir()

```
for audioFile in os.listdir(options.path):
    if audioFile.endswith('.wav'):
        foo(audioFile) 
```

2) 使用 os.walk()

```
for r, d, f in os.walk(options.path):
for audioFile in f:
    if audioFile.endswith('.wav'):
            foo(audioFile) 
```

3) 使用 glob.glob()

```
for audioFile in glob.glob("*.wav"):
    foo(audioFile) 
```

方法 1 和 2 返回相同的结果。方法 3 返回不同的结果。与处理单个文件相比，所有 3 种方法都返回不同的结果。

当我使用 os 或 gob 模块时有什么不同？

编辑：这是我处理目录中所有 .wav 文件的地方：

```
for r, d, f in os.walk(options.path): 
    for audioFile in f:
        if audioFile.endswith('.wav'):  
            # Add MFCC 1-12 to data.
            mfcc12(audioFile, sampleRate, data) 
```

这是在 mfcc12() 中：

```
# mfccs is a 2D numpy array. 
# Each column corresponds to one feature of the audiofile
for i in range(mfccs[0].size):
    mfccMean = mfccs[:, i].mean()
    mfccStdDev = mfccs[:, i].std()  
    data.write(str(mfccMean) + '\t' + str(mfccStdDev) + '\t') 
```

我正在使用[YAAFE](http://yaafe.sourceforge.net/)从音频文件中提取特征。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:47:01.867

这些`glob`函数执行 Unix 风格的操作，即省略名称以 开头的文件`.`：

```
>>> os.listdir('.')
['conn.c', 'Makefile', 'conn.o', '.depend', 'conn.c.orig', 'conn']
>>> glob.glob('*')
['conn.c', 'Makefile', 'conn.o', 'conn.c.orig', 'conn'] 
```

（注意，`fnmatch.fnmatch`不*这样*做；跳过点文件的代码在 中`glob.glob1`）。大概你有一些点文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T22:17:30.453

我想我解决了这个问题。问题不在于我的 mfcc 提取设置，而不在于 Python 代码。

# javascript - 如何使用谷歌浏览器在网页的源文件（包括所有 javascript 文件）中搜索文本

> ID：10327313
> 
> 赞同：16
> 
> 时间：2012-04-26T04:36:46.777
> 
> 标签：javascript, google-chrome, plugins, text-search

如何使用谷歌浏览器在网页的源文件（包括所有 javascript 文件）中搜索文本？

如果存在 Chrome 插件，或者告诉我如何列出网页包含的所有 javascript 文件。

***谷歌浏览器有一个开发工具，可用于查看源文件并在我指出的特定文件中搜索，***但如果网页包含文件？要快速搜索，请制作插件！

# r - 如何将滚动分位数应用于 R 中的 xts 时间序列？

> ID：10327325
> 
> 赞同：4
> 
> 时间：2012-04-26T04:38:26.863
> 
> 标签：r, time-series, xts, quantmod, quantitative-finance

我有以下`data`数据点的时间序列（请参阅`dput()`下面的输出以获取可重复的序列）。

```
 data
2012-03-13  0.0099809886
2012-03-14 -0.0011633318
2012-03-15  0.0021057557
2012-03-16 -0.0039516504
2012-03-19 -0.0006950880
2012-03-20 -0.0064935065
2012-03-21 -0.0016389604
2012-03-22  0.0089264740
2012-03-23  0.0061047194
2012-03-26 -0.0032664489
2012-03-27  0.0016199954
2012-03-28  0.0123198512
2012-03-29 -0.0018399264
2012-03-30  0.0013828071
2012-04-02 -0.0134335155
2012-04-03 -0.0038999771
2012-04-04  0.0057816836
2012-04-05  0.0041695622
2012-04-10  0.0039627040
2012-04-11 -0.0007045561
2012-04-12  0.0063261481
2012-04-13  0.0030106531
2012-04-16  0.0004650081
2012-04-17 -0.0057924004
2012-04-18  0.0055337791
2012-04-19  0.0009157509
2012-04-20 -0.0004576659
2012-04-23 -0.0038857143
2012-04-24  0.0029960820
2012-04-26 -0.0074779062 
```

我想尝试获得一个 n 周期滚动分位数的时间序列。

例如，要获得整个系列的上四分位数，只需：

```
> quantile(se,.75)
    75% 
0.004117848 
```

但我想要的是有效地添加`data$rolling_quantile`，这样我就可以有一个滚动的 n 周期窗口，它构成了

我原以为`apply.rolling`(in `Performance Analytics`) 或 roll.apply (in `zoo`) 会解决问题，但在尝试计算 10 天滚动上四分位数时出现以下错误：

```
> rolling_quantile <- apply.rolling(data,width=10,FUN="quantile",.75)

Error in xts(calcs[-1], order.by = dates[steps]) : 
  NROW(x) must match length(order.by) 
```

`tracback`也没有给出太多线索：

```
> traceback()
3: stop("NROW(x) must match length(order.by)")
2: xts(calcs[-1], order.by = dates[steps])
1: apply.rolling(data, width = 10, FUN = "quantile", 0.75) 
```

`roll.apply`似乎有效，但它似乎在`data`. 如有必要，我会将该电话作为更新发布，但我`apply.rolling`认为无论如何都是合适的解决方案。

当然，在 excel 中执行此操作非常简单，但我想在 R 中得到答案。但作为解决方案的指南，这是我想要得到的结果（在 Excel 中生成）：

```
 data          rolling_qt
3/13/2012   0.009980989 
3/14/2012   -0.001163332    
3/15/2012   0.002105756 
3/16/2012   -0.00395165 
3/19/2012   -0.000695088    
3/20/2012   -0.006493506    
3/21/2012   -0.00163896 
3/22/2012   0.008926474 
3/23/2012   0.006104719 
3/26/2012   -0.003266449    0.005104978
3/27/2012   0.001619995 0.001984316
3/28/2012   0.012319851 0.005104978
3/29/2012   -0.001839926    0.004983538
3/30/2012   0.001382807 0.004983538
4/2/2012    -0.013433515    0.004983538
4/3/2012    -0.003899977    0.004983538
4/4/2012    0.005781684 0.00602396
4/5/2012    0.004169562 0.005378653
4/10/2012   0.003962704 0.004117848
4/11/2012   -0.000704556    0.004117848
4/12/2012   0.006326148 0.005378653
4/13/2012   0.003010653 0.004117848
4/16/2012   0.000465008 0.004117848
4/17/2012   -0.0057924  0.004117848
4/18/2012   0.005533779 0.005192725
4/19/2012   0.000915751 0.005192725
4/20/2012   -0.000457666    0.004117848
4/23/2012   -0.003885714    0.003724691
4/24/2012   0.002996082 0.00300701
4/26/2012   -0.007477906    0.00300701 
```

任何帮助，一如既往，非常感谢。

```
> dput(se)
    structure(c(0.00998098859315588, -0.00116333178222428, 0.00210575573233496, 
    -0.00395165039516499, -0.000695088044485592, -0.00649350649350644, 
    -0.00163896043081246, 0.00892647404275304, 0.00610471941770374, 
    -0.00326644890340644, 0.00161999537144175, 0.0123198512319851, 
    -0.00183992640294384, 0.00138280709840988, -0.0134335154826958, 
    -0.0038999770589585, 0.00578168362627207, 0.00416956219596942, 
    0.00396270396270393, -0.000704556129638378, 0.00632614807872534, 
    0.00301065308012971, 0.000465008137642497, -0.0057924003707136, 
    0.00553377910998387, 0.000915750915750912, -0.000457665903890181, 
    -0.00388571428571427, 0.00299608204655444, -0.00747790618626787
    ), .indexCLASS = "Date", .indexTZ = "", na.action = structure(c(5L, 
    6L, 10L, 14L, 17L, 19L, 20L, 21L, 22L, 24L, 25L, 26L, 27L, 28L, 
    29L, 30L, 31L, 32L, 33L, 34L, 35L, 36L, 37L, 38L, 39L, 40L, 41L, 
    42L, 43L, 44L, 47L, 49L, 51L, 54L, 55L, 56L, 57L, 58L, 59L, 60L, 
    61L, 62L, 63L, 64L, 65L, 66L, 68L, 69L, 70L, 71L, 72L, 73L, 74L, 
    75L, 76L, 77L, 78L, 79L, 80L, 82L, 83L, 84L, 85L, 86L, 87L, 88L, 
    89L, 90L, 91L, 92L, 93L, 94L, 95L, 96L, 98L, 99L, 100L, 101L, 
    102L, 103L, 104L, 105L, 106L, 107L, 108L, 109L, 110L, 112L, 113L, 
    114L, 115L, 116L, 118L, 119L, 120L, 121L, 122L, 123L, 124L, 125L, 
    126L, 127L, 128L, 129L, 132L, 133L, 135L, 136L, 137L, 138L, 139L, 
    140L, 141L, 142L, 143L, 144L, 145L, 146L, 147L, 148L, 149L, 150L, 
    151L, 152L, 153L, 154L, 155L, 156L, 157L, 158L, 159L, 160L, 161L, 
    162L, 163L, 164L, 165L, 166L, 167L, 168L, 169L, 170L, 171L, 172L, 
    245L, 252L, 285L, 426L, 448L, 509L, 686L, 704L, 796L, 942L, 959L, 
    1057L, 1257L, 1311L, 1531L, 1565L, 1726L, 1787L, 1820L, 1982L, 
    2032L, 2044L, 2045L, 2075L, 2076L, 2218L, 2221L, 2237L, 2238L, 
    2330L, 2493L, 2555L, 2590L, 2749L, 2811L, 2845L, 3005L, 3067L
    ), class = "omit", index = c(957708000, 957794400, 958312800, 
    958658400, 959090400, 959263200, 959522400, 959608800, 959695200, 
    959868000, 960127200, 960213600, 960300000, 960386400, 960472800, 
    960732000, 960818400, 960904800, 960991200, 961077600, 961336800, 
    961423200, 961509600, 961596000, 961682400, 961941600, 962028000, 
    962114400, 962200800, 962287200, 962719200, 962892000, 963237600, 
    963496800, 963756000, 963842400, 963928800, 964015200, 964101600, 
    964360800, 964447200, 964533600, 964620000, 964706400, 964965600, 
    965052000, 965224800, 965311200, 965570400, 965656800, 965743200, 
    965829600, 965916000, 966175200, 966261600, 966348000, 966434400, 
    966520800, 966780000, 966952800, 967039200, 967125600, 967381200, 
    967467600, 967554000, 967640400, 967726800, 967986000, 968072400, 
    968158800, 968245200, 968331600, 968590800, 968677200, 968850000, 
    968936400, 969195600, 969282000, 969368400, 969454800, 969541200, 
    969800400, 969886800, 969973200, 970059600, 970146000, 970405200, 
    970578000, 970664400, 970750800, 971010000, 971096400, 971269200, 
    971355600, 971614800, 971701200, 971787600, 971874000, 971960400, 
    972219600, 972306000, 972392400, 972478800, 972565200, 972997200, 
    973083600, 973429200, 973515600, 973602000, 973688400, 973774800, 
    974034000, 974120400, 974206800, 974293200, 974379600, 974638800, 
    974725200, 974811600, 974898000, 974984400, 975243600, 975330000, 
    975416400, 975502800, 975589200, 975848400, 975934800, 976021200, 
    976107600, 976194000, 976453200, 976539600, 976626000, 976712400, 
    976798800, 977058000, 977144400, 977230800, 977317200, 977403600, 
    977835600, 977922000, 978008400, 987343200, 988120800, 992181600, 
    1009285200, 1012136400, 1019656800, 1041339600, 1043586000, 1055080800, 
    1072875600, 1075035600, 1087135200, 1111932000, 1118584800, 1145887200, 
    1150034400, 1169730000, 1177423200, 1181484000, 1201438800, 1207663200, 
    1209045600, 1209304800, 1212933600, 1213020000, 1230469200, 1230814800, 
    1232888400, 1232974800, 1244383200, 1264424400, 1272204000, 1276437600, 
    1295960400, 1303740000, 1307887200, 1327496400, 1335276000)), index = structure(c(1331557200, 
    1331643600, 1331730000, 1331816400, 1332075600, 1332162000, 1332248400, 
    1332334800, 1332421200, 1332680400, 1332766800, 1332853200, 1332939600, 
    1333026000, 1333288800, 1333375200, 1333461600, 1333548000, 1333980000, 
    1334066400, 1334152800, 1334239200, 1334498400, 1334584800, 1334671200, 
    1334757600, 1334844000, 1335103200, 1335189600, 1335362400), tzone = "", tclass = "Date"), .Dim = c(30L, 
    1L), .Dimnames = list(NULL, "data"), class = c("xts", "zoo")) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T05:51:23.977

我认为这只是参数混淆。这有效：

```
apply.rolling(x,width=10,FUN="quantile",p=.75) 
```

即命名要传递给分位数函数的参数。

顺便说一句，我得到了与您的 Excel 示例相同的输出，但是天差了 1。如果这很重要，那么这将调整它以匹配：

```
res=apply.rolling(x,width=10,FUN="quantile",p=.75)
index(res)=index(res)+1 
```

# javascript - 将 extjs 对象变量传递给 javascript 函数

> ID：10327328
> 
> 赞同：1
> 
> 时间：2012-04-26T04:39:02.333
> 
> 标签：javascript, function, object, extjs4

我正在使用 ExtJs 4.0。我有一个包含5 个字段的*记录*对象。

*   类型 -> 字符串
*   名称 -> 字符串
*   formFields -> 一维数组
*   gridColumns -> 一维数组
*   gridStore -> 二维数组

另外，我有一个锚标签

```
{
        xtype: 'component',
        autoEl: {
            tag: 'a',
            **href: 'javascript: addFormTab('+record+')',**
            html: record.name,
            style: 'position:absolute;left:'+left+';top:'+top
        }
} 
```

我想将该*记录*对象变量传递给*addFormTab*函数。但是每当我传递变量时，它都会转换为字符串作为*“[object Object]”*并给出javascript错误。

请提出一些方法来传递整个对象，这样我就可以像访问它一样

```
function addFormTab(record){
var form = new Ext.FormPanel({
    title: record.name,
    items: record.formFields,
});
} 
```

# mongodb - 在文档中插入值数组

> ID：10327329
> 
> 赞同：0
> 
> 时间：2012-04-26T04:39:04.640
> 
> 标签：mongodb

一个 mongo 文档可以有一个具有多个值的键。例如。电话号码可以有多个值。我想在 c# driver API 的帮助下插入这个数组。请告诉我插入这些值的方法。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:25:02.407

你可以很容易地做到这一点。

```
BsonDocument doc = new BsonDocument();
BsonArray phones = new BsonArray();
phones.Add("123-456-7890");
phones.Add("234-567-8901");
doc.Add("phones", phones);

collection.Insert(doc); 
```

如果这不是您要找的，请告诉我们。

# c# - SilverLight 应用程序（不是 Silverlight 业务应用程序）中的 Windows 身份验证

> ID：10327332
> 
> 赞同：0
> 
> 时间：2012-04-26T04:39:23.847
> 
> 标签：c#, windows, silverlight, authentication

我正在尝试将 Windows 身份验证添加到我创建的现有网站。我所阅读的有关在 silverlight 中使用 Windows 身份验证的所有信息都要求您从 Silverlight Business Applicaion 模板而不是 Silverlight 应用程序模板开始。我已经有了一个使用 Silverlight 应用程序模板开始编写的网站。如何将 Windows 身份验证添加到此现有网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:16:50.167

如果您的应用程序托管在 IIS 中并且这是一个 Intranet 站点，您只需将 IIS 身份验证方法中的应用程序设置为 Windows 身份验证，然后当客户端尝试加载 SL App 时，将触发 401 质询，要求用户输入他/她的凭据。您还可以将 IE 设置为在加载站点时将 Windows 凭据传递给服务器。我花了很多时间调整各种属性以获得我正在寻找的正确功能（尤其是机器名称是否完全合格）但基本上这是调试时要记住的一件事，这是机器名称播放服务器如何解释尝试访问服务器的客户端的角色。

# asp.net - 会话状态只能在 enableSessionState 设置为 true 时使用，当我使用 Server.Transfer 时

> ID：10327333
> 
> 赞同：-1
> 
> 时间：2012-04-26T04:39:33.167
> 
> 标签：asp.net, session, exception, exception-handling, session-state

包括错误页面在内的网站中的每个页面都是从母版页派生的。在母版页中，我正在访问会话变量。当我得到异常时，处理 Page_Error 或 Application_Error 事件。从那里我使用 Server.Transfer 重定向到错误页面，然后我在 Error.aspx 的母版页中得到以下异常。如果我使用 Response.Redirect 它可以正常工作。

```
Session state can only be used when enableSessionState is set to true, either in a configuration file or in the Page directive. Please also make sure that System.Web.SessionStateModule or a custom session state module is included in the <configuration>\<system.web>\<httpModules> section in the application configuration. 
```

请详细解释 Server.Transfer 的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:32:34.637

当应用程序抛出异常时，我正在处理 Application_Error 事件。

```
protected void Application_Error(object sender, EventArgs e)
    {
        Exception ex = HttpContext.Current.Server.GetLastError();
        if (ex.Message == "File does not exist." && HttpContext.Current.Session == null)
        {
            if (((System.Web.HttpException)(ex)).GetHttpCode() == 404)
            {
                LogtheException();
            }
        }
        else
        {
            Log the Exception(Session["uname"].ToString());
            Server.Transfer(UrlMaker.ToError(ex.Message.ToString()));
        }
    } 
```

使用 HttpContext.Current.Server.GetLastError(); 我得到了最后一个例外。如果有任何异常，除了“文件不存在”。正在访问会话变量。

首先它抛出与应用程序相关的异常，然后如果任何 css/image 文件路径不正确，那么接下来它会立即抛出“文件不存在”。例外。例外是因为没有正确处理“文件不存在”的会话。案子。

```
Session state can only be used when enableSessionState is set to true, either in a configuration file or in the Page directive. Please also make sure that System.Web.SessionStateModule or a custom session state module is included in the <configuration>\<system.web>\<httpModules> section in the application configuration. 
```

现在我知道 Css 和图像请求通常不需要访问会话，因此 asp 不会将会话加载到内存中，并且在异常“文件不存在”时您无权访问它。..

# jsf - 如何防止用户在 Primefaces 的日历文本框中输入数据

> ID：10327336
> 
> 赞同：3
> 
> 时间：2012-04-26T04:39:55.193
> 
> 标签：jsf, primefaces

在我的代码中，我使用 Primefaces 的日历

```
<p:calendar id="cal" value="#{accountController.selected.mydate}" styleClass="custom" pattern="dd-MMM-yyyy HH:mm" /> 
```

*   如果我使用其他模式，例如：pattern="dd/MM/yyyy HH:mm"、pattern="dd-MM-yyyy HH:mm" 等 ==> 用户无法在日历文本框中输入数据。
*   但是如果我使用 pattern="dd-MMM-yyyy HH:mm" ==> 用户可以在日历文本框中输入数据。

所以我想问：如果我使用 pattern="dd-MMM-yyyy HH:mm" ，如何防止用户在日历文本框中输入数据？

在 Primefaces 中有任何与 Richfaces 的 enableManualInput 属性等效的属性？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T04:56:27.877

使用日历的 readOnlyInputText。将 readOnlyInputText 设置为 true，以便用户无法进入输入区域。

# c# - 从文本文件读取后显示数据 - C#,Visual Studio

> ID：10327338
> 
> 赞同：0
> 
> 时间：2012-04-26T04:39:59.853
> 
> 标签：c#, visual-studio, textfield

我有一个包含数据的文本文件，可能类似于：

> 用户名
> 
> 地址
> 
> 邮政编码
> 
> 电话号码

文本文件的前四个元素属于一个用户，接下来的四个元素属于下一个用户等。我想从文本文件中读取，并显示每个用户的数据。读取和区分每个用户的数据是可以的。问题是我将如何显示数据？我想将数据显示为表格或沿线的东西，每个用户都有一行。假设我想显示数据，例如；

> 姓名 - 地址 - 邮政编码 - 电话号码
> 
> 马特 - 15 - PO30 78 - 088997655
> 
> 迈克 - 16 - PO31 78 - 088998955

如果我使用的是数据库，我猜你可以很容易地用 GridView 显示它，从文本文件读取后是否有显示它？

非常感谢，迈克

编辑：我复制了您提供的代码，将 gridView 拖到页面上。将其 ID 更改为 dataGridView1

```
DataTable table = new DataTable();
   table.Columns.Add("UserName", typeof(string));
        table.Columns.Add("Address", typeof(string));
        table.Columns.Add("PostCode", typeof(string));
        table.Columns.Add("Name", typeof(string));
        table.Columns.Add("LastName", typeof(string));
        dataGridView1.DataSource = table;
    table.Rows.Add(Label8.Text, Label4.Text, Label5.Text, Label6.Text, Label7.Text); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:44:16.697

您可以将数据加载到 DataTable 中并将 gridview 绑定到 DataTable，就像它来自数据库一样。像这样的东西：

```
 DataTable table = new DataTable();
        table.Columns.Add("Name", typeof(string));
        table.Columns.Add("Address", typeof(string));
        table.Columns.Add("Postcode", typeof(string));
        table.Columns.Add("PhoneNumber", typeof(string));
        table.Rows.Add("Matt", "15 The", "PO30 78", "088997655");
        dataGridView1.DataSource = table;
        dataGridView1.DataBind(); 
```

# c++ - 如何调用 cplex 求解器？

> ID：10327340
> 
> 赞同：0
> 
> 时间：2012-04-26T04:40:13.167
> 
> 标签：c++, call, solver, cplex

我正在编写一个算法`c++`，我有一个主问题和一个子问题。所以我两次调用 cplex 求解器。第一次是当我称之为解决主要问题时，这是我的代码：

```
IloModel model_master(env);

definition of obj and constraints

IloCplex cplex_master(env);
cplex_master.extract(model_master);
cplex_master.setParam(IloCplex::EpGap,0.0001);
cplex_master.solve();
LB=cplex_master.getObjValue(); 
```

但它不起作用！当我把它不打印它`cout<<"1" << endl;`之后。`IloCplex cplex_master(env);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:20:21.667

将您的函数调用包装在 try/catch 块中。

```
try {
   // ...
} catch (IloException &ex) {
   cerr << ex << endl;
} 
```

您可能没有在尝试运行 cplex 的机器上设置 Ilm 密钥。

# php - 如何在drupal的url中传递#

> ID：10327341
> 
> 赞同：1
> 
> 时间：2012-04-26T04:40:14.143
> 
> 标签：php, drupal, url, drupal-6

我在创建页面时使用 Drupal 我需要将自动别名设置为住宅项目#Floors 当我单击页面时它显示住宅项目％2523Floors

但我只需要#

任何男孩都可以对此有所了解吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:34:52.713

请尝试以下代码行：

```
function drupal_urlencode($text) {
  if (variable_get('clean_url', '0')) {
    return str_replace(array('%2F', '%3F', '%3D', '%26', '%2523'),
                       array('/', '?', '=', '&', '#'),
                       urlencode($text));
  }
  else {
    return str_replace('%2F', '/', urlencode($text));
  }
} 
```

我认为这对你来说会很好。请检查一下。

谢谢。

# asp.net-mvc - MVC 自定义授权属性来验证请求

> ID：10327342
> 
> 赞同：6
> 
> 时间：2012-04-26T04:40:16.990
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个带有 Jquery 的 UI，它使用 Ajax 请求调用 MVC。

我想根据 userProfile 验证每个请求（包含帐号、ID 等的自定义类）。

谁能建议是否可以创建自定义授权属性来验证请求和用户配置文件是否相同？

然后我想做如下的事情：

```
[AuthorizeUser]
public ActionResult GetMyConsumption(string accountNumber)
{
  .....
  return View();
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-26T07:18:54.777

您可以编写自定义 Authorize 属性：

```
public class AuthorizeUserAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var isAuthorized = base.AuthorizeCore(httpContext);
        if (!isAuthorized)
        {
            // The user is not authorized => no need to continue
            return false;
        }

        // At this stage we know that the user is authorized => we can fetch
        // the username
        string username = httpContext.User.Identity.Name;

        // Now let's fetch the account number from the request
        string account = httpContext.Request["accountNumber"];

        // All that's left is to verify if the current user is the owner 
        // of the account
        return IsAccountOwner(username, account);
    }

    private bool IsAccountOwner(string username, string account)
    {
        // TODO: query the backend to perform the necessary verifications
        throw new NotImplementedException();
    }
} 
```

# javascript - 构建 Sencha Touch 2 应用程序时出错

> ID：10327347
> 
> 赞同：7
> 
> 时间：2012-04-26T04:41:55.640
> 
> 标签：javascript, list, load, sencha-touch, sencha-touch-2

当我使用以下命令构建我的 sencha touch 2 应用程序时：- **sencha app build production**

但它会引发错误：

```
[INFO] Deploying your application to /Applications/MAMP/htdocs/iPadapp/build/production
[INFO] Copied sdk/sencha-touch.js
[INFO] Copied app.js
[INFO] Copied resources/css/app.css
[INFO] Copied resources/images
[INFO] Copied resources/icons
[INFO] Copied resources/loading
[INFO] Resolving your application dependencies...
[ERROR] Error thown from your application with message: TypeError: 'undefined' is not an object 
```

我在我的代码中追踪了错误。我发现，这是由于加载我的列表。这是我的代码

```
Ext.define("myProject.store.Members",{
    extend  :'Ext.data.Store',
    requires:"Ext.data.proxy.LocalStorage",
    config: {
        model   :"myProject.model.Member",
        sorters :'lastName',
        autoload:true,

        proxy: {
            type: 'localstorage',
            id  : 'mainStore'
        } 
    }
}); 
```

如果我删除了'autoLoad：true'行（这会破坏我的应用程序，那么我可以构建应用程序。但是我的列表没有加载。如果我把它放回去，错误就会重复。我尝试使用加载函数动态加载列表，但是这没有任何意义。

这是我有趣的 model.js 文件。

```
Ext.define('myProject.model.Member', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
            'index',                 
            'email',
            'firstname',
            'lastname',
            'phone',
            'currentemployer',
            'currenttitle',
            'interestlevel',
            'tcgroupNames',
            'active',
            'lastlogin',
            'usertypedesc',
            'recruiternotes',
            'recruitercontact',
            'addtype',
            'usertypedesc',
            'jobtitle',
            'ipAddress',
            'recruitersource',
            'agentkeywords',
            { name: "created", type: 'date' },
            'recruiterprofileurl_linkedin',
            'recruiterprofileurl_facebook'
        ]
    }
}); 
```

任何帮助表示赞赏

祝大家编码愉快

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T06:24:06.800

我有同样的问题，命令生成器不允许打开到本地存储的连接，所以它崩溃了。

您应该可以在`Ext.getStore('Members').setAutoLoad(true);`中 `launch: function () {`设置`app.js`。

然后您的应用程序将构建并且仍应将数据加载到商店中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:12:40.847

请注意，使用 Chrome 开发人员工具跟踪错误比使用 Firebug 更好，因为在 Firebug 的控制台中它没有显示异常，而在 Chrome 开发人员工具的控制台中它显示未捕获的异常：

```
Ext.getStore("Notes").load(); 
```

在我的情况下，商店'Notes'不存在。

# mongodb - 使用 Embedded Mongo 或已安装的实例进行集成测试

> ID：10327349
> 
> 赞同：1
> 
> 时间：2012-04-26T04:42:03.410
> 
> 标签：mongodb, integration-testing, embedded-database

我正在开发的应用程序是一个 Velocity/Spring MVC/Mongo on tomcat 类型的 webapp。

我可以在 Embedded Mongo 上运行我的集成测试，使用[EmbedMongo](https://github.com/michaelmosmann/embedmongo.flapdoodle.de)运行所有测试需要更长的时间，比如大约 1 分钟，但在已安装的 Mongo 上的测试数据库上，大约需要 15 秒。

在创建新数据库时使用嵌入式数据库进行集成测试真的有什么好处吗（在这种情况下，同一实例中的测试数据库）可以忽略不计？事实上，测试本身可以创建数据库和所需的集合。

除了在不需要常规安装的 CI 盒上使用 Embedded Mongo 之外，我看不出它有什么好处。

任何人都可以分享任何想法。

谢谢高拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:55:27.860

看看那个链接： [https ://stackoverflow.com/a/9830861/82609](https://stackoverflow.com/a/9830861/82609)

看起来不错，但 MongoDB 在每次测试之间启动和关闭。

为了提高速度，您可能想要做的是为整个测试套件启动和关闭一次。我的意思是：在测试之间保持 MongoDB 实例正常运行。

* * *

但是您不希望您的测试相互依赖。因此，您可以做的是使用不同的数据库名称 (UUID)，以便最终运行一个 MongoDB 实例，其中包含许多不同的数据库，每个测试一个。

或者您可以在每次测试之间清理您的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:24:54.260

使用单独安装的实例，您需要为您的测试套件最小化所涉及的流程设置和拆卸成本，因此使用嵌入式数据库的好处。

# android - 如何在 XML Parsing 中更具体？

> ID：10327351
> 
> 赞同：0
> 
> 时间：2012-04-26T04:42:20.273
> 
> 标签：android, xml, parsing, xml-parsing

我需要从“条件”中提取值，但在“current_conditions”下。这是我现在拥有的代码。它从条件中提取值，但从“forecast_conditions”中提取值。顺便说一句，我正在使用 SAXParser。

```
if (localName.equals("condition")) {
    String con = attributes.getValue("data");
    info.setCondition(con);
} 
```

这是 XML。

```
<current_conditions>
    <condition data="Clear"/>        
</current_conditions>

<forecast_conditions>
    <condition data="Partly Sunny"/>
</forecast_conditions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:53:03.967

您使用哪个解析器？如果您使用 XmlPullParser（或任何 SAX 样式的解析器），您可以在遇到`current_conditions`START_TAG 时设置一个标志，并在检查`condition`. `current_conditions`遇到END_TAG时不要忘记重置标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:44:21.950

我将第二个 XmlPullParser - 这很容易理解。

这是您的案例的一些代码（未经测试）

```
public void parser(InputStream is) {
    XmlPullParserFactory factory;
    try {
        factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(true);
        XmlPullParser xpp = factory.newPullParser();
        xpp.setInput(is, null);

        boolean currentConditions = false;
        String curentCondition;

        int eventType = xpp.getEventType();
        while (eventType != XmlPullParser.END_DOCUMENT) {
            if (eventType == XmlPullParser.START_TAG) {
                if (xpp.getName().equalsIgnoreCase("current_conditions")) {
                currentConditions = true;
                } 
                else if (xpp.getName().equalsIgnoreCase("condition") && currentConditions){
                    curentCondition = xpp.getAttributeValue(null,"Clear");
                }
            } else if (eventType == XmlPullParser.END_TAG) {
                if (xpp.getName().equalsIgnoreCase("current_conditions"))
                    currentConditions = false;
            } else if (eventType == XmlPullParser.TEXT) {
            }
            eventType = xpp.next();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

# google-app-engine - X-AppEngine-Region 的可能区域列表

> ID：10327353
> 
> 赞同：5
> 
> 时间：2012-04-26T04:42:26.607
> 
> 标签：google-app-engine, geolocation, request-headers

GAE [Docs on Request Headers](https://developers.google.com/appengine/docs/python/runtime#Request_Headers)说……

> **X-AppEngine-区域**
> 
> 发出请求的区域名称。此值仅在 X-AppEngine-Country 中的国家/地区背景下才有意义。例如，如果国家是“US”，地区是“ca”，那么“ca”的意思是“加利福尼亚”，而不是加拿大。

我在哪里可以获得可以退回的所有区域的列表？为什么它必须返回“ca”，而它只能返回“California”？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T08:12:46.130

完整列表在[ISO-3166-2](http://en.wikipedia.org/wiki/ISO_3166-2)标准中。
这就是为什么它返回“ca”而不是“California”：这是一个类似于国家代码的标准。

# php - 如何使用 php 将 html 电子邮件发送到 gmail？雅虎不是gmail

> ID：10327354
> 
> 赞同：0
> 
> 时间：2012-04-26T04:42:26.843
> 
> 标签：php, html, email, gmail

一年多来，我一直在使用 php 每天向人们发送 html 电子邮件，它一直有效，直到今天，所有发送到 gmail 帐户的电子邮件都只显示 html 代码。我最近没有更改任何代码。它现在总是只在 gmail 中显示 html 代码，而不是显示超链接和图像。

这是它显示的内容：

> 回复：updates@mysite.com
> 
> MIME 版本：1.0
> 
> 内容类型：text/html；字符集=UTF-8
> 
> X-Mailer：PHP/5.3.2 消息 ID：<20120426030303.E8B03A295@www1.mysite.com> 日期：2012 年 4 月 25 日星期三 20:03:03 -0700 (PDT)

... ETC。

发生了什么？谷歌改变了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T09:08:09.187

这也从昨天开始发生在我身上：25/04/2012。在过去的几年里，我每天都收到相同的电子邮件，相同的格式 - 昨天抓住停止以 HTML 格式显示！

比较消息内容 - 我可以从以前正确显示的电子邮件中看到的唯一不同之处是在以下身份验证结果之后添加：

> 日期：2012 年 4 月 25 日星期三 17:31:23 -0700 (PDT) 消息 ID：<4f98975b.9cecd80a.7d2a.66b3SMTPIN_ADDED@mx.google.com>

这可能与原因有关吗？

报废上述内容 - 看看这个 stie：http: [//johndoesdesign.com/blog/2012/php/getting-your-php-html-email-to-render-in-gmail/](http://johndoesdesign.com/blog/2012/php/getting-your-php-html-email-to-render-in-gmail/)

看来原因是`"\r\n"`- 使用只是`"\n"`代替。为什么这会突然发生 - 一定有什么改变了 gmail 的结局。我已经尝试过了，并为我解决了这个问题。希望它对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T04:50:17.577

我希望这可以帮助你

[从 PHP 页面使用 GMail SMTP 服务器发送电子邮件](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)

就像劳伦斯说的，接受你的问题，这样人们就可以更快更好地回答

# java - 如何在 java 脚本方法中访问 HashMap 值？

> ID：10327355
> 
> 赞同：1
> 
> 时间：2012-04-26T04:42:32.370
> 
> 标签：java, javascript

这是我的java代码

```
public HashMap<Integer, Integer> getNoOfWidgetsFromUsername(final String username) //vikas- method to get pid from db.
{
HashMap<Integer, Integer> obMap = new HashMap<Integer, Integer>();
int numwidgets=getTotalWidgetsOfUser(PartnerID);
obMap.put(new Integer(1),PartnerID);
obMap.put(new Integer(2),numwidgets);
return obMap;
} 
```

我把上面的代码放在一个函数中。我从 Javascript 调用该函数并将值返回给 Javascript。

这是我的 Javascript 代码。

```
JSClientService.getNoOfWidgetsFromUsername(username, {
callback : function(data) {
//here i want to print hashmap values.
}
}); 
```

如何访问 Javascript 端的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:51:41.697

它是一个 Java 对象，因此您无法在 javascript 中访问它（我猜在您的情况下*数据*将是未定义的）。

将您的 java 对象转换为 JSON 对象（类似这样）

```
JSONObject json = new JSONObject();
json.put("res",obmap); 
```

然后在你的js回调函数()

```
callback : function(data) {
  data = JSON.parse(data);
  for(var i in data.res){
      console.log(i); //key
      console.log(data.res[i]); //value  
  }
} 
```

*代码未测试*

# php - if 语句中的 PHP 验证

> ID：10327360
> 
> 赞同：1
> 
> 时间：2012-04-26T04:43:43.647
> 
> 标签：php, validation, radio-button

我想知道以下 php 验证是否正确编码。它有效，但我想知道是否有更好的方法来做到这一点。

```
if(isset($_POST['account_type']) && $_POST['account_type']==2){

if ((strlen(utf8_decode($this->request->post['cnpj'])) < 3) || (strlen(utf8_decode($this->request->post['cnpj'])) > 32)) {
            $this->error['cnpj'] = $this->language->get('error_cnpj');
        }   
} 
```

我需要这样，因为我有一个隐藏的必填字段，仅向申请公司帐户的客户显示。单击单选按钮后会显示该字段。因此，我只需要在客户单击值为 2 的零售商帐户单选按钮时验证该字段 [cnpj]。

非常感谢。

马文 M

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:10:22.817

您可以像下面的代码行一样执行您的代码：

```
if($_POST['account_type']==2 && $this->formValidation()){

       // Do your next process what you want to do if all set

}else{

     return $this->error;

} 
```

**// 表单验证函数**

```
function formValidation(){

if ((strlen(utf8_decode($this->request->post['cnpj'])) < 3) || (strlen(utf8_decode($this->request->post['cnpj'])) > 32)) {
            $this->error['cnpj'] = $this->language->get('error_cnpj');
        }   

} 
```

**我认为这将是在服务器端进行所有表单验证的最佳方式。而且大多数MVC结构都遵循这种方式。**

# javascript - 重定向到新页面而不显示父页面

> ID：10327361
> 
> 赞同：0
> 
> 时间：2012-04-26T04:44:01.213
> 
> 标签：javascript, asp.net-mvc-3, razor

我想重定向一个带有#的链接的页面。由于 # 之后的值不会通过 HTTP 请求发送到服务器，因此我在 Razor 视图中编写了如下脚本。

```
$(document).ready(function () {
if (window.location.hash) {
var url = window.location.href.toLowerCase().replace("ug_101", "UG");
window.location = url;
} 
```

我将代码放在页面顶部，但仍会在重定向之前呈现父视图中的元素。如何在不加载父视图的情况下重定向？或者如何在 C# 中的 URL 中获取 # 之后的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:47:47.040

您将代码放在一个`.ready()`函数中，因此在页面部分加载之前不会执行 jQuery。

尝试使用如下所示的脚本：

```
if (window.location.hash) {
var url = window.location.href.toLowerCase().replace("ug_101", "UG");
window.location = url; 
```

它们都不是 jQuery，也不需要加载页面的任何部分，因此该`.ready()`方法会无缘无故地导致您的延迟。

# css - 将 div 设置为彼此相邻

> ID：10327364
> 
> 赞同：1
> 
> 时间：2012-04-26T04:44:15.247
> 
> 标签：css, wordpress, html, css-float

我正在尝试将 id = #boxes1、#boxes2、#boxes3 的 3 个 div 彼此相邻放置。出于某种原因，#boxes3 低于 #boxes2。我拥有的容器应该足够大，以至于它不会向下移动。我知道它应该是“浮动：左；” 但我现在不知道为什么它会下降。

这是我来自 Wordpress [http://pastebin.com/uh00RT8v](http://pastebin.com/uh00RT8v)的 loop.php 这是 CSS [http://pastebin.com/FU3tqbRM](http://pastebin.com/FU3tqbRM)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:54:32.170

我认为您错过了`<div id="boxes2">`. 所以它没有正确渲染。

```
<div id="boxes2">
    <!--So lets set our category to only show technology-->
    <?php query_posts($query_string . '&cat=9'); ?>
    <!--Start the loop-->
    <?php while ( have_posts() ) : the_post(); ?>
        <!--Inside the loop-->
        <div class="box">
            <!--The post title-->
            <h1><?php the_title(); ?></h1>
            <!--The post image-->
            <a href="<?php the_permalink(); ?>"><?php the_post_thumbnail('homepage-thumb', array('alt' => '', 'title' => '')); ?></a>
        </div>  
    <?php endwhile; ?>
</div> <!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<< This one -->
<?php rewind_posts(); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:51:30.330

您可以使用 firebug 获得所有答案。它是一个很棒的 web 开发插件，适用于 firefox 和 chrome 等浏览器。并显示您实施它的页面，以便提供更多的暂停。希望能帮助到你 ：）

# java - 在spring bean文件中参数化导入资源

> ID：10327366
> 
> 赞同：0
> 
> 时间：2012-04-26T04:44:22.070
> 
> 标签：java, spring, datasource, propertyconfigurator

我有一个 datasource.xml 如下。我有两个用于 mySql 和 Oracle 的 sql bean 文件，因为一些查询依赖于数据库，至于 mysql 中的限制相当于 oracle 中的 rownum。我从 oracle 文件夹或 mysql 文件夹导入资源文件。现在，我必须在构建之前更改导入语句。是否有任何替代方法，例如在属性文件中包含数据库名称。PropertyConfigurer 至少对于 Spring 3.0.5 不能与 import 语句一起使用。

```
<import resource="classpath:oracle/SqlBeans.xml" />

<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" >
        <value>${ds-jndi}</value>
    </property> 
    <property name="lookupOnStartup" value="false" />
    <property name="cache" value="true" />
    <property name="proxyInterface" value="javax.sql.DataSource" />
</bean>

 <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
  <property name="dataSource" ref="dataSource" />
 </bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:37:49.933

@RC 提到的 Spring 配置文件是一个好主意，但我认为需要 3.1。

这可能更简单：

```
<context:property-placeholder location="classpath:db-${my.env}.properties"/> 
```

并`my.env`在java命令行上设置。

看到[这个](http://www.summa-tech.com/blog/2009/04/20/6-tips-for-managing-property-files-with-spring/)。

# phpstorm - 有没有办法在 PhpStorm IDE 中获取 Expression Web 样式的 CSS 代码提示？

> ID：10327368
> 
> 赞同：1
> 
> 时间：2012-04-26T04:45:00.363
> 
> 标签：phpstorm

Microsoft Expression Web 有一个非常好的 CSS 代码提示功能，因此当您输入属性时，它会在顶部列出所有选项以及用于代码完成的下拉列表。

![例子](../Images/3b6316fe4bcb6689c1691b81911413b7.png)

有没有办法在 PhpStorm 中复制这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T23:41:23.423

正如 PhpStorm 4.0.1 的评论中所指出的，此功能在 IDE 中可用，但不适用于 CSS 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-17T14:07:29.303

你几乎可以到达那里。开始输入属性。PhpStorm 显示自动完成建议：

[![在此处输入图像描述](../Images/d6f5e80dd657461e5aee2e0d97401d61.png)](https://i.stack.imgur.com/OjmOO.png)

点击你的退出键清除自动完成建议框，然后在 Mac 上按 Cmd + P ，PhpStorm 将显示 CSS 属性的签名：

[![在此处输入图像描述](../Images/51a4ace2ff9ee4bcf31b2f17985fe2ad.png)](https://i.stack.imgur.com/9imvF.png)

它不是完全自动的，但它非常接近。

# jquery - jQuery删除确认

> ID：10327375
> 
> 赞同：0
> 
> 时间：2012-04-26T04:45:48.857
> 
> 标签：jquery, asp.net, master-pages

在我的 asp.net 应用程序中有一个母版页和一些其他页面，在这些页面中，我添加了按钮和删除按钮，对于这个删除按钮，我在后面的代码中编写了删除方法，它工作正常。但在此删除功能触发之前，我需要显示一个删除确认框。为此，我在文件夹`custom.js`下命名的 jQuery 文件中编写了删除确认方法`Js`，并在母版页中引用了这个 js 文件，例如

```
<script src="/Js/custom.js" type="text/javascript"></script> 
```

在这个 custom.js 中，我在 custom.js 的 pageInit 下编写了删除确认方法，例如

```
function pageInit(){
$(".delete").click(function (event) {
    confirmationBox(event);
    });
}

function confirmationBox(event) {

var r = confirm("You are about to delete some items. Click Ok to continue");
if (r == true) {
    $(document).submit();
}
else {
    event.preventDefault();
}
} 
```

并在脚本中使用类名作为删除

```
<asp:Button ID="btnDelete" class="delete" Text="Delete"/> 
```

从脚本中调用 js 文件为

```
<script type="text/javascript">
 $(document).ready(function () {
     pageInit();
 });
 </script> 
```

但是这个删除确认方法根本没有触发，这个查询有什么问题，谁能帮助我.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:51:05.650

你应该在 $(document).ready() 中有删除函数：

```
$(document).ready(function() {
   // put all your jQuery goodness in here.
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:13:31.607

另一种实现您正在做的事情的方法是使用`OnClientClick`ASP.NET 按钮的事件

```
<asp:Button 
     ID="btnDelete" 
     class="delete" 
     Text="Delete" 
     OnClientClick="return confirmationBox()" /> 
```

```
function confirmationBox() {
    var r = confirm("You are about to delete some items. Click Ok to continue");
        if (r) {
            return true;
        }
        else {
            return false;
        }
    } 
```

那应该这样做:)

[**更新**]我的错，我忘了在函数
中包含返回；`OnClientClick`如果您在`return`确认中选择取消，则会停止回发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T05:19:10.970

您的删除按钮控件存在于母版页中。要引用删除按钮，请使用此语法 input[id$=btn_delete]。在 document.ready 函数中绑定按钮单击事件。以下代码对我有用。

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">

<asp:Button ID="btn_delete" runat="server" Text="Delete Confirmation" 
    onclick="btn_delete_Click" />

    <script type="text/javascript">

        $(document).ready(function () {

            $('input[id$=btn_delete]').click(function (event) {
                confirmationBox(event);
            });
        });

    function confirmationBox(event) {

        var r = confirm("You are about to delete some items. Click Ok to continue");
        if (r == true) {
            $(document).submit();
        }
        else {
            event.preventDefault();
        }
    }
    </script> 
```

# java - 如何拆分 XML ？举个例子？

> ID：10327386
> 
> 赞同：0
> 
> 时间：2012-04-26T04:47:57.570
> 
> 标签：java, xml

我有巨大的 XML。我需要解析该文件并将每个`<elem/>`字符串作为单个字符串保存到数据库中，但使用*内存占用低*的方法，因为文件可能很大（~500MB）。怎么做 ？我正在寻找这样做的可用示例。下面的示例和我不太好的解决方案：

```
<?xml version="1.0" encoding="UTF-8"?>
<doc>
  <header>...<header>
  <elem>
     <a/><b/><c>...</c>
  </elem>
  <elem>
     <a>...</a><b/><c>...</c>
  </elem>
  <elem>
     <a>...</a>
  </elem>
  ...
</doc> 
```

拆分后：

```
{'<elem/>', '<elem/>', ...} 
```

现在我正在使用如下 SAX DefaultHandler，但我认为这不是一个好的解决方案：

```
class DataFileParser extends DefaultHandler {

        StringBuffer sb; 
        boolean sElem = false; // is elem

        ...

        public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
                if(sElem) {
                    sb.append("<"+qName+">");
                }
                if (qName.equalsIgnoreCase("elem")) {
                    sb = new StringBuffer();
                    sb.append("<"+qName+">");
                    sElem = true;
                }
                ...
        }               

        public void endElement(String uri, String localName, String qName) throws SAXException {
                if (qName.equalsIgnoreCase("elem")) {
                    sElem = false;
                    sb.append("</"+qName+">");
                }
                ...
        }

        public void characters(char ch[], int start, int length) throws SAXException {
              if(sElem) {
                   sb.append(new String(ch, start, length));
               }
        }

 ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:31:59.407

如果您不想编写任何低级 Java 代码，还有其他解决方案。例如，对于 Saxon-EE，以下流式转换可以解决问题：

```
<xsl:stylesheet xmlns="http://www.w3.org/1999/XSL/Transform"
   xmlns:saxon="http://saxon.sf.net/" 
   version="3.0">

<xsl:template name="main">
  <xsl:for-each select="saxon:stream(doc('big.xml'))/*/elem">
    <xsl:result-document href="out{position()}.xml">
      <xsl:copy-of select="."/>
    </xsl:result-document>
  </xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T04:54:46.700

事实上，使用 SAX 解析器是一个很好的解决方案。您可能需要考虑直接在`endElement`. 但是，如果您需要一次编写整个内容（例如在单个 CLOB 中），则无论您使用什么解析器，都必须将其保存在某个地方。您可以为此放入临时文件。

在任何情况下，SAX 解析器都是最有效的解决方案，因为内存占用主要取决于您处理的数据量而不是解析器实现。

# sql - 创建 SQL 触发器（插入或更新），它将从一个表中获取数据并将其放入另一个数据库表

> ID：10327389
> 
> 赞同：1
> 
> 时间：2012-04-26T04:48:02.570
> 
> 标签：sql, sql-server, tsql, sql-server-2005, tridion

我有一张`Links`带有字段名称的表

```
[PUBLICATION_ID],
[PAGE_ID],
[COMPONENT_ID],
[COMPONENT_TEMPLATE_ID],
[COMPONENT_TEMPLATE_PRIORITY],
[COMPONENT_POSITION],[URL] 
```

在数据库中`Tridion_Broker`

我想在插入/更新时创建一个 SQL 触发器，它将从“链接”表中获取字段的数据`[PUBLICATION_ID], [URL]`并将其放入不同的数据库 ( `GoogleLinks`) 和表中`MyLinks`。

**编辑**：
我的实现如下：

```
DROP TRIGGER IF EXISTS Update_Google_List;
DELIMITER $$
CREATE TRIGGER Update_Google_List AFTER INSERT , UPDATE 
    ON Tridion_Broker.dbo.Links
FOR EACH ROW 
BEGIN
INSERT INTO GoogleLinks.dbo.MyLinks (PUBLICATION_ID, URL)
SELECT DISTINCT PUBLICATION_ID as n,URL as u 
FROM Tridion_Broker.dbo.Links
WHERE Page_ID =@PageID 
AND Component_Template_Priority >0 
AND PUBLICATION_ID NOT IN(232,481) 
AND NOT EXISTS (SELECT 1 
FROM MyLinks as g 
WHERE g.PUBLICATION_ID = Links.PUBLICATION_ID
)
ORDER BY PUBLICATION_ID
END$$
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T13:28:13.543

据我所知，创建数据库项目、修改数据库模型等会使支持合同无效。

我建议您在继续使用此方法之前仔细检查。

您可以使用 Deployer/Broker 扩展来实现相同的场景。在这种情况下，您将链接信息写入不同的表中，而无需触及数据模型。

Deployer/Broker 扩展是一个受支持的场景并且运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T21:19:36.313

可以在此处找到 Miguel 提到的扩展示例： [https ://www.sdltridionworld.com/articles/sdltridion2011/tutorials/Deployer_Extensions_With_Eclipse_1.aspx](https://www.sdltridionworld.com/articles/sdltridion2011/tutorials/Deployer_Extensions_With_Eclipse_1.aspx)

# html - 我应该如何在jsp页面中获取根文件夹路径

> ID：10327390
> 
> 赞同：10
> 
> 时间：2012-04-26T04:48:03.920
> 
> 标签：html, jsp

我想检索 web 应用程序的根路径，然后我想将链接附加到根路径。我试过 request.context 但它返回“http://localhost:8080/webapp/web-inf”。

例如我的根文件夹路径是

```
path  =  http://localhost:8080/webapp/ 
```

我想将剩余的链接附加到这个路径

```
helpPath= /help/page/help.htm

<a  href="${path} + ${helpPath}" target="_blank">name</a> 
```

任何帮助或指针真的很感激。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-26T04:53:14.620

```
<%=request.getContextPath()%> 
```

将为您提供应用程序的根路径，因此在您的情况下，它将是[http://localhost:8080/webapp](http://localhost:8080/webapp)

根据评论：

```
<%=request.getContextPath()%>/help/page/help.htm 
```

会给你你的页面

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-26T04:56:44.757

您可以使用 pageContext.request.contextPath

```
${pageContext.request.contextPath} 
```

所以你可以使用，

```
<a  href="${pageContext.request.contextPath}${helpPath}" target="_blank">name</a> 
```

但更好的方法是将基本 href 设置为此路径，然后按原样使用该路径。

```
<head>

        <base href="${pageContext.request.contextPath}">

    </head>
<body>
<a  href="${helpPath}" target="_blank">name</a>

</body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T04:51:37.887

我相信你可以使用 ServletContext 的[getRealPath()](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getRealPath%28java.lang.String%29)方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T05:04:23.907

你也可以使用

```
<c:url> 
```

jstl 标记。它将为您添加上下文路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T05:02:54.287

`<%=request.getContextPath()%>`会给`/webapp`

所以你的链接应该是这样的：

```
<a  href="<%=request.getContextPath()%>${helpPath}" target="_blank">name</a> 
```

# c# - 将 ObservableCollection 与 EF4 上下文同步

> ID：10327391
> 
> 赞同：0
> 
> 时间：2012-04-26T04:48:05.127
> 
> 标签：c#, wpf, mvvm, observablecollection

非常简单的问题......程序员将可观察集合中的更改与其对象上下文（EF4）同步的最常见方法是什么？在我的情况下，我有一个使用 EF4 作为我的 ORM 的 sql ce 4.0 db，并且我正在使用一个从数据库 (MVVM) 获取对象的可观察集合。

基本上，我想知道在操作可观察集合时设置一些添加、删除、修改对象上下文的代码的最合乎逻辑的方法。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:54:20.960

您可以订阅 ObservableCollection 的[CollectionChanged](http://msdn.microsoft.com/en-us/library/ms653375.aspx)事件，并添加任何 EF 逻辑以将插入/删除保存到您的数据库模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:11:50.827

实现这一点的最简单方法是创建您自己的自定义集合类来实现`INotifyCollectionChanged`. 通过这样做，您有机会在集合更改时添加和删除实体。更新实体不是集合类的角色，而是每个实体的模型包装器或视图模型的功能。

# css - 如何在div中制作长短信

> ID：10327393
> 
> 赞同：-2
> 
> 时间：2012-04-26T04:48:11.803
> 
> 标签：css

我在 div 框中有一条很长的消息，我正在寻找一种方法来显示带有滚动条（垂直）的 div 中的该文本消息，并且我有两个指向它的链接，如您所见：1）免责声明 2）行为上面的链接是超链接，所以当我点击这些链接时，我会根据选择显示下面的 div。那么有可能用漂亮的模型div或其他东西在超链接下方显示div吗？

我不是 CSS 人，所以如果可能的话，让 div 框看起来很棒:)

```
<span ><a href="#" >Disclaimer-1</a></span> <span class="slide1">
        &nbsp; &nbsp; | &nbsp; &nbsp; <a href="#" class="slide1">Behavior</a></span>
    <div id="one" >
        Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s 
    </div>
    <div id="second" >
          Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s    
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:50:26.500

如果你想要一个滚动条，设置 a`height`然后设置`overflow`值`auto`or `scroll`。

```
div#one,
div#two
{
    height: 120px;
    overflow: auto;
} 
```

至于您的最新编辑，您正在寻找 JavaScript 来实现类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:23:25.887

嗨，在左侧制作滚动条并格式化页面，请找到您可以使用的基本 css。

```
<style type="text/css">
        #one{
            overflow-y: scroll;
            padding:  15px;
            height: 150px;
            line-height: 25px;
            margin: 20px 0px 20px 0px;
        }
        #second{
            overflow-y: scroll;
            padding:  15px;
            height: 150px;
            line-height: 25px;
        }
        span a{
         padding-left:15px;
         color:blue;
         text-decoration: none;
         }
        span a:hover{
         padding-left:15px;
         color:blue;
         text-decoration: none;
        }

    </style> 
```

请指定要点`when i click on the div i just need the div to be underneath the links`。

谢谢..

# php - PHP：使用 UTF-8 的 json_encode 和 json_decode

> ID：10327399
> 
> 赞同：3
> 
> 时间：2012-04-26T04:48:36.453
> 
> 标签：php, json, utf-8

我有以下数组：

```
Array
(
    [1] => Array
        (
            [time] => 07:30
            [event] => Celebrity Organ Recital &acirc;€“ Sophie-V&Atilde;&copy;ronique Cauchefer-Choplin
        )
) 
```

（原始事件字符串为：“Celebrity Organ Recital – Sophie-Véronique Cauchefer-Choplin”，我使用带有 ENT_QUOTES 的 htmlentities）

当我使用 json_encode 时，事件字符串返回为 NULL，并在 MySQL 中保存为空字符串。

如果我不使用 htmlentities。我将在我的数据库中得到这个：“Celebrity Organ Recital u2013 Sophie-Vu00e9ronique Cauchefer-Choplin”。我使用了很多方法，但我仍然无法将此字符串转换回其原始字符串。

我真的需要一些帮助，我希望你能给我一个解决方案，在 json 中编码一个像上面这样的 UTF-8 字符串，然后将它保存到 MySQL，然后解码回原来的。我搜索了一段时间，但仍然找不到解决方案。

太感谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:45:54.343

在我看来，你不关心清理 sql 查询中的值 [http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

简单示例：我们有结构表：

```
CREATE TABLE `test` (
    `text` VARCHAR(1024) NULL DEFAULT '0'
)
COLLATE='utf8_unicode_ci'
ENGINE=InnoDB 
```

和 PHP 脚本

```
 header("Content-type:text/html;charset=utf8");
    $ar = array
        (
            1 => Array
                (
                    'time' => '07:30',
                    'event' => 'Celebrity Organ Recital – Sophie-Véronique Cauchefer-Choplin'
                )
        );

    $mysqli = new mysqli('localhost','root', '', 'test');

    $mysqli -> query("INSERT INTO `test` (`text`) VALUES ('" . json_encode($ar) . "')"); // we not escape characters like \, ", '

// now we use mysqli::real_escape_string
    $mysqli -> query("INSERT INTO `test` (`text`) VALUES ('" . $mysqli -> real_escape_string(json_encode($ar)) . "')"); // here we escape characters

    $mysqli_result = $mysqli -> query("SELECT * FROM `test");
    while($result = $mysqli_result -> fetch_assoc()){
        var_dump(json_decode($result["text"],true));
    } 
```

结果`var_dump`是：

```
array
  1 => 
    array
      'time' => string '07:30' (length=5)
      'event' => string 'Celebrity Organ Recital u2013 Sophie-Vu00e9ronique Cauchefer-Choplin' (length=68)

array
  1 => 
    array
      'time' => string '07:30' (length=5)
      'event' => string 'Celebrity Organ Recital – Sophie-Véronique Cauchefer-Choplin' (length=63) 
```

第二个`var_dump`正常

# iphone - 如何在 iPhone 中关闭表单模型视图

> ID：10327400
> 
> 赞同：0
> 
> 时间：2012-04-26T04:48:46.620
> 
> 标签：iphone, ios, ipad, uinavigationcontroller

我有三页。每个页面都将一些值推送到下一页，如下所示： bookpage----------values passing to >chapterpage---------values passing to>verse page。当用户从主页点击按钮时，它会显示一个带有书页的模型表单。代码是：

```
 BookSelectionview *detailViewController = [[BookSelectionview alloc] initWithNibName:@"BookSelectionview" bundle:nil];

    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:detailViewController];
    navController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    navController.modalPresentationStyle = UIModalPresentationFormSheet;

    UIBarButtonItem *doneBarButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone
                                                                                   target:self
                                                                                   action:@selector(modalViewDone)];
    detailViewController.navigationItem.rightBarButtonItem = doneBarButton;
    detailViewController.navigationItem.title = @"Book Selection";
    [doneBarButton release];

    [self.navigationController presentModalViewController:navController animated:YES];
    [detailViewController release];
    [navController release];
    [self resetReadViewToVerse:1];
} 
```

然后在我的章节页面中，我编写了这段代码来导航并将一些值传递给 verse 页面。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{         
    ChapterSelectionView *detailViewController = [[ChapterSelectionView alloc] initWithNibName:@"ChapterSelectionView" bundle:nil];
    detailViewController.contentSizeForViewInPopover = CGSizeMake(500, 600);

    //detailViewController.firstString = firstString;
    // ...
    // Pass the selected object to the new view controller.
    detailViewController.selectedIndex=indexPath.row;
    appDelegate.selectedBookIndex=indexPath.row;
    self.hidesBottomBarWhenPushed=YES;
    [self.navigationController pushViewController:detailViewController animated:YES];

    [detailViewController release];         
} 
```

在经文页面中是问题....在页面中包含圣经经文，它是按钮形式，当使用点击任何按钮时，它需要转到主视图并显示相应的经文，但它显示了表单内的主页，与对应的诗句..所以我把dismissmodelview动画：是的代码。但它兑现..我的诗句页面中的代码在按钮点击

```
appDelegate.selectedBook = [appDelegate.books objectAtIndex:appDelegate.selectedBookIndex];
appDelegate.selectedChapter = [NSString stringWithFormat:@"%d",appDelegate.selectedChapterIndex];
appDelegate.selectedVerse = [NSString stringWithFormat:@"%d",[sender.titleLabel.text intValue]];
[appDelegate reloadVerses];

ParallelReadViewController *detailViewController = [[ParallelReadViewController alloc] initWithNibName:@"ParallelReadViewController" bundle:nil];

[self.navigationController pushViewController:detailViewController animated:YES];

[detailViewController release];
[self.navigationController dismissModalViewControllerAnimated:YES]; 
```

如何关闭表单并使用相应的经文转到主页（parallelreadviewcontroller）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:59:33.647

在主视图的 viewDidLoad 中添加通知

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(dismissTheModelView:) 
                                             name:@"dismissTheModelView" 
                                           object:nil]; 
```

在主视图中写入函数

```
-(void)dismissTheModelView:(id)sender
{
     [self dismissModalViewControllerAnimated:YES];
} 
```

最后发布通知，您必须关闭弹出框控制器，例如

```
-(IBAction)cancelButtonPressed:(id)sender
{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"dismissTheModelView" object:nil];
} 
```

# c++ - 编程项目简介。坚持从表创建数据文件

> ID：10327401
> 
> 赞同：3
> 
> 时间：2012-04-26T04:48:46.783
> 
> 标签：c++, arrays

我得到了一个课堂项目，但被困在其中的一部分上。该项目中有这张表：

![在此处输入图像描述](../Images/dd0120173bdcb0217e4ec52f53dfe4d8.png)

如何将此信息创建到顺序文件中以读入 C++ 程序？看起来这将是一个 3 维数组。我是不是看得太远了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:19:58.803

这取决于你想要做什么。通常，如果您只是想读取它，您可以将其存储为平面文件。对于平面文件，您通常有两种常见的格式，固定长度记录或逗号分隔（您可以实现其他平面文件格式，但这是两种常见的格式）。

在定长记录中，每条记录都是固定长度，每个字段都是固定长度。例如

```
Turkey             1.00Swiss        .30Roll           .30Condiments         .10
Pastrami           1.30Swiss        .40Roll           .30Condiments         .10 
```

在逗号分隔的语言中，您可以像这样执行 Turkey,1.00,Swiss,.30,Roll,.30,Condiment,.10

使用固定长度记录的缺点是一旦指定并且取决于谁是文件的接收者，您的字段永远不会增长。例如，如果您的价格字段是五个空格，那么您的最大值将是 99.99，并且您将很难增加字段大小，因为如果某些其他应用程序依赖它是 5 个字符，它将不再兼容。逗号分隔更灵活一点，因为分隔符是逗号。使用逗号分隔，您通常可以使字段变大，因为您的逗号是分隔符。

还有另一种选择，即创建一个我将称为域特定格式的ini类型作为示例，请看下面

```
Sandwich: Turkey
Deli Slice: Turkey,1.00
Deli Slice: Swiss,.30
Bread: Roll,.30
Condiments: .30

Sandwich: Pastrami
Deli Slice: Pastrami,1.00
Deli Slice: Swiss,.40
Bread: Roll,.30
Condiments: .10 
```

这种格式更灵活，因为您可以添加更多字段。例如，假设您有一个名为 california 的新三明治，它需要肉奶酪和鳄梨。你可以像这样扩展它

```
Sandwich: California
Deli Slice: Turkey, 1.00
Deli Slice: American, .30
Deli Slice: Avocado, .50
Bread: Roll,.30
Condiments: .10 
```

使用这第三种格式和一些仔细的编程，您的新三明治将自动向后兼容。

每个文件都采用不同的读入策略。有一种叫做解析的东西，每个文件都有不同的方法。在固定长度记录中，方法是按字符位置读取每一列。在逗号分隔的文件中，您需要标记在 C++ 中读入的每一行，您有一个 strtok，但如果您使用托管 C++ .net，我相信您有一个 string.split。使用第三个选项，您实际上是在寻找诸如“Sandwich”、“Deli SLice”等关键字，然后您还必须标记这些项目，因为它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:53:46.740

您可能会使用各种约定。例如，

```
Turkey
Turkey, 1.00
Swiss,  0.30
Roll,   0.30
Condiments, 0.10

Pastrami
Pastrami, 1.30
Swiss,     .40
... 
```

这种格式很容易阅读：一行表格标题，然后是用逗号分隔的成分/价格对，然后是一个空行。然后重新开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T05:04:07.213

我不确定你是否知道`HashMaps`。如果没有，你可以查[一下](http://www.cplusplus.com/reference/stl/map/)。使用它会非常简单。

您可以拥有`map`一个`key = String`和`value = Integer`。将有 4 个键，“Turkey”、“pastrami”、“Ham”和“Special”，您可以将与它们关联的值作为`1,2,3,4`.

然后你可以让其他 4 人`maps`各有`key = String`和`Value = float`并输入上述数据。您可以使用第一张地图来检查正确的列，并使用其他地图来获取成本。

您当然可以使用上述方法来实现，`2D - arrays`但这将是一个很好的学习体验。祝你好运！！

# shell - ksh 和 AT&T sed，断行匹配模式

> ID：10327404
> 
> 赞同：0
> 
> 时间：2012-04-26T04:48:54.457
> 
> 标签：shell, unix, sed, ksh

我需要把'aaa bbb'分解成

```
aaa
bbb 
```

在一行代码中。在 gnused 中，我可以：

```
print 'aaa bbb'  | sed 's/ /\n/g' 
```

在 bash 中，我可以：

```
echo 'aaa bbb' | sed 's/ '"/`echo \\\n`/" 
```

但是在 ksh/zsh 中，在 AIX 中使用 at&t sed，这些都不起作用：

```
print 'aaa bbb' | sed "s/ /`echo -e \\\n`/"
print 'aaa bbb' | sed 's/ '"/`echo \\\n`/"
print 'aaa bbb' | sed "s/ /`echo \\\n`/" 
```

sed 中是否有任何解决方法，只需一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:55:14.157

假设该行中恰好有一个空格：

```
sed 'h;s/^[^ ]* //;x;s/ [^ ]*$//;G' 
```

为*每个*空间执行此操作：（我想我在`sed`这里触发了我本地的错误；我无法像上面那样组合命令）

```
$ echo aaa bbb ccc def ghi zzz |
> sed -e :s -e h -e 's/ .*$//' -e p -e x -e 's/^[^ ]* //' -e ts -e d
aaa
bbb
ccc
def
ghi
zzz 
```

（你可以看到为什么 GNU sed 被扩展来更好地处理这种情况。）你可以用保持空间做各种各样的事情，如果你使用条件分支（`s/.../.../;thereifmatched`）甚至更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:59:27.587

这可能对您有用：

```
echo -e "aaa bbb ccc\nxxx yyy zzz" |
sed 'G;:a;s/ \+\(.*\(.\)\)/\2\1/;ta;s/.$//'
aaa
bbb
ccc
xxx
yyy
zzz 
```

也许：

```
echo -e "aaa bbb ccc\nxxx yyy zzz" |
sed -e 'G' -e ':a' -e 's/ \+\(.*\(.\)\)/\2\1/' -e 'ta' -e 's/.$//'
aaa
bbb
ccc
xxx
yyy
zzz 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T06:13:48.810

我不确定这是否符合“单线”的条件......

```
print 'aaa bbb'  | sed 's/ /
/g' 
```

...这是一个单一的命令，我认为我以前在 at&t sed （或任何 SCO Unix 使用的）上使用过...

# java - 用于 DTMC 的稳态解决方案的 Java 库

> ID：10327409
> 
> 赞同：1
> 
> 时间：2012-04-26T04:50:17.437
> 
> 标签：java, eigenvector, markov-chains

我一直在使用[jMarkov](http://www.jmarkov.org/)来分析 CTMC。这似乎是为此目的定义最完善的 Java 库。我分析的其中一个部分还需要 DTMC 的稳态解决方案。尽管 jMarkov 手册中提到它也可以处理 DTMC，但作者似乎忽略了这种情况。因此，图书馆的文档似乎不完整。

有人可以指导我完成 jMarkov 或将我指向手册中可能有用的部分吗？如果存在另一个我可以使用的库，那也很棒。此外，如果有人能指出一个 Java 实现来帮助我找到矩阵的特征向量，我会很好。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-12T02:25:30.710

也许不适合您，但对于想要尝试 jMarkov 的其他人来说，这个问题有可能的解决方案：

首先，我认为 jMarkov 声称可以处理 DTMC，因为任何 DTMC 都可以在规范化过程中转换为 CTMC。因此，您必须将您的 DTMC 转换为 CTMC 才能利用 jMarkov。

其次，我确信 jMarkov 也允许在没有规范化的情况下处理 DTMC。如果您稍微指定您的问题，我们可以从您的问题中构建一个示例。

问候，

# java - 遍历java中的对象

> ID：10327411
> 
> 赞同：1
> 
> 时间：2012-04-26T04:50:26.143
> 
> 标签：java, object, traversal

我有一个返回类对象的方法。对象设置类的属性并返回。
我必须遍历对象并获取对象之前设置的属性的值。

我尝试使用 for-each 循环，迭代器但未能遍历。

有人可以帮我解决这个问题。在此先感谢。

代码：

```
public class ConsumerTool {

 public MessageBean getMessages() {
        MessageBean msgBean = new MessageBean();

        msgBean.setAtmId(atmId.trim());
        msgBean.setEventText(eventText.trim());
        msgBean.setEventNumber(eventNumber.trim());
        msgBean.setSeverity(severity.trim());
        msgBean.setSubsystemID(subsystemID.trim());
        msgBean.setUniqueEventID(uniqueEventID.trim());
        msgBean.setTaskID(taskID.trim());
        msgBean.setGenerator(generator.trim());
        msgBean.setGeneratorBuildVsn(generatorBuildVsn.trim());
        msgBean.setDateTime(dateTime.trim());

        this.msgBean = msgBean;
        return msgBean;
    }
} 
```

JavaBean 类：

```
public class MessageBean implements java.io.Serializable {  

    public String dateTime;
    public String severity;
    public String eventText;
    public String eventNumber;
    public String generator;
    public String generatorBuildVsn;
    public String atmId;
    public String uniqueEventID;
    public String subsystemID;
    public String taskID;

    //System.out.println("dateTime2222222"+dateTime);

    public String getAtmId() {
        return this.atmId;
    }

    public void setAtmId(String n) {
        this.atmId = n;
    }

    public String getDateTime() {
        return this.dateTime;
    }

    public void setDateTime(String n) {
        this.dateTime = n.trim();
    }

    public String getEventNumber() {
        return this.eventNumber;
    }

    public void setEventNumber(String n) {
        this.eventNumber = n;
    }

    public String getEventText() {
        return this.eventText;
    }

    public void setEventText(String n) {
        this.eventText = n;
    }

    public String getGenerator() {
        return this.generator;
    }

    public void setGenerator(String n) {
        this.generator = n;
    }

    public String getGeneratorBuildVsn() {
        return this.generatorBuildVsn;
    }

    public void setGeneratorBuildVsn(String n) {
        this.generatorBuildVsn = n;
    }

    public String getSeverity() {
        return this.severity;
    }

    public void setSeverity(String n) {
        this.severity = n;
    }

    public String getSubsystemID() {
        return this.subsystemID;
    }

    public void setSubsystemID(String n) {
        this.subsystemID = n;
    }

    public String getTaskID() {
        return this.taskID;
    }

    public void setTaskID(String n) {
        this.taskID = n;
    }

    public String getUniqueEventID() {
        return this.uniqueEventID;
    }

    public void setUniqueEventID(String n) {
        this.uniqueEventID = n;
    }

} 
```

主题是对象设置 javabean 类的属性，我必须从 UI 中获取这些值。

在 Jsp 中

```
<%
MessageBean consumer = msg.getMessages();

//Now here i want to iterate that consumer object
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:02:38.643

由于`MessagesBean`似乎符合[javabeans 规范](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html)，您可以只使用[`java.beans.Introspector`](http://docs.oracle.com/javase/6/docs/api/java/beans/Introspector.html)它。

```
MessageBean messageBean = consumerTool.getMessages();
// ...

BeanInfo beanInfo = Introspector.getBeanInfo(MessageBean.class);

for (PropertyDescriptor property : beanInfo.getPropertyDescriptors()) {
    String name = property.getName();
    Object value = property.getReadMethod().invoke(messageBean);
    System.out.println(name + "=" + value);
} 
```

这一切都在使用[反射 API](http://docs.oracle.com/javase/tutorial/reflect/index.html)的幕后。

* * *

**更新**您的编辑表明您打算使用它在 JSP 中呈现数据。那么这并不是真正正确的方法。咬紧牙关，分别指定每个属性。这样您就可以完全控制排序。

# php - 从 Android 应用程序连接和更新 php 服务器

> ID：10327424
> 
> 赞同：1
> 
> 时间：2012-04-26T04:52:14.540
> 
> 标签：php, android, mysql, latitude-longitude

我创建了一个运行良好的 gps 应用程序。现在我正在尝试将它连接到带有 mysql 数据库的 php 服务器，其中所有人员的位置都会自动更新。我是这部分的**新用户**。我已经尝试了其中的一些，但我不认为它写..有人可以帮助我并指导我了解我应该如何做的过程..您的帮助将不胜感激。下面是我从 frieds 帮助和 php 脚本中编写的代码。

```
public class Post extends LocService {{

TelephonyManager telephonyManager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
String deviceid = telephonyManager.getDeviceId();

    //this is JSON part to put your information inside it
    String postData = "{\"request\":{\"type\":\"locationinfo\"},\"userinfo\":{\"latitude\":\""+latitude+"\",\"longitude\":\""+longitude+"\",\"deviceid\":\""+deviceid+"\"}}";

    HttpClient httpClient = new DefaultHttpClient();

    // Post method to send data to server
    HttpPost post = new HttpPost("http://location.net/storeg.php");

    SQLiteDatabase db = databasehelper.getWritableDatabase();
    Cursor cursor = db.query(TABLE, null, null, null, null);

    cursor.moveToFirst();
    while(cursor.isAfterLast() == false) {

        if(cursor.getString(cursor.getColumnIndex("Sync")).equals("yes") ) {

            String mob = cursor.getString(cursor.getColumnIndex("MobileID"));
            String latitude = cursor.getString(cursor.getColumnIndex("Latitude"));
            String longitude = cursor.getString(cursor.getColumnIndex("Longitude"));
            String service = cursor.getString(cursor.getColumnIndex("Service"));

            JSONObject json = new JSONObject();
            try {
                json.put("MobileID", mob);
                json.put("Latitude", latitude);
                json.put("Longitude", longitude);
                json.put("Service", service);

            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                receive = HttpPostExample.SendJsonUpdate(json, Sync_URL);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Toast.makeText(context,  receive,Toast.LENGTH_SHORT).show();
        }
        cursor.moveToNext();    
    }
    cursor.close();

    try {
        post.setURI(new URI("http://location.net/storeg.php"));
    } catch (URISyntaxException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    // set your post data inside post method    
    try {
        post.setEntity(new StringEntity(postData));
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    // execute post request here 
    try {
        HttpResponse response = httpClient.execute(post);
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
} 
```

PHP 脚本

```
<?php

$con = mysql_connect("localhost","root","");
if (!$con)
 {
  die('Could not connect: ' . mysql_error());
 }

mysql_select_db("mel_db", $con);

$latitude = $_POST['latitude'];
$longitude = $_POST['longitude'];
$service = $_POST['service'];
$devid = $_POST['devid'];

$sql = "INSERT INTO  `mehul_db`.`locations` (
`id` ,
`devid` ,
`latitude` ,
`longitude` ,
`service`
)
VALUES (
NULL ,  '$devid',  '$latitude',  '$longitude',  '$service'
);";
if (!mysql_query($sql,$con))
{
   die('Error: ' . mysql_error());
  }

mysql_close($con);

?> 
```

请帮助我完成这个过程......或者建议我应该如何做......

*已*编辑：* *得到此代码后，我可以使用它来获取更改变量后的纬度和经度.. 吗？

```
String result;
    try{

            JSONArray jArray = new JSONArray(result);

            for(int i=0;i<jArray.length();i++){

                    JSONObject json_data = jArray.getJSONObject(i);

                    Log.i("log_tag","id: "+json_data.getInt("id")+

                            ", name: "+json_data.getString("name")+

                            ", sex: "+json_data.getInt("sex")+

                            ", birthyear: "+json_data.getInt("birthyear")

                   );

            }

   finally }

    }catch(JSONException e){

            Log.e("log_tag", "Error parsing data "+e.toString());

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:35:33.307

```
 String url="http://location.net/storeg.php";

    DefaultHttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(url);

    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);
    nameValuePairs.add(new BasicNameValuePair("latitude", latitude));
    nameValuePairs.add(new BasicNameValuePair("longitude", longitude));
    nameValuePairs.add(new BasicNameValuePair("service", service));
    nameValuePairs.add(new BasicNameValuePair("devid", devid));

    httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    HttpResponse httpResponse = httpClient.execute(httpPost);
    InputStream httpEntity = httpResponse.getEntity().getContent(); 
```

您可以使用此代码通过 post 将参数发送到 php，作为响应，您将获得 inputstream。

# jquery - 点击功能的jquery

> ID：10327425
> 
> 赞同：0
> 
> 时间：2012-04-26T04:52:16.443
> 
> 标签：jquery, ruby-on-rails, gallery

我希望能够单击拇指并在图库中显示更大的图片。这是我的看法。

# 看法

```
<div class="gallery">

 <ul class="slideshow">
  <% @images.each do |img|%>
   <li>
      <%= link_to image_tag(...), :alt => img.name ), img %>
   </li>
  <% end %>
</ul>

<div class="thumbs">
 <% @images.each do |img|%>
 <a href="javascript:void(0)" rel="<%= img.images... %>" class="slideshow">
   <%= image_tag(...)%>
 </a>
<% end %>
</div>

</div> 
```

这是我的js代码

# js

```
function click() {

$('.thumbs').click(
function() {
var gallery = $(this).attr("rel");
$('ul.slideshow').removeClass('show');
$(this).addClass('show');
$('slideshow').html('<img src="' + gallery + '" />');
return false;
})
} 
```

但它似乎不起作用。现在，较大的幻灯片也有一个 setInterval，因此所有不同的较大图像都会旋转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:58:43.047

为什么在 click() 函数中使用 this.. 你可以直接这样使用..

```
$('.thumbs').click(function() {
var gallery = $(this).attr("rel");
$('ul.slideshow').removeClass('show');
$(this).addClass('show');
$('slideshow').html('<img src="' + gallery + '" />');
return false;
}); 
```

# java - 随机 RSS 数据

> ID：10327429
> 
> 赞同：0
> 
> 时间：2012-04-26T04:53:00.950
> 
> 标签：java, android

我对android有点陌生，所以请多多包涵。

我需要一些帮助，我有一个 RSS 提要，里面有能量提示。我不想在列表视图中显示所有这些，我想在一个有一个计时器的活动上一次显示一个，该计时器可以在文本视图中自动切换它们，这个活动还将有两个按钮“上一个”和“下一个”，它们将覆盖计时器。是否可以？任何指针将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:05:06.110

听起来您可能正在寻找的那种视图是[ViewSwitcher](http://developer.android.com/reference/android/widget/ViewSwitcher.html)。这将允许您在应用程序的不同视图之间切换和动画。虽然您可以想象更复杂的配置（实际上，任何东西），但这对您来说可能是一个不错的选择，因为它已经融入了框架。如何控制视图是一个稍微不同的问题，但是，那里有多个 ViewSwitcher 教程，您可以轻松地实现一个在视图之间切换的 Timer。你所做的很简单：告诉计时器在一段时间后触发。如果用户在计时器触发之前按下某个按钮，取消计时器并（也许）重置它？

# mfc - 如何在 CMFCPropertyGridProperty 中向属性组添加子属性

> ID：10327433
> 
> 赞同：0
> 
> 时间：2012-04-26T04:53:26.023
> 
> 标签：mfc

如何动态添加属性`CMFCPropertyGridProperty`？我知道我们有一种`AddProperty`添加属性的方法，但我想将我的新属性作为子项添加到已添加到`CMFCPropertyGridProperty`. 我可以使用`GetProperty`方法来获取任何使用索引的属性。但是我无法将我的新属性作为子项添加到我检索到的属性中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:52:22.830

我搞定了。

```
CMFCPropertyGridProperty* pGroup = m_wndPropList.GetProperty(Index);
CMFCPropertyGridProperty *prop = new CMFCPropertyGridProperty(_T(“SampleName”), (_variant_t) _T(“SampleValue”), _T("Custom Property"));
pGroup->AddSubItem(prop);
m_wndPropList.AdjustLayout(); // This redraws the properties 
```

# php - 使用 php 在网络上使用 ip 或计算机名读取文件

> ID：10327434
> 
> 赞同：5
> 
> 时间：2012-04-26T04:53:27.300
> 
> 标签：php, file-get-contents, file-exists

当我通过 ip 或计算机名在 LAN 网络上使用 php 读取文件时。

```
$url = "\\\\192.168.0.200\\testshare\\1.txt";
        if(file_exists($url) == TRUE) {
            echo "OK";
        } else {
            echo "Error";
        } 
```

结果：总是“错误”。如果我使用函数 file_get_contents ($url , true); 结果：

```
Warning: file_get_contents(\\192.168.0.200\testshare\1.txt) [function.file-get-contents]: failed to open stream: Permission denied in D:\services\htdocs\test.php on line 3 
```

当然，文件夹“testshare”是设置共享和权限所有人完全控制的。如果我用磁带浏览器：\192.168.0.200\testshare\1.txt 它读取文件 1.txt 的内容。你能帮助我吗？每个想法都对我有帮助，我非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T05:18:11.690

这是您在本地执行此操作（Win 7）的方法，如果它是远程服务器，您可能必须跳过一些防火墙障碍

在您的桌面上创建一个空白文件夹并将文件放入其中，然后右键单击它并单击与...共享，然后单击特定人员，然后在下拉选项框中选择所有人。

您将获得一个看起来像的地址`testshare (file://YOUR-PC-NAME/Users/YourAcount/Desktop/testshare)`

然后像这样使用该地址：

```
<?php
$url = "//YOUR-PC-NAME/Users/YourAcount/Desktop/testshare/1.txt";
if(file_exists($url) == TRUE) {
    echo "OK"; 
} else {
    echo "Error";
}
?> 
```

对于远程服务器，请记住在您的软件防火墙中允许端口 137,445，这也是一个安全风险，所以不要让外部 WAN 流量访问。我记得XP默认共享C：驱动器的日子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:30:26.467

听起来您正试图通过 PHP 访问网络共享[(smb) 。](http://en.wikipedia.org/wiki/Server_Message_Block)

`file_get_contents`仅支持[以下协议。](http://us2.php.net/manual/en/wrappers.php)

SMB 不是受支持的协议，但是有一些可用的实现。在我的搜索中不断出现的是 smbwebclient（未经测试）：

*   [smbwebclient 的 FreeCode 下载站点](http://freecode.com/projects/smbwebclient)
*   [关于 smbwebclient 的教程帖子](http://smorgasbork.com/component/content/article/34-web/66-accessing-smb-servers-with-php)

# android - Wamp服务器到android物理设备的连接？

> ID：10327439
> 
> 赞同：0
> 
> 时间：2012-04-26T04:54:20.043
> 
> 标签：android, wamp

我有一个 wamp 服务器。我已经写了我的安卓客户端。如果我运行该应用程序，则在模拟器上的响应很好……但是相同的代码在真实设备上不起作用，我的意思是我没有得到响应……

这是代码...

```
public static final String SERVER_URL = "http://192.168.1.3/AndroidListServer/server.php?command=getAnimalList";
private static String executeHttpRequest(String data) {
  String result = "";
  try {
   URL url = new URL(SERVER_URL);
   URLConnection connection = url.openConnection();

   /*
    * We need to make sure we specify that we want to provide input and
    * get output from this connection. We also want to disable caching,
    * so that we get the most up-to-date result. And, we need to 
    * specify the correct content type for our data.
    */
   connection.setDoInput(true);
   connection.setDoOutput(true);
   connection.setUseCaches(false);
   connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");

   // Send the POST data
   DataOutputStream dataOut = new DataOutputStream(connection.getOutputStream());
   dataOut.writeBytes(data);
   dataOut.flush();
   dataOut.close();

   // get the response from the server and store it in result
   DataInputStream dataIn = new DataInputStream(connection.getInputStream()); 
   String inputLine;
   while ((inputLine = dataIn.readLine()) != null) {
    result += inputLine;
   }
   dataIn.close();
  } catch (IOException e) {
   /*
    * In case of an error, we're going to return a null String. This
    * can be changed to a specific error message format if the client
    * wants to do some error handling. For our simple app, we're just
    * going to use the null to communicate a general error in
    * retrieving the data.
    */
   e.printStackTrace();
   result = null;
  }

  return result;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:48:02.197

解决了伙计们......这是Rajesh提到的防火墙的问题......我应该对所有可能的参数进行彻底测试......但是嘿我正在学习:)

# c# - 如何从 MDIParent 表单调用 MdiChild

> ID：10327441
> 
> 赞同：0
> 
> 时间：2012-04-26T04:54:24.647
> 
> 标签：c#, mdichild, mdiparent

我使用此方法从 MainForm 创建了一个新的 MdiChild：

```
AdminLogInForm adminForm;
 private void LogInAsAdminMenuItem_Click(object sender, EventArgs e)
    {
        if (adminForm == null)
        {
            adminForm = new AdminLogInForm();
            adminForm.MdiParent = this;
            adminForm.Show();
            adminForm.Dock = DockStyle.Fill;
            adminForm.BringToFront();
            LogInAsAdminMenuItem.Enabled = false;              
        }
        else
        {
            adminForm.Activate();
            adminForm.BringToFront();
        }
    } 
```

为什么当我关闭我的孩子时，使用 chld 表单“this.close()”使用该方法我无法再打开它？

我在那里调用 close();

```
 private void cancelLogInButton_Click(object sender, EventArgs e)
    {
        this.MdiParent.Activate();            
        if(this.MdiParent!=null)
        ((MainForm)this.MdiParent).LogInAsAdminMenuItem.Enabled = true;
        this.Close();
    } 
```

顺便说一句，在我解决这个问题之前我问过的工作。关闭（）；毕竟声明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:05:29.250

通过关闭表单，您不会将`adminForm`实例设置为 null （这是您的 if 条件将在您下次尝试打开它时检查的内容。）

在处理您的表格时 make `adminForm`=`null`然后您的 if 条件将在下次起作用。

```
private void LogInAsAdminMenuItem_Click(object sender, EventArgs e)
    {
        if (adminForm == null)
        {
            adminForm = new AdminLogInForm(this);
            adminForm.Disposed += new EventHandler(adminForm_Disposed); //Add Disposed EventHandler
            adminForm.MdiParent = this;
            adminForm.Show();
            adminForm.Dock = DockStyle.Fill;
            adminForm.BringToFront();
            LogInAsAdminMenuItem.Enabled = false;              
        }
        else
        {
            adminForm.Activate();
            adminForm.BringToFront();
        }
    }

    void adminForm_Disposed(object sender, EventArgs e)
    {
        adminForm = null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T22:33:39.267

正如 Marshal 所描述的那样，关闭表单会使其处置，您应该像这样添加处置条件

```
AdminLogInForm adminForm;

private void LogInAsAdminMenuItem_Click(object sender, EventArgs e)
    {
        if (adminForm == null || adminForm.IsDisposed)
        {
            adminForm = new AdminLogInForm();
            adminForm.MdiParent = this;
            adminForm.Show();
            adminForm.Dock = DockStyle.Fill;
            adminForm.BringToFront();
            LogInAsAdminMenuItem.Enabled = false;              
        }
        else
        {
            adminForm.Activate();
            adminForm.BringToFront();
        }
    } 
```

或者你也可以创建一个函数来使用表单作为 mdi [像这样](https://stackoverflow.com/questions/9870532)

# sql - SQL - 对两行数据求和，同时仍显示其余行

> ID：10327448
> 
> 赞同：1
> 
> 时间：2012-04-26T04:55:41.963
> 
> 标签：sql, sum, row

例如，有一个表格，其中列出了销售代表及其销售额。两个代表 ID 用于同一个代表，因此我需要能够在查询中将这两行合并为一个，同时仍显示其余行。无论是在 SQL 查询中完成，还是在 PHP 中任一种方式都可以。

所以这就是表格的样子：

```
ID    Sales
100   $5
101   $10
102   $2
500   $3 
```

我需要它像这样输出：

```
ID    Sales
100   $8
101   $10
102   $2 
```

其中 ID 100 的销售额是 100 和 500 的总和。

我敢肯定这不会太难，但我对 SQL 或 PHP 还不是很熟悉，但我正在努力学习。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:00:35.130

使用两个单独的查询然后联合

```
SELECT ID, SUM(Sales) FROM table WHERE ID IN (100,500)
UNION ALL
SELECT ID, Sales FROM table WHERE ID NOT IN (100,500) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:04:01.500

尝试

```
select id, sum(sales) from your_table 
group by case id 
         when 100 then -1 
         when 500 then -1 
         else id end; 
```

# php - 对 codeigniter 驱动的子域使用公共会话时出错

> ID：10327450
> 
> 赞同：2
> 
> 时间：2012-04-26T04:55:56.233
> 
> 标签：php, codeigniter, session, subdomain

我有一些 codeigniter 驱动的子域并使用本机 codeigniter 会话库。有一个子域创建和更新会话，其他子域必须共享会话。我无法在其他子域之间共享会话。我已经更改了**application/config.php中的配置参数**

```
$config['cookie_domain']    = "example.com"; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:44:16.860

在开头添加一个点：`$config['cookie_domain'] = ".example.com";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:26:30.740

我面临着同样的问题。

将“.example.com”添加到 cookie_domain 对我不起作用。我也为两个子域使用了不同的加密密钥 ( `$config['encryption_key']`)。

当它们相同时，会话就可以在两个子域中使用。

# python - 如何从 Objective-C 应用程序与正在运行的 python 进程通信？

> ID：10327451
> 
> 赞同：1
> 
> 时间：2012-04-26T04:56:21.123
> 
> 标签：python, objective-c

我正在构建一个 Objective-C mac 应用程序。我希望该应用程序能够启动并与同一个正在运行的 python 进程持续通信。

例如，基本流程可能是：

1.  应用程序启动，我在后台启动一个python进程
2.  应用导入一些库并在python进程中初始化一些变量
3.  用户做了一些事情，我使用初始化的变量在这个 python 进程上运行一些 python 代码，并在我的 mac 应用程序中使用 python 表达式的结果

我可以使用哪些技术来完成此任务？任何指导都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:22:05.060

一种可能的解决方案是通过 Python 进程运行模拟 Web 服务。定义您自己的接口（很可能是 RESTful API）供您的 Objective-C 应用程序访问。也许它在性能上会有点贵 - 这取决于您实际任务的复杂性以及您想要在两个进程之间传输的数据量。

例如，在 Python 进程中，在 8080 端口上运行一个标准的 HTTP 服务，一直在监听。然后 Obj-C 应用程序向 localhost 发送请求，例如：

```
http://127.0.0.1:8080/my_service/start_task
http://127.0.0.1:8080/my_service/get_progress
http://127.0.0.1:8080/my_service/get_result 
```

Python 处理该请求，执行某些操作并在 HTTP 响应中返回结果。

顺便说一句，也许您可​​以考虑在 Obj-C 应用程序中直接通过[C 接口](http://docs.python.org/c-api/)调用 Python 方法，而不是在单独的进程中运行 Python 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:40:31.973

在我看来，在两个应用程序之间建立通信的最简单方法是客户端-服务器协议**XMLRPC**。[Cocoa](http://www.ditchnet.org/xmlrpc/)和[Python](http://docs.python.org/py3k/library/xmlrpc.client.html)都支持它。

Python 部分相当简单：

```
import xmlrpc.client
rpcProxy = xmlrpc.client.ServerProxy(URL_OF_SERVER)
rpcProxy.doJobInMacApp(arg1, arg2) 
```

至于 Objective-C 部分，我不知道，但似乎有可能：[XML-RPC Server in Cocoa](https://stackoverflow.com/questions/3909093/xml-rpc-server-in-cocoa)或[Best way to use XML-RPC in Cocoa application？](https://stackoverflow.com/questions/218538/best-way-to-use-xml-rpc-in-cocoa-application)

# iphone - iPhone UI 小按钮？

> ID：10327454
> 
> 赞同：0
> 
> 时间：2012-04-26T04:56:45.110
> 
> 标签：iphone, objective-c, user-interface

[http://g.virbcdn.com/_f/cdn_images/resize_1280x640/29/PageImage-489404-2437983-IMG_4531.PNG](http://g.virbcdn.com/_f/cdn_images/resize_1280x640/29/PageImage-489404-2437983-IMG_4531.PNG) 大家好，我们正在尝试弄清楚如何在图像的左侧做橙色编号的小标签多于。如您所见，当数字为 6 时，它看起来像一个圆圈。当它是 33 时，标签看起来更宽。有人知道怎么做吗？我们的开发人员认为它是用 UIButton 制作的。可以用标签来做吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T05:03:39.547

CALayer 类的cornerRadius 属性可以用来实现这一点。每个视图都有一个 CALayer 实例，我们可以在其上执行某些操作。意味着我们可以通过使用来获得圆角 -

```
myLabel.layer.cornerRadius = //radius that we want; 
```

同样对于访问层，我们需要在我们的应用程序中具有以下框架-

```
<QuartzCore/QuartzCore.h> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:26:24.843

首先添加 QuartzCore FrameWork，然后在 .m 文件中使用

```
#import "QuartzCore/CALayer.h" 
```

然后使用此代码您想在哪里显示

```
UIButton *Mybutton = [UIButton buttonWithType:UIButtonTypeCustom];

    Mybutton.backgroundColor=[UIColor orangeColor];
    [Mybutton addTarget:self action:@selector(buttonAction) forControlEvents:UIControlEventTouchUpInside];

    [Mybutton setTitle:@"1" forState:UIControlStateNormal];

    Mybutton.frame = CGRectMake(135.0, 180.0, 40.0, 40.0);

    Mybutton.clipsToBounds = YES;

    Mybutton.layer.cornerRadius = 20;

    Mybutton.layer.borderColor=[UIColor greenColor].CGColor;

    Mybutton.layer.borderWidth=2.0f;

    [self.view addSubview:Mybutton]; 
```

按钮看起来像... ![这](../Images/6efc331cb2aa6061f9c96fe982eda63b.png)

# vba - Excel VBA“内存不足”调试技巧

> ID：10327457
> 
> 赞同：5
> 
> 时间：2012-04-26T04:57:23.367
> 
> 标签：vba, excel, out-of-memory

我正在调试关于 SO 的其他一些*问题中提到的问题，并在调试过程中注意到了一个奇怪的行为。

行为：粘贴复杂公式时出现“内存不足”错误。在我迭代的 20,000 行中，只有大约一半在错误之前粘贴了公式。注释掉几乎所有代码，错误就消失了。逐步取消注释代码，以发现导致它的代码的特定部分。最终取消注释所有代码并停止遇到错误！

这意味着完全相同的代码在同一个 Excel 实例中运行良好，修复它只需要运行各种较轻版本的代码，然后再返回原始版本。什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:14:08.227

假设您每次运行的数据都完全相同，听起来您的问题更像是环境问题 - 问题可能是操作系统内存不足。在 Excel 2007 中，公式和数据透视缓存的可用内存增加到 2 GB，因此这可能不是问题。但是，它当然也受到您的操作系统当时可用的内存量的限制。

出现问题的原因可能是当您第一次测试它时，您的可用操作系统内存（来自其他正在运行的进程......甚至可能被后台程序（例如运行扫描的防病毒软件）推到了极限）比运行时低稍后完整的宏。我会尝试在任务管理器打开的情况下运行你的宏，看看你的物理内存是否接近低位。此外，（假设您使用的是 Excel 2007 或更高版本）查看 Excel 使用了多少内存，看看您是否接近 2GB 限制。我怀疑这会是问题，但至少值得仔细检查。此外，就像 Zairja 所说，请确保您在开始时将计算设置为手动。

您说您使用的是复杂的公式...查看这篇关于[提高 Excel 性能的文章](http://msdn.microsoft.com/en-us/library/aa730921%28v=office.12%29.aspx#Office2007excelPerf_BigGridIncreasedLimitsExcel)

文章中有很多有用的信息可能会帮助您简化宏。

这对您有帮助吗？

# html - html5电子商务产品列表网格语义

> ID：10327471
> 
> 赞同：1
> 
> 时间：2012-04-26T04:58:53.753
> 
> 标签：html, e-commerce, semantics

我试图了解电子商务网站范围内新 html5 元素的语义。

我觉得在实际的产品页面上，整个产品信息都适合在文章标签中。

但是，在产品类别列表的范围内，将每个产品包装在文章标签中是否明智，或者其他的语义方式可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:26:11.390

此处是否`<article>`合适是一个判断调用（[HTML5 Doctor](http://html5doctor.com/the-article-element/)有一个有用的概述），但是由于您实际上是在谈论项目*列表*，所以我认为`<li>`s in an `<ol>`（或者`<ul>`如果项目是无序的）是最明显的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T16:27:10.577

是的，我建议`article`为每个产品使用标签，确保将所有文章包装在一个`section`标签中。

# jqgrid - JQgrid 刷新按钮单击

> ID：10327475
> 
> 赞同：5
> 
> 时间：2012-04-26T04:59:08.460
> 
> 标签：jqgrid, refresh

我想在 JQGrid 的 Refresh 按钮单击上编写代码。有什么活动吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-26T06:09:09.640

如果您需要在开始刷新*之前*执行一些操作，您应该使用[beforeRefresh](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3anavigator#parameters)回调：

```
$("#grid_id").jqGrid('navGrid', '#gridpager', {
    beforeRefresh: function () {
        // some code here
    }
}); 
```

如果您需要绝对另一种网格刷新实现，您不会调用`$("#grid_id").trigger("reloadGrid");`（这听起来很奇怪），您可以通过使用`refresh: false`选项来删除标准刷新按钮并使用[navButtonAdd](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_buttons)添加看起来与原始按钮完全相同的自定义按钮：

```
$("#grid_id").jqGrid('navGrid', '#gridpager', {refresh: false});
$("#grid_id").jqGrid('navButtonAdd', "#gridpager", {
     caption: "", title: "Reload Grid", buttonicon: "ui-icon-refresh",
     onClickButton: function () {
         alert('"Refresh" button is clicked!');
     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:06:00.790

刷新按钮的css是`ui-icon-refresh`

所以你可以在这个css上写你的自定义代码，比如

```
jQuery('.ui-icon-refresh').click(function(){
  // do your work
}); 
```

# maps - 显示在地图下的 gmap4rails 框不会消失

> ID：10327476
> 
> 赞同：0
> 
> 时间：2012-04-26T04:59:24.890
> 
> 标签：maps

在我的地图下面有一个盒子，我可以离开。我的索引有一张主地图，还有一张地图可供展示。我有两个不同的地图选项。当我查看我的页面源代码时，我看到了两个地图的脚本。我无法弄清楚为什么会这样。

```
<script type="text/javascript" charset="utf-8">
Gmaps.map = new Gmaps4RailsGoogle();
Gmaps.load_map = function() {
Gmaps.map.map_options.auto_adjust = true;
Gmaps.map.initialize();
Gmaps.map.markers = [{"description":"test, 217 cleveland ave , liverpool, This is some additional information.","lat":43.1155,"lng":-76.2292},{"description":"bah, 215 university place, syracuse, ","lat":43.0396,"lng":-76.1355}];
Gmaps.map.markers_conf.do_clustering = true;
Gmaps.map.create_markers();
Gmaps.map.adjustMapToBounds();
Gmaps.map.callback();
};
window.onload = function() { Gmaps.loadMaps(); };
</script>

    <script type="text/javascript" src="//maps.google.com/maps/api/js?v=3.8&sensor=false&libraries=geometry&language=&hl=&region="></script>

`<script type="text/javascript" charset="utf-8">
Gmaps.map = new Gmaps4RailsGoogle();
Gmaps.load_map = function() {
Gmaps.map.map_options.auto_adjust = true;
Gmaps.map.map_options.auto_zoom = false;
Gmaps.map.map_options.zoom = 10;
Gmaps.map.map_options.detect_location = true;
Gmaps.map.map_options.center_on_user = false;
Gmaps.map.initialize();
Gmaps.map.markers = [{"description":"test, 217 cleveland ave , liverpool, This is some additional information.","lat":43.1155,"lng":-76.2292},{"description":"bah, 215 university place, syracuse, ","lat":43.0396,"lng":-76.1355}];
Gmaps.map.create_markers();
Gmaps.map.adjustMapToBounds();
Gmaps.map.callback();
};
window.onload = function() { Gmaps.loadMaps(); };
</script>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:02:00.500

我通过将 .map_container 设置为地图高度的两倍来修复它。我的地图高度是 400 像素，我的地图容器高度是 200 像素。我仍然不知道为什么会这样。

# magento - Magento Invoice Grid 新栏目问题

> ID：10327477
> 
> 赞同：0
> 
> 时间：2012-04-26T04:59:32.613
> 
> 标签：magento

我需要将客户的“公司”属性添加到发票网格中。下面是我更改的代码，它在 phpmyadmin 中显示了正确的查询结果，但不知何故，它只显示 2 作为发票网格上的总记录。

```
protected function _prepareCollection()
{
    $collection = Mage::getResourceModel($this->_getCollectionClass());
    $collection->getSelect()->joinInner(array('order_address' => Mage::getSingleton('core/resource')->getTableName('sales_flat_order_address')),'order_address.parent_id = main_table.order_id',array('company'))->group('parent_id')->order('entity_id', 'desc');

    $this->setCollection($collection);
    return parent::_prepareCollection();
} 
```

查询是

```
SELECT `main_table`.*, `order_address`.`company` FROM `sales_flat_invoice_grid` AS `main_table` INNER JOIN `sales_flat_order_address` AS `order_address` ON order_address.parent_id = main_table.order_id GROUP BY `parent_id` 
```

如果我将记录数更改为每页 200 条，它会显示所有记录，但分页和总记录存在一些问题。

它总是显示 1 页和“共找到 2 条记录”。所以我不能移动到下一页。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:04:31.640

请检查以下链接。你可能会有一个想法。

[为 grid.php 文件添加到网格选择](https://stackoverflow.com/questions/6684684/adding-to-grid-selection-for-grid-php-file)

[http://www.magentocommerce.com/boards/viewthread/197590/](http://www.magentocommerce.com/boards/viewthread/197590/)

[http://www.widgetsandburritos.com/adding-fields-order-invoice-grid-magento/](http://www.widgetsandburritos.com/adding-fields-order-invoice-grid-magento/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:47:45.500

对于任何遇到管理网格寻呼机损坏问题的人，这是解决方案。

从 magento / lib / Varien / Data / Collection / Db.php 复制 Db.php 文件并将其粘贴到本地目录，因此生成的文件夹结构如下所示： magento / app / code / local / Varien / Data / Collection / Db .php

```
public function getSelectCountSql()
{
    $this->_renderFilters();
    $countSelect = clone $this->getSelect();
    $countSelect->reset(Zend_Db_Select::ORDER);
    $countSelect->reset(Zend_Db_Select::LIMIT_COUNT);
    $countSelect->reset(Zend_Db_Select::LIMIT_OFFSET);
    $countSelect->reset(Zend_Db_Select::COLUMNS);
    if(count($this->getSelect()->getPart(Zend_Db_Select::GROUP)) > 0) {
        $countSelect->reset(Zend_Db_Select::GROUP);
        $countSelect->distinct(true);
        $group = $this->getSelect()->getPart(Zend_Db_Select::GROUP);
        $countSelect->columns("COUNT(DISTINCT ".implode(", ", $group).")");
    } else {
        $countSelect->columns('COUNT(*)');
    }
    return $countSelect;
} 
```

# xcode - 文件夹/目录的 SVN 提交失败

> ID：10327484
> 
> 赞同：2
> 
> 时间：2012-04-26T05:00:04.430
> 
> 标签：xcode, svn, directory, commit

SVN 未能提交 [add]ed 文件夹。我添加了一个新文件夹/目录“ImagesSubDirectory”并在其中放置了几个图像。Xcode 为所有添加的图像显示“A”。“svn status”终端命令为 ImagesSubDirectory 和该目录中的图像显示“A”。但是，当我尝试将其提交到服务器时，我收到了跟随错误：

> svn：提交失败（详细信息如下）：svn：'/Path/Project/ProjectDirectory/Resources/Images/ImagesSubDirectory' 不受版本控制，不是提交的一部分，但它的子 '/Path/Project/ProjectDirectory/Resources /Images/ImagesSubDirectory/MyImage@2x.png' 是提交的一部分

Xcode 提交对话框未针对“ImagesSubDirectory”显示“A”。出了什么问题，我该如何解决？我可以使用终端，但 Xcode 应该处理它，对吧？

ps 我使用的是 Xcode 版本 4.3.2 (4E2002)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T07:04:55.063

这只是错误的 Xcode + SVN 行为。

最后我不得不使用终端来解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T05:08:36.913

**签入时在所有**“ ”文件的末尾添加一个“@”字符，`@2x`您的颠覆问题将得到解决。

换句话说，“ `svn add blahblah@2x.png@`”（其中 blahblah 是 Retina high rez 图像文件的真实名称）在终端上，然后显式提交。换句话说，不要从 Xcode 添加这些文件，使用终端中的命令行。

Subversion 可能会遇到文件名中带有“@”的文件的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-04T07:27:31.483

这是我的案例的解决方案：在终端中，使用 svn 首先添加文件然后提交：

1.文件是xxx@3x.png：`image_file_name@3x.png`

2.然后将xxx\@3x.png添加到svn中：

```
svn add image_file_name\@3x.png@ 
```

3.fiannaly 提交：

```
svn commit -m “add your comment here" 
```

# c# - 创建指向本地 PC 上物理路径的超链接，指向不属于网站的文件

> ID：10327485
> 
> 赞同：1
> 
> 时间：2012-04-26T05:00:07.360
> 
> 标签：c#, asp.net, file-io

我在硬盘驱动器上的文件夹中有一些文件，例如 C:\ExtraContent\ 有一些 PDF 文件。此文件夹不是网站的一部分。我能够使用默认的 ASP.NET FileUploader 成功地将 PDF 上传到此文件夹，没问题。

我想做的是，在该文件夹 C:\ExtraContent\somePDF.pdf 中创建一个链接到 PDF 的超链接

我可以使用带有以下代码的 Button 来关闭：

```
protected void Button1_Click(object sender, EventArgs e)
{
    WebClient client = new WebClient();
    Byte[] buffer = client.DownloadData("C:\ExtraContent\somePDF.pdf");
    Response.ContentType = "application/pdf";
    Response.AddHeader("content-length", buffer.Length.ToString());
    Response.BinaryWrite(buffer);
} 
```

以上工作在打开文件方面。但我不能让它与 ASP.NET 超链接一起使用。

我想使用超链接的原因是用户可以选择右键单击并另存为，以下载副本。如果 HyperLink 控件只能链接到相对路径，我该怎么做才能获得想要的结果？

注意：制作我试图访问网站的一部分的文件对我们来说是不切实际的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:18:15.343

基本上允许以您描述的方式访问文件夹是一个真正的安全风险（因为它需要破解权限），这不是微不足道的，通常应该避免。你实现你想要的行为的方式就是这些。

首先创建一个空白`aspx`或`ashx`页面。

其次，无论是在`Page_Load`或`ProcessRequest`您想使用以下几行代码

```
string filePath = "c:\\Documents\\Stuff\\";
string fileName = "myPath.pdf";
byte[] bytes = System.IO.File.ReadAllBytes(filePath + fileName);
context.Response.Clear();
context.Response.ContentType = "application/pdf";
context.Response.Cache.SetCacheability(HttpCacheability.Private);
context.Response.Expires = -1;
context.Response.Buffer = true;
context.Response.AddHeader("Content-Disposition", string.Format("{0};FileName=\"{1}\"", "attachment", fileName));
context.Response.BinaryWrite(bytes);
context.Response.End(); 
```

我没有对此进行测试并将其从我的脑海中取出，因此它可能需要一些时间，但上面的代码应该让您走上正确的轨道，使个人浏览器开始下载您提供的文件。

**编辑：我刚刚意识到（在重新阅读您的问题后）您的问题与我的想法略有不同，要解决您的问题，只需将您正在使用的超链接按钮链接到可以处理上述请求的页面。IE：一个 ashx 或 aspx 页面**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:06:05.027

您需要创建一个指向充当“代理”的页面的超链接，以便该页面将返回包含文件流的响应。

您不能创建指向不属于您站点的 prt 的文件的链接。

# php - 像在 JQuery 中一样在 JavaScript 中调用函数

> ID：10327488
> 
> 赞同：2
> 
> 时间：2012-04-26T05:00:42.807
> 
> 标签：php, javascript, jquery

我有一个 div：

```
<div id="test" style="width:auto; height:auto;">
</div> 
```

还有一个功能：

```
 $(function() {
            $("#test").attr("contentEditable", "true");
            $("#test")
            .attr("tabindex", "0")
            .keydown(function(){ alert(1); return false; })
            .mousemove(function(){ alert(2); return false; });
    }); 
```

如何在不包含 JQuery 库的情况下在 JavaScript 中实现此代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:12:13.480

您可以在不使用 jquery 的情况下在 javascript 中执行此操作，此处提供演示[JsFiddle](http://jsfiddle.net/eKfgz/2/) 您可以将其放在 body 的 onload 方法中，然后它将调用 body 的 onload 或将其放在所有控件下方的脚本部分而不将其放入函数中，然后它将文档准备好时调用，如 jquery 方法 $().ready();

```
var test = document.getElementById('test');
test.setAttribute("contentEditable", "true");
test.setAttribute("tabindex", "0");
test.onkeydown = function(event) { alert("KeyDown");}    
test.onmousemove = function(event) { alert("MouseMove");} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:17:34.280

```
function runme() {
  var elm = document.getElementById("test");
  elm.contentEditable = "true";
  elm.tabIndex = 0;
  elm.onkeydown = function() { alert(1); return false; };
  elm.onmousemove = function() { alert(2); return false; };
}

if(window.addEventListener)
  window.addEventListener("load", runme, false);
else
  window.attachEvent("onload", runme); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T05:26:10.783

Adil 的想法是正确的，但要稍微改进一下，您可以将元素存储在变量中，这样您就不必每次都调用来获取元素。所以我会把它改成这样：

```
var t = document.getElementById('test');

t.setAttribute("contentEditable", "true");
t.setAttribute("tabindex", "0");
t.onkeydown = function(event) { alert("KeyDown");}    
t.onmousemove = function(event) { alert("MouseMove");} 
```

赞成 Adil 击败我并提供 jsfiddle 链接 :)

更新：没关系，因为你刚刚更新了你的帖子

# c# - 根据大写字母的位置对字符串数组进行排序

> ID：10327489
> 
> 赞同：2
> 
> 时间：2012-04-26T05:00:46.557
> 
> 标签：c#, arrays, algorithm, sorting, .net-2.0

我有一个这样的数组 -

```
string[] input = new string[] {"bRad", "Charles", "sam", "lukE", "vIctor"} 
```

现在我想根据每个字符串中出现的大写字母的位置对其进行排序。第一次出现是排序时唯一要考虑的出现。如果两个字符串在同一位置有 CAP，则按字母顺序对它们进行排序，同样适用于没有任何 CAP 的字符串，按字母顺序对其进行排序。

到目前为止，我所做的还不够好。我已经尝试了无数次来改进它，但没有运气。将有大量数据对此进行测试。所以性能是最重要的。我正在使用 .NET 2.0，并且不允许使用任何更高版本。

```
public static int q, p, i, s;
public static Dictionary<string, int> a = new Dictionary<string, int>();

Array.Sort(input, delegate (string x, string y) {

    if (x == y)
        return 0;

    if (a.TryGetValue(x + "|" + y, out s))
        return s;

    if (a.TryGetValue(y + "|" + x, out s))
        return -s;

    q = x.Length;
    p = y.Length;

    for (i = 0; i < x.Length; i++)
    {
        if (x[i] < 91)
        {
            q = i;
            break;
        }
    }

    for (i = 0; i < y.Length; i++)
    {
        if (y[i] < 91)
        {
            p = i;
            break;
        }
    }

    if (q == x.Length && p == y.Length)
        s = x.CompareTo(y);
    else if (q > p)
        s = 1;
    else if (q < p)
        s = -1;
    else
        s = x.CompareTo(y);

    a.Add(x + "|" + y, s);

    return s;

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:14:50.713

你需要在这里考虑你的算法:-)

How many elements are going to be in your dictionary? Well, since you're putting "{x} | {y}" into the dictionary for every element x, y in your array, that's n ^ 2 for an n-element array. Not a good idea.

This isn't necessarily the best solution (I've not thought about that yet), but for a start:

Only store the position of the first Capital in the dictionary for a particular word, not for combinations.

Now your delegate becomes:

```
delegate (string x, string y) {

    if (x == y)   // NOT A GOOD IDEA - 
                  // THE Sort method should not call a string with itself,
                  // and if this is doing string comparison
                  // (I'm rusty on C#), you're
                  // wasting a comparison if there's a mismatch
        return 0;

    int xCapitalPos, yCapitalPos;
    if (!a.TryGetValue(x, out xCapitalPos)) {
        // compute xCapitalPos and add it to dictionary a
    }
    if (!a.TryGetValue(y, out yCapitalPos)) {
        // compute yCapitalPos and add it to dictionary a
    }
    int delta = xCapitalPos - yCapitalPos;
    if (0!=delta) {
        return delta;
    } else {
        return x.compareTo(y);
    }
} 
```

That's where I would start. See how you do, then consider how you might do better from there...

--- 5 minutes later, cup of coffee in hand

Ok, I've just thought of how I might improve it!

Don't use compareTo, which does a string comparison. Write your own string comparison function, that given 2 strings, will do a string comparison while taking capital location into account. Then you can drop the dictionary and everything else: it won't be necessary, since the Sort method (which I presume is implemented properly as a QuickSort or a MergeSort or something efficient) will ensure you don't do more comparisons than necessary.

All the best, C

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T05:30:39.517

I guess there are a couple of optimisations (it should already be damned fast).

Firstly, as suggested above there's really no need for a dictionary since the `Sort` algorithm itself optimises the need for that out.

Second, loop through x and y at the same time, and break out as early as possible (that is, if one finds a capital and the other doesn't then exit early). Minor savings here.

That should just about do it (and be simpler). You're basically rewriting `String.CompareTo` only, and efficiently, and relying on `Array.Sort` to do the rest.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T05:40:46.890

Removing the dictionary for your cache alone sped it up (my example of 15000 values, with up to 500 chars per value) went from 2449.51ms with the dictionary, and after removing that went down to 58.72ms

I tried "craigmj"'s idea of caching the individual values position which is faster then doing the concat but it seems with my random data no cache was still faster.

Here is some code to test out... this runs in 30ms compared to 2559ms (original)

```
Stopwatch stopWatch = new Stopwatch();
stopWatch.Start();
Array.Sort(input, delegate(string x, string y)
{
    if (x == y)
        return 0;

    int shortestLength = Math.Min(x.Length, y.Length);

    for (i = 0; i < shortestLength; i++)
    {
        if (x[i] < 91 && y[i] < 91)
            return x.CompareTo(y);
        else if (x[i] < 91)
            return -1;
        else if (y[i] < 91)
            return 1;
    }
    return x.CompareTo(y);
});

stopWatch.Stop();
double ms = (stopWatch.ElapsedTicks * 1000.0) / Stopwatch.Frequency;
Debug.WriteLine("Optimized Time: " + ms); 
```

code to continue checking for Capital

```
Stopwatch stopWatch = new Stopwatch();
stopWatch.Start();
Array.Sort(input, delegate(string x, string y)
{
    if (x == y)
        return 0;

    int xlen = x.Length;
    int ylen = y.Length;
    int longestLength = Math.Max(xlen, ylen);

    for (i = 0; i < longestLength; i++)
    {
        if (i < xlen && i < ylen && x[i] < 91 && y[i] < 91)
            return x.CompareTo(y);
        else if (i < xlen && x[i] < 91)
            return -1;
        else if (i < ylen && y[i] < 91)
            return 1;
    }
    return x.CompareTo(y);
});

stopWatch.Stop();
double ms = (stopWatch.ElapsedTicks * 1000.0) / Stopwatch.Frequency;
Debug.WriteLine("Optimized Time: " + ms); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T06:04:34.273

Here's some (pseudo) code for the delegate that does a Capital-and-String position match:

```
delegate (string lhs, string rhs) {
    int llength = lhs.Length
    int rlength = rhs.Length

    // The value we will return 
    // <0 => lhs < rhs
    // ==0 => lhs == rhs
    // >0 => lhs > rhs  
    int ret = 0;
    Boolean uppercaseFoundAndEqual = false;

    for (int i=0; i<llength; i++) {
        if (i>=rlength) {
            // We've exhausted the rhs, but not the lhs
            return (0==ret) ? -1 : ret;
        }

        Char l = lhs[i];
        Char r = rhs[i];

        // We only worry about the case position if we've not yet found
        // an uppercase char in either string
        if (!uppercaseFoundAndEqual) {
            Boolean lUpper = (('A'<=l) && ('Z'>=l));
            Boolean rUpper = (('A'<=r) && ('Z'>=r));

            // If we've encountered an upper-lower difference, we return 
            int delta = (lUpper ? 1 : 0) - (rUpper ? 1 : 0);
            if (0!=delta) return delta;

            if (lUpper) {   // Both are upper case - by our delta comparison, we know 
                            // lUpper==rUpper
                if (0!=ret) return ret; // Return based on previous case comparison

                // Otherwise we've found an uppercase, now we're just doing
                // standard string comparison
                uppercaseFoundAndEqual = true;
            }
        }

        if (0==ret) {   // If we're still equal to this point, standard char comparison
            ret = l-r;
        }
        if (uppercaseFoundAndEqual && (0!=ret)) {
            return ret;
        }
    }
    if (i<rlength) {
        // We've exhausted the lhs, but not the rhs
        return (0==ret) ? 1 : ret;
    }
    return 0;   // We exhausted both strings and they're identical
} 
```

Please take careful note:

1.  I've not tested this! (Hence the 'pseudo-code' comment) I don't have C#, so it's based on a little Googling for C# syntax. Please correct if I've made errors!
2.  This is not using Internationalization. In other words, this is a very basic ASCII comparison. Yuck! You should look at using [System.Globalization.StringInfo](http://msdn.microsoft.com/en-us/library/c4hkht93.aspx), but I'm afraid to code that just based on some Googling!
3.  Your description doesn't describe what happens when two strings differ in length without capitalization. For example, is 'aa' greater than or less than 'aaA'? I've implemented based on the idea that we ignore capitalization outside the 'intersect' area, but it wouldn't be difficult to change that.
4.  (for emphasis) I've not tested this! Mileage may vary, but I believe the general idea is good.

# actionscript-3 - Actionscript 中的一周开始或结束

> ID：10327493
> 
> 赞同：0
> 
> 时间：2012-04-26T05:01:19.647
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4

我正在寻找一种使用（并且目前坚持使用）Flex 4.1 在 Actionscript 中相对于今天开始一周的方法。在 Java 中，我会使用 Calendar 类通过以下方式执行此操作：-

```
 Calendar cal = Calendar.getInstance();
    cal.setTime(new Date());
    cal.set(Calendar.DAY_OF_WEEK,
            1);
    return cal.getTime(); 
```

我似乎找不到任何优雅的解决方案 - 我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:17:24.170

有两个类，同名`DateTimeFormatter`。一个是纯Actionscript 类，另一个是添加到Flex 4.5 的新类，它封装了Actionscript 版本。[Flex 版本](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/formatters/DateTimeFormatter.html)为您完成了一些繁重的工作。

有一种[`getFirstWeekday()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/formatters/DateTimeFormatter.html#getFirstWeekday%28%29)方法，它将与您指定的语言环境相对应。

[编辑] 我被带走了，没有具体回答你的问题。我不知道有什么比 DateTimeFormatter 更优雅的东西。但是从那里您可以使用[Date](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Date.html)对象来获取当前时间，并获取您所追求的。

有一些日期实用程序，但我不知道这个特定的解决方案。您是否正在寻找这样的东西：

```
var timeFormatter:DateTimeFormatter = new DateTimeFormatter(LocaleID.DEFAULT, DateTimeStyle.NONE, DateTimeStyle.SHORT);
var firstDay:int = timeFormatter.getFirstWeekday()
var now:Date = new Date();
var dayDelta:int = now.day - firstDay;
var firstDayInMillis:Number = now.time - (dayDelta * 86400 * 1000);
// you can construct a new Date from here: var first:Date = new Date(firstDayInMillis); 
```

# java - 无法在 Fop 中使用 xsl-fo 从 XML 字符串生成 PDF

> ID：10327498
> 
> 赞同：0
> 
> 时间：2012-04-26T05:02:03.743
> 
> 标签：java, xslt, xsl-fo

我正在使用 Fop 生成 PDF 文件，并且我有 xml 和 xsl 源来转换 xsl-fo 对象，但 PDF 文件显示为空白，请帮助我...

这是我作为字符串的 XML 响应：

```
 <enqResponse>…&lt;cols><c>ID</c><c>DESCRIPTION</c></cols>….<r><c><cap>1111</cap><i>4</i></c><c><cap>Banks</cap></c></r>… </enqResponse> 
```

这是我的 Xslt 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.1" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:java="http://xml.apache.org/xslt/java" exclude-result-prefixes="java">
    <xsl:output method="xml" version="1.0" omit-xml-declaration="no" indent="yes"/>
    <xsl:template match="enqResponse">
    <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:fox="http://xml.apache.org/fop/extensions">
      <fo:layout-master-set>
        <fo:simple-page-master master-name="my-page" page-width="50in" page-height="80in">
          <fo:region-body  margin-top="1in" margin-bottom="1in" />
          <fo:region-before extent="2in"/>
        </fo:simple-page-master>
      </fo:layout-master-set>
      <fo:page-sequence master-reference="my-page">
          <fo:static-content flow-name="xsl-region-before">
               <fo:block font-size="12pt" font-weight="bold" text-align="center"><xsl:value-of select="title"/></fo:block>
          </fo:static-content>
          <fo:flow flow-name="xsl-region-body">
          <fo:block><xsl:apply-templates select="cols"/></fo:block>
          <fo:block><xsl:apply-templates select="r"/></fo:block>     
        </fo:flow>
        </fo:page-sequence>
    </fo:root>
    </xsl:template>
    <xsl:template match="cols">
                <fo:table table-layout="fixed" width="100%">
                <!--<fo:table-column column-width="2in"/>
                <fo:table-column column-width="4in"/>
                  --><fo:table-body>
                            <fo:table-row>
                             <xsl:for-each select="c">
                            <fo:table-cell>
                                        <fo:block><xsl:value-of select="."/></fo:block>
                            </fo:table-cell> 
                     </xsl:for-each>                
                    </fo:table-row>
              </fo:table-body>
                </fo:table>
    </xsl:template>

    <xsl:template match="r">
         <fo:table table-layout="fixed" width="100%">
                <!--<fo:table-column column-width="12in"/>
                <fo:table-column column-width="12in"/>
                     --><fo:table-body>
                     <fo:table-row>
                            <xsl:for-each select="c">
                                  <fo:table-cell>
                                  <fo:block><xsl:value-of select="cap"/></fo:block>
                            </fo:table-cell>
                     </xsl:for-each>  
                </fo:table-row>
                </fo:table-body>
                </fo:table>
    </xsl:template>
    </xsl:stylesheet> 
```

当我将 xml 下载为 PDF 时，它会生成空白的 pdf 文件，请就此提出您的建议，并让我知道 xslt 文件中的任何错误。

我有带有静态内容的 xslt 文件并且它正确显示为 PDF 带有静态内容的 Xslt 文件

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.1" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:java="http://xml.apache.org/xslt/java" exclude-result-prefixes="java">
    <xsl:output method="xml" version="1.0" omit-xml-declaration="no" indent="yes"/>
    <xsl:template match="enqResponse">
    <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:fox="http://xml.apache.org/fop/extensions">
      <fo:layout-master-set>
        <fo:simple-page-master master-name="my-page">
          <fo:region-body margin="2in"/>
          <fo:region-before extent="1.0cm"/>
        </fo:simple-page-master>
      </fo:layout-master-set>
      <fo:page-sequence master-reference="my-page">
          <fo:static-content flow-name="xsl-region-before" >
               <fo:block font-size="12pt" text-align="center">Page-1/1</fo:block>
          </fo:static-content>
          <fo:flow flow-name="xsl-region-body">
         <fo:block space-after="1.0cm">Welcome</fo:block>
          <fo:block>
                <fo:table table-layout="fixed" width="100%">
                       <fo:table-body>
                            <fo:table-row>
                      <fo:table-cell>
                            <fo:block>No</fo:block>
                      </fo:table-cell>
                      <fo:table-cell>
                            <fo:block>Name</fo:block>
                      </fo:table-cell>
                      <fo:table-cell>
                            <fo:block>Phone Number</fo:block>
                      </fo:table-cell>
                    </fo:table-row>

                    <fo:table-row>
                      <fo:table-cell>
                            <fo:block>Test1</fo:block>
                      </fo:table-cell>
                      <fo:table-cell>
                            <fo:block>Test2</fo:block>
                      </fo:table-cell>
                      <fo:table-cell>
                            <fo:block>Test3</fo:block>
                      </fo:table-cell>
                    </fo:table-row>
                       </fo:table-body>
                </fo:table>
          </fo:block>
        </fo:flow>
      </fo:page-sequence>
    </fo:root>
    </xsl:template>
    </xsl:stylesheet> 
```

请给出从给定的xml字符串中提取动态数据以生成PDF文件的解决方案............

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:29:18.830

使用 FOP 或 XEP (RenderX)，我得到一个带有生成文本的 pdf。（虽然有些文本不在左边距。）

你确定你的PDF是空白的吗？由于您正在生成 50 英寸 x 80 英寸的页面（哇！），也许您只是看不到文本。

# google-search-console - 如何解决 WWW/NonWWW 标头检查：失败

> ID：10327502
> 
> 赞同：0
> 
> 时间：2012-04-26T05:02:22.283
> 
> 标签：google-search-console

我为我的网站运行了重复检查器并收到以下消息

> WWW/NonWWW 标头检查：失败您的站点没有返回从 www 到非 www 的 301 重定向，反之亦然。这意味着 Google 可能会缓存您网站的两个版本，从而导致网站范围内的重复内容处罚。

这是我应该担心的事情吗？如果是，我应该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:47:51.363

你不应该担心它，很多网站都是这样配置的，谷歌知道这一点。

但是，如果您想安全并让您的访问者和谷歌始终访问 example.com 而不是 www.example.com，您仍然可以添加它

将此添加到您的 .htaccess

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

# python - 无法在 virtualenv 中安装 psycopg2 “错误：stdarg.h：没有这样的文件或目录”

> ID：10327503
> 
> 赞同：1
> 
> 时间：2012-04-26T05:02:33.897
> 
> 标签：python, postgresql, osx-lion, pip, psycopg2

注意：使用easy_install、其他安装方式时也会出现同样的错误...

我面临着几乎完全相同的问题，因为[我试图将 psycopg2 安装到 Mac OS 10.6.3 上；它声称它找不到“stdarg.h”，但我可以看到它在那里；我该怎么办？](https://stackoverflow.com/questions/3044801/im-trying-to-install-psycopg2-onto-mac-os-10-6-3-it-claims-it-cant-find-stda)，除了我在 OSX Lion (10.7) 上并且我在 Python v2.7 上。

它似乎也与[在 Mac OS X 10.7 上的虚拟环境中无法使用 pip 安装 psycopg2 有关，](https://stackoverflow.com/questions/9678408/cant-install-psycopg2-with-pip-in-virtualenv-on-mac-os-x-10-7)但我收到不同的错误消息。

我提出了一个新问题，因为适用于 OSX 10.6 的解决方案（例如[http://mail.python.org/pipermail/pythonmac-sig/2009-September/021617.html](http://mail.python.org/pipermail/pythonmac-sig/2009-September/021617.html)）对我不起作用。

我正在尝试在 Heroku ( [https://devcenter.heroku.com/articles/django](https://devcenter.heroku.com/articles/django) ) 上为 Django 做教程，但在尝试安装 psycopg2 时遇到错误。这是跟踪：

```
Downloading/unpacking psycopg2
  Running setup.py egg_info for package psycopg2

    no previously-included directories found matching 'doc/src/_build'
Installing collected packages: psycopg2
  Running setup.py install for psycopg2
    building 'psycopg2._psycopg' extension
    gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -isysroot /Developer/SDKs/MacOSX10.6.sdk -arch i386 -arch x86_64 -g -O2 -DNDEBUG -g -O3 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090005 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/psycopgmodule.c -o build/temp.macosx-10.6-intel-2.7/psycopg/psycopgmodule.o
    In file included from /Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/unicodeobject.h:4,
                     from /Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/Python.h:85,
                     from ./psycopg/psycopg.h:30,
                     from psycopg/psycopgmodule.c:27:
    /Developer/SDKs/MacOSX10.6.sdk/usr/include/stdarg.h:4:25: error: stdarg.h: No such file or directory
    In file included from /Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/unicodeobject.h:4,
                     from /Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/Python.h:85,
                     from ./psycopg/psycopg.h:30,
                     from psycopg/psycopgmodule.c:27:
    /Developer/SDKs/MacOSX10.6.sdk/usr/include/stdarg.h:4:25: error: stdarg.h: No such file or directory
    lipo: can't figure out the architecture type of: /var/tmp//ccHla8Gp.out
    error: command 'gcc-4.2' failed with exit status 1
    Complete output from command /Users/AndyFang/Desktop/code/venv/bin/python -c "import setuptools;__file__='/Users/AndyFang/Desktop/code/venv/build/psycopg2/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /tmp/pip-ONvqYm-record/install-record.txt --install-headers /Users/AndyFang/Desktop/code/venv/bin/../include/site/python2.7:
    running install

running build

running build_py

running build_ext

building 'psycopg2._psycopg' extension

gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -isysroot /Developer/SDKs/MacOSX10.6.sdk -arch i386 -arch x86_64 -g -O2 -DNDEBUG -g -O3 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090005 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/psycopgmodule.c -o build/temp.macosx-10.6-intel-2.7/psycopg/psycopgmodule.o

In file included from /Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/unicodeobject.h:4,

                 from /Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/Python.h:85,

                 from ./psycopg/psycopg.h:30,

                 from psycopg/psycopgmodule.c:27:

/Developer/SDKs/MacOSX10.6.sdk/usr/include/stdarg.h:4:25: error: stdarg.h: No such file or directory

In file included from /Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/unicodeobject.h:4,

                 from /Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/Python.h:85,

                 from ./psycopg/psycopg.h:30,

                 from psycopg/psycopgmodule.c:27:

/Developer/SDKs/MacOSX10.6.sdk/usr/include/stdarg.h:4:25: error: stdarg.h: No such file or directory

lipo: can't figure out the architecture type of: /var/tmp//ccHla8Gp.out

error: command 'gcc-4.2' failed with exit status 1

----------------------------------------
Command /Users/AndyFang/Desktop/code/venv/bin/python -c "import setuptools;__file__='/Users/AndyFang/Desktop/code/venv/build/psycopg2/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /tmp/pip-ONvqYm-record/install-record.txt --install-headers /Users/AndyFang/Desktop/code/venv/bin/../include/site/python2.7 failed with error code 1 in /Users/AndyFang/Desktop/code/venv/build/psycopg2
Storing complete log in /Users/AndyFang/.pip/pip.log 
```

不知道为什么找不到stdarg.h！我在网上查了很多答案，无果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T09:33:00.127

看起来您的构建环境已损坏。stdarg.h 是核心 gcc 头文件的一部分。在我的（Fedora 16 Linux）系统上，stdarg.h 位于包中`/usr/lib/gcc/x86_64-redhat-linux/4.6.2/include/stdarg.h`并且是`gcc`包的一部分。

在 Apple 平台上，我希望它随 XCode 一起提供。猜测一下，您安装了多个编译器/工具链，并且它们的包含路径变得混乱。我建议彻底卸载 XCode 及其所有朋友，删除相关目录以摆脱掉队者，然后重新安装很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:02:23.470

可能是您的 Xcode 安装不完整。以下帖子帮助我让它工作：

[https://stackoverflow.com/a/10326004/1361851](https://stackoverflow.com/a/10326004/1361851)

必须为 Xcode 安装“命令行工具”（按照上面 SO 答案中的说明），然后我就可以使用 virtualenv 进行 pip 安装。

# android - Android + Arduino 蓝牙数据传输

> ID：10327506
> 
> 赞同：23
> 
> 时间：2012-04-26T05:02:47.360
> 
> 标签：android, bluetooth, arduino

我可以让我的 Android 应用程序通过蓝牙连接到我的 Arduino。但是，它们之间不能传输任何数据。以下是我的设置和代码：

HTC Android v2.2，蓝牙伴侣黄金调制解调器，Arduino Mega (ATmega1280)

安卓Java代码：

```
package com.example.BluetoothExample;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.widget.TextView;
import android.widget.EditText;  
import android.widget.Button;
import android.widget.Toast;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Set;
import java.util.UUID;

public class BluetoothExampleActivity extends Activity {
  TextView myLabel;
  EditText myTextbox;
  BluetoothAdapter mBluetoothAdapter;
  BluetoothSocket mmSocket;
  BluetoothDevice mmDevice;
  OutputStream mmOutputStream;
  InputStream mmInputStream;
  Thread workerThread;
  byte[] readBuffer;
  int readBufferPosition;
  int counter;
  volatile boolean stopWorker;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button openButton = (Button)findViewById(R.id.open);
    Button sendButton = (Button)findViewById(R.id.send);
    Button closeButton = (Button)findViewById(R.id.close);
    myLabel = (TextView)findViewById(R.id.label);
    myTextbox = (EditText)findViewById(R.id.entry);

    //Open Button
    openButton.setOnClickListener(new View.OnClickListener() {
      public void onClick(View v) {
        try {
          findBT();
          openBT();
        }
        catch (IOException ex) { }
      }
    });

    //Send Button
    sendButton.setOnClickListener(new View.OnClickListener() {
      public void onClick(View v) {
        try {
          sendData();
        }
        catch (IOException ex) {
            showMessage("SEND FAILED");
        }
      }
    });

    //Close button
    closeButton.setOnClickListener(new View.OnClickListener() {
      public void onClick(View v) {
        try {
          closeBT();
        }
        catch (IOException ex) { }
      }
    });
  }

  void findBT() {
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    if(mBluetoothAdapter == null) {
      myLabel.setText("No bluetooth adapter available");
    }

    if(!mBluetoothAdapter.isEnabled()) {
      Intent enableBluetooth = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
      startActivityForResult(enableBluetooth, 0);
    }

    Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
    if(pairedDevices.size() > 0) {
      for(BluetoothDevice device : pairedDevices) {
        if(device.getName().equals("FireFly-108B")) {
          mmDevice = device;
          break;
        }
      }
    }
    myLabel.setText("Bluetooth Device Found");
  }

  void openBT() throws IOException {
    UUID uuid = UUID.fromString("00001101-0000-1000-8000-00805f9b34fb"); //Standard //SerialPortService ID
    mmSocket = mmDevice.createRfcommSocketToServiceRecord(uuid);    
    mmSocket.connect();
    mmOutputStream = mmSocket.getOutputStream();
    mmInputStream = mmSocket.getInputStream();
    beginListenForData();
    myLabel.setText("Bluetooth Opened");
  }

  void beginListenForData() {
    final Handler handler = new Handler(); 
    final byte delimiter = 10; //This is the ASCII code for a newline character

    stopWorker = false;
    readBufferPosition = 0;
    readBuffer = new byte[1024];
    workerThread = new Thread(new Runnable() {
      public void run() {
         while(!Thread.currentThread().isInterrupted() && !stopWorker) {
          try {
            int bytesAvailable = mmInputStream.available();            
            if(bytesAvailable > 0) {
              byte[] packetBytes = new byte[bytesAvailable];
              mmInputStream.read(packetBytes);
              for(int i=0;i<bytesAvailable;i++) {
                byte b = packetBytes[i];
                if(b == delimiter) {
                  byte[] encodedBytes = new byte[readBufferPosition];
                  System.arraycopy(readBuffer, 0, encodedBytes, 0, encodedBytes.length);
                  final String data = new String(encodedBytes, "US-ASCII");
                  readBufferPosition = 0;

                  handler.post(new Runnable() {
                    public void run() {
                      myLabel.setText(data);
                    }
                  });
                }
                else {
                  readBuffer[readBufferPosition++] = b;
                }
              }
            }
          } 
          catch (IOException ex) {
            stopWorker = true;
          }
         }
      }
    });

    workerThread.start();
  }

  void sendData() throws IOException {
    String msg = myTextbox.getText().toString();
    msg += "\n";
    //mmOutputStream.write(msg.getBytes());
    mmOutputStream.write('A');
    myLabel.setText("Data Sent");
  }

  void closeBT() throws IOException {
    stopWorker = true;
    mmOutputStream.close();
    mmInputStream.close();
    mmSocket.close();
    myLabel.setText("Bluetooth Closed");
  }

  private void showMessage(String theMsg) {
        Toast msg = Toast.makeText(getBaseContext(),
                theMsg, (Toast.LENGTH_LONG)/160);
        msg.show();
    }
} 
```

* * *

Arduino代码：

```
#include <SoftwareSerial.h>

int bluetoothTx = 45;
int bluetoothRx = 47;

SoftwareSerial bluetooth(bluetoothTx, bluetoothRx);

void setup() {
  //pinMode(45, OUTPUT);
  //pinMode(47, INPUT);
  pinMode(53, OUTPUT);
  //Setup usb serial connection to computer
  Serial.begin(9600);

  //Setup Bluetooth serial connection to android
  bluetooth.begin(115200);
  bluetooth.print("$$$");
  delay(100);
  bluetooth.println("U,9600,N");
  bluetooth.begin(9600);
}

void loop() {
  //Read from bluetooth and write to usb serial
  if(bluetooth.available()) {
  char toSend = (char)bluetooth.read();
  Serial.print(toSend);
  flashLED();
  }

  //Read from usb serial to bluetooth
  if(Serial.available()) {
  char toSend = (char)Serial.read();
  bluetooth.print(toSend);
  flashLED();
  }
}

void flashLED() {
  digitalWrite(53, HIGH);
  delay(500);
  digitalWrite(53, LOW);
} 
```

我尝试使用 115200 和 9600 作为波特率，并尝试将蓝牙 rx 和 tx 引脚设置为输入/输出和输出/输入。Arduino 正在从 PC 接收串行数据，但无法将其发送到 Android（由于 flashLED() 方法，我可以看到这一点）。

Android 根本无法向 Arduino 发送任何数据。但是它们都已连接，因为调制解调器上的绿灯会打开并熄灭，并且当我关闭连接时红色 LED 会闪烁。sendData() 方法不会抛出异常，否则 showMessage("SEND FAILED"); 会出现。

我的清单 .xml 中也有这个

```
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8" /> 
```

任何帮助将不胜感激！

代码取自：

[http://bellcode.wordpress.com/2012/01/02/android-and-arduino-bluetooth-communication/](http://bellcode.wordpress.com/2012/01/02/android-and-arduino-bluetooth-communication/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-29T13:38:05.590

刚刚为遇到此页面的其他人解决了问题。

似乎我的 Arduino 不喜欢我使用数字引脚进行串行通信，我使用 TX 和 RX 而不是这个代码取自[http://jondontdoit.blogspot.com.au/2011/11/bluetooth-mate-tutorial.html](http://jondontdoit.blogspot.com.au/2011/11/bluetooth-mate-tutorial.html)，也似乎 9600 是一个很好的波特而不是 115200。

```
/***********************
 Bluetooth test program
***********************/
//TODO
//TEST THIS PROGRAM WITH ANDROID,
//CHANGE PINS TO RX AND TX THO ON THE ARDUINO!
//int counter = 0;
int incomingByte;

void setup() {
  pinMode(53, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  // see if there's incoming serial data:
  if (Serial.available() > 0) {
    // read the oldest byte in the serial buffer:
    incomingByte = Serial.read();
    // if it's a capital R, reset the counter
    if (incomingByte == 'g') {
      digitalWrite(53, HIGH);
      delay(500);
      digitalWrite(53, LOW);
      delay(500);
      //Serial.println("RESET");
      //counter=0;
    }
  }

  //Serial.println(counter);
  //counter++;

  //delay(250);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-07T01:47:05.137

我得到了同样的东西。我进入“设置”->“无线和网络”->“蓝牙设置”并配对设备。当我回去重新运行我的代码时，它连接了，没有例外。我在我的 UI 中放置了用于显示配对设备的控件，我将看看我是否可以编写代码来从我的 UI 管理配对设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T06:09:30.537

只有在替换此部分后，我才能让它运行：

```
Set<BluetoothDevice> pairedDevices = BluetoothAdapter.getBondedDevices();
if(pairedDevices.size() > 0)
    {
        for(BluetoothDevice device : pairedDevices)
        {
            if(device.getName().startsWith("FireFly-"))
            {
                mmDevice = device;
                Log.d("ArduinoBT", "findBT found device named " + mmDevice.getName());
                Log.d("ArduinoBT", "device address is " + mmDevice.getAddress());
                break;
            }
        }
    } 
```

有了这个：

```
 Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
 mmDevice = mBluetoothAdapter.getRemoteDevice("00:06:66:46:5A:91");
 if (pairedDevices.contains(mmDevice))
    {
        statusText.setText("Bluetooth Device Found, address: " + mmDevice.getAddress() );
        Log.d("ArduinoBT", "BT is paired");
    } 
```

我在哪里输入了我的蓝牙设备的地址。原代码找到设备并返回正确的地址，但是 mmSocket.connect(); 生成异常“java.io.IOException：服务发现失败”

建议？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T18:47:37.413

对于找到此页面但使用上述硬编码 MAC 地址卡住的任何人，请将 MAC 地址设置为 NULL，并将此代码插入 OnResume()

```
try{
File f = new File(Environment.getExternalStorageDirectory()+"/mac.txt");
FileInputStream fileIS = new FileInputStream(f);
buf = new BufferedReader(new InputStreamReader(fileIS));
String readString = new String(); 
while((readString = buf.readLine())!= null){
address = readString;
}
} catch (FileNotFoundException e) {
e.printStackTrace();
} catch (IOException e){
e.printStackTrace();
} 
```

另外，不要忘记允许 eclipse 包含必要的库，并将您的 mac 地址放入 SD 卡根目录的 mac.txt 中，然后您可以简单地为用户提供一个带有他们的 mac 地址的文本文件，同时仍然允许应用程序无需自定义每个实例即可从市场下载。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-20T09:59:00.033

@Backwards_Dave 只是为了好奇，尝试连接到 45 和 46 引脚并使用这个简单的代码。我使用它并没有问题。您将能够从 Arduino 串行监视器发送数据并在那里读取。

```
/*
Pinout:
45 --> BT module Tx
46 --> BT module Rx
*/
#include <SoftwareSerial.h>

SoftwareSerial mySerial(45, 46); // RX, TX

void setup()  
{
  // Open serial communications and wait for port to open:
  Serial.begin(9600);

  Serial.println("I am ready to send some stuff!");

  // set the data rate for the SoftwareSerial port
  mySerial.begin(9600);
}

void loop() // run over and over
{
  if (mySerial.available())
    Serial.write(mySerial.read());
  if (Serial.available())
    mySerial.write(Serial.read());
} 
```

另外，您在 Arduino 上使用什么蓝牙屏蔽？HC-06？

**编辑**

刚刚用 Mega2560（没有 1280）测试它，它没有问题。

我相信问题出在引脚上。

等待您的反馈意见

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-03T14:14:28.040

如果您仍在寻找答案，请尝试更改软件串行引脚。这是您正在使用的库的一个众所周知的限制。

并非 Mega 上的所有引脚都支持更改中断，因此只有以下引脚可用于 RX：10、11、12、13、14、15、50、51、52、53、A8 (62)、A9 (63)、 A10 (64)、A11 (65)、A12 (66)、A13 (67)、A14 (68)、A15 (69)。[参考文献](http://arduino.cc/en/Reference/softwareSerial)

希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-09T13:15:04.100

我认为这可能是蓝牙中的一些故障.. 最好重新安装它的驱动程序.. 因为上面给出的代码看起来是正确的。

# c# - WCF 调用一个函数而不等待它完成它的工作？

> ID：10327513
> 
> 赞同：6
> 
> 时间：2012-04-26T05:03:31.457
> 
> 标签：c#, multithreading, wcf, asynchronous, asynchronous-wcf-call

在客户端，每次我从 WCF 服务调用函数时，它都会等到 WCF 服务中的函数完成，就像调用本地函数一样。所以我为每个在新线程中启动预期函数的函数添加了一个额外的函数，所以我几乎所有的函数都是这样的：

**EX：我从****CLIENT**端
调用一个函数：**`client.ReceiveFile()`**

 **```
private void SendFile(Socket socket, Job job, DoWorkEventArgs e)
    {
        UpdateInfo(job.Name, job.Icon, job.Size);
        client.ReceiveFile((_File)job.Argument, bufferSize);
        SizeAll = job.Size;
        UpdateCurrFile(((_File)job.Argument).Path, "1");
        SendX(socket, ((_File)job.Argument).Path, e);
    } 
```

在服务器中，我必须这样做：

```
 public void ReceiveFile(_File file, int bufferSize)
    {
        System.Threading.Thread th = new System.Threading.Thread(unused => ReceiveFileTh(client, file.Name, file.Size, bufferSize));
        th.Start();
    }
    private void ReceiveFileTh(Socket client, string destPath, long size, int bufferSize)
    {
        try
        {
            ReceiveX(client, destPath, size, bufferSize);
        }
        finally
        {
            CloseClient();
        }
    } 
```

关键是，当我从客户端发送文件时，它告诉服务开始接收，但如果我没有启动新线程，客户端将等待服务接收文件，并且不会发送文件数据。

WCF 是否支持一种不让客户端等待服务功能完成的方式！或者我将不得不使用上述方法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-26T05:22:26.477

您正在寻找的是`[OperationContract(IsOneWay = true)]` 更多详细信息，请参阅[http://msdn.microsoft.com/en-us/magazine/cc163537.aspx](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T05:16:10.003

.NET 客户端代码生成工具内置了对此的支持——您不必手动生成每个方法的异步版本。

如果您在 Visual Studio 中使用**Add Service Reference**，请检查顶部附近的对话框：有一个复选框显示*Generate Asynchronous Operations*。如果您使用的是**svcutil.exe**，则使用参数*/async*生成异步客户端方法。**

# sum - 使用 MPI C++ 与二叉树求和

> ID：10327514
> 
> 赞同：1
> 
> 时间：2012-04-26T05:03:35.557
> 
> 标签：sum, binary-tree, mpi

我正在用 C++ 编写一个函数，它使用 MPI 并行计算双数的总和。我假设每个进程都有它的编号，问题是使用二叉树方法并行查找每个处理器中所有数字的总和，其中每个节点都是一个进程。所以算法必须在 O(logn) 中工作。

有没有人对这个问题有任何想法或已经准备好 MPI 中的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:41:32.787

是的，使用 op 参数为 MPI_SUM 的 MPI_Reduce 函数。AFAIK 标准没有指定减少是如何完成的，但我很确定任何有竞争力的 MPI 库都会使用树减少算法。

# java - 添加0和1是java中的备用数组单元

> ID：10327519
> 
> 赞同：4
> 
> 时间：2012-04-26T05:04:01.500
> 
> 标签：java, algorithm, data-structures

我有任何值为 0,0,0,0,0,0,0,0,1,1,1 的数组现在我需要的输出应该是每个零都在奇数索引中，1 将在偶数中，如果 0之后离开，它应该在 1 之后被复制，反之亦然。表示输出将是 0,1,0,1,0,1,0,0,0,0,0.... **但是上述操作必须在数组的单遍中完成**

*   所以我创建了一个大小相同的数组，
*   然后我开始遍历主数组并遇到一个 0 我放了一个计数器来设置奇数索引中的值，反之亦然
*   最后，当索引越过创建的新数组的长度时，我开始从后面以偶数模式将 0 添加到新单元格中。

还有什么更好的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T05:07:49.083

为此，您不需要额外的数组。您可以就地完成。只需保留两个指针，一个在每个奇数步后停止，一个在找到`1s`. 当第二个指针遇到 a 时，`1`只需将它与第一个指针交换，递增第一个指针。对数组的长度执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:30:28.760

让我们一次尝试就地

在数组的开头保留一个指针，在数组的末尾保留一个指针。

我假设零的数量大于一的数量

```
int begin = 0, end = length - 1;
while (begin < end){
    if (A[begin] == 0 && A[end] == 1){
        if (begin % 2 != 0){
            int tmp = A[end];
            A[end] = A[begin];
            A[begin] = temp;
            end--;
        }
        begin++;
    }
    else
        break;
} 
```

请记住，上述解决方案不适用于 1 的数量大于 0 的数量的情况

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T06:27:32.610

```
#include<stdio.h>

main()
{
    int arr[]={1,0,0,1,0,1,1,1,0,1};
    int n=10;
    int odd,one,tmp;
    odd=one=0;

    while(true)
    {
        while(odd<n && arr[odd])
            odd+=2;
        while(one<n && (((one<=odd)&&(one%2==0)) || !arr[one]))
            one++;

       if(odd<n && one<n)
       {
           arr[one]=arr[one]^arr[odd];
           arr[odd]=arr[one]^arr[odd];
           arr[one]=arr[one]^arr[odd];
       }
       else
           break;
    }

    for(int i=0;i<n;i++)
        printf("%d ",arr[i]);
} 
```

# eclipse - 我可以使用eclipse连接MS sql数据库并选择数据吗？

> ID：10327521
> 
> 赞同：1
> 
> 时间：2012-04-26T05:04:03.507
> 
> 标签：eclipse

我是 eclipse 的新手，我想使用基于 CSS、JS、HTML5 语言的 phonegap 向导开发一个应用程序。我的问题是

我可以在 Eclipse 中连接 MS SQL 数据库并返回表吗？如何？（如果可能的话通过我使用的类型语言制作代码，如果不能也可以通过链接或其他方式为我提供一些信息）

谢谢你的答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:32:23.973

你当然可以。打开“数据库开发”透视图，在数据源资源管理器中添加到数据库的新连接，然后离开。

# android - Apk 外部数据，Android 扩展

> ID：10327532
> 
> 赞同：2
> 
> 时间：2012-04-26T05:05:35.480
> 
> 标签：android, expansion

我正在使用 Android 扩展的概念，它可以帮助我们消除 Apk 50mb 限制的障碍。

按照所有步骤[http://developer.android.com/guide/market/expansion-files.html](http://developer.android.com/guide/market/expansion-files.html)

我知道您需要遵循这样的文件格式`[main|patch].<expansion-version>.<package-name>.obb`并做了同样的事情。

并且扩展文件可能是（ZIP、PDF、MP4 等）格式。

我在 Google Play 上发布 apk 时上传了其他扩展文件。在下载 apk 时，我在我的*Local(Advanced latest Device)*中获得了所有附加信息，但是通过代码我无法获得我的应用程序的可扩展文件。

在查看 sampleDownloader 代码的代码中，我知道它需要三个参数 `(int type, int expansionCode, long fileSize)`

在这里，`type: main/patch` `expansionCode: integer value`但我只是想知道如何在 Long（精确）中给出 FileSize？第二件事是它的显示消息，如**下载失败，因为找不到资源**

任何的想法？

**更新** 完成，所有步骤都显示**[在这里](https://stackoverflow.com/questions/11715855/steps-to-create-apk-expansion-file/11717019#11717019)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:27:34.167

您是否通过[**下载扩展文件**](http://developer.android.com/guide/market/expansion-files.html#Downloading)？它提到

如果您从 Android Market 下载的应用程序中没有扩展文件，您必须执行[**应用程序许可**](http://developer.android.com/guide/market/licensing/index.html)以获取应用程序的扩展文件**`names`**、`sizes`和`URLs`。

> 1.  使用 Google Play 的应用程序许可执行请求，以获取应用程序的扩展文件名、大小和 URL。
> 2.  使用 Google Play 提供的 URL 下载扩展文件并保存扩展文件。

**更新：**

不，Google 许可仅适用于付费应用程序不是强制性的。有一个明确的[**说明：**](http://developer.android.com/guide/market/licensing/index.html)在文档本身中定义了任何应用程序都可以使用许可服务来启动 APK 扩展文件的下载。但是，在这种情况下，您的请求将仅用于扩展文件，而不是用于检查用户是否为应用程序付费。

# jquery - 类似于 microsoft.com 的 jquery 内容滑块

> ID：10327535
> 
> 赞同：2
> 
> 时间：2012-04-26T05:05:43.593
> 
> 标签：jquery, scroll, slider

希望实现一个类似于 microsoft.com 上的 TOP PRODUCTS 部分的 jquery 内容滑块。只是想知道是否有人可以将我推向正确的方向。我想整个父母和孩子的关系是我努力解决的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:10:17.000

CeeMonet，见： http: [//www.designyourway.net/blog/resources/28-useful-jquery-sliders-you-need-to-download/](http://www.designyourway.net/blog/resources/28-useful-jquery-sliders-you-need-to-download/)

也

[http://vandelaydesign.com/blog/web-development/jquery-image-galleries/](http://vandelaydesign.com/blog/web-development/jquery-image-galleries/)

也有很多可供选择。干杯

# c++ - 在结构中重载双等号运算符？

> ID：10327538
> 
> 赞同：2
> 
> 时间：2012-04-26T05:06:06.273
> 
> 标签：c++, operator-overloading

```
#include <iostream>
using namespace std;

struct coord {
 int x;
 int y;
  bool operator== (const coord &c1) {
   return (x == c1.x && y == c1.y);
  }
};

int main() {
 coord xy1 = {12, 20};
 coord xy2 = {12, 20};
 cout << xy1 == xy2 << endl;
 return 0;
} 
```

我有上面的代码，编译器抛出了难以理解的错误。我不太清楚如何在结构中重载 == 运算符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T05:09:54.817

添加一对括号：

```
cout << ( xy1 == xy2 ) << endl; 
```

否则解析为：

```
(cout << xy1) == xy2 
```

# objective-c - 如何使 UIImageView 遵循特定路径？

> ID：10327541
> 
> 赞同：1
> 
> 时间：2012-04-26T05:06:28.257
> 
> 标签：objective-c, ios, core-animation, core-graphics, uigesturerecognizer

我使用以下方法绘制了一条弧线：

```
CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(context, 4.0);
    CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);
    CGContextMoveToPoint(context, 0,300);
    CGContextAddArcToPoint(context, 125,300, 125,480, 180);//last value is the radius
    CGContextStrokePath(context); 
```

我的目标是将 UImageView 放置在此弧的起始坐标处，并使用 UIPanGestureRecognizer 将其沿此弧滑动。现在我正在使用这条线获得手势翻译：`CGPoint translate = [sender translationInView:self.view];` 这`sender`是一种`UIPanGestureRecognizer`类型。

只要`translate.x`向正方向移动，图像就应该沿着弧线滑动（**------->**）

目前我的图像从坐标开始`(0,300)`，这与弧的起始坐标相同。图像响应 x 轴上的手势，但 y 值保持在`300`。如何保持对点的限制`translate`，使其遵循我创建的弧的坐标？

这是我目前拥有的，它所做的只是在 x 轴上滑出：

```
-(void)slide:(UIPanGestureRecognizer *)sender
{
    if([sender state] == UIGestureRecognizerStateBegan)
    {

        startPos = CGPointMake(0, 300);

        minPos = CGPointMake(0, 300);

        maxPos = CGPointMake(125, 480);

    }

    else if ([sender state] == UIGestureRecognizerStateChanged)
    {
        CGPoint translate = [sender translationInView:self.view];
        CGPoint newPos;

        newPos = CGPointMake(startPos.x + translate.x, startPos.y);

        //CGPoint newYPos = CGPointMake(startPos.x + translate.x, <#CGFloat y#>)

        if(newPos.x < minPos.x)
        {
            newPos.x = minPos.x;
            translate = CGPointMake(newPos.x - startPos.x, minPos.y);
        }
        if(newPos.x >= maxPos.x)
        {
            newPos.x = maxPos.x; 
            translate = CGPointMake(newPos.x - startPos.x, maxPos.y);
        }

        [sender setTranslation:translate inView:self.view];

        self.handle.center = newPos; //handle is a UIImageView
    }
} 
```

我认为问题在于`if`我用来限制 x 值的两个语句。我只是不确定如何限制 x&y 值`CGPoint translate`以遵循设定曲线。

非常感谢任何帮助。

# java - android-菜单设置自定义

> ID：10327542
> 
> 赞同：2
> 
> 时间：2012-04-26T05:06:39.890
> 
> 标签：java, android

我在 android 菜单中添加了设置选项。它在模拟器中测试时工作正常。但是当我尝试在设备中它不会改变..我能知道是什么问题吗？我是否需要更改 androidmanifest.xml 文件中的任何内容。
以下是我的代码：

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    menu.add(1,1,0,"Settings").setIcon(R.drawable.ic_tab_settings_grey);
    setMenuBackground();
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    switch(item.getItemId())
    {
    case 1:
        Intent in = new Intent(TransactionSummaryActivity.this, WelcomePage.class);
        startActivity(in);
        finish();
        return true;

    default:
        return true;
    }

}
protected void setMenuBackground(){  

           getLayoutInflater().setFactory( new Factory() {  
            @Override
            public View onCreateView(String name, Context context, AttributeSet attrs) {
                // TODO Auto-generated method stub

                 if ( name.equalsIgnoreCase( "com.android.internal.view.menu.IconMenuItemView" ) ) {  

                       try { // Ask our inflater to create the view  
                           LayoutInflater f = getLayoutInflater();  
                           final View view = f.createView( name, null, attrs );  
                           new Handler().post( new Runnable() {  
                               public void run () {  
                                   view.setBackgroundResource(R.drawable.menu_selector);  
                                  // view.setBackgroundColor(Color.parseColor("#257CB5"));

                                  ((TextView) view).setTextColor(Color.WHITE);

                               }  
                           } );  
                           return view;  
                       }  
                       catch (InflateException e) {}  
                       catch (ClassNotFoundException e) {}  
                   }  
                return null;
            }  
           });  
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:59:06.073

我只是在查看您的手机 api 级别是否低于您将应用程序设置为的级别。我相信如果它可以在模拟器上运行，但不能在您的设备上运行，我认为这不是编码问题。

删除手机上应用程序的所有痕迹。“卸载”它。然后尝试再次运行该应用程序，它应该可以工作。

# jquery - jquery 元素的顺序

> ID：10327543
> 
> 赞同：0
> 
> 时间：2012-04-26T05:06:39.940
> 
> 标签：jquery, list, jquery-ui-sortable

```
 <ul id="box">
    <li id="1">1</li>
    <li id="2">2</li>
    </ul>

    $("#box").sortable({ update: function() {
    var order = $("#box").sortable("serialize");
    alert(order);
    }
   }); 
```

如何在不使用可排序的情况下在 order 变量中获得相同的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:09:36.820

chang `<ul> to <ol>`，因为 ul 表示不可排序的列表

# jquery - 为什么我的径向网格图放大了这么多？

> ID：10327545
> 
> 赞同：0
> 
> 时间：2012-04-26T05:06:55.963
> 
> 标签：jquery, html, canvas, html5-canvas, jcanvas

在我的测试页面**[link removed]**上，应该有一系列从正方形右上角向外辐射的线（左侧垂直矩形是一个侧边栏，将用于不相关的内容）。使用右上角作为极坐标图的原点，线条从`theta`=`pi`到`3pi/2`。

然而，画布似乎被放大了，因为我（和我的一个朋友）只能看到几条大而模糊的线条，就像它被放大到左上角一样。没有进行缩放，我正在使用 jCanvas，一个用于 Canvas 对象的 jQuery 插件。如果我输出坐标，当我将它绘制在纸上时，它们会与它们应该是什么对齐。

问题可能是什么？

这是我的代码：

```
<script>

var gradations_theta, theta, this_x1, this_y1, this_x2, this_y2, start_r, end_r;
gradations_theta = 24;
start_r = 20;   // 20 pixels from center of galaxy
end_r  = 800;   // 800 pixels from center of galaxy (to corners west and south of center)

$(function() {
    for (theta = Math.PI; theta <= (Math.PI * 3 / 2); theta += (Math.PI / (gradations_theta * 2))) {

        this_x1 = Math.floor(800 + (start_r * Math.cos(theta)));
        this_y1 = Math.floor(Math.abs(start_r * Math.sin(theta)));
        this_x2 = Math.floor(800 + (end_r * Math.cos(theta)));
        this_y2 = Math.floor(Math.abs(end_r * Math.sin(theta)));

        $('#space-map')
        .restoreCanvas()
        .drawLine({
            strokeStyle: '#fff',
            strokeWidth: 1,
            x1: this_x1,
            y1: this_y1,
            x2: this_x2,
            y2: this_y2
        });

    }
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:42:00.997

Apparently setting the width and height of the `canvas` using the built-in attributes `width` and `height` solved this problem. My question regarding this detail has been answered here: [Canvas is stretched when using CSS but normal with "width" / "height" properties](https://stackoverflow.com/questions/2588181/canvas-is-stretch-when-using-css-but-normal-with-old-width-and-height-proper)

# android - GPS定位总是返回零速度

> ID：10327548
> 
> 赞同：3
> 
> 时间：2012-04-26T05:07:57.710
> 
> 标签：android, gps, android-4.0-ice-cream-sandwich

我的代码可以成功地从多个提供商那里获取位置更新并过滤它们以给出当前的最佳估计。

我添加了代码来检查返回的 Location.hasSpeed() 和 .hasBearing() 值，以便在用户实际移动时进行一些与方位相关的计算。

在运行 2.3.3 的华为 Sonic 上一切正常，但在运行 4.0.4 的 Google Nexus S 上，GPS 提供商的位置*总是*为 .hasSpeed() 返回 false，为 .getSpeed() 返回 0。

当我注册我的位置侦听器时，GPS 提供程序为 .supportsSpeed() 返回 true 但它永远不会返回位置中的速度，即使精度下降到 30m 并且它正在物理移动（在汽车中，在仪表板上以获得最大接收，屏幕开启）。

从 2.3.x 到 ICS 4.x 有什么区别吗？即使提供商报告支持，我是否必须实施自己的速度计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:25:46.843

Google Nexus S 有 GPS 问题的历史。我不认为它与ICS特别相关。您是否尝试过将手机恢复**出厂设置**然后重试？

# mysql - Mysql：我怎么知道我的 mysql 二进制文件是否支持 ssl

> ID：10327549
> 
> 赞同：3
> 
> 时间：2012-04-26T05:08:28.670
> 
> 标签：mysql, security, ssl

我正在尝试保护我的数据库服务器在实时设置上的安全。我读过它，就像我们可以在 mysql 中启用 ssl 以使主从之间通过网络传输的数据被加密。

有人可以帮助我如何知道我是否有 ssl 支持。如果我有我该如何启用它，因为我无法使用 --have-ssl 再次编译二进制文件

提前致谢。问候， UDAY

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T05:13:18.090

尝试使用`--ssl`以下选项启动 MySQL：

```
mysqld --ssl --help 
```

如果服务器不支持 SSL，您将看到一个错误：

```
[ERROR] mysqld: unknown option '--ssl' 
```

在正在运行的服务器上，您可以检查`have_ssl`或`have_openssl`变量：

```
mysql> SHOW VARIABLES LIKE 'have_ssl';
mysql> SHOW VARIABLES LIKE 'have_openssl'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-14T17:49:22.130

要添加到@BluesRockAddict 答案，*在正在运行的服务器上*，您还可以执行以下操作...

**查看 SSL 证书和密钥的路径..**

```
mysql> SHOW VARIABLES LIKE 'SSL%'; 
```

这将显示您的 MySql 连接应使用的 SSL 证书和密钥的路径。假设安装了openssl，`have_ssl`这些路径是必需的`have_openssl`。`ENABLED`

*例子*

[![查看 SSL 路径。](../Images/f8e505daac3117fb99f5e067e3f2596f.png)](https://i.stack.imgur.com/7mW4I.png)

如果 ssl 路径为空，则您需要创建所需的证书并重新启动 MySql 服务。该站点对如何执行此操作有很好的解释，[如何为 MySQL 服务器和客户端启用 SSL](http://xmodulo.com/enable-ssl-mysql-server-client.html)。一旦你这样做了`have_ssl`并且`have_openssl`应该出现`ENABLED`。

**检查 SSL 是否正在使用中。**

```
mysql> \s 
```

寻找这条线...

```
SSL:         Not in use 
```

*例子*

[![查看 SSL 是否正在使用中。](../Images/1f83da00211c91a4dee4c42eb704d4f3.png)](https://i.stack.imgur.com/NVqU3.png)

# jquery - 向 CKEditor 添加自定义按钮

> ID：10327558
> 
> 赞同：1
> 
> 时间：2012-04-26T05:09:58.717
> 
> 标签：jquery, drupal-7, ckeditor

嗨，我想在 drupal 中为 CKEditor 添加一个自定义按钮。我创建了一个插件，但它没有显示在我的 ckeditor 工具栏中。有人能帮我吗？代码如下

插件.js

```
CKEDITOR.plugins.add('newplugin',
{
    init: function(editor)
    {
        var pluginName = 'newplugin';
        CKEDITOR.dialog.add(pluginName, this.path + 'plugin.js');
        editor.addCommand(pluginName, new CKEDITOR.dialogCommand(pluginName));
        editor.ui.addButton('Newplugin',
            {
                label: 'Footnote or Citation',
        icon: this.path + 'newplugin.png',
                command: pluginName
            });
    }
});

config.js
CKEDITOR.editorConfig = function( config )
{

config.extraPlugins = 'newplugin';
config.toolbar = [
['Bold'],['Italic'],['newplugin']
]
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T00:46:31.177

你在使用所见即所得的模块吗？如果是这样，您必须创建一个实现所见即所得挂钩的模块，以将按钮添加到配置中。这可以使用以下代码完成：

```
function yourtheme_wysiwyg_plugin($editor, $version) {
    switch ($editor) {
        return array(
            'PluginName' => array(
                'path' => "Path to plugin directory",
                'filename' => 'plugin.js',
                'buttons' => array(
                    'Newplugin' => t('New Plugin'),
                ),
                'load' => TRUE,
                'internal' => FALSE,
            ),
        );
        break;
    }
} 
```

然后将主题上传到 Drupal 并清除缓存。该按钮现在应该出现在 WYSIWYG 管理页面上的按钮列表中，您可以在其中选中复选框并启用该按钮。

# java - 从 GWT 中的属性文件中获取键的值

> ID：10327559
> 
> 赞同：3
> 
> 时间：2012-04-26T05:10:04.790
> 
> 标签：java, gwt

如何根据 GWT 中的键从属性文件中获取值。我有两个属性文件，一个用于英语，另一个用于法语。我想通过使用 mouseover 事件从属性文件中获取值来为图标添加工具提示。

我怎样才能做到这一点？

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T05:21:08.523

您需要先创建一个与属性文件同名的接口，扩展GWT提供的内置Constants接口。方法名称必须与 .properties 文件中使用的标记名称匹配

此[链接](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nConstants)可能会对您有所帮助。然后在 mouseOver 事件处理程序中获取字符串。希望这可以帮助。

# actionscript-3 - as3 addChild 到缩放的影片剪辑中并保持相同的比例和位置

> ID：10327560
> 
> 赞同：0
> 
> 时间：2012-04-26T05:10:09.720
> 
> 标签：actionscript-3, flash, position, scale, addchild

**尝试：**

将影片剪辑 (NoScale_mc) 加载到缩放的影片剪辑 (Scaled_mc) 中。

**问题：**

当我将影片剪辑 NoScale_mc 加载到 Scaled_mc 时，它显然也会缩放。

**问题：**

* * *

如何将 NoScale_mc 保持在完全相同的位置和完全相同的比例，但仍使用 addChild() 方法将其加载到 Scaled_mc 中​​？

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:29:54.860

你可以用数学做一些逆向的花招来尝试实现这一点。因此，获取父 DisplayObject 的缩放值并使用这些值对子 DisplayObject 进行反向缩放。

例如，父 DisplayObject 缩放为：`scaleX = 1.45`和`scaleY = 4.6`。因此，您可以将子 DisplayObject 设置为:`scaleX = 1/1.45`和`scaleY = 1/4.6`.

不过，这可能会产生奇怪的结果，并且很可能最终会让人头疼。您可能最好将子 DisplayObject 添加到父级之上的舞台上，就像 Marty Wallace 所说的那样。如果您想让它看起来与父 DisplayObject 对齐，那么只需将它们的位置`x`和`y`位置都设置为相同的东西（或使用偏移量，如果需要的话）。

# cakephp - 使用 CakePHP HTML Helper输出多个元素

> ID：10327562
> 
> 赞同：0
> 
> 时间：2012-04-26T05:10:21.087
> 
> 标签：cakephp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:37:12.670

只需使用 HTML 帮助程序的 URL 方法而不是链接之一，其余的作为静态 HTML 执行，就我所见，最好将 PHP 的数量保持在最低限度。

```
<a href="<?php echo $this->Html->url($params); ?>">
    <h3>test</h3>
    <?php echo $this->Html->image($params); ?>
    <p>Some text</p>
</a> 
```

这将是完成此任务的最*有效*方式。但也许您应该考虑一下您的标记结构以及您想要实现的目标......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-03T23:08:25.613

我用

```
$this->Html->tag('li',
                     $this->Html->link(
                     '<i class="entypo-book"></i>'.
                     $this->Html->tag('span', $nom
                     .$this->Html->tag('span', '32', array('class' => 'badge'))
                     ),
                     array('controller' => 'Pages', 'action' => 'index'),
                     array('class' => 'active', 'title' => 'Pages', 'escape' => false)
                     )
                 ); 
```

# android - Android ExpandableListView GroupIndicator 重力

> ID：10327565
> 
> 赞同：1
> 
> 时间：2012-04-26T05:10:46.030
> 
> 标签：android, expandablelistview, gravity

如何更改`GroupIndicator`Android 的默认重力`ExpandableListView`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:37:43.923

在“expandablelist”中设置 android:groupIndicator="@null"

在“groupview”xml 中添加 ImageView

```
public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
     ImageView mGroupIndicator=(ImageView)convertView.findViewById(R.id.mGroupimage);
     if(isExpanded){
         mGroupIndicator.setImageResource(R.drawable.expanded);
     }else{
         mGroupIndicator.setImageResource(R.drawable.collapsed);
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:19:01.580

您无法更改默认设置..但是如果您正在实现自定义适配器..您可以放置​​一个带有组指示器背景的复选框并将其放置在您想要的任何位置..

# vbscript - 如何在 Windows 中获取服务器打印机的 DACL？

> ID：10327566
> 
> 赞同：1
> 
> 时间：2012-04-26T05:11:19.387
> 
> 标签：vbscript, active-directory, dacl

上下文：Windows7 64 位、ActiveDirectory、Windows Server 2003

我试图让微软在他们[的 Win32_Printer 类（Windows）的 GetSecurityDescriptor 方法](http://msdn.microsoft.com/en-us/library/aa390778)页面上给出的代码工作。我有点想知道 winmgmts 的双重实例化是如何工作的，即（来自他们的代码）

```
Set objWMIService = GetObject("winmgmts:" _
& "{impersonationLevel=impersonate, (Security)}!\\" & strComputer & "\root\cimv2")

Set objWMIService = GetObject("winmgmts:") 
```

我原以为第二个实例会打败第一个实例。这似乎可以通过以下事实得到证实：无论我在 strComputer 中输入什么服务器名称，我仍然会获得计算机上的打印机列表。

有没有人喜欢使用 VBScript 获得连接服务器的打印机的 DACL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:41:35.930

你是对的，这个脚本有不止一个问题，这是一个工作版本

```
SE_DACL_PRESENT = &h4
ACCESS_ALLOWED_ACE_TYPE = &h0
ACCESS_DENIED_ACE_TYPE  = &h1

strComputer = "xxxxxxxxxx"
strUser = "xxxxxxxxxxxx"
strPassword = "xxxxxxx"
strDomain = "xxx"

Set objSWbemLocator = CreateObject("WbemScripting.SWbemLocator")
Set objSWbemServices = objSWbemLocator.ConnectServer(strComputer, _
    "root\cimv2", _
     strUser, _
     strPassword, _
     "MS_409", _
     "ntlmdomain:" + strDomain)

Set colInstalledPrinters =  objSWbemServices.ExecQuery ("Select * from Win32_Printer")

On error resume next

For Each objPrinter in colInstalledPrinters
  Wscript.Echo "Name: " & objPrinter.Name 
  Return = objPrinter.GetSecurityDescriptor( objSD )
  If ( return = 2 ) Then
    WScript.Echo "Could not get security descriptor: " & Return
  Elseif ( return = 8 ) Then
    WScript.Echo "Unknown failure: " & Return
  Elseif ( return = 9 ) Then
    WScript.Echo "The user does not have adequate privileges to execute the method: " & Return
  Elseif ( return = 21) Then
    WScript.Echo "A parameter specified in the method call is not valid: " & Return
  Elseif ( return = 0 ) Then
    intControlFlags = objSD.ControlFlags
    If intControlFlags AND SE_DACL_PRESENT Then
      arrACEs = objSD.DACL
      For Each objACE in arrACEs
        WScript.Echo objACE.Trustee.Domain & "\" & objACE.Trustee.Name
        If objACE.AceType = ACCESS_ALLOWED_ACE_TYPE Then
          WScript.Echo vbTab & "User has access to printer"
        ElseIf objACE.AceType = ACCESS_DENIED_ACE_TYPE Then
          WScript.Echo vbTab & "User does not have access to the printer"
        End If
      Next
    Else
      WScript.Echo "No DACL found in security descriptor"
    end if
  Else
    WScript.Echo "Could not get security descriptor: " & Return
  End If
Next 
```

=>> 在我的域上，这为每个用户提供了两次 ACL，可能是由于提供安全性的方式引起的

```
Name: printer1
\CREATOR OWNER
  User has access to printer
\CREATOR OWNER
  User has access to printer
MCM\DomainUsers
  User has access to printer
MCM\DomainUsers
  User has access to printer
MCM\DomainUsers
  User has access to printer
MCM\admin
  User has access to printer
MCM\admin
  User has access to printer
BUILTIN\Administrators
  User has access to printer
BUILTIN\Administrators
  User has access to printer 
```

# .htaccess - 为什么 CodeIgniter 分页链接膨胀？

> ID：10327567
> 
> 赞同：0
> 
> 时间：2012-04-26T05:11:27.130
> 
> 标签：.htaccess, routing, pagination, codeigniter-2

我花了一些时间，但无法弄清楚出了什么问题。我正在使用 CodeIgniter 2.1.0。

所以基本上是这样的：

我的分页设置：

```
$config['base_url'] = base_url() . '/stores/';
$config['total_rows'] = $this->stores_model->getTotalRows();
$config['per_page'] = 20; //display 20 rows per page
$config['num_links'] = 10; //display 10 pagination links
$config['uri_segment'] = 2;
$config['full_tag_open'] = '<div id="pagination">';
$config['full_tag_close'] = '</div>';
$this->pagination->initialize($config); 
```

我从控制器获取这样的数据块。这也有效。

```
$data['stores'] = $this->stores_model->getChunks($config['per_page'], $this->uri->segment(2)); 
```

我的视图页面有：

```
<?php echo $this->pagination->create_links(); ?> 
```

现在一切正常。起初显示了 10 个分页链接，但是当我单击链接 8、9 或 10 等时，分页链接会膨胀。它现在显示链接 1 到 20。这是为什么呢？这可能是非常简单的事情，但似乎无法弄清楚。我期待分页链接类型的滚动，但仅显示 10 个链接，因为我在 config.xml 中设置。

谢谢并恭祝安康

迪帕克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:00:00.143

现在我明白了

$config['num_links'] 让我困惑了一段时间。

这意味着要在当前链接的两侧（上一个和下一个）显示的链接数。

```
ie. (show prev 10 links from current) <----- [current page] -----> (show next 10 links from current) 
```

将其设置为 5 解决了问题。现在我按预期总共显示了大约 11 个链接。

再次感谢

迪帕克

# java - JTree Drag and Drop：拖动节点及其子节点

> ID：10327572
> 
> 赞同：1
> 
> 时间：2012-04-26T05:11:44.837
> 
> 标签：java, swing, drag-and-drop, jtree

我想将拖放功能添加到我的`JTree`. 我试图从[这个线程](https://stackoverflow.com/questions/4588109/drag-and-drop-nodes-in-jtree)运行示例。它有效，但仅适用于树中的最后一片叶子，而不适用于包含一些子节点的节点。我也看过[这个线程](https://stackoverflow.com/questions/1526291/adding-drag-and-drop-support-to-jtree)。

我已经定义了 canImport 和 importData 方法，并且还设置了 setDragEnabled(true)。我只是不能用它的孩子拖动节点。

如何从第一个链接编辑示例以拖动节点及其子节点？据我了解，我应该设置 DataFormat 实例，以设置应拖动的类型。有人可以帮忙吗？

# java - IntelliJ 调试：暂停整个 VM，然后单线程

> ID：10327576
> 
> 赞同：6
> 
> 时间：2012-04-26T05:12:36.253
> 
> 标签：java, debugging, jvm, intellij-idea

我正在调试一个有很多线程的应用程序。我的断点设置为暂停整个 VM。

当一个线程遇到一个断点时，我想使用 Step Over。但这似乎会恢复整个 VM，直到该步骤完成。

如果我可以只单步到达断点的单线程，那真的很有帮助。

在 IntelliJ 11.1 / Java 6 中有什么方法可以做到这一点吗？（希望我没有遗漏一些明显的东西......）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-05-28T15:41:39.777

此功能是在 IntelliJ 16 中添加的（CrazyCoder 在他的回答中引用的问题已解决）

[![在此处输入图像描述](../Images/49b7233901e57fcfeba7b3a25b4307b8.png)](https://i.stack.imgur.com/iFFAX.png)

更多细节在这里：
[https ://blog.jetbrains.com/idea/2016/02/intellij-idea-16-eap-improves-debugger-and-adds-git-worktree-support/](https://blog.jetbrains.com/idea/2016/02/intellij-idea-16-eap-improves-debugger-and-adds-git-worktree-support/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T14:32:26.620

NetBeans 可以恢复单个线程。在调试模式下，您可以通过在线程`Play`附近按一个形如 (►) 的小按钮从左侧线程列表中恢复线程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T09:36:34.137

目前没有这种可能性，因为它可能导致死锁。不过，您可以投票给[IDEA-43728](http://youtrack.jetbrains.com/issue/IDEA-43728)。

# drupal - Drupal 7 视图列表，添加链接

> ID：10327585
> 
> 赞同：1
> 
> 时间：2012-04-26T05:13:28.863
> 
> 标签：drupal, drupal-7, drupal-views

目前我有一个安装了 colorbox 的 Drupal 安装，这允许我上传一组带有一些文本的图像，每个条目都是它自己的实体，但都列在同一页面上。

我只是想知道是否有一种方法可以在每个视图项（实体）下显示自定义链接。这可能吗？

我正在寻找一种快速的方法来简单地添加一个链接，该链接链接到彩盒图像滑块的第一个图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:05:01.287

首先，将您的设置`Format`为`Show: Fields`. 为此，请单击旁边的链接`Show:`（请参阅下图）并将其更改为`Fields`。

![在此处输入图像描述](../Images/dbc292c6fc14a96d8e1a8f53a0cd633a.png)

如果您`Format`设置为`Show: Fields`，您可以添加一个新的字段类型`Global: Custom text`。然后，在出现的文本框中，只需插入您的自定义链接。如果您需要动态拉入 URL，请使用**替换模式**（请参阅文本框下的列表）。

如果您需要使用另一个字段作为替换模式，请以与添加`Global: Custom text`字段相同的方式添加它，但请确保选中该`Exclude from display`复选框，以便它不会显示在您的视图中。

# excel - 如何使用 FormatConditions 根据单元格值与其他单元格的比较来更改单元格颜色？

> ID：10327586
> 
> 赞同：2
> 
> 时间：2012-04-26T05:13:30.140
> 
> 标签：excel, vba

如果单元格值大于其他列中的另一个单元格，我需要更改单元格颜色。例如 G6 > D6 中的值，此规则需要适用于整个列。

我用 formatConditions 实现了一些代码，但结果不是很正确。

```
 Set rngCell = Cells(6, 7)

 Set objCF = rngCell.FormatConditions.Add _
            (Type:=xlCellValue, Operator:=xlGreater, Formula1:=rngCell.offset(, -3))
'set formats for new CF
With objCF
    .Font.ColorIndex = 26
    .Interior.ColorIndex = 19
End With 
```

使用此代码，我得到的结果规则是：单元格值 > 18（18 是 D6 的单元格值）

但我想要的是这样的规则：单元格值 > $D6

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:00:22.680

这是我使用的方法（您可以使用宏记录器轻松创建和修改）。格式将应用于第七列（“G”）。该公式是不言自明的。请注意，由于公式是一个字符串，您可以动态连接列/行。

```
Dim r As Range

Set r = Sheet1.Columns(7)
r.FormatConditions.Add Type:=xlExpression, Formula1:="=$G1>$D1"
r.FormatConditions(r.FormatConditions.Count).SetFirstPriority
With r.FormatConditions(1)
    .Interior.PatternColorIndex = xlAutomatic
    .Interior.ColorIndex = 19
    .Font.ColorIndex = 26
End With
r.FormatConditions(1).StopIfTrue = False

set r = nothing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:52:13.693

如果您只针对该单元格进行操作，请尝试此操作

```
Set rngCell = Cells(6, 7)

Set objCF = rngCell.FormatConditions.Add(Type:=xlExpression, _
                                         Operator:=xlGreater, _
                                         Formula1:="=" & rngCell.Address & ">" & rngCell.Offset(, -3).Address)
'set formats for new CF
With objCF
    .Font.ColorIndex = 26
    .Interior.ColorIndex = 19
End With 
```

如果您正在为整个列执行此操作，请尝试此操作

```
Set rngCell = Cells(1, 7)

Set objCF = Columns("G:G").FormatConditions.Add(Type:=xlExpression, _
                                         Operator:=xlGreater, _
                                         Formula1:="=" & Replace(rngCell.Address, "$", "") & _
                                         ">" & Replace(rngCell.Offset(, -3).Address, "$", ""))
'set formats for new CF
With objCF
    .Font.ColorIndex = 26
    .Interior.ColorIndex = 19
End With 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T04:43:06.317

感谢大家的投入，也许我没有正确描述我的问题。我想要的只是改变G列中一个单元格的颜色，例如值$G$9>$D$9，那么我只需要改变单元格G9的格式，整列的规则相同（不包括四个头排）。

现在我已经制定了一个解决方案，目前它工作正常。

```
Dim r As Range
Set r = Cells(5, 7)
r.FormatConditions.Delete
r.FormatConditions.Add Type:=xlCellValue, Operator:=xlGreater, Formula1:="=$D5"
r.FormatConditions(r.FormatConditions.Count).SetFirstPriority
With r.FormatConditions(1)
    .Interior.PatternColorIndex = xlAutomatic
    .Interior.ColorIndex = 19
    .Font.ColorIndex = 26
End With
r.FormatConditions(1).StopIfTrue = False

r.Copy
Range("G5:G" & lastRowNum).PasteSpecial xlPasteFormats 
```

# java - 元标记在几分钟内刷新

> ID：10327590
> 
> 赞同：3
> 
> 时间：2012-04-26T05:13:49.427
> 
> 标签：java, javascript, jquery, html, css

```
<meta name="redirection" http-equiv="refresh" 
      content="2;url=http://www.google.com"> 
```

它会在 2 秒后重定向到 google.com。而不是 2 秒后进行重定向 2 分钟后只需更改即可`content="120"`。

问题：
数值在数据库中配置为分钟（30分钟），以秒为单位`(30*60=1800)`。如何进行此计算并将元标记的内容动态设置为`1800`.

我尝试使用 jquery

```
var value = "1800;http://wwww.google.com";  
$('meta[name="redirection"]').attr("content", value); 
```

它不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:33:19.997

可以创建元标记客户端，例如：

```
var foo = document.createElement('meta'), refreshtime = 1800;
foo.setAttribute('http-equiv','refresh');
foo.setAttribute('content',refreshTime+';url=http://www.google.com');
document.getElementsByTagName('head')[0].appendChild(foo); 
```

或使用 jquery：

```
$('<meta http-equiv="refresh" content="'+refreshtime+
     ';url=http://www.google.com"/>')
 .appendTo($('head'));​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:01:00.083

```
<html>    
<head>  
<script type="text/javascript">
var refreshTime= 2*2;
    var foo = document.write('<meta http-equiv="refresh" content="'+refreshTime+';url=http://www.google.com">');
</script>

</head>

<body>

Meta tag testing

</body>

</html> 
```

刚刚发现，用document.write也可以

# javascript - 保持 API 调用私有/受保护

> ID：10327591
> 
> 赞同：1
> 
> 时间：2012-04-26T05:13:54.227
> 
> 标签：javascript, jquery, ruby, ajax, sinatra

我正在开发一个主要是静态的网络应用程序 - 只是 HTML/CSS/JS + 资产。我正在使用机架服务器（实际上很薄）来服务它。

虽然应用程序大部分是静态的，但在此过程中出现了一些服务器端需求。由于应用程序需要通过 JavaScript 与这些需求进行交互，因此我将 Sinatra 添加到堆栈中，以便我可以轻松设置一些路由以用作简单的 API。

一个这样的 API 调用是发送电子邮件 - Web 应用程序需要一种向用户发送电子邮件的方法。我设置了一个可以使用包含 JSON 对象的 POST 调用的路由（/api/mail），Ruby 将触发一封电子邮件（通过 SendGrid）。

这是我的问题 - 从本质上讲，这些 API 调用是公开的。大多数时候，这很好 - 但是使用电子邮件 API，我想保护它，这样任何人都无法通过简单的 POST 开始发送恶意电子邮件，冒充我的应用程序。

问题是，我不太确定如何对此进行身份验证。Web 应用程序本身是客户端，而不是用户，因此密码或 API 密钥似乎毫无价值，因为任何人都可以嗅出 POST 标头并获取应用程序发布到 API 的凭据。

通过 SSL 加密所有内容是我唯一的选择，还是我错过了一些显而易见的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:31:45.210

归根结底，您所做的任何事情都可以很容易地被刮掉。我会通过 ip 和 session 进行一些激进的速率限制，不要想是否还有其他可能（或有效）

# sql - 在我的 oracle 选择查询中获取重复项

> ID：10327592
> 
> 赞同：-2
> 
> 时间：2012-04-26T05:14:04.243
> 
> 标签：sql, oracle, oracle10g

以下是我对结果的 Oracle 选择查询，但我得到了我不需要的重复项。我觉得其他人很难找到，请尝试一下。

```
SELECT I.EID                         EID,
       I.WT                          Title,
       I.RID                         RID,
       I.FORMNAME                    STAGENAME,
       I.FORMS                       STATUS,
       I.INPT                        Projects,
       To_char(I.DVDD, 'DD/MM/YYYY') DVDD,
       CASE
         WHEN B.SID = 2
              AND B.DID = 2 THEN Trunc(F.EVENTDATE) - I.DVDD
         ELSE NULL
       END                           DEVLAPSEDAYS,
       To_char(I.MDD, 'DD/MM/YYYY')  MDD,
       CASE
         WHEN B.SID = 2
              AND B.DID = 2 THEN Trunc(F.EVENTDATE) - I.MDD
         ELSE NULL
       END                           MONITORLAPSEDAYS,
       L.LDEID                       LEADEID
FROM   table1 I,
       table2 F,
       table3 B,
       table4 L
WHERE  I.ACTIVEFLG = 1
       AND I.LATESTFLG = 1
       AND I.FORMSTATUS IN ( 1, 3 )
       AND I.UNIQUEID = F.UNIQUEID
       AND B.SID = 2
       AND B.DID IN ( 2, 3 )
       AND ( F.EVENTDATE > I.DVDD
              OR F.EVENTDATE > I.MDD )
       AND ( ( Trunc(F.EVENTDATE) - I.DVDD ) > 2
              OR ( Trunc(F.EVENTDATE) - I.MDD ) > 2 )
       AND F.LINKID = B.LINKID
       AND I.FORMSTAGENAME IN ( 'Develop', 'Monitor' ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:00:53.110

您没有链接`TABLE4`（别名为`L`）列表中的任何其他表，从而创建笛卡尔积。这可能会生成您的重复记录。
加入`TABLE4`其他一张桌子，你应该很高兴。

请参阅笛卡尔积：[http ://docs.oracle.com/cd/B14117_01/server.101/b10759/queries006.htm](http://docs.oracle.com/cd/B14117_01/server.101/b10759/queries006.htm)

这也是使用 SQL-92 语法而不是旧 SQL-96 的一个很好的理由。它强制您明确指定表连接。
我已经使用 SQL-92 重写了您的查询，您只需为 TABLE4 插入连接条件，它应该适合您。

希望能帮助到你...

```
SELECT I.EID                         EID,
       I.WT                          Title,
       I.RID                         RID,
       I.FORMNAME                    STAGENAME,
       I.FORMS                       STATUS,
       I.INPT                        Projects,
       To_char(I.DVDD, 'DD/MM/YYYY') DVDD,
       (CASE
           WHEN B.SID = 2
            AND B.DID = 2 
           THEN Trunc(F.EVENTDATE) - I.DVDD
           ELSE NULL
        END)                         DEVLAPSEDAYS,
       To_char(I.MDD, 'DD/MM/YYYY')  MDD,
       (CASE
         WHEN B.SID = 2
          AND B.DID = 2 
         THEN Trunc(F.EVENTDATE) - I.MDD
         ELSE NULL
        END)                         MONITORLAPSEDAYS,
       L.LDEID                       LEADEID
  FROM table1 I
 INNER JOIN table2 F ON (I.UNIQUEID = F.UNIQUEID)
 INNER JOIN table3 B ON (F.LINKID = B.LINKID)
 INNER JOIN table4 L ON (<insert join clause here>)
 WHERE I.ACTIVEFLG = 1
   AND I.LATESTFLG = 1
   AND I.FORMSTATUS IN ( 1, 3 )
   AND B.SID = 2
   AND B.DID IN ( 2, 3 )
   AND ( F.EVENTDATE > I.DVDD OR F.EVENTDATE > I.MDD )
   AND ( ( Trunc(F.EVENTDATE) - I.DVDD ) > 2 OR ( Trunc(F.EVENTDATE) - I.MDD ) > 2 )
   AND I.FORMSTAGENAME IN ( 'Develop', 'Monitor' ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:00:03.863

我对此类信息所做的最好的事情是告诉您对整个查询进行分组：

```
 GROUP BY I.EID,I.WT,I.RID,I.FORMNAME,I.FORMS,I.INPT,
   To_char(I.DVDD, 'DD/MM/YYYY') DVDD,
   CASE
     WHEN B.SID = 2
          AND B.DID = 2 THEN Trunc(F.EVENTDATE) - I.DVDD
     ELSE NULL
   END,
   To_char(I.MDD, 'DD/MM/YYYY')  MDD,
   CASE
     WHEN B.SID = 2
          AND B.DID = 2 THEN Trunc(F.EVENTDATE) - I.MDD
     ELSE NULL
   END,
   L.LDEID 
```

# nhibernate - 来自表 Y 的关联引用了一个未映射的类：Y - C# NHibernate

> ID：10327593
> 
> 赞同：5
> 
> 时间：2012-04-26T05:14:13.007
> 
> 标签：nhibernate, nhibernate-mapping

我得到了例外：

```
"An association from the table order refers to an unmapped class: FrancosPoS.DBMapping.pastaCombo" 
```

对于这个 NHibernate 映射：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping assembly="FrancosPoS" namespace="FrancosPoS.DBMapping" xmlns="urn:nhibernate-mapping-2.2">
  <class name="order" table="order" lazy="true" >
    <id name="idOrder">
      <generator class="identity" />
    </id>
    <many-to-one insert="false" update="false" lazy="false" name="idPastaI" class="FrancosPoS.DBMapping.pastaIndividual">
      <column name="idPastaI" sql-type="int(11)" not-null="false" />
    </many-to-one>
    <!--<property name="idPastaI">
      <column name="idPastaI" sql-type="int(11)" not-null="false" />
    </property>-->
    <many-to-one insert="false" update="false" lazy="false" name="pastaCombo" class="FrancosPoS.DBMapping.pastaCombo">
      <column name="idPastaC" sql-type="int(11)" not-null="false" />
    </many-to-one>
    <!--<property name="idPastaC">
      <column name="idPastaC" sql-type="int(11)" not-null="false" />
    </property>-->
    <many-to-one insert="false" update="false" lazy="false" name="idPastaF" class="FrancosPoS.DBMapping.pastaFeast">
      <column name="idPastaF" sql-type="int(11)" not-null="false" />
    </many-to-one>
    <!--<property name="idPastaF">
      <column name="idPastaF" sql-type="int(11)" not-null="false" />
    </property>-->
    <many-to-one insert="false" update="false" lazy="false" name="idSalad" class="FrancosPoS.DBMapping.salad">
      <column name="idSalad" sql-type="int(11)" not-null="false" />
    </many-to-one>
    <!--<property name="idSalad">
      <column name="idSalad" sql-type="int(11)" not-null="false" />
    </property>-->
    <many-to-one insert="false" update="false" lazy="false" name="idDrink" class="FrancosPoS.DBMapping.drink">
      <column name="idDrink" sql-type="int(11)" not-null="false" />
    </many-to-one>
    <!--<property name="idDrink">
      <column name="idDrink" sql-type="int(11)" not-null="false" />
    </property>-->
    <property name="price">
      <column name="price" sql-type="decimal(8,4)" not-null="true" />
    </property>
    <property name="cash">
      <column name="cash" sql-type="tinyint(1)" not-null="false" />
    </property>
    <property name="credit">
      <column name="credit" sql-type="tinyint(1)" not-null="false" />
    </property>
    <property name="obs">
      <column name="obs" sql-type="varchar(150)" not-null="true" />
    </property>
  </class>
</hibernate-mapping> 
```

这是我的cs课：

```
namespace FrancosPoS.DBMapping {

    public partial class order {
        public order() { }
        public virtual int idOrder { get; set; }
        public virtual pastaIndividual pastaIndividual { get; set; }
        public virtual pastaCombo pastaCombo { get; set; }
        public virtual pastaFeast pastaFeast { get; set; }
        public virtual salad salad { get; set; }
        public virtual drink drink { get; set; }
        public virtual string price { get; set; }
        public virtual System.Nullable<int> cash { get; set; }
        public virtual System.Nullable<int> credit { get; set; }
        public virtual string obs { get; set; }
    }
} 
```

PastaCombo 映射：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping assembly="FrancosPoS" namespace="FrancosPoS.DBMapping" xmlns="urn:nhibernate-mapping-2.2">
  <class name="pastaCombo" table="pasta_combo" lazy="true" >
    <id name="idPastaC">
      <generator class="identity" />
    </id>
    <property name="type">
      <column name="type" sql-type="varchar(25)" not-null="true" />
    </property>
    <property name="price">
      <column name="price" sql-type="decimal(8,4)" not-null="true" />
    </property>
    <property name="freeDrink">
      <column name="freeDrink" sql-type="smallint(5) unsigned" not-null="true" />
    </property>
    <property name="freeSalad">
      <column name="freeSalad" sql-type="smallint(5) unsigned" not-null="true" />
    </property>
  </class>
</hibernate-mapping> 
```

PastaCombo 类：

```
namespace FrancosPoS.DBMapping {

    public class pastaCombo {
        public pastaCombo() { }
        public virtual int idPastaC { get; set; }
        public virtual string type { get; set; }
        public virtual string price { get; set; }
        public virtual int freeDrink { get; set; }
        public virtual int freeSalad { get; set; }
    }
} 
```

我错过了什么？

真挚地，

PS.：属性被注释是因为我（认为我）不需要它们，因为我的类具有对象类型，而不是 int ID。如果我使用它 NHibernate 会抛出“尝试通过反射设置属性类型”的错误。

编辑：包括 PastaCombo 映射和类。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-15T14:38:49.907

我刚刚遇到了同样的错误：

```
An association from the table <table name> refers to an unmapped class: <my entity class> 
```

解决我的问题的唯一解决方案是在映射文件中添加 .hbm ，其中文件名应采用以下格式：`<filename>.hbm.xml`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T05:48:39.373

那么您是否将 FrancosPoS.DBMapping.pastaCombo 映射到某个地方？Is 是多对一的，它需要引用映射的实体类型。

您对 pasteCombo 的映射是否实际包含在程序集中（如果您使用嵌入式资源）并且程序集是否已加载到会话工厂？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-14T18:49:16.210

我可以看到这个问题有一个公认的答案，但我想补充一点。我确实花了半天时间试图理解为什么会抛出这个异常。我已经搜索了十几个答案，但我无法找出问题所在。我已经在我的项目中集成了 NHibernate 来观看[这篇](http://www.devcurry.com/2013/01/using-nhibernate-in-aspnet-mvc-4.html)文章。在我的 Models 文件夹中，我创建了一个内部文件夹 NHibernate，并在其中创建了一个文件夹 Configuration，其中包含 hibernate.cfg.xml 文件和一个 Mappings 文件夹，其中我的实体的所有映射都位于像这个 EntityName 这样的文件下。 hbm.xml。

问题是在我的多对一和一对多映射中，在类属性中我只有实体类名。例如类=“类别”。这条路不够用！！！我看过[这篇](https://stackoverflow.com/questions/12547084/one-to-may-and-generics-association-references-unmapped-class)文章，它有一个短语“完全合格的名称”。这使我从 class="Category" 更改为 class="myProject.Models.Category" 以便它可以找到 Category 类。

希望这有帮助！

# jsp - Servlet 仍然在页面刷新时传递数据

> ID：10327594
> 
> 赞同：1
> 
> 时间：2012-04-26T05:14:13.153
> 
> 标签：jsp, servlets, refresh

通过 servlet 插入数据库后，我将页面重定向到“主页”页面。但是，当我刷新时，仍然会传递数据，并且会出现数据库中的重复项。

系统流程是这样的：我加载一个列出项目的页面，当我单击一个项目时，我更改页面中的一个 div 以显示一个文本区域以供评论。当我单击提交评论时，这些值被插入到数据库中，并且页面被重定向到没有项目列表的页面。但是，当我刷新时，数据仍然传递。

有谁知道我如何才能真正删除数据或在刷新时不传递数据？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:40:38.560

这些症状表明您实际上是在将请求*转发*到主 JSP，而不是重定向。在 post 之后进行真正的[重定向](http://en.wikipedia.org/wiki/Post/Redirect/Get)，这个问题根本不应该发生。

因此，请确保您确实在执行重定向，如下所示

```
response.sendRedirect(request.getContextPath() + "/home.jsp"); 
```

因此不是如下的前锋

```
request.getRequestDispatcher("/home.jsp").forward(request, response); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:41:58.597

最可能的情况是在提交第一个请求后，浏览器中的 url 发生了变化，并指示为 servlet-URL。因此，当您点击刷新按钮时，它直接调用 servlet，因此再次执行相同的过程。例如 -

您当前的浏览器网址是 -- www.myurl.com/mypage.jsp

请求 url 是 www.myurl.com/mypage.action（指示 servlet）

提交第一个请求后，浏览器中的 url 将是 www.myurl.com/mypage.action

因此，每当您刷新页面时，它都会直接调用 servlet。

解决方案是 - 完成请求后在 servlet 中再次重定向 jsp 页面。

# .net - 使用 BackgroundWorker.CancelAsync 时如何避免竞争条件？

> ID：10327595
> 
> 赞同：4
> 
> 时间：2012-04-26T05:14:19.303
> 
> 标签：.net, backgroundworker, race-condition

在有关方法的[MSDN 文章](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.COMPONENTMODEL.BACKGROUNDWORKER.CANCELASYNC%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV3.5%22%29;k%28DevLang-CSHARP%29&rd=true)`BackgroundWorker.CancelAsync`中，有一条警告说：

> 请注意，`DoWork`事件处理程序中的代码可能会在发出取消请求时完成其工作，并且您的轮询循环可能会错过`CancellationPending`设置为**true**。在这种情况下，即使发出了取消请求，事件处理程序中 的`Cancelled`标志 也不会设置为**true 。**这种情况称为 *竞争条件*，是多线程编程中常见的问题。`System.ComponentModel.RunWorkerCompletedEventArgs``RunWorkerCompleted`

 ***避免这种*竞争条件*的正确和好的解决方案是什么？

这是我的示例代码，它引发了这种情况的出现：

```
public partial class MainWindow : Window
{
    BackgroundWorker bW;
    int bWsCount = 0;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_MouseMove(object sender, MouseEventArgs e)
    {
        if (bW != null)
            bW.CancelAsync();
        bW = new BackgroundWorker();
        bW.WorkerSupportsCancellation = true;
        bW.DoWork += new DoWorkEventHandler(bW_DoWork);
        bW.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bW_RunWorkerCompleted);
        bW.RunWorkerAsync(0);
        bWsCount++;
        labelBackgroundWorkersCount.Content = bWsCount;
    }

    void bW_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        BackgroundWorker worker = sender as BackgroundWorker;
        if (e.Cancelled || worker.CancellationPending)
        {
            bWsCount--;
            labelBackgroundWorkersCount.Content = bWsCount;
        }
        else
            worker.RunWorkerAsync(1000);
    }

    void bW_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker worker = sender as BackgroundWorker;
        int sleepDuration = Convert.ToInt32(e.Argument);
        if (worker.CancellationPending) { e.Cancel = true; return; }
        Thread.Sleep(sleepDuration);
        if (worker.CancellationPending) { e.Cancel = true; return; }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T08:34:56.107

没有办法避免它，不是每个线程问题都有解决方案。当你把它们推到极端时，这些事情是可以推理出来的。想象一下，您的 UI 线程中的代码在工作线程完成前一*纳秒*调用了 CancelAsync() 。就像线程正在执行它的最后一条机器代码指令一样。显然，线程不可能检测到这一点。UI线程也没有任何可能的方式来查看线程是否在其最后一条指令上。

这不是一个真正的问题，只需在编写 RunWorkerCompleted 事件处理程序时记住它。如果 e.Cancelled 属性为 false，则工作人员无论如何都完成了。如有必要，您可以在调用 CancelAsync() 时将其与另一个设置为 true 的布尔值简单地 &&。大致：

```
 private bool cancelRequested;

    private void CancelButton_Click(object sender, EventArgs e) {
        cancelRequested = true;
        backgroundWorker1.CancelAsync();
    }

    private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e) {
        if (e.Error != null) throw e.Error;
        if (!e.Cancelled && !cancelRequested) {
            // Completed entirely normally
            //...
        }
    } 
```

请记住，这不仅仅是一场代码竞赛*。*更实际的问题是，这也是用户大脑中的一场竞赛。使用失败模式，在用户单击“取消”按钮之前一切正常完成一毫秒。

因此，据用户所知，该操作已被取消，而实际上并未取消。这可能会产生不愉快的后果，您必须通过告诉用户*真正*发生的事情来处理这些后果。在这种情况下，使用代码片段确实没有任何意义，如果您*只*取消操作并允许它完成，它也可以正常工作。***

# c# - 可以扩展 DNN 用户和角色吗？

> ID：10327597
> 
> 赞同：0
> 
> 时间：2012-04-26T05:14:28.520
> 
> 标签：c#, visual-studio-2010, dotnetnuke, webmatrix, dotnetnuke-6

我创建菜单的方式导致了一个小问题。我在样式表中定义样式并创建一个包含 html 的模块，这是 HTML 的示例：

```
<ul class="cmenu">
    <li><a href="">Link1</a></li>
    <li><a href="">Link2</a></li>
    <li><a href="">Link3</a></li>
    <li><a href="">Link4</a></li>
</ul> 
```

我的原因是我需要整个站点的多个菜单都具有不同的链接（比使用带有选项的 dnn:NAV 简单得多）并且它运行良好。

但是尝试以这种方式创建指向用户配置文件的链接似乎是不可能的。例如，当访问我的用户个人资料时，我被带到这个链接：“../UserProfile/tabid/57/userId/1/Default.aspx”，这对我来说意味着 DNN 正在动态创建链接并且页面是从提供的链接。如果我在这里错了，请纠正我。

我也想创建新的输入字段，我该怎么做？

多年来，我一直在 PHP/HTML/CSS/JS 中进行开发，ASP.NET 对我来说还是很新的，我在这个主题上找不到任何东西，因此我的问题。

我非常熟悉 C# 和 Visual Studio，如果可能的话，我想使用这些工具来扩展当前的用户和角色结构。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:13:07.117

配置文件的 URL 是使用核心中的 NavigateUrl 方法在服务器端生成的。

要以原始方式解决您的 HTML 模块问题，您可以启用令牌替换并使用 [User:UserID] 作为 URL 中的令牌（在示例中将 1 替换为令牌）。

但是，这对于未经身份验证的用户来说效果不佳，因为它会尝试将他们带到 -1。老实说，创建​​菜单可能会导致您为其创建自定义模块。

# google-maps-api-3 - 融合表中的内部查询

> ID：10327599
> 
> 赞同：0
> 
> 时间：2012-04-26T05:15:23.517
> 
> 标签：google-maps-api-3, google-fusion-tables

此查询将从三个下拉框和一个文本框获取输入，它按预期工作正常。但我的要求是我需要使用另外三个下拉框和一个文本才能更深入地查询。所以，我需要持有第一次查询和第二次查询的结果。我应该怎么做。帮帮我。

```
 That another three drop down box value is also obtained from the same variable's as 'operator','textvalue','querypass'.

function querymap()
        {
        var operator=document.getElementById('operatorstring').value.replace(/'/g, "\\'");
        var textvalue=document.getElementById("text-value").value.replace(/'/g, "\\'");
        var querypass=document.getElementById('query-pass').value.replace(/'/g, "\\'");
        var searchStringe = document.getElementById('Search-stringe').value.replace(/'/g, "\\'");
        var searchString = document.getElementById('search-string').value.replace(/'/g, "\\'");
            {

              layer.setQuery("SELECT 'geometry'," + querypass + " FROM " + tableid + " WHERE " + querypass + " " + operator + " '" + textvalue + "' AND VillageName = '"+ searchStringe+"'");

            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:28:54.483

您可以根据需要在查询中包含任意数量的 AND 条件。没有理由不检查例如 textvalue2、querypass2、searchString2 等并将它们添加到您的查询中。请参阅此[setQuery() 答案](https://stackoverflow.com/a/9401345/1211981)，它可能会给您一些想法。每次调用 layer.setQuery() 或 layer.setOptions({query: ...}); 时都需要设置所有搜索条件；

# java - 访问资源时出现 ClassNotFoundException

> ID：10327602
> 
> 赞同：0
> 
> 时间：2012-04-26T05:15:47.033
> 
> 标签：java, spring, tomcat

使用 Spring MVC 应用程序从 @Controller 访问资源时出现此错误：

```
java.lang.ClassNotFoundException: org.openymsg.network.event.SessionListener
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    com.myapp.common.controller.MyController.getMessage(MyController.java:21)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

该应用程序有两个@Controller，一个可以工作，另一个在访问时会抛出 ClassNotFoundException（上图）

该应用程序在 Tomcat 6 上运行

我在 pom 中为库“openymsg”放置了 maven 依赖项，我可以从“Libraries->Maven Dependencies”中看到实际的 jar。我想知道为什么我会收到这个错误。是因为缺少罐子吗？或者别的什么，也许这个库不能在 Tomcat 上运行或与 Spring 一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:18:45.060

不知何故无法访问该类。可能的原因是，

1.  缺少 Jar 文件
2.  路径设置错误
3.  你已经做了任何Jar文件升级并且新版本有不同的类结构

# c++ - 在 Visual Studio 中以字节数组形式将 64 位双精度转换为 80 位双精度

> ID：10327609
> 
> 赞同：2
> 
> 时间：2012-04-26T05:17:32.487
> 
> 标签：c++, visual-studio-2010, visual-c++, floating-point, double

我正在寻找将在 Visual Studio 中采用 64 位双精度并将其转换为[80 位扩展（IEEE-754）](https://en.wikipedia.org/wiki/Extended_precision#IEEE_754_extended_precision_formats)双精度的代码。结果应该存储在一个 10 字节的数组中（我想是小端格式）。原因是我需要将 80 位双精度发送到一个用 Borland c++ 编写的程序并要求这个双精度。但是我不知道该怎么做，因为我尝试过（基本上分别取 52 位和 11 位的尾数和指数，将指数转换为 15 位的 16383 偏移量并将尾数填充为 64 位）没有t 似乎工作。这是[这个问题](https://stackoverflow.com/questions/2963055/msvc-win32-convert-extended-precision-float-80-bit-to-double-64-bit)的反面。

```
inline void ConvertDblToLongDbl(double dbl, unsigned char aCh[10])
{
__int64 ull= *(__int64*)(&dbl);
    *(unsigned short*)&aCh[8]= (unsigned short)((ull>>52&0x7FF+15360)|  //     exponent, from 11 bits to 15 bits
        ((ull&(__int64)1<<63)?0x8000:0));   // sign, the 16th bit
    ull= ull&0xFFFFFFFFFFFFF;
    *(__int64*)&aCh[0]= ull|0x8000000000000000;
} 
```

谢谢，
米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:56:27.187

内联汇编将是最简单和最快的方法。像这样：

```
void ConvertDoubleToLongDouble(double value, unsigned char result[10]) {
    __asm {
        fld value;
        mov ebx, result;
        fstp tbyte ptr [ebx];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-13T13:16:31.013

```
ul>>52&0x7FFF+15360 
```

按位 & 的运算符优先级低于加法，这会给您带来意想不到的结果。

```
ull= ull&0xFFFFFFFFFFFFF; 
```

您忘记将其向左移动 11 次。

# regex - 构造对应于正则表达式的有限状态自动机。我的解决方案正确吗？

> ID：10327611
> 
> 赞同：0
> 
> 时间：2012-04-26T05:17:38.617
> 
> 标签：regex, finite-automata

我已经在油漆中画出了我的答案，它们正确吗？

(4c) 为字母表 {0, 1} 构造有限状态自动机，对应于下列每个正则表达式：

(一) 0

![4ci](../Images/71d85c5b6f25bdaedf59dd7bd9321dce.png)

(ii) 1 | 0

![4cii](../Images/599d7a38bb14aa92646ac8d2fb9e6bba.png)

(iii) 0 * (1 | 0)

![4ciii](../Images/9c9e6fc0e4780bd29f442bf7dc57d4cf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:44:37.410

前两个是正确的，尽管第一个可能可以写成（取决于您的约定）

```
(0) -- 0 --> ((1)) 
```

最后一个也是正确的，但可以简化为（无论何时`ε`出现，都可能有一种方法将边缘和状态压缩在一起以将其删除）

```
 +- 0 -+
  |     |
  v     |
 (0) ---+
 / \ 
1   0
 \ / 
  v
((1)) 
```

（请原谅我的 ascii 图。我`(..)`用于每个状态和`((..))`最终状态。）

请注意，这`0*`基本上是一个从状态到自身的循环，因为在读取`0`剩余的正则表达式以匹配之后是相同的（只要我们不在字符串的末尾）。

# java - 使用 PowerMock 模拟来自多个类的静态方法

> ID：10327612
> 
> 赞同：109
> 
> 时间：2012-04-26T05:17:56.550
> 
> 标签：java, junit4, powermock

我知道如何使用 PowerMock 从类中模拟静态方法。
但我想使用 JUnit 和 PowerMock 在测试类中模拟来自多个类的静态方法。

谁能告诉我是否有可能做到这一点以及如何做到这一点？

* * *

## 回答 #1

> 赞同：268
> 
> 时间：2012-04-26T08:19:34.737

只需`@PrepareForTest({Class1.class,Class2.class})`为多个课程做。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-10-14T08:37:47.083

```
@Test
 @PrepareForTest({Class1.class, Class2.class})
 public final void handleScript() throws Exception {
    PowerMockito.mockStatic(Class1.class);
    PowerMockito.mockStatic(Class2.class); 
```

ETC...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-25T10:27:12.550

如果您使用的是 kotlin，则语法是这样的

`@PrepareForTest(ClassA::class, ClassB::class)`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-02T19:18:58.500

**在带有 powermock/junit 的 java 中，** 使用`@PrepareForTest({})`与数组 ( ) 一样多的静态类`{}`。

```
@RunWith(PowerMockRunner.class)
@PrepareForTest({XmlConverterA.class, XmlConverterB.class})
class TransfersServiceExceptionSpec {

} 
```

我**在 scala/junit 中使用了 powermock，**因为 scalatest 没有与 powermock 集成。

```
@RunWith(classOf[PowerMockRunner])
@PrepareForTest(Array(classOf[XmlConverterA], classOf[XmlConverterB]))
class TransfersServiceExceptionSpec {

  @Test
  def test() {
  }
} 
```

# iphone - 将单例对象保存到磁盘 - 本机 Iphone 应用程序

> ID：10327614
> 
> 赞同：0
> 
> 时间：2012-04-26T05:18:03.157
> 
> 标签：iphone, object, save, nscoding, encoder

我在尝试将单例对象保存到 iPhone 磁盘时遇到了一些麻烦。

该对象是 2 个数组的集合，其中包含最喜欢的帖子和面临的工作。基本上 --> `Favorites = arrayOfFavedPosts + arrayOfFavedJobs`

现在我正在尝试保存该`Favorites`对象，以便可以从磁盘中读取曾经收藏过的帖子或工作。

[我的 Faves.m 文件](http://pastebin.com/FJJuDgXv)。

错误：

```
2012-04-26 14:56:56.957 FirstDesign_test2[666:10403] -[Post encodeWithCoder:]: unrecognized selector sent to instance 0x6c74a80 
```

`saveToDisk`当我将新对象添加到其中一个数组时调用该方法时会触发此错误...

一些帮助将不胜感激！

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:30:00.793

您需要在您的班级（并且可能在您的班级）上采用并实施该`NSCoding`协议。`Post``Job`

[*NSCoding 协议参考*](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)
[*存档和序列化编程指南：编码和解码对象*](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Archiving/Articles/codingobjects.html#//apple_ref/doc/uid/20000948-BCIHBJDE)

# c# - xna中的点球比赛，我如何只计算1个进球，然后让时间来获得进球信息？

> ID：10327616
> 
> 赞同：0
> 
> 时间：2012-04-26T05:18:07.493
> 
> 标签：c#, xna, xna-4.0

我正在 xna 编程一个点球大战，我的问题是我如何只计算 1 个进球，然后让时间获得进球信息？？，

我已经解决了守门员，球门和球门区之间的冲突，我保持并得分但是当球触及球门区时，当球触及球门区时得分总是增加，我怎么算1个进球然后显示目标信息？？

这是我到目前为止所拥有的，我考虑延迟但它不起作用，请帮助我陷入困境

```
 if (_gameState == GameState.Playing)
         {

             if (CollideGoalArea())
             {
                 if (CollideGoalKeeper())
                 {
                     _messageToDisplay = "Goalie defends the goal!";
                     this.Window.Title = "Missed!";
                     _gameState = GameState.Message;
                 }
                 else
                 {
                     score++;
                     _messageToDisplay = "GOAL!";

                     this.Window.Title = "Goal!";

                     _gameState = GameState.Message;
                 }
             }
             else
             {
                 _messageToDisplay = "You missed the goal.";
                 _gameState = GameState.Message;
             }

         }
         else if (_gameState == GameState.Message)
         {

             if (Mouse.GetState().RightButton == ButtonState.Pressed)
             { // right click to continue playing
                 _gameState = GameState.Playing;
                 balonpos.X = 300;
                 balonpos.Y = 350;

             }

         } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T05:33:23.493

问题正在发生，因为您的代码在`score`任何时候检测到球在球门内时都会增加。由于（默认情况下）`Update`每秒调用 60 次，如果您的球在球门内，则分数将每秒增加 60。

你可以重写你的代码，让你的游戏有两种状态：显示消息状态和播放状态：

```
enum GameState
{
    Playing,
    Message
}

GameState _gameState = GameState.Playing;

String _messageToDisplay = "";
int _score = 0;

protected override void Update(GameTime gameTime)
{
    if(_gameState == GameState.Playing)
    {
        if(CollideGoalArea())
        {
            if(CollideGoalkeeper())
            {
                _messageToDisplay = "Goalie defends the goal!";
                _gameState = GameState.Message;
            }
            else
            {
                _messageToDisplay = "GOAL!";
                score++;
                _gameState = GameState.Message;
            }
        }
        else
        {
            _messageToDisplay = "You missed the goal.";
            _gameState = GameState.Message;
        }
    }
    else if(_gameState == GameState.Message)
    {
        if(Mouse.GetState().RightButton == ButtonState.Pressed) // right click to continue playing
             _gameState = GameState.Playing;

        //you should also reset your ball position here
    }
} 
```

这样，每当球进入球门区域时，要么是得分，要么是失误，要么是击中守门员。然后游戏将立即更改状态，以便在您用鼠标右键单击之前不会再次检查这些条件。

您还可以将输入检测逻辑以及球和守门员位置更新逻辑放在这些 if 中（您可能不希望玩家在显示消息时能够射出另一个球）。

# iphone - 更改 UItableview 的大小会更改自定义单元格的功能

> ID：10327622
> 
> 赞同：0
> 
> 时间：2012-04-26T05:18:33.787
> 
> 标签：iphone, uitableview

我创建了一个自定义单元格

![在此处输入图像描述](../Images/9ed45eb4c1f11e12485df95597802d66.png)

在这个“+”号中增加票数，“-”号减少票数。当票数为 0 时，禁用“-”，当票数为 4 时，禁用“+”。到目前为止它工作正常。问题是现在我想在单击第 4 行的“+”按钮时更改表格的框架大小，并在单击第 4 行的“-”时重新获得框架大小。当我这样做时，其他行的“-”功能会随机变化。请让我知道我做错了什么。谢谢这是我的代码

```
 -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier=@"CellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: CellIdentifier];

    if (cell == nil) 
    { 
        cell 

= [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier: CellIdentifier] autorelease];

            UILabel *labelOne = [[UI

Label alloc]initWithFrame:CGRectMake(70, 10, 100, 20)];
            labelOne.tag = 100;
            labelOne.backgroundColor=[UIColor clearColor];
            labelOne.font=[UIFont systemFontOfSize:14];
            [cell.contentView addSubview:labelOne];
            [labelOne release];

            minusbutton=[[UIButton alloc]initWithFrame:CGRectMake(152, 5, 15, 20)];
            minusbutton.tag=104;
            [minusbutton setEnabled:NO];
            minusbutton.backgroundColor=[UIColor clearColor];
            [minusbutton addTarget:self action:@selector(DecreaseTickets:) forControlEvents:UIControlEventTouchUpInside];
            [minusbutton setTitle:@"-" forState:UIControlStateNormal];
            [minusbutton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
            [minusbutton setBackgroundImage:[UIImage imageNamed:@"button-green1.png"] forState:UIControlStateNormal];
            [cell.contentView addSubview:minusbutton];
            [minusbutton release];

            UILabel *quantity = [[UILabel alloc]initWithFrame:CGRectMake(170, 5, 20, 20)];
            quantity.tag = 103;
            quantity.backgroundColor=[UIColor clearColor];
            quantity.font=[UIFont systemFontOfSize:12];
            [cell.contentView addSubview:quantity];
            [quantity release];

            addbutton=[[UIButton alloc]initWithFrame:CGRectMake(192, 5, 15, 20)];
            addbutton.tag=105;
            addbutton.backgroundColor=[UIColor clearColor];
            [addbutton addTarget:self action:@selector(IncreaseTickets:) forControlEvents:UIControlEventTouchUpInside];
            [addbutton setTitle:@"+" forState:UIControlStateNormal];
            [addbutton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
            [addbutton setBackgroundImage:[UIImage imageNamed:@"button-green1.png"] forState:UIControlStateNormal];
            [cell.contentView addSubview:addbutton];
            [addbutton release];

            UILabel *labelTwo = [[UILabel alloc]initWithFrame:CGRectMake(240, 10, 80, 20)];
            labelTwo.tag = 101;
            labelTwo.backgroundColor=[UIColor clearColor];
            labelTwo.font=[UIFont systemFontOfSize:14];
            labelTwo.textColor=[UIColor colorWithRed:0.25098 green:0.447059 blue:0.07451 alpha:1];
            [cell.contentView addSubview:labelTwo];
            [labelTwo release];

            UILabel *label3 = [[UILabel alloc]initWithFrame:CGRectMake(70, 30, 230, 30)];
            label3.tag = 102;
            label3.backgroundColor=[UIColor clearColor];
            label3.numberOfLines=2;
            label3.font=[UIFont systemFontOfSize:12];
            [cell.contentView addSubview:label3];
            [label3 release];

        }
    }

        UILabel *labelOne = (UILabel *) [cell.contentView viewWithTag:100];
        NSString *ss2=[[NSString alloc]initWithFormat:@"%@",[[eventTicketListArray objectAtIndex:indexPath.row ]tit] ];

        labelOne.text = ss2;    

        UILabel *labelTwo = (UILabel *) [cell.contentView viewWithTag:101];
        NSString *string2=[[NSString alloc]initWithFormat:@"%@",[[eventTicketListArray  objectAtIndex:indexPath.row ]price] ];

            labelTwo.text =string2;

        UILabel *label3 = (UILabel *) [cell.contentView viewWithTag:102];
        label3.text=[[NSString alloc]initWithFormat:@"%@",[[eventTicketListArray objectAtIndex:indexPath.row ]desc ] ];

        UILabel *label4 = (UILabel *) [cell.contentView viewWithTag:103];
        label4.text=[[NSString alloc]initWithFormat:@"%d",[[eventTicketListArray objectAtIndex:indexPath.row ]qty ] ];

    }

    return cell;

     } 
```

+ 按钮单击的方法

```
 -(void)IncreaseTickets:(id)sender{
    NSIndexPath *indexPath =[ticketTable indexPathForCell:(UITableViewCell *)[[sender superview] superview]];
    NSUInteger row = indexPath.row;

    UITableViewCell *currentCell = (UITableViewCell *)[[sender superview] superview] ;

    for(UILabel *lbl in [currentCell.contentView subviews])
    {
        if(([lbl isKindOfClass:[UILabel class]]) && ([lbl tag] == 103))
        {
                str = [lbl.text intValue];

                str++;

                eventTicketList=(EventDetailTicketsList *)[eventTicketListArray objectAtIndex:row];
                eventTicketList.qty=str;

                lbl.text=[NSString stringWithFormat:@"%d",str];

        }
    }

        for(UIButton *btn in [currentCell.contentView subviews])
        {
            if(([btn isKindOfClass:[UIButton class]]) && ([btn tag] == 105))
            {

                if (str==4) {
                    [btn setEnabled:NO];
                }
            }

        }

    for(UIButton *btn in [currentCell.contentView subviews])
    {
    if(([btn isKindOfClass:[UIButton class]]) && ([btn tag] == 104))
    {

            [btn setEnabled:YES];

    }
    }
    if (row==3) {
        ticketTable.frame=CGRectMake(0, 0, 320, 70);

    }

    [currentCell setNeedsDisplay];

} 
```

方法 - 按钮单击

```
-(void)DecreaseTickets:(id)sender{

    NSIndexPath *indexPath =[ticketTable indexPathForCell:(UITableViewCell *)[[sender superview] superview]];
    NSUInteger row = indexPath.row;

    UITableViewCell *currentCell = (UITableViewCell *)[[sender superview] superview] ;

    for(UILabel *lbl in [currentCell.contentView subviews])
    {
        if(([lbl isKindOfClass:[UILabel class]]) && ([lbl tag] == 103))
        {

            str = [lbl.text intValue];

            str--;

            eventTicketList=(EventDetailTicketsList *)[eventTicketListArray objectAtIndex:row];
            eventTicketList.qty=str;

            lbl.text=[NSString stringWithFormat:@"%d",str];
        }
    }

    for(UIButton *btn in [currentCell.contentView subviews])
    {
        if(([btn isKindOfClass:[UIButton class]]) && ([btn tag] == 104))
        {

            if (str<=0) {
                [btn setEnabled:NO];

            }
        }

    }
    for(UIButton *btn in [currentCell.contentView subviews])
    {
        if(([btn isKindOfClass:[UIButton class]]) && ([btn tag] == 105))
        {
            [btn setEnabled:YES];
        }

    }
         if (row==3){
        ticketTable.frame=CGRectMake(0, 0, 320, 200);
    }

    [currentCell setNeedsDisplay];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:22:28.090

在您的按钮单击中添加下面的代码，或者您也可以在`didSelectRowForIndexPath`.

```
[self.tableView beginUpdates];
[self.tableView endUpdates]; 
```

使用它会自动处理 tableview 调用下面的方法。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 300;// here you can calculate cell height according to your requirements.
} 
```

希望对你有帮助...

# c++ - 一旦我的设备通过 USB 连接就触发一个 exe

> ID：10327627
> 
> 赞同：2
> 
> 时间：2012-04-26T05:18:52.983
> 
> 标签：c++, c, winapi, usb, device-driver

一旦我的嵌入式设备连接到我的 PC 的 USB 端口，它应该触发一个 exe 作为事件。我怎样才能做到这一点？

我应该创建一个服务来继续监视 USB 连接器总线，还是 Windows 中是否有任何默认 API 可以实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T08:45:50.677

在连接时启动的简单 exe 是不可能的。但是您可以编写一个服务或用户模式应用程序来监听设备到达事件。[WM_DEVICECHANGE](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363480%28v=vs.85%29.aspx)发送到所有（[已注册](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363432%28v=vs.85%29.aspx)）应用程序，其设备接口 guid 表示插入了哪个设备。然后您可以将此 id 与 setupapi 一起使用以查看它是否是您的设备。

收到该事件后，您可以启动可执行文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T05:26:13.450

根据您的 Windows 版本，可以使用 USB 驱动器根文件夹中的 AutoRun.inf 文件来[解决问题。](http://www.samlogic.net/articles/autorun-usb-flash-drive.htm)出于安全原因，默认情况下这是关闭的，并且在 Windows 7 中根本不允许。

为了以更强大的方式实现相同的效果，您需要创建一个服务来监控您的设备是否已连接（例如，iTunesHelper 监控已连接的 Apple 设备）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T10:05:56.093

最简单的解决方案可能是一个简单的[UMDF](http://msdn.microsoft.com/en-us/windows/hardware/gg463294)驱动程序。这基本上是连接设备时调用的一个小型 COM 组件。

# git - 为什么 DoctrineMongoORMModule 从 github 的递归子模块更新失败？

> ID：10327628
> 
> 赞同：3
> 
> 时间：2012-04-26T05:18:53.903
> 
> 标签：git, zend-framework2, doctrine-odm

这是我做错了什么，还是更广泛的错误？

如果我在一个空目录中执行以下 git 命令：

```
git init
git submodule add https://github.com/doctrine/DoctrineMongoODMModule \vendor\DoctrineMongoODMModule
git submodule update --init --recursive 
```

一切顺利，多个子模块被拉取，然后失败，输出如下：

```
fatal: not a git repository: ../../../../../../../../../../.git/modules/vendor/DoctrineMongoODMModule/modules/vendor/mongodb-odm/modules/lib/vendor/doctrine-mongodb/modules/lib/vendor/doctrine-common
Unable to find current revision in submodule pat 'lib/vendor/doctrine-common' 
```

我做了更多的挖掘工作。导致问题的子模块中的 .git 文件具有以下内容：

```
gitdir: ../../../../../../../../../../.git/modules/vendor/DoctrineMongoODMModule/modules/vendor/mongodb-odm/modules/lib/vendor/doctrine-mongodb/modules/lib/vendor/doctrine-common 
```

我已经检查了 gitdir 路径，它确实存在。但是，我使用的是 Windows XP 机器，如果我从 cmd 提示符尝试此操作，我会遇到问题：

```
C:\xds\sds\vendor\DoctrineMongoODMModule\vendor\mongodb-odm\lib\vendor\doctrine-
mongodb\lib\vendor\doctrine-common>cd ../../../../../../../../../../.git/modules
/vendor/DoctrineMongoODMModule/modules/vendor/mongodb-odm/modules/lib/vendor/doc
trine-mongodb/modules/lib/vendor/doctrine-common
The system cannot find the path specified. 
```

看来目录更改字符串太长了，因为如果我将它分成两部分，它可以工作：

```
C:\xds\sds\vendor\DoctrineMongoODMModule\vendor\mongodb-odm\lib\vendor\doctrine-
mongodb\lib\vendor\doctrine-common>cd ../../../../../../../../../../.git/modules
/vendor/DoctrineMongoODMModule/modules/vendor/mongodb-odm/modules/lib/vendor/doc
trine-mongodb/

C:\xds\sds\.git\modules\vendor\DoctrineMongoODMModule\modules\vendor\mongodb-odm
\modules\lib\vendor\doctrine-mongodb>cd modules/lib/vendor/doctrine-common

C:\xds\sds\.git\modules\vendor\DoctrineMongoODMModule\modules\vendor\mongodb-odm
\modules\lib\vendor\doctrine-mongodb\modules\lib\vendor\doctrine-common> 
```

任何建议或帮助将不胜感激。干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T23:14:15.053

好的，所以我解决了这个问题。Mingw32 有一个路径长度限制，这与 windows 路径长度限制有关（参见[msdn](http://msdn.microsoft.com/en-us/library/aa365247%28VS.85%29.aspx)）。通过缩短 gitdir 路径解决了问题。我没有使用相对路径，而是将其更改为绝对路径，`../../../../../../../../../../`来自 gitdir 字符串的巫婆 elimaties 以换取`c:/xds/sds`. 这种缩短足以让一切顺利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T08:50:37.570

正如 superdweebie 所说，git dir 路径中存在长度问题。但他没有说在哪里可以找到 gitdir 字符串：

它位于递归子模块（克隆的）内的 .git 上

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T15:18:53.883

您在子模块的错误 url 处做了。如果您检查您在命令 ( `https:\\github.com\doctrine\DoctrineMongoORMModule`) 中使用的 url，您会注意到您确实收到了 404 错误。该项目的正确 url 是`https://github.com/doctrine/DoctrineMongoODMModule.git`或`git://github.com/doctrine/DoctrineMongoODMModule.git`（可从两个按钮`HTTP`或`Git Read-Only`顶部获得）。

要解决此问题，请`.gitmodules`在存储库的根目录中打开 并查找类似的行

```
[submodule]
    path = \vendor\DoctrineMongoORMModule
    url = https:\\github.com\doctrine\DoctrineMongoORMModule 
```

并用正确的网址替换网址。您也可以用反斜杠替换所有正斜杠并删除路径中的前导斜杠（如果您不希望它最终出现在您的根目录中）。最后，重新运行上一个命令`git submodule update --init --recursive`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-20T07:23:48.087

我遇到了同样的错误并修复了它，但我认为它与 superdweebie 所说的 Windows 路径长度限制无关。就像错误所说的那样，`Unable to find current revision in submodule path`并且`The system cannot find the path specified`。您必须手动编辑`.git`文件中正确的相对路径或使用绝对路径。

# php - 在 Yii 中实现自定义 getter？

> ID：10327634
> 
> 赞同：1
> 
> 时间：2012-04-26T05:19:42.080
> 
> 标签：php, yii, yii-cmodel

我正在与 Yii 合作，我有以下情况：

我有一个 MySQL 表：

```
charges {
    id INT AUTOINCREMENT,
    name VARCHAR(256),
    value DOUBLE
} 
```

然后我有这个表中的模型。最后，我有了创建、列出、管理、更新和查看的视图。

在**管理**和**视图**视图中，我想显示`value`用两个十进制数字格式化的字段。执行此操作的一种选择是在**视图**和**管理**文件中格式化数字。有没有办法在模型中创建一个方法，然后不必在视图中做任何事情，但方法本身会解决格式化数字的问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:09:03.043

您可以在模型中覆盖[CActiveRecord 的 afterFind() 方法](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#afterFind-detail "http://www.yiiframework.com/doc/api/1.1/CActiveRecord#afterFind-detail")并格式化其中的`value`字段。

或者，您也可以声明模型的虚拟属性，并在 afterFind() 方法中设置它，并在视图中使用此虚拟属性。

示例（具有虚拟属性）：

```
Class ChargesModel extends CActiveRecord{
    public $valueModified;

    /*
     * other code
     */

    protected function afterFind(){
        parent::afterFind();
        // in the following line i'm just making $valueModified and $value equal, but obviously you would have to insert the 2 decimals
        $this->valueModified=$this->value;
    }
} 
```

然后你可以像这样访问虚拟属性：`$modelObject->valueModified`

我建议您使用 virtual 属性，因为您同时拥有 unmodified`$value`和 modified `$modifiedValue`，一旦格式化完成，我们可以根据需要使用其中任何一个，而不需要在需要原始时重新格式化回原始。

# java - Spring @RequestParam 和 req.getParameter("xx") 的工作方式是否不同..？

> ID：10327636
> 
> 赞同：4
> 
> 时间：2012-04-26T05:19:59.163
> 
> 标签：java, ajax, spring

请理解我的英语不好。

我使用 Spring MVC 并替换了这个源

```
@RequestMapping("/ajax/add_server")
public void addServer(HttpServletRequest request, HttpServletResponse response) throws Exception {
    String host = request.getParameter("host");
    String port = request.getParameter("port");
    String state = request.getParameter("state");

    serverService.addServer(host, port, state);
} 
```

到

```
@RequestMapping("/ajax/add_server")
public void addServer(
        @RequestParam("host") String host,
        @RequestParam("port") String port,
        @RequestParam("state") String state) throws Exception {

    serverService.addServer(host, port, state);

} 
```

addServer() 方法由 AJAX 调用。

在使用 req.getParameter() 的情况下，我的 ajax 加载图像消失了，但是当我使用 @RequestParam 时图像没有消失。

我猜 Ajax XMLRequest Object 没有得到任何成功的 MSG。

但我不知道为什么，这正常吗？

**额外发现！！**

```
@RequestMapping("/ajax/add_server")
    public void addServer(
            @RequestParam("host") String host,
            @RequestParam("port") String port,
            @RequestParam("state") String state,
            HttpServletResponse response) throws Exception {

        serverService.addServer(host, port, state);
    } 
```

我添加了对参数的响应，然后图像消失了。我不知道为什么。

**我把这个留作我的参考。**

具有 void 返回类型的 Controller 方法使用 URI-BASED VIEW。

例如，以下源代码使用 ajax/add_server.jsp 作为视图。

```
@RequestMapping("/ajax/add_server")
    public void addServer(
            @RequestParam("host") String host,
            @RequestParam("port") String port,
            @RequestParam("state") String state) throws Exception {

        serverService.addServer(host, port, state);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T06:03:03.580

的默认`@RequestParam`值是该值是必需的，如果没有则抛出异常。另一方面，`getParameter`它只是将一个空值传递给下一个方法。因此，如果有时您没有提供所有三个参数，那么更改将无法正常工作。

编辑：

关于您发布的其他信息：当 void 方法将 HttpServletResponse 作为参数时，AnnotationMethodHandlerAdapter 内部有一些特殊处理会更改路由。基本上，它假定由于您接受了响应，您正在处理需要生成的任何输出，并且它会禁用默认视图分辨率。这将导致服务器简单地使用空响应正文回复 200。

如果您有一个 void 方法，但没有读取 HttpResponse 对象，它会恢复为默认视图分辨率。这可能导致生成错误，因为我怀疑您在任何地方都有一个名为 add_server 的 .jsp 文件！:) 由于您的服务调用在方法返回和 Spring 尝试视图解析之前完成并提交，因此请求基础“有效”。ajax 调用最终会转到错误处理程序而不是成功处理程序。

tl;博士有时带注释的控制器“魔术”有点太神奇了:)

# iphone - UIPasteBoard 改变我的图像方向

> ID：10327637
> 
> 赞同：0
> 
> 时间：2012-04-26T05:20:04.387
> 
> 标签：iphone, objective-c, ios, uipasteboard

我正在复制图像数组，`UIPasteBoard`当我尝试以图像方向粘贴图像时`mail`，图像方向正在发生变化。这就是我复制图像的方式。

```
UIPasteboard *pasteBoard = [UIPasteboard generalPasteboard];
pasteBoard.images = imageArray; 
```

如何在不更改图像方向的情况下复制图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:31:22.397

如果您对结果不满意，UIImage 的 imageWithCGImage:scale:orientation: 方法可以修改方向。

您的邮件应用程序显示的可能是在应用方向信息旋转它之前的真正像素阵列。

[http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/UIImage/imageWithCGImage:scale:orientation](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/UIImage/imageWithCGImage:scale:orientation)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:43:13.773

我有这个工作。我只是使用 setData 为其提供原始数据，然后使用 forPasteboardType 设置数据类型。就在您的下方

如果（文件存在）{

尝试这个

```
 NSData *data = [NSData dataWithContentsOfFile:imagefile];
    [pasteboard setData:data forPasteboardType:@"public.png"]; 
```

愿这对你有所帮助。

# c++ - 我可以在 DLL 中使用前向声明吗？

> ID：10327638
> 
> 赞同：0
> 
> 时间：2012-04-26T05:20:17.007
> 
> 标签：c++, function, dll

我有一个主项目和一个 DLL 项目。主可执行文件链接到 DLL。在主项目中，我有一个功能：

```
int func(char *str)
{
    .....
} 
```

在DLL项目中，我想使用这个函数。我可以转发声明并使用它吗？喜欢：

```
int func(char *str);

int dllFunc()
{
    ...
    status = func(str);
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:44:13.433

One (fairly common) way of doing it is to provide a callback from the application, i.e.

In DLL:

```
typedef void (*callback)();

callback my_callback;

void dll_register_callback(callback app_callback) { my_callback = app_callback; }

void do_things() { my_callback(); } 
```

In application:

```
void cb() {}

dll_register_callback(cb); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:34:43.707

您不能使用前向声明前向声明是不同的。如果要在 dll 中调用某些方法，则必须使用[GetProcAdress](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)或[Implicit linking](http://msdn.microsoft.com/en-us/library/d14wsce5%28v=vs.71%29.aspx)。

无论如何，看起来您想从某个 DLL 调用放置在可执行文件中的方法，据我所知，它可以完成。而且它没有多大意义，因为 DLL 被设计为在应用程序而不是主要可执行文件之间共享。

# android - Android Flickr Json 缓存图像

> ID：10327645
> 
> 赞同：2
> 
> 时间：2012-04-26T05:20:41.907
> 
> 标签：android, arrays, json, caching, flickr

我希望有人可以帮助我弄清楚如何缓存 Flickr Json 图像以缓存以更快地加载和离线使用......下面的代码来自教程，我已经弄清楚了所有这些，但在尝试阅读/使用时迷失了方向Android 开发人员资源和网络上的其他示例...非常感谢您提供解决方案并帮助完成这项工作...我是编程新手，感谢这里的知识 :)

```
 package com.windmillagency;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;

import org.apache.http.HttpEntity;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ProgressDialog;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.Toast;

public class AndroidFlickrActivity extends BT_activity_base {

    public String thisActivityName = "Flickr";

    ProgressDialog progressDialog;
    BackgroundThread backgroundThread;

    public class FlickrImage {
        String Id;
        String Owner;
        String Secret;
        String Server;
        String Farm;
        String Title;

        Bitmap FlickrBitmap;

        FlickrImage(String _Id, String _Owner, String _Secret, 
                String _Server, String _Farm, String _Title){
            Id = _Id;
            Owner = _Owner;
            Secret = _Secret;
            Server = _Server;
            Farm = _Farm;
            Title = _Title;

            FlickrBitmap = preloadBitmap();
        }

        private Bitmap preloadBitmap(){
            Bitmap bm= null;

            String FlickrPhotoPath = 
                    "http://farm" + Farm + ".static.flickr.com/" 
                    + Server + "/" + Id + "_" + Secret + "_m.jpg";

            URL FlickrPhotoUrl = null;

            try {
                FlickrPhotoUrl = new URL(FlickrPhotoPath);

                HttpURLConnection httpConnection 
                    = (HttpURLConnection) FlickrPhotoUrl.openConnection();
                httpConnection.setDoInput(true);
                httpConnection.connect();
                InputStream inputStream = httpConnection.getInputStream();
                bm = BitmapFactory.decodeStream(inputStream);

            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return bm;
        }

        public Bitmap getBitmap(){
            return FlickrBitmap;
        }

    }

    class FlickrAdapter extends BaseAdapter{
        private Context context;
        private FlickrImage[] FlickrAdapterImage;;

        FlickrAdapter(Context c, FlickrImage[] fImage){
            context = c;
            FlickrAdapterImage = fImage;
        }

        public int getCount() {
            // TODO Auto-generated method stub
            return FlickrAdapterImage.length;
        }

        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return FlickrAdapterImage[position];
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            ImageView image;  
            if (convertView == null) {
                image = new ImageView(context);  
                image.setLayoutParams(new Gallery.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));  
                image.setScaleType(ImageView.ScaleType.FIT_CENTER);  
                image.setPadding(8, 8, 8, 8);   
            } else {  
                image = (ImageView) convertView;    
            }  

            image.setImageBitmap(FlickrAdapterImage[position].getBitmap());

            return image; 
        }

    }

    FlickrImage[] myFlickrImage;

    /*
     * FlickrQuery = FlickrQuery_url 
     * + FlickrQuery_per_page 
     * + FlickrQuery_nojsoncallback 
     * + FlickrQuery_format
     * + FlickrQuery_tag + q
     * + FlickrQuery_key + FlickrApiKey
     */

    String FlickrQuery_url = "http://api.flickr.com/myflickrURL";
    String FlickrQuery_per_page = "&per_page=10";
    String FlickrQuery_nojsoncallback = "&nojsoncallback=1";
    String FlickrQuery_format = "&format=json";
    String FlickrQuery_tag = "&tags=";
    String FlickrQuery_key = "&api_key=";

    //  Apply your Flickr API:
    //  www.flickr.com/services/apps/create/apply/?
    String FlickrApiKey = "xxxxxxxxxxxxxxxxxxx";

    final String DEFAULT_SEARCH = "flickr";

    EditText searchText;
    Button searchButton;

    Gallery photoBar;

    Bitmap bmFlickr;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.activityName = "AndroidFlickrActivity";
        BT_debugger.showIt(activityName + ":onCreate"); 

        //reference to base layout..
            LinearLayout baseView = (LinearLayout)findViewById(R.id.baseView);

            //setup background colors...
            BT_viewUtilities.updateBackgroundColorsForScreen(this, this.screenData);

            //setup background images..
            if(backgroundImageWorkerThread == null){
                backgroundImageWorkerThread = new BackgroundImageWorkerThread();
                backgroundImageWorkerThread.start();
            }           

            //setup navigation bar...
            LinearLayout navBar = BT_viewUtilities.getNavBarForScreen(this, this.screenData);
            if(navBar != null){
                baseView.addView(navBar);
            }

            //inflate this screens layout file...
            LayoutInflater vi = (LayoutInflater)thisActivity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View thisScreensView = vi.inflate(R.layout.flickr, null);

            //add the view to the base view...
            baseView.addView(thisScreensView);  

       searchText = (EditText)findViewById(R.id.searchtext);
        searchText.setText(DEFAULT_SEARCH);
        searchButton = (Button)findViewById(R.id.searchbutton);

        photoBar = (Gallery)findViewById(R.id.photobar);

        searchButton.setOnClickListener(searchButtonOnClickListener);
    }

    private Button.OnClickListener searchButtonOnClickListener
    = new Button.OnClickListener(){

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            progressDialog = ProgressDialog.show(AndroidFlickrActivity.this, 
                    "Progress", "Wait!");

            backgroundThread = new BackgroundThread();
            backgroundThread.setRunning(true);
            backgroundThread.start();

        }};

    private String QueryFlickr(String q){

        String qResult = null;

        String qString = 
                FlickrQuery_url 
                + FlickrQuery_per_page 
                + FlickrQuery_nojsoncallback 
                + FlickrQuery_format 
                + FlickrQuery_tag + q  
                + FlickrQuery_key + FlickrApiKey;

        HttpClient httpClient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(qString);

        try {
            HttpEntity httpEntity = httpClient.execute(httpGet).getEntity();

            if (httpEntity != null){
                InputStream inputStream = httpEntity.getContent();
                Reader in = new InputStreamReader(inputStream);
                BufferedReader bufferedreader = new BufferedReader(in);
                StringBuilder stringBuilder = new StringBuilder();

                String stringReadLine = null;

                while ((stringReadLine = bufferedreader.readLine()) != null) {
                    stringBuilder.append(stringReadLine + "\n");
                    }

                qResult = stringBuilder.toString();
                inputStream.close();
            }

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return qResult;
    }

    private FlickrImage[] ParseJSON(String json){

        FlickrImage[] flickrImage = null;

        bmFlickr = null;
        String flickrId;
        String flickrOwner;
        String flickrSecret;
        String flickrServer;
        String flickrFarm;
        String flickrTitle;

        try {
            JSONObject JsonObject = new JSONObject(json);
            JSONObject Json_photos = JsonObject.getJSONObject("photos");
            JSONArray JsonArray_photo = Json_photos.getJSONArray("photo");

            flickrImage = new FlickrImage[JsonArray_photo.length()];
            for (int i = 0; i < JsonArray_photo.length(); i++){
                JSONObject FlickrPhoto = JsonArray_photo.getJSONObject(i);
                flickrId = FlickrPhoto.getString("id");
                flickrOwner = FlickrPhoto.getString("owner");
                flickrSecret = FlickrPhoto.getString("secret");
                flickrServer = FlickrPhoto.getString("server");
                flickrFarm = FlickrPhoto.getString("farm");
                flickrTitle = FlickrPhoto.getString("title");
                flickrImage[i] = new FlickrImage(flickrId, flickrOwner, flickrSecret,
                        flickrServer, flickrFarm, flickrTitle);
            }

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return flickrImage;
    }

    public class BackgroundThread extends Thread{
        volatile boolean running = false;
        int cnt;

        void setRunning(boolean b){
            running = b;    
            cnt = 10;
        }

        @Override
        public void run() {
            // TODO Auto-generated method stub
            String searchQ = searchText.getText().toString();
            String searchResult = QueryFlickr(searchQ);

            myFlickrImage = ParseJSON(searchResult);

            handler.sendMessage(handler.obtainMessage());
        }
    }

    Handler handler = new Handler(){

        @Override
        public void handleMessage(Message msg) {
            // TODO Auto-generated method stub

            progressDialog.dismiss();
            photoBar.setAdapter(new FlickrAdapter(AndroidFlickrActivity.this, myFlickrImage));
            Toast.makeText(AndroidFlickrActivity.this, 
                    "Images Loaded", Toast.LENGTH_LONG).show();
        }

    };

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:24:21.247

我建议你看看github上的[Universal Image Loader 。](https://github.com/nostra13/Android-Universal-Image-Loader)

Universal Image Loader 让您可以轻松地在 Android 上以列表、图库和网格格式集成异步图像加载、缓存和渲染。如果您想实现自己的解决方案，阅读该项目的源代码是一个很好的开始方式。它由[Sergey Tarasevich编写，并在](https://github.com/nostra13)[BSD 3-clause](http://www.opensource.org/licenses/BSD-3-Clause)下获得许可。

# python - 如何检查是否使用 Ant 安装了特定的 Django 应用程序？

> ID：10327646
> 
> 赞同：0
> 
> 时间：2012-04-26T05:20:42.377
> 
> 标签：python, django, ant, build-automation, django-apps

我想创建一个 ant 条件目标来检查是否安装了 django 应用程序，例如南。如果已安装，则无需执行任何操作，但如果未安装，请运行 pip install south。

我怎么能用 Ant 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:39:06.830

为什么不让 ant run pip 指定目标版本，即

```
pip install south==0.7.4 
```

如果软件包已经安装，pip 将忽略它：

> 已满足要求（使用 --upgrade 升级）： south==0.7.4 in ...

# php - 从数据库Mysql查询中选择数据

> ID：10327651
> 
> 赞同：1
> 
> 时间：2012-04-26T05:21:11.393
> 
> 标签：php, mysql

```
tbl_pack_service;
+-------+---------+------------+
| ps_id | pack_id | service_id |
+-------+---------+------------+
|     1 |       1 |          1 |
|     2 |       1 |          2 |
|     3 |       2 |          1 |
|     4 |       2 |          2 |
|     5 |       2 |          3 |
|     6 |       2 |          4 |
|     7 |       2 |          5 |
|     8 |       3 |          1 |
|     9 |       3 |          2 |
|    10 |       3 |          3 |
|    11 |       3 |          4 |
+-------+---------+------------+ 
```

ps_id 是主键我想在 php 中创建动态选择列表我想要一个 mysql 查询，它可以提供与特定 pack_id 不匹配的服务 id

就像我有 service_id 1,2,3,4,5 当我应该选择 pack_id=1 然后应该显示 3,4,5 而当我应该选择 pack_id=2 然后什么都不应该显示，因为它具有所有 5 个服务。谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T05:24:39.387

有几种方法可以处理这个问题。最简单的是使用`NOT IN`子查询：

```
SELECT DISTINCT service_id
FROM 
  tbl_pack_service
WHERE service_id NOT IN (SELECT service_id FROM tbl_pack_service WHERE pack_id = 1) 
```

# iphone - Retrieve and save all Apple Push Notification Device Tokens in our server for APNS?

> ID：10327654
> 
> 赞同：0
> 
> 时间：2012-04-26T05:21:15.183
> 
> 标签：iphone, ios, apple-push-notifications, provider

Am trying to integrate Apple Push Notification in my app. I have studied the Apple Document and other tutorials for my understanding. But, still i have a doubt to create a server and store all Apple Push Notification devicetokens in the database. Am not going to work on Server side but, i need to explain the approach to my client. I need to understand t`o create a APNS server provider and save all the apple push notification device tokens and retrieve all devicetoken and retrieve a single devicetoken to send notificaions`. Can you `please suggest me any sample code to save all apn devicetokens and retrieve from the server`? I suggest my client to create a `server in C#.net platform` is this correct? Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T03:00:43.790

Essentially, you just need to decide on a way for your app to let your servers know the device tokens. So, there are many ways to achieve this.

If your server side already involves a website, the easiest way would be to use HTTPS to do a POST request from your app. Then, the server-side code can be written as if it is handling form request from browsers. I can't really give you sample code since I don't know any C#, but this should be familiar to any web developer.

# asp.net - 整个网站使用的会话内存大小

> ID：10327656
> 
> 赞同：1
> 
> 时间：2012-04-26T05:21:21.853
> 
> 标签：asp.net, session, session-state, session-variables

我想知道会话状态变量使用的内存大小，包括 AppDomain 中存在的所有会话。我得到了该会话中存在的会话变量的大小。但我想要整个 AppDomain。

谢谢，普拉文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:30:22.027

在应用程序域资源监控的帮助下，您可以按应用程序域查找内存使用情况。按照这个链接

```
http://msdn.microsoft.com/en-us/library/dd997285.aspx 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:25:57.967

您可以尝试的一件事是遍历会话对象并获取此 SO[链接](https://stackoverflow.com/questions/198082/how-to-find-out-size-of-session-in-asp-net-from-web-application)中提到的总数。

# java - Twitter4j 和对 Twitter 的身份验证

> ID：10327659
> 
> 赞同：0
> 
> 时间：2012-04-26T05:21:39.443
> 
> 标签：java, twitter, stream, twitter4j

目前，我只是想在 Java 中建立一个简单的驱动程序来连接 Twitter 流 API 并收集一些推文。但是 twitter4j 站点上提供的示例代码不起作用，它几乎没有提供有关如何正确向 Twitter 进行身份验证的指导。

现在这就是我所拥有的（从网站上直接复制）：

[http://pastebin.com/7udeFT9i](http://pastebin.com/7udeFT9i)

这次我以编程方式完成了它，但显然它除了 * 之外什么都没有进行身份验证。但我不确定将哪些值放入 ConfigurationBuilder。我见过一些有硬编码的值，还有一些从 Twitter 实例调用 getter，但总的来说，我不确定 Twitter 需要什么才能访问流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:27:42.067

使用抄写员 -

[https://github.com/fernandezpablo85/scribe-java](https://github.com/fernandezpablo85/scribe-java)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-26T05:24:07.243

您需要使用 OAuth 以编程方式访问 twitter。您应该从 Twitter OAuth 文档开始：

[https://dev.twitter.com/docs/auth/oauth/faq](https://dev.twitter.com/docs/auth/oauth/faq)

# iphone - UILabel 文本发光和选取框

> ID：10327667
> 
> 赞同：1
> 
> 时间：2012-04-26T05:22:43.157
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uilabel

我正在使用[它](http://blog.stormyprods.com/2009/10/simple-scrolling-uilabel-for-iphone.html)来滚动 uilabel 文本，并 使用[它](http://www.redrobotstudios.com/blog/2010/04/29/create-glow-soft-shadow-text-on-iphone/)来实现发光效果。但是我想要发光和选取框 uilabel 文本，我已经从上面的代码中用 RSSGlowLabelclass 替换了 UILabel。但我没有得到发光效果。任何人都可以告诉我如何实现这一目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T06:09:17.273

如果您自己编写代码，可能会容易得多。从这个开始：

```
float alph = 0.7;

- (void)viewDidLoad {
    [super viewDidLoad];
    glowLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 100)];
    NSString *string = @"some text";
    glowLabel.text = string;
    glowLabel.textColor = [UIColor blueColor];
    [self.view addSubview:glowLabel];
    glowLabel.alpha = alph;
    [NSTimer scheduledTimerWithTimeInterval:0.4
                                   target:self
                                   selector:@selector(glowMarquee)
                                   userInfo:nil
                                   repeats:YES];
}

-(void)glowMarquee {
    alph = (alph == 1) ? 0.7 : 1; // Switch value of alph
    [UIView beginAnimations:@"alpha" context:NULL];
    [UIView setAnimationDuration:0.4];        
    glowLabel.alpha = alph;
    [UIView commitAnimations];
} 
```

现在只需在glowMarquee方法中添加跑马灯逻辑，或者为跑马灯创建一个单独的方法和另一个定时器来控制它，这样两者就可以独立控制了。

# ajax - 如何在 MVC3 中将事件关联到 Html.ActionLink

> ID：10327670
> 
> 赞同：0
> 
> 时间：2012-04-26T05:23:05.170
> 
> 标签：ajax, asp.net-mvc-3, asp.net-ajax

我已经制作了一个 Ajax 函数，但我遇到了一个大问题。
我在点击链接时显示内容。链接是从数据库中获取的，链接的 url 也是从数据库中获取的。我已经编写了 ajax 以在单击链接时动态调用内容

```
<script type="text/javascript">
$(document).ready(function () {
  $('a').click(function (e) {
   e.preventDefault();
   var filename = $(this).text();
   var Hobbyurl = '@Url.Action("FetchUrlByHobbyName")';
   $.ajax({
            type: "POST",
            url: Hobbyurl,
            data: { data: filename },
            success: function (returndata) {
            $('iframe').attr('src', returndata);
            }
                    });
                });
            });
  </script> 
```

现在 FetchUrlByHobbyName 是从控制器调用的函数，它返回 url

```
 //Ajax routine to fetch the hobbyinfo by hobbyname
    [HttpPost]
    public ActionResult FetchUrlByHobbyName(string data)
    {
        HobbyMasters hobbymaster = new HobbyHomeService().FetchHobbyMasterByHobbyName(data);
        string url = hobbymaster.InformationUrl;
        if (HttpContext.Request.IsAjaxRequest())
            return Json(url);
        return View();
    } 
```

在我看来，我写了这样的链接：

```
@foreach (var item in Model)
{
   <li >@Html.ActionLink(item.HobbyName, "Hobbies")
   </li>
} 
```

我试过这个：

```
@Html.ActionLink(item.HobbyName, "Hobbies", null, new { id = "alink" }) 
```

然后在单击“alink”时调用 Ajax，但是这样我的 ajax 函数不会被调用。
**现在的问题是，点击页面上的每个链接都会调用 ajax 函数**。
我想为它分配一个唯一的 ID，但我不明白该怎么做，请帮助我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:29:09.557

对于该特定链接，分配一个 ID。例如

```
<a id="someID" href="url">Link</a> 
```

并且仅将点击与该链接绑定。

```
$('#someID').click(function (e)) .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:46:29.913

尝试为您的操作链接提供一个 CSS 类选择器，如下所示...

```
@Html.ActionLink("some link", "Create", "Some_Controller", new { }, new { @class = "test" }) 
```

然后用户 jquery 为它..

```
<script type="text/javascript">
$(document).ready(function () {
  $('.test').click(function (e) {
   e.preventDefault();
   var filename = $(this).text();
   var Hobbyurl = '@Url.Action("FetchUrlByHobbyName")';
   $.ajax({
            type: "POST",
            url: Hobbyurl,
            data: { data: filename },
            success: function (returndata) {
            $('iframe').attr('src', returndata);
            }
                    });
                });
            });
  </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T05:28:37.613

如果我理解正确，这可以帮助你

```
<a href="/somepath" id="mySuperLink" onclick="myAjaxFunction()">The text of the link</a>
    <script type="text/javascript">
    function myAjaxFunction(){
       e.preventDefault();
       var filename = $(this).text();
       var Hobbyurl = '@Url.Action("FetchUrlByHobbyName")';
       $.ajax({
                type: "POST",
                url: Hobbyurl,
                data: { data: filename },
                success: function (returndata) {
                $('iframe').attr('src', returndata);
                }
      });

  </script> 
```

# android - Android facebook sso - 令牌 ID 无效

> ID：10327673
> 
> 赞同：1
> 
> 时间：2012-04-26T05:24:03.160
> 
> 标签：android, facebook, cordova

我是 facebook sso 的新手，我已经使用 phonegap 将 SSO 集成到我的应用程序中，这在 android 模拟器中运行良好，同时当我在设备上执行此应用程序时，我面临错误.. 显示 invalid_token ，但相同事情在模拟器中工作。

即使我已经创建了密钥库并使用 facebook 应用程序和秘密 ID 进行了映射...

问题还是没有解决……

我得到了一些信息，facebook 本身在 android SSO 中存在问题，这个问题仍然存在。

提前致谢。

# android - 解析xml时没有得到输出

> ID：10327677
> 
> 赞同：0
> 
> 时间：2012-04-26T05:24:51.657
> 
> 标签：android, xml-parsing, response

我正在使用soap webservice并且我得到了正确的响应，现在我想解析我为此编写的代码但我没有得到输出的响应，有人可以帮助我吗？

我的主要课程是

```
public class Mylearning extends ListActivity {
    //ArrayList<cat> list = null;
    private static final String SOAP_ACTION="http://yyy.mobi/GetLearningPortalsList";
    private static final String METHOD_NAME ="GetLearningPortalsList";
    private static final String NAMESPACE ="http://yyy.mobi/";
    private static final String URL = "http://webservices.yyy.mobi/MobileLMSServices.asmx";
    private Bundle bundleResult = new Bundle();
    private JSONObject JSONObj;
    private JSONArray JSONArr;
    //private ArrayList<HashMap<String, Object>> myList;
    SoapObject request;
    TextView tv;
    TextView tv1;
    TextView tv2;               
    ListView mainListView;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mylearning);

        //mainListView = (ListView) findViewById(R.id.main_listview);
        request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("SiteURL","http://www.yyy.mobi/");
        request.addProperty("PageID","1");
        request.addProperty("SearchText","");

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();   

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        SoapObject result = null;
        envelope.setOutputSoapObject(request);
        AndroidHttpTransport sab = new AndroidHttpTransport(URL);
        sab.debug = true;
        try {
            sab.call(SOAP_ACTION, envelope);
            if (envelope.getResponse() != null) {
                result = (SoapObject) envelope.bodyIn;
                String[] values = new String[result.getPropertyCount()];
                int j = result.getPropertyCount();
                String repons=result.toString();
            //  Log.d("result",repons.toString());
                Document doc = XMLfunctions.XMLfromString(repons);
                int numResults = XMLfunctions.numResults(doc);

                if((numResults <= 0)){
                    Toast.makeText(Mylearning.this, "Geen resultaten gevonden", Toast.LENGTH_LONG).show();  
                    finish();
                }

                 NodeList nodes = doc.getElementsByTagName("result");
                for (int i = 0; i < nodes.getLength(); i++) {                           
                    HashMap<String, String> map = new HashMap<String, String>();
                    Element e = (Element)nodes.item(i);
                    map.put("Course", XMLfunctions.getValue(e, "Course"));
                    map.put("Description", "Description:" + XMLfunctions.getValue(e, "Description"));
                    map.put("icon", "icon: " + XMLfunctions.getValue(e, "icon"));
                    mylist.add(map);            
                }

                ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.rowmylearning, 
                        new String[] { "Course", "Description","icon" }, 
                        new int[] { R.id.txt1, R.id.txt2,R.id.img1 });

                setListAdapter(adapter);
                final ListView lv = getListView();

                lv.setTextFilterEnabled(true);  
                lv.setOnItemClickListener(new OnItemClickListener() {
                    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                        @SuppressWarnings("unchecked")
                        HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
                        Toast.makeText(Mylearning.this, "Course '" + o.get("Course") + "' was clicked.", Toast.LENGTH_LONG).show(); 

                    }
                });

            }
        }

                catch (Exception e) {
                    e.printStackTrace();
                }

            }
} 
```

我的 XMLFunction 类是

```
public class XMLfunctions {

    public final static Document XMLfromString(String repons){

        Document doc = null;

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {
            DocumentBuilder db = dbf.newDocumentBuilder();
            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(repons));
            Log.d("message",repons.toString());
            doc = db.parse(is);
        } catch (ParserConfigurationException e) {
            System.out.println("XML parse error: " + e.getMessage());
            return null;
        } catch (SAXException e) {
            System.out.println("Wrong XML file structure: " + e.getMessage());
            return null;
        } catch (IOException e) {
            System.out.println("I/O exeption: " + e.getMessage());
            return null;
        }

        return doc;

    }

    /** Returns element value
      * @param elem element (it is XML tag)
      * @return Element value otherwise empty String
      */
     public final static String getElementValue( Node elem ) {
         Node kid;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( kid = elem.getFirstChild(); kid != null; kid = kid.getNextSibling() ){
                     if( kid.getNodeType() == Node.TEXT_NODE  ){
                         return kid.getNodeValue();
                     }
                 }
             }
         }
         return "";
     }
    public static int numResults(Document doc){     
        Node results = doc.getDocumentElement();
        int res = -1;

        try{
            res = Integer.valueOf(results.getAttributes().getNamedItem("count").getNodeValue());
        }catch(Exception e ){
            res = -1;
        }

        return res;
    }

public static String getValue(Element item, String str) {       
    NodeList n = item.getElementsByTagName(str);        
    return XMLfunctions.getElementValue(n.item(0));
} 
```

}

我的回复如下

```
 04-25 11:53:32.806: D/status(2924): GetLearningPortalsListResponse{GetLearningPortalsListResult=anyType{schema=anyType{element=anyType{complexType=anyType{choice=anyType{element=anyType{complexType=anyType{sequence=anyType{element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; }; }; }; element=anyType{complexType=anyType{sequence=anyType{element=anyType{}; }; }; }; }; }; }; }; 
diffgram=anyType
{
NewDataSet=anyType

{
Table=anyType
{
ROWID=1; SiteID=7; PortalName=Pinneast; mSiteURL=http://pinneast.xxx.mobi/; ProtalLogo=/Content/SiteConfiguration/7/MyportalLogo.gif; Description=Pinneast is focused on improving business performance through human capital development and experienced in helping organizations of all sizes and across all industries; 
};

Table=anyType   
{
ROWID=2; SiteID=10; PortalName=Coach Institute; mSiteURL=http://coachinstitute.xxx.mobi/; ProtalLogo=/Content/SiteConfiguration/10/MyportalLogo.gif; Description=The Coaching Institute, where you are learning from someone who “does” and not just someone who “teaches”. We can train you to be a successful coach.; 
}; 

Table=anyType
{
ROWID=3; SiteID=12; PortalName=Ready Courses; mSiteURL=http://readycourses.xxx.mobi/; ProtalLogo=/Content/SiteConfiguration/12/MyportalLogo.gif; Description=When you work with us, you get a professional team of e-learning and corporate training professionals who are passionate about getting the best technology implemented without high costs.; 
}; 

Table=anyType
{
ROWID=4; SiteID=13; PortalName=A Step to Gold; mSiteURL=http://asteptogold.xxx.mobi/; ProtalLogo=/Content/SiteConfiguration/13/MyportalLogo.gif; 
Description=The Ballroom is solely owned and operated by Melanie Dale. It has a 2400 square foot floating floor, and two other teaching studios.; 
}; 

Table=anyType
{ROWID=5; SiteID=14; PortalName=In Sync Training; mSiteURL=http://insynctraining.xxx.mobi/; ProtalLogo=/Content/SiteConfiguration/14/MyportalLogo.gif; 
Description=InSync Training offers a variety of consulting, development and delivery services to support synchronous training initiatives.; 
}; 

Table=anyType
{ROWID=6; SiteID=15; PortalName=Total Motion Release; mSiteURL=http://totalmotionrelease.xxx.mobi/; ProtalLogo=/Content/SiteConfiguration/15/MyportalLogo.gif;
 Description=Two stories emphasize how Tom Dalonzo-Baker discovered Total Motion Release.; }; 

Table=anyType
{ROWID=7; SiteID=16; PortalName=Polaris Consultants; mSiteURL=http://polaris.xxx.mobi/; ProtalLogo=/Content/SiteConfiguration/16/MyportalLogo.gif; 
Description=Founded in 1997, and located adjacent to the Research Triangle Park in North Carolina, Polaris Clinical Research Consultants, Inc.; };

Table=anyType
{ROWID=8; SiteID=17; 
PortalName=Develop Mentor Training; mSiteURL=http://developmentor.xxx.mobi/; ProtalLogo=/Content/SiteConfiguration/17/MyportalLogo.gif; Description=DevelopMentor provides in-depth, hands-on training for experienced developers.; }; 

Table=anyType
{ROWID=9; SiteID=18; PortalName=Cranky Middle Manager; mSiteURL=http://cmm.xxx.mobi/; ProtalLogo=/Content/SiteConfiguration/18/MyportalLogo.gif; 
Description=If you've ever felt like you're trapped between the idiots who make the decisions and the morons who won't do as their told.; };

Table=anyType
{ROWID=10; SiteID=19; 
PortalName=ITPreneurs; mSiteURL=http://itpreneurs.xxx.mobi/; ProtalLogo=/Content/SiteConfiguration/19/MyportalLogo.gif; 
Description=ITpreneurs is the leading training solutions company in the IT management and IT governance best practices domain.;
 }; 
Table1=anyType{TotalRecordsCount=387; }; 
}; 
}; 
}; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:13:36.970

你的xml中有计数标签吗？你检查过吗？

因为在 numResults 函数中。它根据 xml 中的计数标签返回结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:22:03.487

此代码解析来自 Web 服务的 XML 数据。有用。

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_servis_uygulamasi);

    Button btn=(Button)findViewById(R.id.button1);   

    btn.setOnClickListener(new View.OnClickListener()
    {    
          public void onClick(View v)
          {
            String pSoapAction  = "http://tempuri.org/GetMagazaList";
            String pMethodName  = "GetMagazaList";
            String pNameSpace   = "http://tempuri.org/";
            String pUrl         ="";

            SoapObject result =(SoapObject)getWebServisDATA(pUrl, pMethodName, pNameSpace, pSoapAction, "333");

            TextView   tv =(TextView)findViewById(R.id.textView2);

            try
            {                                                                              
                               SoapObject soapObjectGetProperty=(SoapObject)result.getProperty(0);

                               SoapObject resDiff  = (SoapObject)soapObjectGetProperty.getProperty("diffgram");
                              SoapObject resDocEl = (SoapObject)resDiff.getProperty("DocumentElement");

                               StringBuilder stringBuilder = new StringBuilder();

         for(int j=0;j<resDocEl.getPropertyCount();j++)
         {
            SoapObject resTable= (SoapObject)resDocEl.getProperty(j);

            String MagazaObjId      =resTable.getProperty("MagazaObjId").toString();
            String MagazaAdi        = resTable.getProperty("MagazaAdi").toString();
            String MagazaKodu       = resTable.getProperty("MagazaKodu").toString();
           String MagazaPosDepoNo  =resTable.getProperty("MagazaPosDepoNo").toString();
           String PosId            = resTable.getProperty("PosId").toString();
           String IsYeriObjId      = resTable.getProperty("IsYeriObjId").toString();                                   

           stringBuilder.append
           (                                             
              "MagazaObjId     :" +MagazaObjId+"\n"+
              "MagazaAdi       :"  +MagazaAdi+"\n"+
              "MagazaKodu      :" +MagazaKodu+"\n"+
              "MagazaPosDepoNo :"+MagazaPosDepoNo+"\n"+
              "PosId           :" +PosId+"\n"+
              "Type            :" +IsYeriObjId+"\n"+
              "******************************"
           );

           stringBuilder.append("\n");                                       
       }                                 
     tv.setText(stringBuilder);                                             
                       }
                       catch(Exception e)
                       {
                              tv.setText(e.getMessage());
                       }
                }
         });

}

public static SoapObject getWebServisDATA(String pUrl, String pMethodName,String pNameSpace, String pSoapAction,String pname) 
{
  SoapObject result = null;
  SoapObject request = new SoapObject(pNameSpace, pMethodName);
  SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
              SoapEnvelope.VER11);
  envelope.dotNet = true;
  request.addProperty("firma",pname);
  envelope.setOutputSoapObject(request);

  AndroidHttpTransport httpTransport = new AndroidHttpTransport(pUrl);

  try {
        httpTransport.call(pSoapAction, envelope);
        result = (SoapObject)envelope.bodyIn;
  } 
  catch (Exception e)
  {

  }

  return result; 
```

}

# java - Java MYSQL 检查是否存在特定行

> ID：10327682
> 
> 赞同：-5
> 
> 时间：2012-04-26T05:25:49.143
> 
> 标签：java, mysql

如何检查表中是否存在特定行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:28:35.850

您可以使用`SELECT`or`SELECT COUNT`语句。如果他们返回任何东西，那么，该行存在，否则，它不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:51:29.430

这将导致最少的网络流量：

```
select 1 from table where <conditions> limit 1 
```

# f# - 如何在 F# 中实现可变参数

> ID：10327692
> 
> 赞同：5
> 
> 时间：2012-04-26T05:26:25.663
> 
> 标签：f#

我想实现一个可以接受 1 或 2 个参数的 F# 函数。我想使用这样的功能：

```
let foo = ...
foo "a"
foo "a" "b" 
```

两个参数可以是相同的类型。我阅读了有关*match pattern*、*active pattern*的页面，但找不到适合我的页面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T05:40:36.813

我相信这是由于一些底层的.Net特性，但我认为你必须使用一个具有重载方法的类——比如

```
 type t() =
     static member foo a = "one arg"
     static member foo (a,b) = "two args" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T07:46:13.897

在类型成员上，您可以使用可选参数：

```
type Helper private () =
    static member foo (input1, ?input2) =
          let input2 = defaultArg input2 "b"
          input1, input2 
```

要调用此方法：

```
Helper.foo("a")
Helper.foo("a", "b") 
```

这就是你所追求的吗？

不幸的是，您不能在函数上使用可选参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T22:11:53.190

除了其他答案之外，这里还有一些“几乎解决方案”。严格来说，它们并不是您想要的，但无论如何都值得了解。

使用列表（或数组）和模式匹配：

```
let f = function
    | [a, b] -> ...
    | [a] -> ...
    | [] -> failwith "too few arguments"
    | _ -> failwith "too many arguments"

f ["a"]
f ["a" ; "b"] 
```

问题：参数没有命名，从函数签名中不清楚它需要多少个参数。

使用记录传递所有可选参数：

```
type FParams = { a : string; b : string }
let fdefault = { a = "a" ; b = "b" }

let f (pars: FParams) = ...

f { fdefault with b = "c" } 
```

问题： a 也是可选的，这不是您想要的。不过可能有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T12:18:12.660

除了其他答案之外，您还可以通过部分应用程序和柯里化来做您想做的事情。像这样：

```
let foo a b =
   a + b

let foo2 a =
   foo 1 a;; 
```

显然，您希望将 foo2 中对 foo 的调用中的第一个参数修复为您想要的任何默认值。

# r - 散点图在 r 中指定颜色和标签轴

> ID：10327694
> 
> 赞同：0
> 
> 时间：2012-04-26T05:26:47.537
> 
> 标签：r, plot, colors

我有以下数据和情节：

```
pos <- rep(1:2000, 20)
xv =c(rep(1:20, each = 2000))
# colrs <- unique(xv)
colrs <- xv # edits 
yv =rnorm(2000*20, 0.5, 0.1)

xv   = lapply(unique(xv), function(x) pos[xv==x])
to.add = cumsum(sapply(xv, max) + 1000)

bp <- c(xv[[1]], unlist(lapply(2:length(xv), function(x) xv[[x]] + to.add[x-1])))
plot (bp,yv, pch = "*", col = colrs) 
```

![在此处输入图像描述](../Images/22de165c581d1899a79f3f6a755fd228.png)

我在这个情节中几乎没有我无法弄清楚的问题。

（1）我想为不同的组使用不同的颜色或为不同的组使用两种不同的颜色（即xv），但是当我尝试颜色功能时，它是美丽的混合。虽然我需要强调一些点（例如 bp 4000 到 4500 例如蓝色）

(2) 而不是 bp 位置，我想在组中添加一个刻度线和标签。

谢谢，感谢您的帮助。

编辑：在以下答案的帮助下（如果我在每个组中的数字不平衡，我会采用稍微不同的方法）我可以得到类似的情节。但是关于颜色的问题仍然存在，如果我想在备用组中使用两种备用颜色怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:58:34.470

您可以通过重复颜色索引来解决您的颜色问题，但是每个组都绘制了一个点，如下所示：

```
plot (bp,yv, pch = "*", col = rep(colrs,each=2000)) 
```

默认调色板（请参阅`?palette`或`palette()`）将环绕自身，您可能需要指定自己的调色板以获得 20 种不同的颜色。

要重新标记 x 轴，请尝试不使用轴进行绘图，然后手动指定点和标签。

```
plot (bp,yv, pch = "*", col = rep(colrs,each=2000),xaxt="n")
axis(1,at=seq(1000,58000,3000),labels=1:20) 
```

如果您尝试在其中压缩大量标签，则可能必须缩小文本 ( `cex.axis`) 或将标签旋转 90 度 ( `las=2`)。

```
plot (bp,yv, pch = "*", col = rep(colrs,each=2000),xaxt="n")
axis(1,at=seq(1000,58000,3000),labels=1:20,cex.axis=0.7,las=2) 
```

结果：

![在此处输入图像描述](../Images/0614f9f869ff430741115634e0c17806.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:36:01.643

一种方法是您可以使用嵌套的`ifelse`.
我仍在学习`R`，但是可以完成的一种方法如下所示：

```
plot(whatev$x, whatev$y, col=ifelse(xv<2000,red,ifelse(2000<xv & xv<4000,yellow,blue))) 
```

您可以嵌套任意数量的这些，以使颜色和间隔具有特异性。该`ifelse`命令的形式为`ifelse(TEST, True, False)`.

一种更简单的方法是使用 xv 中的唯一组来分配彩虹色。

```
colrs=rainbow(length(unique(xv)))  #Or colrs=rainbow(length(xv)) if xv is unique.
plot(whatev$x, whatev$y, col=colrs) 
```

我希望我做对了。我自己还在学习R。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T10:54:30.843

我会冒昧地猜测你的真实数据是来自 20 个不同组的 2000 个值。例如，20 种不同物种的 2000 株植物的高度。在这种情况下，您可能需要查看包中的`dotplot()`函数（或如下图所示`dotplot.table()`）`lattice`。

生成假设值矩阵：

```
set.seed(1)

myY <- sapply( seq_len(20), function(x) rnorm(2000, x^(1/3))) 
```

转置矩阵以将组作为行

```
myY <- t(myY) 
```

向矩阵提供组的名称：

```
dimnames(myY)[[1]]<-paste("group", seq_len(nrow(myY))) 
```

加载`lattice`包

```
library(lattice) 
```

生成点图

```
dotplot(myY, horizontal = FALSE, panel = function(x, y, horizontal, ...) {
  panel.dotplot(x = x, y = y, horizontal = horizontal, jitter.x = TRUE,
    col = seq_len(20)[x], pch = "*", cex = 1.5)
  }, scales = list(x = list(rot = 90))
) 
```

看起来像（不幸的 y 轴标签）：

![一个点图](../Images/c4f72bde433d4fae25ca7450f88e7de5.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T23:17:57.260

看到@JohnCLK 正在请求一种按`x`轴上的值着色的方法，我尝试了这些演示`ggplot2`——每个都使用一个虚拟变量，该变量基于要在其他变量中突出显示的值或范围进行编码。

因此，首先设置数据，如问题中所示：

```
pos <- rep(1:2000, 20)
xv <- c(rep(1:20, each = 2000))
yv <- (2000*20, 0.5, 0.1)
xv <- lapply(unique(xv), function(x) pos[xv==x])
to.add <- cumsum(sapply(xv, max) + 1000)
bp <- c(xv[[1]], unlist(lapply(2:length(xv), function(x) xv[[x]] + to.add[x-1]))) 
```

然后加载`ggplot2`，准备几个实用函数，并设置默认主题：

```
library("ggplot2")

make.png <- function(p, fName) {
    png(fName, width=640, height=480, units="px")
    print(p)
    dev.off()
}

make.plot <- function(df) {
    p <- ggplot(df, 
                aes(x = bp,
                    y = yv, 
                    colour = highlight))
    p <- p + geom_point()
    p <- p + opts(legend.position = "none")
    return(p)
}

theme_set( theme_bw() ) 
```

绘制一个图，突出显示垂直轴上定义范围内的值：

```
# highlight a horizontal band
df <- data.frame(cbind(bp, yv))
df$highlight <- 0
df$highlight[ df$yv >= 0.4 & df$yv < 0.45 ] <- 1
p <- make.plot(df)
print(p)
make.png(p, "demo_horizontal.png") 
```

![水平带](../Images/c8663f9c8ca8e1dcdfcc0514aca2aab1.png)

接下来绘制一个图，突出显示`x`轴上定义范围内的值，垂直带：

```
# highlight a vertical band
df$highlight <- 0
df$highlight[ df$bp >= 38000 & df$bp < 42000 ] <- 1
p <- make.plot(df)
print(p)
make.png(p, "demo_vertical.png") 
```

![垂直带](../Images/4f28025c90de2b609ded5c7ab41ddfca.png)

最后绘制一个图，按`x`值突出显示交替的垂直带：

```
# highlight alternating bands
library("gtools")
alt.band.width <- 2000
df$highlight <- as.integer(df$bp / alt.band.width)
df$highlight <- ifelse(odd(df$highlight), 1, 0)
p <- make.plot(df)
print(p)
make.png(p, "demo_alternating.png") 
```

![交替带](../Images/85461279b841a3fc59a6a7d512a49715.png)

希望这可以帮助; 无论如何，这是一个很好的做法。

# c++ - Visual c++ 中的运算符重载？

> ID：10327695
> 
> 赞同：1
> 
> 时间：2012-04-26T05:27:01.163
> 
> 标签：c++, operator-overloading

```
coord front_creature = gs->creatures.front()->get_coord();     //get location of creature closest to base
 coord end = gs->map->get_end();                      //get location of base
    if (front_creature == end) {           //if creature location == base location, then game over
      exit_run_mode();
  } 
```

get_coord 和 get_end 函数返回一个 const coord & 并且上面的代码没有任何错误。但是当我用下面的代码替换它时，Visual Studio 说“没有运算符 '==' 匹配这些操作数”。我尝试在各个函数周围放置括号，但没有运气。

```
if (gs->creatures.front()->get_coord() == gs->map->get_end()) {      
  exit_run_mode();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T05:41:38.723

`operator==`如果它是非成员函数，我猜你需要你看起来像这样：

```
bool operator==(const coord& a, const coord b&); 
```

或者，如果它是 coord 的成员函数，像这样：

```
bool operator==(const coord& rhs) const; 
```

当你做类似的事情时

```
coord front_creature = gs->creatures.front()->get_coord(); 
```

您正在使用`const coord&`表达式返回的值，并使用它来初始化一个新的非常量`coord`。这可能就是您的第一个示例有效的原因。因为您正在比较 non-const `coords`。

# sql - 在oracle sql字符串中查找逗号

> ID：10327697
> 
> 赞同：1
> 
> 时间：2012-04-26T05:27:18.777
> 
> 标签：sql, oracle

我的 oracle 数据库中有一个列作为字符，存储在其中的数据就像这里

```
30.170527093355002,72.615875338654 and
30.805165,71.82474 
```

现在我想得到用逗号分隔的整个字符串。我的意思是我想在逗号之前获取字符串的一部分，并且在逗号之后分别获取一部分。请任何人告诉我是否有任何内置函数可以做到这一点，无论它存在的逗号位置如何，我都可以用逗号分隔我的 while 字符串。我已经尝试过 floor 函数和 substr 但都是徒劳的，请帮助我使用任何内置在功能或用户定义的功能中完全满足我的要求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T05:55:52.830

```
 select
      substr( COLNAME, 1, instr( COLNAME, ',') - 1 ) as p_1 ,
      substr( COLNAME, instr( COLNAME, ',', - 1 ) + 1 ) as p_2
    from YOURTABLE 
```

# android - 变量的流输出

> ID：10327708
> 
> 赞同：0
> 
> 时间：2012-04-26T05:28:27.167
> 
> 标签：android, time, stream, boolean

我有这个方法：

```
 public void onClick(View v) {
            if (test != true) {
                test = true;
                start = System.currentTimeMillis();
                end = System.currentTimeMillis() - start;
                DateFormat df = new SimpleDateFormat("HH 'hours', mm 'mins,' ss 'seconds'");
                df.setTimeZone(TimeZone.getTimeZone("GTM+0"));  
                tv.setText(df.format(new Date(end)));
            } else {
                DateFormat df = new SimpleDateFormat("HH 'hours', mm 'mins,' ss 'seconds'");
                end = System.currentTimeMillis() - start;
                df.setTimeZone(TimeZone.getTimeZone("GTM+0"));  
                tv.setText(df.format(new Date(end)));

            } 
```

我想让“tv”变量继续输出时间值，而不是在“else”语句之后停止 - 所以我总是会看到时间的当前值。

我试图通过布尔值进行循环，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:33:21.677

您不能在主 (UI) 线程上循环——这将锁定应用程序。您将需要创建一个工作线程来进行计时。它会定期向 UI 线程 update 发布一个 runnable `tv`。

在 Android 中有很多方法可以做到这一点。以下是一些简单的本土方法的示例代码：

```
private Runnable updater = new Runnable() {
    public void run() {
        DateFormat df = new SimpleDateFormat("HH 'hours', mm 'mins,' ss 'seconds'");
        end = System.currentTimeMillis() - start;
        df.setTimeZone(TimeZone.getTimeZone("GTM+0"));  
        tv.setText(df.format(new Date(end)));
    }
}

private class TimerThread extends Thread {
    public void run() {
        while (!isInterrupted()) {
            try {
                sleep(1000L);
                runOnUiThread(updater);
            } catch (InterruptedException e) {
                break;
            }
        }
    }
} 
```

然后创建并启动一个`TimerThread`输入`onResume()`并中断它`onPause()`（这样它就会退出）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:36:58.710

为了更新时间，请使用[TimerTask](http://developer.android.com/resources/articles/timed-ui-updates.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T05:49:31.603

我强烈建议使用 a`Handler`来完成这项工作。

之前已经回答过这个问题，你可以[在这里](https://stackoverflow.com/questions/3733867/stop-watch-logic/3734070#3734070)找到我的答案。这是一个完整的程序。

祝你好运。

# ruby-on-rails - 编辑多个（参考 Railscasts Episode #165）

> ID：10327710
> 
> 赞同：0
> 
> 时间：2012-04-26T05:28:31.367
> 
> 标签：ruby-on-rails

我正在关注 Railscasts Episode #165 Edit Multiple，但是当我进入产品索引页面时出现问题，它没有显示我的产品列表。我只得到标题和新产品的链接。知道我做错了什么吗？

顺便说一句，我使用的是 rails 3.2.3

谢谢你。

路线.rb

```
resources :products do
  collection do
    post :edit_multiple
    put :update_multiple
  end
end

resources :categories 
```

index.html.erb

```
<h1>Listing products</h1>

<% form_tag edit_multiple_products_path do %>
<table>
  <tr>
    <th></th>
    <th>Name</th>
    <th>Category</th>
    <th>Price</th>
  </tr>
<% for product in @products %>
  <tr>
    <td><%= check_box_tag "product_ids[]", product.id %></td>
    <td><%= product.name %></td>
    <td><%= product.category.name %></td>
    <td><%= product.price %></td>
    <td><%= link_to "Edit", edit_product_path(product) %></td>
    <td><%= link_to "Destroy", product, :confirm => 'Are you sure?', :method => :delete %></td>
  </tr>
<% end %>
</table>
<%= submit_tag "Edit Checked" %>
<% end %>

<p><%= link_to "New Product", new_product_path %></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:32:16.113

你需要`<%= form_tag ...`而不是`<% form_tag ...`. 没有`=`返回值（即您的表单）将被丢弃而不是添加到输出中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:35:40.050

我认为这是错字。你忘了使用“=”你应该做 <%= form_tag edit_multiple_products_path do %>

# javascript - 使用 $.ajax 加载 XML 不起作用

> ID：10327721
> 
> 赞同：0
> 
> 时间：2012-04-26T05:30:07.433
> 
> 标签：javascript, jquery, xml, ajax

> **可能重复：**
> [jquery 中的 XML 解析似乎对我不起作用](https://stackoverflow.com/questions/3210690/xml-parsing-in-jquery-doesnt-seem-to-work-for-me)
> [Access-Control-Allow-Origin 错误将 jQuery Post 发送到 Google API](https://stackoverflow.com/questions/6114436/access-control-allow-origin-error-sending-a-jquery-post-to-google-apis)

我正在尝试从 Google 的天气 API 加载数据。当我运行此代码时：

```
$.ajax({ 
    type: "GET",
    url: "http://www.google.com/ig/api?weather=13210",
    dataType: "xml",
    success: function(xml) {   } 
}); 
```

我收到以下消息：`XMLHttpRequest`无法加载[http://www.google.com/ig/api?weather=13210](http://www.google.com/ig/api?weather=13210)。Access-Control-Allow-Origin 不允许 Origin null。

为什么我会收到此消息？我是新手将 XML 加载到 jquery 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:52:12.057

不幸的是，您无法直接从

```
http://www.google.com/ig/api?weather=13210 
```

仅使用 jQuery/JavaScript。[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)可以防止这种情况。并且 Google 也不发送[`Access-Control-Allow-Origin`](https://developer.mozilla.org/en/http_access_control#Access-Control-Allow-Origin)标头（这可能允许访问）。

唯一的方法是从服务器端加载它。

# jquery - 使用 google OAuth 2.0 成功登录后无法获取用户信息

> ID：10327725
> 
> 赞同：2
> 
> 时间：2012-04-26T05:30:29.907
> 
> 标签：jquery, json, login, oauth-2.0

如使用 OAuth 2.0 的[谷歌开发者页面](https://developers.google.com/accounts/docs/OAuth2Login)中所述，我为相应的客户端 ID 创建了唯一 URL

URL 的格式是：

```
https://accounts.google.com/o/oauth2/auth?
scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&
state=%2Fprofile&
redirect_uri=https%3A%2F%2Foauth2-login-demo.appspot.com%2Foauthcallback&
response_type=token&
client_id=812741506391.apps.googleusercontent.com 
```

用户能够登录并被重定向到我的重定向 URL，但问题是，当我尝试使用 jquery 解析响应时，它给出的是失败而不是成功。

我在重定向 url 页面中使用了以下 javascript：

```
<script>
// First, parse the query string
var acc_token;
var params = {}, queryString = location.hash.substring(1),
    regex = /([^&=]+)=([^&]*)/g, m;
while (m = regex.exec(queryString)) {
    if(m[1]=="access_token")
    acc_token = m[2];
  params[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
}

// And send the token over to the server
var req = new XMLHttpRequest();
// consider using POST so query isn't logged
req.open('GET', 'https://' + window.location.host + '/catchtoken?' + queryString, true);

req.onreadystatechange = function (e) {
  if (req.readyState == 4) {
     if(req.status == 200){
       window.location = params['state']
   }
  else if(req.status == 400) {
      //  alert('There was an error processing the token.')
    }
    else {
     // alert('something else other than 200 was returned')
    }
  }
};
req.send(null);

  $.ajax({
        type: 'GET',
       url:"https://www.googleapis.com/oauth2/v1/userinfo?access_token="+acc_token,
       datatype : "json",
       success : function(data)
    {
        console.log(data);
    },
    error : function()
    {
        alert("Failure!");
    }

    });
</script> 
```

javascript 工作正常，我能够获取变量的访问令牌，然后我想使用URL [https://www.googleapis.com/oauth2/v1/userinfo](https://www.googleapis.com/oauth2/v1/userinfo)向谷歌服务器发送 GET 请求jquery ajax，但它会进入错误函数。当我使用 access_token 手动执行 URL 请求时，它给了我一个包含用户所有详细信息的 json 数组。我也尝试将数据类型更改为 jsonp 但没有用。

如果这种方法不可行，任何人都可以建议我如何处理获取用户信息的响应。请也尝试给我一个示例代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T09:03:37.927

此代码运行良好，我能够获取用户信息，以供参考[goto](http://www.gethugames.in/blog/2012/04/authentication-and-authorization-for-google-apis-in-javascript-popup-window-tutorial.html)，这是工作代码

```
 <script src="jquery.js"></script>
    <script>
        var OAUTHURL    =   'https://accounts.google.com/o/oauth2/auth?';
        var VALIDURL    =   'https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=';
        var SCOPE       =   'https://www.googleapis.com/auth/userinfo.profile';
        var CLIENTID    =   '716569014051.apps.googleusercontent.com';
        var REDIRECT    =   'http://localhost:8888/MAMP/html5/oauth'
        var TYPE        =   'token';
        var _url        =   OAUTHURL + 'scope=' + SCOPE + '&client_id=' + CLIENTID + '&redirect_uri=' + REDIRECT + '&response_type=' + TYPE;
        var acToken;
        var tokenType;
        var expiresIn;
        var user;

        function login() {
            var win         =   window.open(_url, "windowname1", 'width=800, height=600'); 

            var pollTimer   =   window.setInterval(function() { 
                if (win.document.URL.indexOf(REDIRECT) != -1) {
                    window.clearInterval(pollTimer);
                    var url =   win.document.URL;
                    acToken =   gup(url, 'access_token');
                    tokenType = gup(url, 'token_type');
                    expiresIn = gup(url, 'expires_in');
                    win.close();

                    validateToken(acToken);
                }
            }, 100);
        }

        function validateToken(token) {
            $.ajax({
                url: VALIDURL + token,
                data: null,
                success: function(responseText){  
                    getUserInfo();
                },  
                dataType: "jsonp"  
            });
        }

        function getUserInfo() {
            $.ajax({
                url: 'https://www.googleapis.com/oauth2/v1/userinfo?access_token=' + acToken,
                data: null,
                success: function(resp) {
                    user    =   resp;
                    console.log(user);
                    $('#uName').append(user.name);
                    $('#imgHolder').attr('src', user.picture);
                },
                dataType: "jsonp"
            });
        }

        //credits: http://www.netlobo.com/url_query_string_javascript.html
        function gup(url, name) {
            name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
            var regexS = "[\\#&]"+name+"=([^&#]*)";
            var regex = new RegExp( regexS );
            var results = regex.exec( url );
            if( results == null )
                return "";
            else
                return results[1];
        }

        </script>

<body>
    <a href='#' onClick='login();'> click here to login </a>
    <div id='uName'>Welcome  </div>
    <img src='' id='imgHolder'/>
</body> 
```

# cuda - Cuda 矩阵乘法

> ID：10327726
> 
> 赞同：2
> 
> 时间：2012-04-26T05:30:32.253
> 
> 标签：cuda, matrix-multiplication

我正在尝试在 cuda 中编写矩阵乘法代码，这与 Nvidia 的 cuda 编程指南非常相似，但它不起作用。它应该做 C=alpha*A*B+beta*C ，但对于每个 A,BC 保持不变。

```
__global__ void MatMulKernel(int m,int n,int k,double *A,double *B,double *C,double alpha,double beta)
{
    double Ctemp = 0.0;
    int row = blockIdx.y * blockDim.y + threadIdx.y;
    int col = blockIdx.x * blockDim.x + threadIdx.x;
    int ind;
    for (ind = 0; ind < k; ++ind)
    {
       Ctemp += A[row+ind*m]*B[ind+col*k];
    }

   C[row+m*col] = alpha*Ctemp+beta*C[row+m*col];
//C[row+m*col] = Ctemp;
   __syncthreads();
}

extern "C" void
local_mm_cuda (const int m, const int n, const int k, const double alpha,
  const double *A, const int lda, const double *B, const int ldb,
  const double beta, double *C, const int ldc)
{

 int row, col;

  /* Verify the sizes of lda, ldb, and ldc */
  assert (lda >= m);
  assert (ldb >= k);
  assert (ldc >= m);

  // allocating memory for device array
  double *dA,*dB,*dC;
  size_t sizeA = sizeof(double)*m*k;
  size_t sizeB = sizeof(double)*n*k;
  size_t sizeC = sizeof(double)*m*n;

  cudaMalloc((void**)&dA,sizeA);
  cudaMalloc((void**)&dB,sizeB);
  cudaMalloc((void**)&dC,sizeC);

  cudaMemcpy(dA, A, sizeA, cudaMemcpyHostToDevice);
  cudaMemcpy(dB, B, sizeB, cudaMemcpyHostToDevice);
  cudaMemcpy(dC, C, sizeC, cudaMemcpyHostToDevice);

  // calling matrix multiplication kernal
  dim3 dimBlock(BLOCK_SIZE, BLOCK_SIZE);
  dim3 dimGrid( n/dimBlock.x, m/dimBlock.y);
  MatMulKernel<<<dimGrid, dimBlock>>>(m,n,k,dA,dB,dC,alpha,beta);
  cudaThreadSynchronize();

  // saving C calculated back in C
  cudaMemcpy(dC,C, sizeC,cudaMemcpyDeviceToHost);
  cudaFree(dA);
  cudaFree(dB);
  cudaFree(dC);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T08:30:43.210

尝试修改

```
"dim3 dimGrid( n/dimBlock.x, m/dimBlock.y);" 
```

至

```
"dim3 dimGrid( (n+dimBlock.x-1)/dimBlock.x, (m+dimBlock.y-1)/dimBlock.y); " 
```

# iphone - 更改数据模型后在设备上保存时崩溃

> ID：10327732
> 
> 赞同：0
> 
> 时间：2012-04-26T05:31:30.497
> 
> 标签：iphone, ios, core-data, crash, datamodel

在过去的四个小时里，我一直在寻找解决方案，我绝望地发帖。我的应用程序在模拟器、我的 iPhone 和我的 ipad 上运行良好，直到我为我的一个数据模型添加了一个属性。

我的 iPhone 应用程序使用 Core Data 和 iCloud。在 AppDelegate 中，我通过合并两个模型来创建 managedObjectModel。在我尝试保存 ManagedObjectContext 之前，一切似乎都很好。那是它崩溃的时候：

> ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“此 NSPersistentStoreCoordinator 没有持久存储。它无法执行保存操作。

这不会发生在模拟器上。

我努力了：

*   项目->清理构建文件夹
*   项目->清洁
*   从我的设备中删除应用程序
*   从我的 iCloud 备份中删除 iCloud 数据
*   重新启动计算机
*   将“.momd”更改为“.mom”并再次返回（在另一个问题中阅读）

谢谢您的帮助。

编辑添加代码：

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
if (__persistentStoreCoordinator != nil) {
    return __persistentStoreCoordinator;
}

__persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: [self managedObjectModel]];    
NSPersistentStoreCoordinator *psc = __persistentStoreCoordinator;

// TODO: Set up iCloud in another thread:
//dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
NSString *dataFileName = [NSString stringWithFormat:@"%@.sqlite", APP_TITLE_NO_SPACES];

NSString *iCloudDataDirectoryName = @"Data.nosync";
NSString *iCloudLogsDirectoryName = @"Logs";
NSFileManager *fileManager = [NSFileManager defaultManager];        
NSURL *localStore = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:dataFileName];
NSURL *iCloud = [fileManager URLForUbiquityContainerIdentifier:nil];

if (iCloud) {
    NSURL *iCloudLogsPath = [NSURL fileURLWithPath:[[iCloud path] stringByAppendingPathComponent:iCloudLogsDirectoryName]];
    if([fileManager fileExistsAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName]] == NO) {
        NSError *fileSystemError;
        [fileManager createDirectoryAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName] 
               withIntermediateDirectories:YES 
                                attributes:nil 
                                     error:&fileSystemError];
        if(fileSystemError != nil) {
            NSLog(@"Error creating database directory %@", fileSystemError);
        }
    }

    NSString *iCloudData = [[[iCloud path] 
                             stringByAppendingPathComponent:iCloudDataDirectoryName] 
                            stringByAppendingPathComponent:dataFileName];

    NSLog(@"iCloudData = %@", iCloudData);

    NSDictionary* options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                             [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption,
                             CLOUD_CONTAINER_IDENTIFIER, NSPersistentStoreUbiquitousContentNameKey,
                             iCloudLogsPath, NSPersistentStoreUbiquitousContentURLKey, nil];

    [psc lock];
    [psc addPersistentStoreWithType:NSSQLiteStoreType 
                      configuration:nil 
                                URL:[NSURL fileURLWithPath:iCloudData] 
                            options:options 
                              error:nil];
    [psc unlock];
} else {
    NSLog(@"iCloud is NOT working - using a local store");
    NSMutableDictionary *options = [NSMutableDictionary dictionary];
    [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
    [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];

    [psc lock];

    [psc addPersistentStoreWithType:NSSQLiteStoreType 
                      configuration:nil 
                                URL:localStore 
                            options:options 
                              error:nil];
    [psc unlock];
}
__persistentStoreCoordinator = psc;

[[NSNotificationCenter defaultCenter] postNotificationName:NOTIFICATION_ICLOUD_SOMETHING_CHANGED object:nil];

return __persistentStoreCoordinator; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:46:54.473

通常，删除程序数据后应该没问题。但是，错误表明，您没有不一致，但根本没有存储。假设：如果出现故障，您不会重新启动它。也许，以下代码可能有用：

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator

{
    if (__persistentStoreCoordinator != nil) {
        return __persistentStoreCoordinator;
    }
    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"myApp.sqlite"];

    NSError *error = nil;
    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        // Error, erase data
        [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil];
        NSLog(@"store cleaned");
        __persistentStoreCoordinator = nil;
        return [self persistentStoreCoordinator];
    }    
    return __persistentStoreCoordinator;
} 
```

# asp.net - 如何从gridview按钮单击调用表单？

> ID：10327740
> 
> 赞同：1
> 
> 时间：2012-04-26T05:33:03.133
> 
> 标签：asp.net

我在我的应用程序中使用了一个 Gridview，其中包含如下按钮字段。

```
<asp:GridView ID="grvAccrualData" runat="server" AutoGenerateColumns="False" ForeColor="Black" Font-Names="Arial"

                        BackColor="#B10633" __designer:wfdid="w9" AllowPaging="True" Width="100%" OnRowCommand="grvAccrualData_RowCommand">
                        <PagerSettings FirstPageText="&amp;lt;&amp;lt; First" LastPageText="Last &amp;gt;&amp;gt;"
                            Mode="NextPreviousFirstLast" NextPageText="Next &amp;gt;" PreviousPageText="Prev &amp;lt;">
                        </PagerSettings>
                        <FooterStyle BackColor="#B10633" Font-Bold="True" ForeColor="White"></FooterStyle>
                        <RowStyle Font-Names="Arial" Font-Size="8pt" HorizontalAlign="Left" VerticalAlign="Middle" BackColor="Ivory" />
                        <Columns>
                            <asp:BoundField DataField="AccrlHeaderAccrualNo" HeaderText="Accrual Number">
                                <ItemStyle HorizontalAlign="Left" VerticalAlign="Middle"></ItemStyle>
                            </asp:BoundField>
                            <asp:ButtonField ButtonType="button" CommandName="AccrualDetail" HeaderText="Debit Generation" Text="Account" />
                        </Columns>
                        <PagerStyle HorizontalAlign="Center" BackColor="#B10633" ForeColor="Black"></PagerStyle>
                        <HeaderStyle BackColor="#B10633" Font-Names="Arial" Font-Size="8pt" ForeColor="White">
                        </HeaderStyle>
                        <AlternatingRowStyle BackColor="#FFC0C0"></AlternatingRowStyle>
                    </asp:GridView> 
```

我的服务器端代码是：

```
protected void grvAccrualData_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "AccrualDetail")
    {

    }
} 
```

在此服务器代码中，我想在单击按钮时调用表单或网页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:01:20.633

利用

```
Response.Redirect("~/WebPage.aspx"); 
```

或者，如果您想通过这种方式传递参数，请使用 QueryString。

# tsql - SQL Server 中基于 FIFO 的库存评估

> ID：10327741
> 
> 赞同：3
> 
> 时间：2012-04-26T05:33:10.403
> 
> 标签：tsql, sql-server-2005

我有一个这样的股票交易表：

```
Item   Date         TxnType Qty  Price
ABC   01-April-2012   IN    200 750.00
ABC   05-April-2012   OUT   100     
ABC   10-April-2012   IN     50 700.00
ABC   16-April-2012   IN     75 800.00
ABC   25-April-2012   OUT   175     
XYZ   02-April-2012   IN    150 350.00
XYZ   08-April-2012   OUT   120     
XYZ   12-April-2012   OUT    10     
XYZ   24-April-2012   IN     90 340.00 
```

我需要 FIFO（先进先出）中每个项目的库存价值，这意味着应该首先消耗第一个购买的项目。上述数据的产出存量估值为：

```
Item  Qty      Value
ABC   50    40000.00
XYZ   110   37600.00 
```

请帮助我获得解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T07:02:33.543

出乎意料地难以正确。我怀疑使用支持在窗口函数中运行总和的 SQL Server 2012 会更容易。无论如何：

```
declare @Stock table (Item char(3) not null,[Date] datetime not null,TxnType varchar(3) not null,Qty int not null,Price decimal(10,2) null)
insert into @Stock(Item ,  [Date] ,        TxnType, Qty,  Price) values
('ABC','20120401','IN',    200, 750.00),
('ABC','20120405','OUT',   100 ,null  ),
('ABC','20120410','IN',     50, 700.00),
('ABC','20120416','IN',     75, 800.00),
('ABC','20120425','OUT',   175, null  ),
('XYZ','20120402','IN',    150, 350.00),
('XYZ','20120408','OUT',   120 ,null  ),
('XYZ','20120412','OUT',    10 ,null  ),
('XYZ','20120424','IN',     90, 340.00);

;WITH OrderedIn as (
    select *,ROW_NUMBER() OVER (PARTITION BY Item ORDER BY [DATE]) as rn
    from @Stock
    where TxnType = 'IN'
), RunningTotals as (
    select Item,Qty,Price,Qty as Total,0 as PrevTotal,rn from OrderedIn where rn = 1
    union all
    select rt.Item,oi.Qty,oi.Price,rt.Total + oi.Qty,rt.Total,oi.rn
    from
        RunningTotals rt
            inner join
        OrderedIn oi
            on
                rt.Item = oi.Item and
                rt.rn = oi.rn - 1
), TotalOut as (
    select Item,SUM(Qty) as Qty from @Stock where TxnType='OUT' group by Item
)
select
    rt.Item,SUM(CASE WHEN PrevTotal > out.Qty THEN rt.Qty ELSE rt.Total - out.Qty END * Price)
from
    RunningTotals rt
        inner join
    TotalOut out
        on
            rt.Item = out.Item
where
    rt.Total > out.Qty
group by rt.Item 
```

第一个观察是我们不需要为`OUT`交易做任何特别的事情——我们只需要知道总量。这就是`TotalOut`CTE 计算的结果。前两个 CTE 处理`IN`交易，并计算每个股票的“间隔”代表什么 - 将最终查询更改为只是`select * from RunningTotals`为了感受一下。

最后的`SELECT`语句查找尚未被传出事务完全耗尽的行，然后确定它是该传入事务的全部数量，还是跨越传出总数的事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:37:36.003

我认为您必须为此使用详细事务表。像Stock，StockDetail，StockDetailTransaction。在此 StockDetailTransaction 表中包含 Stock 的 FIFO 条目。当 Item In/Out 时在 StockDetailTransaction 中添加记录。

# oauth-2.0 - 向 Google Contacts API (OAuth2) 发送 POST 而不是 GET 请求

> ID：10327745
> 
> 赞同：0
> 
> 时间：2012-04-26T05:33:28.103
> 
> 标签：oauth-2.0, google-contacts-api

希望有人可以在这里帮助我。我正在使用 Google Contacts API 来获取联系人列表。据我了解，这是通过发送 GET 请求来完成的：

[https://www.google.com/m8/feeds/contacts/default/full?alt=json&max-results=9999&oauth_token=OATH_TOKEN_HERE](https://www.google.com/m8/feeds/contacts/default/full?alt=json&max-results=9999&oauth_token=OATH_TOKEN_HERE)

但是，这是非常不安全的，因为任何入侵者都可以访问 URL 中的 oauth_token。为了解决这个问题，我尝试将其作为 POST 请求发送，并将我的参数（alt、max-results、oauth_token）作为数据。但是，我只是收到“需要授权”的错误。我尝试将“授权：OAuth”添加到我的标题中，但无济于事（收到无法识别授权类型的错误）。

有什么建议吗？我需要一种安全的方式将 oauth 令牌发送给 Google，这样我的安全软件就不会抱怨我的程序中存在安全漏洞......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T05:41:54.587

要直接回答您的问题，即使您使用的安全性无关紧要`HTTPS`，您也无法`POST`通过 Google 获取联系人列表。[Google 要求您使用 Get](https://developers.google.com/google-apps/contacts/v3/#retrieving_all_contacts)。

授权的正确格式（因为您仍然可以使用 a`Get`而不是将 oauth_token 作为查询字符串传递，所以使用 HTTP Header 格式：

> 授权：承载 1/fFBGRNJru1FQd44AzqT3Zg

[使用 OAuth 2.0 访问 Google API](https://developers.google.com/accounts/docs/OAuth2)

# c# - 从 C# 中的插入查询返回 ID

> ID：10327746
> 
> 赞同：2
> 
> 时间：2012-04-26T05:33:28.337
> 
> 标签：c#, .net, database, ms-access, ado.net

我有一个问题，当使用 C# 和 MS Access 数据库将记录插入表中时，如何返回表的自动递增 id。以下是我尝试过的代码。

```
string data1 = string.Format("insert into Enquiry(fname,mname,lname,date_of_enq,address,contact_no,email_id,course_id,other,probable_date,updated_date,status)values('{0}','{1}','{2}','{3}','{4}','{5}','{6}','{7}','{8}','{9}','{10}','{11}')", 
        txtfName.Text, txtmName.Text, txtlName.Text, fullDate.Text, txtaddress.Text, txtContactNo.Text, varemail, CBCourse.SelectedValue.ToString(), txtOther.Text, DTPFeedBackDate.Text, updated_date, status); 
```

我想要在表中自动递增的插入记录的 id。我怎么才能得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T05:38:30.330

您可以使用以下内容：

```
Select Ident_Current(TableName); 

SELECT @@IDENTITY;

SELECT SCOPE_IDENTITY(); 
```

SELECT @@IDENTITY 它返回在连接上产生的最后一个 IDENTITY 值，而不管产生该值的表，也不管产生该值的语句的范围。@@IDENTITY 将返回在当前会话中输入到表中的最后一个标识值。虽然@@IDENTITY 仅限于当前会话，但它不限于当前范围。如果您在一个表上有一个触发器导致在另一个表中创建一个身份，您将获得最后创建的身份，即使它是创建它的触发器。

SELECT SCOPE_IDENTITY() 它返回连接上和同一范围内的语句生成的最后一个 IDENTITY 值，而不管生成该值的表。SCOPE_IDENTITY() 与@@IDENTITY 一样，将返回在当前会话中创建的最后一个身份值，但它也会将其限制在您当前的范围内。换句话说，它将返回您显式创建的最后一个身份值，而不是由触发器或用户定义的函数创建的任何身份。

SELECT IDENT_CURRENT('tablename') 它返回表中生成的最后一个 IDENTITY 值，与创建该值的连接无关，也与生成该值的语句的范围无关。IDENT_CURRENT 不受范围和会话限制；它仅限于指定的表。IDENT_CURRENT 返回为任何会话和任何范围内的特定表生成的标识值。

为避免与稍后添加触发器相关的潜在问题，请始终使用 SCOPE_IDENTITY() 来返回 T SQL 语句或存储过程中最近添加的行的标识。

在 MsAccess 中

```
// Include a variable and a command to retrieve the identity value from the Access database.
int newID = 0;
OleDbCommand idCMD = new OleDbCommand("SELECT @@IDENTITY", nwindConn);
// Retrieve the identity value and store it in the CategoryID column.
newID = (int)idCMD.ExecuteScalar();
return newID; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T05:38:39.090

只需将 eg 添加`SELECT @@IDENTITY`到您的查询中，并将其作为标量执行（请注意，还有其他方法，具体取决于您的身份范围）

这适用于 mssql - 对于其他系统，我正在等待您对我的评论的回答！

顺便说一句：我不会以这种方式执行查询 - 关键字是 sql-injection。而是去参数！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-01T12:30:12.930

此 C# 代码使用**Oracle.ManagedDataAccess** 4.121.1.0 库为我工作：

```
OracleConnection conn = oracleConnLicen();
OracleCommand cmd = conn.CreateCommand();

conn.Open();
cmd.CommandText = "INSERT INTO account (name) VALUES ('Adam') RETURNING id INTO :p_id"; 
```

然后在 ExecuteNonQuery 之前：

```
OracleParameter pId = new OracleParameter("p_id", OracleDbType.Int32)
    {
        Direction = ParameterDirection.Output
    };
cmd.Parameters.Add(pId);

cmd.ExecuteNonQuery();
return Convert.ToInt32(pId.Value.ToString()); 
```

# c# - DNN 和 windows 身份验证

> ID：10327747
> 
> 赞同：2
> 
> 时间：2012-04-26T05:33:28.743
> 
> 标签：c#, dotnetnuke, windows-authentication

我正在尝试在 DotNetNuke 中实现与 Windows 身份验证相关的最简单的功能。我需要的只是在访问 DNN 站点时使用 Windows 身份验证对用户进行身份验证（无需用户在 DNN 中登录）并读取他的用户名（HttpContext.User.Identity.Name）。

我怎样才能尽可能简单地做到这一点？

是否可以不使用任何 3rd 方身份验证提供程序，例如[DNN Auth: Active Directory](http://dnnauthad.codeplex.com/)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T22:10:54.963

如果您需要用户在域中才能访问该站点，但不希望他们作为用户在实际 DNN 站点中，只需拒绝“匿名”访问该网站并要求 Windows 身份验证。IIS 将为您处理这个问题。

这都是在 IIS 中的 AUthorization 选项下配置的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-06T23:56:51.343

我打赌我知道你的问题是什么...

试试这个：在 DNN 中创建一个新用户，其用户名是：*DOMAIN\username*

其中*DOMAIN\username*与该计算机上的 Windows 用户匹配。正如 Mitchel 指出的那样，拒绝匿名并在 IIS 中为有问题的 DNN 站点启用 Windows 身份验证。

为了好玩，执行 cmd iisreset，重新启动浏览器并点击 DNN 站点。

出现提示时，使用*DOMAIN\username*和 Windows 用户的密码，而**不是**您在 DNN 中分配给该用户的密码。

# iphone - 如何对 JSON 项目进行排序/分组

> ID：10327749
> 
> 赞同：0
> 
> 时间：2012-04-26T05:33:50.287
> 
> 标签：iphone, ios, xcode, json, uitableview

**********更新问题******* *** ***** JSON 数据是整周的健身房课程。****

 ****目前我正在下载 JSON 数据并将其保存到 An NSObject SearchResult 然后在我的 UItableviewController 上显示每个健身房类一行。

但我想按天对项目（健身房课程）进行分组，并在自己的桌子上显示每一天。

所以我的问题是我是否需要按日期“DAY_OF_WEEK”对项目进行分组并将每一天存储到自己的数组（MonArray ... SunArray）中？

还是像我现在正在做的那样收集所有数据并将每天的数组分组？

我希望这是有道理的。

谢谢你的帮助 。

```
- (void)viewDidLoad {

[super viewDidLoad];

dispatch_async(kBgQueue, ^{
    NSData* data = [NSData dataWithContentsOfURL: JsonURL];
    [self performSelectorOnMainThread:@selector(fetchedData:)
                           withObject:data waitUntilDone:YES]; });  }

-(SearchResult *)parseTrack:(NSDictionary *)dictionary {
SearchResult *searchResult1 = [[SearchResult alloc] init];
searchResult1.day = [[dictionary objectForKey:@"post"] objectForKey:@"DAY_OF_WEEK"];
searchResult1.classType= [[dictionary objectForKey:@"post"] objectForKey:@"CLASS_TYPE"];
return searchResult1;
}

- (void)fetchedData:(NSData *)responseData { //parse out the json data

searchResults2 = [NSMutableArray arrayWithCapacity:10];

NSError* error;
NSDictionary* dictionary = [NSJSONSerialization
                      JSONObjectWithData:responseData //1 
                            options:kNilOptions error:&error];
NSArray *array = [dictionary objectForKey:@"posts"];

NSLog(@"array : %@",array);

if (array == nil) {
    NSLog(@"Expected 'posts' array");
    return;
}
for (NSDictionary *resultDict in array) {

    SearchResult *searchResult3;

    searchResult3 = [self parseTrack:resultDict];

    if (searchResult3 != nil) {
        [searchResults2 addObject:searchResult3];
    }

    NSLog(@"day: %@, class: %@", [[resultDict objectForKey:@"post"] objectForKey:@"DAY_OF_WEEK"], [[resultDict objectForKey:@"post"] objectForKey:@"CLASS_TYPE"]);

}

[self.tableView reloadData];

}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

 #pragma mark - Table view data source

 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
 {

// Return the number of sections.
return 1;
}

 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {

// Return the number of rows in the section.
return searchResults2.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

SRCell *cell = [tableView dequeueReusableCellWithIdentifier:@"SRCell1"];

// Configure the cell...

SearchResult *searchResult1 = [searchResults2 objectAtIndex:indexPath.row];
cell.daynameLabel.text = searchResult1.day;

return cell;
} 
```

JSON 输出 NSlog

```
2012-04-26 06:12:51.256 passingdata[91699:fb03] array : (
    {
    post =         {
        "CLASS_LEVEL" = "Intro/General";
        "CLASS_TYPE" = "Muay Thai";
        "DAY_OF_WEEK" = Friday;
        ID = 19;
        "ORDER_BY" = 5;
        TIME = "1:00pm - 2:30pm";
    };
}
    {
    post =         {
        "CLASS_LEVEL" = "General/Intermediate/Advanced";
        "CLASS_TYPE" = "Muay Thai Spar - Competitive";
        "DAY_OF_WEEK" = Friday;
        ID = 27;
        "ORDER_BY" = 5;
        TIME = "6:00pm - 9:00pm";
    };
},
    {
    post =         {
        "CLASS_LEVEL" = "Fighters/Advanced/Intermediate";
        "CLASS_TYPE" = "Fighters Training";
        "DAY_OF_WEEK" = Monday;
        ID = 1;
        "ORDER_BY" = 1;
        TIME = "9:30am - 11:00pm";
    };
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:29:02.710

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"DAY_OF_WEEK" ascending:TRUE];
[sourceArr sortUsingDescriptors:[NSArray arrayWithObjects:sortDescriptor, nil]]; 
```

愿这对你有所帮助。****

# javascript - 获取精确的相对鼠标位置 XY

> ID：10327754
> 
> 赞同：3
> 
> 时间：2012-04-26T05:34:26.697
> 
> 标签：javascript, jquery, mouseevent, mousemove

我创建表，处理程序连接了 mousemove。但在左上角，我得到 .offsetX.offsetY 等于 -5-5。为什么？我需要 0\0。

```
<table cellpadding="0" 
       id="target" 
       cellspacing="0"
       width="602" 
       height="500"  
       style="float:left;
              position:relative;
              background: url(/content/games/kamikaze2/back.jpg) no-repeat 0 0;">
    <tbody>...
</tbody>
</table>

<script type="text/javascript">

    $("#target").mousemove(function (event) {
        var msg = "Handler for .mousemove() called at ";
        msg += event.offsetX + ", " + event.offsetY;
        $("#log").append("<div>" + msg + "</div>");
    });
</script> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T05:41:00.673

更多示例：[show-popup-on-mouse-location](https://stackoverflow.com/a/70691308/383904)

* * *

## 元素内的鼠标坐标

**获取相对于视口****的元素**（没有滚动条）内的鼠标坐标的最准确方法是计算两者之间的差异

 ***   [MouseEvent.clientX](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/clientX)，[MouseEvent.clientY](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/clientY)和
*   [Element.getBoundingClientRect()](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect)

```
const getMousePos = (evt) => {
  const pos = evt.currentTarget.getBoundingClientRect();
  return {
    x: evt.clientX - pos.left,
    y: evt.clientY - pos.top
  };
};

document.querySelector("#target").addEventListener('mousemove', (evt) => {
  const mPos = getMousePos(evt);
  evt.currentTarget.textContent = `Mouse position x:${mPos.x}  y:${mPos.y}`;
});
```

```
#target {
  position: absolute;
  left: 50px;
  top: 20px;
  width: 200px;
  height: 100px;
  background: #0bf;
  transform: translate(20px, 30px); /* works even with translate */
}
```

```
<div id="target"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
```

减去这些值，您可以检索确切的鼠标位置，*x:0, y:0*是元素的左上角。即使元素是 CSS 转换的，即：`transform: translate(-50%, -50%)`，返回的值仍然是正确的。**

# android - 根据名称Android从联系人中获取电话号码

> ID：10327755
> 
> 赞同：0
> 
> 时间：2012-04-26T05:34:37.743
> 
> 标签：android, contacts, fetch, phone-number

我正在开发一个应用程序，我需要从与提供的姓名对应的联系人中获取电话号码。我尝试了很多代码，但似乎没有一个有效。

这是我现在正在使用的代码

```
public static String getContactPhoneNumber(Context context, String contactName, int type) {
        String phoneNumber = null;

        String[] whereArgs = new String[] { contactName, String.valueOf(type) };

        Log.d(TAG, String.valueOf(contactName));

        Cursor cursor = context.getContentResolver().query(
                ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                null,
                ContactsContract.Contacts.DISPLAY_NAME + " = ? and "
                        + ContactsContract.CommonDataKinds.Phone.TYPE + " = ?", whereArgs, null);

        int phoneNumberIndex = cursor
                .getColumnIndexOrThrow(ContactsContract.CommonDataKinds.Phone.NUMBER);

        Log.d(TAG, String.valueOf(cursor.getCount()));

        if (cursor != null) {
            Log.v(TAG, "Cursor Not null");
            try {
                if (cursor.moveToNext()) {
                    Log.v(TAG, "Moved to first");
                    Log.v(TAG, "Cursor Moved to first and checking");
                    phoneNumber = cursor.getString(phoneNumberIndex);
                }
            } finally {
                Log.v(TAG, "In finally");
                cursor.close();
            }
        }

        Log.v(TAG, "Returning phone number");
        return phoneNumber;
    } 
```

在传递联系人姓名（例如：John Doe）和类型（2 是移动类型的 int 值）时，返回的电话号码为空，即使联系人“John Doe”存在于我的联系人列表中。

请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:43:16.740

尝试这个

而不是将参数`ContactsContract.CommonDataKinds.Phone.CONTENT_URI`传递 `ContactsContract.Contacts.CONTENT_URI`给查询方法。

# iphone - 如何在iphone中设置自定义字体大小

> ID：10327761
> 
> 赞同：2
> 
> 时间：2012-04-26T05:35:16.737
> 
> 标签：iphone, xcode4.2, customization, custom-font

您好我在我的应用程序中使用自定义字体。首先，我在 .plist 中包含字体，然后我尝试以这两种方式使用字体

> 1.  [lblTitle setFont:[UIFont fontWithName:@"FtraBk__1" size:9]];
>     
>     
> 2.  UIFont *CustomFont = [UIFont fontWithName:@"FtraBk__1" size:9];
>     
>     
>     
>     [lblTitle setFont:CustomFont];

但在这两种情况下，字体大小都不起作用。我在`uitableviewcustomcell`. 那么如何调整自定义字体高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:39:57.460

这是在 iPhone APP 中使用自定义字体非常互动的想法

这个链接有很多关于自定义字体的想法。

[我可以在 iPhone 应用程序中嵌入自定义字体吗？](https://stackoverflow.com/questions/360751/can-i-embed-a-custom-font-in-an-iphone-application)

# sql - 应用 distinct 后使用 Row_number

> ID：10327766
> 
> 赞同：1
> 
> 时间：2012-04-26T05:36:08.323
> 
> 标签：sql, sql-server, tsql, stored-procedures, paging

我正在创建一个 SP，它通过在其上应用 distinct 来给出一些结果，现在我想实现服务器端分页，所以我尝试在不同的结果上使用 Row_number，例如：

```
 WITH CTE AS
    (
        SELECT ROW_NUMBER() OVER(ORDER BY tblA.TeamName DESC)
as Row,tblA.TeamId,tblA.TeamName,tblA.CompId,tblA.CompName,tblA.Title,tblA.Thumbnail,tblA.Rank,tblA.CountryId,tblA.CountryName
         FROM
         (
           --The table query starts with SELECT 
         )tblA
    )
        SELECT CTE.* FROM CTE
        WHERE CTE.Row BETWEEN @StartRowIndex AND @StartRowIndex+@NumRows-1
        ORDER BY CTE.CountryName 
```

但是首先为行分配 RowNumber 然后应用 distinct ，这就是为什么我得到重复值，如何首先获得不同的行然后获得相同的行号。

对此有任何解决方案吗？我错过了什么吗？需要尽快答复。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:06:28.730

您不需要在 ROW_NUMBER 语句中添加“分区依据”吗？

```
ROW_NUMBER() OVER(Partition by ___, ___, ORDER BY tblA.TeamName DESC) 
```

在空白处，放置要为其创建新行号的列名。Duplicates 将收到一个非 1 的数字，因此您可能不需要 distinct。

要收集唯一值，您可以编写一个子查询，其中存储过程仅获取其中包含 1 的行。

```
select * from
(
  your code
) where row = 1 
```

希望有帮助。

我不确定你为什么要这样做：

```
WHERE CTE.Row BETWEEN @StartRowIndex AND @StartRowIndex+@NumRows-1 
```

# ruby-on-rails - 应用程序变量在测试环境中为零

> ID：10327768
> 
> 赞同：0
> 
> 时间：2012-04-26T05:36:23.533
> 
> 标签：ruby-on-rails, rspec

我的应用程序运行良好，但我无法通过测试。我是rails新手，如果答案很明显，请原谅我。

我需要一个可用于每个视图的变量，所以我在`application_controller.rb`：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :course
  def course
    @course = Course.find_slug(params[:course])
  end
end 
```

我的测试用例如下所示：

```
it "creates an attempt" do
  sign_in current_user 
  params = {:id => challenge.id, :description => "this was hard!", :course => "design"}
  @course = FactoryGirl.create(:course)
  post :completed, params
  response.should redirect_to "/#{@course.slug}/?challenge_slug=" + challenge.slug
  Attempt.count.should == 1
  Attempt.last.description.should == params[:description]
end 
```

我的控制器中的方法如下所示：

```
 def completed
    @challenge = Challenge.find(params[:id])
    @challenge.completed(current_user, params)
    redirect_to "/#{@course.slug}/?challenge_slug=" + @challenge.slug.to_s
  end 
```

如果我使用该应用程序，所有这些都可以正常工作，但测试显示：

```
 1) ChallengesController completing a challenge creates an attempt
     Failure/Error: post :completed, params
     NoMethodError:
       undefined method `slug' for nil:NilClass
     # ./app/controllers/challenges_controller.rb:16:in `completed'
     # ./spec/controllers/challenges_controller_spec.rb:36:in `block (3 levels) in <top (required)>' 
```

如果我硬编码我的控制器说`redirect_to "#{'expected_value'}"`然后测试通过，那么在测试环境中我似乎无权访问应用程序变量`@course`，这是正确的吗？

我不知道如何解决这个问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:01:19.173

一种解决方案是存根 find 方法并返回实例变量。

```
before(:each) do
  @course = FactoryGirl.create(:course)
  Course.stub(:find_slug).and_return(@course)
end 
```

这使您的测试更加健壮，因为“find_slug”的测试应该在您的课程模型中，而不是控制器中。

# ruby-on-rails - 使用 JRuby 运行 Rails 应用程序显示“LoadError”

> ID：10327771
> 
> 赞同：1
> 
> 时间：2012-04-26T05:36:50.210
> 
> 标签：ruby-on-rails, jruby

我的 rails 应用程序在 Ruby 1.8.7 上运行良好。现在我想用 JRuby 测试我的 rails 应用程序。但是 JRuby 告诉我它不能自动加载某些文件，但这些文件正确存在于路径中。

```
LoadError (Expected E:/youwenti/app/models/article/reference_aspect.rb to define
 Article::ReferenceAspect):
  app/models/article.rb:6:in `Article'
  app/models/article.rb:3:in `(root)'
  org/jruby/RubyKernel.java:1058:in `load'
  org/jruby/RubyKernel.java:2080:in `send'
  app/models/article.rb:99:in `latest'
  app/controllers/groups_controller.rb:36:in `show'
  app/controllers/groups_controller.rb:21:in `index'
  org/jruby/RubyKernel.java:2076:in `send'
  org/jruby/RubyKernel.java:2076:in `send'
  compass (0.11.7) lib/compass/app_integration/rails/actionpack2/action_controll
er.rb:7:in `process_with_compass'
  org/jruby/RubyProc.java:270:in `call'
  org/jruby/RubyProc.java:220:in `call'
  sass (3.1.15) rails/./lib/sass/plugin/rack.rb:54:in `call'
  org/jruby/RubyArray.java:1615:in `each'
  org/jruby/RubyArray.java:1615:in `each'
  org/jruby/RubyProc.java:270:in `call'
  org/jruby/RubyProc.java:224:in `call' 
```

我已经`Article::ReferenceAspect`在`E:/youwenti/app/models/article/reference_aspect.rb`. 如何解决问题？

Rails 版本是 2.3.14

JRuby 版本是

```
jruby 1.6.7 (ruby-1.8.7-p357) (2012-02-22 3e82bc8) (Java HotSpot(TM) Client VM 1.7.0_02) [Windows XP-x86-java] 
```

# java - Android JNI 从 Java 类中获取两个字段

> ID：10327773
> 
> 赞同：4
> 
> 时间：2012-04-26T05:37:21.957
> 
> 标签：java, android, c++, android-ndk

在发布任何代码或任何内容之前，让我解释一下我要完成的工作：我要做的是从资产文件夹中获取加载着色器，并将`PongDroidShader`对象数组传递给 C++，以便它可以编译和加载它们.

在我的 Java 类中，我有一个函数，它遍历着色器文件夹中的每个着色器文件并解析它，将其加载到一个`String`对象中，同时还通过其文件扩展名检查它是哪种着色器类型（例如，一个顶点将有一个`.vert`扩展名）。完成此操作后，我将其发送到我的本机`compileShaders`函数，该函数接受`PongDroidShader`对象数组和数组的大小。

之后，我从 JNI 代码中解析和链接着色器。

到目前为止，我无法让 JNI 识别 Java 代码并将其加载到变量中。到目前为止，我所拥有的如下：

**Java 代码**

```
public final class PongDroidShader {
    public String mShaderSrc;
    public ShaderType mType;
}

private class ShaderHandler {

        ...

        private native void compileShaders(PongDroidShader[] shaders, int shaderCount);

        ... 
```

**JNI/C++ 代码**

```
JNIEXPORT void JNICALL Java_com_grepwise_pongdroid_PongDroid_00024ShaderHandler_compileShaders
  (JNIEnv * env, jobject obj, jobjectArray shaders, jint sizeOfShaders) {

    for( int i = 0; i < sizeOfShaders; ++i )
    {
        jclass clazz = env->FindClass( "com/grepwise/pongdroid/PongDroidShader" );
        jclass shaderTypeEnum = env->FindClass( "com/grepwise/pongdroid/ShaderType" );

        jfieldID field = env->GetFieldID( clazz, "mType", "ShaderType" );

        jobject shader = env->GetObjectArrayElement( shaders, i );

        const jchar jShaderChr = env->GetCharField( shader, env->GetFieldID( clazz, "mShaderSrc", "java/lang/String" ) );

        jstring jShaderStr = env->NewString( &jShaderChr, sizeof( jShaderChr ) );

        const char* shaderStr = env->GetStringUTFChars( jShaderStr, 0 );

        //TODO implement GL Shader Manipulation and Allocation here

        optim::Config::Log::info( "Testing shader: %s", shaderStr );

        delete shaderStr;
    }

} 
```

为了简单起见，我省略了代码库中存在的很多内容。请注意，即使`compileShaders`未显示被调用，它*也*由将其父类包装为内部私有类的活动类调用。

到目前为止，我的日志输出如下：

```
04-25 22:20:56.267 11985 11985 D dalvikvm: Trying to load lib /data/data/com.grepwise.pongdroid/lib/libnativepd.so 0x4051c800
04-25 22:20:56.275 11985 11985 D dalvikvm: Added shared lib /data/data/com.grepwise.pongdroid/lib/libnativepd.so 0x4051c800
04-25 22:20:56.322 11985 11985 D dalvikvm: GetFieldID: unable to find field Lcom/grepwise/pongdroid/PongDroidShader;.mType:ShaderType
04-25 22:20:56.322 11985 11985 D dalvikvm: GetFieldID: unable to find field Lcom/grepwise/pongdroid/PongDroidShader;.mShaderSrc:java/lang/String
04-25 22:20:56.330 11985 11985 I dalvikvm:   at com.grepwise.pongdroid.PongDroid$ShaderHandler.compileShaders(Native Method)
04-25 22:20:56.330 11985 11985 I dalvikvm:   at com.grepwise.pongdroid.PongDroid$ShaderHandler.access$1(PongDroid.java:128)
04-25 22:20:56.330 11985 11985 I dalvikvm:   at com.grepwise.pongdroid.PongDroid.onCreate(PongDroid.java:72) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T05:58:01.210

我相信您应该使用它来获取您的字段：

```
env->GetFieldID( clazz, "mType", "Lcom/grepwise/pongdroid/ShaderType;" );
env->GetFieldID( clazz, "mShaderSrc", "Ljava/lang/String;" ) 
```

并将类和字段移出循环。

编辑：还有这个：

```
const jchar jShaderChr = env->GetCharField(...) 
```

从 mShaderSrc 获取字符串值是错误的。

你应该使用：

```
jstring jShaderStr = (jstring)env->GetObjectField(...);
const char* shaderSrc = env->GetStringUTFChars(jShaderStr, 0);
// ... here use shaderSrc
env->ReleaseStringUTFChars(hShaderStr, shaderSrc); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T05:58:37.520

您必须从实例中获取私有字段，并将签名作为第三个参数传递。

```
jfieldID field = env->GetFieldID( obj, "mShaderSrc", "Ljava/lang/String;" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:43:08.223

我解决了这个问题：Eclipse 没有识别我的类路径。如果有人遇到类似问题，那么他们需要转到 Window->Preferences->Java->Build Paths->Classpath，并将类路径添加到他们正在使用的 Android SDK 平台，以及他们项目类的路径根（例如`$PROJECT_ROOT/bin/classes`）。

# android - 如何在异步任务中的地图中的两点之间绘制路线

> ID：10327775
> 
> 赞同：0
> 
> 时间：2012-04-26T05:37:41.453
> 
> 标签：android, android-asynctask, android-maps

嗨，我正在使用下面链接中的代码在地图中的两点之间绘制路线。 [http://code.google.com/p/j2memaprouteprovider/source/browse/#svn/trunk/J2MEMapRouteAndroidEx/src/org/ci/geo/route](http://code.google.com/p/j2memaprouteprovider/source/browse/#svn/trunk/J2MEMapRouteAndroidEx/src/org/ci/geo/route)

此外，我使用计时器每 30 秒动态更新一次位置。它运作良好。但应用程序在 20 秒后冻结。在 2 点之间绘制路线后，应用程序在放大或缩小地图时变慢。

有没有其他有效的方法来绘制两点之间或异步任务中的路线？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:24:07.337

参考这个[链接](http://asmncl.blogspot.in/2012/04/android-draw-route-map-between-two.html)

共享数据.java

```
package com.agarwal.route;

public class SharedData {

    // this is a singleton class that provides a global data share for all of the
    // activities and services in the MDWrapper application       
    private static SharedData instance = null;

    private SharedData() {
        //randomizeServers();
    }

    // data to be shared
    private String APIKEY = "";
    private double src_lat = -1;
    private double src_lng = -1;
    private double dest_lat = -1;
    private double dest_lng = -1;

    /**
     * @return the aPIKEY
     */
    public String getAPIKEY() {
        return APIKEY;
    }

    /**
     * @param aPIKEY the aPIKEY to set
     */
    public void setAPIKEY(String aPIKEY) {
        APIKEY = aPIKEY;
    }

    /**
     * @return the src_lat
     */
    public double getSrc_lat() {
        return src_lat;
    }

    /**
     * @param src_lat the src_lat to set
     */
    public void setSrc_lat(double src_lat) {
        this.src_lat = src_lat;
    }

    /**
     * @return the src_lng
     */
    public double getSrc_lng() {
        return src_lng;
    }

    /**
     * @param src_lng the src_lng to set
     */
    public void setSrc_lng(double src_lng) {
        this.src_lng = src_lng;
    }

    /**
     * @return the dest_lat
     */
    public double getDest_lat() {
        return dest_lat;
    }

    /**
     * @param dest_lat the dest_lat to set
     */
    public void setDest_lat(double dest_lat) {
        this.dest_lat = dest_lat;
    }

    /**
     * @return the dest_lng
     */
    public double getDest_lng() {
        return dest_lng;
    }

    /**
     * @param dest_lng the dest_lng to set
     */
    public void setDest_lng(double dest_lng) {
        this.dest_lng = dest_lng;
    }

    public static SharedData getInstance() {
        if (null == instance) {
            instance = new SharedData();
        }

        return instance;
    }

} 
```

CustomItemizedOverlay.java

```
package com.agarwal.route;
import java.util.ArrayList;

import android.graphics.drawable.Drawable;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class CustomItemizedOverlay extends ItemizedOverlay<OverlayItem> {

private final ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

public CustomItemizedOverlay(Drawable defaultMarker) {
    super(boundCenterBottom(defaultMarker));
}

@Override
protected OverlayItem createItem(int i) {
    return mapOverlays.get(i);
}

@Override
public int size() {
    return mapOverlays.size();
}

public void addOverlay(OverlayItem overlay) {
    mapOverlays.add(overlay);
    this.populate();
} 
```

}

MyOverLay.java

```
package com.agarwal.route;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Point;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.Projection;

public class MyOverLay extends Overlay
{
    private GeoPoint gp1;
    private GeoPoint gp2;
    private int mode=0;
    private int defaultColor;
    Context mContext;

    public MyOverLay(Context context,GeoPoint gp1,GeoPoint gp2,int mode) // GeoPoint is a int. (6E)
    {
        this.gp1 = gp1;
        this.gp2 = gp2;
        this.mode = mode;
        this.mContext = context;
        defaultColor = 999; // no defaultColor

    }

    public MyOverLay(GeoPoint gp1,GeoPoint gp2,int mode, int defaultColor)
    {
        this.gp1 = gp1;
        this.gp2 = gp2;
        this.mode = mode;
        this.defaultColor = defaultColor;
    } 
    public int getMode()
    {
        return mode;
    }

    @Override
    public boolean draw
    (Canvas canvas, MapView mapView, boolean shadow, long when)
    {
        Projection projection = mapView.getProjection();
        if (shadow == false)
        {
            Paint paint = new Paint();
            paint.setAntiAlias(true);
            Point point = new Point();
            projection.toPixels(gp1, point);
            // mode=1&#65306;start
            if(mode==1)
            {
                if(defaultColor==999)
                    paint.setColor(Color.BLUE);
                else
                    paint.setColor(defaultColor);                 
                // start point
            }
            // mode=2&#65306;path
            else if(mode==2)
            {
                if(defaultColor==999)
                    paint.setColor(Color.RED);
                else
                    paint.setColor(defaultColor);
                Point point2 = new Point();
                projection.toPixels(gp2, point2);
                paint.setStrokeWidth(5);
                paint.setAlpha(120);
                canvas.drawLine(point.x, point.y, point2.x,point2.y, paint);

            }
            /* mode=3&#65306;end */
            else if(mode==3)
            {
                /* the last path */

                if(defaultColor==999)
                    paint.setColor(Color.GREEN);
                else
                    paint.setColor(defaultColor);
                Point point2 = new Point();
                projection.toPixels(gp2, point2);
                paint.setStrokeWidth(5);
                paint.setAlpha(120);
                canvas.drawLine(point.x, point.y, point2.x,point2.y, paint);
                /* end point */

            }
        }
        return super.draw(canvas, mapView, shadow, when);
    }

} 
```

路由路径.java

```
package com.agarwal.route;

import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;

import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.DialogInterface;
import android.graphics.Color;
import android.graphics.drawable.Drawable;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

public class RoutePath extends MapActivity {
    /** Called when the activity is first created. */
    MapView mapView;
    private RoutePath _activity;
    GeoPoint srcGeoPoint,destGeoPoint;
    private static List<Overlay> mOverlays;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        SharedData data = SharedData.getInstance();
        mapView = new MapView(this,data.getAPIKEY());
        mapView.setClickable(true);       
        setContentView(mapView);
        _activity = this;
        double src_lat = data.getSrc_lat();
        double src_long = data.getSrc_lng();
        double dest_lat = data.getDest_lat();
        double dest_long = data.getDest_lng();

        if(src_lat == -1 || src_long == -1 || dest_lat == -1 || dest_long == -1){
            showAlert("Please enter source and destination points");
        }else{

            srcGeoPoint = new GeoPoint((int) (src_lat * 1E6),(int) (src_long * 1E6));
            destGeoPoint = new GeoPoint((int) (dest_lat * 1E6),(int) (dest_long * 1E6));

            List<Overlay> mapOverlays = mapView.getOverlays();
            Drawable srcdrawable = this.getResources().getDrawable(R.drawable.pin_green);
            //CustomItemizedOverlay srcitemizedOverlay = new CustomItemizedOverlay(getDrawable("com/agarwal/route/pin_green.png"));
            OverlayItem srcoverlayitem = new OverlayItem(srcGeoPoint, "Hello!", "This is your Location.");

            Drawable destdrawable = this.getResources().getDrawable(R.drawable.pin_red);
           // CustomItemizedOverlay destitemizedOverlay = new CustomItemizedOverlay(getDrawable("com/agarwal/route/pin_red.png"));
            OverlayItem destoverlayitem = new OverlayItem(destGeoPoint, "Hello!", "This is dest Location.");

            srcitemizedOverlay.addOverlay(srcoverlayitem);
            destitemizedOverlay.addOverlay(destoverlayitem);

            mapOverlays.add(srcitemizedOverlay);
            mapOverlays.add(destitemizedOverlay);

            connectAsyncTask _connectAsyncTask = new connectAsyncTask();
            _connectAsyncTask.execute();         
            mapView.setBuiltInZoomControls(true);
            mapView.displayZoomControls(true);
            mOverlays = mapView.getOverlays();
            mapView.getController().animateTo(srcGeoPoint);
            mapView.getController().setZoom(12);
        }
    }
    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    private class connectAsyncTask extends AsyncTask<Void, Void, Void>{
        private ProgressDialog progressDialog;
        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            progressDialog = new ProgressDialog(_activity);
            progressDialog.setMessage("Fetching route, Please wait...");
            progressDialog.setIndeterminate(true);
            progressDialog.show();
        }
        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub
            fetchData();
            return null;
        }
        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);           
            if(doc!=null){
                Overlay ol = new MyOverLay(_activity,srcGeoPoint,srcGeoPoint,1);
                mOverlays.add(ol);
                NodeList _nodelist = doc.getElementsByTagName("status");
                Node node1 = _nodelist.item(0);
                String _status1  = node1.getChildNodes().item(0).getNodeValue();
                if(_status1.equalsIgnoreCase("OK")){
                    NodeList _nodelist_path = doc.getElementsByTagName("overview_polyline");
                    Node node_path = _nodelist_path.item(0);
                    Element _status_path = (Element)node_path;
                    NodeList _nodelist_destination_path = _status_path.getElementsByTagName("points");
                    Node _nodelist_dest = _nodelist_destination_path.item(0);
                    String _path  = _nodelist_dest.getChildNodes().item(0).getNodeValue();
                    List<GeoPoint> _geopoints = decodePoly(_path);
                    GeoPoint gp1;
                    GeoPoint gp2;
                    gp2 = _geopoints.get(0);
                    Log.d("_geopoints","::"+_geopoints.size());
                    for(int i=1;i<_geopoints.size();i++) // the last one would be crash
                    {

                        gp1 = gp2;
                        gp2 = _geopoints.get(i);
                        Overlay ol1 = new MyOverLay(gp1,gp2,2,Color.BLUE);
                        mOverlays.add(ol1);
                    }
                    Overlay ol2 = new MyOverLay(_activity,destGeoPoint,destGeoPoint,3);
                    mOverlays.add(ol2);

                    progressDialog.dismiss();
                }else{
                    showAlert("Unable to find the route");
                }

                Overlay ol2 = new MyOverLay(_activity,destGeoPoint,destGeoPoint,3);
                mOverlays.add(ol2);
                progressDialog.dismiss();
                mapView.scrollBy(-1,-1);
                mapView.scrollBy(1,1);
            }else{
                showAlert("Unable to find the route");
            }

        }

    }
    Document doc = null;
    private void fetchData()
    {
        StringBuilder urlString = new StringBuilder();
        urlString.append("http://maps.google.com/maps/api/directions/xml?origin=");
        urlString.append( Double.toString((double)srcGeoPoint.getLatitudeE6()/1.0E6 ));
        urlString.append(",");
        urlString.append( Double.toString((double)srcGeoPoint.getLongitudeE6()/1.0E6 ));
        urlString.append("&destination=");//to
        urlString.append( Double.toString((double)destGeoPoint.getLatitudeE6()/1.0E6 ));
        urlString.append(",");
        urlString.append( Double.toString((double)destGeoPoint.getLongitudeE6()/1.0E6 ));
        urlString.append("&sensor=true&mode=driving");    
        Log.d("url","::"+urlString.toString());
        HttpURLConnection urlConnection= null;
        URL url = null;
        try
        {
            url = new URL(urlString.toString());
            urlConnection=(HttpURLConnection)url.openConnection();
            urlConnection.setRequestMethod("GET");
            urlConnection.setDoOutput(true);
            urlConnection.setDoInput(true);
            urlConnection.connect();
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            doc = (Document) db.parse(urlConnection.getInputStream());//Util.XMLfromString(response);
        }catch (MalformedURLException e){
            e.printStackTrace();
        }catch (IOException e){
            e.printStackTrace();
        }catch (ParserConfigurationException e){
            e.printStackTrace();
        }
        catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    private List<GeoPoint> decodePoly(String encoded) {

        List<GeoPoint> poly = new ArrayList<GeoPoint>();
        int index = 0, len = encoded.length();
        int lat = 0, lng = 0;

        while (index < len) {
            int b, shift = 0, result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lat += dlat;

            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lng += dlng;

            GeoPoint p = new GeoPoint((int) (((double) lat / 1E5) * 1E6),
                    (int) (((double) lng / 1E5) * 1E6));
            poly.add(p);
        }

        return poly;
    }
    private void showAlert(String message){
        AlertDialog.Builder alert = new AlertDialog.Builder(_activity);
        alert.setTitle("Error");
        alert.setCancelable(false);
        alert.setMessage(message);
        alert.setPositiveButton("Ok",new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

            }
        });
        alert.show();
    }
    private Drawable getDrawable(String fileName){
        return Drawable.createFromStream(_activity.getClass().getClassLoader().getResourceAsStream(fileName), "pin");
    }
} 
```

在您的活动中，只需粘贴以下几行即可绘制路线图：

```
SharedData data = SharedData.getInstance();
data.setAPIKEY("0RUTLH7cqd6yrZ0FdS0NfQMO3lioiCbnH-BpNQQ");
data.setSrc_lat(17);
data.setSrc_lng(78);
data.setDest_lat(18);
data.setDest_lng(77);
startActivity(new Intent(YourActivity.this,RoutePath.class)); 
```

注意：：需要在清单文件中添加 RoutePath 活动和权限

# c++ - 如何将 ANSI 格式文件转换为 Unicode

> ID：10327778
> 
> 赞同：1
> 
> 时间：2012-04-26T05:37:58.943
> 
> 标签：c++, qt, unicode, ansi

我有一个以 ANSI 格式编码的文件（在 Notepad++ 中显示为 ANSI 编码），它还显示特殊字符（摄氏度、磅等），在阅读时我想将所有字符转换为 unicode。

如何在 C/C++ 或 Qt 中将 ANSI 转换为 Unicode？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:49:36.283

我的 Qt 仍然很生锈，但大致如下：

```
QFile inFile("foo.txt");
if (!inFile.open(QIODevice::ReadOnly | QIODevice::Text))
    return;

QFile outFile("foo.out.txt");
if (!outFile.open(QIODevice::WriteOnly | QIODevice::Truncate))
    return;

QTextStream in(&inFile);
QTextStream out(&outFile);
out.setCodec("UTF-8");

while (!in.atEnd()) {
    QString line = in.readLine();
    out << line;
} 
```

从 和 的文档拼凑而成[`QFile`](http://qt-project.org/doc/qt-4.8/qfile.html)，[`QTextStream`](http://qt-project.org/doc/qt-4.8/qtextstream.html)两者都包含读写文件的示例。默认为`QTextStream`使用 legacy 编码，因此我们只需要在 output 上设置显式编码`QTextStream`。

如果文件不是太大，你也可以使用

```
out << in.readAll(); 
```

instead of the loop over the lines. The loop especially might add a trailing line break to the output file (although the docs aren't very clear on that).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:42:10.120

希望这可以帮助。

[http://geekswithblogs.net/dastblog/archive/2006/11/24/98746.aspx](http://geekswithblogs.net/dastblog/archive/2006/11/24/98746.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:48:10.597

Just read it with `QTextStream`. It will apply `QTextCodec::codecForLocale`, which uses the default ("ANSI") translation of 8 bits characters to Unicode.

Note that this won't work if you've copied an ANSI text file to Mac or Linux, as they don't have the notion of ANSI. For them, the ANSI text file will be ASCII-like so you should first convert to Unicode (UTF-8) and then copy.

# haskell - Haskell ghci 命令行。返回值覆盖上次提示

> ID：10327779
> 
> 赞同：0
> 
> 时间：2012-04-26T05:38:00.087
> 
> 标签：haskell, ghci

我在 Max OSX 上安装了 ghci。

但是每次，返回值都会覆盖我上次的 ghci 提示。见下文。

```
Falseghci>null[1,2,3]
Luke_ghci> 
```

“假”覆盖我的最后一行 ghci 提示符。（应该是 Luke_ghci）

太奇怪了。如何解决？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:53:36.780

从上面链接的消息中复制：

> 啊哈！这使我找到了它：我将 TERM 设置为“ansi”。ghci + Haskeline 可以查找 TERM 是否设置为 rxvt、vt52、vt100、vt102 或 xterm 中的任何一个。不知道在 terminfo Haskeline 中依赖什么，但是 'ansi' 没有！

# php - 如何处理带有语句的复选框并回显它们

> ID：10327782
> 
> 赞同：0
> 
> 时间：2012-04-26T05:38:09.530
> 
> 标签：php, mysql, html, variables, checkbox

你好我有以下问题：

我想为搜索引擎创建一个过滤器。我有一些用于特定搜索词的输入字段，并且在相应的复选框旁边。所以看起来像：

输入字段 a：[ ***_* ____** ] 过滤器 a：开/关：[ ]

输入字段 b：[ ***_* ____** ] b 的过滤器：开/关：[ ]

输入字段 c：[ ***_* ____** ] c 的过滤器：开/关：[ ]

它的代码结构是：

首先检查输入字段是否为空并且复选框是否设置为选中状态。如果选中，提交后将取消选中。反之，如果只填写了输入字段并且未选中复选框，它也会出错，即出现错误并且过滤器无法工作。所以我为每个过滤器使用一个自己的错误数组，如`(the name and value of the first checkbox is name="filter_a" value="1")`：

```
...
$checkbox_filter_a = $db->real_escape_string(htmlentities(trim($_POST['filter_a'])));
...
$filter_a = (!empty($checkbox_filter_a)) ? 1 : 0;
...
$errors_a = array();
if ($filter_a == 1){
    if (empty($input_a)){
        $errors_a[] = 'the filter needs some input';
    }
}

if (!empty($input_a)){
    if ($filter_a == 0){
        $errors_a[] = 'filter is not activated';
    }
} 
```

如果没有错误并且两个条件都满足，则过滤器打开或不打开。所以这背后的逻辑是，在加载页面时，必须取消选中复选框。在关于过滤它的标准之后。

要在以下条件下显示已选中或未选中的状态，应在提交后选中或不选中。因此，我为每个过滤器（各自的 checkbox_filter_b，...）在输入字段之后的复选框部分都有此代码：

```
<?php
if (checkbox_filter_a == 0 ) {
     echo '<input type="checkbox" name="checkbox_filter_a" value="1" checked/>';
}else {
     echo '<input type="checkbox" name="checkbox_filter_a" value="1"/>';
}
?> 
```

什么都不满足。这是因为以下问题：

加载页面时，它将显示所有复选框均未选中。如果我因为没有填写输入或仅选中其中一个过滤器的复选框而尝试导致错误，则在提交后会自动选中所有其他复选框。

所以如果有人可以帮助我，我真的很感激。多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:07:50.793

也许您可以这样做，通过在脚本开始时为复选框和值定义默认值。然后用 POSTed 的值更改它们（如果有设置）。

```
<?php
//Setup Variable Defaults, if POST dont change them then there no complicated ifelse's
$filter_a=null;
$checkbox_filter_a='<input type="checkbox" name="checkbox_filter_a" value="1"/>';
$filter_b=null;
$checkbox_filter_b='<input type="checkbox" name="checkbox_filter_b" value="1"/>';
$filter_c=null;
$checkbox_filter_c='<input type="checkbox" name="checkbox_filter_c" value="1"/>';

//Check for post
if($_SERVER['REQUEST_METHOD'] == 'POST'){
    //If the check box is not checked checkbox_filter_a will fail this part
    // so $filter_a will still be null 
    if(isset($_POST['filter_a']) && isset($_POST['checkbox_filter_a'])){
        $filter_a = trim($_POST['filter_a']);
        $checkbox_filter_a ='<input type="checkbox" name="checkbox_filter_a" value="1" checked/>';
    }

    if(isset($_POST['filter_b']) && isset($_POST['checkbox_filter_b'])){
        $filter_b = trim($_POST['filter_b']);
        $checkbox_filter_b = '<input type="checkbox" name="checkbox_filter_b" value="1" checked/>';
    }

    if(isset($_POST['filter_c']) && isset($_POST['checkbox_filter_c'])){
        $filter_c = trim($_POST['filter_c']);
        $checkbox_filter_c = '<input type="checkbox" name="checkbox_filter_c" value="1" checked/>';
    }

}

echo <<<FORM
 <form method="POST" action="">
   <p>Inputfield a: <input type="text" name="filter_a" value="$filter_a" size="20"> filter for a: on/off:$checkbox_filter_a</p>
   <p>Inputfield b: <input type="text" name="filter_b" value="$filter_b" size="20"> filter for b: on/off:$checkbox_filter_b</p>
   <p>Inputfield c: <input type="text" name="filter_c" value="$filter_c" size="20"> filter for c: on/off:$checkbox_filter_c</p>
   <p><input type="submit" value="Submit"></p>
 </form>
FORM;

//now here all you have to do is see if these values are not null and build your query
echo $filter_a.'<br />';
echo $filter_b.'<br />';
echo $filter_c.'<br />';
?> 
```

# java - 文件阅读器网络服务

> ID：10327797
> 
> 赞同：2
> 
> 时间：2012-04-26T05:39:56.563
> 
> 标签：java, rest, apache-poi, mpxj

我想创建一个读取 Excel、MPP 文件并为我的应用程序提供 bean 列表的 restfull web 服务。目前我们使用 jxl 进行 excel 阅读，使用 mpxj 进行 mpp。有什么方法可以概括文件读取服务以便可以重用它。

# oracle - 无法使用绑定变量时Oracle中的Sql注入防御

> ID：10327801
> 
> 赞同：3
> 
> 时间：2012-04-26T05:40:30.777
> 
> 标签：oracle, sql-injection

在我们不能使用绑定变量的情况下，例如当我们的动态查询必须执行 ddl 语句时，以下防御列表是否足够？

1.  永远不要在动态查询中使用匿名块，这样execute immediate 只能执行一条语句。这可以阻止代码注入攻击。

2.  使用替换功能转义所有单引号。这会阻止语句修改攻击。

除了单引号之外，还有哪些字符可以用于引用以及如何转义它们？

如何防止通过 AND、UNION 等攻击修改语句？

如何防止函数调用攻击，使用户无法调用内置函数？每个用户都有调用这些函数的权利，调用这些函数会导致拒绝服务和缓冲区溢出攻击。如何从中拯救？

我更喜欢允许 gui 采用单引号字符意味着不在 Web 应用程序的客户端和服务器端验证中检查它。这是为了允许像 O'Brian 这样的名字。在数据库级别，就在执行立即语句之前转义单引号。你知道有什么更好的方法吗？

解决上面未列出的任何其他漏洞。

注意：我已经在这个站点上解决了大约十几个与 SQL 注入相关的问题。我仍然发布了这个问题，因为：

1.  它特定于oracle。我在这个网站上找到的关于该主题的大多数问题都与 MySQL、SQL Server 等有关。

2.  它特定于无法使用绑定变量的情况。如果可以使用绑定变量，那就足够了，不需要其他防御。

3.  最好在一个地方列出所有需要的方法。

4.  一些高级的 SQL 注入技术（如函数调用）没有详细讨论，我找不到任何解决方案。

编辑：

以下可能是一个可行的解决方案。

我想我有一个解决办法。它除了使用通常的防御措施，如静态语句、绑定变量等。它在不能使用通常的防御措施的情况下特别有用。请注意，唯一不能使用绑定变量的情况是 ddl 语句。对于这样的陈述：

1.  使用静态 sql 验证数据库对象的存在。这解决了一半的问题。

2.  另一半与我们要放入数据库对象的新值有关。例如修改用户密码时：前半部分为用户名，后半部分为密码。应该在前端加密新值并将加密值保存在数据库中。加密为sql代码的加密值不会对数据库造成任何损害（例如不能调用任何函数）。

3.  永远不要因为各种原因更改用户输入，例如混淆用户，例如密码，该值在某些情况下可能是有效的，例如它可以是有效的 html 等。这意味着让 [']、[\']、[# ] 通过所有验证不变。它是静态 SQL 或应该处理它的加密。

是否存在我们无法加密新值的情况？

# blackberry - 黑莓圆形文本框

> ID：10327802
> 
> 赞同：-1
> 
> 时间：2012-04-26T05:40:32.397
> 
> 标签：blackberry, blackberry-eclipse-plugin, blackberry-jde

嗨，我想在黑莓中创建一个登录表单，我已经从用户那里获取了用户名和密码，但我希望用户名和密码出现在圆形矩形文本框中。

但我不能画一个圆角矩形有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T00:57:32.733

在 BBOS 4.6 及更高版本上，您可以创建一个`net.rim.device.api.ui.decor.Border`对象并将其传递给字段的`setBorder()`方法。查看`net.rim.device.api.ui.decor.BorderFactory`该类以帮助您构造`Border`对象，例如使用其`createRoundedBorder()`方法之一。

# python - 如何在 Mac 上的 Python 脚本中创建硬链接？

> ID：10327804
> 
> 赞同：0
> 
> 时间：2012-04-26T05:40:37.630
> 
> 标签：python, macos, unix, filesystems, osx-lion

我假设调用了一个 UNIX shell，但我想知道 Python 中是否还有其他选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T13:29:37.507

我的猜测也是，这是一个权限问题。对我（OS X 10.7.3）来说，这有效：

```
$ ls
slask.py  system.py  system1.gif  system2.gif

$ python
>>> from os import *
>>> link('system2.gif', 'mylink.gif')
>>> exit()

$ ls
mylink.gif  slask.py  system.py  system1.gif  system2.gif 
```

为了清楚起见，“硬链接通常不会引用目录，也可能不会跨越文件系统。”

这是因为硬链接目录可能会产生无限循环。所以需要使用 os.mkdir 创建目录。然后可以将文件硬链接到该新目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:45:12.753

`os.link`声称可以在所有 Unix 平台上工作。它有任何 OS X 特定的问题吗？

# jquery - jquery中的fadeout和fadeIn回调函数

> ID：10327806
> 
> 赞同：1
> 
> 时间：2012-04-26T05:40:39.707
> 
> 标签：jquery, html

我有三个 div 第一个，第二个和第三个值我想先淡出它们，然后用延迟功能淡入现在我希望当我的最后一个 div 淡入时，我的所有三个 div 都淡出。但我的代码不能正常工作

```
<script type="text/javascript">

$(function(){

    $('.fileianN').fadeOut().delay(1000).fadeIn(1000);
        $('.fileianLY').fadeOut().delay(2000).fadeIn(1000);
            $('.fiuleHg').fadeOut().delay(3000).fadeIn(1000);

    })

</script>

<div class="duanNt">
<div class="fileianN">first</div>
<div class="fileianLY">second</div>
<div class="fiuleHg">third</div>

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T05:52:50.387

### *[jsBin 演示](http://jsbin.com/axiwuz/4/edit)*

```
$.when(

    $('.duanNt').children().each(function(idx,el) {
        $(el).delay(idx*600).fadeTo(700,1);
    })

).done(function() {
    $('.duanNt').fadeTo(300,0);
}); 
```

[http://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)
[http://api.jquery.com/deferred.done/](http://api.jquery.com/deferred.done/)

PS如果你不想隐藏`.duanNt`它自己但只有它是孩子而不是使用：`$('.duanNt > div').fadeTo(300,0);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:53:46.730

基本上你可以使用以下代码；

```
<script type="text/javascript">

$(function(){

    $('.fileianN').fadeOut().delay(1000).fadeIn(1000);
        $('.fileianLY').fadeOut().delay(2000).fadeIn(1000);
            $('.fiuleHg').fadeOut().delay(3000).fadeIn(1000);
                $('.duanNt').delay(5000).fadeOut();

    })

</script>

<div class="duanNt">
<div class="fileianN">first</div>
<div class="fileianLY">second</div>
<div class="fiuleHg">third</div>

</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T05:57:54.213

您还可以使用 promise 方法来确保动画完成。

```
$('.fileianN').fadeOut().delay(1000).fadeIn(1000);
$('.fileianN').promise().done ( function () { $('.fileianLY').fadeOut().delay(2000).fadeIn(1000) ; } );
$('.fileianLY').promise().done ( function () { $('.fiuleHg').fadeOut().delay(3000).fadeIn(1000); } ); 
```

现在正如您所说，您希望所有 div 在最后一个淡入时淡出。所以，

```
$('.fiuleHg').promise().done ( function () { $ ('.fileianN, .fileianLY, .fiuleHg' ).fadOut(); } ); 
```

您也可以`duanNt`像我一样淡出主 div 而不是全部三个。PS`.promise()`方法来自 jQuery 1.6

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T06:04:24.540

```
$.fn.delay = function(duration) {
    $(this).animate({ dummy: 1 }, duration);
    return this;
};

$(function(){

    $('.fileianN').fadeOut().delay(1000).fadeIn(1000);
        $('.fileianLY').fadeOut().delay(2000).fadeIn(1000);
            $('.fiuleHg').fadeOut().delay(3000).fadeIn(1000);
                $('.duanNt').delay(5000).fadeOut();

    }) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T06:05:02.420

已经有***回调函数***了。您可以使用哪个

```
$("element").fadeOut(1000, function() {
   //..callback
}); 
```

您的用法可能与此类似

```
$('.fileianN').fadeOut().delay(1000).fadeIn(1000, function() {   
     $('.fileianLY').fadeOut().delay(2000).fadeIn(1000, function() {
            $('.fiuleHg').fadeOut().delay(3000).fadeIn(1000);
     });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T05:45:46.203

您可以使用 oncomplete 回调函数。

只是一个例子：

```
<script type="text/javascript"> 
$(function(){ 
    $('.fileianN').fadeOut().delay(1000).fadeIn(1000, function() {
        $('.fileianLY').fadeOut().delay(1000).fadeIn(1000, function() {
            $('.fiuleHg').fadeOut().delay(1000).fadeIn(1000); 
        }); 
    }); 
}) 
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T06:10:27.727

```
function fadeElements()
{
    var divs=$('.duanNt')​.​children();
    var i = 0;
    next();
    function next() {
        divs.eq(i++).fadeIn('1000');
        setTimeout(next, 500);
        if(i===divs.length) divs.delay(1000).fadeOut();
    };

}

fadeElements(); 
```

[**演示**](http://jsfiddle.net/feg3r/)

# html - 在画布上制作可拖动、可调整大小的图像

> ID：10327810
> 
> 赞同：3
> 
> 时间：2012-04-26T05:41:35.207
> 
> 标签：html, canvas, draggable

我正在阅读有关制作可拖动和可调整大小的矩形的教程 [http://simonsarris.com/blog/225-canvas-selecting-resizing-shape](http://simonsarris.com/blog/225-canvas-selecting-resizing-shape)

这是一个很好的，我想用图像创建一个类似的，这就是我所做的 [http://jsfiddle.net/LUhsK/2/](http://jsfiddle.net/LUhsK/2/)

我所做的只是更改脚本，而不是绘制一个正方形，而是在给定图像源、初始 X、初始 Y、宽度和高度的情况下绘制图像，但正如您所见，它不起作用。我真的找不到似乎是什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-31T09:25:35.610

如果我清楚地了解您要搜索的内容，我想它可以很容易地解决

```
droppedElement = ui.helper.clone();
droppedElement.resizable(); 
```

# c# - C# - 常量集合

> ID：10327811
> 
> 赞同：1
> 
> 时间：2012-04-26T05:41:35.207
> 
> 标签：c#, constants, header-files

在 Objective-C 中（也可能在 C 中）我可以有一个头文件，它可以包含从宏到常量的任何内容。并且任何导入该头文件的类（实际上是它所在的文件）都可以看到并使用其中声明的任何内容。在 C# 中没有类似的方法可以做到这一点吗？到目前为止，我还没有发现任何有用的东西。我可以在 C# 中做的是拥有一组静态类，每个类中都有常量字段。但是当我想访问这些常量时，我​​别无他法，只能说 Classname.ConstantName。那个 Classname 部分真的很不方便。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T05:46:36.427

你可以通过为你的类名指定一个别名来让你的生活更轻松一些：

```
using G = MyNamespace.MyClassContainingGlobalConstants;

...

var x = G.MyConstant; 
```

除此之外，我不知道有任何 C# 功能允许您在没有某种类名的情况下访问静态类成员。（顺便说一句，VB.NET 有`Module`s 用于此目的。）

# javascript - 淘汰赛 JS：observableArray 始终保持为空

> ID：10327819
> 
> 赞同：0
> 
> 时间：2012-04-26T05:42:36.663
> 
> 标签：javascript, jquery, knockout.js

我的目标是生成一个可排序元素的列表，这些元素将通过淘汰赛进行管理。但是，出于某种我不知道的原因，我创建的 observableArray 将始终保持为空。我觉得好像我在这里遗漏了一些非常明显的东西......

```
<script type="text/javascript">
//var initialData = @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model));
//console.log(initialData);

var test = [{ Position: 1 },
            { Position: 2 },
            { Position: 3 },
            { Position: 4 },
            { Position: 5 }];

var viewModel = {};
    viewModel.Offers = ko.observableArray(test);

    viewModel.addOffer = function() {
        this.Offers.push({ Position : 5});
        console.log(this);
    };

$(function () {
    ko.applyBindings(viewModel, document.body);

    $( "#sortable" ).sortable().disableSelection();
}); 
```

[JSFiddle 的问题](http://jsfiddle.net/wycleffsean/mCUhU/6/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:12:53.397

您需要将模板名称用单引号括起来：

```
<ul id="sortable" 
    data-bind="template: {name: 'offerTemplate', foreach: Offers}"> 
```

这是工作[JSFiddle](http://jsfiddle.net/mCUhU/7/)。

# iphone - 我想在 ios 中从矩形视图转换为曲线视图

> ID：10327828
> 
> 赞同：0
> 
> 时间：2012-04-26T05:43:33.387
> 
> 标签：iphone, ios, view, transform, curve

我想在视图中添加标签。不是矩形标签而是曲线标签。

中点以一定幅度下降。像你'。如何？？我认为使用 CGContextAddCurveToPoint。但是怎么用？在ios中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:49:23.587

您不能使用 UILabel 执行此操作，但如果您将要绘制的字符串绘制成曲线，则可以绘制每个字母，然后使用此相关问题中的技术更改绘图的角度：

[如何以一定角度绘制 NSString？](https://stackoverflow.com/questions/930313/how-do-i-draw-an-nsstring-at-an-angle)

（即改变每个字母后的角度和位置）。

# forms - Drupal 7 Webfrom 模块中的 Webform 组件选项卡在哪里？

> ID：10327830
> 
> 赞同：0
> 
> 时间：2012-04-26T05:43:47.513
> 
> 标签：forms, module, drupal-7, components, drupal-webform

我想在 drupal 7 中制作一个自定义表单，其中应包含名字、姓氏、出生日期、电话、电子邮件和其他字段等字段。我下载了 webform 模块，安装并启用它。

我在视频教程中看到有一个表单组件选项卡，我们可以从中创建表单字段。但是当我尝试创建表单时，它不会显示表单组件选项卡。我到处都能找到它，但没有表单组件选项卡。任何人都可以帮助我，以便我可以创建我的自定义表单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T14:07:13.847

我今天遇到了同样的问题。在 Webform 下没有看到包含 [ ***Form Components** * **E-mails** * **Form Settings ] 的子选项卡。**

当您的主题有点错误或 Drupal 7 链接覆盖隐藏了它们时，就会发生这种情况。

解决方案：

*   尝试通过禁用覆盖（在模块部分）来使用 webform，或者
*   将您的主题更改为仅用于管理区域的 Garland 或 Bartik。

希望这可以帮助！

# svn - TeamCity Build Agent 无法创建构建签出目录

> ID：10327831
> 
> 赞同：2
> 
> 时间：2012-04-26T05:44:11.833
> 
> 标签：svn, continuous-integration, teamcity

我正在使用 TeamCity 从 SVN 构建项目。

每次我尝试构建我的项目时，它总是向我显示以下消息：构建错误 [13:11:57]: Agent failed to create build checkout directory at C:\TeamCity\buildAgent\work\https:\192.168.10.66 \svn\WMSHelperCE\trunk。请检查代理是否具有必要的权限并且磁盘上有足够的可用空间。

但是，我一直在互联网上寻找答案，但仍然无法正常工作。任何人都可以告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:20:47.793

看起来您正试图将构建代理设置为在`C:\TeamCity\buildAgent\work\https:\192.168.10.66\svn\WMSHelperCE\trunk`损坏了路径的远程计算机 ( ) 上完成其工作。我不知道这是否真的可行，您是否有理由想要这样做，因为您不想与其他构建代理共享构建代理工作文件夹。Teamcity 将指示构建代理提取源代码，或者根据您的设置将其发送给它们。

要解决这个问题，您需要编辑[构建代理属性文件](http://confluence.jetbrains.net/display/TCD7/Build+Agent+Configuration)并将属性设置为本地路径，它可以是相对的或绝对的`workDir`。`tempDir`

**编辑**

再次查看您的路径后，您似乎正在尝试将工作路径设置为您的项目存储库。这不是应该做的。您构建需要从存储库中提取项目，并且构建是在构建代理上本地完成的。查看有关设置[构建版本控制](http://confluence.jetbrains.net/display/TCD7/Configuring+VCS+Settings)的帮助页面。

# magento - 网格视图中每行的产品 magento go

> ID：10327836
> 
> 赞同：4
> 
> 时间：2012-04-26T05:44:33.463
> 
> 标签：magento, categories, magento-go

我正在使用**magento go。** 我创建了一个类别并为其分配了 8 个产品，**我想在每行中显示 4 个产品，**但它显示 5 个产品。

请给我解决方案。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T07:32:31.643

将此代码放入您要显示 4 个产品的类别中，只需从管理员打开您的类别并打开自定义设计选项卡，然后将以下代码放入自定义布局更新字段中。

```
<reference name="product_list">
<action method="setColumnCount"><columns>4</columns></action>
</reference> 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:03:21.693

**转到这个路径：magento_folder/app/design/frontend/mytheme(your_package)/neo(your_theme)/layout/catalog.xml
写这个：`<action method="setColumnCount"><count>4</count></action>`**

```
<catalog_category_default translate="label">
<reference name="content">
<block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
<action method="setColumnCount"><count>4</count></action>
" "
" "
" "
</block> 
```

**然后在下面的同一个 catalog.xml 文件中添加相同的代码（在 :`<catalog_category_layered translate="label">`标签下），如下所示：**

```
<catalog_category_layered translate="label">
<reference name="content">
<block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
<action method="setColumnCount"><count>4</count></action>
" "
" "
" "
</block> 
```

**希望这可以帮助你**

# c# - 使用 .dll 控件作为 ActiveX 控件来维护配置文件

> ID：10327844
> 
> 赞同：1
> 
> 时间：2012-04-26T05:45:40.650
> 
> 标签：c#, activex-exe

我需要使用 .NET 创建一个 ActiveX 控件，并且我想将它托管在 C++ 应用程序中。我使用 Enterprise Library 5.0 创建了 ActiveX 控件和依赖项控件之一。现在我需要维护其各自的配置文件。

当这个控件托管在一个简单的 Windows 窗体中时，它会在一个 win forms app.config 文件中维护所有这些配置设置。

现在，当我尝试在 C++ 中托管这个 ActiveX .dll 文件时，我的问题出现了，我需要在哪里以及如何维护这些配置？

# java - 为什么Java不允许方法参数的C#“out”特性

> ID：10327852
> 
> 赞同：2
> 
> 时间：2012-04-26T05:46:51.083
> 
> 标签：java, pass-by-reference, out

> **可能重复：**
> [为什么在java中无法通过引用传递](https://stackoverflow.com/questions/10161282/why-there-is-no-way-to-pass-by-reference-in-java)

谁能告诉我为什么 Java 在处理方法参数以通过引用传递时不提供 C#“out”类型功能？我的意思是为什么它不允许我们传递像布尔值这样的原始数据类型，例如，通过引用传递。我也尝试过包装类 java.lang.Boolean 但仍然无济于事。它仍然不允许我通过引用传递变量。
即使在版本 7 中，Java 仍然没有为我们提供这个有什么具体原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T05:48:19.763

Java只有按值传递。这是设计语言时做出的决定。

*   [为什么java不支持像C++这样的引用传递](https://stackoverflow.com/questions/5298421/why-doesnt-java-support-pass-by-reference-like-c)

> 只有一种参数传递模式——按值传递——这有助于保持简单。
> 
> -- James Gosling 等人，Java 编程语言，第 4 版

如果你愿意，你可以将你的布尔值作为一个成员放在一个可变类中（你不能使用`Boolean`，因为它是不可变的），并传递一个对该类的引用。Apache Commons 甚至有一个[`MutableBoolean`](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/mutable/MutableBoolean.html)可以使用的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:59:40.483

只有语言设计团队可以告诉你为什么，但我相信不允许“out”参数的原因可能是这样的：**如果你想要一个计算两件事的方法，你真正想要的是两种方法，或者一种方法返回一个对象。**据说这会带来更好的设计和更可维护的代码。

请注意，如果您真的想要“输出参数”，您可以轻松使用一个元素的数组。例如：

```
void div(int a, int b, int[] q, int[] r) {
    if (q != null) q[0] = a/b;
    if (r != null) r[0] = a%b;
}

// elsewhere:
int[] quotient = new int[1];
int[] remainder = new int[1];
div(4, 3, quotient, remainder); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T05:59:50.797

这只是我的观点，但我觉得 Java 的设计者相信他们可以通过消除特性来简化编程，而不是让它们更直观和更容易处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T06:24:40.927

简短的回答是，这是一个设计决策，通过引用传递您无能为力，而按值传递对象引用则无法做到。

至于您的特定问题，有两种解决方案：

一个可变的包装类：

```
final class BooleanRef {
    public boolean value;
} 
```

并将其用作：

```
// Function
void changeTheBoolean( BooleanRef b ){
    b.value = true;
}

// Call:
BooleanRef b = new BooleanRef();
changeTheBoolean( b ); 
```

或者，（更hackish但更轻量级）包装在一个数组中：

```
// Function
void changeTheBoolean( boolean[] b ){
    b[0] = true;
}

// Call:
boolean[] b = new boolean[1];
changeTheBoolean( b ); 
```

# java - OOP：哪个类应该拥有一个方法？

> ID：10327857
> 
> 赞同：33
> 
> 时间：2012-04-26T05:47:50.780
> 
> 标签：java, c++, oop, class-design, uml

我无法理解类与它们的方法之间的关系。方法是对象*所做*的事情，还是对它所做的*事情*？或者这完全是一个不同的概念？

具体来说，在图书馆的软件系统中，该`borrow()`方法应该属于代表图书馆读者的类，还是代表读者借阅的项目的类？我的直觉是它应该读起来像`patron.borrow(copy)`，像英语句子结构，`subject.verb(object)`; 但是我的老师说那是错误的，我不明白他为什么会`borrow()`属于这个`Copy`班级（而且他并没有真正解释得很好）。我不是在寻找理由，但是有人可以解释正确的关系吗？

编辑：这个问题被关闭为“离题”。我不明白。软件设计问题不适合这个网站吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T05:56:07.290

主观的:)但老实说，我会使用[信息专家模式](http://en.wikipedia.org/wiki/GRASP_%28object-oriented_design%29#Information_Expert)并说类似

```
library.lend(item, patron) 
```

图书馆包含有关其拥有的项目的信息（可能在其目录中）。
图书馆将项目借给读者（它知道是因为它注册了它们）

不确定您的讲师如何看待这一点，但这是对您的场景有意义的“抽象”级别（模仿现实世界实体的软件对象）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-26T05:59:59.890

您不应将 OOP 的概念与 Java 或 C++ 之类的特定化身相混淆。

这个限制“方法是对象的属性”不是 OOP 思想的一部分，而只是某些实现的一部分，正如您发现的那样，它不能很好地扩展。

“整数”对象有多少种方法？什么是更合乎逻辑的......`myfile.write(myint)`或`myint.write(myfile)`？对此确实没有很好的通用答案。将方法作为单个对象的一部分的想法是一种特殊情况，有时将问题与此解决方案相适应所需的弯曲可能会变得很明显，甚至接近于展示。只有当一个方法除了正在处理的对象之外没有参数时，答案才是完全可以接受的：只有在涉及单一类型时，单一分派才是一个完美的答案。

在其他语言中，对象和方法之间是分开的，例如，您有文件对象、整数对象和一个`write(myfile, myint)`描述需要操作时要做什么的方法……而这个方法既不是文件的一部分，也不是文件的一部分。的整数。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-26T07:35:10.243

先说一些通用词。

软件构建不是应该受英语语言规则或“美”或其他什么约束的东西，它是工程学科。想想你的设计是否解决了问题，是否可维护，是否可测试，是否可以并行开发等等。如果您想要更正式的内容，请查看 DL Parnas 的“关于将系统分解为模块时使用的标准”。

至于您的图书馆示例。想象一下你在图书馆外面有一个副本，那么它应该有`borrow`方法吗？借款如何登记？您对负责数据存储的 Copy 或 Patron 类是否满意？`borrow`放入图书馆类看起来更合适。职责将被明确划分，您不需要了解太多关于借用来实现 Copy 和 Patron 的知识，并且您不需要太多关于它们的详细信息来实现 Library。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-26T06:03:02.827

正如@Ryan Fernandes 所说，借/借操作不能与赞助人或书籍一起进行。它必须与某个知道图书馆所有书籍和顾客状态的班级在一起。例如，是否有针对一本书的未决保留？有多少份可用？这位赞助人是否支付了所有费用？他有资格读这本书吗？所以通常这应该在 Library 或 LibraryService 类中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-26T06:17:17.587

从类公开的公共方法是可以在实体上执行的任务。这样，该类将仅封装其行为。

例如：如果我说

> 计算机.TurnOn()

该方法仅适用于计算机系统。

相反，如果我说，

> SomeOne.TurnonComputer()

某人现在将有责任打开计算机（设置计算机的相关属性），这意味着我们没有满足封装和分散类属性的概念。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-26T07:44:18.563

OOP 的重点是创建多态函数，这些函数在每个实现中处理一组定义的数据，这些数据服从特定的不变量。

因此，改变对象的方法应该在该对象的类中定义。纯函数式代码存在于何处并不重要，但它可能应该存在于其输入的类型（如果它采用单个输入）或其输出上。

在您的示例中，如果`borrow`更改 中的数据`copy`，则它应该存在于那里。但是，如果您通过将图书保存在特定馆藏（在赞助人中，或在图书馆的馆藏中）来模拟图书的外借状态，那么`borrow`设置持有者类会更有意义。但是，后一种设计存在副本可能位于多个集合中的风险，因此您还需要在副本上放置一些信息（和相应的方法）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-26T05:53:25.183

不太确定确切的理由，但你可以这样想，如果多个病人去看医生，只有医生知道什么时候打电话给下一个病人，所以下一个方法将是医生责任的一部分，尽管很容易认为下一个应该是患者的责任，因为他必须下一个，但是当图书馆的书籍要发行时，它应该是书籍类型而不是赞助人的责任，因为书籍（资源）知道什么时候将是免费的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-26T06:12:16.370

> 方法是对象所做的事情，还是对它所做的事情？或者这完全是一个不同的概念？

让我先澄清一下类和对象。`Class`通常用于表示特定类别。像

1.  ***不是*法拉利或保时捷的**汽车****
***   **水果** *不是*香蕉或苹果**

 **所以，开的是法拉利，吃的是香蕉。*不是他们的班级*

### 它始终是具有属性和行为的对象。

> ***甚至专门去你的案子。***

`borrow()`方法是由 a`person`的对象在`book`其记录由`library system`自身的另一个对象保存的对象上完成的动作/行为。

对我来说，以 OO 方式表示这一点的好方法就像

```
libray.borrow(new book('book title'), new person('starx')); 
```

* * *

只是为了好玩，你怎么看这个

```
person starx = new person('starx');
book title1 = new book('title1');
library libraryname = new library('libraryname');
libraryname.addBook(title1);

if(starx.request(title1, libraryname)) {
     starx.take(library.lend(title1, starx));
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-26T06:03:01.450

我想它可以去任何一种方式。没有硬性规定。这个想法是逻辑上有意义的组功能。对我来说，`Patron#borrow(BookCopy)`与`BookCopy#borrow(Patron)`. 或者你可能有一个类`LibManager.borrow(BookCopy, Patron)`。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-26T06:04:50.110

你的导师是对的。好吧，事实上，他错了。我不知道。

我的观点是，对于这样的问题，通常没有一种或另一种固定的通用答案。这在很大程度上取决于在您的特定情况下最有效的方法。选择最容易编码的东西——这将是最容易维护的。而且，通过“最容易编码”，我建议还考虑类的预期用户（不仅仅是你的`Library`,`Copy`和`Person`类）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-04-26T08:04:46.963

我今天正是在考虑这个问题。我得出了这个结论：

在适当的上下文中更有意义。**

# javascript - 空输入类型文件在 IE 中不起作用

> ID：10327860
> 
> 赞同：3
> 
> 时间：2012-04-26T05:48:07.783
> 
> 标签：javascript, jquery

我写了这个简单的javascript代码：

```
$("input[type='file']").attr("value", ""); 
```

它适用于 Firefox 和 Chrome，但不适用于 IE（我在 IE9 中尝试过）

清空输入类型文件值的好方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T06:17:19.803

输入类型=文件有一些限制

你可以[在这里阅读](http://blogs.msdn.com/b/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx)

这似乎适用于 IE8、IE9

```
$("input[type='file']").replaceWith($("input[type='file']").clone(true)); 
```

为了在 IE8 中进行测试，我将开发人员工具中的兼容模式更改为 IE8

编辑：

至于许多 IE hack，我认为这更好

```
 if($.browser.msie){
        $("input[type='file']").replaceWith($("input[type='file']").clone(true));
    } else {
        $("input[type='file']").val('');
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:51:03.350

[jQuery 文档说](http://api.jquery.com/attr/)：

> 从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。此外，.attr() 不应用于普通对象、数组、窗口或文档。要检索和更改 DOM 属性，请使用 .prop() 方法。

使用[.prop()](http://api.jquery.com/prop/)

# java - 如何在 SUSE(Linux) 上设置或安装 jai 插件？

> ID：10327862
> 
> 赞同：1
> 
> 时间：2012-04-26T05:48:17.907
> 
> 标签：java, netbeans, platform, opensuse, jai

我更新鲜，在 Java SE 中使用 SWING 技术在 Java SE 中制作桌面应用程序。在这个应用程序中，我们使用 JAI 库，我在寡妇中制作了应用程序，然后想在 MAC 和 Linux 上运行。但是在此之前，我必须设置或安装 JAI 插件，例如 jai_imageio-1_1-lib-linux-i586.tar、jai_imageio-1_1-lib-linux-i586-jdk 和 jai_imageio-1_1-lib-linux-i586-jre。但我在 SUSE 上设置或安装此插件时出错。我也参考链接：[在此处输入链接描述](http://download.java.net/media/jai-imageio/builds/release/1.1/INSTALL-jai_imageio.html)

但我无法理解，如何设置第一个 CLASSPATH ？所以，任何人对此有想法，然后请建议我或与我分享你的想法。提前感谢您的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:06:45.143

我不熟悉 JAI，但作为一个提示 - 如果它也作为 jar 提供，您可以将它添加到 NetBeans jar 库中，这样可以解决编译问题。

# ruby - 信任刚刚返回的对象？

> ID：10327864
> 
> 赞同：0
> 
> 时间：2012-04-26T05:48:37.540
> 
> 标签：ruby, self

下面的“疯狂”有实际应用吗？

似乎这是一种`ted`总是能够让自己回到这个世界的方式，人们会认为他们正在与`ted`他们期望以某种方式行事并达到一定年龄的人交谈......但他并没有按照这种方式行事他描绘自己，并向某人谎报他的年龄。

当一个对象被返回并且您检查该对象代表什么以及能够做什么时，什么“诡计”是可能的......但实际上，该对象在返回之前以另一种方式行事并且能够做其他事情。

```
class Person

  def age
    21
  end

  def who_am_i?
    puts "I am #{self} / #{object_id} and I am #{age} years old"
    self
  end
end

ted = Person.new

def ted.singleton_who_am_i?       

    class << self
      def age
        0
      end
    end

    puts "I am #{self} / #{object_id} and I am #{age} years old"
    self
end

puts ted.who_am_i? == ted.singleton_who_am_i?

>> I am #<Person:0x100138340> / 2148123040 and I am 21 years old
>> I am #<Person:0x100138340> / 2148123040 and I am 0 years old
>> true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:08:04.083

[http://andrzejonsoftware.blogspot.ca/2011/02/dci-and-rails.html](http://andrzejonsoftware.blogspot.ca/2011/02/dci-and-rails.html)

在 DCI 中，您的数据模型会根据使用它的上下文获得不同类型的行为。通常它是用 object.extend 完成的，但这几乎就是你在上面所做的——利用元类。

另一个例子（可能也是为什么事情会这样）是类在 ruby​​ 中的工作方式。如果你说

```
class Foo
end 
```

这和说的一样

```
Foo = Class.new
end 
```

这意味着您正在做的是将类 Class 的新实例分配给常量。当您在该类上定义一个方法时，您不希望它应用于类 Class 的所有实例，您只希望它在您定义的类上。所以当你说

```
class Foo
  def self.bar
  end
end 
```

就是这么说的

```
class Foo
end

def Foo.bar
end 
```

这与您在问题中所说的完全相同

（抱歉，如果不清楚）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:10:20.363

Ruby 是一种非常动态的语言，可让您在运行时将代码注入对象。它有一些很好的用途，但它也会使代码很难调试和理解。

查询对象以修改该对象的方法完全违反直觉。没有人会期望调用 who_am_i 来修改对象。

另一方面，替换这样的方法可以使单元测试类变得非常简单。

如果您想测试该类在不同年龄段的行为方式，您可以在测试之前注入类似的代码。

# html - 如何将 div 自动对齐到新列

> ID：10327867
> 
> 赞同：3
> 
> 时间：2012-04-26T05:48:58.343
> 
> 标签：html, css

我有一个要显示的图标列表。我正在使用以下布局来执行此操作：

```
<div class="icons">
<div class="icon1">
img src="someimage" <p>Some test </p>   
</div>
.
.
.
</div> 
```

这是我正在使用的 CSS：

```
.icons{
    margin-top:5px; 
    margin-left:5px;    
    left:0;         
}
.icon1{     
    line-height:15px;
    margin-top:8px;     
    width:75px;
} 
```

我该如何修改它，以便如果我`div`在类中添加更多 s，`icon1`它们将在`max-height`到达时在新列中对齐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:46:03.717

您可以使用 CSS ['multi-columns'](http://www.css3.info/preview/multi-column-layout/)来做到这一点，

[演示](http://dabblet.com/gist/3739312)

但它仍然是[候选推荐](http://www.w3.org/TR/css3-multicol/)，因此即使您可以使用供应商前缀使其在最新版本的 Firefox、Chrome 和 Opera 上运行（尽管并非没有一些怪癖），[支持](http://caniuse.com/#feat=multicolumn)仍然*非常少。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:42:31.690

我不确定 float:left 是否会起作用。根据我的经验，这会导致并排添加 div 标签，一旦它们到达父 div 的末尾，下一个标签将被添加到第一列的底部。他需要相反的@Jack

我建议使用 jquery 检查您的 div 标签的高度是否超过父 div。如果他们是然后添加一个新的 div 并开始将您的 image-div 标签附加到新的 div 与 style="float:left"。因此，如果您的初始 DOM 包含

```
< div class="icons" > < /div > 
```

添加一个元素应该将 DOM 更改为

```
<div class="icons" >
    <div class ="column" style="float:left"> 
       <div class="icon1" > <img src="" height="" width="" /> </div>
    </div>
</div> 
```

添加另一个元素应将其更改为

```
<div class="icons" >
    <div class ="column" style="float:left"> 
       <div class="icon1" > <img src="" height="" width="" /> </div>
       <div class="icon2" > <img src="" height="" width="" /> </div>
    </div>
</div> 
```

添加超过父 div 的第三个元素会将 DOM 更改为此

```
<div class="icons" >
    <div class ="column" style="float:left"> 
       <div class="icon1" > <img src="" height="" width="" /> </div>
       <div class="icon2" > <img src="" height="" width="" /> </div>
    </div>
    <div class ="column" style="float:left"> 
       <div class="icon3" > <img src="" height="" width="" /> </div>
    </div>
</div> 
```

# php - 国家动态 PHP 下拉菜单

> ID：10327873
> 
> 赞同：3
> 
> 时间：2012-04-26T05:49:34.647
> 
> 标签：php, mysql, html, database, drop-down-menu

好的，所以我有一个名为 Country 的表，它看起来像这样：

```
---------------------------
|Country      |    Code   |
---------------------------
|Afganastan   |     AF    |
|ÅLAND ISLANDS|     AX    |
|  etc.       |     etc.  |
--------------------------- 
```

我想做的是创建一个动态菜单，用户在其中选择一个国家，并且它本身被存储为一个值，我可以在用户点击提交后调用该值。

我确实在这里尝试了一些东西，但我不确定它在做什么，因为我对 PHP 和 HTML 仍然很陌生，以至于我只是输入一些东西来看看会发生什么。

无论如何，我真的被卡住了，我尝试使用谷歌和这个网站中的搜索功能，但我发现没有任何东西对我有用......

我试过的代码是这样的：

```
<select>
    <?php
        $result = mysql_query('SELECT Country FROM Countries');

        echo '<select name="country">';

        while ($row = mysql_fetch_array($result))
        {
           echo '<option value="'.$row['id'].'">'.$row['name'].'</option>';
        }

        echo '</select>';
    ?>

   </select> 
```

结果应该看起来像一个下拉菜单，其中包含数据库中的国家/地区列表。但这不起作用，只是在下拉列表中显示：

```
.$row['name'] 
```

这与我想要的完全不同，因为那甚至不是一个国家。当我删除那部分代码时，用户没有选项可供选择，菜单为空。

**编辑** 我的代码到目前为止仍然不起作用：

```
<select name = 'country'>
    <?php

    include ("account.php");
    include ("connect.php");

        $result = mysql_query('SELECT Code , Country FROM Countries');
        while ($row = mysql_fetch_array($result))
            {?>

            <option value="<?php echo $row['Code']?>"><?php echo $row['Country']?></option>

            <?php}

    ?>

   </select> 
```

和`include ("account.php");`行`include ("connect.php");`允许我连接到我的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:57:36.250

你的代码应该是这样的

```
$host = "localhost";
$user = "root";
$pass = "yourpassword";
$db   = "databasename";

// This part sets up the connection to the 
// database (so you don't need to reopen the connection
// again on the same page).
$ms = @mysql_connect($host, $user, $pass);
if ( !$ms )
{
echo "Error connecting to database.\n";
}

// Then you need to make sure the database you want
// is selected.
@mysql_select_db($db);

<form method = "POST" action = "abc.php">
<select name = 'country'>
<?php
$result = mysql_query('SELECT id , name FROM Countries');
while ($row = mysql_fetch_array($result))
    {?>
       <option value="<?php echo $row['id']?>"><?php echo $row['name']?></option>
    <?php}
?>
<input type = "submit" value = "Submit">
</form> 
```

现在在 php 中使用这个

```
echo '<pre>';
print_r($_POST); 
```

你会看到用户选择了什么。检查你的设置可能有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:13:06.090

您的 SQL 语句仅从“Countries”表中选择了“Country”；因此，您无法使用 $row['id'] 和 $row['name']。
改用这个：

```
 echo '<select name="country">';

    while ($row = mysql_fetch_array($result))
    {
       echo '<option value="'.$row['Code'].'">'.$row['Country'].'</option>';
    }

    echo '</select>';
?> 
```

那应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T20:12:56.693

我发现了我遇到的问题。第一个是页面中有一个额外的选择标签，第二个是该文件被保存为 html 页面而不是 php 文件。感谢所有帮助我解决这个问题的人！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T06:59:48.653

如果您使用[mysql_fetch_array](http://php.net/manual/en/function.mysql-fetch-array.php)您可以使用字段名称或它们选择的索引从获取的行中读取它们。您还可以使用[sprintf](http://php.net/manual/en/function.sprintf.php)或[printf](http://php.net/manual/en/function.printf.php)函数将内容合并到一个字符串中，以帮助保持 HTML 片段中没有合并值所需的引号。

```
$result = mysql_query('SELECT Country, Code FROM Countries');
while ($row = mysql_fetch_array($result)) {
   printf('<option value="%1$s">%2$s</option>',
            $row['Code'], $row['Country']);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T06:50:49.953

```
 <select>
    <?php
    $result = mysql_query('SELECT Country FROM Countries');

    echo '<select name="country">';
    $row = mysql_fetch_array($result)
    for ($i=0; $i<count($row ); $i++)
    {
       echo '<option value="'.$row[$i]['id'].'">'.$row[$i]['name'].'</option>';
    }

    echo '</select>';
?> 
```

下一页使用 print_r($_POST); 或 var_dump($_REQUEST);

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T06:13:42.170

你的单引号和双引号把你弄乱了：

```
echo '<option value="'.$row['id'].'">'.$row['name'].'</option>'; 
```

应该：

```
echo "<option value=\"" . $row['id'] . "\">" . $row['name'] . "</option>"; 
```

您可以在脚本周围使用单引号，但是当您跳出它来执行时`$row['id']`，`$row['name']`您会遇到问题，因为它认为您正在跳回到引用的代码中...使用我上面的示例，以 double 开头/结尾-quotes 和转义所有需要显示的双引号，或转义`$row[\'id\']`and中的单引号`$row[\'name\']`

Thant应该可以帮助你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T06:13:43.503

首先，您的表没有列**id**。尝试更改您的查询，例如

```
SELECT Country, Code FROM Countries 
```

那么代码和html应该是这样的

```
<?php

$host = "localhost";
$user = "user";  //username
$pass = "pass";  //password
$db   = "db";    //database

$con = @mysql_connect($host, $user, $pass);
if ( !$con )
{
echo "Error connecting to database.\n";
}

@mysql_select_db($db);
?>

<select name="country">
<option value="0" selected="selected">Choose..</option>
<?php
//echo '<select name = \'country\'>';

    $result = mysql_query('SELECT Country, Code FROM Countries');

    while ($row = mysql_fetch_array($result))
    {
       echo '<option value="'.$row['Code'].'">'.$row['Country'].'</option>';
    }

?>
</select> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-26T05:55:06.363

试试这个代码

```
 <?php
        $result = mysql_query('SELECT * FROM Countries');
?>
<select name="country">
<?php 

        while ($row = mysql_fetch_array($result))
        {
?>
<option value="<?php echo $row['id']; ?>"><?php echo $row['name']; ?></option>
<?php
        }
?>
</select> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-09T13:55:25.837

试试我的代码，我正在使用它，它确实有效......只需更改值......

```
<?php
    include ('connect.php');

    $sql = "SELECT * FROM casestatusfile";
    $result = mysql_query($sql);

    echo "<select name = 'txtCaseStatus'/>";
    echo "<option value = ''>--- Select ---</option>";
    $casestatus = $_POST['txtCaseStatus'];
    $selected = 'selected = "selected" ';
    while ($row = mysql_fetch_array($result)) {
    echo "<option " .($row['CASESTATUSCODE'] == $casestatus? $selected:''). "value='". $row['CASESTATUSCODE'] ."'>" . $row['CASESTATUS'] ."</option>";
    }
    echo "</select>";
    ?> 
```

我确定这是有效的，因为那是我正在使用的那个....

# ipad - 如何在 iPad 上安装企业应用程序 (.ipa)

> ID：10327876
> 
> 赞同：4
> 
> 时间：2012-04-26T05:49:45.403
> 
> 标签：ipad, installation, enterprise, ipa

我有一个可以在 iPad 上以兼容模式运行的 Enterprise iPhone 应用程序（.ipa 文件）。最终用户可以使用什么应用程序在 iPad 上安装 .ipa - 除了无线方式？

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:07:02.657

只需通过邮件分发 IPA。最终用户可以将应用程序复制到她的 iTunes 上并进行同步，就像使用常规应用商店应用程序一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-27T13:52:45.693

有一些在线工具可以简化此共享过程，例如[https://abbashare.com](https://abbashare.com)或[https://diawi.com](https://diawi.com) 从 xcode 使用 adhoc 或内部配置文件创建一个 ipa 文件，并将此文件上传到这些站点。我更喜欢 abbashare，因为将文件保存在您的保管箱中，您可以随时删除它

# php - 我如何回显数学符号，如 alpha、beta、求和？

> ID：10327877
> 
> 赞同：0
> 
> 时间：2012-04-26T05:49:47.767
> 
> 标签：php, math, symbols

我需要显示数学函数公式。为此，我如何使用 php 回显这些数学符号？

假设我在网页上有一个文本框，如果有人在那里输入一些东西，那么特殊的 unicode 字符（如 alpha、beta、summation 或我的本地语言字符）将在那里输入，我可以用 php 做点什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T05:54:31.603

用 UTF-8 编码您的文档并插入适当的 Unicode 字符：α、β、∑...

```
echo "α, β, ∑"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:54:14.793

据我了解，是的。我所知道的最好的方法是，如果您回显它们的八进制或十六进制值。

IE..`echo ("Octal char = \062 and Hex char = \x32");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T05:54:55.760

您可以使用十六进制代码来输出符号。

[http://tlt.its.psu.edu/suggestions/international/bylanguage/greekchart.html](http://tlt.its.psu.edu/suggestions/international/bylanguage/greekchart.html)

[http://tlt.its.psu.edu/suggestions/international/bylanguage/mathchart.html](http://tlt.its.psu.edu/suggestions/international/bylanguage/mathchart.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T05:57:52.530

您可以使用 html 实体代码来显示这些符号。例如：

```
<div>
    &#931;
    &#945;
</div> 
```

在这里运行示例：http: [//jsfiddle.net/7QBaZ/](http://jsfiddle.net/7QBaZ/)

html实体图：http: [//htmlhelp.com/reference/html40/entities/symbols.html](http://htmlhelp.com/reference/html40/entities/symbols.html)

然而，要显示复杂的公式，并不像用 HTML 实体显示数学符号那么容易。您可以在此处找到一些帮助以开始使用：

[http://www.zipcon.net/~swhite/docs/math/math.html](http://www.zipcon.net/~swhite/docs/math/math.html)

[http://www.myphysicslab.com/web_math.html](http://www.myphysicslab.com/web_math.html)

# javascript - 为什么我的表单水印脚本不再起作用？

> ID：10327881
> 
> 赞同：0
> 
> 时间：2012-04-26T05:50:24.333
> 
> 标签：javascript, jquery, css, forms, jquery-plugins

我的网站上有一个带水印的表格，使用水印脚本完美运行（我仍然有一个旧版本可以正常工作。）今天我注意到它突然停止工作，我不知道为什么。我将样式和脚本与早期（仍在工作）版本的样式和脚本进行了交叉检查，它们都是相同的。有任何想法吗？

这里有一个比较供参考：

[http://imgur.com/68pUc,UHenQ](http://imgur.com/68pUc,UHenQ)

[http://imgur.com/68pUc,UHenQ#1](http://imgur.com/68pUc,UHenQ#1)

这是我的网站

[www.artyst-tyrant.com](http://www.artyst-tyrant.com)

正在尝试学习编码的行业设计师，但我绝不是专业人士，所以请放轻松。

提前感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:33:17.857

我发现唯一无效的是，在事件处理程序中，您没有指定 ID 选择器：`$("name")[0].focus();`- missing `#`。你甚至不需要，因为你可以`this`在那里使用。

```
 $("#name").click(
        function () {
            this.focus();
        }
    ); 
```

还简化了您的代码：

```
<script type="text/javascript">
    $(document).ready(function() {
        var $elements = $('#name, #mail, #message');
        var texts = {
            'mail': 'Email',
            'name': 'Name',
            'message': 'Message'
        };

        $elements.each(function () {
            $(this).watermark(texts[this.id]);
        }).click(function () {
            this.focus();
        });
    }); 
</script> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-26T06:00:25.403

我找到了这段代码：

```
<script type="text/javascript">
    $(function () {
        $("#name").watermark("Name");
        $("#name").click(
            function () {
                $("name")[0].focus();
            }
        );
    });

    $(function () {
        $("#mail").watermark("Email");
        $("#mail").click(
            function () {
                $("mail")[0].focus();
            }
        );
    });

    $(function () {
        $("#message").watermark("Message");
        $("#message").click(
            function () {
                $("message")[0].focus();
            }
        );
    });

</script> 
```

`$(function() {...`在 FireFox 中引发错误（“`$(function() {...` *无效*” ）。

即使这等于`$(document).ready(function() {...}`你也可以试一试：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#name").watermark("Name");
        $("#name").click(
            function () {
                $("name")[0].focus();
            }
        );

        $("#mail").watermark("Email");
        $("#mail").click(
            function () {
                $("mail")[0].focus();
            }
        );

        $("#message").watermark("Message");
        $("#message").click(
            function () {
                $("message")[0].focus();
            }
        );
    }); 
</script> 
```

我将您的代码包装到`$(document).ready`其中，以便在您的文档准备好时执行：http: [//api.jquery.com/ready/](http://api.jquery.com/ready/)

# android - 在 AnimationSet 中运行多个动画的问题

> ID：10327884
> 
> 赞同：3
> 
> 时间：2012-04-26T05:50:30.013
> 
> 标签：android, android-layout, android-animation

我正在尝试多次实现包含多个动画（平移、旋转和 Alpha）的 AnimationSet。意思是在动画完成并到达某个点后，它将使用不同的动画参数再次运行。我通过使用参数来完成此操作`setStartOffset;`以便在动画中计时。但是，我遇到了问题动画不是从其原始位置（r1、alpha1 和 trans1）开始，而是从不同的位置开始。有什么方法可以说明哪个动画将开始？

```
 ////////////////////////////111111//////////////////////
    RotateAnimation r1 = new RotateAnimation(0,7,
            Animation.RELATIVE_TO_SELF, 0, Animation.RELATIVE_TO_SELF, 0);
    r1.setDuration(mAnimationDuration);
    r1.setFillAfter(true);
    r1.setInterpolator(interpolator);

    AlphaAnimation alpha1 = new AlphaAnimation((float) 0.7, (float) 0.7);
    alpha1.setDuration(mAnimationDuration);
    alpha1.setFillAfter(true);
    alpha1.setInterpolator(interpolator);

    TranslateAnimation trans1 = new TranslateAnimation(0, -290, 0, 0);
    trans1.setDuration(mAnimationDuration);
    trans1.setFillAfter(true);
    trans1.setInterpolator(interpolator);

    /////////////////////222222222222/////////////////////////
    RotateAnimation r2 = new RotateAnimation(7, -7,
            Animation.RELATIVE_TO_SELF, 0, Animation.RELATIVE_TO_SELF, 0);
    r2.setDuration(mAnimationDuration);
    r2.setFillAfter(true);
    r2.setInterpolator(interpolator);
    r2.setStartOffset(mAnimationDuration);

    AlphaAnimation alpha2 = new AlphaAnimation((float) 0.7, 1);
    alpha2.setDuration(mAnimationDuration);
    alpha2.setFillAfter(true);
    alpha2.setInterpolator(interpolator);
    alpha2.setStartOffset(mAnimationDuration);

    TranslateAnimation trans2 = new TranslateAnimation(-290, -580, 0, 0);
    trans2.setDuration(mAnimationDuration);
    trans2.setFillAfter(true);
    trans2.setInterpolator(interpolator);
    trans2.setStartOffset(mAnimationDuration);

    //////////////3333333///////////////////////////////
    RotateAnimation r3 = new RotateAnimation(-7, -7,
            Animation.RELATIVE_TO_SELF, 0, Animation.RELATIVE_TO_SELF, 0);
    r3.setDuration(mAnimationDuration);
    r3.setFillAfter(true);
    r3.setInterpolator(interpolator);
    r3.setStartOffset(mAnimationDuration*2);

    AlphaAnimation alpha3 = new AlphaAnimation((float) 0.7, 1);
    alpha3.setDuration(mAnimationDuration);
    alpha3.setFillAfter(true);
    alpha3.setInterpolator(interpolator);
    alpha3.setStartOffset(mAnimationDuration*2);

    TranslateAnimation trans3 = new TranslateAnimation(-580, -580, 0, 0);
    trans3.setDuration(mAnimationDuration);
    trans3.setFillAfter(true);
    trans3.setInterpolator(interpolator);
    trans3.setStartOffset(mAnimationDuration*2);

    /////////////4/44444//////////////////////
    RotateAnimation r4 = new RotateAnimation(-7, 7,
            Animation.RELATIVE_TO_SELF, 0, Animation.RELATIVE_TO_SELF, 0);
    r4.setDuration(mAnimationDuration);
    r4.setFillAfter(true);
    r4.setInterpolator(interpolator);
    r4.setStartOffset(mAnimationDuration*3);

    AlphaAnimation alpha4 = new AlphaAnimation(1, 1);
    alpha4.setDuration(mAnimationDuration);
    alpha4.setFillAfter(true);
    alpha4.setInterpolator(interpolator);
    alpha4.setStartOffset(mAnimationDuration*3);

    TranslateAnimation trans4 = new TranslateAnimation(-580, -870, 0, 0);
    trans4.setDuration(mAnimationDuration);
    trans4.setFillAfter(true);
    trans4.setInterpolator(interpolator);
    trans4.setStartOffset(mAnimationDuration*3);
    //////////////555555555555////////////////////////////
    RotateAnimation r5 = new RotateAnimation(7, -7,
            Animation.RELATIVE_TO_SELF, 0, Animation.RELATIVE_TO_SELF, 0);
    r5.setDuration(mAnimationDuration);
    r5.setFillAfter(true);
    r5.setInterpolator(interpolator);
    r5.setStartOffset(mAnimationDuration*4);

    AlphaAnimation alpha5 = new AlphaAnimation(1, 1);
    alpha5.setDuration(mAnimationDuration);
    alpha5.setFillAfter(true);
    alpha5.setInterpolator(interpolator);
    alpha5.setStartOffset(mAnimationDuration*4);

    TranslateAnimation trans5 = new TranslateAnimation(-870, -1160, 0, 0);
    trans5.setDuration(mAnimationDuration);
    trans5.setFillAfter(true);
    trans5.setInterpolator(interpolator);
    trans5.setStartOffset(mAnimationDuration*4);

firstAnimationView1 = new AnimationSet(true);
    firstAnimationView1.addAnimation(r1);
    firstAnimationView1.addAnimation(r2);
    firstAnimationView1.addAnimation(r3);
    firstAnimationView1.addAnimation(alpha1);
    firstAnimationView1.addAnimation(alpha2);
    firstAnimationView1.addAnimation(alpha3);
    firstAnimationView1.addAnimation(trans1);
    firstAnimationView1.addAnimation(trans2);
    firstAnimationView1.addAnimation(trans3); 
```

# ios - 如何在启动时添加加载视图？

> ID：10327887
> 
> 赞同：0
> 
> 时间：2012-04-26T05:50:45.013
> 
> 标签：ios, launch

我正在使用故事板开发我的应用程序，初始视图控制器是一个标签栏控制器。在 AppDelegate，我做了一些工作来从我的网站获取 jsonData。这将需要 10-20 秒。你知道，我想做一些事情来注意用户正在加载，而不仅仅是显示 default.png 图片。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:31:59.633

好吧，您可以拥有`rootViewController`一个正在加载的状态（可能是`UIActivityIndicatorView`在其他视图和一些公共方法之上，例如`showLoading`and `hideLoading`.

脚步 ：

1.  在 AppDelegate`application:didFinishLaunchingWithOptions:`方法中，像往常一样构建您的 rootView 控制器并调用加载 JSON 文件的方法。
2.  `showLoading`开始请求时调用该方法
3.  `hideLoading`收到响应时调用该方法。

另外，请记住使用异步请求或将其放在不同的线程中，以防止阻塞主线程。

# mysql - 我应该如何在 SELECT 上将两个表合并为一个？

> ID：10327895
> 
> 赞同：0
> 
> 时间：2012-04-26T05:51:54.693
> 
> 标签：mysql

这个问题很难用一句话概括。我有两张表 - 其中一张由外部提要自动定期更新。第二个表包含第二个表中某些行的额外信息，由唯一键标识。这是一个例子：

```
表格1
    id: int 主键
    频道：varchar(255) 唯一键
    名称：varchar(255) NOT NULL
    已验证：tinyint(1) NOT NULL

表2
    id: int 主键
    频道：varchar(255) 唯一键
    额外信息：varchar（255）

```

表 1 是主表。这是实际选择的表。我希望在选择时将 Table2 中的字段（除了 id 和通道）移动到 Table1，就好像 Table2 中存在于 Table1 中的所有行在选择时都合并了一样。

例如，我希望这两个表中的信息以 JSON 输出形式结束，如下所示

```
[{
    "id": 5,
    "channel": "bkids2",
    "name": "Bkid",
    "verified": true,
    "extra_info": "Some extra information added using Table2"
},
...
] 
```

我想知道最快的方法是什么。我可以使用 SQL 语法**快速做到这一点吗？**我知道某些类型的查询非常慢，因此仅获取两个表中的所有数据并使用服务器端编程语言执行合并可能会更快？

我一半假设前者是正确答案，在这种情况下：我什至如何使用 MySQL 来做到这一点？子查询？加入？联盟？

我不得不承认我并不完全了解这些技术中的任何一种是如何工作的，或者它们运行的​​速度/速度有多慢，所以感谢任何可以为我指明正确方向的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:54:24.643

尝试这个：

```
SELECT Table1.*, IFNULL(Table2.extra_info, 'DefaultValue') as extra_info
FROM Table1 LEFT OUTER JOIN Table2
ON Table1.id = Table2.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:05:31.203

您可以编写查询以获得所需的输出。

```
SELECT id, channel, name, verified, extra_info FROM table_1 NATURAL JOIN table_2 
```

此查询连接两个表并显示两者之间的共同结果。希望这是您问题的答案....

# android - 如何在 Android 中使用正则表达式

> ID：10327901
> 
> 赞同：25
> 
> 时间：2012-04-26T05:52:13.240
> 
> 标签：android, regex, android-edittext

我有一个 numberDecimal `EditText`，我想使用正则表达式对其进行验证。在验证中，我想要的是：

1.  在小数点之前，我要输入的最大数字是三位，并且数字不应以零开头，例如`2,23,342`等。

2.  小数点后，我要输入的最大位数是`.1`, `.3`,`.6`等。

所以我允许用户输入的数字是`2.1`, `32.5`, `444.8`,`564.9`等。

**但在我的代码中，会发生什么：**

1.  它允许用户在小数点之前输入多于三位数的数字，例如`3456`, `4444`，`5555`之后不允许我输入小数点。

2.  它允许我`0`在小数点之前输入作为数字的开头。

那么为什么会发生这种情况，我使用的正则表达式有什么问题吗？如果有人知道，请帮我解决这个问题。

**我用过的代码：**

```
weightEditText.addTextChangedListener(new TextWatcher() 
{           
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {               
    }           
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {            
    }           
    @Override
    public void afterTextChanged(Editable s) 
    {
        Pattern mPattern = Pattern.compile("^([1-9][0-9]{0,2})?(\\.[0-9]?)?$");

        Matcher matcher = mPattern.matcher(s.toString());               
        if(!matcher.find())
        {
            weightEditText.setText(); // Don't know what to place                   
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-26T22:39:26.953

在;中`dest`单独检查从来没有任何意义。`InputFilter`这就是该领域已经存在的。将正则表达式匹配更改为反对`source`，如果您只想检查某些字符是否被接受到该字段中，这将是合适的。但是，您要检查字段格式，而不仅仅是逐个字符地过滤输入。这要复杂得多。

每次用户对 的内容进行更改时，系统都会在实际进行更改*之前*`tempEditText`调用过滤器的`filter`方法。它传递当前字段内容和建议的更改（可以是插入/追加、删除或替换）。更改由源（要添加到字段的字符（如果有））、源内的范围开始和结束索引（范围不一定全部为）、a （更改前的当前字段内容）表示范围内的 dstart 和 dend 索引建议替换为指定的范围。*`CharSequence source``source``Spanned dest``dest``source`*

 *的工作`filter`是修改更改（如有必要）并返回 a`CharSequence`以使用（全部）代替`source`（或`null`继续使用`source`）。`dest`您需要检查更改是否会导致可接受的字段，而不是像现在所做的那样检查。为此，您将需要更复杂的逻辑。（请特别注意，新字符可能用于插入末尾以外的其他位置；此外，`filter`当用户删除字符以及添加字符时将调用它们。）

实现一个[`TextWatcher`](http://developer.android.com/reference/android/text/TextWatcher.html). 在 it's`beforeTextChanged`方法中，您可以记录当前内容，在 it's`afterTextChanged`方法中，您可以检查（使用正则表达式）内容是否可接受，如果不可接受，则恢复更改前的内容。（但请确保更改之前的文本是可接受的。如果不是，请替换一些可接受的内容 - 例如清除字段。否则您的代码将进入无限循环，因为`TextWatcher`当您更正时将再次调用字段内容。）

您的正则表达式中也有错误：它允许前导零。这是修复此问题的改进版本（并删除了一组不必要的括号）：

```
"^([1-9][0-9]{0,2})?(\\.[0-9]?)?$" 
```

（顺便说一句：您可以使用`\\d`代替`[0-9]`。）

**编辑**

这是我对您的编辑的编辑：

```
weightEditText.addTextChangedListener(new TextWatcher() 
{           
    private static final Pattern sPattern
        = Pattern.compile("^([1-9][0-9]{0,2})?(\\.[0-9]?)?$");

    private CharSequence mText;

    private boolean isValid(CharSequence s) {
        return sPattern.matcher(s).matches();
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count){
    }           

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after){
        mText = isValid(s) ? new CharSequence(s) : "";
    }           

    @Override
    public void afterTextChanged(Editable s) 
    {
        if (!isValid(s))
        {
            weightEditText.setText(mText);
        }
        mText = null;
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-26T19:27:16.480

也许我的实现会帮助任何人：

```
 etRepeaterCallsign.addTextChangedListener(new TextWatcher() {
        private final Pattern sPattern
                = Pattern.compile("^([A-Z]{0,2})?(\\d)?([A-Z-]{0,5})"); // ^([1-9][0-9]{0,2})?(\\.[0-9]?)?$

        private CharSequence mText;

        private boolean isValid(CharSequence s) {
            return sPattern.matcher(s).matches();
        }

        @Override
        public void beforeTextChanged(CharSequence r, int start, int count,
                                      int after) {
            mText = r.toString();
        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            bIsEdit = true;
        }
        @Override
        public void afterTextChanged(Editable s) {
            etRepeaterCallsign.removeTextChangedListener(this);

            int iCursorPosition = etRepeaterCallsign.getSelectionStart();
            etRepeaterCallsign.setText("");
            if (isValid(s))
                etRepeaterCallsign.append(s);
            else
                etRepeaterCallsign.append(mText);

            etRepeaterCallsign.setSelection(iCursorPosition);

            etRepeaterCallsign.addTextChangedListener(this);

        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T05:56:39.463

您可以只解析数字并检查它是否 < 1000 并且 10*number 是一个整数，而 num 不是。它也可能更具可读性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T06:27:28.370

我使用以下代码尝试了您的模式。它可以完美地用作 2.1、32.5、444.8、564.9 等。

我的代码：

```
public class WebPush extends Activity {  
    EditText editTxt;
    private TextView regresult;  

    protected void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main); 

        editTxt = (EditText) findViewById(R.id.editID);
        regresult = (TextView) findViewById(R.id.txtID);

        String urName = editTxt.getText().toString();
        editTxt.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {
            }

            @Override
            public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,int arg3) {
            }       

            @Override
            public void afterTextChanged(Editable s) {
                if (editTxt.getText().toString().matches("(^([0-9]{0,3})?)(\\.[0-9]{0,1})?$"))
                {
                    regresult.setText("");
                }
                else
                {
                    regresult.setText("invalid number");
                }
            }
        });
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T05:57:49.113

你可以尝试这样的事情：`^[1-9][0-9]{0,2}(\\.\\d)?$`. 这应该匹配任何不以 0 ( `^[1-9]`) 开头且后跟最多两个数字 ( `[0-9]{0,2}`) 的数字。正则表达式还允许使用可选的十进制值 ( `(\\.\\d)?$`)。

话虽如此，理想情况下，您应该将字符串值解析为 a `double`or`float`并使用实际数值进行您需要进行的任何验证。

要将您的值解析`string`为一个`double`值，您需要像这样使用[Double.parseDouble(String s)](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29)：`double myValue = Double.parseDouble(EditText.getText());`*

# javascript - 播放暂停 html5 视频 javascript

> ID：10327907
> 
> 赞同：31
> 
> 时间：2012-04-26T05:52:30.620
> 
> 标签：javascript, html, video, html5-video

当我单击播放器中显示的海报图像时，我有一个播放视频的功能，它似乎可以工作：

```
var video = document.getElementById('player');
video.addEventListener('click',function(){
    video().play();
},false); 
```

在 html5 视频标签中，我有类似的内容： id="player" onclick="this.play();"

问题是，如果我在视频控件上按下暂停，它实际上会暂停，这很好，但是如果我按下视频控件上的播放按钮，我可以看到按钮再次暂停一秒钟，然后它就会消失再次成为播放按钮。所以我按下播放键，它只播放几帧，然后回到暂停状态。让它再次播放的唯一方法是单击视频查看区域。

使用控制栏播放/暂停按钮时如何使其停止返回暂停，以及单击视频查看区域时如何使其暂停？

我尝试了以下方法，但它不起作用：

```
var video = document.getElementById('player');
video.addEventListener('click',function(){
    if(video.paused){
        video().play();
    }else{
        video.pause();
    }
},false); 
```

我想在实际观看区域上播放视频的原因是在Android上很难找到微小的控制栏播放按钮，因为它太小了，人们只需按下观看区域即可获得它去。在 Firefox 中，当我点击查看区域和暂停时，视频播放器会播放，这正是我想要发生的事情，它也不需要任何 javascript 就可以做到这一点。在 Android 中，当我按下查看区域时，视频根本不会播放。所以我基本上是在试图强制 Android 浏览器像 Firefox 一样运行。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2014-01-09T07:21:33.417

```
$('#play-pause-button').click(function () {
   var mediaVideo = $("#media-video").get(0);
   if (mediaVideo.paused) {
       mediaVideo.play();
   } else {
       mediaVideo.pause();
  }
}); 
```

我在 jQuery 中完成了这项工作，既简单又快速。要尝试它，您只需要使用视频标签的 ID 和播放/暂停按钮即可。

**编辑：** 在 vanilla JavaScript 中：视频不是函数，而是 DOM 的一部分，因此使用

```
 video.play(); 
```

**代替**

```
video().play() **wrong** 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-04T16:34:07.547

在我看来，视频不是一个函数，那你为什么有括号？那是你的错误。

所以`video()`不仅仅是使用`video`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T13:27:19.953

在 Chrome v22、Firefox v15 和 IE10 中对我来说这种工作（使用 jquery）：

```
$('video').on('click', function (e) {
    if (this.get(0).paused) {
        this.get(0).play();
    }
    else {
        this.get(0).pause();
    }
    e.preventDefault();
}); 
```

这里`preventDefault`停止了您看到的跳帧问题，但随后它破坏了控制部分上的其他按钮，例如全屏等。

看起来不容易为什么要这样做？我原以为供应商会默认点击播放，这似乎是合乎逻辑的事情。:|

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-21T08:30:22.590

这是最简单的解决方案

```
this.on("pause", function () {
    $('.vjs-big-play-button').removeClass(
        'vjs-hidden'
    ).css('display', 'block');
    this.one("play", function () {
        $('.vjs-big-play-button').addClass(
            'vjs-hidden'
        ).css('display', '');
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-23T12:38:23.320

```
$('#video-id').click(function() {
    // jQuery sets this as the DOM element that triggered the event
    // no need to wrap it in jQuery $(this) and unwrap it again $(this).get(0)
    if (this.paused) {
        this.play();
    } else {
        this.pause();
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-09T06:43:33.627

我相信，这是编写您要实现的目标的最简单和最简单的方法：

```
var myVideo = document.getElementById('exampleVideo');

            $(myVideo).click(function toggleVideoState() {
                if (myVideo.paused) {
                  myVideo.play();
                  console.log('Video Playing');
                } else {
                  myVideo.pause();
                  console.log('Video Paused');
                }
              }); 
```

当然，登录到控制台只是为了说明。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-18T05:07:24.327

```
 function myFunction(){ 
            var playVideo = document.getElementById('myVideo');
            var button = document.getElementById('myBtn');

            if (playVideo.paused) {
               playVideo.play();
                button.innerHTML= "pause";
            } else {
               button.innerHTML= "play";
               playVideo.pause();
            }
            }; 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2019-08-01T05:48:19.880

```
document.getElementById("play").onclick = function(){
    if (document.getElementById("videoPlay").paused){
        document.getElementById("videoPlay").play();
    } else {
        document.getElementById("videoPlay").pause(); 
    }
} 
```

# .net - 故障模块：kernelbase.dll。应用程序崩溃

> ID：10327908
> 
> 赞同：8
> 
> 时间：2012-04-26T05:52:34.210
> 
> 标签：.net

我已经`application`完成了。`Net framework 3.5`（C#.Net）。我将应用程序安装在`Windows 7`. 但是在打开某些表单时，应用程序会导致以下错误 ![在此处输入图像描述](../Images/ea28d32d2c34fc58ff54872b32473c1d.png)

如果有人知道解决方案，请分享。此错误仅出现在 Windows 7 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-25T09:07:24.180

只是补充一下，因为我遇到了同样的问题：

有时这与递归导致的堆栈溢出有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:36:32.740

我遇到了同样的问题并找到了解决方案。

检查您的事件查看器并找出导致崩溃的应用程序。它可能是 kernelbase.dll。这不是办公室问题，因为 KERNELBASE.dll 是系统文件。如果系统文件导致崩溃，那么您需要修复 Windows 7 系统文件。

转到此处并按照所有说明进行操作：http: [//support.microsoft.com/kb/929833](http://support.microsoft.com/kb/929833)

这样做解决了我在系统中遇到的许多其他问题：

*   MSN Messenger 不再加载
*   每当我尝试单击“插入”选项卡时，所有 Office 2010 程序都会崩溃
*   在大文件夹中搜索文件或文档时，Windows 资源管理器崩溃

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-02T15:36:00.943

对我来说，问题是 Windows 服务设置项目或解决方案的一部分已损坏；它没有正确检测依赖关系，因此在尝试启动 Windows 服务时导致了 IO 问题。

所以我基本上删除了旧的设置项目并重新创建了一个新的，然后当我添加主输出时它仍然没有正确更新依赖项，如果我再添加另一个主输出，依赖项将填充，然后如果我尝试删除其中一个现在两个主输出条目VS2010会崩溃，所以我查看了安装项目的文件，然后添加了三个，然后删除了两个条目？！？！？！？！et voila ...不再崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-05T16:33:36.050

对我来说，原因是使用依赖注入 + 安装程序。安装程序合并了多个应用程序文件夹的内容，因此我的程序集版本不匹配，导致加载问题。

解决方案是为我整合引用的程序集。

# php - html中的php，快速问题

> ID：10327913
> 
> 赞同：2
> 
> 时间：2012-04-26T05:53:16.393
> 
> 标签：php, html

我有一个 PHP 模板文件，其中包含以下代码：

```
<td class="redfont">
    <strong><?=$fees->display_amount($item_details['start_price'], $item_details['currency']); ?></strong> 
```

我想做的是添加这样的东西`if the start_price == 0` 然后`display_amount`应该显示`0`。

现在`display_amount`显示`-`_ `start_price`_`0`

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:58:05.047

你可以这样做。

```
<td class="redfont"><strong><?= ($item_details['start_price'] == 0) ? 0 : $fees->display_amount($item_details['start_price'], $item_details['currency']); ?></strong> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:57:02.637

```
<td class="redfont">
<strong>
    <?php 
        if ($item_details['start_price'] == 0)
            "0";
        else
            $fees->display_amount($item_details['start_price'], $item_details['currency']); 
    ?>
</strong>
</td> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T05:57:53.283

```
<td class="redfont"><strong><?= $item_details['start_price'] == 0 ? "0" : $fees->display_amount($item_details['start_price'], $item_details['currency']) ?></strong> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T06:02:31.903

```
<?php
YourClass {

   public function display_amount($startPrice, $currency) {
      if ($startPrice == 0) {
         return "0";
      } else {
         //do other things code here
         //return your_result
      }
   }
}
?>

<td class="redfont"><strong><?=$fees->display_amount($item_details['start_price'], $item_details['currency']); ?></strong> 
```

您可以将控制权放在您的函数中或在 html 中返回结果时。我更喜欢将控制权放在函数中

# asp.net-mvc - MVC .Net 同时创建模型和相关模型

> ID：10327916
> 
> 赞同：0
> 
> 时间：2012-04-26T05:53:49.647
> 
> 标签：asp.net-mvc, repeater

我有一个名为 Company 的模型，公司可以有 1 个或多个董事。我希望能够在创建公司的同时创建任意数量的董事。

我将 Director 的 Create 视图设为部分视图：

```
@using (Ajax.BeginForm("Create", 
                       "Director", 
                       new AjaxOptions { 
                         HttpMethod = "POST", 
                         UpdateTargetId = "partial", 
                         InsertionMode = InsertionMode.InsertAfter }))
{
 @Html.EditorFor(model => model.Title)
 ...
} 
```

在 Company 的 Create 视图中，我有一个按钮，可将 Director 的部分 Create 视图加载到容器中：

```
$.get('@(Url.Action("Create", "Director"))', function (result) {  
            $('#partial').append(result);
        }); 
```

这允许将 Director 的输入控件动态加载到 Company 的 Create 视图中。

我的问题是如何处理与公司同时创建董事的问题？还是我只需要允许在编辑时创建导演而不是创建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T19:35:16.387

几天前我开始学习 mvc，今天我不得不做类似的事情。

我想同时保存多个日期。这是简化的代码：

看法：

```
<input type="text" name="Date" /> 
```

控制器：

```
public ActionResult Create(List<DateTime> Date)
{
    //Saving goes here
} 
```

这样，每个名为“日期”的文本字段中的日期将在列表日期中可用。

# android - Eclipse 选项不可用：Android 工具 > 导出未签名的应用程序包

> ID：10327917
> 
> 赞同：4
> 
> 时间：2012-04-26T05:53:51.077
> 
> 标签：android, eclipse, google-play, jarsigner

我已经创建了我的 Google 市场发布者私钥库。现在我想使用 eclipse 导出未签名的 apk，但我找不到选项：导出未签名的应用程序包。

我只能看到这个选项：导出 Android 应用程序，当我右键单击项目并单击导出时。如果我使用此选项，我将无法使用 jarsigner，因为它会给出一个错误，表明 apk 已签名。

我假设上面的导出选项是导出一个（dubug 密钥）签名的 apk 而不是未签名的。

请帮帮我！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T05:59:20.937

右键单击项目 -> Android 工具 -> 导出未签名的应用程序包。

顺便说一句，如果您想使用自签名证书/密钥库进行签名，您可以使用 Project -> Android Tools -> Export Signed Application Package。

# java - 如何运行 java 应用程序并使用其输出来运行 maven 工件？

> ID：10327922
> 
> 赞同：1
> 
> 时间：2012-04-26T05:54:23.607
> 
> 标签：java, maven

我需要运行一个 java 应用程序，如果它的输出是“通过”，那么我将运行`mvn site`命令。我已经浏览了几个论坛并知道这可以使用站点前目标来完成，但是我将如何验证“通过”状态。Java 应用程序是用于调用 Python 脚本的命令。如果它运行成功，则通过输出。如果我从 Hudson 运行，我可以将命令放在 Pre-Build Step 中。但是我将如何验证输出是通过还是失败。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:40:05.077

来自 Jenkins 的“执行 Shell”帮助：

> 如果任何命令以非零退出代码退出，则构建被视为失败。

因此，如果通过，您应该让 Java 应用程序返回 0，否则返回其他值。你可以使用`System.exit(0)`它。

如果您无法控制 java 应用程序，则可以使用`tail -1 | grep Passed`来查看命令是否在其最后一行中“通过”。

# jquery - 更改按钮文本并在回发期间禁用它

> ID：10327924
> 
> 赞同：0
> 
> 时间：2012-04-26T05:54:28.897
> 
> 标签：jquery, asp.net, asp.net-ajax, updatepanel

我在`update panel`.

我想要它，所以当用户单击按钮时，`Please Wait...`文本显示为按钮文本，并且该按钮被禁用，直到回发完成。我写了这段代码：

```
$('#Button2').on("click", function (e) {
                $("#Button2").val("Please Wait");
                $('#Button2').attr('disabled', 'disabled');
}); 
```

问题是当按钮被禁用时，它的事件不会在服务器端引发。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T06:04:44.337

您是否使用 jQuery.ajax 函数来触发服务器调用？如果是这样，那么在“beforeSend”键中更改按钮文本并禁用。

```
$.ajax({
    .....
    beforeSend: function(){
     $("#Button2").val("Please Wait");
     $('#Button2').attr('disabled', 'disabled');
    }
    .....
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T06:04:21.530

```
$('#Button2').on("click", function (e) {
                $("#Button2").text("Please Wait");
                $('#Button2').attr('disabled', 'disabled');
               //your ajax function here
     $.ajax({
            url:'your url',
            data : ({/*data to send***/  }),
            method : 'POST',

            success: function(msg){
                 $('#Button2').removeAttr('disabled');
           }
    });
             //end ajax

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-06T01:29:42.817

您可以在 jQuery 中使用 .attr 和 .html 函数。

```
$('#btn').click(function(){
    $(this).html('Saving...'); //this changes the html to Saving...
    $(this).attr('disabled', true); //this will disable the button onclick
}); 
```

这是一个示例小提琴：http: [//jsfiddle.net/stan255/cpLqK/1/](http://jsfiddle.net/stan255/cpLqK/1/)

希望这可以帮助。

*   斯坦利

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T06:04:04.123

在您的 onClick 函数中，尝试先进行 ajax 调用，然后再禁用该按钮。由于它是异步调用，因此下一行脚本应在调用时禁用该按钮。在您拨打电话后的回调中，您可以重新启用您的按钮。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T06:57:14.670

你应该在禁用按钮后调用服务器事件。为此你应该使用`ClientScript.GetPostBackEventReference(bt1, null)`

请参阅此链接：[在异步回发的更新面板中禁用按钮](https://stackoverflow.com/questions/3828143/disable-button-in-update-panel-on-async-postback)

# c++ - 使用字符数组作为文件名？

> ID：10327929
> 
> 赞同：4
> 
> 时间：2012-04-26T05:54:59.937
> 
> 标签：c++

很抱歉这个菜鸟问题，但我似乎无法让它工作，任何帮助将不胜感激。

```
const int sz = 24;

int main()
{
char a [sz];

for (int i = 0; i < 5; i++)
    cin >> a[i];

ifstream inFile;

inFile.open(a);

cout << inFile.good() << endl;

return 0;
} 
```

这是我正在尝试做的一个较小的版本，即使用 .open() 打开 inFile 流，对于我试图传递的文件名，它是一个 char 数组。我在正确的目录中有一个名为 a.txt 的文件（我已经确认了这一点），所以我输入了 a.txt，它被读入了 a 数组，但 inFile.good() 仍然返回 false。我也知道数组大于 5 个字符，但我认为这不会影响它。

如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:59:24.683

的签名`open`是：

```
void open ( const char * filename, ios_base:openmode mode = ios_base::in ); 
```

正如所见，第一个参数是一个常量字符串（以 nul 结尾的字符数组）。在您的情况下，最后没有 nul 字符。为此，您需要一个大小比您将输入的最大文件名大小大一的数组。

为什么不只用一个来读字符`cin`呢？作为：

```
cin >> a;
ifstream inFile;
inFile.open(a); 
```

或者甚至更好地使用`String`类来获取用户输入，然后使用`c_str()`来获取`const char*`可以传递给`open`.

# php - 使用 include_once('...') 时字符集错误

> ID：10327930
> 
> 赞同：1
> 
> 时间：2012-04-26T05:55:04.253
> 
> 标签：php, include

我已配置 .htaccess 文件以在 .html 文件中启用 php。但是当我使用：

```
include_once('file.php'); 
```

在 .html 文件中，它包含 file.php 但字符集错误 - 波兰语字符显示不正确（黑色背景上的白色问号）。在我的 html 文件中，这是标题：

```
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

而且我在正文中使用 include_once somwhere...当我复制此 php 文件的内容而不是包含字符时，正确显示。在我的 php 文件中，我只有 html 代码，没有任何 php 函数......

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T05:57:40.213

您的 .php 文件未以 UTF-8 编码。在编辑器中打开它并确保它保存为 UTF-8。

# java - 使用war文件的MANIFEST.MF将物理机文件夹中可用的jar文件添加到服务器类路径中

> ID：10327935
> 
> 赞同：0
> 
> 时间：2012-04-26T05:55:44.887
> 
> 标签：java, spring, maven, pom.xml

我对将 jar 添加到服务器类路径有疑问。如果需要添加jar，我们将添加到war的lib文件夹中，或者我们将jar添加到服务器的lib文件夹中。

但是，我想在我的机器的绝对文件夹中添加一个可用的 jar，比如 C:\test.jar 到类路径中。这可能吗。

我尝试在war文件的MANIFEST.MF中添加条目Class-path：C：/test.jar来做到这一点，当部署war时，我得到了与test.jar相关的classNotFoundException。

这意味着在部署时，jar test.jar 不会从 war 文件的 MANIFEST.MF 添加到服务器类路径中。

我在这里遗漏了什么，或者这根本不可能。请注意，目的是将 jar 文件保存在我机器的单独文件夹中，并使用 MANIFEST.MF 的 war 文件将其加载到服务器类路径中。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:56:02.993

在 manifest.mf 中，您可以有相对路径或 URL。尝试将您的路径转换为 ​​url，如下所示，

```
file://C:/test.jar 
```

但是很少有建议，既然你提到它是一个网络应用程序，为什么不考虑创建一个共享库呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:15:02.827

将具有以下格式的类路径放入清单中（win）：

```
Class-Path: /test.jar 
```

或者

```
Class-Path: file:\\\\c:\\test.jar 
```

并记住在行尾换行

但是，每个应用程序服务器都有更好的方法来共享库，您使用哪一种？

# macos - 在 Mac OS X 上组装项目时出错“没有这样的指令”

> ID：10327939
> 
> 赞同：20
> 
> 时间：2012-04-26T05:55:58.743
> 
> 标签：macos, gcc, assembly, osx-lion, gnu-assembler

我使用自制软件安装 GCC 4.7.0，我的项目在组装时失败。我可以成功地从 .c -> .s 获取代码，但 .s -> .o 失败。

要查看用于安装 GCC 的 brew 公式，请查看：[https](https://github.com/Homebrew/homebrew-dupes/blob/master/gcc.rb) ://github.com/Homebrew/homebrew-dupes/blob/master/gcc.rb 。[我还使用https://github.com/mxcl/homebrew/blob/master/Library/Formula/binutils.rb](https://github.com/mxcl/homebrew/blob/master/Library/Formula/binutils.rb)从上游安装了 binutils 。安装 binutils 似乎不会在 /usr/local/lib 或类似文件中引入新的“as”。

我怎样才能找到这个丢失的指令错误？看来编译器是正确的，但链接器根本不支持这些指令。这些指令看起来确实是向量指令。

```
xavierlange $> make suricata.o
/usr/local/bin/gcc-4.7 -DHAVE_CONFIG_H -I. -I..  -I../libhtp  -I/opt/local/include  -v -Wextra -Wall -fno-strict-aliasing -fno-tree-pre -Wno-unused-parameter -std=gnu99 -DOS_DARWIN -march=native   -DLIBPCAP_VERSION_MAJOR=1 -DHAVE_PCAP_SET_BUFF -DUNITTESTS -DREVISION="61d5fe3" -MT suricata.o -MD -MP -MF .deps/suricata.Tpo -c -o suricata.o suricata.c
Using built-in specs.
COLLECT_GCC=/usr/local/bin/gcc-4.7
Target: x86_64-apple-darwin11.3.0
Configured with: ../configure --enable-languages=c,c++,fortran,java,objc,obj-c++ --prefix=/usr/local/Cellar/gcc/4.7.0/gcc --datarootdir=/usr/local/Cellar/gcc/4.7.0/share --bindir=/usr/local/Cellar/gcc/4.7.0/bin --program-suffix=-4.7 --with-gmp=/usr/local/Cellar/gmp/5.0.4 --with-mpfr=/usr/local/Cellar/mpfr/3.1.0 --with-mpc=/usr/local/Cellar/libmpc/0.9 --with-system-zlib --enable-stage1-checking --enable-plugin --enable-lto --disable-multilib --disable-nls
Thread model: posix
gcc version 4.7.0 (GCC) 
COLLECT_GCC_OPTIONS='-mmacosx-version-min=10.7.3' '-D' 'HAVE_CONFIG_H' '-I' '.' '-I' '..' '-I' '../libhtp' '-I' '/opt/local/include' '-v' '-Wextra' '-Wall' '-fno-strict-aliasing' '-fno-tree-pre' '-Wno-unused-parameter' '-std=gnu99' '-D' 'OS_DARWIN' '-march=native' '-D' 'LIBPCAP_VERSION_MAJOR=1' '-D' 'HAVE_PCAP_SET_BUFF' '-D' 'UNITTESTS' '-D' 'REVISION=61d5fe3' '-MT' 'suricata.o' '-MD' '-MP' '-MF' '.deps/suricata.Tpo' '-c' '-o' 'suricata.o'
 /usr/local/Cellar/gcc/4.7.0/gcc/libexec/gcc/x86_64-apple-darwin11.3.0/4.7.0/cc1 -quiet -v -I . -I .. -I ../libhtp -I /opt/local/include -MD suricata.d -MF .deps/suricata.Tpo -MP -MT suricata.o -D__DYNAMIC__ -D HAVE_CONFIG_H -D OS_DARWIN -D LIBPCAP_VERSION_MAJOR=1 -D HAVE_PCAP_SET_BUFF -D UNITTESTS -D REVISION=61d5fe3 suricata.c -march=corei7-avx -mcx16 -msahf -mno-movbe -maes -mpclmul -mpopcnt -mno-abm -mno-lwp -mno-fma -mno-fma4 -mno-xop -mno-bmi -mno-bmi2 -mno-tbm -mavx -mno-avx2 -msse4.2 -msse4.1 -mno-lzcnt --param l1-cache-size=32 --param l1-cache-line-size=64 --param l2-cache-size=6144 -mtune=corei7-avx -fPIC -quiet -dumpbase suricata.c -mmacosx-version-min=10.7.3 -auxbase-strip suricata.o -Wextra -Wall -Wno-unused-parameter -std=gnu99 -version -fno-strict-aliasing -fno-tree-pre -o /var/folders/58/wg28y0x17p5c3s6y_2t2rj2h0000gn/T//ccKRmuNX.s
GNU C (GCC) version 4.7.0 (x86_64-apple-darwin11.3.0)
    compiled by GNU C version 4.7.0, GMP version 5.0.4, MPFR version 3.1.0-p8, MPC version 0.9
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
ignoring nonexistent directory "/usr/local/Cellar/gcc/4.7.0/gcc/lib/gcc/x86_64-apple-darwin11.3.0/4.7.0/../../../../x86_64-apple-darwin11.3.0/include"
ignoring nonexistent directory "/opt/local/include"
#include "..." search starts here:
#include <...> search starts here:
 .
 ..
 ../libhtp
 /usr/local/Cellar/gcc/4.7.0/gcc/lib/gcc/x86_64-apple-darwin11.3.0/4.7.0/include
 /usr/local/include
 /usr/local/Cellar/gcc/4.7.0/gcc/include
 /usr/local/Cellar/gcc/4.7.0/gcc/lib/gcc/x86_64-apple-darwin11.3.0/4.7.0/include-fixed
 /usr/include
 /System/Library/Frameworks
 /Library/Frameworks
End of search list.
GNU C (GCC) version 4.7.0 (x86_64-apple-darwin11.3.0)
    compiled by GNU C version 4.7.0, GMP version 5.0.4, MPFR version 3.1.0-p8, MPC version 0.9
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
Compiler executable checksum: 1dbaf0f0ba4d4d18b5d0d00c3c7d024d
COLLECT_GCC_OPTIONS='-mmacosx-version-min=10.7.3' '-D' 'HAVE_CONFIG_H' '-I' '.' '-I' '..' '-I' '../libhtp' '-I' '/opt/local/include' '-v' '-Wextra' '-Wall' '-fno-strict-aliasing' '-fno-tree-pre' '-Wno-unused-parameter' '-std=gnu99' '-D' 'OS_DARWIN' '-march=native' '-D' 'LIBPCAP_VERSION_MAJOR=1' '-D' 'HAVE_PCAP_SET_BUFF' '-D' 'UNITTESTS' '-D' 'REVISION=61d5fe3' '-MT' 'suricata.o' '-MD' '-MP' '-MF' '.deps/suricata.Tpo' '-c' '-o' 'suricata.o'
 as -arch x86_64 -force_cpusubtype_ALL -o suricata.o /var/folders/58/wg28y0x17p5c3s6y_2t2rj2h0000gn/T//ccKRmuNX.s
/var/folders/58/wg28y0x17p5c3s6y_2t2rj2h0000gn/T//ccKRmuNX.s:7791:no such instruction: `vcvtsi2ssq %rax, %xmm0,%xmm0'
/var/folders/58/wg28y0x17p5c3s6y_2t2rj2h0000gn/T//ccKRmuNX.s:7792:no such instruction: `vmovd %xmm0, %eax'
/var/folders/58/wg28y0x17p5c3s6y_2t2rj2h0000gn/T//ccKRmuNX.s:7799:no such instruction: `vcvtsi2ssq %rdx, %xmm0,%xmm0'
/var/folders/58/wg28y0x17p5c3s6y_2t2rj2h0000gn/T//ccKRmuNX.s:7800:no such instruction: `vaddss %xmm0, %xmm0,%xmm0'
/var/folders/58/wg28y0x17p5c3s6y_2t2rj2h0000gn/T//ccKRmuNX.s:7801:no such instruction: `vmovd %xmm0, %eax'
/var/folders/58/wg28y0x17p5c3s6y_2t2rj2h0000gn/T//ccKRmuNX.s:7804:no such instruction: `vmovd %eax, %xmm1'
/var/folders/58/wg28y0x17p5c3s6y_2t2rj2h0000gn/T//ccKRmuNX.s:7805:no such instruction: `vmovd %edx, %xmm2'
/var/folders/58/wg28y0x17p5c3s6y_2t2rj2h0000gn/T//ccKRmuNX.s:7806:no such instruction: `vdivss %xmm2, %xmm1,%xmm0'
/var/folders/58/wg28y0x17p5c3s6y_2t2rj2h0000gn/T//ccKRmuNX.s:7807:no such instruction: `vunpcklps %xmm0, %xmm0,%xmm0'
/var/folders/58/wg28y0x17p5c3s6y_2t2rj2h0000gn/T//ccKRmuNX.s:7808:no such instruction: `vcvtps2pd %xmm0, %xmm0'
/var/folders/58/wg28y0x17p5c3s6y_2t2rj2h0000gn/T//ccKRmuNX.s:7809:no such instruction: `vmovd %xmm0, %rax'
/var/folders/58/wg28y0x17p5c3s6y_2t2rj2h0000gn/T//ccKRmuNX.s:7819:no such instruction: `vmovd %rax, %xmm0'
make: *** [suricata.o] Error 1 
```

这是我使用 MacPorts 安装的 GCC-4.7（它使用 cctools）时发生的情况。我尝试更改优化以查看是否也有帮助。

```
xavierlange $> /opt/local/bin/gcc-mp-4.7 -DHAVE_CONFIG_H -I. -I..  -I../libhtp  -I/usr/local/include -I/opt/local/include  -g -O0 -Wextra -Wall -fno-strict-aliasing -fno-tree-pre -Wno-unused-parameter -std=gnu99 -DOS_DARWIN -march=native   -DLIBPCAP_VERSION_MAJOR=1 -DHAVE_PCAP_SET_BUFF -DUNITTESTS -DREVISION="61d5fe3" -MT suricata.o -MD -MP -MF .deps/suricata.Tpo -S suricata.c -o suricata.s
xavierlange $> /opt/local/bin/as suricata.s suricata.s:9811:no such instruction: `vcvtsi2ssq %rax, %xmm0,%xmm0'
suricata.s:9812:no such instruction: `vmovd %xmm0, %eax'
suricata.s:9819:no such instruction: `vcvtsi2ssq %rdx, %xmm0,%xmm0'
suricata.s:9820:no such instruction: `vaddss %xmm0, %xmm0,%xmm0'
suricata.s:9821:no such instruction: `vmovd %xmm0, %eax'
suricata.s:9824:no such instruction: `vmovd %eax, %xmm1'
suricata.s:9825:no such instruction: `vmovd %edx, %xmm2'
suricata.s:9826:no such instruction: `vdivss %xmm2, %xmm1,%xmm0'
suricata.s:9827:no such instruction: `vunpcklps %xmm0, %xmm0,%xmm0'
suricata.s:9828:no such instruction: `vcvtps2pd %xmm0, %xmm0'
suricata.s:9829:no such instruction: `vmovd %xmm0, %rax'
suricata.s:9839:no such instruction: `vmovd %rax, %xmm0' 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-10-12T22:27:36.637

添加`-Wa,-q`到编译器标志为我解决了这个问题。从手册页为：

> -q
> 
>      使用 clang(1) 集成汇编器而不是基于 GNU 的系统汇编器。

该`-Wa`部分将它从编译器驱动程序传递给汇编器，就像`-Wl`将参数传递给链接器一样。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-05T08:39:31.870

简短的解决方案是删除“-march=native”选项（至少它对我有用）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T18:35:00.323

看来您正在运行一个`as`不了解 AVX 扩展的版本。您要么需要构建一个更新的`gas`或使用`clang`来组装。

# android - 错误：通道已不可恢复地损坏，将被处置！（电话间隙）

> ID：10327942
> 
> 赞同：4
> 
> 时间：2012-04-26T05:56:24.520
> 
> 标签：android, cordova

我正在使用 PhoneGap，当我运行我的应用程序时，我收到错误**Channel is unrecoverable broken and will be disposed！**我的申请被关闭了。这是我的代码：

```
public class DossiuerActivity extends DroidGap {
/** Called when the activity is first created. */
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/menu.html");
  }
} 
```

请告诉我我做错了什么。

# android - 如何在android中传递不同的数据对象来自定义列表适配器

> ID：10327943
> 
> 赞同：0
> 
> 时间：2012-04-26T05:56:25.823
> 
> 标签：android

我有 3 个不同的 do 类（它包含将返回列表的数据）。如果用户选择 TableName，我有条件，我必须在适配器中传递 TableDo，在列表视图中生成 TableDo 值。如果用户选择椅子，我必须将 ChairDo 传递给适配器以在列表视图中生成chairdo 值。谁能告诉我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:27:39.713

在您的适配器构造函数中，只需添加一个标志，以便它告诉您要包​​含的列表和其他功能。

例如

```
 Adapter(Context context,ArrayList myList,int option){
     switch(option){
         case TABLE:
         //GET array list for table
         case CHAIR:
         //GET array list for chair
     }
} 
```

同样你可以在这个适配器的其他地方做同样的事情

# java - 使用 Java 小程序是否会使页面加载速度变慢？

> ID：10327946
> 
> 赞同：0
> 
> 时间：2012-04-26T05:56:42.293
> 
> 标签：java, browser, applet

```
package javaapplication3;

import java.applet.Applet;
import java.awt.*;

/*<applet code="NewApplet" width="3000" height="80">
<param name="fontName" value="Courrier"></applet>*/
public class NewApplet extends Applet{
    int c,d;

    public void start(){
      c=9;d=8;
    }

    public void paint(Graphics g)
    {
      g.drawString("Muliplication"+c*d,0,10);
    }
} 
```

我在许多站点中阅读了 Java 小程序的许多优点/缺点，但我仍然想知道一些事情：

1.  用户是否需要在他/她的系统上安装 JDK 和 JRE 才能在 Web 浏览器上运行小程序？
2.  请问这个程序会让浏览器下载这两个包（`java.applet.Applet`, `java.awt.*`）吗？
3.  使用 Applet 是好是坏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:04:13.797

1.  只有 JRE
2.  不，它们包含在 JRE 中
3.  糟糕的是，Java 小程序不再是推荐的 Web 技术，而且您的许多用户可能无法正确看到它们。Java 小程序应该保留给一些特殊的应用程序，并且可能仅限于 Intranet。

在 Java 小程序中完成的大部分内容现在可以使用 HTML5、Javascript、Ajax 等编写“Web 2.0 风格”，而无需任何插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T06:02:41.193

1.  JRE 不是 JDK
2.  看看这个，因为你似乎还没有理解 java 包的概念 en.wikipedia.org/wiki/Java_package
3.  阅读： [http ://www.ehow.com/info_12152621_advantages-disadvantages-using-java-applets.html](http://www.ehow.com/info_12152621_advantages-disadvantages-using-java-applets.html)

# java - 过滤器卷积 Java - 它是如何工作的？

> ID：10327957
> 
> 赞同：0
> 
> 时间：2012-04-26T05:57:59.673
> 
> 标签：java, bufferedimage, graphics2d

我正在制作一个应用程序，将一些过滤器应用于java上加载的图像..

我被困在创建兼容缓冲图像、获取 graphics2d 对象并渲染我的新图像的位置。

这是我创建 BufferedImage 兼容的代码。

```
pbi=obi.getSubimage(0, 0, obi.getWidth(),obi.getHeight());
            int altoImagen=pbi.getHeight();
            int anchoImagen=pbi.getWidth();
            pbi=new BufferedImage(anchoImagen,altoImagen,BufferedImage.TYPE_INT_RGB);
            g2=pbi.createGraphics(); 
```

之后，我使用原始图像在obi OriginalBufferedImage上应用过滤器..

```
float ninth=1.0f/9.0f;
        float[]blurKernel={
            ninth,ninth,ninth,
            ninth,ninth,ninth,
            ninth,ninth,ninth
        };
        ConvolveOp op=new ConvolveOp(new Kernel(3,3,blurKernel));
        obi=op.filter(obi,null);    
        lienzo.repaint();
        g2.drawImage(obi, null,null); 
```

问题，我可以弄清楚是什么..是新图像没有渲染..

我认为这发生在我这样做的时候`g2=pbi.createGraphics`..但是在许多教程中必须完成这一步..

有人可以准确地解释我的渲染是如何工作的吗？

我没有使用组件，而是使用 Graphics2d.drawImage() 将图像（和图形）渲染到 JPanel 中。

# linux - 是否可以将“可执行文件”的文本和视觉方面输出到网站中？

> ID：10327963
> 
> 赞同：0
> 
> 时间：2012-04-26T05:58:25.857
> 
> 标签：linux, apache, pipe, wine

我正在查看我喜欢的 Windows 可执行文件。我希望能够通过我的谷歌手机访问它。因此，我想将可执行文件放入一个网站并将该网站加载到我的手机中，以便从我的手机上运行该程序。我的 Web 服务器在 Linux (ubuntu) 上。我正在使用 Apache、PHP 和 MySQL。所以，我认为我需要使用 WINE 让可执行文件在 Ubuntu 上运行，然后以某种方式需要将视觉元素或程序本身通过管道传输到网页中。这实用吗？这可能吗？如果没有，是否有任何替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:05:25.037

我不确定开发经验的水平是多少，但您所描述的一切听起来都不可能。设置一个 HTTP 轮询机制来获取应用程序的最新屏幕截图，然后使用图像映射将您的点击转换回服务器，所有这些都是完全合理的努力。我不能说它显然会运作得如何。

我鼓励你尝试不管。即使它不起作用，我敢肯定社区会希望看到一个开源项目尝试这样做，如果你在面试中把它拿出来，雇主就会吃掉这种东西。如果一个求职者进来谈论他们如何尝试这样的事情，我会感到震惊，所以我个人说去吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:04:58.310

这肯定是一个有趣的项目，我当然会敦促你看透这一点。

绝对有可能实现这一点，据我回忆，[VNC 库](http://libvncserver.sourceforge.net/)肯定有 C API ，所以虽然您的起点是一个可以查看正在运行的应用程序的网页，但您可以在某处部署一个使用 VNC 库 API 的 web 服务对于查看和控制应用程序，然后可以使用位图/png 图像更新网页，该图像应该足够直接以生成。作为一项网络服务，它可以从您的原始网页获取 http 请求，因此是完全可控的。

# string - Visual Studio C++ typedef向量错误

> ID：10327968
> 
> 赞同：0
> 
> 时间：2012-04-26T05:58:40.220
> 
> 标签：string, visual-studio, visual-c++, vector, typedef

我正在尝试在 Visual C++ 2005 中定义一个字符串向量，如下所示：

```
void main()
{    
   typedef vector<std::string> temp; 
```

但是，我收到一个错误：

```
error C4430: missing type specifier - int assumed 
```

我已经包含了 string.h

可能是什么原因？我做错什么了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:44:02.503

如果你是`using namespace std;`你必须说`typedef vector<string> temp;`或说`typedef vector<::std::string> temp;`因为在命名空间std中也可以有一个名为std的子命名空间。

# android - 如何从 Android 中的 RingtoneManger 获取铃声列表？

> ID：10327971
> 
> 赞同：1
> 
> 时间：2012-04-26T05:58:58.777
> 
> 标签：android, list, ringtone, items

我想实现一个应用程序来从 RingtoneManager 获取列表中的所有铃声名称。我已经实现了我的应用程序来带来设备中可用的所有铃声，如下所示：

```
 Intent intent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
    startActivity(intent); 
```

当启动我的应用程序时，我得到一个对话框。在该对话框中，我在带有单选按钮的列表视图中设置了一组铃声。我想将该列表中的所有项目打印到我的应用程序中。

如何打印默认铃声管理器列表视图中的所有项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:31:17.273

有没有试过的`getCursor()`方法`RingtoneManager`？

根据[文档](http://developer.android.com/reference/android/media/RingtoneManager.html#getCursor%28%29)：

```
public Cursor getCursor () 
```

*返回所有可用铃声的光标。返回的游标将与每次调用此方法时返回的游标相同，因此不要关闭（）游标。可以安全地 deactivate() 游标。如果没有使用 RingtoneManager(Activity)，调用者应该通过其活动的生命周期来管理返回的游标，以防止游标泄漏。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-02T17:23:25.047

你可以做

```
 RingtoneManager ringtoneManager = new RingtoneManager(yourActivity);
    ringtoneManager.setType(RingtoneManager.TYPE_RINGTONE);
    Cursor cursor = ringtoneManager.getCursor();
    while (cursor.moveToNext()) {
     System.out.println(cursor.getString(RingtoneManager.TITLE_COLUMN_INDEX));
     System.out.println(cursor.getString(RingtoneManager.URI_COLUMN_INDEX));
    } 
```

# vim - Vim：查找任何不以“WORD”结尾的行

> ID：10327984
> 
> 赞同：16
> 
> 时间：2012-04-26T06:00:08.260
> 
> 标签：vim

在 vim 中，我如何搜索***不***以（在这种情况下）单词“DROP”结尾的任何行？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-26T06:03:11.443

```
/\(DROP\)\@<!$ 
```

这使用了一个零宽度的负后视断言。它只找到行尾，并且*只*找到没有`DROP`紧接在它们之前的行尾。

如果要查找整行，可以使用：

```
/^.*\(DROP\)\@<!$ 
```

* * *

请注意，您必须将其括`DROP`起来，`\( .. \)`因为前瞻和后瞻断言只会匹配单个“原子”。因此，您使用括号将您的单词组合成一个原子。

如果你尝试过`/DROP\@<!$`，那么你会得到像这里的粗体部分这样的搜索结果：

> abcdef
> 测试测试**DRO**
> 12345DROP
> 12345 **DRO**
> 12345

* * *

此页面上有这些断言的教程，尽管它不使用 VIM 正则表达式语法：

*   [http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

您也可以在 VIM 中键入此命令以获取有关命令的帮助：

```
:help \@<! 
```

类似的断言：

```
\@=
\@<=
\@! 
```

# android - 覆盖后退按钮默认活动堆栈操作

> ID：10327985
> 
> 赞同：2
> 
> 时间：2012-04-26T06:00:10.087
> 
> 标签：android, android-layout, android-intent

我想覆盖我的应用程序中后退按钮的默认行为，以便显示特定的活动（应用程序启动时加载的活动），而不是堆栈上的前一个活动。有什么好的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:03:13.050

`finish()`所有中间*活动*。

你也可以使用`Intent.FLAG_ACTIVITY_CLEAR_TOP`

```
@Override
public void onBackPressed()
{
Intent mIntent= new Intent(mContext, mainFirst.class)
    startActivity(mIntent);
    mIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    finish();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T06:06:29.810

```
Intent myIntent = new Intent(CurrentActivity.this, NextActivity.class);
myIntent .setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    CurrentActivity.this.startActivity(myIntent); 
```

NextActivity 是您的主要活动

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T06:04:48.837

当您使用意图进入下一个活动时，只需在此之后调用 finish()。例如活动-1,2,3。您的流量来自 1->2->3

因此，当您将意图从 2 调用到 3 时，只需在该意图之后完成（）活动 2。所以当你后按时你会回到 1。

其他选择是

```
@override onBackPressed 
```

意图活动 1。但您必须通过使用相应的标志确保您只有 1 的 1 个实例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T06:04:00.787

```
@Override
public void onBackPressed()
{
    startActivity(new Intent(mContext, FirstActivity.class));
    finish();
} 
```

# java - JVM 是否在 OutOfMemoryError 之后自行终止

> ID：10327989
> 
> 赞同：7
> 
> 时间：2012-04-26T06:00:46.537
> 
> 标签：java

在 OutOfMemoryError 之后，JVM 会自行终止吗？如果不是那为什么？它会尝试取回资源吗？还是有其他原因？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T06:16:38.433

OutOfMemoryError 不会终止 JVM。

如果它未被捕获，它将终止引发错误的线程。其他线程继续运行得很好，除非它们当然也会导致 OutOfMemoryErrors。

只有在所有线程都已终止或所有剩余线程都是守护线程之后，JVM 才会终止。

它不会终止 JVM，因为它不必这样做。终止JVM是一个*非常极端*的操作，并不是轻而易举的。

它不会尝试取回任何资源，因为没有任何东西可以检索。抛出OOME的原因仅仅是：JVM无法获取资源，因为所有资源都被占用了。它已经做了它所能做的一切。

必须记住，OOME不一定是在消耗内存最多的线程中抛出的。一个线程可以消耗所有内存并将处理交给另一个尝试分配“仅一个字节”的线程。Thas 当然会失败，并且尝试分配一个字节的线程会被 OOME 中断。这就是为什么从 OOME 中恢复几乎是不可能的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T06:07:06.050

JVM 终止，如果（与任何其他异常或错误一样）它没有在任何地方被捕获并且没有其他线程是守护线程。

它不会立即终止，因为`OutOfMemoryError`可以捕获并且应用程序可以尝试进行一些错误处理，从仅记录错误到关闭该计算并以其他方式正常继续。

后者在发生错误时被认为是有风险的，但通常可能没有任何问题，因为许多对象可能会超出抛出点和捕获点之间的范围`OutOfMemoryError`，然后可以通过垃圾收集释放这些对象以提供编程新的内存来使用。如果`OutOfMemoryError`发生这种情况是因为一个特定的计算需要比可用内存更多的内存，并且应用程序随后执行了其他操作，那很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T06:06:32.580

这取决于您是否处理该错误。如果你不这样做，那么应用程序和当前线程将被终止。如果这个线程恰好是最后一个运行的线程（在大多数情况下是当前应用程序的主线程），JVM 也会退出（尽管在退出之前它可能仍会进行一些日志记录、创建内存转储等）。

如果您处理错误，您通常只需在停止 JVM 之前尝试进行一些清理。在大多数情况下，尝试从`OutOfMemoryError`. 有关更多详细信息，请参阅此处：[JVM 可以从 OutOfMemoryError 中恢复而无需重新启动](https://stackoverflow.com/questions/3058198/can-the-jvm-recover-from-an-outofmemoryerror-without-a-restart)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T06:06:36.487

它不会自行终止，它只是抛出一个错误，说它无法创建更多对象，因为内存不可用，尽管您可以通过处理错误继续代码，但您必须仅使用当前创建的对象生存，或者可能是释放或取消您不再需要的那些。

PS：但它不是处理此类错误并继续的推荐方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T07:17:59.893

通常，JVM 仅在最后一个非守护线程退出时终止。抛出 OutOfMemoryError 或任何其他类型的错误或异常可能会导致最后一个非守护线程存在，如果它没有被捕获。

但是，如果错误被捕获并且没有重新抛出，或者有另一个非守护线程正在运行，则 JVM 不会退出。也就是说，导致程序退出的任何特定错误都没有什么特别之处。

有两个资格

*   System.exit() 将导致 JVM 开始关闭并且无法被捕获。拥有多个线程没有区别。
*   ThreadDeath 错误的特殊之处在于默认情况下不会打印。否则，它的行为就像任何其他错误一样。

# c++ - C++ CGI 脚本，读取表单数据

> ID：10327991
> 
> 赞同：1
> 
> 时间：2012-04-26T06:01:17.363
> 
> 标签：c++, c, forms, cgi

我一直在使用[本教程](http://library.thinkquest.org/16728/content/cgi/cplusplus.html)制作 C++ CGI 脚本。但是，当我尝试读取表单 POST 数据时，它没有编译：

```
 char* lpszContentLength = getenv("CONTENT_LENGTH");
  char* lpszBuffer;
  int nContentLength = atoi(lpszContentLength);

  lpszBuffer = malloc(lpszContentLength+1);  // allocate a buffer
  memset(lpszBuffer, 0, lpszContentLength+1);  // zero it out

  fread(lpszBuffer,1,lpszContentLength,stdin);  // get data 
```

这是编译器的抱怨：

```
cgi.cpp: In function ‘int main()’:
cgi.cpp:12: error: invalid conversion from ‘char*’ to ‘size_t’
cgi.cpp:12: error:   initializing argument 1 of ‘void* malloc(size_t)’
cgi.cpp:12: error: invalid conversion from ‘void*’ to ‘char*’
cgi.cpp:13: error: ‘memset’ was not declared in this scope
cgi.cpp:15: error: invalid conversion from ‘char*’ to ‘size_t’
cgi.cpp:15: error:   initializing argument 3 of ‘size_t fread(void*, size_t, size_t, FILE*)’ 
```

其中 ln 12 是以“lpszBuffer”开头的那个。

我是 C++ 新手，所以我不确定如何解决这个问题，或者为什么会发生这种情况。也许它只是过时的代码......我很乐意接受其他一些解决方案来从 POST 请求中读取数据。

**编辑：** 我已经根据你们的修复更新了代码。

```
 char* lpszContentLength = getenv("CONTENT_LENGTH");
  char* lpszBuffer;
  int nContentLength = atoi(lpszContentLength);

  lpszBuffer = (char*)malloc(nContentLength+1);  // allocate a buffer
  memset(lpszBuffer, 0, nContentLength+1);  // zero it out

  fread(lpszBuffer,1,nContentLength,stdin);  // get data 
```

但是，我仍然从 atoi 收到分段错误：

```
==23419== Invalid read of size 1
==23419==    at 0x498DA8C: ____strtol_l_internal (strtol_l.c:298)
==23419==    by 0x498D7EF: strtol (strtol.c:110)
==23419==    by 0x498AB60: atoi (atoi.c:28)
==23419==    by 0x8048899: main (in .../cgi.cpp.cgi)
==23419==  Address 0x0 is not stack'd, malloc'd or (recently) free'd 
```

这里有什么问题？如果 POST 为空白，我假设它与 POST 表单提交有关...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:07:58.530

这是一个类型转换问题`C++`。`lpszBuffer`是 a`char*`但是，`malloc`返回 a `void*`。所以你需要将它转换为`char*`. 另请注意，您正在尝试将`char*`(lpszContentLength) 用作不正确的整数值。这也必须在您的其他函数中更新 - 您之前已使用该`atoi`函数对其进行了转换；所以使用那个值。

所以该行应该是

```
lpszBuffer = (char*)malloc(nContentLength+1); 
```

最后，要使用`memset`，您必须`#include <string.h>`在源文件的开头。

`free`此外，作为一种好的做法（特别是如果脚本运行了相当长的时间），当你完成它时不要忘记你的记忆。也就是说，当您不再使用它时，分配的任何东西都`malloc`应该调用它。`free`因此，如果您`lpszBuffer`通过整个函数使用，则在函数结束时只需执行`free(lpszBuffer);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:50:56.340

> 错误：从 'char*' 到 'size_t' 的无效转换</p>

这是由于尝试使用`lpszContentLength`（它是 a `char*`，在这种情况下是可能表示数字的字符串）作为 a `size_t`（通常是长整数）而引起的。要解决这个问题，您首先需要转换`lpszContentLength`为整数值。我建议[`strtol()`](http://linux.die.net/man/3/strtol)这样做，因为它会检测错误 - 您需要处理这些错误。

查看教程，他们已经使用`atoi()`. `nContentLength`您还可以通过使用他们错误地尝试使用的任何地方来修复此错误`lpszContentLength`。他们的代码一定从未经过测试。

请注意，`atoi()`它不会检测错误 - 因此，一旦您完成本教程，`strtol()`通过适当的错误检查更改为一个很好的学习练习。

* * *

> 错误：从 'void*' 到 'char*' 的无效转换</p>

这是由于缺少对`(char*)`malloc 返回值的强制转换造成的。在 C++ 中，强制转换是必需的：

```
lpszBuffer = (char*)malloc(convertedNumber+1); 
```

* * *

> 错误：未在此范围内声明“memset”

这是由于不包括 memset 的标头造成的。memset的[手册页](http://www.manpagez.com/man/3/memset/)告诉您需要添加：

```
#include <string.h> 
```

* * *

> 错误：从 'char*' 到 'size_t' 的无效转换</p>
> 
> 错误：正在初始化“size_t fread(void*, size_t, size_t, FILE*)”的参数 3</p>

这些都是由 lpszContentLength 是一个字符字符串引起的，当它需要是一个整数类型时。请参阅上面的第一个错误。

# windows-phone-7.1 - Windows Phone ContentPanel_ManipulationStarted 不工作

> ID：10327997
> 
> 赞同：0
> 
> 时间：2012-04-26T06:01:37.143
> 
> 标签：windows-phone-7.1, windows-phone

嗨，我正在为 WP 7.1 在 VS2010 中使用 C# 编写一个 Windows 手机应用程序

我尝试让用户点击 contentPanel（网格）然后显示某些内容或转到另一个页面。

但是，我发现它无法正常工作。

这是我在 xaml 中的代码

```
<phone:PhoneApplicationPage 
    x:Class="MyApp.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="True">

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--TitlePanel contains the name of the application and page title-->
        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
            <TextBlock x:Name="ApplicationTitle" Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
            <TextBlock x:Name="PageTitle" Text="page" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
        </StackPanel>

        <!--ContentPanel - place additional content here-->
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0" ManipulationStarted="ContentPanel_ManipulationStarted">
            <TextBlock x:Name="lblTap" Text="Tap to Start" Height="30" HorizontalAlignment="Center" VerticalAlignment="Center"></TextBlock>
        </Grid>
    </Grid>
</phone:PhoneApplicationPage> 
```

在cs中

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;

namespace MyApp
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            InitializeComponent();
        }

        private void ContentPanel_ManipulationStarted(object sender, ManipulationStartedEventArgs e)
        {
            NavigationService.Navigate(new Uri("/secondpage.xaml", UriKind.Relative));
        }
    }
} 
```

它不起作用，我只能通过文本块“点击开始”进入第二页，而不是整个网格区域。

我什至尝试将方法更改`NavigationService.Navigate(new Uri("/secondpage.xaml", UriKind.Relative));`为`ContentPanel_ManipulationStarted`但`MessageBox.Show("Tap");`仍然无法正常工作。

我知道我可以重写`OnManipulationStarted`实现的方法。但我认为它应该由事件处理程序完成，我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:55:31.670

更好的方法是使用另一个控件来填充网格空间并检查**Tap**手势（将 Textblock 标记为**IsHitTestVisible="false"**。这样您就可以在页面网格中的任何位置获得 Tap 。

```
 <Grid x:Name="ContentPanel"
          Grid.Row="1"
          Margin="12,0,12,0">
        <Rectangle Tap="ContentPanel_Tap" />

        <TextBlock x:Name="lblTap"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   IsHitTestVisible="False"
                   Text="Tap to Start" />
    </Grid> 
```