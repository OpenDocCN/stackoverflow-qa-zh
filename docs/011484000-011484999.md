# StackOverflow 问答 11484000-11484999

# qt - 未找到 QtGui4.dll 入口点

> ID：11484000
> 
> 赞同：1
> 
> 时间：2012-07-14T13:05:47.943
> 
> 标签：qt, visual-c++, qt4, qt4.8

我正在尝试在 Windows 中编写 Qt3D 应用程序。当我尝试编译程序并运行它时出现错误。错误消息是：'在动态链接库 QtGui4.dll 中找不到过程入口点 ??4QImage@@AEAAV0@$$QAV0@@Z'。我的编译器是 Microsoft Visual C++ 9.0，Qt 版本是 4.8.1。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T19:58:07.137

您是否在从 IDE 和独立 exe 运行以及在调试和发布模式下都遇到问题。如果其中一些工作正常，请确保将正确的 QtGui4.dll 复制到生成可执行文件的相同路径。

# mysql - RDBMS 可以在另一台机器上拥有它的数据目录吗

> ID：11484002
> 
> 赞同：0
> 
> 时间：2012-07-14T13:06:09.283
> 
> 标签：mysql, rdbms, datadirectory

我正在玩mysql，命令`select @@datadir;`让我思考。对于像我这样没有专用服务器的人来说，我被降级为便宜的vps，因为一旦我的磁盘空间配额用完，就无法调整我的配额向上。

由于新连接将是一个新线程，我想我的 datadir 放在 dropbox 或 google 上进行某种形式的网络多线程处理会很方便。是否有数据库系统允许通过网络访问 datadir？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:55:52.260

MySQL 数据库需要目录路径。

你可以欺骗它使用 NFS。但是，请注意“标准”linux NFS 不是一个很好的解决方案：它引入了可能导致数据库锁定的锁（经验丰富）。

否则，某些存储设备会提供自己的 NFS 客户端。

或者你可以使用 SAN/NAS/Whatever。我会进一步建议您可能正在寻找的是单独的存储设备，而不是单独的“机器”。

# c++ - C++ - typeid()，用于派生类不返回正确的类型

> ID：11484010
> 
> 赞同：8
> 
> 时间：2012-07-14T13:07:19.237
> 
> 标签：c++, inheritance, typeid

也许我误解了继承是如何在这里工作的，但这是我的问题：

我有一个类 Option 和一个派生自它的类 RoomOption。我有另一个类 Room，其中包含一个 shared_ptrs 向量。在 main 中，我向该向量添加了 RoomOption。然后，使用 typeid() 检查类型，它告诉我它是一个选项。根据我的阅读， typeid 应该返回派生类型，并且 shared_ptrs 不会导致切片，所以我不确定我做错了什么。

这是代码：

房间.h：

```
vector<shared_ptr<Option> > options;
void addOption(shared_ptr<Option>);
shared_ptr<Option> getOption(int); 
```

房间.cpp：

```
void Room::addOption(shared_ptr<Option> option){
    options.push_back(option);
}

shared_ptr<Option> Room::getOption(int i){
    return options[i];
} 
```

主要的：

```
shared_ptr<Room> outside(new Room(0, "", ""));
outside->addOption(shared_ptr<RoomOption>(new RoomOption(0, "Go inside", hallway)));
cout<<typeid(player->getRoom()->getOption(0)).name().get()<<endl; 
//This line prints "class std::tr1::shared_ptr<class Option> 
```

我突然想到，可能在添加或获取选项时，由于返回/参数类型， RoomOption 被强制转换为选项。如果是这种情况，那么我应该如何存储一种以上类型的向量？还是我把这一切都弄错了？=\

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-14T13:21:32.690

`typeid`多态（对于具有至少一个虚函数的类）和非多态类型的工作方式不同：

*   如果类型是多态的，则表示它的相应`typeinfo`结构在运行时确定（vtable 指针通常用于该目的，但这是一个实现细节）

*   如果类型不是多态的，则在编译时确定相应的 typeinfo 结构

在您的情况下，您实际上有一个多态 class `Option`，但`shared_ptr<Option>`itef 根本不是多态的。它基本上是一个装有`Option*`. 和之间绝对*没有*继承关系。`Option``shared_ptr<Option>`

如果要获取真实类型，首先需要使用以下方法从其容器中提取真实指针`Option* shared_ptr<Option>::get()`：

```
Option * myPtr = player->getRoom()->getOption(0).get();
cout << typeid(*myPtr).name(); << endl; 
```

或者（它是完全相同的东西）：

```
Option& myPtr = *player->getRoom()->getOption(0);
cout << typeid(myPtr).name(); << endl; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T13:16:49.000

首先你得到了 shared_ptr 的 typeid。

然后你应该使用[dynamic_cast](http://www.cplusplus.com/doc/tutorial/typecasting)而不是 typeid。例如：

```
if (dynamic_cast<RoomOption*>(player->getRoom()->getOption(0).get()) != 0){
    cout << "Its a RoomOption!" << endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T13:11:56.727

`shared_ptr<Option>`a指向的对象的类型是它的值的一部分，而不是它的类型。所以这行代码被破坏了：

```
cout<<typeid(player->getRoom()->getOption(0)).name()<<endl; 
```

你要这个：

```
cout<<typeid(player->getRoom()->getOption(0).get()).name()<<endl; 
```

也许：

```
cout<<typeid(*(player->getRoom()->getOption(0))).name()<<endl; 
```

什么`typeid`是告诉你你传递给它的东西的实际类型。你通过了一个`shared_ptr<Option>`. 它不会查看对象内部以查看其中包含的内容。

# haskell - 无法同时接受 2 个输入

> ID：11484019
> 
> 赞同：0
> 
> 时间：2012-07-14T13:08:20.020
> 
> 标签：haskell, getline

我是一个haskell初学者。我的代码：

```
module Main (main) where

import System.IO

--Type for identifying Students.
data Student = Student {
        name :: String,
        regnum :: Integer
    }   deriving (Show, Read)

getData :: IO (String)
getData = do
    putStr "\tEnter the student's name: "
    name <- getLine
    putStr "\tEnter the registration number: "
    regstr <- getLine
    let regno = (read regstr) :: Integer
    return (show ( Student name regno ))

addData :: String -> IO (Bool)
addData filename = do
    fileData <- getData
    appendFile filename fileData
    return True

printData :: String -> IO (Bool)
printData filename = do
    fileData <- readFile filename
    putStrLn fileData
    return True

resetFile :: String -> IO (Bool)
resetFile filename = writeFile filename "" >> return True

action :: Char -> String -> IO (Bool)
action option filename =
    if option == '1'
        then addData filename
    else if option == '2'
        then printData filename
    else if option == '3'
        then resetFile filename
    else return False

main = do 
        putStr "What do you want to do?\n\t1) Add a new record to a file.\n\t2) Read a record from a file.\n\t3) Reset the file.\n>> "
        option <- getChar
        action option "records.txt" 
```

我得到的输出是：

```
What do you want to do?
    1) Add a new record to a file.
    2) Read a record from a file.
    3) Reset the file.
>> 1
    Enter the student's name:   Enter the registration number: 
```

因此，我无法为学生的姓名提供输入。我在**ghci**上运行代码。当我试图查看它如何作为可执行文件运行时，它给出了更奇怪的输出。

```
What do you want to do?
    1) Add a new record to a file.
    2) Read a record from a file.
    3) Reset the file. 
```

（注意它不打印“>>”）。只有在我按两次 Enter 后，它才会打印“>>”。我不明白这里发生了什么。非常欢迎对我的代码进行其他改进。

* * *

编辑:: 通过使用 getLine 而不是 getChar ，该程序可以在 ghci 上运行（感谢 Daniel Fischer）。但是编译的时候还是不行。新的输出是：

```
What do you want to do?
    1) Add a new record to a file.
    2) Read a record from a file.
    3) Reset the file.
1   (Typed my me)
Tom (Typed my me)
234 (Typed my me)
>> Enter the student's name: Enter the registration number: 
```

在重新运行以读取文件时：

```
What do you want to do?
    1) Add a new record to a file.
    2) Read a record from a file.
    3) Reset the file.
2   (Typed my me)
>> Student {name = "Tom", regnum = 234} 
```

为什么`putStr`输入后会打印“>>”和getData？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T13:19:48.680

```
option <- getChar 
```

使用默认缓冲设置，程序仅在输入换行符后接收输入。但是`getChar`， 仅删除从输入缓冲区输入的第一个字符，因此以下`getLine`内容会从输入缓冲区中读取，直到找到换行符为止。在你的情况下，立即开始。

您可以（至少在 *nix-ish 系统上，缓冲控制过去在 Windows 上无法正常工作，我不知道现在是否可以）通过关闭缓冲来解决问题`stdin`，

```
main = do
    hSetBuffering stdin NoBuffering
    ... 
```

所以在`getChar`没有输入换行符的情况下接收输入。或者，不要使用`getChar`for 选项，而是使用

```
(option:_) <- getLine 
```

所以输入缓冲区中没有任何东西可以自动满足以下`getLine`.

此外，要在输入之前打印出提示，请调用

```
hFlush stdout 
```

刷新输出缓冲区，或关闭缓冲`stdout`。

最简单的可能是定义

```
prompt :: String -> IO ()
prompt msg = do
    putStr msg
    hFlush stdout 
```

并将调用替换为`putStr`调用`prompt`。

* * *

对编码风格的批评：

```
getData :: IO (String) 
```

您将`IO`类型构造函数的参数括在括号中。这不是必要的和单调的。正常的写法是`IO String`。（您可能在某处看到了括号`IO ()`，但这些括号不是不包含任何类型的括号，这是该类型的类型构造函数`()`。令人困惑？是的。）

```
action :: Char -> String -> IO (Bool)
action option filename =
    if option == '1'
        then addData filename
    else if option == '2'
        then printData filename
    else if option == '3'
        then resetFile filename
    else return False 
```

那应该变成一个`case`，

```
action option filename
    = case option of
        '1' -> addData filename
        '2' -> printData filename
        '3' -> resetFile filename
        _   -> return False 
```

除此之外，代码看起来很干净。

# javascript - 如何启用 Javascript 来控制 Phonegap Childbrowser？

> ID：11484023
> 
> 赞同：1
> 
> 时间：2012-07-14T13:09:24.747
> 
> 标签：javascript, html, cordova, childbrowser

我使用 Phonegap Childbrowser 进行 oAuth 2.0 身份验证。身份验证后，我想在网页中使用 Javascript 隐藏 Childbrowser 而不按“完成”按钮。怎么做？

比如认证后，我们总会得到一些回调参数。这意味着我们的身份验证成功。这个时候，我们应该关闭浏览器，我想通过Javascript关闭浏览器，不按任何按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T03:26:20.457

捕获`onLocationChange`并`childBrowser`检查`url`参数以查看它是否包含您要查找的内容。如果是这样，请致电`childBrowser.close()`。

ChildBrowser 的一个奇怪之处在于它没有`.clear()`方法，因此我创建了一个名为`nothing.html`空白的页面。如果您不这样做，您将在下次使用 ChildBrowser 时简要地看到您的身份验证页面。这兼作我`redirectUrl`的 Facebook 和 Twitter 身份验证。所以当它到达那个页面时，我知道是时候关闭了。

```
var URL_NOTHING = 'nothing.html';
window.plugins.childBrowser.onLocationChange = function ( url ) {
    if ( url.indexOf( URL_NOTHING ) > -1 ) {
        if ( url.indexOf( 'oauth_token' ) > -1 ) { //twitter
            window.plugins.childBrowser.close();
            //do twittery stuff
        } else { //facebook
            window.plugins.childBrowser.close();
            //do facebooky stuff
        };
    };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:47:08.920

[ChildBrowser](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)插件有一种`close()`方法可以从 javascript 代码中关闭窗口。

```
window.plugins.childBrowser.close(); 
```

# python - 对于 Python 2 和 3，什么是好的面向命令的命令行框架？

> ID：11484029
> 
> 赞同：2
> 
> 时间：2012-07-14T13:10:19.507
> 
> 标签：python, command-line, python-3.x

我喜欢 cmdln 框架，用于编写类似`svn command argument`但仅适用于 Python 2 的程序。有什么好的 Python 3 替代方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T13:14:11.670

Python 标准库中的`argparse`模块也支持命令，它适用于 Python 2.x 和 3.x。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T13:24:26.853

如果你喜欢`cmdln`你仍然可以使用它，我认为：使用该`2to3`工具`cmdln.py`和示例`p4.py`，`svn.py`似乎可以生成工作代码。2-ness of`cmdln.py`似乎仅限于小的句法问题和命名。从差异中截取随机位：

```
-LOOP_ALWAYS, LOOP_NEVER, LOOP_IF_EMPTY = range(3)
+LOOP_ALWAYS, LOOP_NEVER, LOOP_IF_EMPTY = list(range(3))

-            except CmdlnUserError, ex:
+            except CmdlnUserError as ex:

-                            line = raw_input(self._prompt_str)
+                            line = input(self._prompt_str)

-        for marker, preprocessor in preprocessors.items():
+        for marker, preprocessor in list(preprocessors.items()):

-        func = handler.im_func
-        if func.func_defaults:
-            func_defaults = list(func.func_defaults)
+        func = handler.__func__
+        if func.__defaults__:
+            func_defaults = list(func.__defaults__)

-        co_argcount = handler.im_func.func_code.co_argcount
+        co_argcount = handler.__func__.__code__.co_argcount

-        if DEBUG: print "dedent: indent=%d: %r" % (indent, line)
+        if DEBUG: print("dedent: indent=%d: %r" % (indent, line)) 
```

等等，经过改造，应该可以得到预期的输出：

```
localhost-2:examples $ python3 p4.py add 
p4 add: opts={'filetype': None, 'changelist': None} paths=() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T13:34:18.830

您可能对[水泥感兴趣](http://cement.readthedocs.org/en/latest/index.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T13:14:17.350

[Cliff](http://cliff.readthedocs.org/en/latest/)看起来功能齐全，得到积极维护，可在 2.x 和 3.x 上运行。

# mysql - 这个 SQL 查询中的点是什么意思？

> ID：11484033
> 
> 赞同：12
> 
> 时间：2012-07-14T13:10:45.457
> 
> 标签：mysql

我是 MySQL 新手。谁能描述我从 jqgrid 的演示中获得主题的行，a.id 的含义是什么？这些点的含义是什么？

```
$SQL = "SELECT a.id, a.invdate, b.name, a.amount,a.tax,a.total,a.note FROM invheader a, clients b WHERE a.client_id=b.client_id ORDER BY $sidx $sord LIMIT $start , $limit"; 
```

您可以在此处找到示例：http: [//trirand.com/blog/jqgrid/jqgrid.html](http://trirand.com/blog/jqgrid/jqgrid.html) 在高级>多选

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-14T13:18:03.147

你在这里问了几个问题。要解决这些问题：

在`FROM`子句中，`a`用作`invheader`表的别名。`a`这意味着您可以通过短别名而不是完整的表名来引用该表。

因此，`a.id`指的是表的`id`列`invheader`。

`a`简单地给你的表加上别名, `b`,等通常被认为是不好的做法`c`，我建议你使用更有用的东西。

我建议您阅读一些基本的 MySQL 教程，因为这是基本原则。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-10T05:13:14.197

点（**.**）用于分隔板范围。所以 Songs.songId 的意思是先找到名为 Songs 的表，然后在 Songs 表中找到名为 songId 的字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-17T07:43:02.447

在我看来，DOT NOTATION 用于从语法的右侧获取信息。这意味着，a.id 这意味着您从“表”中获取数据。在这种情况下，您使用别名，然后运行“.id”，这意味着它从表中获取数据“ID”。如果错误，请评论错误的语句。谢谢你

# c# - C# 检查值是否存在于 List<> 中

> ID：11484038
> 
> 赞同：0
> 
> 时间：2012-07-14T13:11:40.953
> 
> 标签：c#

在c#中检查值是否存在`List`然后插入值的有效方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T13:13:02.707

您可以使用[Contains](http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx)方法检查值是否在列表中：

```
if(!valuesList.Contains(value)) 
{
  valuesList.Add(value);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T13:13:17.537

使用[`Contains`](http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx)和[`Add`](http://msdn.microsoft.com/en-us/library/3wcytfd1.aspx)：

```
if (!myList.Contains(myValue)) {
    myList.Add(myValue);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T13:13:18.143

您正在寻找[`Contains()`](http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx)和[`Add()`](http://msdn.microsoft.com/en-us/library/3wcytfd1)，快速示例：

```
if (!theList.Contains(theValue))
{
    theList.Add(theValue);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T13:14:09.423

使用方法`bool List.Contains(T)`检查和`void List.Add(T)`添加

或创建扩展：

```
public static void AddIfNotExist<T>(this List<T> list, T item)
{
    if (list.Contain(item))
    {
        list.Add(item);
    }
} 
```

使用`list.AddIfNotExist(item)`

# matlab - 求和 3 维矩阵 - Matlab 蛮力

> ID：11484039
> 
> 赞同：0
> 
> 时间：2012-07-14T13:11:55.390
> 
> 标签：matlab, optimization, for-loop, brute-force

嗨，我在下面的代码中有 3 维矩阵。我试图对每个“number_panels”和“number_turbines”组合的“n”的所有 24 个元素求和。

我在下面的内容并没有在第三维度上求和

对于 number_panels = 0:5

```
for number_turbines = 0:2

    for n = 1:24 % number of hours per day

hourly_deficit(number_panels + 1, number_turbines + 1, n) = Demand(n) -...     
(PV_supply(n)*number_panels) - (WT_supply(n)*number_turbines);

if hourly_deficit(number_panels + 1, number_turbines + 1, n)< 0

            hourly_deficit(number_panels + 1, number_turbines + 1, n) = 0;

        end
daily_deficit(number_panels + 1, number_turbines + 1) = sum(sum(sum(hourly_deficit(:,:,:)))) 

        hourly_total_RES(number_panels + 1, number_turbines + 1, n) = PV_supply(n)*number_panels + WT_supply(n)*number_turbines;

        if hourly_total_RES(number_panels + 1, number_turbines + 1, n) < Demand(n),

            renewables_penetration(number_panels + 1, number_turbines + 1, n) = (hourly_total_RES(number_panels + 1, number_turbines + 1, n)) / Demand(n); % ratio of renewable energy supply to demand

        else
            renewables_penetration(number_panels + 1, number_turbines + 1, n) = 1 ;

        end
             peak_deficit(number_panels + 1, number_turbines + 1,n) = max(hourly_deficit(number_panels + 1, number_turbines + 1,n));
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:30:17.270

在 MATLAB sum(X) 中，将矩阵 X 的所有元素一维相加。如果您只想计算一个特定维度的总和，请使用：

```
 S1=sum(X,dimension); 
```

其中，对于 3D 矩阵，“维度”为 1、2 或 3。

如果你想计算二维，那么你可以这样做：

```
 S2=sum(S1,dimension); 
```

这里的维度是 1 或 2。

根据您的代码，我认为如果您想在 for 循环中执行此操作，您应该这样做：

```
for number_panels = 0:5
   for number_turbines = 0:2
      for n = 1:24 % number of hours per day
         hourly_deficit(number_panels + 1, number_turbines + 1, n) =...
           Demand(n) - (PV_supply(n)*number_panels) - (WT_supply(n)*number_turbines);

         if hourly_deficit(number_panels + 1, number_turbines + 1, n)< 0
           hourly_deficit(number_panels + 1, number_turbines + 1, n) = 0;
      end
      daily_deficit(number_panels + 1, number_turbines + 1) = ...
        sum(hourly_deficit(number_panels + 1, number_turbines + 1,:));
    end
 end 
```

查看我添加的“：”： sum(hourly_deficit(number_panels + 1, number_turbines + 1,:));

# machine-learning - 机器学习中的样本和实例数

> ID：11484043
> 
> 赞同：2
> 
> 时间：2012-07-14T13:12:19.230
> 
> 标签：machine-learning

我正在尝试确定我应该收集的样本和数据实例的理想数量。基本上，我必须创建一个网络流量数据集。

我不确定每个样本中的样本和实例数量如何影响训练数据。大量样品好不好？那么，我是否应该尝试收集尽可能多的实例？

我的想法是在不同的日子里收集两个不同的样本。然后对于每个样本中的每个程序/协议，我将收集大约 30 个实例。

我将使用 SVM 算法。

感谢您的帮助和任何澄清。而且，我也不确定我是否混淆了定义（样本与实例）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T19:39:05.877

我不完全确定您在实例和样本之间所做的区别（通常它们的含义相同），但总的来说（只要您的数据收集过程是合理的）数据越多越好。对大多数学习者的表现做出一些概率保证所需的数据实例数量有一些结果，但这些通常不实用，并且会超出您需要的数据量。因此，总体而言，在收集成本和运行学习算法的计算成本方面收集尽可能多的数据。

# javascript - 通过http从客户端发送文件到客户端

> ID：11484055
> 
> 赞同：0
> 
> 时间：2012-07-14T13:14:01.517
> 
> 标签：javascript, http

有谁知道如何通过http实现从客户端到客户端的文件发送。这是类似的例子，但找不到如何实现它：http: [//jetbytes.com/](http://jetbytes.com/)有 什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:47:30.943

您提供的示例也适用于服务器。数据可能直接在接收方上流式传输，但仍然通过服务器。唯一的优点是他们不必在服务器上保留千兆字节的数据。

如果您对实现感到好奇，请启动 Firebug 并查看*Network*选项卡。

选择文件后，文件名将发送到服务器，并返回下载 URL：

```
files1 http://files1.jetbytes.com/42621cb32af927558 
```

然后浏览器实际上每秒**轮询服务器，询问是否有人请求下载。**一旦响应从`wait 0`变为`wait 1`，浏览器中的 Javascript 就知道已请求下载，并 POST 带有文件的表单。

然后服务器端通过管道将 POST 数据直接发送到下载器。关于实现我们只能猜测，但 Node.js 可能是一个不错的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T13:56:21.540

猜猜你可以复制他们的行为，大致如下。

让我们命名交换的三个部分：发送者（在浏览器中）、服务器（嗯...服务器代码）、接收者（在浏览器中）。

*   Sender UI：用户选择一个文件；
*   发件人：定期（这里是每秒），更新服务器说发件人已准备好发送文件。当服务器尚未准备好时，它只是向发件人回答“我还没有准备好”；
*   Receiver 获取生成的 URL；
*   发件人（和以前一样）更新服务器说它已准备好发送文件。这次服务器回答“我准备好了”；
*   发件人只需 POST 文件（就像在最简单的 HTML 表单中所做的那样）。
    *   服务器将 POST 数据中继到接收器（带有相关标头）；
    *   此操作需要时间，因此以下操作仅用于更新进度条 Sender 端。
*   发件人定期（这里是每秒）询问服务器到目前为止获得了多少数据；服务器回答它收到了多少以及直到最后它期望多少。
*   发件人更新其进度条。
*   ...
*   发件人询问服务器到目前为止获得了多少数据；服务器回答完成。
*   关闭例程就三个部分的交流。

当然必须有改进的空间：

*   定期更新可以被另一种技术取代（参见[http://en.wikipedia.org/wiki/Push_technology](http://en.wikipedia.org/wiki/Push_technology)）；
*   如果传输在完成之前被中断，则可以在传输中断的地方继续；
*   ...许多其他方面

对于实现，大部分工作将在客户端进行，这里描述的所有内容都可以使用 jQuery 实现。在服务器上，两个目标是传输数据和回复发送者。您必须为自己定义一个轻量级协议，以表示“我 [尚未] 准备好”、“到目前为止我有 N 个字节”、“我完成了”。

# java - How to script input for a Java program

> ID：11484059
> 
> 赞同：4
> 
> 时间：2012-07-14T13:14:25.553
> 
> 标签：java, groovy, dsl

I'm writing a Java program that requires its (technical) users to write scripts that it uses as input; it interprets these scripts into a series of actions and executes them. I am currently looking for the cleanest way to implement the script/configuration language. I was originally thinking of heading down the XML route, but the nature of the required input really is a procedural, linear *flow* of actions that need to be executed:

```
function move(Block b, Position p) {
    // user-defined algorithm for moving block "b" to position "p"
}

Block a = getBlockA();
Position p = getPositionP();

move(a, p); 
```

Etc. **Please note**: the above is an *example* only and **does not** constitute the exact syntax I am looking to achieve. I am still in the "30,000 ft view"-design phase, and don't know what my concreted scripting language will ultimately look like. I only provide this example to show that it is a flow/procedural *script* that the users must write, and that XML is probably not the *best* candidate for its implementation.

XML, perfect for hierarchial data, just doesn't feel like the best choice for such an implementation (although I could *force* it to work if need-be).

Not knowing a lick about DSLs, I've begun to read up on Groovy DSLs and they feel like a perfect match for what I need.

My *uderstanding* is that I could write, say, a Groovy (I'm stronger in Groovy than Scala, JRuby, etc.) DSL that would allow users to write scripts (`.groovy` files) that my program could then execute as input at runtime.

Is this correct, or am I misunderstanding the intent of DSLs altogether? If I am mistaken, does anybody have any suggestions for me? And if I am correct then how would a Java program read and execute a `.groovy` file (in other words, how would my program "consume" their script)?

**Edit**: I'm beginning to like ANTLR. Although I would love to roll up my sleeves and write a Groovy DSL, I don't want my users to be able to write any old Groovy program they want. I want my own "micro-language" and if users step outside of it I want the interpreter to invalidate the script. It's beginning to seem like Groovy/DSLs aren't the right choice, and maybe ANTLR could be the solution I need...?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:24:53.457

I think you are on a really good path. Your users can write their files using your simple DSL and them you can run them by Evaling them at runtime. Your biggest challenge will be helping them to use the API of your DSL correctly. Unless they use an IDE this will be pretty tough.

[Equivalent of eval() in Groovy](https://stackoverflow.com/questions/3264014/equivalent-of-eval-in-groovy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:57:02.400

Yes, you can write a Groovy program that will accept a script as input and execute it. I recently wrote a BASIC DSL/interpreter in this way using groovy :

[http://cartesianproduct.wordpress.com/binsic-is-not-sinclair-instruction-code/](http://cartesianproduct.wordpress.com/binsic-is-not-sinclair-instruction-code/)

(In the end it was more interpreter than DSL but that was to do with a peculiarity of Groovy that likely won't affect you - BASIC insists on UPPER CASE keywords which Groovy finds hard to parse - hence they have to be converted to lower case).

Groovy allows you to extend the script environment in various ways (eg injecting variables into the binding and transferring execution from the current script to a different, dynamically loaded script) which make this relatively simple.

# objective-c - 如何使用 NSCoding 加载 Objective C Singleton？

> ID：11484062
> 
> 赞同：3
> 
> 时间：2012-07-14T13:14:46.307
> 
> 标签：objective-c, singleton, nskeyedarchiver, nscoding

我正在编写一个基本游戏，我正在使用一个`GameStateManager`单例并处理所有状态管理，例如保存、加载、删除方法。

我有一个单独的 singelton 来处理所有的`Game`东西。游戏对象位于游戏状态管理器中，因此我可以使用 NSCoding 和 Archiving 将其保存。

当我保存状态时，似乎没有问题，并且游戏对象（单例）已正确保存。

但是，当我尝试加载状态（通过重新启动应用程序）时，游戏对象始终为空。

Strangley，如果我删除单例属性并使其成为标准类，这个问题就会消失，我可以加载该类及其所有属性而不会出现任何重大问题。

总之，我这样做：

1.  GameStateManager = Singleton，处理所有游戏状态管理（加载、保存）并拥有一个游戏对象（game）

2.  Game = Singleton，它处理游戏中的事情并采用 NSCoding 协议。

3.  用游戏对象保存游戏状态很好，对象显然在那里。

4.  加载游戏状态似乎使游戏对象为空。它应该在那里，但由于某种原因它永远不会加载它。

5.  如果我删除使游戏类成为单例的所有属性并使其成为普通类，问题似乎就消失了。

我认为这与`Game`从未初始化的事实有关，但这没有意义，因为我可以让 Game 在它没有单例属性时加载。

代码如下。

```
// GameStateManager.m

-(void)saveGameState
{
    CCLOG(@"METHOD: saveGameState()");

    self.lastSaveDate   = [NSDate date];

    NSMutableData *data;
    NSString *archivePath = [NSTemporaryDirectory() stringByAppendingPathComponent:kGameSaveFile];
    NSKeyedArchiver *archiver;
    BOOL result;

    data = [NSMutableData data];
    archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];

    [archiver encodeObject:self.lastSaveDate forKey:@"lastSaveDate"];
    [archiver encodeObject:self.game forKey:@"game"];
    [archiver finishEncoding];
    result = [data writeToFile:archivePath atomically:YES];
    [archiver release];

}

-(void)loadGameState
{
    CCLOG(@"METHOD: loadGameState()");

    NSData *data;
    NSKeyedUnarchiver *unarchiver;
    NSString *archivePath = [NSTemporaryDirectory() stringByAppendingPathComponent:kGameSaveFile];

    data = [NSData dataWithContentsOfFile:archivePath];
    unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];

    // Customize unarchiver here
    self.game = [unarchiver decodeObjectForKey:@"game"];
    self.lastSaveDate = [unarchiver decodeObjectForKey:@"lastSaveDate"];

    [unarchiver finishDecoding];
    [unarchiver release];

    CCLOG(@"Last Save Date = %@", self.lastSaveDate);
    NSLog(@"game = %@", self.game);
}

// END OF GAMESTATEMANAGER

// -------------------------

 // Game.h
    @interface Game : NSObject
<NSCoding>
{
    NSMutableArray *listOfCities;
    NSMutableArray *listOfColors;
    NSMutableArray *listOfPlayers;
}

@property (nonatomic, retain) NSMutableArray *listOfCities;
@property (nonatomic, retain) NSMutableArray *listOfColors;
@property (nonatomic, retain) NSMutableArray *listOfPlayers;

+(Game *) sharedGame;

 //
// Game.m
// This is a cut-down version of the game object
// Game is a singelton
// The listOfCities, etc are arrays
//
@implementation Game
SYNTHESIZE_SINGLETON_FOR_CLASS(Game)
@synthesize listOfCities, listOfPlayers;

#pragma mark - NSCoding

-(id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super init];

    if (self) 
    {
        self.listOfCities = [aDecoder decodeObjectForKey:@"listOfCities"];
        self.listOfPlayers = [aDecoder decodeObjectForKey:@"listOfPlayers"];

        NSLog(@"Cities = %d", [self.listOfCities count]);
        NSLog(@"Players = %d", [self.listOfPlayers count]);
    }

    return self;
}

-(void)encodeWithCoder:(NSCoder *)aCoder
{
    // Archive objects
    NSLog(@"Cities = %d", [self.listOfCities count]);
    NSLog(@"Players = %d", [self.listOfPlayers count]);

    [aCoder encodeObject:self.listOfCities forKey:@"listOfCities"];
    [aCoder encodeObject:self.listOfPlayers forKey:@"listOfPlayers"];
}

@end 
```

我的问题是，如何使用 NSCoding 和 Archiver 成功保存和加载 Objective C 单格？

编辑;

我努力了：

```
// In the GameStateManager
#pragma mark - NSCoding

-(id)initWithCoder:(NSCoder *)decoder {
    if (self = [super init]) {
        self.lastSaveDate = [[decoder decodeObjectForKey:@"lastSaveDate"] retain];
        self.game = [[decoder decodeObjectForKey:@"game"] retain];
    }
    return self;
}
-(void)encodeWithCoder:(NSCoder *)encoder {
    [encoder encodeObject:self.lastSaveDate forKey:@"lastSaveDate"];
    [encoder encodeObject:self.game forKey:@"game"];
} 
```

和

```
// In Game.m
    self.listOfCities = [[aDecoder decodeObjectForKey:@"listOfCities"] retain];
        self.listOfPlayers = [[aDecoder decodeObjectForKey:@"listOfPlayers"] retain];

        NSLog(@"Cities = %d", [self.listOfCities count]);
        NSLog(@"Players = %d", [self.listOfPlayers count]); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T17:41:52.670

Since you're dealing with a singleton, you only ever want a single instance of the class to exist at any time. So you will want to archive and unarchive that single instance only.

Consider this code (assumes ARC is enabled):

```
@interface Singleton : NSObject <NSCoding>

+ (id)sharedInstance;
@property (strong, nonatomic) NSString *someString;

@end

@implementation Singleton

+ (id)sharedInstance {
    static Singleton instance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        instance = [[Singleton alloc] init];
    });
    return instance;
}

#pragma mark - NSCoding implementation for singleton

- (id)initWithCoder:(NSCoder *)aDecoder {
    // Unarchive the singleton instance.
    Singleton *instance = [Singleton sharedInstance];

    [instance setSomeString:[aDecoder decodeObjectForKey:@"someStringKey"]];

    return instance;
}

- (void)encodeWithCoder:(NSCoder *)aCoder {
    // Archive the singleton instance.
    Singleton *instance = [Singleton sharedInstance];

    [aCoder encodeObject:[instance someString] forKey:@"someStringKey"]];
}

@end 
```

Using this template, you can archive/unarchive the singleton, like this:

```
// Archiving calls encodeWithCoder: on the singleton instance.
[[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:[Singleton sharedInstance]] forKey:@"key"];

// Unarchiving calls initWithCoder: on the singleton instance.
[[NSKeyedUnarchiver unarchiveObjectWithData:[[NSUserDefaults standardUserDefaults] objectForKey:@"key"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T13:36:22.787

在你的 initWithCoder 方法中试试这个：

```
self.listOfCities = [[aDecoder decodeObjectForKey:@"listOfCities"] retain];
self.listOfPlayers = [[aDecoder decodeObjectForKey:@"listOfPlayers"] retain]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-25T13:30:15.443

最简单的方法：

**1.加载单例：**

```
+ (AppState *)sharedInstance
{
    static AppState *state = nil;
    if ( !state )
    {
       // load NSData representation of your singleton here.
        NSData *data =[[NSUserDefaults standardUserDefaults] objectForKey:@"appStateData"];

        if ( data )
        {
             state = [NSKeyedUnarchiver unarchiveObjectWithData:data];
        }
        else
        {
            state = [[AppState alloc] init];
        }
    }
    return state;
} 
```

**2\. 将单例保存在磁盘上**

```
- (BOOL)save
{
    NSData *appStateData = [NSKeyedArchiver archivedDataWithRootObject:self];
    // now save NSData to disc or NSUserDefaults.
    [[NSUserDefaults standardUserDefaults] setObject:appStateData forKey:@"appStateData"];
} 
```

**3、实施`NSCoding`方法：**

```
- (id)initWithCoder:(NSCoder *)coder;
- (void)encodeWithCoder:(NSCoder *)coder; 
```

**完毕！**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-02T21:06:10.357

我正在使用一种混合方法，其中包含[Eric Baker](https://stackoverflow.com/users/280591/)和[skywinder](https://stackoverflow.com/users/1698467/)的答案。

```
+ (GameStateManager *)sharedInstance {
    static GameStateManager *instance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        NSData *data = [[NSUserDefaults standardUserDefaults] objectForKey:@"key"];
        if (data) {
            instance = [NSKeyedUnarchiver unarchiveObjectWithData:data];
        } else {
            instance = [[GameStateManager alloc] init];
        }
    });
    return instance;
} 
```

# linux - 仅通过 FTP 访问获取服务器信息

> ID：11484064
> 
> 赞同：0
> 
> 时间：2012-07-14T13:14:55.240
> 
> 标签：linux, ftp, backup

我正在新服务器上重新安装 PHP 脚本的备份。

之前的 Web 开发人员在行动中失踪了，他还没有发布他管理的域。

所以对于新服务器，他们只为我提供了 mySQL 详细信息和 FTP 访问权限。他们说他们没有临时测试网址，所以我只能上传备份而不进行测试。

我更改了 mySQL 服务器变量，但在脚本中还有一些服务器端细节。例如，必须在配置文件中定义完整路径。我只有 FTP 访问权限，所以无法运行简单的 phpinfo()。

有没有其他方法可以仅通过 FTP 访问来获取此特定服务器信息？我基本上需要安装脚本的完整服务器路径。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T02:34:26.443

好吧，如果该 IP 上的 apache（或任何网络服务器）已经为您的 FQDN 配置（您还不能设置为新 IP），那么您可以使用 phpinfo() 调用上传 PHP 文件。之后，您可以远程登录到已知的 IP 端口 80 并发送

```
GET /[PHP-File] HTTP/1.1
Host: [Your FQDN] 
```

例如，如果您的 FQDN 是 www.example.com：

```
GET /info.php HTTP/1.1
Host: www.example.com 
```

然后，Web 服务器应该发送您的 PHP 脚本的输出。

请注意，您的行必须以 a 结尾，`<CR><LF>`并且在您的 Host:-line 之后有一个空行。

# sockets - Memcache 套接字/端口

> ID：11484071
> 
> 赞同：0
> 
> 时间：2012-07-14T13:16:07.450
> 
> 标签：sockets, web, memcached, port

我实现了在 TCP 端口上侦听的 memcache 服务器。后来我发现 UNIX 域套接字比 TCP 套接字快。在使用 TCP 时，我的活动连接数变得非常高。然后我开始使用带有 UNIX 域套接字的 memcache，性能得到了提高。

现在我必须使用多个 Web 服务器，我很困惑如何将 memcache 与 UNIX 域套接字一起使用。我必须记住的一件事是我的网络服务器必须使用单个内存缓存服务器。

请建议我如何使用 UNIX 域套接字合并 memcache。或者，如果我使用 TCP，那么我该如何提高性能。任何其他优化解决方案都是最受欢迎的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T01:49:27.607

如果“我的 web 服务器必须使用单个 memcache 服务器”是指您的 web 服务器必须连接到远程中央 memcache 服务器，那么当然 TCP 是您唯一的选择，因为[UNIX 域套接字只是 local](https://serverfault.com/questions/339446/are-there-any-drawbacks-to-running-memcached-on-a-unix-domain-socket-instead-of)。

如果您的 Web 服务器仅与本地计算机上运行的 memcache 服务器建立连接，那么 UNIX 域套接字将可以正常工作，如果它们更快，您应该使用它们。

# javascript - Cordova Phonegap 本地与托管云应用程序

> ID：11484073
> 
> 赞同：0
> 
> 时间：2012-07-14T13:16:16.257
> 
> 标签：javascript, web-applications, mobile, cordova

我想知道将原始 phonegap html 文件放在实际设备上与只有一个“跳线”页面将重定向到远程托管在云上的应用程序的优缺点是什么。

这些是我能想到的：

1.  离线访问 - 当 html 文件位于实际设备上时要简单得多，否则您将不得不使用 HTML5 离线 API。**+1 本地**

2.  查看助手和嵌入式代码——无论是使用 Rails 还是 Express 构建，如果我使用托管解决方案，我都可以访问查看助手和嵌入，就像构建“普通”网站时一样。**+1 托管**

3.  Rest API - 如果我将文件保存在本地，我将被迫创建一个完全独立的 API 来处理所有服务器通信（除非使用 StackMob 之类的东西）。虽然这可能在以后决定多个客户端时有用，但它可能是过度杀伤 ATM。托管解决方案将以与“普通”网站相同的方式处理服务器调用。 **+1 托管用于简单的应用程序**

我还缺少其他的 Pro 和 Con 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:40:19.463

通常我会在设备本身上找到静态文件。否则，您总是必须通过 GET 请求文件（对流量和性能不利，尤其是在移动设备上）。

当您想将您的应用程序放到 Apple AppStore 时，您必须只关心重定向到在线 WebApp 我认为您会遇到 Apple 的麻烦。

# objective-c - core-data : 只有最后一个对象可以在循环中正确初始化

> ID：11484075
> 
> 赞同：0
> 
> 时间：2012-07-14T13:16:38.493
> 
> 标签：objective-c, ios, core-data

我的模型有两个实体`Artist`和`Album`，并且`Album`有一个`Artist`实例成员。我使用以下代码预先填充了我的模型，但只找到了最后一个 Album ，即`ablum3`与`Artist Beatles`. 对于`album1`, `album2`,`artist`归档是`nil`.

一定有什么我没有发现的错误...

```
//create  an artist
NSManagedObject *artist = [NSEntityDescription
                           insertNewObjectForEntityForName:@"Artist"
                           inManagedObjectContext:__managedObjectContext]; 

[artist setValue:@"Beatles" forKey:@"name"];

//populate the data
NSArray *albums = [NSArray arrayWithObjects:@"album1",@"album2",@"album3", nil];
for (NSString *title in albums){
    //populate the data
    NSManagedObject *album = [NSEntityDescription
                              insertNewObjectForEntityForName:@"Album"
                              inManagedObjectContext:__managedObjectContext]; 

    [album setValue:title forKey:@"title"];
    [album setValue:artist forKey:@"artist"];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:02:46.267

没有进一步的细节，很难知道发生了什么。我试图理解你所写的模型。

所以，这个模型对我有用

![在此处输入图像描述](../Images/bc9306950ad97e8ba7aba25e6e37baea.png)

`albums`与 是一对多关系`Album`。此外，它是可选的，您可以`Artist`不使用`Album`.

`artist`是 Artist 的逆 rel。一对一的基数。这是必需的，因为`Album`没有`Artist`.

这里的代码：

```
- (void)populateDB
{
    //create  an artist
    NSManagedObject *artist = [NSEntityDescription
                               insertNewObjectForEntityForName:@"Artist"
                               inManagedObjectContext:[self managedObjectContext]]; 

    [artist setValue:@"Beatles" forKey:@"name"];

    //populate the data
    NSArray *albums = [NSArray arrayWithObjects:@"album1",@"album2",@"album3", nil];
    for (NSString *title in albums){
        //populate the data
        NSManagedObject *album = [NSEntityDescription
                                  insertNewObjectForEntityForName:@"Album"
                                  inManagedObjectContext:[self managedObjectContext]]; 

        [album setValue:title forKey:@"title"];
        [album setValue:artist forKey:@"artist"];
    }
} 
```

调用后`populatedDB`，保存上下文调用`[self saveContext]`

```
- (void)saveContext {
    NSError *error = nil;
    NSManagedObjectContext *moc = [self managedObjectContext];
    if (moc != nil) {
        if ([moc hasChanges] && ![moc save:&error]) {
             // Replace this implementation with code to handle the error appropriately.
             // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }
} 
```

如果您需要安排您的模型，请告诉我。

希望有帮助。

# c# - 创建对象实例和相关属性的方法

> ID：11484076
> 
> 赞同：0
> 
> 时间：2012-07-14T13:16:47.910
> 
> 标签：c#, oop

我通常启动一个对象的实例并关联一些这样的属性。

```
 RegisterModel registerModel = new RegisterModel();
        registerModel.UserName = userName;
        registerModel.OpenID = openID;
        registerModel.Password = password;
        registerModel.ConfirmPassword = confirmPasswod; 
```

我发现重复每个属性的实例名称很冗长。

您能否展示其他方法（可能比我的更优雅）来实现相同的结果？

我是编程新手，所以一个代码示例将非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T13:18:09.227

您可以通过[对象初始化器](http://msdn.microsoft.com/en-us/library/bb397680.aspx)来做到这一点：

```
RegisterModel registerModel = new RegisterModel
{
  UserName = userName,
  OpenID = openID,
  Password = password,
  ConfirmPassword = confirmPasswod
}; 
```

其他方法是通过构造函数来完成。

# android - android布局不能在mapView中更改

> ID：11484086
> 
> 赞同：0
> 
> 时间：2012-07-14T13:18:33.317
> 
> 标签：android, maps, imageview, android-mapview

我正在使用这个[https://github.com/jgilfelt/android-mapviewballoons#readme](https://github.com/jgilfelt/android-mapviewballoons#readme)项目，这样当用户单击地图上的热点时，带有其信息的气球会膨胀，我的任务是向该气球添加一个按钮这样当用户点击按钮时，这个热点的图像就会出现在整个屏幕上，并且它会有一个按钮来关闭图像并返回到旧视图。

我想出了如何向气球添加一个按钮，但问题是我无法通过它的 onclick 操作将布局更改为只有 ImageView 的新布局......我能得到的只是充气的气球和它旁边一个不是我想要的小图像

我真的很感激任何帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:32:49.887

我在一年前使用它，我记得你必须将按钮放在气泡的 XML 上，而在膨胀 de bubble 的类上你必须放置 onClicklistener。

您也可以尝试在 xml 上放置参数“onclick="buttonPressed""，当它膨胀时，您编写方法 public void buttonPressed(View v) {}。

如果这一切都不起作用，请尝试在气泡属性 android:focusable="false" 上设置 XML

可能与此相同的问题：[Android 自定义 ListView 无法点击项目](https://stackoverflow.com/questions/1121192/android-custom-listview-unable-to-click-on-items)

# html - 在 iFrame 中加载网页

> ID：11484088
> 
> 赞同：1
> 
> 时间：2012-07-14T13:18:42.683
> 
> 标签：html, iframe

我创建了一个演示页面来显示响应式 Web 模板...在演示页面中，有三个不同大小的 iFrame（用于计算机视图、平板电脑视图和智能手机视图）...

问题是，当我打开演示页面时，响应式模板加载 3 次（对于每个 iframe）......我不希望这种情况发生......模板页面应该只加载一次，它应该显示在所有的 iframe...

我不知道如何实现这一目标...有人请帮助我...

这是示例演示页面...

[http://responsivewebinc.com/demo/?url=http://responsivewebinc.com/templates/responsivewebinc](http://responsivewebinc.com/demo/?url=http://responsivewebinc.com/templates/responsivewebinc)

这是iframe编码...

```
<iframe id="pc" width="98%" src="http://responsivewebinc.com/templates/responsivewebinc" ></iframe>

<iframe id="tablet" width="60%" src="http://responsivewebinc.com/templates/responsivewebinc" ></iframe>

<iframe id="mobile" width="30%" src="http://responsivewebinc.com/templates/responsivewebinc" ></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:26:25.417

你需要一些javascript：

```
<iframe id="pc" width="98%" src="http://responsivewebinc.com/templates/responsivewebinc"
    onload="document.getElementById('tablet').src=document.getElementById('mobile').src=this.src;">
</iframe>
<iframe id="tablet" width="60%"></iframe>
<iframe id="mobile" width="30%"></iframe>​​​​​​​​​​​​​​​ 
```

2 个其他（`'table'`和`'mobile'`）内容将从浏览器的`cache`.

**重要提示：**除非资源*没有完全加载*，否则*不会保存*在浏览器的`cache`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-14T14:35:52.553

两种提议的解决方案都不起作用。事实上，javascript脚本只是等待第一页被加载，然后设置第二页的src。这将加载第二页。第三个相同，但页面仍然为每个 iframe 加载一次。

只需将 url 更改为需要几秒钟才能加载的 url，您就会看到它。

唯一的解决方案是解析源 url 的 html，然后将 iframe 的内容设置为此源，但我不确定这是否可行。

也许试试 main.php 之类的东西：

```
<?php
    $url = 'http://responsivewebinc.com/templates/responsivewebinc/';
    $ch = curl_init();
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);

    $result = curl_exec($ch);
    curl_close($ch);
    $fp = fopen('data.txt', 'w+');
    fwrite($fp, $result);
?>
<iframe id="pc" width="98%" src="open.php" ></iframe>
<iframe id="tablet" width="60%" src="open.php" ></iframe>
<iframe id="mobile" width="30%" src="open.php" ></iframe> 
```

和open.php：

```
<?php
    $filename = 'data.txt';
    $fp = fopen($filename, 'r');
    $data = fread($fp, filesize($filename));
    echo $data;
?> 
```

这避免了加载页面的三倍，但我不确定这是一个好的脚本（这也需要你为你的 css 和图像文件使用非相对 url ......

# javascript - 使用 jquery 解析受密码保护的 json url

> ID：11484096
> 
> 赞同：-1
> 
> 时间：2012-07-14T13:20:05.517
> 
> 标签：javascript, jquery

我有一个json url，可以在用户名和密码认证后访问。如何在解析url时动态放置认证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:34:41.200

我假设您有基于会话的身份验证。然后不要将 JSON 文件放入存储公共静态内容的位置。而是将其放在其他地方，并以您在服务器端使用的语言创建一个脚本，如果用户通过身份验证，它将传递文件，否则返回禁止的 HTTP 状态 403。

# android - 集成 google map api 3 并在 android 上使用 javascript

> ID：11484097
> 
> 赞同：0
> 
> 时间：2012-07-14T13:20:17.433
> 
> 标签：android, google-maps-api-3

我正在构建一个 android 应用程序，它将集成来自 google maps api 3 的地图。我已经阅读了本[教程](https://developers.google.com/maps/articles/android_v3)，但无法理解这段代码的作用。

```
private void setupWebView(){
  final String centerURL = "javascript:centerAt(" +
  mostRecentLocation.getLatitude() + "," +
  mostRecentLocation.getLongitude()+ ")";
  webView = (WebView) findViewById(R.id.webview);
  webView.getSettings().setJavaScriptEnabled(true);
  //Wait for the page to load then send the location information
  webView.setWebViewClient(new WebViewClient(){
    @Override
    public void onPageFinished(WebView view, String url){
      webView.loadUrl(centerURL);
    }
  });
  webView.loadUrl(MAP_URL);
} 
```

有人可以彻底向我解释这些代码的作用。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T23:56:47.567

晚了，但也许它会帮助别人。

我不太确定，因为我是初学者，但我猜你正在调用一个名为“centerAt”的 JavaScript 函数，看看这个教程[https://developers.google.com/maps/articles/android_v3](https://developers.google.com/maps/articles/android_v3)，你会使用该函数“centerAt”查看 JavaScript 桥接定义

```
<script type="text/javascript" 
  src="http://maps.googleapis.com/maps/api/js?sensor=true"></script>
<script type="text/javascript">
  var map;
  function initialize() {
    var latitude = 0;
    var longitude = 0;
    if (window.android){
      latitude = window.android.getLatitude();
      longitude = window.android.getLongitude();
    }
    var myLatlng = new google.maps.LatLng(latitude,longitude);
    var myOptions = {
      zoom: 8,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"),
      myOptions);
  }
  function centerAt(latitude, longitude){
    myLatlng = new google.maps.LatLng(latitude,longitude);
    map.panTo(myLatlng);
  }
  </script> 
```

总而言之，您真正要做的是使用 JavaScript 桥接器在 Android 应用程序中显示地图，因此您可以从 Android 代码中使用定义在其上的 JavaScript 函数，通过 URL 调用它们。

同样，我是初学者（使用谷歌地图的第一天），可能我错了。

# objective-c - NSAppleScript 自动打开 iTunes

> ID：11484102
> 
> 赞同：0
> 
> 时间：2012-07-14T13:21:11.997
> 
> 标签：objective-c, if-statement, applescript, itunes

当 iTunes 关闭时，这不应该得到歌曲名称，因为 iTunes 必须打开它才能检查并返回 false。

请帮忙。

```
//run applescript
NSAppleScript *script = [[NSAppleScript alloc] initWithSource:@"try\n tell application \"System Events\" to set checkIfItunesIsRunning to (name of processes) contains \"iTunes\"\n if checkIfItunesIsRunning is equal to true then\n tell application \"iTunes\" to get name of current track\n else\n return \"No Song\"\n end if\n on error errmsg number errNum\n return \"No Song\"\n end try"];

NSAppleEventDescriptor *theResult = [script executeAndReturnError:nil];
//Set MenuItem
    [song setTitle:[theResult stringValue]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:25:04.953

你可能会有更好的运气，比如：

```
if ([[NSRunningApplication runningApplicationsWithBundleIdentifier:@"com.apple.iTunes"] count] != 0) {
    // run your script
} else {
    // itunes isn't running
} 
```

# sql-server - 防止在 SQL Server 中显示重复记录

> ID：11484103
> 
> 赞同：0
> 
> 时间：2012-07-14T13:21:11.617
> 
> 标签：sql-server, stored-procedures

我在 SQL Server 中使用存储过程，但它给了我一些重复的记录，当然我的数据库中没有重复的记录，但是我的存储过程给了我相同记录的两个实例，可以是什么错误的？如何防止我的查询给出重复记录？这是我的 SP 选择子句：

```
select  (ROW_NUMBER() OVER (ORDER BY Review.Point desc) ) as rownumber, 

Business.BusinessId,Business.BName,Business.BAddress1
  ,Business.BAddress2,Business.BCity,Business.BState,Business.BZipCode,Business.countryCode,Business.BPhone1,Business.BPhone2,Business.BEmail,Business.Keyword
  ,Business.BWebAddress,Business.BCatId,Business.BSubCatId,Business.BDetail,Business.bImage,Business.UCId,Business.UCConfirm
  ,Business.UOId,Business.UOConfirm,Business.x,Business.y,Cat.CatName,SubCat1.SubCatName
 from Business left outer join 
        Review on business.BusinessId=Review.BusinessId left outer join
        Cat  on business.BCatid=Cat.CatId  left outer join 
        SubCat1  on business.BSubCatid=SubCat1.SubCatId '+@sql2+' 
) as tbl
where rownumber between  '+CONVERT(varchar, @lbound)+' and '+CONVERT(varchar, @ubound); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:40:53.877

我不知道要挖掘到您的联接逻辑的数据，但如果它跨 BusinessID 重复，您可以`ROW_NUMBER()`为重复项添加另一个：

```
select  (ROW_NUMBER() OVER (ORDER BY Review.Point desc) ) as rownumber, 
r = ROW_NUMBER()OVER(PARTITION BY Business.BusinessId ORDER BY Business.BusinessId)
Business.BusinessId,Business.BName,Business.BAddress1
  ,Business.BAddress2,Business.BCity,Business.BState,Business.BZipCode,Business.countryCode,Business.BPhone1,Business.BPhone2,Business.BEmail,Business.Keyword
  ,Business.BWebAddress,Business.BCatId,Business.BSubCatId,Business.BDetail,Business.bImage,Business.UCId,Business.UCConfirm
  ,Business.UOId,Business.UOConfirm,Business.x,Business.y,Cat.CatName,SubCat1.SubCatName
 from Business left outer join 
        Review on business.BusinessId=Review.BusinessId left outer join
        Cat  on business.BCatid=Cat.CatId  left outer join 
        SubCat1  on business.BSubCatid=SubCat1.SubCatId '+@sql2+' 
) as tbl
where rownumber between  '+CONVERT(varchar, @lbound)+' and '+CONVERT(varchar, @ubound)
AND r = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:33:36.363

在查询中包含保留字 DISTINCT。

例如

```
select distinct 
    *
from
    students s
    inner join enrollments e on e.StudentId = s.Id
    inner join courses c on c.Id = e.CourseId 
```

但是，结果表中的意外重复通常（但不总是）表明您的查询格式错误或数据库设计错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T13:34:15.783

尝试删除此左连接

```
Review on business.BusinessId=Review.BusinessId left outer join 
```

您的查询中似乎不需要，如果一项业务有多个评论...

# java - 如何在没有实际执行的情况下测试 ThreadLocal 是否已初始化？

> ID：11484104
> 
> 赞同：9
> 
> 时间：2012-07-14T13:21:31.147
> 
> 标签：java, multithreading, thread-safety

我想测试 a`ThreadLocal`是否已被初始化而没有实际初始化它。当然，代码需要是线程安全的。理想情况下，我想要这样的东西：

```
class TestableThreadLocal<T> extends ThreadLocal<T> {
    public boolean isInitialized() {
        ...
    }
} 
```

但是我将如何实现这个方法呢？

编辑：动机：我将 a 子类化为`ThreadLocal`override `initialValue()`。但是，我并不总是需要初始化，特别是因为它可能导致多类加载器环境中的内存泄漏。一个简单的测试将帮助我编写代码以避免意外初始化。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T10:43:19.120

我倾向于使用简单的规则来避免类加载器泄漏，诚然它们很麻烦，但有一些包装它并没有那么糟糕。是的，泄漏是邪恶的。

*   永远不要覆盖`initialValue`- 你只是在自找麻烦，只是忘记它的存在。
*   不要在 ThreadLocal 中存储非系统/非引导类，除非你这样做`threadLocal.set(xxx); try{...process...}finally{threadLocal.set(null);}`
*   如果您仍然覆盖 initialValue，请使用`threadLocal.remove()`not`threadLocal.set(null)`
*   或使用`WeakReferene`（即 ThreadLocal `<WeakReference<Foo>>`）来自保留硬引用的池中的值。它可能看起来不直观，但是一旦池被清除，值就会消失，并且类可以自由地被 GC'd

我意识到这篇文章并不是对您的问题的直接答复，但是没有简单的方法可以实现您的愿望并防止泄漏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T01:35:03.390

想法：

*   如果`ThreadLocal.get`被调用，则值被初始化。
*   如果您不希望它初始化，则不需要存储的值（根本，永远）
*   如果你想避免初始化，似乎开始的地方是通过覆盖`get`，而不是`initialValue`.
*   采取不同的方式——你真的需要继承`ThreadLocal`而不是遏制吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T17:59:32.437

执行此操作的少数可能方法之一将涉及反射，因为 ThreadLocal 没有让您知道值是否已初始化的 API。

当然可以使用反射“编码”它。但是，所有通常的警告都适用。您的反射代码将高度依赖于 java.lang.ThreadLocal 及其非公共成员的实现细节。JDK 供应商更改实现的那一刻，您的代码就会中断。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T07:33:49.350

我对你最初的问题感到困惑。ThreadLocal 是您正在创建的还是已经由其他 API 提供的？

如果您正在制作 ThreadLocal，那么我假设您已经知道您必须覆盖 initialValue() 以便您可以提供初始值。

在这种情况下，您始终可以跟踪是否已调用它并创建了值。

我认为像下面这样的代码会做你想要的：

```
MyThreadLocal<T> extends ThreadLocal<T>{

   Map<Thread,Boolean> myThreadMap = new HashMap<Thread,Boolean>();

   protected T initialValue(){
         synchronized(myThreadMap){
               T value =  ... your code to create initial value
               myThreadMap.put(Thread.currentThread(),true);
               return T;
         }
   }

   public boolean containsThreadValues(){
          synchronized(myThreadMap){
                 return myThreadMap.isEmpty();
          }
   }

   public boolean isInitializedForThisThread(){
         synchronized(myThreadMap){
                 return myThreadMap.get(Thread.currentThread())==true;
         }
   }

} 
```

myThreadMap 将始终包含旧键，即使对于死线程也是如此。如果您想清除旧密钥，请将其替换为 WeakHashMap。然后，随着曾经使用 ThreadLocal 的线程消失，密钥将被删除。

# android - 在 Android 中通过 twitter4j 获取 Twitter 趋势

> ID：11484107
> 
> 赞同：0
> 
> 时间：2012-07-14T13:21:46.630
> 
> 标签：android, twitter, twitter4j

我是 Android 的初学者，想获得 Twitter 趋势，但在趋势中获得一个空值。我不明白我在哪里犯了错误。

```
List<Trends> list; Trends trends; private Twitter mTwitter;

public  List<Trends>getDailyTrends(Date date, boolean excludeHashTags){
    try{
        list = mTwitter.getDailyTrends(date, excludeHashTags);
        Log.d("ab to aaja<><><><><>", ""+list);
    }catch (TwitterException e)
    {
        e.printStackTrace();
    }
    return list;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:19:42.230

试试这个 ：

```
 public  List<Trends>getDailyTrends(Date date, boolean excludeHashTags){
        List<Trends> auxList = new ArrayList<Trends>;
        try{
            auxList = mTwitter.getDailyTrends(date, excludeHashTags);
            Log.d("ab to aaja<><><><><>", ""+list);
        }catch (TwitterException e)
        {
            e.printStackTrace();
        }
        return auxList;
    }

this.list = getDailyTrends(new SimpleDateFormat("yyyy-MM-dd").parse("2012-07-14"), true); 
```

还要检查是否`auxList`不为空

# javascript - 如何使用 javascsript 设置输入值

> ID：11484108
> 
> 赞同：0
> 
> 时间：2012-07-14T13:21:49.750
> 
> 标签：javascript

如果条件为真但我的功能不起作用，我想设置输入类型的值。我写了正确的代码，但不知道它有什么问题。

```
<head>
<script type="text/javascript">
function ghg(){
  var fname= document.getElementById('jitender').value;
  if(fname=="") {
    fname= "i am value";
  }
}
</script>
</head>

<body>
  <input type="text" id="jitender" value="" />
  <input type='button' value="submit" onclick="ghg()"/>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:24:53.083

你有没有试过这个：

```
document.getElementById('jitender').value = "blaah" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T13:24:57.850

```
var finp= document.getElementById('jitender');
if(finp.value=="")
   finp.value= "i am value"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T13:25:06.917

```
function ghg(){
  var finp= document.getElementById('jitender');

  if(finp.value == "") {
    finp.value = "i am value";
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T13:43:54.670

在您的函数中， fname 不是指向字段值属性的指针。`fname`是一个字符串。因此，如果您分配`fname`不同的值，您`document.getElementById('jitender').value`仍将包含旧值。

这是更改输入值的方法：

```
function ghg()
{
  var e = document.getElementById('jitender');
  if (e.value=='') e.value = 'i am value';
} 
```

在这个函数中，e 是一个指针，指向代表 id 为 jitender 的 DOM 元素的对象。因此，在这种情况下`document.getElementById('jitender')`， 和`e`是指向同一个对象的指针，因此，设置`e.value`将改变输入的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-14T13:46:06.570

这在评论中简要介绍过，但您发布的代码不起作用，因为变量 fname 是按值而不是按引用设置的。

这意味着 fname 等于 document.getElementById('jitender').value 的值。当您设置 fname 的值时，因为它是按值设置的，所以您只设置了 fname 的值，它没有对它“来自”的属性的引用。

正确的解决办法是

```
document.getElementById('jitender').value = "whatever" 
```

# c# - 发现多个导出与 MEF ImportMany 的约束异常匹配

> ID：11484109
> 
> 赞同：3
> 
> 时间：2012-07-14T13:22:02.247
> 
> 标签：c#, mef

我正在尝试在使用 MEF 加载一些插件并寻找解决此特定异常的想法的 WPF 应用程序上调试程序集导入问题：

> 找到多个与约束匹配的导出：
> ContractName MarkPad.Contracts.ISpellingService
> RequiredTypeIdentity MarkPad.Contracts.ISpellingService

只有一个程序集直接引用关注的插件作为它的 autofac 注册的一部分（最后的代码片段）。

```
[ImportingConstructor]
public SpellCheckPlugin(
    IPluginSettingsProvider settingsProvider,
    ISpellingService spellingService,
    ISpellCheckProviderFactory spellCheckProviderFactory) 
```

只有 1 个实现`ISpellingService`

```
[Export(typeof(ISpellingService))]
public class SpellingService : ISpellingService 
```

[这是github 上](https://github.com/Code52/DownmarkerWPF)的一个开源Code52 项目。

插件导入为：

```
[ImportMany]
IEnumerable<IPlugin> plugins; 
```

**到目前为止我已经尝试过：**

1.  [这](http://marlongrech.wordpress.com/2010/05/03/mef-deploymentcatalog-and-reference-assemblies/)和[这篇博客](http://geekswithblogs.net/abhijeetp/archive/2011/10/30/mef-101---part-2.aspx)文章都提到了使用`[ImportMany(AllowRecomposition = true)]`，但这似乎也没有帮助。
2.  我发现的其他讨论提到将“复制本地”设置为 false，但因为它实际上用于注册代码，这不是一个选项，因为它最终不会出现在输出文件夹中。

**有任何想法吗？**

引用插件的注册码

```
builder.RegisterType<SpellingService>().As<ISpellingService>()
    .SingleInstance()
    .OnActivating(args =>
{
    var settingsService = args.Context.Resolve<ISettingsProvider>();
    var settings = settingsService.GetSettings<SpellCheckPlugin.SpellCheckPluginSettings>();
    args.Instance.SetLanguage(settings.Language);
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:05:25.613

### 解决方案

问题是当前程序集通过`GetExecutingAssembly`在 PluginManager() 中用作`AggregateCatalog`提供给`CompositionContainer`.

```
var catalog = new AggregateCatalog();

// This was causing the composition to detect additional imports
catalog.Catalogs.Add(new AssemblyCatalog(Assembly.GetExecutingAssembly())); 
```

这个错误来自于将服务/插件提取到它们自己的程序集中，这些程序最初是核心 MarkPad 程序集的一部分。

> [归功于 @shiftkey](https://twitter.com/shiftkey)和这个[补丁](https://github.com/shiftkey/DownmarkerWPF/commit/7be3668fecae7fe168a79d0759c20004ada89854)。

### 额外的改进

作为这个补丁的一部分，有一些额外的清理可能有助于支持这个答案。

由于 SpellCheckPlugin 采用接口，因此导出只是移动到接口本身而不是具体类型。

```
[ImportingConstructor]
public SpellCheckPlugin(
    IPluginSettingsProvider settingsProvider,
    ISpellingService spellingService,
    ISpellCheckProviderFactory spellCheckProviderFactory) 
```

改为在接口上添加导出

```
[InheritedExport]
public interface ISpellCheckProviderFactory

// and

[InheritedExport]
public interface ISpellingService 
```

删除混凝土出口

```
[Export(typeof(ISpellingService))]
public class SpellingService : ISpellingService

// and

[Export(typeof(ISpellCheckProviderFactory))]
public class SpellCheckProviderFactory : ISpellCheckProviderFactory 
```

# php - PHP时间和手动设置时间值。数秒

> ID：11484110
> 
> 赞同：0
> 
> 时间：2012-07-14T13:22:30.167
> 
> 标签：php, time, count

今天在这个问题上扭曲了我的大脑并进行了一些搜索，但没有找到任何好的答案。看看我的例子。

```
$time_now = date("H:i:s"); // The current time. (let's say the clock is 14:25:33)
$time_visited = "14:23:33"; // the time page was visited. (set by cookie) 
```

因此，假设我想获得 $time_visited 和 $time_now 之间的秒数（应该是 120 秒）在这些值之间获取/计数秒的最简单方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T13:25:42.203

[time](http://php.net/time) () 返回当前时间戳，[strtotime](http://php.net/strtotime) () 将给定字符串解析为[时间戳](http://en.wikipedia.org/wiki/Unix_time)

```
time() - strtotime("14:23:33") 
```

# command-line - 编写 Clojure 代码以从控制台重复读取行的惯用方式？

> ID：11484113
> 
> 赞同：10
> 
> 时间：2012-07-14T13:23:30.623
> 
> 标签：command-line, clojure, functional-programming, console-input

最近我正在编写一个小 CLI 脚本，它需要从控制台重复读取日期（要读取的日期数是计算出来的，每次可能不同）。示例 Ruby 代码为您提供思路：

```
dates = x.times.collect { print "Enter date: "; Date.parse(gets.chomp) } 
```

只是为了它，我在 Clojure 中编写了脚本，最后使用了一些相当丑陋的代码`swap!`和`loop...recur`. 我想知道在 Clojure 中实现预期效果的最干净的方法是什么。（Clojure 确实有`dotimes`，但它不保留从评估主体返回的值......正如强调纯函数式编程的语言所预期的那样。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-14T16:10:06.117

到达文件末尾时，read-line 返回 nil。在您按下 CTRL-d *（Windows 上的 CTRL-z）*时的控制台上。

您可以使用此代码来利用这一点：

```
(doseq [line (repeatedly read-line) :while line]
    (do-something-with line)) 
```

如果您必须阅读固定数量的行，您可以使用：

```
(repeatedly n read-line) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-14T22:33:48.720

如果您的目标是最终`x`得到用户输入的一系列确切日期，那么：

```
(for [line (repeatedly x read-line)] (DateFormat/parse line)) 
```

或使用`map`：

```
(map DateFormat/parse (repeatedly x read-line)) 
```

当心 Clojure 中的惰性序列：用户将被要求输入更多需要的日期。如果您的目标是让用户一次输入所有日期（比如在启动时），请使用`doall`：

```
(map DateFormat/parse (doall (repeatedly x read-line))) 
```

这将一次*读取*所有日期，但仍会延迟解析它们，因此日期格式验证可能会在您的程序后期失败。您也可以上移`doall`一级以快速解析：

```
(doall (map DateFormat/parse (repeatedly x read-line))) 
```

您可以使用辅助函数来读取提示行：

```
(defn read-line-with-prompt [prompt]
  (print prompt)
  (read-line)) 
```

然后替换`read-line`为：

```
#(read-line-with-prompt "Enter date: ") 
```

或者

```
(partial read-line-with-prompt "Enter date: ") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-14T13:46:37.953

你可以这样做：

```
(defn read-dates [n] 
     (doall  (for [_ (range n)] (java.util.Date/parse (read-line)))))

(def my-dates (read-dates 5)) ;Read 5 dates from console 
```

# haskell - “）”上的 Lambda 表达式解析错误

> ID：11484115
> 
> 赞同：1
> 
> 时间：2012-07-14T13:23:36.880
> 
> 标签：haskell, ghc, ghci

我的任务是重新实现这个功能

```
divn :: Integer -> [Integer] -> [Integer]
divn _ [] = []
divn n (x:xs) | mod x n == 0 = x : divn n xs
              | otherwise = divn n xs 
```

使用“文件夹”。我做了什么：

```
divn' _ [] = []
divn' n (x:xs) = foldr (\x -> if (mod x n == 0) (x:) ([]++)) [] xs 
```

我以为这会奏效。实际上它甚至没有编译，而是说：“输入时解析错误“）”。

由于我没有发现任何错误，我决定重新编写，好像现在它正在工作......

```
if' True x _ = x
if' False _ x = x

divn' _ [] = []
divn' n (x:xs) = foldr (\x -> if' (mod x n == 0) (x:) ([]++)) [] xs 
```

有谁知道错误在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T13:24:57.743

`if`在 Haskell 中需要 a`then`和 an ，`else`

```
(\x -> if (mod x n == 0) (x:) ([]++)) 
```

应该

```
(\x -> if (mod x n == 0) then (x:) else id) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T13:55:40.790

除了 Daniel Fischer 所说的，您不需要任何单独的案例：没有递归，空列表案例将由 foldr 处理。在您的代码中，第一个`x`总是*被*忽略！正确的是

```
divn' n xs = foldr (\x -> if x`mod`n == 0 then (x:) else id) [] xs 
```

或者，通过 η 归约，

```
divn' n = foldr (\x -> if x`mod`n == 0 then (x:) else id) [] 
```

当然，简单地做会更惯用

```
divn'' n = filter ((==0) . (`mod`n)) 
```

# jsf - 如何使用 selectonemenu 在 JSF 中显示 hashmap？

> ID：11484126
> 
> 赞同：6
> 
> 时间：2012-07-14T13:25:05.247
> 
> 标签：jsf, jsf-2, selectonemenu

我有一个带有组列表的 Java 哈希图：

```
private HashMap<String, String> listGroups = new HashMap<>(); 
```

问题是如何将哈希图中的值显示到 selectonemenu 中？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-15T02:53:59.917

`<f:selectItems>`已经支持地图。

```
<f:selectItems value="#{bean.listGroups}" /> 
```

映射键成为选项标签，映射值成为选项值。

也就是说，如果按插入顺序显示映射条目很重要，或者如果您想按映射键自动对它们进行排序，您可能希望使用`LinkedHashMap`而不是。`HashMap``TreeMap`

### 也可以看看

*   [我们的`h:selectOneMenu`维基页面](https://stackoverflow.com/tags/selectonemenu/info)

# java - 使用开关盒的三个数字中的最大值

> ID：11484132
> 
> 赞同：2
> 
> 时间：2012-07-14T13:25:52.330
> 
> 标签：java, bluej

我想找出三个给定数字中的最大数字，使用 switch-case（不使用 if）我使用这个程序回答了这个问题，它有效：

```
class GreatestNoSwitch{
    public int main(int a, int b, int c){
        int d = (int)Math.floor(a/b);
        int max = 0;
        switch(d){
            case 0:
                max = b;
                break;
            default:
                max = a;
        }

        d = (int)Math.floor(max/c);

        switch(d){
            case 0:
                max = c;
        }
        return max;
    }
} 
```

有人有更简单的答案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T13:52:47.830

这有点愚蠢，但给你。

```
switch(1)
{
    default:
        return Math.max(a, Math.max(b, c));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T13:41:24.140

不知道为什么要编写世界上最复杂的代码片段来查找三个整数的最大值。这一个更具可读性，但仍然足够复杂，让您感到有趣......

```
public int main( int a, int b, int c)
{
    return Collections.max( Arrays.asList( new Integer[]{a,b,c} ));
} 
```

# r - 结构图，其中组的每个成员都连接到中心和 r 中的所有集群大中心

> ID：11484133
> 
> 赞同：12
> 
> 时间：2012-07-14T13:25:59.317
> 
> 标签：r, structure, scatter-plot, ggplot2

我正在尝试从如下数据创建结构图：

```
mydf <- data.frame ( group = rep (1:5, each = 20), z = rnorm (20, 10, 1),
                  x = c(rnorm (20, 2, 0.5), rnorm (20, 2, 0.5),
          rnorm (20, 9, 0.5), rnorm (20, 9, 0.5),rnorm (20, 5, 0.5)),
       y = c(rnorm (20, 2, 0.5), rnorm (20, 9, 0.5), rnorm (20, 2, 0.5),
      rnorm (20, 9, 0.5), rnorm (20, 2, 0.5)))

means <- aggregate(. ~ group, data = mydf, mean)
gmx <-mean (mydf$x)
gmy <- mean (mydf$y)

library(ggplot2)
ggplot(mydf, aes(x, y)) +
geom_point(aes(colour= factor (group), size=z)) + theme_bw() 
```

我想让每个集群中的每个点连接到它的中心，然后将集群中心连接到梯度平均值。这将产生如下图（只是两个集群连接到中心的粗略草图，实际上所有集群都具有相同的）：............

（如果可能的话，我想使用与集群相同颜色的线段）

![在此处输入图像描述](../Images/7a8295cf5034a6a1710175784c8024b0.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-14T14:09:12.347

这是一个例子：

```
library(plyr)
ms <- ddply(mydf, .(group), colwise(mean))
mydf2ms <- merge(mydf, ms, by = "group")
gm <- ddply(mydf, NULL, colwise(mean))
ms2gm <- data.frame(ms, gm)

ci <- expand.grid(1:3*2, seq(0, 2*pi, length = 180))
ci <- transform(ci, x = cos(Var2) * Var1 + gm$x, y = sin(Var2) * Var1 + gm$y)

library(ggplot2)
ggplot(mydf, aes(x, y)) +
  geom_point(aes(colour= factor (group), size=z)) +
  geom_segment(data = mydf2ms, mapping = aes(x = x.x, y = y.x, xend = x.y, yend = y.y, colour = factor(group))) +
  geom_segment(data = ms2gm, mapping = aes(x = x, y = y, xend = x.1, yend = y.1)) +
  geom_point(data = ms, colour = "black", size = 10, shape = 4) +
  geom_point(data = gm, colour = "red", size = 10, shape = 4) +
  geom_path(data = ci, mapping = aes(group = Var1), colour = "pink") 
```

![在此处输入图像描述](../Images/12d2314b89b64cd72a3ce30d7a767f96.png)

# pdf - 如何使用 itext 在 PDF 签名外观中显示时间戳状态

> ID：11484138
> 
> 赞同：0
> 
> 时间：2012-07-14T13:26:38.170
> 
> 标签：pdf, itext

adobe阅读器显示pdf签名状态，有效和无效。

我希望读者显示签名中包含的动态（非静态）时间戳状态。

我使用的itext代码如下。

```
PdfReader reader = new PdfReader(IN_FILE);
FileOutputStream fout = new FileOutputStream(OUT_FILE);
PdfStamper stp = PdfStamper.createSignature(reader, fout, '\0');
PdfSignatureAppearance sap = stp.getSignatureAppearance();

sap.setCrypto(null, chain, null, PdfSignatureAppearance.SELF_SIGNED);

sap.setVisibleSignature(new Rectangle(100, 100, 300, 200), 1, "Signature");

PdfSignature dic = new PdfSignature(PdfName.ADOBE_PPKLITE, new PdfName("adbe.pkcs7.detached"));
dic.setReason(sap.getReason());
dic.setLocation(sap.getLocation());
dic.setContact(sap.getContact());
dic.setDate(new PdfDate(sap.getSignDate()));
sap.setCryptoDictionary(dic);

int contentEstimated = 15000;
HashMap exc = new HashMap();
exc.put(PdfName.CONTENTS, new Integer(contentEstimated * 2 + 2));
sap.preClose(exc); 
```

PDFTemplate sigLayer = PdfSignatureAppearance.getLayer(n);

负责签名外观。但我无法包含动态时间戳状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:58:59.483

当创建文档的签名外观时，将在签名的 pdf 上计算要签名的时间戳哈希值。

修改pdf添加ts信息会使签名失效...

# php - 如何跨表引用具有一致主键的另一个表

> ID：11484139
> 
> 赞同：0
> 
> 时间：2012-07-14T13:26:44.073
> 
> 标签：php, mysql, sql

我有两个表，它们都有一个唯一的 PID。我需要知道如何设置主键/外键，以便可以在一个 SQL 语句中访问两个表中的字段。

例如：使用以下数据结构，我想回显球员的姓名和照片，但也通过 PHP 回显他们的所有统计数据。我仅使用玩家统计信息就成功完成了此操作，但我不知道如何访问另一个表中的字段。

到目前为止，这是我的数据库结构：

```
Players
-PID (Set as Primary Key)
-Name
-Height
-College
-Photo

Stats
-PID 
-Touchdowns
-Receptions 
```

当前 PHP 代码：

```
$query="
SELECT * FROM Stats    
ORDER BY Stats.FantasyPoints DESC";

$res=mysql_query($query);
$num=mysql_numrows($res);
$i=0;

while($i< $num){
$Name = mysql_result($res, $i, "Name");
$FantasyPoints = mysql_result($res, $i, "FantasyPoints");

echo $Name . ': '. $FantasyPoints . "<br />";
$i++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T13:30:19.690

```
$sql = "
SELECT p.*, s.*
FROM Players AS p
LEFT JOIN Stats AS s ON p.PID = s.PID
ORDER BY s.FantasyPoints DESC
"; 
```

您也可以使用 JOIN 而不是 LEFT JOIN，这会将结果限制为只有拥有统计数据的玩家

编辑 sql 以产生类似于您自己的 sql 的结果。

==================================================== ====

这就是我将如何去做...

```
$query =
"
SELECT s.*, p.*
FROM Stats AS s
LEFT JOIN Players AS p ON p.PID = s.PID   
ORDER BY s.FantasyPoints DESC
";

$res = mysql_query($query);
while ($row = mysql_fetch_assoc($res))
{
    echo "{$row['name']}: {$row['FantasyPoints']}<br />";
} 
```

# php - Symfony2：ACL - 使用 findAcls()

> ID：11484149
> 
> 赞同：0
> 
> 时间：2012-07-14T13:28:24.697
> 
> 标签：php, symfony, acl

我在尝试为特定对象批量加载 ACL 时遇到问题（在下面的示例中，它是 Account 类。）

如果我使用以下代码，即使 acl_object_identities 已填充，应填充的返回数组也是空的。我错过了什么？

```
 $oids = array();
    foreach ($accounts as $account) {
        $oid = ObjectIdentity::fromDomainObject($account);
        $oids[] = $oid;
    }

    $aclProvider->findAcls($oids); 
```

$accounts 保存使用 findAll() 找到的实体数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T19:38:53.537

好吧，看起来 ACL 最终被拉出，关键是迭代跟进以查看哪些权限已到位。

```
foreach ($accounts as $account) {
    if ($securityContext->isGranted('EDIT', $account)) {
        // Granted, do something with it
    } else {
        // Not Granted
    }
} 
```

所以，似乎一切都在设计。

# c++ - 通常应该/可以使用智能指针吗？

> ID：11484150
> 
> 赞同：0
> 
> 时间：2012-07-14T13:28:46.017
> 
> 标签：c++, smart-pointers

> **可能重复：**
> [什么是智能指针，我应该什么时候使用？](https://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one)

我最近阅读了有关智能指针的信息，例如`shared_ptr`or `auto_ptr`。比普通指针更喜欢它们是好/坏的做法吗？

例如，我应该在函数的参数中使用它们还是在将指针存储为类的成员时使用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:31:04.680

他们是个好主意。它们比普通指针慢。但是，在不了解整个指针生命周期或只是为了安全起见，最好使用智能指针。
对于函数的参数，如果函数要么存储指针，要么导致删除，最好使用智能指针。否则普通指针也很好。

# jsf - 带有删除链接的 SelectOneMenu

> ID：11484155
> 
> 赞同：0
> 
> 时间：2012-07-14T13:29:17.007
> 
> 标签：jsf, jsf-2, icefaces

我想知道有没有一种方法可以在选择一个菜单中添加 delete()，以便用户可以从菜单中选择一个或直接从那里删除记录。到目前为止，我已经正常选择一个菜单，我有一个名为“#{statusReport.deleteTieckt}”的方法。我只是想知道如何将其添加到下面的选择一个菜单中。

```
<ice:selectOneMenu value="#{statusReport.projectDetID}"
                        style="width: 350px;" partialSubmit="true"
                        onchange="this.form.submit()" immediate="true"
                        valueChangeListener="#{statusReport.retrieveReport}">
                            <f:ajax disabled="true"></f:ajax>

                        <f:selectItem itemLabel="Select One" itemValue="" />
                        <f:selectItems value="#{statusReport.listOfProjectDetail}"
                            var="projectBO"
                            itemLabel="#{projectBO.projectDtObj.pname}        #{projectBO.startDate}   -    #{projectBO.endDate}"
                            itemValue="#{projectBO.pdetailId}" noSelectionValue="true" />
                    </ice:selectOneMenu> 
```

# php - ModSecurity 无法访问 DBM 文件“/tmp//global”

> ID：11484157
> 
> 赞同：0
> 
> 时间：2012-07-14T13:29:42.047
> 
> 标签：php, mod-security

我最近设置了一个新服务器并开始看到以下错误日志条目。

> [2012 年 7 月 14 日星期六 05:05:00] [错误] [客户端 xxxxx] ModSecurity：无法访问 DBM 文件“/tmp//global”：权限被拒绝 [主机名“xxxx”] [uri“/games.php”] [unique_id“UAE2PH8AAAEAAAnZRZoAAAAO”]

和

> [2012 年 7 月 14 日星期六 04:22:05] [错误] [客户端 xxxx] ModSecurity：无法访问 DBM 文件“/tmp//ip”：权限被拒绝 [主机名“xxxxxx”] [uri“/index.php”] [unique_id“UAEsLX8AAAEAAAg0GL8AAAAD”]

`/tmp`，`/tmp/global.dir`并且`/tmp/ip.dir`都归root所有。奇怪的是，这些网站每小时都会获得数千次点击，但并非每次访问（即使是同一个 URI）都会触发错误。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:20:55.950

您的键+值长度是否有可能大于 1008 字节？

[https://www.purehacking.com/blogs/josh-zlatin/increasing-modsecurity-collection-size-limits](https://www.purehacking.com/blogs/josh-zlatin/increasing-modsecurity-collection-size-limits)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T19:10:11.803

为了解决上述问题，我要求某人“重做”我的 /tmp 目录

# php - 如何允许用户选择上传文件的位置？

> ID：11484168
> 
> 赞同：-2
> 
> 时间：2012-07-14T13:31:14.320
> 
> 标签：php

> **可能重复：**
> [如何允许用户选择上传文件的位置？](https://stackoverflow.com/questions/11379813/how-do-i-allow-users-to-chose-where-to-upload-the-file)

我想让我的用户选择上传文件的位置。如果有人可以帮助我，那就太好了。

uploader.html [http://pastebin.com/LQP9jxLH](http://pastebin.com/LQP9jxLH)

```
<div id="main">
<center><h2>File Uploader Beta</h2></center><br />
<center>
<form action="upload.php" method="post" enctype="multipart/form-data">
File: <input type="file" name="filename" />
<input type="submit" value="Upload" />
</form>
</center>
</div> 
```

上传.php [http://pastebin.com/CtM1LW13](http://pastebin.com/CtM1LW13)

```
$folder = "files/";
$HTTP_POST_FILES = "";
if(isset($_FILES['filename']['tmp_name'])) // Check if $_FILES['filename']['tmp_name'] is there
{
        if (is_uploaded_file($_FILES['filename']['tmp_name']))  {  
                if (move_uploaded_file($_FILES['filename']['tmp_name'], $folder.$_FILES['filename']['name'])) {
                        Echo "Your file has been uploaded! You should probably tell Cody what you uploaded so he can get it in the right place. :)";
                } else {
                        Echo "Haha! You don't have access to do that.";
        }
        } else {
                Echo "Your upload has failed.";
        }
} 
```

感谢所有帮助。:)

此外，一旦文件上传，我需要它在页面中生成一个脚本。假设 example.jpg 被上传到 /Cody/Pictures。它会删除

# 没有找到文件。。

并将其替换为： 文件名：$FileName 下载：

任何人都可以这样做吗？可以的话谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:12:02.180

我这样做只是因为你看起来很年轻：

我会在`path`您的上传表单中添加一个包含名为（作为其名称属性）的上传路径的字段，上传路径可以简单地输入或使用文件夹选择器进行选择：您可以遍历上传目录的顶层（`$folder`）使用PHP 函数`scandir`( `$files=scandir($folder);`)。这会提供一个包含所有文件和文件夹的列表`$folder`。（假设它包含文件夹`foo`和文件`index.html`）。此时，您迭代-function`$files`传递的 list()并检查当前项目是否是使用.`scandir``is_dir`

```
function listFiles($directory)
{
    $files=scandir($directory);
    for($i=0; $i < count($files); $i++)
    {
        if(is_dir($files[$i]) && file_exists($files[$i]))
        {
            echo '<a href="javascript:getFolderContents('.json_encode($files[$i]).');">'.htmlentities($files[$i]).'</a>';
        }
    }
}
echo '<div id="uploadcontainer">';
listFiles($folder); //you must have declared $folder
echo '</div>'; 
```

如果是这样，您可以生成一个动态超链接，它执行一个动态 JavaScript 函数。对于您的最高级别，您将收到一个链接，例如：

```
<a href="javascript:getFolderContents('foo');">foo</a>` 
```

当然，您需要定义函数 getFolderContents，它是一个 JavaScript 函数，它使用 JSON 或 Ajax 传递其参数的文件夹内容。

```
function getFolderContents(folder)
{
    Request=new XMLHttpRequest();
    Request.open("GET", "/getFolderContents.php?folder="+encodeURIComponent(folder), true);
    Request.onreadystatechange=function()
    {
        if(Request.readyState==4 && Request.status==200) //succeeded
        {
            document.getElementsByName("path")[0].value=folder+"/";
            document.getElementById("uploadcontainer").innerHTML=Request.responseText;
        }
    }
    Request.send(null);
} 
```

当这个请求被发送给你时，`/getFolderContents.php`你需要创建这个 PHP 文件并简单地复制函数`listFiles`（如上所示）并执行以下代码：

```
listFiles($_GET["folder"]); 
```

我没有测试过，只是写得很快，当然你已经适应了你的需要。并且仍然缺少一些选项，例如再次向上移动一个目录左右，因为此脚本不允许您返回。

来自德国的问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:09:15.427

您需要修改表单 - 例如

```
<form action="upload.php" method="post" enctype="multipart/form-data">
File: <input type="file" name="filename" /><br />
Directory: <select name="folder">
<option>Bob</option>
<option>Cody</option>
</select>
<input type="submit" value="Upload" />
</form> 
```

和upload.php文件

换行：$folder = "files/";

```
$folder = $_POST[folder]."/"; 
```

确保您已经创建了 Bob 和 Cody 目录。

那应该让你开始。

尝试使用 CSS 研究样式

```
<style>
.someclass{
  color:#FFF;
  font-weight:700;
}
</style>

<div class="someclass">White bold text</div>
<div class="someclass">Also White bold text</div> 
```

我知道你只有 13 岁，所以坚持下去：）

# java - 如何用相同的方法“包装”两个类？

> ID：11484169
> 
> 赞同：9
> 
> 时间：2012-07-14T13:31:16.177
> 
> 标签：java, oop, design-patterns

我必须处理两个具有相同方法的类，但它们没有实现相同的接口，也没有扩展相同的超类。我不能/不允许更改此类，并且我不构造此类的实例，我只获取此类的对象。避免大量代码重复的最佳方法是什么？

一类：

```
package faa;

public class SomethingA {

    private String valueOne = null;
    private String valueTwo = null;

    public String getValueOne() { return valueOne; }
    public void setValueOne(String valueOne) { this.valueOne = valueOne; }

    public String getValueTwo() { return valueTwo; }
    public void setValueTwo(String valueTwo) { this.valueTwo = valueTwo; }
} 
```

和另外一个...

```
package foo;

public class SomethingB {

    private String valueOne;
    private String valueTwo;

    public String getValueOne() { return valueOne; }
    public void setValueOne(String valueOne) { this.valueOne = valueOne; }

    public String getValueTwo() { return valueTwo; }
    public void setValueTwo(String valueTwo) { this.valueTwo = valueTwo; }
} 
```

（实际上这些类更大）

我现在唯一的想法是创建一个包装类：

```
public class SomethingWrapper {

    private SomethingA someA;
    private SomethingB someB;

    public SomethingWrapper(SomethingA someA) {
        //null check..
        this.someA = someA;
    }

    public SomethingWrapper(SomethingB someB) {
        //null check..
        this.someB = someB;
    }

    public String getValueOne() {
        if (this.someA != null) {
            return this.someA.getValueOne();
        } else {
            return this.someB.getValueOne();
        }
    }

    public void setValueOne(String valueOne) {
        if (this.someA != null) {
            this.someA.setValueOne(valueOne);
        } else {
            this.someB.setValueOne(valueOne);
        }
    }

    public String getValueTwo() {
        if (this.someA != null) {
            return this.someA.getValueTwo();
        } else {
            return this.someB.getValueTwo();
        }
    }

    public void setValueTwo(String valueTwo) {
        if (this.someA != null) {
            this.someA.setValueTwo(valueTwo);
        } else {
            this.someB.setValueTwo(valueTwo);
        }
    }
} 
```

但我对这个解决方案并不满意。有没有更好/更优雅的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T13:33:36.873

更好的解决方案是创建一个接口来表示两个类的统一接口，然后编写两个实现该接口的类，一个包装 A，另一个包装 B：

```
public interface SomethingWrapper {
    public String getValueOne();
    public void setValueOne(String valueOne);
    public String getValueTwo();
    public void setValueTwo(String valueTwo);
};

public class SomethingAWrapper implements SomethingWrapper {

    private SomethingA someA;

    public SomethingWrapper(SomethingA someA) {
        this.someA = someA;
    }

    public String getValueOne() {
        return this.someA.getValueOne();
    }

    public void setValueOne(String valueOne) {
        this.someA.setValueOne(valueOne);
    }

    public String getValueTwo() {
        return this.someA.getValueTwo();
    }

    public void setValueTwo(String valueTwo) {
        this.someA.setValueTwo(valueTwo);
    }
}; 
```

然后另一个类就像SomethingBWrapper一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T14:05:04.190

在那里，一个鸭式解决方案。这将接受任何具有`valueOne`,`valueTwo`属性的对象，并且可以轻松扩展为进一步的道具。

```
public class Wrapper
{
  private final Object wrapped;
  private final Map<String, Method> methods = new HashMap<String, Method>();
  public Wrapper(Object w) {
    wrapped = w;
    try {
      final Class<?> c = w.getClass();
      for (String propName : new String[] { "ValueOne", "ValueTwo" }) {
        final String getter = "get" + propName, setter = "set" + propName;
        methods.put(getter, c.getMethod(getter));
        methods.put(setter, c.getMethod(setter, String.class));
      }
    } catch (Exception e) { throw new RuntimeException(e); }
  }
  public String getValueOne() {
    try { return (String)methods.get("getValueOne").invoke(wrapped); }
    catch (Exception e) { throw new RuntimeException(e); }
  }
  public void setValueOne(String v) {
    try { methods.get("setValueOne").invoke(wrapped, v); }
    catch (Exception e) { throw new RuntimeException(e); }
  }
  public String getValueTwo() {
    try { return (String)methods.get("getValueTwo").invoke(wrapped); }
    catch (Exception e) { throw new RuntimeException(e); }
  }
  public void setValueTwo(String v) {
    try { methods.get("setValueTwo").invoke(wrapped, v); }
    catch (Exception e) { throw new RuntimeException(e); }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T17:13:23.583

*您可以使用动态代理在您定义的接口和符合*但不实现您的接口的类之间创建“桥梁” 。

这一切都始于一个界面：

```
interface Something {
  public String getValueOne();
  public void setValueOne(String valueOne);
  public String getValueTwo();
  public void setValueTwo(String valueTwo);
} 
```

现在你需要一个`InvocationHandler`, 它只会将调用转发到与调用的接口方法匹配的方法：

```
class ForwardInvocationHandler implements InvocationHandler {
  private final Object wrapped;
  public ForwardInvocationHandler(Object wrapped) {
    this.wrapped = wrapped;
  }
  @Override
  public Object invoke(Object proxy, Method method, Object[] args)
      throws Throwable {
    Method match = wrapped.getClass().getMethod(method.getName(), method.getParameterTypes());
    return match.invoke(wrapped, args);
  }
} 
```

然后您可以创建您的代理（将其放在工厂中以便于使用）：

```
SomethingA a = new SomethingA();
a.setValueOne("Um");

Something s = (Something)Proxy.newProxyInstance(
    Something.class.getClassLoader(), 
    new Class[] { Something.class }, 
    new ForwardInvocationHandler(a));

System.out.println(s.getValueOne()); // prints: Um 
```

另一种选择更简单，但需要您对每个类进行子类化并实现创建的接口，就像这样：

```
class SomethingAImpl extends SomethingA implements Something {}
class SomethingBImpl extends SomethingB implements Something {} 
```

（注意：您还需要创建任何非默认构造函数）

现在使用子类而不是超类，并通过接口引用它们：

```
Something o = new SomethingAImpl(); // o can also refer to a SomethingBImpl
o.setValueOne("Uno");
System.out.println(o.getValueOne()); // prints: Uno 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T12:22:24.333

我认为你原来的包装类是最可行的选择......但是它可以使用反射来完成，你真正的问题是应用程序是一团糟......反射可能不是你正在寻找的方法

我有另一个建议，这可能会有所帮助：创建一个包装类，它对每种类型的类都有特定的功能......它主要是复制粘贴，但它迫使你使用类型化的东西作为参数

```
class X{
    public  int asd() {return 0;}
}
class Y{
    public  int asd() {return 1;}
}
class H{
    public  int asd(X a){
        return  a.asd();
        }
    public  int asd(Y a){
        return  a.asd();
        }
} 
```

用法：

```
System.out.println("asd"+h.asd(x));
System.out.println("asd"+h.asd(y)); 
```

我想指出一个接口也可以由祖先实现，如果你正在创建这些类 - 但不能修改它的源，那么你仍然可以从外部重载它们：

```
public  interface II{
    public  int asd();
}
class XI extends X implements II{
}
class YI extends Y implements II{
} 
```

用法：

```
II  a=new XI();
System.out.println("asd"+a.asd()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T07:43:29.943

您可能可以利用外观和反射 - 在我看来，它简化了您访问遗留的方式并且是可扩展的！

```
class facade{

 public static getSomething(Object AorB){
    Class c = AorB.getClass();
    Method m = c.getMethod("getValueOne");
    m.invoke(AorB);
 }
 ...

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-22T17:51:16.413

我写了一个类来封装日志框架 API。不幸的是，放入这个盒子太长了。

该程序是[http://www.github.com/bradleyross/tutorials](http://www.github.com/bradleyross/tutorials)项目的一部分，文档位于[http://bradleyross.github.io/tutorials](http://bradleyross.github.io/tutorials)。模块 tutorials-common 中的 bradleyross.library.helpers.ExceptionHelper 类的代码位于[https://github.com/BradleyRoss/tutorials/blob/master/tutorials-common/src/main/java/bradleyross/library/助手/ExceptionHelper.java](https://github.com/BradleyRoss/tutorials/blob/master/tutorials-common/src/main/java/bradleyross/library/helpers/ExceptionHelper.java)。

这个想法是我可以拥有我想让异常语句更有用的附加代码，并且我不必为每个日志记录框架重复它们。包装器不是您消除代码重复的地方。代码重复的消除在于不必编写调用包装器和底层类的代码的多个版本。见[https://bradleyaross.wordpress.com/2016/05/05/java-logging-frameworks/](https://bradleyaross.wordpress.com/2016/05/05/java-logging-frameworks/)

bradleyross.helpers.GenericPrinter 类是另一个包装器，使您能够编写与 PrintStream、PrintWriter 和 StringWriter 类和接口一起使用的代码。

# html - 在中间垂直对齐图像块

> ID：11484171
> 
> 赞同：0
> 
> 时间：2012-07-14T13:31:43.027
> 
> 标签：html, css

我需要在页面中间对齐图像。我使用 margin:auto 水平对齐中间。

如何垂直对齐 div 块中间。我有以下条件要遵循。

1.  我不能提到 div 或图像的宽度和高度。

2.  我不能以像素为单位使用 margin-top。

这是我的[jsfiddle](http://jsfiddle.net/umeshpatil86/cDD7m/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:44:10.347

你做的几乎是对的。这是你固定的小提琴[http://jsfiddle.net/joplomacedo/cDD7m/4/](http://jsfiddle.net/joplomacedo/cDD7m/4/)

问题是，您需要一个带有`display: table`包装的元素，`display: table-cell`以便表格单元的行为像它应该的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:42:57.033

背景图像技术是否适合您的需求？

```
background: url(my-image.jpg) center center no-repeat; 
```

# c++ - 通过引用传递 - 运算符重载

> ID：11484175
> 
> 赞同：2
> 
> 时间：2012-07-14T13:32:22.277
> 
> 标签：c++, operators, operator-overloading

在什么情况下，我们在运算符重载中通过引用传递对象，为什么？另外，在什么情况下运算符重载有用（特定情况）？

编辑：语言：C++

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T14:37:00.103

您“通过引用”传递参数要么是因为您想修改它们（这可能是您不希望运算符这样做的，见下文），要么仅仅是因为传递简单指针比复制整个对象更有效。

至于“为什么超载”，这主要是一个偏好问题。有一些经典的例子，比如有一个向量类可以让你添加向量或类似的东西——基本上，这些都是很好的例子，因为它们应用了算术运算符对一些新类的相同*含义*：无论你添加整数还是向量，在这两种情况下都写成“x+y”是一种自然的符号。这也是使用常量引用的经典原因——如果你写“a=b+c”，你不希望 b 或 c 被修改，并且如果你的结果是重载运算符绝对是一个好习惯正在做的是读者所期望的。

诸如智能指针（或迭代器，或其他“假装”为指针的东西）之类的东西喜欢重载诸如 -> 或 * 之类的运算符（取消引用运算符，而不是乘法）。同样的原因，这些对象伪装成指针，它们被用作指针，因此运算符重载用于使它们看起来更像指针。

我还重载了“，”运算符以将参数提供给字符串格式化对象——因为它看起来不错。出于同样的原因，STL 对 "<<" 和 ">>" 使用重载；他们认为它使事情更容易阅读。

最近，我重载了一些算术运算符和“==”，所以我可以用数学符号编写线性方程。围绕它的代码从可读的源代码构建系数矩阵，而不是要求开发人员编写一堆无意义的数字。这也是一个使用非常量引用的例子——然而，所有这些的*结果*是表示方程的矩阵中的一行，所以这正是读者所期望的。

基本上，坚持一个重要的规则：永远不要做任何意想不到的事情。仅当像“a + b”这样的结果符号确实是不了解重载内部的人所期望的时，才重载运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:21:35.040

cpp 的租户之一是用户类型应该看起来/表现得像内置类型（如 int）。

所以如果你能做到

```
int a = 1;
int b = 2;
int c = a + b; 
```

那么你也应该能够做到

```
UserType e = ...;
UserType d = ...;
UserType f = e + d; 
```

因此，运算符重载允许您为用户定义的类型定义运算符 +/-* 等......就像内置类型一样......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T15:00:13.230

当您想自然地表达某种类型的对象的某些方面时，它很有用。例如，编译器知道 +、-、*、/ 如何应用于 int 和 double。但它不知道 + 如何应用于字符串（字符数组）。它不能总是连接数组，因为这将是无稽之谈。但是对于特定的数组集（char 数组），连接可以自然地用符号“+”表示，所以当我们编写（我们可能不这样做，因为我们有 std::string）某个字符串类时，我们重载了 operator+( const MyString& rhs) 将另一个字符串的内容添加到我们的字符串中。

但是运算符重载不仅可以用于您自己的类型。例如，您有一个表示 IPv4 地址的结构：

```
struct IpAddress
{
    unsigned int addr;
}; 
```

你需要一些东西，它可以帮助你在屏幕上打印这个结构，或者把它写到文件中。您可以添加函数 to_str() 将 addr 分解为 4 个组件并返回字符串表示，但更自然的方法是重载 ostream 的 operator<<：

```
ostream& operator<<(ostream& os, const IpAddress& ip)
{
    os 
        << (ip.addr >> 24) << '.' 
        << (0xff & (ip.addr >> 16)) << '.'
        << (0xff & (ip.addr >> 8)) << '.'
        << (0xff & ip.addr); 

    return os;
} 
```

所以现在您将 IP 地址写入文件或屏幕没有问题：

```
IpAddress ip;
// put something to ip

cout << "your address is: " << ip << endl;

ofstream f("log.txt");
f << "address: " << ip << endl; 
```

很自然。

ps 当然假设 sizeof(int) == 4 ;)

# php - PHP获取数组数组中键的最小值

> ID：11484181
> 
> 赞同：3
> 
> 时间：2012-07-14T13:33:15.333
> 
> 标签：php

我有一个这样的数组：

```
$array = array(
    array('id' => 1, 'quantity' => 10),
    array('id' => 2, 'quantity' => 25),
    array('id' => 3, 'quantity' => 38),
    ...
); 
```

我想找到包含最少数量的数组。我怎么能用两行代码简单地做到这一点？！（我更喜欢使用 PHP 函数）

此外，如果变量是一个对象，它有什么区别吗？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T13:35:17.480

像这样：

```
usort($array,function($a,$b) {return $a['quantity']-$b['quantity'];});
return $array[0]; 
```

如果需要，使用创建原始数组的副本`$copy = array_slice($array,0);`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-14T13:59:34.070

对于最小值：

```
$min = min(array_map("array_pop",$array));
print_r($min); 
```

对于密钥：

```
$min = array_keys(array_map("array_pop",$array), min(array_map("array_pop",$array)));
print_r($min[0]); 
```

# ruby-on-rails-3 - LoadError: 没有要加载的文件 -- rack/handler/glassfish

> ID：11484185
> 
> 赞同：0
> 
> 时间：2012-07-14T13:33:40.777
> 
> 标签：ruby-on-rails-3, glassfish

我已经成功安装 glassfish-1.0.3-universal-java，但是当我使用命令运行 Rails Server 时`Jruby -S rails server glassfish`。输出如下：

**f:\Program Files\BitNami JRubyStack\jruby\depot>Jruby -S rails s glassfish**

> Exiting LoadError: no such file to load -- rack/handler/glassfish require at org/jruby/RubyKernel.java:1033 try_require at F:/Program Files/BitNami JRubyStack/jruby/lib/ruby/gems/1.8/gem s/ rack-1.4.1/lib/rack/handler.rb:63 ......

任何问题？我应该先运行 Tomcat 还是 Glassfish？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:45:59.593

您不再需要运行`rails server`，只需运行 glassfish。

```
f:\Program Files\BitNami JRubyStack\jruby\depot>glassfish 
```

这将为您的仓库项目启动 glassfish。查看[他们的文档](http://glassfishgem.rubyforge.org/)以获取有关此的更多信息。话虽如此，我认为 glassfish 项目已经快要死了。据我了解，甲骨文杀死了 glassfish (http://www.infoq.com/news/2010/04/glassfish-gem-alternatives-jruby)。我会看看使用[Trinidad](http://thinkincode.net/trinidad/)或[Torquebox](http://torquebox.org/)作为替代方案。

# joomla - 如何在 Joomla 中保护我的 PayPal IPN 处理程序？

> ID：11484187
> 
> 赞同：1
> 
> 时间：2012-07-14T13:33:58.560
> 
> 标签：joomla, paypal, e-commerce, paypal-ipn

我正在开发使用 Joomla 销售数字商品的小型网站。在我的网站上，确认客户付款后，我们要为他计算一些私人信息。因此，我们必须阻止未付款的人访问我们的 PayPal IPN 处理程序。现在我有一个很好的 Joomla 的 IPN 处理程序代码，它是由[Oleksandr Balyuk 先生](http://www.boolcast.com/joomla/development/joomla-custom-paypal-ipn)编写的。我认为，使用这段代码，我可以描述我在 Joomla 中的计算过程。但我有一个问题。

如何防止未付费的人浏览我的 IPN 处理程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:00:54.407

PayPal 使您能够确认 IPN 来自他们（与来自恶意用户的欺骗性 IPN 不同）。

您只需将收到的 IPN 的全部内容发回 PayPal，您将收到一条回复，如果 IPN 是真实的，您将收到一条**VERIFIED** ，或者即使一个字符不同，您也会收到**INVALID 。**

查看 IPN 指南的第 16-17 页了解更多信息：

[https://cms.paypal.com/cms_content/US/en_US/files/developer/IPNGuide.pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/IPNGuide.pdf)

# android - 使用 FLAG_NOT_TOUCHABLE，给出无响应错误

> ID：11484188
> 
> 赞同：2
> 
> 时间：2012-07-14T13:33:59.783
> 
> 标签：android, android-windowmanager, android-layoutparams, android-window

有什么办法可以消除这个错误吗？

我在我的活动中使用 FLAG_NOT_TOUCHABLE，但是当我触摸屏幕时，它似乎没有响应错误......

```
WindowManager.LayoutParams params = getWindow().getAttributes(); 
params.flags |= LayoutParams.FLAG_NOT_TOUCHABLE;
params.screenBrightness = (float) 0.0039999; 
getWindow().setAttributes(params); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:42:53.797

我认为您所说的“那个错误”和“没有响应错误”是[Activity Not Responding](http://developer.android.com/guide/practices/responsiveness.html#anr)错误或**ANR**。无论如何，Android 框架工程师 Dianne Hackborn[在此处的 Google 群组页面上解决了这个确切的问题。](https://groups.google.com/d/msg/android-developers/DC2Jiiv33MU/7hlRGS4qkWoJ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T00:21:07.703

我通过创建一个覆盖整个窗口并捕获 onClick 事件的透明视图来解决这个问题。这样，应用程序就会“响应”并且不会触发 ANR，但用户实际上无法单击屏幕上的任何按钮。

# python - Python：反转具有透明背景的图像（PIL，Gimp，...）

> ID：11484204
> 
> 赞同：5
> 
> 时间：2012-07-14T13:35:44.923
> 
> 标签：python, transparency, python-imaging-library, gimp

我在透明背景上有一组白色图标，我想在透明背景上将它们全部反转为黑色。

![在此处输入图像描述](../Images/cd3e803d1170fa39957b6c7acd070e9c.png)

已尝试使用 PIL (ImageChops)，但它似乎不适用于透明背景。我也尝试过 Gimp 的 Python 界面，但也没有运气。

知道如何在 Python 中最好地实现反转吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T14:27:52.537

`ImageChops.invert`似乎也反转了每个像素的 alpha 通道。

这应该做的工作：

```
import Image

img = Image.open('image.png').convert('RGBA')

r, g, b, a = img.split()

def invert(image):
    return image.point(lambda p: 255 - p)

r, g, b = map(invert, (r, g, b))

img2 = Image.merge(img.mode, (r, g, b, a))

img2.save('image2.png') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T15:33:34.870

我尝试过 Acorn 的方法，但结果有些奇怪（下图的顶部）。

![在此处输入图像描述](../Images/0cd60be23551445bd76951cf5a062cea.png)

底部图标是我真正想要的，我通过使用[Image Magick](http://www.imagemagick.org/script/index.php)的 convert 方法实现了它：

`convert tools.png -negate tools_black.png`

（不是 python 本身，但存在 python 包装器，如[PythonMagickWand](http://pypi.python.org/pypi/PythonMagickWand/0.2)。

唯一的缺点是你必须安装一堆依赖才能让 ImageMagick 工作，但它似乎是一个强大的图像处理框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T19:27:06.390

你可以很容易地做到这一点`PIL`，像这样：

1.  `RGBA`使用确保图像表示为`convert('RGBA')`。
2.  将图像分割成不同的`RGBA`波段。
3.  对波段做任何你想做的事情`RGB`（在你的情况下，我们使用`point`函数将它们全部设置为黑色），但不要触摸 alpha 波段。
4.  合并乐队回来。

继承人的代码：

```
import Image
im = Image.open('image.png')
im = im.convert('RGBA')
r, g, b, a = im.split()
r = g = b = r.point(lambda i: 0)
im = Image.merge('RGBA', (r, g, b, a))
im.save('saved.png') 
```

试一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T11:29:59.297

```
import Image, numpy
pixels = numpy.array(Image.open('myimage.png'))
pixels[:,:,0:3] = 255 - pixels[:,:,0:3] # invert
Image.fromarray(pixels).save('out.png') 
```

可能是迄今为止最快的解决方案，因为它不会在“for each pixel”循环中解释任何 Python 代码。

# vb.net - 直接以十六进制读取 TCP 数据包

> ID：11484212
> 
> 赞同：0
> 
> 时间：2012-07-14T13:37:07.060
> 
> 标签：vb.net, tcp, hex, packets

我有这个`System.Net.Sockets.TcpClient`。我可以建立连接并将数据包准确地写入它。问题是要按原样读取数据包（被嗅探器以十六进制形式捕获，如 0F 03 56 56 等）

我尝试查看示例，`GetStream.write`但我没有以这种方式阅读它们。我还尝试使用流式阅读器，然后将数据包转换为十六进制，但我连接的东西发送搞砸的数据包，这些数据包无法转换或简单的不是字符串形式。

我希望我足够清楚。

```
Dim bytes(tcpClient.ReceiveBufferSize) As Byte 
' Read can return anything from 0 to numBytesToRead. 
' This method blocks until at least one byte is read. 
netStream.Read(bytes, 0, CInt(tcpClient.ReceiveBufferSize)) 
' Returns the data received from the host to the console. 
Dim returndata As String = Encoding.ASCII.GetString(bytes) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T03:29:54.900

找到了解决方案！这里是：

```
Dim Bytes() as Byte = New Byte(1024){}
Array.Resize(Bytes, TcpClient.Client.Receive(Bytes, SocketFlags.None))

For Each B As Byte In Bytes
    Debug.Print("Byte in HEX Format: " & B.ToString("X2"))
Next 
```

# c# - 并行数组 C#

> ID：11484214
> 
> 赞同：1
> 
> 时间：2012-07-14T13:37:09.963
> 
> 标签：c#, arrays, oop, listbox

是否有一种简单/简单的方法来使用某种并行数组？我有 2 个数组：

```
 public class ApiArray
    { 
         //.. Arrays were filled (E.g. Id:{1,2,7,8,10}, Names:{name1, name2, name3, name4, name5} 
         public Array Id { get; set; }
         public Array Names { get; set; }
    }

    //..
    foreach (var N in ApiArray.Names)
    {
         listBox1.Items.Add(N);
    } 
```

选定的 Names 数组必须链接到 Id 数组中的相同位置。Id 数组不包含连续数字。

选择名称时，必须使用 ID。

感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T13:40:26.530

用于对来自 array 的键的数组[`Array.Sort(keys,items)`](http://msdn.microsoft.com/en-us/library/85y6y2d3.aspx)进行排序。`items``keys`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T13:41:15.210

如果`Id`和`Name`属于同一个对象，您应该将它们分组到一个类中：

```
class IdName
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public IdName myArray[]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T13:41:46.637

你有什么理由不能突破`Id`并`Name`进入自己的一类？

```
public class MyObject
{
    public string ID;
    public string Name;
}

public class ApiArray
{
    public List<MyObject> MyObjects;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T13:41:04.347

你必须做

```
Class User 
{  
  String name;int id;  
  User(name,id){this.id=id; this.name=name;} 
} 
```

现在您必须维护单个数组，每个数组索引由用户对象组成，以防如果您对该数组进行排序，整个对象将更改它们的索引位置。谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-09T20:33:23.343

如果您有超过 2 个并行数组，则创建一个您正在对其进行排序的临时副本可能会很有用，每次运行排序功能时都从原始副本中重新复制它，当然最后一个除外。下面是我正在为学校工作的一个项目的片段。数组在其他地方声明和初始化，但希望你明白。

```
string[] tempCustomerName = new string[CustomerName.Length];

CustomerName.CopyTo(tempCustomerName, 0);
Array.Sort(tempCustomerName, Id);

CustomerName.CopyTo(tempCustomerName, 0);
Array.Sort(tempCustomerName, CustomerDiscountCode);

Array.Sort(CustomerName, CustomerRate); 
```

此外，最好使用一个类来封装数组，然后制作该类的集合，这样排序更简单。像这样的东西：

```
Public class Customer
{
  public string Name {get; set;}
  public int Id {get; set;}
  public char DiscountCode {get; set;}
  public decimal Rate {get; set;}
} 
```

将客户添加到列表中，然后按如下方式排序：

```
List<Customer> SortedList = objListOrder.OrderBy(o=>o.Name).ToList();* 
```

*借自[https://stackoverflow.com/a/3309230/5676505](https://stackoverflow.com/a/3309230/5676505)

# grails - Grails 域自定义错误消息

> ID：11484217
> 
> 赞同：2
> 
> 时间：2012-07-14T13:37:15.350
> 
> 标签：grails, dns

我在一个 grails 应用程序中工作，我在应用程序中有很多域，超过 50 个！生成的错误消息是默认的，我的 message.properties 文件中有以下内容

```
default.blank.message=Field "{0}" cannot be blank. 
```

我的一个域类的一个例子如下：

```
class Person {

    String firstName;
    String lastName;
    String middleName;
    Date dob;
    String gender;
    String religion;
    String nationality;
    String maritalStatus;

    Zone permAddZone;
    District permAddDistrict;
    String permAddVDC;
} 
```

依此类推，所以当我离开一个字段时，例如“maritalStatus”，会显示以下错误消息，“字段“maritalStatus”不能为空。”。我还将以下内容添加到我的 message.properties 文件中

```
person.maritialStatus=Maritial Status 
```

但我仍然得到“字段“maritialStatus”不能为空白。信息。我也尝试过使用 I18n 模板插件，但由于我有很多域类，修改所有这些类的错误消息会很耗时。那么，我有什么选择或者我做错了什么。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T16:58:17.263

在参考页上为每个约束类型指定了要覆盖的适当消息键。在[空白](http://grails.org/doc/latest/ref/Constraints/blank.html)的情况下

```
com.example.Person.maritalStatus.blank=Marital status must not be blank 
```

但是，如果您有许多域和许多属性，这将非常耗时且重复。

相反，您要求的是一种在将域类属性名称插入*默认*消息之前以某种方式处理它们的方法。这不是 Grails 开箱即用的支持，但我喜欢挑战……而且我发现了一种令人惊讶的优雅方式来实现它。我的方法是[https://github.com/ianroberts/recursive-messages](https://github.com/ianroberts/recursive-messages)上提供的 grails 插件，它通过扩展格式字符串语法来支持表单的占位符来工作

```
default.blank.message=Field "{0,message,field.name.}" cannot be blank. 
```

`{N,message,prefix}`通过将给定前缀添加到通常的占位符替换值，然后将生成的字符串（在`field.name.maritalStatus`此示例中）视为无参数消息键，并以通常的方式查找，来解析占位符。因此，您可以对不同的语言有不同的表示。

它必须是一个插件，因为它依赖于一个在插件中有效`doWithSpring`但在应用程序中无效的技巧`resources.groovy`来修改默认`messageSource`Spring bean 的定义。

免责声明：这是一个快速修复，尚未经过全面测试，可能会更有效地实施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T22:47:46.820

为了覆盖字段标签，您需要覆盖键：

```
<package>.<domainclass>.<fieldname>.label 
```

因此，在您的情况下，请尝试：

```
<package>.Person.martialStatus.label=Label 
```

# ios - IOS - 连接到 Web 服务

> ID：11484221
> 
> 赞同：-1
> 
> 时间：2012-07-14T13:38:40.340
> 
> 标签：ios, soap, service, web

好的，没有真正的方法可以在 ios5 中连接到肥皂……很遗憾。

我真的不敢相信在 php 中需要 3 行代码的东西，

```
$client = new SoapClient("scramble.wsdl");
print($mirror = $client->sendAndGetString("hello_world")); 
```

目标c中需要366行代码？在拥有最多 ria 和网络应用程序之一的设备上。有点失望——

有没有我不知道的新图书馆？

如果我与我们的 Web 开发团队交谈，他们可能会切换到 IOS 更支持的另一种服务类型。

那会有什么替代方案呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:50:18.460

我已经写了几个关于在 iOS 中使用 Wsdl2Objc 的 SOAP 服务的教程：http: [//brismith66.blogspot.com/search/label/iPhone%20Development](http://brismith66.blogspot.com/search/label/iPhone%20Development)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:41:48.483

关于 RPC 协议的动态类型语言（如 PHP）和静态类型语言（如 Objective-C）之间的区别在于，虽然动态语言通常允许您通过静态反映其元数据（例如 WSDL）在运行时包装“任何”服务类型化语言通常需要在编译阶段之前的代码生成步骤。

两个流行的代码生成器似乎是[wsdl2objc](http://code.google.com/p/wsdl2objc/)和[sudz-c](http://sudzc.com/)。另请参阅[此问题](https://stackoverflow.com/questions/204465/how-to-access-soap-services-from-iphone)。

关于替代方案，我在使用 JSON 和 XML-RPC 以及更面向模式的[Thrift](http://thrift.apache.org/)和[Protocol Buffers](http://code.google.com/p/protobuf/) [(ObjC)](https://github.com/rickardp/protobuf-objc)方面都有很好的经验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T11:19:47.550

对我来说，最简单的方法是使用好的工具来生成所有必需的类。我个人使用这个网站：

[http://easywsdl.com/](http://easywsdl.com/)

它支持相当复杂的 Web 服务，并且非常易于使用。

# emacs - 修复自动完成模式和 linum 模式的烦恼

> ID：11484225
> 
> 赞同：9
> 
> 时间：2012-07-14T13:39:19.343
> 
> 标签：emacs, autocomplete

我正在使用`auto-complete-mode`我认为非常棒的。我也是它的忠实粉丝，`linum-mode`但是当两者一起使用时，我遇到了一个非常恼人的问题，尤其是当我在一个新缓冲区（或一个只有很少行的缓冲区）中工作时。

基本上缓冲区是“x”行长，但是当自动完成启动时，它会将行“添加”到缓冲区中，因此`linum-mode`会不断切换，例如，在一列或两列上显示行号之间，这取决于是否`auto-complete`建议完成或不。

因此，您键入一个句子，您会看到缓冲区的内容在每次按键时都从左到右疯狂地移动。这*真的很*烦人。

我认为解决方案涉及配置*linum-format*变量，但我不知道如何。

理想情况下，如果我的 linum 格式是：

*   动态的
*   右对齐
*   考虑到缓冲区的行数比缓冲区实际的行数多

我的理由是，`auto-complete`建议的建议不超过“y”建议，因此，两者将开始很好地配合。

例如，如果 'y' 设置为 20 并且我的缓冲区有 75 行，那么 linum 应该使用两列：因为无论我在哪里`auto-complete`，都不应使缓冲区“大于”99 行。

相反，如果 'y' 仍然设置为 20 并且我的缓冲区有 95 行，那么`linum`应该使用三列，因为否则如果我接近缓冲区的末尾并且`auto-complete`踢我的缓冲区将开始左右“摆动”当我打字的时候。

我宁愿不为`linum`.

我想使用“动态但总是至少两列”会以某种方式解决大多数烦恼，但我所描述的仍然会很棒。

*PS：我意识到我的“修复”意味着 linum 将始终显示在至少两列上，我对此很好......只要它保持右对齐并使用 2、3 或 4 列，具体取决于需求。*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-18T03:53:32.750

只需将以下行放入 .emacs 即可解决此问题。它在 auto-complete.el 中。

```
(ac-linum-workaround) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T22:32:48.850

我已经写了几个关于修改 linum 模式输出的先前答案，您可能可以根据自己的目的进行调整。

*   [Emacs 中的相对行号](https://stackoverflow.com/questions/6874516/relative-line-numbers-in-emacs/6928112#6928112)
*   [为当前行号着色](https://stackoverflow.com/questions/10591334/colorize-current-line-number/10593165#10593165)

**编辑：**这是该代码的最基本版本（也在[EmacsWiki](http://emacswiki.org/emacs/LineNumbers)上，尽管有些隐藏），它根本不修改默认输出，但使用其他答案中的技术比默认代码更有效。这对您来说可能是一个更有用的起点。

```
(defvar my-linum-format-string "%4d")

(add-hook 'linum-before-numbering-hook 'my-linum-get-format-string)

(defun my-linum-get-format-string ()
  (let* ((width (length (number-to-string
                         (count-lines (point-min) (point-max)))))
         (format (concat "%" (number-to-string width) "d")))
    (setq my-linum-format-string format)))

(setq linum-format 'my-linum-format)

(defun my-linum-format (line-number)
  (propertize (format my-linum-format-string line-number) 'face 'linum)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T13:44:17.480

只是有同样的问题，在看到“修补源”之后，我相信它可以用`advice`. 这是我想出的

```
(defadvice linum-update
  (around tung/suppress-linum-update-when-popup activate)
  (unless (ac-menu-live-p)
    ad-do-it)) 
```

我想`popup-live-p`按照前面提到的那样使用，但不幸的是它需要弹出窗口的变量，我们事先无法知道。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T04:05:08.910

**更新：** 我最终修补了 linum.el 的源代码。我添加了一个在更新之前运行的额外钩子。

这是修补文件：[linum.el (github)](https://github.com/chrisbarrett/.emacs.d/blob/7e6f203f6aec47b33ad510672ed62e7f4f096d87/packs/dev/colour-pack/lib/linum.el)

这是我在 init.el 中的代码：

```
;; Load custom linum.
(load-file "~/.emacs.d/linum.el")

;; Suppress line number updates while auto-complete window
;; is displayed.
(add-hook 'linum-before-update-hook
          '(lambda ()
             (when auto-complete-mode
               (if (ac-menu-live-p)
                   (setq linum-suppress-updates t)
                 (setq linum-suppress-updates nil))))) 
```

希望能帮助到你！

# visual-studio-2010 - 是否有 Visual Studio 2010 文件预览选项卡插件？

> ID：11484228
> 
> 赞同：2
> 
> 时间：2012-07-14T13:39:42.350
> 
> 标签：visual-studio-2010, plugins

[Visual Studio 2012 中的新“预览选项卡](http://blogs.msdn.com/b/zainnab/archive/2012/06/19/visual-studio-2012-new-features-preview-tab.aspx)”功能是否有 Visual Studio 2010 插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:58:04.683

我试过自己做，但我没有做 VS 扩展的经验，也没有使用 EnvDTE API。

我已经按照[为 Visual Studio 2010 构建和发布扩展](http://blogs.msdn.com/b/visualstudio/archive/2009/12/09/building-and-publishing-an-extension-for-visual-studio-2010.aspx)来创建新的 Visual Studio 2010 扩展。

然后，我使用 VSPackage Builder 设计器添加了一个工具菜单项，并使用此代码尝试模仿该行为。

我无法：

*   确定何时选择文件，所以我必须循环。
*   在现有窗口中打开文件。
*   更改要在右侧显示的窗口。

我将代码留在这里，以防其他人对创建扩展感兴趣。希望他对 VS 可扩展性有更好的了解。

```
[Guid(GuidList.guidPreviewDocumentTabPkgString)]
public class PreviewDocumentTabPackage : PreviewDocumentTabPackageBase
{
    private DTE dte;
    private Document currentTab;

    protected override void Initialize()
    {
        base.Initialize();

        this.dte = this.GetService(typeof(_DTE)) as DTE;
        if (this.dte == null)
        {
            throw new ArgumentNullException("dte");
        }

        var applicationObject = (DTE2)GetGlobalService(typeof(SDTE));
        var solutionExplorer = applicationObject.ToolWindows.SolutionExplorer;

        System.Threading.Tasks.Task.Factory.StartNew(() =>
        {
            object currentItem = null;
            while (true) // To be improved
            {
                // Get selected items
                var items = solutionExplorer.SelectedItems as Array;

                // Only do logic if there is one file selected, no preview for multiple files.
                if (items != null &&
                    items.Length == 1)
                {
                    var item = items.GetValue(0);
                    if (currentItem == null)
                    {
                        currentItem = item;
                    }
                    else
                    {
                        // Only show preview if the file is "new".
                        if (item != currentItem)
                        {
                            currentItem = item;

                            // Determine if is a c# file.
                            var realItem = (UIHierarchyItem)currentItem;
                            var itemName = realItem.Name;
                            if (itemName.EndsWith(".cs"))
                            {
                                // Get the file
                                var projectItem = (ProjectItem)realItem.Object;
                                var projectItemPath = projectItem.Properties.Item("FullPath")
                                                                    .Value.ToString();

                                // No already opened file.
                                if (currentTab == null)
                                {
                                    // Open the file and get the window.
                                    this.currentTab = this.dte.Documents.Open(projectItemPath);
                                }
                                else
                                {
                                    // Todo: Open the file in the this.currentTab window.
                                }
                            }
                        }
                    }
                }

                // Avoid flooding
                System.Threading.Thread.Sleep(100);
            }
        });
    }
} 
```

# jquery - $.grep 会影响原始数组吗？

> ID：11484229
> 
> 赞同：0
> 
> 时间：2012-07-14T13:40:05.267
> 
> 标签：jquery, arrays

我正在过滤一个数组，该数组在 Google 地图（API V3）上形成一组标记：http: [//testdae.dialanexchange.com/testmap.aspx](http://testdae.dialanexchange.com/testmap.aspx)。

对于分时度假度假村和具有残疾人通道和允许携带宠物之一或两者的私人财产，这一切都可以正常工作。在所有这些情况下，我输入的调试警报显示 1642，这是用于标记的原始数组中的点数。

但是，当您选择全部以及禁用访问和允许宠物中的一个或两者时，在正确显示结果后，取消选择其中一个复选框会导致警报显示这些过滤器已影响原始数组，因为它指示了总计在过滤器部分的底部。它只能通过重新加载页面来重置。

我认为问题出在 filterProperties() 函数中，但我看不到。

是不是因为我一直盯着它，谷歌搜索并尝试各种方法让它工作了一天多，所以我在这里遗漏了什么？我认为 $.grep 不应该影响原始数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T13:45:17.963

来自[jQuery](http://api.jquery.com/jQuery.grep/)`$.grep()`文档：

> 查找满足过滤器函数的数组元素。**原始数组不受影响。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:25:18.467

答案结果是，不是 $.grep 有问题，而是在 Javascript 中将一个对象分配给另一个对象会导致两个对象都被更改（如果有的话），因为它们是通过引用同一个对象来链接的。解决方案是从原始对象克隆一个新对象，从而保持原始对象的完整性。参考资料是：-

1)[在 JavaScript 中深度克隆对象的最有效方法是什么？](https://stackoverflow.com/questions/122102/what-is-the-most-efficient-way-to-clone-a-javascript-object)

2) [http://od-eon.com/blogs/bogdan/javascript-assignment-reference-vs-object-cloning/](http://od-eon.com/blogs/bogdan/javascript-assignment-reference-vs-object-cloning/)

# c++ - 如何检查 c++ stl 向量中是否存在值并将函数应用于向量的每个元素？

> ID：11484234
> 
> 赞同：4
> 
> 时间：2012-07-14T13:40:40.180
> 
> 标签：c++, vector, iterator, iteration

我有两个与 C++ 中标准库的**向量**类相关的问题。

1.  如何检查向量中是否已经存在一个值（比如说一个整数）？

    我想要的文字如下：“如果向量中已经存在整数，则下一个，否则将其添加到向量的末尾。”

2.  如何将包含参数的函数应用于向量中的每个元素？（看来我不能用 for_each 做到这一点）

    换句话说：“对于向量中的每个 z 元素应用 MyAddFn(i,j)”

...或者也许我没有在 stl 矢量序列容器的正确轨道上，我应该定义自己的迭代器？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-14T13:43:36.160

1)

`std::find(v.begin(), v.end(), 5) == v.end() // checks that vector<int> v has no value 5.`

2) 例如，使用新的 C++11 std::bind，但对于真正的建议，我需要更多使用 MyAddFn 的上下文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T13:41:57.317

对于 1，使用[std::find](http://www.cplusplus.com/reference/algorithm/find/)算法。如果元素不存在，则将迭代器返回到末尾。在这种情况下，添加元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T14:15:13.547

第二个问题。您可以使用对象而不是函数：

```
#include <vector>
#include <algorithm>

class apply_me
{
  int multiplicator_;
  public:
  apply_me(const int multiplicator) : multiplicator_(multiplicator)
  {};
  int operator ()(const int element) const
  {
    return element*multiplicator_;
  };
};
int main()
{
  std::vector<int> v;
  std::transform(v.begin(), v.end(),v.begin(), apply_me(3));
} 
```

# java - 在 Java 集合和类型转换中实现简单的函数式范例

> ID：11484235
> 
> 赞同：1
> 
> 时间：2012-07-14T13:40:47.667
> 
> 标签：java, generics, collections, casting, functional-programming

我最近开始在 Scala 中工作，那是我第一次真正接触到函数式范例。尽管我是 Java 的忠实粉丝，而且我承认，它有时缺乏函数式范式。

这就是为什么我最近开始了一个迷你宠物项目，看看在某种程度上，这样的事情是否可以在 Java 中实现。

我从一个简单的数组列表修改开始，这就是我目前所拥有的：

* * *

任何集合都需要实现的接口，以便为其元素提供应用功能：

```
public interface Functionalizable<E> {
    public Collection<E> apply(Function<E> f);
} 
```

定义在单个元素上应用函数的方法的接口：

```
public interface Function<E> {
    public E apply(E e);
} 
```

一个由数组列表支持的具体类，允许在其元素上应用函数：

```
public class FunctionArrayList<E> implements List<E>, Functionalizable<E> {
    private List<E> list;

    //implemented methods from `List` interface and ctors

    @Override
    public List<E> apply(Function<E> f) {

        List<E> applied = new FunctionArrayList<>(this.list.size());

        for (E e : this.list) {
            applied.add(f.apply(e));
        }

        return applied;
    }
} 
```

我已经为 Integer 编写了一个小的测试方法，它工作正常：

代码：

```
 List<Integer> listOfIntegersBefore = new FunctionArrayList<>();
    listOfIntegersBefore.add(-1);
    listOfIntegersBefore.add(0);
    listOfIntegersBefore.add(1);
    listOfIntegersBefore.add(2);
    listOfIntegersBefore.add(3);
    listOfIntegersBefore.add(4);

    System.out.println("Before<Integer>: " + listOfIntegersBefore.toString());

    List<Integer> listOfIntegersAfter = ((FunctionArrayList<Integer>) listOfIntegersBefore).apply(new Function<Integer>() {

        @Override
        public Integer apply(Integer e) {
            return (e + 1);
        }
    });

    System.out.println("After<Integer> : " + listOfIntegersAfter.toString()); 
```

输出：

```
Before<Integer>: [-1, 0, 1, 2, 3, 4]
After<Integer> : [0, 1, 2, 3, 4, 5] 
```

* * *

然而，当我尝试用 List 做一些更复杂的事情时，我最终会遇到很多我不喜欢的类型转换（我想尽可能避免它）。
代码：

```
 List<List<Integer>> listOfListOfIntegersBefore = new FunctionArrayList<>();

    List<Integer> temp = new FunctionArrayList<>();
    temp.add(1);
    listOfListOfIntegersBefore.add(temp);

    temp = new FunctionArrayList<>();
    temp.add(1);
    temp.add(2);
    listOfListOfIntegersBefore.add(temp);

    temp = new FunctionArrayList<>();
    temp.add(1);
    temp.add(2);
    temp.add(3);
    listOfListOfIntegersBefore.add(temp);

    temp = new FunctionArrayList<>();
    temp.add(1);
    temp.add(2);
    temp.add(3);
    temp.add(4);
    listOfListOfIntegersBefore.add(temp);

    List<List<Integer>> listOfListOfIntegersAfter = (List<List<Integer>>) ((Functionalizable<List<Integer>>) listOfListOfIntegersBefore).apply(new Function<List<Integer>>() {

        @Override
        public List<Integer> apply(List<Integer> e) {
            List<Integer> list = new FunctionArrayList<>(e);

            return ((FunctionArrayList<Integer>) list).apply(new Function<Integer>() {

                @Override
                public Integer apply(Integer e) {
                    return (e + 1);
                }
            });
        }
    });
    System.out.println("Before<List<Integer>>: " + listOfListOfIntegersBefore);
    System.out.println("After<List<Integer>> : " + listOfListOfIntegersAfter); 
```

输出：

```
Before<List<Integer>>: [[1], [1, 2], [1, 2, 3], [1, 2, 3, 4]]
After<List<Integer>> : [[2], [2, 3], [2, 3, 4], [2, 3, 4, 5]] 
```

* * *

正如我已经提到的，我想避免强制转换。`Type safety: Unchecked cast from List<List<Integer>> to Functionalizable<List<Integer>>`另外，Eclipse在这一行警告我：

```
List<List<Integer>> listOfListOfIntegersAfter = (List<List<Integer>>) ((Functionalizable<List<Integer>>) listOfListOfIntegersBefore).apply(new Function<List<Integer>>() {
    ...
} 
```

有没有一种优雅的方式来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:03:57.890

你让自己的生活变得艰难。

```
List<List<Integer>> listOfListOfIntegersBefore = new FunctionArrayList<>();
[...]
((FunctionArrayList<Integer>) listOfIntegersBefore).apply 
```

为什么不首先将其存储为 a`FunctionArrayList`呢？当然，您必须以这种方式进行投射。

无论如何，我发现将每个列表包装在一个功能列表中有点烦人，我宁愿用简单的静态方法来做：

```
public interface F<S, T> { T apply(S s); }

public final class FunctionalStuff {
  private FunctionalStuff() {}

  public <S, T> static List<T> map(Collection<? extends S> collection,
                                   F<? super S, ? extends T> func) {
    final List<T> result = new ArrayList<T>(collection.size()); 
    for (S source : collection)
      result.add(func.apply(source)); 
    return result;
  }

  public <S, T> static List<S> filter(Collection<? extends S> collection,
                                      F<? super S, Boolean> predicate) {
    final List<T> result = new ArrayList<T>(collection.size()); 
    for (S source : collection)
      if (predicate.apply(source))
        result.add(source); 
    return result; 
  }

  // etc etc.
} 
```

无论如何，请注意：我不建议您在 Java 中进行函数式编码。等待将在 Java 8 中添加的闭包。

或者使用包含函数式风格的语言：Scala、Javascript、Clojure、Lisp、Mathematica 等，有很多！甚至 c(++) 在这方面似乎也比 Java 不那么烦人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:20:54.207

也许您想查看[op4j](http://www.op4j.org/)。我认为他们以一种非常简洁的方式完成了您想要实现的目标。要么查看资源并从中学习，要么直接使用库。

# android - Android 中的 ContentObserver

> ID：11484240
> 
> 赞同：1
> 
> 时间：2012-07-14T13:41:04.827
> 
> 标签：android, android-contentprovider, contentobserver

我已成功监控传入的短信并将其发送到数据库以供稍后查看。我已阅读有关监控传出短信的信息，但我并不真正了解它是如何工作的。有人可以指导我如何使用 ContentObserver 编写代码来监控传出的短信吗？我将从我应该开始的地方发布我当前的所有传入 sms.need 指南的代码。

短信接收器.java

```
package terima.sms.inbox;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.gsm.SmsMessage;
import java.net.*;
import java.io.*;

@SuppressWarnings("deprecation")
public class SmsReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();

        Object messages[] = (Object[]) bundle.get("pdus");
        SmsMessage SMS[] = new SmsMessage[messages.length];
        for (int n = 0; n < messages.length; n++) {
            SMS[n] = SmsMessage.createFromPdu((byte[]) messages[n]);
        }

        String member_id = "1";

        inbox(SMS[0].getOriginatingAddress(), SMS[0].getMessageBody(), member_id);
    }

    public static Boolean inbox(String telefon, String message, String member_id){

        String mesej = "";
        for(int i = 0; i < message.length(); i++)
        {
            if(message.charAt(i) == ' ' || message.charAt(i) == '+')
            {
                if(message.charAt(i) == ' ')
                    mesej += "%20";
                else
                    mesej += "%2B";
            }
            else
            {
                mesej += message.charAt(i);
            }
        }

        try
        {
            URL oracle = new URL("http://192.168.1.111/inbox.php?message=" + mesej + "&telefon=" + telefon + "&member=" + member_id);
            BufferedReader in = new BufferedReader(new InputStreamReader(oracle.openStream()));

            String fetch, total = "";
            while ((fetch = in.readLine()) != null)
                total += fetch;
            in.close();

            if(total.equals("1"))
                return true;

            return false;
        }
        catch(Exception e)
        {
            return false;
        }
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T21:20:37.243

要捕获传出 SMS，您应该使用 ContentObserver 和 ContentResolver。这是我在 ContentObserver 中使用的代码：

```
public class SmsObserver extends ContentObserver{   

int smsCount;

public SmsObserver(Context context) {
    super(new Handler());

    smsCount = 0;

}

public void onChange(boolean selfChange){   
    super.onChange(selfChange);
  readSms();
}

private void readSms(){
    Uri uriSMS = Uri.parse("content://sms");
    Cursor cur = context.getContentResolver().query(uriSMS, null, null, null, "_id");

    cur.moveToLast();
    int id = Integer.parseInt(cur.getString(cur.getColumnIndex("_id")));

    if(cur != null && id != smsCount && id>0){
        smsCount = id;

    int type = Integer.parseInt(cur.getString(cur.getColumnIndex("type")));

        if(type == 1){
            // handle the received sms

        }
        else{
            // handle the sent sms
        }
    }

    cur.close();

}
} 
```

之后，您应该创建一个 SmsOberver 实例并将其注册到“content://sms”。它会比您发送或接收新消息时更频繁地触发，所以这就是我有一个 smsCount 字段的原因。

# python - 我自己的类来协调两个元类 - TranslatableModelBase 和 MPPTModelBase

> ID：11484246
> 
> 赞同：1
> 
> 时间：2012-07-14T13:42:00.397
> 
> 标签：python, django

我有 django 模型类，它继承了两个类 - *TranslatableModel*和*MPPTModel*。它会导致元类冲突——Python 不知道要使用哪个基类的元类。

所以，我需要编写自己的元类来协调两个元类 - *TranslatableModelBase*和*MPTTModelBase*。

我应该如何编写自己的元类？

```
class TranslatableModelBase(ModelBase):
    """
    Metaclass for models with translated fields (TranslatableModel)
    """
    def __new__(cls, name, bases, attrs):
        super_new = super(TranslatableModelBase, cls).__new__
        parents = [b for b in bases if isinstance(b, TranslatableModelBase)]
        if not parents:
            # If this isn't a subclass of TranslatableModel, don't do anything special.
            return super_new(cls, name, bases, attrs)
        new_model = super_new(cls, name, bases, attrs)
        if not isinstance(new_model.objects, TranslationManager):
            raise ImproperlyConfigured(
                "The default manager on a TranslatableModel must be a "
                "TranslationManager instance or an instance of a subclass of "
                "TranslationManager, the default manager of %r is not." %
                new_model)

        opts = new_model._meta
        if opts.abstract:
            return new_model

        found = False
        for relation in new_model.__dict__.keys():
            try:
                obj = getattr(new_model, relation)
            except AttributeError:
                continue
            if not hasattr(obj, 'related'):
                continue
            if not hasattr(obj.related, 'model'):
                continue
            if getattr(obj.related.model._meta, 'shared_model', None) is new_model:
                if found:
                    raise ImproperlyConfigured(
                        "A TranslatableModel can only define one set of "
                        "TranslatedFields, %r defines more than one: %r to %r "
                        "and %r to %r and possibly more" % (new_model, obj,
                        obj.related.model, found, found.related.model))
                else:
                    new_model.contribute_translations(obj.related)
                    found = obj

        if not found:
            raise ImproperlyConfigured(
                "No TranslatedFields found on %r, subclasses of "
                "TranslatableModel must define TranslatedFields." % new_model
            )

        post_save.connect(new_model.save_translations, sender=new_model, weak=False)

        if not isinstance(opts.get_field_by_name, SmartGetFieldByName):
            smart_get_field_by_name = SmartGetFieldByName(opts.get_field_by_name)
            opts.get_field_by_name = MethodType(smart_get_field_by_name , opts,
                                                opts.__class__)

        return new_model

class MPTTModelBase(ModelBase):
    """
    Metaclass for MPTT models
    """

    def __new__(meta, class_name, bases, class_dict):
        """
        Create subclasses of MPTTModel. This:
         - adds the MPTT fields to the class
         - adds a TreeManager to the model
        """
        MPTTMeta = class_dict.pop('MPTTMeta', None)
        if not MPTTMeta:
            class MPTTMeta:
                pass

        initial_options = set(dir(MPTTMeta))

        # extend MPTTMeta from base classes
        for base in bases:
            if hasattr(base, '_mptt_meta'):
                for (name, value) in base._mptt_meta:
                    if name == 'tree_manager_attr':
                        continue
                    if name not in initial_options:
                        setattr(MPTTMeta, name, value)

        class_dict['_mptt_meta'] = MPTTOptions(MPTTMeta)
        cls = super(MPTTModelBase, meta).__new__(meta, class_name, bases, class_dict)

        return meta.register(cls)

    @classmethod
    def register(meta, cls, **kwargs):
        """
        For the weird cases when you need to add tree-ness to an *existing*
        class. For other cases you should subclass MPTTModel instead of calling this.
        """

        if not issubclass(cls, models.Model):
            raise ValueError(_("register() expects a Django model class argument"))

        if not hasattr(cls, '_mptt_meta'):
            cls._mptt_meta = MPTTOptions(**kwargs)

        abstract = getattr(cls._meta, 'abstract', False)

        # For backwards compatibility with existing libraries, we copy the
        # _mptt_meta options into _meta.
        # This was removed in 0.5 but added back in 0.5.1 since it caused compatibility
        # issues with django-cms 2.2.0.
        # some discussion is here: https://github.com/divio/django-cms/issues/1079
        # This stuff is still documented as removed, and WILL be removed again in the next release.
        # All new code should use _mptt_meta rather than _meta for tree attributes.
        attrs = set(['left_attr', 'right_attr', 'tree_id_attr', 'level_attr', 'parent_attr',
                    'tree_manager_attr', 'order_insertion_by'])
        warned_attrs = set()

        class _MetaSubClass(cls._meta.__class__):
            def __getattr__(self, attr):
                if attr in attrs:
                    if attr not in warned_attrs:
                        warnings.warn(
                            "%s._meta.%s is deprecated and will be removed in mptt 0.6"
                            % (cls.__name__, attr),
                            #don't use DeprecationWarning, that gets ignored by default
                            UserWarning,
                        )
                        warned_attrs.add(attr)
                    return getattr(cls._mptt_meta, attr)
                return super(_MetaSubClass, self).__getattr__(attr)
        cls._meta.__class__ = _MetaSubClass

        try:
            MPTTModel
        except NameError:
            # We're defining the base class right now, so don't do anything
            # We only want to add this stuff to the subclasses.
            # (Otherwise if field names are customized, we'll end up adding two
            # copies)
            pass
        else:
            if not issubclass(cls, MPTTModel):
                bases = list(cls.__bases__)

                # strip out bases that are strict superclasses of MPTTModel.
                # (i.e. Model, object)
                # this helps linearize the type hierarchy if possible
                for i in range(len(bases) - 1, -1, -1):
                    if issubclass(MPTTModel, bases[i]):
                        del bases[i]

                bases.insert(0, MPTTModel)
                cls.__bases__ = tuple(bases)

            for key in ('left_attr', 'right_attr', 'tree_id_attr', 'level_attr'):
                field_name = getattr(cls._mptt_meta, key)
                try:
                    cls._meta.get_field(field_name)
                except models.FieldDoesNotExist:
                    field = models.PositiveIntegerField(db_index=True, editable=False)
                    field.contribute_to_class(cls, field_name)

            # Add a tree manager, if there isn't one already
            if not abstract:
                manager = getattr(cls, 'objects', None)
                if manager is None:
                    manager = cls._default_manager._copy_to_model(cls)
                    manager.contribute_to_class(cls, 'objects')
                elif manager.model != cls:
                    # manager was inherited
                    manager = manager._copy_to_model(cls)
                    manager.contribute_to_class(cls, 'objects')
                if hasattr(manager, 'init_from_model'):
                    manager.init_from_model(cls)

                # make sure we have a tree manager somewhere
                tree_manager = None
                for attr in sorted(dir(cls)):
                    try:
                        obj = getattr(cls, attr)
                    except AttributeError:
                        continue
                    if isinstance(obj, TreeManager):
                        tree_manager = obj
                        # prefer any locally defined manager (i.e. keep going if not local)
                        if obj.model is cls:
                            break
                if tree_manager and tree_manager.model is not cls:
                    tree_manager = tree_manager._copy_to_model(cls)
                elif tree_manager is None:
                    tree_manager = TreeManager()
                tree_manager.contribute_to_class(cls, '_tree_manager')
                tree_manager.init_from_model(cls)

                # avoid using ManagerDescriptor, so instances can refer to self._tree_manager
                setattr(cls, '_tree_manager', tree_manager)

                # for backwards compatibility, add .tree too (or whatever's in tree_manager_attr)
                tree_manager_attr = cls._mptt_meta.tree_manager_attr
                if tree_manager_attr != 'objects':
                    another = getattr(cls, tree_manager_attr, None)
                    if another is None:
                        # wrap with a warning on first use
                        from django.db.models.manager import ManagerDescriptor

                        class _WarningDescriptor(ManagerDescriptor):
                            def __init__(self, manager):
                                self.manager = manager
                                self.used = False

                            def __get__(self, instance, type=None):
                                if instance != None:
                                    raise AttributeError("Manager isn't accessible via %s instances" % type.__name__)

                                if not self.used:
                                    warnings.warn(
                                        'Implicit manager %s.%s will be removed in django-mptt 0.6\. '
                                        ' Explicitly define a TreeManager() on your model to remove this warning.'
                                        % (cls.__name__, tree_manager_attr),
                                        DeprecationWarning
                                    )
                                    self.used = True
                                return self.manager

                        setattr(cls, tree_manager_attr, _WarningDescriptor(tree_manager))
                    elif hasattr(another, 'init_from_model'):
                        another.init_from_model(cls)

        return cls 
```

# iphone - 在 WAMP 上的 iPod 上使用“http://localhost”而不是“http://xx.xx.xx.xx”

> ID：11484249
> 
> 赞同：0
> 
> 时间：2012-07-14T13:42:14.747
> 
> 标签：iphone, localhost, wampserver

我正在运行 Windows 7 并使用我的 iPod Touch 访问我的本地主机站点以在 WAMP 上进行测试。

我可以通过在 iPod 上的 Safari 中导航到我的机器 IP 来浏览我的 localhost 站点，如下所示：`http://10.0.0.100`

我想知道是否可以使用它`http://localhost`，以及如何实现。

非常感谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:47:47.677

基本上， localhost 指的是 127.0.0.1 指的是环回 ip，它是 ipod 本身，因此除非您在（DNS / hosts 文件）中更改 [localhost 以解析为机器 IP，在本例中为 10.0.0.100]，否则这是不可能的您的 ipod 用于解析连接设置中的域名，我不建议这样做。

以下是更改 ipod 中的 hosts 文件所需的步骤（我已经警告过你这不是一件好事，除非你知道自己在做什么）

来源：[https ://discussions.apple.com/thread/2801892?start=0&tstart=0](https://discussions.apple.com/thread/2801892?start=0&tstart=0)

简单的解决方案：

主机文件位于：/etc/hosts

要编辑此文件，您需要通过 SSH 连接到您的设备，如果您知道如何直接执行此操作，只需使用 vi 或 nano 来编辑文件。从 windows 使用 WinSCP 通过 FTP(SSH) 访问文件系统。然后只需导航到 /etc/hosts 将文件下载到桌面，右键单击并用记事本打开它，将解析器添加到最后一行“192.168.0.100 testserver”，保存并用新文件替换原始文件。

/etc/host -- 示例配置

```
# Host Database

#

# localhost is used to configure the loopback interface

# when the system is booting.  Do not change this entry.

##

127.0.0.1              localhost

255.255.255.255   broadcasthost

::1                        localhost

192.168.0.100       testserver 
```

*要通过 SSH 连接到 ipod，它必须安装 OpenSSH，通常这需要越狱。

# python - 为什么urlopen可以下载谷歌搜索页面，但不能下载谷歌学术搜索页面？

> ID：11484250
> 
> 赞同：1
> 
> 时间：2012-07-14T13:42:16.643
> 
> 标签：python, python-3.x, urllib, google-scholar

我正在使用**Python 3.2.3 的** `urllib.request`模块来下载 Google 搜索结果，但我遇到了一个奇怪的错误，它`urlopen`适用于 Google 搜索结果的链接，但不适用于 Google Scholar。在此示例中，我正在搜索`"JOHN SMITH"`. 此代码成功打印 HTML：

```
from urllib.request import urlopen, Request
from urllib.error import URLError

# Google
try:
    page_google = '''http://www.google.com/#hl=en&sclient=psy-ab&q=%22JOHN+SMITH%22&oq=%22JOHN+SMITH%22&gs_l=hp.3..0l4.129.2348.0.2492.12.10.0.0.0.0.154.890.6j3.9.0...0.0...1c.gjDBcVcGXaw&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=dffb3b4a4179ca7c&biw=1366&bih=649'''
    req_google = Request(page_google)
    req_google.add_header('User Agent', 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20120427 Firefox/15.0a1')
    html_google = urlopen(req_google).read()
    print(html_google[0:10])
except URLError as e:
    print(e) 
```

但是这段代码，对谷歌学术做同样的事情，引发了一个`URLError`异常：

```
from urllib.request import urlopen, Request
from urllib.error import URLError

# Google Scholar
try:
    page_scholar = '''http://scholar.google.com/scholar?hl=en&q=%22JOHN+SMITH%22&btnG=&as_sdt=1%2C14'''
    req_scholar = Request(page_scholar)
    req_scholar.add_header('User Agent', 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20120427 Firefox/15.0a1')
    html_scholar = urlopen(req_scholar).read()
    print(html_scholar[0:10])
except URLError as e:
    print(e) 
```

追溯：

```
Traceback (most recent call last):
  File "/home/ak5791/Desktop/code-sandbox/scholar/crawler.py", line 6, in <module>
    html = urlopen(page).read()
  File "/usr/lib/python3.2/urllib/request.py", line 138, in urlopen
    return opener.open(url, data, timeout)
  File "/usr/lib/python3.2/urllib/request.py", line 369, in open
    response = self._open(req, data)
  File "/usr/lib/python3.2/urllib/request.py", line 387, in _open
    '_open', req)
  File "/usr/lib/python3.2/urllib/request.py", line 347, in _call_chain
    result = func(*args)
  File "/usr/lib/python3.2/urllib/request.py", line 1155, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "/usr/lib/python3.2/urllib/request.py", line 1138, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [Errno -5] No address associated with hostname> 
```

我通过在 Chrome 中搜索并从那里复制链接获得了这些链接。一位评论者报告了 403 错误，我有时也会遇到。我认为这是因为 Google 不支持 Scholar 的抓取。但是，更改用户代理字符串并不能解决这个*问题或原始问题*，因为我`URLErrors`大部分时间都得到了。  

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T15:36:43.013

[这个 PHP 脚本](https://code.google.com/p/bioguid/source/browse/trunk/www/scholar_ris.php)似乎表明您需要在 Google 为您提供结果之前设置一些 cookie：

```
/*

 Need a cookie file (scholar_cookie.txt) like this:

# Netscape HTTP Cookie File
# http://curlm.haxx.se/rfc/cookie_spec.html
# This file was generated by libcurl! Edit at your own risk.

.scholar.google.com     TRUE    /       FALSE   2147483647      GSP     ID=353e8f974d766dcd:CF=2
.google.com     TRUE    /       FALSE   1317124758      PREF    ID=353e8f974d766dcd:TM=1254052758:LM=1254052758:S=_biVh02e4scrJT1H
.scholar.google.co.uk   TRUE    /       FALSE   2147483647      GSP     ID=f3f18b3b5a7c2647:CF=2
.google.co.uk   TRUE    /       FALSE   1317125123      PREF    ID=f3f18b3b5a7c2647:TM=1254053123:LM=1254053123:S=UqjRcTObh7_sARkN

*/ 
```

[谷歌学术评论的 Python 配方](http://code.activestate.com/recipes/523047-search-google-scholar/#c2)证实了这一点，其中包括一个警告，即谷歌检测到脚本，如果你使用它过多，它将禁用你。

# django - 如何动态创建 django 模型

> ID：11484253
> 
> 赞同：0
> 
> 时间：2012-07-14T13:42:30.643
> 
> 标签：django

我的 django 应用程序需要根据他的电子邮件域（在 xyz@gmail.com 中的“gmail”）收集用户数据（姓名年龄国家等）。我希望每次遇到新的电子邮件域时都创建一个新表。这可以在 django 中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:44:39.333

这是一个坏主意。您的表都将具有相同的结构。您的所有数据都应存储在一个表中，并使用一`domain`列将数据分开。为什么要为每个域使用不同的表？无论你有什么理由，都有更好的方法来做到这一点。

这个想法违背了关系数据库设计中的所有内容，以及在它之上的 Django ORM。

# php - 用于干净 URL 的 Mod_Rewrite

> ID：11484255
> 
> 赞同：1
> 
> 时间：2012-07-14T13:42:44.523
> 
> 标签：php, .htaccess, mod-rewrite

很简单的要求。我希望我的网址看起来像：

```
http://localhost/movie/72105 
```

而不是这个

```
http://localhost/movie?id=72105 
```

我目前在我的 .htaccess 文件中进行了此设置，但它似乎不起作用：

```
RewriteEngine on
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^([a-z\-]+)$ index.php?id=$1 [L]
</IfModule> 
```

也澄清一下，当 mod_rewrite 成功运行时，我仍然可以使用它来检索 ID？：

```
$_GET['id'] 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:46:45.150

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^lab/movie/(\d+)$ index.php?id=$1 [L]
</IfModule> 
```

现在，您可以浏览`http://domain.com/movie/12`并将.`$_GET['id']``12`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T13:47:40.510

我正在使用这个

```
Options +FollowSymLinks
IndexIgnore */*
# Turn on the RewriteEngine
RewriteEngine On
RewriteBase /
#  Rules
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

您可以通过解析检索 id 和其他参数（mobvie）

```
$_SERVER['REQUEST_URI'] 
```

在你的 index.php 中比。另见：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# actionscript-3 - 在 flex 中切换窗口大小

> ID：11484256
> 
> 赞同：-1
> 
> 时间：2012-07-14T13:42:49.973
> 
> 标签：actionscript-3, apache-flex

所以我和一个朋友使用我们发布的 flex 制作了一个工具，我们制作了 680x480 的窗口，人们说它对他们来说太小了。

所以我想要做的是可能包括一个开关或将尺寸从 640x480 切换到 800x600 的东西，所以你可以使用这两个选项。

我只是想知道这是否可能？我整个早上都在搜索谷歌，但找不到我需要的东西。

我在这方面也很新手......我的朋友是编码员，但他不知道也没有时间解决这个问题，所以如果我能在这里得到一些见解，那将是一个很大的帮助。

我没有提到，这不是一个规模，我在包中拥有 800x600 的所有资产以及标准文件，所以，我想这将是一个状态更改，但我不确定是否可以将状态更改为更大页。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:56:35.500

Veeeeeery 粗略转换`640x480`为`800x600`分辨率：

```
stage.scaleX = 800 / 640;
stage.scaleY = 600 / 480; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:00:31.823

好吧，基本上，您可以通过 SWF 在包含的 HTML 页面中占据 100% 的宽度和 100% 的高度。

然后，如果您需要固定大小，您可以在 Group 容器中组织您的应用程序并相应地调整其大小。

试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application
    width="100%"
    height="100%"
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx">
    <s:Group horizontalCenter="0" verticalCenter="0" width="{resolutionDropDownList.selectedItem.w}" height="{resolutionDropDownList.selectedItem.h}">
        <s:Rect width="100%" height="100%">
            <s:fill>
                <s:SolidColor color="#FF0000"/>
            </s:fill>
        </s:Rect>
    </s:Group>
    <s:HGroup top="10" horizontalCenter="0" gap="5" verticalAlign="baseline">
        <s:Label text="Size:"/>
        <s:DropDownList id="resolutionDropDownList" labelField="label" selectedIndex="0">
            <s:dataProvider>
                <s:ArrayList>
                    <fx:Object w="640" h="480" label="640x480"/>
                    <fx:Object w="800" h="600" label="800x600"/>
                </s:ArrayList>
            </s:dataProvider>
        </s:DropDownList>
    </s:HGroup>
</s:Application> 
```

# c# - YcbCr 图像表示

> ID：11484259
> 
> 赞同：0
> 
> 时间：2012-07-14T13:43:18.173
> 
> 标签：c#, image-processing, image-conversion

我是图像处理领域的新手。我使用过 bmp 图像，但目前我手头有一个问题，需要在进一步处理之前将图像转换为 YCbCr 颜色空间。我已阅读有关 YCbCr 和转换过程的信息，但问题是我不知道如何以图像格式存储 YCbCr 数据以及哪种图像格式将支持它。

我的意思是在 bmp 图像中 rgb 组件以 bgr 格式存储，字节应该是 4 的倍数等，但是 YCbCr 呢？它们是如何表示的？

如果这听起来很蹩脚，我很抱歉。我用谷歌搜索了一下，但问题是我认为我的方向不正确。实际上这是我的最后一个项目，我的时间不多了。

**更新：**虽然可以使用 tiff 和 jpeg，但实际上不需要将其存储在某些图像容器中。我通过将 rgb 转换为 YCbCr 处理它然后将其逐个像素地转换回 rgb 来解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:20:17.620

这两种格式每个像素只需要三个字节。因此，只要您以某种未压缩的格式（例如 ppm）存储像素，就无需担心转换。写的时候，把 Y 放入 R，Cb int G 和 Cr 分别放入蓝色字节。当您读入这些值时，由您的程序来解释它们 - 大多数图像处理程序的默认解释是将它们视为 RGB，但您可以告诉它以 YCbCr 的形式读取它们

如果您选择以某种压缩格式（例如 jpeg）存储它，您读回的值可能与您存储的值不同，但决定取决于您需要的准确性。

# asp.net - Server.Transfer + Refresh 导致多次插入数据库

> ID：11484260
> 
> 赞同：0
> 
> 时间：2012-07-14T13:43:24.007
> 
> 标签：asp.net, server.transfer

我面临的问题如下。

在我的 button_Click 事件中，

```
Server.Transfer("~/LeaseOffer/AdSpaceDetails.aspx?Id=" + adRepo.SubmitPost(ad).ToString()); 
```

当我在 AdSpaceDetails.aspx 页面中时，如果我点击刷新，那么记录会再次提交到数据库。

即使我尝试在 finally 块中清理诸如“ **ad** ”和“ **adRepo** ”之类的对象，但徒劳无功。

如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:45:27.133

您是否在 Server.Transfer 之前更新数据库？

如果是，只需更改为使用 Response.Redirect 而不是 Server.Transfer，这将解决您的问题。

有关更多信息，请查看 Post/Redirect/Get (PRG) 模式，[http ://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

# jquery - 使用 DOM 操作时如何使用 jquery 显示/隐藏评论

> ID：11484263
> 
> 赞同：0
> 
> 时间：2012-07-14T13:43:53.070
> 
> 标签：jquery

我要感谢这篇文章[在此处输入链接描述](https://stackoverflow.com/questions/3727635/jquery-show-all-comments-click-hide-at-success)它实际上是有效的，但只有在直接编写 html 文档时才有效。但是在 jquery 创建的文档中应用相同的东西时它不起作用。你能告诉我如何解决这个问题吗？

我的代码是

```
<script>
var toggle = false;
$(function() {
    $('a.comments').click(function(e) {
        var $this = $(this);
        $('.toggleComments').toggle(1000,function() {
            if(!toggle) {
                $this.text('Hide Comments');
                toggle = !toggle;
            }else {
                $this.text('Show Comments');
                toggle = !toggle;
            }
        });
        e.preventDefault();
    });
}); 

var html;
$(document).ready(function()
{
html='<a href="#" class="comments">Show Comments</a><br /><div class="toggleComments">This is #comment1 <br />This is #comment2 <br /></div>';

$("#start").append(html);

}); 
</script>

</head>

<body>
<div id="start"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:50:17.590

问题是您试图在元素存在之前将其绑定到元素。只需稍微重新排列代码，以便在将单击事件绑定到它时元素存在。您可以在这个[jsFiddle 页面](http://jsfiddle.net/peterolson/SAE9A/)上看到它。您可能需要重新考虑一下您的逻辑，因为文本并不完全具有您所期望的行为。

```
var html;
$(document).ready(function() {
    html = '<a href="#" class="comments">Show Comments</a><br /><div class="toggleComments">This is #comment1 <br />This is #comment2 <br /></div>';

    $("#start").append(html);
    var toggle = false;
    $('a.comments').click(function(e) {
        var $this = $(this);
        $('.toggleComments').toggle(1000, function() {
            if (toggle) {
                $this.text('Hide Comments');
            } else {
                $this.text('Show Comments');
            }
            toggle = !toggle;
        });
        e.preventDefault();
    });
}); 
```

您还可以使用该`on`函数自动绑定到动态添加的元素。您所要做的就是更改`$("a.comments").click(function() {})`为`$(document).on('click', 'a.comments', function() {})`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:47:11.120

要将您的事件处理程序应用于动态创建的元素，您需要[on](http://api.jquery.com/on/)函数：

```
 $(document).on('click', 'a.comments', function(e) { 
```

即使在将来添加到 DOM 的元素上，也将在单击时调用提供的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T13:47:19.997

使用 .live 来解决这个问题

```
$('a.comments').live('click',function(){
 //do your job here
}); 
```

# internet-explorer - 在下拉菜单上未检测到 IE7-9 悬停

> ID：11484270
> 
> 赞同：0
> 
> 时间：2012-07-14T13:44:54.107
> 
> 标签：internet-explorer, drop-down-menu, hover

我正在构建一个下拉菜单。我以前做过很多次，所以我不明白为什么这次不行。任何帮助将不胜感激。

所有版本的 IE 都拒绝在我的 CSS 下拉菜单上触发悬停事件。这适用于 chrome 和 FF，但 IE7、8 和 9 只会在您将鼠标悬停在链接文本上或设置边框时显示下拉菜单`li`（请参阅下面的参考资料）。

所以我们不会浪费时间，我会提到`DOCTYPE`我的代码中确实有一个。我还将 Modernizr 用于其他 HTML5 元素。我试过禁用这个，不行。所有链接都有一个`href`属性，没有一个是空的，我尝试过浮动`li ul {}`而不是`position absolute`等。

这是对我的问题的完美解释。不幸的是，他们的“修复”并没有为我修复它：http: [//www.hopstudios.com/blog/internet_explorer_hover_li_bug_solution/](http://www.hopstudios.com/blog/internet_explorer_hover_li_bug_solution/)

这是我的CSS。所有这些都在网上：[http ://allgodspeople.org/simplexdemo/](http://allgodspeople.org/simplexdemo/)

```
nav {
width: 530px;
float: right;
clear: right;
height: 78px;
overflow: visible;
}

nav * {
zoom: 1;}

nav ul {
margin: 0px;
padding: 0px;
}
nav ul li {
display: block;
float: left;
clear: none;
height: 53px;
list-style-type: none;
padding: 30px 0px;
z-index: 999;
position: relative;
}
nav  a:link, nav  a:visited, nav  a:hover, nav  a:active {
display: block;
float: left;
clear: both;
color: #ffffff;
height: 23px; /*important for submenu positioning*/
text-decoration: none;
font-family: bebas;
padding: 0px 8px 0px;
margin: 0px;
}
nav ul li a {
height: 73px;
margin-top: -30px;}
nav li a:hover {
color: #e57914;
text-decoration: underline;
}
nav li.active a {
color: #e57914 !important;
}

/*Dropdown styles*/
nav li ul {
display: none;
float: left;
clear: both;
background: #444444;
border-radius: 0px 0px 4px 4px;
padding: 0px;
margin: 0px;
overflow: hidden;
position: absolute;
top: 73px;
z-index: 999;
width: 200px;}
nav li:hover ul , nav li.hover ul{
display: block;}/*trigger the dropdown*/
nav li ul li {
background-color: #444444;
display: block;
float: left;
clear: both;
height: auto;
min-height: 23px;
padding: 0px 0px;
overflow: hidden;}
nav li ul a:link, 
nav li ul a:visited, 
nav li ul a:hover, 
nav li ul a:active {
display: block;
background-color: #444444;
color: #ffffff;
padding: 6px 15px;
margin: 0px;
width: 160px;
min-width: 160px;
margin: 0px;}
nav li ul a:hover {
background: #284f66;
color: #e57914;
text-decoration: none;}
nav li ul li:last-of-type a {
border-radius: 0px 0px 4px 4px;} 
```

PS。我的`@charset "UTF-8"`也在里面。

我已经研究了几个小时，花了几个小时在 IE 检查器中愚弄它，并且发现很少有文档记录的示例，但都没有解决我的问题。我知道 IE6 不支持 li:hover 正确。我不关心 IE6——但我从没想过 IE7、8 甚至 IE9 会有这个 bug？

有人知道怎么修这个东西吗？即使是黑客，如果它看起来不错？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T19:16:49.313

修复？重写菜单样式。我仍然不知道出了什么问题，只是当我重写我的菜单样式时它消失了。我最好的猜测是我将标签切换为`<nav>`标签`<div id="navigation">`，并更新了 CSS。

总之谢谢大家！

# .net - ReadConsoleOutputCharacter 不适用于德语变音符号

> ID：11484271
> 
> 赞同：3
> 
> 时间：2012-07-14T13:44:59.887
> 
> 标签：.net, winapi, console

我正在使用此代码直接从控制台读取。

```
 public char? ReadCharacterAt(int x, int y)
    {
        IntPtr consoleHandle = GetStdHandle(-11);
        if (consoleHandle == IntPtr.Zero)
        {
            return null;
        }
        var position = new Coord
        {
            X = (short)x,
            Y = (short)y
        };
        var result = new StringBuilder(1);
        uint read = 0;
        if (ReadConsoleOutputCharacter(consoleHandle, result, 1, position, out read))
        {
            return result[0];
        }
        else
        {
            return null;
        }
    }

    [DllImport("kernel32.dll", SetLastError = true)]
    static extern IntPtr GetStdHandle(int nStdHandle);

    [DllImport("kernel32.dll", SetLastError = true)]
    static extern bool ReadConsoleOutputCharacter(IntPtr hConsoleOutput, [Out] StringBuilder lpCharacter, uint length, Coord bufferCoord, out uint lpNumberOfCharactersRead);

    [StructLayout(LayoutKind.Sequential)]
    public struct Coord
    {
        public short X;
        public short Y;
    } 
```

但是，对于德语变音符号 (äüö)，这不会返回正确的字符。我想知道我该如何解决？

**更新**

正如 Hans 和 Raymond 所指出的，答案在于 DLL 导入。我所要做的就是将其更改为：

```
[DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Unicode)] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T17:46:55.550

从 SDK 文档：

> 此函数使用控制台当前代码页中的 Unicode 字符或 8 位字符。控制台的代码页最初默认为系统的 OEM 代码页。要更改控制台的代码页，请使用 SetConsoleCP 或 SetConsoleOutputCP 函数，或使用 chcp 或 mode con cp select= 命令。

由于您没有在 [DllImport] 属性中指定 CharSet，因此您将获得 8 位字符。从技术上讲，您可以通过读取 byte[] 并使用 Console.OutputEncoding.GetString() 进行转换来使其工作。但不要，使用 CharSet.Unicode 让 Windows 为您进行转换。

# php - 解析错误：语法错误，爬虫代码中出现意外的 T_VARIABLE 错误

> ID：11484273
> 
> 赞同：0
> 
> 时间：2012-07-14T13:45:21.583
> 
> 标签：php

我已经搜索过这个答案，但找不到。我收到错误消息“解析错误：语法错误，意外的 T_VARIABLE”，并认为它与第 30 行列出的“a”有关。任何想法如何使此代码正确？

```
<?php
class Crawler {
    protected $markup = ”;
    public function __construct($uri) {
        $this->markup = $this->getMarkup($uri);
    }

    public function getMarkup($uri) {
        return file_get_contents($uri);
    }

    public function get($type) {
        $method = array($this,”_get_”.$type);
        if (method_exists($this,$method[1]))
            return call_user_func($method);
        return false;
    }

    protected function _get_images() {
        if (!empty($this->markup)){
            preg_match_all("/<img([^>]+)\/>/i", $this->markup, $images);
            return !empty($images[1]) ? $images[1] : FALSE;
        }
    }

    protected function _get_links() {
        if (!empty($this->markup)){
            preg_match_all("/<a([^>]+)\>(.*?)\<\/a\>/i", $this->markup, $links);
            return !empty($links[1]) ? $links[1] : FALSE;
        }
    }
}
a 
$crawl = new Crawler("http://www.facebook.com");
$images = $crawl->get("images");
$links = $crawl->get("links");
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:02:49.907

您可以尝试`;`在您`a`的第 30 行之后放置一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:08:43.330

删除它`a`，并使用直引号`"`而不是当前的弯引号。

# macos - PHPUnit 已安装但什么也没做

> ID：11484274
> 
> 赞同：0
> 
> 时间：2012-07-14T13:45:25.427
> 
> 标签：macos, configuration, installation, phpunit

我正在关注“使用 Zend 框架的简易 PHP 网站”中的教程，并想安装 PHPUnit。

系统：Mac OS x Lion，本地运行的 PHP（不是 MAMP）

Pear 已安装并且工作正常，我将其升级到最新版本。

使用安装的 PHPUnit

```
sudo pear install phpunit/PHPUnit 
```

终端做了一些工作并安装它没有错误

在我的终端中我做了

```
phpunit --version 
```

这将返回/不执行任何操作（已删除用户名）

```
Machine:~ Username$ phpunit --version
Machine:~ Username$ sudo phpunit --version
Machine:~ Username$ 
```

担心它没有安装，所以我检查了 PHPUnit 文件，它们确实存在于 /usr/lib/php/phpunit 下

还检查了 /usr/bin 下的 phpunit exe 是否存在

编辑 .profile 以及 .bash_profile 以包含 /usr/bin 路径

```
export PATH=/usr/bin:$PATH 
```

然后重新启动终端

跑步

```
echo $PATH 
```

节目

```
/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/git/bin:/Users/xxxxx/development/frameworks/ZendFramework-1.11.11/bin 
```

php.ini 包含的是

```
include_path = ".:/usr/lib/php/pear:/Library/Server/Web/Data/Sites/ZendFramework-1.11.11/library" 
```

其中 xxxxx 是我在 Mac 上的用户名

甚至进入终端中的 /usr/bin 并使用 phpunit --version 什么也不返回

如果它相关，我的 PEAR 配置显示

```
Configuration (channel pear.php.net):
=====================================
...
...
PEAR executables directory     bin_dir          /usr/bin
PEAR documentation directory   doc_dir          /usr/lib/php/doc
PHP extension directory        ext_dir          /usr/lib/php/extensions/.....
PEAR directory                 php_dir          /usr/lib/php
PEAR data directory            data_dir         /usr/lib/php/data
PHP CLI/CGI binary             php_bin          /usr/bin/php
php.ini location               php_ini          <not set>
....
....
PEAR Installer temp directory  temp_dir         /private/tmp/pear/temp
PEAR test directory            test_dir         /usr/lib/php/test
PEAR www files directory       www_dir          /usr/lib/php/htdocs
.... 
```

还将 pear 和 phpunit 目录添加到我的 php.ini 包含路径列表中。

我不知道为什么这不起作用。确定是我，我做错了……任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:21:32.540

好的，经过大量阅读和摆弄，终于解决了这个问题。问题在于 PEAR，而不是 PHPUnit 本身。

按照 http://pear.php.net/manual/en/installation.checking.php 上的 PEAR 设置发现问题

php.ini 从

.:/usr/lib/php/pear:/Library/Server/Web/Data/Sites/ZendFramework-1.11.11/library:/usr/lib/php/PHPUnit

到

.:/usr/lib/php/pear:/Library/Server/Web/Data/Sites/ZendFramework-1.11.11/library:/usr/lib/php

立即解决了这个问题。

phpunit --version 现在可以使用

# c# - 二进制搜索不起作用

> ID：11484276
> 
> 赞同：0
> 
> 时间：2012-07-14T13:45:38.260
> 
> 标签：c#, binary-search

我有 int 值的数组

```
 int[] myArr = (int[]) alItems.ToArray(typeof (int));

 index = Array.BinarySearch(myArr, searchNumber); 
```

当我在 myArr 中有 searchNumber 时，它给了我负索引，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T13:47:26.037

如果二分查找返回 -1，则该值不在数组中。如果数组未排序（二进制搜索需要这样做），也会发生这种情况。

在使用二分搜索之前，您应该了解它是如何工作的。在将其放入代码之前，请花一些时间进行一些[研究。](http://msdn.microsoft.com/en-us/library/y15ef976.aspx)

# javascript - 分组令牌输入

> ID：11484280
> 
> 赞同：1
> 
> 时间：2012-07-14T13:46:00.820
> 
> 标签：javascript, jquery, jquery-tokeninput

我正在使用[Tokeninput](http://loopj.com/jquery-tokeninput/)创建一个仅允许来自数据库的预定结果的框。

但是，此插件缺少的一件事是对建议进行分组的能力。所以我可以有一个这样的清单；

```
Sausages
  Mettwurst
  Bratwurst
Companies
  Wurth
  Wu Tang
  Altawusta 
```

类别标签不可选择，仅提供信息。

我已经准备好 JSON 来发送一个`category`包含类别明文名称的额外密钥；即，Company 块中的每个建议都包含`category: "Companies"`在它们的对象中。我认为通过这种方式对建议进行分组会很容易。

是否有任何修改或替代插件可以实现我正在寻找的东西？

如果没有，我将如何修改 Tokeninput 以支持这些更改？我看到他们的 Github 为此列出了一个问题，但没有回应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:55:34.290

内置的 jQuery UI 自动完成功能对您不起作用吗？它支持类别 -

[http://jqueryui.com/demos/autocomplete/#categories](http://jqueryui.com/demos/autocomplete/#categories)

编辑 -

哎呀，本来是想发表评论.. :(

# php - 数组只显示第一个结果好

> ID：11484287
> 
> 赞同：0
> 
> 时间：2012-07-14T13:46:37.217
> 
> 标签：php, mysql

我尝试以几种方式编写此代码，但结果总是只对一线队有利，所有其他结果都不好。当我输入其他俱乐部的 id 而不是 $id 时，我得到了那支球队的好结果，但不是只有一行，我想显示所有 20 支球队。

```
<table>
<thead><tr><th>Name</th><th>Played</th><th>0,5</th><th>1,5</th><th>2,5</th>
<th>3,5</th><th>4,5</th></tr></thead>
<tbody>
<?php 
$teams = mysql_query("select * from teams");
$num_teams = mysql_num_rows($teams);

while ($group = mysql_fetch_row($teams)) {
   $id_team[] = $group; 
 }

for ($a = 0; $a < $num_teams; $a++) {

if (isset($num_array)) {
mysql_data_seek($query_array, 0 );
$search_array_over = array();
}

$id = $id_team[$a][0];
$name_over = $id_team[$a][1];

 $query_array = mysql_query("select * from full_stat where kl1 = $id or kl2 = $id");
 $num_array = mysql_num_rows($query_array);

 while ($row = mysql_fetch_row($query_array)) {
$data_over[] = $row;    
 }

 $search_array_over = array('1' => '0', '2' => '0' ,'3' => '0', '4' => '0','5' => '0','6' => '0');
 for ($now = 0;$now < $num_array; $now++) {
    $over_pass = ($data_over[$now][3] + $data_over[$now][4]);

    for ($pass = 1; $pass < 7; $pass++) {
        if ($over_pass >= $pass)     {
            $final_pass = $pass;
        }
        else {
            $final_pass = '6';
        }

if (array_key_exists($final_pass, $search_array_over)) {
    $search_array_over[$final_pass] += 1;
        }
else {
    $search_array_over[$final_pass] = 1;

 }
 }
 }

 echo '<tr><td>'.$name_over.'</td><td>'.$num_array.'</td>     <td>'.$search_array_over[1].'</td><td>'.$search_array_over[2].'</td><td>'.$search_array_over[3].'</td><td>'.$search_array_over[4].'</td><td>'.$search_array_over[5].'</td></tr>';
 }
 ?>
 </tbody>
 </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:00:51.493

这是一个令人困惑的 PHP 代码块。

对您的最终输出的更好解释可能会在这里有所帮助，但我猜这是团队列表加上他们的统计数据。

由于剖析您当前的代码让我感到痛苦，因此我将描述我将如何做到这一点。

在您的数据库中，您有 2 个表，“team”和“team_stats”

团队结构：

```
id int
name varchar
.... 
```

统计结构：

```
team_id int
someStat int
otherStat int
....

$stmt = $mysqli -> prepare("SELECT * FROM team LEFT JOIN team_stats ON team_stats.team_id");
$stmt -> execute();
$result = $stmt -> fetch_all();
foreach($result as $team) {
     // output data to page
} 
```

?>

# mysql - 游戏应用程序的特定mysql查询

> ID：11484292
> 
> 赞同：0
> 
> 时间：2012-07-14T13:47:05.457
> 
> 标签：mysql

这是我正在开发的游戏。我有一个 MySQL 表，每个玩家实体都包含他们每只手拿着的武器的 id，例如：

```
player id, playername, rhand, lhand,
1          Guy         1      2
2          OtherGuy    3      2 
```

我有一个项目表，其中包含按 id 列出的每个项目的信息

```
item  name   damage_type
1     hammer crush
2     shield none
3     sword  slash 
```

在我的服务器上解决战斗时，我通过 id 搜索每个玩家，一个是攻击者，一个是防御者所以我想要这样的结果

```
player id playername rhand lhand   rhand_damage_type lhand_damage_type
1         Guy        hammer shield crush             none
2         OtherGuy   sword  shield slash             none 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:55:27.087

```
SELECT p.player_id, p.player_name, w1.name, w2.name, w1.damage_type, w2.damage_type 
FROM players p, weapons w1, weapons w2 
WHERE p.player_id = attackerId OR p.player_id=defenderId
AND p.rhand = w1.item 
AND p.lhand = w2.item 
```

如果 plyers 也可能错过一种或两种武器：

```
SELECT DISTINCT player_id, player_name, w1.name, w2.name, w1.damage_type, w2.damage_type 
FROM 
(SELECT player_id, player_name, name, damage_type 
 FROM players LEFT JOIN weapons on rhand = w1.item 
 WHERE p.player_id = attackerId OR p.player_id=defenderId) as w1,
(SELECT player_id, player_name, name, damage_type 
 FROM players LEFT JOIN weapons on lhand = w2.item 
 WHERE p.player_id = attackerId OR p.player_id=defenderId) as w2
 Were w1.player_id = w2.player_id 
```

# c++ - 如何在被函数修改后删除二维数组？

> ID：11484293
> 
> 赞同：0
> 
> 时间：2012-07-14T13:47:06.050
> 
> 标签：c++, arrays, function

所以，我做了一个看起来像这样的函数：

```
const char **myFunction(char *string)
{   
    char *bufCopy = new char[strlen(string)];
    strcpy(bufCopy,string);
    char *tmp = func1(bufCopy);

    const char **RetVector = new const char* [6];
    RetVector[0] = tmp;

    return RetVector;
} 
```

func1（即 strtok）修改了第一个参数，所以当我 delete[] 它给我堆损坏。我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:53:07.473

您*必须*始终跟踪您的原始分配`bufCopy`，只有那个可以是`delete`d。`tmp`可能只指向它的一部分（在某处的缓冲区内），所以你不能`delete`。

# spring-mvc - 一个 ModelAttribute 两个控制器

> ID：11484303
> 
> 赞同：1
> 
> 时间：2012-07-14T13:47:30.953
> 
> 标签：spring-mvc

我想在我的两个不同页面中显示相同的记录列表，

## 第一个控制器和 JSP

```
public class Model1Controller{

....
....

@ModelAttribute("/myList")
public ModelAndView myMethod(){
   List<String> listOfRecords = new ArrayList<String>();
   listOfRecords.add("1");
   listOfRecords.add("2");

   ModelAndView mv = new ModelAndView();
   mv.addObject("listOfRecords", listOfRecords);

   return mv;
}

....
....
....

} 
```

## 第一个 JSP

```
<ul>
<c:forEach items="${listOfRecords}" var="items">
  <li${items}></li>
</c:forEach>
</ul> 
```

## 第二控制器和 JSP

```
public class Model1Controller{

....
....

@ModelAttribute("/myList")
public ModelAndView myMethod(){
   List<String> listOfRecords = new ArrayList<String>();
   listOfRecords.add("1");
   listOfRecords.add("2");

   ModelAndView mv = new ModelAndView();
   mv.addObject("listOfRecords", listOfRecords);

   return mv;
}

....
....
....

} 
```

## 第二个 JSP

```
<ul>
<c:forEach items="${listOfRecords}" var="items">
  <li${items}></li>
</c:forEach>
</ul> 
```

有什么方法可以在一个地方访问相同的模型属性来访问

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T21:05:53.283

如果您希望多个控制器可以使用相同的列表，请将其放在会话或应用程序上下文中。哪个更合适。该模型是您想要向 Web 视图公开的任何内容的请求的一部分，因此它不是为跨多个请求或控制器使用而设计的。

[http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/bind/annotation/ModelAttribute.html](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/bind/annotation/ModelAttribute.html)

# servlets - 检查请求来自的域或 IP？

> ID：11484305
> 
> 赞同：5
> 
> 时间：2012-07-14T13:47:40.423
> 
> 标签：servlets

我有一个 servlet，是否可以检查请求是否来自特定域，例如“example.com”？

```
public abstract class MyServlet extends HttpServlet {

public void doPost(HttpServletRequest req, HttpServletResponse resp) 
    throws ServletException, IOException 
{
        if (didOriginateFrom("example.com", req)) {
            // ok to process
        }
    }
} 
```

我有一台服务器会将一些工作卸载到辅助服务器（上图），只是想确保它只处理来自我的主服务器的请求，

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T19:02:04.770

以下方法为您提供了发出请求的客户端主机的信息。

*   `HttpServletRequest.getRemoteAddr()`
*   `HttpServletRequest.getRemoteHost()`

这是您要查找的代码：

```
boolean didOriginateFrom(Sting host, HttpServletRequest req) {
   return req.getRemoteHost().contains(host);
} 
```

上述两种方法都提供了有关客户端或发送请求的最后一个代理地址的信息。

尽管请求已通过多个代理，但某些服务器可能会返回原始客户端地址。[代理通过添加X-Forwarded-For](http://en.wikipedia.org/wiki/X-Forwarded-For)标头将直接客户端的地址发送到服务器。因此，某些服务器可能会处理[X-Forwarded-For](http://en.wikipedia.org/wiki/X-Forwarded-For)标头值并返回原始客户端地址。

这是[X-Forwarded-For](http://en.wikipedia.org/wiki/X-Forwarded-For)请求标头的外观

```
X-Forwarded-For : originalclient, proxy1, proxy2, lastproxy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:54:31.793

如果我理解正确，`javax.servlet.ServletRequest.getServerName()`应该可以工作。它还提供了进一步的方法来检索请求信息，getScheme()、getServerPort()...

# c# - 如何从 AC# 程序更改 Windows 中的文件权限？

> ID：11484306
> 
> 赞同：0
> 
> 时间：2012-07-14T13:47:41.747
> 
> 标签：c#, file-permissions, directory-permissions

我制作了一个 C# windows App 程序，它将在 C 驱动器中搜索用户在文本框中输入的文件夹，搜索将在用户按下按钮后开始。问题是我收到一个异常告诉我：

```
Access To The Path 'C:\Documents and Settings' is Denied 
```

如何在 C 驱动器（或任何其他驱动器）中发现我无权访问的任何文件夹/文件，并通过我的 C# 程序更改其权限以访问已授予或其他内容，以便我可以继续搜索？

在 Linux 中有 chmod，但我不知道 windows .. 请帮助 :)

搜索代码：

```
string operationSucceeded = "Operation Completed Successfully";
Exception NoFilesFound = new Exception("No File(s) Found In Specified Directory");
List<string> foundFolders = new List<string>();

private void button5_Click(object sender, EventArgs e)
{
  try
  {
    Search_In_For("C:\\", WantedFile_Folder_TextBox.Text);
    if (foundFolders == null) throw NoFilesFound;
    for (int i = 0; i < foundFolders.Count; i++)
    SearchResultsTextBox.Text += (foundFolders[i] + "\n");
    MessageBox.Show(operationSucceeded);
  }
  catch (Exception ex)
  {
    MessageBox.Show(ex.Message);
  }
}

delegate void SearchDelegate(string searchDir, string wanted);

private void Search_In_For(string searchDir, string wanted)
{
  string[] foldersInThisDir = Directory.GetDirectories(searchDir);
  if (foldersInThisDir.Length == 0) return;
  for (int i = 0; i < foldersInThisDir.Length; i++)
    if (foldersInThisDir[i].Contains(wanted))
      foundFolders.Add(foldersInThisDir[i]);
  SearchDelegate sd = new SearchDelegate(Search_In_For);
  for (int i = 0; i < foldersInThisDir.Length; i++)
    sd(foldersInThisDir[i] , wanted);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:03:44.473

尝试从 Windows 资源管理器“以管理员身份”运行您的程序。

# php - 如何从 mysql 表中获取完整的电子邮件列到 CSV 文件

> ID：11484308
> 
> 赞同：-1
> 
> 时间：2012-07-14T13:48:12.660
> 
> 标签：php, mysql, file, csv, field

> **可能重复：**
> [mysql 从远程数据库转储到本地主机输出文件](https://stackoverflow.com/questions/4743419/mysql-dump-to-localhost-outfile-from-a-remote-database)

我有一个以电子邮件为字段的 mysql 表。我想将所有这些电子邮件保存到 CSV 文件中，以便我可以将这些电子邮件用于时事通讯。

我尝试了 MySQL 中的导出选项，但我不知道如何从整个表中只选择一个字段。

谁能帮助我如何做到这一点？我想这是一个简单的技巧，但我想我也太初学者了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:12:46.453

如果您在本地访问 MySQL 数据库，那么 Besnik 到另一个线程的链接将起作用。

然而，远程是一个不同的故事，你会想要做这样的事情......

[mysql 从远程数据库转储到本地主机输出文件](https://stackoverflow.com/questions/4743419/mysql-dump-to-localhost-outfile-from-a-remote-database)

# c# - 获取本地网络计算机名称列表

> ID：11484310
> 
> 赞同：1
> 
> 时间：2012-07-14T13:48:28.207
> 
> 标签：c#, networking, directoryentry, workgroup

我正在使用 Visual Studio 2010，我在网上搜索了帮助和其他使用 DirectoryEntry("WinNT:") 的人，但它似乎对我不起作用。我可以看到我的网络工作组，如果我使用 DirectoryEntry("WinNT://MYWORKGROUP") 我看不到任何列出的计算机。

请帮助我不确定为什么它对我不起作用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:01:25.653

*[从我的网络位置获取计算机名称](https://stackoverflow.com/a/10236331/1495442)：*

> 除非您确定域环境，否则不要使用 DirectoryServices。System.DirectoryServices 类是一个 ADSI 包装器，无需 Active Directory 即可查询。NetServerEnum() 适用于工作组和域，但不保证最可靠的数据（并非所有机器都可能出现）。它依赖于计算机浏览器服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T13:56:16.777

要浏览本地 Windows 网络，必须运行 NetBIOS 名称解析并正确配置。在公司网络中，这通常意味着存在 WINS 服务器。在现代 Windows 安装中，默认情况下不启用所需的组件。

在尝试使用您自己的代码执行任何操作之前，请确保基础架构已到位。打开 Windows 资源管理器并展开“网络”节点。如果名称 Windows 浏览正确，您应该在那里看到网络上的计算机列表。如果列表为空，则问题不在您的代码中。

# java - ListView 中每一行的颜色不同，我也想拖动行和每行的背景颜色交换。怎么做

> ID：11484311
> 
> 赞同：2
> 
> 时间：2012-07-14T13:48:56.990
> 
> 标签：java, android, listview, drag-and-drop

我为 a 中的每一行设置了不同的颜色，`ListView`并且我希望`Drag and Drop`每一行以及相应的背景颜色。

设置不同行背景的方法如下所示，现在我想拖动行与其他行更改，并且每行的背景也必须交换

```
public static class DragListAdapter extends ArrayAdapter<String>{

        public DragListAdapter(Context context, List<String> objects) {
            super(context, 0, objects);           
        }       
        public List<String> getList(){
                   return list;
        }       
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            View view = convertView;

                view = LayoutInflater.from(getContext()).inflate(R.layout.drag_list_item, null);

                 TextView textView = (TextView)view.findViewById(R.id.drag_list_item_text);
                 textView.setText(getItem(position));

             switch(position){
             case 0:
                      textView.setBackgroundResource(R.drawable.gray);
                  break;
             case 1:     
                      textView.setBackgroundResource(R.drawable.white);
                      break;
             case 2:     
                         textView.setBackgroundResource(R.drawable.Pink);
                         break;
             case 3:     
                        textView.setBackgroundResource(R.drawable.Cyan);
                        break;
             case 4:     
                        textView.setBackgroundResource(R.drawable.Gainsboro);
                        break;
             case 5:     
                        textView.setBackgroundResource(R.drawable.Magenta);
                        break;
             case 6:     
                        textView.setBackgroundResource(R.drawable.MediumSpringGreen);
                        break;
             case 7:     
                        textView.setBackgroundResource(R.drawable.SteelBlue);
                        break;
             case 8:     
                        textView.setBackgroundResource(R.drawable.Yellow);
                        break;
             case 9:     
                        textView.setBackgroundResource(R.drawable.LightSteelBlue);
                        break;

             }
                  return view;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:57:06.787

[体验——安卓拖拽列表](http://ericharlow.blogspot.com/2010/10/experience-android-drag-and-drop-list.html)

[Android 上的拖放列表视图](http://good-good-study.appspot.com/blog/posts/132001)

以上是您正在寻找的完整教程。谢谢

# iphone - NSMutableArray lastObject 在 UITableView iPhone 中不起作用？

> ID：11484312
> 
> 赞同：0
> 
> 时间：2012-07-14T13:49:11.530
> 
> 标签：iphone, ios, uitableview, nsmutablearray

我想从`NSMutableArray`. 当我使用下面的代码从中获取最后一个对象时，`NSMutableArray`它没有找到它：

```
if ([mutableArray lastObject])
{
  NSLog(@"Last Object");
}
else
{
  NSLog(@"Not a Last Object");
} 
```

当我调用此代码时，该`if`语句仅调用数组中的每个对象。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T13:57:20.517

[mutableArray lastObject] 返回一个 id 类型的对象，它是数组的最后一个对象。这不是一个测试。

要查看它，您应该编写如下内容：

```
id myLastObject = [mutableArray lastObject];
NSLog(@"my last object is : %@",myLastObject); 
```

编辑：检查最后一个对象是什么意思？

使用 isEqual 方法检查相等性检查两个对象是否是相同的对象，这意味着只有一个对象，但您可能想检查两个对象是否具有相同的属性，从而检查属性是否具有相同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:58:21.530

```
if ([someObject isEqual:[mutableArray lastObject]]) {

      NSLog(@"Last Object");

} 
```

# php - PHP GET 方法在 Xampps 中不起作用

> ID：11484313
> 
> 赞同：-1
> 
> 时间：2012-07-14T13:49:11.763
> 
> 标签：php

我是 PHP 的新手，我对 GET 方法感到困惑。

为什么`$text`循环条件中的 in 与 Windows 7 中的 Appserv 一起使用，但是当我在 Mac 上使用 Xampps 尝试此代码时，我必须使用它`for($i=0; $i<strlen($_GET['text']); $i++)`来代替。

起初，我明白在我使用`isset($_GET['text'])`so 之后我只使用 only `$text`，但现在我很困惑。

```
<? $color = array("#FFCCFF", "#FFCCCC", "#FFCC99", "#FF99FF", "#FF99CC",
    "#FF9999", "#FF66FF", "#FF66CC", "#FF6699", "#FF6666");
if (isset($_GET['text'])) { 
    for($i=0; $i<strlen($text); $i++) { 
        $j = $i%10 ?>
        <font color=<?= $color[$j]?>><? echo "$text[$i]"; ?></font>
    } 
} else {
    echo "Empty String";
} ?> 
```

很多人的帮助**解决**了这个问题。

```
<?php $color = array("#FFCCFF", "#FFCCCC", "#FFCC99", "#FF99FF", "#FF99CC",
    "#FF9999", "#FF66FF", "#FF66CC", "#FF6699", "#FF6666"); 
if( isset($_GET['text'])) {
    $text = $_GET['text'];
    for( $i=0; $i<strlen($text); $i++) {
        $j = $i%10;
        echo "<font color=$color[$j]>$text[$i]</font>";
    }
} else
    echo "Empty string";
?> 
```

顺便说一句，我尝试使用 HTML + PHP 只是因为我想在深入使用 CSS 之前练习 HTML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:53:54.477

好吧，你为什么要在每一行都进出 PHP？一次允许有超过一行的 PHP，你知道的！

`$_GET['text']`是一个变量。访问它并没有什么特别之处，但它的特别之处在于无论范围如何都可以访问它（它是超全局的）。`$text`仅在启用自动注册全局设置时才引用 is ，由于各种原因不建议这样做。

因此，您的代码应如下所示：

```
<?php
$color = array(".....");
if( isset($_GET['text'])) {
    $l = strlen($_GET['text']);
    for( $i=0; $i<$l; $i++) {
        $j = $i%10;
        echo "<span style=\"color: ".$color[$j].";\">".$text[$i]."</span>";
    }
}
else echo "Empty string";
?> 
```

我还冒昧地在上个千年更新了您的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:55:06.580

您应该首先初始化 $text 变量，如下所示：

$text = $_GET['text'];

这应该没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T13:57:48.467

我仍然不确定你在做什么，但是：

```
$colours = array("#FFCCFF", "#FFCCCC", "#FFCC99", "#FF99FF", "#FF99CC", "#FF9999", "#FF66FF", "#FF66CC", "#FF6699", "#FF6666");

if (isset($_GET['text'])) {
    $text = $_GET['text'];
    for ($i = 0; $i < strlen($text); $i++) {
        $j = $i%10;
        echo "<span style='color: {$colours[$j]}'>{$text[$i]}</span>";
    }
}
else {
    echo 'No text';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T14:11:22.627

您的问题的实际答案，如果`$text`作为别名工作，`$_GET['text']`可能是您的 Windows 服务器配置为`register_globals`设置为`on`，这意味着在您的查询字符串中传递的任何内容都将转换为适当的变量。

IE。`?awesome=true`==`$awesome = 'true'`

这是不好的。`register_globals`在违规方禁用，并用于`$_GET['text']`访问您的数据。

您的代码看起来会更好一点，如下所示：

```
<?php
$color = array("#FFCCFF", "#FFCCCC", "#FFCC99", "#FF99FF", "#FF99CC",
                "#FF9999", "#FF66FF", "#FF66CC", "#FF6699", "#FF6666");
if (isset($_GET['text'])) {
    $text = $_GET['text'];
    for($i=0; $i < strlen($text); $i++) { 
        $j = $i % 10; ?>
        <span style="color: <?= $color[$j] ?>"><?= htmlentities($text[$i]); ?></span>
    <?php } 
} else {
    echo "Empty String";
}
?> 
```

请注意，我已经整理了您的代码并使其更加理智/安全。`htmlentities`用于阻止可能来自此的 XSS 漏洞，尽管由于拆分字符串而不太可能。尽管它们是完全相同的东西，但出于某种原因，`<?php echo .. ?>`您混淆了。`<?= .. ?>`另外，不要使用`<font>`.

你这样说：

> 起初，我明白“在我使用了 isset($_GET['text']) 之后，我下次只使用 ($text)，但现在我很困惑。

如果你知道你在混合它们，你为什么要这样做？如果您正在检查是否`$_GET['text']`已设置，那么您也可以将其用于访问是合乎逻辑的。

# objective-c - 如何处理openGL中几个圆圈的淡出？

> ID：11484314
> 
> 赞同：1
> 
> 时间：2012-07-14T13:49:12.530
> 
> 标签：objective-c, ios

我需要在一个框架上画小圆圈，让它们在几帧后消失（淡出）。如何使用 OpenGL ES 实现这一点？

这是我到目前为止所拥有的，在框架中绘制圆圈的代码：

```
 [EAGLContext setCurrentContext:context];
    glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);
    glViewport(0, 0, backingWidth, backingHeight);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrthof(-1.0f, 1.0f, -1.5f, 1.5f, -1.0f, 1.0f);
    glMatrixMode(GL_MODELVIEW);

    glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT);

    GLfloat vertices[720];

    for (int i = 0; i < 720; i += 2) {
        vertices[i]   = (cos(DEGREES_TO_RADIANS(i)) * 1);
        vertices[i+1] = (sin(DEGREES_TO_RADIANS(i)) * 1);
    }

    glVertexPointer(2, GL_FLOAT, 0, vertices);
    glEnableClientState(GL_VERTEX_ARRAY);

    glColor4f(1.0f, 1.0f, 0.0f, 1.0f);

    glDrawArrays(GL_TRIANGLE_FAN, 0, 360);

    glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
    [context presentRenderbuffer:GL_RENDERBUFFER_OES]; 
```

我不明白的是如何跟踪同一个圆圈并在连续的帧中淡化它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:24:47.220

您将需要在每一帧上重新渲染所有对象（圆圈）。因此，您需要保留一个包含有关圆的信息的数据结构（可能它们的中心、半径和不透明度就足够了）。像这样的东西：

```
typedef struct Circle {
    NSPoint center;
    float radius;
    float opacity;
} Circle;

Circle allCircles [ kMaxNumCircles ]; 
```

然后，当你去绘制它们时，你遍历圆数组，更新它们的不透明度，然后绘制它们：

```
for (int i = 0; i < kMaxNumCircles; i++)
{
    allCircles [ i ].opacity -= someDelta;
    drawCircle (allCircles [ i ]);
} 
```

该`drawCircle()`函数可能就是您在上面编写的：

```
void drawCircle(Circle c)
{
    GLfloat vertices[720];

    for (int i = 0; i < 720; i += 2) {
        vertices[i]   = (cos(DEGREES_TO_RADIANS(i)) * 1) + c.center.x;
        vertices[i+1] = (sin(DEGREES_TO_RADIANS(i)) * 1) + c.center.y;
    }

    glVertexPointer(2, GL_FLOAT, 0, vertices);
    glEnableClientState(GL_VERTEX_ARRAY);

    glColor4f(1.0f, 1.0f, 0.0f, c.opacity);

    glDrawArrays(GL_TRIANGLE_FAN, 0, 360);

} 
```

# actionscript-3 - Flash AS3：TweenMax 在放大主影片剪辑并添加新元素后停止工作

> ID：11484320
> 
> 赞同：0
> 
> 时间：2012-07-14T13:49:59.983
> 
> 标签：actionscript-3, flash, movieclip, tween, gsap

我有一个严重的问题，因为从创建问题到发现问题之间有 6 个月的间隔。早在年初，我就被要求在仅 Flash 的网站中添加一些图形并更改一些文本。该站点非常复杂，我当然没有/我没有达到从头开始创建此类代码的水平，但我确实有一些使用 Flash 的经验，并且似乎能够添加图形并更新一些内部文本。在添加图形的过程中，我不得不放大包含所有元素的 main_mc，包括新的元素。当时我不知道，但现在发现，更改 main_mc 符号的属性似乎禁用了在单独的 Main.ac 文件中创建的复杂补间操作。我没有碰主要。

这是我认为与此相关的类文件中的代码：

```
 public function showSamples(event:Event = null):void 
    {
        // create new timeline to allow us to move the desk elements back into place
        showSamplesTimeline = new TimelineMax({onReverseComplete: resetSamples});

        // create array of all desk elements
        var deskElements:Array = /* of TweenMax */ [
            TweenMax.to(main_mc.memorandum_mc, 1, {x: main_mc.memorandum_mc.x - 1700}),
            TweenMax.to(main_mc.phone_mc, 1, {x: main_mc.phone_mc.x - 1700}),
            TweenMax.to(main_mc.todo_mc, 1, {x: main_mc.todo_mc.x - 1900}),
            TweenMax.to(main_mc.menuMask_mc, 1, {x: main_mc.menuMask_mc.x - 1700}),
            TweenMax.to(main_mc.menu_mc, 1, {x: main_mc.menu_mc.x - 1700}),
            TweenMax.to(main_mc.flags_mc, 1, {x: main_mc.flags_mc.x - 1700}),
            TweenMax.to(main_mc.clocks_mc, 1, {x: main_mc.clocks_mc.x - 1700}),
            TweenMax.to(main_mc.device_mc, 1, {x: main_mc.device_mc.x - 1700}),
            TweenMax.to(main_mc.content_mc, 1, {x: main_mc.content_mc.x - 1700}),
            TweenMax.to(main_mc.coffeeContainer_mc, 1, {x: main_mc.coffeeContainer_mc.x - 1700})
        ];

        main_mc.printer_mc.translate_btn.mouseEnabled = false;

        /*
        var memorandumTween:TweenMax = ;
        var memorandum_mc,
        var phone_mc,
        var todo_mc,
        var menuMask_mc,
        var menu_mc,
        var flags_mc,
        var clocks_mc,
        main_mc.device_mc,
        main_mc.content_mc,
        main_mc.coffeeContainer_mc
        */

        // tween all desk elements out out of the state somewhere...
        showSamplesTimeline.insertMultiple(deskElements);
        //showSamplesTimeline.insertMultiple(TweenMax.allTo(deskElements, 1, {x:-400}));
        // bring in the printer element for printn' out samples... arrgh!
        showSamplesTimeline.insert(TweenMax.fromTo(main_mc.printer_mc, 0.5, {x: 2000, y: -140},{x: 800, y: -140.0, delay: 0.25}));
        showSamplesTimeline.append(TweenMax.to(main_mc.printer_mc, 0.5, {y: -340.0, delay: 0.25, onComplete: showGermanSample}));
    }

    /**
    *
    */
    public function showGermanSample():void
    {
        // create short reference to the loader content
        var container =  main_mc.printer_mc.paper_mc.getChildAt(0).contentLoaderInfo.content;
        // move the scroller out of view
        container.scroller.x = 2000;
        // hide the english translation
        container.germanContentDropShadow_mc.visible = false;
        container.englishContentDropShadow_mc.visible = false;
        container.content_mc.englishContent_mc.visible = false;
        // tween the paper into view and when complete put the scroller next to the german sample
        TweenMax.to(main_mc.printer_mc.paper_mc, 1, {
                    y: 443, 
                    onComplete: function():void
                    { 
                        container.scroller.x = 599;
                        container.germanContentDropShadow_mc.visible = true;
                        main_mc.printer_mc.translate_btn.mouseEnabled = true; 
                    }
        });
    }

    /**
    *
    */
    public function showEnglishSample(event:Event = null):void
    {
        // create short reference to the loader content
        var container = main_mc.printer_mc.paper_mc.getChildAt(0).contentLoaderInfo.content;
        // move the scroller out of view
        container.scroller.x = 2000;
        // move the paper to make room for the english content
        TweenMax.to(main_mc.printer_mc.paper_mc, 0.5, {x: -454});
        // show the english sample
        container.content_mc.englishContent_mc.visible = true;
        // tween the english sample into view and when complete put the scoller next to the english sample
        TweenMax.from(container.content_mc.englishContent_mc, 1, {
                        y: -1000,
                        delay: 0.5, 
                        onComplete: function():void
                        {
                            container.scroller.x = 1210;
                            container.englishContentDropShadow_mc.visible = true;
                            main_mc.printer_mc.translate_btn.mouseEnabled = false; 

                        }
        });
        // tween the paper
        TweenMax.to(main_mc.printer_mc.paper_mc, 0.5, {x: -142, delay: 1.5});
    }

    /**
    *
    */
    public function hideSamples(event:Event = null):void
    {
        // back to the future
        showSamplesTimeline.reverse();
    }

    /**
    *
    */
    public function resetSamples(event:Event = null):void {
        // unload sampleContentLoader
        sampleContentLoader.unload();
        // reset position
        main_mc.printer_mc.paper_mc.x = 164;
        main_mc.printer_mc.paper_mc.y = -600;
        trace(main_mc.printer_mc.x);
        trace(main_mc.printer_mc.y);
        // remove loader content
        main_mc.printer_mc.paper_mc.removeChildAt(0);
        // kill tweens
        showSamplesTimeline.kill();
    } 
```

冒着给我自己和我的客户带来一些公众尴尬的风险，但因为我真的可以使用帮助，这里是现场网站：（删除）

导航到（英文）服务 -> 示例。您可以单击按钮，例如 Legal，它将深入到示例主题。在旧的工作版本中，您将单击最后一个主题，例如诉讼，屏幕将动画到舞台右侧，您将看到一个看起来像是从打印机出来的英文文档的图像。然后用户可以点击翻译按钮，然后会出现第二张德语图像。单击“再次选择”将使您从舞台左转回到主屏幕。当然，这是行不通的。

我已经在开发位置放置了一个工作版本：（已删除）

我可能会在一天左右的时间内删除开发副本。

我真的很感谢一些帮助解决这个问题。

[编辑] 我可能应该补充一点，旧的 main_mc 是 2359x1692，而新的 main_mc 是 2967.65x1939.35。舞台上的位置是相同的：-800 x 0。不完全确定新尺寸是如何达到 6 个月前的，但需要放大以适应额外的图形元素。客户需要原始开发人员提供的大面积区域才能在宽屏显示器上看起来不错。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T01:53:16.243

见上面的评论。经验教训：当您更改现有作品时，请确保所有符号都保持不变，等等，如果它们在其他地方被引用。基础知识。但至少它是可以轻松修复的。

# html - OAuth 对话框在 Facebook iframe 中不起作用

> ID：11484321
> 
> 赞同：2
> 
> 时间：2012-07-14T13:50:07.803
> 
> 标签：html, facebook, iframe, oauth

该页面的问题是[https://apps.facebook.com/gentlemensbet/](https://apps.facebook.com/gentlemensbet/) “开始投注”按钮不会为任何人加载 oauth 屏幕。

但是，如果您在新窗口中打开它，它似乎工作得很好。对于这种行为，我找不到任何合理的解释，也不知道如何纠正。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-14T14:03:50.823

添加`target="_blank"`或`target="_top"`到您的锚标记。您正在尝试在 facebook 页面内的 iframe 中加载 facebook URL。这是不允许的。

> 拒绝显示文档，因为 X-Frame-Options 禁止显示。

是控制台中记录的错误。这是针对[点击劫持](https://javascript.info/clickjacking)的预防措施。

您的链接应该是：

```
<a class="btn btn-large btn-primary" href="https://www.facebook.com/dialog/oauth?..." target="_blank"></a> 
```

# java - 如果语句破解，有没有更好的方法来写这个？

> ID：11484322
> 
> 赞同：2
> 
> 时间：2012-07-14T13:50:12.337
> 
> 标签：java, if-statement

我正在尝试编写一个简单的横向卷轴游戏。如果玩家在某个方向上移动得太远，我有这个代码可以让屏幕重新居中。

有没有更好的写法？我觉得我在滥用语言，但效果很好，我认为它可能没问题。

```
public void adjustFrameIfNecessary()
{
    int dx, dy;
    if ((dx = (GAME_WIDTH - GAME_WIDTH / 3) - player.x) < 0 || (dx = GAME_WIDTH / 3 - player.x) > 0 || (dx = 0) == 0);
    if ((dy = (GAME_HEIGHT - GAME_HEIGHT / 3) - player.y) < 0 || (dy = GAME_HEIGHT / 3 - player.y) > 0 || (dy = 0) == 0);

    if(dx != 0 || dy != 0)
    {
        for (Drawable shiftMe : drawables)
        {
            shiftMe.unconditionalShift(dx, dy);
        }
    }

} 
```

**编辑**

关于大家的意见，为了使其更具可读性，我已将其更改为

```
public void adjustFrameIfNecessary()
{
    int dx, dy;

    assignX:
    {
        dx = (GAME_WIDTH - GAME_WIDTH / 3) - player.x;
        if(dx < 0) break assignX;
        dx = GAME_WIDTH / 3 - player.x;
        if(dx > 0) break assignX;
        dx = 0;
    }

    assignY:
    {
        dy = (GAME_HEIGHT - GAME_HEIGHT / 3) - player.y;
        if(dy < 0) break assignY;
        dy = GAME_HEIGHT / 3 - player.y;
        if(dy > 0) break assignY;
        dy = 0;
    }

    if (dx != 0 || dy != 0)
    {
        for (Drawable shiftMe : drawables)
        {
            shiftMe.unconditionalShift(dx, dy);
        }
    }

} 
```

这是否更好？

**编辑 2**

```
public void adjustFrameIfNecessary()
{
    int dx = calculateShift(GAME_WIDTH, frameReference.x);
    int dy = calculateShift(GAME_HEIGHT, frameReference.y);

    if (dx != 0 || dy != 0)
    {
        for (Drawable shiftMe : drawables)
        {
            shiftMe.unconditionalShift(dx, dy);
        }
    }
} 
```

我认为现在很清楚。谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T13:58:00.247

我不确定我是否完全理解为什么您`if`在顶部有这些陈述。您应该在初始化变量时简单地分配变量。

```
dx = (GAME_WIDTH - GAME_WIDTH / 3) - player.x)
dy = (GAME_HEIGHT - GAME_HEIGHT / 3) - player.y) 
```

`if`无论在您的声明中，他们都将被分配到那个位置。如果它重新满足第三个条件，那么它已经*为零*，所以没有理由分配它。丢弃这两个`if`语句，而是坚持直接变量赋值。将条件保持在`for`循环之上，这是您需要进行的唯一检查。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T13:58:19.493

您的 if 语句令人困惑。如果您（或其他任何人）需要在以后更改它，这可能非常困难且容易出错。

编写不仅有效而且可维护的代码是一个好习惯。既然你让它工作了，你应该让它更易于维护。

将 if 语句分解为有意义的变量并使用多行。你不是在为高尔夫代码竞赛写作吗？

以后你会感谢自己的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T14:00:13.617

这个怎么样？

```
/* calculate offset to center */
dx = X_current_center - player.x;
dy = Y_current_center - player.y;

if (abs(dx) > MARGIN || abs(dy) > MARGIN)
    /* recenter */ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T14:24:38.567

不可读，但我明白你的意思。不过有一件事：为什么不对 x 和 y 重复使用相同的检查呢？通过使用三元运算符，您可以减少一次黑客攻击。

```
static int toBounds(int max, int curr) {
  int ret;
  return ((ret = (max - max/3) - curr) < 0 || (ret = max/3 - curr) > 0)? ret : 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-14T16:24:39.407

改进此类代码的想法通常是使用数学:)

首先，对不起，很长的帖子。如果你亲自见到我，不要问我这个话题，我不会停止说话。

## 简洁版本

做这个：

```
/**
 * Computes the distance from a point x to an interval [a,b]
 */
public static int distanceToInterval( int x, int a, int b ){
   return x<a? (a-x): ( x>b? (b-x):0 ); 
   // alternative: 
   // return Math.max( a - x, 0 ) + Math.min( b - x, 0 ); 
}

// then use as 
int dx = distanceToInterval( player.x, GAME_WIDTH/3, GAME_WIDTH*2/3 ); 
int dy = distanceToInterval( player.y, GAME_HEIGHT/3, GAME_HEIGHT*2/3 ); 
```

## 长版

**你的初始陈述**

```
if ((dx = (GAME_WIDTH - GAME_WIDTH / 3) - player.x) < 0 || 
    (dx = GAME_WIDTH / 3 - player.x) > 0 || 
    (dx = 0) == 0); 
```

这可以通过将其变成...来清理一下

**...更长的版本**

```
dx1 = GAME_WIDTH*2/3 - player.x; 
dx2 = GAME_WIDTH*1/3 - player.x; 
dx3 = 0; 

if( dx1 < 0 ) dx = dx1; 
else if( dx2 > 0 ) dx = dx2; 
else dx = dx3; 
```

这更清楚了。我现在可以看到您要做什么，并用简洁的句子表达： *如果玩家不在屏幕的中心三分之一内，我们想移动屏幕*

**让它更清楚**

```
if( player.x < GAME_WIDTH/3 ) dx = GAME_WIDTH/3 - player.x;  // positive num
else if( player.x > GAME_WIDTH*2/3 ) dx = GAME_WIDTH*2/3 - player.x; // negative num
else dx = 0; // no shift 
```

你可以看到我重新排列了你的陈述，我先检查左边界，然后检查右边界。如果你来到一个从右到左阅读的国家，你可能会发现另一个方向更直观:)

*这*是我会选择的解决方案。它很短，可读，很完美:)

但是，如果你想让它更简洁，你可以更进一步

**做数学技巧**

您需要了解这三种情况是完全排他的，它们不可能同时发生。让我们回到使用更多变量：

```
// on the left side we shift a positive number, or not at all 
dx1 = Math.max( GAME_WIDTH/3 - player.x, 0 ); 
// on the right side we shift a negative amount, or not at all 
dx2 = Math.min( GAME_WIDTH*2/3 - player.x, 0 ); 
```

现在看看它的美：

*   如果`GAME_WIDTH/3-player.x > 0`,`GAME_WIDTH*2/3 - player.x > 0` 那么`Math.min(...,0) = 0`
*   如果`GAME_WIDTH*2/3 - player.x < 0`,`GAME_WIDTH*1/3 - player.x < 0` 那么`Math.max(...,0) = 0`

这意味着您可以简单地将两者相加来计算总班次。这就是您的代码的样子：

```
int dx = 
     Math.max( GAME_WIDTH/3 - player.x, 0 ) + // too far to the left? 
     Math.min( GAME_WIDTH*2/3 - player.x, 0 ); // or too far to the right? 
```

**再抽象一点**

无论您选择什么变体，现在都非常容易将其放入方法中。但让我们让它比这个特殊情况更有意义。我会建议

```
/**
 * Computes the distance from a point x to an interval [a,b]
 */
public static int distanceToInterval( int x, int a, int b ){
   return 
       Math.max( a - x, 0 ) + // too far to the left? 
       Math.min( b - x, 0 ); // or too far to the right? 
}

// now use as 
int dx = distanceToInterval( player.x, GAME_WIDTH/3, GAME_WIDTH*2/3 ); 
int dy = distanceToInterval( player.y, GAME_HEIGHT/3, GAME_HEIGHT*2/3 ); 
```

* * *

*ps请注意，我已经在这篇文章中替换`GAME_WIDTH - GAME_WIDTH/3`了。`GAME_WIDTH*2/3`这两个给出的整数数学结果略有不同，但我更喜欢简短的版本，因为我发现它更直观（“三分之二的屏幕”与“整个屏幕，然后三分之一”）。*

# javascript - 使用表单向下拉菜单添加值

> ID：11484325
> 
> 赞同：-4
> 
> 时间：2012-07-14T13:50:22.510
> 
> 标签：javascript, html

有没有办法用简单的形式在下拉菜单中插入值？我有这个下拉菜单

```
<form>
  <select name="users" onchange="showUser(this.value)">
    <option value="">Select a category:</option>
    <option value="movie">Movie</option>
    <option value="musik">Musik</option>
    <option value="books">Books</option>
    <option value="images">Images</option>
  </select>
</form> 
```

我应该使用数组吗？我一直在网上搜索，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T13:55:31.717

这是一个将项目添加到下拉列表的 JavaScript 解决方案。

要使用的 HTML..

```
 <form>
    <select id="categories" name="users" onchange="showUser(this.value)">
    <option value="">Select a category:</option>
    <option value="movie">Movie</option>
    <option value="musik">Musik</option>
    <option value="books">Books</option>
    <option value="images">Images</option>
    </select>
    </form>​​ 
```

JavaScript 代码...

```
var categories = document.getElementById("categories");

var newOption = document.createElement('option');
newOption.innerText = "New value";
newOption.setAttribute('value', 'newvalue');

categories.appendChild(newOption);
​ 
```

jQuery 代码...（短得多）

```
$("#categories").append("<option value='newvalue'>New Value</option>"); 
```

这是可以使用的 JavaScript [JSFiddle](http://jsfiddle.net/v8hUU/)和 jQuery [JSFiddle](http://jsfiddle.net/v8hUU/2/)！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T13:53:41.790

您可以查看 jQuery`append()`并`option()`使用`click`事件...

我刚刚为您创建了一个可行的解决方案。不知道这是否是您正在寻找的，但这就是它的工作原理：
您只需将值和可视选项名称写入表单文本字段：`value, text`它会为您提供：
`<option value="value">text</option>`

```
<select id="mySelect"></select>
<p>&nbsp;</p>
<input type="text" id="string"><br>
<button id="append">Append</button>

$('#append').click(function(){
    var str = $('#string').val();
    var substr = str.split(', ');
    $('#mySelect').append( new Option(substr[0],substr[1]));
}); 
```

这是一个工作版本：http: [//jsfiddle.net/SCf8m/1/](http://jsfiddle.net/SCf8m/1/)

# c# - 删除不可打印字符 C# 多语言

> ID：11484329
> 
> 赞同：9
> 
> 时间：2012-07-14T13:50:53.140
> 
> 标签：c#

我在 asp.net C# 中有一个多语言应用程序。在这里，我必须创建一个 zip 文件并使用数据库中的一些项目来构造文件名。我从文件名中去掉了特殊字符。但是，如果语言是德语，例如我的修剪算法将删除一些德语字符，如元音变音。

有人可以为我提供一种语言适应性修剪算法。

这是我的代码：

```
private string RemoveSpecialCharacters(string str)
{
    return str;
    StringBuilder sb = new StringBuilder();
    foreach (char c in str)
    {
        if ((c >= '0' && c <= '9') || (c >= 'A' && c <= 'Z') || (c >= 'a' && c <= 'z') | c == '.' || c == '_' || c == ' ' || c == '+')
        {
            sb.Append(c);
        }
    }
    return sb.ToString();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T13:57:11.667

```
string s = "abcöü*/";
var newstr = new String( s.Where(Char.IsLetterOrDigit).ToArray() ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T20:45:39.987

假设您指的是 ZIP 文件的名称，而不是 ZIP 文件中的名称，您可能想要检查该字符是否对文件名有效，这将允许您使用的不仅仅是字母或数字：

```
char[] invalid = System.IO.Path.GetInvalidFileNameChars();

string s = "abcöü*/";
var newstr = new String(s.Where(c => !invalid.Contains(c)).ToArray()); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-14T20:56:35.483

一个更通用的变体可以减少字符串的损坏：

```
public static string RemoveDiacritics(this string s)
{
    // split accented characters into surrogate pairs
    IEnumerable<char> chars = s.Normalize(NormalizationForm.FormD);
    // remove all non-ASCII characters – i.e. the accents
    return new string(chars.Where(c => c < 0x7f && !char.IsControl(c)).ToArray());
} 
```

这应该会删除大多数有问题的字符，同时仍保留大部分文本。（如果您正在创建文件名，您可能还想用空格字符替换换行符和制表符。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T14:01:17.323

单行，假设不可打印的 ASCII 基本上都是空格前的字符：

```
var safeString = new string(str.Select(c=>c<' '?'_':c).ToArray()); 
```

# c# - 从字典键名中删除空格

> ID：11484330
> 
> 赞同：1
> 
> 时间：2012-07-14T13:50:56.830
> 
> 标签：c#, dictionary

我有一个`Dictionary`存储在其中的键值对。我的问题是，在我的字典中，键名的开头有一个空格，因此用于访问该值：

```
 Pair[" Key"]; 
```

有没有什么方法可以删除起始空格，所以我可以访问像这样的值

```
 Pair["Key"] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T13:53:15.997

如果您有，则可以使用( [MSDN](http://msdn.microsoft.com/en-us/library/t97s7bs3.aspx)`string` )删除前导和尾随空格。`key.Trim()`

如果要修剪字典中的所有键，可以这样做：

```
dictionary = dictionary.ToDictionary(x => x.Key.Trim(), x => x.Value); 
```

但是，如果您有 2 个将修剪为相同值的键，则这有失败的余地。例如，有一个带有键“key”和“key”的字典是有效的，但是如果你将它们全部修剪，你会得到一个，`ArgumentException`因为你会尝试两次添加相同的键（“key”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T14:06:23.877

修剪你的字符串就足够了。除此之外，您还可以为您的字典编写一个自定义键比较器，而不是每次向字典添加或从字典中获取内容时修剪字符串。

```
Dictionary<string, int> dict = new Dictionary<string, int>(new Comparer());
dict.Add("aa ", 10);
int i = dict[" aa"];

public class Comparer : IEqualityComparer<string>
{
    public bool Equals(string x, string y)
    {
        return x.Trim().Equals(y.Trim());
    }

    public int GetHashCode(string obj)
    {
        return obj.Trim().GetHashCode();
    }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T13:52:42.100

使用[string.Trim](http://msdn.microsoft.com/en-us/library/t97s7bs3.aspx)方法：

```
var key = " Key".Trim();
Pair[key]; 
```

# php - 如何将此 ImageMagick 命令翻译成它的 PHP Imagick 等效命令？

> ID：11484332
> 
> 赞同：4
> 
> 时间：2012-07-14T13:51:48.490
> 
> 标签：php, imagemagick, imagick

我正在尝试遵循ImageMagick 文档中的[这个](http://www.imagemagick.org/Usage/distorts/#cube3d)“教程”，但是遇到了很多麻烦。我想在其 Imagick PHP equivelant 中完成以下 ImageMagic 命令：

```
convert -virtual-pixel transparent \
                        \( $top -matte  +distort Affine \
                            '0.5,511.5 0.5,0.5   0.5,0.5 -87.5,-50  511.5,511.5 87.5,-50' \) \
                        \( $left -matte +distort Affine \
                            '511.5,0.5 0.5,0.5   0.5,0.5 -87.5,-50  511.5,511.5 0.5,99.5' \) \
                        \( $front -matte  +distort Affine \
                            '0.5,0.5 0.5,0.5   0.5,319.5 0.5,99.5   319.5,0.5 87.5,-50.0' \) \
                        -background black -layers merge +repage \
                        -bordercolor black -border 5x2     isometric_cube_overlap.png 
```

其中`$top = new Imagick('top.png');` ,`$front = new Imagick('front.png');` 和`$left = new Imagick('left.png');`. 每个都是 512x512px png 图像。

我发现一些关于仿射变换的[文档相当缺乏](http://www.php.net/manual/en/imagick.affinetransformimage.php)，但我不知道`$matrix`应该是什么，甚至不知道如何使用该函数。我什至尝试`exec`在实际的 ImageMagick 命令上运行，但什么也没发生。我期待转换已经完成并保存为`isometric_cube_overlap.png`.

我真的可以在这里使用一些帮助，即使有人可以指出我正确的方向。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:28:50.410

当然，您可以像这样运行命令吗？

```
<?php 
    $cmd = " convert -virtual-pixel transparent \
                    \( $top -matte  +distort Affine \
                        '0.5,511.5 0.5,0.5   0.5,0.5 -87.5,-50  511.5,511.5 87.5,-50' \) \
                    \( $left -matte +distort Affine \
                        '511.5,0.5 0.5,0.5   0.5,0.5 -87.5,-50  511.5,511.5 0.5,99.5' \) \
                    \( $front -matte  +distort Affine \
                        '0.5,0.5 0.5,0.5   0.5,319.5 0.5,99.5   319.5,0.5 87.5,-50.0' \) \
                    -background black -layers merge +repage \
                    -bordercolor black -border 5x2     isometric_cube_overlap.png "." -distort ScaleRotateTranslate \"28,24  .4,.8  -110  50,120 \" ";
    exec("$cmd");
?> 
```

此外，反斜杠对我来说也不合适。我敢打赌该命令的输出也失败了？

# ios - 如何在呈现第二个警报视图之前添加延迟

> ID：11484339
> 
> 赞同：1
> 
> 时间：2012-07-14T13:52:40.730
> 
> 标签：ios, uialertview

我一个接一个地显示两个警报视图，如下所示：

-IBAction

```
UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"my message"     delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alert setDelegate:self];

[alert show];

}

- (void)didPresentAlertView:(UIAlertView *)alertView 
{

[alertView setTitle:@"My new title"];
[alertView setMessage:@"My new message"];

} 
```

从第一个警报视图到第二个警报视图的转换是如此之快，以至于用户没有时间阅读第一个消息。有人可以建议如何在警报之间添加延迟。我想我需要实现一个 NSTimer 但实现它是我可以使用一些建议的地方。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-14T13:54:37.860

我建议使用`dispatch_after`，可以内联：

```
double delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
     // code to be executed on the main queue after delay 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T11:25:42.787

试试这个简单的方法：

```
- (void)alertView
{
    UIAlertView * alertView = [[UIAlertView alloc] initWithTitle:@"Get Ready!" message:nil     delegate:nil cancelButtonTitle:nil otherButtonTitles:nil];
    [alertView show];
    [self performSelector:@selector(dismissStartAlert:) withObject:alertView afterDelay:5];
}

-(void)dismissStartAlert:(UIAlertView *)alertView
{
    [alertView dismissWithClickedButtonIndex:0 animated:YES];
    [alertView setTitle:@"My new title"];
    [alertView setMessage:@"My new message"];
    [alert show];
} 
```

# android - 如何防止从根活动重新开始而不是恢复后台状态

> ID：11484348
> 
> 赞同：0
> 
> 时间：2012-07-14T13:54:27.083
> 
> 标签：android, android-activity

我有启动应用程序 b (a-->b) 的应用程序 a，用户可以直接启动应用程序 b (b) 或启动启动 b (a-->b) 的 a。我只想当用户启动应用程序 a ，并且用户已经直接启动了应用程序 b 时，它将把应用程序 b 的活动带到前面。

直言不讳，如果 y 进入应用程序的点是不同的，如果应用程序已经在运行而不是根应用程序，我如何获得当前活动。如果您可以发布代码或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:35:00.310

当您启动活动 b 时，使用意图标志 FLAG_ACTIVITY_REORDER_TO_FRONT 启动它

# linq - MongoDB - 使用 Linq 对子文档的条件

> ID：11484352
> 
> 赞同：0
> 
> 时间：2012-07-14T13:54:44.077
> 
> 标签：linq, mongodb, conditional-statements, documents

我正在使用 mongo-csharp-driver 来查询我的 Mongo 实体。我有以下存储在 Mongo 中的对象：

```
public class Table
{
    public int Id { get; private set; }
    public string Description{ get; private set; }       
    public List<Player> Players { get; private set; }

    public Table()
    {
    }
 }

public class Player
{
    public int Id { get; private set; }

    public string Username{ get; private set; }        
    public Player()
    {
    }
 } 
```

当我尝试通过 id 或描述查询“表”对象时，我得到了适当的结果，但是当我尝试通过播放器列表查询时，我得到 null：

```
// Works ok
var tab1 = mongo.GetCollection<Table>().Where(g => g.Description == "Test");
// Always return null, although should return the same result
var tab2 = mongo.GetCollection<Table>().Where(g => g.Players.Count > 90).FirstOrDefault(); 
```

我在这里想念什么？谢谢，尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T19:36:54.700

问题是[Count 属性](http://www.mongodb.org/display/DOCS/CSharp+Driver+LINQ+Tutorial#CSharpDriverLINQTutorial-Countproperty%28arraylength%29)被翻译成[$size 查询操作符](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24size)。

从链接的高级查询页面中，您可以看到：

> “您不能使用 $size 查找大小范围（例如：具有超过 1 个元素的数组）。”

# java - gson 抛出 MalformedJsonException

> ID：11484353
> 
> 赞同：81
> 
> 时间：2012-07-14T13:54:50.397
> 
> 标签：java, json, gson

我正在使用**gson**将**json**字符串转换为 Java-Object。**result2**的值与**result1**的值完全相同。（从调试器复制；添加了反斜杠）

转换 result1 时引发以下异常： *com.google.gson.JsonSyntaxException: com.google.gson.stream.MalformedJsonException: Expected EOF at line 1 column 170*

转换**result2**工作正常。

根据 jsonlint.com，json 字符串是有效的。

```
public static Userinfo getUserinfo()
{
    String result1 = http.POST("https://www.bitstamp.net/api/balance/",
                                postdata, true);
    String result2 = "{\"btc_reserved\": \"0\", \"fee\": \"0.5000\", \"btc_available\": \"0.10000000\", \"usd_reserved\": \"0\", \"btc_balance\": \"0.10000000\", \"usd_balance\": \"30.00\", \"usd_available\": \"30.00\"}";
    Gson gson = new Gson();
    Userinfo userinfo1 = gson.fromJson(result1, Userinfo.class); //throws Exception
    Userinfo userinfo2 = gson.fromJson(result2, Userinfo.class); //works fine

    return userinfo1;
}
private class Userinfo {

    public Userinfo(){
    }

    public float usd_balance;
    public float btc_balance ;
    public float usd_reserved;
    public float btc_reserved;
    public float usd_available;
    public float btc_available;
    public float fee;
    public float last_update;
} 
```

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-07-15T00:11:00.730

我怀疑 result1 末尾有一些字符，您在调试器中看不到结束字符之后的`}`字符。`result1`vs的长度是`result2`多少？我会注意到，`result2`正如您所引用的，它有 169 个字符。

当对象末尾有非空格的额外字符时，GSON 会抛出该特定错误，并且它*非常*狭窄地定义了空格（正如 JSON 规范所做的那样） - 只有`\t`、`\n`、`\r`和空格算作空格。**特别要注意尾随的 NUL ( `\0`) 字符不算作空格，会导致此错误**。

如果您无法轻松找出导致最后多余字符的原因并消除它们，另一种选择是告诉 GSON 以宽松模式解析：

```
Gson gson = new Gson();
JsonReader reader = new JsonReader(new StringReader(result1));
reader.setLenient(true);
Userinfo userinfo1 = gson.fromJson(reader, Userinfo.class); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-09-17T11:04:38.720

根据我最近的经验，[`JsonReader#setLenient`](https://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/stream/JsonReader.html#setLenient-boolean-)基本上使解析器非常宽容，甚至允许格式错误的 JSON 数据。

但对于从您受信任的 RESTful API 检索到的某些数据，此错误可能是由尾随空格引起的。在这种情况下，只需`trim`数据即可避免错误：

```
String trimmed = result1.trim(); 
```

然后`gson.fromJson(trimmed, T)`可能会工作。当然，这仅涵盖一种特殊情况，因此 YMMV。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-14T14:01:23.437

在调试器中，您不需要添加反斜杠，输入字段可以理解特殊字符。

在 java 代码中，您需要转义特殊字符

# java - PaintComponent 未被调用

> ID：11484359
> 
> 赞同：3
> 
> 时间：2012-07-14T13:55:38.750
> 
> 标签：java, swing, jframe, jpanel

我刚刚开始学习如何编程，如果我的问题很愚蠢，请原谅。我已经尝试了两天多来找到解决此问题的方法，但我无法通过网络找到它，所以我需要您的帮助。提前致谢。

所以，我正在尝试用 Java 重新创建 Parchisi 游戏。我想创建一种方法，每次玩家掷骰子并获得数字 5 时，将计数器放在特定位置。计数器有自己的类，即：

```
package parchis;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Image;
import javax.swing.ImageIcon;
import javax.swing.JPanel;

public class Ficha extends JPanel
{
   public static int x;
   public static int y;
   public Image imagenficha;

  @Override
  public void paintComponent(Graphics g){

  super.paintComponent(g);

  System.out.println("Ejecutándose función de pintura de ficha");
  g.drawImage(imagenficha,x,y,this);
  g.setColor(Color.RED);
  g.fillRect(0,0,20,20);
}

 Ficha(int color, int locx, int locy, int ancho, int alto){

    this.setSize(60,60);
    System.out.println("El color es el "+Servidor.turno); 
    this.setBounds(locx,locy,ancho,alto); 
    x=locx;
    y=locy;
    this.setVisible(true);
} 
```

通过调用此方法将检查器放在 jframe 上：

```
public void pintarficha(){

    Ficha ficha = new Ficha(Servidor.turno,40,40,100,100);
    jframe.getContentPane().add(ficha);
    Refrescar();
} 
```

参考：

```
public static void Refrescar(){

   jpanel.add(jlabel);
   jframe.add(jpanel);
  jframe.pack();
} 
```

问题是，当从方法外部调用 pintarficha() 方法时（IE 在我的一个类的实例化中）它可以正常工作并绘制计数器，但是当我将它放在任何方法内部时，PaintComponent 不是执行，我不明白为什么。

它在这里工作：

```
package parchis;
public class Administradordereglas {

      Administradordereglas(){
        ********** Menu.menu.pintarficha(); ****************
      }

     void juegodebots(int jugador){

         System.out.println("LLAMADA A JUEGO DE BOTS");
         int valoraañadiralasposiciones;
         valoraañadiralasposiciones= Ventanadeordenes.dado.Tiraeldado();  

         if(valoraañadiralasposiciones==5){

            System.out.println("Se ha sacado un 5, procedo a crear una nueva ficha");
         }

         Parchis.servidor.Pasarturno();
     }
} 
```

但在这里它没有：

```
package parchis;
public class Administradordereglas {

      Administradordereglas(){

      }
     void juegodebots(int jugador) {

         System.out.println("LLAMADA A JUEGO DE BOTS");
         int valoraañadiralasposiciones;
         valoraañadiralasposiciones= Ventanadeordenes.dado.Tiraeldado();  
         if(valoraañadiralasposiciones==5){
             **************This message appears in the console:****************** 
             System.out.println("Se ha sacado un 5, procedo a crear una nueva ficha");

            *****************Menu.menu.pintarficha();*************************
         }
         Parchis.servidor.Pasarturno();
    }
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:57:41.840

您可以将 repaint() 添加到您的 Refrescar 方法中吗：

```
public void refrescar() {

    jpanel.add(jlabel);
    jframe.add(jpanel);
    jframe.pack();
    jframe.repaint();
} 
```

# c# - 访问 PanoramaHeader 模板内的列表选择器

> ID：11484366
> 
> 赞同：0
> 
> 时间：2012-07-14T13:56:29.033
> 
> 标签：c#, windows-phone-7, silverlight-toolkit, panorama-control, listpicker

我有一个全景控件，我在其中创建了一个标题模板以在其中添加一个列表选择器。（就像人民中心选择社交账户一样）

```
<DataTemplate x:Key="PanoramaItemHeaderTemplate">
     <ContentPresenter>
          <StackPanel Height="129">
               <TextBlock Text="{Binding}" FontSize="72" Margin="0,7,0,0" />
               <toolkit:ListPicker x:Name="listPick" Margin="0,-21,0,0" BorderThickness="0">
                     <toolkit:ListPickerItem Content="twitter"></toolkit:ListPickerItem>
               </toolkit:ListPicker>                    
          </StackPanel>
     </ContentPresenter>
</DataTemplate> 
```

全景控件位于 MainPage.xaml 文件中，我希望从后面的代码中访问 listpicker 以便能够填充它并处理它的选择事件。

我不知道该怎么做。我尝试将 x:name 属性添加到列表选择器中，但我无法在后面的 MainPage 代码中访问它。

任何关于如何解决这个问题的想法都非常受欢迎，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:27:33.753

从你现在所拥有的，做你想做的最快的方法是遍历可视化树

见这里的实现：

[如何使用 DataTemplate 访问列表框中的特定项目？](https://stackoverflow.com/questions/5181063/how-to-access-a-specific-item-in-a-listbox-with-datatemplate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:52:48.400

您不能通过 x:Name 访问 ListPicker，因为它不是明确的：为您的全景图中的每个 PanoramaItem 生成一个 ListPicker。所以第一个问题是，这真的是你想做的吗？如果是这样，您需要使用绑定 (ItemSource) 填充它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T17:35:07.697

您可以访问另一个资源中的元素，请考虑以下示例：

```
<Grid Name="myGrid">
<StackPanel x:Name="stack1">
<TextBlock x:Name="abc"/>
</StackPanel>
</Grid> 
```

默认情况下，我们只能`Grid`在代码中访问 myGrid。要获得参考，`StackPanel`我们可以这样做：

```
StackPanel myStack=myGrid.FindName("stack1") as Stackpanel; 
```

之后我们可以参考`TextBlock`：

```
TextBlock myTextBlock=myStack.FindName("abc") as TextBlock; 
```

之后，您可以根据需要修改 myTextBlock。您可以在您的案例中应用相同的技术，它会起作用。希望有帮助:)。

# python - 如何在不使用成熟的 ORM 的情况下构建 SQL 查询？

> ID：11484369
> 
> 赞同：0
> 
> 时间：2012-07-14T13:56:38.553
> 
> 标签：python, sql, google-app-engine

我正在编写一个在 Google App Engine 上运行的 Python 应用程序，并将数据写入 Google Fusion Table。[Fusion Tables API](https://developers.google.com/fusiontables/)使用类似SQL 的查询来插入行。

我目前正在构建这样的 SQL 查询：

```
fusion_table_id = "gobblygook"
name = "John Doe"
rank = "Captain"
serial_number = 42
SQL = "INSERT INTO %s (name, rank, serial_number) VALUES (%s, %s, %s)" % (fusion_table_id, name, rank, serial_number) 
```

显然，这并不理想。除了潜在的攻击之外，我还遇到了各种引用转义问题。

如果不使用成熟的 ORM（我不需要实际连接到数据库），构建此类 SQL 查询的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:15:23.327

我认为格式字符串提供了一种处理 SQL 查询的好方法：

```
 params = {
        'fusion_table_id': 'gobblybook',
        'name': 'John Doe',
        'rank': 'Captain',
        'serial_number': 42,
        }

    SQL = "INSERT INTO {fusion_table_id} (name, rank, serial_number) VALUES ({name}, {rank}, {serial_number})".format(**params) 
```

更多信息请参见[PEP-3101](http://www.python.org/dev/peps/pep-3101/)

# asp.net - 处理 ASP.Net 中的空数据绑定下拉列表

> ID：11484387
> 
> 赞同：0
> 
> 时间：2012-07-14T14:00:53.773
> 
> 标签：asp.net

我有一个包含以下表单字段的 asp.net 页面：

1.  下拉列表 1\. 此下拉列表通过 SQL 数据源接收数据。
2.  下拉列表 2。基于下拉列表 1 的选择，此下拉列表使用 SQL 数据源查询数据库并被填充。
3.  位于下拉列表 2 下方的面板控件，它具有一组控件。

我的问题是可能存在以下情况：下拉列表 2 的数据源没有返回任何内容，我想在下拉列表 2 中显示“未找到数据”项，同时隐藏位于下拉列表 2 下方的面板。

有人可以让我知道如何处理这种情况。

感谢帮助。

谢谢，亚加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:17:47.543

将以下代码添加到您的 dropdownlist1 选择的索引更改事件。

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    // Run this code when your sql datasource 2 does not return record, you can also place an IfElse condition
    DataTable dt = new DataTable();
    dt.Columns.Add("ID");
    dt.Columns.Add("Value");
    DataRow row = dt.NewRow();
    row[0] = "-1";
    row[1] = "Data Not Found";
    dt.Rows.Add(row);
    DropDownList2.DataSource = dt;
    DropDownList2.DataTextField = "Value";
    DropDownList2.DataValueField = "ID";
    DropDownList2.DataBind();

} 
```

**更新的答案：（**试试这个）你也可以把它放在你的 sqldatasource2 选择事件中。

```
protected void SqlDataSource2_Selecting(object sender, SqlDataSourceSelectingEventArgs e)
{
    if (e.Arguments.TotalRowCount == 0)
    {
        DataTable dt = new DataTable();
        dt.Columns.Add("ID");
        dt.Columns.Add("Value");
        DataRow row = dt.NewRow();
        row[0] = "-1";
        row[1] = "Data Not Found";
        dt.Rows.Add(row);
        DropDownList2.DataSource = dt;
        DropDownList2.DataTextField = "Value";
        DropDownList2.DataValueField = "ID";
        DropDownList2.DataBind();
    }
} 
```

上面的代码将在您的下拉列表中添加一个具有 Text = "Data Not Found" 的项目

# animation - 视频文件（带alpha）作为启动画面？

> ID：11484388
> 
> 赞同：2
> 
> 时间：2012-07-14T14:01:17.443
> 
> 标签：animation, video, inno-setup, splash-screen

我现在正在寻找 Inno Setup 的扩展以使用视频文件，例如 AVI 或 .png 序列作为我安装的启动屏幕（使用 alpha 通道将是一个巨大的加上但不是必须的）。有几个 .dll 可以使用带有淡入和淡出的静态图片，但我找不到任何可以用作视频文件的东西。

据我所知，我可以在 Inno Setup 中使用任何类型的 .dll。例如，我可以使用流行的 bass.dll 进行音频播放，即使它没有“真正的”Inno 支持，但 Inno 可以调用该 .dll 的函数。

那么是否有任何程序可以让我这样做？朝那个方向的任何提示都会非常有帮助。

编辑：这可能使用 Qt，我知道您可以为您的应用程序制作基于框架的启动画面，但我不确定是否可以将 Qt 与 Inno Setup 一起使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T20:28:24.437

我已经创建了[`Inno Media Player`](http://code.google.com/p/inno-media-player/)能够将视频和音频播放嵌入到 InnoSetup 向导中的项目。它基于[`DirectShow`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390351%28v=vs.85%29.aspx)技术，至少需要 DirectX 9 才能使用。

除了[`built-in formats`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd407173%28v=vs.85%29.aspx)它支持所有 DirectShow 编解码器，但您应该考虑到您的目标用户不需要为某些特殊媒体格式安装编解码器并安装它们的编解码器只是因为在安装启动时显示对用户来说是过度杀伤和不公平的。

关于您想要的透明度，如果您找到支持它的编解码器，我们可以尝试使弹出窗口透明并让 DirectShow 渲染器在分层窗口上绘制，但没有编解码器和示例视频我做不到没有。

*   您可以在源主干中找到带有示例脚本的库或下载它[`from here`](https://code.google.com/p/inno-media-player/downloads/list)
*   我写了一个简单的[`function reference`](https://code.google.com/p/inno-media-player/wiki/Reference)，你可以在其中找到函数参数说明

因此，要在显示向导表单之前显示带有视频播放的弹出窗口，您可以使用以下命令：

***请注意，Inno Media Player 是一个 Unicode 库，因此您只能将其与 InnoSetup 的 Unicode 版本一起使用，而不能与 ANSI 版本一起使用！不支持 ANSI 版本的 InnoSetup...！***

```
[Setup]
AppName=Media Player Project
AppVersion=1.0
DefaultDirName={pf}\Media Player Project

[Files]
Source: "MediaPlayer.dll"; Flags: dontcopy

[Code]
const
  EC_COMPLETE = $01;

type
  TDirectShowEventProc = procedure(EventCode, Param1, Param2: Integer);

function DSPlayMediaFile: Boolean;
  external 'DSPlayMediaFile@files:mediaplayer.dll stdcall';
function DSStopMediaPlay: Boolean;
  external 'DSStopMediaPlay@files:mediaplayer.dll stdcall';
function DSInitializeVideoFile(FileName: WideString; WindowHandle: HWND;
  var Width, Height: Integer; CallbackProc: TDirectShowEventProc): Boolean;
  external 'DSInitializeVideoFile@files:mediaplayer.dll stdcall';

var
  VideoForm: TSetupForm;  

procedure OnMediaPlayerEvent(EventCode, Param1, Param2: Integer); 
begin
  if EventCode = EC_COMPLETE then
    VideoForm.Close;  
end;

procedure OnVideoFormShow(Sender: TObject);
begin
  DSPlayMediaFile;
end;

procedure OnVideoFormClose(Sender: TObject; var Action: TCloseAction);
begin
  DSStopMediaPlay;
end;

procedure InitializeWizard;
var
  Width: Integer;
  Height: Integer;
begin
  VideoForm := CreateCustomForm;
  VideoForm.Caption := 'Popup Video Window';
  VideoForm.BorderStyle := bsNone;
  VideoForm.FormStyle := fsStayOnTop;
  VideoForm.Position := poScreenCenter;
  VideoForm.OnShow := @OnVideoFormShow;
  VideoForm.OnClose := @OnVideoFormClose; 

  if DSInitializeVideoFile('d:\Video.avi', VideoForm.Handle, Width, 
    Height, @OnMediaPlayerEvent)
  then
  begin
    VideoForm.ClientWidth := Width;
    VideoForm.ClientHeight := Height;     
    VideoForm.ShowModal;
  end;    
end;

procedure DeinitializeSetup;
begin
  DSStopMediaPlay;
end; 
```

希望对您有所帮助！

# c# - 在文本文件中从一个符号搜索到另一个符号

> ID：11484392
> 
> 赞同：-4
> 
> 时间：2012-07-14T14:02:06.273
> 
> 标签：c#, regex, forms, search, text

我正在编码程序，并堆叠。请给我一个代码，它使用 C# 可视 Windows 窗体而不是控制台应用程序从一个特定符号到另一个搜索文件中的文本。喜欢文本文件 c:\id.txt 中的这个文本

> 该条目已成功复制到 {ea4c4653-cc65-11e1-a2fc-001e101f4e71}。

从 { 到 } 搜索字符串，结果为 { 和 }，不带 . 在末尾。并在消息框中发送找到的文本。在文件中搜索文本的代码在消息框中发送整行。但我需要部分线路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:08:45.007

[`Regex`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)可能有用：

```
MessageBox.Show(
          Regex.Match(inputString, "\{(?<path>[^}]*)\}").Groups["path"].Value); 
```

解释：

```
{        '{'

[^}]*    any character except: '}' 
         (0 or more times, matching the most amount possible)

}        '}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:09:51.393

尝试使用[`regular expressions`](http://msdn.microsoft.com/library/system.text.regularexpressions.regex.aspx)：

```
var line = "    The entry was successfully copied to {ea4c4653-cc65-11e1-a2fc-001e101f4e71}.";
var foo = Regex.Match(line, @"to\s*\{([^}]+)\}");
if(foo.Success) {
    MessageBox.Show(foo.Groups[1].Value); //ea4c4653-cc65-11e1-a2fc-001e101f4e71
} else {
   //not found value 
} 
```

# error-handling - 带有迭代器的赤壁方案错误

> ID：11484393
> 
> 赞同：1
> 
> 时间：2012-07-14T14:02:12.293
> 
> 标签：error-handling, scheme, chibi-scheme

任何人都知道为什么 chibi-scheme 在尝试使用 chibi-loop`up-from`函数时会抛出以下错误：

```
ERROR: car: not a pair: #<opcode cons>
ERROR in set-dk! on line 590 of file /usr/local/share/chibi/init-7.scm: cdr: not a pair: () 
```

我通过以下方式使用语法：

```
(import (chibi loop))

>(up-from 0 (to 20) (by 2)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:33:43.847

你不能`up-from`像那样使用独立的。它只适用于`loop`表单内部：

```
> (loop ((for x (up-from 0 (to 20) (by 2))))
    (display x)
    (newline))
0
2
4
6
8
10
12
14
16
18 
```

# c++ - C++ 向量下标超出范围

> ID：11484395
> 
> 赞同：0
> 
> 时间：2012-07-14T14:02:31.557
> 
> 标签：c++, stdvector

从我读过的内容来看，这个错误通常发生在迭代器超出范围时，但我在一个空向量上遇到了这个问题。

这是保存向量的 Player 类：

播放器.h：

```
#pragma once
#include "Item.h"
#include "Room.h"
#include <vector>
#include <memory>
#include <string>

using namespace std;

class Player
{
private:
    int health;
    string name;
    shared_ptr<Room> currentRoom;
    vector<shared_ptr<Item> > inventory;

public:
    Player(void);
    Player(string);
    ~Player(void);
    void changeHealth(int);
    void setRoom(shared_ptr<Room>);
    shared_ptr<Room> getRoom();
    unsigned int getInventorySize();
}; 
```

播放器.cpp：

```
#include "Player.h"
#include <iostream>
#include <memory>
#include <string>

Player::Player(void)
{
    health = 20;
}

Player::Player(string newName)
{
    name = newName;
}

Player::~Player(void)
{
}

void Player::changeHealth(int amount){
    health += amount;
}

void Player::setRoom(shared_ptr<Room> newRoom){
    currentRoom = newRoom;
}

shared_ptr<Room> Player::getRoom(){
    return currentRoom;
}

unsigned int Player::getInventorySize(){
    return inventory.size();
} 
```

我注释掉了 Player 中影响库存的所有其他方法。主要是，我制作了一个玩家对象，但我没有对库存做任何事情，所以它应该是完全空的，getInventorySize 应该返回 0，对吗？但是当我这样做时：

```
cout<<player->getInventorySize(); 
```

程序因向量下标超出范围错误而崩溃。这是怎么回事？=\

完整的主要：

```
#include "World.h"
#include "Player.h"
#include "Room.h"
#include "Item.h"
#include "Option.h"
#include "RoomOption.h"

#include <iostream>
#include <memory>
#include <string>
#include <stdlib.h>

typedef shared_ptr<Option> optionPtr;
typedef shared_ptr<Item> itemPtr;
typedef shared_ptr<Room> roomPtr;

const int healthPackID =0;
World world;

void createWorld(void);

void main(){

    createWorld();
    shared_ptr<Player> player = world.getPlayer();

    int selection = 0, inventoryOption = 0, exitOption = 0;

    do{
        inventoryOption = player->getRoom()->getNumOptions() + 1;
        exitOption = inventoryOption + 1;

        cout<<player->getRoom()->getDescription()<<endl;
        player->getRoom()->printOptions();
        cout<< inventoryOption <<". View Inventory"<<endl;
        cout<< exitOption <<". Quit game"<<endl<<endl;

        cin>>selection;

        string optionType = typeid(*(player->getRoom()->getOption(selection-    1).get())).name();

        if(selection == inventoryOption){
            cout<<player->getInventorySize();
        }
        else if( optionType.compare("class RoomOption") == 0){
            player->setRoom(player->getRoom()->getOption(selection-    1)->getRoom());
            cout<< "RoomOption!"<<endl;
        }
        else{
            cout<< "Not RoomOption =("<<endl;
        }

        system("CLS");

    }while(selection != exitOption);

}

void createWorld(){

    shared_ptr<Player> player(new Player("Ted"));
    world.setPlayer(player);

    roomPtr outside(new Room(0, "You're outside", ""));
    roomPtr hallway(new Room(1, "It's a hallway", ""));
    roomPtr kitchen(new Room(2, "It's the kitchen", ""));
    roomPtr livingRoom(new Room(3, "You're in the living room", ""));
    roomPtr upstairs(new Room(4, "You're on the upstairs landing but all the doors are     barred shut", ""));

    outside->addOption(optionPtr(new RoomOption(0, "Go inside", hallway)));

    hallway->addOption(optionPtr(new RoomOption(0, "Go straight ahead into the     kitchen", kitchen)));
    hallway->addOption(optionPtr(new RoomOption(1, "Go right into the living     room", livingRoom)));
    hallway->addOption(optionPtr(new RoomOption(2, "Go upstairs", upstairs)));
    hallway->addOption(optionPtr(new RoomOption(3, "Go back outside", outside)));

    hallway->addItem(itemPtr(new Item(healthPackID, "Health Pack", "A pack full of     first aid items like bandages and surgical spirits. Use it to increase your health", 3)));

    kitchen->addOption(optionPtr(new RoomOption(0, "Go right into the living     room", livingRoom)));
    kitchen->addOption(optionPtr(new RoomOption(1, "Go back into the hallway",     hallway)));

    kitchen->addItem(itemPtr(new Item(1, "Cake", "A piece of tasty cake", 1)));
    kitchen->addItem(itemPtr(new Item(2, "Beer", "A cold bottle of generic brand     beer", 1)));

    livingRoom->addOption(optionPtr(new RoomOption(0, "Go left into the kitchen",     kitchen)));
    livingRoom->addOption(optionPtr(new RoomOption(1, "Go back into the     hallway",hallway)));

    upstairs->addOption(optionPtr(new RoomOption(0, "Go back downstairs", hallway)));

    world.addRoom(outside);
    world.addRoom(kitchen);
    world.addRoom(livingRoom);
    world.addRoom(hallway);
    world.addRoom(upstairs);

    player->setRoom(outside);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:19:02.597

```
getOption(selection - 1) 
```

由于您要添加两个额外的选项，因此这两个选项不包含在房间的选项向量中，从而导致索引超出范围错误。您应该在调用之前检查选择是否有效`getOption`。

您应该首先检查`selection == inventoryOption`，如果不是（也不是退出选项），​​然后计算`optionType`。更好的是，在计算 之前`optionType`，请确保这`selection`是一个有效数字，否则如果用户输入无效数字，您将遇到同样的问题。

# java - 如何使java列表协变

> ID：11484400
> 
> 赞同：1
> 
> 时间：2012-07-14T14:03:18.827
> 
> 标签：java, list, subclass, superclass, invariants

我有以下课程

```
public class Animal

public class Dog extends Animal

public class Cat extends Animal 
```

对于测试，我有一个驱动程序类。

```
public class Driver {
    public static void main(String[] args){
        List<? extends Animal> animalList = Arrays.<Dog>asList(new Dog(), new Dog(), new Dog());
        animalList.add(new Dog()) // Compilation error 
    }               
} 
```

默认情况下，列表是不变类型的容器。例如，假设我们有`List<Object> objectList`，`ArrayList<String> stringList`我们不能将 stringList 替换为 objList。这将导致编译错误

我的尝试是像在 Driver 类中一样使列表协变。

根据`<? extends Animal>`我们可以应用任何属于 Animal 子类型的对象，包括 Animal 类型。

但是我在指示的行中遇到了编译问题。有人可以从理论上解释我哪里出错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T14:07:09.907

我认为您误解了通用通配符 ( `?`)。来自[有关该主题的 Java 教程](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)：

> 像往常一样，使用通配符的灵活性需要付出一定的代价。这个代价是现在在方法体中写入形状是非法的。例如，这是不允许的：
> 
> ```
> public void addRectangle(List<? extends Shape> shapes) {
>     // Compile-time error!
>     shapes.add(0, new Rectangle());
> } 
> ```
> 
> 您应该能够弄清楚为什么不允许上面的代码。第二个参数的类型`shapes.add()`是`? extends Shape`- 的未知子类型`Shape`。由于我们不知道它是什么类型，所以我们不知道它是否是`Rectangle`;的超类型。它可能是也可能不是这样的超类型，因此将 a 传递到那里是不安全的`Rectangle`。

Java 泛型集合不是协变的；参见例如[*Java 理论和实践：泛型陷阱*](http://www.ibm.com/developerworks/java/library/j-jtp01255/index.html)以获得解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T14:07:26.983

java没有非常强大的类型系统，这意味着：你不能这样做。

悲伤的答案，但真实。来自维基百科：

> 与数组不同，泛型类既不是协变的也不是逆变的。例如，既不是`List<String>`也不`List<Object>`是另一个的子类型

[http://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)#Java](http://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)#Java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T14:19:12.083

像这样更改您的代码：

```
public class Driver {
    public static void main(String[] args){
        List<? extends Animal> animalList = Arrays.<Cat>asList(new Cat(), new Cat(), new Cat());
        animalList.add(new Dog()) // Compilation error 
    }               
} 
```

编译错误更有意义吗？Java 所要做的只是你给它的类型`animalList`。Java 知道右边的东西可能是一个`Cat`对象列表，所以它不会让你把`Dog`. 将您的代码更改为

```
List<Animal> animalList = Arrays.<Animal>asList(new Dog(), new Dog(), new Dog()); 
```

这会正常工作。

# asp.net-mvc-3 - 不正确的表单身份验证超时

> ID：11484405
> 
> 赞同：2
> 
> 时间：2012-07-14T14:03:59.863
> 
> 标签：asp.net-mvc-3, authentication, forms-authentication

我想在一个网站上制作“记住时间”大约一周。在默认的 mvc 3 应用程序中，我设置了以下更改：

```
<forms loginUrl="~/Account/LogOn" timeout="10880" slidingExpiration="true" /> 
```

但是，这还不够。半小时后网站忘了我。有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:28:24.973

您是否为表单身份验证票设置了属性超时，并且`isPersistent`参数应设置为`true`.

```
FormsAuthenticationTicket tkt = new FormsAuthenticationTicket
(
   1,                 // version
   username,          // user name
   DateTime.Now,      // issue date
   expiration,        // this should also be set to 10880
   rememberMeChecked, // this should be true
   null,              // additional data
   "/"                // cookie path
); 
```

有关更多信息，请参见[此处](https://stackoverflow.com/questions/4851155/remember-me-functionality-in-asp-net-form-authentication-doesnt-work)。

# magento - Magento 用我的模块中的一个覆盖管理模板 phtml

> ID：11484406
> 
> 赞同：2
> 
> 时间：2012-07-14T14:04:15.407
> 
> 标签：magento, php

我已经习惯了覆盖 magento 的前端布局文件，所以我认为在管理面板中覆盖 phtml 模板会很容易——但在过去的六个小时里我一无所获。到目前为止，我发现的所有教程都集中在创建控制器上，但我只需要覆盖两个 phtml 文件，因为我只想稍微更改订购项目的显示。

具体来说，我想覆盖 default/template/sales/order/view/items.phtml，通常我会在我自己的模块的设计文件夹中匹配该路径并称之为一天。

我可以通过我的 config.xml 覆盖 Mage/Adminhtml/Sales/Order/View/Items.php 中的块 php 文件：

```
<config>
...
   <global>
   ...
     <blocks>
     ...
        <adminhtml>
            <rewrite>
                <sales_order_view_items>MyCompany_MyModule_Block_Adminhtml_Sales_Order_View_Items</sales_order_view_items>
            </rewrite>
        </adminhtml>
      </blocks>
    ...
    </global>
 ...
 </config> 
```

如何告诉 Magento 在 design/adminhtml//default/sales/order/view/items.phtml 中使用我的 phtml 文件？

我的 config.xml 中的这些行不应该工作吗？

```
<config>
...
<adminhtml>
    <layout>
        <updates>
            <my_module>
                <file>order_list.xml</file>
            </my_module>
        </updates>
    </layout>
</adminhtml>
...
</config> 
```

非常感谢任何帮助！我真的希望我只是忽略了一些东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:32:06.140

您可以做的是将您的自定义模块放在 Mage_Adminhtml 之前

```
<admin>
    <routers>
        <adminhtml>
            <args>
                <modules>
                    <My_Module before="Mage_Adminhtml">My_Module_Adminhtml</My_Module>
                </modules>
            </args>
        </adminhtml>
    </routers>
</admin> 
```

然后复制到你的 order_list.xml

```
<adminhtml_sales_order_view> 
    .... 
</adminhtml_sales_order_view> 
```

来自 /app/design/adminhtml/default/default/layout/sales.xml

在 order_list.xml 中，您现在可以替换块类型和模板文件 (phtml) 位置

# php - 将数组中的所有对象转换为数组

> ID：11484407
> 
> 赞同：1
> 
> 时间：2012-07-14T14:04:25.257
> 
> 标签：php, api

我有一些值可以获取 API 并将它们存储到数组`$data`中以插入到我的表中。但是，我似乎在 array 中有对象`$data`，这看起来有点乱。是否可以将数组的所有内容转换`$data`为数组元素？

**PHP 代码**

```
$data['title'] = $item->ItemAttributes->Title;
$data['brand'] = $item->ItemAttributes->Brand;
$data['color'] = $item->ItemAttributes->Color;
echo "<pre>";
print_r($data); 
```

**输出**

```
stdClass Object
(
    [title] => stdClass Object
        (
            [0] => La Martina Polo Shirt Scotland Polo, Color: Black, Size: L
        )

    [brand] => stdClass Object
        (
            [0] => La Martina
        )

    [color] => stdClass Object
        (
            [0] => Black
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:07:13.163

```
$array = get_object_vars($object); 
```

如果成员是受保护的或私有的，请从类内部进行。

如果您不打算定义特定的类，请使用[反射](http://www.php.net/manual/en/reflection.examples.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T14:07:47.273

```
array get_object_vars ( object $object ) 
```

更多信息：http: [//php.net/manual/en/function.get-object-vars.php](http://php.net/manual/en/function.get-object-vars.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T14:11:50.820

我没有正确理解你，但如果你做这样的事情

```
$data['title'] =(string)$item->ItemAttributes->Title;
$data['brand'] =(string)$item->ItemAttributes->Brand;
$data['color'] = (string)$item->ItemAttributes->Color; 
```

..可能会导致您如下所示：-

```
{'title'=>'some title','brand'=>,'color'=>'something'} 
```

但我不确定这是否是你想要的

# java - apache karaf dev:watch 命令不起作用

> ID：11484409
> 
> 赞同：1
> 
> 时间：2012-07-14T14:04:39.220
> 
> 标签：java, osgi, bundle, watch

据我所知，apache karaf 的 dev:watch 命令应该有助于开发 osgi 包，这样我就不必在每次更改包的源代码时手动更新包。

我试过这个，一个简单的包，它只包含一个 Activator 类。我正在使用 Maven 进行开发。

```
import org.osgi.framework.BundleActivator;
import org.osgi.framework.BundleContext;

public class Activator implements BundleActivator {

public void start(BundleContext context) {
    System.out.println("Starting the bundle");
}

public void stop(BundleContext context) {
    System.out.println("Stopping the bundle");
}
} 
```

我使用 karaf 命令安装了包：

```
osgi:install mvn:my.groupId/my.artifactId 
```

然后我开始使用`osgi:start <id of my bundle>`

然后我开始监控这个捆绑包`using dev:watch --start <id of my bundle>`

> Karaf 告诉我它监控我的捆绑包。

然后我想测试如果我对源代码进行更改并重建我的包，包是否会自动更新。所以我更改了`System.out.println()'s`激活器类并使用`mvn clean install`.

捆绑包现在不应该自行更新吗？当我查看 karaf 控制台时，我看不到任何更改，直到我使用 osgi:update 手动更新捆绑包（我想避免使用 dev:watch）...

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T10:24:45.617

几个小时后，我找到了错误的根源。即使捆绑包已经是 SNAPSHOT 版本，使用安装捆绑包也是不够的，`osgi:install mvn:<groupID>/<artifactID>`您还必须`<version>`在捆绑包 URL 中使用 : `osgi:install mvn:<groupID>/<artifactID>/<version>`，其中`<version>`对应于 pom.xml 中指定的版本标记。它必须是像“1.0-SNAPSHOT”这样的快照版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T18:33:27.343

maven 版本是 SNAPSHOT 吗？dev:watch 仅适用于快照，因为固定版本预计不会更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-19T11:15:08.273

我遇到了同样的问题。几个小时后，我发现了另一个错误来源。

我在 Windows 上工作，并且`<localRepository>D:\m2repo</localRepository>`在我的 settings.xml 中

Maven 对此表示同意，但 BundleWatcher 不同意。更改为`D:/m2repo`（注意：unix 风格的正斜杠）后工作。

# sql-server - 在插入和更新其他表中的行时维护 SQL Server 联结表中的行

> ID：11484415
> 
> 赞同：1
> 
> 时间：2012-07-14T14:05:32.897
> 
> 标签：sql-server, stored-procedures, maintenance, junction-table

当对 Authors 和 BookTitles 表进行更改（例如在这些表中插入和更新行）时，您能否展示创建触发器或存储过程以维护 SQL Server 联结表的行的示例编码？

我们有以下表格：

```
Authors:
ID
NAME
ZIP
AND SOME MORE COLUMNS

BookTitles:
ID
TITLE
ISBN
AND SOME MORE COLUMNS

This is the table we will use as our junction table:

AuthorTitles:
ID
AUTHOR_ID
BOOK_TITLE_ID 
```

我们希望在触发器中执行此操作，而不是在我们的 VB.Net 表单中进行编码。

所有帮助将不胜感激。

上面的表格结构被简化以显示我们正在尝试做的事情。

我们正在为教师和项目实施一个连接表。

这是实际系统的照片：

![](../Images/c3ad488b99207f0d91308eec3856aacc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:25:23.720

除非您的外键约束要求每个作者至少有一本书和/或反之亦然，否则您应该需要特殊处理的唯一情况是删除书名或作者。他们可以这样做：

```
CREATE PROC BookTitle_Delete(@Book_ID As INT) As
 -- First remove any children in the junction table
 DELETE FROM AuthorTitles WHERE BOOK_TITLE_ID = @Book_ID

 -- Now, remove the parent record on BookTitles
 DELETE FROM BookTitles WHERE ID = @Book_ID

go 
```

通常，您要抵制在触发器中进行表维护和其他类似操作的诱惑。由于触发器是不可见的，因此会增加额外的开销，可能会导致 DBA 出现维护问题，并可能导致许多微妙的事务/锁定复杂性和性能问题。触发器应该保留用于真正应该对客户端应用程序隐藏的简单事情（如审计），并且不能以其他方式实际实现。这不是其中一种情况。

如果你真的想要一种“不可见”的方式来做到这一点，那么只需实现一个级联外键。我也不推荐这样做，但它仍然比触发器更可取。

# javascript - socket.io - 向特定用户广播

> ID：11484418
> 
> 赞同：6
> 
> 时间：2012-07-14T14:06:58.060
> 
> 标签：javascript, node.js, websocket, socket.io

我需要使用 websockets (socket.io + node.js) 建立两个聊天。因此，向所有用户广播消息的简单示例：

```
socket.on('user message', function (msg) {
    socket.broadcast.emit('user message', socket.nickname, msg);
  }); 
```

但是我怎样才能从某个用户向某个用户广播呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-14T14:21:56.570

有两种可能：

**1)**每个套接字都有自己唯一的 ID 存储在`socket.id`. 如果您知道两个用户的 ID，那么您可以简单地使用

```
io.sockets[id].emit(...) 
```

**2）**定义您自己的ID（例如用户名）并使用

```
socket.join('priv/John'); 
```

在`connection`处理程序中。现在，只要您只想发送消息到`John`，您只需执行

```
socket.broadcast.to('priv/John').emit(...) 
```

**旁注：**提供的第一个解决方案不能扩展到多台机器，所以我建议使用第二个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-31T14:42:30.870

您可以使用该`socket.join(...)`功能提供组：

```
socket.on('init', function(user) {
  if (user.type == 'dog') {
    socket.join('dogs');
  }
  else {
    socket.join('cats');
  }
});

...

io.to('dogs').emit('food', 'bone'); // Only dogs will receive it
io.to('cats').emit('food', 'milk'); // Only cats will receive it 
```

# android - 强制折叠 ActionBar 中的选项卡

> ID：11484426
> 
> 赞同：5
> 
> 时间：2012-07-14T14:08:36.167
> 
> 标签：android, android-tabhost, android-actionbar, actionbarsherlock, android-tabs

我正在使用该`ActionBarSherlock`库开发一个 Android 应用程序。在一项活动中，我将选项卡式导航与折叠`ActionBar`（底部的操作项）结合使用。

在这张图片中，您可以看到`Activity`其**当前状态**：标签被推入第二行。

![当前操作栏](../Images/58e49bb6b6088b9a3dbaa5d1c14fd8a1.png)

* * *

在下图中，您可以看到`Activity`我想要的方式：选项卡应该在第一行，而不是在第二行。我已经阅读了`ActionBar`和`ActionBarSherlock`文档，但找不到强制这种行为的方法。

![想要的 ActionBar 布局](../Images/b908fb9949a2fc2ed483f1e13b32e3c6.png)

这是当前代码，用于创建`ActionBar`.

```
public class AdminActivity extends SherlockFragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_admin);

    ActionBar actionBar = getSupportActionBar();
    actionBar.setDisplayHomeAsUpEnabled(true);
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    ActionBar.Tab itemsTab = actionBar.newTab().setText(R.string.label_tab_items);
    ActionBar.Tab usersTab = actionBar.newTab().setText(R.string.label_tab_users);

    actionBar.addTab(itemsTab);
    actionBar.addTab(usersTab);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T13:36:05.787

有一个反射'hack'来做到这一点。我不相信解决方案，我在这个 StackOverflow 问题中发现了[用 custom view 复制 ActionBar Tab(s)](https://stackoverflow.com/questions/12392541/replicate-actionbar-tabs-with-custom-view)。

```
//pre-ICS
if (actionBarSherlock instanceof ActionBarImpl) {
    enableEmbeddedTabs(actionBarSherlock);

//ICS and forward
} else if (actionBarSherlock instanceof ActionBarWrapper) {
    try {
        Field actionBarField = actionBarSherlock.getClass().getDeclaredField("mActionBar");
        actionBarField.setAccessible(true);
        enableEmbeddedTabs(actionBarField.get(actionBarSherlock));
    } catch (Exception e) {
        Log.e(TAG, "Error enabling embedded tabs", e);
    }
} 

//helper method
private void enableEmbeddedTabs(Object actionBar) {
    try {
        Method setHasEmbeddedTabsMethod = actionBar.getClass().getDeclaredMethod("setHasEmbeddedTabs", boolean.class);
        setHasEmbeddedTabsMethod.setAccessible(true);
        setHasEmbeddedTabsMethod.invoke(actionBar, true);
    } catch (Exception e) {
        Log.e(TAG, "Error marking actionbar embedded", e);
    }
} 
```

另请参阅此博客文章：[http ://sparetimedev.blogspot.co.uk/2012/11/forcing-embedded-tabs-in-actionbar.html](http://sparetimedev.blogspot.co.uk/2012/11/forcing-embedded-tabs-in-actionbar.html)

# android - 用于打开移动数据的意图？

> ID：11484436
> 
> 赞同：6
> 
> 时间：2012-07-14T14:10:43.773
> 
> 标签：android, android-intent

可以`android.settings.WIRELESS_SETTINGS`用来打开无线和蓝牙，但是我应该用什么来打开移动互联网？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-12-15T06:47:28.417

Lollipop 在以编程方式启用移动数据方面存在限制。

使用此代码意图使用移动数据，您可以在其中打开/关闭移动数据：

```
 Intent intent = new Intent();
    intent.setComponent(new ComponentName("com.android.settings", "com.android.settings.Settings$DataUsageSummaryActivity"));
    startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-07T05:29:44.120

使用此方法（关闭 wifi（如果在 wifi 上））并打开移动数据连接

```
 public boolean isConnected() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
        boolean NisConnected = activeNetwork != null && activeNetwork.isConnected();
        if (NisConnected) {
            //  if (activeNetwork.getType() == ConnectivityManager.TYPE_MOBILE || activeNetwork.getType() == ConnectivityManager.TYPE_WIFI)
            if (activeNetwork.getType() == ConnectivityManager.TYPE_WIFI) {
                WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
                //  wifi.setWifiEnabled(true);//Turn on Wifi
                wifi.setWifiEnabled(false);//Turn off Wifi
            } else if (activeNetwork.getType() == ConnectivityManager.TYPE_MOBILE)
                return true;
            else
                return false;
        }
        return false;
    } 
```

用完方法后，如果您看到互联网无法连接，请使用以下方法**打开移动数据**

```
 private void setMobileDataEnabled(Context context, boolean enabled) {
        try {
            final ConnectivityManager conman = (ConnectivityManager)
                    context.getSystemService(Context.CONNECTIVITY_SERVICE);
            final Class conmanClass = Class.forName(conman.getClass().getName());
            final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
            iConnectivityManagerField.setAccessible(true);
            final Object iConnectivityManager = iConnectivityManagerField.get(conman);
            final Class iConnectivityManagerClass = Class.forName(iConnectivityManager.getClass().getName());
            final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
            setMobileDataEnabledMethod.setAccessible(true);
            setMobileDataEnabledMethod.invoke(iConnectivityManager, enabled);
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (NoSuchFieldException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (NoSuchMethodException e) {
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        }
    } 
```

也需要清单中的许可

```
 <uses-permission android:name="android.permission.INTERNET"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission>
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE"></uses-permission> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-15T07:23:06.153

检查是否有互联网。

`public class NetworkUtil {`

```
public static int TYPE_WIFI = 1;
public static int TYPE_MOBILE = 2;
public static int TYPE_NOT_CONNECTED = 0;

public static int getConnectivityStatus(Context context) {
    ConnectivityManager cm = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);

    NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
    if (null != activeNetwork) {
        if (activeNetwork.getType() == ConnectivityManager.TYPE_WIFI)
            return TYPE_WIFI;

        if (activeNetwork.getType() == ConnectivityManager.TYPE_MOBILE)
            return TYPE_MOBILE;
    }
    return TYPE_NOT_CONNECTED;
}

public static int getConnectivityStatusString(Context context) {
    int conn = NetworkUtil.getConnectivityStatus(context);
    int status = -1;
    if (conn == NetworkUtil.TYPE_WIFI) {
        status = 1;
    } else if (conn == NetworkUtil.TYPE_MOBILE) {
        status = 2;
    } else if (conn == NetworkUtil.TYPE_NOT_CONNECTED) {
        status = 0;
    }
    return status;
}` 
```

然后如果状态 == 0 ; 然后启动这个 Intent。 `startActivity(new Intent(android.provider.Settings.ACTION_WIRELESS_SETTINGS));`

# c - 矩阵运算，从 char 到 float 的错误转换

> ID：11484452
> 
> 赞同：0
> 
> 时间：2012-07-14T14:14:50.947
> 
> 标签：c, math, matrix

该程序从文本文件中输入一个字符串，例如：

> 2 1.0 2.0 3.0 4.0

其中第一个数字是方阵的维数，其他数字是矩阵的元素（以列主要形式存储）。每个数字都用“空格”字符分隔。程序将所有数字添加到单个列上，并乘以这种类型的每个结果。带有此字符串的 IE 结果将是：21.0 问题是：使用此输入，程序的输出将是：

> 输入字符串为 2 1.0 2.0 3.0 4.0
> 
> 从字符串中提取 char 类型标记 1.0
> 
> 从字符串中提取char类型token 2.0
> 
> 从字符串中提取char类型token 3.0
> 
> 从字符串中提取char类型token 4.0
> 
> 将char类型token 1.0转换为float类型
> 
> 将char类型token 2.0转换为float类型
> 
> 将char类型token 2.0转换为float类型
> 
> 将char类型token 3.0转换为float类型
> 
> 浮点类型的打印矩阵：
> 
> 1.000000
> 
> 2.000000
> 
> 2.000000
> 
> 3.000000
> 
> 最终结果是 15.000000

相反，它应该是：输入字符串是 2 1.0 2.0 3.0 4.0

> 从字符串中提取 char 类型标记 1.0
> 
> 从字符串中提取char类型token 2.0
> 
> 从字符串中提取char类型token 3.0
> 
> 从字符串中提取char类型token 4.0
> 
> 将 char 类型 token 1.0 转换为 float 类型 将 char 类型 token 2.0 转换为
> 
> float 类型 char 类型 token 2.0 转换成 float 类型 Converted
> 
> char型token 3.0转成float型
> 
> 浮点类型的打印矩阵：
> 
> 1.000000
> 
> 2.000000
> 
> 3.000000
> 
> 4.000000
> 
> 最终结果是 24.000000

这里的代码

```
#include <sys/types.h>
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>

/* void calculus(char string[], int matrixDimension)
 * Executes the following procedure:
 * 1) it extracts from the string, various char type tokens
 * 2) converts these char type tokens into float types and stores it into "squareMatrix" bidimensional vector
 * 3) does the calculus
 */
void calculus(char string[]);

int main()
{
    FILE* fileToReadFd;
    int nRead;
    char string[500] = {0};
    const char pathNameRead[] = "/home/caterpillar/canc/matrice2.txt";
    if((fileToReadFd = fopen(pathNameRead, "r")) == NULL)
    {
        printf("Ho provato ad aprire %s\n", pathNameRead);
        printf("errore nell'aprire il file\n" "%s\n", strerror(errno));
    }
    nRead=fread(&string[0],sizeof(char),100,fileToReadFd);

    printf("Input string is %s\n", &string[0]);
    calculus(string);
    fclose(fileToReadFd);
    return 0;

}

void calculus(char string[])
{
    int matrixDimension = atoi(&string[0]);

    float finalResult = 1;

    // float type square matrix to be filled
    float squareMatrix[matrixDimension][matrixDimension];

    // stores the result of every column addition
    float columnAddition[matrixDimension];

    /*
     * stores tokens from the string
     * I.E.:
     * token[0] contains "1.0"
     * token[1] contains "2.0"
     * token[2] contains "3.0"
     * token[3] contains "4.0"
     */
    char tokens[matrixDimension * matrixDimension][8];

    /*
     * zero initialize columnAddition vector
     */
    for(int i = 0; i < matrixDimension; i++)
    {
        columnAddition[i] = 0;
    }

    /*
     *  First strtok is necessary to be left alone since it takes away
     *  the first token that is not usefull ( it is the matrix dimension)
     */
    strtok(&string[0], " ");
    for(int i = 0; i < (matrixDimension * matrixDimension); i++)
    {
        strcpy(&tokens[i][0], strtok(NULL, " "));
        printf("Extracted char type token %s from the string\n", &tokens[i][0]);
    }

    for(int i = 0; i < matrixDimension; i++)
    {
        for(int j = 0; j < matrixDimension; j++)
        {
            squareMatrix[i][j] = atof(&tokens[i+j][0]);
            printf("Converted char type token %s into float type\n", &tokens[i+j][0]);
        }
    }
    printf("\nPrinting matrix of float types:\n");
    for(int i = 0; i < matrixDimension; i++)
    {
        for(int j = 0; j < matrixDimension; j++)
        {
            printf("%f\n", squareMatrix[i][j]);
        }
    }
    // does calculus
    for(int j = 0; j < matrixDimension; j++)
    {
        for(int i = 0; i < matrixDimension; i++)
        {

            columnAddition[j] = columnAddition[j] + squareMatrix[i][j];
        }
    }
    for(int i = 0; i < matrixDimension; i++)
    {
        finalResult = finalResult * columnAddition[i];
    }
    printf("Final result is %f\n", finalResult);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T14:22:29.650

我相信这是问题所在：

```
squareMatrix[i][j] = atof(&tokens[i+j][0]);
printf("Converted char type token %s into float type\n", &tokens[i+j][0]); 
```

因为这将为 (i=0, j=1) 和 (i=1, j=0) 引用相同的标记，因为 1+0 = 1 和 0+1 = 1

它应该是

```
squareMatrix[i][j] = atof(&tokens[i*matrixDimension+j][0]);
printf("Converted char type token %s into float type\n", &tokens[i*matrixDimension+j][0]); 
```

# android - 无法使用 Jelly Bean 在手机上通过 eclipse 进行调试

> ID：11484455
> 
> 赞同：3
> 
> 时间：2012-07-14T14:15:21.430
> 
> 标签：android, eclipse, android-4.2-jelly-bean

我有一个用于 sprint 的 nexus S，我将其用作开发人员手机，该手机植根于运行 android 4.1。Eclipse 可以识别手机、驱动程序等。我可以运行“adb devices”并显示手机 ID。但是，如果我尝试调试我的应用程序或任何其他导入的项目，我会收到以下错误：

无法打开 zip '/data/local/tmp/com.myapp.apk'：权限被拒绝

（我会发布图片，但之前没有在这里发布过）

如果我手动传输 .apk 并通过 Astro 进行安装，一切都会完美运行。我非常迷茫，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T10:32:56.250

对于使用更新版本的 siyah 内核查看此内容的任何人，如果您不想切换内核，您可以使用“ExTweaks”应用程序更改“MISC”下名为“ADB Binary Mode”的设置。我将其设置为“Development ADB”（原为“Normal ADB”），现在可以使用 Eclipse 成功调试！:D

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T13:23:41.193

我的 Galaxy S2 中安装了自定义 ROM。通过谷歌搜索我来到这个帖子： http: [//forum.xda-developers.com/showpost.php?p=29454043 &postcount=203](http://forum.xda-developers.com/showpost.php?p=29454043&postcount=203)

我的问题也是内核（Siyah 3.5.2）。

我为 JB 安装了另一个内核（http://developer.clockworkmod.com/downloads/51/3354/kernel-cm-10-20120801-i9100-signed.zip），问题就解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:56:42.087

我将 SGS3 (I9300) 更新为库存 4.1.1 ROM，我遇到了同样的问题。

在我在这里和其他地方尝试所有建议失败后：

*   清理所有项目
*   通过 adb chmod 777 安装 /data/local/tmp （和直接子文件夹）
*   跳鸡舞（不知道是谁建议的，但至少它产生了一些笑声；）
*   等等

我安装了 SiyahKernel S3-v1.6.8，问题就消失了。

在检查了我的 UMASK 后，我看到它现在是 0000（在股票内核上是 0077），所以我得出结论，**错误的 UMASK 是错误的根本原因**。

尽管如此，从关于这个问题的许多其他线程可以看出，股票内核导致这个问题是非常错误的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T04:38:23.973

基本上

> /数据/本地

没有正确的权限，所以很简单：

```
adb shell
cd /data
chmod 777 local 
```

应该管用。（不确定新权限是否过于宽泛，但我并不太担心）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T00:34:15.040

根据 ekim 的回答，我再次遇到了同样的问题，比如 Galaxy S2 等。最新版本的 Siyah 解决了这个问题，我可以从 Eclipse 重新开始运行/调试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-05T18:16:58.240

这是查看是否是权限问题的快速方法：
adb install -s Your.apk

这将安装在 SD 卡上，而不是 /data/local

# tinymce - TinyMCE 发布纯文本而不是 html 标签

> ID：11484457
> 
> 赞同：3
> 
> 时间：2012-07-14T14:15:43.737
> 
> 标签：tinymce

tinyMCE 如何配置为使用它发布 html。我将来自 tinyMCE 编辑器的文本发布到另一个页面上。发布的数据显示纯文本，而不是文本消息中的 html。是因为必须设置一些配置以允许 TinyMCE 中的 html 标签吗？这是我使用的代码

```
<!-- tinymce -->
<script type="text/javascript" src="tinymce/jscripts/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
tinyMCE.init({
        // General options
        mode : "textareas",
        theme : "advanced",
        plugins : "autolink,lists,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",

        // Theme options
        theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
        theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,spellchecker,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,blockquote,pagebreak,|,insertfile,insertimage",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true,
        width: "90%",
        height: "300",

        // Skin options
        skin : "o2k7",
        skin_variant : "silver",

        // Example content CSS (should be your site CSS)
        content_css : "style1.css",

        // Drop lists for link/image/media/template dialogs
        template_external_list_url : "js/template_list.js",
        external_link_list_url : "js/link_list.js",
        external_image_list_url : "js/image_list.js",
        media_external_list_url : "js/media_list.js",

        // Replace values for the template plugin
        template_replace_values : {
            username : "Some User",
            staffid : "991234"
        }
    });
</script> 
```

# php - 谷歌日历提要限制项目

> ID：11484458
> 
> 赞同：0
> 
> 时间：2012-07-14T14:15:50.520
> 
> 标签：php, rss, google-calendar-api

此代码应该显示我的 Google 日历 RSS 中的所有项目，但它将显示的帖子限制为大约 23 个：

[http://james.cridland.net/code/google-calendar.html](http://james.cridland.net/code/google-calendar.html)

我的 RSS 提要在这里：[https ://www.google.com/calendar/feeds/ta624s0k5sf002ji485o6d0bvg%40group.calendar.google.com/private-9f18d335ed346643800c76d0c96e286c/basic](https://www.google.com/calendar/feeds/ta624s0k5sf002ji485o6d0bvg%40group.calendar.google.com/private-9f18d335ed346643800c76d0c96e286c/basic)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:26:10.417

除非您更改了这行代码：

```
// ...and how many you want to display (leave at 999 for everything)
$items_to_show=999; 
```

它应该包含 999 个条目（或它提到的*所有内容）。*

这里的脚本似乎有错误（在 max_results 之后缺少“= 符号”）。

替换为：

```
// Form the XML address.
$calendar_xml_address = str_replace("/basic","/full?singleevents=true&futureevents=true&max-results=".$items_to_show."&orderby=starttime&sortorder=a",$calendarfeed); //This goes and gets future events in your feed. 
```

# c# - Android 应用可以使用 C#.Net 语言和 Visual Studio 开发吗？

> ID：11484460
> 
> 赞同：-2
> 
> 时间：2012-07-14T14:15:53.563
> 
> 标签：c#, android, xamarin.android

当我在互联网上搜索时，我发现可以使用 C#.Net 和 Visual Studio 开发 android 应用程序。

[单声道机器人](http://www.brutaldev.com/post/2011/01/15/Android-applications-in-C-using-Visual-Studio.aspx)

该框架名称是 MonoDroid。

可以用 C#.Net 和 Visual Studio 开发 Android 应用吗？

如果可以的话，有什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:19:39.503

是的，它可以。我有时在让调试器工作时遇到问题，当它工作时速度非常慢，但除此之外，适用于 Android 的*Mono*似乎还不错。虽然没有做任何太重要的事情。

很难评论什么是“任何问题”。如果您想知道，它会编译、部署和工作。您可以使用模拟器免费试用。需要一段时间来设置。

哦，我确实有一个大问题。通常在您部署时，它会提示您启动模拟器。第一次启动模拟器需要很长时间，然后构建过程不会将其显示为可部署到的有效模拟器。然后我必须关闭虚拟电话，重新部署，第二次它启动得更快，并且在 Visual Studio 会话的其余部分工作正常。

附带说明，您必须使用 Visual Studio Professional；Express 不适用于 Android 的 Mono。（如果您仍然希望使用免费的 IDE，您可以使用 MonoDevelop）

以下是用于 Android 的 Mono 的记录限制：http: [//docs.xamarin.com/android/about/limitations](http://docs.xamarin.com/android/about/limitations)和[http://support.xamarin.com/customer/portal/topics/62116-android-faq/articles](http://support.xamarin.com/customer/portal/topics/62116-android-faq/articles)

从本质上讲，您使用的是 CoreCLR（与 Silverlight 可用的不同），有一些模糊的限制，但除此之外它大部分都存在。

也就是说，我知道 Mono for iPhone 由于语言、运行时和应用商店许可的限制，还有一些限制。

# php - 使用 XDebug 设置 Komodo IDE 以进行逐步 PHP 调试

> ID：11484463
> 
> 赞同：0
> 
> 时间：2012-07-14T14:16:21.227
> 
> 标签：php, macos, xampp, xdebug, komodo

我目前正在运行 Komodo 7 并在 PHP 5.3.1 上设置了 XDebug，它是作为 XAMPP 1.7.3 的一部分安装的。所有这些都在 Mac OS X 10.7 上运行。

在我升级 XAMPP（从 1.0.1 版开始）之前，在 Komodo 中逐步调试 PHP 工作正常。我会在 Firefox 中加载一个页面，并且 Dock 中的 Komodo 图标会开始上下弹跳，我将能够单步执行我的代码、添加断点等。

现在看来调试工作不正常。我确信 XDebug 设置正确，因为它在我运行 phpinfo() 时显示。但是，当我在 Firefox 中加载页面时，在 Komodo 中不会开始逐步调试。Komodo 确实在一定程度上做出了响应，因为该信息显示在 Komodo 窗口右下角的“调试输出”窗格中，但我无法看到开始逐步调试。

我有一个需要完成的项目，所以我非常感谢任何人能够提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:27:15.413

根据上面 Hamish 的评论，这确实是[Can't get PHP debugging to work with Komodo（但我快到了！）](https://stackoverflow.com/questions/11632369/cant-get-php-debugging-to-work-with-komodo-but-im-almost-there)

请参阅该问题以获取接近答案的内容。

# iphone - 一体化飞船？

> ID：11484465
> 
> 赞同：0
> 
> 时间：2012-07-14T14:16:52.737
> 
> 标签：iphone, objective-c, push-notification, urbanairship.com

我正在我的应用程序中集成城市飞艇，我按照给定链接（https://docs.urbanairship.com/display/DOCS/Getting+Started%3A+iOS%3A+Push）中的所有步骤操作，但这里的问题是我我收到一个错误，即找不到 AirshipConfig.plist 文件，有人可以提前帮我谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:55:54.947

您所要做的就是创建一个具有该名称的 .plist 文件，但这是我的[AirshipConfig.plist](http://cl.ly/I3BR)文件。您只需要填写您的应用程序密钥和秘密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:35:49.120

作为下载的一部分，应该已经有一个示例文件 AirshipConfig.plist。但是，您需要将文件从 AirshipConfig.plist.sample 重命名为 AirshipConfig.plist 并编辑内容（例如，添加应用程序密钥和机密）

# java - 限制用户访问 Java EE 应用程序中的文件夹

> ID：11484466
> 
> 赞同：3
> 
> 时间：2012-07-14T14:17:05.890
> 
> 标签：java, servlets, restriction

如何隐藏我的网络服务器上的文件？我有一个目录“ `files`”，其中存储了一些 pdf 文件。我不想让用户通过这样的 URL 访问文件：

```
www.example.com/files/1.pdf 
```

而不是这个，我想在数据库中映射每个文件和一个 id 并让用户像这样访问它：

```
 www.example.com/fileId=5569a 
```

用户应该无法访问该`files`目录。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T14:57:47.480

这是一个非常前卫的答案

首先，您应该使用部署描述符 (web.xml) 拒绝对目录的访问

```
<security-constraint>
   <display-name>excluded</display-name>
   <web-resource-collection>
      <web-resource-name>No Access</web-resource-name>
      <url-pattern>/files/*</url-pattern>
   </web-resource-collection>
   <web-resource-collection>
      <web-resource-name>No Access</web-resource-name>
      <url-pattern>/files/*</url-pattern>
      <http-method>DELETE</http-method>
      <http-method>PUT</http-method>
      <http-method>HEAD</http-method>
      <http-method>OPTIONS</http-method>
      <http-method>TRACE</http-method>
      <http-method>GET</http-method>
      <http-method>POST</http-method>
   </web-resource-collection>
   <auth-constraint />
   <user-data-constraint>
      <transport-guarantee>NONE</transport-guarantee>
   </user-data-constraint>
</security-constraint> 
```

现在您的文件是安全的，您必须实现一个带有 url-mapping '/' 的 Servlet，它将检查请求中的 'fileId' 参数。如果找到它，servlet 将向用户提供文件下载，否则它将用户重定向到主页。

有关实现 servlet，请参阅[单击超链接时调用 servlet](https://stackoverflow.com/questions/1907482/call-a-servlet-on-click-of-hyperlink)

实现文件下载请看我的帖子[有没有一种通用的方法可以在jsp中下载所有类型的文件？](https://stackoverflow.com/questions/10702683/is-there-a-common-way-to-download-all-types-of-files-in-jsp/10703377#10703377)

# java - 在 MigLayout 中显示所有边框

> ID：11484468
> 
> 赞同：3
> 
> 时间：2012-07-14T14:17:25.173
> 
> 标签：java, swing, miglayout

我目前正在使用 MigLayout。有人知道如何在 MigLayout 中显示所有边框吗？我希望它看起来像表格或网格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T01:42:04.067

这不是一个真正的 MigLayout 问题，但答案是： `panel.setBorder(BorderFactory.createMatteBorder(1, 1, 1, 1, Color.gray));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-04T08:26:21.833

我想用我的发现来补充米奇康纳的回答。

这是创建具有全局约束和 4 列的 MigLayout 的方式：

```
 final JPanel jPanel = new JPanel( new MigLayout( "insets 0 0 0 0, gap 0 -1, wrap 4, fill",
      "0 [ right, fill ] -1 [ right, fill ] 10 [ right, fill ] -1 [ right, fill ] 0 " ) ) ; 
```

这是我为里面的组件设置的边框：

```
 private static Border MARKET_DEPTH_CELL_BORDER = BorderFactory.createCompoundBorder(
      BorderFactory.createLineBorder( Colors.GRAY_HALF, 1 ),
      BorderFactory.createEmptyBorder( 2, 10, 2, 10 )
  ) ; 
```

请注意，MigLayout 的插图被破解以叠加相邻的边框。为了在组件本身周围留出空间，我添加了一个空边框。

# php - 在 MySQL 中找不到 outfile 创建的文件

> ID：11484471
> 
> 赞同：49
> 
> 时间：2012-07-14T14:17:36.373
> 
> 标签：php, mysql, file, file-io

我正在使用以下查询来创建 CSV 文件

```
SELECT email INTO OUTFILE "mydata.csv"
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY "\n"
FROM users; 
```

但是当我通过 filezilla 搜索时，我无法在任何地方找到 mydata.csv 文件。

知道这个文件存储在哪里吗？

查询成功运行，没有任何错误！有什么帮助吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-07-14T14:27:22.830

MySQL 可能正在将文件写入自己的数据目录，`/var/lib/mysql/<databasename>`例如。要指定路径，请使用完整路径。

但是，它必须是运行 MySQL 服务器守护程序的用户帐户可写的目录。出于这个原因，我会经常使用`/tmp`：

指定要写入的路径，如下所示：

```
INTO OUTFILE '/tmp/mydata.csv' 
```

请注意，MySQL 将在 MySQL*服务器*上写入文件，而不是在您的客户端计算机上。因此远程连接将在远程服务器上创建输出文件。另请参见[SELECT INTO OUTFILE local ?](https://stackoverflow.com/questions/2867607/mysql-select-into-outfile-local) 有关更多详细信息和解决方法。

### 系统和 Linux

**`/tmp`关于在运行的 Linux 系统上写入的说明`systemd`**：

最初发布此内容几年后，我发现自己无法找到写入`/tmp`通过的文件

```
...INTO OUTFILE '/tmp/outfile.csv' 
```

在运行 Fedora Linux 的 MariaDB 5.5 服务器上使用`systemd`. 该目录和文件不是按指定直接写入文件，而是`/tmp/outfile.csv`在 systemd 目录下创建`/tmp`：

```
/tmp/systemd-mariadb.service-XXXXXXX/tmp/outfile.csv 
```

虽然文件`outfile.csv`本身和`tmp/`子目录都是全局可写的，但 systemd 服务目录本身具有 700 权限并且是 root 拥有的，需要`sudo`访问才能检索其中的文件。

与其将 MariaDB 中的绝对路径`/tmp/outfile.csv`指定为 并将其相对指定为`outfile.csv`，不如将文件按预期写入当前所选数据库的 MariaDB 数据目录中。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-14T15:07:57.797

我怀疑您正在客户端计算机上查找该文件。

`SELECT .. INTO OUTFILE`在服务器机器上写入文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-03T14:09:22.523

仅举例：

我在**MySQL Workbench**中运行了以下查询，并在其中找到了我的文件

```
SELECT * FROM `db`.`table` INTO OUTFILE 'file.csv' FIELDS TERMINATED BY ','; 
```

> **D:\wamp\bin\mysql\mysql5.6.17\data\db\file.csv**

您可以使用以下示例设置文件路径：

```
SELECT * FROM `db`.`table` INTO OUTFILE 'C:\\file.csv' FIELDS TERMINATED BY ','; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-02T10:21:49.720

我找到了使用以下命令创建的 INTO OUTFILE 文件

> `select name from users into outfile "name.csv"`

在以下位置

> **C:\ProgramData\MySQL\MySQL 服务器 5.6\data\name.csv**

这可能是默认位置，因为我从未更改任何内容。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-01T16:15:24.217

如果 OS X 上的任何人遇到此问题，`mysql`使用 homebrew 安装的默认输出位于`/usr/local/var/mysql/database-name/`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-17T16:23:57.663

您在 中找到该文件，但如果您给出以下`C:\wamp\bin\mysql\mysql5.5.24\data`名称，则名称将是`UsersNamecarro.txt``select * from carro where id_cor<4 INTO OUTFILE 'C:\Users\Name\carro.txt';`

所以只需写`.....OUTFILE 'C:\carro.txt'`来获取文件夹中调用`carro.txt`的`data`文件

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-27T21:51:00.773

+1 给@michael-berkowski *，**我需要*的 Windows答案是（正如他所说）

> MariaDB 的数据目录

具体来说，我的位于名为“mydatabase”的数据库的数据文件夹中

> C:\Program Files\MariaDB 10.3\data\mydatabase

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-21T10:56:14.347

如果您没有指定绝对路径而是使用类似`INTO OUTFILE 'output.csv'`or的东西`INTO OUTFILE './output.csv'`，它会将输出文件存储到`show variables like 'datadir';`.

# jquery - 函数上的 jQuery 不起作用

> ID：11484472
> 
> 赞同：0
> 
> 时间：2012-07-14T14:17:36.767
> 
> 标签：jquery

我的html：

```
<div style="top:10px;display:block" class="jPlugin_article_pager">
    <span style="cursor:pointer" class="jPlugin_article_page" data-id="1">1</span>
    <span style="cursor:pointer" class="jPlugin_article_page" data-id="2">2</span>
</div> 
```

我的jQuery

```
 $('.jPlugin_article_pager').on('click','.jPlugin_article_page',function(event){
            alert('works');
                console.log($(this).attr('data-id') + ' was pressed. Details:  Event target : '+ event.target+ '. Type:' + event.type );
}); 
```

我只想在您单击 jPlugin_article_page 元素时触发警报。笔记。jPlugin_article_pager 是动态生成的，所以 jPlugin_article_page。我不需要使用文档就绪功能，因为我的代码靠近结束正文标记..

我想知道什么是错的..谢谢

更新：

奇怪的是..我不知道我改变了什么，但这有效：

```
 $('.jPlugin_article_pager').on('click','.jPlugin_article_page',function(event){
                 alert($(this).attr('data-id'));
                console.log($(this).attr('data-id') + ' was pressed. Details:  Event target : '+ event.target+ '. Type:' + event.type );
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:21:10.477

该事件仅绑定到调用代码时实际存在的东西。您似乎确定您不需要文档准备功能，当然，但是当您访问此代码时，屏幕上的实际 DOM 元素是吗？

你说它是动态生成的，所以我猜它不是。而且你不能将函数绑定到不存在的对象上。在您动态添加对象后调用此代码，例如在实际创建对象的同一函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T14:21:19.103

由于`.jPlugin_article_pager`是动态创建的，您应该从另一个静态父级（如 body 标签）委托事件，试试这个：

```
$('body').on('click', '.jPlugin_article_page', function(event){
    alert('works');
    console.log($(this).attr('data-id') + ' was pressed. Details:  Event target : '+ event.target+ '. Type:' + event.type );
}); 
```

# asp.net - asp:treeview 页面访问时展开

> ID：11484473
> 
> 赞同：0
> 
> 时间：2012-07-14T14:18:06.453
> 
> 标签：asp.net

我的网站中有一个 asp:treeview，当访问页面链接到的节点时，选定的节点不会展开。你可以在这里看到问题：

[http://www.meronymy.com/SPARQL-Database-Server/Documentation/architecture/query-processor/query-parser.aspx](http://www.meronymy.com/SPARQL-Database-Server/Documentation/architecture/query-processor/query-parser.aspx)

如您所见，“查询解析器”节点未显示在菜单中，即使它链接到的页面已打开，如果展开其父节点“查询处理器”，则会显示该节点。

我只希望默认展开第一级，除非访问子节点链接到的页面，否则其他级别应该折叠。

我究竟做错了什么？

```
 <asp:SiteMapDataSource runat="server" ID="siteMapDataSource" ShowStartingNode="false" />
    <asp:TreeView ID="mnuTreeView" SelectedNodeStyle-ForeColor="Black" ExpandDepth="1" DataSourceID="siteMapDataSource" 
        CssClass="treeview" ShowLines="true" ShowCheckBoxes="None" ShowExpandCollapse="True" SkipLinkText="" Runat="server">

        <LevelStyles>
            <asp:TreeNodeStyle ChildNodesPadding="10" 
                Font-Size="1.2em"/>
            <asp:TreeNodeStyle ChildNodesPadding="8" 
                Font-Size="1em"/>
            <asp:TreeNodeStyle ChildNodesPadding="6" 
                Font-Size="0.9em"/>
            <asp:TreeNodeStyle ChildNodesPadding="5" 
                Font-Size="0.8em"/>
        </LevelStyles>

    </asp:TreeView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:35:38.943

由于我没有收到回复，我猜我将不得不添加自己的代码来遍历 asp:treeview 中的所有节点，并在当前页面与节点链接到的页面匹配时展开节点。

# android - Android OpenGL 在触摸移动的方向上旋转立方体

> ID：11484474
> 
> 赞同：1
> 
> 时间：2012-07-14T14:18:23.893
> 
> 标签：android, opengl-es, rotation, cube, motion

> **可能重复：**
> [具有 OpenGL 和触摸屏功能的视觉正确旋转](https://stackoverflow.com/questions/11207805/visually-correct-rotation-with-opengl-and-touch-screen-capabilities)

我有一个立方体，我想在触摸时移动手指的方向旋转。我确实知道如何获得当前的触摸移动并使用这些值来旋转立方体，但这不是我想要的。

这是我目前正在使用的：

```
 case MotionEvent.ACTION_DOWN:
        mx = me.getX();
        my = me.getY();
        break;
    case MotionEvent.ACTION_MOVE:
        x_diff = mx - me.getX();
        y_diff = my - me.getY();
        mx = me.getX();
        my = me.getY();
        this.rot_x -= y_diff;
        this.rot_y -= x_diff;
        break; 
```

回转：

```
gl.glRotatef(rot_x, 1, 0, 0);
gl.glRotatef(rot_y, 0, 1, 0);
gl.glRotatef(rot_z, 0, 0, 1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T16:02:08.067

我找到了解决方案。正确的做法是实施 ArcBall 旋转。

NeHe OpenGL 教程： http: [//nehe.gamedev.net/tutorial/arcball_rotation/19003/](http://nehe.gamedev.net/tutorial/arcball_rotation/19003/)
Java 端口：[http ://www.java-tips.org/other-api-tips/jogl/arcball-rotation-nehe-tutorial -jogl-port.html](http://www.java-tips.org/other-api-tips/jogl/arcball-rotation-nehe-tutorial-jogl-port.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T17:36:19.973

您没有指定您对当前实现不满意的是什么，但一个想法可能是使用 VelocityTracker 并根据触摸速度为您的立方体分配 3 维速度，然后制作立方体当您停止移动手指时，缓慢减速回到静止状态。它会给交互带来更自然的感觉。

# javascript - 如何在 CouchDB 中编写原生 Erlang 列表函数

> ID：11484475
> 
> 赞同：6
> 
> 时间：2012-07-14T14:18:43.147
> 
> 标签：javascript, erlang, couchdb

我正在尝试在 CouchDB 中编写 Erlang 列表函数，但是，我不熟悉返回的数据类型，以及如何相应地操作它们。我希望有人向我展示如何将下面的简单 Javascript List 函数转换为 Erlang 列表函数。这对我来说是一个很好的起点。

```
function(head, req) {
var row,resp={},data=[];
  if(head){
    resp["total_rows"] = head.total_rows;   
  }  
  while(row = getRow()) {
    data.push(row);
  }
  resp.rows = data;
  return JSON.stringify(resp);
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T22:09:27.950

您是否看过 couchdb 测试套件。你会在 utils/script/test/erlang_views.js 找到 erlang 视图

当我遇到困难时，测试套件中的代码通常会帮助我。

# grails - Grails javamelody 插件警告

> ID：11484478
> 
> 赞同：1
> 
> 时间：2012-07-14T14:19:03.987
> 
> 标签：grails, log4j, java-melody

我在 Grails 中使用 javamelody 监控插件一段时间没有问题，但最近我不得不将我的开发转移到另一台计算机上（我现在使用的是 netbeans 7.1.2）。重新安装插件后，我在我的开发环境中完美地运行了该应用程序。但是当我将战争运行到我的生产环境时，会出现以下警告：

```
log4j:WARN No appenders could be found for logger (net.bull.javamelody). 
log4j:WARN Please initialize the log4j system properly. 
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

Config.groovy 中的 appenders 部分是：

```
appenders {
    console name:'stdout', layout:pattern(conversionPattern: '%d [%t] %-5p %c{2} %x - %m%n')
    appender new DailyRollingFileAppender (
        name: 'dailyAppender',
        datePattern: "'.'yyyy-MM-dd",
        fileName: "logs/${appName}.log",
        layout: pattern(conversionPattern:'%d [%t] %-5p %c{2} %x - %m%n')
    )
} 
```

我的问题是：

*   为什么开发环境的日志中没有这些警告？
*   申请有哪些可能的后果？

我正在运行 Grails 1.3.9、Melody 1.2、tomcat 7.0.23

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:23:57.600

*   `Config.groovy`如果您在 Grails文件的开发部分设置了日志记录附加程序，但在生产部分没有设置，则可能是不同的表单环境 。
*   后果是您将没有日志记录。您的应用程序中可能有代码，`log.error("Critical Error!")`但由于它没有链接到任何附加程序，您将永远不会在任何地方看到它。

查看文档中的[日志记录](http://grails.org/doc/latest/guide/conf.html#logging)。

# regex - 在实时验证中使用正则表达式

> ID：11484479
> 
> 赞同：2
> 
> 时间：2012-07-14T14:19:08.897
> 
> 标签：regex, validation, client-side

我正在使用 LiveValidation (http://livevalidation.com/) 在客户端部分验证我网站上的表单。

但是我在使用正则表达式时遇到问题：网站上的示例不是很清楚，我正在尝试验证一个我不想拒绝数字的字段：

```
 var f1a = new LiveValidation('nome');
f1a.add( Validate.Format, { pattern: /[a-zA-Z]/i } ); 
```

或至少所有非数字字符： `[^0-9]`???

我的正则表达式错了吗？还是我错误地使用了 reg exp 的实时验证？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:58:08.430

此正则表达式匹配所有字母的输入。

```
/^[a-z]+$/i 
```

+ 是它匹配多个字符所必需的。没有它，正则表达式匹配第一个字符并停止。

我推荐[这个](http://gskinner.com/RegExr/)网站。它有很多样本，您可以测试正则表达式。

正`i`则表达式中的 是`ignoreCase`标志。指定后，将不分大小写进行匹配。

# c# - 有什么比在后台工作的无限循环的新线程更好用的呢？

> ID：11484481
> 
> 赞同：0
> 
> 时间：2012-07-14T14:19:30.440
> 
> 标签：c#, multithreading, loops

现在，我正在一个带有无限循环的新线程中读取外部应用程序的内存

```
public void ReadMemory()
{
//read memory
Thread.Sleep(10);
} 
```

不幸的是，即使是 1 毫秒的睡眠，我也可以在 1 分钟内完成 60-100 个循环。没有任何睡眠，它是 1000-1500/秒的循环，但它需要很多 CPU。我不敢相信我对此无能为力，所以我在这里问你：P。CPU 使用率可能是一个问题，因为我想在不同的线程中添加更多的后台工作功能（或其他）

有什么东西不会像暂停 10 毫秒那样减少循环的数量吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T14:40:16.157

不用担心 CPU 使用率。这是一个荒谬的概念。

没有所谓的“运行一点点的代码”或“缓慢运行代码只消耗 25% 的 CPU”之类的东西。

在最低级别，它是一个二进制的东西：你的代码要么运行，消耗它运行的 100% 的内核，要么不运行，在这种情况下它使用 0% 的 CPU。

操作系统向您显示的 CPU 使用率是运行平均值。

所以你需要问的问题不是“我如何在不使用这么多 CPU 的情况下运行我的代码”，而是更简单的“我的代码在不应该运行的时候运行吗？” 如果您希望您的代码运行，那么它至少会暂时使用 100% 的 CPU，这并没有什么问题。

目前还不清楚`Sleep()`调用在您的应用程序中扮演什么角色。你在等什么？您是否只想在每次迭代之间传递几毫秒？还是您在等待某个特定事件的发生？

无论如何，当您调用 时`Sleep(10)`，您*不会*将线程挂起 10 毫秒。您将其暂停*至少*10 毫秒。您现在告诉操作系统将线程放入睡眠队列，一旦 10 毫秒过去，线程应该被认为*有资格*再次执行。但这仍然取决于操作系统来安排你的线程，这可能需要另外 10 毫秒（或更多或更少，取决于各种因素）

在 Windows 上，`Sleep(0)`这是一种特殊情况，您可以进行试验。它并没有实际挂起您的线程，而是简单地告诉操作系统该线程已完成其当前时间片，允许其他线程/进程执行，但不会让您的线程进入睡眠状态：它仍然有资格在下次上下文切换时被调度发生。因此，如果目标只是确保其他线程/进程有机会运行，那么调用`Sleep(0)`可能是一种方法。

*另一种方法是忽略这个问题，并相信操作系统知道如何安排进程（这是一个非常安全的假设。除非你真的看到*你的其他后台进程正在被饿死，否则不要担心这个。他们最可能不会）。

最后，当然，您可以设置线程和进程优先级，向操作系统提示它应该更喜欢调度哪些线程。如果你给这个线程一个低优先级，它只会在没有更高优先级的线程可用时被调度，确保你不会饿死其他线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T15:38:05.177

如果您只是偶尔这样做，而不是每次迭代都睡觉。

就像是 ：

```
public class Reader
{
    private static int count= 0;

    public void ReadMemory()
    {
        //read memory

        // Sleep every 501 iterations
        if (Reader.count++ == 500)
        {
            Thread.Sleep(1);
            Reader.count  = 0;
        }
    }
} 
```

如果您以每秒大约 1000 次迭代的速度运行并且需要 1 秒来执行切换，那么这意味着您将以全功率运行半秒，然后减速一秒钟，然后返回全功率，这平均每秒迭代 333 次。

显然，您可以尝试使用 500 以外的值进行试验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T14:27:53.023

线程被设计为尽可能多地消耗 CPU 时间，*除非其他线程需要该 CPU 时间。* 如果您只是想释放线程以便 CPU 可以执行其他任务，请不要这样做。Windows 将根据需要自动将马力分配给任何其他线程。

# jquery - Jquery：在迭代（.each）中克隆会打乱html结构

> ID：11484482
> 
> 赞同：1
> 
> 时间：2012-07-14T14:19:34.097
> 
> 标签：jquery, html, clone, structure, each

我有一段似乎无法修复的代码。如果我不遍历该函数或不克隆，一切正常。当我把它们放在一起时，div 的结构会被打乱。

在任何代码之前，我先从：

```
<div class="origin"></div> 
```

然后我写了一些脚本来添加 html，它的结构应该是这样的： 代码：

```
<div id="id0">
  <div class="scroller">
    <div class="origin"></div>
  </div>
  <a href="#"></a>
</div>
<div class="viewport"></div>
<div id="id1">
  <div class="scroller">
    <div class="origin"></div>
  </div>
  <a href="#"></a>
</div>
<div class="viewport"></div> 
```

它开始很好，但是如果你取消注释下面的两行，带有 ID 的第二个 div 现在位于前一个视口内，而不是包裹在“原点”周围。我正在尝试将每个“原点”内的图像和可能的标题复制到其自己的视口内（图像上有两个周围的 div）。

编码：

```
function writeGallery(i) {
    var startDiv = $("div.origin:eq("+i+")");
    startDiv.wrap('<div class="scroller"></div>');  
    startDiv.parent().wrap ('<div id="id' + i + '" />');
    var horizThumbwrap      = startDiv.parent().parent();
    horizThumbwrap.append ('<a href="#"></a>');
    horizThumbwrap.after ('<div class="viewport" />');

    //var horizViewport        = startDiv.parent().parent().next(".viewport");
    //startDiv.clone().appendTo(horizViewport);
}

$(document).ready(function(){

$("div.origin").each(function(index) {
writeGallery (index);
});

$('#result').text($('#container').html());
}); 
```

**小提琴中的代码（取消注释 2 行以查看混乱）：http: [//jsfiddle.net/AjSnx/](http://jsfiddle.net/AjSnx/)**

我唯一能想到的就是以各种方式重写它，并希望我能找到一些有用的东西。但由于这是我的第一个 jQuery 项目，我也想了解我在这里做错了什么。

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:35:12.067

如果我没有完全倒退，那么您正在尝试将 origin-div 的内容放在 viewport-div 的 origin 是 startDiv 的位置，对吗？

您可能不需要克隆某些东西，也许只需用原始的 innerHTML 填充视口的 innerHTML

```
startDiv.closest('.viewport').html( startDiv.html() ); 
```

那对你有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:35:45.357

在每个循环内，您都`.origin`使用`:eq()`. 但是，在每个循环中，您都会创建另一个`<div class="origin" />`. 因此，在下面的循环中，您选择的`<div>`是刚刚创建的那个，`.clone()`而**不是`<div>`从一开始就存在的那个**。要解决此问题，请使用传递给由 调用的函数的第二个参数`.each()`。它包含在开始时匹配的当前元素（即您打算在循环中使用的元素）。

详情请看[我的更新](http://jsfiddle.net/AjSnx/1/)。生成的 HTML 是这样的：

```
<div id="id0">
    <div class="scroller">
        <div class="origin"></div>
    </div>
    <a href="#"></a>
</div>
<div class="viewport">
    <div class="origin"></div>
</div>

<div id="id1">
    <div class="scroller">
        <div class="origin"></div>
    </div>
    <a href="#"></a>
</div>
<div class="viewport">
    <div class="origin"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T15:02:56.160

作为替代方案，您可以试试这个：

```
 $("div.origin").each(function(i) {
       $(this).wrap('<div id="id'+i+'><div class="scroller"></div></div>')
       $(this).after('<a href="#"></a><div class="viewport"></div>')     
   }); 
```

[http://jsfiddle.net/AjSnx/3/](http://jsfiddle.net/AjSnx/3/)

# asp.net - CKEditor 在更新面板中无法正常工作

> ID：11484484
> 
> 赞同：4
> 
> 时间：2012-07-14T14:20:15.463
> 
> 标签：asp.net, updatepanel, ckeditor

我在 asp.net 的更新面板中遇到了 CKEditor 的问题。我在页面上有多个 CKEditor 的选项卡控件，即每个选项卡中有一个 ckeditor。

```
 string scriptAdd = @"var editor = CKEDITOR.instances['ctl00_ContentPlaceHolder1_faqeditor']; if (editor) { editor.destroy(true); } CKEDITOR.replace('ctl00_ContentPlaceHolder1_faqeditor');";
  ScriptManager.RegisterClientScriptBlock(this, typeof(Page), "", scriptAdd, true); 
```

上面的代码片段有助于在更新面板中呈现编辑器。但是当回发完成时，它仍然显示较早的值而不是更改的值，即编辑器不会反映在更新面板中更改选项卡后所做的更改。

没有更新面板，同样的事情也能正常工作。

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-11T23:51:52.497

只需强制 ckeditor 在更改时更新 textarea ：

```
var ckEditor = CKEDITOR.replace('ctl00_ContentPlaceHolder1_faqeditor');

ckEditor.on("change", function (event) {
    event.editor.updateElement();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-01T19:57:37.767

抱歉，对此的回复较晚，但答案也可能对其他人有帮助。您还需要在后面的代码中执行以下操作：

ScriptManager.RegisterOnSubmitStatement(this, this.GetType(), "updatescript", "CKEDITOR.instances['ctl00_ContentPlaceHolder1_faqeditor'].updateElement();");

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-04T18:45:58.330

```
<form id="form1" runat="server">
    <asp:ScriptManager ID="scrpM" runat="server" EnablePageMethods="true">
    </asp:ScriptManager>

    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:Button ID="btnshow" runat="server" Text="Show Hidden Editor" />
            <div id="divEditor" runat="server" visible="false">
                <asp:PlaceHolder ID="plCKEditor" runat="server"></asp:PlaceHolder>
            </div>
        </ContentTemplate>
    </asp:UpdatePanel>
    </form>

----------

Add editor inside a div with visible="false"
and on the button click you set visible="True"
it's works fine for me 
```

# java - 存储整数集以检查是否已经提到了某个集合

> ID：11484486
> 
> 赞同：1
> 
> 时间：2012-07-14T14:20:48.257
> 
> 标签：java, set

我遇到了一个有趣的问题，我很想得到一些意见。

我有一个程序可以生成一组数字（基于一些预定义的条件）。每个集合最多包含 6 个数字，这些数字不必是唯一的，整数范围从 1 到 100）。

我想以某种方式存储创建的每个集合，以便我可以快速检查以前是否生成了具有完全相同数字（顺序无关紧要）的某个集合。

在这种情况下，速度是一个优先事项，因为在程序停止之前可能存储了多达 100k 组（可能更多，但大多数时间可能更少）！有人对我应该使用什么数据结构以及我应该如何解决这个问题有任何建议吗？

我目前拥有的是这样的：

在将每个集合存储到字符串的 HashSet 之前对其进行排序。字符串只是排序集中的每个数字，带有一些分隔符。

例如，集合 {4, 23, 67, 67, 71} 将被编码为字符串“4-23-67-67-71”并存储到 HashSet 中。然后对于生成的每个新集合，对其进行排序、编码并检查它是否存在于 HashSet 中。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:57:32.887

只需为每个集合使用[java.util.BitSet](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/BitSet.html)，使用 set(int bitIndex) 方法将整数添加到集合中，您无需对任何内容进行排序，并在向其添加新 BitSet 之前检查 HashMap 是否已存在 BitSet ，真的会非常快。如果速度很重要，请不要为此目的使用 value 和 toString 的排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T14:44:40.680

如果你把它拆成碎片，在我看来

*   创建一个集合（生成 6 个数字、排序、字符串化）在 O(1) 中运行
*   检查此字符串是否存在于哈希集中是 O(1)
*   插入哈希集是 O(1)

你这样做 n 次，这给了你 O(n)。 **这已经是最佳选择**，因为无论如何您都必须触摸每个元素一次:)

根据随机数的范围，您可能*会遇到问题。*例如，假设您只生成 1 和 1 之间的数字，那么显然只有一种可能的结果（“1-1-1-1-1-1”），并且从那里开始只会发生碰撞。但是，只要可能的序列数量远大于您生成的元素数量，我就没有问题。

一个提示：如果您事先知道生成元素的数量，那么使用正确数量的元素初始化散列集是明智的（即`new HashSet<String>( 100000 ) );`

*ps 现在出现了其他答案，我想指出，虽然在微观层面上可能有改进的空间（即使用特定于语言的技巧），但您的整体方法无法改进。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T14:48:53.240

1.  创建一个类 SetOfIntegers
2.  实现一个 hashCode() 方法，该方法将生成合理唯一的哈希值
3.  使用 HashMap 存储您的元素，例如 put(hashValue,instance)
4.  使用 containsKey(hashValue) 检查相同的 hashValue 是否已经存在

这样，您将避免对集合进行排序和转换/格式化。

# java - 我可以用泛型避免这种演员吗？

> ID：11484488
> 
> 赞同：3
> 
> 时间：2012-07-14T14:20:55.260
> 
> 标签：java, generics, casting

我想存储 a`Integer`或 a `Double`，两者都从`Number`, 延伸到 a `HashMap`，并在不强制转换的情况下检索它们。原因是我最终会有很多不同的子类型（我只是使用`Number`/`Integer`来说明），并且我不想在引入不同的子类型时编写新方法。我可以`getFromMap()`在下面构造和调用，而不必对`Double`or进行强制转换`Integer`吗？

```
public class MapOfContent {
    static Map<String, Number> hm = new HashMap<String, Number>();

    public static void main(String[] args) {
        addToMap(hm, Integer.valueOf(3), "An Integer");
        addToMap(hm, Double.valueOf(3.4), "A Double");

        Double d;

        d = (Double) getFromMap(hm, "A Double");
        //d = getFromMap(hm, "A Double");

        System.out.println("Result-> " + d);

    }

    private static void addToMap(Map<String, ? super Number> hashmap, Number c, String key) {
        hashmap.put(key, c);
    }

    private static <T> Number getFromMap(Map<String, ? extends Number> hashmap, String cmsKey) {
        return hashmap.get(cmsKey);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:24:34.087

没有办法让这种方法真正成为类型安全的；如果你尝试过`(Double) getFromMap(hm, "An Integer")`呢？那*应该*失败。

一种可能的替代方法是使用实​​际`Class`对象作为键，例如使用[Guava](http://guava-libraries.googlecode.com) [`ClassToInstanceMap`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/ClassToInstanceMap.html)：

```
ClassToInstanceMap<Number> map = MutableClassToInstanceMap.create();
map.putInstance(Integer.class, Integer.valueOf(3));
map.putInstance(Double.class, Double.valueOf(3.4));

Double aDouble = map.getInstance(Double.class); // no cast required 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:24:59.453

如果您将不同类的对象存储在集合中并且在获取它们时，您需要访问它们实际类型的字段/方法，而不仅仅是它们的共同祖先，那么不需要。

在某个地方会有一个显式的强制转换，你能做的最好的就是把它推得很深，并把它从代码的所有其他部分隐藏起来，就像`ClassToInstanceMap`这样。

# atk4 - 中心表单内容修改form.html模板

> ID：11484489
> 
> 赞同：0
> 
> 时间：2012-07-14T14:20:56.920
> 
> 标签：atk4

我仍在使用 4.1，并且正在尝试将表单内容集中在屏幕上。当我添加一个新表单时，它会停留在屏幕的“左侧”。

我尝试更改 form.html（模板/共享）添加具有如下样式的 div：

```
margin-left : 10%; margin-right : 10%; 
```

在表单标签旁边并在底部关闭它。

表格向右，但根本不居中。

有人有任何线索可以帮助解决这个问题吗？

这是一个简单表单的屏幕截图（它不是基于模型）

![表单示例](../Images/23f3a6b177de1ed1491b54a2d70cbc9d.png)

谢谢亚历杭德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:09:40.020

这里有一些不同表单布局的[示例](http://agiletoolkit.org/codepad/gui/formstyle)，您可以使用它们来调整表单布局本身。如果您想在页面中居中表格或将字段居中，则不确定您的问题。

如果您只想在网页中居中表单，则需要使用 margin: auto 来使 css 居中，而不是在每一侧设置一个百分比，如此处[所示](http://bluerobot.com/web/css/center1.html)

另请注意，如果您修改 atk4 目录中的文件，则应将其复制到 yoursite/templates/shared 并在那里修改，以便以后可以通过覆盖 atk4 目录进行升级而不会丢失任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T19:20:06.563

如果我使用默认表单模板（在这种情况下是 CRUD），我会得到以下信息

![在此处输入图像描述](../Images/0edd0da19d9062a57df41fdcafbd088c.png)

如果我通过添加对 atk4/templates/form.html 进行更改

```
<div style="width: 50%; margin: 0 auto;"> 
```

作为 form.html 中的第二行并添加相应的

```
</div> 
```

从底部开始一行，它将所有内容略微向右移动，如下所示

![在此处输入图像描述](../Images/ecac14f38c7b76479fa3d7cd8dc54f99.png)

您的问题中不清楚的是您要实现的目标 - 您是要移动表单中的字段还是要使整个表单在页面上居中？

我认为移动的原因是因为将宽度设置为 50%，但我不知道您要获得什么布局 - 您是否只想将标签与字段右对齐？请在原始问题中发布您所获得的屏幕截图，并尝试描述您想要实现的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T19:58:32.850

好的 - 我已经使用默认的 atk4.2 进行演示。

如果您添加一个具有默认值的新页面，如下所示

```
<?php
   class page_test extends Page {
   function init() {
     parent::init();
     $p=$this;

     $f=$p->add('MVCForm')->setModel('Customer');
   } 
}
?> 
```

我得到以下信息，并且这些字段延伸到页面的整个宽度。

![在此处输入图像描述](../Images/72791e6f0c4647124a9cadf866f84360.png)

这是因为默认页面模板占用整个宽度并且是预期的。

为了调整表单，您可以使用视图功能，因此在 /lib/View 目录下创建一个名为 Centre.php 的视图，并将以下代码放入其中

```
<?php
class View_Centre extends View {
   function init(){
      parent::init();
   }

   function defaultTemplate() {
     return array('view/centre');
   }

}
?> 
```

然后在 yoursite/templates/default/view 中为视图创建一个名为 center.html 的新模板并插入以下 html 代码

```
<div style='width:50%; margin: auto;'>
  <?$Content?>
</div> 
```

然后在页面中，我们先添加视图，然后将表单添加到视图中，而不是直接添加到页面中。

```
<?php
  class page_test extends Page {
    function init() {
      parent::init();
      $p=$this;

      $v=$p->add('View_Centre');
      $f=$v->add('MVCForm')->setModel('Customer');
    } 
  }
 ?> 
```

这将导致以下网页

![在此处输入图像描述](../Images/5a08b659e77a95f11540ccfe521a3f05.png)

基本 ATK4 表单本身就是一个视图，这意味着您可以根据需要设置表单样式，因此，例如，如果您使用不同样式的表单，例如[此处](http://woork.blogspot.co.uk/2008/06/clean-and-pure-css-form-design.html)描述的表单，您可以通过复制 yoursite/atk4/atk4/templates/ 来完成此操作shared/form.html 到 yoursite/atk4/templates/shared.form.html 并将第二行从

```
 <?form?>
   <div id="<?$_name?>" class="atk-form <?$class?>" style="<?$style?>">
   <?$hint?>
   <form class="<?$form_internal_class?>" id="<?$form_name?>" name="<?$form_name?>" action="<?$form_action?>" method="POST" <?$enctype?>>
   <fieldset class="<?$fieldset?>"> 
```

至

```
 <?form?>
   <div id="stylized>" class="myform <?$class?>" style="<?$style?>">
   <?$hint?>
   <form class="<?$form_internal_class?>" id="<?$form_name?>" name="<?$form_name?>" action="<?$form_action?>" method="POST" <?$enctype?>>
    <fieldset class="<?$fieldset?>"> 
```

在 yoursite/templates/default/css 中创建一个新的 form.css 文件，其中包含样式

将 yoursite/atk4/templates/shared/shared.html 复制到 yoursite/templates/shared/shared.html 并添加一个额外的标签

```
 <?$css_include?> 
```

就在现有的之上

```
 <?$js_include?> 
```

并在 Frontend.php 中，让每个页面都找到新的 css 文件。

```
 $this->addLocation('templates',array(
                       'css'=>array(
                         'default/css',
                        ),
          ));
          $this->template->appendHTML('css_include','<link type="text/css" href="'.$this->api->locateURL('css','form.css').'" rel="stylesheet">'); 
```

这会产生这样的样式形式

![在此处输入图像描述](../Images/962079dfbb30267cc8f68613912ae5a3.png)

# cpu - cpu加载软件调节mac

> ID：11484490
> 
> 赞同：0
> 
> 时间：2012-07-14T14:21:08.537
> 
> 标签：cpu, render, blender

我正在寻找一种软件，它可以让我在 MBP 上的搅拌机中渲染时调节 cpu 负载。在某些渲染中，我的 cpu 运行在 95% 到 99% 之间。温度高达90年代。我不在乎我是否再等几分钟。还是我什么都不担心，这是“正常”的行为。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:59:35.753

有几种方法可以处理这个问题。

1.  使用诸如[ATMonitor 之](http://www.atpurpose.com/atMonitor/)类的应用程序，它允许您根据`renice`自己的喜好进行应用程序/进程。例如，`niceness`设置 -20 是最高优先级，而 19 或 20 是最低优先级。[[信息]](http://en.wikipedia.org/wiki/Nice_%28Unix%29)

2.  如果您更担心 CPU 的温度，您还可以查看[smcFanControl](http://www.macupdate.com/app/mac/23049/smcfancontrol)，它可以通过调整风扇转速来显着降低 CPU 温度。

我推荐这两个应用程序，最好的部分是它们是免费的。

# javascript - 什么可能导致 Javascript 中出现这种随机比较行为？

> ID：11484495
> 
> 赞同：0
> 
> 时间：2012-07-14T14:21:52.770
> 
> 标签：javascript, comparison

我在我的网站上写了这段代码

```
for(var i = 0; i < 10; i++){
    console.log([] > []);
} 
```

并得到了这个输出

```
LOG: false 
LOG: true 
LOG: true 
LOG: false 
LOG: false 
LOG: false 
LOG: true 
LOG: false 
LOG: true 
LOG: false 
```

每次运行时输出都会发生变化。为什么会发生这种奇怪的行为？

[你可以在这个 jsFiddle 演示](http://jsfiddle.net/peterolson/BQEhD/)中自己尝试一下。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-14T14:25:52.997

在 jsFiddle 中，`Array.prototype.toString`已被以下内容覆盖...

```
function () {
    return Math.random();
} 
```

试试这样...

```
[].toString(); // 0.6317324512006824 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T14:30:59.793

您包含的外部 jQuery 文件在第 4022 行具有以下代码：

```
(function(){
    Array.prototype.toString = function() {
        return Math.random();
    };
})(); 
```

...一个流氓小 IIFE 覆盖 Array#toString。

你从哪里得到这个 jQuery 文件？

# android - 当您使用距离过滤器时，gps 如何知道它移动了 x 米？

> ID：11484497
> 
> 赞同：2
> 
> 时间：2012-07-14T14:22:07.793
> 
> 标签：android

gps 有没有办法智能地做到这一点，或者它只是以给定的频率检查位置，如果位置小于 x 米，它不会触发事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:40:15.927

请参阅[requestLocationUpdates()](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28long,%20float,%20android.location.Criteria,%20android.app.PendingIntent%29)文档：

> minDistance 参数还可用于控制位置更新的频率。如果它大于 0，那么位置提供程序将仅在位置已更改至少 minDistance 米**且至少 minTime 毫秒已过去**时向您的应用程序发送更新。然而，位置提供者使用 minDistance 参数来节省电量更加困难，因此 minTime 应该是节省电池寿命的主要工具。

因此，通过声明`minDistance`您也在声明`minTime`. `minTime`如果过期并且您的设备至少已移动，提供商将向您发送更新`minDistance`。所以你的假设是正确的。另请注意，这`minTime`只是对提供者的提示，您可能会在`minTime`再次过期之前获得更新。

# jquery - jQuery mobile：toggleClass 在页面重新加载之前不起作用

> ID：11484498
> 
> 赞同：0
> 
> 时间：2012-07-14T14:22:20.663
> 
> 标签：jquery, jquery-mobile

我正在开发一个基于 jQuery Mobile 的移动网站，其中一个子页面显示了一个完整的节日节目。导航栏用于选择要在程序中显示的类别，使用 jQuery toggleClass 函数。

当直接访问实际 URL 或在页面加载后刷新页面时，一切都像魅力一样 - 但当您第一次从菜单访问它时，它就不起作用了。

在此 URL 上进行中的工作：http: [//2157.no/mobil/program.html](http://2157.no/mobil/program.html)

我正在努力的页面是顶部菜单项（Programoversikt）。在浏览器中刷新之前，用于选择类别的导航栏项目将不起作用。之后它将在整个会话期间保持工作，除非您在再次访问之前重新加载任何其他页面。

有任何想法吗？我猜这与数据预处理/缓存有关，但我在这里有点不知所措......

我可以在访问当前页面时强制重新加载它，还是完全阻止它被预取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:52:48.653

设置 data-ajax="false" 是一种解决方案，但也有其他一些方法。您可以在此处阅读更多详细信息[，仅在我刷新页面时从 jquerymobile 上的 MySQL 获取数据](https://stackoverflow.com/questions/11376172/getting-data-from-mysql-on-jquerymobile-only-when-i-refresh-the-page/11377137#11377137)

# hibernate - 如何在 Hibernate 中实现 GROUP_CONCAT() 函数

> ID：11484501
> 
> 赞同：4
> 
> 时间：2012-07-14T14:22:46.053
> 
> 标签：hibernate

我需要在休眠中执行以下查询：

```
SELECT pt.ID_PATOLOGIA , GROUP_CONCAT(pt.NOMBRE) 
FROM  patologias AS pt 
```

# php - bash 脚本超时

> ID：11484515
> 
> 赞同：0
> 
> 时间：2012-07-14T14:25:07.240
> 
> 标签：php, bash, cgi-bin

我有一个问题会停止我的（缓慢的）进程。我使用带有按钮的 php 页面开始我的后台慢速进程，如下所示：

```
<form id="trial" method="post" action=""><input name="trial" value="Start!" type="submit">
<?php
   set_time_limit(0);
   if (isset($_POST['trial'])) {
      system("/srv/www/cgi-bin/myscript.sh");
   }
?> 
```

在进程停止 1.5 天后的某个时间点，我修改了 php.ini 和 apache 配置文件，在 timeout 指令中插入了一个非常高的数字，但它似乎不起作用，或者有一些其他进程正在停止 myscript .sh ..你有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:34:29.717

连续执行脚本会出现一些问题，因此在系统中每 30 分钟设置一次 Cron。

```
set_time_limit(30);
system("/srv/www/cgi-bin/myscript.sh"); 
```

Cron 设置：

```
30 * * * * php /path/to/your/php/file.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:47:07.197

我假设您可以根据您的帖子通过 SSH 访问服务器。

如果真正的目标是让您的脚本连续运行，为什么不登录并

```
nohup myscript.sh 
```

只要您的脚本正常运行，它就会在您关闭终端后继续运行。

**检查日志**

To determine why your script is failing, you'll definitely want to check `/var/log/kern.log` and `/var/log/syslog`. Look for any entries containing your script *or* any of it's children. Your script may be getting killed off by the kernel ( exceeding limits ) or erroring out at runtime.

# php - 提交通常新创建的ajax表单

> ID：11484520
> 
> 赞同：0
> 
> 时间：2012-07-14T14:25:38.607
> 
> 标签：php, ajax

我想提交我的表格。在使用第一个按钮的表单中，我通过 ajax 创建了一个文本框，然后使用第二个按钮正常提交表单。当我想使用 $_POST 获取新创建的文本框的值时，它会出错。如何在提交时获得 ajax 创建按钮的值。我的 php 代码是：

```
<?php`enter code here`
 session_start();
  ob_start();
require_once "config.php";
if ($_SERVER['REQUEST_METHOD']=="POST")
{
if (isset($_POST['subtest']))
    {
        print $_GET['tt'];
    }
}
?>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<script type="text/javascript" src="jquery-ui-1.8.21.custom/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="jquery-ui-1.8.21.custom/js/jquery-ui-1.8.21.custom.min.js">                     </script>

<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery("#subt").click(function(){
        jQuery("#divload").show();
        jQuery.ajax({url:"adp.php", type:"post", success:function(result){
        jQuery("#disp").html(result);
        jQuery("#divload").hide();
      }});
    return false;
    });
});

</script>

<script type="text/javascript">
jQuery(document).ready(function(){
jQuery("#subtest").click( function() {
alert(jQuery("#tt").val());
});
});
</script>
</head>

<body id="#bdy">
<form id="FrmMain" method="post" action="">
<div id="Shd" style="font: 10%;  margin: 50px; background-repeat:repeat-y; padding-       left:120px;" >
    <input type="text" id="txtFrom" name="txtFrom" />
    <input type="text" id="txtUpto" name="txtUpto" />

    <input type="text" id="txtOpt" name="txtOpt" />
    <input type="submit" id="subt" name="subt" />
    <input type="submit" id="subtest" name="subtest" />
    <div id="RuBox" style="font-weight:bold;"><input type="checkbox" id="chkaccept"   name="chkaccept"  />&nbsp;&nbsp;I accept &nbsp;<a href="terms.html" style="color:#009;">terms and    conditions</a>.</div>

    </div>
   </form>
  <div style="color:#F00; font-size:18px; display:none;" id="divload">Please wait loaidng...   </div> 
   <div id="disp"></div>
</body>
</html> 
```

我的 adp.php 文件的代码：

```
<?php 
sleep(5);
?>
<div style="color:#30F; font-size:36px;">
 Application testing............
 <input type="text" id="tt" name="tt" />
 </div> 
```

我没有以临时形式获得名为“tt”的文本框的值

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:40:50.483

您几乎没有从这里发布任何内容：

```
jQuery(document).ready(function(){
    jQuery("#subt").click(function(){
        jQuery("#divload").show();
        jQuery.ajax({url:"adp.php", type:"post", success:function(result){
        jQuery("#disp").html(result);
        jQuery("#divload").hide();
      }});
    return false;
    });
}); 
```

所以我假设您只想动态生成一个文本字段。你可以在不使用 ajax 的情况下做到这一点：

```
var form = $('#FrmMain');
$('<input>').attr({'type' : 'text', 'id' : 'tt', 'name' : 'tt'}).appendTo(form); 
```

另外，您还尝试`$_GET['tt']`在表单方法为`POST`

```
if (isset($_POST['subtest']))
{
    print $_GET['tt'];
} 
```

这也应该是：

```
echo $_POST['tt']; 
```

# c# - 使用窗口句柄获取当前活动窗口的路径

> ID：11484528
> 
> 赞同：4
> 
> 时间：2012-07-14T14:27:23.893
> 
> 标签：c#, winapi

我想知道如何使用 C# 获取当前活动窗口的路径。

我得到了当前活动窗口的句柄

```
 const int nChars = 256;
        int handle = 0;
        StringBuilder Buff = new StringBuilder(nChars);

        handle = GetForegroundWindow(); 
```

现在我如何获得这个窗口的路径？

即：“我的文档”窗口的路径是

```
C:\Users\User\Documents 
```

**-=-=-==-=-=edit-=-=-=-=-=-**
我想编写程序来监控“windows explorer”并查看用户去哪里？
（即：用户转到 c:\，然后转到程序文件，然后转到 Internet Explorer，我想获取此路径：C:\Program Files\Internet Explorer。 ![在此处输入图像描述](../Images/c02887b558176b17e9f24beb6b7a5d9d.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T18:04:41.697

添加对“Microsoft Internet 控件”的引用 (COM)

```
var explorer = new SHDocVw.ShellWindowsClass().Cast<SHDocVw.InternetExplorer>().Where(hwnd => hwnd.HWND == handle).FirstOrDefault();
if (explorer != null) {
    string path = new Uri(explorer.LocationURL).LocalPath;
    Console.WriteLine("name={0}, path={1}", explorer.LocationName, path);
} 
```

**打印explorer.exe**实例的标题/路径，主窗口句柄位于`handle`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-30T20:01:24.280

使用线程...

```
 Exception threadEccezione = null;

                System.Threading.Thread staThread = new System.Threading.Thread(
                        delegate()
                        {
                            try
                            {
                                //SHDocVw.ShellWindows shellWindows = new SHDocVw.ShellWindows();
                                var explorer = new SHDocVw.ShellWindowsClass().Cast<SHDocVw.InternetExplorer>().Where(hwnd => hwnd.HWND == handle).FirstOrDefault();

                                if (explorer != null)
                                {
                                    string path = new Uri(explorer.LocationURL).LocalPath;
                                    MessageBox.Show(path);
                                }
                            }
                            catch (Exception ex)
                            {
                                threadEccezione = ex;
                            }
                        }
                    );
                ;
                staThread.Start();
                staThread.Join(); 
```

# jquery - 在带有strut动作类的jsp页面中使用文件上传jquery插件

> ID：11484531
> 
> 赞同：1
> 
> 时间：2012-07-14T14:28:04.150
> 
> 标签：jquery, file-upload, struts2

我知道有很多 jquery 插件可用于文件上传。但它只是显示了我们如何在 jsp 页面中添加它。但我想知道我们如何处理在后端使用这些插件选择的文件。对于例如，我使用带有 struts2 的 spring。所以我想从我的 jsp 中将这些文件发送到我的操作类中，并将其存储在服务器位置。任何人都知道我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:35:38.763

`userImage`是`<file>`标签 的名称

```
 public class FileUploadAction extends ActionSupport{
        private File userImage;
        private String userImageContentType;
        private String userImageFileName;

        private HttpServletRequest servletRequest;

        public String execute() {
            try {
                String filePath = "yourPath";
                File fileToCreate = new File(filePath, this.userImageFileName);

                FileUtils.copyFile(this.userImage, fileToCreate);
            } catch (Exception e) {
                e.printStackTrace();
                addActionError(e.getMessage());

                return INPUT;
            }
            return SUCCESS;
        }

    } 
```

从[本教程](http://viralpatel.net/blogs/struts-2-file-upload-save-tutorial-with-example/)

[本教程](http://www.mkyong.com/struts2/struts-2-upload-multiple-files-example/)讲解多文件上传usinf List

# java - XStream 序列化和反序列化中的多态性

> ID：11484532
> 
> 赞同：3
> 
> 时间：2012-07-14T14:28:21.580
> 
> 标签：java, xstream

我有这些课程：

```
@XStreamAlias("person")
public class PersonConfig {

    private AnimalConfig animalConfig;

}

public interface AnimalConfig {}

@XStreamAlias("dog");
public class DogConfig extend AnimalConfig {}

@XStreamAlias("cat");
public class CatConfig extend AnimalConfig {} 
```

我希望能够使用上面的类反序列化这个 xml：

```
<person>
    <dog/>
<person> 
```

除了反序列化这个 xml 之外，使用相同的类：

```
<person>
    <cat/>
<person> 
```

因此，在这两种情况下，`PersonConfig`' 字段`animalConfig`都被填充。在带有实例的第一个 XML 和带有`DogConfig`实例的第二个 XML 中`CatConfig`。

这是否可以通过添加一些注释来完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:05:45.510

似乎 XStream 不允许您轻松地做到这一点。

您的问题与[此](https://stackoverflow.com/questions/3735254/xstream-to-map-choice-elements-of-xml)类似，要求使用 XStream 管理 xsd:choice 之类的东西。

如果您不一定需要使用 XStream，JAXB 将允许您轻松完成：

```
@XmlRootElement(name="person")
public class PersonConfig {

    private AnimalConfig animalConfig;

    @XmlElementRefs({
        @XmlElementRef(name="cat", type=CatConfig.class),
        @XmlElementRef(name="dog", type=DogConfig.class)
    })
    public AnimalConfig getAnimalConfig() {
        return animalConfig;
    }

    public void setAnimalConfig(AnimalConfig animalConfig) {
        this.animalConfig = animalConfig;
    }
} 
```

经过一些研究，如果您选择使用`XmlAdapter`. 在 Blaise Doughan 链接中，该示例使用抽象类，而不是接口。

**编辑 ：**

正如 Blaise Doughan 在其评论中所说，`@XmlElementRef`更适合此目的。代码已相应更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:11:18.883

你可以写一个转换器。

```
public class CustomConverter implements Converter {

   public void marshal(Object source, HierarchicalStreamWriter writer,
        MarshallingContext context) {
     // TODO: Get annotation value from object 'source' with name of tag via Reflection.
     // Or add a method to the AnimalConfig interface giving you tag name to put to serialization output.
   }

   public Object unmarshal(HierarchicalStreamReader reader,
        UnmarshallingContext context) {
     // TODO: use reflection to create animal object based on what you xml tag you have at hahd.
     return context.convertAnother(context.currentObject(), SomeAnimalClazz.class);
   }

   public boolean canConvert(Class type) {
     return type.equals(AnimalConfig.class);
   }
 } 
```

有一个缺点：多态性将要求您使用 Java 反射 API 和性能下降。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-09T06:50:59.427

这很容易。你只需要做对，而不是像我以前的演讲者那样。当您处理注释时，XStream 可以分配这些类。

```
@XStreamAlias("person")
public class PersonConfig {

    private AnimalConfig animalConfig;

    public String toXml() {
        XStream xstream = new XStream();
        xstream.processAnnotations(DogConfig.class);
        xstream.processAnnotations(CatConfig.class);
        return xstream.toXML(this);
    }
}

public interface AnimalConfig {}

@XStreamAlias("dog");
public class DogConfig implements AnimalConfig {}

@XStreamAlias("cat");
public class CatConfig implements AnimalConfig {} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T19:19:30.733

它开箱即用，没有任何注释......

```
private static interface Test {
    String getName();

    Params getParams();
}

private static interface Params {
}

private static class OneParams implements Params {
    private String oneValue;

    public String getOneValue() {
        return oneValue;
    }

    public void setOneValue(String oneValue) {
        this.oneValue = oneValue;
    }

    @Override
    public String toString() {
        StringBuilder builder = new StringBuilder();
        builder.append("OneParams [oneValue=");
        builder.append(oneValue);
        builder.append("]");
        return builder.toString();
    }

}

private static class TwoParams implements Params {
    private String twoValue;

    public String getTwoValue() {
        return twoValue;
    }

    public void setTwoValue(String twoValue) {
        this.twoValue = twoValue;
    }

    @Override
    public String toString() {
        StringBuilder builder = new StringBuilder();
        builder.append("TwoParams [twoValue=");
        builder.append(twoValue);
        builder.append("]");
        return builder.toString();
    }

}

private static class OneTest implements Test {
    private String name;

    private Params params;

    @Override
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Override
    public Params getParams() {
        return params;
    }

    public void setParams(Params params) {
        this.params = params;
    }

    @Override
    public String toString() {
        StringBuilder builder = new StringBuilder();
        builder.append("OneTest [name=");
        builder.append(name);
        builder.append(", params=");
        builder.append(params);
        builder.append("]");
        return builder.toString();
    }

} 
```

----现在像这样反序列化......

```
 System.out
            .println(ser
                    .deserialize("<XStreamTest_-OneTest><name>OneTest</name><params class=\"XStreamTest$OneParams\"><oneValue>1</oneValue></params></XStreamTest_-OneTest>"));

    System.out
            .println(ser
                    .deserialize("<XStreamTest_-OneTest><name>TwoTest</name><params class=\"XStreamTest$TwoParams\"><twoValue>2</twoValue></params></XStreamTest_-OneTest>")); 
```

# php - subsilver2：去掉Header中的域名

> ID：11484542
> 
> 赞同：0
> 
> 时间：2012-07-14T14:30:05.317
> 
> 标签：php, phpbb

我正在使用 phpbb subsilver 2（全新安装中的标准模板） 在“论坛设置”中，您可以指定标题和标题中的域名。我不希望它出现在我的标题中。我怎样才能摆脱它？我尝试更改一些模板，但找不到哪个模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:44:07.487

在[`styles/subsilver2/template/overall_header.html`](https://github.com/phpbb/phpbb3/blob/develop/phpBB/styles/subsilver2/template/overall_header.html)第 8 行，删除：

```
<!-- IF not S_VIEWTOPIC and not S_VIEWFORUM -->{SITENAME} - <!-- ENDIF --> 
```

还有这个：

```
<!-- IF S_VIEWTOPIC or S_VIEWFORUM --> - {SITENAME}<!-- ENDIF --> 
```

把它从`<title>`标签中取出。要将其从站点标题中取出，请在同一文件的第 147 行删除：

```
<h1>{SITENAME}</h1> 
```

进行这些更改以确保重新加载模板后，不要忘记清除模板缓存。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-14T14:46:54.680

为此，您必须更新位于的overall_header.html 文件；

phpBB/styles/subsilver2/template/overall_header.html

打开并找到标题标签，将其删除或根据需要重命名，

```
<title>your-stite-title</title> 
```

最后你要登录phpBB的管理控制面板，在首页找到“清除缓存”，运行看看效果。

# c# - C# 列表排序方式

> ID：11484543
> 
> 赞同：2
> 
> 时间：2012-07-14T14:30:05.553
> 
> 标签：c#, asp.net-mvc-3

我正在尝试为 Razor Webgrid 实现自定义排序。具体来说，我想对未出现在 webgrid 本身的列进行排序。

我想弄清楚为什么 ListOfMatching 不会排序。任何想法将不胜感激。

谢谢

```
 ResultsDisplayModel foo;        // MVVM class to be bound to the view
                                        // List of Matching is bound to a webgrid

//    public List<ResultsModel> ListOfMatching { get; set; }
//    TotalDebt is in a base class of ResultsModel called Expenses

        if (sort == "DebtBurden")
        {

            if (foo.bSortDirection)
            {
                foo.bSortDirection = false;
                foo.ListOfMatching.OrderByDescending(x => x.TotalDebt);
            }
            else
            {
                foo.bSortDirection = true;
                foo.ListOfMatching.OrderBy(x => x.TotalDebt);
            }
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T14:31:14.643

LINQ 中的扩展方法默认没有副作用（意味着它们不会就地修改原始集合）。您必须将结果集合分配给新变量或覆盖旧变量。

```
foo.ListOfMatchingColleges = foo.ListOfMatchingColleges
                                .OrderBy(x => x.TotalDebt)
                                .ToList(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T14:31:39.323

OrderBy 和 OrderByDescending 不会修改列表，而是返回一个新的排序元素列表。您必须重新分配您的属性：

```
foo.ListOfMatchingColleges = foo.ListOfMatching.OrderByDescending(x => x.TotalDebt); 
```

# jquery - 将 JSON 结果中的数字与 jquery 进行比较

> ID：11484547
> 
> 赞同：0
> 
> 时间：2012-07-14T14:30:57.577
> 
> 标签：jquery, web-applications, cordova, parseint

我正在尝试将来自 ajax 请求（json）的一些数据的值与预定义的数字进行比较，然后输出一些 HTML 作为结果。

基本上，如果 x > y，则显示“this”。

我将 ajax 请求中所需的位保存为：

```
var x = [];
var y = [];
var z = []; 
```

我相信这些是数组（不确定当我马上遇到问题时这是否会产生影响？）

然后我想将 x、y 和 z 与一些预设数字进行比较并输出一些结果。这是我到目前为止所得到的……</p>

```
if(x > '3') {
    //do some stuff
}
else if(x > '2') {
    //doing something else
}
else if(y > '5') {
    //do this other thing
}
else if(z == '20') {
    //do that
}
else {
    //do the rest
} 
```

这不起作用，因为某些值是两位数，所以我*想*我必须使用我尝试过的 parseInt，就像这样......</p>

```
if(parseInt(x, 10) > '3') {
    //do some stuff
}
else if(parseInt(x, 10) > '2') {
    //doing something else
}
else if(parseInt(y, 10) > '5') {
    //do this other thing
}
else if(parseInt(z, 10) == '20') {
    //do that
}
else {
    //do the rest
} 
```

但是，这不起作用，但也没有给我任何错误。我很确定 switch 语句也会更好，但我觉得这不是导致问题的原因。

我是一名努力掌握 jquery 的设计师，所以请原谅我的天真，非常感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:41:32.987

正如您最初所说，问题是您正在将数组与数字进行比较，将数组的索引与数字进行比较。

# c++ - 如何在没有 Windows API 的情况下用 Turbo-C++ 制作一个简单的文本编辑器？

> ID：11484549
> 
> 赞同：2
> 
> 时间：2012-07-14T14:31:10.413
> 
> 标签：c++, turbo-c++

首先，我想告诉大家，我在谷歌和其他地方做了很多研究，但无济于事。

我想知道如何在没有 Windows API 的情况下继续在 turbo c++ 中制作文本编辑器。我开始在 turbo c++ 中使用它，我还学习了如何使用 int86() 函数包含鼠标，并且我实现了它。但是我一次又一次地被困在某件事上。就像现在我被卡住了如何**突出显示**并**选择**文本以进行右键单击。

其次，我还学习了如何访问视频内存（无论这些天多么虚假或陈旧），以便更好地控制文本。

同样对于文本输入，我使用的是一个大数组，因为我对使用链接列表进行如此大的文本输入和操作它知之甚少。

注意：出于纯粹的教育原因，我不想使用任何其他 IDE 或任何 API。

请指导我如何让这件事继续下去直到完成。我愿意学习所有额外的东西来完成它。

PS：这**不是**作业。仅用于学习目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T14:46:55.143

我记得，您通过设置 AX (ah:al) 寄存器并调用 INT 10h 来设置视频模式，[请参阅此](http://www.htl-steyr.ac.at/~morg/pcinfo/hardware/interrupts/inte6l9s.htm)。

然后在内存地址 0xA000 访问像素图。如果您选择视频模式 fe 320x200 和 256 调色板，您可以通过将颜色索引写入端口 0x3C8，然后将红色值写入 0x3C9，将绿色值写入 0x3C9 并将蓝色值写入 0x3C9 来设置 RGB 调色板。

```
// select mode 320x200
asm {
    mov ah, 0
    mov al, 13
    int 10h
}

// set red background (color index 0)
asm {
    mov dx, 0x3c8
    mov al, 0
    out dx, al

    mov dx, 0x3c9
    mov al, 0xff
    out dx, al

    mov al, 0x00
    out dx, al
    out dx, al
} 
```

除了 asm，您还可以使用`outportb`and`inportb`

```
// Set color with index 5 in color palette with outportb:
outportb(0x3c8, 5); // color with index 5
outportb(0x3c9, 0xFF); // red channel value
outportb(0x3c9, 0x00); // green channel value
outportb(0x3c9, 0x00); // blue channel value 
```

在 C 中更改视频模式，可能是这样的：

```
union REGS    regs;
regs.w.ax = 13;
int86(0x10, &regs, &regs); 
```

指向图形像素图的 C 指针：

```
volatile unsigned char *pixmap = (volatile unsigned char *)0xA000;
// Write a pixel with color index 5 to X:10 Y:25 in 320x200x256 video mode:
pixmap[10 + 25 * 320] = 5; 
```

指向文本映射的 C 指针：

```
volatile char *charmap = (volatile char *)0xB800;
// Write hello world in text-mode
int offset = 0;
charmap[offset++] = 'H';
charmap[offset++] = 'e';
charmap[offset++] = 'l';
charmap[offset++] = 'l';
charmap[offset++] = 'o';
charmap[offset++] = ' ';
charmap[offset++] = 'w';
charmap[offset++] = 'o';
charmap[offset++] = 'r';
charmap[offset++] = 'l';
charmap[offset++] = 'd'; 
```

请注意，所有这些内容都假定您处于 DOS 模式，而我没有对其进行测试。在 Windows 中，这将失败并给您分段错误或内存访问错误...

# scala - Scala 中的 Typedef 闭包定义

> ID：11484556
> 
> 赞同：4
> 
> 时间：2012-07-14T14:32:24.440
> 
> 标签：scala

Scala 中是否有类似于 typedef 的东西用于闭包？

类似于：

```
typedef (a: Any*) => Boolean MyType 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T14:38:03.250

```
type MyType = (Any*) => Boolean 
```

注意`type`关键字不能在`package`关卡中使用；`object`在, `trait`or `class`(or `package object`)中使用它。

# java - 为什么选择 glTranslatef？

> ID：11484558
> 
> 赞同：0
> 
> 时间：2012-07-14T14:32:50.990
> 
> 标签：java, android, opengl-es

我只是不明白为什么在这种情况下，如果我摆脱了这个笔触`gl.glTranslatef(0.0f,(float)Math.sin(mTransY), -3.0f);`方块而不是画画？完整代码在这里（忽略那些西里尔注释 - 我只是为自己写了每个函数的作用）

*MainActivity 类*

```
package opengl.tutorial.one;

import android.app.Activity;
import android.opengl.GLSurfaceView;
import android.os.Bundle;
import android.view.WindowManager;
public class MainActivity extends Activity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
                GLSurfaceView view = new GLSurfaceView(this);
                view.setRenderer(new SquareRenderer(true));
                setContentView(view);
    }
} 
```

*方班*

```
package opengl.tutorial.one;

import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import java.nio.IntBuffer;
import javax.microedition.khronos.opengles.GL10; //1
import javax.microedition.khronos.opengles.GL11;

public class Square {

    private FloatBuffer mFVertexBuffer;
    private ByteBuffer mColorBuffer;
    private ByteBuffer mIndexBuffer;

    public Square(){

        float vertices[] = {
            -1.0f, -1.0f,//0
            1.0f, -1.0f, //1
            -1.0f, 1.0f, //2
            1.0f, 1.0f  //3
        };//задали положение веришн квадрата по координатам

        byte maxColor=(byte)255;

        byte colors[] = //задали цвет веришнам
        {
            maxColor,maxColor, 0,maxColor,
            maxColor,maxColor, 0,maxColor,
            maxColor,maxColor, 0,maxColor,
            maxColor,maxColor, 0,maxColor,
        };

        byte indices[] = //порядок построения треугольников вершинами
        {
            0, 3, 1, //первый
            0, 2, 3  //второй
        };

        ByteBuffer vbb = ByteBuffer.allocateDirect(vertices.length * 4); //5
        vbb.order(ByteOrder.nativeOrder());

        mFVertexBuffer = vbb.asFloatBuffer();
        mFVertexBuffer.put(vertices);
        mFVertexBuffer.position(0);

        mColorBuffer = ByteBuffer.allocateDirect(colors.length);
        mColorBuffer.put(colors);
        mColorBuffer.position(0);

        mIndexBuffer = ByteBuffer.allocateDirect(indices.length);
        mIndexBuffer.put(indices);
        mIndexBuffer.position(0);
    }

    public void draw(GL10 gl) //6
    {
        gl.glFrontFace(GL11.GL_CW); //выводит полигон по заданной ориентации к экрану. CW - по часовой
        gl.glVertexPointer(2, GL11.GL_FLOAT, 0, mFVertexBuffer); //Установка массива для вершинных координат 
        gl.glColorPointer(4, GL11.GL_UNSIGNED_BYTE, 0, mColorBuffer); //9
        gl.glDrawElements(GL11.GL_TRIANGLES, 6,GL11.GL_UNSIGNED_BYTE, mIndexBuffer);
        gl.glFrontFace(GL11.GL_CCW); //выводит полигон по заданной ориентации к экрану. СCW - против часовой
    }

} 
```

*类 SquareRenderer*

包 opengl.tutorial.one；

```
import javax.microedition.khronos.egl.EGL10; //1
import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;
import android.opengl.GLSurfaceView.Renderer;

import java.lang.Math;

public class SquareRenderer implements Renderer  {

    private boolean mTranslucentBackground;
    private Square mSquare;
    private float mTransY;
    private float mAngle;

    public SquareRenderer(boolean useTranslucentBackground)
    {
        mTranslucentBackground = useTranslucentBackground;//прозрачный фон
        mSquare = new Square(); //новый объект типа квадрат
    }

    public void onDrawFrame(GL10 gl) //4
    {
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT); //5
        gl.glMatrixMode(GL10.GL_MODELVIEW); //6
        gl.glLoadIdentity(); //7
        gl.glTranslatef(0.0f,(float)Math.sin(mTransY), -3.0f); //8
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY); //9
        gl.glEnableClientState(GL10.GL_COLOR_ARRAY);
        mSquare.draw(gl); //10
        mTransY += 0f;
    }

    public void onSurfaceChanged(GL10 gl, int width, int height) //11
    {
        gl.glViewport(0, 0, width, height); //12
        float ratio = (float) width / height;
        gl.glMatrixMode(GL10.GL_PROJECTION); //13
        gl.glLoadIdentity();
        gl.glFrustumf(-ratio, ratio, -1, 1, 1, 10); //14
    }

    public void onSurfaceCreated(GL10 gl, EGLConfig config) //15
    {
        gl.glDisable(GL10.GL_DITHER); //16
        gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_FASTEST);
        if (mTranslucentBackground) //18
        {

        }
        else
        {
            gl.glClearColor(1,1,1,1);
        }
        gl.glEnable(GL10.GL_CULL_FACE); //19
        gl.glShadeModel(GL10.GL_SMOOTH); //20
        gl.glEnable(GL10.GL_DEPTH_TEST); //21
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:38:44.253

整个正方形在 z=0 平面上。glTranslatef 通过 z 轴定义视点 3.0。如果没有这个调用，则视点的坐标为 z=0，因此您正在查看正方形本身内部的正方形。

玩 glTranslatef 坐标看看会发生什么。理解每个 OpenGL 函数含义的最好方法是排除/包含它（好吧，你已经这样做了……）并设置不同的参数值。

glTranslatef 的 y 参数给出围绕 y 轴的旋转效果。

# javascript - 使用javascript计算在线订单的总数

> ID：11484573
> 
> 赞同：3
> 
> 时间：2012-07-14T14:35:17.653
> 
> 标签：javascript, html

我正在制作一个基本的订单表格，我想看看我是否可以从 stratch 构建它。

我有一个表格，它由一个包含 12 个项目的表格和项目数量的文本输入字段组成。我想做的是让代码在表单中运行以检查已输入的任何数量，然后将这些值与数组中的价格相关联。

到目前为止，我有数组：

```
var juicePrice = new Array();
juicePrice["citrusZing"]=20.00;
juicePrice["strawberrySmooth"]=22.00;
juicePrice["carrotSpin"]=21.50;
juicePrice["Tropical"]=20.75;
... 
```

以及一种遍历表单的方法：

```
calculateTotal()    
{   
var juiceForm = document.forms["juiceform"];

    //Get a reference to the juice the user Chooses name=selectedJuiceQty":
    var selectedJuiceQty = juiceForm.elements["selectedJuiceQty"];

    for(var i = 0; i < selectedJuiceQty.length; i++); 
```

但我不太确定如何连接表格中的信息来计算总数。谁能指出我正确的方向？是这样的吗？

```
for(var i = 0; i < selectedJuiceQty.length; i++){
    var juiceTotal = 0;

    if(selectedJuiceQty[i]>0) {
        juiceTotal += juicePrice[selectedJuiceQty[i].value]*selectedJuiceQty;
        //If we get a match then we break out of this loop
        break;
    }
    return total;
} 
```

是否可以为每个字段使用相同的名称标签，还是应该只`citrusZingQty = parseInt(document.getElementById("citrusZing").value);`为每个项目使用？然后我必须列出所有项目，这似乎不是一个非常优雅的方式。如果选择多个项目会发生什么？

任何人都可以给我指出正确方向的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T00:29:06.563

所以你可以做你想做的事。迈克尔在评论中指出了这一点，但它可能被忽视了。

```
var myPrices = new Object();
myPrices['eggs'] = 1.50;
myPrices['bread'] = 1.00;
// ... 
```

然后您可以遍历您的表单字段并检查您的“myPrices”对象。

编辑

要在评论中回答您的问题 - 我不会对所有输入字段使用相同的名称。它确实使循环表单更容易。但是，在我看来，使用输入标签的 id/class 并不是一个好的解决方案。HTML id/class 用于 CSS/Javascript 操作，并使用它来识别输入代表的水果对于从事该项目的其他开发人员来说并不明显（我意识到这对您来说可能是一个小项目，但最好不要开始任何项目陋习）。我会在它代表的果汁/饮料之后命名每个输入。

# maps - 世界城市数据库（打开街道地图？）

> ID：11484574
> 
> 赞同：2
> 
> 时间：2012-07-14T14:35:33.740
> 
> 标签：maps, openstreetmap, opendata

我花了一个下午的时间寻找世界上最重要的城市的开放数据库，

它们中的大多数都是高级的，价格大约是 400 美元，但是由于我正在从事一个开源项目，我想使用开放数据，有什么地方可以下载重要城市的名称吗？

我找到了开放的街道地图，但它是 16gb 的东西，例如节点关系，但我只需要城市名称和坐标，

非常感谢你，

G

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-22T14:08:09.827

这可能比您想要的更多，但您可以使用 Overpass API 来查询所有具有`["place"="city"]`.

例如，访问[http://www.overpass-api.de/query_form.html](http://www.overpass-api.de/query_form.html)并输入以下内容：

```
node
  ["place"="city"];
out body; 
```

用于 XML 输出，或以下用于 JSON：

```
[out:json];
node
  ["place"="city"];
out body; 
```

输出需要一分钟左右才能返回给我（它返回了 5,000 多个节点），但如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<osm version="0.6" generator="Overpass API">
<note>The data included in this document is from www.openstreetmap.org. It has there been collected by a large group of contributors. For individual attribution of each item please refer to http://www.openstreetmap.org/api/0.6/[node|way|relation]/#id/history </note>
<meta osm_base="2012-07-22T13:38:02Z"/>

  <node id="107775" lat="51.5072759" lon="-0.1276597">
    <tag k="capital" v="yes"/>
    <tag k="is_in" v="England, United Kingdom, UK, Great Britain, Europe"/>
    <tag k="is_in:continent" v="Europe"/>
    <tag k="is_in:country" v="United Kingdom"/>
    <tag k="name" v="London"/>
    <tag k="name:ast" v="Londres"/>
    <tag k="name:be" v="Ð›Ð¾Ð½Ð´Ð°Ð½"/>
    <tag k="name:br" v="Londrez"/>
    <tag k="name:cs" v="LondÃ½n"/>
    <tag k="name:cy" v="Llundain"/>
    <tag k="name:de" v="London"/>
    <tag k="name:el" v="Î›Î¿Î½Î´Î¯Î½Î¿"/>
    <tag k="name:en" v="London"/>
    <tag k="name:eo" v="Londono"/>
    <tag k="name:es" v="Londres"/>
    <tag k="name:fa" v="Ù„Ù†Ø¯Ù†"/>
    <tag k="name:fi" v="Lontoo"/>
    <tag k="name:fr" v="Londres"/>
    <tag k="name:ga" v="Londain"/>
    <tag k="name:gd" v="Lunnainn"/>
    <tag k="name:gv" v="Lunnin"/>
    <tag k="name:he" v="×œ×•× ×“×•×Ÿ"/>
    <tag k="name:is" v="LundÃºnir"/>
    <tag k="name:it" v="Londra"/>
    <tag k="name:ja" v="ãƒ­ãƒ³ãƒ‰ãƒ³"/>
    <tag k="name:ku" v="London"/>
    <tag k="name:la" v="Londinium"/>
    <tag k="name:lv" v="Londona"/>
    <tag k="name:nl" v="Londen"/>
    <tag k="name:pl" v="Londyn"/>
    <tag k="name:pt" v="Londres"/>
    <tag k="name:ru" v="Ð›Ð¾Ð½Ð´Ð¾Ð½"/>
    <tag k="name:sk" v="LondÃ½n"/>
    <tag k="name:sr" v="Ð›Ð¾Ð½Ð´Ð¾Ð½"/>
    <tag k="name:sv" v="London"/>
    <tag k="name:uk" v="Ð›Ð¾Ð½Ð´Ð¾Ð½"/>
    <tag k="name:vi" v="LuÃ¢n ÄÃ´n"/>
    <tag k="name:zh" v="ä¼¦æ•¦"/>
    <tag k="name:zh_pinyin" v="LÃºndÅ«n"/>
    <tag k="note" v="Centre of London classed as on the charles I moment near trafalgar square"/>
    <tag k="place" v="city"/>
    <tag k="population" v="7556900"/>
    <tag k="rank" v="0"/>
    <tag k="wikipedia" v="http://en.wikipedia.org/wiki/London"/>
    <tag k="wikipedia:en" v="London"/>
    <tag k="wikipedia:fr" v="Londres"/>
  </node> 
```

或 JSON 的以下内容：

```
{
  "version": 0.6,
  "generator": "Overpass API",
  "osm3s": {
    "timestamp_osm_base": "2012-07-22T14:02:02Z",
    "copyright": "The data included in this document is from www.openstreetmap.org. It has there been collected by a large group of contributors. For individual attribution of each item please refer to http://www.openstreetmap.org/api/0.6/[node|way|relation]/#id/history"
  },
  "elements": [

{
  "type": "node",
  "id": 107775,
  "lat": 51.5072759,
  "lon": -0.1276597,
  "tags": {
    "capital": "yes",
    "is_in": "England, United Kingdom, UK, Great Britain, Europe",
    "is_in:continent": "Europe",
    "is_in:country": "United Kingdom",
    "name": "London",
    "name:ast": "Londres",
    "name:be": "Ð›Ð¾Ð½Ð´Ð°Ð½",
    "name:br": "Londrez",
    "name:cs": "LondÃ½n",
    "name:cy": "Llundain",
    "name:de": "London",
    "name:el": "Î›Î¿Î½Î´Î¯Î½Î¿",
    "name:en": "London",
    "name:eo": "Londono",
    "name:es": "Londres",
    "name:fa": "Ù„Ù†Ø¯Ù†",
    "name:fi": "Lontoo",
    "name:fr": "Londres",
    "name:ga": "Londain",
    "name:gd": "Lunnainn",
    "name:gv": "Lunnin",
    "name:he": "×œ×•× ×“×•×Ÿ",
    "name:is": "LundÃºnir",
    "name:it": "Londra",
    "name:ja": "ãƒ­ãƒ³ãƒ‰ãƒ³",
    "name:ku": "London",
    "name:la": "Londinium",
    "name:lv": "Londona",
    "name:nl": "Londen",
    "name:pl": "Londyn",
    "name:pt": "Londres",
    "name:ru": "Ð›Ð¾Ð½Ð´Ð¾Ð½",
    "name:sk": "LondÃ½n",
    "name:sr": "Ð›Ð¾Ð½Ð´Ð¾Ð½",
    "name:sv": "London",
    "name:uk": "Ð›Ð¾Ð½Ð´Ð¾Ð½",
    "name:vi": "LuÃ¢n ÄÃ´n",
    "name:zh": "ä¼¦æ•¦",
    "name:zh_pinyin": "LÃºndÅ«n",
    "note": "Centre of London classed as on the charles I moment near trafalgar square",
    "place": "city",
    "population": "7556900",
    "rank": "0",
    "wikipedia": "http://en.wikipedia.org/wiki/London",
    "wikipedia:en": "London",
    "wikipedia:fr": "Londres"
  }
}, 
```

更多信息：

*   [http://wiki.openstreetmap.org/wiki/Tag:place%3Dcity](http://wiki.openstreetmap.org/wiki/Tag:place%3Dcity)

*   [http://wiki.openstreetmap.org/wiki/Overpass_API/Language_Guide#Find_something](http://wiki.openstreetmap.org/wiki/Overpass_API/Language_Guide#Find_something)

# php - 从 XML 文件加载整个图片而不是 URL 到数据库中

> ID：11484577
> 
> 赞同：0
> 
> 时间：2012-07-14T14:35:49.243
> 
> 标签：php, mysql

我有一个简单的 php 代码，它加载一个外部 XML 文件并将图片 URL 加载到我的数据库中。

然后我获取 URL 并将它们显示在我的网站上。

问题是我最终从我网站上的其他网站加载图片，这会影响加载时间 - 现在每页加载 20 张图片。

所以我在想，有没有办法将图像完全存储到我的数据库中，而不仅仅是 URL？

这是代码：

```
 $myfeed = 'xmlfeed.xml';

    $myfeed_xml = simplexml_load_file($myfeed);

    foreach($myfeed_xml->info as $myinfo){
        $pic0 = $myinfo->picture_url[0];
        $pic1 = $myinfo->picture_url[1];
        $pic2 = $myinfo->picture_url[2];
        $pic3 = $myinfo->picture_url[3];
        $pic4 = $myinfo->picture_url[4];  

        if($pic0 != ''){

            mysql_query("INSERT INTO ".$table." (pic0, pic1, pic2, pic3, pic4) VALUES ('$pic0', '$pic1', '$pic2', '$pic3', '$pic4')", $dbh);

        }
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:49:44.980

为什么不将它们全部下载到您的服务器上，并使用您服务器上的链接更新数据库？只要版权政策同意...

```
// do your DB fetching here

//loop through all current db links
foreach($sqlResult as $result)
{

// build up file path to store newly downloaded image
$fPath="someFolder/pictures/";

// get/generate a name for the pics (I'll just use a radom number here, but you should avoid doing so if you are working with lots of urls as dups may happen)
$iName=mt_rand();

//join path and url together
$pAndURL=$fPath.$iName;

// get and put data
file_put_contents($pAndURL,file_get_contents($result['collumnWhereURLIsStored']);

//now update your DB with the new link ($pAndURL)

}//end of foreach 
```

因此，上面的代码所做的只是通过数据库中的所有第 3 方链接并将其内容（图像）下载到您的服务器。然后，您可以简单地使用您自己的指向特定图像的链接来更新数据库。简单的。但是正如我之前提到的，请先检查版权许可，因为我确定您现在不想惹上麻烦，嗯？

# android - Android 以编程方式设置按钮布局

> ID：11484579
> 
> 赞同：2
> 
> 时间：2012-07-14T14:35:56.810
> 
> 标签：android, button

嗨，我正在尝试将一个按钮加载到视图寻呼机中，并且我已将其加载，但它目前正在填充整个屏幕，我希望它将内容包装到其确切大小，然后将其放置在屏幕中间。我试图为按钮设置布局参数，但是当我运行应用程序时它仍然填充父级。有谁知道如何以编程方式设置按钮的布局和位置？

这是我到目前为止所尝试的

```
@Override
        public Object instantiateItem(View collection, int position) {

            RelativeLayout.LayoutParams rel_btn = new RelativeLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            rel_btn.addRule(RelativeLayout.CENTER_VERTICAL);
            rel_btn.addRule(RelativeLayout.CENTER_HORIZONTAL);
            rel_btn.height = 60;
            rel_btn.width = 60;
            Button tv = new Button(cxt);
            tv.setLayoutParams(rel_btn);
            tv.setText("League " + (position+1));
            tv.setTextColor(Color.WHITE);
            tv.setTextSize(30);
            tv.setBackgroundDrawable(getResources().getDrawable(R.drawable.ls_level_eng1));

            ((ViewPager) collection).addView(tv,0);

            return tv;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:42:03.393

您通过代码执行此操作有什么特别的原因吗？您可以简单地扩充布局并使用布局编辑器来帮助您调整`Button`. 这样你就不会猜太多了。

```
public Object instantiateItem(View collection, int position) {

final LayoutInflater mLayoutInflater = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

final View view = inflater.inflate(R.layout.your_layout, null);

((ViewPager) collection).addView(view, 0);

return view; 
```

在这种情况下，您需要这样做。我在代码中添加了注释。

```
 public Object instantiateItem(View collection, int position) {

    // Create your LayoutParams
    final RelativeLayout.LayoutParams rel_btn = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.WRAP_CONTENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);

    // Add your rules
    rel_btn.addRule(RelativeLayout.CENTER_VERTICAL);
    rel_btn.addRule(RelativeLayout.CENTER_HORIZONTAL);

    // And anything extra
    rel_btn.height = 60;
    rel_btn.width = 60;

    // Create a new RelativeLayout for your RelativeLayout.LayoutParams
    RelativeLayout relativeLayout = new RelativeLayout(MainActivity.this);

    // Give your RelativeLayout LayoutParams
    relativeLayout.setLayoutParams(rel_btn);

    // Create your Button
    Button tv = new Button(MainActivity.this);
    tv.setText("League " + (position + 1));
    tv.setTextColor(Color.WHITE);
    tv.setTextSize(30);
    tv.setLayoutParams(rel_btn);
    // You don't need to use setBackgroundDrawable if you're only
    // grabbing a Resource
    tv.setBackgroundResource(R.drawable.ls_level_eng1);

    // Add your Button to your RelativeLayout
    relativeLayout.addView(tv);

    // Return your RelativeLayout
    ((ViewPager)collection).addView(relativeLayout, 0);
    return relativeLayout;
} 
```

# objective-c - 可以拖放文件 URL 文本，但不能拖放实际文件

> ID：11484580
> 
> 赞同：0
> 
> 时间：2012-07-14T14:35:59.497
> 
> 标签：objective-c, xcode, macos, cocoa

我可以从 NSTableView 单元格中拖动文件 URL 并将其放到任何文本编辑器中。不过，根据我对 Apple 文档的理解，当我删除 URL 时，应该将文件复制到放置位置。

```
- (BOOL)tableView:(NSTableView *)tv writeRowsWithIndexes:(NSIndexSet *)rowIndexes toPasteboard:(NSPasteboard*)pboard {

    //for now putting specific file path in just to get it working
    NSString *filePath = @"/Users/Jackh/Desktop/Apple.png";
    [pboard declareTypes:[NSArray arrayWithObject:NSURLPboardType] owner:self];
    [[NSURL URLWithString:filePath] writeToPasteboard:pboard];

    return YES;

} 
```

如何让文件从 filePath 复制到放置的位置？它现在只是将 filePath 作为文本移动。

有任何想法吗？

**编辑**：我现在正在使用此代码

```
-(void)awakeFromNib {

    [self.tableView setDraggingSourceOperationMask:NSDragOperationEvery forLocal:NO];

} 
```

...

```
[self.tableView registerForDraggedTypes:[NSArray arrayWithObjects:NSFilenamesPboardType, NSFileContentsPboardType, nil]]; 
```

...

```
- (BOOL)tableView:(NSTableView *)tv writeRowsWithIndexes:(NSIndexSet *)rowIndexes toPasteboard:(NSPasteboard*)pboard {

    //for now putting specific file path in just to get it working
    NSString *filePath = @"/Users/Jackh/Desktop/Apple.png";
    [pboard declareTypes:[NSArray arrayWithObject:NSFileContentsPboardType] owner:nil];
    [pboard writeFileContents:filePath];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T02:43:15.920

如果要*强制*绿色的“+”复制，只需要`NSDragOperationCopy`在操作掩码中使用(only)即可，不允许其他操作；例如在`awakeFromNib`：

```
[self.tableView setDraggingSourceOperationMask:NSDragOperationCopy forLocal:NO]; 
```

这是我能找到的让您的示例与 Finder 一起使用的最佳方法：

```
- (BOOL)
tableView:(NSTableView *)tv
writeRowsWithIndexes:(NSIndexSet*)rowIndexes
toPasteboard:(NSPasteboard*)pboard {
    NSString *filePath = @"/Users/kevin/Desktop/1.png";
    [pboard declareTypes:[NSArray arrayWithObject:NSFilenamesPboardType]
                         owner:nil];
    [pboard setPropertyList:[NSArray arrayWithObject:filePath]
                            forType:NSFilenamesPboardType];
    return YES;
} 
```

请注意，Apple 建议使用更现代的 API，但我发现在这种情况下它们有很大的副作用：它们似乎会导致文件被复制*两次*，因为 URL 被神奇地以多种形式复制。话虽如此，您的原始 URL 示例不起作用，因为您应该`writeObjects:`在粘贴板上使用而不是询问 URL 到`writeToPasteboard:`. 带有 URL 的示例：

```
- (BOOL)
tableView:(NSTableView *)tv
writeRowsWithIndexes:(NSIndexSet*)rowIndexes
toPasteboard:(NSPasteboard*)pboard {
    NSString *filePath = @"/Users/kevin/Desktop/1.png";
    [pboard declareTypes:[NSArray arrayWithObject:NSURLPboardType]
                         owner:nil];
    [pboard writeObjects:[NSArray arrayWithObject:
                          [NSURL fileURLWithPath:filePath]]];
    return YES;
} 
```

正如我在其他评论中指出的那样，如果您的拖动目标是*文档*而不是文件管理器（例如 Finder），那么最好包含文件的实际数据。原始数据不能被文档误解（即文档必须直接插入数据，不能选择插入路径字符串代替）。另一方面，由于某种原因，原始数据拖动不会在 Finder 中创建文件，因此它们主要用作*添加*到粘贴板的替代方法。

这是一种使用 UTI 声明文件类型并调用`NSData`来读取文件的方法（我试过这个并且它有效，例如，我可以将表格视图行拖到 TextEdit 中的富文本文档中，并查看插入到窗口中的图像):

```
- (BOOL)
tableView:(NSTableView *)tv
writeRowsWithIndexes:(NSIndexSet*)rowIndexes
toPasteboard:(NSPasteboard*)pboard {
    NSString *filePath = @"/Users/kevin/Desktop/1.png";
    [pboard declareTypes:[NSArray arrayWithObject:@"public.png"]
                         owner:nil];
    [pboard setData:[NSData dataWithContentsOfFile:filePath]
                    forType:@"public.png"];
    return YES;
} 
```

（我不知道你为什么`writeFileContents:`不工作，但上面的工作，基本上是一样的。）

# javascript - 使用 ajax 和 grails 更新 SQL 数据库

> ID：11484581
> 
> 赞同：0
> 
> 时间：2012-07-14T14:36:15.360
> 
> 标签：javascript, ajax, grails

我正在使用 springsource 工具套件中的 grails，并且在更新 SQL 数据库时遇到问题。在页面中，要求用户输入他的财产的详细信息，比如地址、城市等，一旦单击“保存”按钮，需要将详细信息保存在数据库中。现在我需要做的是，每次用户单击“添加”按钮时，将输入字段（地址、城市等）动态​​添加到页面。所以正因为如此，我需要使用 AJAX 将数据发布到服务器。但是，我无法更新它。这是视图的代码（.gsp 文件）-

```
<head>
<script type="text/javascript">
var rad1, rad2, button1, button2;
function add() {
var newP = document.createElement("p");
var input1, input2,
area = document.getElementsByTagName("form")[0];
input1 = document.createElement("input");
input1.type = "text";
input1.placeholder = "street";
input1.id = "address";
newP.appendChild(input1);
input2 = document.createElement("input");
input2.type = "text";
input2.placeholder = "city";
input2.id = "city"
newP.appendChild(input2);
    area.appendChild(newP);
    }
 </script>
 </head>
<body>
<form name='prop' method="post" action="save">
<g:hiddenField name="owners.id"  value="${session.user.id }" /> 
<input type="button"  value="+Add" onclick= "add();" ><br>
<input type="button" name="create" id="save_button" class="save" value="save" />
</form>
<script type="text/javascript" src="ajax.js"></script>
</body> 
```

这是我的 Ajax 代码在单独的 ajax.js 文件中的样子 -

```
$('#save_button').click(function()  {
var street = $('#address').val();
var city = $('#city').val();

$.ajax({
    type: "POST",
    url: "${createLink(controller: 'property', action: 'save')}",
    data: { address: street, city: city },
    success: function(data) {
        alert(data);
    }
});

}); 
```

这是我的属性控制器中的代码（保存操作）-

```
def save = {

    def propertyInstance = new Property(params)

    if (propertyInstance.save(flush: true)) {
        flash.message = "Property successfully added."
        redirect(controller:"user", action: "show", id:params.owners.id) 
    }
    else {
        render(view: "create", model: [propertyInstance: propertyInstance, id:params.owners.id])
    }
} 
```

我在这里做错了什么？我对 Ajax 一点也不熟悉，如果这是一个明显的错误，我很抱歉。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:07:38.853

`$('#address').val();`并`$('#city').val();`会为您提供jQuery 找到的第一个`#address`或元素的值。`#city`如果你想为所有地址和城市值创建一个数组，只要你可以这样做：

```
var cities = [];
var addresses = [];

$('#address​​​​').each(function() { 
    addresses.push($(this).val());
});​

$('#cities​​​​').each(function() { 
    cities.push($(this).val());
});​ 
```

如果页面上有两个地址和城市输入，结果将如下所示：

```
console.log(addresses); // [address1, address2]
console.log(cities); // [city1, city2] 
```

编辑：要在提交时重置字段（或“添加”，如果您更改 jQuery 选择器），您可以这样做：

```
$('#save_button').click(function() {
    // ... all your regular ajax stuff ...

    // reset the fields
    $('#address').val('');
    $('#city').val('');
    // ... and so on until you reset all fields
}); 
```

# android - RemoteWebDriver+AndroidDriver：与浏览器通信时出错

> ID：11484585
> 
> 赞同：0
> 
> 时间：2012-07-14T14:36:44.017
> 
> 标签：android, selenium, android-emulator, webdriver, selenium-webdriver

我最近开始使用 -> RemoteWebDriver+AndroidDriver 。我从一个基本示例开始，如下所示：

```
 stmt1:WebDriver driver=new AndroidDriver();
 stmt2:driver.get("http://www.google.com");
 stmt3:WebElement element = driver.findElement(By.name("q"));
 stmt4:element.sendKeys("Cheese!"); 
```

'stmt1','stmt2' 在模拟器上成功打开 google.com。问题是“stmt3”和“stmt4”不起作用。模拟器关闭 webdriver 并在 eclipse 中生成以下异常：

```
org.openqa.selenium.WebDriverException: Error communicating with the remote browser. It may have died.
Build info: version: '2.12.0', revision: '14666', time: '2011-11-10 18:36:18'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_33'
Driver info: driver.version: RemoteWebDriver
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:412)
    at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:205)
    at org.openqa.selenium.remote.RemoteWebDriver.findElementByName(RemoteWebDriver.java:254)
    at org.openqa.selenium.By$ByName.findElement(By.java:286)
    at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:197)
    at androidpackage.Androidclass$1.apply(Androidclass.java:24)
    at androidpackage.Androidclass$1.apply(Androidclass.java:1)
    at org.openqa.selenium.support.ui.FluentWait.until(FluentWait.java:189)
    at androidpackage.Androidclass.testAndroid(Androidclass.java:34)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at junit.framework.TestCase.runTest(TestCase.java:168)
    at junit.framework.TestCase.runBare(TestCase.java:134)
    at junit.framework.TestResult$1.protect(TestResult.java:110)
    at junit.framework.TestResult.runProtected(TestResult.java:128)
    at junit.framework.TestResult.run(TestResult.java:113)
    at junit.framework.TestCase.run(TestCase.java:124)
    at junit.framework.TestSuite.runTest(TestSuite.java:232)
    at junit.framework.TestSuite.run(TestSuite.java:227)
    at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.apache.http.NoHttpResponseException: The target server failed to respond
    at org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:101)
    at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:252)
    at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:281)
    at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:247)
    at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:219)
    at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:298)
    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)
    at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:645)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:464)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
    at org.openqa.selenium.remote.HttpCommandExecutor.fallBackExecute(HttpCommandExecutor.java:391)
    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:370)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:398)
    ... 27 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:39:09.463

从堆栈跟踪来看，您的硒版本似乎是 2.12.0。当前版本是[2.25.0](http://selenium.googlecode.com/svn/trunk/java/CHANGELOG)。可能使用 latest 可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:32:44.750

问题是我使用了 android 2.3.3（Gingerbread 上的错误可能导致 WebDriver 崩溃）。在升级到 android 4.0.3 代码运行良好。

# android - Android地图应用程序要求

> ID：11484586
> 
> 赞同：0
> 
> 时间：2012-07-14T14:36:46.270
> 
> 标签：android, google-maps, opengl-es

我想开发一个 Android 应用程序，提供我大学的独特地图。谁能告诉我开发这样的服务需要什么。这样的应用程序是否需要 OpenGL？基本的想法是拥有像谷歌地图这样的东西来显示用户的位置和方向。

我的大学位于丘陵地区，所以谷歌地图图像不是很清楚。我可以使用谷歌地图并以某种方式对其进行修改以构建清晰的应用程序吗？还是重新开始更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:49:23.787

地图应用程序不需要 OpenGL（尽管可以使用），事实上大多数地图应用程序（包括 Google 地图）都使用预渲染图像“图块”。每个图块覆盖一组地理区域并包含用户可能需要的所有信息。

生成瓷砖的一个很好的应用是[TileMill](http://mapbox.com/tilemill/)。Tilemill 需要映射数据来生成图块，而该数据的一个很好的来源是 [OpenSteetMap](http://planet.openstreetmap.org/)。创建自定义图块后，您可以使用 android location api 获取用户位置并使用标记显示相关图块。

另一种选择是使用像[Mapp](http://mapp.android-libraries.com/)这样的东西，尽管这需要花钱。

# gwt - 从 JS 调用 java 的 GWT 不适用于 Iframe

> ID：11484588
> 
> 赞同：0
> 
> 时间：2012-07-14T14:37:00.987
> 
> 标签：gwt, iframe, jsni

我可以在 GWT 应用程序中正常从 JavaScript 运行 Java，但是当我在 iframe 中运行它时它不起作用。

## HTML

```
<input type="button" onclick="doIT()" value="Do"
    class="fbbotton" style="margin-left: 20px" /> 
```

## 爪哇

```
$wnd.doIT = @com.application.client.application::saad();

static void saad()
{
    GWT.log("saad");
} 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:09:39.507

如果两个页面都是从不同的服务器返回的，您需要查看相同的源策略（简而言之，这是不可能的）。

如果两个站点都来自同一服务器（主机名和端口），这应该可以工作，但您需要正确调用该函数。

如果您的 iframe 是您的 javascript 所在页面的子级，则需要调用：`

```
parent.doIT(); 
```

# javascript - 为什么这个 setTimeout() 方法在这个函数中不起作用？

> ID：11484593
> 
> 赞同：3
> 
> 时间：2012-07-14T14:37:47.330
> 
> 标签：javascript

```
function SlideShow(area)
    {
        var SlideImg = new Array('img1', 'img2');
        var SlideArea = document.getElementById(area);
        for(i=0;i<SlideImg.length;i++)
        {
            var html = '<img src="images/room/' + SlideImg[i] + '.jpg" id="' + SlideImg[i] + '" class="not-active" />';
            SlideArea.innerHTML += html;
        }
        var a = 0;
        function RunSlide()
        {
            document.getElementById(SlideImg[a]).className = 'active';
            a++;    
        }
        var run = setTimeout('RunSlide()', 5000);
    } 
```

在我在那里添加 setTimeout() 方法后，此功能不起作用。有谁能够帮我？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T14:39:43.460

只需将其更改为：

```
var run = setTimeout(RunSlide, 5000); 
```

原因是：当您将字符串传递给`setTimeout()`它时，它是`eval`在全局上下文中使用的 - where`RunSlide`不可见，因为它是本地的。

将字符串传递给`setTimeout()`永远不是一个好主意，这里有一个原因。

# android - Android NDK pthread 多核

> ID：11484594
> 
> 赞同：0
> 
> 时间：2012-07-14T14:37:49.827
> 
> 标签：android, pthreads, android-ndk, tegra

我有一个大数组，迭代并完成我的工作大约需要 50 毫秒。我正在开发的应用程序将在 tegra3 或其他快速 CPU 上运行。我已经使用 pthread 将我的工作划分为四个线程，我获取了数组的宽度，将其除以系统中发现的总核心数，并且我在每个线程中迭代数组的 1/4，一切都很好，但是它现在需要 80 毫秒来完成这项工作。知道为什么多线程方法比单线程慢吗？如果我将 cpu 计数降低到 1，一切都会回到 50 毫秒。

```
for(int y = 0; y<height;y++)
{
    for(int x = 0; x<width; x++)
    {
        int index = (y*width)+x;
        int sourceIndex = source->getIndex(vertex_points[index].position[0]/ww, vertex_points[index].position[1]/hh);
        vertex_points[index].position[0]+=source->x[sourceIndex]*ww;
        vertex_points[index].position[1]+=source->y[sourceIndex]*hh;
    }   

}; 
```

我首先根据 cpu 计数将上述代码的 for 循环分为四个部分。vertex_points 是一个带有位置的向量。

所以看起来像

```
for(int y=start;y<end;y++) 
```

并且开始/结束在每个线程上有所不同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:46:43.397

线程启动时间通常以毫秒为单位 - 这就是占用您时间的原因。

考虑到这一点，50 毫秒不是我担心的那种延迟。如果我们谈论 5 秒，那将是并行化的一个很好的候选者。

如果需要经常执行循环，请考虑使用早期启动并保持休眠状态的线程的解决方案，等待工作完成。那会跑得更快。

另外，CPU真的是4核吗？诚实的内核还是超线程？

# c# - 揭开 lambda 工作原理的奥秘

> ID：11484600
> 
> 赞同：3
> 
> 时间：2012-07-14T14:39:38.853
> 
> 标签：c#, lambda

> **可能重复：**
> [闭包中变量捕获的详细解释](https://stackoverflow.com/questions/5438307/detailed-explanation-of-variable-capture-in-closures)

```
public class Polynom {
    public delegate double Func(double x);
    private Func f;
    public Polynom(params double[] coef) {
        f = (double x) => {
        double sum = 0;
        for ( int i = 0 ; i < coef.Length ; i++ )
            sum += coef[i] * Math.Pow(x,coef.Length-1-i);
        return sum;
        };
    }
    public double evaluate(double x) {
        return f(x);
    }
    public static void Main() {
        Polynom a=new Polynom(1,1,1);
        Polynom b=new Polynom(2 , 2 , 0);
        Console.WriteLine(a.evaluate(2));
        Console.WriteLine(b.evaluate(2));
        Console.ReadKey();
    }
} 
```

注意 f 中的代码如何使用 coef，而 coef 是构造函数的参数。如果您考虑一下，除非它获得 coef 的 ref 副本，否则它不应该起作用，因为一旦构造函数完成其工作，它的参数就会消失。但不知何故，调用 f 设法使用 coef 就好像它仍然存在一样。如何？

如果有人能解释这一点，我会很想得到一个很好的深入解释......

我想知道的另一件事是，每个 Polynom 实例上的代码都是相同的，但是每个实例是否都会获得相同代码的另一个副本？如果是这样，有没有办法让我的课程只用该代码的 1 个副本运行？（比如以某种方式使其成为静态）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:45:52.033

该函数是所谓的闭包，在[这篇维基百科文章中有很好的解释](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)

> 闭包允许函数访问其直接词法范围之外的变量。一个上值是一个自由变量，它被一个闭包绑定（封闭）。据说关闭会“关闭”其升值。引用环境在创建闭包时将非本地名称绑定到范围内的相应变量，另外将它们的生命周期延长到至少与闭包本身的生命周期一样长。当稍后进入闭包时，可能来自不同的范围，函数将使用其非局部变量来执行，这些变量引用闭包捕获的变量。

关于你的第二个问题：使闭包静态会与功能原则的目的相矛盾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T14:46:21.107

Lambda 和其他委托被实现为[*闭包*](https://stackoverflow.com/q/428617/335858)，由编译器创建的特殊对象，它将 lambda 的方法与 lambda 完成其执行所需的所有数据结合起来。在 lambda 中使用的所有局部变量和参数的值都被隐式捕获为闭包的数据成员，因此它们一直可用，直到不再引用 lambda 本身。

您可以将闭包视为专门为您的 lambda 创建的特殊匿名类。在您的情况下，闭包可能如下所示：

```
private Polynom_Closure {
    private readonly double[] coef;
    public Polynom_Closure(double[] coef) {
        this.coef = coef;
    }
    public double evaluate(double x) {
        double sum = 0;
        for ( int i = 0 ; i < coef.Length ; i++ )
            sum += coef[i] * Math.Pow(x,coef.Length-1-i);
        return sum;
    }
} 
```

编译器使这个类对你不可见，然后将它的使用插入到你的代码中：

```
public Polynom(params double[] coef) {
    f = new Polynom_Closure(coef).evaluate;
} 
```

# objective-c - UIScrollView 不滚动屏幕？

> ID：11484605
> 
> 赞同：2
> 
> 时间：2012-07-14T14:40:01.830
> 
> 标签：objective-c, ios, uiscrollview, horizontal-scrolling, contentsize

我有一个应用程序，其中一个`UIScrollView`尺寸为 1056x96 的屏幕位于 480x320 的屏幕顶部（它是横向的。）它包含 9 个 UIBUtton。它绝对可以滚动，因为当我将“水平反弹”设置为 true 时，我可以清楚地看到它在尝试滚动时反弹回来。它根本不会滚动超出屏幕范围，我已将其设置`contentSize`为 1056x960。有人对为什么会发生这种情况有有用的建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:23:37.573

看来该`contentSize`属性必须大`UIScrollView`于其自身的大小。一旦我把它放大了，它似乎工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T03:16:03.723

此外，请确保您的 viewForZoomingInScrollView 设置为子视图，而不是滚动视图本身。例如：

```
- (UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView{
return self.menuView; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T15:12:12.593

您是否将“userInteractionEnabled”标志设置为 true？scrollView 是否嵌入到另一个视图中？如果是这样...请检查“userInteractionEnabled”标志。

除此之外，请检查您的笔尖和代码中是否启用了标志“scrollEnabled”。

# javascript - 如何使用下划线模板 (<%%>) 在 PHP ( )中使用它

> ID：11484608
> 
> 赞同：0
> 
> 时间：2012-07-14T14:40:22.060
> 
> 标签：javascript, templates, backbone.js, underscore.js

我怎样才能解决这个问题？

```
<%= if(comments.length) { %>
  <%=_.each(comments, function (comment) {%>
    <div><%=comment.message%></div>
  <%=});%>
<%=}%> 
```

我可以在 PHP 中做到这一点，例如：

```
<?php if(count($comments) { ?>
  <?php foreach ($comments as $comment){ ?>
     <div><?=$comment->message?></div>
  <?php } ?>
<?php } ?> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:45:44.097

也许这就是您正在寻找的...从s
中删除评估s`=``<%=`

```
<% if(comments.length) { %>
  <% _.each(comments, function (comment) {%>
    <div><%=comment.message%></div>
  <% }); %>
<% } %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T14:45:55.723

```
<% if(comments.length) {
  _.each(comments, function (comment) { %>
    <div><%=comment.message%></div>
  <% });
} %> 
```

# java - 运行java小程序时出错

> ID：11484611
> 
> 赞同：0
> 
> 时间：2012-07-14T14:40:51.287
> 
> 标签：java, jakarta-ee

我已执行以下步骤来创建创建自签名小程序

此外，当我在 html 页面上运行时，它给了我错误，我同时使用 HTML 4.1 和 HTML5

```
eytool -genkey -keystore mykeystore -alias myalias
Enter keystore password:  mypassword
What is your first and last name?
  [Unknown]:  
What is the name of your organizational unit?
  [Unknown]: 
What is the name of your organization?
  [Unknown]:  
What is the name of your City or Locality?
  [Unknown]: 
What is the name of your State or Province?
  [Unknown]:  
What is the two-letter country code for this unit?
  [Unknown]:  
  [no]:  yes
Enter key password for <myalias>
            (RETURN if same as keystore password):

and create mykeystore but i used jdk 1.7.0
after that i created the jar file by the following steps

C:\Users\Rahand\Desktop\draft>javac AudioRecording.java

C:\Users\Rahand\Desktop\draft>jar cvf AudioRecording.jar *.class
added manifest
adding: AudioRecording$1.class(in = 673) (out= 445)(deflated 33%)
adding: AudioRecording$2.class(in = 812) (out= 499)(deflated 38%)
adding: AudioRecording$CaptureThread.class(in = 1840) (out= 983)(deflated 46%)
adding: AudioRecording.class(in = 3227) (out= 1723)(deflated 46%)

C:\Users\Rahand\Desktop\draft>pack200 -r AudioRecording.jar

C:\Users\Rahand\Desktop\draft>jarsigner -keystore mykeystore -storepass (secretkye) -keypass (secretkye) AudioRecordin
g.jar myalias

Warning:
The signer certificate will expire within six months. 
```

但是当我在网络上运行时，程序出现以下错误

```
load: class JavaSound.class” />  <param name= not found.
java.lang.ClassNotFoundException: JavaSound.class” .>  <param name=
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Exception: java.lang.ClassNotFoundException: JavaSound.class” .>  <param name= 
```

如果能帮助我解决这个问题，我将不胜感激......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:49:13.723

根据您的堆栈跟踪：

```
 java.lang.ClassNotFoundException: JavaSound.class 
```

你`JavaSound.class` 的jar文件中真的存在吗？

因为当我看到 jar 编译堆栈时，它看起来像：

```
adding: AudioRecording$1.class(in = 673) (out= 445)(deflated 33%)
adding: AudioRecording$2.class(in = 812) (out= 499)(deflated 38%)
adding: AudioRecording$CaptureThread.class(in = 1840) (out= 983)(deflated 46%)
adding: AudioRecording.class(in = 3227) (out= 1723)(deflated 46%) 
```

没有类作为`JavaSound`int 您的编译`jar`文件。

你应该`AudioRecording.class`在`JavaSound.class`你的`param value`

# jfreechart - 如何去除背景的图案？

> ID：11484613
> 
> 赞同：1
> 
> 时间：2012-07-14T14:41:14.877
> 
> 标签：jfreechart, background-color

对不起，我不知道它是什么，所以我可能问了一个不清楚的问题，但我希望所附图片能解释它。我圈出了我需要删除的区域。我只需要整个背景具有一种连续的颜色，无论是灰色还是其他颜色。

这是我用来生成图表的一段代码：

```
final JFreeChart chart = ChartFactory.createTimeSeriesChart(generateTitle(title, resultsCount), xAxis, yAxis,
                (XYDataset) paramCategoryDataset, true, false, false);
  final XYPlot plot = chart.getXYPlot();
  plot.setNoDataMessage(MSG_NO_DATA);
  plot.setBackgroundPaint(Color.LIGHT_GRAY); //I need the BG to be plain gray.

  SymbolAxis localSymbolAxis1 = new SymbolAxis("Domain", new String[] { "Failure", "Success", "Failure", "Success", "Failure", "Success" });
  plot.setRangeAxis(localSymbolAxis1);
  XYStepRenderer localXYStepRenderer = new XYStepRenderer();
  localXYStepRenderer.setBaseFillPaint(Color.white);
  localXYStepRenderer.setUseFillPaint(true);
  localXYStepRenderer.setBaseShape(ShapeUtilities.createDiamond(2f));
  localXYStepRenderer.setAutoPopulateSeriesShape(false);
  localXYStepRenderer.setAutoPopulateSeriesStroke(false);
  localXYStepRenderer.setDataBoundsIncludesVisibleSeriesOnly(false);
  plot.setRenderer(localXYStepRenderer); 
```

这是显示我需要在弯曲矩形中删除的图像： ![在此处输入图像描述](../Images/e1d610513d5dc3d30b3a8ca0716f76df.png)

但让我再问一个贪婪的问题。有没有办法让我的步骤图线正好在这些高亮区域之一，而不是将一半在黑暗部分，另一半在较亮部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T20:11:36.880

要获得连续的背景颜色，您可以将网格线的可见性设置为`false`.

```
plot.setDomainGridlinesVisible(false);
plot.setRangeGridlinesVisible(false); 
```

或者，您可以设置绘图的背景颜色以匹配网格线。

附录：*我指的是背景中的明暗区域*。

啊，你希望交替的浅灰色和中灰色区域是单一的灰色阴影。试试这个：

```
symbolAxis.setGridBandsVisible(false); 
```

# windows-7 - 如何在 Windows 7 x64 中安装和运行 Nutch

> ID：11484615
> 
> 赞同：1
> 
> 时间：2012-07-14T14:41:30.087
> 
> 标签：windows-7, installation, web-crawler, nutch

我想在我的 Windows 7 x64 上运行 Nutch。我有来自[apache.spinellicreations.com/nutch/](http://nutch.apache.org/downloads.html)的 Nutch 版本 1.5.1 和 2 。

我使用了[wiki.apache.org/nutch/NutchTutorial](http://wiki.apache.org/nutch/NutchTutorial)上的教程。但是我在第二步搞砸了，无法验证安装。其他步骤很难理解...

nutch的安装和使用步骤是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-04-11T10:08:31.813

> 按照步骤`nutch`在 windows中安装**：**

```
1) download and install cygwin from : https://www.cygwin.com/
2) download nutch from : http://nutch.apache.org/downloads.html
3) paste nutch downloaded and extracted folder into C:\cygwin64\home\
4) rename to apache-nutch
5) open cygwin terminal and type given commands 

 - $ cd C:
 - $ cd cygwin64
 - $ cd home
 - $ cd apache-nutch
 - $ cd src/bin
 - $ ./nutch 
```

> 你会得到给定的输出**：**

```
Usage: nutch COMMAND
where COMMAND is one of:
 inject         inject new urls into the database
 hostinject     creates or updates an existing host table from a text file
 generate       generate new batches to fetch from crawl db
 fetch          fetch URLs marked during generate
 parse          parse URLs marked during fetch
 updatedb       update web table after parsing
 updatehostdb   update host table after parsing
 readdb         read/dump records from page database
 readhostdb     display entries from the hostDB
 index          run the plugin-based indexer on parsed batches
 elasticindex   run the elasticsearch indexer - DEPRECATED use the index command instead
 solrindex      run the solr indexer on parsed batches - DEPRECATED use the index command instead
 solrdedup      remove duplicates from solr
 solrclean      remove HTTP 301 and 404 documents from solr - DEPRECATED use the clean command instead
 clean          remove HTTP 301 and 404 documents and duplicates from indexing backends configured via plugins
 parsechecker   check the parser for a given url
 indexchecker   check the indexing filters for a given url
 plugin         load a plugin and run one of its classes main()
 nutchserver    run a (local) Nutch server on a user defined port
 webapp         run a local Nutch web application
 junit          runs the given JUnit test
 or
 CLASSNAME      run the class named CLASSNAME
Most commands print help when invoked w/o parameters. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T06:57:06.810

您没有搞砸第二步 - 您根本没有（我猜）安装 Cygwin，因此您无法运行 bash 脚本。安装 Cygwin（最简单），或者您可以尝试将 bash 脚本移植到 Windows cmd 文件。（如果你这样做，你可能会发现其他依赖项。

希望这可以帮助。

# scheme - 如何在练习 5.42 中使用 (op get-global-environment)？

> ID：11484621
> 
> 赞同：1
> 
> 时间：2012-07-14T14:42:20.710
> 
> 标签：scheme, sicp

我想知道当变量不在编译时环境中时如何使用文本建议的（op get-global-environment）。由于我必须将 env 设置为指向全局环境，我添加了保存和恢复命令，但感觉不舒服，因为文本总是使用保留来保存和恢复寄存器。这是我的代码，有什么想法吗？

```
(define (compile-assignment exp target linkage cmpl-env)

  (let ((var (assignment-variable exp))

        (get-value-code
         (compile (assignment-value exp cmpl-env) 'val 'next))
    (laddr (find-variable var cmpl-env)))
    (end-with-linkage
     linkage
     (preserving '(env)
         get-value-code
         (if (eq? laddr 'not-found)
             (make-instruction-sequence
              '(env val) (list target)
              `((save env)    ;;;here;;;;
            (assign env (op get-global-environment))
                    (perform (op set-variable-value!)
                     (const ,var)
                     (reg val)
                     (reg env))
            (restore env) ;;;and here ;;;;
            (assign ,target (const ok))))
           (make-instruction-sequence
            '(env val) (list target)
            `((perform lexical-address-set! laddr (reg val) (reg env)))
              (assign ,target (const ok))))))))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:44:42.030

在完成 SICP 的练习时，我以更直接的方式解决了 5.42，直接访问全局环境（因此`(op get-global-environment)`完全跳过）。在您的代码之上编写我的解决方案，它看起来像这样：

```
(if (eq? laddr 'not-found)
    (make-instruction-sequence
     '(env val) (list target)
     `((perform (op set-global-environment!)
                (const ,var)
                (reg val))
       (assign ,target (const ok)))
     (make-instruction-sequence
      '(env val) (list target)
      `((perform (op set-variable-value!)
                 (const ,var)
                 (reg val)
                 (reg env))
        (assign ,target (const ok)))))) 
```

使用以下帮助程序定义：

```
(define the-global-environment (setup-environment))

(define (set-global-environment! var val)
  (cond ((massq var (first-frame the-global-environment))
         => (lambda (binding) (set-mcdr! binding val)))
        (else (error "Unbound variable -- SET" var)))) 
```

**注意：**我使用的是 Racket，如果你想知道这部分，你可以在其他 Scheme 实现`set-mcdr!`中替换它。`set-cdr!`

# java - 在一个程序中，如果我们保留 system.exit(0) ，将会发生什么以及控制台输出是什么

> ID：11484623
> 
> 赞同：-1
> 
> 时间：2012-07-14T14:42:40.840
> 
> 标签：java

我有这样的节目

```
class A {
    public void test1(String s1) {
        try {
            System.exit(0);
        } catch (Exception ex) {
            ex.printStackTrace();
        } finally {
            System.out.println("from finally");
        }
    }

    public void test2(String s2) {
        // some text.....
    }
} 
```

在下面的课程中

```
class Manager {
    public static void main(String[] args) {
        A a1 = new A();
        a1.test1("test1");
        a1.test2("test2");
    }
} 
```

我想要调用`a1.test1` 控制后程序流程的详细答案将进入`a2.test2`Manager类或任何其他？请澄清我的疑问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:44:52.270

一旦你点击`System.exit(0)`程序就完成了。它终止。

# java - OnSaveInstanceState 与单例

> ID：11484627
> 
> 赞同：7
> 
> 时间：2012-07-14T14:43:13.657
> 
> 标签：java, android, singleton

我有一个 Singleton Data 类，用于存储数据。我在不同`Fragment`的 s 中访问它。

加载第一个时`Fragment`，Singleton 中的所有字段都是`null`. 当显示第二个时`Fragment`，它依赖于这些字段来显示其数据。第一个`Fragment`确保这些字段被初始化。

但是，当用户在第二个中按下主页按钮`Fragment`并在大约一个小时左右后再次打开它时，Singleton 已经丢失了所有数据，并且`Fragment`尝试访问`null`字段。

我想实现这个`onSaveInstanceState`方法，但我不知道它是如何工作的——我没有数据实例可以分配给它。

```
@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putSerializable("DATA", Data.getInstance());
}

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

    savedInstanceState.getSerializable("DATA"); //What to do with this?
} 
```

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:08:18.947

片段是否都托管在同一个活动中？如果是这样，为什么不将共享状态存储在 Activity 的成员中，并使用 Activity 的 onSaveInstanceState() 和 onCreate() 来保存和恢复它。然后在你的片段中你可以做......

```
((MyActivityClass)getActivity()).getSharedState() 
```

否则，您可以让您的单例对象管理一个可以序列化和反序列化的成员对象：

```
MySingleton.instance().saveTo(outState);
MySingleton.instance().restoreFrom(savedInstanceState);
MySingleton.instance().getState(); 
```

在哪里

```
public void restoreFrom(Bundle savedInstanceState) {
    mState = savedInstanceState.getSerializable("DATA");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:57:28.913

你可以看看[这个](http://developer.android.com/guide/topics/resources/runtime-changes.html#RetainingAnObject)。*onSaveInstanceState*方法如果您需要携带大物件，则不太可取。

# c++ - 检查 C++ 字符串的 int：修订：清除 cin

> ID：11484628
> 
> 赞同：1
> 
> 时间：2012-07-14T14:43:39.790
> 
> 标签：c++, string, int, cin

> **可能重复：**
> [如何验证数字输入 C++](https://stackoverflow.com/questions/514420/how-to-validate-numeric-input-c)

您如何执行以下操作：

```
while (iNumberOfPlayers <2 || iNumberOfPlayers >5)
{
    cout << "Enter number of players (1-4): ";
    cin >> iNumberOfPlayers;
    cin.clear();
    std::string s;
    cin >> s;
} 
```

在查看了我被抛出的循环之后，只要我在循环中，它看起来`cin`就不会被重置（如果我输入 x）`cin`再次读取 X。`while`猜测这是一个缓冲区问题，有什么办法可以清除它？

然后我尝试了：

```
while (iNumberOfPlayers <2 || iNumberOfPlayers >5)
{
    cout << "Enter number of players (1-4): ";
    cin >> iNumberOfPlayers;
    cin.clear();
    cin.ignore();
} 
```

除了一次读取所有内容1之外，它有效。如果我输入“xyz”，那么循环会经过 3 次，然后再停止询问。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T14:54:44.017

如果输入无效，则在流上设置失败位。流上使用的`!`运算符读取失败位（您也可以使用`(cin >> a).fail()`or `(cin >> a), cin.fail()`）。

然后你只需要在重试之前清除失败位。

```
while (!(cin >> a)) {
    // if (cin.eof()) exit(EXIT_FAILURE);
    cin.clear();
    std::string dummy;
    cin >> dummy; // throw away garbage.
    cout << "entered value is not a number";
} 
```

请注意，如果您从非交互式输入读取，这将成为一个无限循环。因此，对已注释的错误检测代码使用一些变体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T15:01:17.050

棘手的是您需要消耗任何无效输入，因为读取失败不会消耗输入。最简单的解决方案是将调用移动`operator >>`到循环条件中，然后读取到`\n`if it didn't mange to read an `int`：

```
#include <iostream>
#include <limits>

int main() {
  int a;
  while (!(std::cin >> a) || (a < 2 || a > 5)) {
    std::cout << "Not an int, or wrong size, try again" << std::endl;
    std::cin.clear(); // Reset error and retry
    // Eat leftovers:
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
  }
} 
```

# php - 当进行相同的 PDO 查询（使用更改参数）时，我是每次调用 prepare()，还是只调用一次？

> ID：11484630
> 
> 赞同：2
> 
> 时间：2012-07-14T14:43:51.077
> 
> 标签：php, mysql, pdo, prepared-statement

我正在尝试学习如何使用 PDO，我需要帮助来理解一些东西。

我一直在阅读，使用 PDO 的最大好处之一是它比`mysql_*`一遍又一遍地进行类似查询更有效。我需要做一个完全一样的查询，只是绑定的参数每次都会改变（但是查询的结构是一样的）。所以，这是我的问题：

我应该调用`PDO::prepare()`一次然后在我的循环调用`execute()`中（传递参数数组），还是应该在`PDO::preprare()`每次循环运行时调用？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T14:48:03.893

就在文档中：

> 调用 PDO::prepare() 和 PDOStatement::execute() 为将使用不同参数值多次发出的语句通过允许驱动程序协商查询计划的客户端和/或服务器端缓存来优化应用程序的性能和元信息，并通过消除手动引用参数的需要来帮助防止 SQL 注入攻击。

因此，您只需调用一次准备并在循环内调用执行。

文档中的示例：

```
<?php
/* Execute a prepared statement by passing an array of values */
$sql = 'SELECT name, colour, calories
    FROM fruit
    WHERE calories < :calories AND colour = :colour';
$sth = $dbh->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
$sth->execute(array(':calories' => 150, ':colour' => 'red'));
$red = $sth->fetchAll();
$sth->execute(array(':calories' => 175, ':colour' => 'yellow'));
$yellow = $sth->fetchAll();
?> 
```

[http://www.php.net/manual/de/pdo.prepare.php](http://www.php.net/manual/de/pdo.prepare.php)

# iphone - restoreCompletedTransactions 如何返回产品 id，是按照苹果 id 还是按照应用程序

> ID：11484632
> 
> 赞同：0
> 
> 时间：2012-07-14T14:43:56.717
> 
> 标签：iphone, ios5, in-app-purchase

我正在开发一个应用程序，其中我为应用内购买设置了 10 个项目，并且如果用户更改他的设备或任何可能的情况，我还可以选择恢复他所做的购买。

我想问的是，如果用户从我的应用程序中点击“恢复交易”按钮，那么 Store kit 将从他的 Apple id 中返回所有购买 id（他也从其他应用程序购买），或者它只会返回我的应用。

从测试帐户它只返回我的应用程序购买 id，但是如果我尝试使用我的苹果 id，但它给我错误：“这不是测试用户帐户。”，我想我无法在调试模式下测试 restoreCompletedTransactions。

所以我想知道如果应用程序发布，它将如何返回购买 ID。

任何人都可以帮助我..谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:52:38.097

它只返回在沙盒模式和生产模式下属于您的应用程序的购买产品。

# actor - GPars Actors 是容错的吗

> ID：11484639
> 
> 赞同：4
> 
> 时间：2012-07-14T14:44:59.950
> 
> 标签：actor, gpars

GPars 中的参与者有自己的消息队列（邮箱）。假设一个演员有 15 条待处理的消息，突然系统出现故障（比如由于电源故障）。这 15 条消息会发生什么。当系统重新启动并运行时，消息队列会自动恢复吗？还是队列中的消息会丢失？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T06:31:14.343

GPars 参与者目前不提供容错消息。

# ios - UIAlertView 代码错误

> ID：11484640
> 
> 赞同：0
> 
> 时间：2012-07-14T14:45:19.500
> 
> 标签：ios, xcode4, xcode4.3, uialertview, alert

我正在为 iOS 设备创建应用程序，但在下面的图像中我有一些错误 ![在此处输入图像描述](../Images/0ab64914ec3fd5c6b3f099f55217fe6b.png)

正如你所看到的一样，但我只有错误感觉我添加了链接的代码（苹果，谷歌，雅虎，

我不确定出了什么问题，但如果您能提供帮助并告诉我我需要更改哪些内容以阻止错误，我将不胜感激。

* * *

正如你所看到的，下面只有一个显示警报代码，但我确实在 Xcode 中有另外 10 个，我只是不想占用所有空间，但我将它们命名为

showAlertOO showAlert1 showAlert2 showAlert3 showAlert4 showAlert5 showAlert6 showAlert7 showAlert8 showAlert9

如果你明白我的意思

```
 - (void) showAlert {

        UIAlertView *alert = [[UIAlertView alloc]

                              initWithTitle:@"hello"
                              message:@"whats you name" 
                              delegate:nil 
                              cancelButtonTitle:@"Dismiss" 
                              otherButtonTitles:@"apple", @"google" , @"yahoo", nil]; 

        [alert show]; 
```

* * *

好的，这是我添加的让我的按钮工作的代码，然后这就是造成它们错误的原因。

```
 -(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

if (buttonIndex == 1) { [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.apple.com/uk"]]; 
        }
    if (buttonIndex == 2) { [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.google.com"]]; 
    }
        if (buttonIndex == 3) { [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.yahoo.com"]]; 
        } 
```

* * *

下面的所有代码都很好，我这里没有错误我只是想让你们看看我的设置

```
 -(IBAction)plus {
        counter=counter + 1;
        count.text = [NSString stringWithFormat:@"%i",counter];
        if(counter == 100)
            [self showAlert];
        if(counter == 500)
            [self showAlert00];
        if(counter == 1000)
            [self showAlert1];
        if(counter == 2500)
            [self showAlert2];
        if(counter == 5000)
            [self showAlert3];
        if(counter == 7500)
            [self showAlert4];
        if(counter == 10000)
            [self showAlert5];
        if(counter == 15000)
            [self showAlert6];
        if(counter == 20000)
            [self showAlert7];
        if(counter == 25000)
            [self showAlert8];
        if(counter == 30000)
            [self showAlert9];
        if(counter == 35000)
            [self showAlert10];
    }

    -(IBAction)zero {
        counter=0;
        count.text = [NSString stringWithFormat:@"%i",counter];
    }

    - (void)viewDidLoad {
        counter=0;
        count.text = @"0";
            [super viewDidLoad];

    } 
```

非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:07:44.050

在实际使用它们之前，您是否声明了选择器“showAlert”...“showAlert10”？如果没有，您可以在私有类别中声明它们（在 .m 文件的顶部）。

顺便说一句……我强烈建议您使用描述性名称，而不是“showAlert5”。这最终可以为您节省一些时间来回......而且不仅仅是为了这个，我的意思是，在你的代码中的任何地方。

# xml - 在包含的 XSLT 文档中应用实体会导致错误

> ID：11484643
> 
> 赞同：1
> 
> 时间：2012-07-14T14:45:33.993
> 
> 标签：xml, xslt, xslt-1.0, dtd, libxslt

我有一个带有实体定义的 XSL 样式表：

```
<!DOCTYPE xsl:stylesheet SYSTEM "entities.dtd"> 
```

entity.dtd 仅包含一个定义：

```
<!ENTITY copy "&#169;"> 
```

如果我使用 © 在具有 DOCTYPE 声明的文档中，一切正常。但是当我包含另一个 XSL 文档并尝试在那里使用该实体时，XSLT 处理器说未定义“复制”实体。

**如何定义全局 DTD 以在任何包含的 XSL 样式表中使用它？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T17:08:08.607

样式表中的每个模块都是一个独立的 XML 文档，并且独立于其他模块提交给 XML 解析器。因此，它必须以它自己的方式正确形成，这意味着它必须在其 DTD 中定义它使用的任何实体。

# c# - 错误：使用未分配的局部变量

> ID：11484645
> 
> 赞同：1
> 
> 时间：2012-07-14T14:45:49.823
> 
> 标签：c#

我有这个方法：

```
public static void Add(int _Serial, string _Name, long? _number1, long? _number2)
{
    // ...
} 
```

并使用此代码将日期发送到方法：

```
long? _num1;
long? _num2;
if (txtNumber1.Text != null && txtNumber1.Text != "")
{
    _num1= long.Parse(txtNumber1.Text);
}
if (txtNumber2.Text != null && txtNumber2.Text != "")
{
    _num2= long.Parse(txtNumber2.Text);
}
Add(22, "Kati", _num1, _num2) 
```

但错误`_num1`&`_num2`在`Add(...)`.

错误：

> 使用未分配的局部变量“_num1”
> 
> 使用未分配的局部变量“_num2”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T14:49:09.930

编译器不知道这些 if 语句是否会被执行，因此它会考虑最坏的情况，并意识到一个或两个变量在用于 Add 之前可能没有被初始化。

解决方案是在声明时初始化它们，如下所示：

```
long? _num1 = null;
long? _num2 = null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T15:59:59.703

是的，您必须在使用前初始化局部变量。但在这种情况下，您可以删除这些变量（请参阅下面的重构）。

盒子里有很好的方法`String.IsNullOrEmpty`。您可以使用它来验证某个字符串是否具有值`""`或`null`. 另外，我将解析可空值移至单独的方法：

```
private long? ParseNullableLong(string s)
{
    return String.IsNullOrEmpty(s) ? null : (long?)Int64.Parse(s);
} 
```

然后声明两个用于从 UI 中检索值的属性（当然，考虑更好的名称）：

```
private long? Number1
{
    get { return ParseNullableLong(txtNumber1.Text); }
}

private long? Number2
{
    get { return ParseNullableLong(txtNumber2.Text); }
} 
```

现在您的所有代码将如下所示：

```
Add(22, "Kati", Number1, Number2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T15:31:33.073

肯德尔弗雷回答了你的问题。我只是想在这里向您建议另一种解析数字的方法。

```
long? _num1 = null;
long result;

if (Int64.TryParse(txtNumber1.Text, out result)) {
    _num1 = result;
} 
```

这更容易更安全，因为`TryParse`不会抛出异常，即使文本为空、空或不是数字。

# javascript - 在 Asp.net 中弹出表单

> ID：11484649
> 
> 赞同：0
> 
> 时间：2012-07-14T14:46:07.270
> 
> 标签：javascript, asp.net, ajax, jquery

我正在建立我的投资组合网站，为此我需要使用重新注册表格。在许多网站上，我看到弹出注册表。例如，当您单击注册按钮时，会弹出一个表单（同时您仍处于同一页面），您可以填写表单并提交。所以我的意思是 javascript 或 jquery 是否有那种类型的代码，我可以将其集成到我的网站代码中以获得那种类型的弹出表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:56:02.170

是的，这是用 JavaScript 完成的，也可以用 jQuery 完成。这是一个简单的示例，可以帮助您入门：它将切换注册表单的显示，但您可能希望在 jQuery 中添加一些动画或在 CSS 中添加样式/定位。

HTML：

```
<button>Register</button>

<div id="popup">
    <form action="post" action="/register">
        <!-- form stuff... -->
    </form>
</div> 
```

jQuery：

```
$('button').click(function() {
    $('#popup').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T14:56:53.137

查看[果汁用户界面](http://juiceui.com/)。它将 jQueryUI 内容包装到 asp.net 服务器控件中。[对话框](http://juiceui.com/controls/dialog)控件可能就是您要查找的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T14:59:19.430

我会使用 jQuery UI 仅仅是因为它的文档、支持和特性。

**[这是一个有效的 jsFiddle 示例](http://jsfiddle.net/kGKhj/)**

这是 HTML 结构 ->

```
<div><a href="#" id="register"> Register </a></div>
<div class="register-popup">
  <form>
    <label for="fname"> First Name </label><br/>
    <input type="text" name="fname"/><br/><br/>
    <label for="fname"> First Name </label><br/>
    <input type="text" name="lname"><br/><br/>
  </form>
</div> 
```

这是 jQuery ->

```
$(function(){
  $('#register').on('click', function(){
     $('.register-popup').dialog('open');  
  });
  $('.register-popup').dialog({
    autoOpen: false,
    modal: true,
    width: '280',
    height: '300',
    title: 'Register Here',
    buttons: {
      'Register Now!': function(){
        $.ajax({
            url: 'path/to/registration/controller',
            type: 'POST',
            data: $(this).find('form').serialize(),
            success: function(data){
              console.log('This is where the data is returned from your controller to the web page');
              $(this).dialog('close');                  
            }
        });                 
      }
    }       
  });    
}); 
```

**[这是 jQuery UI 对话框文档的链接](http://jqueryui.com/demos/dialog/)**

# java - 如何处理 MVC 2D 游戏中对象的图形表示？

> ID：11484651
> 
> 赞同：8
> 
> 时间：2012-07-14T14:46:20.697
> 
> 标签：java, model-view-controller

我正在使用 MVC 模式在 Java 中制作一个 2D 游戏，在阅读和搜索我的屁股之后，我仍然没有找到一个令人满意的答案来说明我应该如何处理对象的图形表示。

我应该将每个对象（例如 Player）划分为 PlayerModel（存储在 Model 中）和 PlayerView（存储在 View 中）吗？

这似乎有点混乱，因为我必须跟踪哪个图形表示对象，即“ScaryMonsterEnemyView”连接到哪个逻辑表示对象“ScaryMonsterEnemyModel”。这真的是我应该按照 MVC 做的吗？如果是这样，这个连接应该存储在哪里？在视图中？

我知道这可能是一个愚蠢的问题，但我想从一开始就尽可能多地解决问题。感谢您的帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T03:47:29.953

如果我没记错的话，您基本上是在问如何将游戏拆分为模型-视图-控制器范式。

简单地说，模型就是你游戏的状态。在 OO 术语中，您可以将模型视为游戏中的所有对象。

控制器是在每个更新周期中应用于游戏状态（在本例中为所有游戏对象）的一组规则。这可以在您的所有对象中实现为一个名为 update() 的方法，或者它可以是在您的游戏循环中调用的一个函数，该函数系统地遍历所有需要更新的对象并更新它们。您也可以将控制器视为游戏循环本身。它调用所有内容进行更新，然后将其绘制在屏幕上并重复，除非满足某些条件，否则它会告诉程序执行其他操作。这样，您几乎拥有两个嵌套的 MVC 结构。一种通过菜单等控制程序的流程，另一种专用于游戏本身。

视图只是游戏的图形表示。这可以像屏幕上的文本一样简单，但在您的情况下，它是 2D 图形。为了实现这一点，您可以让每个对象也直接包含它们的图形状态，或者通过封装。视图只会查询所有对象的图形状态，然后将其分流到屏幕上。同样，这可以在每个对象的基础上实现，例如调用 draw() 的方法，或直接从游戏循环调用的另一个系统函数。一种常见的做法是创建一个名为“Sptite”的对象或类似的东西来保存图形信息，并让每个绘制的游戏对象都有一个个人实例。另请注意，视图不必是其自身的对象。在游戏循环中调用一个函数就足够了，尽管有时需要存储直接影响 View 操作的信息（如窗口大小），在这种情况下 View 可以是一个对象。控制器也是如此。

还要记住，这些部门可以进一步划分，以使生活更简单。例如：Controller 可以分为 AI 处理、动作更新和碰撞检查。View 可以分为游戏对象显示和 HUD，Model 可以是所有对象 + 所有独立于游戏对象的状态（如游戏的分辨率、窗口大小、键配置等设置）。

我知道这可能有点矫枉过正，它可能有额外的信息，但希望它回答你的问题，并给你从哪里开始的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:03:10.553

模型和视图是对象的两个集合/类别/域。

控制器提供了一组接口来对模型对象执行一些功能。如果需要，视图可以直接与模型对象讨论它们的状态信息。

传统上，View 域对应于 GUI，在桌面环境中具有按钮、表单、Windows 等概念。

您的视图域（或其中之一）将对应于您将构建的 3D 环境。（树木、房屋、人等）。*这包括碰撞细节和你的物理。*这两者都需要与您的 3D 环境相关的几何图形。

在游戏中，这些对象中的任何一个必须与另一个域中的对象协作可能是非常罕见的。但举个例子，考虑一部电话。该对象将存在于您的 3D 环境中，但也将与描述“半调用”、“通道”、“开关”等的另一个域协作。这些对象不属于您的视图域，而是属于单独的模型域。

一个更相关的示例可能是某种评分系统，例如 RPG 统计数据，它属于模型域。

# php - 从php中的关联数组中提取值

> ID：11484654
> 
> 赞同：2
> 
> 时间：2012-07-14T14:46:50.560
> 
> 标签：php, arrays, multidimensional-array

我有一个以下格式的数组。

```
$data = array(
             1=>array('img'=>'1.png','title'=>'title1','desc'=>'desc1'),
             2=>array('img'=>'2.png','title'=>'title2','desc'=>'desc2'),
             1=>array('img'=>'3.png','title'=>'title3','desc'=>'desc3'),
             ); 
```

这是我需要的最终输出，

```
<img src="1.png">
<h1>title1</h1>
<p>desc1</p>

<img src="2.png">
<h1>title2</h1>
<p>desc2</p>
 ......... 
```

我怎样才能创建它？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T14:48:45.110

使用`foreach`循环，如下所示：

```
foreach( $data as $item) {
    echo '<img src="' . $item['img'] . '">';
    echo '<h1>' . $item['title'] . '</h1>';
    echo '<p>' . $item['desc'] . '</p>';
    echo "\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T14:52:50.913

只需使用您的数组

```
 foreach($data as $item){ 
    echo $item['title'];
    .....
  } 
```

这将为您提供逻辑。现在您可以正确应用 img 和标签

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T14:57:37.353

```
<?php 
        foreach($data as $item) {
        ?>

        <img src="<?=$item['img']?>">
        <h1><?=$item['title']?></h1>
        <p><?=$item['desc']?></p>
        <br />

        <?php } ?> 
```

这里的另一个选择。

# java - 在 JToolbar 上调整组件大小

> ID：11484664
> 
> 赞同：3
> 
> 时间：2012-07-14T14:47:46.907
> 
> 标签：java, swing, resize, jtoolbar

我正在编写一个带有工具栏的程序。唯一的问题是我无法在工具栏中的组件（即日期选择器）上设置正确的大小。

[截屏](http://www.blauwe-regen.be/allerlei/screenshot.png)

所以我想在工具栏中调整日期选择器的大小。我怎样才能解决这个问题？

最漂亮的选择是调整它的大小，使文本字段足够大以显示日期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T16:58:57.730

要使工具栏正确拾取组件大小，您必须**设置其首选、最大和最小大小**。这对我有用：

```
Dimension d = cmpt.getPreferredSize();
d.width = YOUR_NEW_WIDTH;
cmpt.setMinimumSize(d);
cmpt.setMaximumSize(d);
toolbar.add(cmpt); 
```

# c++ - Const_cast 允许将 const 修改为通向 const 的路径？

> ID：11484666
> 
> 赞同：0
> 
> 时间：2012-07-14T14:47:55.830
> 
> 标签：c++, constants, const-cast

鉴于此代码（来自我的上一篇文章[）](https://stackoverflow.com/questions/11457953/const-cast-vs-mutable-any-difference/11458250#11458250)：

```
 const int j = 5; // constant object
  const int *p = &j; // `p` is a const access path to `j`

  int *q = const_cast<int *>(p); // `q` is a non-const access path to `j`
  *q = 10;

  cout << *q << endl; 
```

输出是：`10`

应该是这样吗？我认为这段代码应该导致未定义的行为，因为`j`它是一个 const 。我错了吗 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:55:13.237

未定义的行为可以是任何东西——它可以做你想做的事，或者它可以摧毁宇宙。如果可能，请避免未定义的行为，因为我真的不想因为您太懒而无法正确做事而被破坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T14:55:03.293

[http://en.wikipedia.org/wiki/Undefined_behavior](http://en.wikipedia.org/wiki/Undefined_behavior)

> 如果提交这样的程序，这特别使编译器可以做任何最简单或最有效的事情。通常，之后的任何行为也是未定义的。特别是，从来不需要编译器诊断未定义的行为——因此，调用未定义行为的程序可能看起来编译甚至运行时没有错误，只是在另一个系统上失败，甚至在另一个日期失败。当发生未定义行为的实例时，就语言规范而言，任何事情都可能发生，也许什么都不会发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T15:54:59.420

不需要太多优化器就可以意识到这一点

```
*q = 10;
std::cout << *q;
// not use q anymore 
```

可以改写为

```
std::cout << 10; 
```

并且`q`可以删除，因为现在不用了。

之后，`p`也`j`不再使用，也可以删除。

所有这一切都假设*您*没有在程序中输入任何未定义的行为。允许编译器做出的假设。

# java - 为什么在覆盖时不允许缩小方法的范围

> ID：11484667
> 
> 赞同：16
> 
> 时间：2012-07-14T14:47:55.527
> 
> 标签：java, oop, inheritance

在 Java 中，当我重写一个方法时，编译器会将任何缩小可见性的尝试标记为错误。例如：我不能将公共方法覆盖为受保护的，而我可以将受保护的方法覆盖为公共的。

我有兴趣了解此规则背后的设计决策/思考。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-14T14:56:57.897

子类应始终满足超类的约定。参见[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。

方法的可见性是该契约的一部分。因此，在超类中公开可见的任何内容也应该在子类中公开。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-14T14:54:18.323

考虑一个`B`继承自`A`. `A.m()`是公开的。现在考虑这段代码：

```
A obj = new B();
obj.m(); 
```

应该允许这个调用吗？是的，它应该，因为它`obj`是一个类型的对象`A`！它也是 type 的对象`B`，但使用该对象的人不一定知道。

每个类型`A`的对象都必须遵守`A`. `B`扩展`A`，因此也必须遵守该合同。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-14T16:51:14.467

在覆盖或实现访问级别时，我们应该选择相同的访问级别或更广泛的访问级别。

```
private < (default) < protected < public 
```

公众最广泛的层面。

在接口中，所有成员都是默认公共的。因此，在实施或超越时，我们必须只公开。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-06T12:19:58.137

假设父类和子类具有覆盖公共访问修饰符的方法。

```
class Parent{

public void m(){
// method implementation
}

}
class Child extends Parent{
@Override
public void m(){
//child implementation
}
} 
```

假设有一些类正在使用这样的功能

```
Parent p = new Child();
p.m(); // this access is fine, because JVM calls Overriding method at run time 
```

现在，如果我们将覆盖方法的访问权限更改为不公开的任何内容

```
class Child extends Parent{
@Override
void m(){
//Child implementation
}
} 
```

现在，一些能够使用方法 m() 功能的类可能无法访问该函数。这不是所需的行为。

因此规则是**覆盖方法不应该减少覆盖方法的范围**。

# sql - 如何将 DateMask 转换为 T-SQL 中的样式？

> ID：11484668
> 
> 赞同：0
> 
> 时间：2012-07-14T14:48:02.150
> 
> 标签：sql, tsql

我有一些自定义 DateMask 作为示例 'yyyy/MM/dd'。如何从此 DateMask 获取函数**CONVERT(data_type [(length)], expression [, style]) 的****样式**？

 **也许已经有一些转换功能？

PS。CONVERT(datetime, '2012/07/14', 111) 的变体对我来说并不灵活。

如果可能的话，我想要下一个实现

```
CONVERT( datetime, '2012/07/14', getStyleFromMask('yyyy/MM/dd')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:32:51.267

使用样式 111 将从 'yyyy/mm/dd' 日期格式转换。例如

```
select convert(datetime, '2012/07/14', 111) 
```**

# windows-7 - 批处理文件循环问题

> ID：11484673
> 
> 赞同：1
> 
> 时间：2012-07-14T14:48:40.743
> 
> 标签：windows-7, batch-file

好的，我花了大约 6 个小时的最后一半时间试图让它发挥作用，我几乎要把头发拉出来。如果有人可以帮助解决这个问题，我将永远感激不尽。

```
@ECHO on
SETLOCAL ENABLEEXTENSIONS
SETLOCAL ENABLEDELAYEDEXPANSION
CALL:MicrsoftInstaller-IntegrityCheck "x86" "KB978601" "2010\MS10-019\WinSec-MS10-019-011-P57297-Windows6.1-KB978601-x86.msu" "/quiet /norestart"
pause

:MicrsoftInstaller-IntegrityCheck
SET MSCheck="%~1"
IF "%~1" NEQ "" (
    IF /I %MSCheck:~1,1%=="/"       SET MSI_Switch=%MSCheck%
    IF /I %MSCheck:~1,2%=="20"      SET MSI_Path=%MSCheck%
    IF /I %MSCheck:~1,20%=="KB"     SET MSI_KB=%MSCheck%
    IF /I %MSCheck%=="x64"          SET MSI_Architecture=x64
    IF /I %MSCheck%=="x86"          SET MSI_Architecture=x86    
       SHIFT
       GOTO:MicrsoftInstaller-IntegrityCheck
)
ECHO KB: %MSI_KB%
ECHO Switches: %MSI_Switch%
ECHO Path: %MSI_Path%
ECHO Architecture: %MSI_Architecture%
GOTO:EOF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:22:53.617

需要进行一些小的更改才能使其正常工作：

```
@ECHO off
SETLOCAL ENABLEEXTENSIONS
SETLOCAL ENABLEDELAYEDEXPANSION
CALL:MicrsoftInstaller-IntegrityCheck "x86" "KB978601" "2010\MS10-019\WinSec-MS10-019-011-P57297-Windows6.1-KB978601-x86.msu" "/quiet /norestart"
pause

:MicrsoftInstaller-IntegrityCheck
SET MSCheck="%~1"
IF "%~1" EQU "" GOTO Part2

IF /I "%MSCHECK:~1,1%"=="/"       SET MSI_Switch=%MSCheck%
IF /I "%MSCheck:~1,2%"=="20"      SET MSI_Path=%MSCheck%
IF /I "%MSCheck:~1,2%"=="KB"     SET MSI_KB=%MSCheck%
IF /I %MSCheck%=="x64"          SET MSI_Architecture=x64
IF /I %MSCheck%=="x86"          SET MSI_Architecture=x86    
SHIFT
GOTO:MicrsoftInstaller-IntegrityCheck

:Part2
ECHO KB: %MSI_KB%
ECHO Switches: %MSI_Switch%
ECHO Path: %MSI_Path%
ECHO Architecture: %MSI_Architecture%
GOTO:EOF 
```

首先，我在您的 if 语句中添加了一些双引号。

第二个问题与 Batch 如何解释代码有关：逐行解释。当涉及到您的行时`IF "%~1" NEQ "" (`，即使条件不满足（=没有更多要检查的参数），它也会尝试解释以下代码块。但是对于`MSCHECK`equal to `""`，第一个 if 语句变成`IF /I """=="/"`了导致错误的。

# android - Android以画廊风格的方式滚动浏览应用内图像

> ID：11484676
> 
> 赞同：3
> 
> 时间：2012-07-14T14:48:54.323
> 
> 标签：android, image, view, gallery

我有一个图像的 GridView，它们都在 /res 目录中（随应用程序提供）。当我打开其中一个时，没有问题。但是，我希望能够以与在图库中相同的方式在它们之间滚动，即在图像上滑动手指将导致下一个图像出现。有没有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T14:58:41.830

您可以使用[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

请参阅[android viewPager implementation](https://stackoverflow.com/questions/7244813/android-viewpager-implementation)以获得一些很好的链接来了解如何实现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T12:33:38.400

我最终创建了一个我自己的简单实现：

```
public class PicView extends View{

private int mBackgroundPicPosition;
private Bitmap mBackgroundPic;
private int m_touchStartPosX;
private EventsActivity m_mainActivity;
private int m_viewWidth;
private int m_viewHeight;
private int m_backgroundX;
private Integer[] m_picIDs;

public PicView(Context context, Integer[] picIDs) {
    super(context);
    m_mainActivity = (EventsActivity)context;
    m_viewWidth = m_mainActivity.mMetrics.widthPixels;
    m_viewHeight = m_mainActivity.mMetrics.heightPixels;
    m_picIDs = picIDs;
}
public void setBackground(int position) {
    Options opts = new Options();
    mBackgroundPicPosition = position;
    Bitmap bitmap = BitmapFactory.decodeResource(getResources(), m_picIDs[position], opts);
    mBackgroundPic = BitmapFactory.decodeResource(getResources(), m_picIDs[position], opts);

    int picHeight = bitmap.getHeight();
    int picWidth = bitmap.getWidth();

    mBackgroundPic.recycle();
    float xScale, yScale, scale;
    if (picWidth > picHeight) {
        // rotate the picture
        Matrix matrix = new Matrix();
        matrix.postRotate(-90);
        bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true);
        picHeight = bitmap.getHeight();
        picWidth = bitmap.getWidth();
        matrix = null;  

    } 
    xScale = ((float)m_viewWidth)/ picWidth;     
    yScale = ((float)m_viewHeight) / picHeight;
    scale = (xScale <= yScale) ? xScale : yScale;
    m_backgroundX = (xScale >= yScale) ? (m_viewWidth - (int)(picWidth * scale)) / 2 : 0;
    mBackgroundPic = Bitmap.createScaledBitmap(bitmap, (int)(picWidth * scale), (int)(picHeight * scale), true);
    bitmap = null;

    invalidate();
}

@Override
protected void onDraw(Canvas canvas) {
    // draw the background
    canvas.drawBitmap(mBackgroundPic, m_backgroundX, 0, null);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    int eventaction = event.getAction();
    int X = (int)event.getX();

    switch (eventaction ) {
        case MotionEvent.ACTION_DOWN:
            m_touchStartPosX = X;
        break;
        case MotionEvent.ACTION_UP:
            //check to see if sliding picture
            if (X <= m_touchStartPosX) {
                // slide to the left
                setBackground(getNextPosition());
            } else {
                // slide to the right
                setBackground(getPrevPosition());
            }
            m_touchStartPosX = -1;  
        break;
    }
    invalidate();  
    return true;

}

private int getPrevPosition() {
    if (mBackgroundPicPosition == 0) {
        return m_picIDs.length - 1;
    } else {
        return mBackgroundPicPosition - 1;
    }
}

private int getNextPosition() {
    if (mBackgroundPicPosition == m_picIDs.length - 1) {
        return 0;
    } else {
        return mBackgroundPicPosition + 1;
    }
} 
```

# java - 根据日期显示数据

> ID：11484680
> 
> 赞同：0
> 
> 时间：2012-07-14T14:49:41.213
> 
> 标签：java, mysql, sql, jstl, resultset

我在 mysql 的表中有 2 列，有时如下所示，

```
 title    timestamp
--------------------
 test1     1/7/2012
 test2     1/7/2012
 test3     1/7/2012
 test4     2/7/2012
 test5     3/7/2012. 
```

我正在寻找的结果是这样的，

```
**1/7/2012**
   test1
   test3
**2/7/2012**
   test4
 **3/7/2012**
   test5 
```

有人可以在这里帮助他吗？这可以通过 MySQL 查询来完成，还是我需要在服务器端迭代结果集，然后格式化结果集以进行显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:22:36.720

如果我正确理解了您想要的内容，则代码应如下所示：

```
int itemsInPage = 100; //Number of item to display in page
int currentPage = 1; //Index of current page, starting from 1

PreparedStatement ps = con.prepareStatement("select title,timestamp,str_to_date(timestamp,'%d/%m/%Y') as date from table_name order by date,title limit " + ((currentPage - 1) * itemsInPage) + ", " + itemsInPage);

ResultSet rs = ps.executeQuery();

String prevTimestamp = null;

while(rs.next()) {
    if (prevTimestamp == null || !prevTimestamp.equals(rs.getString(2))) {
        System.out.println("*** "+rs.getString(1)+" ***");
    }
    System.out.println(rs.getString(1));
    prevTimestamp = rs.getString(2);
} 
```

如果你在 jsp 中编码，你应该使用

```
out.print(...); 
```

代替

```
System.out.println 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:01:33.890

您可以使用这样的查询：

```
select title,timestamp,str_to_date(timestamp, '%d/%m/%Y') as date from table_name order by date,title; 
```

迭代结果集并仅在时间戳更改时打印。

str_to_date 是一个 MySQL 函数，它将字符串转换为日期，用于排序。如果你没有使用 MySQL，你应该检查一个类似的函数。

# php - 以零开头的整数转换为字符串（并保持前导零）

> ID：11484682
> 
> 赞同：1
> 
> 时间：2012-07-14T14:49:45.050
> 
> 标签：php, javascript, sql, codeigniter, gps

我的问题是这个，我有一个从浏览器获取 GPS 位置的 javascript 代码。然后，因为我无法将这些坐标从 javascript 写入 SQL 数据库，也无法将其直接发送到 php，所以我转到控制器“站点”，它的方法是“writeToDatabase”，我还向 URL 添加了 4 个段，它们是实际上是我从 javascript 获得的那些坐标。

所以在javascript中我有：

```
window.location = getBaseURL() + "site/writeToDatabase/" + splittedLatitude[0] + "/" + splittedLatitude[1]
        + "/" + splittedLongitude[0] + "/" + splittedLongitude[1] + "/"; 
```

所以现在浏览器转到（只是一个假坐标的例子）www.mysite.com/index.php/site/writeToDatabase/47/707223/16/054322

现在我在站点控制器中的 writeToDatabase 方法读取这些段（我使用 codeigniter，所以很容易读取 URL 段）。读完段后，我将纬度的第一部分和纬度的第二部分连接起来，并加上一个点“。” 介于两者之间（所以在这个例子中我得到 47.707223 和 16.54322），我对经度做同样的事情。然后当我将这些数据写入数据库时​​，我的数据库中会出现奇怪的数字，如果我的一个段以零开头（就像我上面的例子一样），零被删除，所以从 054322 我得到 54322，这导致 16.54322 就像上面的例子一样 :)

现在这个奇怪数字的问题只有在我尝试写入数据库整个坐标时才会出现。

其他人有解决这个问题的方法吗？我完全没有想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:14:56.793

你为什么不像这样发送参数：

```
http://www.example.com/foo/bar/?lat=47.11&lng=5.012 
```

这确实解决了这个问题。

但是，您可以通过像这样的简单字符串连接按照自己的方式进行操作（因为这些是字符串而不是整数）。

```
$lat = $_GET['first'] . '.' . $_GET['second]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:02:33.273

如果您需要一个整数，则永远不会有前导零 - 创建 CHAR 字段，而不是 INT（并且不要进行类型转换，以防您也手动执行此操作）。

# android - Android Asynctask - 执行后删除静态变量

> ID：11484684
> 
> 赞同：0
> 
> 时间：2012-07-14T14:50:26.873
> 
> 标签：android, android-asynctask

我正在使用 AsyncTask 加载纹理资产。我将纹理变量放入带有静态修饰符的不同类中。我调试我的应用程序，我看到当 asynctask 正在执行时，它会将纹理加载到我的静态变量中，但在它执行之后，我的所有变量正在变为空。这可能是什么问题？

```
public class Assets{
public static Texture logo;
}

protected Boolean doInBackground(GLGame... game) {
      publishProgress(10);

    Assets.logo = new Texture(glGame, "logo3.png");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:06:14.697

我认为您没有提供足够的代码来回答这个问题。您能否包含整个 AsyncTask 类定义以及如何实例化和执行它。

# php - CodeIgniter 中的模板系统允许我将数据从模型自动传递到标头？

> ID：11484687
> 
> 赞同：0
> 
> 时间：2012-07-14T14:51:16.230
> 
> 标签：php, codeigniter

我一直在研究 CodeIgniter 模板系统，到目前为止，它允许您更改页眉或页脚文件中的内容，但我正在寻找一种将数据从模型自动加载到头文件的方法（取决于模板）。

例如，在我的标题中，它显示了用户的用户名和收件箱。我需要从模型和用户用户名加载用户未读消息。这取决于模板 - 我只想在用户登录时加载该信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:19:57.073

将数据从模型传递到视图不是一个好习惯。

您应该首先将数据传递给控制器​​，然后再传递给您的视图。

[http://codeigniter.com/user_guide/overview/appflow.html](http://codeigniter.com/user_guide/overview/appflow.html)

正如您在此应用程序流程图中所看到的 - 模型和视图之间没有直线。

如果您有兴趣在“布局”中显示模型数据 - 使用钩子！

[http://codeigniter.com/user_guide/general/hooks.html](http://codeigniter.com/user_guide/general/hooks.html)

定义一个“pre_controller”钩子，获取 CI 实例，加载模型，检索数据并将其显示在您的布局中。

启用挂钩

```
$config['enable_hooks'] = TRUE; 
```

定义一个钩子，如：

```
$hook['pre_controller'] = array(
                                'class'    => 'MyClass',
                                'function' => 'Myfunction',
                                'filename' => 'Myclass.php',
                                'filepath' => 'hooks',
                                'params'   => array('beer', 'wine', 'snacks')
                                ); 
```

例如

钩

```
<?php

if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Gamescount
{
        private $model_name = '';

        public function __construct() 
        {
                $this->CI =& get_instance();
                $this->model_name = 'Games_model';
                $this->CI->load->database();
                $this->CI->load->model($this->model_name);
                $this->CI->load->helper('url');
        }

        public function count_games()
        {
                $all_games = $this->CI->Games_model->getAllGames();
                $this->CI->gamescount = count($all_games);
        }
}

?> 
```

在您的布局中，您可以获得游戏计数值，例如

```
<?php echo $this->gamescount; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:43:17.190

实现代码以在控制器中检索数据，然后通过 AJAX 加载并显示在标题中。在不破坏 Codeigniter 实践的情况下，这是一个可行的解决方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-14T15:28:52.247

正如帕克所说，从视图中调用模型并不是一个好主意。但如果你还想这样做，你可以做到。

获取 Codeigniter 实例如下

```
$CI =& get_instance(); 
```

使用 Codeigniter 实例，可以调用模型。

# jquery - 使用 jquery 对容器中的项目进行 POST

> ID：11484689
> 
> 赞同：0
> 
> 时间：2012-07-14T14:51:26.777
> 
> 标签：jquery, jquery-ui, post, droppable

您好，我正在使用jquery-ui[的可放置示例](http://jqueryui.com/demos/droppable/photo-manager.html)将我的项目放入垃圾容器中，就像示例一样。

现在该示例以成功放入垃圾箱的方式结束。但是现在我想通过发布请求发送这个项目列表，换句话说，我想继续示例的自然过程，即将垃圾项目列表传达给服务器。

我不知道如何将它放在表单输入或其他东西中，也许在 json 中？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:49:33.210

我是[ajaxForm](http://malsup.com/jquery/form/ "ajax表单")的粉丝，所以我会这样做。假设您的垃圾桶容器的 id 为“trashCan”，并且您放入其中的每个东西都知道它的 id 是什么，并将其存储在自定义属性中。你有一个 id 为“emptyTrash”的按钮。

```
<div id="trashCan">
    <div class="foo" data-id="7">bar</div>
</div> 
```

然后我会使用如下脚本来收集所有 id 并将它们发布到服务器上的删除控制器。注意：这假设您放入垃圾箱的所有内容都是相同的类型。

```
$('#emptyTrash').click(function() {
    // get the list of ids
    var data = {
        'ids' : 
    };
    var ids = [];
    $('div', '#trashCan').each(function(i) {
        ids.[i] = $(this).attr('data-id');
    });

    $('#someElement').ajaxSubmit({
        url: 'emptyTrash',
        type: 'post',
        data: { 'ids': ids },
        success: function(responseText) {
            $('#message-container').html(responseText);
        },
        error: function(xhr) {
            $('#message-container').html(xhr.responseText).addClass('error');
        }
    });
}); 
```

# c++ - 异常多重继承

> ID：11484691
> 
> 赞同：5
> 
> 时间：2012-07-14T14:52:16.400
> 
> 标签：c++, inheritance, exception-handling, multiple-inheritance

我有混合异常和多重继承的问题。基本上我有这个代码：

```
#include <exception>
#include <stdexcept>
#include <iostream>

class A : public std::exception
{
public:
    virtual ~A() noexcept {};
};

class B : public A, public std::runtime_error
{
public:
    B() : A{}, std::runtime_error{""}
    {

    }
};

int main()
{
    try {
        throw B{};
    } catch (const std::exception& error) {
        // this catch doesn't work
        std::clog << "Caught!" << std::endl;
    }
} 
```

我需要修改它，以便可以将 B 类的异常捕获为 std::exception （现在调用终止处理程序）。我怎样才能实现这种行为？我想需要虚拟继承，但在这种情况下我看不到任何使用它的方法。

更新：我需要能够：
- 将 A 捕获为 A（微不足道），
- 将 A 捕获为 std::exception，
- 将 B 捕获为 B（再次，微不足道），
- 将 B 捕获为 std::exception，
- 捕获 B作为 std::runtime_error

我知道这是很多要求，也许没有多大意义，但我需要它，我只是好奇:)

UPDATE2：我认为问题是 std::runtime_error 实际上不是来自 std::exception （这将允许我通过 A 中的虚拟继承来解决问题）。我对吗？还是，能解决吗？

UPDATE3：艾伦斯托克斯在下面的评论中提出了解决方案，这似乎对我有用：

> 您能否将 A 拆分为两个类 - 一个实现 B 所需的功能，另一个添加从 std::exception 的继承？然后 A 和 B 都可以从（比如说）A_base 继承。

谢谢你，如果有人有其他好的解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T15:45:11.200

Stroustrup 建议从`std::exception`虚拟继承，以便只有一个转换路径。

就个人而言，我发现制定多重继承方案可能是过度设计，并且更喜欢线性继承链......或者根本没有。

# c++ - c++中的atan问题

> ID：11484692
> 
> 赞同：0
> 
> 时间：2012-07-14T14:52:30.703
> 
> 标签：c++, math, logic

在我进入我的问题之前，我想指出几件事：1）我知道 cmath 库中已经有一个 atan2 函数，这纯粹是作为一个练习和我自己的练习，2）我知道代码不占0。

好的，所以 tan(theta) = y / x，其中 y 和 x 是平面上的坐标……这意味着：

在 Quads I 和 IV 中 theta = atan(y/x)，在 Quads II 和 III 中 theta = atan(y/x) + 180

那么为什么当我使用以下代码时：

```
float atan(float y, float x)
 {
 float result = 0.0f;

if (x > 0) //quads I and IV if x is positive
 { 
result = atanf(y/x);
 }
 else if (x < 0)
 {
 result = atan(y/x) + 180; //quads II and III if x is negative
 }

return result;

 } 
```

它吐我垃圾吗？例如，对于坐标（-4,4），它给了我结果：179.215，当它应该是 135：

atan(4/-4) = -45 度 + 180 度 = 135 度

但正在发生的是计算

atan(4.0f/-4.0f) = -0.785398 + 180 度 = 179.215。

我在这里错过了一些步骤吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-14T14:59:30.343

标准的 atan 和 atan2 函数，以及所有其他使用角度的 C 函数，使用*弧度*，而不是度数。

如果您希望自己的函数输出度数，则必须将 atanf 的返回值乘以`180/pi`; 要将所有内容保持在弧度中，请添加 pi 而不是 180。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T14:57:25.993

atan 用弧度表示，而不是度数...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-14T14:58:30.630

`atan`以弧度返回结果。您可以转换为度数=180*弧度/π。

# websocket - 使用 Jetty 上 Jersey 上的 Atmosphere 连接到 webServer 上的 websocket 时出现无效的升级协议异常

> ID：11484697
> 
> 赞同：0
> 
> 时间：2012-07-14T14:53:07.950
> 
> 标签：websocket, jetty, jersey, atmosphere

我正在使用[Sonatype async-http-client java 库在 Jetty 上使用](https://github.com/sonatype/async-http-client)[Atmosphere](https://github.com/Atmosphere) on Jersey 对WebServer 进行 websocket 调用。

我得到了异常`java.lang.IllegalStateException: Invalid upgrade protocol, status should be 101 but was 200`。错误是由`WebSocketTextListener.onError(Throwable t)`方法启动的。

知道如何解决这个问题吗？

这是使用 Sonatype async-http-client 的客户端代码：

```
public void getMealWebSocketSubscriber(String restaurantId , String mealId, OnGetMealListener listener) throws ApiException {

    try {

        WebSocket websocket = client.prepareGet(getAbsolutePath("restaurants/" + restaurantId + "/meals/" + mealId + "/websocket/"))
                .execute(new WebSocketUpgradeHandler.Builder().build())
                .get();

        websocket.addWebSocketListener(
                new WebSocketTextListener() {

                    public void onOpen(WebSocket websocket) {
                        System.out.println("WebSocket onOpen");
                    }

                    public void onClose(WebSocket websocket) {
                        System.out.println("WebSocket onClose");
                    }

                    public void onError(Throwable t) {
                        System.out.println("WebSocket onError");
                        t.printStackTrace();
                    }

                    public void onMessage(String message) {
                        System.out.println("WebSocket onMessage: " + message);
                    }

                    public void onFragment(String fragment, boolean last) {
                        // TODO Auto-generated method stub

                    }

                });

    } catch (Exception e) {
        throw new ApiException(e.getMessage());
    }

} 
```

这些是使用 Atmosphere 的 Jersey 资源方法：

```
@Path("/websocket")
@Suspend
@GET
@Produces({MediaType.APPLICATION_JSON})
public String suspend() {
    return "";
}   

@Path("/websocket")
@Broadcast(writeEntity = false)
@POST
@Produces({MediaType.APPLICATION_JSON})
public Meal broadcast() {
    return getMealById(mealId);
} 
```

这是用于启动我的 Atmosphere servlet 的代码：

```
this.webServer = new Server(8080);

    AtmosphereServlet atmosphereServlet = new AtmosphereServlet();
    ServletHolder servletHolder = new ServletHolder(atmosphereServlet);

    //Atmosphere

    servletHolder.setInitParameter("org.atmosphere.websocket.messageContentType"    , "application/json");
    servletHolder.setInitParameter("org.atmosphere.useWebSocket","true");
    servletHolder.setAsyncSupported(true);

    //Jersey resources

    //      servletHolder.setInitParameter("com.sun.jersey.config.property.packages", "com.famenu.server.resources");
    servletHolder.setInitParameter("com.sun.jersey.config.property.resourceConfigClass" ,   "com.sun.jersey.api.core.ClassNamesResourceConfig");
    servletHolder.setInitParameter("com.sun.jersey.config.property.classnames"          ,   
            "com.famenu.server.resources.ItemResource, "        +
                    "com.famenu.server.resources.MealAtmosphereResource, "  +
                    "com.famenu.server.resources.MealResource, "            +
                    "com.famenu.server.resources.MealsResource, " + MY_OTHER_JERSEY_RESOURCES);

    servletHolder.setInitParameter("com.sun.jersey.spi.container.ContainerRequestFilters"   , "com.sun.jersey.api.container.filter.LoggingFilter");
    servletHolder.setInitParameter("com.sun.jersey.spi.container.ContainerResponseFilters"  , "com.sun.jersey.api.container.filter.LoggingFilter");

    servletHolder.setInitParameter("com.sun.jersey.api.json.POJOMappingFeature"         , "true");

    ServletContextHandler servletContextHandler = new ServletContextHandler(webServer, "/rest", true, false);
    servletContextHandler.addServlet(servletHolder, "/");

    webServer.setHandler(servletContextHandler);

    webServer.start(); 
```

异常的堆栈跟踪：

```
java.lang.IllegalStateException: Invalid upgrade protocol, status should be 101 but was 200
at com.famenu.shared.api.AsyncApi.getMealWebSocketSubscriber(AsyncApi.java:172)
at com.famenu.shared.api.AsyncApiTest.testGetMealWebSocketSubscriber(AsyncApiTest.java:120)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我正在使用 Atmosphere-jersey 0.9.7、Jetty 和 jetty-websocket 7.6RC4、sonatype/async-http-client 1.7.4、Jersey 1.12。

在[asyn-http-client google group](https://groups.google.com/forum/#!msg/asynchttpclient/6PH2qyzxPvY/HuQXd5nvZi0J)上有一篇[文章](https://groups.google.com/forum/#!msg/asynchttpclient/6PH2qyzxPvY/HuQXd5nvZi0J)，但他们提到的可能解决此问题的代码示例在 github 上不再可用。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:03:24.977

该错误是通过在 url 中设置 http:// 协议而不是 ws:// 给出的。

错误的：

```
http://127.0.0.1:8080/JERSEY_RESOURCES
```

正确的：

```
ws://127.0.0.1:8080/JERSEY_RESOURCES
```

# c++ - 从 C++ 中的二进制文件读取对象的问题

> ID：11484698
> 
> 赞同：0
> 
> 时间：2012-07-14T14:53:13.050
> 
> 标签：c++, file, binary

我在读取二进制文件时遇到问题。我的作业是管理一个视频库商店的文件系统。

我有一个“客户端”类（代码如下），现在我只是想了解 write() 和 read() 函数是如何工作的，所以我在 main() 中“玩”它们。

首先，我打开一个文件并将 60 条空记录写入其中。然后我将一些客户写入文件。

当我尝试从文件中的给定位置读取一个客户记录到另一个现有客户对象时 - 它读取两条记录...

我已经尝试并阅读了几乎所有内容，但我还没有找到答案。

如果我试图将一条记录读入一个空的客户端对象，它就会充满二进制垃圾。

```
#pragma once
#include <time.h>
#include <string>
#include <iostream>
using namespace std;

class Client
{
    private:
        char id[10];                        //client info
        char name[20];
        char address[40];
        char phoneNum[11];                  
        time_t startMembership;             //variable that represents the beginning of the membership in the library
        time_t endMembership;               //variable that represents the end of the membership in the library     
        int fines;

    public:
        Client() {};
        Client(char id[10],char name[20],char address[40],char phone[10],int fines);    //constructor 
        int     getFines()                              {return this->fines;}                                           //getters
        char*   getId()                                 {return this->id;}
        void    setName(char* newName)                  {strcpy(this->name,newName);}
        void    setId(char* newId)                      {strcpy(this->id,newId);}                                       //setters
        void    setAddress(char* newAddress)            {strcpy(this->address,newAddress);}
        void    setPhone(char* newPhone)                {strcpy(this->phoneNum,newPhone);}
        void    setStartMembership(time_t newStartDate) {this->startMembership = newStartDate;}
        void    setEndMembership(time_t newEndDate)     {this->endMembership = newEndDate;}
        void    setFines(int newFines)                  {this->fines = newFines;}
        bool    finesChecking();                                                                                        //true= need to pay

        friend ostream& operator<<(ostream& os, const Client& c);
        ~Client();                                                                                                  //distructor    
};

#include "Client.h"

/**
* Constructor
*/
Client::Client(char id[10],char name[20],char address[40],char phone[10],int fines)
{
    strcpy(this->id,id);
    strcpy(this->name,name);
    strcpy(this->address,address);
    strcpy(this->phoneNum,phone);
    this->fines = fines;
    time(&this->startMembership);       // the time in the binary file will be represented as raw time
    time(&this->endMembership);         
    this->endMembership += 30*24*60*60; // set the expiration date of the membership (1 month)
}

ostream& operator<<(ostream& os, const Client& c)
{
    os<<"ID: "<<c.id<<endl;
    os<<"Name: "<<c.name<<endl;
    os<<"Phone#: "<<c.phoneNum<<endl;
    os<<"Address: "<<c.address<<endl;
    os<<"Member Since: "<<ctime(&c.startMembership);
    os<<"Membership Exp: "<<ctime(&c.endMembership);
    os<<"Fines: "<<c.fines<<" ILS"<<endl;
    return os;
}

/**
* Distructor
*/
Client::~Client()
{
    delete[] this->address;
    delete[] this->id;
    delete[] this->name;
    delete[] this->phoneNum;
}

#include <iostream>
#include <fstream>
#include <string>
#include <time.h>
#include "Menu.h"
#include "MovieCatalog.h"
#include "Client.h"

using namespace std;

int main()
{
    /*Menu menu;
    menu.StartMenu();*/

    Client *first, *second, *third, *fourth, *fifth;
    first = new Client("1","first","Lod","1",50);
    second = new Client("2","second","Herzelia","2",50);
    third = new Client("3","third","Holon","3",50);
    fourth = new Client("4","fourth","Haifa","4",50);
    fifth = new Client("5","fifth","Raanana","5",50);

    fstream file;
    Client blankClient;
    blankClient.setId("0");

    file.open("example.bin", fstream::out | fstream::binary);
    streampos pos;
    for(int i=1; i<=60; i++)
    {
        file.write((char*)&blankClient, sizeof(Client));
    }
    file.close();

    file.open("example.bin", fstream::out | fstream::binary);
    file.write((char*)&first,sizeof(Client));
    file.write((char*)&second,sizeof(Client));
    file.write((char*)&third,sizeof(Client));
    //put fourth and fifth @ 10th and 11th records
    file.seekp(sizeof(Client)*10,ios_base::beg);
    file.write((char*)&fourth,sizeof(Client));
    file.write((char*)&fifth,sizeof(Client));
    file.close();

    file.open("example.bin", fstream::in | fstream::binary);
    //put the "get" pointer on the 11th record (where "fifth" is located)
    file.seekg(sizeof(Client)*11,ios_base::beg);
    //read "fifth" object into "second" object
    file.read((char*)&second,sizeof(Client));
    file.close();
    cout<<*first;
    cout<<*second;
    //here you can see that it takes "fifth" and put it into "second", and the record prior to fifth ("fourth"), into "first"
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:36:58.203

给定声明：`first = new Client("1","first","Lod","1",50);`

你的写法不正确：

```
file.write((char*)&first,sizeof(Client));
file.write((char*)&second,sizeof(Client));
... 
```

所以你写的是指针的地址而不是对象本身，让它像：

```
 file.write((char*)first,sizeof(Client));
 file.write((char*)second,sizeof(Client));
 ... 
```

线相同：

```
file.read((char*)&second,sizeof(Client)); -> file.read((char*)second,sizeof(Client)); 
```

你的析构函数也不正确`Client::~Client()`，而不是你的情况不需要

# powershell - 如何使用 Power shell 获取 AD 组中的用户列表，这些用户也是第二个 AD 组的成员

> ID：11484699
> 
> 赞同：0
> 
> 时间：2012-07-14T14:53:27.850
> 
> 标签：powershell

我对 PowerShell 很陌生，无法找到执行以下任务的方法。

我需要列出属于 A 组成员的所有用户，然后按 B 组的成员身份提交结果

Get-memberof X group 然后显示该组的用户也是 y 组的成员

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:58:53.873

获取第一组的成员并将它们放入变量中，对第二组执行相同的操作。使用`Compare-Object`cmdlet 查找两个组中都存在的对象（指定 -IncludeEqual 开关）：

```
Compare-Object $group1 $group2 -Property member -IncludeEqual | 
Where-Object {$_.SideIndicator -eq '=='} 
```

# python - 用于从流中读取多个 protobuf 消息的 python 示例

> ID：11484700
> 
> 赞同：18
> 
> 时间：2012-07-14T14:53:48.387
> 
> 标签：python, stream, protocol-buffers

我正在处理来自 spinn3r 的数据，它由多个不同的 protobuf 消息组成，这些消息序列化为一个字节流：

[http://code.google.com/p/spinn3r-client/wiki/Protostream](http://code.google.com/p/spinn3r-client/wiki/Protostream)

“protostream 是协议缓冲区消息流，根据 Google 协议缓冲区规范在线上编码为长度前缀变量。流包含三个部分：标头、有效负载和尾部标记。”

这似乎是 protobuf 的一个非常标准的用例。事实上，protobuf 核心发行版为 C++ 和 Java 提供了 CodedInputStream。但是，protobuf 似乎没有为 python 提供这样的工具——“内部”工具不是为这种外部使用设置的：

[https://groups.google.com/forum/?fromgroups#!topic/protobuf/xgmUqXVsK-o](https://groups.google.com/forum/?fromgroups#!topic/protobuf/xgmUqXVsK-o)

所以......在我去拼凑一个python varint解析器和用于解析不同消息类型流的工具之前：有人知道这方面的任何工具吗？

为什么 protobuf 中缺少它？（或者我只是没有找到它？）

对于 protobuf 来说，这似乎是一个很大的差距，尤其是与 thrift 的“传输”和“协议”等效工具相比。我看对了吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-14T07:08:59.380

看起来另一个答案中的代码可能是从[这里](https://code.google.com/r/avenka-co1/source/browse/src/python/varint.py?spec=svn2b97a552eb2c39cfe62b62dbc303b6e86c47ec4b&name=series34&r=2b97a552eb2c39cfe62b62dbc303b6e86c47ec4b)提取的。在使用此文件之前检查许可证，但我设法让它`varint32`使用如下代码读取 s：

```
import sys
import myprotocol_pb2 as proto
import varint # (this is the varint.py file)

data = open("filename.bin", "rb").read() # read file as string
decoder = varint.decodeVarint32          # get a varint32 decoder
                                         # others are available in varint.py

next_pos, pos = 0, 0
while pos < len(data):
    msg = proto.Msg()                    # your message type
    next_pos, pos = decoder(data, pos)
    msg.ParseFromString(data[pos:pos + next_pos])

    # use parsed message

    pos += next_pos
print "done!" 
```

这是一个非常简单的代码，旨在加载由`varint32`s 分隔的单一类型的消息，它描述了下一条消息的大小。

* * *

**更新**：也可以使用以下方法直接从 protobuf 库中包含此文件：

```
from google.protobuf.internal.decoder import _DecodeVarint32 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-01T13:47:39.410

我已经实现了一个[小型 python 包](https://github.com/cartoonist/pystream-protobuf)来将多个 protobuf 消息序列化到一个流中并从一个流中反序列化它们。您可以通过以下方式安装它`pip`：

```
pip install pystream-protobuf 
```

这是将两个 protobuf 消息列表写入文件的示例代码：

```
import stream

with stream.open("test.gam", "wb") as ostream:
    ostream.write(*objects_list)
    ostream.write(*another_objects_list) 
```

然后`vg_pb2.py`从流中读取相同的消息（例如定义的对齐消息）：

```
import stream
import vg_pb2

alns_list = []
with stream.open("test.gam", "rb") as istream:
    for data in istream:
        aln = vg_pb2.Alignment()
        aln.ParseFromString(data)
        alns_list.append(aln) 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-15T01:34:46.633

这很简单，我可以理解为什么没有人费心制作可重用工具：

```
'''
Parses multiple protobuf messages from a stream of spinn3r data
'''

import sys
sys.path.append('python_proto/src')
import spinn3rApi_pb2
import protoStream_pb2

data = open('8mny44bs6tYqfnofg0ELPg.protostream').read()

def _VarintDecoder(mask):
    '''Like _VarintDecoder() but decodes signed values.'''

    local_ord = ord
    def DecodeVarint(buffer, pos):
        result = 0
        shift = 0
        while 1:
            b = local_ord(buffer[pos])
            result |= ((b & 0x7f) << shift)
            pos += 1
            if not (b & 0x80):
                if result > 0x7fffffffffffffff:
                    result -= (1 << 64)
                    result |= ~mask
                else:
                    result &= mask
                return (result, pos)
            shift += 7
            if shift >= 64:
                ## need to create (and also catch) this exception class...
                raise _DecodeError('Too many bytes when decoding varint.')
    return DecodeVarint

## get a 64bit varint decoder
decoder = _VarintDecoder((1<<64) - 1)

## get the three types of protobuf messages we expect to see
header    = protoStream_pb2.ProtoStreamHeader()
delimiter = protoStream_pb2.ProtoStreamDelimiter()
entry     = spinn3rApi_pb2.Entry()

## get the header
pos = 0
next_pos, pos = decoder(data, pos)
header.ParseFromString(data[pos:pos + next_pos])
## should check its contents

while 1:
    pos += next_pos
    next_pos, pos = decoder(data, pos)
    delimiter.ParseFromString(data[pos:pos + next_pos])

    if delimiter.delimiter_type == delimiter.END:
        break

    pos += next_pos
    next_pos, pos = decoder(data, pos)
    entry.ParseFromString(data[pos:pos + next_pos])
    print entry 
```

# twitter-bootstrap - 引导 Nuget 包

> ID：11484702
> 
> 赞同：5
> 
> 时间：2012-07-14T14:54:18.540
> 
> 标签：twitter-bootstrap, nuget

有人为 ASP.NET MVC 4 应用程序推荐 Twitter Bootstrap 的 Nuget 包吗？我对 nuget.org 上的内容不太感兴趣。你在用什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T15:57:00.283

了解使用哪一个的最佳方法是查看包装内容。

通过 sirkirby 检查这个 github 存储库：[https ://github.com/sirkirby/twitter-bootstrap-nuget](https://github.com/sirkirby/twitter-bootstrap-nuget)

*   你会找到“ **Twitter.Bootstrap** ”，这是下载最多的用于引导的 Nuget 包。你只需找到普通的**基本引导*css/js/image*文件**，包将其定向到 Content 文件夹。（详细信息在存储库中 > twitter.Bootstrap/Twitter.Bootstrap.nuspec）。

安装“ **Twitter.Bootstrap** ” = 从官方网站下载引导文件并将它们添加到您的网络应用程序。

*   您还会发现“ **Twitter.Bootstrap.MVC** ”，它只会在“BundleConfig.cs”文件中添加几行，以便在安装时添加捆绑和缩小支持，以便轻松集成到您的共享布局和视图中。而这个包依赖于之前的包。

安装“ **Twitter.Bootstrap.MVC** ” = 从官方网站下载引导文件并将它们添加到您的网络应用程序 + 添加用于捆绑和缩小的参考。

*   如果您需要使用 .LESS 文件而不是 .CSS 的 Bootstrap，请安装“ **Twitter.Bootstrap.Less** ”包。

--

*您可以像我们刚才那样检查所有其他 NuGet 包。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T15:03:30.603

我已经从[官网](http://twitter.github.com/bootstrap/)直接下载到了ASP.NET MVC项目中。这需要更多的工作，但至少我可以完全控制并且我知道我得到了什么。

还有[Kickstrap](http://ajkochanowicz.github.com/Kickstrap/)，我还没有测试过，但看起来很有希望。

注意：需要自定义从“../img/”到“/”的图像文件夹路径，否则 ASP.NET MVC 4 中的 CSS 包不会按预期加载图像。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T19:32:54.653

尝试安装这两个项目。

带有表单验证的脚手架也应该与这两个一起工作。

[MVC 4 TwitterBootstrap Starter 布局页面（Razor）](http://visualstudiogallery.msdn.microsoft.com/268d0b05-6ba5-4793-9a10-7d9d2a478881)

[Bootstrap脚手架MVC模板](https://github.com/carlosblanco/BootstrapScaffoldMVCTemplates)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-15T19:12:17.790

您可能会发现另一个有用的包：**[TwitterBootstrapMVC](http://www.codeproject.com/Articles/570762/TwitterBootstrapMvc)。**

文章包含存储库的链接和介绍视频。

该库与脚手架或捆绑包无关。它是一个 html 帮助器库，主要使编写与表单相关的东西变得更容易。

# jquery - jQuery 选择器在添加到 DOM 之前编辑 HTML

> ID：11484703
> 
> 赞同：3
> 
> 时间：2012-07-14T14:54:33.610
> 
> 标签：jquery

我正在尝试使用 jQuery 选择器向 DOM 添加一些内容，但我想在添加之前对其进行操作。

```
var $content = $('<h1>title</h1><h2 id="xx">remove me</h2><p>some content or other</p>');

$content.remove('#xx');

$('#output').append($content); 
```

我已经把它放在了 jsfiddle 上[http://jsfiddle.net/NNcG5/1/](http://jsfiddle.net/NNcG5/1/)

非常感谢，迈克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T14:59:07.553

我会推荐`$content.not('#xx').appendTo('#output');`

我也用解决方案更新了你的 JS Fiddle，[在这里](http://jsfiddle.net/NNcG5/1/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T15:00:51.683

试试这样：

```
var $content = $('<div/>').html($('<h1>title</h1><h2 id="xx">remove me</h2><p>some content or other</p>'));
$content.find('#xx').remove();
$('#output').append($content); 
```

[现场演示](http://jsfiddle.net/NNcG5/6/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T14:58:03.433

我认为问题源于您正在创建一个没有单个顶级元素的片段。如果您将所有内容包装在 a 中，`<div>`则它可以正常工作。

```
var $content = $('<div><h1>title</h1><h2 id="xx">remove me</h2><p>some content or other</p></div>'); 
```

*编辑*- 哎呀，我也完全按照 Dimitrov 先生在他的回答中所做的那样更改了您的删除代码。

# php - 在 mysql 数据库中获取值时获取奇怪的字符

> ID：11484706
> 
> 赞同：2
> 
> 时间：2012-07-14T14:55:02.143
> 
> 标签：php, mysql, character-encoding

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:06:36.677

I notice that you're running this query... `mysql_query('SET CHARACTER SET utf8');`
Try changing that to this...

```
mysql_query("SET NAMES 'utf8'");
```

That should ensure that the connection is UTF-8.

Also try going through the list of items on this article... [http://blog.loftdigital.com/blog/php-utf-8-cheatsheet](http://blog.loftdigital.com/blog/php-utf-8-cheatsheet)
This lists the steps that are needed to make sure you're using UTF-8 from front to back in your site/application but in summary:

*   Check you've got PHP's mbstring extension and you have `mb_internal_encoding('UTF-8');` set in your script.
*   Make sure you're running this MySQL query after connecting to your database `mysql_query("SET NAMES 'utf8'");` which ensures the connection is UTF-8.
*   Set the HTTP header of your output... `header('Content-type: text/html; charset=UTF-8');`. This doesn't seem to be needed if you've set `mb_internal_encoding()` above but useful for debugging
*   Make sure the output encoding of your HTML page is set... `<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T15:10:23.900

try to do a select with a [charset collate](http://dev.mysql.com/doc/refman/5.0/en/charset-collate.html) and use utf8_bin like this:

```
SELECT k COLLATE utf8_bin AS k1
FROM t1
ORDER BY k1; 
```

if it works for you, you can change the collate for a column by using alter table, here is an example I used today for one of my dbs: (you could do this also with phpMyAdmin easily)

```
ALTER TABLE  `users` 
CHANGE  `name`  `name` VARCHAR( 255 ) 
CHARACTER SET utf8 COLLATE utf8_bin NOT NULL 
```

but make a backup first!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-28T05:19:02.107

I had the same problem and I fixed with:

mysql>charset utf8mb4

I read somewhere that utf8 is broken in mysql and utf8mb4 must be used instead.

# regex - perl grep 10行日志

> ID：11484710
> 
> 赞同：2
> 
> 时间：2012-07-14T14:55:29.353
> 
> 标签：regex, perl

在匹配正则表达式 "critical" 或 "error" 之前抓取 10 行代码很有趣。目前我正在打印 $_ ，它只给了我正则表达式匹配的行。

我在 perl 中写了以下内容：

```
#!/usr/bin/perl -w
use strict;
open LOG, "/Users/erangross/Projects/perl/log" or die;

while (<LOG>){
    if (/critical | error/){
        open (myFile, '>>parser_log.txt');
        print myFile $_;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T15:04:09.747

它必须是perl吗？GNU`grep`让您可以选择在匹配行之前/之后打印指定数量的“上下文”行，例如

```
grep --before-context=10 '(critical \| error)' parserlog.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T16:05:59.830

使用[`Tie::File`](https://metacpan.org/module/Tie%3a%3aFile). 自 Perl v5.7.3 以来它一直是核心模块，因此不需要安装。

`Tie::File`允许您随机访问文件中的记录，就好像它们是数组元素一样。问题被简化为简单地跟踪匹配的数组的索引，并打印索引小于 9 的所有元素。

```
use strict;
use warnings;

use Tie::File;

open my $plog, '>', 'parser_log.txt' or die $!;
tie my @log, 'Tie::File', '/Users/erangross/Projects/perl/log' or die $!;

for my $i (0 .. $#log) {
  next unless / critical | error /xi;
  my $start = $i > 9 ? $i - 9 : 0;
  print $plog $log[$_] for $start .. $i;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T15:10:54.813

使用数组。他们可以提供帮助。在这里，我将其用作一种 FIFO 或队列：

```
#!/usr/bin/perl
use warnings;
use strict;

open LOG, "<", "/Users/erangross/Projects/perl/log" or die "Can't open log: $!";
open my $parseLog, '>>', 'parser_log.txt') or die "Can't open output file: $!";

my @lastTenLines;

while (<LOG>){
    push @lastTenLines, $_; # add current line.
    shift @lastTenLines while @lastTenLines > 10; # remove lines outside your scope.
    print $parseLog @lastTenLines if /critical | error/x; # print if there is a find.
} 
```

# objective-c - 指向 Objective-C 函数调用中的数组的指针

> ID：11484711
> 
> 赞同：1
> 
> 时间：2012-07-14T14:55:38.270
> 
> 标签：objective-c, c, arrays

我想将一个 long long 的数组传递给一个目标 c 函数。如果可能的话，我希望将数组作为指针传递，这样就不会进行复制。我写了这段代码：

```
+ (int) getIndexOfLongLongValue: (long long) value inArray: (long long []) array size: (int) count
{
    for (int i =0; i < count; i++)
    {
       if (array[i] == value)
           return i + 1;
    }
    return 0;
} 
```

我经过

```
long long varname[count]; 
```

作为第二个论点。我想知道是否可以将此数组作为指针传递，或者此方法是否可以。我不需要指向 long long 的指针，而是指向数组的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:09:59.807

C 数组在传递给函数或方法时总是*衰减*为指针，因此在您的示例中不会复制它。由于运算符适用于所有指针，指向 的指针`long long`自动成为指向 的数组的指针。由于您的方法不会修改数组，因此您可能需要在 API 中添加以突出显示这一事实；除此之外，你的方法很好。`long long``[]``const`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T15:10:39.033

它*作为*指针传递（尽管语言迂腐）；没有任何东西被复制。`type[]`在大多数情况下，与`type*`.

要确认这一点，请查看`sizeof(array)`方法。你会看到它的大小与`sizeof(void*)`.

如果你真的想要一个指向数组的指针，即指向 long longs 的指针，你需要使用类似`type**`; 但想要这样做的唯一原因是如果您想从方法中修改底层数组指针，这几乎不是这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T15:09:37.593

Objective-C 只是常规 C 的一个非常薄的包装器，因此它的处理方式与 C 中的处理方式相同：通过引用传递。

```
+ (int)getIndexOfLongLongValue:(long long)value inArray:(long long *)array size:(int)count
{
    for (int i = 0; i < count; i++)
    {
        if (array[i] == value)
            return i + 1;
    }
} 
```

然后在调用函数的代码中： `int myIndex = [object getIndexOfLongLongValue: aValue inArray: varname size: count];`

# css - SharePoint2010 Html Elements 向右跳转

> ID：11484713
> 
> 赞同：0
> 
> 时间：2012-07-14T14:55:56.430
> 
> 标签：css, internet-explorer, sharepoint-2010

我在 SharePoint2010 中遇到了一个有趣的小问题。

似乎某些 HTML 元素突然向右跳了一段距离，由单击、双击或选择触发。

因此，如果单击一个 html 元素，它会突然向右移动，有时会向右移动，有时会向右移动一点。之后，它似乎修复了......

它似乎也只影响 IE，我无法在 Chrome 中重现它。

有没有人经历过类似的事情并找到了解决办法？

我知道这个问题没有示例等，但由于 SharePoint2010 页面的 HTML 和 CSS 和它一样大，我认为它不会有一点帮助，我不知道要分享什么片段......我试图查看是否在 CSS 中添加了某些内容（例如 Margin 或其他内容），但似乎并非如此。

# c# - 如何在 Windows 应用程序中使用用户控制窗口显示搜索结果？

> ID：11484718
> 
> 赞同：0
> 
> 时间：2012-07-14T14:56:28.790
> 
> 标签：c#

我的项目是独立的应用程序。我想使用用户控制窗口显示我的搜索结果。所以我在我的项目中添加了用户控制。我为它编写了附加到表单的代码。它正确连接。但我想使用该用户控制窗口的文本框显示我的搜索结果，所以我该怎么做。请在表格1中帮助我

```
tr.rtnTxtMake = text; 
```

用户控制

```
string txtMake;

public string rtnTxtMake
{
    get { return txtMake; }
    set { txtMake = value; }
} 
```

这是我的代码；如何显示此文本？它不适用于`txt_ree.Text = txtMake.ToString()`;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:38:54.973

假设您在用户控件中有一个`TextBox`调用`makeTextBox`，请创建一个这样的属性

```
public string TextMake
{
    get { return makeTextBox.Text; }
    set { makeTextBox.Text = value; }
} 
```

现在您可以像这样为您的用户控件分配一个文本（假设它被称为`tr`）：

```
tr.TextMake = "some text"; 
```

它将通过属性直接分配给TextBox。不需要存储文本的局部变量。

# javascript - jQuery 图像删除确认消息

> ID：11484732
> 
> 赞同：1
> 
> 时间：2012-07-14T14:58:05.180
> 
> 标签：javascript, jquery

我想知道是否有人可以帮助我。

首先，我真诚的道歉，因为我不太精通 JavaScript，有些人可能会觉得这是一个愚蠢的帖子，但任何帮助将不胜感激。

我目前正在使用下面的脚本来删除画廊图像。

```
<script type="text/javascript"> 
        Galleria.ready(function() {
            this.$('thumblink').click();

        $(".galleria-image").append( 
        "<span class='btn-delete ui-icon ui-icon-trash'></span>"); 
        $(".btn-delete").live("click", function(){  
        var img = $(this).closest(".galleria-image").find("img"); 
        $.msgbox("You are about to delete this image. It cannot be restored at a later date. Do you wish to continue?", {
        type: "alert",
          buttons : [
            {type: "submit", value: "Delete"},
            {type: "cancel", value: "Cancel"}
          ]
          },
          function(result) {
          if(result)

          // send the AJAX request
          $.ajax({
            url : 'delete.php',
            type : 'post',
            data : { image : img.attr('src'),  idnum: "VALUE", lid: "VALUE"},
            success : function(){
            img.parent().fadeOut('slow');
            }
        });               
    });
        return false;
    });     
});

</script> 
```

我现在在[这里](http://tutorialzine.com/2010/12/better-confirm-box-jquery-css3/)找到了一个更合适的 jQuery 确认脚本，我现在想尝试实现它。

使用`script.js`此站点中的文件和我现有的脚本，我尝试将它们结合起来并提出以下内容：

```
<script type="text/javascript"> 
Galleria.ready(function() {
    this.$('thumblink').click();
    $(".galleria-image").append( 
    "<span class='btn-delete ui-icon ui-icon-trash'></span>"); 
    $('.btn-delete').click(function(){
    var elem = $(this).closest(".galleria-image").find('.item'); 
        $.confirm({
            'title'     : 'Delete Confirmation',
            'message'   : 'You are about to delete this item. <br />It cannot be restored at a later time! Continue?',
            'buttons'   : {
                'Yes'   : {
                    'class' : 'blue',
                    'action': function(){
                        elem.slideUp();
                              $.ajax({
                                url : 'delete.php',
                                type : 'post',
                                data : { image : img.attr('src'),  idnum: "VALUE", lid: "VALUE"},
                                success : function(){
                                img.parent().fadeOut('slow');
                                }
                            }); 

                    }
                },
                'No'    : {
                    'class' : 'gray',
                    'action': function(){}  // Nothing to do in this case. You can as well omit the action property.
                }
                }
                }
            }
        });

    });

});
</script> 
```

我遇到的问题是，虽然页面加载，但它没有以默认`Gallery`图像格式加载，并且`trash icon`我用作删除图像的视觉触发器已在每个图像的底部消失。

我已经进入 JavaScript 控制台，它显示的错误是：`Uncaught SyntaxError: Unexpected token }`在我的代码中突出显示这一行作为问题：`$.confirm({`但我必须诚实地说我不太确定这意味着什么。

我已经尝试了很多改变代码的变体来尝试让它工作，不幸的是没有成功。

我只是想知道是否有人可以看看这个，并提供一些关于我哪里出错的指导。

非常感谢和亲切的问候

**工作解决方案**

```
<script type="text/javascript"> 
Galleria.ready(function() {
this.$('thumblink').click();
$(".galleria-image").append( 
"<span class='btn-delete ui-icon ui-icon-trash'></span>"); 
$('.btn-delete').click(function(){
var img = $(this).closest(".galleria-image").find('img'); 
    $.confirm({
        'title'     : 'Delete Confirmation',
        'message'   : 'You are about to delete this item. <br />It cannot be restored at a later time! Continue?',
        'buttons'   : {
            'Yes'   : {
                'class' : 'blue',
                'action': function(){
                    //elem.slideUp();
                          $.ajax({
                            url : 'delete.php',
                            type : 'post',
                            data : { image : img.attr('src'),  idnum: "VALUE", lid: "VALUE"},
                            success : function(){
                            img.parent().fadeOut('slow');
                            }
                        }); 

                }
            },
            'No'    : {
                'class' : 'gray',
                'action': function(){}  // Nothing to do in this case. You can as well omit the action property.
                 }
               }
            });
        });
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:15:34.597

您缺少一些大括号，这不能真正解决问题，但首先检查此代码，我已用必要的大括号格式化并让我们知道您的发现：

```
Galleria.ready(function() {
this.$('thumblink').click();
$(".galleria-image").append( 
"<span class='btn-delete ui-icon ui-icon-trash'></span>"); 
$('.btn-delete').click(function(){
var elem = $(this).closest(".galleria-image").find('.item'); 
    $.confirm({
        'title'     : 'Delete Confirmation',
        'message'   : 'You are about to delete this item. <br />It cannot be restored at a later time! Continue?',
        'buttons'   : {
            'Yes'   : {
                'class' : 'blue',
                'action': function(){
                    elem.slideUp();
                          $.ajax({
                            url : 'delete.php',
                            type : 'post',
                            data : { image : img.attr('src'),  idnum: "VALUE", lid: "VALUE"},
                            success : function(){
                            img.parent().fadeOut('slow');
                            }
                        }); 

                }
            },
            'No'    : {
                'class' : 'gray',
                'action': function(){}  // Nothing to do in this case. You can as well omit the action property.
                 }
               }
            });
        });
    }); 
```

您的成功调用函数也缺少`data`参数

# c++ - 如何修复：错误：从 'const MyClass*' 到 'MyClass*' 的无效转换

> ID：11484737
> 
> 赞同：2
> 
> 时间：2012-07-14T14:58:27.427
> 
> 标签：c++, casting, shared-ptr

我收到此编译错误：

```
error: invalid conversion from 'const MyClass*' to 'MyClass*' 
```

这是代码：

```
std::tr1::shared_ptr<MyClass> myClassA;
const MyClass* myClassB;
myClassA = std::tr1::shared_ptr<MyClass>(myClassB); // error here 
```

我想我理解错误，只是不知道如何解决。我需要 myClassB 成为 const 那么如何将 classB 转换/复制到 shared_ptr？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T15:00:01.580

您需要一个指向 const 对象的共享指针：

```
std::tr1::shared_ptr<const MyClass> myClassA;
                     ^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:02:12.877

您不能从 const MyClass 转到 MyClass。

```
myClassA = std::tr1::shared_ptr< **const** MyClass>(myClassB); 
```

# apache - Mod_Rewrite 意外行为 L 标志

> ID：11484739
> 
> 赞同：9
> 
> 时间：2012-07-14T14:58:41.380
> 
> 标签：apache, mod-rewrite

我的网络应用程序结构是：

```
/var/www/myapp/
    - www/
        - index.php
        - css.php
        - .htaccess 
```

虚拟主机配置为：

```
<VirtualHost *:80>
        ServerName www.example.org
        DocumentRoot /var/www/myapp/www
        DirectoryIndex index.php index.html
        <Directory /var/www/myapp/www>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride All
                Order allow,deny
                allow from all
        </Directory>
</VirtualHost> 
```

在 /var/www/myapp/www/.htaccess 中有：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase /
    RewriteRule css css.php [L,NC]
    RewriteRule .* index.php
</IfModule> 
```

现在，如果我调用 www.example.org，我会正确重定向到 index.php，但如果我调用 www.example.org/css，我仍然会始终重定向到 index.php。

如果我删除“RewriteRule .* index.php”行，然后调用 www.example.org/css，我会正确重定向到 css.php。

怎么了？非常感谢大家

======== 编辑 =========

```
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b7080058/initial] (3) [perdir /var/www/sviluppo/mattia_dev/example/www/] add path info postfix: /var/www/sviluppo/mattia_dev/example/www/DEV_2 -> /var/www/sviluppo/mattia_dev/example/www/DEV_2/css/example1/test.css
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b7080058/initial] (3) [perdir /var/www/sviluppo/mattia_dev/example/www/] strip per-dir prefix: /var/www/sviluppo/mattia_dev/example/www/DEV_2/css/example1/test.css -> DEV_2/css/example1/test.css
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b7080058/initial] (3) [perdir /var/www/sviluppo/mattia_dev/example/www/] applying pattern '^(DEV|TEST|PROD)\_[0-9]+\/(css|js|image|static)\/(.+)$' to uri 'DEV_2/css/example1/test.css'
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b7080058/initial] (2) [perdir /var/www/sviluppo/mattia_dev/example/www/] rewrite 'DEV_2/css/example1/test.css' -> 'css/example1/test.css'
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b7080058/initial] (3) [perdir /var/www/sviluppo/mattia_dev/example/www/] add per-dir prefix: css/example1/test.css -> /var/www/sviluppo/mattia_dev/example/www/css/example1/test.css
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b7080058/initial] (2) [perdir /var/www/sviluppo/mattia_dev/example/www/] trying to replace prefix /var/www/sviluppo/mattia_dev/example/www/ with /
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b7080058/initial] (5) strip matching prefix: /var/www/sviluppo/mattia_dev/example/www/css/example1/test.css -> css/example1/test.css
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b7080058/initial] (4) add subst prefix: css/example1/test.css -> /css/example1/test.css
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b7080058/initial] (1) [perdir /var/www/sviluppo/mattia_dev/example/www/] internal redirect with /css/example1/test.css [INTERNAL REDIRECT]
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b63188e8/initial/redir#1] (3) [perdir /var/www/sviluppo/mattia_dev/example/www/] strip per-dir prefix: /var/www/sviluppo/mattia_dev/example/www/css/example1/test.css -> css/example1/test.css
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b63188e8/initial/redir#1] (3) [perdir /var/www/sviluppo/mattia_dev/example/www/] applying pattern '^(DEV|TEST|PROD)\_[0-9]+\/(css|js|image|static)\/(.+)$' to uri 'css/example1/test.css'
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b63188e8/initial/redir#1] (3) [perdir /var/www/sviluppo/mattia_dev/example/www/] strip per-dir prefix: /var/www/sviluppo/mattia_dev/example/www/css/example1/test.css -> css/example1/test.css
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b63188e8/initial/redir#1] (3) [perdir /var/www/sviluppo/mattia_dev/example/www/] applying pattern '.*' to uri 'css/example1/test.css'
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b63188e8/initial/redir#1] (2) [perdir /var/www/sviluppo/mattia_dev/example/www/] rewrite 'css/example1/test.css' -> 'index.php'
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b63188e8/initial/redir#1] (3) [perdir /var/www/sviluppo/mattia_dev/example/www/] add per-dir prefix: index.php -> /var/www/sviluppo/mattia_dev/example/www/index.php
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b63188e8/initial/redir#1] (2) [perdir /var/www/sviluppo/mattia_dev/example/www/] trying to replace prefix /var/www/sviluppo/mattia_dev/example/www/ with /
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b63188e8/initial/redir#1] (5) strip matching prefix: /var/www/sviluppo/mattia_dev/example/www/index.php -> index.php
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b63188e8/initial/redir#1] (4) add subst prefix: index.php -> /index.php
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b63188e8/initial/redir#1] (1) [perdir /var/www/sviluppo/mattia_dev/example/www/] internal redirect with /index.php [INTERNAL REDIRECT]
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b6310db8/initial/redir#2] (3) [perdir /var/www/sviluppo/mattia_dev/example/www/] strip per-dir prefix: /var/www/sviluppo/mattia_dev/example/www/index.php -> index.php
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b6310db8/initial/redir#2] (3) [perdir /var/www/sviluppo/mattia_dev/example/www/] applying pattern '^(DEV|TEST|PROD)\_[0-9]+\/(css|js|image|static)\/(.+)$' to uri 'index.php'
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b6310db8/initial/redir#2] (3) [perdir /var/www/sviluppo/mattia_dev/example/www/] strip per-dir prefix: /var/www/sviluppo/mattia_dev/example/www/index.php -> index.php
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b6310db8/initial/redir#2] (3) [perdir /var/www/sviluppo/mattia_dev/example/www/] applying pattern '.*' to uri 'index.php'
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b6310db8/initial/redir#2] (2) [perdir /var/www/sviluppo/mattia_dev/example/www/] rewrite 'index.php' -> 'index.php'
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b6310db8/initial/redir#2] (3) [perdir /var/www/sviluppo/mattia_dev/example/www/] add per-dir prefix: index.php -> /var/www/sviluppo/mattia_dev/example/www/index.php
192.168.1.8 - - [14/Jul/2012:19:07:21 +0200] [www.example.org/sid#b747b6c0][rid#b6310db8/initial/redir#2] (1) [perdir /var/www/sviluppo/mattia_dev/example/www/] initial URL equal rewritten URL: /var/www/sviluppo/mattia_dev/example/www/index.php [IGNORING REWRITE] 
```

似乎发生了第一次重定向，但 mod_rewrite 并没有停止导致内部重定向。然后，更改后的 url 再次传递给 mod_rewrite 并发生第二次重定向，但现在匹配第二条规则。

我无法理解它，因为我放置了 [L] 标志只是为了确保 mod_rewrite 停止。

再次感谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-24T09:14:40.167

您错过了有关[`L`标志](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_l)的重要事实：

> 因此，重要的是，如果您在其中一个 [ , ] 上下文中使用[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)指令，**请采取明确的步骤来避免规则循环，而不是仅仅依靠 [L] 标志来终止一系列**规则的执行`.htaccess``<Directory>`

 ***来自：[L|last（标志）](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_l)；由我大胆*

这意味着，仅通过使用`L`不会有您想要的效果来防止内部重定向。发生在`INTERNAL REDIRECT`这里是因为它必须发生，你已经用你的`.htaccess`配置指定了它。该`L`标志*不是*阻止`INTERNAL REDIRECT`.

让我们仔细看看您的问题以及实际发生的情况：

> 我无法理解它，因为我放置了 [L] 标志只是为了确保 mod_rewrite 停止。

只是你对`L`国旗有错误的理解。它只会在当前重写时停止，这意味着`RewriteRule`它下面的指令不会在当前轮次（内循环）中处理。

如果更改的 URI`L`将重新注入下一轮（外循环），如以下[技术细节流程图](http://httpd.apache.org/docs/current/rewrite/tech.html)所示：

![http://httpd.apache.org/docs/current/rewrite/tech.html](../Images/baba7825c47e23f290143d6120582ec4.png)

为了突出`L`标志的作用和`INTERNAL REDIRECT`发生的位置，这是同一个图形，带有一些注释，用于您的特定（第一个）URI 重写：

![在此处输入图像描述](../Images/cad1cb69d220386c4b143ce46485f9e3.png)

它表明该`L`标志仅退出内部循环，但如果 URI 已被重写（更改） - 就像您的情况一样 - 外部循环会注意更改的 URI 将*再次*传递给您的所有重写规则。

相反，您可能想要制定一个条件，如手册该部分中的以下示例所示：

```
RewriteBase /
RewriteCond %{REQUEST_URI} !=/index.php
RewriteRule ^(.*) /index.php?req=$1 [L,PT] 
```

（[`PT`有它自己的手动输入](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_pt)，或多或少不是解决方案的一部分，只是注意到因为我按原样引用了示例）

你真正想要使用的是`END`标志：

```
RewriteRule css css.php [END,NC] 
```

但是，如果您有所需的 apache 版本（在 2.3.9 及更高版本中可用），请联系您的系统管理员。如果没有，则需要使用[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-25T06:27:58.593

hakre 的回答很好地说明了正在发生的事情。除了使用`END`标志之外，您还有更多选择：

*   用于`%{ENV:REDIRECT_STATUS}`防止任何进一步的重写。这将在内部重定向后发生变化。有关实际情况的更多信息，请参阅[此页面：](http://httpd.apache.org/docs/2.2/custom-error.html#custom)

    ```
    RewriteCond %{ENV:REDIRECT_STATUS} ^$
    RewriteRule css css.php [L,NC] 
    ```

*   用于`%{THE_REQUEST}`匹配对服务器发出的请求。由于在内部重定向时这不会改变，因此可用于防止进一步的重定向

    ```
    RewriteCond %{THE_REQUEST} ^(GET|POST)\ /css\ HTTP
    RewriteRule ^ css.php [L,NC] 
    ```

*   在查询字符串中使用虚拟变量。这将允许通过在链接中定义此变量来防止重定向，但我们将在此处使用它来防止多次传递：

    ```
    RewriteCond %{QUERY_STRING} !noredir=1
    RewriteRule css css.php?noredir=1 [L,QSA,NC] 
    ```

请注意，对于这些示例中的每一个，您都需要为每个单独的规则使用此构造。**

# erlang - Erlang - 在不同进程的 tcp 套接字上同时发送（..）可以吗？

> ID：11484742
> 
> 赞同：3
> 
> 时间：2012-07-14T14:59:03.447
> 
> 标签：erlang

我需要从不同的进程在 tcp 套接字上发送东西。是否允许在同一个套接字上同时发送？如果不是，如何实现同步化？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T15:04:24.937

是的，套接字的行为就像一个进程，接受来自任何其他进程的消息。请注意，如果消息的顺序很重要，则无法保证发送消息的顺序（仅每个发送过程的消息顺序）。

# java - 无法添加 CSS 文件

> ID：11484745
> 
> 赞同：2
> 
> 时间：2012-07-14T14:59:28.100
> 
> 标签：java, css, netbeans, javafx, javafx-2

请看下面的 JavaFX 和 CSS 代码。

**登录2.java**

```
package helloworld;

import javafx.application.Application;
import javafx.stage.*;
import javafx.scene.*;
import javafx.event.*;
import javafx.geometry.Pos;
import javafx.scene.control.*;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.HBox;
import javafx.scene.paint.Color;
import javafx.scene.text.Text;

public class Login2 extends Application
{
    private Text welcome, message;
    private Label userName, password;
    private Button btn;
    private GridPane grid;
    private TextField userNameField;
    private PasswordField passwordField;
    private Scene scene;
    private HBox hbox, hbox2;

    public static void main(String[]args)
    {
        launch(args);
    }

    @Override
    public void start(Stage stage)
    {
        //Intializing instance Varaibles
        welcome = new Text("Welcome");
        message = new Text();

        userName = new Label("User Name: ");
        password = new Label("Password: ");

        btn = new Button("Submit");
        btn.setOnAction(new Action());

        userNameField = new TextField();
        passwordField = new PasswordField();

        grid = new GridPane();
        grid.setAlignment(Pos.CENTER);
        grid.setVgap(10);
        grid.setHgap(10);

        //Creating the GUI

        hbox = new HBox();
        hbox.getChildren().add(btn);
        hbox.setAlignment(Pos.BOTTOM_RIGHT);

        hbox2 = new HBox();
        hbox2.getChildren().add(message);
        hbox2.setAlignment(Pos.BOTTOM_RIGHT);

        grid.add(welcome,0,0);
        grid.add(userName,0,1);
        grid.add(userNameField,1,1);
        grid.add(password,0,2);
        grid.add(passwordField,1,2);
        grid.add(hbox,1,3);
        grid.add(hbox2,1,4);

        scene = new Scene(grid,300,275);

        stage.setTitle("Welcome Form");
        stage.setScene(scene);

        scene.getStylesheets().add(Login2.class.getResource("Login.css").toExternalForm());
        stage.show();
    }

    private class Action implements EventHandler<ActionEvent>
    {
        public void handle(ActionEvent ae)
        {
            message.setFill(Color.CRIMSON);
            message.setText("You pressed the button");
        }
    }
} 
```

**登录.css**

```
/* 
    Document   : Login
    Created on : Jul 14, 2012, 8:04:31 PM
    Author     : Yohan
    Description:
        Purpose of the stylesheet follows.
*/

.root {

   -fx-background-image: url(Desert.jpg);
} 
```

当我运行它时，我收到以下错误。

> 应用程序启动方法中的异常线程“主”java.lang.RuntimeException 中的异常：com.sun.javafx.application.LauncherImpl.launchApplication1（未知来源）的 com.sun.javafx.application.LauncherImpl.access 中的应用程序启动方法中的异常$000(Unknown Source) at com.sun.javafx.application.LauncherImpl$1.run(Unknown Source) at java.lang.Thread.run(Thread.java:722) 原因：helloworld.Login2 处的 java.lang.NullPointerException。 start(Login2.java:80) at com.sun.javafx.application.LauncherImpl$5.run(Unknown Source) at com.sun.javafx.application.PlatformImpl$4.run(Unknown Source) at com.sun.javafx.application .PlatformImpl$3.run(Unknown Source) at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) at com.sun.glass.ui.win.WinApplication。access$100(Unknown Source) at com.sun.glass.ui.win.WinApplication$2$1.run(Unknown Source) ... 还有 1 个 Java 结果：1

上传的图像显示了我的文件夹结构。

为什么我收到此错误？我无法理解！无论如何，这是我的第三个 JavaFX 代码。请帮忙！

![在此处输入图像描述](../Images/412227bb49b66c0733860407ec5c2ae1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T16:16:30.013

在 Netbeans 中，使用默认项目设置，大多数时候在将非 java 资源文件添加到包结构中时，需要从头开始重建项目。这样，新资源将被复制到存储和运行已编译的 java 文件的“build”文件夹中（没有 NullPointerException）。可以通过右键单击项目并执行“清理并构建”来完成重建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T15:37:33.307

我必须同意包结构有点棘手，因为很容易忘记它是如何完成的，并且必须花一个小时在线阅读示例才能使您的必要结构正常工作。

我会尝试以下。创建一个名为`helloworld.support`（或其他合适的名称）的新包，然后将 CSS 文件移动到那里。然后你应该可以通过调用来加载它：

```
Login2.class.getResource("/helloworld/support/Login.css") 
```

（为清楚起见，删除了周围声明的其余部分）。

我将 CSS 文件移出源包的原因是几个月前我意识到每次我使用“Clean & Build”（在 Netbeans 7 中）时，它都会从我的源包中删除所有非 Java 文件，所以我所有的图像都丢失了，我不得不再次将它们移回。一旦我给图像提供了他们自己的包，Netbeans 就不理会它们了。

# python - 如何使用 Facebook 应用程序的 facepy 获取用户访问令牌

> ID：11484754
> 
> 赞同：2
> 
> 时间：2012-07-14T15:00:02.360
> 
> 标签：python, django, facebook, facebook-graph-api, fandjango

我正在使用`fandjango`和`facepy`构建 facebook 应用程序。

所以，这就是我的代码的样子。

```
from fandjango.decorators import facebook_authorization_required
from facepy import GraphAPI

@facebook_authorization_required(permissions=["publish_actions"])
def ViewPage (request):
    user_access_token = request.facebook.user.oauth_token
    ....
    profile_id = request.facebook.user.facebook_id
    graph = GraphAPI(access_token)
    og_path = "%d/feed" %profile_id
    ..
    graph.post( path = og_path, og_msg = message )
    .. 
```

当我打开页面时，它显示`OAuthError`. 我在这个网站上搜索，有些人提到`access_token`. 当我尝试在开发页面上打印访问令牌时，它向我展示了`Oauth Token Object`.. 即，它不是“访问令牌”（预期的“字符串”对象）。

那么，我在哪里做错了？以及我应该如何修复错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T04:14:56.167

```
@facebook_authorization_required(permissions=["publish_actions"])
def ViewPage (request):
    user_access_token = request.facebook.user.oauth_token.token
    ....

    graph = GraphAPI(access_token) 
```

`request.facebook.user.oauth_token`是`object`类型...

```
request.facebook.user.oauth_token.token will give you the access token 
```

# c# - 实体框架，存储库模式

> ID：11484757
> 
> 赞同：3
> 
> 时间：2012-07-14T15:00:31.613
> 
> 标签：c#, asp.net-mvc-3, entity-framework-4, repository-pattern

我正在尝试使用实体框架 - 存储库模式。(Asp.net C#, EF4)

我为每个数据库表创建存储库。但是当我加入表格时，会发生一个错误，说

**“指定的 LINQ 表达式包含对与不同上下文关联的查询的引用。”**

为避免错误消息，我将所有内容放在一个类中，如下所示：

```
public class WebOrderRepository
{
    private DbEntities context = new DbEntities(); //Web.config <add name="DBEntities" connectionString=" ...

    public IQueryable<WEBORDERHD> WebOrderHds
    {
        get { return context.WEBORDERHDs; }
    }

    public IQueryable<WEBORDERLN> WebOrderLns
    {
        get { return context.WEBORDERLNs; }
    }
} 
```

你能检查我的代码吗？

这是我的存储库类，

```
public class Repository : IDisposable
{
    protected ShkAdsEntities context;
    private bool _disposed;

    public Repository()
    {
        context = new ShkAdsEntities();
    }

    public void Dispose() //If define this class as Static then, 'Dispose': cannot declare instance members in a static class

    {
        DisposeObject(true);
        GC.SuppressFinalize(this);
    }

    ~Repository()
    {
        DisposeObject(false);
    }

    private void DisposeObject(bool disposing)
    {
        if (_disposed)
        {
        return;
        }

        if(disposing){
        if (context != null)
        {
            context.Dispose();
        }
        _disposed = true;
        }
    }
}

public class WebOrderHdRepository : Repository
{
    public IQueryable<WEBORDERHD> WebOrderHds
    {
        get { return context.WEBORDERHDs; }
    }

    public void Create(WEBORDERHD obj)
    {
    }

    public void Delete(WEBORDERHD ojb)
    {
    }

    public void SubmitChanges()
    {
        context.SaveChanges();
    }
}

public class WebOrderLnRepository : Repository
{
    public IQueryable<WEBORDERLN> WebOrderLns
    {
        get { return context.WEBORDERLNs; }
    }

    public void Create(WEBORDERLN obj)
    {
    }

    public void Delete(WEBORDERLN ojb)
    {
    }

    public void SubmitChanges()
    {
        context.SaveChanges();
    }
} 
```

这是用于测试的控制器，

```
[HttpGet]
public ActionResult repositoryTest()
{
    WebOrderHdRepository webOrderHdRepository = new WebOrderHdRepository();
    WebOrderLnRepository webOrderLnRepository = new WebOrderLnRepository();

    var result = (from x in webOrderHdRepository.WebOrderHds
          join u in webOrderLnRepository.WebOrderLns on x.OrderNo equals u.OrderNo
          select new {x.OrderNo}).SingleOrDefault();

    return Content(result.OrderNo);
} 
```

我尝试将上下文定义为静态的，

```
protected static ShkAdsEntities context = null;
public Repository()
{
    if (context == null)
    {
    context = new ShkAdsEntities();
    }
} 
```

然后，发生另一个错误，

```
Sequence contains more than one element
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.InvalidOperationException: Sequence contains more than one element

Source Error:

Line 116:        {
Line 117:            WebOrderHdRepository webOrderHdRepository = new WebOrderHdRepository();
Line 118:            WebOrderLnRepository webOrderLnRepository = new WebOrderLnRepository();  <== ERROR POINT
Line 119:
Line 120:            var result = (from x in webOrderHdRepository.WebOrderHds 
```

我搜索了很多实体框架存储库模式。但大多数事情都非常复杂。所以我想让它像上面一样简单。

请指教~

谢谢！

[编辑]

我尝试这样做，

```
using(WebOrderHdRepository webOrderHdRepository = new WebOrderHdRepository())
using (WebOrderLnRepository webOrderLnRepository = new WebOrderLnRepository())
{
.
. 
```

但发生错误，

```
The ObjectContext instance has been disposed and can no longer be used for operations that require a connection.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.ObjectDisposedException: The ObjectContext instance has been disposed and can no longer be used for operations that require a connection.

Source Error:

Line 114:        {
Line 115:            using(WebOrderHdRepository webOrderHdRepository = new WebOrderHdRepository())
Line 116:            using (WebOrderLnRepository webOrderLnRepository = new WebOrderLnRepository())
Line 117:            {
Line 118: 
```

我认为它尝试处理两次，但我不知道如何修复代码......

有知道的请指教~

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T15:15:06.140

您将能够将异常追溯到此语句：

```
var result = (from x in webOrderHdRepository.WebOrderHds
      join u in webOrderLnRepository.WebOrderLns on x.OrderNo equals u.OrderNo
      select new {x.OrderNo}).SingleOrDefault(); 
```

故障发生在[`SingleOrDefault`](http://msdn.microsoft.com/en-us/library/bb342451.aspx)- 您的收藏有多个结果。查看 MSDN 文档以确定是否应[`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/bb340482)改为使用。

特别关于`SingleOrDefault`行为，MSDN 解释（强调添加）：

> 返回序列的唯一元素，如果序列为空，则返回默认值；**如果序列中有多个元素，此方法将引发异常**。

关于您的 DbContext，您应该能够拥有单独的存储库，只需确保每个存储库都使用相同的上下文对象。我猜（没有看到原始实现）每个存储库都实例化了它自己的上下文对象。我没有看到您当前的实现有任何特殊问题，尽管有些人可能会提出类似以下的建议（*未经测试*）：

```
 public ActionResult repositoryTest() {
     ActionResult actionRes = default(ActionResult);

     using (ShkAdsEntities context = new ShkAdsEntities())
     using (WebOrderHdRepository webOrderHdRepository = new WebOrderHdRepository(context))
     using (WebOrderLnRepository webOrderLnRepository = new WebOrderLnRepository(context)) {

        var result = (from x in webOrderHdRepository.WebOrderHds
                      join u in webOrderLnRepository.WebOrderLns on x.OrderNo equals u.OrderNo
                      select new { x.OrderNo }).SingleOrDefault();

        actionRes = Content(result.OrderNo);
     }

     return actionRes;
  } 
```

**更新：**
如果您确实尝试了我在上面演示的存储库测试，您将需要进行一些重构。它不适用于您的课程的当前状态。这将是您需要发布的另一个问题。上面的代码片段只是您的查询的一个*示例*。正如@ Florim Maxhuni 所建议的那样，依赖注入（DI）确实是要走的路……仅取决于您的要求和时间限制。如果您的 DbContext 有问题，那将是一个不同的问题，应该在新线程中发布。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:34:41.397

每个存储库创建自己的上下文的实施是错误的。相反，必须将上下文注入到存储库中，构造函数注入在这里工作得很好。

这样您就可以完全控制上下文并在存储库之间共享它。例如，在 Web 应用程序中，您可以拥有一个具有单个请求生命周期的上下文。

# windows-runtime - 我可以检测我的漫游数据是否真的会漫游吗？

> ID：11484760
> 
> 赞同：1
> 
> 时间：2012-07-14T15:00:47.770
> 
> 标签：windows-runtime, winrt-xaml, roaming

我正在编写一个 C#/XAML Metro 应用程序，并计划让我的应用程序将一些数据放入漫游存储中。

据我了解，如果出现以下情况，漫游存储将[通过云自动漫游到用户的其他设备](http://msdn.microsoft.com/en-us/library/hh464917.aspx)：

*   用户使用 Live ID（不是普通的旧本地用户）登录 Windows，并且
*   漫游未被组策略禁用。

是否有一些 API 可以检测漫游数据是否会*真正*漫游？我很想在我的应用程序中加入一点标注，说“这些数据可以从你的其他设备获得”——更重要的是，“[如果你 30 天不使用该应用程序，这些数据将会丢失](http://msdn.microsoft.com/en-us/library/hh464917.aspx)”—— - 如果他们使用的是普通的旧本地用户，或者如果禁用了漫游，请忽略这些详细信息。

# css - 将两个 DIV 并排放置，同时保持图像垂直居中

> ID：11484764
> 
> 赞同：0
> 
> 时间：2012-07-14T15:01:11.720
> 
> 标签：css

样本：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<style type="text/css">
#left {display:table-cell; width:448px; height:336px; vertical-align:middle; background:black;}
#left img {display:block; margin:0 auto;}
#right {width:97px; height:326px; padding:5px; overflow-x:hidden; overflow-y:auto; background:black;}
</style>
</head>
<body>
<div id="left"><img src="http://dl.dropbox.com/u/4017788/Labs/image2.jpg" alt=""></div>
<div id="right">
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb2.jpg" alt=""></a>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb3.jpg" alt=""></a>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb1.jpg" alt=""></a>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb2.jpg" alt=""></a>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb3.jpg" alt=""></a>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb1.jpg" alt=""></a>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb2.jpg" alt=""></a>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb3.jpg" alt=""></a>
    <a href="#"><img src="http://dl.dropbox.com/u/4017788/Labs/thumb1.jpg" alt=""></a>
</div>
</body>
</html> 
```

如果我使用`div {float:left;}`，大图像将不再垂直居中。解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:07:39.607

我不完全确定你想要什么，但是我做了一个猜测并将其卡在 JS Fiddle [here](http://jsfiddle.net/Wf74D/)中。我只是将两个容器都设置为`float:left`并删除`display:table-cell`

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:48:08.157

### 看看这是否正常：http: [//jsfiddle.net/vmuwZ/2/](http://jsfiddle.net/vmuwZ/2/)

### CSS 更改：

```
#left {display:table-cell; width:448px; height:340px; vertical-align:middle; background:black; float: left;}
#left img {display:block; margin:20px auto;}
#right {width:100px; height:330px; padding:5px; overflow-x:hidden; overflow-y:auto; background:black; float: left;}​ 
```

# delphi - 在 TMonthCalendar 中获取第一个和最后一个可见日期

> ID：11484769
> 
> 赞同：1
> 
> 时间：2012-07-14T15:01:52.690
> 
> 标签：delphi

有没有办法找出 TMonthCalendar 中的第一个和最后一个可见日期？ ![如绿色圈出的那样](../Images/099e13b4bcdd296585c87f8b96cdbbfb.png)

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T15:19:49.700

使用[`MonthCal_GetMonthRange`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774701.aspx)：

> 检索表示月历控件显示的上限和下限的日期信息（使用 SYSTEMTIME 结构）。

```
var
  times: array[0..1] of TSystemTime;
......
MonthCal_GetMonthRange(MonthCalendar1.Handle, GMR_DAYSTATE, @times[0]); 
```

调用后，`times[0]`是一个系统时间记录，包含日历上显示的第一个日期，并`times[1]`描述了最后显示的日期。

对于屏幕截图中的日历，这将返回 6 月 25 日和 10 月 7 日。如果您通过`0`而不是`GMR_DAYSTATE`那么您将获得 7 月 1 日和 9 月 30 日。

# c++ - QCombobox 向下箭头图像

> ID：11484776
> 
> 赞同：4
> 
> 时间：2012-07-14T15:02:31.623
> 
> 标签：c++, qt, qtstylesheets

如何更改 Qcombobox 向下箭头图像？现在我正在使用这个 QSS 代码，但这不起作用，我无法删除向下箭头边框。

```
QComboBox
{
    border: 0px;
}

QComboBox::down-arrow
{   
    border: 0px;
    background-repeat: no-repeat;
    background-position: center center;
    background-image-width: 50px;
    border-image: url(./select-BG.png);
    heidth:50px;
    width:100px;
} 
```

这是屏幕截图：

[![图片](../Images/9ee86ed11748ddaf5427560be65441d3.png)](https://i.stack.imgur.com/rbrwL.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-12-09T08:49:03.840

这是一个很晚的答案，但我认为我在 Qt 论坛的某个地方找到了解决方案。

将边框设置为 0px 时，组合框箭头的整个样式似乎都被替换了。所以我使用`QComboBox::drop-down`将边框设置为 0x，然后使用`QComboBox::down-arrow`定义自定义箭头。下面的代码显示了对无法`color`正确更改文本属性的奇怪错误的附加修复。

```
QComboBox {
    color: black;
    font: 14px;
    padding: 1px 0px 1px 3px; /* This (useless) line resolves a bug with the font color */
}

QComboBox:focus {
    color: red;
}

QComboBox::drop-down 
{
    border: 0px; /* This seems to replace the whole arrow of the combo box */
}

/* Define a new custom arrow icon for the combo box */
QComboBox::down-arrow {
    image: url(Resources/DropDownArrow.png);
    width: 14px;
    height: 14px;
} 
```

我希望有人可以使用此信息并使其工作:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T22:22:31.490

箭头位于样式由子控件控制的按钮上`::drop-down`。因此，要删除边框，您可以使用：

```
QComboBox::drop-down 
{
    border: 0px;
} 
```

# php - 如何在php中相互减去图像

> ID：11484783
> 
> 赞同：0
> 
> 时间：2012-07-14T15:03:58.867
> 
> 标签：php, image-processing, png

我有一系列 PNG 文件，它们随着时间的推移表现出细微的差异。有没有办法使用 PHP 来获取成对的 PNG 并创建第三个文件来表示它们之间的差异？

我想可能可以用[Slicer](http://www.slicer.org/)做类似的事情，但是（1）这对我的需求来说可能有点矫枉过正，（2）我正在寻找 PHP 原生的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:07:23.393

试试 Imagick 的`compareImageChannels()`：[http ://php.net/manual/en/imagick.compareimagechannels.php](http://php.net/manual/en/imagick.compareimagechannels.php)

请注意，PHP 本身没有本机图像处理功能。与 PHP 中的图像有关的任何事情都由外部库的插件提供。

# php - 如何将 jquery 中的值存储到 php 变量中？

> ID：11484787
> 
> 赞同：1
> 
> 时间：2012-07-14T15:04:16.937
> 
> 标签：php, jquery

有没有办法将从 Jquery 检索到的值存储到 php 变量中？我想存储在 php 变量中的 jquery 值是这样的：

```
$(this).attr("title"); 
```

如何将其存储到 php 变量中？有办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:12:41.610

你的问题有点含糊，但简短的回答是否定的。但是，当然，您可以使用 jQuery 向 PHP 发出 AJAX 服务器请求并将数据传输到服务器端。

例子：

查询：

```
 var theTitle = $(this).attr("title");

        $.ajax({
            url: '/URL/TO/PHP/FILE.php',
            type: 'POST',
            data: {
                title: theTitle
            },
            success: function( data )
            {
              //data is whatever your PHP script returns
            },
            error: function(xhr) {
              // if your PHP script return an erroneous header, you'll land here
            }
        }); 
```

和 PHP：

```
 <?php

          if ( $_POST ) {

            echo $_POST[ 'title' ];  // this is what you passed from jQuery

          }

        ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T15:05:47.437

你有两个选择：

1.  使用 AJAX 请求将变量的值发送回服务器
2.  使用表单提交值

请记住，PHP 在服务器上运行，并且在 javascript 代码开始在客户端上运行之前，它的执行已经终止了很长时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T15:04:50.077

不，当然不可能。不仅不可能，而且没有任何意义。PHP 在服务器上运行，而 jQuery 在 PHP 脚本完成执行后很晚才在客户端上运行。因此，当 jQuery 脚本在客户端上运行时，没有任何 PHP 变量。

因此，您可以使用表单、链接或 AJAX 调用将值发送回服务器。

# ruby-on-rails - 如何使用 domain.name 设置 'config.action_mailer.default_url_options' 的值？

> ID：11484790
> 
> 赞同：3
> 
> 时间：2012-07-14T15:04:44.863
> 
> 标签：ruby-on-rails, ruby-on-rails-3, configuration, actionmailer

我必须为我的设计使用设置这个。
但我的应用程序允许用户通过 2 个域进行访问。
我想用用户访问的域设置 'config.action_mailer.default_url_options = { :host =>'。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T19:54:51.287

如果您想要实现的是您发送的电子邮件中的 URL 是使用当前主机或域构建的，则 default_url_options 方法将不起作用，因为它仅在应用程序启动时设置一次 - 请求对象在该上下文中不可用AFAIK，但仅限于控制器操作。

您可以尝试在邮件程序类的电子邮件中生成 URL，而不使用默认主机，如下所示（未测试）：

```
class Mailer < ActionMailer::Base

  def welcome(user, host)
    @url = url_for(host: host, controller: ..., action: ...) 
    # construct rest of email here 
  end

end 
```

然后使用请求中的适当主机从您的控制器调用它：

```
Mailer.welcome(current_user, request.host).deliver 
```

# iphone - 如何避免滚动视图内的 UIView 框架重叠

> ID：11484792
> 
> 赞同：0
> 
> 时间：2012-07-14T15:04:58.960
> 
> 标签：iphone, uiview

我在 ScrollView 中有 6 个 UIView，并使用 panGestureRecognizer 对象将它们移动到 ScrollView 中。我想在移动到重叠时避免每个 UIView。

是否有我们用于 UIView 对象的交集的特定函数或属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:10:17.817

您可以使用：

```
CGRectContainsPoint
CGRectContainsRect 
```

确定视图或点的边界是否重叠。

# mysql - 如何为没有记录的日期优化匹配的日期范围表？

> ID：11484793
> 
> 赞同：2
> 
> 时间：2012-07-14T15:05:01.703
> 
> 标签：mysql, sql, query-optimization

考虑下表：

```
tweets                        daterange
---------------------------   ----------------
tweet_id  nyse_date   class   _date
---------------------------   ----------------
 1        2011-03-12  2       2011-03-11
 2        2011-03-12  1       2011-03-12
 3        2011-03-12  1       2011-03-13
 4        2011-03-12  1       2011-03-14
 5        2011-03-12  0       2011-03-15
 7        2011-03-13  1
 8        2011-03-13  2
 9        2011-03-13  3
10        2011-03-14  3 
```

每条推文都分配了一个“类”，可以是 1、2 或 3。我需要了解数据范围内每天每个类的推文数量。因此，即使 and 上没有推文`2011-03-11`，`2011-03-15`我仍然需要将该日期包含在结果集中，如下所示：

```
nyse_date   total  class1  class2  class3
-----------------------------------------
2011-03-11  0      0       0       0
2011-03-12  5      3       1       0
2011-03-13  3      1       1       1     
2011-03-14  1      0       0       1
2011-03-15  0      0       0       0 
```

我尝试了以下查询，但它只是超时（它不应该因为数据库不是那么大）：

```
SELECT
  t.nyse_date,
  COUNT(CASE WHEN t.nyse_date = d._date THEN 1 END) total, 
  SUM(t.class=1) as neu,
  SUM(t.class=2) as pos,
  SUM(t.class=3) as neg
FROM tweets t
CROSS JOIN
  daterange d
GROUP BY t.nyse_date
ORDER BY t.nyse_date ASC 
```

这是`EXPLAIN`

```
id select_type table type possible_keys key  key_len ref    rows    Extra
---------------------------------------------------------------------------------------------------
1  SIMPLE      d     ALL  NULL          NULL NULL    NULL   148     Using temporary; Using filesort
1  SIMPLE      t     ALL  NULL          NULL NULL    NULL   560783  Using join buffer 
```

我究竟做错了什么？是否有更有效的方法来确保包含 daterange 表中的所有日期？

`edit`: 我也试过这个查询，但结果保持不变 - 它一直运行到超时。

```
SELECT 
  t.nyse_date,
  COUNT(t.tweet_id) AS total, 
  SUM(t.class=1) AS neu,
  SUM(t.class=2) AS pos,
  SUM(t.class=3) AS neg
FROM tweets t
LEFT JOIN
  daterange d
  ON t.nyse_date = d._date
GROUP BY t.nyse_date
ORDER BY t.nyse_date ASC 
```

这是`EXPLAIN`

```
id select_type table type possible_keys key  key_len ref  rows    Extra
-------------------------------------------------------------------------------------------------
1  SIMPLE      t     ALL  NULL          NULL NULL    NULL 560783  Using temporary; Using filesort
1  SIMPLE      d     ALL  NULL          NULL NULL    NULL 148 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T16:56:56.720

您的查询运行缓慢的原因是它没有使用`tweets`表上的任何索引。

您要做的是在表中的`(sp100_id, nyse_date)`列上创建一个复合索引`tweets`，然后运行此查询：

```
SELECT     
    a.sp100_id,
    b._date,
    COALESCE(c.total,0) AS total,
    COALESCE(c.neu,0) AS neu,
    COALESCE(c.pos,0) AS pos,
    COALESCE(c.neg,0) AS neg,
    COALESCE(c.spamneu,0) AS spamneu
FROM
    sp100 a
CROSS JOIN 
    daterange b
LEFT JOIN
(
    SELECT 
        sp100_id,
        nyse_date, 
        COUNT(1) AS total,
        COUNT(CASE class WHEN 1 THEN 1 END) AS neu,
        COUNT(CASE class WHEN 2 THEN 1 END) AS pos,
        COUNT(CASE class WHEN 3 THEN 1 END) AS neg,
        COUNT(CASE WHEN class = 1 AND type = 1 THEN 1 END) AS spamneu
    FROM tweets 
    GROUP BY sp100_id, nyse_date
) c ON 
    a.sp100_id = c.sp100_id AND b._date = c.nyse_date
ORDER BY 
    a.sp100_id, b._date 
```

* * *

## [SQLFiddle 演示](http://sqlfiddle.com/#!2/e94fa/3/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T16:55:23.787

我想你很接近。但您可能想要左侧的日期。

```
SELECT 
    d.nyse_date,
    COUNT(t.tweet_id) AS total, 
    SUM(t.class=1) AS neu,
    SUM(t.class=2) AS pos,
    SUM(t.class=3) AS neg
FROM daterange d LEFT OUTER JOIN tweets t t.nyse_date = d._date
GROUP BY d.nyse_date
ORDER BY d.nyse_date ASC 
```

没有必要对索引下结论。在假设太多之前，只需以正确的方式尝试查询。

**编辑**

当我第一次写这篇文章时，我没有意识到你的表对 dat 列使用了不同的名称。我使用无效列编写了查询——没有 d.nyse_date。如果您已将其更改为 t.nyse_date 或只是删除了限定别名而不是将其更改为正确的列引用 d._date，那么我认为这解释了我们看到的问题，即包含第 15 个的数据没有返回，因为它将对内部表中的值进行分组。

这是应该工作的版本：

```
SELECT 
    d._date,
    COUNT(t.tweet_id) AS total, 
    SUM(t.class=1) AS neu,
    SUM(t.class=2) AS pos,
    SUM(t.class=3) AS neg
FROM daterange d LEFT OUTER JOIN tweets t t.nyse_date = d._date
GROUP BY d._date
ORDER BY d._date ASC 
```

# css - CSS在IE9上悬停很慢

> ID：11484794
> 
> 赞同：0
> 
> 时间：2012-07-14T15:05:34.153
> 
> 标签：css, performance, hover, internet-explorer-9

我正在一个网站上工作，该网站的首页在大多数浏览器（Chrome、FF、IE8）中都可以正常工作，但是在 IE9 中检查它发现页面非常慢。我认为我在缩略图上使用的 CSS 悬停是造成这种情况的原因。但是，我不是 100% 确定。

尝试过的东西 - 禁用所有插件，没有变化 - 改用透明 png，没有变化 - 使用 jQuery 来实现效果，没有变化 - 在页面 Javacript 中使用，没有变化 - 尝试删除高度/宽度（在此处进行一些其他讨论）， 没变

有问题的网站：http: [//funslots.eu](http://funslots.eu)

CSS悬停确实导致了这个还是我错过了其他东西？

# javascript - 锚标记上的 onclick 事件在 IE 中有效，但在 Firefox 和 Chrome 中无效

> ID：11484795
> 
> 赞同：2
> 
> 时间：2012-07-14T15:05:34.753
> 
> 标签：javascript, internet-explorer, firefox, google-chrome, onclick

这是 HTML 代码的相关部分：

<a id="interest" name="interest" href="#" value=1 onclick="alert(this.value)";">有兴趣</a>

警报选择值并在 IE 中运行时显示，但在 Chrome 和 Firefox 中显示未定义。

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:18:04.363

您可以使用新的 HTML5 data-* 属性，如下所示：

```
<a id="interest" name="interest" href="#" data-value="1" onclick="alert(this.dataset.value);">Interested</a>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

这仅适用于支持 HTML5 的浏览器。要访问 data- 属性，您将使用`dataset`附加到元素的对象（例如`data-value`变为`dataset.value`.）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T15:18:11.077

一些东西：

1）标签中的额外空格。`< a>`应该是`<a>`。

`onclick`2）您的属性中的额外引号。应该是`onclick="alert(this.value);"`。

3)`value`不是锚元素的有效属性。

# facebook - 如何使用 Graph API 或 FQL 获取应用程序的 Open Graph Insights

> ID：11484796
> 
> 赞同：1
> 
> 时间：2012-07-14T15:05:35.393
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我想获得开放图表的见解，例如管理面板中显示的已发布操作数、印象数、推荐数等。

有没有办法使用 Graph API 或 FQL 获取这些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:46:48.940

是的，

只要您拥有 read_insights 扩展权限，您就可以使用开放图形 api 检索。

一些您可能会觉得有用的链接

[https://developers.facebook.com/docs/reference/api/insights/](https://developers.facebook.com/docs/reference/api/insights/) https://developers.facebook.com/docs/reference/fql/insights/

# findstr - Findstr 命令在文本文件中查找 IP 范围

> ID：11484800
> 
> 赞同：0
> 
> 时间：2012-07-14T15:05:55.717
> 
> 标签：findstr

我是我的脚本，我发出了 Arp-a 命令并将其传送到文本文件。需要 findstr 命令在 ARP 文本文件中查找 IP 范围。

# ios - iOS：为 uiTabBarItem 设置动画

> ID：11484802
> 
> 赞同：1
> 
> 时间：2012-07-14T15:06:27.873
> 
> 标签：ios, animation, uiview, uitabbaritem

我正在尝试在我的应用程序中为 UITabBarItem 设置动画。我想让图像“脉动”，向用户表明有新的东西。

我一直在寻找一段时间，但我没有找到任何东西。我将使用 UIView 的动画，但我找不到访问 uitabbaritem 视图的方法。你有想法吗 ？谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T15:44:08.800

好吧，如果您查看 UIBarItem（超类），就会发现 UIImage 属性。如果您查看 UIImage，您将看到“+ (UIImage *)animatedImageWithImages:(NSArray *)images duration:(NSTimeInterval)duration”属性。

因此，我假设（但没有测试）您可以创建一系列图像，这些图像在排序时会执行您想要的操作。

或者，您可以子类化 UIBarButtonItem，并提供您自己的“setTag：”方法以拦截该消息，并使用特殊值来表示您想要脉冲和/或其他状态。

该方法将正确获取图像， CGImageRef 支持它，摆弄它（颜色，不透明度等），然后执行 super.image = 修改后的图像。不知道这是否真的有效，但至少可以给你一些想法。

# eclipse - 如何在eclipse中创建库并在项目中使用

> ID：11484805
> 
> 赞同：-1
> 
> 时间：2012-07-14T15:06:43.827
> 
> 标签：eclipse, maven

我有一个 Maven 依赖库，我想在另一个项目中使用它，所以有没有办法将它（我不知道在哪里）保存为公共库并将其导入项目中。

任何想法将不胜感激:)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T21:38:51.713

如果我明白你在说什么，你只是想使用图书馆？这似乎很明显，或者您是 Maven 的真正新手：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>3.0.0.RELEASE</version>
</dependency> 
```

如果您正在开发自己的，您只需要运行 mvn install 来编译、打包并将其“保存”在您的存储库中。

无论哪种情况，您都应该阅读这本很棒（而且免费！）的书： http: [//www.sonatype.com/books/mvnref-book](http://www.sonatype.com/books/mvnref-book)。

如果我弄错了，请尝试改写或解释您真正想要的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T15:50:57.897

我发现这个[http://www.avajava.com/tutorials/lessons/how-do-i-create-an-eclipse-user-library-for-the-tomcat-jar-files.html](http://www.avajava.com/tutorials/lessons/how-do-i-create-an-eclipse-user-library-for-the-tomcat-jar-files.html)它很有用，但我想导入现有库

# jquery - 将鼠标悬停在子菜单上时防止导航项上的 jquery 背景图像精灵动画

> ID：11484807
> 
> 赞同：0
> 
> 时间：2012-07-14T15:07:13.693
> 
> 标签：jquery, css, animation, navigation

我有以下脚本处理导航栏中项目的背景图像动画：

```
$j(function() {
   $j(".menu-item").find(".bottom_nav").hover(function () {
      $j(this).animate( {
         backgroundPosition : '0px 35px'}
      , 300); }
   , function () {
      $j(this).animate( {
         backgroundPosition : '0px 0px'}
      , 600); }
   ); 
}); 
```

这很好用，除了当导航项有一个子菜单并且用户将鼠标悬停在子菜单上时，我不希望此函数中的第二个动画触发，即我希望 backgroundPosition 保持为“0px 35px”。这将按原样工作，但子菜单位于 .bottom_nav div 之外。菜单/子菜单的标记结构由 Wordpress 主题处理，我不知道如何更改它。这是一个屏幕截图，可以让您了解标记：

![在此处输入图像描述](../Images/c95728de36bb53d0eaec57411a013955.png)

如您所见`<ul class="sub-menu">`，它位于 .bottom_nav div 之外。

[您可以在此页面](http://soteriabrighton.co.uk)上看到正在运行的导航项。导航栏中名为“新闻”的第二项有一个下拉子菜单，我希望导航项“新闻”上的背景颜色在悬停在此子菜单上时保持绿色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:47:45.907

我通过添加以下内容对此进行了排序：

```
$j(function() {
   $j(".sub-menu").hover(function () {
      $j(this).closest('.menu-item').find(".bottom_nav").stop().animate( {
         backgroundPosition : '0px 35px'}
      , 300); }
   , function () {
      $j(this).closest('.menu-item').find(".bottom_nav").stop().animate( {
         backgroundPosition : '0px 0px'}
      , 600); }
   ); 
}); 
```

# regex - 如何使用 Regexp::Grammars 匹配多行模式？

> ID：11484813
> 
> 赞同：3
> 
> 时间：2012-07-14T15:07:47.387
> 
> 标签：regex, perl, grammar, regexp-grammars

我是 Regexp::Grammars 的新手，在匹配多行模式时遇到了麻烦。我有这个输入：

```
my $text = <<EOD;
HEADER:
This is a multi-line section, because the
second line is down here.

EOD 
```

这个语法：

```
use Regexp::Grammars;
my $parser = qr{
  <nocontext:>
  <doc>
  <rule: doc>           <[section]>+
  <rule: section>       <label> : <text> (\n\n | $)
  <token: label>        [A-Z0-9_&/ -]+
  <token: text>         [^\n]*
}xms; 
```

我只匹配该部分的第一行，但我想将所有文本捕获到空行或输入结尾。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T18:28:58.123

一种解决方案是更改`<text>`如下：

```
<token: text>         (?:(?!\n\n).)* 
```

这匹配 0 个或多个不是换行符后跟另一个换行符的字符。这可能不是最好的解决方案，但它确实有效。

# nfc - 如何在 Android 中获取 MIFARE 访问条件

> ID：11484814
> 
> 赞同：0
> 
> 时间：2012-07-14T15:07:49.727
> 
> 标签：nfc, mifare

我这样做的方法是从块3中读取数据并从结果中选择适当的字节以获得访问条件（例如：FF 07 80 69）

这样，如果我没有 keyA 或 keyB，我就无法从块 3 中获取数据。

还有其他方法可以获取访问条件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:00:58.893

不，读取 MIFARE Classic 任何块的唯一方法是首先使用密钥 A 或密钥 B 进行身份验证。没有捷径。

# android - 在 Android 中将符号转换为 HTML 实体代码

> ID：11484820
> 
> 赞同：1
> 
> 时间：2012-07-14T15:09:17.327
> 
> 标签：android, html, formatting, symbols, spannable

是否有任何类可以在编辑文本框中键入的字符串中获取符号并将其替换为 HTML 实体代码？不取 HTML 实体代码并显示符号。

例如：如果一个字符串是“2∏”，是否有任何预先构建的东西可以接受它并返回“2∏”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:20:27.813

是的... [TextUtils](http://developer.android.com/reference/android/text/TextUtils.html)帮助器类包含在 Android API 中

此类具有 HTML 编码方法和许多其他有用的功能

```
return TextUtils.htmlEncode("2∏"); 
```

此方法的文档是[htmlEncode](http://developer.android.com/reference/android/text/TextUtils.html#htmlEncode%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:43:33.000

我最终使用了 HTML.to（跨区文本）。

# android - Android ProgressDialog 不起作用。创建新活动时

> ID：11484828
> 
> 赞同：0
> 
> 时间：2012-07-14T15:10:06.140
> 
> 标签：android

我在这里搜索了大多数“progressDialog not working”线程，但似乎没有一个答案对我有用。

我正在尝试创建一个新活动，该活动调用在不同线程上执行的方法（最多需要 30-5 秒）。

```
public class FLActivity extends ListActivity {

    private ProgressDialog mProgressDialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mProgressDialog = ProgressDialog.show(FLActivity.this, "", 
                                              "Loading...");

        OtherClass.LongDurationMethodWhichStartsAWorkedThread();

        mProgressDiagog.dismiss();
    }
} 
```

长期的方法是：

```
// in some other class
public static LongDurationMethodWhichStartsAWorkedThread() {
    Runnable r = new FFThread();
    Thread thread = new Thread(r);

    thread.start();
    try {
        thread.join();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch  (Exception e) {
        e.printStackTrace();
    }
} 
```

我已经使用 thread.join() 等待工作线程执行然后继续。

但是，不会显示任何消息。

任何人都可以看到问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:20:38.733

`LongDurationMethodWhichStartsAWorkedThread();`将立即返回，因为启动线程不是阻塞调用。因此，可能正在发生的事情是您的进度对话框正在显示，然后几乎立即清除，这让您认为它根本没有显示。

相反，您应该使用 Thread/Handler 或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来实现长时间运行的操作并显示用户进度。

[这个页面很好地概述](http://xoriant.com/blog/mobile-application-development/android-async-task.html)了如何实现它，虽然它肯定不是唯一的选择，谷歌搜索“AsyncTask 示例”会给你很多选择。

```
private class LongOperation extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {
        // perform long running operation operation
        return null;
    }

    /* (non-Javadoc)
     * @see android.os.AsyncTask#onPostExecute(java.lang.Object)
     */
    @Override
    protected void onPostExecute(String result) {
        // execution of result of Long time consuming operation
    }

    /* (non-Javadoc)
     * @see android.os.AsyncTask#onPreExecute()
     */
    @Override
    protected void onPreExecute() {
    // Things to be done before execution of long running operation. For example showing ProgessDialog
    }

    /* (non-Javadoc)
     * @see android.os.AsyncTask#onProgressUpdate(Progress[])
     */
    @Override
    protected void onProgressUpdate(Void... values) {
      // Things to be done while execution of long running operation is in progress. For example updating ProgessDialog
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T15:26:54.120

问题是当您从主线程调用 thread.join() 时，您的 UI 线程被阻塞。所以它不能显示任何对话框，因为它只是在等待你的工作线程完成。我可以向你推荐两件事：

1.  使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)在后台运行繁重的操作，比创建自己的线程并与 UI 线程同步更容易
2.  [在Activity.onCreateDialog](http://developer.android.com/reference/android/app/Activity.html#onCreateDialog%28int%29)辅助方法中创建所有对话框并使用 Activity.showDialog 显示它们，这将帮助您处理配置更改。

# string - 计算所有可能的序列，直到给定长度

> ID：11484831
> 
> 赞同：0
> 
> 时间：2012-07-14T15:10:09.880
> 
> 标签：string, perl, combinations, bioinformatics

我的问题与生物信息学有关，特别是蛋白质序列，但是实际上并不需要生物学知识。我正在尝试在 Perl 中找到解决此问题的有效方法：

蛋白质序列基本上是长度不同的序列或字符串，由 20 个氨基酸或字符的组合组成。

因此，长度为 1 时，将有 20 种可能性。问题是每增加 1 个字符，可能性的数量就会大大增加。

我想计算每个长度的每个序列的另一个计算。蛋白质序列可以是数百甚至数千个氨基酸。我只需要获取所有可能的序列来执行此操作。

编辑：我意识到不可能计算每个长度，我不需要这样做，但我想计算一个合理的长度，不会接近宇宙的长度。

关于最有效的编码方式有什么建议吗？

编辑：我真的不需要为 1000 个序列执行此操作，我只是对我不知道的想法、资源、功能等感兴趣，这可能有助于我理解最有效的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T16:45:40.463

推荐的`Math::Combinatorics`模块不支持替换排列，这是您解决此问题所需的，否则您的蛋白质永远不会超过 20 个氨基酸。

[`Algorithm::Combinatorics`](https://metacpan.org/module/Algorithm%3a%3aCombinatorics)将完成这项工作，并且部分用 C 编写，因此它应该表现良好。

这是一个生成所有氨基酸对的示例。我只展示了输出的前几行，因为即使这样也会产生 400 种变化！

```
use strict;
use warnings;

use Algorithm::Combinatorics 'variations_with_repetition';

my @acids = qw/ ala arg asn asp cys gln glu gly his ile leu lys met phe pro ser thr trp tyr val /;

my @proteins = variations_with_repetition(\@acids, 2);

print "@$_\n" for @proteins; 
```

**输出**

```
ala ala
ala arg
ala asn
ala asp
ala cys
ala gln
ala glu
ala gly
ala his
ala ile
ala leu
ala lys
ala met
ala phe
ala pro
ala ser
ala thr
ala trp
ala tyr
ala val
arg ala
arg arg
arg asn
arg asp
arg cys
arg gln
arg glu
arg gly
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T15:19:49.647

`20^1000`是一个*非常* [大的数字](http://www.wolframalpha.com/input/?i=20%5E1000)。您说您需要对每个序列进行一些计算，如果不扩展到多台计算机，这实际上是不可能的。即使每秒进行 100 万次计算，完成计算也需要[宇宙年龄的许多倍](http://www.wolframalpha.com/input/?i=20%5E1000%20/%201000000%20seconds)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T15:30:47.570

鉴于你的措辞涉及每个已知长度的每个序列，这个问题*永远不会*收敛到一个合理的结果——你会继续走向无穷大的长度。此外，您的计算将包括许多与现实无关的序列，或二肽和巨大分子之间的比较。即使您将计算限制在已知最大蛋白质的长度（titin，~34,350 个氨基酸），它仍然是一个非常昂贵的计算。

作为替代建议：您是否考虑过将其限制在实际已知存在或可以从遗传数据库中预测的蛋白质？这会将工作量减少到几千个生物学相关序列，并且对于大多数生物信息学应用，遗传或序列数据可以从结构良好的数据库中广泛获得。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-14T16:01:33.107

为了在`perl`我通常转向 中生成排列`Math::Combinatorics`，这里有一个程序片段，它一次返回 1、2、3 的所有排列：

```
#!/usr/bin/perl -l

use Math::Combinatorics;

$, = " ";

@n = (1 .. 3);
$permuter = Math::Combinatorics->new(data => \@n);

while(@perm = $permuter->next_permutation())
{
  print @perm;
} 
```

输出：

```
1 2 3
1 3 2
2 1 3
2 3 1
3 1 2
3 2 1 
```

但是请注意其他答案的建议，正如所述，这是一个呈指数增长的问题，因此您需要某种方式来限制您的搜索空间。

# java - 用于动态验证的 API，可使用 XML 或属性文件进行配置

> ID：11484832
> 
> 赞同：1
> 
> 时间：2012-07-14T15:10:18.590
> 
> 标签：java, validation

我即将开始一个数据迁移项目。（Oracle DB 的 Lotus 注释）

它需要大量验证。

流程是这样的

-> 读取转换为对象 -> 验证 -> 插入数据库。

我正在考虑通过 XML 或属性文件进行验证以使其可配置。

一旦对象被翻译，它将查看 xml/文本文件并检索每个字段的验证。我假设不同类型的验证将是命令对象。

XML 将包含要调用的命令对象。

例如...

验证对象报告包含标题、产品。

在验证期间，它将查看 XML 并验证字段。当我需要添加不同类型的验证时，我只需要对命令对象进行编码并更改 xml。

这将增强可重用性和配置。

概括：

有没有我可以使用的 API？我正在研究休眠验证器。

[http://www.hibernate.org/subprojects/validator.html](http://www.hibernate.org/subprojects/validator.html)

如何将验证的结构存储在 xml 中？看来我也需要使用反射。

任何帮助将不胜感激。？？？？

# image-processing - 如何计算与图像大小相关的帧率

> ID：11484834
> 
> 赞同：0
> 
> 时间：2012-07-14T15:10:27.403
> 
> 标签：image-processing, camera, frame

我正在使用具有自己软件的相机“Mikrotron EoSens MC1362”，我已经实现了一种算法，并希望创建一个程序，该程序通过相机捕获数据并实时进行处理。

问题是，在原始软件中，我可以看到每当我改变图像尺寸时，最大帧率和快门时间都会改变，所以我需要找到一个公式将这些参数联系在一起。

例如，对于图像尺寸 (512x512)，最大帧速率 = 1733，快门 = 2320 微秒，对于全分辨率 (1280x1024)，最大帧速率 = 430，快门时间为 2319。相机的轻拍模式为 8x8 . 每个图像尺寸的宽度必须是 8 的倍数。

任何人都知道如何将这个参数联系在一起以便在我的代码中实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:12:06.720

查看[相机手册](http://www.g4.com.tw/web/file/product/usermanual/997-EoSens%203CL-MC1362-Manual.pdf)，相机被限制为每秒 500 帧的最大帧速率，使用 Camera Link 接口的最大带宽（数据速率）为 680 Mbytes/sec。

这两个数字应该为您提供计算的边界点（例如，在 1280 x 1024 时，您受到带宽的限制，理论最大值约为每秒 520 帧，假设每个像素 1 个字节并且没有帧间开销）。

如果需要，快门速度会增加额外的延迟。

例如，在 512x512 时，您不受数据带宽的限制，因此在每秒 500 帧（每帧相隔 1/500 秒）时，您的快门速度至少为 2,000 微秒。

在实践中，您可能需要考虑一些开销，但以上数字是指导您的理论限制。

您的（理论）方程式是：

最短快门时间 = 1/帧速率。最大帧率 = 1/（快门时间）

实际帧率 = 1/（快门时间 + 开销）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:58:30.000

有趣的是，这取决于硬件规格，因为在更高的分辨率下，CPU 可以计算更少的图像而不是更低的分辨率。在这种情况下，您必须计算每秒帧数，而不是计算分辨率。例如，您在一秒钟内获得多少帧将是 frame-rate [framerate](http://documentation.apple.com/en/finalcutpro/usermanual/index.html#chapter=D&section=1&tasks=true)。

# jquery-ui - jquery模态对话框中的jpegcam

> ID：11484838
> 
> 赞同：0
> 
> 时间：2012-07-14T15:11:14.820
> 
> 标签：jquery-ui, modal-dialog

我正在尝试将 jpegCam 与 jquery 一起使用。我尝试使用 jquery 模态对话框打开 jpegcam 窗口，但`document.write( webcam.get_html(320, 240) );`.

这是我的代码示例：

```
 <fieldset>
    <legend>scan</legend>
    <table>
    <tr>
    <td>
    <script language=\"JavaScript\">
        webcam.set_api_url( 'core/img_upload/_php_upload_doc_img.php' );
        webcam.set_quality( 99 ); // JPEG quality (1 - 100)
        webcam.set_shutter_sound( true ); // play shutter click sound
    </script>
    <div id='web'>
    <script language=\"JavaScript\">

    document.write( webcam.get_html(320, 240) );

    </script>
    </div>
    </td>
    <td>

    <script language=\"JavaScript\">
        webcam.set_hook( 'onComplete', 'my_completion_handler' );

        function take_snapshot() {
            // take snapshot and upload to server
            document.getElementById('upload_results').innerHTML = '<p>uploading...</p>';
            webcam.snap();
        }

        function my_completion_handler(msg) {
            // extract URL out of PHP output
            if (msg.match(/(https\:\/\/\S+)/)) {
                var image_url = RegExp.$1;
                // show JPEG image in page
                document.getElementById('upload_results').innerHTML = 
                    '<img src=\"' + image_url + '\">';

                // reset camera for another shot
                webcam.reset();
            }
            else alert(\"PHP Error: \" + msg);
        }
    </script>

 <div id=\"upload_results\" ></div>
 </td>
 </tr>
 </table>
<div class='div_button'>
<table class='pok'>
<tr>
 <form>
        <input type='button' value=\"skenuj\" onClick=\"take_snapshot()\" class='web' />
        <input type='button' value=\"konfigurace\" onClick=\"webcam.configure()\" class='web' />

    </form>
 </td>
 </tr>
 </table>
</fieldset> 

     jquery functions

    $('#sc_id').dialog({
                    autoOpen: false,
                    width: 800,
                    modal:true,

                });

    $('#scan_id').click(function(){
                 $('#sc_id').dialog('open');
                return false;
          }); 
```

jpegcam 来源：webcam.js 和 webcam.swf 没有变化.....感谢任何回复.......:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:42:38.910

你必须把它放在你的sc上面

```
<script src="../../Scripts/jpegcam/htdocs/webcam.js" type="text/javascript"></script>

<script src="../../Scripts/jpegcam/htdocs/._webcam.js" type="text/javascript"></script> 
```

# mysql - mysql - 如何使用 LIMIT 选择 3 个值（负值）？

> ID：11484839
> 
> 赞同：0
> 
> 时间：2012-07-14T15:11:49.760
> 
> 标签：mysql, pagination

我的页面看起来像：

| << 返回按钮 | 图片 | 前进按钮 >> |

每行都有一个唯一的 ID 号，使用该 ID 从我的数据库中获取结果。

<< 后退按钮是一个超链接，它应该包含前一行 ID。前进按钮 >> 应包含下一行 ID。

该`ID`列具有带有 AUTO_INCREMENT 的 INTEGER 值。

我应该如何写我的查询？我可以使用负值吗？就像是：

```
SELECT * FROM `db` ORDER BY `ID` DESC LIMIT -1, 1 
```

它有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:15:34.647

您不能使用负值，但您可以`id`在`WHERE`子句中使用您的 current 来查找小于它的值，order by`ID DESC`并限制为`auto_increment`3。id 列按降序排序，因此前 3 个值小于您的当前选择的 id 将被定位。

```
SELECT * 
FROM `db`
WHERE `ID` < [your_current_id]
ORDER BY `ID` DESC
LIMIT 3 
```

同样要获得接下来的三个，请`>`按升序使用和排序。

```
SELECT * 
FROM `db`
WHERE `ID` > [your_current_id]
ORDER BY `ID` ASC
LIMIT 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T15:16:59.297

不，你不能那样做。

如果您纯粹是通过 ID 进行分页，那么类似

```
next 10 records:
    select ... where id > $current_id order by id ASC limit 10
previous 10 records:
    select ... where id < $current_id order by id DESC limit 10 
```

would do, but then you're stuck with only allowing to browse by IDs in order. A proper pagination function disassociates the field you're sorting by from the navigation thing. You store **PAGE* NUMBERS** into the previous/next link, then use the total number of records in the pagination set to figure out row offsets for use in the LIMIT, e.g.

# javascript - 在 Opera 中禁用选择（离子）

> ID：11484840
> 
> 赞同：0
> 
> 时间：2012-07-14T15:11:52.753
> 
> 标签：javascript, css, html, browser, opera

*歌剧让我发疯。处理 select(ion) 确实是一个挑战。我无法使用 Opera 禁用选择。通过鼠标或 Ctrl+A 进行选择仍处于启用状态。Opera 真的那么糟糕，还是有一些可用的解决方案或解决方法？*

* * *

*我的 CSS：*

```
::selection {
  background: transparent;
} 

::-moz-selection {
  background: transparent;
}

* {
  user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -o-user-select: none;            // for future? compatibility
  -webkit-user-select: none;
} 
```

*我的 JavaScript：*

```
var elements = document.getElementsByTagName('*');
for (var i = 0; i < elements.length; i++) {
  elements[i].setAttribute('unselectable', 'on');
} 
```

*没有什么帮助。请指教。*

*示例：（如果您有 Opera 可用）转到[此](http://jsfiddle.net/jBsYH/)小提琴，单击“结果”部分并按 Ctrl+A。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:39:43.307

阅读[https://developer.mozilla.org/en/CSS/-moz-user-select](https://developer.mozilla.org/en/CSS/-moz-user-select) user-select 在 Opera 上不可用。这同样适用于 Internet Explorer 版本 9 及以下版本。

[http://help.dottoro.com/lhwdpnva.php](http://help.dottoro.com/lhwdpnva.php)描述了不可选择如何仅在 Internet Explorer 和歌剧中有效，但仅适用于从元素内开始的选择。之前开始，或者我猜是Ctrl+A，你仍然可以选择它。根据这篇文章，这同样适用于 Internet Explorer。

然而，我一直无法尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T09:56:22.427

请尝试使用此脚本：

```
<script type="text/javascript">
    disableSelection(document.body) 
</script>

<script type="text/javascript">
    function disableSelection(target){
        if (typeof target.onselectstart!="undefined") //IE route
            target.onselectstart=function(){return false}
        else if (typeof target.style.MozUserSelect!="undefined") //Firefox route
            target.style.MozUserSelect="none"
        else //All other route (ie: Opera)
            target.onmousedown=function(e){if(e && e.target && e.target.tagName){if(/^(input|select)$/i.test(e.target.tagName)){return true;}}return false;}
        target.style.cursor = "default"
    }
</script> 
```

小提琴：http: [//jsfiddle.net/8qadwtzo/](http://jsfiddle.net/8qadwtzo/)

# spring - Spring @Autowired 不支持 ant build

> ID：11484844
> 
> 赞同：0
> 
> 时间：2012-07-14T15:12:14.530
> 
> 标签：spring, ant, autowired

当我将它`@Autowired`用于我的 spring 应用程序时，没有设置器，我用我的测试类运行它，它工作正常。

但是，当我使用 ant 将类构建到 jar 中并调用此类（在 jar 中）时，它不起作用。当我使用 ant 编写 setter`@Autowired`并使用 ant 构建 jar 并调用它时，它正在工作。

谁能向我解释一下有什么区别？

注意：-当我使用没有 ant 的 Eclipse 工具构建 jar 时，它在没有 setter 方法的情况下工作。

所以请向我解释为什么这仅适用于 ant 构建的 jar，以及为什么 ant 构建的类也只需要`@Autowired`使用 setter 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:50:08.473

我的猜测是您的 jar 文件中没有包含一些 XML 资源。要使带注释的自动布线工作，您需要指定您的 spring XML `<context:annotation-conig />`。确保 ant jar 任务包含与 eclipse 项目源目录相同的目录。

具有两个源目录的示例 ant jar 任务：`src/main/java`包含您的 .java 文件并`src/main/resources`包含 XML 和其他配置文件：

```
<jar ...>
  <fileset dir="src/main">
    <include name="java" />
    <include name="resources" />
  </fileset>
</jar> 
```

# c# - 如何删除 svg 文档的转换属性？

> ID：11484847
> 
> 赞同：0
> 
> 时间：2012-07-14T15:12:36.777
> 
> 标签：c#, xml, svg

我创建了一个`svg document`只有 1 个`flowRoot`元素的元素，然后保存了它。然后当我

在 Visual Studio 中重新打开该文档，我在元素中看到了一个`transform`属性。`flowRoot`但是我

之前也创建了一些 svg 文档，当时我在那里没有看到任何这样的属性。这是做什么的

属性意味着以及我如何摆脱它。？我正在使用 inkscape 创建 svg 文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:00:44.627

[SVG 变换属性](http://www.w3.org/TR/SVG/coords.html#TransformAttribute)指定平移或缩放或旋转或倾斜或它们的某种组合以应用于 SVG 元素的内容。

例如，这会将您绘制的任何内容向右移动 350 个单位并向下移动 250 个单位（假设您没有任何其他变换）：

```
transform="translate(350,250)" 
```

当您将多个元素组合在一起并且想要将它们移动（或旋转它们或其他）作为一个组时，变换最有用。

Inkscape 编写 SVG。变换是 SVG 的一部分。有什么问题？

# google-maps - 改进 Google Map API V2（GWT 包装器）的 LatLngBounds.contains

> ID：11484849
> 
> 赞同：0
> 
> 时间：2012-07-14T15:12:46.733
> 
> 标签：google-maps, gwt, latitude-longitude

我想知道是否有任何方法可以提高谷歌的 LatLngBound.contains 函数的准确性，因为我目前所拥有的往往会错过几点。（不能发图抱歉）

该程序所做的假设是显示哪些标记位于所选区域内，并显示该区域 + 标记在其中，但精度有点偏离该区域外的一些标记。我想知道是否有人对如何使其更准确有任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:56:11.417

您需要使用类似于 Mike Williams 的 epoly 扩展中的多边形包含方法，而不是 LatLngBounds.contains （正如 Marcelo 所说，它将始终是一个矩形）。

[epoly](http://econym.org.uk/gmap/epoly.htm)

# c++ - 导致有效堆指针断言的静态库

> ID：11484851
> 
> 赞同：0
> 
> 时间：2012-07-14T15:13:07.737
> 
> 标签：c++, .net, clr

我所拥有的是一个由 3 层组成的项目。基础层是一组原生 C++ 静态库，它们是游戏引擎的核心组件，如图形、音频等。

中间层将所有这些组合到另一个静态库中，即引擎本身。这样做的原因是因为我希望将引擎编译为可执行文件以供分发，而且还可以将其包含到最顶层。

顶层是为快速创建游戏内容而设计的 .net 应用程序。我想免费分发 Studio 和用于商业用途的 engine.exe。因此，我为什么要将引擎创建到库中。

在某个地方，一个错误正在通过编译阶段。engine.exe 工作正常，但是当我添加时 .net 应用程序中断：

```
#include <string>
using std::string; 
```

该程序通过编译阶段没有任何错误，但在到达第一个断点之前就爆炸了，事实上它甚至没有达到我所知道的主函数。要么优化它，要么其他。我得到的错误是调试断言_CrtIsValidHeapPointer(pUserData)。它位于 dbgheap.c 的第 1516 行。我知道那不是问题，但我希望有人能认出这个断言并能提供帮助。

我最好的选择是问题与我如何链接库以及编译器设置有关，我尝试了不同的设置，但尚未解决问题。如果有人对此有任何经验，如果您需要了解更多信息，那就太好了，我将非常乐意发布更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-26T18:03:14.303

我不知道为什么会这样，但是[这里](https://social.msdn.microsoft.com/Forums/vstudio/en-US/62db4002-4ebc-4a3a-91ec-9fc702db821e/crtisvalidheappointerpuserdata-why-is-this-code-broken-vs2008?forum=vcgeneral)的答案可以解决问题。

解决方案是将**__DllMainCRTStartup@12**添加到属性 | 中的“强制符号引用”中。链接器 | 包含静态库的 C++/ÇLI 项目的输入。

# .htaccess - .htaccess 模式重写引擎似乎无法在我的本地市场中运行

> ID：11484853
> 
> 赞同：0
> 
> 时间：2012-07-14T15:13:43.360
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我有这样的网址`http://localhost/mysite/index.php?page=something`，我只想`http://localhost/mysite/something`在主页上`http://localhost/mysite/`使用`http://localhost/mysite/index.php`.htaccess

下面是我在 .htaccess 文件中的代码：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    rewriterule ^([^-]+)$ index.php?page=$1[L]
</IfModule> 
```

但它与以前的情况相同。我不知道我是否在上面的代码中写错了，或者我的 apache 不支持它，因为我以前不知道。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:15:10.333

请参阅有关[重写日志记录](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)的文档并在此处提供输出，以便我们更好地为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T05:31:14.337

如果`<IfModule mod_rewrite.c>`失败，那么您没有在 apache 中编译重写模块，或者它没有加载。你的配置中有这个吗？

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

（或者如果`<IfDefine>`它周围有条件，请确保满足定义）

# sorting - 使用 STL SORT 对缓冲区进行排序

> ID：11484856
> 
> 赞同：0
> 
> 时间：2012-07-14T15:14:25.337
> 
> 标签：sorting, stl, buffer

我正在尝试使用 STL 排序对缓冲区进行排序。现在，我使用 qsort 但我读到 stlsort 由于内联“比较”功能而具有更好的性能。缓冲区有大小为 52 的元素。例如，它有 1024 个大小为 52 的元素。这是我的代码的一部分。它运行良好，但我想使用 STL 排序。我正在排序一个固定长度的文件。每个固定长度的文件都有一个记录大小，因此用户必须告知记录大小。在下面的示例中，我输入了 52。

```
HANDLE hInFile;
char * sharedBuffer;
int recordSize = 52;
sharedBuffer = new char [totalMemory];
hInFile = CreateFile(LPCSTR(filePathIn), GENERIC_READ, 0, NULL, OPEN_EXISTING,FILE_FLAG_SEQUENTIAL_SCAN, NULL); 
ReadFile(hInFile, sharedBuffer, totalMemory, &dwBytesRead, NULL);
CloseHandle(hInFile);

qsort(sharedBuffer, dwBytesRead/recordSize, recordSize, compare); //sort using qsort but i want to use the slt sort

WriteFile(hOutFile, sharedBuffer, dwBytesRead, &dwBytesRead, NULL);
CloseHandle(hOutFile); //write the sorted buffer to disk

int compare (const void * a, const void * b)
{
return memcmp((char *)a, (char *)b, recordSize);
} 
```

我可以用其他方式读取文件吗？使用向量，迭代器？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:27:14.980

你当然可以。您定义了一个名为（比如说）MyRecordType 的类型，它描述了您排序的记录。然后定义一个对两个 MyRecordType 进行排序的例程，并调用 std::sort 传递数组和比较函数。

示例代码（未经测试）：

```
typedef struct {
    char foo[52];
} MyRecordType;

bool comp ( const MyRecordType &lhs, const MyRecordType &rhs ) {
    return lhs.foo[0] < rhs.foo[0]; // some ordering criteria
}

// figure out how many records you are going to process
MyRecordType * sharedBuffer = new MyRecordType [ count ];
// read into sharedBuffer as before (though one at a time would be better, due to packing concerns)
std::sort ( sharedBuffer, sharedBuffer + count, comp );
// write back out 
```

# javascript - 单击时切换锚标记背景

> ID：11484858
> 
> 赞同：0
> 
> 时间：2012-07-14T15:14:54.797
> 
> 标签：javascript, jquery, html, css

在 div 中，我有一个锚标记。该锚标记具有使用 CSS 分配给它的背景图像。

当用户单击它时，会执行一些 JavaScript，但我想将背景图像更改为另一个，然后当他们再次单击它时，背景图像会变回原来的样子。

任何有关如何执行此操作的帮助（JQuery、CSS；我不确定）将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:27:50.787

您可以使用 toggleClass 来更改背景图像。

```
$('#div1').click(function(){
    $(this).toggleClass('class2');
});
​ 
```

**[现场演示](http://jsfiddle.net/rajaadil/NNcG5/9/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:27:23.503

将锚的属性——在状态改变之前——保存到一个变量中。然后将该变量添加到`data`对象中。从这里，我们可以向链接添加一个类来测试我们需要服务的场景。出于本示例的目的，我使用了颜色和`background-color`属性，您可以很容易地更改它以满足您的需求。

**[这是我的示例的工作 jsFiddle](http://jsfiddle.net/yfJka/)**

这是 HTML 结构 ->

```
<div>
  <a href="#" style="background-color:blue;">
    Click To Change
  </a>
</div> 
```

这是 jQuery ->

```
$('a').click(function(){
  if($(this).hasClass('clicked')){
    $(this).css('background-color', $(this).data('oldbg'));
    $(this).removeClass('clicked');
  }else{
    $(this).addClass('clicked');  

    var oldBG = $(this).css('background-color');
    //the above stores the original css properties to a variable 'oldBG'

    $(this).data('oldbg', oldBG);
    //set the data of this object to the properties of the initial background.
    $(this).css('background-color', 'red');  
  }
}); 
```

# php - 使用“imagecreatefrom___”转换后的图像大小

> ID：11484864
> 
> 赞同：0
> 
> 时间：2012-07-14T15:15:17.027
> 
> 标签：php, image, filesize, imagecreatefrompng

我正在使用 imagecreatefromjpeg()、imagecreatefrompng() 和 imagecreatefromgif() 来转换一些图像文件，并想知道转换后图像的文件大小。我已经尝试过 filesize(imagecreatefrompng(filename)) 和 getimagesize() - 但它们似乎都不起作用。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:22:23.443

`filesize()`并`getimagesize()` 期望一个文件名。`imagecreatefromwhatever()`返回一个 GD 文件句柄。你不能把一个喂给另一个。您需要将图像保存到文件中，然后在该新文件上使用文件大小，或使用输出缓冲机制来捕获保存函数的输出并对其执行 strlen，例如

```
$handle = imagecreatefromgif('original.gif');
imagepng($handle, 'new.png');
$size = filesize('new.png'); 
```

或者

```
$handle = imagecreatefromgif('original.gif');
ob_start();
imagepng($handle);
$png = ob_get_clean();
$size = strlen($png); 
```

没有其他实用的方法可以在不首先生成该文件的情况下确定最终图像大小 - PNG/JPG 输出压缩在很大程度上取决于图像的内容 - “简单”图像将比“忙碌”图像压缩得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:23:12.853

内部图像资源没有文件大小；在“文件大小”有任何意义之前，您需要将图像输出为最终形式。

# android - Android：为列表视图项目提供选项的最佳方式

> ID：11484865
> 
> 赞同：1
> 
> 时间：2012-07-14T15:15:21.380
> 
> 标签：android, listview, slide, options, bada

我是 Android 开发新手，我的问题是为列表视图项目提供选项的最佳方式是什么？在 Bada OS 上，您可以将任何列表视图项目水平滑开，并访问该项目的选项。 [http://horrorcoding.altervista.org/developing-on-bada-2-0-%E2%80%93-how-to-use-listcontextitems-in-a-listviewgroupedlistview/](http://horrorcoding.altervista.org/developing-on-bada-2-0-%E2%80%93-how-to-use-listcontextitems-in-a-listviewgroupedlistview/)

但这在 Android 上不存在。那么该怎么做呢？我的主要活动有一个列表视图，如果您单击一个项目，它会打开一个包含所单击项目详细信息的新活动。

但是在主要活动中，您应该能够删除或编辑任何项目。所以我的想法：

**idea1**：我在项目的右上角放了一个小编辑图标，当用户单击它时，我会显示带有编辑/删除选项的 QuickAction。 [http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/) 如果用户点击项目的其他部分，只需打开详细信息活动。

**想法2**：我使用上下文菜单长按该项目。但是这个选项对用户来说是“不可见的”，那么他们怎么知道他们可以对项目进行长按呢？

你怎么看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T15:35:29.300

通常的方法是为列表创建一个上下文菜单（通过长按列表项激活）。

而“长按上下文菜单”是 Android 标准。任何用户都知道，无需提供指标 (IMO)。由于您正在制作 Android 应用程序，因此我会坚持使用 Android 约定。:)

听起来您知道如何实现它，但万一您不...

首先，为上下文菜单注册列表：

```
...
setListAdapter(lists);
registerForContextMenu(getListView()); 
```

然后您提供代码来创建上下文菜单（您也可以从 XML 资源创建它，但我没有方便的示例）：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    menu.setHeaderTitle("Item Operations");
    menu.add(0, v.getId(), 0, "Edit Item");
    menu.add(0, v.getId(), 0, "Delete Item");
} 
```

然后提供代码来处理菜单中的选项：

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
            .getMenuInfo();
    if (item.getTitle() == "Edit Item") {
        mRowId = info.id;
        DialogFragment_Item idFragment = new DialogFragment_Item();
        idFragment.show(getFragmentManager(), "dialog");
    } else if (item.getTitle() == "Delete Item") {
        mDbHelper.deleteItem(info.id);
        return true;
    }
    return super.onContextItemSelected(item);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:20:45.567

长按项目是实现选项的最常见方式，因此用户知道这种事情。我认为这是遵循的方式。但是，您也可以实现您的按钮，或显示与长按相同的选项的滑动操作（例如官方推特应用程序）。

# sql - Select Top Order By 查询返回意外结果

> ID：11484867
> 
> 赞同：0
> 
> 时间：2012-07-14T15:15:22.763
> 
> 标签：sql, sql-server

我在 SQL Server 2008 中有这样的查询：

```
SELECT TOP 1 SPECIAL_CODE1 * 
  FROM CUSTOMERS 
 WHERE isnumeric(SPECIAL_CODE1)=1 
ORDER BY SPECIAL_CODE1 DESC 
```

查询结果返回为`'9970'`。有些行的列值为`'34780'`or `'19850'`。

如何更正我的查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T15:20:04.327

如果我们谈论的是字符串值（'9' > '3'），'9970' 大于 '34780'。如果它是一个定义为整数的字段，那么情况当然会有所不同。尝试类似的东西

```
SELECT TOP 1 SPECIAL_CODE1 * FROM CUSTOMERS 
WHERE isnumeric(SPECIAL_CODE1)=1 
ORDER BY CAST (SPECIAL_CODE1 AS INTEGER) DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T15:21:20.853

该列被存储为字符数据，而不是整数（注意它认为以“99”开头的那个是最高的，即使有一个“111”）。解决方案是更改您的架构以使该列存储整数，或更改您的查询以强制转换列：

```
SELECT ... ORDER BY CAST(SPECIAL_CODE1 as int) DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T15:24:44.660

我看到您正在按 SPECIAL_CODE1 对结果进行排序。该字段的数据类型是什么？它看起来像是 varchar 或 char。排序时需要转换数据类型。例如， ORDER BY CAST(SPECIAL_CODE1 AS INT) 这将返回按数字排序的结果，而不是基于字符的排序

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T15:37:55.427

上述查询有效，因为 order by 可能会在过滤器之后进行评估。但是，用 case 语句包围演员表更安全：

```
order by (case when isnumeric(special_code1) = 1 then cast(special_code1 as int) end) 
```

case 语句是唯一保证某种评估顺序的语句。如果转换发生在查询中的其他地方，例如在 SELECT 中，那么查询可能会在第一次遇到非数字值时生成错误。

SQL 是一种声明性语言，因此查询引擎可以以您可能意想不到的方式重新排列查询的组件。

# android - AsyncTask:onPostExecute

> ID：11484869
> 
> 赞同：0
> 
> 时间：2012-07-14T15:15:32.393
> 
> 标签：android, android-asynctask, autocompletetextview

帮助 - 阅读所有相关线程，但我的 onPostExecute 没有被调用。

我正在尝试通过使用 AsyncTask 在单独的线程上运行列表构建器来为 AutoCompleteTextView 动态创建自动完成列表

这是基本代码....有什么想法吗？

```
 _artist = (AutoCompleteTextView)findViewById(R.id.artist);  
  _artist.addTextChangedListener(new TextWatcher() 
    {
        public void afterTextChanged(Editable s) 
        {
            _artist.setAdapter(null);
            _fetcher = new AutoCompleteFetcher(_artist);
            _fetcher.execute();        
        }
    }

    public class AutoCompleteFetcher extends AsyncTask<Void, Void, Void> 
    {       
        private AutoCompleteTextView _textView;
        private String[] _matches;

        public AutoCompleteFetcher(AutoCompleteTextView v) 
        {
            super();
            _textView = v;
        }

        protected Void doInBackground(Void... v)
        {   
            _matches = _getMatches();               
            return null;
        }

        private String[] _getMatches()
        {   
            // fill the list....... code removed here
            // returns populated String[]
        }

        @Override
        protected void onPostExecute(Void result) 
        {   
            ArrayAdapter<String> adapter = 
                    new ArrayAdapter<String>(_textView.getContext(),
                        android.R.layout.simple_list_item_1,_matches);
            _textView.setAdapter(adapter);
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:13:26.813

我原以为你的代码没问题，但如果你[看看这个线程](https://stackoverflow.com/a/4701171/119114)，也许不是。可能某些版本的 Android 无法按预期处理这种情况。

无论如何，我认为问题可能在于您将`AsyncTask`泛型参数声明为 all `Void`。我认为这个想法应该是任务产生某种结果，并将结果传递给`onPostExecute()`. 看起来您正在使用成员变量`_matches`将后台工作的结果从*传递*`doInBackGround()`到`onPostExecute()`。我认为 Android 的设计者打算让您使用 的`return`值`doInBackground()`和参数`onPostExecute()`来完成此操作。

所以，试试这个：

```
public class AutoCompleteFetcher extends AsyncTask<Void, Void, String[]> 
{       
    private AutoCompleteTextView _textView;

    public AutoCompleteFetcher(AutoCompleteTextView v) 
    {
        super();
        _textView = v;
    }

    @Override
    protected String[] doInBackground(Void... v)
    {   
        return _getMatches();               
    }

    private String[] _getMatches()
    {   
        // fill the list....... code removed here
        // returns populated String[]
        // TODO: it seems like this method should really just be moved into 
        //  doInBackground().  That said, I don't think this is your problem.
    }

    @Override
    protected void onPostExecute(String[] result) 
    {   
        ArrayAdapter<String> adapter = 
                new ArrayAdapter<String>(_textView.getContext(),
                    android.R.layout.simple_list_item_1, result);
        _textView.setAdapter(adapter);
    }
} 
```

# java - EmployeeStore 中的编辑方法

> ID：11484872
> 
> 赞同：0
> 
> 时间：2012-07-14T15:15:39.197
> 
> 标签：java, hashmap

嘿，我在 EmployeeStore 中的编辑方法有问题。基本上，我试图让用户按姓名在地图中搜索员工，然后我想打印出他们搜索的员工，然后我想让用户编辑员工类的 3 个变量。任何人都可以帮忙。这是我的代码：

```
Edit choice in the mainApp
  case 5:
           System.out.println("Edit");
           Employee employee2 = MenuMethods.userInput();
           Store.searchByName(employee2.getEmployeeName());
         if (employee2 != null)
        {
            employee2.setEmployeeName("Joe");
            employee2.setEmployeeId(1);
            employee2.setEmployeeEmail("webmail.com");
           Store.edit(employee2);
           Store.print();
        }

            break; 
```

菜单方法

```
//Imports
import java.util.Scanner;
//********************************************************************

public class MenuMethods 
{
    private static Scanner keyboard = new Scanner(System.in);

    //Methods for the Company Application menu.
    //Method for validating the choice.
         public static int getMenuChoice(String menuString, int limit, String prompt, String errorMessage) 
         {
                System.out.println(menuString);
                int choice = inputAndValidateInt(1, limit, prompt, errorMessage);
                return choice;
         }
    //********************************************************************
    //This method is used in the getMenuChoice method.
            public static int inputAndValidateInt(int min, int max, String prompt, String errorMessage) 
            {
                int number;
                boolean valid;
                do {
                    System.out.print(prompt);
                    number = keyboard.nextInt();
                    valid = number <= max && number >= min;
                    if (!valid) {
                        System.out.println(errorMessage);
                    }
                } while (!valid);
                return number;
            }
    //********************************************************************
    public static Employee userInput()
    {
         String temp = keyboard.nextLine();
         Employee e = null;
         System.out.println("Please enter the Employee Name:");
         String employeeName = keyboard.nextLine();
         System.out.println("Please enter the Employee ID:");
         int employeeId = keyboard.nextInt();
         temp = keyboard.nextLine();
         System.out.println("Please enter the Employee E-mail address:");
         String employeeEmail  = keyboard.nextLine();
         return e = new Employee(employeeName , employeeId, employeeEmail);

    }
    //********************************************************************
    public static Employee userInputByName()
    {

         Employee employee = null;
         System.out.println("Please enter the Employee Name:");
         String employeeName = keyboard.nextLine();
         return employee = new Employee(employeeName , null, null);

    }
    //********************************************************************

} 
```

员工商店

```
//Imports.
import java.util.HashMap;
import java.util.Scanner;
//********************************************************************
public class EmployeeStore
{
    HashMap<String, Employee> map;
    private static Scanner keyboard = new Scanner(System.in);

//Constructor.  
    public EmployeeStore()
    {
        map = new HashMap<String,Employee>();
    }
//********************************************************************
//Hashmap Methods.
//Add to the Hashmap : Employee.
    public void add(Employee employee)
    {

        map.put(employee.getEmployeeName(), employee);
    }
//********************************************************************
//Remove from the Hashmap : Employee.
    public void remove(String key)
    {
      //Remove the Employee by name.
        map.remove(key);
    }
//********************************************************************
//Clear the Hashmap : Employee.
    public void clear()
    {
        map.clear();
    }
    //********************************************************************
//Print the Hashmap : Employee. 
    public void print()
    {
        System.out.println("\n********Employee's in the Company.********");
        for (Employee employee : map.values())
        {
            //System.out.println(employee); to print the toString of Employee class
            //or:
            System.out.println("Employee Name:\t" + employee.getEmployeeName());
            System.out.println("Employee Id:\t" + employee.getEmployeeId());
            System.out.println("E-mail:\t"+ employee.getEmployeeEmail());
        }

    }
    public Employee get(String name){
        return map.get(name);
    }
    /*public void searchByName ()
    {
        //(for(Employee e : map.values()) {...}) 
        //and check for each employee if his/her email matches the searched value
        for(Employee e : map.values())
        {
            System.out.println(e);
            map.equals(getClass());

        }
    }*/
//********************************************************************
    public Employee searchByName(String name) 
    {
        Employee employee = map.get(name);    
        System.out.println(employee);
        return employee;
    }
//********************************************************************

    public Employee searchByEmail(String email) 
    {
        for (Employee employee : map.values())
        {
            if (email.equals(employee.getEmployeeEmail()))
            {
                System.out.println(employee);
                return employee;
            }
        }
        return null;
    }
//********************************************************************
    public void edit(Employee employee)
    {
        map.put(employee.getEmployeeName(), employee);
    }

//********************************************************************

//********************************************************************  
//********************************************************************

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:24:46.750

（持久性）商店根本不应该有编辑方法。它应该提供方法来

*   C - 创建一个新项目
*   R - 阅读一个项目
*   U - 更新现有项目
*   D - 删除现有项目

编辑由编辑器完成，它将使用 stores create 方法（用于新项目）或 read 和 update 方法（用于编辑现有项目）

* * *

对于`userInputByName`- 从键盘获取姓名并使用商店返回员工（如果有）：

```
System.out.println("Please enter the Employee Name:");
String employeeName = keyboard.nextLine();
return getStore().searchByName(); 
```

您只能找到一种方法来实现魔术`getStore()`方法，以便获得可以提供员工的员工商店的实例。

# nancy - 如何在 NancyFX 中编写流式输出？

> ID：11484873
> 
> 赞同：7
> 
> 时间：2012-07-14T15:15:45.717
> 
> 标签：nancy

我正在使用 Nancy 编写一个简单的 Web 应用程序。至少一个请求会导致未知长度的流，所以我无法提供`Content-Length`. 我想使用`Transfer-Encoding: chunked`, 或（在这种情况下同样可以接受，`Connection: close`）。

我对 Nancy 源代码进行了快速破解，并且添加`Response.BufferOutput`了 , 和代码以设置`HttpContext.Response.BufferOutput`为`false`. 你可以在这里看到：

```
public class HomeModule : NancyModule
{
    public HomeModule()
    {
        Get["/slow"] = _ => new SlowStreamResponse();
    }

    private class SlowStreamResponse : Response
    {
        public SlowStreamResponse()
        {
            ContentType = "text/plain";
            BufferOutput = false;
            Contents = s => {
                byte[] bytes = Encoding.UTF8.GetBytes("Hello World\n");
                for (int i = 0; i < 10; ++i)
                {
                    s.Write(bytes, 0, bytes.Length);
                    Thread.Sleep(500);
                }
            };
        }
    } 
```

它似乎没有任何效果。5 秒后立即出现响应。我已经测试了这个基于简单`WebRequest`的客户端。

如何让分块输出在 Nancy 中工作？我正在使用 ASP.NET 托管，但我会对其他托管选项的答案感兴趣。

如果我使用 编写一个简单的服务器`HttpListener`，我可以设置`SendChunked`为`true`，它会发送分块输出，我的简单客户端会正确接收分块输出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-06-14T19:20:08.123

在我的实验过程中，我发现我需要以下配置。[首先，按照Nancy Wiki](https://github.com/NancyFx/Nancy/wiki/Hosting-Nancy-with-asp.net)中的说明设置您的`web.config`文件。值得注意的是，为了设置该值（这是我们想要的），您目前似乎还需要指定一个引导程序。在您的程序集中创建一个继承自配置文件并在配置文件中指定它的类似乎可行。`disableoutputbuffer``Nancy.Hosting.Aspnet.DefaultNancyAspNetBootstrapper`

```
<configSections>
  <section name="nancyFx" type="Nancy.Hosting.Aspnet.NancyFxSection" />
</configSections>
<nancyFx>
  <bootstrapper assembly="YourAssembly" type="YourBootstrapper"/>
  <disableoutputbuffer value="true" />
</nancyFx> 
```

之后，您不应该设置`Transfer-Encoding`标题。相反，以下路由定义似乎正确地将结果从我的 IIS Express 开发服务器流式传输到 Chrome：

```
Get["/chunked"] = _ =>
{
  var response = new Response();
  response.ContentType = "text/plain";
  response.Contents = s =>
  {
    byte[] bytes = System.Text.Encoding.UTF8.GetBytes("Hello World ");
    for (int i = 0; i < 10; ++i)
    {
      for (var j = 0; j < 86; j++)
      {
        s.Write(bytes, 0, bytes.Length);
      }
      s.WriteByte(10);
      s.Flush();
      System.Threading.Thread.Sleep(500);
    }
  };

  return response;
}; 
```

[由于其他StackOverflow 问题](https://stackoverflow.com/questions/16909227/using-transfer-encoding-chunked-how-much-data-must-be-sent-before-browsers-s)中记录的第一次渲染之前的最小尺寸，我为每个块指定了​​比上一个示例更多的内容

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T18:44:24.753

You have to call `Flush()` after each `Write()`, otherwise the response is buffered anyway. Moreover, Google Chrome doesn't render the output until it's all received.

I discovered this by writing a simple client application that logged what it was reading from the response stream as it arrived.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-26T14:37:52.090

如果使用 .NET 4.5+，您也可以使用 Stream.CopyTo 而不是刷新。

```
Get["/chunked"] = _ =>
{
  var response = new Response();
  response.ContentType = "text/plain";
  response.Contents = s =>
  {
    using(var helloStream = new MemoryStream(Encoding.UTF8.GetBytes("Hello World ")))
      helloStream.CopyTo(s);
  }
  return response;
} 
```

# html - 滚动条影响 margin:0 auto; 属性并将页面向右移动几 px

> ID：11484875
> 
> 赞同：2
> 
> 时间：2012-07-14T15:15:49.477
> 
> 标签：html, css, position, positioning, center

这是我的代码的摘录：

```
<div id="column2">
  <div id="textbox">
    <h3>About</h3>
    <div id="text">
      <img id="portrait" src="images/portrait.png"/>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean sollicitudin tristique posuere. Phasellus quis rhoncus felis. </p>
      <p>Curabitur condimentum gravida lorem, non accumsan justo facilisis non. Nam at nisi venenatis tortor viverra posuere.</p>
    </div>
  </div>
</div> 
```

该摘录的CSS代码：

```
#textbox {
    background:lightgrey;
    margin:38px 0 0 0;
    width:400px;
    font-size:0.825em;
    line-height:150%;
}

#textbox p {
    margin-top:0;
}

#textbox h3 {
    margin: 0 0 15px 0;
}

#column2 {
    float:right;
    margin-right:150px;
}

#portrait {
    float:right;
    margin:0 0 10px 10px;
} 
```

问题是当我在“文本框” div 中没有图像时，中心与带有图像的中心不同。我正在使用边距：0 自动；将此处未包含的整个包装器 div 居中。我可能能够通过绝对定位将其正确居中（尚未测试），但为什么图像会影响中心？由于图像的原因，整个包装器 div 向右移动了大约 5-10px（我对其进行了测试）。有什么建议么？非常感谢。

小提琴：http: [//jsfiddle.net/uVSTJ/1/](http://jsfiddle.net/uVSTJ/1/)

编辑：如果我没有使用任何中心定位，则不会出现问题。

**编辑2：**我发现了问题，但不知道如何解决。只有当我到达页面底部并出现滚动条时才会发生这种情况。我想它会从不同的地方开始计算边距或其他东西，这会导致右边有几个像素。有什么方法可以在不使用溢出属性的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:25:58.433

5 to 10px reminds me of a scrollbar. Maybe the image causes the heigth of the web page to exceed the height of the window in which case a scrollbar will be added. This causes the content to move a little bit.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:35:56.380

样式有什么用`#text`？小提琴真的很有帮助，因为[前面](http://jsfiddle.net/)**可能**有一些`divs`样式可能会影响布局。

# jquery - Bootstrap Collapse - 单击时切换类

> ID：11484876
> 
> 赞同：0
> 
> 时间：2012-07-14T15:15:59.750
> 
> 标签：jquery, twitter-bootstrap

我一直在做一些谷歌搜索以寻找最有效的方法，但我还没有找到一个可行的答案。我发现 [了这个](https://groups.google.com/forum/?fromgroups#!topic/twitter-bootstrap/teUoAR1nV7w)，但是当我尝试它时它不起作用。

我试图在单击时将一个类切换到元素“a.accordion-toggle”。虽然上面的解决方案确实有效，但它会为“a.accordion-toggle”的每个实例切换类。由于有多个手风琴，这并不理想。

有没有办法让我只针对被点击的手风琴的孩子？

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:45:14.057

在您的选择器中，指定一个[context](http://api.jquery.com/jQuery/)。这是 jQuery 的第二个参数。

$('a.accordion-toggle', '#theelementinwhichyouwanttosearch')

# iphone - 在 iOS 5 中附加 JSON 数组

> ID：11484881
> 
> 赞同：1
> 
> 时间：2012-07-14T15:16:40.673
> 
> 标签：iphone, objective-c, ios, json, ipad

所以我有一个以下格式的 JSON：

```
{
    "data": {
        "last_updated": 1342277036, 
        "stream": [
            {
                "action": {
                },
                "to": [
                ], 
                "from": [
                ],  
                "timestamp": 1342276421
            }, 
            {
                "action": {
                },
                "to": [
                ], 
                "from": [
                ],  
                "timestamp": 1342276421
            }, 
            {
                "action": {
                },
                "to": [
                ], 
                "from": [
                ],  
                "timestamp": 1342276421
            }, 
```

然后我提出另一个请求并得到相同的响应。我想结合这两个 JSON，基本上将我拥有的新“流”数组附加到旧的。到目前为止，这是我所做的失败的事情：

```
NSMutableArray *streamArray = 
  [NSMutableArray arrayWithArray:[[streamDiskData valueForKey:@"data"] valueForKey:@"stream"]];
NSArray *newFeeds = [[jsonData valueForKey:@"data"] valueForKey:@"stream"];
//append the old JSON array with the new feeds stream
[streamArray insertObjects:newFeeds atIndexes:indexSet]; 
```

所以`streamDiskData`这里是旧的 JSON 和`jsonData`新的 JSON。我做错了什么，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T21:40:46.050

我看不到你的`indexSet`实际情况，但尝试使用更像这样的东西：

```
NSMutableArray *streamArray = 
   [NSMutableArray arrayWithArray:[[streamDiskData valueForKey:@"data"] valueForKey:@"stream"]];
NSArray *newFeeds = [[jsonData valueForKey:@"data"] valueForKey:@"stream"];
//append the old JSON array with the new feeds stream
[streamArray addObjectsFromArray: newFeeds]; 
```

`addObjectsFromArray`是你用来**附加**第二个数组的东西。 `insertObjects:atIndexes:`对于在其他位置插入数据很有用**，**而`newArray`不仅仅是. 但是，你的问题是**append**，所以我建议改用。**`streamArray`**`addObjectsFromArray`****

# php - PHP - 如果文件不可用，则重定向到下载页面

> ID：11484885
> 
> 赞同：0
> 
> 时间：2012-07-14T15:17:31.007
> 
> 标签：php, redirect, http-headers

我正在使用 PHP 来处理文件下载。目前，如果文件不可用，我只显示信息。*（如果旧文件版本从外部网站链接，则会发生）*

如何直接重定向到下载页面？（例如 www.example.com/downloads.html）

```
if (!is_file($file_path)) {
  die("<center><strong><u>file not available</u><strong></center>"); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:24:33.877

使用 php 标头是您需要重定向的内容。但是，请确保您事先没有在页面上回显任何内容，标题必须是您的响应中首先出现的内容。

```
header('Location: http://www.example.com/downloads.html'); 
```

如果需要，您还可以在此处使用相对 url。

正如下面的评论中所述，您需要`http://`协议，否则它会被视为相对 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:19:46.993

尝试 PHP 标头函数进行重定向

[http://sg2.php.net/manual/en/function.header.php](http://sg2.php.net/manual/en/function.header.php)

```
header('Location: www.example.com/downloads.html'); 
```

# javascript - 多个值的表单验证

> ID：11484891
> 
> 赞同：0
> 
> 时间：2012-07-14T15:18:50.590
> 
> 标签：javascript, html

我试图通过调用一个 php 文件将所有验证值合并到一个函数中。它设法验证，但不知何故，如果我验证一个字段，另一个字段消息也会出来。

形式：

```
<input name="SNo" type="text" id="SNo" onkeyup="Validate(this.value)" value=""/> <span id="validateNumbers"></span>
<input name="Names" type="text" id="Names" onkeyup="Validate(this.value)" value=""/><span id="validateNames"></span> 
```

Javascript函数：

```
function Validate(value) {
    var SNo = document.getElementById('SNo').value;
    var Names = document.getElementById('Names').value;
    if (str == SNo) {
        if (str.length == 0) {
            document.getElementById("validateNumbers").innerHTML = "Must not be blank";
            return;
        }
        if (window.XMLHttpRequest) xmlhttp = new XMLHttpRequest();
    } else { // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById("validateNumbers").innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET", "functions/validate.php?SNo=" + str, true);
    xmlhttp.send();
} else if (str == Names) {
    //same coding as if statement
} else {}
} 
```

因此，如果我将其留空，则 validateNumbers 和 validateNames 错误消息以及其他消息都会出现。我没有使用任何循环，但为什么会重复..请告知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:38:20.577

str 未定义。最好传入输入对象本身。

```
function Validate(field) {
    var SNo = document.getElementById('SNo');
    var Names = document.getElementById('Names');

    if (field == SNo) {
        if (field.value.length == 0) {
            document.getElementById("validateNumbers").innerHTML = "Must not be blank";
            return;
        }
        if (window.XMLHttpRequest) {
            xmlhttp = new XMLHttpRequest();
        } else { // code for IE6, IE5
           xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("validateNumbers").innerHTML = xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET", "functions/validate.php?SNo=" + field.value, true);
        xmlhttp.send();

    } else if (field == Names) {
        //same coding as if statement
    } else {}
} 
```

和

```
<input name="SNo" type="text" id="SNo" onkeyup="Validate(this)" value=""/>
<input name="Names" type="text" id="Names" onkeyup="Validate(this)" value=""/> 
```

# c# - 没有 RegEx（开关）的范围之间的字符串或字符

> ID：11484893
> 
> 赞同：0
> 
> 时间：2012-07-14T15:19:13.110
> 
> 标签：c#, .net, switch-statement

是否有任何其他选项可以在不使用 RegEx 的情况下识别字符是字母还是数字？这是我的代码：

```
void IdentifyChar(char Chr)
{
    switch (Chr)
    {
        case // A..Z or A-Z
    }
} 
```

我知道这是可能的，因为前段时间我下载了一个带有此代码的项目，并且它有效。任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T15:21:30.270

您可以使用

```
Char.IsLetterOrDigit(Chr) 
```

有关其他信息，请参见[http://msdn.microsoft.com/en-us/library/424s1h3z](http://msdn.microsoft.com/en-us/library/424s1h3z)`Char Methods`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T15:25:32.740

C# 不支持*switch**内基于范围的*情况，但除了您当前的目标之外，还有其他几种替代方法可供使用。

 *下面介绍几种方法。

```
 if (Char.ToLower (Chr) >= 'a' && Char.ToLower (Chr) <= 'z') {
   ...

 } else
 if (Chr >= '0' && Chr <= '9') {
   ...

 } else {
   ...
 } 
```

```
 if (Char.IsLetter (Chr)) {
    ...

 } else
 if (Char.IsDigit (Chr)) {
    ...

 } else
 {
   ...
 } 
```

* * *

`category`您可以通过以下链接找到更多方法（以及相关信息）来找出某个角色所在的位置：

 - **[msdn.microsoft.com - 字符结构（系统）](http://msdn.microsoft.com/en-us/library/system.char.aspx)**

* * *

^(**不推荐：**有一种使用开关的*“基于范围”的*方法，但它不涉及指定范围，而是指定与特定情况相关的所有值，如下所示：)

```
switch (Chr) {
  case '0':
  case '1':
  case '2':
  case '3':
  case '4':
  case '5':
  case '6':
  case '7':
  case '8':
  case '9':
    ... 
    break;

  default:
    ...
} 
```

* * **

# c# - PIA 已安装但仍收到互操作错误

> ID：11484894
> 
> 赞同：0
> 
> 时间：2012-07-14T15:19:17.453
> 
> 标签：c#, visual-studio-2010, interop, office-interop, office-pia

我正在尝试使用 Microsoft.Office.Interop.xxxxxxx 命名空间，但 Visual Studio 2010 没有提供“互操作”选项。我为 office12 和 office14 安装了 PIA，我已将它们包含在解决方案资源管理器的“参考”中，但它不起作用。

我试图调用命名空间的代码是：

```
 using Excel = Microsoft.Office...; 
```

在“Office.”之后，我只能选择“Core”。所以它看起来像这样

```
 using Excel = Microsoft.Office.Core; 
```

这与导入的引用相匹配……但使用此命名空间似乎没有用。

我的问题是如何让 Microsoft.Office.Interop 选项被接受并在智能感知中显示？

例子：

```
 using Excel = Microsoft.Office.Interop.Excel; 
```

收到“Interop”错误消息=“命名空间“Microsoft.Office”中不存在类型或命名空间名称“Interop”（您是否缺少程序集引用？）

我在解决方案资源管理器中加载的程序集是“Microsoft Office 14.0 对象库”TypeLib 版本 2.5。程序集路径 = "C:\Program Files\Common Files\Microsoft Shared\OFFICE14\MSO.DLL

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:29:18.500

你没有选择正确的参考。请改用“Microsoft Excel 14.0 对象库”。

请注意，VS2010 支持程序集引用的 Embed Interop Types 属性。你真的想将它用于 Office 应用程序，不需要 PIA。它自动设置为 True。

# c++ - SDL TTF 库内存泄漏（每帧创建和释放表面）

> ID：11484895
> 
> 赞同：1
> 
> 时间：2012-07-14T15:19:20.047
> 
> 标签：c++, opengl, memory-leaks, sdl, sdl-ttf

我正在为我正在制作的游戏创建一个基本的 SDL+OpenGL 关卡编辑器，并且在创建动态 TTF 表面时遇到了一些非常严重的内存泄漏，然后将它们转换为 OpenGL 纹理。

例如：

每一帧，我都会运行一些如下所示的代码：

```
shape_label = SDL_DisplayFormat(TTF_RenderText_Solid(font, shape_names[c2].c_str(), textColor));
shape_label_gl = gl_texture(shape_label);
draw_rect(shapes[c2][0], shapes[c2][1], shape_label->w, shape_label->h, shape_label_gl, 0);
SDL_FreeSurface(shape_label); 
```

但是，当我使用 valgrind 时，它表明存在许多相对较大的内存泄漏。当我在 Activity Monitor (Mac) 中监视程序时，它的内存使用量可以攀升到近 500 mb，并且可能会从那里继续。

这是 valgrind 错误：

```
==61330== 1,193,304 (13,816 direct, 1,179,488 indirect) bytes in 157 blocks are definitely lost in loss record 6,944 of 6,944
==61330==    at 0xB823: malloc (vg_replace_malloc.c:266)
==61330==    by 0x4D667: SDL_CreateRGBSurface (in /Library/Frameworks/SDL.framework/Versions/A/SDL)
==61330==    by 0xE84C3: TTF_RenderUNICODE_Solid (in /Library/Frameworks/SDL_ttf.framework/Versions/A/SDL_ttf)
==61330==    by 0xE836D: TTF_RenderText_Solid (in /Library/Frameworks/SDL_ttf.framework/Versions/A/SDL_ttf)
==61330==    by 0x10000A06D: SDL_main (in ./leveleditor)
==61330==    by 0x100013530: -[SDLMain applicationDidFinishLaunching:] (in ./leveleditor)
==61330==    by 0x65AD0D: __-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_1 (in /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation)
==61330==    by 0x36C7B9: _CFXNotificationPost (in /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation)
==61330==    by 0x646FC2: -[NSNotificationCenter postNotificationName:object:userInfo:] (in /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation)
==61330==    by 0xB4C4E2: -[NSApplication _postDidFinishNotification] (in /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)
==61330==    by 0xB4C248: -[NSApplication _sendFinishLaunchingNotification] (in /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)
==61330==    by 0xB4AF0F: -[NSApplication(NSAppleEventHandling) _handleAEOpenEvent:] (in /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit) 
```

关于如何在不使用大量内存的情况下使 TTF 逐帧工作的任何想法？

**编辑：**为了将来参考，我是个白痴。我忘了这样做：

```
glDeleteTextures(1, &status_bottom_gl); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:23:16.447

TTF_RenderText_Solid allocates a new surface that you are not freeing:

```
SDL_Surface *ttf = TTF_RenderText_Solid(font, shape_names[c2].c_str(), textColor);
shape_label = SDL_DisplayFormat(ttf);
shape_label_gl = gl_texture(shape_label);
draw_rect(shapes[c2][0], shapes[c2][1], shape_label->w, shape_label->h, shape_label_gl, 0);
SDL_FreeSurface(shape_label);
SDL_FreeSurface(ttf); // Must free this as well! 
```

Note that for optimal performance you should cache those surfaces somewhere and not create & destroy them every frame.

# asp.net-mvc - 是否可以将 Autofac 配置为与 ASP.NET MVC 和 ASP.NET Web Api 一起使用

> ID：11484904
> 
> 赞同：59
> 
> 时间：2012-07-14T15:19:59.833
> 
> 标签：asp.net-mvc, asp.net-web-api, autofac

是否可以将 Autofac 配置为与 ASP .NET MVC 和 ASP .NET Web Api 一起使用。我知道依赖解析器是不同的。但是当使用记录的方法时，我只能设置一个全局解析器。

```
// Set the dependency resolver implementation.
GlobalConfiguration.Configuration.DependencyResolver = resolver; 
```

这种方法是坏主意吗？我应该将我的解决方案分成两个项目并分别处理每个项目的依赖注入吗？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-07-16T13:22:12.307

当然可以将 Autofac 配置为同时使用 MVC 和 Web API。预计这将是一种非常常见的情况。有两种独立的依赖解析器实现，因为 MVC 和 Web API 可以相互独立地使用。这同样适用于 Autofac 集成。

在同一个应用程序中同时使用 MVC 和 Web API 时，每个都需要自己的依赖解析器，尽管它们可以与容器的相同实例一起提供。

```
var builder = new ContainerBuilder();

// Add your registrations

var container = builder.Build();

// Set the dependency resolver for Web API.
var webApiResolver = new AutofacWebApiDependencyResolver(container);
GlobalConfiguration.Configuration.DependencyResolver = webApiResolver;

// Set the dependency resolver for MVC.
var mvcResolver = new AutofacDependencyResolver(container);
DependencyResolver.SetResolver(mvcResolver); 
```

也可以在两者之间共享注册，因为`InstancePerApiRequest`和`InstancePerHttpRequest`生命周期范围现在共享相同的标签。

请注意，为 Web API 和 MVC 设置依赖解析器的机制是不同的。Web API 使用`GlobalConfiguration.Configuration.DependencyResolver`和 MVC 使用`DependencyResolver.SetResolver`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-06-10T12:45:48.657

我想我会为那些在 mvc5 和 web api 2 中苦苦挣扎的人提供一些帮助。

首先添加nuget包

*   自动法
*   Autofac asp.net mvc 5 集成
*   Autofac asp.net web api 2.x 集成

在全局添加 application_start （或作为 app_start 类）添加对以下类的调用

```
AutofacConfig.RegisterAutoFac(); 
```

现在在 App_start 下添加这个类

```
using System.Reflection;
using System.Web.Http;
using System.Web.Http.Controllers;
using System.Web.Mvc;
using Autofac;
using Autofac.Integration.Mvc;
using Autofac.Integration.WebApi;

namespace Example1.Web
{
    public class AutofacConfig
    {
        public static IContainer RegisterAutoFac()
        {
            var builder = new ContainerBuilder();

            AddMvcRegistrations(builder);
            AddRegisterations(builder);

            var container = builder.Build();

            DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
            GlobalConfiguration.Configuration.DependencyResolver = new AutofacWebApiDependencyResolver(container);

            return container;
        }

        private static void AddMvcRegistrations(ContainerBuilder builder)
        {
            //mvc
            builder.RegisterControllers(Assembly.GetExecutingAssembly());
            builder.RegisterAssemblyModules(Assembly.GetExecutingAssembly());
            builder.RegisterModelBinders(Assembly.GetExecutingAssembly());
            builder.RegisterModelBinderProvider();

            //web api
            builder.RegisterAssemblyTypes(Assembly.GetExecutingAssembly()).PropertiesAutowired();
            builder.RegisterModule<AutofacWebTypesModule>();
        }

        private static void AddRegisterations(ContainerBuilder builder)
        {
            //builder.RegisterModule(new MyCustomerWebAutoFacModule());
        }
    }
} 
```

从现在开始，为您添加到项目中的每个新程序集添加一个新模块，然后在 AddRegisterations 函数中注册该模块（给出的示例）

**注意**：

我退回了容器，这不是必需的。

这会扫描当前程序集的模块，因此不要在 AddRegisterations 中添加本地模块，否则您将注册所有内容两次。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-15T07:02:24.357

绝对将它们分开。Autofac 具有[ASP.NET MVC](http://nuget.org/packages/Autofac.Mvc3)和[ASP.NET Web API](http://nuget.org/packages/Autofac.WebApi)集成。情况并非总是如此，但如果您在两个应用程序中都需要相同的服务，则很可能是应用程序架构有问题。

以下是使用 ASP.NET Web API 执行此操作的方法：

```
internal class AutofacWebAPI {

    public static void Initialize(HttpConfiguration config) {

        config.DependencyResolver = new AutofacWebApiDependencyResolver(
            RegisterServices(new ContainerBuilder())
        );
    }

    private static IContainer RegisterServices(ContainerBuilder builder) {

        builder.RegisterAssemblyTypes(Assembly.GetExecutingAssembly()).PropertiesAutowired();

        //deal with your dependencies here
        builder.RegisterType<CarsService>().As<ICarsService>();
        builder.RegisterType<CarsCountService>().As<ICarsCountService>();

        return builder.Build();
    }
} 
```

然后，在 Global.asax.cs 中注册它，如下所示：

```
AutofacWebAPI.Initialize(GlobalConfiguration.Configuration); 
```

# php - PHP Ajax 不返回任何内容

> ID：11484906
> 
> 赞同：0
> 
> 时间：2012-07-14T15:20:10.667
> 
> 标签：php, jquery, html, ajax, comments

我有一个评论系统，所以当按下提交按钮时，它会将评论发送到数据库，然后将其添加到页面上的评论列表中。

评论.php

```
 <div id="comments" itemscope itemtype="http://schema.org/UserComments">
                              <?php do { ?>
            <div class="comment shadow effect">
                    <p class="left tip" title="<?php echo $row_getComments['comment_author'];?> Said">
                     <img class="avatar" src="<?php echo $row_getComments['avatarurl'];?>" /></p>
                          <p class="body right" itemprop="creator"><?php echo $row_getComments['comment_entry'];?></p>

                    <div class="details small">
                        <span class="blue"><?php echo timeBetween($row_getComments['communt_date'],time());?></span> · <a class="red" href="#" onclick="$(this).delete_comment(<?php echo $row_getComments['comment_id'];?>); return false;">Remove</a>
                    </div>
                </div>
                            <?php } while ($row_getComments = mysql_fetch_assoc($getComments)); ?>
                            </div>

    //Add Comment//
                            <div class="add_comment">
            <div class="write shadow comment">
                <p class="left">
                    <img class="avatar" src="#" />
                </p>

                <form method="POST" name="addcomment">
<p class="textarea right"><input type="hidden" name="username" value="<?php echo $_SESSION['username'];?>" />
                    <textarea class="left" cols="40" rows="5" name="post_entry"></textarea>
        <input class="left" value="SEND" type="submit" />
                   </p> </form>

            </div>
            <a onclick="$(this).add_comment(<?php echo $row_getSinglePost['post_id'];?>);return false;" class="right effect shadow" href="#">Add Comment</a>
        </div> 
```

ajax.js- 这是它发送和接收信息的方式。我知道提交按钮有效，因为它会变灰

```
 jQuery.fn.add_comment = function (page_id) {
var that = $(this);

that.hide(10, function () {
    that.prev().show();
});

that.parent().find('input[type=submit]').click(function () {
    var value = $(this).prev().val();
    if (value.length < 3) {
        $(this).prev().addClass('error');
        return false;
    } else {
        var input = $(this);
        input.prev().attr('disabled', true);
        input.attr('disabled', true);
        $.post("ajax.php", {
            post_id: page_id,
            comment: value
        }, function (data) {
            if (data.error) {
                alert("Your Comment Can Not Be Posted");
            } else {
                that.parent().prev('.comments').append('<div class="comment rounded5"><p class="left"><img class="avatar" src="' + data.avatar + '" /></p><p class="body right small">' + data.comment + '<br /><div class="details small"><span class="blue">' + data.time + '</span> · <a class="red" href="#" onclick="$(this).delete_comment(' + data.id + '); return false;">Remove</a></div></p></div>');
                input.prev().val('');
            }
            input.prev().attr('disabled', false);
            input.attr('disabled', false);
        },'json');

    }
    return false;
}); 
```

};

ajax.php

```
require_once('connections/Main.php');
$username = $_SESSION['username'];
mysql_select_db($database_Main);
function getavatar($username){
    $result = mysql_query("SELECT profile_pic FROM `users` WHERE `username` = '$username' LIMIT 1");
    $row = mysql_fetch_row($result);
    return $row[0];
}
    if(isset($_POST['post_id']) and isset($_POST['comment'])){
        $post_id = intval($_POST['post_id']);
        $comment = mysql_escape_string($_POST['comment']);
        $time = time();
        $insertcom = mysql_query("INSERT INTO `blog_comments` (`author`, `post_num`, `comment_entry`, `communt_date`) VALUES ($username, '{$post_id}', '{$comment}', '{$time}')");
        if($insertcom){
            $id = mysql_insert_id();
            exit(json_encode(array(
                'id' => $id,
                'avatar' => getavatar($username),
                'time' => timeBetween($time, time()),
                'comment' => $comment,
            )));
        }
    } 
```

另外，如果说查询不起作用，我将如何错误检查以提交错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T15:51:13.560

1.  使用 echo 而不是像 Rafael 所说的那样退出。但是您不需要使用 die() 或 exit() 或其他任何东西。干净的代码不需要使用 die() 或 exit()。
2.  您在数组中使用了 $comment 后面的逗号，但逗号后面没有条目（在我的代码中`'error' => false`如下。
3.  当您询问 mysql_affected_rows 是否大于零（[http://www.php.net/manual/en/function.mysql-affected-rows.php](http://www.php.net/manual/en/function.mysql-affected-rows.php)）时，您可以检查插入是否成功。mysql_affected_rows 返回受 INSERT、UPDATE 和 DELETE 影响的行。

代码：

```
if($insertcom){
    //Check if INSERT was successfully
    if(mysql_affected_rows() > 0) {
        $id = mysql_insert_id();
        echo(json_encode(array(
            'id' => $id,
            'avatar' => getavatar($username),
            'time' => timeBetween($time, time()),
            'comment' => $comment, //here is the ,
            //Added line to state if error
            'error' => false
        )));
    } else {
        //Echo to return error when INSERT was unsuccessful
        echo(json_encode(array('error' => true)));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:38:06.163

使用 echo() 而不是 exit(json.decode...)

此外，在此回声之后插入 die()。

# java - 如何确定注入的 CDI bean 的 parameterizedType 的具体类型

> ID：11484907
> 
> 赞同：2
> 
> 时间：2012-07-14T15:20:10.280
> 
> 标签：java, generics, jpa-2.0, cdi, jboss-weld

长话短说，我有这些课程

```
public class BaseController<T extends BaseEntity, ID extends Serializable> implements Serializable {
    @Inject
    private BaseService<T> service;
    private Class<T> persistentClass;

    public void init() {
        Type arg = ((ParameterizedType) ((Class) getClass().getGenericSuperclass()).getGenericSuperclass()).getActualTypeArguments()[0];
        persistentClass = (Class<T>) arg;
    }

    // Other stuff
}

public interface BaseService<T extends BaseEntity> {
}

public class BaseServiceImpl<T extends BaseEntity> implements BaseService<T>, Serializable {
    private Class<T> queryClass;
    public BaseServiceImpl(){
        // Set the above queryClass through Java Reflection and/or CDI. Stucked here!
    }
} 
```

当我将 BaseController 子类化时

```
public class PersonController extends BaseController<Person, Long> {

    @Override
    @PostConstruct
    public void init() {
        super.init();
        // other stuff
    }
} 
```

为persistentClass分配了正确的Person类，我也想确定BaseServiceImpl中的具体类型类，在其中设置queryClass变量。我怎样才能做到这一点？
谢谢。
**更新：**更多细节，
BaseController 需要persistentClass 来从中创建新实例（persistentClass.newInstance()）和一些反射的东西，比如在JPA 实体类中获取声明的方法和注释。

BaseService 需要 queryClass（必须与 persistentClass 相同）才能将其实际委托给底层 DAO 层，而 DAO 类则简单地使用它

```
entityManager.find(queryClass, id); 
```

和类似的操作。
BaseController 和 BaseService（和 BaseDAO）对于大多数实体 CRUD 页面/操作都很常见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T18:23:03.573

您可以做的是注入 a`BaseServiceFactory`而不是实际`BaseService<T>`的，如下所示：

```
public interface BaseServiceFactory {

    <T> BaseService<T> create(Class<T> queryClass);
}

public class BaseController<T extends BaseEntity, ID extends Serializable> implements Serializable {
    @Inject
    private BaseServiceFactory<T> serviceFactory;
// .
// .
// .
} 
```

然后修改您的 BaseServiceImpl 构造函数，如下所示：

```
public class BaseServiceImpl<T extends BaseEntity>
    implements BaseService<T>, Serializable {
    private final Class<T> queryClass;

    public BaseServiceImpl(Class<T> queryClass){
        this.queryClass = queryClass;
    }
} 
```

然后得到适当类型的类，如下所示：

```
BaseService<T> service = serviceFactory.create(persistentClass); 
```

# javascript - 将主机解析为 IP 地址并使用 Chrome 扩展程序将其显示在弹出窗口中

> ID：11484910
> 
> 赞同：1
> 
> 时间：2012-07-14T15:20:35.723
> 
> 标签：javascript, google-chrome, google-chrome-extension, dns, ip-address

我正在开发一个 Chrome 扩展来执行以下操作。

单击该图标时，弹出窗口会显示当前显示页面的 IP 地址。

这个扩展应该适用于每一页。但问题是在加载 url 时应该已经加载了当前 url 的 IP。不是在显示弹出窗口时，这样在弹出窗口和通过 Web 服务获取 IP 地址之间不会有延迟。

因此，本质上，每个选项卡的扩展弹出窗口都是不同的。

这应该是页面操作还是浏览器操作？

以及如何在后台从 Web 服务获取数据并在实际显示之前将其分配给弹出窗口？

任何信息都是真正的appriciated。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T21:40:39.700

*此答案包含用于测试扩展的完整代码。要进行测试，请创建每个文件，将其存储在同一目录中，然后通过`chrome://extensions/`（开发人员模式）加载它。*

* * *

“这个扩展应该适用于每一页。” ->**浏览器操作**。

有两种方法可以尽快捕获页面的 URL。这两种方法都必须在后台页面中使用。

1.  使用[`chrome.tabs.onUpdated`](http://code.google.com/chrome/extensions/tabs.html#event-onUpdated).

    ```
    chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
        if (changeInfo.status === 'loading' && changeInfo.url) {
            processUrl(tabId, tab.url); // or changeInfo.url, does not matter
        }
    }); 
    ```

2.  使用[`chrome.webRequest`](http://code.google.com/chrome/extensions/webRequest.html)API：

    ```
    chrome.webRequest.onBeforeRequest.addListener(function(details) {
        processUrl(details.tabId, details.url); // Defined below
    }, {
        urls: ["*://*/*"],
        types: ["main_frame"]
    }); 
    ```

任何一种方法都将捕获选项卡和 url。在您的情况下*-在当前选项卡的弹出窗口中显示 IP-，*首选第一种方法，因为它会在每个选项卡更新时触发。后者只会为`http:`和`https:`URLs 触发。

任何一种方法都会调用该`processUrl`函数。此函数将处理给定选项卡的 URL。我建议缓存 IP 地址，以避免对 Web 服务的请求过多。

## `background.js`

```
var tabToHost = {};
var hostToIP = {};

function processUrl(tabId, url) {
    // Get the host part of the URL. 
    var host = /^(?:ht|f)tps?:\/\/([^/]+)/.exec(url);

    // Map tabId to host
    tabToHost[tabId] = host ? host=host[1] : '';

    if (host && !hostToIP[host]) { // Known host, unknown IP
        hostToIP[host] = 'N/A';    // Set N/A, to prevent multiple requests
        // Get IP from a host-to-IP web service
        var x = new XMLHttpRequest();
        x.open('GET', 'http://www.fileformat.info/tool/rest/dns.json?q=' + host);
        x.onload = function() {
            var result = JSON.parse(x.responseText);
            if (result && result.answer && result.answer.values && result.answer.values[0]) {
                // Lookup successful, save address
                hostToIP[host] = result.answer.values[0].address;
                setPopupInfo(tabId);
             }
         };
         x.send();
    }

    // Set popup info, with currently (un)known information
    setPopupInfo(tabId);
}
function setPopupInfo(tabId) { // Notify all popups
    chrome.extension.getViews({type:'popup'}).forEach(function(global) {
        global.notify(tabId);
    });
}

// Remove entry from tabToIp when the tab is closed.
chrome.tabs.onRemoved.addListener(function(tabId) {
    delete tabToHost[tabId];
});
// Add entries: Using method 1 ( `onUpdated` )
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
    if (changeInfo.status === 'loading' && changeInfo.url) {
        processUrl(tabId, tab.url); // or changeInfo.url, does not matter
    }
});

// Init: Get all windows and tabs, to fetch info for current hosts
chrome.windows.getAll({populate: true}, function(windows) {
    windows.forEach(function(win) {
        if (win.type == 'normal' && win.tabs) {
            for (var i=0; i<win.tabs.length; i++) {
                processUrl(win.tabs[i].id, win.tabs[i].url);
            }
        }
    });
}); 
```

找到 IP 后，将 IP 保存在哈希中。这个哈希看起来像：

```
hostToIP = {
    'stackoverflow.com': '64.34.119.12',
    'superuser.com': '64.34.119.12'
}; 
```

如您所见，两台主机可能引用同一个 IP。反之亦然：一个主机可能有多个 IP 地址（例如[Lookup Google](http://www.fileformat.info/tool/rest/dns.json?q=google.com)）。如果打开，后台页面与浏览器操作弹出窗口进行通信。

## `popup.js`

```
// Get initial tab and window ID
var tabId, windowId;
chrome.tabs.query({active:true, currentWindow:true, windowType:'normal'},
  function(tabs) {
    if (tabs[0]) {
        // Found current tab
        window.tabId = tabs[0].id;
        windowId = tabs[0].windowId;
        requestUpdate();
    }
});
// Receive tab ID updates
chrome.tabs.onActivated.addListener(function(activeInfo) {
    if (activeInfo.windowId === windowId) {
        requestUpdate();
    }
});

// Communication with background:
var background = chrome.extension.getBackgroundPage();

// Backgrounds calls notify()
function notify(tabId, url, ip) {
    if (tabId === window.tabId) { // Tab == current active tab
        requestUpdate();
    }
}
// Get fresh information from background
function requestUpdate() {
    // tabId is the current active tab in this window
    var host = background.tabToHost[tabId] || '';
    var ip = host && background.hostToIP[host] || 'N/A';
    // Now, do something. For example:
    document.getElementById('host').textContent = host;
    document.getElementById('ip').textContent = ip;
} 
```

## `popup.html`

```
<!DOCTYPE html>
<html>
<meta charset="utf-8">
<title>Host to IP</title>
<script src="popup.js"></script>
</head>
<body style="white-space:pre;font-family:monospace;">
Host: <span id="host"></span>
IP  : <span id="ip"></span>
</body>
</html> 
```

## `manifest.json`

```
{
    "name": "Host To Tab",
    "manifest_version": 2,
    "version": "1.0",
    "description": "Shows the IP of the current tab at the browser action popup",
    "background": {"scripts":["background.js"]},
    "permissions": ["http://www.fileformat.info/tool/rest/dns.json?q=*", "tabs"],
    "browser_action": {
        "default_popup": "popup.html"
    }
} 
```

# 相关文件

*   [浏览器操作](http://code.google.com/chrome/extensions/browserAction.html)
*   [`chrome.tabs`](http://code.google.com/chrome/extensions/tabs.html)API（大量使用）
*   [客户端 JavaScript 中](http://www.fileformat.info//tool//rest//dns-json.htm)的 DNS - Web 服务的文档
*   [`chrome.windows.getAll`](http://code.google.com/chrome/extensions/windows.html#method-getAll)方法（获取初始信息）。

# ruby-on-rails - JRuby on Rails 资产：预编译什么都不做

> ID：11484912
> 
> 赞同：1
> 
> 时间：2012-07-14T15:20:38.500
> 
> 标签：ruby-on-rails, jruby, asset-pipeline, assets, precompile

我在 JRuby 中有一个 rails 应用程序，当我运行它时，`rake assets:precomile`它只会创建一个`/public/assets/manifest.yml`包含以下内容的文件：

```
--- {}
... 
```

所有的资产都没有被预编译，但是当我尝试跟踪这个时我没有得到任何错误：

```
tbraun@tbraun-DEBIAN:~/Dokumente/Entwicklung/RubyOnRails/Passbildkartei$ rake assets:precompile --trace
** Invoke environment (first_time)
** Execute environment
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/home/tbraun/.rvm/rubies/jruby-1.6.7.2/bin/jruby /home/tbraun/.rvm/gems/jruby-1.6.7.2/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke environment (first_time)
** Execute environment
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment 
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
** Invoke environment (first_time)
** Execute environment
** Invoke assets:precompile:nondigest (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment 
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:nondigest 
```

但是我的资产目录中有一些图像、javascripts 和样式表，我不知道我能做些什么来解决这个问题。

我的 JRuby 版本是：

```
jruby 1.6.7.2 (ruby-1.9.2-p312) (2012-05-01 26e08ba) (Java HotSpot(TM) 64-Bit Server VM 1.6.0_26) [linux-amd64-java] 
```

这是我正在使用的宝石：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem "haml", "~> 3.1.4"
gem "paperclip", "~> 3.0"
gem "will_paginate", "~> 3.0.3"
gem "devise", "~> 2.1.2"
gem "devise_ldap_authenticatable", "~> 0.6.1"

gem 'activerecord-jdbcsqlite3-adapter'
gem 'activerecord-jdbcmysql-adapter'

gem 'jruby-openssl'
gem 'json'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'therubyrhino'

  gem 'uglifier', '>= 1.0.3'
  gem "haml-rails", "~> 0.3.4"

  gem "warbler", "~> 1.3.5"
end

gem 'jquery-rails' 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:52:16.647

有同样的问题。`devise`再次宝石。使用heroku，所以我的配置文件中没有有效的生产数据库信息。将我的开发配置复制到 config/database.yml 中的生产部分，以使其正常工作。可能有更简单的方法...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T16:52:12.750

我自己发现了问题。这是`devise`导致失败的gem，`assets:precomile`因为它需要访问数据库。但我的生产数据库只能通过 VPN 访问。所以你只需要确保在预编译资产时使用设计时可以访问数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T19:19:27.577

实际上，您可以通过添加来避免这种情况

> config.assets.initialize_on_precompile = false

到你的 application.rb

# model-view-controller - Struts2：模型还是动作？模型驱动类呢？

> ID：11484927
> 
> 赞同：1
> 
> 时间：2012-07-14T15:21:55.953
> 
> 标签：model-view-controller, model, struts2, action, model-driven

我不关心在 Struts2 下做一个有用的项目，但也是一个结构良好的项目。我有一个名为**Custormer**的 bean ，其中有必要的属性及其 getter 和 setter。我想知道我应该在哪里构建**Custormer** bean 的不同操作，例如**Subscribe**，**Upgrade**，......它应该在模型中类还是动作类？另外，我不完全了解**模型驱动**类需要什么。非常感谢你们:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T16:38:28.847

两者都不是，那些可能属于服务类——但从你的描述中无法判断。当用户订阅时实际*发生了什么？*升级？

动作类本质上应该只是 Web 层和业务层之间的粘合剂、编组数据、处理来自两个层的成功/错误条件等。

模型类就是您业务领域的模型。这些模型的性质在不同领域、设计/架构方法等之间可能存在很大差异。业务功能所在的位置也可能存在很大差异。服务层、DDD 等都可以处理此类功能。

但是，它不应该*直接**通过*操作来实现。相反，动作应该委托给服务层、模型等。换句话说，动作不应该直接更新数据库字段以指示用户已升级。Web 层只是引导站点用户四处走动。

`ModelDriven`只是一个抽象，它表示不是将动作放在值堆栈的顶部（例如，表单属性将设置在动作属性上），*模型*的实例将位于堆栈的顶部（例如，表单属性将在模型实例上设置）。

# c# - 仅从字符串中删除数字和字符

> ID：11484929
> 
> 赞同：0
> 
> 时间：2012-07-14T15:21:59.147
> 
> 标签：c#, regex

给定一个包含数字和字符的字符串，例如

Mi2ch£al

*删除除*字母（因此是数字和字符）之外的所有内容的相关正则表达式是什么？

此外，我正在使用 .NET 2.0 来完成这项任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:41:04.680

如果您不介意使用 Linq：

```
string s = new string("Mi2ch£al".Where(c => !char.IsNumber(c) && !char.IsLetter(c)).ToArray()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:25:08.507

```
string s = "Mi2ch£al";
s = Regex.Replace(s, @"[^\w\s]", ""); 
```

如果您不想要国际重音字符：

```
string s = "Mi2ch£al";
s = Regex.Replace(s, @"[^a-zA-Z0-9\s]", ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T15:25:25.533

`[^a-zA-Z]`用空字符串替换正则表达式或`[^a-zA-Z\s]`节省空格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T15:41:41.587

`\p{L}`匹配任何字母字符和`\P{L}`任何非字母字符（包括非拉丁字符集、重音字符等）。因此，您可以简单地使用：

```
Regex.Replace(input, @"\P{L}", String.Empty) 
```

`input`输入字符串在哪里。

# javascript - Youtube API: How to grab video ID? JQuery/Json

> ID：11484938
> 
> 赞同：1
> 
> 时间：2012-07-14T15:23:18.497
> 
> 标签：javascript, jquery, youtube, youtube-api, youtube-javascript-api

Currently fetching the first video from a search on YouTube using the code below, but when docready is called, the ids are not set. The code does not wait for the ajax results to be returned, instead it continues and returns nothing.

I've tried the async:false with the ajax thinking it might make it 'wait' but still nothing is returned. How would I fix this so all the ids will be set?

```
$(document).ready(function () {
    docready();
});

function docready() {
    var id1 = grabid("cat");
    var id2 = grabid("dog");
    var id3 = grabid("goldfish");
    alert(id1);
}

function grabid(keyword) {
    var url = 'http://gdata.youtube.com/feeds/api/videos?q=' + encodeURIComponent(keyword) + '&format=5&max-results=1&v=2&alt=jsonc';
    $.ajax({
        async: false,
        type: "GET",
        url: url,
        dataType: "jsonp",
        success: function (responseData, textStatus, XMLHttpRequest) {
            if (responseData.data.items) {
                var videos = responseData.data.items;
                videoid = videos[0].id;
                alert(videoid);
                return videoid;
            }
        }
    });
} 
```

**UPDATE:** I've just changed the code above a bit to make my problem a bit clearer. When the code is run it alert's the real 'videoid' 3 times as expected. But when it gets to alert(id1) it returns undefined - so the 'return videoid' is ignored and not passing it back to the variable.

**UPDATE 2 STILL UNSOLVED**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:41:58.270

首先你的ajax调用有问题试试这个..

```
 $.ajax({
     type: "GET",
     url: url,
     dataType: "jsonp",
     success: function (responseData) {
                  var videos = responseData.data.items;
                  var videoid=videos[0].id;
                   alert(videoid);
                  //pass this videoid to anyother JS function it should work
                },
     error: function (xhr, textStatus, XMLHttpRequest) {
                 alert(xhr.responseText);
                }   

 }); 
```

编辑：

更新代码以从 ajax 调用返回：

```
 function grabid(keyword){
   var url = 'http://gdata.youtube.com/feeds/api/videos?q='+encodeURIComponent(keyword)+'&format=5&max-results=1&v=2&alt=jsonc';
  return $.ajax({
     type: "GET",
     url: url,
     dataType: "jsonp"       
    });   

}

function getVideoId(key) {
  key.success(function(respdata) {
      var videos = respdata.data.items;
      var videoid=videos[0].id;
     alert(videoid)
   });
  }

var ids = grabid(123);
getVideoId(ids); 
```

删除所有加载或文档准备功能，这应该可以工作。

编辑 ：

你唯一能做的就是做 async:false，它会等待 ajax 调用完成并返回一个值......但是 CROSS DOMAIN 调用不是同步的，所以我可以说你不走运.. 你需要重新想想ajax调用的逻辑。

同样从 jQuery 1.8 开始，不推荐使用 async: false 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T18:21:19.593

我已经成功使用了以下（警告：剥离了一堆其他代码，所以这可能不会按原样运行）

```
function getVideos(playlistID) {
                $.ajax({
                    type: 'GET',
                    url: "http://gdata.youtube.com/feeds/api/playlists/" + playlistID + "?v=2&alt=json",
                    crossDomain: true,
                    processData: true,
                    data: {},
                    dataType: "jsonp",
                    success: loadVideos
                });
}

function loadVideos (data) {

        if (data && data.feed && data.feed.entry) {
            var markup = '<ul>';
            $.each(data.feed.entry, function (index) {
                var url = 'http://www.youtube.com/embed/' + this.media$group.yt$videoid.$t + '?rel=0&wmode=transparent',
                    title = this.title.$t,
                    thumb = this.media$group.media$thumbnail[0].url;
                markup += "<li><a data-rel='videos' href='" + url + "' target='_blank' class='youtube' title='" + title + "'><img src='" + thumb + "' alt='" + title + "' /></a></li>";
            });
            markup += '</ul>';

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T09:36:44.457

好的，这就是我尝试过的似乎有效的方法

```
function grabid(query) {
var yurl ='http://gdata.youtube.com/feeds/api/videos';
yurl = yurl+'?key=<GDATA API KEY>';
yurl = yurl+'&orderby=relevance';
yurl = yurl+'&start-index=1';
yurl = yurl+'&max-results=1';
yurl = yurl+'&v=2';
yurl = yurl+'&q='+encodeURI(query);

$.ajax({
    async: false,
    type: "GET",
    url: yurl,
    dataType: "xml",
    success: parseXml
});

var ytvideo = {
    ttl:title,
    vid:videoid,
    thm:thumb,
    vws:views,
    dur:duration
}
return ytvideo;
}

function parseXml(xml) {
$(xml).find("entry").each(function() {
    title = $(this).find("title").text();
    thumb = $(this).find("media\\:thumbnail, thumbnail").attr("url");
    videoid = $(this).find("yt\\:videoid, videoid").text();
    duration = $(this).find("yt\\:duration, duration").attr("seconds");
    views = $(this).find("yt\\:statistics, statistics").attr("viewCount");
});
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-14T16:10:43.793

您的问题是函数范围，您的 ajax 回调函数返回到什么？它不是你认为它可能在的地方。为什么不在所有函数的范围内创建一个数组并将 id 分配给它。下面的示例（未经测试）

```
// Id array in scope of all functions in this script
var id = [];

$(document).ready(function () {
    docready();
});

function docready() {
    // Removed vars as all id's are in the id array. Just grab what you want
    grabid("cat");
    grabid("dog");
    grabid("goldfish");

    // Alert the 'cat' item in the id array
    alert(id['cat']);
}

function grabid(keyword, success_callback) {
    var url = 'http://gdata.youtube.com/feeds/api/videos?q=' + encodeURIComponent(keyword) + '&format=5&max-results=1&v=2&alt=jsonc';
    $.ajax({
    async: false,
    type: "GET",
    url: url,
    dataType: "jsonp",
    success: function (responseData, textStatus, XMLHttpRequest) {
        if (responseData.data.items) {
            var videos = responseData.data.items;

            // Assign the video ID for the keyword to (array)id
            id[keyword] = videos[0].id;
        }
    }
}); 
```

# eclipse - 更换计算机时 Eclipse 插件中缺少罐子

> ID：11484943
> 
> 赞同：0
> 
> 时间：2012-07-14T15:24:26.343
> 
> 标签：eclipse, eclipse-plugin

当我使用 eclipse 的向导从 jar 中创建 eclipse 插件时，这台计算机上的一切正常。但是当我尝试在另一台计算机上使用相同的插件项目（使用 git）时，我遇到了依赖问题。我猜那是因为 jars 实际上并没有复制到插件项目文件夹中，但是手动执行此操作无济于事，我也无法在向导中看到执行此操作的选项...顺便说一句，我已逐步使用[本](http://www.vogella.com/articles/EclipseJarToPlugin/article.html)教程步。

如何修复依赖关系而不必在每台机器上重新创建它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:37:05.957

我刚刚尝试过，向导*确实*将外部 JAR 复制到插件项目中，并将它们添加到清单文件和`build.properties`. 如果您的插件项目中没有直接的 JAR，那么肯定有问题；您是否多次尝试过该向导，并且使用不同的 JAR？

如果您手动将 JAR 复制到捆绑项目中，请转到清单编辑器的“*构建*”选项卡，并确保在“*二进制构建*”部分下选择了 JAR 以包含 - 这就是告诉 Eclipse 项目中的哪些文件包括它构建/导出捆绑包的时间。还可以使用*Runtime*选项卡从 JAR 中导出所有包，如教程中所述。

**更新：**向导中有一个您通常想要关闭的选项：*将 JAR 存档解压缩到项目*中。该选项将转储 .class 文件（以及 JAR 中的其他内容，而不仅仅是包含 JAR 本身。正如教程所解释的，这通常不是您想要的。例如，如果您将项目签入源代码控制（例如 cvs、svn 或 git)，.class 文件通常被忽略。最好不要选中该选项。

# asp.net - asp.net upload image to data base?

> ID：11484944
> 
> 赞同：0
> 
> 时间：2012-07-14T15:24:27.087
> 
> 标签：asp.net

Just wanna ask what is the code to upload image to database is it the same as inserting values in table data?can you give me example codes how to upload image to database?A friend of mine said i should use XML for my image upload.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T06:57:05.743

[使用 File Uploader Control http://ajaxuploader.com/h/Save-Files-to-Database-using-FileUpload-Control.htm](http://ajaxuploader.com/h/Save-Files-to-Database-using-FileUpload-Control.htm)将文件保存到 SQL Server 数据库

一个示例演示了如何使用 File Uploader Control 将多个文件异步上传到数据库。在文件上传对话框中选择文件时，用户可以使用 SHIFT 键或 CTRL 键选择要上传的多个文件。

> > 建议：不要将图像存储在数据库中。

上传文件是 Asp.net 应用程序中的常见活动，一般我们上传文件并保存到文件系统，并将保存文件的 URL 存储在数据库中，但有特定的场景需要我们存储整个文件以二进制格式存入数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T15:31:06.383

建议：不要*将*图像存储在数据库中。

存储他们的路径。

*现在，对于您的问题：*

您应该将图像转换为字节数组：类似于：

```
File.GetAllBytes("readme.jpg") 
```

现在，在 sql（我假设的服务器）中创建一个 varbinary 列

并将字节数组传递到此列。

就这样。

# join - JOIN DQL (symfony2) multiple joins between two tables

> ID：11484945
> 
> 赞同：0
> 
> 时间：2012-07-14T15:24:31.667
> 
> 标签：join, symfony, doctrine-orm, dql

I have a problem in my DQL query. I have a table which has 3 foreign keys userId, userRId and userAId. Two of those foreign keys may be NULL.

I want to join all the foreign keys in the query but i don't know how to join two or three foreign keys between the same tables. (see query ) Could somebody give me some ideas??

```
 **TABLE A**
   id    userId   userRId   userAId
   1     2        NULL      NULL
   1     2         1        NULL
   1     2        NULL         1

**TABLE USER**
userId  name
  2     xxxx
  1     xxxx

The DQL query:

"SELECT FROM nasyBundle:A a JOIN a.userId u , a JOIN userRId , a JOIN userAid
         WHERE ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T07:26:07.077

在 DQL 中，您对对象（实体）而不是表（基于映射）进行操作。所以当你有这样的实体时：

```
class User
{
    private $id;
    private $name;
}

class TableA
{
    private $id;
    private $user;
    private $userR;
    private $userA;
} 
```

您可以像这样创建查询（当您有有效的映射时）

```
SELECT a
FROM nastyBundle:TableA a
INNER JOIN a.user u
LEFT JOIN a.userR ur
LEFT JOIN a.userA ua 
```

但是，是的，要使用它，您需要映射信息。如果您没有映射，您可以使用学说生成它：映射：导入只需输入您的 symfony 项目以阅读更多信息`php app/console help doctrine:mapping:import`

# c - 实施 perror() - 问题

> ID：11484950
> 
> 赞同：3
> 
> 时间：2012-07-14T15:25:00.993
> 
> 标签：c, posix

我正在实现与`perror()`我正在使用的 API 等效的功能。

perror() ISO C std[`doc`](http://pubs.opengroup.org/onlinepubs/009604499/functions/perror.html)说：

> perror() 函数不应改变标准错误流的方向。

但以编程方式，这意味着什么？

我`fprintf(stderr, .. )`目前正在使用。是误用了吗？如果是真的，为什么？如果我的实现中有一些错误（见下文），请给我点。

根据我的解释查看我的 C 代码：

```
void
fooapi_perror(const char *s)
{
  char *emsg;

  if(s != NULL && *s != '\0')
    fprintf(stderr, "%s: ", s);

  emsg = fooapi_strerror(GetLastErrorCode()); 
  fprintf(stderr, "%s\n",  emsg); 
  free(emsg);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T16:15:38.077

每个 C 流都有一个属性——“面向”或“面向宽”或“面向字节”的“方向”，这是由该流上的第一个操作确定的。当流没有“方向”时，您可以更改蒸汽的方向。调用方向与流方向冲突的任何函数会导致未定义的行为。

例如， printf 会使蒸汽变成面向字节的，而 wprintf 会使蒸汽变成面向宽的。

就您的问题而言， perror 不应改变其流的方向。

因此，在您的代码中，如果错误使用的流已经有一个方向，您应该确保您没有调用其方向与流的当前方向冲突的函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T17:23:38.423

您可以使用 确定流的方向[`fwide(3)`](http://pubs.opengroup.org/onlinepubs/009604499/functions/fwide.html)，并使用它来决定是否调用`fprintf`或`fwprintf`。

```
void
fooapi_perror(const char *s)
{
    const char *emsg = fooapi_strerror(fooapi_geterrcode());

    if (fwide(stderr, 0) <= 0) {
        // byte-oriented or not yet oriented
        if (s && *s)
            fprintf(stderr, "%s: %s\n", s, emsg);
        else
            fprintf(stderr, "%s\n", emsg);
    } else {
        // wide-oriented
        if (s && *s)
            fwprintf(stderr, L"%s: %s\n", s, emsg);
        else
            fwprintf(stderr, L"%s\n", emsg);
    }

    free(emsg);
} 
```

注意：当流尚未获得方向时，这不符合“不改变流方向”的要求，因为没有办法*取消*流的方向，也没有办法将输出发送到流而不给它一个方向。 [在这种情况下，GNU libc 的实现采用`perror`](http://sourceware.org/git/?p=glibc.git;a=blob;f=stdio-common/perror.c)了一种肮脏的 hack（复制底层文件描述符！）也许我们应该把它归结为“标准 C 宽字符支持无论如何都不适合目的”并继续前进。

Tangential kibitz：`fooapi_strerror`应该返回一个指向字符串常量的指针，而不是必须为`free`d 的指针。

# iphone - Clear text field box when tapped on iPhone

> ID：11484952
> 
> 赞同：0
> 
> 时间：2012-07-14T15:25:08.297
> 
> 标签：iphone, c, xcode, uitextfield

I have a text field that is editable by the user and it contains some example text saying "Tap here to enter details". I would like the text box to clear when the user taps it so that the user does not have to delete my example before inputting their message. Is there an easy way of doing this. The only thing I can think of is to make a separate view controller that it links to when the text box is touched buut this seems an awful way round something which I would have thought is rather simple. All help greatly appreciated.

Thank you in advanced.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T15:32:44.170

![在此处输入图像描述](../Images/17a9f8ca450e8222a6eb109ad4163f71.png)UITextField 有一个属性 [clearsOnBeginEditing](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UITextField_Class/Reference/UITextField.html#//apple_ref/occ/instp/UITextField/clearsOnBeginEditing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T16:11:06.163

我知道你已经得到了答案，但是使用 UITextField 的委托方法还有一个替代方法`textFieldDidBeginEditing:`——

```
 - (void)textFieldDidBeginEditing:(UITextField *)textField {

textField.text = @"";

} 
```

# java - How to make NDEF text record human unreadable?

> ID：11484953
> 
> 赞同：1
> 
> 时间：2012-07-14T15:25:18.040
> 
> 标签：java, android, nfc, ndef

I have a nfc tag with ndef text record. The text is

```
Paris/London 
```

and anyone with nfc tag reading app can read it like this.

How should i encrypt/encode this text so that is human unreadable? I want my app to decrypt/decode it so it can use it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T00:05:03.183

您可以设置一个表格，将可能的字符串映射到整数，而不是使用这些字符串。例如：巴黎 -> 0、伦敦 -> 1 等。然后您的标签可能包含文本“0/1”，没有您的桌子的任何人都无法解释。

另一种可能性是简单地加密字符串。但是，要将其存储在 NFC 标签上，您必须创建自己的 NDEF 记录类型，或者，例如，使用 Base64 编码能够将加密字符串存储在 NDEF 文本记录中（因为它应该只包含人类可读的文本）。

# c# - c# System Methods && LINQ implementations

> ID：11484957
> 
> 赞同：2
> 
> 时间：2012-07-14T15:26:09.480
> 
> 标签：c#, .net

Is there any way to see how LINQ expressions are implemented? (Eg. Union / Intersect, Where etc). That would be very helpful because sometimes LINQ executes faster than custom code and sometimes it doesn't. It would be nice to know from the beginning what to use.

I know there's also tool which allows you to see .NET System methods implementations, but i can't remember its name. Can anyone point me to that?

Thank you!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T15:28:21.140

> I know there's also tool which allows you to see .NET System methods implementations, but i can't remember its name.

The in-memory extension methods are implemented in the [System.Linq.Enumerable](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx) class in the `System.Core` assembly.

*   [Reflector](http://www.reflector.net/) is one example of a tool that allows you to easily inspect implementation given a compiled assembly.
*   [ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx) is a free alternative.

But the .NET source code is now [freely available](http://blogs.msdn.com/b/rscc/archive/2010/08/16/net-framework-4-reference-source-is-available.aspx). So don't hesitate to directly consult it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T15:30:52.247

使用免费的反编译器[dotPeek](http://www.jetbrains.com/decompiler/)。它也是内置在 ReSharper 中的

# java - table column won't take full size of the table view in javaFX

> ID：11484960
> 
> 赞同：24
> 
> 时间：2012-07-14T15:26:35.520
> 
> 标签：java, user-interface, javafx-2, scenebuilder

i am trying to create a table with two columns. i am using the scene builder included in netbeans 7.2. in all the examples i have seen all you need to do is drag the table column to the table and it will take the full size, this is not true in my case. this is the fxml file generated by the scene builder. just to be clear i am not changing the table properties from the java.

the fxml:

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.net.*?>
<?import java.util.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<AnchorPane id="AnchorPane" prefHeight="758.0" prefWidth="956.0" styleClass="screen" xmlns:fx="http://javafx.com/fxml" fx:controller="bgu.dcr.az.cpu.ui.expb.ExperimentBuilderScreen">
  <children>
    <GridPane id="gridPane1" prefHeight="517.0" prefWidth="600.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
      <children>
        <Label id="label1" alignment="CENTER" contentDisplay="CENTER" prefHeight="38.0" prefWidth="9999.0" styleClass="caption" text="Create New Experiment" textFill="#990000" GridPane.columnIndex="0" GridPane.rowIndex="0">
          <font>
            <Font name="Consolas Bold" size="20.0" />
          </font>
        </Label>
        <HBox id="hBox1" alignment="CENTER" prefHeight="100.0" prefWidth="200.0" spacing="5.0" GridPane.columnIndex="0" GridPane.rowIndex="1">
          <children>
            <Label id="label2" graphicTextGap="0.0" styleClass="field-label" text="Experiment Name">
              <font>
                <Font name="Consolas" size="15.0" />
              </font>
              <HBox.margin>
                <Insets top="3.0" />
              </HBox.margin>
            </Label>
            <TextField id="textField1" prefWidth="200.0" HBox.hgrow="ALWAYS" />
            <Button id="button2" fx:id="saveButton" styleClass="dialog-button" text="Save" />
            <Button id="button3" styleClass="dialog-button" text="Dismiss" />
          </children>
          <padding>
            <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" fx:id="x3" />
          </padding>
        </HBox>
        <VBox id="VBox" alignment="CENTER" spacing="5.0" GridPane.columnIndex="0" GridPane.rowIndex="2">
          <children>
            <Label id="label3" prefWidth="9999.0" styleClass="field-label" text="Experiment Tests">
              <VBox.margin>
                <Insets left="5.0" top="5.0" />
              </VBox.margin>
            </Label>
            <HBox id="HBox" alignment="CENTER" spacing="5.0">
              <children>
                <Button id="button1" prefHeight="999.0" styleClass="add-button" text="New">
                  <HBox.margin>
                    <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" fx:id="x3" />
                  </HBox.margin>
                </Button>
                <ListView id="listView1" fx:id="tests" orientation="HORIZONTAL" prefHeight="999.0" prefWidth="200.0" HBox.hgrow="ALWAYS">
                  <HBox.margin>
                    <Insets bottom="4.0" right="5.0" top="4.0" />
                  </HBox.margin>
                </ListView>
              </children>
            </HBox>
          </children>
        </VBox>
        <VBox id="vBox1" prefHeight="200.0" prefWidth="100.0" GridPane.columnIndex="0" GridPane.rowIndex="3">
          <children>
            <GridPane id="gridPane2" VBox.vgrow="ALWAYS">
              <children>
                <VBox id="vBox2" prefHeight="321.0" prefWidth="150.0" styleClass="with-dashed-border" GridPane.columnIndex="0" GridPane.rowIndex="0" GridPane.rowSpan="4">
                  <children>
                    <Label id="label4" text="Algorithms">
                      <graphic>
                        <ImageView id="emptyImageView1" fitHeight="32.0" fitWidth="32.0" preserveRatio="true">
                          <image>
                            <Image url="@_algo.png" preserveRatio="false" smooth="false" />
                          </image>
                        </ImageView>
                      </graphic>
                    </Label>
                    <Button id="button1" fx:id="newAlgorithmButton" prefWidth="999.0" styleClass="add-button" text="New" VBox.margin="$x3" />
                  </children>
                  <GridPane.margin>
                    <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" fx:id="x2" />
                  </GridPane.margin>
                </VBox>
                <VBox id="vBox2" prefHeight="321.0" prefWidth="150.0" styleClass="with-dashed-border" GridPane.columnIndex="1" GridPane.margin="$x2" GridPane.rowIndex="1">
                  <children>
                    <Label id="label4" text="Problem Generator">
                      <graphic>
                        <ImageView id="emptyImageView1" fitHeight="32.0" fitWidth="32.0" preserveRatio="true">
                          <image>
                            <Image url="@_pgen.png" preserveRatio="false" smooth="false" />
                          </image>
                        </ImageView>
                      </graphic>
                    </Label>
                    <Button id="button1" maxHeight="999.0" prefHeight="999.0" prefWidth="999.0" styleClass="add-button" text="New" VBox.margin="$x3" VBox.vgrow="ALWAYS" />
                  </children>
                </VBox>
                <VBox id="vBox2" prefHeight="321.0" prefWidth="150.0" styleClass="with-dashed-border" GridPane.columnIndex="2" GridPane.margin="$x2" GridPane.rowIndex="1">
                  <children>
                    <Label id="label4" prefWidth="9999.0" text="Correctness tester">
                      <graphic>
                        <ImageView id="emptyImageView1" fitHeight="32.0" fitWidth="32.0" preserveRatio="true">
                          <image>
                            <Image url="@_ctest.png" preserveRatio="false" smooth="false" />
                          </image>
                        </ImageView>
                      </graphic>
                    </Label>
                    <Button id="button1" maxHeight="999.0" maxWidth="999.0" prefHeight="999.0" prefWidth="999.0" styleClass="add-button" text="New" VBox.margin="$x3" VBox.vgrow="ALWAYS" />
                  </children>
                </VBox>
                <VBox id="vBox2" prefHeight="321.0" prefWidth="150.0" styleClass="with-dashed-border" GridPane.columnIndex="1" GridPane.margin="$x2" GridPane.rowIndex="2">
                  <children>
                    <Label id="label4" prefWidth="130.0" text="Message delayer">
                      <graphic>
                        <ImageView id="emptyImageView1" fitHeight="32.0" fitWidth="32.0" preserveRatio="true">
                          <image>
                            <Image url="@_mdel.png" preserveRatio="false" smooth="false" />
                          </image>
                        </ImageView>
                      </graphic>
                    </Label>
                    <Button id="button1" maxHeight="999.0" maxWidth="999.0" prefHeight="999.0" prefWidth="999.0" styleClass="add-button" text="New" VBox.margin="$x3" VBox.vgrow="ALWAYS" />
                  </children>
                </VBox>
                <VBox id="vBox2" prefHeight="321.0" prefWidth="150.0" styleClass="with-dashed-border" GridPane.columnIndex="2" GridPane.margin="$x2" GridPane.rowIndex="2">
                  <children>
                    <Label id="label4" prefWidth="130.0" text="Limiter">
                      <graphic>
                        <ImageView id="emptyImageView1" fitHeight="32.0" fitWidth="32.0" preserveRatio="true">
                          <image>
                            <Image url="@_limiter.png" preserveRatio="false" smooth="false" />
                          </image>
                        </ImageView>
                      </graphic>
                    </Label>
                    <Button id="button1" maxHeight="999.0" maxWidth="999.0" prefHeight="999.0" prefWidth="999.0" styleClass="add-button" text="New" VBox.margin="$x3" VBox.vgrow="ALWAYS" />
                  </children>
                </VBox>
                <VBox id="vBox2" prefHeight="321.0" prefWidth="150.0" styleClass="with-dashed-border" GridPane.columnIndex="3" GridPane.margin="$x2" GridPane.rowIndex="0" GridPane.rowSpan="4">
                  <children>
                    <Label id="label4" prefWidth="9999.0" text="Statistic collectors">
                      <graphic>
                        <ImageView id="emptyImageView1" fitHeight="32.0" fitWidth="32.0" preserveRatio="true">
                          <image>
                            <Image url="@_scol.png" preserveRatio="false" smooth="false" />
                          </image>
                        </ImageView>
                      </graphic>
                    </Label>
                    <Button id="button1" prefWidth="999.0" styleClass="add-button" text="New" VBox.margin="$x3" />
                  </children>
                </VBox>
                <HBox id="hBox1" alignment="CENTER" prefHeight="100.0" prefWidth="200.0" spacing="5.0" GridPane.columnIndex="1" GridPane.columnSpan="2" GridPane.rowIndex="0">
                  <children>
                    <Label id="label2" graphicTextGap="0.0" styleClass="field-label" text="Name">
                      <HBox.margin>
                        <Insets top="7.0" />
                      </HBox.margin>
                    </Label>
                    <TextField id="textField1" maxHeight="28.0" minHeight="28.0" prefHeight="28.0" prefWidth="200.0" text="Empty Test" HBox.hgrow="ALWAYS" />
                  </children>
                  <padding>
                    <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" fx:id="x3" />
                  </padding>
                </HBox>
                <VBox id="vBox3" prefHeight="200.0" prefWidth="100.0" GridPane.columnIndex="1" GridPane.rowIndex="3" />
              </children>
              <columnConstraints>
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
              </columnConstraints>
              <rowConstraints>
                <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
              </rowConstraints>
            </GridPane>
          </children>
        </VBox>
        <VBox id="vBox4" alignment="CENTER" styleClass="with-dashed-border" GridPane.columnIndex="0" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="4" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS">
          <children>
            <TableView id="tableView1" prefHeight="54.0" prefWidth="837.0" VBox.vgrow="ALWAYS">
              <columns>
                <TableColumn prefWidth="75.0" text="Column X" />
                <TableColumn prefWidth="75.0" text="Column X" />
              </columns>
            </TableView>
          </children>
          <GridPane.margin>
            <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" fx:id="x2" />
          </GridPane.margin>
        </VBox>
      </children>
      <columnConstraints>
        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
      </columnConstraints>
      <rowConstraints>
        <RowConstraints maxHeight="38.0" minHeight="38.0" prefHeight="38.0" vgrow="NEVER" />
        <RowConstraints maxHeight="32.0" minHeight="32.0" prefHeight="32.0" vgrow="NEVER" />
        <RowConstraints maxHeight="100.0" minHeight="100.0" prefHeight="100.0" vgrow="SOMETIMES" />
        <RowConstraints vgrow="SOMETIMES" />
        <RowConstraints maxHeight="100.0" prefHeight="100.0" valignment="CENTER" vgrow="ALWAYS" />
      </rowConstraints>
    </GridPane>
  </children>
  <stylesheets>
    <URL value="@_style.css" />
    <URL value="@../_style.css" />
  </stylesheets>
</AnchorPane> 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-14T19:40:39.117

**更新**

JavaFX 2.2+ 版本中的新功能使此答案在与 FXML 文档一起应用时已过时。

一个基于 FXML 的解决方案，它使用新的 FXML 功能允许通过 FXML 设置列大小：[FXML set TableView column resize policy](https://stackoverflow.com/questions/14095708/fxml-set-tableview-column-resize-policy)。

```
<TableView fx:id="tableView" layoutX="110.0" layoutY="78.0" prefHeight="200.0" prefWidth="396.0">
    <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
    <columns>
        <TableColumn prefWidth="75.0" text="Column X" />
        <TableColumn prefWidth="75.0" text="Column X" />
    </columns>
</TableView> 
```

如果您不使用 FXML，TableView 的调整大小策略仍然可以通过此答案中定义的代码设置：

```
tableView.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY); 
```

* * *

在您的 FXML 中，您已将表的首选宽度定义为 837，将每列的首选宽度定义为 75。默认情况下，JavaFX 列大小调整策略将保持列的首选宽度。除非您设置新的列大小调整策略或将所有列的首选宽度之和设置为表格宽度，否则您不会让表格列填满整个表格的宽度。

JavaFX 确实提供了一种[修改默认列大小调整策略](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TableView.html#setColumnResizePolicy%28javafx.util.Callback%29)的机制。通过将列调整大小策略设置为[CONSTRAINED_RESIZE_POLICY](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TableView.html#CONSTRAINED_RESIZE_POLICY)，每列的宽度总和将被限制为填充 tableview 的宽度 - 即使调整了 tableview 的大小或调整了单个列的大小。这可能是您想要的行为。

虽然可能有一种方法可以在 FXML 的 tableView 上设置 CONSTRAINED_RESIZE_POLICY，但我不知道有一种方法（尽管我在 fxml 方面的技能还很初级 - 所以也许更知情的人可以使用纯 fxml 完成配置）。

您可以做的是为您的 fxml 文件定义一个控制器，然后在控制器中配置调整大小策略。以下代码演示了一个完整的示例（针对 JavaFX 2.2b17 预览版编写）。

FXML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>

<AnchorPane id="AnchorPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0" xmlns:fx="http://javafx.com/fxml" fx:controller="tableview.TableViewController">
  <children>
    <TableView fx:id="tableView" layoutX="110.0" layoutY="78.0" prefHeight="200.0" prefWidth="396.0">
      <columns>
        <TableColumn prefWidth="75.0" text="Column X" />
        <TableColumn prefWidth="75.0" text="Column X" />
      </columns>
    </TableView>
  </children>
</AnchorPane> 
```

控制器类：

```
package tableview;

import java.net.URL;
import java.util.ResourceBundle;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.control.TableView;

/* controller class for the tableview fxml definition */
public class TableViewController implements Initializable {
  @FXML //  fx:id="tableView"
  private TableView<?> tableView; // Value injected by FXMLLoader

  @Override // This method is called by the FXMLLoader when initialization is complete
  public void initialize(URL fxmlFileLocation, ResourceBundle resources) {
    assert tableView != null : "fx:id=\"tableView\" was not injected: check your FXML file 'tableview.fxml'.";

    // initialize your logic here: all @FXML variables will have been injected
    tableView.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY);
  }
} 
```

应用类：

```
package tableview;

import java.io.IOException;
import java.net.URL;
import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Scene;
import javafx.scene.layout.AnchorPane;
import javafx.stage.Stage;

/** Main application class for tableview fxml demo application */
public class TableViewApplication extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage stage) throws IOException {
    AnchorPane layout = FXMLLoader.load(
      new URL(TableViewApplication.class.getResource("tableview.fxml").toExternalForm())
    );
    stage.setScene(new Scene(layout));
    stage.show();
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-01T09:27:03.750

如果您使用 JavaFX GUI 构建器“SceneBuilder 2.0” - 使用 TableView 属性[ColumnResizePolicy](http://download.java.net/jdk8/jfxdocs/javafx/scene/control/TableView.html#getColumnResizePolicy--) “约束调整大小”值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T13:06:53.327

目前无法从 FXML设置`CONSTRAINED_RESIZE_POLICY`a ：`tableView`

[https://forums.oracle.com/forums/thread.jspa?threadID=2337733](https://forums.oracle.com/forums/thread.jspa?threadID=2337733)

# java - PrimeFaces filling DataTable with List

> ID：11484963
> 
> 赞同：-1
> 
> 时间：2012-07-14T15:26:57.000
> 
> 标签：java, jsf, datatable, primefaces

I am trying to fill a DataTable with a List that was filled by a result queried by a native sql.

Object array defines the value of each columns, for expample Object[0] is the value of the first column.

My dataTable is something like this

```
<p:dataTable id="dataTable1RQ" var="item" value="#{reportQuestionMBean.dataTable}">  
    <p:column id="modelHeader">  
        <f:facet name="header">  
                Market  
        </f:facet>  
        <h:outputText value="#{reportQuestionMBean.market.name}" />  
    </p:column>  
    <p:column>  
        <f:facet name="header">  
                Form  
        </f:facet>  
        <h:outputText value="#{reportQuestionMBean.form.name}" />  
    </p:column>  
    <p:column>  
        <f:facet name="header">  
                Question  
        </f:facet>  
        <h:outputText value="#{item}" />  
    </p:column> 
</p:dataTable> 
```

I want to fill the column 'Question' but I cannot reach the index of the Object array in the List. If it was a specific class instead of Object[], it would be easy to fill by implementing like this

```
<h:outputText value="#{item.name}" /> 
```

But it is not. So if you know how to reach the index of an array in a list, your help will make me preciated.

Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T02:50:29.653

您可以在 EL 中使用大括号表示法`[]`通过索引访问数组项。

所以，这应该做

```
<h:outputText value="#{item[0]}" /> 
```

# php - Getting tweets by hashtags via file_get_contents

> ID：11484964
> 
> 赞同：0
> 
> 时间：2012-07-14T15:27:00.853
> 
> 标签：php, twitter, tweets, file-read

I was trying to use the [Twitter Search](https://dev.twitter.com/docs/api/1/get/search) to get tweets of a hashtag.

Since I just have to read a json file, I used `file_get_contents` instead of `cURL` like

```
file_get_contents('http://search.twitter.com/search.json?q=%23trends'); 
```

But when I run the code in my localhost, it shows the following error. Any idea about it?

**Warning: file_get_contents(http://search.twitter.com/search.json) [function.file-get-contents]: failed to open stream: Unable to find the socket transport "ssl" - did you forget to enable it when you configured PHP?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:38:57.723

在除 FGC 本地文件之外的所有情况下，最好在 FGC 上使用 curl。

如果未启用，则在 localhost 上启用 curl `extension=php_curl.dll`（99.9% 的活动主机启用了 curl。）

尝试这个：

```
<?php 
//Grab the twitter API with curl
$result = curl_get('http://search.twitter.com/search.json?q=%23trends');

//Decode the json result
//into an Object
$twitter = json_decode($result);
//into an Array
$twitter = json_decode($result,true);

//Debug
print_r($twitter);

function curl_get($url){
    $return = '';
    (function_exists('curl_init')) ? '' : die('cURL Must be installed!');

    $curl = curl_init();
    $header[0] = "Accept: text/xml,application/xml,application/json,application/xhtml+xml,";
    $header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
    $header[] = "Cache-Control: max-age=0";
    $header[] = "Connection: keep-alive";
    $header[] = "Keep-Alive: 300";
    $header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7";
    $header[] = "Accept-Language: en-us,en;q=0.5";

    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_USERAGENT, 'TwitterAPI.Grabber (http://example.com/yoursite)');
    curl_setopt($curl, CURLOPT_HTTPHEADER, $header);
    curl_setopt($curl, CURLOPT_HEADER, 0);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($curl, CURLOPT_TIMEOUT, 30);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($curl, CURLOPT_HTTPPROXYTUNNEL, true);
    curl_setopt($curl, CURLOPT_PROXY, 'http://proxy_address/');
    curl_setopt($curl, CURLOPT_PROXYUSERPWD, 'username:password');
    curl_setopt($curl, CURLOPT_PROXYPORT, 'portno');

    $result = curl_exec($curl);
    curl_close($curl);
    return $result;
}
?> 
```

# django - Django 1.4 LocaleMiddleware not working with Apache, but works with runserver

> ID：11484965
> 
> 赞同：1
> 
> 时间：2012-07-14T15:27:02.380
> 
> 标签：django, localization, django-middleware, url-pattern

My project has this middleware setting:

```
MIDDLEWARE_CLASSES = (
    'django.middleware.cache.UpdateCacheMiddleware',
    'django.middleware.locale.LocaleMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
    'django.middleware.cache.FetchFromCacheMiddleware',
) 
```

For local development, I setup a `local_settings.py` module which redefines the middleware setting as:

```
MIDDLEWARE_CLASSES = (
    'django.middleware.locale.LocaleMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
) 
```

Here I'm just removing the cache-related middleware, just for development.

In my Apache deploy, the `local_settings.py` only redefines `DEBUG` (to `False`) and the `DATABASES` dict.

I even installed IPython in the project's production virtualenv (the one that the Apache server uses) and executed this:

```
In [1]: from django.conf import settings

In [2]: settings.MIDDLEWARE_CLASSES
Out[2]: 
('django.middleware.cache.UpdateCacheMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
 'django.middleware.cache.FetchFromCacheMiddleware') 
```

But, despite all this, I still have to enter a language identifier in the URL (as `httpp://mysite.com/en/myview/`) to access any URL that uses `from django.conf.urls.i18n.i18n_patterns`. And one of the functions of `django.middleware.locale.LocaleMiddleware` is to do precisely that, when accessing a localized view without a language code prefix, guess it from the user-agent headers and redirect to the prefixed view.

How to debug what's going on?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T19:52:10.877

我想通了（愚蠢的问题......）查看代码，`django.middleware.locale.LocaleMiddleware`首先检查响应状态代码是否为`404`（未找到），然后使用前缀语言代码重试请求。但是，该代码永远不会被执行......只是因为我没有创建`404.html`模板，引发异常等等......

这也解释了为什么它在 时起作用`DEBUG = True`，因为在调试模式下`404.html`从不使用模板。

刚刚创建了相应的`404.html`模板，一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T23:04:12.990

我刚刚遇到了同样的问题，但是：我`handler_404`在我的 urlconf 中定义了一个，指向一个视图。这个视图返回了一个 HttpResponse，但`status_code = 200`不是 404。因此同样的问题。

# ruby - Return an object from Sinatra::run?

> ID：11484967
> 
> 赞同：1
> 
> 时间：2012-07-14T15:27:15.310
> 
> 标签：ruby, sinatra

I'm using Sinatra to handle authentication on a remote server and do a few other simple things. Basically the user authenticates through a page displayed on localhost. After a few exchanges between localhost and the remote server, an object is created that I want to use later. From the moment my object is constructed, no longer need the local Sinatra server.

My Sinatra app is in the form of a class that inherits `Sinatra::Base`.

What I'd like to do is something like:

```
# server runs until the user has reached a certain page
# and then returns my business object
object = MySinatraClass.run!

# do stuff with object 
```

Is this possible? If not, I could also settle for a solution where I pass a block or function to `MySinatraClass.run!` that I would execute at the right moment.

# asp.net-mvc - Entity framework together with membership in code first scenario

> ID：11484969
> 
> 赞同：2
> 
> 时间：2012-07-14T15:27:20.190
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first, membership-provider

I want to use the entity framework code-first approach for an asp.net mvc application together with the standard membership provider. The registered users will have posts etc which will link to the user via the userid in the users table. I want the posts and the other objects that point to a user be POCO classes (not inherit from any ef class). But the membership tables are not code-first, so what would be the best way to set this up?

Edit: I found [http://codefirstmembership.codeplex.com/](http://codefirstmembership.codeplex.com/). What I don't like though is that my own objects (blogposts etc) should also be included in the membership datacontext that they have built. I'd like to create another datacontext for my own objects to keep things neatly separate and maintainable, but there does not seem to be any option in EF to facilitate communication between different datacontexts.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T23:30:29.043

不幸的是，没有简单的解决方案。我会将 Membership 作为一个独立的数据库，并且不会尝试任何深度集成，例如为 Membership 对象生成 EF 实体。

作为一个简单的解决方案，我在我的 EF 模型中创建了一个 User 实体，它具有标准 ASP.NET User 的一些附加属性 - 例如 Address 等（您当然可以为此使用 Profiles，但这可能会带来很大的性能损失）。然后在 EF User 对象中有一个指向 ASP.NET 用户的外键。

然后计算由 ASP.NET Membership 跟踪的属性的属性（即 EF 用户对象向 ASP.NET Membership 提供程序查询属性，例如电子邮件以避免数据重复）。

请注意，这不是一个理想的解决方案，就像 Microsoft 更改了 ASP.NET Membership 架构一样，您的代码可能会中断，如此[处所述](http://blogs.teamb.com/craigstuntz/2010/03/05/38558/)

# ruby-on-rails - ActionView::MissingTemplate after long Ajax request

> ID：11484971
> 
> 赞同：0
> 
> 时间：2012-07-14T15:27:33.423
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

I've got some weird problem with one of my remote actions. I would like to parse CSV file uploaded through form. CSV file is parsing correctly and it takes about 20 sec (its ok, because CSV file is containing urls with download links). After successful parsing my view is not displaying. Funny thing is that view renders when csv file is not selected in form.

```
#Products Controller:
  def get_imported
     p=Product.new
     @tab = nil
     @tab = p.import_csv(params[:product][:csv_file],params[:product][:source]) unless params[:product][:csv_file].nil?
  end

#app/views/products/get_imported.js.coffee view:
    $('#results').html '<br/><div class="alert alert-info">
    <h4 class="alert-heading">Imported products:</h4>
    <% if @tab.blank? %>
        Error: No CSV file
    <% else %>
        <% for element in @tab %>
            <%= @tab.name %><br/>
        <% end %>
    <% end %>
    </div>' 
```

If I select csv file and submit my form following error displays:

```
 ActionView::MissingTemplate (Missing template products/get_imported, application/get_imported with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
      * "/home/chmarus/Pulpit/test/app/views"
      * "/home/chmarus/.rvm/gems/ruby-1.9.3-head/gems/twitter-bootstrap-rails-2.1.0/app/views"
      * "/home/chmarus/.rvm/gems/ruby-1.9.3-head/gems/devise-2.1.2/app/views"
      * "/home/chmarus/.rvm/gems/ruby-1.9.3-head/gems/ckeditor-3.7.1/app/views"
    ): 
```

I do not understand why rails cant find this template. In case with no file selected alert renders from same file correctly.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:29:07.517

发送 CSV 文件时，发出的请求是针对 MIME 类型的 HTML，而不是 JS（如错误消息中所示`:formats=>[:html]`）。这可能是因为直到最近还不能通过 AJAX 请求发送文件（它需要解决方法）。

如果您想通过 AJAX 请求提交 CSV 文件，请查看此处的建议[jQuery Ajax File Upload](https://stackoverflow.com/questions/2320069/jquery-ajax-file-upload)或 google 一下。

否则，请确保您处理 HTML MIME 类型。

# php - 我有义务在 php 中使用它吗？

> ID：11484973
> 
> 赞同：0
> 
> 时间：2012-07-14T15:28:01.330
> 
> 标签：php, oop, this

从成员函数访问类成员时，我有义务使用`$this`吗？或者我可以只提成员名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T15:30:45.010

使用`$this`区分对象成员和只是局部变量的变量。例如

```
object x {
   public $z = 'hello';
   function y() {
      $z = 'there';
      echo $z; // there
      echo $this->z; // hello
   }
   function z() {
       echo $z; // undefined variable/warning/error.
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T15:29:59.703

你必须`$this`。这是强制性的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T15:29:59.737

是的，您必须使用`$this`来引用类成员。您还可以使用`self::`来引用静态类成员。如果没有`$this`，您只能引用局部变量，即在当前函数中声明的变量，或使用声明的全局变量`global`

有关 PHP 类的更多信息，请参阅[PHP：类和对象](http://php.net/manual/en/language.oop5.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-14T15:34:53.867

在 PHP 类中，可以有静态成员变量或实例成员变量。

如果是实例成员变量，需要`$this->inst_variable` 用`self::$my_static`

如果您不使用 $this 或 self，它将被视为局部变量。

# iphone - storing feed stream items NSObject in disk or as JSON

> ID：11484974
> 
> 赞同：1
> 
> 时间：2012-07-14T15:28:05.967
> 
> 标签：iphone, objective-c, ios, json, ipad

So I am implementing a feeds/timeline kind of app. Where basically when you open up the app initially it is going to memory and then use that data to return immediately, while in the background it is fetching the newer data from the server. The issue is that as of now I am storing the response to disk as raw JSON file. Now when I get back the new data from the server as JSON, basically I need to append/merge this JSON with the old one before saving it back to disk. This is quite a pain as I don't know how to merge the two JSON? Is it possible, if yes how?

The JSON format is as follows:

```
{
    "data": {
        "last_updated": 1342277036, 
        "stream": [
            {
                "action": {

                    }
                }, 
                "to": [

                ], 
                "from": [

                ],  
                "timestamp": 1342276421
            }, 

 {
                "action": {

                    }
                }, 
                "to": [

                ], 
                "from": [

                ],  
                "timestamp": 1342276421
            }, 

 {
                "action": {

                    }
                }, 
                "to": [

                ], 
                "from": [

                ],  
                "timestamp": 1342276421
            }, 
```

If this is not a good way to do it. Then is is better to save the NSObject's to disk instead of the raw JSON file?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:34:18.243

您应该使用自己的 ObjC 对象对数据进行建模，而不是合并 JSON 对象。

查看您的 JSON 数据，您的流似乎包含“动作”、到/从和时间。

因此，您应该创建一个代表该数据的类。

然后，当您下载 JSON 时，您应该解析它并根据收到的数据创建操作对象。

然后，您可以使用诸如 Core Data 之类的框架来处理您的持久性。Core Data 是一个对象模型图，可以有数据库支持，你可以使用 Core Data 来查询数据库。

这将允许您执行诸如“获取自此时间戳以来的所有操作对象”和“将所有这些新对象保存到数据库”之类的操作。

查看[Core Data 编程指南](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/cdprogrammingguide.html)。

# android - android 项目中的 NoClassDefFoundError 与构建路径中的 Java 项目

> ID：11484978
> 
> 赞同：0
> 
> 时间：2012-07-14T15:28:46.913
> 
> 标签：android, project, external, noclassdeffounderror

我正在开发使用在 Eclipse 中打开的另一个 lib 项目的 Android 项目。我在构建路径中注意到了这个 lib 项目（不是 JAR 文件！）。一切都编译好，但我在执行阶段收到了 NoClassDefFoundError 。顺便说一句，前一段时间一切都很好。我认为这个问题经过一些更新。我必须做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T18:31:44.847

我认为问题出在编译器版本中。在 lib 项目上的编译器版本必须与基本 android 项目上的相同。当我改变这一切工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T10:07:19.997

右键单击您的项目>属性> Android：在弹出窗口的右侧，找到库部分，单击添加按钮添加您要引用的项目。

# vim - 如何退出“插入模式”以撤消在此模式下所做的更改？

> ID：11484979
> 
> 赞同：3
> 
> 时间：2012-07-14T15:28:47.450
> 
> 标签：vim, editor, vi

我是 Vim 编辑器的新手，所以我想做这个简单的任务比我实际做的更简单。

## 设想

当我犯了一个错误或者我只是在测试一些新命令时，`Insert mode`我希望我可以从这个中逃脱`Normal mode`而不影响文件。

## 我的解决方案

我离开了`Insert mode`返回`Normal mode`并按下`u`以撤消更改。

## 问题

有没有办法在`Insert mode`不影响文件的情况下离开？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T16:03:00.240

好吧，不确定vim是否默认有这个。但是 vim 是非常强大的编辑器，它支持键盘映射：您可以将一些动作序列“绑定”到一些击键/击键序列。

这就是你可以为你的任务做的事情。在正常模式下键入：`:inoremap <f2> <esc>u` 现在您可以按 F2 退出插入模式撤消更改。如果您喜欢此绑定并希望它在编辑会话之间保持不变，只需将相同的文本（不带冒号）放入您的`.vimrc`文件中：`inoremp <f2> <esc>u`

但是，这种绑定存在一个问题：如果您在插入模式下不做任何更改， F2 将不会充当 plain ，它也会撤消先前的更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T19:33:49.380

您可以使用`Ctrl`+`o`执行一个正常命令，然后返回插入模式。所以在这种情况下，您可以执行`Ctrl`+`o`然后`u`执行撤消并返回插入模式。看`:help i_CTRL-o`

# google-app-engine - 关于 Python Google Drive 示例应用程序 (DrEdit) 中 OAuth 流程的说明

> ID：11484982
> 
> 赞同：3
> 
> 时间：2012-07-14T15:29:04.050
> 
> 标签：google-app-engine, oauth-2.0, google-drive-api

如 DrEdit 示例应用程序中所示，我在掌握身份验证期间的重定向概念时遇到问题。在这里，redirect_url 是通过从请求 url 中剥离所有参数来设置的：

```
 def CreateOAuthFlow(self):
    """Create OAuth2.0 flow controller

    This controller can be used to perform all parts of the OAuth 2.0 dance
    including exchanging an Authorization code.

    Args:
      request: HTTP request to create OAuth2.0 flow for
    Returns:
      OAuth2.0 Flow instance suitable for performing OAuth2.0.
    """
    flow = flow_from_clientsecrets('client_secrets.json', scope='')
    # Dynamically set the redirect_uri based on the request URL. This is extremely
    # convenient for debugging to an alternative host without manually setting the
    # redirect URI.
    flow.redirect_uri = self.request.url.split('?', 1)[0].rsplit('/', 1)[0]
    return flow 
```

当从 Google Drive UI 调用应用程序时（使用 get 参数`code`和对应用程序根 url 的 get 请求`state`），应用程序检查它是否有权向 Google Drive 发出请求。如果访问权限被撤销，它会尝试使用以下代码重新授权自己，我相信：

```
creds = self.GetCodeCredentials()
    if not creds:
      return self.RedirectAuth() 
```

其中`RedirectAuth()`定义为：

```
 def RedirectAuth(self):
    """Redirect a handler to an authorization page.

    Used when a handler fails to fetch credentials suitable for making Drive API
    requests. The request is redirected to an OAuth 2.0 authorization approval
    page and on approval, are returned to application.

    Args:
      handler: webapp.RequestHandler to redirect.
    """
    flow = self.CreateOAuthFlow()

    # Manually add the required scopes. Since this redirect does not originate
    # from the Google Drive UI, which authomatically sets the scopes that are
    # listed in the API Console.
    flow.scope = ALL_SCOPES

    # Create the redirect URI by performing step 1 of the OAuth 2.0 web server
    # flow.
    uri = flow.step1_get_authorize_url(flow.redirect_uri)

    # Perform the redirect.
    self.redirect(uri) 
```

我的问题是，当我从 Google Dashboard 撤消对应用程序的访问权限并尝试通过 Google Drive UI 打开它时，它会将我重定向到授权页面，然后在我授权后重定向回应用程序，但它设法保留状态（获取从 Drive UI 传递的参数）。我认为这与代码描述的内容不一致，我想知道这种行为是否有任何解释。可以在此处找到 DrEdit 应用程序的托管版本：http: [//idning-gdrive-test.appspot.com/](http://idning-gdrive-test.appspot.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T17:05:26.967

在从 Drive UI 启动应用程序的情况下，永远不会触及该代码路径。重定向到授权端点是直接从云端硬盘启动的。换句话说，路径是：

驱动器-> 身份验证-> DrEdit

当它到达应用程序时，用户已经做出了决定。状态在状态查询参数中传递。

要查看您所引用的代码路径，请再次撤消访问权限。但不要从云端硬盘开始，只需尝试直接加载应用即可。您可能还需要删除应用程序的 cookie。无论如何，在这种情况下，当应用程序加载时，它会检测到用户未被授权并重定向到 auth 端点：

DrEdit -> 身份验证 -> DrEdit

希望有帮助。

# bash - bash - 当没有参数传递给脚本时，分配所有以 .suite 结尾的文件

> ID：11484985
> 
> 赞同：2
> 
> 时间：2012-07-14T15:29:33.937
> 
> 标签：bash

我有一个脚本，您可以将测试套件作为参数传递给：

```
$ bash-specs a.suite b.suite 
```

如果用户没有提供任何测试套件，则当前文件夹中的所有测试套件都将被执行。这就是我目前这样做的方式：

```
local suites

if (($# > 0)); then
  suites=$@
else
  suites=*.suite
fi 
```

这是一个不错的解决方案，但我觉得有一种更优雅的方式。如果没有给出参数，我基本上会寻找一些方法来进行条件赋值或设置默认值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T16:00:58.743

我会这样做：

```
if (( ! $# )); then
    set -- *.suite
fi 
```

现在，无论用户是指定它们还是让它们默认，您都有 $1、$2 等中的文件名。

一些注意事项：

您的分配`suites`似乎没有任何有用的结果；它不是一个数组，所以你要么得到一个带有空格分隔文件名的字符串，要么得到未扩展的 glob `"*.suites"`。我猜你`eval`稍后会以某种方式结束，但这是一个坏主意 - 文件名中的任何空格或时髦字符都会搞砸。我建议遍历参数并单独处理它们，或者使用实际的数组。

如果您使用类似于我上面的代码片段的内容，`"$@"`它将扩展到所有参数，并正确分隔，就像单独引用一样。如果您要处理参数，可以将原始参数保存在数组变量中，如下所示：

```
suites=( "$@" ) 
```

然后用`"${suites[@]}"`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T15:43:28.193

注意：在使用这个答案之前，请阅读评论以讨论它的缺点以及它是如何实际扩展的。

简短而甜蜜：

```
local suites=${@:-*.suite} 
```

（双关语是有意的）

您可以在“参数扩展”下的手册页中阅读有关`${var:-default}`语法的更多信息。`bash`整个部分非常值得一读。

编辑：正如 Mark 指出的那样，如果文件名中确实有空格，那么字符串值`suites`将不是很有用（您将失去分隔符空格和名称空间之间的区别）。我会同意他的回答。（此外，我已对其进行了编辑以删除引号，因为该模式不会在引号内扩展。）

（我距离删除这个答案只有一个编辑：）

# php - 在 Success 函数中检索多个值并将它们存储到 javascript 变量中

> ID：11484986
> 
> 赞同：1
> 
> 时间：2012-07-14T15:29:35.043
> 
> 标签：php, javascript, jquery, ajax

这是我想从 fetch.php 中获取值的索引文件。 `$('#loader').html($(response).fadeIn('slow'));`这允许获取所有值并将其显示在 div = loader 中。但我想将单个返回值存储到 javascript 值中。

```
 $.post("fetch.php?url="+$('#url').val(), {}, function(response){
    //var $res=$(response);
    //var title =$res.filter('.title').text();   (not wrking)
    //$('#title').val(title);
    $('#loader').html($(response).fadeIn('slow'));              
    $('.images img').hide();                                      
    $('#load').hide();
    $('img#1').fadeIn();
    $('#cur_image').val(1);
     });
}); 
   <input type="hidden" name="cur_image" id="cur_image" />
   <div id="loader">

  <div align="center" id="load" style="display:none"><img src="load.gif" /></div>

  </div>
 <input type="hidden" name="title" id="title" />

 (e.g. I want to store the title value from fetch.php to this hidden field)
**fetch.php**
                  <div class="info">

        <label class="title">
            <?php echo @$url_title[0]; ?>
        </label>
        <br clear="all" />
        <label class="url">
            <?php  echo substr($url ,0,35); ?>
        </label>
        <br clear="all" /><br clear="all" />
        <label class="desc">
            <?php  echo @$tags['description']; ?>
        </label>
        <br clear="all" /><br clear="all" />

        <label style="float:left"><img src="prev.png" id="prev" alt="" /><img src="next.png" id="next" alt="" /></label>

        <label class="totalimg">
            Total <?php echo $k?> images
        </label>
        <br clear="all" />

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:39:51.060

`json_encode`在 PHP 和`$.parseJSON`jQuery中使用，如下所示：

```
$.post("fetch.php?url="+$('#url').val(), {}, function(response) {
    var result = $.parseJSON(response);
    if (result.success) {
       var title = result.data.title;
       ...
    }
}); 
```

在您的 PHP 中，您只需输出如下内容：

```
json_encode(
  array(
    'success' => true,
    'data' => array(
               'title' => 'yourTitle',
               'description' => 'yourDescription'
              )
  )
 ); 
```

**另一个注意事项**

请不要使用@。如果您不确定索引是否存在，请使用正确的验证，例如：

```
<?php if (is_array($url_title) && isset($url_title[0])): ?>
    <label class="title"><?php echo $url_title[0]; ?></label>
<?php endif; ?> 
```

或者

```
<label class="title"><?=is_array($url_title) && isset($url_title[0]) ? $url_title[0] : ''?></label> 
```

**编辑：**

添加了额外的缩进并扩展了数据数组以使 OP 更清楚。

# ruby-on-rails - 活动记录 - 团体教育

> ID：11484987
> 
> 赞同：-3
> 
> 时间：2012-07-14T15:29:41.317
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有两个表格用户和朋友，

*用户*表如下所示：

```
[id, name, image, location, highschool_name, highschool_year, college_name, college_year, graduteschool_name, graduate_year ] 
```

*朋友*表如下所示：

```
[id, uid, name, image, higschool_name, college_name, graduateschool_name, user_id] 
```

我想按教育对用户朋友进行分组：

*   按 highschool_name 将用户朋友分组
*   按 College_name 将用户朋友分组
*   按graduateschool_name 将用户朋友分组

就像我制作的这个 Photoshop 样机：

![在此处输入图像描述](../Images/1d66a210460bf95020a7dbc124ea8336.png)

我是 Rails 3 的开发人员，想使用活动记录来做到这一点，欢迎任何提示或想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:58:40.307

您应该创建高中、大学和研究生院模型并使用与用户的关系。朋友数据应该在用户模型上。

所以你应该有

```
User
  has_many :friendships
  has_many :friends, :through => :friendships
  has_many :inverse_friendships, :class_name => "Friendship", :foreign_key => "friend_id"
  has_many :inverse_friends, :through => :inverse_friendships, :source => :user
  belongs_to :higschool
  belongs_to :college
  belongs_to :graduateschool

Friendship
  belongs_to :user
  belongs_to :friend, :class_name => "User"

Higschool
  has_many :users

College
  has_many :users

Graduateschool
  has_many :users 
```

所以，现在我认为你可以做类似的事情。

```
@higschool_friends = Hash[]
current_user.friends.group_by(&:higschool) do | higschool, friends |
  @higschool_friends[higschool] = friends
end

@college_friends = Hash[]
current_user.friends.group_by(&:college) do | college, friends |
  @college_friends[college] = friends
end

@graduateschool_friends = Hash[]
current_user.friends.group_by(&:graduateschool) do | graduateschool, friends |
  @graduateschool_friends[graduateschool] = friends
end 
```

# javascript - 在窗口调整大小时使用 Javascript 更改 div 宽度过于繁琐

> ID：11484990
> 
> 赞同：2
> 
> 时间：2012-07-14T15:29:53.073
> 
> 标签：javascript, html, css

对于大多数浏览器/计算机来说，使用 Javascript 调整窗口大小时调整 DIV 的大小是否过于繁重？我这样做是因为仅以百分比设置宽度仅适用于父元素。我似乎无法使其成为主体的百分比，而不考虑（在 DOM 树上）我想要调整大小的元素和主体之间的其他父元素。

```
function resize_columns() {
  var d = getWindowSize();
  var body_width = d.x;
  var fch_width = body_width * .15;
  var pnh_width = body_width * .25;
  $('.for_customer_div').css('width', fch_width + 'px');
  $('.for_customer_header').css('width', fch_width + 'px');
  $('.project_name_header, .project_name_div').css('width', pnh_width + 'px');
  $('.line_item_div').css('width', pnh_width + 'px');
}
$(document).ready(function() {
  resize_columns();
});
$(document).ready(function() {
  window.onresize = function(event) {
    resize_columns();
  }
});

function getWindowSize() {
  var w = window,
  d = document,
  e = d.documentElement,
  g = d.getElementsByTagName('body')[0],
  x = w.innerWidth || e.clientWidth || g.clientWidth,
  y = w.innerHeight || e.clientHeight || g.clientHeight;
  var dimensions = {
    x: x,
    y: y
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T15:41:01.963

尝试在您的代码中添加类似这样的内容：

```
function throttle (func, wait) {
    var throttling = false;
    return function(){
        if ( !throttling ){
            func.apply(this, arguments);
            throttling = true;
            setTimeout(function(){
                throttling = false;
            }, wait);            
        }
    };
} 
```

然后调用：

```
window.onresize = throttle(function() {
    resize_columns();
}, 20); 
```

这会将调用次数限制为`resize_columns`每 20 毫秒最多一次。

**解释：**

油门函数接受两个参数：要执行的函数和超时时间。然后它返回一个引用`throttling`变量的新函数，该变量充当标志。所以，就目前`onresize`而言，`throttle`它看起来就像它返回的内部函数。每次执行该函数时，它都会显示“`throttling`设置为`false`？”。如果是，它会继续执行您的功能。然后它设置`throttling`并`true`创建一个`setTimeout`将等待 x 毫秒数，然后再设置`throttling`回`false`. 如果它被执行并`throttling`设置为`true`，它什么也不做。

所以基本效果是，你的函数最多只能在给定的时间窗口内执行一次。所以你只是限速。

我知道这可能不是一个很好的解释，但我认为对闭包的全面概述会比我今天早上愿意咀嚼的要多一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T15:37:01.463

您可以使用以下方式限制调整大小的最大速率：

```
$(window).resize(function(minTime) {
  var lastResize = 0;
  return function(event) {
    var now = new Date().getTime();
    if (now - lastResize > minTime) {
      lastResize = now;
      resize_columns();
    }
  };
}( 250 )); // 250 millisecond minimum interval between resize changes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T15:39:30.463

当我遇到这样的问题时，我已经制作了应该是身体的身体大小百分比的元素，并将它们绝对定位在我希望它们所在的父元素内。诚然，它需要更多的工作才能将所有部分放在正确的位置，但可能不如积极调整大小那么多。

# c++ - C++ 自定义分配器和 STL 容器

> ID：11484992
> 
> 赞同：1
> 
> 时间：2012-07-14T15:29:55.920
> 
> 标签：c++, allocator

我一直在尝试将自定义 SecureAllocator 与 basic_string 和 STL 容器一起使用，但我运气不佳。

```
typedef std::basic_string< char, std::char_traits< char >, SecureAllocator< char > > SecureString;

SecureString value = "hello, world!";

vector< SecureString > collection;

collection.push_back( value );

In file included from /Users/bcrowhurst/source/utility/string_impl.cpp:31:
In file included from /Users/bcrowhurst/build/../source/utility/string_impl.h:31:
/usr/bin/../lib/c++/v1/string:2162:19: error: invalid operands to binary expression ('allocator_type' (aka 'SecureAllocator<char>') and 'allocator_type')
        if (__alloc() != __str.__alloc())
            ~~~~~~~~~ ^  ~~~~~~~~~~~~~~~ 
```

**环境**

Mac OSX 狮子

Apple clang 版本 3.1 (tags/Apple/clang-318.0.61) (基于 LLVM 3.1svn)

目标：x86_64-apple-darwin11.4.0

线程模型：posix

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T15:41:36.203

您必须为您的分配器类型实现比较运算符，告诉它们是否“等效”，以便它们可以互换使用（或不使用）。

比较两个分配器的要求`a1 == a2`是

> 仅当从每个分配的存储可以通过另一个释放时才返回 true。 `operator==`应该是自反的、对称的和传递的，并且不会通过异常退出。

并且对于`a1 != a2`

> 一样`!(a1 == a2)`

# vb.net - VB.net SpeechSynthesizer 通知

> ID：11484997
> 
> 赞同：1
> 
> 时间：2012-07-14T15:30:10.340
> 
> 标签：vb.net, vb.net-2010, speech-synthesis

我在 VB.net 中使用 SpeechSynthesizer()

如何检测说话者何时说出所有数据？

我有这个代码：

```
 repetitionCounter = 0
        Do
            speaker.SpeakAsync(textIntroduction.Text)
            repetitionCounter += 1
            If repetitionCounter = repeatXNumberOfTimes Then
                MsgBox("Done")
                Exit Do
            End If
        Loop 
```

但是，只要 Do 开始，MsgBox 就会立即出现。我认为这是因为它将 .SpeakAsync 命令加载到内存中，因此，repeatXNumberOfTimes 立即完成。

我可以将代码更改为：

```
 speaker.Speak(textIntroduction.Text) 
```

这现在有效。但是，表单“锁定”，然后我无法与表单交互。我已经尝试实现 Application.DoEvents()，但表单仍然“锁定”。

当演讲者完成演讲而不锁定表格时，如何获得通知？

另外，如果我希望扬声器无限次播放某些文本，我应该如何实现呢？

**更新*

这是我的代码：

```
 Dim speaker As New SpeechSynthesizer()
     Public Event SpeakCompleted As EventHandler(Of SpeakCompletedEventArgs)
     Dim handler As EventHandler(Of SpeakCompletedEventArgs) 
```

在 Form_Load() 中，我添加了以下代码：

```
 AddHandler speaker.SpeakCompleted, handler 
```

那应该怎么做？当 SpeakCompleted 事件被触发时，我在哪里编写要执行的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:17:41.090

您需要查看[SpeakCompleted](http://msdn.microsoft.com/en-us/library/system.speech.synthesis.speechsynthesizer.speakcompleted.aspx)事件：

来自链接：

> SpeechSynthesizer 在任何 SpeakAsync() 或 SpeakSsmlAsync(String) 方法完成时引发 SpeakCompleted 事件。您可以使用 SpeakCompletedEventArgs 为 SpeakCompleted 事件编写处理程序。

* * *

您不需要创建事件，这些事件已经是 SpeachSynthesizer 的一部分。只需创建一个匹配事件签名的子例程并将其添加到事件中，就像这个简单的命令行示例一样。

```
Imports System.Speech.Synthesis

Module Module1
    Dim speaker As New SpeechSynthesizer()
    Sub Main()

        AddHandler speaker.SpeakCompleted, AddressOf SpeachComplete
        speaker.SpeakAsync("This is a test speach to see if the speach complete event raises")

        Console.ReadLine()
    End Sub

    Private Sub SpeachComplete(sender As Object, e As SpeakCompletedEventArgs)
        MsgBox("Speach Done")
    End Sub

End Module 
```

# objective-c - selectedSegmentIndex 总是返回 0

> ID：11484999
> 
> 赞同：0
> 
> 时间：2012-07-14T15:30:43.747
> 
> 标签：objective-c

我正在构建一个石头剪刀布游戏，并且我正在尝试实现一个永远不会出现平局的系统。我现在的系统是

```
if (userSelection == 0)
    computerPick =[self computerGenerateResponce];
    if (computerPick == 0)
        while (computerPick == 0)
            computerPick = [self computerGenerateResponce]; 
```

有没有更好的方法来实施这个系统？这可行，但似乎有点笨拙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:36:36.130

至少，您可以消除 if(computerPick == 0) 级别，因为这是 while(computerPick == 0) 所做的第一件事。这根本不会影响您的算法。然后，您可以将调用合并到条件检查中，此外，您可以使用隐式布尔转换：

```
if (!userSelection)
    while(! (computerPick = [self computerGenerateResponce])) 
```

这实际上只是继续为 computerPick 分配一个新的选择，直到它不为零。