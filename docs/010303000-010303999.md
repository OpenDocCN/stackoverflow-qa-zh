# StackOverflow 问答 10303000-10303999

# iphone - MFMailComposeViewController 的发送和取消按钮没有出现

> ID：10303000
> 
> 赞同：4
> 
> 时间：2012-04-24T17:32:12.547
> 
> 标签：iphone, mfmailcomposeviewcontroller

由于某种原因，发送和取消按钮没有出现，我什至在应用程序启动时将以下代码粘贴在应用程序的开头，但仍然无法正常工作。有人可以帮忙吗，谢谢

```
mailController = [[MFMailComposeViewController alloc] init];
        mailController.mailComposeDelegate = self;
        [mailController setToRecipients:[strToEmailAddresses componentsSeparatedByString:@","]];
        [mailController setSubject:@"An Invite from MyGuide"];
        [mailController setMessageBody:@"Join me and your other friends now for free." isHTML:NO];

        if(mailController == nil)
            NSLog(@"Nil");
        else
            [self presentModalViewController:mailController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-13T19:29:42.207

我自己偶然发现了这个问题，对我来说，答案是按钮有一个白色的色调（因为我的应用程序有白色作为 tintColor）这使得它们在导航栏背景下不可见！所以他们实际上在那里，但颜色使他们看不见。如果这也是您的问题，您需要在将 MailComposer 推入堆栈时临时将导航栏的 tintColor 设置为其他值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-12-29T08:58:58.233

确保 navgationBarHieedn 为 NO，这是 MFMailComposeViewController 的 navigationController 的属性。

我在“UINavigationController”类别中遇到了这个问题，它在推送新的viewController时将navigationBarHidden设置为YES。编辑这些代码后，出现了取消按钮；

# github - 在自制公式中，有没有办法指定源存储库的 github 版本（例如，使用 sha）？

> ID：10303001
> 
> 赞同：6
> 
> 时间：2012-04-24T17:32:13.083
> 
> 标签：github, homebrew

我正在尝试对 github 公式进行最后的润色。我已经能够从 github 中提取一个 zip 文件，但是（出于某种未知原因）其中包含错误版本的文件。我正在尝试提取存储库的特定版本，因为（如果我理解正确的话）这是构建公式的惯用方式。因此，显然不赞成拉标签（这也可以，因为可以使用`HEAD`and拉出少数相关的标签版本`-devel`）。

`HEAD`有没有办法使用 homebrew 提取存储库的特定版本（除了和标记） `GitDownloadStrategy`？

作为参考，这是我对当前公式的了解：

```
class Geocouch < Formula
  homepage 'https://github.com/couchbase/geocouch'
  head 'https://github.com/couchbase/geocouch.git', :using => :git, :tag => '1.2.x'
  url 'https://github.com/couchbase/geocouch/zipball/couchdb1.2.zip'
  md5 '2e72424d67e369f2c649ed4ed01cdbc2'

  devel do
    head 'https://github.com/couchbase/geocouch.git', :using => :git, :tag => 'master'
    version '1.3.x'
  end
[...] 
```

由于该`url`行抓取了一个不受欢迎的版本，我试图用类似的`url`东西替换该行`:using => :git, :sha => 'eeeb0f2e8d0a77'`，但该`:sha`功能似乎不起作用......尽管这正是我需要的（我相信）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T22:17:22.407

你应该可以用它`:revision => 'eeeb0f2e8d0a77'`来实现这一点。

# iphone - iPhone subView 动画：向下滑动

> ID：10303006
> 
> 赞同：0
> 
> 时间：2012-04-24T17:32:36.150
> 
> 标签：iphone, animation, subview

我一直在寻找一段时间，但我想要的基本上是“presentModalViewController”动画，但另一种方式......我希望屏幕顶部下降到底部以显示页面。有谁知道这叫什么？

这是我到目前为止的代码，但它发生得太快了......我该如何减慢它的速度？

```
-(void)gotToCreateGameViewController{
CreateNewGameViewController *newGame = [[CreateNewGameViewController alloc]initWithNibName:@"CreateNewGameViewController" bundle:nil];
self.createNewGameViewController = newGame;
createNewGameViewController.modalTransitionStyle = UIModalTransitionStyleCoverVertical; 
[self presentModalViewController:newGame animated:YES];
[self.view insertSubview:newGame.view atIndex:0];

[newGame release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:38:35.307

我认为您正在寻找： UIModalTransitionStyleCoverVertical

```
Presentation Transition Styles
Transition styles available when presenting view controllers.

typedef enum {
        UIModalTransitionStyleCoverVertical = 0,
        UIModalTransitionStyleFlipHorizontal,
        UIModalTransitionStyleCrossDissolve,
        UIModalTransitionStylePartialCurl,
} UIModalTransitionStyle; 
```

它从下到上呈现，然后在关闭时从上到下。要从上到下转换，您需要自己滚动，或者从下面的目标 vc 开始，并以模态方式显示起始 vc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:18:34.040

试试这个代码

```
 -(void)gotToCreateGameViewController{
        CreateNewGameViewController *newGame = [[CreateNewGameViewController alloc]initWithNibName:@"CreateNewGameViewController" bundle:nil];
        self.createNewGameViewController = newGame;

        CATransition *transition = [CATransition animation];
        transition.duration = 0.05;
        transition.timingFunction = [CAMediaTimingFunction      
        functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
        transition.type =kCATransitionMoveIn;
        CATransition *transition = [CATransition animation];
        transition.duration = 0.05;
        transition.timingFunction = [CAMediaTimingFunction      
        functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
        transition.type =kCATransitionMoveIn;
        transition.subtype =kCATransitionFromTop;

        transition.delegate   = self;

        transition.subtype =kCATransitionFromTop;

        transition.delegate = self;

        [self presentModalViewController:newGame animated:NO];
        [self.view insertSubview:newGame.view atIndex:0];

        [self.view.layer addAnimation:transition forKey:nil]; 

        [newGame release]; 
```

请注意，UIModalTransitionStyle 仅适用于 iPad 应用程序。请参阅文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:50:13.150

我的骇人听闻的回答：

如果您将初始视图向下移动到 y = 960（您可能必须添加另一个视图，然后将所有内容剪切并粘贴到该视图中），并将您的第二个视图放置在 y = 0，您可以实现以下代码。实例化一个 BOOL 后（我叫 mine `movedUp`）：

```
-(void)moveView:(float)d{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:d];  

    CGRect rect = self.view.frame;
    if (!movedUp)
    {
        rect.origin.y -= 960;
        rect.size.height += 960;
    }
    else
    {
        // revert back to the normal state.
        rect.origin.y += 960;
        rect.size.height -= 960;
    }
    self.view.frame = rect;

    [UIView commitAnimations];
    movedUp = !movedUp;
}
- (void)viewDidAppear:(BOOL)animated
{
    [self moveView:0.0];
    [super viewDidAppear:animated];
} 
```

然后我将两个按钮（每个视图中一个）连接到以下：

```
-(IBAction)setViewMovedUp:(id)sender
{
    [self moveView:0.5];
} 
```

# java - java.beans.PropertyDescriptor(String, Class) 的令人困惑的行为

> ID：10303009
> 
> 赞同：6
> 
> 时间：2012-04-24T17:32:41.843
> 
> 标签：java, javabeans

我正在尝试为我拥有的 bean 类创建一个 PropertyDescriptor。我打电话

```
new PropertyDescriptor(myProperty, myClass) 
```

并且看到方法“isMyProperty”不存在的异常。稍微看一下代码——

```
/**
 * Constructs a PropertyDescriptor for a property that follows
 * the standard Java convention by having getFoo and setFoo
 * accessor methods.  Thus if the argument name is "fred", it will
 * assume that the writer method is "setFred" and the reader method
 * is "getFred" (or "isFred" for a boolean property).  Note that the
 * property name should start with a lower case character, which will
 * be capitalized in the method names.
 *
 * @param propertyName The programmatic name of the property.
 * @param beanClass The Class object for the target bean.  For
 *      example sun.beans.OurButton.class.
 * @exception IntrospectionException if an exception occurs during
 *              introspection.
 */
public PropertyDescriptor(String propertyName, Class<?> beanClass)
    throws IntrospectionException {
this(propertyName, beanClass, 
     "is" + capitalize(propertyName), 
     "set" + capitalize(propertyName));
} 
```

文档说它会寻找“getFred”，但它总是使用`"is" + capitalize(property)`！这是在 java 版本“1.6.0_31”中

想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T19:25:13.960

**编辑：**我想我知道你的问题是什么。如果您的类中不存在该属性，那么您将收到“isProperty”方法错误。看我的例子：

```
 {
        PropertyDescriptor desc = new PropertyDescriptor("uuid", Company.class);
        Method m = desc.getReadMethod();
        System.out.println(m.getName()); /* prints getUuid */
    }
    {
        PropertyDescriptor desc = new PropertyDescriptor("uuid11", Company.class);
        Method m = desc.getReadMethod();
        System.out.println(m.getName()); /* throws Method not found: isUuid11 */
    } 
```

* * *

**原来的：**

看起来它只是默认使用 isProperty 作为读取方法，如果它不存在，则使用 getProperty。看一下`getReadMethod`方法，它的位置：

```
if (readMethod == null) {
    readMethodName = "get" + getBaseName(); 
```

所以它先尝试isProperty方法，如果没有那个方法，就找getProperty。

这是完整的方法：

```
public synchronized Method getReadMethod() {
Method readMethod = getReadMethod0();
if (readMethod == null) {
    Class cls = getClass0();
    if (cls == null || (readMethodName == null && readMethodRef == null)) {
        // The read method was explicitly set to null.
        return null;
    }
    if (readMethodName == null) {
        Class type = getPropertyType0();
        if (type == boolean.class || type == null) {
            readMethodName = "is" + getBaseName();
        } else {
            readMethodName = "get" + getBaseName();
        }
    }

    // Since there can be multiple write methods but only one getter
    // method, find the getter method first so that you know what the
    // property type is.  For booleans, there can be "is" and "get"
    // methods.  If an "is" method exists, this is the official
    // reader method so look for this one first.
    readMethod = Introspector.findMethod(cls, readMethodName, 0);
    if (readMethod == null) {
        readMethodName = "get" + getBaseName();
        readMethod = Introspector.findMethod(cls, readMethodName, 0);
    }
    try {
        setReadMethod(readMethod);
    } catch (IntrospectionException ex) {
    // fall
    }
}
return readMethod;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T15:51:10.617

如果您的属性是原始布尔值，则 PropertyDescriptor 寻找“isProperty”方法。如果您的属性是装箱的布尔值，那么 PropertyDescriptor 会寻找“getProperty”方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-13T19:49:40.827

我有一个类似的问题，我是这样解决的。

```
static Object get(final String name, final Object obj)
    throws ReflectiveOperationException {

    final Class<?> klass = obj.getClass();

    try {
        final BeanInfo info = Introspector.getBeanInfo(klass);
        for (final PropertyDescriptor descriptor
             : info.getPropertyDescriptors()) {
            if (name.equals(descriptor.getName())) {
                final Method reader = descriptor.getReadMethod();
                if (reader != null) {
                    if (!reader.isAccessible()) {
                        reader.setAccessible(true);
                    }
                    return reader.invoke(obj);
                }
                break; // anyway
            }
        }
    } catch (final IntrospectionException ie) {
        ie.printStackTrace(System.err);
    }

    final Field field = findField(obj.getClass(), name);
    logger.log(Level.WARNING, "trying to get value directly from {0}",
               new Object[]{field});
    if (!field.isAccessible()) {
        field.setAccessible(true);
    }
    return field.get(obj);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-11T06:08:03.980

我在名为“ip_value”的字段中遇到了类似的问题。我最初的 getter 和 setter 方法分别是`getIPValue()`和`setIPValue()`。将它们分别重命名后`getIp_value()`，`setIp_value()`问题得到解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-17T10:42:33.407

得到相同的“没有这样的方法 isMyProperty”异常并阅读了以上所有内容后，我重新检查了明显的......我的错。

仔细检查您是否确实拥有正确的 getX 和 setX。具体检查函数签名。

我没有。当这种情况发生时你不讨厌它；） PICNIC

# objective-c - 将带有 URL 参数的 HTML 文件加载到 Cocoa（不是 iPhone）WebView 中

> ID：10303010
> 
> 赞同：1
> 
> 时间：2012-04-24T17:32:43.500
> 
> 标签：objective-c, macos, cocoa, url, webview

我正在使用以下内容将 HTML 文件加载到我的 Mac OSX 应用程序中的 WebView 中：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"foo" ofType:@"html"];
NSURL *fileURL = [NSURL fileURLWithPath:filePath];
NSURLRequest *request = [NSURLRequest requestWithURL:fileURL];
[[WebView mainFrame] loadRequest:request]; 
```

这很好用......但我需要做的是读取同一个文件，并附加一些 URL 参数（比如`foo.html?var=bar`），然后一些 JavaScript 将使用这些参数进行输出。我尝试`URLByAppendingPathExtension:`在 fileURL 上使用，但没有骰子...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T23:06:46.287

问题是使用该`fileURLWithPath:`方法创建的 URL 不支持查询字符串，因为通常查询字符串对于引用磁盘上文件的 URL 没有意义。

`http://`如果您想将 URL 参数传递给网页中的代码，我强烈建议您运行本地 Web 服务器并使用方案 URL。在我看来，依赖 URL上的`WebView`支持查询字符串是脆弱的。`file://`

也就是说，您可以使用这样的`URLWithString:`方法构造 URL，它会起作用：

```
NSURL* fileURL = [NSURL URLWithString:@"file://localhost/Users/you/Desktop/foo.html?bar=foobar"]; 
```

在您的情况下，您可能会执行以下操作：

```
NSString* filePath = [[NSBundle mainBundle] pathForResource:@"foo" ofType:@"html"];
NSString* URLString = [NSString stringWithFormat:@"file://localhost%@?var=%@", filePath, @"bar"];
NSURL* fileURL = [NSURL URLWithString:URLString]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:26:24.907

```
NSString *filePath = ...
filePath = [filePath stringByAppendingFormat:@"?var=%@", @"bar"];
NSURL *fileURL = [NSURL fileURLWithPath:filePath];
... 
```

# java - 如何基于多个比较器实现 add() 到排序列表；参数化比较器？

> ID：10303012
> 
> 赞同：0
> 
> 时间：2012-04-24T17:32:49.883
> 
> 标签：java, insert, comparator

我需要实现以下功能。我愿意使用最好的类，但我不确定我应该使用 SortedSet 还是 TreeSet（如 Set myEmailsAscending = new TreeSet(new DateAscendingComparator()); // 电子邮件始终按升序排列）。

```
public void addEmail(Email email)//The prototype isn't to be altered.
{
Comparator comp;
if(getCurrentSortingMethod()=="DateDescending") comp=DateDescendingComparator;
else if(getCurrentSortingMethod()=="DateAscending") comp=DateAscendingComparator;
...//other comparators

int index = Collections.binarySearch(getEmails(), email, new comp());// Search where to insert according to the current sorting method.
getEmails().add(-index-1, email);}// Add the item to the list
} 
```

这是选择比较器的正确语法吗？我想避免创建多个 Comparator 类，那么有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:40:01.033

有几个问题：

您应该`equals()`用于字符串比较而不是`==`.

的用法`new`是错误的。我建议如下：

```
Comparator comp;
if (getCurrentSortingMethod().equals("DateDescending")) {
   comp = new DateDescendingComparator();
} else if (getCurrentSortingMethod().equals("DateAscending")) {
   comp = new DateAscendingComparator();
} ...

int index = Collections.binarySearch(getEmails(), email, comp); 
```

请注意 是如何在块`new`内移动的。`if`

作为所有这些的替代方法，您可以将 a[`SortedSet<Email>`](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)与适当的比较器一起使用。该集合将自动按正确的顺序排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:47:31.260

在您的类构造函数中接受一个比较器和/或为它提供一个设置器。然后只需在您的`addEmail(Email email)`. 如果没有设置比较器，则使用自然排序。

看看[TreeSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)以及它如何处理比较器和自然排序。尝试将其调整为您自己的列表实现。

# amazon-s3 - Amazon S3 和 RRS 数据中心复制数量？

> ID：10303018
> 
> 赞同：0
> 
> 时间：2012-04-24T17:33:12.387
> 
> 标签：amazon-s3, amazon-web-services

根据他们的网站，对于 S3：

> Amazon S3 标准存储旨在提供 99.999999999% 的持久性并**维持两个设施中的数据并发丢失**，

对于 RRS：

> 而 RRS 旨在提供 99.99% 的持久性并**在单个设施中承受数据丢失**。

这是否实际上意味着 S3 在至少 3 个数据中心中复制，而 RRS 在至少 2 个数据中心中复制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:38:36.980

根据[我假设您引用的同一页面](http://aws.amazon.com/about-aws/whats-new/2010/05/19/announcing-amazon-s3-reduced-redundancy-storage/)：

> Amazon S3 的标准和减少冗余选项都将数据存储在多个设施和多个设备上，但使用 RRS，数据复制的次数更少，因此成本更低。

他们暗示数据要么复制两次，要么复制两次以上，具体取决于服务，没有进一步的技术细节。

这里稍微详细一点：[保护您的数据](http://aws.amazon.com/s3/#protecting)

# objective-c - Kobold / Cocos2D - 应用程序在最小化后重新打开后变得无响应

> ID：10303020
> 
> 赞同：0
> 
> 时间：2012-04-24T17:33:14.953
> 
> 标签：objective-c, ios, cocos2d-iphone, freeze, kobold2d

目前，我正在开发的 Kobold2D / Cocos2D 游戏有一个奇怪的问题。不幸的是，除了在我的 iPad 以及我测试过的其他 iPad 上最小化游戏之后，真的没什么可说的，然后通过屏幕底部的进程托盘再次打开进程，游戏没有反应。也就是说，我不能点击按钮或类似的东西，应用程序只是挂起。我也没有通过调试器收到任何崩溃报告，所以看起来这可能是应用程序委托的问题？

我已经尝试检查其中潜在的缺失方法，但无法从早期项目中找到任何可以正常工作的方法。

我想知道是否有人可以指出我应该在哪里寻找问题的任何方向？

感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:25:40.693

我弄清楚了问题所在：) 如果我在 AppDelegate 中使用 applicationDidBecomeActive: 方法，该错误出现的原因很奇怪，它只是让应用程序无法正常恢复自身。我不确定根本原因是什么

# php - Mandrill 给出无效的应用程序密钥错误

> ID：10303021
> 
> 赞同：5
> 
> 时间：2012-04-24T17:33:19.023
> 
> 标签：php, codeigniter, email, mailchimp

我只是想将 mandrill 邮件发送与我的应用程序集成在下面是我在 php 中的代码

```
$args = array(
    'key' => '73357ad2-e59e-4669---------',
    'message' => array(
        "html" => "<p>\r\n\tHi Adam,</p>\r\n<p>\r\n\tThanks for <a href=\"http://mandrill.com\">registering</a>.</p>\r\n<p>etc etc</p>",
        "text" => null,
        "from_email" => "xxx@xxx.com",
        "from_name" => "SIVOnline",
        "subject" => "Your recent registration",
        "to" => array(array("email" => "xxx@xxx.com")),
        "track_opens" => true,
        "track_clicks" => true,
        "auto_text" => true
    )   
);
// Open a curl session for making the call

$curl = curl_init('https://mandrillapp.com/api/1.0/messages/send.json' );
// Tell curl to use HTTP POST
curl_setopt($curl, CURLOPT_POST, true);

curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
// Tell curl not to return headers, but do return the response
curl_setopt($curl, CURLOPT_HEADER, false);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);

curl_setopt($curl, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));
// Set the POST arguments to pass on
curl_setopt($curl, CURLOPT_POSTFIELDS, json_encode($args));

// Make the REST call, returning the result
$response = curl_exec($curl);

 // Close the connection
    curl_close( $curl ); 
```

并且在重新生成密钥后它给了我无效的 api 密钥我仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T01:53:40.747

如果您使用的是位于此处[https://packagist.org/packages/mandrill/mandrill](https://packagist.org/packages/mandrill/mandrill)的 Mandrill 官方 API ？

你会这样做

```
require_once(Mandrill.php);

$apikey = "YOUR-API-KEY";

$Mandrill = new Mandrill($apikey);

$params = array(
        "html" => "<p>\r\n\tHi Adam,</p>\r\n<p>\r\n\tThanks for <a href=\"http://mandrill.com\">registering</a>.</p>\r\n<p>etc etc</p>",
        "text" => null,
        "from_email" => "xxx@xxx.com",
        "from_name" => "chris french",
        "subject" => "Your recent registration",
        "to" => array(array("email" => "xxx@xxxx.com")),
        "track_opens" => true,
        "track_clicks" => true,
        "auto_text" => true
);

$Mandrill->messages->send($params, true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T20:10:08.517

`$args`将变量传递给 CURLOPT_POSTFIELDS setopt 调用时，不要对变量进行 JSON 编码。

顺便说一句，您应该先尝试拨打用户/ping 电话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T13:52:21.817

提示：你可以获得一个用于 PHP 的功能齐全的 Mandrill API 包装类

...它包含在 WordPress 插件包中：[wpMandrill](http://wordpress.org/extend/plugins/wpmandrill/)

# codeigniter - Codeigniter 扩展 CI_controller 适用于 localhost 但不适用于服务器

> ID：10303022
> 
> 赞同：0
> 
> 时间：2012-04-24T17:33:19.440
> 
> 标签：codeigniter, codeigniter-2

当我调用扩展 MY_Base 的控制器时，我创建了一个扩展 CI_Controller 的 MY_Base 控制器类，在我的本地主机上一切正常（使用 MAMP）但是在我的服务器上我得到了

> 致命错误：在第 3 行的 /../application/controllers/organization.php 中找不到类 'MY_Base'

我猜这是服务器路由呼叫的方式，但不确定从哪里开始寻找。

我应该从哪里开始寻找任何想法？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T17:52:19.023

当事情在 OS X 上运行并停止在 Linux 上运行时，我会首先检查大小写问题。您是否将文件命名为`My_Base.php`- 其他 UN*X 文件系统区分大小写。

# regex - 在 Vim 的新选项卡中显示所有匹配的 grep 结果

> ID：10303025
> 
> 赞同：3
> 
> 时间：2012-04-24T17:33:36.213
> 
> 标签：regex, vim, grep, vi, ctags

我正在尝试映射一个热键以在 Vim 中执行以下操作：

1.  匹配光标当前标记的当前 c-word
2.  生成当前项目中所有找到的事件的列表
3.  打开一个显示结果的新选项卡

因此，我有一个使用 CTAGS 的示例在新选项卡中打开变量/函数的声明，如下所示：

```
map <C-\> :split<CR>:exec("tag ".expand("<cword>"))<CR> 
```

当它点击`CTRL`-`\`时，将打开一个新选项卡，其中包含光标所在的变量/函数的声明。

我试图映射的命令如下所示：

```
:lvim /\<\(text_i_want_to_find\)\>/gj *.c
:lw 
```

当我运行此命令时，会打开一个新选项卡，其中显示包含 text 的所有`.c`文件的列表`text_i_want_to_find`。我需要修改它以做与现在不同的两件事：

1.  搜索所有扩展名为`.c`, `.h`, `.cpp`, `.mk`, 而不是 , 的`.c`文件，并搜索名为“Makefile”的文件
2.  像上面显示的那样搜索光标下的 c-word `CTRL`，`\`而不是手动输入文本`text_i_want_to_find`

这是我`.vimrc`的映射文件中的代码。我不完全确定`CTRL`-是否`/`可以被映射，所以还有一个问题需要我解决。

```
map <C-/> :split<CR>:lvim /\<\(.expand("<cword>")\)\>/gj *.c *.h *.cpp *.mk Makefile 
```

有没有人有关于修复这个 Vim 映射的任何提示？

* * *

编辑：

查看提供给我的答案后，这是我的代码的最终版本：

```
command! -nargs=1 SearchAll execute " grep -srnw --binary-files=without-match --exclude={*~,tags} --exclude-dir=.svn  . -e " . expand("<args>") . " " <bar> cwindow
map <C-g> :SearchAll <cword><CR> 
```

我将它映射到`CTRL`+ `g`。我也可以像冒号命令一样调用它：

```
:SearchAll my_text_to_search_for 
```

希望这对其他人也有帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T19:00:45.203

当然，它不起作用：您忘记了`:execute`，`:lvimgrep`命令本身不接受表达式，因此您要搜索的`expand("<cword>")`是后面没有关键字字符 ( `\>`) 并且前面有任何不跟在关键字字符 ( ) 后面的字符`\<.`。`\(`在这里`\)`没用。其他注意事项：

1.  不要使用`map`：您既不需要此映射在可视和操作员挂起模式下工作，也不需要使用其他映射的能力。
2.  一些模式可以合并：`*.[ch] *.cpp *.mk Makefile`甚至`*.{[ch],cpp,mk} Makefile`.
3.  `<C-\>`可以映射，但不能映射`<C-/>`（我希望只是目前，但没有完成修复它的实际工作）：`\`是 0x5C 并且`<C-\>`是 0x5C-0x40=0x1C。但是`/`0x2F 和 0x2F-0x40<0。在我的系统上按下终端会`<C-/>`变成.`<C-_>``<C-->`
4.  `:split`命令不会打开新选项卡，而是打开一个新窗口。预先设置它`:tab`以执行此操作。
5.  `:lvimgrep`不会向您展示结果。`j`除非您删除标志，否则它不会跳转到第一个结果。
6.  你忘记了 final`<CR>`以及`:lw<CR>`. 我`:lopen`在下面使用，在这种情况下，它们会产生相同的结果。
7.  您忘记了`<C-u>`after first`:`或`<C-\><C-n>`before：需要丢弃计数。
8.  您实际上并不需要`:execute`任何一个映射，因为存在`<C-r>=expand("cword")<CR>`或默认快捷方式`<C-r><C-w>`。
9.  不要写`:exec(str)`：它是令人困惑的，因为`:execute`它不是一个函数，而且这种语法鼓励其他人认为它是。使用`:execute str`.

因此最终的映射是：

```
nnoremap <C-\> :<C-u>tab split \| lvimgrep /\V\<<C-r><C-w>\>/gj *.{[ch],cpp,mk} Makefile \| lopen<CR> 
```

. 将其替换为

```
nnoremap <C-\> :<C-u>lvimgrep /\V\<<C-r><C-w>\>/gj *.{[ch],cpp,mk} Makefile \| tab lopen<CR> 
```

如果您不想在新打开的选项卡中看到当前文件。

如果您确实替换为 ，则这两个映射都假定您既没有`/`也没有选项。`\``'iskeyword'``<C-r><C-w>``<C-r>=escape(expand('<cword>'), '/\')<CR>`

# php - PHP xpath 结果为字符串数组

> ID：10303030
> 
> 赞同：0
> 
> 时间：2012-04-24T17:33:44.730
> 
> 标签：php, arrays, xpath

我见过几个类似的问题，但没有找到我正在寻找的确切答案。可能是我正在寻找的功能不存在。

如果我做一个 xpath 查询，结果是一个对象数组，但每个对象只包含一个值，一个字符串，我想快速将它转换成一个字符串数组。显然我可以在对象上做一个 foreach 并将字符串值推送到一个新数组上，但是如果有一个我没有想到的内置函数，请告诉我。

例子：

```
array(3) {
  [0]=>
  object(SimpleXMLElement)#24 (1) {
    [0]=>
    string(20) "Network Media Player"
  }
  [1]=>
  object(SimpleXMLElement)#25 (1) {
    [0]=>
    string(12) "Music Player"
  }
  [2]=>
  object(SimpleXMLElement)#26 (1) {
    [0]=>
    string(8) "Juke Box"
  }
} 
```

我希望它变成

```
array('Network Media Player','Music Player','Juke Box') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:57:01.723

这是我的测试：

```
<pre><?php 

$xml = "<data>
            <item>
                <value>Network Media Player</value>
            </item>
            <item>
                <value>Music Player</value>
            </item>
            <item>
                <value>Jukebox Player</value>
            </item>
        </data>";
$sx = simplexml_load_string($xml);
print_r($sx);

print_r(explode("|",implode("|",$sx->xpath("//data/item/value"))));

?></pre> 
```

结果如下：[http ://codepad.org/ZkaWpzMc](http://codepad.org/ZkaWpzMc)

# javascript - Javascript中这些日期之间的区别？为什么不是所有浏览器都给出相同的结果？

> ID：10303031
> 
> 赞同：0
> 
> 时间：2012-04-24T17:33:50.173
> 
> 标签：javascript, utc

```
var dt = new Date("2012-04-23T12:00:00");

var dtz = new Date("2012-04-23T12:00:00Z"); 
```

如果 Z 存在，我会得到不同的时间。

当 Z 存在时，它将日期转换为浏览器的本地时间，而当它不存在时，假设它已经在本地时间？

我在 FF 中得到的结果与 Chrome 不同。Chrome 总是给我同样的时间。FF 将它们视为不同。我应该如何处理来自服务器的 UTC 日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:52:35.173

“Z”是对应于 UT（又名 UTC，又名 GMT）的[军事时区。](https://www.rfc-editor.org/rfc/rfc822)所以基本上，'nnn Z'的意思是“当格林威治的'nnn'时，你的时区有多晚”。例如，我在[CEST](http://en.wikipedia.org/wiki/Central_European_Summer_Time)是 GMT+2 所以这个

```
new Date("2012-04-23T12:00:00Z") 
```

为我返回：

```
Mon Apr 23 2012 14:00:00 GMT+0200 (CEST) 
```

至于带有 TZ 说明符的日期，它们在 Firefox（假定为本地 TZ）和 Chrome（假定为 UTC）中的处理方式似乎有所不同。为了安全起见，我建议始终使用显式 TZ 说明符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:45:36.347

```
var dt = new Date("2012-04-23T12:00:00");

var dtz = new Date("2012-04-23T12:00:00Z"); 
```

用 alert() 试了一下，得到了这些消息

警报（dt）；

```
 Mon Apr 23 2012 12:00:00 GMT+0500 (West Asia Standard Time) 
```

警报（dtz）；

```
Mon Apr 23 2012 17:00:00 GMT+0500 (West Asia Standard Time) 
```

这意味着如果您创建没有“Z”的日期，它将返回浏览器在 GMT 的本地时间，说明您的时区低于或高于 GMT

如果您使用“Z”创建它，它将显示您所在时区的当地时间，参考您所在的时区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T22:14:35.320

根据 ISO 8601，如果没有给出带有时间表示的 UTC 关系信息，则假定时间为本地时间。

如果可以在 Firefox、Safari 和 Internet Explorer 上验证正确的行为：

以下应返回：false

```
new Date("2014-05-09T22:12:18.893Z").valueOf() === new Date("2014-05-09T22:12:18.893").valueOf() 
```

如果您在 Chrome 或 Opera 上尝试相同的操作，它会错误地指示：true

这个故事的寓意是，如果您有上述格式的字符串，请在末尾添加一个 Z。

# oop - 将对象解析为特定模型的设计模式，反之亦然

> ID：10303032
> 
> 赞同：2
> 
> 时间：2012-04-24T17:33:52.170
> 
> 标签：oop, design-patterns, serialization

我有一个文件上传逻辑和一个非常具体的业务规则。根据他们，我应该将我的文件模型解析为行，它看起来像“Header:{processed field1},{processed field2},{processed field3},{processed field4},{processed field5},{processed field6},{processed field7 },{processed field8} 等 19 个参数”它最初是自定义序列化。

而且我也应该有可能将此行解析回对象。那么，问题是编码这些员工的常见想法是什么？

因为现在为了将模型解析为行，我只使用带有许多选项的 string.format，并且为了将行解析为模型，我将行拆分为“，”，然后使用部分信息进行操作，将其分配给模型字段。但是在这个实现中，有很多低级的工作，一些硬编码的位置，还有很多对我来说不好看的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:35:41.067

这里不会涉及任何魔法，特别是因为您正在将对象序列化为非标准格式。你可能不得不忍受“丑陋”的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:56:25.990

您应该将序列化/反序列化放在自定义序列化程序中。您可以遵循与 .net 库中的其他序列化程序相同的模式并实现`IFormatter` [接口](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iformatter.aspx)。这将为您提供一个通用接口，您可以使用该接口在文件（或任何流）之间进行流式传输：

```
using (var fileStream = new FileStream(fileName, FileMode.Create))
{
    var formatter = new CustomFormatter();
    formatter.Serialize(fileStream, objectToSerialize);
}

using (var fileStream = new FileStream(fileName, FileMode.Read))
{
    var formatter = new CustomFormatter();
    return (CustomType)formatter.DeSerialize(fileStream);
} 
```

您可以在此下载中查看[自定义格式化程序](http://www.sellsbrothers.com/tools/SafeFormatter.zip)的示例

# regex - 当正则表达式中有多重匹配时如何替换？

> ID：10303035
> 
> 赞同：0
> 
> 时间：2012-04-24T17:34:03.667
> 
> 标签：regex

我不知道这是否正确表达，但这是示例：

我有几百行这样的：

```
word1.word2.word3.1.09
word1.word2.2.14
word1.word2.word3.word4.3.22
word1.1.09 
```

我想将它们转换为：

```
word1 word2 word3 1.09
word1 word2 2.14
word1 word2 word3 word4 3.22
word1 1.09 
```

到目前为止，我达到了与这些匹配的点：

```
(([a-z0-9]+).+)([0-9]+.[0-9]+) 
```

通常我会将 $1 $2 $3 隔开，但在这种情况下，$1 与第一个字母数字文本匹配多次。我可以只使用正则表达式来做到这一点，还是我必须在之后用另一种语言处理 $1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:56:50.243

对于您提供的（可能是发明的）示例输入，这将起作用：

```
\.(?!\d{2}$)  # search string

" "           # replace string: a single space 
```

即，这会查找您要删除的句点，并用空格替换它们。

解释：

```
\.     # look for a period, but ignore it if the negative lookahead matches:
(?!    # open negative lookahead
\d{2}$ # look for exactly two digits, at the end of the string
)      # close lookahead 
```

# java - 使用 servlet 登录，而不是 validate->redirect 方式

> ID：10303038
> 
> 赞同：1
> 
> 时间：2012-04-24T17:34:26.303
> 
> 标签：java, web-services, model-view-controller, jsp, servlets

我是 servlet 和 jsp 的新手，但我可以编写简单的。目前在我的 webapp 的所有页面上，都有一个登录表单，添加了 jsp:include。我想创建登录机制，以便在验证用户后，我不会被重定向（简单的 servlet 机制），但登录表单会消失（就像在大多数普通网站中一样）。

我找到的所有示例，它们都教我如何验证+重定向。我怎么能做我指定的呢？如果它很复杂，那么至少是大方向，现在我什至不知道到底该用谷歌搜索什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:57:34.250

您可以使用会话变量来检查当前是否有任何用户登录。如果用户已登录，则不显示登录表单，可能只显示一个注销按钮。如果用户未登录，则显示登录表单。

会话变量可以这样设置：

`HttpSession ses=request.getSession(); ses.setAttribute("name",user);`

会话变量可以这样引用：

`HttpSession ses=request.getSession(false); if(ses.getAttribute("name")== null) //set flag to default value and check flag to know no one is currently logged in else //set flag to some other value to show someone is currently logged in`

**编辑**

在您的验证 servlet 和注销 servlet 中使用以下代码（您需要一个）。对于其他事情，您可以使用简单的 if-else 条件。

`HttpSession ses=request.getSession(); ses.setAttribute("name",user);`

和：

`HttpSession ses=request.getSession(); ses.invalidate();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:28:15.280

使用两个 servlet - 一个登录表单 jsp 和一个登录验证 servlet。登录表单 jsp 与您当前的 jsp 类似，但不会验证/重定向，如果用户未登录，则仅显示登录表单。您可以使用会话属性进行检查。如果用户已登录，则在呈现时它应该只是空白。登录表单本身不应重定向到另一个页面，而是执行 AJAX 请求。

**TL;DR**：登录 jsp 需要使用 javascript (AJAX) 处理与 LoginServlet 的通信。

登录.jsp：

```
<% if (session.getAttribute("isLoggedIn") != null) {%>
    $.post('LoginServlet', function(data) {
        //hide this with js
    });
<% } %> 
```

这将发布到 LoginServlet，它将`isLoggedIn`在成功登录时设置属性。它还会向 AJAX 表单返回一些 json 或 xml 响应。

```
public class LoginServlet extends HttpServlet
{
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) 
        throws ServletException, IOException
    {
        String user = req.getParameter("username");
        String pass = req.getParameter("password");

        if (login(user, pass))
        {
            req.getSession().setAttribute("isLoggedIn", true);
            returnJsonOKAnswer();
        }
        else
        {
            returnJsonInvalidUserOrPassAnswer();
        }
    }
    //...
} 
```

# sql - 在 postgresql 中选择 Concat 列

> ID：10303039
> 
> 赞同：5
> 
> 时间：2012-04-24T17:34:31.640
> 
> 标签：sql, postgresql

我尝试了一些变化，但从我阅读[文档](http://www.postgresql.org/docs/current/static/functions-string.html)来看，这种模式应该可以工作`'' || val1 || val1`......但我的结果是一个空列......

```
thedb=# \d buildings_propertyvalue;
                              Table "public.buildings_propertyvalue"
  Column   |          Type          |                              Modifiers                               
-----------+------------------------+----------------------------------------------------------------------
 id        | integer                | not null default nextval('buildings_propertyvalue_id_seq'::regclass)
 prop_id   | integer                | not null
 place_id  | integer                | not null
 float_val | double precision       | 
 int_val   | integer                | 
 char_val  | character varying(255) | 
 text_val  | text                   | 

thedb=# select * from buildings_propertyvalue limit 10;
 id  | prop_id | place_id | float_val | int_val | char_val | text_val 
-----+---------+----------+-----------+---------+----------+----------
 798 |       3 |      170 |           |     831 |          | 
   2 |      46 |      180 |           |       0 |          | 
 733 |       2 |      180 |        40 |         |          | 
 737 |      10 |      180 |           |       0 |          | 
 740 |       5 |      345 |       100 |         |          | 
 742 |      10 |      345 |           |       0 |          | 
  11 |       2 |      170 |        50 |         |          | 
 744 |      11 |      345 |         0 |         |          | 
 746 |      14 |      345 |           |         | 52       | 
 749 |      46 |      348 |           |       0 |          | 
(10 rows)

thedb=# select prop_id, place_id, '' || float_val || int_val || char_val || text_val as val from buildings_propertyvalue limit 10;
 prop_id | place_id | val 
---------+----------+-----
       3 |      170 | 
      46 |      180 | 
       2 |      180 | 
      10 |      180 | 
       5 |      345 | 
      10 |      345 | 
       2 |      170 | 
      11 |      345 | 
      14 |      345 | 
      46 |      348 | 
(10 rows) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T17:37:13.870

将 a`NULL`与非空字符串连接会产生 a`NULL`

由于您的`*_val`列可以为空，这可能是正在发生的事情。

试试这个：

```
'' || COALESCE(float_val::TEXT, '') || COALESCE(int_val::TEXT, '') || COALESCE(char_val, '') || COALESCE(text_val, '') 
```

或者，如果您最多只能有一个非空值，那就这样：

```
COALESCE(float_val::TEXT, int_val::TEXT, char_val, text_val, '') 
```

请注意`PostgreSQL`，与其他引擎不同，in[`TEXT`与`VARCHAR`](http://www.postgresql.org/docs/9.1/interactive/datatype-character.html). `TEXT`分离和`VARCHAR`数据没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:41:37.570

将 NULL 值连接到任何其他值都会产生 NULL。看起来一些被连接的列是可以为空的，所以你需要在它们周围包装一个 COALESCE 函数，以在它们为 NULL 时强制一个空字符串或其他一些占位符值。

# php - 获取唯一数组

> ID：10303040
> 
> 赞同：3
> 
> 时间：2012-04-24T17:34:37.973
> 
> 标签：php, arrays, sorting, indexing, unique

我有一个数组

```
 Array
    (
     [fbid] = Array
            (
                **[0] => 115637705237540
                [1] => 115637705237540**
                [2] => 111723238962320
                [3] => 111723248962319
                [4] => 112721842195793
                [5] => 112567698877874
                [6] => 111844022283575
                **[7] => 115637705237540**
                [8] => 111840252283952
                [9] => 109642909170353
            )

       [fb_parentid] = Array
            (
                [0] => 571228125
                [1] => 571228125
                [2] => 571228125
                [3] => 571228125
                [4] => 571228125
                [5] => 571228125
                [6] => 571228125
                [7] => 571228125
                [8] => 571228125
                [9] => 571228125
            )

) 
```

这里 0 、 1 和 7 重复。首先，我想获取重复索引（0,1,7）。其次，我想显示一对一的索引。在上面的例子中只有第 0 个。

之后我想从 [fb_parentid] 和 [fbid] 中删除 1 和 7

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T17:41:41.667

您正在寻找[array_unique](http://www.php.net/manual/en/function.array-unique.php)函数。

```
$new_array = array_unique($old_array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:49:30.697

尝试

```
$array = Array
    (
     "fbid" => Array
            (
                "0" => 115637705237540,
                "1" => 115637705237540,
                "2" => 111723238962320,
                "3" => 111723248962319,
                "4" => 112721842195793,
                "5" => 112567698877874,
                "6" => 111844022283575,
                "7" => 115637705237540,
                "8" => 111840252283952,
                "9" => 109642909170353
            ),

       "fb_parentid" => Array
            (
                "0" => 571228125,
                "1" => 571228125,
                "2" => 571228125,
                "3" => 571228125,
                "4" => 571228125,
                "5" => 571228125,
                "6" => 571228125,
                "7" => 571228125,
                "8" => 571228125,
                "9" => 571228125
            )

);

$unique = array_unique($array["fbid"]);
$diffrence = array_diff_assoc($array["fbid"], $unique) ; // Return the difference 

var_dump($diffrence); 

$unique = array_unique($array["fb_parentid"]); // Get Unique Values 

var_dump($unique); 
```

输出

```
array
1 => float 1.1563770523754E+14
7 => float 1.1563770523754E+14
array
0 => int 571228125 
```

# php - Simplesamlphp 检查用户是否在 IdP 上有会话

> ID：10303042
> 
> 赞同：2
> 
> 时间：2012-04-24T17:34:55.280
> 
> 标签：php, saml, saml-2.0

如果用户已在 IdP 上进行身份验证，则需要帮助在 SP 端进行识别。基础设施：

login.domain.com (IdP)

www.domain.com (SP)

www.domain2.com (SP)

从 domain.com 我被重定向到 login.domain.com (IdP)，我成功登录并被重定向到 domain.com。我打开站点 domain2.com (SP) 并希望通过身份验证，无需单击登录，被重定向到 IdP 并返回（无需输入用户名，通过）。

HTTP-Artifact 是解决方案，还是某种 SOAP 解决方案？尝试使用 cURL 并阅读它不能使用 cURL 完成。

是否有从 IdP 获取身份验证会话的解决方案，例如当我登录 Gmail 并单击 Youtube 时，我已经登录而无需单击登录。

[更新：如果有人有同样的问题，我在https://groups.google.com/d/topic/simplesamlphp/r5EdD_udn88/discussion](https://groups.google.com/d/topic/simplesamlphp/r5EdD_udn88/discussion)开始了 Google Group 讨论

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T16:57:52.597

我有同样的问题，但 J2EE 应用程序。最后我所做的只是保护 URL 登录。当经过身份验证的用户单击它时，她/他将被重定向到 IdP，IdP 将检查用户是否具有有效会话，并将用户重定向到初始页面。请参阅[从基于 cookie 的内部 SSO 解决方案迁移到 SAML2/WS-Federation](https://stackoverflow.com/questions/10503794/move-from-in-house-sso-solution-cookies-based-to-saml2-ws-federation)

另一个技巧可能是通过 Javascript 从浏览器请求受保护的资源。取决于 IdP 的响应，您可以知道用户是否有有效的会话。请参阅[从 Javascript 调用 SAML IdP](https://stackoverflow.com/questions/9080161/invoke-saml-idp-from-javascript)。

希望能帮助到你，

路易斯

# asp.net - 发生gridview删除但gridview不刷新？

> ID：10303046
> 
> 赞同：0
> 
> 时间：2012-04-24T17:35:06.633
> 
> 标签：asp.net, updatepanel

我在更新面板中有一个网格视图。在 gridview 我有一个图像按钮。该按钮用于删除一行。

在网格视图的 rowCommand 事件中，我执行以下操作：

```
 protected void gvLineItems_RowCommand(object sender, GridViewCommandEventArgs e)
        {
            GridViewRow row = (GridViewRow)((Control)e.CommandSource).NamingContainer;

            switch (e.CommandName)
            {
                case "Delete":
                    Label l = null;
                    l = (Label)row.FindControl("lblLineItemID");

                    if(l!=null)
                    {
                        long lID;
                        lID = Convert.ToInt64(l.Text);
                        BL.DeleteLineItem(Convert.ToInt64(hlID.Text), lID);
                        BindGrid(Session["SortExpression"].ToString(), Convert.ToInt32(rbSortGrid.SelectedValue));
                    }
                    break;
            }
        } 
```

我对此进行了调试，我看到数据库中删除了该行（数据已正确删除）。但即使在绑定网格之后，gridview 仍然显示“已删除”行。绑定网格很简单，如下所示：

```
protected void BindGrid(string sortExpression, int sortDirection)
        {
            DataSet ds

            ds = BL.GetLineItemGridData(Convert.ToInt64(hlID.Text), sortExpression, sortDirection);

            gvLineItems.DataSource = ds.Tables[0];
            gvLineItems.DataBind();
            gvLineItems.Visible = true;
        } 
```

数据集返回正确的行（没有删除的行），但是当我查看网页时，它仍然显示已删除的行。

# 编辑

有人要了gridview的HTML，这里是：

```
<asp:UpdatePanel ID="myPanel" runat="server" UpdateMode="Always">
             <ContentTemplate>
                <asp:GridView GridLines="Horizontal" CellPadding="4" Font-Size="Small" 
                     DataKeyNames="ID" Width="100%" AlternatingRowStyle-BackColor="#e5f1fa" 
                     BackColor="#E8E8E8" HeaderStyle-ForeColor="White" 
                     HeaderStyle-BackColor="#1367AD" ID="gvLineItems" runat="server" 
                     AllowSorting="True" AutoGenerateColumns="False" ShowFooter="True" 
                     onrowcommand="gvLineItems_RowCommand" >
                    <Columns>
                    <asp:TemplateField>
                       <ItemStyle Width="1px" />
                       <ItemTemplate>
                            <asp:Label Width=".05px" ID="lblLineItemID" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.ID") %>' style="display:none"></asp:Label>
                       </ItemTemplate>
                       <ControlStyle Width="0px" />
                       <HeaderStyle Width="0px" />
                     </asp:TemplateField> 
                    <asp:TemplateField>
                       <HeaderTemplate>
                          <asp:CheckBox ToolTip="Select / Deselect all rows?" ID="HeaderLevelCheckBox" onclick="toggleSelection(this);" runat="server" />
                       </HeaderTemplate>
                       <ItemTemplate>
                          <asp:CheckBox ID="chkSelector" ToolTip="Select row?" runat="server" onclick="ChangeRowColor(this)" />
                       </ItemTemplate>
                       <ItemStyle HorizontalAlign="Center" />
                       <HeaderStyle HorizontalAlign="Center" />
                    </asp:TemplateField>
                    <asp:TemplateField>
                       <ItemTemplate>
                         <asp:ImageButton ID="ibAddLineItem" runat="server" ImageUrl="images/InsertRow.gif" CommandName="Insert" ToolTip="Insert new line item."/>
                       </ItemTemplate>
                    </asp:TemplateField>  
                    <asp:TemplateField>
                       <ItemTemplate>
                         <asp:ImageButton ID="ibDeleteLineItem" runat="server" ImageUrl="images/DeleteRow.gif" CommandName="Delete" ToolTip="Delete line item."/>
                       </ItemTemplate>
                    </asp:TemplateField>                          
                    <asp:TemplateField HeaderText="Item #" SortExpression="LineItemNumber">
                         <ItemTemplate>
                             <asp:Label runat="server" ID="lblItemNumber" Visible="True" Text='<%# DataBinder.Eval(Container, "DataItem.LineItemNumber") %>' />
                         </ItemTemplate>
                         <ItemStyle Width="10%" HorizontalAlign="Center" />
                         <HeaderStyle HorizontalAlign="Center" Width="10%" />
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Quantity" SortExpression="LineItemQuantity">
                          <ItemTemplate>
                              <asp:TextBox Font-Names="Arial" ToolTip="Enter item quantity." ID="txtLineItemQuantity" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.LineItemQuantity") %>' /> 
                              </ItemTemplate>
                              <ItemStyle Width="4%" HorizontalAlign="Center" />
                              <HeaderStyle HorizontalAlign="Center" Width="4%" />
                     </asp:TemplateField>
                    <asp:TemplateField HeaderText="Description" SortExpression="LineItemDescription">
                          <ItemTemplate>
                              <asp:TextBox Columns="15" Width="300px" Font-Names="Arial" ToolTip="Enter item description." ID="txtLineItemDescription" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.LineItemDescription") %>' /> 
                              </ItemTemplate>
                              <ItemStyle Width="15%" HorizontalAlign="Left" />
                              <HeaderStyle HorizontalAlign="Left" />
                     </asp:TemplateField>
                     <asp:TemplateField HeaderText="Added By" SortExpression="AddedBy">
                         <ItemTemplate>
                             <asp:Label runat="server" ID="lblAddedBy" Visible="True" Text='<%# DataBinder.Eval(Container, "DataItem.AddedBy") %>' />
                         </ItemTemplate>
                         <ItemStyle Width="10%" HorizontalAlign="Center" />
                         <HeaderStyle HorizontalAlign="Center" Width="10%" />
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Added On" SortExpression="AddedOn">
                         <ItemTemplate>
                             <asp:Label runat="server" ID="lblAddedOn" Visible="True" Text='<%# DataBinder.Eval(Container, "DataItem.AddedOn") %>' />
                         </ItemTemplate>
                         <ItemStyle Width="10%" HorizontalAlign="Center" />
                         <HeaderStyle HorizontalAlign="Center" Width="10%" />
                    </asp:TemplateField>
                    </Columns>
                </asp:GridView>
             </ContentTemplate>
             <Triggers>
                <asp:AsyncPostBackTrigger ControlID="btnAddLineItem" />
                <asp:AsyncPostBackTrigger ControlID="rbSortGrid" />
             </Triggers>
         </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:52:04.750

呃，我明白了，我刚刚添加了这个：

```
 protected void gvLineItems_RowDeleting(object sender, GridViewDeleteEventArgs e)
        {
            DataSet ds = null;
            gvLineItems.DataSource = null;
            ds = BL.GetLineItemGridData(Convert.ToInt64(hlID.Text), Session["SortExpression"].ToString(), Convert.ToInt32(rbSortGrid.SelectedValue));

            gvLineItems.DataSource = ds.Tables[0];
            gvLineItems.DataBind();
            gvLineItems.Visible = true;
        } 
```

并从中删除了对的调用`BindGrid`：

```
 protected void gvLineItems_RowCommand(object sender, GridViewCommandEventArgs e)
        {
            GridViewRow row = (GridViewRow)((Control)e.CommandSource).NamingContainer;

            switch (e.CommandName)
            {
                case "Delete":
                    Label l = null;
                    l = (Label)row.FindControl("lblLineItemID");

                    if(l!=null)
                    {
                        long lID;
                        lID = Convert.ToInt64(l.Text);
                        BL.DeleteLineItem(Convert.ToInt64(hlID.Text), lID);
                        //BindGrid(Session["SortExpression"].ToString(), Convert.ToInt32(rbSortGrid.SelectedValue));
                    }
                    break;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T07:45:36.027

或者，您可以在控制事件处理完成后发生的 Page PreRender 事件中绑定 GridView。然后，您不需要连接数据源并在 rowCommand 事件中绑定网格。

# java - 用Java读取大文件

> ID：10303047
> 
> 赞同：1
> 
> 时间：2012-04-24T17:35:09.647
> 
> 标签：java, string

我有一个适用于 CSV 文件的摇摆应用程序。它逐行读取完整文件，计算一些所需的统计数据并显示输出。输出屏幕的上半部分按 J​​Table 中的顺序显示文件中的每条记录，而下半部分显示基于该数据计算的统计信息。问题是 JVM 占用的内存是文件大小的 4 倍。（在处理 86MB 的文件堆区域时使用 377 MB 的空间 - 使用 jVisualVM 检查内存利用率）。

笔记：

1.  我使用 LineNumberReader 读取文件（由于特定要求，如果这有助于内存使用，我可以更改它）

2.  为了读取每一行，使用 readLine()，然后为该记录的各个字段调用 String 的那一行的 .split(',')。

3.  每条记录存储在 Vector 中，以便在 JTable 中显示，而其他统计信息存储在 JavaBean 类中的 HashMap、TreeMap 和摘要数据中。还使用 JFreeChart 绘制了一张图。

请建议减少内存利用率，因为我需要处理 2GB 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:51:17.877

尝试给[OpenCSV](http://opencsv.sourceforge.net/)一个机会。它仅在您使用 readNext() 方法时存储最后读取的行。对于大文件，这是完美的。

在他们的网站上，以下是他们支持的功能：

*   每行任意数量的值

*   忽略引用元素中的逗号

*   处理带有嵌入回车的引用条目（即跨越多行的条目）

*   可配置的分隔符和引号字符（或使用合理的默认值）

*   一次阅读所有条目，或使用迭代器样式模型

*   从 String[] 创建 csv 文件（即嵌入引号字符的自动转义）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:43:54.793

使用最佳实践来升级您的程序

1.  在程序中编写多线程以获得更好的cpu利用率。
2.  设置堆最小和最大堆大小以更好地使用 ram。
3.  使用正确的数据结构和设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:28:58.723

每个 Java 对象都有[内存开销](https://stackoverflow.com/questions/258120/what-is-the-memory-consumption-of-an-object-in-java)，所以如果你的字符串真的很短，这可以解释为什么你的文件大小是 4 倍。您还必须计算 Vector 的大小及其内部结构。我不认为 a`Map`会提高内存使用率，因为 Java 字符串已经尽可能地尝试指向内存中的相同地址。

我认为你应该修改你的设计。鉴于您的要求

> 输出屏幕的上半部分以 JTable 中的顺序显示文件中的每条记录，而下半部分显示基于该数据计算的统计信息

您不需要将整个文件存储在内存中。您需要**完全阅读它**来计算您的统计数据，这当然可以使用非常少量的内存来完成。关于 JTable 部分，这可以通过多种方式完成，**而不**需要为您的程序提供 2GB 的堆空间！我认为当有人想在内存中保留 CSV 时一定有问题！[Apache IO LineIterator](http://commons.apache.org/io/description.html#Line_iterator)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T18:59:39.010

增加 JVM 堆大小（-Xms 和 -Xmx）。如果你有记忆，这是最好的解决方案。如果您不能这样做，您将需要找到一种折衷方案，将数据模型和表示 (GUI) 更改结合起来，这通常会导致代码复杂性增加和潜在的错误。

1.  尝试修改您的统计算法以在读取数据时完成它们的工作，而不是要求它全部存在于内存中。您可能会发现近似统计数据的算法就足够了。
2.  如果您的数据包含许多重复的字符串文字，请使用 HashSet 创建缓存。请注意，缓存因内存泄漏而臭名昭著（例如，在加载不同文件之前不清除它们）。
3.  减少图表上显示的数据量。具有大量数据的图形通常会在同一像素处或附近显示许多点。考虑通过合并 x 轴上相同位置处或附近的多个值来截断数据。例如，如果您的数据集包含 2,000,000 个点，其中大部分将与附近的其他点重合，因此您的底层数据模型不需要存储所有内容。
4.  谨防信息过载。如果您的 JTable 包含 2GB 的数据，它对用户有意义吗？也许您应该对表格进行分页，并一次从文件中读取 1000 个条目以进行显示。
5.  我很犹豫是否建议这样做，但在加载过程中，您可以将 CSV 数据转换为文件数据库（例如[cdb](http://cr.yp.to/cdb.html)）。您可以在转换过程中为图表积累统计数据并存储一些数据，并使用数据库一次快速读取一页数据，用于 JTable 如上所述。

# ruby - Redis-rb 通过 redis.lpush 推送数组正在展平列表

> ID：10303048
> 
> 赞同：6
> 
> 时间：2012-04-24T17:35:09.740
> 
> 标签：ruby, redis

我正在尝试使用 LPUSH 将多个值推送到 redis LIST。代码看起来像这样：

`mylist = ["1", "2", "3", "4"]`
`$redis.lpush(name, mylist)`

上面的问题是列表变得扁平，看起来像“1234”。在这种情况下，如何使用 LPUSH 将 4 个单独的元素推送到`name`数组中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:30:00.933

你可能想看看：

*   [https://github.com/redis/redis-rb/blob/master/CHANGELOG.md](https://github.com/redis/redis-rb/blob/master/CHANGELOG.md)

*   [https://github.com/redis/redis-rb/issues/220](https://github.com/redis/redis-rb/issues/220)

*   [https://github.com/redis/redis-rb/pull/221](https://github.com/redis/redis-rb/pull/221)

Redis-rb 2.2.2 版不支持可变参数命令。它们已在 3.0 版中引入，但尚未交付。

可变参数命令中没有处理数组的具体方法。您的代码可能适用于 3.0 版。

同时，我建议您使用管道，例如：

```
name = "toto"
mylist = [ 1,2,3,4,5 ]
$redis.pipelined{ mylist.each{ |x| $redis.lpush(name,x) } } 
```

使用管道，往返次数将与使用可变参数命令相同。

如果您真的想使用可变参数命令，您可以使用以下命令轻松安装 3.0 的预发布版本：

```
gem install --prerelease redis
gem list redis 

*** LOCAL GEMS ***
redis (3.0.0.rc1, 2.2.2) 
```

并使用以下方法在您的脚本中激活它：

```
gem 'redis', '3.0.0.rc1'
require 'redis' 
```

请注意，如果您有其他依赖于 redis gem 的 gem，您将遇到一些依赖问题。最好等待 IMO 正式交付。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:39:30.457

你可以这样做：

```
# If you want ["1","2","3","4",...restofarray...]
mylist.reverse.each{ |v| $redis.lpush(name,v) }

# If you want ["4","3","2","1",...restofarray...]
mylist.each{ |v| $redis.lpush(name,v) } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-15T18:18:10.657

对于 v 3.0 +，语法是

```
r= Redis.new()

r.lpush("mylist", ["element1", "element2" , "element3"]) 
```

# vba - 指定要循环通过 Excel/VBA 的附加目录

> ID：10303051
> 
> 赞同：3
> 
> 时间：2012-04-24T17:35:26.100
> 
> 标签：vba, loops, excel, directory

我正在使用文件系统对象循环遍历一组目录，并且我想指定一个额外的目录来循环遍历。例如，我目前有：

```
Sub test()
    Set objFSO = CreateObject("Scripting.FileSystemObject")
    Set objFolder = objFSO.GetFolder(Directory)
    Set colSubfolders = objFolder.Subfolders
    For Each objSubfolder In colSubfolders
        ' take some action
    End For
End Sub 
```

但是，我想指定一个额外的文件夹来循环，例如：

```
colSubfolders = colSubfolders + "additionalpath"
For Each objSubfolder In colSubfolders .... 
```

或者，是否可以在循环命令中指定多个对象，例如：

```
For Each objSubfolder in colSubfolders, "additionalpath" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T17:52:48.750

最简单的方法是分解枚举目录的代码和“采取一些行动”的代码，并将其包装在重复您需要的调用中；

```
Sub foo()
    enumDirs "c:\temp\", "c:\music", "c:\as many as you like ..."
End Sub

Sub enumDirs(ParamArray strPaths() As Variant)
    Dim i As Long
    For i = 0 To UBound(strPaths)
        enumDir CStr(strPaths(i))
    Next
End Sub

Sub enumDir(strPath As String)
    Dim objFolder As Object, colSubfolders As Object, objSubfolder As Object
    Set objFolder = CreateObject("Scripting.FileSystemObject").GetFolder(strPath)
    Set colSubfolders = objFolder.Subfolders
    For Each objSubfolder In colSubfolders
        TakeSomeAction strPath, objSubfolder.Name
    Next
End Sub

sub TakeSomeAction(strRoot As String, strFoundPath As String)
    Debug.Print ">"; strRoot & ", " & strFoundPath
End sub 
```

# c# - 计算收敛系列，C#

> ID：10303054
> 
> 赞同：-1
> 
> 时间：2012-04-24T17:35:45.913
> 
> 标签：c#, math

我有一个即将到来的考试，很可能会出现以下问题。如果有人可以帮助我，我将不胜感激。谢谢你。

使用 C# 编写一个程序来计算以下收敛级数，精度为 10^-10。

x^(2n-1) / (2n-1)！

我试过了：

```
class Program 
{ 
    static void Main(string[] args) 
    {
        double x, y, numerator, denominator, answer,  e = Math.Pow(10,-10);
        x = int.Parse(Console.ReadLine());
        int n = 0;

        do
        {
            numerator = Math.Pow(x, (2 * n - 1));
            denominator = (2 * n - 1);
            answer = (numerator / denominator);
            n++;
        }
        while (answer < e);
   }
} 
```

我认为我最大的问题是试图调用阶乘函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:43:07.460

注意`x^(2n+1) = x^(2n-1) * x^2`和`(2n+1)! = (2n-1)! * 2n * (2n + 1)`。使用此公式，您可以在循环的每次迭代中分别从前一个分子和分母轻松地重新计算分子和分母。其余的留给读者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:01:56.203

我认为这就是你想要的：

```
class Program
{
    static void Main(string[] args)
    {
        const double tol=1e-10;
        double x = 1;
        if(args.Length>0)
        {
            double.TryParse(args[0], out x);
        }
        int n=1;
        const int n_max=100;
        double y=x;

        while(n<n_max && y>tol)
        {
            y=y*x*x/(2*n*(2*n+1));
            n++;
        }

        Debug.WriteLine(string.Format( "x={0:R}, y={1:R}, n={2}", x, y, n));
    }
} 
```

为什么？好吧，这是您可以自己弄清楚的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:49:01.170

我相信当他们说“精度为 10^-10”时，这意味着答案的*变化*小于从一次传递到另一次传递的变化。您的循环看起来不错，但您正在检查答案本身，而不是从通过到通过的变化。试试这个改变：

```
double lastAnswer = 0.0, delta;   // couple more vars

do
{
    // ... keep current code in loop, add these two lines below

    delta = abs(answer - lastAnswer);   // the change between passes is what's important
    lastAnswer = answer;                // and save last answer for next delta
}
while (delta < e);    // change condition to check difference 
```

您还可以对 n 进行“健全性检查”测试：

```
while ((delta < e) && (n < 10000000)); 
```

`n`如果您的答案不够接近，您可以随时增加限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T17:49:08.440

如果您唯一的问题是如何进行阶乘，这篇文章可能会有所帮助：

[http://guyellisrocks.com/algorithms/factorial-function-in-c/](http://guyellisrocks.com/algorithms/factorial-function-in-c/)

他提出了一个很好的观点，即不需要每次都重新计算这些值。

# javascript - 我可以使用 CSS 来指定要使用选择器设置的类吗？

> ID：10303055
> 
> 赞同：0
> 
> 时间：2012-04-24T17:35:46.523
> 
> 标签：javascript, jquery, css, class, jquery-mobile

我希望我的所有 JQuery Mobile 页面尽可能使用输入搜索字段的迷你版。

我查看了示例页面，很明显我想要将所有带有 class 的元素设置`.ui-input-search`为也分配了 class `.ui-mini`。

为什么这不仅仅是使用`data-mini="true"`属性？因为指定`data-filter="true"`列表视图让 JQM 自动生成输入搜索元素：我没有机会指定我想要它的迷你版本。

当前解决方案：

```
<script type="text/javascript">
  $(function () { $('.ui-input-search').addClass('ui-mini'); });
</script> 
```

是否有（n 本质上更优雅的）CSS 解决方案？就像是

```
.ui-input-search {
  setClass(ui-mini); /* this line is pseudo-code */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:36:20.897

而不是使用`document.ready`您可以绑定到`pageinit`特定伪页面的事件，其中存在带有搜索小部件的列表视图。

```
$(document).delegate('#some-page-id', 'pageinit', function () {
    $(this).find('.ui-input-search').addClass('ui-mini');
}); 
```

这是绑定事件处理程序的“jQuery Mobile”方式，确保它在任何时间范围内都能正常工作。

这是一个演示：http: [//jsfiddle.net/bHrJy/](http://jsfiddle.net/bHrJy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T19:24:22.117

我总是更喜欢 CSS 解决方案而不是布局而不是 javascript..

`<link rel="stylesheet" href="mini.css" media="only screen and (max-device-width:768px)"/>`

或者在普通的 CSS 中：

```
@media only screen and (max-width: 767px) { 
    .ui-input-search {
        height: auto;
        width: 80px;
    }
} 
```

# php - HTTPS 协议是否与 REST API Web 服务相关？

> ID：10303056
> 
> 赞同：6
> 
> 时间：2012-04-24T17:35:54.040
> 
> 标签：php, api, rest, https

我有一个 iPhone 应用程序使用的 PHP 中的 HTTP REST API。

此 API 中的一些 Web 服务通过 HTTP 请求凭据中的用户身份验证进行保护，但我想通过提供完全加密的请求数据来避免“中间人”攻击。

我在安全问题上并不是很熟练，而且我在任何地方都找不到我的问题的明确答案：

HTTPS 与 STATELESS REST API 相关吗？

据我了解，HTTPS 做了两件事：

*   加密你的会话
*   向客户证明他正在与之交谈的服务器是安全的

所以乍一看，它没有响应我的需要，即加密我的服务器和应用程序之间的数据，因为 API 不使用会话。但我仍然有疑问。

有人可以对我说清楚吗？

我的另一个解决方案是使用公钥/私钥系统加密请求数据。会不会更合适？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T18:00:38.963

是的。HTTPS 与应用程序无关，它是一种隧道协议。尽管 TLS 本身是一个有状态的协议，但通过它的 HTTP 部分却不是。

就像您使用 VPN 一样，您仍然可以拥有基于 REST 的应用程序。TLS 只是为每个连接自动设置和拆除隧道。

也就是说，利用 HTTP 和 HTTPS 的流水线方面来提高 TLS 连接的吞吐量是有价值的，但这是与应用程序本身无关的性能调整方面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T17:41:29.973

HTTPS 非常相关，是的，这是因为您提到的两点。您知道[OAuth 2](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2)实际上强制执行 HTTPS 吗？

自己进行所有加密也是一种选择，但您会丢失 API 易于使用的部分。

大多数针对“简单”HTTP 请求的中间人攻击涉及窃取凭据和伪造请求，但它们也可以读取发送和接收的数据。如果您的问题是数据不可读，请使用 HTTPS。[如果虚假请求是唯一的问题，那么OAuth 1](https://www.rfc-editor.org/rfc/rfc5849) （而不是 2）之类的身份验证协议就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:02:19.713

如果您不想实现 SSL，您可能需要查看[http://www.jcryption.org/](http://www.jcryption.org/)我不知道它是否可以在无状态环境中工作，但可能值得一试。它基本上是一个 jquery 插件，用于处理为正在传输的数据创建密钥对关联。可能仅用于表单提交。我们曾经在我的旧公司使用它来加密登录凭据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T06:30:18.040

如果数据敏感，绝对使用 HTTPS - 它在传输层进行加密，这正是您要寻找的。正如已经指出的那样，oAuth 2.0 本质上是强制要求的。您可以通过在 oAuth 1.0 中使用散列/签名来潜在地避免中间人，并避免必须使用 SSL，但那时正文仍然是明文的（您避免了明文发送 API 凭据，而不是正文）。

# zend-framework - Zend Framework 查询 db 和 getParam

> ID：10303057
> 
> 赞同：1
> 
> 时间：2012-04-24T17:35:54.547
> 
> 标签：zend-framework

目前我有一个页面，我通过该俱乐部的 id 检索了该俱乐部的信息。我现在有一个评论框，我想在其中检索关于该俱乐部的评论，在评论表中我有 club_id 并且参数“club_id”被传递到这个页面。目前我正在检索表格中的所有评论，但我只想要该俱乐部的评论。朝着正确的方向前进会很棒！

控制器：

```
class ClubDescriptionController extends Zend_Controller_Action
{

public $auth = null;

public function init()
{
    $this->auth=Zend_Auth::getInstance();
}

http://pastebin.com/m66Sg26x
protected function authoriseUser()
{
    if (!$this->auth->hasIdentity()) {
            $route = array('controller'=>'auth', 'action'=>'index');
            $this->_helper->redirector->gotoRoute($route);

        }
    }
} 
```

模型：

```
class Application_Model_DbTable_Comments extends Zend_Db_Table_Abstract
{

protected $_name = 'comments';

public function getComment($id) {
    $id = (int) $id;
    $row = $this->fetchRow('id = ' . $id);
    if (!$row) {
        throw new Exception("Count not find row $id");
    }
    return $row->toArray();
}

public function addComment($comment, $club_id) {
    $data = array(
        'comment' => $comment,
        'club_id' => $club_id,
        'comment_date' => new Zend_Db_Expr('NOW()'),
        );
    $this->insert($data);
    }   

    public function deleteComment($id) {
    $this->delete('id =' . (int) $id);
    }
} 
```

风景：

```
<div id="view-comments">
        <?php foreach($this->comments as $comments) : ?>
            <p id="individual-comment">
                <?php echo $this->escape($comments->comment);?> - 
                <i><?php echo $this->escape($comments->comment_date);?></i>
            </p>
        <?php endforeach; ?>
</div> 
```

我意识到我将不得不使用 getComment(); 在我的模型中运行并通过 id 查询它，但我对究竟如何......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:40:17.287

在您的控制器中，您正在调用

```
$this->view->comments = $comments->fetchAll(); 
```

它应该是

```
$this->view->comments = $comments->getComment($this->_request->getParam('club_id')); 
```

其中 id 变量将从 url 获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:06:41.743

这是工作控制器：

```
public function indexAction() {
    //authorisation
    $this->authoriseUser();
    //to get the paramter club_id to query for specific club information
    $id = (int) $this->_request->getParam('club_id', 0);

    //submit a comment
    $form = new Application_Form_Comment();
    $form->submit->setLabel('Comment');
    $this->view->form = $form;
    if ($this->getRequest()->isPost()) {
        $formData = $this->getRequest()->getPost();
        if ($form->isValid($formData)) {
            $comment = new Application_Model_DbTable_Comments();
            $comment->addComment($formData['comment'], $id);
        } else {
            $form->populate($formData);
        }
    }

    //initialise table
    $clubs = new Application_Model_DbTable_Clubs();
    $clubs = $clubs->getClub($id);
    $this->view->clubs = $clubs;

    //to get the comments for the club
    $comments = new Application_Model_DbTable_Comments();
    $select = $comments->select();
    $select->where('club_id = ?', $id);
    $select->order('comment_date ASC');

    $this->view->comments = $comments->fetchAll($select);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:45:14.453

自从我使用 Db_Table 已经有一段时间了，但我认为您想创建一个选择对象，它允许您构建一个查询，该查询将选择具有正确 club_id 的评论：

```
$comments = new Application_Model_DbTable_Comments();
$select = $comments->select();
$select->where('club_id = ?', $id);

$this->view->comments = $comments->fetchAll($select); 
```

您可能希望按日期对评论进行排序，如果是这样，您可以通过在 select 中添加 order 子句来做到这一点：

```
$select->order('comment_date ASC'); 
```

查看 Zend_Db_Table_Select 的文档，其中有很多示例： http: [//framework.zend.com/manual/en/zend.db.table.html#zend.db.table.fetch-all](http://framework.zend.com/manual/en/zend.db.table.html#zend.db.table.fetch-all)

# gwt - GWK Google Web Toolkit 是否需要客户端浏览器上的 Java？

> ID：10303064
> 
> 赞同：0
> 
> 时间：2012-04-24T17:36:07.370
> 
> 标签：gwt, browser, client, java

我想问的是，GWK Google Web Toolkit 在客户端浏览器上是否需要 Java？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:41:18.893

不，GWT（不是 GWK）使用 Java 只是为了方便开发人员。但是编译后，产品是 100% Javascript，所以不需要 JRE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T17:40:08.363

不，它没有，它只是将 java 编译成 javascript，通常是可以在多个浏览器上运行的好 javascript。

# plsql - IF 语句开始查询

> ID：10303065
> 
> 赞同：-2
> 
> 时间：2012-04-24T17:36:08.910
> 
> 标签：plsql

我可以使用 IF 语句开始 PL/SQL 查询吗？我正在尝试基于参数执行正确的 SELECT 语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:41:12.780

是的你可以; 如果您尝试比较的变量/参数已经填充了数据。像这样的东西：

```
DECLARE
   v_num1 NUMBER := 5;
   v_num2 NUMBER := 3;
   v_temp NUMBER;
BEGIN
   -- if v_num1 is greater than v_num2 rearrange their values
   IF v_num1 > v_num2 THEN
      v_temp := v_num1;
      v_num1 := v_num2;
      v_num2 := v_temp;
   END IF; 
```

根据您实际尝试做的事情提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:27:06.673

你可以通过两种方式做到这一点

### 第一的

```
if your_condition then
   select * from your_table; 
```

### 第二

编写查询并添加`your_condition`到查询的 where 子句

```
select * from your_table where your_condition; 
```

# tablesorter - Tablesorter在排序后添加删除的行

> ID：10303070
> 
> 赞同：4
> 
> 时间：2012-04-24T17:36:35.280
> 
> 标签：tablesorter

我正在使用 jquery Tablesorter 插件，当我删除一行然后对列进行排序时，删除的行再次出现。从我在 stackoverflow 上读到的内容来看，我可能需要添加 trigger.update 和/或 trigger.appendcache，但这似乎不起作用，尽管我可能将它放在错误的位置。有任何想法吗？

```
<script type="text/javascript">
$(function () {
    $(".tablesorter").tablesorter({
        headers: { 0: { sorter: false }, 1: { sorter: false }, 2: { sorter: false }, 3: { sorter: false} },
        widgets: ['zebra'],
        widgetZebra: { css: ['alt-even-class', 'alt-odd-class'] }
    });

    $('div#deleteDialog').dialog({
        autoOpen: false,
        width: 400,
        height: 200,
        modal: true,
        position: 'center',
        resizable: false,
        buttons: {
            OK: function () {
                var delID = $('div#deleteDialog input').val();
                $.post('@Url.Action("Delete", "Plate")', { id: delID }, function (data) {
                    if (data === 'delete') {
                        $('tr#' + delID).remove();
                        resetGrid();
                    }
                });
                $(this).dialog('close');
            },
            Cancel: function () {
                $(this).dialog('close');
            }
        }
    });

    $('table.tablesorter thead input:checkbox').change(function () {
        $('table.tablesorter tbody input:checkbox').attr('checked', $('table.tablesorter thead input:checkbox').attr('checked'));
    });

    $('#create').click(function () {
        document.location.href = '@Url.Action("ItemSelect", "Plate")';
    });

    $('.menucosting_view').click(function () {
        document.location.href = '@Url.Action("Details", "Plate")' + '/' + $(this).parent().parent().attr('id');
    });

    $('.menucosting_edit').click(function () {
        document.location.href = '@Url.Action("Edit", "Plate")' + '/' + $(this).parent().parent().attr('id');
    });

    $('.menucosting_delete').click(function () {
        $('div#deleteDialog input').val($(this).parent().parent().attr('id'));
        $('div#deleteDialog').dialog('open');
    });
});

function resetGrid() {
    $('.tablesorter tr').removeClass('alt-even-class').removeClass('alt-odd-class');
    $('.tablesorter tr:even').addClass('alt-even-class');
    $('.tablesorter tr:odd').addClass('alt-odd-class');
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T01:59:43.247

放在`$('.tablesorter').trigger('update');`下面`resetGrid();`！

# jquery - 如何使用具有动态值的转换为 DOM 元素设置动画？

> ID：10303077
> 
> 赞同：0
> 
> 时间：2012-04-24T17:37:06.613
> 
> 标签：jquery, animation, css, webkit

我一直在尝试仅使用[转换](https://developer.mozilla.org/en/CSS/CSS_transitions)来为 DOM 元素设置动画，因为我读过它们在许多形式中都更好。但是，我的问题很简单，**有没有办法使用过渡为动​​画传递动态值？**我基本上不知道该怎么做，即。我只能通过添加一个具有固定值的类来为 DOM 元素设置动画，如本[例所示](http://jsfiddle.net/P6zUw/)（在 webkit 浏览器上运行良好）

正如您在 CSS 类中看到的：

```
.motion {
  left: 300px;
  top: 200px;
  position: absolute;
} 
```

...动画的值是静态的，我想知道**如何在运行时将参数传递给过渡？**, *（例如，左的不同值。例如）*

我尝试通过**.css()**方法使用 jQuery 来实现，如下所示：

```
function clickButton() {
  $("#button1").click(function(event) {
    $("#square").css( { 'left': '30', 'top': '100' });          
  });
}​ 
```

但由于某种原因，过渡不会被触发。为什么？

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:43:23.397

如果您使用的是 jQuery 1.6+，那么您可以尝试使用`.css()`方法来获得动画行为。

```
function clickButton() {
  $("#button1").click(function(event) {
    $("#square").css( { 'left': '+=30', 'top': '+=100' });          
  });
}​ 
```

来自 jQuery 文档

> 从 jQuery 1.6 开始，.css() 接受类似于 .animate() 的相对值。相对值是一个以 += 或 -= 开头的字符串，用于增加或减少当前值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:45:43.150

如果我正确理解了您的观点，您希望转换通过将值/值添加到当前值/值对的方式来使用值/值：如果是这样，您应该尝试以下方法；

```
function clickButton() {
  $("#button1").click(function(event) {
    $("#square").css( { 'left': '+=' + 30, 'top': '+=' + 100 });
  });
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T17:40:10.253

jQuery 动画。 [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

```
$("#square").animate({'left':'30px','top':'100px' }, "slow"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T17:57:54.597

好的，既然您的评论表明您喜欢它，这是您的答案：

使用[jQuery 中转](http://ricostacruz.com/jquery.transit/)。

它支持您希望的缓动功能。

它有一个`animate`类似 - 的 API，并且可以回`animate`退到不支持 CSS3 过渡的情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T18:24:18.667

也许我没有注意，但我在任何地方都没有看到过渡属性的定义，例如持续时间、缓动等……我假设你的 CSS 上的某个地方有这些？如果没有，这件事就行不通。

您需要设置 2 个定义：一个用于转换本身，另一个用于您要转换的属性。这是我对 CSS3 规范的不满，他们有这种复杂的转换和过渡方式。真是构思不周。

# ruby - 在 World 中添加模块与在 Cucumber 中添加类有什么区别？

> ID：10303086
> 
> 赞同：2
> 
> 时间：2012-04-24T17:37:53.377
> 
> 标签：ruby, cucumber

例如。

在黄瓜中使用 ruby​​ on rails 时，你可以同时做

**一个类的例子**

```
class Awesome
   def thing
   end
end

World{ Awesome.new } 
```

**带有模块的示例**

```
module Awesome
   def thing
   end
end

World(Awesome) 
```

为什么我要使用其中一个？有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:06:53.260

没有区别，因为类的类是从模块的类继承的。唯一的区别是您不能实例化模块。通常在黄瓜中你不需要这样做，所以模块就可以了。如果您需要以某种方式将某些内容包含到世界中，而在其他地方则必须创建一个实例-您可以上课，但我几乎无法想象这种情况，

# java - 与在 PHP 中运行的应用程序的接口？

> ID：10303097
> 
> 赞同：3
> 
> 时间：2012-04-24T17:38:41.870
> 
> 标签：java, php, linux, debian, code-injection

我想知道是否有任何方法可以通过 PHP 与正在运行的控制台程序（最好在 Linux / Debian 上运行）进行通信。我目前正在尝试为一个小的（现有的）控制台 Java 程序创建一个 Web 界面，但我不知道是否有任何方法可以做到这一点。我可以“注入”一段代码，比如说一个远程控制模块，然后使用它通过 PHP“远程控制”脚本吗？（如果现有的 .jar 文件不会被更改/只是注入，没有重新编程，那就太好了）

我很感激每一条建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T17:56:22.407

如果正在运行的程序没有通信接口，那么你就不能和它通信。但是，如果确实如此，那么答案很大程度上取决于程序如何接收外部输入。

如果程序包含网络监听线程（守护程序），那么您可以使用 CURL 或 PHP 的原始套接字在环回接口上与它通信。

与程序通信的其他方式是共享对文件的访问（PHP 写入文件，Java 读取文件）或通过数据库。

数据库将是最好的选择——它是线程安全的，PHP 和 Java 都具有出色的 MySQL 支持（Java 通过 JDBC）。

但是，如果您不需要实际与正在运行的程序交互，只需要启动/停止/重新启动它，您可以使用 PHP 中的 system() 函数来完成此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:50:25.413

如果 Java 程序只是运行并输出到控制台，那么您可以很容易地做到这一点，如下所示：

```
$output = system( "java com.yourcompany.package.RunnableClass" ); 
print $output; 
```

假设运行 PHP 的用户当然可以访问 Java 二进制文件，并且您有权访问 JAR 文件。

访问正在运行的程序有点困难。大多数程序默认情况下不会内置此功能（它们也不应该 - 在许多情况下不希望访问随机外部进程）。但是，如果确实如此，那么您的状态很好。如果没有，并且您可以更改 Java 代码，那么您很好。如果没有，那么你可能不走运。

如果是这种情况，另一种好方法可能是查看 Java 代码正在访问哪些资源，以及它是如何访问它们的。然后你可以在 PHP 中编写类似的东西。显然这并不理想，因为您将重新发明轮子，但如果您需要获取数据或任何数据，并且不能使用上述任何方法，它会起作用。

# image - Titanium - 使用选择器更改图像视图

> ID：10303098
> 
> 赞同：0
> 
> 时间：2012-04-24T17:38:42.483
> 
> 标签：image, mobile, replace, imageview, titanium

我正在尝试根据“更改”事件将图像视图更改为新图像。当我使用当前代码尝试此事件时，我得到一个错误-“无效的图像类型。预期 TiBlob 或 TiFile，是：NSNull in -[TiUIImageView setImage_:] (TiUIImageView.m:693)

```
//This label contains text that will change with each picker change
var results = Titanium.UI.createLabel({
text:"Select from the picker below",
height:40,
width:"auto",
top:20  
});

//This view contains an image that will change with each picker change
var imageView = Titanium.UI.createImageView({   
        image:"images/logos/CIK.jpg",
        height: 100, 
        width: 100, 
        left: 110,
        top: 80
    });

picker.addEventListener("change", function(e){
results.text = e.row.title + ": Home of the " + e.row.val;
imageView.image = e.row.logo; //logo contains a value like images/logos/BURRTON.jpg
});

win.add(results);
win.add(imageView);

win.open(); 
```

似乎这应该很容易做到，但我很难过。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:44:39.543

使用`View`代替`imageView`并设置一个`backgroundImage`.

# java - 需要帮助修复我的项目的各种错误

> ID：10303099
> 
> 赞同：-7
> 
> 时间：2012-04-24T17:38:52.033
> 
> 标签：java, android

第 18 行：语法错误，输入 } 完成 classBody。

第 33/38 行：标记上的语法错误，应改为 AnnotationName。

第 416 行：此行有多个标记 - 语法错误，插入“EnumBody”以完成 EnumDeclaration - 语法错误，插入“）”以完成 Modifiers - 语法错误，插入“枚举标识符”以完成 EnumHeader - 语法错误，插入“）”完成 Expression - 语法错误，插入“}” 完成 ClassBody - 语法错误，插入“}” 完成 MethodBody - 语法错误，插入“;” 完成声明

以上，我有几个错误我不知道如何解决。我也想看看我的代码是否有效。我正在尝试从相反类别的输入中获取名称/数字的输出并放入 textView 'Display'。

我的代码：（或我的带有[行号](http://pastebin.com/HSyAuLBd)的代码）

```
package walmart.namespace;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class WalmartActivity extends Activity {
    /** Called when the activity is first created. */

    EditText department;
    EditText name;
    Button search;
    String display;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        department = (EditText) findViewById(getResources().getIdentifier("etNum", "id", getPackageName()));
        name = (EditText) findViewById(getResources().getIdentifier("etName", "id", getPackageName()));
        search = (Button) findViewById(getResources().getIdentifier("btnSearch", "id", getPackageName()));
        final String Display;

        department.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    et.setText("");
                }
       name.setOnClickListener(new View.OnClickListener() {

                        public void onClick(View v) {
                            et.setText("");
                        }
        search.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                switch (department) {
                case 1: display = "food";
                case 2: display = "Health and Beauty Aids";
                case 3: display = "Stationary and Books";
                case 4: display = "Paper Goods";
                case 5: display = "Home Entertainment";
                case 6: display = "Cameras and Film";
                case 7: display = "Toys";
                case 8: display = "Pets and Pet Supplies";
                case 9: display = "Sporting Goods";
                case 10:display = "Automotive";
                case 11:display = "Hardware";
                case 12: display = "Paint and Accessories";
                case 13: display = "Household Chemicals";
                case 14: display = "Housewares";
                case 15: display = "Appliances";
                case 16: display = "Lawn and Garden";
                case 17: display = "Home Furnishings";
                case 18: display = "Seasonal";
                case 19: display = "Fabrics and Crafts";
                case 20: display = "Domestic Goods";
                case 21: display = "Curtains";
                case 22: display = "Bedding";
                case 23: display = "Mens";
                case 24: display = "Boys";
                case 25: display = "Shoes";
                case 26: display = "Infants and Toddlers";
                case 27: display = "Ladies Socks";
                case 28: display = "Nylon Hosiery";
                case 29: display = "Lingerie";
                case 30: display = "Foundations";
                case 31: display = "Handbags and Accessories";
                case 32: display = "Jewlery";
                case 33: display = "Girls";
                case 34: display = "Ladies";
                case 36: display = "Outerwear";
                case 39: display = "Food Services";
                case 40: display = "Pharmacy";
                case 46: display = "Cosmetics";
                case 49: display = "Optical";
                case 56: display = "Horticulture";
                case 58: display = "Income";
                case 77: display = "Large Appliances";
                case 80: display = "Service Deli";
                case 81: display = "Bread";
                case 82: display = "Impulse Buys";
                case 83: display = "Seafood";
                case 84: display = "Floral";
                case 85: display = "1 Hour Photo";
                case 86: display = "Fresh Flowers and Balloons";
                case 87: display = "Wireless";
                case 89: display = "Travel Center";
                case 90: display = "Dairy";
                case 91: display = "Frozen Foods";
                case 92: display = "Grocery";
                case 93: display = "Meats";
                case 94: display = "Produce";
                case 95: display = "DSD Grocery";
                case 96: display = "Liqour";
                case 97: display = "Processed Meats";
                case 98: display = "Bakery";
                case 99: display = "Store Use";
                }
                {
                if (name.equals("Electronics"))
                {
                    display = "5";
                }
                else if (name.equals("candy"))
                {
                    display=("1");
                }
                else if (name.equals("Tobacco"))
                {
                    display=("1");
                }
                else if (name.equals("Makeup"))
                {
                    display=("2");
                }
                else if (name.equals("Stationary"))
                {
                    display=("3");
                }
                else if (name == "Books")
                {
                    display=("3");
                }
                else if (name == "Napkins")
                {
                    display=("4");
                }
                else if (name == "Paper Plates")
                {
                    display=("4");
                }
                else if (name == "Paper")
                {
                    display=("4");
                }
                else if (name == "Video Games")
                {
                    display=("5");
                }
                else if (name == "Movies")
                {
                    display=("5");
                }
                else if (name == "Cameras")
                {
                    display=("6");
                }
                else if (name == "Film")
                {
                    display=("6");
                }
                else if (name == "Photo")
                {
                    display=("6");
                }
                else if (name == "Toys")
                {
                    display=("7");
                }
                else if (name == "Fishing Rods")
                {
                    display=("9");
                }
                else if (name == "Sporting Equipment")
                {
                    display=("9");
                }
                else if (name == "Sporting Goods")
                {
                    display=("9");
                }
                else if (name == "Car Stereos")
                {
                    display=("10");
                }
                else if (name == "Automotive")
                {
                    display=("10");
                }
                else if (name == "Tools")
                {
                    display=("11");
                }
                else if (name == "Heaters")
                {
                    display=("11");
                }
                else if (name == "Fans")
                {
                    display=("11");
                }
                else if (name == "Hardware")
                {
                    display=("11");
                }
                else if (name == "Paint")
                {
                    display=("12");
                }
                else if (name == "Bleach")
                {
                    display=("13");
                }
                else if (name == "Ammonia")
                {
                    display=("13");
                }
                else if (name == "Chemicals")
                {
                    display=("13");
                }
                else if (name == "Towels")
                {
                    display=("14");
                }
                else if (name == "Kitchen Accessories")
                {
                    display=("14");
                }
                else if (name == "Towels")
                {
                    display=("14");
                }
                else if (name == "Appliances")
                {
                    display=("15");
                }
                else if (name == "Plants")
                {
                    display=("16");
                }
                else if (name == "Grills")
                {
                    display=("16");
                }
                else if (name == "Lawn & Garden")
                {
                    display=("16");
                }
                else if (name == "Furniture")
                {
                    display=("17");
                }
                else if (name == "Seasonal")
                {
                    display=("18");
                }
                else if (name == "Fabrics and Crafts")
                {
                    display=("19");
                }
                else if (name == "Domestics")
                {
                    display=("20");
                }
                else if (name == "Curtains")
                {
                    display=("21");
                }
                else if (name == "Bedding")
                {
                    display=("22");
                }
                else if (name == "Mens")
                {
                    display=("23");
                }
                else if (name == "Boys")
                {
                    display=("24");
                }
                else if (name == "Shoes")
                {
                    display=("25");
                }
                else if (name == "Infants")
                {
                    display=("26");
                }
                else if (name == "Ladies Socks")
                {
                    display=("27");
                }
                else if (name == "Pantyhose")
                {
                    display=("28");
                }
                else if (name == "Lingerie")
                {
                    display=("29");
                }
                else if (name == "Purses")
                {
                    display=("31");
                }
                else if (name == "Handbags")
                {
                    display=("31");
                }
                else if (name == "Jewelry")
                {
                    display=("32");
                }
                else if (name == "Girls")
                {
                    display=("33");
                }
                else if (name == "Maternity")
                {
                    display=("35");
                }
                else if (name == "Outerwear")
                {
                    display=("36");
                }

                else if (name == "Pharmacy")
                {
                    display=("40");

                }
                else if (name == "Cosmetics")
                {
                    display=("46");
                }
                else if (name == "Optical")
                {
                    display=("49");
                }

                else if (name == "Large Appliances")
                {
                    display=("77");
                }
                else if (name == "Deli")
                {
                    display=("80");
                }
                else if (name == "Bread")
                {
                    display=("81");
                }
                else if (name == "Seafood")
                {
                    display=("83");
                }
                else if (name == "Floral")
                {
                    display=("84");
                }
                else if (name == "One Hour Photo")
                {
                    display=("85");
                }
                else if (name == "Fresh Flowers")
                {
                    display=("86");

                }
                else if (name == "Cell Phones")
                {
                    display=("87");
                }
                else if (name == "Travel Center")
                {
                    display=("89");
                }
                else if (name == "Luggage")
                {
                    display=("89");
                }
                else if (name == "Dairy")
                {
                    display=("90");
                }
                else if (name == "Milk")
                {
                    display=("90");
                }
                else if (name == "Frozen Foods")
                {
                    display=("91");
                }
                else if (name == "Frozen")
                {
                    display=("91");
                }
                else if (name == "Grocery")
                {
                    display=("92");
                }
                else if (name == "Meats")
                {
                    display=("93");
                }
                else if (name == "Produce")
                {
                    display=("94");
                }
                else if (name == "Liquor")
                {
                    display=("96");
                }
                else if (name == "Bakery")
                {
                    display=("98");
                }

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T17:59:49.277

我已在此处修复了您的格式问题：http: [//pastebin.com/YijryAPK](http://pastebin.com/YijryAPK) 请注意，由于 Java 的错误使用，错误仍然存​​在。不能用于除and`switch`以外的任何东西。此外，当您将两者设置在底部时，您没有定义名为“et”的视图。`int``enum``OnClickListeners`

# ruby-on-rails - FasterCSV 用逗号导入小数和整数？

> ID：10303106
> 
> 赞同：2
> 
> 时间：2012-04-24T17:39:30.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 FasterCSV 导入一些非常重要的金融数据，并注意到一些整数和十进制值被错误地导入，因为它们来自保存为 CSV 的 Excel 工作表，因此添加了逗号，例如“1,193”被导入为 1。对于字符串，它按预期处理导入。

我可以在我的 FasterCSV 脚本中做些什么来解析逗号，然后再导入整数和小数列？我需要保留原样的字符串。

处理导入的第一行如下：

```
 FasterCSV.parse(uploaded_io, {:headers => true, :quote_char => '"', :col_sep => ','}).each do |row_data| 
```

有什么我可以与 :quote_char 和 :col_sep 一起添加的吗？

我在开发中导入 MySQL，在生产中导入 PostgreSQL。

提前致谢！

编辑：显然，我可以在保存 CSV 之前在 Excel 中格式化数字，但这不切实际。

# tridion - Tridion 2009 SP1：Dreamweaver 模板错误：ConvertURLToPath() 无法解码 URL：无效转义

> ID：10303109
> 
> 赞同：3
> 
> 时间：2012-04-24T17:39:40.373
> 
> 标签：tridion, dreamweaver-templates

我正在尝试在 Dreamweaver 模板中使用 Get Label TBB 来解析表达式，`%%LabelKey%%`并将其替换为存储在发布元数据中的组件中的值。

我正在尝试使用标签来存储绝对 URL（例如[http://www.example.com](http://www.example.com)）但是在尝试运行模板时在模板生成器中得到以下内容

> 错误：ConvertURLToPath() 无法解码 URL：无效转义

DWT 代码类似于：

```
<a href="%%LogoLink%%" target="_blank" title="%%LogoLinkTitle%%" class="logo">
    <img src="@@Page.Publication.Metadata.parent_logo@@" width="95" height="24"
         alt="@@parent_logo0.alt@@">
</a> 
```

问题是由`%%LogoLink%%`. 如果我删除该模板可以正常工作。为什么 Tridion 试图用这个值做一些事情？我认为它只会尝试解决它，如果它是`tridion:href`。

任何帮助表示赞赏。

完整的堆栈跟踪：

> 引擎：Engine.Transform 中的错误 错误：ConvertURLToPath() 无法解码 URL：Tridion.ContentManager.Session.GetTcmUri(String uri) 在 Tridion.ContentManager.Session.GetObject(String uri) 在 Tridion.ContentManager.Session 的无效转义.IsExistingObject(String uri) 在 Tridion.ContentManager.Templating.Engine.GetObject(Session session, String itemUriOrWebDavUrl) 在 Tridion.ContentManager.Templating.Engine.GetObject(String itemUriOrWebDavUrl) 在 Tridion.ContentManager.Templating.Templates.ExtractBinariesFromHtmlTemplate.ResolveWebDavUrl( Tridion.ContentManager.Templating.Templates.ExtractBinariesFromHtmlTemplate.ResolveTemplateBinaries(Engine engine, Package package, TcmUri baseItemTcmUri, String urlToResolve, String webDavBaseUrl, Engine engine)ExtractBinariesContentWrapper contentWrapper) 在 Tridion.ContentManager.Templating.Templates.ExtractBinariesFromHtmlTemplate.Transform(Engine engine, Package package) 在 Tridion.ContentManager.Templating.Dreamweaver.DreamweaverMediator.RegisterTemplateBinaries(Package package, String baseItemTcmUri, String templateString) 在 Tridion.ContentManager.Templating .Dreamweaver.DreamweaverMediator.Transform(Engine engine, Template templateToTransform, Package package) at Tridion.ContentManager.Templating.Engine.ExecuteTemplate(Template template, Package package) at Tridion.ContentManager.Templating.Engine.InvokeTemplate(Package package, TemplateInvocation templateInvocation,模板模板）包包）在 Tridion.ContentManager.Templating.Dreamweaver.DreamweaverMediator.RegisterTemplateBinaries（包包，字符串 baseItemTcmUri，字符串模板字符串）在 Tridion.ContentManager.Templating.Dreamweaver.DreamweaverMediator.Transform（引擎引擎，模板 templateToTransform，包包）在 Tridion。 Tridion.ContentManager.Templating.Engine.InvokeTemplate（包包，TemplateInvocation templateInvocation，模板模板）的 ContentManager.Templating.Engine.ExecuteTemplate（模板模板，包包）包包）在 Tridion.ContentManager.Templating.Dreamweaver.DreamweaverMediator.RegisterTemplateBinaries（包包，字符串 baseItemTcmUri，字符串模板字符串）在 Tridion.ContentManager.Templating.Dreamweaver.DreamweaverMediator.Transform（引擎引擎，模板 templateToTransform，包包）在 Tridion。 Tridion.ContentManager.Templating.Engine.InvokeTemplate（包包，TemplateInvocation templateInvocation，模板模板）的 ContentManager.Templating.Engine.ExecuteTemplate（模板模板，包包）Tridion.ContentManager.Templating.Engine.ExecuteTemplate（模板模板，包包）处的模板 templateToTransform，包包） Tridion.ContentManager.Templating.Engine.InvokeTemplate（包包，模板调用模板调用，模板模板）Tridion.ContentManager.Templating.Engine.ExecuteTemplate（模板模板，包包）处的模板 templateToTransform，包包） Tridion.ContentManager.Templating.Engine.InvokeTemplate（包包，模板调用模板调用，模板模板）
> 在 Tridion.ContentManager.Templating.Compound.CompoundTemplateMediator.Transform（引擎引擎，模板 templateToTransform，包包）在 Tridion.ContentManager.Templating.Engine.ExecuteTemplate（模板模板，包包）在 Tridion.ContentManager.Templating.Engine.InvokeTemplate（包包，TemplateInvocation templateInvocation，模板模板）
> 在 Tridion.ContentManager.Templating.Engine.TransformPackage（模板模板，包包）在 Tridion.ContentManager.Templating.Engine.TransformItem（模板模板，IdentifiableObject itemToRender）在 Tridion.ContentManager.Templating。
> Tridion.ContentManager.Templating.Debugging.DebugSession.Run() 上的 Debugging.DebuggingEngine.Run( )

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T17:49:27.533

当您上传 DWT 时，Tridion 会尝试将`<img src=...`DWT 中的内容映射到多媒体组件。需要此步骤以确保 DWT 与 BluePrinting（需要将值存储为 TCM URI）一起正常工作**，**并且在 Dreamweaver（需要文件路径）中始终可见。

为了进行这种映射，Tridion 采用任何属性（以及任何 CSS 导入或`src`构造）中的路径，并在该位置相对于 DWT 查找多媒体组件。`href``url()`

因此，如果存储在 DWT 下`/Building Blocks/System/Designs/My Page Design`并且它包含：

```
<img src="../Images/MyHeader.jpg"></img> 
```

然后 Tridion 将查找一个名为的多媒体组件，如果找到匹配项，则`/Building Blocks/System/Images/MyHeader.jpg`替换该值：`src`

```
<img src="tcm:1-23"></img> 
```

在您的 DWT 中，这`%%LogoLink%%`会导致问题，因为它看起来像是经过 URL 编码的（% 符号在 URL 中用作转义字符），但实际上并非如此。

大多数遇到类似问题的人最终会在他们的 DWT 中使用备用转义序列，并编写一个小的后处理 TBB，在 DWT 执行后将该转义序列转换回 %%。在您的情况下，只需选择一个不冲突的转义语法就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T18:22:46.693

@Puf 给出的答案很好地解释了代码失败的原因。作为一种替代方法，您可以考虑编写一个 C# TBB，将 StringItems 插入名为“LogoLink”和“LogoLinkTitle”的包中，其中包含您的 URL 和文本。然后，您可以在管道中的 DWT 之前使用新的 TBB，然后使用标准 DWT 语法插入值，如下所示：

```
 <a href="@@LogoLink@@" target="_blank" title="@@LogoLinkTitle@@" class="logo">
     <img src="@@Page.Publication.Metadata.parent_logo@@" width="95" height="24" alt="@@parent_logo0.alt@@">
 </a> 
```

Perhaps there is a reason you have not done this, in which case go with Franks solution.

# java - 在 CardLayout 等中重用带有 actionlistener 的动态 JList

> ID：10303111
> 
> 赞同：2
> 
> 时间：2012-04-24T17:39:44.540
> 
> 标签：java, swing, jlist, cardlayout

我正在动态创建一个 JList，我想在不同的 JPanel 上使用它，在那里我可以调用 setQuery(query); 在上面。也有一个 Search Button + 字段连接到它。有没有办法将 JList、搜索按钮和搜索字段放在 10 个不同的面板上，而不必到处复制代码？我不能将它放在单独的 JPanel 上，因为它周围还有其他按钮/gui 元素，具体取决于所显示的 JPanel。我到处寻找，但没有太多提及重用动态 JList。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T17:41:59.677

您只能将组件放置在一个可视化容器中。考虑创建一个为您创建这些组件的方法，该方法返回一个包含组件的 JPanel，并且可能所有创建的 JList 共享相同的 ListModel，所有 JButton 共享相同的 AbstractAction。

或者另一种选择，如果您使用 CardLayout 来交换 JPanel，并且您希望所有面板都包含上面的这些组件，请考虑不这样做，而是将 JList、JButton 和 JTextField 移出卡片并移到动态较少的部分你的图形用户界面。

另外，我不清楚：

> 我不能将它放在单独的 JPanel 上，因为它周围还有其他按钮/gui 元素，具体取决于所显示的 JPanel。

请澄清并告诉我们更多信息。图片也可能有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T23:15:45.423

Also consider the [*decorator pattern*](http://en.wikipedia.org/wiki/Decorator_pattern) Your list/search panel would be the main component, while the variations would result from decorating the original.

# javascript - 我正在制作浏览器内的单色 LED 显示屏。我应该使用 或者 s 来显示 LED？

> ID：10303114
> 
> 赞同：3
> 
> 时间：2012-04-24T17:40:01.423
> 
> 标签：javascript, css, html, canvas

我正在制作一个单色的浏览器内“LED”显示屏。它应该有一个由 33 x 278 个“LED”组成的矩阵，每个 LED 都是 3 x 3 个“真实”像素。它将用于以 HH:MM 格式显示进度条和当前时间，或以“NN days”格式显示剩余天数。它也将是可调节的（用户将能够设置时间）。

我看到两种方法可以做到这一点：

1.  使用`<canvas>`并绘制“LED”。
2.  `<div>`为每个“LED”使用一个。我觉得我可以更好地控制每个“LED”，但几乎 10 000`div`秒的想法让我有些害怕。

我想知道哪种方法更可取以及为什么。或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T17:43:11.000

10,000 个 div*应该*会吓到你。这些中的每一个，尽管只是一个很小的像素，将由浏览器存储，其中包含许多未定义的 html 属性以及内部浏览器属性，它们都占用内存。此外，每个 div 都需要由浏览器“流动”或以图形方式定位，从而花费计算时间。

对于像素级可修改图形，您应该使用 a `canvas`，这是它们的设计和优化目的。

这是一个在画布上随机绘制 3x3“像素”的快速`canvas`演示：

[http://jsfiddle.net/jtbowden/feusZ/](http://jsfiddle.net/jtbowden/feusZ/)

这真的不是那么多代码，也不是太难。一旦你有了一个`setPixel`函数，剩下的就是你想要对像素做的事情的实现。

这是一个显示尺寸的版本，它会自动读取画布尺寸：

[http://jsfiddle.net/jtbowden/9jQf4/](http://jsfiddle.net/jtbowden/9jQf4/)

还有许多其他方法可以做到这一点，例如操纵单个像素或绘制非常短的线。

# ios - 是否可以在不使用 Xcode 编写任何代码的情况下制作一个测验应用程序？

> ID：10303115
> 
> 赞同：-1
> 
> 时间：2012-04-24T17:40:02.797
> 
> 标签：ios, xcode

是否可以在完全不使用 Xcode 编写任何代码的情况下制作一个测验应用程序，只使用故事板功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T17:53:09.213

[故事板：](http://developer.apple.com/library/ios/#documentation/General/Conceptual/Devpedia-CocoaApp/Storyboard.html)

> 故事板是 iOS 应用程序用户界面的可视化表示，显示内容屏幕以及这些屏幕之间的连接。故事板由一系列场景组成，每个场景代表一个视图控制器及其视图；场景由 segue 对象连接，这些对象表示两个视图控制器之间的转换。

没有逻辑，您将无法创造任何有用或引人入胜的东西。你会如何计算分数？跟踪结果/改进？将问题随机化以防止用户只记住答案？我能想到的唯一一种测验/游戏可能只使用故事板来创建一个带有一些文本的视图，上面写着“你通过了”，然后创建带有问题和按钮的其他静态视图。当用户为答案选择正确的按钮时，然后转到下一个问题，否则转到“您失败”视图。这将要求用户必须正确回答所有问题才能通过。

**更新：**

[在GitHub 上](https://github.com/JHumphreyJr/CodelessQuiz)添加了一个仅在情节提要中进行的简单测验的示例。您会注意到由于没有添加代码，导航很糟糕。

# jquery - jQuery 选择的插件样式不正确。很小

> ID：10303120
> 
> 赞同：2
> 
> 时间：2012-04-24T17:40:16.037
> 
> 标签：jquery, asp.net-mvc-3, jquery-chosen

我之前已经实现了 Chosen，但是我在尝试让它在 MVC 3 中工作时遇到了一个问题。我不知道是什么原因造成的，但是元素呈现得很窄，我不知道为什么。我看了一遍，我无法弄清楚，我觉得我正在服用疯狂的药丸！谢谢！

![这是一个截图](../Images/44903ad5a2e3ed8873ba72687236ba36.png)

这是我的代码：

cshtml:

```
div id="ProducerData" style="display: none;">
                <h2>
                    Winery Information</h2>

                @Html.DropDownListFor(m => m.Producer.ProducerID, new SelectList(Model.Producers, "ProducerID", "Name"), "Please select a producer")
                <input type="button" id="btnNewProdcue" value="New Producer?" onclick="NewProducer(); return false;" />
                <table id="ProducerDataTable"> 
```

js：

```
$(document).ready(function () {

        SlideWidth = 650;
        SlideSpeed = 500;
        InitTab();

        $("#ProducerDataTable input[type=text]").addClass("DisabledTextInput");
        $("#ProducerDataTable input[type=text]").attr("disabled", true);

        $("#Producer_ProducerID").change(OnProducerChange);
        $("#UserTypes img").click(OnUserTypeClick);
        $("#UserObj_Country").change(OnCountryChange);
        $(".state").change(OnStateChange);
        SetNavigationDisplay();
        $("#UserObj_Phone").live("keypress", function (e) {
            if (e.which === 0) {
                e.preventDefault();
            }
        });

        $("#Producer_ProducerID").chosen();
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-17T20:58:09.820

代替

```
$("#Producer_ProducerID").chosen(); 
```

和

```
var opts = {};
if (!$("#Producer_ProducerID").is(':visible')) {
     opts["width"] = 'auto';
}
$("#Producer_ProducerID").chosen(opts); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-19T17:56:28.370

我以前遇到过这个问题。这种`display: none;"`风格就是问题所在。您应该将其从 div 中删除，因为当页面呈现时， selected 会忽略未显示的元素。因此它不会产生它应该产生的东西。尝试在页面加载后隐藏该元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-06T13:26:15.527

就我而言，我`display: inline-block;`从`.chosen-container`selected.css 文件中删除并解决了这个问题。

# java - 如何捕捉 WizardPage 的首次显示

> ID：10303123
> 
> 赞同：5
> 
> 时间：2012-04-24T17:40:25.693
> 
> 标签：java, eclipse-plugin, swt, wizard

我正在为 Eclipse 编写一个带有一些页面的小向导，我需要捕捉第一次页面显示的时刻。

我检查了构造函数，`createControl`但它们在`Wizard`对象（`addPages`）的创建时刻被调用。

有没有办法得到我需要的东西？也许有人知道一些技巧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T18:12:00.987

您可以在 WizardPage 中覆盖 setVisible(boolean) 方法。因此，例如使用类似的东西：

```
private boolean initialized = false;

@Override
public void setVisible(boolean visible) {
    if (!initialized && visible) {
        //do something
        initialized = true;
    }
    control.setVisible(visible);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T17:51:00.617

您可以使用在[WizardDialog](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjface%2Fwizard%2FWizardDialog.html)上注册的a`IPageChangedListener`或 a 。当向导的当前页面发生更改时，他们将收到通知。`IpageChangingListener`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-08T09:53:45.113

我更喜欢在第一次绘画后移除监听器。这样，您就不需要额外的布尔字段，并且您避免了不必要的调用 paintControl 并每次检查该布尔值。

```
container.addPaintListener(new PaintListener()
{
    @Override
    public void paintControl(PaintEvent e)
    {
        doUsefulStuff();
        container.removePaintListener(this);
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T13:42:18.550

好的，我为绘画事件创建了一个侦听器并使用了一个`m_isFirsTime`从 Wizard 类控制的标志：

```
public void createControl(Composite parent) {
    Composite container = new Composite(parent, SWT.NONE);

    setControl(container);
    container.addPaintListener(new PaintListener() {
        @Override
        public void paintControl(PaintEvent arg0) {
            if (m_isFirstTime) {
                m_isFirstTime = false;
                StartXMLParsing();
            }
        }
    });
...
} 
```

对我来说没问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-24T11:32:18.367

控件创建后执行异步 UI 任务，其中可以执行长初始化操作。UI 已经创建并在 Runnable 启动时显示，因此向导会立即出现，用户可以看到初始化进度：

```
public void createControl(Composite parent) {
    // create controls
    getContainer().getShell().getDisplay().asyncExec(new Runnable() {
        @Override
        public void run() {
            try {
                getContainer().run(false, false, new IRunnableWithProgress() {
                    @Override
                    public void run(IProgressMonitor arg0) throws InvocationTargetException, InterruptedException {
                        // init and validate controls here
                    }
                });
            } catch (InvocationTargetException e) {
                // handle e.getCause();
            } catch (InterruptedException e) {
                // nothing
            }
        }
    });
} 
```

# php - 如何在coldfusion 8中运行php脚本-内联和htdocs文件夹？

> ID：10303124
> 
> 赞同：1
> 
> 时间：2012-04-24T17:41:03.687
> 
> 标签：php, apache, coldfusion, coldfusion-8

可能在这里越界了...我正在开发一个运行 Coldfusion8 的系统。

系统中还有一些 PHP 脚本正在运行，我无法在我的本地主机上进行设置（新手...）

我有**Apache 2.2**和**Coldfusion8**和**MySQL 5.5**工作。**PHP 5.2**已安装，但是……死了……

现在我正在修改[这里](http://scripting.riaforge.org/wiki/index.cfm/UsingPHPInColdFusion)的自定义标签，我设法内联运行（[这里](http://scripting.riaforge.org/wiki/index.cfm/UsingPHPInColdFusion)是伟大的帮助文件）但这只会让我走到终点线的一半=它只适用于页面。

我正在寻找一种方法来运行位于我的 Apache-htdocs 文件夹中的 php 文件。我可以从 .htaccess 调用脚本，但实际上什么也没发生。这是电话：

```
<IfModule mod_rewrite.c>
   Options +FollowSymlinks
   RewriteEngine On

   # Block
   RewriteCond %{REQUEST_URI} !assets
   RewriteCond %{REQUEST_URI} !ai-cache

   # Redirect to PHP
   RewriteRule \.(?:jpe?g|gif|png)$ script.php

</IfModule> 
```

**问题：**
谁能告诉我这是否可能以及我将如何去做？一个不会强迫我卸载并重新安装所有东西的解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:36:34.927

从标准 Lamp 堆栈开始，并确保 apache 正在运行您的 PHP 脚本。然后正确安装CF...完成。或者，如果已安装 CF，则运行“连接器”脚本（通常位于 /bin/connectors 目录中）。

# google-drive-api - Google Drive API 如何支持 Content-Range 的下载请求？

> ID：10303126
> 
> 赞同：5
> 
> 时间：2012-04-24T17:41:05.583
> 
> 标签：google-drive-api

Google Drive API 如何支持获取 Content-Range 请求？App Engine 获取请求大小有限制。请支持范围请求，以便可以读取大文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T18:03:54.347

您可以提供 Range: 标头，例如：

```
Range: bytes=5-12 
```

仅下载所需的字节，在本例中为 5-12。请参阅[有关下载的其他文档](https://developers.google.com/google-apps/documents-list/#downloading_documents_and_files)。

# mercurial - 如何在 Mercurial 中确定是否已移植修订指定的变更集？

> ID：10303135
> 
> 赞同：7
> 
> 时间：2012-04-24T17:41:33.530
> 
> 标签：mercurial

如果变更集已经在 branchX 和 default 之间移植，我如何查看？我知道，hg 嫁接会帮我检查这个，我不能嫁接两次，但我想列出所有未在 branchX 和默认值之间嫁接的变更集。提前感谢您的回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T21:21:52.733

此信息存储在嫁接变更集中所谓的“额外”字典中。这是一个简单的键值映射，您可以使用`hg log --debug`.

不幸的是，该信息尚未作为 revset 谓词公开，因此您必须以老式方式进行操作：从

```
$ hg --debug log -b branchX 
```

获取变更集`branchX`。然后`grep`或以其他方式搜索匹配的行

```
extra:       source=[0-9a-f]{40} 
```

如果您想要更高级别的访问权限，可以使用[Mercurial 绑定。](http://mercurial.selenic.com/wiki/CommandServer#Libraries)目前有 Java、Python 和 Scala 的库。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-12T02:07:49.120

如果您有 Mercurial 2.3 或更高版本，则可以使用 revset 来执行此操作：

```
$ hg log -r "destination()" 
```

获取作为移植目标的所有变更集的列表。你也可以这样做：

```
$ hg log -r "origin()" 
```

获取所有移植起源的变更集的列表。这些修订集都将另一个修订集作为参数，因此您可以使用可组合修订集的全部功能来深入搜索。

# vb.net - 我需要 VB 中的等待命令

> ID：10303136
> 
> 赞同：2
> 
> 时间：2012-04-24T17:41:34.590
> 
> 标签：vb.net

您好，我在 VB 中编写代码以向 cygwin 终端发送命令，我希望代码等待第一个命令等到第一个命令被执行（或等待大约 2 分钟），然后继续执行下一个命令，a 部分代码：

```
Shell("C:\cygwin\bin\mintty.exe")
SendKeys.Send("tracert -h  " & _h & " " & domain.Text & " > temp1.txt{ENTER}") 
```

程序应该在这里等待 2 分钟，然后继续执行下一个命令，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:00:31.133

尝试这个：

```
System.Threading.Thread.Sleep(120000) 
```

该值以毫秒为单位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:48:25.690

您需要添加：

```
Wscript.Sleep 120000 
```

# android - 如何在 Android 手机中制作我自己的自定义拨号器

> ID：10303138
> 
> 赞同：9
> 
> 时间：2012-04-24T17:41:39.100
> 
> 标签：android, android-layout, android-intent

在我的应用程序中，我添加了一个意图，以便用户可以调用：

```
str="tel:"+phoneArray[11];  
Intent intent = new Intent(Intent.ACTION_CALL);
intent.setData(Uri.parse(str));
startActivity(intent); 
```

然后它从 Android 手机调用，但我想设置另一个外观不同的自定义拨号器。需要做什么？我不是说如何设计拨号器，而只是如何制作一个可以输入号码并执行呼叫的 UI。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T17:47:03.450

创建一个响应`Intent.ACTION_DIAL`. 在`AndroidManifest.xml`您需要将以下内容添加到该活动中：

```
<intent-filter>
    <action android:name="android.intent.action.DIAL" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

您可以参考[官方手机应用程序](https://github.com/android/platform_packages_apps_phone)。但请注意，这不是一项简单的任务。

你只能用这种方式更换拨号器。实际调用的东西（你在调用过程中看到的）不能改变。

有关详细信息，请参阅 Stack Overflow 问题*[Android dialer application](https://stackoverflow.com/questions/5029183/android-dialer-application)*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-07T18:06:23.180

如果您想完全替换现有的电话拨号器并从您的应用程序中管理呼叫，那么答案是，除了在更改 android 源代码后用您自己的替换默认拨号器后构建的自定义 ROM 之外，这是无法完成的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-21T08:19:11.697

您可以在实际电话呼叫出现时对其进行叠加。有很多这样的手机皮肤应用

# java - 如何在java中上传到图像托管站点？

> ID：10303139
> 
> 赞同：-3
> 
> 时间：2012-04-24T17:41:41.080
> 
> 标签：java, upload, image-uploading

我正在尝试将图像上传到图像托管站点 (fastpic.ru)，但我无法得到预期的正确响应。我用提琴手检查我是否会发送正确的参数，一切似乎都很好，但我无法得到正确的回应。您能指导我如何以正确的方式上传和获得回复吗？

正确的回应我的意思是我应该收到类似[http://fastpic.ru/session/2012/0425/Y6sEtGjtT1.html](http://fastpic.ru/session/2012/0425/Y6sEtGjtT1.html)但我只收到[http://fastpic.ru/index.php](http://fastpic.ru/index.php)

谢谢

这是我的代码

```
 String urlToConnect = "http://fastpic.ru/uploadmulti";
    String boundary = Long.toHexString(System.currentTimeMillis()); // Generate random boundary
    URLConnection connection = new URL(urlToConnect).openConnection();
    connection.setDoOutput(true); // This sets request method to POST.
    connection.setRequestProperty("Content-Type", "multipart/form-data; boundary=" + boundary);
    OutputStream output = null;
    PrintWriter writer = null;
    try {
        output = connection.getOutputStream();
        writer = new PrintWriter(new OutputStreamWriter(output, "UTF-8"), true); // true = Autoflush, important!

        writer.println("-----------------------------" + boundary);
        writer.println("Content-Disposition: form-data; name=\"file[]\"; filename=\"" + fileToUpload.getName() + "\"");
        writer.println("Content-Type: image/jpeg");
        writer.println();
        InputStream input = null;
        try {
            input = new FileInputStream(fileToUpload);
            byte[] buffer = new byte[1024];
            for (int length = 0; (length = input.read(buffer)) > 0;) {
                output.write(buffer, 0, length);
            }
            output.flush();
        } finally {
            if (input != null) {
                try {
                    input.close();
                } catch (IOException logOrIgnore) {
                }
            }
        }
        writer.println();

        writer.println("-----------------------------" + boundary);
        writer.println("Content-Disposition: form-data; name=\"submit\"");
        writer.println();
        writer.println("Загрузить");

        writer.println("-----------------------------" + boundary);
        writer.println("Content-Disposition: form-data; name=\"uploading\"");
        writer.println();
        writer.println("1");
        writer.println("-----------------------------" + boundary + "--");

    } finally {
        if (writer != null) {
            writer.close();
        }
    }

    BufferedReader in = new BufferedReader(
                                new InputStreamReader(
                                connection.getInputStream()));
    String decodedString;
    while ((decodedString = in.readLine()) != null) {
        System.out.println(decodedString);
    }
    in.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T06:06:27.007

如果它没有返回正确的输出，则输入可能有问题。

我建议使用 Apache HTTP 组件，例如`MultipartEntity`在[http://hc.apache.org/httpcomponents-client-ga/httpmime/apidocs/org/apache/http/entity/mime/MultipartEntity.html](http://hc.apache.org/httpcomponents-client-ga/httpmime/apidocs/org/apache/http/entity/mime/MultipartEntity.html)发布这种数据。如果您尝试手动对数据进行编码，很容易犯一个简单的错误，从而导致整个事情停止工作。有很多使用 Apache 组件的示例，而且使用起来非常简单。

# javascript - 使用 JavaScript 使图像保持循环并再次显示

> ID：10303141
> 
> 赞同：0
> 
> 时间：2012-04-24T17:41:42.243
> 
> 标签：javascript

[http://jsfiddle.net/NCt4D/8/](http://jsfiddle.net/NCt4D/8/) 是我目前得到的。加载的图像很大：

在它滚动到最后一个 iphone 屏幕截图后，它会停止。我希望它继续，所以它又从头开始显示。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:54:54.193

对于初学者，您正在比较滚动**“左”**与“偏移”“**高度**”和“滚动”“**高度**” 。将它们更改为**Width**。

接下来，如果当前滚动位置**小于**最大值，则将滚动位置返回 0。所以在第一步，位置是 1，这显然小于最大值，所以它跳回到零。结果：你哪儿也不去。尝试**大于**而不是。

代码还有其他一些问题，但它们只是优化。以上两点是您的代码的主要问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:57:47.997

[jQuery Cycle Plugin](http://jquery.malsup.com/cycle/begin.html)应该是一个好的开始。

# jquery - 使用 jquery ui 可拖动 jquery iframe 内容不拖动

> ID：10303146
> 
> 赞同：0
> 
> 时间：2012-04-24T17:42:00.907
> 
> 标签：jquery

是否可以将 Jquery UI 可拖动功能应用于 iframe 内容，因此我们可以将其拖动到 iframe 中。如果是，那么如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:44:05.393

快速回答是否定的：http: [//jsfiddle.net/8NN9Y/14/](http://jsfiddle.net/8NN9Y/14/)

考虑使用另一个标签，例如 div

[http://jsfiddle.net/8NN9Y/15/](http://jsfiddle.net/8NN9Y/15/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:22:59.930

我知道这已经很晚了，但它可能会帮助其他偶然发现这篇文章的人。如果我理解正确，您想在 iframe 中拖动 iframe 的内容*吗*？这应该是可能的 - 但您需要将相关的 javascript 库包含到 iframe 中的脚本*中*- 而不是父级。所以在这个例子中......

```
<iframe src="contentIwantToDrag.html"></frame> 
```

您的页面`contentIwantToDrag.html`应该包含 jQuery 和 UI 库。

如果您想将 iframe 内部的项目拖到父元素中，那么据我所知这是不可能的。

# algorithm - 检查以一元/二进制编码时数字是否为素数

> ID：10303147
> 
> 赞同：0
> 
> 时间：2012-04-24T17:42:07.070
> 
> 标签：algorithm, primes

以下算法检查数字是否为素数：

```
Given a number n,loop over all numbers smaller than n and check whether they divide n. 
If one of them divides n, answer no. Otherwise, answer yes. 
```

现在，我必须在以下两种情况下分析算法执行的除法运算次数与其输入长度的函数关系：

1）数字以一元编码（即4为1111）。如何证明除数是多项式的？

2）数字以二进制编码（即4为100）。我如何证明划分的数量是指数的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:03:52.170

假设我们将`n` `1`' 串在一起（标记为`1^n`）。 `n`显然是我们输入的长度。我们将把`11`, `111`, ... 中的所有整数`1^(n-1)`分成`1^n`. `1^n`作为 的函数，您将分成多少个数字`n`？这是多项式吗？

请注意，用二进制表示大约需要`log_2(x)`(log base 2 of `x`) 位。`x`另请注意，我们将执行`x-2`除法（`2`, `3`, `4`, `5`, ... ，`x-1`将分为`x`）。因此，对于`log_2(x)`位，我们使用`x-2`除法。相反，假设我们让`n`成为输入的大小。所以我们有`n = log_2(x)`. 那么，根据 的函数，我们将进行多少次划分`n`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:45:24.477

暗示：

将问题大小定义`n`为数字的（二进制|一元）表示中的位数。

现在考虑可以用数字编码多少个不同的`n`数字。

# visual-studio-2010 - 如何在 VC++ 中正确包含 .h 文件？

> ID：10303154
> 
> 赞同：0
> 
> 时间：2012-04-24T17:42:44.980
> 
> 标签：visual-studio-2010, c++-cli

我有一个非常简单的 C++/CLI 窗体程序，它 100% 可以正常工作。

由于我想在单击窗口窗体上的按钮时添加呼叫 Internet Explorer，因此我添加了“一行代码”以进行测试。

**我在#pragma once**下添加**#include "Shellapi.h"**。之后，VS 给了我 500 行错误信息。

 **我的问题是我只是在我的程序中添加了一个 .h 文件。为什么会有什么问题？我错过了什么吗？

===========错误信息的前几行===============

```
1>C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\Shellapi.h(56): error C2065: 'HDROP' : undeclared identifier
1>C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\Shellapi.h(56): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\Shellapi.h(59): error C2146: syntax error : missing ';' before identifier 'DECLSPEC_IMPORT'
1>C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\Shellapi.h(59): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\Shellapi.h(59): error C2146: syntax error : missing ';' before identifier 'UINT'
1>C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\Shellapi.h(59): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\Shellapi.h(59): error C2146: syntax error : missing ';' before identifier 'STDAPICALLTYPE'
1>C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\Shellapi.h(59): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:51:55.160

几件事：

1.  您应该`#include <windows.h>`在任何 Windows 程序中

2.  您应该包含任何系统文件 - 例如 shellapi.h - 使用方括号 ( `<>`) 而不是引号 ( `""`)，例如`#include <shellapi.h>`

3.  如果您从命令行编译，最好运行“vcvars32.bat”（或等效文件）来为 Visual Studio 设置命令行环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:49:11.063

***我相信你之前***忘记了`#include <windows.h>` *`#include <shellapi.h>`*

 *一般来说，（或至少在我个人的经验中），当你在包含一个标题后被一堵错误的墙轰炸时，你的缺失`<windows.h>`或其他一些标题。***

# ios - 如果服务器具有受信任的证书，需要哪些步骤才能使用 NSURLConnection 在 IOS 上点击该链接？

> ID：10303163
> 
> 赞同：1
> 
> 时间：2012-04-24T17:43:23.323
> 
> 标签：ios, nsurlconnection

我正在处理的应用程序需要通过 https 连接到 Web 服务，该证书是受信任且有效的。

我用过 NSURLConnection 是以前的项目在 http 上使用soap

谁能指出上述两种情况之间的区别，我还需要了解通过 https 连接时到底发生了什么，证书是否自动存储在设备上，ssl 握手是如何发生的。

任何指向这个方向的指针都会非常有帮助。

问候，伊山

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:57:48.057

如果证书是由 Apple 信任其根的证书颁发机构链颁发的，则无需执行任何操作。iOS 设备将接受证书，只要它在其他方面有效（即未过期、未撤销等）。

如果Apple**不**信任 CA 链的根，则需要将根的证书下载到手机。这可以通过 iPhone 配置实用程序来完成（我认为）。企业配置方案无疑也支持这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:33:44.287

我需要澄清一下。证书是由 Apple 签署以用于通知，还是由 SSL 根证书颁发机构（如 VeriSign）签署？

Apple 签名证书仅用于 WebServer 到 Apple 服务器的通信，如 Apple 推送通知服务。它们不适用于 iOS 设备到 WebServer。

由 SSL 根证书颁发机构签署的 SSL 证书应该可以正常工作。

* * *

我认为您正在寻找基于 SSL/TLS 的 HTTP 入门。所以，就这样吧。

HTTP 是一个未加密的通道。请求和响应在纯文本数据流中。HTTPS 是一个加密通道。请求和响应位于使用共享主密钥加密的数据流中。SSL/TLS 的神奇之处在于这个加密通道是如何创建的。

首先，客户端和服务器互相打招呼（在清晰的频道中）。接下来，客户端下载服务器的公共证书（在一个清晰的通道中）。

此时，客户端有一些工作要做。它需要验证证书。它需要知道它理解证书，日期范围是有效的，证书是由受信任的证书颁发机构签名的，并且证书没有被吊销。

现在，客户端知道它可以信任服务器。

接下来，它发送一些用服务器的公钥（在服务器的公共证书中）加密的短消息。这些消息只能通过服务器的私钥解密（只有服务器知道）。这些消息允许客户端和服务器协商主密钥。

最后，客户端和服务器使用新创建的加密通道开始正常的 HTTP 请求和响应。

我希望这就是你要找的。有关更详细的说明，请参见：[http ://www.moserware.com/2009/06/first-few-milliseconds-of-https.html](http://www.moserware.com/2009/06/first-few-milliseconds-of-https.html)

# image-processing - 从直方图中检测两个最高峰

> ID：10303164
> 
> 赞同：15
> 
> 时间：2012-04-24T16:47:11.607
> 
> 标签：image-processing, matlab, histogram

我试图了解如何从直方图中检测两个峰值。可以有多个，但我需要选择最高的两个。基本上我需要做的是，虽然我会让这些峰值向左或向右移动，但我需要抓住它们。它们的分布可能会有所不同，并且它们的 PEAK 值可能会发生变化，因此我必须找到一种方法来在 Matlab 中获取这两个峰值。

到目前为止我所做的是创建一个 5 值窗口。该窗口由直方图中的值填充并执行扫描。每次我向前移动 5 步到下一个值并将前一个窗口值与当前值进行比较。以较大者为准。

有没有更好的方法来做到这一点？

![在此处输入图像描述](../Images/d816d035e262834bdeab056a9017e789.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T19:02:48.387

最简单的方法是首先使用高斯核对数据进行平滑处理，以消除高频变化。

然后使用该函数`localmax`找到局部最大值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T17:46:58.350

将数据从 hist（或 histc）函数返回到变量 ( `y = hist(x,bin);`) 并使用[PEAKFINDER FileExchange](http://www.mathworks.com/matlabcentral/fileexchange/25500)提交来查找局部最大值。

我还使用了 Eli Billauer 的[PEAKDET](http://billauer.co.il/peakdet.html)功能。效果很好。您可以使用代码示例在此处查看我的[答案。](https://stackoverflow.com/a/10303971/616736)

# android - Android EditText + 设置一些颜色的单词

> ID：10303166
> 
> 赞同：1
> 
> 时间：2012-04-24T17:43:36.440
> 
> 标签：android, colors, set, android-edittext

我根据从数据库中拉回的内容动态创建 EditText 框。

IE。

```
 final EditText textV = new EditText(this);
            textV.setText(monEntry); 
```

有没有在不使用 subString() 的情况下将 EditText 中的一些文本设置为一种颜色和另一种颜色？如果有人可以提供帮助，非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T17:46:25.627

是的，如果您使用 SpannableString，您可以在文本的不同位置使用不同的颜色。例子：

```
SpannableString text = new SpannableString("Lorem ipsum dolor sit amet");  
final EditText textV = new EditText(this);
// make "Lorem" (characters 0 to 5) red  
textV.setSpan(new ForegroundColorSpan(Color.RED), 0, 5, 0);  
textV.setText(text, BufferType.SPANNABLE); 
```

或者您可以使用以下html代码::

```
textV.setText(Html.fromHtml(html text having 1 in red 2 in green and so on)); 
```

[这里](http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring)有一个更完整的例子。

[SpannableString](http://developer.android.com/reference/android/text/SpannableString.html)的 Javadoc

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-29T11:24:24.787

```
public class MainActivity extends Activity implements TextWatcher {

    EditText txt1,txt2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        txt1=(EditText) findViewById(R.id.editText1);
        txt2=(EditText) findViewById(R.id.editText2);
        txt2.setText(getResources().getString(R.string.str));
        txt1.addTextChangedListener(this);

    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        // TODO Auto-generated method stub
         String string = getResources().getString(R.string.str);
        // String string1=string.toLowerCase();
         try{
                String withHighLightedText = string.replaceAll(s.toString(), "<font color='yellow'>"+s.toString()+"</font>");
                txt2.setText(Html.fromHtml(withHighLightedText), TextView.BufferType.SPANNABLE);
                }catch(Exception ex){

                }

    }

    @Override
    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub

    }
} 
```

# javascript - 在 html 中预加载

> ID：10303167
> 
> 赞同：4
> 
> 时间：2012-04-24T17:43:37.307
> 
> 标签：javascript, html, preloader

我做了一个简单的谷歌搜索代码，如下所示：

```
<div style="text-align:center">
<form method="get" action="http://www.google.com/search">
<img src="http://www.google.com/images/srpr/logo3w.png"><br><input style="width:300px"name="q">
<input type="submit" value="Google Search" >
</form></div> 
```

在此，**代码（包括表单）和图像（谷歌图像）**同时加载。

如何使表单（输入）首先加载，然后再加载图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T17:52:18.343

DOM 准备好后，您可以设置`src`图像的 ..

```
<div style="text-align:center">
    <form method="get" action="http://www.google.com/search">
        <img id="googleimage" data-src="http://www.google.com/images/srpr/logo3w.png"/><br>
        <input style="width:300px"name="q">
        <input type="submit" value="Google Search" >
    </form>
</div>

<script type="text/javascript">
   document.addEventListener("DOMContentLoaded", function(){
      var img = document.getElementById('googleimage');
      img.src = img.getAttribute('data-src');
   }, false);
</script> 
```

演示在[http://jsfiddle.net/gaby/mpEeF/](http://jsfiddle.net/gaby/mpEeF/)

* * *

只是补充一点，如果问题是加载图像时（*可能在表单之前*），表单被向下推，很难找到和编辑它，唯一的解决方案是添加实际尺寸（*宽度/高度通过 style 属性*) 到图像，以便浏览器可以正确计算页面的最终外观，甚至在图像加载之前..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T17:58:16.830

你是什​​么意思

> 它们同时加载

因为它们不是同时加载的，所以首先加载页面并在`img`解析标签时并行加载图像。所以实际上浏览器几乎可以满足您的需求，您可以通过加载缓慢的 img 来测试它，您会看到您的表单将首先加载。

无论如何，您要解决的实际问题是什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T06:45:40.393

检查此代码。您应该在页面中包含 jquery 或将 jquery 代码转换为普通 javascript

[http://jsfiddle.net/pt4DT/](http://jsfiddle.net/pt4DT/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T23:30:56.673

还有一个：

[尝试这个](http://shaquin.tk/experiments/load.html)

**HTML：**

```
<div id="google-search-container">
    <form method="get" action="//www.google.com/search">
        <div id="google-logo"></div>
        <input id="q" name="q" />
        <input type="submit" value="Google Search" />
    </form>
</div> 
```

**JavaScript：**

```
function addLogo() {
    document.getElementById('google-logo').style.backgroundImage = "url('//www.google.com/images/srpr/logo3w.png')";
}
window.onload = function() {
    addLogo();
} 
```

**CSS：**

```
#google-search-container {
    text-align: center
}
#google-logo {
    margin: 10px auto;
    background-repeat: no-repeat;
    background-size:275px 95px;
    height: 95px;
    width: 275px
}
#q {
    width: 300px
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T13:08:45.113

> 我希望表单（输入）首先加载（并且用户能够更早地编写），因为图像并不重要，我希望它们在最后加载（在所有 html、css 和 js 加载之后）

好的，首先让我说这仅适用于我认为从大约 IE6 开始的所有较新浏览器（不确定确切时间），但这仍然应该是绝大多数。

下面你可以看到一个包含 html 的典型页面加载的图像（第一行是 html，第二个 js，第三和第四个 css，最后一个图像）。 ![显示页面加载的瀑布](../Images/36023ecfce66c99ea760967b3264f4fc.png)

如您所见，首先加载 html，因为它需要知道需要加载哪些 js 和 css。现在 - 这取决于浏览器和阻塞/非阻塞 javascript - 图像本身有时与 js/css 并行加载，或者在 css 和 javascript 完成下载后加载（如上图所示）。无论哪种方式，无论浏览器决定做什么，它都将是最佳解决方案（例如，大多数浏览器将并行执行的 https 请求数量存在限制，这由 spdy 协议解决，但那是另一回事了）。现在，更仔细地查看图表，您可以看到两条线，一条蓝线显示页面何时显示给用户（有表单，但没有图像），以及 DOM 完成加载后的一条绿线（包括图片）。因此，浏览器已经在做你想做的事了。但是，由于两点之间只有大约 100 毫秒，除非您有很多图像，否则您可能不会有意识地看到这一点。

唯一重要的是不要在 javascript 中锁定页面的加载，这可以极大地加快页面的加载速度（例如，[在页面完成加载](https://www.google.com/search?q=load%20javascript%20after%20page%20load)[*后*](https://www.google.com/search?q=load%20javascript%20after%20page%20load)通过将其动态注入页面来加载[大多数 javascript ）。](https://www.google.com/search?q=load%20javascript%20after%20page%20load)*无论哪种方式，任何优化都受益于在 firefox（使用[firebug](http://getfirebug.com/)并转到 net 选项卡）或 chrome（按 F12 并转到 network 选项卡）中查看页面加载的瀑布（上图）显示什么加载时并试图让蓝线尽可能向左移动。*

 ** * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-05T06:34:30.820

**试试这个：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Untitled 1</title>
<script type="text/javascript">
function Addimg()
{
    document.getElementById("googleimg").src = "http://www.google.com/images/srpr/logo3w.png";
}
</script>
</head>

<body onload="Addimg()">
<div style="text-align:center">
<form method="get" action="http://www.google.com/search">
<img id="googleimg" src=""><br><input style="width:300px"name="q">
<input type="submit" value="Google Search" >
</form></div>
</body>

</html> 
```*

# hadoop - 运行 Hadoop wordcount 示例时找不到作业令牌文件

> ID：10303169
> 
> 赞同：0
> 
> 时间：2012-04-24T17:43:41.900
> 
> 标签：hadoop, cluster-computing, word-count

我刚刚在一个小型集群上成功安装了 Hadoop。现在我正在尝试运行 wordcount 示例，但出现此错误：

```
****hdfs://localhost:54310/user/myname/test11
12/04/24 13:26:45 INFO input.FileInputFormat: Total input paths to process : 1
12/04/24 13:26:45 INFO mapred.JobClient: Running job: job_201204241257_0003
12/04/24 13:26:46 INFO mapred.JobClient:  map 0% reduce 0%
12/04/24 13:26:50 INFO mapred.JobClient: Task Id : attempt_201204241257_0003_m_000002_0, Status : FAILED
Error initializing attempt_201204241257_0003_m_000002_0:
java.io.IOException: Exception reading file:/tmp/mapred/local/ttprivate/taskTracker/myname/jobcache/job_201204241257_0003/jobToken
    at org.apache.hadoop.security.Credentials.readTokenStorageFile(Credentials.java:135)
    at org.apache.hadoop.mapreduce.security.TokenCache.loadTokens(TokenCache.java:165)
    at org.apache.hadoop.mapred.TaskTracker.initializeJob(TaskTracker.java:1179)
    at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:1116)
    at org.apache.hadoop.mapred.TaskTracker$5.run(TaskTracker.java:2404)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.FileNotFoundException: File file:/tmp/mapred/local/ttprivate/taskTracker/myname/jobcache/job_201204241257_0003/jobToken does not exist.
    at org.apache.hadoop.fs.RawLocalFileSystem.getFileStatus(RawLocalFileSystem.java:397)
    at org.apache.hadoop.fs.FilterFileSystem.getFileStatus(FilterFileSystem.java:251)
    at org.apache.hadoop.fs.ChecksumFileSystem$ChecksumFSInputChecker.<init>(ChecksumFileSystem.java:125)
    at org.apache.hadoop.fs.ChecksumFileSystem.open(ChecksumFileSystem.java:283)
    at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:427)
    at org.apache.hadoop.security.Credentials.readTokenStorageFile(Credentials.java:129)
    ... 5 more 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:23:49.633

我刚刚解决了同样的错误——在我的 Hadoop 目录上递归设置权限没有帮助。按照[Mohyt](https://stackoverflow.com/users/642368/mohyt)的建议[，](https://stackoverflow.com/questions/6027325/hadoop-wordcount-unable-to-run-need-help-on-decoding-the-hadoop-error-message)我修改`core-site.xml`（在 hadoop/conf/ 目录中）以删除我指定临时目录的位置（`hadoop.tmp.dir`在 XML 中）。允许 Hadoop 创建自己的临时目录后，我运行无错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T20:57:37.153

最好创建自己的临时目录。

```
<configuration>
 <property>
 <name>hadoop.tmp.dir</name>
 <value>/home/unmesha/mytmpfolder/tmp</value>
 <description>A base for other temporary directories.</description>
 </property>
..... 
```

并给予许可

```
unmesha@unmesha-virtual-machine:~$chmod 750 /mytmpfolder/tmp 
```

[检查](http://unmeshasreeveni.blogspot.in/2014/04/hadoop-installation-for-beginners.html)core-site.xml 配置

# c# - window.showModalDialog 和 WebBrowser 的任何排列

> ID：10303174
> 
> 赞同：3
> 
> 时间：2012-04-24T17:43:52.447
> 
> 标签：c#, wpf, winforms

无论如何可以访问或控制从JS调用window.showModalDialog弹出的窗口？

我目前正在使用 WPF 网络浏览器，我注意到它在这方面的帮助非常有限，所以我尝试切换到 Forms.WebBrowser 版本，但这似乎对我没有帮助......我尝试了所有不同的排列新窗口事件，但它们仅在弹出一个全新的 IE 窗口时触发，例如从 _blank 目标...

弹出的窗口有一系列我需要点击的复选框，然后从代码中点击确定

到目前为止，我认为最好的计划是注入一些模拟对话框返回参数的 JS。但我很好奇是否有办法从代码中控制或访问这个对话框......

# performance - SmartGWT listgrid 滚动时非常慢

> ID：10303179
> 
> 赞同：1
> 
> 时间：2012-04-24T17:44:18.253
> 
> 标签：performance, smartgwt, listgrid

我正在编写一个非常简单的 SmartGWT 应用程序，它在本地使用 100 个元素填充列表网格（不涉及 RPC 或任何服务器交互）。

当我滚动列表网格时，滚动速度明显变慢

环境：SmartGWT 3.0 GWT 2.4.0

代码如下：

```
public class RemoteFileBrowser implements EntryPoint {

// /**
// * The message displayed to the user when the server cannot be reached or
// * returns an error.
// */
// private static final String SERVER_ERROR = "An error occurred while "
// + "attempting to contact the server. Please check your network "
// + "connection and try again.";
//
// /**
// * Create a remote service proxy to talk to the server-side Greeting
// service.
// */
// private final RemoteFileServiceAsync greetingService = GWT
// .create(RemoteFileService.class);

/**
 * This is the entry point method.
 */
public void onModuleLoad() {
////            SC.say("Welcome to remote file browser!");
//      RemoteFileDialog rfDialog = new RemoteFileDialog("*.*, *.htm, *.cpp, *.hpp");
//      rfDialog.show();
        getListView().draw();

    }

    private ListGrid getListView() {

        ListGrid grid = new ListGrid();
        grid.setWidth(500);
        grid.setHeight(400);
        grid.setLeft(100);
        grid.setTop(100);

        ListGridField field1 = new ListGridField("name");
        ListGridField field2 = new ListGridField("designation");
        grid.setFields(field1, field2);

        ListGridRecord[] records = new ListGridRecord[100];
        for (int i=0; i<100; ++i) {
            //ListGridRecord record = new ListGridRecord();
            records[i] = new ListGridRecord();
            GWT.log("Iteraton:" + i);
            records[i].setAttribute("name", "name" + i);
            records[i].setAttribute("designation", "designation" + i);
        }
        grid.setData(records);
        return grid;
    }

} 
```

展示示例似乎工作正常。当我在本地填充列表网格而不设置数据源时，就会出现问题。

任何想法，我在哪里弄错了？

提前感谢您的帮助。

问候，房车

# arrays - Scala中的多重赋值而不使用数组？

> ID：10303182
> 
> 赞同：6
> 
> 时间：2012-04-24T17:44:42.290
> 
> 标签：arrays, scala, functional-programming, pattern-matching, variable-assignment

我有这样的输入：`"1 2 3 4 5"`.

我想做的是创建一组新变量，让`a`第一个成为序列，`b`第二个，`xs`其余作为序列（显然我可以在 3 个不同的行中完成，但我想使用多重赋值）。

一些搜索帮助我找到了[正确的忽略序列模式](http://www.scala-lang.org/node/122)，我可以使用它：

```
val Array(a, b, xs @ _*) = "1 2 3 4 5".split(" ") 
```

我不明白的是，如果我用元组尝试它为什么不起作用？我收到一个错误：

```
val (a, b, xs @ _*) = "1 2 3 4 5".split(" ") 
```

错误信息是：

```
<console>:1: error: illegal start of simple pattern 
```

有没有不使用的多重分配的替代方案`Array`？

几天前我刚开始玩 Scala，所以请多多包涵:-) 在此先感谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-24T18:02:19.167

其他答案告诉你为什么你不能使用元组，但数组对于这个目的很尴尬。我更喜欢列表：

```
val a :: b :: xs = "1 2 3 4 5".split(" ").toList 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-24T17:47:41.980

## 简单的答案

```
val Array(a, b, xs @ _*) = "1 2 3 4 5".split(" ") 
```

您在此处看到的语法是简单的模式匹配。它之所以有效，是因为`"1 2 3 4 5".split(" ")`计算结果为`Array`：

```
scala> "1 2 3 4 5".split(" ")
res0: Array[java.lang.String] = Array(1, 2, 3, 4, 5) 
```

由于右手边是一个`Array`，左手尺寸上的图案也必须是`Array`

仅当右侧大小也计算为元组时，左侧才可以是元组：

```
val (a, b, xs) = (1, 2, Seq(3,4,5)) 
```

* * *

## 更复杂的答案

从技术上讲，这里发生的是模式匹配语法正在调用对象`unapply`上的方法`Array`，如下所示：

```
def unapplySeq[T](x: Array[T]): Option[IndexedSeq[T]] =
  if (x == null) None else Some(x.toIndexedSeq) 
```

请注意，该方法接受一个`Array`. 这是 Scala 必须在作业的右侧看到的内容。它返回一个`Seq`，它允许`@_*`您使用的语法。

您的带有元组的版本不起作用，因为`Tuple3`'s`unapplySeq`是用 a`Product3`作为其参数定义的，而不是 a `Array`：

```
def unapply[T1, T2, T3](x: Product3[T1, T2, T3]): Option[Product3[T1, T2, T3]] =
  Some(x) 
```

`unapply`实际上，您可以通过简单地创建一个对象并编写一个or`unapplySeq`方法来做任何您想做的事情。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-24T18:02:53.747

答案是：

```
val a :: b :: c = "1 2 3 4 5".split(" ").toList 
```

应该澄清的是，在某些情况下，可能只想绑定列表中的前 n 个元素，而忽略不匹配的元素。为此，只需添加一个尾随下划线：

```
val a :: b :: c :: _ = "1 2 3 4 5".split(" ").toList 
```

那样：

```
c = "3" vs. c = List("3","4","5") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T17:47:43.483

我无论如何都不是 Scala 方面的专家，但我认为这可能与 Scala 中的元组只是从 Tuple2 到 Tuple22 的类的语法糖有关。

意思是，Scala 中的元组不像 Python 或其他同类语言那样灵活的结构，因此它不能真正创建*先验*大小未知的元组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-20T20:46:31.520

我们可以使用模式匹配从字符串中提取值并将其分配给多个变量。不过，这需要两行。

Pattern 表示有 3 个数字（[0-9]），中间有空格。在第三个数字之后，可以有也可以没有文字，我们不关心（.*）。

```
val pat = "([0-9]) ([0-9]) ([0-9]).*".r
val (a,b,c) = "1 2 3 4 5" match { case pat(a,b,c) => (a,b,c) } 
```

输出

```
a: String = 1
b: String = 2
c: String = 3 
```

# jquery - 带有链接的jquery获取函数

> ID：10303186
> 
> 赞同：1
> 
> 时间：2012-04-24T17:44:59.533
> 
> 标签：jquery, hyperlink, get, href

我有一些参数链接：

```
<a href="index.php?page=home&lang=en" class="flag">
    <img src="./images/flags/en.png" class="flag_on" alt="en" title="en">
</a> 
```

以及如何通过单击带有 jQ​​uery/Ajax 的链接将**$lang参数解析为 index.php ？**

**我的工作示例：**

```
$(".flag").click(function(event) {
    event.preventDefault();
    $.get(this.href, function(data) {
        location.reload();
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:54:38.827

```
$(".flag_on").click(function(){
    $.get($(this).parent().attr("href"), function(data) {
         $('.result').html(data);
         alert('Load was performed.');
    });
});​ 
```

或者您可以修改 HTML 代码以对链接使用单击事件，但对图像不使用：

```
<a href="index.php?page=home&lang=en" class="flag">
    <img src="./images/flags/en.png" class="flag_on" alt="en" title="en">
</a>

$(".flag").click(function(event) {
    event.preventDefault();
    $.get(this.href, function(data) {
        $('.result').html(data);
        alert('Load was performed.');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:49:04.037

如果你想请求相同的 url，那么试试这个。无需解析查询字符串参数并创建相同的 url。

```
$(".flag_on").click(function(e){
    $.get(this.parent()[0].href, function(data) {
        $('.result').html(data);
        alert('Load was performed.');
    });
    e.stopPropagation(); //stop event bubbling
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:53:37.107

尝试在您的获取请求中定位锚的 href。就像是

```
var target_url =$(this).parent("a") 
$.get(target_url, function(data){
  do something...
} 
```

然后，您还可以解析 target_url 以获取参数

# c# - ReaderWriterLockSlim 出错

> ID：10303191
> 
> 赞同：8
> 
> 时间：2012-04-24T17:45:18.380
> 
> 标签：c#, multithreading, readerwriterlockslim

我得到了这个异常
读取锁正在被释放而不被持有。
在 System.Threading.ReaderWriterLockSlim.ExitReadLock() 在 .. GetBreed(String)

下面是代码中唯一可以访问锁的地方。如您所见，没有递归。我无法理解这个异常是如何发生的。

```
static readonly Dictionary<string, BreedOfDog> Breeds 
     = new Dictionary<string,BreedOfDog>();

static BreedOfDog GetBreed(string name)
{
        try
        {
            rwLock.EnterReadLock();
            BreedOfDog bd;
            if (Breeds.TryGetValue(name, out bd))
            {
                return bd;
            }
        }
        finally
        {
            rwLock.ExitReadLock();
        }

        try
        {
            rwLock.EnterWriteLock();
            BreedOfDog bd;
            //make sure it hasn't been added in the interim
            if (Breeds.TryGetValue(t, out bd)
            {
                return bd;
            }
            bd = new BreedOfDog(name); //expensive to fetch all the data needed to run  the constructor, hence the caching

            Breeds[name] = bd;
            return bd;
        }
        finally
        {
            rwLock.ExitWriteLock();
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:00:44.237

我猜你有一些可重入的东西，它在获取锁时会抛出异常。无论您“获取锁”、“尝试”还是“尝试”、“获取锁”都有一个 catch-22，但是“获取锁”、“尝试”的失败案例较少（“获取和尝试”是非常不可能的，你不需要强调）。

将“取锁”移到“尝试”之外，看看*实际*的异常是什么。

问题很可能是你没有拿锁（可能是重新进入），然后试图解锁你没有拿的东西。这可能意味着在获取锁的**原始**代码中出现异常，因为在只获取一次时尝试释放两次。

注意：监视器具有带有“ref bool”参数的新重载来帮助解决这种情况 - 但不是其他锁类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T18:48:36.320

`LockRecursionPolicy.SupportsRecursion`在实例化 RWLS 时使用。如果错误消失，那么您实际上确实涉及某种类型的递归。也许是您没有发布的代码？

如果你真的很关心从中获得最大的并发性（我怀疑你是因为你使用的是 RWLS），那么你可以使用双重检查锁定模式。请注意您的原始代码已经有了这种感觉？那么为什么要绕圈子呢？去做就对了。

在下面的代码中，请注意我如何始终将`Breeds`引用视为不可变的，然后在`lock`我重新检查、复制、更改和交换引用。

```
static volatile Dictionary<string, BreedOfDog> Breeds = new Dictionary<string,BreedOfDog>();
static readonly object LockObject = new object();

static BreedOfDog GetBreed(string name)
{
  BreedOfDog bd;
  if (!Breeds.TryGetValue(name, out bd))
  {
    lock (LockObject)
    {
      if (!Breeds.TryGetValue(name, out bd))
      {
        bd = new BreedOfDog(name);
        var copy = new Dictionary<string, BreedOfDog>(Breeds);
        copy[name] = bd;
        Breeds = copy;
      }
    }
  }
  return bd;
} 
```

# html - 某些绝对定位的元素会导致 Firefox 超出屏幕范围

> ID：10303204
> 
> 赞同：2
> 
> 时间：2012-04-24T17:46:30.347
> 
> 标签：html, css, firefox, layout

我正在尝试实现我试图在这里展示的特定布局：http: [//tmp.grytoyr.net/layout/](http://tmp.grytoyr.net/layout/)

基本上我试图让多个绝对定位的元素带有自己的滚动条。挑战是让元素的高度正确，使滚动条看起来很自然。另一个要求是左右应始终占据主要内容区域的 50%。

在 Mac 上的 Chrome 和 Safari 中，它按预期工作，但在 Firefox 中，被标题（菜单、左、右）向下推的可滚动元素的滚动条延伸到视口下方。

我猜这是因为 Firefox 解释 height: 100% 在绝对定位的元素上，上面有一些内容，这与 Webkit 浏览器的做法略有不同。

有没有办法在所有现代浏览器中实现所需的布局？

**编辑**：我会回答我自己的问题，因为我刚刚弄清楚了。

我添加了我认为现在 Firefox 支持的“box-sizing:border-box”，但事实证明我还需要添加“-moz-box-sizing:border-box”。

**Edit2**：但请务必查看 rgthree 的答案，因为这是实现我想要的布局的更好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:20:47.380

是的，在这种情况下，您不能使用 100% 的高度，因为这将是容器的高度，并且您还有其他元素/填充/偏移会导致溢出。

例如，如果容器的高度设置为 500 像素，并且您有一个高度为 100% 的子内容元素，那么它的高度也将是 500 像素。但是，如果您在另一个 50 像素的元素下启动该子元素（例如，像您示例中的标题），那么总高度为 550 像素（50 像素标题 + 500 像素“100%”内容）。

你可以为你的例子做些什么，因为一切都是绝对布局的，就是使用上/右/下/左。这是概念：

```
/* The container -- height/width doesn't matter */
.container {position:relative; height:500px; width:500px;}
/* A 50px tall header -- notice no width is set, but left/right is set to 0 */
.container > .header {
  position:absolute;
  top:0px;
  left:0px;
  right:0px;
  height:50px;
}
/* The content under the header -- notice no height or width is set */
.container > .content {
  position:absolute;
  top:50px; /* 50px top to be below the header */
  left:0px;
  right:0px;
  bottom:0px; /* Bottom is 0 so it will stretch the rest of the height */
  overflow:auto;
} 
```

现在，只需将此技术应用于所有嵌套项目，您就可以开展业务了。

# visual-studio - 试图在子目录上使用 Web Deploy 的 setAcl 提供程序？

> ID：10303214
> 
> 赞同：0
> 
> 时间：2012-04-24T17:47:15.050
> 
> 标签：visual-studio, msdeploy, webdeploy

我正在尝试在 Web Deploy 包中创建一个对应用程序池用户可写的子目录（config）。看起来好像我正在尝试完全按照这篇文章中的内容进行操作： [Web Deploy 的 setAcl 提供程序可以在子目录中使用吗？](https://stackoverflow.com/questions/6861990/can-web-deploys-setacl-provider-be-used-on-a-sub-directory)

发布工作正常，但 DefaultAppPool 仅具有对配置目录的读取权限。我在下面创建了 {ProjectName}.wpp.targets 文件，并且在我的站点清单中生成了 config 文件夹的以下 ACL 条目。

## {项目名称}.wpp.targets

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <Target Name="SetupCustomAcls" AfterTargets="AddIisSettingAndFileContentsToSourceManifest">
    <ItemGroup>
      <MsDeploySourceManifest Include="setAcl">
        <Path>$(_MSDeployDirPath_FullPath)\config</Path>
        <setAclAccess>Read,Write,Modify</setAclAccess>
        <setAclResourceType>Directory</setAclResourceType>

<AdditionalProviderSettings>setAclResourceType;setAclAccess</AdditionalProviderSettings>
      </MsDeploySourceManifest>
    </ItemGroup>
  </Target>

  <Target Name="DeclareCustomParameters" AfterTargets="AddIisAndContentDeclareParametersItems">
    <ItemGroup>
      <MsDeployDeclareParameters Include="Config Folder">
        <Kind>ProviderPath</Kind>
        <Scope>setAcl</Scope>
        <Description>Add write permission to config folder.</Description>
        <DefaultValue>$(_DestinationContentPath)\config</DefaultValue>
        <Match>^$(_EscapeRegEx_MSDeployDirPath)\\config$</Match>
        <Value>$(_DestinationContentPath)/config</Value>
        <ExcludeFromSetParameter>True</ExcludeFromSetParameter>
      </MsDeployDeclareParameters>
    </ItemGroup>
  </Target>

</Project> 
```

当我在 Advanced 部分中将 Include ACLs 更改为 true 时，会提供该参数但未应用该参数。

注意：我不确定这是否相关，但安装摘要的详细信息窗格中存在以下几行。

```
[24/04/2012 1:41:46 PM] Source setAcl (C:\Users\benr\Desktop\eippk\obj\Release\Package\PackageTmp\config) does not match destination (Default Web Site/WAT_FLNet_deploy/config) differing in attributes (isDest['False','True'],setAclUser,setAclAccess). Update pending.
[24/04/2012 1:41:46 PM] Updating setAcl (Default Web Site/WAT_FLNet_deploy/config). 
```

我希望这很简单，但有人可以帮忙吗？

编辑：好的，这在 Server 2008 R2 安装上正常工作。看起来这是由于 Windows 客户端 SKU 中未包含管理服务。假设您可以单独安装它，但我尝试了 Web Platform Installer 3.0 和 Web Deploy 2.1 的完整安装，但没有成功。欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:52:56.860

仅供参考：我卸载并重新安装了 WebDeploy，重新启动，它现在可以工作了！$%#@&!

# php - MySQL - 根据 IN () 返回多行

> ID：10303215
> 
> 赞同：1
> 
> 时间：2012-04-24T17:47:16.267
> 
> 标签：php, mysql, sql, left-join

使用 MySQL，我有两张表——一张是视频，另一张是产品。products 表中的每一行都有一个名为 productVideoOrder 的列，它是一个以逗号分隔的 videoID 列表（与 video 表相关），按用户放置它们的顺序排列。

如果关系在中间表中，我在下面描述的内容会更容易，但对于该项目的其他功能，逗号分隔的列表是有意义的。

我正在尝试获取一个返回第一列的表：videoTitle，第二列：productName。有没有一种基于逗号分隔列表的左连接方式？我希望结果表允许重复行，例如，如果两个产品在 productVideoOrder 中列出了一个视频，则该表将有两行用于该视频，一个列出产品一个，另一个列出产品二。

我可以澄清任何需要的东西。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:49:35.113

```
SELECT  p.name, v.title
FROM    product p
LEFT JOIN
        video v
ON      FIND_IN_SET(v.id, p.productVideoOrder) 
```

这不会很快。

如果您对可以分配给产品的视频数量有合理的限制，您可以尝试使用以下方法：

```
SELECT  p.name, v.title
FROM    product p
CROSS JOIN
        (
        SELECT  1 AS n
        UNION ALL
        SELECT  2 AS n
        UNION ALL
        SELECT  3 AS n -- add more if needed
        )
LEFT JOIN
        video v
ON      v.id = SUBSTRING_INDEX(SUBSTRING_INDEX(productVideoOrder, ',', n), ',', -1)
        AND SUBSTRING_INDEX(SUBSTRING_INDEX(productVideoOrder, ',', n), ',', -1) <> SUBSTRING_INDEX(SUBSTRING_INDEX(productVideoOrder, ',', n - 1), ',', -1) 
```

这将使用`v.id`.

# wordpress - Wordpress：索引上自定义帖子类型的单独样式/编码

> ID：10303217
> 
> 赞同：3
> 
> 时间：2012-04-24T17:47:20.983
> 
> 标签：wordpress, styling, custom-post-type

我真的很难用谷歌来解决这个问题。我已经设置了自定义帖子类型，并设法将这些自定义类型包含在索引页面中。但是现在我真的需要一种与常规帖子不同的样式来设置这些条目的样式。有谁知道我该怎么做？这不仅仅是样式，还有替换/添加/删除某些代码，因为自定义类型的操作/看起来与常规帖子不同。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:50:17.003

至于 CSS，在你的循环中，当你定义包含你的帖子的元素时，尝试做这样的事情

```
<article class="<?php echo $post->post_type; ?>" ...> 
```

这将为您提供一个可以挂接到您的 CSS 文件中的类。

您也可以使用 WordPress 的内置`post_class`功能来达到类似的效果

```
<article <?php post_class($post->post_type); ?>> 
```

这会将帖子类型添加到其余默认帖子类中，因此您仍然可以对这些元素进行不同的样式设置。

至于不同帖子类型的不同代码，我上面提到的答案之一是使用基于帖子类型的 if 语句：

```
if ('my_post_type' == $post->post_type)
{
    // Code Here
} 
```

我希望这可以帮助你。

[post_class 的法典参考](http://codex.wordpress.org/Function_Reference/post_class#Adding_More_Classes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:01:55.370

您可以在循环中使用此代码：

```
if ( 'custom_post_type' == get_post_type() ){
   //do whatever
} 
```

或者如果您需要检查一些帖子类型，您可以使用如下开关：

```
switch ( get_post_type() ) {
  case 'post':
    //do whatever;
    break;
  case 'custom_post_type_1':
    //do whatever;
    break;
  case 'custom_post_type_2':
    //do whatever;
    break;
} 
```

# pagination - 我可以将分页与 $wpdb 类一起使用吗？

> ID：10303218
> 
> 赞同：3
> 
> 时间：2012-04-24T17:47:22.823
> 
> 标签：pagination, wordpress

假设我想使用 $wpdb 类从数据库中检索图像位置，这样我就可以创建一个图像库。我有这段代码，但是当我按“下一步”时，链接似乎没有去任何地方。我错过了什么吗？

```
<?php
global $wpdb;
$wpdb->show_errors();
$offset = 0;
if( isset($_GET['page']) && !empty($_GET['page']) ){
$offset =  ($_GET['page']-1) * 10; // (page 2 - 1)*10 = offset of 10
}
$pics = $wpdb->get_col("SELECT pic_thumb_url FROM wp3_bp_album 
WHERE owner_type = 'user' ORDER BY title DESC
LIMIT 10 OFFSET $offset"
);
//LIMIT shows 10 results per page
//OFFSET will 'skip' this number off results. On page 1 the offset is 0 on page 2 it is 10       (if 10 results per page)
foreach($pics as $pic) :
echo '<a href ="'. '#' .'" > <img src="' . $pic . '">' . '</a>';

endforeach; 

/*
pagination
*/
?>
<a href="/community/?page=<?php echo $_GET['page']-1 ?>">previous</a>
<a href="/community/?page=<?php echo $_GET['page']+1 ?>">next</a> 
```

我可以用这个实现分页吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T17:54:22.627

您不能使用内置分页，但要使用分页，请在查询中使用 an`OFFSET`和 a 。`LIMIT`所以，制作自己的分页：

```
<?php
$offset = 0;
if(isset($_GET['page']) && !empty($_GET['page']) {
    $offset =  ($_GET['page']-1) * 10; // (page 2 - 1)*10 = offset of 10
}
$wpdb->get_col("SELECT pic_thumb_url FROM wp3_bp_album 
    WHERE owner_type = 'user' ORDER BY title DESC
    LIMIT 10 OFFSET $offset"
);
//LIMIT shows 10 results per page
//OFFSET will 'skip' this number off results. On page 1 the offset is 0 on page 2 it is 10 (if 10 results per page)

/*
pagination
*/
?>
<a href="/currentpage/?page=<?php echo $_GET['page']-1 ?>">previous</a>
<a href="/currentpage/?page=<?php echo $_GET['page']+1 ?>">next</a> 
```

并非完美无缺，它不会检查您是在第一页还是最后一页，但至少是您必须自己构建的第一个检查。

# ruby-on-rails - 向 Ruby on Rails 站点添加动画。

> ID：10303220
> 
> 赞同：0
> 
> 时间：2012-04-24T17:47:26.673
> 
> 标签：ruby-on-rails, animation

如果我使用 JQuery 向我的 Ruby on Rails Web 应用程序添加动画，Rails 如何识别 JQuery？只是添加一个 Jquery gem 的问题吗？还是代码中有一些配置指令集？

我还在学习 Ruby on Rails。我想在我的主页上添加自定义动画，但不确定哪些工具/技术与 Ruby on Rails 配合得很好。jQuery、javascript、Ajax？有没有人有任何关于 Rails 应用程序使用哪个百分比的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:01:10.333

如果您使用的是 Rails 3+，则默认情况下应包含 JQuery。

# xcode - 如何在 Interface Builder 中导航子视图

> ID：10303223
> 
> 赞同：1
> 
> 时间：2012-04-24T17:47:27.190
> 
> 标签：xcode, xcode4.3

我想我记得曾经读过有一种方法可以使用键盘快捷键在 Interface Builder 中导航不同的视图（换句话说，通过单击视图来选择另一个子视图下方的子视图），但我似乎找不到什么它是。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:05:31.687

有一些命令可以在剪辑（模糊）对象之间跳转，但是在安装 Xcode 时它们没有分配键盘快捷键。不过，您可以在 Xcode 的 Key Bindings 首选项面板中设置自己的快捷方式：

![在此处输入图像描述](../Images/28da2f4f5fbf17322201f78dddcd4fe4.png)

由于您永远不会在同一个文件中编辑 MacOS X 和 iOS 视图，因此您可以继续为每个编辑器中的相应命令分配相同的快捷方式，即对带有剪辑内容的跳转到下一个对象命令使用一个快捷方式。

# image-processing - 对文档的褪色图像实施 Otsu 二值化

> ID：10303229
> 
> 赞同：3
> 
> 时间：2012-04-02T17:50:58.000
> 
> 标签：image-processing, matlab

我正在尝试在文档图像上实现 Otsu 二值化技术，例如所示：

![在此处输入图像描述](../Images/d625b8facdc26395dd026b01697f990f.png)

有人可以告诉我如何在 MATLAB 中实现代码吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-02T21:29:36.693

取自[Otsu 在 Wikipedia 上的方法](http://en.wikipedia.org/wiki/Otsu%27s_method)

```
I = imread('cameraman.tif'); 
```

**步骤 1.**计算每个强度级别的直方图和概率。

```
nbins = 256; % Number of bins
counts = imhist(I,nbins); % Each intensity increments the histogram from 0 to 255
p = counts / sum(counts); % Probabilities 
```

**步骤 2.**设置初始 omega_i(0) 和 mu_i(0)

```
omega1 = 0;
omega2 = 1;
mu1 = 0;
mu2 = mean(I(:)); 
```

**步骤 3.**逐步检查从 0 到最大强度的所有可能阈值 (255)

**步骤 3.1**更新 omega_i 和 mu_i

**步骤 3.2**计算 sigma_b_squared

```
for t = 1:nbins
    omega1(t) = sum(p(1:t));
    omega2(t) = sum(p(t+1:end));
    mu1(t) = sum(p(1:t).*(1:t)');
    mu2(t) = sum(p(t+1:end).*(t+1:nbins)');
end

sigma_b_squared_wiki = omega1 .* omega2 .* (mu2-mu1).^2; % Eq. (14)
sigma_b_squared_otsu = (mu1(end) .* omega1-mu1) .^2 ./(omega1 .* (1-omega1)); % Eq. (18) 
```

**Step 4** Desired threshold 对应 sigma_b_squared 最大值的位置

```
[~,thres_level_wiki] = max(sigma_b_squared_wiki);
[~,thres_level_otsu] = max(sigma_b_squared_otsu); 
```

wiki-version eq 之间存在一些差异。(14) 在大津和等式。(18)，我不知道为什么。但是`thres_level_otsu`对应于MATLAB的实现`graythresh(I)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T02:38:31.257

由于`graythresh`Matlab 中的函数实现了 Otsu 方法，因此您要做的就是将图像转换为灰度，然后使用该`im2bw`函数使用 `graythresh`.

要将图像转换`I`为灰度，您可以使用以下代码：

```
I = im2uint8(I);
if size(I,3) ~= 1
    I = rgb2gray(I);
end; 
```

要使用 Otsu 的方法获取二进制图像`Ib`，请使用以下代码：

```
Ib = im2bw(I, graythresh(I)); 
```

您应该得到以下结果：

![在此处输入图像描述](../Images/6003b3bc56e61fd9dff84df529ea0243.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T12:58:22.747

从您最初的问题是实现 OTSU 开始，确定 MATLAB 的`graythresh`函数基于该方法的真实性 OTSU 的方法将阈值视为两个峰之间的谷值，即前景像素之一和背景像素中的另一个

与您的看起来像历史手稿​​的图像有关，发现这篇[论文](http://www.teilar.gr/dbData/Dimosieyseis/03-com.pdf)比较了可用于对文档图像进行阈值处理的所有方法

您还可以从[此处下载并阅读 suvola thresholding](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.98.880)

祝它的实施好运=）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T11:20:29.693

更正了 MATLAB 实现（用于 2d 矩阵）

```
function [T] = myotsu(I,N);

% create histogram

nbins = N; 

[x,h] = hist(I(:),nbins);

% calculate probabilities

p = x./sum(x);

% initialisation

om1 = 0; 

om2 = 1; 

mu1 = 0; 

mu2 = mode(I(:));

for t = 1:nbins,

    om1(t) = sum(p(1:t));
    om2(t) = sum(p(t+1:nbins));
    mu1(t) = sum(p(1:t).*[1:t]);
    mu2(t) = sum(p(t+1:nbins).*[t+1:nbins]);

end

    sigma = (mu1(nbins).*om1-mu1).^2./(om1.*(1-om1));

idx = find(sigma == max(sigma));

T = h(idx(1)); 
```

# c# - 在 ASP.NET 下拉值更改时显示/隐藏 DIV

> ID：10303234
> 
> 赞同：2
> 
> 时间：2012-04-24T17:47:46.877
> 
> 标签：c#, jquery, asp.net

我的 ASP.NET 页面上有以下下拉列表：

```
<asp:DropDownList ID="selectAttending" runat="server">
              <asp:ListItem Value="Select One...">Select One...</asp:ListItem>
              <asp:ListItem Value="Yes">Yes</asp:ListItem>
              <asp:ListItem Value="No">No</asp:ListItem>
            </asp:DropDownList> 
```

我也有以下脚本：

```
$(function (){
$("#selectAttending").change(function () { 
ToggleDropdown(); 
}); 
ToggleDropdown();  
}); 

function ToggleDropdown(){
if ($("#selectAttending").val() == "No") {
    $("#ifAttending").hide(); 
} 
else{
    $("#ifAttending").show(); 
 } 
}; 
```

如果他们参加，我想显示的 DIV 标签是：#ifAttending

我是否需要在下拉列表中添加一个属性以在更改时显示/隐藏，或者代码是否错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:54:10.850

问题是 selectAttending 是页面背后的 ASP 代码中使用的控件 ID，而不是 html 中下拉元素的 ID。

您必须这样做才能获取控件的客户端 ID：

```
$(function (){
    $("#<%=selectAttending.ClientID%>").change(function () { 
        ToggleDropdown(); 
    }); 
    ToggleDropdown();  
}); 

function ToggleDropdown(){
    if ($("#<%=selectAttending.ClientID%>").val() == "No") {
        $("#ifAttending").hide(); 
    } 
    else{
        $("#ifAttending").show(); 
    } 
 }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T17:55:20.663

您在 .net 中，所以 jquery 中的标识符不是 #selectAttending 除非您使用 clientidmode="static" 如果不是，您的标识符将在 .net selectAttending.UniqueID

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T17:52:53.487

尽管您的代码应该可以工作，但您可以简化并尝试此代码。请注意，我正在使用 jQuery`toggle`方法，该方法采用布尔参数来显示/隐藏元素。

```
$(function (){
   $("#selectAttending").change(function () { 
       $("#ifAttending").toggle(this.value == "Yes")
   })
   .change();//trigger the change event on page load
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T17:54:01.973

代码看起来差不多。我的猜测是您`DropDownList`在客户端上的 ID 不完全是`selectAttending`因为[命名容器](http://www.asp.net/web-forms/tutorials/master-pages/control-id-naming-in-content-pages-vb)。

您可以使用 css 类名，或使用如下语法获取 ClientID：

```
$("#<%=selectAttending.ClientID%>") 
```

# c - 分段错误和结构变量无法打印到文件

> ID：10303239
> 
> 赞同：1
> 
> 时间：2012-04-24T17:48:21.010
> 
> 标签：c, struct, segmentation-fault

当我尝试将结构中的一些变量打印到文件时，我收到了分段错误。当我第一次编写代码时，我能够很好地将结果打印到屏幕上，除了最后出现的分段错误

但是，当我更改代码以便打印到文件时，它会创建文件，但文件是空的，而是`segmentation fault`打印到屏幕上。

有什么建议吗？

```
/* all is an array of struct CASE, 
   artall is an array of struct ARTCOUNT, 
   pLast is last element in all */

void printArtCount (CASE* all, ARTCOUNT* artAll, CASE* pLast)
{
  ARTCOUNT* artWalker = artAll;
  CASE* walker;
  char input[51];
  FILE* spOut;

  printf("File name for artist count output: ");
  scanf("%50s", input);
  spOut = fopen(input, "w");

  while(artWalker->name)
  {
    fprintf(spOut, "%d ", artWalker->count);
    fprintf(spOut, "%s\n", artWalker->name);
    for(walker = all; walker <= pLast; walker++)
    {
       if (strcmp(walker->name, artWalker->name) == 0)
         fputs(walker->art, spOut);
    }
   artWalker++;
  } 

 return;
} 
```

编辑：修复了代码，使分段错误不再出现。现在一切正常。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:01:47.853

您可能正在读取超出其限制的数组。

请尝试以下循环遍历数组元素的方式。

```
len = sizeof(artWalker)/sizeof(artWalker[0]);

for (i=0; i<len ; i++) {
    ...
    artWalker[i]->struct_member;
    ...
} 
```

# linux - 防止 R 在 unix/linux 上使用虚拟内存？

> ID：10303241
> 
> 赞同：11
> 
> 时间：2012-04-24T17:48:41.400
> 
> 标签：linux, r, unix

## 精简版

有没有办法阻止 R 在 unix 机器上使用任何虚拟内存？每当它发生时，都是因为我搞砸了，然后我想中止计算。

## 更长的版本

我正在与其他几个人共享的强大计算机上处​​理大型数据集。有时我会启动需要更多 RAM 的命令，这会导致 R 开始交换并最终冻结整个机器。通常我可以通过`ulimit`在我的`~/.bashrc`

```
ulimit -m 33554432 -v 33554432  # 32 GB RAM of the total 64 GB 
```

这会导致 R 在尝试分配比可用内存更多的内存时抛出错误并中止。`snow`但是，如果我在并行化（通常使用包）时犯了这种错误，`ulimit`则没有任何效果，并且机器无论如何都会崩溃。我猜这是因为`snow`将工作人员作为不在 bash 中运行的单独进程启动。如果我改为尝试在我的中设置`ulimit`，`~/.Rprofile`我只会收到一个错误：

```
> system("ulimit -m 33554432 -v 33554432")
ulimit: 1: too many arguments 
```

有人可以帮我想办法做到这一点吗？

## 侧轨

为什么我不能设置一个`ulimit`0 的虚拟内存`bash`？

```
$ ulimit -m 33554432 -v 0 
```

如果我这样做，它很快就会关闭。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T18:01:06.890

当您运行时`system("ulimit")`，它正在子进程中执行。父级不`ulimit`从父级继承。（这与做`system("cd dir")`, 或`system("export ENV_VAR=foo")`.

将其设置在启动环境的 shell 中是正确的方法。该限制很可能在并行情况下不起作用，因为它是每个进程的限制，而不是全局系统限制。

在 Linux 上，您可以配置 strict(er) overcommit accounting，它试​​图阻止内核处理`mmap`无法由物理内存支持的请求。

这是通过调整 sysctl 参数`vm.overcommit_memory`和`vm.overcommit_ratio`. （谷歌关于这些。）

这可能是防止颠簸情况的有效方法。但是权衡是，当事情表现良好时（将更多/更大的进程塞进内存），您将失去过度使用提供的好处。

# android - 有没有办法在 Android 上的 Safari Mobile 中显示动画 gif？

> ID：10303243
> 
> 赞同：1
> 
> 时间：2012-04-24T17:48:43.960
> 
> 标签：android, mobile, safari, css-animations

我有一个 Web 应用程序，而不是原生 Android 应用程序，我们用作加载图标的动画 gif 不显示它的动画。我浏览过其他网站，似乎没有动画 gif 在 Android 上的 Safari 移动设备中工作，但我一直无法找到证明是这种情况的书面确认。有谁知道为什么android浏览器不显示动画GIF？有解决方法吗？我已经看到很多关于在原生应用程序中的 WebView 中显示动画的主题，但对于直接的 Web 应用程序却没有。我必须用css动画创建图像吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:10:53.213

Android 使用的是 Safari 的底层引擎 webkit，而不是 Safari 本身。

从历史上看，由于图形的合成方式，它不支持动画 GIF，但是用户可以在一些较新的设备上的浏览器高级设置下选择启用它们。这可能不会使它们对您有用。

为了与各种 android 版本广泛兼容，您可能最好使用 javascript 或 css 动画（不确定后者是否可以一直追溯到最早的版本）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T19:28:58.613

在对我正在从事的项目进行测试后，我可以这样说：

*   gif 在 iOS 设备上显示精美（我正在运行 iOS6 的 iPhone4 上进行测试，并且 gif 运行流畅。我也在较新的设备上进行了测试......它只会变得更好！）
*   gif 在 android 上的显示效果很差（我正在运行 android 4.1 的 Galaxy S3 上进行测试）。显示平面图像更好，gif动画滞后很多）。

# java - 如何通过 GSON 传递 JPA 实体？

> ID：10303247
> 
> 赞同：2
> 
> 时间：2012-04-24T17:48:51.617
> 
> 标签：java, gson

我正在使用 GSON 将名为**Profile的 JPA 实体从我的服务器传递到客户端**

```
@Entity  
public class Profile implements Serializable  
{
     private static final long serialVersionUID = 1L;
     @Id 
     @GeneratedValue(strategy = GenerationType.IDENTITY)
     private Long id;
     .
     .
     .
} 
```

GSON 代码：

```
Gson gson = new Gson();
Profile profile = gson.fromJson(json, Profile.class); 
```

但我得到：

```
java.lang.NoClassDefFoundError: javax.persistence.Id
java.lang.reflect.Field.getDeclaredAnnotations(Native Method)
java.lang.reflect.Field.getDeclaredAnnotations(Field.java:188)
java.lang.reflect.AccessibleObject.getAnnotations(AccessibleObject.java:188)
java.lang.reflect.AccessibleObject.getAnnotation(AccessibleObject.java:196)                               
com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getFieldName(ReflectiveTypeAdapt erFactory.java:60)
com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:118)
com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:72)
com.google.gson.Gson.getAdapter(Gson.java:353)
com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.<init>(ReflectiveTypeAdapterFactory.java:82)
com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.createBoundField(ReflectiveTypeAdapterFactory.java:81)
com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:118)
com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:72)
com.google.gson.Gson.getAdapter(Gson.java:353)
com.google.gson.Gson.fromJson(Gson.java:754)
com.google.gson.Gson.fromJson(Gson.java:721)
com.google.gson.Gson.fromJson(Gson.java:670)
com.google.gson.Gson.fromJson(Gson.java:642) 
```

我需要做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:00:51.940

IIRC，当您从 EJB 检索对象时，它不是您定义的类，而是 JPA 创建的存根类（扩展您的类）。由于 GSON 使用反射（从而绕过提供的与您的类规范匹配的方法），它正在检索存根的内部元素（这不是您所期望的）。

您可以通过`getClass()`对检索到的对象进行检查来检查它。

至于如何解决，您有两种选择：

a) 通过复制 JPA 返回的对象来创建您的对象。

b）找到一种方法告诉 GSON 使用类方法而不是反射来检索数据（我不知道这种方法是否存在）。

我不知道是否有某种方法可以自动从 JPA 存根中检索内部对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:11:57.560

将`geronimo-jpa_3.0_spec-1.1.1.jar`（或您正在使用的实际版本）添加到您的 android libs 目录，并将其添加到项目类路径中。

# python - Python 中可以实现真正的动态和匿名函数吗？

> ID：10303248
> 
> 赞同：31
> 
> 时间：2012-04-24T17:48:53.460
> 
> 标签：python

就像可以使用 type(name, base-classes, namespace-dict) 创建动态类一样，是否可以创建动态函数？

我尝试按照以下方式做一些事情：

```
>>> f = type("f", (function,), {})
NameError: name 'function' is not defined 
```

好的，所以我会很聪明，但是：

```
>>> def fn():
...   pass
... 
>>> type(fn)
<type 'function'>
>>> f = type("f", (type(fn),), {})
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: type 'function' is not an acceptable base type 
```

Python 是否像允许动态类一样*专门阻止创建动态函数？*

编辑：注意，我不允许任何使用 exec.. 因为我的问题是 Python 语言本身是否允许这样做。

提前致谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-24T18:07:20.787

您可以使用它`types.FunctionType`来动态创建函数，例如

```
def test_func(): print 'wow' 
dynf = types.FunctionType(test_func.func_code, {})
dynf() 
```

输出：

```
wow 
```

您可能会反对这不是动态的，因为我正在使用来自另一个函数的代码，但这只是一个示例，有一种方法可以从 python 字符串生成代码，例如

```
dynf = types.FunctionType(compile('print "really WoW"', 'dyn.py', 'exec'), {})
dynf() 
```

输出：

```
really WoW 
```

现在是动态的！

OP 担心这种功能的动态性质，所以这里是另一个例子

```
dynf = types.FunctionType(compile('test_func():\ntest_func()', 'dyn.py', 'exec'), globals())
dynf() 
```

输出：

```
wow
wow 
```

注意：像这样创建 Function 对象似乎有局限性，例如传递参数并不容易，因为要传递参数，我们需要将正确的 co_argcount、co_varnames 和其他 12 个变量传递给`types.CodeType`，理论上可以做到但容易出错，更简单的方法是将字符串作为模块导入，并且您拥有完整的功能，例如

```
import types
import sys,imp

code = """def f(a,b,c):
    print a+b+c, "really WoW"
"""
module = imp.new_module('myfunctions')
exec code in module.__dict__
module.f('W', 'o', 'W') 
```

输出：

```
WoW really WoW 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-24T18:07:58.147

您将需要查看[`collections.Callable`](http://docs.python.org/library/collections.html?highlight=collections.callable#collections.Callable)，这只是定义[`__call__`](http://docs.python.org/reference/datamodel.html#emulating-callable-objects).

```
from collections import Callable
class SomeCallableClass(Callable):
    def __call__(self, x):
        print(x)

some_function = SomeCallableClass()
some_function(1) 
```

将给我们`1`作为输出。这使您可以随意构造函数。

```
from collections import Callable
class SomeCallableClass(Callable):
    def __init__(self, n):
        self.n = n
    def __call__(self, x):
        for i in range(self.n):
            print(x)

some_function = SomeCallableClass(2)
some_function("Two times.")
some_function = SomeCallableClass(3)
some_function("Three times.") 
```

这给了我们：

```
Two times.
Two times.
Three times.
Three times.
Three times. 
```

您可以使用它来构建您想要的复杂功能。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-04-28T18:45:36.073

`exec`如果您准备生成[抽象语法树 (AST)](https://docs.python.org/2/library/ast.html)并编译它们，则可以避免生成 then源代码。它可能会稍微好一些，因为数据可以一直保持结构化。

```
from ast import *
from types import *

function_ast = FunctionDef(
    name='f',
    args=arguments(args=[], vararg=None, kwarg=None, defaults=[]),
    body=[Return(value=Num(n=42, lineno=1, col_offset=0), lineno=1, col_offset=0)],
    decorator_list=[],
    lineno=1,
    col_offset=0
)
module_ast = Module(body=[function_ast])

module_code = compile(module_ast, "<not_a_file>", "exec")
function_code = [c for c in module_code.co_consts if isinstance(c, CodeType)][0]

f = FunctionType(function_code, {})

print f() 
```

上面的代码将打印`42`.

要获得有关生成的 AST 应该是什么的灵感，您可以使用：

```
print(dump(parse("def f(): return 42"), include_attributes=True)) 
```

当然，AST 在 Python 2 和 Python 3 中是不同的。

编辑：

在 Python 3.8 中测试和工作

```
from ast import *
from types import *

function_ast = FunctionDef(
    name='f',
    args=arguments(
        args=[], vararg=None, kwarg=None, defaults=[],
        kwonlyargs=[], kw_defaults=[], posonlyargs=[]
    ),
    body=[Return(value=Num(n=42, lineno=1, col_offset=0), lineno=1, col_offset=0)],
    decorator_list=[],
    lineno=1,
    col_offset=0
)
module_ast = Module(body=[function_ast], type_ignores=[])

module_code = compile(module_ast, "<not_a_file>", "exec")
function_code = [c for c in module_code.co_consts if isinstance(c, CodeType)][0]

f = FunctionType(function_code, {})

print(f()) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-25T02:13:52.797

很多人似乎被 Python 中“lambda”的用途误导了：它的唯一目的是定义一个没有名称的简单单表达式函数。而已。在 Python 中，函数确实是一等对象，就像它们在 LISP 中一样：您可以将它们作为参数传递，将它们存储在数据结构中，然后将它们作为结果返回。例如，这是一个组合两个给定函数 f 和 g 的函数，因此 compose(f, g)(x) 等价于 f(g(x))：

```
def compose(f, g) :
    def result(x) :
        return f(g(x))
    #end result
    return result
#end compose 
```

这是一个使用示例：

```
>>> h = compose(lambda x : x + 2, lambda x : x * x)
>>> h(3)
11 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-05-30T19:26:36.847

是的。使用`def`语句：

```
def functor(f): # this dynamically creates a function at module load time
    def inner(g): #this dynamically creates a function on execution of functor
        return f(g)

    return inner 
```

任何涉及正在编译的独立文本的解决方案都等效于`exec`or `eval`，这使您可以使用预先存在的函数和词法捕获的数据项来将新函数拼接在一起。[这](http://en.wikipedia.org/wiki/SKI_combinator_calculus)可能会给你一些想法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-24T18:16:33.133

Python 确实允许创建动态函数。一种方法是使用 lambda：

```
>>> g = lambda x: x**2
>>> g
<function <lambda> at 0xa68c924>
>>> g(3)
9
>>> g = lambda x: x*2
>>> g
<function <lambda> at 0xa68c95c>
>>> g(3)
6
>>> 
```

此处描述了另一种方法：[Python 中的词法闭包](https://stackoverflow.com/questions/233673/lexical-closures-in-python)

因此，您不需要像[Strategy](http://sourcemaking.com/design_patterns/strategy)这样的行为模式的骗局。

如果您能告诉我们您想要解决的问题，这将很有用，这样我们就可以找出适合该问题的语言结构。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-09T19:19:44.267

*jacquev6 的解决方案在为 Python 3 更新后*对我来说效果很好，方法是将**kwonlyargs=[], kw_defaults=[]**添加到 arguments() 的调用中：

```
#!/usr/bin/env python3

from ast import *
from types import *

function_ast = FunctionDef(
    name='f',
    args=arguments(args=[], vararg=None, kwarg=None, defaults=[], kwonlyargs=[], kw_defaults=[]),
    body=[Return(value=Num(n=42, lineno=1, col_offset=0), lineno=1, col_offset=0)],
    decorator_list=[],
    lineno=1,
    col_offset=0
)
module_ast = Module(body=[function_ast])
module_code = compile(module_ast, "<not_a_file>", "exec")
function_code = [c for c in module_code.co_consts if isinstance(c, CodeType)][0]

f = FunctionType(function_code, {})

print(f()) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-30T23:16:55.717

python 对匿名可执行对象提供有限的支持，那就是 lambda，虽然它不支持语句，只支持表达式。

这是由于 python 的语法，不会有简单的解决方法。

如果您需要生成更复杂的可执行对象，那么不要匿名，只需在本地范围内创建一个名称不冲突的函数对象即可。

这些在文档中进行了描述。

> Python lambda 表达式不能包含语句，因为 Python 的语法框架无法处理嵌套在表达式中的语句。但是，在 Python 中，这不是一个严重的问题。与其他语言中添加功能的 lambda 形式不同，如果您懒得定义函数，Python lambda 只是一种简写符号。

> 函数已经是 Python 中的第一类对象，并且可以在本地范围内声明。因此，使用 lambda 而不是本地定义的函数的唯一优点是您不需要为函数发明名称——但这只是函数对象的局部变量（与对象类型完全相同）一个 lambda 表达式产生）被分配！

[https://docs.python.org/3.7/faq/design.html#why-can-t-lambda-expressions-contain-statements](https://docs.python.org/3.7/faq/design.html#why-can-t-lambda-expressions-contain-statements)

# javascript - 使用 javascript 在 android 上启动隐式意图

> ID：10303249
> 
> 赞同：0
> 
> 时间：2012-04-24T17:48:56.203
> 
> 标签：javascript, android, android-intent, webview, implicit

在我的应用程序中，我动态地生成一个 html 来填充 web 视图并向用户显示信息。

此 html 具有自定义 URL，其中包含数据以通过隐式意图将其传递给另一个活动。IE。

```
 <a href="com.somedata://1/some Text">
       some Text
    </a> 
```

所以我将数据：**“1”**和：**“一些文本”**传递给另一个活动。获得意图的活动通过以下方式恢复数据

```
 Uri data = getIntent().getData();
   List<String> segs = data.getPathSegments();
   //here I get the number:
   String number = data.getHost();
   //here I get the text:
   String text = segs.get(0); 
```

它工作得很好但是。这迫使我的应用程序编写两次文本。一个在**href="HereGoesData"**中，另一个在文本本身中，以在 web 视图中向用户显示

我想知道是否有办法避免这种情况，使用 javascript 动态地创建意图的 URL。

所以脚本应该等待用户的点击并恢复文本，并在此基础上创建一个 URL 来启动带有信息的意图。

我对javascript不太了解，但如果可能的话，我认为这应该不难做到。

发送

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:30:57.430

好吧，我做到了。实际上对于javascript中的非新手来说并不难

首先，您必须更改标记以调用使用 javascript: 以编程方式构建 URL 的函数：而不是：

```
 <a href="com.somedata://1/some Text">
      some Text
  </a> 
```

利用：

```
 <a id="someID" href="javascript:void(0)" onclick="buildUrl(this)">
      some Text
  </a> 
```

因此，当您单击它时，它会执行构建 URL 并启动隐式意图的 javascript 函数：

```
 <script type="text/javascript">
    function buildUrl(ele){
      var nodes = ele.childNodes;
      var a = nodes[1].textContent

      var url = "com.somedata://"

    window.location = url + 1 + "/" + a
     }
  </script> 
```

它已经过测试并且可以正常工作。

# haskell - Haskell 将 Int 转换为 Float

> ID：10303251
> 
> 赞同：10
> 
> 时间：2012-04-24T17:48:58.810
> 
> 标签：haskell, floating-point, int, integral

我在使用其中一个新功能时遇到了一些问题，它是 fromIntegral 功能。

基本上我需要接受两个 Int 参数并返回数字的百分比，但是当我运行我的代码时，它一直给我这个错误：

代码：

```
percent :: Int -> Int -> Float
percent x y =   100 * ( a `div` b )
where   a = fromIntegral x :: Float
        b = fromIntegral y :: Float 
```

错误：

```
No instance for (Integral Float)
arising from a use of `div'
Possible fix: add an instance declaration for (Integral Float)
In the second argument of `(*)', namely `(a `div` b)'
In the expression: 100 * (a `div` b)
In an equation for `percent':
    percent x y
      = 100 * (a `div` b)
      where
          a = fromIntegral x :: Float
          b = fromIntegral y :: Float 
```

我阅读了 '98 Haskell 前奏曲，它说有一个名为 fromInt 的函数，但它从未起作用，所以我不得不这样做，但它仍然不起作用。帮助！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-24T17:55:30.537

查看类型`div`：

```
div :: Integral a => a -> a -> a 
```

您不能将输入转换为 a`Float`然后使用`div`.

改用`(/)`：

```
(/) :: Fractional a => a -> a -> a 
```

以下代码有效：

```
percent :: Int -> Int -> Float
percent x y =   100 * ( a / b )
  where a = fromIntegral x :: Float
        b = fromIntegral y :: Float 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-27T00:01:12.047

或者你可以做

```
precent :: Int -> Int -> Float
percent x y = 100 * ( int(a) / int(b) ) 
  where int = fromIntegral 
```

# delphi - 如何使用 FireMonkey（多平台）截屏

> ID：10303256
> 
> 赞同：6
> 
> 时间：2012-04-24T17:49:06.097
> 
> 标签：delphi, screenshot, delphi-xe2, firemonkey

我还没有找到在 FMX.Platform 中获取屏幕截图的功能（无论如何，其他地方都没有......）。

使用 VCL，有很多答案（stackoverflow、google、...）。

但是如何在 Windows 和 Mac OS X 的图像（位图或其他）中获取屏幕截图？

问候，

W。

**更新：**[Tipiweb](http://delphihaven.wordpress.com/2012/01/02/programmatically-taking-a-screenshot-on-os-x/) 的链接为 OS X 提供了一个很好的解决方案。

关于 Windows 部分：我已经对此进行了编码，但我不喜欢使用 VCL 和 Stream 来实现它......有更好的建议，评论吗？

谢谢。

W。

```
uses ..., FMX.Types, Winapi.Windows, Vcl.Graphics;

...

function DesktopLeft: Integer;
begin
  Result := GetSystemMetrics(SM_XVIRTUALSCREEN);
end;

function DesktopWidth: Integer;
begin
  Result := GetSystemMetrics(SM_CXVIRTUALSCREEN);
end;

function DesktopTop: Integer;
begin
  Result := GetSystemMetrics(SM_YVIRTUALSCREEN);
end;

function DesktopHeight: Integer;
begin
  Result := GetSystemMetrics(SM_CYVIRTUALSCREEN);
end;

procedure GetScreenShot(var dest: FMX.Types.TBitmap);
var
  cVCL  : Vcl.Graphics.TCanvas;
  bmpVCL: Vcl.Graphics.TBitmap;
  msBmp : TMemoryStream;
begin
  bmpVCL      := Vcl.Graphics.TBitmap.Create;
  cVCL        := Vcl.Graphics.TCanvas.Create;
  cVCL.Handle := GetWindowDC(GetDesktopWindow);
  try
    bmpVCL.Width := DesktopWidth;
    bmpVCL.Height := DesktopHeight;
    bmpVCL.Canvas.CopyRect(Rect(0, 0, DesktopWidth, DesktopHeight),
                           cVCL,
                           Rect(DesktopLeft, DesktopTop, DesktopLeft + DesktopWidth, DesktopTop + DesktopHeight)
                          );
  finally
    ReleaseDC(0, cVCL.Handle);
    cVCL.Free;
  end;

  msBmp := TMemoryStream.Create;
  try
    bmpVCL.SaveToStream(msBmp);
    msBmp.Position := 0;
    dest.LoadFromStream(msBmp);
  finally
    msBmp.Free;
  end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T09:17:54.493

我构建了一个小应用程序来截取屏幕截图（Windows / Mac），它可以工作:-)！

对于 Windows 和 Mac 兼容性，我使用流。

> *API Mac 捕获 --> TStream*
> 
> *API Windows 捕获 --> Vcl.Graphics.TBitmap --> TStream。*

之后，我将我的 Windows 或 Mac TStream 加载到 FMX.Types.TBitmap 中（从流中加载）

**Windows 单元代码：**

```
unit tools_WIN;

interface
{$IFDEF MSWINDOWS}
uses Classes {$IFDEF MSWINDOWS} , Windows {$ENDIF}, System.SysUtils, FMX.Types, VCL.Forms, VCL.Graphics;

  procedure TakeScreenshot(Dest: FMX.Types.TBitmap);
{$ENDIF MSWINDOWS}

implementation

{$IFDEF MSWINDOWS}

procedure WriteWindowsToStream(AStream: TStream);
var
  dc: HDC; lpPal : PLOGPALETTE;
  bm: TBitMap;
begin
{test width and height}
  bm := TBitmap.Create;

  bm.Width := Screen.Width;
  bm.Height := Screen.Height;

  //get the screen dc
  dc := GetDc(0);
  if (dc = 0) then exit;
 //do we have a palette device?
  if (GetDeviceCaps(dc, RASTERCAPS) AND RC_PALETTE = RC_PALETTE) then
  begin
    //allocate memory for a logical palette
    GetMem(lpPal, sizeof(TLOGPALETTE) + (255 * sizeof(TPALETTEENTRY)));
    //zero it out to be neat
    FillChar(lpPal^, sizeof(TLOGPALETTE) + (255 * sizeof(TPALETTEENTRY)), #0);
    //fill in the palette version
    lpPal^.palVersion := $300;
    //grab the system palette entries
    lpPal^.palNumEntries :=GetSystemPaletteEntries(dc,0,256,lpPal^.palPalEntry);
    if (lpPal^.PalNumEntries <> 0) then
    begin
      //create the palette
      bm.Palette := CreatePalette(lpPal^);
    end;
    FreeMem(lpPal, sizeof(TLOGPALETTE) + (255 * sizeof(TPALETTEENTRY)));
  end;
  //copy from the screen to the bitmap
  BitBlt(bm.Canvas.Handle,0,0,Screen.Width,Screen.Height,Dc,0,0,SRCCOPY);

  bm.SaveToStream(AStream);

  FreeAndNil(bm);
  //release the screen dc
  ReleaseDc(0, dc);
end;

procedure TakeScreenshot(Dest: FMX.Types.TBitmap);
var
  Stream: TMemoryStream;
begin
  try
    Stream := TMemoryStream.Create;
    WriteWindowsToStream(Stream);
    Stream.Position := 0;
    Dest.LoadFromStream(Stream);
  finally
    Stream.Free;
  end;
end;

{$ENDIF MSWINDOWS}
end. 
```

**Mac 单元代码：**

```
unit tools_OSX;

interface
{$IFDEF MACOS}
uses

  Macapi.CoreFoundation, Macapi.CocoaTypes, Macapi.CoreGraphics, Macapi.ImageIO,
  FMX.Types,
  system.Classes, system.SysUtils;

  procedure TakeScreenshot(Dest: TBitmap);
{$ENDIF MACOS}

implementation
{$IFDEF MACOS}

{$IF NOT DECLARED(CGRectInfinite)}
const
  CGRectInfinite: CGRect = (origin: (x: -8.98847e+30; y: -8.98847e+307);
    size: (width: 1.79769e+308; height: 1.79769e+308));
{$IFEND}

function PutBytesCallback(Stream: TStream; NewBytes: Pointer;
  Count: LongInt): LongInt; cdecl;
begin
  Result := Stream.Write(NewBytes^, Count);
end;

procedure ReleaseConsumerCallback(Dummy: Pointer); cdecl;
begin
end;

procedure WriteCGImageToStream(const AImage: CGImageRef; AStream: TStream;
  const AType: string = 'public.png'; AOptions: CFDictionaryRef = nil);
var
  Callbacks: CGDataConsumerCallbacks;
  Consumer: CGDataConsumerRef;
  ImageDest: CGImageDestinationRef;
  TypeCF: CFStringRef;
begin
  Callbacks.putBytes := @PutBytesCallback;
  Callbacks.releaseConsumer := ReleaseConsumerCallback;
  ImageDest := nil;
  TypeCF := nil;
  Consumer := CGDataConsumerCreate(AStream, @Callbacks);
  if Consumer = nil then RaiseLastOSError;
  try
    TypeCF := CFStringCreateWithCharactersNoCopy(nil, PChar(AType), Length(AType),
      kCFAllocatorNull); //wrap the Delphi string in a CFString shell
    ImageDest := CGImageDestinationCreateWithDataConsumer(Consumer, TypeCF, 1, AOptions);
    if ImageDest = nil then RaiseLastOSError;
    CGImageDestinationAddImage(ImageDest, AImage, nil);
    if CGImageDestinationFinalize(ImageDest) = 0 then RaiseLastOSError;
  finally
    if ImageDest <> nil then CFRelease(ImageDest);
    if TypeCF <> nil then CFRelease(TypeCF);
    CGDataConsumerRelease(Consumer);
  end;
end;

procedure TakeScreenshot(Dest: TBitmap);
var
  Screenshot: CGImageRef;
  Stream: TMemoryStream;
begin
  Stream := nil;
  ScreenShot := CGWindowListCreateImage(CGRectInfinite,
    kCGWindowListOptionOnScreenOnly, kCGNullWindowID, kCGWindowImageDefault);
  if ScreenShot = nil then RaiseLastOSError;
  try
    Stream := TMemoryStream.Create;
    WriteCGImageToStream(ScreenShot, Stream);
    Stream.Position := 0;
    Dest.LoadFromStream(Stream);
  finally
    CGImageRelease(ScreenShot);
    Stream.Free;
  end;
end;

 {$ENDIF MACOS}
end. 
```

**在您的 mainForm 单元中：**

```
...
{$IFDEF MSWINDOWS}
  uses tools_WIN;
{$ELSE}
  uses tools_OSX;
{$ENDIF MSWINDOWS}

...
var
  imgDest: TImageControl;
...
TakeScreenshot(imgDest.Bitmap); 
```

如果您有其他想法，请与我交谈 :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-22T18:14:49.650

感谢Tipiweb的代码（在他的回答中），一个基于它的github项目已经启动；进行了一些改进（能够仅截取某个窗口的屏幕截图，或截取完整的屏幕截图）。

该单元名为 xscreenshot.pas（所有平台的单个单元）

github项目页面：

*   [https://github.com/z505/screenshot-delphi](https://github.com/z505/screenshot-delphi)

本单元中可用的实用程序：

```
// take screenshot of full screen
procedure TakeScreenshot(...)
// take screenshot only of a specific window
procedure TakeWindowShot(...) 
```

*MacOS 的最后润色需要一些工作来截取特定窗口的屏幕截图。*

再次感谢 Tipiweb 和他启动这个项目的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T11:59:19.380

您可以使用[此站点](http://delphihaven.wordpress.com/2012/01/02/programmatically-taking-a-screenshot-on-os-x/)上的一个很好的解决方案来制作 Mac OSX 屏幕截图。

对 Windows API 执行相同的操作，如下所示：

```
procedure ScreenShot(x, y, Width, Height: integer; bm: TBitMap);
var
  dc: HDC; lpPal : PLOGPALETTE;
begin
{test width and height}
  if ((Width = 0) OR (Height = 0)) then exit;
  bm.Width := Width;
  bm.Height := Height;
  //get the screen dc
  dc := GetDc(0);
  if (dc = 0) then exit;
 //do we have a palette device?
  if (GetDeviceCaps(dc, RASTERCAPS) AND RC_PALETTE = RC_PALETTE) then
  begin
    //allocate memory for a logical palette
    GetMem(lpPal, sizeof(TLOGPALETTE) + (255 * sizeof(TPALETTEENTRY)));
    //zero it out to be neat
    FillChar(lpPal^, sizeof(TLOGPALETTE) + (255 * sizeof(TPALETTEENTRY)), #0);
    //fill in the palette version
    lpPal^.palVersion := $300;
    //grab the system palette entries
    lpPal^.palNumEntries :=GetSystemPaletteEntries(dc,0,256,lpPal^.palPalEntry);
    if (lpPal^.PalNumEntries <> 0) then
    begin
      //create the palette
      bm.Palette := CreatePalette(lpPal^);
    end;
    FreeMem(lpPal, sizeof(TLOGPALETTE) + (255 * sizeof(TPALETTEENTRY)));
  end;
  //copy from the screen to the bitmap
  BitBlt(bm.Canvas.Handle,0,0,Width,Height,Dc,x,y,SRCCOPY);

  //release the screen dc
  ReleaseDc(0, dc);
end; 
```

之后，包括您的不同单位：

```
uses
{$IFDEF MSWINDOWS}
   mytools_win,
{$ENDIF MSWINDOWS}

{$IFDEF MACOS}
   mytools_mac,
{$ENDIF MACOS} 
```

# embedded - 具有标识的光电管电路

> ID：10303265
> 
> 赞同：0
> 
> 时间：2012-04-24T17:49:57.470
> 
> 标签：embedded, arduino

我有一个光电管，它可以给我电压中的光强度。我想添加一个唯一编号（我可以在芯片上硬编码）以及光电管信息，并以我可以使用数字计算机 (Arduino) 读取的格式发送。我什么时候可以开始有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T00:47:52.947

您可能想查看 maxim 单线总线设备。

它们共享总线连接和接地，您的 ardunio 可以询问总线。

每个设备都有一个唯一的标识符并且可以被读取。

DS2438 是该系列中可以测量电压的廉价成员。

（DS2450 是一个四通道 A/D 转换器，但它是一个有问题的芯片，现在已经过时了。）

[http://www.arduino.cc/playground/Learning/OneWire](http://www.arduino.cc/playground/Learning/OneWire)上的 Ardunio 驱动程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T06:45:25.170

听起来您想购买易于使用、具有 ADC 和少量闪存的廉价微控制器。几乎每个硅供应商都会声称拥有满足该要求的产品，您熟悉并且可以轻松购买适当数量的产品可能与产品的技术细节一样重要。如果您已经拥有 arduino，那么另一个 atmel 部件（例如 8 针 attiny 之一）可能会很有吸引力。

您编写一个带有循环的小程序，该循环通过 ADC 读取光电管，将其与存储在程序旁边的闪存中的 ID 号捆绑在一起，然后通过串行端口之类的东西将其发送到任何需要信息的系统。

串行端口可以是 UART 外设或软件时序循环中的位连接。对于短期运行，人们经常跳过每一端的线路驱动器/接收器，并以逻辑电压而不是 RS232 规范的更高电压（和反向感应，驱动器/接收器为您反向）发出信号。或者您可以使用其他方案，如 SPI 或 I2C 等同步方案也很流行。

# c# - ASP.Net 静态方法总是返回相同的结果

> ID：10303267
> 
> 赞同：0
> 
> 时间：2012-04-24T17:49:59.827
> 
> 标签：c#, asp.net, asp.net-mvc-3

我有一个看起来像这样的静态方法

```
public static User GetUser(Guid? UserID = null)
{
    UserID = UserID ?? GetUserID();
    return (from u in gdb.Users where u.UserID == UserID select u).Single();
} 
```

问题是，它总是返回相同的结果。如您所见，它从我的数据库中获取数据。即使我更改数据库中的数据，它也会返回相同的结果。这是我重新启动调试的第一次，因为它开始从数据库中获取最新值。什么可能导致这种情况？我在任何地方都没有 outputcache 或类似的东西。

# c# - Silverlight C# - 模拟按钮上的 Click 事件

> ID：10303269
> 
> 赞同：0
> 
> 时间：2012-04-24T17:50:04.877
> 
> 标签：c#, silverlight, windows-phone-7, click

我有一个带有**Click**方法的元素。

我想在另一个函数中激活该方法（或：假点击此元素）。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:57:28.697

不，目前没有办法做到这一点。见链接：

[https://stackoverflow.com/questions/4137528/ui-automation-for-wp7](https://stackoverflow.com/questions/4137528/ui-automation-for-wp7)

[windows phone 7：如何以编程方式模拟控制点击](https://stackoverflow.com/questions/7241876/windows-phone-7-how-to-simulate-control-click-programmatically)

**编辑** 这并不完全符合您的要求，但是您可以执行类似的操作并获得相同的结果。我在我的代码中经常使用这种类型的模式以获得相同的结果。

XAML

```
 <Button Name="testClick" Click="testClick_Click">
                    <TextBlock Text="Click Me"></TextBlock>
                </Button> 
```

C＃

```
private void testClick_Click(object sender, RoutedEventArgs e)
    {
        TestFunction(sender as Button);
    }

private void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
         //Call same function as button
         TestFunction(testClick);
    }

private void TestFunction(Button bt)
    {
          //do stuff
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:05:22.797

在你班级的某个地方启动一个 RoutedEventArgs：

```
private RoutedEventArgs evnt; 
```

然后稍后调用：

```
element_Click(element, evnt); 
```

那应该这样做。

# c - c中的向量复制

> ID：10303270
> 
> 赞同：1
> 
> 时间：2012-04-24T17:50:08.747
> 
> 标签：c

如何在 c 中定义一个像向量一样工作的数组？该数组应采用任意数量的值。它可以取 0 个值或 10 个值或 100 个值。

下面的代码有效，但给了我一个堆栈已损坏的运行时错误。

```
int i = 0;
    int* aPtr = &i;
    int* head = aPtr;
    for(i=0;i<6;i++){
        (*aPtr)=i;
        aPtr++;
    } 
```

同样，我如何使用`char* str`任意数量的字符后跟空字符来生成字符串？

面试练习:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:51:30.717

根据您的要求，在 C 中有很多方法可以做到这一点，但您说的是“任意数量的值”（这通常意味着尽可能多的值）。这通常`realloc`用于动态增加数组的大小。随着数组的增长，您还需要保留一些有关数组大小的簿记信息。

```
void
store (vector_t * v, int idx, int value)
{
  if (v->size < idx) {
     v->size = idx * 2;
     v->data = realloc(v->data, v->size);
  }
  v->data[idx] = value;
} 
```

这被标记为“作业”，我留下了一些细节要填写，例如vector_t的定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:47:38.233

这并不太难。要记住的重要一点是，您最初需要使用 malloc(...) 或 calloc(...) 为数组分配内存。之后，您可以在添加或删除项目时轻松分配（或取消分配）内存。动态添加或删除内存（用于存储数组中的项目）的方法是 realloc(...)。[C 动态内存分配](http://en.wikipedia.org/wiki/C_dynamic_memory_allocation)的 wiki 页面实际上信息量很大。我在下面提供了一个示例，展示了如何最初分配一个 char* 数组，然后增加大小并减小大小。

```
#include "stdio.h"
#include "stdlib.h"

int main()
{
  char *myDynamicString;

  /* allocate initial memory */
  myDynamicString = (char *)malloc(sizeof(char) * 2);
  myDynamicString[1] = '\0';

  /* set values */
  myDynamicString[0] = 'A';

  /* prints: A */
  printf("String: %s\n", myDynamicString);

  /* make string bigger */
  myDynamicString = (char *)realloc(myDynamicString, sizeof(char) * 6);
  myDynamicString[5] = '\0';

  /* set values */
  myDynamicString[1] = 'P';
  myDynamicString[2] = 'P';
  myDynamicString[3] = 'L';
  myDynamicString[4] = 'E';

  /* prints: APPLE */
  printf("Bigger String: %s\n", myDynamicString);

  /* make string smaller */
  myDynamicString = (char *)realloc(myDynamicString, sizeof(char) * 3);
  myDynamicString[2] = '\0';

  /* set values */
  myDynamicString[1] = 'Z';

  /* prints: AZ */
  printf("Smaller String: %s\n", myDynamicString);

  /* don't forget to release the memory */
  free(myDynamicString);

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T18:44:57.293

在您的 for 循环中，在第一次迭代之后，您尝试访问指向之前未声明或保留的内存位置的 aPtr。在第一次迭代中，`int i`为您分配了内存。

不过，您可以做的是最初使用`malloc`. 一旦分配了此内存，并且仅遍历分配的堆栈空间，您将不会遇到运行时错误。

PS：如果只是编译，您的代码将不起作用。任何程序都可能包含运行时和编译时错误。您的代码示例是一个非常常见的运行时错误示例。

# django - django modelformset_factory - 管理表单数据丢失

> ID：10303273
> 
> 赞同：2
> 
> 时间：2012-04-24T17:50:18.440
> 
> 标签：django, forms

我仍在与表单集作斗争，我无法真正理解为什么会出现此错误：

u'ManagementForm 数据丢失或被篡改

那是我的代码：请指出我的错误并帮助我解决这个问题。

```
@csrf_protect
@transaction.commit_on_success
def signup(request):
    form = NewUserCreationForm()
    doc_form = NewDocRegisterForm()

    SpecialityLicensesFormSet = modelformset_factory(SpecialityLicenses, extra=1, exclude = ('user'))
    formset = SpecialityLicensesFormSet(queryset=SpecialityLicenses.objects.none())

    if request.method == "POST":

        form = NewUserCreationForm(request.POST or None)
        doc_form = NewDocRegisterForm(request.POST or None)
        formset = SpecialityLicensesFormSet(request.POST or None)

        if form.is_valid() and doc_form.is_valid() and formset.is_valid():

            user = form.save()

            doc = doc_form.save(commit=False)
            doc.user = user
            doc.save()

            print formset
            fset = formset.save(commit=False)

            for n in fset:
                n.user = user
                n.save()

            return HttpResponse("Uzytkownik utowrzony")

    return render_to_response("userena/signup_new.html", {'form': form,
                                                          'doc_form': doc_form,
                                                          'spec_form': formset,}, 
                              context_instance=RequestContex

t(request)) 
```

模板代码：

```
<form action="/en/accounts/doc_register/" method="post">{% csrf_token %}
    {% for field in form %}

    <div>
        {% if field.errors %}
            {{ field.errors|striptags }} |
        {% endif %}

        {{field.label}} | {{ field}}
    </div>

    {% endfor %}

    <hr>

    {% for f in doc_form %}
    <div>
    {% if f.errors %}
    {{f.errors|striptags}} | 
    {% endif %}

    {{f.label}} : {{ f }}
    </div>
    {% endfor %}
    <hr>

    {{ spec_form.management_form }}
    {{ spec_form }}

            <hr>
    <input type="submit" value="Submit"/>
</form>
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T18:10:47.070

如果你做了你就不需要`{{ formset.management_form }}`做`{{ formset }}`，只要你做

```
{{ formset.management_form }}
{% for form in formset %}
  {{ form }}
{% endfor %} 
```

尝试`{{ spec_form.management_form }}`从您的模板中删除该位。看[第三个例子](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#using-a-formset-in-views-and-templates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-23T06:22:47.157

如果表单集缺少前缀，则为表单集添加前缀，它将给出错误

# java - '未能找到样式 mapViewStyle' 错误仍然存 在

> ID：10303274
> 
> 赞同：24
> 
> 时间：2012-04-24T17:50:19.963
> 
> 标签：java, android, eclipse, google-maps, android-xml

我已经在这个应用程序上工作了将近一年（高级项目），几天前它刚刚决定中断。我的应用程序是使用面向 Froyo Android 2.2 的 Eclipse 版本 3.7.2 64 位开发的，使用的是我的 Windows 7 64 位电脑。到目前为止，我已经尝试过：

*   重新排列清单文件中的 uses-library 标签
*   重写地图xml文件
*   删除 R.java 文件并刷新
*   将 mapview 元素放置在布局中
*   重新安装eclipse和android-sdk
*   清理项目
*   创建一个 style.xml 文件并引用它
*   在实际设备上部署
*   恢复到以前的代码

可能还有更多……

我的代码如下：gmap.xml

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mapview"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:clickable="true"
android:apiKey="0xMbgnc-el963gCdpl547hdkgXUILTskZr-T5uvg" // random key posted here
/> 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.PubMe"
  android:versionCode="1"
  android:versionName="1.0">

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-sdk android:minSdkVersion="8"/>

<application android:icon="@drawable/icon" android:label="@string/app_name">
    <uses-library android:name="com.google.android.maps" />
    <activity android:name=".PubMeActivity"
              android:label="@string/app_name"
              android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".MappingActivity"
              android:label="@string/app_name">
    </activity>

</application>
</manifest> 
```

我非常感谢您提前提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-17T05:37:51.520

我建议看看地图演示应用程序。这与 Google Play 服务库捆绑在一起，在您的 SDK 管理器中只需包含 Google Play 服务的示例复选框。然后，您可以在 SDK 目录中找到项目文件 @ `<android-sdk>/extras/google-play-services/samples/maps`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T15:04:35.073

您必须将`/path_to_android-sdk/extras/google/google_play_services/libproject/google-play-services_lib`Library 作为外部库包含到您的项目中，并且还必须包含此 jar 文件`/path_to_android-sdk/extras/google/google_play_services/libproject/google-play-services_lib/libs/google-play-services.jar`。

除此之外，您还应该拥有以下权限：

`<uses-permission android:name="android.permission.INTERNET" /> **<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>** <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-25T01:31:20.603

```
<permission
android:name="com.example.app.permission.MAPS_RECEIVE"
android:protectionLevel="signature" />
<uses-permission android:name="com.example.app.permission.MAPS_RECEIVE"/> 
```

尝试将上述内容添加到您的清单文件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-03T10:39:17.440

我认为 com.google.android.maps.MapView 现在已经过时了，现在我使用了 com.google.android.gms.maps.MapView。请查看[http://developer.android.com/reference/com/google/android/gms/maps/MapView.html](http://developer.android.com/reference/com/google/android/gms/maps/MapView.html)获取帮助，如果您想使用 MapFragment，请访问[http://www.androidhive.info/2013 /08/android-working-with-google-maps-v2/](http://www.androidhive.info/2013/08/android-working-with-google-maps-v2/)网址。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-14T20:44:10.927

这些是您通常应该拥有的地图 v2 的权限

```
 <permission
    android:name="com.example.gmapsapp.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.example.gmapsapp.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission   android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"    /> 
```

并且 api 密钥现在在带有元标记的清单文件中使用

```
 <meta-data
        android:name="com.google.android.gms.version"
        android:value="@integer/google_play_services_version" />
    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="@string/apikey /> 
```

在这里，我包含了一个 gmaps 的 xml 文件示例

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/map"
android:name="com.google.android.gms.maps.SupportMapFragment"
android:layout_width="match_parent"
android:layout_height="match_parent" /> 
```

# html - 链接请求。有哪些工具可以完全使用可视化（gui-interface）方法开发 Web 应用程序？不是内容管理系统

> ID：10303278
> 
> 赞同：-2
> 
> 时间：2012-04-24T17:50:28.750
> 
> 标签：html, css, ajax

是否有类似[Softwell Maker](http://en.wikipedia.org/wiki/Softwell_Maker)的工具？

**Softwell Maker：** Softwell Maker 是用于开发企业富互联网应用程序（HTML + CSS + AJAX）的环境。该工具的重点是软件开发的高生产力、开发人员和他们的客户在开发过程中更好的交互以及开发的应用程序的技术独立性。**使用该软件，可以以 100% 的可视化方法开发 Web 应用程序，而无需编写代码行。**为了实现这一点，Softwell Maker 设计师使用可视化表单和报告 (WYSIWYG)、业务规则，并使用流程图直观地表示其他操作。

可能不会满足所有需求，但我想牢记尽快使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:02:15.843

看起来您想要的是[Adob​​e Bridge](http://www.adobe.com/products/bridge.html)或[Adob​​e Edge](http://labs.adobe.com/technologies/edge/)。

我不确定 AJAX 功能，但它确实允许制作很酷的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:58:39.807

最终这将是一个坏主意。“视觉奇迹创造者”所产生的一切最终都只不过是一个业余应用程序。如果您想创建一个专业的应用程序，您也许可以使用视觉创建器来制作一些基本元素。但在我看来，你充其量完全忘记了ide的视觉部分，而是完全手工制作。只有这样，您才能确定您确实得到了您需要和想要的东西。

# salesforce - 执行代码时如何仅获取 system.debug 输出？

> ID：10303279
> 
> 赞同：6
> 
> 时间：2012-04-24T17:50:42.587
> 
> 标签：salesforce, apex-code

我写了一个简单的程序，想在运行代码时看到输出。当我在 force.com IDE 中使用“匿名执行 apex 代码”命令运行它时，我会得到很多不需要的结果，而我只需要 system.debug 语句。我可以使用记事本或excel，但似乎应该有一种直接的方式（本机或工具）。有什么建议吗？

谢谢，

## 埃尔诺布尔

代码

```
public with sharing class Aa_playground {

 public static void listExp(){
    List<Integer> x = new List<Integer>();
    x.add(1212);
    for (Integer i = 0; i < x.size(); i++){
        System.debug(x[i]);
    }

}
} 
```

* * *

输出

```
Anonymous execution was successful.

24.0     APEX_CODE,DEBUG;APEX_PROFILING,INFO;CALLOUT,INFO;DB,INFO;VALIDATION,INFO;WORKFLOW,INFO
Execute Anonymous: Aa_playground.listExp();
13:40:52.037 (37218000)|EXECUTION_STARTED
13:40:52.037 (37228000)|CODE_UNIT_STARTED|[EXTERNAL]|execute_anonymous_apex
13:40:52.037 (37634000)|METHOD_ENTRY|[1]|01pQ000000062u5|Aa_playground.Aa_playground()
13:40:52.037 (37726000)|METHOD_EXIT|[1]|Aa_playground
13:40:52.037 (37740000)|METHOD_ENTRY|[1]|01pQ000000062u5|Aa_playground.listExp()
13:40:52.037 (37920000)|USER_DEBUG|[9]|DEBUG|1212
13:40:52.037 (37947000)|METHOD_EXIT|[1]|01pQ000000062u5|Aa_playground.listExp()
13:40:52.594 (37979000)|CUMULATIVE_LIMIT_USAGE
13:40:52.594|LIMIT_USAGE_FOR_NS|(default)|
  Number of SOQL queries: 0 out of 100
  Number of query rows: 0 out of 50000
  Number of SOSL queries: 0 out of 20
  Number of DML statements: 0 out of 150
  Number of DML rows: 0 out of 10000
  Number of script statements: 5 out of 200000
  Maximum heap size: 0 out of 6000000
  Number of callouts: 0 out of 10
  Number of Email Invocations: 0 out of 10
  Number of fields describes: 0 out of 100
  Number of record type describes: 0 out of 100
  Number of child relationships describes: 0 out of 100
  Number of picklist describes: 0 out of 100
  Number of future calls: 0 out of 10

13:40:52.594|CUMULATIVE_LIMIT_USAGE_END

13:40:52.038 (38005000)|CODE_UNIT_FINISHED|execute_anonymous_apex
13:40:52.038 (38011000)|EXECUTION_FINISHED 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T18:57:11.363

我想我会在答案中总结我找到的一些信息。

1.  [下载记事本++ v6.1+](http://notepad-plus-plus.org/download/v6.1.1.html)
2.  在 Notepad++ 中，打开（或粘贴）您的调试日志文件。
3.  从菜单中，选择宏 > 开始录制。
4.  按 CTRL-H（或搜索和替换的快捷方式）。
5.  复制此正则表达式`^(?!.+USER_DEBUG.+$).*$`并将其粘贴到“查找内容：”文本框中。
6.  确保搜索模式设置为正则表达式并且“替换为：”文本框为空白。
7.  出现结果对话框时，单击“全部替换”和“确定”。
8.  复制此正则表达式`(?m)^([ \t\s]*|;.*)(\r?\n|$)`并将其粘贴到“查找内容：”文本框中。
9.  确保搜索模式设置为正则表达式并且“替换为：”文本框为空白。
10.  单击“全部替换”和“确定”。然后，关闭“搜索和替换”对话框。
11.  从菜单中，选择宏 > 停止录制。然后选择宏 > 保存当前录制的宏。
12.  输入新宏的名称，并可选择设置快捷键。然后单击“确定”。

要执行您的新宏，请从菜单中选择宏，然后单击您的宏名称。

正则表达式的[功劳归于 nivyaj](https://stackoverflow.com/users/1091807/nivyaj)（见问题评论）。Daniel Ballinger 的[博客文章](http://www.fishofprey.com/2011/02/using-notepad-to-make-apex-test-runner.html)也很有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T23:27:49.383

这可能是不好的做法，但我过去所做的是将 APEX_CODE 的日志级别设置为 INFO 并将调试消息的日志级别也设置为 info

```
System.debug(Logginglevel.INFO, 'Debug Message with INFO level'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T19:34:48.670

您可以通过将级别设置为来消除这些`LIMIT_USAGE_FOR_NS`消息。但是，您无法摆脱AND消息并仍然获得消息，因为这些消息高于过滤器中的消息。很遗憾。`Apex Profiling``None``METHOD_ENTRY``METHOD_EXIT``USER_DEBUG``System.debug()`

# eclipse - UML XMI 到 Ecore

> ID：10303280
> 
> 赞同：2
> 
> 时间：2012-04-24T17:50:48.557
> 
> 标签：eclipse, uml, eclipse-emf, xmi

我有个问题：

在我的建模工具（Enterprise Architect）中，我建模了一个元模型（基于 UML）。现在我想将元模型转换为 Ecore。但我不知道该怎么做。

在 Enterprise Architect 中，我可以将元模型导出到 UML XMI。有谁知道是否可以将生成的 XMI 转换为 Ecore XMI？！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T21:23:36.040

> 有谁知道是否可以将生成的 XMI 转换为 Ecore XMI？！

是的，这是可能的——至少在大纲上是这样。您可以将问题分为两部分：

1.  什么是语义映射？换句话说，您如何将源 XMI 中的概念映射到目标 eCore 模型中的概念？
2.  您将如何在实践中实现这些映射？

**语义映射**

我在这里假设您的元模型专注于静态结构。ECore 不支持声明 EOperations 之外的动态概念。如果相关，请在下面详细了解动态。

我不知道具体的 EA，也不知道它支持哪个版本的 XMI。但是，它将是核心 UML 概念的一些变体：Class、Attribute、Operation、Association、AssociationEnd 等。eCore 具有类似（如果更[小）的一组概念](http://www.kermeta.org/docs/org.kermeta.ecore.documentation/build/html.chunked/Ecore-MDK/ch02.html)： 、、、、、、等。 “类型”概念；例如：`EClass``EAttribute``EDataType``EReference``EOperation`

*   UML 类 --> EClass
*   属性 --> EAttribute
*   操作 --> E操作

所以那里的映射应该是直截了当的。基本上为每个 UML 概念创建一个等效的 ECore 实例。

关系不太明显，但仍然可行。ECore 不直接支持关系；`EReference`是唯一类似的概念。然而，合成关联非常容易，例如：

*   单向可导航的 UML 关联变成单一`EReference`的，复制了最小和最大基数
*   UML 双向关联变为两个`EReferences`，每个方向一个。您还应该设置`EOtherEnd`属性，这实际上表示两者`EReferences`是同一关联的一部分。

希望这能给你这个想法。

**执行**

在定义了你的概念映射之后，有很多关于如何去做的选择。所有人通常都遵循相同的基本模型：

解析源 --> 将源概念映射到目标概念 --> 生成目标文本。

您可以使用 xslt（因为它只是一个 XML->XML 转换）。您还可以使用众多可用的模型到模型 (M2M) 和/或模型到文本 (M2T) 工具包之一。参见例如日食建模项目（[M2M](http://www.eclipse.org/m2m/)、[M2T](http://www.eclipse.org/modeling/m2t/)）。您也可以通过使用 EA API 读取模型而不是生成和解析 XMI 来直接从 EA 获取。你选择哪一个取决于你的环境、技能等。

如果你想看看它在实践中会是什么样子，你可以看看[MagicDraw](https://www.magicdraw.com/)。它提供开箱即用的 ECore 导出。（请注意，这是一个付费工具 - 但 eval 可用）。

直接询问 Sparx 可能也值得：如果 EA 没有可用的 ECore 导出插件/插件，我会有点惊讶。

hth。

* * *

**动力学**

如果您的模型具有动力学（状态模型等），那么您将遇到更多问题。ECore 根本不涵盖这些概念。扩展 ECore 是可能的，这可能是一种选择 - 但它可能需要更多的工作，因为与 ECore 一起使用的工具不太可能理解您的扩展。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-24T22:39:06.750

您可以轻松地从 Ecore 转到 UML，但另一种方式实际上是不可能的。您的插件很少，但是当您尝试使用它们时，它不起作用。

# hsqldb - 没有更多客户端连接时关闭 Hsqldb 服务器

> ID：10303281
> 
> 赞同：0
> 
> 时间：2012-04-24T17:50:52.293
> 
> 标签：hsqldb, shutdown

我像这样启动一个 hsqldb 1.8 服务器：

java -cp "%classpath%;.;Y:\PlantOperations\bldPlantOperations\code\lib\jboss\hsqldb-1.8.0-10.jar;C:\Documents and Settings\BThirup\Application Data\Rockwell Automation\FactoryTalk ProductionCentre \ProcessDesigner\hsqldb-1.8.0-10.jar;C:\Documents and Settings\BThirup\Application Data\Rockwell Automation\FactoryTalk ProductionCentre\ShopOperation\hsqldb-1.8.0-10.jar;" org.hsqldb.Server -database.0 文件：“C:\Documents and Settings\BThirup\Application Data\Rockwell Automation\FactoryTalk ProductionCentre\logs\ApplicationLog\mydb”-dbname.0 xdb

我有多个使用 jdbc:hsqldb:hsql://localhost/xdb;shutdown=true 连接的客户端（无特定顺序）

当没有更多客户端连接时，我想关闭 Hsqldb 服务器。

我在文档中读到，在 jdbc url 中添加 shutdown=true 会导致 hsqldb 在没有更多客户端连接后关闭。但我没有看到这种情况发生。

我也试过

```
Properties info = new Properties();
            info.put("user", "SA");
            info.put("password", "");
            info.put("shutdown", "true");
conn = DriverManager.getConnection(dbString, info); 
```

以上也不会导致 hsqldb 服务器在最后一个客户端断开连接后关闭。

对此的任何帮助表示赞赏

巴拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:06:56.777

该`shutdown=true`属性适用于进程内连接，而不是通过服务器连接。

如果您在服务器启动时将此属性添加到数据库 URL，它可能会起作用。这将导致数据库关闭，进而导致服务器关闭。

java -cp ... org.hsqldb.Server -database.0 文件：“C:\Documents and Settings\BThirup\Application Data\Rockwell Automation\FactoryTalk ProductionCentre\logs\ApplicationLog\mydb;shutdown=true”-dbname.0数据库

与此无关，您只需要在类路径中引用一次 hsqldb-1.8.0-10.jar。

# android - Android jar 的 ant 版本和 Eclipse 导出之间的差异？

> ID：10303283
> 
> 赞同：0
> 
> 时间：2012-04-24T17:50:55.407
> 
> 标签：android, ant, jar

我正在尝试创建一个 Android 库 JAR，并希望使用 ant 进行自动构建。

但是，我注意到当我使用 ant 版本时，jar 文件会添加一个额外的 android/annotation 文件夹，其中包含 TargetApi.class 和 SuppressLint.class。当我尝试使用 jar 运行应用程序时，这会导致问题，我得到：

```
java.lang.IllegalArgumentException: already added: Landroid/annotation/SuppressLint; 
```

我怎样才能让 ant 不尝试添加这些看起来多余的类？

具体来说，问题似乎是 ant 在我的 lib 中包含 annotations.jar，然后当我的其他项目导入该 lib 时，它遇到与自己的 annotations.jar 冲突。

**编辑：**确定这是与 ProGuard 相关的，因为它创建的 original.jar 没有 annotations.jar 类，但 obfuscated.jar 有。仍然不确定如何绕过这一步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:50:13.683

在 ProGuard 配置中，我让它只保留我的包名中的文件。

# jquery - jQuery 更改可见性浏览器性能问题

> ID：10303287
> 
> 赞同：-1
> 
> 时间：2012-04-24T17:51:10.473
> 
> 标签：jquery, performance, cross-browser

我有一个关于 jQuery 和 JavaScript 性能的问题。我的应用程序正在使用具有多个选项卡的布局并在它们之间切换，我编写了以下代码：

```
function openTab(id, holder) {
   $("#" + holder).children(".tab").addClass("visHidden");
    $("#" + id).removeClass("visHidden");
   $("#"+holder+" .tab-nav").removeClass("tab_navAkt");
   if (/^\d*$/.test(id)) {                                 
      $("#"+holder+" ." + id).addClass("tab_navAkt");
   }
} 
```

它这样做：将类添加`visibility:hidden`到所有选项卡，然后从我想要查看的选项卡中删除此类，然后如果需要，它将选项卡控制元素设置为活动状态。我的问题是，这段代码怎么可能在 Firefox 或 Chrome 中需要大约 3 毫秒，而在 Internet Explorer 7 和 8 中大约需要 500 毫秒？选项卡中的平均数据大小为 500kb，我认为这并不算多。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:01:03.157

在 JavaScript 执行方面，IE 通常比 FF 和 Chrome 慢。但是您可以优化您的代码并尝试在 IE 中的性能。尝试这个。

```
function openTab(id, holder) {
   var $holder = $("#" + holder);
   $holder.children(".tab").addClass("visHidden");
   $("#" + id).removeClass("visHidden");
   $holder.find(".tab-nav").removeClass("tab_navAkt");
   //you can get rid of this check. jQuery will addClass only if it finds the element
   //if (/^\d*$/.test(id)) {                                 
      $holder.find(" ." + id).addClass("tab_navAkt");
   //}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:59:30.273

我的猜测是它是导致问题的正则表达式。此外，您可以使用`.show()`and重写它`.hide()`。

```
 $("#" + holder).children(".tab").hide();
   $("#" + id).show().addClass("tab_navAct"); 
```

# c++ - 为什么 C++ 中的默认用户定义析构函数会增加执行时间？

> ID：10303288
> 
> 赞同：1
> 
> 时间：2012-04-24T17:51:12.583
> 
> 标签：c++, destructor

在我的项目中，我们有 1 个用户定义的默认析构函数，它是为遵循项目的一些编码标准要求而编写的。这个析构函数的类被实例化了 200 多次，这增加了整体响应时间，当删除这个析构函数时，我观察到响应时间提高了 28 毫秒。谁能解释为什么会出现这种时间差异，尽管这些只是默认析构函数，但由用户定义，无论如何都会由编译器调用。

使用“用户定义的默认析构函数”我的意思是一个空的析构函数：

`~Classname(){ };`

什么都不做，只是为了满足项目的标准而添加。

为了更清楚起见，**这个析构函数不属于以下类别：**

**1** .Destructors 声明为“虚拟”。

**2** .静态类和单例类的析构函数。

**3** .使用'new'关键字创建对象的类的析构函数。

**4** .使用'delete'关键字删除对象的类的析构函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T19:27:08.350

我遇到了几个编译器无法正确识别空析构函数的地方

*   如果 MSVC 返回具有用户定义的析构函数的对象，则 MSVC 无法内联函数，即使该析构函数为空。

*   `is_trivial`在我测试过的任何编译器上，诸如 等类型的特征`is_pod`都无法按照您希望使用空析构函数的方式工作。这可能会改变为特定类型实现某些算法或容器的方式。

*   用户定义的析构函数可能会更改异常处理代码，因为编译器必须创建代码来展开堆栈。同样，如果我没记错的话，MSVC 也不能为此目的正确识别空析构函数。

*   `new T[]`如果 T 具有非平凡的析构函数，您所做的每个分配都必须为项目计数分配额外的空间。此外，这可能会改变内存块的对齐方式，这会真正损害性能。MSVC 或 g++ 都没有针对空析构函数正确优化这一点。

# nhibernate - Loquacious Nhibernate 和composedID 外键

> ID：10303292
> 
> 赞同：1
> 
> 时间：2012-04-24T17:51:46.233
> 
> 标签：nhibernate

我有两个类，我试图在 Loquacious Nhibernate 中映射。

映射如下

```
 public class FooMap : ClassMapping<Foo>
  {
    Table("FooTableName");
    ComposedId(compIDMapper =>
      {
        compIDMapper.Property(x => x.SomeInt, m => m.Column("SomeInt"));
        compIDMapper.ManyToOne(x => x.SomeReference, m => m.Column("SomeReference"));
      });
  }

  public class BarMap : ClassMapping<Bar>
  {
    Table("BarTableName");
    Id(x => x.ID, m => m.Column("barID"));

    ManyToOne(x => x.Foo, m => m.Columns( columnMapper =>
                                                             {
                                                               columnMapper.Name("SomeIntID"); //Both of these columns are in the BarTableName like they should be
                                                               columnMapper.Name("SomeReferenceID");
                                                             }));
  } 
```

但是在构建映射时，我收到以下错误：

```
Foreign key (FK554EAF2427B2CA28:BarTableName[SomeIntID])) must have same number of columns as the refe,renced primary key (FooTableName[SomeInt, SomeReference]) 
```

我不确定我做错了什么，看起来它应该可以工作，但我一直在努力解决这个问题，但没有得到任何结果。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T01:52:44.057

终于想通了，把这个贴出来给其他来的人。

我的问题是误解了列映射器。它应该是以下内容：

```
ManyToOne(x => x.Foo, m => m.Columns(new Action<IColumnMapper>[]
                                                                {
                                                                  colMapper => colMapper.Name("SomeIntID"),
                                                                  colMapper => colMapper.Name("SomeReferenceID")
                                                                })); 
```

这解决了这个问题。当我查看函数签名时应该注意到它，但我完全错过了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-11T10:04:04.913

还有另一种更短的方式

```
ManyToOne(x => x.Foo, m => m.Columns(c=> c.Name("SomeIntID"),c => c.Name("SomeReferenceID"))); 
```

# google-drive-api - 我的应用程序能否收到有关我的 Google Drive 文件夹中文件更新的通知？

> ID：10303297
> 
> 赞同：9
> 
> 时间：2012-04-24T17:52:15.953
> 
> 标签：google-drive-api

我希望在我的 Google Drive 目录（或子目录）中添加、删除或修改文件时通知我的应用程序。Google Drive 是否支持 webhook 或用于 3rd 方集成的类似机制？我在 API 文档中找不到类似的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T18:02:35.470

我们现在支持早期访问计划成员的推送通知。我们最近的[一篇博客文章](http://googleappsdeveloper.blogspot.com/2013/01/join-google-drive-sdk-early-access.html)宣布了这一点。

> Google Drive API 推送通知 我们还在 Google IO 2012 上向开发人员介绍了[即将推出的推送通知](http://youtu.be/25HkrDjg6sQ?t=31m5s)系统。推送通知将允许您在 Google Drive 中的文件被修改时获得近乎即时的通知。在过去，您通常必须经常轮询 Drive API 以检查文件是否已被修改以获得类似的结果，推送通知使这非常有效。

[在这里](https://docs.google.com/a/google.com/spreadsheet/viewform?formkey=dGZjM25kdnF2dzBLYktaU3BMQ0pIMEE6MA#gid=0)加入抢先体验计划。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:35:29.920

Google IO 2012 发布了关于推送通知的公告，并且 IO 的应用程序脚本示例可作为网络应用程序**Drive Eye**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T21:59:44.010

您可以使用定期触发器创建一个简单的应用程序脚本，该触发器使用 UriFetch 调用您的应用程序。

[https://developers.google.com/apps-script/](https://developers.google.com/apps-script/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-05T17:41:04.073

对于那些寻找可以在电子邮件中更新它们的东西的人，有一个带有说明的 Google Drive Folder Monitor appscript，您可以在此处阅读：http: [//www.jellybend.com/2012/12/19/monitor-google-drive-文件夹与谷歌应用脚​​本/](http://www.jellybend.com/2012/12/19/monitor-google-drive-folders-with-google-apps-script/)

# actionscript-3 - IRC河豚加密模式？

> ID：10303306
> 
> 赞同：1
> 
> 时间：2012-04-24T17:52:51.473
> 
> 标签：actionscript-3, irc, blowfish

我一直在用这个工具做一些测试：[http://crypto.hurlant.com/demo/CryptoDemo.swf](http://crypto.hurlant.com/demo/CryptoDemo.swf) 并试图匹配从 Mirc + blowfish 获得的河豚结果（来自过去的 fish.secure.us v1 .30)。我一辈子都找不到它正在使用什么模式......没有什么匹配的......有谁知道它使用什么模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-31T00:38:51.180

IRC 的 Blowfish 插件似乎使用 MODE_ECB（电子密码书），这可能是河豚算法中最不安全的。

对于加密，他们将明文分成 8 字节的块（Blowfish ECB 块大小）。然后他们分别加密每个 8 字节块，并获取每个加密块的输出，并将其分块为 (2) 个 4 字节长，并对每个长进行 base64 编码，将它们填充为 6 个 base64 字符的长度。

对于解密，这个过程是相反的，但因为它有点令人困惑，我也会描述它。取 12 个密文字节，将每个 6 字节表示解码为 long ('>L')，这样您现在就有 8 个字节，然后将其传递给河豚解密算法。

```
import struct, string
from Crypto.Cipher import Blowfish

def blow(key, plaintext):
    if not isinstance(plaintext, str):
        raise TypeError('Plaintext must be str')
    else:
        if len(plaintext) % 8 != 0:
            plaintext += "\0" * (8-(len(plaintext)%8))

        cipher = Blowfish.new(key, Blowfish.MODE_ECB)

        ciphertext = ''
        charset = list('./' + string.digits + string.ascii_lowercase + string.ascii_uppercase)
        for j in range(0,len(plaintext),8):
            block = cipher.encrypt(plaintext[j:j+8])
            (low, high) = struct.unpack('>LL', block)

            while high:
                ciphertext += charset[high%64]
                high //= 64
            if len(ciphertext) % 6 != 0:
                ciphertext += charset[0] * (6-len(ciphertext)%6)

            while low:
                ciphertext += charset[low%64]
                low //= 64
            if len(ciphertext) % 6 != 0:
                ciphertext += charset[0] * (6-len(ciphertext)%6)

        assert len(ciphertext) % 12 == 0
        return ciphertext

def unblow(key, ciphertext):
    if not isinstance(ciphertext, str):
        raise TypeError('Ciphertext must be str')
    else:
        assert len(ciphertext) % 12 == 0
        cipher = Blowfish.new(key, Blowfish.MODE_ECB)
        plaintext = bytearray()

        charset = list('./' + string.digits + string.ascii_lowercase + string.ascii_uppercase)
        for j in range(0,len(ciphertext),12):
            high = 0
            for k in range(6):
                high |= charset.index(ciphertext[j+k]) << (k*6)
            low = 0
            for k in range(6):
                low |= charset.index(ciphertext[j+k+6]) << (k*6)
            plaintext += cipher.decrypt(struct.pack('>LL', low, high))

        return plaintext.decode('utf8').rstrip("\0") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:56:11.310

它只是使用 ECB 模式，但是 base64 编码是以一种奇怪的方式完成的——每个 32 位密文块被独立编码为 6 个 base64 字符。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T23:24:22.727

IRC 不支持任何加密模式，除非您使用 SSL，否则所有内容都以纯文本形式传输。Blowfish 是一种加密算法，它将翻译您的消息（在 mIRC 上）或您正在使用的任何客户端。

没有河豚的消息将被发送到服务器：

`PRIVMSG #Channel :YourMessage`

使用河豚的消息将被发送到服务器：

`PRIVMSG #Channel :w8e09w8e09q8eqiwoqweqweqweqwueqwehwqheqywgBlowFishEncryption`

# jakarta-ee - Bean Validation：针对数据库的自定义验证

> ID：10303311
> 
> 赞同：2
> 
> 时间：2012-04-24T17:53:31.853
> 
> 标签：jakarta-ee, jsf-2, cdi

以下代码有效，我需要知道的是，有没有办法使用注释（如@EJB、@Inject、@Resource）注入 EJB（或 ManagedBean）

```
public class UniqueUsernameConstraintValidator implements ConstraintValidator<UniqueUsername, String> {

//TODO research on how to inject an EJB/BusinessObject (@EJB does not work)
private JournalBean bean;

@Override
public void initialize(UniqueUsername annotation) {
//This is a fall back there must be a better way
    try {
        javax.naming.Context context = new InitialContext();
        bean = (JournalBean)context.lookup("java:global/Journal2/JournalBean");
    } catch (NamingException e) {
        logger.info("NamingException: " + e.getMessage());
    }
}

public boolean isValid(String value, ConstraintValidatorContext context) {
    if (value == null) {
    return false;
}

if (null == bean.getUserByUsername(value)) {
    return true;
}
    return false;
}
} 
```

以下代码不起作用（变量逻辑从未初始化 - null），我在 WEB-INF 目录中有一个空的 beans.xml 文件。当我直接在 ManagedBean、Servlet 或 EJB 中使用 @Inject 时，它可以工作

```
public class UniqueUsernameConstraintValidator implements ConstraintValidator<UniqueUsername, String> {

@Inject
private Journal logic;

@Override
public void initialize(UniqueUsername annotation) {
    logger.info("initialize("+annotation+")");
}

@Override
public boolean isValid(String value, ConstraintValidatorContext context) {
    if (value == null) {
        return false;
    }

    logger.warning("TODO: IMPLEMENT VALIDATION");   
    try {
        if (null != logic.getUserByUsername(value)) { //Null
            return true;
        }
    } catch (EntityAccessorException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return false;
    }
} 
```

有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:07:32.683

这个想法是编写您的自定义（启用注入）*ConstraintValidatorFactory*，然后将注入处理到*ConstraintValidator*实例中。正如上面提到的答案，[Seam-Validation 模块](http://Seam-Validation%20module)是一个了解它是如何完成的好地方。

在 Bean Validation 1.1 中，容器 (CDI) 集成将成为规范的一部分。见[http://beanvalidation.org/proposals/BVAL-238/](http://beanvalidation.org/proposals/BVAL-238/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:21:12.607

它不是开箱即用的，但很容易通过购买桥接 Hibernate Bean Validation 到 CDI 来实现。

检查一个几乎相同的问题的[答案](https://stackoverflow.com/a/10102300/512155)。

# android - Android SoundPool 类在我的应用程序中表现得很奇怪

> ID：10303312
> 
> 赞同：0
> 
> 时间：2012-04-24T17:53:32.113
> 
> 标签：android, android-mediaplayer, performance

我有一首歌使用 Android 在后台连续播放`MediaPlayer`，我的意思是它永远循环播放。

我也有`25-30` 很短的声音，我使用`SoundPool`Class 以离散的持续时间播放，而且它们还必须用主歌一次又一次地播放。

每个声音都是`0.5`第二个持续时间，其中一些是`0.7Mb`大小，而一首歌的平均大小约为`0.4Mb`.

我能够在我制作这个应用程序的设备上顺利完成这整个事情，然后我才知道 SoundPool 在双核手机上播放有问题。所以我撤回了对他们的支持。

最近我在运行 2.3.3 的旧设备上测试了该应用程序，新问题是声音似乎在前 4-5 个周期内正常播放，即直到主歌播放 4-5 次，然后在第 6 次，有声音播放有明显延迟，我记录了 的值，`SoundPool.play()`发现延迟约为（1-2 秒），而且这个问题只出现在低端手机上，为什么会发生这种情况，我想是问题造成的由`SoundPool`类，根本不是硬件问题，因为我测试它的设备有足够的`RAM`即`500Mb`和体面的`600Mhz`处理器。

我真的需要解决这个问题，因为我希望我的应用程序可以在大多数设备上运行，暂时除了双核手机。

此外，我不能使用 MediaPlayer 播放我的声音，因为我不想增加 CPU 开销并使我的应用程序滞后更多，而且我不知道我想提前播放多少声音。

任何有关如何解决此问题和减少滞后的线索，都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:55:41.933

音频/视频播放通常是有问题的，因为涉及到很多硬件/低级软件因素（可能有专门的解码硬件在单独的芯片上和/或嵌入到 cpu 中，所有这些都与软件解码器相结合，在蓝牙之间切换，耳机插孔和您拥有的 2 个扬声器，从内核到 Android 系统的巨大软件堆栈等）。它可能是 Android 设备中最脆弱的子系统。许多设备在该区域具有较小的怪癖，并且与 Mhz / RAM / Dualcore 没有直接关系。不幸的是，你必须和他们中的一些人一起生活:(

你最好的选择是尝试不同的方式来播放/压缩你的音频。诸如在 5 个周期后重新开始播放等

# c# - 将 StringWriter 转换为字符串 []

> ID：10303315
> 
> 赞同：5
> 
> 时间：2012-04-24T17:53:51.073
> 
> 标签：c#

我需要创建一个`TextWriter`来填充一些数据。我将其`StringWriter`用作 TextWriter 并且业务逻辑工作正常。

我有一个无法更改的技术要求，因为它可能会破坏所有客户。`string[]`我需要从`TextWriter`由行分隔的字符串数组。

我试过这个但没有奏效：

```
using System;
using System.IO;
using System.Text;

namespace TextWriterToArrayOfStringsDemo
{
    internal static class Program
    {
        private static void Main()
        {
            var stringBuilder = new StringBuilder();
            using (TextWriter writer = new StringWriter(stringBuilder))
            {
                writer.Write("A");
                writer.WriteLine();
                writer.Write("B");
            }

            string fullString = stringBuilder.ToString();
            string replaced = fullString.Replace('\n', '\r');
            string[] arrayOfString = replaced.Split('\r');

            // Returns false but should return true
            Console.WriteLine(arrayOfString.Length == 2);
        }
    }
} 
```

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T18:00:41.320

尝试使用`Environment.NewLine`拆分而不是`'\n'`：

```
 var stringBuilder = new StringBuilder();
        using (TextWriter writer = new StringWriter(stringBuilder))
        {
            writer.Write("A");
            writer.WriteLine();
            writer.Write("B");
        }

        string fullString = stringBuilder.ToString();
        string[] newline = new string[] { Environment.NewLine };
        string[] arrayOfString = fullString.Split(newline, StringSplitOptions.RemoveEmptyEntries);

        // Returns false but should return true
        Console.WriteLine(arrayOfString.Length == 2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T18:02:12.793

一个快速的解决方法是使用正则表达式拆分：

```
string[] arrayOfString = 
   System.Text.RegularExpressions.Regex.Split(stringBuilder.ToString(), "\r?\n") 
```

# c# - 对齐控制台输出的文本？

> ID：10303319
> 
> 赞同：4
> 
> 时间：2012-04-24T17:54:05.153
> 
> 标签：c#, .net, text, alignment, console.writeline

我想要做的是使我通过 Console.Writeline 方法输出的文本无论长度如何都能完美排列。

```
Example:
// Notice that no matter the length of the text on the left, 
// the text on the right is always spaced at least 5 spaces.

    this is output          text
    this is also output     text
    output                  text
    my output               text 
```

我是否必须为此编写自己的方法，或者.Net 是否包含我已经可以使用的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:48:47.217

改为在 Linq 中思考！

```
var outputs = new List<string>() {
                        "this is output",
                        "this is also output",
                        "output",
                        "my output"
                    };

var size = outputs.Max (str => str.Length) + 5;

Console.WriteLine ( 
           string.Join(Environment.NewLine, 
                       outputs.Select (str => str.PadRight( size ) + "Text" ) )
                   );

/*
this is output          Text
this is also output     Text
output                  Text
my output               Text
*/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:24:54.893

像这样的东西应该适合你。希望您可以根据自己的需要进行调整。

```
string[] outputs = {
                        "this is output",
                        "this is also output",
                        "output",
                        "my output"
                    };

// order outputs in descending order by length
var orderedOutputs = outputs.OrderByDescending(s => s.Length);

// get longest output and add 5 chars
var padWidth = orderedOutputs.First().Length + 5;

foreach (string str in outputs)
{
    // this will pad the right side of the string with whitespace when needed
    string paddedString = str.PadRight(padWidth);
    Console.WriteLine("{0}{1}", paddedString, "text");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T18:53:00.620

您还可以查看解释 .NET 字符串格式的[此页面。](http://www.dotnetperls.com/string-format)而不是手册`PadLeft`，`PadRight`您可以直接在格式化字符串中声明填充大小。类似的东西

```
var offset = outputs.Max( s => s.Length );
var formatString = "{0,-" + offset + "}     {1}";

foreach( var dataPoint in /*[your collection of data points]*/ )
{
    Console.WriteLine( formatString, /*[first value]*/, /*[second value]*/ );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-03T06:17:57.993

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.IO;

    namespace ConsoleApplication1
    {
     class Program
    {
    static void Main(string[] args)
    {

        string[] lines = File.ReadAllLines("E:\\Exp2Act1.txt");

        int what1 = (Console.WindowWidth / 2) - 18;
        int here1 = (Console.WindowHeight / 3);
        Console.SetCursorPosition(what1, here1);
        Console.WriteLine(lines[0]);
        int what2 = (Console.WindowWidth / 2) - 18;
        int here2 = (Console.WindowHeight / 3) + 1;
        Console.SetCursorPosition(what2, here2);
        Console.WriteLine(lines[1]);
        int what3 = (Console.WindowWidth / 2) - 18;
        int here3 = (Console.WindowHeight / 3) + 2;
        Console.SetCursorPosition(what3, here3);
        Console.WriteLine(lines[2]);
        int what4 = (Console.WindowWidth / 2) - 18;
        int here4 = (Console.WindowHeight / 3) + 3;
        Console.SetCursorPosition(what4, here4);
        Console.WriteLine(lines[3]);
        int what5 = (Console.WindowWidth / 2) - 18;
        int here5 = (Console.WindowHeight / 3) + 4;
        Console.SetCursorPosition(what5, here5);
        Console.WriteLine(lines[4]);
        int what6 = (Console.WindowWidth / 2) - 18;
        int here6 = (Console.WindowHeight / 3) + 5;
        Console.SetCursorPosition(what6, here6);
        Console.WriteLine(lines[5]);
        Console.Read();
    }
} 
```

}

# c# - 如何使用基类中的变量调用基类中的方法？

> ID：10303320
> 
> 赞同：1
> 
> 时间：2012-04-24T17:54:09.867
> 
> 标签：c#, oop, class, variables, inheritance

我想从我的基类中调用一个方法，该方法也有一个来自基类的变量：

```
 class BaseClass
    {
    public string BaseClassMethod()
    {
        if (CheckKeyboard(Keys.Up))
            return "Up";

        if (CheckKeyboard(Keys.Down))
            return "Down";

        if (CheckKeyboard(Keys.Enter) && keyboardOn == true) <-- keyboardOn is a variable from my BaseClass that i want to be able to use :/
        {
            counter = 0; <-- counter is also one of those variables
            return "Enter";
        }

        return "";
    }
    }

    class InheritFromBase : BaseClass
    {
    public string Update()
    {
        currentKeyboard = Keyboard.GetState();
        currentMouse = Mouse.GetState();

        if (BaseClassMethod() == "Up")
            if (selected > 0)
                selected--;
            else
                selected = buttonList.Count - 1;

        if (BaseClassMethod() == "Down")
            if (selected < buttonList.Count - 1)
                selected++;
            else
                selected = 0;

        if (BaseClassMethod() == "Enter")
            return buttonList[selected];

        previousKeyboard = currentKeyboard;
        previousMouse = currentMouse;

        return "";
    }
    } 
```

并且由于我从另一个类调用该方法，因此似乎无法访问他的变量（值）然后更改它们。请帮助:)谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:56:58.817

您可以使用`protected` [访问修饰符](http://msdn.microsoft.com/en-us/library/bcd5672a%28v=vs.71%29.aspx)来允许从派生类访问变量。

例如：

```
protected bool keyboardOn = false; 
```

或者

您可以像这样使它们成为基类的公共属性：

```
 public bool KeyboardOn { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:58:33.577

在类之外公开局部变量通常是不好的做法。您可以通过[受保护](http://msdn.microsoft.com/en-us/library/bcd5672a%28v=vs.100%29.aspx)的访问修饰符来做到这一点，但是我建议您通过`protected`属性或方法公开它。

假设`keyboardOn`是您的基类中的类级变量：

```
public class BaseClass
{
    private bool keyboardOn;

    protected bool KeyboardOn;
    {
        get
        {
            return this.keyboardOn;
        }
    }    
}    

public class InheritFromBase : BaseClass
{
    ....

    if(this.KeyboardOn)
    {
        // do something based on base property
    }

    ....
} 
```

以上假设您只想从基类中`get`获取状态变量。`keyboardOn`如果您还需要从继承类中设置变量的值，您可以将 a 添加`set`到公开属性中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:58:41.097

您需要通过将这些变量设为公共（不要）或编写一个返回它的 getter 方法（执行）来使这些变量在您的基类中成为全局且可访问的。然后在继承类中，做：`MyBase.getVariable()`获取变量或者`MyBase.function()`调用基类中的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T17:59:06.073

您可以像这样在您的超类中创建一个公共吸气剂：

```
public bool isKeyboardOn() {
    return keyboardOn;
} 
```

这样您就不必公开变量，并且与将变量设置为受保护的不同，您不会冒被任何其他类更改变量的风险。

# objective-c - 如何在不重新压缩的情况下在 iOS 上编辑 JPEG 数据？

> ID：10303322
> 
> 赞同：1
> 
> 时间：2012-04-24T17:54:13.057
> 
> 标签：objective-c, ios, uiimage, jpeg

比如说，我从用户的相册中得到了一张图片，现在我想修改文件中的元数据或 MCU，然后将其另存为新照片或重写原始照片。换句话说，我必须在无损模式下编辑 JPEG 数据块。

我使用以下默认代码抓取图像：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
      [picker dismissModalViewControllerAnimated:YES];
      selectedImage.image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:17:31.620

[您可以使用库 iphone-exif](http://code.google.com/p/iphone-exif/)更改元数据，而无需对 JPEG 图像进行新的压缩。

**更新 1：** 您可能还会查看[libjpeg](http://en.wikipedia.org/wiki/Libjpeg)，尤其是 jpegtran（用于在不同 JPEG 格式之间进行无损转码的实用程序。）

据我所知，如果没有新的压缩，您无法更改 MCU（MCU 大小！）。

# applet - 在子文件夹中加载小程序

> ID：10303327
> 
> 赞同：0
> 
> 时间：2012-04-24T17:54:49.070
> 
> 标签：applet, web, subdirectory

我的网站根目录中有一个小程序，该小程序用于根目录和子文件夹中的页面。当我在根目录中打开小程序页面时，它可以完美运行。但是我打开子文件夹的页面后无法打开小程序。如果我打开子文件夹的第一页然后打开根目录页面，也会发生同样的事情。页面错误总是第二个打开。

对不起我的英语不好。这是谷歌翻译的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:33:50.217

将`codebase='/'` 属性/值对添加到小程序以确保 JRE 始终查找相对于站点根目录的 Jar。将脚本、样式或图像加载到网页中的原理是相同的，因此您需要在 Web 开发中弄清楚这一点！

# ios - 将 NavigationBar 背景设置为纯色

> ID：10303328
> 
> 赞同：10
> 
> 时间：2012-04-24T17:54:53.970
> 
> 标签：ios, uinavigationbar

有什么办法可以将导航栏的背景设置为`UINavigationController`纯色？

我知道我可以改变 Tint 颜色，但这仍然给我留下了渐变/玻璃效果。

有什么办法可以摆脱它，而只有一种普通的旧纯色？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-21T16:18:48.933

以下代码还导致导航栏的纯色：

```
[[UINavigationBar appearance] setBackgroundImage:[[UIImage alloc] init] forBarMetrics:UIBarMetricsDefault];
[[UINavigationBar appearance] setBackgroundColor:[UIColor redColor]]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T18:43:23.853

我认为你必须继承 UINavigationBar 并覆盖`-(void)drawRect:(CGRect)rect`：

```
UIColor *colorFlat = /* any UIColor*/
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetFillColorWithColor(context, [colorFlat CGColor]);
CGContextFillRect(context, rect); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T14:20:36.207

我曾经覆盖drawRect方法和填充颜色；但是iOS7升级后会导致UINavigationBar出现一些问题。如果您编写自己的 drawrect 方法，即使您调用 [super drawRect]，它也会更改栏的尺寸，最终您会得到一个高度为 44 像素的导航栏。状态栏为空。

为了得到一个纯色的导航栏，我使用了一个图像作为背景图像（任何小的纯色图像都可以，因为你正在拉伸它）并在 UINavigationBar 子类的 initWithFrame 方法中添加了这些行：

```
[self setBackgroundColor:[UIColor clearColor]]     
[[UINavigationBar appearance] setBackgroundImage:[[UIImage imageNamed:@"bgimage.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(5, 5, 5, 5) resizingMode:UIImageResizingModeStretch] forBarMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-30T11:16:59.580

以下代码对我有用：

```
[self.navigationController.navigationBar setBackgroundImage:[UIImage new] forBarMetrics:UIBarMetricsDefault];
[self.navigationController.navigationBar setBarTintColor:[UIColor greenColor]];
self.navigationController.navigationBar.translucent = NO;
[self.navigationController.navigationBar setShadowImage:[UIImage new]]; 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-04-24T18:18:32.853

创建一个扩展**UIViewController的****CustomUIViewController并将****viewDidLoad**覆盖为如下所示：

 ****```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    self.view.backgroundColor = [UIColor colorWithRed: 0.0 green: 0.0 blue: 1.0 alpha: 1.0];
} 
```

之后，在您的控制器中使用您的 CustomUIViewController。

[学分](https://stackoverflow.com/a/5785385/882217)****

# heroku - playframework 2.0 - 超过了数据库演化的 max_user_connections（使用本地 postgres 服务器）

> ID：10303333
> 
> 赞同：3
> 
> 时间：2012-04-24T17:55:07.230
> 
> 标签：heroku, playframework, playframework-2.0, postgresql-9.1

[我遇到了与（ playframework 2.0 - 在数据库演化上超出 max_user_connections？](https://stackoverflow.com/questions/10111885/playframework-2-0-exceeded-max-user-connections-on-database-evolutions) ）完全相同的问题，只是这次是本地 postgres 安装。我在集线器@ [http://git.io/CdEntA](http://git.io/CdEntA)上有一个示例应用程序。

我尝试在本地运行它，使用

```
sbt stage
target/start -DapplyEvolutions.default=true -Ddb.default.driver=org.postgresql.Driver -  Ddb.default.url="jdbc:postgresql://localhost:5432/test?user=myuser" 
```

当我启动[http://localhost:9000](http://localhost:9000)时，我在控制台上看到的只是......

```
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 10\. Exception: null [error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 10\. Exception: null [info] play - Application started (Prod) [info] play - Listening for HTTP on port 9000... [error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 9\. Exception: null [error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 8\. Exception: null [error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 7\. Exception: null [error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 6\. Exception: null [error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 5\. Exception: null [error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 4\. Exception: null [error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 3\. Exception: null [error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 2\. Exception: null [error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 1\. Exception: null [error] c.j.b.PoolWatchThread - Error in trying to obtain a connection. Retrying in 1000ms org.postgresql.util.PSQLException: FATAL: sorry, too many clients already at org.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:293) ~[postgresql-9.1-901-1.jdbc4.jar:na] 
```

当我查看数据库时，我看到所有连接实际上都被进程用完了。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:07:23.640

尝试减少您的 Play 应用使用的连接数。

这是一个仅使用 5 个连接的配置。

```
db.default.partitionCount=1
db.default.maxConnectionsPerPartition=5
db.default.minConnectionsPerPartition=5 
```

基本上连接数将是`partitionCount x ConnectionsPerPartition`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T21:50:41.153

我相信您的问题是您没有覆盖`db.default.user`配置参数，因此它使用了该`sa`值。只需注释掉`conf/application.conf`文件中的以下行：

```
db.default.user=sa 
```

一旦我这样做并重新运行`sbt stage`，它对我来说就很好。

# java-me - j2me 或至少在诺基亚手机上是否有办法在屏幕保护程序启动后点亮屏幕？

> ID：10303334
> 
> 赞同：1
> 
> 时间：2012-04-24T17:55:12.033
> 
> 标签：java-me, screen, nokia, midp, screensaver

我有一个 midlet 可以检查某些条件，并且在某些时候，当某些条件变为真时，我会向用户显示一个弹出对话框。
如果有一段时间没有任何反应，屏幕保护程序将启动，之后不会向用户显示弹出窗口 - 屏幕只是黑屏。
有没有办法以编程方式从屏幕保存模式中唤醒？

我知道我可以通过声音和振动来提醒用户并且我会这样做，但我希望能够让屏幕以某种方式做出反应（要么让灯闪烁，要么只是打开灯）。
有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:50:33.237

You can implement `showNotify()` and `hideNotify()` from the `Canvas` class.

# javascript - 失控，我怎么能达到这个效果？

> ID：10303340
> 
> 赞同：0
> 
> 时间：2012-04-24T17:55:27.697
> 
> 标签：javascript, jquery, css, animation, effect

主要思想是在我的页面中获得一些效果动画 div。一、主要线索：

```
<ul class="institucional-menu">
            <li class="insmenu" id="Historia">Historia Fundacional</li>
            <li class="insmenu" id="Autoridades">Autoridades</li>
            <li class="insmenu" id="Balance">Balance</li>
        </ul> 
```

当指针悬停在某个菜单选项上时，右侧的 div 会根据每个选项移动并显示图像，直到下一次用户将鼠标移到其他不同选项上为止。在第一个动作（第一个用户在某个选项上移动）是可以的，问题从第二个和更高的动作开始，因为以前的 IMG 在那里，所以我需要将 div 向右移动（创建它消失的效果取另一个 img) 并将其从右侧返回到左侧，新的 img 在里面充电。

这是我的Javascript：

```
jQuery('.insmenu').mouseover(function(){
        jQuery('#imgcontainer').animate({
            left: '1024px',
            opacity: '1'
        });
        jQuery('#imgcontainer').queue(function(){
            jQuery('#imgcontainer').attr("src", e.id+'.jpg');
            jQuery('#imgcontainer').animate({
            left: '0px',
            opacity: '1'
        });
        });
    }); 
```

我整天都在尝试首先移开潜水，然后充电图像，最后返回那个div。但我不能。有什么推荐吗？

非常感谢你！

**PD：“e.id”试图成为已经“悬停”的元素的值（我不知道怎么说，如果这个动词存在）例如id="Historia"，图像具有相同的名称就像每个人的 ID 值一样**

*   **这就是我失去控制的原因，我试图传递那个价值......**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:08:30.790

我对用户的点击而不是鼠标悬停做出了同样的效果。同样的想法，如果我理解正确的话。

我必须做的是在容器 div（这里是 #imgcontainer）内给每个（这里是 mouseover-able li）菜单一个自己的 div。例如：

```
 <ul class="institucional-menu">
        <li class="insmenu" id="Historia">Historia Fundacional</li>
        <li class="insmenu" id="Autoridades">Autoridades</li>
        <li class="insmenu" id="Balance">Balance</li>
 </ul>
 <div id="imgcontainer">
    <div id="divHistoria><img src="..." /></div>
    <div id="divAuthoridades><img src="..." /></div>
    <div id="divBalance><img src="..." /></div>
 </div> 
```

然后，隐藏/显示/动画与菜单项同名的 div 是一件简单的事情。不需要 src 交换（尽管如果有很多非常大的图像，这可能是一个问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:12:11.730

你是这个意思吗？

```
$(document).ready(function(){
  $('.insmenu').mouseover(function(){
        var e = $(this);
        $('#imgcontainer').animate({
            left: '1024px',
            opacity: '1'
        },function(){
              $('#imgcontainer').attr("src",  e.attr('image'));
              console.log(e.attr('image'));
              $('#imgcontainer').animate({
                   left: '0px',
                   opacity: '1'
             });            
        });

    });
}); 
```

请注意，为了使左侧动画可行，该项目不能是静态的（将其位置更改为绝对、相对或固定）

[http://jsfiddle.net/KLrVg/22/](http://jsfiddle.net/KLrVg/22/)

# vb.net - 代码运行了两次

> ID：10303342
> 
> 赞同：0
> 
> 时间：2012-04-24T17:55:33.470
> 
> 标签：vb.net

我已经得到了开始日期来验证是否在结束日期之后并显示消息，但是当我输入以下代码时，它似乎运行了两次代码我已经尝试了所有的句柄离开尝试它没有工作我也把它进入一个新线程，没有工作，也进入一个函数，我在这个问题上没有工作

这是代码

```
Function DateCompare(ByVal Start As Date, ByVal Finish As Date, ByVal WhichDate As String)
  If WhichDate = "DateIn" Then
    If DateTime.Compare(Start, Finish) > 0 Then
      MsgBox("Dates Are Invalid : Date In Cannot be after Date Out, Please Amend", vbExclamation, "Dates Are Incorrect")
      Return False
      Exit Function
    Else
      Return True
    End If
  Else
    If DateTime.Compare(Finish, Start) < 0 Then
      MsgBox("Dates Are Invalid : Date Out Cannot be before Date In, Please Amend", vbExclamation, "Dates Are Incorrect")
      Return False
      Exit Function
    Else
      Return True
    End If
  End If
End Function

Private Sub dtpDateTimeIn_leave(ByVal sender As Object, ByVal e As EventArgs) Handles dtpDateTimeIn.Leave
  Dim result As Boolean
  result = DateCompare(dtpDateTimeIn.Value, dtpDateTimeOut.Value, "DateIn")
  If result = False Then
    dtpDateTimeIn.Focus()
  End If
End Sub

Private Sub dtpDateTimeOut_leave(ByVal sender As Object, ByVal e As EventArgs) Handles dtpDateTimeOut.Leave
  Dim result As Boolean
  result = DateCompare(dtpDateTimeIn.Value, dtpDateTimeOut.Value, "DateOut")
  If result = False Then
    dtpDateTimeOut.Focus()
  End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:13:24.623

尝试改用`Validating`事件。他们是为此而生的：

```
Private Sub dtpDateTimeIn_Validating(ByVal sender As Object, ByVal e As CancelEventArgs) Handles dtpDateTimeIn.Validating
  e.Cancel = Not DateCompare(dtpDateTimeIn.Value, dtpDateTimeOut.Value, "DateIne")
End Sub

Private Sub dtpDateTimeOut_Validating(ByVal sender As Object, ByVal e As CancelEventArgs) Handles dtpDateTimeOut.Validating
  e.Cancel = Not DateCompare(dtpDateTimeIn.Value, dtpDateTimeOut.Value, "DateOut")
End Sub 
```

# c# - 如何在运行时强制急切加载？

> ID：10303345
> 
> 赞同：2
> 
> 时间：2012-04-24T17:56:03.360
> 
> 标签：c#, nhibernate, fluent-nhibernate, lazy-loading, eager-loading

我正在使用 Fluent NHibernate。我在运行时有一个对象，其中包含可能已填充或未填充的惰性集合/属性。我计划序列化该对象，并且在我这样做之前需要填充所有集合/属性。如何在运行时“急切加载”我的对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-03T08:35:40.900

如果您已经在映射中设置了关系，则不需要指定如何加入查询，您可以简单地使用 Fetch（甚至深度获取）来指定要提前加载的路径：

```
session.QueryOver<MasterEnt>()
   .Where(x => x.Id == 2)
   .Fetch(x => x.DetailEntList)
   .Eager().List(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T18:31:21.440

您可以通过 使用`ICriteria`和操作负载`NHibernate.ICriteria.SetFetchMode(string, NHibernate.FetchMode)`。

例子：

DetailEnt.cs：

```
using System;
using System.Collections.Generic;
using System.Text;

namespace FetchTest
{
    public class DetailEnt
    {
        private Int32? id;
        /// <summary>
        /// Entity key
        /// </summary>
        public virtual Int32? Id
        {
            get { return id; }
            set { id = value; }
        }

        private String description;
        /// <summary>
        /// Description
        /// </summary>
        public virtual String Description
        {
            get { return description; }
            set { description = value; }
        }

        private MasterEnt rIMaster;

        /// <summary>
        /// Gets or sets the RI master.
        /// </summary>
        /// <value>
        /// The RI master.
        /// </value>
        public virtual MasterEnt RIMaster
        {
            get { return rIMaster; }
            set { rIMaster = value; }
        }
    }
} 
```

MasterEnt.cs：

```
using System;
using System.Collections.Generic;
using System.Text;

namespace FetchTest
{
    public class MasterEnt
    {
        private Int32? id;
        /// <summary>
        /// Entity key
        /// </summary>
        public virtual Int32? Id
        {
            get { return id; }
            set { id = value; }
        }

        private String description;
        /// <summary>
        /// Description
        /// </summary>
        public virtual String Description
        {
            get { return description; }
            set { description = value; }
        }

        private ICollection<DetailEnt> detailEntList;
        /// <summary>
        /// <see cref="RIDetailEnt"/> one-to-many relationship.
        /// </summary>
        public virtual ICollection<DetailEnt> DetailEntList
        {
            get { return detailEntList; }
            set { detailEntList = value; }
        }
    }
} 
```

在运行时强制加载：

```
NHibernate.ISession ss = GetSessionFromSomeWhere();

NHibernate.ICriteria crt = ss.CreateCriteria<MasterEnt>();
crt
    .Add(NHibernate.Criterion.Expression.IdEq(17))
    //here is "force eager load at runtime"
    .SetFetchMode("DetailEntList", NHibernate.FetchMode.Join);
MasterEnt mEnt = crt.UniqueResult<MasterEnt>(); 
```

在这种情况下，我使用了“hbm”。但是逻辑应该是一样的。

## 编辑：

使用“NHibernate 2.1.2”和“NHibernate.Linq”

```
INHibernateQueryable<MasterEnt> nhq = null;
IList<MasterEnt> masterList = null;

nhq = (INHibernateQueryable<MasterEnt>)(
    from master in session.Linq<MasterEnt>()
    where master.Id == 2
    select master);

nhq.Expand("DetailEntList");
masterList = nhq.ToList<MasterEnt>(); 
```

从`QueryOver<T>Left.JoinQueryOver`NHibernate 3：

```
IQueryOver<MasterEnt> query = session.QueryOver<MasterEnt>()
    .Left.JoinQueryOver<DetailEnt>(m => m.DetailEntList)
    .Where(m => m.Id == 2);

masterList = query.List<MasterEnt>(); 
```

如果使用“FluentNHibernate”或“hbm”，这些查询会以这种方式独立工作。

我为它编写了一些代码，很快我将发布文件的链接。

## 编辑2：

我已经在[q_10303345_1350308.7z](http://dl.dropbox.com/u/49510149/stackoverflow/dotnet/q_10303345_1350308.7z)上发布了代码（可由 NUnit 运行）。在“dependencies\readme.txt”中有关于依赖的解释。dll 依赖项由 NuGet 加载。

# visual-studio - Visual Studio 命令行扩展

> ID：10303348
> 
> 赞同：0
> 
> 时间：2012-04-24T17:56:17.370
> 
> 标签：visual-studio, visual-studio-2010

如果您传递需要频繁更改的参数，Visual Studio 的默认命令行参数输入非常糟糕。（在启动项目属性中，在 Configuration Properties->Debugging 下，我说的是 Command Arguments 字段）。

VS 绝对必须有一些扩展来覆盖这种行为，对吧？理想情况下，我正在寻找一个下拉列表，其中包含最近使用的 10 个不同命令行的列表，以便在几个设置之间轻松切换。如果可以将此字段粘贴到程序顶部的工具栏上，以便更轻松地查看并一目了然地查看正在使用的参数，那也很好。

有人知道某处存在这样的改进吗？我正在使用 VS 2010。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:01:28.180

我在寻找几乎相同的东西时发现了这个扩展：[CLIArgsMadeEasy](http://visualstudiogallery.msdn.microsoft.com/8159cd7d-2c81-47f3-9794-a347ec1fba09)

这并不理想，因为输入框相当小，但它绝对比通常的刺激过程要好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:51:03.347

我相信您可以为此使用不同的解决方案配置。我的意思是以下方法：

*   选择“调试”配置并在项目属性中设置“命令行”参数。
*   然后切换到“发布”配置并设置另一个“命令行”参数等。
*   您还可以创建其他配置 - 转到菜单 Build -> Configuration Manager 并根据需要创建尽可能多的配置。

希望有帮助！

# java - 刷新页面或提交请求后保持选中单选按钮

> ID：10303349
> 
> 赞同：2
> 
> 时间：2012-04-24T17:56:21.673
> 
> 标签：java, html, jsp, struts, dom-events

我知道这个问题可能听起来很基本，但我一直在尝试解决它，但我仍然无法做到。我将非常感谢任何帮助。

我的 jsp 页面中有两个单选按钮。当任何一个被选中时，它都会调用一个 Javascript 函数。最终会发生的是，如果您选择单选按钮 1，它将显示表 1 中的数据，如果选择单选按钮 2，则显示表 2 中的数据。

结果，我的页面被刷新并且不再选择单选按钮。我想向用户显示选择了哪个单选按钮。

```
function viewUploadedData(){
    document.location.href = "ForecastInquiryFilter.do?exportVar=viewUploadedData";

function viewTopsData(radio){
    document.location.href = "ForecastInquiryFilter.do?exportVar=viewTopsData";
} 
```

```
<input type="radio" name="dataTypeToView" id="topsData" onclick="viewTopsData();"/>
<label for="topsData">TOPS Data</label><br/>
<input type="radio" name="dataTypeToView" id="uploadedData" onclick="viewUploadedData();"/>
<label for="uploadedData">Uploaded Data </label> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T22:07:53.793

如果您使用“checked”属性为单选按钮生成 html，它将被选中。例如，以下 html 将生成一个选中的单选按钮：

```
<input type=radio name=myradio value=1 checked> 
```

因此，话虽如此，您需要修改您的 jsp 以有条件地为相应的单选按钮生成“已检查”属性。大概你的jsp知道哪个单选按钮被选中，所以希望这应该很容易编码。

因此，您的 jsp 代码可能看起来像这样：

```
<%
String whichRadio = request.getParameter("myradio");
String r1checked = "";
if (whichRadio.equals("1")) r1checked = " checked";
String r2checked = "";
if (whichRadio.equals("2")) r2checked = " checked";
%>
<input type=radio name=myradio value="1"<%= r1Checked %>>
<input type=radio name=myradio value="2"<%= r2Checked %>> 
```

上面的代码将为调用您的 jsp 时检查的任何无线电生成已检查的属性。如果没有选中收音机，则不会生成选中的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:01:19.880

在将页面重新发送回浏览器之前，您需要在服务器上设置单选按钮的 CHECKED 属性。

HTTP 是一种[无状态协议](http://en.wikipedia.org/wiki/Stateless_protocol)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-07T10:16:58.167

使用`jstl`

```
<input type="radio" name="digest" value="md5" <c:if test="${digest == 'md5' or empty digest}">checked</c:if>>md5
<input type="radio" name="digest" value="sha1" <c:if test="${digest == 'sha1'}">checked</c:if>>sha1 
```

# fonts - 如何在 fontconfig 中转义特殊字符？

> ID：10303352
> 
> 赞同：1
> 
> 时间：2012-04-24T17:56:23.227
> 
> 标签：fonts, debian, inkscape, fontconfig

我正在从命令行执行 Inkscape 以将 SVG 转换为 PDF，并且我依靠 fontconfig 将 SVG 中的文本元素的字体系列与（Debian）机器上的字体文件相匹配。除非文本元素的 style 属性的 font-family 值包含句点 (.)，否则此方法有效。例如，SVG 中的文本元素的样式值为：

```
font-family: Lobster1.4 
```

在 PDF Inkscape 导出中，此元素以默认字体呈现，而不是 Lobster。所以我在 /etc/fonts/local.conf 中添加了一条规则：

```
1  <match target="pattern">
2     <test qual="any" name="family">
3         <string>Lobster1.4</string>
4     </test>
5     <edit name="family" mode="assign">
6         <string>Lobster 14</string>
7     </edit>
8     <edit name="style" mode="assign">
9         <string>Regular</string>
10    </edit>
11 </match> 
```

然后我运行 fc-cache，像以前一样使用 Inkscape 进行转换，但文本元素仍然没有在 Lobster 中呈现。

但是，如果我将此元素的 SVG 中的样式值更改为：

```
font-family: Lobster14 
```

并将上面的第 3 行更改为：

```
3         <string>Lobster14</string> 
```

文本元素在 Lobster 中完美呈现。所以这是导致问题的句点（点）字符。不幸的是，我正在处理的业务流程禁止我更改 SVG 输入，因此我必须处理这段时间。但是怎么做？如何逃脱第 3 行的点？这不起作用：

```
3         <string>Lobster1\.4</string> 
```

# c# - 循环“选定”枚举值？

> ID：10303353
> 
> 赞同：12
> 
> 时间：2012-04-24T17:56:25.983
> 
> 标签：c#

我知道如何遍历枚举属性列表，但我将如何遍历所有“选定”枚举属性？例如，如果有人`Prop1 | Prop2`反对`public enum Foo { Prop1; Prop2; Prop3 }`，我将如何实现这一目标？

这就是我现在所拥有的：

```
var values = Enum.GetValues(typeof(FileStatus)).Cast<FileStatus>();
foreach (var value in values)
{
} 
```

它循环遍历所有枚举属性，但我只想循环“选择”的那些。

更新：`[Flags]`属性已设置。

更新 2：枚举包含大量属性，我不能也不会键入/硬编码单个属性检查，而是我想动态循环遍历每个属性并检查我的枚举实例是否`Bar`包含循环项集。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-24T18:01:06.173

以下情况如何：

```
FileStatus status = FileStatus.New|FileStatus.Amazing;

foreach (FileStatus x in Enum.GetValues(typeof(FileStatus)))
{
    if (status.HasFlag(x)) Console.WriteLine("{0} set", x);
} 
```

或者一举 LINQ：

```
var flags = Enum.GetValues(typeof(FileStatus))
                .Cast<FileStatus>()
                .Where(s => status.HasFlag(s)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T18:12:11.790

```
[Flags]
public enum Foo
{
    Prop1 = 1,
    Prop2 = 1 << 1,
    Prop3 = 1 << 2
}

public static class FooExtensions
{
    private static readonly Foo[] values = (Foo[])Enum.GetValues(typeof(Foo));

    public static IEnumerable<Foo> GetComponents(this Foo value)
    {
        return values.Where(v => (v & value) != 0);
    }
}

public static class Program
{
    public static void Main(string[] args)
    {
        var foo = Foo.Prop1 | Foo.Prop3;

        var components = foo.GetComponents().ToArray();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T17:58:35.720

假设您将此设置为位掩码，则只需“与”值即可确定选择了哪些值。

```
 SomeEnum bitmask = value;

 if(bitmask & SomeEnum.Value1 > 0)
    // SomeEnum.Value1 was set 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T17:58:38.717

```
FileStatus someValue = ...;
var selectedValues = new List<FileStatus>();
var allValues = Enum.GetValues(typeof(FileStatus)).Cast<FileStatus>();
foreach (var value in allValues )
{
  if(someValue & value != 0)//note bitwise AND, not logical AND.
  {
     selectedValues.Add(value);
     //this value is selected.  You can stick it in a List or do whatever with it.
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T18:11:07.097

您需要使用`Flags`属性标记枚举。要获取值，您可以使用`yourObject.EnumProperty.HasFlag`方法，例如：

```
class Program 
{
    [Flags]
    public enum Bar { Prop1, Prop2, Prop3 }

    public class Foo
    {
        public Bar SelectedBar { get; set; }
    }

    static void Main(string[] args)
    {
        var foo = new Foo();
        foo.SelectedBar = Bar.Prop1 | Bar.Prop2;

        foo.SelectedBar.HasFlag(Bar.Prop1); //true
        foo.SelectedBar.HasFlag(Bar.Prop2); //true
        foo.SelectedBar.HasFlag(Bar.Prop3); //false
    }
} 
```

# twilio - 如何判断来电是否来自 OpenVBX，但仍能看到来电者的来电显示信息？

> ID：10303360
> 
> 赞同：0
> 
> 时间：2012-04-24T17:57:08.620
> 
> 标签：twilio

我有一个 OpenVBX/Twilio 设置，我使用它的拨号小程序来呼叫我公司中的特定人员。但是，在我的手机上查看来电时，我无法知道来电者是否通过 OpenVBX 进行呼叫。

有没有办法自定义 OpenVBX/Twilio，以便在我的手机上查看来电者的来电显示时，我可以看到来电显示信息和一些指示呼叫来自 Twilio 的指示符？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:32:50.410

不确定这是否可以在 OpenVBX 本身中配置，或者您是否必须更改一些拨号小程序代码，但您可以只使用 Twilio 号码的 CallerID（号码），而不是使用来电的 CallerId。

# sql - 我怎样才能只加入选定的文本？

> ID：10303361
> 
> 赞同：0
> 
> 时间：2012-04-24T17:57:17.277
> 
> 标签：sql, sql-server-2008, tsql

我有两张桌子。我需要使用 substring 函数加入这些表。我尝试过这样的事情。但它不起作用...

表01

```
ID  NameStreet
1   Julian Assange 100 Majestic street, Toronto
2   Brad Pit 200 Loaden Blvd, Toronto
3   Allen Sunderland 9, Unit 2, Janet Street, BC
4   Julian Assange 50 Majectic street, Toronto 
```

表02

```
ID Name
1  Julian Assange
2  Allen Sunderland 
3  Julian Assange 
```

当前查询（不工作）

```
SELECT t1.* 
FROM Table01 t1 
JOIN Table02 t2 
ON t2.Name = SUBSTRING(t1.NameStreet, 0, CHARINDEX(t2.Name, t1.NameStreet)) 
```

预期结果：-

```
1   Julian Assange 100 Majestic street, Toronto
3   Allen Sunderland 9, Unit 2, Janet Street, BC
4   Julian Assange 50 Majectic street, Toronto 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:03:13.420

我认为您希望在查询中这样做：

```
on t2.Name = LEFT(t1.NameStreet, (charindex(' ', t1.NameStreet)-1) ) 
```

编辑

这行得通吗？

```
on t2.Name = LEFT(t1.NameStreet, Len(t2.Name) ) 
```

# java - 什么是类 在Java中是什么意思？

> ID：10303368
> 
> 赞同：1
> 
> 时间：2012-04-24T17:57:41.743
> 
> 标签：java

> **这个问题与以下内容完全相同：**
> [<>（尖括号）在 Java 中是什么意思？](https://stackoverflow.com/questions/6607550/what-does-angle-brackets-mean-in-java)

我正在阅读有关`AsyncTask`Android 的信息。我有这个示例代码：

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
     protected Long doInBackground(URL... urls) {
         int count = urls.length;
         long totalSize = 0;
         for (int i = 0; i < count; i++) {
             totalSize += Downloader.downloadFile(urls[i]);
             publishProgress((int) ((i / (float) count) * 100));
         }
         return totalSize;
     }

     protected void onProgressUpdate(Integer... progress) {
         setProgressPercent(progress[0]);
     }

     protected void onPostExecute(Long result) {
         showDialog("Downloaded " + result + " bytes");
     }
 } 
```

它应该被调用：

```
new DownloadFilesTask().execute(url1, url2, url3); 
```

我不明白什么`<URL, Integer, Long>`意思。我在其他一些课程中见过他们，`String<>`但我不知道他们的目的是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:58:23.967

它定义了[泛型](http://docs.oracle.com/javase/tutorial/java/generics/index.html)的类型。

* * *

例如：

```
List<Integer> list; 
```

你声明了一个 List 类的变量。但是`List`如果我是对的，它是这样声明的：

```
public interface List<T> extends Collection<T> 
```

T 是此类用户可以定义的类型的占位符。在我的示例中，我选择用整数填充 T。在这种情况下，这意味着我将拥有一个整数列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:03:02.790

它是[http://docs.oracle.com/javase/tutorial/java/generics/generics.html](http://docs.oracle.com/javase/tutorial/java/generics/generics.html)

但基本上意味着你有一些容器

```
List<> aList 
```

并且编译器需要知道它持有什么类型，以便您指定与容器关联的类型

```
List<String> aList 
```

# ruby-on-rails - 如何重定向到特定控制器？

> ID：10303371
> 
> 赞同：1
> 
> 时间：2012-04-24T17:57:49.263
> 
> 标签：ruby-on-rails, ruby

我的 rake 路线中有这个：

```
{:subdomain=>/m/, :action=>"destroy", :controller=>"mobile/home"}
                                                              mobile_disclosures GET    /disclosures(.:format)                                                                                                     {:subdomain=>/m/, :action=>"index", :controller=>"mobile/disclosures"}
                                                                                 POST   /disclosures(.:format)                                                                                                     {:subdomain=>/m/, :action=>"create", :controller=>"mobile/disclosures"}
                                                           new_mobile_disclosure GET    /disclosures/new(.:format)                                                                                                 {:subdomain=>/m/, :action=>"new", :controller=>"mobile/disclosures"}
                                                          edit_mobile_disclosure GET    /disclosures/:id/edit(.:format)                                                                                            {:subdomain=>/m/, :action=>"edit", :controller=>"mobile/disclosures"}
                                                               mobile_disclosure GET    /disclosures/:id(.:format)                                                                                                 {:subdomain=>/m/, :action=>"show", :controller=>"mobile/disclosures"}
                                                                                 PUT    /disclosures/:id(.:format)                                                                                                 {:subdomain=>/m/, :action=>"update", :controller=>"mobile/disclosures"}
                                                                                 DELETE /disclosures/:id(.:format) 
```

我正在尝试将我的控制器重定向到：`mobile_disclosures`

通过尝试这样的事情：

```
 redirect_to :controller=>'mobile_disclosures', :action => 'show' 
```

但我收到一个错误：

> 没有路线匹配 {:controller=>"mobile/mobile_disclosures", :action=>"show"}

知道我的语法有什么问题以及哪里出错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T18:00:04.093

Show 需要一个 ID，因此您也需要输入 ID。

```
redirect_to :controller=>'mobile_disclosures', :action => 'show', :id => some_id 
```

# c# - Azure Worker 角色错误处理

> ID：10303377
> 
> 赞同：2
> 
> 时间：2012-04-24T17:58:27.517
> 
> 标签：c#, .net, azure, azure-worker-roles

如果出现问题，使用工人角色会有点棘手。我的工作角色出现异常，这迫使角色退出并重新启动。

我决定实施 azure 诊断解决方案来记录正在发生的事情。它可以工作，当我尝试编写要跟踪的消息时，但我无法捕获异常并记录它们。我用 try catch 包围我的代码，并尝试编写异常内容以进行跟踪。

这是正确的方法吗？为什么它不起作用？有没有更好的方法来记录工作角色中的异常？谢谢你。我的代码是：

```
public class WorkerRole : RoleEntryPoint
    {

    private const int WAIT_INTERVAL_SECONDS = 15;

    public override void Run()
    {
        Trace.WriteLine("$projectname$ entry point called", "Information");

        while (true)
        {

            try
            {
                string id = MainWCFRole.Storage.TrackProcessingQueueDAO.retrieveMsgContents();
                if ((id != null) && (!id.Equals("")))
                {
                    var points = MainWCFRole.Storage.TrackRawDataDAO.retrieve(id);

                    Processor.process(id, points);
                }
                else
                {
                    Thread.Sleep(WAIT_INTERVAL_SECONDS * 1000);
                }
            }
            catch (Exception ex)
            {
                Trace.TraceInformation("Something went wrong");
                Trace.TraceError(ex.ToString());
                throw ex;
            }

        }
    }

    public override bool OnStart()
    {
        // Set the maximum number of concurrent connections 
        ServicePointManager.DefaultConnectionLimit = 12;

        DiagnosticMonitorConfiguration dmc = DiagnosticMonitor.GetDefaultInitialConfiguration();
        dmc.Logs.ScheduledTransferPeriod = TimeSpan.FromMinutes(1);
        dmc.Logs.ScheduledTransferLogLevelFilter = LogLevel.Verbose;
        dmc.WindowsEventLog.ScheduledTransferLogLevelFilter = LogLevel.Verbose;
        dmc.WindowsEventLog.ScheduledTransferPeriod = TimeSpan.FromMinutes(1);

        DiagnosticMonitor.Start("StorageConnectionString", dmc);

        Trace.TraceInformation("Starting Worker Role TrackProcessor");

        return base.OnStart();
    }

} 
```

Processor.process(id, points) 是抛出异常的方法。更准确地说，是当我尝试调用 SQL azure 查询时。我知道诊断有效，因为当角色启动时，它会调用 Trace.TraceInformation("Starting Worker Role TrackProcessor"); 它在表存储中作为消息可见。然后随着时间的推移会出现更多消息，因为角色遇到异常并被迫重新启动。但是，日志中没有错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:20:16.033

如果 Run() 方法退出，那么您的工作人员将被回收。在回收之前，工人可能没有时间将日志转移到存储中。

最简单的解决方案是在捕获异常后不重新抛出异常。然后，您的工作人员角色将继续运行，直到手动关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:17:41.953

您是否为工人角色连接了跟踪侦听器？看看：http: [//blogs.msdn.com/b/jimoneil/archive/2010/10/08/azure-home-part-8-worker-role-and-azure-diagnostics.aspx](http://blogs.msdn.com/b/jimoneil/archive/2010/10/08/azure-home-part-8-worker-role-and-azure-diagnostics.aspx)

工作者角色 app.config。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.diagnostics>
        <trace>
            <listeners>
                <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener,                            Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0,                            Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                    name="AzureDiagnostics">
                    <filter type="" />
                </add>
            </listeners>
        </trace>
    </system.diagnostics>
</configuration> 
```

# c++ - 对 CUDA/openCL 和 C++ AMP 的困惑

> ID：10303390
> 
> 赞同：15
> 
> 时间：2012-04-24T17:58:59.850
> 
> 标签：c++, cuda, opencl, c++-amp

我读到微软正在与 Nvidia 密切合作以提高 AMP 性能。

但我的问题是：AMP 是微软的 CUDA 替代品吗？或者当 NVIDIA CUDA 显卡可用时，AMP 是否使用 CUDA 驱动程序？AMP 是 openCL 的替代品吗？

我还是很迷茫。。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-25T02:38:57.200

C++ AMP 是一个库（作为它的一部分，还引入了一个关键语言扩展）。由于 C++ AMP 是一个开放规范，它可以在任何其他低级语言上实现。Microsoft 的实现建立在 DirectCompute 上（因此也建立在 HLSL 上），但是当您使用 C++ AMP 时，这对您完全隐藏（这就是 C++ AMP 可以成为开放规范的原因；它不会在 API 表面公开 DirectX）。有关 C++ AMP 的更多信息，请关注我们博客右侧的资源（我们将继续添加）：http: [//blogs.msdn.com/b/nativeconcurrency/](http://blogs.msdn.com/b/nativeconcurrency/)

您发表了有关 Microsoft 与 NVIDIA 合作以提高 C++ AMP 性能的声明——这不是真的。Microsoft 已与 NVIDA 和 AMD 以及其他合作伙伴合作创建 C++ AMP 开放规范。Microsoft 还与硬件供应商合作，以确保硬件供应商拥有稳定的显卡驱动程序，这是任何 GPU 计算技术正常工作所必需的。

你还表达了困惑，并抛出了一些条款。OpenCL 是一种 GPU 计算方法（由 Khronos 提供），DirectCompute（由 Microsoft 提供）和 CUDA（由 NVIDIA 提供）也是如此。这些都是独立的技术，每一种都有自己通往 GPU 的路径（总是通过某种驱动程序），每一种都有自己的优点、优点和缺点。一种不会取代另一种，一种也不会普遍优于另一种。您现在还可以在该组合中使用 C++ AMP，作为另一种选择，同样的陈述也适用于此。至于您决定使用哪个，您可以自行选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T19:06:56.230

C++ AMP 是一组语言扩展和 API，用于支持包括 CUDA 在内的并行编程技术。

由于微软也有 CUDA（直接计算）的直接竞争对手，并且通常更喜欢它自己的专有图形标准，我们将不得不看看它到底会发生什么。

有关 Microsoft 的观点，请参阅[这些讲座](http://blogs.msdn.com/b/nativeconcurrency/archive/2012/04/15/screencasts-on-c-amp.aspx)

# erlang - 用于负载测试的最小 Erlang 脚本

> ID：10303394
> 
> 赞同：0
> 
> 时间：2012-04-24T17:59:08.210
> 
> 标签：erlang, load-testing

我刚开始学习 Erlang。我的任务是编写一个简单的脚本来测试 Web 应用程序。我没有在互联网上找到工作脚本，而 Tsung 对这样的任务来说太笨重了。有谁可以帮助我（给出我可以找到的脚本或链接的工作示例）？

可以指定 URL、并发性和测试时间并获得结果。谢谢。

此链接无济于事：

*   [http://effectiveqa.blogspot.com/2009/12/minimal-erlang-script-for-load-testing.html](http://effectiveqa.blogspot.com/2009/12/minimal-erlang-script-for-load-testing.html) （不起作用，函数示例/0 undefined）

*   [http://www.metabrew.com/article/a-million-user-comet-application-with-mochiweb-part-1](http://www.metabrew.com/article/a-million-user-comet-application-with-mochiweb-part-1) （适用于套接字，但我需要并发测试）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T04:14:35.490

我为此目的使用 basho [bench](http://wiki.basho.com/Benchmarking.html)。从它开始并添加您自己的案例并不难。它还包含绘制所有结果的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:13:02.720

想建一个？我不会推荐这种方式（因为我已经尝试过并且有很多事情要考虑构建一个，特别是产生许多进程并收集结果）

如您所知，我会推荐 tsung，虽然它很笨重，但它是一个满载测试应用程序。我放弃了我的，并回到 tsung，因为无法正确处理具有太多进程的打开/关闭套接字。

如果你真的想要一个简单的，我会使用 httperf。AFAKI，它适用于具有多个进程的单台机器。

[http://agiletesting.blogspot.ca/2005/04/http-performance-testing-with-httperf.html](http://agiletesting.blogspot.ca/2005/04/http-performance-testing-with-httperf.html)

# android - 是否可以在没有游标的情况下检查 sqlite 值？- 安卓

> ID：10303396
> 
> 赞同：-2
> 
> 时间：2012-04-24T17:59:25.487
> 
> 标签：android, sqlite, cursor

我试图阻止用户在日历中的约会创建应用程序中为“标题”字段输入相同的字符串值，作为家庭作业。

到目前为止，这是我的想法：

```
private static String[] CHECK = {TITLE};
    private Cursor addAppointment(String title, String time, String details){
        calendarData = new CalendarData(this);
        SQLiteDatabase db1 = calendarData.getReadableDatabase();
        SQLiteDatabase db = calendarData.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put(DATE, calendar.getDate());
        values.put(TITLE, title);
        values.put(TIME, time);     
        values.put(DETAILS, details);
        db.insertOrThrow(TABLE_NAME, null, values);
        Cursor titleCursor = db1.query(TABLE_NAME, CHECK, TITLE+" = "+appointmentTitle.getText().toString(), null, null, null, null);
        if(titleCursor.getString(0) != null){//MEANING THERE IS A DUPLICATE
            final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
            alertDialog.setMessage("You've entered a duplicate title field, please rename.");
            alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                  public void onClick(DialogInterface dialog, int which) {

                   alertDialog.dismiss();

                } });
            alertDialog.show();
        }
        return titleCursor;
    } 
```

但我不喜欢在我的 addAppointments 方法中包含所有内容的想法，我宁愿让它保持干净和简单。

我尝试执行以下操作作为替代方案：

```
private static String[] CHECK = {TITLE};
    private void addAppointment(String title, String time, String details){
        calendarData = new CalendarData(this);
        SQLiteDatabase db1 = calendarData.getReadableDatabase();
        SQLiteDatabase db = calendarData.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put(DATE, calendar.getDate());
        values.put(TITLE, title);
        values.put(TIME, time);     
        values.put(DETAILS, details);
        db.insertOrThrow(TABLE_NAME, null, values);
    }

    private Cursor checkTitle(){
        calendarData = new CalendarData(this);
        SQLiteDatabase db1 = calendarData.getReadableDatabase();

        Cursor titleCursor = db1.query(TABLE_NAME, CHECK, TITLE+" = "+appointmentTitle.getText().toString(), null, null, null, null);

        startManagingCursor(titleCursor);
        return titleCursor;
    }

    private void showTitleError(Cursor cursor){
        if(cursor.getString(0) != null){//MEANING THERE IS A DUPLICATE
            final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
            alertDialog.setMessage("You've entered a duplicate title field, please rename.");
            alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                  public void onClick(DialogInterface dialog, int which) {

                   alertDialog.dismiss();

                } });
            alertDialog.show();
        }
    } 
```

但在这两种情况下我都会收到此错误：04-24 17:56:51.263: E/AndroidRuntime(17856): android.database.sqlite.SQLiteException: no such column: hello: , while compile: SELECT title FROMointments WHERE title =你好

如果有什么建议请分享，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:07:33.360

如果你想让它注射安全，那就这样使用

```
Cursor titleCursor = db1.query(TABLE_NAME, CHECK, TITLE+" = ?",
        new String[]{ appointmentTitle.getText().toString() }, null, null, null); 
```

the`?`被`'`下一个参数中的 - 引用和转义数据替换。

提示：如果您想强制使用唯一的标题，请创建数据库列`UNIQUE`。这样，`SQLiteException`当您的`insert`数据具有已经存在的标题时，您将得到一个。除了期望之外，您还可以创建列`UNIQUE ON CONFLICT IGNORE`，这意味着它根本不会插入数据并且不会引发错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:01:14.643

您需要`appointmentTitle.getText().toString()`用单引号括起来：

```
db1.query(TABLE_NAME, CHECK, TITLE+" = '"+appointmentTitle.getText().toString() + "'", null, null, null, null); 
```

这样你组装的查询看起来像：

```
SELECT title FROM appointments WHERE title = 'hello' 
```

然而，正如其他发帖人**礼貌地**指出的那样，如果您在此处的查询需要用户输入，这可能会导致 SQL 注入问题。适应参数化方法是更好的方法。

# r - R如何有选择地对数据框进行排序？

> ID：10303401
> 
> 赞同：3
> 
> 时间：2012-04-24T17:59:44.483
> 
> 标签：r, sorting, dataframe

我在 R 中有以下示例数据框。

```
 item index  ptr
     A     1 0.40
     B     2   NA
     C     3 0.30
     D     4 0.35
     E     5 0.44
     F     6   NA 
```

它已经根据 column = 排序`index`。现在，我想按列对其进行排序，`ptr`但保留行的位置`ptr`=`NA`完整。所以我期待的输出是：

```
 item index  ptr
     C     3 0.30
     B     2   NA
     D     4 0.35
     A     1 0.40
     E     5 0.44
     F     6   NA 
```

常规`df = df[order(ptr),]`不起作用。有任何想法吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T18:09:03.620

试试这个：

```
> df
  item index  ptr
1    A     1 0.40
2    B     2   NA
3    C     3 0.30
4    D     4 0.35
5    E     5 0.44
6    F     6   NA
> df[!is.na(df$ptr), ] <- df[order(df$ptr, na.last = NA), ]
> df
  item index  ptr
1    C     3 0.30
2    B     2   NA
3    D     4 0.35
4    A     1 0.40
5    E     5 0.44
6    F     6   NA 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T18:09:17.723

```
ptr.na <- is.na(df$ptr)
order.idx <- seq(length=nrow(df))
ptr.idx <- which(!ptr.na)
order.idx[!ptr.na] <- ptr.idx[order(df[ptr.idx,"ptr"])]
df[order.idx,] 
```

给

```
> df[order.idx,]
  item index  ptr
3    C     3 0.30
2    B     2   NA
4    D     4 0.35
1    A     1 0.40
5    E     5 0.44
6    F     6   NA 
```

# eclipse - Eclipse 中 Clojure 的代码格式化实用程序

> ID：10303405
> 
> 赞同：22
> 
> 时间：2012-04-24T17:59:56.843
> 
> 标签：eclipse, clojure, code-formatting, counterclockwise

我正在使用逆时针，但不幸的是他们还没有实现这个功能。您有什么想法如何以“lispy”方式自动格式化我的 Clojure 代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-03T21:26:44.760

在最新版本的**逆时针**IDE 中，您可以简单地选择文件中的所有内容`Ctrl`+`A`然后按`Ctrl`+`I`用于*“缩进当前行”*以正确缩进整个文件。

按下`Tab`（无论光标位置如何）将对光标所在的行执行相同的操作，但在选择所有行时它将不起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T21:27:20.937

Eclipse 似乎没有“完成”的 Clojure 压头，而且我对 Eclipse 的了解还不够，无法编写一个。但是Clojure (contrib) 本身提供了漂亮的打印功能*：*

[http://richhickey.github.com/clojure-contrib/pprint-api.html](http://richhickey.github.com/clojure-contrib/pprint-api.html)

...因此，如果我遇到您的情况并且真的厌倦了无法缩进代码，我会做的是编写一个小 GUI 应用程序（您可以在 Clojure 中完成它以获得乐趣和练习），它允许您剪切和粘贴您的代码到 TextArea 中，根据需要重新格式化它，并将格式化的代码塞回剪贴板中。一个笨重的解决方案，但相当容易实施。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-12T15:01:53.053

[Counter Clockwise 版本 0.20.0](http://doc.ccw-ide.org/ChangeLog.html#_changes_between_counterclockwise_0_12_3_and_0_20_0)（2013 年 10 月）添加了“重新缩进选择”功能。我知道这不是你想要的，但这是一个开始。

# pivot - 如何在枢轴控件中创建圆形枢轴项目

> ID：10303407
> 
> 赞同：1
> 
> 时间：2012-04-24T18:00:02.097
> 
> 标签：pivot, geometry, pivotitem

我在我的解决方案中创建了一个带有 3 个枢轴项的枢轴控件。并在加载时设置 SelectedIndex = 1 在枢轴控件的 SelectionChanged 事件上，我想要： - 当滑动到下一个枢轴项目时：添加一个新的枢轴项目并删除第一个枢轴项目（索引 = 0） - 当滑动到前枢轴项目时：添加一个新的枢轴项到 index = 0 并删除最后一个枢轴项。

您可以查看此图像：

[我的想法，请查看这个](https://lh5.googleusercontent.com/-cry4LmmYdUQ/T5bog38DvXI/AAAAAAAAATo/tDHcOA-Udbc/s640/Capture.jpg)

我尝试，但有错误

[我的代码，请查看这个](https://lh4.googleusercontent.com/-l4_1PtSmWas/T5bpGeoc5QI/AAAAAAAAATw/zROIGF_z0zg/s781/Capture.jpg)

你有什么想法吗？非常感谢。

# spring - Spring 应用程序上下文和 Spring 容器有什么区别？

> ID：10303413
> 
> 赞同：23
> 
> 时间：2012-04-24T18:00:20.913
> 
> 标签：spring

我对这两个概念有点困惑。阅读 Spring 文档，我发现，例如。bean 工厂是 Spring 容器。我还读到“ApplicationContext 是 BeanFactory 的完整超集”。但两者之间的区别并不明显。那么区别是什么呢？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-25T03:39:06.567

[Ajinkya 附加的这个链接](https://stackoverflow.com/questions/243385/new-to-spring-beanfactory-vs-applicationcontext)的答案非常全面，但是，我想参考另一种材料的一些优点 - Spring in Action (Manning Publications)：

> 在基于 Spring 的应用程序中，您的应用程序对象将存在于 Spring 容器中。如图 2.1 所示，容器将创建对象，将它们连接在一起，配置它们，并管理它们从摇篮到坟墓的完整生命周期（或新到 finalize()，视情况而定）。
> 
> ![在此处输入图像描述](../Images/259a36da73e9fbd9c3c6acbf6da86a9b.png)
> 
> 没有单个 Spring 容器。Spring 附带了几个容器实现，可以分为两种不同的类型。Bean 工厂（由 org.springframework.beans.factory.BeanFactory 接口定义）是最简单的容器，为 DI 提供基本支持。应用程序上下文（由 org.springframework.context.ApplicationContext 接口定义）通过提供应用程序框架服务构建在 bean 工厂的概念之上，例如从属性文件解析文本消息的能力以及将应用程序事件发布给感兴趣的能力事件监听器。
> 
> 从表面上看，ApplicationContext 与 BeanFactory 非常相似。两者都加载 bean 定义，将 bean 连接在一起，并根据请求分配 bean。但是 ApplicationContext 提供了更多：
> 
> *   应用程序上下文提供了一种解析文本消息的方法，包括对这些消息的国际化 (I18N) 的支持。
> *   应用程序上下文提供了一种加载文件资源（例如图像）的通用方式。
> *   应用程序上下文可以将事件发布到注册为侦听器的 bean。
> 
> 由于它提供的附加功能，在几乎所有应用程序中，ApplicationContext 都优于 BeanFactory。您可能会考虑使用 BeanFactory 的唯一情况是在资源稀缺的情况下，例如移动设备。
> 
> 除了应用程序上下文提供的附加功能外，应用程序上下文和 bean 工厂之间的另一个重大区别是单例 bean 的加载方式。bean 工厂延迟加载所有 bean，延迟 bean 创建直到调用 getBean() 方法。应用程序上下文更智能一些，它会在上下文启动时预加载所有单例 bean。通过预加载单例 bean，您可以确保它们在需要时可以使用——您的应用程序不必等待它们被创建。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-02-08T07:35:14.983

应用程序上下文是 IoC 容器的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-14T15:59:24.100

org.springframework.beans 和 org.springframework.context 包是 Spring Framework 的 IoC 容器的基础。BeanFactory 接口提供了一种高级配置机制，能够管理任何类型的对象。ApplicationContext 是 BeanFactory 的子接口。它增加了与 Spring 的 AOP 特性的更容易集成；消息资源处理（用于国际化）、事件发布；和应用程序层特定的上下文，例如用于 Web 应用程序的 WebApplicationContext。

简而言之，BeanFactory 提供了配置框架和基本功能，ApplicationContext 增加了更多的企业特定功能。ApplicationContext 是 BeanFactory 的完整超集，在本章中专门用于描述 Spring 的 IoC 容器。

更多细节可以在[这里找到](https://docs.spring.io/spring-framework/docs/3.1.x/spring-framework-reference/html/beans.html)

# mercurial - 如何在 Mercurial 中弃用开发线？

> ID：10303414
> 
> 赞同：0
> 
> 时间：2012-04-24T18:00:22.797
> 
> 标签：mercurial

上周末，我花了很多时间（和许多提交）来开发我现在认为是错误的开发线。不过，我不想放弃我所做的工作；我想把它留在项目历史中。

问题是，我已经从我的公共存储库中的开发主线合并了几次。因此，一旦我推送到公共存储库，“主线”将成为我认为是错误的开发线。（另外，每个人的客户都抱怨到处都是新人）

我该如何处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:07:52.553

[`hg rebase`](http://mercurial.selenic.com/wiki/RebaseExtension)就是你要找的。您将创建一个“死胡同”分支，将提交变基到那里，然后您的默认分支不受影响，但死胡同仍在回购历史记录中。

仍然会有一个额外的头部，但是，还有*一个*额外的头部。你仍然`--close-branch`可以像任何其他分支一样摆脱它。

# javascript - 无法使用 javascript 获取输入字段值？

> ID：10303415
> 
> 赞同：0
> 
> 时间：2012-04-24T18:00:23.800
> 
> 标签：javascript, jquery, html

我似乎在使用 javascript 获取字段值时遇到问题，我认为 facebook 弹出 jquery 脚本阻止了它，但我不知道为什么......

如果有人可以帮助我，我将不胜感激，因为现在我要扯掉我的头发了。

```
<input type="text" id="photo_album_name" style="width: 280px; height: 20px; color: #525252;" />
<textarea id="photo_album_desc" style="width: 280px; height: 100px; color: #525252;"></textarea>

function submit_photoalbum()
{
    var albumname = document.getElementById('photo_album_name').value; 
    var albumdesc = document.getElementById('photo_album_desc').value;

    alert("Album name: "+ albumname + ", Album Desc: " + albumdesc);
} 
```

**[您可以在http://goo.gl/op6r4](http://goo.gl/op6r4)查看实时示例**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T18:08:40.983

您的问题是您有多个具有相同 id =>**无效 HTML的元素**

```
<input type="text" id="photo_album_name" style="width: 280px; height: 20px; color: #525252;">
<input type="text" id="photo_album_name" style="width: 280px; height: 20px; color: #525252;">

<textarea id="photo_album_desc" style="width: 280px; height: 100px; color: #525252;"></textarea>
<textarea id="photo_album_desc" style="width: 280px; height: 100px; color: #525252;"></textarea> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:07:23.140

您需要在元素具有价值的某些事件上运行您的函数，或者如果您在加载时运行它，则为它们添加价值。

[小提琴](http://jsfiddle.net/adeneo/8NjBA/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:23:31.153

将输入更改为：

```
<input class="photo_album_name" style="width: 280px; height: 20px; color: #525252;" type="text"/> 
```

和

```
<textarea class="photo_album_desc" style="width: 280px; height: 100px; color: #525252;"/> 
```

和您的选择器：

```
 var albumname = $('#facebox').find('.photo_album_name').val(); 
   var albumdesc = $('#facebox').find('.photo_album_desc').val(); 
```

还要注意这个重复的 ID：

```
<input id="add" style="padding-bottom: 3px; padding-left: 5px; padding-right: 5px; font-size: 13px; margin-right: 15px; padding-top: 3px;" onclick="submit_photoalbum();" type="button" value="Create Photo Album"/> 
```

改成：

```
<input class="add" style="padding-bottom: 3px; padding-left: 5px; padding-right: 5px; font-size: 13px; margin-right: 15px; padding-top: 3px;" onclick="submit_photoalbum();" type="button" value="Create Photo Album"/> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-24T18:10:45.297

好的.. 看来您正在复制您的表单。你在你的 HTML 中有它，当你调用 facebox 时，它会复制隐藏的 HTML。这复制了 ID（正如 gdoron 所说）。

使用其他框架或将 jQuery 插件更改为更稳定的框架（如[http://fancybox.net](http://fancybox.net)）可能是一个好习惯。无论如何。您可以将 submit_photoalbum 功能更改为：

```
function submit_photoalbum()
{
    var albumname = $("#facebox > input").val(); 
    var albumdesc = $("#facebox > textarea").val();

    alert("Album name: "+ albumname + ", Album Desc: " + albumdesc);
} 
```

它有点硬编码，但它会为此工作。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-24T18:07:16.433

既然你无论如何都在使用 jQuery，我只会尝试使用 jQuery 来获取值，所以它应该是：

```
`var albumname = $('#photo_album_name').val();`
```

# c# - 存储和显示来自不同时区的多个服务器的日期时间

> ID：10303421
> 
> 赞同：0
> 
> 时间：2012-04-24T18:00:58.940
> 
> 标签：c#, .net, sql-server

我有一个朋友很难弄清楚如何从多个时区向用户显示 DateTime，但没有针对他们的时区调整日期。例如，假设他在*Arizona*、*California*和*Nevada*有一个服务器，每个服务器都有相应的州时区。如果用户将记录保存为*亚利桑那时间上午 9:00，他希望该记录在向用户显示时在**加利福尼亚*和*内华达*服务器上显示为上午 9:00 。数据库是SQL Server，我相信是2008。

他怎么能这样做呢？我将假设它与 UTC DateTime 值有关？无论如何，我会很感激他如何做到这一点的“完整”示例，因为我们似乎无法达成协议，我可以看出他感到沮丧......

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:09:34.687

听起来他们真正输入的是*当地时间*，而没有真正参考任何特定时区。这最接近`DateTimeKind.Unspecified`（不是本地的，这意味着“在服务器的本地时区”，这是另一回事）的行为。

我不*相信*[`DateTime.SpecifyKind`](http://msdn.microsoft.com/en-us/library/system.datetime.specifykind.aspx)SQL Server 在存储或检索数据时实际上会执行任何时区转换，但可能值得你的朋友在检索后明确使用“未指定”类型。这可以为他以后解决问题。

他*可以*在任何地方使用 UTC - 但听起来它并不是*真正*的 UTC 日期/时间......这是一个“无论你身在何处的当地时间”，这是完全不同的。

当然，在这一点上不提我自己的[Noda Time](http://noda-time.googlecode.com)项目是我的疏忽——正如你的朋友想要的那样[`LocalDateTime`](http://noda-time.googlecode.com/hg/docs/api/html/T_NodaTime_LocalDateTime.htm)——拥有一组合理的日期/时间类型可以*更*容易地在你的代码中保持所有这些. 我建议您的朋友在除了数据库代码本身之外的任何地方都使用 Noda Time - 您可以将 a 转换`LocalDateTime`为`DateTime`using`ToDateTimeUnspecified`并使用`FromDateTime`.

您和您的朋友可能希望阅读[核心概念](http://noda-time.googlecode.com/hg/docs/userguide/concepts.html)和[类型选择](http://noda-time.googlecode.com/hg/docs/userguide/type-choices.html)页面以获取更多思考——无论您是否使用 Noda Time，它都有望让您更仔细地考虑可用的日期/时间类型。如果您仍然不相信，那么您可以阅读我的[咆哮:)`DateTime`](http://noda-time.blogspot.co.uk/2011/08/what-wrong-with-datetime-anyway.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:06:53.713

听起来您的朋友可以直接将时间存储在 SQL 中。例如，如果加利福尼亚和亚利桑那州的两台服务器在当地时间晚上 9 点运行以下查询，则将插入两个晚上 9 点的值。

```
SqlCommand cmd = new SqlCommand("INSERT INTO table (Date) VALUES (@value)", conn);
cmd.Parameters.AddWithValue("@value", DateTime.Now.ToString("yyyy-mm-dd hh:mm:ss"));
cmd.ExecuteNonQuery(); 
```

如果您希望插入 UTC 时间，您可能需要查看[`convert_tz`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)SQL Server 2008 的等效功能。您可以存储 UTC 时间和服务器配置的时区，您将能够执行转换到服务器的时间。

```
 SELECT convert_tz(table.UtcTime, 'UTC', table.TimeZone) FROM table 
```

# php - 特殊字符变成问号 php html

> ID：10303430
> 
> 赞同：3
> 
> 时间：2012-04-24T18:01:14.530
> 
> 标签：php, html, character-encoding, character, meta-tags

我阅读了在 stackoverflow 和其他论坛上找到的所有主题，它托管在 hostgator 上，我之前从未遇到过他们的服务器问题，尽管例如引号被转换为问号，正常的没有黑色菱形或任何东西。这是我尝试过的：

```
 header('Content-Type: text/html; charset=utf-8'); 
```

和

```
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

如果这很重要，这就是我用于 doctype 的内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

我使用 Unitron for osx 编写我的代码，并且我检查了文件是否应该包含 utf-8。

我试图显示的文本只是 html，在 php 页面中。

有人知道如何帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T22:02:40.873

检查您的文件是否以 UTF8 编码，例如使用 Notepad++ 转到“编码”>“转换为 UTF8”并保存文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:06:34.453

您应该使用[htmlentities](http://php.net/manual/en/function.htmlentities.php)将文本中的任何实体转换为 html 实体；例如，版权标志将变为 ©`&copy;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T21:50:21.637

只是一个猜测：检查你在你的 html 中的引号是否真的是引号。它们可以是其他一些看起来相同但实际上不同的角色。从其他来源复制粘贴时可能会发生这种情况。

尝试手动重写导致问题的部分代码。

如果不是这种情况，请尝试使用以下 php 函数之一或两者：
[mb_internal_encoding](http://php.net/manual/en/function.mb-internal-encoding.php)
[mb_http_output](http://www.php.net/manual/en/function.mb-http-output.php)

您的 HTML 也无效：[HTML 验证器](http://validator.w3.org/check?uri=http%3A%2F%2Fsocialscenes.co.uk%2Fv1-5%2Ftermsandconditions.php&charset=%28detect+automatically%29&doctype=Inline&group=0)

# forms - 无法使用 Symfony2 和 TinyMCE 提交表单

> ID：10303431
> 
> 赞同：2
> 
> 时间：2012-04-24T18:01:15.153
> 
> 标签：forms, symfony, tinymce, textarea

我有一个由 TinyMCE Javascript 库丰富的文本区域的表单。启用 Javascript 库后，如果我按下提交按钮，页面不会更改！如果我禁用库，一切正常！人们可能会观察到该库未正确使用（我使用的是[for dummies 教程](http://www.tinymce.com/wiki.php/%22For_Dummies%22)中最简单的示例）。但是，我认为这与我用于开发网站的框架有关：Symfony2。

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T07:16:50.600

很抱歉这个问题，答案已[在](https://stackoverflow.com/questions/8280332/integrating-ckeditor-to-my-symfony2-project)一篇专门针对**CKeditor**和**Symfony2**的帖子中找到。

实际上，问题是由于 textarea 是在控制器内部创建的，默认情况下是*required=true*值。然后，我只**将 textarea 小部件设置为 false**，现在它可以工作了！

事实上，TinyMCE 库（与其他库一样）只是将默认 textarea 设为隐藏并将其富 textarea 添加到 html 页面。所以，浏览器仍然需要一些 textarea 的值，当 textarea 是 hydden 时不能传递！

# zend-framework - 在没有 MVC 的情况下使用 Zend_Db 组件

> ID：10303433
> 
> 赞同：1
> 
> 时间：2012-04-24T18:01:25.623
> 
> 标签：zend-framework, components

我正在尝试使用一些没有 MVC 结构的 Zend 组件。例如，如果我有这个目录结构：

*   /
*   /Zend
*   /图片
*   .
*   .
*   /css

    包括（'Zend/Db.php'）；$db = Zend_Db::factory( $db_config['adapter'], $db_config ); //可以用了

但是，如果我想要这个结构：

*   /
*   /图片
*   /库
*   *   曾德
*   *   其他库
*   /css

    包括（'Lib/Zend/Db.php'）；$db = Zend_Db::factory( $db_config['adapter'], $db_config ); //可以用了

但是在这里，它失败了，因为其他文件和类正在查看： / Zend 而不是 lib / Zend

我怎样才能访问我所有文件中的 Zend_Db 类，而与文件夹级别无关？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T18:15:00.730

我建议将`Lib/Zend`目录添加到您的[include_path](http://www.php.net/manual/en/ini.core.php#ini.include-path)。如果这样做，Zend 类将能够正确加载。

就像是：

```
set_include_path(implode(PATH_SEPARATOR, array(
    '/path/to/Lib',  // <-- change this to the actual path where the Zend dir is uploaded
    get_include_path(),
))); 
```

这会将 Lib 目录添加为 include_path 中的第一个路径。如果您要包含更多其他库文件，您可能希望在之后移动它，`get_include_path()`以便首先搜索现有路径。

或者，您可以手动要求您知道将要使用的 Zend 文件（例如`Lib/Zend/Db.php`，`Lib/Zend/Db/Pdo/Mysql.php`等等，但这可能很乏味且容易忘记，所以我会使用 include_path 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:35:57.470

您应该将`Lib`目录添加到包含路径（不是`Lib/Zend`）：

```
set_include_path(
    $_SERVER['DOCUMENT_ROOT'].'/Lib' . PATH_SEPARATOR .
    get_include_path()
); 
```

然后，您可以在需要它们后使用这些类：

```
require_once 'Zend/Db.php';
$db = Zend_Db::factory( $db_config['adapter'], $db_config ); 
```

由于您在评论中说您的所有脚本都包含一个通用的 config.php 文件，您可以使用它来设置 ZF 自动加载器，这使一切变得更加容易（在设置包含路径之后放置它）：

```
require_once 'Zend/Loader/Autoloader.php';
$autoloader = Zend_loader_Autoloader::getInstance(); 
```

之后，您不需要包含任何其他 ZF 文件，因此您只需在需要时实例化这些类。您还可以使用相同的自动加载器从 lib 加载您自己的类，或从其他库加载类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T04:26:35.383

初始化* ZF 做

```
require_once 'Zend/Loader/Autoloader.php';
Zend_Loader_Autoloader::getInstance(); 
```

现在您可以自由调用任何 ZF 组件，它会自动为您自动加载。

*Lib 目录必须是 php 包含路径的一部分。正如draw010提到的那样，这很容易做到

```
set_include_path(implode(PATH_SEPARATOR, array(
    '/path/to/Lib',  // <-- change this to the actual path where the Zend dir is uploaded
    get_include_path(),
))); 
```

# ruby-on-rails - Rails / Ruby - 什么宝石可以创建带有文本的图像？

> ID：10303434
> 
> 赞同：11
> 
> 时间：2012-04-24T18:01:26.490
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

示例我有一个图像。

![在此处输入图像描述](../Images/5b47684abfddf08656af3e9828c6fdf0.png)

在我的控制器中，我的示例有`@name = "Jon"`

现在我想创建一个新图像作为我刚刚在图像中间使用名称“Jon”的图像。我希望能够指定应该使用的字体大小、颜色和字体系列以及文本的位置。

![在此处输入图像描述](../Images/faf9f79f5b9b0eed776061b19dd03f34.png)

什么宝石能够做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-09T07:39:58.740

一个基本的 rmagick 解决方案还不错，6 行。以下为您提供了一个黄色矩形，中间有 TEXT。您可以尝试字体和磅值。中心电话在那里，因为我认为它在中间看起来更好。

```
require 'RMagick'

canvas = Magick::Image.new(300, 100){self.background_color = 'yellow'}
gc = Magick::Draw.new
gc.pointsize(50)
gc.text(30,70, "TEXT".center(14))

gc.draw(canvas)
canvas.write('tst.png') 
```

我得到要求，你也可以通过。这应该会有所帮助。

# google-drive-api - 同步文件夹路径中没有空格？

> ID：10303437
> 
> 赞同：-4
> 
> 时间：2012-04-24T18:01:36.837
> 
> 标签：google-drive-api

如何将 Windows 上的同步目录切换到“Google Drive”以外的目录？

即使我在 Windows 上，我也住在命令行中，在目录中嵌入空格是一件痛苦的事。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T18:08:41.793

Jay 请使用“google-drive-sdk”标签 - 以及一般的 Stack Overflow - 来解决开发者问题。

如果您需要有关 Google Drive 的帮助，请先查看我们的支持页面：[https ://support.google.com/drive/?hl=en](https://support.google.com/drive/?hl=en)

如果您仍有关于 Google Drive 的消费者问题，请使用我们的 Drive 产品帮助组：[https ://groups.google.com/a/googleproductforums.com/forum/#!forum/drive](https://groups.google.com/a/googleproductforums.com/forum/#!forum/drive)

# actionscript-3 - 无需过渡即可更改视图

> ID：10303440
> 
> 赞同：2
> 
> 时间：2012-04-24T18:01:44.870
> 
> 标签：actionscript-3, apache-flex, flash-builder

这个问题的答案可能很简单，但我不知道。问题是，如何在不使用任何过渡的情况下更改我的 flex 移动应用程序中的视图。

这是我通常如何使用 pushView 进行操作的示例

```
var slideTrans:SlideViewTransition = new SlideViewTransition(); 
slideTrans.direction = ViewTransitionDirection.DOWN;
navigator.pushView(views.SettingsView, null, null, slideTrans); 
```

所以我想知道如何改变视图但没有任何过渡动画。我仍然使用 pushView 还是其他东西？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:40:29.517

我现在无法尝试，但据我记得，您只需将转换定义为`new ViewTransitionBase()`. 基本转换什么都不做。

您还可以定义在传递 none (null) 时使用的默认转换：

```
var emptyTransition = new ViewTransitionBase();
navigator.defaultPopTransition = emptyTransition;
navigator.defaultPushTransition = emptyTransition; 
```

这里有一些关于过渡的信息，不包括空的，但无论如何都很有趣：[在移动应用程序中定义过渡](http://help.adobe.com/en_US/flex/mobileapps/WS8b1c39bd7e9fc36459dd44a012cbc814595-8000.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:11:07.923

是的，你仍然会使用 pushView，尝试为过渡类传递 null

```
navigator.pushView(views.SettingsView, null, null, null);

pushView(viewClass:Class, 
data:Object = null, 
context:Object = null, 
transition:spark.transitions:ViewTransitionBase = null):void 
```

# iphone - 应用程序中的图像大小

> ID：10303446
> 
> 赞同：-2
> 
> 时间：2012-04-24T18:02:05.920
> 
> 标签：iphone

我的应用程序中有大约**90 张图像**，我应该为像素**320x240 或 640x480**选择什么尺寸。在**UIViewController**我有**UIImageView 和 UITextView**。我应该使用**320x240**并且图像的格式可以是**JPEG**还是应该只是**PNG**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:08:59.580

我认为这取决于您的要求。 [Apple 人机界面指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)将帮助您做出正确的决定。

# visual-studio-2010 - IIS Express 7.5 拒绝从 VS 2K10 Ultimate 启动

> ID：10303448
> 
> 赞同：13
> 
> 时间：2012-04-24T18:02:10.037
> 
> 标签：visual-studio-2010, visual-studio, iis-express

尝试使用 IIS Express 从 VS 2010 Ultimate 调试 Web 项目时，出现以下错误：“无法启动 IIS Express Web 服务器。”

出现此错误时，IIS Express 会启动，我可以通过 Web 浏览器浏览工作站点。VS 似乎没有连接到 Web 服务器。

我可以从命令行启动 IIS Express 而不会出错。

我尝试过 IIS Express 7.5 和 8（测试版），结果相同。

该项目使用 VS Development Server 可以正常启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:30:32.733

尝试#1：

*   卸载 IIS Express
*   安装 IIS Express 7.5
*   安装 IIS Express 8.0

尝试#2：

*   转到 C:\Users\\Documents\IISExpress\config 并将节点上的 IIS 版本更改为 4.0.30319

参考：[链接](http://roykimsharepoint.wordpress.com/2012/11/10/issue-visual-studio-2012-unable-to-launch-the-iis-express-web-server/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T00:42:26.310

我在vs2012中遇到了同样的问题，但通过以下方式解决了：

卸载 IIS

卸载VS2010

安装VS2013

# html - 将 PSD 切片为 CSS+HTML 输出的好工具

> ID：10303454
> 
> 赞同：5
> 
> 时间：2012-04-24T18:02:35.217
> 
> 标签：html, css, slice, psd

是否有任何工具可以对生成 CSS+HTML 的 PSD 设计进行切片（不是很好，但作为一个起点）。我听说 Photoshop 有一些所见即所得的编辑器，可以在切片 PSD 上生成 CSS+HTML 输出，但没有找到任何东西。或者是否有任何好的教程可以帮助我作为开发人员处理这种棘手的 css 情况（作为渐变 div 背景和阴影添加而没有不受支持的 css3）。抱歉这么愚蠢的问题，但作为开发人员，我真的对这个“设计”感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:07:58.403

我使用 psd2cssonline.com - 你可以免费创建基本的 html/css，如果你想要更复杂的 css，你可以订阅 pro 服务。两个版本都很棒——它真的帮助我学习了 CSS。基本上在 Photoshop 中，您根据您希望每个图层的类型（背景、文本字段、页脚、翻转、图像等）为您的 psd 图层命名，然后将其上传到站点，预览并下载输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:05:39.963

是的，有很多教程，但作为起点，请查看以下内容：

**[http://www.1stwebdesigner.com/freebies/psd-htmlcss-conversion-tutorials/](http://www.1stwebdesigner.com/freebies/psd-htmlcss-conversion-tutorials/)**

**[http://www.ehow.com/how_8391171_export-psd-css.html](http://www.ehow.com/how_8391171_export-psd-css.html)**

**[http://www.warriorforum.com/website-design/199348-best-psd-html-tool.html](http://www.warriorforum.com/website-design/199348-best-psd-html-tool.html)**

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:46:55.977

我的公司制作了一个名为 SiteGrinder 的 Photoshop 插件，它将 Photoshop 设计转换为成品网站或 WordPress 主题。 [http://www.medialab.com](http://www.medialab.com)

您还可以将 .psd 发送到许多切片服务。

# c# - 如何在 C# 中使用 SQL Server 存储过程数字参数

> ID：10303459
> 
> 赞同：4
> 
> 时间：2012-04-24T18:02:59.090
> 
> 标签：c#, sql

我在我的一个 C# 项目中使用以下 SQL Server 存储过程。

```
create procedure [dbo].[TestRecordSelect]
@OMarks numeric(3,1) output
as 
begin
select @OMarks = isnull(sum(cast(OMarks as numeric(3,1))),0) from Marks 
end 
```

在 SQL Server 中执行该过程时，我得到了预期的结果，即 24.9。但是当我在我的 C# 项目中使用相同的过程并调用`@OMarks`如下

```
cmd.Parameters.Add("@OMarks", SqlDbType.Decimal).Direction = ParameterDirection.Output;
tbomarks.Text = cmd.Parameters["@OMarks"].Value.ToString(); 
```

我得到的是 25 而不是 24.9，这是四舍五入的数据。

我的问题是我不想得到 25。我想在 tbomarks 中得到 24.9

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T18:14:38.520

```
SqlParameter param = new SqlParameter("@OMarks", SqlDbType.Decimal);
param.Direction = ParameterDirection.Output;
param.Precision = 3;
param.Scale = 1;
cmd.Parameters.Add(param); 
```

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.scale.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.scale.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T18:11:28.853

在您的 C# 中，您没有指定参数的[比例](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.scale%28v=vs.90%29.aspx)（或精度），这意味着您得到零个小数位。

> 如果未明确指定 Scale 属性并且服务器上的数据不适合比例 0（默认值），则数据可能会被截断
> 
> 输出参数需要精度和比例

# javascript - 如何使这个脚本动态化

> ID：10303460
> 
> 赞同：1
> 
> 时间：2012-04-24T18:03:00.617
> 
> 标签：javascript

我正在使用这个脚本

```
<script type="text/javascript">
  var defaultnoimage="http://1.bp.blogspot.com/_u4gySN2ZgqE/SosvnavWq0I/AAAAAAAAArk/yL95WlyTqr0/s400/noimage.png";
  var maxresults=14;
  var splittercolor="none";
  var relatedpoststitle="Related Results";
</script> 
```

如您所见，它有一个变量，可以让我为结果命名，在这种情况下，我使用了相关结果。此代码在后面使用一次，我的每一页都使用这种方式。因此，例如，如果我将其更改为“更多结果”，它将在所有页面上随处更改。我不希望这样，我希望能够给每个页面一个不同的名称，就像在一个页面上它就像“更多图像结果”，而在第二个页面上它是别的东西。你可以在这个页面上看到一个演示[http://bloghutsbeta.blogspot.com/2012/04/testing-slider.html](http://bloghutsbeta.blogspot.com/2012/04/testing-slider.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:50:24.377

猜测你在问什么，因为我发现你的措辞有点混乱......

当我需要将来自服务器语言/环境的代码注入到我的客户端代码中时，我喜欢在 JS 中使用[立即调用函数表达式 (IIFE)](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)，而我的服务器语言在输入参数区域中进行输出。

所以，在 PHP 中（因为我不知道你的服务器语言是什么）我会这样做：

```
<?php
$relatedpoststitle = 'Related Results'; //or whatever you need it to be for the current execution
?>

<script type="text/javascript">
  (function (global, relatedpoststitle) {
    global.defaultnoimage = 'http://1.bp.blogspot.com/_u4gySN2ZgqE/SosvnavWq0I/AAAAAAAAArk/yL95WlyTqr0/s400/noimage.png';
    global.maxresults = 14;
    global.splittercolor = 'none';
    global.relatedpoststitle = relatedpoststitle;
  }(
    window,
    "<?php echo $relatedpoststitle; ?>"
  ));
</script> 
```

这让我可以将所有服务器代码整合到一个小空间中，而不是混合来自不同语言/环境的代码/逻辑。

# redirect - Shiro 不会重定向到未经授权的Url w/invalid login - Shiro with Spring and Tiles

> ID：10303464
> 
> 赞同：2
> 
> 时间：2012-04-24T18:03:04.200
> 
> 标签：redirect, spring-mvc, tiles, shiro

我正在使用 Spring MVC、Tiles 和 Shiro。

这是我的未授权Url 属性的配置方式： `<property name="unauthorizedUrl" value="/unauthorized"/>`

我的期望是，当`MyAuthorizingRealm`发现无效凭据时，Shiro 将重定向到`/unauthorized`.

但是，我在提交表单时不会发生这种情况。我有一个`@Controller`映射到处理 GET 和 POST 操作的登录名`/login`。对于对 url`/lists`的访问，将显示登录表单。所以它似乎在一种情况下有效，但在另一种情况下无效。

```
@Controller
@RequestMapping(value = "/login")
public class LoginController {

    @RequestMapping(method = RequestMethod.GET)
    public String getLoginFormView(Model model) {
        return "login";
    }

    // if this method doesn't exist a Post not supported exception is thrown
    @RequestMapping(method = RequestMethod.POST)
    public String handlePost() {
        return "this view doesn't exist";
    }
} 
```

即使我扔出我仍然`AuthenticationException`无法`MyAuthorizingRealm.doGetAuthenticationInfo()`让 Shiro 重定向到`/unauthorized`. 它总是以继续过滤器链结束并在`@Controller`;中执行 POST 方法。当然，我希望重定向。

这是我的：http `webapp-context.xml`: [//pastebin.com/XZaCKqEC](http://pastebin.com/XZaCKqEC)

这是我的：http `web.xml`: [//pastebin.com/5H81Tm8A](http://pastebin.com/5H81Tm8A)

以下是 Shiro 的一些 TRACE 日志输出。当您尝试访问时，Shiro 工作`/lists`。但是，当登录表单提交时，重定向`/unauthorized`永远不会发生。注意，检测到登录提交：http: [//pastebin.com/ZEK3CTdJ](http://pastebin.com/ZEK3CTdJ)

因此，检测到登录提交，但无论如何都会执行原始过滤器链而不是重定向到`/unauthorized`

我难住了。非常感谢您的帮助，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:48:20.917

我想我看到两个问题：

1）您的 spring xml 的 pastebin 未显示使用您的领域配置的 SecurityManager。即它需要看起来像这样：

```
<bean id="securityManager" class="org.apache.shiro.web.mgt.DefaultWebSecurityManager">
    <property name="realm" ref="myRealm"/>
</bean> 
```

2) 你正在设置一个 Spring MVC 控制器来执行身份验证，这意味着你想要控制何时`subject.login`被调用，而不是依赖于 Shiro 的内置 FormAuthenticationFilter ( `authc`)。

如果这样做，则需要将`authc`过滤器重新定义为 [PassThruAuthenticationFilter](http://shiro.apache.org/static/current/apidocs/org/apache/shiro/web/filter/authc/PassThruAuthenticationFilter.html)。

这允许请求“通过”过滤器链到您负责调用 subject.login 的登录视图/控制器

您可以在 spring.xml 中通过设置`filters`属性并`authc`用作配置过滤器的名称来执行此操作：

```
<bean id="passthruAuthcFilter" class="org.apache.shiro.web.filter.authc.PassThruAuthenticationFilter">
    <property name="loginUrl" value="/login"/>
</bean>

<bean id="shiroFilter" class="org.apache.shiro.spring.web.ShiroFilterFactoryBean">
    ...
   <property name="filters">
       <util:map>
           <entry key="authc" value-ref="passthruAuthcFilter"/>
       </util:map>
   </property>
   ...
</bean> 
```

此外，作为提示，您可能希望使用 Shiro 的 WebUtils 将最终用户重定向到他们最初尝试的 url，然后再重定向到登录。Shiro`FormAuthenticationFilter`会自动执行此操作，但是当您自己执行登录时，如果需要，您有责任执行此重定向。

例如，在您`LoginController`的 handlePost 方法中：

```
subject.login(authcToken);
WebUtils.redirectToSavedRequest(request, response, yourFallbackUrlIfThereIsntASavedRequest);
return null; //tells Spring MVC you've handled the response, and not to render a view 
```

# javascript - 使用 Lightbox Jquery 插件

> ID：10303468
> 
> 赞同：0
> 
> 时间：2012-04-24T18:03:21.330
> 
> 标签：javascript, jquery, lightbox

我设计了一个网页，左边有一个 div 元素，中间有 iframe，右边有另一个 iframe。

1.在中心 iframe 中，我在单击这些图像时加载缩略图图像，灯箱插件被调用，并且必须在整个文档上显示更大的图像（背景模糊）。

2.我面临的问题是灯箱插件加载在中心 iframe 内，而不是在整个文档中（如在许多社交网站中）。

3.我从网上下载了灯箱插件并在我的网页中使用

4.我希望图像在灯箱的帮助下显示在整个文档中。

任何帮助是极大的赞赏

这是我写的代码片段

```
<!--this code is written in home page-->
<div>
<ul>
        <li><a href="http://localhost/php/image.php?category=sea" target="description" class="underline">SEA</a></li>
        <li><a href="http://localhost/php/image.php?category=ANIMALS" target="description" class="underline">ANIMALS &amp; BIRDS</a></li>
        <li><a href="http://localhost/php/image.php?category=plants" target="description" class="underline">plants</a></li>
     <li><a href="http://localhost/php/image.php?category=Tourism" target="description" class="underline">Tourism</a></li>
<ul>
</div> 
<filedset><iframe name="description" width="725px" height="800px" align="left" frameborder="0" id="description"></iframe></fieldset>
<fieldset>
<iframe name="info" width="300px" height="380px" frameborder="0" src="UserInformation.php" id="iframeid"><!--logged in user's information-->
</iframe>
</fieldset>
<!--this code is written in image.php file-->
<head>
//calling JQUERY LIGHT BOX PLUGIN HERE ON clicking an image displayed in this page(within iframe name="description")
<script type="text/javascript" src="../js/jquery.js"></script>
<script type="text/javascript" src="../js/jquery.lightbox-0.5.js"></script>
<link rel="stylesheet" type="text/css" href="../css/jquery.lightbox-0.5.css" media="screen" />
<script type="text/javascript">
    $(function() {
        $('#gallery a').lightBox();
    });
    </script>
</head> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:05:03.620

我已经解决了我所面临的问题，here

[http://www.dynamicdrive.com/forums/archive/index.php/t-19051.html](http://www.dynamicdrive.com/forums/archive/index.php/t-19051.html)

# android - android在外部浏览器中打开链接

> ID：10303477
> 
> 赞同：1
> 
> 时间：2012-04-24T18:04:06.610
> 
> 标签：android, webview

我正在尝试找出将几个 html 与 flash 打包的方法，并将其捆绑为 android 项目。而不是创建 webview 并加载 webview

```
webView.loadUrl("file:///.."); 
```

是否可以在平板电脑的本机（外部）浏览器中加载捆绑的文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T18:21:22.647

您需要在意图中添加可浏览类别。

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.fromFile("file:////"));
intent.addCategory(Intent.CATEGORY_BROWSABLE);
startActivity(intent); 
```

**注意：**不要硬编码路径使用 Evironment.getExternalEnvironment() 来获取外部 sdcard 的路径

# php - 浏览器重启后 Zend_Session 和字符集的兼容性问题

> ID：10303478
> 
> 赞同：0
> 
> 时间：2012-04-24T18:04:08.257
> 
> 标签：php, zend-framework, character-encoding, iso-8859-1, zend-session

我面临一个字符集/会话问题。

[背景：我使用Zend](http://framework.zend.com/)开发了一个网站。我必须使用 ISO-8859-1 字符集。在用户使用期间，一些数据被存储到会话变量（[Zend_session](http://framework.zend.com/manual/en/zend.session.basic_usage.html)）中，一切都很好。

但是，一旦用户在几秒钟后关闭并重新启动浏览器，用户会话变量已被转换为 UTF-8 字符集，并且所有重音都无法正确显示！

所以，我的问题是： - 是否可以指定[Zend_Session](http://framework.zend.com/manual/en/zend.session.basic_usage.html)字符集在数据存储在服务器端时使用？- 用户关闭浏览器时是否可以强制清理会话？

提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:53:27.960

没有问题...

我从字符集 UTF-8 迁移到 ISO-8859-1，我的网站的旧版本仍然在我的浏览器中打开。

因此，在浏览器启动时，我的网站的两个版本同时加载并将数据推送到 php 会话变量中。

我的错

# sql-server - 在单个 INSERT/SET 上执行 BEGIN/COMMIT TRAN 是一种好的编码习惯吗？(SQL Server 2008)

> ID：10303479
> 
> 赞同：0
> 
> 时间：2012-04-24T18:04:09.397
> 
> 标签：sql-server, tsql, transactions

我刚刚注意到一个存储过程正在使用以下 BEGIN/COMMIT TRAN。

```
BEGIN TRAN
  INSERT INTO SomeTable
     (
         TypeID
     )  
  VALUES
     ( 
         @TypeID
     )
    SET @OvID = SCOPE_IDENTITY() 
 COMMIT TRAN 
```

在 INSERT 和 SCOPE_IDENTITY 上使用事务是一种好习惯吗？

以这种方式使用 TRAN 会大大减慢 INSERT 过程吗？

当您有多个可能失败的语句（即像两个 INSERTS）时，我总是会考虑使用事务。在这种情况下，我可以看到 INSERT 失败，但我怀疑 SCOPE_IDENTITY 总是会成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:06:03.467

对于单个语句，它并不重要，因为您没有获得任何额外的原子性或可靠性。并且`SCOPE_IDENTITY()`不会受到当前批次之外的任何东西的影响，因此将其包装在一个`TRANS`块中不会有任何影响。

进入是否是一个*好*习惯是相当主观的，所以我故意不解决它！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:16:57.097

你的最后一点取决于你所说的“成功” - 如果插入失败，*取决于错误的性质和范围/批处理中发生的任何其他事情*，分配将会发生，但`@OvID`会是`NULL`.

该事务确实有一些开销（我怀疑您会注意到差异，直到您在循环中执行数千次）。但是，如果这是一个正在进行的项目的代码，事务包装器可能有助于说明意图，例如，如果以后可能会有更多语句，您将不再拥有这个单语句原子事务。`TRY/CATCH`如果您不打算为任何或其他错误处理而烦恼，那么打扰交易似乎很有趣。我总是想处理回退，以防万一我以某种方式将孤立的 tx 留在外面。根据故障的来源和严重程度，可能会发生奇怪的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T18:07:16.627

事务有开销，它会减慢查询时间。对于单个插入，没有必要。如果插入失败，scope_identity 将为空。

# c# - 只获取基类属性，不继承类，使用反射

> ID：10303482
> 
> 赞同：1
> 
> 时间：2012-04-24T18:04:17.070
> 
> 标签：c#

如何使用反射仅获取基类中的属性，而不是继承类。

假设我的基类有一个虚方法，而继承类将覆盖它。如果覆盖调用 base.MyMethod() 则 base.MyMethod() 中的反射从两个类或仅继承类中获取属性，具体取决于使用的 BindingFlags。

有没有办法只能访问基类中的属性？

编辑：也许一些代码将有助于解释我为什么要这样做。

```
internal static void Save(DataTransactionAccess data, string sproc, object obj)
{
  if (checkMandatoryProperties(obj))
  {
    saveToDatabase(data, sproc, obj);
  }
}

private static void saveToDatabase(DataTransactionAccess data, string sproc, object obj)
{
  List<object> paramList;
  PropertyInfo idProperty;
  populateSaveParams(out paramList, out idProperty, obj);
  if (idProperty != null)
  {
    int id = data.ExecuteINTProcedure(sproc, paramList.ToArray());
    idProperty.SetValue(obj, id, null);
  }
  else
  {
    data.ExecuteProcedure(sproc, paramList.ToArray());
  }
}

private static void populateSaveParams(out List<object> paramList, out PropertyInfo idProperty, object obj)
{
  paramList = new List<object>();
  idProperty = null;
  foreach (PropertyInfo info in obj.GetType().GetProperties())
  {
    if (info.GetCustomAttributes(typeof(SaveProperty), true).Length > 0)
    {
      paramList.Add("@" + info.Name);
      paramList.Add(info.GetValue(obj, null));
    }
    if (info.GetCustomAttributes(typeof(SaveReturnIDProperty), true).Length > 0)
    {
      idProperty = info;
    }
  }
} 
```

在 populateSaveParams 的 foreach 循环中，我需要获取调用 Save 的 obj 中的类的属性，而不是它继承自的任何类或其任何子类。

希望这能让它更清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-25T15:55:51.403

我遇到了一个场景，我需要一种方法来仅基于基类属性执行决策。

所以我过滤了实例的属性，这可以通过如下所示的两种方式之一来完成，

使用`BaseType`属性上`Type`然后调用`GetProperties`方法，

```
var baseType = instance.GetType().BaseType;
var properties = baseType.GetProperties(); 
```

使用[`DeclaringType`](https://msdn.microsoft.com/en-us/library/system.type.declaringtype(v=vs.110).aspx)属性检查是来自基类还是派生类，

```
var type = instance.GetType();
var properties = type.GetProperties();
// properties = properties.Where(p => p.DeclaringType.FullName == typeof(SomeClass).FullName).ToArray();
properties = properties.Where(p => p.DeclaringType.FullName == type.BaseType.FullName).ToArray(); 
```

下面的代码片段检索基类属性并将它们写入输出流。[这](http://rextester.com/XKBX72341)是编译C#在线链接

```
using System;
using System.Linq;

namespace Rextester
{
    public class Program
    {
        public static void Main(string[] args)
        {
            // Employee (derived class) - Person (base class)
            var employee = new Employee
            {
                Company = "Stack Overflow",
                Designation = "Community Manager",
                FirstName = "Josh",
                LastName = "Heyer"
            };

            var baseType = employee.GetType().BaseType;
            var properties = baseType.GetProperties();
            var method = baseType.GetMethod("Print");

            for (var i = 0; i < properties.Count(); i++)
            {
                Console.WriteLine(properties[i].Name);
            }

            Console.WriteLine();
            method.Invoke(employee, null);
        }
    }

    public class Person
    {
        public string FirstName { get; set; }

        public string LastName { get; set; }

        public virtual void Print()
        {
            Console.WriteLine("Name: {0} {1}", FirstName, LastName);
        }
    }

    public class Employee : Person
    {
        public string Company { get; set; }

        public string Designation { get; set; }

        public override void Print()
        {
            base.Print();
            Console.WriteLine("Employment Details: {0} {1}", Company, Designation);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:35:44.690

在我看来，进行一些重组是有必要的。任何实现接口的东西都会返回一组保存操作：

```
public interface ISomeInterface
{
     IEnumerable<SaveStep> SaveData();
}

public class SomeClass : SomeBaseClass, ISomeInterface
{
    public virtual IEnumerable<SaveStep> SaveData()
    {
        foreach(var item in base.SaveData())
           yield return item;

        yield return new SaveStep { ... }
    }
} 
```

然后，您扩展方法（或任何调用者）只需要调用该`SaveData`方法，然后您会返回一组`SaveStep`对象，您可以使用这些对象根据该类想要的任何数据构造一个过程调用。

# c# - 文件未按顺序列出

> ID：10303485
> 
> 赞同：0
> 
> 时间：2012-04-24T18:04:28.443
> 
> 标签：c#, directory

我正在使用 StreamWriter 类创建一堆按顺序命名的文件，从 0 到 30。当我尝试循环读取它们时，当我比较两个文件时，0 与 10 进行比较，然后与 11 进行比较，依此类推，直到 19，然后 0 与 2 进行比较，然后是 21，依此类推。有什么方法可以让我将 0 与 1 进行比较，然后与 2 进行比较，以此类推？我正在使用 Directory.GetFiles(); 读取文件

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:18:14.520

`Directory.GetFiles();`只返回一个字符串数组，所以很容易重新排序它们

例如

```
 var files = Directory.GetFiles();
       var orderedFiles = files.OrderBy(s=>int.Parse( s));

        foreach (string s in orderedFiles)
        {
            Console.WriteLine(s);
        } 
```

注意：您可能需要[`Path.GetFileNameWithoutExtension`](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)在调用 int.Parse 之前使用，并且您可能还想使用它[`int.TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:32:14.020

这将为您解决问题。按创建时间排序

```
System.IO.DirectoryInfo di = new System.IO.DirectoryInfo("YourDirectoryPath");
System.IO.FileInfo[] files = di.GetFiles();

var sortedFiles = from f in files
                          orderby f.CreationTime ascending
                          select f; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T18:15:42.290

请参阅[Directory.GetFiles() 上的 MSDN 页面](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx)。特别注意这一点：

> 返回文件名的顺序不保证；如果需要特定的排序顺序，请使用 Sort() 方法。

您应该获取文件名并自己对它们进行排序。

通常文件按名称顺序返回，但在这种情况下，顺序将是 0,1,11,12,...,2,20,21,...3 等。如果按名称排序，您可以看到这一点在 Windows 资源管理器中。正如其他人已经建议的那样，最好的办法是用前导零填充。即 00、01、02、03、...、10、11、12 等。

# javascript - java "bean:write" + javascript = "未终止的字符串字面量

> ID：10303493
> 
> 赞同：0
> 
> 时间：2012-04-24T18:05:09.833
> 
> 标签：javascript, struts-1, struts1

```
<%@ taglib uri="/tags/struts-bean" prefix="bean"%>

form.parentProcessNumberPresentation.value= "<"+ "<bean:write name="associatedProcessField" property="fieldInstruction"/>" + ">"; 
```

当我打印带有`"bean: write"`它的文本时`"\ n"`，会破坏将分配给表单中组件的字符串。

这个过滤器怎么能`"\ n"`跳过它？我试过了：

```
form.parentProcessNumberPresentation.value= "<"+ "<bean:write name="associatedProcessField" property="fieldInstruction" filter="false"/>" + ">"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:35:00.687

问题是`"<bean:write name="associatedProcessField" property="fieldInstruction" filter="false"/>"`返回了一个，但它是`"\n"`这样的，因此归属于 JavaScript 变量的字符串无效。

# jakarta-ee - 有没有办法从 WSJdbcDataSource 对象获取 XAConnection 或 XAResource 对象？

> ID：10303497
> 
> 赞同：1
> 
> 时间：2012-04-24T18:05:14.097
> 
> 标签：jakarta-ee, db2, websphere, jndi, xa

我尝试了多种方法从 Websphere 获取 XADataSource 进行 JNDI 查找，但徒劳无功。我之前曾在不同的讨论中询问过该 qn。

但是，我意识到我不需要从 Websphere 获取 XADataSource（特别是 DB2XADataSource）的实例。我只需要 XAConnection 对象或 XAResource 就能够登记/取消列出 XA 资源以参与事务。

有什么方法可以从 Websphere 获得？或者是否有任何其他方法可以使用 WAS 对数据源进行 jndi 查找，但不使用 websphere 的 WSJdbcDataSource 类。

# javascript - 更改 HTML 图像源

> ID：10303498
> 
> 赞同：1
> 
> 时间：2012-04-24T18:05:14.553
> 
> 标签：javascript, jquery, html, css

我有一些类似下面的代码，它在特定条件下更改文本的字体。 `newEntryRow.find("p").find("span").css('color','red');`

现在我正在尝试做同样的事情，但要更改图像的来源。我尝试了类似 `newEntryRow.find("img").css('src', "foo.png"`）；`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T18:06:29.097

用于`.attr`更改元素的属性，

```
newEntryRow.find("img").attr('src', "foo.png") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:06:31.227

利用

```
 newEntryRow.find("img").attr('src', "foo.png"); 
```

您也可以使用 css 设置图像但作为背景

```
 newEntryRow.find("img").css('background-image', "url('path/to/pic')") 
```

不要忘记设置元素的宽度、高度和不重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:06:34.593

```
newEntryRow.find('img').attr('src', 'foo.png'); 
```

[http://api.jquery.com/attr/](http://api.jquery.com/attr/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T18:20:06.237

而不是 ".css('src', "foo.png");"

使用 ".attr('src', "foo.png");"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T18:06:43.390

尝试：

```
 newEntryRow.find("img").attr("src","foo.png"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T18:07:00.797

它不是 CSS 属性，而是标签本身的属性：

```
newEntryRow.find("img").attr('src', "foo.png"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-24T18:07:12.170

使用 jQuery`attr()`方法在 dom 元素上设置任何属性。

```
newEntryRow.find('img').attr('src', 'foo.png'); 
```

参考：[http ://api.jquery.com/attr/](http://api.jquery.com/attr/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-24T18:07:26.200

```
newEntryRow.find("img").attr('src', "foo.png"); 
```

# python - 在字符串python中选择一个得分最高的块

> ID：10303504
> 
> 赞同：0
> 
> 时间：2012-04-24T18:05:45.580
> 
> 标签：python, algorithm

这更像是一个算法问题，但我觉得 python 有一种巧妙的方法来做到这一点。

假设我有一个字符串：

```
 string = " this is how i do is it..is this is how we do it.. this is how everyone do it is" 
```

现在我基本上想从字符串中提取最重要的块。我如何决定“最重要”基本上只是通过查看词频。所以可以说，如果我想要一个长度为 10 个字符/单词（基本上是一个固定窗口）的块，那么基本上我试图找到其术语具有最大术语频率得分的块。

所以在上面的例子中，可能“是”是重复次数最多的词。所以也许最好的块是

```
 "is this is" 
```

或类似的东西。？？我如何在 python 中有效地做到这一点（这是给 python 社区的）

有没有更好的方法来解决这个问题（这是针对算法社区的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:47:36.877

这是一个尝试：

我给每个字母（包括空格）打分。分数等于元素在字符串中出现的次数。查找元素得分总和最大化的 10 个元素窗口。

```
string = " this is how i do is it..is this is how we do it.. this is how everyone do it is"

from collections import Counter 

s_count = Counter(string)

def score_count(x):
    return sum(s_count[ele] for ele in x)

most_imp = None
high_val = 0
n = 10   

for i in xrange(0, len(string) - n):

    temp_value = score_count(string[i: i + n])

    if temp_value > high_val:
        high_val = temp_value
        most_imp = string[i : i + n] 
```

结果：

```
>>> most_imp
' i do is i' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:34:52.810

这就是您为每个单词构建计数字典的方式。从这里获取具有最大计数总和的子字符串应该很简单。

```
import re
tokens = re.findall(r'\w+', string)
counts = {}
for i in tokens:
    counts[i]=counts.get(i,0)+1 
```

# java - 将中缀表达式（带括号）转换为二叉树

> ID：10303506
> 
> 赞同：7
> 
> 时间：2012-04-24T18:05:49.097
> 
> 标签：java, math, tree, expression, binary-tree

作为 Java 赋值的一部分，我必须获取一个输入算术表达式并将其存储在二叉树中。

除了我在表达式字符串中读取并将其存储在二叉树中的部分之外，我已经完成了分配所需的一切。

我创建了一个名为 BinaryTree 的类。它唯一的字段是一个名为 root 的树节点。这个树节点被定义为 BinaryTree 中的一个内部类。它有 3 个字段、一个通用数据字段和两个二叉树类型的子字段（左和右）。

我很难定义用于读取表达式的算法，例如

(5*(2+3)^3)/2

并将其存储在这样的树中

```
 /
        ^          2
    *       3
  5   +
     2  3 
```

任何人都可以帮助算法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T18:07:07.620

看一[下调车场算法](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)。来自维基百科：

> 在计算机科学中，调车场算法是一种用于解析以中缀表示法指定的数学表达式的方法。它可用于以反向波兰表示法 (RPN) 或作为抽象语法树 (AST) 生成输出。该算法由 Edsger Dijkstra 发明并命名为“调车场”算法，因为它的操作类似于铁路调车场。Dijkstra 在 Mathematisch Centrum 报告 MR 34/61 中首次描述了调车场算法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T00:41:12.253

下面是一些[用于创建](http://cplusplus.kurttest.com/notes/stack.html#binary-expression-tree)使用两个堆栈的二叉表达式树的 C++ 代码，一个用于操作符，另一个用于操作数。最终，操作数堆栈包含一个元素，即完整的二叉表达式树。

# objective-c - 不允许分配给“只读”返回结果，但属性被声明为“读写”

> ID：10303508
> 
> 赞同：6
> 
> 时间：2012-04-24T18:05:52.623
> 
> 标签：objective-c, properties, compiler-errors

我有一个具有`readwrite` `int`属性的类：

```
@interface PlayScene : UIView

@property (readwrite, assign) int Figure1;
@property (readwrite, assign) int Figure2;
@property (readwrite, assign) int Figure3; 
```

但是当我尝试更改属性的值时，会发生错误：

```
[self Figure1] = 1; 
```

> 不允许分配给 Objective-C 消息的“只读”返回结果

问题是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T18:11:47.817

语法错误！

称呼

```
[self setFigure1:1]; 
```

或者

```
self.Figure1 = 1; 
```

（它是一样的，感谢@synthesize [我希望你确实添加了一个合成器]！）

并且：顺便说一句：您可以为您的实例变量使用小写驼峰式。这有点全球通用。:)

# ios - UIScrollview 故事板

> ID：10303509
> 
> 赞同：0
> 
> 时间：2012-04-24T18:05:54.997
> 
> 标签：ios, cocoa-touch, uiscrollview

我正在尝试为按钮和类似的东西实现 UIScrollView。我正在使用情节提要以图形方式进行操作，但是当我运行应用程序时它不会滚动。什么可能是我的问题，你知道任何关于在故事板中实现 UIScrollView 的教程，不是针对图像，而是针对按钮、标签和东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T08:18:31.930

作为后续，请务必在 viewDidAppear 中设置 contentSize 而不是 viewDidLoad

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:14:52.703

您需要编写代码将滚动视图的`contentSize`属性设置为大于它的`bounds.size`值以使其滚动。您不能`contentSize`在情节提要中设置，它也不会自动设置自己的`contentSize`.

# c - 头文件中声明函数的链接器混淆 (C)

> ID：10303510
> 
> 赞同：1
> 
> 时间：2012-04-24T18:05:56.587
> 
> 标签：c, linker-errors, header-files

所以我在上 C 编程课，我认为自己是一个不错的程序员，但我遇到了一些我不太明白如何思考的事情。我正在编写一个使用多个头文件并有两个用于创建可执行文件的 c 文件的压缩器。我已经正确地包含了头文件（我认为），将它们放在同一个目录中并说

```
#include "myLib.h" 
```

现在。这是我坚持的部分。在一个文件中，我有一个调用头文件中声明的函数的主要方法。这些函数的源代码在我之前提到的另一个 .c 文件中。当我编译时：

```
gcc -Wall TestCmp.c LZWCmp.o 
```

其中 TestCmp.c 是包含主文件的文件，LZWCmp.o 是另一个 .c 文件的目标文件。我收到编译错误，告诉我四个声明的方法中的三个是未定义的引用。为什么链接器会接受其中一种方法存在但不接受其他三种？

任何帮助，将不胜感激。谢谢！

这是 TestCmp.c 的源代码

```
#include <stdio.h>
#include <assert.h>
#include <limits.h>
#include "LZWCmp.h"
#include "SmartAlloc.h"
#include "MyLib.h"

/*function pointer to the CodeSink function in TestCmp, which function simply prints  each 4-byte uint sent to it as 8 hex digits. It does so 8 integers per line, with one space between each pair of integers, and no space after the final integer, just an EOL.*/
void sink(void *pointer, uint code) {
    printf("%08X ", code);
}

void main() {
   int numCodes; /*Number of codes that compressor starts with understanding*/
   LZWCmp *cmp = malloc(sizeof(struct LZWCmp)); /*allocate memory for compressor state*/
   CodeSink ptr = sink; /*set sodesink pointer to sink function*/
   uchar letter; /*letter for intake and compression*/

   printf("Enter symbol count: ");
   scanf(" %d", &numCodes);
   while(letter != '\n') {
      letter = getchar();
   }

   LZWCmpInit(cmp, numCodes, ptr, NULL); /*Initialize compressor */

   while(letter < UCHAR_MAX) {
      letter = getchar(); 
      LZWCmpEncode(cmp, letter);     /*Send letter to encoder*/ /*FIRST FUNCTION TO NOT WORK*/
   }

   LZWCmpStop(cmp); /*Finish program when finding EOF character*/
   LZWCmpDestruct(cmp); /*Free memory space*/

} 
```

以及 myLib.h 的源代码

```
#ifndef MYLIB_H
#define MYLIB_H

#define BITS_PER_BYTE 8

typedef unsigned char uchar;
typedef unsigned long ulong;
typedef unsigned int uint;
typedef unsigned short ushort;

#ifdef LITTLE_ENDIAN

#define UShortEndianXfer(val) ((val) >> 8 | (val) << 8}

#else

#define UShortEndianXfer(val) (val)

#endif

#endif 
```

和 LZWCmp.h 的来源

```
#ifndef LZW_H
#define LZW_H

#include "MyLib.h"

#define RECYCLE_CODE 4096  // Recycle dictionary rather than add this code

/* Function pointer to method to call when a code is completed and ready for
 * transmission or whatever.  The void * parameter can point to anything,
 * and gives hidden information to the function so that it can know what
 * file, socket, etc. the code is going to.  The uint is the next 32 bits
 * worth of compressed output. */
typedef void (*CodeSink)(void *, uint code);

/* One node in a trie representing the current dictionary.  Use symbols
 * to traverse the trie until reaching a point where the link for a
 * symbol is null.  Use the code for the prior link, and add a new code in
 * this case.  Each node has as many links and codes as there are symbols */
typedef struct TrieNode {
    ushort *codes;
    struct TrieNode **links;
} TrieNode;

/* Current state of the LZW compressor. */
typedef struct LZWCmp {
   TrieNode *head;   /* Head pointer to first TrieNode */
   CodeSink sink;   /* Code sink to send bits to */
   void *sinkState;  /* Unknown object to send to sink for state */
   int numSyms;      /* Symbol count, also size of TrieNodes */
   int nextCode;     /* Next code to be assigned */
   int numBits;      /* Number of bits per code currently */
   uint nextInt;     /* Partially-assembled next int of output */
   int bitsUsed;     /* Number of valid bits in top portion of nextInt */
   TrieNode *curLoc; /* Current position in trie */
   short lastSym;    /* Most recent symbol encoded */
} LZWCmp;

/* Initialize a LZWCmp given the number of symbols and the CodeSink
 * to which to send completed codes; */
void LZWCmpInit(LZWCmp *cmp, int numSyms, CodeSink sink, void *sinkState);

/* Encode "sym" using LZWCmp. Zero or more calls of the code sink
 * may result */
 void LZWCmpEncode(LZWCmp *cmp, uchar sym);

/* Mark end of encoding (send next code value to code sink) */
void LZWCmpStop(LZWCmp *cmp);

/* Free all storage associated with LZWCmp (not the sinkState, though,
 * which is "owned" by the caller */
void LZWCmpDestruct(LZWCmp *cmp);

#endif 
```

至于我正在编译的对象，它是教授给我们的一个.o文件，其中包含LZWCmp.h文件中给出的四个函数。如果我们的 TestCmp.c 文件正常工作，那么我应该能够毫无问题地访问 LZCmp.o 文件中的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:36:10.620

好的..只需对您的代码进行少量修改，我就能够（链接和）编译您的代码..文件如下：

文件名：TestCmp.c

```
#include <stdlib.h>
#include <stdio.h>
#include <assert.h>
#include <limits.h>
#include "LZWCmp.h"
//#include "SmartAlloc.h"
#include "MyLib.h"

/*function pointer to the CodeSink function in TestCmp, which function simply prints  each 4-byte uint sent to it as 8 hex digits. It does so 8 integers per line, with one space between each pair of integers, and no space after the final integer, just an EOL.*/
void sink(void *pointer, uint code) {
    printf("%08X ", code);
}

int main(void) 
{
   int numCodes; /*Number of codes that compressor starts with understanding*/
   LZWCmp *cmp = malloc(sizeof(struct LZWCmp)); /*allocate memory for compressor state*/
   CodeSink ptr = sink; /*set sodesink pointer to sink function*/
   uchar letter; /*letter for intake and compression*/

   printf("Enter symbol count: ");
   scanf(" %d", &numCodes);
   while(letter != '\n') {
      letter = getchar();
   }

   LZWCmpInit(cmp, numCodes, ptr, NULL); /*Initialize compressor */

   while(letter < UCHAR_MAX) {
      letter = getchar(); 
      LZWCmpEncode(cmp, letter);     /*Send letter to encoder*/ /*FIRST FUNCTION TO NOT WORK*/
   }

   LZWCmpStop(cmp); /*Finish program when finding EOF character*/
   LZWCmpDestruct(cmp); /*Free memory space*/

    return 0;

} 
```

文件名：MyLib.h

```
#ifndef MYLIB_H
#define MYLIB_H

#define BITS_PER_BYTE 8

typedef unsigned char uchar;
typedef unsigned long ulong;
typedef unsigned int uint;
typedef unsigned short ushort;

#ifdef LITTLE_ENDIAN

#define UShortEndianXfer(val) ((val) >> 8 | (val) << 8}

#else

#define UShortEndianXfer(val) (val)

#endif

#endif 
```

文件名：LZWCmp.h

```
#ifndef LZW_H
#define LZW_H
#include <stdio.h>
#include "MyLib.h"

#define RECYCLE_CODE 4096  // Recycle dictionary rather than add this code

/* Function pointer to method to call when a code is completed and ready for
 * transmission or whatever.  The void * parameter can point to anything,
 * and gives hidden information to the function so that it can know what
 * file, socket, etc. the code is going to.  The uint is the next 32 bits
 * worth of compressed output. */
typedef void (*CodeSink)(void *, uint code);

/* One node in a trie representing the current dictionary.  Use symbols
 * to traverse the trie until reaching a point where the link for a
 * symbol is null.  Use the code for the prior link, and add a new code in
 * this case.  Each node has as many links and codes as there are symbols */
typedef struct TrieNode {
    ushort *codes;
    struct TrieNode **links;
} TrieNode;

/* Current state of the LZW compressor. */
typedef struct LZWCmp {
   TrieNode *head;   /* Head pointer to first TrieNode */
   CodeSink sink;   /* Code sink to send bits to */
   void *sinkState;  /* Unknown object to send to sink for state */
   int numSyms;      /* Symbol count, also size of TrieNodes */
   int nextCode;     /* Next code to be assigned */
   int numBits;      /* Number of bits per code currently */
   uint nextInt;     /* Partially-assembled next int of output */
   int bitsUsed;     /* Number of valid bits in top portion of nextInt */
   TrieNode *curLoc; /* Current position in trie */
   short lastSym;    /* Most recent symbol encoded */
} LZWCmp;

/* Initialize a LZWCmp given the number of symbols and the CodeSink
 * to which to send completed codes; */
void LZWCmpInit(LZWCmp *cmp, int numSyms, CodeSink sink, void *sinkState);

/* Encode "sym" using LZWCmp. Zero or more calls of the code sink
 * may result */
 void LZWCmpEncode(LZWCmp *cmp, uchar sym);

/* Mark end of encoding (send next code value to code sink) */
void LZWCmpStop(LZWCmp *cmp);

/* Free all storage associated with LZWCmp (not the sinkState, though,
 * which is "owned" by the caller */
void LZWCmpDestruct(LZWCmp *cmp);

#endif 
```

文件名：LZWCmp.c（这是我介绍的，将传递给 make 命令 - 见下文）

```
#include "LZWCmp.h"

void LZWCmpInit(LZWCmp *cmp, int numSyms, CodeSink sink, void *sinkState)
{
    printf("LZWCmpInit \n");
}

void LZWCmpEncode(LZWCmp *cmp, uchar sym)
{
    printf("LZWCmpEncode \n");   
}

void LZWCmpStop(LZWCmp *cmp)
{
    printf("LZWCmpStop \n");
}

void LZWCmpDestruct(LZWCmp *cmp)
{
    printf("LZWCmpDestruct \n");    
} 
```

制作命令：

```
gcc -Wall TestCmp.c LZWCmp.h MyLib.h LZWCmp.c 
```

希望这可以帮助！

# css - WP + Superfish：子菜单项在父页面上时应用了悬停/活动

> ID：10303517
> 
> 赞同：0
> 
> 时间：2012-04-24T18:06:34.450
> 
> 标签：css, wordpress, menu, drop-down-menu, superfish

网站：[http ://coqinn.lexcorp.ca/rooms-and-suites/](http://coqinn.lexcorp.ca/rooms-and-suites/)

将鼠标悬停在“房间和套房”菜单项上，您会明白我的意思，我需要让它停止这样做。如果适当的子菜单项显示哪个是活动的，这不是一个主要问题，但我希望主菜单项，即使它是父项，也能正确显示。

对不起，如果我对任何事情的解释很差，睡眠很少。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:10:48.457

确保应用于该菜单的类只有这些：

```
class="menu-item menu-item-type-post_type menu-item-object-page menu-item-36" 
```

# ubuntu - 更改主机名后无法 ping 自己

> ID：10303528
> 
> 赞同：1
> 
> 时间：2012-04-24T18:07:00.760
> 
> 标签：ubuntu

我已将主机名`etc/hostname`从`ubuntu`to更改为，`ubuntuclient`但现在我无法 ping 自己。结果我总是得到`unknown host: ubuntuclient.guf.by`。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:11:38.987

不要忘记更改`/etc/hosts`文件中的主机名。

[http://www.liberiangeek.net/2011/03/change-hostname-computer-name-ubuntu-11-04-natty/](http://www.liberiangeek.net/2011/03/change-hostname-computer-name-ubuntu-11-04-natty/)

# orm - Doctrine2 中的条件关联

> ID：10303531
> 
> 赞同：1
> 
> 时间：2012-04-24T18:07:04.723
> 
> 标签：orm, doctrine-orm, associations

我刚刚遇到了这个棘手的情况。我有一个名为 Gift 的实体。

现在礼物实体需要有一个名为的字段，该字段`receiver`可以与 2 个实体`RegisteredUser`实体或`Guest`实体相关联。

现在的问题是我如何定义接收者字段的关联！！

我想创建一个名为`GiftReceiver`使用继承映射的实体，但我无法将鉴别器映射到不扩展 GiftReceiver 的类。

我走错路了吗？有没有好的方法来实现这个？在此先感谢您的帮助！！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T09:29:34.760

`User`创建一个as的子类怎么样`Guest`，你可以将接收者字段映射到`User`实体。当您在 上获取接收者实体时`Gift`，学说将获取适当的对象`Guest`或`RegisteredUser`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T15:25:53.107

也许您可以将逻辑放入您的实体中，该实体返回 a`Guest`或 a `RegisteredUser`，两者都实现了名为 的相同接口`GiftReceiver`。

```
class Gift {

    // mapped to guest; nullabe true
    protected $guest;

    // mapped to registeredUser; nullabe true
    protected $registeredUser;

    public function getReceiver()
    {
        return $this->getGuest() ?: $this->getRegisteredUser();
    }

    // getters/setters ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T19:04:54.713

如何创建一个`GiftIntermediary`实体之类的东西。具有以下字段：

```
Receiver
RegisteredUser 
Guest 
```

然后应用以下关联：

```
Gift.Receiver = GiftIntermediary.Receiver
RegisteredUser.ID = GiftIntermediary.RegisteredUser 
Guest.ID = GiftIntermediary.Guest 
```

以下是从上述关联中收集数据的示例查询：

```
SELECT Gift.*, RegisteredUser.*, Guest.*
FROM Guest INNER JOIN (RegisteredUser INNER JOIN (Gift INNER JOIN GiftIntermediary ON Gift.Receiver = GiftIntermediary.Receiver) ON RegisteredUser.ID = GiftIntermediary.RegisteredUser) ON Guest.ID = GiftIntermediary.Guest 
```

# linux - mmap 和内存使用情况

> ID：10303534
> 
> 赞同：18
> 
> 时间：2012-04-24T18:07:11.237
> 
> 标签：linux, memory, memory-management, mmap

我正在编写一个程序，它从网络接收大量数据（大小不同），处理它们并将它们写入内存。由于某些数据可能非常大，我目前的方法是限制使用的缓冲区大小。如果一块大于最大缓冲区大小，我将数据写入临时文件，然后以块的形式读取文件以进行处理和永久存储。

我想知道这是否可以改进。我一直在阅读有关 mmap 的文章，但我不能百分百确定它是否可以帮助我。我的想法是使用 mmap 来读取临时文件。这有什么帮助吗？我担心的主要事情是偶尔的大块数据不应该填满我的主内存，导致其他所有内容都被换出。

另外，您认为使用临时文件的方法有用吗？我应该这样做，还是应该相信 linux 内存管理器为我完成这项工作？或者我应该完全做其他事情吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-25T02:14:55.743

Mmap 可以在某些方面为您提供帮助，我将通过一些假设示例进行解释：

第一件事：假设您的内存不足，并且您的应用程序拥有 100MB 的 malloc 内存块，其中 50% 被换出，这意味着操作系统必须将 50MB 写入交换文件，如果您需要读回它，你已经写入、占用然后再读回 50MB 的交换文件。

如果内存刚刚被映射，操作系统不会将该信息写入交换文件（因为它知道该数据与文件本身相同），相反，它只会刮掉 50MB 的信息（再次：假设你现在还没有写任何东西），就是这样。如果您需要再次读取该内存，操作系统将不会从交换文件中获取内容，而是从您映射的原始文件中获取内容，因此如果任何其他程序需要 50MB 的交换，它们是可用的。交换文件操作也没有任何开销。

假设你读取了一个 100MB 的数据块，根据最初的 1MB 头数据，你想要的信息位于偏移量 75MB，所以你不需要 1~74.9MB 之间的任何东西！您阅读它只是为了让您的代码更简单。使用 mmap，您将只读取您实际访问过的数据（四舍五入 4kb，或操作系统页面大小，大部分为 4kb），因此它只会读取第一个和第 75 个 MB。我认为很难找到一种比映射文件更简单有效的方法来避免磁盘读取。如果由于某种原因您需要偏移 37MB 的数据，您可以使用它！您不必再次对其进行 mmap，因为整个文件都可以在内存中访问（当然受您进程的内存空间的限制）。

所有mmap'ed的文件都是自己备份的，而不是swapfile，swapfile用于授予没有文件要备份的数据，通常是malloc'ed数据或由文件备份的数据, 但在程序通过 msync 调用实际告诉操作系统这样做之前，它已被更改并且 [不能/不应] 被写回它。

请注意，您不需要将整个文件映射到内存中，您可以从任何位置（第 6 个参数 - “off_t 偏移量”）开始映射任意数量（第二个参数是“size_t 长度”），但除非您的文件很可能要变得巨大，即使系统仅包含 64mb 的物理内存，您也可以安全地映射 1GB 的数据，但那是用于读取的，如果您打算写入，那么您应该更加保守，只映射您需要的东西.

映射文件将帮助您使您的代码更简单（您已经在内存中拥有文件内容，可以使用，由于它不是匿名内存，因此内存开销要少得多）并且更快（您将只读取程序访问的数据）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:48:09.010

使用大文件进行 mmap 的主要优点是在两个或多个文件之间共享相同的内存映射：如果您使用 mmap 进行映射`MAP_SHARED`，则对于将使用数据的所有进程，它将仅加载到内存中一次，并节省内存。

但是 AFAIK ， mmap 将整个文件映射到内存中（[在这里](https://stackoverflow.com/questions/7222164/mmap-an-entire-large-file)您可以找到 mmap 如何因文件大于物理内存 + 交换空间而失败的示例。）因此，如果您从单个进程访问该文件，它不会帮助您处理物理内存消耗。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T22:49:09.883

我相信 mmap 不需要所有数据同时在内存中 - 它使用页面缓存将最近使用的页面保存在内存中，其余的则保存在磁盘上。

如果您一次读取一个块，使用临时文件可能对您没有帮助，但如果您正在使用多个线程、进程或使用 select/poll 同时读取多个块，那么它可能会。

# mysql - IronWorker 无法连接到我的本地 mysql 数据库

> ID：10303540
> 
> 赞同：0
> 
> 时间：2012-04-24T18:07:22.717
> 
> 标签：mysql, ironworker

我打电话时它运行良好`run_local`，但我打电话时却不行`queue`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:42:50.647

您的 MySQL 数据库是否在您的机器上运行？如果您无法从 Internet 访问它，IronWorker 将无法连接到它。

您应该为您的机器获取一个静态 IP，或者按照我的建议，将您的数据库托管在为 Web 流量制作的服务器上。许多 ISP 不允许您在国内线路上运行 Web 服务器。

然而，除了本地网络之外，所有工作都`run_local`应该在`queue`. 如果有疑问，您可以查看我们的[环境文档](http://dev.iron.io/worker/reference/environment)。

# android - 如何将提要内容与缓存内容进行比较？

> ID：10303549
> 
> 赞同：0
> 
> 时间：2012-04-24T18:07:59.403
> 
> 标签：android, caching, rss, feed

我正在获取 Internet 提要的内容并将其存储到本地数据库中（缓存）。提要没有标签，它会告诉我其中的特定条目何时创建（无日期标签）。它只有标题、内容、网址和图片。

现在，我想这样做：如果提要上没有新内容，应用程序将在特定会话期间从缓存中加载。但是，如果我看到提要上有新内容，那么应用程序将从提要加载，并且所有后续加载（在一个会话期间）都将从缓存中删除。

在这种特定情况下，我如何检测提要上是否有新内容？我应该对缓存和远程提要的前 X 行进行字符串比较吗？还是有更好更合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:27:53.940

使用您的方法，您必须下载条目并将它们与存储在缓存中的数据进行比较。这几乎使缓存变得无用，因为您想要通过使用缓存机制来防止的事情之一是不必要的下载。

您确定没有可用于检查更改的标题字段吗？好的候选人是 Last-Modified、If-Modified-Since 和 If-Not-Modified。有关这些字段的更多详细信息，请参阅[Wikipedia 的标题字段列表。](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)

# inno-setup - 在 Inno Setup 中使用 {#emit SetupSetting("AppId")} 添加的额外字符

> ID：10303551
> 
> 赞同：4
> 
> 时间：2012-04-24T18:08:00.190
> 
> 标签：inno-setup

我在使用以下代码时遇到问题，它添加了一个额外的“{”。

例如：

```
[Setup]
AppID={{E643099E-1ECE-474F-B043-1E7A7CE405AA}

[Code]
const
  INSTALL_KEY = 'Software\Microsoft\Windows\CurrentVersion\Uninstall\{#emit SetupSetting("AppId")}_is1'; 
```

返回以下内容：

```
INSTALL_KEY = 'Software\Microsoft\Windows\CurrentVersion\Uninstall\{{E643099E-1ECE-474F-B043-1E7A7CE405AA}_is1'; 
```

这显然无法使用 RegKeyExists(HKLM, INSTALL_KEY) 检测该密钥，因为额外的“{”不在真实路径中，如果您删除 [Setup] 中的额外字符，脚本将无法编译，因为那时它认为这是一个常数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T14:37:28.453

用于`StringChange()`删除多余的`{`：

```
[Setup]
AppID={{E643099E-1ECE-474F-B043-1E7A7CE405AA}

[Code]
const INSTALL_KEY = '...\Uninstall\{#emit StringChange(SetupSetting("AppId"),"{{","{")}_is1'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:32:06.403

我认为解析器不允许使用由`{}`字符包围的自定义常量，因为它们被用作 的介绍器[`the constants`](http://www.jrsoftware.org/ishelp/index.php?topic=consts)，所以我认为你必须解决它。这是选项之一：

```
[Setup]
AppID=E643099E-1ECE-474F-B043-1E7A7CE405AA

[code]
const
  INSTALL_KEY = '...\Uninstall\{{#emit SetupSetting("AppId")}}_is1'; 
```

我的猜测是您描述的这种情况只是一个意外错误，因为编译器会提示您在常量的开头使用双括号，但是当您发出这样的常量时，您会得到相同的双括号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-02T21:21:38.650

该问题似乎在更高版本的 Inno Setup (5.5.5) 上得到解决。以下代码可以正常工作：

```
[Setup]

AppId={{********-****-****-****-********}
...

[code]

sAppId := ExpandConstant('{#emit SetupSetting("AppId")}_is1');
sUnInstPath := ExpandConstant('Software\Microsoft\Windows\CurrentVersion\Uninstall\') + sAppId; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-20T02:09:43.263

解决方案是使用[`ExpandConstant`](http://www.jrsoftware.org/ishelp/index.php?topic=isxfunc_expandconstant)其他人已经提到的功能。

```
[Setup]
AppId={{E643099E-1ECE-474F-B043-1E7A7CE405AA} 
```

```
[Code]
var
  INSTALL_KEY: String;

function InitializeSetup(): Boolean;
begin
  INSTALL_KEY := ExpandConstant('Software\Microsoft\Windows\CurrentVersion\Uninstall\{#SetupSetting("AppId")}_is1');
  MsgBox(INSTALL_KEY, mbInformation, MB_OK);
end; 
```

这是预期的行为，而不是错误。在`[Code]`部分中，[常量](http://www.jrsoftware.org/ishelp/index.php?topic=consts)和[脚本常量](http://www.jrsoftware.org/ishelp/index.php?topic=scriptconstants)不会扩展，同时[发出预处理器指令](http://www.jrsoftware.org/ispphelp/index.php?topic=emit) `{#emit ...}`/`{#...}`由 ISPP 替换为它们的值。所以需要使用 ExpandConstant 函数转换`{{`为`{`.

在这种情况下，您不能在使用函数时将其定义`INSTALL_KEY`为 Pascal 常量。`ExpandConstant`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-05T20:39:47.560

您还可以将您的应用程序 ID 定义为常量并像这样使用它：

```
#define MyAppID "{{E643099E-1ECE-474F-B043-1E7A7CE405AA}"

[Setup]
AppId={#MyAppID}

[Code]
const INSTALL_KEY = '...\Uninstall\' + ExpandConstant('{#MyAppID}') + '_is1'; 
```

# jquery - JQuery 触发器未按预期工作

> ID：10303552
> 
> 赞同：0
> 
> 时间：2012-04-24T18:08:09.637
> 
> 标签：jquery, asp.net, ajax, triggers, document-ready

我想`trigger` `button`在**document.ready()**上并在触发的按钮事件上执行 **ajax 调用**事件。

这就是我想说的：

```
<script type="text/javascript">
    $(document).ready(function () {
          $("#btnLoad").trigger("click");

    $("#btnLoad").click(function () {

         $.ajax({
         type: "POST",
         url: "Default.aspx/GetDetails",
         data: "{}",
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success: function (response) {
         }
        });//ajax

      });//btnClick

  });//JQuery 
```

现在我的问题是我无法触发该按钮。

如果我在 btn 触发器的位置发出正常警报，它工作正常。谁能指出错误是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:09:05.793

您的触发器在绑定之前被调用，在绑定点击处理程序之后移动触发器。

```
 $(document).ready(function () {    

    $("#btnLoad").click(function () {

         $.ajax({
         type: "POST",
         url: "Default.aspx/GetDetails",
         data: "{}",
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success: function (response) {
         }
        });//ajax

      }).click();//btnClick <-- Trigger click

  });//JQuery 
```

**注意：**我曾经`.click()`触发过点击处理程序。

# asp.net-mvc - 带有 ASP MVC .NET 的 OpenStreeMaps

> ID：10303553
> 
> 赞同：0
> 
> 时间：2012-04-24T18:08:12.350
> 
> 标签：asp.net-mvc, openstreetmap

我想使用 OpenStreeMaps 和 ASP MVC 开发一个项目。我一直在谷歌搜索，但没有找到任何示例，我找到了一个名为 thinkgeo 的图书馆，但我们付不起钱。有谁知道带有 ASP MVC 的 OpenStreetMaps 示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:11:17.790

不清楚您想使用 ASP.net 做什么。路由，对于 POI-s，搜索？如果要嵌入 OSM 地图并在其上显示一些地点或路线，请参阅 OpenLayers： [http ://www.openlayers.org/](http://www.openlayers.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-13T15:30:44.293

所有地图渲染的东西都发生在客户端（因此，就渲染地图而言，这其中的 ASP MVC 部分没有实际意义）——您需要为自己找到一个好的 javascript 地图客户端。我之前做过的一个是传单：

[LefletJS 快速入门指南](https://leafletjs.com/examples/quick-start/)

您将相关的 JS 添加到您的 ASP MVC 项目并设置 view.cshtml 以创建地图。除非控制器告诉地图在哪里渲染，否则 JS/HTML 应该是你所需要的。如果您尝试一下并遇到问题，请在上面的问题中详细说明。

# c++ - 线程更改变量值并查看其外部的更改

> ID：10303556
> 
> 赞同：0
> 
> 时间：2012-04-24T18:08:22.573
> 
> 标签：c++, multithreading

我创建了一个调用函数来更改变量值的线程，但是当它完成时，值不再更改。

它只是一个例子，它不是真正的代码。

```
THREAD1:
 if(size = socket.recv(data))deserializeData(data)

deserializeData(){
 //Deserialize the data (csv format) and then copy to command
 command = tmp;
}

Outside the thread
cout << command 
```

如果我调用它正确显示的命令，则在线程和 deserializeData 内部，但在外部执行 cout 时，它什么也没显示。

我看到了 volatile，但我尝试使用我的字符串变量，但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:42:34.247

如果`command`在多个线程之间共享，那么您需要一个 CriticalSection（或任何您喜欢的锁定机制）来保护对它的所有读/写访问。否则，`cout`可能会打印垃圾，什么都没有，格式化你的硬盘，谁知道呢，因为 THREAD1 可能同时写入`command`。

# vim - 将 F2 映射到 NEERDTreeToggle

> ID：10303557
> 
> 赞同：11
> 
> 时间：2012-04-24T18:08:24.930
> 
> 标签：vim, nerdtree

我只想打开和关闭 NERDTree，按下`F2`按钮。我以这种方式映射它：

```
map <silent>  <F2> NERDTreeToggle 
```

但是，实际上这不能正常工作，我不明白为什么......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-02T16:19:05.453

这是我对 NERDTree 的配置。

```
silent! nmap <C-p> :NERDTreeToggle<CR>
silent! map <F3> :NERDTreeFind<CR>

let g:NERDTreeMapActivateNode="<F3>"
let g:NERDTreeMapPreview="<F4>" 
```

`F3`将打开 NERDTree 面板并突出显示当前文件。当您在 NERDTree 面板中时，`F3`将在光标下打开文件。因此，我可以使用一个按钮在缓冲区和 NERDTree 之间跳转。（并且`F4`用于预览，因为它在旁边`F3`）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-25T21:23:32.363

你的映射：

`map <silent> <F2> NERDTreeToggle`

应该：

`map <F2> :NERDTreeToggle<CR>`

我想你会发现这会起作用（你基本上错过了冒号和`<CR>`使动作发生的...

# lucene - QueryParser 的邻近搜索语法是什么？

> ID：10303566
> 
> 赞同：0
> 
> 时间：2012-04-24T18:08:59.070
> 
> 标签：lucene, information-retrieval, query-parser

我一直在尝试使用**Lucene 3.6**实现邻近搜索。我去了`SpanNearQuery`几乎对我有用的伎俩，但我的老师说`QueryParser`可以以更好的方式做到这一点（它也会使用分析器过滤查询，不像`SpanNearQuery`）。谁能告诉我查询的语法？最近几个小时我一直在互联网上搜索。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:25:04.570

你看过[Lucene 查询语法文档](http://lucene.apache.org/core/3_6_0/queryparsersyntax.html#Proximity%20Searches)吗？

# c# - .NET 中支持一些舍入算法

> ID：10303568
> 
> 赞同：3
> 
> 时间：2012-04-24T18:09:01.390
> 
> 标签：c#, .net, math

我需要从我的 c# 应用程序中使用一些舍入算法：

*系统的*：

![在此处输入图像描述](../Images/fc21285ba6f500428392ccaf396121b3.png)

*随机*：

![在此处输入图像描述](../Images/f204996a0849166c170d7b9b129581d5.png)

和*控制*：

![在此处输入图像描述](../Images/593a2f732b32467e069d73994f5d959e.png)

.NET Framework 是否为此算法提供数学支持（也许有任何可用于 c# 的免费库）或者我需要自己实现这些函数？如果我实现它们，如何检查算法的正确性，以确保它们是正确的？有没有人有它的示例输入和输出数据？是否有任何免费应用程序可以将我的样本输入计算结果与 进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:14:30.717

也许[这些](http://www.pennedobjects.com/2010/05/adventures-in-net-rounding-part-1-the-mystery-of-math-round/)文章可以作为一个起点？

1.  [.NET 舍入冒险第 1 部分：Math.Round 的奥秘](http://www.pennedobjects.com/2010/05/adventures-in-net-rounding-part-1-the-mystery-of-math-round/)
2.  [.NET 舍入冒险第 2 部分：奇异舍入算法](http://www.pennedobjects.com/2010/06/adventures-in-net-rounding-part-2-exotic-rounding-algorithms/)
3.  [.NET 舍入冒险第 3 部分：舍入实践](http://www.pennedobjects.com/2010/06/adventures-in-net-rounding-part-3-rounding-in-action/)

# php - 是否可以使数据库像克隆一样？

> ID：10303571
> 
> 赞同：1
> 
> 时间：2012-04-24T18:09:14.910
> 
> 标签：php, mysql, database, iis-7, joomla

我有一个数据库（让我们称之为`A`）

我需要将信息放在多个数据库中（B、C、D 需要完全相同的信息）

我可以做一些每（X）小时自动更新一次的东西吗？

#

我需要这个才能使用 IIS 7 / php 同步 2 个 joomla 组件。

尝试过（第一次效果很好，但是如果更改了一个，它就会出错，因为此组件中没有 Primary）：

#

获取我的数据

```
$mysqli = @new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_WORLD);

/* Vérification de la connexion */
if (mysqli_connect_errno()) {
    die("&error=".mysqli_connect_error()."&");
    exit();
}

$query = "  SELECT  table_name
            FROM    information_schema.tables
            WHERE   table_name LIKE '%XXXXXXX%'";

$arrTableList   = array();
$allInArray     = array();
if ($result = $mysqli->query($query)) {

    /* Récupère un tableau d'objets */
    while ($obj = $result->fetch_object()) {
        $arrTableList[] = $obj->table_name;
    }

    /* free result set */
    $result->close();
}

foreach($arrTableList as $key => $value){

    $query = "  SELECT  *
                FROM    $value";

    if ($result = $mysqli->query($query)) {

        /* Récupère un tableau d'objets */
        while ($row = $result->fetch_array(MYSQLI_ASSOC)) {
            $allInArray[$value][] = $row;
        }

        /* free result set */
        $result->close();
    }

} 
```

插入函数

```
function toSwich($newDb, $tmpTag){
    global $mysqli;
    global $allInArray;
    global $tag1;

    $mysqli->select_db($newDb);

    foreach($allInArray as $table => $tableArrayData){

        $table  =   str_replace ($tag1, $tmpTag, $table);
        foreach($tableArrayData as $uselessKey => $valueArray){
            $keyList    = "";
            $valueList  = "";
            $query = "SELECT COUNT(*) FROM $table WHERE ";
            foreach($valueArray as $key => $value){
                $key        =    $mysqli->real_escape_string($key);
                $value      =    $mysqli->real_escape_string($value);

                $keyList    .=  $key . ",";
                $valueList  .=  "'" . $value . "',";

                $query      .=  " $key = '$value' AND";
            }

            $query      =   substr($query,0,-3);
            $valueList  =   substr($valueList,0,-1);
            $keyList    =   substr($keyList,0,-1);

            if(!$result = $mysqli->query($query)){
                print_r($mysqli->error);
                echo "<br />";
                print_r($query);
                echo "<br />";
                exit();

            }
            $row = $result->fetch_row();
            if((int)$row[0] == 0){
                if(!$mysqli->real_query("INSERT INTO $table ($keyList) VALUES ($valueList)")){
                    print_r($mysqli->error);
                    exit();
                }
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:36:14.263

配置主从复制模式，我会保持数据库不断同步

这是一个如何配置复制的示例：[在 Mysql 中配置主从复制的 3 个跳转步骤](http://www.webdeveloperjuice.com/2010/02/15/3-jump-steps-to-configure-master-slave-replication-in-mysql/)

# google-drive-api - 使用google drive备份和同步appdata？

> ID：10303576
> 
> 赞同：3
> 
> 时间：2012-04-24T18:09:40.477
> 
> 标签：google-drive-api

gDrive 能否用于备份特定于应用程序的数据文件，即传统上不面向用户的游戏保存状态？这会允许跨设备迁移吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T18:33:53.263

是的，这是可能的。云端硬盘应用可以创建具有任意 MIME 类型的文件。因此，可以通过从多个位置/设备下载文件来实现同步。

# java - 如何偏移在画布上绘制的位图？

> ID：10303578
> 
> 赞同：-1
> 
> 时间：2012-04-24T18:09:43.350
> 
> 标签：java, android

这是我在画布上绘制 BitmapMesh 以及圆圈​​的代码。

```
canvas.drawBitmapMesh(GirlBitmap, WIDTH, HEIGHT, matrixVertsMoved, 0,  null, 0, null); // need to offset this by "addOffset"

canvas.drawCircle(pointX+addOffset, pointY, bubbleSize, p3); 
```

两者都必须通过**addOffset**偏移 x 。圆圈很好，但我不知道如何使位图偏移？

有任何想法吗？也许我应该把它画在一个单独的画布上，然后在旧画布上画一个偏移量？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T18:11:39.833

你不能只是`translate`by`Canvas`吗`(addOffset, 0)`？像这样：

```
final int saveCount = canvas.save();
try {
    canvas.translate(addOffset, 0);

    canvas.drawBitmapMesh(GirlBitmap, WIDTH, HEIGHT, matrixVertsMoved, 0,  null, 0, null); 
    canvas.drawCircle(pointX, pointY, bubbleSize, p3);
} finally {
    canvas.restoreToCount(saveCount);
} 
```

# wcf - 在 WCF 方法中使用 ThreadPool.QueueUserWorkItem

> ID：10303582
> 
> 赞同：1
> 
> 时间：2012-04-24T18:09:49.360
> 
> 标签：wcf, threadpool, queueuserworkitem

我需要在 WCF 方法中运行大约需要 25-30 秒的后台逻辑，该方法的完成时间不会超过 1 秒。我决定在退出 Web 方法之前将该逻辑包装到 WaitCallback 中并将其传递给 ThreadPool.QueueUserWorkItem。最初它工作正常，但现在我有了第二个想法，因为我怀疑有时 QueueUserWorkItem 方法不会及时返回，因为结果 Web 方法不会在 1 秒内定期响应。在 WCF 方法中使用 QueueUserWorkItem 是否有任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:24:49.340

不，不是这样，但您的问题涉及一个更普遍的问题，如何处理长时间运行的服务调用？您可以：

1.  更改配置以使客户端和服务器能够容忍长时间的服务调用，即增加超时
2.  或者，使用开始/获取当前进度/获取最终结果 API 设计您的服务调用，所有这些都快速返回：

    ```
    int jobID = serviceProxy.StartJob();
    float progress = serviceProxy.GetJobProgress(int jobID);
    Result finalResult = serviceProxy.GetJobResult(int jobID); 
    ```

这是更多的工作，但更好的设计，您现在还必须维护一个正在运行的作业列表（您可以使用的异步处理`QueueUserWorkItem`或其他），但所有服务调用都会很快返回。

# jquery-ui - jQuery datepicker 不像宣传的那样工作

> ID：10303583
> 
> 赞同：3
> 
> 时间：2012-04-24T18:09:55.380
> 
> 标签：jquery-ui, jquery-ui-datepicker

问题：日期选择器根本没有出现。控制台中没有错误。所有文件都包含在内，并可通过 Firebug 访问。

在花了太多时间试图让 jQuery UI 日期选择器工作之后，包括阅读几十个谷歌结果，我需要你的帮助。即使是最简单、简单、直接的 datepicker 实现也不适合我。

我正在测试的当前示例（只剩下日期选择器）：

```
<html>
<head>
<meta charset="UTF-8">
<title>DatePicker Test</title>

<!-- JavaScript -->
<script type="text/javascript" src="../js/jquery/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="../js/jquery/jquery-ui-1.8.19.custom.min.js"></script>
<!--script type="text/javascript" src="../js/jquery/jquery.ui.datepicker.js"></script-->

<!-- Stylesheets -->
<link rel="stylesheet" href="../css/ui-lightness/jquery-ui-1.8.19.custom.css" />

<script type="text/javascript">
$(function() {
    $( "#datepicker" ).datepicker();
});
</script>
</head>

<body>
<div><input type="text" id="datepicker" class="hasDatepicker" /></div>
</body>
</html> 
```

这不起作用。我已经下载了整个 jQuery UI 代码 ( `jquery-ui-1.8.19.custom.min.js`) 并尝试了一切。我什至尝试在 jQuery UI 附带的演示 HTML 页面中添加一个简单的 datepicker 字段。没有。

然后我下载了 jQuery UI 的开发人员包，并尝试了`datepicker.js`使用 jQuery，但即使这样也失败了。

因此，尽管我没有收到任何错误，并且我可以在代码中看到我的选择器，并通过从控制台调用它，但我只是一无所获。

然后我尝试了许多已在多个论坛帖子中发布的 CSS 修改，将我的 JavaScript 从顶部移到底部，在 datepicker 之后。. . 和各种突变，但没有任何效果。

那是我吗？

当然，其他人可以使用datepicker插件，我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T18:23:56.923

嘿，所以我调查了你的问题。我建议删除输入中对我有帮助的类声明。还要确保您的脚本链接正确。您当前要求他们从当前页面之前的文件夹中提取。如果页面和 css/js 文件夹在同一个目录下，可以去掉前面的“../”。

```
<input type="text" id="datepicker" /> 
```

FireFox 中一个有用的附加组件是[Web Developer 工具](http://chrispederick.com/work/web-developer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:23:39.393

[在这里](http://jsfiddle.net/RMu3p/)查看这个 js fiddle以获得一个工作示例。这与您正在做的减去输入字段上的类非常相似，并且在这种情况下，示例使用的是 CDN。

您一定有什么问题（可能没有获取脚本或 CSS）。

# python - 如何重新输入预先存在的 django 应用程序

> ID：10303584
> 
> 赞同：-1
> 
> 时间：2012-04-24T18:10:02.987
> 
> 标签：python, django, virtualenv

[我最近在 Stack Overflow](https://stackoverflow.com/questions/10066681/django-installation-first-time#comment12885400_10066681)的帮助下使用 virtualenv 设置了一个 Django 应用程序。现在我关闭了终端并尝试再次进入，但相同的命令没有运行。

如何重新进入我的应用程序？我在 Ubuntu 11.10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:03:08.180

正如评论中提到的[AdamKG](https://stackoverflow.com/questions/10303584/how-to-reenter-a-pre-existing-django-app#comment13260375_10303584) -

> 这取决于您关注的文档，但您可能正在寻找来源
> 
> ```
> ~/path/to/virtualenv/bin/activate 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-13T17:32:37.817

如果您希望激活现有的 virtualenv：在您的终端中，导航到您的 django 项目文件夹，然后键入

`pipenv shell`

Venv 现在应该处于活动状态。

# mdx - 在 MDX 查询结果中显示两个选定的维度？

> ID：10303585
> 
> 赞同：0
> 
> 时间：2012-04-24T18:10:03.893
> 
> 标签：mdx, dimensions

如何获取下面的 MDX 查询以在客户旁边显示日期？目前它只显示客户，或者我在非空呼叫中首先创建的任何维度。我希望两者都显示在结果中。

```
SELECT  {[Measures].[Count1], [Measures].[Count2], 
  [Measures].[Count3]} ON COLUMNS,                               
nonempty({[Customers]}, {[DateRange]}) ON Rows                 
FROM Cube 
```

我尝试了交叉连接，但返回了内存不足错误。

谢谢！

我得到这个： **客户 | 计数1 | 计数2 | 计数3 |**

我想看到这个： **客户 | 日期 | 计数1 | 计数2 | 计数3 |**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:46:37.443

通常，度量作为 NONEMPTY 的第二个参数

```
SELECT  {[Measures].[Count1], [Measures].[Count2], 
[Measures].[Count3]} ON COLUMNS,                               
nonempty(({[Customers]}, {[DateRange]}),{[Measures].[Count1], [Measures].[Count2], 
[Measures].[Count3]}) ON Rows                 
FROM Cube 
```

我将所有三个度量作为`NonEmpty`函数集的一部分。这将返回任何行至少有三个计数之一不为空的数据。它只过滤掉所有三个计数都为空的行。

# java - 静态类实例变量的释放

> ID：10303587
> 
> 赞同：0
> 
> 时间：2012-04-24T18:10:24.030
> 
> 标签：java, tomcat, web-applications, memcached, spymemcached

这将是我的第一个问题，所以如果我没有完成问题或遗漏了什么，请告诉我。

背景：嗯，我有一个基于 Java 的 Web 服务，它正在为 iPhone 应用程序提供服务。它与数据库有连接，为了提高性能，我使用 Memcached 实现了缓存。我使用的连接器是 spymemcached。

我的问题：我有一个与 memcached 服务器同步连接的静态类。我的参考是：[http ://sacharya.com/using-memcached-with-java/](http://sacharya.com/using-memcached-with-java/)

但是当我重新启动 memcached 服务器或在 tomcat 上部署另一个 jar 时，我收到此错误： **Web 应用程序似乎已经启动了一个线程名称 [某个名称]，但未能停止它。这很可能造成内存泄漏。**

那么，如何在我可以在 tomcat 上重新启动或重新部署我的应用程序之前解除分配静态类？

- 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:20:32.667

静态类不是问题。假设它位于 WEB-INF/lib 的 JAR 中，它将被卸载。问题是线程。无论启动该线程需要停止它。有关 Tomcat 内存泄漏预防和检测的更多详细信息，请参阅此演示文稿：http: [//people.apache.org/~markt/presentations/2010-11-04-Memory-Leaks-60mins.pdf](http://people.apache.org/~markt/presentations/2010-11-04-Memory-Leaks-60mins.pdf)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-24T18:24:00.793

该页面实现了 MyCache 类的单例模式。单例不能被销毁。

也许您可以定义一个 ServletContextListener（或应用服务器中的类似侦听器）来手动停止线程。

# objective-c - Facebook IOS SDK：检测用户何时拒绝 publish_stream 权限

> ID：10303588
> 
> 赞同：0
> 
> 时间：2012-04-24T18:10:26.100
> 
> 标签：objective-c, ios, facebook

我有一个应用程序使用 facebook 连接来获取基本的用户信息并在用户新闻提要上发布。

基本上我正在使用此代码来获取权限

```
 if ( ! [facebook isSessionValid]) {
        NSArray *permissions = [[NSArray alloc] initWithObjects:
                                @"user_about_me", 
                                @"email",
                                @"publish_stream",
                                nil];
        [facebook authorize:permissions];
    } 
```

它工作得很好，但如果用户不允许“扩展权限”（publish_stream），我想避免询问用户是否想在他的新闻提要上发帖。

那么有什么方法可以知道用户是否不允许通过 FB SDK 获得 publish_stream 权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:35:52.160

我找到了一个解决方案，我发布它，因为它可能对某人有用。

因此，我发现了解用户是否允许应用程序在他的新闻提要上发布的最佳方法是通过图形请求加载他的权限并解析结果。

```
[facebook requestWithGraphPath:@"me/permissions" andDelegate:self]; 
```

# python - Python：如何管理其他程序？

> ID：10303596
> 
> 赞同：2
> 
> 时间：2012-04-24T18:11:06.070
> 
> 标签：python, user-interface, process

是否有允许我使用 python 管理其他程序的模块（例如检查光标在屏幕上的位置并将其移动到其他位置）？如果它确实存在，请给我它的名字，我会从它的文档字符串中找到更多关于它的信息。谢谢你的回答：P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:15:11.143

您最好的选择可能是子流程，但这取决于这些“其他程序”的功能

[http://docs.python.org/library/subprocess.html](http://docs.python.org/library/subprocess.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:17:21.983

**编辑：**

可能你想要这个：[PyGame](http://www.pygame.org/docs/ref/mouse.html)。

* * *

无论如何，如果你需要调用任何函数，这条线索是成立的。

要在 python 中调用另一个程序，您可以执行以下操作：

> `>>>`从子流程导入 *
> 
> `>>>`调用（[命令，参数]）

例子：

> `>>>`从子流程导入 *
> 
> `>>>`呼叫（[“回声”，“嗨”]）。

所以如果你想返回一些函数，比如鼠标位置，你可以从 python 调用它。

[相关问题](https://stackoverflow.com/questions/10290157/simple-call-function-in-python-how-to-fix-the-return)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T18:29:43.333

在 Python 中控制光标是特定于操作系统的。在 Windows 中，您需要使用 win32api 库，而在 Linux 中，您必须使用 Xlib。有一个名为[PyMouse](https://github.com/pepijndevos/PyMouse/)的跨平台库，您可能想查看它。

# c# - 如何将此 Xceed XAML 转换为 C#

> ID：10303599
> 
> 赞同：0
> 
> 时间：2012-04-24T18:11:08.977
> 
> 标签：c#, xaml, xceed

我正在尝试在 C# 中动态构建列，但我不确定如何将其转换为 C#

```
<xcdg:Column FieldName="Name" 
             Title="Name"
             DisplayMemberBinding="{Binding}"
             CellContentTemplate="{StaticResource InputManagerNameCellTemplate}"
             AllowAutoFilter="False"/> 
```

我知道如何转换所有这些但 DisplayMemberBinding 部分。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:36:14.450

试试这个：

```
new Binding()
{
    Path = new PropertyPath(FrameworkElement.DataContextProperty),
    RelativeSource = new RelativeSource(RelativeSourceMode.Self)
} 
```

XAML 中的空绑定是绑定到同一元素上的 DataContext 的快捷方式。

# bash - 如何将行连接成一个字符串

> ID：10303600
> 
> 赞同：10
> 
> 时间：2012-04-24T18:11:10.607
> 
> 标签：bash, shell

我在 bash 中有一个函数，可以将一堆行输出到标准输出。我想将它们组合成一行，它们之间有一些分隔符。

前：

```
one 
two 
three 
```

后：

```
one:two:three 
```

有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-24T18:22:11.357

采用[`paste`](http://ss64.com/bash/paste.html)

```
$ echo -e 'one\ntwo\nthree' | paste -s -d':'
one:two:three 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-26T19:27:47.133

另一种方式：

```
cat file | tr -s "\n" ":" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-24T18:21:18.220

这可能对您有用：

```
paste -sd':' file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T18:18:47.177

逐字记录@glennJackman 的更正

```
awk '{printf("%s%s", sep, $0); sep=":"} END {print ""}' file 
```

或者如您指定的 bash

```
while read line ; do printf "%s:" $line ; done < file | sed s'/:$//' 
```

我希望这有帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T18:52:19.027

为了好玩，这是一种仅限 bash 的方式：

```
echo $'one\n2 and 3\nfour' | { mapfile -t lines; IFS=:; echo "${lines[*]}"; } 
```

输出

```
one:2 and 3:four 
```

分组`{}`是为了确保所有引用数组变量的命令都在同一个子shell中执行。一旦管道结束，该变量将不存在。

[http://www.gnu.org/software/bash/manual/bashref.html#index-mapfile-140](http://www.gnu.org/software/bash/manual/bashref.html#index-mapfile-140)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T05:28:58.583

输入.txt

> ```
> one
> two
> three 
> ```

Perl 解决方案：dummy.pl

```
 @a = `cat /home/Input.txt`;
    foreach my $x (@a)
    {
            chomp($x);
            push(@array,"$x");
    }
    chomp(@array);
    print "@array"; 
```

将脚本运行为：

> $> perl 虚拟.pl | sed 's/ /:/g' > 输出.txt

输出.txt

> 一二三

# java - 作为字符串返回的 URL 在 JSF 中无效

> ID：10303601
> 
> 赞同：1
> 
> 时间：2012-04-24T18:11:11.787
> 
> 标签：java, string, jsf-2, icefaces

我正在尝试将 google api 用作文本转语音。因此，我构建了一个字符串，然后将其作为 URL 传递给组件，以获取带有口语单词的 MP3。所以，这是我的代码：

```
URI uri = new URI("http://translate.google.com/translate_tts?tl=es&q="+ URLEncoder.encode((String)this.text.getValue(), "UTF-8")); 
```

当我让它`uri.toString()`返回一个格式良好的 URL 时。如果我将此输出复制并粘贴到浏览器中，则效果很好。但是，如果我将此返回的字符串分配给 ice 的源属性：outputMedia 不起作用。然后检查页面中生成的 HTML，src 属性中的字符串为：

```
http://translate.google.com/translate_tts?tl=es&amp;q=Bobby+need+peanuts 
```

& 符号已替换为`&amp;`。

如何避免这种情况以创建有效的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:41:13.153

您需要使用 Javascript 在客户端[解码url。](http://www.w3schools.com/jsref/jsref_decodeuri.asp)

```
var decoded = decodeURI(URI) 
```

# php - 组合与继承依赖注入

> ID：10303604
> 
> 赞同：3
> 
> 时间：2012-04-24T18:11:19.987
> 
> 标签：php, language-agnostic

我有一个解析器，它包含三类对象：解析器本身、`Token`s 和`State`s。Parser 从词法分析器生成标记。一切都是黑盒的，因此令牌对解析器状态或解析器一无所知，而状态对令牌一无所知。一个相当简单的安排版本：

```
class Parser {
   public function parse() {
      $this->state = new StEmpty;
      while ($token = $this->lexer->get()) {
         $this->state = $this->token->expect($this);
      }
   }
   public function stateStart() {
      return $this->state->stateStart();
   }
}
class StartToken {
   public function expect(Parser $parser) {
      return $parser->stateStart();
   }
}
class StEmpty {
   public function stateStart() {
      return new StStart;
   }
} 
```

我遇到的问题是，有时当状态发生变化时，解析器需要采取一些行动（例如在到达结束规则标记时向树中添加规则）。只有那些`State`知道这一点，所以由状态来告诉解析器该做什么。问题是`Parser`获取`State`. `Parser`我可以在状态构造函数中注入，但不是每个人都`State`需要解析器，这会导致很多重复的代码（除非我有`State`s 的基类并且 the`Parser`是受保护的成员，但我想避免扩展任何东西）。我也可以在需要它`Parser`的`state`方法中注入，但我有一个类似的问题：这将是很多重复，而不是所有的`State`实现将需要给定方法的解析器。

所以我的问题是如何在没有不必要的继承或代码重复的情况下`State`知道`Parser`何时需要？如果我需要另一个完全可以接受的课程。

* * *

如果这很难理解，这里有一个“未解开”的版本：

```
class Parser {
   public function parse() {
      $this->state = 'StEmpty';

      while ($token = $this->lexer->get()) {
         switch ($token) {
            case 'StartToken':
               switch ($this->state) {
                  case 'StEmpty':
                     $this->state = 'StStart';
                     break;
               }
               break;
         }
      }
   }
} 
```

这个问题的答案也适用于其他语言，但我知道这在允许重载的语言中更容易做到。PHP 没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:38:22.503

PHP 5.4 引入了特征： http: [//php.net/manual/en/language.oop5.traits.php](http://php.net/manual/en/language.oop5.traits.php)

也许您可以使用特征作为继承和注入之间的中间点。

# html - 如何从移动站点启动常驻 vid 播放器

> ID：10303605
> 
> 赞同：0
> 
> 时间：2012-04-24T18:11:23.090
> 
> 标签：html, mobile, jquery-mobile, html5-video

我试图从移动网站上的 url 启动手机中的常驻 vid 播放器并且很难做到这一点有很多复杂性

1) 视频在亚马逊云端 2) 它们经过签名和流式传输 3) 我想编写一个代码库并让它适用于 iOS 和 android

所以我得到了签名和流媒体位在普通桌面站点上工作并使用 flowplayer

为了保持使用 html5/jquery mobile 的一个代码库理念

那么将为两个平台启动 vid 播放器的 html5 是什么？

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:54:08.953

结帐 jw 播放器[http://www.longtailvideo.com](http://www.longtailvideo.com)

# jquery - HTML 导入错误

> ID：10303607
> 
> 赞同：1
> 
> 时间：2012-04-24T18:11:27.510
> 
> 标签：jquery, html

我是 Jquery 的新手并试图学习它，我有以下代码，但由于某种原因我的图像没有加载。当我通过我的运行命令运行相同的链接时，图像会弹出。当我通过 firebug 进行调试时，它说无法加载给定的 URL

```
<!DOCTYPE html>
<html><head>
    <title>Furry Friends Campaign</title>
     <link rel="stylesheet" type="text/css" href="c:/jquery/Chapter-1/begin/styles/my_style.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
  </head>
  <body>
    <div id="clickMe">Show Me the Furry Friend of the Day</div>
    <div id="picframe">
     <img src="c:/jquery/chapter-1/begin/images/img_0229.jpg">
   </div>
   <script src="scripts/jquery-1.6.2.min.js"></script>
    <script>
      $(document).ready(function(){
        $("#clickMe").click(function() {
        $("img").fadeIn(1000);
        $("#picframe").slideToggle("slow");
   });
      });
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:13:22.913

您不应该引用计算机的根目录 ( `c:/`)，而是主机的根目录。

```
<img src="/jquery/chapter-1/begin/images/img_0229.jpg"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:13:40.200

Web URL 不使用驱动器号：

`<img src="c:/jquery/chapter-1/begin/images/img_0229.jpg">`<--这是错误的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:14:14.287

尝试“file://c:/jquery/chapter-1/begin/images/img_0229.jpg”作为您的图像 URL，而不是简单的“c:/...”。

[http://en.wikipedia.org/wiki/File_URI_scheme#Windows_2](http://en.wikipedia.org/wiki/File_URI_scheme#Windows_2)

# gwt - 无法为 Eclipse Indigo 安装谷歌插件

> ID：10303611
> 
> 赞同：1
> 
> 时间：2012-04-24T18:11:33.617
> 
> 标签：gwt, eclipse-plugin

我正在设置 eclipse indigo 来开发 gwt 应用程序。但是当我在 Eclipse 中添加更新站点[http://dl.google.com/eclipse/plugin/3.7](http://dl.google.com/eclipse/plugin/3.7)时收到错误消息时，我无法继续。它向我显示“找不到[http://dl.google.com/eclipse/plugin/3.7](http://dl.google.com/eclipse/plugin/3.7) ”。我的错误被捕获，可以在[http://i.stack.imgur.com/4mgAr.png](http://i.stack.imgur.com/4mgAr.png)看到。

我不知道出了什么问题。我只是按照[https://developers.google.com/eclipse/docs/install-eclipse-3.7](https://developers.google.com/eclipse/docs/install-eclipse-3.7)上的说明进行操作。

我知道我可以从[https://developers.google.com/eclipse/docs/install-from-zip](https://developers.google.com/eclipse/docs/install-from-zip)单独下载插件。但是我没有下载权限。

我正在使用 ubuntu 11.10 32bit 和 jdk 1.6.0_23。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:31:43.623

请检查您的 Eclipse 首选项的代理条目。（窗口 -> 首选项 -> 常规 -> 网络连接）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T06:34:09.937

我在安装 GWT 插件时也面临同样的问题。我已删除代理并尝试安装插件。为此，我已将笔记本电脑从网络连接中移除并从其他设备（数据卡）访问互联网并尝试...是的，安装成功。

您可以对 INDIGO 使用相同的[链接](http://dl.google.com/eclipse/plugin/3.7)。

# sencha-touch - 无法在 sencha touch 2 中显示列表视图

> ID：10303614
> 
> 赞同：1
> 
> 时间：2012-04-24T18:11:40.077
> 
> 标签：sencha-touch

我开始玩 sencha touch 2 并遇到以下问题。我正在尝试构建一个非常简单的应用程序，它有一个列表视图和一个带有按钮的选项卡：

我看到带有按钮和漂亮标题的标签面板；但列表视图拒绝显示；我试过添加“布局：适合”，但更糟。

我在这里缺少什么“明显”的东西？

主.js：

```
Ext.define('CurrencyFX.view.Main', {
extend: 'Ext.Panel',

requires: [
    'CurrencyFX.view.Home',
    'CurrencyFX.view.CurrencyList',
],

config: {

    items: [
        { xtype: 'homecard' },
        { xtype: 'currencycard' },      
    ]
}
}); 
```

主页.js：

```
Ext.define('CurrencyFX.view.Home', {
extend: 'Ext.Panel',
requires: ['Ext.TitleBar'],
xtype: 'homecard',

config: {
    items: [{
        docked: 'top',
        xtype: 'titlebar',
        title: 'Currency FX',
        items: [
            {
                text:    'Refresh',
                align:   'right',
                action:  'reloadQuotes'
            }
        ]
    }
    ]
}
}); 
```

CurrencyList.js：

```
Ext.define('CurrencyFX.view.CurrencyList', {
    extend: 'Ext.List',
    requires: ['CurrencyFX.store.Currencies'],

    xtype: 'currencycard',
    config: {
        itemTpl: '{name} is at {value}',
        store: 'Currencies',
    }
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:05:18.183

您可以在货币卡上添加高度吗？这提供了一个快速检查：

```
   项目： [
            { xtype: 'homecard'},
            { xtype：'货币卡'，高度：500 }
        ]

```

这是一个将填满屏幕的布局（请注意，我已将停靠：'top' 移至此处！！）：

```
Ext.define('CurrencyFX.view.Main', {
    扩展：'Ext.Panel'，

    要求：[
        'CurrencyFX.view.Home',
        'CurrencyFX.view.CurrencyList'
    ],

    配置：{
        全屏：是的，
        布局：'适合'，
        项目： [
            {
                xtype：'家庭卡'，
                停靠：'顶部'
            },
            { xtype: '货币卡'}
        ]
    }
});

```

# java - onActivityResult() 中的代码未执行

> ID：10303616
> 
> 赞同：0
> 
> 时间：2012-04-24T18:11:55.217
> 
> 标签：java, android

我有一个 android 应用程序，我想在全新安装后打开一个不同的活动，然后是我的主要活动。

我使用 startActivityForResult() 和 SharedPreferences 进行了尝试。这是我的代码：

主要活动：

公共类 ONTTMainActivity 扩展 Activity {

静态最终 int REQUEST_CODE = 5;

```
@Override    
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    SharedPreferences settings = getSharedPreferences("prefs", 0);
    boolean firstRun = settings.getBoolean("firstRun", true);

    if(firstRun){

        startActivityForResult(
            new Intent(this, ONTTSplashActivity.class), REQUEST_CODE);
    }

    setContentView(R.layout.activitymain);

} 
```

第二个活动：

公共类 ONTTSplashActivity 扩展活动 {

@Override
public void onCreate(Bundle savedInstanceState) {

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.activityonttsplash);

    final Button btnSkip = (Button) findViewById(R.id.button_skip);
    btnSkip.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {

            setResult(RESULT_OK);
            finish();       
         }
     });
}

public void onActivityResult(int requestCode, int resultCode, Intent data) {

    Toast.makeText(ONTTSplashActivity.this, "Toast Reached", Toast.LENGTH_LONG).show();

    if (resultCode == RESULT_OK) {
            SharedPreferences settings = getSharedPreferences("ONTT_prefs", 0);
            SharedPreferences.Editor editor = settings.edit();
            editor.putBoolean("firstRun", false);
            editor.commit();
    }
} 
```

问题是即使第二个活动结束，onActivityResult 函数中的代码也永远不会执行。我尝试使用吐司来查看是否已达到。

我见过几个类似的问题，但我已经尝试了所有解决方案，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:13:44.827

您开始`ONTTSplashActivity`从`ONTTMainActivity`ONTTSplashActivity 到 ONTTMainActivity 获取结果，所以放入`onActivityResult`第一个`ONTTMainActivity` 活动：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {

    Toast.makeText(ONTTMainActivity .this, "Toast Reached", Toast.LENGTH_LONG).show();

    if (resultCode == RESULT_OK) {
            SharedPreferences settings = getSharedPreferences("ONTT_prefs", 0);
            SharedPreferences.Editor editor = settings.edit();
            editor.putBoolean("firstRun", false);
            editor.commit();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:15:04.180

OnActivityResult() 必须在您的第一个活动中，而不是在第二个活动中。因为只有从第一个活动开始，您才调用 startActivityForResukts()，所以您的第一个活动期望第二个活动的结果。

# camera - 在 camera.takePicture 后未显示图像审查

> ID：10303618
> 
> 赞同：5
> 
> 时间：2012-04-24T18:11:57.643
> 
> 标签：camera, android

在我尝试过的所有手机上，包括具有 API 2.3.7 和 4.0 的 Galaxy Nexus，在 takePicture 方法被称为表面视图更改为所拍摄的图像后，即“图像审查”。

我已经在这些平板设备上进行了测试，但没有显示图像审查： XOOM API 3.1 Galaxy Tab 10.1 API 3.1 Galaxy Tab 10.1 API 3.2

```
surfaceView = (SurfaceView)findViewById(R.id.surfaceView);

surfaceHolder = surfaceView.getHolder();
surfaceHolder.addCallback(this);
surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

...

    public void takePicture() {
        cam.takePicture(this, null, this); //Shuttercallback, RawCallback, JpegCallback
    }

...

    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {       
    // Stop preview before changing camera parameters
    if(isPreviewRunning) {
        this.cam.stopPreview();
    }

    Camera.Parameters p = this.cam.getParameters();
    LogUtils.info("CheckCapture", "Preview Size: " + String.valueOf(width) +"x" + String.valueOf(height));
    p.setPreviewSize(width, height);

    //Set picture size to a multiple of previewSize to maintain aspect ratio AND minimum capture width
    //LogUtils.info("CheckCapture", "Picture Size: " + String.valueOf(width*factor) +"x" + String.valueOf(height*factor));
    p.setPictureSize(width, height);
    p.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO);

    //Set picture format (we can check device capabilities, but all devices at API level 8 should support JPEG)
    p.setPictureFormat(PixelFormat.JPEG);

    //Set new camera parameters
    try {
        this.cam.setParameters(p);
    }catch (Exception e) {
        e.printStackTrace();
    }

    //Setup preview display on our surfaceViewHolder
    try {
        this.cam.setPreviewDisplay(surfaceHolder);
    } catch (IOException e) {
        e.printStackTrace();
    }

    //Start preview
    this.cam.startPreview();
    this.isPreviewRunning = true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T19:18:58.597

在 btn_click.onclickListener 上使用回调方法如下

```
_btn_click.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
            ShutterCallback shutterCallBack = new ShutterCallback() {
                @Override
                public void onShutter() {}
            };

            PictureCallback pictureCallBack = new PictureCallback() {
                @Override
                public void onPictureTaken(byte[] data, Camera camera) {}
            };

            PictureCallback pictureCallBackJPG = new PictureCallback() {
                @Override
                public void onPictureTaken(byte[] data, Camera camera) {

                    Bitmap capturedBitmap = BitmapFactory.decodeByteArray(data, 0, data.length);

                }
            };
            setFlashMode();
            camera.takePicture(shutterCallBack, pictureCallBack,
                    pictureCallBackJPG);
            showProgressDialog("Bitte warten", CameraCaptureActivity.this);
        }
    }); 
```

在这段代码中，主线是

位图 captureBitmap = BitmapFactory.decodeByteArray(data, 0, data.length);

在 imageview.setImageBitmap(capturedBitmap) 中使用 captureBitmap；显示图像。

快乐编码

# intellij-idea - IntelliJ 的 Osmorc 插件可以创建带有时间戳的 Bundle 版本号吗？

> ID：10303620
> 
> 赞同：1
> 
> 时间：2012-04-24T18:12:06.973
> 
> 标签：intellij-idea, osgi

我正在使用 IntelliJ 中的 osmorc 插件来构建 OSGI 模块。这允许我定义一个捆绑版本。例如，我希望捆绑版本包含每个构建的时间戳`1.0.1.201204241456`。

osmorc 可以支持吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:12:04.523

我认为该插件在幕后使用 bnd，那么您应该可以使用 1.0.1.${tstamp}

您可以格式化打印输出，请参阅[http://www.aqute.biz/Bnd/Macros](http://www.aqute.biz/Bnd/Macros)

但是，我不是 100% 确定它（仍然）在幕后使用 bnd

# php - Facebook 应用中自定义订阅操作的最佳实践？

> ID：10303621
> 
> 赞同：1
> 
> 时间：2012-04-24T18:12:11.253
> 
> 标签：php, facebook, subscribe

我想实现一个 facebook 应用程序，我有几个作者，可以发布更新（文本 + 图像 - 类似于一个非常简单的博客）。实际的 facebook 用户可以在应用程序内浏览作者并阅读他们的条目。

我现在想为 facebook 用户提供订阅一位（或多位）作者的可能性。

我目前只看到两种可能的解决方案：

1.  存储想要订阅订阅源的用户的 Facebook ID，并在作者发布新条目后立即向每个订阅用户发送大量墙更新。
2.  使用 Facebook 提供的新订阅功能。

To 1.: 这闻起来像垃圾邮件。

To 2.：似乎是一种更理智的方式，但我找不到任何自定义订阅源的文档。这可能吗？

请记住，订阅完整的应用程序是不够的，因为每个作者都应该有自己的提要。

# java - 将getter/setter转换为单行的Eclipse格式化程序？

> ID：10303625
> 
> 赞同：21
> 
> 时间：2012-04-24T18:12:21.987
> 
> 标签：java, eclipse

使用自动格式化时，如何告诉（如果有的话）Eclipse 为 getter 或 setter 制作一行？

```
public User getUser() {
   return user;
} 
```

到：

```
public User getUser() { return user; } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T18:40:05.400

如果您不喜欢 Java 强制您编写的所有样板，您可能会对[Project Lombok](http://projectlombok.org/)作为替代解决方案感兴趣。

Project Lombok 不是试图格式化代码以最小化 getter 和 setter 的视觉影响，而是允许编译器在后台添加它们，并由类字段上的注释引导。

而不是像这样写一个类：

```
 public class GetterSetterExample {
   private int age = 10;
   private String name;

   public int getAge() {
     return age;
   }

   public void setAge(int age) {
     this.age = age;
   }

   protected void setName(String name) {
     this.name = name;
   }
 } 
```

你会写：

```
 import lombok.AccessLevel;
 import lombok.Getter;
 import lombok.Setter;

 public class GetterSetterExample {
   @Getter @Setter private int age = 10;
   @Setter(AccessLevel.PROTECTED) private String name;
 } 
```

（示例来自：[http](http://projectlombok.org/features/GetterSetter.html) ://projectlombok.org/features/GetterSetter.html ）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T18:24:26.817

Eclipse 中的 Java 代码格式不区分 getter/setter 和类中的任何其他方法。所以这不能通过内置的 eclipse 格式来完成。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-20T19:17:15.243

正如其他海报所说，Eclipse 目前无法做到这一点。[但是，在https://bugs.eclipse.org/bugs/show_bug.cgi?id=205973](https://bugs.eclipse.org/bugs/show_bug.cgi?id=205973)有一个功能请求，如果它得到足够的支持，那么有人可能会实现它......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-10T17:39:20.403

如何使用格式化程序开/关标签：

```
//@formatter:off
@override public final String getName() {return this.name;}
//@formatter:on 
```

您需要确保启用/关闭标签（preferences/java/code style/formatter/edit/on off 标签）。这可能是默认设置。

对于一种方法，它与三行 getter 方法一样难看，但如果你有四个或五个以上，那么它看起来会更整洁。它还允许您将属性的 getter 和 setter 组合在一起，而不是先将所有 getter 分组，然后再将所有 setter 分组。

无论如何，这是我的解决方案。

# actionscript-3 - AS3 获取音频电平、音调和其他数据？

> ID：10303628
> 
> 赞同：1
> 
> 时间：2012-04-24T18:12:27.463
> 
> 标签：actionscript-3, audio, audio-recording

使用 actionscript 可以获得哪些音频数据？是否可以获得音调或电平，以及有关音频文件的其他哪些数据？

因此，如果我从 mp3 或录音中获取音频，我想立即获取有关该音频的信息，也许是尖峰和峰值，以便我可以将该音频与另一段音频进行比较，看看它是否匹配。它可能类似于语音识别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:32:30.527

使用 as3 和 sound as ByteArray，几乎可以做任何事情。您可能会遇到的问题是必须自己做很多低级的事情，或者不得不依赖某人的库。

您可以尝试[tonfall](http://code.google.com/p/tonfall/) - 功能强大，但文档不多。

只要您不做复杂的事情，而只是进行电平检测，hype 框架[示例](http://www.hypeframework.org/02_examples/soundanalyzer/content/05_soundanalyzer/)中的 soundanalyzer 类就是一个很好的起点

# winforms - 使用 GDI+ 显示像素数据

> ID：10303629
> 
> 赞同：0
> 
> 时间：2012-04-24T18:12:34.710
> 
> 标签：winforms, graphics, gdi+, 3d

我正在编写一个简单的 3D 渲染引擎。
我的 3D 处理的最终结果是像素数据。接下来我需要用 GDI+ 在屏幕上显示它。
我正在使用 WinForms 和 Visual Basic。我直接在表单的 ClientRectangle 上绘图。

我有一些疑问。
在我处理一个像素之后，我应该先将像素数据写入缓冲区，而不是将每个像素单独发送到 GDI+？
- 如果是这样，我应该一次缓冲多少屏幕？全屏，半屏，四分之一，八分之一？我认为这里可能存在 RAM 使用/性能权衡。
- 像素缓冲区的最佳数据结构是什么？
- 我使用哪个 GDI+ 命令来渲染像素缓冲区（或单个像素）？是否可以避免创建位图作为中间步骤并将像素数据直接发送到屏幕？

我预计的最大屏幕尺寸为 1600x1200。RAM 可能低至 1GB。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:32:58.740

希望你能在这里找到一些答案

1.  首先将数据写入 RGBA 结构的缓冲区。例如，如果您想渲染多个“层”然后再合成这些层，这将变得很容易。如果您想在某个时候执行任何延迟处理，它也将变得容易。完整（平铺？）渲染完成后，您可以将其刷新到输出位图/文件。
2.  这取决于您允许用户渲染的分辨率。如果要渲染千兆像素图像，则需要以合理的大小平铺它。我建议瓷砖大小是可配置的，然后您可以在测试后将其设置为合理的默认值。
3.  如果您不希望执行任何延迟着色，我建议您从一个简单的 RGBA 缓冲区开始。
4.  如果您不执行可以放入内存的平铺渲染/渲染图像，您可以简单地使用[Bitmap.LockBits](http://msdn.microsoft.com/en-us/library/5ey6h79d.aspx)并以这种方式写入数据。如果您使用平铺渲染，您将需要找到一个允许您一次渲染扫描线的库（并将其设为“平铺”）或修复您想要编写 TGA、PNG 和查找/写入的文件格式直接进入文件。将图像转储为 RAW 文件，然后使用命令行工具进行转换也是另一种选择。

希望这可以帮助！

# string - 在matlab中检查非ASCII字符

> ID：10303634
> 
> 赞同：1
> 
> 时间：2012-04-24T18:13:20.253
> 
> 标签：string, matlab, non-ascii-characters

我有一个有时包含非 ascii 值的结果字符串。这些非 ascii 值会造成麻烦，因此我需要检查它们是否存在于结果字符串中。

我试过这两种方法

```
if (regexpi(result , ^\s\x{20}-\x{7e}))
display('non ascii');
end 
```

和

```
if any(result  < 128)
else
display('non ascii');
end 
```

但它没有用。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:37:44.450

对上述内容的小调整：

```
if all(result  < 128)
else
display('non ascii');
end 
```

或者

```
if any(result  > 127)
display('non ascii');
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-08T13:54:29.330

`regexprep`可用于查找和删除非 ascii 字符。例如：

```
out = regexprep(result, '[^0-9a-zA-Z.\s]+', '') 
```

请参阅@amro 在[Remove non ASCII characters in octave中的评论](https://stackoverflow.com/questions/36355697/remove-non-ascii-characters-in-octave)

# css - 站点网络栏 - 显示当前站点统计信息，CSS？

> ID：10303636
> 
> 赞同：0
> 
> 时间：2012-04-24T18:13:23.873
> 
> 标签：css

目前我正在玩一个小项目，设计的一个方面是一个“网络栏”，它将显示在页面的最顶部，并将包含指向站点网络下的各个站点的链接。

但是，我想加入的一项功能是以某种方式显示活动站点的能力。

例如： 网络栏显示： SiteA SiteB SiteC SiteD SiteE 您当前在： SiteC 整个站点的结果： 在 SiteC 中，网络栏中的 SiteC 的样式不同，以显示状态变化。而 SiteA、B、D 和 E 的样式都相同，以表明它们不是活动站点。

这完全可以通过 CSS 实现，还是需要 jQuery 或其他 JavaScript 片段？

欢迎任何和所有帮助。老实说，我什至不知道如何进一步搜索……这需要一些时间。

再见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:19:38.780

这很简单。只需使用关联的 CSS 声明向活动链接添加一个类：

```
 <a href="..." class="active">My site</a>
   <a href="...">Other site</a> 
```

CSS：

```
a.active {
    font-weight:bold;
} 
```

或者：

...使用 ID：

```
<a href="..." id="active">My site</a>
<a href="...">Other site</a>

a#active {
    font-weight:bold;
} 
```

# sql - SQL SELECT 子表中没有行的外键行

> ID：10303638
> 
> 赞同：2
> 
> 时间：2012-04-24T18:13:28.220
> 
> 标签：sql, select, inner-join

即使没有从 ALLOCATION 表中的任何行调用它们，我也需要以下代码来显示 AUTHOR 表中的行。目前，该代码显示所有具有适当外键数据的 ALLOCATION 行。我需要它来显示 AUTHOR 表中的所有行，即使它们没有相应的 ALLOCATION 行。

```
SELECT authid,sname,fname,B.bid
FROM ALLOCATION A
INNER JOIN BOOK B
ON A.bid = B.bid
INNER JOIN AUTHOR U
ON A.authid = U.authid
ORDER BY authid; 
```

即 AUTHOR 表中的某些行是 ALLOCATION 表中 0 行的外键。我需要它们也出现在 SELECT 中。authid、sname 和 fname 是 AUTHOR 表的列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:16:49.753

你想使用一种叫做[外连接](http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join)的东西。

而不是`INNER`, 说`LEFT OUTER`或`RIGHT OUTER`, 取决于方向。

这样做是如果另一个表中没有相应的记录，则用 null 填充列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T18:17:13.670

```
select authid,
    sname,
    fname,
    B.bid
from AUTHOR U
left outer join ALLOCATION A on A.authid = U.authid
left outer join BOOK B on A.bid = B.bid
order by authid 
```

# android - 未找到 adb 命令

> ID：10303639
> 
> 赞同：226
> 
> 时间：2012-04-24T18:13:35.933
> 
> 标签：android, macos, terminal, adb

我需要先运行一个`adb forward`命令，然后才能使用*ezkeyboard*应用程序，该应用程序允许用户使用浏览器在手机上打字。

当我运行`adb forward tcp:8080 tcp:8080`命令时，我收到`adb command not found`错误消息。

我可以`android`从终端运行命令。为什么`adb`不工作？

* * *

## 回答 #1

> 赞同：313
> 
> 时间：2015-06-01T13:31:28.797

> **在我的情况下，Android Studio 1.1.0 路径是这样的**

`/Users/<username>/Library/Android/sdk/platform-tools`

**将以下内容添加到`~/.bash_profile`**

```
export PATH=~/Library/Android/sdk/tools:$PATH
export PATH=~/Library/Android/sdk/platform-tools:$PATH 
```

* * *

## 回答 #2

> 赞同：165
> 
> 时间：2017-07-12T16:26:05.927

adb 安装了吗？要检查，请在终端中运行以下命令：

```
~/Library/Android/sdk/platform-tools/adb 
```

如果打印输出，请跳过以下安装步骤并直接转到我列出的最终终端命令：

1.  启动 Android Studio
2.  通过 Tools -> Android -> SDK Manager 启动 SDK Manager
3.  检查 Android SDK Platform-Tools

在 Mac 上运行以下命令并重新启动终端会话：

```
echo export "PATH=~/Library/Android/sdk/platform-tools:$PATH" >> ~/.bash_profile 
```

注意：如果你已经切换到 zsh，上面的命令应该使用`.zshenv`而不是`.bash_profile`

* * *

## 回答 #3

> 赞同：123
> 
> 时间：2012-04-24T18:16:35.287

确保`adb`在您用户的**$PATH**变量中。

**或者**

您可以尝试找到它`whereis`并运行它`./adb`

* * *

## 回答 #4

> 赞同：86
> 
> 时间：2015-12-07T08:37:57.610

我正在使用 Mac 10.11.1 并使用 android studio 1.5，我有我的 adb "/Users/user-name/Library/Android/sdk/platform-tools"

现在编辑你的 bash_profile

```
emacs ~/.bash_profile 
```

将此行添加到您的 bash_profile，并将用户名替换为您的用户名

```
export PATH="$PATH:/Users/user-name/Library/Android/sdk/platform-tools" 
```

保存并关闭。运行此命令以重新加载您的 bash_profile

```
source ~/.bash_profile 
```

* * *

## 回答 #5

> 赞同：68
> 
> 时间：2012-11-19T19:10:12.917

从文件 android-sdks/tools/adb_has_moved.txt：

> adb 工具已移至 platform-tools/
> 
> 如果您在 SDK 中没有看到此目录，请启动 SDK 和 AVD Manager（执行 android 工具）并安装“Android SDK Platform-tools”
> 
> 还请更新您的 PATH 环境变量以包含 platform-tools/ 目录，以便您可以从任何位置执行 adb。

所以在 UNIX 上做类似的事情：

`export PATH=$PATH:~/android-sdks/platform-tools`

* * *

## 回答 #6

> 赞同：51
> 
> 时间：2018-10-03T09:01:56.697

这是最简单的方法，将提供自动更新。

1.  安装[自制软件](https://brew.sh/)

    ```
     /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)" 
    ```

2.  安装亚行

    ```
     brew install --cask android-platform-tools 
    ```

3.  开始使用 adb

    ```
     adb devices 
    ```

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2019-08-06T05:22:04.283

在终端中键入以下命令：

> 纳米 .bash_profile

并添加以下行（将 USERNAME 替换为您自己的用户名）。

```
export ANDROID_HOME=/Users/USERNAME/Library/Android/sdk 
export PATH=${PATH}:${ANDROID_HOME}/tools 
export PATH=${PATH}:${ANDROID_HOME}/platform-tools 
```

关闭文本编辑器，然后输入以下命令：

> 源 .bash_profile

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2018-04-25T08:13:07.583

如果您不想编辑`PATH`变量，请转到安装`platform-tools`目录，`SDK`命令就在那里。

你可以像这样使用它：

1.  转到您放置的目录`SDK`：

    `cd /Users/mansour/Library/Developer/Android/sdk/platform-tools`

2.  键入`adb`命令以`./`从当前目录使用它。

    `./adb tcpip 5555`

    `./adb devices`

    `./adb connect 192.168.XXX.XXX`

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2018-03-28T11:55:07.930

Mac 用户只需`/Users/(USERNAME)/.bash_profile`在编辑器中打开此文件。
并添加此行以添加路径。

```
export PATH="/Users/myuser/Library/Android/sdk/platform-tools":$PATH 
```

如果您通过工作室安装 adb，这是默认路径。并且不要忘记更改此行中的用户名。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2021-02-24T16:35:48.093

对于具有 zshrc 文件的 mac 用户（没有 bash 配置文件）。

1.  转到您的用户文件夹，然后点击 cmd + fn + shift + "。" （在 Mac 笔记本电脑键盘上！）

2.  隐藏文件可见，使用文本编辑器打开 .zhrc 文件

3.  粘贴这一行，不要忘记更改大括号之间的用户名：

```
export PATH="$PATH:/Users/{username}/Library/Android/sdk/platform-tools" 
```

您可以保存并关闭 .zhrc

4.  打开终端并使用以下命令重新加载文件：

```
source ~/.zshrc 
```

现在你可以使用 adb 命令行了！

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2019-07-12T18:57:40.683

就我而言，我在`platform-tools`目录中，但以错误的方式使用命令：

```
adb install 
```

而不是正确的方法：

```
./adb install 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2013-10-08T02:39:31.943

在我的 Mac (OS X 10.8.5) 上，我在这里有 adb：

```
~/Library/android-sdk-mac_86/platform-tools 
```

所以，编辑`$PATH`你的`.bash_profile`和`source`它。

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2020-12-25T12:55:26.107

考虑到您已经下载了 SDK 平台工具。这些命令适用于 MAC 用户。

此命令将在本地设置 ADB。因此，如果您关闭终端并再次打开它，ADB 命令将无法工作，直到您再次运行此命令。

```
export PATH=~/Library/Android/sdk/platform-tools:$PATH 
```

这些命令将全局设置 ADB。因此，一旦您运行这些命令，下次就无需再次设置它们。

```
echo 'export PATH=$PATH:~/Library/Android/sdk/platform-tools/' >> ~/.bash_profile

source ~/.bash_profile 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2019-01-23T08:29:28.497

***+ 原因是：***您在错误的目录中（意味着它不包含 adb 执行程序）。

***+解决方案是（逐步）：***

**1) 查找 adb 的安装位置**。取决于您使用的操作系统。

Mac，它可能在：“ `~/Library/Android/sdk/platform-tools`”

或者

窗口，它可能在：“ `%USERPROFILE%\AppData\Local\Android\sdk\platform-tools\`”。

但是，如果您不记得这么长的目录，您可以通过命令“ `find`”快速找到它。在你的终端/命令行中试试这个，“ `find / -name "platform-tools" 2> /dev/null`”（注意：我还没有在 Window 中测试，但它肯定适用于 Mac）。

*解释查找命令，

*   请注意“/”字符前有一个空格 --> 仅在用户目录中查找，而不是在所有计算机中查找。
*   " `2> /dev/null`" --> 忽略权限拒绝的查找结果。试试没有这个代码的那个，你就会明白我的意思。

**2) 转到我们安装 adb 的位置。**很多人提到的3种方式：

*   通过以下方式更改 PATH 全局参数（我不会推荐）：“ `export PATH=~/Library/Android/sdk/platform-tools`”这是您从上面获得的目录。注意，这个命令不会打印任何结果，如果你想确保你改变了 PATH 成功，调用 " `export | grep PATH`" 来查看 PATH 是什么。

*   通过以下方式为 PATH 全局参数（我推荐）添加更多定义：“ `export PATH=~/Library/Android/sdk/platform-tools:$PATH`”或“ `export PATH=$PATH:~/Library/Android/sdk/platform-tools`”

*   `cd ~/Library/Android/sdk/platform-tools`通过“ ”转到我们上面找到的路径

**3）使用亚行：**

*   如果您更改或更新 PATH，只需调用任何 adb 函数，因为您将 PATH 添加为全局参数。（例如：“ `adb devices`”）

*   如果您通过命令进入 PATH `cd`，请使用前缀“”调用 adb 函数`./`（例如：“ `./ adb devices`”）

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2021-08-23T10:28:38.723

需要先安装`adb`，新命令（2021年）是：

`brew install --cask android-platform-tools`

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2021-06-29T08:16:22.210

如果您使用的是 mac，请尝试以下命令。

> 源 $HOME/.bash_profile

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2018-11-06T03:14:46.350

我通过安装**adb**包解决了这个问题。我正在使用**Ubuntu**。

```
sudo apt install adb 
```

我想这会对你有所帮助。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2013-05-01T20:38:17.380

为避免每次启动终端时重写 $PATH 变量，请编辑主目录 ( **~/ ) 下的****.bash_profile**（对于 Mac，它只是**.profile** ）文件，并将导出语句放在文件中的某个位置。

 **现在每次启动终端时，您的 $PATH 变量都会正确更新。要在修改配置文件后立即更新终端环境，请输入：

```
source ~/.profile 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2018-07-26T18:37:14.603

就我而言，我在终端中添加了以下行：

导出 PATH="/Users/用户名/库/Android/sdk/platform-tools":$PATH

确保将“用户名”替换为您的用户名。

点击回车，然后输入“adb”以查看错误是否消失。如果是，这就是您应该看到的：Android Debug Bridge 版本 1.0.40

...后面是一堆命令..并以此结尾： $ADB_TRACE 逗号分隔的调试信息列表以记录：all,adb,sockets,packets,rwx,usb,sync,sysdeps,transport,jdwp $ADB_VENDOR_KEYS 冒号- 分隔键列表（文件或目录） $ANDROID_SERIAL 序列号连接到（见 -s） $ANDROID_LOG_TAGS 由 logcat 使用的标签（见 logcat --help）

如果你明白了，再次运行 npm run android 它应该可以工作..

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2017-08-03T14:25:08.613

```
nano /home/user/.bashrc  
export ANDROID_HOME=/psth/to/android/sdk  
export PATH=$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools 
```

但是，这不适用于 su/sudo。如果您需要设置系统范围的变量，您可能需要考虑将它们添加到 /etc/profile、/etc/bash.bashrc 或 /etc/environment。

IE：

```
nano /etc/bash.bashrc  
export ANDROID_HOME=/psth/to/android/sdk  
export PATH=$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-04-30T08:46:20.950

您必须将 adb 命令移动到 /bin/ 文件夹

就我而言：

```
sudo su
mv /root/Android/Sdk/platform-tools/adb /bin/ 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2018-10-13T09:00:20.410

如果文件夹中没有 adb，`android-sdk-macosx/platform-tools/`则应先安装平台工具。从 Android SDK 管理器运行`android-sdk-macosx/tools/android`和[安装平台工具。](https://i.stack.imgur.com/OzvWz.png)

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2018-03-20T21:57:34.050

无法找到 ADB #SOLVED 只需下载 Sdk 平台工具。*[https://developer.android.com/studio/releases/platform-tools.html](https://developer.android.com/studio/releases/platform-tools.html)* 提取下载的文件。转到 Android Studio 中的 Sdk Manager 并复制链接。转到文件资源管理器并粘贴您复制的 Sdk 的路径以查看 Sdk 文件。您会注意到缺少 adb 文件，打开下载的文件（平台工具）复制内容并替换您的 Sdk 工具文件中的所有内容（您注意到 adb 丢失的文件）并保存。你已准备好出发。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2018-04-30T10:35:07.823

在我的情况下，这是解决这个问题

1.  确保您已安装 android SDK。通常SDK的位置在这个位置

    */用户/您的用户/库/Android/sdk*

2.  之后**cd**到那个目录。

3.  进入该目录后，键入此命令 *./platform-tools/adb install your-location-of apk*

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2021-07-19T11:07:18.200

*   确保您已安装 adb
*   要安装它，您可以运行“sudo apt install adb”。
*   您还可以尝试撤销设备上的任何 USB 授权，并尝试在启用 USB 调试的情况下进行连接。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-06-03T05:02:09.153

如果您使用的是***fish***：
`fish_add_path /Users/<name>/Library/Android/sdk/platform-tools/`
或者您可以将相同的内容添加到`~/.config/fish/config.fish`
可能需要重新启动shell**

# jquery - 使用 Jquery 在导航菜单中突出显示父链接

> ID：10303645
> 
> 赞同：4
> 
> 时间：2012-04-24T18:13:57.333
> 
> 标签：jquery, navigation

我正在使用以下 Jquery 在导航中突出显示当前页面的链接。

```
// Add Active Class To Current Link
var url = window.location; // get current URL
$('#nav a[href="'+url+'"]').addClass('active'); 
```

我的导航如下所示：

```
<nav>
  <ul id="nav">
    <li><a href="">Home</a></li>
    <li><a href="">About Us<b class="caret"></b></a>
      <ul>
        <li><a href="">Sub Link 1</a></li>
        <li><a href="">Sub Link 2</a></li>
        <li><a href="">Sub Link 3</a></li>
      </ul>
    </li>
    <li><a href="">Products</a></li>
    <li><a href="">Contact</a></li>
  </ul>
</nav> 
```

导航具有“关于我们”部分的子导航。

我想让“关于我们”链接接收“活动”类，以便当我在其子导航页面之一时它保持突出显示。

因此，例如，如果我在“子链接 2”页面上，则“关于我们”链接会被赋予一个活动类。

谁能在这里指出我正确的方向？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T18:23:01.523

试试下面的代码，

```
// Add Active Class To Current Link
var url = window.location; // get current URL
$('#nav a[href="'+url+'"]').addClass('active');

var $activeUL = $('.active').closest('ul');
/*
Revise below condition that tests if .active is a submenu
*/
if($activeUL.attr('id') != 'nav') { //check if it is submenu
    $activeUL
        .parent() //This should return the li
        .children('a') //The childrens are <a> and <ul>
        .addClass('active'); //add class active to the a    
} 
```

# asp.net-mvc - ASP.NET MVC 3 自定义 MembershipProvider 和 MembershipUser

> ID：10303647
> 
> 赞同：0
> 
> 时间：2012-04-24T18:14:07.790
> 
> 标签：asp.net-mvc, entity-framework, membership-provider

我在 ASP.NET MVC 3 上使用 EF 模型和自定义用户表（主要用于教育）做我的小项目。我阅读了教程，我知道我必须从 MembershipProvider 继承来制作我的自定义。我在这个项目中没有任何角色。我只想通过电子邮件和密码（自定义密码哈希等）进行简单的身份验证，没有额外的功能。在默认 MembershipProvider 中，所有授权都是通过用户名进行的。但在我的项目中，它通过电子邮件发送，用户名用于其他目的。问题：

1.  如何交换电子邮件和用户名？
2.  如果我将使用 [Authorize] 属性，我是否必须使用 RoleProvider 并且 MembershipProvider 类中是否有任何必需的成员来实现使用该属性？
3.  也许根本不继承也不使用 MembershipProvider？只需使用我自己的 Repository 类进行授权和身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:32:51.610

1.  只需将他们的电子邮件地址放在用户名字段中即可。
2.  不，您不需要 RoleProvider。
3.  您可以实施任何您想要的身份验证，但除非您有特定的理由不这样做，否则您应该坚持使用 Membership。

# javascript - Google Maps Geo 给出 JSONP 错误 Unexpected token : or invalid label

> ID：10303651
> 
> 赞同：1
> 
> 时间：2012-04-24T18:14:21.153
> 
> 标签：javascript, jquery, google-maps

我们正在尝试根据纬度获取用户的信息。

我们的代码一直运行良好，直到几周前我们开始收到此错误。

这是我们的代码：

```
var reverse_geo_url = "http://maps.google.com/maps/geo?q=" + lat + "," + lng + "&key=[key]&sensor=false"
console.log("Calling " + reverse_geo_url);
new $.ajax(reverse_geo_url, {
    dataType: "jsonp",
    timeout: 5000,
    success: function (data) {
         // yay
    }
}); 
```

问题是我们突然之间

```
Uncaught SyntaxError: Unexpected token : 
```

这是来自 Google 服务器的示例响应（当我直接访问 url 时）

```
{
  "name": "33.0024912,-88.4218782",
  "Status": {
    "code": 200,
    "request": "geocode"
  },
  "Placemark": [ {
    "id": "p1",
    "address": "Paulette Rd, Macon, MS 39341, USA",
    "AddressDetails": {
   "Accuracy" : 6,
   "Country" : {
      "AdministrativeArea" : {
         "AdministrativeAreaName" : "MS",
         "Locality" : {
            "LocalityName" : "Macon",
            "PostalCode" : {
               "PostalCodeNumber" : "39341"
            },
            "Thoroughfare" : {
               "ThoroughfareName" : "Paulette Rd"
            }
         }
      },
      "CountryName" : "USA",
      "CountryNameCode" : "US"
   }
},
    "ExtendedData": {
      "LatLonBox": {
        "north": 32.9994289,
        "south": 32.9891822,
        "east": -88.4094885,
        "west": -88.4393238
      }
    },
    "Point": {
      "coordinates": [ -88.4238788, 32.9952338, 0 ]
    }
  } ]
} 
```

[https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingResponses](https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingResponses)

> 访问地理编码服务是异步的，因为 Google Maps API 需要调用外部服务器。因此，您需要传递一个回调方法以在请求完成时执行。此回调方法处理结果。请注意，地理编码器可能会返回多个结果。

根据文档，应该支持回调。JQuery 添加了那个回调头，所以我不明白为什么谷歌不尊重它。

*编辑：作为参考，我的应用程序尝试调用的网址是 http://maps.google.com/maps/geo?q=33.8024912,-84.4218782&key=[my key here]&sensor=false&callback=jQuery16409036452900618315_1335293866369&_=1335293866469 是这是谷歌方面的事情吗？还是我们这边有什么？同样，这段代码曾经完美地工作过。

我在 StackOverFlow 上看到的其他帖子，人们说当这个错误出现时意味着服务器不支持 JSONP ......让我感到困惑的是，这曾经可以工作......谷歌是否改变了他们的 API ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T21:15:52.207

出于好奇，您为什么要进行 ajax 调用来进行地理编码？您可以直接更简单地使用 Google Maps API：[https ://developers.google.com/maps/documentation/javascript/geocoding](https://developers.google.com/maps/documentation/javascript/geocoding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:54:47.957

通读文档，您似乎不需要再注册即可使用此 api，

我成功地使用了这个：

```
var url = string.Format("http://maps.google.com/maps/geo?q={0}&output=xml", encodedPostCode); 
```

希望这可以帮助

# vb.net - vb.net 控制台应用程序崩溃

> ID：10303652
> 
> 赞同：2
> 
> 时间：2012-04-24T18:14:21.777
> 
> 标签：vb.net, console-application

我在 vb.net 中创建了一个非常简单的控制台应用程序，它每天通过电子邮件向我发送来自 db 的一些信息。everythign 在我的开发环境中工作，但是当我将它移到生产环境并尝试运行可执行文件时，我收到以下错误消息：“问题导致程序停止正常工作。请关闭程序”

我在代码中进行了一些异常检查：

```
Dim output As String
        Try
            output = FormatIndividualRecords(False)
            'SaveToFile(output, "NIndividualRecords.doc")

            ''email files
            'Emailusers()
        Catch e As Exception
            WriteLine(e.Message)
        End Try 
```

我希望错误会出现在应用程序控制台上，但它没有，我是否有另一种方法可以查看抛出了什么错误？生产中没有设置开发环境（没有视觉工作室等），是否有我可以查看的日志？我如何捕捉导致应用程序失败的错误？

先感谢您！

编辑：我将 WriteLine(e.Message) 更改为 console.write(e.message)，现在当我运行应用程序时，控制台上有一条消息，但它闪烁太快并关闭，我没有时间看看它是什么......我怎样才能让控制台应用程序保持打开状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:03:26.720

尝试将应用程序的输出定向到文件，而不是控制台...

```
MyProgram.exe > log.txt 
```

# facebook - 从 facebook 评论框查看所有评论的 url 是什么？

> ID：10303660
> 
> 赞同：0
> 
> 时间：2012-04-24T18:14:56.923
> 
> 标签：facebook, url

如果我将此网址放入浏览器：

[https://www.facebook.com/plugins/comments.php?api_key=MYAPID](https://www.facebook.com/plugins/comments.php?api_key=MYAPID)

它显示评论框，但没有评论出现。谁能告诉我要添加到该网址或正确网址的代码代码，以便我可以查看来自某个评论框应用程序的所有评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:48:10.180

您可以在此处编辑该评论框的所有设置：

[https://developers.facebook.com/tools/comments/?id=MYAPID](https://developers.facebook.com/tools/comments/?id=MYAPID)

对于特定页面，您将使用以下内容

[https://www.facebook.com/plugins/comments.php?api_key=MYAPID&href=URLENCODEDHREF&view=recent_comments](https://www.facebook.com/plugins/comments.php?api_key=MYAPID&href=URLENCODEDHREF&view=recent_comments)

# git - 如何克隆特定版本的 git 存储库？

> ID：10303665
> 
> 赞同：5
> 
> 时间：2012-04-24T18:15:11.937
> 
> 标签：git, symfony

我正在使用 symfony2，我想备份我的供应商，以防 github 无法访问。

如何克隆存储库的特定版本？

我想在供应商文件的帮助下备份存储库。

语法是这样的：

```
[symfony]
    git=http://github.com/symfony/symfony.git
    version=v2.0.9 
```

现在我如何告诉 git 获取该特定版本？是否有类似的终端命令：

```
git clone --mirror http://github.com/symfony/symfony.git --version=v2.0.9 
```

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-24T18:41:45.553

我会告诉 git 使用这个确切的版本是：

```
git clone http://github.com/symfony/symfony.git
cd symfony

git checkout v2.0.9 
```

一个班轮：

```
git clone http://github.com/symfony/symfony.git -b v2.0.9 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T22:49:48.063

以下内容可能会让您到达那里：

```
git clone --branch <branch> <repo> 
```

如果您正在寻找特定版本，则首先从您的工作存储库中创建该版本的分支。像这样：

```
# In a local, working repository
git checkout -b v2.0.9-br v2.0.9
git push origin

# Now create your clone from v2.0.9-br 
```

注意，我假设 v2.0.9 是一个版本（标签），而不是一个分支。如果它是一个分支，那么只需使用“--branch”选项进行克隆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T18:32:30.260

您不能克隆仅指定版本号的存储库。您也不能通过仅指定提交哈希来克隆存储库。（从 Git 的角度来看，这几乎是一回事）

实际上你唯一能做的就是通过指定深度（你将拉的提交数）进行浅克隆：http: [//linux.die.net/man/1/git-clone](http://linux.die.net/man/1/git-clone)

`git clone --depth 1`只会拉最后一次提交。

回到您的问题，如果您担心 github 无法访问，您应该将这些项目托管在您的一台服务器上。

# android - android-wheel 是否适用于三星 Galaxy S2 ICS 更新

> ID：10303666
> 
> 赞同：2
> 
> 时间：2012-04-24T18:15:12.843
> 
> 标签：android, android-widget, samsung-mobile

我最近在我的一个项目中实现了[android-wheel](http://code.google.com/p/android-wheel/)小部件来代替微调器和时间/日期选择器。有一个[报告的错误](http://code.google.com/p/android-wheel/issues/detail?id=36)只影响带有新 ICS 更新的三星 Galaxy S2 手机。这似乎有点破坏交易，因为这是一款非常受欢迎的手机。任何拥有 Galaxy S2 的人都可以通过[下载](http://code.google.com/p/android-wheel/downloads/list)演示应用程序和测试来确认是这种情况吗？或者阐明为什么它不能仅在这款特定手机上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:14:58.857

这是我的解决方法：在`onTouchEvent(MotionEvent event)`方法 move中的 WheelView 类中

```
if (getParent() != null) {
    getParent().requestDisallowInterceptTouchEvent(true);
} 
```

从切换到方法的开头

# c - 带有结构数组的函数 SegFault

> ID：10303670
> 
> 赞同：2
> 
> 时间：2012-04-24T18:15:30.487
> 
> 标签：c, struct, segmentation-fault

我正在使用这个功能：

```
int times_on_table(char *search,struct table index[],int wct){
 int ct=0,num=0;
 while(ct<wct){
     if(strcmp(search,(index[ct].label))==0) {
         num++;
     }
     ct++;
 }
 return num;
} 
```

搜索结构数组并查找某个字符串存储在数组中的所有时间，并返回该字符串出现的次数。每当我在 main 中使用这个函数时：

```
/*EDIT: i had a main from the wrong program my apologies*/

int main(int argc, char **argv){
    int numwds=get_num_words(argv[1]);
    struct table index[numwds];

    int a;
    struct cmd_ops symbol[22];
    store(argv[1],index,numwds);
    ops_gen(symbol);
    int b=times_on_table("in",index,numwds);
    printf("%d",b);
} 
```

代码工作正常。但是，当我尝试在像这样的某些功能中使用它时

```
struct table* store(char *filename,struct table index[]) {
    FILE *fp;
    fp=fopen(filename,"r");
    char *a;int d=0,e=0,t=0;
    a=malloc(60);
    int wordcount=get_num_words(filename);
    while(d<wordcount){
        fscanf(fp,"%s",a);
        if ((index[d].label=strdup(a))==NULL)
            break;
        index[d].word_num=d;

        times_on_table("this",index,wordcount);/*when i comment this out
                                                 of my code it runs fine*/

        index[d].address=findline(filename,index[d].label,wordcount,index,t);
        d++;
    }
    free(a);
} 
```

代码没有运行，并给我一个分段错误。有什么想法吗？

编辑：我不知道这是否有帮助，但是当我得到段错误时，它甚至发生在 main 中的第一行代码执行之前。

编辑：这是调用 times_on_table() 时导致段错误的另一个函数：

```
int findline(char *filename,char *check,int wordcount,struct table index[],int t){
char *a;
a=malloc(60);
int b=line_count(filename);
int ch;
fpos_t pos;

int line=0,wd=0,loc,s=0,c=1,times;

times=times_on_table(check,index,wordcount);

FILE *fp;
fp=fopen(filename,"r");

int list[wordcount];

while(c<=b){
    fscanf(fp,"%s",a);
    fgetpos(fp,&pos);

    ch=fgetc(fp);ch=fgetc(fp);

    if(strcmp(a,check)==0){
       if(times==0)
            return line;
       else
            times--;
    }

    if(ch==10){
        line++;c++;
    }
    else
        fsetpos(fp,&pos);
    }
    return line;
 } 
```

正是在这个函数中，我首先添加了 times_on_table()，并让分段错误使我的程序无法运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:54:06.203

您很可能会越过数组索引。这两行并不真正匹配（来自您与我们共享的代码：

```
int wordcount=get_num_words(filename);
times_on_table("this",index,wordcount); 
```

（wordcount 我假设计算`filename`作为第一个参数传入的东西，但它似乎与你的无关`struct table index[]`）

因此，传入的参数`struct table index[]`可能与您存储的值不同`wordcount`。我建议您将数组大小作为参数传递给`store`函数，并像在工作`main`示例中一样使用它。例子

```
struct table* store(char *filename,struct table index[], int structSize){
....
times_on_table("this",index,structSize); //replace b from the call in main
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:10:17.647

它可能与正确设置“index[d].label”有关。尝试打印 times_on_table() 函数之外的所有标签，而不将它们与任何东西进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:19:13.710

这里

```
while(d<wordcount){
    fscanf(fp,"%s",a);
    if ((index[d].label=strdup(a))==NULL)
        break;
    index[d].word_num=d;

    times_on_table("this",index,wordcount); 
```

您尝试计算长数组`"this"`中的出现次数`wordcount`，但您只填充`d+1`了数组的插槽。其他的slots可能包含垃圾，再访问`index[ct].label`时很可能会造成segmentation fault `ct > d`。

# assembly - 为什么这会在 mips 树遍历的前 3 个数字之后停止？

> ID：10303671
> 
> 赞同：1
> 
> 时间：2012-04-24T18:15:31.937
> 
> 标签：assembly, tree, mips, traversal

树遍历例程接受 3 个参数，第一个节点、处理函数和顺序常数。

```
traverse_tree:
    addi    $sp,$sp,-8
    sw      $ra,0($sp)
    sw      $a0,4($sp)

    beq     $a0,$zero,done
    move    $t3,$a2
    move    $t2,$a1
    move    $t0,$a0
    li      $t1,PRE_ORDER
    beq     $t3,$t1,preorder
    li      $t1,IN_ORDER
    beq     $t3,$t1,inorder
    li      $t1,POST_ORDER
    beq     $t3,$t1,postorder

 preorder:

    jalr    $t2
    lw      $a0,4($t0)
    jal     traverse_tree
    lw      $a0,8($t0)
    jal     traverse_tree
    jal     done

inorder:
    lw      $a0,4($t0)
    jal     traverse_tree
    move    $a0,$t0
    jalr    $t2
    lw      $a0,8($t0)
    jal     traverse_tree
    jal     done

 postorder:
    lw      $a0,4($t0)
    jal     traverse_tree
    lw      $a0,8($t0)
    jal     traverse_tree
    move    $a0,$t0
    jalr    $t2
    jal     done

done:
    lw      $ra,0($sp)
    lw      $a0,4($sp)
    addi    $sp,$sp,8
    jr      $ra 
```

程序在遇到第三个元素时停止。我很确定这个元素是一个两个都为空的节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:12:01.237

杰夫所说的。具体来说，您应该使用`s0`over `t0`，因为临时变量不能保证不会被覆盖，但是`s*`当您调用函数时，寄存器“承诺”会被保存和恢复。`s0`如果您不希望自己的函数每次调用都覆盖它，您自己需要向堆栈添加 4 个字节并保存和恢复。

# android - Android：在 Scrollview 中的 Canvas 上绘图

> ID：10303678
> 
> 赞同：8
> 
> 时间：2012-04-24T18:15:44.387
> 
> 标签：android, scrollview, drawing2d

我在为 Android 编程方面非常陌生。我的应用是来自开发者 android 网站上 api 演示的示例应用。当我更改该示例图中的参数时，它会变大。该绘图需要在滚动视图中显示（不需要缩小以适应屏幕）。这是我使用的代码：

**DrawPoints.java**

```
 public class DrawPoints extends myActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.routes); 

    }

    public static class SampleView extends View {
        private Paint   mPaint = new Paint();
        private float[] mPts;

       /*here comes declaration of parametars

        private void buildPoints() {

        /*here comes some coding*/

            }
        }

        public SampleView(Context context, AttributeSet attributeset) {
            super(context, attributeSet);

            buildPoints();
        }

        @Override 
        protected void onDraw(Canvas canvas) {
            Paint paint = mPaint;

            //here also comes code
        }
    }
} 
```

这是xml代码：

**路由.xml**

```
<?xml version="1.0" encoding="utf-8"?>
    <ScrollView 
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/scrollView1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >
        <HorizontalScrollView 
                android:id="@+id/scrollView2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent">

                    <!-- This code is just to make sure that scroll views work how 
                        I want them to work, image size is 625*351 px
                     <ImageView
                        android:id="@+id/image_View1"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:src="@drawable/bus_design"
                            /> -->
                     <my.package.DrawPoints.SampleView
                        android:layout_width="fill_parent" 
                        android:layout_height="fill_parent" /> 

        </HorizontalScrollView>
    </ScrollView> 
```

当我运行该应用程序并在主活动应用程序崩溃中按下按钮时。当我不使用 xml 布局或滚动视图时，绘图看起来像 Figure1：

[http://i.stack.imgur.com/za5MP.png](http://i.stack.imgur.com/za5MP.png) **图1**

我还尝试在方法 setContentView 之后使用此代码：

```
View v = new SampleView(this);
addContentView(v, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,
            ViewGroup.LayoutParams.FILL_PARENT)); 
```

还有这个：

```
View v = new SampleView(this);
    ScrollView.LayoutParams lp = new ScrollView.LayoutParams(1000, 1000);

    addContentView(v, lp); 
```

当我使用上面显示的代码时，应用程序显示不带滚动视图的 Figure1，似乎第二个内容视图覆盖了该 xml，但它没有正确显示。之后，我尝试在 setContentView 之后使用此代码：

```
View v = new SampleView(this);
    FrameLayout fl = new FrameLayout(this);
    fl.findViewById(R.id.FrameLayout1);
    fl.addView(v); 
```

水平滚动视图后在 routes.xml 文件中添加框架布局（FrameLayout1）。当应用程序运行时，我得到没有图 1 的空白屏幕。有谁知道如何升级我的代码以在 ScrollView 中显示 Figure1？

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T11:48:22.183

write this line in your touchevent of custom View class

getParent().requestDisallowInterceptTouchEvent(true)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T20:58:51.053

最后我找到了解决我的问题的方法。我使用了这个网站的解决方案：

[链接1](http://blog.gorges.us/wp-content/uploads/TwoDScrollView.java)

好吧，我之前看过那个解决方案，但不幸的是我没有意识到这个解决方案对我有好处。我知道我需要 Canvas 的 onMeasure 方法才能在 xml 中显示它，但是如果没有提到的站点的解决方案，它就不起作用。现在它起作用了。这是我的 xml 和 SampleView 解决方案。

**XML 代码：**

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/app_layout" android:orientation="horizontal"
    android:layout_width="fill_parent" android:layout_height="fill_parent">
    <!-- SCENE -->
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/scene_layout" 
        android:drawingCacheQuality="low"
        android:orientation="horizontal" android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <com.testiranje.Kristijan.TwoDScrollView
            android:id="@+id/scene_scroller" android:drawingCacheQuality="low"
            android:scrollbars="horizontal"

            android:layout_width="fill_parent" android:layout_height="fill_parent">
            <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/scene_container" 
                android:drawingCacheQuality="low"
                android:background="@drawable/map"
                android:layout_width="fill_parent" android:layout_height="fill_parent">

                <com.testiranje.Kristijan.SampleView
                    android:layout_height="fill_parent"
                    android:layout_width="fill_parent">

                    </com.testiranje.Kristijan.SampleView>

                <!--  <ImageView xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/scene_background" android:drawingCacheQuality="low"
                    android:background="@drawable/map"
                    android:layout_width="fill_parent" android:layout_height="fill_parent" /> -->
            </RelativeLayout>
        </com.testiranje.Kristijan.TwoDScrollView>
    </RelativeLayout>
</RelativeLayout> 
```

**这是我的 SampleView 解决方案：**

```
 public class SampleView extends View {
    private Paint   mPaint = new Paint();
    private float[] mPts;

    private static final float SIZE = 1000;
    private static final int SEGS = 50;
    private static final int X = 0;
    private static final int Y = 1;

    private void buildPoints() {
        final int ptCount = (SEGS + 1) * 2;
        mPts = new float[ptCount * 2];

        float value = 0;
        final float delta = SIZE / SEGS;
        for (int i = 0; i <= SEGS; i++) {
            mPts[i*4 + X] = SIZE - value;
            mPts[i*4 + Y] = 0;
            mPts[i*4 + X + 2] = 0;
            mPts[i*4 + Y + 2] = value;
            value += delta;
        }
    }

    public SampleView(Context context){
        super(context);
        //initSampleView();
        buildPoints();

    }

   //This constructor is very important because withouth of this 
   //you can't insert this view in xml
   public SampleView(Context context, AttributeSet attrs) {
        super(context, attrs);
        //initSampleView();
        buildPoints();
    }

    /*private final void initSampleView() {
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        setPadding(3, 3, 3, 3);
    }*/

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        setMeasuredDimension(measureWidth(widthMeasureSpec),
                measureHeight(heightMeasureSpec));
    }

    /**
     * Determines the width of this view
     * @param measureSpec A measureSpec packed into an int
     * @return The width of the view, honoring constraints from measureSpec
     */
    private int measureWidth(int measureSpec) {
        int result = 0;
        //This is because of background image in relativeLayout, which is 1000*1000px
        measureSpec = 1001;
        int specMode = MeasureSpec.getMode(measureSpec);
        int specSize = MeasureSpec.getSize(measureSpec);

        if (specMode == MeasureSpec.UNSPECIFIED) {
            // We were told how big to be
            result = specSize;
        }

        return result;
    }

    /**
     * Determines the height of this view
     * @param measureSpec A measureSpec packed into an int
     * @return The height of the view, honoring constraints from measureSpec
     */
   private int measureHeight(int measureSpec) {
        int result = 0;
        //This is because of background image in relativeLayout, which is 1000*1000px 
        measureSpec = 1001;
        int specMode = MeasureSpec.getMode(measureSpec);
        int specSize = MeasureSpec.getSize(measureSpec);

        if (specMode == MeasureSpec.UNSPECIFIED) {
            // Here we say how Heigh to be
            result = specSize;
        } 
        return result;
    }

    @Override 
    protected void onDraw(Canvas canvas) {
        Paint paint = mPaint;

        canvas.translate(10, 10);

        paint.setColor(Color.RED);
        paint.setStrokeWidth(0);
        canvas.drawLines(mPts, paint);

        paint.setColor(Color.BLUE);
        paint.setStrokeWidth(3);
        canvas.drawPoints(mPts, paint);

    }
} 
```

现在，当我运行我的应用程序时，我得到了这张图片：

[http://i.stack.imgur.com/lWhvT.png](http://i.stack.imgur.com/lWhvT.png)

如果有人对此有任何疑问，请随时问我:)。

# sql - SQL：确定某个活动以给定的频率发生

> ID：10303679
> 
> 赞同：2
> 
> 时间：2012-04-24T18:15:49.473
> 
> 标签：sql, oracle, oracle10g

电子病历 (EMR) 报告在确定活动以特定频率发生时的常见问题。在这种情况下，我需要确定入院后每 72 小时写一次便条。

鉴于：

```
A                                       D
|-0-|-1-|-2-|-3-|-4-|-5-|-6-|-7-|-8-|-9-|
|---- 1 ----|---- 2 ----|---- 3 ----|-4-| 
```

在周期 1、2 和 3 中至少需要一个注释。因为 4 不是一个完整的 72 小时周期，所以它不需要注释。未能在周期 1、2 和 3 中找到注释将被视为失败。

数据：

(ENC):

```
ENC_ID  ADMITTED    DISCHARGED  PERIODS PASS_FAIL
4114221 06/15/09 18:30  06/24/09 15:40  3   ? 
```

期间： `TRUNC(CEIL((DISCHARGED - ADMITTED)/3))`

“PASS_FAIL”列将指示遭遇是否有足够数量和时间的笔记。

（笔记）：

```
ENC_ID  NOTE_ID NOTE_TIME   PERIOD
4114221 1833764 06/17/09 08:42  1
4114221 1843613 06/18/09 08:14  1
4114221 1858159 06/18/09 20:15  2
4114221 1850948 06/18/09 20:15  2
4114221 1850912 06/18/09 20:18  2
4114221 1859315 06/19/09 18:35  2
4114221 1863982 06/20/09 10:29  2
4114221 1868895 06/21/09 22:00  3
4114221 1873539 06/22/09 15:42  3 
```

时期：`CEIL((NOTE_TIME - ADMITTED)/3)`

有没有解决这个问题的有效方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:32:41.800

```
SELECT  e.*,
        CASE WHEN cnt = TRUNC(CEIL((discharged / admitted) / 3)) THEN 'pass' ELSE 'fail' END AS pass_fail
FROM    (
        SELECT  COUNT(*) AS cnt
        FROM    enc ei
        CROSS JOIN
                (
                SELECT  level AS period
                FROM    dual
                CONNECT BY
                        level <= 
                        (
                        SELECT  TRUNC(CEIL((discharged / admitted) / 3))
                        FROM    enc
                        WHERE   enc_id = :enc_id
                        )
                ) p
        WHERE   ei.enc_id = :enc_id
                AND EXISTS
                (
                SELECT  NULL
                FROM    note
                WHERE   enc_id = ei.enc_id
                        AND note_time >= ei.admitted + (p - 1) * 3
                        AND note_time < ei.admitted + p * 3
                )
        ) c
JOIN    enc e
ON      e.enc_id = :enc_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:43:58.743

如果我正确地阅读了您的问题，`NOTE`那么是一个带有指示数据的表格。

您真正关心的是每个`enc_id`.

如果是这种情况，则表明应使用分析函数：

```
select e.enc_id, e.admitted, e.discharged, e.periods
     , decode( n.ct
             , 'pass'
             , 'fail' ) as pass_fail
  from enc e
  left outer join ( select distinct enc_id
                         , count(n.period) over ( partition by n.enc_id ) as ct
                      from note
                     where period in (1,2,3)
                           ) n
    on e.enc_id = n.enc_id 
```

这将选择所有期间的 per `enc_id`from `note`，即您要检查的那些。然后计算它们每`enc_id`. `enc_id`独特之处在于确保您在最终结果中仅获得一行。

如果您只想要那些`enc_id`具有值的 s，`note`那么将左外连接变为内连接。

如果`period`不是，如所示，在`note`查询中，您必须对完整查询而不是子查询执行不同的操作，并检查`period`每个查询中的每个`note_id`。

对于可怕的格式，我很抱歉，但我想尝试将它放在页面上。

```
select distinct e.enc_id, e.admitted, e.discharged, e.periods
     , decode( count( distinct -- number of distinct periods
                       case when n.note_time between e.admitted 
                                                 and e.admitted + 3 then 1
                            when n.note_time between e.admitted 
                                                 and e.admitted + 6 then 2
                            when n.note_time between e.admitted 
                                                 and e.admitted + 9 then 3
                            end ) -- per enc_id from note
                      over ( partition by n.enc_id )
              -- if it-s 3 then pass
             , 3, 'pass'
              -- else fail.
             , 'fail' ) as pass_fail
  from enc e
  left outer join note n
    on e.enc_id = n.enc_id 
```

无论您的数据结构如何，这两种方式的好处是它们是简单的连接，一个索引唯一扫描（我假设`enc.end_id`是唯一的）和一个索引范围扫描（ on `note`）。

# java - 反引号键的 KeyCode

> ID：10303680
> 
> 赞同：1
> 
> 时间：2012-04-24T18:15:51.463
> 
> 标签：java, keyevent

我正在尝试使用 Java 中的 Robot 类在文本字段中键入一些文本。

我遇到的问题是，我无法发现反引号键的整数值（键盘上 1 的左侧）。

我不知道它是 KeyEvent 类中的哪一个 VK_ 常量。

起初我以为它是 96，但使用机器人按下它会给我`0`（也许 96 是数字键盘的零）。

反引号的整数键码是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T18:19:02.243

[`VK_BACK_QUOTE`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html#VK_BACK_QUOTE)是你想要的代码。它具有整数值`192`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:23:16.627

如果微软布局编辑器是正确的， VK_OEM_3 。是否有意义？

# c# - PostBuildEvent 错误复制配置文件

> ID：10303682
> 
> 赞同：1
> 
> 时间：2012-04-24T18:15:54.380
> 
> 标签：c#, .net

我正在尝试构建我的项目并收到此错误：

```
Error   148 The command "copy "C:\Users\agordon\Documents\Visual Studio 2008\Projects\SubversionRepository\Internal Application\eFormsSystem\eFormsApp\Debug.config" "C:\Users\agordon\Documents\Visual Studio 2008\Projects\SubversionRepository\Internal Application\eFormsSystem\eFormsApp\bin\Debug\eFormsApp.exe.config"
copy "C:\Users\agordon\Documents\Visual Studio 2008\Projects\SubversionRepository\Internal Application\eFormsSystem\eFormsApp\Debug.config" "C:\Users\agordon\Documents\Visual Studio 2008\Projects\SubversionRepository\Internal Application\eFormsSystem\eFormsApp\App.config"" exited with code 1\.   C:\Windows\Microsoft.NET\Framework\v3.5\Microsoft.Common.targets    3397    13  eFormsApp 
```

这是编译器为此复制过程生成的代码：

```
 <Target
        Name="PostBuildEvent"
        Condition=
        "
            '$(PostBuildEvent)'!=''
            and
            (
                '$(RunPostBuildEvent)'!='OnOutputUpdated'
                or
                '$(_AssemblyTimestampBeforeCompile)'!='$(_AssemblyTimestampAfterCompile)'
            )
        "
        DependsOnTargets="$(PostBuildEventDependsOn)">

            <Exec WorkingDirectory="$(OutDir)" Command="$(PostBuildEvent)" />

    </Target> 
```

错误指向这一行：

```
<Exec WorkingDirectory="$(OutDir)" Command="$(PostBuildEvent) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:00:29.087

对我来说，源配置文件不存在（我有自定义构建配置文件）。一旦我从另一个已知好的配置文件中复制了该配置文件并针对我的环境进行了修改，一切都开始工作了。

# matlab - MATLAB：如果默认输入为空，如何分配默认输入？

> ID：10303684
> 
> 赞同：0
> 
> 时间：2012-04-24T18:16:11.733
> 
> 标签：matlab, input, arguments

我有一个这样开头的 .m 文件：

```
function [] = foo(n); 
```

如果用户像`foo(5)`在命令窗口中那样调用它，就可以了。但是我希望该函数在用户只是调用它时也运行`foo`，而无需输入 n。我使用数组在 c++ 中处理这个问题`argv[]`，有没有办法在 MATLAB 中做到这一点？

谢谢你的时间..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:19:23.380

你可以使用[`nargin`](http://www.mathworks.co.uk/help/techdoc/ref/nargin.html)和相关的。

# php - PHP数组+邮件附几部分

> ID：10303689
> 
> 赞同：1
> 
> 时间：2012-04-24T18:16:32.243
> 
> 标签：php, ajax, arrays, shopping-cart, email-attachments

我是法国人，所以请原谅我的口音。;-) 我正在研究一个 PHP 脚本（[基于 AJAX 购物车](http://tutorialzine.com/2009/09/shopping-cart-php-jquery/)）已经好几个星期了，但我找不到我的问题的正确答案。我解释一下：我有一个拖放篮，可以从图片库中选择图片。当用户设置他的电子邮件并单击一个按钮时，他会通过电子邮件收到他选择的图片。

这是我的问题：如果篮子里有 3 张图片，他会通过电子邮件收到 3 封电子邮件和 1 张图片。如果有 12 589 张图片... 12 589 电子邮件！

我希望有人可以帮助我或解释我为什么错了。

这是我的（部分）代码：

```
<?php

//////////////////////////////////////
// From Drag and Drop
//////////////////////////////////////

$cnt = array();
$products = array();
foreach($_POST as $key=>$value)
{
$key=(int)str_replace('_cnt','',$key);
$products[]=$key;
$cnt[$key]=$value;
}
$result = mysql_query("SELECT * FROM internet_shop WHERE id IN(".join($products,',').")");

if(!mysql_num_rows($result))
{
echo '<h2>Votre sélection est vide. Mais comment êtes vous arrivé(e) ici ? </h2><a href="contact.php">contactez-nous</a>';
}
else
{
echo '<h2>Votre sélection vous a été expédié à <span style="color:#4FACC1;">'.$_POST ['email'].'</span>.</h2>
<br/>
<h2 style="color:#4FACC1;">Détails de votre sélection</h2>
';
while($row=mysql_fetch_array($result))
{

//////////////////////////////////////
// Display selection
//////////////////////////////////////

echo '';
echo '  <span style="float:left;margin:10px;text-align: center;">
        <img src="'.$row['chemin'].'/'.$row['img'].'" 
        alt="'.htmlspecialchars($row['name']).'" 
        width="128" height="128" 
        class="pngfix" />
        <br/>
        '.$row['name'].'
        <b style="color:#4FACC1;font-size:9px;"> ('.$row['price'].' Ko)</b>
        </span>';
$total += $cnt[$row['id']] * $row['price'];

//////////////////////////////////////
// Variable
//////////////////////////////////////

$sujet_reportage = str_replace('/', ' : ', $row['chemin']);
$sujet_reportage = str_replace('_', ' ', $sujet_reportage);
$withpoutthunb = str_replace('thumb_', '', $row['img']);
$Photos = $row['chemin'].'/'.$withpoutthunb;
$selection = 'Votre sélection photo : '.$withpoutthunb;
$to = $_POST ['email'];
$from = "www.xxxxx.com"; 
$subject = $selection; 
$message = $sujet_reportage;
$headers = "From: $from";

//////////////////////////////////////
// array with filenames to be sent as attachment
//////////////////////////////////////

$files = array($Photos);

//////////////////////////////////////
// Frontière 
//////////////////////////////////////

$semi_rand = md5(time()); 
$mime_boundary = "==Multipart_Boundary_x{$semi_rand}x"; 

//////////////////////////////////////
// headers for attachment 
//////////////////////////////////////

$headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\""; 

//////////////////////////////////////
// multipart boundary 
//////////////////////////////////////

$message = "This is a multi-part message in MIME format.\n\n" . "--{$mime_boundary}\n" . "Content-Type: text/plain; charset=\"iso-8859-1\"\n" . "Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n"; 
$message .= "--{$mime_boundary}\n";

//////////////////////////////////////
// preparing attachments
//////////////////////////////////////

for($x=0;$x<count($files);$x++){
$file = fopen($files[$x],"rb");
$data = fread($file,filesize($files[$x]));
fclose($file);
$data = chunk_split(base64_encode($data));
$message .= "Content-Type: {\"application/octet-stream\"};\n" . " name=\"$files[$x]\"\n" .
"Content-Disposition: attachment;\n" . " filename=\"$files[$x]\"\n" .
"Content-Transfer-Encoding: base64\n\n" . $data . "\n\n";

if($x == (count($files)-1)) 
{
$message .= "–{$mime_boundary}–";
} 
else 
{
$message .= "–{$mime_boundary}\n";
}
}

//////////////////////////////////////
// send
//////////////////////////////////////

$ok = @mail($to, $subject, $message, $headers); 

//////////////////////////////////////
// End of while
//////////////////////////////////////

} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:26:01.817

谢谢你的帮助 ！我终于使用了[http://swiftmailer.org/](http://swiftmailer.org/)库。而且效果很好！

要使用 swiftmailer 发送多附件邮件，我喜欢这样（为那些搜索的人发帖）：

```
//////////////////////////////////////
// Appel de la librairie Mail
//////////////////////////////////////

require_once 'lib/swift_required.php';

... votre appel en base (ou autre)

//////////////////////////////////////
// array with filenames to be sent as attachment
//////////////////////////////////////

$fichiers[] = $Photos;

//////////////////////////////////////
// DECLARE LES VARIABLES
//////////////////////////////////////

$mail = $_POST ['email'];
$from = "Your name"; 

//////////////////////////////////////
// Fermeture du while
//////////////////////////////////////

}

//////////////////////////////////////
// Construction du message
//////////////////////////////////////

$message = Swift_Message::newInstance()

//////////////////////////////////////
// Sujet du mail
//////////////////////////////////////

->setSubject('Votre sujet')

//////////////////////////////////////
// De
//////////////////////////////////////

->setFrom(array('xx@xxxx.com' => 'www.xxxx.xx'))

//////////////////////////////////////
// A
//////////////////////////////////////

->setTo($mail)

//////////////////////////////////////
// Contenu du mail
//////////////////////////////////////

->setBody($votre_contenu)

//////////////////////////////////////
// Contenu du mail (alternatif)
//////////////////////////////////////

->addPart('<q>'.$votre_contenu.'</q>', 'text/html')
;

//////////////////////////////////////
// Pieces jointes multiples
//////////////////////////////////////

foreach ($fichiers as $fichier)
{
$message->attach(Swift_Attachment::fromPath($fichier)) ;
}

//////////////////////////////////////
// Création du "moyen de transport"
//////////////////////////////////////

$transport = Swift_MailTransport::newInstance();

//////////////////////////////////////
// Envoi du mail
//////////////////////////////////////

$mailer = Swift_Mailer::newInstance($transport);
$result = $mailer->send($message);

//////////////////////////////////////
// Réponse de l'envoi
//////////////////////////////////////

if($result)
{
echo '<h2>Votre sélection vous a été expédié à '.$_POST ['email'].'.</h2>
<br/>';
}
else
{
echo 'Erreur';
} 
```

非常感谢大家！

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:03:52.253

正如我所提到的，使用图书馆让自己变得轻松：http: [//swiftmailer.org/](http://swiftmailer.org/)

然后你会用附件创建这样的代码：

```
require_once 'lib/swift_required.php';

// Create the message
$message = Swift_Message::newInstance()

  // Give the message a subject
  ->setSubject('Your subject')

  // Set the From address with an associative array
  ->setFrom(array('john@doe.com' => 'John Doe'))

  // Set the To addresses with an associative array
  ->setTo(array('receiver@domain.org', 'other@domain.org' => 'A name'))

  // Give it a body
  ->setBody('Here is the message itself')

  // And optionally an alternative body
  ->addPart('<q>Here is the message itself</q>', 'text/html')

  // Optionally add any attachments
  ->attach(Swift_Attachment::fromPath('my-document.pdf'))
  ; 
```

**参考：** [http ://swiftmailer.org/docs/messages.html](http://swiftmailer.org/docs/messages.html)

多年来制作了自己的邮件功能后，最好坚持使用一个出色的库来完成这项工作。

对于您的问题，您只需重复图片的附件：

```
->attach(Swift_Attachment::fromPath('image1.jpg'))
->attach(Swift_Attachment::fromPath('image2.jpg'))
->attach(Swift_Attachment::fromPath('image3.jpg')) 
```

# .htaccess - .htaccess 添加新文件

> ID：10303692
> 
> 赞同：3
> 
> 时间：2012-04-24T18:16:34.740
> 
> 标签：.htaccess

```
<IfModule mod_rewrite.c>
Options -MultiViews
RewriteEngine On
RewriteBase /homepage/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /homepage/index.php [L]
</IfModule> 
```

那是我的 .htaccess 代码。我在 homepage/test.php 中创建了新文件，当我从浏览器访问它时，它会出现访问错误，
`i have tried by replacing index.php with test.php but it still not working`.
有人可以解释一下这段代码是如何工作的，为什么我的代码不能正常工作。

```
i have deleted .htaccess but its still not working. What else file it can be. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T22:17:48.213

改变

```
RewriteRule . /homepage/index.php [L] 
```

至：

```
RewriteRule (.+) /homepage/index.php?page=$1 [L] 
```

PS 为此，您的 index.php 需要侦听 $_GET['page'] 并加载适当的资源。

编辑：不使用 "?page=$1" 您的代码将只显示所有不是文件或目录的请求的索引页面。我不确定这是否是你想要的。

# php - 带有查询的数组对象

> ID：10303694
> 
> 赞同：0
> 
> 时间：2012-04-24T18:16:40.017
> 
> 标签：php, mysql, codeigniter

我要做的是创建一个数组，其中包含标题列表，标题名称，数据库行的 id，然后是冠军和竞争者的名称。对于冠军和竞争者的值，我需要做一个额外的查询来检索这个人的名单名称。如果冠军的值为 0，则需要将 Vacant 添加到该位置的阵列中，如果竞争者的值为 0，则它使用 TBD 作为阵列。这是我正在使用的内容，其中包括查询和 print_r 输出。

我的问题是我不确定我需要在哪里/如何使用每个标题的冠军和竞争者的这些值运行附加查询。

```
 /**
     * Get titles champions
     *
     * @return  object/NULL
     */
    function getTitlesChampions()
    {      
        $this->db->select('titlesList.id');
        $this->db->select('titlesList.titleName');
        $this->db->select('titlesChampions.championID');
        $this->db->select('titlesChampions.contender1ID');
        $this->db->select('titlesChampions.contender2ID');
        $this->db->select('titlesChampions.contender3ID');
        $this->db->from('titlesChampions');
        $this->db->join('titlesList', 'titlesList.id = titlesChampions.titlesListID');
        $query = $this->db->get();  
        if ($query->num_rows() > 0) {
            echo "<pre>";
            print_r ($query->result());
            echo "</pre>";

        }                                    
    }

Array
(
[0] => stdClass Object
    (
        [id] => 1
        [titleName] => Undisputed Heavyweight Title
        [championID] => 1
        [contender1ID] => 1
        [contender2ID] => 1
        [contender3ID] => 1
    )

[1] => stdClass Object
    (
        [id] => 2
        [titleName] => Outlaw Title
        [championID] => 1
        [contender1ID] => 0
        [contender2ID] => 0
        [contender3ID] => 0
    )

[2] => stdClass Object
    (
        [id] => 3
        [titleName] => Tag Team Titles
        [championID] => 1
        [contender1ID] => 0
        [contender2ID] => 0
        [contender3ID] => 0
    )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T22:45:57.673

最佳实践是一组额外的连接和子查询，但考虑到模式的（假定）状态，拥有辅助功能可能是最简单的。

对于找到的每个结果，您将遍历并通过调用来分配名称`getRosterName()`。该函数将返回并向 Champions 对象添加附加信息。

```
/**
 * Get titles champions
 *
 * @return  object/NULL
 */
function getTitlesChampions()
{
    $this->db->select('titlesList.id');
    $this->db->select('titlesList.titleName');
    $this->db->select('titlesChampions.championID');
    $this->db->select('titlesChampions.contender1ID');
    $this->db->select('titlesChampions.contender2ID');
    $this->db->select('titlesChampions.contender3ID');
    $this->db->from('titlesChampions');
    $this->db->join('titlesList', 'titlesList.id = titlesChampions.titlesListID');
    $query = $this->db->get();  

    if ($query->num_rows() > 0) {

        $result = query->result();

        foreach($result as $row)
        {
            // Iterate through
            $row->championName      =   $this->getRosterName($row->championID);
            $row->contender1Name    =   $this->getRosterName($row->contender2ID);
            $row->contender2Name    =   $this->getRosterName($row->contender2ID);
            $row->contender3Name    =   $this->getRosterName($row->contender3ID);
        }

        // Return it
        return $result;

    }
    return null;
}

/*

/* Returns the name */
function getRosterName($rosterId = null)
{

    if($rosterId && $rosterID > 0)
    {
        $this->db->select('RosterName');
        $this->db->where('rosterId', $rosterId);
        $query = $this->db->get('roster'); // Or whatever your `roster` table is named.
        return $query->row()->firstName; // Or whatever the name is you want returned
    }
    return null;
} 
```

我对您的架构一无所知，所以这是在黑暗中拍摄的。

祝你好运。

# javascript - 这个 javascript 正则表达式有什么问题？

> ID：10303698
> 
> 赞同：0
> 
> 时间：2012-04-24T18:17:02.043
> 
> 标签：javascript, regex

试图在标记中找到“N/A”的实例并用其他东西换掉，

```
var $reg = new RegExp('[Nn]/[Aa]'); 
```

其他变化是：

*   `/[Nn]/[Aa]/`
*   `'^[Nn]/[Aa]'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:19:31.010

我建议：

```
stringToSearchIn.replace(/(N\/A)/gi,'words to replace with'); 
```

1.  `\/`转义斜线，因为`/`字符分隔正则表达式字符串，并且
2.  最后`gi`：
    *   `g`用于全局搜索，因此它不会在第一次匹配后停止，并且
    *   `i`不区分大小写（因此它将匹配`n`and `N`, `a`and `A`.

[JS 小提琴演示](http://jsfiddle.net/davidThomas/A74FB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:18:26.290

你可以只使用这个：

```
N\/A 
```

# syntax - 试图在 IndexChangeEvent Flash Builder 中定义 selectedItem

> ID：10303699
> 
> 赞同：1
> 
> 时间：2012-04-24T18:17:05.553
> 
> 标签：syntax, drop-down-menu, flash-builder, selecteditem

我将此代码作为 Flash Builder 中 DropDownList 的更改函数：

```
public function chooseCategoryDDL_changeHandler(event:IndexChangeEvent):void {

    var para:Object = new Object();
    para.action = "changecategoryxml";
    para.book_class = event.selectedItem.book_class;

      if (event.selectedItem > -1 ) {
          changeCategory.send(para);
       } 
```

但是，我收到一个代码提示，指出存在“未定义属性 selectedItem 的访问权限”。然而，当我将 para.book_class 设置为：

```
 para.book_class = event.IndexChangeEvent.book_class; 
```

然后代码提示会指出错误“1078：标签必须是简单标识符”。我想要做的是当用户点击 DDL 中的选定项目时，如果选定项目 > -1（因为 DDL 是 ArrayCollection），则调用“changecategoryxml”函数。请问谁能帮我正确的语法？

任何帮助是极大的赞赏。谢谢你。

编辑：我现在知道接受率是如何工作的，请不要被相对较低的百分比所推迟！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:37:08.790

我总是`event.currentTarget.selectedItem`与 IndexChangeEvent 一起使用。这也应该适用于您的情况。

# asp.net - Azure Web 应用程序如何显示错误消息

> ID：10303703
> 
> 赞同：1
> 
> 时间：2012-04-24T18:17:27.333
> 
> 标签：asp.net, azure, azure-storage, azure-worker-roles

我正在 Azure 上开发 Web 应用程序，在发生异常时，我想在自定义错误页面上向用户显示错误消息。

什么是最佳实践，我不想使用 Session 来存储异常。

目前，我正在使用 Azure 诊断记录日志表和事件表和会话中的错误，以在 Global.asax.cs (app_error) 事件下存储异常详细信息

并使用 Session in Error 页面来显示错误。

抱歉，这个问题很基本......任何输入都会有帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T01:06:06.713

根据您提供的内容，我确信您正在开发 ASP.NET Web 角色并希望在发生异常时显示自定义错误页面。您可以使用 ASP.NET 内置的自定义错误页面功能来显示自定义错误页面，其中包含手工制作的异常详细信息和消息。

在页面级别，您可以通过在所有页面上实现 Page_Error 方法来使用 Page_Error 事件处理程序。

在应用程序级别，您可以使用 Application_Error 处理程序通过在 Global.asax 页面中定义 Application_Error 方法来捕获异常/错误。

在全局级别，您可以通过在 web.config 中添加自定义错误设置来处理异常/错误，如下所示：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:33:20.603

您的意思是您使用的是自定义 ASP.NET 错误页面吗？在这种情况下，您可以使用 HttpServerUtility.GetLastError 来获取异常。有关示例，请参阅[http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.getlasterror.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.getlasterror.aspx)。

您在 MSDN 论坛中的相同主题：http: [//social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/df31d683-81a9-4527-9109-94e57ff528f1](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/df31d683-81a9-4527-9109-94e57ff528f1)

# php - php检查数组中的第一个第二个第三个字符

> ID：10303705
> 
> 赞同：1
> 
> 时间：2012-04-24T18:17:34.613
> 
> 标签：php, arrays, preg-match

我有一个邮政编码数组：

```
$firstPostcode = array(
    'se1',
    'ec2a',
    'se16',
); 
```

我需要针对上述数组验证用户英国邮政编码的前 4 个字符。

我遇到的问题是我需要一次循环一个字符。一些输入可能是 4 个字符或 3 个带空格的字符。

我已经尝试过 preg match 和 in array 但经过数小时的谷歌搜索后无法解决

感谢您的任何建议。

我遇到的问题是它匹配整个数组而不是从 4 个字符开始

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:33:02.657

您应该能够匹配单个正则表达式：

```
$firstPostcode = array(
    'se1',
    'ec2a',
    'se16',
);
$rx = '!^\s*('.implode('|', $firstPostcode).')!i';

if (preg_match($rx, $input)){
    # postcode matches!
} 
```

创建一个像这样的正则表达式：

```
!^\s*(se1 |ec2a|se16)!i 
```

这匹配字符串开头的一个前缀（首先跳过任何空格）并且不区分大小写。

# iphone - 如何让额外的键显示在 iPhone 键盘上以进行网络输入？

> ID：10303706
> 
> 赞同：2
> 
> 时间：2012-04-24T18:17:34.993
> 
> 标签：iphone, keyboard

使用 iPhone 访问某些网页时，我注意到一些文本输入框会弹出不同的键盘布局。

例如，Hotmail 的登录页面在电子邮件地址字段上显示一个带有较小空格键和一个@ 键的键盘。

设计网页时如何自己控制键盘布局？我不是在谈论应用程序，只是为 iPhone 设计的普通网页。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:21:54.353

您可能正在寻找`<input type="email">`. 这是[移动浏览器支持的输入类型的一个很好的列表](http://www.quirksmode.org/html5/inputs_mobile.html)。

# javascript - 需要 javascript 代码在一页中多次运行。对于每个 div

> ID：10303707
> 
> 赞同：2
> 
> 时间：2012-04-24T18:17:35.633
> 
> 标签：javascript, iframe, html

我忘记在位于此处的最后一个问题中包含“在一页中多次运行”：[Create iframe with javascript appending to a div](https://stackoverflow.com/questions/10302109/create-iframe-with-javascript-appending-to-a-div)

我需要在同一页面内的多个 div 上运行代码。现在下面的代码只在最后一个 div 上运行一次。例如，如果我有 3 个 div，则所有 3 个都应该附加一个 iframe。常规的 JavaScript。尽量不使用 JQuery。

```
window.onload = function(){
var link = "http://www.somesite.com"
var iframe = document.createElement('iframe');
iframe.frameBorder=0;
iframe.width="300px";
iframe.height="250px";
iframe.id="randomid";
iframe.setAttribute("src", link);
document.getElementById("ad54").appendChild(iframe); //<--this id will be dynamically generated to match div's
}

<div class="ad" id="1"></div>
<div class="ad" id="2"></div>
<div class="ad" id="3"></div> 
```

编辑：在 IE9、Chrome、Safari、Firefox 和歌剧中测试。此代码有效。不需要 JQuery 或循环。此代码将在您使用它的任何地方创建 iframe。

```
var link = "http://www.somesite.com"
document.write(iframe);
var myIframe = parent.document.getElementById("randomid");
myIframe.height = 250;
myIframe.width = 300;
myIframe.src = link;
myIframe.style.border = "0px";
myIframe.style.padding = "0px"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:22:48.293

```
window.onload = function() {
  var elements = document.getElementsByTagName('div');
  for (var i = 0; i < elements.length; i++) {
    append_iframe( elements[i] );
  }
}

function append_iframe( div ) {
    var link = "http://www.somesite.com"
    var iframe = document.createElement('iframe');
    iframe.frameBorder=0;
    iframe.width="300px";
    iframe.height="250px";
    iframe.id="randomid";
    iframe.setAttribute("src", link);
    div.appendChild(iframe);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:24:57.560

不是 jQuery 人，但我认为这行得通

```
$("div").each(function(d) {
    var link = "http://www.somesite.com"
    var iframe = document.createElement('iframe');
    iframe.frameBorder=0;
    iframe.width="300px";
    iframe.height="250px";
    iframe.id="randomid";
    iframe.setAttribute("src", link);
    this.appendChild(iframe);
}); 
```

# eclipse - 我可以像 Eclipse 中的任务列表视图那样在线编辑 Mylyn 任务吗？

> ID：10303708
> 
> 赞同：2
> 
> 时间：2012-04-24T18:17:41.153
> 
> 标签：eclipse, bug-tracking, bugzilla, mylyn, connector

我知道有几个连接器选项可以将 Mylyn 链接到 Trac 和 Bugzilla 等在线错误数据库，以及通过 TaskTop 提供的一些服务。目前我只使用本地数据库，但希望能够通过 Web 编辑器编辑我的任务（但仍保持 Eclipse 和在线服务之间的同步）。理想情况下，我将获得与 Eclipse 的任务列表视图（如下所示）相同的布局，我可以在其中移动任务、创建子任务等。

是否有提供这种在线界面的连接器/在线解决方案？

![Mylyn 任务列表快照](../Images/c3b66fedc8f72f7ca81c893b08a2cef9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:12:20.907

最简单的方法是花 10 美元获得 10 个用户的 JIRA 许可证。您可以在您的环境中运行它并使用 JIRA 连接器或通过 JIRA 自己的 Web 界面从 Mylyn 管理任务。另一个流行的选项是运行 Trac 的本地实例。

# php - 时区计算。PHP 函数与 MySQL 函数

> ID：10303710
> 
> 赞同：0
> 
> 时间：2012-04-24T18:17:42.683
> 
> 标签：php, mysql, function, timezone

我正在使用 php 开发一个 API，我只是将查询结果作为 JSON 字符串发送出去。结果是多个表的组合。然而，其中一个领域是时间。我需要根据来自不同表的时区设置将其转换为不同的时区。

这是当前的输出：

```
 Array ( "Show_name" => "Billards",
             "Show_type" => "Movie",
             "Start_Time" => "2011-11-09 07:00:00",
             "End_Time" => "2011-11-09 09:00:00",
             "Open" => "Yes"
           ); 
```

默认情况下，所有记录的开始时间和结束时间都是 EST。时区设置存储在具有 Timezone_ID、GMT_offset、DST_offset 字段的不同表中。根据这些默认设置的 start_time 和 end_time，应将其转换为各自的时区。

我最初计划编写一个 MySQL 函数来从查询本身计算这个，这样 JSON 格式/字段就不会改变。但我看到，与 PHP 函数相比，它的速度太慢了。

根据您的经验，您有什么建议？- 有没有办法在查询中简单地计算？- MySQL 函数的性能是否优于 PHP？- 如果我需要使用 php 函数，我需要遍历所有记录来计算这个。不确定我是否需要单独提取时区记录。因为我不想更改 JSON 响应中的格式/字段数。

还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:43:57.950

我通常在数据库端执行此操作。请注意，我将数据库中的所有日期都存储为 UTC。

因此，要在用户的本地时区向用户显示数据，我会执行以下操作：

```
SELECT Show_name, Show_type,
  Start_time, CONVERT_TZ(Start_time, 'UTC', 'EST') AS Start_time_local
FROM Shows 
```

其中“EST”是用户在其偏好中选择的时区。

将数据库中的日期从 EST 更改为 UTC 不需要任何架构更改，因为时区未存储在架构中。

要将所有日期从 EST 转换为 UTC，只需执行以下操作：

```
UPDATE Shows
SET Start_time = CONVERT_TZ(Start_time, 'EST', 'UTC') 
```

# php - PHP max_input_vars

> ID：10303714
> 
> 赞同：95
> 
> 时间：2012-04-24T18:18:14.803
> 
> 标签：php

我收到一条`max_input_vars`错误消息。

我知道有一个`php.ini`设置可以从 5.3.9 版开始改变这一点，但是，我正在运行 5.1.6 版。

当我查看我的 5.1.6 服务器的配置信息时，它显示`max_input_vars`值为 1000。

我的问题是：即使我运行的是 5.1.6，我也看到了这个设置，`phpinfo()`但它不在`php.ini`文件中。这是否意味着该值在这个版本的 PHP 中是硬编码的并且无法更改？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-01-04T23:12:46.840

PHP网络上的参考：

[http://php.net/manual/en/info.configuration.php#ini.max-input-vars](http://php.net/manual/en/info.configuration.php#ini.max-input-vars)

请注意，您不能在运行时使用 function 设置此指令`ini_set(name, newValue)`，例如

```
ini_set('max_input_vars', 3000); 
```

不起作用。

如文档中所述，该指令只能针对每个目录范围进行设置，这意味着通过 .htaccess 文件、httpd.conf 或 .user.ini（自 PHP 5.3 起）。

见[http://php.net/manual/en/configuration.changes.modes.php](http://php.net/manual/en/configuration.changes.modes.php)

将指令添加到 php.ini 或将以下行放入 .htaccess 将起作用：

```
php_value max_input_vars 3000
php_value suhosin.get.max_vars 3000
php_value suhosin.post.max_vars 3000
php_value suhosin.request.max_vars 3000 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-04-24T18:32:41.923

您可以将它添加到 php.ini 并且它应该可以工作 - 刚刚在 PHP 5.3.6 上对其进行了测试。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-07-05T07:52:03.330

刚刚尝试使用 5.3.3 进行此修复，但没有任何变化。谷歌搜索我发现这个网页[http://anothersysadmin.wordpress.com/2012/02/16/php-5-3-max_input_vars-and-big-forms/详细说明了](http://anothersysadmin.wordpress.com/2012/02/16/php-5-3-max_input_vars-and-big-forms/)**如果您的服务器使用 Suhosin 补丁**需要更改的其他设置Debian 下的 Apache 所做的。

该网站解释说：

> 因此，如果您想将此数字从默认数字 1000 增加到 3000，则必须在 php.ini 中放入以下行：
> 
> max_input_vars = 3000 suhosin.post.max_vars = 3000 suhosin.request.max_vars = 3000

我对其进行了测试（在 /etc/php5/apache2 和 /etc/php5/cli 中向 php.ini 添加了设置，并成功重新启动了 Apache），但 phpinfo 中仍然没有 max_input_vars 变量。

一些网站指出 PHP 5.3.9 是第一个进行此更改的 PHP 版本，所以我的错首先是 RTM 不正确，尽管我很想看到人们报告它在 5.3.3 以上的版本中工作但低于 5.3.9。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-02-20T17:10:40.810

现在是 2018 年。当我必须发送超过`max_input_vars`. 我想出了一个解决方案，像我这样的新手在更改`max_input_vars`参数后忘记重新启动 php fpm 服务。因为我只尝试重新启动`apache2`服务，而不是 php fpm

1.  取消注释代码`/etc/php/7.0/fpm/php.ini`并根据需要设置数字
    `max_input_vars = 4000`
2.  重新启动 php fpm 服务，因为我使用的是 php 7。因此，
    `sudo service php7.0-fpm restart`

希望对
测试`Debian Stretch`有帮助`php7.0`

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-04-30T08:47:07.400

您需要取消注释 php.ini 文件中的 max_input_vars 值并增加它（exp. 2000），也不要忘记重新启动服务器，这将有助于 99,99%。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-09-08T12:57:37.763

使用该指令可以降低使用哈希冲突的拒绝服务攻击的可能性。如果输入变量多于该指令指定的数量，则会发出 E_WARNING，并从请求中截断更多输入变量。

我可以建议不要扩展默认值 1000，并通过序列化请求或按块发送请求来扩展应用程序功能。否则，您可以将其扩展到所需的配置。

它肯定需要在 php.ini 中设置

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-02-20T06:07:21.807

请注意，您必须将其放在 Centos7 中的文件“.user.ini”中，而不是以前在 Centos6 中工作的“php.ini”中。您可以将“.user.ini”放在任何子目录中，以便仅影响该目录。

.user.ini ：

```
max_input_vars = 3000 
```

在 Centos7 和 PHP 5.6.33 上测试。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-05-02T09:54:56.310

php_value max_input_vars 6000

“将此行放在您网站的 .htaccess 文件中。”

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-01-21T06:46:46.697

只是在向 Wordpress 添加菜单项时遇到了同样的问题。我在 Ubuntu 18.04、PHP 7.0 上使用 Wordpress 4.9.9。我只是取消注释以下行并将其增加到 1500`/etc/php/7.0/apache2/php.ini`

```
; How many GET/POST/COOKIE input variables may be accepted<br>
max_input_vars = 1500 
```

然后使用以下内容来实现更改：

```
sudo apache2ctl configtest  #(if it does not return ok Apache will not start)
sudo service apache2 reload 
```

希望有帮助。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-08-28T07:28:24.680

“PHP 消息：PHP 警告：未知：输入变量超过 1000。增加限制更改 php.ini 中的 max_input_vars。

这个 php 配置参数 max_input_vars 不仅会影响您的 GET / POST / COOKIES 参数，它还会控制您的任何表单输入。

要设置或更改其值，请按照以下步骤操作。

1）通过在您的 php.ini 文件中查看现有设置/值来检查它使用定位 php.ini 文件

`<?php echo getinfo(); ?>`

找到下面的键：加载的配置文件：/etc/php/5.6/fpm/php.ini

2) 以可编辑模式打开 php.ini 文件并搜索 max_input_vars 这行可能会在您现有的默认设置中注释为默认值 1000 ，因此请删除；取消注释并使用合适的值编辑它，例如 2500。

3）保存文件并使用以下方法重新启动PHP的服务 `sudo service php5.6-fpm restart`

同样，您可以轻松更新任何其他类似的 PHP 配置。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-12-24T13:32:41.170

只是为了补充。在使用 mod_suphp 的共享服务器上，我遇到了同样的问题。

声明 4 max_input_vars（包括 suhosin）并没有解决它，它只是在 1000 vars 上不断截断（默认），并在 .htaccess 上声明“php_value max_input_vars 6000”引发错误 500。

解决的方法是在 .htaccess 中添加以下内容，它将 php.ini 文件递归地应用于该路径

```
suPHP_ConfigPath /home/myuser/public_html 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-03-29T22:10:24.777

新的 Cpanels 阻止查看 .htaccess 文件，或者如果您添加 .user.ini 您将无法看到它。但只要稍加修改，你就可以让它工作。编辑例如 wp-config.php 并在 URL 栏中将 wp-config.php 替换为 .htaccess 现在您可以粘贴值并保存它。 [在此处输入图像描述](https://i.stack.imgur.com/QgAWv.png)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-12-30T17:13:11.317

如果您正在使用类似**wodby** (`docker4php` 或`docker4drupal`) 或**lando**或试图找到“为什么 php.ini 不起作用”的答案（像我一样），这些工具正在使用它们自己的方式将配置传递给 php

[https://github.com/wodby/php#php-and-php-fpm-configuration](https://github.com/wodby/php#php-and-php-fpm-configuration)

我试图设置**max_input_vars**，在 wodby+docker-compose 你这样做

```
 php:
    image: wodby/drupal-php:$PHP_TAG
    container_name: "${PROJECT_NAME}_php"
    environment:
      PHP_MAX_INPUT_VARS: 9999 
```

* * *

## 回答 #14

> 赞同：-6
> 
> 时间：2012-04-24T18:47:10.477

是的，将它添加到 php.ini，重新启动 apache，它应该可以工作了。

如果您愿意，您可以即时测试它`ini_set("max_input_vars",100)`

# facebook - FB API：资源解释为脚本，但使用 MIME 类型 text/html 传输

> ID：10303721
> 
> 赞同：0
> 
> 时间：2012-04-24T18:18:48.063
> 
> 标签：facebook, facebook-graph-api, fbjs

我正在使用 FBJS 发布照片

```
FB.api('me/photos', 'post', {
      message: 'some message',
      url: 'some url'
     }, function(response){
            if (!response || response.error) {
                /*some error alert*/
            else {
                /*some success*/
            }
     }
 }); 
```

几乎，它工作正常，但偶尔会显示错误警报。我在控制台上看到，它说：资源解释为脚本，但使用 MIME 类型 text/html 传输

如何处理？我尝试了一些解决方案（例如 Content-Type、脚本类型...），但在某些时候它仍然无法正常工作:(

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T20:15:10.153

我遇到了这个问题，就我而言，原因是本地的 - “断开连接”Chrome插件，它阻止了对facebook的请求，我只是忘记了我已经安装了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:26:07.393

你有没有尝试过

标头：[ { "name":"Content-Type", "value":"text/javascript; charset=UTF-8"} ]

如果只是偶尔出现，也许您正在达到 API 调用限制并且它返回错误？检查数据是否正确，即使出现错误。使用[fiddler](http://fiddler2.com/fiddler2/) 获得更清晰的诊断结果。

# ruby - DataObjects::SQLError 对象的 .code 如何对应数据库发出的错误？

> ID：10303725
> 
> 赞同：1
> 
> 时间：2012-04-24T18:19:19.937
> 
> 标签：ruby, postgresql, datamapper

所以我正在做一些业务逻辑，并想运行一些类似的代码

`select id from blah where foo = 1234 for update nolock`

`blah`当相应的行被锁定时，此代码将引发 DataMapper::SQLError 。这是理想的行为；我想捕捉这个错误并用它来通知我的应用程序逻辑。但是我想重新抛出任何其他 SQL 错误，因为它们与我正在编程的情况不同，并且以相同的方式捕获它们是错误的。

返回的错误对象有一个字符串错误消息和一个数字代码 ( `50463045`)。似乎在数字代码上进行比较会很棒，但我不想`50463045`在不了解它是如何确定的情况下将常量嵌入我的代码中。值得注意的是，[Postgres 手册建议此状态的错误代码](http://www.postgresql.org/docs/9.0/static/errcodes-appendix.html)是`55P03`，这似乎不是一回事。我不知道我可以信任多少这个幻数，以及除了实验之外如何确定它，所以我不太习惯使用它。

错误代码是如何确定的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:55:01.333

互联网令人痛苦地无济于事，因为搜索有关 DataObjects SQL 错误的内容似乎主要返回与引发错误的其他软件有关的问题，而不是有关错误本身的信息......但是在找到正确的源代码并浏览源代码之后，我终于找到[了 do_postgres.c](https://github.com/datamapper/do/blob/master/do_postgres/ext/do_postgres/do_postgres.c)：

```
void do_postgres_raise_error(VALUE self, PGresult *result, VALUE query) {
  const char *message = PQresultErrorMessage(result);
  char *sql_state = PQresultErrorField(result, PG_DIAG_SQLSTATE);
  int postgres_errno = MAKE_SQLSTATE(sql_state[0], sql_state[1], sql_state[2], sql_state[3], sql_state[4]);

  PQclear(result);

  data_objects_raise_error(self, do_postgres_errors, postgres_errno, message, query, rb_str_new2(sql_state));
} 
```

注意 5 个字符的状态是如何传递给`MAKE_SQLSTATE`... 的，然后也传递给`data_objects_raise_error`它自己。我无法追踪 MAKE_SQLSTATE 的定义位置，以找出生成这个整数的疯狂操作，但看来我可以直接使用错误对象的`.sqlstate`属性，并设置我的条件`e.sqlstate == '55P03'`。

# android - 提高谷歌地图绘制长路径的性能

> ID：10303727
> 
> 赞同：2
> 
> 时间：2012-04-24T18:19:23.803
> 
> 标签：android, google-maps

这个问题与[另一个](https://stackoverflow.com/questions/7503848/improving-google-maps-performance)不同 所以，当它在地图上画很长的路时，我观察到了本地谷歌地图应用程序。

当缩放太远时，线条没有充满细节......我的意思是，当我们使用谷歌地图 api 并请求两个不同点之间的路径时，我们会收到整个坐标以在地图上绘制最详细的路径.

当我们改变缩放时，绘制的线条会收到更多细节。

问题是。有没有办法做类似原生谷歌地图应用程序的事情？我们可以要求更少的细节来使用 google maps api 在地图上绘制路径吗？我们可以在改变缩放时改善线条绘制的细节吗？

如果我的所有问题的答案都是“否”，那么你来看看另一个问题：我们如何在地图上绘制一条长路径而不会出现滞后问题？

我希望我已经清楚了，对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:28:03.443

谷歌地图可能是服务器生成的该路径的位图。每个缩放级别都有一个新的。

你可以做类似的事情，但这是相当多的工作。但是生成一次透明位图而不是每次视图需要刷新时都绘制路径应该更快。如果你只是跳过一些点，你也可以画一条细节减少的路径，但找到一个不跳过重要部分的算法是相当棘手的。

# c# - 在构造函数中传入类对象本身

> ID：10303729
> 
> 赞同：0
> 
> 时间：2012-04-24T18:19:26.533
> 
> 标签：c#, generics, log4net

```
class LogUtil : ILogUtility
{
    object _classtype;
    log4net.ILog log;

    public LogUtil(object classtype)
    {
        _classtype = classtype;
        log = log4net.LogManager.GetLogger(_classtype.GetType().FullName);
    }

    public void Log(LogType logtype, string message)
    {
        Console.WriteLine("logging coming from class {0} - message {1} " , _classtype.GetType().FullName, message);
    }
} 
```

从客户端类代码我调用上面的 LogUtil 类如下：

```
public class TestCode
{

    public void test()
    {
        LogUtil logutil = new LogUtil(this);

    }

} 
```

在 LogUtil 构造函数中，我想避免传入**对象**类类型。我想传入可以传递给 GetLogger 方法的客户端类对象。GetLogger 方法需要知道哪个类实例化了 LogUtil 类。

我现在拥有它的方式，我可以传入整数变量类类型，它会工作。我想避免它。

我怎么做？在这种情况下如何使用泛型方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:24:37.843

这是你想要的吗？

```
class LogUtil<T> : ILogUtility
{
    log4net.ILog log;

    public LogUtil()
    {
        log = log4net.LogManager.GetLogger(typeof(T).FullName);
    }

    public void Log(LogType logtype, string message)
    {
        Console.WriteLine("logging coming from class {0} - message {1}", typeof(T).FullName, message);
    }
} 
```

然后你可以像这样使用它：

```
LogUtil<TestCode> logutil = new LogUtil<TestCode>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:29:50.370

如果您使用方法级别的泛型，而不是类级别的泛型（或者更确切地说，除了在这种情况下），您可以让类型推断让您更轻松。

```
class LogUtil<T> : ILogUtility
{
    log4net.ILog log;

    public LogUtil<T>()
    {
        log = log4net.LogManager.GetLogger(typeof(T));
    }

    public void Log(LogType logtype, string message)
    {
        Console.WriteLine("logging coming from class {0} - message {1} " , typeof(T).FullName, message);
    }

    public static LogUtil<NewType> Create<NewType>(NewType instance)
    {
      return new LogUtil<NewType>();
    }
}

public class TestCode
{
    public void test()
    {
        var logutil = LogUtil.Create(this);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T18:32:26.527

我将其更改为：

```
class LogUtility : ILogUtility
{
    private Type classType;
    public LogUtil(object o)
        : this(o.GetType())
    {
    }

    public LogUtil(Type t)
    {
        this.classType = t;
    }

    public static LogUtil Create<T>()
    {
        return new LogUtil(typeof(T));
    }

    public void Log(string message)
    {
        Console.WriteLine("logging coming from class {0} - message {1} " , this.classType, message);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T18:25:58.607

请修改 LogUtil 类如下。

```
class LogUtil : ILogUtility
{
    Type _classtype;
    log4net.ILog log;

    public LogUtil(Type classtype)
    {
        _classtype = classtype;
        log = log4net.LogManager.GetLogger(_classtype.FullName);
    }

    public void Log(LogType logtype, string message)
    {
        Console.WriteLine("logging coming from class {0} - message {1} " , _classtype.FullName, message);
    }
} 
```

客户端代码应如下所示，

```
public class TestCode
{

    public void test()
    {
        LogUtil logutil = new LogUtil(GetType());

    }

} 
```

# javascript - 从数组中删除对象

> ID：10303730
> 
> 赞同：1
> 
> 时间：2012-04-24T18:19:26.547
> 
> 标签：javascript, jquery, arrays

我有一个具有以下结构的数组：

```
var y = [{id:12,count:10}, {id:23,count:89}, {id:21,count:100},] 
```

如何删除带有 id:23 的元素？

我不愿意使用在数组 Array.prototype.remove 上创建原型方法

任何指针表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T18:21:36.907

ES5 代码：

```
y = y.filter(function( obj ) {
    return obj.id !== 23;
}); 
```

^(ES5 被所有主流浏览器广泛支持。不过，您可能希望包含几个 Shim 来备份旧的浏览器)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T18:22:10.867

```
for (i in y) {
    if (y[i].id == 23) {
       y.splice(i, 1);
       break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:29:15.737

Denis Ermolin 的回答是一个选项，虽然可能会出现一些问题，但我建议如下：

```
for(var i=0;i<y.length;i++)
{
    if (y[i].hasOwnProperty('id') && y[i].id === 23)
    {
        delete(y[i]);
        break;
    }
} 
```

使用数组时，最好避免`for - in`循环，因为这将遍历`Array.prototype`, 所以`i`可能突然包含`length`，而不是索引号。

当您处理对象时，`for in`循环是一件很棒的事情，但同样：它循环遍历原型，这就是您最好使用该`hasOwnProperty`方法的原因。

其余的都很困难，我想……祝你好运

# build - ClearCase 中的签出是否会影响构建

> ID：10303733
> 
> 赞同：1
> 
> 时间：2012-04-24T18:19:36.970
> 
> 标签：build, clearcase, forge

如果在 ClearCase 中签出文件；它会使用早期版本并且仍然会构建，这是正确的吗？我在想他们有一个结帐是为了解决构建问题，并且由于结帐而构建失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:38:16.090

视图的配置规范通常以：

```
element * CHECKEDOUT 
```

这意味着，是的，无论其他选择规则是什么，您的视图都会选择当前文件。

我建议在开始构建之前 检查结帐中的文件，但也要检查被劫持的文件（在没有签出的情况下在本地修改，用于快照视图，甚至是[用于动态视图的黯然失色的文件）。](https://stackoverflow.com/questions/7798915/clearcase-can-i-hijack-a-file-in-dynamic-view/7799307#7799307)

[还要检查任何其他“私有”文件](https://stackoverflow.com/questions/2099057/how-to-find-elements-which-are-not-present-in-the-clearcase-recursively/2099195#2099195)（最初未在视图中显示和选择），因为它们也可以通过它们的存在来影响构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:23:21.777

据我所知，使用当前文件清除大小写，因此如果文件在视图中签出并且您构建此视图，它将采用签出的文件

但是，请注意，如果您取消签出并且未使用 cmake，则可能会错过此更改，因为取消签出操作后文件的时间戳较旧

# list - CLISP ：检查两个元素是否在列表中依次排列

> ID：10303736
> 
> 赞同：1
> 
> 时间：2012-04-24T18:20:00.700
> 
> 标签：list, lisp

我有一个清单

```
 L=(1 j 3 k 4 h 5 n 6 w) 
```

我需要做一个函数验证，它将验证第一个原子是否在第二个原子之前。我想验证这一点：

```
> Verify(3 k) 
```

结果应该返回

```
> T 
```

// 因为原子'3'在原子'k'之前

在这种情况下：

```
>Verify(h 4) 
```

结果应该返回

```
> NIL 
```

// 因为原子'h'在原子'4'之后

我必须检查每个元素的位置并比较位置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:52:03.417

你用的是什么 Lisp 方言？以下是有关如何得出解决方案的一些提示，请填空：

```
(define (verify lst a b)
        ; what happens if there's only one element left in the list?
  (cond ((null? (cdr lst)) <???>)
        ; how do we check if the current element is equal to the `a` parameter
        ; and the next element is equal to the `b` parameter?
        (<???> T)
        ; how do we continue traversing the rest of the list?
        (else (verify <???> a b))))

;;; tests

(define lst '(1 j 3 k 4 h 5 n 6 w))

(verify lst 3 'k)
> T
(verify lst 'h '4)
> F 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T01:30:05.960

这是 Common Lisp 中的单行代码：

```
(defun verify (list a b)
  (member b (member a list))) 
```

请注意，它不返回 T 或 NIL，而是一个“广义布尔值”（除`nil`true 之外的任何值）。这是 Lisp 中的一个基本概念：

[http://clhs.lisp.se/Body/26_glo_g.htm#generalized_boolean](http://clhs.lisp.se/Body/26_glo_g.htm#generalized_boolean)

这也假设“之前”意味着“之前的任何地方”。你的作业问题看起来可能是关于“就在之前”。它应该很容易修改。

# java - 用python-javaobj在纯python中实现java反序列化？

> ID：10303739
> 
> 赞同：1
> 
> 时间：2012-04-24T18:20:13.397
> 
> 标签：java, python, serialization, sqlite, db4o

我正在对 android 应用程序进行逆向工程。并且需要反序列化在android com.db4o 类中序列化的sqllite3 blob 数据。

在代码谷歌网站上找到了 python-javaobj 项目。[http://code.google.com/p/python-javaobj/](http://code.google.com/p/python-javaobj/)

但实施有点棘手。

# 方法一、在python中用sqllite访问。

```
import sqlite3
conn=sqlite3.connect('sqlite3.db')
c = conn.cursor()
c.execute('select binaryfield from sqltable')
blob=c.fetchone()
blobstring=blob[0]
import javaobj
marshaller = javaobj.loads(blobstring) 
```

错误信息

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.6/site-packages/javaobj-0.1.0-py2.6.egg/javaobj.py", line 44,         in loads
  File "/usr/lib/python2.6/site-packages/javaobj-0.1.0-py2.6.egg/javaobj.py", line 155, in __init__
  File "/usr/lib/python2.6/site-packages/javaobj-0.1.0-py2.6.egg/javaobj.py", line 178, in _readStreamHeader
IOError: The stream is not java serialized object. Invalid stream header: 00000005 
```

我想知道是否还有其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:42:02.240

最简单的方法，在你没有提到你的问题的上下文的情况下：

*   在 Java 中创建帮助脚本

*   脚本读取序列化对象（注意，您需要 Java 类代码）

*   使用 JSON 等通用格式导出数据

# winforms - Arial Black Italic 字体导致 WinForms 应用程序崩溃

> ID：10303741
> 
> 赞同：3
> 
> 时间：2012-04-24T18:20:29.497
> 
> 标签：winforms, fonts

我维护的一个 WinForms 应用程序在一小部分用户机器上崩溃（迄今为止可能大约 4 台）。对于这些用户，应用程序每次都会崩溃，并且在显示第一个对话框之前就崩溃了。

**例外**

```
Source:
System.Drawing

Message:
Font 'Arial Black' does not support style 'Bold'.

Stack Trace:
at System.Drawing.Font.CreateNativeFont()
at System.Drawing.Font.Initialize(FontFamily family, Single emSize, FontStyle style, GraphicsUnit unit, Byte gdiCharSet, Boolean gdiVerticalFont)
at System.Drawing.Font.Initialize(String familyName, Single emSize, FontStyle style, GraphicsUnit unit, Byte gdiCharSet, Boolean gdiVerticalFont)
at System.Drawing.Font..ctor(String familyName, Single emSize, FontStyle style, GraphicsUnit unit, Byte gdiCharSet) 
```

应用程序使用的字体之一是 Arial Black：

```
this.label3.Font = new System.Drawing.Font("Arial Black", 8.25F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(0))); 
```

第一次发生这种崩溃时，我注意到用户计算机上有一种字体，但不是我的。它被称为“Arial Black Italic”，日期为 1997 年。这是文件名：

> ARBLI___.TTF

![enter image description here](../Images/6f1cdd41ef1332dc765f807d9aef067f.png)

*用户有 Windows XP。*

我删除了字体，之后应用程序运行良好。正如我所提到的，在过去的 22 个月中，这次崩溃发生在大约 3 个其他用户身上。每次从用户计算机中删除“Arial Black Italic”字体似乎都能解决问题。

*The most recent time, the user had Windows 7 and the font was date much newer, yet the aforementioned protocol still resolved the problem.*

**At this point, I am trying to figure out the root cause of this crash bug and how to prevent it.**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:25:07.537

尝试这样的事情。

```
using System.Drawing;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            // Create regular font first.
            // Depending on the user's system, this font may already be bold.
            //

            var theFont = new System.Drawing.Font(
                "Arial Black",
                8.25F,
                System.Drawing.FontStyle.Regular,
                System.Drawing.GraphicsUnit.Point,
                ( ( byte )( 0 ) )
                );

            // If font is not bold, then try to create it.
            //

            if ( ( null != theFont ) && !theFont.Bold )
            {
                if ( theFont.FontFamily.IsStyleAvailable( FontStyle.Bold ) )
                {
                    theFont = new Font( theFont, FontStyle.Bold );
                }
            }

            // Now use the font.
            //

            this.label3.Font = theFont;
        }
    }
} 
```

# mysql - 有没有更好的方法来查找表中某些东西的 ID，即使它不存在 [mysql]

> ID：10303743
> 
> 赞同：0
> 
> 时间：2012-04-24T18:20:37.627
> 
> 标签：mysql, sql

在写入规范化数据库时，我经常使用类似这样的逻辑。

在伪代码中：

```
is the thing I want in the table?:
    yes - get it's ID
else
    no - insert it, then get it's ID 
```

在 PHP 中：

```
// is the useragent in the useragent table?
// if so, find the id, else, insert and find.
$useragentResult = $mysqli->query("SELECT id FROM useragent WHERE name = '".$useragent."' LIMIT 1");
if ($useragentResult->num_rows == 0) {
    // It is not in there
    $mysqli->query("INSERT INTO useragent (name) VALUES ('".$useragent."')");

    $resultID_object = $mysqli->query("SELECT LAST_INSERT_ID() as id");
    $row = $resultID_object->fetch_object();
    $useragentID = $row->id;
} else {
    // It is, so find it and set it
    $useragentData = $useragentResult->fetch_object();
    $useragentID = $useragentData->id;
} 
```

这感觉很难看（不仅仅是因为 PHP！），而且很常见，也许有更好的方法。

这样做的真正方法是什么，或者这是最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:32:41.363

使用`INSERT ... ON DUPLICATE KEY UPDATE`.

从[MySQL 5.5 开始](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)：

> 如果表包含一`AUTO_INCREMENT`列并`INSERT ... ON DUPLICATE KEY UPDATE`插入或更新一行，则该`LAST_INSERT_ID()`函数返回该`AUTO_INCREMENT`值。

或在[早期版本](http://dev.mysql.com/doc/refman/4.1/en/insert-on-duplicate.html)中：

> 如果表包含一`AUTO_INCREMENT`列并`INSERT ... ON DUPLICATE KEY UPDATE`插入一行，则该`LAST_INSERT_ID()`函数返回该`AUTO_INCREMENT`值。如果语句改为更新一行，`LAST_INSERT_ID()`则没有意义。但是，您可以使用`LAST_INSERT_ID(expr)`. 假设那`id`是`AUTO_INCREMENT`列。要使`LAST_INSERT_ID()`更新有意义，请按如下方式插入行：
> 
> ```
> INSERT INTO table (a,b,c) VALUES (1,2,3)
>   ON DUPLICATE KEY UPDATE id=LAST_INSERT_ID(id), c=3; 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:31:43.003

仅当您使用一些基本的 PHP 而没有充分利用该语言时，它才是丑陋的。对于像这样的操作，面向对象编程非常方便。将您的数据库访问重写为类会产生更像这样的代码：

```
$userAgent = new UserAgent();
$userAgent->name = $useragent;
$results = $userAgent->find();
if (empty($results)) {
    $userAgent->save();
}
$userAgentId = $userAgent->id; 
```

在该示例中，您的 UserAgent 类的 find 方法在后台执行所有 SQL 工作。如果 find 返回空，我们调用 save 方法，该方法根据填充的属性执行插入并自动填充 id 属性。所以现在在 if 语句之后，我知道 id 是由成功的 find() 或 save() 填充的。

# php - 如何在 WordPress 的子页面中查询父页面的自定义字段？

> ID：10303747
> 
> 赞同：0
> 
> 时间：2012-04-24T18:20:47.873
> 
> 标签：php, wordpress

在子页面上，我想查询父页面的一些自定义字段以及显示父页面的所有子页面？（理想情况下，在子页面列表中，我应该能够识别它当前位于哪个子页面）

这是我正在使用的代码

```
<?php if($post->post_parent): 
$parent = get_post($post->post_parent);
?>
<h2><?=$parent->address;?></h2>
<? parent->get('address');?>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:50:57.657

这应该可以帮助您入门：

```
<?php
global $post;
if($post->post_parent): 
$parent = get_page($post->post_parent);
?>
<h2><?php echo get_post_meta($post->post_parent, 'address', true); ?></h2>
<?php 
$args = array(
    'child_of'     => $post->post_parent,
    'title_li'     => '',
    'echo'         => false,
    'sort_column'  => 'menu_order, post_title',
);
$children = wp_list_pages($args); //RETURNS HTML OF ALL CHILD PAGES
endif;
?> 
```

我猜你的意思是在你可以查询的父页面中有一个名为“地址”的自定义字段。否则，请澄清“地址”的含义（如果它是自定义元字段、主题选项或其他内容）。

**警告**： $children 变量只会获取其匹配父级的后代。不是它的顶级祖先。这意味着如果当前页面是孙页面或曾孙页面，则父页面将是另一个页面的子页面。

如果您想获取顶级祖先，我已经编写了一个递归执行此操作的函数，但它非常难看。我建议不要走那条路。

**编辑：**使用 get_page()，而不是 get_post()。帖子不是分层的。

# java - 在 Java 中将表格转换为 PDF

> ID：10303748
> 
> 赞同：0
> 
> 时间：2012-04-24T18:21:01.947
> 
> 标签：java, image, swing, pdf, jtable

> **可能重复：**
> [JTable 到 PDF 转换器](https://stackoverflow.com/questions/10222354/jtable-to-pdf-converter)

我正在尝试将当前表格的内容保存为 pdf。我的问题是，当我保存输出时，只保存屏幕上当前显示的内容。如果一行不在滚动窗格的当前视图中，它将不会出现在 pdf 中。我正在使用 itextpdf-5.2.1.jar。这是我的代码。

```
private JPanel contentPane;
    private JTable table_1;
    private JTable table;
    private DefaultTableModel aModel;
    private JScrollPane pane;
    private String currentTable;
    private Edit edit;

public void createPdf() {
        Document document = new Document();
        try {
            PdfWriter writer;

            writer = PdfWriter.getInstance(document, new FileOutputStream(
                    "mytable.pdf"));
            document.open();
            PdfContentByte cb = writer.getDirectContent();
            PdfTemplate tp = cb.createTemplate(500, 500);
            Graphics2D g2;

            g2 = tp.createGraphicsShapes(500, 500);
            pane.printAll(g2);
            g2.dispose();
            cb.addTemplate(tp, 30, 300);
        } catch (Exception e) {
            System.err.println(e.getMessage());
        }
        document.close();
} 
```

# java - 避免让 JPA 自动持久化对象

> ID：10303757
> 
> 赞同：3
> 
> 时间：2012-04-24T18:21:25.427
> 
> 标签：java, spring, jpa

有什么办法可以避免让 JPA 自动持久化对象？

我需要使用第三方 API，我必须从/向它拉/推数据。我有一个负责接口 API 的类，我有一个这样的方法：

```
public User pullUser(int userId) {
    Map<String,String> userData = getUserDataFromApi(userId);
    return new UserJpa(userId, userData.get("name"));
} 
```

类的`UserJpa`样子：

```
@Entity
@Table
public class UserJpa implements User
{
    @Id
    @Column(name = "id", nullable = false)
    private int id;

    @Column(name = "name", nullable = false, length = 20)
    private String name;

    public UserJpa() {
    }

    public UserJpa(int id, String name) {
        this.id = id;
        this.name = name;
    }
} 
```

当我调用方法（例如`pullUser(1)`）时，返回的用户会自动存储在数据库中。我不希望这种情况发生，有没有办法避免它？我知道一个解决方案可能是创建一个实现`User`并在方法中返回此类的实例的新类，这`pullUser()`是一个好习惯吗？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T18:41:15.940

新创建的 UserJpa 实例不会保留在 pullUser 中。我还假设 getUserDataFromApi 中没有一些奇怪的实现实际上为相同的 id 持久化了一些东西。

在您的情况下，实体经理对 UserJPA 的新实例一无所知。通常实体通过合并/持久调用或作为级联合并/持久操作的结果进行持久化。在代码库的其他地方检查这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:38:45.810

在 JPA 中持久化新实体的唯一方法是显式调用`EntityManager`'s`persist()`或`merge()`方法。在您的代码中查找对其中任何一个的调用，这就是持久操作发生的地方，然后重构代码以在其他地方执行持久性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:41:21.527

通常 JPA 对象是托管对象，这些对象在事务完成时将它们的更改反映到数据库中，然后在一级缓存上，显然这些对象首先需要成为托管对象。

我真的认为最佳实践是使用 DTO 对象来处理数据传输，然后将实体仅用于持久性目的，这样它会更有凝聚力和更低的耦合，这不是它不应该有鼻子的对象。

希望能帮助到你。

# iphone - 整个应用程序中的 CustomViewController

> ID：10303759
> 
> 赞同：0
> 
> 时间：2012-04-24T18:21:35.533
> 
> 标签：iphone, objective-c, ios

我想在我的应用程序的每个屏幕上显示一个自定义栏，并带有可用的按钮。我在 init 方法中将 CustomViewController 添加到我的类中，并且一切正常，除非我分析我的应用程序时出现潜在的内存泄漏。

当我释放 [customViewController release] 时，CustomViewController 上的按钮将不再起作用。在没有内存泄漏的情况下实施此解决方案的正确方法是什么。

```
#import "CustomViewController.h"

@implementation CustomViewController

- (IBAction)doSomething:(id)sender
{
    // Perform an action
}

@end 
```

我创建 CustomViewController 的 ViewController：

```
- (id)initWithNibName:(NSString *)nibNameOrNil 
               bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        CustomViewController *customViewController = [[CustomViewController alloc] initWithNibName:@"CustomViewController" bundle:nil];
        UIView *bar = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 30)];
        [bar addSubview:customViewController.view];
        [self.view addSubview:bar];
        [bar release];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T02:33:26.950

正确的解决方案是创建一个容器视图，并将我的自定义任务栏放在该视图内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:54:51.680

您似乎正在以错误的方式实施此操作。您实际需要做的是创建 CustomViewController 并将您的工具栏添加到该视图。然后，您的应用程序中的每个其他视图控制器都应该成为 CustomViewController 的子类。

如果自定义导航栏是您使用此超类的唯一用途，我建议您直接在应用程序使用的 UINavigationController 上设置该栏的样式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T18:27:10.667

你说你的酒吧有按钮？当它本身被释放时它会释放那些按钮吗？检查它的 viewDidLoad 函数。

# c++ - 0 + 0 + 0... + 0 != 0

> ID：10303762
> 
> 赞同：11
> 
> 时间：2012-04-24T18:21:50.243
> 
> 标签：c++, floating-point

我有一个程序在图中查找路径并输出累积权重。图中的所有边都具有 0 到 100 的单独权重，以浮点数形式显示，最多保留 2 个小数位。

在 Windows/Visual Studio 2010 上，对于由权重为 0 的边组成的特定路径，它输出正确的总权重 0。但是在 Linux/GCC 上，程序说路径的权重为`2.35503e-38`. 我有很多关于由浮点数引起的疯狂错误的经验，但是 0 + 0 什么时候会等于 0 以外的任何值？

我能想到的唯一原因是程序确实将一些权重视为整数并使用隐式强制将它们添加到总数中。但是 0 + 0.0f 仍然等于 0.0f！作为快速修复，当小于 0.00001 时，我将总数减少到 0，这足以满足我的需求，目前。但是是什么伏都教导致了这种情况？

**注意：**我 100% 确信图中的权重都没有超出我提到的范围，并且此特定路径中的所有权重都为 0。

**编辑：**详细说明，我尝试从文件中读取权重并在代码中手动将它们设置为等于 0.0f 除了将它们添加到总数之外，没有对它们执行其他操作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T18:28:45.890

因为它是一个 IEEE 浮点数，并不完全等于零。

[http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm](http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T18:33:35.173

> [...] 以最多 2 位小数的浮点数形式。

没有*最多 2 位小数*的浮点数。浮点数几乎总是表示为二进制浮点数（小数二进制尾数和整数指数）。如此多（大多数）具有 2 位小数的数字无法准确表示。

例如，`0.20f`可能看起来是一个无辜的圆形分数，但

```
printf("%.40f\n", 0.20f); 
```

将打印：0.2000000029802322387695312500000000000000。

看，它没有 2 位小数，它有 26 位！！！

自然，对于大多数实际用途，差异可以忽略不计。但是，如果您进行一些计算，您最终可能会增加舍入误差并使其可见，尤其是在 0 左右。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T18:32:55.967

可能包含“0.0f”值的浮点数实际上不是 0.0f（位表示 0x00000000），而是一个非常非常小的数字，其计算结果约为 0.0。由于 IEEE754 规范定义浮点表示的方式，例如，如果您有一个非常小的尾数和一个 0 指数，虽然它不等于绝对 0，但它会四舍五入为 0。但是，如果将这些数字加在一起足够多次，非常小的数量将累积成一个最终将变为非零的值。

这是一个示例，它给出了 0 非零的错觉：

```
float f = 0.1f / 1000000000;
printf("%f, %08x\n", f, *(unsigned int *)&f);
float f2 = f * 10000;
printf("%f, %08x\n", f2, *(unsigned int *)&f2); 
```

但是，如果您将文字分配给变量并添加它们，则编译器可能没有在内存中`0`转换。`0x0`如果是这样，并且这种情况仍在发生，那么您的 CPU 硬件也可能存在与在执行 ALU 操作时将 0 变为非零相关的错误，这可能会因验证工作而发出吱吱声。

但是，最好记住 IEEE 浮点只是一个近似值，而不是任何特定浮点值的精确表示。所以任何浮点运算都必然会有一定的误差。

# java - Java中的加密和解密

> ID：10303767
> 
> 赞同：16
> 
> 时间：2012-04-24T18:22:14.627
> 
> 标签：java, encryption

我想将加密密码存储在 Java 文件中。我看到了一个使用**javax.crypto**的解决方案，但问题是密钥是动态生成的，而且是随机的。

然后在运行时在 Java 程序中获取并解密此密码。鉴于我要将已经加密的密码存储在文件中 - 我想在解密时获得正确的文本。

有没有办法告诉 javax.crypto 方法：

```
key = KeyGenerator.getInstance(algorithm).generateKey() 
```

这可以用我自己基于某个私钥生成的密钥替换吗？

谁能指出一些有关如何执行此操作的资源？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-25T13:17:31.020

这是我正在寻找的使用**javax.crypto库和 apache commons 编解码器库在 Base64 中进行编码和解码的解决方案：**

```
import java.security.spec.KeySpec;
import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.DESedeKeySpec;
import org.apache.commons.codec.binary.Base64;

public class TrippleDes {

    private static final String UNICODE_FORMAT = "UTF8";
    public static final String DESEDE_ENCRYPTION_SCHEME = "DESede";
    private KeySpec ks;
    private SecretKeyFactory skf;
    private Cipher cipher;
    byte[] arrayBytes;
    private String myEncryptionKey;
    private String myEncryptionScheme;
    SecretKey key;

    public TrippleDes() throws Exception {
        myEncryptionKey = "ThisIsSpartaThisIsSparta";
        myEncryptionScheme = DESEDE_ENCRYPTION_SCHEME;
        arrayBytes = myEncryptionKey.getBytes(UNICODE_FORMAT);
        ks = new DESedeKeySpec(arrayBytes);
        skf = SecretKeyFactory.getInstance(myEncryptionScheme);
        cipher = Cipher.getInstance(myEncryptionScheme);
        key = skf.generateSecret(ks);
    }

    public String encrypt(String unencryptedString) {
        String encryptedString = null;
        try {
            cipher.init(Cipher.ENCRYPT_MODE, key);
            byte[] plainText = unencryptedString.getBytes(UNICODE_FORMAT);
            byte[] encryptedText = cipher.doFinal(plainText);
            encryptedString = new String(Base64.encodeBase64(encryptedText));
        } catch (Exception e) {
            e.printStackTrace();
        }
        return encryptedString;
    }

    public String decrypt(String encryptedString) {
        String decryptedText=null;
        try {
            cipher.init(Cipher.DECRYPT_MODE, key);
            byte[] encryptedText = Base64.decodeBase64(encryptedString);
            byte[] plainText = cipher.doFinal(encryptedText);
            decryptedText= new String(plainText);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return decryptedText;
    }

    public static void main(String args []) throws Exception
    {
        TrippleDes td= new TrippleDes();

        String target="imparator";
        String encrypted=td.encrypt(target);
        String decrypted=td.decrypt(encrypted);

        System.out.println("String To Encrypt: "+ target);
        System.out.println("Encrypted String:" + encrypted);
        System.out.println("Decrypted String:" + decrypted);

    }

} 
```

运行上述程序会产生以下输出：

```
String To Encrypt: imparator
Encrypted String:FdBNaYWfjpWN9eYghMpbRA==
Decrypted String:imparator 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-12-04T22:32:25.113

**对称密钥加密**：对称密钥使用相同的密钥进行加密和解密。这种类型的密码学的主要挑战是在发送者和接收者两方之间交换密钥。

**示例：** 以下示例使用对称密钥进行加密和解密算法，该算法可作为 Sun 的 JCE（**J** **ava** Cryptography **Extension**）的一部分。Sun JCE 有两层，加密 API 层和提供者层。

 ****DES**（**数据****加密**标准）是一种**流行**的对称密钥算法。目前 DES 已经过时并且被认为是不安全的。**三重 DES**和更强的*DES*变体。它是一种对称密钥分组密码。还有其他算法**，****如****Blowfish**、**Twofish**和**AES**（高级**加密**标准）。AES 是 DES 上的最新加密标准。

 *******脚步 ：

1.  **添加安全提供程序：**我们使用 JDK 提供的 SunJCE 提供程序。
2.  **生成密钥：**使用`KeyGenerator`和算法生成密钥。我们正在使用`DESede`（[DESede](https://stackoverflow.com/a/17281431/1697099)是 3DES 实现的描述性名称：DESede = DES-Encrypt-Decrypt-Encrypt = Triple DES）。
3.  **编码文本：**为了跨平台的一致性，使用 . 将纯文本编码为字节`UTF-8 encoding`。
4.  **加密文本：**用实例化`Cipher`，`ENCRYPT_MODE`使用密钥并加密字节。
5.  **解密文本：**用实例化`Cipher`，`DECRYPT_MODE`使用相同的密钥并解密字节。

以上给出的所有步骤和概念都是相同的，我们只是替换算法。

```
import java.util.Base64;    
import javax.crypto.Cipher;  
import javax.crypto.KeyGenerator;   
import javax.crypto.SecretKey;  
public class EncryptionDecryptionAES {  
    static Cipher cipher;  

    public static void main(String[] args) throws Exception {
        /* 
         create key 
         If we need to generate a new key use a KeyGenerator
         If we have existing plaintext key use a SecretKeyFactory
        */ 
        KeyGenerator keyGenerator = KeyGenerator.getInstance("AES");
        keyGenerator.init(128); // block size is 128bits
        SecretKey secretKey = keyGenerator.generateKey();

        /*
          Cipher Info
          Algorithm : for the encryption of electronic data
          mode of operation : to avoid repeated blocks encrypt to the same values.
          padding: ensuring messages are the proper length necessary for certain ciphers 
          mode/padding are not used with stream cyphers.  
         */
        cipher = Cipher.getInstance("AES"); //SunJCE provider AES algorithm, mode(optional) and padding schema(optional)  

        String plainText = "AES Symmetric Encryption Decryption";
        System.out.println("Plain Text Before Encryption: " + plainText);

        String encryptedText = encrypt(plainText, secretKey);
        System.out.println("Encrypted Text After Encryption: " + encryptedText);

        String decryptedText = decrypt(encryptedText, secretKey);
        System.out.println("Decrypted Text After Decryption: " + decryptedText);
    }

    public static String encrypt(String plainText, SecretKey secretKey)
            throws Exception {
        byte[] plainTextByte = plainText.getBytes();
        cipher.init(Cipher.ENCRYPT_MODE, secretKey);
        byte[] encryptedByte = cipher.doFinal(plainTextByte);
        Base64.Encoder encoder = Base64.getEncoder();
        String encryptedText = encoder.encodeToString(encryptedByte);
        return encryptedText;
    }

    public static String decrypt(String encryptedText, SecretKey secretKey)
            throws Exception {
        Base64.Decoder decoder = Base64.getDecoder();
        byte[] encryptedTextByte = decoder.decode(encryptedText);
        cipher.init(Cipher.DECRYPT_MODE, secretKey);
        byte[] decryptedByte = cipher.doFinal(encryptedTextByte);
        String decryptedText = new String(decryptedByte);
        return decryptedText;
    }
} 
```

输出：

```
Plain Text Before Encryption: AES Symmetric Encryption Decryption
Encrypted Text After Encryption: sY6vkQrWRg0fvRzbqSAYxepeBIXg4AySj7Xh3x4vDv8TBTkNiTfca7wW/dxiMMJl
Decrypted Text After Decryption: AES Symmetric Encryption Decryption 
```

[来源](http://javapapers.com/java/java-symmetric-aes-encryption-decryption-using-jce/)

**示例：**密码有两种模式，它们是加密和解密。我们必须在设置模式后每次开始加密或解密文本。 [![在此处输入图像描述](../Images/89262fa1b854af6da96e841dc0dd897c.png)](https://i.stack.imgur.com/lj3vU.jpg)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-24T18:30:37.320

`KeyGenerator`用于*生成*密钥

你可能想检查`KeySpec`,`SecretKey`和`SecretKeyFactory`类

[http://docs.oracle.com/javase/1.5.0/docs/api/javax/crypto/spec/package-summary.html](http://docs.oracle.com/javase/1.5.0/docs/api/javax/crypto/spec/package-summary.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T18:33:45.900

这是我几个月前制作的示例 课程加密和解密数据

```
import java.security.*;
import java.security.spec.*;

import java.io.*;
import javax.crypto.*;
import javax.crypto.spec.*;

public class TestEncryptDecrypt {

private final String ALGO = "DES";
private final String MODE = "ECB";
private final String PADDING = "PKCS5Padding";
private static int mode = 0;

public static void main(String args[]) {
    TestEncryptDecrypt me = new TestEncryptDecrypt();
    if(args.length == 0) mode = 2;
    else mode = Integer.parseInt(args[0]);
    switch (mode) {
    case 0:
        me.encrypt();
        break;
    case 1:
        me.decrypt();
        break;
    default:
        me.encrypt();
        me.decrypt();
    }
}

public void encrypt() {
try {
    System.out.println("Start encryption ...");

    /* Get Input Data */
    String input = getInputData();
    System.out.println("Input data : "+input);

    /* Create Secret Key */
    KeyGenerator keyGen = KeyGenerator.getInstance(ALGO);
    SecureRandom random = SecureRandom.getInstance("SHA1PRNG", "SUN");
    keyGen.init(56,random);
      Key sharedKey = keyGen.generateKey();

    /* Create the Cipher and init it with the secret key */
    Cipher c = Cipher.getInstance(ALGO+"/"+MODE+"/"+PADDING);
    //System.out.println("\n" + c.getProvider().getInfo());
    c.init(Cipher.ENCRYPT_MODE,sharedKey);
    byte[] ciphertext = c.doFinal(input.getBytes());
    System.out.println("Input Encrypted : "+new String(ciphertext,"UTF8"));

    /* Save key to a file */
    save(sharedKey.getEncoded(),"shared.key");

    /* Save encrypted data to a file */
    save(ciphertext,"encrypted.txt");
} catch (Exception e) {
    e.printStackTrace();
}   
}

public void decrypt() {
try {
    System.out.println("Start decryption ...");

    /* Get encoded shared key from file*/
    byte[] encoded = load("shared.key");
      SecretKeyFactory kf = SecretKeyFactory.getInstance(ALGO);
    KeySpec ks = new DESKeySpec(encoded);
    SecretKey ky = kf.generateSecret(ks);

    /* Get encoded data */
    byte[] ciphertext = load("encrypted.txt");
    System.out.println("Encoded data = " + new String(ciphertext,"UTF8"));

    /* Create a Cipher object and initialize it with the secret key */
    Cipher c = Cipher.getInstance(ALGO+"/"+MODE+"/"+PADDING);
    c.init(Cipher.DECRYPT_MODE,ky);

    /* Update and decrypt */
    byte[] plainText = c.doFinal(ciphertext);
    System.out.println("Plain Text : "+new String(plainText,"UTF8"));
} catch (Exception e) {
    e.printStackTrace();
}   
}

private String getInputData() {
    String id = "owner.id=...";
    String name = "owner.name=...";
    String contact = "owner.contact=...";
    String tel = "owner.tel=...";
    final String rc = System.getProperty("line.separator");
    StringBuffer buf = new StringBuffer();
    buf.append(id);
    buf.append(rc);
    buf.append(name);
    buf.append(rc);
    buf.append(contact);
    buf.append(rc);
    buf.append(tel);
    return buf.toString();
}

private void save(byte[] buf, String file) throws IOException {
      FileOutputStream fos = new FileOutputStream(file);
      fos.write(buf);
      fos.close();
}

private byte[] load(String file) throws FileNotFoundException, IOException {
    FileInputStream fis = new FileInputStream(file);
    byte[] buf = new byte[fis.available()];
    fis.read(buf);
    fis.close();
    return buf;
}
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-08-16T05:26:45.437

您可能想要使用非常容易使用的[jasypt库（Java 简化加密）。](http://www.jasypt.org)（另外，建议检查加密密码而不是解密加密密码）

要使用 jasypt，如果您使用的是 maven，您可以将 jasypt 包含到您的 pom.xml 文件中，如下所示：

```
<dependency>
    <groupId>org.jasypt</groupId>
    <artifactId>jasypt</artifactId>
    <version>1.9.3</version>
    <scope>compile</scope>
</dependency> 
```

然后加密密码，你可以使用 StrongPasswordEncryptor

```
public static String encryptPassword(String inputPassword) {
    StrongPasswordEncryptor encryptor = new StrongPasswordEncryptor();
    return encryptor.encryptPassword(inputPassword);
} 
```

**注意：** *每次调用 encryptPassword 时加密的密码都不一样，但是 checkPassword 方法仍然可以检查未加密的密码是否仍然与每个加密的密码匹配。*

要检查未加密的密码和加密的密码，可以使用 checkPassword 方法：

```
public static boolean checkPassword(String inputPassword, String encryptedStoredPassword) {
    StrongPasswordEncryptor encryptor = new StrongPasswordEncryptor();
    return encryptor.checkPassword(inputPassword, encryptedStoredPassword);
} 
```

下面的页面提供了有关创建安全加密密码所涉及的复杂性的详细信息。

[http://www.jasypt.org/howtoencryptuserpasswords.html](http://www.jasypt.org/howtoencryptuserpasswords.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-01T04:43:04.090

```
public class GenerateEncryptedPassword {

    public static void main(String[] args){

        Scanner sc= new Scanner(System.in);    
        System.out.println("Please enter the password that needs to be encrypted :");
        String input = sc.next();

        try {
            String encryptedPassword= AESencrp.encrypt(input);
            System.out.println("Encrypted password generated is :"+encryptedPassword);
        } catch (Exception ex) {
            Logger.getLogger(GenerateEncryptedPassword.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-10T07:55:41.197

如果您使用静态密钥，加密和解密总是给出相同的结果；

```
public static final String CRYPTOR_KEY = "your static key here";
byte[] keyByte = Base64.getDecoder().decode(CRYPTOR_KEY);
key = new SecretKeySpec(keyByte, "AES"); 
```*********

# c# - 从纯文本生成 HTML

> ID：10303768
> 
> 赞同：0
> 
> 时间：2012-04-24T18:22:26.460
> 
> 标签：c#, html, vb.net, richtextbox, rich-text-editor

我有一个桌面应用程序在只读 RichTextbox 组件中显示文本。根据之前执行的文本分析，需要突出显示文本中的某些单词。

现在我需要创建这个应用程序的 Web 版本。

我知道有[几个富文本编辑器](http://www.queness.com/post/212/10-jquery-and-non-jquery-javascript-rich-text-editors)可用，但我想知道是否有一个库或一种简单的方法可以从纯文本和要突出显示的单词列表生成正确标记的 HTML 字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:50:41.183

您可以使用 TinyMCE。这是免费的基于 javascript 的网络范围文本编辑器。

[TinyMCE 到达文本编辑器](http://www.tinymce.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:29:44.353

在这里，您可以免费扩展 RichTextbox 来满足您的需求：

[http://www.codeproject.com/Articles/12172/An-extended-RichTextBox-to-save-and-load-quot-HTML](http://www.codeproject.com/Articles/12172/An-extended-RichTextBox-to-save-and-load-quot-HTML)

# javascript - 为什么 IE 中的 Magento js/varien/form.js 错误 - js fiddle

> ID：10303770
> 
> 赞同：3
> 
> 时间：2012-04-24T18:22:34.103
> 
> 标签：javascript, forms, internet-explorer, magento

这似乎是很多人都遇到过的问题！[链接到谷歌搜索结果](https://www.google.com/search?sourceid=chrome&ie=UTF-8&q=state+dropdown+missing+in+IE#hl=en&q=+site%3amagentocommerce.com+State+dropdown+missing+from+magento+in+IE&sa=X&ei=RuyWT5yxEsXk0QGRoaXlDg&ved=0CC0QrQIwAA&bav=on.2,or.r_gc.r_pw.r_cp.,cf.osb&fp=81d740cedddc8ffa)

有很多答案，我研究了一些更合理的答案，并修复了页面上的任何 javascript 错误。在 Chrome 中，我没有发现任何错误，但在 IE8 中，我在第 205 行错误中收到无效参数，并且状态下拉列表丢失。我不是 javascript 专家，不知道从哪里开始解决此问题。尤其是当涉及到浏览器细节时。

[问题截图](http://i.stack.imgur.com/w0w8a.jpg)

如果您查看 JS 中的第 205 行，则缺少的字段包括：

```
if (this.regionSelectEl.options.add) {
        this.regionSelectEl.options.add(option);
} else {
        this.regionSelectEl.appendChild(option);
} 
```

这恰好是页面中缺少的区域（状态）选择元素。JS的链接：http: [//jsfiddle.net/bms85/LKdsq/1/](http://jsfiddle.net/bms85/LKdsq/1/)

这可能是什么原因造成的？

**编辑：**

我发现原因是与精简的最新版本的现代化程序发生冲突，我正在将现代化程序用于 html5 polyfills。仍在尝试调试冲突。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:35:07.580

我在 Magento/Modernizr 网站上也遇到了这个问题，[Brendan Falkowlski 的回答](https://stackoverflow.com/a/11486850/1599045)为我指出了一个解决方案。自从他回答之后，[Modernizr 发布了 2.6.x](http://modernizr.com/news/modernizr-260/)，将 html5shiv 更新到 3.6，其中包括针对特定问题的修复。因此，如果您遇到此问题并使用 2.6 之前的modernizr，更新到最新版本（使用其捆绑的 html5shiv）应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:57:04.250

要跨浏览器兼容，您应该这样做

```
this.regionSelectEl.options[this.regionSelectEl.options.length] = new Option(option.text, option.value); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T19:38:34.550

Magento 中的 forms.js 与 IE8 中的 Modernizr（当包含 HTML5shiv 时）冲突（也可能更低——未测试）。带有表单验证的页面将显示错误消息。

**修复：**

与其在 Modernizr 中加载 HTML5shiv，不如从以下网址单独下载 html5shiv.js：[https ://github.com/aFarkas/html5shiv](https://github.com/aFarkas/html5shiv)

使用此 Layout XML 添加仅将 shiv 提供给 IE8 及更低版本的条件注释：

```
<action method="addItem"><type>skin_js</type><name>js/html5shiv.js</name><params/><if>lte IE 8</if></action> 
```

然后，您可以构建您的自定义 Modernizr 包并包含它。由于所有浏览器都获得了 Modernizr 脚本，因此这具有减轻现代浏览器脚本的一个很好的副作用。

注意：这会给 IE8 用户带来额外的负担，迫使他们下载额外的脚本，但总比让他们看到错误要好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T14:04:15.760

As it turns out IE doesn't like the options.add:

```
 if (this.regionSelectEl.options.add) {
                this.regionSelectEl.options.add(option);
            } else {
                this.regionSelectEl.appendChild(option);
            } 
```

I simply used appendClild instead.

```
 if (this.regionSelectEl.options.length > 0 && option.value.length > 0 && option.text.length > 0 && this.regionSelectEl.options.add) {
                //~ this.regionSelectEl.options.add(option);
                this.regionSelectEl.appendChild(option);
            } else {
                this.regionSelectEl.appendChild(option);
            } 
```

# objective-c - IOS 是否原生支持任何存档文件格式？

> ID：10303774
> 
> 赞同：0
> 
> 时间：2012-04-24T18:22:52.900
> 
> 标签：objective-c, xcode, ios5

使用以下代码生成带有板载资源的 UIWebView 非常简单。

```
NSString *path = [[NSBundle mainBundle] bundlePath];
NSURL *baseURL = [NSURL fileURLWithPath:path];
[webView loadHTMLString:htmlString baseURL:baseURL]; 
```

但是，我需要做的是超越简单地在设备上预先生成数据，实际从服务器下载数据以存储在本地。我可以轻松地处理其中的很多内容，但问题变成了：“IOS 原生支持哪些存档格式？”

我知道有一些插件可以让我支持 ZIP 或 PKZip，但如果可能的话，最好限制在 Apple 的内置工具中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:44:27.267

不。

显然不存在本机存档格式支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:11:32.677

如果我们将“归档”宽泛地解释为一种将异构数据存储在单个文件中而不必对其进行压缩的方式，那么您可以将属性列表和 SQLite 数据库视为归档格式。而且，是的，“归档”这个词有时会以这种方式使用，例如 .tar 格式。

# python - 如何在字典中创建值出现的直方图？

> ID：10303788
> 
> 赞同：1
> 
> 时间：2012-04-24T18:23:33.900
> 
> 标签：python, dictionary, count, histogram

使用python 2.6：

我有一本字典，其中每个键都包含一个值列表。

我想查看字典中的所有值，并计算每个值在所有键中出现的次数。

我一直在看 itervalues() 或

```
for value in dictionary.values(): 
```

首先，还有 .count() 函数，但我需要返回一个直方图。

例如：

```
print dictionary 
```

会回来

```
{'test' : ['spam', 'eggs', 'cheese', 'spam'], 'test2' : ['spam', 'cheese', 'goats']} 
```

我想告诉我一些事情：

```
{'spam' : 3, 'eggs' : 1, 'cheese': 2, 'goats' : 1} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T18:31:44.903

```
from collections import Counter

d = {'test' : ['spam', 'eggs', 'cheese', 'spam'], 'test2' : ['spam', 'cheese', 'goats']}
c = Counter(sum(d.values(), []))
# or c = Counter(x for a in d.values() for x in a)
print c.most_common()

## [('spam', 3), ('cheese', 2), ('eggs', 1), ('goats', 1)] 
```

对于 python 2.6 使用[这个配方](http://code.activestate.com/recipes/576611-counter-class/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:29:50.667

遍历值列表，并通过一一递增将它们添加到新字典中。

```
# start with an empty output dictionary
out = {}

# iterate through the keys in the dictionary
for key in p:
   # iterate through the values in the sublist
   for val in p[key]:
      # check to see if we've seen this one before
      if not out.has_key(val):
         # if not, start it out at 0
         out[val] = 0

      # increment by one because we've seen it once more
      out[val] += 1

print out 
```

# .net - 如何将 CommandArgument 传递给 DotNetNuke 中的弹出窗口

> ID：10303790
> 
> 赞同：0
> 
> 时间：2012-04-24T18:23:44.803
> 
> 标签：.net, dotnetnuke-6

我有一个编辑命令需要传递到 dotnetnuke 中的弹出编辑窗口。

到目前为止，我的代码反映了不支持弹出窗口的旧版本 dotnetnuke。

```
 Response.Redirect(EditUrl(string.Empty, string.Empty, "Edit", "tid=" + e.CommandArgument)); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:28:37.327

在这里你可以看到新的弹出窗口应该如何工作：

[dotnetnuke.com/forums](http://www.dotnetnuke.com/Resources/Forums/forumid/203/threadid/433235/scope/posts.aspx)

它应该像您在论坛主题中看到的那样工作，但在我的情况下它不起作用我不知道为什么（我必须仔细研究这个问题）。作为参数，您可以像过去一样使用 string[] 并使用以下代码读出编辑控件中的参数：

```
string smyTestParameter = Page.Request["myTestParameter"]; 
```

我希望这有帮助。

最好的问候，没有人。

# sql-server-2008 - 在 SQL Server 2012 中创建数据库，在 2008 年编写和使用？

> ID：10303791
> 
> 赞同：10
> 
> 时间：2012-04-24T18:23:49.080
> 
> 标签：sql-server-2008, sql-server-2012

如果我使用 2012 创建一个数据库并工作并将该信息添加到其中，如果我要在之后编写数据库脚本，我是否能够在 2008 年运行该脚本并让一切正常运行？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-24T18:32:09.970

如果您使用的是 SQL Management Studio，您可以右键单击数据库名称，然后选择*Tasks → Generate Scripts*。

在这里，您将能够创建脚本来编写架构、数据或架构和数据的脚本，如果单击“高级”按钮，则可以指定要定位的 SQL Server 版本。

因此，只需选择 SQL 2008 作为目标服务器，您就可以开始使用了！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-24T19:37:41.300

脚本？是的。好吧，让我换个说法：这取决于。只要您的对象不使用任何 2012 特定的功能，您就可以使用 Management Studio 或各种 3rd 方工具编写模式脚本（[我在博客中介绍了一些选项](http://bertrandaaron.wordpress.com/2012/04/20/re-blog-the-cost-of-reinventing-the-wheel/)）。许多工具还提供选项（或配套工具）来编写数据脚本。

问题是 SQL Server 2012 中没有一种非常简单的方法来识别您可能使用 2012 特定功能的所有位置。例如，我不知道有什么工具可以检查您的数据库并指出您正在使用该`FORMAT()`功能，该功能在 SQL Server 2008 或 2008 R2 中不可用。

其他复制数据库的方法——备份/恢复、附加/分离、镜像/日志传送等将不起作用。您可以（从 2005、2008 或 2008 R2）上升到 2012，但不能倒退。

所以总的来说，我同意约翰的观点。在版本 <= 部署版本上开发更安全。为什么要在 2012 年开发以部署到 2008 年？对我来说似乎很冒险。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-26T18:45:20.830

如果您有大量数据要移动（千兆字节），那么 SQL Management Studio 将为您生成的 TSQL 脚本可能会因为庞大的大小而给您带来问题。更好的选择是使用 BCP（批量复制程序）。缺点是这是一个命令行实用程序，需要比仅使用向导更多的工作。

幸运的是，有人写了一些看起来非常像只使用 BCP 的向导的东西。它是 SQL 数据库迁移向导，可在 Codeplex - [http://sqlazuremw.codeplex.com/releases/view/32334](http://sqlazuremw.codeplex.com/releases/view/32334)免费获得。最初旨在作为 SQL Server 和 Azure 之间的数据库迁移工具，您可以在 SQL Server 和 SQL Server 之间轻松使用它。关键是进入高级选项（类似于 Management Studio 向导）并选择 SQL Server。稍后当系统提示您选择目标系统时，请选择您的 2008 安装。

我的数据库中没有 2012 年的特定人工制品，它对我来说工作得非常顺利。

# python - 打印不带前导零的浮点值

> ID：10303797
> 
> 赞同：48
> 
> 时间：2012-04-24T18:24:21.560
> 
> 标签：python, string-formatting

尝试使用格式说明符打印一个小于 1 且没有前导零的浮点数。我想出了一些技巧，但我认为有一种方法可以删除格式说明符中的前导零。我在文档中找不到它。

问题

```
>>> k = .1337
>>> print "%.4f" % k
'0.1337' 
```

哈克

```
>>> print ("%.4f" % k) [1:]
'.1337' 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-24T18:31:24.393

这是另一种方式：

```
>>> ("%.4f" % k).lstrip('0')
'.1337' 
```

它比`[1:]`它也适用于> = 1的数字更通用。

然而，这两种方法都不能正确处理负数。在这方面，以下方法更好：

```
>>> re.sub('0(?=[.])', '', ("%0.4f" % -k))
'-.1337' 
```

不是特别优雅，但现在我想不出更好的方法。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-05-13T20:15:25.020

尽管我喜欢可爱的正则表达式技巧，但我认为一个简单的函数是最好的方法：

```
def formatFloat(fmt, val):
  ret = fmt % val
  if ret.startswith("0."):
    return ret[1:]
  if ret.startswith("-0."):
    return "-" + ret[2:]
  return ret

>>> formatFloat("%.4f", .2)
'.2000'
>>> formatFloat("%.4f", -.2)
'-.2000'
>>> formatFloat("%.4f", -100.2)
'-100.2000'
>>> formatFloat("%.4f", 100.2)
'100.2000' 
```

这样做的好处是易于理解，部分原因`startswith`是它是简单的字符串匹配而不是正则表达式。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-21T18:57:35.020

一种可行的选择，无需正则表达式且负数大于 10

```
k = -.1337
("%.4f" % k).replace("-0","-").lstrip("0") 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-17T21:27:50.283

您可以使用以下`MyFloat`类而不是内置`float`类。

```
def _remove_leading_zero(value, string):
    if 1 > value > -1:
        string = string.replace('0', '', 1)
    return string

class MyFloat(float):
    def __str__(self):
        string = super().__str__()
        return _remove_leading_zero(self, string)

    def __format__(self, format_string):
        string = super().__format__(format_string)
        return _remove_leading_zero(self, string) 
```

使用此类，您必须使用`str.format`函数而不是模运算符 ( `%`) 进行格式化。以下是一些示例：

```
>>> print(MyFloat(.4444))
.4444

>>> print(MyFloat(-.4444))
-.4444

>>> print('some text {:.3f} some more text',format(MyFloat(.4444)))
some text .444 some more text

>>> print('some text {:+.3f} some more text',format(MyFloat(.4444)))
some text +.444 some more text 
```

如果您还想让类的模运算符 ( `%`)`str`以相同的方式运行，那么您必须通过子类化类来覆盖类的`__mod__`方法。`str`但它不会像覆盖类的`__format__`方法那么容易`float`，因为在这种情况下，格式化的浮点数可能出现在结果字符串的任何位置。

[注：以上所有代码都是用 Python3 编写的。**您还必须`__unicode__`在 Python2**中覆盖并且还必须更改`super`调用。]

PS：你也可以重写`__repr__`类似的方法`__str__`，如果你也想改变[官方字符串](https://docs.python.org/3/reference/datamodel.html#object.__repr__)`MyFloat`表示。

* * *

* * *

* * *

**编辑**：实际上您可以使用方法添加新语法来格式化字符串`__format__`。因此，如果您想保留这两种行为，即在需要时显示前导零，并且在不需要时不显示前导零。`MyFloat`您可以按如下方式创建类：

```
class MyFloat(float):
    def __format__(self, format_string):
        if format_string.endswith('z'):  # 'fz' is format sting for floats without leading the zero
            format_string = format_string[:-1]
            remove_leading_zero = True
        else:
            remove_leading_zero = False

        string = super(MyFloat, self).__format__(format_string)
        return _remove_leading_zero(self, string) if remove_leading_zero else string
        # `_remove_leading_zero` function is same as in the first example 
```

并按如下方式使用此类：

```
>>> print('some text {:.3f} some more text',format(MyFloat(.4444)))
some text 0.444 some more text
>>> print('some text {:.3fz} some more text',format(MyFloat(.4444)))
some text .444 some more text

>>> print('some text {:+.3f} some more text',format(MyFloat(.4444)))
some text +0.444 some more text
>>> print('some text {:+.3fz} some more text',format(MyFloat(.4444)))
some text +.444 some more text

>>> print('some text {:.3f} some more text',format(MyFloat(-.4444)))
some text -0.444 some more text
>>> print('some text {:.3fz} some more text',format(MyFloat(-.4444)))
some text -.444 some more text 
```

请注意，使用 'fz' 而不是 'f' 会删除前导零。

此外，上面的代码在 Python2 和 Python3 中都有效。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-05-13T23:23:25.077

```
import re
re.sub("^(\-?)0\.", r'\1.', "%.4f" % k) 
```

这很短，很简单，我找不到它不起作用的场景。

例子：

```
>>> import re
>>> re.sub("^(\-?)0\.", r'\1.', "%.4f" % 0)
'.0000'
>>> re.sub("^(\-?)0\.", r'\1.', "%.4f" % 0.1337)
'.1337'
>>> re.sub("^(\-?)0\.", r'\1.', "%.4f" % 1.337)
'1.3370'
>>> re.sub("^(\-?)0\.", r'\1.', "%.4f" % -0)
'.0000'
>>> re.sub("^(\-?)0\.", r'\1.', "%.4f" % -0.1337)
'-.1337'
>>> re.sub("^(\-?)0\.", r'\1.', "%.4f" % -1.337)
'-1.3370'
>>> re.sub("^(\-?)0\.", r'\1.', "%.4f" % 10.337)
'10.3370'
>>> re.sub("^(\-?)0\.", r'\1.', "%.4f" % -10.337)
'-10.3370' 
```

**编辑**：如果您只考虑数字 > -10 和 < 10 以下将起作用：

```
("%.4f", k).replace('0.', '.') 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-05-14T18:04:36.670

我宁愿追求可读性和简单性：让我们独立处理符号和数字。还有一点内联的 if 语句永远不会伤害任何人。

```
k = -.1337
"".join( ["-" if k < 0 else "", ("%.4f" % abs(k)).lstrip('0')] ) 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-05-15T02:19:31.613

使用`.lstrip()`, 后使用字符串格式转换为字符串：

```
>>> k = .1827412
>>> print ("%.4f"%(k)).lstrip('0')
.1827
>>> 
```

`.lstrip()`可用于删除字符串的任何前导字符：

```
>>> k = 'bhello'
>>> print k.lstrip('b')
hello
>>> print k.lstrip('bhel')
o
>>> print k.lstrip('bel')
hello
>>> 
```

[*从文档*](https://docs.python.org/2/library/string.html#string.lstrip)：

> string.lstrip(s[, 字符])
> 
>         返回删除前导字符的字符串副本

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-12-12T18:17:21.503

我很惊讶没有人提出更数学的方法来做到这一点：

```
n = 0.123456789
'.%d' % (n*1e4) 
```

对我来说看起来好多了。:)

但有趣的是，你的速度最快。

```
$ python -mtimeit '".%d" % (0.123456789*1e4)'
1000000 loops, best of 3: 0.809 usec per loop
$ python -mtimeit '("%.4f"%(0.123456789)).lstrip("0")'
1000000 loops, best of 3: 0.209 usec per loop
$ python -mtimeit '("%.4f"%(0.123456789))[1:]'
10000000 loops, best of 3: 0.0723 usec per loop 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-05-13T19:07:07.187

由于我们只考虑 > -1 到 < 1，因此以下编辑将起作用。

```
import re
re.sub(r"0+\.", ".", %0.4f" % k) 
```

这将保持符号，仅删除小数点左侧的数字。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-05-18T16:14:50.647

Python 的标准库的 str.format() 可用于生成浮点值的字符串转换。然后可以对字符串进行操作以形成正数或负数的最终结果。

```
n = -.1234567890
print('{0}'.format('-' if n < 0 else '') + ('{:0.4}'.format(n).split('-')[1 if n < 0 else 0].lstrip('0'))) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-04T15:17:53.040

# 对于 Python 3

当您想要简单的东西并且不需要负数支持时：

```
f'{k:.4f}'.lstrip('0') 
```

当您需要负数支持时，还有其他解决方案，包括 @nettux443 的出色正则表达式。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-08-12T09:43:41.400

一个超短的（虽然不是很pythonic）单行，它也处理负数：

```
k = -.1337
"-"*(k<0)+("%.4f"%abs(k)).lstrip('0') 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-09-13T05:26:04.483

问题是打印一个没有前导零的浮点数，无论浮点数的符号如何。前导零总是在小数点之前。将打印的浮点数拆分为“0.”，然后将结果列表重新加入到“.”周围，如下所示：

```
>> flt = -.31415926 
```

-0.31415926

```
>> '%.4f' % flt    # prints leading zero 
```

'-0.3142'

```
>> '.'.join( ('%.4f' % flt).split('0.'))    # removes leading zero 
```

'-.3142'

# algorithm - 解决问题列表所需的最少天数

> ID：10303800
> 
> 赞同：5
> 
> 时间：2012-04-24T18:24:37.200
> 
> 标签：algorithm, graph-algorithm

您需要完成编号为 1..N 的 N 个问题。你已经按照难度递增的顺序排列了问题，第 i 个问题估计了难度级别 i。您还为每个问题分配了等级 vi。具有相似 vi 值的问题本质上是相似的。每天，您将选择问题的一个子集并解决它们。您已经决定，当天解决的每个后续问题都应该比您当天解决的前一个问题更难。此外，为了不让它变得无聊，你解决的连续问题应该在他们的 vi 等级上至少相差 K。你可以解决所有问题的最少天数是多少？

输入：第一行包含测试用例 T 的数量。接下来是 T 测试用例。每个案例的第一行包含一个整数 N 和 K，第二行包含整数 v1,...,vn。

输出：输出 T 行，每个测试用例一个，包含可以解决所有问题的最少天数。

约束：
1 <= T <= 100
1 <= N <= 300
1 <= vi <= 1000
1 <= K <= 1000

样本输入：
2
3 2
5 4 7
5 1
5 3 4 5 6

样本输出：
2
1

这是来自 interviewstreet 的挑战之一。
下面是我的方法
从第一个问题开始，找出可以解决的最大问题数量，并从问题列表中删除这些问题。现在再次从剩余列表的第一个元素开始，直到现在问题列表的大小为 0 .我从这种方法中得到了错误的答案，所以寻找一些算法来解决这个挑战。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-24T18:53:56.817

按以下方式构造问题的[DAG](http://en.wikipedia.org/wiki/Directed_acyclic_graph)。设*p [i]*和*p [j]*是两个不同的问题。然后我们将画一条从*p [i]*到*p [j]*的有向边当且仅当*p [j]*可以在同一天连续地在*p* *[i]***之后直接求解。** 即，必须满足以下条件：

1.  *i < j*，因为你应该更早地解决不太困难的问题。
2.  | *v[我]*- *v [j]* | >= K（评级要求）。

现在请注意，选择在某一天解决的每个问题子集都对应于该 DAG 中的有**向路径。**你选择你的第一个问题，然后你一步一步地沿着边走，路径中的每一条边对应于同一天连续解决的一对问题。此外，每个问题只能解决一次，因此我们的 DAG 中的任何节点都可能只出现在一个路径中。而且你必须解决所有问题，所以这些路径应该涵盖所有 DAG。

现在我们有以下问题：给定一个有*n 个*节点的 DAG，找到完全覆盖这个 DAG 的最小数量的非交叉有向路径。这是一个众所周知的问题，称为[路径覆盖](http://en.wikipedia.org/wiki/Path_cover)。一般来说，它是NP难的。然而，我们的有向图是*无环*的，对于无环图，它可以通过减少[匹配问题](http://en.wikipedia.org/wiki/Matching_%28graph_theory%29#Maximum_matchings_in_bipartite_graphs)在多项式时间内求解。反过来，最大匹配问题可以使用[Hopcroft-Karp 算法](http://en.wikipedia.org/wiki/Hopcroft-Karp_algorithm)来解决，例如。确切的归约方法很简单，可以[在 Wikipedia 上](https://en.wikipedia.org/wiki/Maximum_flow_problem#Minimum_path_cover_in_directed_acyclic_graph)阅读。对于原始 DAG 的每个有向边*(u, v)*，应添加一条无向边*(a [u]* ,*b [v] )*到二分图，其中*{a [i] }*和*{b [i] }*是大小为*n*的两个部分。

生成的二分图每个部分的节点数等于原始 DAG 中的节点数*n*。我们知道 Hopcroft-Karp 算法在最坏情况下的运行时间为*O(n ^(2.5) )*，300 ^(2.5) ≈ 1 558 845。对于 100 次测试，该算法总共需要不到 1 秒的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T00:05:46.583

算法很简单。首先，按 对问题进行排序`v_i`，然后对于每个问题，找出区间 中的问题数`(v_i-K, v_i]`。这些数字中的最大值就是结果。第二阶段可以完成`O(n)`，所以成本最高的操作是排序，做整个算法`O(n log n)`。[在此处查看算法对您的数据和电子表格中 K=35 的工作的演示。](https://docs.google.com/spreadsheet/ccc?key=0AoiQFF6FASEgdExuanpoZ1EtaEVnc3hMdzVEdTFTbVE)

## 为什么这行得通

让我们将问题重新表述为图形着色问题。我们按如下方式创建图 G：顶点将是问题，两个问题之间将有一条边 iff `|v_i - v_j| < K`。

在这样的图中，独立的集合完全对应于同一天可以解决的问题集合。(<=) 如果集合可以在一天内完成，那么它肯定是一个独立集合。(=>) 如果集合中不包含两个不满足 K 差准则的问题，您可以按照难度对它们进行排序，然后按此顺序解决它们。通过这种方式，这两个条件都将得到满足。

因此，很容易得出，图 G 的颜色与问题在不同日期的时间表完全对应，每种颜色对应一天。

所以，我们要找出图 G 的色度。一旦我们认识到该图是一个区间图，这将很容易，它是一个完美的图，色度等于 cliqueness，两者都可以通过简单的算法找到。

区间图是实线上的区间图，边是相交的区间之间。很容易看出，我们的图是一个区间图（对于每个问题，分配一个区间`(v_i-K, v_i]`。很容易看出，这个区间图的边正是我们图的边）。

*引理1*：在区间图中，存在一个顶点，其邻居形成一个团。

*证明*很容易。您只需采用最低上限（或最高下限）的区间。任何与它相交的区间都有更高的上限，因此，第一个区间的上限包含在所有区间的交集中。因此，它们相互交叉并形成一个派系。qed

*引理 2*：在一系列封闭于诱导子图并具有引理 1 的属性（顶点的存在，其邻居形成一个集团）中，以下算法产生最小着色：

1.  找到顶点*x*，其邻居形成一个集团。
2.  从图中删除*x*，使其子图 G'。
3.  颜色 G' 递归
4.  用在其邻居上找不到的最少颜色为x*着色*

*证明*：在（3）中，算法通过归纳假设+我们的家庭在诱导子图上的接近度来产生子图G'的最佳着色。*在 (4) 中，算法仅在x*的邻居上`n`存在大小集团时才选择新颜色。这意味着，对于*x*，G 中有一个大小团，因此它的色度必须至少为。因此，算法给顶点的颜色总是，这意味着着色是最优的。（显然，该算法会产生有效的着色）。qed`n-1`**`n``n``<= chromaticity(G)`**

 ***推论*：区间图是完美的（完美 <=> 色度 == 派系）

所以我们只需要找到 G 的派系。这对于区间图很容易：您只需处理不包含区间边界的实线段并计算在那里相交的区间数，这在您的情况下更容易，其中间隔有统一的长度。这导致了本文开头概述的算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:56:20.847

我们真的需要去路径覆盖吗？我们不能只遵循与[LIS](http://www.geeksforgeeks.org/archives/9591 "信息系统")类似的策略吗？

输入按复杂度递增的顺序排列。我们只需要为每天要执行的任务维护一堆队列。通过比较所有队列的最后一个元素，将输入中的每个元素分配给一天。无论我们在哪里发现“k”的差异，我们都会将任务附加到该列表中。

例如：5 3 4 5 6

1）输入 - > 5（空列表，所以开始一个新的）

5

2) 3 (只有列表 5 & abs(5-3) 是 2 (k) 所以附加 3)

5--> 3

3) 4（仅列出最后一个 vi、3 和 abs(3-4) < k，所以开始一个新列表）

5--> 3

4

4) 再次 5 (abs(3-5)=k append)

5-->3-->5

4

5) 6 再次 (abs(5-6) < k 但 abs(4-6) = k) 追加到第二个列表)

5-->3-->5

4-->6

我们只需要维护一个包含每个列表的最后一个元素的数组。由于天的顺序（何时完成任务并不重要）我们可以维护最后任务的排序列表，因此，搜索插入新任务的位置只是寻找可以完成的值 abs(vi-k)通过二分查找。

复杂：

循环针对 N 个元素运行。在最坏的情况下，我们最终可能会使用二进制搜索 (log i) 来查询许多 input[i] 的 ceil 值。

因此，T(n) < O( log N! ) = O(N log N)。分析以确保上限和下限也是 O( N log N )。复杂度是 THETA (N log N)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-01T18:05:17.100

所需的最少天数将与 G (DAG) 的互补（无向）图中最长路径的长度相同。这可以使用 Dilworth 定理来解决。**

# c# - 如何将复杂的东西作为资源或设置添加到程序中？

> ID：10303804
> 
> 赞同：1
> 
> 时间：2012-04-24T18:24:41.857
> 
> 标签：c#, resources, persistence, settings

如果我想添加字符串作为设置或图像作为资源 – 我通过 Visual Studio 来完成。

但是我如何添加一些复杂的东西，比如一个大数组或一个必须首先在运行时计算的表单（或者在表单的情况下——填充有控件）？

我以为我可以运行它并将其保留在设置中（Properties.Settings.Default.Setting1 =...），然后发布。但这不起作用（请参阅：[如何以编程方式坚持构建？](https://stackoverflow.com/questions/10302772/how-to-persist-from-build-programmatically)）。

那么它是如何完成的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:11:26.370

你读过[序列化](http://msdn.microsoft.com/en-us/library/7ay27kt9%28v=vs.100%29.aspx)吗？我知道这是一个通用的答案，但我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:33:22.487

对于一个大数组，你需要想出一种存储数据的方法或机制。

如果它是一个不会经常更改的简单数组，则可以将其存储在 app.config 中。

如果它是数据源（即：数据经常更改），您可以使用 XML 文件，最好是数据库。

我不太确定你所说的坚持表格是什么意思。表单应包含在其自己的可执行文件或 dll 中编译的所有控件。如果您询问如何填充表单，您可以在主表单的 Main() 方法中执行此操作。

# ruby - 如何调用或激活课程？

> ID：10303805
> 
> 赞同：1
> 
> 时间：2012-04-24T18:24:43.553
> 
> 标签：ruby

在我的 lib 文件夹中，我有 billede.rb：

```
class Billede
  require 'RMagick'
  #some code that creates a watermark for a image
  image.write(out)
end 
```

如何呼叫/激活课程？将其更改为 Rake 任务的唯一方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T18:40:50.543

你不能直接调用一个类。您必须在该类上调用一个方法。例如：

```
class Billede
  def self.foobar
    # some kind of code here...
  end
end 
```

然后你可以通过调用它`Billede.foobar`

也许你应该在尝试做更复杂的事情之前阅读一些关于基本 ruby​​ 语法的文档（例如使用 Rmagick 操作图像）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:43:06.237

“类内”的代码就像任何其他代码一样运行。如果你有这样的 Ruby 文件：

```
puts "Hello from #{self}"
class Foo
  puts "Hello from #{self}"
end 
```

然后运行文件（通过`ruby foo.rb`命令行或`require "./foo"`脚本`load "foo.rb"`），然后您将看到输出：

> 来自主要
> 的你好来自Foo的你好

如果你想加载一个“做某事”的实用程序，然后你可以从像 IRB 或 Rails 控制台这样的 REPL 调用，那么执行以下操作：

```
module MyStuff
  def self.do_it
    # your code here
  end
end 
```

你可以`require "./mystuff"`加载代码，当你准备好运行它时输入`MyStuff.do_it`

*而且，正如您可能猜到的，您还可以创建接受参数的方法。*

如果您想定义一个可以包含在其他文件中的文件（没有立即的副作用），但只要文件本身运行，它也“做它的事情”，您可以这样做：

```
module MyStuff
  def self.run!
    # Go
  end
end

MyStuff.run! if __FILE__==$0 
```

现在，如果您`require`或`load`此文件`run!`将不会调用该方法，但如果您`ruby mystuff.rb`从命令行键入它会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T18:53:39.060

```
# in /lib/billede.rb
class Billede

  def self.do_something(arg)
    # ...
  end

  def do_anotherthing(arg)
    # ...
  end

end

# inside a model or controller
require 'billede'

Billede::do_something("arg")
# or
billede_instance = Billede.new
billede_instance.do_anotherthing("arg") 
```

# wordpress - 在 wordpress 管理员中创建日期格式的 custom_meta 字段

> ID：10303807
> 
> 赞同：0
> 
> 时间：2012-04-24T18:24:48.560
> 
> 标签：wordpress, custom-post-type

我创建了一个自定义元字段以在自定义帖子类型中使用，即作为一系列事件的开始时间。但是，我想从这个值中运行我的 query_posts，但它的格式不是日期/时间格式，因此 '1:00pm' 会在 '9:00am' 之前出现在列表中。是否可以在数据库中或至少在我的查询参数中设置“meta_key”meta_value 之前格式化这个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:40:42.560

我以前遇到过这个问题几次。我将使用我最近的示例，因为它听起来与您正在做的事情相同。

我不得不使用 WordPress 创建一个活动日历。在我的自定义帖子类型中，我有两个字段：开始时间和结束时间。我不仅使用“1:00pm”作为开始和结束时间，还包括日期。这将允许持续整个周末的活动，如音乐会或比赛。

我在这里得到的是，一旦用户提交事件于 2012 年 1 月 3 日上午 8:00 开始并于 2012 年 1 月 3 日上午 10:00 结束，我使用`strtotime()`. 如果您不熟悉此功能，可以在此处阅读更多信息：http: [//us.php.net/manual/en/function.strtotime.php](http://us.php.net/manual/en/function.strtotime.php)。

[我还建议使用 jQuery UI http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)的日期时间选择器插件。

我希望这会有所帮助。我知道我有时有点含糊。如果您需要我更详细地解释任何事情，请不要害怕问。

# jquery - 使 li 项目加粗

> ID：10303811
> 
> 赞同：0
> 
> 时间：2012-04-24T18:24:57.140
> 
> 标签：jquery, autocomplete

我正在使用 Jquery 自动完成来获取 Google 建议。如果自动完成建议中的 li 项与输入的值匹配，我想将它们设为**粗体。**我首先尝试使用一个事件来执行此操作，但我意识到该事件将在请求之后触发，因此无法正常工作。所以现在我正在尝试在自动完成中将字体设为粗体：

```
var val = $('#searchbox').val();

    if (val == $(item.suggestion.data).html()) {
      $(item.suggestion.data).css("font-weight", "bold");
    } 
```

这似乎不起作用，我不知道为什么。这是自动完成的示例：[JsFiddle](http://jsfiddle.net/QpKj6/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:30:13.907

您需要使用[更改事件](http://api.jquery.com/change/)。

对处理程序中的各种列表项进行修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:46:10.860

您可以使用自动完成的打开事件将输入文本与自动完成下拉列表中返回的值进行匹配。

```
open: function(event, ui) {
    $('.ui-menu li a').each(function(){
    if($(this).text()==$('#searchbox').val()) $(this).wrap('<strong>');
    });
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/QpKj6/24/)**。

# sql - 查询时的Bindparam和Like条件

> ID：10303814
> 
> 赞同：0
> 
> 时间：2012-04-24T18:25:06.170
> 
> 标签：sql, parameters, conditional-statements, sql-like

我有这个函数，它应该只在数据库中查找与用户输入相似的名称。但是我不能将 Like 与参数 :uname 一起使用。我在网上看到的每个人都建议我做这样的事情

```
$username = "$%username%"; 
```

但是查询不返回任何结果。

我知道数据库是正确创建的，因为如果我问这个，它会返回正确的答案

```
SELECT *  FROM $schema.pessoa WHERE nome LIKE %Mike% 
```

但是，在我的代码中 $username 包含“Mike”，但它没有返回任何内容，我认为 %username 没有正确制作，但是如果我对其进行回显，它确实包含我想要的字符串 - “Mike”。所以问题似乎出在我用参数质疑它的方式上，但我不知道

```
function SearchUser($username) {
  global $dbh, $schema;
  try {
    $username = "$%username%";
    $stmt = $dbh->prepare("SELECT *  FROM $schema.pessoa WHERE nome LIKE :uname");      
    $stmt->bindParam(':uname', $username);
    $stmt->execute();

    $result = $stmt->fetch(PDO::FETCH_ASSOC);
     if(empty($result))
       {echo 'empty';}
     return $result;
    }
catch(PDOException $e) {
  $_SESSION["s_errors"]["generic"][] = "ERRO[32]: ".$e->getMessage();
  header("Location: list.php");
  die;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:55:39.297

在我看来确实不错

我只能建议您尝试这种方式，看看是否有什么不同

```
$username = 'Mike';    
$stmt->bindValue(":uname", "%".$username."%"); 
```

编辑。

再看一遍，我觉得不太对劲。。

```
$username = '$%username%'; 
```

难道不应该

```
$username = '%'.$username.'%'; 
```

# javascript - 将通用 Hook 添加到 js-mode

> ID：10303815
> 
> 赞同：7
> 
> 时间：2012-04-24T18:25:07.333
> 
> 标签：javascript, emacs, indentation

我添加了以下常用钩子以在 js 模式下按回车时自动缩进；

```
(add-hook 'js-mode-common-hook '(lambda () (local-set-key (kbd "RET") 'newline-and-indent))) 
```

为什么这不起作用？我对 C 使用了相同的东西，如下所示，它可以工作：

```
(add-hook 'c-mode-common-hook '(lambda () (local-set-key (kbd "RET") 'newline-and-indent))) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T18:40:11.077

使用`js-mode-hook`. 具有基于模式的语言`cc-mode`可以使用所有相关语言的通用挂钩。JavaScript 的模式是基于 的`prog-mode`，所以它`prog-mode-hook`先运行，然后运行`js-mode-hook`。

如果您使用 查找模式文档`C-h m`，它通常会告诉您运行了哪些钩子。

# javascript - 防止元素根据上一个类制作动画

> ID：10303816
> 
> 赞同：3
> 
> 时间：2012-04-24T18:25:13.987
> 
> 标签：javascript, jquery

```
$('.example').hover(
  function () {
    $(this).css('background','red');
  }, 
  function () {
    $(this).css('background','yellow');
  }
);

$('.test').click(function(){
    $(this).css('marginTop','+=20px').removeClass('example');
  }
);

<div class="text example"></div> 
```

尽管该类`example`似乎已被删除，但`hover`它的操作仍在应用于曾经拥有该类的元素。我怎样才能防止这种情况？

[http://jsfiddle.net/gSfc3/](http://jsfiddle.net/gSfc3/)

这是在 jsFiddle 中。如您所见，在执行`click`删除类的函数后，悬停时背景仍然会发生变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:28:47.260

事件处理程序绑定到*Node*，因此该 Node 是否不再拥有特定的 className 并不重要。您需要`.unbind()`手动处理这些事件，或者更好的是，使用 jQuerys`.off()`方法。

因此，如果您可以确定没有任何其他事件处理程序绑定到该节点，只需调用

```
$(this).css('marginTop','+=20px').removeClass('example').off(); 
```

这将从该节点中删除**任何事件处理程序。**如果需要具体，可以使用 jQuerys *Event 命名空间*，像这样

```
$('.example').on( 'mouseenter.myNamespace'
   function () {
       $(this).css('background','red');
   }
).on('mouseleave.myNamespace'
   function() {
       $(this).css('background','yellow');
   }
); 
```

并使用此调用仅取消绑定命名空间内的任何事件`.myNamespace`

```
$(this).css('marginTop','+=20px').removeClass('example').off('.myNamespace'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:32:12.733

尝试这个：

```
$('.test').hover(
    function () {
        $('.example').css('background','red');
    },
    function () {
        $('.example').css('background','yellow');
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:27:22.253

`$('.example').unbind('mouseenter').unbind('mouseleave')`

在您的代码中，`$('.example').hover`将 mouseenter 和 mouseleave 直接附加到每个元素。

-或者-

更好的解决方案可能是使用委托`on`

```
$(document.body).on('mouseenter', '.example', function() { ... });
$(document.body).on('mouseleave', '.example', function() { ... }); 
```

使用该代码，删除`example`类将按预期工作，因为处理程序基于 css 选择器，同时`.hover`直接附加到元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T18:28:21.583

```
$('.example').live({
    mouseenter:function () {
        $(this).css('background','red');
    },
    mouseleave:function () {
        $(this).css('background','yellow');
    }
}); 
```

演示：http: [//jsfiddle.net/gSfc3/1/](http://jsfiddle.net/gSfc3/1/)

# java - 如何让 ASP.Net 网页从 Java Android 客户端读取字节？

> ID：10303821
> 
> 赞同：0
> 
> 时间：2012-04-24T18:25:36.067
> 
> 标签：java, android, asp.net

我正在尝试使用 android 手机将图像上传到外部 MS SQL 数据库。我正在使用 Java HttpClient 将字节数组发送到 Web 服务器或网页。我不知道我应该如何处理这个问题。该网页应位于 ASP.net 中。我对 ASP.Net 还很陌生。我对如何使用 ASP.Net 读取字节数组进行了深入研究，但仍然没有答案。我希望我的网页或服务器读取字节并将它们存储到数据库中。

下面是我想用来发送字节的 Java 函数（尚未测试，因为我还没有读取字节的方法）。但我不知道如何在网站上阅读它们。任何建议，将不胜感激。如果你们发现我做错了什么，如果你们让我知道并告诉我应该如何解决它，我将不胜感激。请具体说明，因为我对此很陌生，并且对网页不太了解。谢谢。

```
 private void sendImagesToServer() throws Exception
{
    ImageItem image;
    HttpURLConnection conn = null;
    ImageIterator iterator;
    DataOutputStream dos;
    byte[] byteArray;
    iterator = new ImageIterator(imageAdapter);
    String uploadUrl;

    while(iterator.hasNext())
    {
        image = iterator.getNext();
        Uri uri = Uri.withAppendedPath(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, Integer.toString(image.id));

        Bitmap bmp=BitmapFactory.decodeStream(getContentResolver().openInputStream(uri));
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        bmp.compress(Bitmap.CompressFormat.JPEG, 100, stream);
        byteArray = stream.toByteArray();

        uploadUrl = "http://localhost:63776/SQLScript.aspx";

        // Send request
        try {
            // Configure connection

            URL url = new URL(uploadUrl);
            conn = (HttpURLConnection) url.openConnection();
            conn.setDoInput(true);
            conn.setDoOutput(true);
            conn.setUseCaches(false);
            conn.setRequestMethod("PUT");
            conn.setRequestProperty("Connection", "Keep-Alive");

            dos = new DataOutputStream(conn.getOutputStream());
            dos.write(byteArray, 0, byteArray.length);
            dos.flush();
            dos.close();

            // Read response
            try {
                if (conn.getResponseCode() == 200) {
                    Toast.makeText(this,"Yay, We Got 200 as Response Code",Toast.LENGTH_SHORT).show();
                }
            } catch (IOException ioex) {
                ioex.printStackTrace();
            } catch (Exception e) {
                e.printStackTrace();
            }

        } finally{

        }   

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:34:02.490

如果您已验证字节从 Java 中正常输出，请检查此问题，它可能有您需要的内容。

[将 Http 请求读入字节数组](https://stackoverflow.com/questions/9948463/read-http-request-into-byte-array)

至于将其放入数据库，您可以将文件保存在二进制数据库中（不同的 MSSQL 设置）或转换为字符串并根据需要再次返回。

# spring - JBoss 5.1：找不到实体类 (vfszip)

> ID：10303829
> 
> 赞同：6
> 
> 时间：2012-04-24T18:26:32.540
> 
> 标签：spring, hibernate, jboss

我将 JBoss 5.1 与 Hibernate 3.6、**JPA 2.0**和 Spring 3.0.5 一起使用。我使用 maven 构建 EAR 文件，如下所示：

```
AutoTrader.ear 
-------> META-INF
--------------> application.xml
--------------> jboss-app.xml
--------------> MANIFEST.MF
-------> AutoTrader.war 
```

如果我在 JBoss 5.1 中部署这个 ear 文件，我会收到错误消息

```
org.springframework.dao.InvalidDataAccessApiUsageException: Not an entity: class uk.co.aol.shipmanager.domain.Manager; nested exception is ja
va.lang.IllegalArgumentException: Not an entity: class uk.co.aol.shipmanager.domain.Subscription
        at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:286) ~[at_war-1.0.war:3
.0.5.RELEASE]
        at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:104) ~[at_war-1.0.war:3.0.5.RELEASE
]
        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:368) ~[at_war-1.
0.war:3.0.5.RELEASE]
        at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:58
) ~[at_war-1.0.war:3.0.5.RELEASE] 
```

但是，如果我部署的 war 文件爆炸，它工作正常。欢迎任何建议。

谢谢，阿迪

**更新：**

我添加了一个扩展 NativeScanner 的 ResourceScanner：

```
public class ResourceScanner extends NativeScanner {

    @Override
    public Set<Class<?>> getClassesInJar(final URL jarToScan,
            final Set<Class<? extends Annotation>> annotationsToLookFor) {
        return super.getClassesInJar(patchUrl(jarToScan), annotationsToLookFor);
    }

    @Override
    public Set<NamedInputStream> getFilesInJar(final URL jarToScan, final Set<String> filePatterns) {
        return super.getFilesInJar(patchUrl(jarToScan), filePatterns);
    }

    @Override
    public Set<Package> getPackagesInJar(final URL jarToScan,
            final Set<Class<? extends Annotation>> annotationsToLookFor) {
        return super.getPackagesInJar(patchUrl(jarToScan), annotationsToLookFor);
    }

    @Override
    public String getUnqualifiedJarName(final URL jarToScan) {
        return super.getUnqualifiedJarName(patchUrl(jarToScan));
    }

    /**
     * Patch the VFS URL to a FILE protocol URL.
     * 
     * @param url
     *            original URL.
     * @return either the original, either the corresponding FILE protocol of given VFS URL.
     */
    protected URL patchUrl(final URL url) {
        String protocol = url.getProtocol();

        if (protocol.equals("vfs")) {
            try {
                File file = new File(url.getFile());
                return file.toURI().toURL();
            } catch (final MalformedURLException e) {
                return url;
            } catch (IOException e) {
                e.printStackTrace();
                return url;
            }

        }
        return url;
    }
} 
```

并且，在 spring-persistence.xml 中，

```
<property name="hibernate.ejb.resource_scanner" value="uk.co.aol.shipmanager.ResourceScanner"/> 
```

这同样适用于分解的战争文件。

**但是对于*EAR*文件，协议是*vfszip*而不是*vfs*。**

请告诉我该怎么做？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T12:30:00.473

您是否尝试使用以下系统参数并查看它是否有助于解决问题？

```
-Dorg.jboss.net.protocol.file.useURI=false 
```

# salesforce - 保存错误：字段表达式的初始项必须是具体的SObject：MAP

> ID：10303831
> 
> 赞同：1
> 
> 时间：2012-04-24T18:26:58.437
> 
> 标签：salesforce, soql

我正在尝试克服 Salesforce 中的限制，即潜在客户对象不能具有与潜在客户一起转换为机会、联系人和客户的相关列表。我设置了 4 个查找关系类型的对象，并在每个对象中创建了一个虚拟记录。

我想使用自定义设置来存储每个虚拟记录的 id，以便在潜在客户转换时，任何自定义对象也可以转换为在相应标准对象上具有主/从关系的对象。

我的线索触发器（更新后）尝试创建自定义设置的地图：地图 cs = AcctId__c.getAll();

AcctId__c 是自定义设置 API 名称。编译时间给了我上面的信息。现在，我直接从 Salesforce 文档中复制了这段代码。我忘记了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:48:24.953

我相信您必须在`<String,AcctId__c>`Map 一词之后包含实际的地图定义。

看看这个页面。

[http://www.salesforce.com/us/developer/docs/apexcode/Content/langCon_apex_collections_maps.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/langCon_apex_collections_maps.htm)

# arrays - 在循环内更改数组大小导致matlab出错

> ID：10303836
> 
> 赞同：0
> 
> 时间：2012-04-24T18:27:20.663
> 
> 标签：arrays, matlab, loops

我正在尝试动态设置数组的大小并在其中存储一些值，但这会导致错误。

这是代码，

```
syms k
x=[1 0 0 1];
y=[];
for b=1:4
    step1= x(b)*exp(-2*pi*1i*k*((b-1)/length(x)));
    y(b)=step1
end 
```

我想做的是将step1的每个值存储在数组'y'中。

这是错误，

```
The following error occurred converting from sym to double:
Error using mupadmex
Error in MuPAD command: DOUBLE cannot convert the input expression into a double
array.
If the input expression contains a symbolic variable, use the VPA function instead.
Error in Untitled3 (line 6)
    y(K)=1/exp((pi*k*3*1i)/2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:47:28.907

根据您要执行的操作，Matlab 努力从双重变为符号，因此您应该从一开始就明确 y 是包含符号元素：

```
syms k y
x=[1 0 0 1];
for K=1:4
    step1= x(K)*exp(-2*pi*1i*k*((K-1)/length(x)));
    y(K)=step1
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:44:39.647

`k`您使用符号变量和循环计数器是否有原因`K`？看起来你混淆了两者。我认为这就是您要实现的目标：

```
x=[1 0 0 1];
y=[];

for k=1:4
    y(k)= x(k)*exp(-2i*pi*k*((k-1)/length(x)));    
end 
```

注意：使用大型循环时，MATLAB 预先分配数组比动态调整数组大小要快得多。例如通过更改`y=[];`为`y=zeros(1,4);`

# scala - 在 Play2.0 中创建用于生成@link 的标签

> ID：10303838
> 
> 赞同：1
> 
> 时间：2012-04-24T18:27:25.160
> 
> 标签：scala, playframework-2.0

在积极学习 Play2.0 的同时，我坚持创建标签。在名为 computer-database 的示例应用程序中，在列表模板中创建了以下帮助程序：

```
@****************************************
* Helper generating navigation links    *
****************************************@
@link(newPage:Int, newSortBy:String) = @{

var sortBy = currentSortBy
var order = currentOrder

if(newSortBy != null) {
    sortBy = newSortBy
    if(currentSortBy == newSortBy) {
        if(currentOrder == "asc") {
            order = "desc"
        } else {
            order = "asc"
        }
    } else {
        order = "asc"
    }
}

// Generate the link
controllers.orders.routes.Work.list(newPage, sortBy, order, currentFilter)

} 
```

因为我想在视图模板中使用这个助手，所以我认为最好的解决方案是为它创建一个标签。所以我做了以下（在我的标签包中）：

```
@(newPage : Int, newSortBy:String) {
    var sortBy = currentSortBy
    var order = currentOrder

    if(newSortBy != null) {
        sortBy = newSortBy
        if(currentSortBy == newSortBy) {
            if(currentOrder == "asc") {
                order = "desc"
            } else {
                order = "asc"
            }
        } else {
            order = "asc"
        }
    }
    // Generate the link
    controllers.orders.routes.Computer.list(newPage, sortBy, order, currentFilter)
} 
```

但是，显然这不起作用，我不知道它在哪里或为什么不起作用。

感谢您的输入。

**更新答案：**

因此，在 Scala 模板中，我们必须像在 Java 中一样定义传递给该视图的参数（注意：您将在 javascript 中使用的变量也必须传递！）。该模板将编译为[文档](http://www.playframework.org/documentation/2.0/JavaTemplates)中所述的方法。

工作标签如下所示：

```
@(newPage : Int, newSortBy : String, currentSortBy: String, currentOrder: String, currentFilter : String ) @{
    var sortBy = currentSortBy
    var order = currentOrder

    if(newSortBy != null) {
        sortBy = newSortBy
        if(currentSortBy == newSortBy) {
            if(currentOrder == "asc") {
                order = "desc"
            } else {
                order = "asc"
            }
        } else {
            order = "asc"
        }
    }

    // Generate the link
    controllers.orders.routes.Work.list(newPage, sortBy, order, currentFilter)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:50:25.673

诀窍是第一个版本使用允许编写 Scala 代码而不是 HTML:的[模板语法](http://www.playframework.org/documentation/2.0/ScalaTemplates)`@{ val scalaVal = 42}`。

在您的标签中，模板引擎将您的代码解释为 HTML。

如果要复制粘贴此代码，请不要忘记`@`左大括号前的前导。

# wcf - WCF + EF(POCO)：我应该使用 SOA 还是有替代的架构风格？

> ID：10303839
> 
> 赞同：1
> 
> 时间：2012-04-24T18:27:29.900
> 
> 标签：wcf, entity-framework, design-patterns, soa

我对 SOA 或一般的不同架构风格几乎一无所知，所以我的问题可能完全不正确或过于笼统

a) 在创建 WCF + EF (POCO) 时，就建筑风格而言，我有哪些选择？一种选择是使用 SOA 模式实现 WCF+EF 应用程序，但是 SOA 的替代方案是什么？

b) 我也有点困惑如何决定是使用 SOA 还是采用其他风格（我不想通读五本或更多关于 SOA 的书，只是发现这是一种时尚或对于我的大多数 WCF + EF 应用程序来说，利基或不是最佳选择）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:49:49.197

术语“SOA”有很多混淆，就像我们的行业非常喜欢的任何其他首字母缩略词一样。这确实是一种让应用程序相互交谈的方式。因此，我最初的困惑。WCF+EF 可以是更大的面向服务架构的一部分，允许其他服务与您的服务进行通信，所有这些都结合到最终的应用程序中。我不知道是否有“使用 SOA 实现 WCF”的方法，因为 WCF 是单个服务点。您可以使用它与其他 WCF 服务对话（即使在同一个服务中，如果您喜欢冒险的话），或者您可以使用它与消息总线或映射服务等对话。

希望有帮助

# html - 关于带有动画的 HTML 5 App 的想法

> ID：10303842
> 
> 赞同：0
> 
> 时间：2012-04-24T18:27:51.343
> 
> 标签：html, html5-video, html5-animation

这是我第一次开发 HTML 5 应用程序，

我需要一些关于如何实现 HTML 5 应用程序的想法，该应用程序具有与 ipad 网络浏览器兼容的动画。

这是场景。

在第一页，会有一个泰迪熊，当用户点击泰迪熊时，泰迪熊会鞠躬，当泰迪熊鞠躬时，会出现一个5秒的短视频自动播放，用户仍然可以选择暂停或播放视频。但是当视频结束时，浏览器应该会自动重定向到一个新页面。

您可以推荐任何 HTML 5 和 CSS3 框架吗？

# sql - 分组减去 Oracle 问题

> ID：10303857
> 
> 赞同：1
> 
> 时间：2012-04-24T18:28:54.007
> 
> 标签：sql, oracle, subquery

我刚刚创建了这个查询，当我对它进行分组时我感到困惑，因为我无法将它们视为一个分组。此查询运行但不是我想要的方式，我想按团队名称对查询进行分组，但是当使用 count(*) 对其查询进行计数并且其计数结果产生相同的数字时会出现问题 ,,,

```
 SELECT TEAM.NAMATEAM, PERSONAL.KODEPERSON
    FROM TEAM,  PERSONAL
   WHERE TEAM.KODETEAM = PERSONAL.KODETEAM
GROUP BY PERSONAL.KODEPERSON, TEAM.NAMATEAM

MINUS 

  SELECT TEAM.NAMATEAM, PERSONAL.KODEPERSON
    FROM TEAM, PERSONAL, AWARD_PERSON 
   WHERE TEAM.KODETEAM = PERSONAL.KODETEAM 
     AND AWARD_PERSON.PEMENANG = PERSONAL.KODEPERSON
GROUP BY TEAM.NAMATEAM, PERSONAL.KODEPERSON; 
```

我想使用团队名称对所有这些进行分组，但是使用计数将是一个问题，因为我不知道在可以按照我想要的方式顺利运行的技术中进行分组。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:21:52.917

我明白你的问题吗？您正在尝试制作一个包含 NAMATEAM,X 列的表格，其中 NAMATEAM 是团队名称，X 是每个团队中没有获奖的人数（列在 AWARD_PERSON 中）。如果是这样，您应该能够使用子选择：

```
SELECT T_NAME, COUNT(*)
FROM (
    SELECT TEAM.NAMATEAM "T_NAME", PERSONAL.KODEPERSON
    FROM TEAM, PERSONAL
    WHERE TEAM.KODETEAM = PERSONAL.KODETEAM
    MINUS
    SELECT TEAM.NAMATEAM "T_NAME", PERSONAL.KODEPERSON
    FROM TEAM, PERSONAL, AWARD_PERSON
    WHERE TEAM.KODETEAM = PERSONAL.KODETEAM 
    AND AWARD_PERSON.PEMENANG = PERSONAL.KODEPERSON )
    -- your original query without the GROUP BYs
GROUP BY T_NAME 
```

第一个子选择 SELECT 创建一个完整的玩家列表，第二个子选择 SELECT 创建一个获得奖项的玩家列表（我假设），MINUS 从完整列表中删除获奖者。因此，完整的子选择会为所有没有奖励的玩家返回一个玩家及其团队的列表。

然后，主 SELECT 仅对球队名称进行汇总，以得出每支球队没有获奖的球员数量。

您不应该需要原始的 GROUP BY TEAM.NAMATEAM、PERSONAL.KODEPERSON，除非您的数据库中有重复的行，例如，一支球队中的一名球员在数据库中有不止一行。

# objective-c - 预处理器不允许宏中标记中的“：”来定义属性

> ID：10303859
> 
> 赞同：0
> 
> 时间：2012-04-24T18:29:05.013
> 
> 标签：objective-c, xcode, clang, c-preprocessor, selector

我创建了一个宏来定义一个字符串属性

```
#define STRING_PREF(NAME) \
 @property (nonatomic, strong, getter=NAME, setter=set_##NAME##:) NSString * NAME; 
```

我尝试这样使用它：

```
STRING_PREF(username) 
```

但最终出现以下错误：

```
error: pasting formed 'set_username:', an invalid preprocessing token
STRING_PREF(username)
^
foo.h:16:62: note: expanded from macro 'STRING_PREF'
        @property (nonatomic, strong, getter=NAME, setter=set_##NAME##:)        NSString * NAME;
                                                                    ^
1 error generated. 
```

预处理器不能生成选择器名称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:36:33.733

只是不要粘贴`:`，像这样：

```
#define STRING_PREF(NAME) @property (nonatomic, copy, getter=NAME, setter=set_##NAME:) NSString *NAME; 
```

另请注意，字符串应定义为`copy`属性，而不是`strong`.

# vb.net - 是否有在 Visual Basic 中嵌入 HTML 编辑器之类的东西？

> ID：10303864
> 
> 赞同：-1
> 
> 时间：2012-04-24T18:29:18.527
> 
> 标签：vb.net, ckeditor, html-editor

我最近被要求对一些嵌入到我们当前软件（内置于 VB）中的第三方 HTML 编辑器进行一些研究。

我开始做一些研究，但没有运气。

我对构建 HTML 编辑器了解不多，但这很容易做到吗？

据我所知，我需要 CKEditor 之类的东西，但不适合网络使用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:19:19.437

我的快速搜索： [Microsoft WinForms HTML 编辑器](http://windowsclient.net/articles/htmleditor.aspx)

[http://www.google.com/search?client=opera&rls=en&q=%22html+editor%22+api&sourceid=opera&ie=utf-8&oe=utf-8](http://www.google.com/search?client=opera&rls=en&q=%22html+editor%22+api&sourceid=opera&ie=utf-8&oe=utf-8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:38:09.690

[TX 文本控制](http://textcontrol.com)

绝对是我想要的

# dapper - 添加到 DynamicParameters 后更改 ParamInfo 的值？

> ID：10303865
> 
> 赞同：5
> 
> 时间：2012-04-24T18:29:27.743
> 
> 标签：dapper

我在`foreach`循环中调用存储过程，并希望在每次迭代中更改其中一个参数的值。目前，一旦将参数添加到 DynamicParameters 似乎没有任何方法可以访问这些参数，尽管通过阅读源代码，我可以看到 DynamicParameters 确实保留了一个内部字典。有什么理由不公开，或者是否有其他方法可以访问 ParamInfos 来更改值？

**更新**

我目前拥有的：

```
foreach ( var fooID in fooIDs )
{
    var dynamicParameters = new DynamicParameters();
    dynamicParameters.Add( ParameterNames.BarID, barID );
    dynamicParameters.Add( ParameterNames.FooID, fooID);

    connection.Execute( ProcNames.MyProc, dynamicParameters, commandType:CommandType.StoredProcedure );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-02-25T18:10:16.040

重新添加参数。

```
// Call Add() with new values.
dynamicParameters.Add(ParameterNames.BarID, differentBarID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:29:50.487

[DynamicParameters](http://code.google.com/p/dapper-dot-net/source/browse/Dapper/SqlMapper.cs#1945)对它的作用如此保密并没有真正的原因，`ParamInfo`可以公开该类，我很乐意提供适当的迭代/修改属性和/或方法。如果您想参与其中，请提交补丁。

同时，您可以`IDynamicParameters`在您的应用程序中简单地实现我们用来将其分派到底层命令的简单接口。您可以使用 DynamicParameters 作为起点。

# c++ - const_cast c++ 对我不起作用

> ID：10303871
> 
> 赞同：0
> 
> 时间：2012-04-24T18:29:45.107
> 
> 标签：c++, casting, constants

试图了解 const_cast 的用法。代码如下：

```
const char* text="bb";
(const_cast<char&>(*text))='a';
cout<<*text; 
```

...生成运行时错误。

另一个问题，在内存中，运行时（它）如何知道该区域是否为 const，这是什么标志？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T18:31:50.177

该代码调用**未定义的行为**；写入字符串文字（实际上也不写入任何`const`对象）是无效的。

C++ 标准没有定义这应该如何失败（甚至它**必须**失败）。但是在一个典型的平台上，这将取决于操作系统和底层硬件来检测问题。的存储`"bb"`通常位于可执行文件的专用部分中，该部分被标记为只读。参见例如[http://en.wikipedia.org/wiki/Memory_protection](http://en.wikipedia.org/wiki/Memory_protection)。

但是，有些用途`const_cast`不会调用未定义的行为。例如：

```
int x = 5;  // Not a const object

const int *p = &x;

int *q = const_cast<int *>(p);

*q = 6;  // This is ok 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:33:22.253

该字符串可能被放入静态内存中。所以这是一种未定义的行为。尝试这个

```
char t[]="bb";
const char* text = t;
(const_cast<char&>(*text))='a';
cout<<*text; 
```

你只能 const_cast 一些你知道不是真的 const 的东西。在这种情况下，即使 text 是 const，我们也知道它指向的 t 不是 const。因此，我们可以安全地抛弃 const。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:35:37.950

一般来说，运行时*不*知道特定变量是否实际上是`const`. 如果你抛弃`const`-ness，如果你最终写入一个定义为 const 的变量（而不是你碰巧有一个 const 指针/引用的普通变量），你会得到未定义的行为。

如果他们想强制运行时“知道”事物的存在`const`，那么当/如果您写入 const 变量时，他们可能会规定特定的行为（例如，抛出特定的异常）。一些系统会很容易地支持这一点——但其他系统不会，因此不需要特定的响应。

# css - 相对 div 在滚动时通过固定 div

> ID：10303882
> 
> 赞同：8
> 
> 时间：2012-04-24T18:30:13.157
> 
> 标签：css

我在页面顶部有一个固定位置的 div。（例如 Facebook）和页面中相对定位的 div。当我向下滚动时，相对 div 正在通过固定 div。我希望它在固定的 div 下通过。有什么想法来处理这个吗？

![在此处输入图像描述](../Images/6dfc7fe83c72da51ed28889742358b7b.png)

```
#navcontainer
{
    position:fixed;
}

.city
{
    position:relative;
    float:left; 
}

.city .text 
{
    position:absolute;
    top:100px; 
    left:15px;
} 
```

在这个 css 中，我有一个城市 div，绝对文本位于相对 div (.city) 中的图像上

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-25T11:46:38.883

嗨，我认为你应该这样做：

**css**

```
#navcontainer
{
    position:fixed;
    background:red;
    left:0;
    right:0;
    top:0;
    height:100px;
    z-index:3;
}

.city
{
    position:relative; 
    background:green;
    left:0;
    right:0;
    padding:10px;
    top:100px;
    z-index:2;
}

.city .text 
{
    padding:10px;
    background:yellow;
}​ 
```

**HTML**

```
<div id="navcontainer">This is navigation</div>

<div class="city">
    <div class="text">here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br />here text <br /></div>
</div>
​ 
```

现场演示[http://jsfiddle.net/xLnKN/1/](http://jsfiddle.net/xLnKN/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T18:38:16.833

我认为您正在寻找的是 CSS 属性`z-index`。有关文档，请参见此处：[http ://reference.sitepoint.com/css/z-index](http://reference.sitepoint.com/css/z-index)

我拼凑了一个小例子，展示了如何将它与你的 CSS 一起使用：http: [//jsfiddle.net/B63Km/](http://jsfiddle.net/B63Km/)

基本思想是 z-index 越高，元素离你越近。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-16T09:41:11.000

对标题 div 使用较高的 z-index，即城市，为下面的 div 使用较低的 z-index（即相对的）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-24T03:39:42.870

您如何避免为此使用 z-index？Z-index 通常被认为是一种反模式，并且很容易滚雪球式地要求其他元素也需要 z-index。

# windows-mobile - Windows Mobile 6.5 - CreateProcess 运行 exe 与直接执行不同？

> ID：10303886
> 
> 赞同：1
> 
> 时间：2012-04-24T18:30:33.090
> 
> 标签：windows-mobile, windows-mobile-6.5

当用户按下按钮时，我正在尝试`capture.exe`使用我的移动设备的相机拍摄一张照片。从文件资源管理器运行`capture.exe`时，它按预期工作，离开`capture.log`并`default.jpg`在运行它的文件夹中。但是，当通过我的应用程序启动 exe 时，exe 不会创建`default.jpg`并`capture.log`包含：

```
pPropertyBag->Load( &PropBag, NULL) failed, hr = 80070037 
```

我用来启动 exe 的代码是：

```
CreateProcess(L"\\MyPath\\capture.exe", NULL, NULL, NULL, FALSE, NULL, NULL, NULL, NULL, NULL) 
```

我还尝试将路径作为第一个命令行参数以及一个空字符串传递，但无论出于何种原因`capture.exe`，在以编程方式调用时都无法正确运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:41:36.773

我怀疑 Explorer 正在使用 CreateProcess，它可能正在使用[ShellExecuteEx](http://msdn.microsoft.com/en-us/library/aa923541.aspx)，它有时会产生不同的行为。这绝对值得一试，因为这是我能想到的唯一区别。

# javascript - 为什么这个对象突然未定义？

> ID：10303889
> 
> 赞同：1
> 
> 时间：2012-04-24T18:30:41.500
> 
> 标签：javascript, jquery, json, object, undefined

这是我的 JavaScript 代码：

```
var Model =
{
    get: function(id)
    {
        return this.data[id];
    },

    data: {},

    init: function()
    {   
        var self = this;

        $.getJSON(urlToServer, function(data)
        {
            $.each(data, function(i, object)
            {
                self.data[object.id] = object;
                console.log(object.id); // output is: 1, then 2, then 3
            });
        });
    }
};

Model.init();
console.log(Model); // output is the initialized object with children objects 1, 2, 3
console.log(Model.get(1)); // output is undefined 
```

正如您从我在评论中输入的控制台输出中看到的那样，在最后一行代码之前一切正常。我定义了一个模型并使用服务器提供的一些 JSON 对象对其进行初始化。但是突然之间，当我尝试通过 get() 方法访问单个子对象时，模型似乎是未定义的。

我只是不明白，请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:38:19.213

查看您使用的示例代码，Model.get(1) 将始终返回 undefined。

$.getJSON 是一个 AJAX 调用，不一定立即返回（称为异步）。您将需要使用您提供给 $.getJSON 的回调来触发取决于 Model.get(1) 的任何逻辑，否则它将保持未定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:37:07.053

`$.getJSON`是异步请求，调用前必须等待响应`Model.get()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:33:53.063

您试图检索对象的字段“142”。我猜你只能从 json 中得到“1”、“2”和“3”的 id？如果我是对的，那么让函数返回给你正确的答案，因为不存在对象字段“142”。

# python - Python 元组数组

> ID：10303891
> 
> 赞同：1
> 
> 时间：2012-04-24T18:30:54.667
> 
> 标签：python, arrays, for-loop, numpy, tuples

我正在尝试在python中编写一个for循环来创建一个应该看起来像的元组数组

```
Output = [(0.0,C[0]),(0.0,C[1]),(0.0,C[2]), .... , (0.0,C[n-1])] 
```

其中`C`是一些其他数字的数组。

如果我尝试（适用于 matlab 的东西）

```
for n in xrange(0,N):
    Output[n]=numpy.asarray( [0.0,C[n]] ) 
```

然后我得到错误`ValueError: setting an array element with a sequence`。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T18:33:36.997

```
numpy.array([(0.0, C[x]) for x in range(n)]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T16:53:26.450

看看结构化数组（又名“记录数组”）：[http ://docs.scipy.org/doc/numpy/user/basics.rec.html](http://docs.scipy.org/doc/numpy/user/basics.rec.html)

你可以定义这样的事情：

```
>>> x = np.zeros((2,),dtype=('i4,f4,a10'))
>>> x[:] = [(1,2.,'Hello'),(2,3.,"World")]
>>> x
array([(1, 2.0, 'Hello'), (2, 3.0, 'World')],
     dtype=[('f0', '>i4'), ('f1', '>f4'), ('f2', '|S10')]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:52:14.720

怎么样：

```
output = np.zeros((N, 2), dtype='float')
output[:, 1] = C[:N] 
```

顺便说一句，“元组数组”对我来说没有多大意义。如果您的意思是对象数组（也许是 matlab 中的单元格数组？）我建议使用列表而不是数组。

# android - 有人能指出我如何 adbd 转储视图层次结构吗？

> ID：10303893
> 
> 赞同：0
> 
> 时间：2012-04-24T18:30:57.527
> 
> 标签：android, hierarchy, ui-automation

我刚刚问了这个问题：[有没有办法从另一个 android 应用程序获取 android 应用程序视图层次结构？](https://stackoverflow.com/questions/10299215/are-there-ways-to-get-android-app-view-hierarchy-from-another-android-app/10299273)

我搜索了很多android源，并阅读了源代码hierarchyviewer，似乎hierarchyviewer附加到adb，然后adb使用socket连接到adbd在模拟器或设备上运行。

我的设备已植根。现在我试图让我的 android 应用程序通过套接字连接到本地 adbd，或者通过 JNI 调用 adbd 函数。

有人可以提示我 adbd 如何转储系统的视图层次结构吗？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T18:35:41.297

HierarchyViewer 服务器不接受来自本地套接字的连接。使用 HierarchyViewer 的唯一方法是从桌面。

# logging - 在 OSGi 中使用 SLF4J 记录 Jersey

> ID：10303897
> 
> 赞同：2
> 
> 时间：2012-04-24T18:31:09.660
> 
> 标签：logging, osgi, jersey, slf4j

我在使用 OSGi (Karaf) 中的 Jersey 查看请求/响应信息时遇到问题。显然 Jersey 使用 JUL 日志记录，因此它必须桥接到 SLF4J 日志记录。我使用以下代码执行此操作：

```
java.util.logging.Logger rootLogger =
java.util.logging.LogManager.getLogManager().getLogger("");
java.util.logging.Handler[] handlers = rootLogger.getHandlers();
for (int i = 0; i < handlers.length; i++) {
     rootLogger.removeHandler(handlers[i]);
}
org.slf4j.bridge.SLF4JBridgeHandler.install(); 
```

现在，用 OSGi HttpService 注册 Jersey Servlet，我使用这个：

```
Dictionary<String, String> initParams = new Hashtable<String, String>();
initParams.put("com.sun.ws.rest.config.property.resourceConfigClass", "com.sun.ws.rest.api.core.PackagesResourceConfig");
initParams.put("com.sun.ws.rest.config.property.packages","jersey_osgi.rest");

initParams.put("com.sun.jersey.spi.container.ContainerRequestFilters",
"com.sun.jersey.api.container.filter.LoggingFilter");
initParams.put("com.sun.jersey.spi.container.ContainerResponseFilters",
"com.sun.jersey.api.container.filter.LoggingFilter");

osgiHttpService.registerServlet("/", servlet, initParams, null); 
```

当我点击 servlet 时，我得到了预期的响应（所以一切似乎都正常运行），但是没有日志条目告诉我刚刚发出了什么请求/响应。日志记录级别设置为 INFO。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:27:48.927

尝试将根记录器存储在静态字段中。`Logger`“java util logging”中的 s 通常通过软引用存储，因此您的 SLF4J 配置的处理程序可能在您使用之前被垃圾收集。

# android - onCreateOptionsMenu() 调用超级

> ID：10303898
> 
> 赞同：37
> 
> 时间：2012-04-24T18:31:10.023
> 
> 标签：android, android-optionsmenu

我正在使用**OptionsMenu**创建应用程序。`super.onCreateOptionMenu()`我找到了几个例子，但是每个人都在使用不同的地方来调用`onCreateOptionsMenu()`方法。

不同方式的列表：

```
@Override // without super
public boolean onCreateOptionsMenu(Menu menu) {
  MenuInflater inflater = getMenuInflater();
  inflater.inflate(R.menu.mymenu, menu);
  return true;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
  super.onCreateOptionsMenu(menu);
  MenuInflater inflater = getMenuInflater();
  inflater.inflate(R.menu.mymenu, menu);
  return true;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
  MenuInflater inflater = getMenuInflater();
  inflater.inflate(R.menu.mymenu, menu);
  return super.onCreateOptionsMenu(menu);
} 
```

我应该使用什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-24T18:33:49.323

这取决于你想做什么。第一个示例将放置您的菜单，并且仅放置您的菜单。第二个，将添加第一个超级菜单。最后一个将首先添加您的菜单。但是，请记住，菜单也有一个 order 字段，将在渲染时考虑在内。

假设您正在扩展一个已经有菜单的活动，但您不希望该菜单出现，而是另一个菜单。在这种情况下，您将使用第一种方法。

另一个例子：你正在扩展一个有菜单的活动，并且你想添加另一个菜单。在这种情况下，您可以使用第二种或最后一种方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T18:53:45.540

的来源`onCreateOptionsMenu()`如下：

```
public boolean onCreateOptionsMenu(Menu menu) {
    if (mParent != null) {
        return mParent.onCreateOptionsMenu(menu);
    }
    return true;
} 
```

`mParent`当前Activity的父Activity在哪里。如果您的 Activity 扩展`android.app.Activity`，则可以`true`在最后返回而不必担心调用`super`，因为默认实现将尝试显示基于父 Activity 的菜单，这可能是您不想要的。

# internet-explorer-9 - 为什么 IE9 会提供以兼容模式呈现的选项

> ID：10303900
> 
> 赞同：0
> 
> 时间：2012-04-24T18:31:22.673
> 
> 标签：internet-explorer-9, compatibility-mode

为什么在某些网站上可以选择以兼容模式呈现页面，例如地址栏中的小破碎页面图标。然后在其他网站上没有。

决定此选项是否应该存在的 ie9 逻辑是什么

即使网站是 html5 并且如果我添加了

```
<meta http-equiv="X-UA-Compatible" content="IE=9"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:37:45.467

我建议确保您设置了最近的[doctype](http://www.w3.org/QA/2002/04/valid-dtd-list.html)，以帮助 IE 决定使用哪个渲染器。如果您希望覆盖它的内置逻辑，您还可以使用此元标记为 IE9 设置渲染模式。`<meta http-equiv="X-UA-Compatible" content="IE=edge">`

IE9 使用多种方法来确定您的页面是否可能存在兼容性问题。通常这涉及使用在以后的版本中改变了行为的方法或页面组件。[在此处](http://msdn.microsoft.com/en-us/library/cc288325%28VS.85%29.aspx)找到的 msdn 文章中提到了一些示例，例如条件注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T15:15:20.923

好的，终于设法摆脱了 IE9 中的兼容模式图标。我尝试将元标记放在代码中的不同位置。但似乎总是可以选择在兼容模式下运行。

但是将以下内容添加到 .htaccess 文件中为我解决了问题。

```
Header set X-UA-Compatible "IE=edge" 
```

# haskell - 为什么会出现解析错误？

> ID：10303904
> 
> 赞同：1
> 
> 时间：2012-04-24T18:31:34.610
> 
> 标签：haskell, syntax

为什么会出现解析错误？我插入一个列表并想要取出元组。（第一行是正确的）。

```
freq :: Eq a => [a] -> [(Int,a)]
freq x:xs  = [(x,y)| (x,y) x <- count , y <- rmdups] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T18:37:58.850

这里有两个语法错误——模式上没有括号，并且错误地放在`(x,y)`了推导式中。它应该是：

```
freq (x : xs) = [(x, y) | x <- count, y <- rmdups] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:35:12.287

您必须在模式匹配中加上括号

```
freq (x:xs) = {- ... -} 
```

# c# - 需要使用c#删除Program files中的文件，文件不会删除

> ID：10303914
> 
> 赞同：0
> 
> 时间：2012-04-24T18:32:01.593
> 
> 标签：c#, admin, delete-file

为什么test文件夹中的文件不会删除？我怎样才能获得管理员权限？？

```
namespace Delete
{
    using System;
    using System.Windows.Forms;
    using System.IO;

    public class Delete
    {
        public Delete()
        {
            if (Directory.Exists(@"C:\Program Files (x86)\test\"))
            {
                string[] filePaths = Directory.GetFiles(@"C:\Program Files (x86)\test\");
                foreach (string file in filePaths) { File.Delete(file); }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:00:28.343

你需要重新考虑你的策略。

如果您在应用程序中以编程方式添加/删除文件，它们应该存储在单独的位置（不需要管理员权限来提升写入/删除等）：

1.  比如用户的数据目录/你的公司/你的应用程序，或者
2.  用户的文件/您的公司/您的应用程序

Program Files 目录用于存储与程序一起安装但安装/更新后不会更改的应用程序特定文件（DLL 等）。

以下是应用程序的用户数据目录示例：

```
public static DirectoryInfo ApplicationVersionDirectory()
{
    return new DirectoryInfo(System.Windows.Forms.Application.UserAppDataPath);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:40:47.790

这是由于 UAC。因此，要么通过右键单击以管理员身份运行您的可执行文件 - >“以管理员身份运行”，或者如果您想以编程方式执行它，请参阅其他帖子，如[Windows 7 和 Vista UAC - 以编程方式请求 C# 中的提升](https://stackoverflow.com/questions/2282448/windows-7-and-vista-uac-programatically-requesting-elevation-in-c-sharp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:44:53.790

为了从“Program Files”文件夹中删除文件，您需要以管理员身份启动应用程序。否则您将无法访问 %PROGRAMFILES%。

这是重新启动当前应用程序并以管理员身份运行的示例代码：

```
ProcessStartInfo proc = new ProcessStartInfo();
proc.UseShellExecute = true;
proc.FileName = Application.ExecutablePath;
proc.Verb = "runas";

try
            {

                Process.Start(proc);

            }

            catch

            {

                // The user refused the elevation.

                // Do nothing and return directly ...

                return;

            }

            Application.Exit();  // Quit itself 
```

# unresolved-external - 又一个未解决的外部案例

> ID：10303915
> 
> 赞同：0
> 
> 时间：2012-04-24T18:32:04.250
> 
> 标签：unresolved-external

第一次问。

这是交易：

我有一个助手类（至少现在它是一个类），它有几个数学函数，我在整个项目中使用。

```
#ifndef CUSTOM_UTILS_H
#define CUSTOM_UTILS_H
//---------------------------------------------------------
#include <stdlib.h>
#define _USE_MATH_DEFINES
#include <math.h>

class cUtil {
public:
static int utilsRandom(int from, int to);
static double utilsRandom(double from, double to);
static double giveAngle(double x, double y);
static double FoV(double cx, double cy, 
    double fx, double fy, 
    double tx, double ty, 
    double radius);
};
//---------------------------------------------------------
#endif 
```

执行：

```
#define _USE_MATH_DEFINES
#include "customUtils.h"
//---------------------------------------------------------
int cUtil::utilsRandom(int from, int to) {
if (from == to) {
    return from;
}
return (rand() % (to - from)) + from;
}
//---------------------------------------------------------
double cUtil::utilsRandom(double from, double to) {
  ...
}
//---------------------------------------------------------
double cUtil::giveAngle(double x, double y) {
  ...
}
//---------------------------------------------------------
double cUtil::FoV(double cx, double cy, 
double fx, double fy, 
double tx, double ty, 
double radius) {
  ...
}
//--------------------------------------------------------- 
```

（移除了 3 个主体以节省帖子空间）

现在，当我使用它时，假设在一个名为“creature”的类中，我将 customUtils.h 文件包含在“creature”的标题中。并使用以下 4 个函数中的任何一个：cUtil::func_name()。有时我会遇到未解决的外部错误，例如

```
LNK2001: unresolved external symbol "public: static double __cdecl cUtil::utilsRandom
(double,double)" (?utilsRandom@cUtil@@SANNN@Z)  C:\Users\Rockstrongo\Documents\Projects
\nnEvo\nnEvo\net.obj 
```

它出现在 cUtil 中的所有函数以及使用这些函数的所有类中。

我说它有时会出现，因为它就是这样做的——我将重建项目，它会重新出现。为了再次清理它，我会更改 cUtils 代码的某些部分，或者它包含在其他类中的方式，或者任何让它再次运行的东西。有一段时间，清理-> 编译 customUtils.cpp-> 然后构建其余的工作，但不再工作。

对于像我这样未经训练的眼睛来说，这似乎是完全随机的，我已经竭尽全力抓住。我正在使用 Microsoft Visual Studio 2010。这是一个使用 openGL 和 glut 的控制台项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:52:28.593

我看到你超载`cUtil::utilsRandom`使用双精度和整数。没关系，除了一件事：您不能更改返回的类型。两个重载版本都必须返回一个 int 或一个 double。如果您必须具有不同的返回类型，则不要重载该函数。而是使用不同的函数名称。

# visual-studio-2010 - Excel Range.Find 和维护用户选择的查找选项

> ID：10303917
> 
> 赞同：3
> 
> 时间：2012-04-24T18:32:10.957
> 
> 标签：visual-studio-2010, excel, vsto, excel-interop

[当使用 Excel Interop API 自动化 excel 时，我可以使用Range.Find](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.find%28v=office.14%29.aspx)方法轻松地进行范围搜索。我正在通过查找的 LookIn、LookAt、SearchOrder、SearchDirection 和 MatchCase 选项。正如 MSDN 文档所指出的那样，将传递给此方法的值保存到用户设置中，因此下次用户打开查找表单时，将选择我在 Range.Find 方法中使用的选项。

在进行程序化查找之前和之后，我需要保留查找选项的值。所以我想捕获当前的查找选项，然后执行 Range.Find，然后将查找选项设置回我搜索之前设置的选项。但是，我没有看到 find 选项可以公开访问。关于如何获得这些的任何想法？

我基本上是在寻找 LookIn、LookAt、SearchOrder、SearchDirection 和 MatchCase 的当前查找选项值。

**更新** 到目前为止，我能找到的最有趣的事情是您可以访问 Excel 应用程序对话框 -[对话框界面](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.dialogs.aspx)。所以在这里，我可以访问 FormulaFind 对话框，它与 Find and Replace 对话框略有不同，但可能会导致我正在寻找的一些属性。我没有运气，但也许有一种方法可以使用反射通过这种形式访问属性。我会继续尝试这个。

```
// xlDialogFormulaFind, xlDialogFormulaReplace
Excel.Dialog dialog = this.Application.Dialogs.Item[Excel.XlBuiltInDialog.xlDialogFormulaFind]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:50:36.980

好吧，我不确定你是否会考虑这种方法，但我会在这里试一试，以防它可能会有所帮助。

我要做的是，我会创建一个注册表项来保存您想要保留的值。然后我可以调用[RegistryKey.GetValue(valuename)](http://msdn.microsoft.com/en-us/library/fdf576x1.aspx)来检索值，前提是没有抛出异常。

只要该注册表项保持不变，并且您有足够的权限访问注册表项，您就应该能够始终获得相同的值。

希望我们可以在这里真正使用应用程序设置，这样会更容易，但是，正如您可能已经知道的那样，vsto 插件不喜欢它，根据[这篇文章](http://msdn.microsoft.com/en-us/library/k4s6c3a0.aspx)。

> 您不能在托管 .NET Framework 的非托管应用程序中使用应用程序设置。设置在 Visual Studio 加载项、Microsoft Office 的 C++、Internet Explorer 中的控件托管或 Microsoft Outlook 加载项和项目等环境中不起作用。

希望这可以帮助。

# php - 从另一个表插入数据，也从 MYSQL 和 PHP 中的表单插入数据

> ID：10303921
> 
> 赞同：0
> 
> 时间：2012-04-24T18:32:24.420
> 
> 标签：php, mysql, insert, form-submit

我有一个表格，我将数据发布到 mysql。查询应该将表单中的数据插入到 table1 中，还包括来自另一个 table2 的数据，其中从表单发送的 ID 等于 table2 中的 ID？

我使用旧的 mysql 连接，我知道，不是最好的 :-) 和 php！

希望有人可以提供帮助，谢谢:-)马丁

想也许我应该提供更多信息:-)

table1 被称为：书籍

从表单中，我有以下值：itemCode、itemQty、ownerID 我有 2 个静态值：状态、类型

table2 中必须插入 table1 的值是：title、description、price、frontcover

来自 table2 的字段 isbn 应该等于来自表单的 itemCode。

这是我到目前为止所尝试的：

```
 $bookid=$_POST['itemCode'];
$itemQty=$_POST['itemQty'];
$status='2';
$ownerID = $user->id;

$query="INSERT INTO books (name, description, price, picture, status, ownerID, itemqty, type, studie, isbn) SELECT (title, description, price, frontcover FROM isbnbooks WHERE isbn=$itemCode), $status, $ownerID, $itemQty, '1', '1', $bookid)"; 
```

更新：我也在这里尝试过这个：

```
$bookid=$_POST['itemCode'];
        $itemQty=$_POST['itemQty'];
        $status='2';
        $ownerID = $user->id;

        $data2 = mysql_fetch_array (mysql_query("SELECT * FROM isbnbooks WHERE isbn = $bookid"));
        $title = $data2[title];
        $description = $data2[description];
        $price = $data2[price];
        $picture = $data2[frontcover];

        $query="INSERT INTO books (name, description, price, picture, status, ownerID, itemqty, type, studie, isbn) 
        VALUES ($title, $description, $price, $picture, $status, $ownerID, $itemQty, '1', '1', $bookid)";
        mysql_query($query) or die("Opps some thing went wrong"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:35:37.243

在没有代码的情况下，这里是工作流 id 推荐：

提交表单 -> 检查和清理值 -> 对“表 2”执行查找查询并获取相关值 -> 使用表单和“表 2”数据提交更新查询 -> 成功更新时，通知用户他们的信息是已处理-> 谢谢他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:46:12.527

如果您有值`'a'`并`'b'`进入列`f1`和`f2`；如果您希望where`table1`的值为 123，您可以按照以下几行准备和执行 SQL 语句：`f3``table2.field``table2.id`

```
INSERT INTO table1 (f1, f2, f3)
  SELECT 'a', 'b', field FROM table2 WHERE id = 123; 
```

* * *

除了在您更新的问题中看到代码之外，您第一次尝试的问题是您试图`INSERT ... SELECT`与`INSERT ... VALUES`; 可悲的是，它们是相互排斥的。但是，您可以改为：

```
INSERT INTO books (
  name,
  description,
  price,
  picture,
  status,
  ownerID,
  itemqty,
  type,
  studie,
  isbn
)
  SELECT
    title,
    description,
    price,
    frontcover,
    :status,  -- use prepared statements to prevent SQL injection
    :ownerID, -- see http://bobby-tables.com/ for more info
    :itemQty,
    '1',      -- do you really want a string containing a number?
    '1',
    :bookid
  FROM isbnbooks
  WHERE isbn=:itemCode; 
```

您的第二次尝试看起来应该可以工作（尽管您确实应该使用准备好的语句，见上文！）；你有什么问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:41:52.220

像这样的东西？：

```
$data2 = mysql_fetch_array (mysql_query("SELECT * FROM table2 WHERE id2 = '1'"));

$data1 = data2['column2'];

mysql_query("INSERT INTO table1 VALUES('value1','$data2') WHERE id1 = id2); 
```

# assembly - mips 类型 R、I 和 J、RS、RT 和 RD 字段长度

> ID：10303930
> 
> 赞同：2
> 
> 时间：2012-04-24T18:32:53.887
> 
> 标签：assembly, mips

RS、RT 和 RD 字段有 5 位有什么特别的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:41:09.477

MIPS 具有`32`整数寄存器和`32`浮点寄存器，因此`5`需要位来表示每组`32`寄存器。

寄存器字母`d`、`t`和`s`是（寄存器）数字或寄存器名称的占位符。

阅读更多关于[维基百科](http://en.wikipedia.org/wiki/MIPS_architecture#MIPS_assembly_language)和[这里](http://www.d.umn.edu/~gshute/spimsal/talref.html#rtype)

# qt - 如何使用 getExistingDirectory 获取窗口样式路径

> ID：10303933
> 
> 赞同：3
> 
> 时间：2012-04-24T18:33:00.240
> 
> 标签：qt

下面的代码，例如将选定的文件夹路径返回为“C:/Users/guest/Desktop/MyWork”我需要将此路径传递给一个比较现有路径“C:\Users\guest\Desktop\MyWork”的 sql . 由于两个路径都包含不同类型的斜杠，因此 sql 查询无法按预期工作。

有没有办法使用下面的代码返回带有反斜杠（'\'）的路径。

```
 QString path= QFileDialog::getExistingDirectory(0, tr("Restore Files..."), "/home",  QFileDialog::ShowDirsOnly | QFileDialog::DontUseNativeDialog); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T18:48:20.437

要转换斜线：

```
path = QDir::toNativeSeparators( path ); 
```

您可以在从 sql 数据库返回的字符串上调用此函数，或者（我的偏好）您可以将其存储在数据库中，并使用已转换的斜杠。

# android - 添加 LeadBolt 应用广告 - 如何添加 Runnable

> ID：10303936
> 
> 赞同：0
> 
> 时间：2012-04-24T18:33:14.470
> 
> 标签：android, leadbolt

文档说我应该在我的代码中添加这样的东西：

```
// create a new layout 
LinearLayout layout = new LinearLayout(this); 
/* 
Add any elements to your view 
*/ 
// make the view visible 
this.setContentView(layout); 
final Activity act = this;  

// now add the banner or overlay to the app 

layout.post(new Runnable() {  //what about this line?
public void run() { 
myController = new AdController(act, MY_LB_SECTION_ID); 
myController.loadAd(); 
} 
}); 
```

我的布局是在 xml 中，我已经定义`setContentView(R.layout.config);`了我的意思是`layout.post(new Runnable() { line`. 我应该如何修改代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:54:13.957

对于任何有兴趣的人，我已经找到了明显的解决方案：

```
 RelativeLayout rellaymain = (RelativeLayout)findViewById(R.id.rellaymain); 

        final Activity act = this;  
        rellaymain.post(new Runnable() {

            public void run() { 
            myController = new AdController(act, MY_LB_SECTION_ID2); 
            myController.setAsynchTask(true);
            myController.loadAd(); 
            } 
            //});
        }); 
```

relaymain 是 .xml 文件的布局。

# javascript - 启用跨浏览器布局表单的 JS 库是如何调用的

> ID：10303937
> 
> 赞同：0
> 
> 时间：2012-04-24T18:33:17.340
> 
> 标签：javascript, html, cross-browser, cross-platform

我曾经找到一个库，它有一点 css 和 javascript，并且使表单在每个平台/浏览器中看起来都一样。

但我记不起名字了。

谢谢

# c# - 用于从 html 代码解析 url 的正则表达式

> ID：10303941
> 
> 赞同：0
> 
> 时间：2012-04-24T18:33:26.587
> 
> 标签：c#, asp.net, regex, visual-studio-2010

我想从对正则表达式更有经验的人那里得到一些帮助。我有 html 代码，我想从中解析超链接的值。整个页面的代码可以在下面附加的 html 中找到：

[http://dl.dropbox.com/u/4571235/example.html](http://dl.dropbox.com/u/4571235/example.html)

我想在文档中的每个“比较价格”按钮之后获取超链接。

欢迎任何建议。提前致谢， Laziale

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:37:39.830

[在这里](http://weblogs.asp.net/farazshahkhan/archive/2008/08/09/regex-to-find-url-within-text-and-make-them-as-link.aspx)检查。

并尝试以下代码：

```
public static bool isValidUrl(ref string url)
{
    string pattern = @"^(http|https|ftp)\://[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(:[a-zA-Z0-9]*)?/?([a-zA-Z0-9\-\._\?\,\'/\\\+&amp;%\$#\=~])*[^\.\,\)\(\s]$";
    Regex reg = new Regex(pattern, RegexOptions.Compiled | RegexOptions.IgnoreCase);
    return reg.IsMatch(url);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:46:53.410

我看到源代码中还有其他 URL - 我可以建议以下正则表达式，但只有在每个“比较价格”文本后面紧跟您感兴趣的 url 时它才能正常工作（即，如果没有“正确”之间的其他网址）。如果存在没有匹配 url 的“比较价格”文本，则需要根据某些规则更改正则表达式。

```
value="Compare prices"(?:.*?)<a\s+href="([^"]*?)" 
```

该 url 将在匹配组 1 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:56:31.683

通常链接在“a 标签”、“a link”或“img src="url”中。
如果它在 a href 标签中，您可以只检查有效的 a href，然后仅对那些执行验证对于初学者...
0\. 首先以包含按钮的形式获取所有内部 html。
1\. 然后只获取 a href 标记以进行进一步检查... pattern="<a[^>]*> " or pattern="<link[^>]*>" or pattern="<img[^>]*>"
2\. 然后为每个标签拉出链接，src 和 href 标签
3\. 然后检查看看如果 url 有效。
注意：如果您可以执行第 0 步，那么您可以最直接地获取给定类型的所有属性，然后也对它们执行正则表达式。

# objective-c - 如何将子类添加为子视图，以便在父视图前面设置子视图的背景

> ID：10303942
> 
> 赞同：0
> 
> 时间：2012-04-24T18:33:28.100
> 
> 标签：objective-c, ios, subview

我有 2 节课

```
@interface PlayScene : UIView 
```

和

```
@interface GameOverMenu : PlayScene <UITextFieldDelegate> 
```

在 PlayScene 中，我创建了一个 GameOverMenu 实例

```
GameOverMenu* gorm = [[GameOverMenu alloc]initWithFrame:CGRectMake(0, 0, 320, 520)];
gorm.backgroundColor = [UIColor blackColor];
[self addSubview:gorm]; 
```

但是背景不是为子视图设置的，而是为父视图设置的，我的意思是背景不会隐藏 PlayScene 视图的元素，以便按钮和一些绘图保留在背景前面

如果问题仍然不清楚，我想让我的子视图站在黑色（例如）背景的超级视图前面，覆盖超级视图前面的整个屏幕。好像子视图类只是从 UIView 而不是从 PlayScene 继承的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:39:51.687

使用以下任何一种方法：

*   `insertSubview: atIndex:`
*   `insertSubview: aboveSubview:`
*   `bringSubviewToFront:`

**编辑**

如果您尝试创建`GameOverMenu`其子类的实例`PlayScene`，然后将此实例添加为视图上的子视图`PlayScene`，那么您可能可以尝试分别创建一个实例`PlayScene`并将`GameOverMenu`这两个作为子视图添加到第三个视图。也许 ViewControllers查看或只是查看.. 根据您的要求...

# java - PHP 和 Java 编码问题

> ID：10303956
> 
> 赞同：2
> 
> 时间：2012-04-24T18:34:51.203
> 
> 标签：java, php, web-services, encoding

我最近编写了一个作为 Java 应用程序运行的 Web 服务（可能不是最好的主意，但我在 Java 方面比 PHP 或英语等其他语言更流利：p）。Java 应用程序只是将 JSON 数据输出到 System.out。

然后我编写了一个使用 Java 应用程序的小型 PHP 脚本。

这是我的 PHP 脚本：

```
ob_start('ob_gzhandler');
header("Content-Type: application/json; charset=UTF-8");
passthru("java -jar webservice.jar "); 
```

问题是每个特殊字符（如“é”）都输出为“??”

知道我可以尝试解决该编码问题吗？

谢谢

编辑：当我`java -jar webservice.jar`在 shell 中运行时，我没有编码问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:37:53.263

`<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>`

听起来您需要确保正确处理双字节字符:)

更多关于编码：http: [//illegalargumentexception.blogspot.com/2009/05/java-rough-guide-to-character-encoding.html](http://illegalargumentexception.blogspot.com/2009/05/java-rough-guide-to-character-encoding.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T18:04:49.957

我通过添加`-Dfile.encoding=UTF8`到我的 java 调用解决了我的问题：

```
java -Dfile.encoding=UTF8 -jar webservice.jar 
```

我想可能有更好的解决方案，但它解决了我的问题：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:40:29.880

编码是一个涉及很多变量的问题：操作系统、应用程序、bd 等。

尝试遵循这个：[http ://www.phpwact.org/php/i18n/utf-8](http://www.phpwact.org/php/i18n/utf-8)

# c# - 自定义属性 - 获取基础枚举的值

> ID：10303961
> 
> 赞同：1
> 
> 时间：2012-04-24T18:35:16.087
> 
> 标签：c#, attributes, enums

对于我正在尝试做的事情，我不确定所有正确的术语，所以我将深入研究一些代码。

### 当前设置

```
public enum NavigationLinks
{
    [FriendlyName("System Dashboard")]
    SystemDashboard,
    [FriendlyName("Trading Dashboard")]
    TradingDashboard,
}

public class UINameAttribute : Attribute
{
    public string Value { get; private set; }

    public UINameAttribute(string Value)
    {
        this.Value = Value;
    }
} 
```

### 我想要什么

```
public enum NavigationLinks
{
    [FriendlyName]
    SystemDashboard,
    [FriendlyName]
    TradingDashboard,
}

public class UINameAttribute : Attribute
{
    public string Value { get; private set; }

    public UINameAttribute(string Value)
    {
        this.Value = Value;
    }

    public UINameAttribute()
    {
        string AttributedValue = this.AttributedObject.ToString();
        // Take the value of the attribute and add a space in between the camel case.
    }
} 
```

基本上-我想知道是否可以从属性的构造函数中访问该属性所在的底层“事物”-

提前致谢！威廉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:57:32.960

不，您不能从属性的构造函数中访问属性成员。

但是，如果您已经有了如何从枚举值解析友好名称的逻辑，为什么还要这样做。

```
public enum NavigationLinks
{
    SystemDashboard,
    TradingDashboard,
}

public static class Program
{
    private static string ToFriendlyName(string defaultName)
    {
        var sb = new StringBuilder(defaultName);

        for (int i = 1; i < sb.Length; ++i)
            if (char.IsUpper(sb[i]))
            {
                sb.Insert(i, ' ');
                ++i;
            }

        return sb.ToString();
    }

    public static void Main(string[] args)
    {
        var value = NavigationLinks.SystemDashboard;

        var friendlyName = ToFriendlyName(value.ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T19:11:29.080

除了 Stipo 的方法之外，您还可以编写一个扩展方法来获取名称，如下所示：

```
public static class NavigationLinksExtension
{
    public static string GetFriendlyName(this NavigationLinks navLink)
    {
        string tmpName = navLink.ToString();
        tmpName = Regex.Replace(tmpName, "(?<=[a-z])([A-Z])", " $1"); // insert space
        return tmpName;
    }
} 
```

然后您可以简单地访问该值：

```
NavigationLinks nl = NavigationLinks.TradingDashboard;
string nlFriendlyName = nl.GetFriendlyName(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T19:14:03.953

属性不能（直接）访问它所描述的事物。如果您希望 ToString() 成为默认值并且只是偶尔覆盖它，则最好使用默认为 ToString() 的辅助函数（例如 GetFriendlyName），但如果存在，则将其替换为 FriendlyName 属性中的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T19:02:58.593

请尝试以下方法：

```
var inputString = NavigationLinks.SystemDashboard;
Regex.Replace(inputString, "([A-Z][a-z0-9]+)+", "$1$2"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T19:17:50.517

使用[DescriptionAttribute](http://msdn.microsoft.com/pt-br/library/system.componentmodel.descriptionattribute.aspx)（或创建自定义属性），然后使用 Reflection 获取值：

创建类 EnumDescriptions（使用 System.ComponentModel 和 System.Reflection）：

```
public class EnumDescriptions
{
    public static string StringValueOf(Enum value)
    {
        FieldInfo fieldInfo = value.GetType().GetField(value.ToString());

        DescriptionAttribute[] attributes = (DescriptionAttribute[])fieldInfo.GetCustomAttributes(typeof(DescriptionAttribute), false);

        return attributes[0].Description;
    } 
```

并将描述放入枚举中：

```
 public enum Animals
    {
        [Description("System Dashboard")]
        SystemDashboard,
        [Description("Trading Dashboard")]
        TradingDashboard,
    } 
```

要获取值：

```
 static void Main(string[] args)
    {
        Console.WriteLine(EnumDescriptions.StringValueOf(Animals.SystemDashboard));
        Console.WriteLine();
        Console.WriteLine(EnumDescriptions.StringValueOf(Animals.TradingDashboard));
        Console.Read();
    } 
```

# silverlight - 组合框的条件 ChangePropertyAction 触发器

> ID：10303964
> 
> 赞同：0
> 
> 时间：2012-04-24T18:35:28.710
> 
> 标签：silverlight, xaml, triggers, expression-blend

我要做的是根据对 Telerik ComboBox 的选择设置条件可见性触发器（Silverlight）。我如何告诉它查找值是否存在，然后在另一个控件上设置可见性？这个想法是，一个不同的控件甚至不可见，直到在前一个组合框中选择了某些东西。

所以像;

```
<i:Interaction.Triggers>
    <ei:DataTrigger Value="{x:Null}" Binding="{Binding Text,ElementName=FirstComboBox}">
       <ei:ChangePropertyAction TargetName="SecondComboBox" PropertyName="Visibility" Value="Collapsed"/>
    </ei:DataTrigger>
    <ei:DataTrigger Value="{A_VALUE_EXISTS_AS_CHOSEN_FROM_COMBO}" Binding="{Binding Text,ElementName=FirstComboBox}">
       <ei:ChangePropertyAction TargetName="SecondComboBox" PropertyName="Visibility" Value="Visible"/>
    </ei:DataTrigger>
</i:Interaction.Triggers> 
```

我知道我可以去看看它是否为 Null 并且不存在任何值，但是一旦从组合框中做出选择，无论选择了什么，我如何判断它是否存在值，触发 Visible 触发器？

所以更简单，如果 ComboBox1 选择了一个值，ComboBox2 变得可见？感谢您节省时间和脑力！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:31:29.643

```
[ValueConversion(typeof(string), typeof(Visibility))]
public class AuditVisabilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        string input = (string)value;
        if (string.isNullOrEmpty(input)) return Visibility.Visible;
        else return Visibility.Collapsed;
    }
    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return string.empty;
    }
} 
```

# android - 使用 ScrollBar 更新 TextView 中的“Log.i”

> ID：10303965
> 
> 赞同：0
> 
> 时间：2012-04-24T18:35:29.237
> 
> 标签：android, textview, logging, settext

我的 layout.xml 中有一个带有“id = txtLog”的 TextView。

我的应用程序的测试结果在哪里使用：

```
Log.i("Result:", "Value of x = " + x); 
```

在 LogCat 中显示结果。

是否可以在 TextView 中显示这些结果“Log.i”？

注意：我在应用程序底部留了一个空格来显示 TextView。就像一个控制台。

**我想在 TextView 上显示这些消息。如果可能，每次使用 Log.i 时创建一个滚动条并显示**

我是初学者，不知道有没有可能。不过还是谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:11:02.827

我会认为

```
myTextView.setText(myTextView.getText() + "Value of x = " + x + "\n"); 
```

会工作。

编辑：

此外，要使`TextView`可滚动，您需要设置一个移动方法，如下所示：

```
myTextView.setMovementMethod(new ScrollingMovementMethod()); 
```

编辑2：

如果您希望信息同时发送到`Log.i`和 a `TextView`，那么您需要一个方法来保存对`TextView`要更新的 的引用。

```
public static void LogToView(TextView myTextView, String title, String message) {
   Log.i(title, message);
   myTextView.setText(myTextView.getText() + title + ":  Value of x = " + x + "\n");
} 
```

把它放在任何类或你的活动类中。使用它代替，`Log.i`消息将传递给两者。

# matlab - 如何区分MATLAB中的双峰和单峰阵列？

> ID：10303968
> 
> 赞同：12
> 
> 时间：2012-01-05T20:59:03.233
> 
> 标签：matlab

![在此处输入图像描述](../Images/6925ecbf46569515c9bfe3de0bad2be5.png)

如何区分双峰阵列和单峰阵列？

此外，如果数组表示双峰，如何找到两个峰之间的最小点？在寻找最小点时，不应考虑峰外的最小点（左峰的左侧和右峰的右侧）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-01-05T21:24:43.713

这是一种可能会根据您的信号噪声程度起作用的算法。在这里，我将峰值定义为大于给定阈值的一组连接点。

假设您的原始数据位于数组*A*中。首先，找到一个阈值：

```
t = (max(A)+min(A))/2; 
```

接下来，找到所有大于此阈值*t*的点：

```
P = A>t; 
```

使用[*bwlabel 计算*](http://www.mathworks.com/help/toolbox/images/ref/bwlabel.html)大于*t的连接条目点的数量*[](http://www.mathworks.com/help/toolbox/images/ref/bwlabel.html)

 *```
L = bwlabel(P);
numberOfPeaks = max(L); 
```

现在*numberOfPeaks*应该告诉您数据中有多少个峰值（连接点大于阈值）

*现在要找到两个峰值之间的最小点，我们需要使用标签矩阵L*识别将两个峰值分开的那些点。

```
firstPoint = find(L==1,1,'last')+1;
lastPoint  = find(L==2,1,'first')-1; 
```

所以前两个峰之间的山谷是索引在*firsPoint*和*lastPoint*之间的点。那么最小值将是

```
minValue = min(A(firstPoint:lastPoint)); 
```

***不依赖于图像处理工具箱的解决方案***

正如@Nzbuu 指出的那样，两者都依赖于图像处理工具箱函数 bwlabel。所以，这里是为了避免这种情况。首先，我假设数组 P 正确识别了属于峰的点 ( *P(i)=1* ) 和属于谷的点 ( *P(i)=-1* )。`dP = P(i+1)-P(i) = 1`如果是这种情况，则可以在或时识别峰谷之间的边界`-1`。

```
dP = diff(P); 
```

要计算峰值的数量，只需将 1 的数量相加`dP`：

```
numberOfPeaks = sum(dP==1); 
```

识别第一个山谷的点在

```
firstPoint = find(dP==-1,1,'first')+1 %# the -1 represents the last point of the peak so add 1
lastPoint = find(dP==1,2,'first'); #% Find the start of the second peak
lastPoint = lastPoint(end); #% Keep the last value 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-01-06T04:04:47.150

我发现[**PEAKDET**](http://billauer.co.il/peakdet.html)函数非常可靠和快速，尽管它是基于循环的。它不需要对噪声数据进行预平滑，而是找到差异大于参数的局部最大和最小极值`delta`。

由于 PEAKDET 从左到右运行，它有时会错过正确位置的峰值。为了避免它，我更喜欢运行它两次：

```
%# some data
n = 100;
x = linspace(0,3*pi,n);
y = sin(x) + rand(1,n)/5;

%# run peakdet twice left-to-right and right-to-left
delta = 0.5;
[ymaxtab, ymintab] = peakdet(y, delta, x);
[ymaxtab2, ymintab2] = peakdet(y(end:-1:1), delta, x(end:-1:1));
ymaxtab = unique([ymaxtab; ymaxtab2],'rows');
ymintab = unique([ymintab; ymintab2],'rows');

%# plot the curve and show extreme points based on number of peaks
plot(x,y)
hold on
if size(ymaxtab,1) == 2 && size(ymintab,1) == 1 %# if double peak
    plot(ymintab(:,1),ymintab(:,2),'r.','markersize',30)
elseif size(ymaxtab,1) == 1 && size(ymintab,1) == 0 %# if single peak
    plot(ymaxtab(:,1),ymaxtab(:,2),'r.','markersize',30)
else %# if more (or less)
    plot(ymintab(:,1),ymintab(:,2),'r.','markersize',30)
    plot(ymaxtab(:,1),ymaxtab(:,2),'r.','markersize',30)
end
hold off 
```

![两个峰示例](../Images/4a2de70f2aa183f4da64e69776adfb06.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-01-05T22:58:20.590

您可以按如下方式找到本地最小值/最大值：

```
x = 0:.1:4*pi;
y = sin(x);

plot(x,y)

diffy = diff(y);
localMin = find(diffy(1:end-1)<=0 & diffy(2:end) > 0)+1;
localMax = find(diffy(1:end-1)>=0 & diffy(2:end) < 0)+1;

hold on
plot(x(localMin),y(localMin),'dg')
plot(x(localMax),y(localMax),'*r') 
```

导致： ![在此处输入图像描述](../Images/fbbc3e82787b4840fa97c8761c978737.png)

基本上，您会找到 y 值之间的增量变化符号的位置。如果您的数据嘈杂，这将导致大量本地最小值/最大值，您可能需要过滤数据。

要找到两个峰值之间的最小值，您可以执行以下操作：

```
if numel(localMax) == 1
    fprintf('The max value is: %f',y(localMax));
elseif numel(localMax > 1)
    betweenPeaksIndex = localMin(localMin > localMax(1) & localMin <localMax(2));
    fprintf('The min between the first 2 peaks is: %f',y(betweenPeaksIndex));
else
    fprintf('The was no local Max ..???');
end 
```*

# hibernate - Hibernate 回调的优点

> ID：10303972
> 
> 赞同：0
> 
> 时间：2012-04-24T18:35:40.020
> 
> 标签：hibernate, callback

与传统方法相比，Hibernate 回调有哪些优势？有没有影响性能的场景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:54:57.880

*使用传统方法*很难猜出您的意思。如果您的意思是与“旧”休眠拦截器相比，主要优势是可移植性。

如果您的意思是 100% 自己实现事件处理，主要优点是回调为您提供了易于访问且相对明确指定的事件挂钩。轻松访问使您免于自己实现相同功能的负担。使用有据可查的，在 JPA 的情况下甚至是非常明确的 API，而不是本地实现通常是更好的选择。使用标准构建块可以让下一个开发人员更容易理解代码。

回调对性能的影响程度取决于回调方法中执行的繁重操作。广泛的日志记录或其他一些 I/O 操作（如针对数据库中的数据进行审计）当然会导致严重的性能损失。

# iphone - Xcode 更新到 4.3.2 弄乱了我的证书

> ID：10303978
> 
> 赞同：0
> 
> 时间：2012-04-24T18:36:01.267
> 
> 标签：iphone, ios, xcode, certificate, xcode4.3

上周我完成了一个应用程序并从 Xcode 4 提交到苹果商店

现在我更新到 Xcode 4.3.2 和我得到的同一个应用程序：

> 找不到此可执行文件的有效配置文件

然后经过几次搜索和测试，我意识到两件事：

*   我的证书到期日期设置为 2012 年 5 月 2 日，这很奇怪。但我认为这没什么大不了的，因为我上周刚刚上传了我的应用程序

*   当我进入管理器并检查我的 iPhone 4S 配置文件时，它们都是黄色的。所以我删除了它们。

这一秒让我再次进入配置门户并检查我注册的电话。意识到我的新 iPhone 4S 不存在了。但是当我回到管理器时，“将其用于开发”按钮不再存在。可能是因为我在 Xcode 4 上尝试过。

无论如何，我如何更新我的证书以刷新到期日期？更重要的是如何将我的新手机添加到门户？只需设置 id 和 name 并刷新组织者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:56:43.733

我设法清除了所有证书并重新下载了所有内容。

# javascript - 如何使用javascript获取jsf表数据？

> ID：10303980
> 
> 赞同：0
> 
> 时间：2012-04-24T18:36:23.167
> 
> 标签：javascript, jsf, datatable

我有从支持 bean ArrayList 填充的 jsf 数据表。现在我需要将值与表的一列中的值进行比较，我该怎么做？

我的数据表：

```
<t:dataTable var="tabl"
rowIndexVar="rownum" 
id="data" 
value="#{bean.sortedList}"
> 
```

.......... 我要比较数据的列：

```
<t:column>
    <f:facet name="header">
        <h:commandLink>
            <h:outputText  value="sortedList"/>
        </h:commandLink>
    </f:facet>
     <f:verbatim>&nbsp;</f:verbatim>
    <h:inputText value="#{tabl.numbers}"
                id="numbers">
    </h:inputText>
</t:column> 
```

我的表结构：

```
<tbody id="myForm:data:tbody_element">
<tr>
...
<td>&#160;<input id="myForm:data:0:workAreaNumberU" name="myForm:data:0:workAreaNumberU" type="text" value="0001" size="4" onkeyup="value_altered(0);"></td>
</tr>
....
<tr>
...
<td>&#160;<span id="_idJsp1:data:1:workAreaNumber">0104</span></td>
...
</tr>
</tbody> 
```

终于这样解决了（基于我的表结构）

```
var table = document.getElementById("myForm:data:tbody_element");
var new_wa;
for (var i = 0, row; row = table.rows[i]; i++) {
    var new_wa_box = document.getElementById("myForm:data:" + i + ":workAreaNumberU");
    if( new_wa_box != null ) {
        new_wa = new_wa_box.value;
    }else{
        new_wa_box = document.getElementById("myForm:data:" + i + ":workAreaNumber");
        new_wa = new_wa_box.innerHTML;
        }
    alert("row new_wa_box = "+new_wa);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:45:04.687

这不是 JSF 问题。这与使用纯 HTML 时没有什么不同。JavaScript 不适用于 JSF 源代码，但只能使用其生成的 HTML 输出（正如您可以通过右键单击并在浏览器中*查看源代码*看到的那样）。您的具体错误是您使用`element.innerHTML`它返回整个 HTML 内容，而不是从第一个元素然后它的属性`<td>`获取元素。`<input>``<td>``value`

这应该为您提供 的第一个`<input>`元素的值，`<td>`为简洁起见省略了预检查：

```
var value = col.getElementsByTagName("input")[0].value; 
```

我只是想知道在 JavaScript 中而不是在 JSF 中做这一切的用处。

# c++ - 如何组织要渲染的对象

> ID：10303983
> 
> 赞同：0
> 
> 时间：2012-04-24T18:36:50.580
> 
> 标签：c++, opengl, wavefront

我想渲染从波前 obj 文件导入的对象。该对象具有多个组和材质：

```
# group one
g one
v ...
vt ...
vn ...
# material A
usemtl ...
f ...
# material B
usemtl ...
f ..

# second group
g two
v ...
vt ...
vn ...
# material C
usemtl ...
f ...
# material D
usemtl ...
f ... 
```

模型的不同部分需要单独渲染，因为它们具有不同的材质。

我将构建一个包含有关模型的信息的容器，并且我想知道组织要渲染的对象的“队列”的最佳/常用方法是什么。

我的想法，我不知道它是否好，如下（使用伪代码）：对于每个组，`g`将所有顶点信息存储在 object 中`VertexInformation g1, g2`，并将每个`usemtl`关于面（和使用的材料）的信息存储在`FaceInformation f1, f2, f3, f4`.

然后渲染将如下所示：

```
load vertices g1
render f1 f2
load vertices g2
render f3 f4 
```

`g1`或者也许更好地一次加载所有顶点`g2`？

是这样吗？或者它有一些巨大的缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:42:01.780

我建议您声明接口 IModel 并在 WavefrontModel 等不同的模型中实现它：

```
class IModel{
public:
 virtual bool drawModel() =0;
};

class WavefrontModel : public IModel{
public:
  bool drawModel();
}; 
```

我在这里有一个例子： [http ://code.google.com/p/gstmultimedialib/source/browse/#svn%2Ftrunk%2Fgstmultimedialib%2FGLEngine%2FGLEngine%2FModel](http://code.google.com/p/gstmultimedialib/source/browse/#svn%2Ftrunk%2Fgstmultimedialib%2FGLEngine%2FGLEngine%2FModel)

如果你愿意，你可以从这个项目中获取 glEngine 模块。

之后实现您的场景或设备，其中将包含您的模型列表。

```
class Device{
private:
 std::list< IModel* > m_models;

public:
 bool drawScene(); //iterate all of your models and call the draw method here.
}; 
```

# shell - 从 Solaris KornShell 运行 .ksh 脚本

> ID：10303986
> 
> 赞同：2
> 
> 时间：2012-04-24T18:36:52.423
> 
> 标签：shell, unix, solaris, ksh

我开发了一些在 Solaris 上运行的 KornShell (ksh) 脚本。我在 Putty 上运行脚本。在一台服务器上，我可以按如下方式运行它们：

```
$ script.ksh 
```

另一方面，服务器，我需要按如下方式运行它们：

```
$ ./script.ksh 
```

否则我得到一个 script.ksh not found 错误。什么会导致这种差异？我从该脚本中调用脚本，并且不想更改所有脚本以将“./”附加到每个脚本调用以使脚本正常工作。

两台服务器 uname -a 报告如下：

```
$ uname -a = SunOS servername 5.10 Generic_147440-10 sun4u sparc SUNW,Sun-Fire-V245
$ echo $SHELL = /bin/ksh 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:54:20.077

添加`PATH="$PATH:."`到主脚本。

# asp.net - HostingEnvironment.MapPath 问题 asp.net mvc 3.0

> ID：10303987
> 
> 赞同：0
> 
> 时间：2012-04-24T18:36:58.787
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我试图托管一个在本地运行良好的 asp.net mvc (3.0) 应用程序 (discountasp.net)，但是当我在主机的服务器上运行它时，我得到：

找不到路径“E:\web\bladibla\htdocs\xyz\in_e14095d9-59be-4f46-acff-b0125727ed9f”的一部分。

我在用：

```
HostingEnvironment.MapPath(VirtualPathUtility.ToAbsolute("/xyz")) + "/"; 
```

确定服务器上存在的文件夹。我的程序必须在这个文件夹中写入和读取一些 tmep 文件。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:50:09.057

你可以试试

```
Server.MapPath("~/xyz") + "/"; 
```

如果 xyz 是应用程序根目录下的文件夹。

# google-analytics - 如何从 Google Analytics 中删除网站

> ID：10303991
> 
> 赞同：0
> 
> 时间：2012-04-24T18:37:08.350
> 
> 标签：google-analytics

我可以访问前雇主的网站分析。该网站是一种内部工具，无法以公开的方式使用。我想从我的分析帐户中删除此网站/个人资料。我已经搜索了分析文档，但它似乎有点过时了。有没有人知道如何做到这一点？

感谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:17:53.383

**如果您只想为您的**帐户“删除”配置文件，请要求配置文件的管理员将您从用户列表中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-15T00:47:16.193

Google 现在有一种方法可以从您的管理列表中删除一个帐户（网站），而无需删除其他用户可能依赖的 GA 帐户。

从 GA Admin 屏幕中，选择您要删除的帐户。在第一列（帐户）中，选择用户管理 -> 从该帐户中删除我自己。

# jquery - 在此 jquery 代码中找到选择时如何停止/中断执行？

> ID：10303992
> 
> 赞同：1
> 
> 时间：2012-04-24T18:37:13.683
> 
> 标签：jquery

我在论坛上从你们那里得到了以下代码的帮助，代码运行良好，但客户抛出了一个曲线球。在此 jquery 代码中找到选择时如何停止/中断执行？他们希望为几个项目类型选择显示相同的字段集。但是由于代码继续运行，如果出现相同的“sect_id”，它会关闭 FS。我如何放入一个**break**，所以当它找到匹配的值时，它就停止搜索？

```
$('fieldset#section-841', 'fieldset#section-837' ).hide();
    var DM_projtype = new Array(
        {value : 'Direct Mail', sect_id : 'fieldset#section-841'},
        {value : 'Multiples2-92', sect_id : 'fieldset#section-837'},
        {value : 'Multiples10+', sect_id : 'fieldset#section-837'}
    );
    $('select#3596').on('change',function() {
        var thisValue = $(this).val();
        var sect_id = '';
        $(DM_projtype).each(function()
        {
           $(this.sect_id).hide();
           if(this.value == thisValue)
               $(this.sect_id).show();
       });

   });
) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T18:38:24.650

只需添加`return false`. 见下文，

```
 $(DM_projtype).each(function()
   {
       $(this.sect_id).hide();

       if(this.value == thisValue) {
          $(this.sect_id).show();
          return false; // will break out of loop
       }

   }); 
```

# wordpress - 循环中前两个帖子的不同大小的缩略图

> ID：10303993
> 
> 赞同：0
> 
> 时间：2012-04-24T18:37:31.597
> 
> 标签：wordpress, loops, thumbnails

几天来我一直在努力解决这个问题，虽然我还没有开始工作，但你们在 stackoverflow 的人到目前为止是最有帮助的。

迄今为止，我已经在我的 functions.php 中制作了 1 个自定义缩略图，并且一直在尝试将我的主题选项代码用于其他大小。

自定义缩略图： `add_image_size('br-thumb', 623, 380, true );`

主题选项代码： `<?php if ( $woo_options[ 'woo_post_content' ] != "content" ) woo_image( 'width='.$woo_options[ 'woo_thumb_w' ].'&height='.$woo_options[ 'woo_thumb_h'].'&class=thumbnail '.$woo_options[ 'woo_thumb_align' ]); ?>`

习惯是我想要的前两个。

*我已经尝试了几种不同的循环，用不同的方式为第一*篇文章制作单独的代码，但它们都是为只更改一篇文章而编写的。我使用了其中包含数字的那些，例如 $i == 1 或 $count == 1，因此我可以将它们更改为 == 2，但我的尝试都没有任何结果。

我计划使用 category-ID.php 文件并从循环中删除许多其他主题选项，因此几乎尝试从头开始构建它。帖子之间的唯一区别是缩略图。

有什么想法，stackoverflow 的超级聪明人，他们的解决方案在不知不觉中一次又一次地拯救了我的皮肤？:D

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:32:52.383

```
while ( have_posts() ) : the_post();
    switch ( $wp_query->current_post ) {
        case 0 :
            // First image code here
            break;
        case 1 :
            // Second image code here
            break;
        default :
            // All other image code here
    }
endwhile; 
```

# java - 无法使用 mysqldump 创建备份 sql 文件

> ID：10303995
> 
> 赞同：1
> 
> 时间：2012-04-24T18:37:33.933
> 
> 标签：java, mysql

我想创建备份mysql文件（表结构+数据）。这是我的代码：- 在 cmd.exe

```
mysqldump -u root -p123 mydb > mydump.sql 
```

mydb 是我的数据库名称，密码是 123。几个月前，代码片段就起作用了。但现在它给了我

```
Access denied 
```

在代码中，我替换`>`为`-r` Then 它说

```
mysqldump: can't create/write to file mydump.sql errcode:13 
```

[这里](https://stackoverflow.com/questions/8200076/mysql-database-backup-with-mysqldump)和[这里](https://stackoverflow.com/questions/8345036/transfer-mysql-data-to-a-new-database-structure)是我以前的 sql 问题，它们之前工作得很好。但现在不工作了。此外，我很高兴以下用 java 编写的代码运行良好并创建了一个转储 sql 文件。

```
* Process runtimeProcess = Runtime.getRuntime().exec("C:\\Program Files\\MySQL\\MySQL Server 5.5\\bin\\mysqldump -u root -p123 mydb -r " + destination); 
```

为什么我不能在cmd中写入并创建转储文件？我的操作系统是 Windows 7 并使用 KasperSky（现在已过期，我尝试使用上述代码关闭病毒防护。但没有任何变化）有人告诉我，解决方案在哪里或解决方案是什么？

**编辑** 我认为，问题可能出在 cmd 执行中。因为，我在java应用程序中尝试了相同的代码`*Process`（我已经提到了上面的代码）。它运行良好并创建转储文件。我仍然找不到这个 errcode13.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:30:58.690

尝试

```
cmd /c start mysqldump --user=usr--password=pass-h localhost --databases schemaName -r file.sql 
```

并验证 mysqldump 是否在类路径中

# c# - MVC3 Razor 提供内存中文件的链接（不在磁盘上）

> ID：10303997
> 
> 赞同：1
> 
> 时间：2012-04-24T18:37:37.867
> 
> 标签：c#, asp.net-mvc-3, razor, eml

我有一些带有附件的 EML 文件。我已经解析了 EML 文件并提取了附件，如果我这样做：

File.WriteAllBytes(attachment.Name, Convert.FromBase64String(attachment.Data))

我将附件转储到文件中。我想要做的是有一个链接，这样当用户点击它时，附件就会下载。

如果它的文件已经在磁盘上就很容易了，但是我有这个 base64 编码的字符串，我可以将它转换为字节数组。如何获取此 base64 编码字符串（或转换后的字节数组）并直接生成指向该字符串的链接？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:41:11.973

您将返回一个`FileResult`类，其中包含来自其他一些操作方法的数据：

```
 public ActionResult DownloadData(string fileNameOrWhatever)
 {
      byte[] fileData = ...;

      return File(fileData, "someMimeType", "downloadNameToBeDisplayed");
 } 
```

然后，您的链接将指向此处：

```
<a href="/DownloadData/Something">Click me!</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:41:44.620

这是MVC吗？您可以创建一个返回 a 的控制器方法`FileStreamResult`，创建一个链接到它的操作并将数据写入其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:44:55.390

我有一个项目，我在服务器上创建了一个 Excel 文档，用户在导航到特定操作时将收到该文件作为下载文件。这是我正在使用的代码，我认为您可以根据需要对其进行重构：

```
 public void GetExcel(string id)
    {
        ExcelPackage p = new ExcelPackage(); 

        //code to add data to the document            

        Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
        Response.AddHeader("content-disposition", "attachment;  filename=BitlyReport.xlsx");
        MemoryStream stream = new MemoryStream(p.GetAsByteArray());
        Response.OutputStream.Write(stream.ToArray(), 0, stream.ToArray().Length);

        Response.Flush();

        Response.Close();
    } 
```