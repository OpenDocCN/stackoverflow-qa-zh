# StackOverflow 问答 10885000-10885999

# asp.net - ASP.NET 模拟设计

> ID：10885004
> 
> 赞同：0
> 
> 时间：2012-06-04T16:51:27.630
> 
> 标签：asp.net

这是我的 ASP.NET 身份验证操作。

```
 private void LoginButton_Click(Object sender,
                       EventArgs e)
    {
        string userName = txtUserName.Value;
        string password = txtUserPass.Value;

        if (ValidateUser(txtUserName.Value, txtUserPass.Value))
        {
            FormsAuthenticationTicket tkt;
            string cookiestr;
            HttpCookie ck;
            tkt = new FormsAuthenticationTicket(1, txtUserName.Value, DateTime.Now,
                                                DateTime.Now.AddMinutes(3), chkPersistCookie.Checked,
                                                userName + "@ticket");
            cookiestr = FormsAuthentication.Encrypt(tkt);
            ck = new HttpCookie(FormsAuthentication.FormsCookieName, cookiestr);
            if (chkPersistCookie.Checked)
                ck.Expires = tkt.Expiration;
            ck.Path = FormsAuthentication.FormsCookiePath;
            Response.Cookies.Add(ck);

            string strRedirect;
            strRedirect = Request["ReturnUrl"];
            if (strRedirect == null)
                strRedirect = "MyAccount.aspx";
            Response.Redirect(strRedirect, true);
        }
        else
            Response.Redirect("logon.aspx", true);

    } 
```

我的数据库中有用户表，其中保存了所有凭据。使用`ValidateUser`方法我正在做凭据验证。我也有三种类型的用户：会员、版主和管理员。每种类型的成员都有独特的功能。假设我的数据库中存储了 A、B 和 C T-SQL。

我应该让：

*成员*只执行一个查询。

*主持人*执行 A 和 B。

*管理员*执行 A、B 和 C。

当然，我可以从 Web 应用程序管理执行，但我不确定它有多安全。从技术上讲，我可以在 App 之外执行类似的查询，从而可以访问所有数据库数据。我还想以某种方式将 Web App 登录和 Db 访问结合起来。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:57:36.473

如果这些查询将来自 Web 应用程序，我认为您需要管理调用过程的代码端。您可以在数据库中维护一个 url 列表，分配角色，并让这些角色访问特定的 url . 这些 url 将决定用户可以执行哪些查询......

然后在您的代码中，您可以分配自定义属性以限制对它们的访问......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:22:31.467

[http://msdn.microsoft.com/en-us/library/ff647396.aspx](http://msdn.microsoft.com/en-us/library/ff647396.aspx)

# ios - ArgumentError：错误 #2015：位图数据无效。在 iOS 上

> ID：10885006
> 
> 赞同：0
> 
> 时间：2012-06-04T16:51:33.263
> 
> 标签：ios, actionscript-3, ipad, air, bitmapdata

最简单的涂鸦应用。该代码在桌面和 Android 上运行良好。如果我尝试在 iOS 上做同样的事情（在真实设备上测试 - iPad 2），我会收到此错误：ArgumentError: Error # 2015: Invalid BitmapData.

原则上，很明显为什么错误 - BitmapData 的大小很大。

为什么会发生？为什么只在 iOS 上？

```
private var maskLine:Sprite = new Sprite();
stage.addEventListener(MouseEvent.MOUSE_MOVE,onMove);
stage.addEventListener(MouseEvent.MOUSE_DOWN,onDown);
stage.addEventListener(MouseEvent.MOUSE_UP,onUp);

protected function onDown(ev:MouseEvent):void {
maskLine.graphics.lineStyle(20, 0x33CC00, 1);
maskLine.graphics.moveTo(mouseX, mouseY);
stage.addEventListener(MouseEvent.MOUSE_MOVE, onMove);
}
protected function onUp(ev:MouseEvent):void {
    stage.removeEventListener(MouseEvent.MOUSE_MOVE, onMove);
}

protected function onMove(ev:MouseEvent):void {
    maskLine.graphics.lineTo(mouseX, mouseY);
} 
```

保存在位图代码中：

```
 maskLine.filters = [new BlurFilter(4, 4, 1)];
        trace (Capabilities.screenResolutionX + '   ' + Capabilities.screenResolutionY + '  ' + maskLine.width + '   ' + maskLine.height);
    //768    1024    107374182.35    107374182.35
// Here is get error
        var bmpd:BitmapData = new BitmapData(maskLine.width, maskLine.height, true, 0x000000);
        bmpd.draw(maskLine); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:43:53.020

[按照这里的要求是答案。](http://blog.yoz.sk/2010/10/quick-tip-stage-mousex-on-androi/)

# jquery - jQuery 触发器不使用 bind() 或 on() 触发自定义事件

> ID：10885009
> 
> 赞同：14
> 
> 时间：2012-06-04T16:51:47.700
> 
> 标签：jquery, triggers, bind, jquery-events, custom-events

谁能告诉我为什么这段代码不起作用？

```
$('body').on('test', function() {
  alert('test');
});

$('body').trigger('test'); 
```

我正在使用**jquery-1.7.2.min**。我没有收到任何错误，只是没有任何反应。

我尝试将代码放在内联脚本中，在 a 中`$(document).ready()`，但仍然没有。我也试过了`on()`，`bind()`都没有结果。我看到所有示例都显示相同的语法，那么这有什么不同呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T17:54:59.597

看来问题在于 DOM 以某种方式准备就绪。将代码放在内联脚本中是行不通的。将它放在 a`$(document).ready()`中可以使用匿名函数，但由于某种原因，不能使用 '( )' 进行函数调用。这段代码有效

```
$(document).ready(start);
function start(){
$('body').on('test', function() {
  alert('test');
});

$('body').trigger('test');
} 
```

但这并没有... *注意函数调用括号。

```
$(document).ready(start());
function start(){
$('body').on('test', function() {
  alert('test');
});

$('body').trigger('test');
} 
```

一个确切的示例在[jsfiddle](http://jsfiddle.net)上可以双向使用，但由于某种原因，我的服务器上只有一种方式可以使用。我想这会引发另一个问题，但至少我们可以看到这段代码确实有效，我的东西有一些奇怪的异常：/

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T17:07:01.737

尝试委托：

```
$(document).on('test', 'body', function() {
  alert('test');
});

$('body').trigger('test'); 
```

这就像以前的 live() 一样工作。 [http://api.jquery.com/live/](http://api.jquery.com/live/)

# c# - 根据 DB 值对属性进行序列化和反序列化

> ID：10885010
> 
> 赞同：1
> 
> 时间：2012-06-04T16:51:49.807
> 
> 标签：c#, .net, serialization, xmlserializer

我有一个具有 bool 属性的简单类。此属性的“获取”逻辑执行存储过程以从数据库返回位字段。

然后我序列化这个类并将它保存到数据库中的一个 XML 字段中。它很好地保存了类和 bool 属性，没问题。

我似乎遇到的问题是当我反序列化这个类时。该类反序列化就好了，但是当驱动bool字段的数据已经更新时，该类似乎只识别XML中序列化的内容，并且它没有回溯数据库获取新的bool值（不执行我获取新更新位字段的过程）。

我的解决方案是将 XmlIgnoreAttribute 属性添加到该字段，因此它一开始就不会被序列化。但我想知道是否有人注意到这一点和/或可以帮助我理解 .NET XmlSerializer 类的内部工作。

谢谢！

```
[XmlIgnoreAttribute]
    public bool IsUpdated
    {
        get
        {
            DataTable dtResults = mclsSQLServerTool.LoadDataTable("exec stp_RL_SEL_NameIsUpdated '" + mstrName + "'");
            bool blnIsUpdated = Convert.ToBoolean(dtResults.Rows[0]["RU_bitIsUpdated"]);

            return blnIsUpdated;

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:16:42.293

恕我直言，这是对属性的滥用。属性后面应该有很少或没有代码。如果此代码曾经在客户端-服务器应用程序中使用过，您可能会从客户端进行数据库调用。我建议将其更改为方法调用。如果要序列化结果，请将“Convert.ToBoolean”的结果存储在属性中。现在对于属性值是什么有点清楚了。

像这样的东西...

```
public bool IsUpdated { get; private set; }

public bool IsDataUpdated()
{ 
     DataTable dtResults = mclsSQLServerTool.LoadDataTable("exec stp_RL_SEL_NameIsUpdated '" + mstrName + "'"); 
     IsUpdated = Convert.ToBoolean(dtResults.Rows[0]["RU_bitIsUpdated"]); 

     return IsUpdated; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:33:48.883

这里首先要注意的是这`[XmlIgnore]`是多余的；`XmlSerializer`对只获取属性（列表除外）根本**不感兴趣**，因为它知道它不能反序列化它们。例如：

```
public class SomeType
{
    public string Foo { get; set; }
    public string Bar { get { Console.WriteLine("get_Bar"); return "abc"; } }

    static void Main()
    {
        var ser = new XmlSerializer(typeof (SomeType));
        ser.Serialize(Console.Out, new SomeType { Foo = "def" });
    }
} 
```

输出（减去命名空间别名等）：

```
<SomeType>
  <Foo>def</Foo>
</SomeType> 
```

（注意`Bar`没有被调用）

对于反序列化，过程（对于简单值，而不是列表）很简单：当在传入的 xml 流中找到值时，将它们解析为成员并分配它们 - 即 xml-deserializer 基本上是基于传入的美化 switch 语句xml 节点。

除非数据在传入的 xml 中（并且属性是读/写的），否则它*永远不会*随机调用“集合”；当它这样*做*时，它*期望分配一个值*。

您的场景中有趣的是您的“get”不会在任何地方分配值 - 没有缓存。所以实际上，不碰它并不重要*——*`XmlSerializer`每次你访问`IsUpdated`它时都会进行查询。就我个人而言，我怀疑这是一个错误，并可能导致激进和不可预测的数据查询。

许多序列化程序支持序列化回调的概念，这将允许您在序列化结束时执行一些代码；但是，`XmlSerializer` ***不***支持这一点。所以这不是一个选择。

目前还不是很清楚你想要实现什么，但我只是在某个时候调用一个方法。

# actionscript-3 - 如何在横向使用 FlexPrintJob 进行打印？

> ID：10885024
> 
> 赞同：1
> 
> 时间：2012-06-04T16:52:39.580
> 
> 标签：actionscript-3, apache-flex, mxml

如何使用 FlexPrintJob 以横向打印 flex 组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:40:44.273

FlexPrintJob 没有方向属性。Flex Bug 和管理系统[SDK-11211](http://bugs.adobe.com/jira/browse/SDK-11211)中报告了一个案例。有[解决方法](http://jessewarden.com/2008/09/forcing-landscape-printing-in-flex-2-3.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20jessewarden%20%28Flex%20and%20Flash%20Developer%20-%20Jesse%20Warden%20dot%20Kizz-ohm%29)，但它不是很有效。如果有人知道更好的解决方案，我会很感兴趣地看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T07:21:11.763

您可以旋转组件 (component.rotation = 90)，然后打印并再次旋转它。

# objective-c - 如何通过 touch.view 和 isKindOfClass 选择对象？

> ID：10885025
> 
> 赞同：0
> 
> 时间：2012-06-04T16:52:40.530
> 
> 标签：objective-c, class, object, touchesbegan

我有简单的 if case in`touchesBegan`方法：

```
if ([touch.view isKindOfClass:[Direction class]])
{
    //select tapped object and do something...
} 
```

我已经查看了许多`Direction`对象，当我点击一个我想选择它时，例如：

```
Direction *d = [touch.view].selectedObject; //something like that. 
```

我可以在 obj-C 中做到这一点吗？或者我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:54:26.880

```
if ([touch.view isKindOfClass:[Direction class]])
{
    //do something...
    Direction *d = (Direction*)[touch view];
} 
```

# selenium-webdriver - Selenium 'ant run-demo-in-parallel' 命令失败？

> ID：10885031
> 
> 赞同：0
> 
> 时间：2012-06-04T16:53:04.527
> 
> 标签：selenium-webdriver, selenium-grid, automated-tests, remote-control

我正在尝试成功运行 Selenium Grid Demo，但我遇到了问题。

我使用 4 个本地主机远程控制正确设置了集线器。当我尝试并行运行它们时，我得到以下结果：

```
 [java]
[java] ===============================================
[java] Selenium Grid Demo In Parallel
[java] Total tests run: 4, Failures: 4, Skips: 0
[java] ===============================================
[java] 
```

[构建失败：\Selenium Grid\selenium-grid-1.0.8-bin\selenium-grid-1.0.8\build.xml:137：Java 返回：1 总时间：1 秒：\Selenium Grid\selenium-grid- 1.0.8-bin\selenium-grid-1.0.8>]

我有所有版本的最新版本：

Selenium Webdriver 远程控制 Selenium Grid Apache Ant

有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:33:52.940

不再支持 Selenium Grid 1.x。[请参阅此处](https://github.com/nirvdrum/selenium-grid)的通知。每凯文-

**Selenium Grid 1 寿命结束**

请注意，Selenium Grid 1 不再是一个活跃的项目。此存储库仅作为历史文物存在。所有新工作都进入了 Selenium Grid 2，它直接与 Selenium 项目和源代码树集成。请注意，我们已采取一切合理措施确保 Selenium Grid 2 向后兼容 Selenium Grid 1，因此几乎没有理由使用 Selenium Grid 1。

您可以尝试新的更好的**Grid 2.0**。帮助和文档帮助您[入门](http://code.google.com/p/selenium/wiki/Grid2)

# jquery - 简单脚本不适用于 jQuery 中的 .prepend() 和 .css() 方法

> ID：10885035
> 
> 赞同：1
> 
> 时间：2012-06-04T16:53:25.657
> 
> 标签：jquery, css, prepend

今天我遇到了一件我不太明白的有趣的事情。这个（见下文）非常简单的 jQuery 脚本不起作用，如果蓝色 == true（这是真的），基本上我想将前置 div 的背景颜色更改为红色。

```
var panel = $("<div id='panel'></div>");
var panelBg = $("#panel");

var test = "true";
var red  = "true";
var blue = "true";

if (test == "true") {

    if (red == "true") {

       $("#first").prepend(panel);

    }

    if (blue == "true") {

       panelBg.css("background-color","red");

    }

} 
```

但是当我改变这一行时：

```
 panelBg.css("background-color","red"); 
```

对此：

```
 $("#panel").css("background-color","red"); 
```

脚本有效。

工作演示：http: [//jsfiddle.net/wK2jw/](http://jsfiddle.net/wK2jw/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T16:56:58.693

在您查找时`#panel`，它还不存在于 DOM 中，因此此行不返回任何对象：

```
var panelBg = $("#panel"); 
```

当您这样做时它会起作用，`$("#panel").css("background-color","red");`因为这是*在*您将具有 id=panel 的元素添加到 DOM 之后执行的。

即使`panelBg`在您分配它时确实有效，`panelBg`and`panel`引用无论如何都会指向相同的元素，因此使用两个变量指向同一事物似乎没有任何意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:16:54.603

是的，您正在将 DOM 中尚不存在的对象分配给变量。

你可以移动 var panelBg = $("#panel"); 在您添加代码之后。

附带说明一下，您也可以稍微清理一下代码，而不是 if (test == "true") 您可以使用 if (test)

# xml - 将参数传递给 testNG 提供者

> ID：10885037
> 
> 赞同：1
> 
> 时间：2012-06-04T16:53:38.783
> 
> 标签：xml, testng, dataprovider

我是新手，TestNG 文档中没有包含这些信息，如果有人可以帮助我，我想了解一些事情。

```
@DataProvider(name="test1")
public Object[][] provideTestParam(ITestContext context){
    String testParam = context.getCurrentXmlTest().getParameter(test_param);
    return new Object[][]{{ testParam }};
}

@Test(dataProvider="test1")
public void testData(String data){

    //...
} 
```

1.  有谁知道是什么`test_param`？它是文件名，是 testng.xml 文件中的某个参数的方法吗？

2.  我查看了一个 javadoc `ITestContext`，但我不清楚它是如何`getParameter`工作的。它是否从数据来自的 xml 文件中获取单个哈希映射？或者它是否从数据来自的 xml 文件中获取所有键值对？

3.  我想要做的就是在我的项目中存储一个 xml 文件并使用 xml 文件中的数据。将其提供给数据提供者并运行我的测试。还有另一种方法可以做到这一点吗？

4.  可以`getParameter`从 testng.xml`<test>`节点或`<class>`节点中获取值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:19:54.460

1.  不知道，`test_param`没有出现在代码片段中。
2.  中公开的参数`ITestContext`是在 中找到的参数`testng.xml`。
3.  当然，您会想要解析自己的 XML 文件，然后将找到的内容返回为`Object[][]`.

[所有这些都在文档](http://testng.org)的各个部分中进行了详细说明，如果您有更多问题，请随时再次提问。

# mysql - 停止 MySQL 服务窗口

> ID：10885038
> 
> 赞同：45
> 
> 时间：2012-06-04T16:53:47.503
> 
> 标签：mysql, shutdown, restart

我正在开发一个网站，需要刷新数据。因此必须停止 MySQL。
如何停止服务？

当我查看控制面板服务时，它在没有停止或重新启动选项的情况下启动。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-11T17:24:45.423

**在 Windows 上**

如果您使用的是 Windows 打开命令提示符并键入

停止 MySQL 服务：

```
net stop MySQL80 
```

启动 MySQL 服务：

```
net start MySQL80 
```

**在 Linux 上**

```
# /etc/init.d/mysqld start
# /etc/init.d/mysqld stop
# /etc/init.d/mysqld restart 
```

Fedora / Red Hat 也支持这个：

```
# service mysqld start
# service mysqld stop
# service mysqld restart 
```

基于 Systemd 的发行版（如 Ubuntu 或 Arch Linux）也支持这一点：

```
# systemctl start mysql
# systemctl stop mysql
# systemctl restart mysql 
```

我知道这个答案很晚，但我希望它对某些人有所帮助。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-06-04T17:12:21.787

您可以在 services.msc 中将其启动类型设置为手动。这样，除非需要，否则它不会自动启动。只需从 services.msc 中获取服务的名称，如下所示：

![在此处输入图像描述](../Images/1b5a35f379c41465216367652724d01f.png)

您也可以创建批处理文件来相当容易地启动和停止服务。现在在批处理文件中使用此名称。

你的 start.bat：

```
net start "mysql" 
```

在你的 stop.bat 中：

```
net stop "mysql" 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-12-29T19:39:03.050

票数最高的答案已过期。我刚刚安装了 MySQL 5.7，现在服务名称是`MySQL57`，所以新命令是

`net stop MySQL57`

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-11-14T08:54:52.613

以管理员身份启动 Powershell 并运行：

```
net start [MySQL-service-name] 
```

**查找服务名称：**

运行“services.msc”，查找 MySQL 并单击属性

[![在此处输入图像描述](../Images/fc9ccaa89bfa504f1e88b0f856c9c54a.png)](https://i.stack.imgur.com/mriCz.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-04-12T15:05:53.060

我在XP上。我已经手动安装了 MySQL-5.6.10 `.zip`，MySQL 站点没有提供 Windows 自动安装程序。我的 MySQL的`/bin`目录在我的 PATH 中。所以我用`mysqld --console`命令启动服务器，如下所示：

```
C:\Documents and Settings\User>mysqld --console
2013-04-12 14:39:19 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_times
tamp server option (see documentation for more details). 
```

从现在开始，它正在运行。并且那个 cmd 窗口被占用了。我打开并使用另一个。

我尝试使用上面的答案，但没有一个可以停止服务器。只抛出错误。所以我`mysqladmin -u root shutdown`在另一个 cmd 窗口上或`Ctrl + C`在它正在运行的 cmd 窗口上停止服务器。后者的效果不如前者，有时我必须单击`Ctrl + C`两次或更多次。

关机过程的日志是这样的：

```
2013-04-12 17:55:29 3968 [Note] Giving 0 client threads a chance to die gracefully
2013-04-12 17:55:29 3968 [Note] Event Scheduler: Purging the queue. 0 events
2013-04-12 17:55:29 3968 [Note] Shutting down slave threads
2013-04-12 17:55:29 3968 [Note] Forcefully disconnecting 0 remaining clients
2013-04-12 17:55:29 3968 [Note] Binlog end
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'partition'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'PERFORMANCE_SCHEMA'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_SYS_DATAFILES'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_SYS_TABLESPACES'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_SYS_FOREIGN_COLS'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_SYS_FOREIGN'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_SYS_FIELDS'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_SYS_COLUMNS'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_SYS_INDEXES'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_SYS_TABLESTATS'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_SYS_TABLES'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_FT_INDEX_TABLE'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_FT_INDEX_CACHE'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_FT_CONFIG'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_FT_BEING_DELETED'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_FT_DELETED'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_FT_INSERTED'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_FT_DEFAULT_STOPWORD'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_METRICS'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_BUFFER_POOL_STATS'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_BUFFER_PAGE_LRU'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_BUFFER_PAGE'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_CMP_PER_INDEX_RESET'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_CMP_PER_INDEX'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_CMPMEM_RESET'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_CMPMEM'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_CMP_RESET'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_CMP'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_LOCK_WAITS'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_LOCKS'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'INNODB_TRX'
2013-04-12 17:55:29 3968 [Note] Shutting down plugin 'InnoDB'
2013-04-12 17:55:29 3968 [Note] InnoDB: FTS optimize thread exiting.
2013-04-12 17:55:29 3968 [Note] InnoDB: Starting shutdown...
2013-04-12 17:55:30 3968 [Note] InnoDB: Shutdown completed; log sequence number 1719777
2013-04-12 17:55:30 3968 [Note] Shutting down plugin 'BLACKHOLE'
2013-04-12 17:55:30 3968 [Note] Shutting down plugin 'ARCHIVE'
2013-04-12 17:55:30 3968 [Note] Shutting down plugin 'MRG_MYISAM'
2013-04-12 17:55:30 3968 [Note] Shutting down plugin 'MyISAM'
2013-04-12 17:55:30 3968 [Note] Shutting down plugin 'MEMORY'
2013-04-12 17:55:30 3968 [Note] Shutting down plugin 'CSV'
2013-04-12 17:55:30 3968 [Note] Shutting down plugin 'sha256_password'
2013-04-12 17:55:30 3968 [Note] Shutting down plugin 'mysql_old_password'
2013-04-12 17:55:30 3968 [Note] Shutting down plugin 'mysql_native_password'
2013-04-12 17:55:30 3968 [Note] Shutting down plugin 'binlog'
2013-04-12 17:55:30 3968 [Note] mysqld: Shutdown complete 
```

而且我仍然不知道关闭服务器是否是 100% 正确的方法，但它可以工作:)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-06-04T16:55:55.553

```
net stop MySQL* 
```

或者

```
mysqld stop 
```

或者

```
mysql stop 
```

在窗口的命令行提示符中。

<*> 如果您使用的是 Windows XP，则需要您的服务名称，可以通过以下方式获得：(credits [@Atli](http://bytes.com/topic/mysql/answers/884724-facing-error-starting-stopping-mysql-service-command-line-mode) )

> 右键单击开始菜单中的“我的电脑”快捷方式，选择“管理”，单击“服务和应用程序”组中的“服务”。然后搜索服务列表，直到找到 MySQL 服务。
> 
> 然后，您可以使用该名称启动 [或停止] 服务。它有时可以称为“mysql5”或“mysql51”，或类似的名称。取决于谁安装了它。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-12-28T20:05:55.267

对于 Windows，有几个技巧需要处理...

（假设您已经从 Oracle 的站点安装了 MySQL，但可能选择在启动时不运行该服务）...

1.  要在 WinVista/Win7 的命令行中使用“mysqld stop”，您必须右键单击开始 -> 所有程序 -> 附件 -> 命令提示符 -> 以管理员身份运行

2.  现在您拥有本地操作系统管理员访问权限，您可以使用“mysqld stop”（它将简单地返回）

如果您看到以下内容，您正在尝试使用没有正确权限的用户/命令提示：

```
121228 11:54:50 [Warning] Can't create test file c:\Program Files\MySQL\MySQL Server 5.5\data\hpdv7.lower-test
121228 11:54:50 [Warning] Can't create test file c:\Program Files\MySQL\MySQL Server 5.5\data\hpdv7.lower-test
121228 11:54:50 [Note] Plugin 'FEDERATED' is disabled.
121228 11:54:50 InnoDB: The InnoDB memory heap is disabled
121228 11:54:50 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121228 11:54:50 InnoDB: Compressed tables use zlib 1.2.3
121228 11:54:50 InnoDB: Initializing buffer pool, size = 128.0M
121228 11:54:50 InnoDB: Completed initialization of buffer pool
121228 11:54:50  InnoDB: Operating system error number 5 in a file operation.
InnoDB: The error means mysqld does not have the access rights to
InnoDB: the directory. It may also be you have created a subdirectory
InnoDB: of the same name as a data file.
InnoDB: File name .\ibdata1
InnoDB: File operation call: 'create'.
InnoDB: Cannot continue operation. 
```

如果 mysqld 没有显示为已知的系统命令，请尝试将其添加到您的类路径

1.  右键单击我的电脑
2.  高级系统设置
3.  环境变量
4.  系统变量
5.  查找并左键单击选择名为路径的变量
6.  单击“编辑”并将字符串复制到记事本并在末尾附加到 MySQL bin 目录的完整路径，例如

    %SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;c:\Program Files\MySQL\MySQL Server 5.5\bin

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-10-02T04:32:21.473

如果 MySQL 57.

```
net start MySQL57 
```

或者

```
net stop MySQL57 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-01-17T14:01:23.150

在 Windows 10 上

如果您想关闭它，请使用管理员打开命令提示符。写`NET STOP MySQL80`。完成。如果你想再次打开，那么你必须写`NET START MySQL80`

*如果您不希望它在不使用时自动打开，它会在计算机打开时自动运行并消耗一些内存。*

打开**services.msc**找到**Mysql80**，查看属性，然后根据需要再次启动类型 manuel 或 otomatic。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-07-21T08:15:06.600

停止服务：

`sc stop mysql56`

并开始它：

`sc start mysql56`

您可能需要将 更改`mysql56`为您的版本。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-02-28T15:02:53.923

如果您正在运行 Windows，请尝试以下操作：

1.  单击键盘上的开始按钮
2.  类型任务管理器
3.  任务管理器打开时右键单击并单击以管理员身份运行
4.  单击服务然后查找 MySQL 然后
5.  右键单击它然后单击停止然后关闭任务管理器，您就完成了。

要在您想使用它时启动它，请按照相同的步骤并单击这次启动

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-02-25T01:49:00.810

这是一个更新和更容易的答案。

1.  以管理员身份运行 cmd
2.  输入“net start mysql”，然后输入版本号，在我的例子中，“net start mysql80”代表 MySQL 8.0。
3.  如果它说它已经运行良好，否则现在 mysql 正在运行。
4.  退出 cmd，WI​​N+R 并输入 services.msc，向下滚动直到找到正确版本的我的 sql。
5.  右键单击属性，在启动类型下选择“手动”，然后在服务状态下选择“停止”
6.  现在您停止了 mysql 服务，它不会再次自动运行。
7.  要重新打开它，在 cmd admin 'net start mysql' 和版本号中，在我的情况下是 'net start mysql80'

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-02-08T15:32:00.110

为 Windows7 关闭 mySQL 服务器的简单方法：

*我的电脑 > 管理 > 服务和应用程序 > 服务 > 选择“MySQL 56”*（名称取决于安装的 MySQL 版本。）左上角出现三个选项。停止服务 暂停服务 重启服务

选择停止服务 > 停止服务器

再次开始，您可以来到相同的位置，或者我们可以在 mySQL GUI *Server > 启动/关闭 > 选择启动或关闭上选择工具选项*

PS：有时即使提供了选项，也无法从 GUI 停止服务器。提供上述替代方法的原因也是如此。

分享答案。改善。谢谢

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-04-03T13:01:41.443

在 Windows 上成功停止 MySQL 服务

1.  检查服务 MySQL 的服务名称
2.  以管理员身份运行 ：`net stop [MySQL Service name]`

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-09-02T05:38:30.290

我遇到了同样的问题，这里是我的解决方案：

1.  转到 service.msc 并找到 mysql 服务。将其设置为手动启动。
2.  转到任务管理器 - 进程选项卡并找到 mysqld。停下来
3.  转到任务管理器-服务选项卡找到mysql服务并停止它

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2017-01-14T12:37:00.617

只需键入退出

你在 Windows 的 cmd 中没有 mysql

# hadoop - 使用 mapreduce 从 HDFS 读取图像

> ID：10885039
> 
> 赞同：0
> 
> 时间：2012-06-04T16:53:56.273
> 
> 标签：hadoop, mapreduce

请在这段代码中帮助我。我正在尝试从 HDFS 读取图像。我正在使用 WholeFileInputFormat。与 WholeFileRecordreader。没有编译时错误。但是代码给出了运行时错误。输出是说：无法创建给定类 WholeFileInputFormat 的实例。我已经根据[How to read multiple image files as input from hdfs in map-reduce?](https://stackoverflow.com/questions/10814534/how-to-read-multiple-image-files-as-input-from-hdfs-in-map-reduce "Hadoop-Map-reduce") 请在这段代码中帮助我。它包含 3 个类。如何调试它？还是有什么其他方式？

```
import java.awt.image.BufferedImage;
import java.io.ByteArrayInputStream;
import java.io.FileInputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import javax.imageio.ImageIO;
import net.semanticmetadata.lire.imageanalysis.AutoColorCorrelogram;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.fs.FSDataInputStream;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.mapred.lib.NullOutputFormat;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.util.ToolRunner;

public class map2 extends Configured implements Tool {

    public static class MapClass extends MapReduceBase
            implements Mapper<NullWritable, BytesWritable, Text, Text> {

        private Text input_image = new Text();
        private Text input_vector = new Text();

        @Override
        public void map(NullWritable key,BytesWritable value,
                OutputCollector<Text, Text> output,
                Reporter reporter) throws IOException {

            System.out.println("CorrelogramIndex Method:");
        String featureString;
        int MAXIMUM_DISTANCE = 16;
        AutoColorCorrelogram.Mode mode = AutoColorCorrelogram.Mode.FullNeighbourhood;

        byte[] identifier=value.getBytes();

             BufferedImage bimg = ImageIO.read(new ByteArrayInputStream(identifier)); 

            AutoColorCorrelogram vd = new AutoColorCorrelogram(MAXIMUM_DISTANCE, mode);

            vd.extract(bimg);

            featureString = vd.getStringRepresentation();
            double[] bytearray = vd.getDoubleHistogram();

            System.out.println("image: " + identifier + " " + featureString);

            System.out.println(" ------------- ");

            input_image.set(identifier);
            input_vector.set(featureString);
            output.collect(input_image, input_vector);

        }
    }

    public static class Reduce extends MapReduceBase
            implements Reducer<Text, Text, Text, Text> {

        @Override
        public void reduce(Text key, Iterator<Text> values,
                OutputCollector<Text, Text> output,
                Reporter reporter) throws IOException {
            String out_vector = "";

            while (values.hasNext()) {
                out_vector += (values.next().toString());
            }
            output.collect(key, new Text(out_vector));
        }
    }

    static int printUsage() {
        System.out.println("map2 [-m <maps>] [-r <reduces>] <input> <output>");
        ToolRunner.printGenericCommandUsage(System.out);
        return -1;
    }

    @Override
    public int run(String[] args) throws Exception {

        JobConf conf = new JobConf(getConf(), map2.class);
        conf.setJobName("image_mapreduce");

            conf.setInputFormat(WholeFileInputFormat.class);
        conf.setOutputFormat(NullOutputFormat.class);

        conf.setOutputKeyClass(Text.class);

        conf.setOutputValueClass(Text.class);

        conf.setMapperClass(MapClass.class);

        conf.setReducerClass(Reduce.class);

        List<String> other_args = new ArrayList<>();
        for (int i = 0; i < args.length; ++i) {
            try {
                switch (args[i]) {
                    case "-m":
                        conf.setNumMapTasks(Integer.parseInt(args[++i]));
                        break;
                    case "-r":
                        conf.setNumReduceTasks(Integer.parseInt(args[++i]));
                        break;
                    default:
                        other_args.add(args[i]);
                        break;
                }
            } catch (NumberFormatException except) {
                System.out.println("ERROR: Integer expected instead of " + args[i]);
                return printUsage();
            } catch (ArrayIndexOutOfBoundsException except) {
                System.out.println("ERROR: Required parameter missing from "
                        + args[i - 1]);
                return printUsage();
            }
        }

        // Make sure there are exactly 2 parameters left.
        if (other_args.size() != 2) {
            System.out.println("ERROR: Wrong number of parameters: "
                    + other_args.size() + " instead of 2.");
            return printUsage();
        }

        FileInputFormat.setInputPaths(conf, other_args.get(0));
        FileOutputFormat.setOutputPath(conf, new Path(other_args.get(1)));
        JobClient.runJob(conf);
        return 0;
    }

    public static void main(String[] args) throws Exception {
            int res = ToolRunner.run(new Configuration(), new map2(), args);
    System.exit(res);
    }
}
 -----------------------------------------------------------------------------------
//WholeFileInputFormat

import java.io.IOException;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.mapred.*;

public class WholeFileInputFormat<NullWritable, BytesWritable> 
        extends FileInputFormat<NullWritable, BytesWritable> {

    //  @Override
    protected boolean isSplitable(JobContext context, Path file) {
        return false;
    }
    //@Override

    public WholeFileRecordReader createRecordReader(
            InputSplit split, TaskAttemptContext context) throws IOException,
            InterruptedException {
        WholeFileRecordReader reader = new WholeFileRecordReader();
        reader.initialize(split, context);
        return reader;
    }

 @Override
public RecordReader<NullWritable, BytesWritable> getRecordReader(InputSplit split,
   JobConf job, Reporter reporter)
   throws IOException;
}

    -------------------------------------------------------------------------------
   //WholeInputFileRecorder

import java.io.IOException;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.FSDataInputStream;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.BytesWritable;
import org.apache.hadoop.io.IOUtils;
import org.apache.hadoop.io.NullWritable;
import org.apache.hadoop.mapred.FileSplit;
import org.apache.hadoop.mapred.InputSplit;
import org.apache.hadoop.mapred.RecordReader;
import org.apache.hadoop.mapred.TaskAttemptContext;

 class WholeFileRecordReader implements RecordReader<NullWritable, BytesWritable> {   //recordreader

    private FileSplit fileSplit;
    private Configuration conf;
    private BytesWritable value = new BytesWritable();
    private boolean processed = false;

    public void initialize(InputSplit split, TaskAttemptContext context)
            throws IOException, InterruptedException {
        this.fileSplit = (FileSplit) split;
        this.conf = context.getJobConf();
    }

    @Override
    public boolean next(NullWritable k, BytesWritable v) throws IOException {
        if (!processed) {
            byte[] contents = new byte[(int) fileSplit.getLength()];
            Path file = fileSplit.getPath();
            org.apache.hadoop.fs.FileSystem fs = file.getFileSystem(conf);
            FSDataInputStream in = null;
            try {
                in = fs.open(file);
                IOUtils.readFully(in, contents, 0, contents.length);
                value.set(contents, 0, contents.length);
            } finally {
                IOUtils.closeStream(in);
            }
            processed = true;
            return true;
        }
        return false;
    }
@Override
    public NullWritable createKey() {
    return NullWritable.get();
    }

    @Override
    public BytesWritable createValue() {
    return value;
    }

 @Override
 public long getPos() throws IOException {
     throw new UnsupportedOperationException("Not supported yet.");
 }

 @Override
 public void close() throws IOException {
     throw new UnsupportedOperationException("Not supported yet.");
 }

 @Override
 public float getProgress() throws IOException {
    throw new UnsupportedOperationException("Not supported yet.");
 }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:06:37.443

`WholeFileInputFormat`被定义为抽象，你想如何创建它的实例？

要么让它不抽象，要么用具体的实现对其进行子类化。

# python - 将窗口设为最高优先级

> ID：10885041
> 
> 赞同：0
> 
> 时间：2012-06-04T16:54:12.490
> 
> 标签：python, tkinter, window

我有一个带有面板的根窗口。然后是这个函数，我在其中创建了一个 TopLevel（另一个窗口）来询问用户的输入。我正在尝试找到某种方法来强制用户输入输入并单击确定或取消以关闭窗口，然后才能访问根窗口。就像弹出错误信息时，你不能只是忽略它并在根窗口中做其他事情。有人对我有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:58:34.527

看看[对话框窗口](http://effbot.org/tkinterbook/tkinter-dialog-windows.htm)。您可以使用`widget.wait_window(window)`来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:05:32.053

您可以执行所谓的 a `grab`，它将所有事件强制进入您选择的窗口。有几种管理抓取的方法，包括[grab_set](http://effbot.org/tkinterbook/widget.htm#Tkinter.Widget.grab_set-method)和[grab_release](http://effbot.org/tkinterbook/widget.htm#Tkinter.Widget.grab_release-method)。

例如，请参阅[NiceGrab](http://tkinter.unpythonic.net/wiki/NiceGrab)。

**使用抓斗时，请格外小心**。如果您进行全局抓取，然后出现阻止您释放它的错误，则可能会锁定您的计算机。在开发过程中，我经常会实现一个计时器，它会在一分钟左右后终止程序，所以如果我锁定所有内容，它会在短暂等待后自动释放。

# html - 图形标签是否适合地图？

> ID：10885042
> 
> 赞同：1
> 
> 时间：2012-06-04T16:54:22.090
> 
> 标签：html, semantics

`figure`将元素用于地图（例如谷歌地图）在语义上是否正确？

就我而言，它可以放在其他地方而不影响文档流。我会使用`figcaption`来存储地图上显示的地点的地址。但我仍然不确定这是否适合这个用例......

这是 w3c 的描述：

> figure 元素表示一些流内容，可以选择带有标题，它是自包含的，通常作为文档主流中的单个单元引用。figure 元素可用于注释文档主要内容中引用的插图、图表、照片、代码列表等，但可以在不影响文档流程的情况下将其从主要内容中移开— 例如，到页边、到专用页或到附录。

[http://dev.w3.org/html5/spec/the-figure-element.html#the-figure-element](http://dev.w3.org/html5/spec/the-figure-element.html#the-figure-element)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:01:07.173

如果地图本身不是页面的主要内容，我会说这是对图形元素的一个很好的使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T17:01:53.990

根据 W3C 的描述，该`<figure>`元素是地图的完美解决方案。特别是如果地图仅包含附加的图形信息或对页面上已有内容的说明。

# mongodb - MongoDB - 如何查询集合中的嵌套项？

> ID：10885044
> 
> 赞同：58
> 
> 时间：2012-06-04T16:54:27.333
> 
> 标签：mongodb

我有一些看起来像这样的数据：

```
[
    {
        "_id" : ObjectId("4e2f2af16f1e7e4c2000000a"),
        "advertisers" : [
            {
                "created_at" : ISODate("2011-07-26T21:02:19Z"),
                "category" : "Infinity Pro Spin Air Brush",
                "updated_at" : ISODate("2011-07-26T21:02:19Z"),
                "lowered_name" : "conair",
                "twitter_name" : "",
                "facebook_page_url" : "",
                "website_url" : "",
                "user_ids" : [ ],
                "blog_url" : "",
            }, 
```

我在想这样的查询会给出广告商的 ID：

```
var start  = new Date(2011, 1, 1);
> var end  = new Date(2011, 12, 12);
> db.agencies.find( { "created_at" : {$gte : start , $lt : end} } , { _id : 1 , program_ids : 1 , advertisers { name : 1 }  } ).limit(1).toArray(); 
```

但是我的查询没有用。知道如何将嵌套元素内的字段添加到我想要获取的字段列表中吗？

谢谢！

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-06-04T17:22:25.920

使用点表示法（例如`advertisers.name`）从嵌套对象中查询和检索字段：

```
db.agencies.find({
 "advertisers.created_at": {
   $gte: start,
   $lt: end
  }
 },
{
 _id: 1,
  program_ids: 1,
  "advertisers.name": 1
 }
}).limit(1).toArray(); 
```

参考：[检索字段子集](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields) 和[点表示法](https://docs.mongodb.org/manual/core/document/#dot-notation)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-15T05:56:18.653

```
db.agencies.find( 
{ "advertisers.created_at" : {$gte : start , $lt : end} } , 
{ program_ids : 1 , advertisers.name : 1   } 
).limit(1).pretty(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-12T15:47:57.253

MongoDB 提供了一种称为点表示法的东西，它允许您查看元素数组的内部。使用它就像为要输入的每个数组添加一个点一样简单。

在你的情况下

```
 "_id" : ObjectId("4e2f2af16f1e7e4c2000000a"),
    "advertisers" : [
        {
            "created_at" : ISODate("2011-07-26T21:02:19Z"),
            "category" : "Infinity Pro Spin Air Brush",
            "updated_at" : ISODate("2011-07-26T21:02:19Z"),
            "lowered_name" : "conair",
            "twitter_name" : "",
            "facebook_page_url" : "",
            "website_url" : "",
            "user_ids" : [ ],
            "blog_url" : "",
        },
        { ... } 
```

如果您想进入广告客户数组中查找每个广告客户中的 created_at 属性，您可以简单地使用属性 {' **adverters.created_at** ':query} 编写查询，如下所示

```
db.agencies.find( { 'advertisers.created_at' : { {$gte : start , $lt : end} ... } 
```

# objective-c - 接收没有音频的远程控制事件

> ID：10885047
> 
> 赞同：10
> 
> 时间：2012-06-04T16:54:33.793
> 
> 标签：objective-c, ios, ios5, avaudiosession, remote-control

这是一些背景信息，否则请跳至粗体问题。我正在构建一个应用程序，我希望它能够访问远程控制/锁定屏幕事件。棘手的部分是这个应用程序本身不播放音频，它控制附近另一台设备的音频。当应用程序在前台时，设备之间的通信不是问题。正如我刚刚发现的那样，一个应用程序在通过播放音频会话播放音频之前不会控制遥控器，并且是最后一次这样做。这带来了一个问题，因为就像我说的那样，该应用程序控制另一个设备的音频并且不需要播放自己的音频。

我的第一个倾向是让应用程序在每次打开时播放一个静音剪辑，以便控制遥控器。我必须这样做的事实让我想知道 Apple 是否会允许我这样做，或者是否有其他方法可以在不使用假音频剪辑欺骗系统的情况下实现这一点。

**问题（S）：Apple 是否会批准播放无声音频剪辑的应用程序，以控制远程/锁定屏幕控件以控制其他设备的音频？有没有办法在没有音频会话的情况下控制遥控器？**

PS 我希望在 iOS 4.0 及更高版本上拥有此功能。

PPS 我看到[了这个类似的问题](https://stackoverflow.com/questions/4158810/use-remote-control-for-non-audio-related-tasks)，它让我头脑风暴，但提供的答案并不特定于我需要知道的内容。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-10-02T03:21:27.170

* * *

**注意：**从 iOS 7.1 开始，您应该使用[MPRemoteCommandCenter](https://developer.apple.com/library/ios/documentation/MediaPlayer/Reference/MPRemoteCommandCenter_Ref/)而不是下面的答案。

您创建各种系统提供的[MPRemoteCommand](https://developer.apple.com/library/ios/documentation/MediaPlayer/Reference/MPRemoteCommand_Ref/index.html#//apple_ref/swift/cl/c:objc(cs)MPRemoteCommand)子类，并将它们分配给`[MPRemoteCommandCenter sharedCommandCenter]`.

我将其余部分保留以供历史参考，但不能保证以下内容适用于最近的 iOS 版本。事实上，它可能不会。

* * *

您肯定需要一个音频*播放器*，但不一定需要一个显式*会话*来控制远程控制事件。（`AVAudioSession`对于任何播放音频的应用程序都是隐含的。）我花了相当多的时间玩这个来确认这一点。

我在互联网上看到了很多关于在哪里设置`removeControlEventRecievedWithEvent:`方法以及响应者链的各种方法的困惑。我知道这种方法适用于 iOS 6 和 iOS 7。其他方法没有。不要浪费时间在应用程序委托（它们曾经工作的地方）或视图控制器中处理远程控制事件，这可能会在应用程序的生命周期中消失。

我做[了一个演示项目](https://github.com/MosheBerman/ios-audio-remote-control/blob/master/README.md)来展示如何做到这一点。

以下是必须发生的事情的简要说明：

1.  您需要创建一个`UIApplication`. *当文档说`UIResponder`时，这意味着`UIApplication`，因为您的应用程序类是`UIResponder`.* 在这个子类中，您将实现`remoteControlReceivedWithEvent:`and`canBecomeFirstResponder`方法。你想`YES`从`canBecomeFirstResponder`. 在远程控制方法中，您可能希望通知您的音频播放器发生了一些变化。

2.  您需要告诉 iOS 使用您的自定义类来运行应用程序，而不是默认的`UIApplication`. 为此，请打开 main.m 并更改：

    ```
     return UIApplicationMain(argc, argv, nil, NSStringFromClass([RCAppDel`egate class])); 
    ```

    看起来像这样：

    ```
    return UIApplicationMain(argc, argv, NSStringFromClass([RCApplication class]), NSStringFromClass([RCAppDelegate class])); 
    ```

    在我的情况下`RCApplication`是我的自定义类的名称。请改用您的子类的名称。不要忘记`#import`适当的标题。

3.  可选：您应该配置音频会话。这不是必需的，但如果您不这样做，如果手机静音，音频将不会播放。我在演示应用程序的委托中执行此操作，但在适当的情况下执行此操作。

4.  玩点什么。在您这样做之前，遥控器将忽略您的应用程序。我只是拿了一个`AVPlayer`，并给了它一个我希望启动的流媒体网站的 URL。如果你发现它失败了，把你自己的 URL 放在那里，随心所欲地玩。

这个例子有更多的代码来注销远程事件，但这并不是那么复杂。我只是定义并传递一些字符串常量。

我敢打赌，无声循环 MP3 文件将有助于实现您的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-01T17:31:17.710

Moshe 的解决方案对我很有用！但是我注意到的一个问题是，当您暂停音频时，媒体控件会消失，如果不返回应用程序，您将无法再次播放。如果您在播放音频时在锁定屏幕上设置了媒体信息，则不会发生这种情况：

```
NSDictionary *mediaInfo = @{MPMediaItemPropertyTitle: @"My Title",
                                 MPMediaItemPropertyAlbumTitle: @"My Album Name",
                                 MPMediaItemPropertyPlaybackDuration: [NSNumber numberWithFloat:0.30f]};
[[MPNowPlayingInfoCenter defaultCenter] setNowPlayingInfo:mediaInfo]; 
```

# php - 用于 JQuery 的 PHP json_encode

> ID：10885052
> 
> 赞同：0
> 
> 时间：2012-06-04T16:55:08.153
> 
> 标签：php, jquery, json

我正在我的班级中研究一种方法，该方法为 ajax 和常规发布请求输出错误消息。PHP 部分工作正常，但 json 部分似乎没有。这是我的方法：

```
public $formError = false;
public $phpErrors = '';
public $jsonErrors = array();

// ------------------------------------------------------------
// ERROR PROCESSING
// ------------------------------------------------------------
private function responseMessage($bool, $msg) {
    $return['error'] = $bool;
    $return['msg'] = $msg;
    if (isset($_POST['plAjax']) && $_POST['plAjax'] == true) {
        $this->jsonErrors[] = $return;
    } else {
        foreach ((array) $msg as $key => $value) {
            $this->phpErrors .= $msg;
        }
    }
    $this->formError = true;
} 
```

我认为，问题在于，无论是单个错误消息还是多个错误消息，json 对象总是用方括号括起来。我在网上找不到任何可以显示示例的内容。消息如下所示：

单一错误：

[{"error":true,"msg":"错误信息 1 ..."}]

多个错误：

[{"error":true,"msg":"错误信息 1 ..."},{"error":true,"msg":"错误信息 2 ..."}]

Firebug 显示 200 OK 但我的 JQuery 没有输出任何消息：

```
$.ajax({
    type: 'POST',
    url: plSubmitUrl,
    data: plFormData,
    dataType: 'json',
    cache: false,
    timeout: 10000,
    success: function (data) {
        if (data.error === true) {

            // display error message
            plResponse(data.msg, true);

            ...
        } else if (data.error === false) {

            // display success message
            plResponse(data.msg, true);

            ...
        }
    }, 
```

当我一次只显示一条消息时，JQuery 工作正常。

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:58:43.277

不要使用严格的相等运算符`===`，因为您实际上是从 PHP 发送字符串，例如：

```
if (data.error === true) 
```

采用：

```
if (data.error == true) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:56:30.313

由于多个错误包含多个索引，因此它可能不会选择数据。检查长度是否超过错误。

```
$.ajax({
type: 'POST',
url: plSubmitUrl,
data: plFormData,
dataType: 'json',
cache: false,
timeout: 10000,
success: function (data) {
    var x = data.length;

    if(x == 1){
        if (data.error === true) {

           // display error message
            plResponse(data.msg, true);

        ...
        } else if (data.error === false) {

          // display success message
           plResponse(data.msg, true);
        }
   }else{
       jQuery.each(data,function(key,val){
           // do whatever you need
       } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:10:52.917

```
header('Content-Type: application/json'); 
```

在你的 PHP 脚本中回显之前添加这个，让 jquery 知道它必须将整个字符串解析为 JSON。

并使用**“==”**进行比较而不是**“===”**

# android - 用于禁用单行代码警告的 Android Java 编译器指令

> ID：10885053
> 
> 赞同：1
> 
> 时间：2012-06-04T16:55:08.627
> 
> 标签：android, compiler-construction, warnings

我想按数字禁止编译器警告。我看到它是通过遵循带有一些特殊注释的代码行来完成的。

你知道墨菲定律吗？我认为这是一种情况。当我不需要它时，我会一直在使用具有这种指令的代码。看起来像

```
static int num;   //!NLNS201 
```

现在我需要它，我在任何地方都找不到它。

编辑：我不敢相信没有人知道在说什么！我改写了这个问题，也许不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T06:34:06.113

嗯，我找到了。但这不是我想的那样。

Eclipse使用**$NON-NLS-x**标记来仅抑制针对语言国际化的文字字符串警告。

我在变量声明之前使用 @SupressWarnings("all") 。

[有关@SuppressWarnings 参数](https://stackoverflow.com/questions/1205995/what-is-the-list-of-valid-suppresswarnings-warning-names-in-java)的良好参考，请参阅此帖子

# maven-3 - 如何在多模块项目中跳过 pom 的构建

> ID：10885059
> 
> 赞同：0
> 
> 时间：2012-06-04T16:55:36.133
> 
> 标签：maven-3

我正在尝试在时间上优化我的构建过程（开发中）以构建 maven 多模块项目的整个树。一些 POM 实际上是很少（并且通常）永远不会更改的源/库的聚合。所以具体的子问题是

1.  如果 POM:project/build/sourceDirectory 属性中指定的源没有更改，是否可以以某种方式将 maven 配置为不构建 pom？

2.  或者是否可以（至少）有条件地禁用 maven-bundle-plugin？- 它需要大部分时间。

Google 找不到任何相关的 Q#1。典型的解决方案不适用于＃2 - 当我尝试为 maven-bundle-plugin 指定“执行”时（像这样）

```
<plugin>
    <groupId>org.apache.felix</groupId>
    <artifactId>maven-bundle-plugin</artifactId>
    <version>${maven-bundle-plugin.version}</version>
    <extensions>true</extensions>
    <executions>
        <execution>
            <id>osgi-bundle</id>
            <phase>bundle</phase>
            <goals>
                <goal>bundle</goal>
            </goals> 
```

我在输出中收到此错误

```
[bundle:bundle]
Bundle artifact-id:bundle-id:bundle:0.1.0-SNAPSHOT : The JAR is empty: dot
Error(s) found in bundle configuration 
```

任何帮助表示赞赏。我知道以下内容：
*[禁用父 POM 中定义的 Maven 插件](https://stackoverflow.com/questions/7821152/disable-a-maven-plugin-defined-in-a-parent-pom) （maven-bundle-plugin 不能使用 'executions' 标签）
*[如果文件不存在，则跳过执行 maven 插件](https://stackoverflow.com/questions/4287451/skip-execution-of-a-maven-plugin-if-a-file-does-not-exist)（maven-bundle -plugin 没有跳过配置选项）
*[如何在多 maven 模块中跳过生命周期阶段](https://stackoverflow.com/questions/5579256/how-to-skip-lifecycle-phase-in-multi-maven-module)（与之前相同）
* 如果将整个 maven-bundle-plugin 移动到配置文件中，maven 无法识别 Packaging=bundle。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T22:41:58.447

最后我不得不承认 (C) Eugene Kuleshov - “Maven 通常不跟踪源/更改，所以它总是一个完整的构建。”

但是，在 .NET 上 5 年以上和 C++ 上 5 年以上之后回到 Java，我觉得很奇怪，像增量构建这样的常见功能不被具有10 年以上[历史的广泛使用的工具支持。](http://maven.apache.org/background/history-of-maven.html)所以我不能花时间等待重建我的多模块项目中的每一个未更改的模块，并决定制作 Maven 3.0.4 的定制版本 :)

随意在这里[http://code.google.com/p/maven-onchange-activator/](http://code.google.com/p/maven-onchange-activator/)获取它，尝试并报告问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:05:23.933

Maven 通常不跟踪源/更改，因此它始终是完整的构建。但是，要禁用任何插件，您可以将其移动到[配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)中，然后启用/禁用整个配置文件，例如有条件地或从命令行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:45:21.090

你应该检查像

```
mvn -am 
```

与

```
mvn -pl ... 
```

所以做一个像这样的构建：

```
mvn -am -pl SubModule clean package 
```

将[仅构建那些已更改](http://www.sonatype.com/people/2009/10/maven-tips-and-tricks-advanced-reactor-options/)并且由于对更改模块的依赖而需要构建的模块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-04T11:23:44.190

我建议切换到 Gradle。Gradle 具有这种开箱即用的支持（无需配置），并且从 Maven 转换应该很容易。

# jquery - qTip 在每个循环中使用时不显示内容

> ID：10885065
> 
> 赞同：1
> 
> 时间：2012-06-04T16:55:53.090
> 
> 标签：jquery, qtip2

我正在尝试使用 qTip + JQuery 从 DIV 元素的内容创建工具提示。如果我尝试用静态内容定义工具提示，一切似乎都工作正常。当我尝试在 for 循环中使用它们并获取 DIV 元素的内容并尝试将其显示为工具提示时，没有任何显示。我在文档就绪函数中有以下代码。类“工具提示”的显示属性设置为无

```
$.each($(".tooltip"), function (i, val) {
             var theContent = $(val).html();
             $(val).qtip({
                 content: $(val).html,
                 style: {
                     width: 200,
                     background: '#ebf1ff',
                     color: 'black',
                     textAlign: 'center',
                     border: {
                         width: 1,
                         radius: 4,
                         color: '#AACCEE'
                     },
                     tip: 'bottomLeft',
                     name: 'dark'
                 }
             });
         }); 
```

我的 HTML 标签如下所示：

```
<div class="vBarContainer"><div id="gantt_65_1" class="gantt" style="border-width:medium;border-color:black;background:orange;width:6%;margin-left:0%;">0</div><div class="tooltip">Quantity:15453</div></div> 
```

有人可以指出我做错了什么吗？

谢谢，贾维德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T22:11:32.630

我的解决方案：通过使用工具提示 div 元素旁边的 div 的兄弟属性设法使其工作

```
$('.gantt').each(function () {
         $(this).qtip({
             content: $(this).siblings('div.tooltip').html(),
             style: {
                 width: 200,
                 background: '#ebf1ff',
                 color: 'black',
                 textAlign: 'left',
                 border: {
                     width: 1,
                     radius: 4,
                     color: '#AACCEE'
                 },
                 tip: 'bottomLeft',
                 name: 'dark'
             },
             position: {
                 corner: {
                     target: 'topMiddle',
                     tooltip: 'bottomLeft'
                 }
             }
         });
     }); 
```

# iphone - 视频未使用 MPMoviePlayerContrller 播放

> ID：10885067
> 
> 赞同：0
> 
> 时间：2012-06-04T16:56:03.823
> 
> 标签：iphone, mpmovieplayercontroller

如何使用 MPMoviePlayerViewController 在 iPhone sdk 中播放视频，这里我通过设备捕获视频并将该特定视频保存在文档目录中。请告诉我任何人......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:46:07.630

获取文档目录路径：

```
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]; 
```

然后你可以使用任何 NSFileManager 的目录列表 API。

```
NSError * error;
NSArray * directoryContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:documentsDirectory error:&error]; 
```

现在您在数组中的目录路径（存储的所有视频）中拥有所有内容

```
NSURL *videoURL = [NSURL UrlWithString:[NSString stringWithFormat:@"%@/%@",documentsDirectory,[directoryContents objectAtIndex:0]]]; //check which url u want play as video name is in nsarray i have selected one random video name. 
```

使用 MovieControllerPlayer 实例播放 url：

```
 MPMoviePlayerViewController *mpViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:videoURL]; 
 [self presentMoviePlayerViewControllerAnimated:mpViewController]; 
 [mpViewController.view setCenter:yourView.center]; 
 //[mpViewController release]; 
```

希望有用。

# javascript - 神秘的垃圾字符 - 仅限 IE 8

> ID：10885070
> 
> 赞同：2
> 
> 时间：2012-06-04T16:56:16.107
> 
> 标签：javascript, regex, internet-explorer-8, trim, innertext

我正在构建一个表格，内容从页面中的其他元素中提取（页面抓取）。

我正在使用 innerText 或 textContent 来提取文本，然后使用正则表达式来修剪它：

```
string.replace(/^\s+|\s+$/g,""); 
```

这在 IE 9 和 Chrome 中运行良好，但在 IE 8 中我得到一个我无法识别的垃圾字符。我能够通过 jsfiddle 中的警报重现该行为：

[http://jsfiddle.net/Te4FQ/](http://jsfiddle.net/Te4FQ/)

这个额外的字符是什么，我怎样才能摆脱它？

更新：感谢有用的回复！似乎有问题的字符是u200E（从左到右标记）。所以我的问题的第二部分仍然存在，我怎样才能用正则表达式摆脱这些字符，而只保留常规文本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T21:41:54.033

jsFiddle 代码段中的“有风险”和“完成”`<th>`标签在其内容的末尾都有一个 U+200E（从左到右标记，又名 LRM）代码点。那不是空格字符，所以它不能被`\s`.

摆脱这个字符的一种方法是使用[XRegExp 库](http://xregexp.com/)，这样您就可以用`\p{C}`空字符串替换所有匹配项（即删除它们）。`\p{C}`匹配 Unicode 的“其他”类别中的任何代码点，包括控制、格式、私人使用、代理和未分配的代码点。具体来说，U+200E 属于`\p{Cf}`“其他，格式”子类别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:01:10.450

尝试将结果打印到页面

```
escape(string.replace(/^\s+|\s+$/g,"")); 
```

您的垃圾字符应显示为转义码。

# android - 在 Android 中创建 EditText 视图行

> ID：10885072
> 
> 赞同：1
> 
> 时间：2012-06-04T16:56:30.860
> 
> 标签：android, android-layout, user-interface, android-edittext

我已经设法动态添加 EditText(s) 并在 Android 中检索值，并且我从[**这里**](http://prasans.info/2011/03/add-edittexts-dynamically-and-retrieve-values-android/)获得了程序代码（下面的示例）

```
public class Sample extends Activity {
    private List<EditText> editTextList = new ArrayList<EditText>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        LinearLayout linearLayout = new LinearLayout(this);
        ViewGroup.LayoutParams params = new ViewGroup.LayoutParams(FILL_PARENT, WRAP_CONTENT);
        linearLayout.setLayoutParams(params);
        linearLayout.setOrientation(VERTICAL);

        int count = 10;
        linearLayout.addView(tableLayout(count));
        linearLayout.addView(submitButton());
        setContentView(linearLayout);
    }

    private Button submitButton() {
        Button button = new Button(this);
        button.setHeight(WRAP_CONTENT);
        button.setText("Submit");
        button.setOnClickListener(submitListener);
        return button;
    }

    // Access the value of the EditText

    private View.OnClickListener submitListener = new View.OnClickListener() {
        public void onClick(View view) {
            StringBuilder stringBuilder = new StringBuilder();
            for (EditText editText : editTextList) {
                stringBuilder.append(editText.getText().toString());
            }
        }
    };

    // Using a TableLayout as it provides you with a neat ordering structure

    private TableLayout tableLayout(int count) {
        TableLayout tableLayout = new TableLayout(this);
        tableLayout.setStretchAllColumns(true);
        int noOfRows = count / 5;
        for (int i = 0; i < noOfRows; i++) {
            int rowId = 5 * i;
            tableLayout.addView(createOneFullRow(rowId));
        }
        int individualCells = count % 5;
        tableLayout.addView(createLeftOverCells(individualCells, count));
        return tableLayout;
    }

    private TableRow createLeftOverCells(int individualCells, int count) {
        TableRow tableRow = new TableRow(this);
        tableRow.setPadding(0, 10, 0, 0);
        int rowId = count - individualCells;
        for (int i = 1; i <= individualCells; i++) {
            tableRow.addView(editText(String.valueOf(rowId + i)));
        }
        return tableRow;
    }

    private TableRow createOneFullRow(int rowId) {
        TableRow tableRow = new TableRow(this);
        tableRow.setPadding(0, 10, 0, 0);
        for (int i = 1; i <= 5; i++) {
            tableRow.addView(editText(String.valueOf(rowId + i)));
        }
        return tableRow;
    }     

} 
```

这是输出打印屏幕 ![http://a7.sphotos.ak.fbcdn.net/hphotos-ak-ash3/582244_3038340529251_1585166028_31994124_463408868_n.jpg](../Images/278675e29bb7f76e0873251c6ee8c67f.png)

如何制作如下图所示的 EditText 视图？ ![http://a6.sphotos.ak.fbcdn.net/hphotos-ak-ash4/s720x720/401912_3038335049114_780299491_n.jpg](../Images/e8195de57c0013dace9a6aba0c69051b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T11:18:21.590

最后我得到了我想要的。.

这里的代码：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Gravity;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.ScrollView;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;
import android.widget.Toast;

import java.util.ArrayList;
import java.util.List;

import static android.view.ViewGroup.LayoutParams.FILL_PARENT;
import static android.view.ViewGroup.LayoutParams.WRAP_CONTENT;
import static android.widget.LinearLayout.VERTICAL;

public class main extends Activity {
    private List<EditText> editTextList = new ArrayList<EditText>();
    private int count = 10;
    private int ix ;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ScrollView sv = new ScrollView(this);
        LinearLayout linearLayout = new LinearLayout(this);
        ViewGroup.LayoutParams params = new ViewGroup.LayoutParams(FILL_PARENT, WRAP_CONTENT);
        linearLayout.setLayoutParams(params);
        linearLayout.setOrientation(VERTICAL); 

        linearLayout.addView(tableLayout(count));
        linearLayout.addView(submitButton());
        sv.isHorizontalScrollBarEnabled();
        sv.addView(linearLayout);
        setContentView(sv);
    }

    private Button submitButton() {
        Button button = new Button(this);
        button.setHeight(WRAP_CONTENT);
        button.setText("Submit");
        button.setOnClickListener(submitListener);
        return button;
    }
     // Access the value of the EditText

    private View.OnClickListener submitListener = new View.OnClickListener() {
        public void onClick(View view) {
            StringBuilder stringBuilder = new StringBuilder();
            String str[] =  new String[count];
            int i=0;
            for ( EditText editText : editTextList) {               
                stringBuilder.append(editText.getText().toString());      
                str[i]=editText.getText().toString();

                Toast msg = Toast.makeText(main.this, str[i], Toast.LENGTH_LONG);
                msg.setGravity(Gravity.CENTER, msg.getXOffset() / 2, msg
                        .getYOffset() / 2);
                msg.show();
                i++;
            }

        }
    }; 
    // Using a TableLayout as it provides you with a neat ordering structure
     private TableLayout tableLayout(int count) {
        TableLayout tableLayout = new TableLayout(this);
        tableLayout.setStretchAllColumns(true);
       // int noOfRows = count / 5;
        for ( ix = count; ix >=0; ix--) {
            int rowId = count * ix;
            tableLayout.addView(createOneFullRow(rowId));
        }
        int individualCells = count % 5;
        return tableLayout;
    }
    private TableRow createOneFullRow(int rowId) {
        TableRow tableRow = new TableRow(this);
        tableRow.setPadding(0, 10, 0, 0);
        for (int i =count; i >= ix; i--) {

            tableRow.addView(editText(String.valueOf(rowId + i)));
        }
        return tableRow;
    }

    private EditText editText(String hint) {
        EditText editText = new EditText(this);
        editText.setId(Integer.valueOf(hint));
        editText.setHint(hint);
        editTextList.add(editText);
        return editText;
    }
} 
```

这里是输出打印屏幕 [http://a7.sphotos.ak.fbcdn.net/hphotos-ak-ash3/s720x720/599154_3041917178665_921465340_n.jpg](http://a7.sphotos.ak.fbcdn.net/hphotos-ak-ash3/s720x720/599154_3041917178665_921465340_n.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:06:28.357

```
LinearLayout main,clild;
main = new LinearLayout(....); // with vertical orientation
main.setOrientation(LinearLayout.VERTICAL);

for(int i=0;i<5;i++)
{
    child = new LinearLayout(...); // with Horizontal orientation
    child.setOrientation(LinearLayout.HORIZONTAL);
    for(int j=0;j<i;j++)
    {
       EditText ed = new EditText(...);
       child.addView(ed);
    }
    main.addView(child);
} 
```

# ms-access - 使用 Access 的余额的 SQL 更新查询引发“操作必须使用可更新查询”

> ID：10885074
> 
> 赞同：1
> 
> 时间：2012-06-04T16:56:36.350
> 
> 标签：ms-access, ms-access-2010

我有以下查询（MS Access 2010），我试图用它来更新具有运行余额的表：

```
UPDATE Accounts a SET a.CurrentBalance = 
(SELECT sum(iif(c.categoryid = 2,t.Amount * -1, t.Amount)) + 
        (select a1.openingbalance 
         from accounts a1 where a1.accountid = a.accountid) AS TotalAmount
FROM transactions t inner join (
     transactiontypes tt inner join 
     categories c on c.categoryid = tt.categoryid) 
     on t.transactiontypeid = tt.transactiontypeid); 
```

使用的表格是：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:21:19.840

“查询必须使用可更新查询”的解决方法是使用临时表，然后根据临时表中的聚合数据更新最终目标数据。在您的情况下，正如 mwolfe 建议的那样，您在内部选择查询中有一个聚合函数。解决方法可以为这种情况提供快速修复，就像它对我一样。

参考： http: [//support.microsoft.com/kb/328828](http://support.microsoft.com/kb/328828)

这篇文章帮助我了解了具体情况并提供了解决方法： [http ://www.fmsinc.com/MicrosoftAccess/query/non-updateable/index.html](http://www.fmsinc.com/MicrosoftAccess/query/non-updateable/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:12:34.430

您不能`SUM`在更新查询中使用聚合函数（如 ）。请参阅[为什么我的查询是只读的？](http://allenbrowne.com/ser-61.html)获取将导致您的查询“不可更新”的条件的完整列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T19:26:42.847

Access db 引擎包括对域函数（DMax、DSum、DLookup 等）的支持。域函数通常可以让您规避不可更新的查询问题。

考虑`DSum()`这 3 行数据在`MyTable`.

```
id MyNumber
 1        2
 2        3
 3        5 
```

然后在立即窗口中，这里有 2 个示例`DSum()`表达式。

```
? DSum("MyNumber", "MyTable")
 10 

? DSum("IIf(id=1,MyNumber * -1, MyNumber)", "MyTable")
 6 
```

我认为您可以使用类似第二个表达式的内容来替代您的`sum(iif(c.categoryid = 2,t.Amount * -1, t.Amount)`部分查询。

也许您可以使用`DLookup()`表达式来获取您的`TotalAmount`价值。不幸的是，我在尝试将您当前的 SQL 转换为域函数时感到沮丧。我意识到这不是一个完整的解决方案，但希望它能为您指出一些有用的东西。如果您编辑您的问题以向我们展示起始数据的简短示例以及您希望根据该示例数据从您的 UPDATE 语句中实现什么，我愿意再看看这个。

最后，考虑您是否绝对必须存储`CurrentBalance`在表中。根据经验，避免存储派生值。相反，在需要时使用 SELECT 查询来计算派生值。这种方法可以保证`CurrentBalance`在您检索它时始终是最新的。它还可以让您省去创建有效 UPDATE 语句的精力。

# java - 我可以在哪里存储此属性以供 Maven 和 Java 使用？

> ID：10885077
> 
> 赞同：4
> 
> 时间：2012-06-04T16:56:42.607
> 
> 标签：java, maven, properties

我正在使用 Maven 3.0.3 和 Java 6。我想将 WSDL URL 属性放在 Maven 构建过程可以访问且我的运行时 Java 代码（我正在构建 Maven JAR 项目）也可以访问的地方。我将如何构建/配置它？在我的运行时 Java 代码中，我有类似的东西

```
String wsdlUrl = getProperty("wsdl.url"); 
```

在 Maven 中，我想像这样在插件中访问 WSDL URL ...

```
 <plugin>
                            <groupId>org.codehaus.mojo</groupId>
                            <artifactId>jaxws-maven-plugin</artifactId>
                            <executions>
                                    <execution>
                                            <goals>
                                                    <goal>wsimport</goal>
                                            </goals>
                                            <configuration>
                                                    <wsdlUrls>
                                                            <wsdlUrl>${wsdl.url}</wsdlUrl>
                                                    </wsdlUrls>
                                                    <sourceDestDir>${basedir}/src/main/java</sourceDestDir>
                                                    <packageName>org.myco.bsorg</packageName>
                                            </configuration>
                                    </execution>
                            </executions>
                    </plugin> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T19:21:47.223

在目录中创建一个`.properties`文件`src/main/resources`。

### pom.xml 里面

使用[properties-maven-plugin](http://mojo.codehaus.org/properties-maven-plugin/usage.html)并从此文件加载属性，如下所示（在[使用站点](http://mojo.codehaus.org/properties-maven-plugin/usage.html)之后）：

```
<project>
  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>properties-maven-plugin</artifactId>
        <version>1.0-alpha-2</version>
        <executions>
          <execution>
            <phase>initialize</phase>
            <goals>
              <goal>read-project-properties</goal>
            </goals>
            <configuration>
              <files>
                <file>src/main/resources/common.properties</file>
              </files>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

### 来自 Java

使用[Properties#load(InputStream)](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.InputStream%29)并像这样加载属性：

```
String propertiesFileName = "/common.properties";

Properties properties = new Properties();
InputStream inputStream = this.getClass().getClassLoader()
    .getResourceAsStream(propertiesFileName);

properties.load(inputStream); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T19:17:39.427

您应该使用[Maven 资源过滤](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)来完成此操作。

这是一个适合您的示例。

`layout`

```
+- pom.xml
+- src
  +- main
    +- java
      +- resources
        +- application.properties 
```

`pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.company</groupId>
    <artifactId>application</artifactId>
    <version>1.0.0-SNAPSHOT</version>

    <name>${project.artifactId}-${project.version}</name>

    <properties>
        <wsdl.url>http://some.url</wsdl.url>
    </properties>

    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>jaxws-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>wsimport</goal>
                        </goals>
                        <configuration>
                            <wsdlUrls>
                                <wsdlUrl>${wsdl.url}</wsdlUrl>
                            </wsdlUrls>
                            <sourceDestDir>${basedir}/src/main/java</sourceDestDir>
                            <packageName>org.myco.bsorg</packageName>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
            </resource>
        </resources>
    </build>
</project> 
```

`src/main/resources/application.properties`

```
wsdl.url = ${wsdl.url} 
```

然后在您的代码中，您可以加载属性文件并获取属性`wsdl.url`。

`src/main/java/com/company/Main.java`

```
package com.company;

import java.io.IOException;
import java.io.InputStream;
import java.util.Properties;

/**
 * @author maba, 2012-06-04
 */
public class Main {

    public static void main(String[] args) throws IOException {
        ClassLoader loader = Main.class.getClassLoader();
        InputStream in = loader.getResourceAsStream("application.properties");
        Properties properties = new Properties();
        properties.load(in);
        String url = (String) properties.get("wsdl.url");
        System.out.println(url);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:59:12.270

src/main/resources 或 src/test/resources 可被 maven 访问，并且会在构建时自动按摩到 jar 中。

# jquery - jQuery重新加载DOM？

> ID：10885079
> 
> 赞同：7
> 
> 时间：2012-06-04T16:56:49.517
> 
> 标签：jquery, dom

我有一个页面，上面有一个按钮。当用户单击按钮时，它会动态呈现一个表单（即它不只是显示一个隐藏的表单......它完全是使用 jQuery 创建它）。

我的问题是新创建的表单不响应任何 jQuery 命令。这是我目前用于渲染表单的代码。

```
$("#savenewlang").click(function(e) {
    console.log("savenewlang has been clicked");
}); 
```

因此，当他们单击提交按钮但它没有运行时，它应该只是 console.log。

知道如何重新加载 DOM 或分配一个正确触发的实际事件吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-04T17:01:21.993

```
$("#container").on('click', '#savenewlang', function(e) {
    console.log("savenewlang has been clicked");
}); 
```

这里`#container`指向`#savenewlang`页面加载时属于 DOM 的父元素。

* * *

要指定此事件`.on()`，您需要***三个参数***

```
.on(eventName, target, callback); 
```

但是对于普通绑定它只需要***两个参数***

```
.on(eventName, callback); 
```

阅读更多关于**[`.on()`](http://api.jquery.com/on)**

* * *

### 余

将所有代码放入

```
$(document).ready(function() {

}); 
```

简而言之

```
$(function() {

}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T16:59:42.807

基本上发生的事情是，当您动态地将内容添加到 dom 时，您必须手动将处理程序附加到添加的 dom 元素。但是，如果您使用 jquery on() 函数，则可以创建持久事件处理程序。利用事件在 dom 中冒泡的事实，当有人单击您的动态 dom 元素时，该元素没有用于单击的事件处理程序，事件将冒泡到 body 元素，其中 on() 函数将确定实际项目点击的是#savenewlang，然后调用你定义的函数(e){}。

```
$("body").on('click', '#savenewlang', function(e) {
    console.log("savenewlang has been clicked");
}); 
```

语法是：

```
$('#selector_or_id_of_static_element').on('event_type','#selector_for dynamic_content', function(e){ //callback}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:01:40.810

由于元素是动态呈现的，因此您需要使用 .delegate() 方法顶部分配函数，如下所示：

```
$("body").delegate("#savenewlang", "click", function(e) {
    console.log("savenewlang has been clicked");
}); 
```

有关更多信息，请参阅参考：http: [//api.jquery.com/delegate/](http://api.jquery.com/delegate/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T17:00:27.673

当 DOM 元素尚不存在时，将添加事件处理程序。您可以尝试将其放入函数中：

```
function addEvent() {
    $("#savenewlang").click(function(e) {
        console.log("savenewlang has been clicked");
    });
} 
```

现在在动态添加表单后调用此函数。

# java - 如何从android中的json数据在ImageView上显示图像

> ID：10885081
> 
> 赞同：6
> 
> 时间：2012-06-04T16:57:02.207
> 
> 标签：java, android, android-layout

我正在获取 json 数据。在那个 json 中，我有一个图像的 url。现在我想在 ImageView 中显示该图像。我怎样才能做到这一点？这是我的代码

```
class LoadInbox extends AsyncTask<String, String, String> {
    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(Home.this);
        pDialog.setMessage("Loading Inbox ...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting Inbox JSON
     * */
 protected String doInBackground(String... arg0) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();

        JSONObject json = userFunctions.homeData();

        Log.e("Data", json.toString());

        // Check your log cat for JSON reponse
        Log.d("Inbox JSON: ", json.toString());

        try {
            data = json.getJSONArray(TAG_DATA);
            Log.d("inbox array: ", data.toString());
            // looping through All messages
            for (int i = 0; i < data.length(); i++) {
                JSONObject c = data.getJSONObject(i);

                // Storing each json item in variable
                String profile_img = c.getString(TAG_PROFILE_IMG);

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_PROFILE_IMG, profile_img);

                // adding HashList to ArrayList
                inboxList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }
protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        Home.this, inboxList,
                        R.layout.home_list_item, new String[] { TAG_PROFILE_IMG },
                        new int[] { R.id.profile_img2 });
                // updating listview
                setListAdapter(adapter);
            }
        });

    } 
```

这是我的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<ImageView 
    android:id="@+id/profile_img2" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingTop="8dip"
    android:paddingLeft="8dip"
    android:paddingBottom="4dip" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T17:14:00.147

因此，您需要创建另一个 AsyncTask 给定一个 URL 来加载图像，并填充一些控件。我通常会做这样的事情：

```
ImageView imageView = (ImageView)findById(R.id.blah);
new ImageLoader( person.getImageUri(), imageView, 128, 128 ).execute(); 
```

ImageLoader 将是另一个 AsyncTask，如下所示：

```
public class ImageLoader extends AsyncTask<URI,Integer,BitmapDrawable> {
    private Uri imageUri;

    private ImageView imageView;

    private int preferredWidth = 80;
    private int preferredHeight = 80;

    public ImageLoader( URI uri, ImageView imageView, int scaleWidth, int scaleHeight ) {
        this.imageUri = uri;
        this.imageView = imageView;
        this.preferredWidth = scaleWidth;
        this.preferredHeight = scaleHeight;
    }

    public BitmapDrawable doInBackground(URI... params) {
    if( imageUri == null ) return null;
    String url = imageUri.toString();
    if( url.length() == 0 ) return null;
    HttpGet httpGet = new HttpGet(url);
    DefaultHttpClient client = new DefaultHttpClient();
    HttpResponse response = client.execute( httpGet );
    InputStream is = new BufferedInputStream( response.getEntity().getContent() );
    try {
        Bitmap bitmap = BitmapFactory.decodeStream(is);
        if( preferredWidth > 0 && preferredHeight > 0 && bitmap.getWidth() > preferredWidth && bitmap.getHeight() > preferredHeight ) {
            return Bitmap.createScaledBitmap(bitmap, preferredWidth, preferredHeight, false);
        } else {
            return bitmap;
        }
    } finally {
        is.close();
    }
    }
}

    public void onPostExecute( BitmapDrawable drawable ) {
        imageView.setImageBitmap( drawable );
    }
} 
```

然后，您可以通过创建自己的子类 ListAdapter 在将图像绑定到 ListView 时启动此 AsyncTask。因此，您将不得不放弃使用 SimpleAdapter，因为事情不再简单了。这有很多优点，因此您只需加载正在显示的图像。这意味着从总数中加载了一个非常小的数字。您的用户还可以在图像加载之前看到数据，从而更快地访问数据。如果您在现有的 AsyncTask 中执行此操作，您将加载每个图像，并且用户必须等待每个图像完成，然后才能向用户显示数据。有一些东西可以通过这个来改进。一个 AsyncTask 使用它自己的线程，因此您可能会同时运行很多线程（10 个或更多）。这可能会杀死您的服务器与大量客户端。您可以使用 ExecutorService（即线程池）将这些集中起来，但您必须放弃使用 AsyncTask 并实现自己的工具来从 UI 线程运行作业并将结果发布回 UI 线程。其次，您的图像将在用户每次滚动时加载。为此，我根据图像的 URI 实现了自己的缓存方案，因此我只加载图像一次并从缓存中返回它。在这里发布的代码有点多，但这些是给读者的练习。为此，我根据图像的 URI 实现了自己的缓存方案，因此我只加载图像一次并从缓存中返回它。在这里发布的代码有点多，但这些是给读者的练习。为此，我根据图像的 URI 实现了自己的缓存方案，因此我只加载图像一次并从缓存中返回它。在这里发布的代码有点多，但这些是给读者的练习。

另请注意，我没有在 onPostExecute() 中发回 UI 线程。那是因为 AsyncTask 为我做了这件事，我不必再做一次，正如您上面的代码所示。您应该只删除额外的可运行文件并将代码内联在 onPostExecute() 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-06T07:28:16.823

你可以试试[picasso](http://square.github.io/picasso/)真的很容易使用而且效果很好。

```
Picasso.with(this.getActivity()).load(person.getImageUri()).into(imageView); // if person.getImageUri() has the url image loaded from json 
```

就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:05:51.680

看起来你得到了多个 url（如数组）

```
1- Keep all the url in an hastable with key as url and value as image View.
2- Show your UI and with loading image.
3- create the other task download image one by one and update in the image view. 
```

例如懒惰的图像加载器......

[http://iamvijayakumar.blogspot.in/2011/06/android-lazy-image-loader-example.html](http://iamvijayakumar.blogspot.in/2011/06/android-lazy-image-loader-example.html)

[http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)

[延迟加载图像的 Android 内存不足错误](https://stackoverflow.com/questions/5082703/android-out-of-memory-error-with-lazy-load-images)

[Android延迟加载图像类占用了我所有的内存](https://stackoverflow.com/questions/8424876/android-lazy-loading-images-class-eats-up-all-my-memory)

[在 Android 中的 Listview 上延迟加载图像（初级）？](https://stackoverflow.com/questions/2912054/lazy-load-images-on-listview-in-androidbeginner-level)

[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

# ruby-on-rails - Ruby on rails 将模型信息访问到另一个模型

> ID：10885088
> 
> 赞同：0
> 
> 时间：2012-06-04T16:57:11.593
> 
> 标签：ruby-on-rails, ruby, model, mongoid

我有我的第一个`Contact`带有该字段的模型，`:email`并且我的模型中需要这个相同的字段以及我`:email`的模型`Customer`中的字段值。`:email``Contact`

我将 mongoID 用于 ORM，所以这是我的第一个模型

```
class Contact
  include Mongoid::Document
  include Mongoid::Timestamps
  embedded_in :customer
  embedded_in :employee
  embedded_in :restaurant

  field :city
  field :street
  field :zip_code
  field :country
  field :phone_number
  field :email 
```

和我的第二个模型客户

```
class Customer
  include Mongoid::Document
  include Mongoid::Timestamps
  embeds_one :contact

  devise :database_authenticatable, :lockable, :recoverable,
         :rememberable, :registerable, :trackable, :timeoutable, :validatable,
         :token_authenticatable

  attr_accessible :email, :password, :password_confirmation

  field :first_name
  field :last_name
  field :password
  field :gender
  field :encrypted_password 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:08:08.040

如果您使用的是 activesupport，那么委托应该完成这项工作。

在客户.rb

```
delegate :email, :to => :contact 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:52:28.100

您可以编写自己的 setter/getter

```
class Customer
  include Mongoid::Document

  embeds_one :contact

  def email
    contact.email
  end

  def email=(string)
    contact.update_attributes(:email => string)
  end
end 
```

# java - 如何在 Java 类中创建只能从另一个类访问的方法

> ID：10885089
> 
> 赞同：3
> 
> 时间：2012-06-04T16:57:16.677
> 
> 标签：java, spring

我想知道是否有人有一种模式可以帮助我实现以下目标：

我们有一个名为 Employee 的 JPA 实体，上面有一个 setLineManager 方法。我们还有一个单独的 updateLineStructureService，它是一个 Spring 管理的服务 bean。我们想尝试确保这个 setLineManager 方法只能从 updateLineStructureService 调用，而不能直接从任何其他类调用。

有没有办法允许服务访问此方法而不将其暴露给任何其他类？我知道我可以授予方法包级别的访问权限并将服务放在与 Employee 相同的包中，但这不适合我们的包结构，所以我不希望这样做。我也知道我可以将方法设为私有，并通过在这个地方的反射来访问它，但我根本不喜欢这种解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:04:20.213

您可以检查堆栈跟踪（使用[Throwable#getStackTrace()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Throwable.html#getStackTrace%28%29)）并查看它是否在指定位置包含*允许*的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:51:11.693

使用仅可用于其他服务类的内部类：

```
public class Employee
{
  static {
    LineStructureService.registerEmployeeHelper(new EmployeeHelper() {
      @Override
      public void setLineManager(Employee emp, Object foo) {
        emp.setLineManager(foo);
      }
    });
  }

  public static void init() {}

  private void setLineManager(Object foo) { }  
}

public class LineStructureService
{
  private static volatile EmployeeHelper _helper;

  static {
    // ensure that Employee class is loaded and helper registered
    Employee.init();
  }

  public static synchronized void registerEmployeeHelper(EmployeeHelper helper) {
    _helper = helper;
  }

  public void doSomething(Employee emp)
  {
    // now this class can call setLineManager on Employee
    _helper.setLineManager(emp, blah);
  }

  public interface EmployeeHelper {
    public void setLineManager(Employee emp, Object foo);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T17:48:31.737

在下面的代码片段中，`System.PrivateEmployee`在 System 类之外是不可见的。因此实际上`privateMethod`是私有的，只能从`System`类中调用。由于`System.PrivateEmployee`extends`System.PublicEmployee`它可以在`System`类外使用`System.PublicEmployee`

```
public class System
{
      public static interface PublicEmployee { void publicMethod ( ) ; }
      private static interface PrivateEmployee extends PublicEmployee { void privateMethod ( ) ; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T17:52:56.110

您可以使用 AOP（例如 AspectJ 或 CDI）来拦截对 setLineManager() 的调用；如果调用者是 updateLineStructureService() 调用该方法；如果不是什么也不做，或者引发异常或其他什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T17:04:36.517

一个类可以访问其他类的私有方法的唯一方法是使用内部类。如果这不是一个选项，则无法做到这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-04T17:32:47.070

一种方法是制作两种形式的Employee。

"BasicEmployee" 具有除 setLineManager() 之外的所有方法。“ExtendedEmployee”扩展了 BasicEmployee 并添加了一个`public void setLineManager()`. （我假设这些是类，但它们也可以是接口）在底层，一切都是真正的 FullEmployee（为了清楚起见，您可以将 BasicEmployee 设为抽象）。但是，在代码中，在除 UpdateLineStructureService 之外的所有类中，您将其声明为 BasicEmployee。只有在 UpdateLineStructureService 中才将其声明为 FullEmployee。因此，只有 UpdateLineStructureService 可以轻松访问 setLineManager()

现在，流氓编码员总是可以将他们的 BasicEmployee 转换为 ExtendedEmployee 以访问 setLineManager()，因此这并不完全安全。但这是限制访问的合理模式。

# java - Android Service 多个服务开启

> ID：10885090
> 
> 赞同：0
> 
> 时间：2012-06-04T16:57:17.050
> 
> 标签：java, android, service, schedule, timertask

我正在做一个项目，我必须每 10 秒进行一次同步，我在服务器上接收人们想要同步的内容。将此首选项保存在数组中并在数组中四处查看用户首选项（他们想要同步的内容）。如果选择了 id 1 则执行 log.i ();

这给了我一个问题：每次同步时都会执行 log.i("Starting service"); + log.i（“大表”）。随着时间的推移，它变成了这样：

第二次同步：
log.i("启动服务");
log.i("大表！")
log.i("大表！")

第三次同步：
log.i("启动服务");
log.i("大床单！")
log.i("大床单！")
log.i("大床单！")

...每次都一样，我可以打开多项服务吗？

`public class service extends Service{`

```
Context context;
Timer t=new Timer();
timertask timertask=new timertask();
database db;
List checksync =new ArrayList();

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

public void onCreate(){
    //Se comienza aqui!
    super.onCreate();
    //Cojemos el contexto del thread de UI
    context=this;
    db=new database(context);
    onStartCommand1();
}

public void onStartCommand1(){
    //Tiempo de sincronización!
    t.schedule(timertask, 0,5000);
    this.stopSelf();
}

public class timertask extends TimerTask{

    public void run() {
        //Comenzamos a ver que està seleccionado y hacemos threads para subirlo al server

        int num=0;
        db.open();
        checksync = db.check();
        db.close();
        int lenght = checksync.size();
        check(lenght,num);
        Log.i("******", "Starting service");
    }

    public void check(int lenght, int num){

        for(int x=0; x < lenght; x++) {

            num = Integer.parseInt(checksync.get(x).toString());

            if (num == 1) {
                // Subir Sms al server.

            } else if (num == 2) {
                // Subir llamadas

            } else if (num == 3) {
                //subir contactos
                Log.i("*********", "Big sheet!");

            } else if (num == 4) {
                // Subir nombre apps

            } else if (num == 5) {
                // Subir localizaciÔøΩn.

            } else if (num == 6) {
                // Subir todo... (MÔøΩs tarde)
            }
        }
    }

}

public void onDestroy(){
    super.onDestroy();
} 
```

}

# java - 尝试从命令提示符运行类文件时出错

> ID：10885093
> 
> 赞同：-1
> 
> 时间：2012-06-04T16:57:28.550
> 
> 标签：java

我有这个类存储在 C:/CODE/src/

我打开 CMD 并输入

```
C:/CODE/src>java -cp . Hello 
```

然后它给了我这个错误

```
Exception in thread "main" java.lang.NoClassDefFoundError: Hello <wrong name: src/hello> 
```

java版本是“1.7._02”不知道还有什么办法？它符合并在 Eclipse IDE 中运行，但不是从命令控制台？

我应该怎么做才能纠正这个问题？

```
public class Hello {

        public static void main(String[] args) {
            System.out.println("Hello");

        }

} 
```

环境变量

JAVA_HOME = C:\Program Files\Java\jdk1.7.0_02\bin\;

PATH = C:\Program Files\Java\jdk1.7.0_02\bin\;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:59:25.670

> 它符合并在 Eclipse IDE 中运行，但不是从命令控制台？

您应该在带有`Hello.class`文件的目录中运行命令
您正在运行的文件`src`中只有您的`Hello.java`文件
您将在下面找到该`Hello.class`文件`/bin`（这是 Eclipse 放置它们的位置）

# sql - 不能共享主键的表之间的一对一关系

> ID：10885102
> 
> 赞同：-1
> 
> 时间：2012-06-04T16:58:34.060
> 
> 标签：sql, sql-server, relational-database

场景：每个“用户”有 0 或 1 个“银行账户”。每个“公司”有 0 或 1 个“银行帐户”。“BankAccount”记录不能共享。如何设置我的数据库来对此进行建模？我试过这个：

> “CompanyBankAccount”表，“BankAccountId”（主键）作为“BankAccount”表的外键，“CompanyId”列作为“Company”表的外键。
> 具有可为空的“BankAccountId”列作为“CompanyBankAccount”表中的外键的“Company”表。我对用户表遵循了相同的模式。

虽然这可行（强制执行规则，即任何公司或用户都不能拥有超过 1 个银行账户，并且其他用户或公司不能共享任何银行账户），但创建具有银行账户的新公司或用户是很麻烦的（我必须首先插入具有 NULL BankAccountId 的公司/用户，然后插入新的 BankAccount 记录，然后插入新的 [Company/User]BankAccountRecord，然后更新我刚刚插入的公司/用户记录上的“BankAccountId”字段）。似乎应该有一个更简单的方法。有没有人有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:03:09.947

省略 Company 和 User 表中的 BankAccountId 列可能更容易——只需按 CompanyId 或 UserId 索引连接表，您可以在需要时轻松提取 BankAccountId。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:18:09.480

除非您有多对多关系，否则您不需要关系表，并且您不需要关系表和表之间的直接关系。

有几种方法可以做到这一点，例如在表中只使用一个`UserId`和：`CompanyId``BankAccount`

```
User
  UserId int primary key
  ...

Company
  CompanyId int primary key
  ...

BankAccount
  UserId int null
  CompanyId int null
  ... 
```

您可以将其`BankAccountId`放在`User`和`Company`表中：

```
User
  BankAccountId int null
  ...

Company
  BankAccountId int null
  ...

BankAccount
  BAnkAccountId int primary key
  ... 
```

您可以使用表中的单个键`BankAccount`和关系类型的标志：

```
User
  UserId int primary key
  ...

Company
  CompanyId int primary key
  ...

BankAccount
  OwnerId int not null
  IsCompanyAccount bit not null
  ... 
```

# salesforce - Salesforce 网络服务调用

> ID：10885106
> 
> 赞同：0
> 
> 时间：2012-06-04T16:58:57.850
> 
> 标签：salesforce, apex-code

我正在尝试执行以下操作；

从 salesforce.com 我调用 http get 或 post 并使用 httpRequest 系统类发布一个 json 对象。但我得到以下异常（它是https）：

```
java.security.cert.CertificateException: No name matching issue mywebsite.com found 
```

我已经在远程主机中配置了这个网站。有谁知道这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:50:42.473

您是否错过了对 req.setClientCertificateName 的调用？

我有 APEX 代码，Salesforce 在我的站点上调用 Web 服务。我用客户端 SSL 保护它。我的网站（主机）从 Salesforce.com 授权客户端证书（与浏览器客户端授权服务器证书的传统 Web SSL 相比）。您可以在 Salesforce Admin 中的证书和密钥管理下创建一个自签名证书，然后通过调用 req.setClientCertificateName 来引用它。这是我的生产组织中的一些代码：

```
HttpRequest req = new HttpRequest();
req.setMethod('POST');
req.setHeader('Host', 'www.mywebsite.com');
req.setEndpoint('https://www.mywebsite.com/post.asp');
try {
    req.setClientCertificateName('Cert_For_MyWebSite');
} catch (System.CalloutException e) {
    // The cert doesn't make it to the sandbox
}
req.setHeader('Connection', 'keep-alive');
req.setHeader('content-type', 'text/plain');
req.setHeader('Content-Length', body.length().format());
req.setBody(body);
Http http = new Http();

HttpResponse res = http.send(req);
System.debug(res.toString());
System.debug('STATUS:' + res.getStatus());
System.debug('STATUS_CODE:' + res.getStatusCode()); 
```

在服务器（IIS 7.5）上，我使用这个 web.config 启用了自签名证书：

```
<configuration>
<system.webServer>
<security>
<access sslFlags="Ssl, SslNegotiateCert, SslRequireCert" /> 
<authentication>
    <iisClientCertificateMappingAuthentication enabled="true" oneToOneCertificateMappingsEnabled="true">
        <oneToOneMappings>
            <!-- production salesforce -->
            <add enabled="true" 
                 userName="salesforce" 
                 password="[enc:AesProvider:aaa...aaa:enc]" 
                 certificate="MIIEaaa...aaa=" />
        </oneToOneMappings>
    </iisClientCertificateMappingAuthentication>
</authentication>
</security>
</system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T01:00:08.083

在我的另一个答案中，我正在考虑 Salesforce 客户端证书，因为我记得最初整理它时很头疼，但可能错误在于您的 Web 服务器的证书。这可能是一个简单的名称匹配问题。例如，您的服务器提供给 Salesforce 的证书已颁发给 a.company.com，但您正尝试在 b.company.com 上使用它。[这会产生与此处](https://stackoverflow.com/questions/2678475/jvm-to-ignore-certificate-name-mismatch)和[此处](http://www.mkyong.com/webservices/jax-ws/java-security-cert-certificateexception-no-name-matching-localhost-found/)讨论的非常相似的 java 错误消息。当您尝试通过 SSL 提供服务时，您的浏览器是否出现任何错误？

如果您认为 Salesforce 没有验证您的 Web 服务器的证书，您可以尝试[这里建议的一些技巧来处理类似的 javax.net.ssl.SSLPeerUnverifiedException 错误](http://boards.developerforce.com/t5/General-Development/Outbound-messaging-error-javax-net-ssl/td-p/76944)。他们甚至指向 Salesforce 信任的 CA 列表。

# html - 遍历 WWW::Selenium 中的嵌套类

> ID：10885107
> 
> 赞同：1
> 
> 时间：2012-06-04T16:59:03.110
> 
> 标签：html, perl, selenium, loops

有什么方法`WWW::Selenium`可以让我遍历这个结构（HTML代码）并访问hrefs？

```
<div class="myGengo_wrap full_width">
<h1>Dashboard</h1>
    <div class="blue list">
    <span class="title">Sections </span>
        <span class="dashboard_master_language">
        <span class="dashboard_language wide">
            <a href="http://mygengo.com/string/p/demoproject-1/admin/languages/settings/en_us">Englisch (Master) </a>
        </span>
    </span>
    <span class="dashboard_languages">
        <span class="dashboard_language wide">
            <a href="http://mygengo.com/string/p/demoproject-1/admin/languages/settings/zh_cn">Chinese </a>
        </span>
        <span class="dashboard_language wide">
            <a href="http://mygengo.com/string/p/demoproject-1/admin/languages/settings/de_de">German </a>
        </span>
    </span>
      ...
      ...
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:48:33.470

有一个 get_all_links 方法 - 请参阅[文档](http://search.cpan.org/~lukec/Test-WWW-Selenium-1.33/lib/WWW/Selenium.pm)。

# c# - 我应该在处理外部事件的类上实现 IDisposable 以释放事件处理程序吗？

> ID：10885111
> 
> 赞同：5
> 
> 时间：2012-06-04T16:59:21.987
> 
> 标签：c#, .net, event-handling, idisposable

> **可能重复：**
> [使用 IDisposable 取消订阅事件](https://stackoverflow.com/questions/452281/using-idisposable-to-unsubscribe-events)

我发现自己在每个类上实现 IDisposable 来处理来自未在类中声明的对象的事件。例如：

```
public class Text
{
    public Text(ClassWithEvents c)
    {
        c.Event += EventHandler;
    }
} 
```

在这种情况下，我会将 Text 类声明为 IDisposable 并在 Dispose 方法上删除事件处理程序，以避免将对象固定在内存和其他讨厌的东西上（例如在应该死的对象上执行的代码）。

我想知道是否有更好的方法来做到这一点，因为我不喜欢有太多的一次性课程，因为它们必须“小心处理”。

# ios - 在没有应用商店的情况下分发 Ipad App

> ID：10885112
> 
> 赞同：12
> 
> 时间：2012-06-04T16:59:22.713
> 
> 标签：ios, ipad, app-store, distribution, provisioning-profile

假设如下场景：A 公司要求 B 公司为他们制作一个 iPad App。A 公司只想在数量非常有限的 iPad（少于 100 台）上为自己使用它。A 公司不一定有兴趣在应用商店提供它。

B公司如何将应用程序分发（出售）给A公司？它可以通过临时配置文件在 iPad 上安装应用程序，但这仅用于测试，一旦配置文件过期，该应用程序将无法使用。B 如何在一年后不过期的情况下合法地在 iPad 上安装此应用程序？

使用应用商店时，是否可以选择仅将应用出售给该公司，或通过应用商店出售给特定用户，当公司不在美国时（我听说只能在美国使用的 B2B 分发我们）

企业分布是否可以选择？但是 A 公司必须有 IOS 开发者企业计划票，这样它才能在其 iPad 上安装应用程序，而不是 B 公司，对吗？然而，B公司是这里的开发者……或者，如果B公司有IOS开发者企业计划票，在一些iPad上安装应用程序并将iPad卖给A公司，这是否合法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T17:09:03.483

[在这种情况下，企业分发](https://developer.apple.com/programs/ios/enterprise/)正是您想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T17:11:23.970

A公司可以参与企业开发者计划并在其任何设备上免费安装专有应用程序：

[https://developer.apple.com/programs/ios/enterprise/](https://developer.apple.com/programs/ios/enterprise/)

注意：我已经开发了几个专有应用程序，我们只是通过应用程序商店发布了这些应用程序，价格会阻止其他人购买。这是客户的员工在他们的设备上获取应用程序的最简单方法，当其他人看到我们所做的事情时，它为我们带来了新的业务。

# dependencies - 提供本地工具，同时保持最大的可移植性

> ID：10885116
> 
> 赞同：3
> 
> 时间：2012-06-04T16:59:42.090
> 
> 标签：dependencies, native-code, 12factor

[Twelve-Factor App](http://www.12factor.net/)宣言说它适用于 Web 应用程序，“......与底层操作系统有一个干净的合同，在执行环境之间提供最大的**可移植性**”[强调由我添加]

但后来[它说](http://www.12factor.net/dependencies)：

> 十二因素应用程序也不依赖于任何系统工具的隐含存在。例子包括炮击到`ImageMagick`或`curl`。虽然这些工具可能存在于许多甚至大多数系统上，但无法保证它们将存在于未来可能运行该应用程序的所有系统上，或者未来系统上的版本是否与该应用程序兼容。如果应用程序需要使用系统工具，则应将该工具出售到应用程序中。

他们之前将“供应商”定义为：

> 范围为包含应用程序的目录（称为“供应商”或“捆绑”）。

例如，当（至少在 Linux 上）本机 64 位可执行文件不能在 32 位环境中运行时，应该如何做到这一点——更不用说在其他操作系统上运行了？还是有更好的方法来处理这个可移植性问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:17:48.527

在我看来，**根本不应该这样做**。这是因为：

*   如果本机可执行文件是动态链接的，那么它们可能无法仅在*未来的操作系统版本*上运行，更不用说未来或过去的处理器架构了。
*   据我了解，不可能通过静态链接来完全面向未来的本机可执行文件。你仍然可以有问题。Solaris 甚至不支持系统库的静态链接！
*   库依赖项并不是本机工具可以拥有的唯一一种依赖项。也可能有其他问题。
*   旧`ImageMagick`的 s - 甚至是`curl`s - 可能存在安全漏洞，可能使您的应用程序受到损害。（这有点争议——它的有效性取决于你更信任谁来监视/应用安全更新——维护和升级服务器的人，还是开发人员？当然他们可能是同一个人——现在. 但我在这里的工作假设是服务器最终会应用更新，这反过来会保护您的应用程序免受系统可执行文件中已在更新中修复的安全漏洞的影响。）

我的观点：如果您选择的依赖管理系统直接无法处理本机可执行文件，请在自述文件中注明并完成它。如果您没有 README，请创建一个。并且（对于内部 Web 应用程序）将您需要的本机工具添加到您在设置服务器时使用的标准服务器映像或脚本中，并确保您对*它们存在的原因进行*了额外的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T20:38:52.927

这只是意味着您应该在您的供应商资源之间建立声明性依赖关系和干净的合同。

如果您的应用程序依赖于特定版本的软件，您必须与它签订一份干净的合同，以便您可以模拟/存根功能进行开发。此外，即使在 Windows 中，将依赖项管理作为应用程序的一部分也并非不可能（尽管您可能希望它发生在您的安装程序中，而不是应用程序本身）。

如果您的产品严重依赖其他软件，以至于即使在测试环境中也无法在没有它的情况下运行，那么必须将其捆绑在一起，并且您必须制定 EULA，或者，实际上，您没有产品。

# jquery - jqPlot 每小时图

> ID：10885118
> 
> 赞同：1
> 
> 时间：2012-06-04T16:59:50.380
> 
> 标签：jquery, graph, jqplot

我想要与此类似的 jqPlot，[http: //www.jqplot.com/deploy/dist/examples/date-axes.html](http://www.jqplot.com/deploy/dist/examples/date-axes.html)

但是我想每小时做一次。我有 2 周的数据希望每小时显示一次，并且希望 x 轴显示如下：

```
8am 9am 10am ... 11pm   12am 1am 2am 3am ...  
|----June 1, 2012----| |----June 2, 2012----| 
```

有没有办法做到这一点？

对示例进行简单修改的​​问题是 x 轴标签变得不可读，即使使用少量数据也是如此。

![轴覆盖](../Images/167fd4cacd675db570182c965dc6e527.png)

代码的天真修改：

```
$(document).ready(function(){
  var line1=[... data snipped...];
  var plot2 = $.jqplot('chart2', [line1], {
      title:'Customized Date Axis', 
      axes:{
        xaxis:{
          renderer:$.jqplot.DateAxisRenderer, 
          tickOptions:{formatString:'%b %#d, %#I %p'},
          min:'June 1, 2012 8:00AM', 
          tickInterval:'1 hour'
        }
      },
      series:[{lineWidth:4, markerOptions:{style:'square'}}]
  });
});​ 
```

有关问题的实时编辑，请参阅 JSFiddle。[http://jsfiddle.net/AqFTV/](http://jsfiddle.net/AqFTV/)

我知道我可以更改 tickOptions 格式字符串，但我找不到相关文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:45:19.880

我强烈建议为了提高图表[的可读性，在此处旋转您的刻度示例。](http://www.jqplot.com/tests/rotated-tick-labels.php)

当它去勾选格式时，您可以在[此处的 DateAxisRenderer 插件下的文档中找到。](http://www.jqplot.com/docs/files/plugins/jqplot-dateAxisRenderer-js.html)

# sql - oracle中两个时间戳之间的差异（以天为单位）

> ID：10885119
> 
> 赞同：2
> 
> 时间：2012-06-04T16:59:51.013
> 
> 标签：sql, oracle

```
SELECT MIN (snap_id) AS FIRST_SNAP,
     MAX (snap_id) AS LAST_SNAP,
     MIN (BEGIN_INTERVAL_TIME) AS FIRST_QUERY,
     MAX (END_INTERVAL_TIME) AS LAST_QUERY,
     max(end_interval_time) - min(begin_interval_time) as "TIME_ELAPSED"
FROM dba_hist_snapshot
ORDER BY snap_id;

2931    3103    5/28/2012 6:00:11.065 AM    6/4/2012 11:00:40.967 AM    +07 05:00:29.902000 
```

我希望最后一列输出为 7（对于这些天）。我已经尝试过 trunc 和 extract 就像提到的其他一些帖子一样，但似乎无法正确使用语法。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:02:22.257

从您的评论来看，您使用的是`timestamp`列，而不是`datetime`. 您可以使用`extract`来检索小时差，然后`trunc(.../24)`获取整个天数：

```
trunc(extract(hour from max(end_interval_time) - min(begin_interval_time))/24) 
```

或者您可以将其`timestamp`转换为`date`：

```
trunc(cast(max(end_interval_time) as date) -
    cast(min(begin_interval_time) as date)) 
```

# java - 使用 Spring 和 Apache CXF 实现 Java Web 服务的安全性

> ID：10885122
> 
> 赞同：4
> 
> 时间：2012-06-04T17:00:06.963
> 
> 标签：java, authentication, spring-security, cxf

我有一个在 Java Spring 3 上运行的应用程序。我的应用程序使用 RESTful 服务和 Spring Security 来保证安全性。它有一个用户表并从中检查用户凭据。我为我的应用程序实现了 Web 服务功能（客户想要的 Web 服务之一，而不是 RESTful 服务）。如果可能的话，我想要相同的身份验证机制，并希望查找该数据库并只允许一个用户（对于现在的管理员）与我的 Web 服务服务器进行通信。

我是否应该像我的 RESTful 身份验证一样遵循相同的方式，或者 Spring 是否有任何 Java Web 服务的身份验证和安全机制（即如何处理注销，如何为客户端-服务器 Web 服务通信启用注销机制）

**PS：**我使用 Apache-CXF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:11:31.323

两种可能的方式：

1.  将[BasicAuthenticationFilter 或 DigestAuthenticationFilter](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/springsecurity-single.html#basic)放在 CXF Servlet 前面。

2.  [将 WS-Security UsernamePasswordToken](http://cxf.apache.org/docs/ws-security.html#WS-Security-UsernameTokenAuthentication)与 CXF 一起使用并编写一个 CallbackHandler，它 a) 创建一个 UsernamePasswordAuthenticationToken，b) 调用 authenticationManager.authenticate()，c) 将身份验证存储在 SecurityContextHolder 中。

请注意，以上内容并未涵盖注销的概念，因为登录会话通常使用 cookie 实现，并且以上是无状态方法。如果您确实需要注销，那么您应该考虑使用 OAuth，因为您可以通过使访问令牌无效来实现注销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:26:18.147

您可以在发送到 REST 的 HTTP 标头中放置一个安全令牌，REST 会对其进行解码并验证它是否来自管理位置。

# ipad - 用于 ipad 的带有文件上传的 html 表单

> ID：10885124
> 
> 赞同：0
> 
> 时间：2012-06-04T17:00:16.363
> 
> 标签：ipad

我有一个基于 PHP（无 JavaScript）的网站。它有一个文件上传输入。我如何使它适用于 iPad？我可以使用 Dropbox 访问要上传的文件。谢谢

# php - 填充一个下拉框，基于使用 php、mqsql 和 ajax 选择另一个下拉框

> ID：10885125
> 
> 赞同：0
> 
> 时间：2012-06-04T17:00:18.337
> 
> 标签：php, javascript, mysql, ajax

我正在尝试根据另一个下拉框中的选择填充一个下拉框。这是我的 php 代码：

```
<form id="inventory" method="POST" action="">
   <fieldset>
      <label for="area" >Select Shelf Area</label>
      <select id="area" name="area">
          <option value=""></option>

          <?php $area = $conn->query("
             select substring_index(location, ' ', 1) as area
             FROM location GROUP BY substring_index(location, ' ', 1)");

             while ($row = $area->fetch_assoc()) {
                echo '<option value="' . $row['area'] . '" >' . $row['area'] . '</option>';
             }
          >
      </select><br/>
    </fieldset>
</form> 
```

当我运行查询时，一切都很好，但我需要获取此结果并使用它来填充另一个下拉框（<'value from previous drop down'>），它位于此处：

```
echo "<label for='location' id='label'>Select location:</label>";
echo "<select id='location' name='location'>";
echo "<option value=''>--Select Location--</option>";
$query = "SELECT location_id, location FROM location
    WHERE location LIKE '<value from previous drop down box>'
    ORDER BY location";
$result = $conn->query($query);
while ($row = $result->fetch_assoc()) {
    echo '<option value="' . $row['location'] . '" >' . $row['location'] . '</option>';
} 
```

有什么想法吗？谢谢吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:07:29.557

可能是您`SUBSTRING_INDEX`以错误的方式使用该功能。

在你的第一个`SELECT`你可能没有得到任何输出或者可能是空白行。

根据[网站](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_substring-index)——

> **SUBSTRING_INDEX(str,delim,count)**
> 
> 在计数出现分隔符 delim 之前从字符串 str 返回子字符串。如果 count 为正，则返回最终分隔符左侧的所有内容（从左侧开始计数）。如果 count 为负数，则返回最终分隔符右侧（从右侧开始计数）的所有内容。SUBSTRING_INDEX() 在搜索 delim 时执行区分大小写的匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:46:07.063

这就是我使用*JavaScript*和*Ajax*解决问题的方法：

```
$("#area").change (function(){
    $("#acctRecords tbody tr").remove();
    $('#label').show();
    $('#label2').show();
    $('#location').show();
    $('#section').show();

    $.ajax({
        type: "POST",
        async: true,
        url: "area.php",
        dataType:"json",
        data: ({area: $('#area').val()}),
        success: function(data) {
            $('select#location').empty();
            $('select#location').append('<option value="0">Select Option</option>');

            //Populate options of the second dropdown
            for(var x = 0; x < data.id.length; x++) {
                $('select#location').append('<option value="'+data.id[x]+'">'+data.location[x]+'</option>');
            } //end of each function

        } // end of success
    }); // end of ajax call
}); // end of area change function 
```

这将发布到我的 HTML 中：

```
echo"<label for='location' id='label'>Select location:</label>";
echo"<select id='location' name='location'>";
echo"</select><br />"; 
```

完美运行！

# mysql - 从带有连接的两个表中搜索数据如何处理空值

> ID：10885128
> 
> 赞同：0
> 
> 时间：2012-06-04T17:00:44.710
> 
> 标签：mysql

我写了一个搜索查询，它将加入两个不同的表。我已经把左连接放在两者上。现在第一个表包含 60 条记录，而基于第二个表只有 30 条。现在我想如果我的搜索查询应该返回所有 60 条记录。现在它返回 30。查询相同。

> 选择 A. *,B.* 从 A 在 A.Id=B.AId 上左连接 B，其中 A.name=IfNull('tst',A.name) AND B.class=IFNull('c',B.class)。

请指导我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:25:17.600

明智的做法是记住 JOIN 操作（各种 JOIN 操作，LEFT、RIGHT、INNER、OUTER）的目的是创建一个新的虚拟表，该表由连接在一起的表组装而成。

这个 JOINed 虚拟表应该包含什么？在您的情况下，您的 A.ID 列和 B.AID 列的含义是什么？

1.  您的 A 表中是否存在具有 A.ID 列值的行在 B.AID 中没有出现？
2.  B 表中是否存在 B.AID 列值在 A.ID 中没有出现的行？

如果问题 1 的答案是 Yes 而问题 2 是 No，那么 LEFT JOIN 会给你想要的。但简化您的查询。尝试这个。

```
 SELECT A.*, B.*
   FROM A
   LEFT JOIN B ON A.ID = B.AID 
```

如果您碰巧只需要 A 中的行，而 B 中没有相应的行，请尝试此操作。

```
 SELECT A.*
   FROM A
   LEFT JOIN B ON A.ID = B.AID
   WHERE B.AID IS NULL 
```

如果这两个问题的答案都是肯定的，那么您*可能*想要这个：

```
 SELECT A.*, B.*
   FROM A
   OUTER JOIN B ON A.ID = B.AID 
```

但是您应该非常仔细地考虑这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:45:54.020

试试这个逻辑，我希望它对你有用......

```
select A.*,B.* from A left join B on A.Id=B.AId where B.Id != '' 
```

# stored-procedures - 使用存储过程在sql server中将缺少的行从一个表复制到另一个表

> ID：10885129
> 
> 赞同：2
> 
> 时间：2012-06-04T17:00:46.917
> 
> 标签：stored-procedures, sql-server-2008-r2

我必须在不同的数据库（在同一台服务器上）中创建相同的表。我需要将数据行从左侧数据库表传输到右侧数据库表，但我只想传输不在右侧数据库表中的行。

有没有一种巧妙的方法来做到这一点？

我正在使用 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:03:34.673

假设您可以唯一标识具有 column 的行`id`：

```
insert into databasename..tablename
select * from datababasename2..tablename2
where id not in (select id from databasename..tablename) 
```

# accessibility - 可以以编程方式抑制文本区域的读取吗？

> ID：10885132
> 
> 赞同：0
> 
> 时间：2012-06-04T17:00:55.303
> 
> 标签：accessibility, screen-readers

我对可访问性的第一次尝试是令人生畏的。我建立了一个客户与代理“聊天”的网站，其中大部分内容显然是动态/AJAX。我正在使用 Window-Eyes 7.5 进行测试。

对于传入的消息，我只需将“role=alert”和“aria-live=polite”添加到新的 DIV 中，屏幕阅读器就会按照我的预期读取传入的文本。但是，如果我碰巧在我要*发送*评论的文本区域中输入内容，屏幕阅读器会突然中断并读取我的输入内容。

这完全取决于 Window-Eyes 的配置吗？是否有任何编程方式我可以 1) 禁止读取文本区域，或 2) 强制执行某种排队以便完全读取新消息？请注意，在这种情况下切换焦点不是一个选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:38:48.050

我不知道在用户输入 Jaws 或 NVDA 时强制阅读文本。我认为这适用于 Window Eyes，但即使不是这样，您也应该假设用户输入将停止自动说出文本以与尽可能多的屏幕阅读器兼容。大多数屏幕阅读器用户都知道，打字会停止自动说出更新的内容，他们会查看最后几条消息，以确保在打字时没有遗漏任何内容。如果您担心用户没有意识到有新消息到达，您可能希望在收到消息时播放声音。这样，当用户键入时，即使没有读出消息，他们也会知道他们有要查看的消息。

# python - 在 python 函数中调用参数作为函数定义的一部分？

> ID：10885134
> 
> 赞同：1
> 
> 时间：2012-06-04T17:01:05.410
> 
> 标签：python, function, arguments

如何在函数定义中的函数输入中传递参数？

例如：

```
def correlate1(vara1, vara2=vara1*2):
    print "test" 
```

回报：

```
Traceback (most recent call last):
  File "test.py", line 321, in <module>
    def correlate1(vara1, vara2=vara*2):
NameError: name 'vara1' is not defined 
```

显然，您可以这样做：

```
 def correlate1(vara1, vara2=0):
        if vara2==0:
            var2=vara1*2        
        print "test" 
```

但是有没有办法在函数定义中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T17:03:23.997

调用函数后只需设置它：

```
def correlate1(vara1, vara2=None):
    vara2 = 2 * vara1 if vara2 is None else vara2

    print "test" 
```

甚至更简单：

```
def correlate2(var1, var2=None):
    var2 = var2 or var1 * 2
    print "test" 
```

`var2`的默认值表达式不能包含`var1`，因为`var1`在调用函数之前不存在。

# cocoa - 如何为 NSPopUpButton 设置绑定

> ID：10885137
> 
> 赞同：7
> 
> 时间：2012-06-04T17:01:18.640
> 
> 标签：cocoa, selection, cocoa-bindings, nspopupbutton

我想将 NSPopUpButton 的选择绑定到预定义值之一。为了简单起见，想象一个博客应用程序：我有`BlogPost`实体`Category`（核心数据，虽然没关系），每个`BlogPost`对象都有一个到其中一个对象的链接`Category`（通过`category`属性）。

我想让用户通过 NSPopUpButton 更改类别，所以在我的 XIB 中，我有 NSArrayController 保存所有可能的类别，并将按钮的*内容值*绑定到：

*   绑定到：*categoriesArrayController*
*   控制器键：*排列对象*
*   型号键：*title*

这很好地填充了所有类别的标题。我还可以将*选定对象*绑定到：

*   绑定到：*blogObjectController*（或直接绑定到`Blog`对象）
*   控制器键：*选择*
*   型号键：*类别*

这有效并且在弹出窗口中选择了正确的类别，但是更改选择不会更改提交博客帖子的类别，而是将帖子类别的标题更改为所选值。

鉴于上述绑定，这实际上是有道理的，所以我的下一步是将弹出窗口的内容值的绑定更改为仅*排列*对象（无模型键），类似选择的对象。这有效，并且更改选择确实`category`将博客文章更改为另一篇文章。**但**它不会在弹出菜单中显示类别标题，而是显示`description`类别的（在核心数据中以`<Category 0x1002b6990> (entity: Category; id: .......)`.

这也是有道理的，所以我介绍了自定义`NSValueTransformer`（不可逆）。这修复了弹出菜单中的项目描述，但随后选择不起作用。我还尝试在选定对象绑定上使用转换器，但这只会完全禁用我的弹出窗口（也许需要反向转换，但这会使转换器变得相当复杂）。

我是否遗漏了一些明显的东西——这是否可以完全通过绑定来实现，而无需在控制器层上引入额外的代码？

任何虽然是受欢迎的！

PS：希望上面的文字有意义:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T20:46:05.200

我会尝试如下：

NSPopupButton 的：

*   **将内容**绑定到：*categoriesArrayController* ControllerKey：`arrangedObjects`
*   **将内容值**绑定到：*categoriesArrayController* ControllerKey：`arrangedObjects`模型键路径：*标题*
*   **将选定对象**绑定到：*blogObjectController* ControllerKey：`(empty)`模型键路径：*content.category*

# c# - 在多个控件中应用相同的故事板

> ID：10885139
> 
> 赞同：0
> 
> 时间：2012-06-04T17:01:33.980
> 
> 标签：c#, wpf

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="storyboard.MainWindow"
x:Name="Window"
Title="MainWindow"
Width="640" Height="480">
<Window.Resources>
    <Storyboard x:Key="all_in_one">
        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).(GradientBrush.GradientStops)[3].(GradientStop.Color)" Storyboard.TargetName="btn_a">
            <EasingColorKeyFrame KeyTime="0" Value="#FFCDCDCD"/>
            <EasingColorKeyFrame KeyTime="0:0:0.6" Value="#FFED0B00"/>
            <EasingColorKeyFrame KeyTime="0:0:1" Value="#FFCDCDCD"/>
        </ColorAnimationUsingKeyFrames>
    </Storyboard>
</Window.Resources>

<Grid x:Name="LayoutRoot">
    <Button x:Name="btn_a" Content="A" HorizontalAlignment="Left" Height="56" Margin="117,134,0,0" VerticalAlignment="Top" Width="66" Click="btn_a_Click" />
    <Button x:Name="btn_b" Content="B" HorizontalAlignment="Left" Height="56" Margin="187,134,0,0" VerticalAlignment="Top" Width="66"/>
    <Button x:Name="btn_c" Content="C" Height="56" Margin="257,134,301,0" VerticalAlignment="Top"/>
</Grid> 
```

![在此处输入图像描述](../Images/1cf3daeb0c7d46b91775f28b26d51c50.png)

在这里，我为按钮 a("btn_a") 创建了一个故事板。

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        this.InitializeComponent();

        // Insert code required on object creation below this point.
    }

    private void btn_a_Click(object sender, RoutedEventArgs e)
    {
        Storyboard button_animation = (Storyboard)(FindResource("all_in_one"));
        button_animation.Begin();            
    }
} 
```

我想在后面的代码中动态地将相同的故事板应用于彼此的按钮，例如 btn_b 和 btn_c。

如果我单击按钮 b，它也必须为按钮 c 设置动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:14:29.770

这可能不是最好的方法。话虽这么说，你可以这样做：

```
 private void btnC_Click(object sender, RoutedEventArgs e)
    {
        Storyboard storyboard = Resources["all_in_one"] as Storyboard;
        Storyboard.SetTargetName(storyboard, "btnC");

        storyboard.Begin();
    } 
```

您需要从 XAML 中删除您的**Storyboard.TargetName**分配才能使其正常工作。

如果您需要一次启动多个情节提要，只需在使用新目标名称调用 Storyboard.SetTargetName 函数后再次调用 Begin() 即可。

# c# - 从另一个对话框获取 Gtk.Dialog.Close 事件永远不会触发（C# 单声道）

> ID：10885140
> 
> 赞同：1
> 
> 时间：2012-06-04T17:01:36.940
> 
> 标签：c#, mono, gtk

我正在从另一个对话框中加入 Gtk.Dialog 关闭事件，如下所示：

```
AddTask dialog = new AddTask (task); //AddTask inherits from Gtk.Dialog
dialog.Close += HandleDialogClose;
dialog.Show();

void HandleDialogClose (object sender, EventArgs e)
{
    Refresh(); //Does some stuff in the calling dialog
} 
```

当我关闭对话框（我在上面创建的那个）时，永远不会触发 HandleDialogClose 事件。知道为什么吗？

这是一些示例代码，我现在自己解决了。我正在登记 Close() 事件，而我应该登记 Destroyed() 事件。下面的代码现在可以工作（注释的代码是不工作的）。

```
using System;
using Gtk;

namespace test
{
    public partial class MainWindow: Gtk.Window
    {   
        public MainWindow (): base (Gtk.WindowType.Toplevel)
        {
            Build ();
            Button button1 = new Button();
            button1.Label = "Open About";
            this.Add(button1);
            button1.Show();
            button1.Clicked += HandleButton1Clicked;
        }

        void HandleButton1Clicked (object sender, EventArgs e)
        {
            About dialog = new About();
            //dialog.Close += HandleAboutClose;
            dialog.Destroyed += HandleAboutClose;
            dialog.Show();
        }

        protected void OnDeleteEvent (object sender, DeleteEventArgs a)
        {
            Application.Quit ();
            a.RetVal = true;
        }

        void HandleAboutClose (object sender, EventArgs e)
        {
            Console.WriteLine("About Closed");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:00:21.047

我需要使用

```
dialog.Destroyed += HandleAboutClose; 
```

代替

```
dialog.Close += HandleAboutClose; 
```

# c# - 根据源更改列样式

> ID：10885143
> 
> 赞同：1
> 
> 时间：2012-06-04T17:01:39.763
> 
> 标签：c#, wpfdatagrid

我正在尝试用一列作为组合框填充数据网格，但我需要当绑定到组合框的集合为空时，该列成为文本框列。我已将列定义如下：

绑定绑定 = new Binding("DataContext.Prices"); binding.RelativeSource = new RelativeSource(RelativeSurceMode.FindAncestor, typeof(UserControl),1);

```
DataGridComboBoxColumn productPrices = new DataGridComboBoxColumn()
{
   ElementSyle = new Style
   {
        TargetType = typeof(ComboBox),
        Setters =
        {
            new Setter
            {
                Property=ComboBox.ItemsSourceProperty,
                Value= binding
            }
        }
   },
   EditingElementSyle = new Style
   {
        TargetType = typeof(ComboBox),
        Setters =
        {
            new Setter
            {
                Property=ComboBox.ItemsSourceProperty,
                Value= binding
            }
        }
   },
   DisplayMemberPath = new Binding("Price");
   SelectedValuePath = new Bindnt("Price");
};

myDataGrid.Columns.Add(productPrices);
myDataGrid.Columns.Add(new DataGridTextColumn(){ Header="Name", Binding=new Binding("Name")}); 
```

我定义了 myDataGrid：

```
<DataGrid Name="myDataGrid" ItemsSource="{Binding Products}" /> 
```

在我的视图模型中，我创建了一个

```
var products = new List<Product>
{
    new Product 
    {
       Name="Prod 1",
       Price="12.5"
    }
}
var prices = new List<PriceL>
{
    new PriceL
    {
       Price="12.5"
    },
    new PriceL
    {
       Price="10"
    }

}

ICollectionView Products = CollectionViewSource.GetDefaultView(products);
ICollectionView Prices = CollectionViewSource.GetDefaultView(prices); 
```

我需要当“价格”为空时，该列变为我正在使用 MVVM 的文本框中，我尝试使用 elementStyle，但我在 Combobox 中看不到任何让我验证它的数据源的事件。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T22:01:56.043

我刚刚找到了一种方法

```
<UserControl.Resources>
    <DataGrid ItemsSource={binding} x:Key="DataGrid1">
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{ID}"/>
            <DataGridTextColumn Binding="{Name}"/>
        </DataGrid.Columns>
    </DataGrid>
    <DataGrid ItemsSource={binding} x:Key="DataGrid2">
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{ID}"/>
            <DataGridCheckBoxColumn Binding="{Accepted}"/>
        </DataGrid.Columns>
    </DataGrid>

</UserControl.Resources>
<Grid>
    <ContentControl Content="{StaticResource DataGrid1}" DataContext="{Binding MyTable}" Name="myContent"/}    
</Grid> 
```

Y por codigo puede cambiarse el content

myContent.Content = this.FindResource("DataGrid2");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:00:06.583

您是否研究过触发所需视觉更改的行为，例如[DataStateBehavior](http://msdn.microsoft.com/en-us/library/ff723952%28v=Expression.40%29.aspx)？您可能希望在 VM 中放入一个布尔属性，该属性检测源是否有效，该行为可以触发。

# iphone - 带有 UITableView 机制的 UIScrollView

> ID：10885146
> 
> 赞同：0
> 
> 时间：2012-06-04T17:01:49.660
> 
> 标签：iphone, objective-c, ios, ipad

我正在寻找一个第三方库，它允许我使用带有 UITableView 机制的 UIScrollView，所以它会有类似 viewForRowAtIndexPath、numberOfRowsAtIndexPath.. 重用视图的东西。我知道 UITableView 是 UIScrollView 的子类，但我想做更多的自定义，这在使用 UITableView 时会有点困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:44:11.787

由于`UITableViewCell`是 的子类`UIView`，您可以使用自定义`UITableViewCell`，将您的视图添加为`UITableViewCell`的子视图。我假设您所有的视图都具有相同的大小。（在表格视图控制器的 init 方法中，请记住将 self.tableView.rowHeight 设置为可以容纳视图高度的值。）

有关更多信息，请参阅**Apple 的 iOS 表视图编程指南的****自定义单元格**部分。

# iphone - ios 5 safari 中的 href tel 使用使浏览器回到历史记录中的 1 页

> ID：10885150
> 
> 赞同：2
> 
> 时间：2012-06-04T17:02:16.440
> 
> 标签：iphone, ios5, safari, href, tel

所以我只是想从网页发起呼叫，这部分工作正常。但是当调用链接时，如果我想调用，就会弹出注释。Safari 同时在浏览历史记录中倒退一页！

到目前为止，我正在尝试使用两种语法

```
<a>Click the phone number to initiate call: </a><a href="tel:+12345" class="call">Call</a><br>

<a href="tel:0123412345" target="_blank" rel="external" data-role="button">Phone me</a> 
```

因此，如果有人知道如何避免浏览器在按电话链接时返回，那就太好了。

# post - REST - 不应该 PUT = 创建和 POST = 更新

> ID：10885152
> 
> 赞同：40
> 
> 时间：2012-06-04T17:02:30.880
> 
> 标签：post, put, rest

由于PUT 是幂等的，因此不应该使用**PUT**`Create`和**POST 。**`Update`

这样同一个订单的多个 PUT 只会下一个订单？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-06-04T17:07:06.487

不同之处在于 PUT 用于已知资源，因此用于更新，[如](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.6)rfc2616 中所述。

> POST 和 PUT 请求的根本区别体现在 Request-URI 的不同含义上。POST 请求中的 URI 标识将处理封闭实体的资源。该资源可能是一个数据接受进程，一个通往其他协议的网关，或者一个接受注释的单独实体。相比之下，PUT 请求中的 URI 标识了请求中包含的实体——用户代理知道 URI 的意图，服务器不得尝试将请求应用于其他资源。

但是，我确实根据名称本身知道您来自哪里。

我通常看 POST 因为它应该是处理我的请求内容的 URI（在大多数情况下，params 作为表单值）并因此创建一个新资源，而 PUT 作为我的请求主题的 URI（/ users/1234)，一个已经存在的资源。

我相信命名法可以追溯到很长一段时间，考虑早期的网络。有人可能希望将`POST`他们的消息发送到留言板，然后`PUT`在以后将其他内容添加到他们的消息中。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-04-22T16:21:36.840

HTTP 方法和 CRUD 之间没有严格的对应关系。这是一些框架采用的约定，但与 REST 约束无关。

请求要求服务器用封闭的`PUT`表示替换给定 URI 中的任何内容，完全忽略当前内容。一个很好的类比是`mv`shell 中的命令。如果它不存在，它会在目的地创建新文件，或者替换任何存在的文件。无论哪种情况，它都会完全忽略其中的任何内容。只要您发送完整的表示，您就可以使用它来创建，也可以更新某些内容。

`POST`要求目标资源根据预定义的规则处理有效负载，因此它是用于尚未被 HTTP 协议标准化的任何操作的方法。这意味着 a`POST`可以做任何你想做的事情，只要你不复制其他方法的功能——例如，`POST`在你应该使用的时候用于检索`GET`——并且你正确地记录它。

因此，您可以根据具体情况同时使用创建和更新，但是`PUT`您必须对 API 中的所有内容具有一致的语义，并且您不能进行部分更新，并且`POST`您可以做任何您想做的事情，只要你记录它是如何工作的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-04T17:08:01.867

当且仅当客户端知道新资源的可能 URI 时，才应使用 PUT 进行创建。新的 URI 可能由服务以资源表示形式通告。例如，服务可能会提供某种提交表单并在其上指定操作 URI，该操作 URI 可以是新资源的预填充 URI。在这种情况下是的，如果初始 PUT 请求成功创建 PUT 请求后的资源，则只会替换它。

可以使用 POST 进行更新，从未说过 POST 仅用于“创建”操作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-04-16T01:41:49.740

您正在尝试将 CRUD 与 HTTP 相关联，但这是行不通的。HTTP 的哲学是不同的，并且本身**并不**对应于 CRUD。由于 REST 引起了混乱；这**确实**对应于CRUD。REST 使用 HTTP，但对允许的内容有额外的限制。我准备了这个问答来解释 HTTP 的处理方法：

要求什么？

*   A`POST`请求**对集合执行操作**。
*   A`PUT`请求将**资源放置**到集合中。

URI 中命名了什么样的对象？

*   a 的 URI`POST`标识一个**集合**。
*   a 的 URI`PUT` 标识**资源**（在集合中）。

URI 中的对象是如何分别指定`POST`的`PUT`？

```
/collectionId
/collectionId/resourceId 
```

HTTP 协议赋予集合多少自由度？

*   使用 a `POST`，**集合**处于控制之中。
*   使用 a `PUT`，**请求者**处于控制之中（除非请求失败）。

HTTP 协议有什么保证？

*   对于 a `POST`，HTTP 协议没有定义集合应该发生什么；rfc 声明服务器应该“*根据 [collection's] 自己的特定语义处理……请求。* ”（仅供参考：rfc 使用令人困惑的短语“target resource”来表示“collection”。）这取决于服务器来决定定义 a将做什么的**合同。**`POST`
*   对于 a `PUT`，HTTP 协议要求“成功”响应**必须保证**集合现在包含具有请求指定的 ID 和内容的资源。

该操作能否导致在集合中创建新资源？

*   **是**或否，取决于合同。如果合约是 REST 协议，则需要插入。当 a`POST`创建新资源时，响应将为 201。
*   **是**的，但这意味着请求者正在指定新 ID。这对公告板很好，但对数据库有问题。（因此，对于数据库应用程序，`PUT`一般不会插入，而只会更新。）当 a`PUT` 创建新资源时，响应将是 201。

操作是幂等的吗？

*   A`POST`通常**不是**幂等的。（服务器可以提供它希望的任何合约，但幂等性通常不是该合约的一部分）。
*   A**必须**`PUT`是幂等的。（已识别资源的状态是幂等的。允许该资源之外的副作用。）

 **这是 rfc： [https ://www.rfc-editor.org/rfc/rfc7231#section-4.3.3](https://www.rfc-editor.org/rfc/rfc7231#section-4.3.3)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T17:18:35.607

这取决于..您可以同时创建/更新站点/记录。当客户端指定 URI 时，PUT 就是要走的路。例如，像 Dreamweaver 这样的任何代码编辑器，PUT 都是正确的协议。

也看看这个线程：[put vs post in rest](https://stackoverflow.com/questions/630453/put-vs-post-in-rest "put vs post in rest")**

# python - python中的终端屏幕坐标

> ID：10885162
> 
> 赞同：-2
> 
> 时间：2012-06-04T17:03:22.517
> 
> 标签：python, screen, rewrite

我是使用curses lib的新手。我想制作一个 python 程序（在 DOS 终端中运行），它可以将光标返回到当前行的开头，从而允许后续输出覆盖之前在那里写入的内容。我试图从 python 调用一个 shellscript 来做到这一点，但我相信它可能存在更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:20:53.880

如果您只想重写当前行，只需打印一个返回字符“\r”。例如，这将打印“ABCdef”：

```
# print 'abcdef' then backup to start of line, then print 'ABC'
# (then print the normal cr/lf that 'print' always does)
print "abcdef\rABC" 
```

（知道您可以通过用尾随逗号结束打印来抑制 cr/lf 也很有帮助...）。

# mysql - MySQL COUNT on WHERE 语句

> ID：10885164
> 
> 赞同：0
> 
> 时间：2012-06-04T17:03:23.907
> 
> 标签：mysql, count

请帮助我了解为什么 WHERE 语句上的 COUNT 条件会出错，我该如何解决？

```
 SELECT jq.taskqueueid,jq.jobid
           FROM (SELECT p.taskID `curentTaskID`,
                    p.taskName `currentTaskName`,
                    p.processingType `currentProcessingType`,
                    p1.taskID `prevTaskID`,
                    p1.taskName `prevTaskName`,
                    p1.processingType `prevProcessingType`
                  FROM projecttask p
                  LEFT JOIN projecttask p1
                    ON p.sequenceNo=p1.nextTaskSequence
                   AND p.projectID=p1.projectID
                 WHERE p.taskID=18) task
           INNER JOIN taskslogs tl
              ON tl.taskID=task.`prevTaskID`
             AND tl.statusDefinitionID=1
           INNER JOIN jobqueue jq
              ON tl.taskqueueid=jq.taskqueueid
           WHERE COUNT(jq.taskqueueid)=COUNT(tl.taskqueueid) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:12:27.043

要使用像 COUNT() 这样的[聚合函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)，您需要对数据进行分组，如果要将其用作条件，则不能为此使用 WHERE，因为在聚合之前会考虑 WHERE 条件。将 GROUP BY 与 HAVING 一起使用。（另见[http://dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)）

# mysql - 是否可以将 NEW 和 OLD 表从触发器传递到 MySQL 中的过程？

> ID：10885165
> 
> 赞同：7
> 
> 时间：2012-06-04T17:03:24.437
> 
> 标签：mysql, triggers

是否可以将 NEW 和 OLD 表从触发器传递到 MySQL 中的过程？我怀疑不是，因为没有像表这样的数据类型可以被过程接受。任何可能的解决方法？

理想情况下，它看起来像这样：

```
CREATE TRIGGER Product_log AFTER UPDATE ON Product
  FOR EACH ROW BEGIN
    call logChanges(OLD, NEW);
  END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:12:54.877

您可以显式传递每个字段：

```
CALL logChanges(OLD.colA, OLD.colB, NEW.colA, NEW.colB); 
```

或者，如果`logChanges`必须足够通用以使其可以处理来自不同表的此类调用，则可以使用合适的分隔符（例如，[单位分隔符](http://www.fileformat.info/info/unicode/char/1f/index.htm)）将字段值连接成单个字符串：

```
CALL logChanges(CONCAT_WS(CHAR(31), OLD.colA, old.colB),
                CONCAT_WS(CHAR(31), NEW.colA, NEW.colB)); 
```

或者，如果必须保留数据类型，可以将记录插入到从中`logChanges`读取的临时文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:08:44.503

这是不可能的，因为没有 NEW 或 OLD*表*。整个触发器与*表*相关——“新”和“旧”指的是在触发事件*之前*和*之后它们包含的行和值。*换句话说，您的示例将是：

```
call logChanges(OLD.customername, NEW.customername) 
```

您还可以将所有旧数据保存在历史表中（我希望 logchanges 无论如何都会这样做），基本上是生产表的克隆，如下所示：

```
BEGIN
    IF OLD.customer_name != NEW.customer_name
    THEN
            INSERT INTO myTable_chagne_history
                (
                    customer_id    ,
                    customer_name  ,
                    another_field  ,
                    edit_time
                )
                VALUES
                (
                    OLD.customer_id,
                    OLD.customer_name,
                    OLD.another_field  ,
                    NEW.time_edit_was_made
                );
    END IF;
END; 
```

# ruby-on-rails - ruby on rails 实现自动完成搜索

> ID：10885173
> 
> 赞同：3
> 
> 时间：2012-06-04T17:04:17.210
> 
> 标签：ruby-on-rails, jquery-ui, autocomplete

我已经实现了一个搜索框，可以在我的数据库中搜索“疾病”表和“症状”表。现在我想在搜索框中添加自动完成功能。

我创建了一个名为“auto_complete_controller”的新控制器，它返回自动完成数据。我只是不确定如何结合搜索功能和自动完成功能：我希望搜索控制器中的“索引”操作返回搜索结果，而我的 auto_complete 控制器中的“索引”操作返回 auto_complete 数据.

请指导我如何修复我的 html 语法以及在 js.coffee 文件中写入的内容。我正在使用带有 jquery UI 的 rails 3.x 来自动完成，我更喜欢服务器端解决方案，这是我当前的代码：

main_page/index.html.erb：

```
<p>
    <b>Syptoms / Illnesses</b>
    <%= form_tag search_path, :method => 'get' do %>
      <p>
        <%= text_field_tag :search, params[:search] %> <br/>

        <%= submit_tag "Search", :name => nil %>
      </p>
  <% end %>
</p> 
```

auto_complete_controller.rb：

```
class AutoCompleteController < ApplicationController

    def index
    @results = Illness.order(:name).where("name like ?", "%#{params[:term]}%") + Symptom.order(:name).where("name like ?", "%#{params[:term]}%")

    render json: @results.map(&:name)
  end
end 
```

search_controller.rb：

```
class SearchController < ApplicationController

def index
    @results = Illness.search(params[:search]) + Symptom.search(params[:search])

    respond_to do |format|
        format.html # index.html.erb
        format.json { render json: @results }
    end
 end
end 
```

谢谢，李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:37:56.953

我遇到了同样的问题，不得不为它创建这个 gem：[https ://github.com/rayasocialmedia/rails_autocomplete](https://github.com/rayasocialmedia/rails_autocomplete)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:40:49.273

这是在 Twitter-Bootstrap 中进行动态预输入的方法；我敢肯定它与 jQuery 类似：

[https://gist.github.com/1848558](https://gist.github.com/1848558)

本质上，通过收听非导航击键，它会触发对控制器的 AJAX 部分文本搜索。然后，此返回数据填充要显示的 JS 框架的预输入/自动完成数据。这意味着您实际上只需要一个 SearchController。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T21:12:54.927

尝试[rails3-jquery-autocomplete](https://github.com/crowdint/rails3-jquery-autocomplete)。我正在使用它，并且有与您相同的要求，并且它们可以很好地协同工作。如果您需要进一步的帮助，请告诉我。

# linux - 在 Debian 系统上安装 Debian 软件包时如何读取输入

> ID：10885177
> 
> 赞同：7
> 
> 时间：2012-06-04T17:04:27.603
> 
> 标签：linux, ubuntu, package, debian, debconf

我创建了一个小型 Debian 软件包，它必须从用户那里获取输入并将其打印出来。

为了从 postinst 脚本上的用户“读取”命令中获取输入，我不知道确切的原因是什么，但它在 Ubuntu 系统上不起作用。

后来我发现我们必须通过使用模板文件来为 Debian 系统使用“debconf”。

模板文件：

```
Template: test/input
Type: text
Description: enter some text, which will be displayed 
```

postinst 脚本：

```
 db_get test/input
    echo "you have entered ::$RET" >&2 
```

但是当我安装我的测试包时，我得到了这个错误：

> `Can't exec "postinst": No such file or directory at /usr/share/perl/5.10/IPC/Open3.pm line 168\. <br>open2: exec of postinst configure failed at /usr/share/perl5/Debconf/ConfModule.pm line 59`

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-06T13:44:11.293

您的*postinst*脚本应如下所示：

```
#!/bin/bash

set -e

. /usr/share/debconf/confmodule

case "$1" in
  configure)
    db_get test/input
    echo "you have entered ::$RET" >&2
  ;;
esac
db_stop 
```

# android - 仅在 API 级别导入 > 15

> ID：10885179
> 
> 赞同：2
> 
> 时间：2012-06-04T17:04:41.117
> 
> 标签：android

我在 API 8 上创建了一个应用程序。现在我想让它与 ICS 一起使用，为此我需要 API 8 中不可用的额外导入。我想添加以下导入：

```
import android.provider.CalendarContract;
import android.provider.CalendarContract.Calendars;
import android.provider.CalendarContract.Events; 
```

那么我是否必须为 API > 15 制作一个不同的应用程序？应用程序的名称不应更改。

或者也许可以将 2 个 App 版本并根据 API 级别将 minSdkVersion 和 maxSdkVersion 放入 Google Play？

你怎么处理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T17:12:52.097

> 我有一个在 API 8 上创建的应用程序。

伟大的！

> 现在我想让它与 ICS 一起工作，为此我需要 API 8 中不可用的额外导入。

没问题！由于`import`语句是在编译时应用的，只要您将项目的构建目标（例如，项目 > 属性 > Android）设置为 API 级别 14 或更高，您的代码就可以正常编译。

> 那么我是否必须为 API > 15 制作一个不同的应用程序？

不。只需使用版本保护块来确保您不会尝试在旧设备上使用新代码：

```
if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
  // do stuff with CalendarContract
} 
```

> 或者也许可以将 2 个 App 版本并根据 API 级别将 minSdkVersion 和 maxSdkVersion 放入 Google Play？

那不应该是必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:10:57.273

您想向现有应用程序添加兼容性填充程序，以便它在较低的 API 级别上工作，并且仍然能够从较高级别访问 API。

通常，这样做的方法是隔离在运行时通过反射加载的类中使用更高级别 API 的代码，前提是 API 级别支持它们。

# mysql - SQL 获取与所有键相关的所有结果

> ID：10885182
> 
> 赞同：0
> 
> 时间：2012-06-04T17:04:48.717
> 
> 标签：mysql, sql, sql-match-all

我有一张将单词相互关联的表格。

```
table_word_relationships
+-------------+-------------+
|   WORD_A    |  WORD_B     |
+-------------+-------------+
|   cat       |   dog       |
+-------------+-------------+
|   cat       |   rabbit    |
+-------------+-------------+
|   owl       |   cat       |
+-------------+-------------+
|   bird      |   dog       |
+-------------+-------------+
|   dog       |   banana    |
+-------------+-------------+
|   banana    |   cat       |
+-------------+-------------+ 
```

我需要对其运行两种类型的查询。一个很容易。给我所有与“狗”有关的词

```
"SELECT * FROM table_word_relationships WHERE WORD_A = 'dog' OR WORD_B = 'dog'"; 
```

结果将是：

```
cat
bird
banana 
```

第二个是我遇到问题的那个......我需要查询与单词数组中的所有单词有关系的所有单词......

所以，在英语中，我会说“给我所有与“狗”这个词有关系的词，并且还与“猫”这个词有关系结果将是：

```
banana 
```

因为香蕉是唯一与这两个关键字相关的词。什么是合适的 SQL 语句类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:31:35.867

查询 1 应该是：

```
SELECT word_b AS word
FROM table_word_relationships 
WHERE word_a = 'dog' 

UNION DISTINCT

SELECT word_a 
FROM table_word_relationships 
WHERE word_b = 'dog' ; 
```

查询 2 变得相当复杂，因为您只将每个连接存储在一行中。一种可能的方式：

```
SELECT
    dog.word
FROM
  ( SELECT word_b AS word
    FROM table_word_relationships 
    WHERE word_a = 'dog' 

    UNION DISTINCT

    SELECT word_a 
    FROM table_word_relationships 
    WHERE word_b = 'dog' 
  ) AS dog

  JOIN

  ( SELECT word_b AS word
    FROM table_word_relationships 
    WHERE word_a = 'cat' 

    UNION DISTINCT

    SELECT word_a 
    FROM table_word_relationships 
    WHERE word_b = 'cat' 
  ) AS cat

  ON cat.word = dog.word ; 
```

* * *

如果您将所有连接存储在两行中，那么您的两个查询都会简单得多，两者都是`(cat, dog)`和`(dog, cat)`。

然后查询1：

```
SELECT word_b AS word
FROM table_word_relationships 
WHERE word_a = 'dog' ; 
```

查询 2：

```
SELECT
    dog.word_b AS word
FROM 
    table_word_relationships AS dog
  JOIN 
    table_word_relationships AS cat
      ON cat.word_b = dog.word_b 
WHERE 
      dog.word_a = 'dog' 
  AND 
      cat.word_a = 'cat' ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:12:23.683

可以使用`INTERSECT`SQL 中的命令来查找多个查询的交集；即，返回他们所有人的共同点。

例如：

```
select field1 from table1 where id = 5
intersect
select field1 from table2 where id < 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:38:43.257

正如您在评论中解释的那样，您有 2 张桌子。我假设第一个表是`words`用两列调用的：`id`和`word`. 关系表包含单词表的 id 和 id2 外键。

然后你可以尝试这样的事情：

```
select distinct word from words w
where 
(exists 
(select * from table_word_relationships r 
inner join word w2 on w2.id = r.id2 
inner join word w3 on w3.id = r.id 
where (w.id = r.id1 and w2.word = "CAT") or (w.id = r.id2 and w3.word = "CAT"))
and
(exists 
(select * from table_word_relationships r 
inner join word w2 on w2.id = r.id2 
inner join word w3 on w3.id = r.id 
where (w.id = r.id1 and w2.word = "DOG") or (w.id = r.id2 and w3.word = "DOG")) 
```

（未测试）

# c++ - CSparse：获取稀疏矩阵的元素

> ID：10885186
> 
> 赞同：1
> 
> 时间：2012-06-04T17:04:55.737
> 
> 标签：c++, sparse-matrix

是否可以在 CSparse cs 对象中请求元素 (i,j) 并获取其值或如果未填充则为零？我应该自己编写这个函数还是在 CSparse 中有解决方案？

缺乏文件让我很伤心。

以下是代码的参考：

Timothy Davis，稀疏线性系统的直接方法，SIAM，费城，2006 年。 [这是来源](http://www.cise.ufl.edu/research/sparse/CSparse/CSparse/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:03:03.633

你是对的。文档很差。让我们看看我们是否不能自己生成一些粗略的文档。

将目录复制`http://www.cise.ufl.edu/research/sparse/CSparse/CSparse/Source/`到自己的PC，进入目录，发出命令`sed '/^[^[:space:]#{}]/!d;/^\//!a\\' *.c`产生

```
/* C = alpha*A + beta*B */
cs *cs_add (const cs *A, const cs *B, double alpha, double beta)

/* clear w */
static csi cs_wclear (csi mark, csi lemax, csi *w, csi n)

/* keep off-diagonal entries; drop diagonal entries */
static csi cs_diag (csi i, csi j, double aij, void *other) { return (i != j) ; }

/* p = amd(A+A') if symmetric is true, or amd(A'A) otherwise */
csi *cs_amd (csi order, const cs *A)  /* order 0:natural, 1:Chol, 2:LU, 3:QR */

/* L = chol (A, [pinv parent cp]), pinv is optional */
csn *cs_chol (const cs *A, const css *S)

/* x=A\b where A is symmetric positive definite; b overwritten with solution */
csi cs_cholsol (csi order, const cs *A, double *b)

/* C = compressed-column form of a triplet matrix T */
cs *cs_compress (const cs *T)

/* column counts of LL'=A or LL'=A'A, given parent & post ordering */
static void init_ata (cs *AT, const csi *post, csi *w, csi **head, csi **next)

csi *cs_counts (const cs *A, const csi *parent, const csi *post, csi ata)

/* p [0..n] = cumulative sum of c [0..n-1], and then copy p [0..n-1] into c */
double cs_cumsum (csi *p, csi *c, csi n)

/* depth-first-search of the graph of a matrix, starting at node j */
csi cs_dfs (csi j, cs *G, csi top, csi *xi, csi *pstack, const csi *pinv)

/* breadth-first search for coarse decomposition (C0,C1,R1 or R0,R3,C3) */
static csi cs_bfs (const cs *A, csi n, csi *wi, csi *wj, csi *queue,

/* collect matched rows and columns into p and q */
static void cs_matched (csi n, const csi *wj, const csi *imatch, csi *p, csi *q,

/* collect unmatched rows into the permutation vector p */
static void cs_unmatched (csi m, const csi *wi, csi *p, csi *rr, csi set)

/* return 1 if row i is in R2 */
static csi cs_rprune (csi i, csi j, double aij, void *other)

/* Given A, compute coarse and then fine dmperm */
csd *cs_dmperm (const cs *A, csi seed)

static csi cs_tol (csi i, csi j, double aij, void *tol)

csi cs_droptol (cs *A, double tol)

static csi cs_nonzero (csi i, csi j, double aij, void *other)

csi cs_dropzeros (cs *A)

/* remove duplicate entries from A */
csi cs_dupl (cs *A)

/* add an entry to a triplet matrix; return 1 if ok, 0 otherwise */
csi cs_entry (cs *T, csi i, csi j, double x)

/* find nonzero pattern of Cholesky L(k,1:k-1) using etree and triu(A(:,k)) */
csi cs_ereach (const cs *A, csi k, const csi *parent, csi *s, csi *w)

/* compute the etree of A (using triu(A), or A'A without forming A'A */
csi *cs_etree (const cs *A, csi ata)

/* drop entries for which fkeep(A(i,j)) is false; return nz if OK, else -1 */
csi cs_fkeep (cs *A, csi (*fkeep) (csi, csi, double, void *), void *other)

/* y = A*x+y */
csi cs_gaxpy (const cs *A, const double *x, double *y)

/* apply the ith Householder vector to x */
csi cs_happly (const cs *V, csi i, double beta, double *x)

/* create a Householder reflection [v,beta,s]=house(x), overwrite x with v,
double cs_house (double *x, double *beta, csi n)

/* x(p) = b, for dense vectors x and b; p=NULL denotes identity */
csi cs_ipvec (const csi *p, const double *b, double *x, csi n)

/* consider A(i,j), node j in ith row subtree and return lca(jprev,j) */
csi cs_leaf (csi i, csi j, const csi *first, csi *maxfirst, csi *prevleaf,

/* load a triplet matrix from a file */
cs *cs_load (FILE *f)

/* solve Lx=b where x and b are dense.  x=b on input, solution on output. */
csi cs_lsolve (const cs *L, double *x)

/* solve L'x=b where x and b are dense.  x=b on input, solution on output. */
csi cs_ltsolve (const cs *L, double *x)

/* [L,U,pinv]=lu(A, [q lnz unz]). lnz and unz can be guess */
csn *cs_lu (const cs *A, const css *S, double tol)

/* x=A\b where A is unsymmetric; b overwritten with solution */
csi cs_lusol (csi order, const cs *A, double *b, double tol)

/* wrapper for malloc */
void *cs_malloc (csi n, size_t size)

/* wrapper for calloc */
void *cs_calloc (csi n, size_t size)

/* wrapper for free */
void *cs_free (void *p)

/* wrapper for realloc */
void *cs_realloc (void *p, csi n, size_t size, csi *ok)

/* find an augmenting path starting at column k and extend the match if found */
static void cs_augment (csi k, const cs *A, csi *jmatch, csi *cheap, csi *w,

/* find a maximum transveral */
csi *cs_maxtrans (const cs *A, csi seed)  /*[jmatch [0..m-1]; imatch [0..n-1]]*/

/* C = A*B */
cs *cs_multiply (const cs *A, const cs *B)

/* 1-norm of a sparse matrix = max (sum (abs (A))), largest column sum */
double cs_norm (const cs *A)

/* C = A(p,q) where p and q are permutations of 0..m-1 and 0..n-1\. */
cs *cs_permute (const cs *A, const csi *pinv, const csi *q, csi values)

/* pinv = p', or p = pinv' */
csi *cs_pinv (csi const *p, csi n)

/* post order a forest */
csi *cs_post (const csi *parent, csi n)

/* print a sparse matrix; use %g for integers to avoid differences with csi */
csi cs_print (const cs *A, csi brief)

/* x = b(p), for dense vectors x and b; p=NULL denotes identity */
csi cs_pvec (const csi *p, const double *b, double *x, csi n)

/* sparse QR factorization [V,beta,pinv,R] = qr (A) */
csn *cs_qr (const cs *A, const css *S)

/* x=A\b where A can be rectangular; b overwritten with solution */
csi cs_qrsol (csi order, const cs *A, double *b)

/* return a random permutation vector, the identity perm, or p = n-1:-1:0.
csi *cs_randperm (csi n, csi seed)

/* xi [top...n-1] = nodes reachable from graph of G*P' via nodes in B(:,k).
csi cs_reach (cs *G, const cs *B, csi k, csi *xi, const csi *pinv)

/* x = x + beta * A(:,j), where x is a dense vector and A(:,j) is sparse */
csi cs_scatter (const cs *A, csi j, double beta, csi *w, double *x, csi mark,

/* find the strongly connected components of a square matrix */
csd *cs_scc (cs *A)     /* matrix A temporarily modified, then restored */

/* ordering and symbolic analysis for a Cholesky factorization */
css *cs_schol (csi order, const cs *A)

/* solve Gx=b(:,k), where G is either upper (lo=0) or lower (lo=1) triangular */
csi cs_spsolve (cs *G, const cs *B, csi k, csi *xi, double *x, const csi *pinv,

/* compute nnz(V) = S->lnz, S->pinv, S->leftmost, S->m2 from A and S->parent */
static csi cs_vcount (const cs *A, css *S)

/* symbolic ordering and analysis for QR or LU */
css *cs_sqr (csi order, const cs *A, csi qr)

/* C = A(p,p) where A and C are symmetric the upper part stored; pinv not p */
cs *cs_symperm (const cs *A, const csi *pinv, csi values)

/* depth-first search and postorder of a tree rooted at node j */
csi cs_tdfs (csi j, csi k, csi *head, const csi *next, csi *post, csi *stack)

/* C = A' */
cs *cs_transpose (const cs *A, csi values)

/* sparse Cholesky update/downdate, L*L' + sigma*w*w' (sigma = +1 or -1) */
csi cs_updown (cs *L, csi sigma, const cs *C, const csi *parent)

/* solve Ux=b where x and b are dense.  x=b on input, solution on output. */
csi cs_usolve (const cs *U, double *x)

/* allocate a sparse matrix (triplet form or compressed-column form) */
cs *cs_spalloc (csi m, csi n, csi nzmax, csi values, csi triplet)

/* change the max # of entries sparse matrix */
csi cs_sprealloc (cs *A, csi nzmax)

/* free a sparse matrix */
cs *cs_spfree (cs *A)

/* free a numeric factorization */
csn *cs_nfree (csn *N)

/* free a symbolic factorization */
css *cs_sfree (css *S)

/* allocate a cs_dmperm or cs_scc result */
csd *cs_dalloc (csi m, csi n)

/* free a cs_dmperm or cs_scc result */
csd *cs_dfree (csd *D)

/* free workspace and return a sparse matrix result */
cs *cs_done (cs *C, void *w, void *x, csi ok)

/* free workspace and return csi array result */
csi *cs_idone (csi *p, cs *C, void *w, csi ok)

/* free workspace and return a numeric factorization (Cholesky, LU, or QR) */
csn *cs_ndone (csn *N, cs *C, void *w, void *x, csi ok)

/* free workspace and return a csd result */
csd *cs_ddone (csd *D, cs *C, void *w, csi ok)

/* solve U'x=b where x and b are dense.  x=b on input, solution on output. */
csi cs_utsolve (const cs *U, double *x) 
```

你注意到那里有什么看起来好像它会做你想做的事吗？我不。基于上述情况，该函数`cs_print()`似乎比其他大多数函数更有可能成为候选者。但是，当我查看`cs_print()`源代码时，我似乎看不到您想要什么。相反，我看到了一个似乎只处理非零元素的例程。

# mingw32 - 如何在mingw上构建cogl和clutter？

> ID：10885189
> 
> 赞同：0
> 
> 时间：2012-06-04T17:05:29.620
> 
> 标签：mingw32, clutter, cogl

我打算在 mingw 环境中构建混乱，但是当我尝试构建 Cogl 时，有一些编译错误，未知类型：GLchar、GLintptr、GLsizeiptr。

我使用的源代码版本是：clutter(1.8.4), cogl(1.10.2)，谁能给我一些建议？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:49:10.037

Clutter wiki 有一组使用 mingw 构建 Clutter 的说明：

[http://wiki.clutter-project.org/wiki/BuildingClutterOnWindows](http://wiki.clutter-project.org/wiki/BuildingClutterOnWindows)

此外，如果您使用的是 Cogl 1.10，您也应该使用 Clutter 1.10。

# jquery - JQuery - 抓取对应的blur-Action事件

> ID：10885190
> 
> 赞同：0
> 
> 时间：2012-06-04T17:05:30.163
> 
> 标签：jquery, validation, events, blur

嗨，我有一个表单，在一个输入字段上我设置了一个模糊事件。用户离开输入字段，我验证它，然后我决定它是否可以。如果该字段的值不正确，我会提醒一个信息框。无论如何，如果用户点击链接离开页面，我无法阻止他。如果用户单击链接，我必须阻止默认行为。如何识别用户离开输入字段的事件？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:07:55.917

看看这个 [http://api.jquery.com/unload/](http://api.jquery.com/unload/)

正如他们在文档中所说

> 当用户离开页面时，unload 事件被发送到窗口元素。这可能意味着许多事情之一。用户可以单击链接离开页面，或者在地址栏中输入新的 URL。前进和后退按钮将触发事件。关闭浏览器窗口将导致事件被触发。即使是页面重新加载也会首先创建一个卸载事件。

您可以使用此事件来防止用户离开页面。

像这样

```
$(window).unload(function() {
  alert('You have unsaved form values.');
}); 
```

# javascript - javascript push() 失败

> ID：10885192
> 
> 赞同：1
> 
> 时间：2012-06-04T17:05:39.363
> 
> 标签：javascript, arrays, array-push

我正在尝试将卡片添加到 Deck 对象中的数组中，但由于某种原因 push() 失败。我早些时候有这个工作，但在做了一些改变之后，我实际上把它搞砸了。（“testX”写入用于调试目的）

```
<!DOCTYPE HTML>
<html>
<head>
<style> 
  #myCanvas {
    border: 1px solid #9C9898;
  }
  body {
    margin: 0px;
    padding: 0px;
  }
</style>
<script type="text/javascript">
<!--
//draws the game
window.onload = function() { 
    var canvas = document.getElementById("myCanvas"); 
    var context = canvas.getContext("2d"); 

    //draws the rectangles that will be the card        
    var cardHeight = 125,
        cardWidth = 80;

    context.beginPath();  

    //draws the top row of 5 cards  
    for(var x=0;x<5;x++){
        context.rect(10+(x*(cardWidth+10)),10,cardWidth,cardHeight);
    }

    //draws the bottom row of 5 cards
    for(x=0;x<5;x++){
        context.rect(10+(x*(cardWidth+10)),150,cardWidth,cardHeight);
    }

    //draws the deck
    context.rect(10+5*cardWidth+65,(150-10)/2,cardWidth,cardHeight);

    context.fillStyle = 'white';
    context.fill();
    context.lineWidth = 2;
    context.strokeStyle = 'black';
    context.stroke();   
};

function Deck(){
    //creates the unshuffled deck (loadedDeck) once to make the shuffling process faster
    var loadedDeck = new Array(),
        realDeck;

    this.loadTheDeck = function(){ //method 

        for(x=1;x<=13;x++){ 
            this.loadedDeck.push(x+" Spades"); //<---issue line (all 4 are failing though this is the first)
            this.loadedDeck.push(x+" Clubs");
            this.loadedDeck.push(x+" Hearts");
            this.loadedDeck.push(x+" Diamonds");
        }
        document.write(this.loadedDeck);
    };
    this.loadTheDeck(); //creates the unshuffled deck when the Deck is instantiated

    //resets the deck and randomizes
    this.shuffle = function(){ //method 

        //creates the real deck
        this.realDeck = this.loadedDeck;

        //write shuffle function
    };
    this.shuffle(); //shuffles the Deck when instantiated
}

document.write("test-1");
var myDeck = new Deck();
document.write("test0");
document.write(this.realDeck);
document.write("test1");    
-->
</script>
 </head>
 <body>
<canvas id="myCanvas" height="300" width="600"></canvas>

 </body>
 </html> 
```

这是代码的演示：http: [//jsfiddle.net/NfmsR/2/](http://jsfiddle.net/NfmsR/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:11:04.030

当您运行此行时：

```
this.loadedDeck.push(x+" Spades"); 
```

您正在使用`this.loadedDeck`数组。您是否将其定义为`Deck`对象的一部分？没有：

```
var loadedDeck = new Array(),
    realDeck; 
```

将声明更改为此，它应该可以工作：

```
this.loadedDeck = []; // I'd use [] instead of new Array().
this.realDeck = []; 
```

正如@j08691 指出的那样，您也需要更改`realDeck`为`this.realDeck`，因为您在此处以类似方式调用它：

```
this.shuffle = function(){ //method 

    //creates the real deck
    this.realDeck = this.loadedDeck;

    //write shuffle function
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T17:08:44.267

您指的是“loadedDeck”，就好像它是“Deck”对象的属性一样。它不是; 它只是构造函数闭包的局部变量。

只需将其称为“loadedDeck”，看看是否有帮助。“realDeck”也是如此。

```
this.loadTheDeck = function(){ //method
    for(var x=1;x<=13;x++){ 
        loadedDeck.push(x+" Spades"); //<---issue line (all 4 are failing though this is the first)
        loadedDeck.push(x+" Clubs");
        loadedDeck.push(x+" Hearts");
        loadedDeck.push(x+" Diamonds");
    } 
```

摆脱滥用`document.write`调试的习惯也是一个好主意。也不要忘记用`var`!!声明“x”之类的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:11:23.557

使用 访问的`Deck`对象`this`没有“ `loadedDeck`”-属性。`loadedDeck`是一个局部变量。只需删除“ `this.`”。

# php - 为什么语句 exec("php -l $file", $error, $exit) set $exit = 5 而没有错误？

> ID：10885208
> 
> 赞同：-1
> 
> 时间：2012-06-04T17:06:48.383
> 
> 标签：php, web

该文件存在。我只是用这个语句验证文件的语法。

```
exec("php -l $file", $error, $exit); 
```

如果没有错误，它应该设置 $exit = 0 。换句话说，文件中的语法是正确的。但是在我的情况下，它将 $exit 设置为 5 并将 $error 设置为空数组。我想知道这是怎么回事。提前致谢。

另外，我正在使用 MAMP。PHP5.3。$file 是文件内容的哈希字符串。$code 是 file_get_contents() 函数获取的文件内容的字符串。我认为 $translatedFile 和 $error 在我的问题中并不重要。

```
function validateSyntax($code,$translatedFile,  &$error){
        $translatedFile = $this->getTranslatedLanguageFile($translatedFile);
        $file = 'cache/'.md5(time());
        file_put_contents( $file, $code);
        exec("php -l $file",$error,$exit);
        foreach($error as $k=>$v){
            $error[$k] = str_replace($file, $translatedFile, $v);
        }
        unlink($file);
        if($retcode==0)return true;
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:08:33.223

您正在引用所有参数，而不仅仅是在命令周围使用引号并传递最后两个参数。您最有可能在寻找

```
exec("php -l $file", $error, $exit); 
```

# c# - 与 WindowsFormsHost 绑定

> ID：10885211
> 
> 赞同：4
> 
> 时间：2012-06-04T17:07:05.697
> 
> 标签：c#, wpf, windowsformshost

我正在尝试将项目列表绑定到 TabControl。这些项目看起来像：

```
class SciEditor
{
    private Scintilla editor = null;
    public System.Windows.Forms.Control Editor
    {
        get { return editor; }
    }

    private string path = null;
    public string ShortName
    {
        get
        {
            return null == path ? "New Script" : Path.GetFileNameWithoutExtension(path);
        }
    }
    .... 
```

在我的主窗口中，列表称为“allScripts”。这是 XAML：

```
<TabControl Grid.Row="0" Grid.Column="0" Name="tabControl1">
            <TabControl.ItemTemplate>
                <DataTemplate>
                    <TextBlock>                            
                        <TextBlock Text="{Binding ShortName}"/>
                    </TextBlock>
                </DataTemplate>
            </TabControl.ItemTemplate>
            <TabControl.ContentTemplate>
                <DataTemplate>
                    <WindowsFormsHost Child="{Binding Editor}" />
                </DataTemplate>
            </TabControl.ContentTemplate>
</TabControl> 
```

问题是我无法在 WindowsFormsHost 中设置“子”，因为

> 不能在“WindowsFormsHost”类型的“子”属性上设置“绑定”。只能在 DependencyObject 的 DependencyProperty 上设置“绑定”。

如何设置 WindowsFormsHost 子项？

编辑：忘了提，在主窗口构造函数中我有：

```
tabControl1.ItemsSource = allScripts; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T17:14:57.470

将您的内容模板更改为

```
<TabControl.ContentTemplate> 
     <DataTemplate> 
          <ContentControl Content="{Binding Editor}" /> 
     </DataTemplate> 
</TabControl.ContentTemplate> 
```

并将`Editor`代码隐藏的属性更改为

```
public WindowsFormsHost Editor   
{   
    get { return new WindowsFormsHost(){Child=editor}; }   
} 
```

# c++ - 如何获取使用标准库创建的线程的winapi id？

> ID：10885215
> 
> 赞同：8
> 
> 时间：2012-06-04T17:07:21.413
> 
> 标签：c++, windows, multithreading, winapi, c++11

C++11 的标准库包含`<thread>`允许创建线程。但是，Windows api 需要一些功能的 ID（即[PostThreadMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644946%28v=vs.85%29.aspx)）。我怎么才能得到它？

备注：`std::thread::get_id()`似乎不起作用：

```
PostThreadMessage(m_thread->get_id(), WM_QUIT, 0, 0);

e:\documents\khook\khooker\hook_runner.cpp(129): error C2664: 'PostThreadMessageW' : cannot convert parameter 1 from 'std::thread::id' to 'DWORD' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T17:10:59.783

使用成员函数[`native_handle()`](http://en.cppreference.com/w/cpp/thread/thread/native_handle)。它提供本机线程句柄。然后你可以调用`GetThreadId()`它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-04T17:10:51.347

该类仅允许在s 和输出`thread::id`之间进行比较。`id`它不提供访问实际底层`id`. 我猜你可以尝试将它输出到 a`stringstream`然后解析回来。

# django - 白标和 Django 应用程序

> ID：10885217
> 
> 赞同：0
> 
> 时间：2012-06-04T17:07:33.703
> 
> 标签：django

我的老板刚刚与我联系，询问是否有可能为我们的基于 Django 的网站为一个新的大客户贴上白标签。基本上，听起来主要是更改网站上的图形/徽标。但是，我敢肯定，在某个时候，他们也会想要开始调整业务逻辑。我仍然不清楚是希望它成为一个子域（例如 customer.mydomain.com）还是一个全新的自定义域。最终，它将*需要*与系统的其余部分共享数据库（出于多种原因）。这是对 Django 中站点框架的一个很好的使用吗？或者有没有更好的方法来做到这一点？

更多信息：Django 1.3.1；PostgreSQL 9.1；托管在 Heroku 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:10:34.370

使用中间件（设置活动站点）和上下文处理器（对其进行操作）的组合。您可以尝试使用 contrib 的站点框架，但我总是很快就超出了它。

# c# - 在 LINQ 中实现“不在”（又称“不存在”）逻辑

> ID：10885218
> 
> 赞同：0
> 
> 时间：2012-06-04T17:07:35.277
> 
> 标签：c#, linq, linq-to-objects

## 设置

1.  我有两个`List<T>`。
2.  数据未归一化并且来自不同来源，这解释了所需逻辑中的卷积
3.  数据中的非正式复合键是 fieldA、fieldB、fieldC。
4.  “字段”是字符串——引用类型——所以它们的值可以为空。我想删除它们可能在 null 上匹配的记录。我得到 C# 中的空引用将匹配，但在 SQL 中它们不匹配。添加一个`!string.IsNullOrEmpty()`很容易。
5.  这不是关于数据库设计或关系代数的问题。
6.  我有其他逻辑涵盖其他标准。不建议减少显示的逻辑，以免扩大结果集。参见上面的#5。

## 问题

我想根据非正式键查找 listA 中不在 listB 中的记录。然后，我想根据部分键匹配进一步细化 listA 结果。

问题的SQL版本：

```
select 
    listA.fieldA, listA.fieldB, matching.fieldC  
 from listA
 left join listB keyList on 
      listA.fieldA = keyList.fieldA and
      listA.fieldB = keyList.fieldB and
      listA.fieldC = keyList.fieldC
 inner join listB matching on
      listA.fieldA = matching.fieldA and
      listA.fieldB = matching.fieldB 
 where
    keyList.fieldA is null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:10:30.367

[SQL to LINQ（案例 7 - 使用 IN 和 NOT IN 子句过滤数据）](http://pranayamr.blogspot.in/2010/12/sql-to-linq-case-7-filter-data-by-using_15.html)

**注意：** IN 和 NOT IN 在 LINQ 查询中使用相同的函数，但它只是使用 ! （不是）它的符号。这是图形表示：

![在此处输入图像描述](../Images/a43a8bf0db0f618a8fb886512ed26dde.png)

你用，`where <list>.Contains( <item> )`

```
var myProducts = from p in db.Products
                 where productList.Contains(p.ProductID)
                 select p; 
```

或者您可以预先定义一个列表，如下所示：

```
var ids = {1, 2, 3};

var query = from item in context.items
            where ids.Contains( item.id )
            select item; 
```

对于“NOT”情况，只需添加“！” “包含”语句之前的运算符。

# jquery - 图片上传插件

> ID：10885220
> 
> 赞同：0
> 
> 时间：2012-06-04T17:07:38.383
> 
> 标签：jquery, jquery-plugins, coldfusion, coldfusion-9, coldfusion-8

我希望能够通过 ajax 上传图像。上传插件后，应向用户显示上传的图像，而无需重新加载页面。用户应该能够裁剪图像，以防他们只想裁剪面部而不是整张照片。该插件必须支持 Coldfusion。

概括

*   用户应该从那里的 PC 浏览图像。

*   图像应显示在 HTML 的缩略图部分，无需重新加载页面。

*   用户应该能够裁剪图像的一部分以显示实际的个人资料图片。

如果有人知道任何这样的插件，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:23:37.933

我认为您将无法找到适合您所有需求的插件。我已经构建了类似的功能，但它的每一点都必须从其他插件或自定义代码中拼凑起来。我的一般工作流程如下：

1.  用户通过页面中的 iframe 上传图像（AJAX 上传很难实现）。

2.  iFrame 通过 iframe 中的 cfm 处理程序使用处理后的图像更新父页面。

3.  使用 jQuery 插件[jCrop](http://code.google.com/p/jcrop/)，我裁剪图像，并在用户完成表单时将生成的图像发送回服务器。

您肯定无法找到为您完成所有这些工作的东西，因此我的建议是一次开始一件，并在您朝着最终解决方案前进的过程中提出问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:44:49.193

是的，您可以使用“jquery.form.js”插件来满足您的所有要求。只需使用此插件将您的表单提交到服务器站点页面（就像您在正常情况下所做的那样）。浏览下面的网址。

[http://malsup.com/jquery/form/#getting-started](http://malsup.com/jquery/form/#getting-started)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-02T10:53:39.713

看看这个插件可能对使用 php 处理后端功能和易于使用有帮助

[http://www.jqueryrain.com/?jKrB7Iva](http://www.jqueryrain.com/?jKrB7Iva)

Picture Cut是一个jquery插件，它以非常友好和简单的方式处理图像，具有基于bootstrap或jquery ui的漂亮界面，具有ajax上传、从资源管理器中拖动图像、图像裁剪等强大的功能。

# css - 跨浏览器缩放定位问题 - div 和 table(?)

> ID：10885221
> 
> 赞同：0
> 
> 时间：2012-06-04T17:07:43.810
> 
> 标签：css, html, positioning

最后我设法让这个小网站在 ff/ie/chrome 中看起来可以接受

- 但是当我放大/缩小 ff/chrome 时，位置会发生变化，即不会发生变化。

我的代码：

```
<div id="parent">
  <b>Favor Emitir Cheques, Depostiso o Tramsferencias <br />
  a Nombre de "xxxxxxx xxxxxxxxxx, C.A." <br />
  en xxxxxxxx xxxx, CTA CTE, No. xxxx-xxxx-xx-xxxxxxxxxx</b>
  <div id="child1">
    BASE IMPONIBLE BS.
    <table border="1" cellspacing="0">
        <tr>
            <td>I.V.A. <input id="iva" type="text" name="iva" size="5" value="{{iva}}"/> % B.s.</td>
        </tr>
    </table>
    IMPORTE TOTAL Bs.
    <table id="child1Table">
      ...Text Display...
    </table>
  </div>
<div id="child2">
  ...
</div> 
```

在 .css 上使用 meyers 重置，除此之外还有以下内容：

```
#parent    {
font-size:80%;
width: 100%;

position:relative;
top:0%;
} 

#child1
{
position:absolute;
left:35%;
top:0%;
}

#child1Table    {
position:absolute;
left:120%;
top:0%;
}

#child2
{
position:absolute;
top:150%;
left:0%;
} 
```

该链接以正常和缩放显示 IE7 FF 和 Chrome 图片（对于奇怪的图片发布感到抱歉）：[https ://docs.google.com/drawings/d/1tKIAkGs4kXbTEUW95mPu7Q5OMe3uEzJSbXetLAbDdJo/edit](https://docs.google.com/drawings/d/1tKIAkGs4kXbTEUW95mPu7Q5OMe3uEzJSbXetLAbDdJo/edit)

关于如何从这个来源管理这个的任何提示？还是应该从不同的方法开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:17:36.470

看起来 FF 和 Chrome 正在缩放元素，但没有根据新的页面大小重新计算位置。

我会使用不同的方法，例如浮动 child1、child1Table 和 child2，并使用边距将它们隔开到需要的位置。

# sql-server - 索引如何工作/与 FK 相关？

> ID：10885224
> 
> 赞同：1
> 
> 时间：2012-06-04T17:07:56.587
> 
> 标签：sql-server, indexing

我知道这是非常基本的，并且考虑到我在数据库方面所处的位置，我现在可能应该理解这一点，但我并不完全理解索引的真正含义。

具体来说，以下是由 ORM 生成的 T-SQL - 它创建一个 FK，然后为其创建一个索引。

有索引有什么作用（在积极意义上），排除它有什么作用（在消极意义上）？

```
-- Creating foreign key on [item_id] in table 'CakeStats'
ALTER TABLE [dbo].[CakeStats]
ADD CONSTRAINT [FK_CakeStat_Item]
    FOREIGN KEY ([item_id])
    REFERENCES [dbo].[Items]
        ([id])
    ON DELETE NO ACTION ON UPDATE NO ACTION;

-- Creating non-clustered index for FOREIGN KEY 'FK_CakeStat_Item'
CREATE INDEX [IX_FK_CakeStat_Item]
ON [dbo].[CakeStats]
    ([item_id]);
GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:27:06.173

索引是一种平衡树，可以更快地搜索特定数据。一般意义上的索引是为了方便查找而标记它。可视化参考书背面的索引。它按字母顺序排序，以便快速找到实际信息的位置，代价是书后的额外页面使其更大/更厚。你索引的东西越多，它就越大。聚集索引和非聚集索引之间也存在差异。我上面给出的示例是一个非聚集索引，因此它是普通书籍内容的补充。聚集索引是按索引键排序的实际内容本身。

在外键情况下，如果您使用外键，则强制执行键的方式是检查引用的表/列以查看它是否存在。在外键上有一个索引大大加快了查找速度（log(n) 时间），而不是需要一次查看每一行（n 时间）。

在您的示例中，索引仅在查询基于 item_id 搜索 CakeStats 时才有帮助。实际上，Items(id) 也有一个索引非常重要，否则每次在 CakeStats 中插入/删除/更新 item_id 时，对外键的检查都会很昂贵。

# asp.net-mvc - 需要一个带有远程 json 数据源的 Javascript 可搜索/可过滤组合框

> ID：10885226
> 
> 赞同：0
> 
> 时间：2012-06-04T17:08:03.677
> 
> 标签：asp.net-mvc, json, combobox, validation

我需要一个具有此功能的组合框（首选开源）：

1.  远程数据源 json 格式
2.  可过滤/可搜索
3.  数据值/显示值
4.  与 ASP.NET MVC 客户端验证集成（无 ExtJs）

我正在搜索和测试很多天，但我没有找到任何东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:15:31.870

请参阅[jQuery UI 自动完成组合框示例](http://jqueryui.com/demos/autocomplete/#combobox)

它使用底层的 html`<select>`元素，所以我认为它应该与您的客户端验证一起使用。

该示例使用预定义的选项列表，但您可以修改它以使用 AJAX 调用。查看他们的其他自动完成示例。

# ajax - Dojo 中的通用加载图标

> ID：10885230
> 
> 赞同：1
> 
> 时间：2012-06-04T17:08:32.763
> 
> 标签：ajax, dojo, web

我正在维护一个应用程序，该应用程序通过以下方式进行多次 Ajax 调用：

```
dojo.xhrPost() and  dojo.xhrGet() 
```

我想为系统上的所有调用添加一个通用加载“图标+消息”.. 使我发现难以维护且难以维护的系统将 loadingFunction 调用添加到所有负载：所有功能`xhr`

所以如果有办法为系统上的所有ajax调用添加一个监听器，我就会徘徊，所以每次调用都会显示加载......

我读到我可以在 1.7 中使用方面来做到这一点，但我正在处理的应用程序是使用 1.6 的 Dojo 版本

因此，如果您知道一种为所有 ajax 调用显示通用消息的方法......

多谢指教。。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T09:57:20.800

[`dojo/topic`](http://livedocs.dojotoolkit.org/dojo/topic)您可以通过IO [Pipeline Topics](http://livedocs.dojotoolkit.org/dojo/ioPipelineTopics)来实现这一点，它从 Dojo 1.4 开始工作。

请参阅 jsFiddle 的工作示例：http: [//jsfiddle.net/phusick/cMHdt/](http://jsfiddle.net/phusick/cMHdt/)

首先，您必须全局启用 IO 管道主题，设置为`ioPublish: true`或（取决于您使用的）之一。`dojoConfig``data-dojo-config``djConfig`

然后`dojo.subscribe()`是特定主题，例如：

```
dojo.subscribe("/dojo/io/start", function(e) {
    dojo.style(throbberNode, "display", "block");
});

dojo.subscribe("/dojo/io/stop", function(e) {
    dojo.style(throbberNode, "display", "none");
}); 
```

`topics`根据 Dojo 文档，可用的有：

*   `/dojo/io/start`当没有未完成的 IO 请求时发送，并启动新的 IO 请求。此主题不传递任何参数。
*   `/dojo/io/send`每当启动新的 IO 请求时发送。它为带有主题的请求传递 dojo.Deferred。
*   `/dojo/io/load`每当 IO 请求成功加载时发送。它为带有主题的请求传递响应和 dojo.Deferred。
*   `/dojo/io/error`每当 IO 请求出错时发送。它为带有主题的请求传递错误和 dojo.Deferred。
*   `/dojo/io/done`每当 IO 请求完成时发送，无论是通过加载还是通过错误。它为带有主题的请求传递错误和 dojo.Deferred。
*   `/dojo/io/stop`当所有未完成的 IO 请求完成时发送。此主题不传递任何参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:19:48.930

假设您是`dojo.xhrGet()`.Make 通用方法，您可以在其中传递您的 URl 和要调用的调用函数。

```
var processDialog = new dijit.Dialog({

        title : ""
    }); //make it Global
function sendRequest(requestUrl, sucessFunction, errorFunction) {

        dojo.xhrGet({
        preventCache : "true",
        url : requestUrl,
        load : function (){
                   showProgressDlg(processDialog,true);
               sucessFunction; //Call  showProgressDlg(processDialog,false) once your job done inside this call back method.
                    },
        error : function (){
                   showProgressDlg(processDialog,false);//If Any loading image present
                   errorFunction;
                    },
        handleAs : "json"
    });
}

function showProgressDlg(imgContent /*Pass Your Icon URL*/, isShow) {
    if (isShow == true) {
        processDialog .attr("content", imgContent);
        dojo.body().appendChild(processDialog .domNode);
        processDialog.titleBar.style.display = 'none';
        processDialog.startup();
        processDialog.show();
    } else {
        if (processDialog )
            processDialog.hide();
    }
} 
```

# django - 我似乎可以为我的绝对路径找到正确的 urlconf 行

> ID：10885235
> 
> 赞同：0
> 
> 时间：2012-06-04T17:09:01.117
> 
> 标签：django, url, path, blogs

我一直在尝试各种组合来为我的页面上的单个博客帖子的绝对路径编写 url。这是我需要做的事情：

mypage.com/blog/2012/6/dasdf/

这显然不起作用，我也尝试使用命名组 ?P ：

```
(r'^\d{4}/d{1,2}/(?P<path>.*)/$', detail), 
```

你能告诉我应该怎么做，这样我就可以看到我错了？

ps这里是错误

```
The current URL, blog/2012/6/dasdf/, didn't match any of these. 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:32:36.963

我猜您的路径中缺少“博客”参数。此外，我始终建议尝试限制允许的字符，因为您完全知道您可以在您的 url 中收到什么。我不知道您是如何导入“detail”的，但您可能希望将其称为“application.views.detail”之类的东西。命名参数确保您将来可以轻松更改参数的顺序。

我想这样的事情应该有效：

```
(r'^blog/(?P<year>([0-9]{4}))/(?P<month>\d{1,2})/(?P<path>[a-zA-Z0-9-]+)/$', 'application.views.detail'), 
```

否则，我建议检查您创建的 url 是否与 Django 提供的带有错误消息的 url 匹配。

# jpa - JPA：从另一个持久性上下文加载相关实体？

> ID：10885237
> 
> 赞同：1
> 
> 时间：2012-06-04T17:09:04.503
> 
> 标签：jpa, openjpa

我有一个名为 Route 的实体，它有一个名为 Employee 的相关实体：

```
public class Route {
    @ManyToOne
    private Employee driver;

    // more fields...
}

public class Employee {

    // more fields...
} 
```

这两个实体存储在不同的数据库中。因此，它们存在于两种不同的持久性上下文中。因此，当我加载一个 Route 实体时，它的“驱动程序”字段为空。

是否可以加载 Route 并以某种方式自动获取其“驱动程序”字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:38:15.763

不，这是不可能的。JPA 将如何执行这样一个基本查询？

```
select r from Route r where r.driver.name = :name 
```

您必须将驱动程序的 ID 存储在 Route 实体中，显式加载它，并希望它存在（因为您没有任何外键约束）。

# python - Python：更改 json 解码的列表类型

> ID：10885238
> 
> 赞同：9
> 
> 时间：2012-06-04T17:09:07.600
> 
> 标签：python, json, decode

在 Python 2.7+ 中，我可以使用`object_pairs_hook`内置的 json 模块来更改解码对象的类型。无论如何对列表做同样的事情吗？

一种选择是遍历我作为钩子参数获得的对象并将它们替换为我自己的列表类型，但是还有其他更智能的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T22:12:40.050

要对列表执行类似操作，您需要继承 JSONDecoder。下面是一个像`object_pairs_hook`. 这使用字符串扫描的纯 python 实现而不是 C 实现。

```
import json

class decoder(json.JSONDecoder):

    def __init__(self, list_type=list,  **kwargs):
        json.JSONDecoder.__init__(self, **kwargs)
        # Use the custom JSONArray
        self.parse_array = self.JSONArray
        # Use the python implemenation of the scanner
        self.scan_once = json.scanner.py_make_scanner(self) 
        self.list_type=list_type

    def JSONArray(self, s_and_end, scan_once, **kwargs):
        values, end = json.decoder.JSONArray(s_and_end, scan_once, **kwargs)
        return self.list_type(values), end

s = "[1, 2, 3, 4, 3, 2]"
print json.loads(s, cls=decoder) # [1, 2, 3, 4, 3, 2]
print json.loads(s, cls=decoder, list_type=list) # [1, 2, 3, 4, 3, 2]
print json.loads(s, cls=decoder, list_type=set) # set([1, 2, 3, 4])
print json.loads(s, cls=decoder, list_type=tuple) # set([1, 2, 3, 4, 3, 2]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:05:58.570

根据源代码，这是不可能的：C 级函数显式实例化内置`list`类型而不使用任何回调/挂钩。在后备箱中也是如此。

# paypal - Visa、万事达卡、美国运通卡的 PayPal 经常性支付创建突然 100% 失败

> ID：10885239
> 
> 赞同：0
> 
> 时间：2012-06-04T17:09:11.380
> 
> 标签：paypal, profile, payment, recurring

我正在使用来自两个不同网站的 PHP。这些网站调用 PayPal 的 Name Value Paid (NVP) API 来创建定期付款配置文件。

一周前，大约 40% 的为 Visa 和 MasterCard 卡创建定期支付配置文件的尝试开始失败。这没什么大不了的，因为如果您立即重新提交完全相同的卡详细信息，通常会通过。然而，在 2012 年 6 月 1 日晚上，我所有的 Vias/MC/Amex 个人资料创建都开始失败。

为了确定它是否在我的服务器中，我登录了 PayPal 网站以使用它的功能来创建配置文件。该功能因相同的错误而失败。PayPal 为 Visa/MC 返回 10764 错误，为 Amex 返回 10752 错误。然后，我使用 PayPal 的虚拟终端使用相同的卡创建直接一次性付款。所有这些付款都是成功的。所以，卡是好的。

如果消费者使用 Discover Card 或 PayPal ID 创建定期付款配置文件，这似乎仍然有效。但如果没有 Visa、MC 和/或 Amex 的直接支持，我的整个业务就没有了。

我已提交票证并致电我的 PayPal 客户团队。他们在回答我的问题时含糊其辞，令人恐惧。他们承认了这个问题，但不会肯定地告诉我是否有其他人有同样的问题。如果只是我，那么我担心我的生意已经死了，因为 PayPal 肯定会在他们自己的时间表上解决或永远不会解决问题。

其他人有同样的问题吗？有谁知道解决方法？谁能建议我如何在 PayPal 内升级此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:47:45.437

詹姆斯，你并不孤单，从 5 月 28 日开始，我也看到了更多的错误 10764，但一些付款仍在进行。我的研究表明，Paypal 最近迁移了他们的数据中心，并为“数据库升级”计划了停机时间，但在我看来，他们现在只是无法控制自己的系统。至少可以说是令人震惊的。

另请参阅 Paypal 状态页面： [https](https://www.x.com/developers/paypal/documentation-tools/site-status/pp-live) ://www.x.com/developers/paypal/documentation-tools/site-status/pp-live 来自 Etsy 用户的更多报告： [http ://www.etsy.com/teams/ 7718/site-help/discuss/10349393/page/6](http://www.etsy.com/teams/7718/site-help/discuss/10349393/page/6)

这将得到解决，但谁知道需要多长时间。

# sql - Oracle SQL：根据与 SQL 语句的比较有条件地更新表

> ID：10885243
> 
> 赞同：1
> 
> 时间：2012-06-04T17:09:36.843
> 
> 标签：sql, oracle

我有一个表（TABLE1），它有 4 列：

**识别码 | PID | 价值1 | 价值2**

我有另一个 SQL 语句 (STMT)，它从其他一些表中返回 3 列：

**识别码 | PID | 价值1**

现在这里是我想如何更新 TABLE1 的条件：

首先，将 STMT 中的 UID 和 PID 对与表 1 中的进行比较，

1.  对于不在 TABLE1 中的所有新 UID 和 PID 对，将 STMT 中的新行插入 TABLE1，设置 TABLE1.VALUE2 = 0（我已经完成了这个）

2.  对于 STMT 和 TABLE1 中现有的 UID 和 PID 对，请执行以下操作：

    一种。如果 TABLE1.VALUE2 > 0，则更新 TABLE1.VALUE1 = STMT.VALUE1

    湾。如果 TABLE1.VALUE2 = 0 并且如果 TABLE1.VALUE1 != STMT.VALUE1，则更新 TABLE1.VALUE1 = STMT.VALUE1，否则什么也不做。

我无法为条件 2 提出解决方案。感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:19:34.163

```
UPDATE (
    SELECT table1.UID
           ,table1.PID
           ,table1.value1 AS table1_value1
           ,table1.value2 AS table1_value2
           ,stmt.value1 AS stmt_value1
    FROM table1
    INNER JOIN (SELECT ? AS UID
                       ,? AS PID
                       ,? AS value1
                FROM whatever) stmt
        ON stmt.UID = table1.UID
        AND stmt.PID = table1.PID
) x
SET x.table1_VALUE1 = CASE WHEN (x.table1_VALUE2 > 0) OR
                              (x.table1_VALUE2 = 0 AND x.table1_VALUE1 <> x.stmt_VALUE1)
                              THEN x.stmt_VALUE1
                         ELSE x.table1_VALUE1 
                    END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-11T14:43:19.323

您可以使用以下查询

```
MERGE INTO TABLE1 T
USING STMT S
ON (T.UID  = S.UID AND T.PID = S.PID)
WHEN MATCHED THEN
UPDATE
SET
T.VALUE1 = CASE WHEN T.VALUE2 > 0 OR (T.VALUE2 = 0 AND T.VALUE1 <> S.VALUE1) THEN S.VALUE1 END
WHEN NOT MATCHED THEN
INSERT INTO T (COLUMNS) (SELECT COLUMNS FROM S); 
```

# c# - 将用户名/密码从 Windows 窗体应用程序传递到 ASP.NET Web 应用程序

> ID：10885244
> 
> 赞同：1
> 
> 时间：2012-06-04T17:09:40.240
> 
> 标签：c#, asp.net, winforms, security

情况如下：

*   C# Windows 窗体应用程序
*   ASP.NET 网络应用程序
*   两者都使用同一数据库中的自定义用户表（用户名/密码）进行身份验证，并创建一个在两个应用程序中都使用的用户对象

用户登录到 Windows 窗体应用程序，我们想要启动一个 URL 以在默认浏览器（IE、Chrome、Firefox 等）中打开 ASP.NET Web 应用程序中的页面。我们希望将当前用户名/密码从 Windows 窗体应用程序传递到 ASP.NET Web 应用程序，以使用户不必单独登录 Web 应用程序。

根据我们的研究，以下是我们发现的一些选项（以及缺点）：

*   将 URL 中的用户名/密码作为 QueryStrings 传递，并在 Web 应用程序中创建用户对象
    *   不安全（密码在 URL 中可见）
*   在客户端计算机上创建一个临时 HTML 页面，其中包含一个 JavaScript OnLoad 函数，该函数将用户名/密码 POST 到目标 URL 并在 Web 应用程序中创建 User 对象
    *   （找不到使用 C# 将数据直接发布到 URL 并在默认浏览器中显示 URL 的方法）
    *   不安全（密码在临时页面中可见）
*   创建一个“Handoff”表来存储用户名/密码，其密钥通过 QueryString 传递到页面并在页面加载时从表中删除并在 Web 应用程序中创建用户对象
    *   密钥被拦截的可能性很小（黑客）
*   有一个单独的 MongoDB 存储用户对象并在 Web 应用程序中检索它
    *   运行单独的软件 (MongoDB) - 额外的故障点

所有这一切都是为了让用户不必输入他们的用户名/密码两次来登录这两个应用程序。

上述哪一个选项效果最好（最安全，开销/维护最少）？

**或者**

有没有办法在默认浏览器可以使用的 C# 应用程序中创建表单身份验证票证（cookie？）？

**或者**

有没有更好、更安全的方法来处理这个问题？

（编辑）

**或者**

如果用户已经通过 Windows 窗体应用程序进行了身份验证，要求用户再次输入用户名/密码以访问 Web 应用程序是否有充分的理由？如果是这样，你能提供参考链接吗？最佳实践、网络安全标准等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:19:08.027

您可以将密码加盐+MD5 并简单地与 URL 一起发送。

但是，您应该首先指向服务器上的脚本，该脚本对用户进行身份验证~~并创建适当的 cookie~~，然后重定向到所需的页面，现在 URL 中没有凭据。

*编辑：或者基本上做任何你想保留用户会话的事情*

不幸的是，只要涉及密码，您就不可能 100% 安全。尽管如此，如果有人可以看到密码，散列[加盐（加盐是在散列之前将密码与其他字符串连接时）](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)密码可能是您最好的选择。

1.  您使用盐生成密码哈希。
2.  您将其发送以进行处理（我通常只是将其放入单独脚本的 URL 中，但这是一个偏好问题。）
3.  您在服务器上生成具有相同盐的哈希，并与提交的哈希进行检查。
4.  验证用户并重定向到原始位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:54:48.107

除了 Máté Gelei 贡献的内容之外，您还可以在 Url 中包含一个时间戳，并检查以确保时间戳落在当前时间的几秒钟内。这是一点额外的保护，并确保登录尝试很快变得无效。当然，您可能希望以某种方式隐藏其目的以使其更加安全。

这并不能使其 100% 安全，但确实增加了一层保护。

# linq - 带有实体框架的 LINQ 查询中的 Where 子句

> ID：10885247
> 
> 赞同：1
> 
> 时间：2012-06-04T17:10:13.333
> 
> 标签：linq, entity-framework, c#-4.0

我正在尝试过滤 LINQ 查询，但它不接受我的 where 子句，我不知道要使用哪种 Lambda 函数。

这就是我想要的，但这会引发错误。

```
var query = from s in _db.Students where s.Payments == null orderby s.LastName select s; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:19:26.280

假设这`Payments`不是 的字段`Students`，而是表示`Payment`与 this 相关的项目集合的属性`Student`，请尝试以下查询：

```
var query = from s in _db.Students where !s.Payments.Any() orderby s.LastName select s; 
```

# jquery - 当使用 $.empty() 清除包含的 div 时，无法再次渲染 dynatree 树视图

> ID：10885250
> 
> 赞同：1
> 
> 时间：2012-06-04T17:10:35.703
> 
> 标签：jquery, css, dynatree

我正在使用 openTemplate 函数在#TreeDiv 中渲染一个动态树树视图。在为 dynatree 中的某个模板加载所有单元之前，我清空/清除 #TreeDiv 以删除现有树。这是第一次。

当我尝试在#TreeDiv 中为另一个模板加载其他单位时，我看不到我的单位数据，div 只是空的。不知何故，#TreeDiv 被破坏了，因为代码像第一次创建单元树一样正常运行。不同之处在于，在我第二次执行 .empty() 时，已经存在一棵树。

我错了什么？

```
function openTemplate(dlg, form) {
        $.ajax({
            url: $(form).attr('action'),
            type: 'POST',                     
            data: form.serialize(),
            success: function (response) {          
                if (response.success) {
                    dlg.dialog("close");                
                   $('#TreeDiv').empty();         
                   loadUnits(response.data);                    
                }
                else {
                    // Reload the dialog with the form to show model/validation errors 
                    dlg.html(response);
                }
            }
        });
    }

 function loadUnits(data) {       
        $('#TreeDiv').dynatree({
            onActivate: function (node) {
                getTestSteps(node.data.key);
            },            
            onLazyRead: function (node) {           
                node.appendAjax({
                    url: '@Url.Action("GetChildrenUnits","Unit")',
                    data: {"unitId": node.data.key, "templateId": 1 }
                });
            },
            children: data
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:45:20.387

看起来在 loadUnits 调用之前对 empty() 的调用是不完整的。

您可以将 empty() 调用包装在 untilTimeout 中。或者，您可以封装在 try 或 if 语句中。IE，如果清空完成则调用 loadUnits

# python - Python 和环境变量

> ID：10885251
> 
> 赞同：1
> 
> 时间：2012-06-04T17:10:42.547
> 
> 标签：python, subprocess

在下面的代码片段（打算在 init.d 环境中工作）中，我想执行 test.ClassPath。但是，我在设置和传递用户的 .bashrc 中定义的 CLASSPATH 环境变量时遇到了问题。

这是我沮丧的根源：

*   当以下脚本在使用模式下运行时，它会打印出 CLASSPATH OK（来自 $HOME/.bashrc）
*   当我以 root 身份运行它时，它也显示 CLASSPATH 正常（我已经使用 CLASSPATH 设置了 /etc/bash.bashrc）
*   但是当我执行“sudo script.py”（模拟 init.d 启动时发生的情况）时，缺少 CLASSPATH ！

CLASSPATH 非常大，所以我想从文件中读取它.. 比如说 $HOME/.classpath

```
#!/usr/bin/python
import subprocess
import os.path as osp
import os

user = "USERNAME"
logDir = "/home/USERNAME/temp/"
print os.environ["HOME"]

if "CLASSPATH" in os.environ:
        print os.environ["CLASSPATH"]
else:
        print "Missing CLASSPATH"
procLog = open(osp.join(logDir, 'test.log'), 'w')
cmdStr = 'sudo -u %s -i java  test.ClassPath'%(user, ) # run in user
proc = subprocess.Popen(cmdStr, shell=True, bufsize=0, stderr=procLog, stdout=procLog)
procLog.close() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:16:42.023

`sudo`默认情况下不会传递环境变量。从手册页：

```
 By default, the env_reset option is enabled.  This causes
   commands to be executed with a minimal environment containing
   TERM, PATH, HOME, MAIL, SHELL, LOGNAME, USER and USERNAME in
   addition to variables from the invoking process permitted by
   the env_check and env_keep options.  This is effectively a
   whitelist for environment variables. 
```

有几种方法可以解决这个问题。

1.  您可以编辑以使用配置指令`/etc/sudoers`显式传递`CLASSPATH` 变量。`env_keep`这可能看起来像：

    ```
    Defaults env_keep += "CLASSPATH" 
    ```

2.  您可以使用命令运行`env`命令，该命令允许您显式设置环境。典型的命令行调用可能如下所示：

    ```
    sudo env CLASSPATH=/path1:/path2 java test.ClassPath 
    ```

选项 (2) 的明显优势是它不需要对`sudoers`配置进行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:40:19.920

您可以`source ~/.bashrc`在启动 python 脚本之前设置环境变量。

# c# - 代码分析抱怨对象可以被多次处理。为什么？

> ID：10885252
> 
> 赞同：4
> 
> 时间：2012-06-04T17:10:45.150
> 
> 标签：c#, .net, code-analysis

`responseStream`我在以下功能中收到警告：

```
private static string GetResponseString(WebResponse response)
        {
            using (var responseStream = response.GetResponseStream())
            {
                if (responseStream != null)
                {
                    using (var responseReader = new StreamReader(responseStream))
                    {
                        var strResponse = responseReader.ReadToEnd();
                        return strResponse;
                    }
                }
            }

            return string.Empty;
        } 
```

我从像这样的地方调用这个函数：

```
var request = (HttpWebRequest)WebRequest.Create(Uri);
            request.Headers.Add("Authorization", "GoogleLogin auth=" + this.SecurityToken);
            request.ContentType = "application/x-www-form-urlencoded";
            request.Method = "POST";
            request.Timeout = 5000;

            // build the post string     
            var postString = new StringBuilder();
            postString.AppendFormat("registration_id={0}", recipientId);
            postString.AppendFormat("&data.payload={0}", message);
            postString.AppendFormat("&collapse_key={0}", collapseKey);

            // write the post-string as a byte array     
            var requestData = Encoding.ASCII.GetBytes(postString.ToString());
            request.ContentLength = requestData.Length;
            var requestStream = request.GetRequestStream();
            requestStream.Write(requestData, 0, requestData.Length);
            requestStream.Close();

            // Do the actual request and read the response stream  
            try
            {
                var response = request.GetResponse();
                var responseString = GetResponseString(response);
                response.Close();

                return responseString.Contains("id=") 
                    ? SendStatus.Ok 
                    : GetSendStatusFromResponse(responseString);
            }
            catch (WebException ex)
            {
                var webResponse = (HttpWebResponse)ex.Response;
                if (webResponse != null)
                {
                    if (webResponse.StatusCode.Equals(HttpStatusCode.Unauthorized))
                    {
                        return SendStatus.Unauthorized;
                    }

                    if (webResponse.StatusCode.Equals(HttpStatusCode.ServiceUnavailable))
                    {
                        return SendStatus.ServiceUnavailable;
                    }
                }

                this.LoggerService.Log(null, ex);
                return SendStatus.GeneralException;
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T17:14:48.910

StreamReader 在构造函数调用中获取传递给它的流的所有权，因为它会在 StreamReader 本身关闭时对其调用 Dispose - 因此，当外部 Using 语句尝试处置它时，它已经被处置。

# c# - C#泛型：在方法泛型的where子句中使用类泛型

> ID：10885260
> 
> 赞同：6
> 
> 时间：2012-06-04T17:10:59.550
> 
> 标签：c#, generics, .net-2.0

谁能解释为什么这不可能（至少在.Net 2.0中）：

```
public class A<T>
{
    public void Method<U>() where U : T
    {
        ...
    }
}

...

A<K> obj = new A<K>();
obj.Method<J>(); 
```

K 是 J 的超类

**编辑**

我试图简化问题以使问题更清晰，但我显然做得过火了。对不起！

我想我的问题更具体一点。这是我的代码（基于[此](https://stackoverflow.com/a/2944394/43046)）：

```
public class Container<T>
{
    private static class PerType<U> where U : T
    {
        public static U item;
    }

    public U Get<U>() where U : T
    {
        return PerType<U>.item;
    }

    public void Set<U>(U newItem) where U : T
    {
        PerType<U>.item = newItem;
    }
} 
```

我收到了这个错误：

> Container.cs(13,24)：错误 CS0305：使用泛型类型 `Container<T>.PerType<U>' requires`2' 类型参数

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T17:19:30.273

实际上这是可能的。这段代码编译并运行得很好：

```
public class A<T>
{
    public void Act<U>() where U : T
    {
        Console.Write("a");
    }
}

static void Main(string[] args)
{
  A<IEnumerable> a = new A<IEnumerable>();
  a.Act<List<int>>();
} 
```

不可能在泛型中使用协变/逆变，如下[所述](http://msdn.microsoft.com/en-us/library/dd799517.aspx)：

```
IEnumerable<Derived> d = new List<Derived>();
IEnumerable<Base> b = d; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T17:22:13.357

它对我有用（VS 2008）。

您对课程可见性有疑问吗？（类不是公共的，错误的命名空间）

您收到哪个错误消息？

* * *

**更新**

鉴于你的实现`Container<T>`我可以写

```
class A { }
class B : A { }

class Test
{
    public void MethodName( )
    {
        var obj = new Container<A>();
        obj.Set(new B());
    }
} 
```

这完美地工作。你确定那`B`来源于`A`? 请注意，例如`List<B>`不是源自`List<A>`（请参阅 YavgenyP 的答案）。

* * *

错误消息可能是一个提示，告诉您在另一个命名空间中存在另一个`Container<T>`需要第二个类型参数的`PerType<U, X??? >`.

# objective-c - 在我滚动之前，数据不会加载到 UITableView 中

> ID：10885268
> 
> 赞同：55
> 
> 时间：2012-06-04T17:11:27.847
> 
> 标签：objective-c, uitableview, cocoa, synchronous

我正在尝试在单元格中加载解析的数据，但问题是它是同步发生的，并且 UitableView 在数据加载完成之前不会显示。我试图通过使用 performSelectorInBackground 来解决这个问题，但现在数据不会加载到单元格中，直到我开始滚动。这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [self performSelectorInBackground:@selector(fethchData) withObject:nil];

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
self.listData = nil;
    self.plot=nil;
}

-(void) fethchData

{
    NSError *error = nil;
    NSURL *url=[[NSURL alloc] initWithString:@"http://www.website.com/"];
    NSString *strin=[[NSString alloc] initWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];

    HTMLParser *parser = [[HTMLParser alloc] initWithString:strin error:&error];

    if (error) {
        NSLog(@"Error: %@", error);
        return;
    }

    listData =[[NSMutableArray alloc] init];
    plot=[[NSMutableArray alloc] init];

    HTMLNode *bodyNode = [parser body];
    NSArray *contentNodes = [bodyNode findChildTags:@"p"];

    for (HTMLNode *inputNode in contentNodes) {
            [plot addObject:[[inputNode allContents] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]];    
        }

    NSArray *divNodes = [bodyNode findChildTags:@"h2"];

    for (HTMLNode *inputNode in divNodes) {

            [listData addObject:[[inputNode allContents] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]];          

        }
    }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

    static NSString *CellIdentifier = @"Cell";
    //here you check for PreCreated cell.
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    }

    //Fill the cells...  

    cell.textLabel.text = [listData objectAtIndex:indexPath.row];
    cell.textLabel.font = [UIFont boldSystemFontOfSize:14];
    cell.textLabel.numberOfLines=6; 
    cell.textLabel.textColor=[UIColor colorWithHue:0.7 saturation:1 brightness:0.4 alpha:1];

    cell.detailTextLabel.text=[plot objectAtIndex:indexPath.row];
    cell.detailTextLabel.font=[UIFont systemFontOfSize:11];
    cell.detailTextLabel.numberOfLines=6;

    return cell;

} 
```

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-06-18T10:03:30.923

**成功加载数据后将其**放在某处：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [self.tableView reloadData];
}); 
```

这解决了**当您不在主线程中时调用 GUI 更新的问题。**

此代码使用 Apple 的 GCD 技术强制 reload data 函数在主线程上运行。阅读更多关于 [并发编程指南](http://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091)以获得更多理解（它是一个相当大的领域，因此很难在评论中解释）无论如何，如果你不太了解它不是很推荐，因为它会导致程序在一些罕见的情况下崩溃。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-03-29T22:01:28.063

**对于迅捷3：**

```
DispatchQueue.main.async(execute: { () -> Void in
                self.tableView.reloadData()
            }) 
```

**对于快速 2：**

```
dispatch_async(dispatch_get_main_queue(), { () -> Void in
                self.tableView.reloadData()
            }) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-04T17:17:45.180

您真正需要做的就是每当您更新后端数据时，请致电

```
[tableView reloadData]; 
```

由于这是同步发生的，因此您可能应该具有类似的功能

```
-(void) updateTable
{
    [tableView reloadData];
} 
```

在您的下载调用中添加数据后

```
[self performSelectorOnMainThread:@selector(updateTable) withObject:nil waitUntilDone:NO]; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-19T08:55:02.473

你可以使用[cell setNeedsDisplay]；例如：

```
dispatch_async(dispatch_get_main_queue(), ^{
            [cell setNeedsDisplay];
            [cell.contentView addSubview:yourView];
        }); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-15T10:12:38.507

我遇到了这个问题，我整天都在处理它。

我正在使用静态单元格并且 reloadData 导致错误加载，它仅显示可见单元格并删除其他单元格。我注意到的是，当我向下滚动（y 为负值）时，单元格正确加载，所以我编写了这段代码并且它工作，即使我不喜欢这样。

如果您找到更好的解决方案，请拍摄。

```
-(void)reloadTableView{
        CGPoint point = self.tableSettings.tableView.contentOffset;
        [self.tableSettings.tableView reloadData];

        [UIView animateWithDuration:.001f animations:^{
            [self.tableSettings.tableView setContentOffset:CGPointMake(point.x, -10)];
        } completion:^(BOOL finished) {
            [UIView animateWithDuration:.001f animations:^{
                [self.tableSettings.tableView setContentOffset:point];
            } completion:^(BOOL finished) {

            }];
        }];
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-19T19:59:43.477

我遇到了完全相同的问题！我希望 UITableView 在视图控制器出现之前被完全填充。Envil 的帖子为我提供了所需的信息，但我的解决方案最终有所不同。

这就是我所做的（经过改造以适应提问者的上下文）。

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [self performSelectorInBackground:@selector(fethchData) withObject:nil];
}

- (void)viewWillAppear {
    [tableView reloadData];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-14T00:03:48.793

首先，这半解决了我的相关问题。我想在表格单元格中圆角图像。异步调度解决了一些但不是所有图像的问题。有任何想法吗？

其次，我认为您应该通过使用这样的闭包捕获列表来避免创建强引用循环：

```
DispatchQueue.main.async(execute: { [weak weakSelf = self] () -> Void in
            weakSelf!.tableView.reloadData()
        }) 
```

请参阅：[https ://developer.apple.com/library/prerelease/content/documentation/Swift/Conceptual/Swift_Programming_Language/AutomaticReferenceCounting.html#//apple_ref/doc/uid/TP40014097-CH20-ID52](https://developer.apple.com/library/prerelease/content/documentation/Swift/Conceptual/Swift_Programming_Language/AutomaticReferenceCounting.html#//apple_ref/doc/uid/TP40014097-CH20-ID52)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-15T08:51:37.817

我在使用自定尺寸单元时遇到了同样的问题，我发现将estimatedHeight 设置为 50 可以解决问题。

在 tableView 本身上设置estimatedHeight，或者从`estimatedHeightForRowAt`你的 UITableViewDelegate 中返回一个估计值。

只要估计值大于 0，它似乎就可以工作。

# android - 如何将数据从函数传递到外部对象（android）

> ID：10885269
> 
> 赞同：1
> 
> 时间：2012-06-04T17:11:30.397
> 
> 标签：android, button, barcode

我正在使用 ZyXEL 条码扫描仪的这种功能，我想通过这个函数将字符串“upc”传递给 EditText 对象，我该怎么做？

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    switch(requestCode) 
    {
        case IntentIntegrator.REQUEST_CODE:
        {
            if (resultCode != RESULT_CANCELED) 

               {
                            IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, data);
                            if (scanResult != null)
                            {
                            String upc = scanResult.getContents();

                            }

               }
                break;
                }
            }
        } 
```

第二个问题：

我想在单击这样的按钮后调用一个函数：

```
button3.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v)
        {

             IntentIntegrator.initiateScan(this);

        }
    }); 
```

但我收到此错误：

> “IntentIntegrator 类型中的方法 initialScan(Activity) 不适用于参数 (new View.OnClickListener(){})”

所以我试图通过在单击此功能调用原始功能的按钮时调用功能来解决此问题

它看起来像这样：

```
 button3.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v)
        {
             turntheshiton();

        }
    });

 public void turntheshiton()
{
    IntentIntegrator.initiateScan(this);
} 
```

但这不是解决这个问题的真正优雅方法，还有其他方法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:30:32.897

```
 String upc = scanResult.getContents();
 updateEditField(upc );// or use <activity-name>.this.updateEditField(upc );

private void updateEditField(String str){

EditField ef = (EditField)findViewByID(R.id.<ef_id>);

        if(null!=ef){
           ef.setText(str):
      }
} 
```

第二个问题：

```
in IntentIntegrator.initiateScan(this);

use <activity-name>.this like Activity.this 
```

# php - 带有 preg_replace 的 PHP 正则表达式语法

> ID：10885270
> 
> 赞同：1
> 
> 时间：2012-06-04T17:11:31.623
> 
> 标签：php, regex, preg-replace

PHP REGEX 是我的一个弱点，但我仍然设法使用在线工具完成一些事情。考虑以下：

通常遵循此模式的主题字符串：1551 UTC 2012 年 6 月 4 日

我想提取“04”并将其分配给 $day 使用下面的变量：

```
$day = preg_replace("/^([0-9]{4})\s([A-Z]{3})\s([0-9]{2})\s([A-Za-z]{3,})\s([0-9]{4})$/", "$3", $weather['date']); 
```

这适用于以下网站： [http ://sqa.fyicenter.com/Online_Test_Tools/Test_Regular_Expression_Search_Replace.php](http://sqa.fyicenter.com/Online_Test_Tools/Test_Regular_Expression_Search_Replace.php)

但我无法让它在我的脚本中工作...... $day 将等于整个主题字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:39:07.553

你的结果`var_dump()`是`string(38) "1551 UTC 04 June 2012 "`. 它有 38 个字符，而应该只有 21 个。所以看起来字符串中有多个空格。

尝试`trim()`输入字符串并替换`\s`为`\s+`以支持多个空格：

```
$day = preg_replace("/^([0-9]{4})\s+([A-Z]{3})\s+([0-9]{2})\s+([A-Za-z]{3,})\s+([0-9]{4})$/", "$3", trim($weather['date'])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:39:02.013

你说 preg_replace，但我认为你想使用 preg_match()。您不想替换“04”但只想将其放入变量 $day 中是否正确？如果是这样，请使用 preg_match()。在您的描述中，您说您只想捕获“04”部分，但是您的正则表达式有许多捕获组（“（）”中的任何内容都是捕获组，并将在您提供给 preg_match 的数组中返回）。

# c - ARMCI 入门

> ID：10885277
> 
> 赞同：1
> 
> 时间：2012-06-04T17:12:24.890
> 
> 标签：c, mpi

我想使用 ARMCI，我尝试阅读它的文档，我的理解是 ARMCI 不是由开发人员使用，而是由一个库使用。这意味着可以有与 MPI 不同的 ARMCI 实现。

有人可以建议我其中一些实现吗？

一般来说，我无法开始使用 ARMCI（说到编码），

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:32:07.587

您可以直接使用 ARMCI，但它是一个低级接口。Global Arrays (GA) 可能是最流行的基于 ARMCI 的库。GA 被 NWChem 等使用。

ARMCI 有多种实现。来自 Pacific Northwest 的那个可以作为[GA 包](http://www.emsl.pnl.gov/docs/global/)的一部分下载。[在MPICH2](http://www.mcs.anl.gov/research/projects/mpich2/)的新版本中还有一个 ARMCI 实现，它适用于 MPI 单向操作。

# c++ - 使用 drawPrimitive() 的 OpenGL 项目

> ID：10885278
> 
> 赞同：0
> 
> 时间：2012-06-04T17:12:25.687
> 
> 标签：c++, opengl, draw, lines

我正在尝试更改一个 C++ 项目，当我单击视口时，该项目当前正在绘制一些线条。这个功能非常好，但我想要改变的是当我点击“UP”或“Down”键时，下一行的颜色会改变。目前，如果我单击这些键，所有线条的颜色都会发生变化，包括旧线条（已经绘制）。

请告诉我该怎么做。这是一些代码：

```
void drawPrimitive() {
Vertex *temp;

//  Set the primitive color
glColor3fv(primitiveColor);

//  Set the point size in case we are drawing a point
if (type == POINT)
    glPointSize(pointSize);

//  Display results depending on the mode
glBegin(mode);
    for(temp = head; temp != NULL; temp = temp->np)
    {
        if (smoothShading)
            glColor3f(temp->r, temp->g, temp->b);

        glVertex2f(temp->x, temp->y);
    }
glEnd(); }

void mouse(int button, int state, int x, int y) {
if(button == GLUT_LEFT_BUTTON && state == GLUT_DOWN)
{
    float pointX, pointY;

    pointX = (float)x/window_width * world_width;
    pointY = (float)(window_height - y)/window_height * world_height;

    //  Add a vertex to the list of vertices...
    addVertex(&head, &tail, pointX, pointY, 0.0f, primitiveColor[0], primitiveColor[1], primitiveColor[2]);

    //  automatically calls the display function
    glutPostRedisplay();
}
else if(button == GLUT_MIDDLE_BUTTON && state == GLUT_DOWN)
{
    deleteVertex(&head, &tail);
    glutPostRedisplay();
} }

void special(int key, int x, int y) {
switch (key)
{
    //  change primitive color
    case GLUT_KEY_UP :
        changePrimitiveColor(1);
        break;
    case GLUT_KEY_DOWN :
        changePrimitiveColor(-1);
        break;
}

glutPostRedisplay(); }

void changePrimitiveColor(int step) {
primitiveColorId += step;

if (primitiveColorId < 0)
    primitiveColorId = COLOR_COUNT - 1;

if (primitiveColorId >= COLOR_COUNT)
    primitiveColorId = 0;

setColor(primitiveColor, primitiveColorId); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:42:48.867

您的代码有点不清楚；原始颜色是全局变量吗？

假设您为每次重绘的所有线条调用 drawPrimitive()，则所有线条都将使用相同的原始颜色。当你按下 up 或 down 改变颜色时，redisplay 函数就会被调用，所有的线都将使用相同的颜色重新绘制。

您可能想要做的是有一个包含基元及其各自颜色的列表。当您遍历此列表时，您可以为每一行设置一种颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:43:14.250

请记住，OpenGL 的行为就像一个状态机。如果您设置了一种颜色，那么您在它之后绘制的所有内容都将使用该颜色进行绘制。OpenGL 不会记住您的其他元素具有不同的颜色，而您希望保持这种颜色。你必须做簿记。

因此，每次绘制内容时，您都必须明确说明哪些元素具有哪种颜色。

# jquery - Internet Explorer 中的 jQuery 焦点

> ID：10885292
> 
> 赞同：0
> 
> 时间：2012-06-04T17:13:44.237
> 
> 标签：jquery

我有一个用于搜索字段的输入类型文本，我正在使用 jQuery 和 Focus，但它在 Internet Explorer 中不起作用，我想知道我的代码是否做错了什么，或者是否有更好的方法？一些帮助！谢谢！

```
$(document).ready(function(){

$("#search12_176db646136e9421c49d1b").focus();

}); 
```

`#search12_176db646136e9421c49d1b`id 输入标签的id 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:16:19.710

试试这个：

```
 $(document).ready(function(){

      setTimeout(function() {
         $("#search12_176db646136e9421c49d1b").focus();
      },1000);

    }); 
```

或者

```
$("#search12_176db646136e9421c49d1b")[0].focus(); 
```

这里

```
$("#search12_176db646136e9421c49d1b")[0] 
```

类似于

```
document.getElementById('search12_176db646136e9421c49d1b') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T17:16:11.017

```
document.getElementById('search12_176db646136e9421c49d1b').focus(); 
```

# c# - ServiceContractGenerator 如何生成命名空间

> ID：10885293
> 
> 赞同：2
> 
> 时间：2012-06-04T17:13:46.683
> 
> 标签：c#, wcf

我正在尝试使用 ServiceContractGenerator 从 wsdl 生成 C# 中的 Web 服务客户端。我是这个班的新手。我使用的代码与 Microsoft 网站上的示例中的代码以及我从网上阅读的内容非常相似。当我在 wsdl 上运行 Svcutil.exe 时，我会在 C# 代码中的同一命名空间中获取所有类型。当我使用 ServiceContractGenerator 时，它会将客户端代码放在我指定的命名空间中，但它会为 wsdl 类型创建第二个命名空间。wsdl 有这样的部分：

```
<wsdl:types><xsd:schema targetNamespace="http://tempuri.org/Imports"><xsd:import schemaLocation="http://devabntstapp10.psohealth.local/TZ_TCS_SERVICES/AdminService.svc?xsd=xsd0" namespace="http://tempuri.org/"/><xsd:import schemaLocation="http://yyy/zzz/AdminService.svc?xsd=xsd2" namespace="http://schemas.datacontract.org/2004/07/zzz.Correspondence"/><xsd:import schemaLocation="http:/yyy/zzz/AdminService.svc?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/"/></xsd:schema></wsdl:types> 
```

有一条消息定义为

```
<wsdl:message name="ICorrespondenceAdmin_ListOwners_InputMessage"><wsdl:part name="parameters" element="tns:ListOwners"/></wsdl:message> 
```

我正在使用的代码是

```
 generator = new ServiceContractGenerator();
    try {
        generator.NamespaceMappings.Add("*", "WebServiceClients");
    }
    catch (Exception) {
    }

    MetadataExchangeClient mexClient =
        new MetadataExchangeClient(
            new Uri(uri),
            MetadataExchangeClientMode.HttpGet);

    mexClient.ResolveMetadataReferences = true;
    MetadataSet metaDocs = mexClient.GetMetadata();

    WsdlImporter importer = new WsdlImporter(metaDocs);

    System.Collections.ObjectModel.Collection<ContractDescription> contracts
      = importer.ImportAllContracts();
    ServiceEndpointCollection eps = importer.ImportAllEndpoints();
    foreach (ContractDescription contract in contracts) {
        generator.GenerateServiceContractType(contract);
    }

    if (generator.Errors.Count != 0)
        throw new Exception("There were errors during code compilation.");

    StringWriter stringWriter =
        new StringWriter(System.Globalization.CultureInfo.CurrentCulture);
    System.CodeDom.Compiler.IndentedTextWriter textWriter
        = new System.CodeDom.Compiler.IndentedTextWriter(stringWriter);

    codeDomProvider.GenerateCodeFromCompileUnit(
        generator.TargetCompileUnit,
        textWriter,
        options);

    textWriter.Close(); 
```

我为客户端类 CorrespondenceAdminClient 获得了 WebServicesclients 的命名空间，并为所有参数和返回类型获得了 zzz.Correspondence 的命名空间。Svcutil 将它们全部放在 WebServicesclients 中。我似乎错过了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:07:20.777

您可能需要重新定义 XmlImportOptions 和 XsdDataContracts，所有类型都不是由 xsdDataContracts 生成的，我猜 generateServiceContract 只更改了这个的命名空间。

```
 importer.State.Remove(typeof(XsdDataContractImporter));
        var xsdDCImporter = new XsdDataContractImporter();
        xsdDCImporter.Options = new ImportOptions();
        xsdDCImporter.Options.Namespaces.Add("*", nameSpace);
        importer.State.Add(typeof(XsdDataContractImporter), xsdDCImporter);

        var xmlOptions = new XmlSerializerImportOptions(xsdDCImporter.CodeCompileUnit);
        xmlOptions.ClrNamespace = nameSpace;
        importer.State.Add(typeof(XmlSerializerImportOptions), xmlOptions);

        System.Collections.ObjectModel.Collection<ContractDescription> contracts = importer.ImportAllContracts(); 
```

# ruby-on-rails - 通过表单将数据从一个表导入到另一个表

> ID：10885298
> 
> 赞同：0
> 
> 时间：2012-06-04T17:13:59.877
> 
> 标签：ruby-on-rails

我有一个应用程序，我正在尝试创建一个 check_in 页面，其中将列出所有 check_in 人员的列表。我正在将数据（例如姓名、电话号码、地址）从其原始表中提取到 check_in 表中。在我看来，我的表格如下：

```
 <%= form_for @check_in, :url => {:controller => 'check_ins', :action => 'create' } do |f| %>
          <% @account.children.each do |child| %>
            <%= f.check_box :child_id, :checked => 'checked' %>
            <%= image_tag child.photo.url(:thumb) %>
            <span class="name"><%= child.first %>
            <%= child.last %></span><br/>
          <% end %> 
```

列出的 child.first 和 child.last 来自名为 children 的表。在我的checked_in 表中，我的列标记为child_first、child_last。如何将此表格的结果转移到该表格中？我正在使用 SQL 数据库。

# sql - 有没有办法替换所有字段中的字符或字符串而不为每个字段编写它？

> ID：10885301
> 
> 赞同：2
> 
> 时间：2012-06-04T17:14:22.470
> 
> 标签：sql, sql-server-2005, replace, field

我会提前警告你，这个问题有点愚蠢，但我还是在问。

我的问题的动力是从查询结果和一些已经包含逗号的字段中创建一个 csv。显然，csv 并不知道更好，只是通过在非字段列中有一些落后者来愉快地提升我的好心情。

我知道我会写

`Replace(FieldName, OldChar, NewChar)`

对于每个字段，但如果有一个快捷方式可以在查询输出中替换它们，我比什么都好奇。

基本上我正在寻找的（**逻辑上**）是：

```
Replace(AllFields, OldChar, NewChar) 
```

我不知道所有的 SQL 技巧（或其中的许多技巧），所以我想也许 SO 社区可能能够启发我......或者称我为疯子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:15:09.337

没有 SQL 语法可以执行您所描述的操作，但正如您所见，有很多方法可以使用动态 SQL 执行此操作。这是我喜欢的方式（假设您想用管道替换逗号，根据您的需要进行更改）：

```
DECLARE @table   NVARCHAR(511),
        @newchar NCHAR(1),
        @sql     NVARCHAR(MAX);

SELECT @table    = N'dbo.table_name',
       @newchar  = N'|', -- tailor accordingly
       @sql      = N'';

SELECT @sql = @sql + ',
  ' + QUOTENAME(name) 
    + ' = REPLACE(CONVERT(NVARCHAR(MAX), ' + QUOTENAME(name) + '),'','',''' 
    + @newchar + ''')'
  FROM sys.columns
  WHERE [object_id] = OBJECT_ID(@table)
  ORDER BY column_id;

SELECT @sql = N'SELECT ' + STUFF(@sql, 1, 1, '')  + ' 
 FROM ' + @table;

PRINT @sql;
-- EXEC sp_executesql @sql; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:11:35.157

我感觉到你的痛苦。我经常在 ETL 例程中执行一次性类型清理步骤。当您需要从导入中删除一些奇怪的东西（流氓分页符、空格等）时，我发现这样的脚本会有所帮助：

```
declare @tableName nvarchar(100) = 'dbo.YourTable';

declare @col nvarchar(max);

-- remove quotes and trim every column, kill page breaks, etc.
;with c_Col (colName)
as  (   select  c.name
        from    sys.tables t 
        join    sys.columns c on
                c.object_id = t.object_id
        where   t.object_id = object_id(@tableName)
    )
select @col = stuff(a.n, 1, 1, '')      
    from    (   select  top 100 percent
                        ',' + c.colName + '= nullif(replace(replace(replace(rtrim(ltrim('+c.colName+ ')), ''"'', ''''), char(13), ''''), char(10), ''''), '''') '
                from    c_col c
                for xml path('')
            ) as a(n)

declare @cmd nvarchar(max)
set @cmd = 'update ' + @tableName + ' set ' + @col

print @cmd;
--exec(@cmd); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T18:07:27.750

如果您只是想为影响表中所有字段的一次性查询语句节省一些输入，那么这是我过去使用过的一个技巧。

首先查询架构以生成一个结果集，该结果集返回您指定的任何表中的所有字段名称。您可以修改我在此处作为模板提供的内容，但我已经给出了围绕字段名称的更新语句的基本结构。

```
select column_name + ' = Replace(' + column_name + ',OldChar,NewChar),' 
  from information_schema.columns
  where table_name = 'YourTableName' 
```

结果集以一系列行的形式返回到查询分析器中，您可以突出显示（通过单击列名），然后将其复制并粘贴回您的查询分析器窗口。从那里将您的更新语句添加到开头，将 where 子句添加到结尾。 *您还需要去掉一个额外的逗号。*

然后，您可以重新运行查询以产生期望的结果。

# javascript - 使用 Google Fusion 表格绘制图表可视化

> ID：10885309
> 
> 赞同：0
> 
> 时间：2012-06-04T17:14:54.437
> 
> 标签：javascript, google-maps-api-3, dom-events, google-fusion-tables

我正在尝试通过单击融合表图层/地图来动态绘制图表。每当单击墨西哥的一个州时，我希望图表更改以反映 2007、2008、2009 和 2010 列中的值。目前，这不起作用。Firebug 告诉我“a 未定义”，但我真的不知道这意味着什么，因为我没有声明一个名为“a”的变量，并且假设它是 Google 脚本中的内容。

这是我正在使用的代码。单击侦听器从名为“column_1”的列中获取状态名称，然后将其传递给绘图可视化函数：

```
google.maps.event.addListener(shownLayer, 'click',function(e){
    stateName = e.row['column_1'].value;
    drawVisualization(stateName);           
});  

function drawVisualization(stateName){
    google.visualization.drawChart({
        containerID: "textBox",
        dataSourceUrl: "http://www.google.com/fusiontables/gvizdata?tq=",

        query: "SELECT '2007','2008','2009','2010' " +
          "FROM 3943497 WHERE column_1 = '" + stateName + "'",
        chartType: "ColumnChart",
        options: {
            title: stateName,
            height: 300,
            width: 400
        }
    }); 

} 
```

地图网站位于：[https ://mywebspace.wisc.edu/csterling/web/cartel%20map/index.html](https://mywebspace.wisc.edu/csterling/web/cartel%20map/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:09:50.943

```
containerID: "textBox", 
```

拼写错误。应该：

```
containerId: "textBox", 
```

我的建议是先让一个基本的静态 GVis 图表工作，然后再担心将其链接到 Fusion Tables 并根据鼠标点击更改图表。我采用了您脚本的相关部分，但无法使其正常工作。当您发布整个文件时，很难将给您带来问题的问题与其他代码区分开来。这是我提取来测试基本 GViz 问题的内容：

```
<!DOCTYPE html>
   <html>
   <head>
   <script src="http://www.google.com/jsapi"></script>
  <script type='text/javascript'>
   google.load('visualization','1', {packages: ['corechart'] });
    window.onload = function () {
       drawVisualization('Chiapas');
    }
   function drawVisualization(stateName){
       google.visualization.drawChart({
           "chartType": "ColumnChart",
           "containerId": "textBox",
           "dataSourceUrl": "http://www.google.com/fusiontables/gvizdata?tq=",
           "query": "SELECT '2007','2008','2009','2010' " + "FROM 3943497 WHERE column_1 = '" + stateName + "'",
           "options": {
               title: stateName
           }
       });
   }

   </script>
   </head>
   <body>
     <div id="textBox" style="width: 400px; height: 300px;"></div>
     <br />
   </body>
   </html> 
```

此应用程序不起作用。我在页面中显示：“不支持带有值域轴的条形系列”

我还可以在您的应用中看到您使用的 stateName 值是“墨西哥恰帕斯州”，但这不是 Fusion Table column_1 中显示的值，“恰帕斯州”是那里的一个值。

# python - 在 Amazon EMR 上为 Pig UDF 加载外部 python 模块

> ID：10885312
> 
> 赞同：3
> 
> 时间：2012-06-04T17:15:13.213
> 
> 标签：python, amazon, apache-pig, emr

我创建了一个 python UDF 来将日期时间转换为不同的时区。该脚本使用不随 python（或 jython）一起提供的 pytz。我尝试了几件事：

1.  引导 PIG 安装它自己的 jython 并在该 jython 安装中包含 pytz。我无法让 PIG 使用新安装的 jython，它不断恢复为 Amazon 的 jython。
2.  将 PYTHONPATH 设置为安装新模块的本地目录
3.  将 HADOOP_CLASSPATH/PIG_CLASSPATH 设置为新安装的 jython

当我尝试加载 UDF 脚本时，每一个都以“ImportError：没有名为 pytz 的模块”结尾。如果我删除 pytz 脚本加载正常，所以它肯定是给它带来问题的外部模块。

编辑：最初将此作为评论，但我想我只是对其进行编辑：

我已经尝试了所有我知道的方法来让 PIG 识别另一个 jython jar。那没有奏效。亚马逊的 jython 在这里：/home/hadoop/.versions/pig-0.9.2/lib/pig/jython.jar，正在识别这个 sys.path：/home/hadoop/lib/Lib。我不知道如何针对这个 jar 构建外部库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T21:10:42.610

您可以手动破解 jython 脚本中的 sys.path 吗？

# ios - 检测应用程序在加载期间/上次运行时崩溃？

> ID：10885313
> 
> 赞同：23
> 
> 时间：2012-06-04T17:15:14.733
> 
> 标签：ios, xcode, crittercism

如果我的应用在启动期间崩溃，我希望它重置为标准设置。*如果它在上次运行时崩溃，最好也是如此*。

编辑：**Crittercism**有一个`crittercismDidCrashOnLastLoad`方法，但它只处理加载期间崩溃的情况。它在我使用的库版本中无法正常工作，但这已得到修复。

建议？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-04T18:12:03.230

`AppDelegate.m`在您的文件中创建 2 个函数：

```
void HandleException(NSException *exception) {
    NSLog(@"App crashing with exception: %@", exception);
    //Save somewhere that your app has crashed.
}

void HandleSignal(int signal) {
    NSLog(@"We received a signal: %d", signal);
    //Save somewhere that your app has crashed.
} 
```

然后在你`-(BOOL)application:didFinishLaunchingWithOptions`之前放任何东西：

```
NSSetUncaughtExceptionHandler(&HandleException);

struct sigaction signalAction;
memset(&signalAction, 0, sizeof(signalAction));
signalAction.sa_handler = &HandleSignal;

sigaction(SIGABRT, &signalAction, NULL);
sigaction(SIGILL, &signalAction, NULL);
sigaction(SIGBUS, &signalAction, NULL); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-30T05:58:46.307

然后，您可以使用 Crashlytics 设置 CrashlyticsDelegate 以检测 Swift 或 ObjC 代码上的崩溃。

```
import Fabric
import Crashlytics
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool
{
    Crashlytics.sharedInstance().delegate = self
    Fabric.with([Crashlytics.self])
    return true
}

//MARK: - CrashlyticsDelegate

func crashlyticsDidDetectReport(forLastExecution report: CLSReport, completionHandler: @escaping (Bool) -> Void)
{
    completionHandler(true)
} 
```

来自 Crashlytics 文档

> 您的委托必须调用 completionHandler，但不需要同步执行，甚至不需要在主线程上执行。使用 NO 调用 completionHandler 将导致检测到的报告被删除并且不会提交给 Crashlytics。这对于实现权限提示或其他更复杂的提交崩溃的逻辑形式很有用。
> 
> 在使用 startWithAPIKey:... 或通过 [Fabric with:...] 启动 Crashlytics 之前，请确保已设置委托。不这样做将导致丢失在启动期间同步发生的任何委托回调。

# java - 父子权限被拒绝

> ID：10885319
> 
> 赞同：0
> 
> 时间：2012-06-04T17:15:54.800
> 
> 标签：java, c

我有一个没有在 ubuntu 中运行的法官，我认为它是用 C 和 Java 编写的，其中 C 程序是为父子生成过程编写的，由于以下错误，代码无法运行：

```
 ./client:Permission denied
 ./client:Permission denied 
```

我怎么解决这个问题？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:28:45.837

```
chmod +x client 
```

将执行模式添加到您的应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:30:50.633

如果您的程序是用 C 编写的，那么您可以尝试`chmod +x client`, 然后`./client`执行它。

如果您的程序是用 Java 编写的，那么您应该使用`chmod +x client`, then`java client`来执行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:20:47.783

```
chmod 777 ./client 
```

这将允许任何用户执行。

# c# - 防止 .NET 逆向工程/反编译

> ID：10885320
> 
> 赞同：2
> 
> 时间：2012-06-04T17:16:00.060
> 
> 标签：c#, wpf, reflector

有什么方法可以阻止 .NET Reflector 在程序中工作？

例如：我正在开发一个包含机密数据（如 gMail 地址和密码）的程序，我不希望有人看到它们。

**我怎样才能做到这一点？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T17:17:54.757

有各种工具可以通过不同的技术来保证这一点。

例如，许多商业混淆器除了加密字符串和混淆源之外，还会在 IL 中引入允许程序运行但会破坏（大部分/全部）当前逆向工程工具（如 .NET Reflector）的东西。

话虽如此，将这种类型的数据保存在应用程序*中永远不会安全。* 工具所能做的最好的事情就是让获取信息变得更加困难，但绝不会让它变得不可能。

一个“掩盖”它并打破混淆工具的工具仍然不完美——只要有足够的时间和精力，有人可以从你的程序中获取这些信息。如果信息对运行时可用，那么有足够决心和动力去找到它的人就可以使用它。因此，重要的私人信息（如密码）不应保存在可执行文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T17:18:03.563

是的，搜索“.NET 混淆器”。有几种可用的工具。

但是，您永远不应该在代码中嵌入您的电子邮件用户名/密码。这是错误的。抛开安全性不谈，如果您需要更改电子邮件密码，您会怎么做？你能升级你的软件的所有副本吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T17:25:39.750

混淆器往往很少提供保护数据，例如您在应用程序中保留的内容。它们主要是为了保护代码和逻辑不被逆向工程，而不是文字。更好的方法是让您的客户端应用程序与服务器端应用程序对话，该应用程序为其提供所需的数据，而不是让您的客户端直接与安全服务器进行协商。通过这种方式，您可以在服务器和客户端应用程序之间设置安全的加密方法。

# concurrency - Knockout Concurrency 插件可以跟踪新添加或删除的行吗？

> ID：10885321
> 
> 赞同：3
> 
> 时间：2012-06-04T17:16:00.943
> 
> 标签：concurrency, knockout.js

我正在尝试在我的项目中使用 Knockout Concurrency 插件，我目前正在摆弄示例代码，但我没有让它工作：

[https://github.com/AndersMalmgren/Knockout.Concurrency/wiki/Getting-started](https://github.com/AndersMalmgren/Knockout.Concurrency/wiki/Getting-started)

```
ViewModel = function() {
    this.name = ko.observable("John").extend({ concurrency: true});    
    this.children = [{ name: ko.observable("Jane").extend({concurrency: true })}, { name: ko.observable("Bruce").extend({concurrency: true })}];

    this.getData = function() {
        //Simulate backend data
        var data = { name: "John Doe", children: [{ name: "Jane Doe"},{ name: "Bruce Wayne"}, { name: "New row"}]};

        new ko.concurrency.Runner().run(this, data);
    }
}

ko.applyBindings(new ViewModel()); 
```

[http://jsfiddle.net/rCVk4/3/](http://jsfiddle.net/rCVk4/3/)

没有任何反应，并且插件没有跟踪新添加的项目，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:40:04.747

感谢您试用我的插件，也非常快，我今天上传了代码！

该插件确实支持跟踪删除和添加的行。但是要让它知道哪些行是什么它需要你为它提供一个映射器

```
var mappings = {  
    children: {
        key: function(item) {
            return ko.utils.unwrapObservable(item.id);
        },
        create: function(data) {
            return { id: data.id, name: data.name };
        }                            
    }
}; 
```

名称 children 对应于数组的名称。

Key 方法用于标识用作标识符的属性。

Create 方法用于创建新行（添加的行）。

您可以从 Github 下载 MVC3 示例以获得功能齐全的 Demo，也请试用这个 Fiddle

[http://jsfiddle.net/7atZT/](http://jsfiddle.net/7atZT/)

# svm - 计算 SVM 的边际和偏差

> ID：10885322
> 
> 赞同：3
> 
> 时间：2012-06-04T17:16:01.023
> 
> 标签：svm

我提前为这个问题的新鲜感道歉，但我被困住了。我正在尝试解决这个问题，

![在此处输入图像描述](../Images/e2b3a3f19932ba17c5f6fa9890c437f9.png)

我可以做部分 i)-1v) 但我被困在 v 上。我知道要计算边距 y，你可以

```
y=2/||W|| 
```

我知道 W 是超平面的法线，我只是不知道如何计算它。总是这样吗

`W=[1;1]`?

同样，偏见，`W^T * x + b = 0`

如何`x`从数据点中找到值？感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-29T21:51:07.447

![在此处输入图像描述](../Images/5f39d139fb11b3b88ec32e9227804ce0.png)

考虑在图中所示的（非常少的）数据集上构建一个支持向量机，例如这样的示例，最大边距权重向量将平行于两个类的连接点的最短线，即 和 之间的线，给出的权重向量。最优决策面与该线正交，并在中点与该线相交。因此，它通过 . 因此，SVM 决策边界为：

![在此处输入图像描述](../Images/e6a3f27643e31b36be12d610f1dd35d1.png)

以代数方式工作，使用我们寻求最小化的标准约束。当两个支持向量的相等性满足此约束时，就会发生这种情况。此外，我们知道解决方案适用于某些 . 所以我们有：

![在此处输入图像描述](../Images/689dcc2eb027bd1f50c839a61cf6a45d.png)

因此 a=2/5 和 b=-11/5，并且 . 所以最优超平面由下式给出

![在此处输入图像描述](../Images/553a176590e97de3a898d5cad461ee4c.png)
和 b= -11/5 。边距边界是

![在此处输入图像描述](../Images/3104690a7bb74311405ccbb0b40aab6c.png)

这个答案可以通过检查图片在几何上得到证实。

# asp.net - ImageButton没有触发

> ID：10885323
> 
> 赞同：0
> 
> 时间：2012-06-04T17:16:02.533
> 
> 标签：asp.net, .net, vb.net, events

我有以下按钮：

```
<asp:ImageButton ID="imgbtnEditInfo" runat="server" ImageUrl="~/images/EditInformation.png" AlternateText="EditInformation" CommandName="EditDetails" CommandArgument="<%# Container.DataItemIndex %>" OnClick="lnkEdit_Click" Enabled="true" /> 
```

我有以下方法，但看起来它没有达到该方法：

```
Protected Sub lnkEdit_Click(ByVal sender As Object, ByVal e As System.EventArgs)

End Sub 
```

想知道我是否遗漏了什么。我在受保护的子 lnkEdit_Click 上放置了一个断点，但是在单击图像按钮时我没有去那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:28:28.177

如果没有看到更多的页面，很难说。有几件事要检查：

*   ImageButton 在里面`<form runat="server">`吗？
*   您是否将您的页面与[ImageButton 类](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.imagebutton.aspx#Y10801)中的 VB 示例进行了比较，以查看是否遗漏了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:08:43.947

您正在使用`Data Controls`（GridView 或 DataList 等）。要响应按钮/链接按钮/图像按钮事件，您必须处理父[数据控件的](http://msdn.microsoft.com/en-us/library/bb907626.aspx)事件。

# c# - 多文件读取问题

> ID：10885332
> 
> 赞同：-1
> 
> 时间：2012-06-04T17:16:56.037
> 
> 标签：c#, asp.net, .net

我在单个文件夹中有多个名称不同的文本文件。我想一个一个地阅读所有文件 -->> * 完成第一个文件后只阅读第二个文件。读取成功后它应该从目录中删除文件。我能够读取单个文件。但是当我试图一口气读取所有文件时，它给出了错误。我如何使用线程来读取和删除文件。所有文件具有相同的格式。

我的示例代码：

```
 StreamReader objReader = new StreamReader("c:\codeo\testm.txt");
        string sLine="";
        ArrayList arrText = new ArrayList();

        while (sLine != null)
        {
            sLine = objReader.ReadLine();
            if (sLine != null)
                arrText.Add(sLine);
        }
                    objReader.Close();

        foreach (string sOutput in arrText)
            Console.WriteLine(sOutput);
        Console.ReadLine(); 
```

对于德尔：

```
 private void btnDelete_Click(object sender, EventArgs e)
             {
              if (File.Exists(fileLoc))
               {
                 File.Delete(fileLoc);
               }
             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:34:46.067

这需要进一步澄清，例如您收到什么错误。我会这样做的方法是：

```
//Store all filenames within a List<string>
public void ReadFiles(List<string> filenames)
{
    string line = null;
    foreach(string file in filenames)
    {
        //The using will manage the closing and handle exceptions safely
        using(StreamReader reader = new StreamReader(file))
        {
            while((line = reader.readLine()) != null)
            Console.WriteLine(line);
        }
        if(File.Exists(file))
            File.Delete(file);
    }
} 
```

此代码未经测试，但我相信它应该可以正常运行。这对你有帮助吗？我是根据您对文件在读取后删除的需要编写的——基于按钮的删除应该很容易实现。如果您需要更多说明或帮助发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:33:05.817

试试这个代码

```
DirectoryInfo di = new DirectoryInfo("c:\\codeo\\");
FileInfo[] fiArray = di.GetFiles();

foreach (FileInfo fi in fiArray)
{
    StreamReader objReader = new StreamReader(fi.FullName);
    string sLine = "";
    ArrayList arrText = new ArrayList();

    while (sLine != null)
    {
        sLine = objReader.ReadLine();
        if (sLine != null)
            arrText.Add(sLine);
    }
    objReader.Close();

    foreach (string sOutput in arrText)
        Console.WriteLine(sOutput);
    Console.ReadLine();

} 
```

# android - 创建并显示 ZXing ProductDatabase 的 ListView

> ID：10885336
> 
> 赞同：0
> 
> 时间：2012-06-04T17:17:04.110
> 
> 标签：android, sqlite, listview, cursor, adapter

我使用 ZXing 库创建了一个用于扫描条形码和二维码的应用程序。我还实现了一个`database`存储扫描产品的方法。我需要实现一个`listview`来显示存储的产品。有任何想法吗？

这里是类：

条码活动

```
 @Override
  public void onCreate (Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.spot_pay);
      Button addButton = (Button) findViewById (R.id.addMenuButton);
      addButton.setOnClickListener (new OnClickListener(){
          public void onClick (View v){
              startActivity(new Intent(CodiceBarreActivity.this, AggiungiCodiceActivity.class));
          }
          });
  }   
static final class ProductData {
    String barcode;
    String format;
    String title;
    BigDecimal price;
  }
} 
```

产品数据库：

```
 private SQLiteDatabase db;

    private static class ProductDatabaseHelper extends SQLiteOpenHelper {

        public ProductDatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            StringBuilder sql = new StringBuilder();

            sql.append("create table ").append(PRODUCT_TABLE)
                .append("(  ")
                .append("   _id integer primary key,")
                .append("   barcode text,")
                .append("   format text,")
                .append("   title text,")
                .append("   price currency")
                .append(")  ");

            db.execSQL(sql.toString());    

            Log.d(TAG, PRODUCT_TABLE + "table created");

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
              db.execSQL("drop table if exists " + PRODUCT_TABLE);       
              Log.d(TAG, PRODUCT_TABLE + "table dropped");
                onCreate(db);
        }
    }

    public CodiciDatabase(Context context) {
        ProductDatabaseHelper helper = new ProductDatabaseHelper(context);
        db = helper.getWritableDatabase();
    }

    public boolean insert(ProductData product) {
        ContentValues vals = new ContentValues();
        vals.put("barcode", product.barcode);
        vals.put("format", product.format);
        vals.put("title", product.title);
        vals.put("price", product.price.multiply(ONE_HUNDRED).longValue());

        return db.insert(PRODUCT_TABLE, null, vals) != -1;
    }
       } 
```

添加产品

```
 private static final int REQUEST_BARCODE = 0;
    private static final ProductData mProductData = new ProductData();

    private EditText mBarcodeEdit;
    private EditText mFormatEdit;
    private EditText mTitleEdit;
    private EditText mPriceEdit;
    private Button mScanButton;
    private Button mAddButton;
    private CodiciDatabase mProductDb;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.add_product);

        mBarcodeEdit = (EditText) findViewById(R.id.barcodeEdit);
        mFormatEdit = (EditText) findViewById(R.id.codeFormatEdit);
        mTitleEdit = (EditText) findViewById(R.id.titleEdit);
        mPriceEdit = (EditText) findViewById(R.id.priceEdit);
        mScanButton = (Button) findViewById(R.id.scanButton);
        mScanButton.setOnClickListener(this);
        mAddButton = (Button) findViewById(R.id.addButton);
        mAddButton.setOnClickListener(this);
        mProductDb = new CodiciDatabase(this); // not yet shown
    }

    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.scanButton:
            Intent intent = new Intent ("com.google.zxing.client.android.SCAN");
            intent.putExtra("SCAN_MODE", "PRODUCT_MODE");
            startActivityForResult(intent, REQUEST_BARCODE);
            break;

        case R.id.addButton:
            String barcode = mBarcodeEdit.getText().toString();
            String format = mFormatEdit.getText().toString();
            String title = mTitleEdit.getText().toString();
            String price = mPriceEdit.getText().toString();

            String errors = validateFields(barcode, format, title, price);
            if (errors.length() > 0) {
                showInfoDialog(this, "Please fix errors", errors);
            } else {
                mProductData.barcode = barcode;
                mProductData.format = format;
                mProductData.title = title;
                mProductData.price = new BigDecimal(price);

                mProductDb.insert(mProductData);
                showInfoDialog(this, "Success", "Product saved successfully");
                resetForm();
            }
            break;
        }   
    }

        }

    private void resetForm() {
        mBarcodeEdit.getText().clear();
        mFormatEdit.getText().clear();
        mTitleEdit.getText().clear();
        mPriceEdit.getText().clear();

    }

    private void showInfoDialog(Context context, String title, String information) {
        new AlertDialog.Builder (context)
        .setMessage(information)
        .setTitle(title)
        .setPositiveButton("OK", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();

            }
        }).show();  
    }

    public void onActivityResult(int requestCode, int resultCode, Intent intent){
        if (requestCode == REQUEST_BARCODE){
            if (resultCode == RESULT_OK) {
                String barcode = intent.getStringExtra("SCAN_RESULT");
                mBarcodeEdit.setText(barcode);

                String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
                mFormatEdit.setText(format);
            } else if (resultCode == RESULT_CANCELED){
                finish();
            }

        }
    }
}

    private static String validateFields(String barcode, String format, 
            String title, String price) {
            StringBuilder errors = new StringBuilder();

            if (barcode.matches("^\\s*$")) {
                errors.append("Barcode required\n");
            }

            if (format.matches("^\\s*$")) {
                errors.append("Format required\n");
            }

            if (title.matches("^\\s*$")) {
                errors.append("Title required\n");
            }

            if (!price.matches("^-?\\d+(.\\d+)?$")) {
                errors.append("Need numeric price\n");
            }

            return errors.toString();
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T02:48:07.257

您需要做的概述：

在您的数据库上运行一个查询，该查询将返回一个[光标](http://developer.android.com/reference/android/database/Cursor.html)给您。一旦你得到了，你将不得不制作一个[CursorAdapter](http://developer.android.com/reference/android/widget/CursorAdapter.html)并覆盖它的 getView() 方法来膨胀和填充行视图。之后，您可以使用传入适配器实例的 ListView.setAdapter() 方法。每当有新数据时，它将为您处理更新屏幕上的列表。

我建议不要尝试在你自己的项目中解决这个问题，而是休息一下，然后[从开发人员文档中学习这个记事本教程。](http://developer.android.com/resources/tutorials/notepad/index.html)它非常小而且简单，但是一旦你完成了，当你为你的条形码应用程序做这件事时，你将有一些示例代码可以使用。

# python - 使用 Python 禁止屏幕保护程序

> ID：10885337
> 
> 赞同：6
> 
> 时间：2012-06-04T17:17:06.147
> 
> 标签：python, linux, screensaver, xorg

在 Linux 中禁用屏幕保护程序的更好的跨 DE 方法是什么？我在这里找到[了一些东西](http://program-nix.blogspot.ro/2010/08/python-inhibiting-gnome-screensaver.html)，但它仅适用于 gnome-screensaver。我想知道是否有任何方法可以模拟击键或某些 X.Org API 来禁用屏幕保护程序激活。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T15:39:29.410

我前段时间一直在研究这个问题，最后最终使用`xdg-screensaver`了我调用的 via `subprocess`。

```
import subprocess

def suspend_screensaver():
    window_id = subprocess.Popen('xwininfo -root | grep xwininfo | cut -d" " -f4', stdout=subprocess.PIPE, shell=True).stdout.read().strip()

    #run xdg-screensaver on root window
    subprocess.call(['xdg-screensaver', 'suspend', window_id])

def resume_screensaver(window_id):
    subprocess.Popen('xdg-screensaver resume ' + window_id, shell=True) 
```

这并不理想，但显然没有其他解决方案不涉及与特定于 DE 的东西（如`dbus`or ）混在一起`gnome-screensaver-command`。

我真的不喜欢打电话`xwininfo`并希望有一种更清洁的方式，但到目前为止找不到更好的方法。该方法的另一个问题`xwininfo`是它使用根窗口的 id 而不是应用程序窗口。使用应用程序窗口 id 而不是根窗口将不再需要该`resume_screensaver`方法，因为它会在窗口被销毁后立即恢复。

如果你想在这里模拟击键，我已经使用了一段时间的一个简单的 bash 脚本。它确实需要`xdotool`单独安装。

```
#!/bin/bash
while : 
do
   sleep 200
   nice -n 1 xdotool key shift
   echo .
done 
```

* * *

## 更新

在使用了上面的 python 解决方案一年多之后，发现它偶尔会创建僵尸进程和/或太多的实例`xdg-screensaver`，所以在四处挖掘之后，我找到了一个更简单的替代方案，它是***Gnome 特定的***，但即使在一个非 Gnome DE (XFCE)，因为许多基于 GTK 的应用程序都需要核心 Gnome 库，即使您没有 Gnome 桌面也是如此。

```
import subprocess

def suspend_screensaver():
    'suspend linux screensaver'
    proc = subprocess.Popen('gsettings set org.gnome.desktop.screensaver idle-activation-enabled false', shell=True)
    proc.wait()

def resume_screensaver():
    'resume linux screensaver'
    proc = subprocess.Popen('gsettings set org.gnome.desktop.screensaver idle-activation-enabled true', shell=True)
    proc.wait() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-22T06:34:02.470

我知道这个问题很老，但有一个更现代的答案：现在大多数 Linux 上的 DE 都使用 dbus 进行通信，你可以使用这个：

**在 shell 中，使用 kde 工具：**

```
qdbus org.freedesktop.ScreenSaver /ScreenSaver org.freedesktop.ScreenSaver.Inhibit "myapps" "because I want it" 
```

这个 dbus 调用将返回一个 cookie（一个数字），这将需要取消抑制屏幕保护程序：

```
qdbus org.freedesktop.ScreenSaver /ScreenSaver org.freedesktop.ScreenSaver.UnInhibit $COOKIE 
```

在python中，它将类似于

```
import dbus

bus = dbus.SessionBus()
saver = bus.get_object('org.freedesktop.ScreenSaver', '/ScreenSaver')
saver_interface = dbus.Interface(saver, dbus_interface='org.freedesktop.ScreenSaver')

# now we can inhibit the screensaver
cookie=saver_interface.Inhibit("myapps", "because I want it")

# we can also restore it
saver_interface.UnInhibit(cookie) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-27T06:48:41.027

## 讨论

TLDR；没有任何跨 DE 方法可以使用纯 Python 来禁止屏幕保护程序。但是，该问题还询问了有关使用 Linux 执行此操作的问题（可能来自 shell）。需要明确的是，在 Linux 中没有任何特别好的跨 DE 方法可以做到这一点，但至少有潜力。您可能想使用 hackish `xdg-screensaver`shell 脚本。

这是我花了一些时间研究的话题。我对那里的任何解决方案都不满意，所以在使用了一些自制工具之后，我最终修改了咖啡因项目以满足我的需求，并且从那以后一直在愉快地使用它。我会总结一下我在这个过程中学到的一些东西。

如果您不熟悉它，我建议您查看咖啡因（Launchpad PPA @ [https://launchpad.net/~caffeine-developers/+archive/ubuntu/ppa](https://launchpad.net/~caffeine-developers/+archive/ubuntu/ppa)）。

咖啡因项目*主要*由以下脚本组成：`caffeine-screensaver` `caffeine` `caffeine-indicator` `caffeinate`

`caffeine`并且`caffeine-indicator`是用 Python 3 编写的，而`caffeine-screensaver`它是`xdg-screensaver`用 shell 脚本编写的。

**ccpizza**答案的前半部分很棒，因为它是跨 DE 并且与咖啡因的实现非常相似。我对 xdg-screensaver 僵尸进程没有任何问题，但我确信如果我更好地了解用例或它发生的条件，它可以得到补救。仅供参考，运行`xdg-screensaver suspend ROOT_WINDOW_ID`将使跟踪进程后台运行并使其无限期运行（直到恢复）。

如果您对实现真正的跨 DE 解决方案感兴趣，那么我强烈建议您检查上述`xdg-screensaver`/ `caffeine-screensaver`。[LightsOn](https://github.com/iye/lightsOn/network)的许多分支也已经成熟。

`xdg-screensaver`检测桌面环境（KDE、Gnome、XFCE、LXDE、xscreensaver 或 gnome-screensaver）并采取相应措施。对于该`xdg-screensaver suspend`命令，它会运行`xset -dpms`以禁用 DPMS、特定于 DE 的命令，然后在其持续时间内监视提供的窗口 ID。如果窗口消失，则运行 resume 命令并退出 xdg-screensaver。该`xdg-screensaver resume`命令由`xset +dpms`（仅当最初启用 DPMS 时）然后是特定于 DE 的命令组成。

请注意，如果 xprop 可用，xdg-screensaver 只会跟踪提供的窗口 ID（它是 x11-utils 的一部分，因此应该是）。要跟踪窗口，它会在后台`xprop -id WINDOW_ID -spy`监视窗口的更改。它将前面提到的进程的 PID 和窗口 ID 一起存储在一个锁定文件中，以便在挂起和恢复时引用。DPMS 的原始状态在单独的锁定文件中引用。锁定文件应确保没有重复的进程。

该脚本完全是一团糟，所以我很同情任何不幸使用它的人，但我没有遇到任何问题。你可能不想重新发明轮子，所以如果你正在为公众消费创造一些东西，那么我建议你选择它。如果您正在创建供个人使用的东西，那么只需挖掘它并使用特定于您的 DE 的命令。

**ccpizza**建议使用`subprocess.Popen('xwininfo -root | grep xwininfo | cut -d" " -f4', stdout=subprocess.PIPE, shell=True).stdout.read().strip()`获取桌面的根窗口 ID。使用桌面的根窗口 ID`xdg-screensaver suspend`将无限期禁用桌面的屏幕保护程序。使用特定窗口的 ID 将在窗口期间禁用桌面的屏幕保护程序。

* * *

## 外壳脚本

要确定**活动窗口 ID**，您可以运行以下命令：

```
xprop -root _NET_ACTIVE_WINDOW | awk -F '[ ,]' '{print $5}' 
```

要确定**根窗口 ID**，您可以运行以下命令：

```
xwininfo -root | awk '/^xwininfo: Window id: / {print $4}' 
```

要确定**屏幕保护程序超时**，您可以运行以下命令：

```
xset q | awk '/^  timeout: / {print $2}' 
```

*注意：如果屏幕保护程序被禁用，结果将为 0*

要确定**DPMS 是启用还是禁用**，您可以运行以下命令：

```
xset q | awk '/^  DPMS is / {print tolower($3)}' 
```

* * *

## Python 脚本

也有纯 Python 选项。该`Xlib`模块非常适合这一点，原样`ewmh`（它是 Xlib 的包装器）。

**要使用 ewmh**确定活动窗口 ID ：

```
active_id = hex(ewmh.EWMH().getActiveWindow().id) 
```

**要使用 ewmh**确定根窗口 ID ：

```
root_id = hex(ewmh.EWMH().root.id) 
```

**要使用 Xlib**确定活动窗口 ID ：

```
from Xlib.display import Display
from Xlib.X import AnyPropertyType

active_id = hex(Display().screen().root.get_full_property(Display().get_atom('_NET_ACTIVE_WINDOW'), AnyPropertyType).value[0]) 
```

要使用 Xlib 确定**根窗口 ID**：

```
from Xlib.display import Display
root_id = hex(Display().screen().root.id) 
```

**要使用 Xlib**确定屏幕保护程序超时：

```
from Xlib.display import Display
timeout = Display().get_screen_saver().timeout 
```

# php - 确定一个 NULL 值数组是否被认为是空的

> ID：10885340
> 
> 赞同：1
> 
> 时间：2012-06-04T17:17:39.317
> 
> 标签：php

我正在构建一个数组以确定我是否需要采取行动。我正在执行一个查询。该表有一个`sent_date`字段来确定电子邮件是否已发送给用户。将其发送给用户后，该`sent_date`字段将填充`getdate()`. 这是我的构建方式：

```
$sent_date_sql = "
    select ind_id, sent_date from profileemail
";

$results = dbExec($sent_date_sql); 
```

然后我构建我的数组：

```
foreach ($results as $r){
    array_push($sent_date,$r['sent_date']);
    $query_count = count($results);
} 
```

这一切都在光荣地工作。我的问题是当我去检查`sent_date`阵列时。在该脚本运行的月份中的第一次，所有`sent_date`值都为 NULL。所以我的数组看起来像：

```
array(228) {
  [0]=>
  NULL
  [1]=>
  NULL
  [2]=>
  NULL
  [3]=>
  NULL
  [4]=>
  NULL 
```

...ETC。

现在我将尝试评估`$sent_date`：

```
if(empty($sent_date)){ 
```

我的`empty`条件永远不会命中，因为数组的值都是 NULL。有没有其他方法可以实现我想要做的事情？我应该遍历我的`$sent_date`数组并评估每个值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:21:07.233

```
if (!array_filter($sent_date)) 
```

`array_filter`从数组中删除所有“空”元素。如果数组中的所有元素都是“空的”，则结果是一个没有元素的数组 ( `array()`)。一个空数组的计算结果为`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:30:34.420

您可以通过两种方式跟进。

1.  如第一个答案所述，您可以使用[array_filter](http://php.net/manual/en/function.array-filter.php)。它从数组中排除所有负、空、空值。

2.  修改您的查询，这样您就不需要在 php 中工作太多。

    ```
    $sent_date_sql = "select ind_id, sent_date from profileemail where sent_date != NULL or sent_Date != '' ";

    $results = dbExec($sent_date_sql); 
    ```

# selenium - Selenium IDE 脚本中的 verifytext 在 IE 中失败，即使它应该通过

> ID：10885341
> 
> 赞同：1
> 
> 时间：2012-06-04T17:17:40.990
> 
> 标签：selenium, selenium-rc, selenium-ide

在 -htmlSuite 模式下使用 Selenium Server 录制并播放了 Selenium IDE 脚本。应该输入用户名、密码和域，然后单击登录。登录后，在一个角落，它应该显示用户名@域。我有一个 verifyText 。当我在 Firefox 中运行脚本时，它工作正常，但在 IE 中，它一直失败 - 给我一条错误消息实际值“用户名@域”与“用户名@域”不匹配。我也尝试过断言和同样的事情。这是 Selenium 中的错误还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:30:25.210

您应该尝试使用或命令[`waitForText`](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html#storeText)，具体取决于您的具体需要。[`waitForElementPresent`](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html#storeElementPresent)[`waitForTextPresent`](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html#storeTextPresent)

原因是通常，当页面加载时/之后由脚本创建任何文本时，Selenium 不知道它 - 它不可能等待每个脚本完成，因为有很多脚本永远不会完成并永远运行。因此，您需要等待特定元素出现，然后才能断言它们。

# jquery - TextExt jQuery 插件和隐藏字段值

> ID：10885348
> 
> 赞同：1
> 
> 时间：2012-06-04T17:18:01.150
> 
> 标签：jquery, jquery-plugins, jquery-textext

这个周末我一直在玩[http://textextjs.com/](http://textextjs.com/)，因为它似乎是一个非常可靠的自动完成插件，具有将来可能有用的附加功能（如标记）。我尝试在一个当前使用我自己的自动完成功能的位置实现这一点，但是这个插件对我来说有一个关键问题，我还没有找到一个示例/解决方案。

我正在使用以下数据结构：

```
[
    {
        "id": "1",
        "title": "Active",
        //etc....
    },
    {
        "id": "2",
        "title": "Inactive",
        //etc....
    },
    //etc...
] 
```

现在我正在使用 ajax/autocomplete 插件（尽管我最终需要为标签插件提供这个功能）。我有一个自定义的 ItemManager，它允许这个数据这个数据工作得很好，但这是我的问题。我希望能够将用户看到并与之交互的输入设置为 object.title，但是我希望将与表单一起提交的隐藏输入设置为 object.id。使用自动完成/标签插件时如何获得这种类型的功能？

我试图查看 onGetDataForm 因为它似乎需要创建一个实现它的插件（尽管对我来说，必须创建一个插件只是为了能够设置与可见的一个）但即使是这种情况，我也不知道如何访问自动完成中选择的项目的完整数据对象，以便能够将两个字段设置为不同。对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T00:06:09.807

我不认为 TextExt.js 目前支持这一点，但它应该很容易实现。在我解释之前，请在 GitHub 中提交一个问题，以便最终解决（如果您还没有）。

看看这个功能[https://github.com/alexgorbatchev/jquery-textext/blob/master/src/js/textext.plugin.autocomplete.js#L671](https://github.com/alexgorbatchev/jquery-textext/blob/master/src/js/textext.plugin.autocomplete.js#L671)

```
p.onGetFormData = function(e, data, keyCode)
{
    var self       = this,
        val        = self.val(),
        inputValue = val,
        formValue  = val
        ;
    data[100] = self.formDataObject(inputValue, formValue);
}; 
```

如您所见，它直接从输入框中返回值。您可以在这里做的是检查您的数据数组 ( `self._suggestions`)，如果到目前为止用户键入的内容与某些内容匹配。如果是这种情况，您可以使用匹配的项目并返回`id`字段。

这是否回答你的问题？

# c# - 在 ListView 中格式化文本？

> ID：10885357
> 
> 赞同：1
> 
> 时间：2012-06-04T17:18:53.900
> 
> 标签：c#, listview, formatting, listviewitem

我正在创建一个小应用程序，它将读取、解析和格式化 lua 脚本的内容 - 具体来说，是由“大象”聊天记录插件创建*的魔兽世界的**SavedVariables*文件。我想到的原型将生成一个实例数组，显示时间戳、玩家姓名、消息发布到的频道以及发布的消息。*`ListViewItem`*

 *我想让聊天消息像在游戏中一样呈现：游戏在他们的角色类别之后为聊天中“说话”的人的名字涂上颜色（例如，流氓的名字是黄色的，法师的名字是浅蓝色的） ，但是当涉及到`ListViewItem`and时`ListViewSubItem`，着色文本似乎是一个孤注一掷的交易。

是否可以添加功能`ListView`以将格式（或仅颜色）应用于属性中的文本`ListViewItem`或`ListViewSubItem`基于`Text`属性中的标记？

编辑：我在问是否可以通过派生类中的继承/多态的魔力将文本格式添加到 ListViewItem，如果可以，最好的方法是什么（工作量、代码安全性等） ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:19:43.130

从*Windows 窗体*使用的角度来看，您可以手动呈现项目。但是，您还应该考虑以下情况：当文本超出`Control`/ 列的边界时，应该如何呈现文本？

这只需要你继承自`ListView`; 您可以使用以下方法渲染每个项目：

```
protected override void OnDrawItem(DrawListViewItemEventArgs e) 
```

当然，`OwnerDraw`必须设置为`true`。`DrawListViewItemEventArgs`包含需要渲染`Graphics`的文本和应该用来渲染文本的实例。然后，您可以根据您的标记约定使用`DrawString(string s, Font font, Brush brush, float x, float y)`来呈现文本的每个部分。

如果您不介意 GPL，[`ObjectListView`](http://objectlistview.sourceforge.net)它确实提供了更多格式选项，但它可能不像您需要的那样灵活。

由于 a`RichTextBox`允许灵活的文本格式，我想知道它是否可以以某种方式用作渲染器......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:39:23.117

我不完全确定这会起作用，我无法真正测试它，但它可能值得一试

```
<ListViewItem>
   <ContentPresenter>
       <TextBlock>
          <Run x:Name="playerName" Foreground="Blue" Text="NAME"/>
          <Run x:Name="etc" Foreground="Black" Text="..."/>
        </TextBlock>
     </ContentPresenter>
 </ListViewItem> 
```

这里的基本思想是，在列表框项目中，您有一个我认为包含文本块的内容演示者。在此您可以设置单独的运行标签（单独的文本位），并且您可以设置不同的格式。当为运行标签分配名称时，您还应该能够以编程方式设置文本*

# android - facebook登录后调用新活动| 安卓

> ID：10885360
> 
> 赞同：2
> 
> 时间：2012-06-04T17:19:23.607
> 
> 标签：android, facebook

我的 android 应用程序中有 2 个活动。在第一个上，我要求用户使用 facebook 登录。用户登录后，我收集用户数据，例如电子邮件、姓名并调用一个新活动，将这些参数传递给它。以下是我的 facebook 授权方法：

```
 public void loginFB(final View v)
    {           
        facebook.authorize(this, new String[] { "email", "read_stream" }, new DialogListener() {

            @Override
            public void onComplete(Bundle values) {
                this.getlogininfo(v);
            }
            private void getlogininfo(View v) {
                // TODO Auto-generated method stub
                logininfo(v);                   
            }

            @Override
            public void onFacebookError(FacebookError error) {}

            @Override
            public void onError(DialogError e) {}

            @Override
            public void onCancel() {}
     });            
    } 
```

下面是我的`logininfo()` 方法：

```
public void logininfo(final View v){
    mAsyncRunner.request("me", new RequestListener(){    
        @Override
        public void onComplete(String response, Object state) {
            try{
                Log.d("Profile", response.toString());
                JSONObject json = Util.parseJson(response);
                final String fname1 = json.getString("first_name");
                final String lname1 = json.getString("last_name");
                final String email = json.getString("email");

                Intent fbLogged = new Intent();
                Bundle passData = new Bundle();
                passData.putString("fname", fname1);
                passData.putString("lname", lname1);
                passData.putString("email", email);
                fbLogged.putExtras(passData);
                fbLogged.setClass(v.getContext(), RequestFb.class);
                startActivity(fbLogged);    
            }
            catch(JSONException e){
                Log.w("This", "eror");
            }               
        }    
        @Override
        public void onIOException(IOException e, Object state) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onFileNotFoundException(FileNotFoundException e,
                Object state) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onMalformedURLException(MalformedURLException e,
                Object state) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onFacebookError(FacebookError e, Object state) {
            // TODO Auto-generated method stub

        }           
    });
  } 
```

所以，我的新活动是从`OnComplete()`获取用户数据开始。

这很好用，但是当用户单击登录并使用 facebook 登录时，第一个活动页面会在屏幕上保留几秒钟，然后调用下一个活动。有一个滞后。我该如何解决滞后问题？当用户点击登录并授权登录后，应直接将用户带到第二个活动。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:56:25.560

这很简单，您正在一个新线程中运行 fb 图请求（使用*AsyncRunner*），但只有当该请求完成时，您才开始新的活动，这就是您得到“滞后”的原因。

您应该在新活动而不是第一个活动中运行图形请求，例如：

```
public void loginFB(final View v) {
    facebook.authorize(this, new String[] { "email", "read_stream" }, new DialogListener() {
        @Override
        public void onComplete(Bundle values) {
            Intent fbLogged = new Intent(v.getContext(), RequestFb.class);
            startActivity(fbLogged);
        }

        @Override
        public void onFacebookError(FacebookError error) {}

        @Override
        public void onError(DialogError e) {}

        @Override
        public void onCancel() {}
    });
}

public class RequestFb extend Activity {
    protected void onCreate(Bundle savedInstanceState) {
        Facebook facebook = new Facebook("YOUR_APP_ID");
        AsyncFacebookRunner asyncRunner = new AsyncFacebookRunner(facebook);

        asyncRunner.request("me", new RequestListener(){
            try {
                final JSONObject json = Util.parseJson(response);
                final String fname1 = json.getString("first_name");
                final String lname1 = json.getString("last_name");
                final String email = json.getString("email");

                runOnUiThread(new Runnable() {
                    public void run() {
                        // use the data
                    }
                });
            }
            catch(JSONException e) {
                Log.w("This", "eror");
            }
        });

    }
} 
```

# perl - 如何在 perl 中的对象中制作“通用”getter 和 setter？

> ID：10885364
> 
> 赞同：3
> 
> 时间：2012-06-04T17:19:34.380
> 
> 标签：perl, setter, getter, getter-setter, accessor

如何创建一个 setter 方法和一个 getter 方法来管理对对象字段的访问？新的子例程如下所示：

```
sub new {
    my $class = shift;
    my $self = {@_};        
    bless($self,$class); # turns this into an object
} 
```

新对象的创建如下所示：

```
$foo = Package::new("Package", 
    "bar", $currentBar,
    "baz", $currentBaz,
    ); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T20:48:19.343

这不是一个好主意。

Perl 使用`use strict;`来处理这样的问题：

```
 $employee_name = "Bob";

 print "The name of the employee is $employeeName\n"; 
```

输入错误的变量名是一个常见问题。使用`use strict;`强制你声明你的变量，所以这样的错误可以在编译时被捕获。

但是，散列键和散列引用删除了这种保护。因此：

```
my $employee[0] = {}

$employee[0]->{NAME} = "Bob";

print "The name of the employee is " . $employee[0]->{name} . "\n"; 
```

当你开始谈论复杂的数据结构时，使用对象的原因之一是为了防止这些类型的错误：

```
 my $employee = Employee->new;
 $employee->name("Bob");
 print "The name of the employee is " . $employee->Name . "\n"; 
```

这个错误会被捕获，因为方法名是`name`而不是`Name`。

允许用户随意创建自己的方法会消除我们通过使用对象获得的保护：

```
 my $employee = Employee->new;
 $employee->name("Bob");    #Automatic Setter/Getter
 print "The name of the employee is " . $employee->Name . "\n";  #Automatic Setter/Getter 
```

现在，由于自动设置器和获取器，我们无法捕获错误，因为用户名的任何方法都是有效的——即使该用户犯了错误。

事实上，我设置了我的对象，所以我的对象不一定知道它的结构。`foo`使用方法和观察以下类`bar`：

```
 sub new {
    my $class = shift;
    my $foo   = shift;
    my $bar   = shift;

    my $self = {};
    bless $self, $class;

    $self->foo($foo);
    $self->bar($bar);
    return $self;

}

sub foo {
    my $self = shift;
    my $foo  = shift;

    my $method_key = "FOO_FOO_FOO_BARRU";

    if (defined $foo) {
        $self->{$method_key} = $foo;
    }
    return $self->{$method_key};
 }

sub bar {
    my $self = shift;
    my $bar  = shift;

    my $method_key = "BAR_BAR_BAR_BANNEL";

    if (defined $bar) {
        $self->{$method_key} = $bar;
    }
    return $self->{$method_key};
} 
```

我可以在我的构造函数`foo`中设置类值。`bar`但是，我的构造函数不知道这些值是如何存储的。它只是创建对象并将其传递给我的 getter/setter 方法。我的两种方法也不知道它们如何存储彼此的值。这就是为什么我可以为我的方法的哈希键取如此疯狂的名称，因为这仅在方法中可用，而在其他任何地方都没有。

相反，我的方法`foo`和`bar`都是 setter 和 getter。如果我给他们一个`foo`or的值`bar`，则该值被设置。否则，我只是返回当前值。

但是，我相信您已经知道所有这些，并且会坚持必须这样做。很好...

处理您想要做的事情的一种方法是创建一个[AUTOLOAD](http://perldoc.perl.org/perlsub.html#Autoloading)子例程。当没有同名的其他方法子例程时，自动调用 AUTOLOAD 子例程。`$AUTOLOAD`包含调用的类和方法。您可以使用它来设置自己的值。

这是我的测试程序。我使用两种方法`bar`和`foo`，但我可以使用任何我喜欢的方法，它仍然可以正常工作

一项更改是，我在构造函数中使用参数散列而不是值列表。*除了这被认为是现代*方式之外没有真正的区别，我只想与其他人的做法保持一致。

另请注意，我将方法名称标准化为全小写。这样`$object->Foo`，`$object->foo`和`$object-FOO`都是相同的方法。这样，我至少消除了大小写错误。

```
use strict;
use warnings;
use feature qw(say);
use Data::Dumper;

my $object = Foo->new({ -bar => "BAR_BAR",
        -foo => "FOO_FOO",
    }
);

say "Foo: " . $object->foo;
say "Bar: " . $object->bar;

$object->bar("barfu");
say "Bar: " . $object->bar;

say Dumper $object;

package Foo;

    sub new {
    my $class =      shift;
    my $param_ref  = shift;

    my $self = {};
    bless $self, $class;

    foreach my $key (keys %{$param_ref}) {

        # May or may not be a leading dash or dashes: Remove them
        (my $method = $key) =~ s/^-+//;

        $self->{$method} = $param_ref->{$key};
    }
    return $self;
}

sub AUTOLOAD {
    my $self  = shift;
    my $value = shift;

    our $AUTOLOAD;

    ( my $method = lc $AUTOLOAD ) =~ s/.*:://;

    if ($value) {
        $self->{$method} = $value;
    }
    return $self->{$method};
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T18:39:57.813

像这样的东西...

```
sub get {
    my $self = shift;
    my $field = shift;
    return $self->{$field};
}

sub set {
    my $self = shift;
    my $field = shift;
    $self->{$field} = shift;
} 
```

...可以写

```
$obj->set(foo => 'my foo value');
print $obj->get('foo'); 
```

但是现在，只使用[Moose](http://p3rl.org/Moose)是很常见的。

# c# - 如何运行应用程序而不显示控制台？

> ID：10885365
> 
> 赞同：1
> 
> 时间：2012-06-04T17:19:43.033
> 
> 标签：c#

我有一个控制台应用程序，我想从另一个应用程序运行它。但是当我从代码调用它时——调用我使用 ActiveXObject 的程序——它会显示控制台。如何让它不显示控制台？我的意思是，该程序有效，但显示了控制台。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:20:44.253

如果您将应用程序设为*Windows 应用程序*而不是*控制台应用程序*，它将不会显示或打开（或使用）控制台。您的代码可以保持不变 - 应用程序仍然可以运行（无需创建`Form`or `Window`）。

话虽如此，如果您控制“其他”应用程序，您可能需要考虑制作一个类库而不是单独的应用程序。这将允许您只在库中包含和运行代码，而无需启动单独的进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:20:57.740

您可以将其创建为带有隐藏窗口的 Windows 窗体应用程序。这只是 Reed Copsey 指出的一种可能性，我使用过一次，因为我需要处理一些特定的窗口消息。

# php - 如何选择两行的连接就像输入的项目

> ID：10885368
> 
> 赞同：0
> 
> 时间：2012-06-04T17:20:01.767
> 
> 标签：php, mysql, concatenation

我有mysql表，用户：（id，first_name，last_name，....）

我想做这样的伪查询

```
SELECT * FROM users WHERE first_name.' '.last_name = 'john doe' LIMIT 10") 
```

我想这样做，因为我在拆分字符串时遇到了很多麻烦（然后我不知道用户输入的顺序是什么'

这是我目前的，不是很好

```
$phrase = explode(' ',$term);
$last_name = '';
if($phrase[1] != '')
    $last_name= " OR last_name LIKE '%".$phrase[1]."%'";
$qstring = "SELECT usuarios.first_name,usuarios.last_name,
                    usuarios.id as id
            FROM usuarios
            WHERE first_name LIKE '%".$phrase[0]."%' OR last_name LIKE '%".$phrase[0]."%' $last_name LIMIT 5"; 
```

任何实现这一点的建议（通过在查询中连接或在 php 中拆分）都将非常受欢迎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:21:55.003

您可以使用以下命令在 MySQL 查询中连接[`CONCAT`](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_concat)：

```
SELECT * FROM users WHERE CONCAT(first_name,' ',last_name) = 'john doe' LIMIT 10 
```

在您的代码中，这将变为：

```
SELECT * FROM usuarios WHERE CONCAT(first_name,' ',last_name) LIKE '%{$phrase[0]}%' LIMIT 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:23:13.650

像这样的东西？

```
SELECT first_name, last_name, id
FROM usuarios
WHERE CONCAT(first_name, last_name) LIKE '%$phrase[0]%' LIMIT 5 
```

# javascript - jquery菜单幻灯片错误

> ID：10885369
> 
> 赞同：0
> 
> 时间：2012-06-04T17:20:02.040
> 
> 标签：javascript, jquery, menu, settimeout

我目前正在制作一个包含菜单导航的网站，该菜单导航与在[fotopunch.com](http://www.fotopunch.com)上找到的几乎相同，而不是向下指向它。无论如何，我使用 jquery/javascript 为菜单编写了代码，它可以工作，但是在 fotopunch 网站上也出现了一个小错误。**当您将光标从一个菜单项移动到另一个菜单项并反复返回时，它会暂时弄乱显示。有没有办法来解决这个问题？**我将包含我的 javascript 文件的一部分，这样您就可以看到我为每个菜单项做了什么。

```
$("div#menu .reps").hover(function() {
    //if the current slide is not reps
    if(current_slide != "reps"){
    //move the arrow to the corresponding position for the reps slide 
        $(".arrow").animate({"left":"135px"});//move the arrow
        //(test which slide it is.)
        if(current_slide == "clients"){
            //fade out & hide the current slide
            $(".clients_display").fadeOut().hide();//hide the current slide
            //show the reps slide & fade in
            $(".reps_display").fadeIn().show();//show the slide
            //the current slide is the reps slide
            current_slide = "reps";
        }
        else if(current_slide == "services"){
            //fade out & hide the current slide
            $(".services_display").fadeOut().hide();//hide the current slide
            //show the reps slide & fade in
            $(".reps_display").fadeIn().show();//show the slide
            //the current slide is the reps slide
            current_slide = "reps";
        }
        else{
            //fade out & hide the current slide
            $(".training_display").fadeOut().hide();//hide the current slide
            //show the reps slide & fade in
            $(".reps_display").fadeIn().show();//show the slide
            //the current slide is the reps slide
            current_slide = "reps";
        }
    }
}); 
```

我为每个菜单项执行此操作（有 4 个）。我认为问题在于当它淡出并淡入时，因为如果它试图同时做太多事情，它会同时显示 2 个菜单 div。我尝试添加超时但不成功。**解决此错误的最佳方法是什么？**它足够小，不是一个重要的优先事项，但让它更好地工作会很好。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:28:57.283

```
if(current_slide == "clients"){

            $(".clients_display")stop(true, true).fadeOut().hide();

            $(".reps_display").stop(true, true).fadeIn().show();

            current_slide = "reps";

        } else if(current_slide == "services"){

            $(".services_display").stop(true, true).fadeOut().hide();

            $(".reps_display").stop(true, true).fadeIn().show();

            current_slide = "reps";
        } else{

            $(".training_display").stop(true, true).fadeOut().hide();//hide the current slide

            $(".reps_display").stop(true, true).fadeIn().show();//show the slide

         } 
```

# android - 使用 maven 为不同的客户构建多个 .apk 工件

> ID：10885370
> 
> 赞同：0
> 
> 时间：2012-06-04T17:20:05.423
> 
> 标签：android, maven, continuous-integration, apk

我必须为客户设置一个 android maven 构建，它以前是基于 ant 的。

基本应用程序是一个白标实现，该应用程序分发给多个第三方客户。这些客户版本中的每一个都使用相同的源代码和一组共享资源。但是每个客户也有一些特定于他们公司的资源（常量、资产等）。

我的 android 项目的结构如下所示。我只包括了相关的文件/文件夹，结构仍然来自 ant 构建：

```
App
|--src
|--res
|--res-customer1
|--res-customer2
|--pom.xml 
```

这意味着我必须从具有不同资源的同一源构建多个 .apk 工件。做到这一点的最佳方法是什么？

我尝试的第一件事是在我的主要项目 pom 中为每个客户使用不同的配置文件。然后我编写了一个 shell 脚本来执行所有 maven 构建（每个客户 1 个）。

然后我想出在我的主项目中只使用一个发布配置文件，并通过命令行传递客户特定的属性。属性通过 shell 脚本传递，类似于我的第一种方法。

但我对此并不满意，所以我考虑使用多个模块。每位客户一份。但我的问题是，如何在不将主项目中的源代码复制到所有模块的情况下从同一源代码构建它们？还是我必须为每个客户设置一个 android 项目并将我的主要项目称为 apklib？这会合并共享资源和客户特定资源吗？

有没有做这样的事情的最佳实践？

任何其他方法也非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:04:07.360

对于很小的差异，仅使用配置文件和一些不同的属性与资源过滤器就足够了。然而，配置文件在 Maven 世界中是一种糟糕的模式，并且很难使用。

您为每个客户使用单独的模块并让基础应用程序成为 apklib 的预感是正确的。我知道有几个人在 maven android 开发人员列表上报告过，这是他们使用并为他们工作的东西。我个人也会在你的情况下使用这种方法。

[一般来说，我建议在邮件列表](https://groups.google.com/forum/?hl=en&fromgroups#!forum/maven-android-developers)中询问或至少提及这个问题。

# xcode - xcode 4.2的奇怪行为

> ID：10885371
> 
> 赞同：0
> 
> 时间：2012-06-04T17:20:12.347
> 
> 标签：xcode, character, simulator

奇怪而有趣的想法正在发生

代码：

```
-(void)saveFile
{    
NSFileManager *fileMng = [NSFileManager defaultManager];
if(![fileMng fileExistsAtPath:self.appFilesPath])
{
    NSError *error = nil;
    BOOL success = [fileMng createDirectoryAtPath:self.appFilesPath withIntermediateDirectories:YES attributes:nil error:&error];
    if(!success)
    {
        NSLog([error localizedDescription]);
    }
}
NSLog([NSString stringWithFormat:@"%@",self.appFilesPath]);
[fileMng createFileAtPath:self.fileFullPath contents:self.fileData attributes:nil];
[self.fileData writeToFile:self.fileFullPath atomically:YES];
} 
```

这条线

```
NSLog([NSString stringWithFormat:@"%@",self.appFilesPath]); 
```

应该给我这样的东西

```
file://localhost/Users/user/Library/Application%20Support/iPhone%20Simulator/5.0/Applications/BF35B859-514B-45AA-8E3A-B2CE65BD82B6/Documents/AppFiles 
```

目录 AppFiles 应该在 ../Documents/ 目录下创建，但它不存在...

而nslog给了我这样的东西：file://localhost/Users/user/Library/Application瑳楲杮楗桴潆浲瑡：敲敬獡e摡䕤瑮楲獥墙浯楄潩虑祲：扯敪汲祥：汏氽獩拋摮歪汃汃獡㩳氭氭湥瑧歲歲氽氽氽潦㩴棲祥：敲敲潭敶描湪整揲祥：敧哙敌浔浔噬杀敌籴浥牑牑扤扤扤䈄挥灯扏扤扤䈄挀灯扏扤扤䈄挥灯扏扤扤䈄挀灯扏扤扤䈄挀灯摡扤祑䈄䍥㩮湉汤e毕摮敬摉湥楴楦牥碗䕳留污洁瑓楲杮：桳牡摥潃普杩牵瑡潩n潣湵牴䑹晥畡瑬潆..这个灌木的几屏..帴㽻椽絩8策㴿楩}ㅶ䀶㨰帴㽻椽絩椸㈱䀀䜢佅楐数偬楯瑮"㽻搽絤䀸㨰4㉶䀴㨰笴㴿摤㡽䀀倢剂焕瑳牥"ㅶ䀶㨰⌴匴帶䀶㨰⌴ ㈱伀摥扥敬䕇玱摥扥敬䕇玱摥扥敬䕇玱捥扥敬敓维疯牴牐砚䑹汥来瑡㹥"㈱佗㑤㨰笴㴤㑤㨰㉤洤㑤㘽㉤洤㑤㘱㉤洤㑤丽㘱协㉤洤㑤ㅩ2㉶䀸㈥ㅩ2㉶䀸㈴临丱㉶䀸㵤ㅩ2㉶䀸㵤丄ㅶ㐲淤㈱぀㐺癞8ㅀ䀣㨰帴㡶ㅣ2策硟捰损汤敮椩彮㵳}ㅀ䍟㨰䀴彻彻䍟剆湵潌罽㈱帀䍟剆湵潌紽䀸灯4策彟䙃畒䱮浔㵰}癞䀸㨰4ㅀ䀲㨰帴㡶淤〲぀㐺㡀ㅀ䤲㘱䀀㰢华慃档䑥汥来瑤㹥"㉀䀸㨰䠴笸㴿摤ㅽ2㽻搽぀㐺㽻搽絤常4㽻∽慬楴王敤搢搢楧王敤搢}支持/iPhone Š暴搢模拟器/5.0/Applications/CAF90A92-5B85-4FC0-8482-3702C3E98F8D/Documents/AppFiles

当我第二次运行代码时，跳过了 if 条件，但是 ../Documents/ 目录仍然是空的

来瑡㹥"㉀䀸 - 我的意思是wtf，第一次这样，重启xcode，mac没用，模拟器都设置为英文，其他项目也出现，键盘设置蚂蚁国有化看起来还可以，所以真的我不知道出了什么问题

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:28:09.563

你不能只是`NSLog`一个字符串。它采用的字符串参数是一种`printf`特殊的格式（如 in ）。在您的情况下，它正在读取随机内存，因为`%20S`意味着将下一个参数解释为指向以空字符结尾的宽字符字符串的指针，并将其在 20 列中右对齐打印；它们是中文的，因为大部分 Unicode 都被中文象形文字占据了。

这是正确的方法：

```
NSLog(@"%@", self.appFilesPath); 
```

# asp.net - Web.Config 301 重定向

> ID：10885374
> 
> 赞同：0
> 
> 时间：2012-06-04T17:20:31.710
> 
> 标签：asp.net, redirect, web-config

我正在尝试将特定页面从旧域重定向到新域上的特定页面。URL 如下所示：

[http://blog.mysite.com/post/2012/05/hungry.aspx](http://blog.mysite.com/post/2012/05/hungry.aspx)

至

[http://mynewsite.com/hungry.aspx](http://mynewsite.com/hungry.aspx)

我查看了 Web.Config 文件以进行此更改，但是以下代码不起作用：

```
<location path="post/2012/05/hungry.aspx">
    <system.webServer>
      <httpRedirect enabled="true" destination="http://mynewsite.com/hungry.aspx" httpResponseStatus="Permanent" />
    </system.webServer>
  </location> 
```

当我访问我的旧博客页面时，它不会重定向并保留在旧博客页面上。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:32:47.027

如果在旧服务器上启用了 http 重定向，那么您必须将新的 web 配置放在文件夹 post/2012/05/ 中，并包含此内容

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <httpRedirect enabled="true" destination="http://mynewsite.com/" httpResponseStatus="Permanent" />
    </system.webServer>
</configuration> 
```

顺便提一句。如果所有其他选项都失败了，你可以简单地使用 Response.Redirect 从后面的代码中做到这一点。

# sql - 粘贴大型多行字符串（大约 1500 行）后，Visual Studio 2010 崩溃

> ID：10885378
> 
> 赞同：2
> 
> 时间：2012-06-04T17:20:52.540
> 
> 标签：sql, vb.net, visual-studio-2010, crash

我正在 Visual Studio 2010 中创建一个安装一些 SQL 存储过程的 VB 应用程序。这些存储过程是加密的，否则我只会为我的客户提供 .sql 文件来创建存储过程。

创建存储过程的安装脚本长度为 1500 行，并且已按照 VS 2010 需要多行文字的方式进行格式化：

```
"First Line" & _  
"Second Line" & _  
"etc..." 
```

每次我将多行脚本粘贴到 Visual Studio 中时，应用程序都会崩溃。任何人都有更好的方法将非常大的字符串文字分配给字符串变量。我需要的是以下内容：

```
Imports System.Data.Sql Client 
```

...

```
cmd cmd as SqlCommand
dim str as string

str = _
    "Very" & _
    "Long" & _
    ... 1500 lines ...
    "String"

cmd.CommandText = str 
```

或将 .sql 脚本分配给 SqlCommand 的其他方式。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:45:12.213

可以将其粘贴到记事本中并将其保存在那里，或者将其拆分为多个字符串，然后在最后连接起来。

或者更好的是，将命令放在资源文件中并在运行时加载资源！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T10:52:54.893

我也遇到了这个问题，下面的代码对我有用：

```
cmd cmd as SqlCommand
dim str as string

str = "Very" 
str &= "Long" 
    ... 1500 lines ...
str &= "String"

cmd.CommandText = str 
```

我希望它有所帮助。

# c# - 结合 RotateTransform 和 TranslateTransform

> ID：10885380
> 
> 赞同：0
> 
> 时间：2012-06-04T17:20:54.730
> 
> 标签：c#, wpf, transform, rotatetransform

我正在使用 Thumb 类让用户在画布上拖放图像。当按下右键时，我希望用户能够旋转图像。旋转基于图像的中心。我有以下 XAML 代码

```
<Grid>

    <Canvas Background="Red" Grid.RowSpan="2" x:Name="canvas" 
        PreviewMouseRightButtonUp="Canvas_MouseUp" 
        PreviewMouseMove="Canvas_MouseMove">

        <UserControl MouseRightButtonDown="Canvas_MouseDown" RenderTransformOrigin="0.5,0.5">

            <Thumb Name="myRoot" DragDelta="myRoot_DragDelta">
                <Thumb.Template>
                    <ControlTemplate>
                        <Grid>

                            <Image Source="/WpfApplication1;component/someImage.png" />

                            <Rectangle Stroke="#FF0061CE" StrokeThickness="1" Width="230" Height="250" />

                        </Grid>
                    </ControlTemplate>
                </Thumb.Template>
            </Thumb>

            <UserControl.RenderTransform>
                <TransformGroup>
                    <RotateTransform x:Name="rotateTransform" />
                    <TranslateTransform x:Name="translateTransform" />
                </TransformGroup>
            </UserControl.RenderTransform>
        </UserControl>

    </Canvas>

</Grid> 
```

后面的代码

```
 bool isMouseDown = false;
    Point pos;
    double lastAngle = 0;

    private void Canvas_MouseDown(object sender, MouseButtonEventArgs e)
    {
        isMouseDown = true;
        lastAngle = rotateTransform.Angle;
        pos = Mouse.GetPosition(canvas);
    }   

    private void Canvas_MouseUp(object sender, MouseButtonEventArgs e)
    {
        isMouseDown = false;
    }

    private void Canvas_MouseMove(object sender, MouseEventArgs e)
    {
        if (!isMouseDown) return;

        var curPos = Mouse.GetPosition(canvas);
        rotateTransform.Angle = lastAngle + (pos.Y - curPos.Y);
    }

    private void myRoot_DragDelta(object sender, DragDeltaEventArgs e)
    {
        translateTransform.X += e.HorizontalChange;
        translateTransform.Y += e.VerticalChange; 
    } 
```

如果我只在屏幕周围拖放图像并少量旋转图像（在任何方向上看起来都可以 50 度），它就可以工作。然而，操作它不止于此，图像开始在屏幕上不可预测地移动。

我尝试将转换移动到不同的控件，以免混淆它们但没有收到可接受的结果。

我怎样才能让我的代码表现得像我想要的那样？

更新：这让我发疯了。我已更改代码和 XAML 以改用 MatrixTransformation

```
 private void Canvas_MouseMove(object sender, MouseEventArgs e)
    {
        if (!isMouseDown) return;

        var curPos = Mouse.GetPosition(canvas);

        angle = (lastAngle + (pos.Y - curPos.Y)) % 360;

        UpdateMatrixTransform();
    }

    private void myRoot_DragDelta(object sender, DragDeltaEventArgs e)
    {
        posX += e.HorizontalChange;
        posY += e.VerticalChange;  

        UpdateMatrixTransform();
    }

    void UpdateMatrixTransform()
    {
        Matrix m = new Matrix();

        m.Rotate(angle);

        m.OffsetX = posX;
        m.OffsetY = posY;

        matrixT.Matrix = m;
    } 
```

在我看来，这应该可行：首先，旋转图形而不是将其移动到偏移处。它不像我期望的那样工作。它旋转图像，但如果我继续移动鼠标，它会以螺旋方式奇怪地向外移动。无论我做什么，以什么顺序执行我的转换，它都不会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:17:43.203

我不确定您为什么使用 UserControl 来包装 Thumb，因为它应该能够在此处充当根元素。这是一个解决方案，它涉及废弃 TranslateTransform 的使用，而是使用 Canvas.Left 和 Canvas.Top 属性：

**编辑：更新的答案**

这是 XAML：

```
<Canvas x:Name="canvas">
    <Thumb Name="myRoot"
            Canvas.Left="0" Canvas.Top="0"
            DragDelta="myRoot_DragDelta"
            MouseMove="myRoot_MouseMove"
            MouseDown="myRoot_MouseDown"
            MouseUp="myRoot_MouseUp">
        <Thumb.Template>
            <ControlTemplate>
                <Grid RenderTransformOrigin="0.5, 0.5">
                    <Rectangle Fill="AliceBlue"
                               Stroke="#FF0061CE"
                               StrokeThickness="1"
                               Width="100" Height="100"/>
                    <Grid.RenderTransform>
                        <RotateTransform x:Name="rotateTransform" />
                    </Grid.RenderTransform>
                </Grid>
            </ControlTemplate>
        </Thumb.Template>
    </Thumb>
</Canvas> 
```

这是背后的代码：

```
public partial class TestWindow : Window
{
    public TestWindow()
    {
        InitializeComponent();
    }

    Point? lastPosition = null;
    RotateTransform rotateTransform;

    private void myRoot_MouseDown(object sender, MouseButtonEventArgs e)
    {
        lastPosition = null;

        if (e.ChangedButton == MouseButton.Right)
            myRoot.CaptureMouse();
    }

    private void myRoot_MouseUp(object sender, MouseButtonEventArgs e)
    {
        if (e.ChangedButton == MouseButton.Right)
            myRoot.ReleaseMouseCapture();
    }

    private void myRoot_MouseMove(object sender, MouseEventArgs e)
    {
        if (e.RightButton == MouseButtonState.Pressed)
        {
            Point curPosition = Mouse.GetPosition(myRoot);

            if (lastPosition != null)
            {
                Point centerPoint = new Point(myRoot.ActualWidth / 2, myRoot.ActualWidth / 2);

                if (rotateTransform == null)
                    rotateTransform = (RotateTransform)myRoot.Template.FindName("rotateTransform", myRoot);

                rotateTransform.Angle = Math.Atan2(curPosition.Y - centerPoint.Y, curPosition.X - centerPoint.X) * 100;
            }

            lastPosition = curPosition;
            e.Handled = true;
        }
    }

    private void myRoot_DragDelta(object sender, System.Windows.Controls.Primitives.DragDeltaEventArgs e)
    {
        Canvas.SetLeft(myRoot, Canvas.GetLeft(myRoot) + e.HorizontalChange);
        Canvas.SetTop(myRoot, Canvas.GetTop(myRoot) + e.VerticalChange);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:47:25.803

您必须告诉 RotateTransform 您要围绕对象的中心而不是坐标系的中心旋转，这是默认设置。为此，请将 RotateTransform 的 CenterX 和 CenterY 属性设置为对象的中心。

# f# - 在 F# 中使用带有 PLINQ 的分区程序

> ID：10885386
> 
> 赞同：0
> 
> 时间：2012-06-04T17:21:33.997
> 
> 标签：f#, partitioning, plinq

我使用以下 PLINQ 实现的并行映射函数。

```
let parmap f (xs:list<_>) = xs.AsParallel().Select(fun x -> f x) |> Seq.toList 
```

我想提高我在 4 个内核上的加速，但我无法超过 2 个。我发现可以进行自定义分区以提高并行性能。但我主要看过 C# 示例，但不知道如何让它与 F# 一起使用。以下内容没有任何改变，但我认为这是 TPL 使用的默认分区？如何在此处使用不同的（静态、动态、...）分区选项？

```
let pmap_plinqlst_parts f (xs:list<_>) = 
    let parts = Partitioner.Create(xs)
    parts.AsParallel().Select(fun x -> f x) |> Seq.toList 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T01:25:41.053

如果工作单元非常小，通常会使用自定义分区器。当遇到这个问题时，您最好切换到 Task 而不是 Async，因为它通常更适合更小但更多的工作，而 Async 更适合延迟通常更长的 IO 类型操作。

例如，您将在并行线程中按顺序批量计算。产量将根据工作单元的大小以及总项目的数量而有所不同。

您提到的任何方法都没有缩放限制。我并行化了 Black Scholes 计算，并设法在使用 Async.Parallel 的 8 核机器上获得了大约 6.8 倍。虽然不是一个完美的机制，但我在传递给 Async.Parallel 的初始序列中使用了简单的工作分工。

您确定您拥有真正的四核机器还是具有超线程的两核机器？

# qt - 使用预处理器在 Qt 中选择性地包含标头

> ID：10885387
> 
> 赞同：1
> 
> 时间：2012-06-04T17:21:40.780
> 
> 标签：qt, include, preprocessor

我正在尝试通过以下方式在跨平台项目中包含特定于 Windows 的标头。

```
#ifdef Q_OS_WIN
#include "qt_windows.h"
#include "Shellapi.h"
#endif 
```

由于某些原因，这些文件未正确包含。

**注意：**我使用的是 mingw-gcc 编译器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:26:44.393

我不认为这是定义的。应该是`Q_OS_WIN32`或`Q_WS_WIN`。请参阅[Qt 全局](http://doc.qt.nokia.com/4.7-snapshot/qtglobal.html)。

```
#include <QtGlobal>

#ifdef Q_OS_WIN32
#include "qt_windows.h"
#include "Shellapi.h"
#endif 
```

# ruby-on-rails - 资源可用输出父资源 rails 3.2

> ID：10885389
> 
> 赞同：0
> 
> 时间：2012-06-04T17:21:50.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, routes, nested-resources

我的 routes.rb 中有这个

```
resources :users, :path => "/", :only => [:show] do
  resources :collections, :controller => 'users/collections'
end 
```

为什么我可以从以下位置访问收藏资源：

```
http://localhost:3000/en/collections 
```

如果这会在内部用户中获取此资源？

我只想`collection resource`在里面启用：

```
http://localhost:3000/en/users/collections 
```

这是我的路线：

```
user_collections GET    (/:locale)/:user_id/collections(.:format)          users/collections#index
                         POST   (/:locale)/:user_id/collections(.:format)          users/collections#create
     new_user_collection GET    (/:locale)/:user_id/collections/new(.:format)      users/collections#new
    edit_user_collection GET    (/:locale)/:user_id/collections/:id/edit(.:format) users/collections#edit
         user_collection GET    (/:locale)/:user_id/collections/:id(.:format)      users/collections#show
                         PUT    (/:locale)/:user_id/collections/:id(.:format)      users/collections#update
                         DELETE (/:locale)/:user_id/collections/:id(.:format)      users/collections#destroy 
```

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:37:18.227

尝试这个：

```
resources :users, :only => [:show] do
  resources :collections, :controller => 'users/collections'
end 
```

# macos - 如何在 Mac os Terminal 中的符号链接自动完成后添加斜杠？

> ID：10885398
> 
> 赞同：0
> 
> 时间：2012-06-04T17:22:36.017
> 
> 标签：macos, autocomplete, terminal

我有问题，之后

```
ln -s point1 point2 
```

当我尝试`point1`放置“TAB”按钮时 - 如果此符号链接指向目录，我需要添加“/”来自动完成。我使用 Mac OS 终端。

可能吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T21:39:30.627

据我所知，这取决于您使用的 shell 的自动完成功能。

如果您使用的是 Bash（如果您没有更改外壳，您可能会使用 Bash）查看[这个问题的答案](https://superuser.com/questions/271626/bash-autocomplete-on-symlink-to-directory-complete-to-whole-directory-including)

# unix - 如何在变量中存储行号（shell脚本，unix）？

> ID：10885400
> 
> 赞同：2
> 
> 时间：2012-06-04T17:22:40.087
> 
> 标签：unix

file.txt 如下：

```
gui : 789
gui : 789
gui : 789
gui : 789
abc : 120 
```

followibng 给出 o/p 为

```
$ grep -n "gui : 789" file.txt | cut -f1 -d: 
1
2
3
4 
```

如果有N个这样的gui:789，如何存储相同的行号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:29:49.603

您可以使用这个 awk 1 衬里：

```
awk '/gui : 789/{print NR}' file 
```

要在循环中处理它：

```
while read l
do
   echo $l
done < <(awk '/gui : 789/{print NR}' file) 
```

**编辑：**这些命令适用于文件中任意数量的匹配项。要将上述行号的输出存储在数组中：

```
arr=( $(awk '/gui : 789/{print NR}' x) ) 
```

稍后将这些数组元素处理为：

```
echo ${arr[0]}
echo ${arr[1]}
...
echo ${arr[5]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:28:05.820

像这样：

```
LINES=$(grep -n "gui : 789" file.txt | cut -f1 -d:) 
```

“LINES”变量将具有：“1 2 3 4”。

注意：您的问题非常笼统。这个答案适用于 Bash 或 Korn Shell。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:31:43.190

如果要对每一行进行处理，可以执行以下操作：

```
grep -n "gui : 789" file.txt | cut -f1 -d: | while read lineno; do
  : # process using $lineno
done 
```

# javascript - Extjs store.filter 按日期范围

> ID：10885402
> 
> 赞同：1
> 
> 时间：2012-06-04T17:22:45.227
> 
> 标签：javascript, extjs, extjs3, date-range

这是我的代码，我试图通过允许它成为日期范围来过滤“收集时间”。

我在文档中没有看到可以添加它的地方，也没有看到显示此功能正常工作的示例。

有人可以指出我正确的方向吗？

```
listeners: {
    'load': function(store) {
            if ('color' in $_GET) {
                    store.filter([
                            {property: 'color' , value: $_GET['color'] , anyMatch: true , caseSensitive: false}
                    ]);
            }
            if ('priority' in $_GET) {
                    store.filter([
                            {property: 'precedence' , value: $_GET['priority'] , anyMatch: true , caseSensitive: false}
                    ]);
            }
            if ('startdate' in $_GET) {
                    store.filter([
                            {property: 'CollectTime' , value: $_GET['startdate'] , anyMatch: true , caseSensitive: false}
                    ]);
            }
    } 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T23:10:35.443

使用 filterBy 方法代替过滤器并提供过滤器功能

这是一个例子：

```
...
if ( 'startdate' in $_GET ) {
    store.filterBy( function( rec, id ){
        return rec.data.CollectTime >= $_GET['startdate'] && rec.data.CollectTime <= $_GET['enddate'];
    } );
}
... 
```

# ios - ios 检查空对象

> ID：10885403
> 
> 赞同：0
> 
> 时间：2012-06-04T17:22:52.577
> 
> 标签：ios, error-handling, nserror

我通过引用我在网上找到的一些代码传递了一个错误。错误以空对象的形式返回，这意味着没有错误。

如果我检查`error.code`我的*访问权限不正确*，因为对象是空的。

如果我检查`error == nil`我得到一个*错误*，因为`error`它是一个空对象。

如何使用逻辑来发现错误存在，但为空？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T17:30:27.150

错误通常是类型`NSError`或其子类。它们在以这种方式声明的方法中作为引用传递：

```
-(void)DoSomeStuff:(NSError **)error; 
```

因此，当您调用一个需要您传递对 a 的引用的方法时，您可以`NSError`这样调用它：

```
NSError *error = nil;
[self DoSomeStuff:&error]; 
```

当这个方法完成它的工作时，你检查错误对象是否真的填充了一些东西：

```
if(error)
{
   //Do some stuff if there is an error.
   //To see the human readable description you can:
   NSLog(@"The error was: %@", [error localizedDescription]);
   //To see the error code you do:
   NSLog(@"The error code: %d", error.code);
}
else //There is no error you proceed as normal
{
  //Do some other stuff - no error
} 
```

PS 如果您没有收到错误并且该方法未按预期运行，则此方法的实现存在问题。特别是如果它是开源的东西，很容易出现编码错误，因此您可以查看该方法的作用，调试甚至修复错误...

# asp.net - global.asax 中的常量

> ID：10885406
> 
> 赞同：-1
> 
> 时间：2012-06-04T17:23:11.380
> 
> 标签：asp.net, .net, asp.net-4.0

在 global.asax 中使用常量是个好主意吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T08:49:36.860

它总是去，**你在这样的变量中持有什么？**

我将主要设置（**只读**）变量保存`web.config`在该区域的文件中`<appSettings>`，例如：

```
<appSettings>
   <add key="AmazonS3:CalendarPath" 
        value="http://mycloud.s3-eu-west-1.amazonaws.com/Calendar/" />
</appSettings> 
```

并使用

```
string calPath = System.Configuration.ConfigurationManager.AppSettings["AmazonS3:CalendarPath"]; 
```

在我的视图或控制器中。

**这是保存只读变量的好地方，**因为无论您的 Web 应用程序是否构建、编译或显示所有源文件，您都可以轻松地将变量更改为您需要的变量，而无需打开编译文件，更改它并再次编译项目......省去了很多麻烦，并为孔应用程序设置提供了一定的动态。

* * *

另一方面，如果您想要一种在应用程序中保存变量的**READ/WRITE**方式，您有 3 种方式，各有利弊

1.  **使用 Session State 保存变量**这是最常用的，但在云平台上很糟糕，因为请求可以更改服务器，并且接收到用户继续请求的新服务器没有会话

2.  **使用 Cookie 保存用户变量**Cookie 可以由用户动态修改，因此我们仅使用它来保存细微更改的设置，例如 UI 定义。

3.  **使用缓存层来保存变量**这是云平台中最常用的，因为您不仅可以保存设置，还可以保存大部分时间访问的部分数据。

还有关于女巫的*[应用程序设置](http://msdn.microsoft.com/en-us/library/8eyb2ct1)*`global.asax`在经典 ASP 时代非常常用，从那时起我就再也没有使用过它们，因为它们与会话变量具有相同的流程，女巫被放置在内存中......任何应用程序池重置，任何新的构建，所有会话都丢失了。

您还可以搜索大量帖子，以更好地了解在 ASP.NET 项目中跨应用程序保存变量所需的所有选项。

# mysql - 带有内部查询的mysql

> ID：10885415
> 
> 赞同：1
> 
> 时间：2012-06-04T17:23:56.230
> 
> 标签：mysql

我有一个存储调查答案的表，我试图查询 mysql 以告诉我调查是否由答案字段 = 16 或 20 的人回答

我有以下 mysql 语句

```
SELECT DISTINCT(submissionID) as submissionID FROM answer 
WHERE EXISTS (
    SELECT *
    FROM answer
    WHERE submissionID = submissionID AND (answer = '16' OR answer = '20')

) 
```

在这里编辑

抱歉，我认为我的问题没有说对，所以这是我的表格结构：

```
CREATE TABLE IF NOT EXISTS `answer` (
  `aID` int(11) NOT NULL AUTO_INCREMENT,
  `sID` int(11) NOT NULL,
  `qtID` int(11) NOT NULL,
  `answer` text NOT NULL,
  `userIP` text NOT NULL,
  `submissionID` int(11) NOT NULL,
  PRIMARY KEY (`aID`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=422 ; 
```

1.  `aID`是给出的每个答案的唯一 ID
2.  `sID`是调查 ID（因为我可能有多个调查）
3.  `qtID`是 questionsID 值
4.  `answer`是用户在`qtID`本次调查中给出的答案
5.  `userIP`是可以自我解释的
6.  `submissionID`是给每个提交的 ID

所以我知道在这张表中有 5 个唯一的提交 ID，但只有一个`submssionID`答案字段 =`16`和`20`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:29:27.597

我认为您的查询过于复杂，请尝试以下操作：

```
SELECT DISTINCT submissionID FROM answer 
WHERE answer IN ('16', '20'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:29:21.890

“我这里出了什么问题？”

将子查询与外部查询相关联的条件：

```
submissionID = submissionID 
```

总是正确的。我不认为你真的需要它，为什么不写：

```
SELECT DISTINCT submissionID 
FROM answer 
WHERE answer = '16' OR answer = '20' 
```

但是，我感觉您并没有向我们提供所有信息。例如，我在您的原始查询中看不到任何限制对特定问题的答案的内容。如果调查只有一个问题，那当然是可能的，但我觉得这不是你的意思。精心制作的...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:30:59.077

我认为您需要一个或另一个 from 子句中的答案表的别名。像这样...

```
SELECT DISTINCT(submissionID) as submissionID FROM answer a 
WHERE EXISTS (
    SELECT *
    FROM answer
    WHERE submissionID = a.submissionID AND (answer = '16' OR answer = '20')

) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T17:32:41.453

这是您的原始查询

```
SELECT DISTINCT(submissionID) as submissionID FROM answer 
WHERE EXISTS (
    SELECT *
    FROM answer
    WHERE submissionID = submissionID AND (answer = '16' OR answer = '20')

) 
```

您应该为表添加别名以关联它们

```
SELECT DISTINCT(submissionID) as submissionID FROM answer B
WHERE EXISTS (
    SELECT *
    FROM answer A
    WHERE A,submissionID = B.submissionID AND (answer = '16' OR answer = '20')

) 
```

# c# - 如何编写 where 查询以仅包含 1 个子实体

> ID：10885416
> 
> 赞同：1
> 
> 时间：2012-06-04T17:24:00.947
> 
> 标签：c#, linq, entity-framework, entity-framework-4

我有实体

```
Blog{ blogId, name, creatorUserId }

BlogSettings{ blogId, userId, column1  } 
```

现在我有一个方法可以接受`blogId`并且`userId`我正在查询`Blog`(not `BlogSettings`)

`Blog`包含`BlogSettings`.

我该怎么做？

如果我写`context.Blogs.Include("BlogSettings").Where( b => b.BlogId == blogId)`那将是非常低效的，因为我只需要 userId == userId 的 BlogSettings。

`Note:`我没有在 BlogSettings 上查询。如您所见，我正在查询博客集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:40:15.723

```
var blogWithSetting = context.Blogs
    .Where(b => b.BlogId == blogId)
    .Select(b => new
    {
        Blog = b,
        BlogSetting = b.BlogSettings.FirstOrDefault(bs => bs.UserId == userId)
    })
    .SingleOrDefault();

if (blogWithSetting != null)
{
    Blog blog = blogWithSetting.Blog;
    //
} 
```

这种投影是在单次往返数据库中获得结果的唯一方法，因为预先加载`Include`不支持对包含的子集合进行任何过滤或排序。*如果*您不禁用更改跟踪并且关系不是多对多，则将使用单个加载的`blog.BlogSettings`自动填充。否则，您必须使用结果对象的属性手动填充集合：`BlogSetting`

 *```
if (blogWithSetting != null)
{
    Blog blog = blogWithSetting.Blog;
    blog.BlogSettings = new List<BlogSetting>();
    blog.BlogSettings.Add(blogWithSetting.BlogSetting);
    //
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:53:35.377

虽然理论上您正在查询，但您可能会发现编写查询和添加`Blog`查询更有效。`BlogSettings``.Include("Blog")`

假设您只有一个`BlogSettings`用于 UserId 和 BlogId 的组合；也许这是由一个独特的约束来强制执行的。如果是这样的话，这将非常快：

```
 var blogAndSettings = (from s in context.BlogSettings
                                            .Include("Blog")
                           where s.BlogId = blogId && s.UserId = userId
                           select s).SingleOrDefault(); 
```

这将要求您创建一个导航属性 from `BlogSettings`to `Blog`called `Blog`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:58:09.197

`Blog`这将在和表之间执行连接，`BlogSettings`但只是具体化`BlogSetting`实体。

```
var settings = context.Blogs.Where( b => b.BlogId == blogId && b.CreatorUserId = userId)
                            .SelectMany(x => x. BlogSettings); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-04T17:58:03.813

```
context.Blogs.Include("BlogSettings").SingleOrDefault( b => b.BlogId == blogId); 
```*

# sql - 查找重复条目 SQL

> ID：10885418
> 
> 赞同：3
> 
> 时间：2012-06-04T17:24:05.210
> 
> 标签：sql, sql-server, sql-server-2008

我有一个名为 Member（唯一 ID 是 MemberID）的表，其中有许多重复的成员，只有名字和姓氏不同，但公司名称、地址、城市、州和邮政编码都是相同的。导入的记录有重复。

如何运行脚本来查找 BusinessName、Addr1、City、State 和 ZIP 都相同的重复成员。

我想将它们全部列出在一个页面上，这样我就可以选择要删除的那些。

有什么想法可以为此创建脚本吗？

提前谢谢了，

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:28:38.083

您想为此使用分析函数：

```
select m.*
from (select m.*,
             count(*) over (partition by BusinessName, Address, City, State, ZipCode) as NumDups 
      from members m
     ) m
where NumDups > 1 
```

NumDups 告诉您有多少重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:30:01.007

```
select * from Member as m
where exists(select MemberID 
      from Member as m2 
      where 
           (m.BusinessName = m2.BusinessName or (m.BusinessName is null and m2.BusinessName is null)) and 
           (m.Addr1 = m2.Addr1 or (m.Addr1 is null and m2.Addr1 is null)) and 
           (m.City = m2.City or (m.City is null and m2.City is null)) and 
           (m.State = m2.State or (m.State  is null and m2.State is null)) and 
           (m.ZIP = m2.ZIP or (m.ZIP  is null and m2.ZIP is null)) and 
           m.memberID <> m2.MemberID) 
```

使用上述查询，where 正在检查是否存在重复条目。仅当存在不匹配的副本时，子查询才会`MemberID`返回结果*。*这意味着如果有一个唯一的行，那么将没有结果，而如果有一个具有一个或多个副本的行，那么它将被返回。

# c# - 如何录制inkCanvas，将inkcanvas保存为动画或视频？

> ID：10885419
> 
> 赞同：0
> 
> 时间：2012-06-04T17:24:26.617
> 
> 标签：c#, wpf, windows, inkcanvas

使用 C#，我想将用户在墨水画布中绘制的内容保存为动画或视频，就像 iPad 应用程序[Show Me](http://www.showme.com)

# iphone - 基于位置的本地通知

> ID：10885424
> 
> 赞同：4
> 
> 时间：2012-06-04T17:24:44.943
> 
> 标签：iphone, ios, gps, notifications, uilocalnotification

我想知道是否可以根据当前位置或设备接近某些地理坐标时调用应用程序。我通过了`UILocalNotification`类参考。但它基于日期工作。

问候，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T17:30:07.433

是的，当设备进入您定义的区域时，可以通知您的应用程序（即使它没有运行）。请参阅[监控基于形状的区域](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW13)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:26:11.917

您将无法根据位置触发本地通知，但您可以根据本地通知设置一个。如果您希望将应用程序置于后台或完全关闭并确定用户是否进入了某个区域，那么您可能不走运。

# mysql - 生成列的值未出现在表中

> ID：10885426
> 
> 赞同：2
> 
> 时间：2012-06-04T17:24:53.177
> 
> 标签：mysql, mysql-5.1

我正在使用 mysql 版本`5.1.41-3ubuntu12.10 (Ubuntu)`。

```
mysql> show create table tt\G
*************************** 1\. row ***************************
       Table: tt
Create Table: CREATE TABLE `tt` (
  `pz` int(8) DEFAULT NULL,
  `os` varchar(8) DEFAULT NULL,
  `uz` int(11) NOT NULL,
  `p` bigint(21) NOT NULL DEFAULT '0',
  `c` decimal(23,0) DEFAULT NULL,
  KEY `pz` (`pz`),
  KEY `uz` (`uz`),
  KEY `os` (`os`),
  KEY `pz_2` (`pz`,`uz`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1
1 row in set (0.00 sec)

mysql> select pz,uz,pz*uz,
    -> if(pz*uz,1,.5),
    -> left(pz,2) pl,left(lpad(uz,5,0),2) ul,
    -> p from tt limit 10;
+-------+----+-------+----------------+--------+----+--------+
|   pz  | uz | pz*uz | if(pz*uz,1,.5) |   pl   | ul |    p   |
+-------+----+-------+----------------+--------+----+--------+
|  NULL |  0 |  NULL |            0.5 | NULL   | 00 |   4080 |
|  NULL |  0 |  NULL |            0.5 | NULL   | 00 | 323754 |
| 89101 |  0 |     0 |            0.5 | 89     | 00 |   6880 |
|     0 |  0 |     0 |            0.5 | 0      | 00 |  11591 |
| 89110 |  0 |     0 |            0.5 | 89     | 00 |     72 |
| 78247 |  0 |     0 |            0.5 | 78     | 00 |     27 |
| 90062 |  0 |     0 |            0.5 | 90     | 00 |      5 |
| 63107 |  0 |     0 |            0.5 | 63     | 00 |      4 |
|  NULL |  0 |  NULL |            0.5 | NULL   | 00 |  54561 |
| 94102 |  0 |     0 |            0.5 | 94     | 00 |  12499 |
+-------+----+-------+----------------+--------+----+--------+ 
```

到目前为止，一切都很好。如您所见，0.5 显示为 的值`if(pz*uz,1,.5)`。问题是：

```
mysql> select os,
    -> if(pz*uz,left(pz,2)<=>left(lpad(uz,5,0),2),.5) uptwo,
    -> if(pz*uz,left(pz,3)<=>left(lpad(uz,5,0),3),.5) upthree,
    -> sum(p) p,sum(c) c
    -> from tt t
    -> group by os,uptwo,upthree order by null;

+----+-------+---------+---------+-------+
| os | uptwo | upthree |    p    |   c   |
+----+-------+---------+---------+-------+
| u  |     1 |       1 |   52852 |   318 |
| i  |     1 |       1 | 7046563 | 21716 |
| m  |     1 |       1 | 1252166 |  7337 |
| i  |     0 |       0 | 1830284 |  4033 |
| m  |     0 |       0 |  294612 |  1714 |
| i  |     1 |       0 |  911486 |  3560 |
| m  |     1 |       0 |  145182 |  1136 |
| u  |     0 |       0 |   12144 |    23 |
| u  |     1 |       0 |    1571 |     8 |
+----+-------+---------+---------+-------+ 
```

虽然 I `group by uptwo`, 0.5 没有出现在该列中。0.5 值发生了什么变化？

* * *

*编辑：*正如对[Todd Gibson 的回答](https://stackoverflow.com/a/10885722)的评论中所指出的，我也尝试使用
`if(pz*uz,cast(left(pz,2)<=>left(lpad(uz,5,0),2) as decimal),.5)`而不是
`if(pz*uz,left(pz,2)<=>left(lpad(uz,5,0),2),.5)`，但它也没有工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T02:00:15.333

而不是`.5`作为 的错误条件`IF()`，使用`0.5`.

```
if(pz*uz,left(pz,2)<=>left(lpad(uz,5,0),2),0.5) uptwo

if(pz*uz,left(pz,3)<=>left(lpad(uz,5,0),3),0.5) upthree 
```

我相信发生的事情是在`GROUP BY`评估之后，条件列中的值必须是相同的数据类型。由于`SELECT`在 之后进行评估`GROUP BY`，因此`IF()`将返回值转换为整数（来自布尔表达式），因此您`0.5`将被四舍五入，`1`但如果您明确地将 a`0`放在小数位前，`IF()`则将返回值视为十进制，包括布尔表达式的结果（即`1.0`或`0.0`）。

或者您甚至可以将单引号括起来，`.4`以便将列值视为字符串，因此某些值*看起来*是整数和一些小数。在数值上下文中使用时，这些值应自动转换（即`SELECT ('2.5' * 3.5) AS test #8.75`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:48:48.337

我认为 uptwo 和 upthree 列被隐式转换为整数。在 expression2 上使用 convert() 将其强制为小数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:42:58.960

我认为您在以下陈述中有问题：

```
-> if(pz*uz,left(pz,2)<=>left(lpad(uz,5,0),2),.5) uptwo,
-> if(pz*uz,left(pz,3)<=>left(lpad(uz,5,0),3),.5) upthree, 
```

在语句中， 的值`pz*uz`必须始终为`greater than or equal to 1`。
因此，第一个表达式的值用于替换第二个表达式`0.5`。

让我们分析第一个`if`函数语句：
**语法**：`IF(expr1,expr2,expr3)`
含义`if value of expr1 is >= 1 use expr1 else use expr3`
**Expression1**：`pz*uz`//这个值必须是`'>= 1'`.
**Expression2** : `left(pz,2)<=>left(lpad(uz,5,0),2)`// 这个值是`'1'`or `'0'`。
**表达式3**：`.5`

# javascript - 在两个不同的控制器中渲染动作

> ID：10885428
> 
> 赞同：0
> 
> 时间：2012-06-04T17:25:07.620
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, templates

我有一个列表`StockMovements`和一个 ajax 选择列表`stock_movements`。

`will_paginate`我的应用程序使用和进行 ajax 搜索`elasticsearch`。要将列表添加到拣货列表，我将以下代码放入 StockMovement 列表的每一列：

```
<%= button_to 'Retornar', linha_devolucaos_path(stock_movement_id: stock_movement.id, page: params[:page]), class: 'btn btn-mini' if !stock_movement.back and !stock_movement.linha_devolucaos.present? %> 
```

它使用该项目的 js 响应更新拣货清单：

```
$('#romaneio').html("<%=j render @devolucao %>") 
```

在 ajax 中它运行良好，但不会隐藏`retornar`按钮，因为该 div 没有更新。我知道我需要请求我的`StockMovement#index`操作的 js 响应，但是我如何以及在何处调用该操作以及如何传递参数？

LinhaDevolucao#create Controller

```
def create
@devolucao = current_devolucao_romaneio
stock_movement = StockMovement.find(params[:stock_movement_id])
@devolucao.add_stock_movement(stock_movement.id)

respond_to do |format|
  if @devolucao.save
    format.html { redirect_to stock_movements_path(page: params[:page]), notice: 'Linha devolucao was successfully created.' }
    format.json { render json: @linha_devolucao, status: :created, location: @linha_devolucao }
    format.js
  else
    format.html { render action: "new" }
    format.json { render json: @linha_devolucao.errors, status: :unprocessable_entity }
  end
end
end 
```

LinhaDevolucao/create.js

```
$('#romaneio').html("<%=j render @devolucao %>"); 
```

然后我需要更新我当前的 StockMovement 列表以隐藏 linha_devolucao 中已经存在的行的“retornar”按钮。我的 StockMovement#index 操作完成了这项工作，但是我如何以及在何处重定向到此操作并呈现 js 响应？

```
$("#equipments-table").html("<%=j render("equipments")  %>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:34:38.837

```
"<%=j render @devolucao %>") 
```

我认为：这不好，您必须在 StockMovements 文件夹中渲染自定义视图。例如：

```
<%=j render 'devolcao' %> 
```

在此文件中，您可以使用 @devolucao 创建您的循环。

但我不知道你的视图文件。

# python - 找不到 Bottle 应用程序中的静态文件 (404)

> ID：10885429
> 
> 赞同：2
> 
> 时间：2012-06-04T17:25:08.307
> 
> 标签：python, bottle

我已经在这里查看了所有关于此的问题，查看了瓶子教程，查看了瓶子谷歌小组讨论，以及 AFAIK，我做的一切都是正确的。但是，不知何故，我无法正确加载我的 CSS 文件。我在静态文件上得到一个 404，`http://localhost:8888/todo/static/style.css`没有找到，根据下面的目录结构，不应该是这种情况。我正在使用 0.11 版（不稳定）的瓶子；有什么我遗漏的吗，或者这是瓶子中的错误？

我的目录结构：

```
todo/
   todo.py
   static/
      style.css 
```

我的 todo.py：

```
import sqlite3
from bottle import Bottle, route, run, debug, template, request, validate, static_file, error, SimpleTemplate

# only needed when you run Bottle on mod_wsgi
from bottle import default_app
app = Bottle()
default_app.push(app)

appPath = '/Applications/MAMP/htdocs/todo/'

@app.route('/todo')
def todo_list():

    conn = sqlite3.connect(appPath + 'todo.db')
    c = conn.cursor()
    c.execute("SELECT id, task FROM todo WHERE status LIKE '1';")
    result = c.fetchall()
    c.close()

    output = template(appPath + 'make_table', rows=result, get_url=app.get_url)
    return output

@route('/static/:filename#.*#', name='css')
def server_static(filename):
    return static_file(filename, root='./static') 
```

我的html：

```
%#template to generate a HTML table from a list of tuples (or list of lists, or tuple of tuples or ...)
<head>
<link href="{{ get_url('css', filename='style.css') }}" type="text/css" rel="stylesheet" />
</head>
<p>The open items are as follows:</p>
<table border="1">
%for row in rows:
  <tr style="margin:15px;">
  %i = 0
  %for col in row:
    %if i == 0:
        <td>{{col}}</td>
    %else:
        <td>{{col}}</td>
    %end
    %i = i + 1
  %end
  <td><a href="/todo/edit/{{row[0]}}">Edit</a></td>
  </tr>
%end
</table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T21:42:30.550

我不太了解您的部署。该`/Applications/MAMP/htdocs/`路径以及`app.run`您的代码中缺少的路径表明您在 Apache 下运行它。是生产部署吗？对于开发任务，你应该使用 Bottle 的内置开发服务器，你知道的。`app.run()`在你的末尾添加一个单曲`todo.py`，你就完成了。

现在，如果您使用的是 Apache，最可能的根本原因是这一行：`static_file(filename, root='./static')`. 使用 mod_wsgi，您无法保证工作目录与您所在的目录相同`todo.py`。事实上，它几乎永远不会。

您正在使用数据库和模板的绝对路径，对静态文件这样做：

```
@route('/static/:filename#.*#', name='css')
def server_static(filename):
    return static_file(filename, root=os.path.join(appPath, 'static')) 
```

接下来，我不明白您的应用程序安装在哪里。URL`http://localhost:8888/todo/static/style.css`表明挂载点是`/todo`，但`todo_list`处理程序的路由又是`/todo`。应该是完整的路径`http://localhost/todo/todo`吗？你的应用有`/`处理程序吗？

我还建议避免硬编码路径并将路径片段连接在一起。这会更干净：

```
from os.path import join, dirname
...
appPath = dirname(__file__)

@app.route('/todo')
def todo_list():
    conn = sqlite3.connect(join(appPath, 'todo.db'))
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T19:02:32.757

事实证明，它与 Bottle 无关，而与我加载应用程序的 wsgi 文件有关。我没有将我的 os.path 更改为正确的路径；它指向 wsgi 脚本所在的文件夹。显然，那里没有css文件。一旦我在 sgi 脚本中更正了我的目录，一切正常。换句话说：

```
os.chdir(os.path.dirname(__file__)) 
```

需要是

```
os.chdir('Applications/MAMP/htdocs/todo') 
```

因为我的 wsgi 脚本与应用程序本身位于不同的目录中（mod_wsgi 推荐这种方法）。谢谢各位的帮助！

# java - 在准备好的语句中调用参数化函数

> ID：10885430
> 
> 赞同：1
> 
> 时间：2012-06-04T17:25:12.857
> 
> 标签：java, jdbc, prepared-statement

我正在尝试使用 jdbcpreparedstatement 将数据插入到 sql server 2008 数据库中。我遇到的困难是我的时间点 ID 可能会发生变化，我需要根据插入的其他元素查找常量 ID。我编写了一个存储函数来执行查找，myIDLookup(x,y)。

我试着写一个这样的preparedstatement：

```
INSERT INTO myTable (id,idElement1,idElement2,otherItem) 
VALUES (myIDLookup(?,?),?,?,?) 
```

我已经看到成功使用诸如 now() 等内置函数的示例，但还没有看到任何关于在preparedstatement 中使用参数化函数的内容。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:29:37.930

我认为这样做的正确方法是编写一个存储过程来插入需要 x 和 y 的行并通过调用 myIDLookup ad 生成 id 然后也插入该行。模板可能如下所示：

```
stored proc insertRow (x, y, z)
{
   id = myIDLookup(x , y)
   insert into table values (id, x , y, z)
} 
```

# console - 如何在 Dart 中模拟 StringInputStream readLine 的阻塞？

> ID：10885435
> 
> 赞同：3
> 
> 时间：2012-06-04T17:25:46.047
> 
> 标签：console, dart

我在这里找到了能够从控制台读取的答案：[Is it possible to read from console in Dart?](https://stackoverflow.com/questions/10257744/is-it-possible-to-read-from-console-in-dart) . 但是，我想阻止程序中的进一步执行，直到输入字符串（想想只是与用户进行简单的控制台交互）。

但是，我没有看到一种方法来控制简单交互的执行流程。我意识到 Dart I/O 是异步的，所以我正在努力弄清楚我应该如何完成这个看似简单的任务。只是我试图将 Dart 用于它不打算做的事情吗？

```
#import("dart:io");

void main() {
  var yourName;
  var yourAge; 
  var console = new StringInputStream(stdin);

  print("Please enter your name? ");
  console.onLine = () {
    yourName = console.readLine();
    print("Hello $yourName");
  };

  // obviously the rest of this doesn't work...
  print("Please enter your age? ");
  console.onLine = () { 
    yourAge = console.readLine();
    print("You are $yourAge years old");
  };

  print("Hello $yourName, you are $yourAge years old today!");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-06T19:53:18.583

（回答我自己的问题）

自从最初提出这个问题以来，Dart 添加了几个功能，特别是使用标准输入的 readLineSync 的概念。本教程涵盖了编写命令行 Dart 应用程序时可能需要注意的几个典型主题：[https ://www.dartlang.org/docs/tutorials/cmdline/](https://www.dartlang.org/docs/tutorials/cmdline/)

```
import "dart:io";

void main() {
    stdout.writeln('Please enter your name? ');
    String yourName = stdin.readLineSync();
    stdout.writeln('Hello $yourName');

    stdout.writeln('Please enter your age? ');
    String yourAge = stdin.readLineSync();
    stdout.writeln('You are $yourAge years old');

    stdout.writeln('Hello $yourName, you are $yourAge years old today!');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T06:44:10.473

希望以后所有的IO都通过`Future`s来完成。与此同时，您有两种选择：

1.  正如您在问题中所写的那样，使用回调。`Future`s 不是处理异步执行的唯一方法。事实上，你问我有点惊讶，因为你的问题已经包含这个答案——只需稍微移动你的代码：

    ```
    void main() {
      var stream = new StringInputStream(stdin); 
      stream.onLine = () { 
        var myString = stream.readLine();
        print("This was after the handler $myString");

        // I want to wait until myString is typed in

        print("echo $myString"); // should not print null
      }; 
    } 
    ```

2.  编写您自己的包装器返回`Future`. 它可能看起来像这样（警告：没有测试它！）：

    ```
    class MyStringInputStream {
      final StringInputStream delegate;

      MyStringInputStream(InputStream stream)
          : delegate = new StringInputStream(stream);

      Future<String> readLine() {
        final completer = new Completer<String>();

        delegate.onLine = () {
          final line = delegate.readLine();
          delegate.onLine = null;
          completer.complete(line);
        };

        return completer.future;
      }
    } 
    ```

# android - 从 ics 中的股票启动器中删除指向我的应用程序的快捷方式

> ID：10885439
> 
> 赞同：4
> 
> 时间：2012-06-04T17:26:09.543
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-launcher, shortcuts, android-homebutton

我需要从股票启动器中删除指向我的应用程序的一个特定（更好）或所有快捷方式（最坏情况）。我无法使用 UNINSTALL_SHORTCUT 广播，似乎它不起作用（与[此类](http://forum.xda-developers.com/showthread.php?t=1583732)似的问题.

我的应用程序由系统证书签名（它将安装在 /system/app 中）所以我有一些想法，如何删除快捷方式。

1.  有没有一种在 ics 中使用 UNINSTALL_SHORTCUT 的工作方式？

2.  我已经看到股票启动器在我卸载它时会删除指向我的应用程序的所有链接。有什么方法可以模拟卸载（或发送 package_removed 广播，具有系统权限）？也许写包管理器的一部分？

3.  如果 2 不可能，有什么方法可以让包管理器通过重新安装/升级我的应用程序来发送 PACKAGE_REMOVED 广播？（我可以静默安装/升级应用程序，因为我拥有 INSTALL_PACKAGES 权限的系统权限）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:40:57.813

我相信除了从快捷方式之外，您还有另一种方式来启动您的应用程序。

要不显示在应用程序抽屉上，只需删除

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

从您的活动清单中，它不会显示快捷方式

更新：您可以在不同的应用程序/apk 中分离快捷方式，并在需要快捷方式时安装快捷方式“应用程序”并在不需要时卸载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T11:32:34.400

似乎 UNINSTALL_SHORTCUT 不适用于具有空格键的 EXTRA_SHORTCUT_NAME 女巫。

尝试从 EXTRA_SHORTCUT_NAME 中删除空格键。

这对我有用：

```
private void deleteShortCut(Context context) {

    Intent shortcutIntent = new Intent(Intent.ACTION_MAIN);
    shortcutIntent.setClassName("com.example.androidapp", "SampleIntent");
    shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    shortcutIntent.putExtra("someParameter", "HelloWorld");

    Intent removeIntent = new Intent();
    removeIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
    removeIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME, "ShortcutName");
    removeIntent.putExtra("duplicate", false);

    removeIntent
            .setAction("com.android.launcher.action.UNINSTALL_SHORTCUT");       
    context.sendBroadcast(removeIntent);
}

private void addShortCut(Context context) {

    Intent shortcutIntent = new Intent(Intent.ACTION_MAIN);
    shortcutIntent.setClassName("com.example.androidapp", "SampleIntent");
    shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    shortcutIntent.putExtra("someParameter", "HelloWorld");

    Intent addIntent = new Intent();
    addIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
    addIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME, "ShortcutName");
    addIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,
            Intent.ShortcutIconResource.fromContext(context,
                    R.drawable.ic_launcher));

    addIntent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
    context.sendBroadcast(addIntent);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T18:24:52.050

要删除快捷方式：

您可以点击并按住快捷方式并将该快捷方式拖到底部的垃圾箱以摆脱它。一旦变红，放手。快捷方式将被删除，但应用程序将保持安装状态。

添加快捷方式：

找到要为其创建快捷方式的应用程序后，您需要点击并按住该应用程序。应用程序菜单将消失，您将返回主屏幕。您可以向左或向右拖动应用程序图标以查看不同的主屏幕。释放应用程序以将快捷方式放置在您希望的任何位置。

# node.js - 用于与 PHP/MySQL/JS 进行类似 Facebook 聊天的后端服务器软件？

> ID：10885445
> 
> 赞同：2
> 
> 时间：2012-06-04T17:26:52.787
> 
> 标签：node.js, websocket, facebook-chat

我用 PHP 和 JavaScript 开发了一个类似 Facebook 的聊天工具。这是一个论坛软件的插件。目前我正在使用（短）轮询来接收新消息，但我想用更好的东西来尝试它，比如套接字。

对于这种聊天，你会推荐什么（每个站点都可以使用，私人聊天，群聊..）：WebSockets，node.js with socket.io，ejabberd...

[![类似 Facebook 的聊天](../Images/c399f2dcdef23a5a6d1e0a965efca002.png)](https://i.stack.imgur.com/qlmPO.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:16:02.157

根据我的个人经验，没有可用于 PHP 的好的套接字库。通常人们想要一个套接字库，如果本地套接字支持不可用，它将具有回退机制。我的 2 条建议：

1.  完全切换到 node.js + Socket.io 解决方案，丢弃 PHP。
2.  让 nodejs + socket.io 聊天系统与 PHP 一起作为单独的服务器运行。将 HAPROXY 放在您的网络服务器前面。将所有套接字请求转移到 node.js 并将所有其他请求转移到 PHP。通过这种方式，您将能够使用 node.js 和 PHP 的优点。

我有类似的情况，我正在使用选项 2 :)。

# c - 使用链表进行堆排序

> ID：10885449
> 
> 赞同：7
> 
> 时间：2012-06-04T17:27:11.857
> 
> 标签：c, sorting, linked-list, heapsort

我想知道是否有人曾经使用链表进行堆排序，如果他们可以提供代码。我已经能够使用数组进行堆排序，但尝试在链表中进行似乎不切实际，而且你知道在哪里会很痛苦。我必须为我正在做的项目实施链接列表，任何帮助将不胜感激。

我也在使用C。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-04T17:50:39.653

答案是“你不想在链表上实现堆排序”。

Heapsort 是一个很好的排序算法，因为它是`O(n log n)`并且它是就地的。但是，当您拥有链表时，堆排序不再`O(n log n)`是因为它依赖于对数组的随机访问，而您在链表中没有。所以你要么失去你的就地属性（通过需要定义一个树状结构是`O(n)`空间）。或者您将需要不使用它们，但请记住链接列表`O(n)`用于成员查找。这将运行时复杂性带到了`O(n^2 log n)`比冒泡排序更糟糕的程度。

只需使用合并排序即可。您已经有`O(n)`内存开销要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:56:59.330

```
//Heap Sort using Linked List
//This is the raw one
//This getRoot function will replace the root with number in the last node, after the main prints the largest number in the heap
//The heapSort function will reconstruct the heap
//addNode function is as same as in binary search tree
//Note addNode and heapSort are recursive functions
//You may wonder about the for loop used in main, this actually tells the depth of the tree (i.e log base2 N)
//With this value these functions find where to trverse whether left or right(direction), with help of macro GETBIT (0-left,1-right)

#include<stdio.h>
#include<malloc.h>
#include<stdlib.h>

#define GETBIT(num,pos) (num >> pos & 1)

struct node
{
    int data;
    struct node *left;
    struct node *right;
};
typedef struct node node;

int nodes;
node *first, *tmp, *current;

void addNode(node *,node *,int);
void swap(int *, int *);
void getRoot(node *, int);
void heapSort(node *);

int main()
{
    int num;
    int cont,i,j;

    while(1)                                                //It gets number from user if previous value is non zero number
    {
        printf("Enter a number\n");
        scanf("%d",&num);
        if(!num)                                            //i'm using 0 as terminating condition to stop adding nodes
            break;                                          //edit this as you wish

        current = (node *)malloc(sizeof(node));
        if(current ==  0)
            return 0;

        current->data = num;
        nodes++;

        for(i=nodes,j=-1; i; i >>= 1,j++);

        if(first == 0)
        {
            first = current;
            first->left = 0;
            first->right = 0;
        }
        else
            addNode(first,first,j-1);

        printf("Need to add more\n");

    }
    printf("Number of nodes added : %d\n",nodes);

    while(nodes)
    {
        printf(" %d -> ",first->data);                                        //prints the largest number in the heap

        for(i=nodes,j=-1; i; i >>= 1,j++);                                    //Updating the height of the tree
        getRoot(first,j-1);
        nodes--;

        heapSort(first);
    }       

    printf("\n\n");
    return 0;
}

void swap(int *a,int *b)
{
    *a = *a + *b;
    *b = *a - *b;
    *a = *a - *b;
}

void addNode(node *tmp1,node *parent, int pos)
{
    int dirxn = GETBIT(nodes,pos);                                   // 0 - go left, 1 - go right

    if(!pos)
    {
        if(dirxn)
            tmp1->right = current;
        else
            tmp1->left = current;

        current->left = 0;
        current->right = 0;

        if(current->data > tmp1->data)
            swap(&current->data, &tmp1->data);
    }

    else
        if(dirxn)
            addNode(tmp1->right,tmp1,pos-1);
        else
            addNode(tmp1->left,tmp1,pos-1);

    if(tmp1->data > parent->data)
        swap(&parent->data,&tmp1->data);
}

void getRoot(node *tmp,int pos)
{
    int dirxn;

    if(nodes == 1)
        return ;

    while(pos)
    {
        dirxn = GETBIT(nodes,pos);

        if(dirxn)
            tmp = tmp->right;
        else
            tmp = tmp->left;
        pos--;
    }

    dirxn = GETBIT(nodes,pos);

    if(dirxn)
    {
        first->data = tmp->right->data;
        free(tmp->right);
        tmp->right = 0;
    }
    else
    {
        first->data = tmp->left->data;
        free(tmp->left);
        tmp->left = 0;
    }
}

void heapSort(node *tmp)
{
    if(!tmp->right && !tmp->left)
        return;

    if(!tmp->right)
    {
        if(tmp->left->data > tmp->data)
            swap(&tmp->left->data, &tmp->data);
    }
    else
    {
        if(tmp->right->data > tmp->left->data)
        {
            if(tmp->right->data > tmp->data)
            {
                swap(&tmp->right->data, &tmp->data);
                heapSort(tmp->right);
            }
        }           
        else
        {
            if(tmp->left->data > tmp->data)
            {
                swap(&tmp->left->data, &tmp->data);
                heapSort(tmp->left);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-17T08:54:34.950

```
 #include<stdio.h>
    #include<stdlib.h>

    typedef struct node
    {
            int data;
            struct node *next;
    }N;

void maxheap(N **,int n,int i);

void display(N **head)
{
        N *temp1=*head;
        while(temp1!=NULL)
        {
                printf("%d ",temp1->data);
                temp1=temp1->next;
        }
}

int main(int argc,char *argv[])
{
        N *head=NULL,*temp,*temp1;
        int a,l,r,n,i;
        n=0;

        FILE *fp;

        fp=fopen(argv[1],"r");

        while((a=fscanf(fp,"%d",&l))!=EOF)
        {
                temp=(N*)malloc(sizeof(N));
                temp->data=l;
                temp->next=NULL;

                if(head==NULL)
                head=temp;

                else
                {
                        temp1=head;
                        while(temp1->next!=NULL)
                                temp1=temp1->next;

                        temp1->next=temp;
                }
                n++;
        }

        display(&head);
        printf("\nAfter heapifying..\n");
        for(i=(n/2)-1;i>=0;i--)
                maxheap(&head,n,i);

        temp1=head;
        while(temp1!=NULL)
        {
                printf("%d ",temp1->data);
                temp1=temp1->next;
        }

        printf("\n");
}

void maxheap(N **head,int n,int i)
{
        int larg,l,r,tem,lar;

        larg=i;
        l=(2*i)+1;
        r=(2*i)+2;

        lar=larg;
        N *temp=*head;
        while(lar!=0 && lar<n)
        {
                temp=temp->next;
                lar--;
        }

        N *temp1=*head;
      lar=l;
        while(lar!=0 && lar<=n)
        {
                temp1=temp1->next;
                lar--;
        }

        if(l<n && temp->data<temp1->data)
        {
                larg=l;
                lar=l;
                temp=*head;
                while(lar!=0 && lar<n)
                {
                        temp=temp->next;
                        lar--;
                }
        }

        lar=r;
        temp1=*head;
        while(lar!=0 && lar<n)
        {
                temp1=temp1->next;
                lar--;
        }

        if(r<n && temp->data<temp1->data)
        {
                larg=r;
                lar=r;
                temp=*head;
                while(lar!=0 && lar<=n)
                {
                        temp=temp->next;
                        lar--;
                }
        if(larg!=i)
        {
                tem=temp->data;
                temp->data=temp1->data;
                temp1->data=tem;

                maxheap(&(*head),n,larg);
        }
} 
```

//只有heapify函数

# java - java JIT什么时候优化错误？

> ID：10885451
> 
> 赞同：4
> 
> 时间：2012-06-04T17:27:38.237
> 
> 标签：java, performance, jit

JIT 在 10k 次调用后进行方法优化（-XX:+PrintCompilation），您可以使用 -XX:CompileThreshold 对其进行配置。我读到不降低该阈值的原因是 JIT 优化可能是错误的，或者您优化了不经常使用的代码。关于这个领域，我有几个问题：

1.  我认为错误的优化（即：堆栈替换）是由于多态方法的延迟类加载。但是在找到 3 个实现（我认为）之后，JVM 只是进行索引表查找。当然，如果你有更多的多态 impl，速度会受到影响。多态方法是错误 JIT 优化的唯一原因还是主要原因？如果不是，其他是什么？
2.  如果我可以在启动时强制加载所有类，以便 JVM 可以预先构建此类索引表，那么预先进行整体优化不是更好吗？优化所有方法有什么问题？如果我的目标只是速度，成本是多少？
3.  与 C++ 相比，如果我的源代码已关闭，这意味着没有 3rd 方库，就像那个低延迟系统一样，有没有办法预先强制优化以提高性能以更接近 C++？
4.  Peter Lawrey 在他的 oracle 杂志文章中提到，您可以通过在生产中人为地运行足够的测试数据来满足阈值来启动 JIT。这样做在生产环境中似乎很危险，而且你会被解雇。必须有更好的方法以最小的风险来做到这一点。
5.  非常感谢有关此主题（涉及 java 和 c++）的任何好的参考。

更新：#3。永远不要期望 java 比 c++ 快，只是想更接近。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:32:16.297

> 有没有办法强制预先优化以提高性能以优于 c++？

没有。这是 Java 规范中强制执行的语义和 JVM 生态系统工作方式的一个基本限制，假设实现和代码质量相同，它将比 C++ 实现慢。有关更多详细信息，请查看[我关于此主题的现有答案。](https://softwareengineering.stackexchange.com/questions/101649/a-modern-review-of-java/101745#101745)

# c# - 如何使物体在指定位置精确地寻找并减速到停止？

> ID：10885453
> 
> 赞同：3
> 
> 时间：2012-06-04T17:27:46.213
> 
> 标签：c#, math, logic, unity3d

**介绍**

我目前正在尝试创建一个脚本（Unity 中的 C# 脚本）来控制 GameObject 的指向和单击行为。

从本质上讲，玩家最终将通过简单地点击屏幕来控制热气球，由此对象将开始加速并朝着点击位置移动。当在点击位置的特定距离处，热气球应该开始向相反方向加速（因此减速）并完全停止在点击位置。

我已经创建了一个功能齐全的注释脚本（在这篇文章的底部找到），它只是将一个游戏对象以恒定的速度移动到点击的位置，然后，当在特定距离内时，它开始减速直到停在该点。

我还创建了一个单独且功能齐全的脚本，该脚本在加速时向点击位置移动（获得那种小行星推力行为）。这也可以在帖子底部找到。

**问题**

现在我面临的问题是我已经工作了很长时间来找到一个解决方案，您可以将这两种行为作为一个工作脚本来实现，即热气球具有加速行为，而还减速并停在目标位置，就像在这里找到的这个视觉示例一样：

[视觉到达行为演示](http://www.red3d.com/cwr/steer/Arrival.html)

**问题**

然后我的问题变成：

你如何才能使到达行为不仅使用恒定速度，而且还包括方程中的加速度？我试图研究这个问题并尝试自己的解决方案，但我所做的一切似乎都没有按照应有的方式工作。

**脚本附件**

***具有到达行为的恒定速度的指向和单击移动***

```
using UnityEngine;
using System.Collections;

public class PlayerControl : MonoBehaviour 
{
    // Fields
    Transform cachedTransform;
    Vector3 currentMovementVector;
    Vector3 lastMovementVector;
    Vector3 currentPointToMoveTo;
    Vector3 velocity;
    int movementSpeed;

    Vector3 clickScreenPosition;
    Vector3 clickWorldPosition;

    float slowingDistance = 8.0f;

    Vector3 desiredVelocity;

    float maxSpeed = 1000.0f;

    // Use this for initialization
    void Start () 
    {
        cachedTransform = transform;
        currentMovementVector = new Vector3(0, 0);
        movementSpeed = 50;
        currentPointToMoveTo = new Vector3(0, 0);
        velocity = new Vector3(0, 0, 0);
    }

    // Update is called once per frame
    void Update () 
    {
        // Retrive left click input
        if (Input.GetMouseButtonDown(0))
        {
            // Retrive the click of the mouse in the game world
            clickScreenPosition = Input.mousePosition;

            clickWorldPosition = Camera.main.ScreenToWorldPoint(new      Vector3(clickScreenPosition.x, clickScreenPosition.y, 0));
            currentPointToMoveTo = clickWorldPosition;

            currentPointToMoveTo.z = 0;

            // Calculate the current vector between the player position and the click
            Vector3 currentPlayerPosition = cachedTransform.position;

            // Find the angle (in radians) between the two positions (player position and click position)
            float angle = Mathf.Atan2(clickWorldPosition.y - currentPlayerPosition.y, clickWorldPosition.x - currentPlayerPosition.x);

            // Find the distance between the two points
            float distance = Vector3.Distance(currentPlayerPosition, clickWorldPosition);

            // Calculate the components of the new movemevent vector
            float xComponent = Mathf.Cos(angle) * distance;
            float yComponent = Mathf.Sin(angle) * distance;

            // Create the new movement vector
            Vector3 newMovementVector = new Vector3(xComponent, yComponent, 0);
            newMovementVector.Normalize();

            currentMovementVector = newMovementVector;
        }

        float distanceToEndPoint = Vector3.Distance(cachedTransform.position, currentPointToMoveTo);

        Vector3 desiredVelocity = currentPointToMoveTo - cachedTransform.position;

        desiredVelocity.Normalize();

        if (distanceToEndPoint < slowingDistance)
        {
            desiredVelocity *= movementSpeed * distanceToEndPoint/slowingDistance;
        }
        else
        {
            desiredVelocity *= movementSpeed;
        }

        Vector3 force = (desiredVelocity - currentMovementVector);
        currentMovementVector += force;

        cachedTransform.position += currentMovementVector * Time.deltaTime;
    }
} 
```

***使用加速度但没有到达行为的指向和单击移动***

```
using UnityEngine;
using System.Collections;

public class SimpleAcceleration : MonoBehaviour 
{
    Vector3 velocity;
    Vector3 currentMovementVector;

    Vector3 clickScreenPosition;
    Vector3 clickWorldPosition;

    Vector3 currentPointToMoveTo;
    Transform cachedTransform;

    float maxSpeed;

    // Use this for initialization
    void Start () 
    {
        velocity = Vector3.zero;
        currentMovementVector = Vector3.zero;
        cachedTransform = transform;
        maxSpeed = 100.0f;
    }

    // Update is called once per frame
    void Update () 
    {
        // Retrive left click input
        if (Input.GetMouseButtonDown(0))
        {
            // Retrive the click of the mouse in the game world
            clickScreenPosition = Input.mousePosition;

            clickWorldPosition = Camera.main.ScreenToWorldPoint(new Vector3(clickScreenPosition.x, clickScreenPosition.y, 0));
            currentPointToMoveTo = clickWorldPosition;

            // Reset the z position of the clicking point to 0
            currentPointToMoveTo.z = 0;

            // Calculate the current vector between the player position and the click
            Vector3 currentPlayerPosition = cachedTransform.position;

            // Find the angle (in radians) between the two positions (player position and click position)
            float angle = Mathf.Atan2(clickWorldPosition.y - currentPlayerPosition.y, clickWorldPosition.x - currentPlayerPosition.x);

            // Find the distance between the two points
            float distance = Vector3.Distance(currentPlayerPosition, clickWorldPosition);

            // Calculate the components of the new movemevent vector
            float xComponent = Mathf.Cos(angle) * distance;
            float yComponent = Mathf.Sin(angle) * distance;

            // Create the new movement vector
            Vector3 newMovementVector = new Vector3(xComponent, yComponent, 0);
            newMovementVector.Normalize();

            currentMovementVector = newMovementVector;
        }

        // Calculate velocity
        velocity += currentMovementVector * 2.0f * Time.deltaTime;

        // If the velocity is above the allowed limit, normalize it and keep it at a constant max speed when moving (instead of uniformly accelerating)
        if (velocity.magnitude >= (maxSpeed * Time.deltaTime))
        {
            velocity.Normalize();
            velocity *= maxSpeed * Time.deltaTime;
        }

        // Apply velocity to gameobject position
        cachedTransform.position += velocity;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:00:14.977

根据您希望运动出现的方式，您可能需要[等速方程](http://hyperphysics.phy-astr.gsu.edu/hbase/mot.html#mot1)或[这些方程](http://hyperphysics.phy-astr.gsu.edu/hbase/avari.html)。恒速会更容易。

例如：您可以将起点和终点之间的距离除以 2。然后使用数学计算中途加速，然后减速。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T21:11:51.047

改编第一个脚本：

`velocity`像第二个脚本一样引入一个变量。将其设置为`movementSpeed`in `Start()`，之后不要使用`movementSpeed`。**在完美运行之前不要继续。**

现在介绍加速度：

```
if (distanceToEndPoint < slowingDistance)
{
   velocity *= distanceToEndPoint/slowingDistance;
}
else
{
   velocity += direction * 2.0f * Time.deltaTime;
} 
```

# url - 如何整理网址

> ID：10885454
> 
> 赞同：0
> 
> 时间：2012-06-04T17:27:49.017
> 
> 标签：url, structure, permalinks

有没有人有关于如何创建更具可读性的页面链接的提示？

我不知道正确的术语是什么，但是 wordpress 有一个称为永久链接的功能，它可以整理 url 以便更具可读性（例如 http://example.com/2012/post-name/）。

我正在寻找的不一定与 wordpress 使用的技术相同。

还是唯一简单的解决方案是好的旧目录结构？

谢谢！

[http://codex.wordpress.org/Using_Permalinks](http://codex.wordpress.org/Using_Permalinks)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:36:00.990

你必须使用`mod_rewrite`. 如果您使用的是付费托管服务，那么您很可能已经在 Apache 中启用了此功能。如果没有，有很多关于构建它的教程。

现在计划您希望 URL 的外观。比如你想把*http://yoursite.com/tutorials.php?req=tutorial&id=3&page=0*变成*http://yoursite.com/tutorials/3/0.php*

打开或创建您的`.htaccess`文件并添加类似

```
RewriteEngine On
RewriteRule ^tutorials/(.*)/(.*).php /tutorials.php?req=tutorial&tut_id=$1&page=$2 
```

注意模式：是按顺序放置`(.*)`变量的地方。`$1`

来源和更多信息： http: [//www.devshed.com](http://www.devshed.com/c/a/Apache/Search-Engine-Friendly-URLs-with-mod-rewrite/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:36:20.620

总是有[http://tinyurl.com](http://tinyurl.com)，它允许您从任何给定的长 url 创建短链接。如果您尝试通过程序执行此操作，甚至还有一个 API：[http](http://tinyurl.com/779a2g9) ://tinyurl.com/779a2g9 。

但是，这假设我正确理解了您的问题。

# c# - 如何绑定开始鼠标选择的按钮内容

> ID：10885455
> 
> 赞同：0
> 
> 时间：2012-06-04T17:27:53.437
> 
> 标签：c#, wpf

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="storyboard.clear"
x:Name="Window"
Title="clear"
Width="640" Height="480">

<Grid x:Name="LayoutRoot">
    <Button x:Name="btn_a" Content="A" Height="56" Margin="208,149,0,0" VerticalAlignment="Top" HorizontalAlignment="Left" Width="75" Click="btn_a_Click" />
    <TextBox x:Name="txt_display" Height="50" Margin="208,57,252,0" TextWrapping="Wrap" VerticalAlignment="Top"/>
    <Button x:Name="btn_b" Content="B" Height="56" Margin="297,149,252,0" VerticalAlignment="Top" Click="btn_b_Click" />
</Grid> 
```

```
public partial class clear : Window
{
    public clear()
    {
        this.InitializeComponent();         

    }

    private void btn_a_Click(object sender, RoutedEventArgs e)
    {
        txt_display.Text += btn_a.Content.ToString();
        txt_display.SelectionStart = txt_display.Text.Length;
        txt_display.Focus();
    }

    private void btn_b_Click(object sender, RoutedEventArgs e)
    {
        txt_display.Text += btn_b.Content.ToString();
        txt_display.SelectionStart = txt_display.Text.Length;
        txt_display.Focus();
    }
} 
```

![在此处输入图像描述](../Images/e063704ab5cc2f89c8dece61cf3c808f.png)

在这里，我想绑定鼠标选择开始的按钮内容，如上图。

但我无法解决这种情况。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:38:29.490

不确定我是否理解您的问题，但您是否尝试在文本框中的光标位置插入按钮的内容？如果是这种情况，您将需要获取 TextBox 的插入符号索引以确定插入位置。

```
private void btn_a_Click(object sender, RoutedEventArgs e)
{
    var caretIndex = txt_display.CaretIndex;
    txt_display.Text =txt_display.Text.Insert(caretIndex, btn_a.Content.ToString());
    txt_display.SelectionStart = txt_display.Text.Length;
    txt_display.Focus();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:43:30.617

您应该尝试更具体地说明您想做的事情。假设您恰好有两个按钮，并且您希望它们的内容与 TextBox 插入符号位置右侧的第一个和第二个字母同步，您可以为 TextBox SelectionChanged 事件创建一个事件，如下所示：

```
 private void txtbox_SelectionChanged(object sender, RoutedEventArgs e)
    {
        if (btn != null)
        {
            string letters = txtbox.Text.Substring(txtbox.SelectionStart);

            if (letters.Length > 0)
                btn.Content = letters[0];

            if (letters.Length > 1)
                btn2.Content = letters[1];
        }
    } 
```

在这种情况下，如果您有一个 TextBox，其中包含文本“Hello World！” 并且插入符号位置在**d**的左侧，然后按钮将显示文本“d”和“！” 分别。

# azure - 在 blob 上获取多个租约

> ID：10885457
> 
> 赞同：1
> 
> 时间：2012-06-04T17:27:57.380
> 
> 标签：azure, azure-blob-storage

如果我有多个计算实例尝试同时在同一个 blob 上获取租约，它似乎经常成功。我的印象是，一旦发出租约（因此，被客户收购），就不可能同时发出另一个租约？

我希望是这样，我一直在使用 blob 租约作为 Azure 中的分布式锁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:50:43.053

您需要阅读@Smarx 中的这篇文章“使用租约管理 Windows Azure 中的并发”以获得确切答案：

@Smarx：“租约是锁的分布式等价物。在分布式系统中很少使用锁，如果有的话，因为当分布式系统中的组件或网络出现故障时，很容易使整个系统陷入死锁状态。租约缓解了这个问题，因为有一个内置的超时，在此之后资源将再次被访问。”

[http://blog.smarx.com/posts/managing-concurrency-in-windows-azure-with-leases](http://blog.smarx.com/posts/managing-concurrency-in-windows-azure-with-leases)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:46:53.197

只要持有一个租约，就不能获得另一个租约。但是，如果不续订，租约会在一分钟后到期。

# jquery - 在 iPad 上捕捉侧滑效果

> ID：10885458
> 
> 赞同：1
> 
> 时间：2012-06-04T17:27:59.203
> 
> 标签：jquery, ipad, slide, tablet, effect

是否有可能通过 jQuery 或类似方法来捕捉（检测）在 iPad 上可能出现的手指侧滑？

`onFingerSideSlide`当在 iPad 或平板电脑上查看时，如果能够在网站上更改页面或类似内容，那就太好了。如果存在这种可能性，尝试一些有创意的东西可能会很有趣。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:13:20.610

为此目的制作了几个 jQuery 插件。

SwipeJs 是一个不错的选择。[在 GitHub 上](https://github.com/bradbirdsall/Swipe/)找到它。

在 iPad 上访问[SwipeJS.com](http://SwipeJS.com)进行试用。

# asp.net - 依赖注入的 Ninject 和 Asp.Net Web API 问题

> ID：10885462
> 
> 赞同：1
> 
> 时间：2012-06-04T17:28:11.600
> 
> 标签：asp.net, ninject, asp.net-web-api

我有一个 ASP.NET web api 项目和一个 MVC3 项目。对于这两个项目，Ninject 都被配置为依赖解析器。

我在 web api 项目中遇到问题，因为我正在编写自己的 Authorization 属性，以便授权对我的 API 的传入请求。在这个属性中，我需要注入一些依赖项来对请求进行一些验证。

所以这就是属性中的代码的样子：

```
public class CustomAuthorizeAttribute : ActionFilterAttribute 
{
    public string Roles { get; set; }

    [Inject]
    public IAuthSchemaSelector _schemaSelector { private get; set; }

    [Inject]
    public IUserService _userService { private get; set; }

    [Inject]
    public IRoleVerifier _roleVerifier { private get; set; }

    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        try
        {
            var principal = _schemaSelector.Authorize(actionContext.Request, Roles, _userService, _roleVerifier);
            actionContext.Request.Properties["MS_UserPrincipal"] = principal;
        }
        catch (Exception ex)
        {
            //create error response with proper http status
        }
    }
} 
```

}

_schemaSelector 决定客户端使用哪个授权模式来请求 API 中包含的服务（这是因为我计划支持不同的模式，如 OAuth、API 密钥授权等。现在我只使用 HttpBasic）。因此，如果一切顺利，我设置了主要用户，这样我就可以在 ApiController 中访问它。

一切都很完美，直到我从网站 de MVC3 项目进行修改。例如，网站中有一个功能可以更改用户密码。假设您有一个初始密码 123456。我使用 HttpBasic 从 api 发出请求，api 响应 http 状态 202。

现在我把网站上的密码改成1234567，使用旧密码（123456）从api执行另一个请求，它响应202，这是错误的。

_userService 对象的行为不正常（其他两个对象都没有注入），当我调试动作过滤器时，我注意到整个对象处于以前的状态。我猜想ninject的配置方式有问题。

这就是我配置ninject的方式：

在 NinjectWebCommon.cs 中：

```
GlobalConfiguration.Configuration
            .ServiceResolver
            .SetResolver(t => kernel.TryGet(t),
                         t => kernel.GetAll(t)); 
```

在ninject模块文件中：

```
kernel.Bind<IUserService>().To<UserService>(); //user service is part of the unit of work
kernel.Bind<IUnitOfWork>().To<EFUnitOfWork>().InRequestScope();
kernel.Bind<IRoleVerifier>().To<RoleVerifier>();
kernel.Bind<IAuthSchemaSelector>().To<AuthSchemaSelector>(); 
```

值得一提的是，我使用属性注入模式将 _userService 注入到 ActionFilterAttribute 中，因为我不能使用构造函数模式。我不知道这是否是问题所在。

请帮忙！我有点迷失在这里！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:22:24.957

您如何将您的 CustomAuthorizeAttribute 绑定到操作？它是全局过滤器还是基于每个操作？是您的服务/等。将状态存储在内存中？

不幸的是，这里没有很多信息可以帮助调试问题。也许您可以发布有关如何完成密码更改以及发回 202 响应等的更多信息？

# c# - 如何直接从流中反序列化非常大的 JSON 数据，而不是一次加载整个 json

> ID：10885463
> 
> 赞同：8
> 
> 时间：2012-06-04T17:28:12.777
> 
> 标签：c#, json, json.net

> **可能重复：**
> [C# 中的增量 JSON 解析](https://stackoverflow.com/questions/9026508/incremental-json-parsing-in-c-sharp)

以下问题是相关的，但不解决（至少直接）我要解决的问题：

*   [将文本文件中的 JSON 数据流加载到对象 C#](https://stackoverflow.com/questions/3973878/load-json-data-stream-from-text-file-into-objects-c-sharp)
*   [使用 NewtonSoft 将 JSON 反序列化为 .net 对象（或者可能是 linq to json？）](https://stackoverflow.com/questions/4749639/deserializing-json-to-net-object-using-newtonsoft-or-linq-to-json-maybe)

我正在尝试使用[Json.NET](http://json.codeplex.com/)反序列化可能非常大的 JSON 数据。我不想将整个文件加载到内存中并使用 解析 JSON `JObject.Parse(JsonFullString)`，而是希望逐个令牌从流令牌中读取并构造对象图。我将不胜感激有关如何从流中实现反序列化的任何建议。

注意：我的意图是用更好的实现替换以下代码

```
 string jsonData = string.Empty;
      byte[] buffer = new byte[16 * 1024];
      using (MemoryStream ms = new MemoryStream())
      {
          int read;
          while ((read = stream.Read(buffer, 0, buffer.Length)) > 0)
          {
              ms.Write(buffer, 0, read);
          }
          jsonData = ASCIIEncoding.ASCII.GetString(ms.ToArray());
       }                    
       JObject jObject = JObject.Parse(jsonData);
       var entities = from e in jObject.Root
                      select e; 

```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-06-04T17:38:45.003

好主意！
我认为你可以做的是以下几点：

1.  首先创建对象
2.  正如您现在所做的那样，按块循环读取流
3.  在您阅读的每个块之前检查它是否包含一个标记（如果在其中找到逗号“，”）
4.  如果没有找到逗号 - 读取另一个块（在这种情况下可能是一个较小的块？）
5.  拆分前逗号文本 (data.split(":");) 并在反射或硬编码循环的帮助下，如果您不需要支持每个可能的对象，请将值分配给属性
6.  继续循环。

# java - 推荐一个 Mac OS X Git GUI 来并排比较不同的提交

> ID：10885466
> 
> 赞同：1
> 
> 时间：2012-06-04T17:28:23.160
> 
> 标签：java, eclipse, git, github, egit

我知道我可以将 git 配置为使用备用 diff 工具，例如 tkdiff，并且我可以通过在命令行中输入“git diff commit# commit#”来比较两个任意提交。是否有免费或廉价的 Mac OS X 程序提供 GUI 显示提交网络，让我选择要比较的提交？进行逐个站点差异的能力对我来说很重要。不幸的是，我正在使用的 repo 的结构不适合与 Eclipse/EGit 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:23:00.760

Atlassian 有一个免费工具[SourceTree](http://www.atlassian.com/software/sourcetree/overview)。非常好的 git GUI，他们正在积极支持和改进它。（除了这个工具的用户之外，我与 Atlassian 没有任何联系。）

[github](https://github.com/laullon/gitx.git)上还有一个名为[GitX(L)](https://github.com/laullon/gitx.git)的开源工具。我用了很长一段时间，直到我找到了 SourceTree。它也很好用，但有一些我终于厌倦了的细微差别。开源和商业支持之间的区别。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:30:53.330

XCode 带有 opendiff/File Merge，它工作得很好。Github 的 Mac 应用程序也可以使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-04T19:36:51.727

我喜欢 BeyondCompare，它不是免费的，但它的工作原理完全符合我的预期。您可以将 git 配置为使用 difftool 或 mergetool 从命令行启动它，并并排比较本地或 GitHub 文件。

我过去在 Windows 上使用过它，我正准备为 MacOS 购买它

# android - 向imageviews android添加随机和唯一的图像

> ID：10885467
> 
> 赞同：0
> 
> 时间：2012-06-04T17:28:27.590
> 
> 标签：android, image, random, imageview

我有 16 个关于活动的图像视图......名为 img1->img16。我想要每个图像视图上的差异图像，这不能硬编码，取决于作为额外传递的数字，例如 1、2、3 ......添加到这些视图的图像必须不同。

我目前有添加 16 个图像的代码，但这些不是唯一的......它们是重复的......

```
 int[] imageViews = {
            R.id.img1, R.id.img2,
            R.id.img3, R.id.img4,
            R.id.img5, R.id.img6,
            R.id.img7, R.id.img8,
            R.id.img9, R.id.img10,
            R.id.img11, R.id.img12,
            R.id.img13, R.id.img14,
            R.id.img15, R.id.img16
            };

    int[] images = {
            R.drawable.img1, R.drawable.img2,
            R.drawable.img3, R.drawable.img4,
            R.drawable.img5, R.drawable.img6,
            R.drawable.img7, R.drawable.img8,
            R.drawable.img9, R.drawable.img10,
            R.drawable.img11, R.drawable.img12,
            R.drawable.img13, R.drawable.img14,
            R.drawable.img15, R.drawable.img16
            };

    Random random = new Random(System.currentTimeMillis());

        for(int v : imageViews) 
        {
                ImageView iv = (ImageView)findViewById(v);
                iv.setImageResource(images[random.nextInt(images.length - 1)]);
        } 
```

而且，如果可能的话，我需要它以便图像不会硬编码在图像数组中，因为它们会根据传递的数字而有所不同。

所以这些图像是针对数字 1 的，但是如果将数字 2 传递给活动，则图像会有所不同。

所有细节都保存在本地数据库中，图像都在可绘制文件夹中，并且都将遵循相同的命名样式，例如 img1 一直到 img100 ....

提前谢谢了。

/*更新*/

你好，我已经用下面的代码试过了：

```
Random random = new Random(System.currentTimeMillis());
    List<Integer> generated = new ArrayList<Integer>();
        for(int v : imageViews) 
        {
             int next = random.nextInt(15) + 1;
             if (!generated.contains(next))
             {
                generated.add(next);
                ImageView iv = (ImageView)findViewById(v);
                iv.setImageResource(images[next]);
             }
        } 
```

我猜我可能做错了....但到目前为止我还没有找到重复的，但对差距没有帮助，好像它可能会生成 16 个随机整数，但只会添加唯一的整数，如果你明白的话，而不是生成直到达到 16 个独特的图像？

在这方面有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:39:42.877

每当您获得下一个随机整数时，将该值保存在数组中。然后下次你得到一个随机整数时，检查这个数字是否已经被选中。如果有，请重复该过程，直到选择了未选择的 int。

**编辑：**试试这个代码：

```
Random random = new Random( System.currentTimeMillis() );
List<Integer> generated = new ArrayList<Integer>();
for (int i = 0; i < imageViews.length; i++) {

    int v = imageViews[i];
    int next = random.nextInt( 15 ) + 1;
    if ( !generated.contains( next ) ) {
        generated.add( next );
        ImageView iv = (ImageView) findViewById( v );
        iv.setImageResource( images[next] );
    }
    else {
        i--;
    }
} 
```

# wcf - 使用 EF 调用 WCF 服务时出现无效的程序集错误

> ID：10885469
> 
> 赞同：0
> 
> 时间：2012-06-04T17:28:32.093
> 
> 标签：wcf, entity-framework

我使用 Entity Framework 4.1 编写了一个简单的 WCF 服务。在我的参考资料中，我有 EntityFramework.Dll 4.1.0.0 和 System.Data.Entity 4.0.0.0。我在两者上都将 Copy Local 设置为 True。当我发布服务时，提到的两个 DLL 都在 BIN 文件夹中，但是当我调用服务时，出现以下错误：

给定的程序集名称或代码库“C:\WINDOWS\Microsoft.Net\assembly\GAC_MSIL\System.Data.Entity\v4.0_4.0.0.0__b77a5c561934e089\System.Data.Entity.dll”无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:34:41.853

System.Data.Entity.dll 不可部署。如果您在目标计算机上安装了 .NET Framework 4，您应该拥有此程序集。它应该在 GAC 中。加载程序集时，CLR 首先查看 GAC 并忽略 bin 目录中的任何内容。如果目标计算机上没有 .NET Framework 4，您的程序将无法运行 - System.Data.Entity.dll 是 .NET Framework 的一部分，并且依赖于 .NET Framework（在本例中为 .NET Framework 4）。尝试删除和读取对 System.Data.Entity.dll 的引用以清除您在项目中所做的所有更改以复制它，然后将您的程序部署到目标计算机。

# java - Java Pelops 和 Cassandra NoSQL DB：我可以批量删除行吗？

> ID：10885475
> 
> 赞同：2
> 
> 时间：2012-06-04T17:28:46.977
> 
> 标签：java, cassandra, pelops

我试图弄清楚如何使用 Pelops 批量删除 Cassandra DB 中的行。

理想情况下，我可以指定需要删除的行的 KeyRange。这对我的目的来说很好。

然而，我（尽管很简短）的研究让我相信这目前是不可能的。RowDeletor 只接受 rowKey，而不接受 KeyRange。这些发现正确吗？

我应该能够使用我的 List 函数之一的修改版本以编程方式完成它，但是，KeyRange 会更可取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:21:24.223

不，我认为您不能使用 Pelops 批量删除行，它`RowDeletor`不参与批量操作，并且`Mutator`该类仅对显式命名的列进行删除操作。

如果您查看[Pelops 的代码，`deleteColumns`](https://github.com/s7/scale7-pelops/blob/master/src/main/java/org/scale7/cassandra/pelops/Mutator.java#L561)您会发现它创建了一个删除并将其添加到突变列表中，我认为只需在该列表中添加更多删除将使它们在同一批次中发布。该`getMutationList`方法是受保护的，所以也许您可以创建一个子类来公开该方法，或者有办法向列表添加更多删除。

看起来你可以用 Hector 来做到这一点，它的`Mutator`接口具有采用多个行键的方法，例如`addDeletion(K key, String cf)`and `addDeletion(Iterable<K> keys, String cf)`。所以 Cassandra 至少应该支持每批删除多行。

# jquery - jQuery检查元素ID

> ID：10885477
> 
> 赞同：8
> 
> 时间：2012-06-04T17:28:49.773
> 
> 标签：jquery

我知道有一个名为 .hasClass(); 的插件；

我有以下

`$('#page_background, #header_background').ColorPicker({...`

我将如何检查是否单击了 page_background 而不是 header_background？

这就是我现在拥有的，它不会工作。

```
$('#page_background, #header_background').ColorPicker({
        onSubmit: function(hsb, hex, rgb, el) {
            $(el).val(hex);
            $(el).ColorPickerHide();

            var id = this.id;

            if(id == 'page_background')
                $('body').css("background-color","#"+hex);
        },
        onBeforeShow: function () {
            $(this).ColorPickerSetColor(this.value);
        }
    })
    .bind('keyup', function(){
        $(this).ColorPickerSetColor(this.value);
    }); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T17:31:36.303

```
$(function(){
   $('#page_background, #header_background').click(function(){

   var id = this.id;
   if(id == 'page_background')
     // page background
   else
     //header 
 });
}); 
```

[工作小提琴](http://jsfiddle.net/joycse06/vGJdc/)

当您在颜色选择器`onSubmit`功能中使用它时

```
onSubmit: function(hsb, hex, rgb, el) { 
```

你在哪里得到元素`el`，所以要`id`使用

```
 var id = $(el).attr('id');
 // or
 var id = $(el).prop('id'); // new way
 //or simply
 var id = el.id; // this should work too 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T17:30:27.887

假设您有一个对存储在 中的 clicked 元素的引用`this`，您可以简单地使用本机 DOM 属性：

```
var id = this.id; 
```

如果`this`是 jQuery 对象，而不是 DOM 节点，则可以使用`this.attr("id")`.

另请注意，这`hasClass`是一个普通的 jQuery 方法，而不是插件。它是标准 jQuery 库的一部分。

# objective-c - 如何获取动画 CAEmitterLayer/Cell 的发射器位置？

> ID：10885480
> 
> 赞同：1
> 
> 时间：2012-06-04T17:28:54.697
> 
> 标签：objective-c, ios, animation, caemitterlayer

我有一个带有 CAEmitterCell 的动画 CAEmitterLayer 并且动画运行良好

```
 fireEmitter = (CAEmitterLayer*)self.layer; 
    fireEmitter.emitterPosition = CGPointMake(50, 50);
    fireEmitter.emitterSize = CGSizeMake(10, 10);

    CAEmitterCell* fire = [CAEmitterCell emitterCell];
    ...
    [fire setName:@"fire"];

CAKeyframeAnimation *anim = [CAKeyframeAnimation animationWithKeyPath:@"emitterPosition"];
    anim.path = theBezierPath.CGPath;
    anim.calculationMode = kCAAnimationCubicPaced;
    anim.repeatCount = HUGE_VALF;
    anim.duration = 12.0;
    [self.layer addAnimation:anim forKey:@"fire"]; 
```

我的贝塞尔路径是封闭的，并在四个位置点中形成一个“8”。使用我的 timerFunction 我尝试每秒获取 CAEmitterLayer 的位置。为此我使用

```
-(CGPoint)getEmitterPosition
{
    return fireEmitter.emitterPosition;
} 
```

在发射器类和

```
CGPoint emitterPosition = [self.ParticleEmitterView getEmitterPosition];
NSLog(@"%f / %f", emitterPosition.y, emitterPosition.y); 
```

从定时器功能。

但是当动画运行时，控制台每次调用都会吐出相同的位置，尽管发射器在屏幕上运行。

为什么会这样，我怎样才能获得动画 CAEmitterLayer/Cell 的发射器位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:40:56.543

您是否尝试过查询`CAEmitterLayer`'`presentationLayer`属性并询问`CALayer`其位置的结果？表示层应该允许您访问层在动画期间出现在屏幕上的属性，而发射器层将为您提供所有当前动画结束时的属性。

这是由于[Core Animation 的渲染架构](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/CoreAnimationArchitecture.html#//apple_ref/doc/uid/TP40006655-SW1)中固有的模型视图分离。

# javascript - 同一台计算机上的两个 FireFox 浏览器是否应该共享相同的 cookie？

> ID：10885484
> 
> 赞同：0
> 
> 时间：2012-06-04T17:29:20.527
> 
> 标签：javascript, firefox, browser, cookies

我观察到在同一台 Windows-7 计算机上运行的两个 FireFox 使用 JavaScript 共享相同的 cookie。

Chrome、IE 等的两个实例的行为如何？

是否可以强制浏览器分配自己的私有 cookie 内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:36:49.777

是的。Firefox 使用用户配置文件。只要实例使用相同的配置文件，cookie 就会被共享。Chrome 也是如此。不过，我不确定 IE 配置文件（以及它是否有它们）。

详细了解[Firefox](http://support.mozilla.org/en-US/kb/profiles-where-firefox-stores-user-data)和[Chrome](https://support.google.com/chrome/bin/answer.py?hl=en&answer=2364824)配置文件。

# android - Android 位图缓存

> ID：10885496
> 
> 赞同：1
> 
> 时间：2012-06-04T17:30:20.490
> 
> 标签：android, caching, bitmap, android-asynctask

我正在为我拥有的很多位图图块实现缓存。到目前为止我所做的：

成功实现了 LRU 缓存系统，但是当必须从应用程序的资源中加载切片时，切片仍然加载缓慢。缓存目前的命中率约为 85%。

每当我必须从资源中加载位图时，就像我说的那样，它仍然很慢。考虑到这一点，我现在从异步任务加载位图。在此之前，一切都可以正常加载，但速度相当慢。现在，它更快，因为它不在主线程上工作，但我不可避免地遇到了 OOM 错误。这是我的异步任务的代码：

```
public class loadBitmap extends AsyncTask<Void,Void,Void>
{
    Bitmap bit;
    @Override
    protected Void doInBackground(Void... params) 
    {
        Options opts = new Options();
        bit = BitmapFactory.decodeResource(reso, drawable, opts);
        return null;
    }

    @Override
    protected void onPostExecute(Void result) 
    {
        // TODO Auto-generated method stub
        drawLoadedBit(bit);
        super.onPostExecute(result);
    }
} 
```

关于如何实现这一点的任何想法，以免出现内存不足错误？由于这是在 draw 方法中调用的，我认为对它的多次调用导致了它。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:54:31.890

[参考这个链接](http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/)

他给出了一个很好的关于使用再生位图的教程。此外，要将位图与视图分离[一旦视图被处理]，您可以@Override View#onRemovedFromWindow() 来回收位图。更进一步，如果你仍然有这个问题，你可以创建一个 BitmapPool 来分配你的位图。您可以实现一种算法来计算位图的大小并释放旧位图，这会将您推到任意内存量上（bitamp 内存约为宽度*高度*4 + 对象大小，应该是标称的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:34:20.523

加载后，将其`Bitmap`保存在类变量中。然后下次请求抽签时，在再次从资源加载之前检查类变量是否为非空。

# javascript - 为什么函数不会输出到这个 jQuery 选择器中？

> ID：10885497
> 
> 赞同：0
> 
> 时间：2012-06-04T17:30:22.863
> 
> 标签：javascript, jquery

我希望这是我做过的愚蠢的事情。我在底部附近有一个函数 unigref，它（我相信）输出一个字符串。但是，当我调用该函数来构建一个 jQuery 选择器时，我无法让它正常工作。我知道其他一切都有效，因为当我使用静态字符串时，单选按钮被选中。

这是我的[jsfiddle/9Edxx](http://jsfiddle.net/9Edxx/)。请帮忙。

```
var checkCount = 0;
var maxChecks = 2;

$(document).ready(function() {

$("#test").click(function() {
    alert($(':checked').length);
});

$(':checkbox[name=checkbox]').change(function() {

    checkCount = $(':checkbox:checked').length;

    if (checkCount >= maxChecks) {
      $(':checkbox[name=checkbox]').not(':checked').attr('disabled', true);  
        $(":radio[value="+uniqref()+"]").prop('checked', true);

    } else {
      $(':checkbox[name=checkbox]:disabled').attr('disabled', false);
    }

    if (this.checked) {
        $("td.label").append("<label>" + this.value + "</label>");
    } else {
        $("td.label").find(":contains('" + this.value + "')").remove();
    }

});

$('#button').click(function() {
    alert(uniqref());
});

function uniqref() {
    return $("td.label").text().split('').sort().join('').replace(/\s/g, "");
}

});​ 
```

**更新：错字是正确的，但问题仍然存在。**

[http://jsfiddle.net/9Edxx/](http://jsfiddle.net/9Edxx/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T17:36:36.147

是的，这真的很愚蠢：这只是一个错字。

```
$(":radio[value="+unigref()+"]").prop('checked', true); 
```

应该

```
$(":radio[value="+uniqref()+"]").prop('checked', true); 
```

用小写`Q`而不是`G`.

* * *

此外，您在实际更新 td.label 的值之前调用了 uniqref()。

应该是这个顺序：

```
if (this.checked) {            
    // ...
}

if (checkCount >= maxChecks) {            
    // ...
} 
```

[http://jsfiddle.net/7mvmT/7/](http://jsfiddle.net/7mvmT/7/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T17:53:05.533

[http://jsfiddle.net/7mvmT/6/](http://jsfiddle.net/7mvmT/6/)

基本上这一行：

```
$(":radio[value="+uniqref()+"]").prop('checked', true); 
```

被过早地调用（在实际选中复选框之前。一个简单而丑陋的黑客：

```
setTimeout(function(next) {               
     $(":radio[value="+uniqref()+"]").prop('checked', true);    
}, 0); 
```

解决它。

正如 Niko 提到的，你还有一个错字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T18:44:40.937

无需破解。 [http://jsfiddle.net/dn7gM/](http://jsfiddle.net/dn7gM/)

ps：仅适用于前 2 台收音机，因为并非所有 id 都设置正确；-)

# sql - SQL，在表中选择

> ID：10885499
> 
> 赞同：0
> 
> 时间：2012-06-04T17:30:27.750
> 
> 标签：sql, postgresql

嘿嘿不知道怎么弄了。。。。

它的功课：列出代码和购买汽车的消费者仅“阿根廷”国家。

> ```
> Table sell: 
> ```

```
customer | resell  | veicle    |    date    |  value
---------+---------+-----------+------------+----------
 02      | 01      | 03        | 2010-02-05 | 17500.00
 04      | 02      | 01        | 2010-01-07 | 28000.00
 01      | 03      | 08        | 2010-02-15 | 28000.00
 02      | 03      | 02        | 2010-03-12 | 42000.00
 03      | 04      | 06        | 2010-02-06 | 11500.00
 03      | 02      | 05        | 2010-01-25 | 22100.00
 01      | 01      | 04        | 2010-01-21 | 15500.00 
```

> 表客户：

```
 cod    |    name    | lastname
--------+------------+------------
 01     | Jose       | Alves
 02     | Paulo      | Cunha
 03     | Maria      | DPaula
 04     | Joana      | Silveria 
```

> 台车：

```
 cod    |manufacturer|     model       | year |  country  |  price
--------+------------+-----------------+------+-----------+----------
 01     | 01         | Gol             | 2000 | Brasil    | 25000.00
 02     | 01         | Golf            | 2005 | Argentina | 39000.00
 03     | 04         | Ford Ka         | 1990 | Brasil    | 15000.00
 04     | 03         | Corsa Seda      | 1995 | Brasil    | 12500.00
 05     | 04         | Fiesta          | 2003 | Argentina | 20000.00
 06     | 03         | Corsa Seda      | 1995 | Argentina | 10000.00
 07     | 05         | Palio           | 2002 | Brasil    | 15000.00
 08     | 05         | Siena           | 2006 | Brasil    | 26000.00 
```

我猜它开始：

```
SELECT customer.cod, customer.name 
FROM sell, customer 
WHERE (SELECT cod 
        FROM veicle 
        WHERE veicle.country = 'Argentina') = sell.veicle; 
```

只选择阿根廷汽车...请引导我找到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:39:31.033

```
SELECT c.*
FROM   customer c
WHERE EXISTS (
    SELECT 1
    FROM   sell s
    JOIN   veicle v ON v.cod = s.veicle
    WHERE  s.customer = c.cod
    AND    v.country = 'Argentina'
    )
AND NOT EXISTS (
    SELECT 1
    FROM ...
    ); 
```

我会把剩下的留给你，因为这是家庭作业。填写`...`以排除购买非阿根廷车辆的客户 - 与第一`EXISTS`条非常相似。如果你理解了第一个，你就可以完成剩下的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:34:41.200

试试这个 `SELECT DISTINCT customer.cod, customer.name || customer.lastname FROM customer, veicle, sell WHERE customer.cod = sell.customer AND veicle.cod = sell.veicle AND veicle.country = 'Argentina'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:34:31.037

查看表连接。这样，您可以代替执行子查询（您的 where 语句中的内容），而是加入表（有点像您的`From`子句，但您应该指定它加入的内容），然后在您的 where 您可以放置​​ veicle.country = '阿根廷'。

仅供参考，车辆拼写错误。应该是车辆。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T17:40:00.253

试试这个 ：

```
 SELECT c.cod, c.name,c.last_name,v.model
 FROM sell as s JOIN customer as c JOIN veicle as v ON s.veicle = v.cod and s.customer = c.cod
 WHERE v.country = 'Argentina' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T18:52:46.847

```
WITH minima AS (
        SELECT DISTINCT s.customer
        , MIN(v.country) AS mi
        , MAX(v.country) AS ma
        FROM sell s
        JOIN veicle v ON s.resell = v.cod
        GROUP BY s.customer
        )
SELECT cu.* FROM customer cu
JOIN minima mm ON mm.customer = cu.cod
WHERE mm.mi = 'Argentina'
AND mm.ma = 'Argentina'
        ; 
```

# php - PHP 代码超出 PHP 标签 ( )

> ID：10885510
> 
> 赞同：0
> 
> 时间：2012-06-04T17:31:37.503
> 
> 标签：php

我一直在读一本关于 Zend 框架的书，但我无法弄清楚这个 HTML/PHP 代码部分。它包含在 MVC 方法的 VIEWS 部分中：

```
<select name="genre">
<?php foreach ($this->genres as $genre) { ?> 
<option value="<?php echo $genre ?>"><?php echo $genre ?></option>
<?php } ?>
</select> 
```

流派 ( `$this->genres`) 是指`array('rock', 'r&b', 'country', 'rap', 'gospel', 'rock n roll', 'techno')`.

该代码运行完美，产生了一个下拉选择菜单，但我不明白第二行是如何合法的，更不用说工作了。PHP 代码如何在其封闭标签之外工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:35:35.763

您可以将`?>`和`<?php`标记之间的部分视为 echo 的字符串参数（但没有`$variables`或引号解释）。

所以`<?php echo 2;?>3`等价于`<?php echo 2; echo 3;?>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:36:33.487

在这种情况下，PHP 是一种不寻常的（模板化）语言。解析器实际上将介于`?>`和之间的所有内容`<?php`视为某种奇怪的回声。它作为程序代码的一部分被忽略，尽管解析器确实运行（它只是输出它并作为程序代码的一部分跳过它）。

从[PHP 手册](http://www.php.net/manual/en/language.basic-syntax.phpmode.php)：

> PHP 解析器会忽略一对开始和结束标记之外的所有内容，这允许 PHP 文件具有混合内容。这允许 PHP 嵌入到 HTML 文档中，例如创建模板。
> (...)
> 这按预期工作，因为当 PHP 解释器点击 ?> 结束标签时，它只是开始输出它找到的任何内容（除了紧随其后的换行符 - 请参阅指令分隔），直到它遇到另一个开始标签，除非在在条件语句的中间，在这种情况下，解释器将在决定跳过哪些内容之前确定条件语句的结果。

这允许 PHP 用于许多事情。您不能只用它创建动态 HTML 文件，例如，您还可以创建 XML（尽管正确获取 XML 标头有点棘手）、文本文件、CSS 文件等，只要运行 PHP 解释器对于该文件，它将执行`<?php`和`?>`作为程序代码之间的所有内容，其余部分将按原样输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:36:07.153

记住 PHP 代表“PHP：超文本预处理器”会有所帮助。简而言之，它的主要工作是产生 HTML 输出。

PHP 标记内的所有内容都在服务器端执行，并根据需要生成输出。这将添加到 PHP 忽略的所有内容（PHP 标记之外的任何内容，例如`<option value...></option>`您的情况。

您可以将其想象为 PHP 引擎每次遇到 PHP 标记时都会打开和关闭。

```
<?php //this gets processed ?>
This is sent as output, unchanged
<?php // this gets processed ?> 
```

等等。

# ruby-on-rails - Rails 无法在机架中间件中获得后期响应

> ID：10885516
> 
> 赞同：1
> 
> 时间：2012-06-04T17:32:20.220
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake, middleware

我制作了一个 rails 3 rack 中间件来记录用户的操作`request = Rack::Request.new(env)`。

`request.fullpath`所以我将and发送到我的数据库`request.user_agent`，如下所述：

我的问题出现了，我也想获得 POST 响应（要获取从 JSON 有效负载中提取的 ID、人名……）。

所以我得到了`response = Rack::Response.new(request.path)`. 但是当我打印时`response.body`，我只有我的`request.path`，并且`request.params`不包含任何东西......

通过查看 Firebug 的响应，我可以看到我想要的所有数据。

感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:13:18.117

问题解决了！

我终于添加`status, headers, body = @app.call(env)`到我的中间件并将`body`变量发送到我的服务。对于每个 POST 请求，`body`包含我想要的所有发布响应。

# asp.net-mvc-3 - 部分视图的 jQuery 对话框未打开模式

> ID：10885517
> 
> 赞同：1
> 
> 时间：2012-06-04T17:32:20.653
> 
> 标签：asp.net-mvc-3, jquery-ui

我已经构建了一个 jquery 对话框来显示用于输入数据的部分视图。

我已经建立了动作链接：

```
 @Html.ActionLink("Add New Service Provider", "PartialNewCust", "Customer", null,    new { @class = "addServiceProviderLink" }) 
```

我有控制器动作：

```
public ActionResult PartialNewCust()
        {
        return PartialView();
        } 
```

和 div / jQuery 代码：

```
<div id="AddServiceProvDialog" title="Add Service Provider"></div>

<script type="text/javascript">
var linkObj;
$(function () {
    $(".addServiceProviderLink").button();

    $('#AddServiceProvDialog').dialog(
    {
        autoOpen: false,
        width: 400,
        resizable: false,
        modal: true,
        buttons:
        {
            "Add": function () {
                $("#addProviderForm").submit();
            },
            "Cancel": function () {
                $(this).dialog("close");
            }
        }
    });

    $(".addServiceProviderLink").click(function () {
        linkObj = $(this);
        var dialogDiv = $('#AddServiceProvDialog');
        var viewUrl = linkObj.attr('href');
        $.get(viewUrl, function (data) {
            dialogDiv.html(data);
            //validation
            var $form = $("#addProviderForm");
            // Unbind existing validation
            $form.unbind();
            $form.data("validator", null);
            // Check document for changes
            $.validator.unobtrusive.parse(document);
            // Re add validation with changes
            $form.validate($form.data("unobtrusiveValidation").options);
            //open dialog
            dialogDiv.dialog('open');
            return false;
        });

    });

}); 
```

局部视图呈现良好，但会打开一个新页面，并且不会作为模式对话框出现。

我究竟做错了什么。

附带说明：我的自动完成代码也不能由我的 jQuery 日期时间选择器工作......

```
$(document).ready(function() 
{
$(".date").datepicker();
}
);

$(document).ready(function () {
$("#CustByName").autocomplete(
    {
        source: function (request, response) {
            $.ajax(
            {
                url: "/Cases/FindByName", type: "GET", dataType: "json",
                data: { searchText: request.term, maxResults: 10 },
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    response($.map(data, function (item) {
                        return {
                            label: item.CustomerName,
                            value: item.CustomerName,
                            id: item.CustomerID
                        }
                    })
                    );
                }
            });
        },
        minLength: 3
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:26:36.703

我的猜测是您`return false`在按钮的单击处理程序中放错了语句，因此不会像您期望的那样阻止默认行为，并且只需遵循链接：

```
$(".addServiceProviderLink").click(function () {
    ...
    $.get(viewUrl, function (data) {
        dialogDiv.html(data);
        ...
        dialogDiv.dialog('open');

        // this return statement should be in the "click" handler,
        // not in success callback of the .get() method !
        return false;
    });

}); 
```

你的代码应该是：

```
$(".addServiceProviderLink").click(function () {
    ...
    $.get(viewUrl, function (data) {
        ...
    });

    // return here to prevent default click behavior
    return false;
}); 
```

# c# - 从 dll 在工具箱中添加其他项目，如果我给某人源，我还需要 dll 吗？

> ID：10885518
> 
> 赞同：0
> 
> 时间：2012-06-04T17:32:21.877
> 
> 标签：c#, asp.net

我有 AjaxControlToolkit.dll ，我已经将 dll 项目添加到我的工具箱中，并且我已经使用了我的 asp.net 项目中的一些项目。

我的问题是：如果我在我的桌面上没有 dll 的情况下给某人整个源代码，并且在我的项目中我使用了 dll 中的一些项目，他们还在他的电脑上工作（这些项目）吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:39:49.233

当其他人打开它时，它将显示为缺少参考路径（带有黄色图标）。所以处理这个问题的最好方法是在解决方案下添加一个名为“项目资源/您喜欢的任何名称”的文件夹，并将这些 DLL 保留在那里。从该位置添加参考。当您将灵魂文件提供给其他人时，它将可用。

# android - 如何在 TCP 连接中解除 FIN（关闭）

> ID：10885519
> 
> 赞同：0
> 
> 时间：2012-06-04T17:32:31.017
> 
> 标签：android

我现在正在学习如何使用 Android/Java Socket 类，我需要以特定方式响应远程计算机发送的关闭（实际上是 FIN）。

Socket 类似乎不是事件驱动的（[http://developer.android.com/reference/java/net/Socket.html](http://developer.android.com/reference/java/net/Socket.html)），即似乎没有任何*onThis*或*onThat*处理程序，所以是什么了解远程计算机何时发送 FIN 的最佳方法是什么？

目前，Android 操作系统使用 ACK 响应 FIN，但我还需要在我的应用程序中做一些事情，所以我需要一种方法让我的应用程序收到警报。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:41:34.887

作为应用程序程序员，您很少需要*关心*FIN 和 ACK。它们内置在 TCP/IP 堆栈中，操作系统会为您处理所有这些。为了你自己的利益，你太低级了；如果您真的想弄乱那些东西，那么您将无法使用`Socket`-您需要进入原始套接字等，这比您准备的要多得多。（我不确定 Java 或 Android 是否*会让*你这样做。）

至于检测另一端关闭它的连接端（这基本上是一个 FIN 是什么），只需从套接字读取即可。如果另一端已关闭其发送端，则 read 将读取 0 个字节（或 return `-1`，具体取决于您是尝试读取一堆字节还是仅读取一个字节）。

# objective-c - iOS 私有 API 调用崩溃

> ID：10885520
> 
> 赞同：2
> 
> 时间：2012-06-04T17:32:32.757
> 
> 标签：objective-c, ios5

这个电话：

```
[UIKeyboardImpl(ShortcutConversionSupport) _shortcutConversionCandidateForInput:] 
```

正在使我的应用程序崩溃。谷歌搜索和查看 Apple 的 API 文档没有任何结果。我从来没有在我的应用程序的任何地方看到过这个电话。*我还在我认为*它被调用的位置放置了一个断点。这是崩溃报告：

（仅供参考，即使使用正确的 dSYM 文件，崩溃日志也无法完全符号化。不知道为什么）

```
Last Exception Backtrace:
0   CoreFoundation                  0x327e188f __exceptionPreprocess + 163
1   libobjc.A.dylib                 0x34837259 objc_exception_throw + 33
2   CoreFoundation                  0x327e1789 +[NSException raise:format:] + 1
3   CoreFoundation                  0x327e17ab +[NSException raise:format:] + 35
4   CoreFoundation                  0x3273bf5b -[__NSCFString substringWithRange:] + 103
5   Buffer                          0x000fa061 0xd6000 + 147553
6   UIKit                           0x32348137 -[UIKeyboardImpl(ShortcutConversionSupport) _shortcutConversionCandidateForInput:] + 615
7   UIKit                           0x32322c07 -[UIKeyboardImpl addInputString:fromVariantKey:] + 287
8   UIKit                           0x32322ae1 -[UIKeyboardImpl handleStringInput:fromVariantKey:] + 165
9   UIKit                           0x32321829 -[UIKeyboardImpl handleKeyEvent:] + 1501
10  UIKit                           0x02b10261 0x2af4000 + 115297
11  UIKit                           0x324bb8a3 -[UIKeyboardLayoutStar sendStringAction:forKey:isPopupVariant:] + 487
12  UIKit                           0x3231fdcd -[UIKeyboardLayoutStar touchUp:] + 3197
13  UIKit                           0x02b2ab47 0x2af4000 + 224071
14  UIKit                           0x3231f0fd -[UIKeyboardLayout touchesEnded:withEvent:] + 381
15  UIKit                           0x3222292b -[UIWindow _sendTouchesForEvent:] + 319
16  UIKit                           0x32222319 -[UIWindow sendEvent:] + 381
17  UIKit                           0x32208695 -[UIApplication sendEvent:] + 357
18  UIKit                           0x32207f3b _UIApplicationHandleEvent + 5827
19  GraphicsServices                0x3188f22b PurpleEventCallback + 883
20  CoreFoundation                  0x327b5523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 39
21  CoreFoundation                  0x327b54c5 __CFRunLoopDoSource1 + 141
22  CoreFoundation                  0x327b4313 __CFRunLoopRun + 1371
23  CoreFoundation                  0x327374a5 CFRunLoopRunSpecific + 301
24  CoreFoundation                  0x3273736d CFRunLoopRunInMode + 105
25  GraphicsServices                0x3188e439 GSEventRunModal + 137
26  UIKit                           0x32236cd5 UIApplicationMain + 1081
27  Buffer                          0x000d8327 0xd6000 + 8999
28  Buffer                          0x000d7dcc 0xd6000 + 7628 
```

我知道这在 substringWithRange 处崩溃：但是什么时候调用这个特定的 ShortcutConversionSupport 方法？我相信这将帮助我隔离问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:20:06.420

这是问题：

```
- (UITextRange *)textRangeFromPosition:(UITextPosition *)fromPosition toPosition:(UITextPosition *)toPosition
{    
// Generate IndexedPosition instances that wrap the to and from ranges
    IndexedPosition *from = (IndexedPosition *)fromPosition;
    IndexedPosition *to = (IndexedPosition *)toPosition;  

    NSRange range = NSMakeRange(MIN(from.index, to.index), ABS(to.index - from.index));
    return [IndexedRange rangeWithNSRange:range];    

} 
```

更具体地说：**ABS（to.index - from.index）**

问题是编译器认为这个否定的乘积是 NSUInteger 因为 to.index 和 from.index 都是 NSUInteger 变量（所以值永远不会是负数）。因此，如果 from.index > to.index 该值将溢出，产生一个 32 位 uint 的最大大小而不是负值。另请注意，ABS 使用**typeof**来确定产品的返回值。这是修复：

```
- (UITextRange *)textRangeFromPosition:(UITextPosition *)fromPosition toPosition:(UITextPosition *)toPosition
{    
    IndexedPosition *from = (IndexedPosition *)fromPosition;
    IndexedPosition *to = (IndexedPosition *)toPosition;  

    NSInteger index = to.index - from.index;    
    NSRange range = NSMakeRange(MIN(from.index, to.index), ABS(index));

    return [IndexedRange rangeWithNSRange:range];

} 
```

顺便说一句，*这只*发生在用户删除了设置>通用>键盘>快捷方式中的所有快捷方式时。

# php - 使用下拉菜单使用多个术语搜索 mysql 数据库

> ID：10885526
> 
> 赞同：0
> 
> 时间：2012-06-04T17:33:11.080
> 
> 标签：php

我有多字段数据库，一些变量是常量，它们是使用下拉菜单选择的，一些变量是免费输入的。我想搜索数据库并找到包含所选术语组合的行数，它在大多数情况下都有效，但如果我使用超过 2 个下拉菜单进行选择，它似乎停止工作：表单搜索：

```
<form  action="search2.php" method="post">
<p>
Name: <input type="text" name="term1" style="background-color:#FFFF11">
<br />
<br />

Dept.: &nbsp;<input type="text" name="term4" style="background-color:#FFFF11">
<br />
<br />

Month: <select name="term2" style="width:65px;  color: black;background-color:#FFFF11">
<option value="" style="background-color: #FFFF11;">...</option>
<option value="Jan" style="background-color: #FFFF11;" >Jan</option>
<option value="Feb" style="background-color: #FFFF11;">Feb</option>
<option value="Mar" style="background-color: #FFFF11;">Mar</option>
<option value="Apr" style="background-color: #FFFF11;" >Apr</option>
<option value="May" style="background-color: #FFFF11;">May</option>
<option value="Jun" style="background-color: #FFFF11;">Jun</option>
<option value="Jul" style="background-color: #FFFF11;" >Jul</option>
<option value="Aug" style="background-color: #FFFF11;">Aug</option>
<option value="Sep" style="background-color: #FFFF11;">Sep</option>
<option value="Oct" style="background-color: #FFFF11;" >Oct</option>
<option value="Nov" style="background-color: #FFFF11;">Nov</option>
<option value="Dec" style="background-color: #FFFF11;">Dec</option>
</select>
<br />
<br />
Year: &nbsp;&nbsp;<select name="term3" style="width:65px;  color: black;background-color:#FFFF11">
<option value="" style="background-color: #FFFF11;">...</option>
<option value="2010" style="background-color: #FFFF11;" >2010</option>
<option value="2011" style="background-color: #FFFF11;">2011</option>
<option value="2012" style="background-color: #FFFF11;">2012</option>
</select>
<br />
<br />

</p>

&nbsp;&nbsp;<input class="button" type="submit" name="submit" value="Submit">
</form> 
```

搜索代码：

```
<?php

include "db.inc.php";
$term1 = $_POST['term1'];
$term2 = $_POST['term2'];
$term3 = $_POST['term3'];
$term4 = $_POST['term4'];
$sql ="SELECT * FROM fixes WHERE tech  LIKE '%$term1%' AND date LIKE '%$term2%' AND date LIKE '%$term3%' AND dept LIKE '%$term4%'";

$rs_result = mysql_query ($sql);
$num_rows = mysql_num_rows($rs_result);
$query = mysql_query("SELECT * FROM fixes WHERE tech  LIKE '%$term1%' AND date LIKE '%$term2%' AND date LIKE '%$term3%' AND dept LIKE '%$term4%'"); 
$number=mysql_num_rows($query); 
?> 
```

如果我决定对部门使用下拉菜单，使用上面相同的格式它会停止工作，也许有更好的方法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:51:07.093

一般来说，下拉菜单的数量应该不会影响您的表单或相应的 SQL 查询。

当您尝试将文本字段翻译为上述代码中的下拉菜单时要考虑的一件事是，您要记住保持名称唯一（即，如果您`<select...>...</select>`从另一个术语复制代码，请确保将新 SELECT 的名称更改为“term4 “或者应该是什么。

要考虑的另一件事是，如果您更改为下拉菜单，这意味着您的输入值是有限且可知的，您应该将您的 SQL 更改为使用`...WHERE dept = '$term4'...`而不是`LIKE`; 这应该可以加快查询速度，因为当您知道所有可能的选项时，您不需要通配符或部分匹配。

正如我上面评论的那样，当您在查询中使用变量时不要忘记转义变量以避免 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:02:21.937

您的 HTML 有效，并且您的 SQL 有效。您提到您的代码在两个以上列表时不起作用`<select>`，但您的代码中只有两个。第三个可能与前两个中的一个有名称冲突（如果您复制/粘贴等）

# java - 打印前编辑预览

> ID：10885527
> 
> 赞同：0
> 
> 时间：2012-06-04T17:33:13.250
> 
> 标签：java, c++, printing

打印前如何组织预览，以便可以编辑预览中的文档？

比如打印预览中显示一个三列的表格 想要在其中一列（不是全部三列，而是只在第一列）中改变一些东西，在合适的地方点击鼠标，改变文字，回车，修改后的文字应该保留和打印，以及继续打印，下次打印的时候是用较早的更改的牌匾。

哪些库更适合这项任务，可能有类似的示例或教程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:19:30.907

[http://docs.oracle.com/javase/tutorial/uiswing/](http://docs.oracle.com/javase/tutorial/uiswing/)

Take a look into JTable

# backbone.js - 骨干网获取成功回调

> ID：10885528
> 
> 赞同：3
> 
> 时间：2012-06-04T17:33:19.503
> 
> 标签：backbone.js

我是backbone.js 的新手，在给我的收藏集成功回调时遇到了一些问题。我正在覆盖 fetch 以便有一个带有参数的 url。据我了解，我应该能够在传递给 Backbone.Collection.prototype.fetch.call() 的选项中分配成功回调......但是，我的代码不起作用。Fetch 工作正常，但没有调用回调函数。

这是我的一些代码：

```
App.ChartController = {
  load: function(userConceptId) {
    App.chartPointList.fetch(userConceptId);    
  }
};

App.ChartPointList = Backbone.Collection.extend({
  model: App.ChartPoint,
  url: function() {
    return '/chartpoints/' + this.userConceptId;
  },
  fetch: function(userConceptId, options) {         
    console.log("fetch chart point");               

    typeof(options) != 'undefined' || (options = {});
    options.success = this.postProcess;
    options.error = this.handleError;

    this.userConceptId = userConceptId;

    return Backbone.Collection.prototype.fetch.call(this, options);    
  },
  postProcess : function (resp, status, xhr) {
    console.log("postprocess");          // never gets called
    /**
     ... whole bunch of stuff... 
    **/
    new App.Views.ChartView({ collection: this });
  }, 
  handleError : function (resp, status, xhr) {
    alert("could not load chart data!");  // also not called
  }
}); 
```

知道我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T21:15:39.497

@fguillen 的评论和[另一个 SO 线程](https://stackoverflow.com/questions/5264247/what-events-are-triggered-when-calling-fetch-on-a-backbone-js-model)帮助我解决了这个问题。具体来说：

> Collection.fetch() 将在成功时调用 reset()，这反过来又会触发一个“重置”事件。集合重置事件的任何订阅者都应该收到该事件。

问题根本不在于我的成功回调。原来我在订阅 ChartPointList 重置事件的视图中遇到了问题。该视图中的函数在成功回调*之前*被调用并引发错误，因此未调用成功回调。

# asp.net-web-api - ASP.Net Web API - 如何在从查询字符串进行模型绑定时不需要前缀？

> ID：10885529
> 
> 赞同：2
> 
> 时间：2012-06-04T17:33:43.390
> 
> 标签：asp.net-web-api, model-binding

在 ASP.Net Web API (RC) 中，我有一个测试模型类，如下所示：

```
[ModelBinder]
public class TestRequest
{
    public string Foo { get; set; }
    public string Bar { get; set; }
} 
```

我的控制器如下所示：

```
public class TestController : ApiController
{
    public TestRequest Get(TestRequest model)
    {
        return model;
    }
} 
```

现在，如果我通过以下方式调用操作：

`http://.../test?foo=abc&bar=xyz`

两个值都不绑定，因为模型绑定器需要模型前缀，因此我实际上需要调用：

`http://.../test?model.foo=abc&model.bar=xyz`

我可以理解这是为了让其他动作参数可以正确绑定，但在我的情况下，该模型是一种封装所有可能动作参数的干净方式，因此我不需要大量讨厌的动作方法签名的可选参数。它还允许简单的模型验证。

是否有任何简单的方法可以使模型绑定的行为与 MVC 或 POST 请求中的行为相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:46:20.327

从模型类中删除`ModelBinder`属性应该在您发布的示例中起作用。您会遇到更复杂的方法签名的问题，请参阅 Rick Strahl 的评论：http: [//blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx #10302750](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx#10302750)

# jsf-2 - 如何在没有单元格编辑的情况下编辑 Primefaces DataTable 中的数据？

> ID：10885533
> 
> 赞同：2
> 
> 时间：2012-06-04T17:34:09.553
> 
> 标签：jsf-2, primefaces

我有 2 页。

1.  添加页面以添加新项目![添加页面](../Images/a34865a26bea458b19147e82265606e1.png)
2.  显示所有项目的列表页面![列表页面](../Images/a3816ad6cc23000636bae5b49504633e.png)

当我单击列表页面上的编辑图标时，如果单击保存按钮，我想在添加页面上显示所选数据以进行编辑和更新其数据。这该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T20:45:55.053

将行标识符作为参数传递给按钮。例如，假设它`#{item}`是当前迭代的项目并且具有`Long id`唯一标识该项目的一些属性。

```
<p:button icon="ui-icon-pencil" outcome="edit.xhtml">
    <f:param name="id" value="#{item.id}" />
</p:button> 
```

在目标页面中`edit.xhtml`，您可以使用`<f:viewParam>`来转换、验证并将其设置为 bean 属性。

```
<f:metadata>
    <f:viewParam name="id" value="#{bean.item}" required="true" converter="itemConverter" />
</f:metadata>

...

<p:inputText value="#{bean.item.name}" />
<p:inputText value="#{bean.item.shortName}" /> 
```

### 也可以看看：

*   [<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for)
*   [JSF 2.0 中的通信 - 处理 GET 请求参数](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters)

# python - raw_input("") 已从 python 3.2 中删除

> ID：10885537
> 
> 赞同：24
> 
> 时间：2012-06-04T17:34:23.827
> 
> 标签：python, python-3.x, python-2.7

我已经尝试了很多`raw_input("")`在 python 控制台上运行，但这给出了一个错误。此外，我还观看了一些可能是在旧 python 上制作的视频。所以`input("")`是唯一的方法，为什么`raw_input("")`在新版本中被丢弃有什么原因吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-04T17:35:50.797

`raw_input()``input()`在 Python v3.x中重命名为

旧`input()`的已经消失了，但你可以模仿它`eval(input())`

[Python 3 中的新功能](http://docs.python.org/dev/py3k/whatsnew/3.0.html)将提到这一点（以及更多）：

> [PEP 3111](http://www.python.org/dev/peps/pep-3111/)： raw_input() 被重命名为[input()](http://docs.python.org/release/3.1.5/library/functions.html?highlight=input#input)。也就是说，新的 input() 函数从 sys.stdin 中读取一行并将其返回，并去掉尾随的换行符。如果输入过早终止，它会引发 EOFError 。要获取 input() 的旧行为，请使用 eval(input())。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T17:37:19.263

Python 3.x`input` *是*python 2.x 的`raw_input`。该功能刚刚被重命名，因为旧的 2.x`input`被设计破坏，因此在 3.x 中被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-22T07:13:26.927

原因是旧的 input() 函数试图将您键入的内容转换为 Python 代码。它会产生很多安全问题，这主要是为什么它被丢弃为 raw_input 而是重命名为 input() 因为，你知道，我们程序员有点懒惰，输入 input() 而不是 raw_input 少了 4 个字符。 ..

# algorithm - 动态规划方法或贪婪失败的案例

> ID：10885541
> 
> 赞同：2
> 
> 时间：2012-06-04T17:34:41.537
> 
> 标签：algorithm, dynamic-programming, greedy

我有一串长度`1 <= |S| <= 100`和`K (1 <= K <= 10)`

此字符串包含`digits < K`和问号。我想用 替换这些问号`digits < K`，没有两个相邻的数字相等。字符串是圆形的，所以它不能是这样的：`1?1`或`11?`.

结果字符串必须是按字典顺序最小的字符串。

示例输入和输出

```
input:
K = 4
string = ?????

output:
01012 
```

我尝试了一种贪婪的方法，但对于一些未知的测试用例它失败了。我认为它需要一种 dp 方法，但无法弄清楚状态，并且纯递归代码无法及时适应。

对 dp 方法有什么帮助，或者无法满足贪婪的棘手测试用例？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:11:07.110

如果字符串的一端有一个数字，贪心算法会给你正确的答案。

如果您的字符串以问号开头和结尾，则第一个字符（0 或 1）有 2 种可能性，在这两种情况下运行贪心算法并取最佳值。

**Likao指出的错误答案：**

贪婪有效，但您必须从紧接在已知数字后面的第一个问号开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T05:52:23.470

它简单的回溯imo。为什么用贪婪或动态来复杂化它。

# algorithm - 大小均匀的桶之间的随机分布，不重复

> ID：10885547
> 
> 赞同：0
> 
> 时间：2012-06-04T17:35:06.947
> 
> 标签：algorithm, math, distribution, probability

# 问题

我有 N 个不同类型的项目均匀地分布到由类型确定的自己的桶中。我想创建一个新列表：

1.  从每个桶中随机挑选
2.  **不会连续两次从同一个桶中挑选**
3.  每个桶必须（如果可能）在最终列表中具有相同数量的表示
4.  不使用特定语言的库（不容易用另一种语言实现）

# 例子

我有 4 种不同类型的 12 件物品，这意味着我有 4 个桶：

```
Bucket A - [a, a, a]
Bucket B - [b, b, b]
Bucket C - [c, c, c]
Bucket D - [d, d, d] 
```

## 我想要的是

随机分布的上述项目列表，没有任何重复的字符，大小在 1 到 N 之间。

```
12 Items: a, d, c, a, b, a, c, d, c, b, d, b

8 Items: c, a, d, a, b, d, c, b

4 Items: c, b, d, a

3 Items: b, c, a (Skipping D) 
```

* * *

我试图用一个生成随机整数的while循环来做到这一点，直到下一个桶不等于以前使用的桶，但这似乎效率低下，并希望其他人可能有更好的算法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:39:51.503

您可以生成存储桶的随机列表，然后按顺序从该存储桶中随机选择，当您从中选择时将存储桶从列表中删除。当列表为空时，重新生成一个随机的桶列表，重复直到您选择所需数量的项目。

您可以重复存储桶中的项目吗？因此，如果您第一次从存储桶 A 中选择第一个“a”，您可以第二次选择它吗？那将改变解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:23:41.237

**编辑**以响应每个桶中不得连续抽取的约束。丢弃不符合您标准的排列很简单。现在，如果两个桶具有相同的“标签”，这将失败（原样）。

一个小技巧`itertools`和`random.sample`一个排列：

```
import random
import itertools as itr
from math import ceil

def buckets_choice(N,labels):
    items = int(ceil(float(N)/len(labels)))
    b = list(itr.chain(*(labels for _ in xrange(items))))

    while True:
        p = random.sample(b,len(b))
        cond = map( (lambda x,y: x==y), p[1:], p[:1])
        if not sum(cond):  return p[:N]

L = ['a','b','c','d']
for _ in xrange(5):
    print buckets_choice(3,L), buckets_choice(8,L), buckets_choice(12,L) 
```

示例运行给出（为清楚起见删除了引号）：

```
(a, b, d) (b, d, c, a, d, a, b, c) (b, c, d, c, d, a, d, b, a, c, b, a)
(b, a, d) (d, a, c, c, a, b, b, d) (c, b, a, b, a, c, b, d, d, a, d, c)
(b, d, a) (b, c, c, a, b, a, d, d) (a, d, a, d, c, b, d, c, a, b, c, b)
(d, c, b) (c, d, a, b, c, b, a, d) (c, b, a, a, b, c, d, c, b, a, d, d)
(b, d, a) (c, b, b, d, c, a, d, a) (c, b, d, a, d, b, b, d, c, a, a, c) 
```

# php - PHP 表单提交给自己。单击分页链接时。除了形式之外，一切都消失了

> ID：10885551
> 
> 赞同：1
> 
> 时间：2012-06-04T17:35:30.100
> 
> 标签：php

这是一个自我提交的表格。我有 3 个独立的选择列表，它们的选择值作为 sql 查询的 WHERE 参数传递。

当我点击按钮时，所有数据都显示得很好，有限，链接页面在下面。但：

当我点击页面链接时，结果集和所有链接都消失了（只有选择列表仍然可见）。我认为这与 isset 条件有关，如果尚未设置值，则显示表单，如果已设置值，则处理表单。因此，第一个结果集正确显示，但是当您尝试转到第二页时，我的表单解释为未设置选择列表，因为它们已重置，并且如果我点击链接，我没有点击按钮，而是因此，它消除了它不是 html 表单的所有内容。

分页代码没有错误。错误在于我如何将此表单与此分页方法联系起来。我不知道我应该怎么做。

```
 if (isset($_POST['submitted'])) { /***************IF IT IS SET, WE PROCESS THE VALUES*************************/
        $oldcountry = FALSE;
        $oldfrom = FALSE;
        $oldinto = FALSE;

 // Here just checking that all variables have been selected

       if (isset($_POST['country']))

        {
        $oldcountry = $_POST['country'];
        $country = filter_var($oldcountry, FILTER_SANITIZE_STRING);
        }
        else {
        echo 'Please, select a country';
        }
        if (isset($_POST['from_language']))
        {
        $oldfrom = $_POST['from_language'];
        $from_language = filter_var($oldfrom, FILTER_SANITIZE_STRING);
        }
        else {
        echo 'no has metido el from language';
        }
        if (isset($_POST['into_language']))
        {
        $oldinto = $_POST['into_language'];
        $into_language = filter_var($oldinto, FILTER_SANITIZE_STRING);
        }

    // so, once we have selected them and clicked the button, we go for the query

    // and paginate the results

        require_once('bdd1.php');
        $per_page = 6;
        $pages_query = mysql_query("SELECT COUNT(FName)
        FROM work_assignment, developer
        WHERE AES_DECRYPT(country, 'elperrodesanroquenotienerabo') = '".$country."'
        AND from_language = '".$from_language."'
        AND into_language = '".$into_language."'
        AND work_assignment.developer_id = developer.developer_id
        ORDER BY FName ASC ");
        $pages = ceil (mysql_result($pages_query, 0) /$per_page);
        $page = (isset($_GET['page'])) ? (int)$_GET['page'] : 1;
        $start = ($page - 1) * $per_page;
        $query = mysql_query("SELECT FName
        FROM work_assignment, developer
        WHERE AES_DECRYPT(country, 'elperrodesanroquenotienerabo') = '".$country."'
        AND from_language = '".$from_language."'
        AND into_language = '".$into_language."'
        AND work_assignment.developer_id = developer.developer_id
        ORDER BY FName ASC LIMIT $start, $per_page");
        while ($query_row = mysql_fetch_assoc($query)){
        echo '<p>', $query_row['FName'], '</p>';
        }
        if ($pages >=1) {
        for($x = 1; $x <=$pages; $x++){
        echo '<a href="?page='.$x. '">'.$x.'</a> ';
        }
        }
        } /************* END OF IF ISSET TO PROCESS *******************************/

    ?> 
```

更新更新

在所有帮助之后，我设法编写了一个 URL 字符串，使页面链接工作。然而，当我硬编码国家名称（基本上是爱沙尼亚）而不是嵌入代表它的变量时，我仍然需要对其进行调整，但我无法正确编写该 URL：

这有效：

```
echo '<a href="?country=Estonia&from_language=Russian&into_language=Latvian&submitted=true&
page='.$x. '">'.$x.'</a> '; 
```

我只需要用 $country 替换爱沙尼亚，用 $from_language 替换俄语，用 $into_language 替换拉脱维亚语。但是我已经尝试了单引号和双引号以及点的所有可能组合，但我得到了语法错误。有人知道怎么写吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:20:31.620

正如 Slomo 指出的那样，POST 变量会丢失，因为单击链接时未提交表单。

除非您希望对用户隐藏这些值，否则您可以将表单的方法设置为 GET 而不是 POST。这样，变量就会添加到 URL 中，就像 $_GET['page'] 一样。

然后必须以保持 URL 完整的方式呈现链接，但需要更改的页面变量除外。可以这样做（只需将 currentpage 更改为 page）：

[分页链接中重复参数的问题？](https://stackoverflow.com/questions/2981225/a-problem-of-a-repeated-parameter-in-the-pagination-links/2981272#2981272)

更新：

如果要在字符串中插入变量，可以将它们放在双引号内（并在字符串内转义其他双引号），或连接字符串和变量，请参见以下两个示例：

```
echo "<a href=\"?country=$country&from_language=$from_language&into_language=$into_language&submitted=true&page=$x\">$x</a>";
echo '<a href="?country=' . $country . '&from_language=' . $from_language . '&into_language=' . $into_language . '&submitted=true&page=' . $x . '">' . $x . '</a>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:47:42.813

$_POST 值仅在使用 POST 请求发送信息时设置，例如您的最有可能的方法 = POST。当您使用 POST (button=submit) 方法提交表单时，会设置 $_POST 值。每当您单击另一个链接时，只会向服务器发送对新页面的请求。

如果您需要在第一次提交表单后提供信息，您应该使用 Session。(http://php.net/manual/de/features.sessions.php) 为每个客户端（网络浏览器）存储会话，并且在会话超时之前可用（请参阅手册）。您必须在第一次提交表单时设置会话变量。之后，您可以使用会话中的值。

/编辑

如果您不想使用会话，可以将过滤条件作为 url 参数 (index.php?groupby=country) 添加到普通链接。然后将使用 $_GET 访问它们。

# javascript - 从用户输入向元素添加样式

> ID：10885552
> 
> 赞同：1
> 
> 时间：2012-06-04T17:35:35.620
> 
> 标签：javascript, code-generation, css

我有一个用于边界半径的基本生成器，用户在其中输入他们选择的数字，并将数字插入预览代码中。但是我想要一个预览框，根据他们插入的数字而变化。我已经走了一半，但似乎无法弄清楚最后一点。

HTML：

```
<label>Border Radius:</label>
<input name="border-radius" id="jj_input" class="jj_input" type="text" size="2" value='' onkeyup='changeRadius()' />
<span>px</span>

<div class="yourcode">
    <p>border-radius: <span id="radius"></span>px; </p>
    <p>webkit-border-radius: <span id="radius2"></span>px; </p>
</div>

<div id="preview">
    <span class="preview_text">Preview Text</span>
</div> 
```

Javascript：

```
function changeRadius(){
    var jj_input = document.getElementById('jj_input').value;
    document.getElementById('radius').innerHTML = jj_input;
    document.getElementById('radius2').innerHTML = jj_input;

    document.getElementById('preview').style.borderRadius = 'WHAT_GOES_HERE?' ;
} 
```

在哪里说“WHAT_GOES_HERE？”，我希望这个值与 jj_input 相同。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:38:40.987

```
document.getElementById('preview').style.borderRadius = jj_input + 'px'; 
```

我们只是将值分配给`element.style.borderRadius`of`jj_input`并连接 in `px`。

# asp.net-mvc-3 - MVC3 EF Ninject 通用存储库

> ID：10885559
> 
> 赞同：2
> 
> 时间：2012-06-04T17:35:59.497
> 
> 标签：asp.net-mvc-3, entity-framework, ninject

我正在使用 Entity Framework/MVC3/Ninject.MVC3 开发一个通用存储库。界面看起来像这样。

```
public interface IRepository<TEntity> where TEntity : class
{
    IQueryable<TEntity> Query { get; }
    void Add(TEntity entity);
    void Edit(TEntity entity);
    void Delete(TEntity entity);
} 
```

我的具体实现看起来像这样。

```
 public class EFRepository<T> : IRepository<T> where T : class
{
    private EFDbContext context = new EFDbContext();

    public IQueryable<T> Query
    {
        get { return context.Set<T>().AsQueryable(); }
    }

    public void Add(T entity)
    {
        context.Set<T>().Add(entity);
        context.SaveChanges();
    }

    public void Edit(T entity)
    {
        context.Entry<T>(entity).State = System.Data.EntityState.Modified;
        context.SaveChanges();
    }

    public void Delete(T entity)
    {
        context.Set<T>().Remove(entity);            
        context.SaveChanges();
    }
} 
```

Ninject 具有约束力

```
kernel.Bind(typeof(IRepository<>)).To(typeof(EFRepository<>)); 
```

我需要做的是在具体实现中获取最后一个插入 ID。我有一个事务表，它将根据最后一个表和插入 ID 获得插入。我可以从控制器调用事务，但我宁愿在数据访问层中完成所有工作，这样我就可以在最后一次插入/更新后轻松编写事务。

首先，上面的例子是实现通用存储库的正确方法。其次有没有办法通过这种方法获取我想要的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:20:02.683

当您在实体上调用 Add 并且表具有标识列（自动增量）时，您只需在 SaveChanges() 之后检查实体，它将包含生成的 ID。

# c# - C#如何强制泛型参数为类型

> ID：10885563
> 
> 赞同：2
> 
> 时间：2012-06-04T17:36:11.030
> 
> 标签：c#, generics

我有通用方法。我想要通用方法来限制一种类型。问题是不允许派生类型 - 我不想要这个。示例代码：

```
public static T Generate<T>(T input)
    where T : Operation // ALLOWS BinaryOperation - NOT WANT THIS
{
    //...
} 
```

怎么做我要求的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T17:37:36.940

> 问题是不允许派生类型

如果不在运行时检查它，就无法强制执行此约束。这样做将违反[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)，该原则规定任何类型*都应*允许您无限制地传入派生类型。

如果您*必须*强制执行此操作，则它仅适用于运行时检查，例如：

```
public static T Generate<T>(T input)
    where T : Operation // ALLOWS BinaryOperation - NOT WANT THIS
{
    // Checks to see if it is "Operation" (and not derived type)
    if (input.GetType() != typeof(Operation))
    {
        // Handle bad case here...
    }

    // Alternatively, if you only want to not allow "BinaryOperation", you can do:
    if (input is BinaryOperation)
    {
        // Handle "bad" case of a BinaryOperation passed in here...
    }
} 
```

请注意，在这种情况下，真的没有理由让它通用，因为相同的代码可以作为：

```
public static Operation Generate(Operation input)
{ // ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:39:36.530

不可能强制方法只接受一种特定类型，例如`Operation`该类型不是结构或密封类。

**让我在一个例子中展示一下为什么这无论如何都行不通：**

```
public void Generate<T>(Operation op) 
    // We assume that there is the keyword "force" to allow only Operation classes
    // to be passed
    where T : force Operation
{ ... }

public void DoSomething()
{
    Generate(new BitOperation()); // Will not build
    // "GetOperation" retrieves a Operation class, but at this point you dont
    // know if its "Operation" or not
    Operation op = GetOperation();
    Generate(op); // Will pass
}

public Operation GetOperation() { return new BitOperation(); } 
```

如您所见，`BitOperation`即使有限制，也很容易通过 a。

## 解决方案

除了上面提到的其他解决方案（结构，密封）之外，只有一个解决方案：*运行时检查。* 您可以为此编写一个小辅助方法。

```
public class RuntimeHelper
{
    public static void CheckType<T>(this Object @this)
    {
        if (typeof(T) != @this.GetType())
            throw new ....;
    }
} 
```

### 用法

```
public void Generate(Operation op)
{
    op.CheckType<Operation>(); // Throws an error when BitOperation is passed
} 
```

### 小笔记

如果您想加快帮助程序的速度，您可以使用`RuntimeHelper<T>`具有 T 类型的静态只读类型变量的泛型类。

当你这样做时，你不能再使用扩展方法，所以调用看起来像这样：

```
RuntimeHelper<Operation>.CheckType(op); 
```

# android - 了解片段堆栈

> ID：10885571
> 
> 赞同：1
> 
> 时间：2012-06-04T17:36:40.330
> 
> 标签：android, android-fragments, actionbarsherlock, android-actionbar

我有一个带有标签导航的操作栏（actionbarsherlock），我也有几个操作项。我的一个操作项显示一个 ListFragment，我是这样称呼它的：

```
 case R.id.menuitem_info:
        // Create new fragment and transaction
        SherlockListFragment aboutListFragment = new AboutListFragment();
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();

        // Replace whatever is in the fragment_container view with this fragment,
        // and add the transaction to the back stack
        ft.replace(R.id.root, aboutListFragment);
        ft.addToBackStack(null);
        ActionBar actionBar = getSupportActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);

        // Commit the transaction
        ft.commit();
        return true; 
```

我的问题是当我点击后退按钮时，我得到一个 IllegalArgumentException。我不确定如何从视图中删除片段并显示上一个视图？

这是我的主页按钮代码：

```
 case android.R.id.home:
        FragmentManager fm = getSupportFragmentManager();
        if (fm.getBackStackEntryCount() > 0) {
            fm.popBackStack();
        }
        return true; 
```

任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:58:23.067

在 android.R.id.home 的情况下，我做了以下操作：

```
 case android.R.id.home:
        FragmentManager fm = getSupportFragmentManager();
        if(fm.getBackStackEntryCount()>0){
            onBackPressed();
        }
        return true; 
```

我希望这对你有所帮助，因为我的作品就像一个魅力

# c - 在 Cortex-M3 上使用带有预制地址的位带宏时出现问题

> ID：10885573
> 
> 赞同：2
> 
> 时间：2012-06-04T17:36:50.423
> 
> 标签：c, casting, c-preprocessor, cortex-m3, memory-mapping

TL;博士：

1.  为什么不`(unsigned long)(0x400253FC)`等于`(unsigned long)((*((volatile unsigned long *)0x400253FC)))`？
2.  如何制作与前者一起使用的宏与后者一起使用？

# 背景资料

## 环境

我正在使用 ARM Cortex-M3 处理器，TI 的[LM3S6965](http://www.ti.com/tool/ek-lm3s6965)，以及他们的[StellarisWare](http://www.ti.com/tool/sw-lm3s)（免费下载，出口控制）定义。我正在使用 gcc 4.6.1 版（Sourcery CodeBench Lite 2011.09-69）。Stellaris 在“inc/lm3s6965.h”中提供了大约 5,000 个寄存器和内存地址的定义，我真的不想重做所有这些。但是，它们似乎与我要编写的宏不兼容。

## 位带

在 ARM Cortex-M3 上，一部分内存与外设和 RAM 内存空间的每位 32 位字混叠。将地址 0x42000000 的内存设置为 0x00000001 会将地址 0x40000000 的内存的第一位设置为 1，但不会影响字的其余部分。要更改第 2 位，请将 0x42000004 处的字更改为 1。这是一个简洁的功能，并且非常有用。根据 ARM 技术参考手册，计算地址的算法是：

```
bit_word_offset = (byte_offset x 32) + (bit_number × 4)
bit_word_addr = bit_band_base + bit_word_offset 
```

在哪里：

*   `bit_word_offset`是目标位在位带内存区域中的位置。
*   `bit_word_addr`是别名内存区域中映射到目标位的字的地址。
*   `bit_band_base`是别名区域的起始地址。
*   `byte_offset`是包含目标位的位带区域中的字节数。
*   `bit_number`是目标位的位位置，0 到 7

# 位带的实现

该`"inc/hw_types.h"`文件包括以下实现此算法的宏。需要明确的是，它是为一个基于字的模型实现的，该模型接受 4 字节对齐的字和 0-31 位偏移量，但结果地址是等价的：

```
#define HWREGBITB(x, b)                                               \
    HWREGB(((unsigned long)(x) & 0xF0000000) | 0x02000000 |               \
           (((unsigned long)(x) & 0x000FFFFF) << 5) | ((b) << 2)) 
```

该算法采用 SRAM 中 0x20000000 或外设存储器空间 0x40000000 的基数，并将其与 0x02000000 进行或运算，加上位带基数偏移。然后，它将基数的偏移量乘以 32（相当于左移五位）并加上位数。

引用的 HWREG 仅执行必要的转换以写入内存中的给定位置：

```
#define HWREG(x)                                                              \
    (*((volatile unsigned long *)(x))) 
```

这对于像这样的任务非常有效

```
HWREGBITW(0x400253FC, 0) = 1; 
```

其中 0x400253FC 是内存映射外设的幻数，我想将此外设的位 0 设置为 1。上面的代码计算（当然是在编译时）位偏移并将该字设置为 1。

# 什么不起作用

不幸的是，“inc/lm3s6965.h”中的上述定义已经执行了由 HWREG 完成的转换。我想避免使用幻数，而是使用提供的定义，例如

```
#define GPIO_PORTF_DATA_R       (*((volatile unsigned long *)0x400253FC)) 
```

尝试将其粘贴到 HWREGBITW 会导致宏不再工作，因为强制转换会干扰：

```
HWREGBITW(GPIO_PORTF_DATA_R, 0) = 1; 
```

预处理器生成以下混乱（添加了缩进）：

```
(*((volatile unsigned long *)
    ((((unsigned long)((*((volatile unsigned long *)0x400253FC)))) & 0xF0000000)
    | 0x02000000 |
    ((((unsigned long)((*((volatile unsigned long *)0x400253FC)))) & 0x000FFFFF) << 5)
    | ((0) << 2))
)) = 1; 
```

注意两个实例

```
(((unsigned long)((*((volatile unsigned long *)0x400253FC))))) 
```

我相信这些额外的演员是导致我的过程失败的原因。以下预处理结果`HWREGBITW(0x400253FC, 0) = 1;`确实有效，支持我的断言：

```
(*((volatile unsigned long *)
    ((((unsigned long)(0x400253FC)) & 0xF0000000) 
    | 0x02000000 |
    ((((unsigned long)(0x400253FC)) & 0x000FFFFF) << 5)
    | ((0) << 2))
)) = 1; 
```

强制`(type)`转换运算符具有从右到左的优先级，因此最后一个强制转换应该适用并`unsigned long`用于按位算术（然后应该可以正常工作）。任何地方都没有隐含的东西，没有浮点到指针的转换，没有精度/范围的变化......最左边的演员应该简单地取消右边的演员。

# 我的问题[^(（最后......）)]

1.  为什么不`(unsigned long)(0x400253FC)`等于`(unsigned long)((*((volatile unsigned long *)0x400253FC)))`？
2.  如何使现有的`HWREGBITW`宏工作？或者，如何编写宏来执行相同的任务，但在给定具有预先存在的演员表的参数时不会失败？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T17:41:10.100

> 1- 为什么 (unsigned long)(0x400253FC) 不等于 (unsigned long)((*((volatile unsigned long *)0x400253FC)))？

前者是一个整数文字，它的值是`0x400253FCul`，而后者是`unsigned long`存储在（内存或 GPIO）地址中的值`0x400253FC`

> 2- 如何使现有的 HWREGBITW 宏工作？或者，如何编写宏来执行相同的任务，但在给定具有预先存在的演员表的参数时不会失败？

改为使用`HWREGBITW(&GPIO_PORTF_DATA_R, 0) = 1;`。

# objective-c - Lame 编码的 Mp3 文件中的咔嗒声和失真

> ID：10885576
> 
> 赞同：1
> 
> 时间：2012-06-04T17:36:58.353
> 
> 标签：objective-c, xcode, mp3, core-audio, lame

我正在尝试使用 AudioToolbox 框架和 Lame 将原始 PCM 数据从麦克风编码到 MP3。尽管一切似乎都运行良好，但编码流中存在“点击”和“失真”的问题。我不确定我是否正确设置了 AudioQueue 以及我是否在正确的 wat 中处理编码缓冲区...我设置音频录制的代码：

```
 AudioStreamBasicDescription streamFormat;
    memset(&streamFormat, 0, sizeof(AudioStreamBasicDescription));
    streamFormat.mSampleRate = 44100;
    streamFormat.mFormatID = kAudioFormatLinearPCM;
    streamFormat.mFormatFlags = kLinearPCMFormatFlagIsSignedInteger|kLinearPCMFormatFlagIsPacked;
    streamFormat.mBitsPerChannel = 16;
    streamFormat.mChannelsPerFrame = 1;
    streamFormat.mBytesPerPacket = 2;
    streamFormat.mBytesPerFrame = 2;
    streamFormat.mFramesPerPacket = 1;
    streamFormat.mReserved = 0;        

    AudioQueueNewInput(&streamFormat, InputBufferCallback, (__bridge void*)(self), nil, nil, 0, &mQueue);
    UInt32 bufferByteSize = 44100;
    memset(&mEncodedBuffer, 0, sizeof(mEncodedBuffer)); //mEncoded buffer is 
                                                        //unsigned char [72000]
    AudioQueueBufferRef buffer;
    for (int i=0; i<3; i++) {
         AudioQueueAllocateBuffer(mQueue, bufferByteSize, &buffer);      
         AudioQueueEnqueueBuffer(mQueue, buffer, 0, NULL);
    }
    AudioQueueStart(mQueue, nil); 
```

然后AudioQueue回调函数调用lame_encode_buffer，然后将编码后的缓冲区写入文件：

```
void InputBufferCallback (void *inUserData, AudioQueueRef inAQ, AudioQueueBufferRef inBuffer, const AudioTimeStamp *inStartTime, UInt32 inNumPackets, const AudioStreamPacketDescription* inPacketDesc) {
      memset(&mEncodedBuffer, 0, sizeof(mEncodedBuffer));
      int encodedBytes = lame_encode_buffer(glf, (short*)inBuffer->mAudioData, NULL, inBuffer->mAudioDataByteSize, mEncodedBuffer, 72000);
      //What I don't understand is that if I write the full 'encodedBytes' data,  then there are A LOT of distortions and original sound is seriously broken 
      NSData* data = [NSData dataWithBytes:mEncodedBuffer length:encodedBytes/2]; 
      [mOutputFile writeData:data];
} 
```

当我之后尝试使用 AVAudioPlayer 播放包含 Lame 编码数据的文件时，我清楚地听到了原始声音，但周围有一些咔嗒声和失真。

有人可以建议这里有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:06:04.480

您的代码似乎没有注意 inNumPackets，这是给定回调的实际音频数据量。

此外，在音频回调中执行长时间操作（例如运行编码器）可能不够快，因此可能违反响应要求。任何长函数调用都应该在回调之外完成。

# sharepoint-2010 - SharePoint 需要 Onchange 事件：FormFields

> ID：10885577
> 
> 赞同：1
> 
> 时间：2012-06-04T17:37:13.183
> 
> 标签：sharepoint-2010, onchange, sharepoint-api

当 a 发生变化时，我需要调用一个 javascript 函数`SharePoint:FormField`。这是为了提供一些关于那里选择的客户端反馈。

我需要在我的 Visual Studio 项目中将其添加到新的内容类型表单上。`SharePoint:FormField`似乎没有事件，就像普通的ASP`Onchange`控件一样。
我查看了`ValueChanged`事件，但它看起来像只读的。

任何建议或帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T17:13:44.920

**找到的解决方案：**

感谢 Google 和 webborg.blogspot.com/2008/04/... 和 mysplist.blogspot.com/2010/03/...，我解决了这个问题。我要补充一点，JavaScript 应该是内联的，并且在遵循您的 SharePoint:FormField 之后

```
<table cellpadding="0" cellspacing="0" id="onetIDListForm" style="width:100%">
<tr>
<td width="400px"  valign="top"  class="ms-formbody"> 
    <SharePoint:FormField runat="server" ID="MyGender" ControlMode="New" FieldName="MyGender" />
    <SharePoint:FieldDescription runat="server"  ID="field_MyGender_Description"  FieldName="My Gender" ControlMode="New"  /> 
</td>
</tr>
</table> 

<script type="text/javascript"> 
function getField(fieldID) 
{ 
    var docTags = document.all;
    for (var i=0; i < docTags.length; i++) {
        if (docTags[i].title == fieldID) { 

            return docTags[i] 
        } 
    } 
} 

function DisplayMessage()
{
    if (getField('My Gender').value == 'Male') {
     alert('Hello Manhood');
     }
}

getField('My Gender').onchange = function() {DisplayMessage()};

</script> 
```

# c++ - Gtkmm：稍后添加窗口

> ID：10885584
> 
> 赞同：0
> 
> 时间：2012-06-04T17:37:49.223
> 
> 标签：c++, window, gtkmm, event-loop

因为我正在编写一个在面对其他配置时表现完全不同的“通用”应用程序，所以即使我在启动时还不知道它们，我也被迫显示 gtk 窗口。可能还需要多个窗口需要同时可见（不是模态对话框，而是独立窗口）。但是，如果可以在启动时简单地启动一个 gtk 事件循环，那就太好了。

是否可以在启动后以某种方式将窗口添加到该循环？虽然我发现`Gtk::Application`该类似乎完全支持缩进行为，但我被限制使用`Gtk::Main`该类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:59:51.853

只允许一个 Gtk::Main 对象。小部件应该在运行主事件循环的同一线程中创建。要解决此限制，您需要开发一种将窗口创建命令传递给 gtk 线程的方法。

最简单的方法是使用 Glib::Dispatcher

```
struct WindowBuilder {
    /**/
    Glib::Dispatcher* signal_create;

    void create_window() {
        //From main thread...
        signal_create->emit();
    }
}

void create_mainWnd() {
    new Ui::MainWnd();
}

//From Gtk thread...
builder->signal_create->connect(sigc::ptr_fun(create_mainWnd));

Gtk::Main::run(); 
```

Glib::Dispatcher 不带任何参数，所以下一步是弄清楚如何在线程之间传递参数。

对于不同类型的窗口，您可以使用不同的调度程序。

boost::asio::io_service 可以帮助您传递消息。

```
while(!exit) {
    io_service.reset();
    io_service.poll();
    while(Gtk::Main::events_pending())
        Gtk::Main::iteration();
    Sleep(0);
} 
```

# iphone - 加载从故事板实例化的 nib 文件

> ID：10885585
> 
> 赞同：3
> 
> 时间：2012-06-04T17:37:50.220
> 
> 标签：iphone, objective-c, ios, ipad

所以我对这个故事板概念很陌生。我有一个视图笔尖放入情节提要中，每个笔尖都对应于我拥有的 UIViewController 子类，我尝试使用以下代码加载笔尖文件：

```
TestViewController *vc = [[TestViewController alloc] initWithNibName:@"TestViewController" bundle:nil];
    [self.view setBackgroundColor:[UIColor blueColor]];
    [self.view setFrame:CGRectMake(0, self.profilePicture_.frameHeight + self.profilePicture_.frameY + 10, self.scrollView_.frameWidth, 100)];
    [self.view addSubview:vc.view]; 
```

但是，它给了我以下错误：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </Users/aditya15417/Library/Application Support/iPhone Simulator/5.1/Applications/64E6CEC9-E6DC-4AF5-BF16-11BFB6415BDC/Pulse.app> (loaded)' with name 'TestViewController'' 
```

所以问题是，如果我在故事板上有我的笔尖，是否不能使用 initWithNibName？如果有办法，我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T19:09:30.823

请用

```
[self.storyboard instantiateViewControllerWithIdentifier:@"some identifier you set in IB"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:46:39.187

为什么将 PNRNewsfeedViewController 加载为 TestViewController？TestViewController 是 PNRNewsfeedViewController 的基类吗？确保在 nib 中，将 File's Owner 自定义类设置为 PNRNewsfeedViewController，然后分配一个新闻提要视图控制器：

```
PNRNewsfeedViewController *vc = [[PNRNewsfeedViewController alloc] initWithNibName:@"PNRNewsfeedViewController" bundle:nil];
// ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:54:19.497

当您使用故事板时，您不会直接使用单个 nib，也不会自己实例化视图控制器。您可以使用`UIStoryboard`该类从情节提要中实例化视图控制器，[如文档中所述](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/UsingViewControllersinYourApplication/UsingViewControllersinYourApplication.html#//apple_ref/doc/uid/TP40007457-CH6-SW5)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-07T20:33:58.193

这就是我这样做的方式：

```
UIStoryboard *storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle mainBundle]]; 
```

# sql-server - 使用多列主键将缺少的行从一个表复制到另一个表

> ID：10885587
> 
> 赞同：2
> 
> 时间：2012-06-04T17:37:59.583
> 
> 标签：sql-server, stored-procedures

本主题与[使用存储过程在 sql server 中将缺少的行从一个表复制到另一个表](https://stackoverflow.com/questions/10885129/copy-missing-rows-from-one-table-to-another-in-sql-server-with-stored-procedure)有关，但这次问题有点复杂。

我必须在不同的数据库（在同一台服务器上）中创建相同的表。我需要将数据行从左侧数据库表传输到右侧数据库表，但我只想传输不在右侧数据库表中的行。

我的表有四个主键，见图

![在此处输入图像描述](../Images/aa20daf40b31708e81ae87bfe733ddca.png)

我想用这样的东西

```
insert into [EXTERN_EPI6R2].[dbo].[tblBigTableReference]
select * from [EXTERN].[dbo].[tblBigTableReference]
where (
 pkId not in (select pkId 
  from [EXTERN_EPI6R2].[dbo].[tblBigTableReference]) 
 and PropertyName not in (select PropertyName 
  from [EXTERN_EPI6R2].[dbo].[tblBigTableReference]) 
 and IsKey not in (select IsKey 
  from [EXTERN_EPI6R2].[dbo].[tblBigTableReference])
 and [Index] not in (select [Index] 
  from [EXTERN_EPI6R2].[dbo].[tblBigTableReference])
) 
```

但是，这不会起作用，因为条件的堆叠在某种程度上是错误的。

我正在使用 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:49:03.623

您的查询不正确，因为您的各种条件可以在不同的行上匹配。

```
insert into [EXTERN_EPI6R2].[dbo].[tblBigTableReference]
select * from [EXTERN].[dbo].[tblBigTableReference] AS s
where NOT EXISTS 
(
  SELECT 1 FROM [EXTERN_EPI6R2].[dbo].[tblBigTableReference] AS d
  WHERE d.pkId = s.pkId 
  AND d.PropertyName = s.PropertyName
  AND d.IsKey = s.IsKey
  AND d.[Index] = s.[Index] -- terrible column name
); 
```

但这引出了一个问题——为什么这四列都是关键的一部分？`pkId`还不够吗？如果不是，它肯定有一个奇怪且不正确的名称。

# php - PHP+Cookies：只显示一次消息

> ID：10885600
> 
> 赞同：2
> 
> 时间：2012-06-04T17:39:02.860
> 
> 标签：php, cookies

我对这段非常短的代码有疑问，我无法开始工作。

基本上，我想显示两条不同的消息，具体取决于用户是新用户还是返回用户。

```
<?php 
if(isset($_COOKIE['visit']) && ($_COOKIE['visit'] == "true")) 
{ 
  echo 'cookie set, welcome back';
}else{ 
  echo 'cookie not set, welcome new user';
} 
setcookie("visit", "true", time()+60*60*24*600); 
?> 
```

问题是没有设置cookie。我不知道出了什么问题，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:44:44.333

您需要将 setcookie 移动到条件中：

```
<?php 
if(isset($_COOKIE['visit']) && $_COOKIE['visit'] == "true"){
    echo 'cookie set, welcome back';
}else{
    echo 'cookie not set, welcome new user';
    setcookie("visit", "true", time()+60*60*24*600);
}
?> 
```

如果它不起作用，那么您应该检查 cookie 是否被发送回脚本。例如，您的浏览器或某些浏览器插件干扰。

请注意，有一项新法律规定，如果您的服务器位于欧盟，则需要您获得访问者的知情同意，然后才能在该计算机上存储或检索**任何**信息。[http://www.cookielaw.org/](http://www.cookielaw.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-12T09:07:26.190

我使用上面的代码使模态窗口只显示一次。

上面的问题是我试图在索引页面的末尾使用它，你只能在设置标题的地方使用 setcookie。

相反，我使用了：

```
if(isset($_COOKIE['visit']) && $_COOKIE['visit'] == "true"){
    $load = false;
} else {
    $load = true;
    setcookie("visit", "true", time()+60*60*24*600);
} 
```

如果未设置，则将 cookie 设置在我的 PHP 文件的顶部，然后我使用

```
if($load == true){
    //do code on first run
} 
```

在我需要为单次运行添加代码的地方，我在头部使用它来设置一次性使用的 css 样式表，并在页脚中设置一些一次性使用的脚本/html。

# c++ - 在make文件中链接g ++和lib不起作用

> ID：10885602
> 
> 赞同：1
> 
> 时间：2012-06-04T17:39:19.397
> 
> 标签：c++, linker, g++

我正在使用 g++ 进行编译，但是当我运行 make 时，出现以下错误：

```
 ./libnbmdt.so: undefined reference to `inflateInit2_'
    ./libnbmdt.so: undefined reference to `zlibVersion'
    ./libnbmdt.so: undefined reference to `inflate'
    ./libnbmdt.so: undefined reference to `inflateInit_'
    ./libnbmdt.so: undefined reference to `inflateEnd'
    collect2: ld returned 1 exit status
    make[2]: *** [nbbid2md] Error 1
    make[1]: *** [all] Error 2
    make: *** [nb/nbmdt] Error 1 
```

有没有人见过这个？我想`-l<somelibrary>`是需要的，但我不知道是哪一个……顺便说一句，它是一个 c++ 程序。我猜当 g++ 尝试链接它们时 zlib 丢失了？一些正在使用的库是：

```
MT_VLIBS = \
libjansson.a \
libnbI18N.a \
libnbslidlC.a \
libnbslidlS.a \
libcurl.a \
libVdb \
libnborb \
libnbbase \
-lvxul \
-lvxssl \
-lvxcrypto 
```

不幸的是，我无法共享生成文件。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:55:05.377

你是对的 - “-lz”标志是要使用的标志。ZLib 没有链接，因此没有“膨胀”功能。

请注意以下几点：“-lz”必须在“-lnb*”之后，因为链接顺序对于 GCC 工具链很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:17:20.330

我今天通过在我的 makefile 中添加 $if 条件来解决问题，以使用 -lz 标志。这有点复杂，但我解决了。

# objective-c - 我对 Xcode 4.3.2 中的 Instruments 做错了吗？

> ID：10885604
> 
> 赞同：0
> 
> 时间：2012-06-04T17:39:33.030
> 
> 标签：objective-c, ios5, automatic-ref-counting, instruments, xcode4.3

我按照[这个视频教程](http://www.youtube.com/watch?v=BHWGUwYMGBw)使用带有 Xcode 4.3.2 的 Instruments 检测内存泄漏。

正如您从视频中看到的那样，创作者获得了很多关于泄露对象类型等的有用反馈。

![仪器的外观](../Images/76ad357ab0ad7b3b516ff8e7d6b28e14.png)

当我运行仪器时，我检测到一些内存泄漏，但没有得到太多有用的反馈：

![我的仪器视图](../Images/cefb281498e79b7bdd4cb418cdff3861.png)

“根泄漏”是什么意思？为什么上面的屏幕中没有更多有用的信息？

这是我可以解决的问题吗？

我在我的应用程序中使用 ARC - 这是否会影响 Instruments 以任何方式发现内存泄漏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:21:37.243

根泄漏可能是两件事之一。它可以是单个内存泄漏，也可以是泄漏周期的开始。当您丢失对一组对象的引用时，就会发生泄漏循环。内存泄漏泄漏一个对象，而泄漏循环泄漏一组对象。

您的代码可能没有任何泄漏周期，这可以解释为什么您的周期和根部分显示的信息比教程少。从跳转栏中选择调用树而不是循环和根可以帮助您找到正在泄漏内存的代码区域。

# linux - 寻找具有 OS 调度程序支持的 Linux 线程池 api

> ID：10885605
> 
> 赞同：6
> 
> 时间：2012-06-04T17:39:36.260
> 
> 标签：linux, multithreading, scheduler, pool

我正在寻找 Linux 中的线程池抽象，它提供与 Win32 线程池提供的相同级别的内核调度程序支持。具体来说，我有兴趣找到一个维护一定数量*运行*线程的线程池。当正在运行的池线程在 I/O 上阻塞时，我希望线程池足够智能以启动另一个线程运行。

任何人都知道这样的Linux？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T21:45:26.013

如果没有操作系统支持，您真的无法做到这一点。没有好的方法可以判断线程在 I/O 上被*阻塞。*您最终不得不在每个可能阻塞的操作之前自动增加一个计数器并在之后减少它。然后您需要一个线程来监视该计数器并在它高于零时创建一个额外的线程。（如果线程空闲超过一秒左右，则删除线程。）

一般来说，这不值得努力。这只适用于 Windows，因为它是“Windows 方式”，并且 Windows 是从头开始构建的。对于 Linux，您应该使用`epoll`or `boost::asio`。使用以“Linux 方式”做事的东西，而不是试图让 Windows 方式在非 Windows 操作系统上工作。

您可以编写自己的包装器，在 Windows 上使用 IOCP，在 Linux 上使用 epoll，等等。但这些已经存在，所以你不必费心。

# javascript - JQuery UI .sortable('toArray') 返回 HTMLUListElement 而不是 id 的数组

> ID：10885607
> 
> 赞同：0
> 
> 时间：2012-06-04T17:39:38.587
> 
> 标签：javascript, jquery, html, jquery-ui

我正在尝试从我的可排序元素中创建一个排序数组，但“toArray”方法不起作用。这是我的可排序 html 代码：

```
<div class="control-group" style="cursor:pointer;">
    <label class="control-label" for="input-sort">Preferences</label>
            <div class="controls">
            <ul id= "sortable">
                    <li class="ui-state-default" id="Item1"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 1</li>
                    <li class="ui-state-default" id="Item2"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 2</li>
                    <li class="ui-state-default" id="Item3"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 3</li>
                    <li class="ui-state-default" id="Item4"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 4</li>
                    <li class="ui-state-default" id="Item5"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 5</li>
                    <li class="ui-state-default" id="Item6"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 6</li>
                    <li class="ui-state-default" id="Item7"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 7</li>
            </ul>
            </div>
    </div> 
```

这是相应的javascript：

```
<script>
    var result=$("#sortable").sortable("toArray");
    $("#sortable").sortable({
        stop: function(event, ui) {
            document.getElementById("info").innerHTML=result + " and " + result[0];
        }
    });
</script> 
```

当我显示结果时，它返回 [object Object] 和 [object HTMLLIElement]，我什至尝试将结果分配给 $("sortable li") 但它没有返回任何元素。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:45:45.707

您的代码没有任何逻辑意义，但是我认为这就是您要追求的。

```
$("#sortable").sortable({
    stop: function(event, ui) {
        $("#info").html(JSON.stringify($("#sortable").sortable('toArray')));
    }
}); 
```

但是请注意，除非您包含 JSON 库，否则它在 IE<8 中不起作用。

在您的代码中，结果永远不会更新，因此它将始终包含 jquery 对象，该对象将始终是一个对象，而不是一个值数组。

# android - 拍照并将其存储到内部存储器

> ID：10885611
> 
> 赞同：1
> 
> 时间：2012-06-04T17:39:53.860
> 
> 标签：android

我正在尝试拍照，当用户单击按钮时，我想将图片保存到内部存储中。我将在没有 SD 卡的平板电脑上进行测试。我也是在 android 上拍照的新手，而网络对于试图找到我需要将其写入除 sd 卡以外的其他地方的特定代码没有任何帮助。这是我的 camera.java 的样子。

```
package com.test;

import com.test.R;

import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import android.app.Activity;

import android.hardware.Camera;
import android.hardware.Camera.PictureCallback;
import android.hardware.Camera.ShutterCallback;

import android.os.Bundle;

import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.FrameLayout;

public class camera extends Activity
{
    private static final String TAG = "CameraDemo";
        Camera camera;
        Preview preview;
        Button buttonClick;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.camera);

        preview = new Preview(this);
        ((FrameLayout) findViewById(R.id.preview)).addView(preview);

        buttonClick = (Button) findViewById(R.id.buttonClick);
        buttonClick.setOnClickListener( new OnClickListener() {
            public void onClick(View v) {
                preview.camera.takePicture(shutterCallback, rawCallback, jpegCallback);
            }
        });

        Log.d(TAG, "onCreate'd");
    }

    ShutterCallback shutterCallback = new ShutterCallback() {
        public void onShutter() {
            Log.d(TAG, "onShutter'd");
        }
    };

    /** Handles data for raw picture */
    PictureCallback rawCallback = new PictureCallback() {
        public void onPictureTaken(byte[] data, Camera camera) {
            Log.d(TAG, "onPictureTaken - raw");
        }
    };

    /** Handles data for jpeg picture */
    PictureCallback jpegCallback = new PictureCallback() {
        public void onPictureTaken(byte[] data, Camera camera) {
            FileOutputStream outStream = null;
            try {
                // write to local sandbox file system
                outStream = camera.this.openFileOutput(String.format("%d.jpg", System.currentTimeMillis()), 0); 
                // Or write to sdcard
                //outStream = new FileOutputStream(String.format("/sdcard/%d.jpg", System.currentTimeMillis()));    
                outStream.write(data);
                outStream.close();
                Log.d(TAG, "onPictureTaken - wrote bytes: " + data.length);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
            }
            Log.d(TAG, "onPictureTaken - jpeg");
        }
    };

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:00:33.477

目前还不清楚您在使用该代码时遇到了什么样的问题。您打开文件的方式似乎很好，所以也许它的行为方式不正确？

Android 文档中的此页面详细介绍了使用应用程序可用的不同类型的存储：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

特别是，关于[保存应该共享的文件](http://developer.android.com/guide/topics/data/data-storage.html#SavingSharedFiles)的部分可能对您的情况有用。它引用了“外部存储”，但许多设备使用内部存储模拟外部存储，因此作为开发人员您无需担心。

如果您希望图片在系统的图库应用程序中可见，您可以使用[MediaScannerConnection.scanFile](http://developer.android.com/reference/android/media/MediaScannerConnection.html#scanFile%28android.content.Context,%20java.lang.String%5B%5D,%20java.lang.String%5B%5D,%20android.media.MediaScannerConnection.OnScanCompletedListener%29)将其添加到媒体扫描中。但是，如果您使用`openFileOutput`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:07:05.153

您可以从 CommonsAware 的 Github 页面查看此[图片演示](https://github.com/commonsguy/cw-advandroid/blob/master/Camera/Picture/src/com/commonsware/android/picture/PictureDemo.java)示例，它可能对您有用。

# .net - 从 InfoPath 提交到 WCF 服务的奇怪错误消息

> ID：10885620
> 
> 赞同：0
> 
> 时间：2012-06-04T17:40:38.930
> 
> 标签：.net, wcf, infopath2010

我正在构建一个 InfoPath 表单（InfoPath 2010），并且在自定义代码中我以编程方式调用 WCF 服务作为提交操作的一部分，如下所示：

DriverHours.DriverHours allHours = new DriverHours.DriverHours(); 布尔规格；

```
 XPathNavigator myNav = this.MainDataSource.CreateNavigator();

    string allData = myNav.OuterXml;
    allData = allData.Replace("my:", "");

   result = allHours.SaveDriverHoursByString(allData); 
```

SaveDriverHoursByString 只接受一串 XML 数据，通过 WCF 将其保存到后端的数据库中。

当提交块执行时，最后一行显示以下错误：

```
System.Web.Services.Protocols.SoapHeaderException
The formatter threw an exception while trying to deserialize the message: There was an error while trying to deserialize parameter http://tempuri.org/:Xml. The InnerException message was 'There was an error deserializing the object of type System.String. The maximum string content length quota (8192) has been exceeded while reading XML data. This quota may be increased by changing the MaxStringContentLength property on the XmlDictionaryReaderQuotas object used when creating the XML reader. Line 208, position 21.'.  Please see InnerException for more details.
   at System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)
   at HrsServicetemplate.DriverHours.DriverHours.SaveDriverHoursByString(String Xml)
   at HrsServicetemplate.FormCode.FormEvents_Submit(Object sender, SubmitEventArgs e)
   at Microsoft.Office.InfoPath.Internal.FormEventsHost.OnSubmit(DocReturnEvent pEvent)
   at Microsoft.Office.Interop.InfoPath.SemiTrust._XDocumentEventSink2_SinkHelper.OnSubmitRequest(DocReturnEvent pEvent) 
```

现在我知道解决方案是增加 WCF 服务的 web.config 上的内容长度。下面是我现在的 web.config 文件，但仍然出现错误：

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>
   <!--<add name="IFMS_Connection" connectionString="Data Source=aaaa;User Id=aaaa;Password=abcdefg;"/>    -->
    <add name="IFMS_Connection" connectionString="Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=aaaa)(PORT=1521)))(CONNECT_DATA=(SERVICE_NAME = ORCLDEVL)));User Id=aaa;Password=aaaa;"/>

  </connectionStrings>
  <system.web>
   <httpRuntime maxRequestLength="2147483647" />
   <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>

    <bindings>
      <wsHttpBinding>

        <binding name="NoSecurityBinding"  maxReceivedMessageSize="2147483647">
          <readerQuotas
             maxDepth="2147483647"
             maxStringContentLength="2147483647"
             maxArrayLength="2147483647"
             maxBytesPerRead="2147483647"
             maxNameTableCharCount="2147483647" />

          <security mode="None">
            <transport clientCredentialType="None"/>
            <message establishSecurityContext="false"/>
          </security>

        </binding>
      </wsHttpBinding>

    </bindings>

    <services>

    </services>
    <behaviors>      
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />         
        </behavior>
        <behavior name="metadataAndDebug">
          <serviceMetadata httpGetEnabled="true" />

          <serviceDebug
            includeExceptionDetailInFaults="true"/>

        </behavior>
      </serviceBehaviors>
    </behaviors>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

有任何想法吗？特别是我想知道缺少配置条目，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:32:52.473

可能是你更新了服务器端的配置，但没有更新客户端的配置。

# xml - 将平均响应时间转换为可求和的节点集

> ID：10885630
> 
> 赞同：1
> 
> 时间：2012-06-04T17:41:11.403
> 
> 标签：xml, xslt, xpath

我一直在 JMeter 中运行一系列的 web 服务测试，我想做的是取每个测试返回的平均响应时间的总和。我有办法找到每个测试的平均响应时间，但无法将测试的平均值加在一起。我知道，为了使用 XPath 的 sum() 函数，这些值需要成为节点集的一部分，但是据我所知，一旦我从 XML 中找到平均值，它们就不再是其中的一部分。所以我需要使用 node-set() 函数，但我对 XSLT/XPath 还很陌生，并且不确定如何让事情正常工作。

对此的任何帮助表示赞赏！

这是来自 JMeter 的示例 XML，运行两次迭代：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../style/jmeter-results-detail-report_21.xsl"?>
<testResults version="1.2">
<httpSample t="78" lt="78" ts="1338826079163" s="true" lb="html" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="4418" ng="1" na="1"/>
<httpSample t="31" lt="31" ts="1338826079241" s="true" lb="userRoleRetriever" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="758" ng="1" na="1"/>
<httpSample t="32" lt="32" ts="1338826079272" s="true" lb="UserActivityWSDL" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="2398" ng="1" na="1"/>
<httpSample t="156" lt="125" ts="1338826079304" s="true" lb="SubscriberMgmtWSDL" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="56434" ng="1" na="1"/>
<httpSample t="31" lt="16" ts="1338826079460" s="true" lb="NetworkMgmtWSDL" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="33020" ng="1" na="1"/>
<httpSample t="15" lt="15" ts="1338826079507" s="true" lb="AlarmMgmtWSDL" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="11594" ng="1" na="1"/>
<httpSample t="141" lt="141" ts="1338826079538" s="true" lb="getSubscribers" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="397" ng="1" na="1"/>
<httpSample t="265" lt="234" ts="1338826079679" s="true" lb="getMpegResultsById" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="832927" ng="1" na="1"/>
<httpSample t="15" lt="15" ts="1338826079976" s="true" lb="getOverallSummary" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="402" ng="1" na="1"/>
<httpSample t="0" lt="0" ts="1338826082663" s="true" lb="html" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="4418" ng="1" na="1"/>
<httpSample t="16" lt="16" ts="1338826082663" s="true" lb="userRoleRetriever" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="758" ng="1" na="1"/>
<httpSample t="15" lt="0" ts="1338826082679" s="true" lb="UserActivityWSDL" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="2398" ng="1" na="1"/>
<httpSample t="32" lt="0" ts="1338826082694" s="true" lb="SubscriberMgmtWSDL" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="56434" ng="1" na="1"/>
<httpSample t="31" lt="15" ts="1338826082726" s="true" lb="NetworkMgmtWSDL" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="33020" ng="1" na="1"/>
<httpSample t="16" lt="16" ts="1338826082757" s="true" lb="AlarmMgmtWSDL" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="11594" ng="1" na="1"/>
<httpSample t="250" lt="250" ts="1338826082788" s="true" lb="getSubscribers" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="10536" ng="1" na="1"/>
<httpSample t="15454" lt="15392" ts="1338826083038" s="true" lb="getMpegResultsById" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="2023426" ng="1" na="1"/>
<httpSample t="15" lt="15" ts="1338826098555" s="true" lb="getOverallSummary" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="402" ng="1" na="1"/>

</testResults> 
```

这是我的 XSLT 中的一个摘录，其中找到了每个测试的平均值。

```
<xsl:for-each select="/testResults/*[not(@lb = preceding::*/@lb)]">
    ...
    <xsl:variable name="count" select="count(../*[@lb = current()/@lb])" />
    <xsl:variable name="totalTime" select="sum(../*[@lb = current()/@lb]/@t)" />
    <xsl:variable name="averageTime" select="$totalTime div $count" />
    ...
</xsl:for-each> 
```

如何将这些平均时间输入节点集中并随后求和？

[以下是感兴趣的人的最终报告的示例](http://i.imgur.com/UGfWI.png)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:29:47.787

如果您可以使用 XSLT2.0，那么它具有处理节点集的内置功能，而在 XSLT1.0 中您必须使用扩展功能。通过节点集，您可以创建一个变量，其中包含（新创建的）节点列表，然后您可以迭代它们，甚至对它们求和，就好像它们是源文档本身一样。

在展示解决方案之前要注意的另一件事是，这也是分组问题的一个示例。您有多个测试的结果，并希望按名称对它们进行分组。您当前使用的方法不一定那么有效。在 XSLT2.0 中虽然有**xsl:for-each-group**函数使事情变得更容易

```
<xsl:for-each-group select="httpSample" group-by="@lb"> 
```

您只需要创建一个变量，并通过对测试结果进行分组来构建一个新节点集，并将一个“平均”节点添加到新列表中。

```
 <xsl:variable name="results">
     <xsl:for-each-group select="httpSample" group-by="@lb">
        <xsl:variable name="count" select="count(current-group())"/>
        <xsl:variable name="totalTime" select="sum(current-group()/@t)"/>
        <test lb="{current-grouping-key()}" num="{$count}" tot="{$totalTime}" avg="{$totalTime div $count}"/>
     </xsl:for-each-group>
  </xsl:variable> 
```

因此，这里的**结果**变量将包含一个**测试**元素列表，每个不同的测试一个，新添加的节点具有平均时间。然后，您可以迭代这些结果，甚至对它们求和。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="html" indent="yes"/>
   <xsl:template match="/testResults">

      <xsl:variable name="results">
         <xsl:for-each-group select="httpSample" group-by="@lb">
            <xsl:variable name="count" select="count(current-group())"/>
            <xsl:variable name="totalTime" select="sum(current-group()/@t)"/>
            <test lb="{current-grouping-key()}" num="{$count}" tot="{$totalTime}" avg="{$totalTime div $count}"/>
         </xsl:for-each-group>
      </xsl:variable>

      <table>
         <tr>
            <th>Test</th>
            <th>Total Test</th>
            <th>Total Time</th>
            <th>Average Time</th>
         </tr>
         <xsl:for-each select="$results/test">
            <tr>
               <td>
                  <xsl:value-of select="@lb"/>
               </td>
               <td>
                  <xsl:value-of select="@num"/>
               </td>
               <td>
                  <xsl:value-of select="@tot"/>
               </td>
               <td>
                  <xsl:value-of select="@avg"/>
               </td>
            </tr>
         </xsl:for-each>
         <tr>
            <td>Total</td>
            <td>
               <xsl:value-of select="sum($results/test/@num)"/>
            </td>
            <td>
               <xsl:value-of select="sum($results/test/@tot)"/>
            </td>
            <td>
               <xsl:value-of select="sum($results/test/@avg)"/>
            </td>
         </tr>
      </table>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 示例时，输出如下

```
<table>
   <tr>
      <th>Test</th>
      <th>Total Test</th>
      <th>Total Time</th>
      <th>Average Time</th>
   </tr>
   <tr>
      <td>html</td>
      <td>2</td>
      <td>78</td>
      <td>39</td>
   </tr>
   <tr>
      <td>userRoleRetriever</td>
      <td>2</td>
      <td>47</td>
      <td>23.5</td>
   </tr>
   <tr>
      <td>UserActivityWSDL</td>
      <td>2</td>
      <td>47</td>
      <td>23.5</td>
   </tr>
   <tr>
      <td>SubscriberMgmtWSDL</td>
      <td>2</td>
      <td>188</td>
      <td>94</td>
   </tr>
   <tr>
      <td>NetworkMgmtWSDL</td>
      <td>2</td>
      <td>62</td>
      <td>31</td>
   </tr>
   <tr>
      <td>AlarmMgmtWSDL</td>
      <td>2</td>
      <td>31</td>
      <td>15.5</td>
   </tr>
   <tr>
      <td>getSubscribers</td>
      <td>2</td>
      <td>391</td>
      <td>195.5</td>
   </tr>
   <tr>
      <td>getMpegResultsById</td>
      <td>2</td>
      <td>15719</td>
      <td>7859.5</td>
   </tr>
   <tr>
      <td>getOverallSummary</td>
      <td>2</td>
      <td>30</td>
      <td>15</td>
   </tr>
   <tr>
      <td>Total</td>
      <td>18</td>
      <td>16593</td>
      <td>8296.5</td>
   </tr>
</table> 
```

# c# - 使用 SFTP 连接到 FTP 站点并下载文件

> ID：10885633
> 
> 赞同：1
> 
> 时间：2012-06-04T17:41:45.340
> 
> 标签：c#, ftp, sftp

我需要从一个`FTP`站点下载所有文件。但我需要连接`SFTP`才能连接。我无法找到示例/教程来从用于连接的`FTP`站点下载文件。`SFTP`

有人可以指点我一个教程或提供一些示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:47:40.817

Tamir 的[SharpSSH](http://www.tamirgal.com/blog/category/SharpSSH.aspx)库可以很好地处理 SFTP。还有很多例子，但要点是：

```
Sftp sftp = new Sftp(sftpHost, sftpUser);
Console.WriteLine("success");

// assuming public/private key authentication here...
sftp.AddIdentityFile(privateKeyFileName, privateKeyFilePassPhrase);
sftp.Connect(sftpPort);
ArrayList files = sftp.GetFileList(".");                
foreach (string file in files)
{
Console.WriteLine("\t{0}", file);
}

sftp.Close(); 
```

# javascript - 将拆分字符串的子字符串包装在元素中

> ID：10885634
> 
> 赞同：0
> 
> 时间：2012-06-04T17:41:49.100
> 
> 标签：javascript, jquery, html, string, split

我如何使用 javascript/jquery 来选择所有`$('td.created')`并拆分 html `<br>`，然后将每个部分包装在 span 标签中（这样我就可以向 span:first 添加一个类以对其进行样式设置）。

返回的字符串的格式`$('td.created').html()`类似于

`posted by User123 <br> Posted on 1/2/12 at 4:15PM`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:46:52.603

可能的通用解决方案（不仅适用于 2 行）：

```
$("td.created").each(function() {
    var text = this.innerHTML.split("<br>");
    for (var i = 0; i < text.length; i++) {
        var span = $("<span />").html(text[i]);
        if (i == 0) span.addClass("first");
        span.appendTo("#element");
    }
});​ 
```

**演示：http:** [//jsfiddle.net/7xQAL/](http://jsfiddle.net/7xQAL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:31:57.550

```
$('td.created').each(function(i, html) {
    var newHtml = $(this).contents(),
        spans = [];
    newHtml.each(function() {
        var html = (this.nodeName.toLowerCase() == 'br') ? '<br>' : '<span>' + this.textContent + '</span>';
        spans.push(html);
    });
    $(this).html(spans.join(''));
}); 
```

演示（使用 DIV 容器） [http://jsfiddle.net/PVLek/](http://jsfiddle.net/PVLek/)

# javascript - JavaScript 从该函数内部引用匿名函数

> ID：10885636
> 
> 赞同：2
> 
> 时间：2012-06-04T17:41:52.993
> 
> 标签：javascript, events

我正在创建一个小型画布库，其中有一个需要引用自身的匿名函数。但是，我不知道该怎么做。我有以下不完整的代码：

```
var removeDragHandler = (function (object) {
  return function (e) {
    if (typeof object["dragend"] === "function") {
      object["dragend"](e);
    }
    removeEvent({
      element: window,
      event: "mousemove",
      callback: object["drag"]
    });
    removeEvent({
      element: window,
      event: "mouseup",
      callback: ????? //What here?
    });
  };
})(object);
addEvent({
  element: window,
  event: "mouseup",
  callback: removeDragHandler
}); 
```

当然可以换了？？？？？？使用arguments.callee，但它在严格模式下不起作用。还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:49:26.760

您可以为匿名函数命名。请注意，旧 IE 中存在一个错误，其中匿名函数作为外部作用域中的声明函数泄漏，但这不应该是问题，因为外部作用域无论如何都是空的。

```
var removeDragHandler = (function (object) {
  return function once(e) {
    if (typeof object["dragend"] === "function") {
      object["dragend"](e);
    }
    removeEvent({
      element: window,
      event: "mousemove",
      callback: object["drag"]
    });
    removeEvent({
      element: window,
      event: "mouseup",
      callback: once
    });
  };
})(object); 
```

# ruby-on-rails - 无法在生产中启动独角兽 - 无法将路径名转换为字符串 (TypeError)

> ID：10885637
> 
> 赞同：1
> 
> 时间：2012-06-04T17:41:54.173
> 
> 标签：ruby-on-rails, ruby, unicorn

我有一个 Rails 3 (Spree) 应用程序，我可以在开发中开始，但不能在生产中开始。

如果我运行`bundle exec unicorn -c config/unicorn.rb -D -E development`一切正常。

但是，`bundle exec unicorn -c config/unicorn.rb -D -E production`, 返回：

`master failed to start, check stderr log for details`

这是 unicorn.stder.log 文件：

```
I, [2012-06-04T17:31:54.497851 #10431]  INFO -- : listening on addr=/tmp/unicorn-uspatriottactical.socket fd=5
I, [2012-06-04T17:31:54.499222 #10431]  INFO -- : Refreshing Gem list
/var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `require': can't convert Pathname into String (TypeError)
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `require'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:359:in `require_or_load'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:502:in `load_missing_constant'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:192:in `block in const_missing'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in `each'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in `const_missing'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/bundler/gems/spree_related_products-72cbbfc9ed31/lib/spree_related_products.rb:17:in `block in <class:Engine>'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
        from /var/rails/uspatriottactical/releases/20120604171150/config/environment.rb:5:in `<top (required)>'
        from config.ru:4:in `require'
        from config.ru:4:in `block in <main>'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
        from config.ru:1:in `new'
        from config.ru:1:in `<main>'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn.rb:44:in `eval'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn.rb:44:in `block in builder'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:696:in `call'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:696:in `build_app!'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:136:in `start'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/bin/unicorn:121:in `<top (required)>'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `load'
        from /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `<main>' 
```

因为这似乎是一个 gem 问题，所以这是我的 Gemfile：

```
source 'http://rubygems.org'

gem 'active_shipping',                  :git => 'git://github.com/Shopify/active_shipping.git'
gem 'carrierwave'
gem 'jquery-rails'
gem 'rails', '~> 3.2.0'
gem 'rmagick'
gem 'spree',                            :git => 'git://github.com/spree/spree', :branch => '1-1-stable'
gem 'spree_active_shipping',            :git => 'git://github.com/spree/spree_active_shipping.git'
gem 'spree_flexi_variants',             :git => 'git://github.com/jsqu99/spree_flexi_variants.git'
gem 'spree_reviews',                    :git => 'git://github.com/spree/spree_reviews.git'
gem 'spree_related_products',           :git => 'git://github.com/spree/spree_related_products.git'
gem 'spree_shipworks_api',              :path => 'spree_shipworks_api'
gem 'spree_amazon_fps',                 :path => 'spree_amazon_fps'
# gem 'spree_variant_options',            :git => 'git://github.com/citrus/spree_variant_options.git'
gem 'spree_videos',                     :git => 'git://github.com/iloveitaly/Spree-Videos.git'
gem 'spree_gateway',                    :git => 'git://github.com/spree/spree_gateway.git'
gem 'spree_paypal_express',             :git => 'git://github.com/spree/spree_paypal_express.git'
gem 'remit',                            :git => 'git://github.com/tylerhunt/remit.git'
#gem 'remit',                            :path => '../remit'
gem 'unicorn'

# temporary
gem 'sqlite3'
gem 'execjs'
gem 'therubyracer'

group :assets do
  gem 'coffee-rails', '~> 3.2.0'
  gem 'sass-rails',   '~> 3.2.0'
  gem 'uglifier', '>= 1.2.4'
end

group :console do
  gem 'awesome_print',                  :require => 'ap'
  gem 'hirb-unicode'
  gem 'wirb'
end

group :development, :test do
  gem 'capybara'
  gem 'factory_girl_rails'
  gem 'faker'
  gem 'mysql2'
  gem 'pry'
  gem 'rspec-rails'
  gem 'sunspot_rails', '~> 1.3.1'
  gem 'progress_bar', '0.4.0'
  gem 'sunspot_solr'
  gem "sunspot_with_kaminari", '~> 0.1'
  gem 'sqlite3'
  gem 'debugger'
end

group :development do
#  gem 'heroku'
  gem 'pry-rails'
end

group :production do

    gem 'capistrano'
    gem 'rvm-capistrano'

    gem 'mysql2'

    gem 'sunspot_rails', '~> 1.3.1'
    gem 'progress_bar', '0.4.0'
    gem 'sunspot_solr'
    gem "sunspot_with_kaminari", '~> 0.1'
end

# Used when running on Heroku
# group :deployment do
#   gem 'foreman'
#   gem 'pg'
#   gem 'thin'
# end

group :test do
  gem 'fakeweb'
  # Pretty printed test output
  gem 'turn', '~> 0.8.3',               :require => false
  gem 'vcr'
end 
```

编辑：这是我的 unicorn.rb

```
# See http://unicorn.bogomips.org/Unicorn/Configurator.html for complete documentation.

www_dir = "/var/rails/"
app_name = "uspatriottactical"

# Set environment to development unless something else is specified
#env = ENV["RAILS_ENV"] || "production"

# amount of unicorn workers to spin up
worker_processes 2

# Socket to bind to
listen "/tmp/unicorn-#{app_name}.socket"

preload_app true

# restarts workers that hang for 30 seconds
timeout 30

pid "/tmp/unicorn.#{app_name}.pid"

#if env == "production"
  user 'app_user', 'app_user' # 'user', 'group'

  working_directory "#{www_dir}#{app_name}/current"
  shared_path = "#{www_dir}#{app_name}/shared"

  stderr_path "#{shared_path}/log/unicorn.stderr.log"
  stdout_path "#{shared_path}/log/unicorn.stdout.log"
#end

before_fork do |server, worker|
  # the following is highly recomended for Rails + "preload_app true"
  # as there's no need for the master process to hold a connection
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.connection.disconnect!
  end

  # When sent a USR2, Unicorn will suffix its pidfile with .oldbin and
  # immediately start loading up a new version of itself (loaded with a new
  # version of our app). When this new Unicorn is completely loaded
  # it will begin spawning workers. The first worker spawned will check to
  # see if an .oldbin pidfile exists. If so, this means we've just booted up
  # a new Unicorn and need to tell the old one that it can now die. To do so
  # we send it a QUIT.
  #
  # This enables 0 downtime deploys.
  old_pid = "/var/run/unicorn-#{app_name}.pid.oldbin"
  if File.exists?(old_pid) && server.pid != old_pid
    begin
      Process.kill("QUIT", File.read(old_pid).to_i)
    rescue Errno::ENOENT, Errno::ESRCH
      # someone else did our job for us
    end
  end
end

after_fork do |server, worker|

  # Unicorn master loads the app then forks off workers - because of the way
  # Unix forking works, we need to make sure we aren't using any of the parent's
  # sockets, e.g. db connection (since "preload_app true")
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.establish_connection
  end

  # if preload_app is true, then you may also want to check and
  # restart any other shared sockets/descriptors such as Memcached,
  # and Redis.  TokyoCabinet file handles are safe to reuse
  # between any number of forked children (assuming your kernel
  # correctly implements pread()/pwrite() system calls)
end 
```

编辑：根据请求 /var/rails/uspatriottactical/shared/bundle/ruby/1.9.1/gems/polyglot-0.3.3/lib/polyglot.rb

我在第 63 行评论

```
require 'pathname'

module Polyglot
  @registrations ||= {} # Guard against reloading
  @loaded ||= {}

  class PolyglotLoadError < LoadError; end

  class NestedLoadError < LoadError
    def initialize le
      @le = le
    end
    def reraise
      raise @le
    end
  end

  def self.register(extension, klass)
    extension = [extension] unless Array === extension
    extension.each{|e|
      @registrations[e] = klass
    }
  end

  def self.find(file, *options, &block)
    is_absolute = Pathname.new(file).absolute?
    (is_absolute ? [""] : $:).each{|lib|
      base = is_absolute ? "" : lib+File::SEPARATOR
      # In Windows, repeated SEPARATOR chars have a special meaning, avoid adding them
      matches = Dir["#{base}#{file}{,.#{@registrations.keys*',.'}}"]
      # Revisit: Should we do more do if more than one candidate found?
      $stderr.puts "Polyglot: found more than one candidate for #{file}: #{matches*", "}" if matches.size > 1
      if path = matches[0]
        return [ path, @registrations[path.gsub(/.*\./,'')]]
      end
    }
    return nil
  end

  def self.load(*a, &b)
    file = a[0].to_str
    return if @loaded[file] # Check for $: changes or file time changes and reload?
    begin
      source_file, loader = Polyglot.find(file, *a[1..-1], &b)
      if (loader)
        begin
          loader.load(source_file)
          @loaded[file] = true
        rescue LoadError => e
          raise Polyglot::NestedLoadError.new(e)
        end
      else
        raise PolyglotLoadError.new("Failed to load #{file} using extensions #{(@registrations.keys+["rb"]).sort*", "}")
      end
    end
  end
end

module Kernel
  alias polyglot_original_require require

  def require(*a, &b)
    polyglot_original_require(*a, &b) # <- line 63
  rescue LoadError => load_error
    begin
      Polyglot.load(*a, &b)
    rescue Polyglot::NestedLoadError => e
      e.reraise
    rescue LoadError
      # Raise the original exception, possibly a MissingSourceFile with a path
      raise load_error
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:14:16.567

升级到 ruby​​ 1.9.3 可以解决这个问题。

有关详细信息，请参阅[github.com/cjheath/polyglot/issues/2](https://github.com/cjheath/polyglot/issues/2)。

显然 RVM 安装的 ruby​​ 1.9.1 和 1.9.2 存在问题。

# javascript - Backbone.js - 模型数组上的更改事件不会在元素更改时触发

> ID：10885641
> 
> 赞同：2
> 
> 时间：2012-06-04T17:42:08.353
> 
> 标签：javascript, backbone.js

我有一个包含两个对象的父主干模型。

(1) Backbone Models 数组

(2) 一个字符串

如果我绑定到父级，设置字符串的值会触发更改事件，但是在模型数组中的一个模型的属性上调用 set 不会触发父级的更改事件。

如何解决此问题，以便对数组中任何模型的任何更改都会触发父母更改事件？

**编辑——按要求添加代码**

```
var myModel = Backbone.Model.extend(
  {
    defaults : {
      models : [],
      aString: 'foobar'
    }
  }
);
var foo = new myModel();
var arrayElement = Backbone.Model.extend({x: 7});
var arrayElement1 = new arrayElement({x: 7});
foo.set('models', [arrayElement1]);
foo.bind('change', function() { console.log('changed!')});
arrayElement1.set('x', 10);  //Does not trigger console log
foo.set('aString', 'barfoo'); //Does trigger console log 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:27:25.083

骨干模型不会将任何内容绑定到它们的属性，因此`foo`无法知道您正在更改其背后的属性之一。所以，当你这样做时：

```
foo.set('models', [some_other_model]);
some_other_model.set(...); 
```

你实际上根本没有改变`foo`，你所做的只是`foo`直接改变了 's 的一个属性。模型的属性可以是任何东西，模型只是将它们视为不透明的 blob。你会遇到类似的问题：

```
o = { a: 'b' };
m.set('p', o);
o.a = 'c'; 
```

在这两种情况下，您都是通过引用而不是通过模型的接口直接更改模型的属性。

另一方面，集合确实在其模型上侦听事件。集合是模型的集合，因此它们希望其成员成为模型并相应地表现。

如果您想要一个包含的模型来传播`'change'`事件，那么您可能必须自己通过重写`set`来手动绑定更改处理程序来传播事件。您还可以使用内部集合而不是数组来更轻松地传播事件。

* * *

您的`defaults`. 默认值被复制到新的模型实例，但副本是浅拷贝，因此您的模型最终将共享对数组的相同引用，除非明确`set`替换引用。例如，这个：

```
var M = Backbone.Model.extend({
    defaults: {
      a: []
    }
});
var m1 = new M();
m1.get('a').push('pancakes');
console.log(M.prototype.defaults.a);
var m2 = new M();
console.log(m2.get('a')); 
```

将两个`['pancakes']`放在控制台中，因为`m1.get('a')`将返回`M.prototype.defaults.a`而不是特定于的新空数组：http `m1`: [//jsfiddle.net/ambiguous/AraCu/](http://jsfiddle.net/ambiguous/AraCu/) ​</p>

# sql-server - 如何在 sql server 2005 复制订阅者中停止更新？

> ID：10885647
> 
> 赞同：1
> 
> 时间：2012-06-04T17:42:44.553
> 
> 标签：sql-server, sql-server-2005, replication

我知道我不能让它只读。但是有没有“普通的方法”来做到这一点？

如果我拒绝每个人都写，因为拒绝高于授予，如果将停止复制。

杰瑞

# oracle - 无法摆脱 ORA-00907 错误

> ID：10885650
> 
> 赞同：-1
> 
> 时间：2012-06-04T17:42:55.653
> 
> 标签：oracle, ora-00907

我收到缺少右括号错误。如果我删除围绕 iterator.next() 语句的注释，它工作正常。无法弄清楚出了什么问题。我传递的数据中没有“（”。

```
String ORACLE_SUM_QUERY = "select item_number, sum(system_quantity) from ITEMS " +
        "where sndate = ? and item_id in" +
        " (select item_id from ap.system_items where org_id = 4 " +
        " and segment1 in "; 
......
 while (iterator.hasNext()) {
//iterator.next();
String oracleQuery = String.format(ORACLE_SUM_QUERY + "(%s)) GROUP BY item_number", iterator.next());
        preparedStat = connection.prepareStatement(oracleQuery);
        preparedStat.setDate(1, getSnDate()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:21:05.857

尝试将您的代码重写为

```
String ORACLE_SUM_QUERY = "select item_number, sum(system_quantity) from ITEMS " +
        "where sndate = ? and item_id in" +
        " (select item_id from ap.system_items where org_id = 4 " +
        " and segment1 in ("; 
......
 while (iterator.hasNext())
   {
   ORACLE_SUM_QUERY = ORACLE_SUM_QUERY + String.format("%s", iterator.next());

   if(iterator.hasNext())
     ORACLE_SUM_QUERY = ORACLE_SUM_QUERY + ",";
   }

ORACLE_SUM_QUERY = ORACLE_SUM_QUERY + ")) GROUP BY item_number";

preparedStat = connection.prepareStatement(ORACLE_SUM_QUERY);
preparedStat.setDate(1, getSnDate()); 
```

这可能无法完全得到它，因为我无法测试它，但它可能会让你更接近。

分享和享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:50:49.620

该错误似乎表明您正在构建的 SQL 语句`oracleQuery`的括号数不正确。`prepareStatement`在将 SQL 语句传递给调用之前将其打印出来以使调试更容易，这可能会有所帮助。

我的猜测是返回的字符串`iterator.next()`不是您所期望的。

# xml - 如何将 word 文档中的数据（文本）导入 SQL Server 数据库？

> ID：10885658
> 
> 赞同：1
> 
> 时间：2012-06-04T17:43:23.250
> 
> 标签：xml, sql-server-2008, parsing, ms-word, insertion

我有这个巨大的 Word 文档，其中包含有关人员联系方式的数据。有近 350000 个这样的联系方式需要插入到数据库中。

我该怎么做呢？我是将其转换为 XML 然后再转换为数据库，还是应该使用一些脚本语言来解析单词数据并将其插入数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:34:35.990

使用 Perl 等脚本语言解析 Word 文档。将其转换为 xml 或 txt。完成后，您可以非常轻松地将数据导入数据库。有关更多帮助，请参阅以下链接：[将 Word doc 或 docx 文件转换为文本文件？](https://stackoverflow.com/questions/1110409/how-can-i-programmatically-convert-word-doc-or-docx-files-into-text-files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:51:01.647

如果是我，我会用 C++ 编写一个简单的解析器，将数据转换为表格或分隔格式。然后我要么使用 SQL api 加载数据，要么使用 php 将数据加载到 sql 数据库中。

# android - android：禁用操作栏主页按钮

> ID：10885662
> 
> 赞同：6
> 
> 时间：2012-06-04T17:43:34.623
> 
> 标签：android, android-actionbar

我们有一个类似文件管理器的应用程序，我们将操作栏主页按钮用作“在文件夹结构中向上”操作。如果用户位于文件夹结构的顶部，则应禁用该按钮。

当用户在子文件夹中时，我们将主页按钮设置为打开。沉我们到达顶部文件夹，我们禁用显示。

```
 // Update home
    actionBar.setDisplayHomeAsUpEnabled(hasParent); 
```

问题是按钮仍然“启用”，因为用户可以按下它可以看到被按下的视觉反馈。在没有父文件夹的情况下，我们希望在这种情况下完全禁用操作栏主页按钮。

我尝试调用`setDisplayShowHomeEnabled()`，但没有禁用该按钮，而是完全删除了主页按钮。

有任何想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-04T18:19:50.097

你试过了`setHomeButtonEnabled()`吗？这是 API 级别 14 的新内容，因此对于 Honeycomb 平板电脑，您必须跳过它。

# c# - 模板列中WPF数据网格单元格内的文本滚动

> ID：10885663
> 
> 赞同：2
> 
> 时间：2012-06-04T17:43:35.153
> 
> 标签：c#, wpf, wpfdatagrid, expression-blend, wpftoolkit

我的模板列中的文本太长，所以我正在修剪文本并以点结尾。我在工具提示中显示全文。但是，当鼠标滚动到具有较长文本的单元格上时，我该如何做到这一点，文本应该从右向左滚动。我正在使用 WPF 和 WPF 工具包`DataGrid`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:20:42.470

也许我读错了这个问题，但它是一个实例，您可以制作一个单元格数据模板，将滚动查看器包裹在您的文本周围并将滚动条可见性设置为自动？

# android - 如何从应用程序启动证书安装程序意图以访问根密钥库

> ID：10885665
> 
> 赞同：0
> 
> 时间：2012-06-04T17:43:41.973
> 
> 标签：android, certificate, wifi

我正在尝试从应用程序安装 CA 证书，但没有运气。我正在使用安卓 SDK 2.3.3。

我找到了一些从应用程序启动凭据存储对话框的参考。有人可以分享一些鳕鱼吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:42:13.867

Why do you need to install a CA certificates? In Android 2.x, certificates and keys stored in credential storage are only used by the VPN and WiFi. The API for this is not public, but you can start the certificate installer with the "android.credentials.INSTALL" intent action.

# iphone - 仅在第一个 .xib 文件上隐藏 UINavigationController

> ID：10885668
> 
> 赞同：2
> 
> 时间：2012-06-04T17:44:13.923
> 
> 标签：iphone, macos, xcode4.2

这可能是一个愚蠢的问题，但我以编程方式将 UINavigationController 添加到我的应用程序中。如果可能的话，我只想将它添加到我所有窗口的顶部，除了第一个 .xib。甚至可能只是将其隐藏在我的第一个 .xib 中。有可能做到这一点吗？我想到了我的第一个 .xib 文件，它像封面一样向我的应用程序的其余部分打开，我宁愿那个蓝色条不显示在顶部。我希望我能给你看照片，但还没有足够的代表。谢谢！

下面是我认为可以帮助我为应用程序的每个页面提供后栏的代码：

```
#import "McCormick_TaylorViewController.h"

@implementation McCormick_TaylorAppDelegate

@synthesize window = _window;
@synthesize viewController = _viewController;

- (void)dealloc
{
    [_window release];
    [_viewController release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    
  (NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]   
    autorelease];
    // Override point for customization after application launch.
    self.viewController = [[[McCormick_TaylorViewController alloc] 
    initWithNibName:@"McCormick_TaylorViewController" bundle:nil] autorelease];
    UINavigationController * navController = [[UINavigationController alloc]  
    initWithRootViewController:self.viewController];
    self.window.rootViewController = navController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:49:51.197

在你的 McCormick_TaylorViewController 的`viewWillApper:`方法中

只需使用以下代码...

```
[self.navigationController setNavigationBarHidden:NO animated:YES]; 
```

并在导航栏中的其他视图控制器中显示，然后在另一个视图控制器的 viewWillAppear 中使用下面的代码..

```
[self.navigationController setNavigationBarHidden:NO animated:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:49:27.410

使用此方法：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    
(NSDictionary *)launchOptions
 {
 self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]   
 autorelease];
 // Override point for customization after application launch.
 self.viewController = [[[McCormick_TaylorViewController alloc] 
 initWithNibName:@"McCormick_TaylorViewController" bundle:nil] autorelease];
  UINavigationController * navController = [[UINavigationController alloc]  
 initWithRootViewController:self.viewController];
 [navController.navigationBar setHiden:YES]; // hides navigation bar
 self.window.rootViewController = navController;
 [self.window makeKeyAndVisible];
 return YES;
} 
```

# android - android中的/cache/recovery文件夹

> ID：10885670
> 
> 赞同：3
> 
> 时间：2012-06-04T17:44:20.880
> 
> 标签：android, caching, recovery

android 文件系统中的缓存/恢复文件夹包含什么？我里面有一个文件 -`last_log`似乎有关于上次启动的日志信息。有人可以详细解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T17:16:31.560

**`/cache`**包含有关您设备上安装的应用程序的 dex 信息。此信息在 Android 首次启动时填充。Android 会解压缩每个应用程序，优化其启动，并将其保存为`/cache`. 每个应用程序至少应该看到一个名称奇怪的文件：

**`/recovery`**包含在恢复模式下启动所需的文件。恢复模式是一种特殊的启动模式，允许您（不限于）：

*   抹掉数据，
*   擦除/缓存，
*   安装更新包

如果您要求，某些文件包含恢复工具将执行的命令。例如，当您在设备上选择恢复**出厂设置**时，会进入恢复模式。这样做时，Android 会将一些命令写入文件`/recovery`并要求系统以恢复模式重新启动。当恢复程序正在执行时，它会读取文件并执行写入的命令。在这种情况下（恢复出厂设置），它将擦除`/data`并`/cache`重新启动。

您可能会对这些链接感兴趣：

*   [Android 中的 ODEX 文件是什么？](https://stackoverflow.com/questions/9593527/what-are-odex-files-in-android)
*   [http://www.androidcentral.com/what-recovery-android-z](http://www.androidcentral.com/what-recovery-android-z)
*   [http://marakana.com/s/post/1065/updating_android_os_via_ota](http://marakana.com/s/post/1065/updating_android_os_via_ota) (AOSP)
*   [http://forum.xda-developers.com/showthread.php?t=1091508](http://forum.xda-developers.com/showthread.php?t=1091508)
*   [http://developer.android.com/reference/android/os/RecoverySystem.html（Java](http://developer.android.com/reference/android/os/RecoverySystem.html) API）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-14T05:11:52.210

**为m-ric 的** 回答做一些补充：

1.  实际上，当您的设备进入恢复模式时，恢复系统会挂载一个名为“ **tmp** ”的交换分区，如果您没有在**fstab**或其他任何地方设置它的大小，它通常是您设备 RAM 的一半大小。
2.  然后你所有的恢复日志将首先保存在**tmp**分区中。但是当您退出恢复模式并启动到正常的 Android 系统时，**tmp**将不会挂载并消失。所以为了让开发者在恢复模式下获取日志，在退出恢复模式之前，恢复本身会将日志从**tmp**分区复制到缓存分区（**/cache/recovery/xxx**）。现在您可以在Android系统中获取恢复日志。

# javascript - 如何快速显示大部分 html 页面，然后最后加载缓慢的内容？

> ID：10885674
> 
> 赞同：4
> 
> 时间：2012-06-04T17:44:44.857
> 
> 标签：javascript, jquery, ajax, jsp, taglib

我有一个这样的 JSP 页面：

```
<html><body>
<div id="mainContainer">
    <div id="firstDisplayStuff">...</div>
    <% out.flush(); %>
    <div id="slowStuff">
        <mytaglib:abc name='SlowBoat'>...</mytaglib>
    </div>
</div>
<div id="floatRightContainer>
    <div id="endingDisplayStuff">...</div>
<div>
</body></html> 
```

当它到达 taglib 时，它需要很长时间，而且这种延迟是无法避免的。

所以使用`out.flush();`我至少可以显示`firstDisplayStuff`，但是当 taglib 的东西运行时，用户只是坐在那里看半页。只有在完成之后，用户才能看到`endingDisplayStuff`.

我想要`firstDisplayStuff`并`endingDisplayStuff`立即显示。

但我认为使用 jQuery，有一种方法可以`<div id="slowStuff">`留空，然后再加载。

`<div id="slowStuff">`在两个显示内容 div 都显示之后，jQuery 代码会是什么样子？我应该把代码放在哪里？它将如何被调用？

**编辑：**添加`<div id=mainContainer>`到`<div id=floatRightContainer>`现有示例中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T17:48:48.247

在 DOM 上准备一个普通的 Ajax 请求，并用呈现的 HTML 填充 div：

```
$(function() {
  $("#slowStuff").load(theUrl, etc.)
}); 
```

请参阅[`load`文档](http://api.jquery.com/load/)。

向（JSP、动作、控制器等）发出请求，该请求呈现带有自定义标记的 JSP。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T17:50:13.603

为此，您不需要 JavaScript。只需将最后一个 div 放在慢速 div 之前，然后使用 CSS 在屏幕上按照适合您的方式排列 div：

```
<html><body>
<div id="firstDisplayStuff">...</div>
<div id="endingDisplayStuff">...</div>

<% out.flush(); %>
<div id="slowStuff" style="display: none;">
    <mytaglib:abc name='SlowBoat'>...</mytaglib>
</div>
</body></html> 
```

您可以使用几行代码，从 body onload 调用，将慢速 div 放到它所属的位置，然后显示它。 `$('#slowStuff').insertAfter('#someDiv')`把它放在正确的地方，并`$('#slowStuff').show();`让它展示出来。

# c# - 是否可以为匹配多对多的比较器编写哈希码函数？

> ID：10885675
> 
> 赞同：7
> 
> 时间：2012-06-04T17:45:01.270
> 
> 标签：c#, iequalitycomparer

我可以为以下比较器逻辑编写哈希码函数吗？

如果 (A, B, C) 中的至少两个属性匹配，则 的两个实例`My`相等。

Equals 部分很简单，但我对哈希码部分感到困惑，我的一部分人认为这可能是不可能的。

```
class MyOtherComparer : IEqualityComparer<My>
{
    public bool Equals(My x, My y)
    {
        if (Object.ReferenceEquals(x, y)) 
            return true;      

        if (Object.ReferenceEquals(x, null) || Object.ReferenceEquals(y, null)) 
            return false;

        int matches = 0;

        if(x.A == y.A) matches++;

        if(x.B == y.B) matches++;

        if(x.C == y.C) matches++;

        // match on two out of three
        return  (matches > 1)
    }

    // If Equals() returns true for a pair of objects 
    // then GetHashCode() must return the same value for these objects.
    public int GetHashCode(My x)
    {
       // ???
    }
} 
```

**更新**：除了 Reed Copsey 的正确答案之外，Ethan Brown 清楚地说明了关于模糊比较器的一般有用性的一个非常重要的观点 - 请参阅他的答案以及全面了解这个问题/答案的基础。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T17:52:34.137

是的，这是可能的。最简单的实现是始终返回一个常量。

```
public int GetHashCode(My x) 
{ 
   return 0;
} 
```

[GetHashCode](http://msdn.microsoft.com/en-us/library/ms132155.aspx)文档指出：

> 实现需要确保如果 Equals 方法为两个对象 x 和 y 返回 true，则 GetHashCode 方法为 x 返回的值必须等于为 y 返回的值。

但是，您也可以完全自由地为两个不相等的对象返回相同的哈希码。

话虽如此，这可能会导致某些算法的性能非常差，因为您会遇到很多哈希冲突。但是，鉴于您的奇数/唯一相等性检查的性质，这可能是必需的。

* * *

请注意，无论如何这都会有问题。鉴于您的逻辑，可能有三个对象， where`comparer.Equals(foo, bar)==true`和`comparer.Equals(foo, baz)==true`but `comparer.Equals(baz, bar)==false`。这在使用的许多情况下可能会出现问题`IEqualityComparer<T>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:52:07.390

对于两个相等的对象，哈希码必须相同，但对于两个不同的对象，它不必不同。您可以为所有对象返回相同的值以满足`IEqualityComparer`消费者的需求，但我不知道在您的情况下从哈希中获得任何速度优势。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T17:53:33.053

> 我可以为以下比较器逻辑编写哈希码函数吗？

是的。你总是可以为任何东西写一个哈希码。问题是它的效率如何。无论如何，您始终可以拥有：

```
public int GetHashCode()
{
  return 0;
} 
```

它总是*有效*的，但它非常*低效*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T17:56:48.780

假设我们有 2 个对象 A，B。它们中的每一个都有属性 p1、p2 和 p3。假设 A.p1 == B.p1 和 A.p3 == B.p3 ，如果哈希函数依赖于 p2 ，那么 A 和 B 会有所不同，因此它们不相等。如果要根据 p1 和 p3 计算哈希函数，有很多例子哈希函数不会返回正确的哈希值，并且许多相等的对象将不相等。我认为我们不能有一个变量函数。您可以使用一个常量，但如果您想将其用作字典或哈希表中的哈希键，您将不会获得接近 O(1) 的复杂性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T18:17:10.357

获得非常数散列函数的核心问题是您无法确保跨等式的传递性。通常，相等被认为是可传递的。也就是说，A=B 和 B=C 意味着 A=C（这进一步意味着 A、B 和 C 都将具有相同的哈希码）。但是，根据您对相等的定义，您可以有 A=B、B=C 和 A!=C。理想情况下，不相等的元素会有不同的哈希码，所以 A 和 C 会有不同的哈希码；但它们不能，因为它们都等于 B，所以它们都必须具有相同的哈希码。

获得非常量散列函数的唯一方法是，如果您对总集合有所了解。您必须将集合划分为“平等箱”，其中箱中的每个元素都等于箱中的其他元素（包括一个箱的可能性）。一旦你完成了这个分区，你就可以使用它来生成一个非常数算法（假设你得到多个 bin）来生成哈希码。

关于平等箱的想法是可能有很多这样的箱配置。作为选择标准，您可能希望最大化 bin 的数量（以提高哈希表查找性能）。退化的情况（如 Reed Copsey 的正确答案所示）是您将所有内容放在同一个 bin 中（尽管，正如 supercat 在下面的评论中指出的那样，“平等 bin”这个名称会产生误导）。这不会违反哈希值的任何约束，但会导致期望具有产生非退化分区的值的算法性能不佳。

正如下面 supercat 指出的那样，要满足哈希值的约束，必须满足以下条件：如果两个元素在两个不同的 bin 中，则它们一定不相等（但是，同一个 bin 中的两个元素不必相等） .

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-04T18:21:46.160

看到您真正的问题是处理 except 扩展方法，我决定为您提出一些建议，尽管不是真正的答案。

```
public class EqualityComparer<T> : IEqualityComparer<T>
{
    private readonly Func<T, T, bool> _comparer;
    private readonly Func<T, int> _hashCoder;

    public EqualityComparer(Func<T, T, bool> comparer, Func<T, int> hashCoder = null)
    {
        if (comparer == null)
        {
            throw new ArgumentNullException("comparer");
        }

        this._comparer = comparer;
        this._hashCoder = hashCoder ?? (x => 0);
    }

    public bool Equals(T x, T y)
    {
        return this._comparer(x, y);
    }

    public int GetHashCode(T obj)
    {
        return this._hashCoder(obj);
    }
} 
```

然后你可以像这样使用它：

```
arr1.Except(arr2, new EqualityComparer<dynamic>((x, y) =>
     {
         if (ReferenceEquals(x, y))
             return true;

         if (ReferenceEquals(x, null) ||
             ReferenceEquals(y, null))
             return false;

         var matches = 0;

         if (x.A == y.A) matches++;
         if (x.B == y.B) matches++;
         if (x.C == y.C) matches++;

         return (matches > 1);
     })); 
```

# asp.net-mvc-3 - MVC 3 - 模型绑定表中的列表，每条记录是一列而不是行

> ID：10885679
> 
> 赞同：1
> 
> 时间：2012-06-04T17:45:36.497
> 
> 标签：asp.net-mvc-3, model-binding

我可以找到各种关于如何在 MVC 3 中对项目列表进行模型绑定的文章，即使是在表中，但在每个示例中，行都代表列表中的一条记录。我的观点的要求是每条记录必须是一列。我无法从以下文章中获得任何技巧：

[http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/) http://dotnetslackers.com/articles/aspnet/Understanding-ASP- NET-MVC-Model-Binding.aspx#s8-binding-with-a-list-of-class-types

这是我观点的相关部分：

```
 <table>
        <thead>
            <tr>
                <th>Name</th>
@foreach (var fact in Model.Facts)
{
                <th>@fact.Name</th>
}
            </tr>
        </thead>
        <tr>
            <td>Value</td>
@foreach (var fact in Model.Facts)
{
            <td>@Html.TextBox("Value" + fact.FactID.ToString(), fact.Value)</td>
}
        </tr>
        <tr>
            <td>Sample</td>
@foreach (var fact in Model.Facts)
{
            <td>@Html.TextBox("Sample" + fact.FactID.ToString(), fact.Sample)</td>
}
        </tr>
        <tr>
            <td>Default?</td>
@foreach (var fact in Model.Facts)
{
            <td>@Html.RadioButton("Default", fact.FactID, fact.Default)</td>
}
        </tr>
        <tr>
            <td></td>
@foreach (var fact in Model.Facts)
{
            <td>@Html.ActionLink("Detail", "Details", "Fact", new { id = fact.FactID }, null)</td>
}
        </tr>
    </table> 
```

在表单的 post 操作方法中，我接受了一个 FormCollection，我手动从中提取数据。相反，我想接受一个 IList 集合并让 MVC 模型绑定器为我解决所有问题。

这是我的控制器操作：

```
[HttpPost]
[Authorize]
public RedirectToRouteResult Facts(FormCollection form)
{
    int factListId = int.Parse(form["FactListID"]);
    FactList factList = Repository.Find(factListId);
    int defaultId = int.Parse(form["Default"]);
    foreach (Fact fact in factList.Facts)
    {
        string factId = fact.FactID.ToString();
        string toParse = form["Value" + factId];
        fact.Value = toParse.Length == 0 ? null : new Nullable<double>(double.Parse(toParse));
        fact.TextValue = form["Value" + factId];
        toParse = form["Sample" + factId];
        fact.Sample = toParse.Length == 0 ? null : new Nullable<int>(int.Parse(toParse));
        fact.Default = (fact.FactID == defaultId);
    }
    Repository.Save();
    return RedirectToAction("Index");
} 
```

有人能指出我正确的方向吗？我想那里有信息，但我只是在大量信息中找不到关于如何做到这一点的信息，每条记录方式更“标准”1行。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:54:15.750

如果你有一个 IList，那么做这样的事情应该可以。如果您通过数字索引生成输入，那么您可以为 MVC 提供足够的信息以在发布时绑定它们。

```
@for (int i = 0; i< Model.Facts.Count(); i++)
{
      <td>@Html.TextBoxFor(m => m.Facts[i].Value)</td>
}

<--! Do other fields the same way --> 
```

您的控制器发布操作应接受与您的 ViewModel 类型相同的参数。然后您应该看到 Facts IList 已正确绑定。

# python - 修改 Python 中不可变类型的 __new__ 属性

> ID：10885680
> 
> 赞同：-1
> 
> 时间：2012-06-04T17:45:37.293
> 
> 标签：python

我试图修改 Python 中“int”类型的行为。

它说

`'__new__' is readonly.`

有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T17:47:18.367

您不能修改内置类型，但可以从中派生：

```
 class MyInt(int):
     def __new__(cls, *args):
         # whatever 
```

# c - Jiffies - 如何计算经过的秒数？

> ID：10885685
> 
> 赞同：3
> 
> 时间：2012-06-04T17:46:06.800
> 
> 标签：c, performance, time, linux-kernel, kernel

我有一段代码，我想以秒为单位计算时间.. 虽然我得到的是 jiffies 的时间，但我怎样才能以秒为单位转换它？

这是我的内核代码：

```
#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/jiffies.h>
#include <linux/timer.h>
unsigned long js, je, tet;
int netblock_init_module(void){
    js = jiffies;
    printk("\n[Jiffies start Time : %lu]\nModule Started.\n", js);
    return 0;
}

void netblock_cleanup_module(void) {
    je = jiffies;
    printk("\n[Jiffies End Time : %lu]\nModule Removed.\n", je);
    tet = je - js;
    printk("\nEnd Time [%lu] - Start Time [%lu]: \nTotlal elapsed Time [%lu]\n",js,je, tet);

}

module_init(netblock_init_module);
module_exit(netblock_cleanup_module);

MODULE_LICENSE("GPL");
MODULE_DESCRIPTION("JIFFIES EXAMPLE");
MODULE_AUTHOR("RAHEEL"); 
```

我得到的输出是这样的：

> **$insmod jiffexample.ko**
> 
> [Jiffies 开始时间：13363583]
> 
> 模块启动
> 
> **$rmmod jiffexample.ko**
> 
> [Jiffies结束时间：13361588]
> 
> 模块已移除。
> 
> 结束时间 13361588 - 开始时间 1336358
> 
> 总经过时间 [1605]

现在我想以秒为单位获得转换时间..如何以秒为单位转换这个经过的时间 1605？或者你能告诉我一秒钟有多少个jiffies吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T13:59:10.050

对于您的用例，您可以使用：

jiffies_to_msecs 或 jiffies_to_usecs

* * *

以下所有转换例程：

来自 include/linux/jiffies.h

```
...
/*
 * Convert various time units to each other:
 */
extern unsigned int jiffies_to_msecs(const unsigned long j);
extern unsigned int jiffies_to_usecs(const unsigned long j);
extern unsigned long msecs_to_jiffies(const unsigned int m);
extern unsigned long usecs_to_jiffies(const unsigned int u);
extern unsigned long timespec_to_jiffies(const struct timespec *value);
extern void jiffies_to_timespec(const unsigned long jiffies,
                            struct timespec *value);
extern unsigned long timeval_to_jiffies(const struct timeval *value);
extern void jiffies_to_timeval(const unsigned long jiffies,
                           struct timeval *value);
extern clock_t jiffies_to_clock_t(unsigned long x);
extern unsigned long clock_t_to_jiffies(unsigned long x);
extern u64 jiffies_64_to_clock_t(u64 x);
extern u64 nsec_to_clock_t(u64 x);
extern u64 nsecs_to_jiffies64(u64 n);
extern unsigned long nsecs_to_jiffies(u64 n);
... 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-04T17:54:39.863

来自[http://www.kernel.org/doc/man-pages/online/pages/man7/time.7.html](http://www.kernel.org/doc/man-pages/online/pages/man7/time.7.html)：

> jiffy 的大小由内核常数 HZ 的值决定。
> 
> HZ 的值因内核版本和硬件平台而异。在 i386 上情况如下：在 2.4.x 及以下的内核上，HZ 为 100，给出的 jiffy 值为 0.01 秒；从 2.6.0 开始，HZ 提高到 1000，即 0.001 秒。从内核 2.6.13 开始，HZ 值是内核配置参数，可以是 100、250（默认值）或 1000，产生的 jiffies 值分别为 0.01、0.004 或 0.001 秒。从内核 2.6.20 开始，可以使用更多频率：300，这是一个可平均划分常见视频帧速率（PAL，25 HZ；NTSC，30 HZ）的数字。

只需除以 HZ。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:06:23.147

除了除以 之外，还可以使用`HZ`该功能。 它给出了具有秒和微秒的结构。 微秒将始终是 的倍数。`jiffies_to_timeval`

`1000000/HZ`

# selenium - Selenium 函数 selectFrame 在 Xebium 中不起作用

> ID：10885688
> 
> 赞同：0
> 
> 时间：2012-06-04T17:46:15.593
> 
> 标签：selenium, selenium-ide, fitnesse

在 Xebium 测试期间尝试输入输入字段时收到以下错误：

`Element belongs to a different frme than the current one - switch to its containing frame to use it`

所以我尝试使用 selectFrame 命令：

```
| do | selectFrame | on | id=iframe0 | 
```

我收到错误：

```
Unable to locate frame: id=iframe0 
```

我的测试在 Selenium IDE 中运行（有和没有 selectFrame 命令），没有错误。我尝试使用不同的定位器，但 Xebium 没有任何改进。难道我做错了什么？这是Xebium的问题吗？我可以使用什么其他方法来获取正确的帧以输入我的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:22:02.287

我有一个类似的问题，但发现它在使用 Selenium RC 而不是 WebDriver 运行测试时有效。

我认为问题不在于 Xebium 本身。使用 Selenium->WebDriver 兼容模式时，selectFrame() 方法的问题更大。

无论如何，如果您启动自己的 WebDriver-Server 实例（其中包含 Selenium RC）并将 Xebium 测试设置为指向它，则使用 iFrames 应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T13:29:53.580

我有一个类似的问题。

我第一次在我的测试中使用 selectFrame 工作，但是当我需要切换到另一个框架时它失败了。
我已经在 Selenium IDE 中记录了我的测试，并且在 IDE 中播放效果很好，但是使用 Xebium 格式化程序然后从 Xebium 播放相同的测试失败了。

Xebium 格式化程序给了我这个：

```
| do | selectFrame | on | tabs |
| ensure | do | click | on | link=Form |
| do | selectFrame | on | relative=up |
| do | selectFrame | on | menu | 
```

所以框架“选项卡”上的 selectFrame 工作，但“菜单”上的 selectFrame 没有。

如您所见，介于 2 之间的是相对 = 上的 selectFrame。这一行实际上是我的测试在“捕获的输出”页面中出现异常的地方，并且在测试页面本身中似乎跳过了 2 个 selectFrame 命令。

似乎在选择另一个框架之前，webdriver 需要回到默认框架，这就是 relative=up 存在的原因。

然后我将命令更改为：

```
| do | selectFrame | on | relative=top | 
```

一切都像一个魅力。似乎 relative=up 工作不正确，但 relative=top 确实有效（无论如何对我来说）。希望这也适合你。

# cakephp - cakePHP 不更新记录

> ID：10885689
> 
> 赞同：0
> 
> 时间：2012-06-04T17:46:19.763
> 
> 标签：cakephp, model, controller

我正在尝试让 cakePHP 更新数据库中的记录，以创建新记录。我的脚本使用“FIRST”进行检查，如果它不返回 false，它应该创建一个新记录，否则它应该根据我指定的 ID 更新现有记录。我在下面故意添加了 $this->Asset->id = 62; 尝试强制更新，但它不起作用。有什么帮助吗？（另外，如果你能理解它应该做什么，请随时用可能更好的代码来指导我:) 蛋糕很新：

```
 public function index() {

        if($this->request->is("post")) {
            $aid = $this->request->data['Asset']['asset_identifier'];
            $type = $this->request->data['Asset']['asset_type_id'];
            $asset = $this->Asset->find("first",array("fields" => array("Asset.id", "Asset.user_id", "Asset.status_id", "Asset.financial_id", "Asset.insurance_id"),"conditions" => array("Asset.asset_identifier" => $aid, "Asset.asset_type_id" => $type)));
            if($asset != false) {
                $uid = $this->Auth->user("id");
                // UPDATE, depends on info:
                $this->Asset->id = $asset['Asset']['id'];
                foreach(array("financial_id", "insurance_id", "user_id") as $value) {
                    if($asset['Asset'][$value] != 0) {
                        $emails[] = $asset['Asset'][$value];
                    }
                }
                if(isset($emails) && count($emails)) {
                    $this->request->data['Asset']['status_id'] = 1;
                    $email = new CakeEmail();
                    $email->from(array('noreply@assetchase.co.za' => 'Assetchase.co.za'));
                    $email->subject('Assetchase.co.za result notification.');
                    foreach($emails as $value) {
                        $user = $this->User->find("first",array("fields" => array("username"),"conditions" => array("id" => $value)));
                        $email->to($user['User']['username']);
                        $email->send('A new notification, booyah!');
                        // Send an email with the username.
                    }
                }
                if($this->Auth->user("user_type_id") == 2) {
                    $this->request->data['Asset']['user_id'] = $uid;
                } elseif($this->Auth->user("user_type_id") == 3) {
                    $this->request->data['Asset']['financial_id'] = $uid;
                } elseif($this->Auth->user("user_type_id") == 4) {
                    $this->request->data['Asset']['insurance_id'] = $uid;
                }
            }
            $this->Asset->id = 62;
            if($this->Asset->saveAll($this->request->data)) {
                $this->Session->setFlash("A new asset has been loaded",'success');
                $this->redirect(array("controller" => "asset", "action" => "thankyou", "guest"));
            } else {
                $this->Session->setFlash('An error has occured.','default',array('class'=>'error'));
            }
        }
        $assetTypes = $this->Asset->AssetType->find('list');
        $this->set("assetTypes", $assetTypes);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:11:26.483

当您打电话时，`$this->Asset->saveAll($this->request->data)`您是在告诉 Cake 获取 POST 数据并尝试保存它。它根本不会查看`$this->Asset`您将 ID 设置为 62 的位置。您可以通过检查`var_dump($this->request->data)`. 尝试类似的东西`$this->request->data['Asset']['id'] = 62`。

# javascript - setTimeout() 无延迟触发

> ID：10885697
> 
> 赞同：3
> 
> 时间：2012-06-04T17:47:14.280
> 
> 标签：javascript, jquery, ext.net

我有以下代码

```
 Ext.onReady(function () {
            setTimeout(everything(), 30000);
        }); 
```

我正在尝试等待 EXT.NET 在将任何 javascript 应用于元素之前完全完成页面编译。这在大多数浏览器中都不是问题，因为 $(document).load 提供了足够的延迟。当然，可怕的 Internet Explorer 会过早触发 .load，这意味着我必须进行硬编码延迟。但是，上面的代码并没有延迟一切（）的执行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-04T17:48:14.317

`()`从_`everything`

```
setTimeout(everything, 30000); 
```

通过包含`()`，您是在告诉浏览器立即执行`everything`并将其返回值作为回调函数发送到`setTimeout`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T17:48:26.787

改变

```
setTimeout(everything(), 30000); 
```

到

```
setTimeout("everything()", 30000); 
```

或者

```
setTimeout(everything, 30000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T17:55:24.917

正如其他人发布的那样，您应该改写：

```
Ext.onReady(function() {
  setTimeout(everything, 30000);
}); 
```

他们没有发布的是解释。在上面的代码片段中，是对调用该方法`everything`的范围内的函数的引用。`Ext.onReady()`在您的问题中，您正在使用`setTimeout()`执行`everything()`函数的结果。您的`everything()`函数可能会返回`undefined`，因此您的`setTimeout()`调用永远不会执行任何操作。

有人建议使用`setTimeout("everything()", 30000)`. 这[实际上与](https://stackoverflow.com/a/3445884/7979)使用`eval()`. 因此，这不是推荐的方法。

# javascript - 验证电子邮件地址

> ID：10885702
> 
> 赞同：0
> 
> 时间：2012-06-04T17:47:35.153
> 
> 标签：javascript

我正在尝试使用 javascript 验证电子邮件地址。问题是 if 语句没有正确执行。如果我删除“else 语句”，代码会正确运行，并且页面不会加载错误。如果我包含“else 语句”，则 else 语句永远不会执行，并且状态栏显示页面加载时出现错误。我想知道是否有人能找到我无法理解的任何错误？

```
<h4>Example 4:</h4>
<div style="border:3px dashed #aaa; width:200px;">
    <div id="text">e-mail: <input id="email" onblur="verifyEmail()"/></div>
    <div id="verification" > </div>
</div>

<script type="text/javascript">
function verifyEmail(){
    var email = document.getElementById("email").value;
    var atPos=0;
     var dotPos=0;

    atPos = email.indexOf("@");
    dotPos = email.lastIndexOf(".");

    if(atPos<=3 || dotPos<atPos+2 || dotPos+2>=email.length){
        document.getElementById("verification").innerHTML = "Invalid E-mail Address";
    }else{
        document.getElementById("verification").innerHTML = "Valid";
    }

}

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:54:36.640

```
<script language="javascript">
function checkEmail() {
var email = document.getElementById('emailaddress');
var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
if (!filter.test(email.value)) {
alert('Please provide a valid email address');
email.focus;
return false;
}
}
</script> 
```

阅读更多： http: [//www.marketingtechblog.com/javascript-regex-emailaddress/#ixzz1wqetPJQQ](http://www.marketingtechblog.com/javascript-regex-emailaddress/#ixzz1wqetPJQQ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:54:50.547

试试这个

```
function validateEmail(email) { 
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\
".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA
-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
} 
```

**演示**：[这是演示](http://jsbin.com/ozeyag/19)

或者更简单的方法是

```
function validateEmail(email) 
{
    var re = /\S+@\S+\.\S+/;
    return re.test(email);
} 
```

如果您使用的是 HTML5，`<input type="email"...`请注意。如果输入在带有提交按钮的表单标签中并且不由 JS 处理，则此方法有效

```
<input type="email" placeholder="me@example.com"> 
```

# android - 每个项目具有不同视图的微调器

> ID：10885703
> 
> 赞同：4
> 
> 时间：2012-06-04T17:47:36.003
> 
> 标签：android, spinner

我尝试制作一个 Spinner，其中下拉视图中的第一项没有单选按钮。我重写了 arrayadapter 的视图类型，以确保微调器中有两个不同的视图，并且视图不会被错误的项目回收。然后我覆盖 arrayadapter 的 getDropDownView 以从第一项中删除单选按钮。这是有效的，但所选项目不显示单选按钮。我想我不必 setCheckMarkDrawable(android.R.drawable.btn_radio)，因为它应该始终存在，但事实并非如此。有任何想法吗？谢谢！

```
 @Override
        public int getViewTypeCount()
        {
            return 2;
        }

        @Override
        public int getItemViewType(int position)
        {
            if (position == 0)
                return 0;
            else
                return 1;
        }

        @Override
        public View getDropDownView(int position, View convertView, android.view.ViewGroup parent)
        {
            if (position == 0)
            {
                View vw = super.getDropDownView(position, convertView, parent);
                CheckedTextView tv = (CheckedTextView) vw;
                if (tv != null)
                {
                    tv.setCheckMarkDrawable(null);
                    tv.setTextColor(Color.GRAY);
                    return tv;
                }
                return vw;
            } else
            { 
                View vw = super.getDropDownView(position, convertView, parent);
                CheckedTextView tv = (CheckedTextView) vw;
                if (tv != null)
                {
                    tv.setCheckMarkDrawable(android.R.drawable.btn_radio);
                    tv.setTextColor(Color.BLACK);
                    return tv;
                }
                return vw;
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:56:59.120

我也有同样的问题。是的，正如**pzagor2**所说 - Spinner 不支持下拉列表（getDropDownView）的多布局回收。它只是不调用 getViewTypeCount 和 getItemViewType。这是一个问题 - [#17128](http://code.google.com/p/android/issues/detail?id=17128)。

但它仍然为 getView 调用这些方法，用于显示当前微调器项目并检测微调器宽度。

**解决方法：**您可以检查提供的 convertView 是否具有正确的类型，如果不正确则不要使用它。在某些情况下它会有所帮助，例如，当您有两种类型并且一种类型的使用频率低于另一种类型时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:49:52.980

我认为将 ArrayAdapter 与 Spinner 一起使用时不会调用 getItemViewType 和 getViewTypeCount。一种解决方案是不回收 convertView 并假设它始终为空。但是你会在 LogCat 中得到一个滞后的微调器和大量的 GC 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-06T18:30:41.347

由于视图回收不适用于 Spinner，如果您有多个视图，请不要使用 Spinner。而是使用样式为 Spinner 的 TextView，并在 onClick 中打开显示下拉列表的自定义对话框。

```
<TextView android:id="@+id/labels_spinner"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      style="@style/Base.Widget.AppCompat.Spinner.Underlined"/>

@OnClick(R.id.labels_spinner)
public void onSpinnerClick(View view) {
    // Open dropdown dialog
} 
```

# postgresql - 我可以在 Heroku 上的 5 MB PostgreSQL 中存储多少条记录？

> ID：10885706
> 
> 赞同：14
> 
> 时间：2012-06-04T17:47:42.980
> 
> 标签：postgresql, database-design, heroku, storage

我要将记录存储在具有 2 个字段的单个表中：

*   id -> 4 个字符

*   密码哈希 -> 64 个字符

我可以在 Heroku 上的 5mb PostgreSQL 中存储多少条类似的记录？

PS：给定一个包含 x 列和长度为 y 的表 - 我如何计算它将在数据库中占用的空间？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-04T18:11:46.693

### 占用的磁盘空间

计算磁盘空间并非易事。您必须考虑：

*   **每张桌子**的开销。小，基本上是系统目录中的条目。

*   每行( ) 和每个数据页 ( )的**开销**。[手册中有关页面布局的](https://www.postgresql.org/docs/current/storage-page-layout.html)详细信息。`HeapTupleHeader``PageHeaderData`

*   [**列对齐**](https://stackoverflow.com/a/7431468/939860)的空间丢失，具体取决于数据类型。

*   空位[**图**](https://stackoverflow.com/a/7383198/939860)的空间。对 8 列或更少的表格有效免费，与您的情况无关。

*   **`UPDATE`/之后的**死行**`DELETE`。（直到空间最终被吸尘并重新使用。）**

***   **索引**的大小。你会有一个主键，对吧？索引大小类似于只有索引列且每行开销较小的表。

    *   数据的实际空间需求，取决于各自的**数据类型**。[手册中字符类型（包括固定长度类型）的详细信息](https://www.postgresql.org/docs/current/datatype-character.html)：

    > 短字符串（最多 126 个字节）的存储要求是 1 个字节加上实际字符串，其中包括`character`. 较长的字符串有 4 个字节的开销，而不是 1 个

    系统目录中所有类型的更多详细信息[`pg_type`](https://www.postgresql.org/docs/current/catalog-pg-type.html)。

    *   特别是字符类型的数据库**编码**。UTF-8 最多使用四个字节来存储一个字符（但 7 位 ASCII 字符始终只占用一个字节，即使在 UTF-8 中也是如此。）

    *   其他可能会影响您的情况的小事情，例如[**TOAST**](https://www.postgresql.org/docs/current/storage-toast.html) - 不应该影响您使用 64 个字符的字符串。** 

 **### 用测试用例计算

找到估计值的一种简单方法是创建一个测试表，用虚拟数据填充它并使用[数据库对象大小函数](https://www.postgresql.org/docs/current/functions-admin.html#FUNCTIONS-ADMIN-DBSIZE)进行测量：

```
SELECT pg_size_pretty(pg_relation_size('tbl')); 
```

包括索引：

```
SELECT pg_size_pretty(pg_total_relation_size('tbl')); 
```

看：

*   [测量 PostgreSQL 表行的大小](https://dba.stackexchange.com/a/23933/3684)

快速测试显示以下结果：

```
CREATE TABLE test(a text, b text);
INSERT INTO test -- quick fake of matching rows
SELECT chr((g/1000 +32)) || to_char(g%1000, 'FM000')
     , repeat (chr(g%120 + 32), 64)
FROM   generate_series(1,50000) g;

SELECT pg_size_pretty(pg_relation_size('test'));       -- 5640 kB
SELECT pg_size_pretty(pg_total_relation_size('test')); -- 5648 kB 
```

添加主键后：

```
ALTER TABLE test ADD CONSTRAINT test_pkey PRIMARY KEY(a);

SELECT pg_size_pretty(pg_total_relation_size('test')); -- 6760 kB 
```

所以，我预计最多大约**44k**行没有主键，大约**36k**行有主键。**

# ruby-on-rails - 动态选择上下文

> ID：10885707
> 
> 赞同：0
> 
> 时间：2012-06-04T17:48:06.237
> 
> 标签：ruby-on-rails, ruby, acts-as-taggable-on

在我的模型中，我有类似的上下文

```
acts_as_taggable_on :sport, :music 
```

在控制台中我可以做到这一点

```
@student = Student.first
@student.sport_list = ("baseball, soccer")
@student.save

@student.music_list = ("rock, pop")
@student.save

@student.sport_list  
[baseball, soccer]

@student.music_list
[rock, pop] 
```

所有这些都可以正常工作，但是，在我想要动态执行此操作的视图中，我在一个字符串中捕获了 JavaScript 在其他上下文之间选择的上下文，例如：

```
mycontext = music 
```

我的疑问是：它可能使动态做

```
@student.mycontext_list = "rock, pop" 
```

因为我收到以下错误 undefined method `mycontext_list=' for Student:0xb4475d4c

问候朋友！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:52:11.353

试试下面的方法：

```
 @student.send :"#{mycontext}_list=", "rock, pop" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:19:18.893

它已经在那里给出了[mbleigh/acts-as-taggable-on](https://github.com/mbleigh/acts-as-taggable-on)

```
@student.set_tag_list_on(mycontext, "rock, pop") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T18:00:32.307

最简单的解决方案是定义一个接受字符串/符号作为输入的方法

```
class Student
  def mycontext_list(string)
    self.send("#{string}_list".to_sym)
  end
end 
```

Javascript 传递的任何字符串都将用于调用适当命名的方法（在其末尾附加 _list）。

# python - 编写一个递归遍历页面链接的python脚本

> ID：10885708
> 
> 赞同：4
> 
> 时间：2012-06-04T17:48:07.177
> 
> 标签：python

我正在为我的学校做一个项目，我想在其中比较诈骗邮件。我找到了这个网站：[http](http://www.419scam.org/emails/) ://www.419scam.org/emails/ 现在我想做的是将每个骗局保存在单独的文件中，然后我可以分析它们。到目前为止，这是我的代码：

```
import BeautifulSoup, urllib2

address='http://www.419scam.org/emails/'
html = urllib2.urlopen(address).read()
f = open('test.txt', 'wb')
f.write(html)
f.close() 
```

这以文本格式保存了整个 html 文件，现在我想剥离文件并将 html 链接的内容保存到骗局：

```
<a href="2011-12/01/index.htm">01</a> 
<a href="2011-12/02/index.htm">02</a> 
<a href="2011-12/03/index.htm">03</a> 
```

等等

如果我明白了，我仍然需要更进一步并打开保存另一个href。知道如何在一个 python 代码中做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T18:40:23.143

您在 BeautifulSoup 中选择了正确的工具。从技术上讲，您可以在一个脚本中完成所有操作，但您可能需要对其进行分段，因为看起来您将处理数以万计的电子邮件，所有这些都是单独的请求 - 这将需要尽管。

[这个页面](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)会给你很多帮助，但这里只是一个小代码片段来帮助你入门。这将获取作为电子邮件索引页面的所有 html 标记，提取它们的 href 链接并在 url 的前面附加一点，以便可以直接访问它们。

```
from bs4 import BeautifulSoup
import re
import urllib2
soup = BeautifulSoup(urllib2.urlopen("http://www.419scam.org/emails/"))
tags = soup.find_all(href=re.compile("20......../index\.htm")
links = []
for t in tags:
    links.append("http://www.419scam.org/emails/" + t['href']) 
```

're' 是 Python 的正则表达式模块。在第五行中，我告诉 BeautifulSoup 在汤中查找其 href 属性与该正则表达式匹配的所有标签。我选择这个正则表达式来只获取电子邮件索引页面，而不是该页面上的所有 href 链接。我注意到索引页面链接的所有 URL 都有这种模式。

拥有所有正确的“a”标签，然后我遍历它们，通过执行 t['href'] 从 href 属性中提取字符串，并将 URL 的其余部分附加到字符串的前面，以获取原始字符串 URL。

通读该文档，您应该了解如何扩展这些技术以获取单个电子邮件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T18:35:56.707

您还可以在[requests](http://docs.python-requests.org/en/latest/index.html)和[lxml.html](http://lxml.de/lxmlhtml.html)中找到价值。Requests 是另一种发出 http 请求的方法，而 lxml 是解析 xml 和 html 内容的替代方法。

有很多方法可以搜索 html 文档，但您可能希望从[cssselect](http://lxml.de/cssselect.html)开始。

```
import requests
from lxml.html import fromstring

url = 'http://www.419scam.org/emails/'
doc = fromstring(requests.get(url).content)

atags = doc.cssselect('a')

# using .get('href', '') syntax because not all a tags will have an href
hrefs = (a.attrib.get('href', '') for a in atags) 
```

或者按照评论中的建议使用`.iterlinks()`. 请注意，如果您只想要“a”标签，您仍然需要过滤。无论哪种方式， .make_links_absolute() 调用都可能会有所帮助。不过，这是你的作业，所以玩弄它。

```
doc.make_links_absolute(base_url=url)

hrefs = (l[2] for l in doc.iterlinks() if l[0].tag == 'a') 
```

接下来为您...如何循环并打开所有单独的垃圾邮件链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T18:08:56.457

要获取页面上的所有链接，您可以使用 BeautifulSoup。看看[这个页面](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)，它可以提供帮助。它实际上告诉了如何做你所需要的。

要保存所有页面，您可以执行与在当前代码中所做的相同的操作，但在循环中迭代您将提取并存储在列表中的所有链接。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-04T18:45:17.887

您可以使用[HTML 解析器](http://docs.python.org/library/htmlparser.html)并指定要搜索的对象的类型。

```
from HTMLParser import HTMLParser
import urllib2

class MyHTMLParser(HTMLParser):
    def handle_starttag(self, tag, attrs):
        if tag == 'a':
            for attr in attrs:
                if attr[0] == 'href':
                    print attr[1]

address='http://www.419scam.org/emails/'
html = urllib2.urlopen(address).read()
f = open('test.txt', 'wb')
f.write(html)
f.close()

parser = MyHTMLParser()
parser.feed(html) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-04T18:48:10.887

这是使用`lxml`+`XPath`和的解决方案`urllib2`：

```
#!/usr/bin/env python2 -u
# -*- coding: utf8 -*-

import cookielib, urllib2
from lxml import etree

cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
page = opener.open("http://www.419scam.org/emails/")
page.addheaders = [('User-agent', 'Mozilla/5.0')]
reddit = etree.HTML(page.read())

# XPath expression : we get all links under body/p[2] containing *.htm
for node in reddit.xpath('/html/body/p[2]/a[contains(@href,".htm")]'):
    for i in node.items():
        url  = 'http://www.419scam.org/emails/' + i[1]
        page = opener.open(url)
        page.addheaders = [('User-agent', 'Mozilla/5.0')]

        lst = url.split('/')
        try:
            if lst[6]: # else it's a "month" link
                filename = '/tmp/' + url.split('/')[4] + '-' + url.split('/')[5]
                f = open(filename, 'w')
                f.write(page.read())
                f.close()
        except:
            pass

# vim:ts=4:sw=4 
```

# php - 并发多用户访问php+mysql

> ID：10885711
> 
> 赞同：3
> 
> 时间：2012-06-04T17:48:20.480
> 
> 标签：php, mysql, innodb

我打算用php+mysql开发股票维护系统。它将在服务器机器上运行，因此许多用户可以更新库存数据。（进出）

我目前正在研究这个系统。我有以下问题。

```
User A opens record “A”. ex- val=10
User B opens record “A”. ex - val=10
User A saves changes to record “A”. ex - val=10+2=12 (add 3 items, then stock should be 12)
User B saves changes to record “A”. ex - here i need to get record "A" value AS = 12, then B update val=12+3=15\. (then add 3 items final stock will be 15)

In this example, User A’s changes are lost – replaced by User B’s changes. 
```

我知道 mysql Innodb 便于行级锁定。我的问题是，

**是innodb引擎做并发控制；这是否足以（Innodb）避免“丢失更新”问题。或者需要做额外的编码来避免这个问题。**

这是否足够请告诉我 innodb 如何与我之前的示例一起使用。（丢失更新）

（对不起，我的英语不好）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:59:04.913

InnoDB 允许并发访问，因此**用户 A**和**用户 B**肯定可以处理相同的数据。**用户 A**将根据他/她的数据更新该行，然后**用户 B**也可以这样做——最终导致**用户 A**的数据丢失。

如果每次更新都必须保留，您应该考虑另一种选择。例如，如果两个用户都在更新博客文章，您可以创建一个包含所有这些编辑的新表。两个用户的编辑都将被保留，尽管他们检索了文章内容。检索文章时，您可以检查最近一次编辑发生的时间并*取而代之*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:01:25.137

看，有一种叫做“版本控制”的东西。

这个想法很简单：
当用户打开一条记录时，他也会得到版本号。
当他在 sql 级别保存对该记录的更改时，更新是有条件的，这意味着只有当前版本相同时才会进行更新。此更新还将版本增加一。

这样可以确保您不会写入记录的“陈旧”副本。

希望很清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T18:06:50.550

您还可以对服务器进行一些轮询，记录该行的最后一次更新，如果它发生变化，如果用户 B 在 A 之前更新记录，那么您可以通知用户 A 记录已更新并且他的更改不会生效，或者您可以动态更新值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T10:27:44.240

为此，您可以使用两个表。First -带有项目名称、ID 和计数的**StockItems 。**第二 -带有项目 id 和操作量的**StockActivities 。**

要从库存中添加或删除项目，您需要向第二个表**StockActivities**插入记录，其中包含添加/删除的项目 ID 和数量。

```
 item id:1, qnt: +10
    item id:1, qnt: +1
    item id:10, qnt: -2 
```

**StockItems**表的字段**计数**对于用户应该是“只读”的，并且应该基于**StockActivities**表计算。例如，您可以为**StockActivities**表创建**后插入触发器，该触发器将更新添加/删除的库存项目的****计数**字段。

 ******* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-18T21:23:08.353

从留下的评论来看，我认为用我遇到的一些指示来回应是谨慎的，以防有人需要。

如果您只想通过偏移量更新值，则可以非常轻松且原子地执行此操作。假设以下数据：

```
+----+--------+-------+
| id | name   | price |
+----+--------+-------+
| 1  | Foo    | 49    |
| 2  | Bar    | 532   |
| 3  | Foobar | 24    |
+----+--------+-------+ 
```

我们现在可以运行以下查询来将价格加一：

```
select id, price from prices where name like "Foo";
// Later in the application
update prices set price=50 where id=1; 
```

这是执行此操作的非并发/非原子方式，假设两个查询之间没有更改或获取。一种更原子的方式来做到这一点，如下所示。

```
select id, price from prices where name like "Foo";
// Later in the application
update prices set price=price+1 where id=1; 
```

在这里，这个查询允许我们在一个查询中增加价格，消除了其他人在两个查询之间来更新的能力。

此外，还有一些安全更新数据的方法，其中更新的本质不是简单的加法或减法。假设在这里，我们有以下数据：

```
+----+----------+---------------------+
| id | job_name | last_run            |
+----+----------+---------------------+
| 1  | foo_job  | 2016-07-13 00:00:00 |
| 2  | bar_job  | 2016-07-14 00:00:00 |
+----+----------+---------------------+ 
```

在这种情况下，我们有多个不同的客户端，所有客户端都可以做任何工作。然后，我们需要一种方法将工作分派给一个客户，并且只分派给一个客户。

我们可以使用事务，如果记录已更新，我们将出错，或者我们可以使用称为 CAS 或比较和交换的技术。

下面是我们在 MySQL 中如何做到这一点：

```
update jobs set last_run=NOW() where id=1 and last_run='2016-07-13 00:00:00' 
```

然后，在从 mysql 返回的数据中，我们可以知道受影响的行数。如果我们影响了一行，那么我们就成功地更新了它，工作就是我们的了。如果没有更新的行，那么另一台机器已经更新了它，并在那里声明了工作。

这是有效的，因为我们应用程序的任何更新都会导致列发生变化，并且由于列的值是完成更新的条件，它将避免并发更改，从而允许应用程序决定接下来会发生什么。******

# sql - sql计数性能

> ID：10885712
> 
> 赞同：-1
> 
> 时间：2012-06-04T17:48:21.257
> 
> 标签：sql, oracle

> **可能重复：**
> [Count(*) vs Count(1)](https://stackoverflow.com/questions/1221559/count-vs-count1)

如果我有一个表，'id' 是主键，那么这两个命令有不同的性能吗？

```
select count(*) from t;
select count(id) from t; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:51:09.760

不，Oracle 接管并采取最快的方式，以防万一`count(*)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:52:09.590

这些将具有相同的性能。在大多数数据库中，count() 会导致扫描表或可用索引。是否使用索引而不是表仅取决于查询优化器。如果优化器足够聪明地使用索引，那么它在这两种情况下都应该足够聪明。

使用可用的元数据表，您通常可以比使用 count() 查询更有效地获取表中的行数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:59:11.800

我认为如果 id 是主键 count(*) 和 count(id) 在语义上是等效的。

但是对于*读者来说* `count(id)`意味着打算计算 id 不为空的所有行。为避免混淆，我宁愿使用 count(*)。

# c - 初始化我的数组的快速方法

> ID：10885714
> 
> 赞同：7
> 
> 时间：2012-06-04T17:48:24.740
> 
> 标签：c

我有一个 int 数组，我必须用值 -1 初始化这个数组。现在我使用这个循环：

```
int i;
int myArray[10];

for(i = 0; i < 10; i++)
    myArray[i] = -1; 
```

有更快的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T17:48:52.163

我知道值`-1`（或`0`）的最快方法是[memset](http://www.cplusplus.com/reference/clibrary/cstring/memset/)：

```
int v[10];
memset(v, -1, 10 * sizeof(int)); 
```

无论如何，您可以通过这种方式优化循环：

```
int i;
for(i = 10; i--;)
    v[i] = -1; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T19:40:50.137

如果你想在声明的时候用 0 初始化数组，你可以使用： `int a[10] = {0};`，速度非常快。但是，如果您想使用其他值进行初始化，或者想在代码稍后的某个时间点使用 0 重新初始化您的数组，请使用：（ `memset(a, -1, size_a);`或`memset(a, 0, size_a);`分别）或循环。在我看来，总是更喜欢`memset()`循环，因为`memset()`通常优化为将内存中的整个单词设置为其参数给出的初始化值，而不是设置单个字节。

统计一下，在我安装的 32 位 4GB 内存和 2.2GHz*2 处理器的 Linux 上，四种数组初始化代码的运行时间如下：

1）。0.002s

```
#include <string.h>

#define SIZE 1000000

int a[SIZE];

int main(void)
{
    return 0;
} 
```

2）。0.008s

```
#include <string.h>

#define SIZE 1000000

int main(void)
{
    int a[SIZE] = {0};
    return 0;
} 
```

3）。0.003s

```
#include <string.h>

#define SIZE 1000000

int main(void)
{
    int a[SIZE];
    memset(a, -1, SIZE);
    return 0;
} 
```

4）。0.011s

```
#include <string.h>

#define SIZE 1000000

int main(void)
{
    int a[SIZE];
    int i;
    for(i = 0; i < SIZE; i++)
        a[i] = -1;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T17:52:27.390

`memset`非常快。

```
int arr[10];
memset(arr, -1, sizeof(arr)); 
```

但是，无论如何，您所拥有的可能会被优化编译器转换为对 memset 的调用。查看您的程序集输出以确保，但循环在编译时保持循环的可能性很小。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-04T17:55:28.607

在 GNU C 中，您可以做的是：

```
int myArray[10] = {[0 ... 9] = -1}; 
```

初始化一系列元素： http: [//gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html](http://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html)

正如没有人提到的那样，在便携式 C 中：

```
int myArray[10] = {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1}; 
```

# javascript - Javascript - 覆盖新的 Date() 行为以抵消 GMT

> ID：10885719
> 
> 赞同：1
> 
> 时间：2012-06-04T17:48:34.773
> 
> 标签：javascript

我正在开发一个使用 Comet 将数据传输回 Web 客户端的网站。我的应用程序对时间非常敏感，我有一个图表显示每秒添加的点。

由于 Web 应用程序是 Comet 驱动的，因此客户端不需要处理日期，它应该只使用服务器时间戳来显示信息。即图表上的绘图点应在工具提示中显示服务器时间戳，无论用户的时区如何。

我认为我最好的方法是使用 REST 检索服务器的时间戳。然后测量服务器和客户端时间之间的时区偏移，加/减差值并将其用作客户端的时间戳以进行显示。

有没有办法覆盖默认行为`new Date()`以导致我将服务器的时间戳作为本地时间戳？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-25T19:18:16.800

我编写了库[TimeShift.js](https://github.com/plaa/TimeShift-js)，它允许覆盖 Date 构造函数并设置当前时间和时区。我写它是为了测试目的，但它也可以用于其他用途。

请务必检查当前库的警告。它目前仅支持与 GMT 的固定偏移量，因此不支持 DST 更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:30:40.023

只需重新定义它，它应该可以正常工作：

```
if(Date) {
    try{
        Date = null;
        Date = function() {
            console.log("The more things change, the more they stay the same!");
        }
        Date();
    } catch(exeption) {
        console.log("Couldn't override Date object.");
    }
} 
```

# c - 通过返回“本地”堆分配的对象可能导致内存泄漏

> ID：10885720
> 
> 赞同：1
> 
> 时间：2012-06-04T17:48:46.900
> 
> 标签：c, memory-management, memory-leaks

```
int do_memory()
{
  int * empty_ptr = (int *) malloc(sizeof(int));
  *empty_ptr = 5;
  return *empty_ptr;
}
...
int b = do_memory();
free(&b); //obviously not valid 
```

当`b`超出范围时，我假设 empty_ptr 中的内存仍然存在是对的吗？但是不可能释放，因此这是错误的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:51:32.227

“int *empty_ptr”（指向已分配内存块的指针）永远不会被释放，您只需从 do_memory 获取返回值。

如果您不想泄漏，请使用此

```
int* do_memory()
{
  int * empty_ptr = (int *) malloc(sizeof(int));
  *empty_ptr = 5;
   return empty_ptr;
}
...
int* b = do_memory();
int b_local = *b;
free(b); // valid 
```

或者这个（没有泄漏，除了堆栈上的 var 没有分配，没有性能损失）：

```
void do_memory(int* RetValue)
{
  *RetValue = 5;
}
...
/// b is allocated locally on stack
int b;
do_memory(&b);
// no free() calls are needed 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T17:51:39.770

函数签名错误，更新为：

```
int* do_memory()
{
  // code
}

...

int* b = do_memory();

// At this point, freeing b is valid and will 
// release the resources previously allocated in do_memory()
free(b); // valid 
```

但是，如果您不这样做`free(b)`并且函数完成，它将破坏变量`b`而不释放先前分配的内存块。这将导致内存泄漏，因为您不再有对该内存块的引用来取消分配：糟糕，糟糕的代码！

# iphone - iOS 无法在设备旋转时自动调整子视图大小

> ID：10885724
> 
> 赞同：4
> 
> 时间：2012-06-04T17:48:53.460
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我尝试了在其他帖子中找到的几种解决方案，但在设备旋转时仍然无法自动调整子视图大小。我的布局 (IB) 具有三个视图，并且仅将调整大小应用于当前视图。如果然后，在旋转设备后，视图被显示，没有调整大小并保持在以前的尺寸。我设置了自动调整子视图及其掩码......我做错了什么或错过了什么？任何帮助将不胜感激，谢谢！

```
- (void)viewDidLoad
{

    [super viewDidLoad];

    [self.view setAutoresizesSubviews:YES];
    [self.view setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight];
    [vistaSocial setAutoresizesSubviews:YES];
    [vistaSocial setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight];
    [vistaB setAutoresizesSubviews:YES];
    [vistaB setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:10:07.490

我认为您没有在 xib 文件上使用正确的大小调整属性。据我了解，您必须在当前控制器上添加了 2-3 个视图；但是自动调整大小在某个地方出错了。一个一个地尝试并使用正确的设置。如果我预测错误，您可以分享任何屏​​幕截图以便更好地理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:18:43.740

您可以在 Nib 文件的帮助下设置 Autoresize 属性。从NIB文件正确设置后，您可以检查一下吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T18:08:45.757

对于要在设备旋转时调整其大小的给定视图，它的父视图需要将其`autoresizesSubviews`属性设置为`YES`. （从您的代码片段中不清楚您的视图层次结构是什么。）尝试更改

```
[vistaB setAutoresizesSubviews:YES]; 
```

到

```
[vistaB.superview setAutoresizesSubviews:YES]; 
```

# css - 如何在 Twitter Bootstrap 中做一个简单的内部容器？

> ID：10885728
> 
> 赞同：1
> 
> 时间：2012-06-04T17:49:05.177
> 
> 标签：css, twitter-bootstrap

这是我想要完成的图像：http: [//i.imgur.com/XKPuV.png](http://i.imgur.com/XKPuV.png)

我想要一个带边框的外部容器和一个灰色背景的内部容器。内部容器中有两个块：左边的文本，右边的图像（两边的元素都不重要——它们可以是任何东西）。很基本的东西。

使用下面的代码，我的两个 div 跨越 6 列分开（这是它的样子：http: [//i.imgur.com/BEIVl.png](http://i.imgur.com/BEIVl.png)）。解决此问题的最佳方法是什么？

```
<div class="container" style="border: 1px solid gray;height:490px;margin-top:20px;">
<div id="inner-container" style="background:gray;margin:5px;">
    <div class="row">
        <div class="span6">
            <p style="margin:5px;">
                Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.
            </p>
        </div>
        <div class="span6">
            <p style="margin:5px;">
                Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.
            </p>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:53:52.337

问题是您不能使用 spanX 类指定内联边距和填充，因为它们会覆盖 boostrap 自己的填充/边距设置（这就是为什么第二个 div 位于下一行。我建议您创建您需要的内容而不使用内部 div 的 spanX 定义。参见小提琴：http: [//jsfiddle.net/periklis/KGMEF/1/](http://jsfiddle.net/periklis/KGMEF/1/)

# c# - 这段代码用 RegEx 做什么

> ID：10885729
> 
> 赞同：0
> 
> 时间：2012-06-04T17:49:05.800
> 
> 标签：c#, regex

一直在研究一个示例源代码，这部分我看不懂，这段代码是做什么的？主要是RegEx部分......

在使用的参数中，“code”是一个字符串，是我们传入的C#源代码。

```
 Match m = null;
  if ((m = Regex.Match(code, "(?ims)^[/']{2}REFDLL (?<ref>.+?)$")).Success)
  {
    foreach (string refDll in m.Groups["ref"].Value.Split(new char[] { ';', ',' }))
    {
      //2008-06-18 by Jeffrey, remove redundant \r
      string mdfyRefDll = refDll.Replace("\r", "").Replace("\n", "");
      //trim the ending .dll if exists
      if (mdfyRefDll.ToLower().EndsWith(".dll"))
          mdfyRefDll = mdfyRefDll.Substring(0, mdfyRefDll.Length - 4);
      string lcRefDll = mdfyRefDll.ToLower();
      if (lcRefDll == "system.data.linq" || lcRefDll == "system"
          || lcRefDll == "system.xml.linq" || lcRefDll == "system.core")
        continue;
      cp.ReferencedAssemblies.Add(mdfyRefDll + ".dll");
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:39:42.553

我认为这张图片解决了您发布的代码中发生的情况：

![引用DLL](../Images/37e09d0ba34133afb07cf5da51c16e8c.png)

Mini C# Lab的项目描述如下：

> 一个方便的工具，用于简单的短 C# 代码运行和测试，您可以节省等待 Visual Studio 启动的时间，避免创建大量一次性项目文件。

似乎该项目缺少文档，因此很难推断为什么代码的作者在已经有[using 指令](http://msdn.microsoft.com/en-us/library/sf0df423%28v=vs.100%29.aspx)的情况下选择这种特殊方式来添加引用的 DLL。也许他这样做是为了避免与[using 语句](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.100%29.aspx)发生冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:05:50.187

首先，`(?ims)`是指定选项。 `i`触发不区分大小写，`m`指定多行模式，并且`s`(IIRC) 启用 dot-all 选项，这意味着通配符`.`包含换行符。

然后，`^`断言，“字符串必须*从*这里开始，没有前面的字符......”而`$`在结尾断言，“字符串必须在这里*结束*，没有后面的字符。”

`[/']{2}`完全匹配斜杠或单引号字符中的两个，即`//`, `''`,`/'`和`'/`.

`REFDLL` 与您所看到的完全匹配。

匹配所有剩余的`(?<ref>.+?)`字符（最后的问号是不必要的），记住，由于`s`选项，这包括换行符。此部分存储在名为 的匹配项中`ref`。

总之，它试图匹配类似的东西

```
//REFDLL helloworld foobar 
```

并将“helloworld foobar”存储在`ref`.

# c++ - 在 C++ 中编写复制构造函数时出错

> ID：10885737
> 
> 赞同：2
> 
> 时间：2012-06-04T17:49:34.590
> 
> 标签：c++

我正在尝试为一个类编写一个复制构造函数，但我收到了这两条错误消息，我无法破译。有人可以告诉我我做错了什么吗？

```
class Critter
    {

    public:
        Critter(){}
        explicit Critter(int hungerLevelParam):hungerLevel(hungerLevelParam){}
        int GetHungerLevel(){return hungerLevel;}

        // Copy Constructors
        explicit Critter(const Critter& rhs);
        const Critter& operator=(const Critter& rhs);

    private:
        int hungerLevel;
    };

Critter::Critter(const Critter& rhs)
    {
    *this = rhs;
    }

const Critter& Critter::operator=(const Critter& rhs)
    {
    if(this != &rhs)
        {
        this->hungerLevel = rhs.GetHungerLevel(); // ERROR: object has type qualifier not compatible with member function
        }
    return *this;
    }

int _tmain(int argc, _TCHAR* argv[])
    {
    Critter aCritter2(10);
    Critter aCritter3 = aCritter2; // ERROR : No suitable copy constructor
    Critter aCritter4(aCritter3);
    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:51:56.587

你需要`int GetHungerLevel() const {return hungerLevel;}`

否则，您不能`GetHungerLevel()`使用 reference-to-const进行调用`rhs`。

此外，您不能使用`explicit`复制构造函数进行复制初始化，只能直接初始化：`Critter aCritter3(aCritter2);`

可能您想使复制 ctor 不显式，而不是必须更改 的定义`aCritter3`，而是您的调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T17:52:07.437

1）你声明了你的复制构造函数`explicit`（你需要它是显式的吗？），所以正确的语法是

```
Critter aCritter3 (aCritter2); 
```

不是

```
Critter aCritter3 = aCritter2; 
```

2）此外，赋值运算符的正确签名是：

```
Critter& operator=(const Critter& rhs); 
```

3）方法`GetHungerLevel`应该是`const`，但你*不需要*使用它 - 你可以写：

```
this->hungerLevel = rhs.hungerLevel; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T17:52:03.473

将 const 限定符添加到 GetHungerLevel()

```
 int GetHungerLevel() const {return hungerLevel;} 
```

# php - PHP Popup Page 显示数据库中记录的内容

> ID：10885739
> 
> 赞同：-1
> 
> 时间：2012-06-04T17:49:36.150
> 
> 标签：php

我在 PHP 页面上有链接，其中列出了数据库中的所有记录。

链接如下所示：

`<a href="http://domain.com?id=1">View Records</a>`<--ID 结尾

我想要做的是单击该链接并选择弹出窗口，显示来自 id 1 的所有字段

当我单击链接时，在弹出窗口中显示 id=1 的所有字段的最简单方法是什么？

例如：我有一个这样的表：

```
id | name | surname
--------------------
1  | Bob  | brown
2  | Ken  | blob 
```

我点击一个看起来像这样的链接：

```
<a href="http://domain.com?id=1">View Records</a> 
```

我需要一个弹出窗口来打开并显示如下内容：

```
ID - 1
Name - Bob
Surname - Brown 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:00:46.840

一种（多种方式）弹出窗口的非常基本的示例：

```
<a href="javascript:void(0)"onclick="window.open('http://domain.com/popup.php?id=1', 'View','width=300,height=200,menubar=yes,status=yes')">View Records</a> 
```

**弹出.php：**

```
<?php
    $con = mysql_connect("localhost","username","password");
    if (!$con) die('Could not connect: ' . mysql_error());

    mysql_select_db("my_database", $con);
    $result = mysql_query("SELECT * FROM MyTable WHERE myID=".$_GET['id']);
    $row = mysql_fetch_array($result);
    echo 'ID - '.$row['id'] . '<br/>';
    echo 'Name - '.$row['name'] . '<br/>';
    echo 'Surname - '.$row['surname'] . '<br/>';
    mysql_close($con);
?> 
```

# garbage-collection - lua 中的弱表 - 有什么实际用途？

> ID：10885741
> 
> 赞同：1
> 
> 时间：2012-06-04T17:49:46.603
> 
> 标签：garbage-collection, lua, weak-references

我明白什么是弱表。
但我想知道弱表实际上可以在哪里使用？

文档说

> 弱表通常用于您希望注释值而不更改它们的情况。

我不明白。这意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:05:58.953

通常，存储对对象的引用将防止该对象在对象超出范围时被回收。弱引用不会阻止垃圾收集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:21:30.650

作为评论的答案发布...

由于 Lua 不知道你认为什么是垃圾，它不会收集任何*不确定*是垃圾的东西。在某些情况下（其中之一可能是调试），您希望为变量指定一个值，而不会导致 Lua 将其视为“非垃圾”。据我了解，弱表允许您执行通常对变量/对象/等所做的操作，但如果它们被弱引用（或在弱表中），它们仍将被 Lua 视为垃圾并在垃圾收集函数被调用。

**示例：**考虑是否要使用关联数组，在两个单独的私有表中具有键/值对。如果您只想将密钥表用于一种特定用途，一旦您完成使用它，它将在 Lua 中锁定存在。但是，如果您要使用弱表，则可以在使用完它后立即将其作为垃圾收集，从而释放它正在使用的资源。

为了解释一个关于注释的神秘句子，当你“改变”一个变量时，你将它锁定为存在并且 Lua 不再认为它是垃圾。“注释”一个变量意味着给它一个名称、数字或其他一些值。所以，这意味着你可以给一个变量一个名字/值，而不用锁定它（这样 Lua 就可以垃圾收集它）。

翻译：

`Weak tables are often used in situations where you wish to give a name to a value without locking the value into existence, which takes up memory.`

# objective-c - 什么时候从 UIView 子类调用 setter 方法

> ID：10885744
> 
> 赞同：1
> 
> 时间：2012-06-04T17:50:01.010
> 
> 标签：objective-c, uiview, stanford-nlp, cs193p

我正在参加关于 iTunesU(193P) 的免费斯坦福课程，我们创建了一个作为 UIView 子类的类，并创建了一个名为 scale 的公共属性。这个想法是，当我们捏合时，视图的比例会相应改变，但我对何时调用属性比例的设置器感到困惑。这是下面的相关代码：

```
@interface FaceView : UIView

@property (nonatomic) CGFloat scale; //anyone who wants do publicly can set my scale

-(void)pinch:(UIPinchGestureRecognizer *)gesture;

@end 
```

```
@synthesize scale = _scale;

#define DEFAULT_SCALE 0.90

-(CGFloat)scale{
    if(!_scale){
        return DEFAULT_SCALE;
    }else {
        return _scale;
    }
}

-(void)setScale:(CGFloat)scale{
    NSLog(@"setting the scale");
    if(scale != _scale){
        _scale = scale;
        [self setNeedsDisplay];
    }
}

-(void)pinch:(UIPinchGestureRecognizer *)gesture{

    if ( (gesture.state == UIGestureRecognizerStateChanged) || (gesture.state == UIGestureRecognizerStateEnded)){

        self.scale *= gesture.scale;
        gesture.scale = 1;
    }
} 
```

当我处于“捏合模式”时，在我捏合时会继续调用 setScale 方法，因为我的 NSLog 语句会打印出来，直到我停止捏合。当没有任何代码以编程方式调用 setScale 方法时，何时或如何继续调用它？也许我在这里错过了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:01:41.657

@cspam，请记住设置手势识别器需要两个步骤：
1）向 UIView 添加手势识别器 - 这让我在讲座中感到困惑，但即使他说向 UIView 添加手势识别器，他的真正意思是添加手势识别器对于 UIView，在 UIViewController 中。这是您在这种情况下必须添加到 UIViewController 子类中的代码（Faceviewcontroller - 您的名称可能不同），这就是在上面的 FaceView 中继续调用您的 pinch 方法的原因：

```
 UIPinchGestureRecognizer *pinchGesture=[[UIPinchGestureRecognizer alloc]initWithTarget:self.faceView action:@selector(pinch)];  
[self.faceView addGestureRecognizer:pinchGesture]; 
```

您可以在 UIView 的 setter 方法中将这段代码添加到 UIViewController（子类）中[换句话说，在 UIViewController 中创建一个 IBOutlet 属性并将其连接到情节提要中的 UIView] 并覆盖 setter 方法以包含上面的代码。

2）第二部分是您的代码中的内容。因此，每次控制器感应到捏合手势时都会调用捏合方法。

希望这可以帮助。

# javascript - Javascript中的JSON对象排序

> ID：10885746
> 
> 赞同：0
> 
> 时间：2012-06-04T17:50:12.110
> 
> 标签：javascript, jquery, json

我有一个 JSON.parse 返回的 JSON 对象 jobj=JSON.parse(jsnstr) 数组，我希望按其名称对其进行排序。我用过

```
jobj=$(jobj).sort(sortfunction);
 function sortfunction(a,b){  
     return a.name.toLowerCase() > b.name.toLowerCase() ? 1 : -1;  
 }; 
```

但这并没有解决，而是我得到了未定义的 obj 任何帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:55:50.767

您不能对哈希进行排序；它必须是一个数组。您可以做的是设置每个 a.name 值对数组的引用，然后使用自定义函数对该数组进行排序，就像您在那里一样。

```
json = JSON.parse(...);
var refs = [];
for(var i in json) {
  var name = i.name;
  refs.push({
    name : name.toLowerCase(),
    object : i
  });
}

var sorted = refs.sort(function(a,b) {
  return a.name > b.name;
}); 
```

现在，您的 refs 数组中的所有内容都已排序，您可以通过 sorted[index].object 单独访问每个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:53:15.017

我想你的意思是写这个：

```
jobj=$(jobj).sort(function(a,b){  
     return a.name.toLowerCase() > b.name.toLowerCase() ? 1 : -1;  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:55:46.420

为此，您不需要 jQuery。此外，`sort`修改原始数组。所以，如果`jobj`是一个数组，你可以这样做：

```
jobj.sort(sortfunction); 
```

您可能还需要考虑`a.name`和`b.name`相同的情况：

```
function sortfunction(a,b){  
    var aSort = a.name.toLowerCase(),
        bSort = b.name.toLowerCase();
    if(aSort === bSort) return 0;
    return aSort > bSort ? 1 : -1;  
} 
```

演示：http: [//jsfiddle.net/xmmPL/](http://jsfiddle.net/xmmPL/)

# c# - 修剪 ASP.NET 超链接变量

> ID：10885750
> 
> 赞同：1
> 
> 时间：2012-06-04T17:50:18.040
> 
> 标签：c#, asp.net, oracle, hyperlink

我有一个关于在 ASP:Hyperlink 语句上应用 RTRIM 的问题。我的代码如下：

```
 <asp:HyperLink runat="server" class="iframe" ID="modelLink" 
NavigateUrl='<%# String.Format("AllAudits.aspx?model={0}&date={1}",
Trim(Eval("MODEL_NUMBER")), Trim(Eval("RECORD_DATE")))%>' 
Text='<%# Eval("MODEL_NUMBER") %>'> </asp:HyperLink> 
```

本质上，我想要它做的是传递 MODEL_NUMBER 和 RECORD_DATE 但我想将 RTRIM 应用于 Eval 语句。我已经到处搜索了，我不确定还有什么可以尝试的。谁能指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:07:13.257

实际上，我使用以下方法使其工作：

```
 NavigateUrl='<%# String.Format("AllAudits.aspx?model={0}&date={1}",
Eval("MODEL_NUMBER").ToString().Trim(), Eval("RECORD_DATE").ToString().Trim())%>'
Text='<%# Eval("MODEL_NUMBER") %>' 
```

没想到我能找到它，但它就在那里！

# javascript - 如何在浏览器选项卡之间共享数据？

> ID：10885751
> 
> 赞同：1
> 
> 时间：2012-06-04T17:50:25.580
> 
> 标签：javascript, dom-events

我必须开发一个程序，我需要从服务器获取事件并想要更新网页。

例如，我为聊天打开了多个浏览器选项卡，每个聊天页面都有自己的线程来从服务器获取事件，但是一旦聊天中的一个线程将获取事件，而不是其他线程获取空的事件堆栈，因为另一个聊天提取页。

所以，我关心的是在不刷新页面的情况下与多个聊天页面共享事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:06:45.050

听起来您可以使用[postMessage](https://developer.mozilla.org/en/DOM/window.postMessage)让获取消息的选项卡与您域中的所有其他页面共享。

```
postMessage(JSON.stringify({chatmsg: someVarFromServer}), "http://www.mydomain.com"); 
```

让其他聊天页面监听`message`事件：

```
window.addEventListener("message", receiveMessage, false);

function receiveMessage(event) {
    // reject foreign messages!
    if (event.origin !== "http://www.mydomain.com") return;

    var message = JSON.parse(event.data).chatmsg;

    // this other page now has the message
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:24:27.030

如果您想开发一个用纯 Javascript 编写的实时聊天应用程序，我强烈推荐[APE](https://github.com/APE-Project/APE_JSF)（编辑：2021 似乎不再维护），这是实现此类目标的可靠起点。
如果您不想使用框架，这里有 2 个跨浏览器解决方案：

*   通过定期发送 AJAX 请求来检查事件
*   使用第三方应用程序接收事件，例如 Flash 的 XML 套接字

# iphone - 使用 CoreData 创建静态库的问题 - 无法使用 nil 模型创建 NSPersistentStoreCoordinator

> ID：10885754
> 
> 赞同：5
> 
> 时间：2012-06-04T17:50:39.823
> 
> 标签：iphone, objective-c, ios, core-data

如何引用我在静态库项目中创建的模型？

这将返回 null 并抛出错误，因为资源位于此静态库中：

```
 //this code is in the static library
    - (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel != nil) {
        return __managedObjectModel;
    }

    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"eCommerceEngine" withExtension:@"mom"];
    __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return __managedObjectModel;
} 
```

如何将其更改为从此静态库中提取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:50:15.693

在 iPhone 上，静态库具有 .a 扩展名，并且只能包含代码。这意味着任何资源（xib、图像等）都必须打包成一个包或与库分开运送。

查看[带有资源的 iOS 库](http://iphone.galloway.me.uk/iphone-sdktutorials/ios-library-with-resources/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T18:50:18.420

如果您想使用库中的预配置模型，我建议使用实体 API 以编程方式构建模型，而根本不使用模型文件。

# r - 仅绘制具有特定权重的边 - igraph

> ID：10885757
> 
> 赞同：5
> 
> 时间：2012-06-04T17:50:57.070
> 
> 标签：r, igraph

我有一个非常大的边缘列表，我只想绘制具有特定权重的边缘，我该怎么做？

到目前为止我已经尝试过

```
plot.graph(E(sgdf)[E(sgdf)$weight==3])) 
```

但我总是收到这个错误

```
Error in V(g) : Not a graph object 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-05T08:36:02.060

首先复制您的图表，删除不需要的边，然后绘制其余部分：

```
> sgdf.copy <- delete.edges(sgdf, which(E(sgdf)$weight != 3)-1)
> plot(sgdf.copy) 
```

之所以`-1`需要，是`delete.edges`因为 igraph 使用从零开始的边缘索引，而 R 使用从 1 开始的索引。

**更新**：正如一位匿名编辑（其编辑被遗憾地拒绝）指出的那样，igraph 从 igraph 0.6 开始使用 1 基边索引。因此，仅当您使用 igraph 0.5.x 或更早版本时，才减 1。

# backbone.js - 主干.js'未定义'获取请求

> ID：10885767
> 
> 赞同：1
> 
> 时间：2012-06-04T17:51:42.417
> 
> 标签：backbone.js, underscore.js

这是我的代码：

```
$(function (){
var Slide = Backbone.Model.extend({
    defaults: {
        castid  :1,
        id      :1
    },
    urlRoot:  function(){
        return 'slidecasts/' + this.get("castid") + '/slides/';
    },
});

var SlideView = Backbone.View.extend({
    el: $("#presentation"),
    events: {
        'click #next': 'next',
        'click #previous': 'previous',
    },
    initialize: function(){
        _.bindAll(this, 'render', 'next');
        this.model.bind('change', this.render);
        this.render();
    },
    render: function(){
        this.model.fetch();
        var variables = { 
            presentation_name: "This is a Slide-Number: ",
            slidenumber: "xxx",
            imageurl:  this.model.url() +"/"+ this.model.get('imageLinks'), 
            slide_content:  this.model.get("content")};
        var template = _.template( $("#slide_template").html(), variables );
        this.$el.html( template );
        return this;
    },
    next: function(){
        console.log(this.model.id);
        this.model.nextslide();
    },
    previous: function(){
        console.log("previous function in view");
    }
});

testslide = new Slide();
var slideView = new SlideView({model: testslide});

}); 
```

这工作正常，但在调试控制台中，我总是看到“slidecasts/1/slides/1/undefined”的 GET 请求，这当然会失败。我真的不明白我在哪里触发了这个获取请求。

**编辑 - 模板代码**

```
<script type="text/template" id="slide_template">
  <label>Presentation <%= presentation_name %>  </label> <br/>
  <img src="<%= imageurl %>" id="slide_pic" /> <br/>
  <textarea id="slide_content">
    <%= slide_content %>
  </textarea>
  <div id="next">next slide </div>
  <div id="previous">previous slide </div>  
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:57:25.527

你有一个异步问题。

这是事件的顺序：

1.  您调用`this.model.fetch()`以填充模型。
2.  你说`variables.imageurl = this.model.url() + '/' + this.model.get('imageLinks')`。
3.  （异步）`fetch`还没有返回，所以`this.model.get('imageLinks')`是`undefined`。
4.  您构建 HTML 并用于`this.$el.html(template)`更新页面。
5.  `imageurl`浏览器使用不正确的**2**呈现您的 HTML 。
6.  由于**5**记录了错误的 GET 请求。
7.  `fetch`from **1**从服务器返回并触发一个`'change'`事件。
8.  该`'change'`事件触发对 的新调用`render`。
9.  此`render`调用已完全填充`this.model`，因此`variables.imageurl`是正确的，并且这次 HTML 正确显示。

如果你让`fetch`触发器`render`那么问题就会消失：

```
initialize: function(){
    _.bindAll(this, 'render', 'next');
    this.model.bind('change', this.render);
    this.model.fetch();
},
render: function() {
    // As before except no this.model.fetch()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:10:09.387

我怎么看不到您正在使用的*模板*我只是在这里猜测：

问题出在这一行：

```
this.model.url() +"/"+ this.model.get('imageLinks'), 
```

您的*模板*正在尝试`<img>`使用此类 URL 定义一个元素，但该`imageLinks`属性*未定义*。

# sql - SQL Azure SPLIT ON UNIQUEIDENTIFIER GUID

> ID：10885768
> 
> 赞同：1
> 
> 时间：2012-06-04T17:51:50.423
> 
> 标签：sql, asp.net-membership, azure-sql-database

假设有一个应用程序生成与几个表中规范化记录数相对应的随机 GUID。这些 GUID 为“tenant_id”的记录需要在 SQL Azure 中拆分为多个联合成员。发出 SPLIT AT 命令时，使用什么排序机制在特定点（tenant_id）拆分成员？它类似于 ORDER BY GUID_FIELD ASC/DESC 结果集吗？由于 GUID 是随机生成的，那么创建具有未来拆分的范围的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T01:42:35.167

本质上，split at 将一个联邦一分为二。它依赖于分发密钥（您在 federated on 子句中传递的密钥）。例如，假设您按年龄联合。最初您有两个联邦：年龄从 0 到 40，年龄从 41 到 80。现在您将第一个联邦分为两部分：0 到 20 和 21 到 40。SQL Azure 将自动组织数据以确保每个联邦满足范围要求。所以是的，这有点像订购。

GUID 通常不使用联合。相反，它用于您拥有更多控制权的某些键。使用 GUID 很好，但您有可能使联合不平衡。一个联邦可能包含大量数据，而另一个只有少量数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T01:49:22.450

GUID 范围根据它们在 SQL Server 中的排序顺序进行拆分 - 与用于 ORDER BY 和索引的顺序相同。有关详细信息，请参阅此博客文章： http: [//sqlblog.com/blogs/alberto_ferrari/archive/2007/08/31/how-are-guids-sorted-by-sql-server.aspx](http://sqlblog.com/blogs/alberto_ferrari/archive/2007/08/31/how-are-guids-sorted-by-sql-server.aspx)

如果要随机生成 GUID 并且需要拆分，则应使用 GUID 的排序定义在要拆分的成员的 GUID 集中间的某个位置选择一个点（假设您要在中间拆分）。

如果您想要更多地控制租户的去向，您可以生成自己的“自定义”GUID，但是您当然会失去 GUID 所具有的全局唯一性属性，除非您确保生成“自定义”GUID 的全局唯一性。

——汉斯·奥拉夫

# java - Spinner 不是这个 SimpleCursorAdapter 可以限制的视图

> ID：10885770
> 
> 赞同：0
> 
> 时间：2012-06-04T17:51:59.387
> 
> 标签：java, android, cursor, spinner

我正在尝试使我的查询适应我的微调器对象，但遇到了一些麻烦，我将错误列为标题。这是它崩溃的代码部分：

```
 Spinner classDropDown = (Spinner) this.findViewById(R.id.classDropDown);
        int[] to = new int[] { R.id.classDropDown };
        String[] classFields = new String[] { "className" };
        SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.main, cursor, classFields, to);
        cursorAdapter.setDropDownViewResource(R.id.classDropDown);
        classDropDown.setAdapter(cursorAdapter); 
```

我有一个问题，光标没有被填充，但现在修复了。有人可以帮我调试这个问题吗？

**编辑：**我认为我的问题是“到”字段。这应该是什么？

**编辑 2：**此外，这里是微调器对象的 XML：

```
<Spinner
        android:id="@+id/classDropDown"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" /> 
```

**编辑 3：**我已经修复了上述内容以反映修复代码。这解决了这个特殊问题。我没有收到错误消息，但微调器中也没有显示任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:15:31.983

To 是您要将数据放入的资源 ID 列表，例如 R.id.textview1，它们必须包含在您在适配器中指定的布局中。元素的数量也应该与你的数组中的元素数量相匹配（你称之为类字段）。

因此，您有两条数据，并且只指定了一个目标资源 ID。要么删除你的 classfields 数组中的一个字段，要么在你的布局中添加一个小部件，然后在你的 to 数组中调用它，它应该可以工作。

# doctrine - ODM：未在两个文档上创建参考

> ID：10885779
> 
> 赞同：2
> 
> 时间：2012-06-04T17:52:22.880
> 
> 标签：doctrine, doctrine-orm, doctrine-odm

假设我有两个像这样的简单文档，一个人可以有很多篇论文，但一篇论文只能属于一个人。

```
namespace Dashboard\Document;

use Doctrine\ODM\MongoDB\Mapping\ClassMetadata;
use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;

/** @ODM\Document(db="testing", collection="person")
 * @ODM\InheritanceType("COLLECTION_PER_CLASS")
 */
class Person
{
/**
 * @ODM\Id
 */
protected $id;

/** @ODM\Field(type="string") */
protected $slug;

/** @ODM\Field(type="string") */
protected $name;

/** @ODM\ReferenceMany(targetDocument="Paper", cascade={"all"}) */
protected $papers;

public function __get($property) {
    return $this->$property;
}

public function __set($property, $value) {
    $this->$property = $value;
}

public function toArray() {
    return get_object_vars($this);
}
} 
```

```
namespace Dashboard\Document;

use Doctrine\ODM\MongoDB\Mapping\ClassMetadata;
use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;

/** @ODM\Document(db="testing", collection="paper")
 * @ODM\InheritanceType("COLLECTION_PER_CLASS")
 */
class Paper
{
/**
 * @ODM\Id
 */
protected $id;

/** @ODM\Field(type="string") */
protected $name;

/** @ODM\ReferenceOne(targetDocument="Person", cascade={"all"}) */
protected $person;

public function __get($property) {
    return $this->$property;
}

public function __set($property, $value) {
    $this->$property = $value;
}

public function toArray() {
    return get_object_vars($this);
}
} 
```

当您在一端创建参考时，我想我在某处读过，Doctrine ODM 会自动为您创建两侧的参考。因此，如果我执行下面的语句，我将看到来自 Paper 文档的对 Person 的引用，以及对 Person 文档中对 Paper(s) 的引用。

```
//For demo sake; $person already contains a Person document
try {
    $paper = $dm->getRepository('\Dashboard\Document\Paper')
            ->find($paperId);
} catch (\Doctrine\ODM\MongoDB\MongoDBException $e) {
    $this->setStatusFailure($e->getMessage());
    $this->sendResponse();
}    

$paper->person = $person;
$dm->persist($paper);
$dm->flush(); 
```

当我这样做并检查mongodb时，纸上的参考-->人就在那里。但我没有看到参考人--> 数据库中显示的论文。我认为级联注释对此有所帮助，但显然我遗漏了一些东西。

如何确保引用包含在两端，以便我可以运行查询以查看属于一个人的所有论文？这是否必须手动完成，或者我可以让教义为我处理这个？

**更新**

这一页的第一段让我觉得这是可能的。

[http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/bidirectional-references.html](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/bidirectional-references.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:48:16.863

原来我应该读完整页。如果我使用 mappedBy 和 inversedBy，并且始终将 inversedBy 的文档保留在它的 Annotation 中，那么我就会得到这种双向关系

```
/** @ODM\ReferenceOne(targetDocument="Person", cascade={"all"}, inversedBy="papers") */
protected $person;

//Will give me a relationship I can query on both sides
$person->papers->add($paper); 
```

# java - 将帧添加到 mainFrame

> ID：10885784
> 
> 赞同：-1
> 
> 时间：2012-06-04T17:52:49.317
> 
> 标签：java, swing, mdi, jinternalframe

我想向我的主框架添加一些框架，假设我们有 3 个框架（Frame1、Frame2 和 Frame3）我想要：

1.  创建新的`Frame`名为 Frame 4 的菜单栏并添加带有项目（View Frame1、View Frame2、View Frame3）的菜单栏——>实际上我已经成功创建了这个框架。
2.  当单击 View Frame1 时，我想在 Frame4 的某个位置显示 Frame1，以此类推所有 menuItems
3.  我的问题是我使用拖放技术创建了旧框架。在净豆
4.  有一个名为 internalFrame 的组件，但是当我尝试使用它时，我无法将旧框架添加到这个内部框架中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:35:50.647

您可以通过阅读这篇关于使用 NetBeans 在 Java 中创建 MDI 应用程序的[精彩教程](http://gilbertadjin.wordpress.com/2009/03/14/creating-mdi-applications-in-java-using-netbeans/)来解决您的问题。

# asp.net - wget 下载使用 aspx 的动态网站

> ID：10885785
> 
> 赞同：2
> 
> 时间：2012-06-04T17:52:53.630
> 
> 标签：asp.net, download, wget

我正在尝试使用 wget 下载整个网站以进行离线学习。

```
wget --recursive --no-clobber --page-requisites 
--html-extension --convert-links  
--restrict-file-names=windows  --domains scmhrd.edu   
--no-parent  http://elearning.scmhrd.edu/frmSet.aspx 
```

下载所有静态内容，但不下载动态内容。有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:52:37.730

无法从 HTTP 下载服务器端代码。这就是为什么 asp.net 规则！

# android - 在android中加载地图视图

> ID：10885786
> 
> 赞同：0
> 
> 时间：2012-06-04T17:52:54.393
> 
> 标签：android, android-mapview

即使我们没有任何叠加层，Android 中的 Mapview 通常也需要更多时间来加载。有什么办法可以让这个加载更快？如果不能，我们能否知道它何时开始和停止渲染地图并在加载之前显示其他视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:59:06.520

通常 MapView 等待有效的 GPS 数据。可能需要几分钟。如果您不想显示当前位置，请将 lat 和 long 设置为零开始。

# google-analytics - “访客”数量的巨大差异

> ID：10885787
> 
> 赞同：3
> 
> 时间：2012-06-04T17:52:54.463
> 
> 标签：google-analytics, google-analytics-api

我尝试使用三种不同的方法提取某个目录的（唯一）访问者计数： * 使用配置文件 * 使用动态高级细分 * 使用自定义报告过滤器

在较小的站点上，这三种方法给出了相同的结果。但是在大型网站（> 5M 访问/月）上，一方面我的个人资料与另一方面的高级细分和过滤器之间存在很大差异。这可能是因为抽样 - 但在综合浏览量方面差异较小。使用抽样数据时，访问者的估计是否更差，差异更大？此外，当从 API 中提取数据（使用过滤器或配置文件）时，即使 GA 没有表明数据是经过采样的，我仍然会得到不同的数据 - 即我正在查看未采样的数据。

另一个奇怪的事情是，配置文件中的综合浏览量高于过滤器，而过滤器的访问者数量高于配置文件。我还在配置文件中应用了一个过滤器以强制它使用样本数据 - 我再次得到与过滤器和分段数据非常相似的结果。

```
 profile  filter  segment  filter@profile
unique     25550    37778   36433    37971 
pageviews  202761   184130  n/a      202761 
```

我想要实现的是找到一种方法，当我用完个人资料时，可以获取有关唯一访问者的准确数据。

更多有差异的数据可以在这个谷歌文档中找到：[https ://docs.google.com/spreadsheet/ccc?key=0Aqzq0UJQNY0XdG1DRFpaeWJveWhhdXZRemRlZ3pFb0E](https://docs.google.com/spreadsheet/ccc?key=0Aqzq0UJQNY0XdG1DRFpaeWJveWhhdXZRemRlZ3pFb0E)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T16:32:43.150

Google Analytics（免费版）每月仅跟踪 10 次 mio 页面交互 [0]（浏览量和事件，任何以“track”开头的跟踪器方法都是交互）[1]，因此您的大型网站的数据可能已经很庞大抽样（我猜你们 500 万访问者中的每个人都有两个以上的互动）[2]。临时报告最多仅使用 1 个 mio 数据点，因此您有一个样本样本。自然聚合值受较小样本量的影响更大。

而且我很确定数据限制也适用于 api 访问（谷歌表示“无法保证会处理多余的命中”），因此对于大型站点，api 也会返回采样（或不完整）数据 -所以你不能真正查看非抽样数据。

至于差异，我想说不同的临时报告使用不同的样本，所以你最终会得到不同的结果。使用 GA，您无论如何都不应该过于依赖绝对数字，而应该更多地寻找总体趋势。

[1] Analytics Premium 每月跟踪 50 次 mio 交互（并得到 Google 的支持），但每年的费用为 150 000 美元

[2] Google 建议在大型网站上使用“_setSampleRate()”，以确保您对每月每一天的数据进行了实际采样，而不是在超出数据限制后随机命中或未命中。

* * *

数据限制：

[http://support.google.com/analytics/bin/answer.py?hl=en&answer=1070983](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1070983)）。

设置采样率：

[https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._setSampleRate](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._setSampleRate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T05:22:29.950

是的，抽样数据不太准确，尤其是访客人数。

我还看到他们在两天内错过了 50 万次综合浏览量，但几天后才看到他们出现在他们的报告中。从不同的界面看到不同的结果也不足为奇。谷歌分析的质量已经下降，即使他们试图变得更加实时。看起来他们的代码库在 API 之间是不一致的，而且他们的算法到处都是。

我通常坚持使用相同的指标和报告方法，以便我的结果保持可比性。我还与 Gaug.es 一起运行 GA，作为验证和完整性检查。有了这些额外的数据，我选择了我最有信心的 GA 报告方法，并且我完全依赖它。

# sql - Varchar 字段上的日期时间和整数函数

> ID：10885788
> 
> 赞同：1
> 
> 时间：2012-06-04T17:52:54.887
> 
> 标签：sql, sql-server, database-design, database-schema

我们正在重构一个奇怪的系统，在它的后端，应该存储为数字和日期列的值，具有适当设计的约束，都存储为 varchar（仅使用 UI 验证）。问题是，当我们这样做时，我们的新系统*必须*开始运行：

是否可以将此 varchar 列作为整数进行操作以进行*更低*或更大的比较，并且鉴于日期以相同的格式 dd/MM/yyyy 存储，是否可以将 varchar 列也视为日期并使用函数：在之间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:57:00.660

您可以添加计算列（或带有列的视图），例如：

```
CONVERT(DATE, column_name, 103) 
```

对于性能问题，您可以持久化和/或索引计算列。

但是，如果您要更改结构，也可以首先修复数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:02:30.497

像这样的工作：

```
SELECT Column1, Column2
FROM Table
WHERE CONVERT(datetime, DateColumn, 3) BETWEEN @StartDate AND @EndDate 
```

# mongodb - 等效于 JavaScript shell 的 Object.bsonsize( doc ) 的 Java 驱动程序？

> ID：10885794
> 
> 赞同：2
> 
> 时间：2012-06-04T17:53:31.767
> 
> 标签：mongodb, mongodb-java

我想知道 Java 驱动程序等效于 Mongo JavaScript shell 的 Object.bsonsize( doc ) 方法是什么？例如，执行以下操作的 Java 代码是什么：

```
bobk-mbp:~ bobk$ mongo
MongoDB shell version: 2.0.4
connecting to: test
PRIMARY> use devices;
switched to db devices
PRIMARY> Object.bsonsize( db.profiles.findOne( { _id: "REK_0001" } ) );
186
PRIMARY> Object.bsonsize( db.profiles.findOne( { _id: "REK_0002" } ) );
218
PRIMARY> 
```

如何使用 MongoDB Java 驱动程序执行相同的基本用例。它通过 JavaDocs 并不明显。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T20:12:57.883

没有什么比 shell 中可用的更干净了，但这会起作用：

```
DBObject obj = coll.findOne();
int bsonSize = DefaultDBEncoder.FACTORY.create().
        writeObject(new BasicOutputBuffer(), obj)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T13:44:18.787

您可以使用[BasicBSONEncoder](http://api.mongodb.org/java/current/org/bson/BasicBSONEncoder.html)：

```
DBObject obj = coll.findOne();
int bsonSize = new BasicBSONEncoder().encode(obj).length; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-21T06:52:40.137

关于什么：

```
 CommandResult result = db.doEval("Object.bsonsize(db.profiles.findOne({ _id: "REK_0001" }))");
        double bsonSize = (Double) result.get("retval"); 
```

它是 double 而不是 int。

*doEval*从第一个版本开始就是 MongoDB Java 驱动程序的一部分。

# java - Spring MVC，将@ExceptionHandler 迁移到 HandlerExceptionResolver 以实现 RESTful 服务

> ID：10885795
> 
> 赞同：9
> 
> 时间：2012-06-04T17:53:32.430
> 
> 标签：java, spring, rest, spring-mvc, content-type

## 背景

我有一个错误消息类：

```
@XmlRootElement
public class ErrorMessage {
    private String message;

    public ErrorMessage() {
    }

    public ErrorMessage(String message) {
        this.message = message;
    }

    public String getError() {
        return message;
    }

    public void setError(String message) {
        this.message = message;
    }
} 
```

此类已作为返回值分配给我的 Spring MVC REST 控制器中的 @ExceptionHandler：

```
@ExceptionHandler
@ResponseStatus(HttpStatus.NOT_FOUND)
@ResponseBody
ErrorMessage handleException(RuntimeException e) {
    return new ErrorMessage("something went wrong");
} 
```

`RuntimeException`每当客户端在发出带有标头的请求后`application/json`触发a时`Accept`，它都会收到带有正确状态代码和匹配 JSON 正文的响应：

```
{"error":"something went wrong"} 
```

或者，如果`Accept`标头是，则接收 XML 正文`application/xml`：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<errorMessage><error>something went wrong</error></errorMessage> 
```

## 问题

现在，我想通过实现一个[HandlerExceptionResolver](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-exceptionhandlers)来生成这个解决方案，这样我就不必将其复制/粘贴`@ExceptionHandler`到每个控制器（或创建一个其他控制器可以扩展的通用“父控制器”）。

但是，[AbstractHandlerExceptionResolver.doResolveException()](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/handler/AbstractHandlerExceptionResolver.html#doResolveException%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse,%20java.lang.Object,%20java.lang.Exception%29)方法返回 a`ModelAndView`而不是我的 propriety `ErrorMessage`，所以我尝试了以下方法：

```
public class RuntimeExceptionHandlerExceptionResolver extends AbstractHandlerExceptionResolver {

    @Override
    protected ModelAndView doResolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) {
        if (ex instanceof RuntimeException) {
            response.setStatus(HttpServletResponse.SC_NOT_FOUND);
            ModelAndView mav = new ModelAndView();
            mav.addObject("error", "something went wrong");
            return mav;
        }
        return null;
    }
} 
```

调试的时候可以看到`mav.addObject()`调用了这个方法。客户端的响应具有预期的状态码，但内容类型为正文中的 html，而不是原始请求中`text/html`的标头指定的 JSON 或 XLM 内容。`Accept`

（旁注，上面示例中的实际异常、响应代码和文本消息并不重要，它们只是作为简单示例。）

春季版：3.1.1.RELEASE

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T20:14:05.287

为了让`@ExceptionHandler`s 使用内容协商，[`AnnotationMethodHandlerExceptionResolver`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/mvc/annotation/AnnotationMethodHandlerExceptionResolver.html)有一个[`setMessageConverters()`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/mvc/annotation/AnnotationMethodHandlerExceptionResolver.html#setMessageConverters%28org.springframework.http.converter.HttpMessageConverter%5B%5D%29)方法必须与消息转换器一起提供，例如：

```
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerExceptionResolver">
    <property name="messageConverters">
        <list>
            <ref bean="xmlConverter"/>
            <ref bean="jsonConverter"/>
        </list>
    </property>
</bean> 
```

但是由于您使用的是自定义方法，因此您可能必须自己实现此功能。最简单的方法可能是`Ctrl-C Ctrl-V`从[`AnnotationMethodHandlerExceptionResolver`源头](http://www.jarvana.com/jarvana/view/org/springframework/spring-webmvc/3.1.0.RELEASE/spring-webmvc-3.1.0.RELEASE-sources.jar!/org/springframework/web/servlet/mvc/annotation/AnnotationMethodHandlerExceptionResolver.java?format=ok)，特别是`handleResponseBody()`方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T21:07:58.337

我花了一些时间调查此事，并写了[一篇博客文章](http://www.jayway.com/2012/09/23/improve-your-spring-rest-api-part-ii/)，其中我提出了该问题的解决方案。

更新：如果您使用的是 Spring 3.2，则可以利用[@ControllerAdvice](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html)注释。更多细节可以在我的[第二篇博文](http://www.jayway.com/2013/02/03/improve-your-spring-rest-api-part-iii/)中找到。

# mule - Mule 3：创建 RESTful Web 服务端点

> ID：10885799
> 
> 赞同：1
> 
> 时间：2012-06-04T17:53:44.403
> 
> 标签：mule

我正在尝试在 Mule 3 中创建一个响应 GET 请求的端点（我认为这是正确的词？）。这个 Mule 应用程序在 Web 容器内的 JavaEE Web 应用程序中运行。

在我的 web.xml 中，我`MuleRESTReceiverServlet`定义了一个 servlet，以便它处理 URL 以“/rest/”开头的所有请求：

```
<web-app>
  <listener>
    <listener-class>org.mule.config.builders.MuleXmlBuilderContextListener</listener-class>
  </listener>

  <servlet>
    <servlet-name>muleRESTServlet</servlet-name>
    <servlet-class>org.mule.transport.servlet.MuleRESTReceiverServlet</servlet-class>
    <load-on-startup />
  </servlet>

  <servlet-mapping>
    <servlet-name>muleRESTServlet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

我的`<flow>`样子是这样的：

```
<flow name="myFlow">
  <servlet:inbound-endpoint path="category/service" />      
  <component>
    <singleton-object class="com.company.MyComponent" />
  </component>
  <outbound-endpoint ... />
</flow> 
```

当我向“http://localhost:8080/webappName/rest/category/service”发送 GET 请求时，我希望它能够调用`com.company.MyComponent`该类。但相反，我得到了错误：

`org.mule.api.endpoint.MalformedEndpointException: The endpoint "service" is malformed and cannot be parsed. If this is the name of a global endpoint, check the name is correct, that the endpoint exists, and that you are using the correct configuration (eg the "ref" attribute). Note that names on inbound and outbound endpoints cannot be used to send or receive messages; use a named global endpoint instead.`

我尝试将入站端点定义为全局端点，就像错误消息似乎暗示的那样，但我只是得到了同样的错误。

```
<servlet:endpoint name="myEndpoint" path="category/service" />
...
<flow name="myFlow">
  <inbound-endpoint ref="myEndpoint" />     
  <component>
    <singleton-object class="com.company.MyComponent" />
  </component>
  <outbound-endpoint ... />
</flow> 
```

我还尝试将“路径”属性设置为“rest/category/service”和“/rest/category/service”，但仍然收到相同的错误消息。

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:03:31.513

它`org.mule.transport.servlet.MuleRESTReceiverServlet`使用非常具体的路径约定，允许您通过名称或路径直接查询现有的 Mule 端点。[在此处](http://www.mulesoft.org/docs/site/current3/apidocs/index.html?org/mule/transport/servlet/MuleRESTReceiverServlet.html)阅读 JavaDoc 。

在您的情况下，要使用`servlet:inbound-endpoint`，您需要使用`org.mule.transport.servlet.MuleReceiverServlet`.

# php - 奇怪的准备好的语句错误

> ID：10885801
> 
> 赞同：1
> 
> 时间：2012-06-04T17:54:00.823
> 
> 标签：php, mysql, mysqli, prepared-statement

这是我的陈述的样子。

```
 $stmt = $this->db->prepare("
                        select q.id 
                        from questions q 
                        left outer join (
                        select max(chk_date) as questions_last_chk_date 
                        FROM last_check_date 
                        where user_id = ? 
                        AND chk_token=?) lcd 
                        on q.add_dt > lcd.questions_last_chk_date
                        WHERE q.author_id<>?
                ") or die($this->db->error);
                $stmt->bind_param("isi", $_SESSION["userID"], "q", $_SESSION["userID"]) or die($stmt->error); 
```

我有 2 个问题

1) 收到错误信息

**致命错误**：无法通过引用传递参数 3

为什么会出现这个错误？顺便说一句，我知道那张`last_check_date`桌子是空的，但我认为它与这个问题无关。

2）在windows上，得到错误信息表`last_check_date`不存在，但我100%知道没有错字，表存在。我用 Navicat - db amanger 应用程序尝试了相同的查询并得到了结果。但是当我尝试使用 PHP 得到这个错误时。在远程 Linux 服务器上它可以工作，并在问题 1 中收到错误消息。尝试重新启动 mysql 服务，重命名为其他名称并将名称更改回以前的名称。没有成功！我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:32:45.687

你必须放入`q`一个变量。

仅供参考，尽量不要使用等于表别名或引用的字符串值。`q`当您有一个带有`q`别名的表时，您正在传递值。这不是错误，但如果您需要对查询进行回显，可能会非常混乱。

# css - 为什么我的子菜单会被覆盖？

> ID：10885809
> 
> 赞同：0
> 
> 时间：2012-06-04T17:54:41.197
> 
> 标签：css

我的 CSS 中的什么掩盖了我的下拉菜单的子菜单？这是我的模板。将鼠标悬停在“Bar”上应该会产生一个子菜单。

[http://dl.dropbox.com/u/1531353/Misc/menuBarCovered/index.html](http://dl.dropbox.com/u/1531353/Misc/menuBarCovered/index.html)

我尝试更改子菜单的 z-index 无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:11:49.767

无需在每个元素上使用溢出：隐藏。

如果您从标题 css 声明中删除此属性，您将能够在悬停时看到子菜单。

通过使用overflow:hidden，你可以剪裁掉任何低于你元素边界的东西并使其不可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:15:24.913

同意@Pablo - 快速修复 - 从标题中删除溢出：隐藏。

# android - AsyncTask 的问题：执行

> ID：10885818
> 
> 赞同：1
> 
> 时间：2012-06-04T17:55:28.497
> 
> 标签：android, android-asynctask, execute

我尝试使用`AsyncTask`对象将我的应用程序连接到远程服务器。这是我的代码：

```
public class ConnectServer extends AsyncTask<Void, Void, Void> {

    String IP = "";
    InputStream is = null;
    JSONObject json_data = null;
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    ArrayList<String> donnees = new ArrayList<String>();

    @Override
    protected Void doInBackground( Void... params ) {

        // TODO Auto-generated method stub
        IP = "http://192.168.101.1/fichier.php";
        nameValuePairs.add( new BasicNameValuePair( "nom", envois.nom ) );
        nameValuePairs.add( new BasicNameValuePair( "prenom", envois.prenom ) );
        nameValuePairs.add( new BasicNameValuePair( "nationalite", envois.nationalite ) );
        nameValuePairs.add( new BasicNameValuePair( "passeport", envois.passeport ) );

        try {
            //commandes httpClient
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost( IP );
            httppost.setEntity( new UrlEncodedFormEntity( nameValuePairs ) );
            HttpResponse response = httpclient.execute( httppost );
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
            Log.i( "tag", "depuis json" );
        }
        catch (Exception e) {
            Log.i( "taghttppost", "" + e.toString() );
            Toast.makeText( c, e.toString(), Toast.LENGTH_LONG ).show();
        }

        return null;
    }

    @Override
    protected void onPreExecute() {

        // TODO Auto-generated method stub
        super.onPreExecute();
    }

    @Override
    protected void onPostExecute( Void result ) {

        // TODO Auto-generated method stub
        super.onPostExecute( result );
        Toast.makeText( getApplicationContext(), "fin d'envoi", Toast.LENGTH_SHORT ).show();
    }
} 
```

然后，当我尝试在我的`onClick()`方法中调用启动该任务时，如下所示：

```
public void onClick( View v ) {

    // TODO Auto-generated method stub
    ConnectServer cs = new ConnectServer();

    cs.execute( (Void) null );
} 
```

它不起作用。我用eclipse调试它，我确信错误来自这一行：

```
cs.execute((Void)null); 
```

我尝试将其替换为

```
cs.execute(); 
```

但错误仍然存​​在。调试器给了我类似的东西：

```
Thread [<10> AsyncTask #1] (Suspended (exception RuntimeException)) 
    ThreadPoolExecutor.runWorker(ThreadPoolExecutor$Worker) line: 1086  
    ThreadPoolExecutor$Worker.run() line: 561   
    Thread.run() line: 1096 
Thread [<12> AsyncTask #2] (Running) 
```

我想补充一点，当我在没有`AsyncTask`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:04:02.557

在 ConnectServer 类中试试这个：

```
@Override
protected void onPostExecute(Void result) {
    Toast.makeText(getApplicationContext(), "fin d'envoi", >Toast.LENGTH_SHORT).show();
} 
```

在活动中试试这个：

```
@Override
public void onClick(View v) {
   ConnectServer cs = new ConnectServer();
   cs.execute();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:25:36.150

事实证明，有时仅**`Project->Clean..`**在 Eclipse 中就可以解决问题.. ;)

# python - 协方差矩阵的数据库设计（恒定大小，对角对称）

> ID：10885821
> 
> 赞同：0
> 
> 时间：2012-06-04T17:55:32.490
> 
> 标签：python, sql, database, arrays, database-design

我对关系数据库设计领域相当陌生，并且正在尝试将 9x9 协方差矩阵存储在表中。行和列是位置、速度和加速度的 x、y、z 项。像这样：

```
 PosX PosY PosZ . . . AccZ
      -------------------------
PosX  |  XX   XY   XZ  . . .
PosY  |  YX   YY   YZ  . . . 
PosZ  |  ZX   ZY   ZZ  . . . 
.     |  .    .    .
.     |  .    .    .
.     |  .    .    .
AccZ  | 
```

例如，最左上角的元素是 PosXPosX（上面缩写为 XX），最右边的是 PosXPosY，依此类推。矩阵沿对角线对称（即 PosXPosY == PosYPosX）。我也可能想要在同一张表中存储一个仅包含位置和速度的 6x6 矩阵。

根据我的研究，我发现了一种规范化的表格设计，可以创建一个包含行号、列号和值字段的表格（[如何在数据库中表示二维数据矩阵](https://stackoverflow.com/questions/1138777/how-to-represent-a-2-d-data-matrix-in-a-database)）。我可以看到这样做的好处是灵活性，因为行数和列数是可变的。即使我有一定数量的行和列（9x9 和/或 6x6），这是最好的方法吗？我还可以设想创建一个表，其中包含每个唯一行/列组合（PosXPosX、PosXPosY ......等）的字段。这对我来说似乎更直观，但就像我说的那样，我是新手。

我的问题是：您建议如何在关系数据库中表示我的数据？我已经概述了两种可能的方法，但我不知道是否是最好的方法。在我的情况下，“最佳”意味着有效地存储和检索。我正在创建的实际上是一个数据存储库，因此数据库中的数据一旦添加就不会改变，只会读入 numpy 数组或类似数组。

更多背景知识：
我正在分析测试数据。我有多个不同配置的测试运行，每个测试运行都有多个数据点，其中包含许多不同类型的数据。我要存储和分析的数据点之一是协方差。我正在处理的数据量非常惊人，所以我希望使用数据库能够帮助我保持事物的组织性和可访问性。目标是存储所有这些数据，然后编写将从数据中提取的数据分析和可视化工具。在协方差的情况下，我正在计算诸如马氏距离、轨迹和时间传播的特征值之类的东西。我已经拥有许多这样的工具，但它们目前从许多不同的日志文件中提取，并且通常是一团糟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:19:18.947

数据库非常擅长存储数量惊人的数据。如果不执行实际计算，您似乎希望使用它们快速、清晰、轻松地存储和检索您的信息。如果是这样，那么您将需要设计存储以实现高效检索。

行和列的字段（表列）似乎是必须的。您需要确保永远不要添加大于矩阵大小的值（行/列不超过 6 或 9）。您可以在 RDBMS 中使用一些技巧来确保这种情况永远不会发生，但它们可能会变得有点笨拙。

您将找到一个额外的字段来唯一标识正在存储的数据集是必不可少的*。*在表上为该列建立索引，从数百万个中检索一组 36 或 81 个值将非常快。

你的第二个想法（每次观察一行）也可以工作。他们要考虑的关键是：如何使用数据？从长远来看，什么最有效，或最能满足您的目标？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:35:16.950

只要您的数据集很小，并且您可以假设一旦读取的值不会被外部应用程序修改，那么可能值得考虑使用 csv 文件并将数据读取到最有用的任何数据结构中在您进行分析时。这也可以让您更轻松地查看数据，因为您只需要一个文本编辑器，或者如果您想要一种将其作为电子表格查看的方法。

根据您所说的，每个单元格有一个记录似乎是最干净的事情，因为这将在未来为您提供最大的灵活性。如果您有兴趣阅读有关数据库设计的信息[，这是一个很好的起点](http://en.wikipedia.org/wiki/Database_normalization)

一种可能的设计可能是：

```
table matrix(record_id, parent_id, matrix_id, x, y, value) 
```

其中record_id 唯一标识一条记录，parent_id 是对该矩阵的拥有实体的引用，matrix_id 唯一标识矩阵中的元素，x 和y 是记录的坐标，value 是单元格值。

然后查询可能类似于：

```
select * 
    from matrix
where matrix_id=?
order by x asc, y asc 
```

# c# - Asp.net MVC URL 路由：有参数时更改 URL 的问题

> ID：10885822
> 
> 赞同：0
> 
> 时间：2012-06-04T17:55:32.973
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing, global-asax

我需要更改我的 MVC 项目中的所有 URL，到目前为止，这非常简单——我只需要更改 global.asax.cs 文件中所有适当的 routes.MapRoute() 中的 URL 字符串。

特别是其中一个环节表现得很顽固，不会改变，我敢肯定这是因为它是唯一一个有参数的环节。

有问题的 mapRoute 是：

```
routes.MapRoute(
            "Mortgage.GetThisRate",
            "mortgage-rates/mortgage-rate-details/{groupId}/{paymentType}/{mortgageValue}/{province}",
            new { controller = "Mortgage", action = "GetThisRate", paymentType = UrlParameter.Optional, mortgageValue = UrlParameter.Optional, province = UrlParameter.Optional },
            new { groupId = "\\d+", paymentType = "\\d+", mortgageValue = "\\d+", province = "\\d+" }
        ); 
```

调用此 mapRoute 的按钮是：

```
 @Html.OmnitureButton( Url.Action("GetThisRate", new { groupId = info.GroupId }), "<span class=\"payment\"></span><br />Get Details", new {@class = "orange"}, "events", "event3", "", "event3", "", "Mortgage LearnMore") 
```

按下此按钮时，它请求的 URL 是： http: [//www.apps.mysite.net/Mortgage/GetThisRate/8/48/200000/1](http://www.apps.mysite.net/Mortgage/GetThisRate/8/48/200000/1) - 似乎完全忽略了其 mapRoute 方法中的 URL 字符串。

我尝试将此 mapRoute() 放在 global.asax.cs 的顶部，以确保它不会被更高优先级的路由忽略，但同样的问题仍然存在。

任何了解 MVC 路由的人都能够弄清楚这里出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:08:28.240

忘记了 groupId 参数，应该是这样的（已经测试过并且工作正常）

```
routes.MapRoute(
        "Mortgage.GetThisRate",
        "mortgage-rates/mortgage-rate-details/{groupId}/{paymentType}/{mortgageValue}/{province}",
        new { controller = "Mortgage", action = "GetThisRate", groupId = UrlParameter.Optional, paymentType = UrlParameter.Optional, mortgageValue = UrlParameter.Optional, province = UrlParameter.Optional },
        new { groupId = "\\d+", paymentType = "\\d+", mortgageValue = "\\d+", province = "\\d+" } 
```

并且要与助手建立链接，您必须指定要使用的路由名称

```
@Html.RouteLink("title of link", "Mortgage.GetThisRate", new { groupId = "8", paymentType = "48", mortgageValue = "200000", province = "1" }) 
```

所以，你的链接看起来像......

```
yoursite/mortgage-rates/mortgage-rate-details/8/48/200000/1 
```

我看到您正在使用自定义控件，因此可以使用 @URL.RouteUrl 生成操作 url 并提供给您的自定义控件，如 html 参数

```
@Url.RouteUrl("Mortgage.GetThisRate", new { groupId = "8", paymentType = "48", mortgageValue = "200000", province = "1" }) 
```

**扩展答案** 示例案例，您需要一个标题为“点击我！”的操作链接，指向控制器“home”的href，操作“sayHello”，类属性“some_css”和html id“link_say_hello”解决方案

```
@Html.ActionLink("click me!", "sayHello", "home", null, new { id="link_say_hello", @class = "some_css"}) 
```

html输出

```
<a class="some_css" href="/home/sayHello" id="link_say_hello">click me!</a> 
```

为什么属性类有@??? 因为 class 是保留字，所以编译器会抛出以下错误 Compiler Error Message: CS1513: } expected 请记住。

那太棒了！但在这种情况下，您需要一个自定义路由，而不是默认的 {controller}/{action} 并与您的自定义助手一起使用，所以这是需要 @URL.RouteLink 并提供类似 html 属性的 href...

```
new {href = @Url.RouteUrl("Mortgage.GetThisRate", new { groupId = "8", paymentType = "48", mortgageValue = "200000", province = "1", id="link_say_hello", @class = "some_css" })} 
```

输出

```
<a class="some_css" href="/mortgage-rates/mortgage-rate-details/8/48/200000/1" id="link_say_hello">click me!</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:43:52.770

The solution was to use Url.RouteUrl() and dump its return value into Html.OmnitureButton(). The mapRoute() optional parameters needed to be changed to defaults, as RouteUrl() did not work with optionals.

The working code looks like:

```
routes.MapRoute(
           "Mortgage.GetThisRate",
           "mortgage/mortgage-rate-details/{groupId}/{paymentType}/{mortgageValue}/{province}",
           new { controller = "Mortgage", action = "GetThisRate", paymentType = 48, mortgageValue = 200000, province = 1 },
           new { groupId = "\\d+", paymentType = "\\d+", mortgageValue = "\\d+", province = "\\d+" }
       ); 
```

And the button:

```
@{
  string x = Url.RouteUrl("Mortgage.GetThisRate", new { groupId = info.GroupId});
  @Html.OmnitureButton(x, "<span class=\"payment\"></span><br />Get Details", new {@class = "orange"}, "events", "event3", "", "event3", "", "Mortgage LearnMore")
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T18:04:12.057

看起来路线“Mortgage.GetThisRate”的名称与您在操作“GetThisRate”中使用的名称不匹配（它也是自定义助手，因此可能会自动添加“Mortgage.”）。

# javascript - 将 For 循环参数传入每个语句

> ID：10885823
> 
> 赞同：4
> 
> 时间：2012-06-04T17:55:36.570
> 
> 标签：javascript, jquery, json, google-maps

我有一个 JSON 提要，它正在拉入每个语句。我想做的是 for loop var`i`我希望在每个语句中使用这个值。在下面的示例中，for 循环将运行 0、1、2。如果`i == 1`这样，我想运行 JSON 提要，但仅针对`i = 1`值。目前，当 if 语句被触发 JSON 每个语句运行所有项目 b/c 它的`i`值从 0 开始。所以`console.log`我已经到位返回 0、1、2。我希望它只返回 1。谢谢任何帮助。

**编辑**
我的重点是`$.each(data.DATA, function(i, item) {`在`i`这个 each 语句中使用`i`等于 for 循环语句中的数字。因此，如果 JSON 文件中有 3 项，则只会运行第 1 项。

```
for (var i = 0; i < 2; i++) {
    if (i == 1) {
        $.getJSON("/json/v2_ilt_map.cfm?feedtype=ILTMAP_SCHEDULED&customerID=1&TrainingObjectParent=3", {}, function(data, i) {
            $.each(data.DATA, function(i, item) {
                console.log(i);
            }
        }):
    }
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:07:41.890

您需要引入一个额外的函数作用域来完成这项工作。

```
function checkOnly(i) {
  return function(data) {
    $.each(data.DATA, function(ii, item) {
      if (ii == i) console.log(ii);
    });
  };
}

for (var i = 0; i < 2; i++) {
    if (i == 1) {
        $.getJSON("/json/v2_ilt_map.cfm?feedtype=ILTMAP_SCHEDULED&customerID=1&TrainingObjectParent=3", {}, checkOnly(i));
    }
} 
```

在这里，传递给的回调`$.getJSON`是在另一个函数中创建的。通过这样做，在循环中检查的变量“i”是`.each()`循环中“i”的*副本*`for`。因此，处理函数有一个固定的值来比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:04:56.333

```
for (var i = 0; i < 2; i++) {
  var x = i;
  if (i == 1) {
    $.getJSON("/json/v2_ilt_map.cfm?feedtype=ILTMAP_SCHEDULED&customerID=1&TrainingObjectParent=3", {}, function(data, i) {
        $.each(data.DATA, function(n, item) {
            if(n == x){
                console.log(n);
                break;// you can use break if you want
            }
        }
    }):
    break; // you can use break if you want
} 
```

}​</p>

# c# - 将空字典绑定到列表框

> ID：10885827
> 
> 赞同：2
> 
> 时间：2012-06-04T17:55:48.403
> 
> 标签：c#, winforms, listbox

当我尝试将字典绑定到列表框时，我得到一个 ArgumentException。无法绑定到新值成员。

我使用以下代码。谁能告诉我出了什么问题。因为当我在字典中输入 i 行时，它的工作正常......

```
this.contactpersonenListBox = new Dictionary<int, string>();

lsContactpersonen.DataSource = new BindingSource(this.contactpersonenListBox, null);
lsContactpersonen.DisplayMember = "Value";
lsContactpersonen.ValueMember = "Key"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:29:58.150

绑定空字典没有多大意义，因为字典对象不报告任何更改，因此在设置数据源后向字典添加项目不会显示在 ListBox 中。

但要摆脱错误，请尝试这样设置：

```
BindingSource b = new BindingSource();
b.DataSource = this.contactpersonenListBox;
lsContactpersonen.DisplayMember = "Value";
lsContactpersonen.ValueMember = "Key";
lsContactpersonen.DataSource = b; 
```

# workflow - 如何使用 OpenNTF 的“XPage 工作流程”？

> ID：10885829
> 
> 赞同：0
> 
> 时间：2012-06-04T17:55:58.467
> 
> 标签：workflow, xpages

关于开始使用 OpentNTF 上的“XPage 工作流程”的任何提示？该文档非常高级，主要是关于示例应用程序。第 24 页是唯一包含有关使用简单工作流引擎的信息的页面。我正在研究 EmployeeReview.nsf 示例数据库，但可以使用一些指针吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:36:00.847

我的一位开发人员在过去几天评估了工作流程的内容。不幸的是，我无法分享她的努力所产生的文件。因此，您现在唯一的方法是分析示例应用程序的各个部分。在示例应用程序中找到 Simple Workflow Control 和 Workflow Action 控件并查看源代码。您将看到 Simple Workflow Control 处理人员和角色。工作流上下文中的角色不是 ACL 角色。它们是在配置中定义的角色（例如 [Manager] ），因此您需要在应用程序中进行某种配置，其中包含人名和此人在您的工作流程中的角色。例如，如果此人是经理，您还必须描述他/她正在管理哪些其他人。然后，在您描述的工作流程步骤中，涉及特定人员的 wf 状态，下一步是什么以及是否发送了任何邮件。完成一些分析后，您将能够创建自己的示例应用程序。我也希望有更多的文档。我将提供有关如何使用 wf 控件的更详细信息，但我将在接下来的几天里去度假。所以我没有太多时间来整理手册。我接下来几天要去度假。所以我没有太多时间来整理手册。我接下来几天要去度假。所以我没有太多时间来整理手册。

但是查看源代码应该有助于理解所有的东西是如何工作的。

# asp.net - 使用 itextsharp 转换为 pdf 时，Gridview 列宽发生变化

> ID：10885830
> 
> 赞同：0
> 
> 时间：2012-06-04T17:55:59.893
> 
> 标签：asp.net, gridview, itextsharp, column-width

今天是个好日子 ！

在将 gridview 转换为 PDF 之前，我可以使用以下方法修改字体大小和颜色：

```
gridview.HeaderRow.Style.Add("font-family", "Arial, Helvetica, sans-serif;");
gridview.HeaderRow.Style.Add("font-size", "7.20px");
gridview.HeaderRow.Style.Add("color", "#284775");
gridview.Style.Add("font-family", "Arial, Helvetica, sans-serif;");
gridview.Style.Add("font-size", "6px"); 
```

由于正在显示的信息，gridview 具有不同的列宽，这些大小是在 .aspx 文件中设置的。但是，生成的 pdf 文件会自动将每列的宽度调整为相同的大小，因此信息会缩小，看起来不太好..

我尝试了以下方法：

```
gridview.Width =100;

gridview.Style.Add("width","100"); 
```

还有更多，但无法将 gridview 调整为原始列宽。

我怎样才能做到这一点？

提前致谢。

**编辑：**我也试过：

```
gridview.Columns[3].ItemStyle.Width =Unit.Pixel(10); 
```

这是我用来生成 PDF 文件的代码：

```
StringWriter stw = new StringWriter();
HtmlTextWriter htextw = new HtmlTextWriter(stw);
gridview.HeaderRow.Style.Add("font-family", "Arial, Helvetica, sans-serif;");
gridview.HeaderRow.Style.Add("font-size", "8.20px");
gridview.HeaderRow.Style.Add("color", "#284775");
gridview.Style.Add("font-family", "Arial, Helvetica, sans-serif;");
gridview.Style.Add("font-size", "8px");
gridview.Columns[3].ItemStyle.Width =Unit.Pixel(10);
gridview.RenderControl(htextw);
Document document = new Document(iTextSharp.text.PageSize.LETTER.Rotate(), 10, 10, 42, 35);
string path = "path where im saving file".pdf";
PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(path, FileMode.Create));            
StringReader str = new StringReader(stw.ToString());
iTextSharp.text.html.simpleparser.HTMLWorker htmlworker = new HTMLWorker(document);
htmlworker.Parse(str);
Response.Write(document);
document.Close(); 
```

**编辑：**在搜索时找到[了这个链接](http://www.aspsnippets.com/Articles/Export-ASP.Net-GridView-to-PDF-with-Custom-Columns-Widths-using-iTextSharp.aspx)，这可能正是我所需要的，但是在创建表时出现以下错误：

```
the type or namespace name 'table' does not exist in the namespace 'itextsharp.text' 
```

我添加了所有的 itextsharp 引用。可能是版本问题？

# css - CSS模板代码阅读

> ID：10885833
> 
> 赞同：1
> 
> 时间：2012-06-04T17:56:03.183
> 
> 标签：css, asp.net-mvc-4

我是 CSS 新手，我正在尝试阅读默认 ASP.NET MVC 4 项目模板附带的代码。我不知道是什么代码生成了穿过页面顶部的小黑条。在 HTML 页面中，似乎没有任何 HTML 代码可以执行此操作，并且我在页面的最上面部分找不到任何可以创建它的边距或填充。

CSS 代码： [http ://textuploader.com/?p=6&id=8DdpK](http://textuploader.com/?p=6&id=8DdpK)

定义布局的 .cshtml 文件： [http ://textuploader.com/?p=6&id=LCrA7](http://textuploader.com/?p=6&id=LCrA7)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:58:25.587

`border-top`for在`body`页面顶部添加黑条：

```
html {
    background-color: #e2e2e2;
    margin: 0;
    padding: 0;
}

body {
    background-color: #fff;
    border-top: solid 10px #000; /* <-- This adds the border to the top of the page */
    color: #333;
    font-size: .85em;
    font-family: "Segoe UI", Verdana, Helvetica, Sans-Serif;
    margin: 0;
    padding: 0;
} 
```

# jquery - 自动完成 json 数据 - 我如何在 MVC3 Razor 中使用它

> ID：10885834
> 
> 赞同：0
> 
> 时间：2012-06-04T17:56:05.360
> 
> 标签：jquery, asp.net-mvc-3

当我的 jQuery 自动完成功能获取 json 数据项时，如何获取所选项目并将它们分配给我的 DOM 中的其他文本框？

我是否在文本框中连接了一个事件？

我的js：

```
$(document).ready(function () {
$("#CustByName").autocomplete(
    {
        source: function (request, response) {
            $.ajax(
            {
                url: "/Cases/FindByName", type: "GET", dataType: "json",
                data: { searchText: request.term, maxResults: 10 },
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    response($.map(data, function (item) {
                        return {
                            label: item.CustomerName,
                            value: item.CustomerName,
                            id: item.CustomerID
                        }
                    })
                    );
                }
            });
        },
        minLength: 3
    });

}); 
```

和我的控制器动作：

```
//Post: autocomplete customer names
    //[HttpPost]
    public JsonResult FindByName(string searchText, int maxResults)
        {
        CustomerFind find = new CustomerFind();
        var result = find.FindCustomerByName(searchText, maxResults);
        return Json(result, JsonRequestBehavior.AllowGet);
        } 
```

和我的 FindCustomerByName 函数

```
internal List<Models.Customer> FindCustomerByName(string searchText, int maxResults)
        {
        List<Models.Customer> result;

        using (cummins_sqldb dataContext = new cummins_sqldb())
            {

            result = (from c in dataContext.Customers
                      where c.CustomerName.Contains(searchText)
                      orderby c.CustomerName
                      select c).Take(maxResults).ToList();
            }
        return result;

        } 
```

# c# - LINQ 的 orderby 子句中的“指定转换无效”错误

> ID：10885837
> 
> 赞同：2
> 
> 时间：2012-06-04T17:56:18.270
> 
> 标签：c#, .net, linq, datatable, nullable

我正在 LINQ 中的两个数据表之间进行右连接。我在 orderby 行“”Specified cast is not valid”处收到错误。

“SomeOtherID”列是 dbml 中的 System.Int64 类型，并允许 DBNull。该列在数据中有一些空值，这是有效的。似乎必须在 orderby 语句中以某种方式处理这些空值，但我不确定如何处理。数据通过网络服务进入。我检查了reference.cs 文件，该列的相应属性是一个int。

LINQ语句应该如何？

```
 var query = (from table1 in DataTable1.AsEnumerable()
                          join table2 in DataTable2.AsEnumerable()
                              on (int) table1["CustomerID"] equals (int) table2["CustomerID"] into outer
                          from table2 in outer.DefaultIfEmpty()
                          orderby (int?)table2["SomeOtherID"] 
                          select new
                                     {
                                         ......
                                     }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:04:45.730

还要检查：[LINQ：OrderBy，TypedDataSets 中有可为空的列](http://perezgb.com/2008/08/11/linq-orderby-with-nullable-columns-in-typeddatasets)

尝试以下方式

```
var query = 
(from table1 in DataTable1.AsEnumerable()
  join table2 in DataTable2.AsEnumerable()
  on (int) table1["CustomerID"] equals (int) table2["CustomerID"] 
   into outer from table2 in outer.DefaultIfEmpty()
//order by clause changed here     
 orderby 
   (Convert.IsDBNull(table2["SomeOtherID"]) ? 0 : (int?)
                          Convert.ToInt32(table2["SomeOtherID"]))
    select new
       {
           ......
       }); 
```

# spring - spring java配置问题：拒绝的bean名称'requestMappingHandlerMapping'：没有识别出URL路径

> ID：10885839
> 
> 赞同：4
> 
> 时间：2012-06-04T17:56:20.463
> 
> 标签：spring, jakarta-ee, tomcat, spring-mvc, classloader

我正在使用 spring java configs 来创建一个 web 应用程序。

当我在 tomcat 上运行时，它说资源 /myapp/myapp 未找到

在控制台输出中，我注意到以下内容。我不确定这是否会导致任何问题。

我只显示那些看起来很奇怪的日志行。因为日志太大了

```
INFO: validateJarFile(C:\libraries\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\myapp\WEB-INF\lib\javax.servlet-api-3.0.1.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class

Creating instance of bean 'beanNameHandlerMapping'
Returning cached instance of singleton bean 'delegatingWebMvcConfiguration'
Eagerly caching bean 'beanNameHandlerMapping' to allow for resolving potential circular     references
Looking for URL mappings in application context: Root WebApplicationContext: startup date [Mon J     un 04 13:28:33 EDT 2012]; root of context hierarchy
Rejected bean name  'org.springframework.context.annotation.internalConfigurationAnnotationProcessor': no URL paths identified
Rejected bean name 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor': no URL paths identified
Rejected bean name 'org.springframework.context.annotation.internalRequiredAnnotationProcessor': no URL paths identified
Rejected bean name 'org.springframework.context.annotation.internalCommonAnnotationProcessor': no URL paths identified
Rejected bean name 'webAppContextConfig': no URL paths identified
Rejected bean name 'org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0': no URL paths identified
Rejected bean name 'delegatingWebMvcConfiguration': no URL paths identified
Rejected bean name 'requestMappingHandlerMapping': no URL paths identified
Rejected bean name 'viewControllerHandlerMapping': no URL paths identified
Rejected bean name 'beanNameHandlerMapping': no URL paths identified
Rejected bean name 'resourceHandlerMapping': no URL paths identified
Rejected bean name 'defaultServletHandlerMapping': no URL paths identified
Rejected bean name 'requestMappingHandlerAdapter': no URL paths identified
Rejected bean name 'mvcConversionService': no URL paths identified
Rejected bean name 'mvcValidator': no URL paths identified
Rejected bean name 'httpRequestHandlerAdapter': no URL paths identified
Rejected bean name 'simpleControllerHandlerAdapter': no URL paths identified
Rejected bean name 'handlerExceptionResolver': no URL paths identified
Rejected bean name 'configureInternalResourceViewResolver': no URL paths identified
Rejected bean name 'environment': no URL paths identified
Rejected bean name 'systemProperties': no URL paths identified
Rejected bean name 'systemEnvironment': no URL paths identified
Rejected bean name 'servletContext': no URL paths identified
Rejected bean name 'contextParameters': no URL paths identified
Rejected bean name 'contextAttributes': no URL paths identified
Rejected bean name 'importRegistry': no URL paths identified
Rejected bean name 'messageSource': no URL paths identified
Rejected bean name 'applicationEventMulticaster': no URL paths identified
Finished creating instance of bean 'beanNameHandlerMapping'
Creating shared instance of singleton bean 'resourceHandlerMapping'
Creating instance of bean 'resourceHandlerMapping'
Returning cached instance of singleton bean 'delegatingWebMvcConfiguration'
Eagerly caching bean 'resourceHandlerMapping' to allow for resolving potential circular references
Mapped URL path [/css/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
Mapped URL path [/scripts/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
Mapped URL path [/images/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
Finished creating instance of bean 'resourceHandlerMapping' 
```

这是 WebAppContextConfig.java

```
package com.example;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;
import org.springframework.web.servlet.view.InternalResourceViewResolver;

@Configuration
@EnableWebMvc
@ComponentScan(basePackages = "com.example")
public class WebAppContextConfig extends WebMvcConfigurerAdapter{
//Resolve logical view names to .jsp resources in /WEB-INF/views directory

@Bean
public InternalResourceViewResolver configureInternalResourceViewResolver() {
    InternalResourceViewResolver resolver = new InternalResourceViewResolver();
    resolver.setPrefix("WEB-INF/jsp/");
    resolver.setSuffix(".jsp");
    return resolver;
}

@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
    registry.addResourceHandler("/scripts/**").addResourceLocations("/scripts/");
    registry.addResourceHandler("/css/**").addResourceLocations("/css/");
    registry.addResourceHandler("/images/**").addResourceLocations("/images/");
}
} 
```

这是 WebAppInitializer.java

```
 package com.example;

 import javax.servlet.ServletContext;
 import javax.servlet.ServletException;
 import javax.servlet.ServletRegistration;

 import org.springframework.context.annotation.ComponentScan;
 import org.springframework.web.WebApplicationInitializer;
 import org.springframework.web.context.ContextLoaderListener;
 import org.springframework.web.context.support.AnnotationConfigWebApplicationContext;
 import org.springframework.web.servlet.DispatcherServlet;
 import org.springframework.web.servlet.config.annotation.DefaultServletHandlerConfigurer;

 public class WebAppInitializer implements WebApplicationInitializer {

/* (non-Javadoc)
 * @see org.springframework.web.WebApplicationInitializer#onStartup(javax.servlet.ServletContext)
 */
@Override
public void onStartup(ServletContext servletContext) throws ServletException {
    AnnotationConfigWebApplicationContext rootContext = new AnnotationConfigWebApplicationContext();
    rootContext.register(WebAppContextConfig.class);
    servletContext.addListener(new ContextLoaderListener(rootContext));

      AnnotationConfigWebApplicationContext dispatcherContext = 
                new AnnotationConfigWebApplicationContext();
              dispatcherContext.register(WebAppContextConfig.class);

    ServletRegistration.Dynamic dispatcher = servletContext.addServlet("dispatcher", new DispatcherServlet(rootContext));
    dispatcher.setLoadOnStartup(1);
    dispatcher.addMapping("/");

    DefaultServletHandlerConfigurer defaultConfig = new DefaultServletHandlerConfigurer(servletContext);
    defaultConfig.enable();

}

} 
```

还有什么好地方可以寻找基于 java 的 spring mvc 配置吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:43:31.223

这不是根本原因@ravi，但我确实看到了一些我想首先强调的问题：

一种。您似乎通过 ContextLoaderListener 和 Dispatcher servlet 两次加载 Spring Java Config 文件，仅通过 ContextLoaderListener 执行此操作，您可以通过这种方式定义 DispatcherServlet - 只加载一个空上下文（理想情况下有两个 java 配置 -一个用于核心应用程序，一个用于 Web 配置）：

```
ServletRegistration.Dynamic dispatcher = servletContext.addServlet("dispatcher", new GenericWebApplicationContext());
dispatcher.setLoadOnStartup(1);
dispatcher.addMapping("/"); 
```

湾。您可以使用 log4j 启​​用调试模式并查看还记录了什么 - 如果信息不足，请在跟踪级别记录。

C。内部视图解析器路径看起来有点错误 - 您缺少正向“/”：

```
resolver.setPrefix("/WEB-INF/jsp/"); 
```

你能不能试试这些，看看你现在看到了什么。

# objective-c - UITableView，无法识别的选择器发送到实例

> ID：10885845
> 
> 赞同：0
> 
> 时间：2012-06-04T17:56:40.593
> 
> 标签：objective-c

我创建了一个 TableView 作为一个 UIView 的子视图（称为 UIViewA），这个 UIView 也是主 ViewController 的子视图。当我尝试实现`didSelectRowAtIndexPath`Tableview 的“”功能时，程序崩溃，并显示“无法识别的选择器发送到实例”的信息。

tableView 的 Delegate 设置为“文件的所有者”，即 UIViewA。我还尝试添加一些异常断点，但它表明异常点是

> 返回 UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));

这是在`main.m`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:03:35.660

如果要创建自定义表格视图，这应该是`UITableView`. 相反，您实际上是在创建`UIViewController`.

显然`UIViewController`没有命名方法`didSelectRowAtindexPath`（我想你`UIViewA`也没有）。这就是坠机的原因。

[表视图编程指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html#//apple_ref/doc/uid/TP40007451)

# c# - c# 访问 c++ dll 时尝试读取或写入受保护的内存错误

> ID：10885846
> 
> 赞同：1
> 
> 时间：2012-06-04T17:56:43.130
> 
> 标签：c#, c++, visual-c++, c#-4.0, interop

下面是c++ dll类

```
class A
{
  public: 
   int __thiscall check(char *x,char *y,char *z);
  private:
   B *temp;
};

class B
{
  friend class A;
  Public:
   B();
   B(string x,string y,string z);
   ~B();
  private:
   string x;
   string y;
   string z;
}; 
```

c++ dll方法定义如下

```
__declspec(dllexport) int __thiscall A::check(char *x,char *y,char *z)
{
  temp=new B(x,y,z); //getting error at this point when i am assigning memory to temp
  return 1;
} 
```

c# dll导入是这样的

```
[DllImport("MyDll.dll", CallingConvention = CallingConvention.ThisCall, ExactSpelling = true, EntryPoint = "check")]
public static extern int check(IntPtr val,string x,string y,string z); 
```

c++ dll 构建工作正常，但是当 c# 调用 c++ dll 方法时，它看起来也不错，当它进入函数并在方法的第一行中，它尝试为已在类 A 中声明为类指针的临时指针创建内存B 是私有的。它给出的错误是

```
Attempted to read or write protected memory. This is often an indication that other memory is corrupt. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:06:30.793

`__declspec(dllexport)`应该在类（例如 class ）`__declspec(dllexport) MyClass`上，而不是在其成员方法上。

入口点应该是一个错位的 C++ 名称（例如`2@MyClass@MyMethod?zii`），而不是“ `check`”。
您可以使用[Depends.exe](http://www.dependencywalker.com/)来查找名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:20:34.657

我发现了问题，问题出在 C++ 中的检查函数上。温度应该是这样创建的。

```
int __thiscall A::check(char *x,char *y,char *z)
{
  A *xyz=new A();
  A->temp=new B(x,y,z); // doing this eliminates the issue.
  return 1;
} 
```

感谢所有在这方面帮助我的人。

# jquery - AJAX 未显示在 Firebug 控制台中

> ID：10885847
> 
> 赞同：0
> 
> 时间：2012-06-04T17:56:44.703
> 
> 标签：jquery, ajax

免责声明：不确定这是否与 WordPress 相关。

我正在按照一个[简单的教程](http://pippinsplugins.com/process-ajax-requests-correctly-in-wordpress-plugins/?doing_wp_cron=1338820330#comment-12549)来检查 AJAX 是否在我的 WordPress 本地主机中工作。

我的 ajax-test.js ：

```
jQuery(document).ready( function($){
    $(".ajax-link").click( function(){
        var data = {
            action: 'test_response',
            post_var: 'this will be echoed back'
        };
        $.post(the_ajax_script.ajaxurl, data, function(response) {
                                                       alert(response);
                                                       });
        return false;
    });
}); 
```

在我的插件中，我将脚本添加到 wp_print_scripts() 并添加处理函数：

```
function test_ajax_load_scripts(){
    wp_enqueue_script("ajax-test", plugin_dir_url( __FILE__ ) . 'ajax-test.js', array( 'jquery' ) );
    wp_localize_script('ajax-test', 'the_ajax_script', array( 'ajaxurl' => admin_url('admin-ajax.php') ) );
}
add_action('wp_print_scripts', 'test_ajax_load_scripts');

function text_ajax_process_request(){ 
    if(isset($_POST["post_var"])){
        $response = $_POST["post_var"];
        echo $response;
        die();
    }
}
add_action('wp_ajax_test_response', 'test_ajax_process_request'); 
```

我得到带有 href="#" 的链接输出，然后单击它，它会将我带到页面顶部。我检查了 Firebug，我可以确认 ajax-test.js 已加载到标题中。控制台中没有任何内容。

我还能如何调试为什么警报没有发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:00:52.270

如果您返回 false 并且页面仍然跳到顶部，那么您将收到一个 javascript 错误。很可能`$.post`失败了。尝试向 中添加错误回调以`$.post`获取更多信息。

```
$.post(...).fail(function(){
    console.log(arguments)
}); 
```

另一种可能性是甚至没有到达点击处理程序。在这种情况下，请确保选择器正确，并且在运行代码时该元素存在于页面上。如果元素是由 ajax 或 javascript 添加的，您将需要在添加该元素后运行此代码，或者您需要使用事件委托附加事件`.on`或`.delegate`

```
$(document).on("click",".ajax-link",function(){...}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:02:24.070

您的事件连接功能需要一个[`e.preventDefault()`](http://api.jquery.com/event.preventDefault/)：

```
$(".ajax-link").click( function(e){ //<--------- e
    e.preventDefault(); //<-------- preventDefault()   
    var data = {
        action: 'test_response',
        post_var: 'this will be echoed back'
    };
    $.post(the_ajax_script.ajaxurl, data, function(response) {
        alert(response);
    });        
}); 
```

# javascript - Phonegap deviceNotReady 事件？

> ID：10885851
> 
> 赞同：1
> 
> 时间：2012-06-04T17:56:52.613
> 
> 标签：javascript, ios, cordova

像[其他人](https://stackoverflow.com/questions/10347539/detect-between-a-mobile-browser-or-a-phonegap-application)一样，我试图区分在移动浏览器和 phonegap webuiview 中运行的 javascript 代码之间的区别。标准解决方案是等待`deviceready`事件触发，因为在它触发后，您知道您处于 phonegap 中。但是你要等多久？

我有想要尽早运行的代码，因为我不希望我的用户坐在那里等待。但是我不想在 phonegap 初始化之前运行它，如果它要初始化的话。我正在寻找的是一个`devicenotready`事件，它会在之后的`cordova.js`代码运行并确定没有任何东西可以附加时触发。或者我可以轮询一些变量来区分科尔多瓦仍在加载和科尔多瓦放弃尝试加载之间的区别。有区别吗？

我讨厌这个解决方案，但这是我想出的最好的解决方案。请告诉我有比这更好的东西：

```
function whenLoaded(callback,timeout) {
    var when_loaded_needs_running = true;
    document.addEventListener('deviceready', function() {
        if( when_loaded_needs_running ) {
            when_loaded_needs_running = false;
            callback();
        } else {
            console.log("deviceready fired too late. whenLoaded already ran.");
        }
    });
    window.setTimeout(function() {
        if( when_loaded_needs_running ) {
            when_loaded_needs_running = false;
            console.log("deviceready didn't fire after "+timeout+"ms. running whenLoaded anyway.");
            callback();
        }
    }, timeout);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:31:21.523

一个更简单的测试是查看`cordova`JavaScript 全局是否可用 - 无需等待事件，您可以立即执行（只要它在理论上`<script>`包含 cordova.js 之后执行）。根据您运行的 PhoneGap 版本，您可能需要测试几个全局变量之一。

应该很简单：

```
if(cordova || Cordova || PhoneGap) {
  alert('hey im in a phonegap webview!');
} else {
  alert('regular old browser, aw shucks');
} 
```

# javascript - 为什么我的视图在 Backbone 中的数组长度不正确？

> ID：10885854
> 
> 赞同：1
> 
> 时间：2012-06-04T17:57:06.877
> 
> 标签：javascript, jquery, backbone.js

我有 3 个视图，ViewA 包含 ViewB 子项的集合，每个 ViewB 包含 ViewC 子项的集合。

```
ViewA: Backbone.View.extend({
  viewBChildren: [],
  initialize: function() {
    // Do stuff
    var self = this;
    // Generate children
    this.model.get("CollectionB").each(function(b) {
      var viewB = new ViewB({
        // set properties
      });
      self.viewBChildren.push(viewB);
      console.log(self.viewBChildren.length); // Prints out correctly
    });
  }
});

ViewB: Backbone.View.extend({
  viewCChildren: [],
  initialize: function() {
    var self = this;
    this.model.get("CollectionC").each(function (c) {
      var viewC = new ViewC({
        // Set properties      
      });
      self.viewCChildren.push(viewC);
      console.log(self.viewCChildren.length); // Prints out a running total
    });
  }
}); 
```

因此，如果我在 CollectionB 中有 5 个项目，我希望`viewBChildren.length`也是 5 个。这是正确的并且工作正常。

我的问题是打印出来的时候`viewCChildren.length`。如果 CollectionB 中的每个项目都有 5 个孩子，我希望它会打印`5`五次。相反，它会打印出运行总数 5、10、15、20、25。

没有其他代码触及这些子集合，也没有其他方法修改它。我的视图的初始化方法中的两个调用是唯一影响集合的东西。

我觉得我的范围有问题，但我看不出我做错了什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T19:20:07.690

您在视图中定义的属性：

```
var V = Backbone.View.extend({
    p: [ ],
    ...
}); 
```

没有被深度复制到实例，它们被附加到`V`的原型，因此在`V`它的所有实例之间共享。

考虑到这一点，我们可以看到发生了什么。每次你这样做：

```
self.viewCChildren.push(viewC); 
```

你实际上在做`ViewB.prototype.viewCChildren.push(viewC)`，这就是为什么你得到一个运行总数。

例如，如果我们这样做（[http://jsfiddle.net/ambiguous/Z3QC6/](http://jsfiddle.net/ambiguous/Z3QC6/)）：

```
var V = Backbone.View.extend({
    a: [ ],
    initialize: function() {
        this.a.push('pancakes');
    }
});

// The setTimeouts are to kludge around the asynchronous nature
// of some console.logs. Play with the times if you're seeing
// two element arrays for all the console.log calls.
var v1, v2;
console.log(V.prototype.a);
setTimeout(function() {
    v1 = new V();
    console.log(v1.a);
    console.log(V.prototype.a);
}, 100);
setTimeout(function() {
    v2 = new V();
    console.log(v1.a);
    console.log(v2.a);
    console.log(V.prototype.a);
}, 500); 
```

然后我们将在控制台中得到这个：

```
[]
["pancakes"]
["pancakes"]
["pancakes", "pancakes"]
["pancakes", "pancakes"]
["pancakes", "pancakes"] 
```

而不是

```
[]
["pancakes"]
[]
["pancakes"]
["pancakes"]
[] 
```

你可能期待的。

如果要将数组用作视图实例属性，则应将其设置为`initialize`：

```
initialize: function() {
    this.viewCChildren = [ ];
} 
```

例如，这个（[http://jsfiddle.net/ambiguous/BjCvf/](http://jsfiddle.net/ambiguous/BjCvf/)）：

```
var V = Backbone.View.extend({
    a: [ ],
    initialize: function() {
        this.a = [ ];
        this.a.push('pancakes');
    }
});
// The rest as above 
```

将产生这个控制台输出：

```
[]
["pancakes"]
[]
["pancakes"]
["pancakes"]
[] 
```

# ruby - 在引擎中使用 CanCan。能力.rb 示例

> ID：10885855
> 
> 赞同：2
> 
> 时间：2012-06-04T17:57:08.980
> 
> 标签：ruby, cancan, rails-engines

我是 Rails 开发的新手，我正在尝试创建我的第一个引擎。该引擎可以使用[CanCan](http://rubygems.org/gems/cancan)进行授权和限制用户的权限。

我的引擎中有一些权限，我想在我的主应用程序中继承它们。

例如：

`app/models/my_engine/ability.rb`我的引擎中的文件

```
module MyEngine
  class Ability
    include CanCan::Ability
    def initialize(user)
      user ||= MyEngine::User.new # guest user
      if user.role? "Admin"
        can :manage, :all
      else
        can :read, :all
      end
    end
  end
end 
```

`app/models/ability.rb`我的主应用程序中的文件

```
class Ability < MyEngine::Ability
  def initialize(user)
    user ||= MyEngine::User.new # guest user
    super(user)
    can :create, SomeModel if user.manager?
  end
end 
```

文件`app/controllers/my_engine/application_controller.rb`

```
module MyEngine
  class ApplicationController < ActionController::Base
    def current_ability
       @current_ability ||= MyEngine::Ability.new(current_user)
    end
  end
end 
```

但这不起作用 - 如果我`can?`在引擎中使用该方法，我会收到此错误：

```
undefined method `can?' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:01:53.867

关于 github 问题的一些讨论：[ryanb/cancan](https://github.com/ryanb/cancan/pull/424)

# ruby - 如何订购resque流程作业

> ID：10885856
> 
> 赞同：0
> 
> 时间：2012-06-04T17:57:13.783
> 
> 标签：ruby, ruby-on-rails-3, resque

我有一个队列，它处理一些通过 JSON 发送的“产品”。我以 {1, 2, 3, 4} 之类的顺序接收它们，但 resque 在 {1, 3, 2, 4} 中处理它们。他们订购的resque过程非常重要，因为旧版本`Product`可以覆盖已经处理过的新版本
有没有办法告诉resque `process {job} orderede by {job.field_I_want}`？

编辑：排队工作的代码

```
def produto
        if params[:json]
#          upload = params[:json]
#          content = upload.read
#          parsed_json = JSON(content)

          parsed_json = JSON(params[:json])
          parsed_json['idFila'] = params[:idFila]

          logger.info parsed_json

          Resque.enqueue(ProdutoWorker, parsed_json)
          render json: ActiveSupport::JSON.encode(Retorno.new(:status => "OK", :mensagem => "Produto recebido")), :status => :ok
        else
          render json: ActiveSupport::JSON.encode(Retorno.new(:status => "Erro", :mensagem => "Sem JSON")), :status => :not_found
        end

        rescue => exception
          render json: ActiveSupport::JSON.encode(Retorno.new(:status => "Erro", :mensagem => "#{exception}")), :status => :error
      end #Produto 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:45:09.217

resque 按照排队的顺序处理作业，您可以发布使作业排队的代码吗？

# android - 如何在扩展 Activity 的类以外的单独类中动态创建 Android 布局

> ID：10885857
> 
> 赞同：0
> 
> 时间：2012-06-04T17:57:27.013
> 
> 标签：android, android-layout, android-widget

我有一个活动类，它具有带有 TextView 的垂直方向的线性布局。现在我需要动态地向这个布局添加一个布局。目前我有一个名为 MainActivity 的活动。现在我需要创建一个返回不扩展 Activity 的 Layout 的类。有没有办法可以做到这一点。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:38:37.993

只需扩展您需要的布局类型并让它构建您想要的布局。

```
public class MyLayout extends LinearLayout {......} 
```

# opengl - PyOpenGL 立方体贴图贴图

> ID：10885858
> 
> 赞同：0
> 
> 时间：2012-06-04T17:57:39.837
> 
> 标签：opengl, pyopengl

我尝试使用 texture_2D 在我的立方体上推送纹理。那没问题。

但是当我使用 TEXTURE_CUBE_MAP 时，纹理是不可见的。只是一个黑色立方体。

有谁能够帮我？

```
#### INIT FUNCTION
textureIDs = glGenTextures(1)                                                                                                                                                                                                       

glBindTexture(GL_TEXTURE_CUBE_MAP, textureIDs)                                                                                                                                                                                      
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE)                                                                                                                                                           
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE)                                                                                                                                                           
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE)                                                                                                                                                           
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MAG_FILTER, GL_LINEAR)                                                                                                                                                              
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_LINEAR)   

glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X, 0, GL_RGB, imgRaw.size[0], imgRaw.size[1], 0, GL_RGB, GL_UNSIGNED_BYTE, img)                                                                                                           

..... (for the other five also)

####DISPLAY FUNCTION
glEnable(GL_TEXTURE_GEN_S)                                                                                                                                                                                                          
glEnable(GL_TEXTURE_GEN_T)                                                                                                                                                                                                          
glEnable(GL_TEXTURE_GEN_R)                                                                                                                                                                                                          
glEnable(GL_TEXTURE_CUBE_MAP)                                                                                                                                                                                                       

glEnableClientState(GL_VERTEX_ARRAY)              

myVBO.bind()                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  

glUseProgram(program) #shader frag and vert                                                                                                                                                                                                               
varLocation = glGetUniformLocation(program, "mvpMatrix")                                                                                                                                                                            
glUniformMatrix4fv(varLocation , 1, GL_TRUE, mvpMat.tolist())                                                                                                                                                                       

glVertexPointer(3, GL_FLOAT, 32, myVBO)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
glBindTexture(GL_TEXTURE_CUBE_MAP, textureIDs)                                                                                                                                                                                     
glDrawArrays(GL_QUADS, 0 ,len(data))                                                                                                                                                                                                
myVBO.unbind() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:04:48.613

[立方体贴图](http://www.opengl.org/wiki/Cubemap_Texture)不是字面上的“将纹理放在立方体上” 。它是[一种纹理，独立于 2D、3D 等纹理类型。](http://www.opengl.org/wiki/Texture#Theory)

2D 纹理是您使用 2D 空间中的位置来访问的 2D 图像。3D 纹理是您使用 3D 空间中的位置来访问的 3D 图像。立方体贴图是一组 6 个 2D 图像，您可以使用*3D 方向*访问这些图像。想象自己坐在一个立方体的中心。每个方向都有那个立方体上的一个位置。这就是访问具有给定方向的立方体贴图所获得的颜色。

# css - Print.css 从网页打印表格

> ID：10885863
> 
> 赞同：2
> 
> 时间：2012-06-04T17:58:14.600
> 
> 标签：css

我在尝试从网页打印表格时遇到问题。当我尝试打印表格时，内容会缩小到页面的四分之一，并显示水平和垂直滚动条。

如何以与网页上显示的方式相同的方式打印表格。是否有任何有用的网站或教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:08:36.163

如果您发布当前的 print.css 样式表会有所帮助，您可以尝试在表格元素中添加类似的内容

```
/* Remove unwanted elements */
#header, #nav, .noprint
{
display: none;
}

/* Ensure the content spans the full width */
#container, #container2, #content
{
width: 100%; margin: 0; float: none; overflow: hidden;
} 
```

如[http://www.webcredible.co.uk/user-friendly-resources/css/print-stylesheet.shtml所示](http://www.webcredible.co.uk/user-friendly-resources/css/print-stylesheet.shtml)

# jquery - 在更改事件的选项下拉列表中从选定状态中删除空格

> ID：10885866
> 
> 赞同：0
> 
> 时间：2012-06-04T17:58:30.710
> 
> 标签：jquery, drop-down-menu, spaces, selected

在数据查询中，我得到一个树结构：

```
<select name="parent" id="select_parent">
<option> >Administrator </option>
<option> &nbsp;>Manager </option>
<option> &nbsp;&nbsp;>Sales </option>
<option> &nbsp;&nbsp;>Operator </option>
<option> &nbsp;>Promoter </option>
</select> 
```

显然这在组合框选项上看起来不错，但是当我选择一个值时......这显示为完整的空格。我想要的是当它只是一个选定的值时删除空格。

我试过这个：

```
$('#select_parent').bind("change",function()
{
    var s = $('#select_parent option:selected').html();
    $('#select_parent option:selected').html(s.replace(/&nbsp;/g, ''));
}); 
```

但是去掉空格后……他们会回来看item是否不再有selected属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:15:42.433

虽然这看起来很奇怪，但我认为这正是你想要的。您可以将初始值（带空格）保存到每个选项的数据中，并使用存储的值返回默认值。

```
$("#select_parent"​​).on("change", function() {
    $(this).children().text(function(i, value) {
        if (this.selected) return $.trim(value);
        return $(this).data("def_value");
    });
}).children().each(function() {
    $(this).data("def_value", $(this).text());
});​​​​​​​ 
```

**演示：http:** [//jsfiddle.net/BkW9h/](http://jsfiddle.net/BkW9h/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:35:34.913

如果您希望仅在选择的显示文本中删除间距，但仍以间距显示选定的列表项，您可以尝试以下技巧：

```
$('#select_parent').bind("change", function() {
    var space_offset = 8;
    var matches = $('#select_parent option:selected').text().match(/\s+?/g);
    var n_spaces = (matches) ? matches.length : 0;
    $(this).css('text-indent', -(n_spaces*space_offset));
}); 
```

的text 属性是不可变的，因此我做了一个小的 css hack，根据它有多少空格`select`来取消缩进 ' 显示中的选定选项的文本。`select`

[***JSFiddle***](http://jsfiddle.net/ult_combo/RvQfH/6/)

如果您的页面使用不同的字体或字体大小，请不要忘记删除除`&nbsp;`insde`option`文本之外的任何额外间距，并调整以匹配空格字符的宽度（以像素为单位）。`space_offset`

**编辑：**我仅在 Chrome 上对其进行了测试，对于 Firefox，它需要额外的 css hacking。

**编辑：**好的，这是我的最终版本，没有任何 css hack：

```
var trig = ($.browser.mozilla) ? 'click' : 'mousedown';
$(function() {
    $('#select_parent').on("change", function() {
        var sel = $('#select_parent option:selected');
        $(this).data('cur_val', sel);
        var display = sel.clone();
        display.text($.trim(display.text()));
        sel.replaceWith(display);
        $(this).prop('selectedIndex', display.index());
    }).on(trig, function() {
        if ($(this).prop('selectedIndex') == 0)
            return;
        var sel = $('#select_parent option:selected');
        sel.replaceWith($('#select_parent').data('cur_val'));
        $(this).prop('selectedIndex', 0);
    });
    $('#select_parent').change();
}); 
```

[**JSFiddle**](http://jsfiddle.net/ult_combo/UhwAG/2/)

在 Firefox、Chrome、IE 和 Opera 上测试。也应该在 Safari 上工作，因为它是基于 Webkit 的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-17T13:48:31.683

我想这会对你有所帮助。

```
$(function() {
    $('#select_parent').on("change", function() {
        var sel = $('#select_parent option:selected');
        var display = sel.clone();
        $(".dummy-label").text($.trim(display.text()));   
    });   
    $('#select_parent').change();
});
```

```
.dummy-label {
  position:absolute;
  background : #fff;
  width : 125px;
  height:16px;
  top:9px;
  left:10px;
  pointer-events: none
}
select {
  width: 150px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<span class="dummy-label"></span>
<select name="parent" id="select_parent">
<option selected="selected">Select an option</option>
<option>Administrator</option>
<option>&nbsp;Manager</option>
<option >&nbsp;&nbsp;Sales</option>
<option>&nbsp;&nbsp;Operator</option>
<option>&nbsp;Promoter</option>
</select>
```

[http://jsfiddle.net/Z48wF/688/](http://jsfiddle.net/Z48wF/688/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-28T08:23:51.870

我已经尝试过了，发现这将适用于最新的 jquery。

```
isFirefox = typeof InstallTrigger !== 'undefined';
    var trig = (isFirefox) ? 'click' : 'mousedown';
    $(function() {
    		$('#select_parent').on("change", function() {
    			var sel = $('#select_parent option:selected');
    			$(this).data('cur_val', sel);
    			var display = sel.clone();
    			display.text($.trim(display.text()));
    			sel.replaceWith(display);
    			$(this).prop('selectedIndex', display.index());
    		}).on(trig, function() {
    			if ($(this).prop('selectedIndex') == 0)
    				return;
    			var sel = $('#select_parent option:selected');
    			sel.replaceWith($('#select_parent').data('cur_val'));
    			$(this).prop('selectedIndex', 0);
    		});
    		$('#select_parent').change();
    	});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<select name="parent" id="select_parent">
<option selected="selected">Select an option</option>
<option>>Administrator</option>
<option>&nbsp;>Manager</option>
<option>&nbsp;&nbsp;>Sales</option>
<option>&nbsp;&nbsp;>Operator</option>
<option>&nbsp;>Promoter</option>
</select>
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-08-22T10:10:58.193

这是 Mozilla Firefox 的快速解决方案：

`<option style='padding-left:<?=$level*10?>px'>option</option>`

这篇文章[Indenting HTML options](http://blog.christopherschultz.net/index.php/2009/02/10/indenting-html-select-options/)提供了选项的广泛概述。结论：看起来使用`&nbsp;`是所有浏览器的最佳解决方案，使用 CSS 样式将增强某些浏览器的显示效果，但不会干扰其他浏览器。

# c# - ASP.Net MVC4 RC Web-Api Odata 过滤器不适用于 IQueryable

> ID：10885868
> 
> 赞同：14
> 
> 时间：2012-06-04T17:58:42.367
> 
> 标签：c#, .net, asp.net-web-api

在 ASP.net MVC4 RC 的 Web-api 中，我有一个像以前一样定义的 Get 操作：

```
public IQueryable<Person> Get()
    {
        var lst = ctx.GetListFromDB();
        return lst.AsQueryable();
    } 
```

如果我调用如下网址，那么我之前正在运行它： `/api/people?$inlinecount=allpages&$format=json&$top=50&$filter=(State+eq+'AL'+and+Zip+eq+'35242')`

它将对对象进行过滤，自测试版以来是否发生了一些变化会破坏这一点？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-11T02:44:00.707

您必须将 [Queryable] 属性放在方法上以允许过滤。描述更改的发行说明在[这里](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc317096197)。

更新：在 RTM 中，他们似乎已将此功能分离到自己的程序集中，因此您必须包含对 Microsoft 的 ASP.NET Web API OData 程序集的引用。您可以在 Nuget [https://nuget.org/packages/Microsoft.AspNet.WebApi.OData上找到最新版本](https://nuget.org/packages/Microsoft.AspNet.WebApi.OData)

更新：在最新版本中，Queryable 属性已重命名为 EnableQuery。有关更改的更多信息，请参阅[http://blogs.msdn.com/b/webdev/archive/2014/03/13/getting-started-with-asp-net-web-api-2-2-for-odata- v4-0.aspx](http://blogs.msdn.com/b/webdev/archive/2014/03/13/getting-started-with-asp-net-web-api-2-2-for-odata-v4-0.aspx)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-05T17:47:00.370

所以，显然这个功能已经从最终的发布时间表中删除了。我想这意味着我们现在需要修改现有的 WebAPI 操作方法以包含必要的过滤、排序和分页参数。确实非常可悲。

[http://aspnetwebstack.codeplex.com/SourceControl/changeset/changes/af11adf6b3c5](http://aspnetwebstack.codeplex.com/SourceControl/changeset/changes/af11adf6b3c5)

...请不要因为我是坏消息的承担者而对我投反对票；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T17:02:13.933

据我所见（2012 年 9 月 20 日），您需要[https://nuget.org/packages/Microsoft.AspNet.WebApi.OData/0.1.0-alpha-120815](https://nuget.org/packages/Microsoft.AspNet.WebApi.OData/0.1.0-alpha-120815) Nuget 包才能使其正常工作。不幸的是，它仍处于预发布阶段。[Queryable] 属性在此包中。

我还没有找到很好的信息。

# cocoa - Cocoa 连接套件和 FTP

> ID：10885869
> 
> 赞同：0
> 
> 时间：2012-06-04T17:58:52.077
> 
> 标签：cocoa, ftp

认为这是一个很长的镜头，但我不得不问。

寻找从我的 Cocoa 应用程序中将文件写入/放置到网站的最简单方法。我当然没有问题读取文件，但是在进行更改后，我希望能够将文件放回服务器上。

普遍的共识似乎是使用 Connection Kit，所以我从他们的网站下载了所有源文件，但是当我尝试编译时，我最终得到不少于 118 个错误和 43 个警告。没有找到框架，缺少文件，还有一大堆其他问题，其中大部分完全超出了我目前的理解水平。

a）是否有框架（或多个框架）的预编译版本，我可以直接放入我的系统而不是整理这些混乱？

或者

b）如果有人有替代解决方案，是否有更简单的途径可以从可可应用程序中将文件写入网站？

我想这就是我多年前离开我的编码生涯并且没有跟上时代变化的结果:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:24:01.250

这些天我基本上运行 ConnectionKit。如果您的需求纯粹是 FTP，我强烈建议您改用 CHRLHandle 的开发分支，并改用 CURLFTPSession 类：

[https://github.com/karelia/CurlHandle](https://github.com/karelia/CurlHandle)

# c++ - 为什么它会导致运行时错误，字符为 int 而没有初始化？

> ID：10885870
> 
> 赞同：2
> 
> 时间：2012-06-04T17:58:52.867
> 
> 标签：c++

首先，我为糟糕的英语道歉。

在下一个简单的程序中，

```
void fx(int *a){
    for(int i=*a; i<='Z'; i++)
    printf("%c", i);
}
int main(){
    int a;
    scanf("%c", &a);
    fx(&a);
    return 0;
} 
```

我在运行时输入了一个大写字母，导致FATAL错误，通过kill proccess解决。

它不会在下一个代码中引起任何问题。

```
//except fx()
int main(){
    int a;
    scanf("%c", &a);
    return 0;
} 
```

或者

```
//initialize int a
void fx(int *a){
    for(int i=*a; i<='Z'; i++)
    printf("%c", i);
}
int main(){
    **int a = 0;**
    scanf("%c", &a);
    fx(&a);
    return 0;
} 
```

我知道输入字符应该是'char'。但我无法理解上述情况。

发生了什么？

PS。我使用 VS2010，C++

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T18:03:16.803

这之间的区别

```
int a;
scanf("%c", &a); 
```

还有这个

```
int a = 0;
scanf("%c", &a); 
```

是`int a;`声明一个未初始化的`a`. 所以它可以是任何东西。当你写

```
scanf("%c", &a); 
```

在 uninitialized 上`int`，您只设置最高位，因为`%c`告诉`scanf`将输入写入 a `char`，因此只会写入第一个字节。这可能会导致一些奇怪的行为，包括你刚才所说的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:35:07.807

您已经声明了一个未初始化的 int ***a***，并将它的最低字节设置为某个值。结果可能是一个非常大的数字，因为最高字节（无论是 16 位还是 32 位整数）未分配/未初始化。

当您将它传递给函数时，这将使用 int **a**表示的完整范围。然后，您设置了一个循环，停止条件“直到它到达'Z'”，顺便说一句，它将被正确提升为整数（即​​所有最上面的未使用字节为 0）。

在那个周期中，您将迫使糟糕的 printf 尝试输出一个从 0 到 0xff 的字节，数十亿次，具体取决于***i***翻转到“Z”可能需要多长时间......显然在那个 printf 代码的某个地方，有人不喜欢不可打印的（不仅仅是非ascii）代码。

# php - 在“主题选项”页面中放置 Wordpress“站点标题”功能

> ID：10885871
> 
> 赞同：0
> 
> 时间：2012-06-04T17:58:56.440
> 
> 标签：php, html, css, wordpress, themes

我在 Wordpress 中创建了一个“ *theme-options.php* ”页面，可以在 WP API“*外观*”设置菜单下找到该页面。在**此**页面上，我想包含**来自***Settings* > *General-Options*页面（*站点标题*和*标语/副标题*）的两件事，可以在此处（在我的*主题选项*页面上）进行编辑并保存..

我该如何实现这一目标？到目前为止，我有这个，它显示了所需的框和信息，但没有正确保存/更新。我错过了什么？

**主题选项.php**：

```
// Build our Page
function build_options_page() {

// Page Structure
   ob_start(); ?>
     <div class="wrap">
       <?php screen_icon();?>
       <h2>Theme Options</h2>

       <p><b><label for="blogname"><?php _e('Site Title') ?></label></b></p>
       <p><input name="blogname" type="text" id="blogname" value="<?php form_option('blogname'); ?>" class="regular-text" />  
       <span class="description"><?php _e('The name of your site.') ?></span></p> 
       <br />

       <p><b><label for="blogdescription"><?php _e('Tagline or Subheading') ?></label></b></p>
       <p><input name="blogdescription" type="text" id="blogdescription"  value="<?php form_option('blogdescription'); ?>" class="regular-text" /> 
       <span class="description"><?php _e('A brief description of your site.') ?></span></p> 
       <p class="submit">
       <input name="Submit" type="submit" class="button-primary" value="<?php esc_attr_e('Save Changes'); ?>" />
       </p>

     </div>
   <?php
   echo ob_get_clean();
   ?>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T22:32:41.730

此示例使用 Profile 页面来显示和修改`blogname`and `blogdescription`，但应该非常直接地移植到您的代码中。

```
add_action( 'show_user_profile', 'show_extra_profile_fields', 1 );
add_action( 'edit_user_profile', 'show_extra_profile_fields', 1 );

function show_extra_profile_fields( $user ) { 
    ?>
    <table class="form-table">  
        <tr>
            <th><label for="user_address">Site Title</label></th>
            <td>
                <input type="text" name="blogname" id="blogname" value="<?php echo esc_attr( get_option('blogname') ); ?>" class="regular-text" /><br />
                <span class="description"></span>
            </td>
        </tr>
        <tr>
            <th><label for="user_zip">Tagline</label></th>
            <td>
                <input type="text" name="blogdescription" id="blogdescription" value="<?php echo esc_attr( get_option( 'blogdescription' ) ); ?>" class="regular-text" /><br />
                <span class="description"></span>
            </td>
        </tr>       
    </table>
    <?php 
}

add_action( 'personal_options_update', 'save_extra_profile_fields' );
add_action( 'edit_user_profile_update', 'save_extra_profile_fields' );

function save_extra_profile_fields( $user_id ) {

    if ( !current_user_can( 'edit_user', $user_id ) )
        return false;

    update_option( 'blogname', $_POST['blogname'] );
    update_option( 'blogdescription', $_POST['blogdescription'] );
} 
```

# android - Android 开发：id 无法解析或不是字段

> ID：10885872
> 
> 赞同：1
> 
> 时间：2012-06-04T17:58:58.213
> 
> 标签：android, r.java-file

所以我刚开始Android开发，我已经碰壁了。我一直在网上和这个网站上四处寻找，但似乎找不到适合我的答案。到目前为止，我在 Activity 文件中所写的内容如下。

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;
public class CommanderActivity extends Activity
{
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
  {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
     final Button button = (Button) findViewById( R.id.button_id );
  }    
} 
```

错误出现在代码的最后一行 ( R.id.button_id )。我的 XML 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
    <TableRow>
    <Button 
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:text="@string/Parameters"
        android:onClick="openParameters" />

    <Button
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:text="@string/Waves"
        android:onClick="openWaves" />
    </TableRow>
    <TableRow>
    <Button
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="@string/MoreParameters"
        android:onClick="openMoreParameters" />
    <Button
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="@string/Status"
        android:onClick="openStatus" />
    </TableRow>
    <TableRow>
    <Button
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="@string/Operations"
        android:onClick="openOperations" />

    <Button
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="@string/Monitor"
        android:onClick="openMonitor" />
    </TableRow>
    <TableRow>
    <Button
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="@string/CEBus"
        android:onClick="openCEBus" />
    <Button
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="@string/Advanced"
        android:onClick="openAdvanced" />
    </TableRow>
</TableLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:15:07.183

只需将以下行添加到您的按钮`android:id="@+id/my_button"`
，然后在您的活动中，您可以使用该方法`findViewById(R.id.my_button);`

希望这可以帮助。我绝对建议您阅读此内容-> [http://developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:06:17.953

您没有在 xml 文件中提供任何 ID。请在您的 xml 文件中提供 id，然后您的错误将得到解决。

谢谢

# xcode - 如何在 Xcode 4 中将 ARMV6 汇编程序代码生成设置为 ARM 模式？

> ID：10885877
> 
> 赞同：0
> 
> 时间：2012-06-04T17:59:27.137
> 
> 标签：xcode, build-settings

在 Xcode 4.3.2 中，我得到了这个构建建议：

*将 ARMV6 汇编代码生成器从 THUMB 升级到 ARM 模式。*

我可以接受或拒绝该建议，并为我做出改变。问题是这个建议似乎只有在我构建并运行了几次之后才会弹出。我想将此设置集成到我的默认设置中，但我在构建设置中找不到可以让我先发制人地执行此操作的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:09:21.490

您想要的设置是“GCC_THUMB_SUPPORT”。我通过检查（通过版本控制）在让 Xcode 为我进行此更改后对项目设置所做的更改来确定这一点，这就是我看到的设置。

我在项目/目标设置中以两种方式看到了这一点：GCC_THUMB_SUPPORT 和 Compile for Thumb

但我非常确信它们是相同的设置。

# android - Twitpic 错误 - 用户名和密码无效

> ID：10885879
> 
> 赞同：4
> 
> 时间：2012-06-04T17:59:46.130
> 
> 标签：android, twitter

我正在使用 twitpic 库在 Twitter 上发布图像，但我得到 - 无效的 twitpic 用户名和密码错误。这个有什么解决办法吗？？witpic的用户名和密码是什么？我只是用我的 Twitter ID 和密码来代替它。

这是我的代码

```
// Create file
    File picture = new File(Environment.getExternalStorageDirectory()+"/image.jpg");
    if(picture.exists())
    {
        System.out.println("Picture accesseds");
    }

    // Create TwitPic object and allocate TwitPicResponse object
    TwitPic tpRequest = new TwitPic("gauravarora90", "gaurav");
    TwitPicResponse tpResponse = null;

    // Make request and handle exceptions                           
    try {
            tpResponse = tpRequest.uploadAndPost(picture, "Hello World!!!");
    } catch (IOException e) {
            e.printStackTrace();
    } catch (TwitPicException e) {
            e.printStackTrace();
    }

    // If we got a response back, print out response variables
    if(tpResponse != null) {         
           tpResponse.dumpVars();
           System.out.println(tpResponse.getStatus());
           if(tpResponse.getStatus().equals("ok")){
                Toast.makeText(getApplicationContext(), "Photo posted on Twitter.",Toast.LENGTH_SHORT).show();
                //picture.delete();
           }
     } 
```

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:13:14.980

试试这个代码：

```
ConfigurationBuilder cb = new ConfigurationBuilder();

             cb.setOAuthConsumerKey(TwitterClass.CONSUMER_KEY);
             cb.setOAuthConsumerSecret(TwitterClass.CONSUMER_SECRET);
             cb.setOAuthAccessToken(tw.getAccessToken());
            AccessToken a = new AccessToken(tw.getAccessToken(),tw.getSecretToken());

             TwitterFactory tf = new TwitterFactory(cb.build());
                t4jTwitter = tf.getInstance();

                t4jTwitter.setOAuthAccessToken(a);

              Configuration conf = new ConfigurationBuilder()                 
                    .setOAuthConsumerKey(TwitterClass.CONSUMER_KEY) 
                    .setOAuthConsumerSecret(TwitterClass.CONSUMER_SECRET) 
                    .setOAuthAccessToken(tw.getAccessToken()) 
               .setOAuthAccessTokenSecret(tw.getSecretToken()) 
                    .build(); 

                OAuthAuthorization auth = new OAuthAuthorization (conf, conf.getOAuthConsumerKey (), conf.getOAuthConsumerSecret (),
                        new AccessToken (conf.getOAuthAccessToken (), conf.getOAuthAccessTokenSecret ()));

               ImageUpload upload = ImageUpload.getTwitpicUploader (TWITPIC_KEY, auth);

                try {
                      //  String    url = upload.upload(new File("/mnt/sdcard/download/3029302084159350163.jpg"));

                                                //result = 1;

                        URL myfileUrl=new URL(strFilePath);

                        HttpURLConnection conn = (HttpURLConnection) myfileUrl
                        .openConnection();
                conn.setDoInput(true);
                conn.connect();
                InputStream is = conn.getInputStream();

                //   String url = upload.upload(new File("/mnt/sdcard/download/3029302084159350163.jpg"), StaticData.strTwitte);

                   String   url = upload.upload(StaticData.strTwitte, is);

                   System.out.println("Image url"+url);
                        System.out.println("Image uploaded");
                        result_img=1;
                        twitter4j.Status status = t4jTwitter.updateStatus(StaticData.strTwitte+"\n"+url);
                        int statusId = (int)status.getId();

                            //Log.d(TAG, "Image uploaded, Twitpic url is " + url);          
                        } catch (Exception e) {        
                            //Log.e(TAG, "Failed to send image");
                              result_img=0;
                              System.out.println("Failed to send image");
                            e.printStackTrace();
                        } 
```

# ruby-on-rails - 创建基于 Rails 的 API。保存对象后有点迷茫

> ID：10885880
> 
> 赞同：0
> 
> 时间：2012-06-04T17:59:46.870
> 
> 标签：ruby-on-rails, json, api, cancan, api-design

我正在创建一个基于 Rails 的 API 来管理短信订阅。有一个`subscriptions`控制器`respond_to :html, :json, :xml`和一个`Subscription`模型。两者都工作正常。

订阅后，用户仍然需要通过在发送到他手机的页面上输入 PIN 来确认他的订阅，所以我正在考虑一个`confirms`控制器来管理它。

我有几个关于如何实现这一点的问题。

(1) 订阅后的正确方法或最佳实践是什么。显示创建的订阅对象（html、json 或 xml，具体取决于它的创建方式）并将确认控制器作为单独的操作进行管理，还是应该重定向到确认控制器？

我想由于 API 响应 json 和 XML，重定向到任何其他页面/控制器不是一个好主意，并且显示创建的对象会更好吗？

(2) 如果是这种情况，我正在使用 CanCan 来管理角色能力。由于订阅属于`User`不需要经过身份验证的所有者（开发人员）`POST`（我知道谁是用户所有者，因为给出的关键字/短代码的组合）并且订阅可以由任何冲浪者进行（不需要用于在创建之前进行身份验证）我如何将创建的对象限制为该冲浪者？

我猜如果`User`已登录，则很容易向他展示该对象，因为它是所有者，但是创建该对象且不需要进行身份验证的常规冲浪者呢？

我没有任何方法可以将冲浪者连接到对象以限制它的能力。

(3) 在创建对象后向普通冲浪者展示对象是个好主意吗？我可能认为这可能不相关，因为当开发人员通过 api 本身的 json 进行操作时？

订阅模型非常简单，它的工作原理是这样的

```
$ curl http://mysite.com/subscriptions \
-d shortcode=7889 \
-d keyword=KEYWORD \
-d phone=6895874587 \
-d country=us \ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:58:09.063

让我尝试一一攻击：）

1.  在创建记录后，如果状态码支持，通常返回对象是一个好习惯，即如果创建记录，您应该返回对象以及 200 状态码。请记住，某些状态代码不允许正文，即 201。通常，大多数现代 http 客户端都支持重定向，但我仍会将其保留在 2 个单独的操作中

2.  通常，对用户进行身份验证仍然是一个好主意，因为您希望防止一个用户代表另一个用户发帖。无论您是否可以通过分析参数来确定用户是谁，您都可以将订阅与它联系起来，例如：

    @user=User.find_by_phone(params[:phone]) @subscrition = @user.subscritions.build(params)

3.  是的，归还已保存的内容通常是个好主意。

# twig - Twig {% if myId in myArray %} 不检查唯一值？

> ID：10885881
> 
> 赞同：1
> 
> 时间：2012-06-04T17:59:46.910
> 
> 标签：twig

我有一个 ID，需要对照一组 ID 进行检查。

当我这样做时：

```
{% if myId in myArray %} 
```

如果我正在检查类似' , ,`'10'`的数组中的内容，它会起作用。但是，如果我在 '10'、'11'、'12' 的同一数组中检查 '1'，则结果为真，因为它存在于列出的值中（或者在这种情况下，'' 也将导致真） . 显然，我希望这个结果为假，因为数组中实际上并不存在确切的整数 ' '。`10``'11'``'12'``'1'``'0'``2``1`

使用此函数时，有没有办法让树枝检查唯一或精确的整数值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:09:59.763

正如 Maerlyn 对 Twig 的 in 关键字的源代码指出的那样，可以看出您的问题是由您的值是字符串引起的。

实际上，twig 认为 '1' 存在于 '12' 中，因为他不知道 '12' 是一个整数，它也可以约束 'number1' 或任何其他字符串。

所以解决方案是首先将您的数组内容转换为整数。然后将其发送给 Twig。

# database - 用户表数据库最佳实践

> ID：10885883
> 
> 赞同：2
> 
> 时间：2012-06-04T17:59:54.157
> 
> 标签：database, database-design

我想知道组织用户数据的最佳实践是什么。

我应该将每行的所有用户数据存储在一个表中，还是应该将其切割成更小的块并使用与主键相关的多个表？

例如。

首先，我想记录个人信息，如姓名、职业、位置等。最终，可以选择添加使用历史记录。比如他们填写了多少、哪些调查以及他们评论了哪些文章。

在键入此内容时，对我来说有一个用于评论的表格，一个用于用户名+密码的表格，一个用于个人信息的表格，并随着我的需求的增长不断添加表格......

不过想要一些确认。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T18:03:10.613

如果要建立一对多的关系，那么您应该将其拆分，但对于一对一的事情，您不应该这样做。因此，如果用户将拥有多个地址、电话号码、历史记录、朋友等，那么您将拥有一个与客户 ID 相关联的地址表（或电话号码、历史记录或朋友表）。

对于用户名和密码，您不需要单独的表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:22:08.697

最佳实践是优化您的数据库，或者您真的想首先组织用户数据，您必须使用一对多关系，因为您可以通过加入不同的表来轻松跟踪整个用户数据

```
SELECT * FROM user_A a INNER JOIN userdata_B b ON a.id=b.a_id 
```

如果用户包含多个记录，例如名称 name2、occupation1、occupation2、location1、location2 等，那么您必须创建多个表并将此记录填充到这些表中，因为如果您将整个用户数据填充到单个表中，结果会花费很多执行时间

在此之后应用索引.......

# c++ - 在模板类中使用带有成员函数的`std::sort`

> ID：10885885
> 
> 赞同：1
> 
> 时间：2012-06-04T18:00:26.603
> 
> 标签：c++, class, templates, function-pointers, typedef

我遇到的问题是我想在模板类中使用 STL 的排序和自定义比较函数。

使用 typedef 的想法来自另一个[Stackoverflow 帖子](https://stackoverflow.com/questions/2278635/using-stl-algorithms-specifically-stdsort-from-within-a-templated-class)

无论如何，这是代码：

```
template <typename R,typename S>
class mesh{
  /* some stuff */

  void sortData(){
    typedef bool (*comparer_t)(const S,const S);
    comparer_t cmp = &mesh::compareEdgesFromIndex;
    sort(indx,indx+sides*eSize,cmp);
  }

  /* more stuff */

  // eData and cIndx are member variables
  bool compareEdgesFromIndex(const S a,const S b){
    return compareEdges(eData[cIndx[2*a]],eData[cIndx[2*a+1]],eData[cIndx[2*b]],eData[cIndx[2*b+1]]); 
  }
}; 
```

我得到的错误是

```
mesh.h:130:29: error: cannot convert ‘bool (mesh<float, unsigned int>::*)(unsigned int, unsigned int)’ to ‘comparer_t {aka\
bool (*)(unsigned int, unsigned int)}’ in initialization 
```

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T18:13:13.010

您正在尝试在需要函数指针的地方混合*成员函数**指针*。您可以将谓词重构为一个`static`函数，或者使用*绑定*将您的*成员函数指针*与您的类的实例相关联`mesh`。

为了将实例绑定到您的*成员函数指针*，您可以这样做

```
std::bind( mesh_instance, &mesh::compareEdgesFromIndex, _1, _2 ) 
```

如果使用**C++11**。如果您没有奢侈品，那么您可以使用*Boost*的等效功能（替换`std::bind`为`boost::bind`）。**C++03**提供了一些绑定功能，但它是有限的，我相信现在通用绑定功能*已经过时了。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T18:08:34.317

您必须声明`compareEdgesFromIndex`为静态：

```
static bool compareEdgesFromIndex(const S a,const S b){
  return compareEdges(eData[cIndx[2*a]],eData[cIndx[2*a+1]],eData[cIndx[2*b]],eData[cIndx[2*b+1]]); 
} 
```

假设`compareEdges`也是静态的。否则你有一个成员函数指针，它需要一个`mesh`被调用的指针。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T18:16:39.600

或者，如果您希望使用 compareEdgesFromIndex 作为非静态成员函数，您可以`boost::bind(this, &mesh::compareEdgesFromIndex, _1, _2)`作为比较器传递。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T18:14:03.230

成员函数不是函数，因为要工作，它还需要知道正在作用的对象实例是哪个。静态**成员**基本上只是一个普通的全局函数，具有一个有趣的名称和访问类私有部分的权限。

实际上，指向非静态成员函数的指针不是您可以简单调用的东西，而是您可以提供对象实例来获取可以调用的东西的东西。

您可以改为传递`std::sort`一个实现给定两个索引的类的**对象实例**`::operator()(int, int)`，该实例将返回所需的结果。不幸的是，由于我在 C++ 中从未理解过的原因，这个对象类必须是非本地类，因为本地类不能在模板中使用（它可以是在另一个类中定义的类，但不是在函数或方法中定义的类）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T18:41:16.867

作为 . 的替代方法`std::bind`，您可以使用我更喜欢的 lambda，因为我永远记不起`std::bind`.

```
auto cmp = [&mesh_instance](unsigned lhs, unsigned rhs) {
    return mesh_instance.compareEdgesFromIndex(lhs, rhs);
}; 
```

# asp.net-mvc - 无法解析符号“ViewBag”

> ID：10885886
> 
> 赞同：4
> 
> 时间：2012-06-04T18:00:29.467
> 
> 标签：asp.net-mvc, resharper

我正在使用 VS2010 SP1、MVC3 和 ReSharper 6.1。

在我的一个项目中，我有以下问题（）。

```
无法解析符号“ViewBag”
```

我只有在我的控制器中有这个。

![在此处输入图像描述](../Images/81184c6268932d702bd474d94ff2eba2.png)

在视图中它工作正常。

![在此处输入图像描述](../Images/b0ebb3a178c7a929e8baa2ecc4189102.png)

我检查了[类似的问题](https://stackoverflow.com/questions/5539131/resharper-cannot-resolve-symbol-eval-in-vs2010-sp1)并尝试了建议的解决方案，但没有奏效。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-13T09:26:30.830

确保您的控制器派生为

公共类 YourController :**控制器**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T05:14:23.880

确保您具有正确的 MVC 配置。使用此工具确保您具有正确的配置值[http://blogs.msdn.com/b/marcinon/archive/2011/01/13/mvc-3-project-upgrade-tool.aspx](http://blogs.msdn.com/b/marcinon/archive/2011/01/13/mvc-3-project-upgrade-tool.aspx)

# c# - 无法将数据绑定到 DropDownList

> ID：10885896
> 
> 赞同：1
> 
> 时间：2012-06-04T18:01:08.087
> 
> 标签：c#, asp.net, .net, xml, data-binding

我将 XML 值绑定到 DropDownList。下面是我的代码：

```
protected void LoadDropdown()
{
     DataSet ds = new DataSet();
     ds.ReadXml (Server.MapPath(@"XMLFile1.xml"));

     DropDownList1.DataTextField = "country_Id";          
     DropDownList1.DataSource = ds;
     DropDownList1.DataBind();
     DropDownList1.Items.Insert(0,new ListItem(" Select ","0"));
} 
```

我想在 DropDownList 中获取国家/地区名称，但我得到了 0、1、2、3 之类的 id 值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:09:47.723

尝试为 DataTextField 指定其他内容：

```
DropDownList1.DataTextField = "country_Name"; //This value depends on what your XML structure is.
DropDownList1.DataValueField = "country_Id"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:21:01.737

if you xml looks like this

```
<?xml version="1.0" encoding="utf-8" ?>

<Items>
<Item ddlValue="1" ddlText="YourlistItem1" />
<Item ddlValue="2" ddlText="YourlistItem2" />
<Item ddlValue="3" ddlText="YourlistItem3" />
</Items> 
```

your code behind for your dropdownlist should be

```
protected void Page_Load(object sender, EventArgs e)
{
    DataSet ddlDataSource = new DataSet(); 
    ddlDataSource.ReadXml(MapPath("XmlFile.xml"));
    DropDownList1.DataSource = ddlDataSource;
    DropDownList1.DataBind();
} 
```

Hope this helps.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:04:07.390

我找到了解决我的问题的方法。

```
protected void LoadDropdown()
    {
        DataSet ds = new DataSet();
        ds.ReadXml(Server.MapPath(@"XMLFile1.xml"));
        DropDownList1.DataTextField = "name";
        DropDownList1.DataSource = ds;
        DropDownList1.DataBind();
        DropDownList1.Items.Insert(0, new ListItem(" Select ", "0"));
    } 
```

# c# - HTML递归绑定

> ID：10885897
> 
> 赞同：0
> 
> 时间：2012-06-04T18:01:24.693
> 
> 标签：c#, asp.net, html

我有一个数据表如下：

```
id      menuname    url                  parentid
1       Home        ~/Home.aspx          NULL   
2       Product     ~/products.aspx      NULL 
3       Services    ~/services.aspx      NULL   
4       ERP     ~/erp.aspx           2
5       HRM         ~/hrm.aspx           4
7       Payroll     ~/payroll.aspx       4
8       Programming ~/programming.aspx   3
9       Advertising ~/advert.aspx        3
10      Television Advert ~/tvadvert.aspx 9
11      Radio Advert ~/radioadvert.aspx  9
........
........ 
```

所以我想根据上面的数据表将菜单项生成到一个无序列表中，这样具有 null parentid 的项目应该是第一级菜单，而其他项目将是基于它们的 parentid 的子菜单，如下所示：

```
<ul class="menu">
    <li><a href="home.aspx">Home</a></li>
    <li><a href="produc.aspx">Product</a>
            <ul>
                <li>
                <a href="erp.aspx">ERP</a>  
                    <ul>
                        <li><a href="hrm.aspx">HRM</a></li>
                        <li><a href="payroll.aspx">Payroll</a></li>
                    </ul>
                </li>
            </ul>
    </li>
    <li><a href="services.aspx">Services</a>
            <ul>
                <li><a href="programming.aspx">Advertising</a></li>
                <li><a href="advert.aspx">Programming</a></li>
            </ul>
    </li>

    .....etc
</ul> 
```

下面是我看起来不完整的代码：

```
public static String AddToList() 
    {

        DataTable table = new DataTable();
        table = GetMenus();

        System.Text.StringBuilder sb = new System.Text.StringBuilder();
        foreach (DataRow row in table.Rows())
        {
            string parentId = row["parentmenuId"].ToString();
            //string url = Server.MapPath(m.Url);
            if (string.IsNullOrEmpty(parentId))
            {
                sb.Append(String.Format("<ul class=\"menu\"><li><a href=\"{0}\">{1}</a></li></ul>", row["Url"].ToString(), row["Description"].ToString()));
            }

        }

        return sb.ToString();

    }

This gets all top menu but all other effort to get submenu doesnt work. Pls help me out.

Thanks in advance 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:24:45.847

出于纯粹的无聊，使用 asp.net 控件的 Compositin（每个控件都有一个 Controls 属性），它已经是一棵树并呈现为这样（这意味着我不需要真正的递归），以及一组索引，以便于通过-id 访问创建的控件

```
 public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Form.Controls.Add(AddToList()); 
    }

   public static HtmlGenericControl AddToList()      
   {
       HtmlGenericControl menu = new HtmlGenericControl("ul");
       DataTable table = GetMenus();
       //NOTE  i initialized this to 7, because this is the max rows id, and
       // im basing my builder on indexes to work. This can be easily replaced to
       // a dictionary<int,HtmlGenericControl> or any othre suitable collection
       HtmlGenericControl[] arrayOfLists = new HtmlGenericControl[7];
       foreach (DataRow row in table.Rows)
       {
          //assume control has no children, unless proved otherwise
           HtmlGenericControl temp  = new HtmlGenericControl("li");
           //add the control to its indexes place in the array and init it
           arrayOfLists[(int)row["id"] - 1] = temp;
           HtmlAnchor link = new HtmlAnchor();
           link.HRef = row["url"].ToString();
           link.InnerText = row["menuname"].ToString();
           temp.Controls.Add(link);
           int? parentId = string.IsNullOrEmpty(row["parentmenuId"].ToString()) ? null : (int?)int.Parse(row["parentmenuId"].ToString());
           if (parentId.HasValue)
           {
               // if a control has a parent - make its parent a ul insead of li
              // and add it to the parents collection
               arrayOfLists[parentId.Value - 1].TagName = "ul";
               arrayOfLists[parentId.Value - 1].Controls.Add(arrayOfLists[(int)row["id"] - 1]);
           }
           else
           {
                // no parent = add to the first created ul menu
               menu.Controls.Add(temp);
           }

       }

       return menu;     
   }

   public static DataTable GetMenus()
   {
       DataTable dt = new DataTable ();
       dt.Columns.Add("id", typeof(int));
       dt.Columns.Add("menuname", typeof(string));
       dt.Columns.Add("url", typeof(string));
       dt.Columns.Add("parentmenuId", typeof(string));
       dt.Rows.Add(1,"Home","~/Home.aspx",        null  );
       dt.Rows.Add( 2,"Product","~/products.aspx",    null);
       dt.Rows.Add(3,"services", "~/services.aspx",null);
       dt.Rows.Add(4, "ERP",  "~/erp.aspx",           "2" );
       dt.Rows.Add( 5  ,"HRM" ,"~/hrm.aspx",           "4" );
       dt.Rows.Add(7, " Payroll", "~/payroll.aspx", "4");
       return dt;

   } 
```

# backbone.js - 一个backbone.js视图的生命周期，几个初学者的问题

> ID：10885900
> 
> 赞同：1
> 
> 时间：2012-06-04T18:01:27.650
> 
> 标签：backbone.js

有人可以解释一下，视图（控制器）的生命周期是什么，例如，TODO 列表应用程序中的行？

```
App.RowView = Backbone.View.extend({
    events:{
        "click #del" : "delRow"
    }
}); 
```

大多数教程中，AppView 会这样做：

```
 render: function()
    {
        this.collection.each(this.renderRow, this);
        return this;
    },
    renderRow: function(row)
    {
        var rowView = new App.RowView({model:element});
        this.$('#rows').append(rowView.render().el);
    } 
```

问题：

1.  这是否意味着`rowView`只使用一次并丢弃`renderRow()`？还是它继续存在？
2.  如果是真的，什么时候杀死视图？添加监听器并在视图中`model.destroy`调用是否足够好？`remove()`
3.  如果我已经从服务器呈现了行的标记，`click #del`事件是否仍会被捕获并做一些没有`rowView`创建的事情？
4.  不`'click #del'`应该更好地位于父视图中，以便 jQuery 可以在那里委托和附加行为？
5.  这是否意味着我每行有 1 个 rowView？这不意味着 _.template 正在每一行上编译吗？有什么选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:34:39.623

1.  *引用*死亡，如果有其他引用指向它，视图可以保留*。*
2.  您在不再需要视图时*杀死视图，通常是在不再可见时。*如果您的视图正在*绑定*任何事件，您必须在调用之前取消绑定它们`remove()`：[在主干中管理视图的模式](https://stackoverflow.com/questions/8348805/pattern-to-manage-views-in-backbone)
3.  必须实例`RowView`化 的实例才能捕获事件。
4.  这取决于您正在寻找的行为，但在您的示例中，我认为每个视图都必须捕获每个自己的`click #del`事件，如果您在父视图中声明事件，您如何知道要删除的行？
5.  通常，您在视图定义中声明*模板，并将其**编译*后的版本分配为`this.template`：`template: _.template( "hello: <%= name %>" );`.

# ssh - ssh 主机 "awk '{print $0}' /path/to/log.txt" 没有输出

> ID：10885901
> 
> 赞同：3
> 
> 时间：2012-06-04T18:01:38.877
> 
> 标签：ssh, awk

我正在尝试使用 awk 从远程机器上的日志中提取一些数据，并注意到如果我 ssh 进入机器并运行

```
awk '{print $0}' /path/to/log.txt 
```

我得到了预期的输出（包含日志消息、堆栈跟踪等），但是如果我运行

```
ssh host "awk '{print $0}' /path/to/log.txt" 
```

那么输出如下所示：

```
0
1
0
0
1
1
1
1
1
1 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T18:08:14.787

转义美元符号。

```
ssh host "awk '{print \$0}' /path/to/log.txt" 
```

因为单引号不保护`$0`本地端，所以它在发送到远程端之前被替换。

你也可以试试：

```
ssh host 'awk "{print \$0}" /path/to/log.txt' 
```

这可以保护`$0`远程端，但需要对您的命令进行更多更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T18:20:42.523

一种不使用反斜杠的方法：

```
ssh domain.tld <<'EOF'
awk '{print $1}' /var/log/syslog*
EOF 
```

这使用*here-docs*：

```
man bash | less +/'Here Documents' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T18:11:45.097

试试这个：

```
ssh host "awk '{print}' /path/to/log.txt" 
```

它之所以有效，是因为 $0 是打印的默认值。

如果您的命令中有 $，则在脚本文件中创建命令会更简单。然后你可以这样做：

```
ssh host < cmdfile #cmdfile contains the command 
```

单引号不会阻止变量扩展。一个脚本可以。

# java - 找不到主类：HelloWorld。程序将会退出

> ID：10885902
> 
> 赞同：0
> 
> 时间：2012-06-04T18:01:39.290
> 
> 标签：java

> **可能重复：**
> [.jar 文件一直给我“找不到主类”。程序将会退出](https://stackoverflow.com/questions/10875839/jar-file-keeps-giving-me-could-not-find-the-main-class-program-will-exit)

试图运行一个基本的“hello World”程序。我已按照分步教程进行操作，每次都会收到相同的错误消息：

```
java.lang.NoClassDefFoundError: HelloWorld
Caused by: java.lang.ClassNotFoundException: HelloWorld
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
Exception in thread "main" 
```

这是程序：

```
public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello World");
    }
} 
```

有没有人遇到过同样的问题并知道如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:48:50.273

确保您的 java 文件位于一个包中，该包位于 Eclipse 用语中的“源文件夹”中。这意味着该图标应该看起来像一个打开的文件夹，其中包含一个橙色正方形，上面叠加了一个加号，并且 HelloWorld.java 文件的文档图标上应该有一个纯蓝色 J。如果文件夹图标看起来像一个普通文件夹，和/或 java 文件上有一个概述的 J，Eclipse 甚至不会编译该代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:09:05.517

这是您正在遵循的教程：http: [//docs.oracle.com/javase/tutorial/getStarted/cupojava/win32.html](http://docs.oracle.com/javase/tutorial/getStarted/cupojava/win32.html) ？

如果没有，请尝试执行该操作，看看是否得到相同的结果。

另外，尝试按如下方式运行您的应用程序：

C:\java.exe yourjavaprogram.Main

或者你可以用谷歌搜索错误，你可能会比你想象的更快找到解决方案:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T18:10:23.730

你编译程序了吗？在命令提示符下键入 javac HelloWorld.java 这将在同一文件夹中创建一个 .class 文件。现在输入 java HelloWorld 应该可以工作了。

# c# - C# 加载原始字节

> ID：10885904
> 
> 赞同：0
> 
> 时间：2012-06-04T18:01:50.653
> 
> 标签：c#, .net-assembly

我开发了一个小型解密和执行应用程序，但我被困在执行部分。我使用以下方法成功执行 .NET 程序集：

```
 Assembly asm = Assembly.Load(decryptedBytes);   
 if (asm.EntryPoint == null)
     throw new ApplicationException("No entry point found!");

 MethodInfo ePoint = asm.EntryPoint;
 object ins = asm.CreateInstance(ePoint.Name);
 ePoint.Invoke(ins, null); 
```

[但是当我尝试使用这篇文章](https://stackoverflow.com/questions/959087/is-it-possible-to-execute-an-x86-assembly-sequence-from-within-c/959144#959144)分配一个可执行区域时，应用程序崩溃了

我得到的唯一有用的信息是：

```
Fault Module Name:  StackHash_0a9e 
```

这是我的代码：

```
 const uint PAGE_EXECUTE_READWRITE = 0x40;
  const uint MEM_COMMIT = 0x1000;

  [DllImport("kernel32.dll", SetLastError = true)]
  static extern IntPtr VirtualAlloc(IntPtr lpAddress, uint dwSize, uint flAllocationType, uint flProtect);

  private delegate int IntReturner();

IntPtr buf = VirtualAlloc(IntPtr.Zero, (uint)decryptedBytes.Length, MEM_COMMIT, PAGE_EXECUTE_READWRITE);
Marshal.Copy(decryptedBytes, 0, buf, decryptedBytes.Length);

IntReturner ptr = (IntReturner)Marshal.GetDelegateForFunctionPointer(buf, typeof(IntReturner));
Console.WriteLine(ptr()); 
```

# database - codeigniter 检查 uri 段是否存在于数据库中

> ID：10885906
> 
> 赞同：1
> 
> 时间：2012-06-04T18:01:56.270
> 
> 标签：database, codeigniter, controller, uri, segment

我正在尝试创建动态页面而不创建新文件并从数据库中获取数据......

所以我的桌子会是这样的：

```
Pages
------
id | page_name | text
1  | about     | about page goes here
2  | contact   | contact page goes here 
```

现在我的问题是如何设法`$this->uri->segement(1)`自动检查给定的页面名称是否存在于数据库中？

我必须创建一个新的控制器来处理所有这些吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:12:45.860

如果您要检查多个页面，我建议您使用 Pages 控制器来管理这些页面。像这样的东西

```
class Pages extends CI_Controller {
    public function view($page_name)
    {
        $this->load->Pages_model();

        if($this->Pages_model->does_exist($page_name))
        {
            // Does exist. Do things.
        } else
        {
            show_404();
        }
    }
} 
```

在您的中，您将您的和 页面（以及您可能拥有的任何其他页面）`routes.php`路由到页面控制器。`about``contact`

```
$route['about'] = "pages/view/about";
$route['contact'] = "pages/view/contact"; 
```

您`Pages_model`将需要一个简单的函数来检查页面名称是否存在于数据库中。

```
function does_exist($page_name) {

    $this->db->where('name', $page_name); // assuming you have a table with a `name` field
    $query = $this->db->get('pages'); // select from the `pages` table
    return $query->num_rows() > 0; // returns bool

} 
```

# redmine - redmine插件需要先给ApplicationController打补丁？

> ID：10885912
> 
> 赞同：1
> 
> 时间：2012-06-04T18:02:38.787
> 
> 标签：redmine, redmine-plugins

这是在 Redmine 1.3 中。

我正在修补 ApplicationController 以在所有控制器中添加行为（实际上，只是为了包含一个帮助器）。问题是在我的 ApplicationController 补丁之前修补的任何控制器都没有获得新的行为。

这工作正常：

```
Dispatcher.to_prepare :my_plugin do
  require_dependency 'my_plugin/application_controller_patch'
  require_dependency 'my_plugin/welcome_controller_patch'
end 
```

但是这样一来，当我调用我添加的助手时，WelcomeController 会引发错误。

```
Dispatcher.to_prepare :my_plugin do
  require_dependency 'my_plugin/welcome_controller_patch'
  require_dependency 'my_plugin/application_controller_patch'
end 
```

这很容易在插件中修复，但我遇到的问题是另一个插件正在修补控制器，随后它失去了我的修复。更糟糕的是，这只发生在生产中——在开发中，我认为插件顺序不同，因为它工作正常。我没有看到改变插件顺序的方法。

我很确定我的补丁本身很好，但以防万一它看起来像这样：

```
require_dependency 'application_controller'  

module MyPlugin::ApplicationControllerPatch

  def self.included(base) # :nodoc:
    base.extend(ClassMethods)
    base.send(:include, InstanceMethods)
    base.class_eval do
      unloadable
      helper :search
      include SearchHelper
    end
  end

  module ClassMethods    
  end

  module InstanceMethods
  end # of InstanceMethods
end # of module

ApplicationController.send(:include, MyPlugin::ApplicationControllerPatch) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:22:29.987

当然，一旦我去问了这个问题，我就明白了。

在 config/additional_environment.rb 中，该行

```
config.plugins = [ :my_plugin, :all ] 
```

确保我的插件首先加载。这似乎已经解决了这种行为。

# php - 未选择图像文件时无法停止处理表单

> ID：10885913
> 
> 赞同：0
> 
> 时间：2012-06-04T18:02:45.980
> 
> 标签：php, file-upload, error-handling

我有一个表单，用于提交包含图像的新帖子。如果用户没有选择要上传的图像，我不希望帖子继续向服务器和数据库提交数据。目前我所做的一切都是让代码继续处理表单。

这是我的一些代码：

```
//check if the submit button has been clicked
        if( isset( $_POST['submit'] ) ){

            //validate the title and description
            $title = validate_title($_POST['title']);
            $desc = validate_desc($_POST['desc']);

            //Get other posted variables
            $cat = $_POST['cat'];
            $year = $_POST['year'];

            if($title && $desc != false){

                //check if an image has been submitted
                if( $_FILES['files']['name'] != ""){... 
```

我也尝试过使用以下方法，但是在没有选择文件时都不会停止代码：

```
if( $_FILES['files']['error'] == UPLOAD_ERR_OK){...

if( $_FILES['files']['name'] != UPLOAD_ERR_NO_FILE){... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:20:09.837

看起来您的文件输入名称是`files[]`，在这种情况下 $_FILES["files"]["name"] 将是一个数组，以检查用户是否提供了要上传的图像尝试，

```
foreach ($_FILES['files']["error"] as $index => $error){
    if ($error == UPLOAD_ERR_NO_FILE){
        //no file was uploaded in $index`th file input 
    }
    else{
        //other checks and process $_FILES['files']['tmp_name'][$index]
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:07:38.920

你应该检查一下`bool is_uploaded_file ( string $filename )`。

示例，其中 user_file 是文件上传的子数组：

```
<?php
if (is_uploaded_file($_FILES['userfile']['tmp_name']))
{
   // Success, file uploaded
}
else
{
   // Error, no file, invalid file, etc.
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T18:12:22.280

我认为，这是处理所有上传文件的最佳过程，例如：

```
 // allowed extensions
$extensions = array('.png', '.gif', '.jpg', '.jpeg','.PNG', '.GIF', '.JPG', '.JPEG');

        if((!empty($_FILES["files"])) && ($_FILES['files']['error'] == 0)) {

            // check extension
            $extension = strrchr($_FILES['files']['name'], '.');
            if (!in_array($extension, $extensions)) {
                echo 'wrong file format, alowed only .png , .gif, .jpg, .jpeg';
            } else {
                // get file size
                $filesize = $_FILES['files']['size'];

                // check filesize
                if($filesize > $maxlimit){ 
                    echo "File size is too big.";
                } else if($filesize < 1){ 
                    echo "File size is empty.";
                } else {

                    // temporary file
                    $uploadedfile = $_FILES['files']['tmp_name'];
                }
            }
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T18:15:24.697

如果您希望用户在没有选择任何图像时不能发送任何请求，您可以通过 java 脚本客户端来实现。当表单提交即将开始时，用户将收到错误消息。但请记住，用户可以轻松完成此验证。没有办法在客户端做到这一点，它是可靠的。最好在服务器端检查它，因为其他人已经回答了。

# c - ASM to C - 有人能解释一下这是什么结构吗？

> ID：10885914
> 
> 赞同：4
> 
> 时间：2012-06-04T18:02:49.070
> 
> 标签：c, assembly, structure

我有以下 ASM 代码 (OllyDbg)，它应该包含用 c 开发的结构。有人能告诉我这个结构在 c 编程语言中的样子吗？也许稍微解释一下你是如何弄清楚结构中存储的内容等等......

非常感谢你！

```
CPU Disasm
Address   Hex dump          Command                           Comments
6A27F058  /$  68 E9A6286A   PUSH 6A28A6E9                     ; Entry point
6A27F05D  |.  64:FF35 00000 PUSH DWORD PTR FS:[0]
6A27F064  |.  8B4424 10     MOV EAX,DWORD PTR SS:[ESP+10]
6A27F068  |.  896C24 10     MOV DWORD PTR SS:[ESP+10],EBP
6A27F06C  |.  8D6C24 10     LEA EBP,[ESP+10]
6A27F070  |.  2BE0          SUB ESP,EAX
6A27F072  |.  53            PUSH EBX
6A27F073  |.  56            PUSH ESI
6A27F074  |.  57            PUSH EDI
6A27F075  |.  A1 E067336A   MOV EAX,DWORD PTR DS:[6A3367E0]
6A27F07A  |.  3145 FC       XOR DWORD PTR SS:[EBP-4],EAX
6A27F07D  |.  33C5          XOR EAX,EBP
6A27F07F  |.  50            PUSH EAX
6A27F080  |.  8965 E8       MOV DWORD PTR SS:[EBP-18],ESP
6A27F083  |.  FF75 F8       PUSH DWORD PTR SS:[EBP-8]
6A27F086  |.  8B45 FC       MOV EAX,DWORD PTR SS:[EBP-4]
6A27F089  |.  C745 FC FEFFF MOV DWORD PTR SS:[EBP-4],-2
6A27F090  |.  8945 F8       MOV DWORD PTR SS:[EBP-8],EAX
6A27F093  |.  8D45 F0       LEA EAX,[EBP-10]
6A27F096  |.  64:A3 0000000 MOV DWORD PTR FS:[0],EAX
6A27F09C  \.  C3            RETN 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T10:56:43.180

这是一个编译器助手函数`__SEH_prolog4`，用于设置每个函数的异常处理程序。这是来自库 (RunTmChk.lib/sehprolg4.obj) 的清单：

```
.text:00000000                   __SEH_prolog4   proc near
.text:00000000
.text:00000000                   arg_4           = dword ptr  8
.text:00000000
.text:00000000 68 60 00 00 00      push    offset __except_handler4
.text:00000005 64 FF 35 00 00 00+  push    large dword ptr fs:0
.text:0000000C 8B 44 24 10         mov     eax, [esp+8+arg_4]
.text:00000010 89 6C 24 10         mov     [esp+8+arg_4], ebp
.text:00000014 8D 6C 24 10         lea     ebp, [esp+8+arg_4]
.text:00000018 2B E0               sub     esp, eax
.text:0000001A 53                  push    ebx
.text:0000001B 56                  push    esi
.text:0000001C 57                  push    edi
.text:0000001D A1 64 00 00 00      mov     eax, ds:___security_cookie
.text:00000022 31 45 FC            xor     [ebp-4], eax
.text:00000025 33 C5               xor     eax, ebp
.text:00000027 50                  push    eax
.text:00000028 89 65 E8            mov     [ebp-18h], esp
.text:0000002B FF 75 F8            push    dword ptr [ebp-8]
.text:0000002E 8B 45 FC            mov     eax, [ebp-4]
.text:00000031 C7 45 FC FE FF FF+  mov     dword ptr [ebp-4], 0FFFFFFFEh
.text:00000038 89 45 F8            mov     [ebp-8], eax
.text:0000003B 8D 45 F0            lea     eax, [ebp-10h]
.text:0000003E 64 A3 00 00 00 00   mov     large fs:0, eax
.text:00000044 C3                  retn
.text:00000044                   __SEH_prolog4   endp 
```

有关更多详细信息，请参见[此处](https://www.openrce.org/articles/full_view/21)。

这不是程序员写的代码，你找错地方了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:30:18.663

如果这真的是你的代码，你可以让 OllyDbg 显示相应的 C 代码，方法是右键单击 CPU 窗口，进入`Comments`子菜单并选择`Show source`. 要完成这项工作，您需要属于可执行文件的 pdb 文件。

我不确定 Olly1.X 是否已经支持该功能，但 2.X 版本肯定可以支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T18:20:16.383

我不完全确定，自从我研究 C/ASM 以来已经有一段时间了。但这里是看了一眼之后的一些想法。请记住，我不会过于依赖这个，但它可能会有所帮助。

查看 ASM 的这一部分：

```
6A27F07F  |.  50            PUSH EAX
6A27F080  |.  8965 E8       MOV DWORD PTR SS:[EBP-18],ESP
6A27F083  |.  FF75 F8       PUSH DWORD PTR SS:[EBP-8]
6A27F086  |.  8B45 FC       MOV EAX,DWORD PTR SS:[EBP-4]
6A27F089  |.  C745 FC FEFFF MOV DWORD PTR SS:[EBP-4],-2
6A27F090  |.  8945 F8       MOV DWORD PTR SS:[EBP-8],EAX
6A27F093  |.  8D45 F0       LEA EAX,[EBP-10] 
```

根据帧指针偏移量，我猜该结构包含 2 个 INT 和 1 个 LONG 或 DOUBLE。

不幸的是，我目前在 X86 方面不够流利，无法为您提供更好的说明。同样，我不会过于依赖这个，因为我可能完全错了。

# delphi - RichEdit 和 WM_VSCROLL 消息

> ID：10885917
> 
> 赞同：2
> 
> 时间：2012-06-04T18:03:06.417
> 
> 标签：delphi, windows-7, delphi-xe2, richedit

当行数不太大时，WM_VSCROLL 消息没有问题。当 RichEdit 有大量行（在我的情况下约为 130K 行，平均 150 个字符）时，它不起作用。 `RichEdit1.Perform(WM_VSCROLL, MakeWParam(SB_THUMBPOSITION, N), 0);`滚动到顶部 (N > 5) 或超过应有的位置 (N <= 5)。我可以用其他方式进行垂直滚动吗？

Ps 测试可以使用[这个](https://stackoverflow.com/questions/2822471/delphi-center-specific-line-in-trichedit-by-scrolling)由 Sertac Akyuz 编写的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:55:44.413

由于我在问题的评论中提到的原因，我想不出一种方法来调整问题中链接的代码以能够使用富编辑版本 2.0。但幸运的是，它可能没有必要..

对于 Windows XP SP1 和更高版本，Rich Edit 版本 3.0 包含在操作系统中。请参阅MSDN 上的“[关于 Rich Edit Controls ”。](http://msdn.microsoft.com/en-us/library/bb787873%28v=vs.85%29.aspx)使用 3.0 版不需要做任何事情，2.0 版和 3.0 版的类名是一样的。如果系统上部署了 3.0 版“riched20.dll”，则 VCL 可以使用它。

有趣的是没有问题[`WM_VSCROLL`](http://msdn.microsoft.com/en-us/library/bb787873%28v=vs.85%29.aspx)。消息仍然使用字大小的滚动位置，但丰富的编辑控件会自行调整：您获得的滚动范围最多为 65535。

关于[`EM_POSFROMCHAR`](http://msdn.microsoft.com/en-us/library/bb761631%28v=vs.85%29.aspx)3.0 版富编辑控件的问题，如果您在 wParam 中传递指向 a 的指针`POINTL`，控件会检测到它，而不是返回坐标，而是填充参数。

因此，这是一个对相同代码稍作修改的示例（请酌情添加错误/特殊情况处理）（仅适用于`WordWrap`设置为 false）：

```
const
  Line = 'The SCROLLINFO structure contains scroll bar parameters...'#13#10;

procedure TForm1.FormCreate(Sender: TObject);
var
  i: Integer;
  s: string;
begin
  s := '';
  for i := 1 to 130000 do
    s := s + IntToStr(i) + ' - ' + Line;
  SendMessage(RichEdit1.Handle, WM_SETTEXT, 0, LPARAM(PChar(s)));
end;

procedure VertCenterLine(RichEdit: TRichEdit; LineNum: Integer);
var
  LineIndex, MaxLineIndex: lResult;
  LinePos, MaxPos: TPoint;
  ScrollInfo: TScrollInfo;
  ScrollPos: Extended;
begin
  SendMessage(RichEdit.Handle, EM_SETSEL, 0, 0);
  SendMessage(RichEdit.Handle, winapi.messages.EM_SCROLLCARET, 0, 0);
  RichEdit.SetFocus;

  LineIndex := SendMessage(RichEdit.Handle, EM_LINEINDEX, LineNum, 0);
  MaxLineIndex := SendMessage(RichEdit.Handle, EM_LINEINDEX,
      RichEdit.Lines.Count, 0);   // to account for possible line feed at end
  if MaxLineIndex = -1 then
    MaxLineIndex := SendMessage(RichEdit.Handle, EM_LINEINDEX,
        RichEdit.Lines.Count - 1, 0);

  SendMessage(RichEdit.Handle, EM_POSFROMCHAR, WPARAM(@LinePos), LineIndex);
  SendMessage(RichEdit.Handle, EM_POSFROMCHAR, WPARAM(@MaxPos), MaxLineIndex);

  ScrollInfo.cbSize := SizeOf(ScrollInfo);
  ScrollInfo.fMask := SIF_RANGE;
  GetScrollInfo(RichEdit.Handle, SB_VERT, ScrollInfo);

  ScrollPos := (LinePos.y - RichEdit.ClientHeight / 2) / MaxPos.y;
  ScrollPos := ScrollPos * (ScrollInfo.nMax - ScrollInfo.nMin);
  SendMessage(RichEdit.Handle, WM_VSCROLL,
                            MakeWParam(SB_THUMBPOSITION, Round(ScrollPos)), 0);
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  VertCenterLine(RichEdit1, 110000);
end; 
```

# jquery - Railscast 197，第 2 部分：如何删除 Rails 3 中的一组字段？

> ID：10885927
> 
> 赞同：0
> 
> 时间：2012-06-04T18:03:51.963
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, forms

我正在按照以下视频中的说明在 Rails 3 中构建一个表单：[http](http://railscasts.com/episodes/197-nested-model-form-part-2) ://railscasts.com/episodes/197-nested-model-form-part-2 。

我的表单与视频中的表单有一个主要区别：我希望能够从表单中删除一组字段，而不是能够删除表单上的一个字段。该组包含以下字段：“人数”、“性别”、“种族”、“年龄”。我能够使用本视频系列第 1 部分中的复选框删除这组字段，但由于我添加了 jquery 功能，它没有工作。

有什么建议么？

**新的.html.erb**

```
<%= f.fields_for :audiences do |builder| %>
<div class="audiencefields">

<%= builder.hidden_field :_destroy %>
<%= link_to_function "remove", "remove_fields(this)" %>
<p>
    <%= builder.label :number_of_people %><br />
    <%= builder.text_field :number_of_people %>
</p>
<p>
    <%= builder.label :gender %><br />
    <%= builder.text_field :gender %>
</p>
<p>
    <%= builder.label :ethnicity %><br />
    <%= builder.text_field :ethnicity %>
</p>
<p>
    <%= builder.label :age %><br />
    <%= builder.text_field :age %>
</p>
</div>
<% end %> 
```

**应用程序.js**

```
function remove_fields (link) {
        $(link).previous("input[type=hidden]").value = "1";
        $(link).up(".audiencefields").hide();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:50:29.807

我花了一段时间试图解决这个问题，但找不到解决方案，因为这个 railscast 对于 Rails 3 来说似乎已经过时了。我最终安装了 Nested Form gem，它工作得很好：[https://github。 com/ryanb/nested_form](https://github.com/ryanb/nested_form)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:42:36.600

我相信您的 jQuery 有问题，请尝试[http://api.jquery.com](http://api.jquery.com)查找一些功能。我想你可能正在寻找

```
$(link).prev("input[type=hidden]").val = "1"
$(link).slideUp("audiencefields") 
```

或类似的东西。您可能正在寻找 $(link).prev().css("hidden",true)。不完全确定，但有可能。检查 firebug 以确保您使用的所有方法都是 jQuery 的一部分。

另外，确保所有 jQuery 都在 $(document).ready(); 或者它可能不起作用。

# c# - 蜜罐属性在 MVC 3 项目中创建语法错误

> ID：10885935
> 
> 赞同：1
> 
> 时间：2012-06-04T18:04:38.500
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010

我转到以下链接并开始逐步执​​行说明。

[https://github.com/webadvanced/Honeypot-MVC/wiki/Simple-Getting-Started-Guide](https://github.com/webadvanced/Honeypot-MVC/wiki/Simple-Getting-Started-Guide)

我还添加了使用 SimpleHoneypot.Core；在我的控制器的顶部。

我有列出的 dll，但是当我尝试将 Honeypot 属性添加到我的 Httppost 方法时，出现语法错误。

它说 SimpleHoneypot.Core.Honeypot 类型存在于“...MVC2.dll”和“...MVC3.dll”中。以前，我试图删除 MVC2.dll 包，但后来 Honeypot 似乎根本无法识别。

如何在我的控制器中使用 Honeypot 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:40:08.160

在`References`解决方案的文件夹中，删除对`SimpleHoneypot.NET4.MVC2`. 确保引用`SimpleHoneypot.NET4.MVC3`仍然存在。您的应用程序现在应该构建。

# javascript - 通过 jQuery 访问 DOM 元素

> ID：10885937
> 
> 赞同：5
> 
> 时间：2012-06-04T18:04:46.877
> 
> 标签：javascript, jquery, html, dom

假设我的代码中有以下 DOM 元素：

```
<div id="test">
    <div id="t2">
       Hi I am
       <b>Gopi</b>
       and am 20 years old.
       <p id="div2">
         <button onclick="alert('lol')">Check</button>
       </p>
    </div>
</div> 
```

假设我想遍历 div#t2 的内容。

`$("#t2").children()`给了我`<b>`和`<p>`标签。

*那么**我应该如何**`Hi I am`访问它以将值作为包含“ ”、“ `<b>....</b>`”、“ `and am 20 years old.`”、“的数组来获取`<p>.....</p>`* **？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T18:07:11.557

使用本机 DOM[节点](https://developer.mozilla.org/en/DOM/Node)：

```
$('#t2')[0].childNodes 
```

给你你想要的数组。

由于实际的文本节点包含 HTML 中的所有空格，因此您可能还想在使用它们之前修剪条目[。](http://api.jquery.com/jQuery.trim/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:07:45.580

你可以使用[`.get()`](http://api.jquery.com/get/)方法得到它

```
var arr = $("#t2").contents().get(); 
```

[工作小提琴](http://jsfiddle.net/joycse06/LNW4V/1/)

如果您检查小提琴，您会发现它`.contents()`返回的数组包含

`text`和`html`像这样的元素

```
 [text1,html1,text2,html2,text3]

 //Where
 text1 == Hi I am
 html1 == <b>Gopi</b>
 text2 == and am 20 years old. 
 html2 == <p id="div2"><button onclick="alert('lol')">Check</button></p> 
```

这完全有道理，但最后`text3`一个来自哪里。

`<p>`标签末尾还有另一个文本节点

```
 <p id="div2">....</p> <-- Here, newline is 
                           another text node(the last one) 
```

因此，如果您使用`.contents`请记住这一点。

要获得修剪后的数据，请使用 $.map 之类的

```
var arr = $("#t2").contents().map(function(){
 if (this.nodeType == 3)
     return $.trim(this.nodeValue) || null; 
                                     // this null to omit last textnode
 else
     return $('<div />').append(this).html();

 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T18:46:41.497

```
var result = [];

$("#t2").contents().map(function(index, el) {
    console.log(el);
    if(el.nodeType == 3) {
        result.push($.trim( $(el).text() ));
    } else {
        if(el.tagName.toLowerCase() == 'b') {
          result.push('<b>' + el.innerHTML + '</b>');
        } else if(el.tagName.toLowerCase() == 'p') {
          result.push('<p>' + el.innerHTML + '</p>');            
        }
   }
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/LNW4V/4/)**

# visual-studio-2010 - 使用 Visual Studio 作为 QT Creator 的编译器

> ID：10885938
> 
> 赞同：0
> 
> 时间：2012-06-04T18:04:52.197
> 
> 标签：visual-studio-2010, qt, boost

我一直试图让 Visual Studio 成为我用于 QT 创建者的编译器，这样我就可以链接到我的 boost 库，这些库由于某种原因只能在 msvc 中构建。

当我查看我的构建和运行选项卡时，它自动找到了 5 个不同的 Visual Studio 编译器，但它们都没有调试器的路径。

我尝试克隆一个，然后我意识到我什至找不到我应该放入调试器的路径。

Qt Creator 2.4.1 基于 Qt 4.7.4（32 位）

建于 2012 年 1 月 26 日 09:48:31

从修订版 8cd370e163

视觉工作室 2010

我的电脑是Windows 7 64bit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:38:54.520

[您可以从适用于 Windows 7 和 .NET Framework 4 的 Microsoft Windows SDK](http://www.microsoft.com/en-us/download/details.aspx?id=8279)安装适用于 Windows (x64) 的调试工具。Qt 应该会自动找到它。

# mysql - 如何处理我的 SQL 中的歧义字段

> ID：10885940
> 
> 赞同：0
> 
> 时间：2012-06-04T18:05:02.010
> 
> 标签：mysql, sql

```
SELECT TB.ID, Latitude, Longitude, 111151.29341326 * SQRT( POW( -6 - `Latitude` , 2 ) + POW( 106 - `Longitude` , 2 ) * COS( -6 * 0.017453292519943 ) * COS( `Latitude` * 0.017453292519943 ) ) AS Distance
FROM `tablebusiness` AS TB
JOIN `tablecity` AS TC ON TB.City = TC.City
JOIN `businessestag` AS BC ON BC.BusinessID = TB.ID
JOIN `businessesdistricts` AS BD ON BD.BusinessID = TB.ID
JOIN `tabledistrict` AS TD ON TD.ID = BD.District
WHERE (
`Title` LIKE '%restaurant%'
OR `Street` LIKE '%restaurant%'
OR TB.City LIKE '%restaurant%'
OR BC.Tag LIKE '%restaurant%'
OR TD.District LIKE '%restaurant%'
)
AND (
- 6.0917668133836 < `Latitude`
AND `Latitude` < - 5.9082331866164
AND 105.90823318662 < `Longitude`
AND `Longitude` < 106.09176681338
)
ORDER BY Distance
LIMIT 0, 100 
```

这个mysql经历了

然后我也想看基于建筑。

所以我做了，就像有人建议的那样

```
SELECT
  TB.ID,
  Latitude,
  Longitude,
  111151.29341326 * SQRT(POW(-6 - `TB.Latitude`, 2) + POW(106 - `TB.Longitude`, 2) * COS(-6 * 0.017453292519943) * COS(`TB.Latitude` * 0.017453292519943)) AS Distance
FROM
  `tablebusiness` AS TB
  JOIN `tablecity` AS TC
    ON TB.City = TC.City
  JOIN `businessestag` AS BC
    ON BC.BusinessID = TB.ID
  JOIN `businessesdistricts` AS BD
    ON BD.BusinessID = TB.ID
  JOIN `tabledistrict` AS TD
    ON TD.ID = BD.District
  LEFT JOIN `tablebusiness` TBuilding
    ON TBuilding.ID = TB.Building
WHERE
  (`Title` LIKE '%restaurant%' OR `Street` LIKE '%restaurant%' OR TB.City LIKE '%restaurant%' 
    OR BC.Tag LIKE '%restaurant%' OR TD.District LIKE '%restaurant%' OR TBuilding.Title LIKE '%restaurant%')
  AND (-6.0917668133836 < `TB.Latitude` AND `TB.Latitude` < -5.9082331866164 
    AND 105.90823318662 < `TB.Longitude` AND `TB.Longitude` < 106.09176681338) 
ORDER BY
  Distance
LIMIT
  0, 100 
```

然后我收到一条消息，纬度字段不明确。

我该怎么办？

我做了明显的添加TB。纬度前

```
explain SELECT
  TB.ID,
  TB.Latitude,
  TB.Longitude,
  111151.29341326 * SQRT(POW(-6 - `TB.Latitude`, 2) + POW(106 - `TB.Longitude`, 2) * COS(-6 * 0.017453292519943) * COS(`TB.Latitude` * 0.017453292519943)) AS Distance
FROM
  `tablebusiness` AS TB
  JOIN `tablecity` AS TC
    ON TB.City = TC.City
  JOIN `businessestag` AS BC
    ON BC.BusinessID = TB.ID
  JOIN `businessesdistricts` AS BD
    ON BD.BusinessID = TB.ID
  JOIN `tabledistrict` AS TD
    ON TD.ID = BD.District
  LEFT JOIN `tablebusiness` TBuilding
    ON TBuilding.ID = TB.Building
WHERE
  (`Title` LIKE '%restaurant%' OR `Street` LIKE '%restaurant%' OR TB.City LIKE '%restaurant%' 
    OR BC.Tag LIKE '%restaurant%' OR TD.District LIKE '%restaurant%' OR TBuilding.Title LIKE '%restaurant%')
  AND (-6.0917668133836 < `TB.Latitude` AND `TB.Latitude` < -5.9082331866164 
    AND 105.90823318662 < `TB.Longitude` AND `TB.Longitude` < 106.09176681338) 
ORDER BY
  Distance
LIMIT
  0, 100 
```

现在错误是＃1054 - '字段列表'中的未知列'TB.Latitude'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:06:03.047

我想你需要在`Latitude`你所指的前面加上`TB`别名

```
SELECT
  TB.ID,
  TB.Latitude,
... 
```

它可能会发生，这`Longitude`也将是模棱两可的，所以我建议在它前面加上适当的别名。

**更新：**

我还建议您删除周围的引号`TB.Latitude`，`TB.Latitude`因为它们会导致“未知列”错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:06:29.970

把表格的别名放在前面，比如 TB.Latitude

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T18:11:27.600

由于在第二个查询中您要加入`tablebusiness`两次，因此会产生歧义。

因此，为了消除歧义，您还必须包括您想要列的表的别名`Latitude and Longitude`。

正确的查询是 -

```
SELECT TB.ID,
       TB.Latitude,
       TB.Longitude,
<everything else remains the same.> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T18:35:09.203

正确答案是 Li0LiQ 建议的答案

所以我不选择这个作为答案。

只是为了记录，最后一个案例是并且它有效。再次。谢谢 Li0LiQ。您的答案是选定的答案。

```
explain SELECT
  TB.ID,
  TB.Latitude,
  TB.Longitude,
  111151.29341326 * SQRT(POW(-6 - TB.Latitude, 2) + POW(106 - TB.Longitude, 2) * COS(-6 * 0.017453292519943) * COS(TB.Latitude * 0.017453292519943)) AS Distance
FROM
  `tablebusiness` AS TB
  JOIN `tablecity` AS TC
    ON TB.City = TC.City
  JOIN `businessestag` AS BC
    ON BC.BusinessID = TB.ID
  JOIN `businessesdistricts` AS BD
    ON BD.BusinessID = TB.ID
  JOIN `tabledistrict` AS TD
    ON TD.ID = BD.District
  LEFT JOIN `tablebusiness` TBuilding
    ON TBuilding.ID = TB.Building
WHERE
  (TB.Title LIKE '%restaurant%' OR TB.Street LIKE '%restaurant%' OR TB.City LIKE '%restaurant%' 
    OR BC.Tag LIKE '%restaurant%' OR TD.District LIKE '%restaurant%' OR TBuilding.Title LIKE '%restaurant%')
  AND (-6.0917668133836 < TB.Latitude AND TB.Latitude < -5.9082331866164 
    AND 105.90823318662 < TB.Longitude AND TB.Longitude < 106.09176681338) 
ORDER BY
  Distance
LIMIT
  0, 100 
```

# mysql - java.net.ConnectException：连接超时，Tomcat 7 和 iptables

> ID：10885949
> 
> 赞同：0
> 
> 时间：2012-06-04T18:05:52.700
> 
> 标签：mysql, tomcat7, firewall, iptables, connection-timeout

我遇到了一个奇怪的问题..

基本上我们的 Java 开发人员说，在 Java 应用程序中，访问数据库以在其上写入的服务会出现此错误：

java.net.ConnectException：连接超时

```
java.net.ConnectException: Connection timed out
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
at java.net.Socket.connect(Socket.java:529)
at java.net.Socket.connect(Socket.java:478)
at sun.net.NetworkClient.doConnect(NetworkClient.java:163)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:394)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:529)
at sun.net.www.http.HttpClient.<init>(HttpClient.java:233)
at sun.net.www.http.HttpClient.New(HttpClient.java:306)
at sun.net.www.http.HttpClient.New(HttpClient.java:323)
at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:970)
at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:911)
at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:836)
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1172)
at rab.server.system.rpc.MailServiceComponents.sendFeedback(MailServiceComponents.java:259)
at rab.server.homepage.rpc.HomepageServiceImpl.createFeedback(HomepageServiceImpl.java:61)
at sun.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

相反，只是从数据库中读取的服务，就像一个魅力......

经过一些尝试，我尝试禁用防火墙，它起作用了。然后我尝试加载一个基本配置：

```
:~# cat /etc/iptables.test.rules 
*filter

# Allows all loopback (lo0) traffic and drop all traffic to 127/8 that doesn't use lo0
-A INPUT -i lo -j ACCEPT
-A INPUT ! -i lo -d 127.0.0.0/8 -j REJECT

# Accepts all established inbound connections
-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

# Allows all outbound traffic
# You could modify this to only allow certain traffic
-A OUTPUT -j ACCEPT

# Allows HTTP and HTTPS connections from anywhere (the normal ports for websites)
-A INPUT -p tcp --dport 8080 -j ACCEPT
-A INPUT -p tcp --dport 80 -j ACCEPT
-A INPUT -p tcp --dport 443 -j ACCEPT

# Allows SSH connections for script kiddies
# THE -dport NUMBER IS THE SAME ONE YOU SET UP IN THE SSHD_CONFIG FILE
-A INPUT -p tcp -m state --state NEW --dport 22 -j ACCEPT

# Now you should read up on iptables rules and consider whether ssh access 
# for everyone is really desired. Most likely you will only allow access from certain     IPs.

# Allow ping
-A INPUT -p icmp -m icmp --icmp-type 8 -j ACCEPT

# log iptables denied calls (access via 'dmesg' command)
-A INPUT -m limit --limit 5/min -j LOG --log-prefix "iptables denied: " --log-level 7

# Reject all other inbound - default deny unless explicitly allowed policy:
-A INPUT -j REJECT
-A FORWARD -j REJECT

COMMIT 
```

这也奏效了。现在，问题是，在我加载了这个基本配置后，我们的服务器工厂开始抱怨，因为在他们的配置中，他们有监控和备份服务的规则（而且他们很多..）。经过一些尝试修改他们的规则以检查问题出在哪里。我发现我和他们之间的关键区别是输出中的策略（接受与丢弃）。

所以我在这里，我需要找到正确的规则来添加到他们的配置中，保持 OUTPUT 策略为 DROP。

我想强调一下，Tomcat 7 正在正确地为 webapp 提供服务，并且 mysql 正在监听如下：

```
~# netstat -lnp | grep mysql
tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN      19356/mysqld    
unix  2      [ ACC ]     STREAM     HÖRT         669292   19356/mysqld        /var/run/mysqld/mysqld.sock 
```

我试图在他们的配置中添加很多东西，例如：

```
 iptables -A OUTPUT -d 127.0.0.1/32 -p tcp --sport 1024:65535 --dport 3306 -j ACCEPT 
```

还有很多其他的，没有成功...

任何想法？

# java - 如何使用jdbc获取存储引擎

> ID：10885950
> 
> 赞同：2
> 
> 时间：2012-06-04T18:05:55.520
> 
> 标签：java, mysql, jdbc

有没有办法使用 JDBC 获取 MySql 表的存储引擎。我已经使用元数据来获取其他表信息，如列名、类型、主键、索引......但没有找到如何获取引擎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:10:49.060

您可以使用`information_schema`获取引擎类型，例如：

```
SELECT ENGINE
FROM information_schema.tables
WHERE TABLE_SCHEMA=DATABASE() AND TABLE_NAME='foobar'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:56:16.090

```
Statement stmt = connection.createStatement(); 
stmt = connection.createStatement(); 
ResultSet rs = stmt.executeQuery("select engine from information_schema.tables where table_name='" + tableName + "';");
rs.next(); 
System.out.println(rs.getString(1)); 
```

# c# - System.ArgumentException 未找到请求的值

> ID：10885953
> 
> 赞同：1
> 
> 时间：2012-06-04T18:06:04.183
> 
> 标签：c#, c++, dll

我有一个 C# 应用程序，他们使用 C++ .dll。

当我从 dll 调用一个方法时，我得到一个：`System.ArgumentException. Requested value 'C:\test\test.csv' was not found`.

该文件确实存在于此路径中，并且我有一个使用此 .dll 的 C++ 应用程序并且它运行良好。

```
TESTData.Convert.ToPRODFile("C:\\test\\test.csv"); 
```

该方法的作用是转换和写入文件。

有人对此例外有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:10:40.890

你确定这是正确的例外吗？我的意思是，如果文件不存在，则可能会引发另一个问题。你有dll源代码吗？

# jquery - wordpress 中的 SlideToggle - 一次只能打开一个？

> ID：10885954
> 
> 赞同：0
> 
> 时间：2012-06-04T18:06:04.850
> 
> 标签：jquery, wordpress, slidetoggle

我真的希望有人能帮忙！我在 slideToggle 上找到了很多帖子，以及如何一次只显示一个 div，但我不知道如何在我购买的 wordpress 主题中将其实现到这个菜单中。这是主题：[http](http://themes.themegoods.com/rhea_wp) ://themes.themegoods.com/rhea_wp （我已经破解了菜单，所以它不会做那种烦人的淡入淡出（和音乐）。但是看看当你点击时所有菜单是如何保持打开状态的他们？下面是菜单的代码。是否可以编辑此代码以使其一次只显示一个子菜单？我希望其他人在您单击另一个主链接时关闭。也许我不需要使用slideToggle？也许是slideUp和slideDown？或者其他什么？我是新手，真的需要尽快为客户解决这个问题！感谢任何帮助！

```
$j.fn.setNav = function(){
$j('#main_menu li ul').css({display: 'none'});

$j( 'ul#main_menu > li:has( ul li.current-menu-item )' ).each(function()
{   
    $j(this).find('ul.sub-menu').css({overflow:'visible', height:'auto', display:  'block'});
});

$j('ul#main_menu > li:has( ul.sub-menu )').click(function()
{

    var $jsublist = jQuery(this).find('ul:first');
    $jsublist.slideToggle('fast');

    return false;
});

$j('ul#main_menu > li > ul.sub-menu li ').click(function()
{
    var subURL = $j(this).find('a:first').attr('href');
    location.href=subURL;
    return true;
}); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:19:03.297

试试 .live 或 .on

[http://api.jquery.com/live/](http://api.jquery.com/live/)

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:20:59.543

我认为你不应该在不了解底层代码的情况下为客户破解主题，它只会在未来出现问题或客户想要新东西时回来困扰你。

这就是改变这一行的快速破解：

```
$jsublist.slideToggle('fast'); 
```

为此，可能有效：

```
$('ul.sub-menu').slideDown('fast');
$jsublist.slideToggle('fast'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:45:38.280

解决了。问题只是主题使用的是旧版本的 jQuery - 确切地说是 1.3.2。一旦我调用了最新版本，菜单就可以使用这个修改：

```
$j('ul#main_menu > li:has( ul.sub-menu )').click(function () {
var $jsublist = jQuery(this).find('ul:first');
    $('.visible').slideUp('fast')
    $jsublist.slideToggle('fast').addClass('visible');
return false; 
```

# asp.net-mvc-3 - MVC3 使用 java web 服务仅适用于 ip 地址

> ID：10885958
> 
> 赞同：0
> 
> 时间：2012-06-04T18:06:26.097
> 
> 标签：asp.net-mvc-3, web-services

我正在从我的 Asp.net MVC Web 应用程序调用 Java Web 服务。如果 web.config 中的端点地址使用其 ip 地址或 localost 引用服务器，则 Web 服务工作。但是当我用主机名替换 ip adderess 时，它找不到服务器。

这是我的 web.config 的服务部分

```
<system.serviceModel>
  <bindings>
    <basicHttpBinding>
      <binding name="TestInterfaceBeanServiceSoapBinding" closeTimeout="00:01:00"
        openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
        allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
        maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
        messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
        useDefaultWebProxy="true">
        <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
          maxBytesPerRead="4096" maxNameTableCharCount="16384" />
        <security mode="None">
          <transport clientCredentialType="None" proxyCredentialType="None"
            realm="" />
          <message clientCredentialType="UserName" algorithmSuite="Default" />
        </security>
      </binding>
    </basicHttpBinding>
  </bindings>
  <client>
    <endpoint address="http://MyServer:8080/ets-impl-2.0/TestInterfaceBean"
      binding="basicHttpBinding" bindingConfiguration="TestInterfaceBeanServiceSoapBinding"
      contract="TestService.TestInterfaceBean" name="TestInterfaceBeanPort" />
  </client>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:26:07.243

当您在 DMZ 中部署到生产环境并访问内部 Web 服务时，通常会发生这种情况。您的 DMZ 服务器可能没有使用内部 DNS，因此它不知道如何解析 IP 地址。

我们过去通过将服务器名称和 IP 地址添加到 Windows 主机文件中解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:15:56.623

`http://MyServer:8080/ets-impl-2.0/TestInterfaceBean`在浏览器中尝试 URL ( )。主机是否正确解析？

您可以使用`nslookup myserver`来确定服务器名称是否被解析为您期望的相同 IP 地址。

# android - 用 AsyncTask 填充 ListView（doInBackground() 返回光标）

> ID：10885959
> 
> 赞同：0
> 
> 时间：2012-06-04T18:06:29.140
> 
> 标签：android, android-asynctask, android-cursor

我正在尝试使用 AsyncTask 填充我的 ListView。评论中包含问题

```
private class DownloadDataTask extends AsyncTask<String, Void, Cursor> {
    private final ProgressDialog dialog = new ProgressDialog(ctx);

    @Override
    protected void onPreExecute() {
        this.dialog.setMessage(ctx.getString(R.string.AcquiringData));
        this.dialog.show();
    }

    @Override
    protected Cursor doInBackground(final String... args) {         

        DbAdapter dbAdapter = new DbAdapter(ctx);
        dbAdapter.open();
        // normally when I call this method from main class it reurns cursor full of values
        Cursor cursor = dbAdapter.fetchAllItemsInExpenses();

        return cursor;
    }

    protected void onPostExecute(final Cursor cursor) {
        if (this.dialog.isShowing()) {
            this.dialog.dismiss();
           //cursor is empty

    } 
```

`ctx`是在主类 OnCreate() 上设置的 Context

以下请求粘贴了 fetchAllItemsInExpenses() 方法：

```
public Cursor fetchAllItemsInExpenses() {
    String query = "SELECT ... " //(some terribly boring and long query string, but trust me, it works perfectly fine)
    return SQLDb.rawQuery(query, null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:17:30.647

试试这个`AsyncTask`...

```
private class DownloadDataTask extends AsyncTask<String, Void, Cursor> {
    private final ProgressDialog dialog = new ProgressDialog(ctx);
    Context ctx = null; //Add this and the constructor below

    public DownloadDataTask(Context context) {
        ctx = context;
    }

    ...

} 
```

然后在您的`Activity`创建并执行`AsyncTask`如下...

```
DownloadDataTask ddt = new DownloadDataTask(this);
ddt.execute(theArgs); 
```

# ios - 应用内购买，与指南混淆

> ID：10885963
> 
> 赞同：2
> 
> 时间：2012-06-04T18:06:32.797
> 
> 标签：ios, in-app-purchase

我是 IOS 新手，我正在构建的应用程序需要使用可更新订阅模式的应用程序内购买。用户将浏览应用程序内的许多可用新闻信函选项，然后单独订阅其中的一个或多个。每封新闻信函都可单独用于应用内购买。

我的服务器要求将这些信息存储在服务器数据库中（由于我用来分发新闻信件的逻辑）。

1.  用户信息。

2.  他的订阅。

我对应用内购买的这两条指南感到困惑。

1.  自动更新订阅以与非消耗性产品相同的方式传送到用户的所有设备

我的理解是，用户的设备是指用户使用购买新闻订阅的同一个iTunes帐户登录的所有设备。请让我知道我的理解是否正确。

1.  服务器产品型号：

“...Store Kit 不提供识别特定用户的机制。您的设计可能要求您提供识别用户的机制。如果您的应用程序需要这些（例如，跟踪哪些订阅与特定用户相关联） )，你需要自己设计和实现它。”

这是否意味着，我必须维护自己的用户帐户？比如允许用户使用电子邮件ID/用户名和密码在我的应用程序中注册自己？

如果我允许用​​户注册，

1.  我可以将此帐户与用于购买订阅的 iTunes 帐户进行逻辑连接吗？

2.  当用户使用在我的服务器上注册的帐户登录我的应用程序，但使用不同的 iTunes 帐户登录 iPhone iTunes 时会发生什么？

我有点担心，因为我是新手，想在开始之前了解我的局限性和选择。

# c# - Adobe PDF 表单已提交，但 Request.Form 集合为空

> ID：10885969
> 
> 赞同：2
> 
> 时间：2012-06-04T18:06:56.510
> 
> 标签：c#, asp.net, pdf, adobe, acrobat

我创建了一个包含文本框和提交按钮的 PDF 表单。用户可以在 Adob​​e Acrobat Reader 或浏览器中打开 PDF 文件。填写文本框并单击提交按钮后，asp.net 通用处理程序将处理提交的数据。

但是我现在遇到的问题是没有提交的表单数据。

PDF 表单提交按钮设置如下： ![在此处输入图像描述](../Images/68d4be10a0457909bf2bc48b6440ebda.png)

和服务器端代码：

```
public class PdfFormHandler : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        if (context.Request.RequestType == "POST")
        {
            var name = context.Request.Form["txtName"]; // <-- name is null. why?
        }
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

`context.Request.Form`集合是空的。`txtName`表单元素去哪了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:46:33.770

我自己解决了这个问题。问题是我需要更改`Export Format`为`HTML`.

![在此处输入图像描述](../Images/75e871ea1841b34ecf3cab9bd5188c09.png)

# mpi - 使用 MPI 合并所有等级的数组

> ID：10885970
> 
> 赞同：5
> 
> 时间：2012-06-04T18:07:01.737
> 
> 标签：mpi

*我在所有等级上都有一个相同长度*的数组（假设为 10）。数组中的一些值包含处理器的等级。例如 ...

```
Proc 1: [1 0 0 0 0 1 0 0 0 1]

Proc 2: [0 2 2 0 0 0 0 2 2 0]

Proc 3: [0 0 0 3 3 0 3 0 0 0] 
```

现在所有处理器以以下数组结尾的最有效方式是什么（使用 MPI-2）

```
[1 2 2 3 3 1 3 2 2 1] 
```

可以将其视为所有数组的总和（分布在所有等级上）。性能很重要，因为我想在 1K+ 内核上快速做到这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T18:52:03.303

这可以通过`MPI_Allreduce()`with `MPI_SUM`or`MPI_MAX`运算符来实现。请参阅[MPI_Allreduce](http://www.mpi-forum.org/docs/mpi-11-html/node82.html)的文档。它应该以给定架构的最佳可能方式之一来实现。

```
int arr_a[LEN], arr_b[LEN];
...
// Fill in arr_a
MPI_Allreduce(arr_a, arr_b, LEN, MPI_INT, MPI_SUM, MPI_COMM_WORLD);
// Result is now in arr_b 
```

或者，如果内存不足，您可以使用就地操作，但这会损害性能：

```
MPI_Allreduce(MPI_IN_PLACE, arr_a, LEN, MPI_INT, MPI_SUM, MPI_COMM_WORLD); 
```

# php - 如何根据访问计数限制 IIS 中的页面访问？

> ID：10885975
> 
> 赞同：0
> 
> 时间：2012-06-04T18:07:23.607
> 
> 标签：php, http, iis, iis-7, iis-6

我们有一个内部用户，他开发了一些脚本来定期轮询我们的一些内部工具，例如每三秒一次。

用户已将脚本（基于 JS）传播给其他员工。因此，我们基于 IIS 的服务器每隔几秒钟就会收到对某些工具的大量点击。

我相信我们可以使用 PHP 来阻止这种情况，但修复会很糟糕。
例如，问题 6202116 的答案类似于我们对基于 PHP 的修复所需要的答案。

但是，我们认为 IIS 6.0 应该能够根据访问计数（每个 IP）来限制访问。例如，如果用户在两分钟间隔内尝试访问页面超过 3 次，则应拒绝访问。

任何人？

# windows - 使用 sc.exe 使用当前用户帐户创建 Windows 服务

> ID：10885976
> 
> 赞同：2
> 
> 时间：2012-06-04T18:07:24.443
> 
> 标签：windows, service, windows-services, batch-file

我正在尝试编写一个批处理文件，该文件创建一个以当前运行批处理文件的用户身份运行的 Windows 服务。换句话说，如果我，user_x 运行批处理文件，创建的服务将以我，user_x 的身份登录。

由于用户必须登录才能运行批处理文件，我希望有一种方法可以在不输入用户密码的情况下创建服务。

到目前为止，我一直在使用 sc.exe 创建“本地系统”Windows 服务，效果很好。但是我不明白如何为当前用户做同样的事情。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T04:31:08.747

不，您不能在不知道用户密码的情况下创建以用户身份运行的服务，即使您已经以相关用户身份登录也是如此。这是因为系统必须在注册表中保存用户密码的副本（使用可逆加密）才能将服务配置为以该用户身份运行。

# c# - 为什么我的服务在安装后没有启动？

> ID：10885978
> 
> 赞同：0
> 
> 时间：2012-06-04T18:07:30.543
> 
> 标签：c#, .net, service, windows-services, installation

我创建了一个设置为自动启动的 Windows 服务。我还在安装程序中添加了以下代码：

```
 public ProjectInstaller()
    {
        InitializeComponent();
        serviceProcessInstaller1.AfterInstall += new InstallEventHandler(serviceProcessInstaller1_AfterInstall); 
    }

    void serviceProcessInstaller1_AfterInstall(object sender, InstallEventArgs e)
    {
        try
        {
            var sc = new ServiceController(serviceInstaller1.ServiceName);
            sc.Start();
        }
        catch
        {
        }
    }

    protected override void OnCommitted(IDictionary savedState)
    {
        try
        {
            var sc = new ServiceController(serviceInstaller1.ServiceName);
            sc.Start();
        }
        catch
        {
        }
    } 
```

该服务已正确安装，但它永远不会启动。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:28:37.107

也许您需要放入一些临时诊断日志记录，也许使用`System.IO.File.WriteAllText();`. 我知道这不是您要寻找的答案，但它可能会给您最快的解决方案！

```
try
{
    var sc = new ServiceController(serviceInstaller1.ServiceName);
    sc.Start();
    System.IO.File.WriteAllText(@"c:\temp\servicestart.txt", "Service started");
}
catch (Exception ex)
{
    System.IO.File.WriteAllText(@"c:\temp\servicestart.txt", ex.Message);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:22:28.513

I've created a service a while ago and what mine differs from yours is that you declared this way

`var sc = new ServiceController(serviceInstaller1.ServiceName);`

mine instead of taking the serviceInstaller1.ServiceName I was giving the name via a simple string like this

`var sc = new ServiceController("MyService");`

I think this isn't the problem at all, but when talking about services everything is worth a try

EDIT: giving a look at it now I've seen that the name I used was actually the DisplayName not the service name, try passing it manually or by using `serviceInstaller1.DisplayName`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T18:15:51.410

确保在您的`Main()`函数中有此行：

`ServiceBase.Run(new ServiceClass());`

我有几次离开时感到内疚 `Application.Run(new Class());` （如果你是从 Windows 窗体应用程序开始的）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T00:22:04.723

它是否可能依赖于另一个服务。或者您是否尝试过延迟启动？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-09-15T13:41:38.313

这对我有用

```
protected override void OnAfterInstall(IDictionary savedState)
{
      base.OnAfterInstall(savedState);
      System.ServiceProcess.ServiceController sc = new System.ServiceProcess.ServiceController(serviceInstaller1.ServiceName);
      sc.Start();
} 
```

# python - 将图像中的每个像素乘以一个因子

> ID：10885984
> 
> 赞同：2
> 
> 时间：2012-06-04T18:07:58.553
> 
> 标签：python, image-processing, python-imaging-library, rgb, pixel

我有一张使用拜耳滤镜创建的图像，颜色略有偏差。我需要将每个像素的 RG 和 B 乘以某个因数（R、G 和 B 各有一个不同的因数）以获得正确的颜色。我正在使用 python 成像库，当然也用 python 编写。有没有办法有效地做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T18:47:48.170

这是如何做到的：

1.  首先将图像拆分为 RGB 通道。
2.  用于`point`将通道乘以因子（`1.5`在示例中，在 r 通道上）。
3.  合并频道。

继承人的代码：

```
import Image
im = Image.open('1_tree.jpg')
im = im.convert('RGB')
r, g, b = im.split()
r = r.point(lambda i: i * 1.5)
out = Image.merge('RGB', (r, g, b))
out.show() 
```

原来的：

![在此处输入图像描述](../Images/e7d7d8fd2f06362676d31cbc801158d0.png)

红色通道乘以`1.5`（它有点红..）：

![在此处输入图像描述](../Images/f9b03bc378e8f5ab53de197a3a311688.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-05-27T09:17:49.610

您可以非常有效地执行此操作，并且只需使用带有`convert()`函数的简单变换矩阵：

```
#!/usr/bin/env python3 

from PIL import Image 

# Open image 
im = Image.open('tree.jpg') 

# Make transform matrix, to multiply R by 1.5, leaving G and B unchanged
Matrix = ( 1.5, 0,  0, 0, 
           0,   1,  0, 0, 
           0,   0,  1, 0) 

# Apply transform and save 
im = im.convert("RGB", Matrix) 
im.save('result.png') 
```

输入图像：

[![在此处输入图像描述](../Images/598c4c488bf829767042db39a36d56ba.png)](https://i.stack.imgur.com/ZayHP.jpg)

结果图片：

[![在此处输入图像描述](../Images/81f60c2c4202229c01f480d704be0b1d.png)](https://i.stack.imgur.com/rlu3C.png)

**关键词**：Python、PIL、Pillow、颜色矩阵、颜色矩阵、变换、乘法通道、比例通道、分离、单独、单独通道、波段、组件、单独、分割通道、合并通道、图像、图像处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T18:27:24.700

作为一项基本优化，如果您创建 3 个查找表，R、G 和 B 各一个，将输入值 (0-255) 映射到输出值 (0-255)，可能会节省一点时间。查找数组条目可能比乘以十进制值并将结果四舍五入为整数更快。不知道快多少。

当然，这假设值应该始终映射相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T18:44:17.343

您可以使用[astynax 的建议](https://stackoverflow.com/a/10886148/5987)将`.split`图像拆分为三个通道中的每一个的单独图像，然后将它们重新组合在一起。`.eval``Image.merge`

如果您的任何乘法因子大于 1，请务必将输出钳制为 255。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T18:19:21.047

From documentation:

```
from PIL import Image
Image.eval(image, function) => image 
```

Applies the function (which should take one argument) to each pixel in the given image. If the image has more than one band, the same function is applied to each band. Note that the **function is evaluated once for each possible pixel value**, so you cannot use random components or other generators.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-18T19:59:09.200

如果类型是 numpy.ndarray 只是 img = np.uint8(img*factor)

# c - 在调用 C 标准库函数之前是否应该备份寄存器？

> ID：10885985
> 
> 赞同：0
> 
> 时间：2012-06-04T18:08:02.623
> 
> 标签：c, assembly, x86, standard-library

*   在汇编中，您应该在调用 C 标准库函数之前备份寄存器吗？
*   标准库是否保证其所有函数都备份调用者的寄存器并最终恢复它们？
*   我在哪里可以找到有关此问题的官方信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:12:12.163

我认为这里只适用调用约定。[http://en.wikipedia.org/wiki/X86_calling_conventions](http://en.wikipedia.org/wiki/X86_calling_conventions)

C 标准库不保证它的函数为调用者备份寄存器。这取决于调用约定以及编译器如何处理它。

假设 C 函数对寄存器一无所知。

你会发现一个函数正在使用哪个调用约定，形成函数的声明/签名。默认应该是 cdecl。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:27:36.713

它是特定于平台的，通常您不需要在调用站点专门保存和恢复寄存器，被调用者通常会这样做。您只需要遵循特定平台的链接约定。C 库不是无状态的，通常在不初始化库的情况下调用一些函数通常不是一个好主意，因为它是在包含 main() 的典型 c 程序对象中完成的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T18:15:33.300

这是一个特定于平台的问题，而不仅仅是一个特定于硬件的问题。C 标准库设计为从 C 程序调用，其中调用约定（通常）在编译时处理，并为您完成适当的寄存器和堆栈操作。

请查阅适用于您平台的特定于平台的 ABI 指南，以确定如何调用外部链接函数。

# php - 寻求移动客户端-服务器应用策略的建议

> ID：10885993
> 
> 赞同：1
> 
> 时间：2012-06-04T18:08:34.867
> 
> 标签：php, api, rest, mobile, middleware

我正在就我的某个未来项目的以下计划寻求建议。

*   大图
    *   我想制作一个移动客户端（iOS、Android、Windows Phone 等），它将从我的网站查询（读/写）数据库并显示其结果。
    *   *加上其他几个功能......*

我知道从客户端直接访问数据库（绕过 Web 服务器）是一个坏主意，尤其是在 Internet 上。我认为大多数共享的虚拟主机计划无论如何都禁止这样做。所以这是我想要的解决方案......

1.  移动客户端通过 API 调用将数据发送到网络服务器。
2.  网络服务器处理 REST API 调用并查询数据库。网络服务器充当移动客户端和数据库服务器之间的中间件。
3.  网络服务器接收来自数据库查询的结果并将它们传递给移动客户端。
4.  移动客户端在客户端显示/操作数据。

我对 API 的体验仅限于 Twitter、Instagram 和 Google 购物 API 的使用。根据我的经验，最好以 JSON 格式在移动设备和网络服务器之间传输数据。

现在，这是我的担忧...

1.  如何确保只有登录用户才能使用 API？OAuth 是解决方案吗？
2.  对于 REST API，如果它是 RESTful 会更好吗？

该网站的当前环境是与 PHP 和 MySQL 共享托管，但我正在考虑将来将其转移到基于云的服务。我打算使用 CodeIgniter 或 CakePHP 或 Apify 来实现中间件。

如果有人能在上面批评我的计划或提出比我脑海中的更好的替代方案，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T18:47:17.627

REST 可能是您正在寻找的最佳架构。你得到的 RESTful 越多越好。

OAuth 是一种授权协议，它处理哪些网站有权使用您的凭据。*Authorization*与*authentication*不同，尽管可以使用来自另一方的 Authorization 来确保身份验证。

OAuth 的选择取决于您正在构建的服务。例如，如果您的应用程序基于 Twitter，则使用 Twitter OAuth 进行身份验证是有意义的。

如果您的服务将提供自己的凭据，并且每个用户都有自己的用户名/密码由您存储，那么 OAuth 可能不是最佳选择。在这种情况下，您需要设置 OAuth 客户端和 OAuth 服务器，这不是必需的。

对于自己的身份验证，[HTTP Digest Auth](https://en.wikipedia.org/wiki/Digest_access_authentication)是一个不错的选择：它易于实现，很多库已经支持它，并且对于大多数情况来说足够安全。

* * *

避免使用 PHP 中的会话和 cookie。REST 是无状态的，这些功能在服务器上充满了客户端状态。

如果有一天您需要将服务扩展到更多服务器，那么在它们之间同步会话是一件很痛苦的事情。

照顾像`Expires`,`ETag`和`Last-Modified`. 它们提高了 API 的整体性能，您可以设置一个反向代理（服务器和客户端之间的中间件）来为您缓存内容。

API 上的公共数据不应要求身份验证。缓存经过身份验证的数据时，您不能在不同用户之间共享此缓存。公共数据缓存可以共享。

JSON 和 XML 都易于处理和操作。有时 JSON 更好，有时 XML 更好。有关这些格式差异的更多信息，请参阅[此答案。](https://stackoverflow.com/questions/10777910/idl-for-json-rest-rpc-interface/10843898#10843898)

看看[Respect\Rest](http://documentup.com/Respect/Rest)、[Varnish](http://www.varnish-cache.org/)和[Frapi](http://getfrapi.com/)。这些是 REST API 的绝佳工具。

# android - Android - 如何构建 webview？

> ID：10885995
> 
> 赞同：0
> 
> 时间：2012-06-04T18:08:40.527
> 
> 标签：android, android-layout, webview

我在 ViewFlipper 中使用一些 webviews 来显示一些文本，这样我就可以获得完整的理由和 html 的一些其他方面。

```
WebView welcomeText = new WebView(this);
welcomeText.setVerticalScrollBarEnabled(false);
welcomeText.setBackgroundColor(0x00000000);
((LinearLayout) findViewById(R.id.welcomeText)).addView(welcomeText);
welcomeText.loadData(getString(R.string.welcome_text), "text/html", "utf-8"); 
```

和xml：

```
<LinearLayout
android:id="@+id/welcomeText"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:textSize="16dip" /> 
```

除了我希望消除的一个小烦恼之外，这很有效。当我在打开应用程序时第一次切换到带有 webview 的子视图时，webview 的高度似乎还没有设置，所以它会导致一种手风琴的影响（所以 webview 会快速滑动到位，按下其余的视图）。然后使用 webview 进入下一个子视图，同样的情况也发生在那个子视图上。回到前一个视图然后可以使用已经完全构建的视图。我不确定它是否相关，但我在 onCreate 期间也收到 LogCat 中的 webcore 警告

```
"06-04 19:43:48.176: W/webcore(8416): Can't get the viewWidth after the first layout" 
```

如何将 webview 设置为已设置正确的高度/宽度，以便当我到达视图时它不会跳入视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:31:34.857

你可以得到这样的方向：

```
int orientation=getResources().getConfiguration().orientation;

int height;

if(orientation==Configuration.ORIENTATION_LANDSCAPE){
    height=50;
}
else {
    height=100;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:30:02.393

您需要添加带有布局参数的 WebView... 示例：

```
WebView welcomeText = new WebView(this);
welcomeText.setVerticalScrollBarEnabled(false);
welcomeText.setBackgroundColor(0x00000000);

float density = getResources().getDisplayMetrics().density;
int WEBVIEW_HEIGHT=100;
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, (int) (WEBVIEW_HEIGHT*density));

((LinearLayout) findViewById(R.id.welcomeText)).addView(welcomeText,layoutParams);
welcomeText.loadData(getString(R.string.welcome_text), "text/html", "utf-8"); 
```

# php - 从存储的十进制打印可读成本

> ID：10885996
> 
> 赞同：4
> 
> 时间：2012-06-04T18:08:41.663
> 
> 标签：php, decimal, number-formatting

PHP有没有办法显示2（或x）个小数位，但如果是整数则不显示.00？

我看过[number_format](http://php.net/manual/en/function.number-format.php)，但它看起来并不完全适合这个..虽然我希望逗号每隔 3 个非小数位

```
34.00  => 34
34.7   => 34.70
12424.9=> 12,424.90 
```

我的数字在数据库中存储为带有 2 个小数位的浮点数，所以我不一定需要它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:14:37.527

你可以做的是首先检查它是否是一个整数，通过使用[floor()](http://php.net/manual/en/function.floor.php)对其进行四舍五入并检查它是否等于完整的十进制版本。

```
echo (floor($cost) == $cost) ? floor($cost) : number_format($cost, 2, '.', ','); 
```

或者

```
if (floor($cost) == $cost) {
    echo floor($cost);
}
else {
    echo number_format($cost, 2, '.', ',');
} 
```

* * *

另一种选择是使用[money_format()](http://www.php.net/manual/en/function.money-format.php)：

```
echo (floor($cost) == $cost) ? floor($cost) : money_format('%.2n', $cost); 
```

或者

```
if (floor($cost) == $cost) {
    echo floor($cost);
}
else {
    echo money_format('%.2n', $cost);
} 
```