# StackOverflow 问答 10651000-10651999

# objective-c - 从 NSObject 生成 JSON

> ID：10651000
> 
> 赞同：0
> 
> 时间：2012-05-18T10:34:00.760
> 
> 标签：objective-c, json, ios

我有一个复杂的对象，其中包含 NSString、NSArray、BOOL 等类型的 ivars。我需要将它们转换为 JSON。

我目前正在做的是为每个 NSObject 的值设置键（尽管键与 NSObject 的属性相同），如下所示：-

```
[crEntityDict setObject:[[MyObjectName sharedObject] vinNumber] forKey:@"vinNumber"];
[crEntityDict setObject:[[MyObjectName sharedObject] make] forKey:@"make"]; 
```

MyObjectName 是一个 Singleton 对象，具有与此处设置的键相同的属性。我只是找不到如何将此对象直接转换为属性名称作为键和属性值作为值的 NSDictionary。

有没有更好、更简单的方法来做到这一点？

**编辑** 这是我试图转换为 JSON 的 NSObject 的完整头文件代码：- MyObjectName.h

```
#import <Foundation/Foundation.h>

@interface MyObjectName : NSObject
{
    NSString *vinNumber,*make,*model;
    int mileage;
    BOOL isKeyPresent;
}

@property (nonatomic,strong) NSString *vinNumber,*make,*model;
@property (nonatomic,assign) int mileage;
@property (nonatomic,assign) BOOL isKeyPresent;

+ (MyObjectName *)sharedObjectName; 
```

如何直接将此对象转换为 JSON 表示，而无需通过设置与 ivars 具有相同名称的键的值来再次创建 NSDictionary，属性名称为键，属性值为值，例如： **{“vinNumber”：，” make":make_value_string,"model":model_value_string,"mileage":mileage_value_int,"isKeyPresent":isKeyPresent_value_bool}**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:09:58.060

[使用来自json.org](http://www.json.org/)的预卷解决方案之一。

# jquery - Fancybox 不适用于 ?i= 之类的链接

> ID：10651003
> 
> 赞同：0
> 
> 时间：2012-05-18T10:34:22.637
> 
> 标签：jquery, fancybox

在我的图片库中，所有链接如下所示：

```
<a class="fancybox" href="http://my.domain/gallery/?i=001"></a> 
```

Fancybox 找不到图片，并显示消息：“请求的内容无法加载。请稍后再试。” 请帮忙指点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:02:39.873

这会有帮助吗？

```
<a href="http://my.domain/gallery/?i=001"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T19:38:28.823

将`type`API 选项添加到您的 fancybox 自定义脚本并将其设置为`image`喜欢

```
$(".fancybox").fancybox({
 "type": "image"
}); 
```

检查[http://fancybox.net/faq](http://fancybox.net/faq) 6 号

# iphone - 键盘隐藏自定义单元格

> ID：10651009
> 
> 赞同：1
> 
> 时间：2012-05-18T10:35:02.810
> 
> 标签：iphone, ios, uitableview

我的表格视图中有一个自定义单元格，当显示键盘时，我的一些单元格隐藏在键盘后面。

为了解决这个问题，我尝试如下

```
- (void) textFieldDidBeginEditing:(UITextField *)textField {
    CustomCell *cell = (CustomCell*) [[textField superview] superview];

    NSIndexPath *indexPath = [self.mySmlMsgTemplatesTbl indexPathForCell:cell];
    [self.mySmlMsgTemplatesTbl scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTop animated:YES];

   // [self.mySmlMsgTemplatesTbl scrollToRowAtIndexPath:[self.mySmlMsgTemplatesTbl indexPathForCell:cell] atScrollPosition:UITableViewScrollPositionTop animated:YES];
} 
```

但它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:20:44.860

您应该尝试以下代码，如下所示。我没有尝试过，但它应该可以工作。

```
- (void)textFieldDidBeginEditing:(UITextField *)textField{  
    CGPoint point = [self.tableView convertPoint:yourtextview.bounds.origin fromView:yourtextview];
    NSIndexPath* path = [self.tableView indexPathForRowAtPoint:point];
    [self.tableView scrollToRowAtIndexPath:path atScrollPosition:UITableViewScrollPositionTop animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:55:26.647

我做这种类型的应用程序，您只需要 textFieldname 或 textfield 标签 ..您可以使用 visiblecell 将标签添加到 textField ...

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{

    if(textField.tag==3)
    {
        tableview.frame=CGRectMake(tableview.frame.origin.x, tableview.frame.origin.y-40,tableview.frame.size.width , tableview.frame.size.height+40);

    }
    else if(textField.tag==4)
    {
        tableview.frame=CGRectMake(tableview.frame.origin.x, tableview.frame.origin.y-40,tableview.frame.size.width , tableview.frame.size.height+40);
    }

}

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    if(textField.tag==3)
    {
        tableview.frame=CGRectMake(0,0, 320,460);
        //tableview.frame=CGRectMake(tableview.frame.origin.x, tableview.frame.origin.y+70,tableview.frame.size.width , tableview.frame.size.height-70); 
    }
    else if(textField.tag==4)
    {
        tableview.frame=CGRectMake(0,0, 320,460);
        //tableview.frame=CGRectMake(tableview.frame.origin.x, tableview.frame.origin.y+70,tableview.frame.size.width , tableview.frame.size.height-70);    
    }
}
- (void)textFieldDidEndEditing:(UITextField *)textField
{
    [textField resignFirstResponder];
    if(textField.tag==3)
    {
        tableview.frame=CGRectMake(0,0, 320,460);
        //scrollview.frame=CGRectMake(tableview.frame.origin.x, tableview.frame.origin.y+70,tableview.frame.size.width , tableview.frame.size.height-70);   
    }
    else if(textField.tag==4)
    {
        tableview.frame=CGRectMake(0,0, 320,460);
        //tableview.frame=CGRectMake(scrollview.frame.origin.x, tableview.frame.origin.y-70,tableview.frame.size.width , tableview.frame.size.height+70); 
    }

} 
```

我在这里使用 scrollView 进行注册表单，这不是你想要的完美代码，但我认为你可以从这段代码中得到想法......希望，这对你有帮助.. :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:36:36.317

例如，如果它是最后一个单元格，这将不起作用。表格视图不能向上滚动那么远。您将需要调整 tableview 框架的大小或使用它的 contentInset 属性来调整它的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T11:40:21.610

还有另一种方法。您可以尝试上下移动整个视图。

希望这会有所帮助

```
#define     kOFFSET_FOR_KEYBOARD    200.0

- (BOOL)textFieldShouldBeginEditing:(UITextField*)textField {
    [txtField addTarget:self action:@selector(setViewMovedUp:)forControlEvents:UIControlEventEditingDidBegin];
    [txtField addTarget:self action:@selector(setViewMovedDown:)forControlEvents:UIControlEventEditingDidEndOnExit];
}

-(void)setViewMovedUp:(id)sender
{
if (isKeyboardAppeared) {
    return;
}

isKeyboardAppeared = YES;

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.3]; // if you want to slide up the view

CGRect rect = self.view.frame;

rect.origin.y -= kOFFSET_FOR_KEYBOARD;
rect.size.height += kOFFSET_FOR_KEYBOARD;

self.view.frame = rect;
[UIView commitAnimations];
}

-(void)setViewMovedDown:(id)sender
{
[self actionSaveRegistration];
if (!isKeyboardAppeared) {
    return;
}

isKeyboardAppeared = NO;

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.3]; 

CGRect rect = self.view.frame;

rect.origin.y += kOFFSET_FOR_KEYBOARD;
rect.size.height -= kOFFSET_FOR_KEYBOARD;

self.view.frame = rect;

[UIView commitAnimations];
} 
```

# iphone - iPhone多语言支持应用程序

> ID：10651018
> 
> 赞同：1
> 
> 时间：2012-05-18T10:35:45.980
> 
> 标签：iphone, ios

我想用三种语言创建我的 iPhone 应用程序。英语和旁遮普语和古吉拉伊语。

“古吉拉特语”和“旁遮普语”在语言区域列表中不可用。所以我无法创建像 values-fr(french) 和 value-rs(russia) 这样的值文件夹 .. 像 dat .. 我如何使用“Punjabi”和“Gujarati”开发这个应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:52:08.700

IOS 4.3 起支持这些字体：http: [//iosfonts.com/](http://iosfonts.com/)

如果找不到字体，则可以使用自定义字体。下面列出的步骤

只需按照以下步骤操作：

1.使用 XCode 作为资源将自定义字体文件添加到项目中
2.在名为 UIAppFonts 的 info.plist 文件中添加一个键。
3.将此键设为数组
4.对于您拥有的每种字体，将字体文件的全名（包括扩展名）作为项目输入到 UIAppFonts 数组中
5.保存 info.plist 6.现在
在您的应用程序中，您可以简单地调用[UIFont fontWithName:@"CustomFontName" size:12] 获取自定义字体以用于您的 UILabel 和 UITextViews 等...</p>

# jquery - 使用 jquery 自动完成很难

> ID：10651022
> 
> 赞同：-1
> 
> 时间：2012-05-18T10:35:54.390
> 
> 标签：jquery, asp.net

我对 jquery 完全陌生。但想将其用于大学项目。我使用了网络服务。这些值是从 SQL 数据库中检索的。代码编译没有任何错误。但是自动完成功能不起作用。

处理程序的代码如下：

```
 <%@ WebHandler Language="C#" Class="Handler" %>

    using System;
    using System.Collections;
    using System.Configuration;
    using System.Data;
    using System.Linq;
    using System.Web;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.UI.HtmlControls;
    using System.Web.UI.WebControls;
    using System.Web.UI.WebControls.WebParts;
    using System.Xml.Linq;
    using System.Data.SqlClient;
    using System.Text;

    public class Handler : IHttpHandler
    {

    public void ProcessRequest(HttpContext context)
    {
        string prefixText = context.Request.QueryString["q"];
        string constr = "Data Source=USER\\SQLEXPRESS;Initial Catalog=my_db;Integrated Security=True;";
        using (SqlConnection conn = new SqlConnection(constr))
        {
           // conn.ConnectionString = ConfigurationManager
                  //  .ConnectionStrings["constr"].ConnectionString;
            using (SqlCommand cmd = new SqlCommand(constr,conn))
            {
                cmd.CommandText = "select [name] from names where " +
                "[name] like @SearchText + '%'";
                cmd.Parameters.Add("@SearchText", SqlDbType.VarChar, 50).Value = prefixText + "%";
                cmd.Connection = conn;
                StringBuilder sb = new StringBuilder();
                conn.Open();
                using (SqlDataReader sdr = cmd.ExecuteReader())
                {
                    while (sdr.Read())
                    {
                        sb.Append(sdr["name"])
                            .Append(Environment.NewLine);
                    }
                }
                conn.Close();
                context.Response.Write(sb.ToString());
            }
        }
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
    } 
```

脚本代码如下：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Home.aspx.cs" Inherits="Home" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
    <script src="scripts/jquery-1.7.2.js" type="text/javascript"></script>
    <script src="scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
     <script src="scripts/jquery.ui.autocomplete.js" type="text/javascript"></script>
    <script src="scripts/jquery.ui.core.js" type="text/javascript"></script>
    <script src="scripts/jquery.ui.position.js" type="text/javascript"></script>
    <script src="scripts/jquery.ui.widget.js" type="text/javascript"></script>
    <link href="scripts/demos.css" rel="stylesheet" type="text/css" />"
    <script type="text/javascript">
          $(document).ready(function () {
            $("#<%= txtsearch.ClientID %>").autocomplete({
                minLength: 1,
                delay: 0,
                "~/Handler.ashx"});      
</script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <asp:TextBox ID="txtsearch" runat="server"></asp:TextBox>

    </div>
    </form>
</body>
</html> 
```

有人可以告诉我我在哪里犯了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:38:59.270

试试这一行：

```
 "~/Handler.ashx"}); 
```

没有 ~ 使用 fiddler (http://www.fiddler2.com/fiddler2/) 查看请求是否发送

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:39:18.267

您初始化自动完成的方式不正确。您必须为`source`您的处理程序设置选项：

```
$("#<%= txtsearch.ClientID %>").autocomplete({
    source: "Handler.ashx",
    minLength: 1,
    delay: 0
}); 
```

此外，自动完成功能会将要搜索的值作为 querystring key 发送`term`，而不是`q`. 因此，在您的处理程序中，您可以通过以下方式获得价值：

```
string prefixText = context.Request.QueryString["term"]; 
```

# sql - 更新空值

> ID：10651025
> 
> 赞同：2
> 
> 时间：2012-05-18T10:36:12.883
> 
> 标签：sql, sqlite

[这个问题](https://stackoverflow.com/questions/1345065/sql-query-replace-null-value-in-a-row-with-a-value-from-the-previous-known-value)反映了我的问题。如何在 SQLite 中做到这一点？

我尝试过`UPDATE`使用自联接，在子查询、触发器和类似的东西中隔离自[联接](https://stackoverflow.com/questions/710212/there-is-a-way-to-access-the-previous-row-value-in-a-select-statement)。这是一个例子：

```
UPDATE stage 
SET title = 
(
  SELECT 
    prior.title
  FROM 
    stage prior,
    stage now
  WHERE 
    prior.rownum+1 = now.rownum
)
WHERE
title is null 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T16:11:36.637

SQLite 中的每个表都有一个名为*rowid*的伪列（可以在几个不同的名称下访问它：`rowid`, `oid`, `_rowid_`，除非这些名称分配给其他真实的列）。rowid 列本质上是一个唯一的行标识符，您可以将其用作排序标准和/或条件。

以下查询演示了如何在*rowid*的帮助下解决您的问题：

```
UPDATE stage
SET title = (
  SELECT title
  FROM stage AS prev
  WHERE title IS NOT NULL AND prev.rowid < stage.rowid
  ORDER BY prev.rowid DESC
  LIMIT 1
)
WHERE title IS NULL 
```

这是[关于 SQL Fiddle 的演示](http://sqlfiddle.com/#!5/76bd6/1)。

您可以在[此 SQLite 手册](http://www.sqlite.org/lang_createtable.html "SQLite Query Language: CREATE TABLE")中阅读有关*rowid*的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T11:21:33.873

我针对您提到的问题提出了一个解决方案（我在 SQL2008、SQLite3 和 Oracle11g 上测试成功）。我在下面复制了该解决方案：

```
CREATE TABLE test(mysequence INT, mynumber INT);
INSERT INTO test VALUES(1, 3);
INSERT INTO test VALUES(2, NULL);
INSERT INTO test VALUES(3, 5);
INSERT INTO test VALUES(4, NULL);
INSERT INTO test VALUES(5, NULL);
INSERT INTO test VALUES(6, 2);
SELECT t1.mysequence, t1.mynumber AS ORIGINAL
, (
    SELECT t2.mynumber
    FROM test t2
    WHERE t2.mysequence = (
        SELECT MAX(t3.mysequence)
        FROM test t3
        WHERE t3.mysequence <= t1.mysequence
        AND mynumber IS NOT NULL
       )
) AS CALCULATED
FROM test t1;

-- below here it was only tested in SQLite3, but I believe it should
-- work on other DBMS since it uses standard/non-proprietary SQL
UPDATE test
SET mynumber = (
    SELECT t2.mynumber
    FROM test t2
    WHERE t2.mysequence = (
        SELECT MAX(t3.mysequence)
        FROM test t3
        WHERE t3.mysequence <= test.mysequence
        AND mynumber IS NOT NULL
       )
); 
```

# c# - IProvideValueTarget 和 IServiceProvider 有什么区别？

> ID：10651027
> 
> 赞同：1
> 
> 时间：2012-05-18T10:36:25.507
> 
> 标签：c#, wpf, mvvm

在这里，我使用 mvvm。因为我的合作伙伴使用类 CommandBindingExtension，因为我可以理解 IProvideValueTarget 和 IServiceProvider 的作用。

```
[MarkupExtensionReturnType(typeof(ICommand))]
public class CommandBindingExtension : MarkupExtension
{
    public CommandBindingExtension(string commandName)
    {
        this.CommandName = commandName;
    }

    [ConstructorArgument("commandName")]
    public string CommandName { get; set; }

    private object targetObject;
    private object targetProperty;

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        IProvideValueTarget provideValueTarget = serviceProvider.GetService(typeof(IProvideValueTarget)) as IProvideValueTarget;
        if (provideValueTarget != null)
        {
            targetObject = provideValueTarget.TargetObject;
            targetProperty = provideValueTarget.TargetProperty;
        }

        if (!string.IsNullOrEmpty(CommandName))
        {
            // The serviceProvider is actually a ProvideValueServiceProvider, which has a private field "_context" of type ParserContext
            ParserContext parserContext = GetPrivateFieldValue<ParserContext>(serviceProvider, "_context");
            if (parserContext != null)
            {
                // A ParserContext has a private field "_rootElement", which returns the root element of the XAML file
                FrameworkElement rootElement = GetPrivateFieldValue<FrameworkElement>(parserContext, "_rootElement");
                if (rootElement != null)
                {
                    // Now we can retrieve the DataContext
                    object dataContext = rootElement.DataContext;

                    // The DataContext may not be set yet when the FrameworkElement is first created, and it may change afterwards,
                    // so we handle the DataContextChanged event to update the Command when needed
                    if (!dataContextChangeHandlerSet)
                    {
                        rootElement.DataContextChanged += new DependencyPropertyChangedEventHandler(rootElement_DataContextChanged);
                        dataContextChangeHandlerSet = true;
                    }

                    if (dataContext != null)
                    {
                        ICommand command = GetCommand(dataContext, CommandName);
                        if (command != null)
                            return command;
                    }
                }
            }
        }

        // The Command property of an InputBinding cannot be null, so we return a dummy extension instead
        return DummyCommand.Instance;
    } 
```

请解释一下它的作用。如果你需要整个课程代码，我会给它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:38:32.427

[`IProvideValueTarget`](http://msdn.microsoft.com/en-us/library/system.windows.markup.iprovidevaluetarget.aspx)是[服务提供者](http://msdn.microsoft.com/en-us/library/system.iserviceprovider.aspx)在这种情况下可以提供的服务之一。有关这些服务的更多信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ee621338.aspx)。

> 支持类型转换器和标记扩展用法的类型的作者通常必须具有有关用法在标记中或周围对象图结构中的位置的上下文信息。可能需要信息，以便正确实例化所提供的对象，或者可以对对象图中的现有对象进行对象引用。使用 .NET Framework XAML 服务时，可能需要的上下文公开为一系列服务接口。

> 可用于标记扩展或类型转换器实现的服务通过上下文参数进行通信，这些参数是每个虚拟方法签名的一部分。在每种情况下，您都在上下文中实现了 IServiceProvider，并且可以调用 IServiceProvider.GetService 来请求服务。

# c# - 为什么我的复选框没有映射到 MVC 模型成员？

> ID：10651030
> 
> 赞同：2
> 
> 时间：2012-05-18T10:36:31.700
> 
> 标签：c#, .net, asp.net-mvc, iis, model

我正在尝试实现[这个答案的建议](https://stackoverflow.com/a/10649724/57428)，但没有将显示名称存储在我的模型代码中，所以我相信这是一个单独的问题。

我有一个 MVC 视图

```
<%@ Page Language="C#" MasterPageFile="PathToMaster" Inherits="System.Web.Mvc.ViewPage<ModelData>" %> 
```

和一个模型：

```
public class ModelData {
    public bool Option1 { get; set; }
} 
```

我有一个带有 HTML 标记的 .aspx，用于包含复选框的表单：

```
<label for="MyCheckbox">Your choice</label>
<%= Html.CheckBoxFor(Model=>Model.Option1, new { id="Option1", @class="checkbox", onchange="return myValidation();", name="MyCheckbox", value="Option one" } ) %> 
```

编译时会产生以下 HTML：

```
<label for="MyCheckbox">Your choice</label>
<input class="checkbox" id="Option1" name="Option1" onchange="return myValidation();" type="checkbox" value="Option one" /><input name="Option1" type="hidden" value="false" /> 
```

每当我选中复选框并提交表单时，控制器操作

```
class MyController : Controller {
   [AcceptVerbs(HttpVerbs.Post)]
   public ActionResult RequestStuff( ModelData data )
   {
   }
} 
```

接收`data`where `Option1`is `false`。

我究竟做错了什么？如何使复选框映射到模型成员？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:16:00.840

既然你说在帮助表达式中更改别名并没有削减它，我花时间准备 MVC2 测试项目，它的外观如下：

MyModel.cs：

```
namespace TestAppMVC2.Models
{
    public class MyModel
    {
       public bool Option1 { get; set; }
    }
} 
```

控制器的操作：

```
 public ActionResult MyAction()
    {
        var viewModel = new MyModel();
        return View(viewModel);
    }

    [HttpPost]
    public ActionResult MyAction(MyModel viewModel)
    {
        bool option = viewModel.Option1;
        return View();
    } 
```

视图（MyAction.aspx）：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<TestAppMVC2.Models.MyModel>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
MyAction
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<h2>MyAction</h2>

<% using (Html.BeginForm()) {%>
    <%: Html.ValidationSummary(true) %>

    <fieldset>
        <legend>Fields</legend>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.Option1) %>
        </div>
        <div class="editor-field">
            <%: Html.CheckBoxFor(model => model.Option1) %>
            <%: Html.ValidationMessageFor(model => model.Option1) %>
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>

<% } %>

<div>
    <%: Html.ActionLink("Back to List", "Index") %>
</div> 
```

看起来像这样：

![基本动作](../Images/3fc8085554c22b532492bfb1ca102c33.png)

勾选复选框后的结果： ![断点停止](../Images/be90a86670856a66a32a67d65fb56b4e.png)

顺便说一句，视图是由 MyModel 类和模板的 Add View -> Strongly Typed View 完全生成的（嗯，几乎完全，我改为）：Edit `TextBoxFor`。`CheckBoxFor`

所以看起来上面的绑定应该没问题。试试这个，然后你可以在复选框上摆弄自定义选项。:)

就像我[在另一个答案中](https://stackoverflow.com/questions/10649454/how-do-i-map-checkboxes-onto-mvc-model-members/10649724#10649724)写的那样，这个想法本质上是一样的，只是在 MVC3 中，Razor 语法看起来更干净一些。但是，当涉及到差异时，就是这样。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:33:09.477

在您的行中：

```
<%= Html.CheckBoxFor(Model=>Model.Option1, new { id="Option1", @class="checkbox", onchange="return myValidation();", name="MyCheckbox", value="Option one" } ) %> 
```

替换`Model`为另一个别名，iem 所以它看起来像：

```
<%= Html.CheckBoxFor(m=>m.Option1, new { id="Option1", @class="checkbox", onchange="return      myValidation();", name="MyCheckbox", value="Option one" } ) %> 
```

您直接引用了模型，其中 CheckBoxFor 采用了一个 HTML 帮助器实例。

我相信以下内容可能有助于您进一步理解：

[MVC HTML 助手和 Lambda 表达式](https://stackoverflow.com/questions/5848940/mvc-html-helpers-and-lambda-expressions)

# java - 使用 HBase 获取数据以使用 Mahout 计算文本相似度

> ID：10651039
> 
> 赞同：3
> 
> 时间：2012-05-18T10:36:59.050
> 
> 标签：java, hadoop, hbase, mahout, hadoop-streaming

在我的项目中，我们试图计算我面临两个问题的一组文档的文本相似度。

1.  我不想重新计算我之前计算过的文档的词频。例如，我有 10 个文档，我计算了所有 10 个文档的词频和逆文档频率。然后我又得到了 2 个文件。现在我不想计算已经存在的 10 个文档的词频，而是想计算新出现的 2 个文档的 TF，然后将 TF 用于所有 12 个文档，并将 12 个文档的 IDF 计算为所有的。 **如何在不重新计算现有文档的 TF 的情况下计算所有文档的 IDF？**

2.  文档的数量可能会增加，这意味着使用内存中的方法 (InMemoryBayesDatastore) 可能会变得很麻烦。我想要的是将所有文档的 TF 保存在 HBASE 表中，当新文档到达时，我计算新文档的 TF，将它们保存在 HBASE 表中，然后我使用这个 HBASE 表来获取所有文档的 TF用于计算 IDF 的文档。 **如何使用 HBase 向 Mahout 的 Text Similarity 提供数据，而不是从序列文件中获取数据？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:51:11.297

我假设在您的 MR 工作中，您正在读取 HDFS 格式并输出到 Hbase。如果我正确理解您的问题，我的建议是计算每个文档的 TF 并将 Term 存储为行键，限定符可以是 documentID，值可以是频率（只是对您的架构的建议）。您必须为每个文档执行 1 个 MR 作业，并且每个文档只需运行一次该作业。

对您正在分析的每个文档执行此操作。

然后运行最终的 MR 作业，以每个术语（即每行）为基础比较所有文档。这将适用于特定条款，但会因“类似条款”而变得复杂。然后你会想要运行某种算法，可能会考虑到术语之间的 Levenshtein 距离，这可能很复杂。

# javascript - 设置最小变量

> ID：10651046
> 
> 赞同：0
> 
> 时间：2012-05-18T10:37:44.337
> 
> 标签：javascript, variables

我正在制作一个灯箱照片库。我想要一个计数器，上面写着例如：3 中的照片 1。

```
var imagenumber = 0;
var imagenumber_count = 1;

function prev_btn() {

    if (imagenumber_count < 1) {
        imagenumber_count = 1;
        document.getElementById('counter_txt').innerHTML = imagenumber_count;
    } else {
        imagenumber_count -= 1;
        document.getElementById('counter_txt').innerHTML = imagenumber_count;
    } 
```

当我在上一个上点击了几次。按钮，然后我点击下一个按钮`imagenumber_count+=1;`，我得到了一个否定的数字，例如：`-1`

请问有谁可以帮助我吗？

编辑：下一个 btn 的功能：`function next_btn(){imagenumber_count+=1;}'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:43:14.073

您可以稍微简化一下：

```
function prev_btn() {

    if (imagenumber_count > 1) {
        imagenumber_count -= 1;
        document.getElementById('counter_txt').innerHTML = imagenumber_count;
    }
} 
```

这假设您没有*其他*递减代码`imagenumber_count`，并且假设您不想`imagenumber_count`成为`0`。如果`0`是它的有效值，请将其更改`> 1`为`> 0`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T10:44:06.987

这会更简单

```
function prev_btn() {

  if (imagenumber_count > 1) {
    imagenumber_count -= 1;
    document.getElementById('counter_txt').innerHTML = imagenumber_count;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:42:09.353

请改用此`if`语句：

```
if(imagenumber_count > 1) {
    imagenumber_count -= 1;
    document.getElementById('counter_txt').innerHTML = imagenumber_count;
} 
```

# android - Android将月份作为两位数

> ID：10651047
> 
> 赞同：1
> 
> 时间：2012-05-18T10:37:56.020
> 
> 标签：android, date

嗨，有谁知道如何以两位数的形式获取月份，例如 04 或 05？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T10:43:38.560

试试这个

```
 dateFormat = "MM";
 SimpleDateFormat sdf = new SimpleDateFormat(dateFormat);
 String month = sdf.format(date); 
```

有关更多详细信息，请查看[Android 中的格式化月份](http://www.java-examples.com/formatting-month-using-simpledateformat)

还要检查[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:46:17.557

嗨 :) 你使用什么类型的语言？javascript 还是 java？在java中你可以尝试：

```
Date x=new Date();
System.out.println(x); // Fri Jun 05 22:43:25 BRT 2009 
```

在javascript中你可以尝试：

```
new Date() // current date and time
new Date(milliseconds) //milliseconds since 1970/01/01
new Date(dateString)
new Date(year, month, day, hours, minutes, seconds, milliseconds) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T10:46:35.887

一个简单的方法是......

```
String date="1";

if(Integer.parseInt(date)<10)
{
date="0"+date;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T10:43:29.060

您可以使用 SimpleDateFormat 更改您想要显示日期的方式，代码可以在这里找到[，这里](http://developer.android.com/reference/java/text/SimpleDateFormat.html) 有更多关于 DateFormat 类[的信息](http://developer.android.com/reference/java/text/DateFormat.html)

# java - 需要空格

> ID：10651050
> 
> 赞同：3
> 
> 时间：2012-05-18T10:38:11.477
> 
> 标签：java, xml, xml-parsing

解析 XML 时出现以下错误。

```
[Fatal Error] :1:63: White spaces are required between publicId and systemId 
```

XML 正在使用 Web 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-15T01:46:55.027

顺序应该如下：`interpretation category`then `interpretation file`。

*   [http://www.springframework.org/schema/context](http://www.springframework.org/schema/context)
*   [http://www.springframework.org/schema/context/spring-context-3.0.xsd](http://www.springframework.org/schema/context/spring-context-3.0.xsd)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:49:13.113

基本上错误表明您`DOCTYPE`必须`SYSTEM`在 wsdl 文件中有一个标识符

# python - 如何让 SimpleHTTPServer 安静下来？

> ID：10651052
> 
> 赞同：14
> 
> 时间：2012-05-18T10:38:27.520
> 
> 标签：python, simplehttpserver

我有以下简单的线程文件服务器供我的应用程序使用：

```
class FileServer(Thread):
    """Simple file server exposing the current directory for the thumbnail
    creator
    """

    def __init__(self, port):
        Thread.__init__(self)
        self.port = port

        Handler = SimpleHTTPServer.SimpleHTTPRequestHandler
        self.httpd = SocketServer.TCPServer(("", port), Handler)

    def run(self):
        self.httpd.serve_forever()

    def stop(self):
        self.httpd.shutdown() 
```

如何防止 SimpleHTTPServer 在每次请求时输出“GET 'http://BLA BLA BLA”？谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-18T10:50:39.207

您可以子类`SimpleHTTPServer.SimpleHTTPRequestHandler`化并覆盖该`log_message`方法。这是您将覆盖的方法，没有文档字符串：

```
def log_message(self, format, *args):
    sys.stderr.write("%s - - [%s] %s\n" %
                     (self.address_string(),
                      self.log_date_time_string(),
                      format%args)) 
```

因此，要简单地忽略所有消息，请将函数的主体替换为`pass`. 对于更细粒度的控制（即，如果您仍然希望打印错误消息），您可以改写`log_request`and/or`log_error`方法。原来的方法是这样的：

```
def log_request(self, code='-', size='-'):
    self.log_message('"%s" %s %s',
                     self.requestline, str(code), str(size))

def log_error(self, format, *args):
    self.log_message(format, *args) 
```

从 2.7 到 3.1，模块名称发生了变化，但这些方法没有改变。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-18T10:48:52.467

在 Bash 中以这种方式运行它：

```
python -m SimpleHTTPServer &>/dev/null 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-02T17:58:07.883

不需要子类。

更简单的解决方案：

```
http_handler = SimpleHTTPServer.SimpleHTTPRequestHandler
http_handler.log_message = lambda a, b, c, d, e: None 
```

# vb.net - 如果在 VB.net 中小于零等于零，则强制计算结果

> ID：10651056
> 
> 赞同：3
> 
> 时间：2012-05-18T10:38:35.580
> 
> 标签：vb.net, numbers, rounding

是否有内置的 VB 函数来确保以下内容：

```
Dim price
Dim subsidy

if price - subsidy <= 0 then 
    price = 0
end if 
```

实际上，我还有很多其他事情要计算价格，所以我想将其简化为：

```
Dim price = calculatedPrice - subsidy 
```

并将其包装成一些VB格式，以确保如果`price`变成负数，它会被强制为零。

我在想一个简单的类型转换可能会做到这一点，但不确定*哪种*类型适合。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T10:41:09.547

你可以用[`Math.Max`](http://msdn.microsoft.com/en-us/library/7x97k0y4.aspx#Y0)它来做到这一点：

```
Dim price = Math.Max(calculatedPrice - subsidy, 0) 
```

# iphone - 主线程上的单例类 - iPhone

> ID：10651062
> 
> 赞同：3
> 
> 时间：2012-05-18T10:39:13.103
> 
> 标签：iphone, objective-c, cocoa, singleton

我的问题可能很愚蠢，但我无法理解。我使用此代码创建了一个单例类。

```
+ (GameRequestHandler *) sharedInstance
{
    static dispatch_once_t pred;
    static GameRequestHandler *shared = nil;

    dispatch_once(&pred, ^{
        shared = [[GameRequestHandler alloc] init];
    });
    return shared;
} 
```

当我从这个单例对象调用方法时，它们是在主线程还是在后台线程中调用的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T10:44:59.450

这些方法在您调用它们的线程上调用。

`dispatch_once`只是确保传递给它的块在应用程序的生命周期中只执行一次。我不认为它使用线程，如果是这样，那是你不需要担心的实现细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-08T08:12:47.537

如果您需要在主线程上调用，请使用它；

```
dispatch_once(&pred, ^{
        dispatch_async(dispatch_get_main_queue(), ^{
                    shared = [[GameRequestHandler alloc] init];
        });
    }); 
```

# silverlight - Telerik Graph - 如何实现 OnPropertyChanged 方法

> ID：10651063
> 
> 赞同：0
> 
> 时间：2012-05-18T10:39:17.377
> 
> 标签：silverlight, properties, telerik, dependency-properties, inotifypropertychanged

我正在尝试学习使用 Telerik 创建图表。

目前我正在使用此处提供的示例：

[http://demos.telerik.com/silverlight/#Chart/SimpleFiltering](http://demos.telerik.com/silverlight/#Chart/SimpleFiltering)

示例 ViewModel 调用了以下方法：

```
this.OnPropertyChanged("SeriesEU27Visibility"); 
```

我是否缺少组件/参考，或者这是用户应该实现的？

如果用户应该实现它，在这种情况下什么是合适的方法？

这会是一个可行的解决方案吗？：

```
 protected void OnPropertyChanged(string name)
      {
          PropertyChangedEventHandler handler = PropertyChanged;
          if (handler != null)
          {
              handler(this, new PropertyChangedEventArgs(name));
          }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:58:52.317

OnPropertyChanged 更改的辅助方法，就像您展示的那样，非常常见，并且通常在可重用的基类中实现。

要在尚未继承这些特性的类中直接使用它，您需要继承`INotifyPropertyChanged`并声明 PropertyChanged 事件：

```
public MyClass : INotifyPropertyChanged
{
   public event PropertyChangedEventHandler PropertyChanged;
   ...
} 
```

注意：您对局部变量的初始分配不会加快速度，标准代码如下所示：

```
 protected void OnPropertyChanged(string name)
  {
      if (PropertyChanged != null)
      {
          PropertyChanged(this, new PropertyChangedEventArgs(name));
      }
  } 
```

否则，是的，你是正确的。

# android - 字符串数组内的字符串数组

> ID：10651065
> 
> 赞同：5
> 
> 时间：2012-05-18T10:39:18.267
> 
> 标签：android, xml, string, arrays

我想在另一个字符串数组中创建一个字符串数组，如下所示：

```
<string-array name="names">
        <string-array name="man">
            <item>Jake</item>
          </string-array>
            <string-array name="woman">
            <item>Loise</item>
          </string-array>
</string-array> 
```

但我不知道如何访问主字符串数组中的字符串数组。在这样做之前，我将所有名称组织在同一个字符串数组中，并以这种方式访问​​：

```
String names[] = res.getStringArray(R.array.names); 
```

但现在我需要对数据进行分类。如何访问 SUB 字符串数组？

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T10:54:32.427

外部数组应该是一个数组，而不是字符串数组（因为它不再保存字符串）。您想单独声明字符串数组，然后声明一个引用这些字符串数组的数组，如此[处](https://stackoverflow.com/questions/4326037/android-resource-array-of-arrays)所述（SO-thread，请参阅接受的答案）。还解释了检索。

# c# - 间歇性容量小于当前大小错误

> ID：10651066
> 
> 赞同：1
> 
> 时间：2012-05-18T10:39:31.153
> 
> 标签：c#, multithreading

我正在尝试对大量实体执行迭代，以查看它们的匹配程度

我最初写的（其中 MatchData 是结构列表 & GenerateMatch 对两个实体执行操作）

```
for (int i = 0; i < count; i++)
  {
      for (int j = i + 1; j < count; j++)
      {
       MatchData.Add(GenerateMatch(i, j));
       Console.WriteLine("Stage :" + i + " ::: " + j);
      }
  } 
```

效果很好，但速度很慢

所以我把它改成

```
Parallel.For(0, count, i =>
  {
   for (int j = i + 1; j < count; j++){
        MatchData.Add(GenerateMatch(i, j));
        Console.WriteLine("Stage :" + i + " ::: " + j);
        }}); 
```

考虑到这会给我一个巨大的列表，它偶尔（但不总是）会引发错误“容量小于当前大小”

作为并行库的新手，我想我正在做的事情可以更好地执行（ThreadSafe？）任何指针

作为次要问题，我如何计算已完成的 i 数量，因为 i 出现故障。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:03:01.643

您的代码中的错误是对 MatchData 的并发访问。可能的解决方案：

```
var matches =
from i in ParallelEnumerable.Range(0, count)
from j in ParallelEnumerable.Range(i+1, count - (i+1))
select GenerateMatch(i, j); 
```

只需使用 PLINQ。您不必以这种方式处理同步集合。

# php - 更新长寿命访问令牌服务器端

> ID：10651070
> 
> 赞同：6
> 
> 时间：2012-05-18T10:39:44.410
> 
> 标签：php, facebook, access-token

我们正在从 facebook 中检索长期存在的访问令牌，但是我们需要自动更新此令牌，以便它不会每 60 天过期一次。

阅读它说您只能使用端点交换**短期令牌的文档。**

由于我们没有短期令牌，我们如何在服务器端执行此操作而无需每 60 天手动重新授权一次？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T11:13:02.690

不可能无休止地扩展令牌。请参阅此处的场景 4 [https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)：

> 使用下面的新端点，您将能够延长现有的、未过期的、短期用户 access_token 的过期时间。请注意，**端点只能用于扩展短期用户 access_tokens**。如果您传递具有长期过期时间的 access_token，端点将简单地将相同的 access_token 传递回给您，而不会更改或延长过期时间。
> 
> 要获得长期用户 access_token，只需将您自己的 client_id（您的 app_id）、您的 app_secret 和未过期的短期 access_token 传递给下面的端点。你会得到一个新的长寿命用户access_token；除了传递到端点的短期 access_token 之外，此 access_token 还将存在。 **如果您想刷新仍然有效的长寿命 access_token，则必须先获取一个新的短寿命用户 access_token**，然后再调用下面的相同端点。返回的 access_token 将有一个新的长寿命到期时间，但是，access_token 本身可能与先前授予的长寿命 access_token 相同也可能不同。

# workflow-foundation-4 - 自定义活动的属性窗口中的更改控件

> ID：10651071
> 
> 赞同：0
> 
> 时间：2012-05-18T10:39:45.367
> 
> 标签：workflow-foundation-4, workflow-rehosting

我有一个自定义活动，它有几个参数和几个属性。将活动放入重新托管的设计器时，参数和属性都可以从属性窗口中看到，用户可以在其中输入值或变量名称等。

对于其中一个属性（在属性窗口中），我不希望用户能够输入它，而是用组合框替换文本框，以便他们可以从值列表中进行选择。这个，我似乎找不到答案。

我使用了标记为已解决的现有条目中的一些代码，但我的要求略有不同。

在我的自定义活动中，我在相关属性上方放置了以下内容：

```
[EditorAttribute(typeof(ComboBoxTest), typeof(System.Drawing.Design.UITypeEditor))] 
```

并创建了 ComboBoxTest 类，继承自 UITypeEditor：

```
public class ComboBoxTest : UITypeEditor
    {
        public override UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
        {
            return UITypeEditorEditStyle.DropDown;
        }
        public override object EditValue(ITypeDescriptorContext context, IServiceProvider provider, object value)
        {
            var editorService = (IWindowsFormsEditorService)provider.GetService(typeof(IWindowsFormsEditorService));
            ListBox list = new ListBox();
            //ComboBox list = new ComboBox();

            // Your code here to populate the list box with your items
            list.Items.Add("A");
            list.Items.Add("B");
            list.Items.Add("C");

            EventHandler onclick = (sender, e) =>
            {
                editorService.CloseDropDown();
            };

            list.Click += onclick;

            editorService.DropDownControl(list);

            list.Click -= onclick;

            return (list.SelectedItem != null) ? list.SelectedItem : null;
        }
    } 
```

但是，将活动放入设计器时，该属性在属性窗口中仍然有文本框，并且没有出现组合框。我什至无法调试它，因为它没有遇到任何断点。

是否有人会碰巧知道 A）我的做法是否正确或 B）如果我在某处有错误，甚至 C）我应该使用更好的方法。

我希望这一切都是有道理的。感谢您的阅读！

亲切的问候，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:05:21.070

您可以使用`Debug.Print("write something")`并查看输出窗口来调试设计器的东西。

也试试

```
[Editor(typeof(ComboBoxTest), typeof(System.Drawing.Design.UITypeEditor))] 
```

反而

# javascript - unitPngFix 不显示 PNG

> ID：10651072
> 
> 赞同：0
> 
> 时间：2012-05-18T10:39:49.077
> 
> 标签：javascript, wordpress, internet-explorer-6, png

我正在使用 WordPress。我想要通过 CSS 的 PNG 背景。现在在默认主题的主题文件夹中，我将 UnitPNGFIX 放在 JS 文件夹中。在同一个文件夹中，我将 clear.gif 和 JS 中的路径重命名为

```
var clear="image/clear.gif"; 
```

至

```
var clear="clear.gif"; 
```

现在，当我在 IE6 中观察它时，它没有显示任何 PNG。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:10:01.113

通过 CSS，您需要以这种方式处理图像：

背景：url（“../img/clear.gif”）不重复；

如果图像位于主题的 js 目录中，则可以通过路径“../js/clear.gif”引用它

# c# - 在布局不工作的部分视图中显示图表？

> ID：10651073
> 
> 赞同：0
> 
> 时间：2012-05-18T10:39:50.390
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, partial-views

我正在尝试在我的布局上显示图表。该图表位于局部视图内。但我得到这个错误:::

> 子请求的执行失败。请检查 InnerException 以获取更多信息
> 
> 找不到路径“/”的控制器或未实现 IController。

新错误：{“执行处理程序'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper'的子请求时出错。”}

这是我的 OfficeStatisticNKI 控制器：控制器

```
public ActionResult Partialchart()
        {
            OfficeStatisticQueryViewModel model = new OfficeStatisticQueryViewModel();
            model.StartDate = DateTime.Now.ToShortDateString();
            model.EndDate = DateTime.Now.ToShortDateString();
            int allcompletedNKI = OfficeStatisticRepository.AllCompletedGoalCards();
            model.AllCompletedNKI = allcompletedNKI;
            var averageGrades = OfficeStatisticRepository.GetAverageGradeForAllCoreValues2();
            if (averageGrades.Count != 0)
            {
                var dataItems = (averageGrades.Select(averageGrade => averageGrade.AverageGrade).ToArray());
                Data data = new Data(
                    dataItems.Select(y => new Point { Color = GetBarColour(y), Y = y }).ToArray());

                Highcharts chart1 = new Highcharts("Chart")
                .SetXAxis(new XAxis { Categories = averageGrades.Select(averageGrade => averageGrade.CoreValue.Name).ToArray() })
                .SetYAxis(new YAxis { Min = 0, Max = 10, TickInterval = 1, Title = new YAxisTitle { Text = "Betygskalan" } })
                .SetSeries(new Series { Data = data, Name = "Snittbetyg" })
                .SetLegend(new Legend { Enabled = false })
                .SetTitle(new Title { Text = "statistic" })
                .InitChart(new Chart { DefaultSeriesType = ChartTypes.Column });

                model.Chart = chart1;
                model.message = " ";
                return PartialView(model);
            }
            else
            {
                model.message = "error";
                return PartialView(model);
            }

        } 
```

这是我布局中的代码：

```
@Html.Action("Partialchart","OfficeStatisticNKI"); 
```

我想做的就是显示这个图表我做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:56:50.470

您在此处显示的操作方法确定包含在**OfficeStatisticNKI**控制器中吗？您的控制器是否继承自**Controller**类？

# php - 在 php 中调整 GtkMessageDialog 的大小

> ID：10651074
> 
> 赞同：0
> 
> 时间：2012-05-18T10:39:51.807
> 
> 标签：php, user-interface, php-gtk

我需要在 php 中调整 GtkMessageDialog 的大小，以便为长字符串留出足够的空间（不要换行）！

创造它：

```
$dialog = new GtkMessageDialog($this->window, Gtk::DIALOG_MODAL, Gtk::MESSAGE_QUESTION, Gtk::BUTTONS_YES_NO, ""); 
```

设置消息输出：

```
$message = "I NEED A LONG STRING TO DISPLAY IN THE DIALOG\n"
$dialog->set_markup($message); 
```

如何调整对话框大小？（字符串应该排成一行）

谢谢和问候

leon22

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T22:10:32.913

如果我是正确的，您不想使用新行来增加对话框窗口的高度。

怎么做没有区别，和所有其他小部件一样，只是使用`set_size_request`方法。此外，每当您遇到此类问题时，只需告诉 php 获取可用的方法。

因此，对于本示例，您将使用它来获取所有方法：

```
file_put_contents("out.txt",print_r(get_class_methods($dialog),true)); 
```

这是一个完整的示例，可以根据需要设置大小：

```
<?php
$window = new GtkWindow();
$window->set_size_request(400, 600);
$window->connect_simple('destroy', array('Gtk','main_quit'));

$message = '<b>DO I NEED</b> A LONG STRING TO <b><span foreground="blue"> '.
"DISPLAY IN THE DIALOG?</span></b>\n";

$dialog = new GtkMessageDialog($window, Gtk::DIALOG_MODAL, 
Gtk::MESSAGE_QUESTION, Gtk::BUTTONS_YES_NO, null); 

$dialog->set_size_request(600,400);
$dialog->set_markup($message);

$answer = $dialog->run();
$dialog->destroy(); 

if ($answer == Gtk::RESPONSE_YES) 
    echo "So I need it.";
else if ($answer == Gtk::RESPONSE_NO) 
    echo "I see, I don't need it.";
else 
    echo "Choose something.";

$window->show_all();
Gtk::main();
?> 
```

# linux - 检查目录（符号链接）是否仍然指向同一个地方

> ID：10651076
> 
> 赞同：0
> 
> 时间：2012-05-18T10:39:57.317
> 
> 标签：linux, bash, shell, unix

例如，我负责将每个版本复制到发布文件夹的脚本`release/version_0.0.2`。我还为这个版本（文件夹`release/version_0.0.2`）设置了一个符号链接，名为`latest`. 要运行脚本，您必须位于脚本所在的文件夹中（使用相对路径的错误设计决策）。

我的问题是这个脚本的用户几乎总是希望使用最新版本。所以他们设置`latest`到工作目录并从那里运行脚本。但是当我发布一个新版本时，他们会自动使用旧版本，所以希望脚本（用 bash 编写）询问用户他/她是否想使用这个旧版本。

我的想法是检查脚本是否从 运行`latest`，但是当我更改符号链接时，当我运行脚本而不是在 shell 中时，$PWD 会发生变化。

这是一个例子：

```
selnx183:~> cd latest/
selnx183:~/latest> echo $PWD
/home/ejohael/latest
selnx183:~/latest> ps
  PID TTY          TIME CMD
11082 pts/190  00:00:00 tcsh
32527 pts/190  00:00:00 ps
selnx183:~/latest> pwdx 11082
11082: /home/ejohael/release/version_0.0.2
selnx183:~/latest> ./test 
-------------------------------------------------------------------
/home/ejohael/latest
/home/ejohael/latest
/home/ejohael/latest
/home/ejohael/release/version_0.0.2
~/latest

-------------------------------------------------------------------
/home/ejohael/latest
selnx183:~/latest> rm ~/latest
selnx183:~/latest> ln -s ~/release/version_0.0.3/ ~/latest
selnx183:~/latest> echo $PWD
/home/ejohael/latest
selnx183:~/latest> ps
  PID TTY          TIME CMD
11082 pts/190  00:00:00 tcsh
32727 pts/190  00:00:00 ps
selnx183:~/latest> pwdx 11082
11082: /home/ejohael/release/version_0.0.2
selnx183:~/latest> ./test 
-------------------------------------------------------------------
/home/ejohael/release/version_0.0.2
/home/ejohael/release/version_0.0.2
/home/ejohael/release/version_0.0.2
/home/ejohael/release/version_0.0.2
~/release/version_0.0.2

-------------------------------------------------------------------
/home/ejohael/release/version_0.0.2
selnx183:~/latest> 
```

测试如下：

```
#!/bin/bash

echo `env` > log

echo "-------------------------------------------------------------------"

echo $PWD
echo `pwd`
echo `cd -L . ; pwd`
echo `cd -P . ; pwd`
echo `dirs`
echo $OLDPWD

echo "-------------------------------------------------------------------"

pushd `dirname -- $0` > /dev/null
echo `pwd -L`
popd > /dev/null 
```

我不想强迫用户始终使用最新版本，但是当用户认为它使用最新版本并警告用户时，我会发现什么。

**编辑：**我只想在用户从旧的最新版本运行时得到这个，而不是当用户从 release/version_x.xx 运行旧版本时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:16:01.880

我会考虑类似的事情

```
[ $(stat -c%i .) != $(stat -L -c%i ../latest) ] && echo not in the latest directory 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:22:39.693

不确定我是否完全了解情况，但是您知道`readlink`命令吗？`readlink latest`将打印`latest`指向的文件/文件夹的名称。你的脚本会知道`latest`应该指向什么；任何偏离都会向用户发出警告。

# sql - 从表中检索上个月的行

> ID：10651077
> 
> 赞同：0
> 
> 时间：2012-05-18T10:39:58.323
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我在获取最近一个月的数据时遇到了问题。

由于我的表没有任何`DateTime`列，是否有机会从表中获取最后一个月的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:42:56.303

不，那是不可能的。您必须有任何列指示时间戳。

如果您知道特定时期内添加的行数，则可以计算出近似输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:42:34.550

这是不可能的，因为如果您没有定义这样的列，则无法查询记录的创建日期

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:19:49.517

如果任何列即使它的 varchar 也给你日期的提示，你可能会有机会，然后只需将该列转换为 datetime 并获取该列的最大值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T22:42:11.057

您可以对此表使用跟踪方法或使用日志文件来获取插入或更新行的时间

# html - 与 Chrome/Firefox 的兼容性问题

> ID：10651080
> 
> 赞同：0
> 
> 时间：2012-05-18T10:40:06.923
> 
> 标签：html, css, firefox, google-chrome, dreamweaver

我的网站位于：http: [//www.innexdesign.co.uk/dev](http://www.innexdesign.co.uk/dev)。该网站在 IE 中完美运行，大多数页面在 Firefox 和 Chrome 中也很好。但是，如果我们导航到“设计”菜单并将鼠标悬停在选项下方：“饮用设计”、“饮食设计”等，您会看到徽标和更合适的 div 当您将鼠标悬停在它们上方时似乎会向下移动一点。同样，如果您选择“饮酒设计”并将鼠标悬停在各个酒吧上，您会再次看到徽标和页脚 div 在您将鼠标悬停在它们上时向下移动。这也发生在“饮食设计”、“住房设计”和“睡眠设计”中。

我假设你们可以通过访问该站点来查看所有代码，但我将在下面粘贴一些以防万一：

样式.css：

```
@font-face {
   font-family: shruti;
   src: url(‘shruti.ttf’);
}

html, body, div, ul {
    margin: 0;
    padding: 0;
}

body {
    background-color : #040404;
    background-image : url(images/bk.jpg);
    background-position : top;
    background-repeat : repeat-x;
    margin : 0;
    padding : 0;
    font-family : shruti, Arial, Geneva;
    font-size : 90%;
    line-height:100%;
}
p {
    font-family : shruti, Arial, Geneva;
    font-weight:bold;
    font-size : 100%;
    line-height:normal;
    padding: 5px;
}
h1 {
    font-size : 24px;
    padding-bottom:10px;    
}

h2 {
    padding-bottom:10px;
}
ul {
    list-style : none;
    padding : 0;
    margin : 0;
}
a:link {
    color : #000;
    text-decoration : none;
    color : #000;
}
a:active {
    font-style : italic;
    color : #000;
}
a:visited {
    font-style : italic;
    color : #00C;
}
a {
    outline: none;
}

a img {
    vertical-align: top;

}

a img.last {
    margin-right: 0;    
}

img {
    border : none;
}
#wrapper {
    width : 994px;
    margin : 0 auto;
    background-color : #e3d9b9;
}
#header {
    width : 994px;
    height : 483px;
    margin : 0 auto;
}
#page {
    width : 994px;
    position : relative;
    background-image : url(images/page_bk.jpg);
    background-repeat : no-repeat;
    background-position : top;
    background-color : #b08f40;
}
#pageheader {
    width : 100%;
    height : 220px;
    position : relative;
    background-image : url(images/header_bk.png);
    background-repeat : no-repeat;
    background-position : top;
}
#logo {
width : 143px;
height : 206px;
position : relative;
padding : 10px 10px 0 10px;
float : left;
}
#social {
float : left;
padding : 10px 10px 0 10px;
}
#content {
    width : 994px;
    min-height:200px;
    margin : 0 auto;
    padding : 0;
    background-image : url(images/homepage_bk.jpg);
    background-position : top;
    background-repeat : no-repeat;
    background-color : #b08f40;
    overflow:auto;
}
#logosother {
    height: 160px;
    width: 994px;
    margin: 0 auto;
    background-color: #e3d9b9;
    background-image: url(images/top_footer.jpg);
    background-position: top;
    background-repeat: no-repeat;
    clear:both;

}
.logos {
    height:52px;
    width: 400px;
    padding: 10px;
    float:left;
    margin-top:82px;
    background-color : #e3d9b9;
}
.carbon {
    height:90px;
    width: 159px;
    padding: 10px;
    float:right;
    margin-top:42px;
    background-color : #e3d9b9;
}
.googleplus {
    width:50px;
    height:32px;
    padding: 10px;
    margin-top:98px;
    margin-left:130px;  
    float:left;
}
.homelogos {
    height:52px;
    width: 974px;   
    padding: 10px;
    float:left;
    margin-top:52px;
    background-color : #e3d9b9; 
}
#pagecontent {
    width : 100%;
    padding : 0;
    overflow : auto;
}
#left {
    width : 200px;
    float : left;
}
#homeleft {
    width : 200px;
    float : left;
}
.menu {
    margin-left : 10px;
    margin-top : 20px;
    margin-bottom : 10px;
}
.menu li {
    border-bottom : 1px solid #f9f5e7;
    border-top : 1px solid #a79c78;
    padding-bottom : 5px;
    padding-top : 5px;
    padding-left : 10px;
}
.menu li a {
    font-size : 18px;
    color : #000;
    font-weight:bold;
}
.menu li a:hover {
    font-weight : bold;
    font-style : italic;
    color : #000;
}
.menu li a:active {
    font-weight : bold;
    font-style : italic;
    color : #000;
}
.menu li a:visited {
    font-weight : bold;
    font-style : italic;
    color : #000;
}
.menu .first {
    border-top : none;
}
.menu .last {
    border-bottom : none;
}
#homeright {
    width : 700px;
    margin-left : 20px;
    float : left;
    padding-top : 20px;
    overflow:auto;

}
#right {
    width : 700px;
    margin-left : 20px;
    float : left;
    font-size : 14px;
    font-weight : normal;
    line-height : normal;
    padding-top : 20px;
}
#newright {
width : 730px;
min-height:300px;
float : left;
font-size : 14px;
font-weight : bold;
line-height : 135%;
margin-left : 30px;
padding-top : 20px;
}
.service_menu {
width : 190px;
float:left;
}
.service_menu li {
padding : 8px 0;
width:180px;
border-bottom:1px solid #000;
}
.service_menu li a {
font-size : 14px;
color : #000;
}
.service_menu li a:hover {
font-weight : bold;
font-style : italic;
color : #000;
}
.service_menu li a:active {
font-weight : bold;
font-style : italic;
color : #000;
}
.service_menu li a:visited {
color : #000;
}
.service_menu .first {
border-top : none;
}
.service_menu .last {
border-bottom : none;
}
.serv {
    min-height:300px;
}
.des3 {
float : left;
width : 300px;
margin-left:20px;
}
.desimg3 {
float : left;
width : 340px;
}
#footer {
    width : 984px;
    height : 40px;
    margin : 0 auto;
    font-size : 12px;
    padding : 5px;
    clear : both;
    background-image : url(images/footer_bk.jpg);
    background-repeat : repeat-x;
    color: #000;
}

.msg_list {
margin : 0;
padding : 0;
width : 670px;
float : left;
}
.msg_head {
cursor : pointer;
position : relative;
background-image : url(images/expand_bk.png);
background-repeat : repeat-x;
height : 29px;
line-height : 29px;
color : #000;
margin : 1px;
font-size : 12px;
padding-left : 10px;
}
.msg_head :hover {
padding : 5px 10px;
cursor : pointer;
position : relative;
background-color : #fff;
color : #fff;
margin : 1px;
font-size : 16px;
}
.msg_body {
overflow : auto;
padding : 10px 10px;
}
.msg_body p {
font-size : 12px;
line-height : 150%;
font-weight : normal;
}
.des {
float : left;
width : 300px;
padding-right:10px;
}
.desimg {
float : left;
width : 340px;
}

.msg_list1 {
margin : 0;
padding : 0;
width : 300px;
float : left;
}
.msg_head1 {
cursor : pointer;
position : relative;
height : 31px;
}
.msg_head1 :hover {
cursor : pointer;
position : relative;
}
.msg_body1 {
overflow : auto;
padding : 0 10px;
}
.msg_body1 p {
font-size : 12px;
line-height : 150%;
font-weight : normal;
}
.des1 {
float : left;
width : 300px;
margin-right : 10px;
margin-bottom:10px;
margin-top:10px;
}

.desimg1 {
float : left;
width : 340px;
}

.newdes {
float : left;
width : 340px;
margin-right : 10px;
}
.msg_list2 {
margin : 0;
padding : 0;
width : 360px;
float : left;
}
.msg_head2 {
cursor : pointer;
position : relative;
background-image : url(images/expand_bk.png);
background-repeat : repeat-x;
height : 31px;
line-height : 31px;
color : #000;
margin : 1px;
font-size : 12px;
padding-left : 10px;
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
-khtml-border-radius: 5px; /* for old Konqueror browsers */
}
.msg_head2 :hover {
cursor : pointer;
position : relative;
margin : 1px;
}
.msg_body2 {
overflow : auto;
padding : 0 10px;
margin-bottom:10px;
}
.msg_body2 p {
font-size : 12px;
line-height : 150%;
font-weight : normal;
padding:0px;
}
.newdes2 {
float : left;
width : 340px;
margin-bottom:10px;
}
.desimg2 {
float : left;
width : 340px;
}

.servintro {
margin : 0;
padding : 0;
width : 700px;
overflow : auto;
}
.servintrotext {
float : left;
width : 270px;
padding : 0 10px 10px 10px;
}
.servintroimg {
float : left;
width : 340px;
}
#slider {
width : 994px;
height : 483px;
margin-bottom : 10px;
margin-left : auto;
margin-right : auto;
}
#slider ul, #slider li {
margin : 0;
padding : 0;
list-style : none;
}
#slider li {
width : 994px;
height : 483px;
overflow : hidden;
}
.headerimg {
background-position : center top;
background-repeat : no-repeat;
width : 994px;
height : 483px;
position : absolute;
}
.testimonial {
border : 1px solid #000;
padding : 10px;
margin-bottom : 10px;
margin-top : 10px;
-moz-border-radius: 10px;
-webkit-border-radius: 10px;
-khtml-border-radius: 10px; /* for old Konqueror browsers */
}
.office {
border : 1px solid #000;
padding : 10px;
margin-bottom : 10px;
margin-top : 10px;
width:100%;
height:265px;
-moz-border-radius: 10px;
-webkit-border-radius: 10px;
-khtml-border-radius: 10px; /* for old Konqueror browsers */
}
* {
padding : 0;
}
#TB_window {
font : 12px Arial, Helvetica, sans-serif;
color : #333333;
}
#TB_secondLine {
font : 10px Arial, Helvetica, sans-serif;
color : #666666;
}
#TB_window a:link {
color : #666666;
}
#TB_window a:visited {
color : #666666;
}
#TB_window a:hover {
color : #000;
}
#TB_window a:active {
color : #666666;
}
#TB_window a:focus {
color : #666666;
}
#TB_overlay {
position : fixed;
z-index : 100;
top : 0;
left : 0;
height : 100%;
width : 100%;
}
.TB_overlayMacFFBGHack {
background : url(macFFBgHack.png) repeat;
}
.TB_overlayBG {
background-color : #000;
}
* html #TB_overlay {
position : absolute;
}
#TB_window {
position : fixed;
background : #ffffff;
z-index : 102;
color : #000000;
display : none;
border : 4px solid #525252;
text-align : left;
top : 50%;
left : 50%;
}
* html #TB_window {
position : absolute;
}
#TB_window img#TB_Image {
display : block;
margin : 15px 0 0 15px;
border-right : 1px solid #ccc;
border-bottom : 1px solid #ccc;
border-top : 1px solid #666;
border-left : 1px solid #666;
}
#TB_caption {
height : 25px;
padding : 7px 30px 10px 25px;
float : left;
}
#TB_closeWindow {
height : 25px;
padding : 11px 25px 10px 0;
float : right;
}
#TB_closeAjaxWindow {
padding : 7px 10px 5px 0;
margin-bottom : 1px;
text-align : right;
float : right;
}
#TB_ajaxWindowTitle {
float : left;
padding : 7px 0 5px 10px;
margin-bottom : 1px;
}
#TB_title {
background-color : #e8e8e8;
height : 27px;
}
#TB_ajaxContent {
clear : both;
padding : 2px 15px 15px 15px;
overflow : auto;
text-align : left;
line-height : 1.4em;
}
#TB_ajaxContent.TB_modal {
padding : 15px;
}
#TB_ajaxContent p {
padding : 5px 0 5px 0;
}
#TB_load {
position : fixed;
display : none;
height : 13px;
width : 208px;
z-index : 103;
top : 50%;
left : 50%;
margin : -6px 0 0 -104px;
}
* html #TB_load {
position : absolute;
}
#TB_HideSelect {
z-index : 99;
position : fixed;
top : 0;
left : 0;
background-color : #fff;
border : none;
height : 100%;
width : 100%;
}
* html #TB_HideSelect {
position : absolute;
}
#TB_iframeContent {
clear : both;
border : none;
margin-bottom : -1px;
margin-top : 1px;
}
hr {
    border: none;
    height: 1px; line-height: 1px;
    background: #E5E5E5;
    margin-bottom: 20px;
    padding: 0;
}

.designimage {
    width:500px;
    height:300px;
    margin-bottom:10px;
    float:left;
    border:solid 2px #000;  
}
.designlogo {
    width:500px;
    height:100px;
    margin-bottom:10px;
    float:left; 
}
.mapleft {
    float:left;
    width:220px;
}
.mapcenter {
    float:left;
    width:260px;
    margin-bottom:10px;
}
.mapright {
    float:left;
    width:220px;
} 
```

all-ie-only.css

```
# font-face {
   font-family: shruti;
   src: url(‘shruti.ttf’);
}

html, body, div, ul {
    margin: 0;
    padding: 0;
}

body {
    background-color : #040404;
    background-image : url(images/bk.jpg);
    background-position : top;
    background-repeat : repeat-x;
    margin : 0;
    padding : 0;
    font-family : shruti, Arial, Geneva;
    font-size : 90%;
    line-height:150%;   
}
p {
    font-family : shruti, Arial, Geneva;
    font-weight:normal;
    font-size : 90%;
    line-height:150%;
    padding: 5px;
}
h1 {
    font-size : 24px;
    padding-bottom:10px;    
}

h2 {
    padding-top:10px;
    padding-bottom:10px;
}
ul {
    list-style : none;
    padding : 0;
    margin : 0;
}
a:link {
    color : #000;
    text-decoration : none;
    color : #000;
}
a:active {
    color : #000;
}
a:visited {
    color : #000;
}
a {
    outline: none;
}

a img {
    vertical-align: top;
}

a img.last {
    margin-right: 0;    
}

img {
    border : none;
}
#wrapper {
    width : 994px;
    margin : 0 auto;
    background-color : #e3d9b9;
}
#header {
    width : 994px;
    height : 483px;
    margin : 0 auto;
}
#page {
    width : 994px;
    position : relative;
    background-image : url(images/page_bk.jpg);
    background-repeat : no-repeat;
    background-position : top;
    background-color : #b08f40;
}
#pageheader {
width : 100%;
height : 248px;
position : relative;
background-image : url(images/header_bk.png);
background-repeat : no-repeat;
background-position : top;
}
#logo {
width : 143px;
height : 206px;
position : relative;
padding : 10px 10px 0 10px;
float : left;
}
#social {
float : left;
padding : 10px 10px 0 10px;
}
#content {
    width : 994px;
    min-height:200px;
    margin : 0 auto;
    padding : 0;
    background-image : url(images/homepage_bk.jpg);
    background-position : top;
    background-repeat : no-repeat;
    background-color : #b08f40;
    overflow:auto;
}
#logosother {
    height: 160px;
    width: 994px;
    margin: 0 auto;
    background-color: #e3d9b9;
    background-image: url(images/top_footer.jpg);
    background-position: top;
    background-repeat: no-repeat;
    clear:both;
}
.logos {
    height:52px;
    padding: 12px;
    float:left;
    margin-top:82px;
    background-color : #e3d9b9; 
}
.carbon {
    height:90px;
    width: 159px;   
    padding: 10px;
    float:right;
    margin-top:42px;
    background-color : #e3d9b9; 
}
.googleplus {
    width:50px;
    height:32px;
    padding: 10px;
    margin-top:92px;
    margin-left:210px;  
    float:left;
}
.homelogos {
    height:52px;
    width: 974px;   
    padding: 10px;
    float:left;
    margin-top:52px;
    background-color : #e3d9b9; 
}
#pagecontent {
    width : 100%;
    padding : 0;
    overflow : auto;
}
#left {
    width : 200px;
    float : left;
}
#homeleft {
    width : 200px;
    float : left;
}
.menu {
    margin-left : 10px;
    margin-top : 20px;
    margin-bottom : 10px;
}
.menu li {
    border-bottom : 1px solid #f9f5e7;
    border-top : 1px solid #a79c78;
    padding-bottom : 5px;
    padding-top : 5px;
    padding-left : 10px;
}
.menu li a {
    font-size : 18px;
    color : #000;
    font-weight:bold;
    text-decoration:none;
}
.menu li a:hover {
    font-weight : bold;
    font-style : italic;
    color : #000;
    text-decoration:none;   
}
.menu li a:active {
    font-weight : bold;
    color : #000;
    text-decoration:none;   
}
.menu li a:visited {
    font-weight : bold;
    color : #000;
    text-decoration:none;   
}
.menu .first {
    border-top : none;
}
.menu .last {
    border-bottom : none;
}
#homeright {
    width : 700px;
    margin-left : 20px;
    float : left;
    padding-top : 20px;
    overflow:auto;

}
#right {
    width : 700px;
    padding-left : 20px;
    float : left;
    font-size : 14px;
    font-weight : bold;
    line-height : 135%;
    padding-top : 20px;
    overflow:hidden;
}
#newright {
    width : 700px;
    padding-left : 20px;
    float : left;
    font-size : 14px;
    font-weight : bold;
    line-height : 135%;
    padding-top : 20px;
    overflow:hidden;
}
.service_menu {
width : 190px;
float:left;
}
.service_menu li {
padding : 8px 0;
width:180px;
border-bottom:1px solid #000;
}
.service_menu li a {
font-size : 14px;
color : #000;
}
.service_menu li a:hover {
font-weight : bold;
font-style : italic;
color : #000;
}
.service_menu li a:active {
font-weight : bold;
font-style : italic;
color : #000;
}
.service_menu li a:visited {
color : #000;
}
.service_menu .first {
border-top : none;
}
.service_menu .last {
border-bottom : none;
}
.serv {
    min-height:300px;
}
.des3 {
float : left;
width : 300px;
margin-left:20px;
}
.desimg3 {
float : left;
width : 340px;
}
#footer {
    width : 984px;
    height : 40px;
    margin : 0 auto;
    font-size : 12px;
    padding : 5px;
    clear : both;
    background-image : url(images/footer_bk.jpg);
    background-repeat : repeat-x;
}

.msg_list {
margin : 0;
padding : 0;
width : 670px;
float : left;
}
.msg_head {
cursor : pointer;
position : relative;
background-image : url(images/expand_bk.png);
background-repeat : repeat-x;
height : 29px;
line-height : 29px;
color : #000;
margin : 1px;
font-size : 12px;
padding-left : 10px;
}
.msg_head :hover {
padding : 5px 10px;
cursor : pointer;
position : relative;
background-color : #fff;
color : #fff;
margin : 1px;
font-size : 16px;
}
.msg_body {
overflow : auto;
padding : 10px 10px;
}
.msg_body p {
font-size : 12px;
line-height : 150%;
font-weight : normal;
}
.des {
float : left;
width : 300px;
padding-right:10px;
}
.desimg {
float : left;
width : 340px;
}

.msg_list1 {
margin : 0;
padding : 0;
width : 300px;
float : left;
}
.msg_head1 {
cursor : pointer;
position : relative;
height : 31px;
}
.msg_head1 :hover {
cursor : pointer;
position : relative;
}
.msg_body1 {
overflow : auto;
padding : 0 10px;
}
.msg_body1 p {
font-size : 12px;
line-height : 150%;
font-weight : normal;
}
.des1 {
float : left;
width : 300px;
margin-right : 10px;
margin-bottom:10px;
margin-top:10px;
}

.desimg1 {
float : left;
width : 340px;
}

.newdes {
float : left;
width : 340px;
margin-right : 10px;
}
.msg_list2 {
margin : 0;
padding : 0;
width : 360px;
float : left;
}
.msg_head2 {
cursor : pointer;
position : relative;
background-image : url(images/expand_bk.png);
background-repeat : repeat-x;
height : 31px;
line-height : 31px;
color : #000;
margin : 1px;
font-size : 12px;
padding-left : 10px;
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
-khtml-border-radius: 5px; /* for old Konqueror browsers */
}
.msg_head2 :hover {
cursor : pointer;
position : relative;
margin : 1px;
}
.msg_body2 {
overflow : auto;
padding : 0 10px;
margin-bottom:10px;
}
.msg_body2 p {
font-size : 12px;
line-height : 150%;
font-weight : normal;
padding:0px;
}
.newdes2 {
float : left;
width : 340px;
margin-bottom:10px;
}
.desimg2 {
float : left;
width : 340px;
}

.servintro {
margin : 0;
padding : 0;
width : 700px;
overflow : auto;
}
.servintrotext {
float : left;
width : 270px;
padding : 0 10px 10px 10px;
}
.servintroimg {
float : left;
width : 340px;
}
#slider {
width : 994px;
height : 483px;
margin-bottom : 10px;
margin-left : auto;
margin-right : auto;
}
#slider ul, #slider li {
margin : 0;
padding : 0;
list-style : none;
}
#slider li {
width : 994px;
height : 483px;
overflow : hidden;
}
.headerimg {
background-position : center top;
background-repeat : no-repeat;
width : 994px;
height : 483px;
position : absolute;
}
.testimonial {
border : 1px solid #000;
padding : 10px;
margin-bottom : 10px;
margin-top : 10px;
-moz-border-radius: 10px;
-webkit-border-radius: 10px;
-khtml-border-radius: 10px; /* for old Konqueror browsers */
}
.office {
border : 1px solid #000;
padding : 10px;
margin-bottom : 10px;
margin-top : 10px;
width:100%;
height:265px;
-moz-border-radius: 10px;
-webkit-border-radius: 10px;
-khtml-border-radius: 10px; /* for old Konqueror browsers */
}
* {
padding : 0;
margin : 0;
}
#TB_window {
font : 12px Arial, Helvetica, sans-serif;
color : #333333;
}
#TB_secondLine {
font : 10px Arial, Helvetica, sans-serif;
color : #666666;
}
#TB_window a:link {
color : #666666;
}
#TB_window a:visited {
color : #666666;
}
#TB_window a:hover {
color : #000;
}
#TB_window a:active {
color : #666666;
}
#TB_window a:focus {
color : #666666;
}
#TB_overlay {
position : fixed;
z-index : 100;
top : 0;
left : 0;
height : 100%;
width : 100%;
}
.TB_overlayMacFFBGHack {
background : url(macFFBgHack.png) repeat;
}
.TB_overlayBG {
background-color : #000;
}
* html #TB_overlay {
position : absolute;
}
#TB_window {
position : fixed;
background : #ffffff;
z-index : 102;
color : #000000;
display : none;
border : 4px solid #525252;
text-align : left;
top : 50%;
left : 50%;
}
* html #TB_window {
position : absolute;
}
#TB_window img#TB_Image {
display : block;
margin : 15px 0 0 15px;
border-right : 1px solid #ccc;
border-bottom : 1px solid #ccc;
border-top : 1px solid #666;
border-left : 1px solid #666;
}
#TB_caption {
height : 25px;
padding : 7px 30px 10px 25px;
float : left;
}
#TB_closeWindow {
height : 25px;
padding : 11px 25px 10px 0;
float : right;
}
#TB_closeAjaxWindow {
padding : 7px 10px 5px 0;
margin-bottom : 1px;
text-align : right;
float : right;
}
#TB_ajaxWindowTitle {
float : left;
padding : 7px 0 5px 10px;
margin-bottom : 1px;
}
#TB_title {
background-color : #e8e8e8;
height : 27px;
}
#TB_ajaxContent {
clear : both;
padding : 2px 15px 15px 15px;
overflow : auto;
text-align : left;
line-height : 1.4em;
}
#TB_ajaxContent.TB_modal {
padding : 15px;
}
#TB_ajaxContent p {
padding : 5px 0 5px 0;
}
#TB_load {
position : fixed;
display : none;
height : 13px;
width : 208px;
z-index : 103;
top : 50%;
left : 50%;
margin : -6px 0 0 -104px;
}
* html #TB_load {
position : absolute;
}
#TB_HideSelect {
z-index : 99;
position : fixed;
top : 0;
left : 0;
background-color : #fff;
border : none;
height : 100%;
width : 100%;
}
* html #TB_HideSelect {
position : absolute;
}
#TB_iframeContent {
clear : both;
border : none;
margin-bottom : -1px;
margin-top : 1px;
}
hr {
    border: none;
    height: 1px; line-height: 1px;
    background: #E5E5E5;
    margin-bottom: 20px;
    padding: 0;
}

.designimage {
    width:500px;
    height:300px;
    margin-bottom:10px;
    float:left;
    border:solid 2px #000;  
}
.mapleft {
    float:left;
    width:220px;
}
.mapcenter {
    float:left;
    width:260px;
    margin-bottom:10px;
}
.mapright {
    float:left;
    width:220px;
    margin-top:180px;
} 
```

我的设计页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Innex Design | Services</title>
<link href="style.css" rel="stylesheet" type="text/css" />
<link href="slider.css" rel="stylesheet" type="text/css" />
<!--[if IE]>
        <link rel="stylesheet" type="text/css" href="all-ie-only.css" />
<![endif]-->  
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/easySlider1.5.js"></script>
        <script type="text/javascript">
        $(document).ready(function(){   
            $(".slider").easySlider({
                auto: true,
                continuous: true 
            });
        }); 
    </script>
</head>

<body>
<div id="wrapper">
<div id="page">
<div id="pageheader">
    <div id="logo"> <a href="index.html" target="_self"><img src="images/innexdesign_logo.jpg" width="143" height="206" alt="Innex Design Logo" /></a>
    </div>
    <div id="social">
        <a href="http://twitter.com/#!/InnexDesign" target="_new"><img src="images/twitter.png" width="41" height="40" alt="Innex Design on Twitter" /></a>
        <a href="http://www.facebook.com/innexdesignltd" target="_new"><img src="images/facebook.png" width="41" height="40" alt="Innex Design on Facebook" /></a>
         <a href="contactform.html" title="Request a Callback" target="_new"><img src="images/callback.png" alt="" width="77" height="40" /></a>
        <a href="contactform.html" title="Leave Your Details and Sign up to our News Letter" target="_new"><img src="images/Newsletter Image.png" alt="" width="77" height="40" /></a></div>
    </div>

<div id="pagecontent">

    <div id="left">
    <ul class="menu">
    <li class="first"><a href="index.html">HOME</a></li>
    <li><a href="profile.html">PROFILE</a></li>
    <li><a href="services.html">DESIGNS</a></li>
    <li><a href="testimonials.html">TESTIMONIALS</a></li>    
    <li class="last"><a href="contact.html">CONTACT</a></li>
    </ul>

    <p style="text-align:center; font-weight:bold;">CELEBRATING<br /><span style="font-size:22px">21</span><br />YEARS<br />1991-2012</p>
    </div>

    <div id="right">

        <h1>DESIGNS</h1>

        <div class="service_menu">
        <ul>
        <li><a href="drinking.html">Designs for Drinking</a></li>
        <li><a href="eating.html">Designs for Eati 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:47:38.010

在链接中添加一些 line-height 可以解决它：

```
.service_menu li a {
    font-size: 14px;
    color: black;
    line-height: 14px;
} 
```

...或者更灵活，您还可以编写：

```
line-height:1em; 
```

# php - 如何保存脸书生日日期？

> ID：10651083
> 
> 赞同：0
> 
> 时间：2012-05-18T10:40:09.057
> 
> 标签：php, mysql, facebook, facebook-fql

使用 FQL，我以这种方式获得生日：

```
select uid, first_name, last_name, birthday_date from user where uid=me() 
```

但随后以这种格式显示：

```
02/03/1942 
```

如果我将它保存在我的 mysql 数据库的 DATE 字段中，它会保存 0000-00-00

如何将这个日期保存在我的 mysql 数据库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:46:27.463

签出这个 - [http://php.net/manual/en/function.date-create.php](http://php.net/manual/en/function.date-create.php)

```
<?php
  $test = new DateTime('02/31/2011');
  echo date_format($test, 'Y-m-d H:i:s'); // 2011-03-03 00:00:00
  $test = new DateTime('06/31/2011');
  echo date_format($test, 'Y-m-d H:i:s'); // 2011-07-01 00:00:00
?> 
```

您可以为`DateTime()`构造函数提供一个类似于 Facebook 返回的字符串，然后使用该对象来格式化您需要的日期格式。

* * *

或者，如果您想要一个仅包含 MYSQL 解决方案的选项，您可以简单地传递原始日期`STR_TO_DATE`并为其提供当前格式。这将以正确的方式为您格式化`DATE`字段类型的日期。

```
INSERT INTO  `test` (  `date` ) 
  VALUES (
    STR_TO_DATE(  '02/03/1942',  '%d/%m/%Y' )
  ) 
```

查看[STR_TO_DATE() 的文档以](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)获取更多详细信息。

# java - 局部变量访问 - 同步

> ID：10651084
> 
> 赞同：1
> 
> 时间：2012-05-18T10:40:09.183
> 
> 标签：java, synchronization

在我的程序中，我有以下模板的功能：

```
public MyObject myMethod() {

   final MyObject[] myObject = new MyObject[]{null};
   MyListener myListener= new MyListener() {
      public void messageReceived(MyObject newData) {
         // Thread #1
         myObject[0] = newData;
      }
   }

   ...

   // Thread #2
   while (myObject[0] == null) ;
   return myObject[0];
} 
```

不幸的是，Java 64 位线程#2 中存在同步问题，没有看到线程#1 所做的任何更改，并且while 循环永远不会结束。我应该如何同步这些线程？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:45:18.627

你正在忙着循环。这几乎从来都不是一个好主意。请改用阻塞数据结构，例如 BlockingQueue。收到消息后，将其放入队列中。并让您的接收者从队列中获取消息。当队列中没有消息时，接收者将被阻塞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:50:48.917

尝试使用 java.util.concurrent.ArrayBlockingQueue 而不是 Array... 那么你就不必使用 synchronized 关键字。它的线程安全。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T10:59:25.647

您可以在两个线程中`Synchronized`对对象使用块`myObject`（因为它永远不会为空）。

```
synchronized(myObject) {
    ...do stuff ...
} 
```

一个建议：不要使用while循环，而是使用`wait-notify`机制。

# javascript - MVC 3：Javascript 在客户端验证事件之后

> ID：10651088
> 
> 赞同：0
> 
> 时间：2012-05-18T10:40:24.367
> 
> 标签：javascript, asp.net-mvc-3, validation

我需要将客户端验证错误（class="field-validation-error"）转换为工具提示。这不是一些 jQuery 技巧的问题！

但我需要在客户端验证后执行此转换。我不知道表单上或单个字段上是否存在“验证”事件。

这是在键入时（不是在提交时）触发的客户端验证，然后我需要一个在字段值更改时触发的事件。

最好的是将“输入”类更改为“输入验证错误”的相同事件（使用标准 MVC 客户端验证）。

谢谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:44:02.010

我不确定这会有所帮助，但请尝试以下代码：

```
var currentValidate = Sys.Mvc.FormContext.prototype.validate;

var newValidate = function(eventName) {
   var result = currentValidate.call(this, eventName);
   // Perform post-validation logic here
   return result;
};

Sys.Mvc.FormContext.prototype.validate = newValidate; 
```

# javascript - firebug javascript/jquery 调试

> ID：10651089
> 
> 赞同：1
> 
> 时间：2012-05-18T10:40:26.927
> 
> 标签：javascript, jquery, debugging, firebug

我有以下要调试的脚本：

```
function getTabFrame() {
    $.ajax({
        url: 'get_tab_frame.aspx?rand=' + Math.random(),
        type: 'GET',
        dataType: 'json',
        error: function(xhr, status, error) {
            //alert('Error: ' + status + '\nError Text: ' + error + '\nResponse Text: ' + xhr.responseText);
        },
        success: function( data ) {
            $( "#divTabsDropdown" ).empty();

            $.each( data, function( index, item ) {

                // create tabs with custom ids
                $( "#tabs" ).tabs( "add", "get_tab_content.aspx?tab=" + item.key, item.value)
                    .find( ">ul>li:last" )
                    .attr( "id", "tab_group_" + item.key );

                // creates the buttons
                $( "#divTabsDropdown" ).append( "<div class='item custom_group' id='tab" + item.ordering + "'>" + item.value + "</div>" );

                // link buttons with tabs
                $("#tab" + item.ordering).live('click', function() {
                    $("#tabs").tabs( "select" , $( "#tab_group_" + item.key ).index() );
                });
            });
        }
    });
} 
```

如果我添加一个断点`$.ajax({`并运行调试，那就是它停止的地方。如果我然后将鼠标悬停`data`在 line 上`success: function( data ) {`，则不会显示弹出窗口，因此看不到任何值。我想看看里面是什么`data`。

所以我想“也许我需要按 F10 几次，这样萤火虫才能在显示值之前实际运行足够的 javascript/jquery”。所以我做到了，我到了函数的末尾，将鼠标悬停`data`在 中`success: function( data ) {`，再次没有弹出窗口，因此没有显示数据。

我究竟做错了什么？为什么我看不到里面装的是什么`data`？

我已经在 firefox 中安装了 firebug plus firequery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:16:09.877

`data`被定义为成功回调函数的参数。如果你想看到它的价值，你必须在这个函数的实现中上线。

您应该将断点放在成功回调的第一行，即

```
$( "#divTabsDropdown" ).empty(); 
```

如果它从未被击中，那就是您的请求仍在等待处理或以错误告终。在最后一种情况下，将调用错误回调。

# c++ - 列表视图控件因大量列而失去性能

> ID：10651094
> 
> 赞同：2
> 
> 时间：2012-05-18T10:40:39.033
> 
> 标签：c++, winapi, listview, wtl

我在报告模式下有一个虚拟列表视图控件，我通过处理 NM_CUSTOMDRAW 通知手动绘制其项目。我遇到的问题是我的性能下降与列数成正比。通过调试代码，我注意到我的 OnCustomDraw 和 OnGetDispInfo 被调用用于在客户端窗口中甚至不可见的项目。

如果我有一个包含 1.000 行和 100 列的列表视图，其中只有 10 行和 5 列可见，我注意到将为这 10 行中的每个元素调用 OnCustomDraw 和 OnGetDispInfo。Listview 将向我发送所有不可见的 95 列的通知。

有没有人遇到过这样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:26:30.647

ListView 是按原样实现的。我想到了以下优化：

通过控件子类化，跟踪可见列的列表。在列表视图子类 proc 中，您可能需要处理以下消息（如果我忘记了可能会更多）：

*   WM_CREATE
*   WM_SIZE
*   WM_HSCROLL
*   WM_NOTIFY (if ((NMHDR*)lParam)->hwndFrom 来自嵌入式标头控件；请参阅 LVM_GETHEADER 的文档)

每当这些消息出现时，让原始 proc 处理它，然后更新当前可见列的列表（请参阅 HDM_GETITEMRECT）。

在对话框/窗口过程中处理 NM_CUSTOMDRAW 时，请查阅可见列列表并仅在可见时绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:09:32.873

我当然不是这方面的专家，但也许你必须`LVN_ODCACHEHINT Notification Code`在 MSDN 中查看。

# php - 发布变量以更正行

> ID：10651097
> 
> 赞同：0
> 
> 时间：2012-05-18T10:40:46.473
> 
> 标签：php, android, mysql

已解决将变量发布到数据库的问题。仍然需要帮助发布到正确的行。

我想要做的是将变量发布到 mysql 数据库。最大的问题是将其发布到正确的用户行。登录的用户。

下面是我的数学测验活动的片段。测验结束时会出现一个对话框。变量 right_answers 正在提交到数据库。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    userFunctions = new UserFunctions();
   if(userFunctions.isUserLoggedIn(getApplicationContext())){

uestions.length){
            if(qno==6){
                //If all questions have been answered answer Alert Dialog appears, the user can choose to:
                //Submit score
                //Go to main menu without submitting score
                //Retry

                AlertDialog.Builder alertDialog = new AlertDialog.Builder(mathsActivity.this);

                // Submit score button
                alertDialog.setPositiveButton("Submit Score", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                    // User pressed YES button. Write Logic Here
                    //Toast.makeText(getApplicationContext(), "Score Submitted",Toast.LENGTH_SHORT).show();
                    //startActivity(new Intent(getApplication(), MathsMenuActivity.class)); 

                        HttpClient httpclient = new DefaultHttpClient();     
                        HttpPost httppost = new HttpPost("http://xxxxxxxxxxxx.com/script.php"); 
                        try { 
                             List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);         
                             nameValuePairs.add(new BasicNameValuePair("right_answers", Integer.toString(right_answers)));         
                             nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));         
                             httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 

                             HttpResponse response = httpclient.execute(httppost); 

                        } catch (ClientProtocolException e) {         
                             // TODO Auto-generated catch block     
                        } catch (IOException e) {         
                                 // TODO Auto-generated catch block     
                        } 

                }

                });

} 
```

来自存储在包库中的用户函数类是以下块。

用于获取登录状态。

```
public boolean isUserLoggedIn(Context context){
    DatabaseHandler db = new DatabaseHandler(context);
    int count = db.getRowCount();
    if(count > 0){
        // user logged in
        return true;
    }
    return false;
} 
```

最后，这里是负责在相应列中插入 right_answers 的 php。

```
include 'xxxxx/connect.php';

$right_answers = $_POST['right_answers'];

$sql=mysql_query("INSERT INTO members (maths)VALUES('" . $right_answers . "')"); 
```

帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:54:20.563

我很确定没有测试它你需要做这样的事情

```
$sql=mysql_query("INSERT INTO members (maths)VALUES('" . $right_answers . "')"); 
```

# dojo - Deferred 的 then 和其他回调或 errbacks

> ID：10651098
> 
> 赞同：1
> 
> 时间：2012-05-18T10:40:55.893
> 
> 标签：dojo

如果我有一个`dojo.Deferred`并向它添加几个回调（让我们看看一个成功的任务），此外，我将一个 then 添加`(function(){..});`到 Deferred，首先调用哪个回调？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:27:43.080

我整理了一个简短的例子来体现 FIFO 原则：http: [//jsfiddle.net/phusick/CHQ8d/](http://jsfiddle.net/phusick/CHQ8d/)

最新文档： http: [//livedocs.dojotoolkit.org/dojo/Deferred](http://livedocs.dojotoolkit.org/dojo/Deferred)

知道当链接回调时回调的返回值被传递给以下回调是很有用的（有关详细信息，请参阅 jsFiddle）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:51:20.767

流程将始终是来自 .addCallback 的任何分配函数，首先是由 .then 传入的任何函数。

[在这个小提琴](http://jsfiddle.net/seeds/h3Hkh/)中尝试一下

# c# - 通过鼠标单击更改图片框上的图像以给用户一些反馈

> ID：10651106
> 
> 赞同：0
> 
> 时间：2012-05-18T10:41:33.070
> 
> 标签：c#, mouseevent

我正在使用从图片框继承的自定义控件来模拟按钮。我拥有我想要正常工作的大部分功能。我想放一些东西来模拟按钮按下。这样当用户按下按钮时，控件上的图像会在一瞬间发生变化。下面的代码是否可以解决此问题，或者有人可以提出更好的方法。

它会使用在时间 x 之后替换图像的计时器或类似的东西吗？

谢谢

```
 private void MediaButton_MouseClick(object sender, MouseEventArgs e)
        {
            this.Image = this.downImage;
            this.Invalidate();
            this.Refresh();

            //Do something
            System.Threading.Thread.Sleep(200);

            this.Image = this.upImage;
            this.Invalidate();
            this.Refresh();
        } 
```

更新：这是用于触摸屏设备

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:44:08.110

不要使用睡眠让用户等待。前几次这可能很有趣，但它会很快变得陈旧和烦人。

您可以将 Click 拆分为 MouseDown 和 MouseUp 事件。这让用户可以选择他想要查看每个图像的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:45:13.627

为什么不使用 MouseDown 和 MouseUp 事件？然后，您可以模拟按下普通按钮时发生的情况。即在 MouseDown 上将图片更改为其他内容（例如按下的按钮），然后在鼠标向上将其更改回来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T10:45:33.027

不，你不想在`Thread.Sleep(xx)`这里使用……事实上，几乎任何时候你看到使用它的代码，你都可以认为它是错误的，或者至少是一个非常糟糕的主意。您也不需要计时器，因为您不想等待预定的时间。

相反，让用户确定“向下”或“活动”图像显示多长时间。`MouseDown`将其与和`MouseUp`事件同步。引发事件时将图像更改为“向下”或“活动”图像`MouseDown`，并将其重置回`MouseUp`事件中的原始图像。

```
private void MediaButton_MouseDown(object sender, MouseEventArgs e) 
{
    MediaButton.Image = downImage;
}

private void MediaButton_MouseUp(object sender, MouseEventArgs e) 
{
    MediaButton.Image = upImage;
} 
```

只要用户单击按钮（将鼠标按钮放在控件上），就会显示“向下”或“活动”图像，然后在释放鼠标按钮时将其删除。

你会得到你正在寻找的那种视觉反馈，而没有任何糟糕的设计。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T10:46:21.503

未经测试，但似乎更适合在 mouseup 和 mousedown 之间拆分代码。
这将更好地模拟命令按钮的行为

```
private void MediaButton_MouseDown(object sender, MouseEventArgs e) 
{ 
            this.Image = this.downImage; 
            this.Invalidate(); 
            this.Refresh(); 
 }

private void MediaButton_MouseUp(object sender, MouseEventArgs e) 
{
            this.Image = this.upImage; 
            this.Invalidate(); 
            this.Refresh(); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T11:35:08.450

我想补充一点，您可能没有使用 WPF（我猜是 WinForms），但如果您使用 WPF，您可以使用[动画](http://msdn.microsoft.com/en-us/library/ms752312.aspx)来提供更丰富的用户体验。

# assembly - 如何为 read_string 分配空间

> ID：10651107
> 
> 赞同：1
> 
> 时间：2012-05-18T10:41:34.680
> 
> 标签：assembly, mips

我正在开发 Decaf 编程项目，这是一个发出 Mips 程序集的编译器。`ReadLine`这是从标准输入读取字符串的内置函数的程序集。

```
 input:
      .space 40
 _ReadLine:
    subu $sp, $sp, 8
    sw $fp, 8($sp)
    sw $ra, 4($sp)
    addiu $fp, $sp, 8
    subu $sp, $sp, 4
    li $a1, 40
    la $a0, input
    li $v0, 8              #read_string syscall
    syscall
    la $t1, input
bloop4:
    lb $t5, ($t1)
    beqz $t5, eloop4
    addi $t1, 1
    b bloop4
eloop4:
    addi $t1, -1
    li $t6, 0
    sb $t6, ($t1)
    la $v0, input
    move $sp, $fp
    lw $ra, -4($fp)
    lw $fp, 0($fp)
    jr $ra 
```

所以我可以将结果（实际上是一个引用）分配给一个字符串

```
 string s = ReadLine(); 
```

由于所有用户输入都被读入相同的地址并且`s`只是一个参考，但是，调用 of`ReadLine`将更改 指向的值`s`。当然，我希望变量保留自己的用户输入副本。

我以前从未做过 Mips 汇编编码，坦率地说，上面的大部分代码都不是我的。我有一本手册，所以关于如何实现`ReadLine`为每个用户输入分配新空间的功能有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T23:39:52.107

在堆上分配空间。对于大多数模拟器，系统调用 9。不是发送静态分配的空间，而是发送`la $a0, input`堆分配的地址。

# c - 为什么 ftell() 在 fread() 之后显示错误的位置？

> ID：10651108
> 
> 赞同：6
> 
> 时间：2012-05-18T10:41:35.390
> 
> 标签：c, file, fread

尝试使用 c fread() 调用从简单的文本文件中读取时，我遇到了一个非常奇怪的错误。
我做了一个非常简单的程序来显示这个错误：

```
int main(int argc ,char ** argv) {
  FILE* fh = fopen("adult.txt","r");
  if(fh==NULL){
    printf("error opening file\n");
    exit(0);
  }

  int s = 1000;
  printf("cur before=%d\n",ftell(fh));
  char* b = malloc (sizeof(char)*s);
  int k =fread(b,sizeof(char),s,fh);
  printf("cur after reading %d bytes =%d\n",k,ftell(fh));

  return EXIT_SUCCESS;
} 
```

我得到的输出是：

```
cur before=0
cur after reading 1000 bytes =1007 
```

这正常吗？fread 返回数字“1000”，但光标（使用 ftell()）显示 1007，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T10:43:05.350

这很正常。

`'\n'`可以用两个字符表示，所以你得到了歪斜。

如果您不希望这种情况发生，请以二进制模式打开 finaly。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T10:45:36.180

从以下文档[`ftell`](http://www.cplusplus.com/reference/clibrary/cstdio/ftell/)：

> 或二进制流，返回的值对应于从文件开头开始的字节数。**对于文本流，不保证该值是从文件开头开始的确切字节数，但返回的值仍可用于使用 fseek 将位置指示器恢复到该位置。**

所以是的，这是正常的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T11:48:48.057

Let_Me_Be 的答案是正确的。我只是在这里解释“行尾”（EOL）字符取决于底层操作系统。例如，在 Windows 中，如果您使用 'r'（或非二进制）打开文件，那么只要有 '\r\n' 序列，操作系统将仅返回 '\n'。同样，当您写入一个未以二进制模式打开的文件时，在 Windows 中，当您简单地写入 '\n' 时，它将写入 '\r\n'。对于 Unix 系统，操作系统没有完成这样的翻译。经典 Mac 会使用 '\r' 作为行尾字符，但我认为现在他们使用 '\n' 作为 EOL。我希望清除'\n' 的流行语以（可能）由多个字符（\r\n）表示。

# jakarta-ee - Websphere 错误 SRVE0133E：和原因 RC：107

> ID：10651109
> 
> 赞同：2
> 
> 时间：2012-05-18T10:41:45.190
> 
> 标签：jakarta-ee, websphere

我在 WebSphere 服务器日志上收到此错误

SRVE0133E: 解析参数时发生错误。java.io.IOException：异步 IO 操作失败，原因：RC：107 传输端点未连接

任何人都可以帮助我并指导我了解此错误的原因吗？

谢谢 ：）

**编辑**

```
SRVE0133E: An error occurred while parsing parameters. java.io.IOException: Async IO operation failed, reason: RC: 107  Transport endpoint is not connected
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:679)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:881)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1497) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-08T19:53:34.423

如果客户端（例如浏览器）从服务器请求内容，然后在服务器发送响应之前关闭连接，就会发生这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T05:47:58.480

有一些与此相关的技术说明。

[http://www-304.ibm.com/support/docview.wss?uid=swg1PM10292](http://www-304.ibm.com/support/docview.wss?uid=swg1PM10292)

这适用于你的情况吗？

您还必须从堆栈中添加几行，以便人们查看引擎盖下可能发生的事情。

高温高压

# wpf - 具有渐进式自动完成功能的组合框

> ID：10651111
> 
> 赞同：2
> 
> 时间：2012-05-18T10:41:51.383
> 
> 标签：wpf, autocomplete, combobox

我们需要使用从数据库中检索到的数据填充组合框。因为检索到的潜在记录数可能有数千个，所以我们通过在用户输入组合框中的前 5 个字符之前甚至不调用数据库来限制列表。然后使用 combobox.Items.Filter 填充列表并作为用户键在附加字符中逐步过滤。

问题是这个过程是不可逆的。假设用户输入了 000-Test11，显示的是 000-Test11 和 000-Test111。如果用户按退格键，组合框应返回 000-Test1 并显示上述内容以及 000-Test12、000-Test13 等。

组合框文本编辑器文本更改事件中的逻辑已改编自 MSDN 线程 - 实现自动完成组合框 - 赖以灵，Rovi Corporation 答案：[http ://social.msdn.microsoft.com/Forums/en-US/wpf/thread /cec1b222-2849-4a54-bcf2-03041efcf304/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/cec1b222-2849-4a54-bcf2-03041efcf304/)。

这是演示我们遇到的问题的代码。

StudyProxy 类：

```
 namespace WPFTesting
    {
        public class StudyProxy
        {
            public int StudyID { get; set; }
            public string StudyNumber { get; set; }
            public string Title { get; set; }

            public StudyProxy Init()
            {
                this.Title = this.StudyNumber;
                return this;
            }
        }
    } 
```

xml:

```
 <Window x:Class="WPFTesting.SelectStudyScreen"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 Height="300" Width="300" SizeToContent="WidthAndHeight">
        <Grid>
            <DockPanel Height="250" Width="250">
                <ComboBox DockPanel.Dock="Top" VerticalAlignment="Top" Name="comboBox1" 
                      IsEditable="True" IsReadOnly="False" Margin="10"
                      DisplayMemberPath="StudyNumber" SelectedValuePath="StudyID"
                      SelectionChanged="comboBox1_SelectionChanged"/>
                <DataGrid Name="dataGrid1" />
            </DockPanel>
        </Grid>
    </Window> 
```

后面的代码：

```
 using System;
    using System.Windows;
    using System.Collections.Generic;
    using System.Collections.ObjectModel;
    using System.Diagnostics;
    using System.Windows.Controls;
    using System.Windows.Input;
    using System.Windows.Controls.Primitives;
    using System.Runtime.Serialization;

    namespace WPFTesting
    {
        /// <summary>
        /// Interaction logic for SelectStudyScreen.xaml
        /// </summary>
        public partial class SelectStudyScreen
        {
            private Popup _comboBox1Popup;
            private TextBox _comboBox1Editor;
            private StudyProxy _currentItem;

            public SelectStudyScreen()
            {
                InitializeComponent();

                comboBox1.Loaded += new RoutedEventHandler(comboBox1_Loaded);
            }

            private void comboBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
            {
                if (comboBox1.SelectedIndex == -1)
                {
                    dataGrid1.ItemsSource = null;
                }
                else
                {
                    _currentItem = comboBox1.SelectedItem as StudyProxy;
                    List<string> studyIDs = new List<string>(new string[] { comboBox1.SelectedValue.ToString() });
                }
            }

            private void comboBox1_Loaded(object sender, RoutedEventArgs e)
            {
                _comboBox1Popup = comboBox1.Template.FindName("PART_Popup", comboBox1) as Popup;
                _comboBox1Editor = comboBox1.Template.FindName("PART_EditableTextBox", comboBox1) as TextBox;

                if (_comboBox1Editor != null)
                {
                    _comboBox1Editor.KeyDown += new System.Windows.Input.KeyEventHandler(comboBox1Editor_KeyDown);
                    _comboBox1Editor.TextChanged += new TextChangedEventHandler(comboBox1Editor_TextChanged);
                    _comboBox1Editor.PreviewKeyDown += new KeyEventHandler(comboBox1Editor_PreviewKeyDown);
                }
            }

            void comboBox1Editor_PreviewKeyDown(object sender, KeyEventArgs e)
            {
                if (_comboBox1Editor.Text != comboBox1.Text)
                { 
                }
            }

            void comboBox1Editor_KeyDown(object sender, System.Windows.Input.KeyEventArgs e)
            {
            }

            private void comboBox1Editor_TextChanged(object sender, TextChangedEventArgs e)
            {
                string text = (sender as TextBox).Text.Trim();
                if (text.Length < 5)
                {
                    _comboBox1Popup.IsOpen = false;
                }
                else if (text.Length == 5)
                {
                    _comboBox1Popup.IsOpen = false;

                    comboBox1.ItemsSource = GetTestData();
                }
                else
                {
                    // Adapted
                    // From: Implimenting AutoComplete combobox - Yiling Lai, Rovi Corporation answer
                    // Link: http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/cec1b222-2849-4a54-bcf2-03041efcf304/
                    comboBox1.Items.Filter += a =>
                    {
                        if ((a as StudyProxy).StudyNumber.StartsWith(text, StringComparison.OrdinalIgnoreCase))
                        {
                            return true;
                        }
                        return false;
                    };
                    _comboBox1Popup.IsOpen = true;
                }
            }

            private List<StudyProxy> GetTestData()
            {
                List<StudyProxy> list = new List<StudyProxy>();
                list.Add(new StudyProxy() { StudyID = 1, StudyNumber = "000-Test1" }.Init());
                list.Add(new StudyProxy() { StudyID = 1, StudyNumber = "000-Test11" }.Init());
                list.Add(new StudyProxy() { StudyID = 1, StudyNumber = "000-Test111" }.Init());
                list.Add(new StudyProxy() { StudyID = 1, StudyNumber = "000-Test1111" }.Init());
                list.Add(new StudyProxy() { StudyID = 1, StudyNumber = "000-Test12" }.Init());
                list.Add(new StudyProxy() { StudyID = 1, StudyNumber = "000-Test122" }.Init());
                list.Add(new StudyProxy() { StudyID = 1, StudyNumber = "000-Test1222" }.Init());
                list.Add(new StudyProxy() { StudyID = 1, StudyNumber = "000-Test13" }.Init());
                list.Add(new StudyProxy() { StudyID = 1, StudyNumber = "000-Test133" }.Init());
                list.Add(new StudyProxy() { StudyID = 1, StudyNumber = "000-Test1333" }.Init());

                return list;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:21:00.977

这可能会让你到达那里。我绑定了文本，它确实在退格键上被调用。

```
Text="{Binding Path=CBvalue, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
```

我做了类似的事情，但我继续下载超过 20,000 个值。我使用文本框和单独的列表视图。用虚拟化是不是什么大不了的全是 20,000。然后在文本更改时，我在过滤之前使用 DispatcherTimer 等待 1 秒，因此在他们输入时它不会过滤。然后 DispatchTimer 调用 BackGroundWorker 来应用过滤器，这样我就可以取消 BackGroundWorker。我只是将 ListView 绑定到使用 LINQ 过滤的列表。往返 DB 很慢。我的清单是半静态的。

# mysql - MySQL触发器获取导致触发器触发的当前查询

> ID：10651114
> 
> 赞同：2
> 
> 时间：2012-05-18T10:42:01.990
> 
> 标签：mysql

在过去的 4 个小时里，我在网上搜索了一个解决方案，但我能找到的只是：

你不能。不可能的。不会发生。

我不喜欢这种方法。

我的理论是，如果它被存储在 information_schema.processlist 中的某个点，那么必须有某种方式来获取它。我试图在 processlist 表上运行触发器，但无法让它工作，我认为是因为它是一个视图。运行日志不是一个选项，因为这会影响已经拥挤的服务器上的性能，并且有许多查询正在运行，我只希望它登录特定的表，然后只登录更新..

这就是传说中的stackoverflow！在这里您可以找到解决所有问题的方法，因为那里充满了天才！！！

所以，我请求，天才在哪里！展现自己！！:-)

谢谢， 泽德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:05:18.297

这里的问题是 MySQL 触发器的范围是行级的，而不是语句级的。因此，在触发器中，您可以访问给定行中每一列的 OLD 和 NEW 值，但您无权访问导致触发器触发的语句。

关于 information_schema.processlist，该视图中实际上没有“存储”（持久化）任何内容。它只是processlist的一个SQL接口，导致触发器触发的语句在触发器范围内是不可访问的。

您说您不想启用常规查询日志，并且由于多种原因（包括 event_Time 的粒度为 1 秒），这种方法并不完美，但这里有一个示例，说明如何使用general_log 表：

```
SET GLOBAL GENERAL_LOG='ON';
SET GLOBAL LOG_OUTPUT='TABLE';

DELIMITER || 

CREATE TRIGGER DEBUG_DATE BEFORE UPDATE ON db.tbl FOR EACH ROW 
BEGIN 
  DECLARE Q MEDIUMTEXT; 
  SELECT argument INTO Q 
  FROM mysql.general_log 
  where thread_id = connection_id() 
  order by event_time desc 
  limit 1;

  INSERT INTO db.tbl_log (INFO) 
  VALUES (Q); 

END ||

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T09:03:58.060

我们调查了这个问题，发现“DECLARE”在上面的示例中不起作用，并且应该在服务器上启用**general_log标志。**最后我们有以下触发代码：

```
DELIMITER $$

DROP TRIGGER IF EXISTS `our_trigger`$$
CREATE TRIGGER `our_trigger` 
BEFORE UPDATE ON `our_table_for_debug` 
FOR EACH ROW BEGIN 

SELECT argument INTO @tquery FROM mysql.general_log where thread_id = connection_id() and argument like 'update%' order by event_time desc limit 1;
INSERT INTO `our_log_table` (`query`) VALUES (@tquery);

END IF;

END$$

DELIMITER ; 
```

“our_log_table” 是具有单个 mediumtext 字段的表，名为`query`. 要启用常规日志，您应该运行以下查询：general_log = 1; 或直接在mysql设置中启用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:17:20.737

```
SELECT INFO FROM INFORMATION_SCHEMA.PROCESSLIST WHERE ... ; 
```

# iis - 通过 Invoke-Command 创建网站时抛出异常

> ID：10651116
> 
> 赞同：6
> 
> 时间：2012-05-18T10:42:08.917
> 
> 标签：iis, powershell

我正在调用命令

```
Invoke-Command  -computername remotepc { 
Import-Module WebAdministration; 
New-Website -Name www.somesite.com -ApplicationPool www.somesite.com -hostHeader www.somesite.com -physicalPath c:\inetpub\wwwroot } 
```

该网站已在远程计算机上的 IIS 中成功创建。但是，当 powershell 返回时会显示异常消息：

```
Invalid class string (Exception from HRESULT: 0x800401F3 (CO_E_CLASSSTRING))
    + CategoryInfo          : NotSpecified: (:) [New-Website], COMException
    + FullyQualifiedErrorId : System.Runtime.InteropServices.COMException,Microsoft.IIs.PowerShell.Provider.NewWebsite
   Command 
```

有谁知道我为什么会收到此消息以及如何解决它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T12:35:18.203

你能试一下吗 ：

```
$var = New-Website ... 
```

不确定但`New-Website`返回一个 PowerShell 远程会话尝试序列化失败的对象。

# c# - 从 ViewState 中的占用空间中删除 UserControls

> ID：10651118
> 
> 赞同：0
> 
> 时间：2012-05-18T10:42:18.440
> 
> 标签：c#, asp.net, viewstate, web-controls

我有一种管理员和会员页面。两者共享同一页面。唯一的区别是 Admin 看到的 UserControl 与 Member 不同。目前我正在这样做：

```
ucControl.Visible = false; 
```

为会员。这行得通。但它的效率非常低。它查询数据库并遵循正常的生命周期，它确实占用了 ViewState 中的空间。我如何得到它并使其更高效，因此它不会查询数据库并且不会不必要地占用 ViewState 中的空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:46:50.210

只需将代码添加到仅在可见时查询 db 等的 UserControl。

您可能希望`ucControl.Visible`在 Init 阶段进行设置 - 大概到此阶段您就知道用户是成员还是管理员。然后，您可以简单地测试 UserControl 的 Page_Load 中的可见性。

回复评论：

> 是的，我将它设置在初始化阶段并检查可见性。我是否也在 page_load 本身中禁用视图状态？如果我发现用户是会员？

如果用户是成员（即控件不可见），则不要执行任何操作。这样，UserControl 不会对 ViewState 做出贡献：

```
// inside the UserControl's Page_Load method
if (this.Visible)
{
    // The user is an Admin, do whatever is needed (access database, databind, ...)
    ...
}
else
{
    // The user is a Member, this UserControl is not used, do nothing.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:47:33.510

使用占位符并动态加载控件 - 唯一的问题是如果您需要使用回发并记住数据，那么它开始变得有点棘手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:44:39.477

制作

```
EnableViewState = "false" 
```

为此控件。除了使它们不可见之外，我还将禁用此控件。

# android - 如何获得如下所示的视图？

> ID：10651121
> 
> 赞同：2
> 
> 时间：2012-05-18T10:42:41.177
> 
> 标签：android, css, html, cordova

嗨，我正在使用 phonegap 开发一个 android 应用程序，我遇到了一个类似于图片中所示的 UI

![在此处输入图像描述](../Images/d97a44a1d857e3289f51a5658be66d86.png)

在图像中，有一堵墙，不同用户的信息围绕着它。我想以这种方式得到一些东西，谁能给我一个想法，如何使用 html 和 css 获得这种 UI。如果我的问题不清楚，我希望我能够解释我需要什么对不起。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:52:37.903

正如我之前提到的，css3 非常强大，只需通过这些[演示](http://webdesignerwall.com/trends/47-amazing-css3-animation-demos)来检查它可以实现的所有功能。大部分这些都可以在 phonegap 中完成，因为 phonegap 与 css3 配合得很好。jquery 页面转换也会有很大帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:15:25.177

我在这里找到了答案：http: [//net.tutsplus.com/tutorials/html-css-techniques/quick-tip-practical-css-shapes/](http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-practical-css-shapes/)。

尽管这仅适用于一侧，但我认为让它也适用于右侧并不难。

编辑：

我得到它为双方工作：

```
<!DOCTYPE html>  

<html lang="en">  
<head>  
    <meta charset="utf-8">  
    <title>CSS Shapes</title>  
    <style type="text/css">
        #container {  
            background: #666;  
            margin: auto;  
            width: 500px;  
            height: 700px;  
            padding-top: 30px;  
            font-family: helvetica, arial, sans-serif;  
        }  

        h1 {  
            background: #e3e3e3;
            border-top-left-radius:3px;
            border-top-right-radius:3px;
            border-bottom-right-radius:3px;
            background: -moz-linear-gradient(top, #e3e3e3, #c8c8c8);  
            background: -webkit-gradient(linear, left top, left bottombottom, from(#e3e3e3), to(#c8c8c8));  
            padding: 10px 20px;  
            margin-left: -20px;  
            margin-top: 0;  
            position: relative;  
            width: 100%;  

            -moz-box-shadow: 1px 1px 3px #292929;  
            -webkit-box-shadow: 1px 1px 3px #292929;  
            box-shadow: 1px 1px 3px #292929;  

            color: #454545;  
            text-shadow: 0 1px 0 white;  
        }  

        .arrow {  
            width: 0; height: 0;  
            line-height: 0;  
            border-left: 20px solid transparent;  
            border-top: 10px solid #c8c8c8;  
            top: 104%;  
            left: 0;  
            position: absolute;  
        }  
        .rightArrow {
            width: 0; height: 0;  
            line-height: 0;  
            border-right: 20px solid transparent;  
            border-top: 10px solid #c8c8c8;  
            top: 104%;  
            left: 100%;  
            margin-left:-20px;
            position: absolute;  
        }
    </style>
    <!--[if IE]>  
        <style>  
            .arrow { top: 100%; }  
        </style>  
    <![endif]-->  

</head>  
<body>  
     <div id="container">  

        <h1> My Heading <span class="arrow"></span> <span class="rightArrow"></span></h1>  

    </div>  
</body>  
</html> 
```

# objective-c - 压缩 plist - NSPropertyListSerialization vs plutil？

> ID：10651127
> 
> 赞同：1
> 
> 时间：2012-05-18T10:42:48.623
> 
> 标签：objective-c, macos, cocoa, property-list

我编写了一个简单的命令行工具，用于将特定的 ini 文件转换为属性列表的特殊需要。我正在使用`NSPropertyListSerialization`将字典写入 307kb 的二进制属性列表文件。但是，当我将其写入 XML 并使用**plutil**将其转换为二进制属性列表后，该文件的大小仅为 224kb。

我想尽可能多地保存数据，但我也想远离`NSTask`. 这里的问题是，我如何从代码中获得与使用`plutil`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:49:57.717

根据[这个非常古老的线程](http://www.cocoabuilder.com/archive/cocoa/153341-nspropertylistserialization-plutil-bloat-in-tiger-vs-jaguar.html)，`plutil`将寻找相同的子树，例如数组，并在生成的 plist 中使它们唯一。`NSPropertyListSerialization`很久以前就这样做了，但是由于过程相对较慢，并且开发人员希望序列化尽可能快地工作，因此将其删除。

在谷歌搜索之后，它看起来并不容易找到自己执行此操作的代码。您可能只需要处理大小上的微小差异，或者尝试推出自己的序列化程序。

# c# - 带有 Ajax 调用的 MVC - 不将对象传递给控制器 方法

> ID：10651131
> 
> 赞同：0
> 
> 时间：2012-05-18T10:43:04.367
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2, asp.net-ajax

我在一个简单的 MVC 视图中有以下代码：

```
<div id="CarText"><%=Model.Cars[10].Name %></div>
<div id="SelectedCar">no car selected</div>
<%=Ajax.ActionLink("ajax test","TestMethod",new {carObj = Model.Cars[10]},new AjaxOptions {UpdateTargetId = "SelectedCar"})%> 
```

然后在我的控制器中，我有以下内容：

```
public ActionResult TestMethod(Car carObj)
{
   return PartialView("SelectedCar", carObj);
} 
```

当我运行页面时，一切都按照我的预期呈现（例如，第 11 辆车的名称显示在第一个 div 中。然后，当我单击链接时，会调用控制器中的代码，但是“carObj”参数始终为空。

我现在已经阅读了相当多的页面和博客，但我没有看到我做错了什么......因此这个问题。

答案一如既往，非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:57:04.200

我同意 sk93
，虽然我没有使用 asjax.actionlink 方法太多（一个 jquery 人）。
我可以在您正在使用的操作链接方法中指出您的解决方案的一个问题，`{carObj = SOME_CAR_OBJ}`这意味着您发送的是一个具有名为`carObj`and的属性的对象`some value`。
相反，您应该拥有的是 JSON 对象

```
{
//all the car propertiese
name = cars[10].name,
id = cars[10].id
//etc etc
} 
```

这样您就可以将 carObj 发送回服务器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:48:48.250

所以事实证明你不能通过 ActionLink 传递一个对象......我想当你真正考虑它时这是有道理的。

哼哼..我想我将不得不简单地添加一个 ID 参数，以便我可以通过 Ajax 引用它：/

# crystal-reports - Crystal Report 数据未正确显示

> ID：10651133
> 
> 赞同：0
> 
> 时间：2012-05-18T10:43:06.513
> 
> 标签：crystal-reports

我在使用水晶报表时遇到问题，因为记录没有正确显示。下面是水晶报表输出与数据库查询对比的截图。

![在此处输入图像描述](../Images/6d274132dfb648b486a81ed6841bf76f.png)

我想寻求解决方法或解决方案。我尝试删除该对象并重新放置它，但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:02:13.420

电话号码不是从您在屏幕截图中突出显示的字段中提取的。您可以看到名称是从该字段中提取的，因为它有尾随 /

如果电话号码是从 FAPT_TELNO 字段中提取的，我有点不明白为什么 A 被转换为 0。你能附上保存数据的报告吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T03:42:27.880

我找到了解决方案，但仍然觉得很奇怪。

我所要做的就是添加此代码，它将恢复正常

`lower(mtel_picnm)`

但我不知道为什么我需要这样做。对此有什么帮助吗？只需添加评论以启发我。

# javascript - 如何在 JS 中访问麦克风？

> ID：10651138
> 
> 赞同：11
> 
> 时间：2012-05-18T10:43:20.087
> 
> 标签：javascript, html, api, microphone

Opera Next 已经支持网络摄像头，但麦克风支持呢？你知道吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T10:47:51.077

我知道这里有一个规范：http: [//lists.w3.org/Archives/Public/public-xg-htmlspeech/2011Feb/att-0020/api-draft.html](http://lists.w3.org/Archives/Public/public-xg-htmlspeech/2011Feb/att-0020/api-draft.html)

并且该 webkit 像这样支持它：[http ://www.labnol.org/software/add-speech-recognition-to-website/19989/](http://www.labnol.org/software/add-speech-recognition-to-website/19989/)

正确的代码是：

```
<input x-webkit-speech type="text" /> 
```

# html - 为什么没有一种合法的方式来垂直对齐元素？

> ID：10651142
> 
> 赞同：4
> 
> 时间：2012-05-18T10:43:23.440
> 
> 标签：html, css, layout, vertical-alignment

CSS 是一个很棒的东西，但是为什么没有官方的“标准”方式垂直对齐其他容器内的 div 和文本呢？我**拒绝**在我的布局中使用表格，因为让我们面对现实吧，它不再是 90 年代了！

我知道有一些方法可以使内容显示为垂直居中，使用边距/填充或垂直对齐与适当的行高（这根本不是最佳的）。如果您的 div 与您希望垂直居中的文本内容在同一容器中具有指定高度，则使用边距不起作用，因为文本大小因浏览器而异，因此它实际上不会在所有浏览器中居中。

**ANYBODY**是否知道是否存在或何时存在一种仅使用 CSS 轻松垂直居中内容的方法，而不是在当前的现代浏览器中使用表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:48:41.827

好吧，我建议使用一些轻量级的 jQuery 插件，它可以灵活地满足您的所有需求。这是示例：

```
(function ($) {
// VERTICALLY ALIGN FUNCTION
$.fn.vAlign = function() {
    return this.each(function(i){
    var ah = $(this).height();
    var ph = $(this).parent().height();
    var mh = Math.ceil((ph-ah) / 2);
    $(this).css('margin-top', mh);
    });
};
})(jQuery); 
```

然后你只需使用你想要的选择器上的功能：

```
$('#example p').vAlign(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:55:45.207

您可能想查看[这篇文章](http://css-tricks.com/centering-in-the-unknown/)，它介绍了一种纯 CSS 技术，可以将任意宽度和高度的子元素垂直居中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:13:03.040

你可以试试这个：

```
<div style="display:table-cell; vertical-align:middle"> ... </div> 
```

我想你列出了所有其他方法

# android - 加载 Drawable 时出现 Java.IO.IOException 警告

> ID：10651143
> 
> 赞同：0
> 
> 时间：2012-05-18T10:43:28.763
> 
> 标签：android, image, loading, xamarin.android, drawable

Android系统为什么会抛出这个异常？

```
05-18 12:33:44.169 W/System.err( 8230): java.io.IOException: Is a directory
05-18 12:33:44.169 W/System.err( 8230):     at org.apache.harmony.luni.platform.OSFileSystem.read(Native Method)
05-18 12:33:44.169 W/System.err( 8230):     at dalvik.system.BlockGuard$WrappedFileSystem.read(BlockGuard.java:165)
05-18 12:33:44.169 W/System.err( 8230):     at java.io.FileInputStream.read(FileInputStream.java:290)
05-18 12:33:44.169 W/System.err( 8230):     at java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:166)
05-18 12:33:44.169 W/System.err( 8230):     at java.io.BufferedInputStream.read(BufferedInputStream.java:324)
05-18 12:33:44.169 W/System.err( 8230):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
05-18 12:33:44.169 W/System.err( 8230):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:573)
05-18 12:33:44.169 W/System.err( 8230):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:384)
05-18 12:33:44.169 W/System.err( 8230):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:412)
05-18 12:33:44.169 W/System.err( 8230):     at dalvik.system.NativeStart.run(Native Method)
05-18 12:33:44.169 D/skia    ( 8230): ---- read threw an exception 
```

我正在将图像加载到内存中，如下所示：

```
return BitmapFactory.DecodeFile(fullPathToImage); 
```

这不会导致失败问题，但会导致加载中不必要的延迟。

图像存储在`Environment.ExternalStorageDirectory.AbsolutePath`. 路径是包含图像文件名和扩展名的完整路径。图像确实可以正确加载，那么为什么要这样做呢？

我看到了这个 SO: [java.io.IOException: Is a directory Android](https://stackoverflow.com/questions/8641863/java-io-ioexception-is-a-directory-android)，但这似乎与我没有使用的可绘制*资源有关。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:28:01.947

如果您将 DecodeFile 调用包装在检查中以查看文件系统是否认为它是目录，我很想看看您是否仍然收到错误：

```
File f = new File(fullPathToImage);
if (!f.IsDirectory)
{
    return BitmapFactory.DecodeFile(fullPathToImage);
}
else
{
    Console.WriteLine("This is a directory: " + fullPathToImage);
} 
```

另一种可能有用的想法。如果您正在处理非常大的图像并且您不需要它们是全分辨率的，您可以通过减小它们的大小来提高性能：

```
BitmapFactory.Options opts = new BitmapFactory.Options();
opts.InSampleSize = 4; //Cut the image size to 1/4 the original
return BitmapFactory.DecodeFile(imgFile, opts); 
```

# java - 使用 HibernateTemplate 时无法获取列名

> ID：10651151
> 
> 赞同：0
> 
> 时间：2012-05-18T10:43:51.287
> 
> 标签：java, sql, hibernate, spring-orm

我正在使用 Spring-orm 和 HibernateTemplate 来执行原生 SQL 查询（DB 是 Oracle 11 供参考），如下所示：

```
@Override
public List<Object> executeNativeQuery(final String queryStr, final Map<String, String> params) {

    List<Object> results = this.template.execute(new HibernateCallback<List<Object>>() {
        @Override
        public List<Object> doInHibernate(Session session) throws HibernateException, SQLException {
            // Get the query
            Query query = session.createSQLQuery(queryStr);

            // Assign parameters to the query, if any
            if (params != null) {
                for (Map.Entry<String, String> entry : params.entrySet()) {
                    query.setString(entry.getKey(), entry.getValue());
                }
            }

            // fire the query
            @SuppressWarnings("unchecked")
            List<Object> res = query.list();

            return res;
        }
    });

    return results;
} 
```

我已经成功地执行了查询并取回了结果。但是我想不出一种方法来获取结果列名，我开始认为使用这种方法是不可能的。我的问题是我必须执行来自用户输入的查询，而我对参数名称一无所知。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:51:48.597

我终于找到了一种方法，所以我发布它希望它对其他人有用。我做错了，正确的方法（至少对于我的需要）是使用`doWork`.

代替：

```
session.createSQLQuery(queryStr); 
```

我必须得到这样的连接：

```
session.doWork(new Work() {
    @Override
    public void execute(Connection con) throws SQLException {

        try {
            Statement st = con.createStatement();
            ResultSet rs = st.executeQuery(queryStr);
            ResultSetMetaData md = rs.getMetaData();
            int col = md.getColumnCount();
            System.out.println("Number of Column : " + col);
            System.out.println("Columns Name: ");
            for (int i = 1; i <= col; i++) {
                String col_name = md.getColumnName(i);
                System.out.println(col_name);
            }
        } catch (SQLException s) {
            System.out.println("SQL statement is not executed!");
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:22:12.980

尝试以下方法在 Hibernate 中获取列名：

```
public ArrayList<String> getTableDesc(String tableName){

    System.out.println("getFieldNames:start"+tableName);
    Object[] a;
    List<Object[]> fieldNames = new ArrayList<Object[]>();
    ArrayList<String> tabFieldNames = new ArrayList<String>();
    Session session = getHibernateTemplate().getSessionFactory().openSession();
    try{
    String queryStr = "desc "+tableName;
    fieldNames = (List<Object[]>) session.createSQLQuery(queryStr).list();
    for(int i=0;i<fieldNames.size();i++){
        a = fieldNames.get(i);
        tabFieldNames.add(a[0].toString());
    }
    }
    catch(Exception e){
        System.out.println("exception "+e);
    }
    finally{
        session.close();
    }
    System.out.println("getFieldNames:end"+tabFieldNames.toString());
    return tabFieldNames;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:52:09.073

您可以使用`ResultTransformer`类将查询结果映射到实体类。

[http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/querysql.html#d0e17313](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/querysql.html#d0e17313)

编辑1：

```
for( int i= 0; i< ((Object[])res.get(0)).length ; i++){
    //do something with data
    res.get(0)[i]
} 
```

# primefaces - 数据表中的列冻结或固定列

> ID：10651152
> 
> 赞同：5
> 
> 时间：2012-05-18T10:43:52.753
> 
> 标签：primefaces

是否可以冻结 Primefaces 数据表的前 3 列？

我正在使用 Primefaces 3.1

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T05:27:39.890

Primefaces 目前不支持固定列。

使用 Jquery 固定列来实现相同。参考：[http ://datatables.net/extras/fixedcolumns/](http://datatables.net/extras/fixedcolumns/)

例子：

```
var oTable2 = $(primfacesDataTableId).find('table').dataTable({
                "sScrollX" : "100%", //Scroll
                "sScrollY" : "180",
                "bAutoWidth" : false,
                "bScrollCollapse" : true,
                "bPaginate" : false,
                "bSort" : false,
                "sInfo" : "",
                "sInfoEmpty" : ""
            });

var oFC = new FixedColumns(oTable2, {
                    "iLeftColumns" : 4, //Freezed first for columns
                    "sHeightMatch" : "auto",
                    "iLeftWidth" : 405
                }); 
```

谢谢， 希哈

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-17T13:25:22.817

对于使用 Primefaces 4.1 或更高版本的用户，现在已经实现了此功能（顺便说一下，从第一次请求到需要四年时间）：

[https://code.google.com/p/primefaces/issues/detail?id=366](https://code.google.com/p/primefaces/issues/detail?id=366)

您可以在[陈列柜](http://www.primefaces.org/showcase/ui/data/datatable/scroll.xhtml)中使用水平滚动。

# c++ - 重载运算符<<：无法将左值绑定到 'std::basic_ostream &&'

> ID：10651161
> 
> 赞同：42
> 
> 时间：2012-05-18T10:44:36.863
> 
> 标签：c++

我有一个使用嵌套类的类，想用嵌套类在上层类`operator<<`中定义。`operator<<`这是我的代码的样子：

```
#include <memory>
#include <iostream>

template<typename T>
struct classA {
  struct classB
  {
    template<typename U>
    friend inline std::ostream& operator<< (std::ostream &out,
                                            const typename classA<U>::classB &b);
  };

  classB root;

  template<typename U>
  friend std::ostream& operator<< (std::ostream &out,
                                   const classA<U> &tree);
};

template<typename T>
inline std::ostream& operator<< (std::ostream &out,
                                 const classA<T> &tree)
{
  out << tree.root;
  return out;
}

template<typename T>
inline std::ostream& operator<< (std::ostream &out,
                                 const typename classA<T>::classB &b)
{
  return out;
}

int main()
{
  classA<int> a;
  std::cout << a;
} 
```

*   在不支持 C++11 的情况下编译时，编译器似乎找不到内部类的 operator<< 定义：

    ```
    so.hpp:24:7: error: no match for ‘operator<<’ in ‘out << tree.classA<int>::root’
    so.hpp:24:7: note: candidates are: ... 
    ```

*   使用 std=c++0x 编译时使用 GCC 4.6 和 4.7：

    ```
    so.hpp:21:3: error: cannot bind ‘std::ostream {aka std::basic_ostream<char>}’ lvalue to ‘std::basic_ostream<char>&&’
    In file included from /usr/include/c++/4.7/iostream:40:0,
                     from so.hpp:2:
    /usr/include/c++/4.7/ostream:600:5: error:   initializing argument 1 of ‘std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&&, const _Tp&) [with _CharT = char; _Traits = std::char_traits<char>; _Tp = classA<int>::classB]’ 
    ```

有人能告诉我为什么这段代码不合法​​，什么是做我想做的最好的方法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-18T11:24:14.987

您在此运算符中遇到[“不可演绎的上下文”问题](https://stackoverflow.com/q/6060824/597607)

```
template<typename T>
inline std::ostream& operator<< (std::ostream &out,
                                 const typename classA<T>::classB &b)
{
  return out;
} 
```

编译器无法确定哪些值`T`将导致`classB`与您要传递的参数相匹配。所以这个模板不考虑！

在 C++11 模式下，编译器会继续从标准库中查找匹配项

```
operator<<(std::basic_ostream<_CharT, _Traits>&&, const _Tp&) 
```

它*可以*匹配`_Tp`几乎任何类型，包括`classA<T>::classB`，但请注意第一个参数不匹配。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-18T11:49:09.723

Bo 提供了发生这种情况的*原因*`T`（在调用嵌套的`operator<<`.函数。为此，您需要内联*定义*函数：

```
template<typename T>
struct classA {
  struct classB
  {
    friend inline std::ostream& operator<< (std::ostream &out,
                                            const classB &b) {
       // definition goes here
    }
  };

  classB root;

  friend std::ostream& operator<< (std::ostream &out,
                                   const classA<U> &tree) {
       // definition goes here
  }
}; 
```

这两种方法之间存在一些差异。最重要的是，这种方法将使编译器为模板的每个实例化定义一个非模板化重载`operator<<`，因为它不再是模板，所以不依赖于推导参数。另一个副作用是该方法*更严格*（您只与*一个*函数成为朋友，而在您最初的方法中，您与模板和所有可能的实例化（可以用作访问您的类内部的漏洞）成为朋友。最后如此定义的函数只能通过 ADL 找到，因此`operator<<`当参数不是`ClassA<T>`or时，编译器需要考虑的重载较少`ClassA<T>::ClassB`。

* * *

*如何通过您的方法获得访问权限*

```
namespace {
   struct intruder {
       ClassA & ref;
       intruder( ClassA& r ) : ref(r) {}
   };
   template <>
   std::ostream& operator<< <intruder>( std::ostream& _, ClassA<intruder> const& i ) {
       std::cout << i.ref.private_member << std::endl;
       return _;
   }
} 
```

*选择*

或者，您可以与模板的特定专业化成为朋友。这将解决`intruder`问题，因为它只对 开放，影响`operator<<`要`ClassA<intruder>`小得多。但这不会解决您的特定问题，因为该类型仍然不可推断。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T11:32:07.043

试试这个：

```
template<typename T>
inline std::ostream& operator<< (std::ostream &out,
                             const classA<T> &tree)
{
   //out << tree.root;
   ::operator<<( out, tree.root);
   return out;
} 
```

然后你会得到一个直截了当的无能供词：

```
test.cpp:34:3: error: no matching function for call to ‘operator<<(std::ostream&, const classA<int>::classB&)’
test.cpp:34:3: note: candidates are:
test.cpp:23:22: note: template<class T> std::ostream& operator<<(std::ostream&, const     typename classA<T>::classB&)
test.cpp:30:22: note: template<class T> std::ostream& operator<<(std::ostream&, const classA<T>&) 
```

解决方法：也许您可以在嵌套的 classB 中使用成员函数，并使用它来代替 operator<< ... 当然，该解决方案有许多缺点，但它可能会让您摆脱这种匆忙。

# php - 一页多于 1 个表格

> ID：10651168
> 
> 赞同：-1
> 
> 时间：2012-05-18T10:44:48.070
> 
> 标签：php, html

我在一页上有多个表单的问题。在页面索引中，我包含 4 个表格

```
include('./poll_1a.php');
include('./poll_2a.php');
include('./poll_3a.php');
include('./poll_4a.php'); 
```

每个投票页面的表单代码都是相同的。我为每个脚本都包含了一些独特的标记（$poll_code），但效果是当我使用一种形式时——发送变量在其他形式中被接收。但我想单独处理每个表格。

变量 $poll_code 对于每个脚本都是唯一的 -> poll_1 为 1，poll_2 为 2 等。同样的情况与 $cookie_name

```
$cookie_name = "poll_cookie_".$poll_code; 
```

正如我所见，cookie 有不同的名称。

```
 $poll_code = "1"; // or 2, 3, 4
 ?>
 <p>    
  <form action="<?php echo $_SERVER["PHP_SELF"]; ?>" method="post" name="<?php echo $poll_code; ?>">
  <input type="hidden" name="poll_cookie_<?php echo $poll_code; ?>" value="<?php echo $poll_code; ?>">
  <table>
<?php
  //print possible answers
  for($i=0;$i<count($answers);$i++){
    ?><tr><td style="\text-allign: left;\"><input type="radio" name="vote_<?php echo $poll_code; ?>" value="<?php echo $i; ?>"> <?php echo $answers[$i]; ?></td></tr><?php
  }
  echo "</table>";
  echo "<br>";

if ($_COOKIE["$cookie_name"] == $poll_code ) { 
  echo "<br> &nbsp; &nbsp; &nbsp; nie można głosować ponownie ...";
} else {  
?>

    <p><input type="submit" name="submit_<?php echo $poll_code; ?>" value="głosuj !" onClick="this.disabled = 'true';"></p>

<?php    
    }
?>  

  </form>
</p> 
```

问：如何使这些表单在一页上单独工作？

// - - - - - - - - - - 编辑

脚本的接收部分

```
 $votes = file($file);
  $total = 0;
  $totale = 0;
  $poll_cookie = 0;

if (isset($_POST["vote_$poll_code"]) &&  isset($_POST["poll_cookie_$poll_code"])) {
  $vote = $_POST["vote_$poll_code"]; 
  $poll_cookie = $_POST["poll_cookie_$poll_code"];
  }

  //submit vote
  if(isset($vote)){
    $votes[$vote] = $votes[$vote]+1;
  }

  //write votes
  $handle = fopen($file,"w");

  foreach($votes as $v){
    $total += $v;
    fputs($handle,chop($v)."\n");
  }

  fclose($handle); 
```

当然，$file 也有唯一的声明（在脚本顶部，在 $poll_code 声明下）。

```
$file = "poll_".$poll_code.".txt"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:49:45.933

我认为问题可能出`<?php echo $poll_code; ?>`在循环之外所以也许它总是使用分配给它的相同值，也许把它放在循环内

# r - 给定一个随机变量样本和 n，我如何找到 n Xs 之和的 ecdf？

> ID：10651170
> 
> 赞同：0
> 
> 时间：2012-05-18T10:44:49.613
> 
> 标签：r

我无法适应`X`一个共同的发行版，所以目前我只有`X ~ ecdf(sample_data)`.

如何计算`sum(X1 + ... + Xn)`, 给定的经验分布`n`？X1 到 Xn 是独立同分布的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:23:02.593

`n`要估计该总和的分布，您可以使用替换重复抽样（然后取总和）`sample_data`。（就像 ecdf 一样，`sample()`在 的每个元素上放置相等的概率质量`sample_data`，因此您不需要将计算`ecdf(sample_data)`作为中间步骤。）

```
# Create some example data
sample_data <- runif(100)

n <- 10
X <- replicate(1000, sum(sample(sample_data, size=n, replace=TRUE)))

# Plot the estimated distribution of the sum of n variates.
hist(X, breaks=40, col="grey", main=expression(sum(x[i], i==1, n)))
box(bty="l")

# Plot the ecdf of the sum
plot(ecdf(X)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:02:07.600

首先，概括和简化：求解阶跃函数 CDF X 和 Y，独立但不同分布。对于每一步跳转 x [i]和每一步跳转 y [i ，在 X + Y 的 CDF 中都会在 x] [i] +y [i]处有对应的一步跳转，所以 X + Y 的 CDF 将由列表表征：

```
sorted(x + y for x in X for y in Y) 
```

这意味着如果 X 的 CDF 中有 k 个点，则(X [1] + ... + X [n ) 中将有 k] ^n个。我们可以通过再次丢弃除 k 之外的所有内容，在最后将其减少到一个可管理的数字，但显然中间计算在时间和空间上将是昂贵的。

另外，请注意，即使原始 CDF 是 X 的 ECDF，结果也*不会*是 (X [1] + ... + X [n] ) 的 ECDF，即使您保留所有 k ^n个点。

总之，使用 Josh 的解决方案。

# actionscript-3 - 使用 Actionscript 获取文件夹中的所有文件名

> ID：10651178
> 
> 赞同：0
> 
> 时间：2012-05-18T10:45:15.217
> 
> 标签：actionscript-3, filenames

我需要 Actionscript 3 中的 baisc 方法来获取包含特定文件夹的所有文件的文件名的数组。该文件夹位于我的本地 WAMP (php) 服务器上。(http://localhost/flash/uploads/xml)

我还需要 php 代码，还是只适用于 AS3 代码？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:12:51.290

常规的 Actionscript 不能很好地支持文件和目录命令。使用其他东西肯定会更好。

# javascript - 下载文档框架中的内容

> ID：10651180
> 
> 赞同：0
> 
> 时间：2012-05-18T10:45:28.383
> 
> 标签：javascript, google-chrome, plugins, google-chrome-extension, npapi

我正在为 Google Chrome 编写一个将页面转换为 PDF 的扩展程序。

为此，我下载了页面的 DOM 并将其传递给软件，该软件进一步将网页转换为 PDF。由于只传递了 DOM，因此软件会下载各种其他资源，如 CSS、图像等。

该软件不允许访问受保护的资源，即位于以 https:// 开头的 URL。这些资源通过使用 XMLHttpRequest 在与 JavaScript 交互的 (NPAPI) DLL 中单独下载。

这种方法适用于没有 HTTPS 框架的页面。要将此功能扩展为适用于 HTTPS 框架，我需要为每个嵌套框架下载它们的 DOM、图像和 CSS 等。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:09:15.090

如果您使用内容脚本来捕获 DOM，则应该像将捕获代码注入所有帧一样简单：

> > > chrome.tabs.executeScript(tabId, { code:code, **allFrames:true** });

然后让消息传递函数也传回`window.location`并交叉引用`src="..."`所有帧上的属性。

# struts2 - 当我在其他 2 个 POJO 类中声明字段变量时，我想自动在 struts2 Action 类中设置 jsp 文本字段值

> ID：10651187
> 
> 赞同：0
> 
> 时间：2012-05-18T10:45:38.500
> 
> 标签：struts2

我不想再次在 Action 类中声明这些变量

员工 POJO：

```
package com.pojo;

import java.io.Serializable;

public class Employee{

    String name;
    Address address;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Address getAddress() {
        return address;
    }

    public void setAddress(Address address) {
        this.address = address;
    }

} 
```

地址POJO：

```
package com.pojo;

import java.io.Serializable;

public class Address{

    String email;

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }               
} 
```

JSP：

```
<body>
<s:form action="beanEx">

<s:textfield label="name" name="name"/>
<s:textfield label="email" name="email"/>

<s:submit value="Submit"/>

</s:form>

</body> 
```

我想填充值自动设置 Action 类中的值

谁能帮帮我…………

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:49:24.707

在你的动作类中有两个对象与 getter/setter

```
private Address address = new Address();
private Employee employee = new Employee();; 
```

然后在你的jsp中这样做：

```
<body>
    <s:form action="beanEx">    
        <s:textfield name="employee.name" label="name"/>
        <s:textfield name="address.email" label="email"/>    
        <s:submit value="Submit"/>    
    </s:form>    
</body> 
```

基本上，之前您指向的是字段，现在您指向的是对象内的字段。

# ios - XCode 不重建依赖关系

> ID：10651188
> 
> 赞同：6
> 
> 时间：2012-05-18T10:45:38.773
> 
> 标签：ios, xcode

我有多个生成库的 xcodeprojects。如果我对库中的任何文件进行更改，它不会在更改中编译。

我已经设置了目标依赖项，以便根项目依赖于其他项目。但是进行更改并不强制编译器重新构建它们。

谁能指出我正确的方向？

谢谢

# ruby-on-rails - 具有不同 ruby 和 rails 版本的 rails 服务器设置选项

> ID：10651191
> 
> 赞同：0
> 
> 时间：2012-05-18T10:46:00.053
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, hosting

我正在设置我的 VPS (linode) 来托管一些 Rails 网站。**设置*一台*服务器来托管不同版本的 rails 和 ruby​​ 上的 rails 网站有哪些不错的选择。**例如

```
foo.com - ruby 1.9.2, rails 3.0
bar.com - ruby 1.9.3, rails 3.2.3 
```

我只看过一篇关于此类设置的[博客文章](http://blog.phusion.nl/2010/09/21/phusion-passenger-running-multiple-ruby-versions/)（使用乘客），但我有兴趣了解其他一些解决方案的外观。或者，如果这是一个坏主意，我也应该为每个我想知道的 VPS 使用不同的 VPS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:25:25.360

例如，您可以为每个应用程序使用独立的 Passenger 或 Unicorn 实例，并通过 Apache 或 Nginx 对它们进行反向代理，以便它将在默认端口 80 上响应

# android - 如何通过json数据或字符串将uiimage发送到另一台设备？

> ID：10651193
> 
> 赞同：2
> 
> 时间：2012-05-18T10:46:00.187
> 
> 标签：android, iphone, json, uiimage, xcode4.3

我是 iPhone 开发的新手。目前我正在开发一个需要发送图像和文本的应用程序。所以我想到了通过将字符串作为json数据发送来使用json技术。现在我需要将此图像附加到此字符串。谁能建议一种方法来做到这一点？

这个应用程序也应该能够与安卓手机碰撞。有什么方法可以做到这一点吗？
我听说将图像转换为 base64 并作为字符串发送。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:50:41.523

将图像转换为 base64 是正确的方法。请看下面的代码片段

```
public String convertToBase64(Bitmap bm){
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    bm.compress(Bitmap.CompressFormat.PNG, 100, baos);
    byte[] image = baos.toByteArray();

    String encodedImage = Base64.encodeToString(image, Base64.DEFAULT);
    return encodedImage;
} 
```

您可以使用此字符串通过 JSON 数据发送

**iPhone的编辑部分** 试试这个代码

```
-(NSString *)getStringFromImage:(UIImage *)image{

 if(image){

  NSData *dataObj = UIImagePNGRepresentation(image);

   return [dataObj base64Encoding];

   } else {

  return @"";

 }
} 
```

希望这能解决你的问题

# configuration - 如何解决 Joomla 1.5 中的域和子域问题？

> ID：10651196
> 
> 赞同：0
> 
> 时间：2012-05-18T10:46:02.477
> 
> 标签：configuration, joomla, dns, subdomain, joomla1.5

我在*http://domain.com/subdomain*上发布了一个 Joomla 1.5 站点。现在，我使用指向*子域*文件夹的主机提供商（Yahoo Small Business）添加了一个子域：

> subdomain.domain.com 指向 domain.com/subdomain

*domain.com/subdomain*工作正常，但是当我转到*subdomain.domain.com*时，只有菜单在黑色背景上显示（但未格式化）。当我单击一个项目时，它会转到*http://subdomain.domain.com/subdomain/index.php/clicked-item*并给我一个 404 错误。( **[编辑 1]**不应该是*http://subdomain.domain.com/index.php/clicked-item*之类的吗？当我手动输入*http://subdomain.domain.com/index.php/clicked-项目*再次我受到 404 的欢迎。）

任何帮助将不胜感激。

**[编辑 2]**

我已停用*搜索引擎友好 URL*，这是现在的行为：

*   仍然当我去*subdomain.domain.com*时，只有菜单在黑色背景上显示（但没有格式化）；
*   仍然当我单击一个项目时，它会转到*http://subdomain.domain.com/subdomain/index.php/clicked-item-and-stuff*并给我一个 404 错误；
*   但是当我手动输入*http://subdomain.domain.com/index.php/clicked-item-and-stuff*它显示我请求的页面，但没有任何格式。

**[编辑 3]**

请记住，我使用的是不允许*.htaccess*的 Yahoo Small Business 。

在找到合适的解决方案之前，我只是在使用 hack：*subdomain.domain.com*指向*domain.com/another-subdomain*，它重定向到安装 Joomla 的*domain.com/subdomain 。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:38:32.207

检查根目录中的 configuration.php 文件，确保将 live_site 参数设置为正确的基本 URL，例如 subdomain.domain.com

# jsf - 命令按钮在第二次推送时调用操作 (jsf)

> ID：10651199
> 
> 赞同：6
> 
> 时间：2012-05-18T10:46:15.997
> 
> 标签：jsf, jsf-2, primefaces, submit

我遇到了我的应用程序的奇怪行为。命令按钮在第二次点击时开始调用动作。首先 - 没有任何反应。它对 firefox 和 chromium 生效，但在顿悟中照常工作。

我的环境： - ubuntu 11.04 - glassfish 3.1.1 - jsf 2.X - primefaces 3.2 - firefox 12.0 - 顿悟 2.30.6

代码示例：

```
 <ui:define name="content">
       <h:form id="form">
            <h:panelGrid id="panelGrid" columns="3">

                <h:outputText value="#{msg.fieUserName}:"/>
                <h:inputText  id="name"  value="#{userBb.editedUser.username}" />
                <h:message    for="name" styleClass="error_msg"/>

                <h:outputText value="#{msg.fieUserDescription}:"/>
                <h:inputText  id="description"  value="#{userBb.editedUser.description}" />
                <h:message    for="description" styleClass="error_msg"/>

                <h:outputText   value="#{msg.fieUserPassword}:"/>
                <h:inputSecret  id="password" value="#{userBb.editedUser.password}" redisplay="true"/>
                <h:message      for="password" styleClass="error_msg"/>

                <h:outputText value="#{msg.fieUserRights}:"/>
                <p:selectOneMenu id=       "rights"
                                 value=    "#{userBb.editedUserGroup}"
                                 converter="#{pGroupOfUsersConverter}">
                    <f:selectItems
                        value    ="#{groupDao.findAll()}"
                        var      ="row"
                        itemLabel="#{groupDao.rightsDescription(row.id)}"
                        itemValue="#{row.groupname}" 
                        >
                    </f:selectItems>
                </p:selectOneMenu>
                <h:message for="rights" styleClass="error_msg"/>

                <h:outputText value="#{msg.fiePorofolioName}:" rendered="#{userBb.chosenNew}"/>
                <h:inputText  id="portName" value="#{userBb.portfelForNewUser.nazwa}" rendered="#{userBb.chosenNew}">
                    <f:validateBean disabled="true" />
                </h:inputText>
                <h:message for="portName" styleClass="error_msg" rendered="#{userBb.chosenNew}"/>

                <h:outputText    value="#{msg.fiePotofolioCurrency}:" rendered="#{userBb.chosenNew}"/>
                <p:selectOneMenu id=       "waldep" 
                                 value=    "#{userBb.portfelForNewUser.walutaDepozytowa}"
                                 converter="#{igConverter}"
                                 rendered= "#{userBb.chosenNew}"
                                 >
                   <f:selectItems value=    "#{igDao.waluty}" 
                                  var=      "row"
                                  itemLabel="#{row.nazwa}"/>
                </p:selectOneMenu>
                <h:message for="waldep" styleClass="error_msg" rendered="#{userBb.chosenNew}"/>

            </h:panelGrid>
            <h:panelGrid columns="2">
               <h:commandButton value="#{msg.butCreate}" action="#{userBb.formCreate()}" rendered="#{userBb.chosenNew}" />
               <h:commandButton value="#{msg.butSave}"   action="#{userBb.formEdit()}"   rendered="#{!userBb.chosenNew}"/>
               <h:commandButton value="#{msg.butBack}"   action="#{userBb.formBack()}"/>
            </h:panelGrid>
        </h:form>
    </ui:define> 
```

在此示例方法中，userBb.formCreate() 仅在第二次单击命令按钮时调用，尽管按钮是可见的。当字段未正确填写时，它们旁边会出现相应的消息，但是...仅在第二次单击时！有什么建议吗？

我检查了以下几点：[这个建议](https://stackoverflow.com/a/2120183/1331274)，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T12:36:33.287

好的，我发现了问题所在。所以：

**问题的出现：** 我有一个用户数据页面。一些输入项和命令按钮。单击“创建”按钮时，输入数据被检出。如果数据正常，则创建用户并出现用户表，或者出现错误时 - 出现错误消息并且用户停留在同一页面上： ![在此处输入图像描述](../Images/ccde26a2c15ab2dd9ce5f8fbb40e22f6.png)

我发现了一些不稳定的行为。第一次点击（动作）没有发生任何事情，只有第二次和后续动作有效果。但。这种行为**与**我使用的网络浏览器类型有关。

所有操作都发生在第一次点击时，在网络浏览器中：顿悟和 konqueror。尽管在 Firefox 和 Chromium 中，我观察到了我上面描述的这种不稳定的行为。命令按钮的代码是：

```
<h:commandButton value="#{msg.butCreate}" action="#{userBb.formCreate()}" rendered="#{userBb.chosenNew}"/> 
```

不同浏览器中的不同行为。

**原因。** @Balusc 在他的[笔记](https://stackoverflow.com/a/2120183/1331274)中列举了原因，这是我第一次大致阅读的。这确实是pt。7\.

**解决方案。** 我试图以这种方式更改按钮声明：

```
<h:commandButton value="#{msg.butCreate}" action="#{userBb.formCreate()}" rendered="#{userBb.chosenNew}">
   <f:ajax render="userForm"/>
</h:commandButton> 
```

其中 userForm 是 h:form 的正确 id。没有结果，仍然只有第二次和随后的点击有效果 - 显示错误消息。

所以我从上一页更改了声明命令按钮，该按钮调用了不稳定的行为页面。原来是：

```
<p:commandButton value="#{msg.butNew}"    action="#{userBb.actionNew()}"/> 
```

primefaces 命令按钮。就是这样，正如 Balusc 所写：*“如果带有 UICommand 按钮的父级被**ajax 请求预先渲染/更新**，那么第一个操作将始终失败。”*

所以我将声明更改为：

```
<p:commandButton value="#{msg.butNew}"    action="#{userBb.actionNew()}" ajax="false"/> 
```

就是这样。对于第一个操作，它在任何浏览器中都可以正常工作。

# wpf - DataGridCheckboxColumn 双向绑定

> ID：10651206
> 
> 赞同：28
> 
> 时间：2012-05-18T10:46:37.330
> 
> 标签：wpf, xaml, datagrid, .net-3.5, wpfdatagrid

我在 .NET 3.5 中使用 WPF 工具包中的 DataGrid。

我有一个数据网格列绑定到源对象的布尔属性。

该复选框正在正确调用布尔值的属性获取访问器。

但是，在检查或取消选中框中，正在调用GET而不是集合。

```
<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Object,  Source={StaticResource model}, Mode=TwoWay}">
        <DataGrid.Columns>
            <DataGridCheckBoxColumn Binding="{Binding BoolProperty, mode=TwoWay}"/>                
        </DataGrid.Columns>
</DataGrid> 
```

当我改为使用带有复选框的 DataGridTemplateColumn 时，属性设置正确，但是创建一个漂亮的布局会更加复杂。

```
<DataGridTemplateColumn>
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <CheckBox IsChecked="{Binding BoolProperty, Mode=TwoWay}"/>                            
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

使用 DataGridCheckBoxColumn 我做错了什么？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-21T14:24:40.323

我和你有同样的问题，这是我的解决方案

```
<CheckBox HorizontalAlignment="Center" IsChecked="{Binding BoolProperty, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2014-10-17T07:00:27.840

我的解决方案是将 UpdateSourceTrigger 设置为 PropertyChanged。

```
<DataGridCheckBoxColumn Header="Bool property" Binding="{Binding BoolProperty, UpdateSourceTrigger=PropertyChanged}"></DataGridCheckBoxColumn> 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-18T10:50:30.427

在`DataGrid`您结束行/单元格的编辑之前，绑定不会被提交。如果您按下回车键，绑定将应用回源。

使用这样的模板会覆盖该行为，但我不建议这样做。`TwoWay`也不需要显式设置。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-07-29T09:56:04.093

我的解决方案是使用 Style TargetType="CheckBox" 添加 ElementStyle：

```
<DataGridCheckBoxColumn Binding="{Binding BoolProperty, UpdateSourceTrigger=PropertyChanged}">
          <DataGridCheckBoxColumn.ElementStyle>
                 <Style TargetType="CheckBox"/>
          </DataGridCheckBoxColumn.ElementStyle>
</DataGridCheckBoxColumn> 
```

# c# - 是否使用正则表达式解析文本文件

> ID：10651210
> 
> 赞同：-1
> 
> 时间：2012-05-18T10:47:18.563
> 
> 标签：c#, regex, linq

我有一个包含以下内容的文本文件：

```
Warning 18.05.2012 16:27:45 www.site.com    0   None    BusyCount: 00:00:00.0000880
Warning 18.05.2012 16:27:45 www.site.com    0   None    GetBusyPlace: 00:00:00.7759916
Warning 18.05.2012 16:27:44 www.site.com    0   None    GetHallPlan: 00:00:00.0098537
Warning 18.05.2012 16:27:44 www.site.com    0   None    GetSeatPrice: 00:00:00.1462649
Warning 18.05.2012 16:27:40 www.site.com    0   None    BusyCount: 00:00:00.0000988
Warning 18.05.2012 16:27:40 www.site.com    0   None    GetBusyPlace: 00:00:00.7330764
Warning 18.05.2012 16:27:39 www.site.com    0   None    GetHallPlan: 00:00:00.0435432 
```

我有三个数组：

```
List<string> getSeatPrice = new List<string>();
List<string> getBusyCounts = new List<string>();
List<string> getHallPlan = new List<string>(); 
```

例如，如何解析此文本文件并从字符串中获取时间`GetBusyPlace: 00:00:00.7759916`并放入适当的数组中？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:50:52.920

看起来文件中的每一行都是以空格分隔的标记集。在这种情况下，最简单的做法是使用`String.Split()`, 并通过它在字符串中的位置获取所需的标记。

```
var getSeatPrice = new List<string>();
var getBusyCounts = new List<string>();
var getHallPlan = new List<string>();
foreach (var line in File.ReadAllLines("c:\\data\\myfile.txt")) {
    var tokens = line.Split('\t', ' ');
    var kind = tokens[6];
    var value = tokens[7];
    switch (kind) {
        case "GetSeatPrice:":
            getSeatPrice.Add(value);
        break;
        case "BusyCount:":
            getBusyCounts.Add(value);
        break;
        case "getHallPlan:":
            getHallPlan.Add(value);
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:48:47.960

看起来像一个固定宽度的字段格式。

我建议使用[`TextFieldParser`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)位于命名空间中的类`Microsoft.VisualBasic.FileIO`（只需添加一个引用就`Microsoft.VisualBasic.dll`可以了）。

它是一个 .NET 库，您可以设置它来指定字段宽度和类型，以获得字段的强类型视图。

# gwt - 在 MVP GWT 项目中使用代码拆分

> ID：10651211
> 
> 赞同：1
> 
> 时间：2012-05-18T10:47:28.550
> 
> 标签：gwt, mvp

在我正在进行的一个项目中，我们遵循 MVP 结构，但我们不使用任何特定的框架，如 GTWP。对于没有“开箱即用”代码拆分的这种情况，在使用此工具时可以采用哪些最佳实践？（在哪里拆分代码，其他注意事项等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:13:27.017

我建议阅读 GWT 开发人员指南 代码拆分 。它谈到了一些最佳实践。

[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)

# google-app-engine - 如何知道 Google AppEngine 数据存储区的操作是否完整

> ID：10651214
> 
> 赞同：0
> 
> 时间：2012-05-18T10:47:37.677
> 
> 标签：google-app-engine, gwt

我正在从我的 GWT Web 应用程序中执行方法 Datastore.delete(key)，AsyncCallback 调用了 onSuccess() 方法。我`http://localhost:8888/_ah/admin`立即刷新，我打算删除的实体仍然存在。类似于，我立即刷新我的 GWT Web 应用程序，我打算删除的项目仍然显示在网页上。注意 onSuccess() 已被调用。

那么，我怎么知道实体何时已被删除？

```
 public void deleteALocation(int removedIndex,String symbol ){
    if(Window.confirm("Sure ?")){
        System.out.println("XXXXXX  " +symbol);
        loCalservice.deletoALocation(symbol, callback_delete_location);
    }

}
public AsyncCallback<String> callback_delete_location = new AsyncCallback<String>() {      

    public void onFailure(Throwable caught) {
        Window.alert(caught.getMessage());
    }

    public void onSuccess(String result) {
        // TODO Auto-generated method stub
        int removedIndex = ArryList_Location.indexOf(result);
        ArryList_Location.remove(removedIndex);
        LocationTable.removeRow(removedIndex + 1);
        //Window.alert(result+"!!!");
    }
}; 
```

服务器 ：

```
public String deletoALocation(String name) {
    // TODO Auto-generated method stub
    Transaction tx = Datastore.beginTransaction();
    Key key = Datastore.createKey(Location.class,name);
    Datastore.delete(tx,key); 
    tx.commit();
    return name;
} 
```

对不起，我英语不好:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:36:03.680

根据[文档](https://developers.google.com/appengine/docs/python/datastore/functions#put)

> 返回与存储的模型实例对应的 Key 对象（如果给定一个模型实例）或 Key 对象列表（如果给定实例列表）。

如果您需要一个有效的删除功能示例，这可能会[有所帮助](https://github.com/buslinks/myblog/blob/master/views.py)。108 号线

```
class DeletePost(BaseHandler):

def get(self, post_id):
    iden = int(post_id)
    post = db.get(db.Key.from_path('Posts', iden))
    db.delete(post)
    return webapp2.redirect('/') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T23:09:20.030

你如何检查实体的存在？通过查询？

HRD 上的查询[最终是一致](https://developers.google.com/appengine/docs/java/datastore/structuring_for_strong_consistency)的，这意味着如果您添加/删除/更改实体然后立即查询它，您可能看不到更改。这样做的原因是，当您写入（或删除）一个实体时，GAE[会分几个阶段](https://developers.google.com/appengine/articles/life_of_write)异步更新索引和实体。由于这需要一些时间，因此您可能不会立即看到更改。

链接文章讨论了减轻此限制的方法。

# iphone - 在锁定模式下播放音频

> ID：10651216
> 
> 赞同：0
> 
> 时间：2012-05-18T10:47:46.617
> 
> 标签：iphone, ios, ipad, object, ipod

我正在从事与音频相关的项目。我正在播放音频，在这两种情况下，我的应用程序要么处于活动状态，要么处于暂停状态。我被困在这里，当我播放音频并锁定我的 iphone 时，当我双击主页按钮时，会出现播放器控件。我尝试播放/暂停可能的音频，而不像在默认 ipone/ipod 应用程序中那样解锁 iphone。是否可以？如果是，请随时提供帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:13:36.110

使用远程控制事件

远程控制事件是为了控制媒体而接收的任何事件。例如，双击主屏幕按钮可获得 iTunes 暂停/播放/下一个/上一个按钮，或通过耳机上的播放/暂停按钮远程控制事件。

[http://www.sagorin.org/2011/11/29/ios-playing-audio-in-background-audio/](http://www.sagorin.org/2011/11/29/ios-playing-audio-in-background-audio/)

# javascript - Ruby Rails - JS - 在 AJAX 中停止以前的脚本

> ID：10651219
> 
> 赞同：0
> 
> 时间：2012-05-18T10:47:55.867
> 
> 标签：javascript, ruby, ruby-on-rails-3

我有这个改变的 javascript 来计数计时器。脚本工作正常。但我在 ajax 响应中使用它。当我第一次运行 ajax 查询时，我得到了 JS 作为响应，并且这个时钟运行良好。但是，当我在第一个请求之后发出更多请求时，计时器会变得混乱，好像有多个 setInterval 正在运行，这会导致不受控制的计数，在每个新的 ajax 响应之后，统计信息运行得更快，而不是按秒数平稳地计数。我该如何解决这个问题？

```
function calcage(secs, num1, num2) {
  s = ((Math.floor(secs/num1))%num2);
return s;
}

function clock() {
++startNumber;

  DisplayStr = displayFormat.replace(/%%D%%/g, calcage(startNumber,86400,100000));

        t = calcage(startNumber,3600,24);
        if (t < 10) {
    DisplayStr = DisplayStr.replace(/%%H%%/g, "0"+t);
        } else {
        DisplayStr = DisplayStr.replace(/%%H%%/g, t);
        }

        t = calcage(startNumber,60,60);
        if (t < 10) {
    DisplayStr = DisplayStr.replace(/%%M%%/g, "0"+t);
        } else {
        DisplayStr = DisplayStr.replace(/%%M%%/g, t);
        }

        t = calcage(startNumber,1,60);
        if (t < 10) {
    DisplayStr = DisplayStr.replace(/%%S%%/g, "0"+t);
        } else {
        DisplayStr = DisplayStr.replace(/%%S%%/g, t);
        }

$("#counter").html(DisplayStr);
}

$('#view').html(<%= (render :partial => 'ajax_response').to_json.html_safe %>);
#partial render and read "#timer" value as integer to start ahead. "#timer" is in "#view" div
$(function(){
c = $("#timer").val();
startNumber = parseFloat(c);
displayFormat = "%%D%% Days, %%H%%:%%M%%:%%S%%";
var int=self.setInterval("clock()",1000);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:52:06.103

那是因为有*多个*间隔运行。当您希望它停止时，您需要清除间隔做`clearInterval(int)`。要么，要么确保您只`setInterval`为任何给定功能运行一次。

此外，除此之外，将字符串作为参数`setInterval`是一件坏事（tm）。改为使用`setInterval(clock, 1000)`。

另外#2，我能不能说一个叫 的变量是多么令人困惑`int`，即使它是完全合法的？:P

# .net - 多个 mono_jit_init/mono_jit_cleanup 问题

> ID：10651230
> 
> 赞同：0
> 
> 时间：2012-05-18T10:48:48.947
> 
> 标签：.net, mono, garbage-collection, jit

我正在开发一些需要多次调用 mono_jit_init 的应用程序。当我第一次运行我的应用程序时，我执行 mono_jit_init 然后 mono_jit_cleanup 一切正常，当我再次尝试执行 mono_jit_init 时出现问题（这次加载不同的运行时[这是我的要求:(]）。在单声道网站上它是提到我们应该在一个进程中初始化一次单声道运行时。我已经搜索了这个问题，但没有找到任何可行的解决方案。所以，我想知道有什么可以解决这个问题的吗？如果可能的话，任何人都可以详细说明为什么不支持mono_jit_init多次？它与一些GC清理问题有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:25:15.137

查看 Mono 源代码，崩溃似乎与 Mono 运行时的初始化方式有关（依赖于零变量）。

因此，您必须在运行时的生命周期中调用`mono_jit_init()`一次。

如果库是静态加载的，这意味着您的应用程序的生命周期，但如果 Mono 运行时通过`dl_open()`. 除了缓存 Mono 函数指针的额外工作外，这种解决方法对于运行并发 Mono 任务可能并不实用。

另一种继续（并且支持并发运行）的方法是缓存运行时上下文以供进一步使用，而不是使用`mono_jit_init()`. 你将不得不使用专用的 Mono`domain`来做一些花哨的事情，比如卸载`assemblies`。

总有解决办法。找到最适合您需求的产品只是需要时间。

# html - 如何将添加图像添加为下拉箭头？

> ID：10651235
> 
> 赞同：5
> 
> 时间：2012-05-18T10:48:54.747
> 
> 标签：html, css, drop-down-menu

我创建了一个带有下拉箭头的应用程序，但箭头的大小太小。

所以我决定放大箭头的大小。我需要添加图像而不是箭头。

是否可以添加图像或调整箭头大小？

我当前的CSS如下。

```
.custom-select:after {
        content: "â–¼";
        content-size:20;
        position: absolute;
        top: -83%;
        right: 6%;
        bottom: 0;
        font-size: 60%;
        line-height:30px;
        line-width:100px;
        padding: 0 10px;
        background:#03498A;
        color: white;

        height:40px;
        pointer-events:none;

        -webkit-border-radius: 0 6px 6px 0;
        -moz-border-radius: 0 6px 6px 0;
        border-radius: 0 6px 6px 0;
    }
<label class="custom-select" style="width:40%" onClick="birthday()">

   <select name="mydropdown" id="gender" placeholder="Gender">

   <option value="">Gender</option>

<option  value="Male">Male</option>

<option  value="Female">Female</option>
</select>
</label> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T11:26:32.947

试试这个解决方案，对我有用，看起来非常好。将元素包装在 div 中，然后应用格式是至关重要的。

此外，请确保您的箭头图片具有透明背景（或至少与您使用的下拉菜单相同的背景颜色）。

“.drop_list select” CSS 可能看起来有点重，但它是所有必需的（除了填充和字体大小），使其在所有浏览器/设备上看起来都很好。在台式机/平板电脑/手机上进行了测试，效果很好。不过，您可能需要对 CSS 进行一些修改以匹配您的网站。

HTML：

```
<div class="drop_list">
    <select name="mydropdown" id="gender" placeholder="Gender">
        <option value="">Gender</option>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
    </select>
</div> 
```

CSS：

```
.drop_list {
    width: 100%;
    height: 30px;
    overflow: hidden;
    background: no-repeat #ffffff;
    border: 1px solid #000;
    background-image:url('YOUR_TRANSPARENT_BACKGROUND_ARROW.png');
    background-position: top right; 
}

.drop_list select{
    -webkit-appearance:none;
    border-radius: 0;
    -webkit-border-radius: 0;
    background: transparent;
    padding: 3px;
    font-size: 1.2em;
    height: 30px;
    width: 120%;
    overflow: hidden;
} 
```

您应该考虑为此使用 base64 箭头图像，减少对服务器的请求。随意使用我的：

```
background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAeCAYAAADZ7LXbAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAKRJREFUeNrs1TEKwkAQheEvIoI2nsk7qFdIq1hoJ3gCC5sUVpY23sDKXnvrYOUBbGITG0kQjQriPlgYhmF/3ryFjbIs82nVfEEBEiAB8k+Q+q1IkqSDNVq4lMy3scIkjuP0FSdbjNHMLys6OwyQVlnXEsOS2QP6OL8jkzlmd70jus86eBT8FIu8PqGXg6oFX6ARGthgX+V1ReFnDJAACZAfhFwHAJI7HF2lZGQaAAAAAElFTkSuQmCC); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:16:00.477

用这个：

```
<label>Arrow code/image</label> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:46:06.827

**试试这个**

```
select.dropdownPager
{
background: url(images/combo.png) no-repeat right;
width: 60px;
font-family: Arial;
font-size: 12px;
outline: none;
height: 23px;
border: none;
background-color: #fff;
display: block;
-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px;
border-bottom: #ccc 1px solid;
border-left: #ccc 1px solid;
border-top: #ccc 1px solid;
border-right: #ccc 1px solid;
-webkit-transition: all 0.5s ease-in-out;
-moz-transition: all 0.5s ease-in-out;
transition: all 0.5s ease-in-out;
   } 
```

# java - CometD / jQuery 客户端错误 402::未知客户端

> ID：10651236
> 
> 赞同：1
> 
> 时间：2012-05-18T10:48:58.210
> 
> 标签：java, comet, cometd

我正在尝试开始使用 CometD，因为我需要一些经验背景来对各种推送技术进行技术比较。

我终于设法在我的 Tomcat (v7.0) 中运行了一个示例代码。

现在我有奇怪的行为，我拼命想找出我做错了什么。

**以下是我的观察：**

*   连接循环：

    我在与客户端的无限连接循环中运行。

    要求：

    ```
    [{"channel":"/meta/connect","connectionType":"long-polling","id":"19","clientId":"f1le33y91f6pa71f39z52km87yp"}] 
    ```

    回复：

    ```
    [{"id":"19","successful":true,"advice":{"interval":2000,"reconnect":"retry","multiple-clients":true,"timeout":60000},"channel":"/meta/connect"}] 
    ```

    有趣的是，Listener-callback 事件实际上发生了

    ```
     cometd.addListener('/meta/handshake', _metaHandshake); 
    ```

*   客户端连接请求卡住

    这主要发生在我的 Tomcat 服务器重新启动之后。我可以看到成功订阅了 2 个频道：

    要求

    ```
    [{"version":"1.0","minimumVersion":"0.9","channel":"/meta/handshake","supportedConnectionTypes":["long-polling","callback-polling"],"advice":{"timeout":60000,"interval":0},"id":"1"}] 
    ```

    回复

    ```
    [{"id":"1","minimumVersion":"1.0","supportedConnectionTypes":["callback-polling","long-polling"],"successful":true,"channel":"/meta/handshake","clientId":"11tnpjnmkqo3tf64zcvufuqbtv","version":"1.0"}] 
    ```

    要求

    ```
    [{"channel":"/meta/subscribe","subscription":"/hello","id":"2","clientId":"11tnpjnmkqo3tf64zcvufuqbtv"},{"channel":"/service/hello","data":{"name":"World"},"id":"3","clientId":"11tnpjnmkqo3tf64zcvufuqbtv"}] 
    ```

    回复

    ```
    [{"id":"2","subscription":"/hello","successful":true,"channel":"/meta/subscribe"},{"id":"3","successful":true,"channel":"/service/hello"}] 
    ```

    这个之后的电话卡住并且永远需要。

**... abd 这是我的代码**

*   客户

    ```
    (function($)
     {
       var cometd = $.cometd;

    $(document).ready(function()
    {
        function _connectionEstablished()
        {
            $('#body').append('<div>CometD Connection Established</div>');
        }

        function _connectionBroken()
        {
            $('#body').append('<div>CometD Connection Broken</div>');
        }

        function _connectionClosed()
        {
            $('#body').append('<div>CometD Connection Closed</div>');
        }

        // Function that manages the connection status with the Bayeux server
        var _connected = false;
        function _metaConnect(message)
        {
            if (cometd.isDisconnected())
            {
                _connected = false;
                _connectionClosed();
                return;
            }

            var wasConnected = _connected;
            _connected = message.successful === true;
            if (!wasConnected && _connected)
            {
                _connectionEstablished();
            }
            else if (wasConnected && !_connected)
            {
                _connectionBroken();
            }
        }

        // Function invoked when first contacting the server and
        // when the server has lost the state of this client
        function _metaHandshake(handshake)
        {
            if (handshake.successful === true)
            {
               // interesting enough: that event is triggered
                alert('event occured');
                cometd.batch(function()
                {
                    // that function is called and produces a corresponding request to the server
                    cometd.subscribe('/hello', function(message)
                    {
                        // that one never happens... 
                        $('#body').append('<div>Server Says: ' + message.data.greeting + '</div>');
                    });
                    // Publish on a service channel since the message is for the server only
                    cometd.publish('/service/hello', { name: 'World' });
                });
            }
        }

        // Disconnect when the page unloads
        $(window).unload(function()
        {
            cometd.disconnect(true);
        });

        var cometURL = location.protocol + "//" + location.host + config.contextPath + "/cometd";
        cometd.configure({
            url: cometURL,
            logLevel: 'debug'
        });

        cometd.addListener('/meta/handshake', _metaHandshake);
        cometd.addListener('/meta/connect', _metaConnect);

        cometd.handshake();
    });
    })(jQuery); 
    ```

*   服务器

    请注意，这与分发包中的示例几乎是 1:1 的！

    ```
    public class HelloService extends AbstractService
    {
    public HelloService(BayeuxServer bayeux)
    {
        super(bayeux, "hello");
        addService("/service/hello", "processHello");
    }

    public void processHello(ServerSession remote, Message message)
    {
        Map<String, Object> input = message.getDataAsMap();
        String name = (String)input.get("name");

        Map<String, Object> output = new HashMap<String, Object>();
        output.put("greeting", "Hello, " + name);
        remote.deliver(getServerSession(), "/hello", output, null);
    } 
    ```

    }

*   Web.xml 文件

    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">

    ```
    <servlet>
        <servlet-name>cometd</servlet-name>
        <servlet-class>org.cometd.server.CometdServlet</servlet-class>
        <async-supported>true</async-supported>
        <init-param>
            <param-name>timeout</param-name>
            <param-value>60000</param-value>
        </init-param>
        <init-param>
            <param-name>logLevel</param-name>
            <param-value>3</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>cometd</servlet-name>
        <url-pattern>/cometd/*</url-pattern>
    </servlet-mapping> 
    ```

也许我只是在做一些完全错误的事情，但我开始对此感到有些绝望。帮助将不胜感激。

# javascript - javascript和GWT代码之间的通信

> ID：10651237
> 
> 赞同：1
> 
> 时间：2012-05-18T10:48:58.810
> 
> 标签：javascript, google-maps, gwt

我已经为 GWT 使用 google maps v3 api 创建了一个地图。我试图在这张地图上显示一个 kml，但这是不可能的，因为它存储在本地。所以，我正在尝试使用 geoxml3 来解析我的本地 kml。

我需要 javascript 代码才能“看到”我使用 GWT 创建的地图。我怎样才能做到这一点？

我使用创建地图

地图 = GoogleMap.create(Document.get().getElementById("map_canvas"), myOptions); （map_canvas 是我的 html 页面中的一个 div）

我想调用一个 Javascript 函数来解析 KML 文件并将其显示在我的地图上。我知道如何调用 JS 函数，但我不知道在它的主体中写什么。，，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-26T20:36:14.963

这是我在 gwt/gxt google maps api v3 中绘制本地 kml 文件的方式 在 Internet 上查找和下载 geoxml3.js 和 ProjectedOverlay.js。在你的 html 中放：<

脚本类型="text/javascript" src='YourServicePath/geoxml3.js'>

添加一些过程以调用 kml 操作到您的客户端入口 java 文件：

```
public final native JavaScriptObject createKmlParser(JavaScriptObject mapId) /*-{
var myParser = new $wnd.geoXML3.parser({map: mapId});

    return myParser;
}-*/;

public final native void showKml(JavaScriptObject parser, String kml) /*-{
    parser.parseKmlString(kml);
}-*/;

public final native void hideKml(JavaScriptObject parser) /*-{
    parser.hideDocument();
}-*/; 
```

因为 ProjectedOverlay.js 需要连接 Google 地图，所以我们将在连接到 Google 地图后将其注入。

```
mapWidget = new MapWidget(opts);

ScriptInjector.fromUrl(
    GWT.getHostPageBaseURL() + "YourServicePath/ProjectedOverlay.js").setCallback(new Callback() {

@Override
public void onFailure(Object reason) {
    System.out.println("Script load failed");
}

@Override
public void onSuccess(Object result) {

}
}).setWindow(ScriptInjector.TOP_WINDOW).inject();

To show the KML:
public JavaScriptObject parserGeoXml3;

if (mapWidget != null) {
    JavaScriptObject jsoParser = createKmlParser(mapWidget.getJso());
         parserGeoXml3 = jsoParser;
    try {
        showKml(jsoParser, kmlStr);
        } catch (JavaScriptException jse) {

        }
}
To hide:
try {
    hideKml(parserGeoXml3);
} catch (JavaScriptException jse) {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:09:41.160

这是来自 GWT 文档的 JSNI 编码基础知识。这绝对可以帮助您编写函数的主体。

# ruby-on-rails - Rails to_json - 现有列的确切顺序

> ID：10651240
> 
> 赞同：0
> 
> 时间：2012-05-18T10:49:20.190
> 
> 标签：ruby-on-rails, json, jqgrid, customization

我的任务是为 jqGrid 形成 JSON 数据。它需要一个特殊的格式：

```
{
    total: 50,
    page:"1",
    records: "1500",
    rows: [
        { 20, "{2ae39c44-ca9d-4565-9e05-bbd875c1579c}", "Description 1"},
        { 23, "{e1aaf69d-1040-4afa-8995-fd15c3a591b3}", "Description 2"},
        { 25, "{e3df29c7-ef34-46ba-bf66-7838aca7c137}", "Description 3"},
        { 29, "{768ec164-28e5-4614-a259-63257b79e8e0}", "Description 4"}
    ]
} 
```

所以“行”的基本规则是：不生成根对象名称，列出不带名称的字段，按确切顺序列出字段以绑定到相应的列。

我可以强制 to_json 方法根据需要修改输出吗？

目前 to_json 产生：

```
myobjs : [
myobj : { id: 20, uuid: "{2ae39c44-ca9d-4565-9e05-bbd875c1579c}", name: "Description 1"},
myobj : { id: 20, uuid: "{e1aaf69d-1040-4afa-8995-fd15c3a591b3}", name: "Description 2"},
myobj : { id: 20, uuid: "{e3df29c7-ef34-46ba-bf66-7838aca7c137}", name: "Description 3"},
myobj : { id: 20, uuid: "{768ec164-28e5-4614-a259-63257b79e8e0}", name: "Description 4"}
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T02:09:24.600

你不能通过模型​​级`to_json`调用来做到这一点，你需要像@Paul 所说的那样构建一个中间数据表示。就像是：

```
class MyObj
  def to_json
    [id, uuid, name]
  end
end 
```

然后在控制器中：

```
class MyController < ApplicationController
  def grid_data
    objs = MyObj.all
    json_data = {
      :total => objs.count,
      :page => 1,
      :records => 1500,
      :rows => objs.collect {|o| o.to_json}
    }
    ... send json as usual ...
  end
end 
```

请注意，我将您的模型设置为生成一个数组，而不是您指定的哈希，因为我认为您复制了错误 - 您上面的 JSON 示例无效。{ 20, 'foo', 'bar' } 不是有效的 JSON，因为 "{...}" 表示一个哈希，它必须是键控的，并且没有排序。

# c++ - 使用内存区域作为堆栈空间？

> ID：10651242
> 
> 赞同：7
> 
> 时间：2012-05-18T10:49:29.840
> 
> 标签：c++, c, linux, memory, stack

在 Linux 中是否可以启动一个进程（例如使用`execve`）并使其使用特定的内存区域作为堆栈空间？

背景：

我有一个 C++ 程序和一个快速分配器，它给了我“快速内存”。我可以将它用于使用堆并在快速内存中创建它们的对象。美好的。但我也有很多变量存在于堆栈中。我怎样才能让他们也使用快速内存​​？

想法：实现一个“程序包装器”，分配快速内存，然后启动实际的主程序，传递一个指向快速内存的指针，程序将其用作堆栈。那可能吗？

[更新]

pthread 设置似乎有效。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T10:54:15.080

使用 pthreads，您可以为程序逻辑使用辅助线程，并使用以下方法设置*其*堆栈地址`pthread_attr_setstack()`：

```
NAME
       pthread_attr_setstack,  pthread_attr_getstack  -  set/get stack
       attributes in thread attributes object

SYNOPSIS
       #include <pthread.h>

       int pthread_attr_setstack(pthread_attr_t *attr,
                                 void *stackaddr, size_t stacksize);

DESCRIPTION
       The pthread_attr_setstack() function sets the stack address and
       stack  size attributes of the thread attributes object referred
       to by attr to the values specified in stackaddr and  stacksize,
       respectively.   These  attributes specify the location and size
       of the stack that should be used by a thread  that  is  created
       using the thread attributes object attr.

       stackaddr should point to the lowest addressable byte of a buf‐
       fer of stacksize bytes that was allocated by the  caller.   The
       pages  of  the  allocated  buffer  should  be both readable and
       writable. 
```

我不遵循的是您期望如何通过执行此类操作来获得任何性能改进（我假设您的“快速”内存的目的是更好的性能）。

# php - 使用 ajax 和 zend 框架进行 phpunit 测试

> ID：10651246
> 
> 赞同：0
> 
> 时间：2012-05-18T10:49:53.873
> 
> 标签：php, ajax, zend-framework, phpunit

我在为 jquery 通过 ajax 调用的操作编写测试时遇到问题。我不知道如何通过操作捕获发送回视图的数据，以便我可以断言它是否正确。我的 $.ajax(...) 脚本将控制器回显的结果插入到 textarea 元素中，但在我的测试脚本中，结果为空。失败信息：

```
Failed asserting that null matches expected '... 
```

到目前为止，这是我的测试代码：

```
$this->getRequest()->setRawBody('some json containing input params im testing');
$this->getRequest()->setMethod('GET');
$this->getRequest->setHeader('HTTP_X_REQUESTED_WITH','XMLHttpRequest');

$this->dispatch('my url');
$result = json_decode($this->getResponse()->getBody(),true);

$expectedResult = 'some string';
$this->assertEquals($expectedResult, $result['targeted element']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:22:53.967

我在下面写的建议是我如何测试并且已被证明更有用且更不容易出错：

1.  **没有“控制器”测试**。
2.  将模型和值对象注入到您的**服务**中。
3.  将服务注入您的**控制器**。
4.  测试**模型**、**价值对象**和**服务**。
5.  使用 a`JavaScript testing framework`来测试你的 JS —— 有很多不错的选择可以让你模拟你的 Ajax 调用。

# iphone - 自定义开关 - 是 否 类型 - iPhone

> ID：10651247
> 
> 赞同：2
> 
> 时间：2012-05-18T10:49:55.477
> 
> 标签：iphone, ios, ios4, custom-controls, uiswitch

![在此处输入图像描述](../Images/417f70b07bf9a3150753dd6b7f754fad.png)

有没有机会实现上述开关？任何参考资料都会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T12:01:56.170

您可以在图像的帮助下创建自定义开关按钮。创建一个开关按钮（将下面的 Alpha 设置为 1）并在 UISwitch 上方放置一个图像，它将完美运行。

[https://github.com/samvermette/SVSegmentedControl](https://github.com/samvermette/SVSegmentedControl)

[https://github.com/samsoffes/sstoolkit](https://github.com/samsoffes/sstoolkit)

[https://github.com/alinux/iPhone-custom-switch-UIView](https://github.com/alinux/iPhone-custom-switch-UIView)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T21:24:54.127

这不会是解决您问题的答案，因为它将更多地是一条 UX 建议。

这种类型的开关违背了 Apple 的 HIG。

您永远不应该在用户无法判断控件/开关是“开”还是“关”的情况下显示分段控件或开关。如果我以前没有在 iOS 应用程序中使用过开关，我将无法分辨上图中的“开”或“关”是什么。您可能很容易确定这一点，但您需要考虑有人（比您的直觉少）使用您的应用程序的可能性。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:58:12.747

看看[这个](https://github.com/domesticcatsoftware/DCRoundSwitch)替换 UISwitch 项目。

# c# - c# 属性的.xsd 验证

> ID：10651249
> 
> 赞同：0
> 
> 时间：2012-05-18T10:49:59.783
> 
> 标签：c#, xml

这可能没有任何实际用途，但我想知道是否可以针对 xsd 验证属性。我使用 xsd.exe 从架构中生成了一个 cs 文件，但没有任何验证逻辑被继承，例如......

```
<xsd:element type="Text_Key" name="LPI_Key"/>
</xsd:simpleType> 
<xsd:simpleType name="Text_Key">
<xsd:restriction base="xsd:string">
   <xsd:length value="14" fixed="true"/>
   <xsd:pattern value="[0-9][0-9][0-9][0-9][LXC][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]"/>
</xsd:restriction>

Generates

private string lPI_KeyField; 
```

也许我错过了一些东西，但我认为这是可能的。我知道我可以验证我是否可以将属性转换为 xml，但这似乎有点倒退，正如我所说，它可能没有任何实际用途，但如果验证逻辑已经存在，为什么不使用它似乎是有道理的. 对属性进行 id 验证的原因是，我可以在用户输入错误的值时通知用户，而不是等到输入所有值并在转换为 xml 并验证之前点击提交。希望这是有道理的，如果我错过了任何明显的教程或任何我想说的我已经用谷歌搜索但我得到的只是'针对 xsd 验证 xml'，有时只是知道关键字会在谷歌搜索中产生所有差异。

对罗米尔的回应：

感谢您的回复。尽管我同意 RegEx 将执行所需的验证，但如果 xsd.exe 会为您生成该验证，那就太好了。但正如在我原来的帖子中看到的那样，没有进行验证，你可以说我只是懒惰，但我认为这是试图减少事故和混乱。在整个应用程序、数据存储等中使用一组验证规则，意味着没有验证错误会禁止用户（在上面的例子中，xml 模式是我无法控制的预定义模式，我确定这是一个许多人也会涉及的情况）。如果我要编写自己的正则表达式验证（并且我用作参考点的架构非常大）以及 xsd 验证规则在哪里更改，然后我将不得不更新我的正则表达式中的所有更改（请记住，原始的正则表达式可能会阻止用户输入有效数据，直到执行更新）。现在，如果我能够直接针对 xsd 进行验证，那么只需将旧的换出并将新的放入（出于这个问题的目的，我们可以假设只有验证逻辑发生了变化；-)）和毕竟属性的值仍然与 xml 字符串中的值相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:10:46.073

使用 RegEx 验证属性值。

XSD 仅针对 XML 进行验证。

# zend-framework - Zend 没有为 Application_Model_DbTable_Users 找到适配器

> ID：10651254
> 
> 赞同：1
> 
> 时间：2012-05-18T10:50:28.287
> 
> 标签：zend-framework

我正在学习 Zend 框架工作，同时通过教程我遇到了 No adapter found for Application_Model_DbTable_Users 错误。我似乎无法弄清楚。这是我的课

```
class Application_Model_Register
 {
private $_dbTable;
private $db;

public function __construct()
{
    $this->_dbTable = new Application_Model_DbTable_Users();

        $parameters =array(
                        'host'     => '127.0.0.1',
                        'username' => 'root',
                        'password' => '******',
                        'dbname'   => 'tutblog',
                                                'adapter'  => 'Pdo_Mysql'
                   );
            try {
                $db = Zend_Db::factory('Pdo_Mysql', $parameters);
                $db->getConnection();
                } catch (Zend_Db_Adapter_Exception $e) {

                } catch (Zend_Exception $e) 
 }
 public function createUser($array)
{   var_dump($array);
    $_dbTable = new Application_Model_DbTable_Users();
    $this->_dbTable->insert($array);
    //insert('array') SQL commands-> form zen_db_table_abstract
} 
```

DBtable 用户类

```
class Application_Model_DbTable_Users extends Zend_Db_Table_Abstract
{

    protected $_name = 'users';
protected $_primary ='id';
protected $_password= 'password';
} 
```

其他用户类为空。

索引控制器

```
public function indexAction()
{   
    $register =  new Application_Model_Register();
$register ->createUser(array( 'name' => 'becky',
                      'age'  => 25,
              'password' => 'somepw'
                 )2);*/
} 
```

我的ini文件

```
[production]
phpSettings.display_startup_errors = 2
phpSettings.display_errors = 2
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"

resources.db.params.adapter_ = "PDO_MYSQL"
resources.db.params.host ='localhost'
resources.db.params.dbname ='tutblog'
resources.db.params.username = "root"
resources.db.params.password = "password"
resources.db.isDefaultTableAdapter = true

[staging : production]

phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1

resources.db.params.adapter_ = "PDO_MYSQL"
resources.db.params.host ='localhost'
resources.db.params.dbname ='tutblog'
resources.db.params.username = "root"
resources.db.params.password = "password"
resources.db.isDefaultTableAdapter = true 
```

`提前谢谢你们，我真的不知道从哪里开始新的框架。我用谷歌搜索了所有东西，即将重新启动 tut，但我觉得又遇到了这个问题。

谢谢

```
Message: No adapter found for Application_Model_DbTable_Users 
```

堆栈跟踪：

# 错误代码在这里

```
0 /Applications/XAMPP/xamppfiles/lib/php/pear/Zend/Db/Table/Abstract.php(739): Zend_Db_Table_Abstract->_setupDatabaseAdapter()
#1 /Applications/XAMPP/xamppfiles/lib/php/pear/Zend/Db/Table/Abstract.php(268): Zend_Db_Table_Abstract->_setup()
#2 /Applications/XAMPP/xamppfiles/htdocs/webs/zfNewTry/application/models/Register.php(10): Zend_Db_Table_Abstract->__construct()
#3 /Applications/XAMPP/xamppfiles/htdocs/webs/zfNewTry/application/controllers/IndexController.php(15): Application_Model_Register->__construct()
#4 /Applications/XAMPP/xamppfiles/lib/php/pear/Zend/Controller/Action.php(513): IndexController->indexAction()
#5 /Applications/XAMPP/xamppfiles/lib/php/pear/Zend/Controller/Dispatcher/Standard.php(289): Zend_Controller_Action->dispatch('indexAction')
#6 /Applications/XAMPP/xamppfiles/lib/php/pear/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#7 /Applications/XAMPP/xamppfiles/lib/php/pear/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch()
#8 /Applications/XAMPP/xamppfiles/lib/php/pear/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#9 /Applications/XAMPP/xamppfiles/htdocs/webs/zfNewTry/public/index.php(26): Zend_Application->run()
#10 {main}  
Request Parameters:

array (
  'controller' => 'index',
  'action' => 'index',
  'module' => 'default',
)  
zf enable layout to get this template 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:00:19.187

如果我没记错的话，您需要告诉您的应用程序始终使用数据库连接作为 Zend_Db_Table 类的默认连接。

尝试在您的数据库初始化之后放置这一行： `Zend_Db_Table::setDefaultAdapter($db)`

我认为您应该在实例化 Zend_Db_Table 类之前执行此操作，因此将 Application_Model_Register::__construct() 更改为：

```
public function __construct()
{
    $parameters =array(
                    'host'     => '127.0.0.1',
                    'username' => 'root',
                    'password' => '******',
                    'dbname'   => 'tutblog',
                                            'adapter'  => 'Pdo_Mysql'
               );
     try {
         $db = Zend_Db::factory('Pdo_Mysql', $parameters);
         $db->getConnection();
     } catch (Zend_Db_Adapter_Exception $e) {

     } catch (Zend_Exception $e) { 
     }
     Zend_Db_Table::setDefaultAdapter($db);
     $this->_dbTable = new Application_Model_DbTable_Users();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:33:18.687

在您的构造函数中，您似乎正在尝试初始化一个新的数据库适配器。DbTable 模型已使用*application.ini*中的适配器集，因此无需设置新适配器。另外我不确定它是否重要，但手册中适配器的语法是* [Pdo_Mysql](http://framework.zend.com/manual/en/zend.application.available-resources.html#zend.application.available-resources.multidb) *****
如果您需要使用多个适配器，那么在.`application.ini`

综上所述，使用 DbTable 模型的模型的构造函数通常看起来类似于：

```
 //This class is currently intended to be extended by concrete mappers
  protected $_tableGateway = NULL;

  protected $_identityMap = array();

 //this constructor typically provides the option to pass in a DbTable model
 // or a string value for the table name that would instantiate a Zend_Db_Table_Abstract
 public function __construct(Zend_Db_Table_Abstract $tableGateway = NULL) {

        if (is_null($tableGateway)) {
            //_tablename is the string value of the table, supplied by the concrete mapper
            $this->_tableGateway = new Zend_Db_Table($this->_tableName);
        } else {

            $this->_tableGateway = $tableGateway;
        }
    }

 protected function _getGateway() {

        return $this->_tableGateway;
    }

/**
     * findAll() is a proxy for the fetchAll() method and returns
     * an array of entity objects
     *
     * @return array returns an array of row objects
     */
    public function findAll() {

        $select = $this->_getGateway()->select();

        $rowset = $this->_getGateway()->fetchAll($select);
        $entities = array();
        foreach ($rowset as $row) {
            $entity = $this->_createEntity($row);
            $entities[] = $entity;
        }
        return $entities;
    }

    /**
     * Abstract method to be implemented by concrete mappers.
     */
    abstract protected function _createEntity($row);
} 
```

我包含了几个方法来帮助演示如何使用 Zend_Db_Table_Abstract 接口来编写查询。

在试图弄清楚这些东西时，我发现这些链接很有帮助。

[集成数据映射器的](http://phpmaster.com/integrating-the-data-mappers/)[领域模型](http://phpmaster.com/building-a-domain-model/)

你总能在[Rob Allen 的 Akratbat.com上找到很棒的东西](http://akrabat.com/)

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T11:57:47.087

当文件移动到开发服务器时，尽管它在本地服务器上运行，我也面临同样的问题。然后我只是遵循文件命名约定。

1.  使用以下所有内容，请注意小写/大写
2.  请注意，模型文件夹是复数，而类是模型单数
3.  确保该类被命名为 Application_Model_DbTable_Albums
4.  确保文件名为 Albums.php 并位于名为 application/models/DbTable 的文件夹中

您必须仔细检查并检查文件是否正确命名（例如，模型的 Users.php）。

它解决了我的问题。也许是你的。

祝你好运。

# c# - 使用 LINQ 如何拆分字符串（不是在字符上，而是在索引上）

> ID：10651262
> 
> 赞同：0
> 
> 时间：2012-05-18T10:50:50.550
> 
> 标签：c#, linq, extension-methods

我想拆分一个字符串

输入 ：

```
ABCDEFGHI 
```

输出 ：

```
ABC, DEF, GHI 
```

一种方法是使用 For 循环。

```
string str = "ABCDEFGHI";

List<string> lst = new List<string>();

string temp = "";

for(int i = 0; i < str.Length; i++)
{
    temp = str[i].Tostring();

    if((i + 1) % 3 == 0)
    {
        lst.Add(temp);
        temp = "";
    }
}

string final_str = string.Join(", ", lst); 
```

但是如何使用`LINQ`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:58:13.223

```
var str = "ABCDEFGHI";

var result = testStr.Select(s => testStr.IndexOf(s))
                   .Where(i => i%3 == 0)
                   .Select(i => testStr.Substring(i,3))
                   .Aggregate("", (a,s) => a += s + ","); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:00:19.860

[在MoreLinq](http://code.google.com/p/morelinq/)的帮助下

```
List<string> lst = str.Batch(3).Select(s => String.Join("",s)).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:01:30.330

还有一个（*没有* [MoreLinq](http://code.google.com/p/morelinq/)）：

```
var str = "ABCDEFGHI";
var tmp = str.Select((i, index) => new { i, index })
             .GroupBy(g => g.index / 3, e => e.i)
             .Select(g => String.Join("", g));
var final_string = String.Join(", ", tmp); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T11:02:21.080

使用[MoreLinq.Batch](http://code.google.com/p/morelinq/source/browse/trunk/MoreLinq/Batch.cs)

```
var result = str.Batch(3); 
```

结果类型为 IEnumerable>，可使用 ToArray 使其为 IEnumerable<char[]>

**编辑**我第一眼就忘记了最后一个加入语句

```
var finalStr = String.Join(",",str.Batch(3).Select(x=>new String(x.ToArray()))) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-18T10:59:47.363

```
String.Join("", str.Select((x, i) => (i + 1)%3 == 0 ? x + " " : x.ToString())) 
```

# mysql - mysql 正则表达式查询将是什么

> ID：10651265
> 
> 赞同：0
> 
> 时间：2012-05-18T10:50:54.167
> 
> 标签：mysql, regex

无论是在语言方面还是在 mysql 中，我都对正则表达式不太满意。

你能帮我写一个查询吗？

我有一个数据库表，其中一列包含股票编号、名称和价格三种数据。我感兴趣的是股票编号。我没有创建这个数据库设计，所以请耐心等待。

数据格式如下：

`[#3346] - $3,500.00, some name`

我必须从该表中获取与给定 Stock Number 匹配的记录，即`3346`。

```
SELECT * FROM table_name WHERE col_name REGEXP ? 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:55:18.887

你要：

```
WHERE col_name REGEXP '^\\[#3346\\]' 
```

分部分取：

*   `^`表示字符串的开始
*   `\[`是一个文字`[`字符（但在一个字符串中，`\`它本身需要用另一个转义`\`）
*   `#3346`是文字字符串`#3346`
*   `\]`是一个文字`]`字符（但在一个字符串中，`\`它本身需要用另一个转义`\`）

因此，上面的表达式匹配任何以文字开头的字符串`[#3346]`。碰巧，为此目的，您甚至不需要使用正则表达式，因为[简单的模式匹配](http://dev.mysql.com/doc/en/string-comparison-functions.html#operator_like)就可以了：

```
WHERE col_name LIKE '[#3346]%' 
```

*但是*，即使您没有创建数据库，我强烈建议您通过拆分为三列来[规范化](http://en.wikipedia.org/wiki/Database_normalization)数据结构。`col_name`

# sql - SQL Group By 子句（无效列）？

> ID：10651268
> 
> 赞同：0
> 
> 时间：2012-05-18T10:51:01.220
> 
> 标签：sql, sql-server-2005

我正在构建一些基本的 sql 查询，并且在“group By”子句中遇到问题。我在列标题上使用了别名，但在尝试“分组”我的结果时遇到了问题。我目前的代码是：-

```
SELECT                 
  vwREP_GP_ContractProjectPurchaseCostCatID.PACOSTCATID AS COST_CAT_CODE, 
  vwREP_GP_ContractProjectPurchaseCostCatID.PACOSTCATNME AS COST_CAT_NAME, 
  vwREP_GP_ContractProjectPurchaseRpt.COST, 
  vwREP_GP_ContractProjectPurchaseRpt.ITEMDESC AS ITEM, 
  vwREP_GP_ContractProjectPurchaseRpt.CREDITOR, 
  vwREP_GP_ContractProjectPurchaseRpt.DOC_NUM AS DOCUMENT_NUMBER, 
  vwREP_GP_ContractProjectPurchaseRpt.DESCRIPTION, 
  vwREP_GP_ContractProjectPurchaseRpt.DOC_DATE AS DATE,  
  vwREP_GP_ContractProjectPurchaseRpt.PROJECT AS JOB_CODE_STAGE, 
  vwREP_GP_ContractProjectPurchaseRpt.COMPOUNDNAME AS CATEGORY_DESCRIPTION
FROM         
  vwREP_GP_ContractProjectPurchaseCostCatID 
INNER JOIN
  vwREP_GP_ContractProjectPurchaseRpt ON  wREP_GP_ContractProjectPurchaseCostCatID.PACOSTCATID = vwREP_GP_ContractProjectPurchaseRpt.PACOSTCATID

SELECT CATEGORY_DESCRIPTION, SUM(COST) AS TotalCost FROM 
    ( 
        SELECT COMPOUNDNAME AS CATEGORY_DESCRIPTION FROM wREP_GP_ContractProjectPurchaseRpt
    ) A 
GROUP BY CATEGORY_DESCRIPTION 
```

添加了额外的代码来处理使用别名列名后，我现在收到一个错误，即“COST”是无效列？我没有更改此列名？？

我知道它明显在盯着我看，但我的大脑没有参与，所以如果有人能指出我哪里出错了，或者更简单的方法，那将是一个很大的帮助。

提前致谢。

（这一切都在 sql server management studio 2005 上完成）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:54:42.987

采用

```
SELECT COMPOUNDNAME AS CATEGORY_DESCRIPTION, 
       Sum(COST) AS TotalCost 
FROM   vwREP_GP_ContractProjectPurchaseRpt 
GROUP  BY COMPOUNDNAME 
```

代替

```
SELECT  CATEGORY_DESCRIPTION,SUM(COST)AS TotalCost FROM 
( 
    SELECT COMPOUNDNAME AS CATEGORY_DESCRIPTION FROM vwREP_GP_ContractProjectPurchaseRpt
) A 
GROUP BY CATEGORY_DESCRIPTION 
```

您没有在内部查询中包含 COST 列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:54:54.033

```
SELECT  CATEGORY_DESCRIPTION, SUM(COST) AS TotalCost
FROM    ( 
        SELECT COMPOUNDNAME AS CATEGORY_DESCRIPTION, COST
        FROM   vwREP_GP_ContractProjectPurchaseRpt
        ) A 
GROUP BY
        CATEGORY_DESCRIPTION 
```

# c# - 使用对象初始化器设置私有 setter

> ID：10651270
> 
> 赞同：6
> 
> 时间：2012-05-18T10:51:05.003
> 
> 标签：c#, .net, initialization, automatic-properties, object-initializers

当从拥有 auto 属性的类中调用初始化器时，为什么可以使用对象初始化器来设置私有 set auto 属性？我以两个类为例。

```
public class MyClass
{
    public string myName { get; private set; }
    public string myId { get; set; }

    public static MyClass GetSampleObject()
    {
        MyClass mc = new MyClass
        {
            myName = "Whatever", // <- works
            myId = "1234"
        };
        return mc;
    }

}

public class MyOtherClass
{
    public static MyClass GetSampleObject()
    {
        MyClass mc = new MyClass
        {
            myName = "Whatever", // <- fails
            myId = "1234"
        };
        return mc;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T10:52:51.470

setter 上的`private`修饰符意味着 - 封闭类型的私有。

也就是说，属性只能由包含类型设置。

如果不是这种情况，您将永远无法设置该属性，它实际上是只读的。

来自 MSDN -[私有（C# 参考）](http://msdn.microsoft.com/en-us/library/st6sy9xe.aspx)：

> 私有成员只能在类的主体或声明它们的结构中访问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:53:44.887

因为私有意味着在拥有财产的类中可访问。

# c - pthread_create 编译时返回错误

> ID：10651274
> 
> 赞同：2
> 
> 时间：2012-05-18T10:51:25.993
> 
> 标签：c, linux, pthreads

我使用以下代码创建了两个线程：

```
//header files
#include <pthread.h>
struct thread_arg
{
    int var1;
    int var2;
};
void *serv_com(void *pass_arg)
{
    struct thread_arg *con = pass_arg;
    //required statements irrelevant to the issue
    pthread_exit(NULL);
}
void *cli_com(void *pass_arg)
{
    struct thread_arg *con = pass_arg;
    //required statements irrelevant to the issue
    pthread_exit(NULL);
}
int main()
{
    pthread_t inter_com;
    //necessary code
    while(1)
    {
        th_err_s = pthread_create(&inter_com, NULL, serv_com, (void *)&pass_arg);
        th_err_c = pthread_create(&inter_com, NULL, cli_com, (void *)&pass_arg);
        if (th_err_s || th_err_c)
        {
            printf("Alert! Error creating thread! Exiting Now!");
            exit(-1);
        }
    }
    pthread_exit(NULL);
    return 1;
} 
```

然后我使用以下命令在linux中编译了上面的代码：

```
gcc -o sample sample.c 
```

它返回以下错误消息：

```
inter.c:(.text+0x374): undefined reference to `pthread_create'
inter.c:(.text+0x398): undefined reference to `pthread_create'
collect2: ld returned 1 exit status 
```

我应该怎么做才能正确编译这个文件。我确信它没有语法错误或任何东西，因为当我注释掉 while 循环内的所有内容时，程序正在正确编译并且我验证了 pthread_create 语法是正确的。我是否必须发出其他命令来编译文件？

编辑：在上面的代码中创建两个线程有​​什么问题吗？程序一旦运行就会退出并显示错误消息。可能是什么问题，我该如何解决？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T11:15:03.853

尝试这样做：

```
gcc -lpthread sample.c 
```

或者

```
gcc -pthread sample.c 
```

以上2个命令将直接创建可执行的a.out

编辑后回答：

1）等待两个线程使用调用加入主线程

```
int pthread_join(pthread_t thread, void **value_ptr); 
```

2）创建具有不同ID的两个线程

3) 如果可以的话，也要避免从 main() 调用 pthread_exit，尽管这样做并没有什么坏处

4）您在while（1）中调用pthread_create，这将创建无限线程..我不知道您要实现什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T10:53:49.220

编译时链接到 pthread 库...

gcc -o 样本 -lpthread 样本.c

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-14T18:43:17.317

我自己也不太确定，但我认为你可以做类似的事情

```
pthread_t inter_com, inter_com2; 
```

和

```
th_err_s = pthread_create(&inter_com, NULL, serv_com, (void *)&pass_arg);
        th_err_c = pthread_create(&inter_com2, NULL, cli_com, (void *)&pass_arg); 
```

我认为它应该为您提供 2 个线程 ID。但是在线程之间共享变量等时要小心。但很高兴你自己解决了。

# android - 设备制造商对 Android 定制的影响

> ID：10651277
> 
> 赞同：1
> 
> 时间：2012-05-18T10:51:57.493
> 
> 标签：android

我正在尝试编写一个使用多个 android api（如策略管理器、包管理器、wifi api 等）的 android 应用程序。

我担心的是，android 是开放的，制造商/运营商可以自由地将任何特定版本的 android 作为起点，并对其进行自定义并随设备一起发货。

注意：如果这篇文章是关于相同/相似主题的先前文章的重复，请原谅。在这种情况下，感谢任何分享早期帖子的人。

困扰我的几件事是：

*   android 是否强制/要求制造商/运营商保留默认 api 并且仅覆盖/自定义外观？
*   即使制造商改变了来自 android 的基本 api 的实现/行为，他们是否遵守接口以便我的代码不会中断？
*   我如何确保/测试我的代码适用于所有 android 设备，因为一个或多个自定义可能会破坏我的整个应用程序？

我知道对于可能已经使用 Android 一段时间的你们中的许多人来说，这些都是一些幼稚的问题，但是在这方面的任何指示都会有巨大的帮助。

一般 wrt 跨版本、跨设备不兼容性和处理它们的策略中的任何其他信息都会非常有帮助。

提前非常感谢。

问候， 迪帕克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:08:23.180

您的问题（和许多其他开发人员）通过以下方式解决：http: [//source.android.com/compatibility/index.html](http://source.android.com/compatibility/index.html) 但这仍然不能保证制造商不会更改 API 并破坏您的应用程序。

常见的方法是首先针对占市场大部分的设备子集，然后针对其他设备实施解决方法（如有必要）。有关设备市场渗透率的示例信息可在以下网址找到：http: [//opensignalmaps.com/reports/fragmentation.php](http://opensignalmaps.com/reports/fragmentation.php)？

亲切的问候，
博

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:02:57.853

首先，我认为您不必担心这一点。只有在您拥有成千上万的用户之后，您才会最终需要面对由大量提供 Android 设备的制造商引起的更复杂的问题。这不应该阻止您为 Android 开发。

*   android 是否强制/要求制造商/运营商保留默认 api 并且仅覆盖/自定义外观？
    *   不会。但如果他们从系统中删除重要的 API，那肯定会对他们不利。核心作为一个整体存在，尽管实际上没有任何东西可以阻止他们按照自己的意愿删除或禁用块。例如，AT&T 前段时间禁用了在 Android 设备上侧载应用程序的功能（但我认为他们仍然不会这样做）。功能减少的设备示例：Amazon Kindle Fire。它的大部分界面（第三方应用程序除外）看起来一点也不像 Android，而且它不提供完整的 API 集。即使发生了这些巨大的变化，Android 应用程序开发人员仍然在构建和销售在 Kindle Fire 上运行良好的应用程序方面取得了巨大成功。
*   即使制造商更改了来自 android 的基本 api 的实现/行为，他们是否遵守接口以便我的代码不会中断？
    *   这就是想法，但没有任何东西可以禁止他们破坏东西。也没有任何东西可以阻止他们意外引入错误。
*   我如何确保/测试我的代码适用于所有 android 设备，因为一个或多个自定义可能会破坏我的整个应用程序？
    *   我知道一些制造商会为他们的设备/配置提供一个模拟器，以帮助测试他们的系统。例如，摩托罗拉为此提供了 MOTODEV Studio。

# javascript - Jquery 验证 - 向输入元素添加规则时出错？

> ID：10651284
> 
> 赞同：19
> 
> 时间：2012-05-18T10:52:31.250
> 
> 标签：javascript, jquery, jquery-validate

我正在尝试使用[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)实现 Jquery 验证：

**我的设计方案：**

*   我的**输入**元素：

    ```
    <form action="submit.php" id="form_id">
      <input type="text" class="val-req" id="my_input" name="myval" />
      <input type="button" onclick="validate_form('form_id', function() { $('#form_id').submit(); })" />
      <span id="val-msg" class="my_input"></span>
    </form> 
    ```

*   然后，在 dom 准备就绪时：

    ```
     $(document).ready(function() {
                          $('.val-req').rules('add', {required:true});
                       }); 
    ```

*   验证方法：

    ```
     function validate_form(form_id, callback) {
           var form = $('#'+form_id);
           $('.val-req').each(function() {$(this).rules('add', {required:true});});
           $(form).validate({
                    errorElement: "span",
                    errorClass:   "val-error",
                    validClass:   "val-valid",
                    errorPlacement: function(error, element) {
                                          $('#val-msg.'+$(element).attr('id')).innerHTML(error.html());
                                   },
                    submitHandler: callback
           });
     } 
    ```

按照我的预期，它应该在表单的占位符范围内显示错误消息。

但是，**问题**

> **Chrome 控制台上的错误**：未捕获的类型错误：无法读取未定义的属性“设置”

它也在其他浏览器上给出错误。然后，我试图找出问题并发现：

```
 $('.val-req').rules('add', {required:true});   # This is causing the error 
```

根据我的理解和文档-> 这应该是正确的。

为什么这会导致 TypeError，我该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-10T11:52:10.427

在表单元素中调用验证插件后，您必须添加规则：

```
$("form").validate()
$(yourElement).rules("add", {...}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:53:32.230

我认为你的代码比它需要的更复杂。您应该只需要调用`validate`准备好的文件（假设您的表格存在于准备好的文件中）：

```
$(document).ready(function() {
    $(".val-req").addClass("required");
    $("#form_id").validate({
        errorElement: "span",
        errorClass: "val-error",
        validClass: "val-valid",
        errorPlacement: function(error, element) {
            $('#val-msg.' + $(element).attr('id')).html(error.html());
        },
        submitHandler: function () {
            this.submit();
        }
    });
});​ 
```

**示例：http:** [//jsfiddle.net/4vDGM/](http://jsfiddle.net/4vDGM/)

您也可以只`required`向所需元素添加一个类，而不是通过 JavaScript 添加它们。

您可以做的另一件事是在`validate`选项的规则对象中添加规则：

```
$(document).ready(function() {
    $("#form_id").validate({
        rules: {
            myval: "required"
        },
        errorElement: "span",
        errorClass: "val-error",
        validClass: "val-valid",
        errorPlacement: function(error, element) {
            $('#val-msg.' + $(element).attr('id')).html(error.html());
        },
        submitHandler: function () {
            this.submit();
        }
    });
});​ 
```

**示例：http:** [//jsfiddle.net/GsXnJ/](http://jsfiddle.net/GsXnJ/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-16T09:48:54.203

我试图修改已设置验证的表单上的规则，但我发现我的 $(document).ready(...) 代码在设置主表单验证之前正在执行，因此添加了一个简短的 setTimeout为我解决了这个问题 - 例如

```
setTimeout(function() {
    $(yourElement).rules("add", {...})
}, 100); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-01T15:48:37.957

罪魁祸首是方法delegate()，它不检查验证器是否存在：

```
function delegate(event) {
  var validator = $.data(this[0].form, "validator"),
  eventType = "on" + event.type.replace(/^validate/, "");
  // this fixes handling the deleted validator:
  if (!validator) return;
  validator.settings[eventType] && validator.settings[eventType].call(validator, this[0], event);
} 
```

我正在寻找解决方案，并在博客文章中找到了它。

资料来源：[http ://devio.wordpress.com/2012/07/18/fixing-jquery-validation-with-changing-validators/](http://devio.wordpress.com/2012/07/18/fixing-jquery-validation-with-changing-validators/)

# php - 调试变量值 cakephp

> ID：10651286
> 
> 赞同：5
> 
> 时间：2012-05-18T10:52:40.127
> 
> 标签：php, debugging, cakephp, cakephp-1.3

如何打印一些调试输出，例如数组变量的内容？我正在使用 cakephp 和 eclipse，但似乎无法做到这一点。我不是在谈论记录错误，只是打印一些变量值。这可能很明显而且很容易做到，但我找不到办法。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-18T10:55:00.297

对于学习的人来说，没有愚蠢的问题。所以这里是你的选择：

*   在您的代码中的任何地方，放置以下语句`debug($var);`。这也适用于控制器/视图和模型。

*   替代方案：使用 CakeLog::write(LOG_DEBUG, "..."); 记录调试值

*   要完整，应该安装非常有用的`DebugKit`插件。[从这里获取](http://thechaw.com/debug_kit)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T11:00:38.580

首先检查配置文件夹中的 core.php 文件..

调试模式是否为 2..

```
Configure::write('debug', 2); 
```

你可以打印数据，数组，

像这样：-

```
debug($data);
pr($data);
print_r($data); 
```

我们也有 cakephp 的调试工具包，通过这个你可以看到你的请求、会话、`$this->data`值、url、

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-18T10:58:26.920

您所要做的就是使用 cakephp[调试](http://book.cakephp.org/1.3/view/931/CakePHP-Core-Configuration-Variables)功能，例如

```
debug($arrayname); 
```

在此之前，您必须在**app/config**文件夹下的**core.php中将调试模式设置为 2**

 **[这是有关调试](http://book.cakephp.org/1.3/view/931/CakePHP-Core-Configuration-Variables)的更多详细信息**

# javascript - jscrollpane，滚动条角度

> ID：10651288
> 
> 赞同：0
> 
> 时间：2012-05-18T10:52:45.460
> 
> 标签：javascript

是否可以更改垂直滚动条的角度？

假设我们有一个标准的盒子形状，滚动条在左边。

现在我只想将滚动条倾斜到 45 度角而不倾斜滚动框中的文本。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:58:53.467

你可以使用 CSS 转换来做这样的事情。

[这是一个工作示例](http://jsfiddle.net/Mjju7/)- 这里的 CSS 仅适用于 Firefox，但您可以自己包含其他属性。

**html**

```
<div class="askew">
    <div class="askewContent">
    Hello World - I am in a box that's askew
    </div>
</div> 
```

**CSS**

```
.askew{
    margin:100px;
    -moz-transform:rotate(10deg);
    border:1px solid red;
    width:100px;
    height:100px;
    overflow:scroll;
}

.askewContent{
    -moz-transform:rotate(-10deg);
} 
```

# ruby-on-rails - 在 Rails 中为经过身份验证的 POST 端点禁用 CSRF 保护是否安全？

> ID：10651290
> 
> 赞同：2
> 
> 时间：2012-05-18T10:52:57.443
> 
> 标签：ruby-on-rails, security, iframe, csrf

我发现自己处于一种情况，如果我可以在我的 rails 应用程序中禁用 CSRF 令牌检查端点，我可以提供更好的用户体验。

端点是一个`create`动作（由 路由到`POST /whatever`），位于设计`:authenticate!`过滤器后面。

我是否会通过禁用该特定端点的 CSRF 保护来使自己面临任何额外的安全风险，或者我是否可以安全地依赖身份验证`before_filter`来阻止 CSRF 令牌所保护的恶意请求类型？

*如果有人感兴趣，以下是关于我为什么*要这样做的更详细的解释。

我的用例是，我基本上想创建与 Facebook 的点赞按钮非常相似的东西，但是这个按钮（与 Facebook 的对应按钮不同）通常会在同一页面上出现多次。

CSRF 保护工作正常，除了用户访问带有空 cookie 的页面的情况。

在这种情况下，rails 会为 X 个请求中的每一个生成一个新会话，因为它们都是无 cookie 的。当然，对于每个新会话，都会生成一个新的 CSRF 令牌并在对 iframe 的响应中返回。

由于浏览器只为域保留一个 cookie，因此来自每个 iframe 的任何后续请求都将映射到同一会话，因此所有 CSRF 令牌（除了一个）都是无效的。

映射到单个会话很好，因为可以提示用户登录一次，然后在每次按下后续按钮时映射到相同的登录 - 无需重新加载页面。

折衷方案是用 响应`401 Unauthorized`，但保留被拒绝请求的会话（通过覆盖`handle_unverified_request`）。这将再次触发登录弹出窗口，但这一次会发生即时重定向，因为用户已经登录。

当然，最好避免登录弹出窗口的闪烁，因此我想一起禁用 CSRF 保护只是为了`create`操作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T12:49:07.273

经过身份验证的请求正是 CSRF 的意义所在。

CSRF 的意思是攻击者说服用户的浏览器发出请求。例如，您访问了一个由攻击者托管的页面，该页面的表单看起来像

```
<form action="http://www.yourapp.com/some_action">
  #for parameters here
</action> 
```

以及自动提交表单的页面上的一些 javascript。如果用户已经登录到您的应用程序，则此请求将通过任何基于 cookie 的身份验证检查。然而，攻击者不知道 csrf 令牌。

对于未经身份验证的请求，csrf 没有任何作用——攻击者可以继续发出请求——他们不需要劫持受害者的​​凭据。

所以，简短的版本：禁用 csrf 保护将使您容易受到 csrf 风格的攻击。

CSRF 的真正目的是确保表单包含攻击者无法伪造的参数。会话是存储此类值的简单场所，但我想您可以提出替代方案。例如，如果用户无法控制表单中的任何参数，您可以添加另一个参数，该参数将作为表单中所有其他参数的签名（可能带有某种时间戳或随机数以防止重放攻击）。收到请求后，您可以通过验证签名来判断请求是否来自您生成的表单。

对这类事情要非常小心，因为很容易出错（甚至大男孩[有时也会](http://www.daemonology.net/blog/2008-12.html)出错。

# android - 在Android的代码中存储安全服务/文件/数据库的密码是否安全？

> ID：10651291
> 
> 赞同：0
> 
> 时间：2012-05-18T10:52:57.950
> 
> 标签：android, security, passwords

我偶然发现了一个简单的问题，即打开数据库或使用安全服务的最佳方式是什么，从某种意义上说，只有提供正确的密码才能工作。

1.  我已经将 SharedPreferences 视为一种检索信息的方式，但我需要创建一个应用程序，在第一种情况下存储密码，这本身意味着我需要将它写在某处或其他地方的代码上

2.  客户经理是我考虑过的另一种方式。

3.  以 AES 加密格式、文件或 sqlite db 存储实际密码。但这意味着密钥必须在代码中。

我会认为这是人们面临的一个相当普遍的问题，我想知道人们是如何解决它的！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-18T11:03:05.687

在我看来，您可以使用 AES 加密来加密您的数据。但主要问题是钥匙不安全。APK 可以反编译。所以有一种方法可以隐藏密钥。植入有点困难。使用本机编码 (NDK)。您可以将密钥写入 C 文件，编译后您将获得一个 .SO 文件。该文件可以包含在您的项目中。从 java 调用 C 函数并返回密钥。但另一个问题是，当您打开 .SO 文件时，可以看到用 C 编写的字符串。因此，分配生成密钥的 ascii 代码并使用 C 中的 ascii 代码创建一个字符串。

# python - Regex Python~Get Everything In Between，如果单词没有用单引号括起来

> ID：10651294
> 
> 赞同：0
> 
> 时间：2012-05-18T10:53:11.227
> 
> 标签：python

> **可能重复：**
> [仅在 Python 中替换未引用的单词](https://stackoverflow.com/questions/10642346/replacing-unquoted-words-only-in-python)

这就是我现在所拥有的

```
found = re.match( r"hello[(](.*)[)]", word, re.M|re.I) 
```

它会发现：

```
Hello(here)  and give you "here" 
```

我希望它能够执行以下操作：

```
Hello  (Hi) 
```

即使两边有空格（但只有空格，而不是其他字符）也返回值，所以这将返回“Hi”

```
'dfsfds Hello (Hi) fdfd' Hello (Yes) 
```

这将返回“是”，因为第一部分用单引号括起来，所以我们不使用它（如果可能，空格规则在这里仍然适用）

编辑：

```
 Hello  ('Hi')  would return 'Hi' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:20:26.513

它可能并不完美，但这似乎可以满足您的用例。我觉得这是一个相当复杂的过程，并且有了更多规则，它将开始处理正则表达式*真正*不擅长的问题类型。

```
>>> import re
>>> match_dict = {'hello(here)': 'here',
...                 'Hello   (Hi)': 'Hi',
...                 "'dfsfds Hello (Hi) fdfd' Hello (Yes)": 'Yes',
...                 "Hello ('hi)xx')": "hi)xx",
...                 "Hello  ('Hi')": 'Hi'}
>>> for s, goal in match_dict.iteritems():
...     print "INPUT: %s" % s
...     print "GOAL: %s" % goal
...     m = re.sub(r"(?<!\()'[^']+'", '', s, flags=re.I|re.M)
...     paren_quotes = re.findall(r"hello\s*\('([^']+)'\)", m, flags=re.I|re.M)
...     output = paren_quotes if paren_quotes else []
...     m = re.sub(r"hello\s*\('[^']+'\)", '', m, flags=re.I|re.M)
...     paren_matches = re.findall(r"hello\s*\(([^)]+)\)", m, flags=re.I|re.M)
...     if paren_matches:
...         output.extend(paren_matches)
...     print 'OUTPUT: %s\n' % output
... 
INPUT: 'dfsfds Hello (Hi) fdfd' Hello (Yes)
GOAL: Yes
OUTPUT: ['Yes']

INPUT: Hello  ('Hi')
GOAL: Hi
OUTPUT: ['Hi']

INPUT: hello(here)
GOAL: here
OUTPUT: ['here']

INPUT: Hello   (Hi)
GOAL: Hi
OUTPUT: ['Hi']

INPUT: Hello ('hi)xx')
GOAL: hi)xx
OUTPUT: ['hi)xx'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:59:05.133

只需先删除单引号内的所有内容：

```
>>> import re
>>> s = "'dfsfds Hello (Hi) fdfd' Hello (Yes)"
>>> s2 = re.sub(r"'[^']+'", '', s)
>>> re.search(r'hello\s*\(([^)]+)\)', s2, re.I|re.M).group(1)
'Yes' 
```

# list - findall 后从列表中删除小于某个值的元素

> ID：10651300
> 
> 赞同：0
> 
> 时间：2012-05-18T10:53:21.140
> 
> 标签：list, prolog

我有：

```
mymake(Answer_Max):-
    findall((Place, Cost), costOfLiving(Place, Cost), ResultList),
    delete_over(ResultList, Answer_Max). 
```

`costOfLiving`在我的数据库中，由每个地方和成本组成，例如：

```
costOfLiving(germany, 500).
costOfLiving(france, 500). 
```

等等。所以这`ResultList`就像`[(germany, 500), (france, 500), ...]`

我想删除数据库中`costOfLiving`超过 number的所有元素`Answer_Max`，但我的 delete_over 无法正常工作。它是这样的：

```
delete_over([], _).
delete_over([F|T], Max) :-
   F =.. [Place, Cost], % it fails here because the F is not a list, but two atoms I think
   ((id_state(Place), (Cost > Max)) -> deleteState(Place) ; true),
   % id_state and id_region checks that the place is defined in the database
   % deleteState and deleteRegion calls a specific retractall for the database
   ((id_region(Place), (Cost > Max)) -> deleteRegion(Place) ; true),
   delete_over(T). 
```

我该如何解决它以获得我想要的东西？（也以防万一有其他问题）

* * *

**用我的解决方案编辑** *（并在帮助下）*

```
mymake(Answer_Max) :-   % I don't need the ResultList, but if needed just add as second parameter
    findall( (Place, Cost), ( costOfLiving(Place, Cost), Cost > Answer_Max ), ResultList ),
    maketolist(ResultList).

maketolist([]).
maketolist([(P,_)|T]) :- % all the elements are for deleting as their Cost is higher than the Max given
    (id_state(P) -> deleteState(P) ; true), % deleteState makes a retractall according to my needs on my database 
    (id_region(P) -> deleteRegion(P); true), % the same for deleteRegion with regions
    maketolist(T). 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T11:44:43.717

您可以仅在`findall/3`. 顺便说一句，`mymake`应该有第二个论据来回答。

```
costOfLiving(germany, 500). 
costOfLiving(france, 500).

mymake(Answer_Max, ResultList) :-
    findall( (Place, Cost)
           , ( costOfLiving(Place, Cost)
             , Cost >= Answer_Max
             )
           , ResultList
           ). 
```

最后：

```
?- mymake(100,X).
X = [ (germany, 500), (france, 500)].

?- mymake(600,X).
X = []. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T14:54:14.480

您可以直接从数据库中撤回，而无需构建列表，但如果您需要此结构，则需要进行更正：

```
delete_over([F|T], Max) :-
   F = (Place, Cost), ... 
```

# objective-c - ASIHTTPRequest 和 EXC_BAD_ACCESS

> ID：10651301
> 
> 赞同：1
> 
> 时间：2012-05-18T10:53:22.013
> 
> 标签：objective-c, ios, xcode, asihttprequest, exc-bad-access

实际上问题出在下面的屏幕上。当请求开始时，它会出现：

![在此处输入图像描述](../Images/c5ecdaff8b995c145760336ec01d12ad.png)

问题仅出现在 iOS 5.0 及更高版本上。在 iOS 4.3 上似乎一切正常。会是什么？

**UPD：**原始[图片链接](https://i.stack.imgur.com/Uhmkb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:18:24.747

您通过释放不属于您的对象来打破该方法中的 Cocoa 内存管理规则。我认为您已经过度释放了调用，而您只是在旧版本的框架中走运了。

另外，为什么在 NSInvocation 上使用 CFRelease？我不认为它可以免费连接到任何 CF 对象。

此外， NSInvocation 不保留其参数。确保他们没有被释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:20:09.580

作为一个疯狂的猜测，没有看到任何相关代码，我会说你没有调用-clearDelegatesAndCancel。

来自[http://allseeing-i.com/ASIHTTPRequest/How-to-use](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

```
// Ddealloc method for our controller
- (void)dealloc
{
   [request clearDelegatesAndCancel];
   [request release];
   ...
   [super dealloc];
} 
```

# c# - 通过 ADFS（Active Directory 联合服务）对用户进行身份验证

> ID：10651304
> 
> 赞同：4
> 
> 时间：2012-05-18T10:53:44.130
> 
> 标签：c#, .net, c#-4.0, adfs2.0

我需要检查特定用户是否存在于 Active Directory 中`ADFS`。

所以，我希望我的*ADFS*使用`check user Authentication` *用户名/密码。*

任何人都可以提供相同的示例代码或教程。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T09:55:41.157

要使用用户名/密码身份验证，您可以使用

> 信任/13/用户名Mixed

ADFS 2.0 的端点。

这不会检查用户是否存在于 Active Directory 中！

在代码中，您请求这样的令牌：

```
WSTrustChannelFactory adfsfactory = new WSTrustChannelFactory(new UserNameWSTrustBinding(SecurityMode.TransportWithMessageCredential),
                            StsEndpoint);

adfsfactory.TrustVersion = TrustVersion.WSTrust13;

// Username and Password here...
factory.Credentials.UserName.UserName = "domain\username";
factory.Credentials.UserName.Password = "password";

IWSTrustChannelContract channel = adfsfactory.CreateChannel();

// request the token
SecurityToken token = channel.Issue(rst); 
```

然后使用您的令牌为您的服务创建通道工厂：

```
var binding = new WS2007FederationHttpBinding(WSFederationHttpSecurityMode.Message);

var factory = new ChannelFactory<IYourInterface >(binding, "your service address");

factory.ConfigureChannelFactory();

IYourInterface channel = factory.CreateChannelWithIssuedToken(token); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T19:48:35.183

AD FS 2.0 登录页面支持开箱即用的用户名/密码身份验证。无需代码或自定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T19:15:58.270

根据@Marnix，这是开箱即用的行为。

但是，只是要指出：

对用户进行身份验证与检查 Active Directory 中是否存在特定用户不同。

例如，用户可能被锁定。他仍然存在于 AD 中，但无法进行身份验证。

# c# - 使用 SDK 和 Uploadify 将文件上传到 Amazon S3 时显示的上传进度不正确

> ID：10651306
> 
> 赞同：10
> 
> 时间：2012-05-18T10:53:45.907
> 
> 标签：c#, jquery, asp.net-mvc, amazon-s3, uploadify

我的 ASP.NET MVC (C#) 应用程序正在使用 Uploadify 使用适用于 .NET 的开发工具包将文件上传到 Amazon S3，但它显示的上传进度不正确。

当我使用 Uploadify 将文件直接上传到我们的服务器时，它工作正常。但是，当我使用 Amazon S3 TransferUtility.Upload 方法上传文件时，进度条会快速显示 100% 完成，但我需要等待很长时间才能到达 Uploadify 的`onComplete`事件。我的代码如下所示。

C#代码：

```
using (transferUtility = new TransferUtility(AWSAccessKey, AWSSecretKey))
{
    try
    {
        TransferUtilityUploadRequest request = new TransferUtilityUploadRequest();

        request.WithBucketName(AWSBucket)
            .WithKey(folderKey)
            .WithTimeout(5 * 60 * 1000)
            .WithInputStream(uploadFileStream);

        request.WithCannedACL(S3CannedACL.PublicRead);

        transferUtility.Upload(request);
    }                
    catch (AmazonS3Exception amazonS3Exception)
    {
        throw amazonS3Exception;
    }
} 
```

JavaScript 代码：

```
jQuery(document).ready(function () {
    var allowdfileext='*.doc;*.docx;*.pdf;'
    var extarray=allowdfileext.split(';');

    jQuery('#proposalUploadFile').uploadify({
        'uploader': '/Content/uploadify/uploadify.swf',
        'script': '/File/Upload',
        'folder': '/uploads',
        'buttonImg':'/Content/uploadify/upload-file.jpg',
        'cancelImg': '/Content/uploadify/cancel.png',
        'auto': true,            
        'height': '25',
        'width': '95', 
        'wmode':'transparent',
        'sizeLimit': '20971520',
        'onComplete': fileUploaded,
        'multi': false,
        'scriptData': {
            'saveToFolder': 'Temp',
            'fileextension':'*.doc;*.docx;*.pdf;',
            'subdomain':'qa','saveInLocal':'True'
        },
        'fileExt':'*.doc;*.docx;*.pdf;',
        'fileDesc':'Files (*.doc;*.docx;*.pdf;)',
        'onAllComplete': fileUploadCompleted,
        'onError' : function(event, ID, fileObj, errorObj) {
            var r = '<br />ERROR: ';

            switch(errorObj.info) {
                case 405:
                    r += 'Invalid file type.';
                    break;
                case 406:
                    r += 'Some other error.';
                    break;
                default:
                    r += 'Some other error.';
                    break;
            }       
        }
    });
}); 
```

为什么进度条没有像我期望的那样更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T03:30:39.787

基本上有两个上传发生。一次从网页到您的服务器，一次从您的服务器到云。

您看到的是从网页到上传处理程序的上传进度。浏览器只知道从客户端发送到服务器的数据，而不知道从服务器发送到 S3 的数据。

如果不做一些相当复杂的服务器工作，就不可能获得准确的上传进度值。我建议要么触发后台线程来处理上传到 S3 的内容，要么将进度设置为小于 100%，直到触发完整的回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:12:59.470

TransferUtility 如何从服务器端与 swf 客户端进行通信？我假设从客户端到服务器的上传将反映在进度条中。接下来，服务器传输到 S3 将（比写入本地文件慢得多），不会报告给客户端 (swf)。这将解释上传达到 100% 和必须等待页面响应之间的延迟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T16:13:54.837

通常，有一个配置部分，您可以在其中设置时间以更新状态提供程序中的进度状态。在你的情况下，我认为必须有类似的东西。

在整洁上传中，此配置由`stateMergeIntervalSeconds`. 我希望这会有所帮助。

# android - 如何将属性 onClick 设置为 ScrollView？

> ID：10651309
> 
> 赞同：5
> 
> 时间：2012-05-18T10:53:50.363
> 
> 标签：android, onclick, scrollview

我有以下布局

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@android:color/white" >

<LinearLayout
    android:id="@+id/answerMainFrame"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/white"
    android:isScrollContainer="true"
    android:onClick="toQuestion" >

    <ImageView
        android:id="@+id/answer_img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"
        android:contentDescription="@string/question_img_cd" />

    <TextView
        android:id="@+id/answer"
        style="@style/Question" />
</LinearLayout> 
```

有时`ScrollView`它太小了，不会填满整个屏幕，但我仍然想调用`toQuestion()`单击屏幕上任意位置的方法。

我尝试将and设置`android:layout_height="wrap_content"`为相同的结果。`LinearLayout``android:onClick="toQuestion"``ScrollView`

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-18T11:11:49.607

您可以尝试让`LinearLayout`实现该`onClick`属性，然后设置：

```
android:fillViewport="true" 
```

到`ScrollView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-04T13:37:27.870

我有一个类似的问题，只是摆脱了滚动视图本身。相反，我直接插入了 TextView 本身，以及之前放在 ScrollView 上的约束。我的 ScrollView 的全部目的是在 TextView 中滚动，而不是在几个项目之间滚动，所以这似乎是一种更优雅的方式。

在我的 textview 中添加一个（垂直）滚动条 activity.hmtl ：

```
 <TextView
    android:id="@+id/tvInfo"
    (...) 
    android:scrollbars="vertical" 
    /> 
```

将此添加到 onCreate 方法：

```
 oTV = (TextView) findViewById(R.id.tvInfo);
    oTV.setMovementMethod(new ScrollingMovementMethod()); 
```

无需编写滚动响应。我喜欢。

我在这里找到了解决方案（谢谢 Juned Mughal）：

[http://www.android-examples.com/make-textview-scrollable-in-android-programmatically/](http://www.android-examples.com/make-textview-scrollable-in-android-programmatically/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-18T11:02:17.130

要使滚动视图填充屏幕更改：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@android:color/white" > 
```

到

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/scrollView"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_weight="1"
android:background="@android:color/white" > 
```

并将其放入您的 onCreate 方法中：

```
((ScrollView) findViewById(R.id.scrollView))
                .setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        toQuestion();
                    }
                }); 
```

# c# - 使用图形 api 和 C# 在墙上发布的图像太小

> ID：10651311
> 
> 赞同：1
> 
> 时间：2012-05-18T10:54:10.167
> 
> 标签：c#, image, facebook-graph-api, post, facebook-wall

我正在尝试使用以下代码在页面墙上发布图片：

```
string message = "Some message";
string picture = "http://somesource.com/test.jpg";
string pageToken = "page access toke";
string pageId = "page id";
string PostUri = "https://graph.facebook.com/{0}/feed?access_token={1}&";

var request = string.Format(PostUri, pageId, pageToken);

var sb = new StringBuilder();
sb.AppendFormat("picture={0}&", picture);
sb.AppendFormat("message={0}", message);

WebClient webClient = new WebClient();
webClient.Encoding = Encoding.UTF8;
webClient.Headers.Add("Content-Type", "application/x-www-form-urlencoded");

var bytes = Encoding.UTF8.GetBytes(sb.ToString());

webClient.UploadData(request, bytes); 
```

它对我有用。但是使用图形 api 发布的图像比使用常规 facebook 网络界面发布的图像要小。我应该在此代码中更改什么以显示更大尺寸的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:52:59.027

将其更改为`source`从`picture`

```
sb.AppendFormat("source={0}&", picture); 
```

`picture`用于缩略图。

**更新** 您还可以设置图像的高度和宽度

```
 sb.AppendFormat("height={0}&", 450);
   sb.AppendFormat("width={0}&", 450); 
```

# php - 从 php 启动 phantomjs 服务器并等待它的响应

> ID：10651320
> 
> 赞同：8
> 
> 时间：2012-05-18T10:54:50.930
> 
> 标签：php, javascript, shell, curl, phantomjs

我想从我的 php 脚本运行一个 phantomjs 服务器，然后向它发出 curl 请求并读取它的响应（在最终版本中将给出生成的 pdf 的路径）。从控制台运行 phantomjs 服务器文件然后在浏览器中导航到它的地址时，一切正常。那是 server.js 文件：

```
var server, service, page = require('webpage').create(), address, output,
    html = '<!DOCTYPE><html><head></head><body><h1>FOOO</h1></body></html>';

server = require('webserver').create();

var rasterize = function(html, callback){
    address = 'http://localhost';
    output = '/Users/me/print.pdf'
    page.viewportSize = { width: 600, height: 600 };
    page.open(address, function (status) {
        if (status !== 'success') {
            console.log('Unable to load the address!');
        } else {
            window.setTimeout(function () {
                page.content = html;
                page.render(output);
                callback();
            }, 2000);
        }
    });
}

service = server.listen(8080, function (request, response) {
    response.statusCode = 200;

    rasterize(html, function(){
        response.write('<h1>BAR</h1>');
        response.close();
        phantom.exit();     
    });
}); 
```

基本上我正在打开 localhost 地址，将页面内容切换到我的 html 字符串，然后将呈现的页面保存为 pdf。

现在是我的 php 脚本：

```
<?
    function send_callback($data){
        echo '{type: success, data: '.$data.'}';
    }

    function curl_post($url, array $post = NULL, array $options = array()) { 
        $defaults = array( 
            CURLOPT_POST => 1, 
            CURLOPT_HEADER => 0, 
            CURLOPT_URL => $url, 
            CURLOPT_FRESH_CONNECT => 1, 
            CURLOPT_RETURNTRANSFER => 1, 
            CURLOPT_FORBID_REUSE => 1, 
            CURLOPT_TIMEOUT => 5, 
            CURLOPT_POSTFIELDS => http_build_query($post) 
        ); 

        $ch = curl_init(); 
        curl_setopt_array($ch, ($options + $defaults)); 
        if( ! $result = curl_exec($ch)) { 
            trigger_error(curl_error($ch)); 
        } 
        curl_close($ch);
        send_callback($result);
    }

        shell_exec('phantomjs '.escapeshellarg(dirname(__FILE__).'/server.js'));
        //wait to allow server to start
        sleep(5);

        $data = array('html'=> 'foo');    
        curl_post('http://localhost:8080', $data);
?> 
```

这里也没有魔法。我`phantomjs server.js`在终端中执行命令，并在 5 秒后（启动服务器的时间）向它发出 curlPOST 请求。
现在我有两个案例：

*   如果我从控制台运行 php 脚本，`php script.php`服务器会启动，因为我可以看到进程正在运行并且图标在 Dock 中可见，但我从未得到任何响应，并且未创建 pdf。
*   如果我从浏览器运行脚本，则图标在扩展坞中不可见，因此服务器以其他方式启动。仍然没有回应也没有pdf。

任何人都可以在我的代码中看到任何错误或想到任何调试方法吗？

在 OSX 10.7、php 5.3.6、phantomjs 上测试最新。运行服务器的用户 _www 具有管理员权限，我正在写入文件的文件夹已更改为 777。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:50:50.633

你有几个问题：

1.  phantomjs 在前台启动，这意味着您的 php 脚本停止/休眠，直到 phantomjs 停止。要么启动 phantomjs 服务，要么在后台运行它。请参阅“ [php 执行后台进程](https://stackoverflow.com/questions/45953/php-execute-a-background-process)”以获取 HowTo。
2.  Web 服务器可能无法访问您操作系统的“图形部分”，这意味着它无法与您的桌面交互。这就是为什么图标没有出现，但 phantomjs 仍然应该启动的原因。

# android - android中的TabActivity内的ScrollView

> ID：10651328
> 
> 赞同：0
> 
> 时间：2012-05-18T10:55:19.170
> 
> 标签：android, overflow, scrollview, tabactivity

如何在选项卡中放置长滚动视图？这是我的代码：资源 ressources = getResources(); TabHost tabHost = getTabHost();

```
 // Android tab
            Intent intentAndroid = new Intent().setClass(this, ScrollActivity1.class);
            TabSpec tabSpecAndroid = tabHost
                .newTabSpec("Android")
                .setIndicator("", ressources.getDrawable(R.drawable.tab_checkin))
                .setContent(intentAndroid);

            // Apple tab
            Intent intentApple = new Intent().setClass(this, ScrollActivity2.class);
            TabSpec tabSpecApple = tabHost
                .newTabSpec("Apple")
                .setIndicator("", ressources.getDrawable(R.drawable.tab_contatti))
                .setContent(intentApple); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:02:31.417

该活动在 FrameLayout 的主机选项卡内运行，因此，无论您为 ScrollActivity1 和 ScrollActivity2 在 setContextView 中放置什么 UI，您都将获得它作为选项卡的内容。

您需要将 ScrollView 作为活动的布局 xml 中的顶级布局元素。

# sql - sql将多个相似的子查询压缩成单个子查询

> ID：10651330
> 
> 赞同：3
> 
> 时间：2012-05-18T10:55:29.577
> 
> 标签：sql, postgresql

美好的一天，我的问题是关于优化 sql 查询。以下查询很慢：

```
SELECT id, name,
, (SELECT rank_time FROM stage_rank WHERE stage = stage.id ORDER BY rank_time DESC LIMIT 1)::date AS rank_time
, (SELECT host_c    FROM stage_rank WHERE stage = stage.id ORDER BY rank_time DESC LIMIT 1) AS host_c
, (SELECT index_pa  FROM stage_rank WHERE stage = stage.id ORDER BY rank_time DESC LIMIT 1) AS index_pa
, (SELECT links_pa  FROM stage_rank WHERE stage = stage.id ORDER BY rank_time DESC LIMIT 1) AS links_pa
, (SELECT index_pb  FROM stage_rank WHERE stage = stage.id ORDER BY rank_time DESC LIMIT 1) AS index_pb
, (SELECT links_pb  FROM stage_rank WHERE stage = stage.id ORDER BY rank_time DESC LIMIT 1) AS links_pb
FROM stage
ORDER BY name; 
```

我认为这主要是因为重复选择 from `stage_rank`，是否有可能使这个选择完成一次，并在一次点击中获得所有字段？

还有任何 postgresql 特定的功能在这里可能有帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T10:59:04.250

在`PostgreSQL`中，您可以选择整条记录作为字段并稍后展开：

```
SELECT  id, name, (sr).*
FROM    (
        SELECT  id, name,
                (
                SELECT  stage_rank
                FROM    stage_rank
                WHERE   stage = stage.id
                ORDER BY
                        rank_time DESC
                LIMIT 1
                ) sr
        FROM    stage
        ) q
ORDER BY
        name 
```

或重写查询：

```
SELECT  DISTINCT ON (s.name, s.id, sr.rank_time, sr.id)
        s.id, s.name, sr.*
FROM    stage s
JOIN    stage_rank sr
ON      sr.stage = s.id
ORDER BY
        s.name, s.id, sr.rank_time DESC, sr.id DESC 
```

或以另一种方式重写：

```
SELECT  id, name, (sr).*
FROM    (
        SELECT  s.id, s.name, sr, ROW_NUMBER() OVER (PARTITION BY s.id ORDER BY sr.rank_time DESC, sr.id DESC) rn
        FROM    stage
        JOIN    stage_rank sr
        ON      sr.stage = s.id
        ) q
WHERE   rn = 1
ORDER BY
        name 
```

# objective-c - ARC 不允许 iOS 将 int 隐式转换为 NSNumber

> ID：10651331
> 
> 赞同：12
> 
> 时间：2012-05-18T10:55:35.863
> 
> 标签：objective-c, ios, nsnumber

在以下代码中，我收到错误消息：ARC 不允许将“int”隐式转换为“NSNumber *”。

我做错了什么？

```
<pre>
 <code>
  NSDictionary *results = [jsonstring JSONValue];
  NSNumber *success = [results objectForKey:@"success"]; // possible values for "success": 0 or 1

   if (success == 1) { // ERROR implicit conversion of int to NSNumber disallowed with ARC    
   }
 </code>
</pre> 
```

感谢您的帮助或提示！

问候，丹尼尔

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-18T10:57:20.217

错误，因为您正在`NSNumber`与进行比较`int`。

试试看——

```
if ([success isEqual:[NSNumber numberWithInt:1]]) 
```

或者

```
if ([success intValue] == 1) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-18T10:57:47.093

你应该使用`[success intValue] == 1`. NSNumber 是一个类，所以 number 是一个指针，而不是直接值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T10:58:07.447

`NSNumber`是一个对象（即指针），所以你不能只将它与像`1`. 相反，您必须`int`从数字对象中提取值：

```
if ([success intValue] == 1) {
   ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T11:00:20.047

如果`success`应该指示布尔值，您可能想试试这个

```
NSDictionary *results = [jsonstring JSONValue];
NSNumber *success = [results objectForKey:@"success"]; 

if ([success boolValue]) { 
  // success!
} 
```

# php - jQuery Mobile 中的 JavaScript 表单验证

> ID：10651334
> 
> 赞同：2
> 
> 时间：2012-05-18T10:56:01.437
> 
> 标签：php, javascript, jquery, mobile

我正在做现有网站的移动版本。我已经包含了一些特殊效果的移动 css 和 jquery。但我已经使用 javascipt 进行了验证。当我检查了验证后，它在 ipad、手机和我的电脑上也能正常工作。但 2 ,3 周后，当我再次检查网站时，它就不能工作了。我创建了一个也不起作用的演示：

[http://jsfiddle.net/dPes7/27/](http://jsfiddle.net/dPes7/27/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T01:05:00.880

为什么不使用准备好的文档？

```
$(document).ready(function(){
$('form[name=YourForm]').submit(check);
}) 
```

我通常不会为提交按钮执行 data-role="none" 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T02:35:24.577

您需要重写并重新开始。你的 JS 搞砸了。这是一个示例：[http ://www.elijahmanor.com/2011/02/jquery-mobile-form-validation.html](http://www.elijahmanor.com/2011/02/jquery-mobile-form-validation.html)

包括一个有效的 JSFiddle

# .net - MSMQ 适合这种情况吗？电子邮件发送应用程序

> ID：10651338
> 
> 赞同：1
> 
> 时间：2012-05-18T10:56:25.140
> 
> 标签：.net, c#-4.0, msmq

我是 MSMQ 的新手。
这是我的场景：计费软件生成账单后，我需要向所有客户发送电子邮件以保证交付（快速）。
以下是我们需要注意的可能事项：
1.**如果 Internet 出现故障，那么应该有一段时间后重试发送的能力。** 2.**电子邮件发送顺序** 3.**能够优先处理/发送电子邮件。** 

我有关于服务代理（MSSB）的知识。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T16:02:39.057

为了解决问题中的第 1 点，如果您在不同位置有许多计费软件实例，那么您可以创建一个负责发送电子邮件的“中央”服务（让我们调用托管该服务的机器 ServerX）。在这种情况下，您需要解决的主要问题是确保 ServerX 可以持续访问 SMTP 服务器（它将发送电子邮件）。因此，理想情况下，ServerX 应该具有非常可靠和稳定的 Internet 连接，或者如果您的 SMTP 服务器在您自己的网络上，那么 ServerX 必须能够不受阻碍地访问您 LAN 上的 SMTP 服务器。现在，如果生成要发送给客户的账单的软件位于不同的位置（远离 ServerX），那么您可以使用 MSMQ 确保计费软件实例发送的电子邮件请求实际上是交付给 ServerX。基本上，您的计费软件将调用 ServerX 上的 MSMQ 服务，而不是直接调用 SMTP 服务器，这里的 MSMQ 可以充当中介，将收到的消息传递给 SMTP 服务器。如果您想到的架构是我上面提到的，这是一个可行且易于实现的服务。相反，您可以让您的计费软件的每个实例都调用 SMTP 服务器——尽管这样您会为自己引入额外的障碍并创建多个可能的故障点，而不是减少它们。如果您想到的架构是我上面提到的，这是一个可行且易于实现的服务。相反，您可以让您的计费软件的每个实例都调用 SMTP 服务器——尽管这样您会为自己引入额外的障碍并创建多个可能的故障点，而不是减少它们。如果您想到的架构是我上面提到的，这是一个可行且易于实现的服务。相反，您可以让您的计费软件的每个实例都调用 SMTP 服务器——尽管这样您会为自己引入额外的障碍并创建多个可能的故障点，而不是减少它们。

一旦您的计费软件实例调用了 ServerX，那么您提到的其余点（2 和 3）就变得简单了，并且可以通过 ServerX 上的服务中的简单业务逻辑轻松解决。

总而言之，我会这样做：

1.  创建一个中央服务（使用 MSMQ），它将接收和处理您的电子邮件请求。
2.  确保托管 MSMQ 服务的服务器可以可靠地访问 SMTP 服务器。
3.  让您的计费软件将电子邮件请求发送到该中央 MSMQ 服务，而不是直接发送到 SMTP 服务器。
4.  在中央服务器上按您的意愿处理请求，即每当您在队列中收到新消息时，调用您的电子邮件发送服务。

虽然说了这么多，但这只是将 MSMQ 融入场景的秘诀，我不能太确定它是否是您想要做的最好的事情，但这是您可以将它集成到您​​的企业。

# javascript - d3js - 动画树结构

> ID：10651341
> 
> 赞同：1
> 
> 时间：2012-05-18T10:56:34.777
> 
> 标签：javascript, tree, d3.js, transition

我正在使用 d3.js ( [tree-radial.js](https://github.com/mbostock/d3/blob/master/examples/tree/tree-radial.js) ) 中的径向树示例，当您单击一个节点时，它应该移动到中心（将其设置为新根）。我想从一个树结构平滑过渡到另一个树结构，但我根本无法让它工作。点击被识别，但我不确定如何转换节点。有人可以向我解释完成这项工作的步骤或链接一个简短的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:24:11.973

我不知道这是否有帮助，但你可以看看这个：[http](http://bl.ocks.org/1249394) ://bl.ocks.org/1249394 。在这个例子中被点击的节点没有移动到中心，但本质上你仍然需要做一些类似的转换，只是你必须调整节点的位置到中心（坐标略有不同）转换）。

# inheritance - 游戏博弈与传承

> ID：10651342
> 
> 赞同：0
> 
> 时间：2012-05-18T10:56:37.103
> 
> 标签：inheritance, xna

一个菜鸟问题。我经常看到这样的事情：

```
 public Constructor(Game game, string effectAssetName)
        : base(game) 
```

我真的无法理解第二行的功能。这称为基地，但为了什么？游戏不是已经在Game game的第一行定义了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:59:45.147

“基础”调用确定在超类上调用哪个构造函数 - 例如，没有 :base(game) 超类将不会被初始化（准确地说，该特定构造函数将不会运行，但如果有可用的无参数构造函数可能会)

通常，当您对 Game 类进行子类化时，您会添加自己的功能，但您仍然需要 Game 类来初始化和实现它自己的功能。您实际上是在进行以下调用

```
MyGameObject.Constructor(game, effectAssetName) 
```

和

```
Game.Constructor(game); 
```

进一步（坏:)）示例

```
class Fruit 
{    
  private bool _hasPips;

  public Fruit(bool hasPips) 
  {
     _hasPips = hasPips;
  }
}

class Apple : Fruit 
{
  private bool _isGreen;

  public Apple(bool isGreen, bool hasPips) : base(hasPips)
  {
    _isGreen = isGreen;
  }
} 
```

当创建一个新的 Apple 时，会调用 base(hasPips)，否则 Fruit 超类的 hasPips 属性将永远不会被设置（实际上在这种情况下，在 Apple 上创建构造函数而不调用 base(bool) 构造函数是非法的在 Fruit 上，因为 Fruit 上没有无参数构造函数）

# java - 在 Java 中，如何在 I/O 代码的构造函数中删除 try catch 块

> ID：10651345
> 
> 赞同：3
> 
> 时间：2012-05-18T10:56:57.010
> 
> 标签：java, exception, constructor, try-catch

在Java中，如何编写必须在构造函数内的try-catch块中的I/O代码，而在构造函数中没有try-catch？就像方法一样，我们可以通过在方法定义中写入 throws 将异常传递给方法的调用者，并且我们可以删除 try-catch。我们如何在 I/O 代码的构造函数中删除 try-catch。这是一个面试官问我的问题。我说这做不到，我真的不知道。伙计们，你们怎么想。请建议？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T10:59:08.883

用这个：

```
public class Foo
{
   public Foo() throws IOException
   {
       doSomeIO();
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T10:59:07.107

与方法相同。只需声明一个 throws 声明。

不过，尝试这个会比在这里输入这个长问题更容易。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T10:59:16.553

您也可以将`throws`子句添加到构造函数，类似于任何其他方法。

# asp.net - 合并两个查询的结果

> ID：10651348
> 
> 赞同：0
> 
> 时间：2012-05-18T10:57:08.760
> 
> 标签：asp.net, vb.net, linq

我正在做两个查询：

```
Dim worker = (From p in db.workers where p.dateAdded > today 
                   select new with{.name = p.name, .desc = p.description})

Dim client = (From p in db.clients where p.dateAdded > today 
                   select new with{.name = p.name, .desc = p.description}) 
```

如何将这两个查询合并为只有一个可以用作`DataSource`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:07:25.340

尝试这样的事情

```
 Dim Merged = (From p in db.workers where p.dateAdded > today 
                       select new with{.name = p.name, .desc = p.description})
                 .Union
                 (From p in db.clients where p.dateAdded > today 
                       select new with{.name = p.name, .desc = p.description}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:02:20.063

`Distinct`如果想获得不同的结果，请使用。

```
var merged = worker.Concat(client).Distinct(); 
```

或者

```
var mergedList = worker.Union(client).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T14:09:26.833

你能具体说明你想要做什么吗？
1\. 将结果合并到一组中 - 如果是，您可以使用[huMpty duMpty 的](https://stackoverflow.com/users/925222/humpty-dumpty)建议
2\. 如果您想使用两个带有 Linq 查询的 DataTable 执行类似于 DataSet 的操作，我不确定这是否可以实现。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T12:13:59.503

使用`Union`可以提供您预期的结果。

看看[返回两个序列的集合并集（LINQ to SQL）](http://msdn.microsoft.com/en-us/library/bb386993.aspx)

# javascript - 如何使用 jQuery 选择空输入（value=""）

> ID：10651349
> 
> 赞同：56
> 
> 时间：2012-05-18T10:57:09.457
> 
> 标签：javascript, jquery, jquery-selectors

如何检查`required`一个部分中 ( ) 输入字段的空值，然后使用 jQuery 在事件中向它们添加一个类？到目前为止，我已经尝试过：

```
jQuery("#sender_container input.required").val("").addClass("error"); 
```

但这似乎是**设置**值，而不是检查它。有任何想法吗？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-05-18T10:58:53.837

```
jQuery("#sender_container input.required").filter(function() {
    return !this.value;
}).addClass("error");​ 
```

* * *

为什么你必须使用`filter`而不是`[value=""]`你可以在[**这个 DEMO中看到**](http://jsfiddle.net/KGgaB/3)

原因是：属性选择器检查元素的初始状态，而不是当前状态。（请注意，您可以使用该`attr`函数更改“初始”状态，但这是不好的做法，您应该始终使用`prop`）

因此，如果您更改输入值，当前值不会影响属性选择器。不明智...`:)`

笔记：

*   `.val()` **返回**表单元素的值，并打破jQuery链， `$('selector').val().addClass('foo')` **Error**，返回值为字符串\[**数字**](https://stackoverflow.com/q/9227268/601179)

*   `.val(valueToSet)` **设置**表单元素的值并且不会破坏 jQuery 链。
    `$('selector').val("some value").addClass('foo')`-**有效**，返回值为一个jQuery

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-04-27T08:29:56.490

```
$('input:text[value=]','#sender_container').addClass('error'); 
```

[演示](http://jsfiddle.net/NE4vu/1/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T10:58:42.190

```
$('#sender_container input.required[value=""]').addClass('error') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-18T10:58:08.707

```
jQuery('#sender_container input.required[value=""]').addClass("error"); 
```

你可以试试这个：

```
$('input:not([value!=""])').addClass('error'); 
```

**[演示](http://jsfiddle.net/thecodeparadox/5aFuY/3/)**

*注意：不应使用此答案，它未被删除的唯一原因是可以从中学习。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T11:16:21.297

```
$field = $("#sender_container input.required");
if( ! $field.val())
{
    $field.addClass("error");
} 
```

这种简单的方法可能会奏效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-10T10:13:21.560

如果您只需要根据输入的初始属性值进行选择，则可以执行以下操作：

```
var elements = $('#sender_container input.required[value=""]') 
```

`value`但请注意，如果该属性不存在，这将不起作用。如果当前输入值已被用户或脚本更改，它也不适用于当前输入值。

如果您想获取当前输入值，可以使用*jquery*的[`filter`](https://api.jquery.com/filter/#filter-function)功能：

```
var elements = $('#sender_container input.required').filter(function() {
  return this.value === '';

  // alternatively for "no value":
  // return !this.value;
}) 
```

* * *

选择*jquery*元素后，您可以添加您的类：

```
elements.addClass('error'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-19T12:10:16.533

要检查所有字段，这可能会有所帮助。

```
$('#sender_container [required]').each(function(index)
{
       if (!($(this).val())) $(this).addClass('error');
}

}); 
```

# lucene - 如何索引 WEB TREC 集合？

> ID：10651350
> 
> 赞同：0
> 
> 时间：2012-05-18T10:57:13.050
> 
> 标签：lucene, information-retrieval

我通过自己下载和解析html页面构建了一个WEB TREC集合。每个 TREC 文件都包含一个类别字段。如何使用 Lucene 构建索引以便在该集合中执行搜索？这个想法是这个搜索，而不是返回文档作为结果，它可以返回类别。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:21:42.060

这应该是一个相对简单的任务，因为它们是 HTML 格式的。因此，您可以在 Lucene 中对它们进行索引（基于 Java 的伪代码）

```
foreach(file in htmlfiles)
{
 Document d = new Document();
 d.add(new Field("Category", GetCategoryName(...), Field.Store.YES,  Field.Index.NOT_ANALYZED));
d.add(new Field("Contents", GetContents(...), Field.Store.YES, Field.Index.ANALYZED));

writer.addDocument(d);
writer.close();
} 
```

GetCategoryName = 应该返回类别字符串和 GetContents(...) 相应 HTML 文件的内容。从标签中解析出 HTML 内容是个好主意，有几种方法可以做到这一点。[HtmlParser](http://sourceforge.net/projects/htmlparser/)是其中之一。

当您搜索时，搜索内容字段并遍历您的搜索结果以收集您的类别。

如果您想获得附有计数（“方面”）的类别列表，请查看分面搜索。Solr 是使用 Lucene 构建的搜索服务器，开箱即用。

# .htaccess - 2 个域，htaccess 将一个重定向到 index.html 而不是另一个

> ID：10651354
> 
> 赞同：0
> 
> 时间：2012-05-18T10:57:28.370
> 
> 标签：.htaccess

我正在一个有 2 个域指向同一个 public_html 文件夹的站点上工作。

服务器服务器 index.html 默认情况下。我的代码使用 htaccess 将所有调用路由到 index.php，但我现在只希望开发 URL 发生这种情况，而不是实时 URL。

我尝试将 live.com 和 www.live.com 路由到 www.live/index.html - 但我得到一个重定向循环，因为如果 index.html 在 URL 中，我不知道如何让它中断。

任何人都可以帮忙吗？

我试过了：

```
# Disable live domain
RewriteCond %{HTTP_HOST} ^live.com$ [OR]
RewriteCond %{HTTP_HOST} ^www.live.com$
RewriteRule (.*)$ http://www.live.com/index.html [L] 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:20:33.830

```
# Disable live domain
RewriteBase /
RewriteCond %{HTTP_HOST} ^(www\.)?live\.com$
RewriteCond $1 !^index\.html
RewriteRule ^(.*)$ http://www.live.com/index.html [L] 
```

# java - 我尝试在 alfresco sdk 3.4 的帮助下使用 java 与 alfresco 建立连接

> ID：10651355
> 
> 赞同：-2
> 
> 时间：2012-05-18T10:57:32.080
> 
> 标签：java, alfresco

我正在尝试将 alfresco sdk 3.4 实现到 java。我根据 alfrescofourm 给出的文档进行了所有更改。这样做之后，我得到了这个错误。请告诉我哪里出错了。

```
 Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'RepoServerMgmt' defined in class path resource [alfresco/core-services-context.xml]: Cannot resolve reference to bean 'transactionService' while setting bean property 'transactionService'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionService' defined in class path resource [alfresco/core-services-context.xml]: Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in class path resource [alfresco/hibernate-context.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [alfresco/hibernate-context.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Hibernate Dialect must be explicitly set
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1305)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1067)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:511)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:450)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:290)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:287)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:189)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:557)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:842)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:416)
        at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
        at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:93)
        at org.alfresco.util.BaseApplicationContextHelper.getApplicationContext(BaseApplicationContextHelper.java:67)
        at org.alfresco.util.ApplicationContextHelper.getApplicationContext(ApplicationContextHelper.java:46)
        at org.alfresco.sample.FirstFoundationClient.main(FirstFoundationClient.java:63)
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionService' defined in class path resource [alfresco/core-services-context.xml]: Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in class path resource [alfresco/hibernate-context.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [alfresco/hibernate-context.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Hibernate Dialect must be explicitly set
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1305)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1067)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:511)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:450)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:290)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:287)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:189)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
        ... 17 more
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in class path resource [alfresco/hibernate-context.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [alfresco/hibernate-context.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Hibernate Dialect must be explicitly set
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1305)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1067)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:511)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:450)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:290)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:287)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:189)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
        ... 27 more
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [alfresco/hibernate-context.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Hibernate Dialect must be explicitly set
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1401)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:512)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:450)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:290)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:287)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:189)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
        ... 37 more
    Caused by: org.hibernate.HibernateException: Hibernate Dialect must be explicitly set
        at org.hibernate.dialect.DialectFactory.determineDialect(DialectFactory.java:59)
        at org.hibernate.dialect.DialectFactory.buildDialect(DialectFactory.java:39)
        at org.hibernate.cfg.SettingsFactory.determineDialect(SettingsFactory.java:426)
        at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:128)
        at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2073)
        at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1298)
        at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:855)
        at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:774)
        at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1460)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1398)
        ... 44 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T14:11:37.157

当您运行 FirstFoundationClient 时，您正在执行一个 Java 程序，该程序在同一进程中运行 Alfresco 服务器。当该程序启动存储库时，它需要了解有关您的存储库配置的信息。它通过读取 alfresco-global.properties 文件来做到这一点。在该文件中，您会看到 dir.root 之类的内容，它指向本地文件系统上的索引和内容所在的目录，并且您会看到一组 db.driver 和 db.url 属性。您的错误日志似乎表明您没有正确设置 db.driver 和 db.url。例如，如果您使用的是 MySQL，请确保取消注释以下内容：

```
db.driver=org.gjt.mm.mysql.Driver
db.url=jdbc:mysql://localhost/alfresco 
```

如果您已经在 Tomcat 中运行了一个正在运行的 Alfresco 存储库，您可能需要获取已证明可以工作的 alfresco-global.properties 文件并将其复制到 FirstFoundationClient Eclipse 项目的源文件夹中，然后重试。从 Eclipse 运行此示例时，请确保您的 Tomcat 未运行。

# c++ - 重复的符号_main

> ID：10651363
> 
> 赞同：2
> 
> 时间：2012-05-18T10:58:01.787
> 
> 标签：c++, xcode

我一直在寻找解决这个问题的方法，但它们对我不起作用！我在编译程序时遇到了很多问题。当我试图在 Xcode 中执行程序时出现：

> /Users/LauraChaparro/Library/Developer/Xcode/DerivedData/Busqueda-ercduihvfosqcoczkrgljkkmgxam/Build/Intermediates/Busqueda.build/Debug/Busqueda.build/Objects-normal/x86_64/Uno.o 和 /Users/LauraChaparro/ 中的重复符号 _main用于架构 x86_64 的库/开发人员/Xcode/DerivedData/Busqueda-ercduihvfosqcoczkrgljkkmgxam/Build/Intermediates/Busqueda.build/Debug/Busqueda.build/Objects-normal/x86_64/main.o

我不明白为什么会这样！是一个 C++ 项目......或者如果你能推荐我另一个 IDE，我将非常感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T11:00:12.723

看起来您正在`main`一些用于制作`Uno.o`目标文件的代码中定义 a 。你只能有一个`main`，所以用于构建库的对象不应该定义一个`main`. 这应该只在应用程序本身中定义。

这是一个链接器错误，您可能会在使用其他 IDE 时遇到它。您需要找到定义`Uno.o`的位置`main`并将其删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T11:20:33.017

您遇到的错误是**链接器错误**。它准确地告诉你出了什么问题。链接器发现它可以在多次查看目标文件时找到定义的符号 *_main*。这使得链接器无法创建目标文件的可执行文件，因为它无法告诉您要使用哪个符号。它继续告诉你它在哪里找到了这两个符号。

一旦进入 Uno.o 文件（我将假设来自编译 Uno.cpp 文件），另一个来自 main.o 文件（来自 main.cpp 文件）

这意味着，链接器可以以某种方式在两个文件中找到 main 方法的符号。

这可能通过以下方式发生：

*   *在*Uno.cpp 和 main.cpp中定义一个**主**函数
**   在头文件中放置了*非内联* **主**定义并将其包含在 Uno.cpp 文件和 main.cpp 文件中（或包含另一个包含的包含等等。）*

 *作为您对另一个 IDE 的请求，我想提醒您，编译器错误或链接器错误都不是 IDE 中的错误，在绝大多数情况下，问题是 IDE 的用户做错了什么。*

# http - 增量http直播

> ID：10651369
> 
> 赞同：0
> 
> 时间：2012-05-18T10:58:22.190
> 
> 标签：http, video, streaming, http-live-streaming

我寻求将 http 实时流媒体标准与视频一起使用。我想在用户使用我们的应用程序时消除任何延迟，但当前架构需要使用任何新的或删除的视频剪辑对音频进行完全编码。

是否有http直播流的增量编码方法，以便我可以

1.  将音轨分开，但与视频流无缝播放

2.  与重新编码整个视频相比，允许 .ts 块被独立编码并流回用户更快

参考资料： [https ://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming](https://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming)

[https://developer.apple.com/streaming/](https://developer.apple.com/streaming/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:35:21.930

您可以相当轻松地重新编码所需的片段——无需在播放之前对整个流进行编码（否则将无法进行现场直播）。如果您希望它真正无缝，则必须小心 TS 数据包中的时间戳。但最简单的方法是`EXT-X-DISCONTINUITY`在重新创建的部分周围使用标记。

至于音频，无需重新编码。您应该能够将编码的音频从一个 TS 容器复制到另一个容器。例如，如果您使用的是 ffmpeg，您将使用`-acodec copy`从原始 ts 中获取它。

# iphone - 推送通知数据检索

> ID：10651383
> 
> 赞同：5
> 
> 时间：2012-05-18T10:59:14.970
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

我想从推送通知消息中获取数据。当应用程序在前台和后台时，我成功获取了数据。但是当应用程序退出并且用户在推送通知上按下查看按钮时，我无法获取数据。我在应用程序中编写的代码确实完成了启动。当按下推送通知消息的查看按钮时，此代码会导致应用程序崩溃。如果我评论代码，那么应用程序不会崩溃。当应用程序退出并且用户按下推送通知上的查看按钮时，请帮助我从推送通知中获取数据。我会很感激的。

```
if(launchOptions != nil){
        NSDictionary *tmpDic = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
        if (tmpDic!=nil) {
            pushedMessage=[NSString stringWithFormat:@"%@",[[tmpDic objectForKey:@"aps"] objectForKey:@"alert"]];
            pushedCountry=[NSString stringWithFormat:@"%@",[tmpDic objectForKey:@"country"]];
            [self saveToDatabase];
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-21T07:32:24.963

请试试这个...

将此代码添加到 appdelegate.m => didFinishLaunchingWithOptions

```
if ([launchOptions valueForKey:@"UIApplicationLaunchOptionsRemoteNotificationKey"]) {

    [self application:application didReceiveRemoteNotification:launchOptions[UIApplicationLaunchOptionsRemoteNotificationKey]];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-08T11:39:37.363

从 ios7 开始，我们有以下委托方法来处理应用程序在后台或未运行时的推送通知

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo fetchCompletionHandler:(void (^)(UIBackgroundFetchResult result))handler 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T13:02:07.387

我不完全理解您的要求，但是您可以使用应用程序委托中的功能来处理正在推送的内容

```
- (void)application:(UIApplication*)application didReceiveRemoteNotification: 
(NSDictionary*)userInfo
{
NSLog(@"Received notification: %@", userInfo);
[self addMessageFromRemoteNotification:userInfo updateUI:YES];
} 
```

现在您可以将该数据添加到核心数据或 sqlite。这可能与您的问题无关，但根据您在问题中提出的问题，这是我能给出的最好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T11:50:44.303

当您单击查看按钮时

```
- (void)application:(UIApplication*)application didReceiveRemoteNotification:      (NSDictionary*)userInfo
{
} 
```

调用此方法，**用户信息** 将包含所有数据

您在**didfinishlaunch**方法中所做的事情在 didReceiveRemoteNotification 中执行**：**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-28T05:06:42.010

请参阅我对上述答案的评论。

这是Apple的文档：

> 如果推送通知到达时应用程序未运行，则该方法将启动应用程序并在启动选项字典中提供适当的信息。该应用程序不会调用此方法来处理该推送通知。相反，您的 application:willFinishLaunchingWithOptions: 或 application:didFinishLaunchingWithOptions: 方法的实现需要获取推送通知有效负载数据并做出适当的响应。

所以你需要实现：

```
- (void)application:(UIApplication*)application didReceiveRemoteNotification: 
(NSDictionary*)userInfo 
```

以及在以下位置处理启动选项：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

# php - 如何使用 Ajax Json PHP & MySQL 应用排序和过滤

> ID：10651387
> 
> 赞同：0
> 
> 时间：2012-05-18T10:59:28.713
> 
> 标签：php, javascript, html, ajax, json

嗨，我是一个初学者，我在软件网站上工作。我已经为网站构建了所有页面和布局，这些页面和布局仅使用 HTML CSS 和 JAVASCRIPT 就很容易完成，剩下的就是为不同的软件制作主要类别页面，这对我来说很难。

我想在这样的**类别**页面上添加**排序**选项[（请参阅此处）](http://download.cnet.com/windows/antivirus-software/?tag=rb_content;main) ，用户应该**能够根据日期、名称、添加日期等对软件进行排序**。并且还能够控制 **软件的最大显示数量，如 20、30、100 等**。

 ******在我的 HTML 页面上，我有这些**div**，我想在其中显示来自**表**“internet_security”（它是一个测试表）的**MySQL 数据库**“security_software”（它是一个测试数据库）的数据（不同的软件）

 ****HTML div 的**

> ```
>  <div class="category-container">
>     <div class="category-image"></div>
>     <div class="category-desc"><a href="#">#</a><p>text</p></div>
>     <div class="rating5" >Editors' rating: </div>
>     <div class="category-download-btn"><a href="#">Download</a></div>
>     <div class="category-buy-btn"><a href="#">Buy</a></div>
>   </div> 
> ```

经过一些研究，我得到了使用 JSON AJAX PHP &MySQL 的解决方案

**我有 JAVASCRIPT 代码**

```
<head>    
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$.ajax({
    url: 'ajax.php',
    dataType: 'json',
    success: function(response){
        data = '';
        $.each(response,function(i,val){
          data = '<div class="category-image">'+val.image+'</div>'+
        '<div class="category-link"><a href="#">'+val.id+'</a></div>'+
        '<div class="category-desc"><p>'+val.description+'</p> </div>'+
        '<div class="rating5" >'+val.rating+'</div>'+ 
        '<div class="category-download-btn"><a href="'+val.download+'">Download</a></div>'+ 
        '<div class="category-buy-btn"><a href="'+val.buy+'">Buy</a></div>';
        $('<div>').attr('id',i).html(data).appendTo('#response');
    });

    }
 });
</script>
</head>
 <body>
<div id='response'></div>   
 </body> 
```

**我有 PHP 代码**

```
<?php
$q=$_GET["q"]; 

$con = mysql_connect('localhost', 'root', '');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("security_software", $con);

$sql="SELECT * FROM internet_security ORDER by `".$q."` DESC" ;

$result = mysql_query($sql);
$response = array();
$i=0;
while($row = mysql_fetch_array($result))
  {
  $response[$i]['id']           =$row['id'];
  $response[$i]['title']        = $row['title'];
  $response[$i]['image']        = $row['image'];
  $response[$i]['description']  = $row['description'];
  $response[$i]['rating']       = $row['rating'];
  $response[$i]['download']     = $row['download'];  
  $response[$i]['buy']          = $row['buy'];
  $i++;
  }
mysql_close($con); 

echo json_encode($response);
?> 
```

**现在它根本不起作用，因为我没有任何地方可以在我拥有的 javascript 中附加这些代码（类别下拉列表）。**

```
<form>
<select name="users" onchange="showUser(this.value)">
<option value="">Select a person:</option>
<option value="id">id</option>
<option value="title">title</option>
<option value="image">image</option>
<option value="description">description</option>
<option value="description">rating</option>
<option value="download">download</option>
<option value="buy">buy</option>
</select>
</form> 
```

请帮帮我，我在哪里可以附加这些代码以及如何让它工作，我完全糊涂了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:34:42.347

首先值得注意的是，如果您要显示表格数据...使用表格！它会让你的事情变得容易得多。

第二。构建您的代码和表，就好像 Ajax 不存在一样。最初使用 PHP 在显示数据的页面上填充数据。然后，连接列标题，以便它们链接到您的页面，但传递您要排序的列以及哪个方向。

IE

```
<?
    $column = (isset($_GET["column"]) ? $_GET["column"] : 'id'); 
    $direction = (isset($_GET['direction']) ? $_GET['direction'] : 'asc');
    $con = mysql_connect('localhost', 'root', '');
    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("security_software", $con);
    $sql="SELECT * FROM internet_security ORDER by '".$column."' " . $direction;

    $result = mysql_query($sql);
    $response = array();
    $i=0;
    while($row = mysql_fetch_array($result))
    {
        $response[$i]['id']           =$row['id'];
        $response[$i]['title']        = $row['title'];
        $response[$i]['image']        = $row['image'];
        $response[$i]['description']  = $row['description'];
        $response[$i]['rating']       = $row['rating'];
        $response[$i]['download']     = $row['download'];  
        $response[$i]['buy']          = $row['buy'];
        $i++;
    }
    mysql_close($con); 
?>

<div id="content">
    <table>
        <thead>
            <tr>
                <td><a href="table.php?column=id<?= (isset($_GET['column']) && $_GET['column'] == 'id' && !isset($_GET['direction']) ? '&direction=desc' : ''); ?>">ID</a></td>
                <td><a href="table.php?column=title<?= (isset($_GET['column']) && $_GET['column'] == 'title' && !isset($_GET['direction']) ? '&direction=desc' : ''); ?>">Title</a></td>
                <td><a href="table.php?column=rating<?= (isset($_GET['column']) && $_GET['column'] == 'rating' && !isset($_GET['direction']) ? '&direction=desc' : ''); ?>">Rating</a></td>
                <td><a href="table.php?column=download<?= (isset($_GET['column']) && $_GET['column'] == 'download' && !isset($_GET['direction']) ? '&direction=desc' : ''); ?>">Download</a></td>
            </tr>
        </thead>
        <tbody>
            <? foreach($response as $i => $row) : ?>
            <tr>
                <td><?= $row['id']; ?></td>
                <td><?= $row['title']; ?></td>
                <td><?= $row['rating']; ?></td>
                <td><?= $row['download']; ?></td>
            </tr>
            <? endforeach; ?>
        </tbody>
    </table>
</div> 
```

上面的代码将放在一个单独的 PHP 文件中，没有任何其他 HTML 等。然后，在要显示此表的页面上，您只需`<? include('path-to-file.php'); ?>`包含它。

最后......在您显示表格的页面顶部，您可以输入：

```
<?
    if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest')
    {
        include('path-to-file.php');
        die();
    }
?> 
```

然后，上面的代码将检测 Ajax 请求并仅以新顺序为包含数据的表提供服务。

然后，您需要使用 Javascript 通过新的 HTML 替换表格

```
$('#content table thead a').live('click', function(e)
{
    e.preventDefault();
    $.ajax(
    {
        url : $(this).attr('href'),
        success : function(resp)
        {
            $('#content').html($(resp).html());
        },
        error : function()
        {
            alert('There was a problem sorting your table...');
        }
    });
}); 
```

`resp`包含您的 Ajax 响应的变量在哪里。

注意：这只是处理这种情况的一种非常简单粗暴（哦，未经测试）的方法。您需要自己改进它以防止任何与安全相关的问题，例如 SQL 注入。********

# c++ - 调试版本的编译速度比发布版本慢得多

> ID：10651388
> 
> 赞同：5
> 
> 时间：2012-05-18T10:59:31.790
> 
> 标签：c++, visual-studio, build

在 Visual Studio 2005 下，我们有一个包含 195 个 cpp 文件的库，构建发布大约需要 2 分钟，而调试构建大约需要 6 分钟。

由于优化，我一直认为发布版本应该需要更长的时间。为什么调试版本会比发布时间长这么多？有没有办法让我们的调试构建速度与发布一样快？

我们确实有大量的 boost/stl 代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T11:19:15.367

最佳猜测：调试版本受 I/O 限制，而发布版本受处理器限制（在这种情况下）。

我们已经对我们的构建系统进行了广泛的基准测试——许多大型项目，一些小型项目。`DEBUG`构建写出大量`*.pdb`信息，更大的文件`*.obj`（用于额外的调试信息）等。结果是大量更多的磁盘活动。如果您的源代码中有很多“文字”（表格、符号、字符串文字）等，这一点会更加突出。

相比之下，`RELEASE`构建会写出*小得多*的`*.obj`文件，并且不会费心编写“调试”数据库（如果您`RELEASE`使用典型的开关进行编译）。但是，`RELEASE`构建中的链接器必须进行优化和其他更多的工作，而这些工作在`DEBUG`. `RELEASE`如果您使用最具挑战性的链接器开关“编译以最大化速度/大小”，这将进一步受到时间惩罚。

（但是，是的，`RELEASE`构建仍然必须 I/O update-the-addresses in the executable-being-built-on-disk，但由于`RELEASE`构建中的可执行文件要小得多，因此您的分页要少得多，所以 I/构建中的O 惩罚`RELEASE`不如`DEBUG`构建中的多。）

您正在观察 3 倍的“`RELEASE`比`DEBUG`”更贵。这对于一些 I/O 绑定的项目来说是正确的，这些项目有很多模板、许多符号和文字等。检查你的驱动器——它们是否已满，或者只是“慢速驱动器”，和/或有一些坏扇区? 这些会使构建变得更糟（更慢）`DEBUG`。

是的，其他构建应该是相反的，“`RELEASE`比 3x 贵`DEBUG`”。这些构建是处理器/链接器绑定的，而不是 I/O 绑定的。

**[更新]**，我在问题评论中看到这是针对“静态库，无链接”的。对于 I/O 的时间惩罚（大量磁盘活动，没有链接），并且没有处理器惩罚（因为没有进行优化），这几乎是最坏的情况。所以，如果你有一个 3 倍的“ `DEBUG`-is-s-slower-than- `RELEASE`”，这可能是它所能得到的最糟糕的（对于这个项目），这不是非典型的。添加链接选项时，`RELEASE`速度会变慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T13:30:27.813

我将把starbolin 的评论放在这里作为**答案：苹果和橙子**。charley 对 I/O 受限的猜测似乎与我为调试编写的 600MB 和用于发布的 300MB 的 Process Monitor 计算不相符。也就是说，写入额外的 300MB 需要几秒钟，而不是 4 分钟。因此，我得出结论，Debug 和 Release 版本之间可能只有一堆不同的东西。尽管优化应该比不优化花费更长的时间，但这些其他仅调试活动必须花费更多时间。很高兴看到调试和发布的确切时间细分，但很明显它们是完全不同的过程，调试只需要更长的时间，至少对于 Visual Studio 2005 和我进行基准测试的项目。

# jquery - 如何替换所有下拉列表元素中的某些单词

> ID：10651390
> 
> 赞同：1
> 
> 时间：2012-05-18T10:59:42.073
> 
> 标签：jquery, replace

我有以下下拉列表：

```
 <select id="dropdown">
      <option value="AB">Alberta Standards</option>
      <option value="BC">British Columbia Standards</option>
 </select> 
```

试图在不改变其他任何东西的情况下改变课程标准。

这就是我所拥有的：

```
$('#dropdown option').filter(function() { return /Standards/.text($(this).text());}).text('Curriculum'); 
```

但这取代了课程的一切！有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:08:51.987

Hiya**工作演示** [http://jsfiddle.net/fppeZ/](http://jsfiddle.net/fppeZ/) **或** [http://jsfiddle.net/fppeZ/1/](http://jsfiddle.net/fppeZ/1/)

好读：[http ://www.regular-expressions.info/wordboundaries.html](http://www.regular-expressions.info/wordboundaries.html)

> 元字符 \b 是类似于插入符号和美元符号的锚。它在称为“单词边界”的位置匹配。这个匹配是零长度的。
> 
> 有资格作为单词边界的三个不同位置：
> 
> *   在字符串的第一个字符之前，如果第一个字符是单词字符。
>     
>     
> *   在字符串的最后一个字符之后，如果最后一个字符是单词字符。
>     
>     
> *   在字符串中的两个字符之间，其中一个是单词字符，另一个不是单词字符....

希望这可以帮助，

**jQuery代码**

```
$('#dropdown option').each(function() {

     $(this).text($(this).html().replace(/\bStandards\b/g, 'Curriculum'));
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:02:56.683

改用这个

```
$('#dropdown option').each(function() {
    $(this).text($(this).text().replace( /Standards/gi, 'Curriculum'));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:04:49.227

```
$('#dropdown option').each(function() {
    $(this).text($(this).text().replace(/Standards/g, 'Curriculum'));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T11:05:17.017

您的过滤器功能查找包含文本“标准”的元素，然后替换它们的文本
，而不是您可以使用

```
$('#dropdown option').each(function(i,v){
  $(v).text().replace( /Standards/gi, 'Curriculum');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T11:06:13.660

只需使用`each`：

```
$("#dropdown option").each(function () {
    $(this).text($(this).text().replace("Standards", "Curriculum")​​​​​​​​​​​​​​​​​​);
​​​​​​}); 
```

​</p>

# android - Hudson Android多配置测试项目找不到测试结果——“没有找到测试报告文件。配置错误？”

> ID：10651392
> 
> 赞同：2
> 
> 时间：2012-05-18T10:59:43.837
> 
> 标签：android, testing, hudson

我有已集成到 Hudson 中的 android 测试项目。我创建了一个具有以下设置的自由风格软件项目： 1.**源代码管理**- 自定义工作区 2.**在构建期间运行 Android 模拟器**： * Android OS 版本：4.0.3 * 屏幕密度：240 * 屏幕分辨率：WVGA * 设备语言环境：en_US * SD 卡大小：16M 3.**调用 Ant**：目标：all clean emma debug install test 构建文件：workspace/Project/build.xml 4.**构建后操作** * 归档工件：**/*test-TEST .xml * 发布 JUnit 测试结果报告：**/*test-TEST.xml * 记录 Emma 覆盖率报告：**/coverage.xml * 记录文件指纹以跟踪使用情况：**/*test-TEST.xml 这是构建.xml 文件部分涵盖了我的 ant 目标：

```
 <!-- version-tag: custom -->
    <target name="test" depends="-test-project-check"
                description="Runs tests from the package defined in test.package property">

        <property name="tested.project.absolute.dir" location="${tested.project.dir}" />

        <property name="test.runner" value="android.test.InstrumentationTestRunner" />

        <!-- Application package of the tested project extracted from its manifest file -->
        <xpath input="${tested.project.absolute.dir}/AndroidManifest.xml"
                expression="/manifest/@package" output="tested.manifest.package" />
        <xpath input="AndroidManifest.xml"
                expression="/manifest/@package" output="manifest.package" />

        <property name="emma.dump.file"
                value="/data/data/${tested.manifest.package}/coverage.ec" />

        <if condition="${emma.enabled}">
            <then>
                <echo>WARNING: Code Coverage is currently only supported on the emulator and rooted devices.</echo>
                <run-tests-helper emma.enabled="true">
                    <extra-instrument-args>
                        <arg value="-e" />
                           <arg value="coverageFile" />
                           <arg value="${emma.dump.file}" />
                    </extra-instrument-args>
                </run-tests-helper>
                <echo>Downloading coverage file into project directory...</echo>
                <exec executable="${adb}" failonerror="true">
                    <arg line="${adb.device.arg}" />
                    <arg value="pull" />
                    <arg value="${emma.dump.file}" />
                    <arg value="coverage.ec" />
                </exec>
                <echo>Extracting coverage report...</echo>
                <emma>
                    <report sourcepath="${tested.project.absolute.dir}/${source.dir}"
                                      verbosity="${verbosity}">
                        <!-- TODO: report.dir or something like should be introduced if necessary -->
                        <infileset dir=".">
                            <include name="coverage.ec" />
                            <include name="coverage.em" />
                        </infileset>
                        <!-- TODO: reports in other, indicated by user formats -->
                        <html outfile="${basedir}/coverage/coverage.html" />
                        <xml outfile="${basedir}/coverage/coverage.xml" />
                   </report>
                </emma>
                <echo>Cleaning up temporary files...</echo>
                <delete file="coverage.ec" />
                <delete file="coverage.em" />
                <echo>Saving the report file in ${basedir}/coverage/coverage.html</echo>
            </then>
            <else>
                <run-tests-helper />
            </else>
        </if>
        <mkdir dir="${basedir}/junit-results" />
        <echo>Base dir is ${basedir}</echo>
        <exec executable="${adb}" failonerror="true" dir="${basedir}/junit-results">
            <arg line="${adb.device.arg}" />
            <arg value="pull" />
            <arg value="/data/data/${tested.manifest.package}/files/" />
        </exec>
    </target>    
    <import file="${sdk.dir}/tools/ant/build.xml" />

</project> 
```

现在，这个项目工作正常，我得到了 emma 覆盖率和测试结果，但是当我用相同的选项配置多配置项目时，除了 android 模拟器，我用 os、密度和屏幕分辨率设置了不同的变量，我被一个卡住了错误 -

```
test:
     [echo] WARNING: Code Coverage is currently only supported on the emulator and rooted devices.
     [echo] Running tests ...
     [exec] 
     [exec] com.mobclix.android.externaltestharness.test.UnitActivityTest:.
     [exec] Test results for PolideaInstrumentationTestRunner=.
     [exec] Time: 25.122
     [exec] 
     [exec] OK (1 test)
     [exec] 
     [exec] 
     [exec] Generated code coverage data to /data/data/com.mobclix.android.externaltestharness/coverage.ec
     [echo] Downloading coverage file into project directory...
     [exec] 355 KB/s (2043 bytes in 0.005s)
     [echo] Extracting coverage report...
     [echo] Cleaning up temporary files...
   [delete] Deleting: /Users/biercoff/Work/Workspace/HarnessExternalTest/coverage.ec
   [delete] Deleting: /Users/biercoff/Work/Workspace/HarnessExternalTest/coverage.em
     [echo] Saving the report file in /Users/biercoff/Work/Workspace/HarnessExternalTest/coverage/coverage.html
     [echo] Base dir is /Users/biercoff/Work/Workspace/HarnessExternalTest
     [exec] pull: building file list...
     [exec] pull: /data/data/com.mobclix.android.externaltestharness/files/com.mobclix.android.externaltestharness.test-TEST.xml -> ./com.mobclix.android.externaltestharness.test-TEST.xml
     [exec] 1 file pulled. 0 files skipped.
     [exec] 40 KB/s (499 bytes in 0.012s)

BUILD SUCCESSFUL
Total time: 1 minute 20 seconds
$ /Users/biercoff/.hudson/tools/android-sdk/platform-tools/adb disconnect localhost:53830
[android] Stopping Android emulator
[android] Archiving emulator log
$ /Users/biercoff/.hudson/tools/android-sdk/platform-tools/adb kill-server
Recording fingerprints
Recording test results
No test report files were found. Configuration error?
Archiving artifacts
Description set: 
Emma: looking for coverage reports in the provided path: /Users/biercoff/Work/Workspace/HarnessExternalTest/coverage/coverage.xml
Emma: found 1 report files: 
          /Users/biercoff/Work/Workspace/HarnessExternalTest/coverage/coverage.xml
Emma: stored 1 report files in the build folder: /Users/biercoff/.hudson/jobs/MulitTestHarnessProject/configurations/axis-density/240/axis-os/4.0.3/axis-resolution/WVGA/builds/2012-05-18_17-26-05/emma
Emma: Coverage: Classes 21/39 (54%). Methods 40/128 (31%). Blocks 833/2928 (28%). Lines 154.5/528 (29%). 
[DEBUG] Skipping watched dependency update for build: MulitTestHarnessProject/density=240,os=4.0.3,resolution 
```

对于 emma 覆盖率，我不得不将 Hudson 中的路径更改为 /Users/biercoff/Work/Workspace/HarnessExternalTest/coverage/coverage.xml 以使其工作，但是当我尝试对 Junit 测试结果做同样的事情时，Hudson 拒绝“看见。文件位于 junit-results 文件夹下的项目文件夹中，但每次我运行新构建时，我都会得到相同的*没有找到测试报告文件。配置错误？*错误信息。尝试了许多变化，但没有运气。我可能错过了一些非常小的东西。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:19:16.867

Hudson 搜索与其工作区相关的 jUnit 测试结果。而且您无法指定绝对路径（我已经使用 Hudson/Jenkins 一年多了，但仍然不确定为什么不这样做）。因此，在您的情况下，它只查看目录级别比工作区更深的内容。现在，对于多配置项目，工作区不是从顶层开始，而是更深入 - 它包括轴名称（例如：）`workspace_root/AXIS1_NAME/AXIS1_VAL...`。但是您的测试位于该工作区*的目录树上*。您必须在构建步骤中*复制*`${WORKSPACE}`它们，然后 Hudson 才能发布它们。

# cakephp - CakePHP - 无法重新声明类

> ID：10651397
> 
> 赞同：0
> 
> 时间：2012-05-18T10:59:57.440
> 
> 标签：cakephp, components, require, fatal-error, redeclare

我有一个简单的类，已添加到名为 mixpanel.php 的组件文件夹中。文件内是：

```
<?php
class MetricsTracker {
    public $token;
    public $host = 'http://api.mixpanel.com/';
    public function __construct($token_string) {
        $this->token = $token_string;
    }
    function track($event, $properties=array()) {
        $params = array(
            'event' => $event,
            'properties' => $properties
            );

        if (!isset($params['properties']['token'])){
            $params['properties']['token'] = $this->token;
        }
        $url = $this->host . 'track/?data=' . base64_encode(json_encode($params));
        //you still need to run as a background process
        exec("curl '" . $url . "' >/dev/null 2>&1 &"); 
    }
}
?> 
```

在 users_controller.php 我做：

```
require 'components/mixpanel.php'; 
```

但是我收到一个错误：

致命错误：无法在第 11 行的 /Users/Hooman/Sites/askedout/app/controllers/components/mixpanel.php 中重新声明类 MetricsTracker

为什么会这样？我用不同的 php 类做同样的事情，它工作正常。这对我来说很奇怪，因为我没有在任何地方重复 require 定义。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:10:06.117

在您的组件代码中，请从

`class MetricsTracker`到

```
class MetricsTracker extends Object 
```

在您的控制器代码中，请添加以下代码：

```
var $components=array('MetricsTracker'); 
```

而不是使用`require()`函数

# java - 为什么这个语句被认为是原子的？

> ID：10651398
> 
> 赞同：2
> 
> 时间：2012-05-18T11:00:00.090
> 
> 标签：java, concurrency, atomic

我有一个需要澄清的并发程序。第一个程序被认为是原子的，而第二个不是。

**注意：**这里的`//`注释并不意味着它 - 它们的意思是它是另一个与另一个同时执行的进程。

这是第一个：

```
int x = 0, y = 0;

co
   x = y + 1;      // y = y + 1;
oc 
```

上面的程序可以被认为是原子的——但我不明白为什么会这样。但是下一个程序不是。

```
int x = 0, y = 0;

co
   x = y + 1;      // y = x + 1;
oc 
```

我知道原子动作是一种编程指令，它可以不可分割地改变计算机系统的状态，也知道从寄存器加载和存储值是典型的原子动作。那么上面发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T11:10:49.010

在您的第一种情况下，您总是会`y`在增量之前或之后遇到。由于操作是异步的，您无法分辨哪个，但它没有任何区别 - 唯一可观察到的效果是`x`在一种情况下大于 1 而不是另一种情况，这可能是基于两者的排序发生的陈述。

在第二种情况下，您可能会遇到 x 和 y 的结果值与语句的任一顺序不一致的情况，因为 x 和 y 在任一被修改之前都已获取。

第一种情况实际上并不是 Java 对“原子”的定义（并且与编译器可能生成的任何“原子”指令无关），而是简单的编程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:08:16.750

请注意以下事实：

示例 1\. var`x`不是共享的，只是`y`共享的。左线程严格来说是`y`读，右线程是写`y`。由于单个读取或写入操作是原子的，因此不存在竞争条件。

示例 2\. 两个 var 都是共享的；仅这一事实就会使操作成为非原子操作，但由于读取和写入的相互依赖性，这更加复杂。左线程：读后`y`跟写`x`，右线程：读后`x`跟写`y`。这些操作可以按任何顺序交错；甚至与程序顺序不兼容的顺序也是可能的。

在第一个示例中，任何执行最终都会得到可以解释为`x = y + 1;`之前执行`y = y + 1;`或反之亦然的结果。第二个结果可能与这些解释中的任何一个都不兼容——这就是为什么操作不是原子的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:15:33.953

就线程而言，大多数是原子的，这意味着在另一个线程可以访问之前，需要完全访问并执行一个语句块。就像这样

x= x+1 ;

现在当一个tread正在访问变量x来读写它的值时，如果其他线程也尝试读写它，那么由于不幸的时间（称为Race Condition）会导致问题，比如线程A读取变量x的值，这可能是0，当时线程 B 读取并将值写入 x 为 1，现在当线程 A 将值写入 x 时，x 也将为 1，因为线程 A 知道 x 是 0，但实际上它是 1。

```
int x = 0, y = 0;

co
   x = y + 1;      // y = y + 1;
oc 
```

x 是原子的，y 值必须由同一个线程一次读取和写入，如果多个线程访问它，则会给出不一致的结果。

```
int x = 0, y = 0;

co
   x = y + 1;      // y = x + 1;
oc 
```

另一方面，这不是原子的，因为 x=y+1 不会影响 y=x+1 根据对 x 的 fetch 和 y 在这里完成。

# symfony - Symfony2开发环境如何显示404错误页面

> ID：10651403
> 
> 赞同：13
> 
> 时间：2012-05-18T11:00:16.647
> 
> 标签：symfony, development-environment

我想在开发环境中处理 404 页面。我使用此文件自定义 404：**app/Resources/TwigBundle/views/Exception/error.html.twig**

此产品网址正常工作：`mysite.com/404`

但是这个`mysite.com/app_dev.php/404`抛出一个 NotFoundHttpException 并给我开发调试页面。

是否可以显示错误页面而不是调试页面？

**更新：**

官方文档现在有一个章节：[Testing Error Pages during Development](http://symfony.com/doc/current/cookbook/controller/error_pages.html#testing-error-pages)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-07-30T06:34:45.567

要显示错误页面，在**web/app_dev.php 中将**第二个参数更改为`false`

```
$kernel = new AppKernel('dev', false); 
```

测试您需要的内容后，将其更改回来。

* * *

**更新**

感谢@user2019515 指出这一点 - 现在（2.3 及更高版本）在[Symfony 文档中有一个指向](http://symfony.com/doc/current/cookbook/controller/error_pages.html)[WebfactoryExeptionsBundle](https://github.com/webfactory/exceptions-bundle)的链接，我上面写的方法不应该被使用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-03-23T15:13:39.463

[从开发环境中的 Symfony2.6](http://symfony.com/blog/new-in-symfony-2-6-error-page-previews)开始，您可以使用以下路线：

```
/_error/404.html 
```

`404`要测试的错误代码和`html`请求的格式在哪里。为了能够使用此功能，请确保您的`routing_dev.yml`文件中有以下条目：

```
# app/config/routing_dev.yml
_errors:
    resource: "@TwigBundle/Resources/config/routing/errors.xml"
    prefix:   /_error 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-18T16:23:34.570

您需要在开发时覆盖 exception_full.html.twig 模板。

```
app/Resources/TwigBundle/views/Exception/exception_full.html.twig 
```

Symfony2 使用此模板在开发过程中为您提供尽可能多的调试信息。

当内核处于调试模式时，Symfony2 将使用 exception_full.html.twig，否则它将使用您覆盖的特定模板。

请参阅 vendor/symfony/src/Symfony/Bundle/TwigBundle/Controller/ExceptionController.php，特别是 showAction() 和 findTemplate() 函数以获取更多详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-17T15:03:31.903

您还可以将路由添加到您的**routing_dev.yml**文件

```
error404:
    path: /404
    defaults:
        _controller: FrameworkBundle:Template:template
        template:    TwigBundle:Exception:error404.html.twig

error500:
    path: /500
    defaults:
        _controller: FrameworkBundle:Template:template
        template:    TwigBundle:Exception:error500.html.twig 
```

# javascript - 使用 AJAX 动态更新谷歌地图

> ID：10651406
> 
> 赞同：0
> 
> 时间：2012-05-18T11:00:30.323
> 
> 标签：javascript, asp.net, ajax, google-maps

我的数据库中有很多地址，我想将它们作为标记添加到 Google 地图中。我只想加载和添加地图上选定区域中的标记。如果地图被缩放或拖动，它应该更新地图上的标记。我怎么做？

首先十分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:50:11.133

正如 Aristos 所说，标记将在对焦时自动显示。但是，如果我有无数的联系人，那么只有在需要时才这样做确实会更容易。

我的策略是：

*   跟踪您添加的地址 - 没有必要重复两次。

*   从地址中，获取 LatLng。

*   获取地图的当前边界（使用 getBounds() 获取当前显示的地图的最小/最大 LatLng）

*   检查地址的 LatLng 是否在边界内。

*   如果是，请添加标记。

环形

如果您确实有很多地址，您可能需要预取 LatLng 并将其存储在 SQL 表中。然后，您可以使用间隔查询表。

高温高压

**编辑：**一些代码。假设您有一个 Array() 标记，以及西北和东南边界，您可以这样做：

```
function filterMarkers(nw, se, myMarkers) {
  var north=nw.lat();
  var west=nw.lng();
  var south=se.lat();
  var east=se.lng();
  var isInsideBounds=[];
  for (var i in myMarkers) {
    if(myMarkers[i].position.lat()>=north && myMarkers[i].position.lat()=<south && myMarkers[i].position.lng()>=west && myMarkers[i].position.lng()=<east) {
      isInsideBounds.push(myMarkers[i]);
    }
  }
  return isInsideBounds;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:41:38.077

为了管理大量标记，您肯定希望利用已经构建的基础设施来执行此操作。实际上，Google Developers 博客上有一篇很棒的文章讨论了流行的选项。

[https://developers.google.com/maps/articles/toomanymarkers](https://developers.google.com/maps/articles/toomanymarkers)

Marker Clusterer 是一个非常常见的组件，当涉及到地图应用程序时，我到处都能看到它，并且似乎符合您正在寻找的要求。我还会看看 Fusion Tables，因为它使构建包含数千个位置的地图变得非常简单。

# ruby-on-rails - 如何在 Mac 上完全卸载 RVM、Ruby 和 Rails？

> ID：10651411
> 
> 赞同：0
> 
> 时间：2012-05-18T11:00:49.920
> 
> 标签：ruby-on-rails

我遇到了上述各种不同的问题，我想重新开始（没有重新安装操作系统）-如何删除 ruby​​、rails 和 rvm？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:02:15.600

只需删除*~/.rvm*并重新安装 RVM 即可：

```
curl https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer | bash -s stable 
```

# git - Git：带有前导减号的子模块

> ID：10651414
> 
> 赞同：0
> 
> 时间：2012-05-18T11:01:05.063
> 
> 标签：git, msysgit

我需要创建一个带有前导减号的子模块，因此使用 msysgit 1.7.10 执行以下命令：

```
mike@desktop /c/temp/git/repo1 (master)
$ git submodule add -- ../repo2 "- submodule"
The following path is ignored by one of your .gitignore files:
- submodule
Use -f if you really want to add it. 
```

好的，然后我尝试使用 force-option：

```
mike@desktop /c/temp/git/repo1 (master)
$ git submodule add -f -- ../repo2 "- submodule"
error: unknown switch ` '
usage: git clone [options] [--] <repo> [<dir>]

    -v, --verbose         be more verbose
    -q, --quiet           be more quiet
    --progress            force progress reporting
    -n, --no-checkout     don't create a checkout
    --bare                create a bare repository
    --mirror              create a mirror repository (implies bare)
    -l, --local           to clone from a local repository
    --no-hardlinks        don't use local hardlinks, always copy
    -s, --shared          setup as shared repository
    --recursive           initialize submodules in the clone
    --recurse-submodules  initialize submodules in the clone
    --template <template-directory>
                          directory from which templates will be used
    --reference <repo>    reference repository
    -o, --origin <name>   use <name> instead of 'origin' to track upstream
    -b, --branch <branch>
                          checkout <branch> instead of the remote's HEAD
    -u, --upload-pack <path>
                          path to git-upload-pack on the remote
    --depth <depth>       create a shallow clone of that depth
    --single-branch       clone only one branch, HEAD or --branch
    --separate-git-dir <gitdir>
                          separate git dir from working tree
    -c, --config <key=value>
                          set config inside the new repository

Clone of 'c:/temp/git/repo2' into submodule path '- submodule' failed 
```

奇怪，我调用`git submodule' and get an error about`了 git clone`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:23:07.843

这看起来像一个错误`git-submodule.sh`- 它调用：

```
git add $force "$sm_path" 
```

...这显然会失败，如`- submodule`. 它必须是：

```
git add $force -- "$sm_path" 
```

... 反而。但是，如果子模块路径看起来像一个选项，那么其他几个地方`git-submodule.sh`也会失败，因此修复并不简单。

我强烈建议您不要尝试使用以`-`.

# vbscript - VBScript减去十进制值

> ID：10651417
> 
> 赞同：0
> 
> 时间：2012-05-18T11:01:19.113
> 
> 标签：vbscript

vbscript 数学函数：FormatNumber

```
FormatNumber(4.33 - 4.28, 1, -2, -2, -2) //answer 0.0
FormatNumber(0.05, 1, -2, -2, -2)        //answer 0.1 
```

甚至

```
FormatNumber(cdbl(4.33) - cdbl(4.28), 1, -2, -2, -2) //answer 0.0 
```

但

```
FormatNumber(4.34 - 4.28,1,-2,-2,-2) //answer 0.1 
```

为什么它没有正确四舍五入？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:46:03.040

计算机中的浮点数只是数学（现实生活？）数字的近似值。

```
>> WScript.Echo (4.33 - 4.28)
>>
4,99999999999998E-02
>> WScript.Echo 0.5
>>
0,5
>> WScript.Echo CStr(((4.33 - 4.28) = 0.05))
>>
False 
```

有很多关于如何以及为什么表示和操纵数字的解释。只需使用 Wikipedia 或 Google 即可开始。

请参阅[此处的一个示例](http://floating-point-gui.de/)（使用 xkcd 完成！）。

# java - 如何使用 JNA 将 char * aarr= new char[200] 从 C++ 返回到 Java

> ID：10651420
> 
> 赞同：0
> 
> 时间：2012-05-18T11:01:34.200
> 
> 标签：java, visual-c++, jna

我是 JNA 的新手。在我的一个应用程序中，我需要将 **char * aarr= new char[200]**从 c 返回到 java。我无法理解如何做到这一点。我的 c++ 函数的返回类型应该是什么？我应该如何声明我的 java 方法来恢复 char 数组？有没有其他方法，比如在 c++ 中通过引用传递变量来获取 c++ 的 char[] 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:51:01.520

如果您从本机代码返回缓冲区，则需要使用`Pointer`和使用各种指针数据访问方法来获取/设置数据（例如`Pointer.getByteArray()`和`Pointer.setByteArray()`）。请注意，如果数据是由本机代码分配的，您必须提供某种方式来处理内存，因此您需要将指针保留在本机代码中以供以后处理，或者将其从 Java（作为 a `Pointer`）传回你的 C++ 可以做适当的`delete[]`操作。

如果您可以从 Java 端分配缓冲区（如果 Java 端需要广泛操作数据，则建议使用），如果本机代码只需要访问它，则使用直接`ByteBuffer`或`Memory`如果数据是长期存在的，或者使用原始字节数组在本机通话期间。

JNA 文档清楚地表明 native`char`映射到 Java `byte`。

另请记住，Java 只有带符号的值，因此您需要将 Java`byte`值（可能为负数）转换为更大的类型（`short`或`int`）并屏蔽高位，例如

`int data = (int)byteValue & 0xFF;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:19:13.643

请尝试使用`Pointer.getCharArray(long offset,int arraySize)` [指针类的方法](http://jna.java.net/javadoc/com/sun/jna/Pointer.html#getCharArray%28long,%20int%29)。

我猜你正在打印的是通过默认编码转换为字符串的指针的任意内存位置。

# jboss - jboss丰富的dataTable错误的数据

> ID：10651423
> 
> 赞同：0
> 
> 时间：2012-05-18T11:01:40.400
> 
> 标签：jboss, seam, richdatatable

```
 <rich:dataTable id="companyList" var="company"
    value="#{companyList.resultList}" 
rowClasses="odd-row, even-row"
    rendered="#{not empty companyList.resultList}">
    <rich:column width="25px" style="text-align:center;">
    <f:facet name="header">#{messages.Edit}</f:facet>
    <a4j:commandLink reRender="companyPanel"
    oncomplete="#{rich:component('companyPanel')}.show()"
    style="align: center;">                                     <f:setPropertyActionListener target=
"#{companyHome.instance}" 
    value="#{company}" />
    <rich:toolTip value="#{messages.Edit}" />
    </a4j:commandLink>
    </rich:column>
    <h:column>
    <f:facet name="header">
#{messages.companyName}</f:facet>
    #{company.companyName}
     </h:column>
    </rich:dataTable> 
```

嗨，我的丰富数据表有一些问题。所有操作正常，我在 dataTable 中搜索一些数据，我在 datatable 中得到了真实的列表，但是，如果我尝试更新列中的一些数据，则会出现错误的实例。例如，我选择香蕉，名字是我的数据，但它在搜索数据之前带来了没有带香蕉。我不懂为什么。对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:45:28.460

不确定，但是，你试过这个

```
<f:setPropertyActionListener target="#{companyHome.id}" value="#{company.id}" /> 
```

代替

```
<f:setPropertyActionListener target="#{companyHome.instance}" value="#{company}" /> 
```

# c++ - 从自定义数据类型列表中删除时出现 C2678 错误

> ID：10651439
> 
> 赞同：0
> 
> 时间：2012-05-18T11:02:38.827
> 
> 标签：c++

我目前正在努力工作，其中包含几个自定义数据类型。我遇到了一个问题，列表抱怨我试图从相同数据类型的列表中删除自定义数据类型。

```
Error   3   error C2678: binary '==' : no operator found which takes a left-hand operand of type 'customer' (or there is no acceptable conversion)  c:\program files (x86)\microsoft visual studio 10.0\vc\include\list 1194    1   Assignment 1 - Video Store MIS 
```

相关代码在这里：

```
void customerCollection::removeCustomer(customer person)
{
customers.remove(person);
} 
```

并且自定义数据类型确实定义了 == 运算符：

```
bool customer::operator==(customer &other) const
{
return (l_fullName == other.getName()) && 
       (l_contactNumber == other.getNumber()) && 
       (l_password == other.getPassword()) && 
       (l_username == other.getUsername());
} 
```

列表类型看不到重载运算符有什么原因吗？

customerCollection 和客户数据类型是程序的必需部分。

[编辑] 重载的运算符在头文件中定义为 public。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T11:06:20.120

```
bool customer::operator==(customer &other) const 
```

尝试将其更改为

```
bool customer::operator==(const customer &other) const 
```

集合的代码可能`customers`会将 const 限定的客户传递给相等运算符。至少，它更惯用（和合乎逻辑）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:06:12.537

我倾向于说原因是参数不是`const`：

```
 bool customer::operator==(const customer& other) const 
```

取决于如何`remove`定义。

# nhibernate - 测试自定义 ASP.NET 成员资格提供程序

> ID：10651443
> 
> 赞同：0
> 
> 时间：2012-05-18T11:03:03.607
> 
> 标签：nhibernate, membership-provider

我正在使用带有底层 nhibernate 数据访问代码的自定义 asp.net 会员提供程序，这很好。现在我需要使用测试来练习这些方法。

有人有兴趣建议如何测试这些方法吗？提供一些链接来解释使用一些标准的测试方法吗？

这是我的第一个问题，所以要温柔:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:17:22.627

当涉及到对与数据库或第三方库做某事的任何代码进行单元测试时，您应该解耦这些依赖关系，以便您的测试只测试您的代码。

例如，如果我们的成员资格提供程序中有一个用于添加单个用户的方法，我们想要测试的是我们的该单个方法的代码是否正常工作，而不是数据库是否已启动并正在运行或该方法调用的方法工作。即使数据库离线或其他类的方法调用失败，我们的单元测试仍然应该通过。

这就是 Mocking 发挥作用的地方。您需要模拟您的数据上下文并设置您将在其上使用的任何方法，以便您可以控制其响应。

仔细查看您在会员提供程序中使用的方法。每个人应该怎么做？这是您真正想要测试的唯一内容。这种方法，作为一个独立的单元，是否可以完成我期望的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:17:25.463

会员提供者很难模拟和测试，所以我个人不打扰。然而，我所做的是将我所有的会员代码放在易于测试的类*中。*

我的大多数自定义提供程序看起来像这样：

```
public class CustomMembershipProvider : MembershipProvider
    {
        private readonly IUserService _userService;

        public ButlinsMembershipProvider()
        {
            _userService = DI.Resolve<IUserService>();
        }

        public override bool ValidateUser(string username, string password)
        {
            return _userService.Authenticate(username, password);
        }
} 
```

在此示例中，我将编写集成测试来验证用户服务的行为。我不测试提供者。

# flash-builder - Flash Builder 4.6 移动应用程序打包和导出

> ID：10651444
> 
> 赞同：1
> 
> 时间：2012-05-18T11:03:04.393
> 
> 标签：flash-builder

这是我在这里发布的第一个问题。

我是 Flash builder 的新手，使用 Flash Builder 4.6 开发 android 应用程序。它在桌面上运行没有错误发生。但是当我导出它或尝试在我的 **SAMSUNG GALAXY Y S5360**手机上运行它时，它无法运行。

我用电脑插入 USB 并尝试在手机上运行应用程序。第一个构建器询问您是否要将 ADOBE AIR 安装到设备我选择**是**选项，然后在它达到 57% 并显示错误

**安装应用程序时出错：**
**pkg:/data/local/tmp/Runtime.apk**

**失败[INSTALL_FAILED_CPU_ABI_INCOMPATIBLE]**
**3261 KB/s (8653085 bytes in 2.333s)**

当我为 .apk 文件导出和发布构建时，我选择了 Captive Runtime。然后它显示一条消息

**软件包已成功创建，但应用程序无法安装在一台或多台设备上：**

**设备 ID 0123456789ABCDEF（Google Android）：安装 ADOBE AIR 时出现问题。**

请指导我......自过去 4 天以来，我一直在努力解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:30:27.160

在网上搜索并解决了这个问题后，终于找到了解决方案。

**SAMSUNG Galaxy Y S5360 具有 CPU 830 MHz ARMv6**和 Android 上 AIR 3.3 Beta 的最低系统要求：
**CPU：ARMv7 处理器，带矢量 FPU，最低 550MHz，OpenGL ES2.0、H.264 和 AAC H/W 解码器操作系统： Android 2.2、2.3、3.0、3.1、3.2 和 4.0 内存：256MB 内存**

后来我使用了更高版本的摩托罗拉手机，我的 .apk 文件运行良好。

[单击此处了解三星 Galaxy Y S5360 手机规格](http://www.gsmarena.com/samsung_galaxy_y_s5360-4117.php)

感谢大家的努力。:)

# iphone - Libcurl 错误：curl/curl.h：没有这样的文件或目录

> ID：10651447
> 
> 赞同：4
> 
> 时间：2012-05-18T11:03:25.187
> 
> 标签：iphone, xcode, macos, libcurl, ios-3.x

我尝试将 icy 升级到 iOS3/4+，但是在构建它时，它给了我这个错误： curl/curl.h：没有这样的文件或目录我怎样才能使它工作？我读过关于在框架中添加 cURL 但我已经这样做了，它给了我同样的错误......请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T04:59:41.917

在 IDE 的构建设置中的某处，您应该找到一个**Header Search Paths**设置（或类似名称的设置）。如果您从命令行构建，请查找**搜索路径**选项。将 curl.h 所在的目录添加到该列表中。

# android - asmack + android + 聊天应用程序

> ID：10651452
> 
> 赞同：1
> 
> 时间：2012-05-18T11:03:51.840
> 
> 标签：android, chat, asmack

我已经成功地在我的 android 应用程序中实现了一个聊天活动。该活动可以发送和接收消息。但是当用户进行其他活动时，他无法接收消息。有没有一种简单的方法可以让所有活动都能够接收消息，而无需在每个活动上重新编写消息接收代码？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-02T14:52:18.750

在您的聊天活动中实现 Messagelistener

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-11T15:17:34.483

将您的消息侦听器代码移动到服务中。

# android - Android 中的 Google 地图：无法在当前主题中找到样式“mapViewStyle”

> ID：10651456
> 
> 赞同：8
> 
> 时间：2012-05-18T11:04:09.437
> 
> 标签：android, google-maps, android-layout

对不起，伙计们，关于这个话题的另一个人。到目前为止，我已经阅读了所有关于它的帖子，但到目前为止，没有一个答案适合我。我现在花了几个小时试图解决这个问题，在开始拔毛之前，我想在这里再试一次。

在 XML 布局和图形布局之间切换时，我在 Eclipse 中收到上述错误消息。

```
Missing styles. Is the correct theme chosen for this layout?
Use the Theme combo box above the layout to choose a different layout, or fix the theme style references.
Failed to find style 'mapViewStyle' in current theme 
```

这是我的布局 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<!-- Screen Design for the MAP Tab -->
<TextView
    android:id="@+id/vvm_offline"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="15dip"
    android:text="You have to be online to display the map."
    android:textSize="18dip" />

<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:apiKey="xxx"
    android:clickable="true"
    android:state_enabled="true" />

<LinearLayout
    android:id="@+id/zoom"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

在我的 AndroidManifest.xml 中，一切似乎都符合我发现的其他提示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.test.myapp"
android:versionCode="1"
android:versionName="0.1" >
<uses-sdk android:minSdkVersion="8" />

<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" >
</uses-permission>
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:allowBackup="true"
    android:label="@string/app_name" >
    <uses-library
        android:name="com.google.android.maps"
        android:required="true" />

    <activity
        android:name=".myappActivity"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" >
    (etc.)

    <activity
        android:name=".ViewMapActivity"
        android:label="View Map" >
    </activity>
    (etc.) 
```

顺便说一句，我是否在 android:theme 中定义了“主题”没有区别。

任何想法如何解决这个错误？我可以编译并运行该应用程序，但在创建视图时会收到 NullPointerException。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T03:07:38.793

这也发生在我身上..进入 res>values>styles.xml

删除上一个主题行并放入这个

```
<style name="AppBaseTheme" parent="android:Theme.Light"> 
```

项目创建期间的 Eclipse 要求为应用程序定义主题。您可能选择了任何`Holo theme`. 此主题不支持`MapView`显示错误的主题。

# ruby-on-rails - 从节点中提取 JSON 数据？

> ID：10651458
> 
> 赞同：0
> 
> 时间：2012-05-18T11:04:16.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

例如向 Twitter 发出请求： [https ://api.twitter.com/1/users/show.json?screen_name=stephenfry&include_entities=true](https://api.twitter.com/1/users/show.json?screen_name=stephenfry&include_entities=true)

我可以使用以下方法提取像 follower_count 这样的元素`result["followers_count"]`

我尝试了对 LastFM 的类似请求，但他们的 JSON 结构不同，因为它是他们默认 XML 的翻译。

通过他们的演示请求： [http ://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist=Cher&api_key=b25b959554ed76058ac220b7b2e0a026&format=json](http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist=Cher&api_key=b25b959554ed76058ac220b7b2e0a026&format=json)

我将如何获得听众的价值？

我试过了

`result["listeners"]`

`result["artist.listeners"]`

`result["artist.stats.listeners"]`

我知道我需要访问一个节点，但不知道如何去做。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:37:51.547

这是一个嵌套哈希，因此您可以通过以下方式访问它：

```
result["artist"]["stats"]["listeners"] 
```

例子：

```
require('open-uri')
require('json')

result = JSON.parse(open('http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist=Cher&api_key=b25b959554ed76058ac220b7b2e0a026&format=json').read)
result["artist"]["stats"]["listeners"].to_i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:35:21.227

Last.fm 数据是一系列嵌套的哈希，因此您需要这样访问它们。尝试以下方法，它应该可以解决问题：

```
result["artist"]["listeners"] 
```

# magento - Magento 模型以 Invalid method xxx::beginTransaction(Array() 结束

> ID：10651459
> 
> 赞同：4
> 
> 时间：2012-05-18T11:04:21.860
> 
> 标签：magento

我正在尝试将数据写入数据库中的表。我终于建立了我的模型，但我无法向它写入数据。

我不断收到此错误：

```
Invalid method Turnkeye_Adminform_Model_Mysql4_Iaso::beginTransaction(Array
(
)
)

Trace:
#0 E:\projects\magento\app\code\core\Mage\Core\Model\Abstract.php(313): Varien_Object->__call('beginTransactio...', Array)
#1 E:\projects\magento\app\code\core\Mage\Core\Model\Abstract.php(313): Turnkeye_Adminform_Model_Mysql4_Iaso->beginTransaction()
#2 E:\projects\magento\app\code\community\Turnkeye\Adminform\controllers\Adminhtml\AdminformController.php(47): Mage_Core_Model_Abstract->save()
#3 E:\projects\magento\app\code\core\Mage\Core\Controller\Varien\Action.php(420): Turnkeye_Adminform_Adminhtml_AdminformController->saveAction()
#4 E:\projects\magento\app\code\core\Mage\Core\Controller\Varien\Router\Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('save')
#5 E:\projects\magento\app\code\core\Mage\Core\Controller\Varien\Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#6 E:\projects\magento\app\code\core\Mage\Core\Model\App.php(347): Mage_Core_Controller_Varien_Front->dispatch()
#7 E:\projects\magento\app\Mage.php(640): Mage_Core_Model_App->run(Array)
#8 E:\projects\magento\index.php(80): Mage::run('', 'store')
#9 {main} 
```

由于代码量很大，我已将其发布到 pastebin：

[控制器/Adminhtml/AdminformController.php](http://pastebin.com/n7bbHPzd)

[等/config.xml](http://pastebin.com/8r8gvvUh)

[等/adminhtml.xml](http://pastebin.com/pTsQ9XzH)

[型号/iaso.php](http://pastebin.com/TZcVhz0t)

[型号/Mysql4/Iaso.php](http://pastebin.com/4era02v2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:15:28.827

这不起作用，因为您的代码定义了

```
Turnkeye_Adminform_Model_Mysql4_Iaso extends Mage_Core_Model_Abstract 
```

这是错误的。

您需要从*资源*模型扩展，即从扩展抽象类的类`Mage_Core_Model_Resource_Abstract`。这`beginTransaction()`就是定义的地方。

通常这是通过扩展 from 来完成的`Mage_Core_Model_Mysql4_Abstract`，因为在 Magento 中还有一些标准 mySQL 资源使用的方法，这些方法是通过以下方式定义的：

```
Mage_Core_Model_Mysql4_Abstract extends
   Mage_Core_Model_Resource_Db_Abstract extends
       Mage_Core_Model_Resource_Abstract 
```

因此，将您的定义更改为

```
Turnkeye_Adminform_Model_Mysql4_Iaso extends Mage_Core_Model_Mysql4_Abstract 
```

应该让你回到正确的轨道上。

# php - 如何使某些小部件不显示在网站的移动版本上

> ID：10651462
> 
> 赞同：1
> 
> 时间：2012-05-18T11:04:31.780
> 
> 标签：php, wordpress, plugins, widget

我最近在我的[网站](http://nix-pix.co.uk)上放置了谷歌广告，该网站针对移动设备进行了优化，但广告对于手机来说太大了，我不希望它们出现。我在 Wordpress 上运行我的网站，我使用小部件放置广告，所以你能告诉我是否有任何类型的插件可以禁用手机的某些小部件？

谢谢！

**编辑：**下面的答案之一说我可以使用 mdetect.php。如何在 Wordpress 中实现这一点？请帮忙！（对不起我的坏php！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:11:04.357

查看 mdetect.php [http://code.google.com/p/mobileesp/source/browse/PHP/mdetect.php](http://code.google.com/p/mobileesp/source/browse/PHP/mdetect.php)

使用起来非常简单：

*   创建 uagent 对象
*   添加一个 if ($uagent->TypeOfPhone) ，您可以精确控制向哪些设备显示的内容（例如，您可以定位平板电脑而不是手机）

还有其他基于屏幕分辨率的方法，但现在“视网膜显示器”的像素比你看到的多。所以我现在使用 mdetect 。到目前为止非常可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-16T08:09:41.440

您可以通过在移动媒体查询中添加“display:none”css 代码来隐藏此部分。

# android - 如何在电子邮件正文 Android 中发送图像

> ID：10651464
> 
> 赞同：1
> 
> 时间：2012-05-18T11:04:36.963
> 
> 标签：android, email

我正在开发一个 android 应用程序，它将电子邮件（文本和图像）发送到 gmail、yahoo 和其他邮件服务。我使用的版本是android 2.2，它与2.2及更高版本兼容。我想在邮件撰写正文部分发送图像。我试过这样做，但是每当我发送邮件时，图像都不会出现，或者邮件正文中会显示一个小框。我搜索了很多网站，但没有得到足够的帮助。这个你能帮我吗。我不想将图像作为附件发送。我想在邮件撰写正文中同时发送文本和图像。期待尽快得到你们的快速和积极的回应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:15:08.047

如果我不想将图像作为附件发送，我将使用的解决方案是将图像上传到网络服务器上的某个位置，然后将图像作为图像 html 控件放入电子邮件正文中，其中 src 指向图像 url网络服务器。

# encryption - 带有短加密字符串的流密码加密

> ID：10651465
> 
> 赞同：0
> 
> 时间：2012-05-18T11:04:46.167
> 
> 标签：encryption, stream-cipher

我正在寻找一种流密码加密方法，这将导致加密的字符串尽可能短，并且只包含字母数字字符。.NET中有这样的东西吗？我已经研究过，但找不到这样的东西。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T09:20:43.983

我在这里找到了答案[非常简单的短字符串压缩](https://stackoverflow.com/questions/1192732/really-simple-short-string-compression)，这意味着它不可能，因为加密也意味着使值更长。可以做的最好的事情是保持输入的大小相同，但如果结果必须是字母数字，则必须使用更长的字符串

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-08T08:10:26.440

您可以缩短它 - 只需使用 java 或其他一些库压缩生成的加密字符串并输出为十六进制。很直接。

# html - 更简单、更清洁的内联链接 [JADE 预处理]

> ID：10651467
> 
> 赞同：2
> 
> 时间：2012-05-18T11:05:07.957
> 
> 标签：html, preprocessor, pug

我希望在[Jade](http://jade-lang.com/)中编写以下简单的 html ：

`<p>Nevertheless, you can read his stuff on his nameless <a href="blog">blog</a> as well as on the <a href="voice">Voice</a> college blog.</p>`

一个丑陋、冗长、容易出错的方法是：

```
p Nevertheless, you can read his stuff on his nameless 
    a(href="blog") blog
    |  as well as on the 
    a(href="voice") Voice
    |  college blog. 
```

有没有更简单/更简单的方法来写这个？谢谢

**编辑：**请忽略代码突出显示颜色，因为它们没有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:15:27.470

最快的方法是跳出jade并进入markdown，在这里查看更多：[Jade：段落内的链接](https://stackoverflow.com/questions/6989653/jade-links-inside-a-paragraph)

# c++ - 合成工具包：MIDI 音符在不同的乐器上有不同的频率

> ID：10651469
> 
> 赞同：2
> 
> 时间：2012-05-18T11:05:17.713
> 
> 标签：c++, sound-synthesis

我一直在尝试将 Synthesis 工具包用于音频项目。我在下面编写了一个快速程序，它会生成一个持续时间为 1 秒且带有 MIDI 音符 49 的 WAV 文件。实际上，该程序会生成两个这样的文件，一个使用“Bowed”乐器，另一个使用“PercFlut”乐器。奇怪的是，当我播放生成的两个 WAV 文件时，频率并不相同。对于 Bowed 乐器，相同 MIDI 音符的主频率似乎是 440 HZ。对于 PrecFlut 仪器，主频率似乎在 210 HZ 左右。

我究竟做错了什么？任何帮助将不胜感激。

谢谢，这是我的代码：

```
#include <iostream>
#include <Voicer.h>
#include <Instrmnt.h>
#include <FileWvOut.h>
#include <Bowed.h>
#include <PercFlut.h>

using namespace stk;

// WAV file generated Note = 49\. Duration = 1 second
void createFile(Voicer &voicer, StkFrames &frames, Instrmnt *instrmnt, const char *filename)
{
  voicer.addInstrument(instrmnt, 1);
  FileWvOut output;
  output.openFile(filename, 1, FileWrite::FILE_WAV, Stk::STK_SINT16);
  long tag1 = voicer.noteOn(49, 25, 1);
  voicer.tick(frames, 1);
  voicer.noteOff(tag1, 0);
  output.tick(frames);
  output.closeFile();
}

int main(int argc, char *argv[])
{
  Voicer voicer;
  StkFrames frames(44100 * 1, 1);
  Instrmnt *bowed = new Bowed();
  createFile(voicer, frames, bowed, "bowed.wav");
  Instrmnt *percflut = new PercFlut();
  createFile(voicer, frames, percflut, "percflut.wav");
  delete bowed;
  delete percflut;
} 
```

# python - 创建满足其属性值某些条件的类实例列表

> ID：10651481
> 
> 赞同：0
> 
> 时间：2012-05-18T11:06:22.057
> 
> 标签：python, oop, list, iteration, agent-based-modeling

如何从类实例的完整列表开始创建满足其属性值某些条件的类实例的子列表？

例如，我有一个我的类 Person() 的实例列表。这些人有很多属性，其中 ID 是唯一标识符，HH_ID 是他们居住的家庭的标识符。我想连接生活在同一家庭中的所有人，因此具有相同的 HH_ID。通过“连接”，我的意思是在所有家庭成员之间使用`networkx`. 为了做到这一点，我需要识别这些人并将它们放在“子列表”中，以便通过某种算法进行处理，将它们连接在一起。我怎样才能做到这一点？

我还需要一个通用工具来为其他更复杂的目的执行此操作（例如，随机连接 N 个 15 到 20 岁的人），但在家庭成员最简单的情况下，我可以使用我的列表按 ID 排序的事实和HH_ID，因此我有类似的东西：

```
ID HH_ID
0  0
1  0
2  0
3  1
4  1
5  2 
```

其中第一个家庭由人 [0,1,2] 组成，第二个家庭由人 [3,4] 组成，依此类推......

对于这个家庭问题，我尝试使用`pairwise`迭代器配方（[itertools 文档](http://docs.python.org/library/itertools.html)以这种方式：

```
import pairwise
i = pairwise(personList)
for p in personList:
    toConnectList = [p]
    p1,p2 = i.next()
    while p1.hh_id == p2_hh_id
        toConnectList.append(p2)
        p1,p2 = i.next()
        # connect all persons in toConnectList 
```

但显然这不起作用，因为我的迭代器`i`下降，直到`hh_id`两个相邻的人不匹配，然后从那里重新开始下一个人。例如，对于上面示例中的人员，当涉及到循环中的人员 1 时，我的迭代器将开始比较人员 2 和人员 3 `for`，而我需要某种方式直接跳转到 for 循环中的人员 3 并让我的迭代器启动比较人 3 和 4。我希望这个例子能澄清一点，即使它看起来不是很清楚......

更一般地说，我需要一种方法来创建满足其属性值某些条件的人的子列表，这可能是一种有效的方法（我有大约 150000 人）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:15:02.853

```
from itertools import groupby

def family_key(person):
    return person.HH_ID

persons.sort(key=family_key)
for hh_id, family in groupby(persons, key=family_key):
    for person in family:
        # do your thing 
```

对于更复杂的目的，只需更改键函数以为要分组的那些项目返回相同的值。

**EDIT:** Fixed error: `groupby` returns a tuple `(key, group_iter)`, not just `group_iter`.

# jquery - 当我单击按钮时，所有东西都关闭了，为什么会这样？

> ID：10651483
> 
> 赞同：-1
> 
> 时间：2012-05-18T11:06:33.340
> 
> 标签：jquery

在我的网站上，当我单击隐藏的服装区域按钮时，一切都关闭了。

当我单击此按钮时，我不想关闭它们。但他们是封闭的。

我该怎么做。

```
<!DOCTYPE html>
<html>
<head>
  <style>
  p { background:red; }
</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <p>

It is a long established fact that a reader will be distracted. The point of using Lorem Content is here...

  </p>
  <p>
  <span>Mr [Name], [Surname]</span>
  <a href="http://www.mobilyala.com" />
       <img src="http://www.mobilyala.com/home.png" alt="Home" />
   </a>
   Welcome to our website. You can read all about our services. We are working on dekorasyon

   <button>Hidden Custom Area</button>

</p>
<script>
  $("button").click(function () {
    $("p").empty();
  });
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T11:07:19.497

该代码删除了每个`<p>`元素的内容。你还期待什么？

如果您只想要`<p>`包含按钮，请使用 thios：

```
$(this).closest('p').empty(); 
```

而不是`.empty()`你可能还想要`.remove()`.

# java - 堆栈溢出错误

> ID：10651484
> 
> 赞同：-1
> 
> 时间：2012-05-18T11:06:38.780
> 
> 标签：java, algorithm, stack-overflow

我有这种奇怪的错误。

我正在尝试使用 BigInteger 类实现基本的欧几里得算法，如图所示。当我运行它时，它会抛出 StackoverFlowError，而如果我调试它，它会正确运行并给我正确的答案。

我真的不明白调试和正常运行期间的区别。

```
 static BigInteger gcd(BigInteger a, BigInteger b) {
        if (a.equals(BigInteger.ZERO)) {
            return b;
        } else if (b.equals(BigInteger.ZERO)) {
            return a;
        }
        BigInteger max = a.max(b);
        BigInteger min = a.min(b);
        return gcd(max.subtract(min), min);
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:19:50.757

如果您将重复的减法替换为 mod 操作，该算法将需要更少的调用。检查如果 max 非常大而 min 非常小会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:44:01.620

这不是 GCD 的欧几里得算法。正确的 GCD 算法可以很容易地表述为递归过程，因为实际上迭代次数很少。但是这个错误实现的算法可以运行数百万次迭代，例如，如果'a' 是1,000,000 而'b' 是1，这会导致一百万次递归调用。

（但是，该调用是尾递归调用，因此一个好的 Java 实现实际上会优化堆栈帧。但是，这里似乎不会发生这种情况。尽管由于某些未知原因，调试器版本可以实现尾调用优化，尽管这听起来奇怪的。）

在实际算法中，递归步骤是(a % b, b)而不是(a - b, b)。谷歌搜索“euclid GCD 算法”。

# debugging - gdb 在断点后丢失行号信息（在内核模块上）

> ID：10651485
> 
> 赞同：1
> 
> 时间：2012-05-18T11:06:46.120
> 
> 标签：debugging, linux-kernel, gdb, gdbserver

我正在将 gdb 连接到虚拟机的内核并尝试调试内核模块。我能够连接到虚拟机。我有内核代码的符号信息，并且可以很好地单步执行内核代码。

当我为我的内核模块添加符号文件时（顺便说一下，无论我是在远程连接之前还是之后执行此操作），我都能够`list <function_name>`获取有关该函数的信息，*直到*我设置断点；在那之后：

```
(gdb) b function_name
Breakpoint 1 at 0xffffffffa01d0074 (3 locations)
(gdb) list function_name
No line number known for function_name. 
```

附加信息：

*   主机和来宾都是 Fedora 16 64 位。
*   我正在调试的内核是 3.0.8 - 请注意，此内核在具有不同环境和远程连接设置的先前 32 位设置上运行良好。
*   我已经用 gdb 7.2 和 7.3.50 试过了。

有什么想法吗？如果我什至能确定问题出在我的内核、内核模块编译、连接还是 gdb，那将会有所帮助。

**更新**：使用 gdb 7.1，我得到以下信息：

```
...
(gdb) b function_name
/gdb/breakpoint.c:7903: internal-error: expand_line_sal_maybe: Assertion `found' failed.
A problem internal to GDB has been detected,
further debugging may prove unreliable. 
```

这意味着什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T01:33:29.040

部分答案：

使用 gdb 7.1，使用 重新编译内核和内核模块`-gdwarf-2`，使用 的模块`-O0`似乎已经成功了。我不确定它是哪个或为什么。

# perl - 同一个字符可以有 2 种不同的 UTF-8 编码吗？

> ID：10651486
> 
> 赞同：5
> 
> 时间：2012-05-18T11:06:50.670
> 
> 标签：perl, utf-8, character-encoding

我正在编写一个需要将其输入从 UTF-8 转码为 ISO-8859-1 (Latin 1) 的应用程序。

一切正常，除了我有时会得到一些变音符号的奇怪编码。例如，带有 2 个点 (0xEB) 的拉丁语 1 E 通常以 UTF-8 0xC3 0xAB 的形式出现，但有时也以 0xC3 0x83 0xC2 0xAB 的形式出现。

这从不同的来源发生了很多次，并注意到第一个和最后一个字符与我的预期相匹配，是否存在我的库不知道的编码规则？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T11:11:55.003

某些 Unicode 字符可以以*组合*和*分解*的形式表示。例如，德语变音符号 u`ü`可以由单个字符`ü`或`u`后跟表示`¨`，文本渲染器随后会将其组合。

[有关详细信息，请参阅有关Unicode 等效](http://en.wikipedia.org/wiki/Unicode_equivalence)性的 Wikipedia 文章。

因此，Unicode 库通常提供将字符串规范化为一种或另一种形式的方法或函数，以便您可以比较它们。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-18T11:19:21.907

```
$ "\xC3\x83\xC2\xAB"
Ã«
$ use Encode

$ decode 'UTF-8', "\xC3\x83\xC2\xAB"
ë 
```

您已经对 UTF-8 进行了双重编码。[Encode::Repair](http://p3rl.org/Encode::Repair)是解决这个问题的一种方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T17:08:12.547

（我正在回答您的主题问题，“*同一字符可以有 2 种不同的 UTF-8 编码吗？* ”，这与帖子中的问题有很大不同。）

（“字符”通常表示字符串元素。它在野兽中是模棱两可的，在这里使用的词不正确。用于视觉表示的 Unicode 术语，字形，是“字形”。）

是的，有多个代码点序列可以导致相同的字素。例如，两者

```
U+00EB  LATIN SMALL LETTER E WITH DIAERESIS 
```

和

```
U+0065  LATIN SMALL LETTER E
U+0308  COMBINING DIAERESIS 
```

应显示为“ë”。让我们看看你的浏览器是怎么做的：

*   U+00EB：“ë”
*   U+0065,0308：“ë”

在 UTF-8 中，这些代码点将被编码为

*   U+00EB：C3 AB
*   U+0065: 65
*   U+0308: 抄送 88

一种是使用[Unicode::Normalize](http://search.cpan.org/perldoc?Unicode%3a%3aNormalize)或将字符串规范化为两种格式之一（您的选择）`NFC`。`NFD`

```
$ perl -MUnicode::Normalize -E'
   $x = "\x{00EB}";
   $y = "\x{0065}\x{0308}";

   say     $x  eq     $y  ?1:0;
   say NFC($x) eq NFC($y) ?1:0;
   say NFD($x) eq NFD($y) ?1:0;
'
0
1
1 
```

* * *

UTF-8 中还有一种称为“超长”编码的东西。（特别是 UTF-8，而不是一般的 Unicode。）在 UTF-8 中，Unicode 代码点使用以下四种位模式之一进行编码：

```
1 0xxxxxxx
2 110xxxxx 10xxxxxx
3 1110xxxx 10xxxxxx 10xxxxxx
4 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx 
```

“x”代表要编码的代码点。必须使用最短的，所以 U+00EB 将是

```
0000 0000 1110 1011
      --- ---- ----

   -----   ------
110xxxxx 10xxxxxx
11000011 10101011
C3       AB 
```

但聪明的人可能会做

```
0000 0000 1110 1011
---- ---- ---- ----

    ----   ------   ------
1110xxxx 10xxxxxx 10xxxxxx
11100000 10000011 10101011
E0       83       AB 
```

应用程序应拒绝 E0 83 AB（或至少将其转换为 C3 AB），但有些应用程序不会，这可能会导致安全问题。Perl 的 Encode 模块将该序列视为无效，因此对于 Perl 来说应该不是问题。

# objective-c - Facebook Connect 登录对话框崩溃的应用程序

> ID：10651490
> 
> 赞同：1
> 
> 时间：2012-05-18T11:07:01.900
> 
> 标签：objective-c, ios, facebook, facebook-login

在我当前的应用程序遇到的许多问题中，这是最烦人的问题之一。

在模拟器中，登录对话框工作正常，但在设备上它只是一个冻结的白框，控制台打印以下内容：

```
void SendDelegateMessage(NSInvocation*): delegate 
(webView:resource:willSendRequest:redirectResponse:fromDataSource:) 
failed to return after waiting 10 seconds. main run loop mode: kCFRunLoopDefaultMode 
```

我已经查过了，但我仍然不确定它是什么意思。

如果我尝试切换

`[self authorizeWithFBAppAuth:NO safariAuth:NO];`

至

`[self authorizeWithFBAppAuth:NO safariAuth:YES];`

它切换到 safari 应用程序进行验证，但这以某种方式杀死了我的应用程序并显示错误消息`ReturnNotPermittedKillClient`。

有没有人遇到过类似的问题？在我的上一个应用程序中，它没有任何这些问题，而且据我所知，这次我所做的一切都是一样的。然而，这个项目是从其他人那里继承的，所以可能有我不知道的根本原因。

编辑：刚刚尝试将登录请求从 didFinishLaunchingWithOptions 移动到介绍屏幕类中已加载其他所有内容的点，以防万一这是由于尝试同时运行的任务过多而导致的内存问题。这次没有出现错误消息，但是登录框仍然保持白色，几秒钟后关闭了应用程序。

Edit2：似乎这只是一个内存错误。我将之前发布的所有变量都更改为保留，这解决了我的 3GS 上的问题。但是在我的 iPad 1 上问题仍然存在。顺便说一句，当`shouldAutorotateToInterfaceOrientation`从使用 Landscaperight 更改为使用 Landscaperight 或 Landscapeleft 时，当我旋转 iPad 时，我会收到内存警告，然后出现同样的崩溃。在这两种情况下，除了内存警告之外没有调试错误消息，并且应用程序只是关闭 - 没有断点等来查看问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:23:45.007

如果您使用的是 webview，那么我们需要首先执行此操作 b4 移动到下一个视图 .delegate = nil;

这可能是您想要的：文档中的 NSObject 中还有其他分支。

代码：[self performSelector：withObject：afterDelay：]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:46:07.613

问题只是归结为记忆。在改变它加载图像、声音等的方式后，问题就消失了。

# php - 根据数组列表从字符串中选择单词

> ID：10651491
> 
> 赞同：1
> 
> 时间：2012-05-18T11:07:10.200
> 
> 标签：php

我想根据我的数组列表从一个句子中选择特定的单词

```
$sentence = "please take this words only to display in my browser";

$list = array ("display","browser","words","in"); 
```

我希望输出就像“浏览器中显示的单词”

请有人帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:16:10.193

我想知道这一个班轮是否会这样做：

`echo join(" ", array_intersect($list, explode(" ",$sentence)));`

使用风险自负:)

编辑：是的，它完成了工作，刚刚测试过

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:21:25.180

你可以用 preg_match 做到这一点：

```
$sentence = "please take this words only to display in my browser";

$list = array ("display","browser","words","in");

preg_match_all('/\b'.implode('\b|\b', $list).'\b/i', $sentence, $matches) ;
print_r($matches); 
```

你会按顺序得到单词

```
Array
(
    [0] => Array
        (
            [0] => words
            [1] => display
            [2] => in
            [3] => browser
        )

) 
```

但是，如果文本不是那么简单，请注意正则表达式的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:15:56.030

我不知道任何简短的版本，而不是逐字检查。

```
$words = explode(" ", $sentence);
$new_sentence_array = array();
foreach($words as $word) {
    if(in_array($word, $list)) {
        $new_sentence_array[] = $word;
    }
}

$new_sentece = implode(" ", $new_sentence_array);
echo $new_sentence; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T11:27:15.393

`strpos`我认为您可以在字符串中搜索数组中的每个值，并将其分配给以该值作为键的新数组；这将为您提供一个可排序的数组，然后您可以按照术语在字符串中出现的顺序输出该数组。请参见下文或[示例](http://codepad.viper-7.com/BV8WEL)。

```
<?php
$sentence = "please take this words only to display in my browser";

$list = array ("display","browser","words","in");

$found = array();

foreach($list as $k => $v){
    $position = strpos(strtolower($sentence), strtolower($v));
    if($position){
    $found[$position] = $v; 
    }
}

ksort($found);
foreach($found as $v){
    echo $v.' ';    
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T11:40:21.113

```
$narray=array();

foreach ($list as $value) {
    $status=stristr($sentence, $value);
    if ($status) {
        $narray[]=$value;
        }
}

echo @implode(" ",$narray); 
```

# google-apps-script - Google App 脚本进度条

> ID：10651493
> 
> 赞同：2
> 
> 时间：2012-05-18T11:07:18.423
> 
> 标签：google-apps-script

我正在尝试在 Google app scripting 中创建一个进度条，当有人点击一个按钮（Go）时，它会自动慢慢地从开始到结束。您在 Firefox 下载窗口中看到的内容。这是我的代码。

```
function doGet(e) {
  var app = UiApp.createApplication();
  var progressPanel = app.loadComponent("progressbar_auto");
  var gobutton =app.getElementById("go_btn");

  var go_btn_handler =app.createServerHandler("updateProgressbar");
  go_btn_handler.addCallbackElement(gobutton);
  gobutton.addClickHandler(go_btn_handler)

  app.add(progressPanel);
  return app;
}
//function time(i){
//    Utilities.sleep(5);
//  }
function updateProgressbar(){
  var app = UiApp.getActiveApplication()

  for(var i =1 ; i < 250 ; i++ ){

    app.getElementById("progress").setWidth(i + 'px');
    time();
  }
 Logger.log(i);
  return app;

} 
```

但是根据这段代码for循环会执行非常快&，进度条完成非常快。有什么办法可以减缓这种情况。

你可以在这里找到我的应用程序。

[https://sites.google.com/a/macros/dewdynamics.net/exec?service=AKfycbztKB_ljMBGi_55RrK_DH3x_pRZQ993bDoAHSsxDA](https://sites.google.com/a/macros/dewdynamics.net/exec?service=AKfycbztKB_ljMBGi_55RrK_DH3x_pRZQ993bDoAHSsxDA)

有什么办法可以添加一个滑动条来控制进度条。我们可以在 php 或 HTML 5 中做一些事情。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T04:50:03.390

你为什么不为此使用 HtmlServices。试试看： [点击这里](http://caja.appspot.com/#examples/jquery-progressbar.html)

您可以使用 jquery 来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T02:57:56.157

不，没有真正的方法可以在 Apps 脚本上制作进度条。

不过有一些解决方法。您可以将多个处理程序添加到同一个按钮，并且在每个处理程序中，使用不同的睡眠时间，您可以多次更新 GUI。或者，像大多数人一样，在客户端处理程序中显示无尽的进度 gif 动画（用于即时反馈），在您的第二个处理程序完成后，您实际执行工作的 ServerHandler 隐藏图像并返回结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-01T13:52:52.993

更新答案：要获取运行服务器端的脚本的状态，您需要将进度存储到缓存中。然后客户端可以调用服务器端函数来检索它。[https://developers.google.com/apps-script/reference/cache/cache-service](https://developers.google.com/apps-script/reference/cache/cache-service)

# ios - 如何生成随机字母数字字符串？

> ID：10651499
> 
> 赞同：-1
> 
> 时间：2012-05-18T11:08:03.920
> 
> 标签：ios, objective-c, c

我想使用数字、标点符号和字母（小写和大写）生成密码。我怎样才能随机生成呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T11:14:43.177

与语言无关的版本，用于翻译成您想要的任何语言：

只需创建一个包含密码合法字符的字符串。

然后生成（取决于您的长度要求）八到十四之间的随机数。

*然后*生成0（包括）和`len(str)`（不包括）之间的许多随机数，并使用它来索引`str`以获得一个字符。

类似（伪代码）：

```
str = "abc...xyzABC...XYZ0...9,.="
len = rnd(7) + 8                     // rnd(n) gives 0 thru n-1
pwd = ""
while len > 0:
    pwd = pwd + str[rnd(len(str))]
    len = len - 1 
```

这基本上会给你一个所需长度的密码，由所需的字符组成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T11:21:14.560

由于您标记了 iPhone，因此我在目标 c 中执行了此操作。

```
NSString *string = @"";

for (int i = 0; i < (arc4random() % 6) + 6; i++)
{
    UniChar c = (arc4random() % 89) + 33; //Random char between ! and z
    string = [string stringByAppendingString:[NSString stringWithCharacters:&c length:1]];
}
NSLog(@"String:%@", string); 
```

*   我假设ascii。
*   我假设密码长度在 6 到 12 之间。
*   我没有在我的回答中付出太多努力，因为你没有在你的问题上付出太多努力。你应该展示[你尝试过的东西](http://whathaveyoutried.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:16:11.700

用于`arc4random()`数字和使用`arc4random_stir()`

# java - 通过算法解决字符串化浮动舍入问题的最佳方法？（Java，JEval）

> ID：10651500
> 
> 赞同：0
> 
> 时间：2012-05-18T11:08:11.097
> 
> 标签：java, floating-point, double, rounding, precision

我有一个来自 JEval 的输出操作，它是一个浮点不精确的字符串，类似于“1.56700000001”。我需要一些方法来保持最大精度但纠正浮点不精度。也许是一些有效的算法可以做出最准确的事情而不会出错。

如果我没记错的话，任何具有不精确二进制表示的双精度都将在长度（） 18 的字符串中输出，精度 =（14 减 - 点字符 - 整数部分）。

因此，当字符串清楚地使用所有位而没有尾随零时，我们可以四舍五入到精度为 1（最后一个）的数字（因为 JEval 没有显示它们，这意味着当 length() == 18 时）。

唯一的问题是，如果原始字符串具有真正的预期完整值并且不需要四舍五入，在这种情况下，我们只会损失一位精度。您如何看待这种方法。这是更好的方法吗？

例如：

```
import java.math.BigDecimal;
import java.math.MathContext;

public class test {
    private final static int THREESHOLD = 3; // num of decimals from which 
                                             // we consider that they represent a floating 
                                             // representation inaccuracy in case every double´s 
                                             //digit is used with no traliing zeroes ending

    public static void main(String[] args){

        String[] JEvalOutput = {"1.5555000000000001", //Rounding is needed
                                "234455555.29",       //Rounding is not needed
                                "455656.45599999998", //Rounding is needed
                                "111132323232334.19", //Here there is a problem, should be rounded??? 
                                                      //Thats why we use THREESHOLD var, to distinguish when can we consider 
                                "123456789012345678"};//Rounding is not needed

        for (String aux : JEvalOutput){

            int precision = aux.length()-(aux.contains(".")?1:0); 
            if (precision==17 && aux.contains(".") && aux.length()-aux.indexOf('.')-1 >THREESHOLD) precision--;
            BigDecimal a = new BigDecimal(aux, new MathContext(precision)).stripTrailingZeros();

            System.out.println(aux + " --> " + a.toPlainString()); //Only First and Third are rounded. 
        }
    }
} 
```

印刷：

```
1.5555000000000001 --> 1.5555
234455555.29       --> 234455555.29
455656.45599999998 --> 455656.456
111132323232334.19 --> 111132323232334.19 //If THREESHOLD was 1, then this would be 111(...)34.2
123456789012345678 --> 123456789012345678 
```

有没有更清洁、最佳实践、专业的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-16T22:40:15.667

这就是你想要的。别客气。

```
BigDecimal bd = new BigDecimal("123.4566661");
DecimalFormat df = new DecimalFormat("#.0#");
System.out.println(df.format(bd)); 
```

# jquery - Jquery Kenburner Slider 创建蒙版 10px 太短

> ID：10651501
> 
> 赞同：0
> 
> 时间：2012-05-18T11:08:16.640
> 
> 标签：jquery, slider

为模棱两可的问题标题道歉。

我有一个从 Code Canyon 购买的 Jquery Slider ( [Ken Burner )。](http://codecanyon.net/item/kenburner-slider-jquery-plugin/1249801)

我遇到的问题是滑块`div`通过自动检测宽度的 Jquery 创建了一个掩码。然而，面具总是 10px 不够宽。我对 Javascript 并不太精通，所以我希望你们中的一个人可能知道答案或如何解决这个问题。

[在这里](http://devsite77.clickdealer.co.uk)查看我的网站。

任何输入都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:32:38.607

对于任何看过的人；

```
opt.width=top_container.width()-0;
opt.height=top_container.height()-0; 
```

上面的数值被设置为 -10 所以逻辑上我改变了这些值！感谢任何可能调查过它的人。

# quartz-scheduler - Quartz：触发表插入方法

> ID：10651507
> 
> 赞同：2
> 
> 时间：2012-05-18T11:08:27.103
> 
> 标签：quartz-scheduler

我现在正在与 Qrtz 合作，发现很多次子作业在执行完母作业后并没有自动解雇。我在 QRTZ 库中调查了 log4j 生成的日志。我们发现表“qrtz_simple_triggers”中存在触发器丢失问题。出现问题是因为 Mother 作业将触发器插入到表“qrtz_triggers”中，然后它应该立即将数据插入到“qrtz_simple_triggers”中。但就我而言，在完全插入表中的单触发器期间延迟了大约 1 秒，同时，线程池中有一个操作从“WAITING”更新表“qrtz_triggers”中的触发器状态“获取” 就像母作业没有完成触发器插入“qrtz_simple_triggers”一样。所以，主线程在表中找不到简单的触发器，然后它就停止了工作。（对于那个儿童工作）

我的观点是如何防止这种情况发生？我认为这两个插入语句不在同一个事务中。我现在正在对此进行调查，并假设将这些语句合并到同一个事务中的解决方案。你能给我带来更多的想法吗？

在此先感谢，停止:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:25:32.397

如果您使用 spring 来管理事务，请查看[post](http://dhananjaypatkar.blogspot.in/2008/09/its-been-after-long-time-i-got-chance.html)

环境

```
org.quartz.jobStore.class = org.springframework.scheduling.quartz.LocalDataSourceJobStore 
```

# javascript - 使用 jQuery 在 CSS 中选择具有 color:lightGreen 的元素

> ID：10651508
> 
> 赞同：3
> 
> 时间：2012-05-18T11:08:31.390
> 
> 标签：javascript, jquery, html, css

如何`color:lightGreen`使用 jQuery 选择在 CSS 中具有属性的元素，然后将其更改为`#666`？

示例 HTML：

```
<a id="ctl00_ContentPlaceHolder1_GridView1_ctl17___ID_DetailsHyperLink" 
    class="CorporateHyperlink" 
     href="/EstimateSite/Estimate/Details.aspx?ID=234"
     style="color:LightGreen;">Details</a> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T11:11:20.133

```
$("a").each(function() {
    if ($(this).css("color") == "rgb(144, 238, 144)") {
        $(this).css("color", "#666");
    }
}); 
```

或者，如果您更喜欢使用`filter`：

```
$("a").filter(function() {return $(this).css('color') == 'rgb(144, 238, 144)';})
.css("color", "#666"); 
```

**但是**，如果您有机会编辑标记，最好将浅绿色添加到一个类中，然后将该类应用于这些元素，然后您可以为您的新颜色创建另一个类，然后像这样更改它们：

```
$(".lightGreen").removeClass("lightGreen").addClass("newColour"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T11:18:36.763

试试这个：

```
$("div").each(function() {
    if ($(this).css("color") == "rgb(144, 238, 144)") {
        $(this).css("color", "#666");
    }
}); 
```

[http://jsfiddle.net/z8Q5K/2/](http://jsfiddle.net/z8Q5K/2/)

它工作正常...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T11:19:48.880

```
$("a").each(function() {
    if ($(this).css("color") == "rgb(144, 238, 144)") { 
        $(this).css("color", "#666");
    }
}); 
```

# .net - 冷启动时加载加载项更快

> ID：10651512
> 
> 赞同：4
> 
> 时间：2012-05-18T11:08:33.810
> 
> 标签：.net, vsto

我们正在为 Microsoft Word（2007 和 2010）创建一个加载项。当我们在冷启动时启动加载项时，我们面临延迟问题，这意味着机器已关闭并重新启动。然后 Word 的第一次启动大约需要 30-35 秒。随后的发射速度更快。

我们认为这可能是由于将 VSTO 和 .NET dll 从磁盘加载到内存的延迟造成的。为了测试这一点，我们创建了一个完全不包含代码的虚拟 Word 加载项。在冷启动时，只加载了这个加载项，Word 需要大约 17 秒才能启动。

我们能以某种方式加快这个过程吗？如果有任何技术可以使 VSTO 和 .NET dll 加载更快，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:23:38.993

有 2 个注册表项会影响加载项的加载时间：`LoadBehavior`和`Warmup`. [在这里](http://msdn.microsoft.com/en-us/library/bb386106.aspx)阅读它们。

将 LoadBehavior 设置为 9（按需加载），以便加载项在首次使用时加载，而不是在 Word 启动时加载，从而减少 Word 的启动时间。

将预热设置为 1 可能会有所帮助。这将导致 .NET 框架和 VSTO 运行时在加载项之前加载，以“减少加载加载项的感知时间”。（我个人不确定这有多大影响。无论如何我的加载项加载速度非常快，所以我没有看到使用此设置的提升。）

总体而言，您的加载项需要很长时间才能加载，这很奇怪。我建议仔细查看加载加载项时运行的代码（构造函数、加载事件等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T11:17:17.070

> 为了测试这一点，我们创建了一个完全不包含代码的虚拟 Word 加载项。

这不是对您的理论的有效测试。即使是完全不包含代码的加载项也需要加载 .NET Framework 支持 DLL。

当您添加实际加载项的*其他*依赖项时，这就解释了为什么您会看到所需的加载时间加倍（从 17 秒到 35 秒）。

这是 .NET 解决方案的一个已知“问题”——如果尚未加载 .NET 运行时环境，它们第一次启动时相对较慢。随后的启动时间要快得多。

[除了在您的程序集上运行 NGEN](http://msdn.microsoft.com/en-us/magazine/cc163808.aspx)之外，您对此无能为力。这可能会对冷启动时间有所帮助，但它会产生其他后果，所以我当然不会推荐它作为一个简单的事情。我的建议只是习惯于缓慢的冷启动或切换到不同的技术。

# php - Magento - 将工具栏移到左侧块

> ID：10651513
> 
> 赞同：0
> 
> 时间：2012-05-18T11:08:38.460
> 
> 标签：php, magento-1.6

我在将产品列表工具栏从内容块移动到左侧块时遇到问题。

我想只显示排序选项，这很容易通过设置自定义工具栏模板文件toolbar_custom.html来完成。但我得到一个输出错误。

到目前为止，我在`layout/catalog.xml`：

```
<catalog_category_default translate="label">
    <label>Catalog Category (Non-Anchor)</label>
    <reference name="left">
        <block type="catalog/navigation" name="catalog.leftnav" after="currency" template="catalog/navigation/left.phtml">
        <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar_custom.phtml"/>
        <action method="setToolbarBlockName"><name>product_list_toolbar</name></action>
    </block>
    </reference>
    <reference name="content">
        <block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml">
            <block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml"/>
        </block>
    </reference>
</catalog_category_default> 
```

* * *

这在`navigation/left.phtml`：

```
<?php $magento_block = Mage::getSingleton('core/layout'); ?>
<?php $toolbarHtml = $magento_block->createBlock('catalog/product_list'); ?>
<?php $toolbarHtml->setTemplate('catalog/product/list/toolbar_custom.phtml'); ?>
<?php echo $toolbarHtml ->toHTML(); ?> 
```

* * *

这是我的自定义工具栏模板 - `toolbar_custom.phtml`：

```
<?php if($this->getCollection()->getSize()): ?>
    <div class="toolbar">
    <?php if( $this->isExpanded() ): ?>
        <div class="sort-by">
            <label><?php echo $this->__('Sort By') ?></label>
            <select onchange="setLocation(this.value)">
                <?php var_dump($this->getName()); ?>
                <?php foreach($this->getAvailableOrders() as $_key=>$_order): ?>
                    <option value="<?php echo $this->getOrderUrl($_key, 'asc') ?>"<?php if($this->isOrderCurrent($_key)): ?> selected="selected"<?php endif; ?>>
                        <?php echo $this->__($_order) ?>
                    </option>
                <?php endforeach; ?>
            </select>
       </div>
    <?php endif; ?>
    </div>
<?php endif ?> 
```

* * *

当我在浏览器中打开产品列表页面时，我收到以下错误消息：

> 致命错误：在第 37 行的 magento/app/design/frontend/my_theme/default/template/catalog/product/list/toolbar_custom.phtml 中的非对象上调用成员函数 getSize()

我正在使用 Magento 社区 1.6 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:18:17.273

在 layout/catalog.xml 文件下，对 Default 部分进行更改。

```
<block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
                        <block type="page/html_pager" name="product_list_toolbar_pager"/>
 </block> 
```

在此参考部分中包含上述代码

```
<reference name="left">
  <block type="catalog/navigation" name="catalog.categorymenu" before="cart_sidebar"  template="catalog/navigation/left_catalog.phtml"/> 
</reference> 
```

您可以在块内使用自己的工具栏.phtml 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T10:27:47.877

我有同样的问题。这对我有用：

在`<reference name="left">`块中的 layout/catalog.xml 中，插入：

`<block type="catalog/product_list" name="catalog_product_list" template="catalog/product/list.phtml"></block>`

然后，在你想要工具栏的 left.phtml 中：

```
<?php
  $toolbar = $this->getChild('catalog_product_list')->getToolbarBlock();
  $toolbar->setCollection($this->getChild('catalog_product_list')->getLoadedProductCollection());
  echo $toolbar->toHtml();
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-04T15:31:07.037

将此添加到您的布局中：

```
<catalog_category_layered translate="label">
  <reference name="left">       
        <!-- Adds the toolbar to the left column -->
        <block type="catalog/category_view" name="category.page.toolbar" template="catalog/category/sidetoolbar.phtml">
            <block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
                <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml" />
                <action method="setToolbarBlockName"><name>product_list_toolbar</name></action>
            </block>
        </block>

        <!-- We use the original toolbar - you could also write your own -->
        <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
            <block type="page/html_pager" name="product_list_toolbar_pager"/>
        </block>
  </reference>
</catalog_category_layered> 
```

并在 catalog/category/sidetoolbar.phtml 创建一个新模板：

```
<?php 
// lets get the toolbar block
$toolbar = $this->getChild('product_list')->getToolbarBlock();
// add the product collection
$toolbar->setCollection($this->getChild('product_list')->getLoadedProductCollection());
?> 
```

来源：[https ://gist.github.com/viezel](https://gist.github.com/viezel)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-20T22:43:26.350

只需像这样重命名块：

```
<block type="catalog/product_list_toolbar" name="product_list_toolbar_custom" template="catalog/product/list/toolbar_custom.phtml"/>
<action method="setToolbarBlockName"><name>product_list_toolbar_custom</name></action> 
```

# qt - QLabel 中的文本滚动（选取框）

> ID：10651514
> 
> 赞同：6
> 
> 时间：2012-05-18T11:08:48.723
> 
> 标签：qt, text, scroll, label, marquee

我正在学习[WidgetMarqueeLabel](https://www.linux-apps.com/p/1132075/)类：

```
#include "WidgetMarqueeLabel.h"
#include <QPainter>
#include <QWidget>

WidgetMarqueeLabel::WidgetMarqueeLabel(QWidget *parent)//*parent)
{   
        px = 0;
        py = 10;
        speed = 1;
        direction = RightToLeft;
        connect(&timer3, SIGNAL(timeout()), this, SLOT(refreshLabel()));
        timer3.start(10);
}

void WidgetMarqueeLabel::refreshLabel()
{
    repaint();  
}

WidgetMarqueeLabel::~WidgetMarqueeLabel()
{}

void WidgetMarqueeLabel::show()
{   
    QLabel::show();
}

void WidgetMarqueeLabel::setAlignment(Qt::Alignment al)
{
    m_align = al;
    updateCoordinates();
    QLabel::setAlignment(al);
}

void WidgetMarqueeLabel::paintEvent(QPaintEvent *evt)
{
    QPainter p(this);
    if(direction==RightToLeft)
    {
        px -= speed;
        if(px <= (-textLength))
            px = width();
    }
    else
    {
        px += speed;
        if(px >= width())
            px = - textLength;
    }
        p.drawText(px, py+fontPointSize, text());
    p.translate(px,0);
}

void WidgetMarqueeLabel::resizeEvent(QResizeEvent *evt)
{   
    updateCoordinates();
    QLabel::resizeEvent(evt);
}

void WidgetMarqueeLabel::updateCoordinates()
{
    switch(m_align)
    {
        case Qt::AlignTop:
            py = 10;
            break;
        case Qt::AlignBottom:
                        py = height()-10;
            break;
        case Qt::AlignVCenter:
            py = height()/2;
            break;
    }
    fontPointSize = font().pointSize()/2;
    textLength = fontMetrics().width(text());
}

void WidgetMarqueeLabel::setSpeed(int s)
{
    speed = s;
}

int WidgetMarqueeLabel::getSpeed()
{
    return speed;
}

void WidgetMarqueeLabel::setDirection(int d)
{
    direction = d;
    if (direction==RightToLeft)
        px = width() - textLength;
    else
        px = 0;
    refreshLabel();
}

void WidgetMarqueeLabel::close()
{
        QLabel::close();
} 
```

我想知道是否有可能使文本在到达右侧最后一个字母末尾的文本之前重新出现。我想要这样的东西：例如（空白是 25）：

```
WidgetMarqueeLabel
tMarqueeLabel                         Widge
eLabel                         WidgetMarque
el                          WidgetMarqueeLa
                      WidgetMarqueeLabel
               WidgetMarqueeLabel
       WidgetMarqueeLabel
WidgetMarqueeLabel 
```

这可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T15:23:25.907

为此，我曾经写过一个类。

> ![在此处输入图像描述](../Images/198fa7c5683ceb3c5c7855e71cda33c5.png)
> *示例屏幕截图显示文本“这是示例文本。它将水平滚动。”。注意两边的 alpha 混合。*

## 编码：

**滚动文本.h：**

```
#ifndef SCROLLTEXT_H
#define SCROLLTEXT_H

#include <QWidget>
#include <QStaticText>
#include <QTimer>

class ScrollText : public QWidget
{
    Q_OBJECT
    Q_PROPERTY(QString text READ text WRITE setText)
    Q_PROPERTY(QString separator READ separator WRITE setSeparator)

public:
    explicit ScrollText(QWidget *parent = 0);

public slots:
    QString text() const;
    void setText(QString text);

    QString separator() const;
    void setSeparator(QString separator);

protected:
    virtual void paintEvent(QPaintEvent *);
    virtual void resizeEvent(QResizeEvent *);

private:
    void updateText();
    QString _text;
    QString _separator;
    QStaticText staticText;
    int singleTextWidth;
    QSize wholeTextSize;
    int leftMargin;
    bool scrollEnabled;
    int scrollPos;
    QImage alphaChannel;
    QImage buffer;
    QTimer timer;

private slots:
    virtual void timer_timeout();
};

#endif // SCROLLTEXT_H 
```

**滚动文本.cpp：**

```
#include "scrolltext.h"
#include <QPainter>

ScrollText::ScrollText(QWidget *parent) :
    QWidget(parent), scrollPos(0)
{
    staticText.setTextFormat(Qt::PlainText);

    setFixedHeight(fontMetrics().height());
    leftMargin = height() / 3;

    setSeparator("   ---   ");

    connect(&timer, SIGNAL(timeout()), this, SLOT(timer_timeout()));
    timer.setInterval(50);
}

QString ScrollText::text() const
{
    return _text;
}

void ScrollText::setText(QString text)
{
    _text = text;
    updateText();
    update();
}

QString ScrollText::separator() const
{
    return _separator;
}

void ScrollText::setSeparator(QString separator)
{
    _separator = separator;
    updateText();
    update();
}

void ScrollText::updateText()
{
    timer.stop();

    singleTextWidth = fontMetrics().width(_text);
    scrollEnabled = (singleTextWidth > width() - leftMargin);

    if(scrollEnabled)
    {
        scrollPos = -64;
        staticText.setText(_text + _separator);
        timer.start();
    }
    else
        staticText.setText(_text);

    staticText.prepare(QTransform(), font());
    wholeTextSize = QSize(fontMetrics().width(staticText.text()), fontMetrics().height());
}

void ScrollText::paintEvent(QPaintEvent*)
{
    QPainter p(this);

    if(scrollEnabled)
    {
        buffer.fill(qRgba(0, 0, 0, 0));
        QPainter pb(&buffer);
        pb.setPen(p.pen());
        pb.setFont(p.font());

        int x = qMin(-scrollPos, 0) + leftMargin;
        while(x < width())
        {
            pb.drawStaticText(QPointF(x, (height() - wholeTextSize.height()) / 2) + QPoint(2, 2), staticText);
            x += wholeTextSize.width();
        }

        //Apply Alpha Channel
        pb.setCompositionMode(QPainter::CompositionMode_DestinationIn);
        pb.setClipRect(width() - 15, 0, 15, height());
        pb.drawImage(0, 0, alphaChannel);
        pb.setClipRect(0, 0, 15, height());
        //initial situation: don't apply alpha channel in the left half of the image at all; apply it more and more until scrollPos gets positive
        if(scrollPos < 0)
            pb.setOpacity((qreal)(qMax(-8, scrollPos) + 8) / 8.0);
        pb.drawImage(0, 0, alphaChannel);

        //pb.end();
        p.drawImage(0, 0, buffer);
    }
    else
    {
        p.drawStaticText(QPointF(leftMargin, (height() - wholeTextSize.height()) / 2), staticText);
    }
}

void ScrollText::resizeEvent(QResizeEvent*)
{
    //When the widget is resized, we need to update the alpha channel.

    alphaChannel = QImage(size(), QImage::Format_ARGB32_Premultiplied);
    buffer = QImage(size(), QImage::Format_ARGB32_Premultiplied);

    //Create Alpha Channel:
    if(width() > 64)
    {
        //create first scanline
        QRgb* scanline1 = (QRgb*)alphaChannel.scanLine(0);
        for(int x = 1; x < 16; ++x)
            scanline1[x - 1] = scanline1[width() - x] = qRgba(0, 0, 0, x << 4);
        for(int x = 15; x < width() - 15; ++x)
            scanline1[x] = qRgb(0, 0, 0);
        //copy scanline to the other ones
        for(int y = 1; y < height(); ++y)
            memcpy(alphaChannel.scanLine(y), (uchar*)scanline1, width() * 4);
    }
    else
        alphaChannel.fill(qRgb(0, 0, 0));

    //Update scrolling state
    bool newScrollEnabled = (singleTextWidth > width() - leftMargin);
    if(newScrollEnabled != scrollEnabled)
        updateText();
}

void ScrollText::timer_timeout()
{
    scrollPos = (scrollPos + 2)
                % wholeTextSize.width();
    update();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:46:51.550

真的很容易。只需重新绘制由控件宽度替换的文本：

```
void WidgetMarqueeLabel::paintEvent(QPaintEvent *evt)
{
    QPainter p(this);
    if(direction==RightToLeft)
    {
        px -= speed;
        if(px <= (-textLength))
            px = width();
    }
    else
    {
        px += speed;
        if(px >= width())
            px = - textLength;
    }
    p.drawText(px, py+fontPointSize, text());
    __p.drawText(px-width(), py+fontPointSize, text());
    p.drawText(px+width(), py+fontPointSize, text());
    p.translate(px,0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:50:04.433

像下面这样的东西应该可以工作。填充被硬编码为 25，这听起来像你想要的。如果您希望标签始终为特定大小，则可以使用类似`QString::leftJustified`.

```
class MarqueeLabel : public QLabel {
 public:
  explicit MarqueeLabel(const QString &text) : QLabel(text), pos_(0) {
    QString pad(25, ' ');
    actual_text_ = text + pad;
    startTimer(100);
  }

protected:
  void timerEvent(QTimerEvent *) {
    pos_ = ++pos_ % actual_text_.length();
    setText(actual_text_.mid(pos_).append(actual_text_.left(pos_)));
  }

private:
  QString actual_text_;
  int pos_;
};

int main(int argc, char *argv[]) {
    QApplication a(argc, argv);
    MarqueeLabel lbl("WidgetMarqueeLabel");
    lbl.show();
    return a.exec();
} 
```

# c# - .NET 本地化 - 如何设置语言？

> ID：10651517
> 
> 赞同：8
> 
> 时间：2012-05-18T11:08:58.233
> 
> 标签：c#, .net, winforms, localization

我已将我的 ExportForm 本地化为德语 (de) 和俄语 (ru)，如下所示： ![](../Images/594aa0a524ee0e650e0c6d694d7d6598.png)

如果我的 CultureInfo 是德语（Austrian-de-AT），那么一切正常，我看到格式被翻译成德语：

```
string specCult = "de-AT";
Thread.CurrentThread.CurrentUICulture = new CultureInfo(specCult); 
```

但是我看到带有俄语（ru-RU）CultureInfo 的英语用户界面

```
string specCult = "ru-RU";
Thread.CurrentThread.CurrentUICulture = new CultureInfo(specCult); 
```

虽然如果我使用“ru”而不是“ru-RU”来创建 CultureInfo，它可以工作：

```
string specCult = "ru";
Thread.CurrentThread.CurrentUICulture = new CultureInfo(specCult); 
```

你能帮我解决什么问题吗？或者请指出我调查问题的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:13:47.563

我已经确定了问题：在我的主要项目程序集设置中， **ru-RU**被选为中性语言。

MSDN：NeutralResourcesLanguage 属性通知 ResourceManager 用于显示程序集的中性区域性资源的语言。当它在与中性资源语言相同的文化中查找资源时，ResourceManager 会自动使用位于主程序集中的资源。它这样做而不是搜索具有当前线程的当前用户界面文化的附属程序集。这提高了您加载的第一个资源的查找性能，并且可以减少您的工作集。

[http://msdn.microsoft.com/en-us/library/bb385967.aspx](http://msdn.microsoft.com/en-us/library/bb385967.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:31:04.257

ru 是俄罗斯文化的中性名称，ru-Ru 是特定俄罗斯（俄罗斯）文化的名称。

[这取自 MSDN 链接](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.defaultthreadcurrentuiculture%28v=vs.110%29.aspx)

> > 在启动时，该示例在所有系统上将当前文化和当前 UI 文化设置为俄语（俄罗斯），但默认系统文化已经是俄语（俄罗斯）的系统除外。如果默认系统文化已经是俄语（俄罗斯），则代码将当前文化和当前 UI 文化设置为英语（美国）。

[这是其他很好的解释](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx)

> 如果特定区域性的资源在操作系统中不可用，则使用相关中性区域性的资源。如果中性文化的资源不可用，则使用主程序集中嵌入的资源。
> 
> Windows API 中的语言环境列表与 .NET Framework 支持的区域性列表略有不同。如果需要与 Windows 的互操作性，例如，通过 p/invoke 机制，应用程序应使用为操作系统定义的特定区域性。使用特定区域性可确保与等效的 Windows 区域设置保持一致，后者使用与 LCID 相同的区域设置标识符进行标识。

# android - Android：在 java 代码中编辑 strings.xml

> ID：10651519
> 
> 赞同：0
> 
> 时间：2012-05-18T11:09:41.070
> 
> 标签：android, string

我想知道是否可以编辑保存在 strings.xml 文件中的字符串。如果可以，那么您将如何做到这一点。到目前为止，我看不到你可以，但我是 android 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:10:27.833

不。您无法编辑 res 文件夹。您在 apk 文件中的数据是只读的。您无法在旅途中对其进行编辑。

# java - “就地”EditTextPreference

> ID：10651523
> 
> 赞同：0
> 
> 时间：2012-05-18T11:09:49.777
> 
> 标签：java, android, android-preferences

我使用 XML 语法创建了一个`PreferenceActivity`带有`PreferenceScreen`. 我添加了一个`EditTextPreference`并注意到它呈现为一个对话框。有没有办法`EditText`就地进行，即文本字段直接显示在`PreferenceScreen`而不是作为对话框弹出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:47:20.640

万一有人遇到同样的问题，这不能通过内置的 Preference 类来完成，但是您可以 subclass`Preference`和 override`getView()`以返回`ViewGroup`包含内联`EditText`（或简单地`EditText`）的 a。

您也可以通过`android:layout`在 XML 中提供属性来实现这一点（尽管我还没有尝试过）。

**编辑：**
我尝试了`android:layout`上面的方法，效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-20T05:00:11.410

添加 android:layout="@layout/your_loyout"。

哪里`your_layout.xml`像

`<EditText android:id="@+id/editText1" android:layout_width="match_parent" android:layout_height="wrap_content" android:ems="10" />`

# objective-c - Objective C - 综合属性

> ID：10651535
> 
> 赞同：0
> 
> 时间：2012-05-18T11:10:51.143
> 
> 标签：objective-c, properties

> **可能重复：**
> [在 Objective C 中为属性名称添加下划线前缀](https://stackoverflow.com/questions/3521254/prefixing-property-names-with-an-underscore-in-objective-c)

在合成属性时，我发现有人在做：

```
@synthesize myVar = _myVar; 
```

什么是“_myVar”，这与简单地做的区别是：

```
@synthesize myVar; 
```

最后，什么时候我应该更喜欢第一个解决方案而不是最后一个解决方案？

谢谢卢卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:31:03.867

您`_myVar`的示例中真正的内容是支持您的财产的 ivar 的名称。默认情况下，当您合成一个属性时，会为您创建一个同名的 ivar。因此，您可以使用您的属性通过 setter/getter 设置您的 ivar，或者`_myVar`直接访问您的变量（当然绕过 KVC/KVO）。

**编辑：** 来自 Apple 的[Cocoa 编码指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingIvarsAndTypes.html#//apple_ref/doc/uid/20001284-BAJGIIJE)

> ...在许多情况下，当您使用声明的属性时，您还会合成相应的实例变量。
> 
> 确保实例变量的名称简洁地描述了存储的属性。通常，您不应直接访问实例变量，而应使用访问器方法（您确实在 init 和 dealloc 方法中直接访问实例变量）。为了帮助表明这一点，请在实例变量名称前加上下划线 (_)...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T11:24:04.207

如果你想在 setter 和 getter 中使用一些现有的数据成员，那么可以这样指定。

例如@synthesize personName=pName;

这样，我们可以根据我们的方便使用 pName 而不是 personName。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-18T11:39:23.917

它是私有变量的名称。

在另一篇文章中查看我的答案：[回答](https://stackoverflow.com/questions/2541716/objective-c-convention-to-prevent-local-declaration-hides-instance-variable-wa/7525730#7525730)

# apache-flex - flex 移动项目中的 RSS 提要

> ID：10651536
> 
> 赞同：0
> 
> 时间：2012-05-18T11:10:56.777
> 
> 标签：apache-flex, flash-builder, flex-mobile

我正在使用 Flex 移动项目访问 RSS 提要。但我没有在那个 RSS 提要中获取图像，如何在 Flex 移动项目中从 RSS 提要获取图像以及如何在 Flex 移动项目中将图像转换为字节流

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:46:46.340

> 但我没有在那个 RSS 提要中得到图像

RSS 是 xml。您需要分别查找`image`元素、获取 url 和加载图像 [http://www.w3schools.com/rss/rss_tag_image.asp](http://www.w3schools.com/rss/rss_tag_image.asp)

> 如何将图像转换为字节流

为了将图像加载为 ByteArray，您需要使用 URLLoader 进行图像加载：

```
var loader:URLLoader = new URLLoader();
loader.dataFormat = URLLoaderDataFormat.BINARY;
loader.addEventListener(Event.COMPLETE, loader_completeHandler);

function loader_completeHandler(event:Event):void
{
    //here you can get loaded image as ByteArray
    var imageData:ByteArray = loader.data;
} 
```

如果在此之后您需要在显示列表中显示图像，则：

```
var loader:URLLoader = new URLLoader();
loader.dataFormat = URLLoaderDataFormat.BINARY;
loader.addEventListener(Event.COMPLETE, loader_completeHandler);

var imageBytesLoader:Loader = new Loader();
imageBytesLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, imageBytesLoader_completeHandler);

function loader_completeHandler(event:Event):void
{
    //here you can get loaded image as ByteArray
    var imageData:ByteArray = loader.data;

    imageBytesLoader.loadBytes(imageData);
}

function imageBytesLoader_completeHandler(event:Event):void
{
    //here you can get loaded image as Bitmap
    var bitmap:Bitmap = Bitmap(imageBytesLoader.content);
} 
```

# sum - 如何对组子句中的非持久属性求和

> ID：10651539
> 
> 赞同：0
> 
> 时间：2012-05-18T11:11:06.127
> 
> 标签：sum, grouping, ruby-on-rails-3.2

我有一个 TourDet 模型，其中包含以下持久属性：

```
tdclientid
tdsuppid
tdpaxnos
tdpriceperpax 
```

我在 TourDet 课程中也有以下内容

```
def tourval
  tdpaxnos * tdpricerperpax
end 
```

我现在正在尝试执行以下操作：

```
 tdis = TourDet.find(:all, conditions: ['tdtourhdrid = 23'], group: [:tdsuppid,:tdclientid], select: ['tdsuppid,tdclientid,sum(tourval) as ttl']) 
```

然而，rails 抱怨 Unknown column 'tourval'。

关于如何以另一种方式实现相同结果的任何想法？

我将 Rails 3.2 与 Ruby 1.9 和 MySQL 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:39:45.460

据我了解您的应用程序，您不能`tourval`在查询中引用它，因为它是在 Ruby 中定义的，而不是在 MySQL 中。

这个怎么样？

```
tdis = TourDet.find(:all, conditions: ['tdtourhdrid = 23'], group: [:tdsuppid,:tdclientid], select: ['tdsuppid,tdclientid,sum(tdpaxnos*tdpricerperpax) as ttl']) 
```

# iphone - MPMoviePlayer setCurrentPlayBackTime 不起作用

> ID：10651543
> 
> 赞同：0
> 
> 时间：2012-05-18T11:11:47.647
> 
> 标签：iphone, objective-c, ios, mpmovieplayercontroller

MPMoviePlayerController 我正在播放视频，当我暂停视频时，当我单击按钮时，我希望将视频转发一段时间。有谁知道如何从当前时间转发视频？如果是，我可以转发视频的最短时间是多少？就像是毫秒还是秒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T22:11:45.367

寻求很大程度上取决于您的内容。影响可跳过持续时间的因素有：内容格式（MP4 本地/渐进式下载或 HTTP 流/M3U8）、i 帧频率、TS-chunk-size（对于 M3U8）以命名要点。请参阅[关于 i-frames 的维基百科解释](http://en.wikipedia.org/wiki/Video_compression_picture_types)。

`MPMoviePlayerController`本身并没有施加额外的限制。

要获得非常精确的搜索，请使用具有高 i 帧频率的 MP4。请注意，这将极大地影响编码的视频大小。

# solr - solr 查询中的否定

> ID：10651548
> 
> 赞同：4
> 
> 时间：2012-05-18T11:12:16.547
> 
> 标签：solr, solrj

我正在尝试以下查询并且只得到零个结果（根据我的数据集，我应该得到 10 个结果）

```
http://mymachine:8983/solr/select/?q=-(HOSTID:302) 
```

我还尝试了以下查询并再次得到零结果。

`http://mymachine:8983/solr/select/?q=NOT(HOSTID:302)`

但是，当我以这种方式进行查询时，我得到 10 个结果（预期），

`http://mymachine:8983/solr/select/?q=-(HOSTID:302)AND(*:*)`

为什么会发生这种奇怪的事情？它是 solr 中的错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T06:04:41.180

solr 邮件列表中的 Ahmet Arslan 帮助我找到了解决方案。只是为了将来的好处在这里提到它。

Solr 将顶级否定查询 (-field:something) 转换为 q=+ *:* -field:something

看来你错过了那部分。

org.apache.solr.search.QueryUtils

```
`/** Fixes a negative query by adding a MatchAllDocs query clause.
  * The query passed in *must* be a negative query.
  */
 public static Query fixNegativeQuery(Query q) {
   BooleanQuery newBq = (BooleanQuery)q.clone();
   newBq.add(new MatchAllDocsQuery(), BooleanClause.Occur.MUST);
   return newBq;
 }` 
```

# android - C2DM 注册错误

> ID：10651549
> 
> 赞同：0
> 
> 时间：2012-05-18T11:12:20.087
> 
> 标签：android, android-c2dm

我试图注册 c2dm，但总是给我这个错误：

**05-18 10:48:32.357: D/C2DMRegistrar(225): [C2DMRegistrar.46] 注册: http 错误 400**

这是注册方法：

```
public static final String EXTRA_SENDER = "sender";
public static final String EXTRA_APPLICATION_PENDING_INTENT = "app";
public static final String REQUEST_UNREGISTRATION_INTENT = "com.google.android.c2dm.intent.UNREGISTER";
public static final String REQUEST_REGISTRATION_INTENT = "com.google.android.c2dm.intent.REGISTER";
public static final String LAST_REGISTRATION_CHANGE = "last_registration_change";
public static final String BACKOFF = "backoff";
// public static final String GSF_PACKAGE = "com.google.android.gsf";

public static void register(Context context, String senderId) {
Intent registrationIntent = new Intent(REQUEST_REGISTRATION_INTENT);
// registrationIntent.setPackage(GSF_PACKAGE);
registrationIntent.putExtra(EXTRA_APPLICATION_PENDING_INTENT,
    PendingIntent.getBroadcast(context, 0, new Intent(), 0));
registrationIntent.putExtra(EXTRA_SENDER, senderId);
context.startService(registrationIntent);
} 
```

我用`GSF_PACKAGE`和 不测试它`GSF_PACKAGE`。

`SenderId`是邮箱账号XXXX@XXX.com，我收到了这样的邮件：

```
From: noreply@google.com [mailto:noreply@google.com] 

Thank you for your interest in Android Cloud to Device Messaging (C2DM).
We've accepted your application into the trial group. The Google account
you requested as the sender account for your application:

 XXXX@XXX.com 
```

我在 AVD 模拟器中，并且我在模拟器中也有一个谷歌帐户。在真正的移动设备中，同样的事情。

我没有接到任何电话`C2DMBaseReceiver.onHandleIntent`，只显示该错误。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:23:00.267

您是否通过模拟器设置了您的 Google 帐户，如果没有，请通过设置-> 帐户和同步-> 添加帐户希望这有帮助！！！

# sql - pl/sql ：使用具有不同值的查询来访问变量（不同）分区

> ID：10651551
> 
> 赞同：1
> 
> 时间：2012-05-18T11:12:34.643
> 
> 标签：sql, oracle, plsql

一个表包含 2 个分区，即 x,y

我们必须使用不是常量值的变量来查询表，并且基于这些变量必须从 x 或 y 分区中获取数据

如果 Var =1 我们必须点击 x 分区，如果 var=2 我们必须点击 y 分区

就像是：

```
begin 
var :=&var

  delete  table partition(&var) where varaibles =some values

end; 
```

我遇到了一个问题“非法分区使用”

我们可以通过替换值来动态命中分区吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:21:15.660

如果要指定分区名称，则需要使用动态 SQL。

但是，您几乎不需要显式指定分区名称。假设您的`WHERE`子句包括对表分区的任何列的谓词，Oracle 将自动执行适当的分区修剪，以便它只需要命中数据存在的特定分区或分区。

# java - java的位置 在linkedhashmap中

> ID：10651552
> 
> 赞同：-1
> 
> 时间：2012-05-18T11:12:49.083
> 
> 标签：java, arrays, linkedhashmap

我一直在通过所有有关的帖子搜索几个小时，`LinkedHashMap`但我似乎缺少基础知识。

我将从 db 调用中生成一个 K,V 集，但不知道每个集是什么。一些 K,V 将被处理，而另一些则不

我需要迭代地图，获取位置 (indexOf[i]??) + K(String)。然后将其传递给另一个方法以询问如何处理 K（放入第二个数组）

然后基于第二个数组，我将处理调用 position[i] 所需的 K,V 集。

即 1) 轮询 db 以获取信息，记录返回如下 - abc txt - def blah - ghi blah - jkl txt 2) 循环记录并询问第二个脚本要做什么 - 像这样的 txt 过程..... - blah什么都不做 -保存 indexOf 以供快速参考，因为 K 可能会更改值。- 根据需要更改 K、V（纠正拼写错误、删除空格、strtolower 等） 3）根据需要进一步处理调用 indexOf（K 可能已如上更改）

那么`LinkedHashMap`使用正确的类型吗？

从 PHP 的角度来看似乎很容易，所以我对此必须有点厚。

任何代码示例都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:24:21.367

Java 中的映射不支持将索引分配给每个键值映射的概念。即使对于 也是如此`LinkedHashMap`，它的唯一优点是迭代顺序是可预测的。

我没有完全理解你的问题，但如果是“如何获取地图中键值映射的索引”，这是不可能的。您可以遍历地图并计算您在查找之前看到的键，但这当然是 O(n) 复杂度，而不是更快。

在 PHP 中这是不同的，因为默认数据结构是数组/列表和映射的某种组合，而在 Java 中，这些是不同的数据结构。

如果你把你的问题说得更清楚，也许我们可以提供一个更适合你的数据结构供你使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:32:20.600

听起来您需要能够通过键和位置有效地找到结构中的元素。

使用标准 Java 容器实现此目的的一种方法是将 a`Map`与 an 结合使用`ArrayList`（两者都存储对相同对象的引用）。前者可以通过键快速查找；后者，按位置。

插入这样的结构将是`O(n)`. 但是，听起来您只是在构建结构一次，然后没有对其进行修改。

最后，如果您不需要在给定键的情况下快速定位元素，您可以丢失`Map`并只使用`ArrayList`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:16:50.597

你的问题对我来说不是很清楚，但我想你是在问如何迭代地图。

您可以通过以下方式执行此操作：

```
 Map<String, String> map = new HashMap<String, String>();
    map.put("key1", "value1");
    for (Entry<String, String> entry : map.entrySet()) {
        String key = entry.getKey();
        String value = entry.getValue();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T11:31:33.000

我不完全确定你想做什么......

```
public void processDbResult(Map<K, V> map)
{
    // you got sth like this: 
    // Map<K, V> map = new LinkedHashMap<K, V>();
    for (Entry<K, V> entry : map.entrySet())
    {
        K key = entry.getKey();
        V value = entry.getValue();

        Object how = determine(key);

        process(how, entry);
    }
}

private void process(Object how, Entry<K, V> entry)
{
    // do something
}

private Object determine(K key)
{
    // determine processing steps
    return new Object();
} 
```

# excel - 随机化列

> ID：10651553
> 
> 赞同：0
> 
> 时间：2012-05-18T11:12:57.747
> 
> 标签：excel, random, shuffle

有没有办法随机化一行中不同列的值？这是一个例子：

选项 1 选项 2 选项 3 选项 4

格洛丽亚斯图尔特克莱尔丹尼斯金贝辛格凯特温斯莱特

卡森戴利克里斯洛克马修佩里大卫阿奎特

莫霍克秃头鲻鱼 Buzz Cut

Big Daddy Little Nicky The Waterboy 快乐吉尔摩

弗吉尼亚 意大利 英国 德国

有4列。目前，选项 4 下的所有输入都是问题的正确答案。我想将它们随机化或随机排列，以便答案可以是 A、B、C 或 D，而不是每个问题的答案总是 D。我有超过 10,000 个问题，因此单独更改它们会非常耗时。有什么帮助吗？我什么也找不到！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:39:20.930

**使用 VBA**

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim lRow As Long, i As Long
    Dim ar As Variant
    Dim varrRandomNumberList As Variant

    Set ws = Sheets("Sheet1")

    With ws
        lRow = .Range("A" & Rows.Count).End(xlUp).Row

        For i = 2 To lRow
            ar = .Range("A" & i & ":D" & i)

            varrRandomNumberList = UniqueRandomNumbers(4, 1, 4)

            .Range("A" & i).Value = ar(1, varrRandomNumberList(1))
            .Range("B" & i).Value = ar(1, varrRandomNumberList(2))
            .Range("C" & i).Value = ar(1, varrRandomNumberList(3))
            .Range("D" & i).Value = ar(1, varrRandomNumberList(4))
        Next i
    End With
End Sub

'~~> Function picked from
'~~> http://www.exceltip.com/st/Return_random_numbers_using_VBA_in_Microsoft_Excel/531.html
Function UniqueRandomNumbers(NumCount As Long, LLimit As Long, ULimit As Long) As Variant
    '~~> Creates an array with NumCount unique long random numbers in the range
    '~~> LLimit - ULimit (including)
    Dim RandColl As Collection, i As Long, varTemp() As Long
    UniqueRandomNumbers = False
    If NumCount < 1 Then Exit Function
    If LLimit > ULimit Then Exit Function
    If NumCount > (ULimit - LLimit + 1) Then Exit Function
    Set RandColl = New Collection
    Randomize
    Do
        On Error Resume Next
        i = CLng(Rnd * (ULimit - LLimit) + LLimit)
        RandColl.Add i, CStr(i)
        On Error GoTo 0
    Loop Until RandColl.Count = NumCount
    ReDim varTemp(1 To NumCount)
    For i = 1 To NumCount
        varTemp(i) = RandColl(i)
    Next i
    Set RandColl = Nothing
    UniqueRandomNumbers = varTemp
    Erase varTemp
End Function 
```

**快照**

![在此处输入图像描述](../Images/eaf405b986a96cf7f8dd189039fb08c8.png)

# mysql - MySQL：关于大数据

> ID：10651554
> 
> 赞同：0
> 
> 时间：2012-05-18T11:12:58.437
> 
> 标签：mysql

所以这是交易。我设计为存储每日股票报价数据的模式。我有两个表（除其他外）“todayData”和“historicalData”具有相同的结构。这两个表都有 innodb 引擎作为它们的存储引擎。两个表之间没有外键，是独立的。

如果我需要查看今天的数据，我查询今天的表，如果我需要生成报告或趋势分析等，我依赖于历史表。在午夜，今天的数据将移至历史表。

历史问题将在几周内变得庞大（> 10 GB 并且还在增加），不用说从单个表中提供这些数据是不明智的。

我应该怎么做才能确保生成的历史报告将快速且响应迅速。

人们建议进行分区等，但我想知道还有其他方法可以做到这一点吗？

谢谢

博

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:22:37.343

大数据没有灵丹妙药。一切都取决于数据和数据使用情况（访问模式等）。首先，确保表被正确索引，查询是最优的，并且你有足够的内存。而且，如果您在单个服务器、分片/分区上仍然要包含太多数据（但请注意选择分片键时的访问模式 - 如果您必须为单个报告查询多个分区，那就不好了。如果您真的必须这样做，请注意，确保您可以并行查询它们 - 目前使用内置分区是不可能的（因此您需要应用级分片逻辑）

# android - 解析 Json 字符串需要帮助

> ID：10651558
> 
> 赞同：-1
> 
> 时间：2012-05-18T11:13:10.520
> 
> 标签：android, json

```
{"sessid":"Vn1qRrhZWUQxaF4Vq3AS-TSaCHnDwgJa8dYtI7ER_Xs",
"session_name":"SESS7b83e2fe2bcfd6997077715ad8799a43",
"user_product":[{"id":"19","uid":"1","created":"1336803149","modified":"1336803149",
"subject":"Patras Bukhari",]}} 
```

> Blockquote 我有这个 json 在一个刺痛中，我想从我尝试过很多但无法做到的数组 user_product 中获取数据。我的项目是在 Android 上。提前感谢帮助谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:22:12.217

上面的 JSON 是您真正使用的 JSON 吗？如果是，则格式无效。我猜你可能会遇到一些使用它的异常。无论有效性如何，您都可以通过以下方式获取 user_product 数组

```
JSONObject source = new JSONObject(your_source);
JSONArray userProducts = source.getJSONArray("user_product");
for(int i = 0; i < userProducts.length(); i++){
  JSONObject product = userProducts.getJSONObject(i);
  int uid = product.getInt("uid"); //get the uid as integer
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:20:13.247

检查以下代码

```
 String a = {"sessid":"Vn1qRrhZWUQxaF4Vq3AS-TSaCHnDwgJa8dYtI7ER_Xs",
 "session_name":"SESS7b83e2fe2bcfd6997077715ad8799a43",
 "user_product":[{"id":"19","uid":"1","created":"1336803149","modified":"1336803149",
 "subject":"Patras Bukhari",]}}

 JSONObject json1 = new JSONObject(a);
 JSONArray userProduct = json1.getJSONArray("user_product");
 for(int i = 0; i < userProduct.length();i++){
   JSONObject tempJSON = userProduct..getJSONObject(i);
   String id = tempJSON.getString("id");
   String uid = tempJSON.getString("uid");
   String created = tempJSON.getString("created");
   String modified = tempJSON.getString("modified");
   String subject = tempJSON.getString("subject");
 } 
```

希望这能解决你的问题

# php - 函数 move_uploaded_file() 不返回真实结果

> ID：10651559
> 
> 赞同：0
> 
> 时间：2012-05-18T11:13:13.640
> 
> 标签：php, upload

我尝试 move_uploaded_file()，我需要真假结果，但我不返回假！它总是返回真！

```
move_uploaded_file( $_FILES['form_pic']['tmp_name'][$i], $dest.$picture_name); 
```

我想知道填充了哪些文件字段

```
 for ( $i=0 ; $i<5 ; $i++ )
            {

             move_uploaded_file( $_FILES['form_pic']['tmp_name'][$i], $dest.$picture_name);
            { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:18:34.073

没有你的 html 很难说，但绝对`$_FILES['form_pic']['tmp_name']`不是一个数组，所以你应该尝试`$_FILES['form_pic'][$i]['tmp_name]`.

# android - 如何将图像保存在我的应用程序数据库中而不是 sd 卡中

> ID：10651560
> 
> 赞同：0
> 
> 时间：2012-05-18T11:13:15.577
> 
> 标签：android, database, android-canvas

我使用 SPenSdk 库创建了一个应用程序。我的应用程序只需打开一个`canvasView`，然后我将该画布视图保存为 sd 卡中的图像。现在，当用户从设备中取出 sd 卡时，就会出现问题。当时，当我运行我的应用程序时，它会崩溃，因为它无法找到要加载的图像。那么有什么方法可以保存使用画布视图创建的图像，使其成为应用程序的一部分。所以移除 sd 卡不会影响应用程序。

**将图像保存在 SD 卡中的代码**

```
public class CanvasActivity extends Activity 
{
public static final String DEFAULT_APP_IMAGEDATA_DIRECTORY = "/mnt/sdcard/SmemoExample";

private File        m_Folder = null;

private String      m_FileName;

public static final String SAVED_FILE_EXTENSION = "png";

public static final String EXTRA_IMAGE_PATH = "path";
public static final String EXTRA_IMAGE_NAME = "filename";

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);

    m_Folder        = new File(DEFAULT_APP_IMAGEDATA_DIRECTORY);

    m_FileName = getIntent().getStringExtra(EXTRA_IMAGE_NAME);        
    loadCanvas(m_FileName);
}

public boolean saveCanvas() 
{
    byte[] buffer = m_CanvasView.getData();

    if (buffer == null)
        return false;
    if (!(m_Folder.exists()))
        m_Folder.mkdirs();

    String savePath = null;
    if(m_FileName == null)
    {
        savePath = m_Folder.getPath() + '/' + UtilitiesActivity.getUniqueFilename(m_Folder, "image", SAVED_FILE_EXTENSION);
    }
    else
    {
        savePath = m_Folder.getPath() + '/' + m_FileName;
    }

    if (UtilitiesActivity.writeBytedata(savePath, buffer))
        return true;
    else
        return false;
}

public boolean loadCanvas(String fileName) 
{
    String loadPath = m_Folder.getPath() + '/' + fileName;

    byte[] buffer = UtilitiesActivity.readBytedata(loadPath);

    if (buffer == null)
        return false;

    m_CanvasView.setData(buffer);

    return true;
}

private CanvasView.OnHistoryChangeListener historyChangeListener = new CanvasView.OnHistoryChangeListener() 
{
    @Override
    public void onHistoryChanged(boolean bUndoable, boolean bRedoable) 
    {
        m_UndoButton.setEnabled(bUndoable);
        m_RedoButton.setEnabled(bRedoable);
    }
};

CanvasView.InitializeFinishListener mInitializeFinishListener = new CanvasView.InitializeFinishListener() {

    @Override
    public void onFinish() {
        Bitmap bg = BitmapFactory.decodeResource(getResources(), R.drawable.canvas_bg);
        m_CanvasView.setBackgroundImage(bg);
        bg.recycle();
    }
};
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:24:54.553

问题不是数据库或非数据库问题是您的图像在哪里。设备上的空间有限，但如果您不想将图像存储在 sdcard 上，您应该将它们存储在设备的板载内存中。将它们填充到数据库 blob 中对您没有帮助（实际上，它只会让事情变得更复杂）。

这是你的做法：http: [//developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

# javascript - 打开我的文档

> ID：10651562
> 
> 赞同：0
> 
> 时间：2012-05-18T11:13:22.130
> 
> 标签：javascript, jquery

您好，我在“我的文档”中有一个文件链接，这是一个内部网站。如何使用 JS 或 JQ 打开用户本地 MY Documents 文件夹

我使用了这段代码，并认为文档会出现在网页中，但它没有

```
address = "G:\systems Projects"  ; 

window.open(address,"Detail ","width=800,height=600"  ) 
```

任何帮助表示赞赏！， 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:15:44.713

使用[`file://`](http://en.wikipedia.org/wiki/File_URI_scheme)协议：

```
address = "file:///G:/systems Projects"; 
```

# iphone - UITableview 部分 iPhone 中的延迟加载

> ID：10651564
> 
> 赞同：0
> 
> 时间：2012-05-18T11:13:26.233
> 
> 标签：iphone

我有“n”个带有图像的数组，我想使用延迟加载概念在 tableview 的“n”个部分中相应地显示图像。我知道如何在包含一个部分的表中显示一个数组图像。有人可以帮我吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:17:00.627

你几乎做同样的事情；但如果图像作为 tableView:numberOfRowsInSection 中的行并返回 numberOfSectionsInTableView: 作为 1，而不是返回数字 - 你扭转了局面。让 tableView:numberOfRowsInSection 返回 1（所以每个图像一个部分）和 numberOfSectionsInTableView: 返回图像的数量。

你的 tableView:cellForRowAtIndexPath: 代码看到了同样的变化；而不是从 indexPath.row 中获取索引，而是从 indexPath.section 中获取索引。

差不多就是这样。

德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:18:28.863

只是：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

    return [yourImagesArray count];
} 
```

# java - 如何在 playn 游戏中实现滚动视图？

> ID：10651566
> 
> 赞同：1
> 
> 时间：2012-05-18T11:13:32.493
> 
> 标签：java, gwt, scrollview, playn

我需要在图像层上使用滚动视图，这样图像层上的按钮应该在触摸/单击和移动时滚动。

我已经创建了图像层，上面有按钮。我怎样才能使它可以滚动？

期待中的感谢。

# c# - 正则表达式在字符串中查找 2 个数字

> ID：10651570
> 
> 赞同：1
> 
> 时间：2012-05-18T11:13:53.367
> 
> 标签：c#, regex

我有以下字符串：

```
10-0
5-8
1-19 
```

如果字符串包含 [num]-[num]，我想得到一个“True”，否则它应该返回“False”。

我应该如何使用正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:16:31.473

它应该是这样的`^((\d+)-(\d+))$`

```
Regex objPattern=new Regex(@"((\d+)-(\d+))$");
bool val = objPattern.IsMatch("12-34"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:15:52.687

我不知道如何在 c# 中使用正则表达式，但这里有一个与您的模式匹配的正则表达式：`\d+-\d+`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T11:19:26.320

```
Regex reg = new Regex(@"(\d+)-(\d+)") 
```

# java - 如何解决 Spring Controller 测试用例中的 NoSuchMethodError？

> ID：10651575
> 
> 赞同：6
> 
> 时间：2012-05-18T11:13:59.810
> 
> 标签：java, spring, spring-mvc, spring-test

```
java.lang.NoSuchMethodError: 
org.junit.runner.notification.RunNotifier.testAborted(Lorg/junit/ 
runner/Description;Ljava/lang/Throwable;)
        at  org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestM­ethod(SpringJUnit4ClassRunner.java:
155) 
```

并为控制器编写测试用例，例如为 Spring Controller 类编写测试用例：

### TestXController.java

```
@RunWith(SpringJUnit4ClassRunner.class) 
@ContextConfiguration(locations={"file:D:/ABC/src/main/webapp/WEB-INF/
xyz-servlet.xml", 
"file:D:/ABC/src/main/webapp/WEB-INF/xyzrest-servlet.xml"}) 

    public class TestXController  { 

    @Inject 
    private ApplicationContext applicationContext; 

    private MockHttpServletRequest request; 
    private MockHttpServletResponse response; 
    private HandlerAdapter handlerAdapter; 
    private XController controller; 

    @Test 
    public void setUp() { 
       request = new MockHttpServletRequest(); 
       response = new MockHttpServletResponse(); 
       handlerAdapter =  applicationContext.getBean(HandlerAdapter.class); 
       // I could get the controller from the context here 
       controller = new XController(); 
    } 

    @Test 
    public void testgoLoginPage() throws Exception { 

        request.setAttribute("login", "0"); 

        final org.springframework.web.servlet.ModelAndView mav =  handlerAdapter.handle(request, response, controller); 
        assertViewName(mav, null); 
        assertAndReturnModelAttributeOfType(mav, "login", null); 
    } 

    @Test 
    public void testgoHomePage(){ 

        org.springframework.web.servlet.ModelAndView mav =null; 

        request.setAttribute("success1", "1"); 
        request.setAttribute("success", "1"); 

                try { 
                        mav = handlerAdapter.handle(request, response, controller); 
                } catch (Exception e) { 
                        // TODO Auto-generated catch block 
                        e.printStackTrace(); 
                } 

        assertViewName(mav, null); 
        assertAndReturnModelAttributeOfType(mav, "home",null); 
    } 
```

任何人都可以指导我为 Spring Controller 类编写测试用例，或任何代码示例链接。

谢谢和问候，维努·戈帕拉·雷迪。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T11:20:38.647

是的，请确保您使用的是正确版本的 JUnit。我认为与 Spring 测试 JAR 不匹配，迫使您使用 JUnit 4.4。

# c# - 遍历 XML 时的 Linq 重复元素

> ID：10651576
> 
> 赞同：2
> 
> 时间：2012-05-18T11:14:07.173
> 
> 标签：c#, xml, linq

```
 <?xml version='1.0' encoding='utf-8' standalone='yes'?>
    <stock-items>
      <stock-item>
        <name>Loader 34</name>
        <sku>45GH6</sku>
        <vendor>HITINANY</vendor>
        <useage>Lifter 45 models B to C</useage>
        <typeid>01</typeid>
        <version>01</version>
        <reference>33</reference>
        <comments>EOL item. No Re-order</comments>
        <traits>
          <header>56765</header>
          <site>H4</site>
          <site>A6</site>
          <site>V1</site>
        </traits>  
        <type-validators>
          <actions>
            <endurance-tester>bake/shake</endurance-tester>
          </actions>
          <rules>
            <results-file>Test-Results.txt</results-file>
            <file-must-contain file-name="Test-Results.xml">
              <search>
                <term>[<![CDATA[<"TEST TYPES 23 & 49 PASSED"/>]]></term>
                <search-type>exactMatch</search-type>
              </search>
            </file-must-contain>
          </rules>
        </type-validators>
      </stock-item>
    </stock-items> 
```

我试图将上述 xml 中的**规则**片段转换为字符串，以便将其添加到数据库中。目前，**搜索**元素及其内容被添加了两次。我知道为什么会发生这种情况，但不知道如何防止它。

这是我的代码

```
 var Rules = from rules in Type.Descendants("rules")
                                       select rules.Descendants(); 

              StringBuilder RulesString = new StringBuilder();

              foreach (var rule in Rules)
                    {   
                      foreach (var item in rule)
                      {      
                              RulesString.AppendLine(item.ToString());
                      }
                    }

 Console.WriteLine(RulesString); 
```

最后，**规则**中的任何元素都是可选的，其中一些元素*可能*包含也*可能不*包含其他高达 4 或 5 层深度的子元素。TIA

**更新：** 尝试使我想要实现的目标更加清晰。

从上面的 xml 中，我最终应该得到一个包含规则元素中所有内容的字符串*，*就像*这样*：

```
<results-file>Test-Results.txt</results-file>
                <file-must-contain file-name="Test-Results.xml">
                  <search>
                    <term>[<![CDATA[<"TEST TYPES 23 & 49 PASSED"/>]]></term>
                    <search-type>exactMatch</search-type>
                  </search>
                </file-must-contain> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:02:48.840

> 目标是按原样提取规则元素的全部内容，同时考虑到规则元素可能包含也可能不包含多个层次的子元素

如果您只想将整个`rules`元素作为一个字符串（而不是将其内容视为 xml），则无需深入研究其内容，只需将元素获取为 an`XNode`然后[调用 ToString() on它](http://msdn.microsoft.com/en-us/library/bb341005.aspx)：

> 以下示例使用此方法检索缩进的 XML。
> 
> ```
> XElement xmlTree = new XElement("Root",
>     new XElement("Child1", 1)
> );
> Console.WriteLine(xmlTree); 
> ```
> 
> 此示例产生以下输出：
> 
> ```
> <Root>
>   <Child1>1</Child1>
> </Root> 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:12:01.563

如果要防止重复，则需要在解析 xml 之后和构建字符串之前使用 Distinct() 或 GroupBy()。

我仍然没有完全理解输出应该是什么，所以我无法就定位重复项的确切使用或如何使用提供明确的解决方案。如果您可以改进原始帖子，那将有所帮助。

1.  我们需要 xml 的结构，因为它会出现在您的场景中。嵌套和所有。
2.  我们需要一个最终字符串的示例。将其保存到数据库对于这篇文章并不重要，因此您只需简要提及一次，如果有的话。

# iphone - 使用 RestKit 解析嵌套的动态 JSON

> ID：10651577
> 
> 赞同：1
> 
> 时间：2012-05-18T11:14:10.493
> 
> 标签：iphone, objective-c, ios, restkit

我正在尝试使用**RESTKIT解析以下 JSON**

```
{
        “0”：{
            “页”： {
                "url": "http://www.zmtcdn.com/menus/307/1.jpg",
                “thumb_url”：“http://www.zmtcdn.com/menus/307/1_thumb.jpg”
                          }
             },
        “1”：{
            “页”： {
                "url": "http://www.zmtcdn.com/menus/307/2.jpg",
                “thumb_url”：“http://www.zmtcdn.com/menus/307/2_thumb.jpg”
                          }
             },
        “menu_url”：“http://www.zomato.com/ncr/restaurants/south-delhi/mathura-road/sagar-ratna-315/menu#tabtop”
}

```

我所做的与此相对应的课程是：-

```
@interface ImageCollections : ZomatoObject

@property (nonatomic, strong) NSString* ignore;
@property (nonatomic, strong) NSString* keyTerm;
@property (nonatomic, strong) ImageUrl*  menus;
@property (nonatomic, strong) ImageUrl* photos;

@end 
```

相应的实现是

```
+ (RKObjectMapping *) getObjectMapping
{
    RKObjectMapping *objectMapping = [RKObjectMapping mappingForClass:[ImageCollections class]];
    [objectMapping mapKeyPath:@"menu_url" toAttribute:@"ignore"];
    objectMapping.forceCollectionMapping = YES;
    [objectMapping mapKeyOfNestedDictionaryToAttribute:@"keyTerm"];
    [objectMapping mapKeyPath:@"(keyTerm).page" toRelationship:@"menus" withMapping:[ImageUrl getObjectMapping]];
    return objectMapping;
} 
```

类似地，ImageUrl 类的对象映射是

```
+ (RKObjectMapping *) getObjectMapping
{
    RKObjectMapping *objectMapping = [RKObjectMapping mappingForClass:[ImageUrl class]];
    [objectMapping mapKeyPath:@"url" toAttribute:@"url"];
    [objectMapping mapKeyPath:@"thumb_url" toAttribute:@"thumbUrl"];
    return objectMapping;
} 
```

但我遇到了一个例外

```
*** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[valueForUndefinedKey:]：此类不符合关键页面的关键值编码。”

```

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:29:51.707

评估页面键路径的值是什么？您是否尝试过使用单元测试来执行映射？

# events - DataGrid 行上的事件添加、更新、observableCollection 事件？

> ID：10651579
> 
> 赞同：0
> 
> 时间：2012-05-18T11:14:20.793
> 
> 标签：events, datagrid, row, observablecollection

我有一个实现 INotifyPropertyChanged 的​​类 Seive。我有一个 ObservableCollection SeiveList。我输入所需 Seive 的详细信息并在 dataGrid 中显示这些 Seive。SeiveList 是我的dataGrid 的DataContext。

在添加/更新每个 Seive 时，我必须执行某些计算并显示它们。在 Datarid 中，我找不到添加或更新行的任何事件。我发现了 SourceChanged 事件，但我猜想在设置 DataContext 时也只触发一次，否则在 SeiveList 中添加/更新 Seive 时，什么都不会触发。

我处理哪个事件可以帮助我知道是否添加或更新了任何行，以便我可以执行计算并显示每次更改的结果？我开始了解 ObservableCollection 的 CollectionChanged 事件，但也发现它不起作用。此外，我没有任何实现 ObservableCollection 的类。我该怎么做呢？？？

非常感谢任何帮助。请尽早帮助他们。我坚持这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T07:36:44.873

我得到了解决方案：我实现了我的 ObservableCollection 对象的 CollectionChanged 事件，添加了要在其中完成的计算，而没有推回我更改的对象但集合 obj 已更改。这很好用。

谢谢

# vector - VHDL计算，不同但仍然相同

> ID：10651580
> 
> 赞同：1
> 
> 时间：2012-05-18T11:14:25.053
> 
> 标签：vector, vhdl, xilinx

很难解释标题中的问题，所以请继续阅读。

我有一个项目，我们正在实施 sobel 过滤器。起初，使用 sobel 计算，图像无法正常工作

```
Gx <= ("000" & p3-p1)+(("00" & p6 & '0')-("00" & p4 & '0'))+("000" & p9-p7);
Gy <= ("000" & p7-p1)+(("00" & p8 & '0')-("00" & p2 & '0'))+("000" & p9-p3); 
```

但以不同的方式表达相同的计算

```
Gx <= ("000" & p3)+("00" & p6 & '0')+("000" & p9)-("000" & p1)-("00" & p4 & '0')-("000"
 & p7);
Gy <= ("000" & p7)+("00" & p8 & '0')+("000" & p9)-("000" & p1)-("00" & p2 & '0')-("000"
 & p3); 
```

它工作得很好。尽管如此，仅过滤器的模拟是完全相同的。这与我如何在向量之前填充零有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:23:22.897

在不知道数据类型的情况下，我不能完全确定这是否是原因，但我的猜测是，如果`p1 > p3`（以及其他一些）你将从这两种类型的计算中得到不同的结果。伪代码示例：

```
p1 = "010";
p3 = "001";

--Method1:
res = "000" & p3-p1 = "000" & "111" = "000111";

--Method2
res = ("000" & p3) - ("000" & p1) = "000001" - "000010" = "111111"; 
```

# javascript - Javascript：在页面加载后加载外部脚本

> ID：10651583
> 
> 赞同：2
> 
> 时间：2012-05-18T11:14:32.943
> 
> 标签：javascript, sharethis

我正在使用 ShareThis 在我的网站上包含一个不错的社交网络共享栏。问题是它有时加载速度非常慢，并且页面加载会持续几秒钟。

以下内容必须包含在 HTML 头中：

```
<script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript" src="http://s.sharethis.com/loader.js"></script> 
```

然后以下是正文的底部：

```
<script>
var options={ "publisher": "xxxxxxxxxxxxxxxxxxxx", "position": "left", "ad": { "visible": true, "openDelay": 5, "closeDelay": 0}, "chicklets": { "items": ["facebook", "googleplus", "pinterest", "amazon_wishlist", "email", "sharethis"]}};
var st_hover_widget = new sharethis.widgets.hoverbuttons(options);
</script> 
```

我在想，如果我可以强制它在页面之后加载，那么它不会减慢页面速度。是否有捷径可寻？例如，是否可以在页面加载后通过javascript将所有这些代码插入到HTML中的正确位置，然后继续按应有的方式加载，以便页面快速加载，然后ShareThis栏可以在其余部分加载页面的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:30:45.673

```
<script id="shareThisScript" type="text/javascript">var switchTo5x=true;</script>

<script type="text/javascript">
    setTimeout(function() {
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.src = 'http://w.sharethis.com/button/buttons.js';
        var c = document.getElementById('shareThisScript');
        c.parentNode.appendChild(s, c);

        s = document.createElement('script');
        s.type = 'text/javascript';
        s.innerHTML = 'var options={ "publisher": "xxxxxxxxxxxxxxxxxxxx", "position": "left", "ad": { "visible": true, "openDelay": 5, "closeDelay": 0}, "chicklets": { "items": ["facebook", "googleplus", "pinterest", "amazon_wishlist", "email", "sharethis"]}};var st_hover_widget = new sharethis.widgets.hoverbuttons(options);';
        c.parentNode.appendChild(s, c);
    }, 10);
</script> 
```

不知道你为什么使用 loader.js。没有它，它就可以在我们的网站上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T16:28:43.560

使用这样的按钮使用延迟加载（但不适用于底部栏）：

```
 window.onload = function() {       
    LazyLoad.js( ['http://w.sharethis.com/button/buttons.js','http://s.sharethis.com/loader.js'], function () {
      stLight.options(
        { publisher: "xxxxxxxxxxxxxx", doNotHash: true, doNotCopy: true ,hashAddressBar: false}
      );
    }); 
  } 
```

检查这个[延迟加载](http://blog.akademy.co.uk/2013/05/controlling-javascript-with-lazyload-a-sharethis-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T20:02:28.203

您能否将 sharethis 代码放在单独的框架中？然后主页和社交栏将彼此独立加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T11:17:17.570

我们可以使用 require.js 作为脚本或模块加载器，看看它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T11:18:02.580

听起来你在[延迟加载](http://friendlybit.com/js/lazy-loading-asyncronous-javascript/)之后！

```
(function() {
    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = 'http://w.sharethis.com/button/buttons.js';
    var x = document.getElementsByTagName('script')[0];
    x.parentNode.insertBefore(s, x);
})(); 
```

# java - 只有在与关联的按钮被单击两次后，才能通过 EditText 显示正确的输出

> ID：10651584
> 
> 赞同：0
> 
> 时间：2012-05-18T11:14:33.597
> 
> 标签：java, android

我正在编写一个小代码来将一种货币转换为另一种货币。该应用程序通过 EditText 接受两个值（配置为接受十进制数字）- 1) 本国或外地货币（如果填写了一个，则另一个字段留空） 2) 汇率。

这是代码：

```
package kk.currency;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;
import android.widget.Toast;

public class CurrencyActivity extends Activity {
    /** Called when the activity is first created. */

    EditText inpval1;
    EditText inpval2;
    EditText rate;

    int v1 = 0;
    int v2 = 0;
    int r = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void btnclick(View view)  {
        try {
            inpval1 = (EditText)findViewById(R.id.away);
            v1 = Integer.parseInt(inpval1.getText().toString());

            inpval2 = (EditText)findViewById(R.id.home);
            v2 = Integer.parseInt(inpval2.getText().toString());

            rate = (EditText)findViewById(R.id.rate);
            r = Integer.parseInt(rate.getText().toString()); 
        }
        catch (Exception e) {
            Toast.makeText(this, "Empty field", Toast.LENGTH_SHORT).show();
        }
        finally {
            v1 = v2 * r;

            EditText destination = (EditText)findViewById(R.id.away);
            destination.setText(Integer.toString(v1));
        }
    }   
} 
```

问题是，在单击与“btnclick”关联的按钮时，无论输入什么，该字段（以及应该显示答案的位置）都显示为 0。但是当再次单击时，会显示正确的答案。

如果我在应该留空的字段中输入任何值，则第一次显示正确的值。

可能是什么问题？！

在删除“finally”并将其内容放入“try”时，我什至在单击按钮时都没有得到任何响应。

此外，在应用程序执行期间，LogCat 是完全空的。

这是有人要求的应用程序布局。

```
<?xml version="1.0" encoding="utf-8"?><LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="25dip"
    android:layout_marginLeft="5dip"
    android:text="@string/away"
    android:textStyle="bold"
    android:textSize="20dip"
    android:textColor="#4199ae" />

<EditText
    android:id="@+id/away"
    android:digits="0123456789."
    android:inputType="number"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dip"
    android:hint="@string/c1" />

<TextView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="25dip"
    android:layout_marginLeft="5dip"
    android:text="@string/conv"
    android:textStyle="bold"
    android:textSize="20dip"
    android:textColor="#4199ae" />

<EditText
    android:id="@+id/rate"
    android:digits="0123456789."
    android:inputType="number"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dip"
    android:hint="@string/rate" />

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="25dip"
    android:layout_marginLeft="5dip"
    android:text="@string/home"
    android:textStyle="bold"
    android:textSize="20dip"
    android:textColor="#4199ae" />

<EditText
    android:id="@+id/home"
    android:digits="0123456789."
    android:inputType="number"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dip"
    android:hint="@string/c2" />

<Button
    android:id="@+id/but"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="25dip"
    android:text="@string/buttxt"
    android:onClick="btnclick" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:38:28.093

我在 Reddit 上的回复：

您的问题是因为您没有处理用户可能拥有的各种可能的输入。第一时间，在这条线上

> v1 = Integer.parseInt(inpval1.getText().toString());

的价值

> inpval1.getText().toString()

返回“”，**它不能转换为整数**，因此会导致异常。您应该会看到“空字段”Toast 出现。所以在那之后，它进入了最后一步，但是因为 v2 和 r 仍然是 0，所以它把 0 放在 v1 中，并将 0 放在离开的 EditText 中。

下次运行时，它会从 Away EditText 中获取 0，并且可以正常工作。你知道怎么调试吗？如果您使用的是 Eclipse，请双击要暂停的行，在最左侧的灰色/蓝色栏中，这将放置一个小断点图标，程序将停在那里。

因此，如果您在开始时删除 EditText 值的获取，它应该可以工作。此外，您还想在这里实现一些其他建议，因为每次单击按钮时都会通过获取指向控件视图的指针来做一些多余的工作。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:27:49.033

尝试这种方式，但请记住更改代码以匹配您正在使用的按钮 ID。

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;
import android.widget.Toast;

public class CurrencyActivity extends Activity {
/** Called when the activity is first created. */

    EditText inpval1;
    EditText inpval2;
    EditText rate;
    EditText destination;
    Button mbutt;
    int v1 = 0;
    int v2 = 0;
    int r = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mbutt = (Buttn)findViewById(R.id.SubmitButton);
        inpval1 = (EditText)findViewById(R.id.away);
        inpval2 = (EditText)findViewById(R.id.home);
        rate = (EditText)findViewById(R.id.rate);
        EditText destination = (EditText)findViewById(R.id.away);

        mbutt.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                         v1 = Integer.parseInt(inpval1.getText().toString());
                         v2 = Integer.parseInt(inpval2.getText().toString());
                         r = Integer.parseInt(rate.getText().toString()); 
                         v1 = v2 * r;
                         destination.setText(Integer.toString(v1));
                }
            });
    }    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:45:11.477

尝试不使用 try catch 块，但如果你仍然想坚持这一点，那么请将 finally 中的代码放入 try 块中，并删除 finally 块。

像这样 ：

```
public void btnclick(View view)  {

    try {
                 inpval1 = (EditText)findViewById(R.id.away);
                 v1 = Integer.parseInt(inpval1.getText().toString());

                 inpval2 = (EditText)findViewById(R.id.home);
                 v2 = Integer.parseInt(inpval2.getText().toString());

                 rate = (EditText)findViewById(R.id.rate);
                 r = Integer.parseInt(rate.getText().toString()); 

                 v1 = v2 * r;

                  EditText destination = (EditText)findViewById(R.id.away);
                  destination.setText(Integer.toString(v1));
        }

    catch (Exception e) {
        Toast.makeText(this, "Empty field", Toast.LENGTH_SHORT).show();
    } 
```

# ms-access - Access 2000 前端默认以设计模式打开

> ID：10651592
> 
> 赞同：0
> 
> 时间：2012-05-18T11:15:00.633
> 
> 标签：ms-access

我正在访问 2000 前端。当我双击它时，它正在设计中打开。但我希望它只在运行模式下打开。只有当我按 SHIFT 键单击 mdb 文件时，它才应该打开表单是设计模式。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:41:11.333

您需要设置“启动”选项以在打开时显示默认表单，或者如果您有更多自定义任务要在启动时执行，您可以创建“Autoexec”宏。

# java - java.util.Calendar 中的 complete() 方法

> ID：10651595
> 
> 赞同：4
> 
> 时间：2012-05-18T11:15:09.970
> 
> 标签：java, calendar, language-design

Calendar 类中的`complete()`方法执行以下操作：

```
protected void complete() 
```

> 填写日历字段中任何未设置的字段。首先，如果尚未从日历字段值计算时间值（与 Epoch 的毫秒偏移量），则调用 computeTime() 方法。然后，调用 computeFields() 方法来计算所有日历字段值。

该`complete()`方法具有以下代码：

```
protected void complete()
    {
        if (!isTimeSet)
        updateTime();
        if (!areFieldsSet || !areAllFieldsSet) {
            computeFields(); // fills in unset fields
            areAllFieldsSet = areFieldsSet = true;
        }
    } 
```

我的问题是这个循环工作的意义是什么？第一个值来自

```
protected int[] fields 
```

用于更新的值

```
long time 
```

使用`computeTime()`方法。然后使用 的值`time`来更新`fields`using中的值`computeFields()`。在调用自身后两者中的值将保持同步，`time`对吗`fields`？`computeTime()`还是我在这里遗漏了什么？

对于那些可能会问为什么它如此重要的人，这是因为在日历中重新计算时间的顺序通常会改变我们从中获取的时间`getTime()`（或者我已经阅读过）！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:39:33.353

它不是圆形的。

想象一下，您有一个`Calendar`对象，其中设置了一些（但不是全部）字段。此方法将 (a)`long time`从设置的字段中计算并保存 epoch ( ) *，*然后 (b) 将所有未设置的字段设置为与其刚刚计算的 epoch 一致。

因此，当该方法完成时，您将拥有一个`Calendar`所有字段都已填写且一致。这是从您开始的对象的不同、更好的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:48:38.260

Quantum 说的很对。。再补充一点，你不能直接从可用字段中计算缺失字段的值，你必须经历计算时间值然后从那个值中填充缺失字段的过程.

# c - 如果结构初始化在 C 中失败，则返回 NULL？

> ID：10651600
> 
> 赞同：14
> 
> 时间：2012-05-18T11:15:22.277
> 
> 标签：c, struct, initialization

我有这个 C 代码：

```
#include<stdio.h>

typedef struct {
    int foo;
} MyStruct;

MyStruct init_mystruct(void);

int main(void) {

    MyStruct mystruct   = init_mystruct();

    if( mystruct == NULL ) {
        /* error handler */
    }

    return(0);
}

MyStruct init_mystruct(void) {

    MyStruct mystruct;
    int is_ok   = 1;

    /*
     * do something ...
     */

    /* everything is OK */
    if( is_ok )
        return mystruct;
    /* something went wrong */
    else
        return NULL;
} 
```

它有一个结构和一个初始化该结构的函数。如果该函数出现故障，我要做的是返回 NULL 。

gcc 错误信息：

```
code.c: In function ‘main’:
code.c:13: error: invalid operands to binary == (have ‘MyStruct’ and ‘void *’)
code.c: In function ‘init_mystruct’:
code.c:34: error: incompatible types when returning type ‘void *’ but ‘MyStruct’ was expected 
```

看起来返回NULL而不是结构是无效的，那么在这种情况下如何表达结构初始化失败（没有结构指针）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-18T11:17:32.720

```
 if( mystruct == NULL ) 
```

`mystruct`不是指针，因此您无法将其与`NULL`.

你有三个选择：

1.  添加一个状态字段来`MyStruct`指示结构是否已正确初始化。
2.  在堆上分配结构并通过指针返回。
3.  将结构作为指针参数传递并返回状态码（感谢@Potatoswatter）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T11:20:30.053

结构不是指针。如果您希望能够返回 NULL，则必须在堆上分配结构，以便可以返回指向它的指针，然后让调用者清理。

这样，您可以指示失败，例如：

```
MyStruct *init_mystruct (void) {
    MyStruct *mystruct = malloc (sizeof (*mystruct));
    if (mystruct != NULL)
        return NULL;

    int is_ok   = 1;
    /* do something ... */

    /* everything is OK */
    if( is_ok )
        return mystruct;

    /* something went wrong */

    free (mystruct);
    return NULL;
}

int main (void) {
    MyStruct *mystruct = init_mystruct();

    if (mystruct == NULL) {
        /* error handler */
        return -1;
    }

    free (mystruct);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T11:19:59.690

`NULL`*如果函数返回指针*，则可以使用。在这种情况下，您返回一个对象，这意味着您必须返回一个真实的、现有的对象。

这样做的一种方法是在结构中有一个“ok”字段，您可以在 init 函数中设置该字段，并且您可以签入调用者。

另一种方法是重写代码，以便动态分配结构并返回指针，这样你可以在失败时返回 NULL。（但请注意，动态分配事物还有其他缺点。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T11:19:07.693

正如 Als 指出的那样， mystruct 不是指针，因此比较并不意味着有意义。

您必须执行以下任一操作：

a）动态分配结构并在成功时返回。否则释放它并返回 null

或者

b) 在结构中包含一个错误标志并对其进行测试。

# java - 与 Java 驱动程序一起使用时，如何在 Selenium 中触发链接的点击事件？

> ID：10651616
> 
> 赞同：3
> 
> 时间：2012-05-18T11:16:15.867
> 
> 标签：java, eclipse, selenium, selenium-rc

我用

```
selenium.click("link=Sign In"); 
```

我尝试使用

```
selenium.click(".//*[@id='global-signin']/a"); 
```

两者都没有给我结果。

我收到如下错误：-

> 元素链接 =“登录”未找到错误。

代码：

```
package package1_IdentifyPageOpened;

import com.thoughtworks.selenium.*;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
//import java.util.regex.Pattern;

public class PublicClass3 {

    /**
     * @param args
     */
    Selenium selenium;

    @Before
    public void setUp() throws Exception {
        selenium = new DefaultSelenium("localhost", 4444, "*firefox", "http://www.washingtonpost.com/");
        selenium.start();
    }

    @Test
    public void testTt4() throws Exception {
        selenium.open("/");
        selenium.click("link=Sign In");
        selenium.type("name=MemberName", "mcXXX@gmail.com");
        selenium.type("name=Password", "PPP@123");
        selenium.click("name=submit");
        selenium.waitForPageToLoad("30000");

    }

    @After
    public void tearDown() throws Exception {
        selenium.stop();
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub

    }

} 
```

故障跟踪：

```
 com.thoughtworks.selenium.SeleniumException: ERROR: Element link=Sign
 In not found   at
 com.thoughtworks.selenium.HttpCommandProcessor.throwAssertionFailureExceptionOrError(HttpCommandProcessor.java:112)
    at
 com.thoughtworks.selenium.HttpCommandProcessor.doCommand(HttpCommandProcessor.java:106)
    at
 com.thoughtworks.selenium.DefaultSelenium.click(DefaultSelenium.java:193)
    at
 package1_IdentifyPageOpened.PublicClass3.testTt4(PublicClass3.java:29)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at
 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)    at
 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)    at
 java.lang.reflect.Method.invoke(Unknown Source)    at
 org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at
 org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at
 org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at
 org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at
 org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at
 org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)    at
 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at
 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)  at
 org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)    at
 org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)  at
 org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)    at
 org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)   at
 org.junit.runners.ParentRunner.run(ParentRunner.java:300)  at
 org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at
 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at
 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at
 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at
 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at
 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T13:57:16.700

我之前也遇到过同样的问题，在 selenium 中经常出现“找不到元素”问题。这个问题的可能原因如下：

1.  当您执行“单击元素”时，该元素尚未显示在页面中，可能是在加载过程中，然后 selenium 将抛出异常：找不到元素。

2.  元素的标识错误，可能是拼写错误或 selenium 不支持标识方式。

我访问了您测试的网站，[http://www.washingtonpost.com](http://www.washingtonpost.com)

当您导出为 Java 时，始终记录的测试用例`SeleniumIDE`不起作用。

这是我的代码：

```
 public class Website extends SeleneseTestBase {
     @BeforeMethod
     public void setUp() throws Exception {
         selenium = new DefaultSelenium("localhost", 4444, "*chrome", "http://www.washingtonpost.com/");
         selenium.start();
     }

     @Test
     public void testWebsite() throws Exception {
         selenium.open("/");
         waitFor("link=Sign In");
         waitSecomd(3);
         selenium.click("link=Sign In");
         selenium.waitForPageToLoad("60000");
         selenium.type("name=MemberName", "adasf@gmail.com");
         selenium.type("name=Password", "adfasd");
         selenium.click("name=submit");
         selenium.waitForPageToLoad("60000");
     }

     @AfterMethod
     public void tearDown() throws Exception {
         selenium.stop();
     }
     public void waitFor(String locator) throws Exception {
         for (int second = 0;; second++) {
             if (second >= 60)
                 fail("timeout");
             try {
                 if (selenium.isVisible(locator))
                     break;
             } catch (Exception e) {}
             Thread.sleep(1000);
         }
     }

     public void waitSecomd(int n) throws Exception {
         for (int second = 0;; second++) {
             if (second >= 60)
                 fail("timeout");
             try {
                 if (second > n - 1)
                     break;
             } catch (Exception e) {}
             Thread.sleep(1000);
         }
     }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T18:48:21.163

该`<a>`元素是动态创建的（并且以一种糟糕的方式 - 它会在很长一段时间后出现）并且 Selenium 找不到它。如果你查看页面的源代码，你只能看到

```
<div id="utility-wrapper" data-tracking-type="utility">
    <ul id="utility-links" class="inline-list">  
        <li id="global-signin" style="min-width:32px;"></li> 
```

* * *

原因是在其中一个创建登录链接的 js 文件中，如下所示：

```
I.innerHTML = '<a href="' + D + "...a loong piece of URL..." + H + '">Sign In</a>'; 
```

Selenium 可以找到动态创建的元素，但只能在创建之后，而不是之前。

出现的第一个解决方案`selenium.click("id=global-signin")`不起作用，因为找到并单击了元素，但尚未包含实际链接（稍后由 js 创建）。

* * *

解决方案是等待元素出现：

```
long targetTime = System.currentTimeMillis() + 10000;  // 10 seconds from now
boolean found = false;
while (System.currentTimeMillis() < targetTime && !found) {
    if (selenium.isElementPresent("link=Sign In")) {
        selenium.click("link=Sign In");
        found = true;
    }
}
if (!found) {
    throw new SeleniumException("Element not found!");
} 
```

您甚至可以编写自己的`click(String)`方法（以及其他方法，可能是通过代码重复的简单方法，或者通过[命令模式](http://en.wikipedia.org/wiki/Command_pattern)的更难但更好的方法）将其包含在每次搜索中。

在[Selenium 2 (WebDriver)中，通过](http://seleniumhq.org/docs/03_webdriver.html)[隐式等待](http://seleniumhq.org/docs/04_webdriver_advanced.html#implicit-waits)会容易得多：

```
// open Firefox
WebDriver driver = new FirefoxDriver();
// set the Implicit wait to 10 seconds
driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
driver.get("http://www.washingtonpost.com/");
driver.findElement(By.linkText("Sign In")).click(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-30T01:47:02.830

这很难——我遇到的问题在第二页——除非我先选择目标定位器，否则 Selenium 无法将任何数据输入到表单中。这是我的解决方案：

```
import java.util.concurrent.TimeUnit;

import org.junit.Test;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;

public class LoginTest {

    private static final String USERNAME = "username";
    private static final String PASSWORD = "password";
    private static final int PAUSE = 10;

    @Test
    public void testWebsiteTwo() throws Exception {
        WebDriver driver = new ChromeDriver();
        driver.manage().timeouts().implicitlyWait(PAUSE, TimeUnit.SECONDS);
        driver.get("http://www.washingtonpost.com/");
        WebElement signin = driver.findElement(By
                .cssSelector("li#global-signin a"));
        signin.click();

        // this line is crucial so that Selenium can enter the username / password

        WebDriver.TargetLocator locator = driver.switchTo();
        locator.frame(0);
        WebElement name = driver.findElement(By.cssSelector("input#username"));
        name.sendKeys(USERNAME);
        WebElement password = driver.findElement(By.cssSelector("input#password"));
        password.sendKeys(PASSWORD);
        WebElement form = driver.findElement(By.cssSelector("form[name=form]"));
        form.submit();
        Thread.sleep(5000);
        driver.close();
    }

} 
```

# android - 按需请求许可

> ID：10651619
> 
> 赞同：0
> 
> 时间：2012-05-18T11:16:21.093
> 
> 标签：android, android-manifest

> **可能重复：**
> [有没有办法以编程方式请求许可？](https://stackoverflow.com/questions/7517171/is-there-any-way-to-ask-permission-programmatically)

由于我的应用程序需要许可，因此
`<uses-permission android:name="android.permission.CALL_PHONE" />`
我的大多数用户在安装时都不满意，因为在我的应用程序中我必须拨打电话。

Afaik 有一个解决方案，可以不在清单中写入权限，而是在使用时询问它们。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T11:23:00.530

尽管我是希望看到一些混合权限系统到位的开发人员之一，但至少根据文档，到目前为止还没有解决方案。

> Android**没有动态（在运行时）授予权限的机制，**因为它会使用户体验复杂化，从而损害安全性。

[资源](http://developer.android.com/guide/topics/security/security.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T11:20:32.000

您无法更改现有应用程序的权限，但您可以创建两个不同的应用程序，一个有`CALL_PHONE`权限，另一个没有权限。让人们决定他们要安装哪一个。

# java - Java 正则表达式。获取某些关键字之间的子字符串

> ID：10651621
> 
> 赞同：4
> 
> 时间：2012-05-18T11:16:22.250
> 
> 标签：java, regex, string

我需要帮助为这个问题创建最好的正则表达式。

我有起始和结束分隔符的组合/组，我需要获取起始分隔符到结束分隔符之间的**所有**子字符串/任何单词。

假设这个分隔符表：

**开始 | 结尾**

猫 | 狗

苹果 | 橙

狮子 | 斑马

熊猫 | 猫

样本输入：

```
substring1 CAT substring2 substring3 DOG substring4 substring5 CAT substring6
APPLE substring7 substring 8 ORANGE ORANGE substring9 DOG substring10 PANDA
substring11 CAT substring12 DOG substring13 LION substring10 substring11 ZEBRA substring12
CAT substring13 substring14 APPLE substring15 substring 16 ORANGE 
```

输出必须是：

1.  CAT 子字符串 2 子字符串 3 狗
2.  APPLE substrin7 substring8 ORANGE
3.  熊猫子串 11 CAT
4.  LION substring10 substring 11 ZEBRA
5.  APPLE substring15 substring16 ORANGE

我的正则表达式：

```
 CAT (.)*? DOG | APPLE (.)*? ORANGE | LION (.)*? ZEBRE |  PANDA (.)*? CAT 
```

我在处理多次出现其他起始分隔符的字符串时遇到问题。

举个例子：

```
CAT word1 word2 word3 word4 APPLE word5 word6 word7 DOG 
```

我知道它将与此 **CAT (.)* 匹配？DOG**但这是错误的，因为子字符串包含起始分隔符之一。

我只需要一个正则表达式，如果子字符串不包含任何其他起始分隔符的出现，它将获取起始分隔符与其匹配的结束分隔符之间的所有单词。

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:46:36.873

在这里帮助我们的技术称为**“环视”**。

在澄清 nfinium 和 jsobo 的反馈后，我更新了我的答案

```
CAT ((?!(APPLE|LION|PANA)).)*? DOG|APPLE ((?!(CAT|LION|PANDA)).)*? ORANGE|LION ((?!(CAT|APPLE|PANDA)).)*? ZEBRA|PANDA ((?!(APPLE|LION)).)*? CAT 
```

给定输入：

```
substring1 CAT substring2 substring3 DOG substring4 substring5 CAT substring6 APPLE substring7 substring 8 ORANGE ORANGE substring9 DOG substring10 PANDA substring11 CAT substring12 DOG substring13 LION substring10 substring11 ZEBRA substring12 CAT substring13 substring14 APPLE substring15 substring 16 ORANGE  string CAT dkdkdkdkdk CAT dkdkdk dkdkdk ORANGE dkdkdkdk DOG etc. CAT word1 word2 word3 word4 APPLE word5 word6 word7 DOG wordx 
```

它匹配

```
CAT substring2 substring3 DOG
APPLE substring7 substring 8 ORANGE
PANDA substring11 CAT
LION substring10 substring11 ZEBRA
APPLE substring15 substring 16 ORANGE
CAT dkdkdkdkdk CAT dkdkdk dkdkdk ORANGE dkdkdkdk DOG 
```

具体来说，它不会匹配 nfinium 指示的以下内容

```
CAT word1 word2 word3 word4 APPLE word5 word6 word7 DOG 
```

正如你指出的那样，也匹配

```
CAT dkdkdkdkdk CAT dkdkdk dkdkdk ORANGE dkdkdkdk DOG 
```

你说它应该匹配以下

```
CAT substring12 DOG 
```

但我认为不应该，因为上面的 CAT 是

```
PANDA substring11 CAT 
```

此正则表达式产生 nfinium 的预期结果

请注意，根据 nfinium 的要求，CAT 可以是开始和结束分隔符

```
CAT | DOG
PANDA | CAT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:45:29.813

我认为关键是第二个和输出：

```
 "APPLE substrin7 substring8 ORANGE" 
```

包含在：

```
 "CAT substring6 APPLE substring7 substring 8 ORANGE ORANGE substring9 DOG" 
```

所以基本上你必须抓住 Cat not follow by APPLE | 橙色 | 狮子 | 斑马 | 熊猫 | CAT 因为那些会开始另一个小组。这可能是可能的，但编写一个正则表达式来做到这一点类似于尝试使用正则表达式解析 HTML。

请参阅： [RegEx 匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

可以做到，但正则表达式会非常复杂，这个问题最好在代码中处理......

这是我认为您想要处理前两个开始结束组合的示例。

```
(CAT(?!.+(?:APPLE|ORANGE|LION|ZEBRA|PANDA|CAT).+DOG).*?DOG)|(APPLE(?!.+(?:APPLE|LION|ZEBRA|PANDA|CAT|DOG).+ORANGE).*?ORANGE) 
```

只是第一组是...

```
(CAT(?!.+(?:APPLE|ORANGE|LION|ZEBRA|PANDA|CAT).+DOG).*?DOG) 
```

所以你可以看看这是否有更多的组合，它会变得非常冗长。

# css - 我希望我的 ol 子弹看起来像 i) 使用 wordpress

> ID：10651623
> 
> 赞同：0
> 
> 时间：2012-05-18T11:16:38.647
> 
> 标签：css, wordpress

我正在使用 wordpress，我希望我的项目符号看起来像 i) ii) iii) 它实际上是我正在寻找的括号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:20:47.960

*[编辑和修复。谢谢，迈克·米勒！]*

您可以使用 CSS 计数器 :)

```
ul {
    counter-reset: items 0;
}
li {
    list-style-type: none;
}
li:before {
    counter-increment: items 1;  
        content: counter(items, lower-roman) ") ";
} 
```

[您可以在http://dabblet.com/gist/2724823](http://dabblet.com/gist/2724823)上看到它是如何工作的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:24:44.953

我认为你能做的最好的就是

```
li:before { content: ")" }; 
```

然后设置一个负的左边距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:42:16.107

如果特定的编号样式是必不可少的，请将其作为内容的一部分并禁止默认浏览器生成的编号或根本不使用`ul`标记，例如

```
<div>i) first item</div> 
```

或（如果您可能需要设置数字样式

```
<div><span class=num>i)</span> first item</div> 
```

您可以使用 CSS（生成的内容和`:before`伪元素）替代生成数字，但它比较笨拙，特别是如果您需要确保在所有浏览器上合理呈现。

# mysql - RoR 中的动态条件查询

> ID：10651624
> 
> 赞同：0
> 
> 时间：2012-05-18T11:16:41.440
> 
> 标签：mysql, ruby-on-rails

我正在尝试在 RoR 中进行查询，但我的条件来自**参数**并动态变化。

我试过这个：

```
@userlist = User.find(:all, conditions:{(name:params[:name] if params[:name] != nil), (lastname:params[:lastname] if params[:lastname] != nil)}) 
```

这只是我的想象，但说明了我的意思。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:24:16.797

如果您使用的是 Rails 3：

```
@userlist = User.scoped
@userlist = @userlist.where(name: params[:name]) if params[:name].present?
@userlist = @userlist.where(lastname: params[:lastname]) if params[:lastname].present? 
```

ETC..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:24:41.097

您可以执行以下操作：

```
BlahController < ActiveController::Base
  before_filter :find_params, :only => :index

  def index
    @user_list = User.where(@filtered_params).all
  end

  def find_params
    @filtered_params = params[:name].present? ? "'name = ?', #{params[:name]}" : "'last_name = ?', #{params[:last_name]}"
  end

end 
```

所以我假设你只有两个条件， a`params[:name]`或 a `params[:last_name]`。如果还有更多，只需将三进制更改为`if elsif`语句即可。

# facebook - 如何在网站中嵌入 Facebook Questio-n？

> ID：10651629
> 
> 赞同：1
> 
> 时间：2012-05-18T11:17:09.223
> 
> 标签：facebook, embed

有什么简单的方法可以在我的网站上显示单个公开的 Facebook 问题（所以它看起来和 Facebook 中的一样）？

我想在网站中嵌入一个公开的 Facebook 问题。我可以使用 graph.facebook.com 获得问题和答案，但这样我需要访问令牌和外观代码。

Javascript 和 PHP 解决方案对我来说很好。它应该看起来像 [http://i.imgur.com/UwYa7.png](http://i.imgur.com/UwYa7.png)

（标题中的Questio-n是因为SO不允许标题中的单词问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:51:20.350

**Facebook 根本不提供嵌入问题的插件**。您需要做的是重新创建功能（尽您所能）以模拟 Facebook 上的问题。

这是一项艰巨的任务，但这**是**可能的。这个伟大的网站提供了一个很好的起点 -

[http://ckrack.github.com/fbootstrapp/](http://ckrack.github.com/fbootstrapp/)

这是它或多或少的样子 -

![在此处输入图像描述](../Images/5ae24382f444d4607fd812a2dfa28e29.png)

# algorithm - 算法设计与分析

> ID：10651636
> 
> 赞同：0
> 
> 时间：2012-05-18T11:17:32.123
> 
> 标签：algorithm

我陷入了一个问题，我需要解决一个问题，这里是：

编写一个`i`在数组中找到索引的算法，`A[i] = i`如果`0<=i<=n-1`没有找到这样的索引，则返回`-1`

我及时做了这个问题，`O(n)`但我的伙伴们说它可以在更短的时间内完成`O(lg(n))`

谁能帮我找到更好的解决方案？如果是这样，请回复此帖子.. 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:26:49.223

如果数组已排序，那么您可以`O(lg(n))`使用[binary search](http://en.wikipedia.org/wiki/Binary_search_algorithm)进行搜索。否则将需要`O(n)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:40:58.080

如果数组没有排序，这是不可能的。我假设您正在寻找一种确定性的非概率算法。假设存在一个算法“Alg”，它通过访问数组的 O(log(n)) 个单元来解决问题。令 V(I) 是 Alg 在给定输入 I 上访问的一组单元格。还假设输入 I1 的答案是 -1 并且 Alg 正确返回 -1。现在更改 I1 中不在 V(I1) 中的一个单元格，然后再次将其提供给 Alg。当然，Alg 再次返回 -1，这不是正确答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:27:04.050

您应该对数组进行[二进制搜索。](http://en.wikipedia.org/wiki/Binary_search_algorithm)你错过了问题陈述的一个非常重要的部分——数组应该提前排序。

# r - R，将变量传递给系统命令

> ID：10651640
> 
> 赞同：7
> 
> 时间：2012-05-18T11:17:38.800
> 
> 标签：r, shell, variables, cran

使用 R，我希望创建一个 QR 码并将其嵌入 Excel 电子表格（数百个代码和电子表格）。显而易见的方法似乎是使用命令行创建二维码，并在 R 中使用“system”命令。有谁知道如何通过“system”命令传递 R 变量？谷歌不太有用，因为“系统”有点通用，?system 不包含任何示例。

注意 - 我实际上使用的是数据矩阵而不是 QR 码，但是在 R 问题中使用术语“数据矩阵”会导致严重破坏，所以让我们来谈谈 QR 码。:-)

```
system("dmtxwrite my_r_variable -o image.png") 
```

失败了，我用“粘贴”尝试过的变体也是如此。任何建议都非常感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-18T11:20:08.293

假设我们有`x`要传递给的变量`dmtxwrite`，您可以像这样传递它：

```
x = 10
system(sprintf("dmtxwrite %s -o image.png", x)) 
```

或者使用`paste`：

```
system(paste("dmtxwrite", x, "-o image.png")) 
```

但我更喜欢`sprintf`这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-04T07:43:53.890

还[`base::system2`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/system2.html)可以考虑使用 ，因为`system2`提供`args`了可用于该目的的参数。在您的示例中：

```
my_r_variable <- "a"
system2(
    'echo',
    args = c(my_r_variable, '-o image.png')
) 
```

会返回：

```
 a -o image.png 
```

相当于`echo`在终端中运行。您可能还希望将输出重定向到文本文件：

```
system2(
    'echo',
    args = c(my_r_variable, '-o image.png'),
    stdout = 'stdout.txt',
    stderr = 'stderr.txt'
) 
```

# mysql - 如何创建更新触发器？

> ID：10651642
> 
> 赞同：-1
> 
> 时间：2012-05-18T11:17:44.183
> 
> 标签：mysql, triggers

我有一个非常简单的问题，所以我希望有人能提供帮助。

我有一个带有 ID 和 CREDIT 的 MySQL 表。我想做一个更新触发器，如果​​信用为 0，它会改变更新值。所以像“如果 old.CREDIT = 0 那么 new.CREDIT = 0.001”。那么触发器的语法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:55:06.580

请阅读[***有关 MySQL 触发器的教程，***](http://web.archive.org/web/20061122063729/http://forge.mysql.com/wiki/Triggers)该教程给出了简单到复杂的示例。
这是一个关于触发器的简单示例`before update`，可能会对您有所帮助。

假设表名为`credit_info`.

```
delimiter //
create trigger sample_trigger_before_update_on_credit_info before update on test.credit_info
  for each row begin
    if new.credit = 0 then
      set new.credit = 0.001;
    end if;
  end;
//
delimiter ; 
```

假设，表有 2 条记录如下：

```
+------+--------+
| id   | credit |
+------+--------+
|    1 |  1.000 |
|    2 |  3.000 |
+------+--------+ 
```

当您发出更新声明时：

```
update credit_info set credit=0 where id=2; 
```

结果记录如下：

```
+------+--------+
| id   | credit |
+------+--------+
|    2 |  0.001 |
+------+--------+ 
```

让我希望，示例示例将加速您的能量。

# hibernate - 外键长度 JPA

> ID：10651643
> 
> 赞同：0
> 
> 时间：2012-05-18T11:17:51.340
> 
> 标签：hibernate, jpa, foreign-keys

```
@ManyToOne(fetch = FetchType.LAZY, cascade=CascadeType.PERSIST)
@JoinColumn(name="PRIVATE_CODE_ID", nullable = false)
public PrivateCode getPrivateCode() {
    return privateCode;
} 
```

我正在使用旧版 MySQL 数据库架构，并希望将 PRIVATE_CODE_ID 指定为 int(15) 而不是默认的 int(11)。joincolumn中没有length=15等参数。有没有办法做到这一点，所以 JPA with hibernate 会生成正确的模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T11:22:31.677

1.  如果您使用旧数据库，则不必指定架构详细信息 - 它们仅在使用 JPA 提供程序生成实际架构时使用

2.  外键列定义应与该外键指向的主键一致。所以从正确映射实体`@Id`开始。`PrivateCode`

3.  注解有一个`columnDefinition`属性：`@JoinColumn`

    ```
    @JoinColumn(name="PRIVATE_CODE_ID", columnDefinition="int(15)", nullable = false) 
    ```

# css - 使用 div 创建混合像素/百分比布局

> ID：10651646
> 
> 赞同：5
> 
> 时间：2012-05-18T11:17:57.880
> 
> 标签：css, layout, html

我正在尝试制作一个页面布局，如附图所示。问题是我无法让它正常工作。我花了半天时间试图让它工作，但没有成功。我只想为菜单设置一个固定宽度的 div，然后在这两个 div 旁边创建列，每个列占据剩余页面宽度的一半。高度都需要依赖于内容。

有人有想法吗？我可以找到很多关于这种混合百分比/像素布局的信息，但我无法想象这有那么难。

图片：![在此处输入图像描述](../Images/23179d6b44335e6db000bbefb8e7e762.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:29:39.297

像这样的东西：

```
<style type="text/css">
.container
{
  padding-left: 160px;
  position: relative;
}
.leftmenu
{
  width: 160px;
  height: 200px;
  background: red; /* For demo purposes */
  position: absolute;
  top: 0;
  left: 0;
}
.width50
{
  width: 50%;
  float: left;
}
.left-content
{
  height: 300px;
  background: green /* For demo purposes */
}
.right-content
{
  height: 150px;
  background: blue   /* For demo purposes */
}
.clear
{
  clear: both;
}
</style>
<div class="container">
  <div class="leftmenu"></div>
  <div class="content">
    <div class="width50 left-content"></div>
    <div class="width50 right-content"></div>
    <div class="clear"></div>
  </div>
</div> 
```

那只是内部容器（没有页眉或页脚）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:42:00.910

一种javascript方法。

在这里，我创建了您需要的布局。[检查此链接](http://mockupwebsite.com/testing/test-layout.html)。

重新调整浏览器大小并刷新它。你可以看到工作！

我使用以下脚本查找屏幕分辨率，然后计算内容宽度。

```
<script type="text/javascript">
wscreen = window.innerWidth; //Determine screen resolution
content_width = (wscreen - 160); //Adjusting the screen
document.getElementById("container").style.width = content_width + "px"; // Adding the width to CSS
</script> 
```

纯 CSS 方法也可以。

干杯！！！

# java - 组合键的组合键

> ID：10651647
> 
> 赞同：3
> 
> 时间：2012-05-18T11:17:58.647
> 
> 标签：java, mysql, sql, hibernate, jpa

我试图了解我正在创建的数据模型采用什么方法。我有两个最初使用复合键创建的表。我现在添加第三个表，它是前两个表的连接表，这将产生一个由三个字段和两个外键组成的复合键，每个键有 2 个字段。这很可能在 MySQL 中，并与某种 Java 持久性框架一起使用。我一直喜欢使用复合键，因为它似乎是一种更自然的方式来表示数据，但我想确保我以后不会让自己陷入痛苦的世界。我应该继续使用提到的方法还是只是在表上创建一些自动递增的 id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:24:32.267

Hibernate 建议使用纯技术的、自动生成的、非复合键（纯连接表除外）。出于很好的理由，IMO。

使用复合键，您的映射将更加困难。由于更复杂的索引，性能会降低。一般编程会更难，因为您需要两到三个长整数，而不是能够识别给定的实体（例如，考虑 URL 和表单，您必须在其中放置两个或三个参数/隐藏字段到您的 URL/表单）。

当然，如果键是功能性的，那就更糟了，因为您将不得不在某个时候更改主键的一部分，这将迫使您更新对该主键的所有引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T12:45:18.753

在约束与外键更深的关系时，连接表的代理键有一个**巨大的缺点。**我们需要一个 6 表设置来演示它。

基表：

```
CREATE TABLE semester (semester_id INTEGER PRIMARY KEY, semester_name VARCHAR(40));
CREATE TABLE student  (student_id  INTEGER PRIMARY KEY, student_name  VARCHAR(40));
CREATE TABLE subject  (subject_id  INTEGER PRIMARY KEY, subject_name  VARCHAR(40)); 
```

然后让我们连接它们：

```
CREATE TABLE enrollment (
  enrollment_id INTEGER PRIMARY KEY,
  semester_id INTEGER NOT NULL,
  student_id INTEGER NOT NULL,
  room_number INTEGER,
  FOREIGN KEY (semester_id) REFERENCES semester (semester_id),
  FOREIGN KEY (student_id)  REFERENCES student  (student_id),
  UNIQUE INDEX (semester_id, student_id)
);

-- similarly ...
CREATE TABLE class(class_id ..., semester_id ..., subject_id ..., class_number ...); 
```

到目前为止，一切都很棒。但是，我们需要更多地连接它们：

```
CREATE TABLE grades (
  student_in_class_id INTEGER PRIMARY KEY,
  enrollment_id INTEGER NOT NULL,
  class_id INTEGER NOT NULL,
  grade char(1),
  FOREIGN KEY enrollment (enrollment_id),
  FOREIGN KEY class (class_id),
  UNIQUE INDEX (enrollment_id, class_id)
); 
```

**问题：** *我们到底应该如何强制招生和班级都参考同一个学期？*（简短回答：**我们不能**）

复合键也是如此——在这里我不需要额外的键来强制执行外键的唯一组合，主键默认为我执行此操作：

```
CREATE TABLE enrollment (
  semester_id INTEGER NOT NULL,
  student_id INTEGER NOT NULL,
  room_number INTEGER,
  PRIMARY KEY (semester_id, student_id),
  FOREIGN KEY (semester_id) REFERENCES semester (semester_id),
  FOREIGN KEY (student_id)  REFERENCES student  (student_id)
);

-- along the same lines...
class(semester_id ..., subject_id ..., class_number ...) 
```

然后是不祥等级表：

```
CREATE TABLE grades (
  semester_id INTEGER NOT NULL,
  student_id INTEGER NOT NULL,
  subject_id INTEGER NOT NULL,
  PRIMARY KEY (semester_id, student_id, subject_id),
  FOREIGN KEY (semester_id, student_id) REFERENCES enrollment(semester_id, student_id),
  FOREIGN KEY (semester_id, subject_id) REFERENCES class(semester_id, subject_id)
); 
```

这样，我的人际关系就得到了适当的*表达*和*约束。*

**额外的好处：**我可以通过简单的连接获得我的`semester_name`,`student_name`和`subject_name`值（而不是必须通过多个级别遍历模式。）您可能会拥有比这个最简单的示例更多的级别，然后它会更加明显它是返回到任何父关系。

更改模式*并不*复杂，但即使是这样：数据建模不是关于*建模*数据吗？我们可以仅仅因为我们喜欢代理键就抛弃参照完整性吗？

**注意：** Hibernate*确实*处理复合键。DataMapper for Ruby 也是如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T11:21:09.630

如果您的多对多是纯关系（本身没有属性）并且永远不会被自身引用，则只需使用复合键。

如果它可能有自己的属性或被引用（如实例化为类），您可能需要一个代理键，因为许多`ORM`' 要求`id`是单个整数。

# java - 代替 在java中用换行符标记

> ID：10651650
> 
> 赞同：4
> 
> 时间：2012-05-18T11:18:11.037
> 
> 标签：java, jira

我想用**\n替换****<> 内的 NULL** ，即它应该转到下一行。

 **我试过使用

```
 String replace_string = str.replaceAll("<NULL>","\n"); 
```

输出是：它正在删除**但字符串的下一个内容不会进入下一行。**

 **以下是我的字符串：我的字符串中的一些文本

```
"~|B|    Book Definition ID = NORMAL"+
"~|B|    Side = <NULL>"+
"~|B|    Status = <NULL>"+
"~|B|    Owner ID = <NULL>"+
"~|B|    Session Index = <NULL>"+
"~|B|    Value = <NULL>"+
"~|B|    Time Duration = <NULL>" 
```

谁能帮帮我吗？？

感谢和问候，

雷努

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T11:20:10.627

标签中有空格，是故意的吗？如果是这样，请使用`str.replaceAll("<\\s*NULL>", "\n")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:24:11.093

更新：根据[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)，试试这个：

```
String replace_string = str.replaceAll("<NULL>",Matcher.quoteReplacement("\n")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:23:11.190

我认为空格是罪魁祸首。如果您不知道要替换的字符串部分是否会有空格，则应考虑使用 RegEx 匹配要替换的字符串部分。****

# javascript - 调试动态添加的 javascript 文件

> ID：10651655
> 
> 赞同：9
> 
> 时间：2012-05-18T11:18:38.223
> 
> 标签：javascript, jquery, debugging, firebug, google-chrome-devtools

我有一个 Web 应用程序，它根据用户选择的内容动态添加 javascript 文件，使用 ajax 实时避免刷新屏幕。

我现在正在尝试调试这些动态添加的 javascript 文件，并尝试了 Google Chrome 的开发人员工具和 Firebug 的 Firefox 插件，并注意到动态添加的 javascript“文件”没有出现，所以我无法选择它们来添加断点等等

那么，是否有解决方案，即调试动态添加的 javascript 文件？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-23T18:06:35.370

查看`sourceURL`哪种方式可以向 DevTools 指示应该将 eval 字符串视为真实文件。它完全符合您的要求。

在要评估的字符串的末尾，留下这种形式的评论：

```
//# sourceURL=app/js/myapp.js 
```

从那里，Chrome DevTools（和 Firebug）会将其视为“真实文件”。

[这里有更多解释](http://pmuellr.blogspot.com/2009/06/debugger-friendly.html)，HTML5 Rocks 有[一篇文章](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)和一个[sourceURL 演示](http://www.thecssninja.com/demo/source_mapping/compile.html)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-18T11:54:05.973

您可以`debugger;`在要设置断点的动态脚本中添加语句。如果在开发人员工具 UI 打开时执行线程到达语句，这将使 chrome 像常规断点一样在其上停止。

你也可以用它来启动你的脚本，这样你的脚本就会出现在调试器中，然后你可以在你想要的地方手动设置一个断点。

# css - 如何在 IE 8 中将页脚居中？

> ID：10651656
> 
> 赞同：1
> 
> 时间：2012-05-18T11:18:46.413
> 
> 标签：css, internet-explorer-8

为什么[这个网站](http://www.isysla.com/)的 IE8 的页脚不居中？

它以 Chrome、FF 和 Safari 为中心。哎呀，如果我可以在其上加载代码，它可能会在 Etch-a-Sketch 上工作......但不是 IE8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:22:39.770

您必须明确地将您的 FOOTER 元素设置为 IE8 的块。

```
#colophon {
    display: block;
} 
```

* * *

顺便说一句，考虑将此添加到您的页面：[http ://code.google.com/p/html5shim/](http://code.google.com/p/html5shim/)

```
<!--[if lt IE 9]>
<script src="path/to/html5shiv.js"></script>
<![endif]--> 
```

它解决了这些问题。

# javascript - 无法添加/删除属性 onclick

> ID：10651658
> 
> 赞同：0
> 
> 时间：2012-05-18T11:18:54.810
> 
> 标签：javascript, jquery

我是 javascript 和 jQuery 的新手。我正在尝试在单击时添加属性并在单击时将其删除。我的添加和删除类运行良好，但没有属性。我的代码如下。

下面的 HTML

```
<label class="label_check" for="fadv">
    <input class="lesson" id="fadv" value="acl323" name="fadv" checked="checked" type="checkbox" />Please send me regular updates.
</label> 
```

jQuery 下面

```
<script>
function setupLabel() {
    if ($('.label_check input').length) {
        $('.label_check').each(function(){ 
            $(this).removeClass('c_on');
            $(this).removeAttr('pull');
        });
        $('.label_check input:checked').each(function(){ 
            $(this).parent('label').addClass('c_on');
            $(this).attr('pull' , 'on');
        });                
    };
};
$(document).ready(function(){
    $('body').addClass('has-js');
    $('.label_check, .label_radio').click(function(){
        setupLabel();
    });
    setupLabel();
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T22:05:09.533

可以清空属性值吗？

```
function setupLabel() {
    if ($('.label_check input').length) {
        $('.label_check').each(function(){ 
            $(this).removeClass('c_on');
            $(this).attr('pull','');
        });
        $('.label_check input:checked').each(function(){ 
            $(this).parent('label').addClass('c_on');
            $(this).attr('pull' , 'on');
        });                
    };
};
$(document).ready(function(){
    $('body').addClass('has-js');
    $('.label_check, .label_radio').click(setupLabel);
    setupLabel();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:13:31.063

因为 label_check 没有这个属性 :)) 你可以试试这个代码吗？

[http://jsfiddle.net/Nzw2K/](http://jsfiddle.net/Nzw2K/)

# php - Kohana 从 2.3.4 升级到 2.4

> ID：10651659
> 
> 赞同：0
> 
> 时间：2012-05-18T11:18:57.147
> 
> 标签：php, kohana, upgrade, kohana-2

我的版本 2.3.4 如何将 Kohana 升级到 2.4？我查看了此链接，但无法帮助我。

[http://kohanaframework.org/3.0/guide/kohana/upgrading](http://kohanaframework.org/3.0/guide/kohana/upgrading)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T19:42:16.607

**2.4**没有稳定版本，它是一个不受支持的分支。**2.3.4**是**2.x**分支中的最后一个。您应该升级到**3.0**。

# iphone - GHUnit 错误文件 _OBJC_CLASS_$_SenTestCase”，引用

> ID：10651662
> 
> 赞同：3
> 
> 时间：2012-05-18T11:19:10.063
> 
> 标签：iphone, cocoa-touch, ipad, ocunit, gh-unit

我在我的项目中使用 GHUnit，但是当我尝试运行该应用程序时出现错误

> ld /Users/goldfire/Library/Developer/Xcode/DerivedData/WhatsMySpeed-amkgqintxyhelabqvrpouivmdglf/Build/Products/Debug-iphonesimulator/GHUnitTests.app/GHUnitTests normal i386 cd /Users/goldfire/Desktop/Example/WhatsMySpeed setenv MACOSX_DEPLOYMENT_TARGET 10.6 setenv PATH " /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin :/sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/ SDKs/iPhoneSimulator5.1。sdk -L/Users/goldfire/Library/Developer/Xcode/DerivedData/WhatsMySpeed-amkgqintxyhelabqvrpouivmdglf/Build/Products/Debug-iphonesimulator -F/Users/goldfire/Library/Developer/Xcode/DerivedData/WhatsMySpeed-amkgqintxyhelabqvrpouivmdglf/Build/Products/ Debug-iphonesimulator -F/Users/goldfire/Desktop/Example/WhatsMySpeed -F/Applications/Xcode.app/Contents/Developer/Library/Frameworks -filelist /Users/goldfire/Library/Developer/Xcode/DerivedData/WhatsMySpeed-amkgqintxyhelabqvrpouivmdglf/构建/中间体/WhatsMySpeed.build/Debug-iphonesimulator/GHUnitTests.build/Objects-normal/i386/GHUnitTests.LinkFileList -mmacosx-version-min=10。6 -Xlinker -objc_abi_version -Xlinker 2 -ObjC -all_load -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -framework UIKit -framework Foundation -framework CoreGraphics -framework GHUnitIOS -framework SenTestingKit -o /Users/goldfire/Library/Developer/ Xcode/DerivedData/WhatsMySpeed-amkgqintxyhelabqvrpouivmdglf/Build/Products/Debug-iphonesimulator/GHUnitTests.app/GHUnitTests
> 
> 架构 i386 的未定义符号：“_OBJC_CLASS_$_SenTestCase”，引用自：LogicTests.o 中的 _OBJC_CLASS_$_LogicTests “_OBJC_METACLASS_$_SenTestCase”，引用自：LogicTests.o 中的 _OBJC_METACLASS_$_LogicTests ld：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T01:32:46.350

查看此链接： http: [//fstanley.github.com/blog/2012/06/10/fixing-ghunit-sentestcase-link-errors/](http://fstanley.github.com/blog/2012/06/10/fixing-ghunit-sentestcase-link-errors/)

基本上你需要添加：

`$(SDKROOT)/Developer/Library/Frameworks`

和

`$(DEVELOPER_LIBRARY_DIR)/Frameworks`

到测试目标设置中的框架搜索路径。

我有同样的错误，这修复了它。

注意：必须按照[http://forum.sparrow-framework.org/topic/cant-run-unit-tests](http://forum.sparrow-framework.org/topic/cant-run-unit-tests)的确切顺序添加项目。

# android - Android 上的 Netty - InvalidKeyException

> ID：10651663
> 
> 赞同：2
> 
> 时间：2012-05-18T11:19:10.177
> 
> 标签：android, netty

我正在尝试在 android 上运行 netty。它在运行 3.2 的摩托罗拉 Xoom 平板电脑上运行良好。但它在分别运行 2.3.6 和 3.1 的三星 Galaxy S 和 Galaxy Tab 上不断失败。异常跟踪如下。有没有人早点遇到过这个问题..任何解决方法..谢谢。

```
Caused by: java.security.InvalidKeyException: The public key in the 
certificate cannot be used for ENCRYPT_MODE 
     at javax.crypto.Cipher.init(Cipher.java:815) 
     at javax.crypto.Cipher.init(Cipher.java:747) 
     at 
org.apache.harmony.xnet.provider.jsse.ClientHandshakeImpl.processServerHelloDone(ClientHandshakeImpl.java: 
418) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T12:40:36.463

这与早期版本的 Android 实现中的错误一致，`Cypher`如果对方的证书将 KeyUsage 扩展标志设置为关键，同时不包括 KeyUsage "DataEncipherment"，则 Android 的实现`Cipher`认为证书无效并抛出显然不是正确行为的异常。

我在这里找到了一个解决方法：[http](http://code.google.com/p/android/issues/detail?id=9307#c180) ://code.google.com/p/android/issues/detail?id=9307#c180但后来我对其进行了改进并发回了：[http ://code.google.com/ p/android/issues/detail?id=9307#c184](http://code.google.com/p/android/issues/detail?id=9307#c184)。这让我的代码在 Android 2.2 上运行。不要被此链接指向的看似无关的主题所推迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T21:18:42.047

这应该在 3.0 或更高版本中修复：[http ://code.google.com/p/android/issues/detail?id=12955](http://code.google.com/p/android/issues/detail?id=12955)

根据您提供的行号，您拥有 javax/crypto/Cipher.java 的旧版本。[这个补丁](http://code.google.com/p/android/issues/detail?id=12955#c12)应该可以修复它。

编辑：
如果这不能解决它，[SSL 引擎](http://docs.oracle.com/javase/1.5.0/docs/api/javax/net/ssl/SSLEngine.html)可能没有启用与您的服务器兼容的密码套件。您可以使用[openssl s_client connect](http://www.openssl.org/docs/apps/s_client.html)或[此处给出的脚本](https://superuser.com/questions/109213/is-there-a-tool-that-can-test-what-ssl-tls-cipher-suites-a-particular-website-of)来查看您的服务器喜欢什么密码并启用这些密码。

# less - 更少的 CSS 不同的规则依赖于给定的变量

> ID：10651666
> 
> 赞同：0
> 
> 时间：2012-05-18T11:19:17.897
> 
> 标签：less

我知道 LESS CSS 中没有 if/else，而需要 if/else 的用例意味着使用受保护的 mixin 来解决。

我想为我的 CSS 提供一个配置文件，我可以在其中配置字体大小、字体系列、字体粗细和行高。我还希望有可能不定义上述属性之一。

这是第一个问题。是否有可能检查变量是否存在？我使用无效值来定义不应设置的属性（如字体系列的数字）

现在我想根据给定的值创建 CSS。如果所有 4 个都给出：

```
font: @font-weight @font-size~'/'@line-height @font-family; 
```

如果没有给出@font-family：

```
font-size: @font-size;
font-weight: @font-weight;
line-height: @line-height; 
```

等等。

为每种可能的组合使用 mixin 似乎非常臃肿和愚蠢。

那是没有问题。2.

所以实际上我希望这个工作：

```
@font-size: 1em;
@font-weight: bold;
@font-family: Arial, sans-serif;

body {
  .myMixin(@font-weight, @font-size, @line-height, @font-family);
} 
```

应该输出：

```
body {
  font: bold 1em Arial, sans-serif;
} 
```

解决这个问题的任何想法？还是您认为我正在尝试做的通常是个坏主意？如果是，为什么？

〜戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:32:23.743

如果 LESS 正在通过 javascript 在客户端上进行评估，那么它可以通过使用反引号来包含 javascript 代码。在脚本中，您可以检查一个空白值并建立一个字符串作为输出。

如果您使用 Less.NET 并在服务器上转换为 CSS，则无法进行此 javascript 评估。

# javascript - 未按预期为 Windows 7 + IE8 创建 Javascript 弹出窗口

> ID：10651670
> 
> 赞同：0
> 
> 时间：2012-05-18T11:19:30.750
> 
> 标签：javascript, windows-7, internet-explorer-8, window.open

Javascript 弹出窗口未按预期创建。问题在于窗口的高度，要打开一个 javascript 窗口，我们使用 window.open() 函数和 screen.availHeight。创建的弹出窗口高度太长，并下降到 Windows 任务栏。相同的代码适用于其他 Windows 平台，弹出窗口的底部只是触摸 Windows 任务栏而不是超出它。

有问题的环境 - Windows 7 + IE8

经过大量调查，我们发现 screen.availHeight 没有正确返回，并且比实际值多 122px。[我们在http://w3schools.invisionzone.com/index.php?showtopic=28247](http://w3schools.invisionzone.com/index.php?showtopic=28247)找到了另一种方法来获得正确的availHeight 。当我们为 window.open() 提供相同的高度时，新创建的弹出窗口的高度会小一些，尽管它应该会触及 windows 任务栏。JavaScript api似乎有问题，它不正确地尊重Windows当前分辨率。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T17:16:35.437

也许`window.innerHeight`或者`window.outerHeight`会更好。 `document.documentElement.offsetHeight`通常也可以

# c#-4.0 - 使用 iText Sharp 从 PDF 中读取复选框、单选按钮名称和值

> ID：10651671
> 
> 赞同：4
> 
> 时间：2012-05-18T11:19:31.457
> 
> 标签：c#-4.0, pdf, annotations, itextsharp, acrofields

我有一个可填写的 PDF，其中包含 CheckBoxes、RadioButtons 和 TextBox。

我如何获得复选框名称及其值，我们如何知道它是一个复选框/单选按钮？

我正在使用 iTextSharp 并查看我的以下代码

```
 PdfReader pdfReader = new PdfReader(FileName);
 pdfReader.SelectPages("37");
        MemoryStream oStream = new MemoryStream();
        PdfStamper stamper = new PdfStamper(pdfReader, oStream);
        AcroFields form = stamper.AcroFields;
        if (form.Fields.Count() > 0)
        {
            IDictionary<string,AcroFields.Item> oDic= form.Fields;

            foreach (string FieldName in oDic.Keys)
            {
                //FieldName - CheckBox name; i need to confirm that is a Checkbox...
            }

            foreach (AcroFields.Item oItem in oDic.Values)
            {
                // how do we get check box values
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T18:36:48.047

如果您仍然需要，以下代码可能会帮助您。它仅适用于 AcroForms

```
int BUTTON = 1;
int CHECK_BOX = 2;
int RADIO_BUTTON = 3;
int TEXT_FIELD = 4;
int LIST_BOX = 5;
int COMBO_BOX = 6;

PdfReader pdfReader = new PdfReader(path);
AcroFields af = pdfReader.AcroFields;

foreach (var field in af.Fields)
{
    bool isRadio = RADIO_BUTTON == af.GetFieldType(field.Key));
} 
```

编辑：

此外， field.Key 是字段的名称， field.Value 是它的值。

对于复选框， if(field.Value == "Yes") 然后它被选中...如果它是其他任何东西，它不会被选中。

编辑：

我刚刚发现了如何 tro 获取单选按钮选项，如果你需要的话。

```
myKey k = new myKey(field.Key, af.GetField(field.Key), af.GetFieldType(field.Key));
if (k.isRadio())
{
    try { k.options.AddRange(af.GetAppearanceStates(k.key)); }
    catch { }
}
Keys.Add(k); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T20:53:03.773

Radio buttons, checkbox and buttons are all actually the same type of field but with different flags set. You can see the flags in the PDF Spec section 12.7.4.2.1 Table 226.

```
int ffRadio = 1 << 15;      //Per spec, 16th bit is radio button
int ffPushbutton = 1 << 16; //17th bit is push button 
```

For a given `Field` you want to get the `Widget`s associated with it. Usually this is just one but can be more so you should account for this.

```
PdfDictionary w = f.Value.GetWidget(0); 
```

Button fields will have their field type (`/Ft`) set to `/Btn` so check for that

```
if (!w.Contains(PdfName.FT) || !w.Get(PdfName.FT).Equals(PdfName.BTN)) {continue;/*Skipping non-buttons*/ } 
```

For the current `Widget` get the optional field flags (`/Ff`) value or use zero if it doesn't exist.

```
int ff = (w.Contains(PdfName.FF) ? w.GetAsNumber(PdfName.FF).IntValue : 0); 
```

Then just some simple math:

```
if ((ff & ffRadio) == ffRadio) {
    //Is Radio
} else if (((ff & ffRadio) != ffRadio) && ((ff & ffPushbutton) != ffPushbutton)) {
    //Is Checkbox
} else {
    //Regular button
} 
```

Below is a full-working C# WinForm 2011 app targeting iTextSharp 5.2.0 that shows off all of the above looking at a file called `Test.pdf` living on your desktop. Just add some logic to the conditionals to handle each button type.

```
using System;
using System.IO;
using System.Windows.Forms;
using iTextSharp.text.pdf;

namespace WindowsFormsApplication3 {
    public partial class Form1 : Form {
        public Form1() {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e) {
            var testFile = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "Test.pdf");
            PdfReader reader = new PdfReader(testFile);
            var fields = reader.AcroFields;

            int ffRadio = 1 << 15;      //Per spec, 16th bit is radio button
            int ffPushbutton = 1 << 16; //17th bit is push button
            int ff;
            //Loop through each field
            foreach (var f in fields.Fields) {
                //Get the widgets for the field (note, this could return more than 1, this should be checked)
                PdfDictionary w = f.Value.GetWidget(0);
                //See if it is a button-like object (/Ft == /Btn)
                if (!w.Contains(PdfName.FT) || !w.Get(PdfName.FT).Equals(PdfName.BTN)) { continue;/*Skipping non-buttons*/ }
                //Get the optional field flags, if they don't exist then just use zero
                ff = (w.Contains(PdfName.FF) ? w.GetAsNumber(PdfName.FF).IntValue : 0);
                if ((ff & ffRadio) == ffRadio) {
                    //Is Radio
                } else if (((ff & ffRadio) != ffRadio) && ((ff & ffPushbutton) != ffPushbutton)) {
                    //Is Checkbox
                } else {
                    //Regular button
                }
            }
            this.Close();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-23T22:20:25.477

带有 System.Linq 的 C# 包含用于单选按钮，获取从单选表单中的所有选项中选择的选项，还按其在 Adob​​e Acrobat Pro 中的指定名称打印所有选择选项

```
 AcroFields fields = reader.AcroFields;
 List<string> fldNames = new List<string>(fields.Fields.Keys);
            if (fldNames.Count > 0) //am gasit cel putin un acroform
            {
                foreach (string fldname in fldNames)
                {
                    int tip = fields.GetFieldType(fldname);
if (tip == 3) //choice  / radio
                    {
                        Console.WriteLine("radio form");
                        string[] valori = fields.GetListSelection(fldname);
                        foreach (string s in valori)
                            Console.WriteLine(s + " ");
                        Console.WriteLine("selected from radio form options");
                        string[] valori2 = fields.GetAppearanceStates(fldname);
                        //Console.WriteLine(valori2.Length);
                        var val2 = (from string c in valori2
                                   where (c.ToLower().CompareTo("off") != 0)
                                   select c).ToList();
                        if (val2.Count > 0)
                            foreach (string s2 in val2)
                                Console.WriteLine(s2 + " ");
}
}
} 
```

# python - web.py 中的表单验证器，帮助查找错误

> ID：10651673
> 
> 赞同：1
> 
> 时间：2012-05-18T11:19:40.563
> 
> 标签：python, forms, validation, web.py

我的验证器似乎有错误。即使我`-1`在表单中输入，我仍然会返回我的值而不是`blaat`. 也许有人看到我的错误？

```
class test:
   def __init__(self):
       self.render = web.template.render('templates/')
       self.myForm = web.form.Form(
           web.form.Textbox('minutes', id='minutes'),
           validators = [form.Validator("Minutes not correct", 
                                        lambda i: i.minutes > 0)]
       )              

   def GET(self):
       return self.render.addLog(self.myForm)

   def POST(self):
        webinput = web.input()
        if self.myForm.validates():
            return webinput.date1+webinput.minutes
        else:
            return "blaat" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:49:29.917

`i.minutes`不会`int`自动转换为，并且字符串比较大于整数：

```
>>> '-1' > 0
True 
```

采用`int(i.munites)`

顺便说一句，表单范围的验证器用于比较表单字段之间的相互关系，例如检查输入的密码是否匹配。要检查任何给定字段是否正确，请使用单字段验证器：

```
self.myForm = web.form.Form(
    web.form.Textbox('minutes',
        web.form.Validator("Minutes not correct", lambda x: int(x) > 0)),
) 
```

# android - 如何检测来电时按下结束按钮以断开连接

> ID：10651674
> 
> 赞同：3
> 
> 时间：2012-05-18T11:19:47.130
> 
> 标签：android

我正在使用**PhoneStateListener**来检测通话状态，但我想在用户按下**结束按钮**断开通话时触发一个事件。从**PhoneStateListener**中，我们只能访问三个状态**Call_State_IDLE**、**Call_State_RINGNG**、**call_State_OFFHOOK** 和 Call_State_IDLE 案例，当用户终止呼叫或呼叫者终止呼叫时触发。

而且我还想知道呼叫者是否在中间结束呼叫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:13:36.587

当电话状态变为空闲时，您可以知道用户已结束通话。当 PHONE_STATE 变为 CALL_STATE_IDLE 时，您可以触发您想要的事件。

# c# - 将 PictureBox 中的图像转换为位图

> ID：10651686
> 
> 赞同：16
> 
> 时间：2012-05-18T11:20:27.980
> 
> 标签：c#, .net, winforms, bitmap

我使用以下代码将 PictureBox 中的图像转换为位图：

```
bmp = (Bitmap)pictureBox2.Image; 
```

但我得到的结果是`bmp = null`. 谁能告诉我我是怎么做到的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-18T11:24:03.940

> 据我了解，您尚未分配 PictureBox 的 Image 属性，因此它在类型转换时返回 null 。
> 
> PictureBox 属性自动转换图像格式，如果您在 Image 属性上看到工具提示，它将显示 System.Drawing.Bitmap。检查您的图像属性是否正确分配。

*检查一下，它在我身边工作。*

```
private void button1_Click(object sender, EventArgs e)
{
    var bmp = (Bitmap)pictureBox1.Image;
}

private void TestForm12_Load(object sender, EventArgs e)
{
    pictureBox1.Image = Image.FromFile("c:\\url.gif");
} 
```

///*使用位图类*

```
 Bitmap bmp = new Bitmap(pictureBox2.Image); 
```

*您可以直接`pictureBox2.Image`转换为 Bitmap，也可以使用 Bitmap 类转换为 Bitmap 类对象。*

**参考：** [位图构造函数（图像）](http://msdn.microsoft.com/en-us/library/ts25csc8.aspx)。

> 您可以在此处使用[Bitmap 类找到更多选项](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-18T11:23:25.257

```
Bitmap bitmap = new Bitmap(pictureBox2.Image) 
```

[http://msdn.microsoft.com/en-us/library/ts25csc8.aspx](http://msdn.microsoft.com/en-us/library/ts25csc8.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T11:23:38.887

我想你正在寻找这个：

```
Bitmap bmp = new Bitmap(pictureBox2.Image) 
```

# php - 按值取消会话？

> ID：10651687
> 
> 赞同：0
> 
> 时间：2012-05-18T11:20:28.723
> 
> 标签：php, session

是否可以通过它的值取消设置会话？

我有一个聊天应用程序，它使用名为 username 的会话识别用户/梨，我希望能够从管理面板取消设置每个会话。

我在管理员中有用户会话值，我可以将其发送到聊天应用程序以通过 ajax 取消设置该特定用户。

```
$kick_out = $_post['username'];
if($_session['username'] == $kick_out )
unset( $_session['username']  ); 
```

但问题是我不想取消所有的 `$_session['username']` ，只是那个有`$kick_out value`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:02:20.080

如果你想取消某人的会话，这是不可能的。你可以将会话 id 存储到数据库中，当你想踢某人时，将会话 id 设置为空，每次检查用户的 $_SESSION 是否与用户名等于登录的数据库相同用户名..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:28:59.477

然后提出条件：

```
if{$_session['username'] == $kick_out} unset( $_session['username']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:40:56.110

在您的代码中，您正在分配踢出值，您没有对其进行比较。如果你有一个 $_SESSIONS["username"] 你可以 var 转储它，所以我们得到一个胶水它是什么？对象？数组？多维数组？字符串？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T12:43:17.057

您不能修改其他用户的会话。如果您想强制注销某人，您需要在数据库中存储一个标志，该标志会在登录用户的每个请求上进行检查。

# php - php验证码表单多选列表/菜单不起作用

> ID：10651692
> 
> 赞同：0
> 
> 时间：2012-05-18T11:20:34.297
> 
> 标签：php, mysql

我以前发布过这个问题，但没有成功，请有人帮忙吗？

我有一个有效的验证码表单，但它似乎无法发送设置为允许多选的列表/菜单，它仍然一次发送一个，我不确定要添加到 php.ini 中的代码。

我确实从（Benjamin Oman）那里得到了一些帮助，但表格只发送了 Array 这个词，而不是实际的主要区域。

这是他的建议：

形式：

```
<select name="main_area[]" size="1" multiple="multiple">
<option value="Durban">Durban</option>
<option value="South Coast">South Coast</option>
</select> 
```

PHP：

```
echo "Main Area(s): \"" . print_r($_POST["main_area"], true) . "\" <br>"; 
```

这是我的 php：

```
<?

session_start();

// *** We need to make sure theyre coming from a posted form -
//    If not, quit now ***
if ($_SERVER["REQUEST_METHOD"] <> "POST")
die("You can only reach this page by posting from the enquiry form");

// *** The text input will come in through the variable $_POST["captcha_input"],
//    while the correct answer is stored in the cookie $_COOKIE["pass"] ***
if ($_POST["captcha_input"] == $_SESSION["pass"])
{
// *** They passed the test! ***
// *** This is where you would post a comment to your database, etc ***
echo "<h2><span>Thank</span> You</h2>";
echo "Correct! You have entered the correct code. <br><br>";
echo "Your enquiry has been sent <br><br>";

echo "Overview of the information you have sent  <br><br>";

echo "Onditions of contract: \"" . $_POST["onditions_of_contract"] . "\" <br>";

echo "Tender results: \"" . $_POST["tender_results"] . "\" <br>";

echo "Resume: \"" . $_POST["resume"] . "\" <br>";

echo "Commodities: \"" . $_POST["commodities"] . "\" <br>"; // *** multiple select ***

echo "Main Area: \"" . $_POST["main_area"] . "\" <br>"; // *** multiple select ***

echo "Sub Area: \"" . $_POST["sub_area"] . "\" <br>"; // *** multiple select ***

echo "Company: \"" . $_POST["company"] . "\" <br>";

echo "Company Vat Number: \"" . $_POST["company_vat_number"] . "\" <br>";

echo "Reg. Number: \"" . $_POST["reg_number"] . "\" <br>";

echo "E-mail Address: \"" . $_POST["email_address"] . "\" <br>";

echo "Correspondence Address: \"" . $_POST["correspondence_address"] . "\" <br>";

echo "Street Address: \"" . $_POST["street_address"] . "\" <br>";

echo "For Attention Of: \"" . $_POST["for_attention_of"] . "\" <br>";

echo "Telephone Number: \"" . $_POST["telephone_number"] . "\" <br>";

echo "Fax Number: \"" . $_POST["fax_number"] . "\" <br>";

//sends email via php to the following address
$mailuser = "my@email.com";

//echo 'default chosen address: '.$mailuser;

$header = "Return-Path: ".$mailuser."\r\n"; 
$header .= "From: Security Form <".$mailuser.">\r\n"; 
$header .= "Content-Type: text/html;"; 

$mail_body = '
Onditions of contract: '. $_POST[onditions_of_contract] . '<br>
Tender results: '. $_POST[tender_results] . '<br>
Resume: '. $_POST[resume] . '<br>
Commodities: '. $_POST[commodities] . '<br>
Main Area: '. $_POST[main_area] . '<br>
Sub Area: '. $_POST[sub_area] . '<br>
Company: '. $_POST[company] . '<br>
Company Vat Number: '. $_POST[company_vat_number] . '<br>
Reg. Number: '. $_POST[reg_number] . '<br>
E-mail Address: '. $_POST[email_address] . '<br>
Correspondence Address: '. $_POST[correspondence_address] . '<br>
Street Address: '. $_POST[street_address] . '<br>
For Attention Of: '. $_POST[for_attention_of] . '<br>
Telephone Number: '. $_POST[telephone_number] . '<br>
Fax Number: '. $_POST[fax_number] . '<br><br>'
;    
mail ($mailuser, 'Multi-Quant Trial', $mail_body, $header);
echo '<br>Thank You ';

} else {
// *** The input text did not match the stored text, so they failed ***
// *** You would probably not want to include the correct answer, but
//    unless someone is trying on purpose to circumvent you specifically,
//    its not a big deal.  If someone is trying to circumvent you, then
//    you should probably use a more secure way besides storing the
//    info in a cookie that always has the same name! :) ***
echo "<h2><span>Oops!</span></h2>";
echo "Sorry, you did not enter the correct code.<br><br>";
echo "You said " . $_POST["captcha_input"];
echo "<br>while the correct answer was " . $_SESSION["pass"];
echo "<br><br>Please click back and try again";

}
?> 
```

这是形式：

```
<form action="mail/captcha.php" method="post" id="sendemail">
<ol>
<li>
<label for="conditions_of_contract">Conditions of contract</label>
<div class="box">
<input name="conditions_of_contract" type="radio" value="yes" /> Yes
</div>
<div class="box">
<input name="conditions_of_contract" type="radio" value="no" /> No
</div>
</li>
<li>
<label for="main_area">Main area <small>*</small><br />
<span>(* To select multiple main area keep CTRL button down and click on selecttion)</span>
</label>
<select name="main_area" size="1" multiple="multiple">
<option value="Durban">Durban</option>
<option value="South Coast">South Coast</option>
<option value="North Coast">North Coast</option>
<option value="Pietrmaritzburg">Pietrmaritzburg</option>
<option value="Northern Natal">Northern Natal</option>
<option value="Eastern Cape">Eastern Cape</option>
<option value="Free State">Free State</option>
<option value="Mpumalanga">Mpumalanga</option>
<option value="Swaziland">Swaziland</option>
<option value="Cape">Cape</option>
</select>
</li>
<li>
<label>Please enter the code</label>
<img src="mail/captcha_image.php" class="img" />
<input name="captcha_input" type="text" class="num" size="15">
</li>
<li>
<input name="Send" type="submit" class="button" id="Send" value="Submit" />
<input name="reset" type="reset" class="button" id="reset" value="Reset" />
</li>
</ol>
</form> 
```

有人可以帮我解决这个问题吗，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:55:54.340

本杰明对表格的解决方案是正确的——这是肯定的。

当您以以下形式传递此`<select>`-Element 的值时

```
<select name="main_area[]" size="1" multiple="multiple">
    <option value="Durban">Durban</option>
    <option value="South Coast">South Coast</option>
</select> 
```

$_POST 数组的实际值是这样的：

```
array
   'conditions_of_contract' => string 'yes' (length=3)
   'main' => 
       array
           0 => string 'Durban' (length=11)
           1 => string 'South Coast' (length=15)
   'captcha_input' => string '<Your Captcha Value>' (length=3)
   'Send' => string 'Submit' (length=6) 
```

- 元素中的值`<select>`实际上是作为数组处理的！所以如果你这样做

```
echo $_POST['main_area']; 
```

输出将是：

```
Array 
```

如果要将值作为字符串获取，可以执行内爆：

```
$mainAreaContents = implode(", ", $_POST['main_area']);
echo $mainAreaContents; 
```

输出将是：

```
 Durban, South Coast 
```

提示：您应该通过 $_POST 清理您的输入 - 作为起点，请参阅[PHP -Sanitize values of a array](https://stackoverflow.com/questions/4861053/php-sanitize-values-of-a-array/)

# php - 如何：将数组元素与字符串进行比较

> ID：10651699
> 
> 赞同：1
> 
> 时间：2012-05-18T11:21:14.310
> 
> 标签：php, jquery

我已经预定义了一个数组：

```
$tags = array('PHP', 'Webdesign', 'Wordpress', 'Drupal', 'SQL'); 
```

现在我在文本区域中输入一个值：

```
$text = 'Working With Wordpress Shortcodes and doing some NoSQL and SQL'; 
```

如何将字符串值与预定义的数组进行比较？

基于以上内容我想要的结果是'Wordpress'和'SQL'

我可以用 PHP 和 JQuery 来做吗？

此外，如果它将包含一个正则表达式，如

```
Working With Wordpress; Shortcodes: and doing some NoSQL and ""SQL 
```

那该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:26:30.033

你应该像这样分割你的字符串

```
$array = explode( ' ', $text ); 
```

然后像这样比较

```
$result_array = array_intersect($tags, $array); 
```

现在 result_array 将包含两个数组中的每个值:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:23:51.023

使用[explode](http://php.net/explode)拆分字符串来工作，而不是为每个单词检查[in_array](http://php.net/in_array)

```
$words = explode(' ', $text);
$result = array();
foreach ($words as $word) {
   if (in_array($word, $tags)) {
      $result[] = $word;
   }
} 
```

注意：比较将区分大小写

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:24:00.283

```
foreach(explode(' ', $text) as $word) {
  if(in_array($word, $tags)) {
    // This word is in our tags array, do something.
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T07:43:49.837

我找到了一些解决方案，它对我来说非常有效。首先，我用“，”重新排列字符串，使用分隔

var valsp = $('#desc').val(); var 结果 = valsp.split(/\W+/);

在这之后只使用 inArray() 我得到了想要的结果

希望对其他人有所帮助

# java - 如何在android中使用导入包中的类

> ID：10651700
> 
> 赞同：0
> 
> 时间：2012-05-18T11:21:14.513
> 
> 标签：java, android

我有一个包 pkg1 说我将在 pkg2 中导入。

```
secondactivity.java:
package seconddemoapp.demoapp.demo;
public class seconddemoappActivity extends Activity
{
 ----
}

firstactivity.java:
package firstdemo.firstdemoapp.demo;
import seconddemoapp.demoapp.demo.seconddemoappActivity;

public class firstactivity extends Activity
 {
------
Intent i = new Intent(firstactivity.this, seconddemoappActivity.class); 
startActivity(i); 
} 
```

我收到“NoClassDefFoundError”`seconddemoappActivity.class`

我哪里错了？如何使用中的`seconddemoactivity`类`firstactivity`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:27:52.597

这不是打包问题，因为您在运行时遇到异常。这意味着您的代码应该已正确编译。这意味着打包的导入是正确的，但虚拟机无法在运行时加载类文件。

在您的情况下，我认为 Activity 在不同的进程中运行，这就是它无法加载并且您收到异常的原因。或者它根本没有运行/加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:03:33.270

如果您最近更新了 ADT，则导出类的方式发生了一些变化，这可能导致了此消息。看看这篇文章：

[http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

如前所述，您还应该确保将新活动放入清单文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:25:58.433

我想你错过了清单文件中的活动声明....

```
 <activity
 android:label="@string/app_name"
                android:name="seconddemoapp.demoapp.demo.seconddemoappActivity"
                </activity> 
```

# winforms - 有没有办法强制 DataGridView 为所有单元格触发其 CellFormatting 事件？

> ID：10651702
> 
> 赞同：15
> 
> 时间：2012-05-18T11:21:19.550
> 
> 标签：winforms, datagridview, cell-formatting

我们使用 CellFormatting 事件对应用程序中各种网格中的单元格进行颜色编码。

我们有一些通用代码可以处理导出到 Excel（和打印），但它是黑白的。现在我们要改变它并从网格中获取颜色。

这个[问题和答案](https://stackoverflow.com/a/10616569/180430)有帮助（并且有效）......除了超出单个屏幕的较大网格存在问题。尚未在屏幕上显示的网格部分（逻辑上）永远不会触发它们的 CellFormatting 代码，因此它们的底层颜色永远不会被设置。结果，在 Excel 中，颜色编码在页面*的*一半处消失了。

似乎有三种解决方案：

1) 告诉用户在导出到 Excel 之前他必须滚动到网格的所有部分。**哈！不是一个严肃的解决方案**

2) 在导出到 Excel 之前，以编程方式滚动到网格的所有部分。**只比 (1) 稍微不那么可怕**

3）在我们的导出到 Excel 代码中，在顶部触发一些东西，告诉 DataGridView 绘制/格式化其整个区域，例如

```
 MyDataGridView.FormatAllCells() 
```

**有没有这样的事情？？？**

哦，还有第四个选项，但这将涉及大量现有代码：

4）停止使用 CellFormatting 事件，在加载时格式化单元格。问题是我们必须重新调整应用程序中的每个网格，因为 CellFormatting 是我们从 dot 开始的方式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T19:24:49.767

我有一个可能的解决方案 - 在您的导出函数中访问每个单元格的 Cell.FormattedValue 属性。根据[Microsoft](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx)的说法，这会强制触发 CellFormatting 事件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-04T08:54:00.543

正如其他答案中所指出的，访问`DataGridViewCell.FormattedValue`确实是一种简单的方法来强制`CellFormatting`（重新）调用特定单元格的事件。然而，在我的例子中，这个属性也导致了涉及自动调整列大小的不良副作用。在寻找可行的解决方案时，我终于遇到了以下完美工作的神奇方法：**`DataGridView.Invalidate()`、`DataGridView.InvalidateColumn()`、`DataGridView.InvalidateRow()`**和**`DataGridView.InvalidateCell()`**。

这 4 种方法强制`CellFormatting`仅针对指定范围（单元格、列、行或整个表）重新调用事件，并且不会导致任何令人讨厌的自动调整大小工件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T22:21:38.603

我遇到了同样的问题，我最终得到了与您的解决方案#4 非常相似的东西。像你一样，我已经使用了这个`DataBindingComplete`事件。但是，由于我使用了 Extension 方法，现有代码的更改是可以忍受的：

```
internal static class DataGridViewExtention
{
    public static void SetGridBackColorMyStyle(this DataGridView p_dgvToManipulate)
    {
        p_dgvToManipulate.RowPrePaint += p_dgvToManipulate_RowPrePaint;
        p_dgvToManipulate.DataBindingComplete += p_dgvToManipulate_DataBindingComplete;
    }

    // for the first part - Coloring the whole grid I used the `DataGridView.DataBindingComplete` event:
    private static void p_dgvToManipulate_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
    {
        foreach (DataGridViewRow objCurrRow in ((DataGridView)sender).Rows)
        {
            // Get the domain object from row 
            DomainObject objSelectedItem = (DomainObject)objCurrRow.DataBoundItem;

            // if item is valid ....
            if objSelectedItem != null)
            {
                // Change backcolor of row using my method
                objCurrRow.DefaultCellStyle.BackColor = GetColorForMyRow(objSelectedItem);
            }
        }
    }

    // for the second part (disabling the Selected row from effecting the BackColor i've setted myself, i've used `DataGridView.RowPrePaint` event:
    private static void p_dgvToManipulate_RowPrePaint(object sender, DataGridViewRowPrePaintEventArgs e)
    {
        // If current row about to be painted is selected by user
        if (((DataGridView)sender).Rows[e.RowIndex].Selected)
        {
            // Get current grid row
            var objGridRow = ((DataGridView)sender).Rows[e.RowIndex];

            // Get selectedItem
            DomainObject objSelectedItem = (DomainObject)objGridRow.DataBoundItem;

            // if item is valid ....
            if (objSelectedItem != null && objSelectedItem.ObjectId != 0)
            {
                // Set color for row instead of "DefaultCellStyle" (same color as we used at DataBindingComplete event)
                objGridRow.DefaultCellStyle.SelectionBackColor = GetColorForMyRow(objSelectedItem);
            }

            // Since the selected row is no longer unique, we need to let the used to identify it by making the font Bold
            objGridRow.DefaultCellStyle.Font = new Font(((DataGridView)sender).Font.FontFamily, ((DataGridView)sender).Font.Size, FontStyle.Bold);
        }
        // If current row is not selected by user
        else
        {
            // Make sure the Font is not Bold. (for not misleading the user about selected row...)
            ((DataGridView)sender).Rows[e.RowIndex].DefaultCellStyle.Font = new Font(((DataGridView)sender).Font.FontFamily,
                                                                                   ((DataGridView)sender).Font.Size, FontStyle.Regular);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-18T14:37:56.193

假设，正如@DavidHall 所建议的那样，`.FormatAllCells`我们唯一的选择是停止使用 CellFormatting 并没有什么神奇之处。

**但是，这里的新问题是在加载期间应用单元格样式格式似乎没有任何效果。如果你谷歌它，那里有很多帖子。他们还指出，如果您将相同的代码放在表单上的按钮下并在加载后单击它（而不是在加载中，代码将起作用......因此网格必须在样式应用之前可见）。关于该主题的大多数建议都建议您使用 ...drumroll ... CellFormatting。啊！**

最终找到了一篇建议使用`DataBindingComplete`网格事件的帖子。这有效。

诚然，此解决方案是我不需要的选项“4”的变体。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-23T11:41:57.673

如果您确实想重用在 Cellformatting-event 期间提供的格式（例如，像 fontbold 和 backgroundcolor 这样的 cellstyle-elements），这是一个可能的解决方案。这些单元格样式似乎仅在“单元格格式”和“单元格绘制”事件之间可用，但在 datagridview-cell 的样式本身中不可用。

在 cellformatting-event 期间使用第二个处理程序捕获单元格样式，如下所示：

1.  在导出模块中添加一个共享列表、数组或字典来存储单元格样式：

    ```
    Dim oDataGridFormattingDictionary as  Dictionary(Of String, DataGridViewCellStyle) = nothing 
    ```

2.  初始化字典并向打印或导出代码中的 datagridview 添加第二个处理程序。在 vb.net 中是这样的：

    ```
     oDataGridFormattingDictionary = New Dictionary(Of String, DataGridViewCellStyle)
     AddHandler MyDatagridviewControl.CellFormatting, AddressOf OnPrintDataGridView_CellFormatting 
    ```

3.  添加处理程序的代码

    ```
    Private Sub OnPrintDataGridView_CellFormatting(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellFormattingEventArgs)
    If e.RowIndex > -1 AndAlso e.ColumnIndex > -1 AndAlso Not e.CellStyle Is Nothing Then
       If Not oDataGridFormattingDictionary Is Nothing andalso oDataGridFormattingDictionary.ContainsKey(e.RowIndex & "_" & e.ColumnIndex) = False Then
        oDataGridFormattingDictionary.Add(e.RowIndex & "_" & e.ColumnIndex, e.CellStyle)
       End If
    End If
    End Sub 
    ```

4.  **非常重要**：要确保实际调用原始单元格格式化事件（以及之后的第二个单元格格式化处理程序），您必须为要打印的每个单元格请求**格式化值（例如**

    ```
    oValue = Datagridview.rows(printRowIndex).Cells(printColumnIndex).FormattedValue) 
    ```

    ！

5.  打印时，您现在可以检查单元格是否具有格式。例如：

    ```
    if not oDataGridFormattingDictionary is nothing andalso oDataGridFormattingDictionary.ContainsKey(printRowIndex & "_" & printColumnIndex) Then
    ... the cellstyle is accesible via:
    oDataGridFormattingDictionary(printRowIndex & "_" & printColumnIndex)
    end if 
    ```

6.  在导出或打印代码结束时删除处理程序并将字典设置为空

    ```
    RemoveHandler DirectCast(itemToPrint.TheControl, DataGridView).CellFormatting, AddressOf OnPrintDataGridView_CellFormatting
    oDataGridFormattingDictionary = nothing 
    ```

# ruby-on-rails - 使用 ActiveRecord 查找器方法时默认隐藏某些条目

> ID：10651703
> 
> 赞同：0
> 
> 时间：2012-05-18T11:21:20.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

在我的一些模型中，我想要一个已删除/非活动标志。99% 的时间我对具有此标志的模型对象不感兴趣，并且很容易忘记排除带有该标志的条目，所以我的问题是：

`ActiveRecord`在使用finder 方法时`where`，有没有什么好的方法可以默认排除这些`find`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:36:34.627

把它放在你的模型定义中：

```
default_scope :conditions => { :deleted => true } 
```

但是，如果您想要更大的灵活性，您可以使用[Paranoia](https://github.com/radar/paranoia)，它为破坏操作提供别名，并且还实现了默认范围等。

# sql - 多个更新语句/瞬态表/避免锁定

> ID：10651705
> 
> 赞同：1
> 
> 时间：2012-05-18T11:21:26.260
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2008-r2

我正在寻找一些关于使用 SQL Server 在数据库中处理数据的最佳方法的指导。

基本上我有一系列加载数据的瞬态表，然后对它们执行一系列更新语句。这些更新语句系列的多个实例针对同一个表运行，但每个实例仅更新具有特定标识符（沿袭）的行。我希望能够在实例同时运行时自信地避免任何锁定问题/死锁。

我对此的两个想法如下：

1.  所有更新语句都包含提示行锁，因此不会发生覆盖不同沿袭的页锁。
2.  更改隔离级别 - 脏读永远不会真正发生。任何人都可以阐明哪种可能是解决这种情况的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T04:37:01.963

假设您的表看起来像：

```
CREATE TABLE MyTable
( 
   ID INT IDENTITY(1,1),
   LineageId INT NOT NULL, -- FK to Lineage
   Col1 ...
   Col2 ...

   PRIMARY KEY CLUSTERED(ID),
   FOREIGN KEY LineageId REFERENCES Lineage(LineageId)
) 
```

1.  建议您将表上的聚集索引更改为 LineageId（但请参见下文）。如果 SQL 确实将您的行锁升级为页锁，这应该保证更新最少的页。这样做的缺点是 LineageId 不是唯一的，因此 SQL 将添加一个唯一性。因此，在更改集群之前，如果您的 PK 正在递增，并且如果您发现表中的几乎所有行都已按 LineageId 连续排列（例如，如果数据通过单线程批处理作业插入到此表中），则通过增加代理 pkey 会更可取，因为这可以避免唯一性（更好的窄度）。

2.  ROWLOCK 提示可能会有所帮助，尽管这不能保证。 [http://social.msdn.microsoft.com/Forums/en/sqldatabaseengine/thread/60238304-04e8-4f98-84d1-3ddf1ed786a9](http://social.msdn.microsoft.com/Forums/en/sqldatabaseengine/thread/60238304-04e8-4f98-84d1-3ddf1ed786a9)

3.  需要对其他并发查询执行将隔离级别设置为`READ UNCOMMITTED`或使用 (NOLOCK) 提示，以避免它们在 LineageId 更新表期间阻塞。`SNAPSHOT`这将是一个严厉的措施，未提交的读取可能会导致完整性问题。

# linux - 为特定版本的 Debian 安装 g++

> ID：10651706
> 
> 赞同：0
> 
> 时间：2012-05-18T11:21:26.917
> 
> 标签：linux, g++, debian, platform-specific

我从供应商那里得到了一个设备位置，它使用的是旧版本的 Debian Linux - 我想在上面安装 g++，这样我就可以在本地编译我在其他平台上使用的程序（我了解交叉的过程-编译复杂且困难）。

但是，我不适合更新设备上的任何组件，因为制造商已经提供了特定于硬件的驱动程序/应用程序。我如何告诉 apt-get 安装任何版本的 g++ 已经与操作系统兼容？

谢谢你的帮助。

编辑：我应该补充一点，该平台有一个 MIPS 处理器，我在 -arch 选项中没有看到。感谢您到目前为止的帮助。

此外，出于交叉编译的可能，我将从 Ubuntu 笔记本电脑转到 MIPS debian 系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:26:46.057

检查它是否可以工作

```
apt-get install gcc g++ gfortran 
```

# iphone - 无法以编程方式更改 MFMailComposer 语言？

> ID：10651708
> 
> 赞同：4
> 
> 时间：2012-05-18T11:21:34.783
> 
> 标签：iphone, objective-c, ios

我正在尝试以编程方式更改 MFmailComposer 语言。**最初，如果我首先**选择“英文邮件”按钮 ，MFMailComposer 将以英文打开。现在，如果我选择“阿拉伯语邮件”按钮，那么 MFMailComposer 将以英语打开，而不是阿拉伯语。

这是我的 ViewController 的屏幕截图

![在此处输入图像描述](../Images/0b48504c945617d8494c3917ed10c544.png)

![选择英文按钮时的屏幕截图](../Images/6848952ef0e7c95dd13069484166c2ed.png)

![选择阿拉伯语按钮时的屏幕截图](../Images/68c65736c1c5bc4d041a8cf93d8cac04.png)

那么，如何在不重新启动应用程序的情况下以编程方式更改 MFMailComposer 语言？

这是代码

```
- (IBAction)showInArabic:(id)sender 
{ 

   [[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:@"ar", nil] forKey:@"AppleLanguages"];
   [[NSUserDefaults standardUserDefaults] synchronize];
   [self viewDidUnload];
   [self viewDidLoad];
   Class mailClass = (NSClassFromString(@"MFMailComposeViewController"));
   if (mailClass != nil) 
   {
      if ([mailClass canSendMail]) 
      {
        [self displayComposerSheet];

      } else {

    [self launchMailAppOnDevice];
      }

    } else {

    [self launchMailAppOnDevice];
    }
}
- (IBAction)showInEnglish:(id)sender 
{
    [[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:@"en", nil] forKey:@"AppleLanguages"];
    [[NSUserDefaults standardUserDefaults] synchronize];

    NSArray *languages = [NSArray arrayWithObject:@"en"];
    [[NSUserDefaults standardUserDefaults] setObject:languages forKey:@"AppleLanguages"];

    [self viewDidUnload];
    [self viewDidLoad];

    Class mailClass = (NSClassFromString(@"MFMailComposeViewController"));

    if (mailClass != nil) {

        if ([mailClass canSendMail]) {

            [self displayComposerSheet];

        } else {

            [self launchMailAppOnDevice];
        }

    } else {

        [self launchMailAppOnDevice];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:01:04.730

尝试这个。它对我来说很好。请在 NSBundle 中有英文和阿拉伯文的本地化字符串文件。有了这个，您需要在设备设置和应用程序之间切换。您只能通过应用程序更改语言。

```
#define currentLanguageBundle [NSBundle bundleWithPath:[[NSBundle mainBundle] pathForResource:[[NSLocale preferredLanguages] objectAtIndex:0] ofType:@"lproj"]]; 
```

英语

```
[self changeLanguage : @"en"]; 
```

对于阿拉伯语

```
[self changeLanguage : @"ar"]; 
```

把它放在Button的action方法中

```
- (void)changeLanguage : (NSString*)inLang
{
    [[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObject:inLang forKey:@"AppleLanguages"];
    NSLog(@"test %@", NSLocalizedStringFromTableInBundle(@"NewKey", nil, currentLanguageBundle, @""));
} 
```

如果您对此有任何疑问，请随意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:45:41.070

到目前为止，似乎没有办法以编程方式更改 MFMailComposer 语言。默认设置为英语。

# javascript - 如何在 JavaScript 中提交表单后动态关闭 iframe

> ID：10651709
> 
> 赞同：1
> 
> 时间：2012-05-18T11:21:35.420
> 
> 标签：javascript, iframe

作为我正在做的一些 XSS 研究的一部分，我正在尝试使用更改的表单操作生成一个 iframe，然后在受害者提交他们的详细信息后关闭 iframe。到目前为止，我有以下代码：

```
<body onload="iframeEdit()">
<script>
function deleteIframe() {
var iframe = document.getElementById("myframe");
iframe.parentNode.removeChild(iframe);
}
function iframeEdit() {
var iframe = document.getElementById("myframe");
var innerDoc = iframe.contentDocument || iframe.contentWindow.document;  
var form = innerDoc.getElementsByTagName("form");
form[0].action = "http://127.0.0.1/new/page.php";
form[0].setAttribute("onSubmit", "deleteIframe()");
}
</script>
<iframe id="myframe" src="http://127.0.0.1/iframe/page.php" height="250" width="300"> 
```

该代码仍将表单详细信息发布到 php 页面；但是，之后它无法关闭 iframe。我知道 iframe 删除代码可以工作，就好像我自己尝试它一样工作。因此，要么与脚本的逻辑流程有关，要么 setAttribute 行没有按应有的方式工作。谁能阐明我哪里出错了？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:19:29.563

可能有更好的方法来做到这一点，但我发现一个解决方法是暂停 deleteIframe 函数，通过`setTimeout()`. 我发现只需 5 毫秒就足以成功发布表单详细信息 :)

```
function deleteIframeTimer(){
var t = setTimeout("deleteIframe()", 5);
}

function deleteIframe() {
var iframe = parent.document.getElementById("myframe");
iframe.parentNode.removeChild(iframe);
} 
```

非常感谢杰森的`parent`小费！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:25:35.640

这只是一个猜测，没有运行你的代码

```
form[0].setAttribute("onSubmit", "parent.deleteIframe()"); 
```

我的猜测是 iframe 不能直接访问父窗口，所以你需要`parent`

# java - 从内置网络摄像头捕获图像

> ID：10651711
> 
> 赞同：1
> 
> 时间：2012-05-18T11:21:59.477
> 
> 标签：java, image, webcam, capture

我正在尝试实现一个应用程序，该应用程序将从内置网络摄像头中获取图像并保存图像。我使用的是 64 位 Java 和 Windows 7。搜索了一段时间后，我发现 JMF 不适用于 64 位。如果您有任何通过网络摄像头捕获 64 位图像的代码，请发布链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:26:27.707

对于 64 位 JMF，您可能会从[Install JMF on Windows 7 64bit](https://forums.oracle.com/forums/thread.jspa?threadID=2132405)获得一些好处。似乎还有 JMF 的替代品，如[Capturing image from webcam in java? 中所述。](https://stackoverflow.com/questions/276292/capturing-image-from-webcam-in-java)

# php - 打开没有 frontend_dev.php 的项目

> ID：10651715
> 
> 赞同：1
> 
> 时间：2012-05-18T11:22:16.110
> 
> 标签：php, apache, symfony1, symfony-1.4

我在 Symfony 1.4 中创建了项目并在 FTP 上上传。如果我打开[http://mysite.com/frontend_dev.php/login](http://mysite.com/frontend_dev.php/login)或[http://mysite.com/frontend_dev.php/manage](http://mysite.com/frontend_dev.php/manage)那么一切正常，但如果我打开[http://mysite.com/login](http://mysite.com/login)或[http ://mysite.com/manage](http://mysite.com/manage)然后我有错误：

```
Not Found

The requested URL /login was not found on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

为什么？我必须在 Symfony 或 Apache 中改变什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T15:27:59.053

`frontend/config/setting.yml`默认打开你有 4 个环境：

*   产品
*   开发者
*   测试
*   全部

添加此行

```
dev:
  .settings:
    no_script_name: true  # means you don't need the frontend_dev.php in url 
```

然后清除缓存`php symfony cc`并测试。

另外，检查 " `all`" env 是否覆盖`no_script_name:`.

希望这些信息有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T09:53:23.217

你有

```
no_script_name: true 
```

在您的 settings.yml 的 prod 部分中，并且：

```
RewriteRule ^(.*)$ index.php [QSA,L] 
```

在htaccess？

如果没有，那就用这个。它会起作用，只需根据您的需要更改 RewriteRule 即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T15:41:10.883

还要确保在服务器上运行“symfony cc”。开发环境会在每次页面加载时清除缓存，但生产环境并非如此。如果你改变了路线，之后你总是需要一个“symfony cc”。

# algorithm - 任何涉及图论的解决指南？

> ID：10651716
> 
> 赞同：0
> 
> 时间：2012-05-18T11:22:16.417
> 
> 标签：algorithm, graph-theory

好的。我的问题是，如果问题中没有说明，我不知道*何时*使用不同的图论算法。我怎么知道我什么时候会使用 Prim's/Kruskal's 而不是 Floyd/Dijkstra？问题中的哪些具体线索会为我需要解决什么提供线索？对不起，如果这看起来像一个愚蠢的问题，但我知道这些算法（但我还没有实现很多，但我正在尝试，就像现在一样！哈哈），但我似乎不知道如何使用他们比理论更实际。

请给提示！（如果您需要示例问题或其他问题，我可能会链接我在 onlinejudge 中找到的内容）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:00:37.300

让你的基础知识正确。了解 MST 和最短路径之间的区别。知道什么是连接等。知道何时将哪种算法应用于未明确提及的问题的下一部分是通过实践来实现的。

请参阅这些教程，[http://community.topcoder.com/tc](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=alg_index) ?module=Static&d1=tutorials&d2=alg_index 尤其是图形及其数据结构简介中的那些。

然后在codechef和topcoder上练习一些问题。在一天结束时，您需要练习，练习，然后再练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:58:37.753

如果您遇到的问题已简化为图论问题，您还应该知道您想用它做什么。

如果您需要找到两点之间的最短路径，那么您需要使用许多最短路径算法之一。

如果您需要找到一种将任务与工作人员匹配的方法，那么您可能会将其简化为最大流量问题并使用最大流量算法来解决它。

我不确定我能否帮助您区分最短路径问题和最大流量问题，但如果您只需要知道使用哪种算法，那么这很简单：没关系。只要您选择一种最小生成树算法来解决最小生成树问题，您就会得到最小生成树。

从图论的角度看问题要求你找到什么，想想你将如何从逻辑上解决它，并选择一个与该过程和结果相匹配的算法。

# android - 旋转位图时获取 OME

> ID：10651717
> 
> 赞同：0
> 
> 时间：2012-05-18T11:22:19.287
> 
> 标签：android

我正在尝试通过闲置代码旋转 Img(Bitmap)。它可以正常工作 5-6 次旋转，之后得到 OME？

```
private void rotateImg() {
    Matrix matrix = new Matrix();
    matrix.postScale(curScale, curScale);
    matrix.postRotate(curRotate);
    try {
        temp = Bitmap.createBitmap(temp, 0, 0, temp.getWidth(),
                temp.getHeight(), matrix, true);
        setImage.setImageBitmap(temp);
    } catch (OutOfMemoryError e) {
        curRotate = curRotate - 45.0f;
        Toast.makeText( this,"Out Of Memory",Toast.LENGTH_LONG).show();
    }
} 
```

这里的“test”是从 SDCard 加载的静态位图文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:06:48.050

为什么每次都创建位图？有什么具体原因吗？如果不使用以下代码：

```
private void rotateImg() {
    int cx = temp.getWidth() / 2;
    int cy = temp.getHeight() / 2;
    matrix.preTranslate(-cx, -cy);
    matrix.postRotate(curRotate);
    matrix.postTranslate(cx, cy);
    setImage.setImageMatrix(matrix);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:37:03.020

第一个答案可能是一个潜在的解决方案。这里的问题是您正在创建**很多**相当大的 Bitmap 对象，并且无论出于何种原因，它们都没有被 gc 处理。

更好的解决方案可能是使用单个位图，并在绘制时应用旋转/缩放。例如，如果您在 a`Canvas`的一部分上绘图`View`，则 rotateImg 可以简单地旋转矩阵并调用`invalidate`视图，然后在视图的`onDraw`方法中使用`void drawBitmap (Bitmap bitmap, Matrix matrix, Paint paint)`画布上的 来渲染位图。文档在[这里](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28android.graphics.Bitmap,%20android.graphics.Matrix,%20android.graphics.Paint%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:24:24.970

也许你`bitmap.recycle()`每次调用这个方法时都必须使用方法。试试这样的，

```
private void rotateImg() {
    Matrix matrix = new Matrix();
    matrix.postScale(curScale, curScale);
    matrix.postRotate(curRotate);
    try {
         temp.recycle();  //removes the memory occupied by this bitmap object
          temp=null;
        temp = Bitmap.createBitmap(temp, 0, 0, temp.getWidth(),
                temp.getHeight(), matrix, true);
        setImage.setImageBitmap(temp);
    } catch (OutOfMemoryError e) {
        curRotate = curRotate - 45.0f;
        Toast.makeText( this,"Out Of Memory",Toast.LENGTH_LONG).show();
    }
} 
```

# java - 如何在@BeforeSuite 中使用testNG @Parameters 读取资源文件

> ID：10651725
> 
> 赞同：2
> 
> 时间：2012-05-18T11:22:54.530
> 
> 标签：java, testng

我正在`testNG`使用`Selenium webdriver2.0`.

在我的`testNG.xml`我有

```
<suite data-provider-thread-count="2" name="selenium FrontEnd Test" parallel="false" skipfailedinvocationCounts="false" thread-count="2">
  <parameter name="config_file" value="src/test/resources/config.properties/"/>
  <test annotations="JDK" junit="false" name="CarInsurance Sanity Test" skipfailedinvocationCounts="false" verbose="2">
    <parameter name="config-file" value="src/test/resources/config.properties/"/>
    <groups>
      <run>
        <include name="abstract"/>
        <include name="Sanity"/>
      </run>
    </groups>
    <classes>
    </classes>
  </test> 
</suite> 
```

在java文件中

```
@BeforeSuite(groups = { "abstract" } )
@Parameters(value = { "config-file" })
public void initFramework(String configfile) throws Exception 
{
    Reporter.log("Invoked init Method \n",true);

    Properties p = new Properties();
    FileInputStream  conf = new FileInputStream(configfile);
    p.load(conf);

    siteurl = p.getProperty("BASEURL");
    browser = p.getProperty("BROWSER");
    browserloc = p.getProperty("BROWSERLOC");

} 
```

得到错误为

> AILED CONFIGURATION：@BeforeSuite initFramework org.testng.TestNGException：@Configuration 方法 initFramework 需要参数“config-file”，但尚未标记为 @Optional 或在

如何使用`@Parameters`资源文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-21T19:40:25.277

看起来您的`config-file`参数未在`<suite>`级别定义。有几种方法可以解决这个问题： 1\. 确保`<parameter>`元素定义在`<suite>`tag 内但在 any 之外`<test>`：

```
 <suite name="Suite1" >
   <parameter name="config-file" value="src/test/resources/config.properties/" />
   <test name="Test1" >
      <!-- not here -->
   </test>
 </suite> 
```

2.如果你想在Java代码中为参数设置默认值，不管它是否被指定`testng.xml`，你可以`@Optional`给方法参数添加注解：

```
@BeforeSuite
@Parameters( {"config-file"} )
public void initFramework(@Optional("src/test/resources/config.properties/") String configfile) {
    //method implementation here
} 
```

**编辑**（基于发布的 testng.xml）：

选项1：

```
<suite>
  <parameter name="config-file" value="src/test/resources/config.properties/"/>
  <test >
    <groups>
      <run>
        <include name="abstract"/>
        <include name="Sanity"/>
      </run>
    </groups>
    <classes>
      <!--put classes here -->
    </classes>
  </test> 
</suite> 
```

选项 2：

```
@BeforeTest
@Parameters( {"config-file"} )
public void initFramework(@Optional("src/test/resources/config.properties/") String configfile) {
    //method implementation here
} 
```

在任何情况下，我都建议不要使用几乎相同名称、相同值和不同范围的两个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-22T04:30:22.377

你想`@Parameter`在`@BeforeSuite`. 一旦套件开始执行，套件级别的参数就会被解析，我相信 TestNG`@BeforeSuite`甚至在套件被处理之前就会调用：

这是一个解决方法：添加`ITestContext`方法参数以注入

```
@BeforeSuite(groups = { "abstract" } )
@Parameters({ "configFile" })
public void initFramework(ITestContext context, String configFile) throws Exception { 
```

# android - 使用 Sencha Touch 2 builder 创建一个 android 应用程序

> ID：10651732
> 
> 赞同：5
> 
> 时间：2012-05-18T11:23:18.823
> 
> 标签：android, sencha-touch-2

我正在尝试使用 Sencha Touch 2 构建器工具构建应用程序。我有一个基本的应用程序，我只想测试创建一个应用程序，以便我可以在需要时进行。

我有煎茶工具、android SDK 等

当你跑的时候我已经说到点子上了

```
sencha package build <configfile.json> 
```

在命令行中。经过几次尝试，我已经到了它似乎接受命令的地步，但它什么也不做，不创建应用程序，不在命令行中显示任何内容，什么也没有。

我相信我错过了一些东西，但想不出什么。

这是我的配置文件：

```
{
"applicationName":"Test_app",
"applicationId":"com.testing.test_App",
"versionString":"1.0",
"iconName:":"resources\icons\Icon.png",
"inputPath":"\",
"outputPath":"C:\Users\rc\Android Development\Completed Apps",
"configuration":"Debug",
"platform":"Android",
"deviceType":"Universal",
"certificatePath":"C:\Users\rc\Android Development\Keystore\Test App\my-release-key.keystore",
"certificateAlias":"Test_app",
"sdkPath":"C:\Program Files\Android\android-sdk",
"orientations": [
    "portrait",
    "landscapeLeft",
    "landscapeRight",
    "portraitUpsideDown"
]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:14:48.173

我设法通过使用以下命令来解决这个问题：

```
sencha app build native 
```

我将继续查看原始方法以了解它不起作用，但现在确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T11:34:55.607

您的配置文件对我来说看起来不错。

该命令可能需要很长时间才能响应 - 很多分钟，在我的机器上。它似乎会缓冲所有输出，直到完成。您可以通过查看输出路径的内容来判断它是否真的在做某事：您应该看到正在创建和销毁的文件和文件夹。

# css - IE7 中的 CSS 转换

> ID：10651734
> 
> 赞同：4
> 
> 时间：2012-05-18T11:23:23.597
> 
> 标签：css, internet-explorer-7, css-transforms

嗨，我在比例属性中使用 css 转换我的代码是这样的

```
-webkit-transform: scale(1.05); /* Safari and Chrome */ 
-moz-transform: scale(1.05);    /* Firefox */
-o-transform: scale(1.05);      /* Opera */
-ms-transform: scale(1.05);     /* IE 9 */
transform: scale(1.05); 
```

ie7不支持这里让你知道答案请尽快回复我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T11:52:22.133

我不确定我是否理解你的问题。IE8 或更早版本不支持 CSS 转换，您必须使用 IE 矩阵过滤器才能获得相同的效果（缩放或旋转）。

像这样（IE8 和更早版本的代码，在[http://jsfiddle.net/thebabydino/5XdSy/](http://jsfiddle.net/thebabydino/5XdSy/)**上使用 IE8 或更早**版本检查它）：

```
filter: progid:DXImageTransform.Microsoft.Matrix(
            M11=1.05,
            M12=0,
            M21=0,
            M22=1.05,
            SizingMethod='auto expand'); 
```

此外，您的代码是 CSS，并且您已将其放在 div 标签之间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T11:29:53.667

较旧的 IE 浏览器不支持 CSS 转换。尝试使用像[Transformie](http://paulbakaus.com/2008/08/16/bringing-css-transform-to-internet-explorer/)这样的 polyfill 。

# lua - LuaRings - 如何在主状态下访问从属状态中设置的值（通过 stable.set）？

> ID：10651738
> 
> 赞同：1
> 
> 时间：2012-05-18T11:23:30.337
> 
> 标签：lua

最小的例子实际上是[Rings 主页的第二个例子](http://keplerproject.github.com/rings/manual.html#examples)

```
require"rings"

local init_cmd = [[
require"stable"]]

local count_cmd = [[
count = stable.get"shared_counter" or 0
stable.set ("shared_counter", count + 1)
return count
]]

S = rings.new () -- new state
assert(S:dostring (init_cmd))
print (S:dostring (count_cmd)) -- true, 0
print (S:dostring (count_cmd)) -- true, 1
S:close ()

S = rings.new () -- another new state
assert (S:dostring (init_cmd))
print (S:dostring (count_cmd)) -- true, 2
S:close () 
```

但是，我无法获得`shared_counter`. `print(shared_counter)`输出`nil`。

我试过用`stable.get()`，但它说`stable`只能在奴隶状态下使用。我终于尝试了

```
remotedostring("shared_counter = "..count) 
```

哪个有效，但我不太确定这是否是正确的方法。我想直接访问`stable`值表就足够了？

编辑：哦，我忘了补充，问题的主要部分是以另一种方式进行通信 - 从主机到从机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:07:51.540

该`stable`库将值存储在名为 的主状态的全局表中`_state_persistent_table_`。尽管显然这意味着隐藏和私密。

如果你对此感到不舒服，`stable`就在`remotedostring()`内部使用，自己做这样的事情并不难。

对于 master->slave `slave:dostring()`，使用类似的技术就足够了。

# wpf - 使用 WPF + Windows Azure 存储二进制数据（图像、文件等）

> ID：10651739
> 
> 赞同：2
> 
> 时间：2012-05-18T11:23:31.830
> 
> 标签：wpf, azure, azure-sql-database, azure-storage, azure-blob-storage

我有一个使用 Windows Azure 作为后端的 WPF 应用程序。我使用 SQL Azure 存储 WPF 应用程序通过 WCF 服务访问的数据。我需要能够在服务器端存储二进制文件（例如图像），并想知道存储这些文件的最佳方式是什么。我可以将文件放在 SQL 数据库中，但我不确定是否建议这样做。假设要存储大约 2000 个文件（总大小约为 1GB）。这些文件被频繁访问（最好缓存在客户端）。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T12:27:41.550

正如@Blam 指出的那样，Blob 存储是存储大型二进制对象的更好方法。每个 blob 都有一个看起来像`https://mystorage.blob.core.windows.net/somecontainer/someblob.jpg`. 每个 blob 最多可达 200GB。您可以轻松地将 blob 的 URI 以及相关元数据存储在 SQL Azure 中。

然后，您可以选择通过 WCF 服务返回图像或提供直接访问。对于前者，您基本上可以从 WCF 服务实现调用 Blob 存储以检索 Blob，然后在 WCF 响应中返回它。

使用后者，它变得有点棘手。您可以选择将 blob 设为公开还是私有。公共 blob 非常适合用于不需要用户权限即可查看的徽标、CSS 和其他信息。私有 blob 需要使用您的存储帐户密钥（您永远不应该提供）。但是，使用称为*共享访问签名的功能*，您可以在查询字符串上提供带有特殊哈希的 URL，提供临时访问（最多 1 小时）。基本权衡：如果您通过 WCF 服务下载二进制文件，您的代码将与任何其他 WCF 服务一样工作，但您可能会发现自己扩展到 Azure VM 的多个实例以支持增加的负载。如果您使用共享访问签名，您可能需要修改您的 WPF 应用程序以获取基于 URL 的二进制文件。但是，这会减轻 WCF 服务的负载，因为您随后将直接访问 Blob 存储以下载二进制内容（这是由 Windows Azure 管理的大规模多租户存储系统）。

请参阅[此处](https://www.windowsazure.com/en-us/home/features/storage/)了解 Windows Azure 存储定价。它每 GB 不到 13 美分，比 SQL Azure 便宜得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:41:55.073

天蓝色斑点。与 blob 相比，SQL Azure 是昂贵的。

```
 http://www.windowsazure.com/en-us/home/features/storage/ 
```

# php - while 循环中的复选框不会产生价值

> ID：10651746
> 
> 赞同：0
> 
> 时间：2012-05-18T11:23:52.603
> 
> 标签：php, jquery, database

我正在尝试将所选复选框的所有值都放入 textarea 中。复选框及其值取自数据库。我不知道为什么，但是我的文本方面唯一给我的是“选择”一词。

这些是复选框：

```
 <div class="controls" id="c_b">
        <?php
            echo "<ul>";
            while($user = $allUsers->fetch_assoc())
            {
                echo "<li><input type='checkbox'> " . $user['username'] . " </input></li>";
            }
            echo "</ul>";
            ?>
            <br />
            </div> 
```

这是功能：

```
function updateTextArea() {         
     var allVals = [];
     $('#c_b :checked').each(function() {
       allVals.push($(this).val());
     });
     $('#t').val(allVals)
  }
 $(function() {
   $('#c_b input').click(updateTextArea);
   updateTextArea();
 }); 
```

在此先感谢，我希望有人能看到我所缺少的！亚娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:30:46.417

如果您没有在复选框上设置值，它将默认为`on`如果选中。您需要为每个用户名设置值。

```
<input type="checkbox" value="bob" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:31:47.067

您可以将属性值添加到复选框：http: [//jsfiddle.net/RNdFS/](http://jsfiddle.net/RNdFS/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:27:41.507

你可以试试

```
 $('#c_b input[type=checkbox]:checked').each(function() {
       allVals.push($(this).val());
     }); 
```

# javascript - 如何按顺序调用多个异步 javascript 函数？

> ID：10651755
> 
> 赞同：2
> 
> 时间：2012-05-18T11:24:23.997
> 
> 标签：javascript, json, asynchronous, callback

我试图按顺序调用以下函数，但它们不一定以正确的顺序返回。

然后我了解了可以使用“回调”顺序调用的异步函数。

如何使用回调使这些函数按顺序执行？

```
$.getJSON('http://localhost/search_data.php?title='+title+'&run=annotations&jsoncallback=?', function(r1){
    $.each(make_all_titles3(r1), function (i,v) {
        $vpl.append(v);     
    });
});

$.getJSON('http://localhost/search_data.php?title='+title+'&run=Link&jsoncallback=?', function(r2){
    $.each(make_all_titles3(r2), function (i,v) {
        $vpl.append(v);     
    });
});

$.getJSON('http://localhost/search_data.php?title='+title+'&user='+user+'&run=bookmarks&jsoncallback=?', function(r3){
    $.each(make_all_titles3(r3), function (i,v) {
        $vpl.append(v);     
    });
});

$vpl.append('<div>Related Terms</div>');

$.getJSON('http://localhost/context-search.php?title='+title+'&jsoncallback=?', function(r4){
    $.each(make_all_titles3(r4), function (i,v) {
        $vpl.append(v);     
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:35:29.303

最简单的解决方案是简单地嵌套调用。向下滚动以获得清晰易读的解决方案。

```
function _process(r) {
    $.each(make_all_titles3(r), function (i, v) {
        $vpl.append(v);
    });
}

$.getJSON('http://localhost/search_data.php?title=' + title + '&run=annotations&jsoncallback=?', function (r) {
    _process(r);
    $.getJSON('http://localhost/search_data.php?title=' + title + '&run=Link&jsoncallback=?', function (r) {
        _process(r);
        $.getJSON('http://localhost/search_data.php?title=' + title + '&user=' + user + '&run=bookmarks&jsoncallback=?', function (r) {
            _process(r);
            $vpl.append('<div>Related Terms</div>');
            $.getJSON('http://localhost/context-search.php?title=' + title + '&jsoncallback=?', function (r) {
                _process(r);
            });
        });
    });
}); 
```

现在是干净且可读的，使用[`async`](https://github.com/caolan/async)库：

```
var load = [
    { url: 'http://localhost/search_data.php?title=' + title + '&run=annotations&jsoncallback=?', before: null },
    { url: 'http://localhost/search_data.php?title=' + title + '&run=Link&jsoncallback=?', before: null },
    { url: 'http://localhost/search_data.php?title=' + title + '&user=' + user + '&run=bookmarks&jsoncallback=?', before: null },
    { url: 'http://localhost/context-search.php?title=' + title + '&jsoncallback=?', before: function() { $vpl.append('<div>Related Terms</div>'); } }
];

async.forEachSeries(load, function(item, next) {
    if(item.before) {
        item.before();
    }
    $.getJSON(item.url, function(r) {
        $.each(make_all_titles3(r), function (i, v) {
            $vpl.append(v);
        });
        next();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:36:35.767

请在此处查看我的问题：[关于 Node 的代码样式](https://stackoverflow.com/questions/10278721/about-nodes-code-style)
并且我提供了一个帮助函数来进行嵌入式回调的内嵌调用。
它适用于 NodeJS 和浏览器 JS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:37:27.043

```
ajaxcall1(parameter, function() {
    ajaxcall2(parameter, function() {
        ajaxcall3(parameter, function() {
            alert("lol");
        };
    };
}); 
```

说明：第一个返回结果时调用第二个ajax调用，第二个返回时调用3d。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-18T11:29:45.280

使用 ajax 异步 false 选项

```
$.ajaxSetup({ async: false });
    // put your three get methods here
$.ajaxSetup({ async: true }); 
```

注意：这将暂停您的动态页面功能，直到您的总代码块执行完成

# apache - 如何正确设置 Apache HTTP - Tomcat 配置

> ID：10651757
> 
> 赞同：1
> 
> 时间：2012-05-18T11:24:31.053
> 
> 标签：apache, tomcat, reverse-proxy, mod-proxy, server.xml

我已经使用 Apache HTTP 和 Tomcat 构建了一个设置，它们通过 mod_proxy 相互通信。我已经粘贴了我在下面使用的配置。我遇到的问题是会话丢失，我认为这与代理配置不当有关。我阅读了很多文章，但仍然无法弄清楚我做错了什么。

httpd.conf：

```
<VirtualHost MACHINE_IP:80>
  ServerName www.mydomain.com
  ProxyRequests Off
  ProxyPass /apps/my_app http://MACHINE_IP:8080/my_app
  ProxyPassReverse /apps/my_app http://MACHINE_IP:8080/my_app
  Header set P3P "CP=\"HONK\""
</VirtualHost>

<VirtualHost MACHINE_IP:443>
  ServerName www.mydomain.com
  ProxyRequests Off
  ProxyPass /apps/my_app https://MACHINE_IP:8443/my_app
  ProxyPassReverse /apps/my_app https://MACHINE_IP:8443/my_app

  Header set P3P "CP=\"HONK\""
</VirtualHost> 
```

Tomcat（在 MACHINE_IP 上）在常用端口 8080 和 8843 上运行，配置如下（*我认为这是默认配置*）：

```
<Server port="8005" shutdown="SHUTDOWN">

  <Service name="Catalina">

    <Connector port="8080" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443"
               />

    <Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
               maxThreads="150" scheme="https" secure="true"
               clientAuth="false" sslProtocol="TLS"
                keystoreFile="cert/tomcat.keystore"
                keystorePass="password"
               />

    <Connector port="8009" protocol="AJP/1.3" redirectPort="8443" />

    <Engine name="Catalina" defaultHost="localhost">

      <Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true">

      </Host>
    </Engine>
  </Service>
</Server> 
```

奇怪的是，当我在 server.xml 中配置任何 proxyName 和 proxyPort 以及主机的域名时，一切都停止工作了。上面的 server.xml 示例正在运行，但由于某种原因，会话丢失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:42:26.350

您看到会话丢失是因为您更改了应用程序的上下文路径

```
ProxyPass /apps/my_app https://MACHINE_IP:8443/my_app 
```

从`/apps/my_app`httpd 到 `/my_app`Tomcat。这意味着 Tomcat 将为`/my_app`不匹配客户端从 httpd 请求的路径发出会话 cookie。

要解决此问题，请使用[ProxyPassReverseCookiePath](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypassreversecookiepath)

# ios - ios：矩形内的纬度/经度

> ID：10651764
> 
> 赞同：1
> 
> 时间：2012-05-18T11:24:44.300
> 
> 标签：ios, core-location

我有 CLLocation 对象，其中包含用户的当前位置，并且对于可以倾斜的矩形的每个角，我有 4 个纬度/经度对。现在我想检查 CLLocation 坐标是否在该矩形内。

以下是矩形的坐标

```
#define NorthEast_LAT 51.514894
#define NorthEast_LNG -0.135306
#define SouthEast_LAT 51.514831
#define SouthEast_LNG -0.135153
#define NorthWest_LAT 51.514719
#define NorthWest_LNG -0.135858
#define SouthWest_LAT 51.514556
#define SouthWest_LNG -0.135714 
```

我尝试了以下代码，但我认为它仅在矩形角度为 0 度时才有效。

```
 BOOL withinRect = [delegate.CLController latlngWithInBox:location 
                                                    point1:CLLocationCoordinate2DMake(NorthEast_LAT, NorthEast_LNG) 
                                                    point2:CLLocationCoordinate2DMake(SouthEast_LAT, SouthEast_LNG) 
                                                    point3:CLLocationCoordinate2DMake(NorthWest_LAT, NorthWest_LNG)
                                                    point4:CLLocationCoordinate2DMake(SouthWest_LAT, SouthWest_LNG)];

 - (BOOL) latlngWithInBox:(CLLocation *)position point1:(CLLocationCoordinate2D)point1 point2:(CLLocationCoordinate2D)point2 point3:(CLLocationCoordinate2D)point3 point4:(CLLocationCoordinate2D)point4 {

if (position.coordinate.latitude >= point3.latitude && position.coordinate.latitude <= point2.latitude
    && position.coordinate.longitude >= point3.longitude && position.coordinate.longitude <= point2.longitude) {
    return YES;
}
return NO; 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T13:35:25.767

确定某个点是否在地图矩形内的另一种方法是使用`MKMapKit`'s 函数：

1.  `MKMapPointForCoordinate`- 将坐标转换为地图点
2.  `MKMapRectMake`- 使用这些点创建矩形
3.  `MKMapRectContainsPoint`- 确定指定的地图点是否位于矩形内

优点是 MKMapKit (MKMapPoint, MKMapRect) 使用地图的墨卡托投影，所以不需要提供球体计算。但其中一些功能在 iOS 4.0 及更高版本中可用。

更新：

```
// 1 ------- 2
// |         |
// |      x  |
// |         |
// 3 ------- 4    

// 1 = topLeftCorner
// 4 = bottomRightCorner
// x = targetCoordinate

CLLocationCoordinate2D topLeftCorner = /* some coordinate */, bottomRightCorner = /* some coordinate */;
CLLocationCoordinate2D targetCoordinate = /* some coordinate */;
MKMapPoint topLeftPoint = MKMapPointForCoordinate(topLeftCorner);
MKMapPoint bottomRightPoint = MKMapPointForCoordinate(bottomRightCorner);
MKMapRect mapRect = MKMapRectMake(topLeftPoint.x, topLeftPoint.y, bottomRightPoint.x - topLeftPoint.x, bottomRightPoint.y - topLeftPoint.y);
MKMapPoint targetPoint = MKMapPointForCoordinate(targetCoordinate);   

BOOL isInside = MKMapRectContainsPoint(mapRect, targetPoint); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:48:46.347

让我们忽略地理坐标的矩形在椭球体上（那里的数学很困难）。所以你想知道一个点是否在一个四边形内。

最简单的方法是首先添加一个限制：必须按照一定的顺序（NE、NW、SE、SW）给出点。然后，将它们视为正常的 2D 坐标（经度 = x，纬度 = y）。

下一步是减少问题：让坐标形成 2 个三角形，例如 NE-NW-SE 和 NW-SE-SW。然后检查您的[点是否在这两个三角形之一内](https://stackoverflow.com/questions/2049582/how-to-determine-a-point-in-a-triangle)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:49:16.673

```
- (BOOL) latlngWithInBox:(CLLocation *)position point1:(CLLocationCoordinate2D)point1 point2:(CLLocationCoordinate2D)point2 point3:(CLLocationCoordinate2D)point3 point4:(CLLocationCoordinate2D)point4 {
    //&& position.coordinate.latitude >= [[point4 objectAtIndex:0] floatValue] && position.coordinate.latitude <= [[point1 objectAtIndex:0] floatValue] && position.coordinate.longitude <= [[point4 objectAtIndex:1] floatValue] && position.coordinate.longitude >= [[point1 objectAtIndex:1] floatValue]
    if (PointInTriangle(position.coordinate, point1, point2, point3) || PointInTriangle(position.coordinate, point2, point3, point4)) {
        return YES;
    }
    return NO;
}

float sign(CLLocationCoordinate2D p1, CLLocationCoordinate2D p2, CLLocationCoordinate2D p3)
{
    return (p1.longitude - p3.longitude) * (p2.latitude - p3.latitude) - (p2.longitude - p3.longitude) * (p1.latitude - p3.latitude);
}

bool PointInTriangle(CLLocationCoordinate2D pt, CLLocationCoordinate2D v1, CLLocationCoordinate2D v2, CLLocationCoordinate2D v3)
{
    bool b1, b2, b3;

    b1 = sign(pt, v1, v2) < 0.0f;
    b2 = sign(pt, v2, v3) < 0.0f;
    b3 = sign(pt, v3, v1) < 0.0f;

//    NSLog(@"b1-%@", [NSNumber numberWithBool:b1]);
//    NSLog(@"b2-%@", [NSNumber numberWithBool:b2]);
//    NSLog(@"b3-%@", [NSNumber numberWithBool:b3]);

    return ((b1 == b2) && (b2 == b3));
} 
```

# javascript - js文件中的全局变量

> ID：10651766
> 
> 赞同：0
> 
> 时间：2012-05-18T11:24:53.660
> 
> 标签：javascript

我希望在我的所有选项卡中都可以访问一个值。我尝试使用隐藏输入，但它不起作用。我试过 var x; 在其中一个 js 文件中，但其他文件无法访问它。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:35:47.113

> > > 我试过 var x; 在其中一个 js 文件中

你确定你在全局声明变量吗？您还必须将该 JS 导入您正在使用的 html 页面并将其放在其他 JS 文件之上。或将其导入每个 JS 文件<--我还没有测试过这个，但我确定其他的作品

html5文件

```
<html>
<head>

<script LANGUAGE="JavaScript" src="JS/globalVar.js"></script>//file that contains global variables
<script LANGUAGE="JavaScript" src="JS/java.js"></script>//file that needs global variables.
<script LANGUAGE="JavaScript" src="JS/otherJava.js"></script>//other JS files

<LINK REL=StyleSheet HREF="CSS/myCSS.css" TYPE="text/css" >//styling for html

</head> 
```

然后在 JS 文件中确保在所有其他函数之前将 var 设为全局

```
var GLOBAL1;
var GLOBAL2;
var GLOBAL3;

function main(){
      ...some code...
} 
```

# jquery - 使用数组更改 img 源

> ID：10651767
> 
> 赞同：1
> 
> 时间：2012-05-18T11:24:56.447
> 
> 标签：jquery, html

我正在尝试使用 jQuery 更改图像的来源。我想从自动创建的数组中获取新的文件路径。我有数组的代码，但我完全无法在函数中使用数组。

这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="styles.css" rel="stylesheet" type="text/css" />
<script src="jquery.js"></script>

<script type="text/javascript">

//create an array that holds all image paths
var picArray = [];

for (var i =1; i <=20; i++) {  // 20 is the number of images
var elemvalue = "images/videoseq_" + format(i) + ".jpg";
picArray[i] = elemvalue;
//alert(picArray)
}

function format(n) { //this function simply adds leading zeros to filenames
n = n.toString(); 
var result;
if (n.length == 4) {result = "0" + n}
if (n.length == 3) {result = "00" + n}
if (n.length == 2) {result = "000" + n}
if (n.length == 1) {result = "0000" + n}
return result;
};
// end image path array creator code

//this function should insert the next imagepath in the array for the image with the class .changeImg
function rightButton(){
    var i;
    var imgPath = $("img .changeImg").attr("src", "picArray[i++]");
    //alert (imgPath);
};

function leftButton(){
    alert('helloleft')
};

//  });

</script>

</head>

<body>

<div id="container">
    <img class="changeImg" src="images/videoseq_00000.jpg" width="1280px" height="720px" />
    <div id="left" onclick="leftButton();"></div>
    <div id="right" onclick="rightButton();"></div>

</div> <!--video -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:32:20.443

您的代码有两个问题，首先，`i`您的函数中没有值`rightButton`，要么将其传入或将其初始化为您想要的数字（不确定它应该是什么）？

其次，`imgPath`不需要您的变量，并且 JavaScript 值用引号引起来，请参阅：

```
var imgPath = $("img.changeImg").attr("src", "picArray[i++]"); 
```

将您的`rightButton`代码更改为：

```
function rightButton(){
    var i = 0; //what should "i" be? Should it be global? I've just put 0 as a placeholder
    $("img.changeImg").prop("src", picArray[i++]);
} 
```

# css - IE9 过滤器阴影错误？

> ID：10651768
> 
> 赞同：0
> 
> 时间：2012-05-18T11:24:56.530
> 
> 标签：css, input, internet-explorer-9

在 IE9 中输入是不可见的。是IE9的错误吗？它是由过滤器阴影引起的。

```
input {
  width: auto;
  padding: 5px 10px;
  border-radius: 5px;
  border: none;
  background: #e75012;
  color: #fff;
  font-weight: bold;
  cursor: pointer;

  text-shadow: 2px 1px 1px #000;
  filter: dropshadow(color=#000, offx=2, offy=1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:36:02.347

这给了我一个丑陋的混乱，使用：

```
filter:progid:DXImageTransform.Microsoft.dropshadow(color=#000, offx=2, offy=1); 
```

有效，但它在 IE9 中已贬值，您可以使用上级；

```
box-shadow: #000 2px 2px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:36:55.670

由于 IE9 不支持 CSS3 文本阴影，请查看此链接 Live example：http: [//jsfiddle.net/dmM2S/](http://jsfiddle.net/dmM2S/)

# c# - 下载时显示图像，在 wpf 中

> ID：10651771
> 
> 赞同：1
> 
> 时间：2012-05-18T11:25:06.390
> 
> 标签：c#, wpf, image, download

我用下面的代码下载图像。

```
 byte[] buffer = new byte[1024];

    HttpWebRequest httpRequest = (HttpWebRequest)WebRequest.Create(url);
    httpRequest.Timeout = 30000;
    httpRequest.Method = "GET";
    httpRequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20100101 Firefox/12.0";
    httpRequest.Accept = "image/png,image/*;q=0.8,*/*;q=0.5";

    using (HttpWebResponse httpResponse = (HttpWebResponse)httpRequest.GetResponse())
    {
        using (Stream responseStream = httpResponse.GetResponseStream())
        {
            MemoryStream memStream = new MemoryStream();
            int bytesRead;
            while ((bytesRead = responseStream.Read(buffer, 0, buffer.Length)) > 0)
            {
                memStream.Write(buffer, 0, bytesRead);
            }
            memStream.Seek(0, SeekOrigin.Begin);
            return memStream;
        }
    } 
```

下载后，在 WPF Image 控件中显示。

```
 BitmapImage bmpImage = new BitmapImage();
    bmpImage.BeginInit();
    bmpImage.StreamSource = memStream;
    bmpImage.CacheOption = BitmapCacheOption.OnLoad;
    bmpImage.EndInit();

    backIMG.Source = bmpImage; 
```

我想在下载时显示图像（在浏览器中加载类似的图像）我该怎么做？

（对不起英语不好）

# android - Android：java.lang.IllegalArgumentException：无效的音频缓冲区大小

> ID：10651775
> 
> 赞同：2
> 
> 时间：2012-05-18T11:25:45.627
> 
> 标签：android, audio, audio-recording, audiorecord

我正在尝试使用 audiorecord 类立即录制音频后播放音频。我搜索了谷歌和stackoverflow，我发现了任何解决方案。有什么帮助吗？这是 Audio_Record ...的代码。

```
public class Audio_RecordActivity extends Activity {
private static final int RECORDER_BPP = 16;
private static final String AUDIO_RECORDER_FILE_EXT_WAV = ".wav";
private static final String AUDIO_RECORDER_FOLDER = "AudioRecorder";
private static final String AUDIO_RECORDER_TEMP_FILE = "record_temp.raw";
private static final int RECORDER_SAMPLERATE = 16000;
private static final int RECORDER_CHANNELS = AudioFormat.CHANNEL_IN_STEREO;
private static final int RECORDER_AUDIO_ENCODING = AudioFormat.ENCODING_PCM_16BIT;

private AudioRecord recorder = null;
private int bufferSize = 0;
private Thread recordingThread = null;
private boolean isRecording = false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    setButtonHandlers();
    enableButtons(false);

    bufferSize = AudioRecord.getMinBufferSize(RECORDER_SAMPLERATE,
            RECORDER_CHANNELS, RECORDER_AUDIO_ENCODING);
}

private void setButtonHandlers() {
    ((Button) findViewById(R.id.btnStart)).setOnClickListener(btnClick);
    ((Button) findViewById(R.id.btnStop)).setOnClickListener(btnClick);
}

private void enableButton(int id, boolean isEnable) {
    ((Button) findViewById(id)).setEnabled(isEnable);
}

private void enableButtons(boolean isRecording) {
    enableButton(R.id.btnStart, !isRecording);
    enableButton(R.id.btnStop, isRecording);
}

private String getFilename() {
    String filepath = Environment.getExternalStorageDirectory().getPath();
    File file = new File(filepath, AUDIO_RECORDER_FOLDER);

    if (!file.exists()) {
        file.mkdirs();
    }

    return (file.getAbsolutePath() + "/" + System.currentTimeMillis() + AUDIO_RECORDER_FILE_EXT_WAV);
}

private String getTempFilename() {
    String filepath = Environment.getExternalStorageDirectory().getPath();
    File file = new File(filepath, AUDIO_RECORDER_FOLDER);

    if (!file.exists()) {
        file.mkdirs();
    }

    File tempFile = new File(filepath, AUDIO_RECORDER_TEMP_FILE);

    if (tempFile.exists())
        tempFile.delete();

    return (file.getAbsolutePath() + "/" + AUDIO_RECORDER_TEMP_FILE);
}

private void startRecording() {
    recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,
            RECORDER_SAMPLERATE, RECORDER_CHANNELS,
            RECORDER_AUDIO_ENCODING, bufferSize);

    recorder.startRecording();

    isRecording = true;

    recordingThread = new Thread(new Runnable() {

        @Override
        public void run() {
            writeAudioDataToFile();
        }
    }, "AudioRecorder Thread");

    recordingThread.start();
}

private void writeAudioDataToFile() {
    byte data[] = new byte[bufferSize];
    String filename = getTempFilename();
    FileOutputStream os = null;

    try {
        os = new FileOutputStream(filename);
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    int read = 0;

    if (null != os) {
        while (isRecording) {
            read = recorder.read(data, 0, bufferSize);

            if (AudioRecord.ERROR_INVALID_OPERATION != read) {
                try {
                    os.write(data);
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }

        try {
            os.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

private void stopRecording() {
    if (null != recorder) {
        isRecording = false;

        recorder.stop();
        recorder.release();

        recorder = null;
        recordingThread = null;
    }

    copyWaveFile(getTempFilename(), getFilename());
    deleteTempFile();
}

private void deleteTempFile() {
    File file = new File(getTempFilename());

    file.delete();
}

private void copyWaveFile(String inFilename, String outFilename) {
    FileInputStream in = null;
    FileOutputStream out = null;
    long totalAudioLen = 0;
    long totalDataLen = totalAudioLen + 36;
    long longSampleRate = RECORDER_SAMPLERATE;
    int channels = 2;
    long byteRate = RECORDER_BPP * RECORDER_SAMPLERATE * channels / 8;

    byte[] data = new byte[bufferSize];

    try {
        in = new FileInputStream(inFilename);
        out = new FileOutputStream(outFilename);
        totalAudioLen = in.getChannel().size();
        totalDataLen = totalAudioLen + 36;

        AppLog.logString("File size: " + totalDataLen);

        WriteWaveFileHeader(out, totalAudioLen, totalDataLen,
                longSampleRate, channels, byteRate);

        while (in.read(data) != -1) {
            out.write(data);
        }

        in.close();
        out.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

private void WriteWaveFileHeader(FileOutputStream out, long totalAudioLen,
        long totalDataLen, long longSampleRate, int channels, long byteRate)
        throws IOException {

    byte[] header = new byte[44];

    header[0] = 'R'; // RIFF/WAVE header
    header[1] = 'I';
    header[2] = 'F';
    header[3] = 'F';
    header[4] = (byte) (totalDataLen & 0xff);
    header[5] = (byte) ((totalDataLen >> 8) & 0xff);
    header[6] = (byte) ((totalDataLen >> 16) & 0xff);
    header[7] = (byte) ((totalDataLen >> 24) & 0xff);
    header[8] = 'W';
    header[9] = 'A';
    header[10] = 'V';
    header[11] = 'E';
    header[12] = 'f'; // 'fmt ' chunk
    header[13] = 'm';
    header[14] = 't';
    header[15] = ' ';
    header[16] = 16; // 4 bytes: size of 'fmt ' chunk
    header[17] = 0;
    header[18] = 0;
    header[19] = 0;
    header[20] = 1; // format = 1
    header[21] = 0;
    header[22] = (byte) channels;
    header[23] = 0;
    header[24] = (byte) (longSampleRate & 0xff);
    header[25] = (byte) ((longSampleRate >> 8) & 0xff);
    header[26] = (byte) ((longSampleRate >> 16) & 0xff);
    header[27] = (byte) ((longSampleRate >> 24) & 0xff);
    header[28] = (byte) (byteRate & 0xff);
    header[29] = (byte) ((byteRate >> 8) & 0xff);
    header[30] = (byte) ((byteRate >> 16) & 0xff);
    header[31] = (byte) ((byteRate >> 24) & 0xff);
    header[32] = (byte) (2 * 16 / 8); // block align
    header[33] = 0;
    header[34] = RECORDER_BPP; // bits per sample
    header[35] = 0;
    header[36] = 'd';
    header[37] = 'a';
    header[38] = 't';
    header[39] = 'a';
    header[40] = (byte) (totalAudioLen & 0xff);
    header[41] = (byte) ((totalAudioLen >> 8) & 0xff);
    header[42] = (byte) ((totalAudioLen >> 16) & 0xff);
    header[43] = (byte) ((totalAudioLen >> 24) & 0xff);

    out.write(header, 0, 44);
}

private View.OnClickListener btnClick = new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.btnStart: {
            AppLog.logString("Start Recording");

            enableButtons(true);
            startRecording();

            break;
        }
        case R.id.btnStop: {
            AppLog.logString("Start Recording");

            enableButtons(false);
            stopRecording();

            break;
        }
        }
    }
};
} 
```

我收到如下 logcat 文件所示的错误。

日志错误

```
05-18 16:51:04.656: E/AndroidRuntime(1974): FATAL EXCEPTION: main
05-18 16:51:04.656: E/AndroidRuntime(1974): java.lang.IllegalArgumentException: Invalid audio buffer size.
05-18 16:51:04.656: E/AndroidRuntime(1974):     at android.media.AudioRecord.audioBuffSizeCheck(AudioRecord.java:333)
05-18 16:51:04.656: E/AndroidRuntime(1974):     at android.media.AudioRecord.<init>(AudioRecord.java:230)
05-18 16:51:04.656: E/AndroidRuntime(1974):     at audio.xxx.Audio_RecordActivity.startRecording(Audio_RecordActivity.java:88)
05-18 16:51:04.656: E/AndroidRuntime(1974):     at  audio.xxx.Audio_RecordActivity.access$1(Audio_RecordActivity.java:85)
05-18 16:51:04.656: E/AndroidRuntime(1974):     at audio.xxx.Audio_RecordActivity$1.onClick(Audio_RecordActivity.java:258)
05-18 16:51:04.656: E/AndroidRuntime(1974):     at android.view.View.performClick(View.java:3511)
05-18 16:51:04.656: E/AndroidRuntime(1974):     at android.view.View$PerformClick.run(View.java:14105)
05-18 16:51:04.656: E/AndroidRuntime(1974):     at android.os.Handler.handleCallback(Handler.java:605)
05-18 16:51:04.656: E/AndroidRuntime(1974):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-18 16:51:04.656: E/AndroidRuntime(1974):     at android.os.Looper.loop(Looper.java:137)
05-18 16:51:04.656: E/AndroidRuntime(1974):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-18 16:51:04.656: E/AndroidRuntime(1974):     at java.lang.reflect.Method.invokeNative(Native Method)
05-18 16:51:04.656: E/AndroidRuntime(1974):     at java.lang.reflect.Method.invoke(Method.java:511)
05-18 16:51:04.656: E/AndroidRuntime(1974):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-18 16:51:04.656: E/AndroidRuntime(1974):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-18 16:51:04.656: E/AndroidRuntime(1974):     at dalvik.system.NativeStart.main(Native Method) 
```

请帮帮我..我应该使用什么缓冲区大小。我使用 4096 然后也显示相同的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T06:38:01.910

您尝试使用此代码，它可以正常工作..

```
 public class Audio_RecordActivity extends Activity {
private static final int RECORDER_SAMPLERATE = 8000;
private static final int RECORDER_CHANNELS = AudioFormat.CHANNEL_IN_MONO;
private static final int RECORDER_AUDIO_ENCODING = AudioFormat.ENCODING_PCM_16BIT;
private AudioRecord recorder = null;
private Thread recordingThread = null;
private boolean isRecording = false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    setButtonHandlers();
    enableButtons(false);

    int bufferSize = AudioRecord.getMinBufferSize(RECORDER_SAMPLERATE,
            RECORDER_CHANNELS, RECORDER_AUDIO_ENCODING);

    System.out.println("BUFFER SIZE VALUE IS " + bufferSize);

}
private void setButtonHandlers() {
    ((Button) findViewById(R.id.btnStart)).setOnClickListener(btnClick);
    ((Button) findViewById(R.id.btnStop)).setOnClickListener(btnClick);
}

private void enableButton(int id, boolean isEnable) {
    ((Button) findViewById(id)).setEnabled(isEnable);
}

private void enableButtons(boolean isRecording) {
    enableButton(R.id.btnStart, !isRecording);
    enableButton(R.id.btnStop, isRecording);
}

int BufferElements2Rec = 1024; // want to play 2048 (2K) since 2 bytes we use only 1024
int BytesPerElement = 2; // 2 bytes in 16bit format

private void startRecording() {

    recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,
            RECORDER_SAMPLERATE, RECORDER_CHANNELS,
            RECORDER_AUDIO_ENCODING, BufferElements2Rec*BytesPerElement);

    recorder.startRecording();
    isRecording = true;

    recordingThread = new Thread(new Runnable() {

        public void run() {

            writeAudioDataToFile();

        }
    }, "AudioRecorder Thread");
    recordingThread.start();
}

private byte[] short2byte(short[] sData)
{
    int shortArrsize= sData.length;
    byte[] bytes = new byte[shortArrsize*2];

    for (int i=0; i < shortArrsize; i++)
    {
        bytes[i*2] = (byte) (sData[i] & 0x00FF);
        bytes[(i*2)+1] = (byte) (sData[i] >> 8);
        sData[i] = 0;
    }
    return bytes;

 }

  private void writeAudioDataToFile() {
    // Write the output audio in byte

    String filePath = "/sdcard/voice8K16bitmono.pcm";
    short sData[] = new short[BufferElements2Rec];

    FileOutputStream os = null;
    try {
        os = new FileOutputStream(filePath);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }

    while (isRecording) {
        // gets the voice output from microphone to byte format

        recorder.read(sData, 0, BufferElements2Rec);

        try {
            // // writes the data to file from buffer
            // // stores the voice buffer
            byte bData[] = short2byte(sData);
            os.write(bData, 0, BufferElements2Rec*BytesPerElement);
        } catch (IOException e) {
            e.printStackTrace();
        }
     }

    try {
        os.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
  }

      private void stopRecording() {
    // stops the recording activity

    if (null != recorder) {
        isRecording = false;

        recorder.stop();
        recorder.release();

        recorder = null;
        recordingThread = null;
    }
}

private View.OnClickListener btnClick = new View.OnClickListener() {
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.btnStart: {
            enableButtons(true);
            startRecording();
            break;
        }
        case R.id.btnStop: {
            enableButtons(false);
            stopRecording();
            break;
        }
        }
    }
     };

    @Override
   public boolean onKeyDown(int keyCode, KeyEvent event) {

    if (keyCode == KeyEvent.KEYCODE_BACK) {

        finish();
    }
    return super.onKeyDown(keyCode, event);
   }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:35:03.853

对于音频录制和播放，请参阅此链接[示例](http://code.google.com/p/krvarma-android-samples/source/checkout) 下载示例并使用音频重新编码代码。它工作得很好。

# c#-4.0 - 如何让程序运行而不是c#中的异常？

> ID：10651776
> 
> 赞同：0
> 
> 时间：2012-05-18T11:25:48.613
> 
> 标签：c#-4.0, exception-handling

我正在编写一个程序来读取数组中的所有文件。假设在两者之间是否有任何文件损坏或任何原因它将停止执行并抛出异常我想让代码运行到最后并最终记录错误文件而不是抛出异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:28:50.930

```
try{
   doSomethingThatMayRaiseAndException();
}
catch (Exception e){
    NotifyTheUserThatSomethingBadJustHappened();
} 
```

这里的 Exception 是异常的基类，如果您想向用户提供详细信息，您可能需要使用更具体的基类。但是现在，你需要学习的是如何处理异常。您可以使用[Oded 提供的链接](http://msdn.microsoft.com/en-us/library/ms229005.aspx)，这是一个好的开始。然后注意你需要处理的引发的异常是什么，并处理它。

# java - 使用 Hibernate 2nd Level Cache 和 HSQL 的插入/更新率令人失望

> ID：10651779
> 
> 赞同：4
> 
> 时间：2012-05-18T11:26:04.207
> 
> 标签：java, spring, hibernate, hsqldb, ehcache

我需要能够以每秒 5,000 次以上的写入速度写入我的数据库。目前，我无法管理超过 10% 的数字。

我正在使用 Spring 将我的数据源 (HSQL) 和 Hibernate 配置为我的 Jpa 提供程序。

我的实体都是扁平的（没有复杂的对象树），并且我使用了 Hibernate 二级缓存 (EhCache)，并将并发策略设置为 ConcurrencyStrategy.READ-WRITE。

这是我的数据源 bean 的 Spring-Context：

```
 <bean id="commandsTransactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
p:entityManagerFactory-ref="commandEmf"/>

<tx:annotation-driven transaction-manager="commandsTransactionManager" />

<!-- Commmands Data Source Configuration -->
<bean id="commandsDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="${jdbc-commands.driverClassName}"/>
    <property name="url" value="${jdbc-commands.url}"/>
    <property name="username" value="${jdbc-commands.username}"/>
    <property name="password" value="${jdbc-commands.password}"/>
    <property name="initialSize" value="10"/>
    <property name="maxActive" value="100"/>
    <property name="maxWait" value="-1"/>
</bean>

 <bean name="lazyConnectionDataSourceProxy" class="org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy">
    <property name="targetDataSource" ref="commandsDataSource" />
</bean>

<!-- Commands Container Managed JPA Entity Manager Factory -->
<bean id="commandEmf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="commandsDataSource"/>
    <property name="persistenceUnitName" value="commands"/>
    <property name="jpaPropertyMap" ref="jpaPropertyMap"/>
    <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"
                    p:showSql="false"  p:generateDdl="true" p:database="HSQL" p:databasePlatform="org.hibernate.dialect.HSQLDialect">
            </bean>
    </property>
</bean>

<util:map id="jpaPropertyMap" key-type="java.lang.String" value-type="java.lang.Object">
     <entry key="hibernate.hbm2ddl.auto" value="${jdbc-commands.ddlmode}" />
      <entry key="hibernate.cache.use_second_level_cache" value="true" />
      <entry key="hibernate.cache.region.factory_class" value="net.sf.ehcache.hibernate.SingletonEhCacheRegionFactory"/>
</util:map> 
```

这是我的一个实体类的示例。“AbstractAnnotatedAggregateRoot”是来自[Axon 框架](http://www.axonframework.org/)的抽象实体类，它提供聚合和存储库实现框架。聚合本质上是必须实现自己的 Jpa 以实现持久性的实体。

```
@Entity
@Table(name = "users")
@Cache(region="usersCache", usage= CacheConcurrencyStrategy.READ_WRITE)
public class User extends AbstractAnnotatedAggregateRoot {

    private static final long serialVersionUID = -6536766172448063298L;

    private String username;

    private String password;

    private Integer subscription;

    private String firstName;

    private String lastName;

    private Calendar subscriptionDate;

    private Date lastAccessTime;

    public User(){}

    public User(StringAggregateIdentifier email){
        super(email);
        registerEvent(new UserCreatedEvent(email.asString()));
    }

    @Column(unique = true)
    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
        registerEvent(new UserNameUpdatedEvent(this.username));
    }

    @Column(nullable = false)
    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
        registerEvent(new UserPasswordUpdatedEvent(this.password));
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
        registerEvent(new UserFirstNameUpdatedEvent(this.firstName));
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
        registerEvent(new UserLastNameUpdatedEvent(this.lastName));
    }

    public String getEmail() {
        return getIdentifier().asString();
    }

    @Temporal(TemporalType.DATE)
    public Calendar getSubscriptionDate() {
        return subscriptionDate;
    }

    public void setSubscriptionDate(Calendar subscriptionDate) {
        this.subscriptionDate = subscriptionDate;
        registerEvent(new UserSubscriptionDateUpdatedEvent(this.subscriptionDate));
    }

    @Temporal(TemporalType.TIMESTAMP)
    public Date getLastAccessTime() {
        return lastAccessTime;
    }

    public void setLastAccessTime(Date lastAccessTime) {
        this.lastAccessTime = lastAccessTime;
        registerEvent(new UserLastAccessTimeUpdatedEvent(this.lastAccessTime));

    }

    public Integer getSubscription() {
        return subscription;
    }

    public void setSubscription(Integer subscription) {
        this.subscription = subscription;
        registerEvent(new UserSubscriptionUpdatedEvent(this.subscription));
    }

} 
```

为了完整起见，这里是我的 EhCache.xml 文件中的缓存区域配置：

```
 <cache name="usersCache" maxElementsInMemory="10000"
  maxElementsOnDisk="10000" eternal="false" overflowToDisk="false"
  diskSpoolBufferSizeMB="20" timeToIdleSeconds="300"
  timeToLiveSeconds="600" memoryStoreEvictionPolicy="LFU"
  statistics = "true">
  </cache> 
```

在 Axon 框架内，我调度命令来尝试更改聚合的状态。这些命令在由 Spring 的 PlatformTransactionManager 管理的事务的范围内。

命令调度同步发生，我需要每秒处理 5,000 个命令。每个命令将从缓存中获取聚合，更改其上的值，然后在调度下一个命令之前保持更改。问题在于获取/更新/插入行所花费的时间，考虑到 HYSQL 和 H2 之类的 INSERT 速率，我认为这会快得多。

任何将速度提高一个数量级的想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:25:08.783

我认为您的数据库和 JDBC 以及单个插入语句可以做的事情已经很有限了。休眠不是问题，缓存也不是。但是您的数据库可能无法处理更多通过 JDBC 来的插入。

但是如果你设法使用[批量插入操作](http://docs.jboss.org/hibernate/orm/3.5/reference/en-US/html/batch.html#batch-direct)，你可以得到更快的速度。散装是指风格`insert into your_table select ... from ...`。您从表中读取数据，稍作修改，然后插入结果。可能有批量插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:11:12.993

如果此实体是您的数据的典型实体（即没有长字符串的少数列），并且如果数据库操作是 UPDATE，那么数据库性能应该与此处描述的相当，每秒执行 5000 个事务（多次更新，一次使用基于磁盘的表进行选择和每个事务一次插入）。

[http://hsqldb.org/web/hsqlPerformanceTests.html](http://hsqldb.org/web/hsqlPerformanceTests.html)

该数据库在一张表中有 4000000 条记录。对于较大的表，性能会下降，尤其是当数据库大小超过使用 Java nio 内存映射文件的预设限制时。

您还应该检查 .script 文件中的数据库模式，看看是否创建了不必要的索引，这会减慢速度。

# php - 将 ajax 与 while 语句和 DB 一起使用

> ID：10651780
> 
> 赞同：-2
> 
> 时间：2012-05-18T11:26:09.103
> 
> 标签：php, ajax

我有一个关于使用 ajax 的问题。我想删除我的屏幕上的某些内容（要清楚，一些文章）我正在使用以下代码在屏幕上生成内容（文章）：

```
while($test = $allArticles->fetch_assoc())
{   
        echo "<div class='metfoto'>";
        echo "<h1 name='tt' class='titelopmaak'>".$test['titel'] . "<br /></h1>";
    echo "<p class='artikelopmaak'>" . $test['article'] . "</p>";
        echo "<form method='post' action=''>";
    echo "<input type='submit' class='delete' name='verwijder' value='verwijder'>";
        echo "</form>";
    //echo "<h1>".$test['id']."</h1>";
    echo "</div>";
} 
```

没有ajax，这一切都很好。但我想在不刷新页面的情况下实现这一点（使用按钮删除）。例如，当我检查 $test['id'] 的内容时，我收到一个号码。**我对下面代码的问题是，当我想将标题放入 ajax 的 variabel (var title) 时，它会从我的页面加载所有标题。**

```
 <script type="text/javascript">
            $(document).ready(function(){
                $(".delete").click(function(){
                    var titel = $(".titelopmaak").text();
                    var artikel = $(".artikelopmaak").text();

            $.ajax({
            type: "POST",
            url: "assets/ajax/deleteArticle.php",
            data: { titelA:titel },

        }).done(function( msg ) {

            if(msg.status != "error")

                {
                    if(msg.status == "success")
                    {
                        $(".titelopmaak").fadeOut();

                    }
                    else
                    {

                    }
                }

        });
        return false;
    })

});             
        </script> 
```

**编辑**

**我希望我现在能以更好的方式解释我的问题**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:27:24.063

你的问题在这里

```
 var titel = $(".titelopmaak").text(); 
```

您可以使用 class 获取元素的所有值，`.titelopmaak`但您只需要一个。

这是正确的，我们上树然后找到项目。

```
var titel = $(this).closest('.metfoto').find('.titelopmaak').text(); 
```

但是，通过标题控制元素是非常糟糕的做法，使用 id 代替。

```
<script>
$(document).ready( function(){
    $('.delete').submit( function() {
            $.ajax({
                url:    $(this).attr('action'),
                data:   $(this).serialize(),
                type:   $(this).attr('method'),
                success: function(data, status, jqXHR) {
                        $(".titelopmaak").fadeOut();
                },
                error: function(jqXHR, textStatus, errorThrown) {
                }
            );
    });
});
</script>
<? while($test = $allArticles->fetch_assoc()) { ?>
<form method="POST" action="" class="delete">
    <input type="hidden" value="<?=$test['id']?>" name="delete">
    <input type="submit" value='verwijder'>
</form>
<? } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:29:10.480

你可以这样试试......

您必须为每个 html 元素指定单独的 id

```
while($test = $allArticles->fetch_assoc())
{   
     $cid = $test['id'];
        echo "<div id='div$cid' class='metfoto'>";
        echo "<h1 name='tt' id='h1$cid' class='titelopmaak'>".$test['titel'] . "<br /></h1>";
    echo "<p id='para$cid' class='artikelopmaak'>" . $test['article'] . "</p>";
    echo "<input type='submit' class='delete' name='verwijder' id='verwijder$cid' onclick='deleteValue($cid);' value='verwijder'>";
    echo "</div>";
} 
```

javascript函数

通过它们的 id 引用 h1 和 div。

```
<script type="text/javascript">
function deleteValue(cid)
{
         var titel = $("#h1"+cid).text();
         var artikel = $("#para"+cid).text();

            $.ajax({
            type: "POST",
            url: "assets/ajax/deleteArticle.php",
            data: { titelA:titel },

        }).done(function( msg ) {

            if(msg.status != "error")

                {
                    if(msg.status == "success")
                    {
                        $("#h1"+cid).fadeOut();

                    }
                    else
                    {

                    }
                }

        });
        return false;
    })

}
</script> 
```

删除文章.php

```
include "connection.php";
$title = $_POST['titelA'];
$ok = mysql_query("delete from yourtable where title='$title');
echo "your msg here"; 
```

# javascript - 用 PHP 和 AJAX 实现可变按钮？

> ID：10651781
> 
> 赞同：1
> 
> 时间：2012-05-18T11:26:10.227
> 
> 标签：javascript, html, ajax, variables, event-handling

我想设置一个图像按钮（OPEN），它的`onclick()`功能呈现一条消息，包括 php.ini 中的特定值更改。用户单击该按钮时所需的行为是将其替换为另一个图像按钮（关闭）。

是否可以设置可变按钮？我尝试如下使用变量链接：

**JavaScript：**

```
if (window.XMLHttpRequest)
   {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
   }
 else
 {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
 }
 xmlhttp.onreadystatechange=function()
 {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
   var response=xmlhttp.responseText;
   x=response;
   if(x == 1)
   link="OPEN";
   else 
   link="CLOSE";

   var content = "<table style=\"padding-left:10px ;  float:right ; text-align:right\" > <tr><td style=\"float:right;color: blue;text-decoration: underline\" onmouseover=\"this.style.cursor='hand'\" onclick=\"function()\">"+link+"</td></tr></table>"; 
```

但是，当用户单击“打开”链接并关闭页面时，下次他将获得 CLOSE 链接而不是 OPEN

关于如何正确实施的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:50:06.617

像这样的东西

```
if(x == 1) {
  link="OPEN";
  src="open.png"
} else {
  link="CLOSE";
  src="close.png"
}

var content = "<table style=\"padding-left:10px ;  float:right ; text-align:right\" > <tr><td style=\"float:right;color: blue;text-decoration: underline\" onmouseover=\"this.style.cursor='hand'\" onclick=\"function()\"><img src=\""+src+"\"/>"+link+"</td></tr></table>"; 
```

或在某处与图像一起使用

```
document.getElementById("imageid").src=src 
```

# ios - 如何在 IOS 中登录 Facebook 并分享动态消息？

> ID：10651787
> 
> 赞同：1
> 
> 时间：2012-05-18T11:26:34.597
> 
> 标签：ios, facebook

我正在使用此代码在 Facebook 新闻源上分享一个项目：

```
-(void)recommendOnFacebook:(Item *)currentItem{    
if(!facebook){
    facebook = [[Facebook alloc] initWithAppId:@"myappid" andDelegate:self];
} 
NSMutableDictionary *params2 = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                [NSString stringWithFormat:@"%@", currentItem.name], @"name",
                                [shop name], @"caption",
                                currentItem.description, @"description",
                                [NSString stringWithFormat:@""], @"link",
                                currentItem.imagePath, @"picture",
                                nil, @"actions",
                                nil];    
[facebook dialog:@"feed" 
     andParams:params2
     andDelegate:self];
} 
```

如果我已登录，我可以成功看到共享提要的对话框。但是，如果我没有登录，则在此代码块完成后，api 对话框会询问我的凭据。我需要的是，如果用户未登录，api显示对话框，用户成功登录后，显示另一个对话框以继续共享进度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:37:12.097

你需要看看 FBSessionDelegate。这是我的分享代码

```
- (IBAction) facebookShare:(id)sender {
    AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;

    if (![delegate.facebook isSessionValid]) {
        [delegate.facebook authorize:[NSArray arrayWithObjects:@"publish_stream", @"offline_access", nil]];
    }
    else {
        NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
         [NSString stringWithFormat:@"TEXT", score.text], @"name",
         @"", @"caption",
         @"DESC.", @"description",
         @"link", @"link",
         @"imagelink", @"picture",
         nil];  
        [delegate.facebook dialog:@"feed"
               andParams:params
             andDelegate:self];
    }

}

#pragma mark - FB Session Delegate

- (void)fbDidLogin {
    AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    /*NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[delegate.facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[delegate.facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];*/
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
         [NSString stringWithFormat:@"TEXT", score.text], @"name",
         @"", @"caption",
         @"DESC.", @"description",
         @"link", @"link",
         @"imagelink", @"picture",
         nil];  
        [delegate.facebook dialog:@"feed"
               andParams:params
             andDelegate:self];
} 
```

**编辑**

对于公共咖啡馆的注销，您需要确保您永远不会像在 FB 会话委托方法 fbDidLogin 中那样在 NSUSerDefaults 中保存访问令牌

现在实现 FBDialogDelegate 方法

```
- (void)dialogDidComplete:(FBDialog *)dialog {
    AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    [delegate.facebook logout:self];
} 
```

# ruby-on-rails - Sentry Rails 客户端

> ID：10651788
> 
> 赞同：2
> 
> 时间：2012-05-18T11:26:40.327
> 
> 标签：ruby-on-rails, django, sentry

根据[哨兵文档](https://github.com/dcramer/sentry)：

...Sentry 不仅限于 Python。主要实现是在 Python 中，但它包含一个完整的 API，用于在任何应用程序中从任何语言发送事件。

有一个名为“sentry”的 gem，但它是一个加密库，必须与 OpenSSH 完全无关。

是否已经有一个 Rails 客户端可以连接到 Sentry 或其他可以与 Rails 一起使用的类似技术？

如果没有，Rails Sentry 客户端 +1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:34:38.620

在我写这篇文章时（最后更新于 2015 年 5 月），[Sentry 文档](https://www.getsentry.com/docs/)列出了 Java、JavaScript、Node.js、PHP、Python 和 Ruby 的客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T08:07:27.763

它有点隐藏，但是在托管版本中（不知道它是否也在开源版本中）您可以在此页面上找到有关 Ruby 和 RoR 集成的信息：

[https://app.getsentry.com/account/projects/](https://app.getsentry.com/account/projects/) **PROJEKCT-SLUG** /docs/

所以看起来他们有 Ruby 支持，但不要在网页上告诉我们。

编辑：我发现了这个：[https ://github.com/coderanger/raven-ruby](https://github.com/coderanger/raven-ruby)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T08:08:42.183

登录后，文档中有对[https://github.com/coderanger/raven-ruby的引用。](https://github.com/coderanger/raven-ruby)

# java - 为特殊字符生成 AWT keyevent

> ID：10651794
> 
> 赞同：0
> 
> 时间：2012-05-18T11:26:58.823
> 
> 标签：java, awt, awtrobot

我想为特殊字符`£, €, µ, ½, Ö, Ä`等生成键事件。我可以使用以下代码为键盘上的键生成键事件，例如“A、B、c、%、*、^”等：

```
public static void generateKeyEvent(final int c) {

        new Thread() {
            public void run() {

                try {
                    Robot robot = new Robot();
                    robot.keyPress(c);

                    try {
                        Thread.sleep(10);
                    } catch (InterruptedException e) {
                    }
                    robot.keyRelease(c);
                } catch (Exception e) {
                e.printStackTrace();
                }
            }
        }.start();

    } 
```

在正常字符的情况下，它工作正常，但在我上面提到的字符的情况下，代码会引发以下异常：

```
java.lang.IllegalArgumentException: Invalid key code
at sun.awt.windows.WRobotPeer.keyPress(Native Method)
at java.awt.Robot.keyPress(Unknown Source)
at com.companyname.utils.Abc$1.run(Abc.java:286) 
```

我在寻找这个问题的解决方案时注意到的一件事，因为这些特殊字符没有映射到我的键盘上，这就是它抛出这个异常的原因。

任何想法，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:42:49.597

我得到了这个问题的答案..基本上如果你想打印那些符号，那么你需要“alt”键来输入。

例如：如果您需要在记事本中输入“é”，则必须输入 alt+130。

所以我做了同样的事情，我为 alt 生成了键事件，然后为 numpad 1 然后为 numpad3，最后为 numpad0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:10:20.570

你是如何传递钥匙的？请注意，Robot.keyPress 需要键码，而不是字符。看看[KeyEvent 常量](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html#field_summary)。有一个[VK_EURO_SIGN](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html#VK_EURO_SIGN)，不确定其他的。您应该能够通过实现**KeyListener**并在按下特定键（键组合）时检查**KeyEvent.getKeyCode()来获取任意键代码。**

# facebook - 通过 Facebook 集成登录，无需在 facebook 上注册网站

> ID：10651796
> 
> 赞同：1
> 
> 时间：2012-05-18T11:27:05.650
> 
> 标签：facebook, button, login

我想为新网站使用“用 Facebook 登录”功能。我创建了一个带有 Facebook 登录名的页面。

当我试图从以下位置获取代码时：

[https://developers.facebook.com/docs/reference/plugins/login/](https://developers.facebook.com/docs/reference/plugins/login/)

它要求我创建一个应用程序。

所以我的问题是我可以在没有 Facebook 应用程序集成的情况下使用“使用 facebook 登录”功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T11:30:59.117

不，你不能。即使您检索到登录插件所需的代码，Facebook 也会指示您替换`APP_ID`自己的代码。例如，如果您想在该人登录时检索有关该人的数据，您将需要一个应用程序

*   电子邮件
*   姓名
*   性别
*   地点
*   ETC...

您必须使用 app_id 和 app_secret 对用户进行身份验证才能检索 access_token。每个用户每个应用程序的 access_token 都是唯一的。有关身份验证的更多信息在[这里](https://developers.facebook.com/docs/authentication/)。

基本上，每次您想使用 Graph API 或 FQL 查询 Facebook 的数据库时，您都是代表用户执行此操作。Facebook 将这些调用链接到应用程序，以便他们能够知道哪个应用程序具有哪些权限以及他们正在使用它们做什么。

点击[https://developers.facebook.com/apps](https://developers.facebook.com/apps)并在您验证您的 Facebook 开发者帐户后，您将能够`create a new app`

# python - 每个线程创建自己的记录器实例，记录自己的事件

> ID：10651801
> 
> 赞同：1
> 
> 时间：2012-05-18T11:27:36.610
> 
> 标签：python, multithreading, logging

我尝试过登录 Python。看起来一旦一个线程创建了一个日志实例，它就不会被删除。但是，我的程序每分钟应该产生超过 100 个线程，并且每个线程都会创建自己的记录器，这可能会导致一种内存泄漏（`logging.Logger`垃圾收集器不会收集实例）。

谁能帮我解决这个问题，有没有办法将记录器用于多线程应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:57:56.177

在 python`logging`模块中，记录器由一个`logging.Manager`实例管理。通常只有一个日志管理器，可用`logging.Logger.manager`. 记录器由其名称标识。每次您使用`logging.getLogger('name')`此调用时，都会将其转发到`logging.Logger.manager.getLogger`包含记录器的字典并每次返回相同的记录器`'name'`。

因此，如果您在从线程获取记录器时不使用不同的名称，那么您实际上每次都使用相同的记录器实例，而不必担心内存泄漏。

# akka - 如何在akka2中检测死的远程客户端或服务器

> ID：10651807
> 
> 赞同：1
> 
> 时间：2012-05-18T11:28:07.977
> 
> 标签：akka

我是 AKKA2 的新手。以下是我的问题：

有一个服务器参与者和几个客户端参与者。服务器存储客户端参与者的所有 ref。

我想知道服务器如何检测哪个客户端断开连接（关闭，崩溃......）

如果有办法告诉客户端服务器已经死了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T10:58:45.963

有两种方法可以与 Actor 的生命周期进行交互。首先，参与者的父级定义了一个处理参与者故障的监督策略，并且可以选择在故障后重新启动、停止、恢复或升级。另外，一个非监督的actor可以“监视”一个actor来检测actor死亡时产生的Terminated消息。文档的这一部分涵盖了该主题： [http ://doc.akka.io/docs/akka/2.0.1/general/supervision.html](http://doc.akka.io/docs/akka/2.0.1/general/supervision.html)

这是使用规范中的手表的示例。我启动了一个演员，然后为 Termination 设置了一个观察者。当 actor 收到 PoisonPill 消息时，观察者会检测到该事件：

```
"be able to watch the proxy actor fail" in {
      val myProxy = system.actorOf(Props(new VcdRouterActor(vcdPrivateApiUrl, vcdUser, vcdPass, true, sessionTimeout)), "vcd-router-" + newUuid)
      watch(myProxy)
      myProxy ! PoisonPill
      expectMsg(Terminated(`myProxy`))
} 
```

这是一个自定义主管策略的示例，如果由于身份验证异常而失败，则停止子actor，因为这可能无法纠正，或者如果失败是由于其他原因，则将故障升级到更高的主管：

```
override val supervisorStrategy = OneForOneStrategy(maxNrOfRetries = 5, withinTimeRange = 1 minutes) {

    // presumably we had a connection, and lost it.  Let's restart the child and see if we can re-establish one.
    case e: AuthenticationException ⇒
      log.error(e.message + "  Stopping proxy router for this host")
      Stop

    // don't know what it was, escalate it.
    case e: Exception ⇒
      log.warning("Unknown exception from vCD proxy. Escalating a {}", e.getClass.getName)
      Escalate
} 
```

在参与者中，您可以通过抛出异常或处理 PoisonPill 消息来生成故障。

如果您不想生成失败，另一种可能有用的模式是向发送者响应失败。然后，您可以与来电者进行更私人的消息交换。例如，调用者可以使用 ask 模式并使用 onComplete 块来处理响应。调用方：

```
vcdRouter ? DisableOrg(id) mapTo manifest[VcdHttpResponse] onComplete {
      case Left(failure) => log.info("receive a failure message")  
      case Right(success) ⇒ log.info("org disabled)    
} 
```

被调用方：

```
val org0 = new UUID("00000000-0000-0000-0000-000000000000")
def receive = {
  case DisableOrg(id: UUID) if id == org0 => sender ! Failure(new IllegalArgumentException("can't disable org 0")
  case DisableOrg(id: UUID) => sender ! disableOrg(id)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T07:02:18.383

在即将发布的 Akka 2.2 版本（RC1 昨天发布）中，Death Watch 可以在本地和远程工作。如果您在另一个系统上观察 root 监护人，当您为他终止时，您就知道远程系统已关闭。

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-04T14:42:33.840

为了使您的服务器对远程客户端状态的变化做出反应，您可以使用类似以下的内容（示例适用于 Akka 2.1.4）。

在 Java 中

```
@Override
public void preStart() {
    context().system().eventStream().subscribe(getSelf(), RemoteLifeCycleEvent.class);
} 
```

或者在 Scala 中

```
override def preStart = {
     context.system.eventStream.subscribe(listener, classOf[RemoteLifeCycleEvent])
} 
```

如果您只在客户端断开连接时感兴趣，您可以只注册 RemoteClientDisconnected

更多信息[在这里（java）](http://doc.akka.io/docs/akka/2.1.4/java/remoting.html#remote-events)和[这里（scala）](http://doc.akka.io/docs/akka/2.1.4/scala/remoting.html#remote-events)

# c# - 如何获取上传视频的第一帧

> ID：10651808
> 
> 赞同：0
> 
> 时间：2012-05-18T11:28:17.197
> 
> 标签：c#, asp.net-mvc-3, image, video, ffmpeg

我在 youtube、vimeo 等上有上传视频的视频 URL。我如何获得图像格式 usimg ffmpeg 或其他技术的第一帧视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:26:46.450

这是一个小的java脚本函数

```
 function getScreen( url, size )
    {
      if(url === null){ return ""; }

      size = (size === null) ? "big" : size;
      var vid;
      var results;

      results = url.match("[\\?&]v=([^&#]*)");

      vid = ( results === null ) ? url : results[1];

      if(size == "small"){
        return "http://img.youtube.com/vi/"+vid+"/2.jpg";
      }else {
        return "http://img.youtube.com/vi/"+vid+"/0.jpg";
      }
    }

imgUrl_big   = getScreen("uVLQhRiEXZs"); 
imgUrl_small = getScreen("uVLQhRiEXZs", 'small'); 
```

如需更多帮助，您可以查看此 jquery 插件 [jYoutube](http://jquery-howto.blogspot.com/2009/05/jyoutube-jquery-youtube-thumbnail.html)

# python - 将 Python str 中的连接元素保留为列表转换

> ID：10651811
> 
> 赞同：0
> 
> 时间：2012-05-18T11:28:40.370
> 
> 标签：python, string, list, type-conversion

我想知道是否有一种特殊的方法可以让我获取一个列表元素 ( `["3D"]`)，并使用 for 循环将其嵌套在另一个列表 ( `[["3D"]]`) 中，同时避免我遇到的当前类型转换问题导致`[["3","D"]]`.

为了清楚起见，我包括了以下内容；

```
hand = ["3D", "4D", "4C", "5D", "JS", "JC"]

from itertools import groupby 

def generate_plays(hand):
    plays = []
    for rank,suit in groupby(hand, lambda f: f[0]):
        plays.append(list(suit))
    for card in hand:
        if card not in plays:       #redundant due to list nesting
            plays.append(list(card))       #problematic code in question
    return plays 
```

输出：

```
[['3D'], ['4D', '4C'], ['5D'], ['JS', 'JC'], ['3', 'D'], ['4', 'D'], ['4', 'C'], ['5', 'D'], ['J', 'S'], ['J', 'C']] 
```

预期输出：

```
[['3D'], ['4D', '4C'], ['5D'], ['JS', 'JC'], ['4D'], ['4C'], ['5D'], ['JS'], ['JC']] 
```

重申一下，这里的目的是在 for 循环中保留卡片元素的连接性。

非常感谢。

PS 对于那些有兴趣的人，它是一个纸牌游戏的游戏生成器，可以玩单张牌和 2 个以上的数字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:35:00.600

```
hand = ["3D", "4D", "4C", "5D", "JS", "JC"]

from itertools import groupby 

def generate_plays(hand):
    plays = []
    for rank,suit in groupby(hand, lambda f: f[0]):
        plays.append(list(suit))
    for card in hand:
        if [card] not in plays:       #redundant due to list nesting
            plays.append([card])       #problematic code in question
    return plays

print generate_plays(hand) 
```

# oracle - 在 oracle 中导入多个转储文件

> ID：10651815
> 
> 赞同：2
> 
> 时间：2012-05-18T11:28:50.887
> 
> 标签：oracle, import, oracle11g, dmp

我正在使用 ORACLE 11g ORCL 数据库。我们可以在Oracle数据库中一次[使用多个命令提示符]导入多个转储文件[针对不同的用户]？请建议我，如果可能的话，程序相同.. 提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:25:21.927

当然，您应该能够同时在不同的会话中导入多个用户级导出。如果您有两个会话都发出一堆 DDL 和 DML 语句（库缓存排队等待、机器上的磁盘和 CPU 资源争用等），您将遇到相同类型的争用问题。

# xml - 如何在文件名中添加动态日期时间 Xml 中的标记

> ID：10651817
> 
> 赞同：1
> 
> 时间：2012-05-18T11:28:52.097
> 
> 标签：xml, xsd

我需要添加带有附件文件 test.dat 的动态时间戳 (test_currentDateTime.dat)

我需要修改的示例代码：

```
<node name="testEmail" type="emailoutput"
subject="this is a test mail with an attachment"
xsl="&XSLPATH;test.xsl" outputType="text/plain" >
<attachment type="text/plain" name="test.dat"/>  
</node> 
```

如何`attachment`在 xml 中节点标记内的标记中完成此操作。

提前致谢。

# javascript - 如何在rails应用程序中格式化java脚本中的文本

> ID：10651818
> 
> 赞同：0
> 
> 时间：2012-05-18T11:28:53.537
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我有一个 id 这是逻辑所以我在这里动态发送文本现在我想调整这个文本的大小和重新着色。我的 jquery 看起来像这样

```
<script type="text/javascript">
 $(function($){
 $("#daily_type").change(function()
{
  logic = $(this).val()

  LogicShow(logic)
})
function LogicShow(logic)
{

  if ( logic == "iss" )
  {
    var spanText = "Based on the severity High" ;
    $("#logic_change").html(spanText);
  }
  if ( logic == "unix" )
  {
    var spanText = "Summary reflects based on the number of events.Such as how many times number of events observed" ;
    $("#logic_change").html(spanText);
  }

}
});

</script> 
```

所以现在我怎样才能传递一些好的文本格式和颜色的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:32:25.920

给`class`一个`span`包装。

```
var spanText = '<span class="logictext">Based on the severity High</span>' ; 
```

然后为那些`class`es写css。

或者您也可以提供内联 css：

```
var spanText = '<span style="color: #f00;">Based on the severity High</span>' ; 
```

# node.js - node.js libxml 无法安装

> ID：10651822
> 
> 赞同：0
> 
> 时间：2012-05-18T11:29:20.650
> 
> 标签：node.js, libxml2, cloud9-ide

尝试使用`npm install libxml`并出现错误：libxml@0.0.5 预安装脚本失败。

我在上面看到另一个错误： /usr/bin/ld: 找不到 -lxml2 collect2: return code 1 Waf: Leaving directory `/var/www/cloude9node/node_modules/libxml/support/o3/build' Build failed: -> task失败（错误 #1）：{task: cxx_link sh_node_1.o,sh_node_libs_1.o -> o3.node} 文件“/usr/local/bin/node-waf”，第 16 行，在 Scripting.prepare(t, os. getcwd(), VERSION, wafdir) File "/usr/local/bin/../lib/node/wafadmin/Scripting.py", line 147, in prepare error(str(e)) cp: can't get stat для «build/Release/o3.node»：没有这样的文件或目录

所以，请帮助！

当开始为 libxml 安装时，我会看到下一个：

> libxml@0.0.5 预安装 /var/www/cloude9node/node_modules/libxml ./build.sh

检查程序 g++ 或 c++：/usr/bin/g++ 检查程序 cpp：/usr/bin/cpp 检查程序 ar：/usr/bin/ar 检查程序 ranlib：/usr/bin/ranlib 检查 g++： ok
检查节点路径：未找到 检查节点前缀：ok /usr/local

所有这些我都需要安装 cloud9

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T14:06:28.050

可能是您缺少[libxml2](http://www.xmlsoft.org/)。

尝试以下操作（这是针对 Ubuntu）：

```
$ sudo apt-get install libxml2-dev. 
```

# javascript - html to exe> 阻止 Internet Explorer 对象中的 javascript 和 activex 安全提示

> ID：10651824
> 
> 赞同：0
> 
> 时间：2012-05-18T11:29:33.613
> 
> 标签：javascript, html, security, offline, explorer

我有一些 HTML 页面，已将它们导入到 exe 文件中，并使用 Internet Explorer 对象加载它们。但我在运行 exe 文件时收到 JavaScript 和 ActiveX 安全错误。是否可以将我的应用程序签名到 IE 并阻止这些提示。？

**注意：**我的应用程序将通过安装文件 (.msi) 安装到用户计算机

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:42:51.500

我猜你正在使用 gdgsoft html2exe 应用程序。我想您最好在他们的论坛中询问，但是在 Internet Explorer 的安全设置中，您可以选择安全级别（或者您可以使用 html2exe 附带的其他 html 渲染器之一）

# ant - 如何在ant中使用逻辑运算符？

> ID：10651825
> 
> 赞同：0
> 
> 时间：2012-05-18T11:29:43.107
> 
> 标签：ant

如果平台是 unix 或 windowsas，我有一小段代码会打印出来

```
<if>
<equals=${arg1} value="linux-86"/>
<then>
<echo message="linux"
<then>
<elseif>
<equals=${arg1} value="linux-64"/>
<then>
<echo message="linux"/>
</then>
</elseif>
<else>
<echo message="Windows">
</else>
</if> 
```

在这里我们可以看到我们不必要地检查相同消息的前两个条件，ant 中是否有像 c || 中那样的 OR 运算符，所以我们可以写 arg1=linux-64||linux-86....如果有请告诉我应该如何使用这将在这里节省大量时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:41:41.937

```
<condition property="WinPlatform.Check">
        <or>
            <equals arg1="${param1}" arg2="win-x86"/>
            <equals arg1="${param1}" arg2="win-x86-client"/>
            <equals arg1="${param1}" arg2="win-x64"/>
        </or>
    </condition>

<target name="Mytarget" if="WinPlatform.Check">
        <echo message="executing windows family build:::${param1}"/>
    </target> 
```

现在`Mytarget`用你的参数调用，它会工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:15:20.633

该`if`任务是[ant-contrib](http://ant-contrib.sourceforge.net/)的一部分。它在核心 Ant 中不可用。

核心 Ant 中提供了各种[条件](http://ant.apache.org/manual/Tasks/conditions.html)，可用于例如使目标执行有条件。

在 1.8 之前，如果/除非条件评估“是否设置了属性？”

```
<target name="test" if="foo" unless="bar"/> 
```

从 1.8 开始，如果/除非条件可以评估“属性是真/假”：

```
<target name="test" if="${foo}" unless="${bar}"/> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-18T11:31:01.303

你为什么不看一下ant手册？[http://ant.apache.org/manual/Tasks/conditions.html](http://ant.apache.org/manual/Tasks/conditions.html)

或谷歌搜索“ant if task”。

# spring - 如何使用 Spring + DBUnit + JUnit 配置多个事务管理器

> ID：10651830
> 
> 赞同：5
> 
> 时间：2012-05-18T11:29:56.047
> 
> 标签：spring, junit, dbunit, spring-transactions

**简而言之**

我的命令行 Java 应用程序在不使用 XA 的情况下将数据从一个数据源复制到另一个数据源。我已经配置了两个单独的数据源，并且想要一个可以回滚两个数据源上的数据的 JUnit 测试。我使用 DBUnit 将数据加载到“源”数据库中，但我无法让它回滚。我可以让“目标”数据源回滚。

**我的代码**

鉴于此配置...

```
<tx:annotation-driven />

<!-- note the default transactionManager name on this one -->
<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource"     ref="dataSourceA" />
</bean>

<bean id="transactionManagerTarget" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource"     ref="dataSourceB" />
</bean> 
```

而这段代码......

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"classpath:resources/spring-context.xml",
                                "classpath:resources/spring-db.xml"})  
@Transactional
@TransactionConfiguration(transactionManager = "transactionManagerTarget", defaultRollback = true) 
public class MyIntegrationTest {

    @Autowired
    private MyService service;

    @Autowired
    @Qualifier("dataSourceA")
    private DataSource dataSourceA;

    private IDataSet loadedDataSet;

    /**
     * Required by DbUnit
     */
    @Before
    public void setUp() throws Exception {
        SybaseInsertIdentityOperation.TRUNCATE_TABLE.execute(getConnection(), getDataSet());
        SybaseInsertIdentityOperation.INSERT.execute(getConnection(), getDataSet());
    }

    /**
     * Required by DbUnit
     */
    protected IDataSet getDataSet() throws Exception {
        loadedDataSet = DbUnitHelper.getDataSetFromFile(getConnection(), "TestData.xml");
        return loadedDataSet;
    }

    /**
     * Required by DbUnit
     */
    protected IDatabaseConnection getConnection() throws Exception{
        return new DatabaseConnection(dataSourceA.getConnection());
    }   

    @Test
    public void testSomething() {

        // service.doCopyStuff();

    }

} 
```

我看到的问题是，`@TransactionConfiguration`它只说明了启用回滚的目标数据源。DBUnit 被`dataSourceA`显式传递，并且正在拾取名为`transactionManager`（我不确定如何）的默认事务管理器，它没有被告知回滚。

**问题**

如何告诉两个事务管理器回滚？

当我的数据源不支持 XA 事务时，我可以使用单个事务管理器吗？

*注意：该应用程序在生产中运行时不需要 dataSourceA 上的事务管理器，因为它只是只读的。此问题仅适用于我的测试课程。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:49:13.717

使用`<qualifier>`事务管理器定义中的元素。

```
<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSourceA" />
    <qualifier value="transactionManager" />
</bean>

<bean id="transactionManagerTarget" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSourceB" />
    <qualifier value="transactionManagerTarget" />
</bean> 
```

然后你可以直接在注解中引用你要使用哪一个`@Transactional`，即

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"classpath:resources/spring-context.xml",
                                "classpath:resources/spring-db.xml"})  
@Transactional("transactionManagerTarget")
@TransactionConfiguration(defaultRollback = true) 
public class MyIntegrationTest {
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T21:48:47.483

我在使用开源 TM Atomikos 的 JUnit 测试中使用了 XA 事务和回滚。一个不错的特性是 Atomikos 允许使用未启用 XA 的数据源参与 XA 事务。查看此链接以获取示例： http: [//www.atomikos.com/Documentation/NonXaDataSource](http://www.atomikos.com/Documentation/NonXaDataSource)

另一方面，如果 XA 对您的 JUnit 问题来说是一个不错的解决方案，那就另当别论了。您的测试主要关注数据库实现（Sybase）还是更多地关注 Java 逻辑？我通常为 JUnit 测试设置嵌入式数据库，如 Apache Derby 或 HQSQL。然后我不必太在意清理，因为 GC 会处理它:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T10:55:24.647

一种可能的解决方法是引入一个注解为的辅助 bean，`@Transactional("transactionManagerTarget")`并将您的测试注解为`@Transactional("transactionManager")`，同时使用`defaultRollback = true`. 然后，您的测试将不得不调用助手 bean，而后者又会调用您的服务 bean 进行测试。这应该会导致围绕您的服务的事务回滚，然后是围绕 DBUnit 的事务。

不过，这有点乱。

其他可能的方法：

*   使用内存数据库（例如 H2）代替生产数据库 - 您可以将其配置为在需要时删除其所有数据。
*   允许 DBUnit 提交，并在您的拆卸方法中使用补偿事务来清除数据。

# java - PDF 打不开

> ID：10651838
> 
> 赞同：0
> 
> 时间：2012-05-18T11:30:41.323
> 
> 标签：java, pdf

我正在使用调用pdf

```
Desktop.getDesktop().open(new File(pdffilename)); 
```

pdf 在我安装了 Adob​​e Acrobat 9 pro 的机器上可以正常打开。但它没有在另一台具有 Adob​​e Acrobat 版本 10.1.2 的机器上打开。

当我打开pdf时，它显示错误消息

> java.io.IOException：无法打开文件：/C:/Program%20Files%20(x86)/TheatreAudi t/data/AE%20wording.pdf。错误消息：未指定的错误
> 
> ```
>  at sun.awt.windows.WDesktopPeer.ShellExecute(WDesktopPeer.java:59)
>     at sun.awt.windows.WDesktopPeer.open(WDesktopPeer.java:36)
>     at java.awt.Desktop.open(Desktop.java:254)
>     at uk.co.healthiq.MainFrame.linkAEActionPerformed(MainFrame.java:259)
>     at uk.co.healthiq.MainFrame$8.actionPerformed(MainFrame.java:214)
>     at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995) 
> ```

有人可以帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:39:13.350

路径似乎不正确。首先尝试为您的文件引入一个变量，然后检查该文件是否存在：

```
File pdfFile = new File(pdffilename);
if (!pdfFile.exists()) {
    throw new IOException("...");
}
Desktop.getDesktop().open(pdfFile); 
```

在我看来，你正在传递类似“/C:/...”的东西。尝试删除第一个斜杠，如果这无济于事，请尝试使用反斜杠之类的窗口（请记住，您必须在代码中引用它们）。

# ruby-on-rails - 在脚手架中“编辑”时，Rails 如何导入现有行？

> ID：10651841
> 
> 赞同：1
> 
> 时间：2012-05-18T11:30:51.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, activerecord, scaffolding

这可能是一个措辞非常糟糕的问题，但我很好奇 Rails 是如何知道在单击编辑时引入表单数据的。例如，如果我搭建了一个名为 Post 的模型，并为该 Post 输入了标题和内容，稍后当我编辑它时，表单会自动填写。

我查看了控制器和部分表单，但它似乎没有包含任何内容来告诉它用现有数据填充它。

我问这个的原因是因为我想允许用户将其他人的帖子“导入”到他们的表单中并进行编辑。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T12:09:44.713

要回答您问题的第一部分，首先查看编辑模型的链接 - 在索引视图文件 ( `app/views/posts/index.html.erb`) 中，它将如下所示：

```
<%= link_to 'Edit', edit_post_path(post) %> 
```

当您在浏览器中打开索引页面时，会生成一个链接，如下所示：

```
http://*servername*/post/*id*/edit 
```

资源路由知道这调用了 的`edit`动作`post_controller`，并且`id`值在 URL 中。

现在看一下( ) 中的`edit`操作- 它看起来像：`post_controller``app/controllers/posts_controller.rb`

```
def edit
  @post = Post.find(params[:id])
end 
```

所有这一切都是使用`id`通过 URL 传递的值`Post`在数据库中找到它`id`，并将其保存在变量中`@post`。如果您查看编辑视图文件 ( `app/views/posts/edit.html.erb`) 的代码，它通常只使用部分表单 ( `/app/views/posts/_form.html.erb`)，并且该文件包含用于呈现您在浏览器中看到的实际表单的代码。

```
<%= form_for(@post) do |f| %> 
```

`@post`此行开始使用在操作中设置的变量构建表单`PostsController` `edit`。在此代码的块内，您会看到以下内容 -

```
<div class="field">
  <%= f.label :title %>
  <%= f.text_field :title %>
</div> 
```

`:title`此代码以绑定到属性的形式构建文本字段`@post`- 如果该属性中存在值，则该`text_field`方法知道使用该值填充文本字段。

第二部分（'我希望允许用户将其他人的帖子“导入”到他们的表单中并对其进行编辑'）更加开放，并且更多地取决于您在应用程序中实际想要做什么 - 您可以只允许所有用户都可以查看所有其他用户的帖子并直接对其进行编辑（有点像 wiki，但具有破坏性的编辑）。或者您可以使帖子只能由创建它们的用户编辑，但其他人可以查看，然后您可以创建一个控制器操作，允许用户将其他用户帖子的内容复制到当前用户拥有的新帖子中。或其他事情 - 这真的取决于你想要什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T11:51:49.967

在编辑的情况下，控制器会获取一个带有您要编辑的项目的 id 的对象。由于 item 是视图可用的实例变量，视图中使用的[表单助手](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html)生成 HTML，为 HTML 字段提供显示在其中的值。我应该说 Rails Form Helper 的魔力！（好吧，如果您编写纯 HTML，那么它是否像`<input value="<%= @post.title %>`“这是 Rails 助手在您使用时自动为您所做的那样简单`f.text_field :title`）

导入其他人的帖子是一种业务逻辑，我不确定您的应用程序将如何实现。但是，如果用户单击帖子的编辑链接，那么在填充的视图中，他应该会看到表单中已经填充的现有值。

# ant - 我怎样才能让常春藤不把“-”放在 jar 文件的末尾？

> ID：10651842
> 
> 赞同：1
> 
> 时间：2012-05-18T11:30:54.673
> 
> 标签：ant, ivy

我在我的项目中使用常春藤和蚂蚁。在常春藤设置文件中，我将解析器定义为：

`<filesystem name="blabla"> <artifact pattern="$repdirectory/[artifact](-[revision]).[ext]" /> </filesystem>`

在我的构建 xml 中，我使用了：

`<ivy:retrieve pattern="$somedirectory/[artifact](-[revision]).[ext]" conf="asd"/>`

检索 jar 文件。

问题是：例如，我有一个名为 example.jar 的 jar 文件，但 ivy 将其下载为 example-.jar。我怎样才能避免这种情况？

# php - 使用 php 向 android 设备发送推送消息时出现 401 错误

> ID：10651845
> 
> 赞同：0
> 
> 时间：2012-05-18T11:31:03.220
> 
> 标签：php, android, push-notification

我正在使用休闲代码使用 php 发送推送消息，这是我的代码。

```
<?php
if($_POST['message'])
{

$username ="email address";
$password = "password";
$source="Koti-Link-8";
$service="ac2dm";
$post_params = array ( "Email" => $username, "Passwd" => $password, "accountType"=>"HOSTED_OR_GOOGLE", "source" => $source, "service"=>$service ); 

$first = true;
            $data_msg = "";

            foreach ($post_params as $key => $value) {
            if ($first)
              $first = false;
            else
              $data_msg .= "&";

            $data_msg .= urlencode($key) ."=". urlencode($value);
            }

            $x = curl_init("https://www.google.com/accounts/ClientLogin"); 

            curl_setopt($x, CURLOPT_HEADER, 1);
            curl_setopt($x, CURLOPT_POST, 1);
            curl_setopt($x, CURLOPT_POSTFIELDS, $data_msg);
            curl_setopt($x, CURLOPT_RETURNTRANSFER, 1);
            $response = curl_exec($x);
            curl_close($x); 

            echo $response;
$pos = strpos($response, "Auth=");
$authKey = trim(substr($response, 5+$pos));

$message=$_POST['message'];

$deviceToken="APA91bEuHNZyyPpczB4NJL-kXitE9-vTti6za3o7x9tA7AjzJIUagHBYteXFUSgcoubrUmg8vVmnLn07XuAzJtgsIs74Q-T33-Vmvo-08C_mh2BMCfr1m5I0rrixT0ymywa3bkqFQEo3KhapTq6Okevvs3ZzoOUGTg";
$col_key=date('Y-m-d H:i:s');
$data = array(
'registration_id' => $deviceToken,
'collapse_key' => 'ck_' .$col_key,
'data.message' => $message,
'data.title' =>'Requestec Push Demo');
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://android.apis.google.com/c2dm/send");
echo 'Content-Length:'.strlen($data);
    $headers = array('Authorization: GoogleLogin auth=' . $authKey);
                                        if($headers){
                                            curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
                                        }
                                        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
                                        curl_setopt($ch, CURLOPT_POST, true);
                                        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
                                        curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

                                        $messagedata = curl_exec($ch);
                                        echo $messagedata."<br>";
                                        $success="Sent Successfully";
                                        curl_close($ch);

}

?> 
```

但是在使用它时显示来自 c2dm 服务器的 401 错误消息问题出在哪里以及如何解决它。请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:44:05.703

401 表示未经授权。访问者的输入数据未被获取。您必须检查发送服务器的所有标头。可能有问题。

# c# - Crystal Reports，根据公式字段值添加附加页面

> ID：10651847
> 
> 赞同：1
> 
> 时间：2012-05-18T11:31:04.130
> 
> 标签：c#, asp.net, crystal-reports

您将如何根据公式值为 Crystal Report 添加附加页面（任何公式都可以）。我是 Crystal Reports 的新手，所以请耐心等待我缺乏报告详细信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:27:13.513

只需右键单击报告的任何部分，然后进入部分专家选项

现在转到您的愿望部分，然后在选项后检查新页面并添加您的公式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:13:44.527

创建一个名为“显示最后一页”的布尔参数字段。

插入第二个报表页脚部分（右键单击装订线并选择在下方插入部分）

右键单击新部分 (Report Footerb) 并选择 Section Expert...

启用页脚的`New Page Before`属性

最后，将条件公式添加到页脚的`Suppress (No Drill- Down)`属性并添加`Not({?Show Last Page})`到其文本中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:52:37.750

这取决于您在此附加页面上想要什么，但一般来说，我可能会创建一个子报表并将其放在最后一个报表页脚部分。启用该`new page before`报表页脚部分的属性并使用您的公式有条件地抑制它。

# regex - 请帮我定义一个 perl 正则表达式

> ID：10651849
> 
> 赞同：1
> 
> 时间：2012-05-18T11:31:08.077
> 
> 标签：regex, perl, web-crawler

我对一切都很陌生。请帮忙。我正在尝试抓取每个

```
<div class="name"><a href="/v/name/idlike123123ksajdfk">name</a></div> 
```

在一个网页中。我想抓住 /v/name/idlike123123ksajdfk 部分。（知道

```
<div class="name"><a href="/v/ 
```

部分是固定的）所以我写了正则表达式（可以让你笑）：

```
~m#<div class="name"><a href="(/v/.*?)"># 
```

如果您更正我的愚蠢代码，这将非常有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T11:47:07.723

使用[强大的 HTML 解析器](http://p3rl.org/Web%3a%3aQuery)（请参阅[http://htmlparsing.com/](http://htmlparsing.com/)了解原因）：

```
use strictures;
use Web::Query qw();
my $w = Web::Query->new_from_html(<<'HTML');
<div class="name"><a href="/v/name/idlike123123ksajdfk">name</a></div>
<div class="name"><a href="/v/name/idlike123123ksajdfk">name</a></div>
<div class="name"><a href="/v/name/idlike123123ksajdfk">name</a></div>
<div class="name"><a href="/v/name/idlike123123ksajdfk">name</a></div>
<div class="name"><a href="/v/name/idlike123123ksajdfk">name</a></div>
HTML

my @v_links = $w->find('div.name > a[href^="/v/"]')->attr('href'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T19:27:17.057

有很多 Perl 模块可以从 HTML 中提取链接。[WWW::Mechanize](https://www.metacpan.org/module/WWW%3a%3aMechanize)、[Mojo::DOM](https://www.metacpan.org/module/Mojo%3a%3aDOM)、[HTML::LinkExtor](https://www.metacpan.org/module/HTML%3a%3aLinkExtor)和[HTML::SimpleLinkExtor](https://www.metacpan.org/module/HTML%3a%3aSimpleLinkExtor)可以做到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T19:09:03.493

使用 Mojolicious 进行 Web 抓取可能是当今 Perl 中最简单的方法

[http://mojolicio.us/perldoc/Mojolicious/Guides/Cookbook#Web_scraping](http://mojolicio.us/perldoc/Mojolicious/Guides/Cookbook#Web_scraping)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T11:47:40.167

您不应该**使用正则表达式来解析 HTML**，因为有很多库可以进行此类解析。

Daxim 的回答就是一个很好的例子。

* * *

但是，如果您仍然想使用正则表达式并且您将文本分配给`$_`，那么

```
my @list = m{<div class="name"><a href="(/v/.*?)">}g; 
```

将为您提供所有发现的列表。

# firefox - Webdriver 停止升级 Firefox

> ID：10651853
> 
> 赞同：7
> 
> 时间：2012-05-18T11:31:16.093
> 
> 标签：firefox, selenium, firefox-addon, webdriver

关于将 Firefox 从 3.6 升级到 12 。我无法使 webdriver 工作。以前在 FF3.6 中创建的脚本在 FF12 上不起作用。升级后是否需要进行任何更改。运行脚本时引发以下异常。

```
org.openqa.selenium.WebDriverException: Failed to connect to binary FirefoxBinary(C:\Program Files\Mozilla Firefox\firefox.exe) on port 7055;

Build info: version: '2.12.0', revision: '14666', time: '2011-11-10 18:36:18'
System info: os.name: 'Windows Vista', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0'
Driver info: driver.version: FirefoxDriver
    at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:107)
    at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:149)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:78)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:128)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:79)
    at script.Individual.TestGetQuotesPage(Individual.java:68)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.testng.internal.MethodHelper.invokeMethod(MethodHelper.java:644)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:546)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:700)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1002)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:137)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:121)
    at org.testng.TestRunner.runWorkers(TestRunner.java:909)
    at org.testng.TestRunner.privateRun(TestRunner.java:618)
    at org.testng.TestRunner.run(TestRunner.java:499)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:332)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:327)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:299)
    at org.testng.SuiteRunner.run(SuiteRunner.java:204)
    at org.testng.TestNG.createAndRunSuiteRunners(TestNG.java:915)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:879)
    at org.testng.TestNG.run(TestNG.java:787)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:73)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:124)
Caused by: org.openqa.selenium.firefox.NotConnectedException: Unable to connect to host 127.0.0.1 on port 7055 after 45000 ms. Firefox console output:
*** LOG addons.xpi: startup
*** LOG addons.xpi: Skipping unavailable install location app-system-local
*** LOG addons.xpi: Skipping unavailable install location app-system-share
*** LOG addons.xpi: Ignoring file entry whose name is not a valid add-on ID: C:\Users\admin\AppData\Local\Temp\anonymous4326webdriver-profile\extensions\webdriver-staging
*** LOG addons.xpi: checkForChanges
*** LOG addons.xpi: No changes found

    at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start 
```

这可能是什么原因？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T13:00:39.747

您需要升级您的 Selenium 版本才能完成这项工作。Firefox 12 仅适用于 2.17-ish 左右。

目前2.21是最新版本

# javascript - JS oAuth 2.0 无效标头

> ID：10651858
> 
> 赞同：0
> 
> 时间：2012-05-18T11:31:48.340
> 
> 标签：javascript, oauth-2.0

我正在使用来自[http://binarysaiy2k.blogspot.in/2012/04/authentication-and-authorization-for.html](http://binarysaiy2k.blogspot.in/2012/04/authentication-and-authorization-for.html)的脚本，但它一直在控制台中给我一个错误：Invalid header 通常它会起作用，因为它是一个教程。 . 有什么帮助吗？

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
        var OAUTHURL = 'https://accounts.google.com/o/oauth2/auth?';
        var VALIDURL = 'https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=';
        var SCOPE = 'https://www.googleapis.com/auth/userinfo.profile';
        var CLIENTID = '********.apps.googleusercontent.com';
        var REDIRECT = 'http://********/callback'
        var TYPE = 'token';
        var _url = OAUTHURL + 'scope=' + SCOPE + '&client_id=' + CLIENTID + '&redirect_uri=' + REDIRECT + '&response_type=' + TYPE;
        var acToken;
        var tokenType;
        var expiresIn;
        var user;

    function login() {
        var win         =   window.open(_url, "windowname1", 'width=800, height=600'); 

        var pollTimer   =   window.setInterval(function() { 
            if (win.document.URL.indexOf(REDIRECT) != -1) {
                window.clearInterval(pollTimer);
                var url =   win.document.URL;
                acToken =   gup(url, 'access_token');
                tokenType = gup(url, 'token_type');
                expiresIn = gup(url, 'expires_in');
                win.close();

                validateToken(acToken);
            }
        }, 100);
    }

    function validateToken(token) {

        $.ajax({
            url: VALIDURL + token,
            data: null,
            success: function(responseText){  
                getUserInfo();
                console.log("ok");
            },  
            dataType: "jsonp"  
        });
    }

    function getUserInfo() {
        $.ajax({
            url: 'https://www.googleapis.com/oauth2/v1/userinfo?access_token=' + acToken,
            data: null,
            success: function(resp) {
                user    =   resp;
      console.log(resp);
                $('#uName').append(user.name);
                $('#imgHolder').attr('src', user.picture);
            },
            dataType: "jsonp"
        });
    }

    //credits: http://www.netlobo.com/url_query_string_javascript.html
    function gup(url, name) {
        name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
        var regexS = "[\\#&]"+name+"=([^&#]*)";
        var regex = new RegExp( regexS );
        var results = regex.exec( url );
        if( results == null )
            return "";
        else
            return results[1];
    }

</script>
</head>

<body>
<a href='#' onClick='login();'> click here to login </a>
<div id='uName'>Welcome  </div>
<img src='' id='imgHolder'/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T22:09:23.500

您的代码对我来说很好（Chrome 18 y FF10-12）。

使用 Web 应用程序的客户端 ID 并在与重定向 URI 相同的 Web 服务器中运行此代码。

我得到的唯一错误是：`Unsafe JavaScript attempt to access frame with URL`，因为`pollTimer`当您不在同一个域、协议和端口上时的跨域访问。除了这个控制台错误（每 100 毫秒），一切正常。C

我个人不推荐这种方法（弹出）。我更喜欢 iframe 方式（如彩盒）。

也许您需要澄清您的网络浏览器/版本。

# java - 是否可以为不同的组件设置不同的外观和感觉？

> ID：10651859
> 
> 赞同：5
> 
> 时间：2012-05-18T11:31:49.867
> 
> 标签：java, swing, look-and-feel

我在面板上有许多组件，我想对不同的组件应用不同的外观和感觉。是否可以？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T11:35:58.307

是的，

你能行的。请参阅[混合外观](https://stackoverflow.com/questions/4707716/mixing-look-and-feel)

但

不建议这样做，坦率地说，这很丑陋。你为什么想这么做？你有什么具体想做的吗？也许有更好的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T12:15:41.533

> 我在面板上有许多组件，我想对不同的组件应用不同的外观和感觉。是否可以？

是的是可能的，不要这样做，因为大多数外观和感觉都有不同

*   颜色、字体、前景、背景

*   屏幕上的大小或 PreferredSize

*   为 LayoutManager 使用 API 中的另一种方法

*   在 JCOMponents API 中实现了各种方法，例如 Color、Font、Foreground、Background

*   简单的答案---> 有可能在屏幕上造成一团糟

我建议使用今天的[Java Look and Feels](https://stackoverflow.com/a/3954646/714968)，它们中的大多数都有各种颜色主题，其中一部分是单独的主题并可以选择更改颜色主题，然后您可以混合内置主题或/和每个颜色主题JComponents

我认为你可以成功设置颜色、字体、前景、仅背景、外观和感觉需要有关 JComponents 和/与 LayoutManagers 如何协同工作的基本知识

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-18T06:04:13.353

我知道我迟到了，但我认为有人可能会使用它，这是我用来为应用程序添加多种外观的一种技巧：在启动项目之前将其作为外观选择器（在编写之前 = new ... )

```
try {
    for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
        if ("Windows".equals(info.getName())) {
            UIManager.setLookAndFeel(info.getClassName());
            break;
        }
    }
} catch (ClassNotFoundException | InstantiationException | IllegalAccessException
    | UnsupportedLookAndFeelException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

然后将 UIManager 外观返回到在您执行此操作之前它处于打开状态的外观，如下例所示：

```
JButton test;
try {
    for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
        if ("Windows".equals(info.getName())) {
            UIManager.setLookAndFeel(info.getClassName());
            break;
        }
    }
} catch (ClassNotFoundException | InstantiationException | IllegalAccessException
    | UnsupportedLookAndFeelException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
test = new JButton();
try {
    for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
        if ("Mwtal".equals(info.getName())) {
            UIManager.setLookAndFeel(info.getClassName());
            break;
        }
    }
} catch (ClassNotFoundException | InstantiationException | IllegalAccessException
    | UnsupportedLookAndFeelException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

像这样只有按钮测试将具有窗口的外观和感觉，其余的将具有金属的外观和感觉。

希望这个黑客可以帮助某人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T11:43:36.893

你不能。在你运行你的java应用程序之前，JVM只会加载一次swingpropertitirs.propertities（一个位于你jre/lib中的文件），它只会选择你的默认L&F，但是如果你通过添加代码来设置你的外观，它会使用您选择的 L&F。

# menu - 当单击远离它时，使弹出菜单的 pyqt 应用程序焦点消失

> ID：10651861
> 
> 赞同：1
> 
> 时间：2012-05-18T11:31:55.847
> 
> 标签：menu, focus, pyqt

让我快速解释一下背景。我正在开发一个名为 Softimage XSI 的 3D 应用程序中的自定义菜单系统。它已经创建了一个 PyQt 应用程序对象，并且 ProcessEvents 每秒被调用一定次数，以便 PyQt 应用程序可以在 XSI 中以非模态状态存在。

为了实现菜单，我在工具栏中嵌入了一个网页，该网页正在调用我编写的用于显示 PyQt 菜单的 XSI 插件。这一切都很好（尽管有点做作！）。

问题是当我显示菜单时，当我点击离开它时它不会消失。如果我将鼠标移到菜单上，*然后*单击它，它*就会*消失。只有当它第一次弹出时。

我已经尝试了我能想到的一切。这是一个列表：

*   使用**QtGui.qApp.installEventFilter(menu)**来尝试捕捉 mousepressed 信号。它永远不会被触发。我怀疑应用程序本身没有收到点击。
*   使用**menu.raise_(​​)**没有区别
*   **QtGui.qApp.setActiveWindow(menu)**也没有
***   或**menu.setFocus()***   我也试过：

    ```
    event = QtGui.QMouseEvent(QtCore.QEvent.MouseMove, pos, QtCore.Qt.NoButton, QtCore.Qt.NoButton, QtCore.Qt.NoModifier)
    QtGui.qApp.sendEvent(menu, event) 
    ```

    *   我曾尝试编写自己的 QEventLoop，但它刚刚使 XSI 崩溃。我怀疑尝试在另一个内部运行模态循环可能不是合法的事情。要么，要么我真的不知道我在做什么（同样可能）** 

 **我唯一取得部分成功的是使用*grabMouse()*。*如果我从菜单上单击（仅在*鼠标经过菜单一次之后），这就是使菜单关闭的原因，但是我必须调用它几次才能“粘住”。

所以这是我目前的代码：

```
class MyMenu (QtGui.QMenu):
    def __init__(self, parent = None):
        QtGui.QMenu.__init__(self, parent)
        self.grabbed=2

    def getMouse(self):
        if self.grabbed>0:
            self.grabMouse()

        self.grabbed-=1

    def paintEvent(self, event):       
        QtGui.QMenu.paintEvent(self, event)    
        self.getMouse()

    def hideEvent(self, event):
        self.releaseMouse()   

def ShowMenu():
    menu = MyMenu()
    menu.addAction("A")
    menu.addAction("B")
    menu.addAction("C")

    submenu = MyMenu()
    submenu.addAction("D")
    submenu.addAction("E")
    submenu.addAction("F")
    menu.addMenu(submenu)
    menu.setTearOffEnabled(True)

    menu.setStyleSheet("font: 8pt \"Sans Serif\";")
    submenu.setStyleSheet("font: 8pt \"Sans Serif\";")
    submenu.setTitle("Window")
    submenu.setTearOffEnabled(True)

    pos = QtGui.QCursor.pos()
    pos.setX(105)

    menu.popup(pos)

    #Prevent garbage collection
    QtGui.XSIMenu=menu
    QtGui.XSISubMenu=submenu

    #Desperate acts!    
    menu.raise_()
    QtGui.qApp.setActiveWindow(menu)
    menu.setFocus() 
```

任何想法或随机建议都将非常感激地收到，因为这让我发疯！不要害怕对我已经尝试过的东西提出修改建议，因为我对 PyQt 相对较新，我很可能错过了一些东西。

非常感谢，安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-20T13:05:54.580

就在使用 self.trayMenu.popup(QtGui.QCursor.pos()) 调用 popup 之前，调用 self.trayMenu.activateWindow()。在弹出之前放置 activateWindow 使左键单击菜单与右键单击菜单的工作方式相同，并且当您单击其他位置时它会消失。:)**

# google-chrome - 从扩展程序传递到后台页面的消息

> ID：10651864
> 
> 赞同：-1
> 
> 时间：2012-05-18T11:32:16.920
> 
> 标签：google-chrome, google-chrome-extension, chromium, message-passing

我正在尝试在 chrome 中创建页面操作扩展。我有一个与单击页面操作时显示的弹出窗口相对应的 html 页面。我`popup.js`在这个 html 页面中包含了一个脚本文件。从这个页面我正在尝试向后台 js 文件发送消息`background.js`。问题是我`sendRequest`只打电话一次，`popup.js`但我在后台页面中多次收到它。我正在那里执行文件操作，由于并发访问而导致脚本错误。我在此处粘贴与消息传递相关的代码

**扩展文件 - popup.js**

```
chrome.extension.sendRequest({"intent" : "read"}, function (message) {
      console.log(message);
}); 
```

**背景页面 - background.js**

```
(function(){
var fileName = "credentials.txt";
var fileSystem;

function checkUrl(tabId, changeInfo, tab) {
    if(/https?:\/\/.*?\/olc/.test(tab.url)) {
        chrome.pageAction.show(tabId);
        chrome.extension.onRequest.addListener(function (request, sender, callback) {
            callback("printed");
        });
    }
}
chrome.tabs.onUpdated.addListener(checkUrl);
})(); 
```

在这种情况下，监听器被调用了 4 次。回调将被第一次调用。接下来的 3 次它给出了一个错误，说`Could not send response: Cannot send a response more than once per chrome.extension.onRequest listener per document (message was sent by extension kaejjpmlibijbgbgcfodphlkcjjkmjlk).`有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:55:04.590

他们应该只工作一次。

您可以使用长期存在的消息传递系统，也可以在从内容脚本接收到消息后一遍又一遍地重新附加相同的处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:43:41.333

Use chrome.extension.getBackgroundPage(). You will have access to background page from yor popup. Or write to localStorage and use listener.

```
window.addEventListener('storage', function (e) {}, false); 
```

You will have problems with memory leak if you will use chrome.extension.sendRequest for comunication between popup and background.html.

# linux - iptables 端口转发在重启后不会持续存在

> ID：10651870
> 
> 赞同：8
> 
> 时间：2012-05-18T11:32:35.563
> 
> 标签：linux, amazon-ec2, iptables

我有在亚马逊 ec2 上运行的服务器实例。我想使用 iptables 从端口 80 转发到 8080。哪个工作正常，直到它停止转发时重新启动。我用过

```
iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to 8080 
```

设置转发。我需要做什么才能使其持久化？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T11:46:01.390

我找到了一篇很好的博客文章，解释了如何做到这一点 [https://help.ubuntu.com/community/IptablesHowTo](https://help.ubuntu.com/community/IptablesHowTo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:43:34.020

您必须在启动时运行防火墙规则。

# java - Java 按字符串查找和比较成员（可能是 JPA 功能？）

> ID：10651873
> 
> 赞同：0
> 
> 时间：2012-05-18T11:32:52.523
> 
> 标签：java, database, jpa, reflection, map

我有很多带有属性的bean，它们是从带有JPA 的数据库表中派生的。用户应能够输入任何列名和值作为字符串，应用程序应自动在其中一个 bean 中找到正确的成员。

我必须使用 JPA，否则我会使用一些 JDBC 元数据将所有列和值放入法线映射中。JPA可以做到这样的事情吗？它只需要从数据库到 bean 工作，我不想持久化更改。

如果这不起作用，我可以在运行时以某种方式以编程方式分析成员名称吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:45:09.120

EntityManagerFactory 有一个[getMetamodel()](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManagerFactory.html#getMetamodel%28%29)方法，它返回它的 MetaModel。从这个 MetaModel 中，您可以查询每个实体类的 MetaModel，并发现它的所有属性、它们的类型等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:55:14.743

如果 JPA 部分不起作用，您可以访问类的类成员（字段、方法），如下所示：

```
Field[] fs = YouClass.class.getDeclaredFields(); 
```

访问不同成员的详细信息在[此链接上](http://docs.oracle.com/javase/tutorial/reflect/class/classMembers.html)

# c# - 如何在不重新加载页面的情况下刷新标签

> ID：10651874
> 
> 赞同：0
> 
> 时间：2012-05-18T11:32:53.580
> 
> 标签：c#, .net, refresh, page-refresh

我想刷新页面上的标签而不重新加载页面。

该页面用于发送短信。因为我使用的是连接到 COM 端口的 GSM 调制解调器，所以每个文本需要大约 3 秒的时间，这是一个相当缓慢的过程。（我使用串行 GSM 调制解调器而不是在线服务或 USB 连接的原因很长。）

可以指定多个数字，由 分隔`";"`。我想在发送每个文本后立即更新页面；但目前它只是在最后一口气更新标签。实现这一目标的最简单方法是什么？想法可能是 AJAX、JavaScript 或线程。（正如我所说，简单就是好！）

**当前代码：**

```
SerialPort sp = new SerialPort("COM1", 115200, Parity.None, 8, StopBits.One);
        try
        {
            String[] numbers = tbNo.Text.Split(';');

            foreach (string n in numbers)
            {

                sp.Open();

                sp.Write("AT+CMGF=1" + (char)(13));

                Thread.Sleep(200);

                sp.Write("AT+CMGS=" + n.Replace(" ", string.Empty) + (char)(13));

                Thread.Sleep(200);

                sp.Write(tbMsg.Text + (char)(13) + (char)(26));

                Thread.Sleep(3000);

                sp.Close();

                Label1.Text = Label1.Text + "Message sent to " + n + "<br />";

            }

        } catch (Exception error) {

            Label1.Text = error.Message;
        }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:39:08.670

如果你有 ASP.net，最好的方法是在服务器端创建一个服务，它可以是一个 WCF Rest 服务，将一个 post 请求作为 ajax 调用发送到服务器，并在收到结果后更改`label text`javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:41:39.770

你肯定想为此使用一些 AJAX。实际上很容易实现的一种方法是使用[SignalR](https://github.com/SignalR/SignalR)。

SignalR 是一个支持客户端和服务器之间实时连接的框架。这使您的代码更容易。如果您不使用 SignalR，则必须手动实现轮询（客户端浏览器每隔 X 秒向服务器询问您的任务状态是什么）或对此进行一些变体。

SignalR 隐藏使用的底层机制并在服务器和客户端之间创建连接。

您在服务器上的代码将如下所示：

```
public class SmsHub : Hub
{
   public Task SendMessages(string input)
   {
      // ... send sms message

     Caller.updateStatus('Message send!');
   }
} 
```

在您的客户端上，您将使用 javascript 集线器发送和接收消息。该`updateStatus`函数可以将 HTML 消息附加到某些信息 div。

这是 Scott Hanselman 的一篇不错的[博客文章](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)，也可以帮助您入门。

# c - 未知类型名称 - MINGW 中的“DEV_BROADCAST_DEVICEINTERFACE”

> ID：10651876
> 
> 赞同：2
> 
> 时间：2012-05-18T11:33:02.290
> 
> 标签：c, winapi, service, windows-services, mingw

我以[这段代码](http://pastebin.com/QjWZLwsJ) 为例来编写一个服务。我对我的主要功能进行了一些更改，以便使用命令行参数并删除

```
#define UNICODE
#define WINVER 0x502 
```

我正在使用“MINGW”。

我收到以下错误：

```
usb_detect.c: In function 'ServiceMain':
usb_detect.c:123:16: error: unknown type name 'DEV_BROADCAST_DEVICEINTERFACE'
usb_detect.c:132:41: error: request for member 'dbcc_size' in something not a structure or union
usb_detect.c:132:61: error: 'DEV_BROADCAST_DEVICEINTERFACE' undeclared (first use in this function)
usb_detect.c:132:61: note: each undeclared identifier is reported only once for each function it appears in
usb_detect.c:133:41: error: request for member 'dbcc_devicetype' in something not a structure or union
usb_detect.c:133:60: error: 'DBT_DEVTYP_DEVICEINTERFACE' undeclared (first use in this function)
usb_detect.c:136:117: error: 'DEVICE_NOTIFY_SERVICE_HANDLE' undeclared (first use in this function)
usb_detect.c:136:148: error: 'DEVICE_NOTIFY_ALL_INTERFACE_CLASSES' undeclared (first use in this function) 
```

如果我取消注释 unicode 和 winver，则没有错误，但命令行参数不起作用..我也包括 dbt.h..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:39:44.110

该[`DEV_BROADCAST_DEVICEINTERFACE`结构](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363244.aspx)仅在 Windows XP 及更高版本（以及此代码所依赖的一些其他 API）上受支持。它不会在 Windows 标头中定义，除非您针对的是该版本的 Windows 或更高版本。

为确保已定义它，您需要*在*包含`Windows.h`.

典型的模式看起来像这样：

```
#include <WinSDKVer.h>
#define _WIN32_WINNT    _WIN32_WINNT_WINXP
#include <SDKDDKVer.h> 
```

* * *

您尝试的代码的原始版本有这一行，您将其删除：

```
#define WINVER 0x502 
```

这将目标 Windows 版本明确设置为 Windows Server 2003 (Windows NT v5.2)。删除它意味着您恢复到最低公分母，即 XP 之前的 Windows 版本，其中`DEV_BROADCAST_DEVICEINTERFACE`未定义结构。

也不清楚你为什么要删除`UNICODE`定义。现在是 2012 年——你正在构建的任何应用程序都应该以 Unicode 为目标。保留定义为好。

# android - listview的内容没有出现

> ID：10651879
> 
> 赞同：0
> 
> 时间：2012-05-18T11:33:18.780
> 
> 标签：android, listview, adapter

我的代码运行没有错误，但自定义 Listview 不显示值。

我的代码运行没有错误，但自定义 Listview 不显示值。

这是我的代码：

适配器

公共类适配器扩展 BaseAdapter{

```
 ArrayList<mealItems> itemList;

public Activity context;
public LayoutInflater inflater;

public DiseasesAdapter(Activity context,int x,ArrayList<mealItems> itemList) {
    super();

    this.context = context;
    this.itemList = itemList;
    this.inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public Object getItem(int position) {

    return itemList.get(position);
}

public long getItemId(int position) {

    return 0;
}

public static class ViewHolder
{
    ImageView img;
    TextView Title;

}

public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder;
    if(convertView==null)
    {
        holder = new ViewHolder();
        convertView = inflater.inflate(R.layout.disease_row, null);

        holder.Title = (TextView) convertView.findViewById(R.id.Name);
        holder.img = (ImageView) convertView.findViewById(R.id.image);
        convertView.setTag(holder);
    }
    else
        holder=(ViewHolder)convertView.getTag();

    Items bean = (Items) itemList.get(position);
    holder.Title.setText(bean.getTitle());
    holder.img.setImageResource(bean.getImage());

    return convertView;
}

public int getCount() {
    // TODO Auto-generated method stub
    return 0;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:58:55.660

您的`getCount()`方法返回 0，这应该返回的大小`itemList`。

IE`return itemList.size()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T19:41:44.033

尝试这个 ：

```
this.itemList=new ArrayList<mealItems>();
this.itemList.addAll(itemList); 
```

当然，返回 itemList.size() 的 getCount() 方法

# java - 使用 hsqldb 创建连接

> ID：10651880
> 
> 赞同：0
> 
> 时间：2012-05-18T11:33:37.120
> 
> 标签：java, hsqldb

我必须将数据库连接到 java 程序。我在带有 Eclipse Helios 和 SQLExplorer 插件的 OS X 10.7.4 上使用 HSQLDB。

这是 runServer.sh 文件的内容：

```
#!/bin/bash
cd ../data
java -classpath ../lib/hsqldb.jar org.hsqldb.server.Server -database.0 file:mantenimiento -dbname.0 mantenimiento 
```

您可以在以下位置找到它：

[http://i45.tinypic.com/jfw6tw.png](http://i45.tinypic.com/jfw6tw.png)

当我执行脚本时，这是我得到的：

```
MacBook-Pro-de-Luis:bin luis$ ./runServer.sh 
: No such file or directory ../data
[Server@6016a786]: [Thread[main,5,main]]: checkRunning(false) entered
[Server@6016a786]: [Thread[main,5,main]]: checkRunning(false) exited
[Server@6016a786]: Startup sequence initiated from main() method
[Server@6016a786]: Could not load properties from file
[Server@6016a786]: Using cli/default properties only
[Server@6016a786]: Initiating startup sequence...
[Server@6016a786]: Server socket opened successfully in 7 ms.
] opened sucessfully in 505 ms.dex=0, id=0, db=file:mantenimiento, alias=mantenimiento
[Server@6016a786]: Startup sequence completed in 513 ms.
[Server@6016a786]: 2012-05-18 10:54:51.396 HSQLDB server 2.2.8 is online on port 9001
[Server@6016a786]: To close normally, connect and execute SHUTDOWN SQL
[Server@6016a786]: From command line, use [Ctrl]+[C] to abort abruptly 
```

我在使用 cd ../data 时遇到问题，然后它创建了数据库并说它可以工作，但它是在 /bin 中创建的，而不是在 /data 中创建的。

当我尝试使用 SQLexplorer 在 Eclipse 中重新创建连接时，我得到了这个：

[http://i45.tinypic.com/21d3cl2.png](http://i45.tinypic.com/21d3cl2.png)

终端说：

```
[Server@6016a786]: [Thread[HSQLDB Connection @60f47bf5,5,HSQLDB Connections @6016a786]]: database alias=mantenimiento does not exist 
```

有人知道我在做什么错吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:37:18.777

```
No such file or directory ../data 
```

创建`../data`目录：它不存在。所以很明显，你不能`cd`进入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:39:40.897

如果您查看您的文件夹结构，您会看到 runServer.sh 文件位于 bin 文件夹后面一层。然而，.sh 脚本尝试返回一级以找到 ../data 文件夹，.. 表示返回一个文件夹。

尝试将 ../data 更改为只是数据，看看会发生什么。

# java - 在 Android 中从文件中解码位图的一部分

> ID：10651881
> 
> 赞同：7
> 
> 时间：2012-05-18T11:33:38.053
> 
> 标签：java, android, bitmap

我有一个图像非常大的文件：例如 9000x9000。

由于堆大小，我无法将位图加载到内存中。但我只需要显示这个位图的一小部分，例如矩形宽度=100-200 和高度=200-400（子位图的大小=100x200）

如何从文件中检索此位图？

注意：我不想损失 100x200 图像的质量

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-03T22:20:32.030

有没有可能解决这个问题？

例如，[BitmapRegionDecoder](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html)。

它应该适用于 API10 及更高版本...

用法：

```
BitmapRegionDecoder.newInstance(...).decodeRegion(...) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-05T08:49:55.793

可以使用[RapidDecoder](https://github.com/suckgamony/RapidDecoder)轻松完成。

我实际上生成了一个 9000x9000 png，其文件大小约为 80MB，并且成功加载了 200x400 大小的区域。

```
import rapid.decoder.BitmapDecoder;

Bitmap bitmap = BitmapDecoder.from("big-image.png")
                             .region(145, 192, 145 + 200, 192 + 400)
                             .decode();
imageView.setImageBitmap(bitmap); 
```

它适用于 Android 2.2 及更高版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T11:50:29.137

我认为您可以使用允许您指定要解码的 Rect 的 BitmapFactory 方法。

```
public static Bitmap decodeStream (InputStream is, Rect outPadding, BitmapFactory.Options opts) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-01T08:02:39.887

试试这个代码：

```
public static Bitmap decodeSampledBitmapFromFile(String path, int reqWidth, int reqHeight) {
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(path, options);

        final int height = options.outHeight;
        final int width = options.outWidth;
        options.inPreferredConfig = Bitmap.Config.RGB_565;
        int inSampleSize = 1;
        if (height > reqHeight) {
            inSampleSize = Math.round((float) height / (float) reqHeight);
        }
        int expectedWidth = width / inSampleSize;
        if (expectedWidth > reqWidth) {
            inSampleSize = Math.round((float) width / (float) reqWidth);
        }
        options.inSampleSize = inSampleSize;
        options.inJustDecodeBounds = false;
        return BitmapFactory.decodeFile(path, options);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T11:50:22.463

我不认为你可以。即使在 PC 上，我也看不出如何在不加载整个图像的情况下做到这一点：大多数图像格式（例如 PNG）都压缩了像素数据，因此您至少需要解压缩 IDAT 块才能开始执行此操作其他任何东西，基本上都会解码整个图像。

在您的情况下，我会尝试让服务器为我做这件事。无论如何，您从哪里获得图像？不是来自服务器？然后尝试发出 WS 请求，该请求将为您提供图像的正确部分。如果图像不是来自服务器，您仍然可以将其发送到服务器以仅取回您想要的图像部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T12:02:48.703

试试这个代码：

```
private Bitmap decodeFile(File f) {
    Bitmap b = null;
    try {
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        FileInputStream fis = new FileInputStream(f);
        b=Bitmap.createBitmap(BitmapFactory.decodeStream(fis, null, o), 100, 200, 200, 400, null, null);
        fis.close();
    } catch (IOException e) {
    }
    return b;
} 
```

我不确定，但这可能会给你一些想法

# c# - Telerik asp.net MVC Fileupload 控件

> ID：10651883
> 
> 赞同：0
> 
> 时间：2012-05-18T11:33:54.563
> 
> 标签：c#, asp.net-mvc, telerik, telerik-mvc

我在我的 Razor 视图（`Catalog`/`Product`视图）中使用 Telerik asp.net MVC 3 文件控件，如下所示：

```
@(Html.Telerik().Upload()
    .Name("orderImageAtachment")
    .Async(async => async.Save("Save", "Catalog").AutoUpload(true))
    .ClientEvents(events => events
        .OnSuccess("ItemImageOnSuccess")
        .OnError("ItemImageOnError")
    )
) 
```

我创建了一个`ActionResult`这样的：

```
 public ActionResult Save(IEnumerable<HttpPostedFileBase> orderImageAtachment, string CompID)
        {
            // The Name of the Upload component is "attachments" 
            foreach (var file in orderImageAtachment)
            {
                // Some browsers send file names with full path. This needs to be stripped.
                var fileName = Path.GetFileName(file.FileName);
                var physicalPath = Path.Combine(Server.MapPath("~/Content/Docs"), fileName);

                // The files are not actually saved in this demo
                file.SaveAs(physicalPath);
            }
            // Return an empty string to signify success
            return Content("");
        } 
```

和客户端功能是这样的：

```
 function onSuccess(e) {
        // Array with information about the uploaded files
        var files = e.files;

        if (e.operation == "upload") {
            alert("Successfully uploaded " + files.length + " files");
        }
    }

    function onError(e) {

        alert('Error in file upload');
        // Array with information about the uploaded files
        var files = e.files;

        if (e.operation == "upload") {
            alert("Failed to uploaded " + files.length + " files");
        }

        // Suppress the default error message
        e.preventDefault();
    } 
```

我得到打开浏览窗口的选择按钮。但是单击它什么也没做......我不确定出了什么问题。我需要在 web.config 中添加一些东西吗？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:19:07.723

我有点困惑，此时它不起作用，但我假设它没有击中你的控制器中的动作。我会确保你正在尝试一个相当小的文件，默认限制是 4mb。

`Save`此外，您的Action签名看起来与您在上传的`async.Save(...)`. 我不确定它是否重要，因为它是一个字符串，但您可以尝试删除 Save 操作的`CompID`参数（至少看起来不像它在片段中使用的那样）。

我会尝试在您使用的任何浏览器中使用提琴手或开发人员工具来查看您是否偶然遇到 404 错误。

# c++ - 如何在本机 C++ 中获取进程名称和日期时间戳

> ID：10651885
> 
> 赞同：1
> 
> 时间：2012-05-18T11:33:59.493
> 
> 标签：c++, winapi, visual-c++

在 Native C++ 中，如何获取当前进程名称和日期时间。我不是 C++ 程序员。

在 C# 中，这样做非常简单：

进程名称：

```
Process.GetCurrentProcess().ProcessName 
```

约会时间：

```
DateTime.Now.ToString("yyyy-MM-dd_HH.mm.ss.ff") 
```

如何在 C++ 本机中检索它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:50:06.680

**获取系统时间**

**句法**

```
void WINAPI GetSystemTime(
  __out  LPSYSTEMTIME lpSystemTime
); 
```

**参数：** lpSystemTime [out]

> 指向 SYSTEMTIME 结构的指针，用于接收当前系统日期和时间。lpSystemTime 参数不能为 NULL。使用 NULL 将导致访问冲突。

**返回值：**此函数不返回值或提供扩展的错误信息。

**备注：**要设置当前系统日期和时间，请使用 SetSystemTime 函数。

**要求：**支持的最低客户端 Windows 2000 Professional

**最低支持服务器：** Windows 2000 Server

**头文件：** Winbase.h（包括 Windows.h）

**库：** Kernel32.lib

**DLL：** Kernel32.dll

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms724390(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724390%28v=vs.85%29.aspx)

**对于进程名称：**

[QueryFullProcessImageName 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684919%28v=vs.85%29.aspx)

[GetModuleFileNameEx 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683198%28v=vs.85%29.aspx)

[进程和线程函数可以在这里找到](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684847%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T11:38:40.083

要获取当前进程的名称，您可以使用[`GetModuleFileName()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683197%28v=vs.85%29.aspx)：

```
char exe_path[MAX_PATH];
GetModuleFileName(NULL, exe_path, MAX_PATH); 
```

然后，您可以提取`exe_path`最后一个`\`字符之后的部分。

要获取当前时间，您可以使用[`std::time()`](http://en.cppreference.com/w/cpp/chrono/c/time).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T11:42:43.777

进程名称：

```
char name[256];
GetProcessImageFileName(GetCurrentProcess(),name,256); 
```

您也可以从命令行参数中获取它

对于日期，请使用 time.h 中的 localtime()，例如[这里](http://www.cplusplus.com/reference/clibrary/ctime/localtime/)

# python - emacs 在保存 python 代码之前不断询问 # -*- coding: ASCII -*-

> ID：10651886
> 
> 赞同：3
> 
> 时间：2012-05-18T11:34:12.673
> 
> 标签：python, emacs, character-encoding

我有一个以以下开头的 python 脚本：

```
#!/usr/bin/env python
# -*- coding: ASCII -*- 
```

在保存之前，它总是拆分我的窗口，并询问：

警告（mule）： :coding 标记为当前缓冲区/文件指定了无效的编码系统 `ASCII'。强烈建议在写入文件之前修复它。

我需要说是的，有办法禁用它吗？很抱歉问，但我在谷歌上没有运气。

加布里埃尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T19:49:29.910

一个不涉及更改脚本的解决方案是告诉 Emacs`ASCII`作为编码系统意味着什么。（默认情况下，Emacs 会调用它`US-ASCII`。）将其添加到您的`.emacs`文件中：

```
(define-coding-system-alias 'ascii 'us-ascii) 
```

那么 Emacs 应该可以理解`# -*- coding: ASCII -*-`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T12:17:31.280

Python 增强提案 (PEP) 263，[定义 Python 源代码编码](http://www.python.org/dev/peps/pep-0263/)，讨论了定义源代码编码的多种方法。这里有两点特别重要：

*   > 如果没有编码注释，Python 的解析器将假定为 ASCII

    所以你的文件中根本不需要这个。不过，如果您确实想明确说明文件编码：

*   > 要定义源代码编码，必须将魔术注释放在源文件中，作为文件的第一行或第二行，例如：

    ```
    # coding=<encoding name> 
    ```

    （请注意，`=`可以用 a 代替`:`）。所以你可以使用[这个](https://stackoverflow.com/a/2387315/623518)答案所建议的`# coding: ascii`而不是更详细的。这似乎让 emacs 很高兴。`# -*- coding: ASCII -*-`

# php - 我的第一家商店重定向到 magento 多站点中的第二家商店

> ID：10651887
> 
> 赞同：0
> 
> 时间：2012-05-18T11:34:13.377
> 
> 标签：php, magento

我是 Magento 的新手，正在尝试制作多个网站。

我在安全和不安全的 URL 中做了一些错误的设置，因此出现了问题。

如果我在 URL 中键入我的新商店名称，它将重定向到辅助域。我什至无法打开管理面板来更改 URL。

有谁知道哪个表有这种安全和不安全的 URL 设置？我有什么需要改变的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:26:31.763

您需要的设置可在**`core_config_data`**表中找到。

```
web/unsecure/base_url
web/secure/base_url 
```

但如果有疑问，您可以随时在数据库中搜索您所追求的字段。

# c# - Mono 仅在某些计算机上获得“System.ExecutionEngineException: SIGILL”

> ID：10651888
> 
> 赞同：2
> 
> 时间：2012-05-18T11:34:17.993
> 
> 标签：c#, exception, mono

尝试运行 Mono 应用程序时出现以下异常：

```
Unhandled Exception: [Some exception here -- this part changes] ---> System.ExecutionEngineException: SIGILL
  at System.Collections.Hashtable..ctor (Int32 capacity, Single loadFactor, IHashCodeProvider hcp, IComparer comparer) [0x00000] in <filename unknown>:0
  at System.Collections.Hashtable..ctor (Int32 capacity, Single loadFactor) [0x00000] in <filename unknown>:0
  at System.Collections.Hashtable..ctor () [0x00000] in <filename unknown>:0
  at [other calling locations that change]... 
```

完全相同的系统映像（字面意思）在某些计算机上成功，例如在 VMWare 中，而在某些其他硬件上则失败并出现此异常。

ps 我看过[https://stackoverflow.com/questions/6388410/error-initialising-the-configuration-system-when-creating-tcpclient-in-mono](https://stackoverflow.com/questions/6388410/error-initialising-the-configuration-system-when-creating-tcpclient-in-mono)但我已经有一个 machine.config 文件，但我没有使用 mkbundle。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:37:16.060

问题是我（提前）预编译了不兼容的二进制文件。

# php - 如何在 PostgreSQL 9.1 中使用 pgFouine？

> ID：10651890
> 
> 赞同：5
> 
> 时间：2012-05-18T11:34:33.393
> 
> 标签：php, postgresql, profiling, pgfouine

使用 pgFouine 1.2、PostgreSQL 9.1.3。

postgresql.conf 设置：

```
log_min_duration_statement = 0
log_duration = on
log_line_prefix = '%t [%p]: [%l-1] '
log_statement = 'all'
lc_messages = 'C'           # locale for system error message strings
lc_monetary = 'C'           # locale for monetary formatting
lc_numeric = 'C'            # locale for number formatting
lc_time = 'C'               # locale for time formatting 
```

运行 pgFouine 时出现的错误：

`C:\Users\Razvan\Desktop\pgfouine-1.2>php pgfouine.php -file log > report.html`

```
pgFouine did not find any valid PostgreSQL log line in your log file:
* check that PostgreSQL uses an english locale for logging (lc_messages in your postgresql.conf),
* check that you use the -logtype option (syslog, stderr) according to your log file,
* if you use syslog and log_line_prefix, check that your log_line_prefix has a trailing space,
* if you use stderr, check that your log_line_prefix is of the form '%t [%p]: [%l-1] '.
If you think your log file and your options are correct, please contact the author (gsmet on #postgresql@freenode or guillaume-pg at smet dot org). 
```

我正在使用中找到的日志文件`C:\Program Files\PostgreSQL\9.1\data\pg_log`

我尝试了各种设置，但没有任何效果，也无法在互联网上找到任何解决方案。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T15:03:31.477

尝试添加 logtype 选项：

```
pgfouine -logtype stderr -file filename 
```

# iphone - 如何使用 calloutAccessoryControlTapped: 方法将数组值发送到下一个视图？

> ID：10651899
> 
> 赞同：0
> 
> 时间：2012-05-18T11:35:20.493
> 
> 标签：iphone, objective-c, ios

我正在开发一个新的应用程序。我还使用了 MapKitView 并放下了一些别针。我拿了一个 id 数组，但我不能单独访问那个引脚的 id，你能帮我吗？提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:53:55.113

为此，您必须使用 pin 设置标签属性。当注释确实调用了select方法时，从pin中检索标签并在标签的帮助下从数组中获取值并将其发送到另一个类

```
UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

rightButton.tag = annotationIndex;

[rightButton addTarget:self action:@selector(showDetails:) forControlEvents:UIControlEventTouchUpInside];

pinView.rightCalloutAccessoryView = rightButton; 
```

# facebook - Facebook 登录的潜在安全问题？

> ID：10651900
> 
> 赞同：13
> 
> 时间：2012-05-18T11:35:20.723
> 
> 标签：facebook, security

我目前是第一次在我的网站上实现 Facebook 登录，但我对它的安全性有一些疑问。

我已经有一个包含用户的数据库，并且为每个用户存储了一个电子邮件地址，所以我真的需要检查我从 Facebook 获得的电子邮件地址是否已经存在于我的数据库中，否则我会遇到一些问题重复用户。如果用户已经存在，我只需将来自 Facebook 的数据合并到我网站上的现有帐户中，然后连接用户。否则，我为他创建一个帐户。

但事情是这样的：

1.  Alice 使用电子邮件地址*alice@users.com*在我的网站上连接，但**Alice 没有**使用该电子邮件地址在 Facebook 上注册

2.  *Bob 使用 Alice 的电子邮件地址alice@users.com*在 Facebook 上注册，并使用在任何电话号码上收到的 SMS 验证帐户（我检查过，这是可能的，无需单击通过电子邮件收到的链接即可验证帐户）。我同意 Alice 会在她的电子邮件地址上收到通知，但是这仍然是可能的。

3.  Bob 使用 facebook connect 触发登录我的网站，同时使用 Alice 的电子邮件地址在 Facebook 上连接。

4.  Bob 的 Facebook 帐户是活动的并且经过验证，我必须假设他已经在我的网站上有一个帐户，因为*alice@users.com*已经在我的数据库中，所以我连接他而不是 Alice，他可以在 Alice 的帐户上使用我的网站。

=> 我在几个网站上尝试过这种情况，只要我知道电子邮件地址，我就可以连接到其他人的帐户（我创建的虚假 Facebook 帐户；））。

有谁知道如何防止这些情况？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T11:57:22.917

如果真的 Facebook 不需要确认电子邮件，然后充当 openid 风格的提供者，那这真是令人震惊！但是我想答案已经在您的问题中了-不要链接/合并帐户。或者至少，在没有先自己确认电子邮件的情况下，不要通过 facebook 登录尝试这样做。

您无法更改friendface的功能，因此您需要将facebook connect提供的电子邮件地址视为不受信任的数据。如果使用您网站上已有本机帐户的电子邮件进行 Facebook 连接登录尝试，请自行向他们发送电子邮件确认代码 - 并执行 facebook 未能执行的操作。

另一种选择是，一旦用户登录到本地帐户，您可以允许他们从那里链接 Facebook 帐户，如果他们愿意的话。这还允许您支持在两个站点上注册了不同电子邮件地址的用户的 facebook 登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T13:29:38.637

我认为这不是 facebook 错误/流程。问题在于接受 facebook 登录的网站所使用的算法。

如果该电子邮件地址已在网站中注册，则不应接受 Facebook 登录。它可能称为“facebook 登录”，但不要忘记它确实是站点数据库的新帐户，应该被视为一个。

总之，如果网站使用电子邮件地址作为唯一标识，则不应接受使用相同电子邮件地址的 facebook 登录。

# php - Auth Dialogue 首先在画布中加载

> ID：10651905
> 
> 赞同：0
> 
> 时间：2012-05-18T11:35:29.903
> 
> 标签：php, facebook

当用户登陆我的应用程序并且没有通过授权过程时，对话框首先在画布中打开，然后在画布外重新加载。除了几秒钟看起来不太正确之外，一切都按预期执行。

`header('Location:https://www.facebook.com/dialog/oauth/?client_id=12345678910&redirect_uri=https://apps.facebook.com/namespace/&state=&scope=');` 如果检测到身份验证未被接受，我会在我的应用程序顶部 使用。

![在此处输入图像描述](../Images/d038618be3f9d7dca325beaa87ced4dc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:38:55.680

我总是使用 JavaScript 重定向，因为画布应用程序已经在 iFrame 中，我们希望将顶部窗口重定向到身份验证对话框。

试试这个 PHP 函数，它会回显一个 JavaScript 重定向。

```
function jsRedirect($url){
    echo "<script language=javascript>";
    echo "top.location.href ='".$url."';";
    echo "</script>";
    exit();
} 
```

请注意，我们使用`top.location.href`而不是`window.location.href`.

# c++ - 使用 boost python 将 python 列表传递给 c++ 扩展

> ID：10651912
> 
> 赞同：9
> 
> 时间：2012-05-18T11:36:04.683
> 
> 标签：c++, python, list, boost, vector

我正在尝试编写一个 c++ 扩展来替换以下 python 函数以加快我的程序

python函数如下所示

```
def calc_dist(fea1, fea2):
    #fea1 and fea2 are two lists with same length
    ... 
```

我使用 c++ 和 boost python 编写了函数，如下所示：

```
#include <vector>
#include <boost/python.hpp>
double calc_dist(vector<double>& fea1, vector<double>& fea2)
{
    int len = fea1.size();
    double s=0;
    for(int i=0; i<len;i++){
        double p=fea1[i];
        double q=fea2[i];
        ...//calculating..
    }
    return s;
}
BOOST_PYTHON_MODULE(calc_dist)
{
    using namespace boost::python;
    def("calc_dist",calc_dist);
} 
```

并将上面的 cpp 代码编译成 .so 文件，如

```
g++ calc_dist.cpp -shared -fPIC -o calc_dist.so -I /usr/include/python2.6 -lboost_python 
```

并尝试在python程序中使用.so，导入工作正常，表明模块可以成功导入。

但是，每当我将两个列表传递给函数的参数时，python 都会给出如下错误

```
ArgumentError: Python argument types in
    calc_dist.calc_dist(list, list)
did not match C++ signature:
    calc_dist.calc_dist(std::vector<float, std::allocator<float> >,
                        std::vector<float, std::allocator<float> >) 
```

谁能帮我解决这个问题？即使用boost 将python 列表传递给c++ 扩展？

非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T11:58:32.367

`std::vector`如果你想让它在 Python 列表上运行，你为什么要编写一个函数接受？它们是不同的东西。

Boost.Python 将 python 列表公开为[列表](http://www.boost.org/doc/libs/1_49_0/libs/python/doc/v2/list.html)类。

所以，你的函数应该看起来像

```
double calc_dist(boost::python::list fea1, boost::python::list fea2)
{
    boost::python::ssize_t len = boost::python::len(fea1);
    double s=0;
    for(int i=0; i<len;i++){
        double p = boost::python::extract<double>(fea1[i]);
        double q = boost::python::extract<double>(fea2[i]);
        ...//calculating..
    }
    return s;
} 
```

它没有经过测试，但希望足够接近让你开始......

# attributes - mongoose 和惰性初始化属性未在正确范围内执行

> ID：10651916
> 
> 赞同：0
> 
> 时间：2012-05-18T11:36:20.270
> 
> 标签：attributes, mongoose, lazy-evaluation

我正在使用 mongoose 作为我的数据访问层，我真的很喜欢它提供的用于创建文档模型的不同功能（属性、方法、静态方法..）

我使用 mongoose 的虚拟属性特性来创建不会持久化到 MongoDB 的属性。但是，这些属性的**计算成本很高**（并且多次使用它们对我没有帮助）。[让我们以mongoose virtual](http://mongoosejs.com/docs/virtuals.html)
上的相同示例为例， 它持续存在，并且使用 virtual 属性 `person.name.first``person.name.last``person.name.full`

假设我只想在文档的整个生命周期中计算 person.name.full 一次
（如果我允许像示例中那样设置属性或其依赖字段，那么对于脏集之后的每个 get 也是如此）。

我需要在文档范围内有一个额外的变量，所以自然我为此使用了闭包，但计算属性的函数中的**“this”范围是****全局**对象，而不是我正在处理的文档。

代码：

```
var makeLazyAttribute = function(computeAttribute) {
    var attribute = null;
    return function() {
        if(!attribute) {
            attribute = computeAttribute();     
        }
        return attribute;
    }
};

MySchema.virtual('myAttribute').get(makeLazyAttribute(function () {
    // some code that uses this, this should be the document I'm working on
    // error: first is not defined, inspecting what is this gives me the global object
        return this.first + this.last

})); 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:27:55.723

好吧，我已经`makeLazyAttribute`在文档范围内取得了一些进展，所以我只需要更改`attribute = computeAttribute();`为
`attribute = computeAttribute.call(this);`.

但是，现在我只记得第一次`computeAttribute()`调用，而不是记住每个文档的第一次函数调用。必须有办法减轻这种情况。

# image - Blackberry BrowserField：如何在 Blackberry 中显示图像而不会出现渲染问题？

> ID：10651917
> 
> 赞同：0
> 
> 时间：2012-05-18T11:36:29.120
> 
> 标签：image, blackberry, rendering

我正在尝试使用 BrowserField 渲染图像。但是我遇到了图像显示这样的问题（渲染不良）：

![在此处输入图像描述](../Images/0f4262a3cca4933041a05133d3c619d0.png)

图像比屏幕大，我使用此代码加载它：

```
public ImagesScreen(String urlImage,int number)
{
super(VERTICAL_SCROLL | HORIZONTAL_SCROLL);

BrowserFieldConfig config = new BrowserFieldConfig();
config.setProperty(BrowserFieldConfig.USER_SCALABLE, Boolean.TRUE);
browserField = new BrowserField(config);

scale = initscale = Float.valueOf(formatNumber(((float) 1 / (1703 / Display.getWidth())), 8, "."));

add(browserField);
Log.info("scala " + scale);//" + scale + "
String htmlContent = "<html><meta name='viewport' content='width = device-width,maximum-scale=10.0, minimum-scale=0.001, initial-scale=" + scale + ", user-scalable=yes' /><body style='margin: 0px;padding: 0px;float: left;'>";
for (int i = 1; i <= number;i++)
{
    htmlContent += "<img width='1703' alt='' src='" + urlImage + "000"+i+".png"+"'/>";
}
System.out.println(urlImage);
htmlContent += "</body></html>";
browserField.displayContent(htmlContent, "http://localhost");
UiApplication.getUiApplication().pushScreen(this);
}; 
```

如果我让比例为 1 ，它仍然有这个问题。谢谢阅读 ：） 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:10:55.823

让 BrowserField 完成所有工作：

```
 String imgFile = "..."; // here the image file pathname        
    String style   = "..."; // here the css style

    String imgTag = "<div class=\"image\"> <img src="
           + imgFile
           + "></img></div><div class=\"clear\"></div>";

    String browserContent = "<html><style>" + style + "</style>" + imgTag + "</html>";

    byte[] contentBytes;        

    try {
        contentBytes = browserContent.getBytes("UTF-8");
        browser.displayContent(contentBytes, "text/html; charset=UTF-8", "");
    } catch (UnsupportedEncodingException e) {
        ...
    } 
```

# android - 如何从 Android 应用程序发送邮件

> ID：10651924
> 
> 赞同：-1
> 
> 时间：2012-05-18T11:36:57.823
> 
> 标签：android, sendmail, android-spinner

我开发了一个非常简单的 Android 应用程序，用户必须从 Spinners 中选择项目并在消息框中键入一些文本。然后工作就是提交。如果用户点击提交，整个选定的数据将直接发送到特定的电子邮件地址。成功发送后，会出现一个对话框，显示一些感谢信息。这里应该提到的是，我使用了 4 个 Spinners 和 1 个 Edittext 框。

现在我正在寻找提交按钮操作的代码。请帮帮我。

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:44:55.857

我从未在 Android 中编写过电子邮件发送功能。但是，替代通过您的应用程序发送电子邮件的替代方法是将意图触发到其他电子邮件应用程序。

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);

String receiver = "someone@somewhere.com";
String subject  = "your email subject";
String body     = "your email body";

emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, receiver);
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
emailIntent.setType("plain/text");
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, body);

startActivity(emailIntent); 
```

另外，不要忘记在您的 AndroidManifest 中添加权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:54:20.470

```
I used it in my app. here is the code.

When multiple Application to send email handling it to others applications

startActivity(Intent.createChooser(emailIntent, "Send your email in:"));  

Supplying Message Content

Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);  

String aEmailList[] = { "user@gmail.com","user2@gmail.com" };  
String aEmailCCList[] = { "user3@gmail.com","user4@gmail.com"};  
String aEmailBCCList[] = { "user5@gmail.com" };  

emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList);  
emailIntent.putExtra(android.content.Intent.EXTRA_CC, aEmailCCList);  
emailIntent.putExtra(android.content.Intent.EXTRA_BCC, aEmailBCCList);  

emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "My subject");  

emailIntent.setType("plain/text");  
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "My message body.");  

startActivity(emailIntent); 
```

# github - 为什么 Github 没有像 Filezilla 这样简单的方法/软件来上传文件？

> ID：10651930
> 
> 赞同：-4
> 
> 时间：2012-05-18T11:37:31.163
> 
> 标签：github, git-bash

在 Git Bash 上编写命令非常耗时。初学者也很难理解。为什么 Github 没有像 Filezilla 这样简单的方法/软件来上传文件？它应该很简单，例如输入用户名密码，选择存储库并单击上传/同步按钮。你说什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:32:58.323

作为源代码存储库，像 Git（或 Mercurial）这样的 DVCS（分布式版本控制系统）和像 GitHub 这样的 Web 前端的目标*不是*“上传文件，而是记录提交（新版本的代表项目连贯状态的完整树）。

所以重点不在文件级别，而是在项目级别。

如果您查看提供“上传”界面的存储库，请考虑像[Nexus这样的](http://www.sonatype.org/nexus/)[工件](http://www.sonatype.org/nexus/why)存储库，它[允许您上传](http://mpashworth.wordpress.com/2012/04/15/adding-microsoft-sql-server-jdbc-driver-to-nexus-and-local-maven-repository/)任何类型的工件（文件、二进制文件、图片......）

![关系](../Images/239494555fb0b5506873e1a6990dc398.png)

![连结上传](../Images/c446167f9d9ea4c9dc544f274b1ecced.png)

![Nexus 已上传](../Images/d777a7e3b527586f6f475df64aa32f4f.png)

但这与 DVCS 的用途截然不同。

* * *

如果您的问题更多关于为发布上传二进制文件，您现在（[2013 年 7 月 2 日](https://github.com/blog/1547-release-your-software)）可以这样做！

> **Releases**，将软件发送给最终用户的工作流程。
> 发布是一流的对象，带有变更日志和二进制资产，提供了 Git 工件之外的完整项目历史。可以从存储库的主页访问它们：

![主页](../Images/b7284af160e36f640c2c57e81427521d.png)

> *   版本附有版本说明和下载软件或源代码的链接。
> *   遵循许多 Git 项目的约定，发布与 Git 标签相关联。您可以使用现有标签，也可以让版本在发布时创建标签。
> *   **您还可以将二进制资产（例如编译的可执行文件、缩小的脚本、文档）附加到 release**。发布后，任何可以查看存储库的人都可以使用发布详细信息和资产。

![发布](../Images/f1da5a105d8f216b1b82f7b0706dce2a.png)

这取代了[旧的二进制上传服务](https://stackoverflow.com/q/6978954/6309)，该服务[于 2012 年 12 月被删除](https://github.com/blog/1302-goodbye-uploads)。

# java - 将文本文件中的先前数据加载到新系统中

> ID：10651932
> 
> 赞同：-4
> 
> 时间：2012-05-18T11:37:41.460
> 
> 标签：java, arrays, collections, arraylist

这是我的代码：

```
public boolean readFromFileBooking()
    {
       boolean isFileBooking = true;
        try 
        {
            BufferedReader reader = new BufferedReader(new FileReader("bookings.txt"));   
            String data = reader.readLine();   
            if (data == null)   
            {
                System.out.println("No Bookings Have Been Made . . . .");
            }    
 data = reader.readLine();  
 reader.close();            
} 
```

这是顺序：

1.  将数组写入文本文件
2.  停止/退出系统
3.  重新启动时，在文本文件中加载前一个数组，以便再次使用它。

问题是每当我启动一个新系统时，文本文件都会被一个新数组覆盖。实际上我希望新数组成为`ArrayList`.

你们能分享给我如何在新系统中加载以前的数据吗？如何加载/复制文本文件中的先前数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:42:20.160

不要尝试同时读取和写入文件。

在启动时，如果文件在那里，则读取文件，完成后将其关闭。

关机时，写入文件并在完成后关闭它。

如果您尝试读取和写入文件（不附加），您将截断文件并且将没有可读取的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:53:09.707

这会将整数数组写入文件，每个数字用空格分隔。然后它将它们读回并将它们存储为数组列表。我忽略了异常处理以专注于 IO。

```
public static void main(String[] args) {
    int[] array = { 1, 2, 3 };
    writeOut(array);
    List<Integer> list = readIn();
    for (Integer num : list) {
        System.out.print(num + " " );
    }
}

public static List<Integer> readIn() {
    final File file = new File("file.txt");
    List<Integer> list = new ArrayList<Integer>();
    Scanner scan;
    try {
        scan = new Scanner(file);
        while (scan.hasNextInt()) {
            list.add(scan.nextInt());
        }
    } catch (FileNotFoundException e) {
    }
    return list;
}

public static void writeOut(int[] array) {
    final File file = new File("file.txt");

    try {
        file.createNewFile();
        final FileWriter writer = new FileWriter(file);

        for (int i = 0; i < array.length; i++) {
            writer.write(Integer.toString(array[i]) + " ");
        }
        writer.close();
        writer.flush();
    } catch (final IOException e) {
    }
} 
```

# vba - VBA 中的 DMin 从查询中返回错误值

> ID：10651934
> 
> 赞同：1
> 
> 时间：2012-05-18T11:37:55.357
> 
> 标签：vba, ms-access-2007, ms-access-2010

我试图在我的访问项目中使用 vba，但是当我使用 DMin 函数在查询中查找最小值时，我反而得到了我创建的表单的当前值返回。

当我在代码的上下文之外运行 Dmin 函数时，它确实可以正常工作，但是当我尝试在我的代码中使用它时，我遇到了上面描述的问题。

我似乎无法理解 StackExchange 上的格式，所以这里是代码的 pastebin。

[http://pastebin.com/XCNPfNYG](http://pastebin.com/XCNPfNYG)

问题线在这里

```
PastPrice = DMin([Price Each], "qryBoxHistory", "[CalConcatID] = 133377") 
```

* * *

```
Option Compare Database
Option Explicit

Private Sub Save_Click()

Dim CurrentConcat As String
Dim PastConcat As String
Dim PastConcatGrab As Boolean
Dim txtbox As String

Dim PastPrice As Currency
Dim ExpPrice As Currency

CurrentConcat = Me!CurrentConcat 'Set current Concatenated ID to the ID on the form

PastConcatGrab = IsNull(DLookup("[CalConcatID]", "qryBoxHistory", "[CalConcatID] = CurrentConcat"))

    If PastConcatGrab = True Then 'If lookup shows that no boxes have been entered under that ID then a message is displayed and the values saved
        txtbox = MsgBox("This is a new box, no past prices exist", vbOKOnly, "Information")
        DoCmd.RunCommand acCmdSaveRecord
    Else
        PastConcat = DLookup("[CalConcatID]", "qryBoxHistory", "[CalConcatID] = CurrentConcat")
        PastPrice = DMin([qryBoxHistory]![Price Each], "qryBoxHistory", "[CalConcatID] = 133377")
        ExpPrice = Me![Price]
        If ExpPrice > PastPrice Then
            txtbox = MsgBox("This Box is not being supplied at a discounted rate, box has NOT been saved", vbOKOnly, "Information")
        Else
            txtbox = MsgBox("This box is discounted, This price has been saved", vbOKOnly, "Information")
        End If
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:20:24.420

您似乎缺少必要的引号：

```
 DMin("[Price Each]", "qryBoxHistory", "[CalConcatID] = 133377" 
```

# php - PHP在特定条件下发送部分表单

> ID：10651935
> 
> 赞同：0
> 
> 时间：2012-05-18T11:37:55.887
> 
> 标签：php, html

我有一个搜索表单，用户可以通过它执行搜索。当检查“高级搜索”复选框时，表格的新部分显示，允许对搜索进行完整自定义。出于多种原因，我决定使用“get”方法发送表单，从而在 url 中显示所有变量。

问题是，当提交非高级搜索时，高级部分的变量仍然使用 get 方法发送，在不需要时会产生一个冗长的 URL，因为处理搜索。

为了在未选中“高级搜索”复选框时隐藏高级表单，我将高级表单放在自己的 div 中，并在未选中复选框时让 JavaScript 将其 style.display 设置为“none”，并将其重置为默认值。

如果未选中“高级搜索”，我将如何最好地只提交部分表单？表单中的表单，删除和重写 div 的内容，而不是简单地隐藏它，还是什么？或者有没有人告诉我的简单技巧？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:40:45.500

如果您参加您所做的部分`display:none`并添加一个您设置所有表单字段的部分，`disabled`您将被设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:40:58.450

您可能可以使用两种形式，一种用于简单搜索，另一种用于高级搜索。

如果选择了“高级”搜索，则隐藏简单搜索，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:46:13.457

嗨，我认为您使用 Ajax (Jquery) 部分并加载 Advance 部分。因此，您可以轻松地从服务器端检索。如果您发布代码部分，我们可以给出明确的答案。谢谢你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T11:46:38.023

您可能应该使用该属性

```
<input disabled="disabled" .. 
```

当您不想提交输入字段时

[您可以在本文](http://kreotekdev.wordpress.com/2007/11/08/disabled-vs-readonly-form-fields/)中找到更多信息

您可能需要保留“显示：无”，因为禁用元素的呈现取决于浏览器。

# objective-c - 除了 ELCImagePickerController 之外的任何其他 Picker 控制器来选择多个图像 iOS

> ID：10651936
> 
> 赞同：-1
> 
> 时间：2012-05-18T11:38:01.883
> 
> 标签：objective-c, ios, ipad, uiimagepickercontroller

我必须从 m iPad 中选择多个图像，例如 100 个图像，如果我使用 ELCImagePickerController，我的应用程序由于图像太多而崩溃，

除了 ELCImagePicker 之外，还有其他控制器可以选择多个图像，如果有，请告诉我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:43:13.653

你试过了吗：http: [//www.binpress.com/app/agimagepickercontroller/784](http://www.binpress.com/app/agimagepickercontroller/784)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:39:58.097

您可以通过在 selectedAssets 函数内的 ELCImagePickerController.m 中注释此行来解决此问题。

```
[workingDictionary setObject:[UIImage imageWithCGImage:[[asset defaultRepresentation] fullScreenImage]] forKey:@"UIImagePickerControllerOriginalImage"]; 
```

它为每个资产创建一个 UIImage，当它加载一定数量的图像时会导致内存不足崩溃。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-16T13:36:01.517

您可以使用[iOS 多个 Image Picker](https://github.com/pigmasha/MAImagePicker)。

*   iOS 5.0 - 8.2 支持
*   在 iOS 8 中使用 Photos.framework
*   iPhone 和 iPad 支持

# android - 重定向到android中的webview活动

> ID：10651937
> 
> 赞同：0
> 
> 时间：2012-05-18T11:38:05.030
> 
> 标签：android, redirect, webview, fatal-error

所以我试图在成功登录后从主要活动启动 WebView 活动。主要活动如下：

```
 try {

                response = CustomHttpClient.executeHttpPost("http://192.168.1.101/adddrop/login.php", postParameters);

                Log.v(LOG_TAG," PostParameters = " +postParameters.toString());

                 String res=response.toString();
                 res= res.replaceAll("\\s+","");

                 Log.v(LOG_TAG," response value = " +res);

                if(res.equals("1")){

                    Intent myIntent = new Intent(v.getContext(), Registration.class);
                    startActivity(myIntent);

                    //error.setText("Correct Username or Password");
                }
                else
                    error.setText("Sorry!! Incorrect Username or Password");

            } catch (Exception e) {
                USER.setText(e.toString());
            } 
```

另一个活动WebView（编辑：称为Registration.java，当我将它作为单独项目中的主要活动启动时工作正常）看起来像这样：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.setWebViewClient(new HelloWebViewClient());
    mWebView.loadUrl("http://192.168.1.101/adddrop/index2.php");
    mWebView.setInitialScale(130);

}

private class HelloWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
} 
```

这是单击登录后的logcat，我在其中得到成功的调试响应，但它应该带我进入网页，但应用程序崩溃并关闭：

```
05-19 12:02:39.394: W/dalvikvm(433): threadid=1: thread exiting with uncaught exception (group=0x40015560)
05-18 11:24:22.524: E/AndroidRuntime(1094): FATAL EXCEPTION: main
05-18 11:24:22.524: E/AndroidRuntime(1094): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.login/com.example.login.Registration}: java.lang.NullPointerException
05-18 11:24:22.524: E/AndroidRuntime(1094):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
05-18 11:24:22.524: E/AndroidRuntime(1094):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-18 11:24:22.524: E/AndroidRuntime(1094):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-18 11:24:22.524: E/AndroidRuntime(1094):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-18 11:24:22.524: E/AndroidRuntime(1094):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-18 11:24:22.524: E/AndroidRuntime(1094):     at android.os.Looper.loop(Looper.java:123)
05-18 11:24:22.524: E/AndroidRuntime(1094):     at android.app.ActivityThread.main(ActivityThread.java:3683)
05-18 11:24:22.524: E/AndroidRuntime(1094):     at java.lang.reflect.Method.invokeNative(Native Method)
05-18 11:24:22.524: E/AndroidRuntime(1094):     at java.lang.reflect.Method.invoke(Method.java:507)
05-18 11:24:22.524: E/AndroidRuntime(1094):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-18 11:24:22.524: E/AndroidRuntime(1094):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-18 11:24:22.524: E/AndroidRuntime(1094):     at dalvik.system.NativeStart.main(Native Method)
05-18 11:24:22.524: E/AndroidRuntime(1094): Caused by: java.lang.NullPointerException
05-18 11:24:22.524: E/AndroidRuntime(1094):     at com.example.login.Registration.onCreate(Registration.java:19)
05-18 11:24:22.524: E/AndroidRuntime(1094):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-18 11:24:22.524: E/AndroidRuntime(1094):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
05-18 11:24:22.524: E/AndroidRuntime(1094):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:24:15.413

您是否在清单文件中添加了活动？像这样：

```
<activity 
        android:name="your.package.name.Registration"
        android:label="@string/app_name" >
    </activity> 
```

**更新**

我认为您需要交换两行的顺序。

从：

```
mWebView = (WebView) findViewById(R.id.webview);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.setWebViewClient(new HelloWebViewClient());
mWebView.loadUrl("http://192.168.1.101/adddrop/index2.php");
mWebView.setInitialScale(130); 
```

至：

```
mWebView = (WebView) findViewById(R.id.webview);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.loadUrl("http://192.168.1.101/adddrop/index2.php");
mWebView.setWebViewClient(new HelloWebViewClient());
mWebView.setInitialScale(130); 
```

并且不要忘记在您的清单上添加 Internet 权限...

```
<manifest ... >
<uses-permission android:name="android.permission.INTERNET" />
...
</manifest> 
```

**更新 2**

改变这个：

```
Intent myIntent = new Intent(v.getContext(), Registration.class); 
```

至：

```
Intent myIntent = new Intent(YourActivity.this, Registration.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T17:58:33.110

您的 webview 活动应该是这样的：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    WebView mWebView = new WebView(this);

    //now do whatever you want
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.setWebViewClient(new HelloWebViewClient());
    mWebView.loadUrl("http://192.168.1.101/adddrop/index2.php");
    mWebView.setInitialScale(130);

    //finally
    setContentView(mWebView);
} 
```

# mysql - 更改 MySQL 中的字符编码？

> ID：10651938
> 
> 赞同：0
> 
> 时间：2012-05-18T11:38:07.950
> 
> 标签：mysql, database, character-encoding

在一个 Web 应用程序中，我正在处理的所有内容似乎都很好，除了似乎是从数据库中检索到的内容。使用了一些特殊字符，它们会中断 - 所以它肯定是某个地方的字符编码错误。

当我在浏览器中手动尝试从 iso-8859-1 切换到 utf-8 时，数据库内容看起来不错，但静态却搞砸了。反之亦然。所以我怀疑静态内容是iso-8859-1，而数据库中的内容是utf-8。

我四处寻找一些说明字符集的配置文件，但是当我尝试更改它时，什么也没有发生。

将我的数据库内容转换为 iso-8859-1 可能会有所帮助，因此它与静态内容相关吗？在那种情况下，怎么办？我尝试更改架构和排序规则，但效果是无缝的。

编辑：我很抱歉。这是一个 MySQL 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:19:01.707

也许这是与 MySQL 通信的客户端库的问题。

在尝试从数据库中检索数据之前，请执行以下查询：SET NAMES 'utf8'

参考： [http ://forums.mysql.com/read.php?103,46870,47245#msg-47245](http://forums.mysql.com/read.php?103,46870,47245#msg-47245)

希望这可以帮助。

# zend-framework - 使用 Zend 框架重写 htaccess

> ID：10651939
> 
> 赞同：0
> 
> 时间：2012-05-18T11:38:22.293
> 
> 标签：zend-framework, .htaccess, mod-rewrite

我想重写一个像

> localhost/public/5/issue?readerVersion=2.0

至

> localhost/public/interface/getissuefile/projectID/5/readerVersion/2.0

我试过这个：

```
RewriteCond %{REQUEST_FILENAME} -l
RewriteRule ^\/(.*)\/issue?readerVersion=(.*)$ \/interface\/getissuefile\/projectID/$1/readerVersion/$2 [R=301] 
```

但这不起作用。Zend 向我抛出这个错误：

> 指定的控制器无效 (5)

我该如何解决？

# winapi - 确定哪个打印机名称对应于哪个设备 ID

> ID：10651949
> 
> 赞同：10
> 
> 时间：2012-05-18T11:39:29.077
> 
> 标签：winapi, printing, createfile

我的目标是使用`CreateFile`（然后发出一些`WriteFile`s 和`ReadFile`s）打开通过 USB 连接的打印机。

如果打印机是 LPT 打印机，我只会做`CreateFile("LPT1:", ...)`. 但是对于 USB 打印机，必须传递一个特殊的设备路径`CreateFile`才能打开该打印机。

[正如我能够找到](http://www.dreamincode.net/forums/topic/52713-communicating-with-usb-printer/)的那样，此设备路径是通过[`SetupDiGetClassDevs`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551069.aspx)-> [`SetupDiEnumDeviceInterfaces`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551015.aspx)-> [`SetupDiGetDeviceInterfaceDetail`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551120.aspx)-> [`DevicePath`member](http://msdn.microsoft.com/en-us/library/windows/hardware/ff552343.aspx)检索的，如下所示：

> `\\?\usb#vid_0a5f&pid_0027#46a072900549#{28d78fad-5a12-11d1-ae5b-0000f803a8c2}`

一切都很好，但我输入的是人类可读的打印机名称，如`Devices and Printers`. 这些`SetupDi*`函数似乎没有使用它，它们只在[设备实例 IDs](http://msdn.microsoft.com/en-us/library/windows/hardware/ff541327.aspx)上运行。所以现在的问题是**如何从将传递给的打印机名称中获取设备实例 ID`OpenPrinter`**。

不难看出上面的 GUID 部分是`GUID_DEVINTERFACE_USBPRINT`, 并且`\\?\usb`是固定的，所以我真正感兴趣的唯一一点是`vid_0a5f&pid_0027#46a072900549#`. 这个路径我可以很容易地在打印机属性对话框中手动查找：

> 转到设备和打印机
> 右键单击​​打印机
> 属性
> 切换到硬件选项卡
> 选择打印设备，例如 ZDesigner LP2844-Z
> 属性
> 切换到详细信息选项卡
> 从下拉列表中选择“父级”。

但我不知道如何以编程方式执行此操作，提供的唯一内容是在“设备和打印机”面板中看到的打印机名称。

* * *

PS 1：我对使用打开打印机`OpenPrinter`然后使用`WritePrinter`/不感兴趣`ReadPrinter`。这已经完成，工作正常，但现在目标不同了。

PS 2：**我可以用一种更简单的方法将可读的打印机名称转换为可以传递给`CreateFile`**.

PS 3：[这个问题](https://stackoverflow.com/questions/1846340/reading-status-from-zebra-printer)，我已经发布了[答案](https://stackoverflow.com/a/10659778/11683)，与我最终想要做的事情非常相关。

PS 4：反过来也可以：**如果可以从[`SP_DEVINFO_DATA`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff552344.aspx)结构中获得可读的名称，那也将是答案**，尽管不太方便。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T22:30:25.270

下面是我终于能够想出的。

**请确认这`SYSTEM\CurrentControlSet\Control\Print\Printers\{0}\PNPData`是受支持的路径**，并且不只是在当前实现中恰好存在，可能会在未来发生变化。

结构对齐有一点问题，为此我发布了一个[单独的问题](https://stackoverflow.com/questions/10728644/properly-declare-sp-device-interface-detail-data-for-pinvoke)。

```
public static class UsbPrinterResolver
{

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
    private struct SP_DEVINFO_DATA
    {
        public uint cbSize;
        public Guid ClassGuid;
        public uint DevInst;
        public IntPtr Reserved;
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
    private struct SP_DEVICE_INTERFACE_DATA
    {
        public uint cbSize;
        public Guid InterfaceClassGuid;
        public uint Flags;
        public IntPtr Reserved;
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto, Pack = 1)]
    private struct SP_DEVICE_INTERFACE_DETAIL_DATA  // Only used for Marshal.SizeOf. NOT!
    {
        public uint cbSize;
        public char DevicePath;
    }

    [DllImport("cfgmgr32.dll", CharSet = CharSet.Auto, SetLastError = false, ExactSpelling = true)]
    private static extern uint CM_Get_Parent(out uint pdnDevInst, uint dnDevInst, uint ulFlags);

    [DllImport("cfgmgr32.dll", CharSet = CharSet.Auto, SetLastError = false)]
    private static extern uint CM_Get_Device_ID(uint dnDevInst, string Buffer, uint BufferLen, uint ulFlags);

    [DllImport("cfgmgr32.dll", CharSet = CharSet.Auto, SetLastError = false, ExactSpelling = true)]
    private static extern uint CM_Get_Device_ID_Size(out uint pulLen, uint dnDevInst, uint ulFlags);

    [DllImport("setupapi.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern IntPtr SetupDiGetClassDevs([In(), MarshalAs(UnmanagedType.LPStruct)] System.Guid ClassGuid, string Enumerator, IntPtr hwndParent, uint Flags);

    [DllImport("setupapi.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern int SetupDiEnumDeviceInfo(IntPtr DeviceInfoSet, uint MemberIndex, ref SP_DEVINFO_DATA DeviceInfoData);

    [DllImport("setupapi.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern int SetupDiEnumDeviceInterfaces(IntPtr DeviceInfoSet, [In()] ref SP_DEVINFO_DATA DeviceInfoData, [In(), MarshalAs(UnmanagedType.LPStruct)] System.Guid InterfaceClassGuid, uint MemberIndex, ref SP_DEVICE_INTERFACE_DATA DeviceInterfaceData);

    [DllImport("setupapi.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern int SetupDiGetDeviceInterfaceDetail(IntPtr DeviceInfoSet, [In()] ref SP_DEVICE_INTERFACE_DATA DeviceInterfaceData, IntPtr DeviceInterfaceDetailData, uint DeviceInterfaceDetailDataSize, out uint RequiredSize, IntPtr DeviceInfoData);

    [DllImport("setupapi.dll", CharSet = CharSet.Auto, SetLastError = true, ExactSpelling = true)]
    private static extern int SetupDiDestroyDeviceInfoList(IntPtr DeviceInfoSet);

    [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
    private static extern IntPtr CreateFile(string lpFileName, uint dwDesiredAccess, int dwShareMode, IntPtr lpSecurityAttributes, int dwCreationDisposition, int dwFlagsAndAttributes, IntPtr hTemplateFile);

    private const uint DIGCF_PRESENT = 0x00000002U;
    private const uint DIGCF_DEVICEINTERFACE = 0x00000010U;
    private const int ERROR_INSUFFICIENT_BUFFER = 122;
    private const uint CR_SUCCESS = 0;

    private const int FILE_SHARE_READ = 1;
    private const int FILE_SHARE_WRITE = 2;
    private const uint GENERIC_READ = 0x80000000;
    private const uint GENERIC_WRITE = 0x40000000;
    private const int OPEN_EXISTING = 3;

    private static readonly Guid GUID_PRINTER_INSTALL_CLASS = new Guid(0x4d36e979, 0xe325, 0x11ce, 0xbf, 0xc1, 0x08, 0x00, 0x2b, 0xe1, 0x03, 0x18);
    private static readonly Guid GUID_DEVINTERFACE_USBPRINT = new Guid(0x28d78fad, 0x5a12, 0x11D1, 0xae, 0x5b, 0x00, 0x00, 0xf8, 0x03, 0xa8, 0xc2);
    private static readonly IntPtr INVALID_HANDLE_VALUE = new IntPtr(-1);

    private static string GetPrinterRegistryInstanceID(string PrinterName) {
        if (string.IsNullOrEmpty(PrinterName)) throw new ArgumentNullException("PrinterName");

        const string key_template = @"SYSTEM\CurrentControlSet\Control\Print\Printers\{0}\PNPData";

        using (var hk = Microsoft.Win32.Registry.LocalMachine.OpenSubKey(
                            string.Format(key_template, PrinterName),
                            Microsoft.Win32.RegistryKeyPermissionCheck.Default,
                            System.Security.AccessControl.RegistryRights.QueryValues
                        )
               )
        {

            if (hk == null) throw new ArgumentOutOfRangeException("PrinterName", "This printer does not have PnP data.");

            return (string)hk.GetValue("DeviceInstanceId");
        }
    }

    private static string GetPrinterParentDeviceId(string RegistryInstanceID) {
        if (string.IsNullOrEmpty(RegistryInstanceID)) throw new ArgumentNullException("RegistryInstanceID");

        IntPtr hdi = SetupDiGetClassDevs(GUID_PRINTER_INSTALL_CLASS, RegistryInstanceID, IntPtr.Zero, DIGCF_PRESENT);
        if (hdi.Equals(INVALID_HANDLE_VALUE)) throw new System.ComponentModel.Win32Exception();

        try
        {
            SP_DEVINFO_DATA printer_data = new SP_DEVINFO_DATA();
            printer_data.cbSize = (uint)Marshal.SizeOf(typeof(SP_DEVINFO_DATA));

            if (SetupDiEnumDeviceInfo(hdi, 0, ref printer_data) == 0) throw new System.ComponentModel.Win32Exception();   // Only one device in the set

            uint cmret = 0;

            uint parent_devinst = 0;
            cmret = CM_Get_Parent(out parent_devinst, printer_data.DevInst, 0);
            if (cmret != CR_SUCCESS) throw new Exception(string.Format("Failed to get parent of the device '{0}'. Error code: 0x{1:X8}", RegistryInstanceID, cmret));

            uint parent_device_id_size = 0;
            cmret = CM_Get_Device_ID_Size(out parent_device_id_size, parent_devinst, 0);
            if (cmret != CR_SUCCESS) throw new Exception(string.Format("Failed to get size of the device ID of the parent of the device '{0}'. Error code: 0x{1:X8}", RegistryInstanceID, cmret));

            parent_device_id_size++;  // To include the null character

            string parent_device_id = new string('\0', (int)parent_device_id_size);
            cmret = CM_Get_Device_ID(parent_devinst, parent_device_id, parent_device_id_size, 0);
            if (cmret != CR_SUCCESS) throw new Exception(string.Format("Failed to get device ID of the parent of the device '{0}'. Error code: 0x{1:X8}", RegistryInstanceID, cmret));

            return parent_device_id;
        }
        finally
        {
            SetupDiDestroyDeviceInfoList(hdi);
        }
    }

    private static string GetUSBInterfacePath(string SystemDeviceInstanceID) {
        if (string.IsNullOrEmpty(SystemDeviceInstanceID)) throw new ArgumentNullException("SystemDeviceInstanceID");

        IntPtr hdi = SetupDiGetClassDevs(GUID_DEVINTERFACE_USBPRINT, SystemDeviceInstanceID, IntPtr.Zero, DIGCF_PRESENT | DIGCF_DEVICEINTERFACE);
        if (hdi.Equals(INVALID_HANDLE_VALUE)) throw new System.ComponentModel.Win32Exception();

        try
        {
            SP_DEVINFO_DATA device_data = new SP_DEVINFO_DATA();
            device_data.cbSize = (uint)Marshal.SizeOf(typeof(SP_DEVINFO_DATA));

            if (SetupDiEnumDeviceInfo(hdi, 0, ref device_data) == 0) throw new System.ComponentModel.Win32Exception();  // Only one device in the set

            SP_DEVICE_INTERFACE_DATA interface_data = new SP_DEVICE_INTERFACE_DATA();
            interface_data.cbSize = (uint)Marshal.SizeOf(typeof(SP_DEVICE_INTERFACE_DATA));

            if (SetupDiEnumDeviceInterfaces(hdi, ref device_data, GUID_DEVINTERFACE_USBPRINT, 0, ref interface_data) == 0) throw new System.ComponentModel.Win32Exception();   // Only one interface in the set

            // Get required buffer size
            uint required_size = 0;
            SetupDiGetDeviceInterfaceDetail(hdi, ref interface_data, IntPtr.Zero, 0, out required_size, IntPtr.Zero);

            int last_error_code = Marshal.GetLastWin32Error();
            if (last_error_code != ERROR_INSUFFICIENT_BUFFER) throw new System.ComponentModel.Win32Exception(last_error_code);

            IntPtr interface_detail_data = Marshal.AllocCoTaskMem((int)required_size);

            try
            {

                // FIXME, don't know how to calculate the size.
                // See https://stackoverflow.com/questions/10728644/properly-declare-sp-device-interface-detail-data-for-pinvoke

                switch (IntPtr.Size)
                {
                    case 4:
                        Marshal.WriteInt32(interface_detail_data, 4 + Marshal.SystemDefaultCharSize);
                        break;
                    case 8:
                        Marshal.WriteInt32(interface_detail_data, 8);
                        break;

                    default:
                        throw new NotSupportedException("Architecture not supported.");
                }

                if (SetupDiGetDeviceInterfaceDetail(hdi, ref interface_data, interface_detail_data, required_size, out required_size, IntPtr.Zero) == 0) throw new System.ComponentModel.Win32Exception();

                // TODO: When upgrading to .NET 4, replace that with IntPtr.Add
                return Marshal.PtrToStringAuto(new IntPtr(interface_detail_data.ToInt64() + Marshal.OffsetOf(typeof(SP_DEVICE_INTERFACE_DETAIL_DATA), "DevicePath").ToInt64()));

            }
            finally
            {
                Marshal.FreeCoTaskMem(interface_detail_data);
            }
        }
        finally
        {
            SetupDiDestroyDeviceInfoList(hdi);
        }
    }

    public static string GetUSBPath(string PrinterName) {
        return GetUSBInterfacePath(GetPrinterParentDeviceId(GetPrinterRegistryInstanceID(PrinterName)));
    }

    public static Microsoft.Win32.SafeHandles.SafeFileHandle OpenUSBPrinter(string PrinterName) {
        return new Microsoft.Win32.SafeHandles.SafeFileHandle(CreateFile(GetUSBPath(PrinterName), GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ | FILE_SHARE_WRITE, IntPtr.Zero, OPEN_EXISTING, 0, IntPtr.Zero), true);
    }

} 
```

用法：

```
using (var sh = UsbPrinterResolver.OpenUSBPrinter("Zebra Large"))
{
    using (var f = new System.IO.FileStream(sh, System.IO.FileAccess.ReadWrite))
    {
        // Read from and write to the stream f
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T17:19:54.347

试试这个（Python代码）：

```
import _winreg

HKLM = _winreg.HKEY_LOCAL_MACHINE

#------------------------------------------------------------------------------
def getDevicePath(printerName):
    key = _winreg.OpenKey(HKLM,
        r"SOFTWARE\Microsoft\Windows NT\CurrentVersion\Print\Printers\%s" \
        % printerName)

    value =_winreg.QueryValueEx(key, "Port")[0]
    assert value.startswith("USB"), \
           "Port does not start with 'USB': %s" % value

    printerPortNumber = int(value.replace(u"USB", u""))

    key = _winreg.OpenKey(HKLM,
            r"SYSTEM\CurrentControlSet\Control\DeviceClasses" \
            r"\{28d78fad-5a12-11d1-ae5b-0000f803a8c2}")

    idx = 0
    devicePath = None
    while True:
        try:
            subKeyName = _winreg.EnumKey(key, idx)
            subKey = _winreg.OpenKey(key, subKeyName)

            try:
                subSubKey = _winreg.OpenKey(subKey, r"#\Device Parameters")
                baseName = _winreg.QueryValueEx(subSubKey, "Base Name")[0]
                portNumber = _winreg.QueryValueEx(subSubKey, "Port Number")[0]
                if baseName == "USB" and portNumber == printerPortNumber:
                    devicePath = subKeyName.replace("##?#USB", r"\\?\usb")
                    break

            except WindowsError:
                continue

            finally:
                idx += 1

        except WindowsError:
            break

    return devicePath 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T22:54:26.063

试试这个......让我知道这是否有帮助......

```
 static void Main(string[] args)
    {
        ManagementObjectSearcher s = new ManagementObjectSearcher(@"Select * From Win32_PnPEntity");
        foreach (ManagementObject device in s.Get())
        {
            // Try Name, Caption and/or Description (they seem to be same most of the time).
            string Name = (string)device.GetPropertyValue("Name");

            // >>>>>>>>>>>>>>>>>>>> Query String ...
            if (Name == "O2Micro Integrated MMC/SD controller")
            {
                /*
                 class Win32_PnPEntity : CIM_LogicalDevice
                {
                  uint16   Availability;
                  string   Caption;
                  string   ClassGuid;
                  string   CompatibleID[];
                  uint32   ConfigManagerErrorCode;
                  boolean  ConfigManagerUserConfig;
                  string   CreationClassName;
                  string   Description;
                  string   DeviceID;
                  boolean  ErrorCleared;
                  string   ErrorDescription;
                  string   HardwareID[];
                  datetime InstallDate;
                  uint32   LastErrorCode;
                  string   Manufacturer;
                  string   Name;
                  string   PNPDeviceID;
                  uint16   PowerManagementCapabilities[];
                  boolean  PowerManagementSupported;
                  string   Service;
                  string   Status;
                  uint16   StatusInfo;
                  string   SystemCreationClassName;
                  string   SystemName;
                };
                */

                try
                {
                    Console.WriteLine("Name         : {0}", Name);
                    Console.WriteLine("DeviceID     : {0}", device.GetPropertyValue("DeviceID"));
                    Console.WriteLine("PNPDeviceID  : {0}", device.GetPropertyValue("PNPDeviceID"));
                    Console.WriteLine("ClassGuid    : {0}", device.GetPropertyValue("ClassGuid"));
                    Console.WriteLine("HardwareID   :\n{0}", JoinStrings(device.GetPropertyValue("HardwareID") as string[]));
                    Console.WriteLine("CompatibleID :\n{0}", JoinStrings(device.GetPropertyValue("CompatibleID") as string[]));
                }
                catch (Exception e)
                {
                    Console.WriteLine("ERROR: {0}", e.Message);
                }
            }
        }
    }

    static string JoinStrings(string[] sarray)
    {
        StringBuilder b = new StringBuilder();
        if (sarray != null)
        {
            foreach (string s in sarray)
                b.Append("        '" + s + "'\n");
        }
        return b.ToString();
    } 
```

没有要测试的 USB 打印机，但这提供了您正在寻找的信息（包括 USB 设备）...

```
Description  : O2Micro Integrated MMC/SD controller
DeviceID     : PCI\VEN_1217&DEV_8221&SUBSYS_04931028&REV_05\4&26B31A7F&0&00E5
PNPDeviceID  : PCI\VEN_1217&DEV_8221&SUBSYS_04931028&REV_05\4&26B31A7F&0&00E5
ClassGuid    : {4d36e97b-e325-11ce-bfc1-08002be10318}
HardwareID   :
        'PCI\VEN_1217&DEV_8221&SUBSYS_04931028&REV_05'
        'PCI\VEN_1217&DEV_8221&SUBSYS_04931028'
        'PCI\VEN_1217&DEV_8221&CC_080501'
        'PCI\VEN_1217&DEV_8221&CC_0805'

CompatibleID :         'PCI\VEN_1217&DEV_8221&REV_05'
        'PCI\VEN_1217&DEV_8221'
        'PCI\VEN_1217&CC_080501'
        'PCI\VEN_1217&CC_0805'
        'PCI\VEN_1217'
        'PCI\CC_080501'
        'PCI\CC_0805' 
```

此外，对于 URI，请将您要构建的 URI 中的 '\' 更改为 '#'。

所以 ..

```
usb\vid_0a5f&pid_0027\46a072900549\{28d78fad-5a12-11d1-ae5b-0000f803a8c2} 
```

变成

```
usb#vid_0a5f&pid_0027#46a072900549#{28d78fad-5a12-11d1-ae5b-0000f803a8c2} 
```

====

正如 GSerg 指出的那样，Win32_Printer 类有助于上述代码，但不提供设备 ID。

但是，如果我使用 Win32_Printer 类并打印出“PortName”属性，那么对于我安装的打印机，我可以使用 CreateFile() 并打开设备的端口/文件名。

例如：

```
Name         : Microsoft XPS Document Writer
Description  :
DeviceID     : Microsoft XPS Document Writer
PNPDeviceID  :
PortName  : XPSPort:

Name         : Fax
Description  :
DeviceID     : Fax
PNPDeviceID  :
PortName  : SHRFAX: 
```

在这里，写入“XPSPORT：”或“SHRFAX：”会将数据发送到打印机。这对您的 USB 打印机有什么作用？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T19:33:02.630

使用`WinObj`Microsoft 获取特定设备名称。[http://technet.microsoft.com/en-us/sysinternals/bb896657.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896657.aspx)。这将很快为您提供正确的设备名称，用于`CreateFile`直接写入您的 USB 打印机或直接写入带有老式并行端口输出的 USB 打印机适配器，用于自定义电路！

要打开与特定打印机关联的端口，您可能需要使用`ntcreatefile`. 使用该`EnumPrinters`函数返回`printer_info_2`包含每台打印机的端口名称的结构。然后可以使用`ntcreatefile`（NT 的内部版本`CreateFile`）打开此端口名称，此处解释：http: [//msdn.microsoft.com/en-us/library/bb432380 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/bb432380(v=vs.85).aspx)

为什么这行得通？Windows NT 文件/设备名称中有三个名称空间级别，从中检索的端口名称`EnumPrinters`只能打开，`ntcreatefile`因为它仅在 NT 名称空间中。某些设备可能有一个等效的 win32 命名空间链接，以及将它们与打印机名称匹配的迂回方式，但这很困难，因为其他人在之前的答案中已经显示了这一点。

查看工具中的`Global??`文件夹`WinObj`以显示您机器上 win32 命名空间和 NT 命名空间之间的符号链接。老式的`COM1`, `COM2`,`LPT1`等设备名称也只是简单的 windows NT 名称空间符号链接。谷歌“win32 nt 命名空间”以获得更详细的解释。（抱歉，作为新用户，我只能发布 2 个超链接。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T22:04:27.087

我不是一个真正的 C++ 人，但我真的不认为尝试从名称生成设备 ID 是要走的路。但是，您可以

1.  使用[`EnumPrinters`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162692%28v=vs.85%29.aspx)并读取[`PRINTER_INFO_2 structure`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162845%28v=vs.85%29.aspx)驱动程序名称，然后从注册表中读取驱动程序详细信息，如[本例所示](http://www.codeproject.com/Articles/6866/Enumerate-Properties-of-an-Installed-Device)。

2.  [通过可能从PRINTER INFO 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162864%28v=vs.85%29.aspx)中找出打印机详细信息并正确构造它来为自己生成名称。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/windows/hardware/ff553356(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553356(v=vs.85).aspx)。

**编辑：**您实际上可以从注册表中获取打印机的名称 + 设备实例 ID：

> HKLM\System\CurrentControlSet\Control\Print\Printers\

# php - 在mongodb的几个条件下查询一个字段

> ID：10651954
> 
> 赞同：0
> 
> 时间：2012-05-18T11:39:50.703
> 
> 标签：php, mongodb, mongodb-php

我需要进行这样的查询：

```
db.subscribers.find({LISTID: 59, {$or: [{LANG: {$in: ['English', 'Spanish']} }, 
                                        {LANG: {$nin: ['Russian']} }]}  }); 
```

它应该让所有来自 listid 59 的订阅者都知道英语或西班牙语或（并且）不知道俄语。可以有任何字段可以有多个值，而不是语言。看起来这个查询在 mongodb 控制台中有效。在这种情况下，一个字段可以在多个条件下。我有相同的字段不会在几个条件下，也许它可能是这样的：

```
$collection->find(array('LISTID' => $listId, 
                        array('$or' = array(LANG => array('$in' =>  array('English','Spanish')),

/*some other condition united with OR*/
                                                                        ))); 
```

如何在php中进行此查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T17:35:32.223

> 它应该得到来自listid 59的所有订阅者，他们会英语或西班牙语并且不会中文。

如果这是您查询的目标（我假设您的意思是“俄语”而不是“中文”），我看不出您原来的控制台查询是如何工作的：

```
db.subscribers.find({
    LISTID: 59,
    { $or: [
        { LANG: { $in: ["English", "Spanish"] } },
        { LANG: { $nin: ["Russian"] } }
    ] }
}); 
```

`$or`[根据文档](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24or)，不需要嵌套在它自己的对象中。此外，如果您正在寻找具有给定 LISTID 且知道两种语言但不会另一种语言的文档，`$and`似乎更合适：

```
db.subscribers.find({
    LISTID: 59,
    $and: [
        { LANG: { $in: ["English", "Spanish"] } },
        { LANG: { $ne: "Russian" } }
    ]
}); 
```

这将转换为 PHP：

```
$collection->find(array(
    'LISTID' => $listId,
    '$and' => array(
        array('LANG' => array('$in' => array('English', 'Spanish'))),
        array('LANG' => array('$ne' => 'Russian')),
    ),
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T09:54:37.787

```
// Find record according to specific column
$getfollower = $dbnew1->find(array('follower' => $follower),
                             array('page_name' => 1, 'id'=>1, '_id'=>0)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T15:56:24.960

我认为解决方案是这样的：

```
$number = $collection->find(array('LISTID' => $listId, 
                                  '$or' => array( array('LANG' => array('$in' => array('English', 'Spanish'))),
                                                  array('LANG' => array('$nin' => array('Russian'))),
                                                ) ))->count(); 
```

# android - ndk-stack 报错（3）：没有这个进程

> ID：10651955
> 
> 赞同：1
> 
> 时间：2012-05-18T11:39:59.553
> 
> 标签：android, android-ndk, stack, crash-dumps

我成功编译以在 NDK 上调试的库有问题。

我的应用程序崩溃并异常存在，所以我想搜索为什么会发生这种情况。

我发现 ndk-stack 可以作为一种了解崩溃位置的方法，因此首先阅读 ndk-stack 的文档，然后尝试在我的库上应用 ndk-stack 方法。

但是，当我尝试按如下方式在 cygwin 上运行 ndk-stack 时，它会给出“没有这样的进程”错误。

有人知道为什么会这样吗？

谢谢你。

```
$ ./ndk-stack -sym data/data/com.project.myproject/lib -dump ../logcat.txt
********** Crash dump: **********
Build fingerprint: 'Huawei/U8650/hwu8650:2.3.3/HuaweiU8650/C00B824_NFCFW:user/release-                keys'
pid: 16976, tid: 16989  >>> com.project.myproject <<<
signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr fffffffb
Stack frame #00  pc 810cd3b0  /data/data/com.project.myproject/lib/libndk_databases.so:     Unable to open symbol file data/da
ta/com.project.myproject/lib/libndk_databases.so. Error (3): No such process 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T23:05:59.440

-sym 参数的值应该是磁盘上包含 libndk_databases.so 文件的 obj/local/armeabi 文件夹的本地目录。

# c# - 哪一个更适合在视图状态中存储数据？

> ID：10651957
> 
> 赞同：1
> 
> 时间：2012-05-18T11:40:04.623
> 
> 标签：c#, asp.net, .net, custom-controls, viewstate

我创建了一个新的 asp.net 自定义控件。该控件通过字符串列表获取其数据。现在我想知道对我来说更好的解决方案是什么？存储`List<String>`或`string[]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:42:23.643

一般的做法是`string[]`在您使用静态数组时使用，基本上是当您不需要添加/删除元素时（仅通过索引访问）。

如果需要修改集合，请使用`List<string>`.

所以在你的情况下，使用`List<string>`:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:43:16.017

就相关而言，它几乎没有什么区别`ViewState`。两者的大小应该几乎相同。我更喜欢`List<string>`提供的额外细节`List<T>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T11:52:42.633

根据对[另一个问题的回答](https://stackoverflow.com/a/533276/215380)，最好将其存储为数组，因为列表本身会增加一些存储开销。

*在从视图状态中检索到数组后*，是否从数组中创建列表取决于您。

对于那些说“使用列表，它比数组更精细”的人——一旦集合在 ViewState 中，它是否有好的`Add`方法都没有关系。

```
public List<string> MyItemsFromViewState
{
    get { return new List<string>((string[])ViewState["MyItems"]); }
    set { ViewState["MyItems"] = value.ToArray(); }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T11:46:47.570

字符串列表更适合您放置视图并从视图状态中获取，因为字符串列表将为您提供更大的工作灵活性

# vba - 如何隐藏/显示具有特定文本样式的所有段落？

> ID：10651959
> 
> 赞同：0
> 
> 时间：2012-05-18T11:40:20.293
> 
> 标签：vba, formatting, ms-word

我试图找到一种使用 VBA 隐藏/显示某种文本样式的方法。

在 VBA 中制作这样的子的最佳方法是什么？

我要将代码添加到“隐藏/显示”按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:43:24.737

```
ThisDocument.Styles("StyleToToggle").Font.Hidden = Not ThisDocument.Styles("StyleToToggle").Font.Hidden 
```

# mercurial - 在 TeamCity 中使用 VCS 标签时的无限构建

> ID：10651965
> 
> 赞同：3
> 
> 时间：2012-05-18T11:40:36.873
> 
> 标签：mercurial, teamcity

我们刚刚在 TeamCity (7.0 (21241)) 中设置了一个项目，以便在构建成功时标记我们的 VCS。

这很好用，因为我们使用适当的标签更新了 Mercurial。但是，由于这会创建一个新的 Mercurial 修订版，它也会导致构建重新开始，因为 TeamCity 正在检测更改。

关于如何防止这种情况的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T15:44:10.017

我们设法通过设置来解决这个问题：

编辑结帐规则（在 TeamCity 版本控制设置中）以：

+：。

-:/.hgtags

（请注意，设置在两条单独的行上。）

VCS 标签模式设置为“仅成功”

# ios - 将文件上传到 ftp - iOS

> ID：10651974
> 
> 赞同：1
> 
> 时间：2012-05-18T11:41:11.203
> 
> 标签：ios, ftp

我使用[SimpleFTPSample](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html)上传文件，但我遇到了以下问题：

```
ftpStream = CFWriteStreamCreateWithFTPURL(NULL, (__bridge CFURLRef) urlOfHost);
        assert(ftpStream != NULL); 
```

它总是NULL，我不知道为什么？hostUrl 没问题，但 ftpStream 没有任何反应，我得到了断言。

网址：

```
urlOfHost = [[AppDelegate sharedAppDelegate] smartURLForString:[NSString stringWithFormat: @"ftp://wd150.1host.co.il/%@", orderKey]];

    success = (urlOfHost != nil);

    if (success) {
        // Add the last part of the file name to the end of the URL to form the final 
        // URL that we're going to put to.

        urlOfHost = CFBridgingRelease(CFURLCreateCopyAppendingPathComponent(NULL, (__bridge CFURLRef) url, (__bridge CFStringRef) [filePath lastPathComponent], false)
                                 );
        NSLog (@"%@", [urlOfHost description]);
        success = (urlOfHost != nil);
    } 
```

有人可以知道吗？

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:00:06.160

您是否将 PutController 中的这种药水添加到您的迁移程序中。以下将解决 simpeFTPsample “文件读取错误”

```
@implementation PutController{    
     uint8_t   _buffer[kSendBufferSize];    
}        
 -(uint8_t *)buffer{        
 return self->_buffer;    
} 
```

如果你没有在你的程序中插入这部分。

```
 bytesRead = [self.fileStream read:self.buffer maxLength:kSendBufferSize]; 
```

# windows - 带有 git-bash 的 Unicode (utf-8)

> ID：10651975
> 
> 赞同：61
> 
> 时间：2012-05-18T11:41:13.273
> 
> 标签：windows, bash, unicode, utf-8, git-bash

我在让 unicode 为 git-bash 工作（在 Windows 7 上）时遇到了一些麻烦。我尝试了很多事情都没有成功。虽然，我不太确定对此负责的原因是什么，所以我可能会朝着错误的方向努力。

看起来这应该是可能的，因为 cmd.exe 的编码可以使用 'chcp 65001' 更改为 unicode。

以下是我尝试过的一些事情（除了在 GUI 中查看配置选项很明显）。

1.  在“.bashrc”中设置环境变量。我想这是有道理的，因为我认为这是一个 linux 的东西。'locale' 命令不存在。

    ```
    export LC_ALL=en_US.UTF-8
    export LANG=en_US.UTF-8
    export LANGUAGE=en_US.UTF-8 
    ```

2.  从 cmd.exe 开始，使用 'chcp 65001' 将编码更改为 unicode，然后启动 git-bash。这导致我在尝试对我的 unicode 测试文件进行分类时获得权限被拒绝。但是，对没有 unicode 的文件进行分类就可以了。如图所示，退回到 cmd.exe 我仍然可以“捕获”该文件。使用我的默认编码（437），我可以在 bash 中对文件进行分类（没有权限被拒绝，但输出是捏造的）。

    ```
    S:\>chcp 65001
    Active code page: 65001
    S:\>"C:\Program Files (x86)\Git\bin\sh.exe" --login -i
    zarac@TOWELIE /z
    cat /s/unicode.txt
    cat: write error: Permission denied
    zarac@TOWELIE /z
    cat /s/nounicode.txt
    abc
    zarac@TOWELIE /z
    L /s/unicode.txt
    -rw-r--r--    1 zarac    Administ        7 May 18 10:30 /s/unicode.txt
    zarac@TOWELIE /z
    whoami
    towelie\zarac
    zarac@TOWELIE /z
    exit
    Z:\>type S:\unicode.txt
    abc£ 
    ```

3.  在启动 shell 时使用 /U 标志（它不起作用是有道理的，因为它不完全是 if-i-understand-correctly，但它与 unicode 有关，所以我尝试了它）。

    ```
    C:\Windows\SysWOW64\cmd.exe /U /C "C:\Program Files (x86)\Git\bin\sh.exe" --login -i 
    ```

4.  由于我更喜欢​​使用 Console2，因此我尝试在 [HKEY_CURRENT_USER\Console] 和 [HKEY_CURRENT_USER\Console\Git Bash] 下的 Windows 注册表中添加一个名为 CodePage 且值为 65001（十进制）的 dword 值。这似乎与设置“chcp 65001”具有相同的效果，接受它是“自动的”。（http://stackoverflow.com/questions/379240/is-there-a-windows-command-shell-that-will-display-unicode-characters）

5.  JPSoft的TCC/LE

6.  PowerCMD

7.  堆栈溢出

8.  鸭鸭

9.  ixquick / 谷歌

因此，如果可以解决该权限问题，方法 2 似乎是可行的。但是，我对几乎任何解决方案都持开放态度，尽管我更喜欢使用 Console2（主要是因为它具有漂亮的选项卡功能）。也许一种解决方案是设置一个 SSH 服务器，然后使用 Putty/Kitty 连接到它，但这是错误的！; )

PS。git-bash 有官方文档吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2016-04-18T11:22:49.150

I faced the same issue in MSYS Git 2.8.0 and as it turned out it just needed changing the configuration.

```
$ git --version

git version 2.8.0.windows.1 
```

The default configuration of Git Bash console in my system did not show Greek filenames.

```
$cd ~

$ls

AppData/
'Application Data'@
Contacts/
Cookies@
Desktop/
Documents/
Downloads/
Favorites/
Links/
'Local Settings'@
NTUSER.DAT
.
.
.
''$'\316\244\316\261'' '$'\316\255\316\263\316\263\317\201\316\261\317\206\316\254'' '$'\316\274\316\277\317\205'@ 
```

The last line should display "Τα έγγραφά μου", the greek translation of "My Documents". In order to fix it I followed the below steps:

1.  Check your existing locale configuration

    ```
    $locale

    LANG=en
    LC_CTYPE="C"
    LC_NUMERIC="C"
    LC_TIME="C"
    LC_COLLATE="C"
    LC_MONETARY="C"
    LC_MESSAGES="C"
    LC_ALL= 
    ```

    As shown above, in my case it was not UTF-8

2.  Change the locale to a UTF-8 encoding. Click the icon on the left side of MINGW title bar, select "Options" and in the "Text" category choose "UTF-8" Character set. You should also choose a unicode font, such as the default "Lucida Console". My configuration looks as following: [![MinGW locale configuration](../Images/4b2c51ecedde8b1085338aeb5a25d3ad.png)](https://i.stack.imgur.com/vkffd.png)

3.  Change the language for the current window (no need to do this on future windows, as they will be created with the settings of step 2)

    ```
     $ LANG='C.UTF-8' 
    ```

4.  The ls command should now display properly

    ```
    AppData/
    'Application Data'@
    Contacts/
    Cookies@
    Desktop/
    Documents/
    Downloads/
    Favorites/
    Links/
    'Local Settings'@
    NTUSER.DAT
    .
    .
    .
    'Τα έγγραφά μου'@ 
    ```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-05-22T21:08:27.373

Found this answer elsewhere:

`chcp.com 65001`

[Git bash chcp windows7 encoding issue](https://stackoverflow.com/questions/29279304/git-bash-chcp-windows7-encoding-issue)

That's what actually solved it for me.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-18T15:58:30.057

正如 CharlesB 在评论中所说，msysgit 1.7.10 可以正确处理 unicode。还有一些问题，但我可以确认更新确实解决了我遇到的问题。

请参阅：[https ://github.com/msysgit/msysgit/wiki/Git-for-Windows-Unicode-Support](https://github.com/msysgit/msysgit/wiki/Git-for-Windows-Unicode-Support)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-08-02T19:27:58.157

检查 Git 2.1（2014 年 8 月）问题是否仍然存在。
请参阅Karsten Blees的[提交 617ce96](https://github.com/git/git/commit/617ce965aa3e5d44d0292c9094ee692f161a55d0)或[提交](https://github.com/git/git/commit/1c950a594c40db7a946616cbc6cc5f9e25926a20)[1c950a5 ( `kblees`)](https://github.com/kblees)

### Win32：支持 Unicode 控制台输出

> `WriteConsoleW`似乎是可靠地将 unicode 打印到控制台的唯一方法（没有奇怪的代码页转换）。
> 
> 还重定向`vfprintf`到`winansi.c`版本。

### Win32：添加Unicode转换功能

> 添加 Unicode 转换函数以在 Windows 原生 UTF-16LE 编码和 UTF-8 之间进行转换。
> 
> 为了支持具有传统编码文件名的存储库，UTF-8 到 UTF-16 转换功能会尝试创建有效的、唯一的文件名，即使是无效的 UTF-8 字节序列，以便可以无错误地签出这些存储库。

它很可能是已经集成到 msysgit 中的东西的一个端口，但至少这意味着 Git 的 Windows 版本不必为了包含这些改进而从主要的 Git 存储库源代码中分离/修补。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-08-24T21:53:00.953

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-11-02T11:39:23.227

For me the solution was just to enable unicode support.
Docs: [https://github.com/msysgit/msysgit/wiki/Git-for-Windows-Unicode-Support](https://github.com/msysgit/msysgit/wiki/Git-for-Windows-Unicode-Support)

> git config --global core.quotepath off

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-10-30T05:03:42.270

I found the following steps helpful:

1.  Run `Git Bash`
2.  Right-click and select `Options...`
3.  Select `Text` group at the left
4.  Change Font to `Consolas`
5.  Select `C` as `Locale` and `UTF-8` as `Character set`
6.  Apply and Save.

[![Git Bash Options](../Images/40971c756d6fe11253a644db10fb6028.png)](https://i.stack.imgur.com/MlUPn.png)

7.  In the terminal execute:

```
git config --global core.quotepath false 
```

8.  In rare cases, execute in the terminal as well:

```
export LANG='C.UTF-8' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-18T20:26:13.050

> The problem with chcp 65001 is that there are bugs in the C runtime (MSVCRT) that make stdio calls return inconsistent results when run under code page 65001\.

That should be better with Git 2.23 (Q3 2019)

See [commit 090d1e8](https://github.com/git/git/commit/090d1e84771bb4a310e3fe8291ec71b0ddb03d4f) (03 Jul 2019) by [Karsten Blees (`kblees`)](https://github.com/kblees).
^((Merged by [Junio C Hamano -- `gitster` --](https://github.com/gitster) in [commit 0328db0](https://github.com/git/git/commit/0328db0c2b22e9ef83f1e66cad45a330935ddb87), 11 Jul 2019))

gettext: always use UTF-8 on native Windows

> On native Windows, Git exclusively uses UTF-8 for console output (both with MinTTY and native Win32 Console).
> 
> Gettext uses `setlocale()` to determine the output encoding for translated text, **however, MSVCRT's `setlocale()` does not support UTF-8\. As a result, translated text is encoded in system encoding (as per `GetAPC()`), and non-ASCII chars are mangled in console output**.
> 
> Side note: There is actually a code page for UTF-8: 65001.
> In practice, it does not work as expected at least on Windows 7, though, so we cannot use it in Git. Besides, if we overrode the code page, any process spawned from Git would inherit that code page (as opposed to the code page configured for the current user), which would quite possibly break e.g. diff or merge helpers. **So we really cannot override the code page.**
> 
> In `init_gettext_charset()`, Git calls gettext's `bind_textdomain_codeset()` with the character set obtained via `locale_charset()`; Let's override that latter function to force the encoding to UTF-8 on native Windows.
> 
> In Git for Windows' SDK, there is a `libcharset.h` and therefore we define `HAVE_LIBCHARSET_H` in the MINGW-specific section in `config.mak.uname`, therefore we need to add the override before that conditionally-compiled code block.
> 
> Rather than simply defining `locale_charset()` to return the string `"UTF-8"`, though, we are careful not to break `LC_ALL=C`: the `ab/no-kwset` patch series, for example, needs to have a way to prevent Git from expecting UTF-8-encoded input.

And:

See [commit 697bdd2](https://github.com/git/git/commit/697bdd22b887a0778489814e44dcec850aa82ad0) (04 Jul 2019), and [commit 9423885](https://github.com/git/git/commit/94238859b9809afc806919cb7022a45cdc8e6748), [commit 39a98e9](https://github.com/git/git/commit/39a98e9b68b84e40e759a0805758ec4726c9299e) (27 Jun 2019) by [Johannes Schindelin (`dscho`)](https://github.com/dscho).
^((Merged by [Junio C Hamano -- `gitster` --](https://github.com/gitster) in [commit 0a2ff7c](https://github.com/git/git/commit/0a2ff7c6b5ec5e4301a9cfb3c0dd26590d70ad7a), 11 Jul 2019))

> ## `mingw`: use Unicode functions explicitly
> 
> Many Win32 API functions actually exist in two variants: one with the `A` suffix that takes ANSI parameters (`char *` or `const char *`) and one with the `W` suffix that takes Unicode parameters (`wchar_t *` or `const wchar_t *`).
> 
> The ANSI variant assumes that the strings are encoded according to whatever is the current locale.
> This is not what Git wants to use on Windows: we assume that `char *` variables point to strings encoded in UTF-8.
> 
> **There is a pseudo UTF-8 locale on Windows, but it does not work as one might expect. In addition, if we overrode the user's locale, that would modify the behavior of programs spawned by Git (such as editors, difftools, etc), therefore we cannot use that pseudo locale.**
> 
> Further, it is actually highly encouraged to use the Unicode versions instead of the ANSI versions, so let's do precisely that.
> 
> Note: when calling the Win32 API functions *without* any suffix, it depends whether the `UNICODE` constant is defined before the relevant headers are #include'd.
> Without that constant, the ANSI variants are used.
> Let's be explicit and avoid that ambiguity.

# ios - iOS 将章节标题锚定在分组表格样式中

> ID：10651977
> 
> 赞同：0
> 
> 时间：2012-05-18T11:41:19.013
> 
> 标签：ios, uitableview

我正在使用分组表视图在视图控制器上显示项目。

我想锚定该部分的标题，就像它发生在平面样式表中一样。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:57:29.833

啊，我知道你的意思，我的回答是否定的，你认为你不能以简单的方式做到这一点。您可以通过使用 custom`UITableViewCells`和 custom`UIView's`作为部分标题的一些变通方法来做到这一点。我想这样你就可以做到这一点。

# ruby-on-rails-3 - mongodb中的数据库架构与ruby on rails

> ID：10651978
> 
> 赞同：0
> 
> 时间：2012-05-18T11:41:19.367
> 
> 标签：ruby-on-rails-3, database-design, mongodb

我正在使用 MongoDB 和 Ruby on rails 来构建 Web 服务。我有大约 10GB 的数据。数据中的集合（类似于 RDBMS 中的表）按国家/地区的州划分，集合中的字段因集合而异。我有 60 个收藏。如果我在使用 nosql 数据库时将 2-3 个集合与不同的字段结合起来，我不会遇到问题。

我的问题如果没有合并我的收藏，那么我的 rails 应用程序中将有 60 个模型。如果我将它们全部结合起来，那么我将拥有一个非常大的集合并且性能会降低。由于我的服务器资源有限，最佳选择是什么。我将根据 3-4 个不同的参数查询我的数据库。例如，我可能只搜索特定区域，或者可能会搜索某个人拥有的特定许可证类型，或者有时两者兼而有之。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:06:53.783

正如 Sergio 所说，在您查询的 3-4 个字段上包含索引的大型集合可能效果最好。

但是，您不必拥有 60 个模型，只需使用动态字段即可。这是使用 MongoDB 的主要好处之一。[你可以在这里](http://mongoid.org/docs/documents/dynamic.html)阅读 mongoid 。基本上，只需定义集合中所有文档共有的字段，然后根据需要设置和获取动态字段。

这里的一个问题是方法（“。”，点）属性访问器在设置该属性之前不起作用。因此，在您通过 model[:attribute] = "blah" 或 model.attribute = "blah" 设置一个之前，您不能说 model.attribute。

# php - 使用 ajax codeigniter 上传文件

> ID：10651979
> 
> 赞同：2
> 
> 时间：2012-05-18T11:41:25.873
> 
> 标签：php, jquery, codeigniter, file-upload

我允许用户对一篇文章发表评论，但我也想为用户添加`upload photos`通过这样的能力，`ajax`所以不会`refresh`发生......

我有`searched` `many` `plugins`，但他们中的大多数人对我想要实现的目标感到不知所措......

我有用户界面和`backend`......我只想知道如何制作`pass from the client to the server`我可以检​​查/存储它的文件等......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:53:10.160

感谢[http://malsup.com/jquery/form/#file-upload](http://malsup.com/jquery/form/#file-upload)问题解决了。

# php - 如何为 Facebook 中的用户签到设置实时更新订阅

> ID：10651982
> 
> 赞同：1
> 
> 时间：2012-05-18T11:41:42.723
> 
> 标签：php, facebook, facebook-php-sdk

自 2012 年 3 月起，facebook user_ckechins 权限字段被替换为 user_status。使用 facebook API 订阅对象 "user" 字段 "checkins" 时，您将成功订阅，但不会收到您的端点 url 的任何更新！！！

您必须订阅对象“用户”字段“状态”才能接收实时更新检查，尽管这在[facebook 实时更新 api](https://developers.facebook.com/docs/reference/api/realtime/)中没有记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T22:50:15.300

多年来，RTU 发生了变化。当前（2013 年 11 月）获取用户签到和状态消息的方法是在 RTU 订阅中启用“提要”。

# c# - 如何根据窗口大小缩放形状？

> ID：10651984
> 
> 赞同：0
> 
> 时间：2012-05-18T11:41:44.700
> 
> 标签：c#, wpf, scale

我在画布上有两个形状。要求是，当用户改变窗口大小时，这两个形状的大小也必须改变。

认为有一个正方形和一个三角形在正方形的顶部。我用这两种形状创建了一个简单的房子。问题是，当我根据窗户大小调整这些形状的大小时，这两个形状之间会形成间隙，它看起来不再像房子了:)

任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:46:56.973

您可以使用 Stretch-"Fill" 来使用路径中的所有可用空间，或者使用 ViewBox。

# views - Couchbase 视图结果与 reduce 函数不同

> ID：10651988
> 
> 赞同：1
> 
> 时间：2012-05-18T11:42:02.660
> 
> 标签：views, couchdb, mapreduce, couchbase

```
function (doc) {
  if(doc.jsonType == 'cart') {
    if((Date.parse(doc.updated_at) + (15 * 60000)) >= Date.now()) {
      for(item in doc.items) {
        emit(item, doc.items[item].quantity);
      }
    }
  }
} 
```

使用此功能，我可以获取在过去 15 分钟内更新的文档，例如 2，数量为 1 和 2，总和应为 3。但是，当我使用内置 reduce 函数 _sum 时，我得到 32（所有现有行的总和）。

我多次更新了视图，但仍然没有得到正确的结果。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T06:18:10.493

使用`Date.now()`in map（和 reduce）函数是错误的。Maps/reduce 结果保存在磁盘上，以便在查询时快速检索。您获得的价值`Date.now()`是地图构建时的价值，而不是查询时的价值。[您可以在wiki](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Restrictions_on_map_and_reduce_functions)和[The Definitive Guide](http://guide.couchdb.org/draft/views.html)上找到一些关于 CochDB 地图如何工作的介绍性材料。

# ios - 保存时 didFinishPickingMediaWithInfo 重复文件

> ID：10651996
> 
> 赞同：1
> 
> 时间：2012-05-18T11:42:21.413
> 
> 标签：ios, uiimagepickercontroller

我有一个简单的应用程序，您可以从照片库中选择现有视频，或者您可以使用 UIImagePickerController 拍摄视频。

我添加了以下代码，当我用相机制作新视频时，如果将来需要，我可以将其保存在照片库中。

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

// Get the selected Video.
NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];
// Convert to Video data.
NSData *imageData = [NSData dataWithContentsOfURL:videoURL];

// Save Video to Photo Album
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
NSURL *recordedVideoURL= [info objectForKey:UIImagePickerControllerMediaURL];
if ([library videoAtPathIsCompatibleWithSavedPhotosAlbum:recordedVideoURL]) {
    [library writeVideoAtPathToSavedPhotosAlbum:recordedVideoURL
                                completionBlock:^(NSURL *assetURL, NSError *error){}
     ];
} 
[library release];

[picker dismissModalViewControllerAnimated:NO];

} 
```

现在我的问题是当我从照片库中选择一个视频时，这个相同的视频被复制，因为这个代码总是保存一个新视频。

是否可以检测您是否从照片库中选择了视频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:29:56.360

在保存视频之前，请检查 imagePickerController 的**sourceType**。仅当 sourceType 为**UIImagePickerControllerSourceTypeCamera**时才保存视频。

```
if (picker.sourceType == UIImagePickerControllerSourceTypeCamera) {
    // Save the video 
} 
```

# javascript - Sys.UI.DomElment.getLocation 在 Google Chrome 中返回的值与在其他浏览器中不同

> ID：10651998
> 
> 赞同：0
> 
> 时间：2012-05-18T11:42:35.630
> 
> 标签：javascript, html, dom, cross-browser

我在谷歌浏览器中的画布元素遇到了一些问题。

我有一个上面有多个矩形的画布。我跟踪名为目标的数组中的矩形。每次鼠标在画布上移动时，我都会调用悬停函数来检查鼠标是否位于其中一个矩形的顶部。

如果它在一个矩形的顶部，矩形应该用纯色填充。

看看这个 javascript 行：

```
function hover() {
    var location = Sys.UI.DomElement.getLocation(canvasElement);

    // loop through all rectangles in the targets array and caluclate if the mouse is on top op any of these rectangles.
} 
```

这在 IE 和 Firefox 中运行良好。

但是在谷歌浏览器中，当我将鼠标悬停在与矩形相同尺寸的矩形上方时，矩形会被填充。

因为它总是在矩形实际位置上方的相同距离，所以我很快发现**Sys.UI.DomElement getLocation**方法在 Google Chrome 中返回不同的值。

结果如下：

火狐：

```
var location = Sys.UI.DomElement.getLocation(canvasElement);

location.x = 545
location.y = 297 
```

丁目：

```
var location = Sys.UI.DomElement.getLocation(canvasElement);

location.x = 544
location.y = 94 
```

所以水平方向有1个像素，垂直方向有200多个像素。

现在我知道当我将鼠标悬停在矩形上方的区域时，我的矩形是如何被填充的。

但是我当然想知道我应该怎么做才能避免使用谷歌浏览器的这种行为。

你有什么主意吗？

很感谢任何形式的帮助。

谢谢！

* * *

更多信息：

MSDN：[链接](http://msdn.microsoft.com/en-us/library/bb397695.aspx)

> Sys.UI.DomElement getLocation 方法
> 
> 获取 DOM 元素相对于所有者框架或窗口左上角的绝对位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:33:01.623

使用 JQuery 找到了另一个解决方案：

var location = $(canvasElement).offset();

然后只需使用 location.left 和 location.top

# c - 如何检查 C 字符串中是否存在单个字符？

> ID：10651999
> 
> 赞同：17
> 
> 时间：2012-05-18T11:42:35.860
> 
> 标签：c, string, char

我想检查一个字符是否在 C 字符串中。该字符`'|'` 用于 Linux 中的管道（实际上，我也想检查`'<'`, `'>'`, `'>>'`, `'&'`）。

在 Java 中，我可以这样做：

```
String.indexOf() 
```

但是我怎样才能在 C 中做到这一点，而不遍历整个字符串（一个`char*`字符串）？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-18T11:44:49.917

如果您需要搜索一个字符，您可以使用该`strchr`功能，如下所示：

```
char* pPosition = strchr(pText, '|'); 
```

`pPosition``NULL`如果没有找到给定的字符。例如：

```
puts(strchr("field1|field2", '|')); 
```

将输出：“|field2”。请注意，`strchr`将执行*向前*搜索，要向*后*搜索，您可以使用`strrchr`. 现在想象一下（只是提供一个例子）你有一个这样的字符串：“变量：值|条件”。您可以使用以下方法提取*值*字段：

```
char* pValue = strrchr(strchr(pExpression, '|'), ':') + 1; 
```

如果您想要的是字符串中字符的*索引，请查看 SO 上的*[这篇文章](https://stackoverflow.com/questions/1479386/is-there-a-function-in-c-that-will-return-the-index-of-a-char-in-a-char-array)。您可能也需要类似的东西`IndexOfAny()`，[这里](https://stackoverflow.com/questions/4824/string-indexof-function-in-c)是另一篇关于 SO 的帖子`strnspn`。

相反，如果您正在寻找一个字符串，您可以使用该`strstr`函数，如下所示：

```
char* pPosition = strstr(pText, "text to find"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T11:45:56.560

[`strchr`](http://man.openbsd.org/strchr)是你的朋友。

```
char *strchr(const char *s, int c); 
```

> 该`strchr`函数在 指向的字符串中定位`c`(转换为 a ) 的第一次出现。`char``s`
> 
> 该`strchr`函数返回一个指向所定位字符的指针，如果该字符不在字符串中，则返回一个空指针。

当然，在最坏的情况下，该函数必须遍历整个字符串（Java 函数可能会这样做）。