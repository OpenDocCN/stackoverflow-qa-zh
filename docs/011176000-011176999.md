# StackOverflow 问答 11176000-11176999

# iphone - AVCaptureConnection Freezes my app on the second call

> ID：11176000
> 
> 赞同：1
> 
> 时间：2012-06-24T08:21:38.450
> 
> 标签：iphone, ios

this is my code that freezes my app

```
 AVCaptureConnection *videoConnection = [videoOutput connectionWithMediaType:AVMediaTypeVideo];

if ([videoConnection isVideoOrientationSupported] )
{
    [videoConnection setVideoOrientation:AVCaptureVideoOrientationPortrait];

} 
```

this is my videoOutput init

```
// Setup video capture
videoInput = [[AVCaptureDeviceInput deviceInputWithDevice: front? frontVideoDevice: rearVideoDevice error: &error] retain];
videoOutput = [[AVCaptureVideoDataOutput alloc] init];
[videoOutput setAlwaysDiscardsLateVideoFrames: YES];
// Set the video output to store frame in BGRA (It is supposed to be faster)
NSString* key = (NSString*)kCVPixelBufferPixelFormatTypeKey; 
NSNumber* value = [NSNumber numberWithUnsignedInt:kCVPixelFormatType_32BGRA]; 
NSDictionary* videoSettings = [NSDictionary dictionaryWithObject:value forKey:key]; 
[videoOutput setVideoSettings:videoSettings]; 
```

when I initialize the session in the second time my app stop responding but if i remove the code of the avcaptureconnection everything is fine

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:27:29.780

……！

我 `[session startRunning]` 之前打过电话

```
AVCaptureConnection *videoConnection = [videoOutput connectionWithMediaType:AVMediaTypeVideo];

if ([videoConnection isVideoOrientationSupported] )
{
    [videoConnection setVideoOrientation:AVCaptureVideoOrientationPortrait];

} 
```

我的错 ：）

# scala - Why is scala.math.PartialOrdering.lteq abstract, rather than defined in terms of .tryCompare?

> ID：11176003
> 
> 赞同：8
> 
> 时间：2012-06-24T08:21:51.020
> 
> 标签：scala, partial-ordering

It seems that [`scala.math.PartialOrdering.lteq`](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/math/PartialOrdering.scala#L58) must always be defined as (or at least, give the same result as):

```
override def lteq(x: Pattern, y: Pattern) = {
    tryCompare(x, y).map(_ <= 0).getOrElse(false)
} 
```

Is there some reason this implementation isn't given in the `scala.math.PartialOrdering` trait?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T20:33:39.047

我的猜测是鼓励编写更有效`lteq`的方法，因为所有其他方法都回退到`lteq`. 所以你不想创建一个`Option`，然后映射它。我宁愿反问——为什么`tryCompare`默认不实现，例如：

```
def tryCompare(x: T, y: T) = {
  val p1 = lteq(x, y)
  val p2 = lteq(y, x)
  if (p1) {
    if(p2) Some(0) else Some(-1)
  } else if (p2) Some(1) else None
} 
```

...并且您在实现时不需要编写丑陋的`override`修饰符`lteq`.

据我所知，`tryCompare`在整个 Scala 标准库主体中从未使用过，所以也许它只是一个“剩余的”......

# android - 网络数据包连接意图

> ID：11176006
> 
> 赞同：2
> 
> 时间：2012-06-24T08:21:58.737
> 
> 标签：android, broadcastreceiver, connectivity

我正在编写一个可以启用和禁用网络数据包连接的 Android 应用程序。我还使用一个广播接收器来检查网络数据包连接。我已经注册了广播接收器并在清单文件中提供了所需的权限。但是当我运行这个应用程序时，它会改变连接状态，然后它就会崩溃。但是当我不包括这个广播接收器时，它工作正常。我看不到任何可以提供一些线索的日志。

这是我的广播接收器代码。

```
<?xml version="1.0" encoding="utf-8"?>
  <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.rakesh.simplewidget"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <!-- Permissions -->
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
    <uses-permission android:name="android.permission.MODIFY_PHONE_STATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".SimpleWidgetExampleActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <!--
        <receiver
            android:name=".ExampleAppWidgetProvider"
            android:label="Widget ErrorBuster" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/widget1_info" />
        </receiver>
        -->
        <receiver android:name=".ConnectivityReceiver" >
            <intent-filter>
                <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
            </intent-filter>
        </receiver>
    </application>
</manifest> 
```

我的广播接收器类如下。

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.util.Log;

public class ConnectivityReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        NetworkInfo info = (NetworkInfo)intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
        if(info.getType() == ConnectivityManager.TYPE_MOBILE){ 
            if(info.isConnectedOrConnecting()){
                Log.e("RK","Mobile data is connected");
            }else{
                Log.e("RK","Mobile data is disconnected");
            }
        }
    }

} 
```

我的主要活动文件。

```
package com.rakesh.simplewidget;

import java.lang.reflect.Field;
import java.lang.reflect.Method;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.graphics.Color;
import android.net.ConnectivityManager;
import android.os.Bundle;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class SimpleWidgetExampleActivity extends Activity {
    private Button btNetworkSetting;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        btNetworkSetting = (Button)findViewById(R.id.btNetworkSetting);
        if(checkConnectivityState(getApplicationContext())){
            btNetworkSetting.setBackgroundColor(Color.GREEN);
        }else{
            btNetworkSetting.setBackgroundColor(Color.GRAY);
        }
    }

    public void openNetworkSetting(View view){

        Method dataConnSwitchmethod;
        Class telephonyManagerClass;
        Object ITelephonyStub;
        Class ITelephonyClass;
        Context context = view.getContext();
        boolean enabled = !checkConnectivityState(context);
        final ConnectivityManager conman = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);

        try{
            final Class conmanClass = Class.forName(conman.getClass().getName());
            final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
            iConnectivityManagerField.setAccessible(true);
            final Object iConnectivityManager = iConnectivityManagerField.get(conman);
            final Class iConnectivityManagerClass = Class.forName(iConnectivityManager.getClass().getName());
            final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
            setMobileDataEnabledMethod.setAccessible(true);

            setMobileDataEnabledMethod.invoke(iConnectivityManager, enabled);

            if(enabled){
                Toast.makeText(view.getContext(), "Enabled Network Data", Toast.LENGTH_LONG).show();
                view.setBackgroundColor(Color.GREEN);
            }
            else{
                Toast.makeText(view.getContext(), "Disabled Network Data", Toast.LENGTH_LONG).show();
                view.setBackgroundColor(Color.LTGRAY);
            }
        }catch(Exception e){
            Log.e("Error", "some error");
            Toast.makeText(view.getContext(), "It didn't work", Toast.LENGTH_LONG).show();
        }
    }

    private boolean checkConnectivityState(Context context){
        final TelephonyManager telephonyManager = (TelephonyManager) context
                .getSystemService(Context.TELEPHONY_SERVICE);
        ConnectivityManager af ;
        return telephonyManager.getDataState() == TelephonyManager.DATA_CONNECTED;

    }
} 
```

日志文件：

```
java.lang.RuntimeException: Unable to instantiate receiver com.rakesh.simplewidget.ConnectivityReceiver: java.lang.ClassNotFoundException: com.rakesh.simplewidget.ConnectivityReceiver in loader dalvik.system.PathClassLoader[/data/app/com.rakesh.simplewidget-2.apk]
E/AndroidRuntime(26094):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:1777)
E/AndroidRuntime(26094):    at android.app.ActivityThread.access$2400(ActivityThread.java:117)
E/AndroidRuntime(26094):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:985)
E/AndroidRuntime(26094):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(26094):    at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime(26094):    at android.app.ActivityThread.main(ActivityThread.java:3691)
E/AndroidRuntime(26094):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(26094):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(26094):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
E/AndroidRuntime(26094):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
E/AndroidRuntime(26094):    at dalvik.system.NativeStart.main(Native Method) 
```

似乎 Android 无法识别文件广播接收器类。知道为什么我会收到此错误吗？

PS：关于Android环境和平台的一些信息。- Android API 10\. - 在具有 android 2.3.6 的三星 Galaxy II 上运行

编辑：

我的广播接收器文件 ConnectivityReceiver.java 存在于默认包中，Android 无法识别它。Android 正在当前包中寻找这个文件，即`com.rakesh.simplewidget;`我刚刚将connectivityReciever.java 文件移动到`com.rakesh.simplewidget`包中，问题就解决了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:10:24.733

我的广播接收器文件`ConnectivityReceiver.java`错误地存在于默认包中。Android 无法识别此文件，因为它正在`ConnectivityReceiver`当前包中搜索。IE`com.rakesh.simplewidget;`

这是一个简单的不引人注意的错误，导致我调试了半个小时。

感谢你们花时间阅读我的问题并提供您的意见。

更新了主帖。

# google-maps-api-3 - What units are allowed in google.maps.Size?

> ID：11176007
> 
> 赞同：7
> 
> 时间：2012-06-24T08:22:11.257
> 
> 标签：google-maps-api-3

The documentation for the google.maps.Size function says:

```
Size(width:number, height:number, widthUnit?:string, heightUnit?:string) 
```

The default for the widthUnit and heightUnit arguments seems to be pixels. The function works properly if it is called as new google.maps.Size(30,30,"px","px")

I would like to know what other unit types are supported.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T04:09:07.533

安德鲁是正确的。[google.maps.Size](https://developers.google.com/maps/documentation/javascript/reference#Size)也支持特定浏览器支持的所有[CSS 长度单位](http://www.w3.org/TR/css3-values/#lengths)。对于它的许多用途，这是因为您通过连接数字和单位获得的字符串通过将其设置为 CSS 宽度、高度等属性的值直接用于样式设置（在其他情况下，地图 API 会计算这些大小如果它想要（例如）使用绝对单位或绘制到画布上，就会在这种情况下）。

如果您想使用相对长度，请记住它们将相对于它们在级联中的位置进行解释。根据您要设置其大小的对象，最终结果可能不是您所期望的。由于 Maps API 将您的内容放置在它创建的 DOM 树中的多个位置，因此大小可能取决于无法保证在 API 版本之间保持稳定的实现细节。类似地，'%' 通常作为一个单位工作（即使它在技术上不是 CSS 长度类型），但它最终可能会定义你相对于你无法控制的 DOM 元素的大小。至少，仔细测试！

# jpa - 阿瓦杰伊比恩。多对多延迟 BeanSet

> ID：11176013
> 
> 赞同：4
> 
> 时间：2012-06-24T08:23:52.170
> 
> 标签：jpa, playframework, many-to-many, playframework-2.0, ebean

我正在编写小应用程序，使用使用 Ebean 作为 ORM 的 Play Framework 2.0。所以我需要 User 类和 UserGroup 类之间的多对多关系。这是一些代码：

```
@Entity
public class User extends Domain {

    @Id
    public Long id;
    public String name;

    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    public Set<UserGroup> groups = new HashSet();
}

@Entity
public class UserGroup extends Domain {

    @Id
    public Long id;     
    public String name;

    @ManyToMany(mappedBy="groups")
    public Set<User> users = new HashSet();
} 
```

数据库方案生成器为带有中间表的代码生成良好的方案，并且一切正常，直到我使用多对多。

所以我在一个请求中添加组：

```
user.groups.add(UserGroup.find.byId(groupId));
user.update(); 
```

并尝试在另一个中将它们输出到 System.out：

```
System.out.println(user.groups); 
```

这会返回：

> 延迟的 BeanSet

快速搜索显示 BeanSet 是来自 Ebean 的延迟加载容器。但似乎它不能以正确的方式工作，或者我错过了一些重要的事情。

那么对我做错了什么有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T08:54:14.927

您需要手动保存关联

```
user.groups.add(UserGroup.find.byId(groupId));
user.saveManyToManyAssociations("groups");
user.update(); 
```

# mongodb - mongodb 修复/紧凑/索引无限类似行为

> ID：11176014
> 
> 赞同：1
> 
> 时间：2012-06-24T08:24:04.777
> 
> 标签：mongodb, indexing, repair

从头开始，

我收藏了大约 5100 万条记录。因此，当进度百分比开始增加到 100% 以上（完成 800%）时，我对其中一个字段进行了索引，所以我取消了这个，并认为我必须有一些数据库损坏

所以我对这些集合进行了验证，发现它们没问题。尽管如此，我还是尝试了一个紧凑型和修复型，但我发现它在临时文件夹（用于修复）或我的 db 文件夹中用于紧凑型

我曾经有 'collection.0' 到 'collection.14' 但在 14 小时后检查它我发现它计数到 'collection.64' 并且不得不取消它。从我以前的经验来看，这是正常行为，这是非常不寻常的。

以前数据库大小是 20 gig，在这个紧凑的过程中它增加到超过 100 gb。

可能出了什么问题，我将如何修复我的数据库？

从控制台每个人都会有

```
Allocating new datafile ... Size: 2047MB, took 107 seconds 
```

（对于 15 到 64 个附加文件中的每一个）

# visual-studio-2010 - Visual Studio 2010 无法启动

> ID：11176021
> 
> 赞同：2
> 
> 时间：2012-06-24T08:24:54.453
> 
> 标签：visual-studio-2010, visual-studio, crash

我的 PC 中的 Visual Studio 2010 有问题，当我尝试启动它时，我会看到这个异常：

> devnev.exe - 应用程序错误
> 
> 异常未知软件异常 (0xe0434352) 发生在位置 0x7543d36f 的应用程序中

我知道这个例外是因为我当前的用户设置，因为当我创建另一个帐户并测试 Visual Studio 时，它运行良好。所以我试图从注册表中删除所有当前用户配置文件，所以我从这些键中删除了条目：

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\FileMRUList
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\ProjectMRUList
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\NewProjectDialog\MRUSettingsLocalProjectLocationEntries
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\NewProjectDialog\MRUSettingsRecentlyUsedTemplates 
```

但仍然无法正常工作（有类似的例外）。

regedit 中是否有 VS 2010 的其他用户设置？除了 regedit 之外还有其他地方可以保存用户设置吗？

[PS：我的操作系统是 Windows 7。]

# php - 重定向功能在实时服务器上不起作用。但是在本地主机上工作

> ID：11176032
> 
> 赞同：0
> 
> 时间：2012-06-24T08:27:07.367
> 
> 标签：php

这就是功能。这是在本地主机上工作的。但不能在实时服务器中工作。

```
function redirect_to($location = NULL){
    if($location != NULL){
        header("Location: {$location}");
        exit;
    } 
}

if(mysql_affected_rows() == 1){
    //success

    redirect_to("index.php");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T08:34:44.113

不要为参数定义默认值然后检查它，只是不要一开始就给它一个默认值。同时删除`Location:`标题中的括号。

```
function redirect_to($location){
    header("Location: $location");
    exit;
}

if(mysql_affected_rows() == 1){
    //success

    redirect_to("index.php");
} 
```

# jquery - jQuery Selector 选择动态容器内的每个图像和源？

> ID：11176038
> 
> 赞同：1
> 
> 时间：2012-06-24T08:28:05.350
> 
> 标签：jquery, html, selector

我正在尝试检测容器内的所有图像及其路径（Srcs）`dynamic`。`dynamic`容器意味着容器模式将在数组中（动态）。

像：

```
var containers = new Array(
                            "div#menu",
                            "div#elem1",
                            "p.footernav"
                      ); 
```

将`containers`动态填充。原来以前不为人知。
然后我将循环抓取这些区域：

```
for (var i=0; i< containers.length; i++) {
    var html_source = $(containers[i]).html();
    ?
} 
```

到目前为止，我得到的只是这些。
那么我如何检测每个返回的内部的`IMAGES`和？`SRC``<img src="..." />``var html_source`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T08:29:32.840

```
var html_source = $(containers[i]).html();

// here you need to wrap html_source within
// $(), because html_source is string
// not jQuery object

$(html_source).find('img').map(function(index, el) {
  return el.src;
}).toArray(); 
```

**[演示](http://jsfiddle.net/GBZWs/5/)**

# php - LyricAPI - 如何获得完整的歌词？

> ID：11176039
> 
> 赞同：1
> 
> 时间：2012-06-24T08:28:07.147
> 
> 标签：php, soap

我想使用 Wikia 上托管的 LyricAPI 来获取歌曲的歌词。但作为回应，我只得到部分歌词：

> 等待即将到来的风暴，看太阳中的迹象混沌在我们身上产卵！时间的箭头指向我们所有人 哦，随着回忆越来越响，疯狂的笑声越来越响亮 原子像香火一样升起，像一千根蜡烛一样 [...]

我怎样才能得到完整的歌词？这是我的代码：

```
$client = new SoapClient("http://lyrics.wikia.com/server.php?wsdl", array(
    'username'  =>  LYRIC_LOGIN,
    'password'  =>  LYRIC_PASS
));
$auth = array(
    'username'  =>  LYRIC_LOGIN,
    'password'  =>  LYRIC_PASS
);
$header = new SoapHeader('NAMESPACE','Auth',$auth,false);
$client->__setSoapHeaders($header);
$song   =   $client->getSOTD(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T08:44:30.380

[http://api.wikia.com/wiki/Documentation](http://api.wikia.com/wiki/Documentation)

> 出于法律原因，API 目前不允许提供完整歌词。它目前提供了一个合理使用示例（以验证匹配是否正确）和一个指向可以查看完整歌词的页面的链接。

# c# - asp.net 代码和邮件通过亚马逊 SES 发送

> ID：11176052
> 
> 赞同：1
> 
> 时间：2012-06-24T08:29:57.173
> 
> 标签：c#, amazon-ses

我尝试使用亚马逊 SES 服务发送电子邮件。我的代码取自他们的文档：

```
 public static void SendWithSMTP(string username, string password, string host, int port)
{
    using (var client = new System.Net.Mail.SmtpClient(host, port))
    {
        client.Credentials = new System.Net.NetworkCredential(username, password);
        client.EnableSsl = true;
        client.Send("from@example.com", "to@example.com", "This is a test subject.", "This is a test email message body.");
    } 
```

问题是我得到以下异常：

> SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应是：需要身份验证

有没有人遇到相同或类似的问题？关于这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T11:27:06.027

这似乎您使用的密钥是错误的，请确认，否则创建一个新的。

确保发件人 ID 也被允许发送电子邮件，同样可以从 Amazon ses 控制面板完成。

在您的代码中，您必须允许 from@example.com 发送电子邮件

# javascript - 如何使用 NodeUnit 测试客户端代码

> ID：11176060
> 
> 赞同：4
> 
> 时间：2012-06-24T08:30:51.493
> 
> 标签：javascript, unit-testing, node.js, client-side

[这是我之前的问题](https://stackoverflow.com/questions/11169335/node-js-modules-for-unit-testing)的后续。

假设我正在编写`calculate.js`带有`calculate`函数以在客户端代码中使用它的源文件：

```
函数计算（数）{
    返回数 * 2；
}

```

现在我想测试一下。

我`nodeunit`按照[本文](http://caolanmcmahon.com/posts/unit_testing_in_node_js)中的描述使用并*导出*`calculate`函数（以便测试可以调用它）。

```
函数计算（数）{
    返回数 * 2；
}

export.calculate = 计算 // Node.js 的东西。它不会在浏览器中运行！

```

测试`nodeunit`运行正常，但我无法再`calculate.js`在我的 Web 应用程序中使用，因为它使用`exports`.

现在它看起来像一个陷阱。我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T08:44:15.200

使用非 Node.js 测试框架，如 jasminebdd 或 jstestdriver。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T15:05:21.243

[在浏览器中运行测试](https://github.com/caolan/nodeunit#running-tests-in-the-browser)

> 如果您希望为您的测试套件使用 CommonJS 格式（使用导出），您可以为浏览器定义 CommonJS 工具。有许多替代方案，其重要的是它适合您现有的代码，这就是为什么 nodeunit 目前不提供开箱即用的功能。

我认为你应该看看 Browserify 来完成这个。

[浏览器化](https://github.com/substack/node-browserify)

> 使用服务器端构建步骤使 Node.js 样式的 require() 在浏览器中工作，就像变魔术一样！

[摩卡](https://github.com/visionmedia/mocha)

> Mocha 是一个简单、灵活、有趣的 JavaScript 测试框架，适用于 Node.js 和浏览器。

我认为您应该看看我非常喜欢的由 TJ（Express.js 的作者）创建的 Mocha（比我过去使用的 nodeunit 更好）。使用 Mocha，您可以轻松地进行代码覆盖、监视模式、通知，并且 Mocha 更易于维护。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T05:18:32.507

[Karma runner](http://karma-runner.github.io/)有一个[nodeunit 适配器](https://github.com/karma-runner/karma-nodeunit)，可以在浏览器和 PhantomJS 中运行 nodeunit 测试。这是一个示例[测试入口](https://github.com/hurrymaplelad/browser-forms/blob/master/test/test.js)点和[Gruntfile](https://github.com/hurrymaplelad/browser-forms/blob/master/Gruntfile.js)使用[Browserify](http://browserify.org/)来运行用[CommonJS 模块](http://nodejs.org/api/modules.html)（导出）编写的测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-26T10:22:53.947

如果您在 nodeunit 上设置，[nodeunit-browser-tap](https://github.com/hurrymaplelad/nodeunit-browser-tap) + [Testling是另一个选项。](http://ci.testling.com/)

*   Testling [npm 包](https://npmjs.org/package/testling)为您提供在本地浏览器中运行的测试的命令行输出。
*   [如果您在 GitHub 上托管， Testling.com](http://ci.testling.com/)会为您提供免费的跨浏览器 CI。
*   browser-tap 包装器为您提供 Testling 理解的 nodeunit 输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-29T18:57:32.307

您实际上可以在 nodeunit 本身内测试隔离的 jQuery 逻辑。例如，这是我为我的 datepicker 库编写的一些测试：

```
/* jshint evil:true */
/* global module, require, DatePair */

var fs = require('fs');
// Some of the plugins use a jQuery variable instead of $
var jQuery = require('jquery');
var $ = jQuery;

// Recreate window and document
var window = { jQuery: jQuery };
var document = window;

// The file is included here:
eval(fs.readFileSync('../lib/js/jquery/plugins/jquery.cookie.js') + '');
eval(fs.readFileSync('../lib/js/jquery.timepicker/jquery.timepicker.js') + '');
eval(fs.readFileSync('../lib/js/bootstrap/bootstrap-datepicker.js') + '');
eval(fs.readFileSync('../homepage/js/datepair.js') + '');

// Initialize DatePair Object
var datePair = DatePair(new Date(), {
    dateStart: $('<input type="text" autocomplete="off">'),
    dateEnd: $('<input type="text" autocomplete="off">'),
    timeStart: $('<input type="text" autocomplete="off">'),
    timeEnd: $('<input type="text" autocomplete="off">')
});

module.exports = {
    'Time Delta Var Is 1 hour' : function (test) {
        test.equal(datePair.getTimeDelta(), 3600);
        test.done();
    },
    'Change Date And Check For 1 Hour Difference' : function (test) {
        datePair.startTime.val("10:00pm").change();
        test.equal(datePair.endTime.val(), "11:00pm");
        test.done();
    },
    'Make End Date Move Up One Day' : function (test) {
        var expectedEndDates = [1];
        datePair.startTime.val("11:00pm").change();
        expectedEndDates.push(parseInt(datePair.startDate.val().split("/")[1], 10) + 1);

        test.ok($.inArray(parseInt(datePair.endDate.val().split("/")[1], 10), expectedEndDates) !== -1);
        test.equal(datePair.endTime.val(), "12:00am");
        test.done();
    },
    'Change To 11:30pm Of Previous Day' : function (test) {
        // Move startTime 1 Day Forward
        datePair.startTime.val("11:00pm").change();
        // Move EndDate 1 Day Backwards
        datePair.endTime.val("11:30pm").change();

        test.equal(datePair.endDate.val(), datePair.startDate.val());
        test.done();
    }
} 
```

在此处查看完整的代码 + 库：[https ://github.com/keithhackbarth/jquery-datetime-picker](https://github.com/keithhackbarth/jquery-datetime-picker)

# linux - 如何防止长邮件变成附件？

> ID：11176061
> 
> 赞同：2
> 
> 时间：2012-06-24T08:30:56.330
> 
> 标签：linux, bash, email, email-attachments

构建完成后，bash 脚本会调用：

```
nail -s "Build completed" $towhom < buildreport 
```

当*构建报告*的长度超过 2,000 个字符时，它会作为附件到达。

在哪里可以设置身体大小成为执着的门槛？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:48:29.317

根据 ottomeister 的评论，邮件会自动转换为附件的原因有很多`nail`

*   单行太长（>950 个字符）
*   消息中有控制字符

如果消息是 UTF-8，那么它似乎被正确解析（但这仅基于来自在线的代码，可能不是您使用的）

您可能可以通过过滤器运行文件的内容 - 例如删除所有非 ascii 字符：

```
tr -cd '\11\12\15\40-\176' <buildreport | nail -s "Build completed" $towhom 
```

...但这会破坏所有 UTF-8 字符

如果您想让日志输入以 1 个字符换行，那么您可以使用 perl one-liner，例如：

```
perl -e 'use Text::Wrap; print wrap("", "  ", <STDIN>);' < buildreport | nail -s "Build completed" $towhom 
```

# sql - 对子类型-超类型关系进行数据建模时要使用哪些约束？

> ID：11176062
> 
> 赞同：2
> 
> 时间：2012-06-24T08:30:59.220
> 
> 标签：sql, database-design

在对具有多个互斥子类型的超类型/子类型关系建模时，应如何通过约束来强制执行这种互斥性？

我的第一个猜测是：

```
SuperType
  (PK) super_id
  (PK) type_id
  Constraint: type_id in (1,2)

SubType1
  (FK) super_id
  (FK) type_id
  Constraint: type_id = 1

SubType2
  (FK) super_id
  (FK) type_id
  Constraint: type_id = 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:35:24.567

您所描述的仍然不能强制子行的*存在*。

为此，您需要放弃类型鉴别器并在相反方向添加一个 FK，这将导致循环 FK，这将需要延迟约束来解决 -[像这样](https://stackoverflow.com/questions/9174200/how-to-create-multiple-one-to-ones/9178524#9178524)。

我个人认为最好只使用最简单的数据库模型......

```
SuperType
  (PK) super_id

SubType1
  (PK, FK) super_id

SubType1
  (PK, FK) super_id 
```

...并在应用程序级别强制执行儿童的排他性和存在。

# c# - 如何将 Excel 文件插入/检索到 SQL Server 2008 中的 varbinary(max) 列？

> ID：11176066
> 
> 赞同：9
> 
> 时间：2012-06-24T08:32:24.197
> 
> 标签：c#, .net, sql-server-2008, excel-interop, varbinarymax

我正在尝试将 Excel 文件保存到数据库中，我不想使用文件流，因为它需要有一个服务器。

那么如何在具有类型列的表中插入/更新/选择`varbinary(max)`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-24T09:13:15.190

如果您想直接在 ADO.NET 中执行此操作，并且您的 Excel 文件不是太大以便它们可以立即放入内存中，您可以使用以下两种方法：

```
// store Excel sheet (or any file for that matter) into a SQL Server table
public void StoreExcelToDatabase(string excelFileName)
{
    // if file doesn't exist --> terminate (you might want to show a message box or something)
    if (!File.Exists(excelFileName))
    {
       return;
    }

    // get all the bytes of the file into memory
    byte[] excelContents = File.ReadAllBytes(excelFileName);

    // define SQL statement to use
    string insertStmt = "INSERT INTO dbo.YourTable(FileName, BinaryContent) VALUES(@FileName, @BinaryContent)";

    // set up connection and command to do INSERT
    using (SqlConnection connection = new SqlConnection("your-connection-string-here"))
    using (SqlCommand cmdInsert = new SqlCommand(insertStmt, connection))
    {
         cmdInsert.Parameters.Add("@FileName", SqlDbType.VarChar, 500).Value = excelFileName;
         cmdInsert.Parameters.Add("@BinaryContent", SqlDbType.VarBinary, int.MaxValue).Value = excelContents;

         // open connection, execute SQL statement, close connection again
         connection.Open();
         cmdInsert.ExecuteNonQuery();
         connection.Close();
    }
} 
```

要取回 Excel 工作表并将其存储在文件中，请使用以下方法：

```
public void RetrieveExcelFromDatabase(int ID, string excelFileName)
{
    byte[] excelContents;

    string selectStmt = "SELECT BinaryContent FROM dbo.YourTableHere WHERE ID = @ID";

    using (SqlConnection connection = new SqlConnection("your-connection-string-here"))
    using (SqlCommand cmdSelect = new SqlCommand(selectStmt, connection))
    {
        cmdSelect.Parameters.Add("@ID", SqlDbType.Int).Value = ID;

        connection.Open();
        excelContents = (byte[])cmdSelect.ExecuteScalar();
        connection.Close();
    }

    File.WriteAllBytes(excelFileName, excelContents);
 } 
```

当然，您可以根据自己的需要进行调整-您也可以做很多其他事情-取决于您真正想做的事情（从您的问题中不是很清楚）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T08:37:58.500

这取决于您使用的数据访问技术。例如，如果您使用实体框架，您可以使用对象将字节数组保存到数据库中。

# graphics - 透视光线投射

> ID：11176070
> 
> 赞同：0
> 
> 时间：2012-06-24T08:33:29.250
> 
> 标签：graphics, 3d, rendering, visualization, raycasting

有人可以指出一些透视光线投射的方法。我见过光线分裂技术。还有哪些其他铸造方法可用？哪一个最容易实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:36:36.687

遵循[F. Permadi 的《用于游戏开发和其他目的的光线投射教程》](http://www.permadi.com/tutorial/raycast/index.html)。它描述了最简单的方法。[André LaMothe 在《游戏编程大师](https://rads.stackoverflow.com/amzn/click/com/0672305070)的技巧》一书中也描述了这一点。

我已经实施了几次。大约 1K 行代码或更少（取决于您的编程语言以及您希望光线投射器的先进程度）。基础学校数学。

# java - 子实体的替代键类型

> ID：11176074
> 
> 赞同：1
> 
> 时间：2012-06-24T08:34:57.097
> 
> 标签：java, google-app-engine

我正在将 Jpa 与 GAE 一起使用。我有一个包含子实体集合的实体，如下所示。
在实体 A 中，我使用 long 作为 Id，在 B 中，我使用 Key 作为 Id。

现在 evreything 工作正常，除了我需要将 8MB JAR 文件导入`appengine-api.jar`到我的 android 应用程序中，只是为了 Key 类。
我尝试提取 jar 并只取`Key.class`，但它很乱，因为我必须添加更多 Key.class 正在使用的类。

我可以使用其他类型的密钥吗？

```
@Entity
public class A implements Serializable
{
    @Id     
    @GeneratedValue(strategy = GenerationType.IDENTITY) 
    private Long id;

    private int a;

    @OneToMany    
    @Basic
    private List<B> bList;
    .
    .
}

@Entity
public class B implements Serializable 
{       
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key key;

    int b;
    .
    .
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:06:18.610

不幸的是，[Key](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Key)是唯一可用的此类。它没有您可以使用的超类或有意义的接口。

# ruby-on-rails-3 - Rails 3如何在请求类型为*/*时强制响应类型

> ID：11176078
> 
> 赞同：1
> 
> 时间：2012-06-24T08:35:23.760
> 
> 标签：ruby-on-rails-3, mime-types, respond-to

我有一个`before_filter`想要根据请求和参数的各个方面默认响应类型。例如，

```
request.format = ( params.format ||= 'html' ) if ...    # an HTML-only request/client
request.format = ( params.format ||= 'json' ) if request.xhr? 
```

这个想法是`respond_to do |format|; format.html { ... }; format.json { ... }`然后将根据客户条件适当地呈现。一些客户端作为类型进入`*/*`（大概这是`request.content_type`？），我想强制这些是 HTML 响应。但是似乎不起作用。什么是一种干净的方法来做到这一点，并且没有为每条路线设置默认类型？即我只想将响应类型插入请求中，以便`respond_to`相应地打开它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:27:49.590

`request.format=`应该是类型的对象`MIME::Type`。

所以你必须做类似的事情`request.format = MIME::Types.type_for('html').first`

# php - PHP 或 javascript 中的 Cookie 抓取器

> ID：11176083
> 
> 赞同：-5
> 
> 时间：2012-06-24T08:36:16.253
> 
> 标签：php, javascript

我想制作一个脚本，通过它我可以抓取访问者的 cookie 并将其存储在 txt 文件中。如果可以，那么请帮助我。不管它应该是 php 还是 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T08:38:24.720

在 php 中，cookie 存储在 $_COOKIE 变量中.. 或 $_REQUEST。

```
//save cookies to a file:
$ser=serialize($_COOKIE);
file_put_contents("cookies.txt", $ser);

//read cookies back from file:
$cookies= unserialize( file_get_contents("cookies.txt")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T08:48:02.073

您必须使用 PHP 将 cookie 内容写入服务器。

```
$cookieContent = "";
foreach (array_keys($_COOKIES) as $ckey) {
    $cookieContent = $ckey . ": " . filter_input(INPUT_COOKIE, $ckey, FILTER_SANITIZE_STRING) . "\n"; 
}

file_put_contents('path/to/cookie_store_file.txt', $cookieContent."\n\n", FILE_APPEND); 
```

这会将来自每个用户的属于您网站的 cookie 写入服务器上的相同文本文件。

# python - 将字符串变量传递给 gql 查询

> ID：11176084
> 
> 赞同：6
> 
> 时间：2012-06-24T08:36:21.910
> 
> 标签：python, google-app-engine, google-cloud-datastore, gql

我到底如何使用 python 将字符串变量传递给 GQL？我可以在 SQL 中做的很好，但它只是不工作。这是我所拥有的：

```
personalposts = db.GqlQuery("select * from PersonalPost where user_id = %s order by created desc limit 30" % user_id) 
```

这一直在杀死我，但我觉得应该很简单。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T08:43:15.280

这应该有效：

```
personalposts = db.GqlQuery("select * from PersonalPost where user_id =:1 order by created desc limit 30",user_id) 
```

`GqlQuery`语法示例：

```
q = GqlQuery("SELECT * FROM Song WHERE composer = 'Lennon, John'")

q = GqlQuery("SELECT __key__ FROM Song WHERE composer = :1", "Lennon, John")

q = GqlQuery("SELECT * FROM Song WHERE composer = :composer", composer="Lennon, John") 
```

**来源：** [https ://developers.google.com/appengine/docs/python/datastore/gqlqueryclass](https://developers.google.com/appengine/docs/python/datastore/gqlqueryclass)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T08:43:33.727

参数可以通过位置或名称绑定，请查看[GqlQuery](https://developers.google.com/appengine/docs/python/datastore/gqlqueryclass)类文档以获取更多信息。

所以你可以做

```
personalposts = db.GqlQuery("select * from PersonalPost where user_id = :1 order by created desc limit 30", user_id) 
```

或者

```
personalposts = db.GqlQuery("select * from PersonalPost where user_id = :id order by created desc limit 30", id = user_id) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T15:33:28.790

创建一个这样的查询：

```
query = PersonalPost.all()
query.filter('user_id', user_id)
query.order('-created') 
```

或使用：在 '%s' 周围加上单引号 !!

```
personalposts = db.GqlQuery("select * from PersonalPost where user_id = '%s' order by created desc" % user_id) 
```

# html - 带有字母数字和数字的html css样式有序列表？

> ID：11176085
> 
> 赞同：1
> 
> 时间：2012-06-24T08:36:23.317
> 
> 标签：html, css

我们有一个有序列表

```
<ol>
    <li>something good</li>
    <li>even better</li>
    <li>possibly the best</li>    
</ol> 
```

通常它会显示为：

1.  好东西
2.  更好
3.  可能是最好的

有没有办法让它显示为：

1。好东西

a2。更好

一个3。可能是最好的

然后下一个列表可能是：

b1。呜呜呜

b2。第二个列表项

谢谢.. 一般的问题是我想要一个字符和一个符号以及一个数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T09:13:37.703

通过此页面搜索，我可以找到两个给我解决方案的答案。

[CSS中的反增量](https://stackoverflow.com/questions/10186849/counter-increment-in-css)

[HTML 列表样式类型的破折号](https://stackoverflow.com/questions/3200249/html-list-style-type-dash)

重用我创建的那些**适合您需要**的小提琴之一：

[http://jsfiddle.net/DDNEB/1/](http://jsfiddle.net/DDNEB/1/)

对于列表，您需要：

```
ol {counter-reset: chapter 1; list-style: none;} 
```

这允许您创建变量。然后：

```
ol li+li {counter-increment: chapter 1; list-style: none;} 
```

将为每个 li 增加它最后：

```
ol li:before {content: "a" counter(chapter) ".";}​ 
```

之前的内容将创建指定的内容，在这种情况下 a （用 b 或其他内容更改）+ number + 。.

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T09:18:17.857

将此添加到您的 CSS

```
.A li:before 
   {
    content: "A";
   }
.B li:before 
   {
    content: "B";
 } 
```

并将您的列表更改为以下内容：

```
<ol class="A">
    <li>something good</li>
    <li>even better</li>
    <li>possibly the best</li>    
</ol>
<ol class="B">
    <li>something good</li>
    <li>even better</li>
    <li>possibly the best</li>    
</ol> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T09:02:24.010

这是一种方法......不是你想要的，但是......

```
<ol type="a">
    <li>
        <ol type="1" start="1">
            <li>something good</li>
            <li>even better</li>
            <li>possibly the best</li>
        </ol>
    </li>
    <li>
        <ol type="1" start="1">
            <li>something good</li>
            <li>even better</li>
            <li>possibly the best</li>
        </ol>
    </li>
</ol> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T09:28:29.283

试试这个： [http ://www.w3schools.com/css/tryit.asp?filename=trycss_list-style-type_ex](http://www.w3schools.com/css/tryit.asp?filename=trycss_list-style-type_ex)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T13:31:42.543

将此添加到您的 CSS 中：

```
.A ol {list-style: none; counter-reset: chapter 1;}
.A ol li+li {counter-increment: chapter 1; list-style: none;}
.A ol li:before {content: "a" counter(chapter) ". ";}

.B ol {list-style: none; counter-reset: chapter 1;}
.B ol li+li {counter-increment: chapter 1; list-style: none;}
.B ol li:before {content: "b" counter(chapter) ". ";} 
```

并且这样做：

```
<div class="A">
    <ol>
        <li>something good</li>
        <li>even better</li>
        <li>possibly the best</li>             
    <ol>
</div>
<div class="B">
    <ol>
        <li>something good</li>
        <li>even better</li>
        <li>possibly the best</li>           
    <ol>
</div> 
```

点击[这里](http://jsfiddle.net/saeed_parsaee/DDNEB/7/ "希望能有所帮助")！这也有效。

# emacs - Emacs 中的临时键绑定

> ID：11176094
> 
> 赞同：3
> 
> 时间：2012-06-24T08:38:14.330
> 
> 标签：emacs, key-bindings, temporary

我对 viper 模式在 Emacs 中的工作方式不是特别满意。我正在尝试编写自己的毒蛇模式。除了我使用 .emacs 文件完成的自定义数量之外，我在 Elisp 中没有任何好的编程经验。

我想知道是否可以临时更改 Emacs 中的键绑定，并在需要时将它们恢复到原始状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T16:16:12.103

好吧，如果我正确理解您的问题，一种简单的方法是创建您自己的次要模式（除了我要说的您自己的特定模式），仅由您的临时键绑定组成。

您为该模式命名，然后打开或关闭所有临时键绑定就像调用命令一样简单：

```
M-x salsabear-minor-mode 
```

您可能想在 SO 上阅读 scottfrazer 的 45+ upvotes 答案：

[在 Emacs 中全局覆盖键绑定](https://stackoverflow.com/questions/683425/globally-override-key-binding-in-emacs)

他解释了如何创建自己的包含键绑定的次要模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T20:52:51.190

鉴于您明确地只提到了 viper，可能值得问一下您是否知道其他存在的基于 vi/vim 的库？请参阅以下列表：

[http://www.emacswiki.org/emacs/CategoryEmulation](http://www.emacswiki.org/emacs/CategoryEmulation)

我*怀疑*重新发明这个特殊的轮子可能不值得。

我相信[Evil](http://www.emacswiki.org/emacs/Evil)是最活跃的项目，但如果它没有按照你想要的方式工作，你的努力可能会更好地加强它（如果可行的话）？

# sql - Sybase - 联合后重复行

> ID：11176095
> 
> 赞同：1
> 
> 时间：2012-06-24T08:38:19.820
> 
> 标签：sql, union, sybase

我正在尝试复制从 sybase 数据库生成的表，我没有代码但可以访问数据库。

我几乎完美地复制了表格，但是因为我使用了联合，所以我有重复的行，它们应该合并：

```
select distinct id, dn, pn, null as sp
from dn
union
select id, 'DN', 'PN', sp
from sp
order by id 
```

但我生产，例如：

```
 pn,    dn,         pn,          sp

'110','Liversage','Consultant', null

'110','DN       ','PN        ','Cardiac' 
```

基本上我希望空值被心脏填充，而 DN 和 PN 以及第二行合并到第一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T08:51:01.967

为什么不做这样的事情：

```
SELECT ID, COALESCE(A.dn, B.dn), COALESCE(A.pn, B.pn), COALESCE(A.sp,B.sp)
FROM dn A
    LEFT OUTER JOIN sp B
         ON A.id = B.id 
```

这将从每个表中选择第一个非空值。我对您的表格的了解有限，无法给出完整的答案，但是您可能会对这种方法有更好的运气，因为联合不会做您似乎希望它做的事情。

# - 模型索引

> ID：11176099
> 
> 赞同：0
> 
> 时间：2012-06-24T08:38:50.483
> 
> 标签：

QModelIndex 是 Qt 模型/视图框架中的中心类。它代表了一种（非常抽象的）方式，QAbstractItemViews 可以通过它来处理 QAbstractItemModels 中的单元格。对于列表和表格模型，它在概念上分别简化为“int row”和“int row, int column”。

# ios - 在 iOS 中点击 UISearchDisplayController 的 SearchBar 时如何关闭临时视图？

> ID：11176104
> 
> 赞同：1
> 
> 时间：2012-06-24T08:40:05.797
> 
> 标签：ios, uisearchdisplaycontroller

你知道，当我们点击 UISearchDisplayController 的 UISearchBar 时，会出现黑色的临时视图，隐藏我们的低不透明度视图。

我想在点击 UISearchBar 时删除该临时视图。无论如何要删除该视图？

提前致谢。

# iphone - 从键盘获取输入以显示在标签上

> ID：11176107
> 
> 赞同：0
> 
> 时间：2012-06-24T08:40:54.710
> 
> 标签：iphone, objective-c, ios5

我的代码如下：

```
- (IBAction)loopBtn:(id)sender {
    txtLoopBtn1.keyboardType = UIKeyboardTypeNumberPad;
    [txtLoopBtn1 becomeFirstResponder];    
    [sender resignFirstResponder];
} 
```

我`loopBtn`正在以响应者的身份调用键盘，`txtLoopBtn1`就像教我`- (IBAction)loopBtn:(id)sender`使用此代码在我的内部添加此代码的人一样：

```
 txtLoopBtn1.keyboardType = UIKeyboardTypeNumberPad;
   [txtLoopBtn1 becomeFirstResponder];    
   [sender resignFirstResponder]; 
```

在我按下 loopBtn 后，键盘显示。我添加了一个数字，但它没有显示在`labelLoop`.

我已经写下了显示我的代码的代码，但它失败了，然后我把它全部删除了。现在我的`loopBtn`代码就像上面的示例一样。

我只想从小键盘获取输入，然后在 labelLoop 上显示，但我不知道如何实现它。我很抱歉我的英语。

如果您不了解我的问题，请先不要生气。我只是不知道如何用我的谷歌翻译英语向你解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T12:40:56.067

我已经解决了我的问题。我将 txtLoopButton 放置在我的视图中 loopBtn 旁边（用 txtLoopButton 替换我的 labelLoop），没有边框，然后我删除了我的 labelLoop。因为有人教过我，他说如果我想使用下面的代码，我必须把我的 textLoopBtn 放在我的视野之外。

```
 txtLoopBtn1.keyboardType = UIKeyboardTypeNumberPad;
    [txtLoopBtn1 becomeFirstResponder]; 
```

困惑，如何用我有限的英语解释。也许我误解了他说的话。但是感谢您观看我的菜鸟问题。

# jquery - 更改元素内的 iframe 内容

> ID：11176111
> 
> 赞同：0
> 
> 时间：2012-06-24T08:42:09.810
> 
> 标签：jquery, iframe

```
$(document).ready(function () {
    $('#keywordframe').contents().find("#step12").html('');
    $('#keywordframe').contents().find("#step12").html('11');
    $('#keywordframe').contents().find("#step13").html('');
    $('#keywordframe').contents().find("#step13").html('12');
    $('#keywordframe').contents().find("#step14").html('');
    $('#keywordframe').contents().find("#step14").html('13');
    $('#keywordframe').contents().find("#step15").html('');
    $('#keywordframe').contents().find("#step15").html('14');
}); 
```

我尝试使用上面的代码来更改 iframe 中的内容，但它不起作用。除非我`alert('');`把`$('#keywordframe').contents().find("#step12").html('');`

如果只是会生效。这是什么原因，谁能帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:45:00.553

可能只是您需要等待 iframe 加载。

由于这是我目前唯一能想到的，试试这个：

```
$(document).ready(function () {
    $('#keywordframe').load(function() {
        $('#keywordframe').contents().find("#step12").html('');
        $('#keywordframe').contents().find("#step12").html('11');
        $('#keywordframe').contents().find("#step13").html('');
        $('#keywordframe').contents().find("#step13").html('12');
        $('#keywordframe').contents().find("#step14").html('');
        $('#keywordframe').contents().find("#step14").html('13');
        $('#keywordframe').contents().find("#step15").html('');
        $('#keywordframe').contents().find("#step15").html('14');
    });
}); 
```

我不知道它是否会解决您的问题，但值得一试。

# php - 单击链接提交表单并发送到多个电子邮件 ID

> ID：11176112
> 
> 赞同：1
> 
> 时间：2012-06-24T08:42:14.040
> 
> 标签：php, javascript, jquery, html, forms

我已经使用统一的 jquery 插件格式化了我的表单。同样对于提交表单，我正在使用链接，因为我已经添加了一些效果，如果我为此使用输入类型提交，它将被格式化为 uniform 。

```
<form>
      <ul>
        <li><label>Your Name:</label><input type="text" name="name" size="40"/></li>
        <li><label>Your Email:</label><input type="email" name="email" size="40"/></li>
    <li>
          <label>Gender:</label>
          <select name="gender">
            <option>Male</option>
            <option>Female</option>
            </select>
        </li>
    <li><label>Subject:</label><input type="text" name="subject" size="40"/></li>

    <li><label>Write your letter here:</label><textarea name="message" cols="60" rows="15"></textarea></li>
        OR ELSE<br/><br/>
        <li>
          <label>Upload your letter:</label>
          <input type="file" />
        </li>
        <li>
            <a id="mylink" class="button" href="#">
    <img src="button.png" alt="" />Send</a>

        </li>

      </ul>
    </form> 
```

现在我想使用链接提交此表单，并且还想同时通过电子邮件将其发送到两个电子邮件 ID。我可以使用什么 javascript 代码。我正在使用以下代码提交表单，然后在 send.php 中发送邮件。

```
a.onclick = function() {
    $(this).parents('form:first').submit();
    send.php;

    return false;
}​ 
```

是否可以像这样调用 send.php ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T09:04:05.613

你的意思是：

如果您的表单中有**action="send.php"**，那么

```
$(document).ready(function() {
    $("#mylink").click(function(e) {
        e.preventDefault();
        $(this).closest('form').submit();
    });
}); 
```

或者，您可以为表单设置操作并提交，例如

```
$(document).ready(function() {
        $("#mylink").click(function(e) {
            e.preventDefault();
                var myFrm = $(this).closest('form');
                myFrm.get(0).setAttribute('action', 'send.php');
            myFrm.submit();
        });
    }); 
```

或者，使用 ajax

```
$(document).ready(function() {
    $("#mylink").click(function(e) {
        e.preventDefault();
        $.ajax({
            type: "POST",
            url: "send.php",
            data: {your data to post here},
            succes: function(resp) {
                //your response here
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T08:44:20.207

> 是否可以像这样调用 send.php ？

**像这样**？不，您需要使用`ajax`请求：

```
$.ajax({
    url :"send.php"
}); 
```

* * *

额外提示：更改：

```
$(this).parents('form:first').submit(); 
```

**至：**

```
$(this).closest('form').submit(); 
```

# android - Android 免费/付费 - 使用库的架构

> ID：11176113
> 
> 赞同：2
> 
> 时间：2012-06-24T08:42:16.030
> 
> 标签：android

我需要创建一个免费和付费版本的应用程序，因此我正在使用一个包含常见活动和资源的库项目。但是我想知道你将如何组织这个：

当用户单击按钮时，共享（库）活动`MyActivity.java`会启动 DialogFragment。免费和付费应用程序的 DialogFragment 会有所不同。对于我们将推出的免费应用程序，我们将推出`FreeDialog.java`付费应用程序`PaidDialog.java`。这两个对话框片段不会在库项目中，因为它们不是共享的；他们将分别在免费和付费项目中。

我唯一能想到的就是`MyActivity.java`抽象化并在免费和付费项目中扩展它。扩展将启动它们各自的 DialogFragments。

另一种方法可能是在每个项目中重载片段。但是，我不确定这是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T12:09:33.417

从理论上讲，您可以`MyActivity`在付费和免费应用程序项目中进行抽象并将其子类化。但是，`Activity`类与普通的 Java 类有点不同，这使这变得复杂。它们在 AndroidManifest.xml 中列出，然后也不是通过简单地*更新*它们来创建的。它们通常是用`Intent`s 创建的。所以，我想我会远离创建`Activity`一个抽象类。

我认为您真正想要的是使用类似于[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)的东西来创建 的实例`DialogFragment`，而您的公共库不知道`DialogFragment`将创建哪个实例。您可以对工厂非常感兴趣，并且可以在其他地方阅读所有相关信息，但一个简单的可能对您有用：

```
public class FragmentFactory {

   private static String _dialogFragmentClassName;

   public static void registerFragment(String className) {
      // you might choose to assert if _dialogFragmentClassName != null
      _dialogFragmentClassName = className;
   }

   public static DialogFragment createFragment() {
      try {
         return (DialogFragment) Class.forName(_dialogFragmentClassName).newInstance();
      } catch (Exception e) {
         return null;
      }
   }
} 
```

然后，在您的免费和付费应用项目代码中，您将在启动时发出这样的调用（例如在 main 中`Activity`）：

```
FragmentFactory.registerFragment(com.mycompany.free.FreeDialogFragment.class.getName()); 
```

和

```
FragmentFactory.registerFragment(com.mycompany.paid.PaidDialogFragment.class.getName()); 
```

最后，在通用库代码中，可以通过调用来创建片段的实例

```
DialogFragment fragment = FragmentFactory.createFragment();
FragmentManager fm = getSupportFragmentManager();
FragmentTransaction ft = fm.beginTransaction();
ft.add(R.id.fragment_content, fragment);
ft.commit(); 
```

# gcc - 我如何知道每个 gcc 版本附带的 libstdc++？

> ID：11176116
> 
> 赞同：6
> 
> 时间：2012-06-24T08:42:52.433
> 
> 标签：gcc, libstdc++

我如何知道每个 gcc 版本附带的 libstdc++？是否有一种无需安装 gcc 即可轻松获取此信息的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T21:54:27.433

您查看手册，特别是[http://gcc.gnu.org/onlinedocs/libstdc++/manual/abi.html](http://gcc.gnu.org/onlinedocs/libstdc++/manual/abi.html)，其中显示了每个 GCC 版本的库版本号。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-24T09:05:53.433

您可以只检查 GCC 源代码，例如`libstdc++/ChangeLog`它附带的文件。编写脚本应该不会太难。

乍一看，libstdc++ 不再获得真实的版本号，它们只是使用 ChangeLog 文件中的源代码存储库修订 ID。

# c# - Spring.NET IOC / MVC - 已处理的数据库上下文

> ID：11176119
> 
> 赞同：1
> 
> 时间：2012-06-24T08:43:57.183
> 
> 标签：c#, asp.net-mvc, inversion-of-control, spring.net

我在我的 ASP.NET MVC 4 应用程序中使用 Spring.NET 的 IOC 容器。每个控制器都从容器中获取 EF 数据上下文：

```
 private readonly IDBContext db =
        (IDBContext) ApplicationHelper.ApplicationContext.GetObject("DatabaseContext"); 
```

我已经为控制器搭建了脚手架，默认情况下它们实现了 IDisposable 接口，其中设置了 DB 连接 - 如下所示：

```
 protected override void Dispose(bool disposing)
    {
        this.db.Dispose();
        base.Dispose(disposing);
    } 
```

没关系 - 我想保持这种状态。但是，被调用的第二个控制器给出了一个异常，说明数据库上下文已被释放。

所以 - 我想做的是让 IOC 容器在下一个控制器调用该`GetObject()`方法时检查对象是否已被释放。这可能吗，还是我应该改变我的设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:58:16.913

默认情况下，在您的 spring.net Web 应用程序容器中配置的对象具有[“应用程序”范围](http://www.springframework.net/doc-latest/reference/html/web.html#web-objectscope)。这意味着您命名的实例`DatabaseContext`只在 Web 应用程序启动时创建一次。使用此实例的第一个控制器将其释放，此后任何其他控制器都无法使用它。

通常，在使用 IOC 容器时，像在控制器中使用 dispose 实现那样自己管理对象生命周期是不好的做法。如果可能，您应该让容器管理对象的生命周期。

`DatabaseContext`在这种特殊情况下，创建使用`request`范围可能很有意义。这样做时，弹簧容器将`DatabaseContext`在您的请求结束时处理您。执行此操作时，您可以删除`this.db.Dispose();` from `Controller.Dispose`。

问题[IoC (spring.net) with asp.net - ctor 在控制器上注入了非单例对象 - 我在哪里处理？](https://stackoverflow.com/questions/10834339/ioc-spring-net-with-asp-net-ctor-injected-non-singleton-objects-on-controlle)最近来了；你可能也会感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T09:42:13.643

看起来在您的 IoC 容器设置方法中，您配置`IDBContext`为单例。

将其更改为基于实例的`IDBContext`.

# silverlight - 通过 Silverlight MVVM 模式在两个不同的列表框中显示单个对象列表

> ID：11176122
> 
> 赞同：0
> 
> 时间：2012-06-24T08:44:27.297
> 
> 标签：silverlight, windows-phone-7, binding, mvvm, observablecollection

我正在为 Windows Phone 创建一个应用程序。我正在为主页使用全景视图。全景视图包含两个全景项目，每个项目都包含一个绑定到数据源的列表框（即使用 ObservableCollection 的内存集合）。该对象有 2 个布尔属性`IsA`和`IsB`.

我想在两个列表中显示对象的字符串数据，但数据由布尔变量区分。也就是说，如果`IsA`设置了，`true`那么对象必须显示在panaroma item 1的列表框中，如果`IsB`是，`true`那么它必须显示在panaroma item 2的列表框中。

但我只有一个如上所述的对象列表。我在绑定 listboxitem 时在 xaml 中尝试了不同的绑定表达式，但没有一个对我有帮助。

请帮助解决这个问题。因为这真的让我很紧张。任何帮助将不胜感激。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:29:11.957

您可以使用`ItemTemplate`来定义项目在 中的显示方式`ListBox`。您可以为每个模板定义一个模板，`ListBox`并将布尔属性绑定到`Visibility`项目的。这将仅显示为其设置属性的项目。

看看[这篇 MSDN 文章](http://msdn.microsoft.com/de-de/library/ms742521.aspx#DataTemplating_Basic)。

# php - 使用 ClientLogin 和 PHP/cURL 登录到 Google Spreadshet API

> ID：11176132
> 
> 赞同：5
> 
> 时间：2012-06-24T08:46:04.423
> 
> 标签：php, curl, google-docs-api, google-spreadsheet-api

我正在使用 ClientLogin 方法和 cURL 登录到谷歌 API。这工作正常，我收到一个令牌以供进一步使用。我现在可以使用查询 docs.google.com

```
 $curl = curl_init();

        $headers = array(
            "Authorization: GoogleLogin auth=" . $auth,
            "GData-Version: 3.0",
        );

        curl_setopt($curl, CURLOPT_URL, "https://docs.google.com/feeds/default/private/full");
        curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);
        curl_setopt($curl, CURLOPT_POST, false);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

        $response = curl_exec($curl);
        curl_close($curl); 
```

这工作正常，我得到了我的 google 文档帐户中所有可用文档的列表。[但是，如果我尝试使用从api 文档](https://developers.google.com/google-apps/spreadsheets/#retrieving_a_list_of_spreadsheets)中获得的 URL 对电子表格.google.com 进行相同的查询：

```
https://spreadsheets.google.com/feeds/spreadsheets/private/full 
```

我收到 401 错误，提示使用的令牌无效。在这两种情况下，我都使用相同的令牌和查询。谷歌电子表格 api 是否需要不同的令牌？

编辑：这就是我请求令牌的方式：

```
 $clientlogin_url = "https://www.google.com/accounts/ClientLogin";
        $clientlogin_post = array(
            "accountType" => "HOSTED_OR_GOOGLE",
            "Email" => "my email",
            "Passwd" => "my password",
            "service" => "writely",
            "source" => "my application name"
        );

        $curl = curl_init($clientlogin_url);

        curl_setopt($curl, CURLOPT_POST, true);
        curl_setopt($curl, CURLOPT_POSTFIELDS, $clientlogin_post);
        curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

        $response = curl_exec($curl);

        preg_match("/Auth=([a-z0-9_-]+)/i", $response, $matches);
        $auth = $matches[1];
        curl_close($curl); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T09:48:00.290

简短的回答 - 是的。您需要为不同的服务生成不同的令牌。您为检索 auh 令牌而传入的服务名称在每种情况下都不同。有关更多详细信息，请参见此处 - [https://developers.google.com/gdata/faq](https://developers.google.com/gdata/faq)

例如，从文档中，电子表格的 req 将是

```
$clientlogin_post = array(
            "accountType" => "HOSTED_OR_GOOGLE",
            "Email" => "my email",
            "Passwd" => "my password",
            "service" => "wise",
            "source" => "my application name"
        ); 
```

# performance - DrawPrimitives 性能

> ID：11176134
> 
> 赞同：2
> 
> 时间：2012-06-24T08:46:18.100
> 
> 标签：performance, xna

我想绘制单面而不是 xna 模型，因为它太慢了。

但我不知道有什么区别

*   绘制图元
*   绘制用户基元
*   DrawIndexedPrimitives
*   DrawUserIndexedPrimitives

哪种方法最快？这些指数有什么用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T14:19:48.957

The simple answer to your question is that the "`User`" versions are a fair bit slower **on the CPU** because they have to transfer vertex data to the GPU (via the driver and the bus) each time they are called.

The non-`User` versions use vertex and index buffers that already exist on the GPU (you put them there at load time). They have considerably less data to transfer, so they are faster.

The "`User`" and "`Indexed`" versions will also each have a performance impact on the **GPU**. This impact is relatively tiny. Generally speaking you don't need to worry about it.

The `User` versions exist because they are faster when your data changes each frame. There is also `DynamicVertexBuffer` which can be used with the non-`User` version of the draw functions. I believe it is slightly faster than the `User` methods in cases where you can pre-allocate the buffer at the desired size.

The `Indexed` versions allow you to select vertices out of your vertex buffer using an index buffer (so triangles that you draw can choose vertices at any position in the vertex buffer). The alternative is that your vertex buffer is simply interpreted as as sequential list of triangle vertices (based on `PrimitiveType`). The main reason for the existence of index buffers is to remove the need for duplicate vertices in your vertex buffer (which would require additional memory and processing on the GPU).

**BUT...**

XNA's `Model` class internally uses `DrawIndexedPrimitives`. Not only that, but it uses it *correctly* (ie: it doesn't draw single faces - but as many as it can at once - for the best performance). So if you are finding that it is slow, then your problem lies elsewhere.

I suggest trying to diagnose the *reason* why your game is performing poorly, before trying to select a "solution". Maybe ask for help doing that in a question here (or on [https://gamedev.stackexchange.com/](https://gamedev.stackexchange.com/)).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-03T20:53:22.437

如果可以的话，全部一次，实例化绘制总是会更好，但这需要您一次性提供所有纹理！例如，在我的例子中，我喜欢用 1 个纹理绘制实例化的对象...所有的树、所有的地面、所有的建筑物等...

# asp.net-mvc - 将 MVC 网站部署到 Azure

> ID：11176136
> 
> 赞同：1
> 
> 时间：2012-06-24T08:46:57.953
> 
> 标签：asp.net-mvc, asp.net-mvc-3, deployment, azure

将新的 MVC 3 Web 应用程序部署到 Azure 时出现错误。尽管该站点似乎可以正常工作，但存在角色初始化错误，这意味着 VS2010 的部署永远不会完成。（见下面的输出。）

我怀疑 Mindscape.Lightspeed.Web 程序集依赖于 MVC 2。但我认为以下配置部分会覆盖它。

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

您可以通过从开发系统中卸载 MVC 2 然后在开发结构中运行来使用 Azure 项目来模拟这一点。

我怎样才能解决这个问题？

```
Microsoft.WindowsAzure.ServiceRuntime Critical: 201 : 'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\1001b7f1\d3c78bbf\assembly\dl3\d2532ce7\a08fd830_9d4bcd01\Microsoft.WindowsAzure.Configuration.DLL'
Role entrypoint could not be created:
System.TypeLoadException: Unable to load the role entry point due to the following exceptions:
-- System.IO.FileLoadException: Could not load file or assembly 'System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)
File name: 'System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'

=== Pre-bind state information ===
LOG: User = DiscoveryOne\scott
LOG: DisplayName = System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
 (Fully-specified)
LOG: Appbase = file:///C:/Users/scott/Documents/Visual Studio 2010/Projects/Teto.Azure/Teto.Azure/csx/Debug/roles/Teto.Web/approot/bin
LOG: Initial PrivatePath = C:\Users\scott\Documents\Visual Studio 2010\Projects\Teto.Azure\Teto.Azure\csx\Debug\roles\Teto.Web\approot\bin
Calling assembly : Mindscape.LightSpeed.Web, Version=4.0.1351.20441, Culture=neutral, PublicKeyToken=360c8f37b466ebb2.
===
LOG: This bind starts in default load context.
LOG: No application configuration file found.
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Post-policy reference: System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
LOG: Attempting download of new URL file:///C:/Users/scott/Documents/Visual Studio 2010/Projects/Teto.Azure/Teto.Azure/csx/Debug/roles/Teto.Web/approot/bin/System.Web.Mvc.DLL.
WRN: Comparing the assembly name resulted in the mismatch: Major Version
ERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated.

 ---> System.Reflection.ReflectionTypeLoadException: Unable to load one or more of the requested types. Retrieve the LoaderExceptions property for more information.
   at System.Reflection.RuntimeModule.GetTypes(RuntimeModule module)
   at System.Reflection.Assembly.GetTypes()
   at Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetRoleEntryPoint(Assembly entryPointAssembly)
   --- End of inner exception stack trace ---
   at Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetRoleEntryPoint(Assembly entryPointAssembly)
   at Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.CreateRoleEntryPoint(RoleType roleTypeEnum)
   at Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.InitializeRoleInternal(RoleType roleTypeEnum)
The program '[1564] WaIISHost.exe: Program Trace' has exited with code 0 (0x0).
The program '[1564] WaIISHost.exe: Managed (v4.0.30319)' has exited with code -1 (0xffffffff). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T09:39:52.833

程序集重定向应该没问题，但不要忘记您可能需要在多个文件中配置它：

*   网页配置
*   视图\Web.config
*   WaIISHost.exe.config

您需要确保修改这两个 Web.config 文件。如果您从**WebRole.cs**文件调用 LightSpeed 程序集，我建议您创建一个名为**WeIISHost.exe.config**的新文件，添加重定向并将其复制到输出目录设置为始终。这是必需的，因为 WebRole 现在使用[完整的 IIS](http://blogs.msdn.com/b/windowsazure/archive/2010/12/02/new-full-iis-capabilities-differences-from-hosted-web-core.aspx)。

![在此处输入图像描述](../Images/6968f79af1806964ed1969533cad7d24.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T09:19:06.760

您是否检查以确保 Lightspeed 配置为在部分信任模式下运行？

[http://www.mindscapehq.com/blog/index.php/2010/01/13/the-dynamic-duo-lightspeed-azure](http://www.mindscapehq.com/blog/index.php/2010/01/13/the-dynamic-duo-lightspeed-azure/)

# emacs - 在 Emacs 中动态显示/隐藏菜单栏

> ID：11176138
> 
> 赞同：4
> 
> 时间：2012-06-24T08:47:47.820
> 
> 标签：emacs, menu, elisp, menubar

我已经`menu-bar-open`绑定`f11`并关闭了菜单栏，因此，`f11`调用`tmm-menubar`很不方便，并且由于某种原因没有特定于模式的菜单项（例如 org 和 tbl 在 org-mode 中）。我希望它以这种方式运行：使菜单栏可见，使用户能够选择菜单项，然后再次使菜单栏不可见。

最惯用和最优雅的方式是什么？

我考虑过编写建议，但 Emacs 开发人员通常不建议这样做，因为它会导致调试问题，而且标准 Emacs 代码不包含建议。

我在 GUI 中使用 Emacs 24.1。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-28T16:23:19.520

在 Emacs-24 中，您可以简单地这样做：

```
(global-set-key [f9] 'toggle-menu-bar-mode-from-frame) 
```

*   不确定超过 24 的 Emacs 版本。
*   请确保 f9 在您的安装中确实可用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T04:17:03.153

如果您在`menu-bar-mode`禁用的情况下运行图形 Emacs 会话，`C-<mouse-3>`则应将菜单的全部内容作为弹出对话框显示。但是，如果您在终端中运行 Emacs，这绝对行不通；你没有具体说明是哪种情况，所以我尽量不做假设。也可以为`mouse-popup-menubar`and/or`mouse-popup-menubar-stuff`函数创建自定义鼠标绑定（可选地，使用键盘修饰符），但最终只会使您能够复制类似于我上面描述的标准功能的行为。

由于它有点不灵活和全局性`menu-bar-mode`（即它适用于所有 Emacs 框架并通过钩子等提供相对较少的定制），我认为很难用 vanilla 精确实现你想要的行为Emacs。可能可以编写一个自定义函数来临时启用`menu-bar-mode`，然后在做出选择后使用类似的东西`post-command-hook`再次禁用它，但我不确定。如果时间允许，我会尝试进一步调查。

此外，您可能希望查看第三方菜单栏包（qv，[EmacsWiki 的菜单栏部分](http://www.emacswiki.org/emacs/MenuBar)）。

编辑：我已经拼凑了一个相当笨拙的解决方案，您可能会发现它很有用......

```
(add-hook
 'pre-command-hook
 (lambda ()
   (when (eq menu-bar-mode 42)
     (menu-bar-mode -1))))

(defun my-menu-bar-open ()
  (interactive)
  (unless menu-bar-mode
    (menu-bar-mode 1))
  (menu-bar-open)
  (setq menu-bar-mode 42)) 
```

我已经在图形会话中对此进行了测试，它似乎可以模拟您想要的行为，只要您在执行`my-menu-bar-open`和做出选择之间不执行 Emacs 注册为命令的任何操作（这基本上是导航以外的任何操作菜单本身）。的选择`42`是一个神奇的数字（和道格拉斯亚当斯的敬意），旨在最大限度地减少挂钩函数因`menu-bar-mode`变量的更典型值而被激活的风险。我并没有声称这在任何方面都很优雅，但是，以它明显丑陋的方式，它确实有效。如果您决定使用它，只需绑定`my-menu-bar-open`到`f11`（或您喜欢的任何内容），即：

```
(global-set-key [f11] 'my-menu-bar-open) 
```

或者，您可以通过`pre-command-hook`以类似方式使用并建议`menu-bar-open`执行临时切换来实现非常相似的功能`menu-bar-mode`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T21:05:44.047

Greg 的答案的一个小改进，它保持`pre-command-hook`干净：

```
(menu-bar-mode -1)

(defun my-menu-bar-open-after ()
  (remove-hook 'pre-command-hook 'my-menu-bar-open-after)
  (when (eq menu-bar-mode 42)
    (menu-bar-mode -1)))

(defun my-menu-bar-open (&rest args)
  (interactive)
  (let ((open menu-bar-mode))
    (unless open
      (menu-bar-mode 1))
    (funcall 'menu-bar-open args)
    (unless open
      (setq menu-bar-mode 42)
      (add-hook 'pre-command-hook 'my-menu-bar-open-after))))

(global-set-key [f10] 'my-menu-bar-open) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-11T19:22:37.233

我在 GNU Emacs 25.2 和 26.3 中对此进行了测试：

```
(menu-bar-mode -1)

(advice-add 'menu-bar-open
            :around
            (lambda (orig-fun &rest args)
              (menu-bar-mode 1)
              (apply orig-fun args)
              (menu-bar-mode -1))) 
```

结果行为（假设`menu-bar-open`绑定到`F10`，这是默认值）：

*   默认情况下不显示菜单栏。
*   如果按`F10`，将显示菜单栏。
*   离开菜单栏后，菜单栏将消失，直到您下次按`F10`。

请注意，这更像是一种 hack，而不是适当的解决方案。

# css - CSS - FF 和 Safari 中的输入（文本和按钮）对齐方式不同

> ID：11176146
> 
> 赞同：2
> 
> 时间：2012-06-24T08:49:07.643
> 
> 标签：css

我尝试在一个级别上对齐按钮和文本输入，但我在 Firefox（正确对齐）和 Safari（未正确对齐）中得到不同的结果。

我创建了一个 JSFiddle，您可以在两种浏览器中看到不同的行为，但目前我无法说出为什么会这样。

有人知道答案吗？

谢谢！

JSFiddle：http: [//jsfiddle.net/LPgJr/2/](http://jsfiddle.net/LPgJr/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T08:53:12.230

您想将它们都向左浮动-http: [//jsfiddle.net/LPgJr/3/](http://jsfiddle.net/LPgJr/3/)

之后别忘了清理你的花车。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T09:13:52.440

WebKit 和 Gecko 以不同的方式呈现文本字段的高度，这是肯定的。尝试在您的小提琴中连续更改文本字段的填充。尝试 0px、1px、2px，然后是 3px、10px、25px、40px、80px 等等。您可以看到文本字段上的填充影响按钮的垂直位置。文本字段上的填充越大，按钮下降的越低。

为什么是这样？因为浏览器将文本区域中的文本与按钮上的文本对齐。

这里的例子：http: [//jsfiddle.net/rtoal/LPgJr/6/](http://jsfiddle.net/rtoal/LPgJr/6/)

由于呈现文本字段的方式，浏览器呈现出不同的外观。按照 SpaceBeers 的建议，明确设置高度。

# php - Php - 读取文件，更改数据，写入新文件

> ID：11176149
> 
> 赞同：3
> 
> 时间：2012-06-24T08:50:25.153
> 
> 标签：php, file, aes

我正在尝试在 PHP 中创建一种文件生成器。基本上，它获取一个默认文件，读取数据，解密数据（以 AES 加密），使用用户密码加密数据并将所有这些字节粘贴到具有客户端名称的新文件中。

这很容易，但我遇到了一些问题。这是我当前的代码：

```
// Load the original raw file
$data = file_get_contents('default.bin');
if (!$data) exit();

// Decrypt the raw data with the default key
$data = AESDecrypt($data, 'default_16_b_key');

// Encrypt the raw data with the user key
$data = AESEncrypt(pad($data, 16), $user_key);

$fileName = sprintf('client_%s.bin', $client_name);
file_put_contents($fileName, $data); 
```

以下是我正在使用的功能：

```
function AESEncrypt($data, $key)
{
    return mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $data, MCRYPT_MODE_ECB);
}

function AESDecrypt($data, $key)
{
    return mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, $data, MCRYPT_MODE_ECB);
}

function pad($data, $blocksize)
{ 
    $pad = $blocksize - (strlen($data) % $blocksize); 
    return $data . str_repeat(chr($pad), $pad); 
} 
```

AES 函数运行良好，因为我可以解密和加密一个简单的字符串。pad 功能似乎完成了它的工作。

**问题是当我尝试执行生成的文件（这是重命名后的 jar 文件）时，我收到此消息“意外文件结束”，除了一个空白文件（0 字节）之外，我的 jar 文件中没有任何内容。**

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:48:01.023

最后，我没有使用第一次解密就解决了。可以使用以下代码加密原始数据：

```
$data = AESEncrypt(pad($data, 16), $user_key); 
```

你可以把这条线放在一个无限循环中（不是真的无限），这仍然有效。然后，您可以使用您选择的语言对其进行解密。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T09:02:17.047

`jar`文件是压缩档案。使用[`zip`](http://php.net/zip)扩展名创建一个 zip 文件。请记住将其重命名为`.jar`（或`.bin`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T09:04:50.667

我不确定这是否是解决方案，但我遇到了一些加密字符串的问题，通过 base64encoding 解决了它。你可以试一试:-)

# android - 如何使用 Service 管理多个并发下载？

> ID：11176154
> 
> 赞同：0
> 
> 时间：2012-06-24T08:51:36.533
> 
> 标签：android, android-asynctask, android-service

我正在尝试在我的应用程序中创建一个下载管理器。后台可能同时运行多个下载。我将进行一项活动，在其中收集所有正在运行的下载，并为每个下载显示一个进度条和一个暂停按钮。
这就是我要做的。如果我做错了，请告诉我。

首先，我将创建一个名为的服务`DownloadService`，在该服务中将有一个`AsyncTask`类来进行下载。`AsyncTask`我在服务中有一个方法，可以通过为每次调用启动类来开始新的下载。`AsyncTask`当我需要访问这些正在运行的任务并获取它们的进度状态时，还会有一系列实例。
这是一般的想法。这是正确的方法吗？

# vim - 如何在 Vim 中跳转到视觉选择的开头或结尾？

> ID：11176159
> 
> 赞同：70
> 
> 时间：2012-06-24T08:52:49.127
> 
> 标签：vim

是否有移动到视觉选择的开始或结束的动作？

我知道`o`虽然在视觉模式下两者之间交替，但我需要能够精确地选择开始。

总体目标是用括号包围一个视觉选择的区域。

* * *

**跟进：**

根据评论，我能够使用以下宏来实现这一点。这个想法是：

1.  `Esc`退出视觉模式；
2.  ``>`转到上一个视觉选择的末尾；
3.  `a)`附加右括号；
4.  `Esc`退出插入模式；
5.  ``<`转到上一个视觉选择的开始；
6.  `i(`插入左括号；
7.  `Esc`再次退出插入模式。

例如：

```
map \q <ESC>`>a)<ESC>`<i(<ESC> 
```

* * *

根据另一条评论，我们有一个更简洁的解决方案：

```
map \q c()<ESC>P 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-06-24T09:16:59.323

有两个相关的内置标记保存当前缓冲区中最后一个视觉选择的第一个和最后一个字符的位置。为了将光标移动到这些标记，请分别使用命令 ``<` 和 ``>`（请参阅`:help `>`和`:help `<`）。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2015-05-02T17:36:56.067

当你在`Visual Selection`click时`o`。它会将光标的位置更改到选择的另一端。然后`O`往回跳。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-09-24T09:45:22.397

“用括号包围视觉选择区域”的最简单方法是：

`c`将视觉选择的区域挂在中间，`()`然后`P`将其放回中间：`c()<ESC>P`

我建议在`.vimrc`文件中定义一个新的可视模式命令（例如，`\q`）：

```
:vmap \q c()<ESC>P 
```

这种方法也适用于视觉矩形区域（`<C-V>`）：它放置`(`并`)`围绕每个块线。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-06-24T12:53:41.760

如果您只是想围绕一个视觉选择，那么已经完成了工作，即 tim pope，他编写了[这个](https://github.com/tpope/vim-surround/)名为`surround`. 它使用您喜欢的分隔符围绕单词或视觉选择。

选择您的视觉选择，例如`i like vim`点击`S)`获取`(i like vim)`或`S(`获取`( i like vim )`，将其更改为`[i like vim]`类型`cs]`（更改环境）并删除`ds]`以获取`i like vim`最后。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-06-24T13:55:12.317

如果你不能使用 Surrond.vim，这里有一种方法：

1.  `v`使用或进行视觉选择`V`。
2.  摆脱它`<Esc>`。
3.  键入以在所选内容的最后一个字符*之后*``>a)<Esc>`插入右括号。
**   键入以在所选内容的第一个字符*之前*``<i(<Esc>`插入一个左括号。*

# javascript - 翻译 API 以仅转换文本部分（而不是 HTML）

> ID：11176160
> 
> 赞同：1
> 
> 时间：2012-06-24T08:52:56.133
> 
> 标签：javascript, html, ajax, google-translate, microsoft-translator

我在 HTML 文件中有一些文本内容，我需要根据用户输入动态翻译成不同的语言。我正在使用 Microsoft Translator AJAX 界面来做同样的事情。

现在 HTML 文件是这样的；

```
<h1><u>CSS3 Media Query Support in IE7/8<o:p></o:p></u></h1>
<p class=MsoNormal>Some other text content to be translated as well ...Some other text content to be translated as well ...Some other text content to be translated as well </p> 
```

现在这只是我在这里展示的一个小片段。实际上这是一个巨大的标记（有很多样式标签）

我使用如下 API 进行翻译；

```
s.src = "http://api.microsofttranslator.com/V2/Ajax.svc/Translate?oncomplete=mycallback&appId=8B841CA7C1A03443682C52AD07B7775A7BD5B3AA&from=" + languageFrom + "&to=" + languageTo + "&text=" + text; 
```

相同的参考是 [http://msdn.microsoft.com/en-us/library/ff512404](http://msdn.microsoft.com/en-us/library/ff512404)

我的问题是是否有任何方法可以让我只传递要翻译的文本（并且应该忽略标签）。我知道可以使用 innerText 属性来代替 innerHTML。但缺点是我只得到原始文本输出作为响应，我需要为样式重新创建 HTML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-15T01:01:22.887

只需确保将`contentType=text/html`使用 innerHTML 获取的文本包含在 Translate API 调用中，您就可能取得成功。

否则，您需要遍历 html，一次提取文本以翻译一个部分，可能调用 BreakSentences API 提取单个句子，翻译，然后替换为翻译。批量处理段并调用 TranslateArray 会更有效。通过遍历 html 并仅通过带有内联标记的部分，可以混合这些方法。

无论如何，您可能会被迫遍历 html 以适应正在传递到 API 大小限制的文本。

# java - 如何将变量的数据与 ArrayList 中的数据进行比较？

> ID：11176163
> 
> 赞同：0
> 
> 时间：2012-06-24T08:53:39.570
> 
> 标签：java, arraylist

我正在调用一个传入变量的方法。我希望能够将此变量与 an 中的所有项目进行比较，`ArrayList`以查看是否匹配。

这是我的代码...

```
private boolean input;
private ArrayList chcekItem = new ArrayList();

public void setAction(String action) {
    input=true; 

    if (getChcekItem().isEmpty()) {
        getChcekItem().add(action);
    }
    else {            
        Iterator iterators = getChcekItem().iterator();
        while (iterators.hasNext()) {                
            if (iterators.next()==action) {
                System.out.println(iterators.next()+"="+action);
                input=false;
            }
        }            
        if (input) {
            getChcekItem().add(action);
            System.out.println("The item " + action + " is Successfully Added to     array");
        }
        else{
            System.out.println("The item " + action + " is Exist");
        }
    }
} 
```

我的代码没有像我预期的那样工作。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T09:06:23.613

我认为 checkItem 变量是一个字符串列表，因此它应该这样定义：

```
private List<String> checkItem = new ArrayList<String>(); 
```

比较字符串时，您不使用 string1==string2 而是使用 string1.equals(string2);

所以

```
(iterators.next()==action) 
```

应该：

```
(iterators.next().equals(action)) 
```

请记住检查字符串中的空值。

所以整个代码可能如下所示：

```
private boolean input;
private List<String> chcekItem= new ArrayList<String>();

public void setAction(String action) {
input=true; 
if (getChcekItem().isEmpty()) {
        getChcekItem().add(action);
    } else {
        //Foreach loop instead of an iterator ;)
        for(String item : chcekItem) {
            if(item.equals(action)) {
                System.out.println(item+"="+action);
                input=false;
                //We can jump out of the loop here since we already found a matching value
                break;
            }
        }         
        if (input) {
            getChcekItem().add(action);
            System.out.println("The item " + action + " is Successfully Added to               array");
        }else{
            System.out.println("The item " + action + " is Exist");
        }
      }
    }
} 
```

# c# - 从 ImagePath 检索图像

> ID：11176176
> 
> 赞同：0
> 
> 时间：2012-06-24T08:57:43.560
> 
> 标签：c#, asp.net, sql-server

我在数据库中保存了一个图像路径，如下所示：

```
C:\Users\3embed\Documents\Visual Studio 2010\Projects\HeritageWeb\HeritageWeb\Images\startbutton.png 
```

我想将图像显示为缩略图。现在我正在使用这段代码：

```
<asp:TemplateField ItemStyle-HorizontalAlign="Center" ItemStyle-Width="7%" HeaderText="Icon">
    <ItemTemplate>
        <asp:Image ID="ProfImage" ImageUrl='<%#Eval("Thumbnail","/Images/{0}")%>' runat="server" Width="30px" Height="30px"></asp:Image>
    </ItemTemplate>
</asp:TemplateField> 
```

它给了我整条道路。我只需要startbutton.png。但是，我需要将整个路径存储在数据库中，因为我需要它在其他地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:00:54.647

这有点乱，但尝试替换以下...

```
<%#Eval("Thumbnail","/Images/{0}")%> 
```

使用（未经测试**和更新**）...

~~<%#Eval(System.IO.Path.GetFileName(Container.DataItem["Thumbnail"]),"/Images/{0}")%>~~ <%#string.Format("/Images/{0}", System.IO.Path.GetFileName(Eval("Thumbnail")))%>

# sql - 如何修改函数以将输出作为三列？

> ID：11176178
> 
> 赞同：0
> 
> 时间：2012-06-24T08:57:55.443
> 
> 标签：sql, sql-server, sql-server-2008

我得到了这个函数来分割字符串，但它在我想要的一列中给出了恶意字符串，如下所示。

我如何修改函数以获得如下输出。

我在谷歌上找到了这个功能。

```
CREATE FUNCTION dbo.Split(@String varchar(8000), @Delimiter char(1))       
returns @temptable TABLE (items varchar(8000))       
as       
begin       
    declare @idx int       
    declare @slice varchar(8000)       

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

    while @idx!= 0       
    begin       
        set @idx = charindex(@Delimiter,@String)       
        if @idx!=0       
            set @slice = left(@String,@idx - 1)       
        else       
            set @slice = @String       

        if(len(@slice)>0)  
            insert into @temptable(Items) values(@slice)       

        set @String = right(@String,len(@String) - @idx)       
        if len(@String) = 0 break       
    end   
return       
end  

SELECT * from dbo.Split('hello hi guys',' ');

items
--------
hello
hi
guys

I want like this 

col1    col2     col3
_____  _______  _______
hello   hi       guys 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T09:44:22.050

如果您可以保证不会将任何 XML 字符传递到`@String`中，请尝试以下操作...

**更新**以使 XML 字符“更安全”（尽管如果`]]>`包含它仍然会失败......

```
CREATE FUNCTION dbo.Split(@String varchar(8000), @Delimiter char(1))       
returns @temptable TABLE (col1 varchar(8000), col2 varchar(8000), col3 varchar(8000))       
as       
begin
    declare @xml xml
    set @xml = '<data><col><![CDATA[' + 
                replace(@String,@Delimiter,']]></col><col><![CDATA[') + 
                ']]></col></data>'

    insert into @temptable (col1, col2, col3)
    select parts.value('col[1]','varchar(8000)'),
        parts.value('col[2]','varchar(8000)'),
        parts.value('col[3]','varchar(8000)')
    from @xml.nodes('/data') as parts(parts)
return       
end 
```

# sql - 你会为这两个表引入sql表继承开销吗

> ID：11176179
> 
> 赞同：0
> 
> 时间：2012-06-24T08:58:32.680
> 
> 标签：sql, sql-server, inheritance, aggregation, single-table-inheritance

您会为 TemplateTeststep 和 TestplanTeststep 表引入表继承吗？

TestplanTeststep 是/将**始终**是 TemplateTeststep（红色）加上一些可编辑字段（紫色）的只读**副本**。

TemplateTeststep 将具有永远不会出现在 TestplanTeststep 表中的各个字段。TestplanTeststep 将具有永远不会出现在 TemplateTeststep 表中的各个字段。

此外，TestplanTeststep 表包含 TemplateTeststep 表中的一些只读字段。（没有人应该更改它们，因为它们需要安全用于报告/调查等......）

![在此处输入图像描述](../Images/d2833227aa63fa124f8506c715f2d8f3.png)

TemplateTeststep 仍然具有字段 ModifiedBy 和 ModifiedAt，它们不会出现在 TestplanTeststep 上，用于历史跟踪谁更改了什么/何时更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:10:38.000

这实际上取决于使用的上下文。

**速度是一个大问题吗？**如果对这些数据进行大量读取，将单个逻辑实体的值拆分到两个表中会增加读取延迟。在低吞吐量系统中，这可以忽略不计，但如果您有数亿行，那么这将加起来。

**限制数据集的大小是否比读取访问性能更重要？**众所周知，非规范化数据通常会使它们更快地读取（它们只存储在一个连续的空间中，而不是存储在磁盘的不同扇区中）并减少所需的锁定量，但会增加存储空间量整个数据集。

**您是在使用 ORM 解决方案**，还是将“手动”跨表加入？前者可能会使数据拆分变得微不足道，而后者可能更容易出错。

我认为这里没有正确或错误的答案。我倾向于使用在代码库的其余部分/组织的其余部分中使用的任何方法。

对于它的价值，*我*可能会使用多表继承，因为我倾向于将 Java 的 Hibernate 用于 ORM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T11:20:51.193

1.  您应该`Foreign Key`在 TestPlanTestStep 中有一个`Table`。

2.  TemplateTestStep 和 TestPlanTestStep的`Primary-Foreign`关键`Relation-Ship`要遵循`Second form of Normalization`。

3.  `Design`就像`De-Normalization`有人需要报告一样。如果不是这样，请删除`Duplicate`列以避免`redundancy`在`Database`.

# jquery - jQuery 手风琴展开

> ID：11176180
> 
> 赞同：0
> 
> 时间：2012-06-24T08:08:26.587
> 
> 标签：jquery

我正在尝试从此示例中使用 jQuery 创建手风琴

[http://docs.jquery.com/UI/Accordion](http://docs.jquery.com/UI/Accordion)

标记是相同的，即

```
<div id="accordion">
   <h3><a href="#">First header</a></h3>
   <div>First content</div>
   <h3><a href="#">Second header</a></h3>
   <div>Second content</div>
</div> 
```

而且我有正确排队的脚本文件，其中包含以下内容：

```
$ = jQuery;
$(document).ready(function() {
   $("#accordion").accordion();
}); 
```

但我在控制台输出中收到此错误

```
TypeError: 'undefined' is not a function (evaluating '$("#accordion").accordion()') 
```

结果是所有 div 都被展开，即不可点击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:06:27.453

这是你在找什么：http: [//jsfiddle.net/epinapala/faEg9/](http://jsfiddle.net/epinapala/faEg9/)

我想你的依赖 js 文件不存在！

```
 <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<div id="accordion">
   <h3><a href="#">First header</a></h3>
   <div>First content</div>
   <h3><a href="#">Second header</a></h3>
   <div>Second content</div>
</div>​

  $(document).ready(function() {
    $("#accordion").accordion();
  });​ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-24T09:10:12.413

尝试使用这个：

```
//$ = jQuery; 
jQuery(document).ready(function() {
     $("#accordion").accordion();
}); 
```

# php - 如何以编程方式在 HTML 页面上显示编辑文本字段？

> ID：11176184
> 
> 赞同：-2
> 
> 时间：2012-06-24T09:00:07.877
> 
> 标签：php, javascript, jquery

我有以下任务：mysql数据库中有一个简单的表：

```
<html>
<body>
<table border='1'>
<?php
    mysql_connect('url','user','') or die('Connect');
    mysql_select_db('jquery_test') or die('Db');
    $query=mysql_query('SELECT * FROM labels');
    while($data=mysql_fetch_assoc($query))
    {
        echo '<tr>';
        echo '<td>'.$data['id'].'</td>';
        echo '<td>'.$data['label'].'</td>';
        echo '<td>'.$data['english'].'</td>';
        echo '</tr>';
    }
?>
</table>
</body>
</html> 
```

这段代码显示了一个简单的表格。我需要做以下功能：当用户将光标移动到 $data['english'] 字段时，它必须出现用于编辑的文本字段和“保存”按钮；当光标离开这个词时，该字段必须消失。我的意思是一个很好的例子：[http](http://translate.uservoice.com/sets/51-end-user-ru/translations?filter=missing) ://translate.uservoice.com/sets/51-end-user-ru/translations?filter=missing 。请帮帮我，我只知道 HTML/PHP，不知道如何完成这项任务。使用 JQuery 会非常好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T09:06:58.810

查看[这个](http://www.appelsiini.net/projects/jeditable/default.html)jquery 插件以制作可编辑的标签并将其用于`.mouseover()`和 `.mouseleave()`功能。

# javascript - 将引用分配给哪些类型而不是在 Javascript 中复制？

> ID：11176189
> 
> 赞同：0
> 
> 时间：2012-06-24T09:00:59.747
> 
> 标签：javascript, variables, memory, pointers, garbage-collection

我在我的手机上，所以我不能自己测试。另外，我可能会错过一些东西。

我知道当分配一个数字时，比如a = b，b实际上被复制到a中。但是，如果 b 是一个对象，则只会传递一个引用。其他类型呢？有什么我需要担心的吗？

另外，我听说你不能在 C# 中使用指针，因为变量会被 JC 移动。Javascript中是否相同？那么这些参考文献是如何用这些语言解决的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:23:25.153

**javascript** 根据规范，您有类型：undefined、null、boolean、string、number、object。你可以认为它们是*不可变*的，除了对象，它实际上只是一个（散列）映射。所以是的，如果你分配变量，它是“复制的”（你不在乎它是否真的是），除非它是一个对象类型。举个例子：

```
var x = "hello";
var y = x; //copy or reference, who cares?
x += " world"; //new string object, x references it
alert(y); //alerts hello 
```

**C#** 根据 C# 2.0 规范，有**结构/值类型**和**类/引用类型**。因此，从实际的角度来看，值类型的变量实际上将数据存储在调用堆栈上（并在赋值时被复制），而引用类型的变量只是一个引用（数据进入堆）。例子：

```
int holds_a_value = 5;
StringBuilder holds_a_reference = new StringBuilder(); 
```

您可以在 C# 中使用**指针**（指针 = 引用），但如果您**在 .net / C# 之外**调用不安全函数或使用**不安全**代码，则必须**固定它们。**例如：

 ****```
fixed (int* p = something) { /*p is safe to use, memory doesn't move */} 
```****

# javascript - Jquery 点击事件无法正常工作

> ID：11176190
> 
> 赞同：0
> 
> 时间：2012-06-24T09:01:47.750
> 
> 标签：javascript, jquery

当我单击最新生成的文本框时，我希望添加一个新的文本输入框。

但是只有当我单击第一个文本输入框时它才会生成新的文本输入框。那么，有什么解决办法吗？

```
<script type="text/javascript">
$(function(event){
  $('.add-new').click(function(){
    $('.add-new').removeClass();
    $('form').append("<br><input type='text' name='user[]' class='add-new'/>");      
  });
});

</script>

<div>
  <form method='post' name='login'>
    <input type='text' name='user[]' class='add-new'/>
  </form>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T09:02:45.223

```
$('form').on('click','.add-new', function(){ 
```

直接事件 =>**委托事件**

[**现场演示**](http://jsfiddle.net/GaMty/2)

**完整代码：**

```
$('form').on('click', '.add-new', function() {
    $(this).removeClass('add-new');
    $(this).closest('form').append("<br><input type='text' name='user[]' class='add-new'/>");
});​ 
```

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序，如下所述。
> 
> **委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件**。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。

[`on`文档](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T09:03:02.080

```
$('form[name=login]').on('click', '.add-new', function() {
    $(this).removeClass(); // $(this) instead of $('.add-new') 
                           // $(this) point to the clicked element
                           // which you want

    $('form').append("<br><input type='text' name='user[]' class='add-new'/>");
}); 
```

当您更改类名`add-new`并使用同一类动态附加新元素时，您需要委托事件。

阅读更多关于[`.on()`](http://api.jquery.com/on)

### 笔记

`.on()`委托事件的语法

```
$(container).on(eventName, target, handlerFunction) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T09:04:32.430

**演示** [http://jsfiddle.net/JuvwB/8/](http://jsfiddle.net/JuvwB/8/)

请注意：你应该使用`$(this)`你的偶数已经绑定`.add-new`。

以上都是不错的解决方案，

希望这有帮助，干杯

**代码**

```
$(function(event){
  $('.add-new').on('click', function(){
    $(this).removeClass();
    $('form').append("<br><input type='text' name='user[]' class='add-new'/>");      
  });
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T09:05:06.877

这不起作用的原因是因为当您设置“点击”事件时，您的目标不存在，所以没有“点击”事件绑定到它。

jQuery 有一个花哨的函数，称为“on”函数，它可以捕捉冒泡事件。

```
$(document).on('click','.add-new', function(){

} 
```

所有事件（单击、鼠标悬停等）都从最深的节点开始，并在 html 树中向上冒泡，直到文档。在文档中捕获它们是安全的，除非您明确调用“stopPropagation”或在冒泡点击处理函数中间处理的返回 false。

你也可以在树中间抓住它，`$("form").on...`甚至`$("div").on...`

# ios - 当前道路的限速

> ID：11176191
> 
> 赞同：1
> 
> 时间：2012-06-24T09:01:51.237
> 
> 标签：ios, maps

是否可以获得当前道路的限速？我不确定这是否会使用“地图”应用程序来完成，因为我认为它不包含速度限制数据。

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T14:27:42.313

MapKit 中没有检索速度限制的功能。

您可以通过直接查询谷歌，或者通过查询其他一些第三方限速数据库来获得它。但是，您可能不太可能找到免费提供此类数据的服务。

弄清楚你从哪里获取数据，然后有人可能会帮助你如何检索它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T18:59:30.650

我发现了一个开放数据项目，它可能对您和其他许多人都有帮助： [http ://en.wikipedia.org/wiki/Wikispeedia](http://en.wikipedia.org/wiki/Wikispeedia)

# python - Pyramid 是否有信号/插槽系统

> ID：11176192
> 
> 赞同：7
> 
> 时间：2012-06-24T09:01:55.003
> 
> 标签：python, signals, pylons, pyramid

Django 恰好内置了一个[Signals](https://docs.djangoproject.com/en/1.4/topics/signals/)系统，它对于我正在从事的项目非常有用。

我一直在阅读 Pyramid 文档，它似乎确实有一个与信号密切相关的[事件系统，但并不完全。](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/events.html)像这样的东西适用于通用信号系统还是我应该自己推出？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T09:27:26.230

Pyramid 使用的事件系统实现了与 Signals 系统完全相同的用例。您的应用程序可以定义任意事件并将订阅者附加到它们。

要创建一个新事件，请为其定义一个接口：

```
from zope.interface import (
    Attribute,
    Interface,
    )

class IMyOwnEvent(Interface):
    foo = Attribute('The foo value')
    bar = Attribute('The bar value') 
```

然后定义事件的实际实现：

```
from zope.interface import implementer

@implementer(IMyOwnEvent)
class MyOwnEvent(object):
    def __init__(self, foo, bar):
        self.foo = foo
        self.bar = bar 
```

该接口实际上是可选的，但有助于文档编制并使提供多种实现变得更加容易。因此，您可以`@implementer`完全省略接口定义和部件。

无论您想在哪里发出此事件的信号，请使用该`registry.notify`方法；在这里，我假设您有一个可以访问注册表的请求：

```
request.registry.notify(MyOwnEvent(foo, bar)) 
```

这会将请求发送给您注册的任何订阅者；或 with`config.add_subscriper`或 with `pyramid.events.subscriber`:

```
from pyramid.events import subscriber
from mymodule.events import MyOwnEvent

@subscriber(MyOwnEvent)
def owneventsubscriber(event):
    event.foo.spam = 'eggs' 
```

您还可以使用`IMyOwnEvent`接口而不是`MyOwnEvent`类，您的订阅者将收到所有实现该接口的事件的通知，而不仅仅是您对该事件的特定实现。

请注意，通知订阅者永远不会捕获异常（就像`send_robust`在 Django 中那样）。

# android - 启动器图标显示在模拟器上，但不显示在手机上

> ID：11176198
> 
> 赞同：4
> 
> 时间：2012-06-24T09:02:35.037
> 
> 标签：android

如标题所述，我的启动器图标在模拟器上显示正常，但默认图标显示在我的手机上。

这是我的 AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.ytz.bc"
    android:versionCode="1"
    android:versionName="1.0a" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".ProjectBriefcaseActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <uses-permission android:name="android.permission.INTERNET"></uses-permission>

</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T09:07:35.210

最有可能的是，您仅在一个可绘制文件夹中将默认图标替换为您的图标，巧合的是，模拟器正在使用该文件夹，而您的设备正在使用其他文件夹之一。请参阅[此](http://developer.android.com/guide/practices/ui_guidelines/icon_design.html)链接以了解图标设计指南，以及[此](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html#size)链接以了解推荐尺寸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T09:26:52.630

您可以发布所有可绘制文件夹中的内容吗？

您可能已经做过这件事：将 drawable-mdpi 文件夹中的 ic_launcher.png 文件替换为另一个图像（您的启动器图标）并将其命名为 ic_launcher.png 。

您实际上不需要重命名drawable文件夹中的文件图标文件，但您需要更改android清单以告诉应用程序使用哪个文件作为启动器图标。

假设如果我将 launcher_icon.png 放在 drawable-mdpi 文件夹中，并且我希望它成为我的启动器图标，我会将清单更改为：

```
<application
    android:icon="@drawable/launcher_icon"
    android:label="@string/app_name" > 
```

我改变了标签

`android:icon="@drawable/ic_launcher"`

到

`android:icon="@drawable/launcher_icon"`

粘贴您的启动器图像并根据该图像的文件名进行更改...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T10:01:14.880

如果您已正确放置图标，但您仍然看不到图标更改，请转到`Project`-> `Clean...`。

在`res`里面的文件夹中，`bin`您将找到所有资源项。你可以在清理项目之前检查一下，你会发现你有旧`ic_launcher`文件。如果您清理项目，这些文件夹将被删除。当您再次运行您的应用程序时，将复制一组新文件并且您的应用程序图标将被更改。

希望这可以帮助。

**注意：**仅当您替换了所有文件夹中的图标仍然获得旧图标时，这才有效。

# php - 多空检查

> ID：11176203
> 
> 赞同：0
> 
> 时间：2012-06-24T09:03:34.537
> 
> 标签：php

是否有更有效、更简洁、更简洁的以下形式：

```
if($x==null or $y==null or $z==null or $w==null) return true; 
```

**一般来说，我怎样才能获得空变量的名称？**

```
function any_null(array $a){
    foreach($a as $v) if ($v==null) return //variable name;
    return false;
}
var_dump(any_null(array($x,$y,$z,$w))); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T09:06:54.457

[isset](http://php.net/isset)可以接受多个参数。

> 如果提供了多个参数，则仅当设置了所有参数时 isset() 才会返回 TRUE。

由于这与您想要的相反，因此需要一个简单的否定：

```
!isset($x, $y, $z, $w) 
```

另一个好处是它`isset`不是常规函数，不会对未定义的变量发出任何通知。

* * *

从变量中获取名称更难。您将需要以某种方式检查它们中的每一个。我认为最好和最具可扩展性的解决方案是使用关联数组，以变量名作为键：

```
function any_null(array $a){
    foreach($a as $k => $v) if ($v === null) return $k;
    return false;
}
any_null(array('x' => $x, 'y' => $y)); 
```

注意严格比较 ( `===`)。否则`false`, `""`,`0`和`array()`也将被视为“null”。

另一种解决方案是*只*传递变量的名称并使用[$GLOBALS](http://php.net/manual/en/reserved.variables.globals.php)数组。在这里，我将它与对[func_get_args](http://php.net/func_get_args)的调用相结合，以获得更简洁的调用约定：

```
function any_null(){
    $a = func_get_args();
    foreach($a as $k) if (!isset($GLOBALS[$k])) return $k;
    return false;
}
any_null('x', 'y', 'z'); 
```

不过，最后一个解决方案有很多缺点。您只能测试全局范围内的变量，并且只能测试标准变量（不能测试数组中的元素，不能测试对象等）。那些的语法会很笨拙。

# jsf-2 - f:ajax 方法在加载 jsf 页面时被调用

> ID：11176204
> 
> 赞同：0
> 
> 时间：2012-06-24T09:03:44.490
> 
> 标签：jsf-2

我有一个简单的 3line jsf 页面和一个支持 bean。我在我的页面中使用命令按钮。Onclick 事件我正在调用 ajax。其中 ajax 方法将输出文本组件添加到子项。现在问题来了。输出文本组件在页面加载时呈现，而不是在点击页面时呈现。

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <h:form>
            <h:commandButton id="button1" action="return false" value="Submit">
                <f:ajax execute="#{bb.method1()}" render="@form" transient="true" event="click" />
            </h:commandButton>
        </h:form>
    </h:body>
</html> 
```

支持 bean 代码

```
@Named("bb")
@SessionScoped
public class BackingBean implements Serializable {

public BackingBean() {
}

public void method1()
{
    HtmlOutputText out=new HtmlOutputText();
    out.setValue("Text1");
    FacesContext context=FacesContext.getCurrentInstance();
    context.getViewRoot().getChildren().add(out);
    context.getViewRoot().setTransient(true);
}   
} 
```

单击按钮 firebug show status 200 OK .. 但我在页面上看不到任何变化

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:45:45.187

该`execute`属性应该引用一个空格分隔的输入组件的客户端 ID 集合，这些输入组件需要在 ajax 提交期间进行处理。当视图被渲染并且绑定到它的任何方法因此被立即调用时，会评估此属性。

您应该改用该`listener`属性。

```
<f:ajax listener="#{bb.method1()}" render="@form" transient="true" event="click" /> 
```

`render`属性也是如此。

### 也可以看看：

*   [`<f:ajax>`标签文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/ajax.html)

# php - Magento PayPal 付款缺少运费...但只有有时

> ID：11176208
> 
> 赞同：1
> 
> 时间：2012-06-24T09:04:09.387
> 
> 标签：php, magento, paypal, magento-1.4

一个客户有 Magento 1.4.0.1 和 Authorize.net 和 PayPal 标准。它已经工作了 6 个月。6 月中旬 Magento 开始发送一些 PayPal 订单，无需支付运费。有些订单很好，而有些订单却不见了。似乎没有任何东西将订单与缺少的运费联系起来。似乎 Magento 没有发送运费或 PayPal 没有正确接收。有人遇到过这种情况或有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:06:20.080

我知道这个问题有点老了，但这[是答案和解决方案](https://stackoverflow.com/questions/11411201/magento-1-4-paypal-payments-standard-sometimes-wont-charge-shipping/11434333#11434333)。它本质上是这个版本的 Magento 的一个错误（1.4.0.1）。

包含的链接是一个页面，它描述了导致问题的原因，并提供了一个修改文件的 zip 文件，可用于替换 Magento 安装中的一些核心文件。

# macos - 由于 QAC 中缺少程序集，无法构建 MonoDevelop

> ID：11176212
> 
> 赞同：0
> 
> 时间：2012-06-24T09:05:06.953
> 
> 标签：macos, mono, monodevelop

我想克制在 Mac OSX 上构建 MonoDevelop 时寻求更多帮助，但在这一点上，这似乎是我可以进步的唯一途径。

我已遵循本指南： http: [//monodevelop.com/Developers/Mac_Support/Building_MonoDevelop_on_OS_X](http://monodevelop.com/Developers/Mac_Support/Building_MonoDevelop_on_OS_X)

我可以简单地使用 运行项目`make run`，但是我收到以下错误：

```
aquageneral$ make rundyld: warning, unknown environment variable: DYLD_LIBRARY_FALLBACK_PATH
cd main && make run
dyld: warning, unknown environment variable: DYLD_LIBRARY_FALLBACK_PATH
dyld: warning, unknown environment variable: DYLD_LIBRARY_FALLBACK_PATH
PATH="/Library/Frameworks/Mono.framework/Versions/2.10.9/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/git/bin" PKG_CONFIG_PATH="/Users/aquageneral/Desktop/monodevelop/monodevelop/local-config:/usr/local/lib/pkgconfig:/usr/local/share/pkgconfig:" LD_LIBRARY_PATH="" DYLD_FALLBACK_LIBRARY_PATH="" MONO_GAC_PREFIX="/usr/local:" MONODEVELOP_LOCALE_PATH="/Users/aquageneral/Desktop/monodevelop/monodevelop/main/build/locale" MONO_ADDINS_REGISTRY="/Users/aquageneral/Desktop/monodevelop/monodevelop/main/build/bin" UBUNTU_MENUPROXY=0 exec -a "monodevelop" /Library/Frameworks/Mono.framework/Versions/2.10.9/bin/mono --debug /Users/aquageneral/Desktop/monodevelop/monodevelop/main/build/bin/MonoDevelop.exe --no-redirect
dyld: warning, unknown environment variable: DYLD_LIBRARY_FALLBACK_PATH
dyld: warning, unknown environment variable: DYLD_LIBRARY_FALLBACK_PATH
ERROR [2012-06-24 19:00:28Z]: Error setting process name
System.DllNotFoundException: libc.dylib
  at (wrapper managed-to-native) MonoDevelop.Core.Runtime:prctl (int,byte[],intptr,intptr,intptr)
  at MonoDevelop.Core.Runtime.unixSetProcessName (System.String name) [0x00000] in /Users/aquageneral/Desktop/monodevelop/monodevelop/main/src/core/MonoDevelop.Core/MonoDevelop.Core/Runtime.cs:257 
  at MonoDevelop.Core.Runtime.SetProcessName (System.String name) [0x00010] in /Users/aquageneral/Desktop/monodevelop/monodevelop/main/src/core/MonoDevelop.Core/MonoDevelop.Core/Runtime.cs:240 
ERROR [2012-06-24 19:00:28Z]: Error initialising GLib logging.
System.DllNotFoundException: libglib-2.0.0.dylib
  at (wrapper managed-to-native) GLib.Marshaller:g_malloc (uintptr)
  at GLib.Marshaller.StringToPtrGStrdup (System.String str) [0x00000] in <filename unknown>:0 
  at GLib.Log.SetLogHandler (System.String logDomain, LogLevelFlags flags, GLib.LogFunc logFunc) [0x00000] in <filename unknown>:0 
  at MonoDevelop.Ide.Gui.GLibLogging.set_Enabled (Boolean value) [0x00030] in /Users/aquageneral/Desktop/monodevelop/monodevelop/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide/GLibLogging.cs:50 
  at MonoDevelop.Ide.IdeStartup.Run (MonoDevelop.Ide.MonoDevelopOptions options) [0x00056] in /Users/aquageneral/Desktop/monodevelop/monodevelop/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide/IdeStartup.cs:88 
FATAL ERROR [2012-06-24 19:00:28Z]: MonoDevelop failed to start. Some of the assemblies required to run MonoDevelop (for example gtk-sharp, gnome-sharp or gtkhtml-sharp) may not be properly installed in the GAC.
System.TypeInitializationException: An exception was thrown by the type initializer for Gtk.Application ---> System.DllNotFoundException: glibsharpglue-2
  at (wrapper managed-to-native) GLib.Thread:glibsharp_g_thread_supported ()
  at GLib.Thread.get_Supported () [0x00000] in <filename unknown>:0 
  at Gtk.Application..cctor () [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at MonoDevelop.Ide.IdeStartup.Run (MonoDevelop.Ide.MonoDevelopOptions options) [0x0007e] in /Users/aquageneral/Desktop/monodevelop/monodevelop/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide/IdeStartup.cs:95 
  at MonoDevelop.Ide.IdeStartup.Main (System.String[] args) [0x0004f] in /Users/aquageneral/Desktop/monodevelop/monodevelop/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide/IdeStartup.cs:503 
make[1]: *** [runmd] Error 255
make: *** [run] Error 2 
```

我从头开始重新安装了 Mono MDK，我什至跑过： `export DYLD_FALLBACK_LIBRARY_PATH=/Library/Frameworks/Mono.framework/Versions/Current/lib:/lib:/usr/lib`从同一个终端以及第二次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T20:24:49.030

警告消息表明您已设置`DYLD_LIBRARY_FALLBACK_PATH`，但应该是`DYLD_FALLBACK_LIBRARY_PATH`。虽然如果您正确地重新导出它，您应该能够忽略该警告。

但是，实际上给您造成问题的是，MonoDevelop 的配置脚本捕获了`DYLD_FALLBACK_LIBRARY_PATH`when you的值`./configure`，并在 you 时使用它`make run`。这应该是一种方便，但在这里它捕获了一个空值。

只需`./configure`再次运行以使其捕获新值，然后`make`和`make run`。

# vb.net - Visual Studio - PDB 文件

> ID：11176213
> 
> 赞同：0
> 
> 时间：2012-06-24T09:05:18.693
> 
> 标签：vb.net, debugging, visual-studio-2008

如果您使用“附加到处理”工具，Visual Studio 使用哪个 .PDB 文件？我按照以下步骤操作：

1.  创建了一个简单的 VB.NET 项目
2.  在 Visual Studio 中打开源代码并单击构建
3.  双击“调试”文件夹中的 .EXE
4.  将 Visual Studio 附加到正在运行的进程
5.  然后我可以添加断点并按预期单步执行代码

然后我删除了所有可以找到的 .PDB 文件，即在 DEBUG、RELEASE 和 OBJ 中，但我仍然能够调试。Visual Studio 在哪里查找 .PDB 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:18:28.743

当您在调试期间查看“模块”窗口时 - 在 c# 键盘布局中，命令是：

`Ctrl`+ `D`,`M`

我创建了一个简单的 WinForm 应用程序，编译，然后我在调试箱中运行 exe 并附加一个调试器并单击一个按钮以在断点处停止代码控制，如下所示。

然后在 Visual Studio 中，我按下了模块窗口快捷键，它告诉我 PDB 文件的加载位置：

![在此处输入图像描述](../Images/5f7c4daa8f968684ce25f5f50211befd.png)

# php - AJAX 到 PHP 发送值

> ID：11176217
> 
> 赞同：0
> 
> 时间：2012-06-24T09:06:12.897
> 
> 标签：php, jquery, html, ajax

```
var studno = $('#studno').val();
$(document).ready(function () {
    $('.go').click(function () {
        $('.inup').load('prochat.php', {
            studno: studno
        });
    });
}); 
```

我有这段代码，它应该将 studno 的值发送到 prochat.php 但每次它只说未定义。谁能解释一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T09:10:22.630

试试这个：

```
$(document).ready(function(){
    $('.go').click(function(){
        var studno = $('#studno').val();
        $('.inup').load('prochat.php', {studno:studno});
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T09:09:33.663

试试这个：

```
$(document).ready(function(){

    $('.go').click(function(){
        var studno = $('#studno').val();
        $('.inup').load('prochat.php', {studno:studno});
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T09:09:36.500

没关系。原来这行得通

```
$('.inup').load('prochat.php', {studno: $('#studno').val()}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T09:09:51.383

这应该会更好：

```
$(document).ready(function () {
    $('.go').click(function () {
        $('.inup').load('prochat.php', {
            studno: $('#studno').val()
        });
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T09:11:40.730

这些可能是可能的原因：

1.  在您将值分配给 studno 的行中，studno 的值可能未定义
2.  #studno 没有在 html 中定义

可能的解决方案：

-。尝试在 click 函数中分配值：

像这样：

```
$('.go').click(function(){
    studno = $('#studno').val();
    $('.inup').load('prochat.php', {studno:studno});
}); 
```

-。确保 id 为 studno 的元素存在于 html 文档中

# android - 为不同的布局使用不同的资源。布局区别

> ID：11176224
> 
> 赞同：1
> 
> 时间：2012-06-24T09:07:24.300
> 
> 标签：android, android-layout

我有一个布局正常和布局大。此外，我提供了几个不同分辨率的启动图像：480x800 和 1280x800。

我的问题是：

1.  在我的任务中，据说我必须根据设备分辨率区分布局（一个用于 480x800，另一个用于 1280x800）。有没有可能实现它？考虑到手机具有 480x800 分辨率和平板电脑（1280x800 或更高）的假设，我可以实施此方案，但我不确定它是否正确。

2.  我创建了一个测试项目，我试图根据大小来区分布局，但我不能让 android 使用 480x800 图像作为 layout-normal 和 1280x800 图像作为 layout-large：在这两种情况下它都显示 480x800 图像。我想，这是因为尺寸，在设备的情况下，不等于分辨率，在图像的情况下。但是，我需要为 480x800 和 1280x800 提供完全不同的外观。我在这里有什么选择？

谢谢。

PS我正在针对Android 2.3进行构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:21:15.160

您有“[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)”文档可以帮助解决这个问题。

> 例如，以下是应用程序中的资源目录列表，该应用程序为不同的屏幕尺寸提供不同的布局设计，并为中、高和超高密度屏幕提供不同的位图可绘制对象。

```
res/layout/my_layout.xml             // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation

res/drawable-mdpi/my_icon.png        // bitmap for medium density
res/drawable-hdpi/my_icon.png        // bitmap for high density
res/drawable-xhdpi/my_icon.png       // bitmap for extra high density 
```

# java - 为什么我不能创建 Console 类的对象？

> ID：11176226
> 
> 赞同：1
> 
> 时间：2012-06-24T09:07:41.243
> 
> 标签：java, oop

我正在尝试创建[Console](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html)类的对象，但未能成功。我收到此错误“构造函数 Console() 不可见”。我在文档中也找不到任何构造函数。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T09:14:58.327

Jon Skeet 的回答是正确的：您应该使用[`System.console()`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#console%28%29)来获取`Console`.

这样做的原因是[单例设计模式](http://en.wikipedia.org/wiki/Singleton_pattern)`Console`的实现，当 API 的作者想要确保创建一个并且只有一个类的实例时使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T09:10:43.540

您不*打算*直接创建实例。相反，请使用以下[`System.console()`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#console%28%29)方法：

```
Console console = System.console(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T09:11:45.847

您不能创建 Console 对象，构造函数是私有的。

但是您可以通过这种方式获取 Console 对象：

```
Console console = System.console(); 
```

查看[javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/Console.html)了解更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T09:12:04.577

您不需要创建`Console`类的对象。这不是必需的。请从文档中阅读以下内容：

> 如果这个虚拟机有一个控制台，那么它由这个类的一个唯一实例表示，可以通过调用 System.console() 方法获得。如果没有可用的控制台设备，则调用该方法将返回 null。

`System.console()`因此，如果任何控制台设备可用于虚拟机，您将获得控制台。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T09:16:49.600

当控制台的构造函数是私有的时，它不能被显式实例化。您可以通过以下方式访问与 JVM 关联的控制台：

```
Console console = System.console(); 
```

[请参阅此处](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#console%28%29)的文档。

# java - 按（区分大小写）字母顺序对字符串进行排序的简单方法

> ID：11176227
> 
> 赞同：46
> 
> 时间：2012-06-24T09:07:48.730
> 
> 标签：java, string, comparator, alphabetical

我需要按字母顺序对字符串列表进行排序：

```
List<String> list = new ArrayList();
list.add("development");
list.add("Development");
list.add("aa");
list.add("AA");
list.add("Aa"); 
```

一种常见的方法是使用比较器：

```
Collections.sort(list, String.CASE_INSENSITIVE_ORDER); 
```

CaseInsensitiveComparator 的问题是“AA”等于“aa”。字符串按照相同值的相加顺序出现在结果中，不正确：

```
"aa","AA","Aa","development","Development" 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-06-24T09:40:35.593

如果您不想添加对 Guava 的依赖项（根据迈克尔的回答），那么这个比较器是等效的：

```
private static Comparator<String> ALPHABETICAL_ORDER = new Comparator<String>() {
    public int compare(String str1, String str2) {
        int res = String.CASE_INSENSITIVE_ORDER.compare(str1, str2);
        if (res == 0) {
            res = str1.compareTo(str2);
        }
        return res;
    }
};

Collections.sort(list, ALPHABETICAL_ORDER); 
```

而且我认为它很容易理解和编码......

该方法的最后 4 行可以更简洁地写成如下：

```
 return (res != 0) ? res : str1.compareTo(str2); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-24T09:07:49.090

解决问题的简单方法是使用来自 Guava [http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ComparisonChain.html的比较链](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ComparisonChain.html)

```
private static Comparator<String> stringAlphabeticalComparator = new Comparator<String>() {
        public int compare(String str1, String str2) {
            return ComparisonChain.start().
                                compare(str1,str2, String.CASE_INSENSITIVE_ORDER).
                                compare(str1,str2).
                                result();
         }
 };
Collections.sort(list, stringAlphabeticalComparator); 
```

链中的第一个比较器将根据不区分大小写的顺序对字符串进行排序，第二个比较器将根据不区分大小写的顺序对字符串进行排序。由于例外字符串按照字母顺序出现在结果中：

```
"AA","Aa","aa","Development","development" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-01T11:59:18.867

只需使用

```
java.util.Collections.sort(list) 
```

没有 String.CASE_INSENSITIVE_ORDER 比较器参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T10:54:03.600

[我最近在这里](https://stackoverflow.com/questions/369512/best-way-to-compare-objects-by-multiple-fields/10940234#10940234)回答了一个类似的问题。对您的问题应用相同的方法将产生以下解决方案：

```
list.sort(
  p2Ord(stringOrd, stringOrd).comap(new F<String, P2<String, String>>() {
    public P2<String, String> f(String s) {
      return p(s.toLowerCase(), s);
    }
  })
); 
```

# iphone - 创建 UIButton

> ID：11176229
> 
> 赞同：0
> 
> 时间：2012-06-24T09:08:00.307
> 
> 标签：iphone, ios, memory-management, uibutton

在`loadView`我创建 20 `UIButton`s 期间，我想根据 a 的状态更改标题文本`UIPageControl`。

我有一个预保存 plist，它在当前页面更改的事件中加载到`NSArray`调用`arrChars`中，我将按钮标题设置为数组中的相关文本标题。执行此操作的代码是：

```
for (int i = 1; i < (ButtonsPerPage + 1); i++) {

    UIButton *uButton = (UIButton *)[self.view viewWithTag:i];

    if(iPage == 1) {
        iArrPos = (i - 1);
    } else {
        iArrPos = (iPage * ButtonsPerPage) + (i - 1);
    }

    [uButton setAlpha:0];

    NSLog(@"Trying: %d of %d", iArrPos, [self.arrChars count]);
    if (iArrPos >= [self.arrChars count]) {                    
        [uButton setTitle: @"" forState: UIControlStateNormal];
    } else {

        NSString *value = [[NSString alloc] initWithFormat:@"%@", [self.arrChars objectAtIndex:iArrPos]];
        NSLog(@"%@", value);

        [uButton setTitle: [[NSString stringWithFormat:@"%@", value]    forState: UIControlStateNormal];

        [value release];

        //////Have tried:
        //////[uButton setTitle: value forState: UIControlStateNormal];

        //////Have also tried:
        //////[uButton setTitle: [self.arrChars objectAtIndex:iArrPos] forState: UIControlStateNormal];

        //////Have also also tried:
        //////[uButton setTitle: [[self.arrChars objectAtIndex:iArrPos] autorelease] forState: UIControlStateNormal];
    }

    [uButton setAlpha:1];
} 
```

设置按钮的标题时，它似乎不会自动释放上一个标题，并且分配会不断增加。我究竟做错了什么？

之前有人告诉我，通过分配跟踪事物是追踪泄漏的不好方法，因为据我所知，该对象没有在 Instruments 中泄漏，但我的总生存分配继续攀升，直到我收到内存警告。如果有更好的方法来跟踪那里，我很想知道。

**更新**

忘了提一下，我没有使用从数组中检索到的值，而是将标题设置为 @"Test" - 这很好，每次更改页面时都不会无休止地增加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:12:54.677

您正在做很多不必要的字符串创建和格式化。您可以替换这些行：

```
NSString *value = [[NSString alloc] initWithFormat:@"%@", [self.arrChars objectAtIndex:iArrPos]];
NSLog(@"%@", value);

[uButton setTitle: [[NSString stringWithFormat:@"%@", value] forState: UIControlStateNormal]; 
```

用这些：

```
NSString *title = [self.arrChars objectAtIndex:iArrPos];

[uButton setTitle:title forState:UIControlStateNormal];
[title release]; 
```

使用`setTitle:`on`title`会增加保留计数 - 请务必在`release`之后使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:11:51.857

经过许多漫长的夜晚，我决定硬着头皮把这个发送到苹果的 DTS 中。

虽然回复很有用，但不是我所希望的。在 arrChar 中偶尔会有字形，当加载时我被告知不要被卸载。完整解释：

*据我所知，iOS 在将字形加载到内存后不会卸载它们。这就是为什么您在 Instrument.app 中看到内存分配在加载新字符时会增加，而在您稍后来回时保持不变。iOS 的设计行为几乎是我们无法改变的。如果你真的想控制内存使用，你可以交替将字符制作成图像，并使用 UIImage (imageWithContentsOfFile:) 来加载和释放。*

希望这可以帮助那里的人。

# objective-c - 具有“iboutlet”属性的属性必须是对象类型（无效的“BOOL”（又名“签名字符”））

> ID：11176230
> 
> 赞同：2
> 
> 时间：2012-06-24T09:08:50.353
> 
> 标签：objective-c, cocoa, nib

将我的项目更新到 10.7 SDK 并切换调试器后，我收到以下消息：

```
Property with 'iboutlet' attribute must be an object type (invalid 'BOOL' (aka 'signed char')) 
```

它在更新之前完美运行。关于如何解决这个问题的任何提示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-12T13:47:44.103

您必须导入地图框架（MapKit/MapKit.h）

```
#import <MapKit/MapKit.h> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T12:04:08.823

如果您为组件使用自定义类（即从 UI* 子类化），请记住您需要为您的类导入 .h 文件，因此您的属性指针不仅仅是编译器的 (id)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T16:56:15.423

IBOutlets 总是对象，它们是在 xibs/nibs 中引用的值，你不能用标量值真正做到这一点。如果您需要设置布尔值，那么您可以在对象的 -awakeFromNib 方法中调用 setter，或者根据您正在执行的操作：kvo 或委托可能是合适的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T09:12:48.203

尝试取消链接并再次链接 IBOutlet，或尝试将 分配给`boolValue`持有该对象的变量。

据我所知，使用新的 SDK，很多东西都被弃用了，并且无法正常工作。这就是为什么我讨厌使用测试版！

# html - 使用 CSS 创建三个带有分隔符和文本的框，每个框居中

> ID：11176241
> 
> 赞同：0
> 
> 时间：2012-06-24T09:10:36.020
> 
> 标签：html, css

我试图找出创建一行三个框（列）的最佳方法，在框 1 和 2 以及框 2 和 3 之间有分隔线（垂直线）。文本需要在每个框内居中。

**CSS**

```
h2 {
    color: #00ADEF;
    margin-top:0;
    margin-bottom:0;
    font-family:Arial, Helvetica, sans-serif;
    font-size:20px;
    font-weight:bold;
    line-height:23px;
}

p {
    margin-top:0;
}

.3colwrapper {
    width: 930px;
    margin: 0 auto;
}

.colbox {
    float:left;
    margin: 10px;
    width: 210px;
    background:#DDD;
    padding:10px 40px;
} 
```

**标记**

```
<div class="3colwrapper">
    <div class="colbox"><h2>Step One</h2>
        <p>Sign up</p>
    </div>
    <div class="colbox"><h2>Step Two</h2>
        <p>Verify</p>
    </div>
    <div class="colbox"><h2>Step Three</h2>
        <p>Participate</p>
    </div>        
</div> 
```

这是我到目前为止所做的工作：http: [//cssdesk.com/YyjAr](http://cssdesk.com/YyjAr)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T09:36:50.530

```
 h2 {
color: #00ADEF;
margin-top: 0;
margin-bottom: 0;
font-family: Arial, Helvetica, sans-serif;
font-size: 20px;
font-weight: bold;
/* [disabled]line-height:23px; */
}

p {

margin-top:0;
}

.3colwrapper {
    width: 930px;
    margin: 0 auto;
}

.colbox {
float: left;
width: 210px;
background: #DDD;
border-right-width: medium;
border-right-style: solid;
margin-top: 10px;
margin-bottom: 10px;
padding-top: 10px;
padding-right: 40px;
padding-bottom: 10px;
padding-left: 40px;
}
 p {
 text-align: center;
 }

<html>
<body>
<div class="3colwrapper">
<div class="colbox"><h2>Step One</h2>
<p>Sign up</p>
</div>
<div class="colbox"><h2>Step Two</h2>
<p>Verify</p>
</div>
<div class="colbox"><h2>Step Three</h2>
<p>Participate</p>
</div>        
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:03:12.047

```
 h2 {
color: #00ADEF;
margin-top: 0;
margin-bottom: 0;
font-family: Arial, Helvetica, sans-serif;
font-size: 20px;
font-weight: bold;
/* [disabled]line-height:23px; */
   }

p {
 margin-top:0;
}

.3colwrapper {
    width: 930px;
    margin: 0 auto;
}

.colbox {
float: left;
width: 210px;
background: #DDD;
border-right-width: medium;
border-right-style: solid;
margin-top: 10px;
margin-bottom: 10px;
padding-top: 10px;
padding-right: 40px;
padding-bottom: 10px;
padding-left: 40px;
border-right-color: #000;
}

.colbox1 {
float: left;
width: 210px;
background: #DDD;
border-right-width: medium;
border-right-style: solid;
margin-top: 10px;
margin-bottom: 10px;
padding-top: 10px;
padding-right: 40px;
padding-bottom: 10px;
padding-left: 40px;
border-right-color: #000;
}

.colbox2 {
float: left;
width: 210px;
background: #DDD;

margin-top: 10px;
margin-bottom: 10px;
padding-top: 10px;
padding-right: 40px;
padding-bottom: 10px;
padding-left: 40px;
border-right-color: #000;
  }
p {
text-align: center;
  }
</style>
</head>

<body>
<div class="3colwrapper">
  <div class="colbox"><h2>Step One</h2>
 <p>Sign up</p>
  </div>

 <div class="colbox1"><h2>Step Two</h2>
 <p>Verify</p>
</div>
<div class="colbox2"><h2>Step Three</h2>
<p>Participate</p>
</div>        
</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T09:20:45.627

[http://cssdesk.com/MZJ7f](http://cssdesk.com/MZJ7f)这是你想要的吗？

# mysql - UNHEX 和 X (MySQL) 的区别

> ID：11176249
> 
> 赞同：11
> 
> 时间：2012-06-24T09:11:08.140
> 
> 标签：mysql, guid, hex

在处理数据库中的十六进制值时，MySQL UNHEX 和 X 之间到底有什么区别？

例如。

```
SELECT * FROM test WHERE guidCol IN (UNHEX('hexadecimalstring'));

SELECT * FROM test WHERE guidCol IN (X'hexadecimalstring'); 
```

两者都给了我确切的结果集。那么有什么区别吗？性能影响？

**编辑：** guidCol 的底层类型当然是二进制的

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-24T10:13:34.437

`UNHEX()`是[一个函数](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_unhex)，因此你可以做类似的事情

```
SET @var = '41';
SELECT UNHEX(@var);
SELECT UNHEX(hex_column) FROM my_table; 
```

`X`另一方面，是[十六进制字面](http://dev.mysql.com/doc/refman/5.5/en/hexadecimal-literals.html)量的语法。你不可以做这个：

```
SET @var = '41';
SELECT X@var; -- error (string litteral expected)
SELECT X'@var'; -- error (`@` is not a hexadecimal digit)
SELECT X(@var); -- returns NULL, not too sure about the reason... [edit: but this is probably why you are inserting NULL values]
SELECT X(hex_column) FROM my_table; -- returns NULL as well 
```

这解释了为什么总是使用 获得更好的性能`X`：您使用的是语言构造而不是函数调用。`X`不需要评估变量，因为它需要一个文字字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-31T22:01:45.637

请注意，即使在 MySQL 5.6 中，X'' 符号在参考 mysql 客户端中也有长度限制，而 UNHEX() 没有（出现）。我不知道 X'' 的限制是什么，因为它没有正式记录，但我在尝试插入 BLOB 时遇到了它。使用 X'' 字面量，mysql 客户端抛出了一个足够长的十六进制序列的语法错误，而相同序列的 UNHEX() 则没有。显然，对于实际的 GUID，长度不是问题，但我认为这对于在一般情况下使用此问题回答 mysql 插入二进制数据的其他人很有用。

# iphone - 如何在 xcode/Objective C 中将 UISlider 和加速度计数据转换为 16 位 char HEX

> ID：11176253
> 
> 赞同：0
> 
> 时间：2012-06-24T09:11:50.070
> 
> 标签：iphone, objective-c, xcode, type-conversion, uislider

我需要将 UISlider 值和我的 iPhone 加速度计数据转换为 char 格式`char hexData = {0x00, 0x00, 0x01, 0xA0}`。对此有什么想法吗？加速度计值是有符号（正数和负数）数字，而 UISlider 值的范围是 0 到 100。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:07:58.690

好吧，我不知道数据应该以什么字节顺序发送；您可能需要颠倒顺序。

但是您应该能够摆脱简单的 C 操作，例如以下。

```
 char fourChar[4];
    int* value = (int*)(&fourChar);
    *value = (int)floatValueFromSlider;  // or the simple values from your picker
    [appNote sendCharArray:fourChar];    // assuming the method wants a char[] of only 4 characters 
```

这将是小端格式。根据接收方的期望，您可能必须在发送之前交换字节。您可以根据需要进一步操作它。

# c++ - C++ SFML 鼠标移动

> ID：11176261
> 
> 赞同：0
> 
> 时间：2012-06-24T09:13:34.890
> 
> 标签：c++, sfml

我正在尝试检测鼠标移动事件并使用 sf::RenderWindow pollEvent 方法将其移回屏幕中间，并检测事件类型 sf::Event::MousePressed。问题是当我检测到鼠标移动时，我需要将鼠标移回屏幕中间，为此我使用 sf::Mouse::setPosition 但我认为（也许我错了）该函数本身调用sf::Event::MouseMoved 使用时，恐怕会造成无限循环。

我这样做的方式的例子：（我知道 0, 0 它不是中间它只是和例子）

```
while (app.pollEvent(Event))
{
  if(Event.type == sf::Event::MouseMoved)
        {
            sf::Mouse::setPosition(0 , 0));
        }
} 
```

对不起，我的英语不好！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:03:11.937

尝试`app.SetCursorPosition(x, y);`改用。

另外，我会跳过对事件的检查，因为无论如何您都希望光标在每帧末尾的中间结束。

# c# - 使用 Web 服务时需要代理身份验证错误

> ID：11176269
> 
> 赞同：6
> 
> 时间：2012-06-24T09:14:43.507
> 
> 标签：c#, wcf, web-services, proxy, web

我有一个在 Windows 7 和 Windows XP 上运行的 .Net 4.0 Windows 应用程序。应用程序中的一个模块使用他们的网络服务连接到互联网上的一个 url [比如 http://abc.com/xyz/MyWebService]。这个功能一直有效，直到上周我开始收到此错误消息时在 Web 服务上调用方法

> 在[http://abc.com/xyz/MyWebService](http://abc.com/xyz/MyWebService) 上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。 InnerException 是：HTTP Error 407 Proxy authentication required

我多次重新运行此代码[在 Windows 7 上]，我发现这种行为是随机的......即。有时能够在服务器上调用 webservice 方法而不会出现任何错误。

不确定幕后发生了什么以及什么可以解释这种随机行为。此外，此错误不会出现在安装了 Windows XP 且位于公司 Intranet 上不同地理位置的计算机上。

有任何想法吗？

注意：当我在 app.config 中添加以下节点时，错误似乎已经消失：

```
<system.net>
    <defaultProxy enabled="true" useDefaultCredentials="true">
    </defaultProxy>
</system.net> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T12:59:34.263

在我们的一个客户端连接我们的网络服务时，我为这个问题面临了将近 2 周的痛苦。

您需要使用实现 IWebProxy 的自定义代理模块覆盖 System.Net 配置

第 1 步：创建程序集 (DLL) 第 2 步：向其中添加以下类

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Configuration;

namespace MyProjectNameSpace.Utils.WebProxy
{
    public class CustomWebProxy : IWebProxy
    {
        public ICredentials Credentials
        {
            get
            {
                string _proxyUserName  = ConfigurationManager.AppSettings["ProxyUserName" ] as string ?? "";
                string _proxyPassword  = ConfigurationManager.AppSettings["ProxyPassword" ] as string ?? "";
                string _useProxyDomain = ConfigurationManager.AppSettings["UseProxyDomain"] as string ?? "";
                string _proxyDomain    = ConfigurationManager.AppSettings["ProxyDomain"   ] as string ?? "";

                return String.IsNullOrEmpty(_proxyDomain)
                    ? new NetworkCredential(_proxyUserName, _proxyPassword)
                    : new NetworkCredential(_proxyUserName, _proxyPassword, _proxyDomain);
            }
            set { }
        }

        public Uri GetProxy(Uri destination)
        {
            string _proxyServer = ConfigurationManager.AppSettings["ProxyServer"] as string ?? "";
            Uri result = new Uri(_proxyServer);
            return result;
        }

        public bool IsBypassed(Uri host)
        {
            return false;
        }
    }
} 
```

第 3 步：编译到发布模式 第 4 步：将 DLL 引用到您的 WCF 客户端项目 第 5 步：打开 WCF 客户端项目的 Web.Config 或 App.Config 文件并添加以下配置。

```
<appSettings>
        <add key="ProxyServer" value="http://192.168.1.254:9099"/>
        <add key="ProxyUserName" value="dipak.r"/>
        <add key="ProxyPassword" value="password"/>
        <add key="UseProxyDomain" value="true"/>
        <add key="ProxyDomain" value="DOMAINNAME"/>
</appSettings> 
```

添加以下部分或更改它。

```
<system.net>
    <defaultProxy enabled="true" useDefaultCredentials="false">
      <module type="MyProjectNameSpace.Utils.WebProxy.CustomWebProxy, MyProjectNameSpace.Utils.WebProxy"/>
    </defaultProxy>
</system.net> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T19:52:56.037

我认为这与您的 WCF 服务无关。

如果您坐在 ISA 服务器或其他东西后面，这是因为更改了防火墙的配置

查看下面的链接以获得进一步的说明

[wcf-http-407-proxy-authentication-required](http://www.mikebevers.be/blog/2009/06/wcf-http-407-proxy-authentication-required/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T19:00:40.013

从所提供的信息来看，运行此代码的 Windows XP 机器似乎属于以下类别之一：

*   不使用代理
*   此位置的代理不需要身份验证（使用默认帐户）

这对于不会投资多个代理并且不希望通过其主园区路由所有流量的额外延迟的小型公司来说很常见。

听起来 Windows 7 位置使用了需要身份验证的代理。正如[Coding Gorilla](https://stackoverflow.com/users/228963/coding-gorilla)指出的那样，您的代理设置已经在控制面板的“Internet 选项”下进行了配置。

要验证这一点，您可以检查 XP 机器上的“Internet 选项”以查看它是否配置了代理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-03T10:56:30.000

只需将其添加到 web.config

```
<system.net>
    <defaultProxy enabled="true" useDefaultCredentials="true">
    </defaultProxy>
</system.net>
</configuration> 
```

# android - 如何向多个收件人发送短信？

> ID：11176270
> 
> 赞同：4
> 
> 时间：2012-06-24T09:14:51.370
> 
> 标签：android

如何在android中向多个收件人发送短信？我想在我的应用程序中向多个接收者发送短信。我知道这段代码：

```
Uri smsToUri = Uri.parse("smsto:" + 10086);
                Intent intent = new Intent(
                        android.content.Intent.ACTION_SENDTO, smsToUri);
                String message = "hello";
                // message = message.replace("%s", StoresMessage.m_storeName);
                intent.putExtra("sms_body", message);
                startActivity(intent); 
```

这适用于单个收件人。但是如何使用“ACTION_SENDTO”意图将消息发送给许多收件人？也就是说，如何调用第三方应用程序向手机中的多个收件人发送短信？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T09:24:45.463

向多个号码发送短信：

```
String strnum="10086;10086;10087;10089";
Uri smsToUri = Uri.parse("smsto:" + strnum); 
```

或使用[SmsManager](http://developer.android.com/reference/android/telephony/SmsManager.html)向多个号码发送短信，请参阅此帖子

[无法在 Android 中使用 SmsManager 发送短信](https://stackoverflow.com/questions/8998655/unable-to-send-sms-using-smsmanager-in-android)

# python - 列出所有 memcached 键/值

> ID：11176273
> 
> 赞同：2
> 
> 时间：2012-06-24T09:15:12.393
> 
> 标签：python, caching, memcached

我知道这个问题已经被问过很多次了，官方的 memcached 常见问题解答中也包含了这个问题。但我的情况是 - 我只想将它用于管理面板目的。我想在我的管理页面中查看带有值的键，所以如果它很慢并且违反最佳实践并不重要。请告知，如果可能的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T09:24:08.240

没有办法保证工作。我找到的唯一方法是您可以在 google 上找到的方法，但有一个限制：只会返回 1 MB - 它可能不是所有的键。而且它可能会很慢..

如果您真的必须拥有所有这些密钥，您可能不得不破解源代码。

我会说：不，你不能。

为什么你需要所有这些钥匙？我会考虑重新设计您的应用程序，以免您的管理面板依赖于缓存服务器的内部

# iphone - 何时使用 Core Data 的 NSMainQueueConcurrencyType？

> ID：11176275
> 
> 赞同：33
> 
> 时间：2012-06-24T09:16:05.610
> 
> 标签：iphone, ios, cocoa-touch, core-data, nsmanagedobjectcontext

是否仅在 MOC 有一个`NSManagedObjectContext`使用`NSMainQueueConcurrencyType`初始化的子 MOC 的情况下初始化 using `NSPrivateQueueConcurrencyType`？

提供一些背景知识：我的应用程序具有传统结构，其中主表视图由 a 驱动，并且使用具有自己的 MOC 的子类`NSFetchedResultsController`从 Web 服务异步导入数据。`NSOperation`我不确定在那种情况下两个 MOC 是否应该使用`NSConfinementConcurrencyType`（我相信默认设置）或者是否应该使用`NSMainQueueConcurrencyType`与主线程上获取的结果控制器相关联的 MOC，而后台 MOC 是否应该使用`NSConfinementConcurrencyType`.

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-06-24T09:55:25.810

首先是关于 Core Data 新上下文类型的秘籍。

`NSMainQueueConcurrencyType`创建一个与主调度队列相关联的上下文，从而与主线程相关联。您可以使用这样的上下文将其链接到需要在主线程上运行的对象，例如 UI 元素。

`NSPrivateQueueConcurrencyType`创建和管理一个私有的调度队列来操作。您必须使用新方法`performBlock:`或`performBlockAndWait:`. 然后上下文将在其自己的私有队列上执行传递的块。

最后，`NSConfinementConcurrencyType`是默认类型，**只能**在创建它的线程中使用。因此，在您的`NSOperation`中，您以正确的方式使用它。一个简单的注释。如果要将其用作子上下文，则需要有一个“队列上下文”（`NSMainQueueConcurrencyType`或`NSPrivateQueueConcurrencyType`）。

现在，关于你的问题。

> 是否仅在 MOC 具有使用 NSPrivateQueueConcurrencyType 初始化的子 MOC 的情况下使用 NSMainQueueConcurrencyType 初始化 NSManagedObjectContext？

不，没有必要。是的，您可以设置一个私有上下文，在后台执行一些工作，然后将检索到的对象推送到主上下文，但我会做相反的事情：使用 a`NSPrivateQueueConcurrencyType`作为主上下文，将 the`NSMainQueueConcurrencyType`作为前者的子上下文。这样，主上下文将只处理内存中的对象。保存到磁盘仅由专用队列执行。

班级使用这种方法`UIManagedDocument`。保存到磁盘是在后台线程（私有队列）中执行的。以这种方式，UI 不会被冻结。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T09:58:06.793

`NSMainQueueConcurrencyType`主要用于链接到 UI 的上下文。

为了保持 UI 响应，大多数业务逻辑最好在后台线程和“后台”上下文中完成。但是 UI 本身在某些时候需要使用上下文，即`NSMainQueueConcurrencyType`.

子上下文`NSMainQueueConcurrencyType`非常适合编辑可以立即保存更改的窗格，即提交到父上下文。父母不需要使用`NSMainQueueConcurrencyType`.

`NSConfinementConcurrencyType`是默认类型。它将上下文链接到当前线程，顺便说一下，通常是主线程。您不应依赖默认类型，而应依赖于最简单的应用程序。`NSMainQueueConcurrencyType`并且`NSPrivateQueueConcurrencyType`是最好的，因为您可以准确地知道每个上下文正在使用哪个队列。

# python - 在“读取初始通信数据包”时失去与 MySQL 服务器的连接

> ID：11176280
> 
> 赞同：3
> 
> 时间：2012-06-24T09:16:39.947
> 
> 标签：python, mysql

我想通过 Python 在我的本地机器和 MySQL 数据库服务器之间建立连接。

有人可以告诉我如何“与本地主机绑定地址”吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T09:24:47.740

> 有人可以告诉我如何“与本地主机绑定地址”吗？

这是一个 MySQL[配置指令](http://dev.mysql.com/doc/refman/5.1/en/server-options.html#option_mysqld_bind-address)。

在以下部分编辑全局`my.ini`文件`[mysqld]`：

```
[mysqld]
# -- various other settings
port = 3306
bind-address = 127.0.0.1
# -- other settings 
```

保存此文件，然后重新启动服务器。

### 编辑

如果您想连接到本地 Windows 实例的 MySQL，只需使用`127.0.0.1`服务器地址即可。

如果您想连接到远程服务器，即运行 Linux 的服务器，则有点复杂：

1.  首先，确保 MySQL 正在侦听 Linux 服务器的公共 IP。更改该行`bind-address =`并将其设置为服务器的公共 IP。

2.  确保端口`3306`未被任何防火墙阻止。

3.  您用来连接服务器的用户需要具有从远程 IP 连接的权限。默认情况下，用户仅被授予连接权限`localhost`- 换句话说，只有当程序与服务器本身在同一台机器上运行时，他们才能进行连接。

要从远程 IP 授予用户访问权限，请`mysql>`在使用 MySQL root 用户登录时从 shell 运行以下命令：

`GRANT ALL on somedb.* to someuser@8.8.8.8 identified by 'somepassword';`

如果您想`someuser`从*任何*远程 IP 授予访问权限：

`GRANT ALL on somedb.* to someuser@% identified by 'somepassword';`

在这些步骤之后，请确保重新启动 MySQL 服务器，以便它可以读取配置中的更改。

# java - 从 Java Servlet 项目引用 Java 应用程序项目时出现 NoClassDefFoundError

> ID：11176283
> 
> 赞同：0
> 
> 时间：2012-06-24T09:16:43.017
> 
> 标签：java, eclipse, jsp

我有一个 java 应用程序“JA”和一个包含 servlet 项目“JS”的 Java 项目。从 JS 我需要使用 JA 中存在的类。因此，我通过右键单击项目->部署程序集->添加->项目在JS中引用了JA并引用了JA。

现在我可以在 JS 中导入类文件。但是当我试图在 JS 中实例化 JA 时，它会为 JA 中使用的 .jar 文件中的每个类显示 NoClassDefFoundError 。通过在 JS 中添加 .jar 文件可以消除此错误。

我的问题是，我们需要在JS中添加所有的.jar文件，还是有其他方法。我是否缺少引用项目的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T10:53:14.260

这就是我通常的做法。右键单击 JS 项目 -> Java 构建路径 -> 项目 现在将您的 JA 项目添加为依赖项目。部署程序集只是告诉您将部署项目组件的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T09:23:32.800

您需要配置从 JA 项目中导出的库。

这可以通过**右键单击 JA 项目**-> **Java Build Path**，选择选项卡**Order 和 Export**来完成。在此选项卡上，您将看到您在 JA 上引用的所有库。选择要与 JA 一起导出的那些，单击 Ok 就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-30T16:01:54.177

我最近遇到了类似的问题！我有一个 maven、jsp 和 servlets 项目，我想从另一个项目中调用一个类，它可以工作（我可以浏览其中的方法）但是当我运行 servlet 时出现错误（NoClassDefFoundError）在 java 中添加项目构建路径（两个选项卡：项目和订单和导出）并将其添加到部署程序集中

# shell - shell中的时间条件循环

> ID：11176284
> 
> 赞同：53
> 
> 时间：2012-06-24T09:16:48.947
> 
> 标签：shell

最近刚开始学习shell脚本，所以不太了解。

我正在尝试查找基于时间的 while 循环的示例，但没有任何运气。

我想在特定的时间内运行一个循环，比如说 1 小时。所以循环运行一个小时，然后自动结束。

编辑：此循环将在没有任何睡眠的情况下连续运行，因此循环条件应基于循环的开始时间和当前时间，而不是睡眠。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-06-25T23:12:59.213

最好的方法是使用 $SECONDS 变量，它计算脚本（或 shell）运行的时间。下面的示例显示了如何运行 3 秒的 while 循环。

```
#! /bin/bash
end=$((SECONDS+3))

while [ $SECONDS -lt $end ]; do
    # Do what you want.
    :
done 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-03-29T19:23:13.283

**警告**：这个答案中的所有解决方案 - 除了`ksh`一个 - 可以返回*（但不包括）提前 1 秒*，因为它们基于基于*实时（系统）时钟*而不是推进的整数秒计数器基于*代码执行开始*的时间。

* * *

### `bash`, `ksh`,`zsh`解决方案，使用特殊的 shell 变量`$SECONDS`：

@bsravanin 答案的略微简化版本。

粗略地说，`$SECONDS`包含脚本中到目前为止经过的秒数。

并且您会通过*系统（实时）时钟*`bash`的脉冲获得*积分*秒数- 即，*幕后计数并不是真正从**（！）开始，而是从一天中最后一个完整时间秒以来的任何分数脚本恰好开始于或**变量被重置。*`zsh`***`0``SECONDS`***

 **相比之下，`ksh`按预期运行：计数真正开始于`0`您重置时`$SECONDS`；此外，`$SECONDS`报告. 中的*小*数秒`ksh`。

**因此，该解决方案可以*合理且准确地*在其中工作的唯一外壳是`ksh`**. 也就是说，**对于*粗略的*测量和超时，它仍然可以在`bash`和`zsh`**中使用。

注：以下使用`bash`shebang线；简单地替换`ksh`或`zsh`for`bash`将使脚本也与这些 shell 一起运行。

```
#!/usr/bin/env bash

secs=3600   # Set interval (duration) in seconds.

SECONDS=0   # Reset $SECONDS; counting of seconds will (re)start from 0(-ish).
while (( SECONDS < secs )); do    # Loop until interval has elapsed.
  # ...
done 
```

* * *

### 仅具有 POSIX 功能的 shell 的解决方案，例如Ubuntu 上的`sh`( )（不符合 POSIX 标准）`dash``$SECONDS`

@dcomero 的答案的清理版本。

使用返回的纪元时间`date +%s`（自 1970 年 1 月 1 日以来经过的秒数）和条件的 POSIX 语法。

*警告*：`date +%s`它本身（特别是`%s`格式）*不*符合 POSIX，但它（至少）可以在 Linux、FreeBSD 和 OSX 上运行。

```
#!/bin/sh

secs=3600                         # Set interval (duration) in seconds.
endTime=$(( $(date +%s) + secs )) # Calculate end time.

while [ $(date +%s) -lt $endTime ]; do  # Loop until interval has elapsed.
    # ...
done 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-16T06:31:04.013

You can try this

```
starttime = `date +%s`
while [ $(( $(date +%s) - 3600 )) -lt $starttime ]; do
done 
```

where `'date +%s'` gives the current time in seconds.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T22:51:24.667

`date +%s`会给你自纪元以来的秒数，所以像

```
startTime = `date +%s`
timeSpan = #some number of seconds
endTime = timeSpan + startTime

while (( `date +%s` < endTime )) ; do
    #code
done 
```

你可能需要一些编辑，因为我的 bash 生锈了

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-13T10:58:54.510

这正是我一直在寻找的，这是基于 bsravanin 回答的单行解决方案：

结束=$((SECONDS+30)); of=$((end-SECONDS)) ; 而 [ $SECONDS -lt $end ]; 在 $of 的左边做 echo $((end-SECONDS)) 秒；睡觉 1; 完毕;

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-02T15:45:29.997

您可以`-d`探索`date`.

下面是一个示例的 shell 脚本片段。它类似于其他答案，但在不同的场景中可能更有用。

```
# set -e to exit if the time provided by argument 1 is not valid for date.
# The variable stop_date will store the seconds since 1970-01-01 00:00:00
# UTC, according to the date specified by -d "$1".
set -e
stop_date=$(date -d "$1" "+%s")
set +e

echo -e "Starting at $(date)"
echo -e "Finishing at $(date -d "$1")"

# Repeat the loop while the current date is less than stop_date
while [ $(date "+%s") -lt ${stop_date} ]; do

    # your commands that will run until stop_date

done 
```

然后，您可以通过 date 理解的多种不同方式调用脚本：

```
$ ./the_script.sh "1 hour 4 minutes 3 seconds"
Starting at Fri Jun  2 10:50:28 BRT 2017
Finishing at Fri Jun  2 11:54:31 BRT 2017

$ ./the_script.sh "tomorrow 8:00am"
Starting at Fri Jun  2 10:50:39 BRT 2017
Finishing at Sat Jun  3 08:00:00 BRT 2017

$ ./the_script.sh "monday 8:00am"
Starting at Fri Jun  2 10:51:25 BRT 2017
Finishing at Mon Jun  5 08:00:00 BRT 2017 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-06-26T20:38:45.853

您可以使用[此处](https://github.com/Miserlou/Loop)`loop`提供的命令，如下所示：

```
$ loop './do_thing.sh' --for-duration 1h --every 5s 
```

它将每五秒钟做一次你的事情，持续一小时。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-02T10:26:14.203

对于更现代的方法...

## 重击

```
declare -ir MAX_SECONDS=5
declare -ir TIMEOUT=$SECONDS+$MAX_SECONDS

while (( $SECONDS < $TIMEOUT )); do
    # foo
done 
```

## 科恩

```
typeset -ir MAX_SECONDS=5
typeset -ir TIMEOUT=$SECONDS+$MAX_SECONDS

while (( $SECONDS < $TIMEOUT )); do
    # bar
done 
```**

# c# - 原始序列字符的循环日志文本框

> ID：11176290
> 
> 赞同：0
> 
> 时间：2012-06-24T09:18:13.663
> 
> 标签：c#, logging, serial-port, richtextbox

**问题**

从串口我收到一个字符流。我收到的流将被 \n 终止。我以如下方式接收串行端口数据：

```
Serial port Event 1: "123\n456\n789"
Serial port Event 2: "\n0123\n456\n789\n"
Serial port Event 3: "0123\n456\n789\n" 
```

如您所见，我的流在波动，这是非常正常的，因为我使用“当前可用的内容”读取串行端口。

我的问题是我想用 RichTextBox 将它记录到 UI 中。我不能使用 ListBox，因为我需要颜色和字体格式。

**第一种方法**

在我在下面尝试这个之前，效果很好，直到消息超过大约 30.000 行文本。UI 变得无响应。这是代码：

```
uiTextActivity.SelectionFont = new Font(uiTextActivity.SelectionFont, FontStyle.Bold);
uiTextActivity.SelectionColor = LogMsgTypeColor[(int)msgtype];
uiTextActivity.AppendText(msg);
uiTextActivity.ScrollToCaret(); 
```

后来我用它作为一个快速修复，在 2000 行之后清除该框：

```
if ((int.Parse(uiLabelCounterActivity.Text) + 1) > 2000)
   uiTextBoxResetActivity(); 
```

我想保留大约 500 行的历史记录。但是通过上面的这个快速修复，当计数器达到 2000 时，我完全丢失了我的日志。

我想我需要的是一个圆形的 FIFO 文本框。所以我可以在 500 行之后删除最旧的日志并附加新的日志。

**第二种方法**

我也试过这个（请注意，在这种情况下，最新的日志条目位于顶部，文本框中最旧的条目位于下方）

```
msg = msgToPasteWhenComplete + msg;
int c = 0; // c=zero if no newline, 1 for single newline, 2 for 2times newline and so on
int latestTermination = 0;// store the point where \n is found
for (int e = 0; e < msg.Length; e++)
{
    if (msg[e] == '\n')
    {
        c++;
        latestTermination = e+1; 
    }
}

// contains strings all terminated with \n
string msgToPaste = msg.Substring(0, latestTermination);
// contains string that is not complete (not yet terminated with \n)
msgToPasteWhenComplete = msg.Substring(latestTermination, msg.Length - latestTermination);

string previous = msgToPaste + uiTextActivity.Text;

if (previous.Length > maxDisplayTextLength) 
{
    string debugInfo3 = previous.Substring(0, maxDisplayTextLength);
    uiTextActivity.Text = debugInfo3;
}
else
    uiTextActivity.Text = previous; 
```

这*几乎*可以很好地工作。这种方法的问题是来自串行端口的行在收到 \n 之前不会被粘贴到 UI。这意味着每当通信缓慢时，我必须等待串行流完成包括 \n 在内的整行才能看到它......我想要的是直接看到每个字符。

**关于串口的信息**

我从 SerialDataReceivedEvent 获得的串行数据，在这种情况下，我使用 comport.ReadExisting() 来进行非阻塞事件。串行数据来自我的具有模拟读数的嵌入式编程板。模拟读数每秒为我提供 20 行，每行包含 20 个字符。我需要在用户界面中读取原始数据，其中必须根据串行消息的前缀将其过滤到其他文本框（例如 err 进入 error ， warn 进入警告文本框，但它们都进入活动日志. 活动日志就是这个问题的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:25:20.103

我找到了一个可行的解决方案，这是我的代码：

```
private const int maxDisplayTextLength = 5000;
private string splitString = "";
private int activityCount = 0;
private string errorMessageBox = "";
private bool errorMessageBoxNeedUpdate = true;
private int errorMessageBoxCount = 0;
private string filteredMessageBox = "";
private int filteredMessageCount = 0;
private bool filteredMessageBoxNeedUpdate = true;
private string activityLogFilterKeyword = "Warning";

string logHelperStringMaxSizeLimiter(string input)
{
    // check if our buffer isn't getting bigger than our specified max. length
    if (input.Length > maxDisplayTextLength)
    {
        // discard the oldest data in our buffer (FIFO) so we have room for our newest values
        input = input.Substring(input.Length - maxDisplayTextLength);
    }
    return input;
}

private void logHelperIncoming(string msg)
{
    msg = msg.Replace('\0', '\n'); // remove \0 NULL characters as they have special meanings in C# RichTextBox

    // add the new received string to our buffer
    splitString += msg;

    // filter out special strings 
    int searchIndexStart = splitString.Length - msg.Length;
    for (int e = searchIndexStart; e < splitString.Length; e++)
    {
        if (splitString[e] == '\n')
        {
            activityCount++;

            string subString = splitString.Substring(searchIndexStart, e - searchIndexStart) + "\n";
            searchIndexStart += e - searchIndexStart + 1; // update searchindex for next search
            string filterError = "error";
            // filter messages that start with error
            if (subString.Length > filterError.Length) // for this filter, the length should be at least length of error
            {
                if (String.Compare(subString, 0, filterError, 0, 4, true) == 0)
                {
                    errorMessageBox += subString;
                    errorMessageBoxNeedUpdate = true;
                    errorMessageBoxCount++;
                }
            }
            // filter messages that start with XXX
            if (subString.Length > activityLogFilterKeyword.Length && activityLogFilterKeyword.Length != 0) // for this filter, the length should be at least length of error
            {
                if (String.Compare(subString, 0, activityLogFilterKeyword, 0, activityLogFilterKeyword.Length, true) == 0)
                {
                    filteredMessageBox += subString;
                    filteredMessageBoxNeedUpdate = true;
                    filteredMessageCount++;
                }
            }
        }
    }
}

// outputs to main activity textbox
private void Log(LogMsgType msgtype, string msg)
{
    if (msgtype == LogMsgType.Incoming || msgtype == LogMsgType.Normal)
    {
        logHelperIncoming(msg);
    }
    else if (msgtype == LogMsgType.Outgoing)
    {

    }

    splitString = logHelperStringMaxSizeLimiter(splitString);
    filteredMessageBox = logHelperStringMaxSizeLimiter(filteredMessageBox);
    errorMessageBox = logHelperStringMaxSizeLimiter(errorMessageBox);

    uiTextActivity.Invoke(new EventHandler(delegate
    {
        // time to post our updated buffer to the UI
        uiTextActivity.Text = splitString;
        uiTextActivity.Update();
        // scroll to the newest data only if user has no focus on the 
        uiTextActivity.SelectionStart = uiTextActivity.TextLength; // make sure view is to the latest
        uiTextActivity.ScrollToCaret();
        uiLabelCounterActivity.Text = activityCount.ToString();

        if (errorMessageBoxNeedUpdate)
        {
            errorMessageBoxNeedUpdate = false;
            uiTextActivity.SelectionColor = Color.Red;
            // time to post our updated buffer to the UI
            uiTextboxErrorLog.Text = errorMessageBox;
            // scroll to the newest data only if user has no focus on the 
            uiTextboxErrorLog.SelectionStart = uiTextboxErrorLog.TextLength; // make sure view is to the latest
            uiTextboxErrorLog.ScrollToCaret();
            uiLabelCounterError.Text = errorMessageBoxCount.ToString();

        }
        if (filteredMessageBoxNeedUpdate)
        {
            filteredMessageBoxNeedUpdate = false;
            // time to post our updated buffer to the UI
            uiTextboxFilteredLog.Text = filteredMessageBox;
            // scroll to the newest data only if user has no focus on the 
            uiTextboxFilteredLog.SelectionStart = uiTextboxFilteredLog.TextLength; // make sure view is to the latest
            uiTextboxFilteredLog.ScrollToCaret();
            uiLabelCounterFiltered.Text = filteredMessageCount.ToString();
        }
        // extract value from filter and store to filter
        activityLogFilterKeyword = uiTextboxFilterKeyword.Text;

    }));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T09:40:37.757

我希望我能给你一个特定的代码块来处理，但我有一段时间不用做这种输入处理了。

话虽如此，通过将输入缓冲到`Queue`（[MSDN 参考](http://msdn.microsoft.com/en-us/library/system.collections.queue.aspx)）对象中，然后在计时器上轮询队列或响应某些其他事件（也许`OnChanged`？），您可能会获得更好的性能。

# ios - 我的 ios 应用会因发送电子邮件而被拒绝吗？

> ID：11176295
> 
> 赞同：1
> 
> 时间：2012-06-24T09:18:41.033
> 
> 标签：ios, app-store

我正在开发一个应用程序，它使用 SKPSMTPMessage 将忘记的用户名和 ID 发送到用户的电子邮件，因为用户必须登录才能访问我的应用程序以解决安全问题，苹果对此有限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:20:39.900

不，它是开源的，所以每个人都可以使用该代码，Apple 不会拒绝它发送邮件！

# iphone - 在 ScrollView 中使用 GestureRecognizer 激活 UIImageView

> ID：11176296
> 
> 赞同：0
> 
> 时间：2012-06-24T09:18:49.903
> 
> 标签：iphone, uiscrollview, uiimageview, uigesturerecognizer

一世，

我目前正在尝试将手势识别器实现到 ScrollView 中。

我首先创建了一个自定义 ScrollView，在其中集成了 ImageView 对象。

当用户单击 ImageView 时，通常 PanGestureRecognizer 会激活，并且 ImageView 对象会跟随屏幕上的移动。

我已阅读并遵循 Gesture Recognizer 和 Raywenderlich 博客上的说明（做得很好）。

如果有人知道我的代码中缺少什么，我很乐意阅读

预先感谢。这是我的代码

```
#import <Foundation/Foundation.h>
#import "mainInterface03.h"
#import <QuartzCore/QuartzCore.h>
#import "boutonHome.h"
#import "DragGestureRecognizer.h"

@class boutonHome;
@class DragGestureRecognizer;

@interface TapScrollView : UIScrollView {

   // id<TapScrollViewDelegate> delegate;
    NSMutableArray *classementBoutons;
    int n;
    int o;
    UIView *bouton01;

}

@property (nonatomic, retain) UIView *bouton01;

@property (retain, nonatomic) IBOutletCollection(UIButton) NSMutableSet* buttons;

-(id)init;
-(void)initierScrollView;

-(void) createGestureRecognizers;
-(IBAction)handlePanGesture:(UIPanGestureRecognizer*)sender;

@end 
```

m.文件

```
#import "TapScrollView.h"

@implementation TapScrollView

@synthesize bouton01;

- (id) init 
{
    if (self = [super init])
    {
        NSLog(@"Classe TapScrollView initiée");
    }
    return self;
}

-(void)initierScrollView
{
    int i;
    for (i=0; i<6; i++) {

        UIImage *image = [UIImage imageNamed:@"back.png"];
        UIImageView *bouton = [[UIImageView alloc] initWithImage:image];
        [bouton setTag:i];
        [bouton setFrame:CGRectMake(72*i+20,10,62,55)];
        [classementBoutons insertObject:bouton atIndex:i];
        [self addSubview:bouton];
        }

        UIPanGestureRecognizer *recognizer = [[UIPanGestureRecognizer alloc] initWithTarget:bouton01 action:@selector(handlePanGesture:)];
        [bouton01 addGestureRecognizer:recognizer];

}
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{    
    UITouch *touch = [touches anyObject];
    [super touchesBegan:touches withEvent:event];

    for (o=1; o<6; o++) {
    if ([touch view] ==  [self viewWithTag:o]) 
    {
    bouton01 = [self viewWithTag:o];
    }
    }

    return;
}

-(IBAction)handlePanGesture:(UIPanGestureRecognizer*)recognizer
{
    NSLog(@"Mouvement ok");
    CGPoint translation = [recognizer translationInView:self];
    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x, 
                                         recognizer.view.center.y + translation.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:self];

}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:31:41.547

我不确定这个设置是否可以工作。本质上，您正在分配任何已触摸到的视图`bouton01`，它带有手势识别器。对我来说似乎有点令人费解，而且您的代码效率也不高。

似乎当你调用`[super touchesBegan:touches withEvent:event];`它时，它会向上传递视图层次结构。只有在那之后才能分配到`bouton01`. `bouton01`因此，从不接收触摸事件似乎是合乎逻辑的。

确实，正是由于这种奇怪的方法遍历视图并将其分配给具有识别器的视图，才会出现此错误。我建议在设置过程中为所有相关视图分配相同的识别器。

# c# - 如何使用 Windows 生物识别框架 API？

> ID：11176298
> 
> 赞同：3
> 
> 时间：2012-06-24T09:19:11.593
> 
> 标签：c#, .net, security, api

我想在我的应用程序中使用指纹进行用户登录。我在 MSDN 中找到了 Windows 生物识别框架 (WBF) API。但我的问题是他们使用 C 或 C++。我想在我的 C# 和 .net 4.0 应用程序中做这件事。有没有关于如何在 .NET 中使用 WBF 的示例或教程（最受欢迎）或任何建议？

# xna - xna drawprimitives：正常翻转面

> ID：11176301
> 
> 赞同：0
> 
> 时间：2012-06-24T09:20:16.197
> 
> 标签：xna, xna-4.0

我正在绘制三角形，它们从它们应该可见的视图中是不可见的，那么我该如何翻转方向？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:29:04.903

反转顶点或索引缓冲区中的顶点顺序。或更改背面剔除设置。例如将 的设置`CullMode`为。`RasterizerState``CullMode.None`

此外，确保没有使三角形变黑/不可见的照明问题。

# c# - 从 DataGridView 到多行逗号分隔字符串

> ID：11176302
> 
> 赞同：0
> 
> 时间：2012-06-24T09:20:27.257
> 
> 标签：c#, winforms, string, datagridview

我有一个带有四列的 DataGridView，需要从其内容中创建一个多行字符串，用逗号分隔。
此代码有效，但可能 - 有一种更优雅的方式：

```
string multiLine = "";
string singleLine;    
foreach (DataGridViewRow r in dgvSm.Rows)
{
    if (!r.IsNewRow)
    {
        singleLine = r.Cells[0].Value.ToString() + ","
        + r.Cells[1].Value.ToString() + ","
        + r.Cells[2].Value.ToString() + ","
        + r.Cells[3].Value.ToString() + Environment.NewLine;
        multiLine = multiLine + singleLine;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T09:31:40.190

我不知道*优雅*，但是：

1.  **使用 StringBuilder**进行字符串操作，字符串类型是不可变的！
2.  如果您需要在两者之间做一些事情，请将第一个或最后一个循环运行分开（例如逗号分隔）所以，基本上是这样的：

```
StringBuilder multiLine = new StringBuilder();
foreach (DataGridViewRow r in dgvSm.Rows)
{
 if (!r.IsNewRow)
 {
  if (r.Cells.Count > 0)
  {
   multiLine.Append(r.Cells[0].Value.ToString()); //first separated
   for (int i = 1; i < r.Cells.Count; ++i)
   {
    singleLine.Append(','); //between values
    singleLine.Append(r.Cells[i].Value.ToString());
   }
   multiLine.AppendLine();
  }
 }
}
```

为了说明 StringBuilder 连接（只是动态字符数组）和字符串（每次使用运算符 + 连接时新对象和复制所有内容）之间的速度差异，请查看小程序：

```
public static void Main()
{
    var sw = new Stopwatch();
    sw.Start();
    StringBuilder s = new StringBuilder();
    //string s = "";
    int i;
    for (i = 0; sw.ElapsedMilliseconds < 1000; ++i)
        //s += i.ToString();
        s.Append(i.ToString());
    sw.Stop();
    Console.WriteLine("using version with type " + s.GetType().Name + " I did " +
        i + " times of string concatenation.");
}
```

对于我的电脑，它是：

```
使用String类型的版本我做了17682 次字符串连接。
使用StringBuilder类型的版本我做了366367 次字符串连接。
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T09:39:19.823

尝试这个 ：

```
 string multiLine = "";
string singleLine;    
foreach (DataGridViewRow r in dgvSm.Rows)
{
if (!r.IsNewRow)
{
singleLine = r.Cells[0].Value.ToString() + ","
+ r.Cells[1].Value.ToString() + ","
+ r.Cells[2].Value.ToString() + ","
+ r.Cells[3].Value.ToString() + "\r\n";
multiLine = multiLine + singleLine;
}
} 
```

# jsf - 在 EL 中合并 OR 条件

> ID：11176305
> 
> 赞同：0
> 
> 时间：2012-06-24T09:21:07.990
> 
> 标签：jsf, el

是否可以减少这个表达式：

```
expanded="#{bean.item == 'item1' or bean.item == 'item2' or bean.item == 'item3'}" 
```

类似于

```
bean.item == {'item1', 'item2', 'item3'} 
```

在EL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:03:11.747

不，你可以做的最接近的事情是创建一个自定义 EL 函数，例如

```
expanded="#{my:isOneOf(bean.item, 'item1', 'item2', 'item3')}" 
```

但是由于 EL 函数不支持可变参数，因此您需要为所需的每一个参数创建一个新方法。另一种方法是为分隔字符串提供显式（并记录！）支持，例如逗号分隔：

```
expanded="#{my:isOneOf(bean.item, 'item1,item2,item3')}" 
```

# php - Wordpress 响应式选择菜单

> ID：11176311
> 
> 赞同：0
> 
> 时间：2012-06-24T09:22:20.720
> 
> 标签：php, arrays, wordpress, responsive-design

我在 WordPress 中创建了一个响应式网站。该站点有许多不同的导航区域，当通过移动设备查看站点时，我希望将它们合并到一个选择菜单中。

我的 WordPress header.php 文件中的代码目前如下所示：

```
<?php dropdown_menu( array('dropdown_title' => '-- Main Menu --', 'container' => 'div',  'theme_location'=>'main_menu') ); ?> 
```

但是，我想在这个选择下拉列表中合并多个菜单并尝试过这个：

```
<?php dropdown_menu( array('dropdown_title' => '-- Main Menu --', 'container' => 'div',  'theme_location'=>'main_menu', 'theme_location'=>'top_menu', 'theme_location'=>'footer_menu') ); ?> 
```

不幸的是，这仍然只显示最后一个菜单“footer_menu”，而不是结合所有三个菜单。关于如何正确编辑上述代码以便所有菜单在选择框中显示为一个的任何想法？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:04:13.810

您可以实现此插件[http://wordpress.org/extend/plugins/responsive-select-menu/](http://wordpress.org/extend/plugins/responsive-select-menu/)或试用[http://tinynav.viljamis.com/ 。](http://tinynav.viljamis.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:05:52.070

您可以使用我在某些项目中经常使用的代码，一些简单的 pueds 自定义 jQuery

您可以更改值以设置特定的 div

```
var $mainNav    = $('#menu').children('ul'), 
```

代码完整的jQuery

```
(function($) {
    var $mainNav    = $('#menu').children('ul'),
        optionsList = '<option value="" selected>Navigate...</option>';

    // Regular nav
    $mainNav.on('mouseenter', 'li', function() {
        var $this    = $(this),
            $subMenu = $this.children('ul');
        if( $subMenu.length ) $this.addClass('hover');
        $subMenu.hide().stop(true, true).fadeIn(200);
    }).on('mouseleave', 'li', function() {
        $(this).removeClass('hover').children('ul').stop(true, true).fadeOut(50);
    });
    // Responsive nav
    $mainNav.find('li').each(function() {
        var $this   = $(this),
            $anchor = $this.children('a'),
            depth   = $this.parents('ul').length - 1,
            indent  = '';
        if( depth ) {
            while( depth > 0 ) {
                indent += '--';
                depth--;
            }
        }
        optionsList += '<option value="' + $anchor.attr('href') + '">' + indent + ' ' + $anchor.text() + '</option>';
    }).end().after('<select class="responsive-nav">' + optionsList + '</select>');
    $('.responsive-nav').on('change', function() {
        window.location = $(this).val();
    });
})(jQuery); 
```

# ios - UIScrollView 在 addSubview 或更改框架后不需要滚动

> ID：11176314
> 
> 赞同：3
> 
> 时间：2012-06-24T09:23:11.000
> 
> 标签：ios, uiscrollview, uikit

我有一个`UIScrollView`充满子视图，在创建它并最初填充它时一切都很好。

但是当我添加一个位于可见屏幕部分之外的新子视图时，或者当我只是调整一个也在可见屏幕部分之外的现有子视图的大小时，随后会出现一个 0.3 秒长的滚动动画（我可以看到它发生在我的代表身上），这似乎与新添加/调整大小的元素相匹配。

尝试：

*   pagingEnabled 始终为 NO。
*   在子视图操作期间将 scrollEnabled 设置为 NO 无济于事。
*   在子视图操作后执行 setContentOffset:animated:NO 不会阻止动画。
*   一个包含我所有子视图的巨大子视图无济于事。

我目前的解决方法是最初将框架设置为适合可见屏幕部分，或者在另一个超级视图中调整大小，但感觉很脏，并且无法处理所有情况......

在以编程方式操作子视图时，有没有办法防止这种自动滚动动画？

Xcode 4.3，适用于 5.1 的 iOS SDK。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:36:45.853

我遇到了这个问题，因为我在添加子视图之前设置了滚动视图的内容大小。

一旦我更改代码以便在添加子视图后设置滚动视图的内容大小，问题就消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T10:05:28.987

我也发现了这个问题并找到了这个解决方案[http://www.iphonedevsdk.com/forum/iphone-sdk-development/94288-disabling-uiscrollview-autoscroll.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/94288-disabling-uiscrollview-autoscroll.html)

它涉及`UIScrollView`在以下方法中子类化和不输入代码。

```
- (void)scrollRectToVisible:(CGRect)rect animated:(BOOL)animated  {

} 
```

就像那个人在链接上说的那样，我发现它有效，到目前为止没有问题。希望对你有效。

# javascript - 如何在通过 phonegap 构建 jQuery 移动应用程序的警报框中使用 history.go(-1) Javascript

> ID：11176323
> 
> 赞同：0
> 
> 时间：2012-06-24T09:25:18.357
> 
> 标签：javascript, jquery, cordova, jquery-mobile, dom-events

实际上，我正在尝试检查互联网连接，如果没有可用的互联网连接，那么我会弹出一个警告框，显示对不起，无法显示数据，并且在用户按下确定按钮时，我想将他转移回家中我的应用程序的页面。

我当前的 Javascript 函数如下，但它没有按预期工作。

```
 function showerror(){
      alert("Sorry, Check your Internet Connection. Going Back to the Home page. showerror()");   
      history.go(-1);
      } 
```

请任何形式的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:17:36.743

您应该使用该`navigator.notification.alert`方法在对话框关闭时显示带有回调的设备特定警报。然后用于`history.back()`将用户发送到上一页。

[http://docs.phonegap.com/en/1.8.1/cordova_notification_notification.md.html#notification.alert](http://docs.phonegap.com/en/1.8.1/cordova_notification_notification.md.html#notification.alert)

例子：

```
function showerror() {
  navigator.notification.alert(
    'Sorry, Check your Internet Connection. Going Back to the Home page. showerror()',
    function() {
      history.back();
    }
  );
} 
```

**编辑：**

如果您知道要返回的特定页面，您可以随时使用`$.mobile.changePage`转到该页面。唯一的问题是在带有后退按钮的设备（Android、WP7）上运行时。

例子：

```
function showerror() {
  navigator.notification.alert(
    'Sorry, Check your Internet Connection. Going Back to the Home page. showerror()',
    function() {
      $.mobile.changePage('#homePage');
    }
  );
} 
```

# iphone - Cocos2D 和 Xcode 4 - 使用模板的编译器错误

> ID：11176325
> 
> 赞同：0
> 
> 时间：2012-06-24T09:25:46.840
> 
> 标签：iphone, xcode, cocos2d-iphone

我刚刚在 Xcode 4 中安装了 cocos2d 模板。当我从模板创建一个新项目并运行它时，它显示大约 30 个编译器错误。即使不对模板进行任何更改。你知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:28:11.310

我只花了 10 或 15 分钟加上在这种情况下修复了一堆错误，所以我猜：迁移到 Xcode 4.X 会导致 cocos2d 项目（包括 Kobold2D）出现许多问题，其中大多数需要输入“（unsigned int）”在“带格式的字符串”类型操作的参数列表中的参数前面，主要创建调试类型输出。通常有问题的论点是“自我”，但有时只是解析为（或可以）无符号整数的其他“类型”。在少数情况下，我没有参数，而是将错误字符串引用到 %@; 这些需要在字符串末尾和关闭括号之间添加一个“，自我”。在大约 5% 到 10% 的情况下，提供了“修复”以自动进行更正（通常更改格式字符以匹配参数）。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:12:26.403

请添加更多有关错误的信息，但您似乎忘记将 OpenGLES 和 QuartzCore 框架添加到您的项目中。我可能是错的...

# qt - 是否可以使用 Qt 创建托盘小程序？

> ID：11176327
> 
> 赞同：1
> 
> 时间：2012-06-24T09:26:27.000
> 
> 标签：qt, system-tray, tray, systray

我想使用 Qt 制作一个托盘小程序，它将使用 bash 脚本的输出来显示一些基本信息。在Qt中可以做到吗？不过，我无法通过谷歌找到任何教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T09:56:00.880

[系统托盘图标示例](https://doc.qt.io/qt-5/qtwidgets-desktop-systray-example.html)怎么样？

（请注意，术语“小程序”与术语“托盘图标”不同。前者不仅用于图标，而且在大多数情况下（非常依赖于系统）是后台进程并由用户放置进入托盘栏，您的托盘图标由前台应用程序放置在系统托盘栏中。）

# javascript - AngularJS：如何使用 $resource 请求发送身份验证令牌？

> ID：11176330
> 
> 赞同：62
> 
> 时间：2012-06-24T09:26:42.570
> 
> 标签：javascript, authentication, angularjs

从我的 API 请求资源时，我想发送一个身份验证令牌。

我确实使用 $resource 实现了一项服务：

```
factory('Todo', ['$resource', function($resource) {
 return $resource('http://localhost:port/todos.json', {port:":3001"} , {
   query: {method: 'GET', isArray: true}
 });
}]) 
```

我有一个存储身份验证令牌的服务：

```
factory('TokenHandler', function() {
  var tokenHandler = {};
  var token = "none";

  tokenHandler.set = function( newToken ) {
    token = newToken;
  };
  tokenHandler.get = function() {
    return token;
  };

  return tokenHandler;
}); 
```

我想从`tokenHandler.get`通过`Todo`服务发送的每个请求中发送令牌。我可以通过将其放入特定操作的调用中来发送它。例如这有效：

```
Todo.query( {access_token : tokenHandler.get()} ); 
```

但我更愿意将 access_token 定义为`Todo`服务中的参数，因为它必须随每次调用一起发送。并改善 DRY。但是工厂中的所有内容都只执行一次，因此 access_token 在定义工厂之前必须可用，并且之后不能更改。

**有没有办法在服务中放置一个动态更新的请求参数？**

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-24T21:20:18.517

感谢安迪乔斯林。我选择了他包装资源操作的想法。资源的服务现在看起来像这样：

```
.factory('Todo', ['$resource', 'TokenHandler', function($resource, tokenHandler) {
  var resource = $resource('http://localhost:port/todos/:id', {
    port:":3001",
    id:'@id'
    }, {
      update: {method: 'PUT'}
    });

  resource = tokenHandler.wrapActions( resource, ["query", "update"] );

  return resource;
}]) 
```

如您所见，资源首先以通常的方式定义。在我的示例中，这包括一个名为`update`. 之后，资源被方法的返回覆盖，该`tokenHandler.wrapAction()`方法将资源和一组动作作为参数。

正如您所期望的那样，后一种方法实际上包装了操作以在每个请求中包含身份验证令牌并返回修改后的资源。因此，让我们看一下代码：

```
.factory('TokenHandler', function() {
  var tokenHandler = {};
  var token = "none";

  tokenHandler.set = function( newToken ) {
    token = newToken;
  };

  tokenHandler.get = function() {
    return token;
  };

  // wrap given actions of a resource to send auth token with every
  // request
  tokenHandler.wrapActions = function( resource, actions ) {
    // copy original resource
    var wrappedResource = resource;
    for (var i=0; i < actions.length; i++) {
      tokenWrapper( wrappedResource, actions[i] );
    };
    // return modified copy of resource
    return wrappedResource;
  };

  // wraps resource action to send request with auth token
  var tokenWrapper = function( resource, action ) {
    // copy original action
    resource['_' + action]  = resource[action];
    // create new action wrapping the original and sending token
    resource[action] = function( data, success, error){
      return resource['_' + action](
        angular.extend({}, data || {}, {access_token: tokenHandler.get()}),
        success,
        error
      );
    };
  };

  return tokenHandler;
}); 
```

如您所见，该`wrapActions()`方法从其参数创建资源的副本，并循环遍历`actions`数组以为每个操作调用另一个函数`tokenWrapper()`。最后，它返回资源的修改副本。

该`tokenWrapper`方法首先创建一个预先存在的资源操作的副本。此副本有一个尾随下划线。就这样`query()`变成了`_query()`。之后，一个新方法会覆盖原来的`query()`方法。正如 Andy Joslin 所建议的，这种新方法包装`_query()`了 auth 令牌，以便为通过该操作发送的每个请求提供身份验证令牌。

这种方法的好处是，我们仍然可以使用每个 angularjs 资源（获取、查询、保存等）附带的预定义操作，而无需重新定义它们。在其余代码中（例如在控制器中），我们可以使用默认操作名称。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-07-17T08:56:20.570

另一种方法是使用 HTTP 拦截器，它将“魔术”授权标头替换为当前 OAuth 令牌。下面的代码是特定于 OAuth 的，但对读者来说是一个简单的练习。

```
// Injects an HTTP interceptor that replaces a "Bearer" authorization header
// with the current Bearer token.
module.factory('oauthHttpInterceptor', function (OAuth) {
  return {
    request: function (config) {
      // This is just example logic, you could check the URL (for example)
      if (config.headers.Authorization === 'Bearer') {
        config.headers.Authorization = 'Bearer ' + btoa(OAuth.accessToken);
      }
      return config;
    }
  };
});

module.config(function ($httpProvider) {
  $httpProvider.interceptors.push('oauthHttpInterceptor');
}); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-11-07T14:16:29.883

我真的很喜欢这种方法：

[http://blog.brunoscopelliti.com/authentication-to-a-restful-web-service-in-an-angularjs-web-app](http://blog.brunoscopelliti.com/authentication-to-a-restful-web-service-in-an-angularjs-web-app)

其中令牌始终在请求标头中自动发送，无需包装器。

```
// Define a new http header
$http.defaults.headers.common['auth-token'] = 'C3PO R2D2'; 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-06-24T18:35:59.020

您可以为它创建一个包装函数。

```
app.factory('Todo', function($resource, TokenHandler) {
    var res= $resource('http://localhost:port/todos.json', {
        port: ':3001',
    }, {
        _query: {method: 'GET', isArray: true}
    });

    res.query = function(data, success, error) {
        //We put a {} on the first parameter of extend so it won't edit data
        return res._query(
            angular.extend({}, data || {}, {access_token: TokenHandler.get()}),
            success,
            error
        );
    };

    return res;
}) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-05-23T13:38:10.087

我也必须处理这个问题。我不认为这是否是一个优雅的解决方案，但它可以工作并且有 2 行代码：

例如，我想您在 SessionService 中进行身份验证后从服务器获取令牌。然后，调用这种方法：

```
 angular.module('xxx.sessionService', ['ngResource']).
    factory('SessionService', function( $http,  $rootScope) {

         //...
       function setHttpProviderCommonHeaderToken(token){
          $http.defaults.headers.common['X-AUTH-TOKEN'] = token;
       }  
   }); 
```

之后，您来自 $resource 和 $http 的所有请求都将在其标头中包含令牌。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-03-26T21:11:07.400

另一种解决方案是使用 resource.bind(additionalParamDefaults)，它返回一个新的资源实例，绑定了附加参数

```
var myResource = $resource(url, {id: '@_id'});
var myResourceProtectedByToken = myResource.bind({ access_token : function(){
        return tokenHandler.get();
}});
return myResourceProtectedByToken; 
```

每次调用资源上的任何操作时都会调用 access_token 函数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-24T14:09:31.787

我可能误解了您的所有问题（请随时纠正我:)）但要专门解决`access_token`为每个请求添加的问题，您是否尝试过将`TokenHandler`模块注入`Todo`模块？

```
// app
var app = angular.module('app', ['ngResource']);

// token handler
app.factory('TokenHandler', function() { /* ... */ });

// inject the TokenHandler
app.factory('Todo', function($resource, TokenHandler) {
    // get the token
    var token = TokenHandler.get();
    // and add it as a default param
    return $resource('http://localhost:port/todos.json', {
        port: ':3001',
        access_token : token
    });
}) 
```

你可以打电话`Todo.query()`，它会附加`?token=none`到你的网址。或者，如果您更喜欢添加令牌占位符，您当然也可以这样做：

```
http://localhost:port/todos.json/:token 
```

希望这可以帮助 ：）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-10-06T12:52:19.300

根据您接受的答案，我建议扩展资源以便使用 Todo 对象设置令牌：

```
.factory('Todo', ['$resource', 'TokenHandler', function($resource, tokenHandler) {
  var resource = $resource('http://localhost:port/todos/:id', {
    port:":3001",
    id:'@id'
    }, {
      update: {method: 'PUT'}
    });

  resource = tokenHandler.wrapActions( resource, ["query", "update"] );
  resource.prototype.setToken = function setTodoToken(newToken) {
    tokenHandler.set(newToken);
  };
  return resource;
}]); 
```

这样，每次您想使用 Todo 对象时都无需导入 TokenHandler ，您可以使用：

`todo.setToken(theNewToken);`

我要做的另一个更改是允许默认操作，如果它们是空的`wrapActions`：

```
if (!actions || actions.length === 0) {
  actions = [];
  for (i in resource) {
    if (i !== 'bind') {
      actions.push(i);
    }
  }
} 
```

# c# - VAPIX 将音频发送到轴网络摄像机

> ID：11176333
> 
> 赞同：1
> 
> 时间：2012-06-24T09:26:53.930
> 
> 标签：c#, audio, sdk, speaker, vapix

我有一个带扬声器输出的轴凸轮。我已经在我的笔记本上安装了 Vapix 库，现在我可以接收 MEPEG-4 格式的视频了。

现在我想将从我的笔记本捕获的音频发送到具有相同库的相机。

最后我搜索了这个文档，但我不知道如何在 C# 中使用它。

[Vapix 音频 SDK](http://www.axis.com/files/manuals/vapix_audio_43309_en_1108.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-14T11:52:11.173

问题的解决方案：

```
using System;
using System.Collections.Generic;
using System.ComponentModel; 
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace VapixForToroRosso
{
public partial class Form1 : Form
{
    private string USER = "root";
    private string PASS = "Blescia";
    private string IP = "192.168.1.2";
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        axAxisMediaControl1.Volume = 100; //Set the volume of speaker
        /*
         *Use this if the camera required the login
         */
        axAxisMediaControl1.MediaUsername = USER; //Set the username
        axAxisMediaControl1.MediaPassword = PASS; //Set the password
        axAxisMediaControl1.Mute = false; //Disable Mute    
        axAxisMediaControl1.EnableReconnect = true; //Reconnect to the camera automatically

        axAxisMediaControl1.MediaURL = "rtsp://192.168.1.2/mpeg4/media.amp"; //For Retrieve the video streaming
        axAxisMediaControl1.AudioConfigURL = "http://" + IP + "/axis-cgi/view/param.cgi?camera=1&action=list&group=Audio,AudioSource.A0"; //Pre-Configuration of Camera
        axAxisMediaControl1.AudioTransmitURL = "http://" + IP + "/axis-cgi/audio/transmit.cgi"; //Url to send the streaming AUDIO          

        axAxisMediaControl1.Play();
    }

    private void btnStartStreaming_Click(object sender, EventArgs e)
    {
        axAxisMediaControl1.AudioTransmitStart(); //Start the streaming to camera
    }

    private void btnStopStreaming_Click(object sender, EventArgs e)
    {
        axAxisMediaControl1.AudioTransmitStop(); //Stop the streaming the camera
    }
   }
} 
```

# java - 用于 IRC 聊天的 Java SSH 隧道

> ID：11176335
> 
> 赞同：2
> 
> 时间：2012-06-24T09:27:21.493
> 
> 标签：java, ssh, irc

我的程序连接到 freenode.net 上的一个 IRC 房间，它使用端口 6667，显然该端口在我的大学中被阻止，因此该项目在那里无法工作（我希望在我提出那个之前我就知道这一点，但这是由于下周，所以我现在不能做一个新项目）。我读到可以通过隧道连接该连接，但我不确定该怎么做。

我读到我必须使用一个 SSH 库，但我找不到一个可以帮助我使用套接字隧道连接的库。

我在 MindTerm 中找到了一个名为 ssh 的包，但它是一个非常旧的包，它基本上使用以下几行来完成这个过程（我认为）：

```
SSHSocketFactory fact = new SSHSocketFactory("ssh.freessh.biz", 22, new SSHPasswordAuthenticator("freessh", "7QO5dkmg<"));

ventanachat.socket = fact.createSocket(servidorirc, puerto); 
```

它给了我： java.io.IOException: MindTerm 还不支持 SSHv2，在服务器中启用 SSHv1 兼容性

所以我尝试了一个支持 ssh2 的新版本，但我无法获得相同的过程，因为这里的类不同并且没有文档。

套接字基本上是 Socket socket = new Socket ("irc.freenode.net", 6667);

我想知道我可以使用哪个库，以及如何使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T10:09:13.850

你可能会因为绕过 IRC 端口的块而陷入麻烦。

我有另一个想法。在您进行开发的机器上下载并安装 IRC 服务器软件。然后您应该能够从您的客户端连接到它，而不会阻塞端口。（如果您仍然遇到端口问题，只需配置客户端和服务器使用不同的。）

* * *

或者，查看这个 SO 问题的答案：[Java 中的简单 SSH 隧道](https://stackoverflow.com/questions/1677248/simple-ssh-tunnel-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T11:07:30.017

市场上有几个用于 Java 的 SSH 库，其中大多数都支持 SSH 隧道。我们提供带有示例（包括隧道）、文档和支持的[SecureBlackbox产品（Java 版）。](http://www.eldos.com/sbb/java-ssh.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T23:26:57.030

Ganymed 和 Jsch 都支持 SSH 隧道，而且都是免费的。

# c - C：从字符串中删除符号

> ID：11176336
> 
> 赞同：0
> 
> 时间：2012-06-24T09:27:22.973
> 
> 标签：c, arrays, string, symbols

我可以知道是否有任何方法可以从 C 中的字符串中删除非字母符号？

例如我有一个`char array[5][5]`：`"hi", "my..", "name", "is,,", "bob!"`

期望的输出：`"hi", "my", "name", "is", "bob"`

无论如何要删除符号吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T10:15:42.953

这是一个非常简单的实现：

```
void keepalnum(char *src) {
    unsigned char *dest = src;
    while ((*dest = *src++))
        dest += isalnum(*dest) ? 1 : 0;
} 
```

这个想法是在每次复制后推进源指针，但只有在看到字母数字字符时才移动目标指针。

以下是你如何使用它：

```
char str[] = "quick-brown fox jumps? over the.. lazy dog!";
keepalnum(str);
printf("%s\n", str); 
```

这[打印](http://ideone.com/Ynx1H)

```
quickbrownfoxjumpsoverthelazydog 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T11:18:45.567

使用 C `isalnum(int ch);`，您可以删除既不是数字也不是字符的过滤器值，如下所示：

```
#include <stdio.h>
#include <string.h>

#define ARRAY_LEN 5
#define STR_LEN 5

int main(int argc, char *argv[])
{
    int rc = 0;

    char array[5][5];
    char out_str[5] = {0};

    int array_idx, str_idx, cpy_idx;

    strcpy(array[0], "hi");
    strcpy(array[1], "my..");
    strcpy(array[2], "name");
    strcpy(array[3], "is,,");
    strcpy(array[4], "bob!");

    for(array_idx=0; array_idx < ARRAY_LEN; array_idx++)
    {
        cpy_idx = 0;

        for(str_idx=0; str_idx < STR_LEN; str_idx++)
        {
            if(isalnum(array[array_idx][str_idx]))
            {
                out_str[cpy_idx++]= array[array_idx][str_idx];
            }
        }

        out_str[cpy_idx++] = '\0';
        printf("%s ", out_str);
    }

    printf("\n");

    return rc;
} 
```

这个例子缺少结束边界检查，因为这个例子是围绕 4 个字符的字符串加上一个终止的 0 编码的。在实践中，我声明的缓冲区大于我计划处理的最大字符串，但我仍然计算被复制的字符，这没有在这里完成。

# jquery - 当它在文档上时从委托中获取事件的来源

> ID：11176343
> 
> 赞同：1
> 
> 时间：2012-06-24T09:28:32.043
> 
> 标签：jquery, jquery-blockui

我正在使用委托（也尝试过，效果相同）来获取一般的 ajax 调用并捕获它们，因此我可以使用以下代码显示加载屏幕：

```
 $(document).ready(function() {
                $(document).delegate("", "ajaxStart", function(event) {
                    console.log(event);

                    $.blockUI({
                        message: "<h1 style='color: #000'>Loading ...</h1>",
                        overlayCSS: { 
                            backgroundColor: '#000', 
                            opacity: .1
                        },
                        css: {
                            border: '2px solid #000', 
                            padding: '15px', 
                            backgroundColor: '#fff', 
                                            '-webkit-border-radius': '10px', 
                                            '-moz-border-radius': '10px', 
                            color: '#000'
                        }
                    });
                });

                $(document).delegate("", "ajaxStop", function(event) {
                    $.unblockUI();
                });
            }); 
```

问题是我只想将加载块放在发出 ajax 调用的元素上，并且仍然使其通用。我查看了委托调用提供的事件对象，但没有找到有关如何获取源的任何线索。通常源是一个 div 或一个表。

任何帮助将不胜感激。

谢谢！

# objective-c - 使用最新的 xcode/OSX 版本构建项目时出现奇怪的应用程序行为

> ID：11176346
> 
> 赞同：4
> 
> 时间：2012-06-24T09:29:57.140
> 
> 标签：objective-c, xcode, macos, cocoa, xcode4.3

我有一个使用 xcode 用 Objective-C/Cocoa 编写的 OSX 应用程序。该应用程序已经完成，经过测试并在 App Store 上销售。

我已经有一段时间没有在这个应用程序上工作了，最近，我在我的 OSX 10.7.4 上使用 xcode 4.3.3 对其进行了重建，我注意到虽然它构建得很好，但在运行应用程序时会出现一些非常奇怪的视觉故障以前从未见过，偶尔，我在关闭应用程序时得到 EXC_BAD_ACCESS。所有这些似乎都与我正在使用的 PDFKit 框架有关。我无法调试这些问题，因为故障只是视觉上的（我无法在代码中检查），并且 EXC_BAD_ACCESS 异常来自与我的代码无关的内部分配的对象。

代码本身没有改变，我尝试了以前的代码版本，现在它们都表现出相同的奇怪行为。我尝试运行我拥有的应用程序的旧二进制文件（几个月前编译），它工作得很好。然后我尝试使用以前版本的 xcode 构建它，低至 4.2.1（当我将应用程序提交到应用商店时我知道这没问题），问题仍然存在。

然后我怀疑这可能是我的环境特有的东西，所以我在不同的机器上也使用 xcode 4.3.2 和 OSX 10.7.4 构建了项目。结果一样，问题依旧。

所以现在我怀疑它与 OSX 10.7.4 更新有关，因为这是从现在到我能够生成一个良好的应用程序构建的最后一件事。我很困惑下一步该做什么以及如何确定这个问题的原因。我有一个运行良好的旧二进制文件，并且我有一个新编译的二进制文件，该二进制文件具有相同的代码修订版，但存在问题。

我可以从这些二进制文件的差异中获得任何有用的信息吗？我可以做些什么来确定这些问题的原因？接下来我可以尝试什么？

谢谢！

注意（更新）：我在上面说过，但我想确保它是清楚的。这是一个 Mac OSX Cocoa 应用程序，而不是 iOS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:53:09.587

只需重置您的模拟器然后尝试。

我希望你检查 ARC 信息

转到您的项目目标集构建设置->搜索路径->始终搜索用户路径设置是。

并检查您的所有类变量彼此不同。

Xcode--> 首选项--> 文档检查已安装的核心库（或）像 Xcode 一样安装它--> 首选项--> 组件检查是否安装了所需的组件

在你的项目中检查这些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:29:44.083

您确定您的客户没有遇到同样的问题吗？由于您已经在另一台机器上测试了应用程序，您可能没有安装损坏的库（除非您没有从头开始安装而是使用了一些迁移工具？），所以这可能不是问题。

对我来说最合乎逻辑的解释是你的客户也有这个问题，但他们还没有报告。在这种情况下，您可能有内存问题，并且有一些技术可以解决这个问题。

无论如何，消除所有可以消除的参数以简化问题。解构应用程序直到问题不再出现，或者在不同的项目中重构应用程序直到问题再次出现。

这听起来很糟糕，但你最终会到达那里，有耐心和毅力:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T04:40:27.830

首先，您需要检查并验证构建日志中是否存在可疑的编译器警告。

对于 EXC_BAD_ACCESS，XCode 分析会给出有用的信息。

您可以尝试 10.6 或 10.5（需要手动安装）SDK。或者将部署目标限制为 10.5 或 10.6。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T11:34:36.750

我会回答我自己的问题（因为以上答案都没有真正回答）所以任何有类似问题的人都可能会有提示。我无法理解为什么会发生这种情况，但我很确定这不是我的代码的问题，而是苹果方面的一些故障。并且有一个解决方法。

首先，我在我的 Lion 10.7.4 上编译了 Apple 的示例“PDF Annotation Editor”项目，虽然功能与我的项目明显不同，但它也表现出与我的项目在使用 10.7.4 编译时的 PDFView 显示类似的故障

然后我开始在新硬盘上构建一个**全新的干净系统。**安装 Snow Leopard 并升级到 10.6.8 并且**只**安装了 xcode。编译了我的项目（源代码始终保持**完全相同**），一切正常。在编译的项目中没有发现任何问题。

将我的 OSX 更新为 Lion 10.7.4 和 xcode 4.3.3，源代码相同。编译后问题就出现了。我很确定如果我先尝试 10.7.3，我不会看到问题，因为我记得它只从 10.7.4 开始，但 Apple 没有提供任何合理的方法来首先更新到 10.7.3 或之后降级到它10.7.4 已安装（对他们感到羞耻，对开发人员不太友好！）。

因此，问题出现在 10.7.4 中。

然后我安装了 10.7.5 的预发布版本。这是唯一改变的东西，相同的源，相同的 xcode。令我惊讶的是，编译后的代码现在可以完美运行，并且在 10.7.4 中看到的问题现在都消失了！

所以我的解决方法 - 在进一步处理项目之前等待 10.7.5 版本。希望苹果将来不会因为山狮而搞砸。我不认为我会尝试进一步调试它或向 Apple 提交票证，这将是一个难以解释的案例。

感谢您的回复。

# c#-4.0 - 将异步结果分配给数据绑定属性

> ID：11176349
> 
> 赞同：5
> 
> 时间：2012-06-24T09:30:25.673
> 
> 标签：c#-4.0, asynchronous, windows-runtime, microsoft-metro, async-await

下面是一个示例实现，它使用 Metro API 和数据绑定（使用 MVVM）来填充下拉列表中的文件夹列表。

View 模型的构造函数使用 SetFolders 方法（私有异步），该方法调用可等待的方法 fileService.GetFoldersAsync() 来获取文件夹列表。然后将文件夹列表分配给名为“FoldersList”的属性。XAML 使用此属性来使用数据绑定填充下拉列表。

我想知道有没有更好的方法来设置 FoldersList 属性而不必在构造函数中设置它，如下所示。当实际数据绑定发生时（不是在类初始化期间），我更愿意调用 GetFilesAsync 方法并设置 FilesList 属性值。由于这些属性不支持 async/await 修饰符（据我所知），我正在努力实现一个合适的解决方案。任何想法都非常感谢。

代码如下。

**视图模型**

```
public class FileViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private readonly IFileService fileService;

    public FileDataViewModel(IFileService fileService)
    {
        this.fileService = fileService;
        SetFolders();
    }

    private async void SetFolders ()
    {
        FoldersList = await fileService.GetFoldersAsync();
    }

    private IEnumerable< IStorageFolder > foldersList;
    public IEnumerable<StorageFolder> FoldersList
    {
        get { return foldersList; }
        private set
        {
            foldersList = value;
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("FoldersList"));
            }
        }
    }
} 
```

**IFileService 和实现**

```
public interface IFileService    {
    Task<IEnumerable<IStorageFolder>> GetFilesAsync();
  }

public class FileService : IFileService
{
    public async Task<IEnumerable<IStorageFolder>> GetFoldersAsync()
    {
        var folder = KnownFolders.DocumentsLibrary;
        return await folder.GetFoldersAsync();
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T09:50:41.273

我会将其实现为惰性属性并使用`ObservableCollection<T>`而不是`IEnumerable<T>`. 我们正在几个项目中这样做，并且效果很好。这样，您可以保证仅在需要时才加载数据。此外，如果您需要预取它，您始终可以在构造函数或其他地方调用 load 方法。

作为旁注，我个人不会直接从我的 ViewModel 中公开 IStorageFolder。

```
private async Task LoadData()
{
   if(!IsLoading)
  {
    IsLoading = true;
     Folders = new ObservableCollection<Folder>(await fileService.GetFolderAsync());

  }
  IsLoading = false;
}

private ObservableCollection<Folder> _folders;

public  ObservableCollection<Folder> Folders
{
  get
  {
    if(_folders == null)
    {
      LoadData();//Don't await...
    }
    return _folders;

  }
  private set
  {
    SetProperty(ref _folders,value);
  }

}
private bool _isLoading;
public bool IsLoading
{
  get
  {
    return _isLoading;
  }
  private set
  {
    SetProperty(ref _isLoading,value);
  }
} 
```

请注意，您可以使用 IsLoading 属性来显示例如进度环。在加载可观察集合之后，您将能够刷新它而无需重新创建它。（_folders.Add、_folders.Remove、_folders.Clear...）

# .net - 将小数分配给对象属性 xaml

> ID：11176350
> 
> 赞同：0
> 
> 时间：2012-06-24T09:30:45.490
> 
> 标签：.net, xaml

如果我在 DataContext 中有一个对象类型的属性。

如何通过 xaml 为该属性分配十进制值？

如果我尝试

```
<test:Test Prop="2" /> 
```

这将分配一个字符串值，而不是十进制值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:37:52.337

我自己找到了解决方案。

```
<test:Test>
    <test:Test.Property>
        <System:Decimal>5</System:Decimal>
    </test:Test.Property>
</test:Test> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:09:41.453

如果您的属性 Test.Prop 是十进制类型，那么它将使用内置的类型转换器自动将其转换为十进制。

# matlab - 当我尝试将 -1 与数组的元素相乘时，我得到答案 0。我不明白为什么

> ID：11176353
> 
> 赞同：1
> 
> 时间：2012-06-24T09:31:28.917
> 
> 标签：matlab, product

// final(i)=-1*A2(i);
这是我面临问题的地方。尽管 A2 在任何迭代中都不是 0，但我在决赛中仍然得到 0。这些只是 d 的十个值，只是为了说明我正在处理的值类型。

```
d=[63820
   63594
   63382
   63123
   62921
   62712
   62536
   62350
   62129
   61914
   61668];

d=bin2dec(b);
a=bitget(d,16);
for i=1:10
    if (a(i)==1)  
        C1(i)=bitcmp(uint16(d(i)));
        A1(i)=C1(i)+1;
        A2=A1';
        final(i)=-1*A2(i);
    else  
        final(i)=d(i);
    end
end 
```

我在代码的另一部分乘以-1，它没有给出任何问题。请提出您的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T12:24:40.823

问题在于您不能将有符号和无符号算术与整数混合使用。反正不是直接的。你必须具体说明你想要什么。您提到的行给出了零，因为您将默认情况下从to重铸的`uint16`表示相乘，该表示截断为零（）。改为使用。`(-1)``double``uint16``0``int16`

我使用一些更好的变量名称制作了更简洁的代码版本（尽管有些人可能不同意）。我发现使用数学意义上的“类型”作为变量名称（矩阵、向量等）的前缀很有用。即使数据结构非常小，您也应该养成预先分配数据的习惯。我敢打赌，MATLAB 编辑器可能会在右边空白处用恼人的警告对你大喊大叫？:)

如果第16 位设置在 的值中，则`final`向量（一个向量）现在应该包含二进制补码（负）值。也不知道是干什么用的，所以我把它删了。`int16``vec_d``A2`

```
% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
vec_d = [
   63820
   63594
   63382
   63123
   62921
   62712
   62536
   62350
   62129
   61914
   61668
];
vec_d = uint16(vec_d);

% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
% extract 16th bit:
vec_a = bitget(vec_d, 16);

% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
% preallocate other datastructures:
vec_C1 = zeros(size(vec_a), 'uint16');
vec_A1 = zeros(size(vec_a), 'uint16');
vec_final = zeros(size(vec_a), 'int16');

% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
for num_k = 1:numel(vec_a)
    if (vec_a(num_k) == 1)  
        vec_C1(num_k) = bitcmp(uint16(vec_d(num_k)));
        vec_A1(num_k) = vec_C1(num_k) + 1;
        vec_final(num_k) = (-1) * int16(vec_A1(num_k));
    else  
        vec_final(num_k) = vec_d(num_k);
    end
end
% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
```

希望能帮助到你。

# javascript - Javascript：生成范围内的随机数，避免前两个

> ID：11176358
> 
> 赞同：0
> 
> 时间：2012-06-24T09:32:10.197
> 
> 标签：javascript, random

我正在创建一个包含 6 张幻灯片的滑块，我想在它们之间随机移动，确保前两张幻灯片都不会显示为下一张幻灯片。功能并不重要，因为我真正在做的是生成随机数并跟踪前两个。第一张幻灯片的编号始终为 1，因此对于前两次迭代，这将是之前无法使用的编号之一。

这是我到目前为止所拥有的，它可以很好地生成范围内的随机数，但是“缓存”最后两个值不能可靠地工作：

```
 var rand = Math.floor(Math.random() * 6) + 1;
        var prev1 = 1;
        var prev2;

        function randomSlide() {
            // 5 second interval between slides
            // Don't show either of previous two slides next
            random = setInterval(function() {
                prev2 = prev1;
                prev1 = rand;

                do {
                    rand = Math.floor(Math.random() * 6) + 1;
                } while (rand == prev1 || rand == prev2);

                prev1 = rand;

                $('#slider').anythingSlider(rand);

                //console.log(prev1,prev2);

            }, 5000);
        }
        function firstSlide() {
            firstTime = setTimeout(function() {
                randomSlide();
            }, 5000);
        }

        firstSlide();            
        randomSlide(); 
```

我认为这很简单，但我的大脑在尝试解析两个“缓存”变量的值时变得疲惫不堪，然后是每个后续迭代。

我在开始时执行一次迭代，因为如果 randomSlide() 在加载时执行，那么第一张（欢迎）幻灯片没有机会显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T09:36:21.447

当您`prev1 = rand`更改 的值后第二次执行此操作时`rand`，您正在为其分配*新*幻灯片的编号。下次你进入循环时，你会这样做，`prev2 = prev1`因为`prev1 == rand`这意味着现在所有三个变量`prev1`和都是相同的。只需删除第二个.`prev2``rand``prev1 = rand`

另一个问题是您设置了两次间隔：第一次调用在 5 秒延迟后`firstSlide()`执行`randomSlide()`（设置一个间隔），然后在`randomSlide()`再次调用后立即设置另一个间隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T10:42:05.260

这是获得结果的另一种（更简单？）方法：

```
<script>

// Return a random number from 1 to 6, exclude 
// the last two numbers.
var getRandom = (function() {
  var a = [1,2,3,4,5,6];

  return function() {
    var i = (Math.random() * 4 ) | 0;
    a[5] = a.splice(i,1);
    return a[5];
  }
}());

function writeRandom() {
  document.getElementById('d0').innerHTML += getRandom() + '<br>';
}

setInterval(writeRandom, 100)
</script>

<div id="d0"></div> 
```

前 2 次迭代不是完全随机的，但是您可以通过在初始化数组时随机化来解决这个问题。但很可能对于幻灯片放映并不重要。

它的代码更少，但是拼接部分使它在我测试的浏览器中变慢了。我的 OP 版本是：

```
var getRandom2 = (function() {
  var r0 = r1 = r2 = 1;

  return function() {
    r0 = r1;
    r1 = r2;

    do {
      r2 = Math.floor(Math.random() * 6) + 1;
    } while (r2 == r0 || r2 == r1);

    return r1;
  }
}()); 
```

# jquery - 我无法将我的 jquery 代码作为工具运行

> ID：11176360
> 
> 赞同：0
> 
> 时间：2012-06-24T09:33:06.207
> 
> 标签：jquery, css

我想为我的网页使用[这个jquery 库。](http://jquerytools.org/demos/tooltip/index.html)我正在复制文章页面中的所有代码，然后粘贴到我的 .html 文件中，如下所示：

```
<html>
    <head>
        <script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>
        <script type="text/javascript">
            $("document").ready(function(){
                $("#demo img[title]").tooltip();
            });
        </script>
    </head>
    <body>
    <br />
    <br />
        <div id="demo">
          <img src="image1.jpg" title="The tooltip text #1"/>
          <img src="image2.jpg" title="The tooltip text #2"/>
          <img src="image3.jpg" title="The tooltip text #3"/>
          <img src="image4.jpg" title="The tooltip text #4"/>
        </div>
    </body>
</html> 
```

但是 .tooltip 类样式没有运行。我看不到背景图像和其他图像。我需要如何编辑我的 .html 文件？

另外，如果我想更改此库的 css 样式，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T09:40:51.057

**工作演示** [http://jsfiddle.net/QWeKw/2/](http://jsfiddle.net/QWeKw/2/) **或** [http://jsfiddle.net/XUhxQ/](http://jsfiddle.net/XUhxQ/)

您可以制作自己的样式。

很好的链接：http: [//jquery.bassistance.de/tooltip/demo/](http://jquery.bassistance.de/tooltip/demo/) **或** [http://docs.jquery.com/Plugins/Tooltip](http://docs.jquery.com/Plugins/Tooltip)

这应该有帮助，

**代码**

```
$("img[title]").tooltip({
    events: {
        def:     "mouseenter,mouseleave",    // default show/hide events for an element
        input:   "focus,blur",               // for all input elements
        widget:  "focus click,blur",  // select, checkbox, radio, button
        tooltip: "mouseenter,mouseleave"     // the tooltip element
    }
}); 
```

**css里面的演示**

```
.tooltip {
    font-family:tahoma;
    background-color: #000000;
    border: 1px solid #FFFFFF;
    box-shadow: 0 0 10px #000000;
    color: #FFFFFF;
    display: none;
    font-size: 12px;
    padding: 10px 15px;
    text-align: left;
    width: 200px;
}​ 
```

**工作图像**

![在此处输入图像描述](../Images/aff133c007078c42f0efd918f7dc4dcd.png) ​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T09:42:34.720

对于演示，在你**的 head**标签中添加这个样式：

```
<style>

      .tooltip {
        display:none;
        background:transparent url(http://jquerytools.org/media/img/tooltip/black_arrow.png);
        font-size:12px;
        height:70px;
        width:160px;
        padding:25px;
        color:#eee;
      }
        /* style the trigger elements */
      #demo img {
        border:0;
        cursor:pointer;
        margin:0 1px;
      }
</style>
<!--[if lt IE 7]>
<style>
  .tooltip {
    background-image:url(http://jquerytools.org/media/img/tooltip/black_arrow.gif);
  }
</style>
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-24T09:38:20.993

如果你`alert("HI");`输入你的javascript，它会出现吗？

此外，`<!doctype html>`应该在顶部。

对于 CSS，把它放在头上：`<link rel="stylesheet" type="text/css" href="mystyle.css" />`

# android - ImageView：onDraw 方法在图像背景“后面”绘制，而不是在顶部

> ID：11176362
> 
> 赞同：5
> 
> 时间：2012-06-24T09:34:01.047
> 
> 标签：android, imageview, ondraw

下面是一个 ImageView 的简单扩展代码，它允许用户用手指绘图。

```
public class MyImageView extends ImageView {

    List<Point> points = new ArrayList<Point>();
    Paint paint = new Paint();

    public MyImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public void onDraw(Canvas canvas) {
        for (Point point : points) {
            canvas.drawCircle(point.x, point.y, 5, paint);
            // Log.d(TAG, "Painting: "+point);
        }
        super.onDraw(canvas);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        super.onTouchEvent(event);
        Point point = new Point();
        point.x = event.getX();
        point.y = event.getY();
        points.add(point);
        invalidate();
        Log.d("", "point: " + point);
        return true;
    }

    class Point {
        float x, y;
        @Override
        public String toString() {
            return x + ", " + y;
        }
    }
} 
```

这工作得很好。

现在，我想使用此代码在位图的顶部进行绘制。

我用了：

```
MyImageView ivPic = (MyImageView) dialog.findViewById(R.id.ivPic);
ivPic.setImageBitmap(picture); 
```

但是绘图是在位图“后面”绘制的：

![在此处输入图像描述](../Images/28cf6ecc6dd52d6182395254b47c88dd.png)

您知道如何在位图的“顶部”进行绘制吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T21:33:01.360

我改变了`onDraw`方法中的顺序，我把它放在`super.onDraw(canvas);`了开头，我认为它现在可以工作了

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T09:55:57.180

覆盖并使用[dispatchDraw](http://developer.android.com/reference/android/view/View.html#dispatchDraw%28android.graphics.Canvas%29)方法，我用它来绘制视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T09:44:46.517

我回答了我自己的问题，刚刚找到了答案：

```
ivPic.setBackgroundDrawable(new BitmapDrawable(getResources(),picture)); 
```

不知道这是否是最佳做法，但这对我有用......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-07T05:41:54.960

改变顺序：首先是 super.OnDraw(canvas) 然后是你的绘画材料

```
@Override
    public void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        for (Point point : points) {
            canvas.drawCircle(point.x, point.y, 5, paint);
            // Log.d(TAG, "Painting: "+point);
        }
    } 
```

# c# - AppDomain 证据没有区域？

> ID：11176363
> 
> 赞同：2
> 
> 时间：2012-06-24T09:34:24.237
> 
> 标签：c#, .net

什么是控制当前应用程序域的证据？

```
var evidence = Thread.GetDomain().Evidence; 
```

什么控制它是空还是非空，什么决定了它的内容？

当我的应用程序从域证据中查询这些主机证据对象时

```
var z = evidence.GetHostEvidence<Zone> 
var p = evidence.GetHostEvidence<Publisher>
var s = evidence.GetHostEvidence<Site>
var n = evidence.GetHostEvidence<StrongName>
var u = evidence.GetHostEvidence<Url> 
```

在某些环境中执行时，它们似乎有时都为空。我认为这是内部抛出的异常的原因`IsolatedStorage._GetAccountingInfo(...)`，通过查看反射器中的代码很明显，只有当域证据包含所有上述主机证据对象的 null 时才会引发此异常。这将导致独立存储无法初始化。

不幸的是，我无法在我自己的系统上重现它。例如，区域值将始终是表示“我的电脑”的正确值，所以我正在努力解决这个问题。

什么控制 Windows 窗体桌面应用程序的默认应用程序域中这些值的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-29T14:41:05.657

当您的代码是[本机 Win32 应用程序访问的 COM 对象](http://rekiwi.blogspot.com/2008/12/unable-to-determine-identity-of-domain.html)`AppDomain`（默认`Evidence`为空）时，或者当它[在 PowerShell.exe 的命令行版本中加载并运行](https://explodingmindslimited.wordpress.com/2012/08/31/openxml-and-powershell/)时，也会发生类似的情况。当办公文档超过特定文件大小时，我在使用使用 IsolatedStorage的 OpenXML（特别是[EPPlus](http://epplus.codeplex.com/) ）程序集时遇到了这个问题。

与其在默认的内部旋转另一个`AppDomain`并处理额外级别的编组/远程处理，我更喜欢使用反射来处理当前`AppDomain`的证据。

这是 C# 中的概念证明：

```
using System;

namespace AppDomainEvidence
{
    class Program
    {
        static void Main(string[] args)
        {
            var initialAppDomainEvidence = System.Threading.Thread.GetDomain().Evidence; // Setting a breakpoint here will let you inspect the current AppDomain's evidence
            try
            {
                var usfdAttempt1 = System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForDomain(); // This will fail when the current AppDomain Evidence is instantiated via COM or in PowerShell
            }
            catch (Exception e)
            {
                // Set breakpoint here to inspect Exception "e"
            }

            // Create a new Evidence that include the MyComputer zone
            var replacementEvidence = new System.Security.Policy.Evidence();
            replacementEvidence.AddHostEvidence(new System.Security.Policy.Zone(System.Security.SecurityZone.MyComputer));

            // Replace the current AppDomain's evidence using reflection
            var currentAppDomain = System.Threading.Thread.GetDomain();
            var securityIdentityField = currentAppDomain.GetType().GetField("_SecurityIdentity", System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic);
            securityIdentityField.SetValue(currentAppDomain,replacementEvidence);

            var latestAppDomainEvidence = System.Threading.Thread.GetDomain().Evidence; // Setting a breakpoint here will let you inspect the current AppDomain's evidence

            var usfdAttempt2 = System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForDomain(); // This should work
        }
    }
} 
```

这是我在 PowerShell 中实现的解决方法：

```
# This one will fail
$usfd = [System.IO.IsolatedStorage.IsolatedStorageFile]::GetUserStoreForDomain()

# Inspect the current AppDomain's Evidence
[threading.thread]::GetDomain().Evidence

# Modify the current AppDomain's Evidence
$evidence = new-object System.Security.Policy.Evidence
$zone = new-object System.Security.Policy.Zone('MyComputer')
$evidence.AddHost($zone)
$currentAppDomain = [threading.thread]::GetDomain()
$securityIdentityField=$currentAppDomain.GetType().GetField('_SecurityIdentity','Instance,NonPublic')
$securityIdentityField.SetValue($currentAppDomain, $evidence)

# Inspect the current AppDomain's Evidence
[threading.thread]::GetDomain().Evidence

# This one will succeed
$usfd = [System.IO.IsolatedStorage.IsolatedStorageFile]::GetUserStoreForDomain() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:10:48.303

事实证明，正如汉斯在对我的问题的评论中所建议的那样，罪魁祸首确实是“不寻常的部署场景”。我们对一些程序集使用加密（封装），显然这会篡改隔离存储所需的证据。

# android - 什么是更好的？许多 AsyncTask 还是一个来处理所有 AsyncRequest？

> ID：11176364
> 
> 赞同：2
> 
> 时间：2012-06-24T09:34:26.063
> 
> 标签：android, android-asynctask

目前我有一个应用程序可以向 Facebook 和我的服务器创建各种不同的请求，我想知道最好的方法是实现不同的请求`AsyncTask`还是对所有不同的请求使用相同`AsyncTask`的请求。

你怎么看？

* * *

例如，这是一个用例：

我发送一个 Facebook 连接请求，当我到达时`onComplete`，我用 FQL 获取用户信息（必须是异步的），当响应返回时，用户的图像被发布在主视图上。

在此之后，应用程序向应用程序的后台服务器发送不同的请求并获得响应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T09:46:39.667

我认为你必须自己决定。
如果您有很多请求，请注意 android 对 AsyncTask 数量的限制。如果您达到该限制，您的应用程序将崩溃。
另请注意，如果您将许多作业分配给单个 AsyncTask，您可能会在后台运行很长时间的任务。
你也可以阅读这篇文章 -> [The Hidden Pitfalls of AsyncTask](http://logc.at/2011/11/08/the-hidden-pitfalls-of-asynctask/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T10:09:11.587

我建议使用并发`AsyncTasks`来确保运行所有其他请求，以防其中一个请求不返回答案。

# android - 如何更改按钮的文本颜色？

> ID：11176365
> 
> 赞同：36
> 
> 时间：2012-06-24T09:34:51.640
> 
> 标签：android, android-layout, android-button

如何更改按钮的文本颜色？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-06-24T09:37:43.740

试试这个：

```
button.setTextColor(getApplication().getResources().getColor(R.color.red)); //TAKE DEFAULT COLOR 
```

或者

```
button.setTextColor(0xff0000); //SET CUSTOM COLOR 
```

或者

```
button.setTextColor(Color.parseColor("#ff0000")); 
```

在 xml 中：

```
<Button android:id="@+id/mybtn" 
        android:text="text textx "  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"  
        android:textStyle="bold" 
        android:textColor="#ff0000" />  <-- SET TEXT COLOR HERE --> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-24T09:35:54.157

使用该`android:textColor`物业。

```
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Hello World"
    android:textColor="@android:color/white" /> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-29T14:29:57.817

```
button.setTextColor(ContextCompat.getColor(getApplicationContext(), R.color.red)); 
```

这个工作也

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-24T09:37:18.013

使用：`android:textColor="#FFFFFF"`在xml配置上，

或通过调用活动本身

```
button.setTextColor(0xFFFFFF); 
```

（FFFFFF 是白色）。

更多颜色代码：[这里](http://www.computerhope.com/htmcolor.htm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-24T11:58:44.447

您可以将 android textColor 用于前景和按钮、文本视图或任何其他元素的背景颜色，请参见代码示例

```
 <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button"
        android:background="#ffb6c1"
        android:textColor="#fff"
        /> 
```

可以编写任何十六进制颜色代码来制作交互式视图。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-11T13:36:15.577

以编程方式更改按钮文本颜色

```
button.setTextColor(getResources().getColor(R.color.colorWhite)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-26T11:54:00.977

一个简单的方法是在 res/values/colors.xml 中定义你想要的颜色：

`<color name="colorCyan">#00BCD4</color>`

按钮应该是这样的：

```
<Button
    android:id="@+id/m_button"
    android:text="MY BUTTON"
    android:textColor="@color/colorAccent"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/colorCyan"/> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-23T05:03:11.377

这是一种使用当前活动的隐含上下文的代码略少的方法。

```
button.setTextColor(getColor(R.color.colorPrimary)); 
```

*我还没有对所有 API 目标进行测试，但它适用于 28。*

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-14T09:19:50.243

您可以使用：

`button.setTextColor("green");`

或者

`button.setTextColor(colorcode);`

# django - 从 ODT 生成 PDF

> ID：11176366
> 
> 赞同：1
> 
> 时间：2012-06-24T09:35:36.393
> 
> 标签：django, heroku, pdf-generation, odt

我在我的 django 应用程序中使用 appy pod 进行报告。

此时，我需要生成 pdf 文件而不是 odt 文档。

如果 OO 可用，pod 能够生成 pdf，但这不是我的情况，因为应用程序在 heroku 提供程序中运行。

有人知道在这种情况下将 .odt 转换为 pdf 的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:52:57.873

一个想法可能是在其他地方部署一个专用的 Web API，使用 topdfserver ：[https](https://github.com/AntoineCezar/topdfserver/tree/develop) ://github.com/AntoineCezar/topdfserver/tree/develop :)

# tcl - 如何在 tcl 表达式中使用全局字符串值

> ID：11176370
> 
> 赞同：1
> 
> 时间：2012-06-24T09:36:18.963
> 
> 标签：tcl

我正在使用 Ns2 和 tcl 脚本。在下面的代码中，我想使用表达式中值为 2Mb 的全局变量 rate12

```
 if { $queuesize>16 } {
     set RL [expr $Rc * $fdec * $hf]
    set rate12 [expr $rate12 * $RL]
    puts $rate12
 } 
```

从 proc 记录中找到。但它显示以下错误：

```
ns：记录_o104 file5：无效的裸词“Mb”
在表达式“4_@_Mb * 0.40000000000000002”中；
应该是 "$Mb" 或 "{Mb}" 或 "Mb(...)" 或 ...
    （解析表达式“4Mb * 0.40000000000000...”）
    从内部调用
“expr $rate12 * $RL”
    （程序“记录”第 26 行）
    从内部调用
“记录_o104文件5”

```

我该如何解决这个错误？

整个代码是：

```
#Create a simulator object

set ns [new Simulator]

 global rate02 
 global rate12 
 global rate23 
 global rate32 

#Define different colors for data flows (for NAM)
$ns color 1 Blue
$ns color 2 Red
$ns color 3 Green

#Open the NAM trace file
set nf [open out.nam w]
$ns namtrace-all $nf
# constants
global Rc 
global Fdec
global hf 

#Define a 'finish' procedure
proc finish {} {
    global ns nf
    $ns flush-trace
    #Close the NAM trace file
    close $nf
    #Execute NAM on the trace file
    exec nam out.nam &
    exit 0
}

#Create four nodes
set n0 [$ns node]
set n1 [$ns node]
set n2 [$ns node]
set n3 [$ns node]

set rate02 2Mb
set rate12 4Mb
set rate23 2Mb
set rate32 0.1Mb

#Create links between the nodes
$ns duplex-link $n0 $n2 $rate02 10ms RED
$ns duplex-link $n1 $n2 $rate12 10ms DropTail
$ns duplex-link $n2 $n3 $rate23 20ms DropTail
$ns duplex-link $n3 $n2 $rate32 10ms DropTail

#Set Queue Size of link (n2-n3) to 10
$ns queue-limit $n2 $n3 16

#Give node position (for NAM)
$ns duplex-link-op $n0 $n2 orient right-down
$ns duplex-link-op $n1 $n2 orient right-up
$ns duplex-link-op $n2 $n3 orient right

#Monitor the queue for link (n2-n3). (for NAM)
$ns duplex-link-op $n2 $n3 queuePos 0.5

#creat file record infomation at queues

set queue03 [$ns monitor-queue $n2 $n3 [open qsize03.tr w] 0.05]
set qsize03 [open qsize03.tr w]

proc record {queue qsize} {
        global ns
        #set ns [Simulator instance]
        set time 0.1
        set now [$ns now]
        #print current qsize in $queuesize
        $queue instvar parrivals_ pdepartures_ bdros_ bdepartures_ pdrops_
        #set queuesize [expr $parrivals_ - $pdepartures_ - $pdrops_]
        set queuesize $parrivals_
        puts $queuesize
        puts $qsize "$now [expr $parrivals_ - $pdepartures_ - $pdrops_]"
        #puts "$now [expr $parrivals_ - $pdepartures_ - $pdrops_]"
        set $bdepartures_ 0

        set Rc 2
        set fdec 0.4
        set hf 0.5
        global rate12
        set n0 [$ns node]
        set n1 [$ns node]
        set n2 [$ns node]

        if { $queuesize>16 } {
        set RL [expr $Rc * $fdec * $hf]
        set rate12 [expr $rate12 * $RL]
        puts $rate12
        $ns duplex-link $n0 $n2 0.8Mb 10ms RED
        } elseif { $queuesize==20 } {
        puts "full"
        } else {
        puts "under"
        }

        $ns at [expr $now + $time] "record $queue $qsize"
}

#Setup a TCP connection
set tcp1 [new Agent/TCP]
$tcp1 set class_ 2
$ns attach-agent $n0 $tcp1
set sink [new Agent/TCPSink]
$ns attach-agent $n3 $sink
$ns connect $tcp1 $sink
$tcp1 set fid_ 1
#########################################
#Setup a TCP connection
set tcp3 [new Agent/TCP]
$tcp3 set class_ 2
$ns attach-agent $n3 $tcp3
set sink2 [new Agent/TCPSink]
$ns attach-agent $n1 $sink2
$ns connect $tcp3 $sink2
$tcp3 set fid_ 3

#Setup a FTP over TCP connection
set ftp3 [new Application/FTP]
$ftp3 attach-agent $tcp3
$ftp3 set type_ FTP
############################################
#Setup a FTP over TCP connection
set ftp1 [new Application/FTP]
$ftp1 attach-agent $tcp1
$ftp1 set type_ FTP

#Setup a TCP connection
set tcp2 [new Agent/TCP]
$tcp2 set class_ 2
$ns attach-agent $n1 $tcp2
set sink [new Agent/TCPSink]
$ns attach-agent $n3 $sink
$ns connect $tcp2 $sink
$tcp2 set fid_ 2

#Setup a FTP over TCP connection
set ftp2 [new Application/FTP]
$ftp2 attach-agent $tcp2
$ftp2 set type_ FTP

#Schedule events for the CBR and FTP agents
$ns at 0.1 "$ftp2 start"
$ns at 0.5 "record $queue03 $qsize03"
$ns at 1.0 "$ftp1 start"
$ns at 1.0 "$ftp3 start"
$ns at 4.0 "$ftp2 stop"
$ns at 4.5 "$ftp1 stop"
$ns at 4.5 "$ftp3 stop"

#Detach tcp and sink agents (not really necessary)
$ns at 4.5 "$ns detach-agent $n0 $tcp1 ; $ns detach-agent $n3 $sink"
$ns at 4.5 "$ns detach-agent $n1 $tcp2 ; $ns detach-agent $n3 $sink"

#Call the finish procedure after 5 seconds of simulation time
$ns at 5.0 "finish"
$ns run 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T13:53:15.290

Tcl 的`expr`命令不适用于附加了 Mb 之类的单位的值。

所以它试图解释`$rate12`4Mb 的值，但这不是一个有效的数字文字，所以你得到了错误。结合你不支持你的表达的事实，例如你写：

```
set rate12 [expr $rate12 * $RL] 
```

代替

```
set rate12 [expr {$rate12 * $RL}] 
```

你会得到对 expr 的双重评估，这会产生误导性的错误消息（并且可能会慢得多）。

要解决这个问题，您需要对没有单位的值进行计算，或者编写一个包含单位的小过程来完成它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T16:30:58.830

关键字`global`仅在 a 范围内有意义`proc`。要访问`rate12`，请在 的开头`proc record`添加以下行：

```
global rate12 
```

那应该可以解决您的问题。

### 更新

我的错，我没有`global`在 proc 中间看到命令。问题是一开始你有：

```
set rate12 4Mb 
```

然后稍后，在`proc record`：

```
set rate12 [expr $rate12 * $RL] 
```

根据 Tcl，`4Mb`不是一个数字。我建议进行以下修复：

```
set rate12 4 
```

或者，更具描述性：

```
set rateInMb12 4 
```

# java - 如何逆时针旋转数组并垂直反转？

> ID：11176377
> 
> 赞同：3
> 
> 时间：2012-06-24T09:37:05.537
> 
> 标签：java, multidimensional-array, rotation

假设这张图片（图 1）中的每个像素都是数组中的一个元素。我如何将它逆时针旋转 90 度（图 2）并垂直反转（图 3）？

图1： ![图。1](../Images/4752887150dcf6ba954e651262dd4fbb.png)

图2：![图2](../Images/89c45d050668d8067d80932d226092af.png)

图 3：![在此处输入图像描述](../Images/8cc9cc3120bc0979858fd9400c0ed3df.png)

我目前的代码是：

```
private static Color[][] invert(Color[][] chunk){ //same as rotate
    Color[] temp;
    for(int i=0;i<chunk.length/2;i++){ //reverse the data
        temp=chunk[i];
        chunk[i]=chunk[chunk.length-i-1];
        chunk[chunk.length-i-1]=temp;
    }
    return chunk;
}

private static Color[][] rotate(Color[][] chunk){
    int cx = chunk.length;
    int cz = chunk[0].length;
    Color[][] rotated = new Color[cz][cx];
    for(int x=0;x<cx;++x){
        for(int z=0;z<cz;++z){
            rotated[z][x]=chunk[cz-z-1][x];
        }
    }
    return rotated;
} 
```

反转的功能与旋转相同。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T09:50:12.240

似乎您正在尝试转置数组 ( `fig3 = transpose(fig1)`)。

使用双 for 循环并在条目`[i][j]`中保存`[j][i]`.

有关矩阵转置的更多信息，请参阅[链接...](http://en.wikipedia.org/wiki/Transpose)

所以总而言之，您可以使用`transpose`获取 fig3，然后`invert`获取 fig2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T11:08:20.063

Baz 是对的，转置将完成工作。看起来您的转置方法仅使用了源数组？如果你循环遍历这两个长度，你会撤销你在前半部分所做的所有工作。这种转置方法对我有用：

```
public static Color[] [] transpose (Color[] [] a){
    int[] [] t = new Color [a [0].length] [a.length];
    for (int i = 0 ; i < a.length ; i++){
        for (int j = 0 ; j < a [0].length ; j++){
            t [j] [i] = a [i] [j];
        }
    }
    return t;
} 
```

# postgresql - 在一个语句中使用 PRIMARY KEY 创建 TABLE AS (PostgreSQL)

> ID：11176383
> 
> 赞同：65
> 
> 时间：2012-06-24T09:37:53.767
> 
> 标签：postgresql, primary-key, create-table

**有没有办法在单个“CREATE TABLE AS”语句中设置主键？**

示例 - 我希望将以下内容写入 1 个语句而不是 2 个语句：

```
 CREATE TABLE "new_table_name" AS SELECT a.uniquekey, a.some_value + b.some_value FROM "table_a" AS a, "table_b" AS b WHERE a.uniquekey=b.uniquekey;
 ALTER TABLE "new_table_name" ADD PRIMARY KEY (uniquekey); 
```

一般来说，有没有更好的方法（假设有超过 2 个表，例如 10 个）？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-06-24T09:46:37.407

根据手册：[创建表](http://www.postgresql.org/docs/9.1/static/sql-createtable.html)和[创建表，](http://www.postgresql.org/docs/9.1/static/sql-createtableas.html)您可以：

*   *先用主键建表*，再用*select* into
*   *首先创建表*，然后使用*添加主键*

但并非两者都像使用*主键**一样创建表*- 你想要的。

 ** * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-25T06:59:36.817

如果要创建与另一个表具有相同表结构的新表，可以在一个语句中执行此操作（创建新表和设置主键），如下所示：

```
create table mytable_clone (like mytable including defaults including constraints including indexes); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T09:41:56.390

不，没有更短的方法来创建表和主键。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-02T07:40:25.850

请参阅下面的命令，它将创建一个包含所有约束且没有数据的新表。在 postgres 9.5 中工作

```
CREATE TABLE IF NOT EXISTS <ClonedTableName>(like <OriginalTableName> including all) 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2017-08-25T16:49:50.877

在 mysql 中很好，都可以在一个命令中实现

命令是

```
create table new_tbl (PRIMARY KEY(`id`)) as select * from old_tbl; 
```

`id`old_tbl 主键的列在哪里

完毕...

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2015-08-06T12:40:06.977

你可以这样做

```
CREATE TABLE IOT (EMPID,ID,Name, CONSTRAINT PK PRIMARY KEY( ID,EMPID)) 
 ORGANIZATION INDEX NOLOGGING COMPRESS 1 PARALLEL 4
AS SELECT 1 as empid,2 id,'XYZ' Name FROM dual; 
```*

# java - 在android中保存对象

> ID：11176384
> 
> 赞同：1
> 
> 时间：2012-06-24T09:37:59.343
> 
> 标签：java, android, serialization

我是一名新手开发人员，我想知道如何将不可序列化对象的 ArrayList 保存到 android 外部存储中的文件中？

或者有没有更好的方法将对象存储在外部存储中并在以后使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:46:30.973

您可以使用 Gson 来序列化类的对象（如果这是您想要做的）。然后，您可以将对象存储在[Shared Preferences](http://developer.android.com/guide/topics/data/data-storage.html)或[Database](http://developer.android.com/guide/topics/data/data-storage.html)中。如果您明确想要将对象存储在外部存储中，则可以使用文本文件。有关示例，请参阅[Gson 用户指南](https://sites.google.com/site/gson/gson-user-guide)。

如果这不是您想要做的，请定义“对象”。:)

# ios - iOS：排序小部件

> ID：11176391
> 
> 赞同：-1
> 
> 时间：2012-06-24T09:39:33.910
> 
> 标签：ios, widget

请问有谁知道一个小部件，它的行为类似于名为“示例：二维排序”的小部件：http: [//tool-man.org/examples/sorting.html](http://tool-man.org/examples/sorting.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:45:58.680

您可以使用网格视图，例如[GMGridView](https://github.com/gmoledina/GMGridView) 它具有二维排序作为您在问题中发布的排序

# jquery - 如何使用 jquery 在窗口调整大小时缩放 Raphael js 元素

> ID：11176396
> 
> 赞同：24
> 
> 时间：2012-06-24T09:40:26.170
> 
> 标签：jquery, svg, raphael, html5-canvas

如何`Raphael`在窗口更改时重新缩放画布内的所有元素？

考虑以下代码/[演示](http://jsfiddle.net/minagabriel/vHXCc/)，如果我重新调整窗口的大小`div container`，因为我将其宽度设置为窗口宽度的 50%，并且 (`rect`或`circle`)都没有`path`改变

**代码**

```
<div id="container"></div>​
 #container{border : 1px solid black ;
               width : 50% ;
               height:300px}​
var con = $("#container");
var paper = Raphael(con.attr('id'), con.attr('width'), con.attr('height'));
var win = paper.rect(0,0,400,300).attr({stroke: 'black' }) ; 
var path = paper.path("M 200 100 l 100 0 z") ; 
var cir = paper.circle(50, 50, 40); 
```

​</p>

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-25T14:08:25.130

如果您使用 Raphaël 2.0 或更高版本，另一种方法是调用[paper.setViewBox](http://dmitrybaranovskiy.github.io/raphael/reference.html#Paper.setViewBox)来设置您的坐标系，然后让浏览器自动处理调整大小。

**更新：**好的，事实证明 Raphaël 的自动伸缩性比我想象的要小...无论如何，这是一个[示例](http://jsfiddle.net/AUNwC/)（raphaël 仍然在根 <svg> 上设置绝对宽度/高度，因此需要将它们删除以用于正常 svg缩放发生）。然后由 CSS 决定大小，并且 svg 正好适合给定的区域。可以对其进行调整以处理溢出的内容，这可能是由于 svg viewBox 纵横比与放置它的 CSS 框不匹配而发生的。为此，您可以`preserveAspectRatio`向根 svg 元素添加一个属性。

您可以在[此处](http://www.w3.org/TR/SVG11/coords.html#PreserveAspectRatioAttribute)`preserveAspectRatio`阅读有关可以在 svg属性上设置的值的更多信息，但可能感兴趣的三个值是（用于挤压/拉伸以适应给定的任何矩形），（按比例放大以填充矩形，可能是剪裁如果方面不匹配，则删除某些部分），（这是默认设置，与根本不指定 pAR 相同，并且意味着内容将居中并在方面不匹配时向一个方向溢出）。`'none'``'xMidYMid slice'``'xMidYMid meet'`

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-11T09:50:37.460

[http://jsfiddle.net/vnTQT/](http://jsfiddle.net/vnTQT/)

```
 var paper = Raphael("wrap");
    paper.setViewBox(0,0,w,h,true);
    paper.setSize('100%', '100%'); 
```

将此 (paper.setViewBox) 与 paper.setSize('100%', '100%') 一起使用，并在不直接使用 svg 函数的情况下调整 svg 内容大小的窗口大小。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T17:52:21.743

我想我找到了一个解决方案：以下代码将在重新调整窗口大小时重新缩放所有元素，这就是我正在寻找的

```
 var w = $(window).width();
            var h = $(window).height();
            function draw(w, h) {
                var paper = Raphael($('#wrap').attr('id'), w, h);
                paper.setViewBox(0, 0, 1500, 1500, true);
                var rec = paper.rect(0, 0, 200, 200).attr({ stroke: 'black' });
                var cir = paper.circle(100, 100, 50);
            };
            draw(w, h);
            function resize() {
                var xw = $(window).width();
                var xh = $(window).height();
                draw(xw, xh)
            }
            $(window).resize(resize); 
```

来自@Erik Dahlström 的参考： [Paper.setViewBox(x, y, w, h, fit)](http://dmitrybaranovskiy.github.io/raphael/reference.html#Paper.setViewBox) **AND** ['viewBox' 属性](http://www.w3.org/TR/SVG11/coords.html#PreserveAspectRatioAttribute)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-14T21:26:29.327

如果你有一组元素要调整大小，你可以直接在你的 js 代码中使用...

```
for (var i = 0; i < your_set.length; i++) {
    your_set[i].scale(ratio, ratio, 0,0);
}; 
```

...以及在浏览器调整大小时重新加载页面的功能：

```
window.addEventListener('resize', function () { 
    "use strict";
    window.location.reload(); 
}); 
```

# sql-server - 双跳与 ASP.Net 网站和 NHibernate

> ID：11176400
> 
> 赞同：2
> 
> 时间：2012-06-24T09:41:01.430
> 
> 标签：sql-server, authentication, iis-7, kerberos

**背景：**

ASP.Net MVC 网站。托管在 IIS7、Intranet 上。

数据库：SQL Server。通过 NHibernate 访问。
在连接字符串中，访问权限设置为`Integrated Security: SSPI`。
（对 DB 的权限是基于 Active-Directory 的。）

简而言之，这是一个典型的双跳情况，
我需要将客户端的凭据传递给 IIS，然后从 IIS 传递给 SQL Server。

**问题：**

问题是黄屏死机，错误：
`Login failed for user 'MyDomain\UserThatRunsAppPool'.`

**我试图解决问题的方法：**

*   将身份验证配置为仅启用*Windows 身份验证*
    和*ASP.NET 模拟*
*   将 Windows 身份验证设置`Provider`为`Negotiate:Kerberos`
    （禁用内核模式身份验证后）
*   确保在 Active Directory中将 UserThatRunsAppPool 的委托设置为：
    “ ”`Trust the user for delegation to any service (Kerberos only)`
*   将 NHibernate SessionFactory 创建从移动`Application_BeginRequest()`
    到`Session_Start()`

**我在尝试解决问题方面取得了多大的成功：**

一点也不。

* * *

**编辑：**
我还尝试将 IIS 服务器的委托设置为“ `Trust the user for delegation to any service (Kerberos only)`”（在 Active Directory 中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T09:51:56.760

```
In short, this is a typical double-hop situation,
where I need to pass client's credentials to IIS, and from IIS to SQL Server. 
```

您遇到了“委托”问题。如果您想保持清醒，请将连接字符串更改为使用 SQL 用户名 + 密码而不是 SSPI。

如果您觉得两周的调试和与域管理员的争吵感到沮丧，请阅读[Kerberos 委派网站的乐趣](http://blogs.technet.com/b/askds/archive/2008/11/25/fun-with-the-kerberos-delegation-web-site.aspx)。

# actionscript-3 - roll_out 事件 flash cs5 中的 alpha 值不会改变

> ID：11176401
> 
> 赞同：0
> 
> 时间：2012-06-24T09:41:06.467
> 
> 标签：actionscript-3, flash-cs5

我是 Flash CS5 和 AS3 的新手，我有一个问题！我在舞台上有 3 个矩形在具有给定实例名称的 MovieClips 中转换。这三个都具有颜色效果的属性：alpha = 50。我在 as3 层中输入了以下代码：

```
addEventListener(MouseEvent.ROLL_OVER, RollOverBtn);
addEventListener(MouseEvent.ROLL_OUT, RollOutBtn);

function RollOverBtn(event:MouseEvent):void
{
    event.target.alpha = 100;
}

function RollOutBtn(event:MouseEvent):void
{
    event.target.alpha = 50;
} 
```

问题是当鼠标滚过一个矩形时，alpha 变为 100。但是当鼠标滚出时，什么也没有发生！

有什么建议么？

我已将代码更改为：

```
btn1.addEventListener(MouseEvent.ROLL_OVER, MouseOverBtn);
btn1.addEventListener(MouseEvent.ROLL_OUT, MouseOutBtn);

btn2.addEventListener(MouseEvent.ROLL_OVER, MouseOverBtn);
btn2.addEventListener(MouseEvent.ROLL_OUT, MouseOutBtn);

btn3.addEventListener(MouseEvent.ROLL_OVER, MouseOverBtn);
btn3.addEventListener(MouseEvent.ROLL_OUT, MouseOutBtn);

function MouseOverBtn(event:MouseEvent):void
{
    trace("roll over"+event.target);
    event.target.alpha = 1;
}

function MouseOutBtn(event:MouseEvent):void
{
    trace("roll out"+event.target);
    if(event.target.alpha == 100){
        event.target.alpha = 0.5;
    }
} 
```

我得到的跟踪消息是：

```
roll over[object MovieClip]
roll out[object MovieClip] 
```

据我所知，这意味着 roll_out 被触发但仍然没有改变 alpha 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:06:24.753

1.  Alpha 的值可以在 0-1 范围内，而不是 0-100。
2.  你在哪里附加了听众？它们应该被添加到按钮中。

# search - AI 搜索 - 从 12 个俄罗斯方块形状构建一个矩形，可能有多少个状态？

> ID：11176403
> 
> 赞同：1
> 
> 时间：2012-06-24T09:41:21.210
> 
> 标签：search, artificial-intelligence

你有 12 种形状：

![在此处输入图像描述](../Images/16b7392384270888bddc537b97e7b00e.png)

你可以用五个相同的正方形来制作。

您需要将 12 块组合成一个矩形。您可以形成四个不同的矩形：2339 个解决方案 (6x10)、2 个解决方案 (3x20)、368 个解决方案 (4x15)、1010 个解决方案 (5x12)。

![在此处输入图像描述](../Images/3b68205c132eeb1eb578025e2fb6495d.png)

我需要构建 3X20 矩形：

我的问题是可能的最大状态数（即分支因子）是多少？

我的中途计算：

在我看来，每个形状都有 4 个操作：转动 90/180/270 度和镜像（将其倒置）。然后，您必须将形状放在板上，在 3X20 板上的某个位置。非法状态将是形状不适合董事会的状态，但它们仍然是状态。

第一步，您可以以 4 种方式选择每个形状，即 4X12 方式，然后您需要乘以该形状可以处于的位置数，即您拥有的状态数。但是如何计算职位数量？

请帮我计算这个非常重要，这不是我试图避免的某种家庭作业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:21:32.143

我认为没有简单且“智能”的方式来列出五联拼图的解决方案（或状态）。你必须尝试所有的可能性。递归编程或回溯是实现它的方法。您应该检查这个也有可用的 java 源代码的[解决方案。](http://godel.hws.edu/java/pent1.html)希望这会为您指明正确的方向。

还有一个可能更具可读性的 python[解决方案。](http://puzzler.sourceforge.net/docs/pentominoes.html)

# ruby-on-rails - 多个活动记录关联的实现

> ID：11176404
> 
> 赞同：0
> 
> 时间：2012-06-24T09:41:31.087
> 
> 标签：ruby-on-rails, activerecord, associations

我正在尝试为我的 Ruby on Rails 应用程序设置模型，这些模型非常复杂——我不确定我是否以正确的方式接近它。阅读 Ruby on Rails 指南 @guides.rubyonrails.org 提供了一些关于 Active Record 关联的非常好的信息，但它在一定程度上也让我更加困惑。我试图建立的是模拟锦标赛而不是传统锦标赛的东西（如果有人遵循 GSL，那就是我想尝试建模的锦标赛）。

锦标赛模型存储以下信息：

*   姓名
*   横幅（只是在线托管图片的网址）
*   地图池（用于锦标赛的地图对象的集合）
*   球员（参加本次比赛的球员人数）
*   32强进入决赛（32、16、8、4、2轮）

这些是我想出的模型：锦标赛、地图池、地图、玩家、种族（即 Protoss 人族或虫族）、团队（即玩家所属的团队）、Round_of_32、Round_of_16、Round_of_8、Round_of_4、Round_of_2、Group （每轮比赛的集合）、Match（包含玩家之间每场比赛的信息的集合）和 Game（包含地图和获胜者）。随着应用程序的开发，我将拥有越来越多的锦标赛，每个锦标赛都有自己的数据集，即使玩家可能是多个锦标赛的一部分，地图可能是他们各自锦标赛的多个地图池的一部分，等等。

*   锦标赛有一个地图池，其中包含许多地图
*   一场锦标赛有多个玩家，每个玩家都与不同的种族和球队相关联
*   一轮32分8组，每组5场，每组3场
*   16 轮与 32 轮类似，但只有四组
*   8强赛只有4场比赛，每场5场
*   一轮 4 有 2 场比赛，每场 5 场比赛
*   一轮 2 有 1 场比赛，每场有 7 场比赛

这是我到目前为止所拥有的：

```
TOURNAMENT
  :league
  :banner
  has_one :map_pool
  has_many :maps, :through => :map_pool
  has_and_belongs_to_many :players
  # has_many :rounds
  has_one :ro32
  has_one :ro16
  has_one :ro8
  has_one :ro4
  has_one :ro2

MAP_POOL
  belongs_to :tournament
  has_many :maps

MAP
  :name
  belongs_to :map_pool
  has_many :games

PLAYER
  :name
  belongs_to :race
  belongs_to :team
  has_and_belongs_to_many :tournaments
  has_many :games

RACE
  :type {"Protoss", "Terran", "Zerg"}
  has_many :players

TEAM
  :name
  has_many :players

RO32
  belongs_to :tournament
  has_many :groups, :as => :round,
                    :limit => 8

RO16
  belongs_to :tournament
  has_many :groups, :as => :round,
                    :limit => 4

RO8
  belongs_to :tournament
  has_many :matches, :as => :matchup,
                      :limit => 4

RO4
  belongs_to :tournament
  has_many :matches, :as => :matchup,
                      :limit => 2

RO2
  belongs_to :tournament
  has_many :matches, :as => :matchup,
                      :limit => 1

GROUP
  :name
  belongs_to :round, :polymorphic => true
  has_many :matchups, :as => :matchup

MATCH
  :type {"bo3", "bo5", "bo7"}
  has_many :games
  belongs_to :matchup, :polymorphic => true

GAME
  belongs_to :match
  has_one :map
  has_one :player 
```

我是否遗漏了任何东西或错误地使用了任何东西？

**编辑：我为每一轮都有单独的模型的原因是因为第 32/16 轮与第 8/4/2 轮不同。这是一组示例数据，可以解释我遇到的问题：**

```
Round of 32:
    Group A:
        Match 1: P1 vs P2
            Game 1
            Game 2
            Game 3
        Match 2: P3 vs P4
            Game 1
            Game 2
            Game 3
        Winners Match: P1 (winner match 1) vs P4 (winner match 2)
            Game 1
            Game 2
            Game 3
        Losers Match: P2 (loser match 1) vs P3 (loser match 2)
            Game 1
            Game 2
            Game 3
        Tiebreak Match: P4 (loser of winners match) vs P2 (winner of losers match)
            Game 1
            Game 2
            Game 3
    [etc. Group B through Group H]
Round of 16:
    [similar to Round of 32 but only groups A through D]
Round of 8:
    Match 1: P1 vs P2
        Game 1
        Game 2
        Game 3
        Game 4
        Game 5
    Match 2: P3 vs P4
        Game 1
        Game 2
        Game 3
        Game 4
        Game 5
    Match 3: P5 vs P6
        Game 1
        Game 2
        Game 3
        Game 4
        Game 5
    Match 4: P7 vs P8
        Game 1
        Game 2
        Game 3
        Game 4
        Game 5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:33:47.033

我仍然会说你的回合应该是一个单一的模型。似乎它们类型之间的差异是逻辑上的而不是结构上的。所以我会做一个圆桌会议并添加类型属性（利用单表继承？）。

作为一名 SC 粉丝，如果您愿意，我很乐意帮助您对其进行建模。

另外：玩家>--种族？你确定吗？我不能在比赛之间甚至锦标赛之间改变比赛？！

# c++ - 带有 WH_KEYBOARD 的 SetWindowsHookEx 对我不起作用，我做错了什么？

> ID：11176408
> 
> 赞同：3
> 
> 时间：2012-06-24T09:41:58.637
> 
> 标签：c++, windows, winapi, console, keyboard-hook

```
#include <iostream>
#include <fstream>
#define _WIN32_WINNT 0x501
#include <windows.h>

using namespace std;

HHOOK hKeyboardHook = 0;
LRESULT CALLBACK KeyboardCallback(int code,WPARAM wParam,LPARAM lParam) {  
  cout << "a key was pressed" << endl;
  ofstream myfile;
  myfile.open ("hookcheck.txt", ios::ate | ios::app);
  myfile << "a key was pressed\n";
  myfile.close();
  return CallNextHookEx(hKeyboardHook,code,wParam,lParam);
}

int main() {

  HWND consoleWindow = GetConsoleWindow();
  HINSTANCE hInstCons = (HINSTANCE)GetWindowLong( consoleWindow, GWL_HINSTANCE );
  hKeyboardHook = SetWindowsHookEx( WH_KEYBOARD, (HOOKPROC)KeyboardCallback, (HINSTANCE)consoleWindow, GetCurrentThreadId());

  MessageBox(NULL, "It is keyboard time!", "Let's Go", MB_OK);

} 
```

循环进行时每次按键的这段代码都应该在控制台上打印消息并创建一个文件，但是什么也没有发生。我错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T11:10:46.200

我将引用[另一个主题](http://us.generation-nt.com/answer/spy-plus-plus-console-application-help-25981632.html)：

> 控制台窗口完全由 CSRSS 处理，这是一个系统进程。将钩子安装到进程中意味着将您的 DLL 注入其中。由于 CSRSS 非常重要（它对系统的运行至关重要，并且其中的代码作为 LocalSystem 运行，即本地超级管理员用户），因此不允许您向其中注入代码。所以你不能钩住它的任何窗户。

在您的简单控制台应用程序中没有发生真正的窗口消息，因此不必调用您的钩子，在您的情况下，您甚至没有注入钩子，而是仅使用线程模式钩子。根据 MSDN 文档，在即将处理消息时调用它：

> 与 SetWindowsHookEx 函数一起使用的应用程序定义或库定义的回调函数。每当应用程序调用 GetMessage 或 PeekMessage 函数并且有要处理的键盘消息（WM_KEYUP 或 WM_KEYDOWN）时，系统都会调用此函数。

现在让我向您展示如何开始在您的挂钩上接听电话：

```
MessageBox(NULL, _T("It is keyboard time!"), _T("Let's Go"), MB_OK);

//for(int i=0; i<=10; i++) {
//  cout << i << endl;
//  Sleep(1000);
//} 
```

做`MessageBox`并且在关闭它之前开始输入 - 你将开始收到钩子调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:08:53.383

阅读 SetWindowsHookEx 的文档。它是否正常工作，如果失败，它将返回 NULL，并且可以调用 GetLastError() 来获取错误代码以帮助诊断问题所在。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T10:49:37.527

[`Sleep(1000)`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298%28v=vs.85%29.aspx)暂停当前​​线程的执行，直到超时间隔过去。这意味着您的程序在此睡眠期间实际上并未运行（即处理消息）。

您需要使用不同类型的命令，以保持消息循环运行。最简单的事情是等待用户输入

```
while(true)
   std::cin.get(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T12:10:06.983

我创建了一个连接键盘的 dll，并在其中使用该[`DllMain`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583%28v=vs.85%29.aspx)函数检索`HINSTANCE`可用于`SetWindowsHookEx`.

除此之外，我还使用 0 作为 threadid，因此所有线程都被钩住了。

也许您也可以尝试类似的策略。

# php - 更新 MySql 字段（如果字段不为空，则转到下一个）

> ID：11176410
> 
> 赞同：4
> 
> 时间：2012-06-24T09:42:17.467
> 
> 标签：php, mysql

您好，我有 10 列的表（columnA、ColumnB、ColumnC ...），ColumnA 用于 ID。

> 我想以这种方式在 php 中进行更新：**如果 ColumnB 不为空，则更新 ColumnC，如果 ColumnC 不为空，则更新 ColumnD** ...直到找到一个空列。

我知道如何更新一个空列，但我不知道如何实现 IF 语句。

直到现在我有这个：

```
mysql_query("UPDATE tabel_name SET ColumnB = 'example' WHERE ColumnA = '$ID' "); 
```

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T11:32:40.590

您必须使用`case`仅更新选择性列。

**示例**：

```
update table_name set  
    col1 = ( case when col1 is null then ? else col1 end )  
    , col2 = ( case when col2 is null then ? else col2 end )  
--  , col3 = ...
; 
```

使用 mysql prepare 替换查询参数。

另请参阅[Quassnoi 对类似帖子的回答](https://stackoverflow.com/a/6734266/767881)。

**更新**：

> *如果 ColumnB 不为空，则更新 ColumnC，如果 ColumnC 不为空，则更新 ColumnD ...直到找到一个空列*。

您需要以相反的顺序设置列值检查。

```
update table_name set  
--      more next ( 4 to n ) columns here if required       
    col3 = ( case when ( col2 is not null and col3 is null ) then 7 else col3 end )  
    , col2 = ( case when ( col1 is not null and col2 is null ) then 8 else col2 end )  
    , col1 = ( case when ( col1 is null ) then 9 else col1 end )  
; 
```

**示例表**：

```
mysql> create table col_values ( id INT, col1 INT, col2 INT, col3 INT );
Query OK, 0 rows affected (0.06 sec)

mysql> insert into col_values values ( 1, 1, 1, NULL ), ( 2, 1, NULL, NULL ), ( 3, NULL, NULL, NULL );
Query OK, 3 rows affected (0.01 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> select * from col_values;
+------+------+------+------+
| id   | col1 | col2 | col3 |
+------+------+------+------+
|    1 |    1 |    1 | NULL |
|    2 |    1 | NULL | NULL |
|    3 | NULL | NULL | NULL |
+------+------+------+------+
3 rows in set (0.00 sec)

mysql> update col_values set
    ->     col3 = ( case when ( col2 is not NULL and col3 is NULL ) then 7 else col3 end )
    ->     , col2 = ( case when ( col1 is not NULL and col2 is NULL ) then 8 else col2 end )
    ->     , col1 = ( case when ( col1 is NULL ) then 9 else col1 end )
    -> ;
Query OK, 3 rows affected (0.02 sec)
Rows matched: 3  Changed: 3  Warnings: 0

mysql> select * from col_values;
+------+------+------+------+
| id   | col1 | col2 | col3 |
+------+------+------+------+
|    1 |    1 |    1 |    7 |
|    2 |    1 |    8 | NULL |
|    3 |    9 | NULL | NULL |
+------+------+------+------+
3 rows in set (0.00 sec) 
```

您还可以使用`if`函数作为`case`语句的替代方法。

```
mysql> truncate table col_values;
Query OK, 3 rows affected (0.01 sec)

mysql> insert into col_values values ( 1, 1, 1, NULL ), ( 2, 1, NULL, NULL ), ( 3, NULL, NULL, NULL );
Query OK, 3 rows affected (0.02 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> select * from col_values;
+------+------+------+------+
| id   | col1 | col2 | col3 |
+------+------+------+------+
|    1 |    1 |    1 | NULL |
|    2 |    1 | NULL | NULL |
|    3 | NULL | NULL | NULL |
+------+------+------+------+
3 rows in set (0.00 sec)

mysql> update col_values set
    ->     col3 = if( ( col2 is not NULL and col3 is NULL ), 7, col3 )
    ->     , col2 = if( ( col1 is not NULL and col2 is NULL ), 8, col2 )
    ->     , col1 = if( col1 is NULL, 9, col1 )
    -> ;
Query OK, 3 rows affected (0.01 sec)
Rows matched: 3  Changed: 3  Warnings: 0

mysql> select * from col_values;
+------+------+------+------+
| id   | col1 | col2 | col3 |
+------+------+------+------+
|    1 |    1 |    1 |    7 |
|    2 |    1 |    8 | NULL |
|    3 |    9 | NULL | NULL |
+------+------+------+------+
3 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:38:39.100

你可以做类似的事情

```
UPDATE table SET columnC = IF(columnB is not null, "value", columnC) where id = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T10:14:26.437

你可以尝试这样的事情：

```
 $result=mysql_query('SELECT fav1, fav2, fav3, fav4, fav5 FROM users where id=".."');

    $row = mysql_fetch_array($result);

      foreach ($row as $columnName=>$value)
      {
         if ($value==null)
            {
             //update users set $columnName=pageID 
             break;
            }
      } 
```

# cocoa - mac应用商店沙盒问题

> ID：11176412
> 
> 赞同：1
> 
> 时间：2012-06-24T09:42:27.967
> 
> 标签：cocoa, crash, app-store, sandbox

我的应用程序在其捆绑包中有一个第 3 方可执行文件，我的应用程序通过 NSTask 与之通信。我能够对我的应用程序进行沙箱处理，并且一切正常，但是当我将其提交到 Mac App Store 时，我被告知我还​​必须对这个可执行文件进行沙箱处理。现在，当我这样做时，它会破坏一切，发生的是可执行文件崩溃，并且崩溃报告显示无法创建沙箱。这个可执行文件位于我项目的 Resources 文件夹中，并在我构建时复制到我的应用程序中。那么这里的解决方案是什么？如果对实际的可执行文件进行沙箱处理使其崩溃，但 App Store 给了我无效的二进制文件而没有对其进行沙箱处理，我该怎么办？

谢谢，

rc

# html - 以正确的方式填充背景

> ID：11176413
> 
> 赞同：1
> 
> 时间：2012-06-24T09:42:28.243
> 
> 标签：html, css, image, background, fill

我正在尝试制作简单的网站，其内容背景由 3 个图像组合而成：顶栏、内容背景和底栏。

问题是内容背景出现在顶部和底部栏下，应该是透明度： ![在此处输入图像描述](../Images/f65da85c986ca6badb226a7c847d2f8c.png)

添加 BG CSS 之后和之前：

```
background-image: url('content-top.png'), url('content-bottom.png');
background-repeat: no-repeat, no-repeat;
background-position: left top, left bottom; 
```

.

```
background-image: url('content-top.png'), url('content-bottom.png'), url('content-body.png');
background-repeat: no-repeat, no-repeat, repeat-y;
background-position: left top, left bottom, left center; 
```

我该如何解决这个问题？

编辑：我用 CSS3 创建了相同的效果，解决了这个问题：

```
background-color: #d9daca;
-webkit-border-radius: 11px;
border-radius: 11px;
-webkit-box-shadow: inset 0px 0px 1px 1px rgba(255, 255, 255, 1);
box-shadow: inset 0px 0px 1px 1px rgba(255, 255, 255, 1);
border: 1px #8a8977 solid; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T10:12:54.007

如果您使用图像，最简单的方法是为容器中的每个图像创建一个 div，然后通过 css 属性控制背景或将图像放入 div 中。您遇到的问题是顶部图像与背景图片重叠，因为它是一个 div。拆分它，它将对问题进行排序，例如：

```
<div id="wrapper">
    <div id="top"></div>
    <div id="middle">
        <!-- Content in here -->
    </div>
    <div id="bottom"></div>
</div> 
```

这样所有的 div 都保存在一个包装器中。您可能需要申请 float: left !important; 如果您无法让它们正确排列，请发送给某些 div。但这就是我所做的，而且效果很好:)

安迪

# mysql - 是否应该始终将主键添加到 innodb 表中？

> ID：11176415
> 
> 赞同：6
> 
> 时间：2012-06-24T09:42:36.453
> 
> 标签：mysql, database, database-design, indexing, database-optimization

我有一些只有 2 个 int 列的 innoDb，它们是其他表主键的外键。

例如，一个表是 user_items，它有 2 列，userId，itemId，用户表和项目表的外键，如果更新或删除，则设置为级联。

我应该在这些表中添加第三列并使其成为主键，还是现在的方式更好，在性能或任何其他好处方面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T09:59:28.680

仅仅为了添加 ID 列而添加第三个 ID 列是没有意义的。事实上，当您插入或删除行时，它只会增加处理开销（索引维护）。

主键不一定是“ID 列”。

如果您只允许用户和项目之间有一个关联（一个用户不能被分配两次相同的项目），那么将其定义`(userid, itemid)`为表的主键是有意义的。

如果您确实允许同一对出现多次，那么您当然不需要该约束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T10:50:25.547

你已经有一把天然钥匙了`{userId, itemId}`。除非有特定原因添加另一个（代理）键，否则只需使用现有键作为主键。

代孕的一些原因可能包括：

*   让儿童 FK 保持“苗条”。
*   消除子级联更新。
*   ORM 友好性。

我认为这不适用于您的情况。

另外，请注意[InnoDB 表是聚集](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)的，聚集表中的二级索引比基于堆的表中的二级索引更昂贵。因此，理想情况下，您应该尽可能避免使用二级索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T10:43:47.900

一般来说，如果它不会给您正在编写的代码增加真正的复杂性，并且该表预计包含 100,000-500,000 行或更少，我建议添加主键。我有时还建议添加`created_at`和`updated_at`列。

是的，它们需要更多的存储空间——但它是最小的。还有一个问题是必须维护主键索引，因此如果表变大，插入和更新可能会变慢。但除非表很大（数千或数百万行），否则处理速度可能没有区别。

因此，除非表非常大，否则对空间和处理速度的影响是微不足道的——因此您要决定维护它需要多少努力以及它提供的潜在效用。如果只需要很少的额外代码，那么它提供的几乎任何实用程序都可能值得。

拥有主键的最佳理由之一是根据插入的顺序为行提供*自然顺序。*如果您想检索添加的最后 100 行（或前 100 行），如果您在表上有一个自动递增的主键，这将非常简单和快速。

在基于日期范围获取数据方面，添加`inserted_at`和列可以提供类似的实用程序。`updated_at`同样，除非行数非常大，否则也可能值得评估这些。

# c - 尝试在 C 函数中复制字符串时出现分段错误

> ID：11176416
> 
> 赞同：0
> 
> 时间：2012-06-24T09:42:36.663
> 
> 标签：c, segmentation-fault, strcpy

我在“C”中有一个函数应该实现我自己的 strcpy 程序。这是我写的。但是，我无法调试分段错误的原因。

```
#include <stdio.h>
#include <stdlib.h>

char * mystrcpy(char *dest, char *src) {
    char * ptr = dest;
    while (*src != '\0'){
        *ptr = *src;
        ptr++; src++;
        //printf("Dest is \"%s\" and Source is \"%s\"\n",dest,src);
    }
    *ptr = '\0';
    return dest;
}

int main() {
    char str[] = "I rock always";
    char * dest = NULL;
    dest = mystrcpy(dest, str);
    printf("Source String %s and Destination String %s\n", str, dest);
} 
```

有人可以向我解释这种行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T09:45:21.553

您必须为目标字符串分配内存：

```
int main() {
    char str[] = "I rock always";
    char * dest = (char*)malloc(strlen(str) + 1);
    dest = mystrcpy(dest, str);
    printf("Source String %s and Destination String %s\n", str, dest);
} 
```

当然，最终释放内存是一种礼貌：

```
 free(dest); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T09:45:17.620

`*dest`你永远不会为指向 分配任何内存。

它开始指向 NULL，然后您尝试：`*ptr = *src`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T09:58:22.483

分配内存并尝试....

```
 #include <stdio.h>
         #include <stdlib.h>

         char * mystrcpy(char *dest, char *src) 
         {
                     char * ptr = dest;
                     int index=0;
                     while (*src != '\0')
                     {
                         *(ptr+index) = *(src+index);
                           index++;
                     }
                     *(ptr+index) = '\0';
                     return dest;

          }

          int main() 
          {
                char str[] = "I rock always";
                char * dest = (char*)malloc((strlen(str)+1)*sizeof(char));
                dest = mystrcpy(dest, str);
                printf("Source String %s and Destination String %s\n", str, dest);
                free(dest);
                return 0;
          } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T10:05:31.917

```
#include <stdio.h>

    /* this the K&R version of strcpy */
char * mystrcpy(char *dest, char *src) {
    char *ptr = dest;
    while ( *ptr++ = *src++ ) {;}

    return dest;
}

int main(void) {
    char str[] = "I rock always";
    char dest[sizeof str];
    char *result;

    result = mystrcpy(dest, str);
    printf("Source String %s and Destination String %s and result %s\n", str, dest, result);
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T09:45:23.133

您必须为目标字符串缓冲区分配内存。

内存管理是 C 语言中非常重要的一部分……您需要非常小心地分配和释放内存，因为它已被使用并超出需求。不这样做会导致分段错误（未能分配内存）和内存泄漏（未能释放内存）

此处的其他答案为您提供了 malloc 的示例，因此我不会在这里重复。

您应该尽可能地使用您已经可用的功能，而不是自己编写。这避免了实施中的错误，因为有人已经为您调试和优化了它。

[http://www.cs.cf.ac.uk/Dave/C/node19.html](http://www.cs.cf.ac.uk/Dave/C/node19.html)

# mysql - MySQL DELETE with JOIN on condition

> ID：11176418
> 
> 赞同：1
> 
> 时间：2012-06-24T09:43:11.523
> 
> 标签：mysql

我有 3 张桌子；产品、变体和库存{简化}

PRODUCTS id 名称已停用（ENUM：0 或 1）等

VARIANTS id product_id 颜色大小

STOCK id variant_id branch_id

当用户选择停止产品时，我将停止标志设置为 1。这很好，但如果没有产品的 STOCK 记录，我想完全删除 PRODUCT 和 VARIANTS 记录。显然，我可以先在 PHP 中使用 SELECT 查询来做到这一点，但我想在一个 mySQL 查询中做到这一点。这是我到目前为止所拥有的，但它从 mySQL 返回一个错误：

```
$query = "DELETE FROM prod_lines, 
  JOIN variants ON variants.lineid = prod_lines.id
  WHERE prod_lines.id = '$lineid' AND
  (SELECT COUNT(id) FROM stock WHERE stock.variantid = variants.id) = 0"; 
```

有人可以帮我想出正确的解决方案吗？也许有更好的方法甚至不涉及子查询？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T11:06:49.743

我假设`product_line`您查询中的`PRODUCTS`表格是您在帖子开头描述的表格。

```
DELETE prod_lines.*  -- you must specify which table you are deleting from, because there are several tables in the FROM clause
FROM prod_lines
JOIN variants ON variants.lineid = prod_lines.id
LEFT JOIN stock ON stock.variantid = variants.id
WHERE prod_lines.id = @lineid -- your "$lineid" variable here
AND stock.id IS NULL; -- selects only items with no match in the "stock" table 
```

[http://sqlfiddle.com/#!2/40a21](http://sqlfiddle.com/#!2/40a21)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T10:54:48.573

尝试这样的事情，缺点是虽然你必须在这里有两个 php 变量，还有一个你可能不满意的嵌套查询

```
 DELETE FROM (select COUNT(id) countstock FROM stock s,variants v WHERE s.variantid = v.id and v.productid='$lineid') prod 
    where prod.countstock>1 and prod.productid='$lineid' 
```

# android - Android ViewPagerIndicator 不显示标签

> ID：11176420
> 
> 赞同：0
> 
> 时间：2012-06-24T09:43:39.523
> 
> 标签：android, viewpagerindicator

我正在实施 ViewPagerIndicator，就像这里建议的那样：http: [//blog.stylingandroid.com/archives/537](http://blog.stylingandroid.com/archives/537)

一切都很好，只是我的指示器没有显示我正在设置的标签。这是我设置它们的方法：

公共类 MainPagerActivity 扩展 Activity {

```
private ViewPager pager;
private List<View> pages;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewpager_main);
    initUI();
}

private void initUI() {
    LayoutInflater inflater = LayoutInflater.from(this);

    pager = (ViewPager)findViewById(R.id.main_pager);
    pages = new ArrayList<View>();

    pager.setCurrentItem(0);     

    ListView all = (ListView)inflater.inflate(R.layout.all_thoughts, null);
    all.setTag("All thoughts");
    pages.add(all);

    ListView favorites = (ListView)inflater.inflate(R.layout.all_thoughts, null);
    favorites.setTag(R.string.favorites);
    pages.add(favorites);

    RelativeLayout profile = (RelativeLayout)inflater.inflate(R.layout.profile, null);
    profile.setTag(R.string.profile);
    pages.add(profile);

    ViewPagerAdapter adapter = new ViewPagerAdapter(pages);
    pager.setAdapter(adapter);

    TitlePageIndicator titleIndicator = (TitlePageIndicator)findViewById(R.id.indicator);
    titleIndicator.setViewPager(pager);
    titleIndicator.setCurrentItem(0);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T10:02:31.920

ViewPagerIndicator 的基于标题的指示器使用从支持您显示标题的`getTitle(int)`方法返回的任何内容。确保为每个页面返回非空字符串。`PagerAdapter``ViewPager``null`

# c++ - 进行 knnMatch 后的 .distance 是什么？

> ID：11176421
> 
> 赞同：3
> 
> 时间：2012-06-24T09:43:46.547
> 
> 标签：c++, opencv, sift, surf, keypoint

基本上我有：

```
BruteForceMatcher<L2<float>>().knnMatch(descriptor1,descriptor2,matches,2); 
```

为了只获得好的匹配，我解析所有“匹配”向量并检查距离，如下所示：

```
if( (matches[i][0].distance / matches[i][1].distance) < ratio ){
  //> Good match!
} 
```

但是什么`matches[i][0].distance`意思？和之间的距离`matches[i][0]`？

## 我的假设

对于我的猜测，计算第一个匹配与它的 NN 之间的欧几里距离，并用阈值过滤它对我来说听起来更合乎逻辑，例如：

```
//> I calculate the distance between 2 nearest neighborhood and filter it based on thresold
foreach( matches : i) {
 if ( euclianDistance( matches[i][0] , matches[i][1] ) < threshold ) {
   //> good match
 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T10:00:22.487

*描述符*- 是 N 维空间的一个点。

*match* - 是一对描述符 - 一个来自第一组，一个来自第二组（也称为*训练*集和*查询*集）。

*距离*- 是结构`L2`指向的 2 个描述符的度量`match`。（您将指标类型指定为 的模板参数`BruteForceMatcher`）。

```
match[i][0].distance = L2(descriptor1.row(match[i][0].trainIdx),
                          descriptor2.row(match[i][0].queryIdx)) 
```

因此，从*查询*集中为*训练*`knnMatch`集中的每个描述符返回两个最接近的描述符。接下来，您将过滤掉两个找到的描述符彼此接近的情况。

# asp.net-mvc - 带有 MVC 3 Razor 视图引擎的 javascript

> ID：11176429
> 
> 赞同：-1
> 
> 时间：2012-06-24T09:45:11.800
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有以下代码：

```
<html> <head>
      <!-- Required CSS --> <link type="text/css" rel="stylesheet" href="http://yui.yahooapis.com/2.9.0/build/treeview/assets/skins/sam/treeview.css"> <!-- Optional CSS for for date editing with Calendar--> <link type="text/css" rel="stylesheet" href="http://yui.yahooapis.com/2.9.0/build/calendar/assets/skins/sam/calendar.css"> <!-- Dependency source file -->  <script src="http://yui.yahooapis.com/2.9.0/build/yahoo-dom-event/yahoo-dom-event.js"
></script> <!-- Optional dependency source file -->  <script src="http://yui.yahooapis.com/2.9.0/build/animation/animation-min.js" type="text/javascript"></script> <!-- Optional dependency source file for date editing with Calendar-->  <script src="http://yui.yahooapis.com/2.9.0/build/calendar/calendar-min.js"
></script> <!-- Optional dependency source file to decode contents of yuiConfig markup attribute-->  <script src="http://yui.yahooapis.com/2.9.0/build/json/json-min.js" ></script> <!-- TreeView source file -->  <script src="http://yui.yahooapis.com/2.9.0/build/treeview/treeview-min.js"
></script>
     </head> <body class="yui-skin-sam">

@model IEnumerable< ESimSol.BusinessObjects.MenuTreeNode>           

<input type="button" id="btnAdd" value="Refresh" /> <label id="lblTest"> </label> <div id="treeDiv1"> <ul>    
    @foreach (var item in Model)
    {
        if (item.ParentID == 0)
        {
            <li>
                @Html.DisplayFor(modelItem => item.MenuName)  
                <ul>
                    @Html.Partial("TreeViewControl", item)   
                </ul>
             </li> 
        }
    }   </ul> </div> </body> </html>

<script type="text/javascript">

    $(document).ready(function () {
        treeInit();
    });

    var tree;
    function treeInit() {
        tree = new YAHOO.widget.TreeView(document.getElementById("treeDiv1"));
    }

</script> 
```

当我想执行我的脚本时，我面临以下异常：

```
Microsoft JScript runtime error: Object expected 
```

任何人都给我一个完整的参考，使用 MVC3 RAZOR View 引擎执行 javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:55:27.653

请记住，将 javascript 与 MVC3/Razor 一起使用与将其与任何其他页面一起使用没有什么不同 - JS 是一种客户端语言，因此它始终与呈现的 HTML 一起工作。

我在您的 JS 代码中没有看到任何突出的错误，但您的`<script>`元素应该在`<body>`元素内。大多数浏览器都可以处理它，所以我怀疑这是你的问题。

我建议您检查您的脚本引用以验证它们是否正确，然后进一步查看脚本。您在 IE 中遇到的脚本错误应该引用一行 #，您可以使用它来查看页面源（呈现的页面，而不是 razor 页面）以尝试定位错误的来源。

# playframework - 如何提高 Play Framework 2.0 的编译速度

> ID：11176440
> 
> 赞同：11
> 
> 时间：2012-06-24T09:46:38.277
> 
> 标签：playframework, playframework-2.0

是否有人已经找到了一些调整来提高 Play 2.0 的编译速度？我目前正在使用 2.0.1 java。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-24T09:50:57.340

您可以使用`play ~run`. 这会在文件系统上检测到更改后立即编译文件。

此外，有传言称未来几个月将有大量编译提升。（2012年下半年）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-04T20:01:56.430

我写了一篇很长的文章，介绍我们如何与我的团队一起解决 Play Framework 中的编译问题。

[https://medium.com/@jfcote/the-ultimate-solution-to-play-framework-slow-compilation-53f4fd499df4](https://medium.com/@jfcote/the-ultimate-solution-to-play-framework-slow-compilation-53f4fd499df4)

总结一下，

*   将此添加到 build.sbt：`playEnhancerEnabled := false`
*   使用重构工具封装每个字段（将它们设为私有，生成 getter 并更改新创建的 getter 的使用）。只为在类外使用的字段生成一个 setter（你会通过编译知道并查看错误）
*   确保删除所有标记有 @Transient 注释的函数。我们在某些功能上添加了这些注释，因为它与 Play Enhancer 发生冲突。只需删除注释，一切都会好起来的！
*   如果重构工具没有完成它的工作，编译和修复你使用该字段的任何地方。

# asp.net - 在重定向到其他页面之前运行 JavaScript

> ID：11176442
> 
> 赞同：2
> 
> 时间：2012-06-24T09:46:40.150
> 
> 标签：asp.net

在重定向到另一个页面之前，我尝试使用 JavaScript 打开一个弹出窗口。

我写了这段代码：

```
ScriptManager.RegisterStartupScript(this.Page, typeof(Page), "abc", "window.open('http://yahoo.com','2','resizable=yes,directories= no,menubar=no,top=null,left=00, width=100,height=100')", true);
Response.Redirect(p.Url); 
```

但它只是一个重定向并且不会打开一个弹出窗口。

如何在用户用户重定向到另一个页面之前打开一个弹出窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:53:33.180

如果您正在执行诸如打开弹出窗口或窗口...之前之类的操作`response.redirect();`，它将无法正常工作。如果您想在打开弹出框后重定向到任何页面，请确保重定向应该只用 Javascript 而不是 C#

这行不通

```
Response.Write("<script language='javascript'>alert('hello')</script>");  
Response.Redirect("About.aspx"); <br> 
```

这将起作用

```
Response.Write("<script language='javascript'>alert('hello');
window.location.href='About.aspx';</script>"); 
```

或者

```
if (!ClientScript.IsStartupScriptRegistered("alert"))
{ 
Page.ClientScript.RegisterStartupScript(this.GetType(), "alert",     "alertMe();window.location.href='About.aspx';", true);
} 
```

这样我们也可以调用外部 JS 文件

```
 Page.ClientScript.RegisterStartupScript(this.GetType(),    "callJS", 
 "&alt; script language='javascript' src='sample.js' &glt;  "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T10:28:55.250

如果您使用的是 ScriptManager.RegisterStartupScript，您应该将您的 javascipt 代码插入到您的 aspx 页面顶部（在`<head>`标签中）

对我来说是一个工作示例；

```
ScriptManager.RegisterStartupScript(this.Page, typeof(Page), "abc", "<script>OpenWin();</script>", false);
Response.Redirect(p.Url); 
```

在 aspx 头标签中；

```
<script type="text/javascript">

 function OpenWin() {
        window.open('http://yahoo.com', '2', 'resizable=yes,directories= no,menubar=no,top=null,left=00, width=100,height=100');
   }

</script> 
```

如果此代码不起作用，另一种方法；您可以使用 javascript 进行重定向。像这样 ;

```
window.location.href="p.Url"; 
```

但是通过这种方式，您应该将 p.Url 值传递给 javascript。您可以通过多种方式执行此操作（隐藏字段、会话等）

# jquery - 该按钮不会通过单击更新

> ID：11176447
> 
> 赞同：0
> 
> 时间：2012-06-24T09:47:11.783
> 
> 标签：jquery

我有用于更新按钮文本的简单 JS 代码：

```
<html>
<head>
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
</head>
<body>
    <table border='1'>
    <div id="load-button" style="border:1px solid black; background-color:white;padding:5px;cursor:pointer;width:200px;text-align:center;border-radius:4px;">Load button</div>
    <script type="text/javascript">
    //wait for HTML document
        $(document).ready(function() {
          $('#load-button').click(function() {
            $.ajax({
              url: 'http://developers-blog.org/resources/jquery-ajax/snippet.html',
              success: function(data) {
                $('#load-button').empty();
                $('#load-button').append(data); 
              }
            });
          });
        });
    </script>
</body>
</html> 
```

JQuery 库是带有 index.php 页面的文件夹。但是这段代码不起作用。请告诉我，我在哪里做错了？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:55:16.107

看起来您正在发出跨域请求，并且大多数浏览器默认情况下会强制执行**[SAME ORIGIN POLICY](http://en.wikipedia.org/wiki/Same_origin_policy)**并阻止对其他域的请求。您可以使用 jsonp 或使用您的服务器联系特定的端点。在此处阅读有关 JSONP 的更多信息：[http ://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T10:16:23.907

这确实是应用同域策略的情况。

如果您有权访问要调用的服务器上的文件，您可以`Access-Control-Allow-Origin`在应用程序上设置标头 ( ) 以允许来自已确定域的请求。

PHP 示例：

`header('Access-Control-Allow-Origin: *');`

或者

`header('Access-Control-Allow-Origin: http://permitted_domain.com');`

# heap-memory - 查找堆是否长大

> ID：11176455
> 
> 赞同：2
> 
> 时间：2012-06-24T09:49:04.187
> 
> 标签：heap-memory, direction

参考下面的链接，该链接解释了如何查找机器堆栈是否在内存中增长...我想知道以下是否是查找机器的堆在内存中增长还是下降的正确方法。

[您如何确定机器的堆栈在内存中是向上还是向下增长？(JAVA)](https://stackoverflow.com/questions/1163977/how-would-you-find-out-if-a-machines-stack-grows-up-or-down-in-memory-java)

我的代码

```
void findHeapDirection(int *a) {

   int *b;
   b = (int*)malloc(sizeof(b));  
   printf("\naddress of a %x",a);   
   printf("\naddress of b %x",&b);

   if(b > a) 
     printf("\n>>heap grows up");
   else
    printf("\n>>heap grows down");   

    free(b);

  } 
```

并像这样调用这个函数

```
 int *a;
 a = (int*)malloc(sizeof(a));
 findHeapDirection(a);
 free(a); 
```

这是我机器上的输出..

```
address of a 5417b0
address of b 28ff14
>>heap grows up 
```

***还是这个问题模棱两可，因为堆永远不会向下增长？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T10:13:01.137

你不需要函数调用来测试堆的东西。这就是[关于堆栈方向的链接问题，](https://stackoverflow.com/questions/1163977/how-would-you-find-out-if-a-machines-stack-grows-up-or-down-in-memory-java)因为编译器可能会在单个帧（或函数）内对堆栈上的变量重新排序。它不会对函数调用执行此操作，因此两个连续`malloc()`调用之间没有方法调用将与您的示例一样有效。

但是，与链接问题中的数字之间的差异相比，您示例中的数字之间的差异很大。堆确实在一个方向上增长，但这并不意味着两个相邻`malloc()`的调用将在地址值上发生变化，这意味着该方向——这更像是一种普遍趋势。

栈和堆相互向着增长。找出堆增长的方向的最简单方法是找出堆栈的方向（你从链接的问题中得到）并知道堆在另一个方向增长。

# jquery - jQuery Validationengine 箭头未显示

> ID：11176457
> 
> 赞同：2
> 
> 时间：2012-06-24T09:49:09.070
> 
> 标签：jquery, jquery-validation-engine

我正在使用.NET 的验证引擎，所以不要在某些页面上使用传统的 class="validate[required]" 因为我在页面上有一些逻辑表单并且不希望一次性验证整个表单使用以下内容：

```
$j(document).ready(function () {
     $j("#btnSave").click(function (e) {
         if ($j("#lstCustomerType").val() == "") {
             jQuery('#lstCustomerType').validationEngine('showPrompt', 'Please select a customer type', 'error', true);
     });
 }); 
```

我遇到的唯一问题是 showArrow 参数似乎什么都不做。无论我尝试什么，箭头都不会显示，我最终只会在文本框上方弹出一个弹出窗口。在我使用 class="validate[required]" 的页面上，箭头按预期显示。有谁知道这是否是手动显示弹出窗口或使其工作的语法的限制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T19:44:21.180

只是花了一整天的时间试图弄清楚这一点。以下是显示那些讨厌的箭头的正确语法：

```
$('#ed').validationEngine('showPrompt', validationDate, 'error', 'topRight', true); 
```

您似乎需要提供所有“可选”参数，否则实例化失败。我一直省略“topRight”，箭头永远不会出现。一旦我输入位置参数，箭头就会出现。

# java - 如何“缩小”数组 - Java

> ID：11176459
> 
> 赞同：4
> 
> 时间：2012-06-24T09:49:11.643
> 
> 标签：java, arrays

所以假设我创建了一个有 5 个空格的数组，就像这样 - `String[] myArray = new String[5]`。然后假设我定义了其中一些项，但将其中一些项保留为空（或 Java 术语用于未定义数组项/变量的任何内容），如下所示：

```
myArray[0] = "foo";
myArray[2] = "bar";
myArray[4] = "foobar"; 
```

有没有办法我可以“缩小”该数组，挤出所有空项目（不改变它的大小）？这样“foo”的索引保持在0，但“bar”的索引变为1，而“foobar”驻留在2，最后2个空格是空的？长话短说 - 在数组中的项目周围洗牌，将所有空项目推到最后，同时保持其他项目的相对顺序。是否已经有预定义的 Java 方法，或者我需要自己制作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T09:54:31.660

您可以使用以下方法（*没有 Collections 实例的开销*）：

```
import java.util.Arrays;

public class ArraySample {

    public static void main(final String[] args) {
        String[] src = new String[] { "foo", null, "bar", null, "foobar" };
        String[] dest = new String[src.length];

        int i = 0;
        for (String s : src) {
            if (s != null) {
                dest[i++] = s;
            }
        }

        System.out.println(Arrays.toString(src));
        System.out.println(Arrays.toString(dest));
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T10:12:17.940

您可以仅使用源数组来执行此操作：

```
 String[] src = new String[] { "foo", "foo3", null,null, "bar", null,null, "foobar", "foo2", null,"foo5",null };
    int lastNullIdx = -1;

    for (int i=0; i <src.length ; i++) {
        if (src[i] == null) {
            if(lastNullIdx==-1)lastNullIdx=i;
        }
        else if(lastNullIdx!=-1){
            src[lastNullIdx++]=src[i];
            src[i]=null;
        }
    }

    System.out.println(Arrays.toString(src)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T10:32:40.267

不要以为有办法。如果有类似的东西，它会在 java.util.Arrays 中。我会这样做

```
String[] src = new String[] { "foo", null, "bar", null, "foobar" };

for (int c = 0, j = 0; c < src.length; c++) {
    if (src[c] != null) {
        src[j++] = src[c];
        src[c] = null;
    }
} 
```

编辑：

```
String[] src = new String[] { "foo", null, "bar", null, "foobar" };
Comparator<String> NEW_ORDER = new Comparator<String>() {
    public int compare(String e1, String e2) {
        if(e1 == null)return 1;
        if(e2 == null)return -1;
        return 0;
    }
Arrays.sort(src, NEW_ORDER); 
```

应该也可以，因为 Arrays.sort 是一种稳定的排序，但我认为另一种解决方案更好，因为它的 O(n) 而不是 O(n log n)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T10:37:27.937

就地缩小，更简单的代码：

```
public static String[] minify(String[] x) {
  int d = 0;
  for (String s : x) if (s != null) x[d++] = s;
  while (d < x.length) x[d++] = null;
  return x;
}

public static void main(String[] args) {
  System.out.println(Arrays.toString(
      minify(new String[] {"foo", null, "bar", null, "foobar"})));
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-24T10:40:14.170

使用[函数](http://functionaljava.org/)式java ，

```
array(myArray).filter(new F<String, Boolean>() {
  public Boolean f(String s) { 
    return s != null; 
  }
}); 
```

这将*保留*满足给定条件的元素。结果将是由 . 返回的新数组`filter`。

**编辑：**

抱歉，我之前看错了问题。以下是如何将`null`s 挤出到右侧。

```
array(myArray).sort(
  booleanOrd.comap(new F<String, Boolean>() {
    public Boolean f(String s) {
      return s == null;
    }
  })
); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-24T11:06:42.957

Java 已经使用 Arrays.sort(T[] a, Comparator c) 方法为此类排序问题做好了准备：

```
Arrays.sort(myArray, new StringNullComparator()); 
```

和

```
class StringNullComparator implements Comparator<String> {

    @Override
    public int compare(String s1, String s2)
    {
        if(s1==null && s2!=null) return 1;
        else if(s1!=null && s2==null) return -1;
        else return 0;
    }
} 
```

这样，您甚至可以通过反转 compare 方法返回的值来将空值排序为较低的 indecees。

# ruby-on-rails - 有许多没有经典连接表的直通关系

> ID：11176468
> 
> 赞同：1
> 
> 时间：2012-06-24T09:50:51.067
> 
> 标签：ruby-on-rails

我有 3 个相关模型：项目、任务和子任务。

**项目有很多任务，任务有很多子任务。因此任务属于项目，子任务属于任务。**

目前，项目和子任务之间没有直接联系。我想做一个（并且可以访问@some_project.subtasks 和@some_subtask.project 之类的东西）。我想不要将 project_id 字段添加到子任务迁移中，而是**使用任务模型作为项目和子任务之间的一种“连接”**（因为任务已经有 project_id 列和与子任务的 has_many 关系）。

我首先编写**项目 has_many :subtasks, :through => :tasks**和**subtask belongs_to :project**。

我在项目模型上获得了 subtasks 方法，但是当我编写 @some_subtask.project 时，我总是得到 nil。此外，当我在 @some_project.subtasks 上使用范围时，我总是会收到“不明确的列名”错误。

我认为这是**因为我把我的关系搞错了。**如何正确处理它们？此外，如果将 project_id 字段添加到子任务迁移文件是更好的解决方案（或完全不同的解决方案），一定要告诉我。

编辑：这是返回列名错误的范围（我将它们放在 lib/ 文件夹中，它是一个包含在任务和子任务模型中的模块）

```
10   # SCOPING
 11   def self.included(base)
 12   
 13     today = Date.today
 14     start_of_day = DateTime.new(today.year, today.month, today.day, 0, 0, 1)
 15     end_of_day = DateTime.new(today.year, today.month, today.day+1, 0, 0, 0)
 16   
 17     base.class_eval do
 18       scope :not_targeted, where(:target => nil)
 19       scope :targeted, where("target IS NOT ?", nil)
 20       scope :targeted_today, where("target > ? AND target < ?", start_of_day, end_of_day)
 21       scope :targeted_after_today, where("target > ?", end_of_day) 
 22       scope :overdue, where("target < ?", start_of_day)
 23     end
 24 
 25   end 
```

当我尝试在项目控制器中定义此类变量时，那些返回错误（第 47 和 51 行应归咎于错误）。**基本上我需要这些来传递和返回正确的记录。**

```
 35     @project_tasks = @project.tasks
 36     @project_subtasks = @project.subtasks

 45     @today_tasks = @project_tasks.targeted_today
 46     @today_subtasks = @project_subtasks.targeted_today
 47     @today = @today_tasks + @today_subtasks
 48 
 49     @after_today_tasks = @project_tasks.targeted_after_today
 50     @after_today_subtasks = @project_subtasks.targeted_after_today
 51     @after_today = @after_today_tasks + @after_today_subtasks 
```

例如，这是第 47 行返回的错误...

> SQLite3::SQLException：不明确的列名：目标：选择“subtasks”。* FROM “subtasks” INNER JOIN “tasks” ON “subtasks”。“task_id” = “tasks”。“id” WHERE “tasks”。“project_id” = 1 AND（目标 > '2012-06-24 00:00:01' AND 目标 <'2012-06-25 00:00:00'）

这是项目模型：

```
 1 class Project < ActiveRecord::Base
  2              
  3   # RELATIONSHIPS          
  4   has_many :synapses, :dependent => :destroy
  5   has_many :users, :through => :synapses, :dependent => :nullify
  6 
  7   has_many :tasks, :dependent => :destroy
  8   has_many :subtasks, :through => :tasks, :dependent => :destroy
  9   has_many :discussions, :as => :discussionable, :dependent => :destroy
 10   
 11   #use this when you don't have callbacks
 12   #has_many :tasks, :dependent => :delete_all
 13   
 14   # VALIDATIONS
 15   validates :name, :presence => true,
 16             :length => { :maximum => 50 }   
 17   
 18   validates :description, :presence => true,
 19                           :length => { :maximum => 200, :minimum => 15 }
 20 
 21   # ATTRIBUTE ASSIGNMENT   
 22   attr_accessible :name, :description
 23 
 24   # CUSTOM METHODS         
 25   def belonging_project    
 26     self                   
 27   end                      
 28 
 29 end 
```

这是任务模型：

```
 1 class Task < ActiveRecord::Base
  2              
  3   include SharedModelCode  
  4   # has scoping and validate method
  5 
  6   # RELATIONSHIPS          
  7   belongs_to :project      
  8 
  9   has_many :vesicles, :dependent => :destroy
 10   has_many :users, :through => :vesicles, :dependent => :nullify
 11   
 12   has_many :subtasks
 13   
 14   has_many :discussions, :as => :discussionable, :dependent => :destroy
 15   
 16   # VALIDATIONS
 17   validates :project, :presence => true
 18   validates :name,  :presence => true,
 19                     :length => { :maximum => 50 }   
 20   validates :description, :presence => true,
 21                           :length => { :maximum => 200, :minimum => 15 }
 22   validate :target_date_cannot_be_in_the_past
 23                            
 24   # ATTRIBUTE ASSIGNMENT   
 25   attr_accessible :name, :description, :target, :completed
 26 
 27   # CUSTOM METHODS         
 28   def belonging_project    
 29     Project.find_by_id(self.project_id)
 30   end                      
 31 
 32 end 
```

这是子任务模型：

```
 1 class Subtask < ActiveRecord::Base
  2              
  3   include SharedModelCode  
  4   # has scoping and validate method
  5 
  6   # RELATIONSHIPS          
  7   belongs_to :task         
  8   belongs_to :project      
  9 
 10   has_many :subvesicles, :dependent => :destroy
 11   has_many :users, :through => :subvesicles, :dependent => :nullify
 12   
 13   has_many :discussions, :as => :discussionable, :dependent => :destroy
 14   
 15   # VALIDATIONS            
 16   validates :name,  :presence => true
 17   validates :task, :presence => true,
 18                     :length => { :maximum => 200 }  
 19   validate :target_date_cannot_be_in_the_past
 20 
 21   # ATTRIBUTE ASSIGNMENT   
 22   attr_accessible :name, :target, :completed
 23 
 24   # CUSTOM METHODS         
 25   def belonging_project    
 26     task = Task.find_by_id(self.task_id) 
 27     Project.find_by_id(task.project_id)
 28   end                      
 29                            
 30 end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T10:52:19.723

你的错误：

> SQLite3::SQLException：不明确的列名：目标：选择“subtasks”。* FROM “subtasks” INNER JOIN “tasks” ON “subtasks”。“task_id” = “tasks”。“id” WHERE “tasks”。“project_id” = 1 AND（目标 > '2012-06-24 00:00:01' AND 目标 <'2012-06-25 00:00:00'）

是由于您编写范围的方式，而不是您创建关系的方式。它说在表格和表格`target`中*都有一列。*`tasks``subtasks`

像这样重写范围应该至少可以修复该错误：

```
# tasks targeted today
scope :tasks_targeted_today, where("tasks.target > ? AND tasks.target < ?", start_of_day, end_of_day)

# subtasks targeted today
scope :subtasks_targeted_today, where("subtasks.target > ? AND subtasks.target < ?", start_of_day, end_of_day) 
```

当您在这样的连接中的多个表中具有相同的列名时，您需要指定约束适用于哪个表和列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:14:30.287

如果您需要通过其他表的 belongs_to-like 关系，则使用`has_one`. 它允许您`through`在其选项中指定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T09:57:49.067

尝试这样的事情也许

```
class Projects < ActiveRecord::Base
  has_many :tasks
  has_many :subtasks, :through => :tasks, :foreign_key => "project_id" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T10:00:42.097

您不能`:trough`在 belongs_to 关联中使用。但是，您可以轻松定义祖父母：

```
class Subtask < ActiveRecord::Base
  belongs_to :task
...
  def project
    task.project
  end
... 
```

“不明确的列名”错误需要更多信息来解决。你能附上你试过的范围吗？

# f# - F# 生成日期序列/数组

> ID：11176471
> 
> 赞同：8
> 
> 时间：2012-06-24T09:51:07.060
> 
> 标签：f#

在 F# 中，我可以轻松做到

```
let a = [1 .. 10];; 
```

那为什么我不能

```
let a = DateTime.Parse("01/01/2012")
let b = DateTime.Parse("01/01/2020")

let dateList = [a .. b] 
```

它给出了一个错误`Type constraint mismatch. The type DateTime is not compatible with type TimeSpan`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-24T10:04:22.073

有两个问题 - 首先，您需要指定要在列表元素之间使用的间隔。这将是一个`TimeSpan`，但它没有静态`Zero`成员。

[跳过范围运算符](http://msdn.microsoft.com/en-us/library/ee353647)需要此约束，它要求“步骤”类型具有静态`(+)`和`Zero`成员

但是，您可以定义自己的结构来支持所需的操作：

```
type TimeSpanW = { span : TimeSpan } with
  static member (+) (d:DateTime, wrapper) = d + wrapper.span
  static member Zero = { span = new TimeSpan(0L) } 
```

然后你可以这样做：

```
let ts = new TimeSpan(...)
let dateList = [a .. {span = ts} .. b] 
```

**编辑：**这是使用您可能更喜欢的可区分联合的替代语法：

```
type Span = Span of TimeSpan with
  static member (+) (d:DateTime, Span wrapper) = d + wrapper
  static member Zero = Span(new TimeSpan(0L))

let ts = TimeSpan.FromDays(1.0)
let dateList = [a .. Span(ts) .. b] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-03T21:26:13.753

这是一种生成日期列表的时髦方法。请注意，当我从其他人那里得到它时，我对此没有任何信任。

```
open System
let a = new DateTime(2013,12,1)
let b = new DateTime(2013,12,5)
Seq.unfold (fun d -> if d < b then Some(d, d.AddDays(1.0)) else None) a
 |> Seq.toList;; 
```

它返回：

> 验证它：日期时间列表 = [01/12/2013 00:00:00; 2013 年 2 月 12 日 00:00:00；2013 年 3 月 12 日 00:00:00；04/12/2013 00:00:00]

# c++ - 如何在 C++ 中编写二进制文件

> ID：11176472
> 
> 赞同：5
> 
> 时间：2012-06-24T09:51:10.133
> 
> 标签：c++, encoding, binary, huffman-code

我正在尝试在 C++ 中实现霍夫曼的编码算法。

我的问题是：在我得到每个字符的等效二进制字符串之后，我怎样才能将这些零和一作为二进制文件写入文件而不是字符串 0 或字符串 1？

提前致谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:35:43.203

在不同的数据结构中单独获取每个字符的编码是一个失败的解决方案，因为您需要将生成的二进制文件中的每个字符的编码并列：单独存储它们使得这与直接将它们连续存储**在位向量中**一样困难.

这种考虑建议使用 a`std::vector<bool>`来执行您的任务，但它是一个损坏的解决方案，因为它不能被视为 c 样式的数组，并且您在输出时确实需要它。

这个[问题](https://stackoverflow.com/questions/670308/alternative-to-vectorbool)准确地询问了哪些是 的有效替代品`std::vector<bool>`，所以我认为该问题的答案非常适合您的问题。

顺便说一句，我要做的就是`std::vector<uint8_t>`在一个适合你需要的类下包装一个，就像附加的代码一样：

```
#include <iostream>
#include <vector>
#include <cstdint>
#include <algorithm>
class bitstream {
private:
    std::vector<std::uint8_t> storage;
    unsigned int bits_used:3;
    void alloc_space();
public:
    bitstream() : bits_used(0) { }

    void push_bit(bool bit);

    template <typename T>
    void push(T t);

    std::uint8_t *get_array();

    size_t size() const;

    // beware: no reference!
    bool operator[](size_t pos) const;
};

void bitstream::alloc_space()
{
    if (bits_used == 0) {
        std::uint8_t push = 0;
        storage.push_back(push);
    }
}

void bitstream::push_bit(bool bit)
{
    alloc_space();
    storage.back() |= bit << 7 - bits_used++;
}

template <typename T>
void bitstream::push(T t)
{
    std::uint8_t *t_byte = reinterpret_cast<std::uint8_t*>(&t);
    for (size_t i = 0; i < sizeof(t); i++) {
        uint8_t byte = t_byte[i];
        if (bits_used > 0) {
            storage.back() |= byte >> bits_used;
            std::uint8_t to_push = (byte & ((1 << (8 - bits_used)) - 1)) << bits_used;
            storage.push_back(to_push);
        } else {
            storage.push_back(byte);
        }
    }
}

std::uint8_t *bitstream::get_array()
{
    return &storage.front();
}

size_t bitstream::size() const
{
    const unsigned int m = 0;
    return std::max(m, (storage.size() - 1) * 8 + bits_used);
}

bool bitstream::operator[](size_t size) const
{
    // No range checking
    return static_cast<bool>((storage[size / 8] >> 7 - (size % 8)) & 0x1);
}

int main(int argc, char **argv)
{
    bitstream bs;
    bs.push_bit(true);
    std::cout << bs[0] << std::endl;
    bs.push_bit(false);
    std::cout << bs[0] << "," << bs[1] << std::endl;
    bs.push_bit(true);
    bs.push_bit(true);
    std::uint8_t to_push = 0xF0;
    bs.push_byte(to_push);
    for (size_t i = 0; i < bs.size(); i++)
        std::cout << bs[i] << ",";
    std::cout << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:38:18.883

我希望这段代码可以帮助你。

*   您从表示输入文件的每个字符的连续编码的字节序列（1 和 0）开始。
*   您获取序列的每个字节并在临时字节中添加一个位 ( `char byte`)
*   每次填充一个字节时，都会将其写入文件（为了提高效率，您也可以等待获得更大的数据）
*   最后，您将剩余的位写入文件，用尾随零填充，例如
*   正如 akappa 正确指出的那样，如果在每次文件写入操作之后（或者更一般地说，每次它被完全填充并刷新到其他地方），`else`分支可以被删除，所以只必须写入。`byte``0``1s`

* * *

```
void writeBinary(char *huffmanEncoding, int sequenceLength)
{
    char byte = 0;
    // For each bit of the sequence
    for (int i = 0; i  < sequenceLength; i++) {
        char bit = huffmanEncoding[i];

        // Add a single bit to byte
        if (bit == 1) {
            // MSB of the sequence to msb of the file
            byte |= (1 << (7 - (i % 8)));
            // equivalent form: byte |= (1 << (-(i + 1) % 8);
        }
        else {
            // MSB of the sequence to msb of the file
            byte &= ~(1 << (7 - (i % 8)));
            // equivalent form: byte &= ~(1 << (-(i + 1) % 8);
        }

        if ((i % 8) == 0 && i > 0) {
            //writeByteToFile(byte);
        }
    }

    // Fill the last incomplete byte, if any, and write to file
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T09:55:15.960

您不能写入只有位的二进制文件；写入的最小数据大小是一个字节（因此是 8 位）。

所以你应该做的是创建一个缓冲区（任何大小）。

```
char BitBuffer; 
```

写入缓冲区：

```
int Location;
bool Value;

if (Value)
    BitBuffer |= (1 << Location);
else
    BitBuffer &= ~(1 << Location) 
```

代码`(1 << Location)`生成一个除指定位置外全为 0 的数字`Location`。然后，如果`Value`设置为 true，则将 Buffer 中的相应位设置为 1，否则设置为 0。使用的二进制操作相当简单，如果你不理解它们，它应该在任何好的 C++ 书籍/教程中。

位置应该是 <0, sizeof(Buffer)-1> 范围内的数字，因此在这种情况下为 <0,7>。

使用 fstream 时，将缓冲区写入文件相对简单。只要记住以二进制文件的形式打开它。

```
ofstream File;
File.open("file.txt", ios::out | ios::binary);
File.write(BitBuffer, sizeof(char)) 
```

编辑：注意到一个错误并修复它。

EDIT2：您不能`<<`在二进制模式下使用运算符，我忘记了。

**替代解决方案**：使用`std::vector<bool>`或`std::bitset`作为缓冲液。

这应该更简单，但我想我可以帮助你更多一点。

```
void WriteData (std::vector<bool> const& data, std::ofstream& str)
{
    char Buffer;
    for (unsigned int i = 0; i < data.size(); ++i)
    {
       if (i % 8 == 0 && i != 0)
           str.write(Buffer, 1);
       else
           // Paste buffer setting code here
           // Location = i/8;
           // Value = data[i];
    }
    // It might happen that data.size() % 8 != 0\. You should fill the buffer
    // with trailing zeros and write it individually.
} 
```

# c++ - 无法标记字符串并传递给向量

> ID：11176474
> 
> 赞同：0
> 
> 时间：2012-06-24T09:51:54.657
> 
> 标签：c++, string, vector, cgi, strtok

我正在 C++ 中试验 CGI。我知道有一些库可以处理基本的东西，但是为了了解幕后发生的事情，我一直在尝试使用字符串数据类型解析标准输入---> 使用 '= 和 &' 标记化，然后将 push_back 放入向量中。在后一步，我收到分段错误。下面给出的是我使用 cin>> 获取用户输入的程序等等..

```
#include <iostream>
#include <stdlib.h>
#include <stdio.h>
#include <vector>
#include <algorithm>
#include <string.h>
using namespace std;
int main()
{

    vector <string> stuff(0);
    vector<string>::iterator it;
    char* bufferchar;
    string buffer;

    char str[size];
    cout<<"Content-type: text/html\n\n"
      <<"<html>"
      <<"<head>"
      <<"<title>CGI SCRIPT</title>"
      <<"</head>"
      <<"<body>"
    fgets(str,20,stdin);      //20 is expect size of content from html form
    puts(str);

    cout<<"<p>Now to break this guy apart";
    int x=0;
    bufferchar = strtok(str,"&=");
    buffer+=bufferchar;
    stuff.push_back(buffer);
    while(bufferchar!=NULL){
      cout<<bufferchar<<'\n'<<'\n';
      bufferchar=strtok(NULL,"&=");
      buffer+=bufferchar;
      stuff.push_back(buffer);
      }
    cout<<"<br>ok does the vector iterate ?";
    for (it=stuff.begin();it!=stuff.end();++it){
      cout<<*it;
      cout<<"<br> ok man, next <br><br>";
    }
    cout<<"</body>";
    cout<<"</html>";
} 
```

# php - php内存使用情况

> ID：11176477
> 
> 赞同：1
> 
> 时间：2012-06-24T09:52:30.913
> 
> 标签：php, memory

看起来在 PHP 中它需要大约 213 个字节来存储一个整数，是真的吗？好的，请看下一段代码：

```
$N = 10000;
echo memory_get_usage()."\n";
$v = array();
for($i = 0; $i < $N; $i++) {
    $v[] = $i;
}
echo memory_get_usage()."\n";
unset($v);
echo memory_get_usage()."\n"; 
```

接下来是输出：

```
641784
2773768
642056 
```

因此，差异是 2773768 - 641784 = 2131984 字节，或每个整数 213 字节。为什么这么多？4 个字节绰绰有余。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T10:37:12.890

仅当您只是将整数值存储在内存中的某个位置时，4 个字节才足够，而没有考虑到它是一个需要数据类型标识的变量、指示是否存在对该变量的任何其他引用的标志、名称该变量等所有这些都需要额外的内存。

PHP 将值存储在 zval* 中，因此除了实际值之外，还有用于存储 zval 详细信息的所有附加字节。

# java - 如何将 JRadioButton 添加到 JTable 中的组中

> ID：11176480
> 
> 赞同：2
> 
> 时间：2012-06-24T09:52:43.170
> 
> 标签：java, swing, jtable, jradiobutton, buttongroup

我已将单选按钮添加到`JTable`使用渲染器和编辑器。我也为此创建了组。使用此原则，我无法实现排他性（只应选择 1 个单选按钮）。请在下面查看我的代码并感谢您的回复。

渲染器和编辑器类：

```
class RadioButtonRenderer implements TableCellRenderer {

    public Component getTableCellRendererComponent(JTable table, Object value,
            boolean isSelected, boolean hasFocus, int row, int column) {
        if (value == null)
            return null;
        return (Component) value;
    }
}

class RadioButtonEditor extends DefaultCellEditor implements ItemListener {
    private JRadioButton button;

    public RadioButtonEditor(JCheckBox checkBox) {
        super(checkBox);
    }

    public Component getTableCellEditorComponent(JTable table, Object value,
            boolean isSelected, int row, int column) {
        if (value == null)
            return null;
        button = (JRadioButton) value;
        button.addItemListener(this);
        return (Component) value;
    }

    public Object getCellEditorValue() {
        button.removeItemListener(this);
        return button;
    }

    public void itemStateChanged(ItemEvent e) {
        super.fireEditingStopped();
    }
} 
```

这是准备数据并完成分组的地方：

```
private void displayPhoneListShow(Person person) {

    DefaultTableModel dm = new DefaultTableModel() {
        @Override
        public boolean isCellEditable(int row, int column) {
            return true;
        }
    };

    Object[] objects = new Object[3];
    Object[] tableColumnNamesPhone = new Object[3];

    tableColumnNamesPhone[0] = "Select";
    tableColumnNamesPhone[1] = "Phone Number";
    tableColumnNamesPhone[2] = "Preferred";

    dm.setColumnIdentifiers(tableColumnNamesPhone);
    ListIterator<Phone> phoneList = person.getPhoneList().listIterator();
    while (phoneList.hasNext()) {
        Phone phone = phoneList.next();
        objects[0] = new JRadioButton(("^"));
        objects[1] = phone.getPhoneNumber();
        objects[2] = phone.getPreferred();
        dm.addRow(objects);
    }
    this.phoneTable.setModel(dm);

    ButtonGroup group = new ButtonGroup();
    for (int row = 0; row < dm.getRowCount(); row++) {
        JRadioButton radio = (JRadioButton) dm.getValueAt(row, 0);
        group.add(radio);
    }

    phoneTable.getColumn("Select").setCellRenderer(
            new RadioButtonRenderer());
    phoneTable.getColumn("Select").setCellEditor(
            new RadioButtonEditor(new JCheckBox()));
} 
```

我仍然无法达到结果。我还尝试将其添加`ButtonGroup group = new ButtonGroup()`为类变量以及类的一部分，`RadioButtonRenderer`并将按钮添加到该组。但结果无动于衷。

请建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T17:36:27.833

作为替代方案，使用 a`JComboBox`作为[编辑器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#combobox)，在一行中进行互斥选择。为方便起见，[`DefaultCellEditor`](http://docs.oracle.com/javase/7/docs/api/javax/swing/DefaultCellEditor.html#DefaultCellEditor%28javax.swing.JComboBox%29)专门为此提供了一个构造函数。结果还可以更有效地利用行中的水平空间。[`DependentColumn`](https://stackoverflow.com/a/7356518/230513)是一个例子，如下所示。另请参阅这些其他[替代方案](https://stackoverflow.com/a/11173600/230513)。

1.  图来自@mKorbel`StatusRenderer`和`StatusEditor`Mac OS X：

    ![在此处输入图像描述](../Images/e2c0aeebf35d09134b2f28c3ee34b0cf.png)

2.  图来自相关[示例](https://stackoverflow.com/a/7356518/230513)，Mac OS X：

    ![图片](../Images/07c8f90ae0f77a72a4d6cfb32e248431.png)

3.  图来自@mKorbel`StatusRenderer`和`StatusEditor`Windows：

    ![在此处输入图像描述](../Images/dfee193a9650bdd5810bfb0ff779c0b3.png)

4.  图使用`DefaultTableCellRenderer`and `DefaultCellEditor`，Windows（见评论）：

    ![在此处输入图像描述](../Images/5d292266b77fca653942ef86b679841c.png)

代码：

```
import java.awt.*;
import java.awt.event.*;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Vector;
import javax.swing.AbstractAction;
import javax.swing.AbstractCellEditor;
import javax.swing.BorderFactory;
import javax.swing.ButtonGroup;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JScrollPane;
import javax.swing.JSpinner;
import javax.swing.JTable;
import javax.swing.JToolBar;
import javax.swing.SpinnerDateModel;
import javax.swing.SwingUtilities;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableCellEditor;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumnModel;

public class JRadioAsRendererEditor extends JPanel {

    private static final String[] COLUMN_NAMES = {
        "List ID", "Expiration Date", "Status", "Date Created"};
    private static final DateFormat DATE_FORMAT = new SimpleDateFormat("dd/MM/yyyy");
    private static final DateFormat TIME_FORMAT_LONG = new SimpleDateFormat("HH:mm:ss,SSS");
    private MyTableModel tableModel;
    private JTable table;
    private JFrame frame = new JFrame("TestRadioButtonRenderer");

    public JRadioAsRendererEditor() {
        super(new BorderLayout(0, 5));
        setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        tableModel = new MyTableModel();
        table = new JTable(tableModel);
        table.setDefaultEditor(Date.class, new DateEditor());
        table.setDefaultRenderer(Date.class, new DateRenderer());
        table.setDefaultEditor(Status.class, new StatusEditor());
        table.setDefaultRenderer(Status.class, new StatusRenderer());
// comment the two preceding lines and uncomment the following for a standard editor
// table.setDefaultEditor(Status.class, new DefaultCellEditor(
// new JComboBox(new Status[]{Status.Single, Status.Married, Status.Divorced})));

        add(new JScrollPane(table), BorderLayout.CENTER);
        JToolBar toolBar = new JToolBar();
        toolBar.setFloatable(false);
        toolBar.add(new AbstractAction("Add new") {

            @Override
            public void actionPerformed(ActionEvent e) {
                tableModel.add(new TableEntry());
                packTable();
            }
        });
        toolBar.add(new AbstractAction("Remove") {

            @Override
            public void actionPerformed(ActionEvent e) {
                tableModel.remove(table.getSelectedRow());
            }
        });
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new JScrollPane(table), BorderLayout.CENTER);
        frame.add(toolBar, BorderLayout.NORTH);
        frame.pack();
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                frame.setVisible(true);
            }
        });
    }

    private void packTable() {
        TableColumnModel columnModel = table.getColumnModel();
        int columnCount = table.getColumnCount();
        int rowCount = table.getRowCount();
        int[][] preferredHeights = new int[columnCount][rowCount];
        TableCellRenderer renderer;
        Component comp;
        for (int col = 0; col < columnCount; col++) {
            renderer = columnModel.getColumn(col).getCellRenderer();
            if (renderer == null) {
                renderer = table.getDefaultRenderer(tableModel.getColumnClass(col));
            }
            for (int row = 0; row < rowCount; row++) {
                comp = renderer.getTableCellRendererComponent(table,
                    tableModel.getValueAt(row, col), false, false, row, col);
                preferredHeights[col][row] = (int) comp.getPreferredSize().getHeight();
            }
        }
        for (int row = 0; row < rowCount; row++) {
            int pref = 0;
            for (int col = 0; col < columnCount; col++) {
                pref = Math.max(pref, preferredHeights[col][row]);
            }
            table.setRowHeight(row, pref);
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JRadioAsRendererEditor tableTestPanel = new JRadioAsRendererEditor();
            }
        });
    }

    private enum Status {

        Single, Married, Divorced;
    }

    private class StatusPanel extends JPanel {

        private JRadioButton theSingleOption;
        private JRadioButton theMarriedOption;
        private JRadioButton theDivorcedOption;
        private ButtonGroup buttonGroup = new ButtonGroup();

        StatusPanel() {
            super(new GridLayout(0, 1));
            setOpaque(true);
            theSingleOption = createRadio(Status.Single);
            theMarriedOption = createRadio(Status.Married);
            theDivorcedOption = createRadio(Status.Divorced);
        }

        private JRadioButton createRadio(Status status) {
            JRadioButton jrb = new JRadioButton(status.toString());
            jrb.setOpaque(false);
            add(jrb);
            buttonGroup.add(jrb);
            return jrb;
        }

        public Status getStatus() {
            if (theMarriedOption.isSelected()) {
                return Status.Married;
            } else if (theDivorcedOption.isSelected()) {
                return Status.Divorced;
            } else {
                return Status.Single;
            }
        }

        public void setStatus(Status status) {
            if (status == Status.Married) {
                theMarriedOption.setSelected(true);
            } else if (status == Status.Divorced) {
                theDivorcedOption.setSelected(true);
            } else {
                theSingleOption.setSelected(true);
            }
        }
    }

    private class TableEntry {

        private int instanceNumber;
        private Long theId;
        private Date theExpirationDate;
        private Status theStatus;
        private Date theCreationDate;

        TableEntry() {
            instanceNumber++;
            theId = new Long(instanceNumber);
            theExpirationDate = new Date();
            theStatus = Status.Single;
            theCreationDate = new Date();
        }

        TableEntry(Long anId, Date anExpirationDate, Status aStatus, Date aCreationDate) {
            theId = anId;
            theExpirationDate = anExpirationDate;
            theStatus = aStatus;
            theCreationDate = aCreationDate;
        }

        public Long getId() {
            return theId;
        }

        public Date getExpirationDate() {
            return theExpirationDate;
        }

        public Status getStatus() {
            return theStatus;
        }

        public Date getCreationDate() {
            return theCreationDate;
        }

        public void setId(Long anId) {
            theId = anId;
        }

        public void setExpirationDate(Date anExpirationDate) {
            theExpirationDate = anExpirationDate;
        }

        public void setStatus(Status aStatus) {
            theStatus = aStatus;
        }

        public void setCreationDate(Date aCreationDate) {
            theCreationDate = aCreationDate;
        }
    }

    private class MyTableModel extends AbstractTableModel {

        private Vector<Object> theEntries;

        MyTableModel() {
            theEntries = new Vector<Object>();
        }

        @SuppressWarnings("unchecked")
        public void add(TableEntry anEntry) {
            int index = theEntries.size();
            theEntries.add(anEntry);
            fireTableRowsInserted(index, index);
        }

        public void remove(int aRowIndex) {
            if (aRowIndex < 0 || aRowIndex >= theEntries.size()) {
                return;
            }
            theEntries.removeElementAt(aRowIndex);
            fireTableRowsDeleted(aRowIndex, aRowIndex);

        }

        public int getRowCount() {
            return theEntries.size();
        }

        @Override
        public String getColumnName(int column) {
            return COLUMN_NAMES[column];
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            switch (columnIndex) {
                case 0:
                    return Long.class;
                case 1:
                    return Date.class;
                case 2:
                    return Status.class;
                case 3:
                    return Date.class;
            }
            return Object.class;
        }

        @Override
        public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
            TableEntry entry = (TableEntry) theEntries.elementAt(rowIndex);
            switch (columnIndex) {
                case 0:
                    try {
                        entry.setId(new Long(Long.parseLong(aValue.toString())));
                    } catch (NumberFormatException nfe) {
                        return;
                    }
                    break;
                case 1:
                    entry.setExpirationDate((Date) aValue);
                    break;
                case 2:
                    entry.setStatus((Status) aValue);
                    break;
                case 3:
                    entry.setCreationDate((Date) aValue);
                    break;
                default:
                    return;
            }
            fireTableCellUpdated(rowIndex, columnIndex);
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return true;
        }

        @Override
        public int getColumnCount() {
            return 4;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            TableEntry entry = (TableEntry) theEntries.elementAt(rowIndex);
            switch (columnIndex) {
                case 0:
                    return entry.getId();
                case 1:
                    return entry.getExpirationDate();
                case 2:
                    return entry.getStatus();
                case 3:
                    return entry.getCreationDate();
            }
            return null;
        }
    }

    private class DateRenderer extends DefaultTableCellRenderer {

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value,
        boolean isSelected, boolean hasFocus, int row, int column) {
            super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
            if (!(value instanceof Date)) {
                return this;
            }
            setText(DATE_FORMAT.format((Date) value));
            return this;
        }
    }

    private class TimeRenderer extends DefaultTableCellRenderer {

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value,
        boolean isSelected, boolean hasFocus, int row, int column) {
            super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
            if (!(value instanceof Date)) {
                return this;
            }
            setText(TIME_FORMAT_LONG.format((Date) value));
            return this;
        }
    }

    private class DateEditor extends AbstractCellEditor implements TableCellEditor {

        private JSpinner theSpinner;

        DateEditor() {
            theSpinner = new JSpinner(new SpinnerDateModel());
            theSpinner.setOpaque(true);
            theSpinner.setEditor(new JSpinner.DateEditor(theSpinner, "dd/MM/yyyy"));
        }

        @Override
        public Object getCellEditorValue() {
            return theSpinner.getValue();
        }

        @Override
        public Component getTableCellEditorComponent(JTable table, Object value,
        boolean isSelected, int row, int column) {
            theSpinner.setValue(value);
            if (isSelected) {
                theSpinner.setBackground(table.getSelectionBackground());
            } else {
                theSpinner.setBackground(table.getBackground());
            }
            return theSpinner;
        }
    }

    private class TimeEditor extends AbstractCellEditor implements TableCellEditor {

        private JSpinner theSpinner;
        private Object value;

        TimeEditor() {
            theSpinner = new JSpinner(new SpinnerDateModel());
            theSpinner.setOpaque(true);
            theSpinner.setEditor(new JSpinner.DateEditor(theSpinner, "HH:mm:ss,SSS"));
        }

        @Override
        public Object getCellEditorValue() {
            return theSpinner.getValue();
        }

        @Override
        public Component getTableCellEditorComponent(JTable table, Object value,
        boolean isSelected, int row, int column) {
            theSpinner.setValue(value);
            if (isSelected) {
                theSpinner.setBackground(table.getSelectionBackground());
            } else {
                theSpinner.setBackground(table.getBackground());
            }
            return theSpinner;
        }
    }

    private class StatusEditor extends AbstractCellEditor implements TableCellEditor {

        private StatusPanel theStatusPanel;

        StatusEditor() {
            theStatusPanel = new StatusPanel();
        }

        @Override
        public Object getCellEditorValue() {
            return theStatusPanel.getStatus();
        }

        @Override
        public Component getTableCellEditorComponent(JTable table, Object value,
            boolean isSelected, int row, int column) {
            theStatusPanel.setStatus((Status) value);
            if (isSelected) {
                theStatusPanel.setBackground(table.getSelectionBackground());
            } else {
                theStatusPanel.setBackground(table.getBackground());
            }
            return theStatusPanel;
        }
    }

    private class StatusRenderer extends StatusPanel implements TableCellRenderer {

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value,
            boolean isSelected, boolean hasFocus, int row, int column) {
            setStatus((Status) value);
            if (isSelected) {
                setBackground(table.getSelectionBackground());
            } else {
                setBackground(table.getBackground());
            }
            return this;
        }
    }
} 
```

# java - 在 Apache HttpComponents 中获取重定向的 URL

> ID：11176486
> 
> 赞同：0
> 
> 时间：2012-06-24T09:54:26.153
> 
> 标签：java, url, redirect, apache-httpcomponents

我正在使用[Apache HttpComponents](http://hc.apache.org/)来获取一些网页以获取一些抓取的 URL。其中许多 URL 实际上重定向到不同的 URL（例如，因为它们已经使用 URL 缩短器进行了处理）。除了下载内容之外，我还想解析最终的 URL（即提供下载内容的 URL），甚至更好的是，重定向链中的所有 URL。

我一直在查看 API 文档，但不知道在哪里可以挂钩。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T10:02:05.520

[一种方法是通过设置相关参数](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/httpagent.html#d5e1169)来关闭自动重定向处理，并通过检查 3xx 响应并手动从响应“Location”标头中提取重定向位置来自行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T01:14:36.610

这是如何使用 Apache HttpComponents 进行操作[的完整演示。](https://gist.github.com/paxan/5588336)

## 重要细节

您需要`DefaultRedirectStrategy`像这样扩展：

```
class SpyStrategy extends DefaultRedirectStrategy {
    public final Deque<URI> history = new LinkedList<>();

    public SpyStrategy(URI uri) {
        history.push(uri);
    }

    @Override
    public HttpUriRequest getRedirect(
            HttpRequest request,
            HttpResponse response,
            HttpContext context) throws ProtocolException {
        HttpUriRequest redirect = super.getRedirect(request, response, context);
        history.push(redirect.getURI());
        return redirect;
    }
} 
```

`expand`方法发送一个 HEAD 请求，该请求导致`client`在`spy.history`deque 中收集 URI，因为它自动遵循重定向：

```
public static Deque<URI> expand(String uri) {
    try {
        HttpHead head = new HttpHead(uri);
        SpyStrategy spy = new SpyStrategy(head.getURI());
        DefaultHttpClient client = new DefaultHttpClient();
        client.setRedirectStrategy(spy);
        // FIXME: the following completely ignores HTTP errors:
        client.execute(head);
        return spy.history;
    }
    catch (IOException e) {
        throw new RuntimeException(e);
    }
} 
```

您可能希望将最大重定向数设置为合理的值（而不是默认值 100），如下所示：

```
 BasicHttpParams params = new BasicHttpParams();
        params.setIntParameter(ClientPNames.MAX_REDIRECTS, 5);
        DefaultHttpClient client = new DefaultHttpClient(params); 
```

# c++ - QT 中的应用程序-> 进程消息？

> ID：11176488
> 
> 赞同：4
> 
> 时间：2012-06-24T09:54:32.287
> 
> 标签：c++, qt, c++builder

在 Borland 6 中，我经常使用它来解开程序动作：

```
Application->Processmessages(); 
```

现在，使用 QT 4.8.1，我没有在这个外国（对我而言）QT 文档中找到。

谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T02:07:25.380

在 Qt 中，您将使用静态函数`QApplication::processEvents()`。

唉，你的问题是你的代码设计被破坏了。您永远不需要`processEvents`简单地打电话来“解开”事情。您的所有 GUI 代码都应该由运行到完成的方法组成，这些方法需要很短的时间（大约单毫秒：~0.001s）。如果某些事情需要更长的时间，您必须将其拆分为更小的部分，并在处理完每个部分后将控制权返回给事件循环。

这是一个例子：

```
class Worker: public QObject
{
  Q_OBJECT
  int longWorkCounter;
  QTimer workTimer;
public:
  Worker() : ... longWorkCounter(0) ... {
    connect(workTimer, SIGNAL(timeout()), SLOT(longWork());
  }
public slots:
  void startLongWork() {
    if (! longWorkCounter) {
      workTimer.start(0);
    }
  }
private slots:
  void longWork() {
    if (longWorkCounter++ < longWorkCount) {
      // do a piece of work
    } else {
      longWorkCounter = 0;
      workTimer.stop();
    }
  }
}; 
```

零持续时间计时器是每次事件队列为空时调用代码的一种方法。

如果您正在调用第三方阻塞库代码，那么唯一（不幸的）修复是将这些操作放入 QObject 中的插槽中，并将该 QObject 移动到工作线程。

# java - 应用服务器如何运行多个应用程序？

> ID：11176493
> 
> 赞同：1
> 
> 时间：2012-06-24T09:55:16.653
> 
> 标签：java, application-server

我一直在寻找这样的信息，但我找不到明确的答案。

应用程序服务器使用什么确切机制来执行多个隔离的（Web）应用程序？例如，他们如何管理静态字段隔离？

我可以想象几种解决方案：

*   [隔离API](http://en.wikipedia.org/wiki/Application_Isolation_API)；
*   [引导](http://blog.markturansky.com/archives/21)；
*   类加载器的技巧（使用线程上下文类加载器）；
*   运行多个 jvm 实例。

但他们在现实中使用什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T10:29:35.933

为了分离应用程序，应用程序服务器确实使用单独的类加载器来区分类（及其静态字段）。

例如，JBoss从 v4 开始就使用[统一类加载器(UCL)。](http://www.jroller.com/bsnyder/entry/jboss_unified_classloader_hell_docs)

# ruby-on-rails-3 - 限制用户只能使用 Devise 访问他们的个人资料

> ID：11176495
> 
> 赞同：2
> 
> 时间：2012-06-24T09:55:26.607
> 
> 标签：ruby-on-rails-3, authentication, devise, authorization

我目前已经设置了我的应用程序，以便在成功登录应用程序时将用户重定向到他们的个人资料，`localhost:3000/users/id`但是如果我是第一个用户`id => 1`并且类型`users/2`我可以完全访问此个人资料。我一直在尝试找到如何使用设计来阻止这种情况。我对 Rails 很陌生，所以我确定我遗漏了一些简单的东西，我使用过，`before_filter :authenticate_user!`但这显然只是检查用户是否登录，但不限制对其他用户个人资料的访问。我已经阅读了一些关于 CanCan 的内容，但这对于我想要实现的目标来说似乎有点矫枉过正。任何指针都非常感谢。

users_controller.rb

```
class UsersController < ApplicationController
  before_filter :authenticate_user!
  before_filter :user_authorization

  def index
    @users = User.all
  end

  def show

    @user = User.find(current_user[:id])

  end

  private

     def user_authorization
        redirect_to(root_url) unless current_user.id == params[:id]
     end
end 
```

这是从服务器报告的：

```
Started GET "/users/2" for 127.0.0.1 at 2012-06-24 13:00:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  User Load (0.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
Redirected to http://localhost:3000/
Filter chain halted as :user_authorization rendered or redirected
Completed 302 Found in 20ms (ActiveRecord: 0.8ms) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-27T04:28:46.407

在您的控制器中：

```
class UsersController < ApplicationController
  before_filter :validate_user, :only => :show

  def show
     @user = User.find(params[:id]
  end

  def validate_user
    redirect_to courses_path unless current_user.id.to_s == params[:id]
  end

end 
```

请注意，`current_user.id.to_s`因为 current_user.id 是一个整数，而 params[:id] 是一个字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T10:06:16.803

一般来说，我会说有两种方法可以解决这类问题：

1.  滚动您自己的代码并在您的控制器（或可能在您的模型类）中实施检查，以及
2.  使用为您强制执行规则的 gem。

如果您想自己扮演角色，最简单的方法是简单地将检查放入您的控制器中，以确保他们在尝试查看不属于他们的配置文件时被重定向。使用 before 过滤器执行此操作的一种方法是，尽管您希望将其调整为对您的应用有意义的行为。

```
 before_filter :validate_user
  def validate_user
    redirect_to home_path unless current_user and current_user.id == params[:id]
  end 
```

如果您想使用 gem，那么我会推荐您提到的 cancan 或另一个名为 Acts as Tenant 的 gem。我见过它用于类似的事情。但是，如果您只想锁定用户配置文件，则向控制器添加代码可能会很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T10:08:25.580

瞧：

```
 before_filter :user_authorization

  private

     def user_authorization
        redirect_to(root_url) unless current_user.id == params[:id]
     end 
```

current_user 是一个包含当前登录用户的助手。

# python - 如何模拟 pysvn

> ID：11176496
> 
> 赞同：2
> 
> 时间：2012-06-24T09:55:27.270
> 
> 标签：python, svn, mocking, tdd, pysvn

我正在研究一个 Python 模块，该模块假设从 SVN 签出一些代码并构建它。在对一些遗留代码进行大量重构之后，我得到了相当不错的代码覆盖率，但是，我在使用[pysvn](http://pysvn.tigris.org/docs/pysvn_prog_guide.html)的代码中有一个巨大的漏洞。

诚然，Mock 对象的概念对我来说是新的，但是在阅读了[MiniMock](http://pypi.python.org/pypi/MiniMock)和[pymox](http://code.google.com/p/pymox/)的一些文档（两者都在我的环境中可用）之后，我得出的结论是我需要捕获一些 pysvn 输出并将其返回我的测试代码。

但在这里，我发现自己（请原谅双关语）陷入困境。当我尝试腌制它们，甚至比较它们时，从 pysvn.Client() 命令返回的对象表现不佳。

关于如何序列化或以其他方式模拟 pysvn 或其他一些非 Python 行为对象的任何建议？

自然地，我愿意接受我从错误的方向处理这个问题，或者我只是一个白痴。在这种情况下，任何建议都会有所帮助。

**附加信息0：**

某些`pysvn`对象可以`dict`通过访问它们的`data`属性来简化为 a，并且可以通过将其传递`dict`给适当的`__init__()`

例如：

```
>>> svn=pysvn.Client()
>>> svn.list('http://svn/svn/')[0][0]
<PysvnList u'http://svn/svn'>
>>> d=svn.list('http://svn/svn/')[0][0].data
>>> pysvn.PysvnList(d)
<PysvnList u'http://svn/svn'> 
```

然而在这个对象内部可能有一些不可腌制的对象：

```
>>> cPickle.dumps(d)
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
cPickle.UnpickleableError: Cannot pickle <type 'node_kind'> objects 
```

**附加信息1：**

至于[@H。Dunlop](https://stackoverflow.com/users/639295/h-dunlop)请求，这是我的代码的（简化）片段，它允许从 SVN 中获取列表，并让用户从该列表中选择一个项目：

```
class Menu(object):
    """a well covered class"""
    # ...

class VersionControl(object):
    """A poorly covered class"""

    def __init__(self):
        self.svn = pysvn.Client()

    # ...

    def list(self, url):
        """svn ls $url"""
        return [os.path.basename(x['path']) for (x,_) in self.svn.list(url)[1:]]

    def choose(self, choice, url):
        """Displays a menu from svn list, and get's the users choice form it.

        Returns the svn item (path).
        """
        menu = Menu(prompt="Please choose %s from list:\n" % choice,
                    items=self.list(url),
                    muliple_choice=False)
        menu.present()
        return menu.chosen() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:20:40.767

在这个答案中，我使用了 minimock，我实际上并不熟悉它，并建议改用[http://www.voidspace.org.uk/python/mock/](http://www.voidspace.org.uk/python/mock/)。这段代码最终会更干净一些。但是你指定了 minimock 或 pymox 所以这里是：

```
from minimock import TraceTracker, Mock, mock
import unittest

import pysvn

from code_under_test import VersionControl

class TestVersionControl(unittest.TestCase):

    def test_init(self):

        mock_svn = Mock(name='svn_client')
        mock('pysvn.Client', returns=mock_svn)

        vc = VersionControl()

        self.assertEqual(vc.svn, mock_svn)

    def test_list_calls_svn_list_and_returns_urls(self):

        tracker = TraceTracker()
        test_url = 'a test_url'
        mock_data = [
            ({'path': 'first result excluded'}, None),
            ({'path': 'url2'}, None),
            ({'path': 'url3', 'info': 'not in result'}, None),
            ({'path': 'url4'}, None),
        ]

        vc = VersionControl()
        mock('vc.svn.list', returns=mock_data, tracker=tracker)

        response = vc.list(test_url)
        self.assertEqual(['url2', 'url3', 'url4'], response)
        self.assertTrue("Called vc.svn.list('a test_url')" in tracker.dump())

if __name__ == '__main__':
    unittest.main() 
```

如果你想测试更多由 pysvn 返回的底层字典，那么你可以修改包含字典的元组列表，让它返回。您甚至可以编写一些代码，将字典从 pysvn 对象中转储出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:43:32.233

您是否考虑过使用：pickle 代替 cPicles？“ *cPickle 模块的可调用函数 Pickler() 和 Unpickler() 是函数，而不是类。这意味着您不能使用它们来派生自定义酸洗和解酸子类。* ”

# jquery - 清理/重构 Jquery 事件绑定以避免可能的重复

> ID：11176497
> 
> 赞同：1
> 
> 时间：2012-06-24T09:55:43.080
> 
> 标签：jquery, ajax

还有另一种编写此代码的方法吗？我认为这有点不专业和混乱

基本上代码通过“输入键”和鼠标“单击”提交表单，所以还有另一种方法吗？

```
$("#form-signup-login input#login-submit").click(function()
{
    doLogin();
});
$('input#login-request-username-email, input#login-request-password').keyup(function(e){
    if(e.keyCode == 13)
        doLogin();
}); 
```

谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T10:01:31.267

您是否正在寻找`submit`事件处理程序？[http://api.jquery.com/submit/](http://api.jquery.com/submit/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T09:59:59.650

```
$("#login-submit").click(doLogin);

$('#login-request-password').keyup(function(e){
    if(e.keyCode === 13)
        doLogin();
}); 
```

解释：

1.  无需为容器添加 id 选择器，因为它们在页面上是唯一的，您将回`getElementById`退到比 Sizzle 引擎更快的本机方法。
2.  您可以在第一种情况下使用函数指针，无需构建另一个回调函数
3.  我只会在密码字段而不是用户名字段上绑定 keyup 事件，因为那里有一个自然流程

或者绑定表单提交，默认情况下会为您处理所有这些。

```
$("#form-signup-login").submit(doLogin); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T10:03:47.980

看起来您想在提交时执行此操作：为什么不使用：

```
$("#form-signup-login").on("submit", function() {
    doLogin();
    return false;
}); 
```

其中 id 是表单的 ID，而不是任何输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T10:11:04.910

```
$("#form-signup-login").submit(function (ev){
  // Do not let the browser handle the submit action
  ev.preventDefault();
  // Execute your custom submit function
  doLogin();
}); 
```

瞧！

# php - PHP从不同时区的服务器获取英国当地时间

> ID：11176502
> 
> 赞同：3
> 
> 时间：2012-06-24T09:56:13.533
> 
> 标签：php, date, time, timezone

我有一个我不知道时区设置的网络服务器。

现在是英国上午 10:49，但是当我运行以下命令时：

```
$sTime = gmdate("d-m-Y H:i:s");  
print 'The time is: ' . $sTime; 
```

服务器返回以下时间。

```
The time is: 24-06-2012 09:49:57 
```

现在我不想只是在时间上“添加”一小时，因为当时间向前移动 1 小时或向后移动 1 小时时，时间仍然需要正确。

有没有办法获得伦敦的实际时间？

仅供参考 - 我也尝试了以下方法，但没有任何运气：

```
date_timezone_set('Europe/London');
$sTime = gmdate("d-m-Y H:i:s");  
print 'The time is: ' . $sTime; 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-24T10:18:24.203

不要在这里使用 gmdate("dmY H:i:s") 因为它返回 GMT。而是使用日期（“dmY H:i:s”）。试试这个 -

```
date_default_timezone_set('Europe/London');
$sTime = date("d-m-Y H:i:s");  
print 'The time is: ' . $sTime; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-20T06:28:44.047

您可以通过添加小时来做到这一点。**就我而言，英国 TimeZone**有 1 小时的差异。所以我加了1小时。

```
\Carbon\Carbon::parse($model->created_at)->addHours(1)->format('d-m-Y H:i') 
```

或者

```
 \Carbon\Carbon::parse($model->created_at)->subHours(1)->format('d-m-Y H:i') 
```

# javascript - 单击 a 元素时重新加载 iframe src

> ID：11176511
> 
> 赞同：0
> 
> 时间：2012-06-24T09:57:28.557
> 
> 标签：javascript, iframe

当用户点击它时，是否可以用元素 href 属性替换 iframe src？

我有这个代码

[http://jsfiddle.net/6Hv9P/1/](http://jsfiddle.net/6Hv9P/1/)

我试图让用户使用duckduckgo进行搜索，当点击结果时，它应该用href值替换iframe src。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T10:07:52.410

确实可能。以下是此类链接的示例：

```
<a href="http://jsfiddle.net" onclick="document.getElementById('siframe').src=this.href; return false;">click me</a> 
```

单击链接时，这将替换 iframe 源。

[更新了小提琴](http://jsfiddle.net/6Hv9P/2/)。

为了更加灵活，您可以使用这样的代码，尽管这将使所有锚点的行为方式相同：

```
window.onload = function() {
    var oFrame = document.getElementById('siframe');
    var anchors = document.getElementsByTagName("a");
    for (var i = 0; i < anchors.length; i++) {
        var anchor = anchors[i];
        var curHref = anchor.href;
        if (curHref && curHref.length > 0) {
            anchor.onclick = function() {
                oFrame.src = curHref;
                return false;
            }
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T10:21:51.783

如果我理解正确，我认为您要做的是检测页面何时在 中更改，并从that 的属性中`iframe`获取新页面的 URL 。`src``iframe`

不幸的是，我认为您不走运，因为页面更改时浏览器不会更新`src`属性。除非页面中的页面`iframe`与父页面来自同一个域，否则浏览器安全性将阻止您`document.location.href`从新页面中发现该页面。

# visual-studio-2010 - 如何生成条形码字体（code128）而不是图像

> ID：11176512
> 
> 赞同：1
> 
> 时间：2012-06-24T09:57:34.510
> 
> 标签：visual-studio-2010, barcode, telerik-reporting

我有一个以图像格式生成条形码的应用程序，它被某些设备读取而在其他设备中失败。现在的问题是条形码图像被像素化，因此条形码阅读器无法读取它，我决定将条形码从图像更改为字体以克服这个问题，因为字体条形码可以从所有阅读器（我正在使用）读取。

我现在面临一个问题，当我在我的 PC（64 位）上设置打印机（Zebra TLP）的驱动程序并将其设置为默认打印机时，字体 Code128 出现在 MS Office Word 应用程序的字体列表中，但在 VS2010 中没有'不出现，我需要使用打印机的字体（Code128）来使用它并生成条形码。我怎样才能做到这一点？

不知道你的问题是否清楚？但我必须在 Telerik 报告的 .net 2010 中生成字体条形码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T16:26:51.793

[**我在这里**](http://www.jtbarton.com/Barcodes/code128.ttf)下载了一个 code128 true type 字体，并在一些应用程序中使用了它。[**该页面**](http://www.jtbarton.com/Barcodes/Code128.aspx)还为计算 code128 的校验和提供了良好的数据。

# java - 警告：/index.xhtml @22,110 target="#{menuTab.action}"：在类型 com.menu.MenuTab 上写入“操作”时出错

> ID：11176519
> 
> 赞同：1
> 
> 时间：2012-06-24T09:58:59.227
> 
> 标签：java, jsf-2

我有以下 JSF 视图`index.xhtml`：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:p="http://primefaces.org/ui"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:c="http://java.sun.com/jsp/jstl/core">
<ui:composition template="template.xhtml">
    <ui:define name="top">
        Menu
    </ui:define>
    <ui:define name="content">
        <h:form>
            <p:menubar>
                <p:submenu label="Admin">
                    <p:submenu label="User">
                        <p:menuitem value="Add User" ajax="true">
                            <f:setPropertyActionListener target="#{menuTab.action}" value="StudentAdd"/> 
                        </p:menuitem>
                        <p:menuitem value="Edit User" ajax="true">
                            <f:setPropertyActionListener target="#{menuTab.action}" value="StudentEdit"/> 
                        </p:menuitem>
                    </p:submenu>
                </p:submenu>
            </p:menubar>
        </h:form>
        <p:tabView>
            <c:forEach items="#{menuTab.listOfObjs}" var="item" varStatus="loop">
                <p:tab  title="#{menuTab.value}" closable="true"/>
        </c:forEach>
    </p:tabView>
    </ui:define>
</ui:composition> 
```

以及以下托管 bean`MenuTab.java`

```
package com.menu;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean(name="menuTab")
@SessionScoped
public class MenuTab implements Serializable {

/** Creates a new instance of MenuTest */
public MenuTab() {
}
private String action;
private String value;
private List<String> listOfObjs = new ArrayList();

public String getAction() {
    return action;
}

public void setAction(String action) {
    this.action = action;
    addValue(action);
}
//--------------------------------------

public void addValue(String act) {
    if (listOfObjs.isEmpty()) {
        setValue(act);
        getListOfObjs().add(getValue());
        System.out.println("First Data add First Data add First Data add::::::::::::::::" + value);
    }
    Iterator idvalu = listOfObjs.iterator();
    while (idvalu.hasNext()) {
        System.out.println("aaaaaaaaaaa=====" + idvalu.next());

        value=act;

        if (idvalu.next().equals(value)) {
            System.out.println("Data Alrady Exite Data =====" + value);
        } 
        else {
            setValue(act);
            getListOfObjs().add(getValue());
            System.out.println("bbbbbbbbbbbbbbb=====" + value);
        }

    }

}

/**
 * @return the listOfObjs
 */
public List<String> getListOfObjs() {
    return listOfObjs;
}

/**
 * @param listOfObjs the listOfObjs to set
 */
public void setListOfObjs(List<String> listOfObjs) {
    this.listOfObjs = listOfObjs;
}

/**
 * @return the value
 */
public String getValue() {
    return value;
}

/**
 * @param value the value to set
 */
public void setValue(String value) {
    this.value = value;
} 
```

}

当我单击添加用户菜单时；tomcat 显示此按摩：

```
aaaaaaaaaaa=====StudentAdd
Jun 24, 2012 3:30:04 PM com.sun.faces.lifecycle.InvokeApplicationPhase execute
WARNING: /index.xhtml @22,110 target="#{menuTab.action}": Error writing 'action' on type com.menu.MenuTab
javax.el.ELException: /index.xhtml @22,110 target="#{menuTab.action}": Error writing 'action' on type com.menu.MenuTab
    at com.sun.faces.facelets.el.TagValueExpression.setValue(TagValueExpression.java:139)
    at com.sun.faces.facelets.tag.jsf.core.SetPropertyActionListenerHandler$SetPropertyListener.processAction(SetPropertyActionListenerHandler.java:206) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:51:11.143

> javax.el.E​​LException：/index.xhtml @22,110 target="#{menuTab.action}"：在类型 com.menu.MenuTab 上写入“操作”时出错

这意味着表达式后面的 setter 方法`#{menuTab.action}`抛出了异常。在堆栈跟踪中进一步查看该异常，然后根据异常中提供的信息相应地修复代码。

快速浏览一下`setAction()`代码表明最可能的原因是`NoSuchElementException`因为您在`Iterator#next()`循环内调用了两次。每次`next()`调用时，它都会移动到下一个元素。它不会像您预期的那样返回“当前”元素。

删除以下行：

```
System.out.println("aaaaaaaaaaa=====" + idvalu.next()); 
```

或至少将其分配给一个变量

```
String next = idvalu.next();
System.out.println("aaaaaaaaaaa=====" + next);

if (next.equals(value)) {
    // ... 
```

# intellij-idea - 如何从 IntelliJ 中的 java 模块生成 jar，并将依赖项放在单独的目录中？

> ID：11176525
> 
> 赞同：2
> 
> 时间：2012-06-24T09:59:51.860
> 
> 标签：intellij-idea

我有一个模块，我想为其创建一个 jar。所以，这就是我所做的：

1.  添加 jar 工件，使用“From module with dependencies ...”选项
2.  在“库中的 Jar 文件”中，我选择“复制到输出目录并通过清单链接”
3.  保留所有默认值。

之后，我可以构建 jar，所有依赖项都将放在它附近的同一目录中。到现在为止还挺好。

现在我希望将所有依赖项放在最终 jar 附近的单独目录中。所以，我重复相同的步骤，但这次我在**工件输出布局选项卡中的节点（使用“创建目录”按钮）。接下来，我将所有依赖项拖到新文件夹中并应用更改。**

 **从表面上看，一切都很酷 - 依赖项确实放在专用目录中，但 MANIFEST.MF 文件从未更新！它应该通过新目录引用依赖项。截至目前，生成的 jar 无法运行 - 它的依赖项不可见。

这与 Eclipse 不同，后者在将项目导出为 jar 时会确保清单文件是正确的。

鉴于以下情况，我该如何解决此问题：

*   我想要一个专用文件夹中的所有依赖项。
*   我想使用 IntelliJ IDEA
*   我不想手动编辑清单文件。

我正在使用最新下载的 IntelliJ IDEA for windows - 11.1.2, build 117.418

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T10:35:39.983

目前，您必须在工件配置对话框中手动更新类路径，以便它包含子目录：

![类路径](../Images/bafa4d81b3c5752011bff8b4fb43041c.png)

我[为此限制创建了一个问题](http://youtrack.jetbrains.com/issue/IDEA-87763)，请加注/投票。**

# google-app-engine - 托管在谷歌应用程序中使用 codeigniter 开发的 Web 应用程序

> ID：11176539
> 
> 赞同：1
> 
> 时间：2012-06-24T10:02:20.317
> 
> 标签：google-app-engine, codeigniter, web-hosting, codeigniter-2

嗨，我在 php 中使用 codeigniter 开发了一个 Web 应用程序。我想托管此应用程序，并且必须发送链接以供审核。

我想知道我必须遵循的步骤。请发布一些有用的链接来指导我..

我是网络托管新手，这是我在网络托管方面的第一项任务。

我确实安装了所需的 python 和 google app api，并做了一些在线给出的示例步骤，但无法弄清楚如何为使用 codeigniter 完成的 Web 应用程序完成它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T13:21:56.793

Google App Engine 不支持托管 PHP 项目。那里有很多很多 PHP 托管服务提供商。做一点谷歌搜索找到一个适合您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-26T10:49:51.453

Google 刚刚启动了 AppEngine for PHP。我没有关于如何安装它的确切答案，但有一些有用的链接。

[您可以在https://github.com/edwardmp/CodeIgniter-AppEngine](https://github.com/edwardmp/CodeIgniter-AppEngine)下载修改版的 codeignitor（适用于 appEngine）

此链接指向使用 php SDK 的示例 hello world 程序

[https://developers.google.com/appengine/docs/php/gettingstarted/installingwindows](https://developers.google.com/appengine/docs/php/gettingstarted/installingwindows)

以下链接是谷歌提供的关于如何在谷歌应用引擎中运行 wordpress 的教程

[https://developers.google.com/appengine/articles/wordpress](https://developers.google.com/appengine/articles/wordpress)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T03:17:17.267

我使用 PHP Fog cloud 来托管我的应用程序。这非常容易和简单。它还包含 codeIgniter，这使得托管变得更加简单。

# android - android：如何在错误时正确退出应用程序

> ID：11176545
> 
> 赞同：2
> 
> 时间：2012-06-24T10:03:21.637
> 
> 标签：android, exception-handling

我为未处理的异常添加了一个异常处理程序，以知道应用程序在下一次应用程序启动时崩溃了：

```
@Override
public void uncaughtException(Thread thread, Throwable ex) {
    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    SharedPreferences.Editor editor = preferences.edit();
    editor.putString("crashed", "yes");
    editor.commit();
} 
```

我通过以下方式添加了处理程序：

```
Thread.setDefaultUncaughtExceptionHandler(this); 
```

现在的问题是：由于我添加了处理程序，应用程序在出错时的行为不同：

*   在我添加处理程序之前，我收到一个弹出窗口，告诉我应用程序已经崩溃。

*   现在，在添加处理程序后，应用程序就冻结了，过了一会儿，android 向我显示了一个弹出窗口，告诉我应用程序不再响应以及我是否想再等待。这不是很好的国际海事组织。任何提示，应用程序崩溃后如何正确退出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T13:31:40.753

您可以保存原始异常处理程序，以便在对未处理的异常执行您自己的自定义操作后调用它。像这样的东西：

```
//Inside UncaughtExceptionHandler.java:
…
private UncaughtExceptionHandler defaultUEH;

public DefaultExceptionHandler() 
  {
  this.defaultUEH = Thread.getDefaultUncaughtExceptionHandler();
  }

@Override
public void uncaughtException(Thread t, Throwable e) 
  {
  //do anything you wish about the Throwable e :getStackTrace(),getCause(),getClass()...
  //call the original uncaught exception handler:
  defaultUEH.uncaughtException(t, e);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:26:34.063

我建议您将您的逻辑与[ACRA](http://code.google.com/p/acra/)集成，以便它可以处理崩溃报告和清理问题。

# android - 导航栏折叠在浏览器上工作，而不是在智能手机上

> ID：11176547
> 
> 赞同：0
> 
> 时间：2012-06-24T10:03:39.800
> 
> 标签：android, twitter-bootstrap, collapse

当我调整浏览器窗口的大小并将其缩小时，导航栏很好地创建了一个折叠菜单，右上角有一个按钮。当我在我的安卓手机上查看同一个网站时，导航栏菜单总是折叠起来，右上角的按钮不可见。如何解决？谢谢！

```
<!DOCTYPE html>
<html>
<head>
  <title>My Groundhops</title>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
  <![endif]-->
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">

        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <a class="brand" href="#">My Groundhops</a>

        <div class="nav-collapse">
            <ul class="nav">
              <li>Clubs</li>
              <li>Visits</li>
            </ul>
        </div>

      </div>
    </div>
  </div>

  <div class="container">
    <div class="row">
      <div class="span12">Content</div>
    </div>
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T13:40:30.243

您可能缺少移动设备正确扩展所需的元标记。

所以把它贴在`head`你的页面部分，然后再试一次：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:55:05.523

这似乎是 Opera mobile 上的 twitter 引导问题，它适用于默认的 android 浏览器。所以我的代码似乎没问题。

[https://github.com/twitter/bootstrap/issues/3621](https://github.com/twitter/bootstrap/issues/3621)

# c++ - 在非 gui 线程中获取文件图标 (QFileIconProvider::icon)

> ID：11176550
> 
> 赞同：0
> 
> 时间：2012-06-24T10:04:09.327
> 
> 标签：c++, qt, ubuntu, icons

我正在尝试从非 gui 线程获取文件图标以避免 gui 冻结。我收到警告：

> QPixmap：在 GUI 线程之外使用像素图是不安全的

有没有办法解决我的问题？也许还有另一种简单的方法来获取文件图标？我的目标系统是Ubuntu，我不需要支持其他系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:16:21.577

好吧，您可以`QImage`改为加载可在**GUI 线程**之外使用的文件图标。然后您可以使用 提供的任何功能`QImage`将其转换为`QPixmap`. 例如以下`static`函数：

```
QPixmap QImage::fromImage (const QImage & image, Qt::ImageConversionFlags flags) 
```

# architecture - CQRS 中的命令必须是异步的吗？

> ID：11176552
> 
> 赞同：6
> 
> 时间：2012-06-24T10:04:19.610
> 
> 标签：architecture, cqrs

根据我的阅读，CQRS 设计涉及异步命令，其中命令被放入队列中。用户假设一切正常，UI 轮询或通过计时器得到一些反馈，如果一切正常或不正常。

如果我有一个在树中拖动文件夹的 UI，这将如何工作？我可以让一个用户删除一个文件夹，而另一个用户将一个文件夹拖到它上面（使其成为它的子文件夹）。

所以从 UI 我可以显示拖动已经发生，然后从某个计时器检查我的读取模型是否已更新（即检查拖动文件夹的父文件夹，如果它设置正确，我知道它已经工作）。

如果用户进行了多次拖动操作，我将不得不在 UI 中保留这些操作的列表并检查读取存储（从列表中删除任何成功的命令）。

也许有更好的方法来做到这一点。

在 UI 上似乎有很多工作并且更容易出错，而如果我只是运行同步命令并且一切正常，那么我将继续进行下一个操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T16:24:06.110

虽然您可以使用同步命令，但它不会使您描述的问题变得更少；在通知用户时，它只会意味着稍微不同的行为。

关于命令要意识到的是，它们可以被域对象拒绝。在这种情况下，这可能意味着第一个用户进行了更改，然后第二个用户所做的更改可能会被拒绝，因为它们引用了无效状态。

如果您想向所有用户展示系统的当前状态，那么您的 ui 将不得不完成您关心的所有工作；这并不是 CQRS 独有的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T15:21:15.820

您可以很好地使用同步命令。CQRS 不需要异步命令。

# ios - UIBezierPath 描边 1px 线并填充 1px 宽度的矩形 - 不同的结果。

> ID：11176560
> 
> 赞同：23
> 
> 时间：2012-06-24T10:05:44.740
> 
> 标签：ios, drawing, uibezierpath

这是一个简单的绘图

```
 - (void)drawRect:(CGRect)rect
{
    //vertical line with 1 px stroking
    UIBezierPath *vertLine = [[UIBezierPath alloc] init];
    [vertLine moveToPoint:CGPointMake(20.0, 10.0)];
    [vertLine addLineToPoint:CGPointMake(20.0, 400.0)];
    vertLine.lineWidth = 1.0;
    [[UIColor blackColor] setStroke];
    [vertLine stroke];

    //vertical rectangle 1px width 
    UIBezierPath *vertRect= [UIBezierPath bezierPathWithRect:CGRectMake(40.0, 10.0, 1.0, 390.0)];
    [[UIColor blackColor] setFill];
    [vertRect fill];

} 
```

在非视网膜 3GS 和模拟器上，第一行模糊，看起来比 1 px 宽，但第二行清晰。

不幸的是，我既没有 iPhone4 也没有新的 iPad 来测试，但在视网膜模拟器上，两条线看起来都一样。

问题：对于非视网膜和视网膜设备，矩形而不是描边是获得相同结果的唯一方法吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-24T10:22:35.193

您正在填充矩形的内部，但您正在从中心抚摸线条。由于这两种情况下的坐标（矩形的角以及直线中的起点和终点坐标）都定义为整数值（没有分数），因此坐标位于精确的点边界上。

在谈到线的点时，我在上面说“坐标”，以免将它们与屏幕上的点混淆。出于同样的原因，我还说“点边界”而不是“像素边界”。iOS 用所谓的“点”而不是像素来定义它的坐标和所有点。点是与分辨率无关的测量。视网膜和非视网膜设备在屏幕上的点数相同，只是它们对应的实际像素数不同。

让我们看一下与填充角位于点边界上的矩形相比，抚摸位于点边界上的线（如您的问题）：

在下面的插图中，我在非视网膜屏幕和视网膜屏幕上用黑色抚摸一条线并用橙色填充一个矩形。我还用蓝色勾勒出了线条和矩形。在这两种情况下，您都可以看到该分辨率的点大小并将其与实际像素网格进行比较。

在非视网膜情况下，您可以看到尝试使用 1 点线（在这种情况下对应于 1 像素线宽）从中心描边线将填充顶部的一半像素和像素上的一半以下。由于像素仅填充了一半，因此这些像素的不透明度为 50%。这会导致颜色变浅（在白色背景上）。由于顶部和下方的像素都是填充的，因此抚摸填充顶部和下方的像素。这使得线条看起来好像是 2 个像素宽而不是 1 个像素。

您可以快速将其与内部填充的矩形进行比较。

![非视网膜](../Images/61918a4dfee5266ab00303b7fd76d944.png)

视网膜屏幕上的相同情况看起来不同。在这种情况下，一个点的大小是相同的，但它由 4 个像素而不是 1 个像素组成。这一次，当划线时，线上方的半点和线下方的半点将完全填满该行像素上面和下面因为更高分辨率的屏幕。这意味着线条看起来好像是 1 磅宽，并且颜色看起来完全不透明。

我们还可以看到填充的矩形看起来是一样的。

![视网膜](../Images/24e1a4261ceb1dd45d74b6daba851385.png)

* * *

要解决此问题，您可以将线的点放在半像素上。在低分辨率设备上从中心划线意味着该线向上延伸半个点，向下延伸半个点。由于线的中心现在位于点的中心，这意味着描边线完全位于像素内，并且线条看起来很清晰。这样做不会对视网膜线产生任何影响，因为向下（或向上）移动半个点，仍然意味着您完全填充了上方和下方的像素。

在下图中（对于视网膜），我同时显示了点网格和像素网格。

![半像素非视网膜](../Images/69c0eeb60e309ea88379f901b0f10fe7.png) ![半像素视网膜](../Images/fcc8c3bbcbf849dcec6bdea16f3095ea.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-24T08:40:19.597

使用描边和填充得到不同结果的原因是它们对参数的解释不同。

Stroke 在坐标的每一侧添加一半的线宽。所以，你的点是 20.0，线宽是 1px。理论上，结果将是 (19.5-20.5) 之间的 1 像素黑线。由于设备屏幕上没有任何非整数像素，它将在 (19-21) 之间转换为 2 像素灰色/模糊线。为了避免这种情况，您需要将每个坐标与 0.5 相加（如 CGPointMake(20.5, 10.5) ），这样宽度就不会再在像素之间划分。

但是，填充中的参数用于设置要填充的区域的边界，CGRectMake(40.0, 10.0, 1.0, 390.0) 表示 (40 - 41) 之间的区域。结果，没有小数部分落在像素上，看起来很模糊。

# asp.net - 直接通过 iisexpress.exe 启动网站时出现 HTTP 500.21 错误

> ID：11176562
> 
> 赞同：4
> 
> 时间：2012-06-24T10:05:58.763
> 
> 标签：asp.net, iis, iis-7, iis-express

当我尝试直接通过 iisexpress.exe 运行网站时，出现错误。这发生在所有网站上。我使用的命令如下：

> .\iisexpress.exe /site:MultipleRoutes

该站点成功启动，但我收到以下错误：

> **HTTP 错误 500.21 - 内部服务器错误**
> 
> 处理程序“ExtensionlessUrl-Integrated-4.0”在其模块列表中有一个错误模块“ManagedPipelineHandler”

我假设网站没有在 ASP.NET 下运行，但是当我通过 VS 启动网站时，没有问题。

任何想法？

**编辑：**

这是另一个事实：当我尝试通过指定路径而不是在 applicationHost.config 文件中注册的站点名称来运行网站时，该站点运行得非常好：

> .\iisexpress.exe /path:D:\Dropbox\Apps\MultipleRoutes /port:1672 /clr:v4.0

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-23T15:37:59.453

这对我有用：

C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -i

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T19:11:03.453

这对我来说是 32 位与 64 位的问题，我的用户配置文件目录中的 applicationHost.config 仅包含 32 位模块声明，但试图以 64 位运行。

IIS Express 安装在 C:\Program Files\IIS Express\AppServer 中包含一个有效的 64 位配置，所以我只是用这个覆盖了我的配置文件目录中的那个，然后事情就开始工作了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T02:50:58.870

听起来您的用户 applicationHost.config 可能有问题。如果您转到您的文档文件夹，然后是 \config\applicationhost.config，您应该会看到 iisexpress 正在使用的配置文件。搜索 ManagedPipelineHandler 和 ExtensionlessUrl。有什么不妥之处吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-15T12:51:04.167

C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -i

其他人在这个过程中像我一样挣扎时要记住的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-08T22:01:58.403

只需运行注册 asp.net .. 你可以在 C:\Windows\Microsoft.NET\Framework64\v4.0.30319 找到它 .. 通过 cmd（管理员）运行它，如下所示：

C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i 你会很好...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T15:57:48.547

下面是使用 IIS Express 运行我的 x64 位 IIS 应用程序所需的完整更改，以便远程主机可以访问它：

```
iisexpress /config:"C:\Users\test-user\Documents\IISExpress\config\applicationhost.config" /site:MyWebSite
Starting IIS Express ...
Successfully registered URL "http://192.168.2.133:8080/" for site "MyWebSite" application "/"
Registration completed for site "MyWebSite"
IIS Express is running.
Enter 'Q' to stop IIS Express 
```

配置文件 (applicationhost.config) 添加了如下部分：

```
<sites>
  <site name="MyWebsite" id="2">
    <application path="/" applicationPool="Clr4IntegratedAppPool">
      <virtualDirectory path="/" physicalPath="C:\build\trunk\MyWebsite" />
    </application>
    <bindings>
      <binding protocol="http" bindingInformation=":8080:192.168.2.133" />
    </bindings>
  </site> 
```

可以按如下方式启用 .NET 框架的 64 位版本：

```
<globalModules>
    <!--
        <add name="ManagedEngine" image="%windir%\Microsoft.NET\Framework\v2.0.50727\webengine.dll" preCondition="integratedMode,runtimeVersionv2.0,bitness32" />
        <add name="ManagedEngineV4.0_32bit" image="%windir%\Microsoft.NET\Framework\v4.0.30319\webengine4.dll" preCondition="integratedMode,runtimeVersionv4.0,bitness32" />
    -->             
    <add name="ManagedEngine64" image="%windir%\Microsoft.NET\Framework64\v4.0.30319\webengine4.dll" preCondition="integratedMode,runtimeVersionv4.0,bitness64" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-18T04:56:18.860

## 重新安装您的 .NET 框架

此问题在稍后安装 .NET 框架时会出现此问题。简单的解决方案是重新安装 .NET 框架或检查安装向导中的修复。或者您可以安装最新版本的 .NET 框架....... [https://www.microsoft.com/en-in/download/details.aspx?id=49982](https://www.microsoft.com/en-in/download/details.aspx?id=49982) 我在配置 DNN 8 时遇到了同样的问题第一次。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-01-24T18:16:59.473

你需要升级。

跑`C:\Program Files\IIS Express\UpgradeApplicationHost.js`

从 32 位迁移到 64 位时为我工作。

# java - MouseListener 在 JLabel 中不起作用

> ID：11176565
> 
> 赞同：2
> 
> 时间：2012-06-24T10:06:10.340
> 
> 标签：java, swing, jlabel, layout-manager, mouselistener

我正在编写我的项目结构如下的游戏：

我们有一个抽象类，所有其他类都继承自它。

```
 public abstract class Bird extends JLabel implements MouseListener {
        private static final long serialVersionUID = 1L;

        private int M_weight;
        private int M_radius;
        private long M_bornTime;
        private int M_maxBirdPower;
        private BirdState M_birdState;
        private boolean B_prepareToShoot;

        public Bird(int weight, int radius, long bornTime, int maxBirdPower,
                BirdState birdState) {
            this.M_weight = weight;
            this.M_radius = radius;
            this.M_bornTime = bornTime;
            this.M_maxBirdPower = maxBirdPower;
            this.M_birdState = birdState;
            this.B_prepareToShoot = false;
            this.addMouseListener(this);
        }

        public BirdState getBirdState() {
            return M_birdState;
        }
    } 
```

还有一些继承自Bird类并实现抽象函数的类，如RedBird。

```
 public class RedBird extends Bird {
        private static final long serialVersionUID = 1L;

        public RedBird(int weight, int radius, long bornTime, int maxBirdPower,
                BirdState birdState) {
            super(weight, radius, bornTime, maxBirdPower, birdState);
        }

        @Override
        public void mouseClicked(MouseEvent arg0) {
                System.out.println("Clicked");
        }

        @Override
        public void mouseEntered(MouseEvent arg0) {
        }

        @Override
        public void mouseExited(MouseEvent arg0) {
        }

        @Override
        public void mousePressed(MouseEvent arg0) {
        }

        @Override
        public void mouseReleased(MouseEvent arg0) {
        }
    } 
```

我从 JPanel 中的 RedBird 类中添加了一个对象，但是当我单击该对象时，`MouseListener`它不起作用。问题是什么 ？任何人都可以给我一个解决方案。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T14:03:21.130

您还没有将鼠标侦听器“添加”到任何 JComponent。这就是为什么它不起作用。在您的鸟类的构造函数中添加以下代码：

```
this.addMousListener(this); 
```

# c# - 如何在 C# 中向另一部手机发送短信？

> ID：11176570
> 
> 赞同：1
> 
> 时间：2012-06-24T10:07:04.743
> 
> 标签：c#, sms

我想在 C# 应用程序上将 SMS 从我的手机发送到另一部手机。我在这里有几个问题。

1.  如何连接simcard并允许它从我的电脑发送短信？（我希望接收者知道我的电话号码。我可以使用 SIM 卡读卡器吗？）
2.  有没有图书馆，或者例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T10:11:44.583

为此，您需要使用 SMS 网关

[http://en.wikipedia.org/wiki/SMS_gateway](http://en.wikipedia.org/wiki/SMS_gateway)

过去的示例文章： [http ://www.readwriteweb.com/archives/zeep_mobile_free_sms_gateway.php](http://www.readwriteweb.com/archives/zeep_mobile_free_sms_gateway.php)

另一个链接： [http ://textoo.in/help/iphone/which-gateway-should-i-choose/](http://textoo.in/help/iphone/which-gateway-should-i-choose/)

# facebook - 链接到来自 facebook 群组的特定帖子？

> ID：11176571
> 
> 赞同：0
> 
> 时间：2012-06-24T10:07:12.590
> 
> 标签：facebook, facebook-graph-api

我展示了我使用 facebook graph api 下载的帖子。我希望能够链接到我显示它们的帖子。

Facebook 通过流 api:s 操作提供这些链接。他们喜欢这样： http: [//www.facebook.com/284328420994/posts/10150830378060995](http://www.facebook.com/284328420994/posts/10150830378060995)

这些链接适用于页面评论，但不适用于群组评论。这些评论呈现 404。

为什么会这样，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:43:05.797

尝试以下形式的 URL

```
https://www.facebook.com/groups/{group id}/permalink/{post id}/ 
```

– 如果帖子是公开的，那应该可以。（否则它只对允许查看的组成员有效。）

# variables - javafx设置变量的值

> ID：11176576
> 
> 赞同：0
> 
> 时间：2012-06-24T10:08:10.130
> 
> 标签：variables, javafx, setter

我绝对是 JavaFX 的初学者。我有 JavaFX 类 Sprite ：

```
public class Sprite extends CustomNode {

protected var xPos : Integer;
protected var yPos : Integer;

public function setxPos(){
    this.xPos=50;
}
public function getxPos():Integer{
    return this.xPos;
}
public function move() : Void{
    xPos=xPos+2;
} 
```

}

我在 Main 类中使用此类的实例。我用函数 setxPos() 设置变量的值。当我打印变量的值时，值为 0。这是 Main 类的代码。

```
var sprite : Sprite;
sprite.setxPos(50);// use setter
println(sprite.getxPos());// value is 0
sprite.xPos=50;// without setter
println(sprite.getxPos());// value is 0 too 
```

哪里有问题？？塔肯斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T02:37:56.280

没有`setxPos(value: Integer)`为 setter 定义这样的函数——你只有一个`setxPos()`没有参数的函数，即使这样它也将值硬编码为 50——你的示例代码似乎不太可能编译。

* * *

我建议放弃[JavaFX 1.x](https://blogs.oracle.com/javafx/entry/javafx_1_2_and_javafx)和 JavaFX Script 语言，因为到今年年底，Oracle 将完全不支持它们，并且 Oracle 将关闭这些技术的运行时分发服务器。

而是花时间学习[JavaFX 2](http://www.oracle.com/technetwork/java/javafx/overview/index.html)，它是用 Java 语言编写的，有很多[教程](http://docs.oracle.com/javase/tutorial/)。要学习 JavaFX 2，请阅读并遵循[JavaFX 2 文档](http://docs.oracle.com/javafx/)中的示例。

这是一个博客参考，其中包含[JavaFX 2 sprite 动画](http://blog.netopyr.com/2012/03/09/creating-a-sprite-animation-with-javafx/)的优秀示例。

# linux - linux - 如何开始收听标准输入和重定向线路？

> ID：11176577
> 
> 赞同：0
> 
> 时间：2012-06-24T10:08:17.853
> 
> 标签：linux, bash

我编写了一个简单的脚本，它通过给定的主机列表运行并在这些主机上执行给定的命令。该脚本基本上看起来像：

```
while read host; do
    ssh -f $user@$host $@
echo < servers 
```

我希望能够运行脚本，以便它开始“侦听”来自标准输入的行并在循环中运行它们而不是 $@。该脚本将通过正常终止而停止工作 - ctrl +c..

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T10:53:38.147

如果我正确阅读了这个问题，您想向一堆服务器发送一组命令，所有这些命令都是单独传递的。

为此，您应该将内部循环包装在外部读取循环中；类似于：

```
while read command; do
    while read host; do
        ssh -f $user@$host "$command"
        echo 
    done < servers
done 
```

运行时，您可以键入命令并在所有服务器上执行。解决将 shell 转义字符发送到远程系统的问题是开发人员的一项练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T10:33:47.057

您的脚本已经在这样做了！只需了解它是如何工作的 - 只需将其保存到 some.bash 文件中：

```
user="myuser"
while read host; do
    ssh -f $user@$host $@
done 
```

$@ 表示从命令行添加剩余参数，如果使用none，它将添加none

**读取主机**将读取该行-而不仅仅是单词。

所以基本上，当你运行它时：

```
www.somehost.com
--> ssh -f myuser@www.somehost.com
www.somehost.com 其他参数
--> ssh -f myuser@www.somehost.com 其他参数
```

# c# - FileSystemWatcher 扭曲文件名

> ID：11176579
> 
> 赞同：4
> 
> 时间：2012-06-24T10:08:42.960
> 
> 标签：c#, .net, filesystemwatcher

我`FileSystemWatcher`用来检测*.docx*文件。打开时会检测到文件，但文件名总是“损坏”。

3个例子：

1.  如果我的文件名是：*2711111.docx*，则接收的文件名`FileSystemWatcher.Changed`是：*~$711111.docx*。

2.  对于文件：*2711111_1.docx* 我得到文件名：*~$11111_1.docx* 我猜不出我的文件名是什么，所以我正在寻找一个通用的解决方案。

3.  对于文件包含/以字母开头，它不会发生。

这是我的代码

```
MyPath = String.Format(@"C:\Users\{0}\NRPortbl\ACTIVE\{1}\"", 
         Public.UserName, Public.UserName);

FileSystemWatcher watcher = new FileSystemWatcher();
if (!System.IO.Directory.Exists(MyPath))
{
    Public.Logger.Error(
        String.Format
            ("Path of folders {0} not found", MyPath));
    System.Windows.Forms.MessageBox.Show(
        String.Format(
            "There was a problem loading {0} " + 
            "NRPortbl libraray, contact administrator", Public.UserName));
    return;
}
watcher.Path = MyPath;
watcher.Filter = "*.Docx";                                                      
watcher.IncludeSubdirectories = false;
watcher.Changed += new FileSystemEventHandler(OnChanged);                       
watcher.Deleted += new FileSystemEventHandler(OnDeleted);
watcher.EnableRaisingEvents = true;  ... 
public void OnChanged(object source, FileSystemEventArgs e)  {...} 
```

帮助将不胜感激:) 谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T10:42:15.967

这是为 Microsoft Word 设计的。当用户打开文档时，它会创建一个隐藏文件。该文件记录了用户名，因此当其他人试图打开同一个文档时，他们会收到一条体面的消息，告诉他们当前哪个用户打开了该文档进行编辑。

该隐藏文件的文件名是原始文件名，前两个字符替换为`~$`

使用 Explorer 查看目录时，您通常不会看到此文件，因为它启用了 FileAttributes.Hidden 属性。当然，您也想忽略这些文件，请使用 FileInfo.Attributes 属性来过滤它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T10:26:22.240

订阅更多事件，例如重命名，并输出它们的文件名。

我怀疑您看到的是临时文件名，这些文件名通过重命名更改为实际文件名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T10:33:37.633

未经测试的代码，但我记得自己以前做过这样的把戏..

首先，当您打开文件或保存文件时，`OnChanged`事件将（希望）触发多次。所以你可以看到在某一时刻你得到了正确的文件名。要看到这一点，您可以使用文件存在功能和其他一些技术。像这样左右：

```
public void OnChanged(object source, FileSystemEventArgs e) 
{
     if (e.FullPath.Contains("~$")) //to avoid the corruption you are talking about.
         return;                    //or better handling - trivial

     if (!File.Exists(e.FullPath)) //to avoid some temp files that need not be visible
         return;                   //but happens with doc files. 

     //got the file e.FullPath
} 
```

如果您没有获得所需的文件，您可以订阅另一个事件，即重命名事件。

# php - 如何在 php mysql 中获取父名称？

> ID：11176580
> 
> 赞同：0
> 
> 时间：2012-06-24T10:08:45.237
> 
> 标签：php, mysql

我有一张桌子：

```
brand(id, parent_id, name)
       1      0      Apple 
       2      1      Macbook Air
       3      1      Iphone 4S
imgae(id, brand_id, image)
       1      2      mac.png
       2      3      iphone.png 
```

和mysql：

```
SELECT br.name, img.image FROM image as img
LEFT JOIN brand AS br ON br.parent_id = img.brand_id 
```

结果是：

```
Macbook Air |   mac.png
Iphone 4S   |   iphone.png 
```

如何从表品牌中获取父名称

```
Macbook Air |   mac.png     | Apple
Iphone 4S   |   iphone.png  | Apple 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T10:13:05.670

```
SELECT brand.id, brand.name, brandName.name as parentName, images.image FROM brand 
INNER JOIN brand as brandName ON brand.parent_id=brandName.id 
LEFT JOIN images ON brand.id=images.brand_id 
```

## 我将 LEFT JOIN 更改为 INNER JOIN

请再检查一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T10:24:48.443

当你遇到这样的问题时，我尽量不要使用自引用表。再看看你的数据库/表设计。

```
Manufacture(
 ID
,Name)

Image(
 ID
,Blob
,URL)

Product(
 ID
,ImageID
,ManID
,Name
,Description
) 
```

SQL

```
Select 
     M.Name as Brand
    ,P.Name as Product
    ,I.URL as ImageURL
FROM 
    Product AS P
JOIN Manufacture AS M ON
    P.ManID = M.ID
LEFT JOIN Image AS I ON
    P.ImageID = I.ID` 
```

希望有帮助。

**PS。**我还建议从管理的角度拆分您的表格。假设您希望删除所有 Apple 产品，您可以从 Manufacture 表中删除 Apple（通过将列设置`IsActive`为`0`，并更新 SQL 以仅选择行`WHERE M.IsActive = 1`）删除 Apple 和通过 ManID 链接的所有产品。

# image - 如何从部分阴影图像中去除阴影

> ID：11176585
> 
> 赞同：1
> 
> 时间：2012-06-24T10:09:23.190
> 
> 标签：image, image-processing, opencv, computer-vision, image-recognition

![部分阴影图像的示例](../Images/10e272f113d91074a796b85383c5525d.png)

我有部分阴影的图像。

如何从图像中去除阴影？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:34:41.683

关注 SOF 可能会对您有所帮助：

[如何使用openCV去除图像中的阴影？](https://stackoverflow.com/questions/9081930/how-to-remove-the-shadow-in-image-by-using-opencv)

上面的链接中有一篇名为“Simple Shadow Removal”的论文。尝试实施它。

# php - Drupal 与 CodeIgniter

> ID：11176588
> 
> 赞同：0
> 
> 时间：2012-06-24T10:10:22.190
> 
> 标签：php, codeigniter, drupal

我一直在使用 CodeIgniter，并且在 Java/Python/PHP 等 OOP 语言方面有扎实的基础。但是，我被迫切换到 Drupal，但我没有这方面的经验，也没有使用任何 CMS 的经验。

我知道 Drupal 是一个内容管理系统，而 CodeIgniter 是一个 PHP 框架，我一直想知道这两者之间的实质性区别是什么。

1.如果 Drupal 是一个内容管理系统，那是否意味着大多数 Drupal 模块都带有类似 wordpress 的界面，它允许您摆弄一组预定义的规则，在后端/前端进行有限的自定义？

2.在多大程度上可以定制（如果有的话）？是否需要通过大量文件来更改某个功能？

3.我需要有扎实的编程基础才能使用Drupal吗？

4.是否可以将Drupal模块作为库插入CodeIgniter？我知道[Ignite Drupal](http://drupal.org/node/1247682)，但我还没有尝试过。

如果有人可以分享这方面的任何知识，那么我需要知道的关于这两者之间差异的任何信息都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:23:53.820

Drupal 是 CMS/CMF，查看 api.drupal.org。[Drupal 和 OOP](http://drupal.org/node/547518) - 这篇关于 OOP 交互的文章。

1.  模块可以通过钩子极大地定制。当然，可以有硬编码的模块，因为它是由开源社区编写的。
2.  您不应该更改 Drupal 核心或贡献的模块代码，通过钩子（在您的自定义模块和主题中）进行操作。
3.  是的，这是推荐的。

# android - 渐变半径占屏幕尺寸的百分比

> ID：11176590
> 
> 赞同：34
> 
> 时间：2012-06-24T10:10:44.017
> 
> 标签：android, android-xml, radial-gradients, shapedrawable

我正在尝试创建一个具有径向渐变背景的可绘制形状，其半径将适应屏幕尺寸（查看相关[文档](http://developer.android.com/reference/android/graphics/drawable/GradientDrawable.html#attr_android:gradientRadius)）。

这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <gradient
        android:endColor="#000"
        android:gradientRadius="50%p"
        android:startColor="#5d2456"
        android:type="radial" />
</shape> 
```

但它似乎不起作用。如果我删除“%p”，它会起作用，但是半径将是静态的，因此不会调整到屏幕尺寸......知道有什么问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-25T15:03:59.873

根据我的测试，`%`确实有效，但不像您预期​​的那样。
首先

```
android:gradientRadius="50" 
```

似乎将值作为像素 50px

```
android:gradientRadius="50%" 
```

转换为好像 50% = 0.5 px，试试

```
android:gradientRadius="5000%" 
```

你会看到一个 50px 的半径。
使用`%p`有类似的结果。显然这是我希望将来会改变的东西，因为它并没有太大的用处。通常 XML ShapeDrawable 资源会调整它们的大小以适应某些外部容器，在这种情况下`gradientRadius`，无论容器如何设置大小。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-06T14:52:15.617

我最终使用以下覆盖的 onDraw 方法创建了一个自定义视图：

```
@Override
protected void onDraw(Canvas canvas) {
    Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);

    int maxSize = Math.max(getHeight(), getWidth());
    RadialGradient gradient = new RadialGradient(
            getWidth()/2,
            getHeight()/2,
            maxSize, 
            new int[] {Color.RED, Color.BLACK},
            new float[] {0, 1}, 
            android.graphics.Shader.TileMode.CLAMP);

    paint.setDither(true);
    paint.setShader(gradient);

    canvas.drawRect(0, 0, getWidth(), getHeight(), paint);
} 
```

在您的布局中只需添加视图：

```
<yourpackage.GradientView
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

当然，可以为视图创建属性，例如。颜色、百分比以允许通过 XML 进行自定义。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-03T01:06:24.583

请注意，梯度半径百分比在 Lollipop 中确实有效。但是，如果您必须支持棒棒糖之前的版本，我扩展了@marnaish 的答案，添加了 XML 属性。我的 gradientRadius 被定义为父视图宽度的百分比：

```
public class RadialGradientView extends View {
    private final int endColor;
    private final int startColor;
    private final float gradientRadiusWidthPercent;
    private final float centerY;
    private final float centerX;
    private Paint paint;

    public RadialGradientView(Context context, AttributeSet attrs) {
        super(context, attrs);

        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.RadialGradientView, 0, 0);

        startColor = a.getColor(R.styleable.RadialGradientView_startColor, Color.RED);
        endColor = a.getColor(R.styleable.RadialGradientView_endColor, Color.BLACK);
        gradientRadiusWidthPercent = a.getFloat(R.styleable.RadialGradientView_gradientRadiusWidthPercent, 1);
        centerX = a.getFloat(R.styleable.RadialGradientView_centerX, .5f);
        centerY = a.getFloat(R.styleable.RadialGradientView_centerY, .5f);

        a.recycle();
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        int parentWidth = MeasureSpec.getSize(widthMeasureSpec);
        int parentHeight = MeasureSpec.getSize(heightMeasureSpec);

        paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        RadialGradient gradient = new RadialGradient(
                parentWidth*centerX,
                parentHeight*centerY,
                parentWidth*gradientRadiusWidthPercent,
                new int[] {startColor, endColor},
                null,
                android.graphics.Shader.TileMode.CLAMP);

        paint.setDither(true);
        paint.setShader(gradient);

    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawRect(0, 0, getWidth(), getHeight(), paint);
    }

} 
```

在 attrs.xml 中：

```
<declare-styleable name="RadialGradientView">
    <attr name="startColor" format="color|reference"/>
    <attr name="endColor" format="color|reference"/>
    <attr name="gradientRadiusWidthPercent" format="float"/>
    <attr name="centerX" format="float"/>
    <attr name="centerY" format="float"/>
</declare-styleable> 
```

不幸的是，您无法从自定义类创建 XML 可绘制对象，因此您无法将其设置为 View 的 android:background。解决方法是使用 FrameLayout 将其分层作为背景。

```
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="100dp">

    <com.RadialGradientView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:centerX=".3"
        app:centerY=".5"
        app:endColor="#0f0"
        app:startColor="#f00"
        app:gradientRadiusWidthPercent=".5"
        />
    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:text="What's up world?"/>
</FrameLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T02:43:29.497

您可以在运行时创建一个可绘制的形状，类似于这篇文章[https://stackoverflow.com/a/4943888/604504](https://stackoverflow.com/a/4943888/604504)

这样，您可以在检索屏幕尺寸后计算百分比。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-01T16:10:41.300

在可绘制的 xml 中设置以百分比表示的形状角半径是不可能的。

# iis - 文件和行号表示我的本地计算机而不是服务器计算机

> ID：11176592
> 
> 赞同：0
> 
> 时间：2012-06-24T10:11:00.473
> 
> 标签：iis, asmx

我已经成功完成了我的网络服务（asmx web servicec）。然后我也成功地在我的服务器电脑（Windows Server 2008）中部署了 IIS 7。我可以从我的客户端应用程序中使用。但有时当我的 Web 服务显示错误时，该错误指示我开发 Web 服务的本地计算机的行号。但它应该是服务器 pc 地址。

重要的事情：有时我在我的网络服务中更改了一些小东西，然后我只是复制整个项目并以正确的路径粘贴到服务器 pc 中。它运行良好，但是当它出现错误时，错误表明文件名和行号位于我开发 Web 服务的本地 PC 中。我正在使用 SVN。我不明白在显示错误时指示本地电脑而不是服务器电脑位置的原因是什么。

在将项目复制/粘贴到服务器 pc 之前，我总是使用 Cleand 和 Rebuild。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T10:19:13.807

PDB 文件中的调试信息是从中获取的，它是在编译时生成的，反映了当时源代码文件的位置。完全正确的行为。

# jquery - 通过jQuery ajax调用将值列表传递给django视图

> ID：11176594
> 
> 赞同：18
> 
> 时间：2012-06-24T10:11:27.527
> 
> 标签：jquery, ajax, django

我正在尝试使用 jQuery ajax 调用将数值（id）列表从一个网页传递到另一个网页。我不知道如何传递和读取列表中的所有值。我可以成功发布和读取 1 个值，但不能成功读取多个值。这是我到目前为止所拥有的：

**jQuery：**

```
var postUrl = "http://localhost:8000/ingredients/";
$('li').click(function(){
    values = [1, 2];
    $.ajax({
        url: postUrl,
        type: 'POST',
        data: {'terid': values},
        traditional: true,
        dataType: 'html',
        success: function(result){
            $('#ingredients').append(result);
            }
    });       
}); 
```

**/成分/视图：**

```
def ingredients(request):
    if request.is_ajax():
        ourid = request.POST.get('terid', False)
        ingredients = Ingredience.objects.filter(food__id__in=ourid)
        t = get_template('ingredients.html')
        html = t.render(Context({'ingredients': ingredients,}))
        return HttpResponse(html)
    else:
        html = '<p>This is not ajax</p>'      
        return HttpResponse(html) 
```

使用 Firebug，我可以看到 POST 包含两个 ID，但可能格式错误（terid=1&terid=2）。所以我的成分视图只选择 terid=2。我究竟做错了什么？

**编辑：** 为了澄清，我需要 ourid 变量将值 [1, 2] 传递给成分视图中的过滤器。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-14T17:31:02.323

您可以在视图中通过**request.POST.getlist('terid[]')**访问该数组

在 JavaScript 中：

```
$.post(postUrl, {terid: values}, function(response){
    alert(response);
}); 
```

在 view.py 中：

```
request.POST.getlist('terid[]') 
```

它对我来说很完美。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-24T21:13:25.967

我找到了解决我原来问题的方法。在这里发布它作为答案，希望它可以帮助某人。

**jQuery：**

```
var postUrl = "http://localhost:8000/ingredients/";
$('li').click(function(){
    values = [1, 2];
    var jsonText = JSON.stringify(values);
    $.ajax({
        url: postUrl,
        type: 'POST',
        data: jsonText,
        traditional: true,
        dataType: 'html',
        success: function(result){
            $('#ingredients').append(result);
            }
    });       
}); 
```

**/成分/视图：**

```
def ingredients(request):
    if request.is_ajax():
        ourid = json.loads(request.raw_post_data)
        ingredients = Ingredience.objects.filter(food__id__in=ourid)
        t = get_template('ingredients.html')
        html = t.render(Context({'ingredients': ingredients,}))
        return HttpResponse(html)
    else:
        html = '<p>This is not ajax</p>'      
        return HttpResponse(html) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-24T10:22:53.423

这部分是你的问题：

```
ourid = request.POST.get('terid', False)
ingredients = Ingredience.objects.filter(food__id__in=ourid) 
```

您需要反序列化 JSON 字符串。

```
import json
ourid = json.loads(request.POST.get('terid')) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T12:24:56.160

看来您在这里将数组设置为字符串

```
data: {'terid': values}, 
```

它应该是

```
data: {terid: values} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T10:21:00.910

尝试像这样发送数据：

```
 data: values; 
```

# search - 概念搜索引擎和概念词典

> ID：11176598
> 
> 赞同：1
> 
> 时间：2012-06-24T10:12:04.180
> 
> 标签：search, solr, search-engine, concept, conceptual

我问的是概念搜索（或基于概念的搜索），它不会根据特定单词或短语查找文档，但它会返回概念上相关的相关文档，而不管共享术语甚至是通用语言如何。

例如：如果您使用关键字“BMW”，结果将包含“昂贵的汽车”等等。

我已经有了基于 Apache solr 的搜索引擎。现在如何实现概念搜索以及我的搜索引擎中是否有要使用的概念词典，那么我什么时候可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:12:26.240

对于这种智能搜索，您应该看一下机器学习（以补充您的搜索引擎功能），因为您需要了解您的语料库，并且在查询时，根据含义/语义（而不是 Levenshtein 距离）建议相似的术语）。

Solr 和其他搜索引擎并不意味着理解数据，它们只是允许您对其进行高级分析和转换。AFAIK 搜索引擎的最远距离是使用同义词，但这对你的情况来说还不够，对吧？

看看[Apache Mahout](http://mahout.apache.org/)、[Apache UIMA](http://uima.apache.org/index.html)和[Apache OpenNLP](http://opennlp.apache.org/)。

# android - 当事先不知道服务名称时，从不同的应用程序调用 startService

> ID：11176600
> 
> 赞同：0
> 
> 时间：2012-06-24T10:12:22.143
> 
> 标签：android, service, manifest

我试图通过 startService 调用服务，而调用者和被调用者不在同一个应用程序中。我没有得到异常，但是服务端的 onBind 和 onCreate 没有被调用。这里的问题是服务名称是即时接收的，因此我无法提前在调用者的清单文件中定义它。有人可以向我推荐一个工作示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:03:03.083

似乎调用了服务方法，但由于某种原因，写入服务方法中的记录器失败。这就是为什么看起来没有调用这些方法的原因。

# cocoa - 拖放被 QTMovieView 阻止

> ID：11176601
> 
> 赞同：0
> 
> 时间：2012-06-24T10:12:23.860
> 
> 标签：cocoa

我是 Cocoa 和 Objective-C 的新手，但这可能是一个非常基本的问题。我的问题是我有一个带有 QTMovieView 的 NSWindow，它应该接受拖动的文件。窗口的委托类实现了 NSDraggingDestination 协议，我拥有接受 NSDraggingDestination 上定义的文件所需的方法。当我将文件拖到标题栏时一切正常，但是当我拖过 QTMovieView 时，它不再接受该文件。奇怪的是，这以前是有效的。有人能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:56:54.237

几个月前我遇到了类似的问题。

[将拖放事件转发到父视图](https://stackoverflow.com/questions/8262514/forwarding-drag-drop-event-to-parent-view)

您必须取消注册 QTMovieView 以便它将事件转发到父视图。应该是这样的。

最好的，

弗洛

# forms - 使用 Unicode 提交表单时如何避免浏览器 Unicode 规范化

> ID：11176603
> 
> 赞同：15
> 
> 时间：2012-06-24T10:12:27.810
> 
> 标签：forms, unicode, normalization, unicode-normalization

在 HTML 中呈现以下 Unicode 文本时，事实证明，浏览器 (Google Chrome)在将数据发送回服务器时会执行某种形式的[Unicode 规范化。](http://unicode.org/reports/tr15/)（可能在[表格 C](http://www.w3.org/TR/charmod-norm/)中）。

但是，当使用圣经希伯来语 (בְּרִיךְ הוּא) 文本时，这很容易破坏文本，如[这里](http://www.sbl-site.org/Fonts/SBLHebrewManualv1.5.pdf)所述（第 9 页）。

有什么办法可以避免浏览器自动文本规范化？

我写了一篇博客文章，更详细地描述了我面临的问题：http: [//blog.hibernatingrhinos.com/12449/would-it-be-possible-to-have-a-web-browser-based-希伯来文文本编辑器](http://blog.hibernatingrhinos.com/12449/would-it-be-possible-to-have-a-web-browser-based-editor-for-an-hebrew-text)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T13:08:51.827

这似乎是 WebKit 浏览器（Chrome、Safari）中的一个功能/错误；他们将表单数据标准化为 NFC，这意味着除其他外，将连续的组合标记重新排序为“规范”顺序。这对我来说是新的，在这种情况下是个坏消息。最糟糕的是，不同的浏览器表现不同。

使用您的测试用例的简化版本[http://blog.hibernatingrhinos.com/12449/would-it-be-possible-to-have-a-web-browser-based-editor-for-an-hebrew-text](http://blog.hibernatingrhinos.com/12449/would-it-be-possible-to-have-a-web-browser-based-editor-for-an-hebrew-text) (使用只回显原始数据的服务器端脚本），我注意到 Chrome 和 Safari 重新排序 U+05E9 U+05C1 U+05B5（SHIN、SHIN DOT、TSERE）中的变音符号，而 IE、Firefox 和 Opera不要。

我还用拉丁字母 e 进行了一个简单的测试，然后将分音符号 U+0308 组合在一起。WebKit 浏览器根据 NFC 规则将其转换为单个字符 ë，而其他浏览器则保持字符对不变。

自 2006 年以来，这似乎是一个有意的功能；[https://bugs.webkit.org/show_bug.cgi?id=8769](https://bugs.webkit.org/show_bug.cgi?id=8769)自豪地宣布这是错误修复的一部分！这或许可以解释 W3C 政策文件的现状；它的当前版本在这个问题上是基于 WebKit 的，但其他浏览器供应商要么不感兴趣，要么故意反对“早期规范化”的想法。</p>

我认为没有办法阻止这种情况。但是你可以警告用户不要使用 Chrome 和 Safari。您甚至可以使用包含简单问题案例的隐藏字段，然后检查服务器端是否按原样传输，如果不是，则告诉用户更改浏览器。

在服务器端修复订单并不简单，因为常见的规范化例程显然不支持所需的订单。您可以标准化为完全分解的形式 (NFD)，然后使用您自己的代码重新排序组合标记。也许更简单、更安全，您可以只运行一个临时替换例程，将组合标记序列替换为其他序列。这会更安全，因为它不会影响您想要影响的字符以外的字符，而 NFD 会分解带有变音符号的拉丁字母等。

根据 Unicode 原则，规范等效字符串（例如，仅在连续变音符号的顺序上有所不同）是相同数据的不同表示，但与 Unicode 字符序列（代码点）不同；预计它们的呈现方式不会有所不同，但它们可能并且经常会有所不同。通常，您不应*期望*程序将规范等效的字符串视为不同，尽管程序*可能*会有所不同。请参阅[Unicode 规范化常见问题解答](http://unicode.org/faq/normalization.html)。

常见问题解答条目声称圣经希伯来语的问题已通过引入组合字形连接器得到解决。尽管它可以防止在 Chrome 中重新排序，但这是一种笨拙的方法，并且可能会弄乱渲染（在 Web 浏览器中会出现这种情况；变音符号可能会严重错位）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-16T18:17:15.610

可以通过发送 Uint8Array 而不是字符串来避免字符串规范化。首先，将字符串的 UTF-8 数据作为 Uint8Array 获取，如[@Moshev](https://stackoverflow.com/a/18722848/839379)所述：

```
function utf8AbFromStr(str) {
    var strUtf8 = unescape(encodeURIComponent(str));
    var ab = new Uint8Array(strUtf8.length);
    for (var i = 0; i < strUtf8.length; i++) {
        ab[i] = strUtf8.charCodeAt(i);
    }
    return ab;
} 
```

然后，您可以使用普通的 XHR 或您最喜欢的 Ajax 库发布该 Uint8Array。如果您使用 jQuery，请记住您需要指定`processData: false`以防止 jQuery 尝试将其字符串化并撤消您所有的辛勤工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:46:46.813

您可以在提交之前在客户端操作文本。如果插入 Combining Grapheme Joiner 有效，您可以通过 JavaScript 插入它。

作为一个起点，但这里有一个 JSFiddle，它逐个字母地获取字符（在 Safari 中测试并且它不规范化文本）：http: [//jsfiddle.net/TmtnA/](http://jsfiddle.net/TmtnA/)

# angularjs - 使用 angularjs 编写自定义“可编辑”指令

> ID：11176610
> 
> 赞同：3
> 
> 时间：2012-06-24T10:13:35.997
> 
> 标签：angularjs

我正在研究 angularjs，我想编写一个自定义的“可编辑”指令，它可以使普通的 html 元素“可编辑”：

当用户点击它时，它会显示一个文本输入或文本区域让用户编辑内容，此外还有一个“更新”和“取消”按钮。用户可以点击“更新”按钮或按“Ctrl+enter”提交修改的内容，或点击“取消”或按“退出”取消修改。

“可编辑”签名如下所示：

```
<div editable 
     e-trigger="click|dblclick"       /* use click or dblclick to trigger the action */
     e-update-url="http://xxx/xxx"    /* when submitting, the data will PUT to this url */
     e-singleline="true|false"        /* if ture, use text input, otherwise textarea */
     ng-model="name">                 /* the corresponding model name */
{{name}}
</div> 
```

我在这里创建了一个现场演示：http: [//jsfiddle.net/Freewind/KRduz/](http://jsfiddle.net/Freewind/KRduz/)，你可以更新它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-24T12:05:50.297

我自己是 Angular 的新手，希望你能用你的小提琴得到一个可行的例子。同时，John Lindquist 有一个很棒的视频，他解释了如何创建一个 markdown 标签来嵌入一个编辑器。其中详细介绍了如何使用角度指令制作可编辑和预览区域。

*   [第2部分](http://youtu.be/nKJDHnXaKTY)

*   [第1部分](http://youtu.be/A6wq16Ow5Ec)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-04T17:46:08.533

首先，我会观看 bsr 发布的 John Lindquist angularjs 视频——它们非常好。然后，我将查看我在下面汇总的指令。

```
.directive('editable', function() {
    var editTemplate = '<input type="text" ng-model="inputValue" \
        ng-show="inEditMode" ng-dblclick="switchToViewMode()" \
        class="form-control input-sm">';
    var viewTemplate = '<div ng-hide="inEditMode" \
        ng-dblclick="switchToEditMode()">{{ value }}</div>';
    return {
        restrict: 'E',
        scope: {
            value: '=ngModel',
            bindAttr: '='
        },
        controller: function($scope) {
            $scope.inputValue = $scope.value;
        },
        replace: true,
        compile: function(tElement, tAttrs, transclude) {
            tElement.html(editTemplate);
            tElement.append(viewTemplate);

            return function(scope, element, attrs) {
                scope.inEditMode = false;

                scope.switchToViewMode = function() {
                    scope.inEditMode = false;
                    scope.value = scope.inputValue;
                }
                scope.switchToEditMode = function() {
                    scope.inEditMode = true;
                }
                scope.toggleMode = function() {
                    scope.inEditMode = !scope.inEditMode;
                }

                element.bind("keydown keypress", function(event) {
                    if (event.keyCode === 13) {
                        scope.$apply(function() {
                            scope.switchToViewMode();
                        });
                    }
                });
            }
        }
    }
}) 
```

这正是国际海事组织应该这样做的方式。这是包含可编辑项所需的全部操作：

```
<editable ng-model="name"></editable> 
```

很好走。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-19T08:53:48.010

请查看 angular-xeditable：http: [//vitalets.github.io/angular-xeditable](http://vitalets.github.io/angular-xeditable)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-24T12:17:01.657

我首先制作了一个可行的示例。我想把它变成一个包含你想要的所有选项的指令应该不会有太多的工作。

我的想法是 - 不要试图在一个指令中做太多，也许可以通过相当多的较小指令来实现。

[http://jsfiddle.net/Saulzar/rueHv/](http://jsfiddle.net/Saulzar/rueHv/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-16T10:44:02.267

使用 e-addYourDirectiveName

```
 <span editable-text="university.ValueAr" e-only-arabic-letters-input e-name="ValueAr" e-form="UniversityForm">  </span>
```

字母输入 e-name="ValueAr" e-form="UniversityForm" onbeforesave="checkValue($data)"> {{ university.ValueAr }}

# excel - 将时间戳插入 Excel

> ID：11176615
> 
> 赞同：1
> 
> 时间：2012-06-24T10:14:58.620
> 
> 标签：excel

我需要格式化一个数字以在 Excel 中显示为时间戳。例如，这个数字 2083249 显示为 2.083.249，但它代表一个时间戳，所以我希望它显示为 2,083249。

有没有办法将其格式化为所需的格式（2,083249）？需要手动完成的数据非常多。

一些附加信息（不确定是否相关）：时间戳来自wireshark，我将其导出到CSV，在CSV文件中它们显示为2.083249，但是当导入到excel时它们最终为2.083.249。

非常感谢所有的帮助。

编辑：在玩弄了 CSV 文件之后，我在从 CSV 文件导入 excel 时设法格式化了单元格。现在它显示为 2,83249 但不显示最后一个零。它应该是 2,832490。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:29:43.343

如果您正在编写用于导入 Excel 的 CSV，请将日期格式化为日期字符串（例如“2010-06-24”），否则编写一个真正的 Excel 文件，您可以在其中实际设置单元格的格式。

2,083249 不是时间戳格式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:47:48.997

“格式单元格”选项卡中有一些称为自定义标签的东西。您可以创建自己的单元格格式。

*   右键单击包含数字 2083249 的单元格
*   然后按选项卡“数字”并选择最后一个框“自定义”
*   在标题“类型：”下的文本栏中，将此格式设置为 0”，”######
*   按“确定”
*   滚动以让所有其他单元格使用新样式格式化

注意：确保单元格中的所有数字都具有相同的长度（即 2083249 是 7 位数字，然后所有其他单元格包含 7 位数字）

# php - 为什么将值从数据库传递到文本框后会修剪数据？

> ID：11176620
> 
> 赞同：-1
> 
> 时间：2012-06-24T10:15:35.970
> 
> 标签：php, mysql, validation

我正在使用 php，mysql。当我从 mysql 数据库获取数据到文本框进行更新时，只有一半的数据被发送，例如，如果一个学生的名字是“john doe”，在我查询数据库并将值设置为来自 PHP 的文本框之后，只有“约翰”出现在文本框中。

什么会导致这个问题，我无法检测到。

在数据库中，名称完全存储。

这是php脚本

编辑：

```
$srch = mysql_escape_string($_REQUEST['srch']);

$query = mysql_query("select * from X where htno='$srch' or studname like '%$srch%' ");
$row = mysql_fetch_array($query);
$data = "";

if($row){

$data .= '<table border="0" class="data_display">
<tr>
<th>HAll Ticket No:</th><th>Category</th><th>Centercode</th>
</tr>
<tr>
<td>'.$row['htno'].'<input type="hidden" id="htno" value="'.$row['htno'].'" /></td><td>'.$row['category'].'</td><td>'.$row['centercode'].'</td>
</tr>
<tr>
<th>Student Name</th><th>Center name</th><th>Student code</th><th>Score</th>
</tr>
<tr>
<td><input type="text" class="scoretxt" id="category" value='.$row['studname'].'/></td><td>'.$row['centername'].'</td><td>'.$row['studentcode'].'</td>
<td></tr>
</table>; } 
```

任何帮助表示赞赏。肿瘤坏死因子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:09:08.567

您缺少学生姓名周围的引号。

`<input type="text" class="scoretxt" id="category" value='.$row['studname'].'/>`

正在生成`<input type="text" class="scoretxt" id="category" value=John Doe />`，仅显示为“John”。

它应该是

`<input type="text" class="scoretxt" id="category" value="'.$row['studname'].'"/>`

生产`<input type="text" class="scoretxt" id="category" value="John Doe" />`

HTML 非常宽容，所以像这样的小东西很难捕捉到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T10:53:20.923

恐怕这段代码没有与您的问题相关的问题（尽管它有 SQL 注入和 XSS 漏洞）。您需要的称为调试。首先检查问题是否不在 MySQL 的返回中（使用 var_dump($row)），如果一切正确，则假设问题在之后，否则 - 在之前。使用 var_dump() 并检查可能影响学生姓名的地方。我在这段代码中没有看到任何其他代码，所以我认为如果 $row 没问题，这部分会起作用。

# python - 带有嗖嗖声的干草堆-搜索结果不重定向

> ID：11176625
> 
> 赞同：1
> 
> 时间：2012-06-24T10:16:00.990
> 
> 标签：python, django, django-haystack, whoosh

我成功安装了 whoosh 并使它与 Haystack 一起工作。一切正常，但我面临一个问题：搜索关键字并打印出结果后，当我点击结果（标题）时，它不会将我重定向到我点击的关键字的页面，它只是静态的。我尝试添加一个 get_absolute_url 方法。然而它不起作用。我错过了什么？

楷模

```
 class Meek(models.Model):
         user=models.ForeignKey(User)
         title=models.CharField(max_length=250, unique=True)
         address=models.CharField(max_length=200)
         city=models.CharField(max_length=200)
         state=models.CharField(max_length=200)
         main_view=models.ImageField(upload_to="photos",blank=True, null=True)
         side_view=models.ImageField(upload_to="photos",blank=True, null=True)
         pub_date=models.DateTimeField()

         def __unicode__(self):
             return self.title

         @models.permalink
         def get_absolute_url(self):
             return ('findme', (), {
                'main_view': self.main_view,
                'side_view': self.side_view,
                'address': self.address,
                'city': self.city,
                'state': self.state}) 
```

搜索/search.html

```
 {% block content %}

                 <h2>Search</h2>

               <form method="get" action=".">

                <table>
                  {{ form.as_table }}
                <tr><td>&nbsp;</td>
                <td>
                 <input type="submit" value="Search">
                </td>
                </tr>
                 </table>
               {% if query %}
                 <h3>Results</h3>
              {% for result in page.object_list %}
               <p>
                <a href= "{{ result.object.get_absolute_url }}" >{{ result.object.title }}</a> 
               </p>
                 {% empty %}
                    <p>No results found.</p>
                 {% endfor %}

               {% if page.has_previous or page.has_next %}
                     <div>
                       {% if page.has_previous %}<a href="?q={{ query }}&amp;page= {{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>
               {% endif%}

               {% if page.has_next %}<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>{% endif %}</div>
               {% endif %}

                 {% else %}

                    {# Show some example queries to run, maybe query syntax, something else? #}

                {% endif %}
                 </form>

               {% endblock %} 
```

网址配置

```
 #url where the objects are posted.
          (r'^find/$', findme), 

         #haystack url where you can search
         (r'^search/', include('haystack.urls')), 
```

意见：

```
 def findme(request):
               extra_data_context={}
                   #if there's nothing in the field do nothing.
               if request.method=="POST":
                  form=MeekForm(request.POST, request.FILES)
                  if form.is_valid():
                     data=form.cleaned_data
                     newmeeks=Meek(
                         user=request.user,
                         pub_date=datetime.datetime.now(),
                         title=data['title'],
                         main_view=request.FILES['main_view'],
                         side_view=request.FILES['side_view'],
                         address=data['address'],
                         city=data['city'],
                         state=data['state'])
                    newmeeks.save()
                extra_data_context.update({'MeekForm':form})
             else:
                 form = MeekForm()
                 extra_data_context.update({'MeekForm':form})
             extra_data_context.update({'Meeks':Meek.objects.filter(user=request.user)})
             return render_to_response('postme.html',extra_data_context,context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:12:10.280

在`get_absolute_url`你的 URL 被调用`findme`并且你给它五个参数。在您的 URL 配置中，该 URL 存在，但是：

*   它没有被调用`findme`（即，你需要有`name="findme"`），并且
*   它也不包含任何参数。

例如，以下 URL 同时具有名称和命名参数（有关详细信息，请参阅[有关 URL](https://docs.djangoproject.com/en/dev/topics/http/urls/)的文档）：

```
(r'^articles/(?P<year>\d{4})/$', 'news.views.year_archive', name="news_year_archive"), 
```

您需要使用参数`main_view`、`side_view`、等创建一个类似的 URL `address`，以便 Django 可以正确地反转 URL 并为模型提供绝对 URL。`city``state`

# java - 如何从 ValueListBox 值中删除空值

> ID：11176626
> 
> 赞同：13
> 
> 时间：2012-06-24T10:16:15.410
> 
> 标签：java, google-app-engine, gwt

我是 GWT 的新手。我正在编写一个简单的 GWT 程序，我需要在其中使用一个组合框，为此我使用了`ValueListBox`. 在那个组合中，我需要列出代表一年中月份的 1 到 12 的数字。但是该组合在最后附加`null`了价值。谁能帮助我如何删除该`null`值？

```
 final ValueListBox<Integer> monthCombo = new ValueListBox<Integer>(new Renderer<Integer>() {

            @Override
            public String render(Integer object) {
                return String.valueOf(object);
            }

            @Override
            public void render(Integer object, Appendable appendable) throws IOException {
                if (object != null) {

                    String value = render(object);
                    appendable.append(value);
                }
            }
        });
    monthCombo.setAcceptableValues(getMonthList());
    monthCombo.setValue(1);

    private List<Integer> getMonthList() {
        List<Integer> list = new ArrayList<Integer>();

        for (int i = 1; i <= 12; i++) {
            list.add(i);
        }

        return list;
    } 
```

![在此处输入图像描述](../Images/84f6a19e609fc884867a1546b1db4e00.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-24T10:32:21.373

打电话`setValue`之前`setAcceptableValues`。

原因是值是`null`在你调用的时候`setAcceptableValues`，`ValueListBox`会自动将任意值（一般传给`setValue`）添加到可接受值列表中（这样该值就被实际*设置好*了，并且可以被用户选择，如果她重新选择了）选择了另一个值并想回到原来的值）。首先使用可接受值列表中的值调用`setValue`可以消除这种副作用。

请参阅[http://code.google.com/p/google-web-toolkit/issues/detail?id=5477](http://code.google.com/p/google-web-toolkit/issues/detail?id=5477)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T10:32:25.260

引用这个[问题](https://stackoverflow.com/questions/6449356/gwt-editor-framework-drop-down-list)：

> 注意 setAcceptableValues 会自动将当前值（由 getValue 返回，默认为 null）添加到列表中（如果需要，setValue 也会自动将值添加到可接受值列表中）

因此，请尝试颠倒调用 setValue 和 setAcceptableValues 的顺序，如下所示：

```
monthCombo.setValue(1);
monthCombo.setAcceptableValues(getMonthList()); 
```

# asp.net-mvc-3 - ASP.NET MVC 3 , 404 - 找不到文件或目录

> ID：11176630
> 
> 赞同：1
> 
> 时间：2012-06-24T10:17:06.030
> 
> 标签：asp.net-mvc-3, deployment, hosting, publish

这是我的第一个 MVC 项目，总是第一次有痛苦；）

我做了这些步骤来部署项目。

1.  在解决方案资源管理器中使用**发布**选项并选择**File System**。
2.  将发布的文件上传到服务器
3.  将这些额外文件添加到 bin 文件夹

> Microsoft.CSharp.dll
> 
> Microsoft.Web.Infrastructure.dll
> 
> System.Web.Helpers.dll
> 
> System.Web.Mvc.dll
> 
> System.Web.Razor.dll
> 
> System.Web.Routing.dll
> 
> System.Web.WebPages.Deployment.dll
> 
> System.Web.WebPages.dll
> 
> System.Web.WebPages.Razor.dll

我收到此错误**404 - 找不到文件或目录。**

这是我的网站管理面板[的快照](http://up.vatandownload.com/images/4u6sie8oxz27ysr3je8e.jpg)

注 1：我的主机提供商昨天通过 WebInstaller 安装了最新版本的 ASP.NET MVC。

注2：主机操作系统为Windows 2008 R2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T10:23:15.793

您必须使用 ASP.NET 4（集成管道）。这允许您在创建新的 ASP.NET MVC 3 应用程序时使用默认使用的无扩展 url。您没有告诉我们太多有关您的应用程序的信息，因此我们只能猜测您使用的是哪种路由。

如果您选择 ASP.NET 4（经典模式），那么如果您在不支持无扩展 url 的 IIS 6.0 中运行，您将需要配置一些扩展并将其关联到 aspnet ISAPI 过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T10:24:51.817

您也可以尝试在视图中的“href”之前添加点 (.)，如下所示：

> href=' **。**/控制器/动作/'

# android - 离开应用程序时没有显示警报对话框，而吐司执行 android

> ID：11176632
> 
> 赞同：1
> 
> 时间：2012-06-24T10:17:41.237
> 
> 标签：android, bluetooth, android-alertdialog

我正在使用来自蓝牙聊天示例应用程序的代码。我希望用户离开应用程序时，他应该能够接收数据。所以如果我这样做：

```
 case MESSAGE_READ:
                byte[] readBuf = (byte[]) msg.obj;
                // construct a string from the valid bytes in the buffer
                String readMessage = new String(readBuf, 0, msg.arg1);
                mConversationArrayAdapter.add(mConnectedDeviceName+":  " + readMessage);
                /***************************ADDED***************************/
                System.out.println("Number is"+(int)(readMessage.charAt(0)));

                /***************************ADDED***************************/
                break; 
```

我确实在 DDMS 中看到了 println 语句。

如果我这样做：

```
 case MESSAGE_READ:
                byte[] readBuf = (byte[]) msg.obj;
                // construct a string from the valid bytes in the buffer
                String readMessage = new String(readBuf, 0, msg.arg1);
                mConversationArrayAdapter.add(mConnectedDeviceName+":  " + readMessage);
                /***************************ADDED***************************/
                System.out.println("Number is"+(int)(readMessage.charAt(0)));
               Toast.makeText(getApplicationContext(), "received!! "
                        + mConnectedDeviceName, Toast.LENGTH_SHORT).show();

                /***************************ADDED***************************/
                break; 
```

即使我离开应用程序并且我在其他应用程序中，我也会看到 toast 消息。

最后，我真正想要的是无论我的应用程序是否在我收到特定数据时没有运行，打开一个警报对话框，如果我按下是，例如做一些事情（我想在是时发出 http 请求，在否时被转移到我的应用程序。）

这是我的代码：

```
 case MESSAGE_READ:
                byte[] readBuf = (byte[]) msg.obj;
                // construct a string from the valid bytes in the buffer
                String readMessage = new String(readBuf, 0, msg.arg1);
                mConversationArrayAdapter.add(mConnectedDeviceName+":  " + readMessage);
                /***************************ADDED***************************/

                new AlertDialog.Builder(getApplicationContext())
                .setTitle("Title")
                .setMessage("Message")
                .setPositiveButton("Yes",
                 new DialogInterface.OnClickListener() {
                     public void onClick(DialogInterface dialog, int which) {
                          //make http request
                }
             })
                .setNegativeButton("No",
                          new DialogInterface.OnClickListener() {
                             // @Override
                              public void onClick(DialogInterface dialog, int which) {
                                   //open my app
                               }

                          }).show();

                /***************************ADDED***************************/
                break; 
```

在这种情况下，当我离开我的应用程序并接收数据时，我会强制关闭。我想参数 getApplicationContext 是错误的，但我不知道该使用什么。

解决方案：我改用了通知。

# android - andEngine 无法在 onSceneTouchEvent 中获取 ACTION_UP

> ID：11176633
> 
> 赞同：3
> 
> 时间：2012-06-24T10:17:50.147
> 
> 标签：android, andengine

我在使用 Scene Touch Listener 时遇到了一些问题。我只收到 ACTION_DOWN 事件。我从来没有收到 ACTION_UP 或 ACTION_MOVE 事件。我做错了什么？请帮我 。

我已经覆盖了 onSceneTouchEvent 如下：

```
@Override
public boolean onSceneTouchEvent(final Scene pScene,
        final TouchEvent pSceneTouchEvent) {
    switch (pSceneTouchEvent.getAction()) {
    case TouchEvent.ACTION_DOWN:
        Log.d(TAG, "onSceneTouchEvent # ACTION_DOWN");
        break;
    case TouchEvent.ACTION_UP:
        Log.d(TAG, "onSceneTouchEvent # ACTION_UP");
        break;
    }
    return true;
} 
```

*注意：我已经返回 true，但它仍然只得到 ACTION_DOWN

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-19T06:47:50.893

永远不要使用开关盒。因为它只会选择一种情况，而action down是第一个动作，它将永远选择..另一个动作将被忽略。

改用这个：

```
if(pSceneTouchEvent.isActionDown){
   //code action down here
}
if(pSceneTouchEvent.isActionMove){
   //code action move here
}
if(pSceneTouchEvent.isActionUp){
   //code action up here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:42:50.290

您是否在其他任何地方收听场景触摸事件？可能是您正在侦听动作并在其传播到此侦听器之前在那里处理它（返回 true）。

# pthreads - 共享计数器使用自旋锁提供不同的值

> ID：11176637
> 
> 赞同：0
> 
> 时间：2012-06-24T10:18:35.690
> 
> 标签：pthreads, spinlock

我有以下代码：

```
#include <stdio.h>
#include <pthread.h>
#define THREAD_CNT 10
#define ITER 100
#define PRINT 1

int lock;
unsigned long long int counter;

void spin_lock(int *p) {
    while(!__sync_bool_compare_and_swap(p, 0, 1));
}

void spin_unlock(int volatile *p) {
    asm volatile ("");
    *p = 0;
}

void *exerciser(void *arg) {
    unsigned long long int i;
    int id = (int)arg;
    for(i = 0; i < ITER; i++) {
        spin_lock(&lock);
        counter = counter + 1;
        if(PRINT) {
            printf("%d: Incrementing counter: %llu -> %llu\n", id, counter-1, counter);
        }
        spin_unlock(&lock);
    }
    pthread_exit(NULL);
}

int main(int argc, char *argv[]) {
    pthread_t thread[THREAD_CNT];
    counter = 0;
    int i;
    for(i = 0; i < THREAD_CNT; i++) {
        pthread_create(&thread[i], NULL, exerciser, (void *) i);
    }
    for(i = 0; i < THREAD_CNT; i++) {
        pthread_join(thread[i], NULL);
    }
    printf("Sum: %llu\n", counter);
    printf("Main: Program completed. Exiting.\n");
    pthread_exit(NULL);
} 
```

当`PRINT`定义为 1 时，我最后得到正确的计数器值：

```
7: Incrementing counter: 996 -> 997
7: Incrementing counter: 997 -> 998
7: Incrementing counter: 998 -> 999
7: Incrementing counter: 999 -> 1000
Sum: 1000
Main: Program completed. Exiting. 
```

如果我设为`PRINT`0，我会得到以下结果（多次运行）：

```
$ ./a.out
Sum: 991
Main: Program completed. Exiting.
$ ./a.out 
Sum: 1000
Main: Program completed. Exiting.
$ ./a.out 
Sum: 962
Main: Program completed. Exiting.
$ ./a.out 
Sum: 938
Main: Program completed. Exiting. 
```

关于发生了什么的任何见解？为什么当我启用打印语句时，我的结果（始终）正确，但我禁用它并且我的计数器没有达到目标值？我已经使用了很多 pthread，但在直接使用自旋锁方面并不是很有经验。

任何帮助或反馈表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:26:44.060

您的锁定方法实际上并没有做任何事情：由于参数是按值传递的，因此您实际上并没有测试/设置全局锁定的值。您只是在更改函数获得的变量副本的值。

相反，如果您的 spin_lock/spin_unlock 方法使用指向整数（即`&lock`）的指针来使用，那么您的代码应该可以工作。

您的承重 printf 可能会导致一些意外的同步，因为 printf 应该是线程安全的。

# python-3.x - tkinter TclError：读取位图文件时出错

> ID：11176638
> 
> 赞同：24
> 
> 时间：2012-06-24T10:18:59.837
> 
> 标签：python-3.x, icons, tkinter, launcher

我正在尝试像这样设置应用程序图标（python3 / tkinter）：

```
Interface()
root.title("Quicklist Editor")
root.iconbitmap('@/home/jacob/.icons/qle_icon.ico')
root.resizable(0, 0)
root.mainloop() 
```

无论我做什么，我都会收到一条错误消息（空闲），说：

```
return self.tk.call('wm', 'iconbitmap', self._w, bitmap)
_tkinter.TclError: error reading bitmap file "/home/jacob/.icons/qle_icon.ico" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-06-24T18:54:11.893

问题不在于代码，而在于图标。我尝试使用 Gimp（一些 KDE 图标编辑器）以外的其他程序创建一个`xbm`，虽然它看起来非常丑陋，但它确实显示了一个图标。我想我必须找到一个为我的 Python 程序提供“可理解”图标的创建者。

* * *

### 编辑

`iconbitmap`方法原来是黑白分明的，毕竟没用。

经过长时间的搜索，我找到了为 Python 3（在 Linux 上）设置应用程序图标颜色的解决方案。我在[这里](http://mail.python.org/pipermail/tkinter-discuss/2006-November/000954.html)找到它：

```
root = Tk()
img = PhotoImage(file='your-icon')
root.tk.call('wm', 'iconphoto', root._w, img) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-23T05:23:46.903

这是一个老问题，网上有很多关于它的东西，但所有这些都是不正确或不完整的，所以让它工作后，我认为在这里记录我的实际工作代码会很好。

首先，您需要创建一个图标并将其保存为两种格式：Windows“ico”和 Unix“xbm”。64 x 64 是一个不错的尺寸。XBM 是一种 1 位格式——像素只是打开或关闭，所以没有颜色，没有灰色。tkinter 的 Linux 实现只接受 XBM，即使每个 Linux 桌面都支持真正的图标，所以你在那里不走运。此外，XBM 规范对于“on”位是代表黑色还是白色并不明确，因此您可能必须为某些桌面反转 XBM。Gimp 非常适合创建这些。

然后将图标放在标题栏中，使用以下代码（Python 3）：

```
import os
from tkinter import *
from tkinter.ttk import *

root = Tk()
root.title("My Application")
if "nt" == os.name:
    root.wm_iconbitmap(bitmap = "myicon.ico")
else:
    root.wm_iconbitmap(bitmap = "@myicon.xbm")

root.mainloop() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-08-09T21:42:28.197

This will allow you to use PNG files as icons, and it does render color. I tested it on Xubuntu 14.04, 32-bit with Python 3.4 (`root` is your `Tk` object):

```
import sys, os
program_directory=sys.path[0]
root.iconphoto(True, PhotoImage(file=os.path.join(program_directory, "test.png"))) 
```

(Finding program directory is important if you want it to search for `test.png` in the same location in all contexts. `os.path.join` is a cross-platform way to add `test.png` onto the program directory.)

If you change True to False then it won't use the same icon for windows that aren't the main one.

Please let me know if this works on Windows and Mac.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-06-22T14:13:53.907

我试过这个，但我无法使用 Windows 7 让它工作。

找到了解决办法。

`.gif`使用 Jacob 的答案，但如果您使用的是我的操作系统（Windows 7），该文件必须是一个。

使用 MS Paint 制作一个 64x64 的 gif，保存它，使用文件路径和宾果游戏，就可以了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-14T14:47:54.667

我希望这对您的跨平台能力有所帮助

```
LOGO_PATH="pic/logo.ico"
LOGO_LINUX_PATH="@pic/logo_1.xbm"  #do not forget "@" symbol and .xbm format for Ubuntu 
root = Tk()
    if detect_screen_size().detect_os()=="Linux":
        root.iconbitmap(LOGO_LINUX_PATH)
    else:
        root.iconbitmap(LOGO_PATH) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-19T13:57:33.500

只需使用 r 字符串将目录转换为原始文本对我有用：

前任：

> app.iconbitmap(r'在这里输入你的路径')

# svn - 来自不同用户的 Subversion 提交后

> ID：11176640
> 
> 赞同：0
> 
> 时间：2012-06-24T10:19:17.383
> 
> 标签：svn, post-commit

我已经安装了颠覆并具有以下设置：

```
Repo: /home/svn/tester (apache:apache) 
The site is: /var/www/tester (tester:tester) 
```

我已经检查了测试仪回购`/var/www/tester`

我想要做的是将文件的所有者保留在`/home/svn/tester`= apache 中，并将文件的所有者保留在`/var/www/tester`= tester

现在（提交后）文件的所有者`/home/svn/tester`是 Apache

我的提交后文件：

```
#! /bin/sh
/usr/bin/svn update /home/svn/tester 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T10:28:15.337

您应该更新本地工作副本而不是存储库：

```
#!/bin/sh
/usr/bin/svn update /var/www/tester 
```

# uml - UML 活动图对象流/参数

> ID：11176641
> 
> 赞同：0
> 
> 时间：2012-06-24T10:19:41.410
> 
> 标签：uml, activity-diagram

在这个活动图中，我为一些需要传递给其他活动（some_activity）的用户参数使用了输入引脚。我还想在“param_test”图中使用这些参数（决策节点的保护）。这是正确的语法吗？

![序列诊断](../Images/000ba63217df433a5092dac5e0c5b63d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:30:17.627

我认为 UML 并没有准确定义什么可以用作守卫，但是模型的读者可能会理解您的模型，所以我会说它是正确的

# awk - awk遍历中的多维数组

> ID：11176642
> 
> 赞同：0
> 
> 时间：2012-06-24T10:19:42.957
> 
> 标签：awk

我打算在 awk 中使用一个多维数组，并以如下格式存储详细信息

代码

```
arr[customer1,account1]
arr[customer1,account2]
arr[customer2,account1]
arr[customer2,account2] 
```

细节

我只需要知道，我将如何遍历并打印结果。我也在 shell 脚本程序中使用这个 awk，所以我想知道我是否能够在 shell 脚本中使用相同的数组，如果可以，如何传输它。我在很多网站上搜索，我无法找到正确的解决方案。你能帮帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:50:56.957

多维数组中的键与`SUBSEP`变量的值分开，用它来分割它们。像这样遍历数组：

```
for ( key in arr ) {
    split( key, values, SUBSEP )
    ## values[1] -> First value of the multidimensional array.
    ## values[2] -> Second value of the multidimensional array.
} 
```

# ios - iOS透明uitabbar不起作用

> ID：11176643
> 
> 赞同：2
> 
> 时间：2012-06-24T10:19:44.457
> 
> 标签：ios, ios5, ios4, uitabbar

我试图在我的应用程序中使用透明的标签栏，以便用户可以看到标签栏的`uitableview`后面。

我已经看到了这里的所有主题，但还没有成功。

我的 AppDelegate 中有以下代码：

```
UITabBar *tabBar = [self.tabBarController tabBar];

if ([tabBar respondsToSelector:@selector(setBackgroundImage:)])
{
    tabBar.opaque = NO;
    tabBar.alpha = 0.8;
    [[UITabBar appearance] setTintColor:[[UIColor alloc] initWithRed:0.0 green:0 blue:0 alpha:0.9]];
    [tabBar setBackgroundImage:[UIImage imageNamed:@"transparent-tabbar.png"]];    
} 
```

我只是没有成功禁用标签栏的默认黑色背景。

我错过了什么？

顺便说一下文件 transparent-tabbar.png 是： http: [//www.fastup.co.il/images/49382332.png](http://www.fastup.co.il/images/49382332.png)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T10:35:18.097

这里的问题不是你不能设置图像，或者你不能摆脱黑色，问题是`UITabBarController`你添加的viewcontrollers没有到达后面`UITabBar`

所以发生的问题是下面有一个黑色视图`UITabBar`，所以即使你删除 tabBar 你会看到一个黑色视图（尝试设置`tabBar.hidden = YES;`）

一种解决方法是将 superView 设置`tabBar`为一种颜色

```
tabBar.superview.backgroundColor = [UIColor whiteColor]; 
```

这将解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:52:15.573

可能你应该尝试更改标签栏项目的背景图像而不是标签栏黑底..可能会有所帮助。我还没有实现它..

# c# - 程序冻结 - 没有错误，没有异常

> ID：11176645
> 
> 赞同：4
> 
> 时间：2012-06-24T10:20:08.320
> 
> 标签：c#, regex, parsing, imdb

我正在编写一个程序来使用[IMDB 抓取 API 从 IMDB 抓取数据。](http://web3o.blogspot.hu/2010/11/aspnetc-imdb-scraping-api.html)它工作得很好，但有时......它只是停止。没有抛出异常，没有错误，在智能跟踪上没有显示任何内容，找不到它停止的原因。这很有趣，因为它停止的点是**完全随机的！**

例如..如果我启动它，它会成功抓取数据 100 次，但如果我重新启动它，它会在 50 次后卡住.. 我真的不知道它为什么会这样做。

如果我暂停代码，如果它卡住了，它不会写任何东西（就像它会正常运行而没有任何错误），（或者我只是没有注意到它）。左侧的绿色标记位于

```
IMDb imdb_movie = new IMDb(link, false); 
```

源代码可以在[这里找到](http://pastebin.com/jn197xKh)

有任何想法吗？谢谢转发！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T10:41:38.563

这听起来像是您正在使用的 API 中的一个错误。我会与开发人员一起讨论或[下载](http://lab.abhinayrathore.com/imdb/imdb_asp_csharp.htmhttp://lab.abhinayrathore.com/imdb/imdb_asp_csharp.htm)他提供的类文件，以便您自己调试。如果您在没有源代码的情况下安装了 DLL，那么当 IDE 等待外部代码完成时，您将在暂停期间看到绿色箭头，但如果您将类文件添加到项目中，那么您可以逐步查看它卡在哪里。

另外，从根本上说：[为什么正则表达式在这里可能是个坏主意...](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

# zend-framework - Zend 教义 Session 问题

> ID：11176646
> 
> 赞同：0
> 
> 时间：2012-06-24T10:20:39.370
> 
> 标签：zend-framework, session, doctrine

我在尝试使用 Zend 中的 Doctrine 设置会话保存处理程序时遇到问题。

我正在尝试做的是使[这个](http://framework.zend.com/wiki/display/ZFPROP/Zend_Session_SaveHandler_Doctrine+-+Matthew+Lurz)提案生效。我按照以下说明进行操作：-

*   Zend_Session_SaveHandler_Doctrine 类进入正确的目录
*   餐桌准备就绪
*   教义模型准备就绪
*   引导准备就绪

我仍然收到此错误：

```
 Fatal error: Uncaught exception 'Doctrine_Exception' with message 'Couldn't find class Session' in.... 
```

我不确定问题出在哪里或我做错了什么。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:03:33.153

如果您使用 Doctrine ORM（我仍然使用 1.x 版本），您可以通过替换第 289 行来修复此错误：

```
$session = new Session(); 
```

有了这个：

```
$session = new $this->_tableName; 
```

# php - 在 QueryPath 和 HTML 中使用 utf-8 字符

> ID：11176650
> 
> 赞同：1
> 
> 时间：2012-06-24T10:21:23.327
> 
> 标签：php, utf-8, html-parsing, querypath

我正在尝试使用 QueryPath 在 PHP 中操作 HTML。它工作正常，直到某些 utf-8 字符与 ->html() 和 ->text() 方法一起使用。即使使用 html-characters 也不能解决问题。

有问题的例子：

```
$html = "<html><body id='a'>test</body></html>";
$html = qp($html, "#a" )->text("å")->top()->html(); // results in disappearing html code
//$html = qp($html, "#a" )->html("&aring;")->top()->html(); // generates warnings
echo $html 
```

我尝试了多种组合都没有成功。

如果我注释掉第二行并取消注释第三行，我会收到以下警告： 警告：DOMDocumentFragment::appendXML(): Entity: line 1: parser error : Entity 'aring' not defined in D:\Inetpub\wwwroot\QueryPath- 2.1.2-minimal\QueryPath.php 在第 1208 行警告：DOMDocumentFragment::appendXML(): å 在 D:\Inetpub\wwwroot\QueryPath-2.1.2-minimal\QueryPath.php 在第 1208 行警告：DOMDocumentFragment::appendXML (): ^ 在 D:\Inetpub\wwwroot\QueryPath-2.1.2-minimal\QueryPath.php 1208 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T08:34:59.003

我注意到我必须将 php 文件的编码设置为 utf-8 并且它有效。但是，我仍然没有找到使用 html 字符的方法。

# compilation - 在没有 mpirun 的情况下运行 OpenMPI 程序

> ID：11176653
> 
> 赞同：11
> 
> 时间：2012-06-24T10:21:46.870
> 
> 标签：compilation, openmpi

我正在使用`gcc`和[OpenMPI](http://www.open-mpi.org/)。通常我使用包装器运行 MPI 程序`mpirun`——例如，

```
mpirun -np 4 myprogram 
```

启动 4 个进程。

但是，我想知道是否可以轻松生成一个会自动执行此操作的二进制文件（可能使用`-np 4`上面的一些硬编码选项）。

我知道我可以编写一个调用我的程序的 C 包装器，例如：

```
#include <stdlib.h>
#include <unistd.h>

int main() {
        char *options[] = { "mpirun", "-np", "4", "myprogram" };

        execvp("mpirun", options);
        /* Ignoring return value to keep example simple */

        return EXIT_SUCCESS;
} 
```

但这似乎有点笨拙，我最终得到了两个可执行文件而不是一个。

我试图显式链接 MPI 库，比如

```
gcc -o myprogram -I/usr/lib/openmpi/include/ \
    -lmpi -L/usr/lib/openmpi/lib/ myprogram.c 
```

但是当我运行生成的可执行文件时，`MPI_Comm_size`将组大小设置为零（就像我`-np 0`作为参数给出一样）。我可以使用环境变量或其他东西来传递组大小吗？或者，是否有另一种方法来构建单可执行 MPI 程序（使用 Linux 和`gcc`）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T08:15:43.870

如果我理解正确，您需要一个自启动的 MPI 可执行文件。正如我在评论中所写，您可以使用一个特殊选项，`mpirun`如果提供了代码，则可以执行该选项，例如`-launchmpi`. 使用 Open MPI 更容易，因为它将特殊环境变量导出到已启动的 MPI 进程，例如`OMPI_COMM_WORLD_RANK`. 如果这个变量存在于环境中，那么你就知道程序是`mpirun`从而不是直接启动的。您可以在一次检查中结合这两种方法：

```
int main (int argc, char **argv)
{
    int perform_launch = 0;
    // Scan argv[] for special option like "-launchmpi"
    // and set perform_launch if found 

    if (perform_launch || getenv("OMPI_COMM_WORLD_RANK") == NULL)
    {
        // #args = argc + 3 ("mpirun -np 4" added) + NULL
        // #args should be reduced by one if "-launchmpi" is present
        char **args = (char **)calloc(
           argc + (perform_launch ? 3 : 4),
           sizeof(char *));
        args[0] = "mpirun";
        args[1] = "-np";
        args[2] = "4";
        // Copy the entire argv to the rest of args but skip "-launchmpi"

        execvp("mpirun", args);

        return EXIT_SUCCESS;
    }

    // Proceed as regular MPI code
    MPI_Init(&argc, &argv);
    ...
    // Magic happens here
    ...
    MPI_Finalize();

    return EXIT_SUCCESS;
} 
```

如果您想控制 MPI 作业中的进程数，可以将其作为附加参数提供，例如`-launchmpi 12`，或在环境变量中提供，并使用其值而不是`"4"`在上述代码中。

请注意，MPI 可执行文件通常不能在没有`mpirun`. 后者是 MPI 运行时不可分割的一部分，它的作用远不止启动 MPI 可执行文件的多个副本。此外，在使用任何 MPI 编译器包装器（try `mpicc -showme`）进行编译时，您总是显式链接到 MPI 库。尽管您可以静态链接 MPI 库（不推荐，请参阅[此处](http://www.open-mpi.org/faq/?category=mpi-apps#static-mpi-apps)），但您仍然需要`mpirun`才能运行 MPI 作业 - AFAIK 无法`mpirun`在您的程序中嵌入功能，至少在 Open MPI 中没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T19:06:42.900

您可以使用 bash 脚本执行此操作：

```
# 如果你改变这个脚本有可执行文件（chmod +x script_name）
# 如果你在 PATH 变量中有当前路径（在你的 .bashrc 中添加 export PATH=.:$PATH）
#然后，你可以运行这个有：script_name program_args

mpirun -np 4 your_executable_name "$@"

```

# jena - 如何在 Jena 上正确实例化 DatatyProperties？

> ID：11176654
> 
> 赞同：0
> 
> 时间：2012-06-24T10:21:48.680
> 
> 标签：jena, ontology, owl

我编写了以下耶拿代码。但这是一个错误，我不知道如何解决这个问题。

这是代码

```
Resource   subject   = null;
Property   property  = null;
Statement  statement = null;

...

OntModel domainModel = ModelFactory.createOntologyModel(ProfileRegistry.OWL_DL_LANG);
domainModel.read((new FileInputStream(bootstrapInOwl)), null);

subject = domainModel.getIndividual(bootbase + "Frame" + frameNum);                     
property = domainModel.getOntProperty(bootbase + "hasDuration");                
statement = domainModel.createLiteralStatement(subject, property, 12000);
domainModel.add(statement); 
```

这是错误消息

```
Exception in thread "main" java.lang.NullPointerException
    at com.hp.hpl.jena.rdf.model.impl.StatementImpl.<init>(StatementImpl.java:29)
    at com.hp.hpl.jena.rdf.model.impl.ModelCom.createStatement(ModelCom.java:1116)
    at com.hp.hpl.jena.rdf.model.impl.ModelCom.createLiteralStatement(ModelCom.java:626)
    at soctrace.Intology.manageOntologies2(Intology.java:217)
    at soctrace.Intology.main(Intology.java:56) 
```

属性`hasDuration`域是`Frame`Class 而他的范围是`int`。

感谢您的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:59:04.423

以下两行之一似乎返回了一个`null`指针：

```
subject = domainModel.getIndividual(bootbase + "Frame" + frameNum);                     
property = domainModel.getOntProperty(bootbase + "hasDuration"); 
```

确认您正在查找现有的 URI。

# c# - 搜索嵌套类列表

> ID：11176657
> 
> 赞同：0
> 
> 时间：2012-06-24T10:22:27.540
> 
> 标签：c#, list, lambda, visual-web-developer-2010

关于在嵌套类中搜索记录的问题。这是我的代码的精简版。希望它解释得足够多！我正在使用 Visual Web Developer 2010 Express。

班级

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace API
{
    public class Fixture
    {
        public int ID { get; set; }
        public string Description { get; set; }
        public List<FixturesMarketData> FixturesMarketData;

        public Fixture()
        {
            FixturesMarketData = new List<FixturesMarketData>();
        }

        public void AddMarket(int _fixtureID, int _marketID, string _MarketName)
        {
            FixturesMarketData.Add(new FixturesMarketData ( _fixtureID, _marketID, _MarketName ));
        }

        public string ListMarkets()
        {
            string strReturn="";
            foreach (var item in FixturesMarketData)
             {
                strReturn = strReturn + "<br />" + item.marketDescription + " - " + item.marketID + " - " + item.fixtureID;
            }
            return strReturn;
        }
    }

    public class FixturesMarketData
    {
        public int fixtureID { get; set; }
        public int marketID { get; set; }
        public string marketDescription { get; set; }

        public FixturesMarketData(int _mdfixtureID, int _mdmarketID, string _mdmarketDescription)
        {
            fixtureID = _mdfixtureID;
            marketID = _mdmarketID;
            marketDescription = _mdmarketDescription;
        }
    }
} 
```

主要代码

```
_fixtures = new List<Fixture>();
_fixtures.Add(new Fixture { ID = 1234, Description = 'This is a test' });

int index = _fixtures.FindIndex(Fixture => Fixture.ID.Equals(1234));
_fixtures[index].AddMarket(1234, 5678, 'This is a test market');
AddToOutputString(_fixtures[index].ListMarkets()); 
```

所以基本上这会导致：

```
ID= 1234;
Description=This is a test;
FixturesMarketData
FixtureID=1234;
MarketID=5678;
marketDescription=This is a test market; 
```

如何在 FixturesMarketData 上查找市场 id 等于 5678 的位置？

我可以这样做：

```
var index=-1;
            foreach (var item in _fixtures)
            {
                index = item.FixturesMarketData.FindIndex(entry => entry.marketID.Equals(_marketId));
                if(index!=-1)
                {
                    break;
                }
            } 
```

但我猜肯定有办法以 Lambda Find 风格做到这一点

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:30:18.197

```
var enumerable=_fixtures.Where(x=>x.FixturesMarketData.Any(x=>x.marketId==5678)); 
```

现在，如果您希望找到许多这样的固定装置，您可以做

```
enumerable.ToList(); 
```

如果你只想要第一个

```
enumerable.FirstOrDefault(); 
```

如果只能找到一个夹具，那么

```
enumerable.SingleOrDefault(); 
```

注意：这里默认意味着如果没有找到返回`NULL`，否则将抛出错误

# image-processing - 在 Metro 中使用 SharpDX 进行图像处理

> ID：11176662
> 
> 赞同：3
> 
> 时间：2012-06-24T10:23:39.723
> 
> 标签：image-processing, microsoft-metro, sharpdx

我正在使用 SharpDX 在 Metro 上进行图像处理。现在我成功获取了 WICBitmap 中的数据，并将其复制到 WriteableBitmap 以在 Image Control 中显示图像。但是现在的问题是，我需要把WriteableBitmap中的数据（不是文件，图像数据是瞬间生成的）放到D2D Bitmap中，所以我写了代码：</p>

```
DataStream originalDataStream = new DataStream(Height * Width * 4, true, true);
originalWriteableBitmap.PixelBuffer.AsStream().CopyTo(originalDataStream);
WICStream oriWICStream = new WICStream(wicFactory, originalDataStream);

SharpDX.WIC.BitmapDecoder bitmapDecoder = new SharpDX.WIC.BitmapDecoder(wicFactory, oriWICStream, DecodeOptions.CacheOnLoad); 
```

当我运行代码时，最后一行出现错误：HRESULT: [0x88982F50], Module: [Unknown], ApiCode: [Unknown/Unknown], Message: The component can not be found。

谁知道如何解决这个问题？谢谢！！！

PS：你可以在这里下载我的测试项目：http: [//sharpdx.org/forum/5-api-usage/297-wic-d2d1-using-sharpdx-in-metro-to-do-image-processing#297](http://sharpdx.org/forum/5-api-usage/297-wic-d2d1-using-sharpdx-in-metro-to-do-image-processing#297)

# ios - 如何访问 UITableView 以重新加载数据？

> ID：11176664
> 
> 赞同：0
> 
> 时间：2012-06-24T10:24:01.993
> 
> 标签：ios, uitableview, reloaddata

我正在移动我在 iOS 开发中的第一个步骤。我按照[本教程](http://www.appcoda.com/storyboards-ios-tutorial-pass-data-between-view-controller-with-segue/)的第一部分创建了一个简单的表。一切都很好，但现在我想使用 UITableView 的 reloadData 方法更改显示的数据。

我一直看到，如果我的控制器是 UITableViewController，我可以这样做`[self.tableView reloadData]`，但我的控制器是嵌入 UITableView 的 UIViewController。

如何从代码中访问该方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:31:13.407

如果我了解您想要做什么，那么您必须为您的 UITableView 制作一个 IBOutlet 并将其与您的 UITableView 连接，并使用它您可以使用您提到的方法重新加载您的表格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:43:11.813

如果你没有 UITableView 的 IBOutlet，你可以按照这个

```
UITableView *view = (UITableView*)[self.view];
[view  reloadData]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T10:28:43.970

你在使用 XIB 吗？

通常如果你的控制器是 UIViewController，那么你会有类似的东西

```
@property (nonatomic, retain) UITableViewController *myTableViewController; 
```

或者

```
@property (nonatomic, retain) IBOutlet UITableViewController *myTableViewController; 
```

重新加载只是做

```
[self.myTableViewController reloadData]; 
```

# c++ - 如果字符串存在于另一个字符串中，则查找该字符串

> ID：11176668
> 
> 赞同：-2
> 
> 时间：2012-06-24T10:24:47.180
> 
> 标签：c++, string

如何找到另一个字符串中是否存在一个字符串，而不是使用字符串比较函数，而是通过迭代每个字符并测试 C++ 中的相等性？

```
string one="hello world"; // Search *in* this string
string two="wor";         // Search *for* this string 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:30:50.637

看起来像家庭作业^^

```
int find(string one, string two){
    int a, b;
    for(int c = 0; c + two.length() < one.length(); c++){
        a = 0;
        b = c;
        while(a < two.length() && one[b++] == two[a++]);
        if(a == two.length())return c;
    }
    return -1;
} 
```

# regex - 在 LESS 中使用正则表达式

> ID：11176671
> 
> 赞同：0
> 
> 时间：2012-06-24T10:25:18.623
> 
> 标签：regex, css, less, css-animations

有没有办法在 LESS 中使用正则表达式？这是我的代码：

CSS：

```
@color: red;

body{color:@color;}/*Text is red if LESS is loaded correctly */

span{display:inline-block;position:relative;top:2px;}

.char1{.titel-animation(0s);}
.char2{.titel-animation(0.2s);}
.char3{.titel-animation(0.4s);}
.char4{.titel-animation(0.6s);}
.char5{.titel-animation(0.8s);}
.char6{.titel-animation(1s);}

.titel-animation(@delay){
    animation: sitetitel 1s @delay ease 1; 
    -moz-animation: sitetitel 1s @delay ease 1; 
    -webkit-animation: sitetitel 1s @delay ease 1;
}

@keyframes sitetitel {
    50%{ 
        color:blue;
    }
}
@-moz-keyframes sitetitel {
    50%{ 
        color:blue;
    }
}
@-webkit-keyframes sitetitel {
    50%{ 
        color:blue;
    }
}​ 
```

HTML：

```
<span class="char1">F</span>
<span class="char2">o</span>
<span class="char3">o</span>
<span class="char4">b</span>
<span class="char5">a</span>
<span class="char6">r</span> 
```

演示：http:
[//jsfiddle.net/kaEGh/](http://jsfiddle.net/kaEGh/)

我想要的是替换

```
.char1{.titel-animation(0s);}
.char2{.titel-animation(0.2s);}
.char3{.titel-animation(0.4s);}
.char4{.titel-animation(0.6s);}
.char5{.titel-animation(0.8s);}
.char6{.titel-animation(1s);} 
```

通过这样的事情：

```
.char@number{.titel-animation(((@number-1) *0.2)s);} 
```

如果可能的话

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:17:14.740

不是正则表达式，但您可以使用守卫来获得递归。我认为以下内容可以满足您的要求....

```
.charX(@number) when (@number > 0) {
  (~".char@{number}") {
    @adjustedNumber: (@number - 1) *0.2;
    @unitNumber: ~"@{adjustedNumber}s";
    .titel-animation(@unitNumber)
  }
  .charX(@number - 1);
}

.charX(@number) when (@number = 0) {
} 

.charX(6); 
```

# javascript - javascript中的null或未定义检查

> ID：11176676
> 
> 赞同：0
> 
> 时间：2012-06-24T10:26:07.773
> 
> 标签：javascript, function, null, local-storage, undefined

我正在缓存一个字符串`localStorage`

```
 checkLoop:function(){   //function is hit only if internet is connected
 localStorage['key'] = "Some string response from web service";
 //JSON Web service could return null, "" (empty response) too
 } 
```

仅当有 Internet 连接时才会定义此密钥。所以我的功能有可能`checkLoop`永远不会被击中。即从未定义过localStorage。

后来我检查一下是`defined`不是`null`

所以像这样做支票`if(!localStorage['key']){..//TODO..}`会奏效吗？

或者我需要更多地定制它以获得更好的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:27:32.700

```
if(!localStorage['key']){
    // Will enter if the value is null\undefined\false\0\""
} 
```

您可能想改用它：

```
if(localStorage['key'] == null){
    // only null\undefined.
} 
```

[**演示**](http://jsfiddle.net/5Z322/)

javascript 中的虚假值是：

*   不明确的
*   无效的
*   错误的
*   0
*   "" - (空字符串)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T10:27:45.297

利用`typeof`

```
if(typeof localStorage['key'] !== 'undefined'){ 
    // Do Something 
} 
```

**注意：**如果要存储`false`或`0`值，这很有用。

# php - 是否可以将 JS 脚本放入 PHP 文件中？

> ID：11176681
> 
> 赞同：0
> 
> 时间：2012-06-24T10:27:35.777
> 
> 标签：php, html, refresh

```
<?php

mysql_connect('localhost','root','');
mysql_select_db('ditwhales');

$studno=$_POST['studno'];

$command=mysql_query("SELECT * FROM chat WHERE studno= 

'$studno'");
$numrs=mysql_num_rows($command);

if ($numrs==0){
print 'Sorry but you are not one of the Whales. Please contact the web 

master and ask for registration of your Student No. Thank you!';
}

else{
$all=mysql_query("SELECT * FROM msgs");

while ($row=mysql_fetch_array($all)){

echo $row['message'] . "<br />";

};
}

?> 
```

我有这个代码。但问题是我希望 else 每 1 秒刷新一次。这甚至可能吗？我认为返回功能会起作用，但我不知道如何使用它。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:32:36.680

您可以每 1 秒使用 javascript ajax 加载 php 文件，也可以使用无限循环并放入 sleep(1)；每1秒刷新一次

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:59:26.387

正如 Mohammad 建议的那样，您可以针对此问题使用客户端脚本来调用服务器上的 php 文件定位并返回答案，例如：

```
<script type="text/javascript">
function callphp(){
    setTimeout('callphp()', 1000);
    xmlhttp = null;
    count = 0;
    var d = new Date();
    if (window.XMLHttpRequest){
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else{
        // IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
RndString = d.getFullYear() + "" + d.getMonth() + "" + d.getDate() + ""  + d.getHours() + "" + d.getMinutes() + "" + d.getSeconds() + "" + count++;
    xmlhttp.open("GET",'file.php?C=' + RndString,false);
    xmlhttp.send(null);
    if(xmlhttp.responseText != ""){
        document.getElementById("div").innerHTML = xmlhttp.responseText;
        }
}
</script> 
```

请检查一下，让我们知道发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T12:55:59.337

你有点令人困惑：php运行服务器端，它返回你显示给客户端的数据，通常是浏览器直接显示的完整HTML，但它也可以在你使用时只返回各种格式的数据，如[json](http://www.json.org/)或[XML](http://en.wikipedia.org/wiki/XML)它作为[RPC](http://en.wikipedia.org/wiki/Remote_procedure_call)的提供者，这是一种通过 php 文件端点调用函数并让它返回数据的奇特方式。

如果您想操纵客户端（通常是网络浏览器）如何与用户交互，那么您需要编写在该特定上下文中交互的代码，浏览器的统一方法是使用[JavaScript](http://en.wikipedia.org/wiki/JavaScript)。

[使用 javascript，您可以使用setInterval](https://developer.mozilla.org/en/window.setInterval)以多种方式使您的页面（交互）处于活动状态，例如每 X 秒调用一次例程。

```
var cMR;

function callMyResults(){
}

window.onload = function(){
    cMR = setInterval('callMyResults',5000);
}
; 
```

为了在页面加载时自动调用您的代码，我们将一个函数附加到[onLoad](https://developer.mozilla.org/en/DOM/window.onload)事件处理程序，这将执行分配给它的函数中的所有内容，在我们的例子中，它将设置一个 5000 毫秒的间隔，它将执行每次调用 MyResults() 函数。setInterval 的结果保存在 cMR 全局中，以便以后可以在需要时停止在间隔上执行的代码。

所以目前这段代码什么都不做。Javascript 可以调用其他页面，从而通过现在统一称为[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)的东西检索数据。最初，这意味着检索您随后操作的 XML 文档（或只是简单地[写入](https://developer.mozilla.org/en/document.write)当前显示的文档）。后来这已经演变为使用 json，因为它返回一个 javascript 本机元素，使其更易于使用并且通常更小，以通过网络连接传输，这使得页面更快捷。

许多库可以轻松完成此操作，其中最流行的库之一是[jquery ，但您也可以使用](http://jquery.com/)[XMLHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest)对象（AJAX 的基础）编写自己的调用。你会在网上找到很多这样的例子，比如这个用于[检索 json 数据](http://www.javascriptkit.com/dhtmltutors/ajaxgetpost4.shtml)的例子。

一般来说，建议您使用已建立的库，以便于使用、您自己的理智以及更好、更容易访问的编码。

最后，在 PHP 端，您只需像往常一样收集数据，但打印数据略有不同，可以是您自己指定格式的 XML，也可以使用[json_encode](http://www.php.net/manual/en/function.json-encode.php)将其作为 json 返回。这可以简单如下：

```
<?php
$pdo = new PDO('mysql:dbname=testdb;host=127.0.0.1',$user,$password);
$result = $pdo->query('SELECT * FROM msgs');
print json_encode($result->fetchAll()); 
```

请注意，我使用[PHP 数据对象](http://www.php.net/manual/en/book.pdo.php)（通常称为 PDO）来访问数据库，这提供了一种访问数据库的统一方式，以防您切换到另一个[RDBMS](http://en.wikipedia.org/wiki/Relational_database_management_system)，而不是当前使用的 RDBMS（mysql）。在这种情况下，您需要调整的是在实例化[PDO](http://www.php.net/manual/en/pdo.construct.php)对象时提供给它的 DSN 字符串。PDO 的另一个非常大的优点是它通过提供方法来保护您免受[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)，这些方法可以轻松创建[准备好的语句](http://www.php.net/manual/en/pdo.prepare.php)，您可以向该语句提供自动引用的[参数](http://www.php.net/manual/en/pdostatement.bindparam.php)（因此受到保护）；不再推荐使用 mysql_* 系列函数：使用 PDO 或使用 mysqli。

所以，给你一个工作的例子：

我们有 1 个客户端页面：display.html 和 2 个用于生成和返回数据的服务器端页面（fillList.php 和 retrieveList.php）

**填充列表.php**

```
<?php
    // we work with the following table
// create table list_data (`when` DATETIME NOT NULL);

    // make sure to adapt these settings to yours, including username and password
$pdo = new PDO('mysql:dbname=scratch;host=localhost','username','password');
$pdo->exec('INSERT INTO list_data VALUES (NOW())'); 
```

这将在表的`when`列中插入一个新值`list_data`

**检索列表.php**

```
<?php
    // make sure to adapt these settings to yours, including username and password
    $pdo = new PDO('mysql:dbname=scratch;host=localhost','scratch','scratch');
    print json_encode($pdo->query('SELECT `when` FROM list_data 
                                   ORDER BY `when` DESC'
                                  )->fetchAll(PDO::FETCH_ASSOC)
                      ); 
```

检索`list_data`在按降序排列的表中找到的所有值，并将结果关联数组作为 json 对象返回。

我决定向您展示一个使用 jquery 的示例客户端页面，确保您下载最新的[jquery-1.7.2.js](http://code.jquery.com/jquery-1.7.2.js)并将其放在与此文件相同的目录中。

**显示.html**

```
<html><head><title>Refreshing List</title>
<script src="http://localhost/jquery-1.7.2.js" />
</head>
<body>

<p>this list refreshes every 5 seconds, a new value is inserted every 2 seconds</p>
<ul id="toRefresh">
<li>base</li>
</ul>
<script>

function fillList(){
  // we insert a new value in the database by calling fillList.php
  $.get("http://localhost/fillList.php");
}

function refreshList(){
  /* 
    we retrieve the json encoded data returned by retrieveList.php 
    and process it in our anonymous function
  */
  $.getJSON("http://localhost/retrieveList.php",function (data){
    var items = [];
// loop through the returned array
    $.each(data,function(key,val){
      // we passed an associative array so we can use the columnname: 'when'
      items.push("<li>when: " + val['when'] + "</li>");
});
    // clear the list and append the data to it
$("#toRefresh").empty();
$("#toRefresh").append(items.join(''));
  });
}

// jquery uses .ready() instead of window.onload = function(){}
$(document).ready(function (){
  // retrieve the data every 5 seconds
  setInterval(function(){refreshList();},5000);
  // insert additional new data every 2 seconds
  setInterval(function(){fillList();},2000);

  // we fill the list with its initial values
  refreshList();

});
</script>
</body>
</html> 
```

如您所见，jquery 为您提供了一种简单的方法来执行这些操作。运行 display.html 页面，您将看到一个不断增长和刷新的 mysql 日期时间值列表。

# entity-framework - Entity Framework 4.3 一对一的外键关系

> ID：11176687
> 
> 赞同：3
> 
> 时间：2012-06-24T10:28:07.917
> 
> 标签：entity-framework, repository-pattern, relationship, entity-framework-4.3, one-to-one

我希望有人在花费无数小时配置现有数据库的数据模型后能给我更多的见解。我有以下数据库结构

```
User (Table)
    UserID  (P.K Identity int)
    UserName (nvarchar)

UserSetting (Table)
    UserSettingsID (P.K Identity int)
    UserSettingsUserID (F.K of User.UserID) 
```

在模型中，我有一个用户实体的属性 UserSetting 和用户设置实体的用户属性。

在用户设置实体类型配置中；

```
 this.HasRequired(t => t.User)
     .WithMany(t => t.UserSetting)
     .HasForeignKey(d => d.UserSettingsUserID)
     .WillCascadeOnDelete(false); 
```

如果我在用户实体中将 UserSetting 设置为 ICollection，则上述内容仅适用（这是我目前唯一的解决方案）。我已经尝试设置外键属性以及我在网上可以找到的几乎所有内容，但没有运气。这是我第一次使用存储库模式和工作单元对实体框架进行编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T10:54:17.220

查看此人的博客以获取解决方案：

[http://weblogs.asp.net/manavi/archive/2011/01/23/associations-in-ef-code-first-ctp5-part-3-one-to-one-foreign-key-associations.aspx](http://weblogs.asp.net/manavi/archive/2011/01/23/associations-in-ef-code-first-ctp5-part-3-one-to-one-foreign-key-associations.aspx)

基本上：

```
modelBuilder.Entity<User>().
HasRequired(us => us.UserSetting).
WithMany().
HasForeignKey(u => u.UserSettingId); 
```

密切关注他如何构建`User`类属性和属性名称。名称必须相应匹配。

顺便说一句：用数据注释装饰实体比使用 Fluent API 容易得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T11:47:15.167

**您可以将此架构用于 EF 4.x 中的 1 到 0..1 实体映射：**

```
Table Users
    UserID int, PK, Identity
    UserName nvarchar

Table UserSettings
    UserID int, PK, non-Identity, FK to Users
    Settings nvarchar(max) or any other type 
```

**或者 EF 4.x 中用于 1 对 1 实体映射的此架构（将表拆分为两个实体）：**

```
Table Users
    UserID int, PK, Identity
    UserName nvarchar
    Settings nvarchar(max) or any other type 
```

**表拆分链接：**
[Using DB-First](http://www.deveducate.com/blog/post/2010/12/14/Entity-Framework-Modeling-Table-Splitting.aspx)
[Using Code-First](http://weblogs.asp.net/manavi/archive/2011/04/24/associations-in-ef-4-1-code-first-part-4-table-splitting.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T10:54:34.080

如果您正在寻找一对一，那么 UserSetting 表应该有一个主键，并且该键应该同时是 User 表的外键：

User (Table) UserID (PK Identity int) UserName (nvarchar) UserSetting (Table) UserSettingsID (PK Identity int AND FK of User.UserID)

# scala - Scala：下划线的另一种用法？

> ID：11176688
> 
> 赞同：3
> 
> 时间：2012-06-24T10:28:14.263
> 
> 标签：scala

我正在研究 scala 演员库，在那里我找到了以下代码：

```
private[scheduler] trait TerminationMonitor { 
    _: IScheduler =>

    protected var activeActors = 0 
    ... 
```

问题是_是什么意思：IScheduler => 在这里？
我是 Scala 的新手，下划线有很多不同的含义，这让我很困惑。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T10:38:59.770

下划线的这种用法类似于：

```
someElem match {
  case _: String => doSomething()
}

val k = (_: Int) => "This does not use the Int argument."

val (m, _, o) = (1,2,3) 
```

它是标识符（变量）的语法占位符，之后立即丢弃。

在您的示例中，因此避免了自我类型的命名。（但由于自类型引用始终可以作为 访问，因此在这种特殊情况下`this`相当于编写。）`this: IScheduler =>`

# node.js - 安全节点 api：使用 php 会话？

> ID：11176690
> 
> 赞同：1
> 
> 时间：2012-06-24T10:28:20.907
> 
> 标签：node.js, session, authentication

我在示例聊天应用程序中使用 Symfony2 来为网站提供服务并进行注册和身份验证。Node.js 作为通信服务器，backbone.js 作为客户端提供聊天功能。

现在的问题是如何保护 node.js api（socket.io，REST）。

我的第一个想法是在 redis db 中为 node.js 和 symfony2 共享会话，但这会将它们联系在一起，我不能将 node 用作独立的 api（对于其他项目）。

所以我的问题是是否有更好的策略（可能发送带有每个标头的凭据），以便 api 和 php 更加解耦。

问候

# process - 我需要知道一个进程是否正在运行

> ID：11176696
> 
> 赞同：1
> 
> 时间：2012-06-24T10:29:51.100
> 
> 标签：process, batch-processing, batch-file, app-id

每当“我自己的 Program.exe”关闭时，我都需要一个批处理文件才能继续。

我试过这个：

```
@echo off  
:loop  
tasklist /FI "IMAGENAME eq MyOwnProgram.exe" 2>NUL | find /I /N "MyOwnProgram.exe">NUL  
if "%ERRORLEVEL%"=="1" goto done
goto loop  
:done 
```

它适用于单个单词的进程，但如果它是 3 个单词（如“My Own Program.exe”）则不行。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:08:44.343

```
@echo off
set /a errorlevel=0
wmic process where (Name ="My Own Program.exe")  get  ProcessId | more +1  | findstr "[1234567890]"
if %errorlevel% EQU 1 (
  echo not running
) else (
   echo running
) 
```

我不完全确定这些对应于任务列表中的 IMAGENAME 和 wmic 查询中的条件可以更改：

```
Caption
Description
Name 
```

# c - X86与ARM上C中指针和整数的比较

> ID：11176698
> 
> 赞同：1
> 
> 时间：2012-06-24T10:30:10.313
> 
> 标签：c, gcc, arm

在我的程序中，我将 char 与十六进制 int 进行比较，我得到了在 X86 PC 和 ARM 手持设备上运行的不同结果，在 n900 上使用 arm-gcc 或本机 gcc 编译，无论哪种方式，PC 的条件都是正确的，而不是在移动设备上传递。

```
int main(int argc, char *argv[])
{
      if (*argv[1] == 0xffffffcc)
          puts("ok");

      return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T10:35:45.743

与实际字符常数进行比较可能更明智。尽管整数提升仍然会发生在`==`的两个操作数上，但至少它们会以相同的方式发生，并且您不会依赖于您的或`char`大小的符号。`int``unsigned int`

例如

```
if (*argv[1] == '\xcc') 
```

我相信 ARM 编译器通常会生成`char`无符号，这意味着当`'\xcc'`提升为整数时，您会得到值`0xcc`，而不是`0xffffffcc`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T10:42:59.910

在 ARM 系统上，`char`默认情况下类型通常是无符号的，而在 x86 上通常是有符号的。相等运算符`==`执行两个操作数的整数提升，因此行为的差异`*argv[1]`被认为是有符号（执行符号扩展）或无符号（不执行符号扩展）。

`gcc`请注意，您可以使用`char`选项`-fsigned-char`和`-funsigned-char`.

# nginx - Nginx 在 HttpLimitConnModule 和 HttpLimitReqModule 之间添加共享区域

> ID：11176702
> 
> 赞同：0
> 
> 时间：2012-06-24T10:30:37.943
> 
> 标签：nginx

我正在尝试限制每个 IP 的连接和请求，然后添加一个白名单，以便将搜索机器人排除在此限制之外。这可以使用我在这篇[文章](http://gadelkareem.com/2012/03/25/limit-requests-per-ip-on-nginx-using-httplimitzonemodule-and-httplimitreqmodule-except-whitelist/)中描述的 HttpLimitConnModule 来完成。如下

```
http{
     geo $notabot {
        default 1;
        #google 
        64.233.160.0/19 0;
        65.52.0.0/14 0;
        66.102.0.0/20 0;
        66.249.64.0/19 0;
        72.14.192.0/18 0;
        74.125.0.0/16 0;
        209.85.128.0/17 0;
        216.239.32.0/19 0;
        #M$
        64.4.0.0/18 0;
        157.60.0.0/16 0;
        157.54.0.0/15 0;
        157.56.0.0/14 0;
        207.46.0.0/16 0;
        207.68.192.0/20 0;
        207.68.128.0/18 0;
        #yahoo
        8.12.144.0/24 0;
        66.196.64.0/18 0;
        66.228.160.0/19 0;
        67.195.0.0/16 0;
        74.6.0.0/16 0;
        68.142.192.0/18 0;
        72.30.0.0/16 0;
        209.191.64.0/18 0;
        #My IPs
        127.0.0.1/32 0;
        123.456.0.0/28 0; #example for your server CIDR
    }
    limit_req_zone $binary_remote_addr zone=notabot:5m rate=200r/s;
    limit_req zone=notabot burst=200 nodelay; 
```

但是，当我将相同的区域“notabot”添加到 HttpLimitConnModule 时，如下所示

```
limit_conn_zone  $binary_remote_addr  zone=notabot:5m;
limit_conn_log_level notice;
limit_conn  notabot  20; 
```

Nginx 产生配置错误：

```
nginx: [emerg] the shared memory zone "notabot" is already declared for a different use in /server/nginx.conf:116 
```

唯一可行的方法是使用另一个名称再次添加“notabot”区域。有没有办法在 2 个模块之间共享一个区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:12:15.630

不，它们存储不同的数据。

# javascript - 如何使用 jsonp/jquery 触发函数

> ID：11176708
> 
> 赞同：2
> 
> 时间：2012-06-24T10:32:23.963
> 
> 标签：javascript, jquery, jsonp

我有这个功能：

```
 var current_url=window.location.href;
$.ajax({url:      'http://api.apps.com/html/'+appid,
      data:      {url:current_url},
      dataType: 'jsonp',
      timeout:  10000,
      jsonp: "set_url_target",
      success: function(data) { console.log(data); },
       error: function(jqXHR, textStatus, errorThrown) { console.log(errorThrown); console.log(textStatus); }
      }).done(function() { 
          console.log("Message has been complete!!");
        }); 
```

我想要的是在[http://api.apps.com/html/](http://api.apps.com/html/)上触发这个功能 （注意它是一个不同的域）。

```
function set_url_target(url){
    console.log("Url has been recieved: "+url);
} 
```

到目前为止， set_url_target 没有被触发，并且我没有在控制台上打印任何内容，没有错误或什么都没有..为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T10:59:01.213

如果外部应用程序不受您的控制，恐怕您无法做太多事情，因为您需要更新服务器发送到客户端的响应才能成功使用 JSONP..

因此您有两个选择：a）在您的应用程序的服务器端进行调用并将其返回给客户端 b）或者完全使其成为客户端，您可以使用诸如雅虎管道或其他将`json`响应转换为有效`jsonp`响应的服务。

这是一个关于如何使用雅虎管道进行操作的示例：[https ://gist.github.com/316660](https://gist.github.com/316660)

我不确定许可证，请检查它们以及是否有相关的 API/带宽成本。让我知道它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T11:13:10.523

试试这个，注意`jsonp`和`jsonpCallback`属性

```
 var current_url=window.location.href;
    $.ajax({url:      'http://api.apps.com/html/'+appid,
            data:      {url:current_url},
            dataType: 'jsonp',
            timeout:  10000,
            jsonp : false,
            jsonpCallback: "set_url_target",
       success: function(data) { console.log(data); },
       error: function(jqXHR, textStatus, errorThrown) { console.log(errorThrown); console.log(textStatus); }
  }).done(function() { 
      console.log("Message has been complete!!");
    }); 
```

有关这方面的更多信息，[AJAX](http://api.jquery.com/jQuery.ajax/)

# asterisk - 如何将 Asterisk 呼叫的呼叫持续时间插入到我自己的数据库中？

> ID：11176711
> 
> 赞同：2
> 
> 时间：2012-06-24T10:32:39.023
> 
> 标签：asterisk

我有自己的数据库来记录 astreisk 中的调用。我需要将每次通话的通话时长插入表中。我怎样才能做到这一点？我可以在我的拨号方案中这样做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T13:38:17.807

您没有提供太多关于您想使用什么数据库后端的信息，以及您是否在询问如何编写自己的通话持续时间或如何配置星号来编写相关的 cdr。

所以，*一般来说*，你有 3 种可能的选择（见下文）。对于选项**2**和**3**，您必须自己打开与数据库的连接，编写插入/更新所需行、处理错误等所需的查询。而对于选项**1**，您只需要配置星号即可工作。

1) 默认情况下，Asterisk 可以通过将每次调用的 CDR（调用详细记录）写入后端来自行执行此操作。[这个后端通过cdr_odbc](http://www.voip-info.org/wiki/view/Asterisk+cdr+odbc)模块可以是[csv](http://www.voip-info.org/wiki/view/Asterisk+cdr+csv)、[mysql](http://www.voip-info.org/wiki/view/Asterisk+cdr+mysql)、[pgsql](http://www.voip-info.org/wiki/view/Asterisk+cdr+pgsql)、[sqlite](http://www.voip-info.org/wiki/view/Asterisk+cdr+sqlite)等数据库。您必须配置您的**cdr.conf**（并且取决于您选择的后端，**cdr_mysql.conf**、**cdr_odbc.conf**、**cdr_pgsql.conf**以及您的后端信息，如凭据、表名等）。

 ******CDR 将默认写入一些内容，即 CDR 变量（取自[预定义的星号变量列表](http://www.voip-info.org/wiki/view/Asterisk+Detailed+Variable+List)）

> 如果通道有 cdr，则该 cdr 记录有它自己的一组变量，可以像通道变量一样访问这些变量。以下内置变量可用，除非指定，否则为只读变量。

在这一点上，你感兴趣的是：

```
${CDR(duration)}     Duration of the call.
${CDR(billsec)}  Duration of the call once it was answered.
${CDR(disposition)}  ANSWERED, NO ANSWER, BUSY 
```

当 disposition 为 ANSWER 时，**billsec**将包含计费秒数（呼叫的总“应答时间”），duration 将保存呼叫的总时间，包括未计费时间。

2) 另一方面，如果您不是询问 cdr，而是想自己编写通话持续时间，您可以使用[AGI](http://www.voip-info.org/wiki/view/Asterisk+AGI)脚本，在发出[dial()](http://www.voip-info.org/wiki/view/Asterisk+cmd+Dial)后读取**CDR(billsec)**变量，或者ANSWREDTIME （由**Dial** [()](http://www.voip-info.org/wiki/view/Asterisk+cmd+Dial)命令设置）：

```
${DIALEDTIME} * Time for the call (seconds)
${ANSWEREDTIME} * Time from dial to answer (seconds) 
```

3) 您还可以通过让[AMI](http://www.voip-info.org/wiki/view/Asterisk+manager+API)客户端监听变量 ANSWEREDTIME 的事件 VarSet 来**实现**相同**的**结果。有问题的事件将包含已设置此变量的通道。

 **因此，如果您已经有一个 AGI 脚本或您自己的控制/处理调用的 AMI 客户端，那么选项 2 和 3 显然更有用，而选项 1 更通用但可能稍微不那么灵活。

希望能帮助到你！********

# string - 创建目录时如何使用位置参数作为后缀？

> ID：11176715
> 
> 赞同：0
> 
> 时间：2012-06-24T10:32:49.863
> 
> 标签：string, bash, variables, string-concatenation

我正在编写一个小型 bash 脚本，并尝试通过以下方式创建一个目录：

`mkdir ~/deploy.$1`

我认为它应该产生 deploy.scriptFoo 或 1 美元的价值。

它只是产生“部署”。并省略 $1 变量。我已经在输出中测试了 $1 变量，并且我很肯定它正在被传递到脚本中。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:07:34.293

### The Problem

The $1 position parameter is the first argument to your script, not the name of the script itself.

### The Solution

If you want the script name, use $0\. For example, given this sample script stored in /tmp/param_test.sh:

```
#!/bin/bash
mkdir "/tmp/deploy.$(basename "$0" .sh)"
ls -d /tmp/deploy* 
```

the script ignores any arguments, but correctly returns the following output:

> /tmp/deploy.param_test

If you want to vary the name, then you have to use a positional parameter in your script *and* call the script with an argument. For example:

```
#!/bin/bash
mkdir "/tmp/deploy.$1"
ls -d /tmp/deploy* 
```

On the command line, you pass the argument to your script. For example:

```
$ bash /tmp/param_test.sh foo
/tmp/deploy.foo 
```

### See Also

[http://www.gnu.org/software/bash/manual/bashref.html#Positional-Parameters](http://www.gnu.org/software/bash/manual/bashref.html#Positional-Parameters)

# sql-server - 如何在 SQL Server 中对表的列使用 ORDER BY？

> ID：11176716
> 
> 赞同：0
> 
> 时间：2012-06-24T10:33:08.913
> 
> 标签：sql-server

我们有一个这样的表：

```
bok jel str1    str2
1   3   184 185
1   3   215 219
1   3   229 244
1   3   267 273
1   3   331 331
1   3   338 339 
```

我们要按 str1 和 str2 排序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T10:35:43.430

```
SELECT *
FROM   YourTable
ORDER  BY str1,
          str2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:54:35.187

一般做法是：

```
SELECT * 
FROM TEMP 
ORDER BY 
  STR1
  , STR2 
```

另一种可能性是 order by`STR1 + STR2`但请注意它会返回不同的结果。例如[在 SQLFiddle](http://sqlfiddle.com/#!3/44506/4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T10:46:17.293

```
Set NOCOUNT ON
select bok, jel, st1, st2 from YourTable order by str1, str2 
```

# css - 我无法使用 CSS 更改链接的颜色

> ID：11176719
> 
> 赞同：0
> 
> 时间：2012-06-24T10:33:43.980
> 
> 标签：css

这是我的链接：

```
<div id="yabnetwork">
    Bu site bir <a target="_blank" href="http://yusufalibozkir.com" title="Yusuf Ali Bozkir Network  <br/>Tel:.......... <br/>info@yusufalibozkir.com">YAB Network</a> urunudur.
</div> 
```

我的这个 div 的 CSS 样式：

```
#yabnetwork{
    font-size:15px;
    text-align:right;
}     

#yabnetwork a{
    color:red;
} 
```

为什么我的链接不是红色的？我无法改变它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T10:36:30.233

a-tag 的第一部分似乎缺少右括号和引号。：

```
Bu site bir <a target="_blank" href="http://yusufalibozkir.com" title="Yusuf Ali Bozkir Network" > <br/>Tel:.......... <br/>info@yusufalibozkir.com">YAB Network</a> urunudur. 
```

两个建议是开始使用带有颜色标记的文本编辑器并在 html-validator 中运行您的代码：http: [//validator.w3.org/](http://validator.w3.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:36:09.270

试试这种方式：

```
a:link{

color:#00CC66;

text-decoration: none

}
a:visited{

color:#ff0000;

text-decoration: none

}
a:hover{color:#f00000;

text-decoration: none

}
a:active{color:#f00000;

text-decoration: none

} 
```

链接可以有不同的状态：

*   `a:link`--> 默认

*   `a:visited`--> 如果用户已经访问过这个页面

*   `a:hover`--> 如果鼠标光标在链接上

*   `a:active`--> 如果链接代表当前显示的页面

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T10:39:15.813

它是红色的！如果标签正确关闭并且属性以 " 结尾，则应如此。

```
<html>
<head>
<title>link example</title>
<style type="text/css">
#yabnetwork a{
    color:red; 
}
</style>
</head>
<body>
<div>
<div id="yabnetwork">
    Bu site bir <a target="_blank" href="http://yusufalibozkir.com" title="Yusuf Ali Bozkir Network">  <br/>Tel:.......... <br/>info@yusufalibozkir.com">YAB Network</a> urunudur.
</div>
</div>
</body>
</html> 
```

也许您在某处覆盖了 CSS 规则？如果是，您也可以尝试 !important ：

```
#yabnetwork a{
    color:red !important; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T10:39:28.333

检查这个：

```
#yabnetwork a{
    color:red !important;
} 
```

# c# - 条件属性

> ID：11176722
> 
> 赞同：2
> 
> 时间：2012-06-24T10:34:06.743
> 
> 标签：c#, properties

我有一个基类（节点）和一些继承的类型。

```
Class Node
{
    Base_Attributes...
}

Class Derived : Node
{
    Derived_Attributes...
} 
```

这些类型位于我添加到项目中的 dll 中。还有一个类，比如说 Item，它的属性之一是 Node。我有一个 Propertygrid，我在其中显示 itme 的属性，如下所示：

```
Class Item
{
Point location;
String name;
Node quiddity;

bool[] IsBrowsable;

public Point Location{set;get;}
public String Name{set;get;}
public String NodeAttrib{set;get;}
[Browsable(IsBrowsable[thisindex])]
public String DerivedTypeAttribe{set;get;}
[Browsable(IsBrowsable[otheroneindex])]
public String DerivedTypeAttribe{set;get;}

Item(string type)
{
    switch(type)
    {
        case"some":
            Node = new derived_some();
            IsBrowsable[thisindex] = true;
            break;
    }
}
} 
```

在主窗体的某个地方：

```
propertygrid.selectedobject = item; 
```

这里的问题是派生类型指定了一些属性，我需要在propetygrid中显示它们，但是节点的类型直到运行时才知道。我尝试使用布尔数组设置 Browsabl() 属性，但结果是 Browsable Parameter 需要是一个常量值。有什么想法我怎么能通过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:55:01.027

这是通过过滤的示例`TypeDescriptor`；您当然可以更改“我如何知道要显示哪些属性”代码 - 这纯粹是说明性的：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Windows.Forms;

static class Program
{
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        PropertyGrid grid;
        using (var form = new Form
        {
            Controls = { (grid = new PropertyGrid { Dock = DockStyle.Fill}) }
        })
        {
            grid.SelectedObject = new Magic {ShowY = false};
            Application.Run(form);
        }
    }
}

[TypeConverter(typeof(MagicTypeConverter))]
public class Magic
{
    public Magic()
    {
        ShowX = ShowY = ShowZ = true;
    }

    public int A { get; set; }
    public bool B { get; set; }
    public string C { get; set; }
    public int X { get; set; }
    public bool Y { get; set; }
    public string Z { get; set; }

    [Browsable(false)]
    public bool ShowX { get; set; }
    [Browsable(false)]
    public bool ShowY { get; set; }
    [Browsable(false)]
    public bool ShowZ { get; set; }

    private class MagicTypeConverter : ExpandableObjectConverter
    {
        public override PropertyDescriptorCollection GetProperties(
             ITypeDescriptorContext context, object value,
             Attribute[] attributes)
        {
            var original = base.GetProperties(context, value, attributes);
            var list = new List<PropertyDescriptor>(original.Count);
            var magic = (Magic)value;
            foreach (PropertyDescriptor prop in original)
            {
                bool showProp = true;
                switch (prop.Name)
                {
                    case "X": showProp = magic.ShowX; break;
                    case "Y": showProp = magic.ShowY; break;
                    case "Z": showProp = magic.ShowZ; break;
                }
                if (showProp) list.Add(prop);
            }
            return new PropertyDescriptorCollection(list.ToArray());
        }
    }
} 
```

# javascript - jquery设置变量输入字段值

> ID：11176723
> 
> 赞同：1
> 
> 时间：2012-06-24T10:34:10.253
> 
> 标签：javascript, jquery

我的 HTML：

```
<input id="penge" />
<input type="button" onclick="javascript: paymentwindow.open()" value="BETAL" id="betal" /> 
```

我的 jQuery：

```
<script type="text/javascript">
$(document).ready(function(){
var penge = $("#penge").val();

            paymentwindow = new PaymentWindow({
                         'amount': penge,
                         'currency': "DKK",
                         'language': "1",
                         'orderid': "155",
                         'callbackurl': "http://localhost:3000/"
            });
});
</script> 
```

变量未定义。单击 beta 按钮时，我想设置变量 penge。

更新：

```
<script type="text/javascript">
$(document).ready(function(){
var penge;
$('#betal').click(function(){
    penge = $("#penge").val();
    paymentwindow.open();
});

            paymentwindow = new PaymentWindow({
                         'amount': penge,
                         'currency': "DKK",
                         'language': "1",
                         'orderid': "155",
                         'callbackurl': "http://localhost:3000/"
            });
});
</script> 
```

彭格未定义。我还删除了 beta 按钮的 onclick js。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T10:36:43.273

```
var penge;
$('#betal').click(function(){
    var penge = $("#penge").val();
}); 
```

[**演示**](http://jsfiddle.net/tdgM8/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T10:47:18.347

当前输入字段值为空。

在输入字段中输入一些金额，然后单击`betal`按钮。

您将收到一个警报，其中包含在输入字段中输入的值。

`penge`使用与您的值一起存储的变量来做您的事情。

```
var penge;
$('#betal').click(function(){     
    penge = $("#penge").val();     
    alert(penge);
}); 
```

## HTML：

```
<input id="penge" /> 
<input type="button" value="BETAL" id="betal" /> 
```

参考这个**[LIVE DEMO](http://jsfiddle.net/SivaCharan/F9ZVu/)**

## 更新：

我有你的问题。`paymentwindow.open();`在付款方式声明之后调用。

```
var penge;
var paymentwindow;
$('#betal').click(function(){
    var penge = $("#penge").val();
    paymentwindow = new PaymentWindow({
        amount: penge,
        currency: "DKK",
        language: "1",
        orderid: "155",
        callbackurl: 'http://localhost:3000/'
    });
    paymentwindow.open();    
}); 
```

参考这个**[LIVE DEMO 2](http://jsfiddle.net/SivaCharan/tdgM8/13/)**

# python - Python文件操作

> ID：11176724
> 
> 赞同：15
> 
> 时间：2012-06-24T10:34:27.693
> 
> 标签：python, file-io

我得到了一个错误“IOError：[Errno 0] Error”这个python程序：

```
from sys import argv
file = open("test.txt", "a+")
print file.tell() # not at the EOF place, why?
print file.read() # 1
file.write("Some stuff will be written to this file.") # 2
# there r some errs when both 1 & 2
print file.tell()
file.close() 
```

似乎是什么问题？以下这两种情况都可以：

```
from sys import argv
file = open("test.txt", "a+")
print file.tell() # not at the EOF place, why?
# print file.read() # 1
file.write("Some stuff will be written to this file.") # 2
# there r some errs when both 1 & 2
print file.tell()
file.close() 
```

和：

```
from sys import argv
file = open("test.txt", "a+")
print file.tell() # not at the EOF place, why?
print file.read() # 1
# file.write("Some stuff will be written to this file.") # 2
# there r some errs when both 1 & 2
print file.tell()
file.close() 
```

还是，为什么

```
print file.tell() # not at the EOF place, why? 
```

不打印文件的大小，“a+”是附加模式吗？那么文件指针应该指向EOF吗？

我正在使用 Windows 7 和 Python 2.7。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-24T10:42:13.467

Python 使用 stdio 的 fopen 函数并将模式作为参数传递。我假设您使用 Windows，因为@Lev 说代码在 Linux 上运行良好。

以下来自windows的[fopen](https://msdn.microsoft.com/en-us/library/yeby3zcb.aspx)文档，这可能是解决您问题的线索：

> 当指定“r+”、“w+”或“a+”访问类型时，允许读取和写入（文件被称为“更新”打开）。但是，当您在读取和写入之间切换时，必须有中间的 fflush、fsetpos、fseek 或 rewind 操作。如果需要，可以为 fsetpos 或 fseek 操作指定当前位置。

因此，解决方案是在调用`file.seek()`之前添加。`file.write()`要附加到文件末尾，请使用`file.seek(0, 2)`.

供您参考，file.seek 的工作方式如下：

> 要更改文件对象的位置，请使用 f.seek(offset, from_what)。位置是通过将偏移量添加到参考点来计算的；参考点由 from_what 参数选择。from_what 值为 0 从文件开头测量，1 使用当前文件位置，2 使用文件末尾作为参考点。from_what 可以省略，默认为 0，使用文件的开头作为参考点。

[参考：[http://docs.python.org/tutorial/inputoutput.html]](http://docs.python.org/tutorial/inputoutput.html)

正如@lvc 在评论中和@Burkhan 在他的回答中提到的那样，您可以使用[io 模块](http://docs.python.org/library/io.html)中较新的 open 函数。但是，我想指出，在这种情况下，write 函数的工作方式并不完全相同——您需要提供 unicode 字符串作为输入[只需`u`在您的情况下为字符串添加前缀 a]：

```
from io import open
fil = open('text.txt', 'a+')
fil.write('abc') # This fails
fil.write(u'abc') # This works 
```

最后，请避免使用名称 'file' 作为变量名，因为它指的是内置类型并且会被静默覆盖，导致一些难以发现的错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-24T11:41:00.267

解决方案是使用`open`from[`io`](http://docs.python.org/library/io.html)

```
D:\>python
Python 2.7.1 (r271:86832, Nov 27 2010, 18:30:46) [MSC v.1500 32 bit (Intel)] on
win32
Type "help", "copyright", "credits" or "license" for more information.
>>> f = open('file.txt','a+')
>>> f.tell()
0L
>>> f.close()
>>> from io import open
>>> f = open('file.txt','a+')
>>> f.tell()
22L 
```

# java - 如何在android中创建图像按钮？

> ID：11176727
> 
> 赞同：12
> 
> 时间：2012-06-24T10:34:50.520
> 
> 标签：java, android, button, android-activity, imagebutton

所以我是android开发的新手......如何创建一个像按钮一样的图像，所以当我按下那个图像时，图像会启动一个特定的活动。所以我希望它显示为图像：

```
 <Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="33dp"
    android:text="Button" /> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-24T10:40:04.940

创建 ImageButton 为：

**在 main.xml 中：**

```
<ImageButton android:id="@+id/ib"
    android:src="@drawable/bookmark" <-- SET BUTTON IMAGE HERE -->
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
/> 
```

**在代码部分：**

```
ImageButton ib=(ImageButton)findViewById(R.id.ib);
ib.setOnClickListener(ibLis);
    }
    private OnClickListener ibLis=new OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            //START YOUR ACTIVITY HERE AS
             Intent intent = new Intent(YOUR_CURRENT_ACTIVITY.this,NextActivity.class);
             startActivity(intent, 0);
        }
    }; 
```

**编辑：**

第二个选项，如果你想使用按钮视图创建一个类似按钮的图像，然后创建一个自定义按钮：

首先将所有图像（例如按下、聚焦和默认）放在 res/drawable 文件夹中，然后在 drawable/newbtn.xml 中添加 newbtn.xml，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>  
<selector xmlns:android="http://schemas.android.com/apk/res/android">  
    <item android:state_pressed="true"  
          android:drawable="@drawable/button_pressed" /> <!-- pressed -->  
    <item android:state_focused="true"  
          android:drawable="@drawable/button_focused" /> <!-- focused -->  
    <item android:drawable="@drawable/button_normal" /> <!-- default -->  
</selector> 
```

最后在按钮 XML 中设置`android:background`为：

```
<Button    
    android:id ="@+id/btn"  
    android:layout_width="wrap_content"   
    android:layout_height="wrap_content"   
    android:text="Hello"  
    android:textColor="#ffffffff"  
    android:background="@drawable/newbtn"   <-- get button background to selector -->
    /> 
```

请参阅本教程以使用图像创建自定义按钮

[在 Android 中创建自定义的精美按钮](http://www.thesecretpie.com/2010/07/creating-custom-fancy-buttons-in.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:37:22.940

使用 ImageView 元素，将单击侦听器附加到它。

XML：

```
<ImageView
    android:id="@+id/myImageView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/myPic" 
    /> 
```

编码：

```
ImageView imageView = (ImageView) findViewById(R.id.myImageView);
imageView.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        Intent intent = new Intent(ThisActivity.this, MyOtherActivity.class);
        startActivity(intent);
    }
}); 
```

您也可以使用 ImageButton（以相同的方式）。这几乎没有什么区别。您可以在此处查看更多详细信息。[可点击的 ImageView 和 ImageButton 的区别](https://stackoverflow.com/questions/5847136/difference-between-a-clickable-imageview-and-imagebutton)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-04T06:15:33.703

使用“setOnClickListener()”过于复杂。相反，使用 XML 中的 'onClick' 属性：

```
<ImageButton
    android:id="@+id/button19"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@android:color/transparent"
    android:onClick="yourCallback"
    android:src="@drawable/your_image"
/>

public void yourCallback(View view) 
{
    ...
} 
```

# php - 使用 array_splice/array_merge

> ID：11176737
> 
> 赞同：0
> 
> 时间：2012-06-24T10:36:20.207
> 
> 标签：php, arrays

嗨，在 array_merge 和 array_splice 中需要帮助，例如，如果数组包含 10 个元素，则在应用逻辑合并数组后需要拼接前 6 个

```
 $input = array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
 $array1 =   array_splice($input ,0, 6); // $input is now $array1 = array(1, 2, 3, 4, 5)
 // $array = unset($array1[4]); example for logic
  // how to merge $array1 to remaining array value which was spliced 
 O/P: array(1, 2, 3, 5, 6, 7, 8, 9, 10); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:57:04.937

使用`array_splice`会将您的数组分成两部分。您的输入数组已修改，然后您将获得“非拼接”值。

您可以将此特异性合并后：

```
$input = array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
$array1 = array_splice($input ,0, 6);
$array2 = array_merge($array1, $input);

var_dump($array2); 
```

请参阅`array_splice`文档上的第一个用户贡献：[http ://www.php.net/manual/en/function.array-splice.php#106244](http://www.php.net/manual/en/function.array-splice.php#106244)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T10:51:21.143

使用[array_merge($arr1, $arr2, ...)](http://www.php.net/manual/en/function.array-merge.php)合并数组。

```
$array1 = array_splice($input ,0, 6);
$array2 = $input

//do whatever you want with sub-array, and to merge them back, use:
$finalArr = array_merge($array1, $array2); 
```

其中 $array1 和 $array2 是从`array_splice(..)`

# wcf - 使用 HttpWebRequest 向 WCF 服务发送 POST 请求

> ID：11176740
> 
> 赞同：2
> 
> 时间：2012-06-24T10:37:11.313
> 
> 标签：wcf

我的服务合同

```
[ServiceContract]
public interface ITsdxService
{
    [OperationContract]
    [WebGet(UriTemplate="/GetTestCostCentre")]
    CostCentre GetTestCostCentre();

    [OperationContract]
    [WebInvoke(UriTemplate="/SetCostCentre", Method="POST")]
    string SetCostCentre(CostCentre cc);
}

public class TsdxService : ITsdxService
{
    public CostCentre GetTestCostCentre()
    {
        CostCentre cc = new CostCentre();
        cc.Code = "Test";
        cc.Name = "Test Cost Centre";
        cc.Description = new byte[] { 12, 34, 89, 240, 66, 87, 189 };
        cc.SAPStatus = "Existent";
        cc.SAPSiteFolder = "Folder1";
        return cc;
    }

    public string SetCostCentre(CostCentre cc)
    {
        return cc.Code;
    }
} 
```

然后我启动此服务并尝试从不同的应用程序使用它：

```
Uri requestUri = new Uri(textBox1.Text + "/tsdx/GetTestCostCentre");

HttpWebRequest request = WebRequest.Create(requestUri) as HttpWebRequest;
XElement root;

using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
{
    StreamReader reader = new StreamReader(response.GetResponseStream());
    root = XElement.Parse(reader.ReadToEnd());
    textBox2.Text = root.ToString();
} 
```

一切正常，我正在获取 xml 文档。但是当我尝试向该服务发送 POST 请求时遇到了问题：

```
Uri requestUri = new Uri(textBox1.Text + "/tsdx/SetCostCentre");

HttpWebRequest request = WebRequest.Create(requestUri) as HttpWebRequest;

byte[] bytes = Encoding.UTF8.GetBytes(textBox2.Text);

request.ContentLength = bytes.Length;
request.Method = "POST";

Stream dataStream = request.GetRequestStream();
dataStream.Write(bytes, 0, bytes.Length);
dataStream.Close();

using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
{
    StreamReader reader = new StreamReader(response.GetResponseStream());
    textBox2.Text = reader.ReadToEnd();
} 
```

异常：远程服务器返回错误：（400）错误请求。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T12:48:39.620

像这样更改您的客户端代码

```
byte[] bytes = Encoding.UTF8.GetBytes(@"<CostCentre xmlns=""http://schemas.datacontract.org/2004/07/WCF_BadRequestService"">
                                                      <Code>String content</Code>
                                                      <Description>QmFzZSA2NCBTdHJlYW0=</Description>
                                                      <Name>String content</Name>
                                                      <SAPSiteFolder>String content</SAPSiteFolder>
                                                      <SAPStatus>String content</SAPStatus>
                                                    </CostCentre>");

request.ContentLength = bytes.Length;
request.Method = "POST";
request.ContentType = "application/xml"; 
```

现在好了。

而且我认为Java支持WCF BasicHttpBinding，您可以使用Java提供的工具使用WCF服务以一种易于支持的方式生成Web服务代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:39:18.467

您可能想做的另一件事是扩展 ClientBase 来为您完成序列化 xml 的所有艰苦工作。特别是如果你想支持不止一种消息格式，比如 json，它会让你的生活变得更轻松，而且它会对接口编译时错误而不是运行时错误进行任何更改。

```
public class ITsdxServiceProxy : ClientBase<ITsdxService>, ITsdxService {

    #region ITsdxService Members

    public CostCentre GetTestCostCentre() {
        return Channel.GetTestCostCentre();
    }

    public string SetCostCentre(CostCentre cc) {
        return Channel.SetCostCentre(cc);
    }

    #endregion
} 
```

客户端使用

```
var proxy = new ITsdxServiceProxy();
var costCenter = proxy.GetTestCostCentre(); 
```

客户端配置

```
<system.serviceModel>
<behaviors>
  <endpointBehaviors> 
    <behavior name="web">
      <webHttp />
    </behavior>
  </endpointBehaviors>
</behaviors>
<client>

  <endpoint 
            address="Root address for rest service"
            binding="webHttpBinding"
            behaviorConfiguration="web"
            contract="FullyQualifiedNameOfInterface.ITsdxService">
  </endpoint>    

</client>
</system.serviceModel> 
```

# jquery - jQuery Accordion 仅在有子项时添加箭头

> ID：11176742
> 
> 赞同：2
> 
> 时间：2012-06-24T10:37:14.043
> 
> 标签：jquery, accordion

如果它有子项，我正在尝试将箭头添加到手风琴主标题链接，否则它将是一个链接本身来导航 url。

我正在关注本教程[http://www.designchemical.com/lab/jquery/demo/jquery_vertical_accordion_menu_using_cookies.htm](http://www.designchemical.com/lab/jquery/demo/jquery_vertical_accordion_menu_using_cookies.htm)

代码如下

```
<ul id="nav">
    <li><a href="#">Item 1</a>
        <ul>
            <li><a href="#">Sub-Item 1 a</a></li>
            <li><a href="#">Sub-Item 1 b</a></li>
            <li><a href="#">Sub-Item 1 c</a></li>
        </ul>
    </li>
    <li><a href="http:actualurl">Item 2</a></li>
    <li><a href="#">Item 3</a>
        <ul>
            <li><a href="#">Sub-Item 3 a</a></li>
            <li><a href="#">Sub-Item 3 b</a></li>
            <li><a href="#">Sub-Item 3 c</a></li>
            <li><a href="#">Sub-Item 3 d</a></li>
        </ul>
    </li>
    <li><a href="http:actualurl">Item 4</a></li>
</ul> 
```

我正在使用 jQuery 与 Wordpress 没有冲突

```
jQuery(document).ready(function () {

    var checkCookie = jQuery.cookie("nav-item");

    if (checkCookie != "") {

        jQuery('#nav > li > a:eq('+checkCookie+')').addClass('active').next().show();

    }
    jQuery('#nav > li > a').click(function(){

        var navIndex = jQuery('#nav > li > a').index(this);

        jQuery.cookie("nav-item", navIndex);
        jQuery('#nav li ul').slideUp();

        if (jQuery(this).next().is(":visible")){

            jQuery(this).next().slideUp();

        } else {

            jQuery(this).next().slideToggle();

        }

        jQuery('#nav li a').removeClass('active');
        jQuery(this).addClass('active');

    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T10:46:10.113

将此添加到您的就绪函数中

```
jQuery('#nav > li').each(function(){
    if (jQuery(this).find('ul').length > 0)
    {
        //item has children; do whatever you want
        jQuery(this).prepend('<img src="path/to/iamge.png" />');
    }

}); 
```

这是一个演示[http://jsfiddle.net/qPfhG/4/](http://jsfiddle.net/qPfhG/4/)

# c++ - 在 cpp 中重定向 stdout 输出

> ID：11176746
> 
> 赞同：1
> 
> 时间：2012-06-24T10:38:00.003
> 
> 标签：c++, windows, redirect, stdout

我这几天一直在寻找关于这个问题的答案，希望大家能够帮助我。（我已经搜索并找到了一些解决方案，但每个都有自己的问题......）。

事情是这样的：我在工作中编写一个自动化程序，它负责启动我同事编写的代码的外部“.exe”文件。当他们编写的那些程序发给客户时，我不允许对他们的代码进行任何修改。这些程序一旦启动，就会等待特定的击键，并在收到合法的击键时打印一条消息。

我的目标是：编写一个执行外部程序的程序，向其发送击键，并从其标准输出接收输出。到目前为止，我已经能够从我的程序运行程序（使用 ShellExecute），并模拟某种键盘侦听器（使用 SendMessage）到另一个程序。我可以看到它有效 - 我可以在测试程序的控制台中看到输出。

我正在尝试实时获取打印在测试程序的外壳上的消息（并且在程序终止时只获取大量数据），以便我可以在它发生时对其进行分析。

我试过的那些：

*   将具有内联输出重定向的外部批处理文件写入文本文件。
*   使用自由打开。
*   在执行“ShellExecute”时重定向输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:04:38.293

您使用标准输入、标准输出和标准错误的句柄。使用 CreateProcess 函数创建进程以获取该句柄。示例代码 - 对于您的情况不完整，但如何做到这一点的好例子：

```
#include <windows.h>
#include <stdio.h>
#include <tchar.h>

    /*for test.exe
#include <iostream>
#include <string> */

void _tmain( int argc, TCHAR *argv[] )
{
    /*for test.exe
    std::cout << "test output" << std::endl;
    for (;;)
    {
        std::string line;
        std::getline(std::cin, line);
        std::cout << "line: " << line << std::endl;
    }
    return;*/
    STARTUPINFO si;
    PROCESS_INFORMATION pi;

    ZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    ZeroMemory( &pi, sizeof(pi) );

    // Start the child process. 
    if( !CreateProcess( NULL,   // No module name (use command line)
        "test.exe",        // Command line
        NULL,           // Process handle not inheritable
        NULL,           // Thread handle not inheritable
        FALSE,          // Set handle inheritance to FALSE
        0,              // No creation flags
        NULL,           // Use parent's environment block
        NULL,           // Use parent's starting directory 
        &si,            // Pointer to STARTUPINFO structure
        &pi )           // Pointer to PROCESS_INFORMATION structure
    ) 
    {
        printf( "CreateProcess failed (%d)\n", GetLastError() );
        return;
    }

   /*     HANDLE  hStdInput;
    HANDLE  hStdOutput;
    HANDLE  hStdError;*/
    HANDLE me_hStdInput = GetStdHandle(STD_INPUT_HANDLE);
    HANDLE me_hStdOutput = GetStdHandle(STD_OUTPUT_HANDLE);
    HANDLE proc_hStdInput = si.hStdInput;
    HANDLE proc_hStdOutput = si.hStdOutput;

                char buff[64];
                DWORD chars;
    while (!ReadConsole(me_hStdInput, buff, sizeof(buff), &chars, NULL))
    {
                    for (DWORD written = 0, writtenThisTime; written < chars; written += writtenThisTime)                   
                        if (!WriteConsole(proc_hStdOutput, buff + written, chars - written, &writtenThisTime, NULL))
                        {
                            //handle error - TODO
                        }
                }
                //possibly handle error for ReadConsole - TODO  

    // Wait until child process exits.
    //WaitForSingleObject( pi.hProcess, INFINITE );

    // Close process and thread handles. 
    CloseHandle( pi.hProcess );
    CloseHandle( pi.hThread );
} 
```

# vbscript - 使用 vbscript 在网络驱动器上打开一个 pdf 文件

> ID：11176749
> 
> 赞同：0
> 
> 时间：2012-06-24T10:38:44.560
> 
> 标签：vbscript

您好我正在尝试创建一个通过 vbscript 打开各种互联网页面和程序的脚本，但是我无法打开位于网络驱动器上的 pdf 文件，我尝试了一堆命令但无法打开文件无论如何，任何帮助将不胜感激:)

```
Set IE = CreateObject("InternetExplorer.Application") 
set WshShell = WScript.CreateObject("WScript.Shell")  
IE.Navigate "https://websiteaddress.com
IE.Visible = True 
Wscript.Sleep 3000 
WshShell.SendKeys "text"
WshShell.SendKeys "{ENTER}"
Wscript.Sleep 3000
WshShell.SendKeys "text"
WshShell.Sendkeys "{TAB}"
WshShell.Sendkeys "{TAB}"
WshShell.Sendkeys "text"
WshShell.SendKeys "{ENTER}"
Wscript.Sleep 3000
WshShell.SendKeys "{TAB}"
WshShell.SendKeys "{TAB}"
WshShell.SendKeys "{ENTER}"
Wscript.Sleep 3000
WshShell.SendKeys "{TAB}"
WshShell.SendKeys "{TAB}"
WshShell.SendKeys "{TAB}"
WshShell.SendKeys "{TAB}"
WshShell.SendKeys "{ENTER}"
Wscript.Sleep 3000
WshShell.SendKeys "{TAB}"
WshShell.SendKeys "{TAB}"
WshShell.SendKeys "{TAB}"
WshShell.SendKeys "{TAB}"
WshShell.SendKeys "{TAB}"
WshShell.SendKeys "{TAB}"
WshShell.SendKeys "{ENTER}"
Wscript.Sleep 3000
WshShell.SendKeys "%{TAB}"
WshShell.SendKeys "%{F4}"
Wscript.Sleep 3000
WshShell.SendKeys "%{TAB}"
IE.Navigate "https://websiteaddress.com"
IE.Visible = True 
Wscript.Sleep 3000
WshShell.SendKeys "text"
WshShell.SendKeys "{ENTER}"
Wscript.Sleep 3000
WshShell.Run "H:\Shortcuts /k dir *.*"
WshShell.Run "Notepad.exe"
Wscript.Sleep 3000
WshShell.Run "calc.exe" 
```

我对 vbscripting 很陌生，但我尝试了以下两行，但都不起作用；

```
WshShell.Run "G:\pathtofile\thepdf.pdf"

WshShell.Run "NET USE G: \\server\share\thepdf.pdf" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T21:49:28.743

令我惊讶的是，您是 vbscript 的新手，却选择了那种语言来做这些事情，vbscript 不太适合这种工作，而且 vbscript 的日子已经算多了，如果您想使用程序语言，ruby 会是更好的选择如果你只是想自动化你最好使用[http://www.autohotkey.com/](http://www.autohotkey.com/)

无论如何，像这样它应该在 vbscript 中工作。"" 表示字符串中的单个 "。

```
Set WshShell = CreateObject("WScript.Shell")
WshShell.Run """g:\path with spaces\thepdf.pdf""" 
```

# php - 将命名的 HTML 实体转换为数字的 HTML 实体

> ID：11176752
> 
> 赞同：22
> 
> 时间：2012-06-24T10:39:07.363
> 
> 标签：php, unicode, html-entities

是否有一个 PHP 函数可以将命名的 HTML 实体转换为它们各自的数字 HTML 实体？

例如：

```
$str = "Oggi &egrave; un bel&nbsp;giorno";
echo entities_to_unicode($str); // Oggi &#232; un bel&#160;giorno 
```

在此先感谢，祝您有美好的一天！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-24T18:00:08.820

您正在寻找一个从命名 HTML 实体到对应数字的简单转换函数。

这可以通过使用转换表（即数组）和字符串转换函数 ( [`strtr`](http://php.net/strtr)) 来完成：

```
$translated = strtr($string, $HTML401NamedToNumeric); 
```

这适用于`$string`UTF-8 编码或单字节字符集。

上面使用的 W3C 指定的 HTML 4.01 命名实体的示例数组如下。它包含 252 个实体。如果你想支持 XHTML，那么还有一个（我放在最后）：

```
$HTML401NamedToNumeric = array(
    '&nbsp;'     => '&#160;',  # no-break space = non-breaking space, U+00A0 ISOnum
    '&iexcl;'    => '&#161;',  # inverted exclamation mark, U+00A1 ISOnum
    '&cent;'     => '&#162;',  # cent sign, U+00A2 ISOnum
    '&pound;'    => '&#163;',  # pound sign, U+00A3 ISOnum
    '&curren;'   => '&#164;',  # currency sign, U+00A4 ISOnum
    '&yen;'      => '&#165;',  # yen sign = yuan sign, U+00A5 ISOnum
    '&brvbar;'   => '&#166;',  # broken bar = broken vertical bar, U+00A6 ISOnum
    '&sect;'     => '&#167;',  # section sign, U+00A7 ISOnum
    '&uml;'      => '&#168;',  # diaeresis = spacing diaeresis, U+00A8 ISOdia
    '&copy;'     => '&#169;',  # copyright sign, U+00A9 ISOnum
    '&ordf;'     => '&#170;',  # feminine ordinal indicator, U+00AA ISOnum
    '&laquo;'    => '&#171;',  # left-pointing double angle quotation mark = left pointing guillemet, U+00AB ISOnum
    '&not;'      => '&#172;',  # not sign, U+00AC ISOnum
    '&shy;'      => '&#173;',  # soft hyphen = discretionary hyphen, U+00AD ISOnum
    '&reg;'      => '&#174;',  # registered sign = registered trade mark sign, U+00AE ISOnum
    '&macr;'     => '&#175;',  # macron = spacing macron = overline = APL overbar, U+00AF ISOdia
    '&deg;'      => '&#176;',  # degree sign, U+00B0 ISOnum
    '&plusmn;'   => '&#177;',  # plus-minus sign = plus-or-minus sign, U+00B1 ISOnum
    '&sup2;'     => '&#178;',  # superscript two = superscript digit two = squared, U+00B2 ISOnum
    '&sup3;'     => '&#179;',  # superscript three = superscript digit three = cubed, U+00B3 ISOnum
    '&acute;'    => '&#180;',  # acute accent = spacing acute, U+00B4 ISOdia
    '&micro;'    => '&#181;',  # micro sign, U+00B5 ISOnum
    '&para;'     => '&#182;',  # pilcrow sign = paragraph sign, U+00B6 ISOnum
    '&middot;'   => '&#183;',  # middle dot = Georgian comma = Greek middle dot, U+00B7 ISOnum
    '&cedil;'    => '&#184;',  # cedilla = spacing cedilla, U+00B8 ISOdia
    '&sup1;'     => '&#185;',  # superscript one = superscript digit one, U+00B9 ISOnum
    '&ordm;'     => '&#186;',  # masculine ordinal indicator, U+00BA ISOnum
    '&raquo;'    => '&#187;',  # right-pointing double angle quotation mark = right pointing guillemet, U+00BB ISOnum
    '&frac14;'   => '&#188;',  # vulgar fraction one quarter = fraction one quarter, U+00BC ISOnum
    '&frac12;'   => '&#189;',  # vulgar fraction one half = fraction one half, U+00BD ISOnum
    '&frac34;'   => '&#190;',  # vulgar fraction three quarters = fraction three quarters, U+00BE ISOnum
    '&iquest;'   => '&#191;',  # inverted question mark = turned question mark, U+00BF ISOnum
    '&Agrave;'   => '&#192;',  # latin capital letter A with grave = latin capital letter A grave, U+00C0 ISOlat1
    '&Aacute;'   => '&#193;',  # latin capital letter A with acute, U+00C1 ISOlat1
    '&Acirc;'    => '&#194;',  # latin capital letter A with circumflex, U+00C2 ISOlat1
    '&Atilde;'   => '&#195;',  # latin capital letter A with tilde, U+00C3 ISOlat1
    '&Auml;'     => '&#196;',  # latin capital letter A with diaeresis, U+00C4 ISOlat1
    '&Aring;'    => '&#197;',  # latin capital letter A with ring above = latin capital letter A ring, U+00C5 ISOlat1
    '&AElig;'    => '&#198;',  # latin capital letter AE = latin capital ligature AE, U+00C6 ISOlat1
    '&Ccedil;'   => '&#199;',  # latin capital letter C with cedilla, U+00C7 ISOlat1
    '&Egrave;'   => '&#200;',  # latin capital letter E with grave, U+00C8 ISOlat1
    '&Eacute;'   => '&#201;',  # latin capital letter E with acute, U+00C9 ISOlat1
    '&Ecirc;'    => '&#202;',  # latin capital letter E with circumflex, U+00CA ISOlat1
    '&Euml;'     => '&#203;',  # latin capital letter E with diaeresis, U+00CB ISOlat1
    '&Igrave;'   => '&#204;',  # latin capital letter I with grave, U+00CC ISOlat1
    '&Iacute;'   => '&#205;',  # latin capital letter I with acute, U+00CD ISOlat1
    '&Icirc;'    => '&#206;',  # latin capital letter I with circumflex, U+00CE ISOlat1
    '&Iuml;'     => '&#207;',  # latin capital letter I with diaeresis, U+00CF ISOlat1
    '&ETH;'      => '&#208;',  # latin capital letter ETH, U+00D0 ISOlat1
    '&Ntilde;'   => '&#209;',  # latin capital letter N with tilde, U+00D1 ISOlat1
    '&Ograve;'   => '&#210;',  # latin capital letter O with grave, U+00D2 ISOlat1
    '&Oacute;'   => '&#211;',  # latin capital letter O with acute, U+00D3 ISOlat1
    '&Ocirc;'    => '&#212;',  # latin capital letter O with circumflex, U+00D4 ISOlat1
    '&Otilde;'   => '&#213;',  # latin capital letter O with tilde, U+00D5 ISOlat1
    '&Ouml;'     => '&#214;',  # latin capital letter O with diaeresis, U+00D6 ISOlat1
    '&times;'    => '&#215;',  # multiplication sign, U+00D7 ISOnum
    '&Oslash;'   => '&#216;',  # latin capital letter O with stroke = latin capital letter O slash, U+00D8 ISOlat1
    '&Ugrave;'   => '&#217;',  # latin capital letter U with grave, U+00D9 ISOlat1
    '&Uacute;'   => '&#218;',  # latin capital letter U with acute, U+00DA ISOlat1
    '&Ucirc;'    => '&#219;',  # latin capital letter U with circumflex, U+00DB ISOlat1
    '&Uuml;'     => '&#220;',  # latin capital letter U with diaeresis, U+00DC ISOlat1
    '&Yacute;'   => '&#221;',  # latin capital letter Y with acute, U+00DD ISOlat1
    '&THORN;'    => '&#222;',  # latin capital letter THORN, U+00DE ISOlat1
    '&szlig;'    => '&#223;',  # latin small letter sharp s = ess-zed, U+00DF ISOlat1
    '&agrave;'   => '&#224;',  # latin small letter a with grave = latin small letter a grave, U+00E0 ISOlat1
    '&aacute;'   => '&#225;',  # latin small letter a with acute, U+00E1 ISOlat1
    '&acirc;'    => '&#226;',  # latin small letter a with circumflex, U+00E2 ISOlat1
    '&atilde;'   => '&#227;',  # latin small letter a with tilde, U+00E3 ISOlat1
    '&auml;'     => '&#228;',  # latin small letter a with diaeresis, U+00E4 ISOlat1
    '&aring;'    => '&#229;',  # latin small letter a with ring above = latin small letter a ring, U+00E5 ISOlat1
    '&aelig;'    => '&#230;',  # latin small letter ae = latin small ligature ae, U+00E6 ISOlat1
    '&ccedil;'   => '&#231;',  # latin small letter c with cedilla, U+00E7 ISOlat1
    '&egrave;'   => '&#232;',  # latin small letter e with grave, U+00E8 ISOlat1
    '&eacute;'   => '&#233;',  # latin small letter e with acute, U+00E9 ISOlat1
    '&ecirc;'    => '&#234;',  # latin small letter e with circumflex, U+00EA ISOlat1
    '&euml;'     => '&#235;',  # latin small letter e with diaeresis, U+00EB ISOlat1
    '&igrave;'   => '&#236;',  # latin small letter i with grave, U+00EC ISOlat1
    '&iacute;'   => '&#237;',  # latin small letter i with acute, U+00ED ISOlat1
    '&icirc;'    => '&#238;',  # latin small letter i with circumflex, U+00EE ISOlat1
    '&iuml;'     => '&#239;',  # latin small letter i with diaeresis, U+00EF ISOlat1
    '&eth;'      => '&#240;',  # latin small letter eth, U+00F0 ISOlat1
    '&ntilde;'   => '&#241;',  # latin small letter n with tilde, U+00F1 ISOlat1
    '&ograve;'   => '&#242;',  # latin small letter o with grave, U+00F2 ISOlat1
    '&oacute;'   => '&#243;',  # latin small letter o with acute, U+00F3 ISOlat1
    '&ocirc;'    => '&#244;',  # latin small letter o with circumflex, U+00F4 ISOlat1
    '&otilde;'   => '&#245;',  # latin small letter o with tilde, U+00F5 ISOlat1
    '&ouml;'     => '&#246;',  # latin small letter o with diaeresis, U+00F6 ISOlat1
    '&divide;'   => '&#247;',  # division sign, U+00F7 ISOnum
    '&oslash;'   => '&#248;',  # latin small letter o with stroke, = latin small letter o slash, U+00F8 ISOlat1
    '&ugrave;'   => '&#249;',  # latin small letter u with grave, U+00F9 ISOlat1
    '&uacute;'   => '&#250;',  # latin small letter u with acute, U+00FA ISOlat1
    '&ucirc;'    => '&#251;',  # latin small letter u with circumflex, U+00FB ISOlat1
    '&uuml;'     => '&#252;',  # latin small letter u with diaeresis, U+00FC ISOlat1
    '&yacute;'   => '&#253;',  # latin small letter y with acute, U+00FD ISOlat1
    '&thorn;'    => '&#254;',  # latin small letter thorn, U+00FE ISOlat1
    '&yuml;'     => '&#255;',  # latin small letter y with diaeresis, U+00FF ISOlat1
    '&fnof;'     => '&#402;',  # latin small f with hook = function = florin, U+0192 ISOtech
    '&Alpha;'    => '&#913;',  # greek capital letter alpha, U+0391
    '&Beta;'     => '&#914;',  # greek capital letter beta, U+0392
    '&Gamma;'    => '&#915;',  # greek capital letter gamma, U+0393 ISOgrk3
    '&Delta;'    => '&#916;',  # greek capital letter delta, U+0394 ISOgrk3
    '&Epsilon;'  => '&#917;',  # greek capital letter epsilon, U+0395
    '&Zeta;'     => '&#918;',  # greek capital letter zeta, U+0396
    '&Eta;'      => '&#919;',  # greek capital letter eta, U+0397
    '&Theta;'    => '&#920;',  # greek capital letter theta, U+0398 ISOgrk3
    '&Iota;'     => '&#921;',  # greek capital letter iota, U+0399
    '&Kappa;'    => '&#922;',  # greek capital letter kappa, U+039A
    '&Lambda;'   => '&#923;',  # greek capital letter lambda, U+039B ISOgrk3
    '&Mu;'       => '&#924;',  # greek capital letter mu, U+039C
    '&Nu;'       => '&#925;',  # greek capital letter nu, U+039D
    '&Xi;'       => '&#926;',  # greek capital letter xi, U+039E ISOgrk3
    '&Omicron;'  => '&#927;',  # greek capital letter omicron, U+039F
    '&Pi;'       => '&#928;',  # greek capital letter pi, U+03A0 ISOgrk3
    '&Rho;'      => '&#929;',  # greek capital letter rho, U+03A1
    '&Sigma;'    => '&#931;',  # greek capital letter sigma, U+03A3 ISOgrk3
    '&Tau;'      => '&#932;',  # greek capital letter tau, U+03A4
    '&Upsilon;'  => '&#933;',  # greek capital letter upsilon, U+03A5 ISOgrk3
    '&Phi;'      => '&#934;',  # greek capital letter phi, U+03A6 ISOgrk3
    '&Chi;'      => '&#935;',  # greek capital letter chi, U+03A7
    '&Psi;'      => '&#936;',  # greek capital letter psi, U+03A8 ISOgrk3
    '&Omega;'    => '&#937;',  # greek capital letter omega, U+03A9 ISOgrk3
    '&alpha;'    => '&#945;',  # greek small letter alpha, U+03B1 ISOgrk3
    '&beta;'     => '&#946;',  # greek small letter beta, U+03B2 ISOgrk3
    '&gamma;'    => '&#947;',  # greek small letter gamma, U+03B3 ISOgrk3
    '&delta;'    => '&#948;',  # greek small letter delta, U+03B4 ISOgrk3
    '&epsilon;'  => '&#949;',  # greek small letter epsilon, U+03B5 ISOgrk3
    '&zeta;'     => '&#950;',  # greek small letter zeta, U+03B6 ISOgrk3
    '&eta;'      => '&#951;',  # greek small letter eta, U+03B7 ISOgrk3
    '&theta;'    => '&#952;',  # greek small letter theta, U+03B8 ISOgrk3
    '&iota;'     => '&#953;',  # greek small letter iota, U+03B9 ISOgrk3
    '&kappa;'    => '&#954;',  # greek small letter kappa, U+03BA ISOgrk3
    '&lambda;'   => '&#955;',  # greek small letter lambda, U+03BB ISOgrk3
    '&mu;'       => '&#956;',  # greek small letter mu, U+03BC ISOgrk3
    '&nu;'       => '&#957;',  # greek small letter nu, U+03BD ISOgrk3
    '&xi;'       => '&#958;',  # greek small letter xi, U+03BE ISOgrk3
    '&omicron;'  => '&#959;',  # greek small letter omicron, U+03BF NEW
    '&pi;'       => '&#960;',  # greek small letter pi, U+03C0 ISOgrk3
    '&rho;'      => '&#961;',  # greek small letter rho, U+03C1 ISOgrk3
    '&sigmaf;'   => '&#962;',  # greek small letter final sigma, U+03C2 ISOgrk3
    '&sigma;'    => '&#963;',  # greek small letter sigma, U+03C3 ISOgrk3
    '&tau;'      => '&#964;',  # greek small letter tau, U+03C4 ISOgrk3
    '&upsilon;'  => '&#965;',  # greek small letter upsilon, U+03C5 ISOgrk3
    '&phi;'      => '&#966;',  # greek small letter phi, U+03C6 ISOgrk3
    '&chi;'      => '&#967;',  # greek small letter chi, U+03C7 ISOgrk3
    '&psi;'      => '&#968;',  # greek small letter psi, U+03C8 ISOgrk3
    '&omega;'    => '&#969;',  # greek small letter omega, U+03C9 ISOgrk3
    '&thetasym;' => '&#977;',  # greek small letter theta symbol, U+03D1 NEW
    '&upsih;'    => '&#978;',  # greek upsilon with hook symbol, U+03D2 NEW
    '&piv;'      => '&#982;',  # greek pi symbol, U+03D6 ISOgrk3
    '&bull;'     => '&#8226;', # bullet = black small circle, U+2022 ISOpub
    '&hellip;'   => '&#8230;', # horizontal ellipsis = three dot leader, U+2026 ISOpub
    '&prime;'    => '&#8242;', # prime = minutes = feet, U+2032 ISOtech
    '&Prime;'    => '&#8243;', # double prime = seconds = inches, U+2033 ISOtech
    '&oline;'    => '&#8254;', # overline = spacing overscore, U+203E NEW
    '&frasl;'    => '&#8260;', # fraction slash, U+2044 NEW
    '&weierp;'   => '&#8472;', # script capital P = power set = Weierstrass p, U+2118 ISOamso
    '&image;'    => '&#8465;', # blackletter capital I = imaginary part, U+2111 ISOamso
    '&real;'     => '&#8476;', # blackletter capital R = real part symbol, U+211C ISOamso
    '&trade;'    => '&#8482;', # trade mark sign, U+2122 ISOnum
    '&alefsym;'  => '&#8501;', # alef symbol = first transfinite cardinal, U+2135 NEW
    '&larr;'     => '&#8592;', # leftwards arrow, U+2190 ISOnum
    '&uarr;'     => '&#8593;', # upwards arrow, U+2191 ISOnum
    '&rarr;'     => '&#8594;', # rightwards arrow, U+2192 ISOnum
    '&darr;'     => '&#8595;', # downwards arrow, U+2193 ISOnum
    '&harr;'     => '&#8596;', # left right arrow, U+2194 ISOamsa
    '&crarr;'    => '&#8629;', # downwards arrow with corner leftwards = carriage return, U+21B5 NEW
    '&lArr;'     => '&#8656;', # leftwards double arrow, U+21D0 ISOtech
    '&uArr;'     => '&#8657;', # upwards double arrow, U+21D1 ISOamsa
    '&rArr;'     => '&#8658;', # rightwards double arrow, U+21D2 ISOtech
    '&dArr;'     => '&#8659;', # downwards double arrow, U+21D3 ISOamsa
    '&hArr;'     => '&#8660;', # left right double arrow, U+21D4 ISOamsa
    '&forall;'   => '&#8704;', # for all, U+2200 ISOtech
    '&part;'     => '&#8706;', # partial differential, U+2202 ISOtech
    '&exist;'    => '&#8707;', # there exists, U+2203 ISOtech
    '&empty;'    => '&#8709;', # empty set = null set = diameter, U+2205 ISOamso
    '&nabla;'    => '&#8711;', # nabla = backward difference, U+2207 ISOtech
    '&isin;'     => '&#8712;', # element of, U+2208 ISOtech
    '&notin;'    => '&#8713;', # not an element of, U+2209 ISOtech
    '&ni;'       => '&#8715;', # contains as member, U+220B ISOtech
    '&prod;'     => '&#8719;', # n-ary product = product sign, U+220F ISOamsb
    '&sum;'      => '&#8721;', # n-ary sumation, U+2211 ISOamsb
    '&minus;'    => '&#8722;', # minus sign, U+2212 ISOtech
    '&lowast;'   => '&#8727;', # asterisk operator, U+2217 ISOtech
    '&radic;'    => '&#8730;', # square root = radical sign, U+221A ISOtech
    '&prop;'     => '&#8733;', # proportional to, U+221D ISOtech
    '&infin;'    => '&#8734;', # infinity, U+221E ISOtech
    '&ang;'      => '&#8736;', # angle, U+2220 ISOamso
    '&and;'      => '&#8743;', # logical and = wedge, U+2227 ISOtech
    '&or;'       => '&#8744;', # logical or = vee, U+2228 ISOtech
    '&cap;'      => '&#8745;', # intersection = cap, U+2229 ISOtech
    '&cup;'      => '&#8746;', # union = cup, U+222A ISOtech
    '&int;'      => '&#8747;', # integral, U+222B ISOtech
    '&there4;'   => '&#8756;', # therefore, U+2234 ISOtech
    '&sim;'      => '&#8764;', # tilde operator = varies with = similar to, U+223C ISOtech
    '&cong;'     => '&#8773;', # approximately equal to, U+2245 ISOtech
    '&asymp;'    => '&#8776;', # almost equal to = asymptotic to, U+2248 ISOamsr
    '&ne;'       => '&#8800;', # not equal to, U+2260 ISOtech
    '&equiv;'    => '&#8801;', # identical to, U+2261 ISOtech
    '&le;'       => '&#8804;', # less-than or equal to, U+2264 ISOtech
    '&ge;'       => '&#8805;', # greater-than or equal to, U+2265 ISOtech
    '&sub;'      => '&#8834;', # subset of, U+2282 ISOtech
    '&sup;'      => '&#8835;', # superset of, U+2283 ISOtech
    '&nsub;'     => '&#8836;', # not a subset of, U+2284 ISOamsn
    '&sube;'     => '&#8838;', # subset of or equal to, U+2286 ISOtech
    '&supe;'     => '&#8839;', # superset of or equal to, U+2287 ISOtech
    '&oplus;'    => '&#8853;', # circled plus = direct sum, U+2295 ISOamsb
    '&otimes;'   => '&#8855;', # circled times = vector product, U+2297 ISOamsb
    '&perp;'     => '&#8869;', # up tack = orthogonal to = perpendicular, U+22A5 ISOtech
    '&sdot;'     => '&#8901;', # dot operator, U+22C5 ISOamsb
    '&lceil;'    => '&#8968;', # left ceiling = apl upstile, U+2308 ISOamsc
    '&rceil;'    => '&#8969;', # right ceiling, U+2309 ISOamsc
    '&lfloor;'   => '&#8970;', # left floor = apl downstile, U+230A ISOamsc
    '&rfloor;'   => '&#8971;', # right floor, U+230B ISOamsc
    '&lang;'     => '&#9001;', # left-pointing angle bracket = bra, U+2329 ISOtech
    '&rang;'     => '&#9002;', # right-pointing angle bracket = ket, U+232A ISOtech
    '&loz;'      => '&#9674;', # lozenge, U+25CA ISOpub
    '&spades;'   => '&#9824;', # black spade suit, U+2660 ISOpub
    '&clubs;'    => '&#9827;', # black club suit = shamrock, U+2663 ISOpub
    '&hearts;'   => '&#9829;', # black heart suit = valentine, U+2665 ISOpub
    '&diams;'    => '&#9830;', # black diamond suit, U+2666 ISOpub
    '&quot;'     => '&#34;',   # quotation mark = APL quote, U+0022 ISOnum
    '&amp;'      => '&#38;',   # ampersand, U+0026 ISOnum
    '&lt;'       => '&#60;',   # less-than sign, U+003C ISOnum
    '&gt;'       => '&#62;',   # greater-than sign, U+003E ISOnum
    '&OElig;'    => '&#338;',  # latin capital ligature OE, U+0152 ISOlat2
    '&oelig;'    => '&#339;',  # latin small ligature oe, U+0153 ISOlat2
    '&Scaron;'   => '&#352;',  # latin capital letter S with caron, U+0160 ISOlat2
    '&scaron;'   => '&#353;',  # latin small letter s with caron, U+0161 ISOlat2
    '&Yuml;'     => '&#376;',  # latin capital letter Y with diaeresis, U+0178 ISOlat2
    '&circ;'     => '&#710;',  # modifier letter circumflex accent, U+02C6 ISOpub
    '&tilde;'    => '&#732;',  # small tilde, U+02DC ISOdia
    '&ensp;'     => '&#8194;', # en space, U+2002 ISOpub
    '&emsp;'     => '&#8195;', # em space, U+2003 ISOpub
    '&thinsp;'   => '&#8201;', # thin space, U+2009 ISOpub
    '&zwnj;'     => '&#8204;', # zero width non-joiner, U+200C NEW RFC 2070
    '&zwj;'      => '&#8205;', # zero width joiner, U+200D NEW RFC 2070
    '&lrm;'      => '&#8206;', # left-to-right mark, U+200E NEW RFC 2070
    '&rlm;'      => '&#8207;', # right-to-left mark, U+200F NEW RFC 2070
    '&ndash;'    => '&#8211;', # en dash, U+2013 ISOpub
    '&mdash;'    => '&#8212;', # em dash, U+2014 ISOpub
    '&lsquo;'    => '&#8216;', # left single quotation mark, U+2018 ISOnum
    '&rsquo;'    => '&#8217;', # right single quotation mark, U+2019 ISOnum
    '&sbquo;'    => '&#8218;', # single low-9 quotation mark, U+201A NEW
    '&ldquo;'    => '&#8220;', # left double quotation mark, U+201C ISOnum
    '&rdquo;'    => '&#8221;', # right double quotation mark, U+201D ISOnum
    '&bdquo;'    => '&#8222;', # double low-9 quotation mark, U+201E NEW
    '&dagger;'   => '&#8224;', # dagger, U+2020 ISOpub
    '&Dagger;'   => '&#8225;', # double dagger, U+2021 ISOpub
    '&permil;'   => '&#8240;', # per mille sign, U+2030 ISOtech
    '&lsaquo;'   => '&#8249;', # single left-pointing angle quotation mark, U+2039 ISO proposed
    '&rsaquo;'   => '&#8250;', # single right-pointing angle quotation mark, U+203A ISO proposed
    '&euro;'     => '&#8364;', # euro sign, U+20AC NEW
); 
```

还有一个用于 XHTML：

```
 '&apos;'     => '&#39;',   # apostrophe = APL quote, U+0027 ISOnum 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-24T14:10:57.300

此解决方案基于[php.net](http://www.php.net/manual/en/function.html-entity-decode.php#104617)中的代码：

```
function entities_to_unicode($str) {
    $str = html_entity_decode($str, ENT_QUOTES, 'UTF-8');
    $str = preg_replace_callback("/(&#[0-9]+;)/", function($m) { return mb_convert_encoding($m[1], "UTF-8", "HTML-ENTITIES"); }, $str);
    return $str;
}

$str = 'Oggi &egrave; un bel&nbsp;giorno';
echo entities_to_unicode($str); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-06T14:36:19.510

这个

1.  不需要枚举用户代码中的实体，
2.  适用于包含命名实体的 HTML 代码（粗鲁地将 html_entity_decode 应用于整个字符串会弄乱 < 和 >（转换的 < 和 >）和 HTML 标记开始/结束）：

这里是

```
function htmlent2xml($s) {
    return preg_replace_callback("/(&[a-zA-Z][a-zA-Z0-9]*;)/",function($m){
       $c = html_entity_decode($m[0],ENT_HTML5,"UTF-8");
       # return htmlentities($c,ENT_XML1,"UTF-8"); -- see update below

       $convmap = array(0x80, 0xffff, 0, 0xffff);
       return mb_encode_numericentity($c, $convmap, 'UTF-8');
    },$s);
} 
```

upd：根据 Carlos 的评论，建议的解决方案是使用[此](https://stackoverflow.com/a/7608748/6932612)答案修复以获得所需的数字实体。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-24T10:41:55.150

```
echo preg_replace('/[^!-%\x27-;=?-~ ]/e', '"&#".ord("$0").";"', html_entity_decode($str)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T13:01:47.063

首先使用[html_entity_decode](http://php.net/html_entity_decode)获取源代码的未编码版本。如有必要，将第三个参数（编码）设置为适当的值。

然后在该源代码上使用[utf8_encode 。](http://php.net/utf8_encode)

```
$source_code_without_entities = html_entity_decode($source_code_with_entities);
$utf8_source_code = utf8_encode($source_code_without_entities); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-06-27T20:08:09.943

@hakre 提供的答案是唯一真正能解决所提出问题的答案。有趣的是，所有其他答案，包括被接受的答案，都不起作用。顺便说一句，接受的答案并没有真正做任何事情！其他人至少做了一些事情，但这是错误的。试图回答的人，似乎不明白作者想要的是将命名实体转换为他们的数字对应物。

以下是我的贡献，基于 PHP 文档 ( [https://www.php.net/manual/pt_BR/function.htmlentities.php#106535](https://www.php.net/manual/pt_BR/function.htmlentities.php#106535) )的评论

```
function xmlentities($aString) {
    $validChars = "A-Z0-9a-z\s_-";
    $twoChars = null;
    return preg_replace_callback("/[^$validChars]/"
    // Utilizar use(&$twoChars) faz com que $twoChars seja visível dentro da 
    // função anônima. É necessário usar o "&" se se pretende alterar o 
    // valor desta variável 
                                ,function ($aMatches) use(&$twoChars) { 
                                    $oneChar = $aMatches[0];
                                    switch($oneChar) {
    // Realiza substituições diretas. No caso, substitui as entidades que o 
    // XML reconhece. Eu poderia ter usado uma função do próprio PHP para 
    // isso, mas resolvi não usar porque são só 5 caracteres a substituir
                                        case "'": return "&apos;";
                                        case '"': return "&quot;";
                                        case '&': return "&amp;";
                                        case '<': return "&lt;";
                                        case '>': return "&gt;";
    // Caso não seja uma entidade reconhecida pelo xml, tratamentos 
    // especiais são necessários para identificar estamos lidadando com 
    // caracteres ISO-8859-1 ou UTF-8
                                        default: 
    // A tabela UTF-8 estende de forma compatível a tabela ASCII. Os 
    // primeiros 127 caracteres tem 1 byte e todos os demais tem dois bytes.
    // Os caracteres UTF-8 com 2 bytes começam com C2 (194) e seguem a 
    // sequência até chegar em CF (207). A condição abaixo detecta a 
    // existência de um destes bytes, que identificam um caractere UTF-8\. 
    // Neste caso, se deve acumular ele numa variável com o intuito de,
    // posteriormente realizar a conversão de dois bytes e obter um único 
    // byte ISO-8859-1\. Nesta primeira condição, há apenas o acúmulo na 
    // variável. Nada é retornado
                                            if (194 <= ord($oneChar) && ord($oneChar) <= 207) { 
                                                $twoChars = $oneChar;
                                                return;
    // Caso $twoChars contenha um valor, é porque em um passo anterior ele 
    // foi preenchido com o primeiro caractere de um par UTF-8\. Neste caso 
    // devemos concatenar o segundo para, convertê-los para ISO-8859-1 e 
    // atribuir null à variável de controle ($twoChars). Em seguida, 
    // retornamos a saída formatada com o ordinal do caractere na tabela 
    // ISO-8859-1
                                            } else if ($twoChars) { 
                                                $twoChars .= $oneChar;
                                                $ansiChar = utf8_decode($twoChars);
                                                $twoChars = null;
                                                return "&#" . str_pad(ord($ansiChar), 3, "0", STR_PAD_LEFT) . ";";
    // Caso a string informada no argumento $aString da função já esteja 
    // codificada em ISO-88959-1, todos os seus caracteres terão 1 byte e 
    // neste caso, basta formatar diretamente este byte
                                            } else {
                                                return "&#" . str_pad(ord($oneChar), 3, "0", STR_PAD_LEFT) . ";";       
                                            }
                                    }
                                }
                                ,$aString);
} 
```

我的版本带有注释（使用谷歌翻译），并且只能处理“原始”字符串，没有实体（& xxx;），所以要使用它，如果你的字符串有命名实体，首先将其转换为原始形式：

```
$text = "Oggi &egrave; un bel&nbsp;giorno";

$text = html_entity_decode($text,ENT_QUOTES || ENT_HTML5,"UTF-8");

$text = xmlentities($text);

echo($text); // Output = Oggi &#232; un bel&#160;giorno 
```

# iphone - iphone：一段时间后停止使用后台定位服务

> ID：11176755
> 
> 赞同：2
> 
> 时间：2012-06-24T10:39:24.403
> 
> 标签：iphone, ios, geolocation, location, locationmanager

我正在尝试获取一个位置并将其与在线位置进行比较所有在后台发生的我创建的方法使用后台位置服务工作正常但大约一分钟后状态栏中的位置图标消失并且该方法不再被调用

这是代码

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation {

    double  lat = newLocation.coordinate.latitude;
    double  lon = newLocation.coordinate.longitude;
    NSURL * locationURL = [NSURL URLWithString:[NSString stringWithFormat:@"http://somedomainname.com/iphoneLocation?lat=%f&lon=%f",lat,lon]];
    NSData * responseData = [NSData dataWithContentsOfURL:locationURL];
    NSString* aStr;
    aStr = [[NSString alloc] initWithData:responseData encoding:NSASCIIStringEncoding];

    if ([aStr isEqualToString:@"out Of Any Knowen Range"] ){
            UILocalNotification *notify =[[UILocalNotification alloc] init];
            notify.alertAction = [[NSString alloc] initWithString: @"View"];
            notify.fireDate=nil;
            notify.alertBody = [NSString stringWithFormat:@"New Data Occured"];
            notify.soundName = UILocalNotificationDefaultSoundName;
            NSLog(@"Local notification should display");
            [[UIApplication sharedApplication] presentLocalNotificationNow:notify];
        }

} 
```

在 viewDid 加载中我正在使用类似这样的东西

```
locationManager = [[CLLocationManager alloc] init];

    locationManager.desiredAccuracy = kCLLocationAccuracyBest;

    locationManager.delegate = self;

    [locationManager startUpdatingLocation];

    CLLocation *userLocation = [locationManager location]; 
```

那有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:45:52.173

您需要修改**AppName-Info.plist**文件，方法是添加一个`Required background modes`带有 value 项的键`App registers for location updates`。我认为您在在线连接时应该做的另一件事可能不会很快发生，因此您在线连接、发布位置和等待响应的操作应该在另一个线程中开始，同时如果您从`CLLocationManager`您的先前的请求尚未完成，请跳过发布新位置...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:04:59.520

我想知道位置管理器是否正在某个地方发布，因此不再发送任何更新。

您是否尝试过将位置管理器设置为视图控制器中的保留属性？

```
@property (nonatomic, strong) CLLocationManager *locationManager 
```

# html - 输入类型编号的跨浏览器样式，使得它们不会超过必要的长度

> ID：11176759
> 
> 赞同：2
> 
> 时间：2012-06-24T10:40:09.450
> 
> 标签：html, css, cross-browser

我有几个不同长度的数字输入，我想设置它们的样式，使输入框不会超过必要的长度：

```
<input type=number name=short value='1' min=0 max=9 size=1 maxlength=1>
<input type=number name=medium value='123' min=0 max=999 size=3 maxlength=3>
<input type=number name=long value='12345' min=0 max=99999 size=5 maxlength=5> 
```

Firefox 不识别`number`类型输入，并将处理输入假设它们是`text`框。因此`size`and`maxlength`将应用于输入框。

Chrome 会识别`number`输入类型，并会根据`max`值加上旋转（上/下）按钮的宽度自动限制输入框的大小。

然而，同样识别`number`类型输入的 Opera 做的事情却不同。它使用该`size`值来计算输入框的大小，如果没有提供，则使用浏览器默认值。它没有考虑旋转按钮的宽度，导致部分输入被遮挡。

考虑到我在 Opera 浏览器中提到的问题，有没有办法正确设置数字输入的样式，使它们不会超过必要的长度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T10:53:33.667

没有讨厌的黑客，你能做的最好的可能就是通过以下方式增加你的输入大小`1`：

```
<input type=number name=short value='1' min=0 max=9 size=2 maxlength=1>
<input type=number name=medium value='123' min=0 max=999 size=4 maxlength=3>
<input type=number name=long value='12345' min=0 max=99999 size=6 maxlength=5> 
```

它在 FF 和 Webkit 中不会有很大的不同，但会在 Opera 中正确显示

**更新**或者，您可以使用 CSS hack 仅针对歌剧 - [http://jsfiddle.net/KmHwG/4/](http://jsfiddle.net/KmHwG/4/)

```
@media all and (-webkit-min-device-pixel-ratio:10000), not all and (-webkit-min-device-pixel-ratio:0) {
    input[name=short]  { width: 24px }
    input[name=medium] { width: 38px } 
    input[name=long]   { width: 52px } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T11:26:01.437

我认为这可能是另一种解决方案：

```
noindex:-o-prefocus, input[type=number] {
 padding-right: 1.5em;
} 
```

# r - Kaplan-Meier 多组比较

> ID：11176762
> 
> 赞同：1
> 
> 时间：2012-06-24T10:40:45.587
> 
> 标签：r, survival-analysis

假设我有以下数据框

```
library(survival)
library(multcomp)
data(cml)
cml$group<-sample(1:5, 507, replace=T)
plot(survfit(Surv(time=cml$time, cml$status)~cml$group))
(survdiff(Surv(time=cml$time, cml$status)~cml$group)) 
```

如何执行多重比较测试比较例如 group0 与所有其他组？还是每组都在一起？

有没有一种很好的方法来绘制这些多重比较（例如`plot.TukeyHSD()`在`aov()`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T06:47:30.497

multcomp 的generalsiminf.pdf 中有一个例子。在这里简化

```
library(multcomp)
library(survival)
if (!file.exists("AML_Bullinger.rda"))
  load(url("http://www.stat.uni-muenchen.de/~hothorn/data/AML_Bullinger.rda", open = "r"))
risk <- rep(0, nrow(clinical))
rlev <- levels(clinical[, "Cytogenetic.group"])
risk[clinical[, "Cytogenetic.group"] %in% rlev[c(7,8,4)]] <- "low"
risk[clinical[, "Cytogenetic.group"] %in% rlev[c(5, 9)]] <- "intermediate"
risk[clinical[, "Cytogenetic.group"] %in% rlev[-c(4,5, 7,8,9)]] <- "high"
risk <- as.factor(risk)
names(clinical)[6] <- "FLT3"
save(clinical,file="AML_Bullinger.rda")
smod <- survreg(Surv(time, event) ~ Sex + Age + WBC+risk,
                 data = clinical)
summary(glht(smod, linfct = mcp(risk = "Tukey"))) 
```

# python - 带有动态模型初始化 kwargs 的 Django ModelForm

> ID：11176763
> 
> 赞同：0
> 
> 时间：2012-06-24T10:41:11.257
> 
> 标签：python, django, django-models, django-forms

我有一个带有`__init__`方法的模型：

```
class Foo(models.Model):
    name = models.CharField(max_length=50)

    def __init__(self, *args, **kwargs):
        self.bar = kwargs.pop('bar', False)
        super(Foo, self).__init__(*args, **kwargs)
        if self.bar:
            # do something
            pass 
```

现在，我需要创建一个特定的 ModelForm：

```
class FooForm(ModelForm):

    class Meta:
        model = Foo(bar='something')
        fields = ('name',) 
```

这显然不起作用：

```
TypeError: 'Foo' object is not callable 
```

有什么办法可以克服这个吗？

## 更新

关于我想要实现的更多信息：我有一个带有 ImageField 的 Image 模型。它有不同的存储方法，具体取决于使用它的形式。

该模型：

```
class Image(models.Model):
    image = models.ImageField(upload_to=imageUploadTo)
    user = models.ForeignKey('auth.User')

    def __init__(self, *args, **kwargs):
        self.overwrite = kwargs.pop('overwrite', False)
        super(Image, self).__init__(*args, **kwargs)
        if self.overwrite:
            self.image.storage = OverwriteStorage() 
```

现在我希望能够创建覆盖旧图像的表单和使用默认行为的表单。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T10:50:41.530

不，这根本不是它的工作方式，这与您的自定义初始化无关。您不会在 Meta 内部调用事物。在您的情况下，您在视图中初始化表单时传递参数。

# css - 如何在maven项目中分离图像文件夹和css文件夹以相互协作

> ID：11176764
> 
> 赞同：1
> 
> 时间：2012-06-24T10:41:25.737
> 
> 标签：css, image

我的 Maven 项目中有两个 CSS 文件和三个图像。当我将图像放在 CSS 文件夹中时，它工作正常，但是当我将图像移动到图像文件夹时，这些图像不会显示在网页中。我想在我的项目上有一个很好的结构，因此有一个单独的图像文件夹。我该怎么做？我想我需要在我的 CSS 中做一些更改，但不知道如何以及在哪里。我对 CSS 了解不多。

布局.css

```
*{
margin:0;
padding:0;
   }
 body {
font:14px/1.3 Arial,sans-serif;
background-color:#212121;
}
header {
background-color:#212121;
box-shadow: 0 -1px 2px #111111;
color:#fff;
display:block;
height:70px;
position:relative;
width:100%;
z-index:100;
}
header h2{
font-size:22px;
font-weight:normal;
left:50%;
margin-left:-400px;
padding:22px 0;
position:absolute;
width:540px;
}
header a.stuts,a.stuts:visited{
border:none;
text-decoration:none;
color:#fcfcfc;
font-size:14px;
left:50%;
line-height:31px;
margin:23px 0 0 110px;
position:absolute;
top:0;
}
header .stuts span {
font-size:22px;
font-weight:bold;
margin-left:5px;
}
.container {
height: 571px;
margin: 30px auto;
width: 957px;
 } 
```

和 menue.css

```
#nav,#nav ul {
list-style: none outside none;
margin: 0;
padding: 0;
}
#nav {
background: url('menu_bg.png') no-repeat scroll 0 0 transparent;
clear: both;
font-size: 12px;
height: 58px;
padding: 0 0 0 9px;
position: relative;
width: 957px;
}
#nav ul {
background-color: #222;
border:1px solid #222;
border-radius: 0 5px 5px 5px;
border-width: 0 1px 1px;
box-shadow: 0 5px 5px rgba(0, 0, 0, 0.5);
left: -9999px;
overflow: hidden;
position: absolute;
top: -9999px;
z-index: 2;

-moz-transform: scaleY(0);
-ms-transform: scaleY(0);
-o-transform: scaleY(0);
-webkit-transform: scaleY(0);
transform: scaleY(0);

-moz-transform-origin: 0 0;
-ms-transform-origin: 0 0;
-o-transform-origin: 0 0;
-webkit-transform-origin: 0 0;
transform-origin: 0 0;

-moz-transition: -moz-transform 0.1s linear;
-ms-transition: -ms-transform 0.1s linear;
-o-transition: -o-transform 0.1s linear;
-webkit-transition: -webkit-transform 0.1s linear;
transition: transform 0.1s linear;
}
#nav li {
background: url('menu_line.png') no-repeat scroll right 5px transparent;
float: left;
position: relative;
 }
#nav li a {
color: #FFFFFF;
display: block;
float: left;
font-weight: normal;
height: 30px;
padding: 23px 20px 0;
position: relative;
text-decoration: none;
text-shadow: 1px 1px 1px #000000;
}
#nav li:hover > a {
color: #00B4FF;
}
#nav li:hover, #nav a:focus, #nav a:hover, #nav a:active {
background: none repeat scroll 0 0 #121212;
outline: 0 none;
 }
#nav li:hover ul.subs {
left: 0;
top: 53px;
width: 180px;

-moz-transform: scaleY(1);
-ms-transform: scaleY(1);
-o-transform: scaleY(1);
-webkit-transform: scaleY(1);
transform: scaleY(1);
}
#nav ul li {
background: none;
width: 100%;
}
#nav ul li a {
float: none;
}
#nav ul li:hover > a {
background-color: #121212;
color: #00B4FF;
}
#lavalamp {
background: url('lavalamp.png') no-repeat scroll 0 0 transparent;
height: 16px;
left: 13px;
position: absolute;
top: 0px;
width: 64px;

-moz-transition: all 300ms ease;
-ms-transition: all 300ms ease;
-o-transition: all 300ms ease;
-webkit-transition: all 300ms ease;
transition: all 300ms ease;
}
 #lavalamp:hover {
-moz-transition-duration: 3000s;
-ms-transition-duration: 3000s;
-o-transition-duration: 3000s;
-webkit-transition-duration: 3000s;
transition-duration: 3000s;
}
#nav li:nth-child(1):hover ~ #lavalamp {
left: 13px;
}
#nav li:nth-child(2):hover ~ #lavalamp {
left: 90px;
}
#nav li:nth-child(3):hover ~ #lavalamp {
left: 170px;
}
#nav li:nth-child(4):hover ~ #lavalamp {
left: 250px;
 }
#nav li:nth-child(5):hover ~ #lavalamp {
left: 330px;
 }
#nav li:nth-child(6):hover ~ #lavalamp {
left: 410px;
}
#nav li:nth-child(7):hover ~ #lavalamp {
left: 490px;
}
#nav li:nth-child(8):hover ~ #lavalamp {
left: 565px;
 } 
```

最后是 index.jsp：

```
 <!DOCTYPE html>
  <html lang="en" >
  <head>
    <meta charset="utf-8" />
    <link href="<%=request.getContextPath()%>/resources/css/layout.css" rel="stylesheet" 
    type="text/css" />
    <link href="<%=request.getContextPath()%>/resources/css/menu.css" rel="stylesheet" 
    type="text/css" />
   </head>
   <body>
    <header>
        <h2>Welcome</h2>

    </header>
    <div class="container">

        <ul id="nav">
            <li><a class="hsubs" href="#">Menu 1</a>
                <ul class="subs">
                    <li><a href="#">Submenu 1</a></li>
                    <li><a href="#">Submenu 2</a></li>
                    <li><a href="#">Submenu 3</a></li>
                    <li><a href="#">Submenu 4</a></li>
                    <li><a href="#">Submenu 5</a></li>
                </ul>
            </li>
            <li><a class="hsubs" href="#">Menu 2</a>
                <ul class="subs">
                    <li><a href="#">Submenu 2-1</a></li>
                    <li><a href="#">Submenu 2-2</a></li>
                    <li><a href="#">Submenu 2-3</a></li>
                    <li><a href="#">Submenu 2-4</a></li>
                    <li><a href="#">Submenu 2-5</a></li>
                    <li><a href="#">Submenu 2-6</a></li>
                    <li><a href="#">Submenu 2-7</a></li>
                    <li><a href="#">Submenu 2-8</a></li>
                </ul>
            </li>
            <li><a class="hsubs" href="#">Menu 3</a>
                <ul class="subs">
                    <li><a href="#">Submenu 3-1</a></li>
                    <li><a href="#">Submenu 3-2</a></li>
                    <li><a href="#">Submenu 3-3</a></li>
                    <li><a href="#">Submenu 3-4</a></li>
                    <li><a href="#">Submenu 3-5</a></li>
                </ul>
            </li>
            <li><a href="#">Menu 4</a></li>
            <li><a href="#">Menu 5</a></li>
            <li><a href="#">Menu 6</a></li>

            <div id="lavalamp">
            </div>
        </ul>

     </div>
    </body>
    </html> 
```

以及 3 张图片 lavalamp.png、menu_bg.png、menu_line.png。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T19:20:44.807

我相信您遇到的问题在于您设置路径的方式。您正在设置相对于您的 css 文件的图像路径。看看这个[CSS 路径](http://css-tricks.com/quick-reminder-about-file-paths/)- 我希望这就是你要找的 ^-^。

如果您想要快速而肮脏的版本->

以下是您需要了解的有关相对文件路径的所有信息：

> 以“/”开头返回根目录并从那里开始
> 
> 以“../”开头的目录向后移动一个目录并从那里开始
> 
> 以“../../”开始向后移动两个目录并从那里开始（等等......）向前移动，只需从第一个 > 子目录开始并继续向前移动

# ms-word - OpenXml - 加入具有不同页脚的 word 文档

> ID：11176771
> 
> 赞同：1
> 
> 时间：2012-06-24T10:42:06.897
> 
> 标签：ms-word, openxml, docx

我正在使用[http://powertools.codeplex.com](http://powertools.codeplex.com)和/或[http://docx.codeplex.com](http://docx.codeplex.com)加入 word 文档。第一个文档包含页脚，第二个文档没有。连接的文档在两个页面/部分都显示了页脚。

如何删除第二部分的页脚？第二节的页脚与前一节相连。如何使用 OpenXML 2.0 删除此连接？在 Word 中，这没有问题。

我的源代码可以在这里找到：http: [//dl.dropbox.com/u/21096596/OpenXML.zip](http://dl.dropbox.com/u/21096596/OpenXML.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:27:40.093

我找到了如何替换后续部分的页脚的解决方案：

```
MainDocumentPart myPart = document.MainDocumentPart;
FooterPart newFtPart = myPart.AddNewPart<FooterPart>();
string ft_ID = myPart.GetIdOfPart(newFtPart);

new DocumentFormat.OpenXml.Wordprocessing.Footer().Save(newFtPart);
foreach (SectionProperties sectProperties in myPart.Document.Descendants<SectionProperties>().Skip(1))
{
        FooterReference newFtReference =
         new FooterReference() { Id = ft_ID, Type = HeaderFooterValues.Default };
        sectProperties.Append(newFtReference);
} 
```

# c - 在宏中传递参数评估方向

> ID：11176778
> 
> 赞同：0
> 
> 时间：2012-06-24T10:43:07.570
> 
> 标签：c, macros, c-preprocessor, operator-precedence

正如我在**C**中所知道的那样，函数评估的实际参数的传递从最右边开始并指向左边。带参数的宏定义是什么情况？我编写了一个代码以使含义清晰，但输出使我感到困惑……这是代码。，

```
#define parsing(a,b) a*b

int parsefun(int a, int b)
{
    return a*b;    
}

int main()
{
    int i=10;
    printf("%d\n",parsing((i++),i));
    i=10;
    printf("%d\n",parsing(i,(i++)));
    i=10;

    printf("%d\n",parsefun((i++),i));
    i=10;
    printf("%d\n",parsefun(i,(i++)));
    system("PAUSE");
    return 0;
} 
```

此代码输出，100 100 100 110

我希望宏的输出与函数相同。但这里的关键点在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T10:44:53.170

> 函数实际参数的解析从最右边开始，指向左边

我认为您的意思是“评估”而不是“解析”。但这不是真的，C 标准没有指定顺序。

因此，C 标准**未指定**您为函数获得的行为。

> 我希望宏的输出与函数相同

宏参数不被评估，它们只是被替换。所以你最终得到了这个：

```
int i=10;
printf("%d\n", (i++) * i);
i=10;
printf("%d\n", i * (i++)); 
```

之后，您只是看到**未定义的行为**，如以下问题所述：[为什么这些构造（使用 ++）未定义的行为？](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc).

# r - R矩阵到rownames colnames值

> ID：11176781
> 
> 赞同：3
> 
> 时间：2012-06-24T10:43:47.160
> 
> 标签：r

我有一个矩阵 A ，我想将其转换为以下形式的 data.frame：

```
rownames    colnames    values 
```

使用

```
unlist(A) 
```

有帮助，但不给我行名

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T10:58:58.347

您可以使用 reshape2-package：

```
# load package
> require(reshape2)
# create an example matrix
> mdat <- matrix(c(1,2,3, 11,12,13), nrow = 2, ncol=3, byrow=TRUE,
+                dimnames = list(c("row1", "row2"),
+                                c("C.1", "C.2", "C.3")))
> mdat
     C.1 C.2 C.3
row1   1   2   3
row2  11  12  13
# bring matrix to long format using melt()
> melt(mdat)
  Var1 Var2 value
1 row1  C.1     1
2 row2  C.1    11
3 row1  C.2     2
4 row2  C.2    12
5 row1  C.3     3
6 row2  C.3    13 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T11:12:59.850

基础 R 中的解决方案：

这是一个矩阵：

```
test <- matrix(1:9,nrow=3)
rownames(test) <- letters[1:3]
colnames(test) <- letters[4:6]

> test
  d e f
a 1 4 7
b 2 5 8
c 3 6 9 
```

根据需要转换为 a `data.frame`：

```
data.frame(
           rownames=as.vector(row(test,as.factor=TRUE)),
           colnames=as.vector(col(test,as.factor=TRUE)),
           values=as.vector(test)
          ) 
```

甚至更短，使用`expand.grid`并确保命名输入：

```
data.frame(
        expand.grid(rownames=rownames(test),colnames=colnames(test)),
        values=as.vector(test)
          ) 
```

或者甚至更短，使用`as.data.frame.table`（这将给出大部分结果），并使用设置名称`setNames`

```
setNames(as.data.frame.table(test),c("rownames","colnames","values")) 
```

结果：

```
 rownames colnames values
1        a        d      1
2        b        d      2
3        c        d      3
4        a        e      4
5        b        e      5
6        c        e      6
7        a        f      7
8        b        f      8
9        c        f      9 
```

# iphone - 内存管理递归父母 - Objective C

> ID：11176784
> 
> 赞同：0
> 
> 时间：2012-06-24T10:43:55.823
> 
> 标签：iphone, ios, ipad, memory-management, memory-leaks

我在解决一些相当可怕的内存泄漏时遇到了一些麻烦，当我运行我的 iOS 应用程序时，Memory Leaks 工具向我显示。

我有一个 Path 对象，其中包含同一类的父变量，并且该父变量包含其自己的父变量，依此类推。

我想做的是给另一个对象一个该对象的深层副本，然后它可以对该副本做任何喜欢的事情，并且它应该对原始对象没有影响。

我认为问题在于当我像这样复制我的对象时：

```
- (id) copyWithZone:(NSZone *)zone {
    ShortestPathStep *copy = [[[self class] allocWithZone:zone] initWithSteps:self];

    return copy;
} 
```

这调用了我的复制构造函数：

```
-(id)initWithSteps:(ShortestPathStep*)copyFrom
{
    if ((self = [super init])) 
    {
        position = copyFrom.position;
        gScore = copyFrom.gScore;
        hScore = copyFrom.hScore;
        parent = [copyFrom.parent copy];
    }

    return self;
} 
```

我还尝试在 dealloc 方法中释放父级，如下所示：

```
-(void)dealloc {
    if(parent != nil)
        [parent release];

    [super dealloc]; } 
```

但是，这给了我以下错误消息：

malloc: ***对象 0x12df1810 的错误: 被释放的指针未被分配

复制此指针时应如何处理分配的内存？

这是否会产生深层副本，包括父变量的深层副本？我得到的一些异常表明我不想要的指针正在被清理，或者它们正在我的代码的其他区域中被重新分配。

编辑：为了解决我在 dealloc 方法中的异常，我已将 .h 文件中的属性更改为：

```
@property (nonatomic, retain) ShortestPathStep *parent; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:29:38.970

以下是一些一般注意事项

确保`position`,`gScore`并且`hScore`是为父级保留属性属性，使属性为副本类型

```
@property (nonatomic, copy) Your_Parent parent; 
```

将您的 init 函数更新为

```
-(id)initWithSteps:(ShortestPathStep*)copyFrom
{
    if ((self = [super init])) 
    {
        self.position = copyFrom.position;
        self.gScore = copyFrom.gScore;
        self.hScore = copyFrom.hScore;
        self.parent = copyFrom.parent;
    }

    return self;
} 
```

现在 dealloc 中的发布应该可以工作了。

# perl - 将 Modperl 配置转换为 Plack - 按文件扩展名运行不同的处理程序

> ID：11176786
> 
> 赞同：6
> 
> 时间：2012-06-24T10:44:12.560
> 
> 标签：perl, plack

我正在尝试将我当前的 Apache/Modperl 站点转移到 Starman，并且需要使用针对不同文件扩展名的不同处理程序构建 app.psgi。类似于 Apache 中的东西：

```
<LocationMatch "(\.m|\.mh|\/)$">
     SetHandler              perl-script
     PerlHandler             MyApp::Mhandler
</LocationMatch>

<LocationMatch "(\.p|\.ph)$">
     SetHandler              perl-script
     PerlHandler             MyApp::Phandler
</LocationMatch> 
```

我现在有：

```
#app for handle .m and .mh
my $Mapp = Some::PSGI->handler( sub {
...
});

#app for handling .p and .ph
my $Papp = SomeOther::PSGI->handler( sub {
...
}); 
```

但是如何使用构建器？

```
builder {

    #any extension what is not .m .mh .p .ph - handle as static
    #but, only when the request have any extension
    enable "Plack::Middleware::Static",
      path => __what here__, ???
      root => "/my/doc/root";

    #and what here to achieve the following "rules".

    #??? $Papp
    #default $Mapp
}; 
```

需要的“规则”：

*   如果请求*没有*任何扩展名，或者请求以 '/' 结尾
    *   应该处理`$Mapp`
*   如果请求以某些扩展名结束，则
    *   `.m`并`.mh`应由`$Mapp`
    *   `.p`并`.ph`应由`$Papp`
    *   所有其他带有扩展名的文件（如 .css .js .pdf .jpg ...）都应作为静态文件处理。

当然，将每个静态文件放到某个树中会容易得多，但是给出了当前的应用程序*，*现在我只想将它移动到 Startman，重构 - 稍后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:50:56.973

```
use strictures;
use Plack::Request qw();
use Plack::Builder qw(builder enable);
use Tie::REHash do_cache => 1;

tie my %location_match, 'Tie::REHash';
%location_match = (
    qr'(\.m|\.mh|/|/[^.]+)$' => sub {[200,[],['Mhandler']]},
    qr'(\.p|\.ph)$'          => sub {[200,[],['Phandler']]},
);

my $app = sub {
    my ($env) = @_;
    my $req = Plack::Request->new($env);
    my $res;
    if ($location_match{$req->path_info}) {
        printf "path [%s] dispatches to %s\n", $req->path_info, $location_match{$req->path_info};
        $res = $location_match{$req->path_info};
    } else {
        die sprintf "no match for path [%s], check routing configuration\n", $req->path_info;
    }
    return $res->($env);
};

builder {
    enable 'Static', path => sub {
        my ($path) = @_;
        if ($location_match{$path}) {
            print "redispatch\n";
            return;
        } elsif ($path =~ qr'/ [^/]+ [.] [^/]+ $'x) {
            return 1;
        } else {
            die "no match for path [$path], check routing configuration\n";
        }
    }, root => './htdocs/';
    $app;
}

__END__
GET 'http://localhost:5000/foo?bar=baz;quux#fnord'
GET 'http://localhost:5000/foo/?bar=baz;quux#fnord'
GET 'http://localhost:5000/foo.m?bar=baz;quux#fnord'
GET 'http://localhost:5000/foo.mh?bar=baz;quux#fnord'
GET 'http://localhost:5000/foo.p?bar=baz;quux#fnord'
GET 'http://localhost:5000/foo.ph?bar=baz;quux#fnord'
GET 'http://localhost:5000/foo.css?bar=baz;quux#fnord'
GET 'http://localhost:5000/foo.js?bar=baz;quux#fnord'
GET 'http://localhost:5000/foo.pdf?bar=baz;quux#fnord'
GET 'http://localhost:5000/foo.jpg?bar=baz;quux#fnord' 
```

# java - 如何使用 GSON 反序列化无密钥数组？

> ID：11176793
> 
> 赞同：1
> 
> 时间：2012-06-24T10:45:56.907
> 
> 标签：java, arrays, json, deserialization, gson

我喜欢使用[GSON](http://code.google.com/p/google-gson/)反序列化以下 JSON 字符串。

```
{
  "type": "FeatureCollection",
  "features": [
    {
      "id": "FSROGD.4440181",
      "geometry": {
        "type": "Point",
        "coordinates": [
          16.7594706041998,
          43.148716514354945
        ]
      }
    }
  ]
} 
```

*我已经准备好名为Response*、*Features*、*Geometry*和*Coordinates*的必要 Java 类。除了最后一节课，一切都很好。但是对于*Coordinates*，我不明白我应该写什么，因为没有可以准备作为成员变量的键。
这是父*几何*类...

```
package info.metadude.trees.model.vienna;    
import com.google.gson.annotations.SerializedName;

public class Geometry {     
    @SerializedName("type")
    public String type;

    // TODO: Prepare Coordinates class for GSON.
    // @SerializedName("coordinates")
    // public Coordinates coordinates;
} 
```

...和空的*坐标*类。

```
package info.metadude.trees.model.vienna;    
public class Coordinates {
    // TODO: No idea what should be defined here.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T10:50:02.110

您可以`coordinates`在`Geometry`. 这会自动将值映射到正确的属性。

```
import java.util.List;

import com.google.gson.Gson;

public class GSonTest {

    public static void main(final String[] args) {
        Gson gson = new Gson();
        System.out.println(gson.fromJson("{        \"type\": \"Point\",        \"coordinates\": [          16.7594706041998,          43.148716514354945        ]      }", Geometry.class));
    }

    public static class Geometry {

        List<Float> coordinates;

        public List<Float> getCoordinates() {
            return coordinates;
        }

        public void setCoordinates(final List<Float> coordinates) {
            this.coordinates = coordinates;
        }

        @Override
        public String toString() {
            return "Geometry [coordinates=" + coordinates + "]";
        }

    }

} 
```

# c# - 从另一个 WCF 服务调用时，WCF Web 服务 IIS6 401 出现未经授权的错误。从 asmx/WinForms 调用是可以的

> ID：11176798
> 
> 赞同：0
> 
> 时间：2012-06-24T10:47:44.610
> 
> 标签：c#, wcf, iis-6, http-status-code-401

我有一个托管在 IIS6 中的 WCF 服务。它正在做简单的 WebRequest。

当我从 ASMX 服务（托管在同一个 IIS6 中）调用它时。一切都很好。
当我从 WinForms 应用程序调用它时。一切都按预期工作。
当我从另一个 WCF 服务调用它时，就会出现问题。
然后 response.GetResponseStream() 抛出 401 未经授权的错误。

我在这里做错了什么？

```
System.Net.WebRequest request = WebRequest.Create(full_path_to_the_webpage);
request.Credentials = new NetworkCredential(username_for_http_login, password_for_http_login);
request.PreAuthenticate = true;
request.UseDefaultCredentials = false;

WebResponse response = request.GetResponse();

Stream responseStream = response.GetResponseStream(); //THIS line returns 401 Unauthorized 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:58:39.213

原来，php脚本只需要用户名小写。所以这段代码现在可以愉快地**工作了**。

感谢所有试图帮助我的人。

**致 Rajesh：**不，我没有通过 WebRequest 使用服务本身。我使用 WebRequest 从另一台服务器调用了一个 php 文件。

# google-apps-script - 我应该如何在多个不同的 Google 电子表格上重用函数？

> ID：11176803
> 
> 赞同：4
> 
> 时间：2012-06-24T10:48:45.250
> 
> 标签：google-apps-script, google-sheets

我现在已经在 Google Apps Script 中编写了许多不同的函数，我在越来越多的 Google 电子表格中使用这些函数。

每次我对其中一个功能进行小幅编辑时，我都必须进入每个电子表格并进行相同的更正。

有没有办法将函数“导入”到每个电子表格，这样我只需要编辑一个“主”函数，然后在每个电子表格上更新它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T12:03:55.193

Google 刚刚发布了一个名为 Libraries 的新功能，它是一种优雅的方式来满足您的要求。[这是文档](https://developers.google.com/apps-script/guide_libraries)，请仔细阅读，因为它是一个多步骤的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T11:12:56.397

请参阅此页面，了解如何使用 Google Apps 脚本在工作表中创建和共享函数。这些脚本是用 javascript 编写的，并且它们的使用方式存在一些限制。

[https://developers.google.com/apps-script/guide_writing_scripts#CustomFunctions](https://developers.google.com/apps-script/guide_writing_scripts#CustomFunctions)

# android - 是否可以在画布上缩放文本？

> ID：11176805
> 
> 赞同：1
> 
> 时间：2012-06-24T10:49:51.640
> 
> 标签：android, android-canvas

我想使用游戏应用程序的[Canvas.drawText](http://developer.android.com/reference/android/graphics/Canvas.html#drawText%28java.lang.String,%20int,%20int,%20float,%20float,%20android.graphics.Paint%29 "画布.drawText")调用在画布上绘制文本，然后能够像位图对象一样对其进行缩放。我不想动态改变它的字体大小，但我想应用仿射变换来缩放它。

是否可以？我在文档中找不到足够的 API 调用。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T11:00:25.910

使用[Matrix](http://developer.android.com/reference/android/graphics/Matrix.html)您可以对其进行缩放，并使用[Canvas.concat(Matrix m)](http://developer.android.com/reference/android/graphics/Canvas.html#concat%28android.graphics.Matrix%29)将矩阵变换应用于画布。在将文本绘制到画布上之前执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T11:01:56.430

一旦它在画布上，它就不是一个可以做任何事情的单独对象。您可以做的是使用 Canvas 作为 API 来绘制位图：

1.  创建位图。
2.  创建由该位图支持的画布。
3.  将您的文本绘制到画布中。
4.  抓住你的位图，用它做任何你想做的事。

# javascript - AngularJs 中的隐藏字段

> ID：11176813
> 
> 赞同：16
> 
> 时间：2012-06-24T10:50:54.677
> 
> 标签：javascript, angularjs

如何访问 Angular 中的隐藏字段？我有一个应用程序，我想为列表中的每个项目提交一个表单。表单很简单——它有提交按钮和一个包含 ID 值的隐藏字段。但它不起作用。该值为空。

我更新了默认的角度示例以显示情况 - 待办事项文本位于隐藏字段中。

[http://jsfiddle.net/tomasfejfar/yFrze/](http://jsfiddle.net/tomasfejfar/yFrze/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-24T06:49:28.370

如果您不想在 javascript 文件中硬编码任何内容，您可以通过 AJAX 加载它，或者执行以下操作：

```
<input type="hidden" name="value" ng-init="model.value=1" value="1"> 
```

这样，您可以在关闭 JS 的情况下保持表单功能，并且仍然使用 AngularJS 中的隐藏字段

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-26T20:56:33.267

如果您想将 ng-repeat 中的 ID 传递给您的代码，则不必使用隐藏字段。这是我所做的：

例如，假设我正在循环浏览一组电影，当您单击“阅读更多”链接时，它会将您的 ID 传递给您的 JS 代码：

```
<ul>
  <li ng-repeat="movie in movies">
    {{movie.id}} {{movie.title}} <a href="#" ng-click="movieDetails(movie)">read more</a>
  </li>
</ul> 
```

然后在您的 JS 代码中，您可以像这样获取 ID：

```
$scope.movieDetails = function (movie) {
  var movieID = movie.id;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T01:34:04.273

在您更简单的小提琴中，可以通过使用 ng-init 或在控制器中设置初始值来解决问题。该`value`属性不会影响 ng-model。

[http://jsfiddle.net/andytjoslin/DkMyP/2/](http://jsfiddle.net/andytjoslin/DkMyP/2/)

此外，您的初始示例 (http://jsfiddle.net/tomasfejfar/yFrze/) 在 Chrome 15/Windows 7 上的当前状态下适用于我。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T12:29:00.050

你可以做这样的事情。
这是一个肮脏的把戏，但它可以工作（就像大多数肮脏的把戏一样;-)
你只需使用表单名称作为你的隐藏字段
并始终为表单提供 id "form"

```
<!doctype html><html ng-app><head>
<script src="angular-1.0.1.min.js"></script>
<script>
function FormController($scope) {
  $scope.processForm = function() {alert("processForm() called.");
    $scope.formData.bar = "";
    try {$scope.formData.bar = document.getElementById("form").name;} 
    catch(e) {alert(e.message);}
    alert("foo="+$scope.formData.foo+ " bar="+$scope.formData.bar);
  };
}
</script></head><body>
<div ng-controller="FormController">
<form name="YourHiddenValueHere" id="form">
<input type="text" ng-model="formData.foo" />
<button ng-click="processForm()"> SUBMIT </button>
</form>
</div></body></html> 
```

这允许您对所有表单使用一个控制器并将
它们发送到一个服务器脚本。该脚本通过
表单名称 (formData.foo) 进行区分并知道要做什么。
隐藏字段命名此场景中的操作。

瞧——您有一个完整的应用程序，其中包含
您想要的任意数量的表单以及一个服务器脚本
和一个用于所有表单的 FormController。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-12T10:19:32.090

更简单：

```
<input type="hidden" name="livraisonID" value="{{livraison.id}}"/> 
```

有用！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T12:39:57.287

我必须纠正（改进）自己：
你可以做得更优雅：

```
<form>
<input type="text" ng-model="formData.foo" />
<input type="hidden" id="bar" value="YourHiddenValue" />
<button ng-click="processForm()"> SUBMIT </button>
</form> 
```

然后在 JavaScript 控制器中：

```
$scope.formData.bar = "";
try {$scope.formData.bar = document.getElementById("bar").value;} 
catch(e) {alert(e.message);}
alert("foo="+$scope.formData.foo+ " bar="+$scope.formData.bar); 
```

因此，您可以拥有任意数量的隐藏字段。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-04T10:28:28.187

使用`ng-binding="{{employee.data}}"`. 它会正常工作。

# codeigniter - codeigniter 中的 set_exception_handler - 如何使用？

> ID：11176815
> 
> 赞同：2
> 
> 时间：2012-06-24T10:51:17.570
> 
> 标签：codeigniter, exception-handling

我有一个类似于以下的代码，但它不起作用。

```
class Abc extends CI_Controller {

    static function exception_handler(Exception $ex)
    {       
        var_dump($ex);
        echo $ex->getMessage();
        exit;
    }

    function __construct()
    {
        parent::__construct();
        set_exception_handler('exception_handler');     
    }       

    function Index()
    {

        throw new Exception('hehe');
    }
} 
```

我明白了

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：set_exception_handler() 期望参数 (exception_handler) 是一个有效的回调

如何在 codeigniter 中使用 set_exception_handler

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:36:47.300

Set_exception_handler 总是需要全名类，包括命名空间，并省略“使用指令”以使用其他命名空间。

在您的情况下，全名是：'CI_Controller:exception_handler'

因此正确的调用是： set_exception_handler('CI_Controller:exception_handler');

如果您有一个命名空间，例如命名空间 App；

正确的调用是： set_exception_handler('App\CI_Controller:exception_handler');

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T13:46:20.737

既然`exception_handler`是类中的一个函数，它应该是：

```
set_exception_handler(array('self','exception_handler')); 
```

或者

set_exception_handler(array('Abc','exception_handler'));

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-31T14:41:48.773

```
function Index()
{
    function ExceptionHandler($e) use($this)
    {
        $this->load->view('error', $this->sharedData);
    }

    set_exception_handler('ExceptionHandler');

    throw new Exception('hehe');
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-20T07:59:24.413

您应该使用访问级别为公共的实例化对象的方法。

```
 final class MyException
{
    /**
     * Constructor
     * trigger getErrorTypesFromDefinedConstant method
     */
    public function __construct()
    {
        // Set global exception handler
        set_exception_handler(array($this, 'globalException'));
    }

    public function globalException($e)
    {
        // Your code to handle exception
    }
} 

```

# php - php cURL 密码包含@

> ID：11176817
> 
> 赞同：-1
> 
> 时间：2012-06-24T10:51:26.447
> 
> 标签：php, curl

我正在尝试将 cURL 与代理设置一起使用，在我更改密码以使用该`@`标志之前它运行良好。

这就是我定义代理的方式：

```
curl_setopt($curl, CURLOPT_PROXY, "http://test:test@test@10.20.5.15:90"); 
```

有没有办法使用带有`@`标志的代理通行证（在我的情况下密码是`test@test`）并让 cURL 工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T12:22:40.120

您也可以使用 %40 代替 "@" ：

`curl_setopt($curl, CURLOPT_PROXY, "http://test:test%40test@10.20.5.15:90");` 但最`CURLOPT_USERPWD`好像@lix 所说的那样使用......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:57:28.460

您可能想尝试使用[cURL set_opts](http://php.net/manual/en/function.curl-setopt.php)方法来设置您的用户名和密码。

> **CURLOPT_USERPWD**
> 用于连接的用户名和密码，格式为“[username]:[password]”。

一个例子看起来像这样 -

```
curl_setopt($curl, CURLOPT_USERPWD, "test:test@test"); 
```

# c++ - c++ 中的分段错误（核心转储）

> ID：11176820
> 
> 赞同：2
> 
> 时间：2012-06-24T10:52:12.890
> 
> 标签：c++, linux, segmentation-fault

此代码在执行时显示预期的输出，但`segmentation fault (core dumped)`在最后打印：

```
string str[4] = {
    "Home",
    "Office",
    "Table",
    "Bar"
};

for (int i = 0; i<5; i++)
{
    cout << str[i] << "\n";
} 
```

**输出**：

```
Home
Office
Table
Bar
Segmentation fault (core dumped) 
```

分段错误（核心转储）的意义是什么。我搜索了一下，当你尝试访问未分配的内存时，似乎出现了这样的错误，那么，上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T10:53:43.020

你应该写：

```
for (int i = 0; i<4; i++) //0,1,2,3 = total 4 values
{
    cout << str[i] << "\n";
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T10:59:09.093

C++ 数组是从 0 开始的，所以你不能访问 str[4]，因为它的索引范围是 0-3。
您分配了一个长度为 4 的数组：

```
string str[4] 
```

那么你的循环必须在以下情况下终止：

```
i < 4 
```

而不是`i < 5`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-24T10:57:42.277

计数器应该从零到三。For 循环需要修改。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-24T10:58:59.443

`str`是 a `string[4]`，所以它有 4 个元素，这意味着索引 0-3 是有效的。您也在访问索引 4。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-11T05:39:07.697

您遇到分段错误是因为您尝试访问不存在的元素，即`str[4]` 可能的索引是从 0-3。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-24T10:58:36.220

您正在访问超出数组末尾的数据。`str`是一个大小为 4 的数组，但您正在访问循环中的第五个元素，这就是您遇到 seg 错误的原因

# firefox - Firefox 和 IE 中的 localStorage 删除

> ID：11176821
> 
> 赞同：0
> 
> 时间：2012-06-24T10:52:14.247
> 
> 标签：firefox, local-storage

我知道从 Chrome 中删除“localStorage”有点棘手。相反，我在开发过程中使用 FF 来存储我的值。

请提供在 FF 设置中删除 localStorage 的步骤。显然，仅删除缓存是行不通的。

我不能`localStorage.removeItem['key']`在我的代码中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:26:04.667

使用`localStorage.removeItem(key);`（注意括号而不是方括号），如果要删除 localStorage 中的所有项目，请使用`localStorage.clear();`

# java - 防止 Jersey 客户端在发布大文件时导致内存不足错误

> ID：11176824
> 
> 赞同：12
> 
> 时间：2012-06-24T10:52:28.570
> 
> 标签：java, rest, jersey, jax-rs

[当使用Jersey](http://jersey.java.net/)客户端将大文件设置为 InputStream时，文件的全部内容似乎在发送到服务器之前被缓冲到内存中。当 JVM 用完堆空间时，这会导致大文件出现问题。如何防止 Jersey 客户端出现这种行为？服务器端的 JAX-RS 资源方法在发送数据时似乎没有这个问题。

例如：

```
WebResource dataUploadResource = buildDataUploadResource();
dataUploadResource.type(getMimeType()).put(getLargeInputStream()); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-24T10:52:29.067

为了防止这种行为，您需要将 Jersey 客户端配置为对请求使用分块编码[1 。](http://en.wikipedia.org/wiki/Chunked_transfer_encoding "分块编码")这消除了设置 Content-Length 标头的需要，并且将从提供的 InputStream 流式传输，而无需缓冲内存中的全部内容。

默认情况下，Jersey 使用 JDK 的 HttpURLConection 类来处理 HTTP 请求和响应。不幸的是，这有一些与分块编码传输相关的错误。幸运的是，Jersey 有扩展点以允许使用不同的 HTTP 客户端实现。一种这样的实现是基于 Apache Http Client [2](http://hc.apache.org/ "Apache HttpComponents")的。

存在两种 apache htpp 客户端处理程序实现，一种支持现已停产的 3.x 版本，另一种使用较新的 4.x 版本。对于我们的项目，我们使用了基于旧 (3.1) 版本的实现。该库在 Maven Central 中的“contribs”子组下可用。

```
<dependency>
    <groupId>com.sun.jersey.contribs</groupId>
    <artifactId>jersey-apache-client</artifactId>
    <version>1.14</version>
</dependency> 
```

接下来你必须初始化你的 Jersey 客户端以使用新的实现：

```
Client jerseyClient = ApacheHttpClient.create(getClientConfig()); 
```

为了启用分块编码，您必须在客户端配置上设置分块编码大小，因为默认情况下未启用它：

```
private ClientConfig getClientConfig() {
   ClientConfig config = new DefaultClientConfig();

   config.getProperties().put(
            DefaultApacheHttpClientConfig.PROPERTY_CHUNKED_ENCODING_SIZE, 0);
   return config;
} 
```

只要这个属性不是`null`，就会使用分块编码。事实上，1.14 版忽略了编码大小，因为底层 apache commons-httpclient 库不支持指定大小。

# c# - C#从gridview asp net中的下拉列表中获取选定的值

> ID：11176829
> 
> 赞同：3
> 
> 时间：2012-06-24T10:53:12.380
> 
> 标签：c#, gridview, drop-down-menu, selectedvalue

每当网格视图中的下拉列表的值发生更改时，如何更改文本框的值？

在页面加载时，文本框显示所选值，但是当我更改下拉列表的选择时，文本框值不会改变。

代码如下。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns = "false">
    <Columns>
        <asp:TemplateField HeaderText="Entry">
            <ItemTemplate>
                <%# Container.DataItemIndex + 1 %>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Duty">
            <ItemTemplate>
                <asp:DropDownList ID="duty" runat="server" OnLoad = "ddl1_load" OnSelectedIndexChanged="duty_SelectedIndexChanged" autopostback="true" EnableViewState="true"></asp:DropDownList>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

后面的代码如下。

```
protected void ddl1_load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        DataTable dt = new DataTable();
        Duty dy = new Duty();
        dt = dy.getdutyid(Convert.ToInt32(dropcontractid.SelectedValue));
        DropDownList ddl = (DropDownList)sender;
        ddl.DataSource = dt;
        ddl.DataTextField = "dutyid";
        ddl.DataValueField = "dutyid";
        ddl.DataBind();
        TextBox1.Text = ddl.SelectedValue;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:42:11.687

`DropDownLists`我在使用in 时遇到了类似的问题`GridView`。我的解决方案是调整`onLoad`下拉列表，这样它就不会`DropDownList`在每个帖子上重新写入。这样，如果那里有东西，它就不会重新填充它。

```
protected void dropDownLoad(object sender, EventArgs e)
{
    DropDownList dropDown = sender as DropDownList;
    if (dropDown.SelectedValue == null || dropDown.SelectedValue == "")
    { 
        // Your Code to populate table
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T11:05:09.743

您需要使用`SelectedIndexChanged`处理程序来显示选定的值：

*标记：*

```
<asp:DropDownList ID="duty" runat="server" OnLoad="ddl1_load" OnSelectedIndexChanged="duty_SelectedIndexChanged"></asp:DropDownList> 
```

*代码隐藏：*

```
protected void duty_SelectedIndexChanged(object sender, EventArgs e)
{
    GridViewRow gvr = (GridViewRow)(((Control)sender).NamingContainer);   
    DropDownList duty= (DropDownList) gvr.FindControl("duty");
    TextBox1.Text = duty.SelectedItem.Value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T11:06:22.060

您应该考虑改用数据绑定。您可以将 textbox.Text 绑定到 selecteditem.value，这将确保发生正确的更新

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-01T03:04:50.200

这发生在我身上一次然后我像这样编码......但我没有使用 onLoad 属性，告诉我这是否有效，

```
 <asp:TemplateField HeaderText="duty" SortExpression="duty">
                                       <EditItemTemplate>
                                      <asp:TextBox ID="duty" runat="server" Text='<%# Bind("duty_Name") %>'></asp:TextBox>
                                    </EditItemTemplate>
                                      <ItemTemplate>
                                           <asp:Label ID="lblduty" runat="server" Text='<%# Eval("duty_Name") %>' />
                                        <asp:DropDownList ID="ddlduty" runat="server" CssClass="dropdownlist" 
                                          OnLoad = "ddl1_load" OnSelectedIndexChanged="duty_SelectedIndexChanged" Visible = "false" 
                                           >
                                        </asp:DropDownList>
                                    </ItemTemplate>

                                        <HeaderStyle Width="5%" />
                                        <ItemStyle HorizontalAlign="Center" />
                                    </asp:TemplateField> 
```

# objective-c - 目标 C - 从 WiFi 切换到 3G，反之亦然

> ID：11176833
> 
> 赞同：0
> 
> 时间：2012-06-24T10:53:28.853
> 
> 标签：objective-c, ios, nsurlconnection, asihttprequest, reachability

我正在开发一个使用网络的 iPhone 应用程序。iPhone 通过 HTTP 请求与我的服务器通信，应该可以在 WiFi 和 3G 上工作。
我目前用来`NSURLConnection initWithRequest`向我的服务器发送异步请求并获得响应（但我很快就会开始使用`ASIHTTPRequest`库）

我不确定的一件事是，
**当用户设备从 WiFi 变为 3G（反之亦然）时会发生什么？**

我知道不能使用相同的连接，必须建立新的连接。
但是我需要做些什么来处理这种情况，还是`NSURLConnection`自动处理？
例如，如果我发送了一个请求，并且在获得响应的过程中连接发生了变化，那么这个请求会发生什么？

我看到了 Apple 的 Reachability 示例代码，我知道我可以使用 Reachability 来检测网络更改，但不确定如何处理这些更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T10:57:54.393

当连接从 3G 变为 WiFi 时，当前请求将导致失败状态，是的，您需要做一些事情来重新建立连接（重启、恢复等...）

话虽如此，我不确定，但我认为`ASIHTTPRequest`有一种机制可以解决这些问题，例如，当您请求下载文件时

# nservicebus - 单个 RavenDB 数据库中的 NServiceBus 3 持久性

> ID：11176839
> 
> 赞同：0
> 
> 时间：2012-06-24T10:54:16.050
> 
> 标签：nservicebus, ravenhq

我有一个 NServiceBus 安装（显然是单个服务器）。

是否可以将 NSB 持久性配置为使用单个 RavenDB 数据库（不是服务器）？
如果是这样，配置是什么？

我正在考虑的场景是是否可以使用 RavenHQ 以便从运行总线的机器上备份我的所有 NSB 数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:22:03.047

只需使用连接字符串选项（NServiceBus.Persistence）并将所有端点指向同一个数据库。请注意，您需要使用 NSB 3.2.3，因为 TimeoutManager 已修补以在该版本中支持此功能

# iphone - iOS 网络应用“在地图中打开此页面？” 尝试打开地图应用程序时弹出

> ID：11176848
> 
> 赞同：0
> 
> 时间：2012-06-24T10:55:31.727
> 
> 标签：iphone, ios, html, web-applications, maps

我正在使用 HTML5/CSS3 编写一个 iPhone 网络应用程序。我需要嵌入一个链接以从我的 Web 应用程序中打开内置地图应用程序。要在地图上打开一个位置，我将移动 Safari 重定向到 URL，如下所示：

```
http://maps.google.com?q=Business+Name%26+Street+Address+City+State+Zip 
```

在这种情况下，如果用户点击此链接，iPhone 会打开地图应用程序并显示 URL 中指定的位置。

但是，当我需要提供前往预定义位置的行车路线的 URL 时：

```
http://maps.google.com/maps?saddr=1234+1st+ave+portland+or&daddr=Business+Name%26+Street+Address+City+State+Zip 
```

当 iPhone 在某些情况下显示一条小狗消息时，我遇到了一种奇怪的情况：

> 在“地图”中打开此页面？

可以选择是和否，并且只有当用户点击是时，地图才会打开并显示路线。请注意，此弹出窗口仅显示某些地址。

有什么办法可以阻止这个弹出窗口显示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:23:36.413

I've created simple web page. Put a link and set google map link with query string value of particular address on src attribute of link element,run it to my iPhone 4.It is working fine, I'm not getting any window to ask it open on map app.

I noticed that you've used "saddr" as a query string parameter. You can replace that with "q" query string parameter.

# ruby - Ruby 1.8.7 升级到 Ruby 1.9.2

> ID：11176850
> 
> 赞同：2
> 
> 时间：2012-06-24T10:55:44.987
> 
> 标签：ruby, rvm

我正在阅读[本教程](http://ruby.railstutorial.org/)，但我已经安装了 Ruby 1.8.7。我需要 1.9.2/1.9.3 版本。

我开始使用 RVM。

```
$ rvm list rubies
rvm rubies
    ruby-1.8.7-p358 [ x86_64 ]
    ruby-1.9.2-p318 [ x86_64 ]
=*  ruby-1.9.2-p320 [ x86_64 ]
    ruby-1.9.3-p194 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

但如果我运行`ruby -v`它仍然返回 1.8.7。

```
$ ruby -v
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux] 
```

其他返回值：

```
$ whereis ruby
ruby: /usr/bin/ruby /usr/bin/ruby1.8 /usr/lib/ruby /usr/share/man/man1/ruby.1.gz
$ which rails
/usr/local/bin/rails
$ which ruby
/usr/bin/ruby 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:57:02.657

当您键入时`ruby`，您仍在点击系统红宝石，而不是 rvm 红宝石。

您是否遵循此处的所有指示：[https](https://rvm.io//rvm/install/) ://rvm.io//rvm/install/ ？

看起来您正在运行 Linux ——您在 rvm 安装文档中看到此部分了吗？

```
If you open a new shell and running:

$ type rvm | head -1
does not show "rvm is a function", RVM isn't being sourced correctly.

Ensure that RVM is sourced after any path settings as RVM and manipulates the path. If you don't do this, RVM may not work as expected.

If you are using GNOME on Red Hat, CentOS or Fedora, ensure that the Run command as login shell option is checked under the Title and Command tab in Profile Preferences. After changing this setting, you may need to exit your console session and start a new one before the changes take affect. 
```

此外，在您打开控制台会话时，`rvm`向您的文件添加一些行以将`.bashrc`其自身加载到内存中。看起来这可能是您的问题。

例如，在我`.bashrc`的 中，`rvm`插入了以下内容：

```
export PATH=/opt/local/bin:/opt/local/sbin:/opt/local/lib/postgresql84/bin:$PATH
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"  # This loads RVM into a shell session.
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting 
```

你的有类似的吗？此外，如果您使用的是 z-shell，您可能需要执行安装文档中列出的一些额外步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T11:11:31.153

尝试

```
$ rvm use ruby-1.9.2-p320 
```

然后

```
$ ruby -v 
```

这会返回什么？

这应该在当前控制台中将您的 ruby​​ 版本更改为 ruby​​-1.9.2-p320 ，如果您希望在每个新打开的终端上使用它，您可以使用 --default 选项

尝试

```
$ rvm --default use ruby-1.9.2-p320 
```

然后

```
$ruby -v 
```

应该在当前和每个打开的新窗口终端中返回 ruby​​-1.9.2-p320 版本。任何时候你想回到你的系统 ruby​​ 安装使用

```
$ rvm use system 
```

# c++ - 在 C++ 中修剪字符串

> ID：11176852
> 
> 赞同：0
> 
> 时间：2012-06-24T10:56:22.443
> 
> 标签：c++, replace, trim

您好，我在 C++ 中修剪字符串时遇到问题。它在字符串的末尾添加了一些奇怪的字符。

```
string& Napis::subst(char cold, char cnew) { 
    string * s = new string(data); 
    replace(s->begin(),s->end(), cold, cnew);  
    return *s; // takes back string s with changed sign
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:01:11.000

我敢打赌你是`subst`在`cnew`设置为零的情况下跟注。您期望这会删除字符，但这不是它的作用。正如其名称所暗示的那样，它将它们替换为零。

怎么样：

```
string Napis::subst(char cold, char cnew) { 
    assert(cnew != 0);
    string s = data; 
    replace(s.begin(), s.end(), cold, cnew);  
    return s; // takes back string s with changed sign
} 
```

# emacs - 了解 Emacs CUA 模式的 shift 点击选择

> ID：11176853
> 
> 赞同：4
> 
> 时间：2012-06-24T10:56:39.787
> 
> 标签：emacs, cua-mode

我是 Emacs 的新手，正在弄清楚如何启用 shift-click 选择。在[CUA 模式](https://www.emacswiki.org/emacs/CuaMode)的 EmacsWiki 页面上，以下代码片段概述了如何执行此操作：

```
;; shift + click select region
(define-key global-map (kbd "<S-down-mouse-1>") 'ignore) ; turn off font dialog
(define-key global-map (kbd "<S-mouse-1>") 'mouse-set-point)
(put 'mouse-set-point 'CUA 'move) 
```

我不明白最后一行如何启用选择。我研究了**put**的定义：

```
put is a built-in function in `C source code'.

(put SYMBOL PROPNAME VALUE)

Store SYMBOL's PROPNAME property with value VALUE.
It can be retrieved with `(get SYMBOL PROPNAME)'. 
```

和 **mouse-set-point**的定义：

```
mouse-set-point is an interactive compiled Lisp function in
`mouse.el'.

It is bound to <S-mouse-1>, <triple-mouse-1>, <double-mouse-1>,
<mouse-1>.

(mouse-set-point EVENT)

Move point to the position clicked on with the mouse.
This should be bound to a mouse click event type. 
```

但他们都没有提供任何线索。我找不到任何名为**move**的变量或函数，并且我还查看了 mouse.el、cua-base.el、cua-gmrk.el 和 cua-rect.el 的源代码。

有人会解释最后一行是如何工作的，以及我如何自己找到更多信息？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T18:18:19.360

我没有深入研究 CUA 模式，但我了解您在寻找什么。'put' 是符号属性列表的函数。在这种情况下，符号是鼠标设置点，并且您正在将该符号的属性“CUA”设置为值“移动”。要读回符号的属性值，您可以使用函数“get”。您可以在 GNU 网页上的 Elisp 参考手册中找到更多带有示例的文档。

我在 cua-*.el 中查找了对 CUA 属性的引用，果然，在 cua-base.el 中找到了一个：（我使用的是 Emacs 23.3.1）

```
 (defun cua--pre-command-handler-1 ()
  ;; Cancel prefix key timeout if user enters another key.
  (when cua--prefix-override-timer
    (if (timerp cua--prefix-override-timer)
    (cancel-timer cua--prefix-override-timer))
    (setq cua--prefix-override-timer nil))

  (cond
   ;; Only symbol commands can have necessary properties
   ((not (symbolp this-command))
    nil)

   ;; Handle delete-selection property on non-movement commands
   ((not (eq (get this-command 'CUA) 'move)) 
```

我想你可以从这里弄清楚该物业的用途。希望这可以帮助。

# php - 年份的唯一 ID

> ID：11176854
> 
> 赞同：-9
> 
> 时间：2012-06-24T10:56:41.350
> 
> 标签：php, uniqueidentifier

我正在寻找如何生成一个唯一的 ID，该 ID 将在一年内保持唯一。我使用`uniqid()`函数，但我听说有重复的机会，所以我这样做： $id = rand(0,1000) 。独特的（）；

这会保持一整年的独特性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T12:04:49.360

确保数据集中有唯一 ID 的唯一方法是对其进行测试。

```
$id = uniqid(2012); //returns a 13 character string plus it will append 2012 for 17 characters.
$resultSet = //get dataSet from somewhere

foreach($resultSet as $row) {
    if ($row['id'] = $id) {
    //do some stuff
   }
} 
```

这是一个简单的示例，说明如何在一个简单的应用程序中进行处理。我敢肯定也可能有一种方法可以执行此 SQL（但我不太了解 SQL）。

或者，您可以让数据库从 1 开始，并为其 ID 分配每个记录的*唯一*值。

你没有提到你的目的，所以这些建议是最好的猜测。

祝你好运。

# java - 始终在 egit 中使用远程存储库

> ID：11176857
> 
> 赞同：1
> 
> 时间：2012-06-24T10:57:20.983
> 
> 标签：java, eclipse, github, egit

我已经浏览了这里的 egit 教程文档[http://wiki.eclipse.org/EGit/User_Guide](http://wiki.eclipse.org/EGit/User_Guide)。

我现在在笔记本电脑上有一个带有 eclipse 项目的 git 存储库，并且可以将其推送到 git hub 上的远程 git 存储库。但是，这意味着我有两个 git 存储库——一个是本地的，一个是远程的。我想我宁愿只使用遥控器。这意味着任何时候我提交，它都会提交到远程并且没有本地存储库。

这个egit有可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:08:24.937

git 是一个[分布式版本控制系统](http://betterexplained.com/articles/intro-to-distributed-version-control-illustrated/)。根据定义，这意味着每个开发人员都有自己的存储库。

我没有使用 egit 的经验，但您可以[配置一个钩子以在提交后自动推送](http://snipplr.com/view/7165/)。

此外，在 git *cli*中，您可以设置[一个别名](https://git.wiki.kernel.org/index.php/Aliases)以仅一步完成提交和推送过程，但无论如何，都需要本地存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T21:37:28.820

您应该始终有一个本地存储库可以使用。首先将存储库拉到本地存储库，执行更改并推送回远程存储库。

# iphone - xcode iphone 4核心情节框架，故事板的UIView麻烦

> ID：11176858
> 
> 赞同：0
> 
> 时间：2012-06-24T10:57:21.873
> 
> 标签：iphone, uiview, frameworks, storyboard, core-plot

[您好已使用核心绘图框架http://www.switchonthecode.com/tutorials/using-core-plot-in-an-iphone-application](http://www.switchonthecode.com/tutorials/using-core-plot-in-an-iphone-application)遵循本教程

我的项目编译，但在尝试视图时崩溃。我想我与 UIView / 故事板有关。尽管我已经将 UIView 中的类更改为**CPTGraphHostingView**我仍然收到以下错误

*由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIView setHostedGraph:]: unrecognized selector sent to instance 0x6b8afe0”*

有任何想法吗 ？下面的代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    //CPTGraphHostingView *hostingView = (CPTGraphHostingView *) self.view;
    //CPTGraphHostingView *hostingView = [[CPTGraphHostingView alloc] initWithFrame:self.view.bounds];
    //[self.view addSubview:hostingView];
    hostingView.hostedGraph = graph;

    graph.plotAreaFrame.plotArea.fill = [CPTFill fillWithColor:[CPTColor whiteColor]];

    hostingView.hostedGraph = graph;
    graph.paddingLeft = 20.0;
    graph.paddingTop = 20.0;
    graph.paddingRight = 20.0;
    graph.paddingBottom = 20.0;

    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(-6) 
                                                    length:CPTDecimalFromFloat(12)];
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(-5) 
                                                    length:CPTDecimalFromFloat(30)];

    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;

    CPTMutableLineStyle *lineStyle = [CPTMutableLineStyle lineStyle];
    lineStyle.lineColor = [CPTColor blackColor];
    lineStyle.lineWidth = 2.0f;

    axisSet.xAxis.majorIntervalLength = [[NSNumber numberWithInt:5] decimalValue];
    axisSet.xAxis.minorTicksPerInterval = 4;
    axisSet.xAxis.majorTickLineStyle = lineStyle;
    axisSet.xAxis.minorTickLineStyle = lineStyle;
    axisSet.xAxis.axisLineStyle = lineStyle;
    axisSet.xAxis.minorTickLength = 5.0f;
    axisSet.xAxis.majorTickLength = 7.0f;
    axisSet.xAxis.labelOffset = 3.0f;

    axisSet.yAxis.majorIntervalLength = [[NSNumber numberWithInt:5] decimalValue];
    axisSet.yAxis.minorTicksPerInterval = 4;
    axisSet.yAxis.majorTickLineStyle = lineStyle;
    axisSet.yAxis.minorTickLineStyle = lineStyle;
    axisSet.yAxis.axisLineStyle = lineStyle;
    axisSet.yAxis.minorTickLength = 5.0f;
    axisSet.yAxis.majorTickLength = 7.0f;
    axisSet.yAxis.labelOffset = 3.0f;

    CPTScatterPlot *xSquaredPlot = [[CPTScatterPlot alloc] initWithFrame:graph.defaultPlotSpace.accessibilityFrame];
    xSquaredPlot.identifier = @"X Squared Plot";
    CPTMutableLineStyle *ls1 = [CPTMutableLineStyle lineStyle];
    ls1.lineWidth = 1.0f;
    ls1.lineColor = [CPTColor redColor];
    xSquaredPlot.dataLineStyle = ls1;
    xSquaredPlot.dataSource = self;
    [graph addPlot:xSquaredPlot];

    CPTPlotSymbol *greenCirclePlotSymbol = [CPTPlotSymbol ellipsePlotSymbol];
    greenCirclePlotSymbol.fill = [CPTFill fillWithColor:[CPTColor greenColor]];
    greenCirclePlotSymbol.size = CGSizeMake(2.0, 2.0);
    xSquaredPlot.plotSymbol = greenCirclePlotSymbol;  

    CPTScatterPlot *xInversePlot = [[CPTScatterPlot alloc] initWithFrame:graph.defaultPlotSpace.accessibilityFrame];

    xInversePlot.identifier = @"X Inverse Plot";
    CPTMutableLineStyle *ls2 = [CPTMutableLineStyle lineStyle];
    ls2.lineWidth = 1.0f;
    ls2.lineColor = [CPTColor blueColor];
    xInversePlot.dataLineStyle = ls2;
    xInversePlot.dataSource = self;
    [graph addPlot:xInversePlot];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:12:17.497

我在编译器选项中添加了 -Load_All 和 -ObjC，然后似乎没问题 :-)

# c# - 如何在不使用隐藏字段的情况下在回发期间获取 json 字符串？

> ID：11176861
> 
> 赞同：0
> 
> 时间：2012-06-24T10:57:45.447
> 
> 标签：c#, jquery, asp.net, json

这似乎是一个奇怪的问题，但我确实认为这应该是可能的。

这是我想介绍的整个背景，以便您更清楚地了解我想要实现的目标。

我有一个我的项目使用的框架 dll 库。在库中，我嵌入了一个 .js 文件（我们称之为 b.js），它创建了一个 javascript 对象（bjobj），其中包含用于我所有冗余 js 所需功能的 api。

类库还包含一个类（我们称之为 bpage），它扩展了 system.web.ui.page 类并提供了额外的功能。

在 bpage 中，我创建了一个包含 Dictionary 的属性，并允许扩展 bpage 的页面将结构、可为空的结构和字符串添加到字典中。

将值添加到字典后，开发人员现在可以通过 bjob​​j 对象通过 api 方法访问 javascript 中的值。

我的 bpage 创建 json 字符串并使用 clientscript.register... 方法将其发送到 bjob​​j。

不使用隐藏变量，解析时浏览器会自动将 json 字符串识别为 json 对象。

这样做消除了在页面上使用隐藏变量的需要。

整个技术的一个大缺点是，对浏览器上的变量所做的更改无法在服务器上检索，因为一切都发生在框架 dll 中。

我现在需要一种机制，使用它不需要对扩展 bpage 的页面进行任何更改，但是从我的框架 cs 代码和 js 代码中，我可以自动将在 json 对象中所做的更改返回到服务器上。

为了实现预期的功能，我目前似乎需要两个功能。

首先，我的 bjob​​j 需要能够自动捕获任何回发事件，以便它可以在回发开始之前对 json 对象进行字符串化。

其次，必须有某种机制可以在不使用隐藏字段的情况下将字符串化的 json 发送回服务器，以便我的 bpage 可以捕获字符串并对其进行反序列化。

请提供您对我正在尝试的技术的见解。我的目标是确保我的代码库看起来更干净并提高开发速度。

# html - 在表格单元格中使用 colspan=2 与没有 colspan 的其他单元格，即 colspan=1

> ID：11176863
> 
> 赞同：0
> 
> 时间：2012-06-24T10:57:58.323
> 
> 标签：html, html-table

我遇到了一个关于表格的问题，更具体地说是单元格的 colspan 属性（td 标签），我想做这样的事情：

```
*** ------- +++
------- *** +++ 
```

每个符号都是一个单元格，您可能会注意到，第一行的第 2 列具有 colspan=2，因为它与第 2 行的第 1 列和第 2 列共享，同时第 2 行的第 1 列共享从第一行开始，列号为 1 和 2 的空间。

我已经尝试过（参见下面的代码），但当然（至少在 chrome 和 Firefox 中）它不能按预期工作。我认为这是可以实现的，但我缺乏想法，我将非常感谢您的建议。

```
<TABLE>
<TR>
    <TD>1</TD>
    <TD COLSPAN="2">2</TD>
    <TD>3</TD>
</TR>
<TR>
    <TD COLSPAN="2">4</TD>
    <TD>5</TD>
    <TD>6</TD>
</TR>
</TABLE> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:46:17.230

经过一番搜索，我找到了解决方案，看来您必须使用 col 标签，尚不知道为什么，但它确实有效！

```
<TABLE>
<col style="width: 1px;">
<col style="width: 1px;">
<col style="width: 1px;">
<col style="width: 1px;">
<TBODY>
<TR>
    <TD BGCOLOR="#CDB599"></TD>
    <TD COLSPAN="2" BGCOLOR="#9CC5C9"></TD>
    <TD BGCOLOR="#CDB599"></TD>
</TR>
<TR>
    <TD COLSPAN="2" BGCOLOR="#D5544F"></TD>
    <TD BGCOLOR="#CDB599"></TD>
    <TD BGCOLOR="#CDB599"></TD>
</TR>
</TBODY>
</TABLE> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:14:19.013

您没有指定您希望标记如何工作​​，但它的工作方式是第二列中的插槽是零宽度，因为没有任何东西需要它们的任何最小宽度。如果您添加第三行，您可以看到这一点，其中包含四个普通单元格：

```
<tr><td>foo<td>bar<td>more<td>stuff 
```

然后第二列将采用“bar”所需的宽度。

# windows-phone-7 - 安装位置应用程序时的 Windows Phone 隐私策略默认消息？

> ID：11176864
> 
> 赞同：0
> 
> 时间：2012-06-24T10:58:09.287
> 
> 标签：windows-phone-7

我正在构建一个使用位置服务 api 的应用程序。

但是，我不确定在安装应用程序时是否必须实施默认的 Windows Phone 隐私策略消息？当用户开始使用我的应用程序时，我已经完成了权限功能，但我不确定如何处理安装消息？通过提交向导设置应用的类别时是否默认设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:17:35.650

Microsoft 将检测您的应用使用哪些服务，并提示用户您的应用包含这些服务，并要求他们确认是否允许继续安装。所以在这方面你不需要做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T20:12:13.840

我不确定您在应用程序中实现权限功能的程度，但只是为了确定：您需要在首次启动时提示隐私声明、关闭位置服务的选项以及再次访问该声明的链接。我没有正确阅读指南，因此注定了我的应用程序的认证。

# javascript - 在跨浏览器拆分中意外使用“>>>”

> ID：11176878
> 
> 赞同：2
> 
> 时间：2012-06-24T10:59:58.543
> 
> 标签：javascript, split, jshint

我将[跨浏览器拆分](http://blog.stevenlevithan.com/archives/cross-browser-split)到我的代码中并通过 jsHint 运行它并进入`Unexpected use of '>>>'`：

```
limit = limit === undef ?
    -1 >>> 0 : // Math.pow(2, 32) - 1
    limit >>> 0; // ToUint32(limit) 
```

当我把它放在一行中并且将表达式放入括号中时也是如此

这是错误吗？我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T11:23:15.790

您可以通过关闭“使用位运算符时”选项（[此处](http://www.jshint.com/options/)列出的顶部选项）来禁用错误（嗯，他们真的应该 称之为警告）到）; 如果你这样做，上面的代码不会产生错误。

[以下是](http://www.jslint.com/lint.html#bitwise)有关使用原始 JSLint 工具中的位运算符的警告的基本原理（JSHint 是 JSLint 的更友好版本，具有更多选项来关闭纯样式的“错误”）：

> **位运算符**
> 
> JavaScript 没有整数类型，但它有位运算符。位运算符将其操作数从浮点数转换为整数并返回，因此它们的效率不如 C 或其他语言。它们在浏览器应用程序中很少有用。与逻辑运算符的相似性可以掩盖一些编程错误。该`bitwise`选项允许使用这些运算符：`<<` `>>` `>>>` `~` `&` `|`.

# java - AlertDialog.setButton 不能更改按钮文本？

> ID：11176879
> 
> 赞同：3
> 
> 时间：2012-06-24T10:59:59.970
> 
> 标签：java, android, android-button, android-dialog

我已经设置了一个自定义的 AlertDialog（实际上是一个自定义的 TimePickerDialog）。我正在使用 OnShowListener，根据条件更新按钮文本。我把这段代码放在一个单独的方法上：

```
private void changeState(){
    if(!SleepAlarm.isActive()){
        Log.d("RPod_MainActivity","SleepAlarm is NOT active");
        this.setButton(TimePickerDialog.BUTTON1,(CharSequence)MainActivity.currentContext.getResources().getText(R.string.sleep_enable), sleepEnable);
        this.setButton(TimePickerDialog.BUTTON2,(CharSequence)MainActivity.currentContext.getResources().getText(R.string.sleep_cancel), sleepDisable);
    }
    else{
        Log.d("RPod_MainActivity","SleepAlarm is active");
        this.setButton(TimePickerDialog.BUTTON1,(CharSequence)MainActivity.currentContext.getResources().getText(R.string.sleep_change), sleepEnable);
        this.setButton(TimePickerDialog.BUTTON2,(CharSequence)MainActivity.currentContext.getResources().getText(R.string.sleep_disable), sleepDisable);
    }
    this.setTitle(R.string.sleep_title);
} 
```

一旦我按下 TimePickerDialog.BUTTON1 按钮，当我再次显示对话框时，条件就满足了，文本应该会改变。但事实并非如此。

我已经用 LogCat 检查了情况是否正常。第一次打开对话框时，我看到“SleepAlarm 未激活”。按下第一个按钮后，再次打开对话框时，我看到“SleepAlarm 处于活动状态”......但按钮文本是相同的！

以下是字符串：

```
<string name="sleep_enable">Enable</string>
<string name="sleep_disable">Disable</string>
<string name="sleep_cancel">Cancel</string>
<string name="sleep_change">Change</string> 
```

**编辑**：我使用以下代码创建了对话框：

```
showDialog(TIME_DIALOG_ID); 
```

onCreateDialog 实现：

```
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case TIME_DIALOG_ID:
        // set time picker as current time
        timePicker = new SleepPickerDialog(this,this);
        return timePicker;
    }
    return null;
} 
```

和 SleepPickerDialog（扩展 TimePickerDialog）构造函数：

```
public SleepPickerDialog(Context context, OnTimeSetListener listener){
    super(context, listener, MainActivity.sleep_hour, MainActivity.sleep_hour, true);
    changeState();
    this.setOnShowListener(showListener);
} 
```

算法，onShowListener：

```
private DialogInterface.OnShowListener showListener = new DialogInterface.OnShowListener() {
    @Override
    public void onShow(DialogInterface dialog) {
        // Cambiar botones
        changeState();
    }
}; 
```

我错过了一些重要的东西？

**有关解决方案，请参阅已接受的答案评论。我在这里发布完整的代码更改：**

```
public SleepPickerDialog(Context context, OnTimeSetListener listener){
    super(context, listener, MainActivity.sleep_hour, MainActivity.sleep_hour, true);
    this.setButton(BUTTON_POSITIVE,(CharSequence)MainActivity.currentContext.getResources().getText(R.string.sleep_enable), sleepEnable);
    this.setButton(BUTTON_NEGATIVE,(CharSequence)MainActivity.currentContext.getResources().getText(R.string.sleep_cancel), sleepDisable);
    this.setOnShowListener(showListener);
}

private void changeState(){
    if(!SleepAlarm.isActive()){
        this.getButton(BUTTON_POSITIVE).setText(R.string.sleep_enable);
        this.getButton(BUTTON_NEGATIVE).setText(R.string.sleep_cancel);
    }
    else{
        this.getButton(BUTTON_POSITIVE).setText(R.string.sleep_change);
        this.getButton(BUTTON_NEGATIVE).setText(R.string.sleep_disable);
    }
    this.setTitle(R.string.sleep_title);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T11:53:29.243

看到这个[链接](https://stackoverflow.com/questions/10284165/can-i-change-the-label-of-the-set-button-in-a-timepickerdialog)按照它的工作原理

尝试

```
yourTimePickerDialog.getButton(whichButton).setText("New Text"); (put the null check if needed)

or 

yourTimePickerDialog.setButton(BUTTON_POSITIVE, "Find", yourTimePickerDialog); 
```

# php - 如何在控制器的 __construct() 函数中退出没有 die() 的 codeigniter？

> ID：11176880
> 
> 赞同：2
> 
> 时间：2012-06-24T11:00:05.940
> 
> 标签：php, codeigniter

我有一个控制器，在构造函数中，我想检查用户是否登录。如果没有，我希望显示一条错误消息，并让脚本退出而不在控制器中运行任何其他功能。此控制器将仅由 ajax 调用，因此错误将通过 JSON 显示，然后客户端上的 javascript 将其显示给用户。

我怎样才能做到这一点？如果我这样做：

```
function __construct()
{
   if (! $this->loggedIn() )
   {
      echo json_encode( array('error'=> true) );
      die;
   }    
} 
```

我认为不会显示该消息，因为 codeigniter 使用输出缓冲。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T13:37:44.047

最好的方法是将用户重定向到登录页面。如此处所述：[https ://stackoverflow.com/a/10399199/876117](https://stackoverflow.com/a/10399199/876117)

```
public function __construct(){
  parent::__construct();
  if(!userLoggedIn())
    $this->load->view('promptlogin');
    $this->output->_display();
    exit();

}

public function index(){
  // one will never reach here unless he is logged in
  $this->load->view('actualcontent');
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T15:41:07.540

我知道您的问题是客户期望 json 类型的响应，因此有两种选择：

```
public function __construct(){

    $_bad_login_msg = 'please try again' ;
    parent::__construct();

    if(!userLoggedIn()){

        $this->output
        ->set_content_type('application/json')
        ->set_output(json_encode($_bad_login_msg));

        //or just use 
        //     echo json_encode($_bad_login_msg);
        die;
    }
} 
```

[http://codeigniter.com/user_guide/libraries/output.html](http://codeigniter.com/user_guide/libraries/output.html)

你不会有任何缓冲问题，缓冲内容将在模具**后发送到客户端......**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T11:36:42.570

我很确定你可以使用这样的东西：

```
function __construct()
{
   if (! $this->loggedIn() )
   {
     exit('Please login before visiting this page');
   }    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T02:44:24.720

MY_Controller 是您的顶级/父控制器，所以它都在那里完成，因为每个其他控制器都会扩展它。因此，如果您有一个身份验证控制器（它扩展了 MY_Controller），您将可以访问它的逻辑。

**所以 MY_Controller**

```
class MY_Controller extends CI_Controller{

    protected $_user;

    public function __construct(){
        parent::__construct();

        $this->_user = $this->session->userdata('uid')
                     ? find_a_user : NULL;
        // if a session of user_id exists and is found in DB
        // we have a live user
    }
} 
```

**认证**

```
class Auth extends MY_Controller{
   public function __construct(){
        parent::__construct();
        // we now have access to $this->_user

        if($this->_user !== NULL)  // we have active user
    }
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-25T08:19:32.363

我认为您应该使用[flashdata](http://codeigniter.com/user_guide/libraries/sessions.html)并使用它重定向到控制器。然后您可以控制是否有任何 flashdata 进入会话，然后将其写入视图。

# iphone - 我应该如何开发适用于 iOS 的 Google OAuth 2，以及原始的 google 登录 UI？

> ID：11176882
> 
> 赞同：0
> 
> 时间：2012-06-24T11:00:17.700
> 
> 标签：iphone, xcode, ipad, oauth-2.0, google-reader

我打算为谷歌服务编写一个应用程序，但我停留在第一步：`let user sign in for google's services`.

我可以`gtm-OAuth2`从 Google 的代码库中找到库。但问题是我不知道如何加载谷歌的默认登录页面——就像一些应用程序正在做的那样（下面是截图）：

![谷歌登录页面](../Images/7f8a02f50681b3cee31e7f00458c7a63.png)

有人给我一些提示吗？

我在哪里可以为 iphone 加载此页面以及如何获取登录信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:59:23.750

此页面由提供：[Google OAuth 2 登录流程](https://developers.google.com/accounts/docs/OAuth2InstalledApp)

# lua - 在 Freeswitch 中转义 Lua 参数

> ID：11176885
> 
> 赞同：1
> 
> 时间：2012-06-24T11:00:43.470
> 
> 标签：lua, escaping, freeswitch

在 Freeswitch 中，传递给 lua 脚本的参数是用空格分隔的（参见[http://wiki.freeswitch.org/wiki/Mod_lua#Passing_Arguments](http://wiki.freeswitch.org/wiki/Mod_lua#Passing_Arguments)）。

我已经确定您可以将参数用单引号括起来，然后忽略空格，但我无法弄清楚如何转义单引号。

应该如何将带空格的参数传递给 Lua？

要重现问题：

示例 Lua 脚本：

```
argumentOne=argv[1];
argumentTwo=argv[2];
argumentThree=argv[3];
argumentFour=argv[4];

freeswitch.consoleLog("info", "*******************\n");
freeswitch.consoleLog("info", argumentOne);
freeswitch.consoleLog("info", "\n");
freeswitch.consoleLog("info", argumentTwo);
freeswitch.consoleLog("info", "\n");
freeswitch.consoleLog("info", argumentThree);
freeswitch.consoleLog("info", "\n");
freeswitch.consoleLog("info", argumentFour);
freeswitch.consoleLog("info", "\n");
freeswitch.consoleLog("info", "*******************\n"); 
```

这工作正常：

```
freeswitch@internal> luarun luaargumenttest.lua one two 'thr ee'  four
+OK

freeswitch@internal> 2012-06-24 11:56:55.873757 [INFO] switch_cpp.cpp:1197 *******************
2012-06-24 11:56:55.873757 [INFO] switch_cpp.cpp:1197 one2012-06-24 11:56:55.873757 [INFO] switch_cpp.cpp:1197
2012-06-24 11:56:55.873757 [INFO] switch_cpp.cpp:1197 two2012-06-24 11:56:55.873757 [INFO] switch_cpp.cpp:1197
2012-06-24 11:56:55.873757 [INFO] switch_cpp.cpp:1197 thr ee2012-06-24 11:56:55.873757 [INFO] switch_cpp.cpp:1197
2012-06-24 11:56:55.873757 [INFO] switch_cpp.cpp:1197 four2012-06-24 11:56:55.873757 [INFO] switch_cpp.cpp:1197
2012-06-24 11:56:55.873757 [INFO] switch_cpp.cpp:1197 ******************* 
```

但是我将如何发送参数值“three's a crowd”？

我试过 \', '', ''' 和 " and \" 但这些都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:00:48.267

我试过这个例子，可以逃脱'罚款。这是在最新的 GIT 上完成的吗？

```
lua q.lua one two 'three\'s a crowd'  four
2012-06-24 13:52:55.376758 [INFO] switch_cpp.cpp:1227 *******************
2012-06-24 13:52:55.376758 [INFO] switch_cpp.cpp:1227 one
2012-06-24 13:52:55.376758 [INFO] switch_cpp.cpp:1227 two
2012-06-24 13:52:55.376758 [INFO] switch_cpp.cpp:1227 three's a crowd
2012-06-24 13:52:55.376758 [INFO] switch_cpp.cpp:1227 four
2012-06-24 13:52:55.376758 [INFO] switch_cpp.cpp:1227 ******************* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T11:35:23.287

我查看了 FreeSWITCH 代码，看起来没有办法逃脱单引号：

这里 mod_lua 调用 switch_separate_string() [https://github.com/FreeSWITCH/FreeSWITCH/blob/ee8c9e869ba0da3d4f620769c1e241be71d99e6f/src/mod/languages/mod_lua/mod_lua.cpp#L156](https://github.com/FreeSWITCH/FreeSWITCH/blob/ee8c9e869ba0da3d4f620769c1e241be71d99e6f/src/mod/languages/mod_lua/mod_lua.cpp#L156)

这里 switch_separate_string 调用了separate_string_blank_delim()，它只捕获一个单引号作为参数分隔符： [https ://github.com/FreeSWITCH/FreeSWITCH/blob/ee8c9e869ba0da3d4f620769c1e241be71d99e6f/src/switch_utils.c#L2062](https://github.com/FreeSWITCH/FreeSWITCH/blob/ee8c9e869ba0da3d4f620769c1e241be71d99e6f/src/switch_utils.c#L2062)

# c++ - 使用 allegro5 在 Xcode 上创建 c++ 项目

> ID：11176886
> 
> 赞同：1
> 
> 时间：2012-06-24T11:00:59.010
> 
> 标签：c++, xcode, allegro

我最近尝试使用 allegro5 在 Xcode 上创建一个 c++ 项目。我创建一个 c++ 项目没有问题，但是在尝试使用 allegro 时遇到了一些困难。

我按照以下教程安装并绑定 allegro 到 Xcode： [http ://wiki.allegro.cc/index.php?title=OSX,_Xcode_4,_Framework](http://wiki.allegro.cc/index.php?title=OSX,_Xcode_4,_Framework)

这里的第一个问题是本教程没有使用 c++ 项目，而是使用 cocoa 应用程序。但是，我仍然按照步骤进行操作，最后，当我尝试构建时，Xcode 返回以下错误：'allegro5/allegro.h' 文件未找到

我一直试图在谷歌上寻找任何帮助，但没有成功。

如果有人可以帮助我，那就太好了。

谢谢

# c# - 插入 RavenDB；最快的方式

> ID：11176887
> 
> 赞同：2
> 
> 时间：2012-06-24T11:01:05.813
> 
> 标签：c#, asynchronous, insert, nosql, ravendb

我想将文本文件中的 1 亿个条目（每一行是一个类似 csv 的条目）导入 RavenDB 数据库。最快的方法是什么？

补充说明：

我还没有任何索引（我将在插入数据后创建它们）。RavenDB 在本地机器上以服务模式运行，没有增强安全性（但是；因为我仍在测试 RavenDB）。该测试将在 2 台不同的机器上运行，1）2 核 4GB 内存 2）8 核 12 GB 内存。

我已经将部分数据（200 万个条目）插入到 RavenDB 中，但它并没有我想要的那么快。通过使用 OpenAsyncSession 并为每 1024 条记录调用 SaveChangesAsync，并通过调用 OpenAsyncSession 并且在 500`000 个左右条目后不等待返回任务（由 SaveChangesAsync 返回）再次创建一个新会话，我得到一个“索引超出范围”异常，我不能根除。但是，如果我等待任务结束（通过创建与内核数相同的任务），进程将成功但不够快。

此代码运行成功：

```
using (var reader = new StreamReader(@"D:\*\DATA.TXT", Encoding.UTF8))
{
    string line = null;
    IAsyncDocumentSession session = null;

    var tasks = new List<Task>();
    var locCount = 0;

    while ((line = reader.ReadLine()) != null)
    {
        if (string.IsNullOrWhiteSpace(line)) continue;

        var loc = Parse(line);

        if (session == null) session = documentStore.OpenAsyncSession();

        session.Store(loc);
        locCount++;

        if (locCount % 1024 == 0 && session != null)
        {
            try
            {
                var t = session.SaveChangesAsync();
                tasks.Add(t);
                session = null;
            }
            catch (Exception x)
            {
                // ... something ...
            }
        }

        if (tasks.Count >= NUMBER_OF_CORES)
        {
            Task.WaitAll(tasks.ToArray());
            tasks.Clear();
        }
    }

    if (session != null)
    {
        if (tasks.Count > 0)
        {
            Task.WaitAll(tasks.ToArray());
            tasks.Clear();
        }
        session.SaveChangesAsync().Wait();
        session = null;
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T07:40:35.570

Kaveh,

There are a number of issues here.

1) RavenDB models *very rarely* map to CSV files. If you have a CSV file, you usually have tabular format, and that isn't a good format to port to RavenDB. You can probably get better results by getting good models.

2) You code, without the `if (tasks.Count >= NUMBER_OF_CORES)`, will generate as many tasks as possible (subject to the limit of reading lines from the file, which is *really* fast. This will tend to generate thousands of concurrent tasks, and will overload the number of requests RavenDB can insert at once.

3) 使用标准会话，使用 1,024 - 2,048 的批量大小。让它运行。RavenDB 在优化方面非常出色，我希望您可以轻松地看到每秒数千次插入。

但是，同样，您可能在建模错误。

# android - Android取参数打开文件

> ID：11176891
> 
> 赞同：0
> 
> 时间：2012-06-24T11:01:35.237
> 
> 标签：android, arguments

当用户从文件资源管理器中单击它时，寻找一种方法来获取与我的 Android 应用程序关联的文件路径（然后在应用程序中处理它）。

示例：当您在文件资源管理器中单击选定文件时，内置媒体播放器会打开 .mp3 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:25:07.010

添加一个`<intent-filter>`支持`VIEW`动作和适当的 MIME 类型和/或文件扩展名的活动，例如来自[AOSP 音乐应用程序的](https://github.com/android/platform_packages_apps_music/blob/master/AndroidManifest.xml)这个：

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="file"/>
            <data android:mimeType="audio/*"/>
            <data android:mimeType="application/ogg"/>
            <data android:mimeType="application/x-ogg"/>
            <data android:mimeType="application/itunes"/>
        </intent-filter> 
```

# php - 如何删除此 PHP 代码中的回声？

> ID：11176894
> 
> 赞同：-1
> 
> 时间：2012-06-24T11:02:06.823
> 
> 标签：php

我有以下 PHP 代码

```
#The facebook message
$fh = fopen('comments.txt', 'r') or die('Unable to open data1.txt');
while($line = fgetcsv($fh, 0, '||' )) {
   if ($line[0] == $name) {
       echo <<<EOL
My color is $line[2]
EOL;
       break; // if there's only ever one '5678' line in the, get out now.
   }
}
fclose($fh);
$fb = $line[2]; 
```

我想删除回声，即请删除用户浏览器上的“我的颜色是....”。请问如何删除代码而不会出现任何错误？

我尝试了很多次......我仍然是PHP的初学者。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:02:54.977

```
// echo <<<EOL
// My color is $line[2]
// EOL; 
```

你可以注释掉这样的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T11:17:07.493

您可以注释掉或删除以下代码：

```
/*echo <<<EOL
My color is $line[2]
EOL;*/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T11:07:07.300

如果您在声明中没有任何处理`if`，您可以评论整个块：

```
#The facebook message
$fh = fopen('comments.txt', 'r') or die('Unable to open data1.txt');
while($line = fgetcsv($fh, 0, '||' )) {
   if ($line[0] == $name) {
       /*
       echo <<<EOL
       My color is $line[2]
       EOL;
       */
       break; // if there's only ever one '5678' line in the, get out now.
   }
}
fclose($fh);
$fb = $line[2]; 
```

# ruby - 在运行时在模块/命名空间中创建一个类

> ID：11176895
> 
> 赞同：7
> 
> 时间：2012-06-24T11:02:09.267
> 
> 标签：ruby, class, module, namespaces, runtime

**在运行时**创建一个类如下：

```
klass = Class.new superclass, &block
Object.const_set class_name, klass 
```

例子：

```
class Person
  def name
    "Jon"
  end
end

klass = Class.new Person do
  def name
    "#{super} Doe"
  end
end

Object.const_set "Employee", klass

puts Employee.new.name # prints "Jon Doe" 
```

现在，假设您有一个名为 Company 的模块：

```
module Company
end 
```

如何**在运行时**在 Company 模块/命名空间中创建 Employee 类，以便以下产生相同的结果？

```
puts Company::Employee.new.name # prints "Jon Doe" 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-24T11:05:36.740

比你想象的要容易:)

```
Company.const_set "Employee", klass 
```

当你`Object`在`Object`. 但是你可以`const_set`对每个类/模块做。请记住，模块/类只是常量。所以，`Company::Employee`是常数`Employee`中的常数`Company`。这很简单 ：）

完整代码：

```
class Person
  def name
    "Jon"
  end
end

klass = Class.new Person do
  def name
    "#{super} Doe"
  end
end

module Company
end

Company.const_set "Employee", klass

Company::Employee.new.name # => "Jon Doe" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T11:05:33.970

您已经拥有了所有必要的部分：

```
class Person
  def name
    "Jon"
  end
end

klass = Class.new Person do
  def name
    "#{super} Doe"
  end
end

module Company
end

Company.const_set "Employee", klass

puts Company::Employee.new.name # prints "Jon Doe"

Company.constants.grep(/Emp/)
#=> [:Employee] 
```

# android - 无法在 Fragment Activity 类下创建数据库管理器

> ID：11176898
> 
> 赞同：2
> 
> 时间：2012-06-24T11:02:22.693
> 
> 标签：android, sqlite, android-fragments

我现在正在尝试在 Fragment 类下创建新的数据库管理器。但不幸的是，我只是陷入了一些我以前从未遇到过的意外错误中。请看下面的代码。

```
public class About extends Fragment {
DBManager gDatabase = new DBManager(this);
private AboutInfo ai; 
```

错误代码是构造函数 DBManage(About) 未定义。提供两个快速修复：

> 将构造函数 'DBManager(Context) 更改为 'DBManager(About)'' 创建构造函数 'DBManager(About)'

这是我的数据库管理器代码。

```
public DBManager(Context context) {
    super(context, DB_NAME, null, 1);
    DBManager.myContext = context;
} 
```

我的代码有什么问题？任何快速帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T11:06:18.330

它需要一个活动上下文，而不是片段上下文。

尝试：

```
DBManager gDatabase = new DBManager(getActivity()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T11:05:28.400

使用新的 DBManager( `this.getActivity()`); 但是在 OnCreateView 或[onAttach' 之后调用的](https://stackoverflow.com/questions/6215239/getactivity-returns-null-in-fragment-function)其他函数中，根据 [Fragment](http://developer.android.com/reference/android/app/Fragment.html#Lifecycle) lifecyle ......

# android - 如何以“文件”的形式访问资源

> ID：11176899
> 
> 赞同：1
> 
> 时间：2012-06-24T11:02:39.650
> 
> 标签：android, android-resources

我在 android 应用程序中有一些文件作为资源。

另一方面，我有一些方法需要“文件”对象作为参数。

我该如何桥接两者？

**编辑：我需要一些方法来拥有一个“文件”对象，而不是将文件作为输入流读取。谢谢你！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:42:14.370

You could copy the file to external storage (reading from your raw resource's `InputStream` and writing to a new file) and then open it as a `File` from there. That's kludgy, but I'm pretty sure there's no way to get the resource as a `File` directly.

# android - Android：IncomingCallInterceptor TelephonyManager.EXTRA_STATE Toast 和 Vibration

> ID：11176900
> 
> 赞同：1
> 
> 时间：2012-06-24T11:02:40.417
> 
> 标签：android, telephonymanager

`Toast`当通话状态为空闲时，我想调出一个并振动。我在清单文件中添加了这个：

```
<receiver android:name="IncomingCallInterceptor"> 
      <intent-filter> 
         <action android:name="android.intent.action.PHONE_STATE"/> 
      </intent-filter> 
    </receiver> 
```

这是 IncomingCallInterceptor

```
import android.content.BroadcastReceiver; 
import android.content.Context;
import android.content.Intent;
import android.os.Vibrator;
import android.telephony.TelephonyManager;
 import android.widget.Toast;
 import android.app.Activity;

public class IncomingCallInterceptor extends BroadcastReceiver { 
     @Override
    public void onReceive(Context context, Intent intent)
    {                                        
        String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);                        
        String msg = "Phone state changed to " + state;

        if (TelephonyManager.EXTRA_STATE_RINGING.equals(state))
       {                                  
            String incomingNumber = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER);
            msg += ". Incoming number is " + incomingNumber;

        }

        Toast.makeText(context, msg, Toast.LENGTH_LONG).show();
        if(msg == "IDLE")
        {
          ok() ;
    }

    }
    public void ok() 
    { 

        Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
        v.vibrate(3000);
    }
     }
} 
```

我收到了这个错误：

```
Description Resource    Path    Location    Type
The method getSystemService(String) is undefined for the type IncomingCallInterceptor   IncomingCallInterceptor.java        line 39 Java Problem 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:38:22.520

确保您已在清单中添加了 VIBRATE 权限：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="...">
    <uses-permission android:name="android.permission.VIBRATE"/>
    <application android:label="...">
        ...
    </application>
</manifest> 
```

将您的代码更改为：

```
public class IncomingCallInterceptor extends BroadcastReceiver { 
private Context contextc;
 @Override
public void onReceive(Context context, Intent intent)
{                             
this.contextc=context;
//YOUR CODE HERE

public void ok() 
{ 
    Vibrator v = (Vibrator)contextc.getSystemService(Context.VIBRATOR_SERVICE);
    v.vibrate(3000);
} 
```

# sql - 将选择结果保存到变量中

> ID：11176903
> 
> 赞同：1
> 
> 时间：2012-06-24T11:03:12.867
> 
> 标签：sql, sql-server-2008-r2

我对这个陈述有一些问题

```
declare @result int

select @result =   (select 1 union select 2)

select @result 
```

消息 512，级别 16，状态 1，第 2 行子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

请帮忙T_T

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T11:05:51.187

An`int`只能存储一个值，不能存储两个。考虑使用整数数组：

```
declare @arr table (result int)
insert @arr (result) select 1 union select 2 
```

# c - 在 C99/C11 中使用预处理器嵌套 goto 标签？

> ID：11176905
> 
> 赞同：1
> 
> 时间：2012-06-24T11:03:18.880
> 
> 标签：c

是否可以使用 C 预处理器在 C11 或 C99 中嵌套 goto 标签？通过查看以下代码可能最好地说明我的情况。用`gcc -std=c99 -pedantic -Wall -Wextra`.

```
#include <stdio.h>

// Macro for mangling the identifier to avoid collisions
#define CTX_ID_(NAME) context_label_ ## NAME ## _
#define CTX_ID(NAME) CTX_ID_(NAME)

// The context keyword starts a block that can be exited with break (ID);
// Just syntactic sugar to keep it structured.
#define context(ID) \
    if (0) { CTX_ID(ID): ; } else

// Overloaded break keyword. Doesn't prevent using the plain break;    
#define break(ID) \
    do { goto CTX_ID(ID); } while (0)

// Example run
int main(void) {
    context (c) {
        while (1) {
            puts("Outer loop, visible.");
            while (1) {
                puts("Inner loop, visible.");
                break (c);
                puts("You won't see me.");
            }
        }
        puts("Nor me.");
    }
} 
```

我正在尝试取消标识符（在本例中为 c）。但是，与变量不同，goto 标签不能嵌套/限定范围，因为它们在函数中必须是唯一的。是否可以在 C 预处理器中实现可用作 goto 标签的唯一范围标识符？

GCC 支持获取标签的地址，但它不是 ISO 标准的一部分。此外，由于开销和易失性问题，我特别试图避免 setjmp。最后，如果您没有看到上述构造的用处，请考虑进一步使用，例如 try-catch 子句或 Python 风格的 with-expressions 来启用类似 RAII 的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:06:02.880

~~我敢肯定~~，`__LINE__`宏可能会派上用场。将没有范围，但至少您可以通过这种方式生成唯一的标签名称。

但是，这也不能立即解决您的问题。我要大胆地声明这是无法解决的，尽管~~我确信~~有人会出现并证明我错了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T16:42:49.413

你的想法看起来不错，我唯一想念的是你`break(c)`可以在函数的任何地方发出。我会在这两个宏中添加类似的内容：

```
#define CONTEXT(ID)                                     \
    if (0) { CTX_ID(ID): ; }                            \
    else for (register bool CTX_ID(ID ## ID) = true;    \
              CTX_ID(ID ## ID);                         \
              CTX_ID(ID ## ID) = false)

#define BREAK(ID)                \
    do {                         \
       CTX_ID(ID ## ID) = false; \
       goto CTX_ID(ID);          \
   } while (0) 
```

`BREAK(c)`如果将在依赖块之外使用，这将导致语法错误。根据我的经验，`for`这里使用的这些变量很容易被现代编译器优化掉。

# android - 活动的意图被忽略

> ID：11176906
> 
> 赞同：0
> 
> 时间：2012-06-24T11:03:28.317
> 
> 标签：android, android-intent

我有两个 Android 应用程序 - A 和 B。

应用程序 B 有两个 Activity，它的 Launcher Activity 我们称为 Activity 1，另一个称为 Activity 2。

应用程序 A 需要以任意顺序多次调用应用程序 B 的两个活动。

但我发现，如果我调用 Activity 2（来自应用程序 A），然后再调用 Activity 1 - 这是可行的。

什么不起作用是当我需要在我调用 Activity 1 之后的任何时候调用 Activity 2 时。

当我这样做时，无论如何我总是得到 Activity 1。

查看日志，我可以看到 ActivityManager 正在接收我在应用程序 A 的代码中设置的 Activity 2 的正确 ComponentName 的意图 - 但它仍然解析为 Activity 1。

唯一有效的是当我在活动 1 的 onPause() 方法中调用 finish() 时。如果我这样做 - 应用程序 A 可以毫无问题地调用应用程序 B 的两个活动。

这通常不是一个好的解决方案，但它绝对不是我的解决方案，因为我正在尝试定义与应用程序 A 的集成模式，预先存在的应用程序（在本例中为应用程序 B）可以遵循。

有什么方法可以通过我从应用程序 A 调用应用程序 B 的活动（而不是修改应用程序 B 中的活动配置）来改变这个结果。

目前，我通过 ComponentName 调用 Activity 1 和 Activity 2，如下所示：

```
Intent i = new Intent(Intent.ACTION_MAIN);
i.addCategory(Intent.CATEGORY_LAUNCHER);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
intent.setComponent(name);
context.startActivity(intent); 
```

唯一的区别是，对于非启动器活动（活动 2），我使用的是操作 VIEW 和类别 DEFAULT（与上面的 MAIN 和 LAUNCHER 相比）。

显然 Activity 2 还需要一个匹配该组合的意图过滤器 - 但假设它确实......

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:17:57.470

你已经看过不同的属性了`Activity`吗？`android:finishOnTaskLaunch`在我看来，好像它可以提供帮助。

[请参阅开发人员指南](http://developer.android.com/guide/topics/manifest/activity-element.html)中的完整列表。

# jsf - JSF Primefaces 左侧，居中布局

> ID：11176908
> 
> 赞同：0
> 
> 时间：2012-06-24T11:03:54.790
> 
> 标签：jsf, menu, primefaces

当我单击“左侧”菜单中的按钮时，我不明白如何在中心屏幕中显示。

现在我有了，当我单击“左”菜单中的按钮时，新页面打开时没有“左”菜单，但我不想要它，我需要“左”菜单没有消失。

下面是我的代码。

```
<h:head>
    <title>Facelet Title</title>
</h:head>
   <frameset rows="65,*" frameborder="0">
            <frame scrolling="no" src="header.xhtml"/>
            <frameset cols="200,*" frameborder="0">
                    <frame scrolling="no" src="menu.xhtml"/>
             </frameset>
    </frameset> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T11:14:37.977

基本上，您需要给目标框架 a并在元素的属性中`name`指定它。例如`target``<a>`

```
<frame name="center"> 
```

和

```
<a href="page.xhtml" target="center"> 
```

但这并不完全是模板化现代 Web 应用程序的正确方法。框架集在用户体验和 SEO 价值方面有许多缺点。相反，应该使用任何服务器端视图技术（如您正在使用的 Facelets）的包含和模板工具。只有当您手头完全没有服务器端视图技术（因此，只有纯 HTML）或您想要呈现外部网站时，才应使用框架集。

使用 Facelets，您应该使用类似这样的东西作为主模板

`/WEB-INF/templates/layout.xhtml`

```
<!DOCTYPE html>
<html lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <title><ui:insert name="title">Default title</ui:insert></title>
    </h:head>
    <h:body>
        <div id="header"><ui:include src="/WEB-INF/includes/header.xhtml"></div>
        <div id="menu"><ui:include src="/WEB-INF/includes/menu.xhtml"></div>
        <div id="content"><ui:insert name="content">Default content</ui:insert></div>
    </h:body>
</html> 
```

*（您可以使用 CSS 以您想要的方式定位布局组件，例如`float:left`on`#menu`和`#content`）*

这就是模板客户端（您实际通过 URL 打开的页面）的样子：

`/page.xhtml`

```
<ui:composition template="/WEB-INF/templates/layout.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:define name="title">
        New page title here
    </ui:define>

    <ui:define name="content">
        <h1>New content here</h1>
        <p>Blah blah</p>
    </ui:define>
</ui:composition> 
```

有关现代 JSF/Facelets Web 应用程序的开源示例，请查看[OmniFaces 展示应用程序](https://github.com/omnifaces/showcase)等。

当您使用 PrimeFaces 时，还有另一种选择，即`<p:layout>`. [请参阅其展示应用程序中的“完整示例”](http://www.primefaces.org/showcase/ui/layoutHome.jsf)，例如[这个](http://www.primefaces.org/showcase/ui/layoutFull.jsf)。

### 也可以看看：

*   [Java EE 6 教程 - Facelets](http://docs.oracle.com/javaee/6/tutorial/doc/giepx.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:55:23.293

这是一个简单的页眉、页面、页脚示例。您可以使用一个表单 ID 让所有人信不信由你。标头位于 WebContent/templates 中。另一个 .xhtml 可以放在 WebContent 中。如果您的@ManagedBean String 方法返回“second”，则会显示页面 second.xhtml。每个页面仍然与它自己的@ManagedBean 对话。

```
<body">
<f:view>
<div id="container">
<h:form id="templateForm">
    <div id="header">
        <ui:include src="header.xhtml" />
    </div>

    <div id="wrapper">
        <div id="firstId">
            <ui:insert name="first"></ui:insert>
        </div>
        <div id="secondId">
            <ui:insert name="second"></ui:insert>
        </div>
        <div id="inputMaskId">
            <ui:insert name="inputMask"></ui:insert>
        </div>
        <div id="valtestId">
            <ui:insert name="valtest"></ui:insert>
        </div>
    </div>

    <div id="footer">
        <ui:include src="footer.xhtml" />
    </div>
</h:form>
</div>      
</f:view>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T11:08:38.777

您的描述有点令人困惑，但我想 JSF 模板系统就是您所追求的，使您能够在多个页面上包含相同的代码（例如菜单）。框架非常过时，基本上不再使用。

[请参阅http://www.mkyong.com/jsf2/jsf-2-templating-with-facelets-example/](http://www.mkyong.com/jsf2/jsf-2-templating-with-facelets-example/)上的示例

作为进一步的评论，这个问题似乎与 Primefaces 无关（这是一个组件包，这些评论都不包含在您的代码中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-03T13:10:53.757

我们可以使用布局代替包含命名空间 xmlns:p="http://primefaces.org/ui"

```
<p:layout fullPage="true">
<p:layoutUnit position="north" size="100" header=
"Top" resizable="true" closable="true" collapsible="true">
<h:outputText value="Layout content for North" />
</p:layoutUnit>
<p:layoutUnit position="south" size="100" header="Bottom"
resizable="true" closable="true" collapsible="true">
<h:outputText value="Layout content for South" />
</p:layoutUnit>
<p:layoutUnit position="west" size="200" header=
"Left" resizable="true" closable="true" collapsible="true">
<h:outputText value="Layout content for West" />
</p:layoutUnit>
<p:layoutUnit position="east" size="200" header=
"Right" resizable="true" closable="true" collapsible="true">
<h:outputText value="Layout content for Right" />
</p:layoutUnit>
<p:layoutUnit position="center">
<h:outputText value="Layout content for Center" />
</p:layoutUnit>
</p:layout> 
```

这将呈现五个面板

# html - HTML5 应用缓存更新解决方案

> ID：11176910
> 
> 赞同：0
> 
> 时间：2012-06-24T11:04:16.337
> 
> 标签：html, application-cache

我可能会因为这个问题而受到一些关注，因为那里已经有很多了。

但是......每个问题都有不同的答案，没有一个有限的答案似乎是可靠的。

所以问题...如果我更新应用程序缓存清单中引用的脱机可用应用程序的文件，我如何在不更改清单的情况下强制更新清单和脱机缓存？

我希望这很清楚。为了表明我已经做了一些研究：

[如何正确地使在线/离线 Web 应用程序的 HTML5 缓存清单失效？](https://stackoverflow.com/questions/1715568/how-to-properly-invalidate-an-html5-cache-manifest-for-online-offline-web-apps)

[https://stackoverflow.com/a/8211563/491044](https://stackoverflow.com/a/8211563/491044)

[更新缓存](http://www.html5rocks.com/en/tutorials/appcache/beginner/#toc-updating-cache)虽然这需要更改清单...

谢谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:16:15.493

你不能。您必须更新清单文件。请注意在清单文件上设置立即到期标头，以便浏览器识别它有更新。

# eclipse - 继续指定无效的作者。示例：AU 雷神

> ID：11176914
> 
> 赞同：13
> 
> 时间：2012-06-24T11:04:39.457
> 
> 标签：eclipse, git, egit

使用 Eclipse Indigo 和 egit，每次我提交时都会出现一个弹出窗口，并且在作者和提交者框中有我的姓名和电子邮件。他们看起来很好。但是，egit 告诉我：

> ```
> Invalid author specified. Example: A U Thor <author@example.com> 
> ```

当我复制并粘贴`A U Thor <author@example.com>`到作者框中时，消息消失了。我什至可以将其编辑回我的姓名和电子邮件，这很好。这没有任何意义 - 首先它有什么问题？

提交者框也会出现类似的问题。我得到：

> ```
> Invalid committer specified. Example: C O Mitter <committer@example.com> 
> ```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-01-26T10:31:57.363

从命令行提交：`git commit -m "message"`

eGit 的下一次提交将起作用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-24T14:08:45.730

在查看[org.eclipse.jgit.util.RawParseUtils_ParsePersonIdentTest](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit.test/tst/org/eclipse/jgit/util/RawParseUtils_ParsePersonIdentTest.java#L56-L82)和[org.eclipse.jgit.util.RawParseUtils#parsePersonIdent()](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit/src/org/eclipse/jgit/util/RawParseUtils.java#L694-L746)函数时，我只能想象一些特殊字符或一些 Git 配置（user.name、user.email）失踪。

这些设置应在配置条目中输入：

![新条目](../Images/7e01d7c69be5377aa90328b398865b45.png)

调用解析的函数是[`org.eclipse.egit.ui.internal.dialogs.CommitMessageComponent#checkCommitInfo()`](https://github.com/eclipse/egit/blob/master/org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/dialogs/CommitMessageComponent.java#L427-L463)

如果您的用户名和电子邮件设置正确，则可能是[Egit 或 JGit 错误](https://bugs.eclipse.org/bugs/buglist.cgi?quicksearch=egit)。
有点像“[错误 377969：EGit rebase 无法正确验证 user.name 和 user.email 配置](https://bugs.eclipse.org/bugs/show_bug.cgi?id=377969)”（在 Linux 上）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-23T17:02:47.253

查看您收到的消息：

`Invalid author specified. Example: A U Thor <author@example.com>`

它只是意味着它需要指定格式的信息。

例如，如果您的名字是詹姆斯邦德，那么您需要输入

`James Bond <bond@unknown.com>`

您可以在两行中执行相同的操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-03T19:54:16.357

如本答案所述：[https ://stackoverflow.com/a/54449161/5381704](https://stackoverflow.com/a/54449161/5381704)

填写两个条目：

`Author`

`Committer`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T05:00:25.880

你是直接使用 git 还是使用 gerrit 审查系统？至少 gerrit 具有区分大小写的邮件地址，因此必须完全按照服务器已知的方式输入它们。

在我们的公司环境中，这导致了一些混乱，因为它们在 LDAP 服务器中存储为 Jon.Doe@example.com，但大多数人使用 egit 尝试了 jon.doe@example.com 并得到了您的错误消息。

另一个简单的替代方法是在配置中作者姓名的开头或结尾处使用某种虚假空格。您可能在错误消息中看不到它。当人们将内容从网页复制到富文本编辑器中时，我已经看到这种错误发生了，而富文本编辑器存储的不仅仅是“纯”文本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-30T04:52:02.477

您必须填写以下表格。

## 姓名和电子邮件是您的帐户名称和电子邮件。

作者 : davidLEE
提交者 : davidLEE

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-16T07:20:27.943

1.  清理项目

2.  再次提交，会自动出现 Author 和 Committer 如下图。[![在此处输入图像描述](../Images/02e9e6c972590b888b69777224b351ab.png)](https://i.stack.imgur.com/nGqHp.png)

# php - 使用 LightOpenID 获取 Google 通讯录？

> ID：11176915
> 
> 赞同：7
> 
> 时间：2012-06-24T11:04:42.500
> 
> 标签：php, google-api, google-contacts-api, lightopenid

我目前正在使用 LightOpenID 允许用户登录我的网站，在那里我可以自动提取他们的用户名和电子邮件地址：

```
$openid->required = array('namePerson/first', 'namePerson/last', 'contact/email');
$openid->identity = 'https://www.google.com/accounts/o8/id'; 
```

这里我使用参数`namePerson/first`、`namePerson/last`和`contact/email`。

我知道为了获得用户联系人列表，我必须使用提要：

```
https://www.google.com/m8/feeds 
```

但是，我似乎无法弄清楚我需要为此使用哪些参数？

如果我完全删除参数行，我只会得到一个空数组。

谁能帮我弄清楚我需要哪些参数来获取联系人？

这是我拥有的当前代码：

```
<?php
    require '/var/www/libraries/openid.php';

    try {

        $openid = new LightOpenID;

        if(!$openid->mode) {

            //$openid->required = array('gd/fullName');
            $openid->identity = 'https://www.google.com/m8/feeds/contacts/oshirowanen.y%40gmail.com/full';
            header('Location: ' . $openid->authUrl());
            exit;

        } elseif($openid->mode == 'cancel') {

            echo "cancelled";
            exit;

        } else {

            if ( $openid->validate() ) {

                $returned = $openid->getAttributes();
                print_r($returned);

                exit;

            } else {

                echo "something is wrong";
                exit;

            }

        }

    } catch(ErrorException $e) {

        echo $e->getMessage();

    }
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T23:10:45.307

你不能用 LightOpenID 做到这一点，因为它只实现了 OpenID 协议。

您将需要 OAuth (2.0) 协议来执行此操作。根据[文档](https://developers.google.com/google-apps/contacts/v3/#authorizing_requests_to_the_+wzxhzdk8+_service)：

> **关于授权协议**
> 
> 我们建议使用 OAuth 2.0 来授权请求​​。
> 
> 如果您的应用程序有某些不寻常的授权要求，例如在请求数据访问（混合）或域范围授权 (2LO) 的同时登录，那么您目前无法使用 OAuth 2.0 令牌。在这种情况下，您必须改为使用 OAuth 1.0 令牌和 API 密钥。您可以在 Google API 控制台的 API 访问窗格的简单 API 访问部分中找到应用程序的 API 密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:38:00.287

[根据文档](https://developers.google.com/google-apps/contacts/v3/#retrieving_all_contacts)：

> 检索所有联系人
> 
> 要检索用户的所有联系人，请将授权的 GET 请求发送到以下 URL：
> 
> [https://www.google.com/m8/feeds/contacts/](https://www.google.com/m8/feeds/contacts/) {userEmail}/full
> 
> 用适当的值代替 userEmail。
> 
> 注意：特殊的 userEmail 值 default 可用于指代经过身份验证的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:15:19.493

根据文档应该是可能的： [https ://developers.google.com/accounts/docs/OpenID](https://developers.google.com/accounts/docs/OpenID)

> OpenID+OAuth 混合协议允许 Web 开发人员将 OpenID 请求与 OAuth 身份验证请求结合起来。此扩展对于同时使用 OpenID 和 OAuth 的 Web 开发人员很有用，特别是因为它通过请求用户批准一次而不是两次来简化用户的流程。

# iphone - 如何实现多个下载代码目标c

> ID：11176916
> 
> 赞同：0
> 
> 时间：2012-06-24T11:05:01.700
> 
> 标签：iphone, objective-c, ios

对不起，我觉得有点愚蠢，但我无法实现以下代码以从服务器下载多个文件。我已在我的应用程序中将 MultipleDownload.h 和 MultipleDownload.m 文件设置为新的 Objective-C 类。但不确定如何从我的 updateView.m 调用它来执行文件下载。按照说明，我需要使用以下几行初始化并开始下载。我不知道该把代码放在哪里开始从 url 下载文件。我是否必须在该 MultipleDownload.m 代码中设置一个方法并从另一个对象（updateView.m）调用该方法来启动下载？或者我是否将这些行放入（updateView.m）中的方法之一？老实说，我都试过了，出于某种原因，我不断收到错误，它说的是网址。如果我把它放在 updateView.m 中，它会说 self.urls 和 self. downloads 是未声明的标识符。我试图在我的 updateView.m 中声明 NSMutableArray *urls 和 MultipleDownload *downloads ，但它也没有工作。任何输入将不胜感激。

MultipleDownload.m 和 MultipleDownload.h 代码位于 github：http: [//github.com/leonho/iphone-libs/tree/master](http://github.com/leonho/iphone-libs/tree/master)

初始化并开始下载：

```
self.urls = [NSMutableArray arrayWithObjects:
    @"http://maps.google.com/maps/geo?output=json&q=Lai+Chi+Kok,Hong+Kong", 
    @"http://maps.google.com/maps/geo?output=json&q=Central,Hong+Kong",
    @"http://maps.google.com/maps/geo?output=json&q=Wan+Chai,Hong+Kong", 
    nil];  
self.downloads = [[MultipleDownload alloc] initWithUrls: urls]; 
self.downloads.delegate = self; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:12:56.527

你所做的是在 updateView.h

为 url（类型 NSMutableArray）和下载（类型 MultiDownload）创建 @properties

然后在`updateView.m`你添加这些功能

```
//Function to start download
- (void) startDownload
{
    self.urls = [NSMutableArray arrayWithObjects:
                 @"YourURLS",
                 @"YourURLS",
                 @"YourURLS",
                 nil];
    self.downloads = [[MultipleDownload alloc] initWithUrls: urls];
    self.downloads.delegate = self;
}

 //download finished for 1 item
 - (void) didFinishDownload:(NSNumber*)idx {
    NSLog(@"%d download: %@", [idx intValue], [downloads dataAsStringAtIndex: [idx intValue]]);
 }

 //download finished for all items
 - (void) didFinishAllDownload {
    NSLog(@"Finished all download!");
    [downloads release];
 } 
```

我还建议，如果您在理解 self.urls 和 self.downloads 以阅读有关目标 c 和属性的更多信息时遇到问题，祝您好运

# ios - iOS - tableView realodData 非常奇怪的问题

> ID：11176923
> 
> 赞同：0
> 
> 时间：2012-06-24T11:05:50.750
> 
> 标签：ios, xcode, tableview, reloaddata

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

        static NSString *CellIdentifier = @"Cell";

        UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    }

        [cell setBackgroundColor:[UIColor lightGrayColor]];
        cell.textLabel.textColor = [UIColor lightTextColor];
        cell.textLabel.backgroundColor = nil;
        cell.detailTextLabel.textColor = [UIColor darkGrayColor];
        cell.detailTextLabel.backgroundColor = nil; 

  // Get list of local notifications
        NSArray *notificationArray = [[UIApplication sharedApplication] scheduledLocalNotifications];
        UILocalNotification *notif = [notificationArray objectAtIndex:indexPath.row];

        // Display notification info
        [cell.textLabel setText:notif.alertBody];

        NSDateFormatter *format = [[NSDateFormatter alloc] init];
        [format setDateFormat:@"MMM dd 'at' HH:mm"];

        NSString *dateString = [format stringFromDate:notif.fireDate];

        NSString *textData = [[NSString alloc]initWithFormat:@"%@",dateString];

        [cell.detailTextLabel setText:textData];

        //[notif.fireDate description]

        [self.tableView reloadData];
        return cell;

    } 
```

如果我不写“[self.tableView reloadData];”，一切都会变得绝对正常，但如果我这样做，似乎单元格在那里但它没有被显示（单元格分隔符根据表格视图的单元格数量消失）

我需要重新加载数据，这样用户就不需要离开视图并再次加载视图来显示更新的信息。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T11:07:31.553

您不需要在`[self.tableView reloadData];`里面添加`cellForRowAtIndexPath`，这是绝对错误的，因为调用`reloadData`会再次调用`cellForRowAtIndexPath`，正如您所经历的那样会产生非常奇怪的问题

一般来说，`[self.tableView reloadData];`当您想更改所有或部分内容时，您通常会调用`UITableView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T11:17:27.690

创建一个函数来检查新数据是否可用（可能实现刷新按钮/拉动刷新）。如果有新数据可用，请致电`[self.tableView reloadData];`。

# java - 使用 Tapestry 和 Hibernate 的 Web 应用程序在调用 persist() 时抛出异常

> ID：11176932
> 
> 赞同：1
> 
> 时间：2012-06-24T11:06:50.640
> 
> 标签：java, sql, hibernate, jboss, tapestry

我正在尝试使用 JBoss 和 Hibernate 设置 Web 应用程序，但我无法运行 SQL 数据库，遇到了几个问题。

我的主要问题是，当调用*persist()* Hibernate 尝试将一个空对象插入我的表中时，日志以这个异常开始：

```
12:39:26,985 INFO  [org.hibernate.tool.hbm2ddl.SchemaUpdate] (http--127.0.0.1-8080-1) HHH000228: Running hbm2ddl schema update
12:39:26,986 INFO  [org.hibernate.tool.hbm2ddl.SchemaUpdate] (http--127.0.0.1-8080-1) HHH000102: Fetching database metadata
12:39:26,987 ERROR [org.hibernate.tool.hbm2ddl.SchemaUpdate] (http--127.0.0.1-8080-1) HHH000319: Could not get database metadata: java.sql.SQLException: You cannot set autocommit during a managed transaction!
at org.jboss.jca.adapters.jdbc.BaseWrapperManagedConnection.setJdbcAutoCommit(BaseWrapperManagedConnection.java:888) 
```

使用 Google 后，我真的不知道如何解决它，但我的应用程序继续运行。在此之后的某个地方，Hibernate 似乎尝试将*persist()*调用到创建的对象。

```
12:39:27,202 INFO  [stdout] (http--127.0.0.1-8080-1) Hibernate: 
12:39:27,202 INFO  [stdout] (http--127.0.0.1-8080-1)     insert 
12:39:27,203 INFO  [stdout] (http--127.0.0.1-8080-1)     into
12:39:27,203 INFO  [stdout] (http--127.0.0.1-8080-1)         Person
12:39:27,203 INFO  [stdout] (http--127.0.0.1-8080-1)         (id, birthdate, gender, name, password) 
12:39:27,204 INFO  [stdout] (http--127.0.0.1-8080-1)     values
12:39:27,204 INFO  [stdout] (http--127.0.0.1-8080-1)         (null, ?, ?, ?, ?) 
```

使用 Logger 我看到这个*Person*对象是正确创建的，但是你可以看到 Hibernate 将值视为 (null, ?, ?, ?, ?)。

在此之后抛出此异常：

```
12:39:27,218 ERROR [org.apache.tapestry5.ioc.Registry] (http--127.0.0.1-8080-1) org.hibernate.exception.ConstraintViolationException: integrity constraint violation: NOT NULL check constraint; SYS_CT_10031 table: PERSON column: ID 
```

那么，我的 persistence.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="facePlace">
<non-jta-data-source>java:jboss/facePlace</non-jta-data-source>
<class>webtech2.faceplace.entities.Person</class>
<properties>
  <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
  <property name="hibernate.hbm2ddl.auto" value="update"/>
  <property name="hibernate.format_sql" value="true"/>
  <property name="hibernate.show_sql" value="true"/>
</properties> 
```

相关代码为：

```
@Inject
@Persistence
EntityManager em;

public boolean signUp(String name,
      String password,
      String repeatPassword,
      Date birthdate,
      String gender) {
if (!password.equals(repeatPassword)) {
  return false;
}

log.info("person data: " + name + " " + password + " " + repeatPassword + " " + birthdate.toString() + " " + gender);

String saltedPassword = hashText + password;
String hashedPassword = generateHash(saltedPassword);
em.getTransaction().begin();
Person xperson = new Person(name, hashedPassword, birthdate, gender);
em.persist(xperson);
em.getTransaction().commit();
return true;
} 
```

我的实体看起来像：

```
@Entity
public class Person implements Serializable {

private String name;
private Date birthdate;
private long id;
private String password;
private String gender;
private Set<Person> friends;

@Id
@GeneratedValue
public long getId() {
  return id;
}

public void setId(long id) {
  this.id = id;
} 
```

所以我不是这方面的专家，有人看到里面有什么东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:29:54.170

当 hibrenate 保存文件时，您的主键似乎没有设置。@Entity 中的 @Id 列应该指定一个主键生成策略，而不是让 @GeneratedValue 没有任何参数并且让休眠尝试选择默认的生成启动。

如果您在设置的数据库中使用标识列。

```
 @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name="pkey")
    private Integer pkey; 
```

# php - jquery倒计时服务器同步不起作用

> ID：11176934
> 
> 赞同：2
> 
> 时间：2012-06-24T11:06:57.713
> 
> 标签：php, javascript, jquery, countdown

我正在使用[http://keith-wood.name/countdownRef.html#serverSync](http://keith-wood.name/countdownRef.html#serverSync)提到的 jquery 倒计时 serverSync 功能，但我无法让倒计时同步到服务器时间。我在文档中编写的代码：

```
$(selector).countdown({
    until: liftoffTime,
    serverSync: serverTime
});

function serverTime() {
    var time = null;
    $.ajax({
        url: 'http://myserver.com/serverTime.php',
        async: false,
        dataType: 'text',
        success: function (text) {
            time = new Date(text);
        },
        error: function (http, message, exc) {
            time = new Date();
        }
    });
    alert("Debug server time: " + time);
    return time;
} 
```

我在 serverTime.php 中的 php 代码

```
<?php 
$now = new DateTime(); 
echo $now->format("M j, Y H:i:s O")."\n"; 
?> 
```

当我在 javascript 中发出警报时，输出的时间是：

> 2012 年 6 月 24 日星期日 12:02:23 GMT+0100 (BST)

但是，当我只是去[http://myserver.com/serverTime.php](http://myserver.com/serverTime.php)时，时间会以这种格式显示：

> 2012 年 6 月 24 日 12:03:35 +0100

非常不一样。任何人都可以解释为什么它不同步并且返回的不同日期格式可能是问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:58:20.687

您的`php`和`serverTime()`代码工作正常。

不同的时间格式不是问题，也不是内部`Date`表示。

您分配什么值`selector`和`liftoffTime`变量？

这是我的工作测试：

```
<html>
<head>
<title>ajax count down test</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://keith-wood.name/js/jquery.countdown.js"></script> <!--maybe you shouldn't hotlink this file ;-) -->
</head>
<body>
<div id="defaultCountdown"></div>
<script>
    function serverTime() {
        var time = null;
        $.ajax({
            url: 'serverTime.php',
            async: false,
            dataType: 'text',
            success: function (text) {
                time = new Date(text);
            },
            error: function (http, message, exc) {
                time = new Date();
            }
        });
        return time;
    }

    $(function () {
        $("#defaultCountdown").countdown({
            until: new Date("Jun 24, 2012 16:00:00 +0000"),
            serverSync: serverTime
        });
    });
</script>
</body>
</html> 
```

如果您有任何问题，请发表评论。

# java - Lambda 表达式在 Java 8 中不起作用？

> ID：11176936
> 
> 赞同：15
> 
> 时间：2012-06-24T11:07:11.047
> 
> 标签：java, lambda, javafx-2, java-8

我有一台运行 Windows XP SP3 32 位的虚拟机。[在这台机器上，我从这里](http://jdk8.java.net/download.html)安装了 Java SE JDK 8 build b44 Developer Preview 。

我还安装了 JavaFX 2.1 SDK。

它工作正常：

```
java -version
> java version "1.8.0-ea"
> Java(TM) SE Runtime Environment (build 1.8.0-ea-b44)
> Java HotSpot(TM) Client VM (build 24.0-b14, mixed mode, sharing) 
```

我尝试运行以下程序（取自[此处](http://www.javabeat.net/2012/05/using-lambda-expressions-of-java-8-in-java-fx-event-handlers/)）：

```
import javafx.application.Application;
import javafx.beans.property.SimpleStringProperty;
import javafx.beans.property.StringProperty;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.ButtonBase;
import javafx.scene.control.ToggleButton;
import javafx.scene.control.ToggleButtonBuilder;
import javafx.scene.layout.BorderPane;
import javafx.stage.Stage;

public class LambdasWithJavaFx extends Application
{
    public static void main(String[] args)
    {
        Application.launch(args);
    }

    @Override  public void start(Stage stage) throws Exception
    {
        BorderPane root = new BorderPane();
        ToggleButton button = new ToggleButton("Click");
        final StringProperty btnText = button.textProperty();

        button.setOnAction(new EventHandler<ActionEvent>()
        {
            @Override public void handle(ActionEvent actionEvent)
            {
                ToggleButton source = (ToggleButton) actionEvent.getSource();
                if (source.isSelected())
                {
                    btnText.set("Clicked!");
                }
                else
                {
                    btnText.set("Click!");
                }
            }
        });

        root.setCenter(button);
        Scene scene = new Scene(root);
        stage.setScene(scene);
        stage.setWidth(200);
        stage.setHeight(200);
        stage.show();
    }
} 
```

该程序按预期编译并运行。

我按照那篇文章中的说明将按钮事件处理代码替换为：

```
button.setOnAction((ActionEvent event)->
{
    ToggleButton source = (ToggleButton) event.getSource();
    if (source.isSelected())
    {
        btnText.set("Clicked!");
    }
    else
    {
        btnText.set("Click!");
    }
}); 
```

编译时，我收到以下错误（在线`button.setOnAction((ActionEvent event)->`）：

```
> lambda expressions are not supported in -source 1.8
> (use -source 8 or higher to enable lambda expressions) 
```

我添加了论点`-source 8`，没有任何改变。

我只想检查 Java 8 中的 lambda 表达式功能。为什么它不起作用？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-24T14:28:14.243

您需要下载包含 Lambda 表达式功能的二进制文件。尝试从这里下载[http://jdk8.java.net/lambda/](http://jdk8.java.net/lambda/)。我记得在邮件列表中看到 lambda 表达式分支正在被合并到主 JDK8 构建中，但不确定它是否已经完成。但我使用来自 Lambda 项目页面的构建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T01:39:26.733

作为[http://jdk8.java.net/lambda/](http://jdk8.java.net/lambda/)版本的替代版本，还有 JDK8 和 JRE8 快照版本，可从[http://jdk8.java.net/download获得 dmg、exe 安装程序和 tar.gz 形式.html](http://jdk8.java.net/download.html)。

这些 jdk8 开发人员快照现在还包括 lambda（和 javafx8）功能。在撰写本文时，jdk8 的 lambda 和 javafx 仍处于功能和错误修复开发模式。

我发现[http://jdk8.java.net/download.html](http://jdk8.java.net/download.html)每周构建对开发很有用和有用（使用它们的程序偶尔会在我的 Mac 上崩溃，所以它绝对不是你想要部署到生产中的东西，即使构建的 oracle 许可证允许这样做，但他们不允许这样做）。

[如果您想要绝对最新的前沿或定制的 jdk 构建，您可以使用obuildfactory](https://github.com/hgomez/obuildfactory/wiki)构建自己的。此类构建使用 OpenJDK 许可模型而不是 Oracle JDK 许可模型，这对于某些开发项目可能更可取，但就个人而言，我尽可能坚持使用 Oracle JDK 构建。

# c# - 如何在 windows phone 7 中获取图像高度和宽度问题

> ID：11176938
> 
> 赞同：2
> 
> 时间：2012-06-24T11:07:28.883
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-7.1

我正在尝试在 windows phone 中获取图像的高度和宽度...但是几乎没有语法错误

我该怎么做？

```
 int hight = image1.ActualHeight;
        int width = image1.ActualWidth;
        BitmapImage img = new BitmapImage(image1.Image);
        BitmapImage newImg = new BitmapImage(hight,width); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T11:33:54.133

要创建图像，

```
<Image x:Name="image1" Source="myPicture.png" /> 
```

然后你可以在后面的代码中访问它

```
double height = image1.ActualHeight;
double width = image1.ActualWidth; 
```

并且 BitmapImage 类没有构造函数，它接受您传递的参数。您可以通过以下任一方式创建新的 BitmapImage

```
BitmapImage bmp = new BitmapImage(new Uri("myPicture.jpg", UriKind.RelativeOrAbsolute)); 
```

或者

```
BitmapImage bmp = new BitmapImage();
bmp.UriSource = new Uri("myPicture.jpg", UriKind.RelativeOrAbsolute); 
```

或者

```
BitmapImage bitmapImage = image1.Source as BitmapImage; 
```

希望这可以消除您的疑问

# assembly - NASM 宏处理任何寻址模式

> ID：11176946
> 
> 赞同：0
> 
> 时间：2012-06-24T11:09:05.820
> 
> 标签：assembly, macros, x86, nasm, addressing-mode

编写一个 NASM 宏：divide，它有 2 个参数，指定任何寻址模式下的无符号整数。宏计算其第一个参数的上限，除以第二个参数，并将结果放入寄存器 edx。如果第二个参数为 0（要在运行时测试），则结果应为 0，并且应将消息“除以零”打印到标准输出。

我怎么知道哪个是哪个，所以我们可以处理每个案例？(;地址模式是：寄存器、内存和立即数。)

编辑：这是我写的最终代码：如何编写没有标签的代码？（位置独立代码）：

```
%macro divide 2

section .rodata
        LC1: DB "divide by zero ", 10, 0

section .text

  mov eax, %1
  mov ebx, %2
  cmp ebx, 0 ; divide by zero
  jne rest1
  push LC1
  call printf
  add esp,4
  mov edx, 0
  jmp end1

rest1:
  mov edx, 0
  div ebx
  add eax, edx
  mov edx , eax ; the result should be in edx

end1:
 %endmacro 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:16:25.790

你不需要告诉哪个是哪个。从任何位置（另一个寄存器、内存、立即常数）加载一个通用寄存器`EAX`是可能的。`MOV`充分利用这一点。

**编辑**：

为了更清楚，这就是您可以编写这样的宏的方法：

```
%macro mydiv 2
  mov eax, %1
  mov ebx, %2
  mov edx, 0
  div ebx
%endmacro 
```

这就是你将如何使用它：

```
 mydiv 3, 2 ; 2 immediate operands

  mov ebx, 15
  mov ecx, 3
  mydiv ebx, ecx ; 2 register operands

  mydiv [dividend], [divisor] ; 2 memory operands

...

  dividend dd 42
  divisor  dd 6 
```

当然，宏的定义方式对除法操作数的位置有一定的限制。例如，操作数 2（除数）不能在，`EAX`因为前面的指令会将被除数放入`mov ebx, eax`操作数 1（除数）中。`EBX``mov eax, %1``EAX`

您可以通过使用堆栈来解决这个问题：

```
%macro mydiv2 2
  push  ebx
  push  %1
  push  %2
  pop   ebx
  pop   eax
  mov   edx, 0
  div   ebx
  pop   ebx
%endmacro 
```

这个宏将接受来自任何寄存器的除数和被除数，它不会垃圾`EBX`。唯一的（次要）问题是当您的操作数在内存中并且相对于 寻址时`ESP`，例如：

```
mydiv2 eax, [esp+8] 
```

这些推动力发生了变化`ESP`，必须加以考虑。

**编辑2**：

有一个警告`mydiv2`......它会将立即常量（例如 123）推送为 16 位模式下的 16 位和 32 位模式下的 32 位，但会将它们弹出为 32 位。要 `mydiv2`在 16 位模式下工作，您需要在直接常量前面加上`dword`：

```
 mydiv2 dword 3, dword 2 ; 2 immediate operands 
```

您现在可以在宏中实现其余所需的功能。

# ruby - 从后向迁移到 jekyll 给出 500

> ID：11176948
> 
> 赞同：0
> 
> 时间：2012-06-24T11:10:01.780
> 
> 标签：ruby, jekyll, posterous

当我尝试使用 jekyll 的导入器来获取我的博客时，我收到以下错误：

```
ruby -rubygems -e 'require "jekyll/migrators/posterous"; Jekyll::Posterous.process("me@gmail.com", "mypass", "myblogid")'
/usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': iconv will be deprecated in the future, use String#encode instead.
/usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:2632:in `error!': 500 "Internal Server Error" (Net::HTTPFatalError)
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/jekyll-0.11.2/lib/jekyll/migrators/posterous.rb:26:in `fetch'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/jekyll-0.11.2/lib/jekyll/migrators/posterous.rb:32:in `process'
    from -e:1:in `<main>' 
```

有任何想法吗？我尝试运行一个 http 调试代理来查看流量以了解发生了什么问题，但我不知道如何让 ruby​​ 使用代理。那里有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:43:44.790

FWIW，最后我在这里使用了不同的迁移器：

```
https://github.com/pepijndevos/jekyll/blob/patch-1/lib/jekyll/migrators/posterous.rb 
```

我只需要注释掉图像抓取代码。

# android - Android将谷歌地图添加到列表视图中

> ID：11176950
> 
> 赞同：1
> 
> 时间：2012-06-24T11:10:11.380
> 
> 标签：android, google-maps

您好我想知道如何将谷歌地图添加到列表视图中？我已经通过添加到我的列表中进行了尝试，但是我收到一个错误，说它需要在 MapsActivity 中，但我的 Activity 已经扩展了 ListActivity 有没有办法可以扩展多个活动？或者有谁知道如何在列表视图中实现谷歌地图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:28:07.943

Java 不允许多重继承。因此，如果您需要一个 MapActivity，您不能同时扩展 ListActivity。因此，您希望在 XML 上定义一个 listView。

将列表视图添加到您的 xml 文件：

```
<ListView android:id="+@id/myListView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
</ListView> 
```

然后在活动中引用它来制定你的逻辑：

```
 Listview lv = (ListView) findviewById(R.id.myListView);
    lv........... 
```

# regex - Zend_Controller_Router_Route_Regex 不匹配拉丁文，但只匹配西里尔字符

> ID：11176951
> 
> 赞同：0
> 
> 时间：2012-06-24T11:10:19.947
> 
> 标签：regex, zend-framework

我已经定义了以下自定义路线：

```
; Language
routes.lang.type = "Zend_Controller_Router_Route"
routes.lang.route = :lang
routes.lang.defaults.lang = "bg"
routes.lang.defaults.action = "index"
routes.lang.defaults.controller = "index"
routes.lang.defaults.module = "site"
routes.lang.reqs.lang = "[a-z]{2}"

; Article
routes.lang.chains.a.type = "Zend_Controller_Router_Route_Regex"
routes.lang.chains.a.route = "([^\.html ]+).html$"
routes.lang.chains.a.defaults.action = "index"
routes.lang.chains.a.defaults.controller = "article"
routes.lang.chains.a.defaults.module = "site"
routes.lang.chains.a.map.articleIdent = 1
routes.lang.chains.a.reverse = "%s.html" 
```

当我尝试访问以下网址时，一切正常： [http://site.local/en](http://site.local/en) /тест.html -> 匹配

问题是，当我尝试访问仅包含拉丁字符的 url 时，路由正在传递： [http://site.local/en/test.html](http://site.local/en/test.html) -> 不匹配

我只是无法弄清楚问题出在哪里。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:09:50.523

问题出在正则表达式中。在圆括号中，我想包含除“.html”之外的所有内容，但语法错误。好吧，我现在仍然不认为这应该是正确的语法，但无论如何，以下更改完成了工作：

```
routes.lang.chains.a.route = "(.*).html$" 
```

# hash - OpenCL 的完美散列

> ID：11176965
> 
> 赞同：1
> 
> 时间：2012-06-24T11:13:08.697
> 
> 标签：hash, opencl, gpgpu, perfect-hash

我有一个大约 200 万个值的集合（静态，在编译时已知），每个值 20 个字节。我需要的是一种快速的 O(1) 方法来检查给定值是否在这个集合中。似乎带有位数组的完美散列函数是理想的，但我找不到一种简单的方法来创建它。有一些实用程序，例如 gperf，但它们太复杂了。此外，在我的情况下，不需要接近 100% 的负载系数，即使 10% 也足够了，但要保证没有碰撞。此功能的另一个要求是简单，无需太多条件：它将在 GPU 上运行。你对这个案子有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:36:08.117

[在这里](https://stackoverflow.com/a/8104713/905902)查看我的答案。问题有点不同，但可以根据您的需要定制解决方案。原始版本使用 100% 的负载系数，但可以轻松更改。它通过在启动时就地改组数组来工作（这可以在编译时完成，但这意味着编译生成的代码）。

WRT 哈希函数：如果您对 20 字节对象的内容一无所知，任何合理的哈希函数（FNV、Jenkins 或我的）都足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:52:25.863

在阅读了有关完美哈希的更多信息后，我决定不尝试实现它，而是使用 cuckoo hashtable。它要简单得多，最多需要 2 次访问表（或任何其他数字 >1，最常用的是 2..5）而不是 1 次才能实现完美哈希。

# iphone - 重命名返回键完成

> ID：11176967
> 
> 赞同：0
> 
> 时间：2012-06-24T11:13:20.483
> 
> 标签：iphone, cocoa-touch, uitextfield

> **可能重复：**
> [如何以编程方式为特定 UITextField 设置返回键？](https://stackoverflow.com/questions/6311015/how-do-i-programmatically-set-the-return-key-for-a-particular-uitextfield)

这里有一个简单的问题：

如何`UIReturnKeyDone`在键盘上重命名？

我想将文本从“ `Done`”更改为“ `Login`”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T11:16:35.543

您不能将密钥更改为任何任意值，但是您可以选择其中之一

来自[苹果文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html)

```
 UIReturnKeyDefault,
   UIReturnKeyGo,
   UIReturnKeyGoogle,
   UIReturnKeyJoin,
   UIReturnKeyNext,
   UIReturnKeyRoute,
   UIReturnKeySearch,
   UIReturnKeySend,
   UIReturnKeyYahoo,
   UIReturnKeyDone,
   UIReturnKeyEmergencyCall, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T11:25:25.587

![在此处输入图像描述](../Images/a74008f89945bd6bc3e567d0366adc40.png) .

您只能从这些设置您的返回键。如果您想将**返回键**重命名为**Login**，那么您必须制作一个**自定义按钮 (LoginButton)**，然后将其添加到带有动画的键盘上方，然后单击此按钮，您只需通过

```
[yourTextField resignFirstResponder]; 
```

# perl - Perl MongoDb 多次更新

> ID：11176968
> 
> 赞同：0
> 
> 时间：2012-06-24T11:13:47.083
> 
> 标签：perl, mongodb

我想更新我的数据库（mongodb）中的所有记录，我尝试使用下面的命令来做到这一点，但我无法找到解决方案。

```
use MongoDB;
my $dbhost = MongoDB::Connection->new(host => '127.0.0.1', port => 27017);
    my $database   = $dbhost->test;
my $res = $database->questions;
$res->update({'person'=>'omer'},{'$set' => { 'canbeseen' =>"oha"}},{"multi" => "true"} ); 
```

我想更新所有 omer 的“canbeseen”。但它不起作用，所以我该怎么做？我在等你的答案。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:47:08.407

MongoDB 模块似乎使用`multiple`关键字而不是`multi`：

```
$res->update(
  {'person'   => 'omer' },
  {'$set'     => { 'canbeseen' => "oha" } },
  {'multiple' => "true" }
); 
```

从[文档](http://search.cpan.org/dist/MongoDB/lib/MongoDB/Collection.pm)中：

> `multiple`所有匹配 $criteria 的文档都将被更新，而不仅仅是找到的第一个文档。（仅适用于数据库版本 1.1.3 和更高版本。）

# intellij-idea - IntelliJ：如何将非 java 文件也复制到 bin 目录中？

> ID：11176969
> 
> 赞同：21
> 
> 时间：2012-06-24T11:13:48.913
> 
> 标签：intellij-idea

我的模块在 java 源文件中包含一些非 java 文件。构建模块时，java 文件被复制到 bin 文件夹（并包含在 jar 工件中），但非 java 文件被遗漏。

我也需要复制它们（这就是 Eclipse 所做的）。请注意，它们确实出现在左侧的项目树视图中，我没有以任何方式排除它们。

如何让它们进入 bin 文件夹（jar 工件）？

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-24T11:52:37.030

`Settings`（`Preferences`在 Mac 上）| `Compiler`| **资源模式**。

这个问题重复/涉及：

*   [使用 IntelliJ Idea 将 jbehave 故事复制到目标目录](https://stackoverflow.com/questions/8629223/copy-jbehave-stories-into-target-directory-using-intellij-idea/8629542#8629542)
*   [IntelliJ、Akka 和配置文件](https://stackoverflow.com/questions/9333093/intellij-akka-and-configuration-files/9333259#9333259)
*   [IntelliJ IDEA 11.1.2 不会将 SQL 文件复制到 out 文件夹](https://stackoverflow.com/questions/11100690/intellij-idea-11-1-2-does-not-copy-sql-files-to-the-out-folder/11100804#11100804)
*   [将属性文件添加到 IntelliJ 的类路径](https://stackoverflow.com/questions/3765998/add-a-properties-file-to-intellijs-classpath/3769608#3769608)
*   [将图像导入 IntelliJ Java 项目](https://stackoverflow.com/questions/10359635/import-images-into-an-intellij-java-project/10359665#10359665)
*   [Intellij - 如何将文本文件添加到资源中](https://stackoverflow.com/questions/7556478/intellij-how-to-add-a-text-file-to-the-resources/7556624#7556624)
*   [Idea中读取属性文件的空指针异常](https://stackoverflow.com/questions/7101484/null-pointer-exception-for-read-properties-file-in-idea/7162823#7162823)
*   [IntelliJ Idea - 资源 SQL 文件未复制到目标](https://stackoverflow.com/questions/8134250/intellij-idea-resource-sql-files-not-being-copied-to-target/8136368#8136368)
*   [Scala getClass.getResource() 返回 null](https://stackoverflow.com/questions/12133632/scala-getclass-getresource-returning-null)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-28T08:00:47.407

在 IDEA 14.1.4 上，`src/main/java/my/package`不会复制文件夹中的 xml 文件。我的编译器设置是`!?*.java;!?*.form;!?*.class;!?*.groovy;!?*.scala;!?*.flex;!?*.kt;!?*.clj;!?*.aj`.

我通过添加以下内容更改了gradle文件：

```
test {
    resources {
        srcDir 'src/main/java'
        include '**/*.xml'
    }
} 
```

它开始工作。我不确定我是否遗漏了什么，但我找不到反映在项目设置中的那部分。

如果您使用 Maven，以下代码应该具有相同的效果：

```
<build>
    <testResources>
        <testResource>
            <filtering>false</filtering>
            <directory>src/test/java</directory>
            <includes>
                <include>**/*.xml</include>
            </includes>
        </testResource>
        <testResource>
            <directory>src/test/resources</directory>
        </testResource>
    </testResources>
</build> 
```

我将其发布在这里作为答案，因为它可能会帮助遇到相同问题的人，而上述答案可能不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-13T04:27:10.490

取消选中在项目编译器设置中使用外部构建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T20:01:46.333

使用 CrazyCoder 关于版本 12 的信息（我没有使用），我添加了以下作为我的资源模式，效果很好：

```
*.*;!*.form;!*.java;!*.class;!*.groovy;!*.as;!*.flex;!*.kt 
```

# web-services - Tomcat 404 错误尝试访问 webapp

> ID：11176974
> 
> 赞同：1
> 
> 时间：2012-06-24T11:14:50.703
> 
> 标签：web-services, tomcat, maven

> **可能重复：**
> [Tomcat 从 Eclipse 和 startup.sh 启动](https://stackoverflow.com/questions/11172665/tomcat-start-from-eclipse-and-startup-sh)

我已经在 Ubuntu 11.10 上手动安装了 tomcat 7。使用 eclipse\maven 学习 jax-ws 我尝试手动找出所有步骤。我已经完成了所有需要的步骤，编码、wsgen、sun-jaxws.xml、web.xml。我可以成功地将我的 Web 服务部署到 tomcat，但是我无法访问它，出现 404 错误。同时我的应用程序显示为在 tomcat 管理器中运行。可能是什么问题呢？

# .net - 将图像从 Firefox 拖到我的应用程序

> ID：11176975
> 
> 赞同：1
> 
> 时间：2012-06-24T11:15:04.137
> 
> 标签：.net, wpf, firefox, drag-and-drop

我可以将图像从 Firefox 拖放到 Windows 资源管理器并保存图像。我可以在我自己的应用程序中以某种方式做同样的事情，即将图像从 Firefox 拖到我的应用程序的某个部分，然后将图像放入应用程序吗？

我的应用程序是使用 .NET 4 和 WPF 构建的。

编辑：约翰·科尔纳（John Koerner）让我参与其中，但不完全是我想要的……

如果我将一个文件从 Firefox 拖到 Windows 资源管理器，该文件将完全按照它在我从中拖动它的网站上的方式保存。也就是说，它具有相同的文件名、文件格式和文件大小。看起来就像是直接从网站上保存的一样，好像我右键单击它并选择了“另存为”。我唯一得到的是临时文件夹中位图的路径。不错，但不是我想要的。我想我可以把那个位图压缩成 JPEG 或其他格式，但我真的更喜欢得到原件。由于这种行为是我在将图像拖到 Windows 资源管理器时得到的，我想也许我可以在我自己的应用程序中得到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:47:29.330

您必须允许在窗口上放置，然后处理放置事件。然后，您可以读取 FileDrop 以获取文件在磁盘上的位置并将其加载到图像或您需要的任何其他位置。

```
public MainWindow()
{
    InitializeComponent();
    this.AllowDrop = true;
    this.Drop += new DragEventHandler(MainWindow_Drop);
}

void MainWindow_Drop(object sender, DragEventArgs e)
{
    BitmapImage bi = new BitmapImage(new Uri(((string[])e.Data.GetData("FileDrop"))[0]));
    image1.Source = bi;

    // Get the different parameters available and see which work for you.
    foreach (var param in e.Data.GetFormats())
        Console.WriteLine(param);
} 
```

这是我从 firefox 拖到我的应用程序时得到的参数列表。您可能对文件名或文件名W 感兴趣。将这些字符串与 GetData 方法一起使用以获取所需的数据。

```
text/x-moz-url
FileGroupDescriptor
FileGroupDescriptorW
FileContents
UniformResourceLocator
UniformResourceLocatorW
text/x-moz-url-data
text/x-moz-url-desc
text/uri-list
text/_moz_htmlcontext
text/_moz_htmlinfo
text/html
HTML Format
Text
UnicodeText
System.String
application/x-moz-nativeimage
DeviceIndependentBitmap
FileDrop
FileNameW
FileName
Preferred DropEffect
application/x-moz-file-promise-url
application/x-moz-file-promise-dest-filename
DragImageBits
DragContext 
```

# wordpress - 防止盗取付费内容下载 - 但允许客户重新下载

> ID：11176976
> 
> 赞同：0
> 
> 时间：2012-06-24T11:15:35.560
> 
> 标签：wordpress, url, download, security, piracy-prevention

我计划在网上销售一堆视频，作为付费会员区的一部分。客户通过 PayPal 付款并可以访问会员区，那里有下载视频的链接。这些视频托管在 CDN（如 Amazon S3 或 Rackspace Cloud）上，如果我们只是将链接插入其中，任何人都可以公开发布并分享。

确保只有付费客户才能下载视频并且不能与他人公开共享 URL 的最佳方法是什么？

我正在为付费会员区使用 Wordpress 和 s2member 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:27:07.490

如果您使用 S3 来托管文件，那么[Amazon Cloudfront](http://aws.amazon.com/cloudfront/faqs/#Does_Amazon_CloudFront_support_access_controls)可以让您为付费内容创建一次性[签名 URL](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/PrivateContent.html)。

# ruby-on-rails - Rails DRY 机制将 Flash 消息呈现为 JSON 响应

> ID：11176977
> 
> 赞同：4
> 
> 时间：2012-06-24T11:15:51.487
> 
> 标签：ruby-on-rails, dry

我的应用程序中有一个非常基本的 API，它还有一个索引页面，允许测试/演示各种 API 功能。

由于这个索引 HTML 页面，所有函数都应该能够以 HTML（它只是重新呈现附有 Flash 消息的索引页面）或 JSON（它只是发送一个简单的状态/消息对象）来响应。

每个功能目前看起来有点像这样......

```
def do_stuff

  if params['stuff']

    begin
      Helper.do_stuff params['stuff']
    rescue Exception => ex
      msg = ex.message
      status = 'error'

      flash[:error] = msg
    else
      msg = 'Stuff done'
      status = 'success'

      flash[:success] = msg
    end

  else
    msg = 'No stuff provided'
    status = 'error'

    flash[:error] = msg
  end

  respond_to do |format|
    format.html { render 'api/index' }
    format.json do
      render json: {:status => status, :message => msg}
    end
  end
end 
```

人们会推荐什么来干燥这个？以某种方式从闪存哈希构造 JSON 状态对象似乎是件好事。

我正在考虑使用 Helper 还是通过从 JSON 布局中解析 flash 哈希的逻辑来获得更优雅的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-23T20:06:47.567

您可能希望在将其`to_hash`呈现为 json 之前在 flash 上调用该方法。在某些版本的 rails 中，`flash.to_json`实际上并不返回 JSON 哈希。

```
def do_stuff
  respond_to do |format|
    format.html { redirect_to :action => 'index' }
    format.json do
      render json: flash.to_hash
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T11:59:22.357

我发现直接为 JSON 响应渲染 flash 哈希就足够了……

```
def do_stuff
  if params['stuff']

    begin
      Helper.do_stuff params['stuff']
    rescue Exception => ex
      flash[:error] = msg
    else
      flash[:success] = 'Stuff done'
    end

  else
    flash[:error] = 'No stuff provided'
  end

  respond_to do |format|
    format.html { redirect_to :action => 'index' }
    format.json do
      render json: flash
    end
  end
end 
```

# sqlite - 如何为 WinRT / ARM 编译 sqlite？

> ID：11176978
> 
> 赞同：9
> 
> 时间：2012-06-24T11:15:58.150
> 
> 标签：sqlite, makefile, arm, windows-8, windows-runtime

[如 Tim Heuer 所述，](http://timheuer.com/blog/archive/2012/06/05/howto-video-using-sqlite-in-metro-style-app.aspx)我已经成功编译了我的 WinRT 版本的 SQLite for x86 。

但是，我仍在努力如何在 ARM CPU 上为 WinRT 编译 dll。我已经使用 Visual Studio ARM 命令提示符运行了 nmake，但这只会给我以下错误：

```
 C:\sqlite>nmake -f makefile.msc sqlite3.dll FOR_WINRT=1 OPTS=/DWINAPI_FAMILY=WIN
API_PARTITION_APP

Microsoft (R) Program Maintenance Utility Version 11.00.50522.1
Copyright (C) Microsoft Corporation.  All rights reserved.

        cl.exe -W3 -DNDEBUG -D_CRT_SECURE_NO_DEPRECATE -D_CRT_SECURE_NO_WARNINGS
 -O2 -Zi /DEBUG -Femkkeywordhash.exe  -DSQLITE_ENABLE_FTS3=1 -DSQLITE_ENABLE_RTR
EE=1 -DSQLITE_ENABLE_COLUMN_METADATA=1 -DSQLITE_MAX_TRIGGER_DEPTH=100 /DWINAPI_F
AMILY=WINAPI_PARTITION_APP .\tool\mkkeywordhash.c
Microsoft (R) C/C++ Optimizing Compiler Version 17.00.50522.1 for ARM

Copyright (C) Microsoft Corporation.  All rights reserved.

mkkeywordhash.c

Microsoft (R) Incremental Linker Version 11.00.50522.1
Copyright (C) Microsoft Corporation.  All rights reserved.

/machine:arm
/debug
/out:mkkeywordhash.exe
mkkeywordhash.obj
        .\mkkeywordhash.exe > keywordhash.h
This version of C:\sqlite\mkkeywordhash.exe is not compatible with the version o
f Windows you're running. Check your computer's system information and then cont
act the software publisher.
NMAKE : fatal error U1077: '.\mkkeywordhash.exe' : return code '0x1'
Stop. 
```

我究竟做错了什么？

谢谢，

阿德里安

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T12:08:00.007

我终于设法完成了这项工作：

1.  按照此处所述编译 x86 dll：http: [//timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx](http://timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx)

2.  仅删除了 sqlite3* 文件和 sqlitelib（非常感谢 Banthar 和 Tim Heuer 的提示）

3.  使用以下命令从 ARM VS 命令提示符编译 ARM dll：

nmake -f makefile.msc sqlite3.dll FOR_WINRT=1 OPTS=/DWINAPI_FAMILY=WINAPI_PARTITION_APP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:41:16.300

您还可以通过此项目获取预编译的二进制文件： [https ://github.com/praeclarum/sqlite-net/tree/master/lib/metro](https://github.com/praeclarum/sqlite-net/tree/master/lib/metro)

# javascript - innerHTML 不刷新 IE9 上的显示

> ID：11176979
> 
> 赞同：0
> 
> 时间：2012-06-24T11:16:04.613
> 
> 标签：javascript, internet-explorer-9

初学者 Javascript 问题。

当我设置元素的 innerHTML 字段时 - 它不会引用显示，直到我在页面中上下滚动。这只发生在 IE9

这是我的代码：

```
<ul id="zzz">
<li>
    <input title="Delete" name="DeleteFiles" value="a5e342fd-9180-416b-9938-e66218f275ee"
        id="DeleteCb" onchange="SetDelete(DeleteCb,DeleteLabel)" type="checkbox">  <span id="DeleteLabel" > </span>
    <a href="MyJavaTest_files/_MG_0126.jpg">_MG_0126.jpg</a>
    <br>
    <img style="max-width: 400px;" src="MyJavaTest_files/_MG_0126.jpg">
</li> </ul>

<script type="text/javascript">
SetDelete = function (checkBox, Label) {
    if (checkBox.checked)
        Label.innerHTML="<B>Delete<B>";
    else
        Label.innerHTML = "";}</script> 
```

这是我单击时的外观：

![在此处输入图像描述](../Images/c19de2f0dc484ea7b4778d6f5c7eaf15.png)

在这里，它是我最小化和最大化后的样子，或者其他任何会导致它重新绘制该区域的东西。

我还尝试了 jQuery HTML 并得到了相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:20:49.270

您需要使用`document.getElementById`，因为您传递的是`id`值而不是节点本身：

```
SetDelete = function (checkBox, Label) {
    var checkbox = document.getElementById(checkBox);
    var Label = document.getElementById(Label);
    if (checkBox.checked)
        Label.innerHTML="<B>Delete<B>";
    else
        Label.innerHTML = "";
} 
```

并在调用时使用引号：

```
onchange="SetDelete('DeleteCb', 'DeleteLabel')" 
```

* * *

还要避免使用诸如`Checkbox`, `Label`, `Submit`,`Button`等变量名，因为它们会产生难以找到的问题。

# python - 浏览器上的谷歌搜索和通过自定义搜索 api 进行的谷歌搜索会为同一查询提供不同的结果

> ID：11176985
> 
> 赞同：1
> 
> 时间：2012-06-24T11:16:42.880
> 
> 标签：python, google-search-api

我有一个 python 程序，它获取密码的 md5 和 sha1 哈希值，并使用谷歌的自定义搜索 api 在互联网上搜索它们。问题是我在运行程序时得到 0 个结果（这意味着哈希可能不在彩虹表中）。但是当我使用浏览器搜索时，我得到了一大堆结果，实际上至少有 10 页的结果。

问题可能出在我使用的 cx 值上吗？我从 google 提供的[示例程序](http://code.google.com/p/google-api-python-client/source/browse/samples/customsearch/main.py)中选择了它，因为我不知道如何为自己获得一个。还是自定义搜索 api 只给出选定的结果，而试图从中获得更多结果是徒劳的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-09T13:06:40.070

我知道这是很老的帖子，但它在谷歌搜索结果中的返回率仍然很高，所以稍微澄清一下：

1.  您可以在这里创建自己的 CSE：https: [//www.google.com/cse/](https://www.google.com/cse/)。
2.  API 代码可以使用 API 控制台创建：[https](https://cloud.google.com/) ://cloud.google.com/ 。
3.  使用 Google 自定义搜索，您可以搜索整个 Web：从第 1 点转到系统，从左侧菜单中选择要编辑的 CSE，然后在 Configuration -> Basics -> Sites 中选择搜索整个 Web 的选项，然后最后删除以前指定的站点。
4.  Still using CSE you might not get the same results as using live google as it does not include google features (real-time results, social features etc.) and once you specify more than 10 sites to look on it can actually use sub-index. More information can be found in here: [https://support.google.com/customsearch/answer/70392?hl=en](https://support.google.com/customsearch/answer/70392?hl=en)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T11:35:07.047

Google自[定义搜索 API](https://developers.google.com/custom-search/v1/using_rest)让您仅在 Google 索引中搜索特定网站，您不会在 Internet 上的其他任何地方找到任何结果。该`cx`参数告诉 Google 您要搜索哪个网站。

从[Google 自定义搜索引擎页面](https://www.google.com/cse/)：

> 使用 Google 自定义搜索，在您的主页上添加一个搜索框，以帮助人们在您的网站上找到他们需要的内容。

您可以使用已弃用的[Google Web Search API](https://developers.google.com/web-search/)（JavaScript API，应该可以在 2013 年 11 月之前使用），或者您必须改为抓取提供给浏览器的 HTML UI（另请参阅[Google Web Search API 现在有哪些替代方案）被弃用了吗？](https://stackoverflow.com/questions/4082966/google-web-search-api-deprecated-what-now)）。

# android - Android VOIP 应用程序无法访问互联网

> ID：11176988
> 
> 赞同：10
> 
> 时间：2012-06-24T11:17:04.193
> 
> 标签：android, sip, voip

我需要在 2 个 android 设备之间开发 VOIP 应用程序。
据我所知，有一个用于此目的的 SIP 协议，但它需要注册到 SIP 服务器并访问互联网以进行 SIP 信令。
有什么方法可以在没有互联网访问的情况下在 android 中创建 VOIP 应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-06-04T13:38:48.547

当然有可能！为什么你需要互联网？只要你们都连接到同一个网络就可以了！下面是一个工作应用程序的 java 和 xml。

启动时，它会为您提供您自己的本地端口，例如“52022”.. 这是每次都是随机的，不幸的是，这无济于事。然后我们输入另一部手机的 IP 地址和他们随机生成的端口号，然后按连接。他们做的完全一样，万岁你已经连接了！这个测试应用程序显然需要您在附近交换端口号，但在我的适当应用程序中，我可以在连接之前轻松请求每个端口号。希望这可以帮助！

```
public class MainActivity extends Activity {

AudioGroup m_AudioGroup;
AudioStream m_AudioStream;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
      StrictMode.setThreadPolicy(policy);
      try {   
          AudioManager audio =  (AudioManager) getSystemService(Context.AUDIO_SERVICE); 
          audio.setMode(AudioManager.MODE_IN_COMMUNICATION);
          m_AudioGroup = new AudioGroup();
          m_AudioGroup.setMode(AudioGroup.MODE_NORMAL);
          m_AudioStream = new AudioStream(InetAddress.getByAddress(getLocalIPAddress ()));
          int localPort = m_AudioStream.getLocalPort();
          m_AudioStream.setCodec(AudioCodec.PCMU);
          m_AudioStream.setMode(RtpStream.MODE_NORMAL);

          ((TextView)findViewById(R.id.lblLocalPort)).setText(String.valueOf(localPort));

          ((Button) findViewById(R.id.button1)).setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                String remoteAddress = ((EditText)findViewById(R.id.editText2)).getText().toString();
                String remotePort = ((EditText)findViewById(R.id.editText1)).getText().toString();

                  try {
                    m_AudioStream.associate(InetAddress.getByName(remoteAddress), Integer.parseInt(remotePort));
                } catch (NumberFormatException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (UnknownHostException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                  m_AudioStream.join(m_AudioGroup);
            }
        });

          ((Button) findViewById(R.id.button2)).setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                      m_AudioStream.release();
                }
            });

      } catch (Exception e) {
       Log.e("----------------------", e.toString());
       e.printStackTrace();
      }
}

public static byte[] getLocalIPAddress () {
    byte ip[]=null;
       try {
           for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
               NetworkInterface intf = en.nextElement();
               for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                   InetAddress inetAddress = enumIpAddr.nextElement();
                   if (!inetAddress.isLoopbackAddress()) {
                    ip= inetAddress.getAddress();
                   }
               }
           }
       } catch (SocketException ex) {
           Log.i("SocketException ", ex.toString());
       }
       return ip;
    }
} 
```

布局文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/lblLocalPort"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/localPort" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        android:ems="10"
        android:hint="@string/iPHint"
        android:inputType="phone" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        android:ems="10"
        android:hint="@string/portHint"
        android:inputType="number" >

        <requestFocus />
    </EditText>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:layout_marginTop="20dp">

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/connect" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/Disconnect" />
    </LinearLayout>
</LinearLayout> 
```

**编辑：** IP 地址方法在 API 22 停止工作，使用以下代码：

```
private byte[] getLocalIPAddress() {   
    byte[] bytes = null;

    try {
        // get the string ip
        WifiManager wm = (WifiManager) getSystemService(WIFI_SERVICE);
        String ip = Formatter.formatIpAddress(wm.getConnectionInfo().getIpAddress());

        // convert to bytes
        InetAddress inetAddress = null;
        try {
            inetAddress = InetAddress.getByName(ip);
        } catch (UnknownHostException e) {
            e.printStackTrace();
        }

        bytes = new byte[0];
        if (inetAddress != null) {
            bytes = inetAddress.getAddress();
        }

    } catch (Exception e) {
        e.printStackTrace();
        Toast.makeText(this, R.string.phone_voip_incompatible, Toast.LENGTH_SHORT).show();
    }

    return bytes;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T11:58:14.713

实际上 SIP 客户端可以进行点对点通信，他们只需要知道自己的 IP 地址和侦听 SIP 消息的 UDP 端口即可。

您可以在两个通勤者上使用普通的 SIP 客户端（Windows 的 X-Lite、Linux 的 Twinkle 和其他一些也存在），并尝试在它们之间建立呼叫而无需服务器注册。这是很有可能的。

你也可以在本地局域网的某个地方运行一个简约的 SIP 服务器。例如，FreeSWITCH 可以最小化到一个非常小的占用空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T12:53:41.093

好的，所以如果您正在寻找一些对等 2 对等通信，我认为 wifi 是要走的路（更好的距离和速度）。如果您只能为较新版本的 Android 进行开发，那么[WI-FI Direct](http://developer.android.com/guide/topics/connectivity/wifip2p.html)是不错的选择，但这仅适用于 Android 4.0 及更高版本

为了让某些东西在 4.0 以下运行，您将不得不使用 3rd 方库。我知道高通有一个名为[alljoyn](https://developer.qualcomm.com/mobile-development/mobile-technologies/peer-peer-alljoyn)的库，但不确定它有多好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-14T10:42:00.843

我认为您可以在包括 Andriod 在内的多个平台[上将 JITSI](https://jitsi.org/)用于 p2p voip 服务。

这些是我对这个项目的发现：-

1.  不需要任何服务器或互联网连接。
2.  用户必须在同一网络下。
3.  开源。
4.  Android apk 是可用的，很可能你可以在网站上找到它的代码，或者你可以反编译它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-24T11:22:15.137

这是不可能的，因为 VOIP 呼叫通过互联网和 sip 服务器传递。

例如 。如果您想通过 VOIP dailer 从您所在的国家/地区拨打电话，您必须需要互联网接入，因为无法通过蓝牙进行通信。

谢谢。

# c++ - OpenCL 浮点精度

> ID：11176990
> 
> 赞同：6
> 
> 时间：2012-06-24T11:17:11.970
> 
> 标签：c++, windows, opencl, precision

我发现 OpenCL 中的主机 - 客户端浮动标准存在问题。问题是在 x86 中编译时，Opencl 计算的浮点数与我的 Visual Studio 2010 编译器的浮点数限制不同。但是，在 x64 中编译时，它们的限制相同。我知道它必须与[http://www.viva64.com/en/b/0074/](http://www.viva64.com/en/b/0074/)

我在测试期间使用的源是：http: [//www.codeproject.com/Articles/110685/Part-1-OpenCL-Portable-Parallelism](http://www.codeproject.com/Articles/110685/Part-1-OpenCL-Portable-Parallelism) 当我在 x86 中运行程序时，它会给我 202 个相等的数字，当内核和 C++ 程序取了 1269760 个数字的平方。然而，在 64 位版本中，1269760 个数字是正确的，即 100%。此外，我发现opencl和x86 c++的计算结果之间的误差为5.5385384e-014，与数字的epsilon 2.92212543378266922312416e-19相比，这是一个很小的分数，但还不够小。
那是因为，误差需要小于 epsilon，这样程序才能将这两个数字识别为一个相等的数字。当然，通常人们永远不会在本地比较浮点数，但很高兴知道浮点数限制是不同的。是的，我尝试设置 flt:static，但得到了同样的错误。

所以我想对这种行为做出某种解释。提前感谢所有答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T14:09:39.653

由于当您将项目从 x86 切换到 x64 时，GPU 代码没有任何变化，这一切都与如何在 CPU 上执行乘法有关。在 x86 和 x64 模式下处理浮点数之间存在一些细微差别，最大的区别在于，由于任何 x64 CPU 也支持 SSE 和 SSE2，因此它默认用于 Windows 上 64 位模式下的数学运算。

HD4770 GPU 使用单精度浮点单元进行所有计算。另一方面，现代 x64 CPU 有两种处理浮点数的功能单元：

*   x87 FPU 以更高的 80 位扩展精度运行
*   SSE FPU 以 32 位和 64 位精度运行，并且与其他 CPU 处理浮点数的方式非常兼容

在 32 位模式下，编译器不假定 SSE 可用并生成通常的 x87 FPU 代码来进行数学运算。在这种情况下，类似的操作`data[i] * data[i]`是在内部使用更高的 80 位精度执行的。种类的比较`if (results[i] == data[i] * data[i])`如下进行：

*   `data[i]`使用`FLD DWORD PTR data[i]`
*   `data[i] * data[i]`计算使用`FMUL DWORD PTR data[i]`
*   `result[i]`使用推入 x87 FPU 堆栈`FLD DWORD PTR result[i]`
*   两个值都使用比较`FUCOMPP`

问题来了。`data[i] * data[i]`以 80 位精度驻留在 x87 FPU 堆栈元素中。`result[i]`来自 GPU 的 32 位精度。这两个数字很可能会有所不同，因为`data[i] * data[i]`有更多的有效数字而`result[i]`有很多零（以 80 位精度）！

在 64 位模式下，事情以另一种方式发生。编译器*知道*您的 CPU 具有 SSE 功能，并且它使用 SSE 指令进行数学运算。同样的比较语句在 x64 上以如下方式执行：

*   `data[i]`使用加载到 SSE 寄存器中`MOVSS XMM0, DWORD PTR data[i]`
*   `data[i] * data[i]`计算使用`MULSS XMM0, DWORD PTR data[i]`
*   `result[i]`使用加载到另一个 SSE 寄存器`MOVSS XMM1, DWORD PTR result[i]`
*   两个值都使用比较`UCOMISS XMM1, XMM0`

在这种情况下，平方运算以与 GPU 上使用的相同的 32 位单点精度执行。不会生成具有 80 位精度的中间结果。这就是为什么结果是一样的。

即使没有 GPU 参与，实际测试也很容易。只需运行以下简单程序：

```
#include <stdlib.h>
#include <stdio.h>

float mysqr(float f)
{
    f *= f;
    return f;
}

int main (void)
{
    int i, n;
    float f, f2;

    srand(1);
    for (i = n = 0; n < 1000000; n++)
    {
        f = rand()/(float)RAND_MAX;
        if (mysqr(f) != f*f) i++;
    }
    printf("%d of %d squares differ\n", i);
    return 0;
} 
```

`mysqr`是专门编写的，以便将中间 80 位结果转换为 32 位精度`float`。如果在 64 位模式下编译运行，输出为：

```
0 of 1000000 squares differ 
```

如果在 32 位模式下编译运行，输出为：

```
999845 of 1000000 squares differ 
```

原则上，您应该能够在 32 位模式下更改浮点模型（*Project properties -> Configuration Properties -> C/C++ -> Code Generation -> Floating Point Model*）但是这样做不会改变任何事情，因为至少在 VS2010 中间结果仍保存在 FPU 中。您可以做的是强制存储和重新加载计算平方，以便在将其与 GPU 的结果进行比较*之前将其舍入到 32 位精度。*在上面的简单示例中，这是通过更改：

```
if (mysqr(f) != f*f) i++; 
```

至

```
if (mysqr(f) != (float)(f*f)) i++; 
```

更改后32位代码输出变为：

```
0 of 1000000 squares differ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T22:59:49.980

就我而言

```
(float)(f*f) 
```

没有帮助。我用了

```
 correct = 0;
  for(unsigned int i = 0; i < count; i++) {
    volatile float sqr = data[i] * data[i];
    if(results[i] == sqr)
      correct++;
  } 
```

反而。

# groovy - 在 gradle 自定义插件中添加 Jar 依赖项

> ID：11176991
> 
> 赞同：2
> 
> 时间：2012-06-24T11:17:12.420
> 
> 标签：groovy, gradle

假设我所有的 Gradle 插件用户都将在 MYAPP_HOME 页面的系统中设置一个 MYAPP_HOME sys 变量，我在 $MYAPP_HOME/lib/mylib.jar 有一个 jar

我正在编写我自己的插件....

我可以找到 MYAPP_HOME 变量已设置并且 jar 存在..

如何在我的自定义 gradle 插件中添加这个 jar 依赖项...？当用户运行我的插件时说 compileMyplugin 我的自定义 gradle 插件需要将 $MYAPP_HOME/lib/mylib.jar jar 设置为编译器依赖

如何做到这一点任何人帮助我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T11:43:59.663

该插件只需要这样做：

```
project.dependencies {
    compile project.files("${System.getenv("MYAPP_HOME")}/lib/mylib.jar"))
} 
```

PS：一般来说，我不建议依赖环境变量和本地文件系统上 Jar 的可用性。相反，我会将 Jar 发布到工件存储库或将其置于源代码控制之下。

# json - 钛中的 JSON 问题

> ID：11176996
> 
> 赞同：0
> 
> 时间：2012-06-24T11:17:34.420
> 
> 标签：json, parsing, titanium

我有这个 createHTTPClient 函数：

```
xhr.onload = function () {

    var response = this.responseText;
    Ti.API.info("Response" + response);

    dataClean = JSON.parse(this.responseText);
    Ti.API.info("Dataclean" + dataClean);
    //dataClean= response;
    app.myfunction(); 
```

响应显示结果正常，但是当我解析它们时，dataClean 显示“[object Object]”有人知道原因吗？在此先感谢 PS。dataClean 是一个全局变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:56:59.217

这不是错误。如果您想打印出一个对象，您应该使用 JSON.stringify(dataClean) 将其转换为 JSON 表示法的字符串

# c++ - 如何使用salsa20（或ChaCha）？

> ID：11176998
> 
> 赞同：3
> 
> 时间：2012-06-24T11:17:37.617
> 
> 标签：c++, c, cryptography

假设我们有一个可以以 1024 字节左右的块读取的大文件，我如何使用 Salsa 或 Chacha 20 加密和解密每个块？

另外，我将在哪里指定轮数（即 8、12 或 20）？

到目前为止，我还无法通过查看 eSTREAM 测试包来弄清楚:(

我通过[eSTREAM](http://www.ecrypt.eu.org/stream/project.html)和[Salsa20 主页](http://cr.yp.to/snuffle.html)下载了以下文件：

*   查查.c
*   加密配置.h
*   加密机器.h
*   ecrypt-portable.h
*   加密同步.h

我看到 encrypt-sync.h 中的评论按此顺序讨论调用函数：

*   ECRYPT_keysetup();
*   ECRYPT_ivsetup();
*   ECRYPT_encrypt_bytes();

但我完全不知道我应该提供什么作为参数来完成这项工作......

到目前为止，这是我最好的尝试，从一小串纯文本开始（我的 C 已经生锈了......我可能犯了一些基本错误，虽然我看不到它）：

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include "ecrypt-sync.h"

#define CHUNKSIZE 1024

void getRandomBytes(u8 **str, u32 len);
void showData(u8 *data, u8 *header);

int main(int argc, char** argv)
{
    char plaintext[CHUNKSIZE] = "THIS IS A TEST";
    ECRYPT_ctx ctx;
    u8 *key, *IV, *ciphertext, *result;

    /*
    Don't use random values till we get it working with zeroes at least
    getRandomBytes(&key, ECRYPT_MAXKEYSIZE/8);
    getRandomBytes(&IV, ECRYPT_MAXIVSIZE/8);
    */

    key = (u8 *)calloc((size_t)ECRYPT_MAXKEYSIZE/8, sizeof(u8));
    IV = (u8 *)calloc((size_t)ECRYPT_MAXIVSIZE/8, sizeof(u8));

    printf("Encrypting [%s] using random %d bit key and %d bit IV:\n", plaintext, ECRYPT_MAXKEYSIZE, ECRYPT_MAXIVSIZE);

    ECRYPT_init();
    ECRYPT_keysetup(&ctx, key, ECRYPT_MAXKEYSIZE, ECRYPT_MAXIVSIZE);
    ECRYPT_ivsetup(&ctx, IV);

    ciphertext = (u8 *)calloc((size_t)CHUNKSIZE, sizeof(u8));

    ECRYPT_encrypt_bytes(&ctx, plaintext, ciphertext, CHUNKSIZE);

    //showData(ciphertext, "CIPHERTEXT");

    result = (u8 *)calloc((size_t)CHUNKSIZE, sizeof(u8));

    ECRYPT_decrypt_bytes(&ctx, ciphertext, result, CHUNKSIZE);
    printf("And now decrypting back: [%s]\n", result);

    return 0;
}

void showData(u8 *data, u8 *header) {
    printf("\n-----BEGIN %s-----\n%s\n-----END %s-----\n", header, data, header);

}

void getRandomBytes(u8 **str, u32 len) {
    int fd = open("/dev/random", O_RDONLY);
    char *ptr = malloc((size_t) + 1);

    read(fd, ptr, len);
    close(fd);

    ptr[len] = '\0';
    *str = ptr; 
} 
```

结果如下：

> 使用随机 256 位密钥和 64 位 IV 加密 [这是一个测试]：现在解密回来：[（一堆随机字符）]

它应该在哪里：

> 现在解密回来：[这是一个测试]

随意使用 C 或 C++ 提供您的解决方案

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T06:14:45.713

如果您打算在实际代码中使用 Salsa20 并且您提出这样的问题，您可能希望使用带有友好 C++ 包装器的 NaCl 库。

请参阅[NaCl 网站](http://nacl.cr.yp.to/)。

要回答您的实际问题：您需要再次设置 IV 以进行解密操作。IV 由您的随机数和块偏移量组成。加密/解密函数会增加偏移量，从而为您的代码提供不同的加密和解密函数 IV。