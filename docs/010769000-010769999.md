# StackOverflow 问答 10769000-10769999

# ocaml - 多态变体上的 OCaml 函数不够多态？

> ID：10769001
> 
> 赞同：6
> 
> 时间：2012-05-26T19:06:15.507
> 
> 标签：ocaml, type-inference, variant, polymorphism

OCaml 给出`function `A -> 1 | _ -> 0`了类型`[> `A] -> int`，但为什么不是`[> ] -> int`呢？

这是我的推理：

*   `function `B -> 0`有类型`[<`B] -> int`。添加一个``A -> 0`分支以使其`function `A -> 1 | `B -> 0`松散到`[<`A|`B] -> int`. 该函数在它可以接受的参数类型上变得更加宽容。这是有道理的。
*   `function _ -> 0`有类型`'a -> int`。这种类型可以与 统一`[> ] -> int`，并且`[> ]`是一个已经开放的类型（非常宽松）。添加``A -> 0`分支以使其将类型`function `A -> 1 | _ -> 0` *限制*为`[>`A] -> int`. 这对我来说没有意义。事实上，再添加一个分支``C -> 1`就可以了`[>`A|`C] -> int`，进一步限制了类型。为什么？

注意：我不是在寻找解决方法，我只是想知道这种行为背后的逻辑。

在相关说明中，`function `A -> `A | x -> x`有 type `([>`A] as 'a) -> 'a`，虽然这也是参数的限制性开放类型，但我可以理解原因。`'a -> 'a`类型应与, `[>` ] -> 'b`, `'c -> [>`A]`;统一 这样做的唯一方法似乎是`([>`A] as 'a) -> 'a`。

我的第一个例子是否存在类似的原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T19:31:03.720

一个可能的答案是该类型`[> ] -> int`将允许一个参数`(`A 3)`，但这是不允许的`function `A -> 1 | _ -> 0`。换句话说，类型需要记录``A`不带参数的事实。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-28T13:30:00.363

原因很实际：
在旧版本的 OCaml 中，推断类型是

```
[`A | .. ] -> int 
```

这意味着 A 没有参数，但可能不存在。

然而，这种类型是统一的

```
[`B |`C ] -> int 
```

这导致 `A 在没有任何检查的情况下被丢弃。

它很容易引入拼写错误的错误。
因此，变体构造函数必须出现在上限或下限中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T06:34:30.823

的类型`(function `A -> 1 | _ -> 0)`是合理的，正如 Jeffrey 所解释的那样。之所以

```
(function `A -> 1 | _ -> 0) ((fun x -> (match x with `B -> ()); x) `B) 
```

在我看来，没有进行类型检查应该由表达式的后半部分来解释。实际上，该函数`(fun x -> (match x with `B -> ()); x)`具有输入类型`[< `B]`，而其参数``B`具有类型`[> `B ]`。两种类型的统一给出了非`[ `B ]`多*态*的封闭类型。它不能与`[> `A ]`您从中获得的输入类型统一`(function `A -> 1 | _ -> 0)`。

幸运的是，多态变体不仅仅依赖于（行）多态性。您还可以在某些情况下使用*子类型*，例如，您想要扩大封闭类型：`[ `B ]`是的子类型，例如，`[`A | `B]`它是 的实例`[> `A ]`。子类型转换在 OCaml中是*显式*的，使用语法`(expr :> ty)`（转换为某种类型），或者`(expr : ty :> ty)`在无法推断出正确的域类型的情况下。

因此，您可以编写：

```
let b = (fun x -> (match x with `B -> ()); x) `B in
(function `A -> 1 | _ -> 0) (b :> [ `A | `B ]) 
```

这是很好的类型。

# google-maps-api-3 - Google Maps API 街道亮点

> ID：10769002
> 
> 赞同：1
> 
> 时间：2012-05-26T19:06:16.727
> 
> 标签：google-maps-api-3

当我在谷歌上搜索一条没有街道编号的道路时，我注意到了一个特定的效果，其中静态地图缩略图以街道为中心，街道以红色边框突出显示。这是我的查询；您会在搜索结果之前看到地图。

[威尔逊路 0​​8012](http://www.google.com/search?q=wilson%20rd%2008012)

有谁知道是否有办法通过 Google Static Maps API 实现这种效果？理想情况下，我可以在街上经过并压缩以重现该搜索图像。我知道这里还有其他问题询问如何使用街道数据在地图上绘制一条线，但我很好奇是否有人知道如何让谷歌做它已经在做的事情，但以编程方式。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:33:34.807

记录了静态地图 API：[https](https://developers.google.com/maps/documentation/staticmaps/) ://developers.google.com/maps/documentation/staticmaps/ ，目前道路样式不包括此内容。

但是，功能通常会首先添加到 Google 地图中，并且确实会从那里找到进入其 API 的方式。但在完成之前，他们从不宣布时间表或即将发生的事情。我个人希望这是可选的。

# c# - 使用存储过程的结果集填充 GridView

> ID：10769004
> 
> 赞同：1
> 
> 时间：2012-05-26T19:06:18.500
> 
> 标签：c#, asp.net

我一直在努力通过单击按钮在网格视图中显示存储过程的结果集。

我的问题是正在处理基于 3 层架构的门户的现有代码，这不允许我使用诸如此类的东西`SqlDataAdapter`。因为这些功能已经被一些以 dll 形式提供的方法合并。

我尝试返回 a`DataTable`或 a`DataSet`作为 gridview 的数据源，但徒劳无功。

请通过建议是否有任何替代对象可以分配给gridview的数据源来帮助我。我对这一切都很陌生。任何帮助都非常感谢！

这是我的代码：

数据访问层：

```
public IDataReader BindGridView(string rgn)
{
    string spdName = "spd_get_default_region";
    DbCommand cmd = DB.GetStoredProcCommand(spdName);
    DB.AddInParameter(cmd, "Rgn", DbType.String, rgn);
    IDataReader idr = cmd.ExecuteReader();
    return  idr;
} 
```

这里，`GetStoredProcCommand`是一个内置的方法。`gvAll`是网格视图的 ID。

Grid.aspx.cs：

```
protected void Go_Rgn_Click(object sender, EventArgs e)
{ 
    DAL da=new DAL();
    plhTable.Visible = true;
    plhChoose.Visible = false;
    plhForm.Visible = false;
    string Rgn = afRgn.Text;
    gvAll.DataSource = da.BindGridView(Rgn);
    gvAll.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:46:28.447

一个简单的替代方法是创建一个 dataTable 对象。

```
DataTable defaultRegion = new DataTable();
defaultRegion.Load(cmd.ExecuteReader());
gvAll.DataSource = table;
gvAll.DataBind(); 
```

# function - 用不同数量的参数重载的函数

> ID：10769005
> 
> 赞同：4
> 
> 时间：2012-05-26T19:06:25.070
> 
> 标签：function, clojure, arguments

许多 Clo​​jure 函数接受不同数量的参数，我经常对文档以及它与我应该使用函数的方式之间的关系感到有些困惑。

例如`(doc partial)`返回这个：

```
([f arg1] [f arg1 arg2] [f arg1 arg2 arg3] [f arg1 arg2 arg3 & more]) 
```

我的问题不是专门针对*部分*问题，而是...

为什么最多*arg1 arg2 arg3 & more*而不是*arg1 & more*或*arg1 arg2 & more*或*arg1 arg2 arg3 arg4 arg5 arg6 arg7 arg8 & more*？

*我对最后一个很有趣，但这是一个非常现实的问题：是什么决定了需要在& more*之前放置多少个“argX” ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T19:33:41.103

以下答案是我的猜测：看看`partial`show us 的实现：

```
(defn partial
  "Takes a function f and fewer than the normal arguments to f, and
  returns a fn that takes a variable number of additional args. When
  called, the returned function calls f with args + additional args."
  {:added "1.0"
   :static true}
  ([f arg1]
   (fn [& args] (apply f arg1 args)))
  ([f arg1 arg2]
   (fn [& args] (apply f arg1 arg2 args)))
  ([f arg1 arg2 arg3]
   (fn [& args] (apply f arg1 arg2 arg3 args)))
  ([f arg1 arg2 arg3 & more]
   (fn [& args] (apply f arg1 arg2 arg3 (concat more args))))) 
```

如您所见，对 partial 的每次调用都在做同样的事情 - 即返回一个接受一些 args`apply`的函数，并使用输入 args 和新 args 调用输入函数。所以这确实可以写成`arg1 & more`。但是等等，让我们看看 apply 的实现：

```
(defn apply
 "Applies fn f to the argument list formed by prepending intervening arguments to args."
 {:added "1.0"
  :static true}
 ([^clojure.lang.IFn f args]
    (. f (applyTo (seq args))))
 ([^clojure.lang.IFn f x args]
    (. f (applyTo (list* x args))))
 ([^clojure.lang.IFn f x y args]
    (. f (applyTo (list* x y args))))
 ([^clojure.lang.IFn f x y z args]
    (. f (applyTo (list* x y z args))))
 ([^clojure.lang.IFn f a b c d & args]
    (. f (applyTo (cons a (cons b (cons c (cons d (spread args))))))))) 
```

Apply 是一个核心函数，当给定不同数量的参数时，它的执行方式也不同。这是出于性能原因应用的优化。这就是暴露不同部分（和其他此类函数）的原因，因为不同的部分代码的内部执行是不同的。

我假设 clojure/core 团队认为暴露部分超出 arg1 arg2 arg3 及更多（即编写 arg1 arg2 arg3 arg4 及更多）的数量并不美观，因此他们决定停止在 3 个 args 及更多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T19:37:22.573

你认为什么都是合理的。如果函数不是可变的，那么调用函数会更快，因此它们提供了几个如果您不超过其限制将直接调用的函数。

我认为函数的 IFn 也有 20(?) args 的限制，但我不知道编译器中是否有解决方法。

# css - CSS3 过渡自定义动画

> ID：10769010
> 
> 赞同：0
> 
> 时间：2012-05-26T19:08:09.810
> 
> 标签：css, css-transitions, css-animations

我在 CSS3 中有一个自定义动画，我可以将其转换为视图，但我无法将其转换出来。看看我的小提琴：http: [//jsfiddle.net/spryno724/SW8Ly/](http://jsfiddle.net/spryno724/SW8Ly/)。请注意，这种转换目前仅适用于 Webkit 浏览器。

尝试将鼠标滚动到样式文本输入上。当您将鼠标滑过文本字段时，背景会从白色变为蓝色，但不会从蓝色变为白色。

我认为该`ease-in-out`属性会解决这个问题，但它似乎只适用于预定义的动画。

鼠标移出时如何从蓝色过渡到白色？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:37:45.913

为什么不使用默认的 (-webkit-) 过渡方法？看起来你根本不想做一些奇怪的事情。只要看看这个jsfiddle：http: [//jsfiddle.net/savver/SW8Ly/2/](http://jsfiddle.net/savver/SW8Ly/2/)

看到这个效果：[http](http://www.css3.info/preview/css3-transitions/) ://www.css3.info/preview/css3-transitions/只需向下滚动，您就会看到每个属性的作用。

# mysql - SQL INNER JOIN ON LIKE

> ID：10769015
> 
> 赞同：1
> 
> 时间：2012-05-26T19:08:52.760
> 
> 标签：mysql, sql, select, inner-join

考虑以下两个表格。以粗体显示字段名称。在字段名称下方，字段内容：

tableA :
**group**
ops side west
ops north area
commando alpha
backUp
admin

表B：
**组**
行动
突击队

我想要的是进行类似查询的内部连接。我在 phpMyAdmin 中尝试了以下操作，但它不起作用：

```
SELECT tableA.group
FROM tableA
INNER JOIN tableB
ON tableA.group LIKE "'tableB.groups'%"
GROUP BY tableA.group 
```

预期的结果是：

ops side west
ops 北区
突击队阿尔法

希望有人可以提供帮助。先感谢您。干杯。马克。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T19:20:17.077

```
SELECT  DISTINCT tableA.group
FROM    tableB
INNER JOIN
        tableA
ON      tableA.group LIKE CONCAT(tableB.groups, '%') 
```

# css - 仅在文本链接悬停 CSS 上显示图像

> ID：10769016
> 
> 赞同：18
> 
> 时间：2012-05-26T19:08:56.613
> 
> 标签：css, image, hyperlink, hover, onmouseover

我有一个文本链接。当用户将鼠标悬停在文本链接上时，我希望在页面的其他位置显示图像。我想用 css 做到这一点。我认为这可以通过链接中的一行代码（如 onmouseover）简单地完成，但似乎需要页面上其他地方的其他代码。

我尝试将 a:hover 与我想显示为背景图像的图片一起使用，但我认为它不能被操纵以完全显示而不是被剪裁到文本链接的大小。

当我尝试搜索时，我看到了数百个结果，但没有一个是我想要的。我发现的最接近的是这个。

[http://www.dynamicdrive.com/style/csslibrary/item/css-image-gallery/](http://www.dynamicdrive.com/style/csslibrary/item/css-image-gallery/)

但这适用于将鼠标悬停在缩略图上。我只希望用户将鼠标悬停在单个文本链接上以在页面上的其他位置显示图像。我从这个线程中找到了那个画廊：[Pop up image css link on hover](https://stackoverflow.com/questions/6781221/css-link-pop-up-image-on-hover)

我不想处理 jquery 是什么或太多的脚本，因为我更熟悉 css。有没有人知道一个简单的方法来做到这一点，或者仍然没有办法，即使对 css3 进行了所有更改？

谢谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-07-28T10:13:19.090

它可以单独使用 CSS 来完成。它在我的机器上完美运行，在 Ubuntu 12.04 下的 Firefox、Chrome 和 Opera 浏览器中运行。

CSS：

```
.hover_img a { position:relative; }
.hover_img a span { position:absolute; display:none; z-index:99; }
.hover_img a:hover span { display:block; } 
```

HTML：

```
<div class="hover_img">
     <a href="#">Show Image<span><img src="images/01.png" alt="image" height="100" /></span></a>
</div> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-26T19:15:27.107

CSS 不能像那样调用其他元素，您需要使用 JavaScript 来超越子选择器或兄弟选择器。

你可以尝试这样的事情：

```
<a>Some Link
<div><img src="/you/image" /></div>
</a> 
```

然后...

```
a>div { display: none; }
a:hover>div { display: block; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-04T21:28:58.040

添加

```
.hover_img a:hover span {
    display: block;
    width: 350px;
} 
```

在表格中显示悬停图像全尺寸将 350 更改为您的尺寸。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-05T05:46:16.897

来自[w3 学校](https://www.w3schools.com/css/css_tooltip.asp)：

```
<style>
/* Tooltip container */
.tooltip {
  position: relative;
  display: inline-block;
  border-bottom: 1px dotted black; /* If you want dots under the hoverable text */
}

/* Tooltip text */
.tooltip .tooltiptext {
  visibility: hidden;
  width: 120px;
  background-color: black;
  color: #fff;
  text-align: center;
  padding: 5px 0;
  border-radius: 6px;

  /* Position the tooltip text - see examples below! */
  position: absolute;
  z-index: 1;
}

/* Show the tooltip text when you mouse over the tooltip container */
.tooltip:hover .tooltiptext {
  visibility: visible;
}
</style>

<div class="tooltip">Hover over me
  <img src="/pathtoimage" class="tooltiptext">
</div> 
```

听起来像你想要的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-07T16:28:18.623

我做了这样的事情：

HTML：

```
<p class='parent'>text text text</p>
<img class='child' src='idk.png'> 
```

CSS：

```
.child {
    visibility: hidden;
}

.parent:hover .child {
    visibility: visible;
} 
```

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2012-05-26T19:21:56.250

仅使用 CSS 是不可能做到这一点的，您需要使用 Javascript。

```
<img src="default_image.jpg" id="image" width="100" height="100" alt="" />

<a href="page.html" onmouseover="document.images['image'].src='mouseover.jpg';" onmouseout="document.images['image'].src='default_image.jpg';"/>Text</a> 
```

# eclipse - 在插件开发中添加简单的表单

> ID：10769018
> 
> 赞同：0
> 
> 时间：2012-05-26T19:09:05.690
> 
> 标签：eclipse, rcp

在过去的几天里，我一直在试图找到解决问题的方法，但没有成功。我根据本教程的第 5 节开发了一个插件项目： [http](http://www.vogella.com/articles/EclipseJDT/article.html#ast_example) ://www.vogella.com/articles/EclipseJDT/article.html#ast_example 。因此，当我运行插件项目时，会打开一个新的 Eclipse 工作区，我可以从中通过添加的新菜单选项执行程序。但是我想添加一个简单的表单，以便用户可以选择三个选项中的一个，然后根据该选项继续执行程序的其余部分。那可能吗？如果是这样，怎么做？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:55:37.227

正确的方法是提供一个包含所有可能选项的 Eclipse 视图。

如果您不熟悉 Eclipse 视图的贡献，最简单的方法可能是打开一个 JFace 选择对话框 (ListDialog)，其中包含您当前命令处理程序中的所有选项。

代码可能如下所示：

```
Shell shell = HandlerUtil.getActiveShell(executionEvent);
ListDialog dlg = new ListDialog(shell);
dlg.setTitle("Options selection");
dlg.setMessage("Please select one of the options below:");
dlg.setContentProvider(new ArrayContentProvider());
dlg.setLabelProvider(new LabelProvider());
dlg.setInput(new Object[] {
    "Option 1", "Option 2", "Option 3"
});
if (Window.OK == dlg.open() && dlg.getResult().length > 0) {
    Object selection = dlg.getResult()[0];
    // TODO decide what to do with selection
} 
```

# php - php readdir 函数可以处理单个目录中的 100 万个文件吗？

> ID：10769020
> 
> 赞同：0
> 
> 时间：2012-05-26T19:09:14.650
> 
> 标签：php, file, readdir

我正在编写一个脚本，该脚本需要扫描单个目录（ext4）中的大量文件（可能多达 100 万个）。我打算使用 PHP readdir 函数来创建列表。

由于我的目录中还没有那么多文件，我不知道它是否可以工作。我知道'ls'之类的文件不适用于那么多文件，但我不需要它们。

所以，问题真的只是...... PHP readdir 会处理 100 万个文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T19:12:28.527

为什么会有这么多文件？它会扼杀你的表现。你不能以某种方式对数据进行分组吗？还是将其存储在数据库中？我真的看不出一个目录中的一百万个文件是如何有意义的。分裂将是巨大的。请举例说明您存储的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T19:45:00.120

如果有人想知道，我对自己的问题的回答是它有效。我创建了一个脚本来创建 100 万个随机文件，并成功运行了 readdir 函数。

# android - 设置和显示动态列表

> ID：10769022
> 
> 赞同：1
> 
> 时间：2012-05-26T19:09:25.613
> 
> 标签：android, list, listview, android-intent, arraylist

我正在尝试制作记事卡应用程序。基本上，用户输入一个术语和定义，并允许从我的主要活动中显示的选择中查看数据。我无法通过意图发送信息并显示发送的信息。由于用户控制信息量，我尝试设置一个 arraylist 和 arrayadapter 来维护它。这是我的主要活动代码：

```
import java.util.ArrayList;
import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;

public class Main extends ListActivity {

ArrayList<String> cards;
ArrayAdapter<String> adapter;   

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

  //This will hold the new items
    cards = new ArrayList<String>();
    adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, cards);

    Button b = (Button) findViewById(R.id.button1);
    View footerView = ((LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.listfooter, null, false);
    this.getListView().addFooterView(footerView);

    //Set the adapter
    this.setListAdapter(adapter);

    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent intent = new Intent(Main.this, NewNote.class);
            startActivityForResult(intent,0);

        }

    });

}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {

 if (requestCode == 0) {

 }
        if (resultCode == RESULT_OK) {

    String s1 =(String) getIntent().getCharSequenceExtra("term");
    String s2 = (String) getIntent().getCharSequenceExtra("definition");
     cards.add(s1);
     cards.add(s2);

     if(cards != null && cards.size() > 0){
           for(int i=0;i<cards.size();i++)
            adapter.add(cards.get(i));
     }
     adapter.notifyDataSetChanged();
}
}
} 
```

这是我从用户那里检索信息的第二个活动：

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class NewNote extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dialog);

    final EditText et1 = (EditText) findViewById(R.id.editText1);
    final EditText et2 = (EditText) findViewById(R.id.editText2);
    Button b = (Button) findViewById(R.id.button1);

    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent intent = new Intent();
            intent.putExtra("term", et1.getText());
            intent.putExtra("definition", et2.getText());
            setResult(0, intent);
            finish();
        }
    });

}
} 
```

此代码无法通过意图将信息发送回我的主要活动并将其添加到我的数组列表中，这应该显示。我也不知道如何将布局xml文件上的listview连接到java文件中的arraylist。我不确定如何进行，或者我是否走在正确的轨道上。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:17:23.507

您有一个简单的错误，在`NewNote`课堂上您调用`setResult(0, intent);` 0 所在的位置`RESULT_CANCELED`，而在`Main`课堂上`onActivityResult`您尝试处理`RESULT_OK`大小写。

打电话`setResult(RESULT_OK, intent);`，一切都会好的:)

至于你的评论，什么样的问题？但无论如何都要试试这个补丁

注意：

```
public class NewNote extends Activity {

    public static final String EXTRA_TERM = "com.yourpackage.EXTRA_NOTE_TERM";
    public static final String EXTRA_DEFINITION = "com.yourpackage.EXTRA_NOTE_DEFINITION";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dialog);
        final EditText et1 = (EditText) findViewById(R.id.editText1);
        final EditText et2 = (EditText) findViewById(R.id.editText2);
        findViewById(R.id.button1).setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.putExtra(EXTRA_TERM, et1.getText().toString());
                intent.putExtra(EXTRA_DEFINITION, et2.getText().toString());
                setResult(RESULT_OK, intent);
                finish();
            }
        });
    }
} 
```

在主要：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == 0) {
            if (resultCode == RESULT_OK) {
                final Intent intent = getIntent();
                String s;
                if((s = (String) intent.getStringExtra(NewNote.EXTRA_TERM)) != null) {
                    adapter.add(s);
                }
                if((s = (String) intent.getStringExtra(NewNote.EXTRA_DEFINITION)) != null) {
                    adapter.add(s);
                }
                if(s != null) {
                    adapter.notifyDataSetChanged();
                }
            }
        }
    } 
```

# c - 制作宽字符文件

> ID：10769023
> 
> 赞同：0
> 
> 时间：2012-05-26T19:09:42.900
> 
> 标签：c, windows, unicode

```
#ifndef UNICODE
#define UNICODE
#endif

#include <stdio.h>
int main()
{
    FILE* oFile;
    oFile = _wfopen(L"foo.txt",L"w");
    //*
    fwprintf(oFile,L"%s", L"ęłó☺☻♥♦•ń");
    fclose(oFile);
    return 0;
} 
```

为什么这个程序创建一个 ASCII 文件而不是 UTF-16，尽管所有函数都是宽的？！

foo.txt 内容：

> za[问号]ó[两个问号...] g[...四个...] ja[另外两个...] [五个*?] [和最后一个]

这是不可转换的。

```
fwprintf(oFile,L"%c%c%s",0xFE,0xFF,L"zażółć gęśłą jaźń ☺☻♥♦• ć"); 
```

现在，它显示了中文符号，无论是小端还是大端，都设置了字节顺序标记。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T06:34:43.410

假设您使用的是 MSVC，请引用[_wfopen](http://msdn.microsoft.com/en-us/library/yeby3zcb.aspx)的文档（我的粗体）：

> fopen 函数打开由文件名指定的文件。_wfopen 是 fopen 的宽字符版本；_wfopen 的参数是宽字符串。否则，_wfopen 和 fopen 的行为相同。**仅使用 _wfopen 对文件流中使用的编码字符集没有影响。**

进一步阅读文档：

> fopen 支持 Unicode 文件流。要打开 Unicode 文件，请将指定所需编码的 ccs 标志传递给 fopen，如下所示。
> 
> fopen(&fp, "newfile.txt", "rw, ccs= 编码");
> 
> 允许的编码值为 UNICODE、UTF-8 和 UTF-16LE。

以下代码写入一个 UTF-8 编码的文件。我将此源文件保存为 UTF-16BE、UTF-16LE 和 UTF-8，MSVC 能够正确编译和运行。

```
#include <stdio.h>

int main()
{
    FILE* oFile;
    oFile = fopen("foo.txt","w, ccs=UTF-8");
    fwprintf(oFile,L"%s", L"ęłó☺☻♥♦•ń");
    fclose(oFile);
    return 0;
} 
```

请注意，在 Windows 命令行上显示此输出需要切换到 UTF-8 代码页：

```
C:\x>chcp
Active code page: 1252

C:\x>x

C:\x>type foo.txt
ï»¿Ä™Å‚Ã³â˜ºâ˜»â™¥â™¦â€¢Å„
C:\Users\metolone\Desktop\x>chcp 65001
Active code page: 65001

C:\x>type foo.txt
ęłó☺☻♥♦•ń 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T21:22:24.147

C 或 C++ 程序中字符宽度（char 或 wchar_t）的选择与文件编码完全无关。

例如，如果您需要一个 UTF16LE 编码的文件，则需要使用指定 UTF16LE 的语言环境，或者作为您的全局语言环境，或者包含在 C++ 流中。或者，您可以自己将字符转换为 UTF16LE 编码的字节序列（`iconv`在 Windows 上使用或其他任何类似物），并使用面向字节的输出将其发送到文件。

NB1：宽字符串需要`"%ls"`格式。

NB2：字符串文字中的非 ASCII 字符是不可移植的。

NB3：您的标签上写着“c”，`<cstdio>`是 C++，但该程序不是有效的 C++ 程序。您使用哪种语言？下定决心；）

# spring - org.springframework.orm.hibernate4 maven或jar下载

> ID：10769026
> 
> 赞同：2
> 
> 时间：2012-05-26T19:09:57.607
> 
> 标签：spring, hibernate, configuration, web

我在休眠的spring web项目配置中遇到了这样的错误：

```
java.lang.NoClassDefFoundError: Lorg/hibernate/cache/CacheProvider;
        at java.lang.Class.getDeclaredFields0(Native Method)
        at java.lang.Class.privateGetDeclaredFields(Class.java:2291)
        at java.lang.Class.getDeclaredFields(Class.java:1743)
        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findPersistenceMetadata(PersistenceAnnotationBeanPostProcessor.java:3
        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessMergedBeanDefinition(PersistenceAnnotationBeanPostProcesso
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyMergedBeanDefinitionPostProcessors(AbstractAutowireCapableBean
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:493)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4135)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4630)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:445)
        at org.apache.catalina.startup.Embedded.start(Embedded.java:825)
        at org.codehaus.mojo.tomcat.AbstractRunMojo.startContainer(AbstractRunMojo.java:558)
        at org.codehaus.mojo.tomcat.AbstractRunMojo.execute(AbstractRunMojo.java:255)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.lang.ClassNotFoundException: org.hibernate.cache.CacheProvider
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1645)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1491)
        ... 48 more 
```

我在 pom.xml 的 hibernate 和 spring 依赖项如下：

```
<dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-remoting</artifactId>
        <version>2.0.8</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.2</version>
    </dependency> 
```

我在我的配置中使用了 org.springframework.orm.hibernate3.LocalSessionFactoryBean。

```
 <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.LocalSessionFactoryBean"> 
```

根据 [wikipage@googlecode](http://code.google.com/p/jgk-spring-recipes/wiki/Migrating_Spring31_Hibernate4)的建议：和[CacheProvider 的 Exception NoClassDefFoundError](https://stackoverflow.com/questions/7528862/exception-noclassdeffounderror-for-cacheprovider)，我决定`org.springframework.orm.hibernate4.LocalSessionFactoryBean`使用 `org.springframework.orm.hibernate3.LocalSessionFactoryBean`.

但是，我找不到`org.springframework.orm.hibernate4`. 我已经在[http://mvnrepository.com](http://mvnrepository.com)进行了搜索。请你帮助我好吗？

是否有其他解决方案可以避免“ `java.lang.NoClassDefFoundError: Lorg/hibernate/cache/CacheProvider`”错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:16:42.627

Spring 3.0 不支持 Hibernate 4。对 Hibernate 4 的支持已添加到 Spring 3.1，因此如果您希望使用 Hibernate 4，则必须向上迁移您的 Spring 版本。是的，我知道这可能是一个重要的命题；由于版本控制问题，我目前在我的代码中坚持使用 Spring 3.0。您的替代方案是不使用 Hibernate 4 并坚持使用 3，或者自己完成所有粘合层，而不是使用 Spring 中预定义的代码。

* * *

诊断：`org.hibernate.cache.Provider`在从 Hibernate 3 到 Hibernate 4 的更改中被删除 - [JarFinder](http://www.jarfinder.com/index.php/java/info/org.hibernate.cache.CacheProvider)在我认为是真正的只是休眠文章的任何非 3 JAR 中都找不到它 - 所以 Spring 3.0*不适*用于 Hibernate 4。（嘿，这是主要版本号更改，因此允许他们*这样*做。）

预后：升级Spring，降级Hibernate，或者DIY。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T04:16:23.617

我正在使用 spring 3.1.0-release 和 hibernate-4.0.0-final 我也遇到了同样的问题，我将会话工厂更改为

```
org.springframework.orm.hibernate4.LocalSessionFactoryBean 
```

和事务管理器

```
org.springframework.orm.hibernate4.HibernateTransactionManager 
```

也是视图过滤器中的打开会话

```
org.springframework.orm.hibernate4.support.OpenSessionInViewInterceptor 
```

然后它起作用了，我的建议是寻找'.hibernate3'。在你的 spring 配置中并用 hibernate 4 相关类替换它

祝你好运！

# django - 平均来自 django 管理表单的输入并将其添加到模型字段

> ID：10769027
> 
> 赞同：0
> 
> 时间：2012-05-26T19:10:04.053
> 
> 标签：django, forms, admin

在我的 django 管理表单中，我有许多字段，用户可以在其中输入浮点数。我想对这些数字进行平均，并在提交表单时将平均值保存到相关外来对象的模型字段中。做这个的最好方式是什么？

**编辑：** 根据下面 fest 的回答，我尝试了：

```
class ForeignObject(models.Model):
  avg = models.FloatField()

class MyModel(models.Model):
  foreign_object = models.ForeignKey(ForeignObject)
  field1 = models.FloatField()
  field2 = models.FloatField()
  avg = models.FloatField(blank=True, null=True)

  def save(*args, **kwargs):
    self.foreign_object.avg = float(sum([self.field1, self.field2])) / 2 
    return super(models.Model, self.foreign_object).save(*args, **kwargs) 
```

但收到异常：`'super' object has no attribute 'save'`尝试提交管理表单时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:36:11.883

在模型的 save() 方法中设置平均值：

```
class MyModel(models.Model):
  field1 = models.FloatField()
  field2 = models.FloatField()
  avg = models.FloatField(blank=True, null=True)

  def save(self, *args, **kwargs):
    self.avg = float(sum([self.field1, self.field2])) / 2
    return super(models.Model, self).save(*args, **kwargs) 
```

您很可能还希望将`avg`字段设置为只读 - [https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.readonly_fields](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.readonly_fields)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T23:33:06.857

我认为你的代码应该是：

```
class ForeignObject(models.Model):
  avg = models.FloatField()

class MyModel(models.Model):
  foreign_object = models.ForeignKey(ForeignObject)
  field1 = models.FloatField()
  field2 = models.FloatField()
  avg = models.FloatField(blank=True, null=True)

  def save(self, *args, **kwargs):
    self.foreign_object.avg = float(sum([self.field1, self.field2])) / 2 
    self.foreign_object.save()
    super(MyModel, self).save(*args, **kwargs) 
```

这假设 self.foreign_object 已经创建。此外， save 不返回任何值，因此不需要返回。

# c# - C# - 将两个 CSV 文件或 DataGridView 合并为一个新文件。任何解决方案？

> ID：10769029
> 
> 赞同：2
> 
> 时间：2012-05-26T19:10:18.933
> 
> 标签：c#, .net, csv, datagridview, merge

我一直在从事一个需要导入两个 .CSV 文件并将其合并的项目。
我已经使用`CachedCsvReader`并`StreamReader`导入了 CSV1 和 CSV2 文件，`dataGridView1`并且`dataGridView2`它运行良好。现在我需要两个合并这两个 dataGridView 或 .csv 文件`dataGridView3`。我在整个网络上尝试了许多不同的技术来解决它，但没有任何效果。
例如，我使用`Excel.Application`了 Workbook 和 Worksheet 的东西来解决它，也使用了 dataGridView 方法，但没有任何效果。谁能帮帮我吗？！！真的会很感激！！顺便说一句，每列的标题写在标题名称下方，如 A、B、C，名称在第一 (1) 行的下方。

为了您的方便，我在下面添加了我到目前为止所做的一小部分，

```
using (CachedCsvReader csv1 = new CachedCsvReader(new StreamReader(textBox1.Text), true))
{
    dataGridView1.DataSource = csv1;
} 
```

在达米特先生的建议下，我这样做了：

```
OleDbConnection conn1 = new OleDbConnection("Provider=Microsoft.Jet.OleDb.4.0; Data Source = " + System.IO.Path.GetDirectoryName(textBox1.Text) +"; Extended Properties = \"Text;HDR=YES;FMT=Delimited\"");
         conn1.Open();
         OleDbDataAdapter adapter1 = new OleDbDataAdapter("SELECT * FROM " + System.IO.Path.GetFileName(textBox1.Text), conn1);
         DataSet ds1 = new DataSet("Temp"); 
         adapter1.Fill(ds1);
        // you can get datatable as bellow 
         DataTable tb1 = ds1.Tables[0];

         OleDbConnection conn2 = new OleDbConnection("Provider=Microsoft.Jet.OleDb.4.0; Data Source = " + System.IO.Path.GetDirectoryName(textBox2.Text) + "; Extended Properties = \"Text;HDR=YES;FMT=Delimited\"");
         conn2.Open();
         OleDbDataAdapter adapter2 = new OleDbDataAdapter("SELECT * FROM " + System.IO.Path.GetFileName(textBox2.Text), conn2);
         DataSet ds2 = new DataSet("Temp");
         adapter2.Fill(ds2);
         // you can get datatable as bellow 
         DataTable tb2 = ds2.Tables[0];

        //Merge
         tb1.Merge(tb2);

        //View dataGridView 3
         dataGridView3.DataSource = tb1;
         dataGridView3.Update(); 
```

现在有了内容，点击下面的链接下载示例的文本文件。 [单击此处下载 .txt 文件](http://www.adrive.com/public/AcvH2U/example.txt)

我希望这可以帮助你。谢谢！-萨凡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:41:44.860

如果映射很困难，您始终可以构建所需的列并遍历 CSV 文件并手动添加每个单元格，这不需要太多编码。

循环 CSV1 将数据添加到适当的单元格。
循环 CSV2 将数据添加到适当的单元格。

# javascript - Javascript中的文件管理

> ID：10769034
> 
> 赞同：-3
> 
> 时间：2012-05-26T19:11:50.147
> 
> 标签：javascript, file-management

如何用Javascript（在服务器上）写入文件？

我还需要阅读文件。这是我的代码：

```
function write()
{
var = true;
if( var = true)
{
//write file
    }
}
function read()
{
//read file
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:29:16.143

您可以通过可能带有文件名或 id 的 AJAX 请求来读取文件

```
var xhr = XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHttp');
xhr.onload = function(){
    window.console.log(this.response);
}
xhr.open('GET','/readfile.php?id=1234');
xhr.send(); 
```

您可以通过从可能的文本类型输入中获取数据来编写文件。假设输入 id 为“文本”

```
var xhr = XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHttp');
xhr.onload = function(){
    window.console.log(this.response);
}
xhr.open('POST','/write.php');
xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
xhr.send("id=someid&text=" + document.getElementById("text").value); 
```

在 php 端只需获取发布数据并将其写入文件

```
$id = $_REQUEST["id"];
$text = $_REQUEST["text"]
$file = fopen($id . ".txt","w"); // you can change w to a incase you want to append to existing content in the file
fwrite($file,$text);
fclose($file); 
```

如果您希望 Javascript 进行读取或写入，据我所知，只有 HTML5 文件 API，但我猜这仅用于读取文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T19:34:11.533

如果我正确理解了您的问题，您希望在服务器中读取/写入文件，并且您的服务器端语言是 javascript。如果您使用的是 Node，此链接：[http](http://nodejs.org/api/fs.html#fs_fs_readfile_filename_encoding_callback) ://nodejs.org/api/fs.html#fs_fs_readfile_filename_encoding_callback 提供了有关执行相同操作的相关信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T19:14:46.203

编写文件不是 Javascript 的特性。在最近的一些浏览器中，您已经可以阅读它们，但这不是一个好的选择。最好的方法是使用 PHP 读取它并使用 XMLHttpRequest 获取响应。

**JavaScript**

```
var xhr = XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHttp');
xhr.onload = function(){
    window.console.log(this.response);
}
xhr.open('GET','/fileReader.php?fileName=foo.txt');
xhr.send(); 
```

**PHP**

```
$content = file_get_contents($_GET['fileName']);
if($content)
    echo $content;
else echo "The file could not be loaded" 
```

# nhibernate - NHibernate 返回所有有孩子的父母都有条件

> ID：10769037
> 
> 赞同：1
> 
> 时间：2012-05-26T19:12:01.787
> 
> 标签：nhibernate

我有一个父子类

```
class Parent
{
 bool Enable;
List<Child> Children;
}
class Child
{
bool Enable;
} 
```

我想返回 Enable=true 的所有父级并且**该父级应包含 Enable = true 的所有子级**。

我创建了以下

```
 var parents = Session.QueryOver<Parent>().Where(p => p.Enabled)
        .JoinQueryOver<Child>(p => p.Children).Where(c=>c.Enabled)
        .List<Parent>(); 
```

它返回我正确的父母（所有启用=true），但它返回所有孩子（即使启用=false）

有人可以帮我更正我的查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:07:36.597

您应该返回 Enable=true 的孩子并加入他们的父母。然后，您可以使用 linq 按父级对它们进行分组。

像这样的东西：

```
var children = Session.QueryOver<Child>(c => c.Children)
                      .Where(c => c.Enabled && c.Parent.Enabled)
                      .Fetch(c => c.Parent) //This will include the parents in the query so you
                      .List<Child>();       //avoid a Select N+1

var childrenByParent = children.GroupBy(x => x.Parent); 
```

# php - 如何在不注销的情况下销毁 php 会话

> ID：10769038
> 
> 赞同：1
> 
> 时间：2012-05-26T19:12:14.360
> 
> 标签：php, session, login, destroy

这是我用来登录用户的代码：

```
 if($username==$db_username&&$password==$db_password)
    {
        session_start();
        echo 1;
        header("Location: index2.php");
        $_SESSION['username']=$db_username; 
```

现在，这应该为已登录的用户名分配一个会话。在我的应用程序中，我没有注销选项，所以我转到登录页面并发送另一个用户名和密码。因此，当发送这些新信息时，必须销毁旧会话并为新用户分配一个新会话。我可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:18:15.970

您可以做的不是使用 session_destroy （注销系统），而是使用该`session_unset`函数清除所有会话变量。然后用于`session_regenerate_id()`创建一个新的会话 id 并转储旧的（这是自动完成的，您可能必须与该函数一起发送一个 'true' 布尔参数），并将新数据分配给 $_SESSION['username']

检查[session_regenerate_id()的文档](http://php.net/manual/en/function.session-regenerate-id.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T19:20:58.197

写 `logout.php`和[`unset()`](http://php.net/manual/en/function.unset.php)会话。

```
session_start();
unset($_SESSION['username']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T19:24:11.257

您最好使用会话销毁方法。它会破坏存储在会话中的所有数据。

```
session_start();

//add some code of your app here

session_destroy(); 
```

# ruby - 是否有使用普通 ruby 对象并且不需要您从基类继承的 Ruby ORM？

> ID：10769039
> 
> 赞同：5
> 
> 时间：2012-05-26T19:12:18.093
> 
> 标签：ruby, orm, domain-driven-design

我有兴趣编写一个纯 ruby​​ 域模型并在以后的开发中添加持久性。

我在其他语言中使用的一些工具，如 Microsoft 的 Entity Framework，现在允许您将普通对象用于域数据模型，然后通过使用基于约定的映射将它们添加到持久性类中。例如这些普通对象：

![纯 C# 类](../Images/df9c73db323710f0817ef472d5d08d0a.png)

在此处添加到数据库上下文类中：

![将普通 C# 类添加到 db 类](../Images/62d504afc7211b3aff760a751f17b401.png)

这不仅对于在测试期间分离关注点非常有用，而且还允许更易于管理的代码、遵守 SRP 以及在需要时轻松更换持久层的能力。

我现在在红宝石领域找不到任何符合 ORM 要求的东西。ActiveRecord、DataMapper 和 Sequel 都继承自与这些框架相关的基类。是否有任何正在进行的项目、替代方法或实践来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T17:50:53.613

看看这个。它促进了域逻辑和持久性基础设施层之间的良好分离。显然，它还没有所有花哨的 ActiveRecord 工具，但它是一个不错的项目，值得一看：

[https://github.com/fredwu/datamappify](https://github.com/fredwu/datamappify)

**更新**

正如我们从这个[讨论](https://github.com/fredwu/datamappify/issues/31)中看到的那样，不幸的是该项目不再维护。:(

# primefaces - 安排 Primefaces 看起来很糟糕

> ID：10769041
> 
> 赞同：1
> 
> 时间：2012-05-26T19:12:30.353
> 
> 标签：primefaces, schedule

我正在使用一个包含三个部分的模板，顶部、左侧（滑动菜单）和内容。在我的所有页面中，这都很好，因为内容看起来就在左侧部分旁边。但是对于日程安排，只有标题在右侧部分或显示正常，但正文的日程安排在左侧部分之后。

![这就是它的样子！](../Images/63aa0be5b07266aec5ef3828f1ee148a.png)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:11:25.513

我有同样的问题，我已经找到了。您需要添加位置：相对；顶部：-220 像素；到我的 calendar.css 中的日历渲染的 Css 希望这有帮助！

# facebook - 如何使用 Facebook 的 JS-SDK 检索应用程序的用户列表？

> ID：10769042
> 
> 赞同：0
> 
> 时间：2012-05-26T19:12:36.403
> 
> 标签：facebook, facebook-graph-api

无论如何，是否有在 JavaScript FB.api() 中使用您的 facebook 应用程序的人的响应列表？

# ubuntu - visualvm 不是 OpenJDK7 的一部分？

> ID：10769043
> 
> 赞同：18
> 
> 时间：2012-05-26T19:12:42.273
> 
> 标签：ubuntu, debian, openjdk, visualvm

在 Ubuntu 和 Debian 中，工具 visualvm 都不是 OpenJDK 7 软件包的一部分。它是 Oracle JDK 7 的一部分，似乎是 GPL 许可的。虽然在 Ubuntu 中可以使用单独的软件包安装，但在 Debian 中不存在这样的软件包。

为什么它不是 OpenJDK 包的一部分？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-12-02T22:46:57.660

我们的 Ubuntu 机器没有将 VisualVM 作为 Java JDK 的一部分。快速搜索显示该软件包可作为单独安装使用：

```
$ apt-cache search visualvm
...
visualvm - All-in-One Java Troubleshooting Tool 
```

快速安装：

```
$ apt-get install visualvm 
```

安装成功后：

```
$ which jvisualvm 
/usr/bin/jvisualvm 
```

我尝试运行它，但它一直抱怨它正在使用 JRE。我编辑了`/etc/visualvm/visualvm.conf`

```
# default location of JDK/JRE, can be overridden by using --jdkhome <dir> switch
jdkhome="/usr/lib/jvm/java-6-openjdk-amd64" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-26T19:44:18.020

查看 Debian[自己](http://packages.debian.org/sid/openjdk-7-jdk)关于 OpenJDK 7 的信息，我们看到`visualvm`确实建议但不存在。如果它确实是 GPL 下的一个软件（'net 在这一点上相当令人沮丧，但我可能只是搜索错误，我不想为了研究这一点而下载全部内容）那么原因它的缺席几乎可以肯定是平淡无奇的：没有人可以做这项工作以使其作为 Debian 软件包可用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-09T11:50:01.810

通过下载 sid ( [http://packages.debian.org/sid/visualvm](http://packages.debian.org/sid/visualvm) ) 的二进制包，我能够在 Debian Wheezy 上安装 VisualVM。wheezy 中的所有依赖项都得到了满足，而 sid 存储库中没有任何其他内容，所以基本上我的系统仍然是稳定的。

# delphi - Delphi IDE 中的快捷方式触发两个动作

> ID：10769044
> 
> 赞同：2
> 
> 时间：2012-05-26T19:12:49.710
> 
> 标签：delphi, ide, keyboard-shortcuts

也许这个问题对我来说非常具体，但我会试一试。这是场景：

1.  在 Delphi XE2 中，快捷方式“ `Ctrl`++ ”切换书签（对于其他书签同样是`Shift`++ ）`7``Ctrl``Shift``[1..9]`
2.  我已经安装了 ModelMaker Tools（v. 9.1.0，但我相信我之前也遇到过这个错误），我已经将快捷方式“++++”分配给了`Shift`“同步声明/实现”。`Ctrl``Alt``Y`

每当我使用 ModelMaker 快捷方式时，我也会设置书签 (7)。为什么是这样？请注意，与“真实”快捷方式（`Ctrl`+ `Shift`+ `7`）相反，书签不会切换，只会设置。

这种行为让我很困惑。有人有解释吗？这不是什么大问题，因为我很少使用那么多书签，但这让我很好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T21:17:29.817

对于一些重构，ModelMaker Code Explorer 设置了一些书签以方便您使用。

它记录在某处~~，但我忘记了在哪里（：~~

**编辑**：它记录[在这里](http://www.modelmakertools.com/code-explorer/history/mmx315.html)。

> 所有修改 IDE 编辑缓冲区的重构操作（可选）将书签 #7 放在当前光标位置。与 Extract Method 如何在原始代码中删除书签 #8 和在提取方法中删除书签 #9 类似。书签编号可以在历史选项卡上自定义，这也允许禁用删除特定书签。

# php - PHP 中的交互式 Web 应用程序安装

> ID：10769049
> 
> 赞同：1
> 
> 时间：2012-05-26T19:13:29.897
> 
> 标签：php, user-interface, content-management-system, web

每个请求可以多次向浏览器发送数据吗？例如，我的 CMS 将安装一些模块，我想将信息发送到浏览器（下载模块、解压模块、安装模块……）并更新一些 div 或其他东西以获得更好的 UI 感觉。也许使用闪光灯？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T19:34:35.420

我在我的网络应用程序中做了类似的事情。`getstatus.php`是一个文件，它返回诸如 , 之类的东西`downloading module...`，`unpacking module...`它由运行所有这些东西的 php 脚本更新，`run.php`here。

我在不同的页面上使用以下 javascript 代码（使用 jQuery）`load.php`来显示进度：

```
<script type="text/javascript">
    var flag = false;

    $(function() {
        startProcess();
        getStatus();
    });  

    function startProcess() {
        $.get('run.php', function() {
            flag = true;
            window.location = 'example.com/finish.html'; // redirect when finished
        });
    }

    function getStatus() {
        $.ajax({
            url: 'getstatus.php',
            success: function(data) {
                // do something with the output of getstatus.php here
            }
        });
        setTimeout("getStatus()",500);
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T19:34:48.097

如果您的操作（下载、安装等）阻止了脚本的执行，您可以简单地在每个操作之间放置一条消息。否则，您可以尝试使用 Web 套接字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T19:36:54.913

使用 Ajax CORS：

[如何通过 JavaScript 通过 TCP 套接字进行通信？](https://stackoverflow.com/questions/307539/how-can-i-communicate-over-tcp-sockets-from-javascript)

[http://remysharp.com/2011/04/21/getting-cors-working/](http://remysharp.com/2011/04/21/getting-cors-working/)

这是模拟实时通信的技巧。

祝你好运

# sql - 带分组的 SQL SELECT

> ID：10769050
> 
> 赞同：2
> 
> 时间：2012-05-26T19:13:40.523
> 
> 标签：sql, sqlite

我需要从 2 个用户之间的每次对话中选择最后一条记录

我的桌子：

```
id | sender_id | recipient_id | message
1     2           3              msg_1 
2     3           2              msg_2
4     2           3              msg_4
5     2           3              msg_5
7     4           3              msg_7
8     3           4              msg_8 
```

选择后应该找到这条记录

```
id | sender_id | recipient_id | message 
5     2           3              msg_5
8     3           4              msg_8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T19:30:50.493

```
SELECT  m.*
FROM    mytable m
WHERE   id = ( SELECT   MAX(id)
           FROM     mytable
           WHERE    ( sender_id = m.sender_Id
                      OR recipient_id = m.sender_id
                    )
                    AND ( recipient_id = m.recipient_Id
                          OR sender_id = m.recipient_id
                        )
         ) 
```

# java - EclipseLinkJpaVendorAdapter 而不是 HibernateJpaVendorAdapter 问题

> ID：10769051
> 
> 赞同：26
> 
> 时间：2012-05-26T19:13:42.783
> 
> 标签：java, spring, hibernate, jpa

使用由 JSF、Spring 和 Hibernate 组成的应用程序。我的示例运行正常，然后当我将 class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" 更改为 class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter" 时，应用程序没有正常运行。有什么问题？它们中的任何一个都是 JPA 规范实施。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xmlns:p="http://www.springframework.org/schema/p"
    xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee"
       xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
            http://www.springframework.org/schema/aop 
http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
            http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/context
 http://www.springframework.org/schema/context/spring-context-3.0.xsd
            http://www.springframework.org/schema/jee
 http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
            http://www.springframework.org/schema/tx
 http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

<context:annotation-config />
<context:component-scan base-package="com.usta.spring" />
 <tx:annotation-driven />

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
p:dataSource-ref="dataSource" >
    <!-- p:jpaVendorAdapter-ref="jpaAdapter"-->
  <!--  <property name="loadTimeWeaver">
       <bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver" />
    </property>     -->

    <property name="jpaVendorAdapter" ref="jpaAdapter">

    </property>
    <property name="persistenceUnitName" value="Spring_PU"/>
</bean>

<bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource"
        p:driverClassName="com.mysql.jdbc.Driver" p:url="jdbc:mysql://localhost/spring"
        p:username="root" p:password="root" />

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

    <bean id="jpaAdapter" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
        <property name="showSql" value="true"/>
        <property name="generateDdl" value="true"/>
        <property name="database" value="MYSQL"/>
    </bean>

<!--    <bean id="jpaAdapter"
        class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"
        p:database="MYSQL" p:showSql="true" p:generateDdl="true" />    -->

<!--    <bean id="yazikontrolor" class="com.usta.spring.YaziKontolor" scope="request"/>  -->

</beans> 
```

错误：

```
May 27, 2012 7:21:49 AM org.apache.catalina.core.ApplicationContext log
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'yaziServisi': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in ServletContext resource [/WEB-INF/marmara.xml]: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Cannot apply class transformer without LoadTimeWeaver specified
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:341)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1073)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:516)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:455)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
    at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in ServletContext resource [/WEB-INF/marmara.xml]: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Cannot apply class transformer without LoadTimeWeaver specified
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1422)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:518)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:455)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findDefaultEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:529)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:495)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.resolveEntityManager(PersistenceAnnotationBeanPostProcessor.java:656)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.getResourceToInject(PersistenceAnnotationBeanPostProcessor.java:629)
    at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:147)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:338)
    ... 37 more
Caused by: java.lang.IllegalStateException: Cannot apply class transformer without LoadTimeWeaver specified 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-05-26T20:57:28.603

默认情况下，EclipseLink 期望启用运行时**编织**，否则您将收到“在未指定 LoadTimeWeaver 的情况下无法应用类转换器”形式的错误。这意味着对于使用构建时编织或根本不编织的情况，您需要明确指出此行为。为了禁用 EclipseLink 编织，您需要配置应用程序的 EntityManagerFactory Spring bean：

```
<property name="jpaPropertyMap">
  <map>
    <entry key="eclipselink.weaving" value="false"/>
  </map>
</property> 
```

或添加

```
<property name="eclipselink.weaving" value="false"/> 
```

到您的应用程序的 persistence.xml 文件。

我建议激活编织，因为它可以极大地提高性能。

要配置 EclipseLink 预期的默认运行时编织器，请添加以下内容：

```
<property name="loadTimeWeaver">
  <bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver"/>
</property> 
```

到您的应用程序的 EntityManagerFactory Spring bean。

然后将此选项添加到您的 JVM 中：

```
-javaagent:/path-to-your-javaagent/org.springframework.instrument-3.1.1.RELEASE.jar 
```

在 Spring 3.x 中，javaagent 本地化在 org.springframework.instrument jar 中。

您需要*org.springframework.instrument*库以及*aspectjrt.jar*和*aspectjweaver.jar*库。

**参考**

*   [优化 JPA 性能](http://java.dzone.com/articles/jpa-performance-optimization&default=false&zid=159&browser=17&mid=0&refresh=0)

# java - JMock - 添加期望的奇怪语法

> ID：10769053
> 
> 赞同：7
> 
> 时间：2012-05-26T19:13:56.857
> 
> 标签：java, mocking, jmock

我目前正在编写一些涉及 JMock 的测试。我无法理解代码的以下结构：

```
context.checking(new Expectations() {  //context is of type Mockery of course
            {
                allowing(csv).getFileName();
                will(returnValue(fileName));
            }
        }); 
```

慢慢分析，据我所知，

```
context.checking(new Expectations() { ... } 
```

这将生成 的匿名实例化`Expectations`。但是为什么我们在这之后还有另一个括号，然后是一些奇怪的静态方法，例如allow() 等？如果有人能从 Java 的角度向我解释这里发生了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T20:12:03.010

第二组大括号形成一个[实例初始化块](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)，编译器将其代码复制到该类的每个构造函数中。这使您可以访问实例成员。对于 JMock 的 API，它提供了一种初始化期望的简洁方法。您可以使用模板方法实现等效的事情（尽管在编译`Expectations`自身时会发出警告，说明从构造函数对可覆盖方法的不安全调用）。

```
public abstract class Expectations {
    public Expectations() {
        buildExpectations();
    }

    protected abstract void buildExpectations();

    ...
} 
```

在你的测试中

```
context.checking(new Expectations() {
    protected void buildExpectations() {
        allowing(csv).getFileName();
        will(returnValue(fileName));
    }
}); 
```

我绝对更喜欢较短的版本。:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-26T20:12:45.143

实例初始化器很有趣。他们唯一真正看到他们经常使用的地方是 JMock。考虑一个更简单更易理解的上下文。您可以创建地图并向其中添加项目：

```
Map<String,String> map = new HashMap<String,String>(){
    {
        put("One","Something");
        put("Two","Other");
    }
}; 
```

也许这将帮助您了解 JMock 在做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T19:50:47.153

有些人认为在静态初始化器中创建期望值，使用静态方法提供了看起来很酷、简洁、流畅且易于阅读的语法来指定期望值——我同意他们的观点。笨拙的语法不仅在模拟框架中很酷 - 引擎盖下还有很多很酷的字节码操作。

# mysql - 两个相关表的首选数据库设计

> ID：10769057
> 
> 赞同：0
> 
> 时间：2012-05-26T19:14:53.583
> 
> 标签：mysql, sql

我有一个职位表，例如：

```
`job_post`
  - name
  - position

`job_application`
  - profile (FK)
  - job_post (FK) 
```

换句话说，有人发布了一份工作，`job_post`然后人们可以申请该工作，`job_application`。

我想增加一个将工作授予个人的能力。例如，如果用户 1-10 申请了 Plumber 的职位，则该职位可以授予用户 6。

我应该在哪里添加授予项目的概念？我不想为这么小的东西添加一个额外的表。哪个更可取——

选项 1 - 开启`job_post`：

```
`job_post`
  - name
  - position
  - awarded_to (FK to profile, else Null if hasn't been awarded yet) 
```

选项 2 - 开启`job_application`：

```
`job_application`
  - profile (FK)
  - job_post (FK)  
  - awarded (boolean field, default = 0, if awarded = 1) 
```

此外，将此列添加到上述表格之一是否是非规范化 db 结构的示例？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:22:30.217

Job_post is going to be awarded to a Job_application, that's the concept i can read. Then, with that logic, if only one application can be awarded to only one job, the first option is feasible. If more than one applicant can be awarded with the job post, then the second option is the correct one.

# android - 在模拟器中重新启动活动时未调用 OnPause()

> ID：10769060
> 
> 赞同：3
> 
> 时间：2012-05-26T19:15:17.563
> 
> 标签：android, android-emulator, activity-lifecycle

我选择将`OnPause()`方法中的持久应用程序状态保存到我的数据库中，因为根据[活动生命周期的文档，](http://developer.android.com/guide/topics/fundamentals/activities.html#Lifecycle)`OnPause()`可以保证在应用程序被杀死之前被调用。

现在我使用 eclipse 和 avd 模拟器（api 级别 8）面临以下行为：
1\. 我通过 eclipse 启动我的应用程序 - Instance1
2\. 我再次通过 eclipse 启动我的应用程序 - Instance2

现在 Instance1 在没有调用的情况下被终止`OnPause()`！

有人可以解释一下为什么`OnPause()`不被调用吗？我认为它保证总是被调用。如果不是这种情况，可能是因为 eclipse 终止 Instance1 进程的方式，那么我想知道是否可以更改它。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T19:21:39.927

当您通过 eclipse 启动应用程序时，它将有效地从设备或模拟器上已经运行的同一应用程序的任何实例中撕下地毯。这在实践中永远不会发生，只有在从 eclipse 运行时才会发生。

所以你可以计划 onPause() 总是被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T19:25:31.533

你的意思是你通过eclipse启动应用程序 - 实例1和2？

当单击运行按钮时，模拟器（在您的情况下或真实设备中）运行您的应用程序。请不要在其他 AVD 中运行它（如果我根据您的实例 1 和 2 正确运行）。如果您在 onCreate() 和 onPause() 方法中添加了日志代码，例如 Log.i(TAG, "I'm in onCreate()!");，您应该在 logcat 中看到它。因此，当您启动应用程序时，您将看到 onCreate 消息，例如，当您单击主页按钮时，您将看到 onPause() 消息。

这是保证被调用的方式。

# gwt - 如何在 GWT 中访问 IFRAME 之外的代码？

> ID：10769063
> 
> 赞同：0
> 
> 时间：2012-05-26T19:15:42.897
> 
> 标签：gwt, iframe

我有一个 html，比如 A.html。我在 IFRAME 内的 A.html 内调用 A.html。

```
A.html
<html>
.....
  <IFRAME>
    A.html (same domain, etc as A.html)
  </IFRAME>
</html> 
```

这是一个 GWT 应用程序。此 IFRAME 是一个弹出窗口，当用户关闭（单击关闭按钮）此弹出窗口（如上所示，它也在加载 A.html）时，我想触发一个事件以在外部 A 上显示一些消息。 html 这意味着我需要访问 IFRAME 之外的代码。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:26:45.010

由于您的 iframe 内容是从同一域加载的，因此您可以在包含页面上调用 javascript 函数。我假设您正在询问从 GWT 调用 iframe 之外的代码。如果是这样，那么您可以使用 JSNI。

例如，给定 JSNI 方法：

```
private final native void postClosedEvent()
/*-{
    $wnd.functionDefinedOutside();
}-*/ 
```

您可以在 GWT ClickHandler 中调用该方法：

```
closeButton.addClickHandler(new ClickHandler()
                            {
                                public void onClick(ClickEvent e)
                                {
                                    postClosedEvent()
                                }
                            }); 
```

这假定在包含页面中使用 javascript 定义的函数，例如：

```
<script type="text/javascript">
    var functionDefinedOutside =
        function()
        {
            alert("GOT MESSAGE FROM iframe");
        };
</script> 
```

注意：如果 iframe 内容是从**不同**的域加载的，您可以使用[postMessage](https://developer.mozilla.org/en/DOM/window.postMessage)获得相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T03:50:16.533

GWT 模块中的 IFRAME 定义为：

```
<iframe src="/temp.jsp"></iframe> 
```

GWT 模块（外部类）：

```
 public class Test implements EntryPoint {

        public void onModuleLoad() {
              registerMethod();   
        }

        private static native void registerMethod() /*-{
              $wnd.mt = $entry(@test.client.Test::show(Ljava/lang/String;));
            }-*/;

        public static void show(String value){
              Window.alert("Calling from inside IFRAME " + value);
        }  
    } 
```

IFRAME 内的 JSP：temp.jsp

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <title>temp</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <style type="text/css">
    </style>
    </head>
    <body>
        <div id="content">
          Holla commo estas from the iframe!    
        </div>

        <script type="text/javascript">
        window.alert("inside iframe");
        window.parent.mt("passing a value to a parent!!!");
        </script>
    </body>
</html> 
```

# c# - 如何发布带有数据库的程序？

> ID：10769066
> 
> 赞同：0
> 
> 时间：2012-05-26T19:16:20.007
> 
> 标签：c#, database, release

我刚刚完成了一个使用相当大的数据库文件的大型程序。过去，我写完程序，只是把.exe文件上传到我的网站，然后把链接发给想用的人，但现在还有一个数据库文件要包含..

有没有办法在.exe中“包装”数据库文件？如果没有，我怎样才能发布我的程序，以便用户只需要下载一个文件？我从来没有创建过安装程序，我也不知道怎么做。我只是上传过 .exe 文件 :)。

任何帮助，将不胜感激。请原谅我的经验不足：P。

该程序使用 C# 编写，数据库文件为 .mdf 格式（我运行的是 SQL Server 2008）。我很乐意提供更多细节。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:21:44.950

您可以从 Visual Studio 进行简单的设置（创建新的设置项目）。如果您需要更多高级功能，请查看[Windows Xml 安装程序](http://wix.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T19:22:37.073

您应该让应用程序知道如何创建数据库，而不是捆绑整个数据库。一种简单的方法是在 SQL Server Management Studio 中为整个数据库创建一个脚本。然后将脚本（可能在您对其进行一些调整之后）作为资源文件包含在 exe 文件中。

比推出自己的解决方案更好的方法是使用数据访问框架，例如 EF Code First with Migrations，它内置了数据库创建和升级支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T19:22:00.030

您可以包含免费的[Sql Server Express](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx)，这样您的用户就不必购买 SQL Server 的许可证。如果您想完成构建 .msi 安装程序的工作，我相信您可以执行特定于 SQL 服务器的操作。

另一方面，如果你的数据量很少，你可以考虑使用[Dataset](http://msdn.microsoft.com/en-us/library/system.data.dataset%28v=vs.90%29.aspx)的过滤功能，而不是依赖SQL Server。

**编辑：**微软有一个新的[SqlServer 2012 LocalDB](http://go.microsoft.com/fwlink/?LinkID=237665)可能很有趣：

> 作为 SQL Server® Express 系列的新成员，LocalDB 是 Express 的轻量级版本，具有相同的可编程性功能，但在用户模式下运行，并具有快速、零配置的安装和简短的先决条件列表。如果您需要一种简单的方法来从代码创建和使用数据库，请使用此选项。它可以与 Visual Studio、其他数据库开发工具捆绑或嵌入到需要本地数据库的应用程序中。

（摘自[这里](http://www.microsoft.com/en-us/download/details.aspx?id=29065)）

# android - 继承 BaseListActivity 并使用 AsyncTask 时 ListActivity 不更新

> ID：10769071
> 
> 赞同：0
> 
> 时间：2012-05-26T19:16:46.323
> 
> 标签：android, android-asynctask, listactivity

我有一个类 SomeActivity 扩展 BaseListActivity。BaseListActivity 扩展了 ListActivity 和所有工作。

但是当列表必须更新时，我使用 AsyncTask 进行远程服务器调用，声明如下：

```
public class DownloadWebPageTask extends AsyncTask<String, Void, String> 
```

在那里，有一行可以像这样更新列表：

```
adapter.notifyDataSetChanged(); 
```

但这条线似乎没有做任何事情。

知道要让它发挥作用应该有什么不同吗？

这是 BaseListActivity

```
public class BaseListActivity extends ListActivity {

    public ListView getListView() {
        return (ListView)findViewById(android.R.id.list);
    }

    public ListAdapter getListAdapter() {
        return getListView().getAdapter();
    }   

    @Override
    public void setContentView(int layoutResID) {    
        super.setContentView(layoutResID);
        {
            setListAdapter(this.getListAdapter());

            Button home_header = (Button) findViewById(R.id.home_header);
            Button questions_header = (Button) findViewById(R.id.questions_header);

            home_header.setOnClickListener(new Button.OnClickListener() {
                public void onClick(View v) {
                    Intent myIntent = new Intent(BaseListActivity.this,
                            ProblemioActivity.class);
                    BaseListActivity.this.startActivity(myIntent);
                }
            });

            questions_header.setOnClickListener(new Button.OnClickListener() {
                public void onClick(View v) {
                    Intent myIntent = new Intent(BaseListActivity.this,
                            MyQuestionsActivity.class);
                    BaseListActivity.this.startActivity(myIntent);
                }
            });
        }
    }
} 
```

这是整个 DownloadWebPageTask 代码：

公共类 DownloadWebPageTask 扩展 AsyncTask {
@Override protected String doInBackground(String... theParams) { String myUrl = theParams[0]; 最终字符串 user_id = theParams[1];

```
 String charset = "UTF-8";           
        String response = null;

        try 
        {                           
            String query = String.format("user_id=%s", 
                     URLEncoder.encode( user_id, charset) );

            final URL url = new URL( myUrl + "?" + query );

            Log.d( "QuestionUserURL" , url+ "" );

            final HttpURLConnection conn = (HttpURLConnection) url.openConnection();

            conn.setDoOutput(true); 
            conn.setRequestMethod("POST");

            conn.setDoOutput(true);
            conn.setUseCaches(false);

            conn.connect();

            final InputStream is = conn.getInputStream();
            final byte[] buffer = new byte[8196];
            int readCount;
            final StringBuilder builder = new StringBuilder();
            while ((readCount = is.read(buffer)) > -1) 
            {
                builder.append(new String(buffer, 0, readCount));
            }

            response = builder.toString();      
        } 
        catch (Exception e) 
        {
                Log.d( "EXCEPTIONNNN: " , "Yup" + e.getMessage());
                e.printStackTrace();
        }

        Log.d( "MyQuestionsActivity" , "*** Response: " + response );
        return response;
    }

    @Override
    protected void onPostExecute(String result) 
    {
        Log.d( "MyQuestionsActivity" , "In the post-execute method: " + result );

        if ( result != null && result.trim().equals( "no_user_id" ) )
        {
            Log.d( "Post execute: " , "NOOOT  OKKKK - no user id" );    
            // Show the user a message that they did not enter the right login

            Toast.makeText(getApplicationContext(), "Could not get your questions. We are working to fix this. ", Toast.LENGTH_LONG).show();                                

        sendEmail("Error in My Questions", "The questions by user did not load because on the server the validation for user id said the user id was empty." );     
        }
        else
        if ( result != null && result.trim().equals( "database_error" ) )
        {
            Log.d( "Post execute: " , "NOOOT  OKKKK - no user database error" );    
            // Show the user a message that they did not enter the right login

            Toast.makeText(getApplicationContext(), "Could not get your questions. We are working to fix this. ", Toast.LENGTH_LONG).show();                                

        sendEmail("Error in My Questions", "The questions by user did not load because on the server there " +
                "was a database error." );                  
        }
        else
        if ( result != null && result.trim().equals( "no_questions_by_user" ) )
        {           
            // Show the user a message that they did not enter the right login

            //Toast.makeText(getApplicationContext(), "You have not asked any questions.  Ask your business questions! ", Toast.LENGTH_LONG).show();                                

        //sendEmail("No Questions so far in My Questions", "User got message that they do not have questions." );           

        TextView question_label = (TextView) findViewById(R.id.question_label);
        question_label.setText("You have not asked any business questions.  Ask your question." );
        }
        else
        {
            Log.d( "MyQuestionsActivity" , "In JSON parsing area.." );

                try
                {   
                    JSONArray obj = new JSONArray(result);

                    if ( obj != null )
                    {
                        questions.clear();

                        for ( int i = 0; i < obj.length(); i++ )
                        {
                            JSONObject o = obj.getJSONObject(i);

                            String question_id = o.getString("question_id");
                            String question = o.getString("question");
                            String questioner_id = o.getString("member_id");
                            String first_name = o.getString("first_name");
                            String last_name = o.getString("last_name");

                            Log.d( "Question: " , question );                               
                            Log.d( "Question_id: " , question_id );       

                            Question q = new Question ( );
                            q.setQuestion(question);
                            q.setQuestionId(question_id);
                            q.setQuestionByMemberId( questioner_id );

                            q.setAuthorName(first_name + " " + last_name );

                            questions.add( q );
                        }
                    }

                    adapter.notifyDataSetChanged();

                    TextView question_label = (TextView) findViewById(R.id.question_label);
                    question_label.setText("The questions you asked are below. Choose one or ask a new question.");
                }                   
                catch ( Exception e )
                {
                    Log.d( "MyQuestionsActivity: " , "some crap happened 1: " + e.getMessage() );
                    e.printStackTrace();
                }
            }

            //adapter.notifyDataSetChanged();                       
        }
    } 
```

这是我现在在日志中看到的异常：

```
05-26 19:59:55.774: W/System.err(3103): java.net.UnknownHostException: Unable to resolve host "www.problemio.com": No address associated with hostname
05-26 19:59:55.777: W/System.err(3103):     at java.net.InetAddress.lookupHostByName(InetAddress.java:426)
05-26 19:59:55.777: W/System.err(3103):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
05-26 19:59:55.777: W/System.err(3103):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
05-26 19:59:55.777: W/System.err(3103):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
05-26 19:59:55.777: W/System.err(3103):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
05-26 19:59:55.777: W/System.err(3103):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
05-26 19:59:55.777: W/System.err(3103):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
05-26 19:59:55.777: W/System.err(3103):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
05-26 19:59:55.777: W/System.err(3103):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
05-26 19:59:55.777: W/System.err(3103):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
05-26 19:59:55.777: W/System.err(3103):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
05-26 19:59:55.777: W/System.err(3103):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
05-26 19:59:55.797: W/System.err(3103):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
05-26 19:59:55.807: W/System.err(3103):     at utils.SendEmail.doInBackground(SendEmail.java:38)
05-26 19:59:55.807: W/System.err(3103):     at utils.SendEmail.doInBackground(SendEmail.java:1)
05-26 19:59:55.819: W/System.err(3103):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
05-26 19:59:55.827: W/System.err(3103):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
05-26 19:59:55.827: W/System.err(3103):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
05-26 19:59:55.837: W/System.err(3103):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
05-26 19:59:55.837: W/System.err(3103):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
05-26 19:59:55.847: W/System.err(3103):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
05-26 19:59:55.847: W/System.err(3103):     at java.lang.Thread.run(Thread.java:856)
05-26 19:59:55.956: W/System.err(3103): Caused by: libcore.io.GaiException: getaddrinfo failed: EAI_NODATA (No address associated with hostname)
05-26 19:59:56.177: D/dalvikvm(3103): GC_CONCURRENT freed 406K, 6% free 9330K/9863K, paused 32ms+6ms 
```

但例外情况并不准确。我能够解决该主机没有问题。在我添加 BaseListActivity 之前，这个相同的代码曾经可以工作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:06:43.243

重新签名`ListAdapter`将`ListView`与调用相同`adapter.notifyDataSetChanged();`，我认为`notifyDataSetChanged();`仅当您使用数据库`Cursor`对象作为数据提供者时才有效。而不是`adapter.notifyDataSetChanged();`只调用`setListAdapter();`哪个实习生将重建`ListView`.

# php - 结合数组和 MySQL 结果

> ID：10769072
> 
> 赞同：1
> 
> 时间：2012-05-26T19:16:50.787
> 
> 标签：php, mysql

我有一个使用数组存储问题的测验：

```
$array=array(
        '1'=> array('1','What does everyone know when they see it?','quest1','Good     publicity','Bad punctuation', 'Good business writing', 'Bad spelling','../images/example03.jpg'),
        '2'=> array('2','What do people write instead of \'now\'?','quest2','Presently','At this moment in time', 'Currently', 'At the present time','../images/example03.jpg'),
); 
```

然后我使用这个循环显示问题：

```
foreach($array as $quiz)
{
echo            
                '<div class="question">
                        <div class="questionList">
                            <h4>' . $quiz[0] . '. <strong>' . $quiz[1] .         '</strong></h4>
                                <ul>
                                    <li><input type="radio" name="' . $quiz[2] . '" value="1"> '. $quiz[3] . '</li>
                                    <li><input type="radio" name="' . $quiz[2] . '" value="2"> '. $quiz[4] . '</li>
                                    <li><input type="radio" name="' . $quiz[2] . '" value="3"> '. $quiz[5] . '</li>
                                    <li><input type="radio" name="' . $quiz[2] . '" value="4"> '. $quiz[6] . '</li>
                                </ul>
                        </div>
                    <img src="'. $quiz[7] . '" class="questionImg01" />
                    <div class="clr"></div>
                </div>
                ';
    }

} 
```

如果有人第一次没有回答所有问题，我将每个问题的值存储在 MySQL 中，如果没有答案，则存储“0”。我想检查用户已经回答的单选按钮，但不知道如何组合测验数组和 MySQL 结果。

结果的表结构为：

测验ID | 用户名 | 任务1 | 任务2 | 任务3 | 任务4 | 任务5 | 任务6 | 任务7 | 任务8 | 任务9 | 任务10 | 完全的

其中 quiz_id 是该测验的参考编号，而 complete 是一个标志，用于记录用户是否回答了所有问题。我正在检索这样的结果：

```
$results = mysql_query("SELECT * FROM quiz_results_baseline WHERE username = ('$username')"); 
```

有没有办法可以将这两者结合起来？

我还有一个问题，我不能让这个查询包含 WHERE 语句 - 我想将所有测验结果存储在一个表中，然后使用 quiz_id 引用每个用户的测验结果：

```
mysql_query("INSERT INTO quiz_results_baseline (quest1,quest2,quest3,quest4,quest5,quest6,quest7,quest8,quest9,quest10,username,quiz_id,complete) VALUES $queryData ON DUPLICATE KEY UPDATE quest1=VALUES(quest1),quest2=VALUES(quest2),quest3=VALUES(quest3),quest4=VALUES(quest4),quest5=VALUES(quest5),quest6=VALUES(quest6),quest7=VALUES(quest7),quest8=VALUES(quest8),quest9=VALUES(quest9),quest10=VALUES(quest10),complete=VALUES(complete)"); 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T22:23:17.740

为了让您完成一半的测验结果与测验一起呈现，请尝试以下代码。

```
$questions=array(
  '1'=> array('1','What does everyone know when they see it?','quest1','Good     publicity','Bad punctuation', 'Good business writing', 'Bad spelling','../images/example03.jpg'),
  '2'=> array('2','What do people write instead of \'now\'?','quest2','Presently','At this moment in time', 'Currently', 'At the present time','../images/example03.jpg'),
);

// do your query for the row of answers
// $answers = mysql_fetch_assoc(...);

// for testing
$answers = array(
 'quest1' => '1',
 'quest2' => '4');

for($i = 1; $i <= count($questions); $i++)
{
  $quiz = $questions[$i];
  $answer = $answers[$quiz[2]];

  echo            
    '<div class="question">
        <div class="questionList">
          <h4>' . $quiz[0] . '. <strong>' . $quiz[1] . '</strong></h4>
          <ul>
            <li><input type="radio" name="' . $quiz[2] . '" value="1" ' . (($answer == '1') ? 'checked' : '') . '> '. $quiz[3] . '</li>
            <li><input type="radio" name="' . $quiz[2] . '" value="2" ' . (($answer == '2') ? 'checked' : '') . '> '. $quiz[4] . '</li>
            <li><input type="radio" name="' . $quiz[2] . '" value="3" ' . (($answer == '3') ? 'checked' : '') . '> '. $quiz[5] . '</li>
            <li><input type="radio" name="' . $quiz[2] . '" value="4" ' . (($answer == '4') ? 'checked' : '') . '> '. $quiz[6] . '</li>
          </ul>
        </div>
      <img src="'. $quiz[7] . '" class="questionImg01" />
      <div class="clr"></div>
    </div>
    ';
} 
```

您必须进行查询才能获取`$answers`数组，但我举了一个示例，以便您了解如何使用结果。

我运行了代码，结果如下所示：

![结果](../Images/2a31b874c5a9a6fdd501543214cee1d0.png)

希望有帮助！

# android - 在android中解析XML，但不是属性

> ID：10769074
> 
> 赞同：0
> 
> 时间：2012-05-26T19:17:07.890
> 
> 标签：android, xml, parsing

我正在尝试在我的 android 应用程序中解析一个非常简单的 XML，例如：

```
<data> 
    <section id="123">bla</section> 
    <area>blabla</area> 
</data> 
```

但是在每个示例中，当我需要提取的是显示的数据 - “bla”和“blabla”时，我发现如何提取属性中的数据（id 为 123）。
如何使用 SAXParser 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:20:14.547

解析器处理程序中的`characters`方法负责处理元素的文本值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T19:21:06.040

您需要覆盖[characters](http://developer.android.com/reference/org/xml/sax/HandlerBase.html#characters%28char%5B%5D,%20int,%20int%29)方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T19:37:07.360

本[教程](http://www.jondev.net/articles/Android_XML_SAX_Parser_Example)准确地回应你想要的希望你会喜欢

查看解析器处理程序中的 characters 方法如何处理提取元素的文本值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T20:06:31.833

好吧，手工编写解析器当然很有趣且容易出错，但是我建议使用框架——即使是像内置`android.sax`包这样的简单框架。

使用`StartElementListener`（如果你想要属性的话）& `EndTextListener`（捕获元素的正文）：

```
class Section implements StartElementListener, EndTextElementListener {
    String mValue;
    String mId;
    @Override
    public void end(String body) {
        mValue = body;
    }
    @Override
    public void start(Attributes attributes) {
        mId = attributes.getValue("", "id");
    }
} 
```

这些类型的侦听器附加到`Element`从 a 派生的 s上`RootElement`，如下所示：

```
Section section = new Section();
RootElement data = new RootElement("data");
// Use "requireChild" if a "section" is required as a child of "data".
Element s = data.getChild("section");
s.setStartElementListener(section);
s.setEndTextElementListener(section);
try {
    Xml.parse(xml, data.getContentHandler());
} catch (SAXException e) {
} 
```

基本上，这可以帮助您为 SAX 构建内容处理程序，该处理程序关心层次结构并轻松跟踪您正在解析的元素。我猜也是简短而漂亮的代码。

# java - Spring MVC 静态资源定位和映射

> ID：10769075
> 
> 赞同：1
> 
> 时间：2012-05-26T19:17:24.357
> 
> 标签：java, css, spring-mvc

我在 Spring MVC 中处理 css 文件时遇到问题。css 文件的位置和映射有问题。

如果 css 文件位于：

```
-src
  -main
     +java
     +resources
     -webapp
        -css
           style.css
        +WEB-INF 
```

（Maven项目）

我用：

```
 <mvc:resources location="/css/" mapping="/css/**"/>
 <mvc:annotation-driven/> 
```

in `dispatcher-servlet.xml`，并在 with 中访问它`jsp`：

```
<head>
  <title>Insert title here</title>
  <link href="/css/style.css" rel="stylesheet" type="text/css">
</head> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T20:10:16.800

使用 JSTL c 标签解决上下文路径问题：

```
 <%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
 ...
 <link rel="stylesheet" type="text/css" href="<c:url value='/css/style.css'/>"/> 
```

这会给你：

```
 <link rel="stylesheet" type="text/css" href="/{context-path}/css/style.css"/> 
```

建议使用此标记，并且您应该用它包装所有 url，因为 JSLT 处理器将为您生成正确的上下文路径，即使您决定稍后更改上下文路径，而不必遍历所有 jsp 文件中的每个链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T20:10:53.700

要解决此问题，以便您的代码将使用您在生产中使用的实际路径运行，请`<base>`在您的 JSP 页面中使用标记，如下所示：

```
<base href="http://localhost:8081/table/" target="_blank" /> 
```

这将确保您的 JSP 页面中的所有其余相对路径都可以使用完整路径表示：

```
<link href="/css/style.css" rel="stylesheet" type="text/css"> 
```

为了进一步阅读，这里是 Mozilla 开发人员中心关于[HTML 基本元素](https://developer.mozilla.org/en/HTML/Element/base)使用的参考。此外，这篇[博文](http://blog.opensourceopportunities.com/2010/12/facts-web-design-and-web-development.html)也可能有助于让您了解如何使用客户端代码，尤其是当您与不是 Java 开发人员的 Web 设计人员一起工作时。

* * *

**注意：**顺便说一句，如果您将 @gigadot[提出的解决方案结合使用 c:url 标记](https://stackoverflow.com/a/10769400/552792)和基本标记，那么它将为您省去需要编辑站点上的每个链接和混乱 HTML 的麻烦，同时仍然使基本标记是动态的，因此如果您更改上下文路径，它仍然会在任何地方反映出来，但不会以一种不会将您与框架紧密绑定的方式。

我正在[链接到该答案](https://stackoverflow.com/a/10769400/552792)，以便使用`<c:url`标签的功劳归@gigadot，但在此处记录它，以便其他人可以从结合使用两者的知识中受益。

```
<base href="<c:url value='/table' />" target="blank" /> 
```

# php - jQuery 在 5 或 6 次刷新后工作

> ID：10769077
> 
> 赞同：1
> 
> 时间：2012-05-26T19:17:28.603
> 
> 标签：php, jquery, html

我想制作一个编辑页面，当用户访问一个问题（我有一个问题网站）时，他将可以选择编辑该问题，当用户单击编辑问题时，我想获取有关该问题的所有信息来自数据库的问题并将其放入编辑页面，我这样做了，它适用于所有信息，但我有一个问题，它是：

在我的编辑页面上，我有许多下拉列表，每个下拉列表都使用 ajax 和 jquery 从数据库中获取其选项

我的问题在最后 4 个下拉列表中

第一个下拉列表是 `what the question about` ，它有 3 个选项`place , cell ,general` 第二个下拉列表是什么`the city that question about`，它有 14 个值第三个下拉列表是什么`cell the question about`，它的选项取决于第二个下拉列表选项，我的意思是如果用户设置第二个下拉列表中的一个城市，单元格下拉列表将有很多选项，但是如果他更改了城市，用户将在单元格下拉列表中有新的选项，第四个下拉列表是`what the place that the question about` 当我打开编辑时页面我必须用它的值填充那些下拉列表，每个下拉列表都根据前一个下拉列表，我这样做了，但我的问题是页面在 4 或 5 次刷新后运行良好，而不是从一开始，我的意思是我必须刷新页面 4 或 5 次才能获得好的结果，`because on the first refresh the drop down list still empty , but i alert the results each refresh and i got the expected results`

**一些 HTML**

```
<?php
  $questionInfo = $this->questionInfo->fetch();
  $questionPlaceCountry = $this->questionPlaceCountry->fetch();
  $questionCell = $this->questionCell;
?>

<script type="text/javascript">
  var typeName= '<?php echo $questionInfo["typeName"]; ?>';
  var place = '<?php echo $questionPlaceCountry["placeName"]; ?>';
  var country = '<?php echo $questionPlaceCountry["countryName"]; ?>';
  var cell = '<?php echo $questionCell; ?>';
</script>

<li>
  <label>About</label>
  <select name="about"id="aqAboutQuestion"></select>
  <span class="errorMessage"></span>
  <p id="aqCoutryAboutQuestion">
    <label>Select City</label>
    <select name="city"class="CountrySelector1"></select>
  </p>
  <p id="aqCellAboutQuestion">
    <label>Select Cell</label>
    <select name="cell"></select>
    <span class="errorMessage"></span>
  </p>
  <p id="aqPlaceAboutQuestion">
    <label>Select Place</label>
    <select name="place"></select>
    <span class="errorMessage"></span>
  </p>
</li> 
```

**一些jQuery代码**

```
$.getJSON(
  "http://localhost/Mar7ba/Type/getAllTypes/TRUE",
  function(data){

    var options = '';
    options+="<option>Select Type</option>";

    for(var i=0;i<data.length;i++){
      options += "<option value='"+data[i]+"'>"+data[i]+"</option>";
    }

    if($("#addPlace #apTypeSelect").length){
      $("#addPlace #apTypeSelect").html(options);
    }

    if($('.TypeSelector').length){

      $('.TypeSelector').html(options);
      if("#editOneQuestion"){

        $('.TypeSelector').val(typeName);
        if(place!=null){

          $("#aqCoutryAboutQuestion").css("display","block");
          $("#aqCellAboutQuestion").css("display","block");
          $("#aqPlaceAboutQuestion").css("display","block");
          $("#aqAboutQuestion").val("Place");

          $("#aqCoutryAboutQuestion select").val(country);

          $.getJSON(
            "http://localhost/Mar7ba/Cell/getCellsInCity/"+country+"/TRUE",
            function(data1) {

              var optoins1 = '';
                  optoins1+="<option>Select Cell</option>";

              for(var i=0;i<data1.length;i++){
                optoins1+="<option value='"+data1[i]+"'>"+data1[i]+"</option>";
              }

              $("#aqCellAboutQuestion select").html(optoins1);
              $("#aqCellAboutQuestion select").val(cell);
          });

          $.getJSON(
            "http://localhost/Mar7ba/Place/givePlacesInCell/"+cell+"/TRUE",
            function(data2){

              var options2 ='';
              options2+="<option>Select Place</option>";
              for(var i = 0 ; i < data.length;i++){
                options2+="<option value='"+data2[i]+"'>"+data2[i]+"</option>";
              }
              $("#aqPlaceAboutQuestion select").html(options2);
              $("#aqPlaceAboutQuestion select").val(place);
          });
        }
      }
    }
}); 
```

你能帮助我并告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T20:31:47.010

问题是因为您可能正在使用

```
$(document).ready() 
```

但你必须使用：

```
$(windows).load() 
```

# javascript - 无限循环导致“超出最大调用堆栈大小”错误

> ID：10769081
> 
> 赞同：0
> 
> 时间：2012-05-26T19:18:38.200
> 
> 标签：javascript, jquery, plugins

我试图获得一个无限循环，但过了一会儿我得到一个“超出最大调用堆栈大小”的错误。现在我知道这是由一个无限循环引起的，它本身是递归的，但我不知道为什么我的代码不正确，因为我想要那个无限循环。

这是我用来调用“幻灯片”函数的代码：

```
// The plugin usage => "Rock and Roll"
function activate() {
    // Check or we need to wait, when a user hovers the main element
    if (hoverState === false) {
        // And "Rock and Roll"
        if (opt.nav === false) {
            slide(opt.effect);
        } else {
            // The navigation is used
            $(opt.navArea + ' a').click(function () {
                if ($(this).attr('id') === opt.next) {
                    // Slide to the next slide
                    slide(opt.effect, 'right');
                } else if ($(this).attr('id') === opt.prev) {
                    slide(opt.effect, 'left');
                }
            }, function () {
                slide(opt.effect);
            });
        }
    }
}
// Activate the plugin after the pause has ended
setTimeout(activate, opt.pause + opt.speed); 
```

我的代码中有一些额外的选项，但是，我想要做的是（例如）3000 毫秒后调用函数激活以转到下一张幻灯片。但就像我之前说的，它会导致“超出最大调用堆栈大小”错误。opt.nav 的当前状态为 false。

滑动功能

```
 // Slide the content
    function slide( effect, dir ) {
        // The direction
        dir = typeof dir !== 'undefined' ? dir : 'right';

        // Define the current slide
        var currSlide = $('li.active');

        // Define the next slide
        var nextSlide;
        if( dir === 'right' ) {
            nextSlide = currSlide.index() + 1;

            // Check or the next slide is avaiable
            if( nextSlide > ( elListSize - 1) ) {
                nextSlide = 0;
            } 
        } else if( dir === 'left' ) {
            nextSlide = currSlide.index() - 1;

            // Check or next slide is avaiable
            if( nextSlide === 0) {
                nextSlide = elListSize - 1;
            }
        }

        // The fade function
        if( effect === 'fade' )  {
            // Fade the current slide out
            currSlide.fadeOut(opt.speed, function() {
                // Remove the active class from the current slide
                currSlide.removeClass('active');

                // Fade the next slide in an give it the class active
                elListItem.eq(nextSlide).fadeIn(opt.speed, function() {
                    elListItem.eq(nextSlide).addClass('active');
                });
            });                 
        }
    } // End of the slide function 
```

# reflector - 使用 Reflexil 的装配更改无效

> ID：10769092
> 
> 赞同：1
> 
> 时间：2012-05-26T19:20:24.673
> 
> 标签：reflector, reflexil

我正在尝试使用 Reflexil 更改 Net 4.0 应用程序的 DLL。该目录如下所示：

```
Main.exe
SomeOther.exe
Lib1.dll
Lib2.dll
Lib3.dll 
... 
```

现在我正在尝试使用 Reflector 7.5.3.8 Trail 和 Reflexil 1.5 更改任何这些文件中的一些 IL 代码。例如，我从 Main.exe 中的 Main() 方法中删除了所有代码（这个 main 方法，我很确定），只留下一个 ret。保存更改后，我仍然看不到任何效果，程序照常启动。

我想问题是，在某处仍然有该文件的缓存版本。我该如何解决这个问题？

我需要做什么来更改 DLL 的 IL 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T05:59:28.890

经过几个小时的工作，我终于找到了问题所在。

在安装时，该程序生成了 NativeImages - 到目前为止没有什么不寻常的。问题是，

```
ngen uninstall Lib1.dll 
```

或者

```
ngen uninstall Main.exe 
```

没有卸载本机映像。为什么？我不知道......我试过了

```
ngen display Lib1.dll 
```

它说，没有这样的集会。巧合的是，我试图列出整个 Native Image Cache 并找到：

```
ngen display | find "Lib1" 
```

这告诉我，它仍然在那里（为什么？！）。这次我尝试卸载它不是通过卸载 Lib1.dll，而是通过执行

```
ngen uninstall Lib1  (without dll) 
```

这就像一个魅力，告诉我这个问题。它没有卸载它，因为 Native Image Cache 中的其他程序集仍然依赖它。我必须先卸载所有依赖程序集，然后自动删除它。

我希望这会有所帮助。我认为通常区分文件和程序集真的很混乱......

# apache - mod_alias 和 mod_rewrite 不能一起工作

> ID：10769098
> 
> 赞同：0
> 
> 时间：2012-05-26T19:21:30.737
> 
> 标签：apache, mod-rewrite, mod-alias

我知道这里有很多类似的问题，但不幸的是，它们都没有解决我遇到的问题。我试图弄清楚为什么当您也有别名时重写规则不起作用，下面是对导致问题的情况的解释。

我有许多 Zend Framework 应用程序，我想将它们包含在同一个子域中，因为我可以使用的子域有限，而且我想为我作为演示/教程所做的所有项目创建一个站点，因此将它们全部包含在内是有意义的在一个地方。与许多 Web 应用程序/MVC 解决方案一样，Zend 框架旨在让每个应用程序都位于其自己的域或子域中。因此，我正在寻找一种解决方案，使文件夹成为站点/Web 应用程序，就像它是子域一样。这就是我目前所拥有的。

我在以下位置为演示设置了子域：C:/Apache2/htdocs/demos，其中有一个公用文件夹作为文档根目录（zend 框架使用公用文件夹作为文档根目录，上面有其他文件夹，例如制作应用程序的应用程序工作；这是出于安全原因，以防止用户访问他们不应该访问的文件）。我还有 C:/Apache2/htdocs/zf-basic-project 用于我想要作为 demos.example.com 子域中的文件夹的应用程序（同样它有一个公共文件夹作为文档根目录）。

demos 子域的虚拟主机如下所示：

```
<VirtualHost *:80>
    ServerName demos.example.com
    DocumentRoot "C:/Apache2/htdocs/demos/public"
    ErrorLog "logs/demos-error.log"
    CustomLog "logs/demos.log" common 
    <Directory "C:/Apache2/htdocs/demos/public">
        DirectoryIndex index.php
        AllowOverride All 
    </Directory>

    Alias /zf-basic-project "C:/Apache2/htdocs/zf-basic-project/public/"
    <Directory "C:/Apache2/htdocs/zf-basic-project/public">     
        DirectoryIndex index.php
        AllowOverride None
        Require all granted

        RewriteEngine On
        RewriteBase /zf-basic-project
        RewriteCond %{REQUEST_URI} !^/zf-basic-project [NC]
        RewriteRule ^(/?)(.*) /zf-basic-project/$2 [PT]

        RewriteCond %{REQUEST_FILENAME} -s [OR]
        RewriteCond %{REQUEST_FILENAME} -l [OR]
        RewriteCond %{REQUEST_FILENAME} -d
        RewriteRule ^.*$ - [NC,L]
        RewriteRule ^.*$ /zf-basic-project/index.php [NC,L]
    </Directory>
</VirtualHost> 
```

这一半做我想做的；别名使 zf-basic-project 出现在 demos.example.com/zf-basic-project 中，因为它引用 zf-basic-project 项目文件夹的公共文件夹，然后代码使用上面文件夹级别中的文件来查找它需要使用的所有文件。就像它真的在 C:/Apache2/htdocs/zf-basic-project/public 中一样。然后目录部分设置使用文件的权限，我选择将重写规则放在目录中并且不允许 .htaccess 文件，这样我就不必调整项目 .htaccess 文件来添加重写规则（我想保持原项目不变）。

我遇到的问题是因为 zf-basic-project 被写在它自己的子域中，它通过绝对路径引用 CSS 之类的东西，例如 /css/default.css ，现在它是 demos 子域中的一个文件夹浏览器知道这实际上是在 /zf-basic-project/css/default.css ，因此我试图在目录中进行重写，说 /zf-basic-project/css 实际上是 /css 这是代码：

```
RewriteCond %{REQUEST_URI} !^/zf-basic-project [NC]
RewriteRule ^(/?)(.*) /zf-basic-project/$2 [PT] 
```

这表示如果链接不以 /zf-basic-project 开头，则将其添加到 URL。它适用于普通项目，但似乎与别名冲突并且不起作用。我还添加了一个 RewriteBase 以作为很好的衡量标准，它似乎也没有做任何事情。当应用程序在文件夹中运行时，其余的重写工作正常，但由于链接错误，它缺少 CSS、JavaScript 等，所以有没有人知道让重写规则工作的修复程序，即 /css 被视为 /zf-基本项目/css。

我当然可以重做所有指向 CSS 等的链接，但我不想这样做，因为我想保持项目与最初一样，因为它是一个演示，通常你不会在子文件夹中让事情更清晰，尽可能保持不变会更好。

提前感谢您的帮助，我非常感激，我必须花费至少 10 个小时来修复它，但似乎无法找到解决方案。

附言。对于那些好奇的人，我想与其他人一起包含在演示子域中的 Zend Framework 项目位于 GitHub 上，地址为[https://github.com/paulalbinson/zf-basic-project](https://github.com/paulalbinson/zf-basic-project)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:56:06.340

据我所知，你的重写条件永远不会是真的。

首先，当 URL 位于以下位置时，您要求重写`/zf-basic-project`：

```
RewriteBase /zf-basic-project 
```

然后你要求匹配任何不以开头的东西`/zf-basic-project`（这刚刚违反了上述规定，因此不会匹配）：

```
RewriteCond %{REQUEST_URI} !^/zf-basic-project [NC] 
```

这意思...

```
RewriteRule ^(/?)(.*) /zf-basic-project/$2 [PT] 
```

...不可能发生，因为如果 URL 不以 开头`/zf-basic-project`，则假定它是“上层”项目的一部分，即`C:/Apache2/htdocs/demos/public`.

我可能是错的（如果是这样的话，毫无疑问有人会纠正我），但这就是我的看法。

# python - Python list-of-list 习惯用法

> ID：10769101
> 
> 赞同：0
> 
> 时间：2012-05-26T19:21:49.743
> 
> 标签：python

data2['C'] 是一个如下所示的列表：

```
[['20120524', '26.31'], ['20120523', '26.08'], ['20120522', '26.52'], ['20120521', '25.75']] 
```

我想编写可以遍历 d['C'][i][0] 并找到与特定值（存储为 YYYYMMDD 的日期）对应的列表索引的代码。我仍然觉得 Python 的 for 循环习语令人困惑，并想澄清为什么第一个代码块无效但第二个代码块有效。另外，如果有一个内置的 Python 函数可以执行我描述的搜索过程，请分享。

不起作用：

```
>>> print data2['C'][i][0] for i in range(len(data2['C']))
 File "<stdin>", line 1
   print data2['C'][i][0] for i in range(len(data2['C']))
                           ^
SyntaxError: invalid syntax 
```

作品：

```
>>> for i in range(len(data2['C'])):
...     print data2['C'][i][0]
... 
20120524
20120523
20120522
20120521 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:28:03.063

`for`可以以两种方式使用：在显式`for`循环中（如您的第二个代码块）或在列表/字典/生成器理解[（文档）](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)中：

```
print [data2['C'][i][0] for i in range(len(data2['C']))] 
```

注意括号。`[]`表示列表，`{}`- 一个字典和`()`内部`for`- 一个生成器表达式。

要使输出与第二个相同，请执行

```
print '\n'.join([str(data2['C'][i][0]) for i in range(len(data2['C']))]) 
```

甚至

```
print '\n'.join(str(data2['C'][i][0]) for i in range(len(data2['C']))) 
```

这将是一个[生成器表达式](http://docs.python.org/reference/expressions.html#generator-expressions)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T19:25:03.907

问题是第一个代码是一个糟糕的[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)，但第二个代码是一个糟糕的迭代器。python 中的[for](http://docs.python.org/tutorial/controlflow.html#for-statements)是一个迭代器，所以，你可以这样做：

```
for i in data2['C']:
    print i[0] 
```

或者

```
dates = [i[0] for i in data2['C']]
print dates 
```

# android - 无法在 Android Receive Sms App 中实例化活动 ComponentInfo

> ID：10769107
> 
> 赞同：1
> 
> 时间：2012-05-26T19:22:15.137
> 
> 标签：android

启动 SMS 接收器应用程序时面临无法实例化活动 ComponentInfo 问题。谁能告诉我我做错了什么？？？

```
<?xml version="1.0" encoding="utf-8"?><manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.raja.receivesms"
  android:versionCode="1"
  android:versionName="1.0.0">
<application android:icon="@drawable/ic_launcher" android:label="@string/app_name">
    <activity android:name=".ReceivesmsActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver android:name=".ReceivesmsActivity"> 
        <intent-filter> 
            <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
        </intent-filter> 
    </receiver>
</application>
<uses-permission android:name="android.permission.RECEIVE_SMS">
</uses-permission>
<uses-sdk android:minSdkVersion="8" /></manifest> 
```

和类文件如下ReceivesmsActivity.java

```
 package com.raja.receivesms;
import android.content.*;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.util.Log;
import android.widget.Toast;
import android.content.Intent;

public class ReceivesmsActivity extends BroadcastReceiver {

 private static final String TAG = "Message recieved";

 @Override
 public void onReceive(Context context, Intent intent) {    
     Bundle bundle = intent.getExtras();        
     SmsMessage[] msgs = null;
     String str = "";            
     if (bundle != null)
     {
         Object[] pdus = (Object[]) bundle.get("pdus");
         msgs = new SmsMessage[pdus.length];            
         for (int i=0; i<msgs.length; i++){
             msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
             str += "SMS from " + msgs[i].getOriginatingAddress();                     
             str += " :";
             str += msgs[i].getMessageBody().toString();
             str += "\n";        
         }
         Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
     }                         
 }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:37:40.873

您的 BroadcastReceiver 即 ReceivesmsActivity 和 Activity 即 ReceivesmsActivity 具有相同的名称可能会导致问题，因此只需更改为不同的名称，将您的短信接收器注册为：

```
<receiver android:name=".ReceivesmsBroadcast"> 
        <intent-filter> 
            <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
        </intent-filter> 
    </receiver> 
```

并在代码中创建一个类 ReceivesmsBroadcast.java：

```
public class ReceivesmsBroadcast extends BroadcastReceiver {

 private static final String TAG = "Message recieved";

 @Override
 public void onReceive(Context context, Intent intent) {    
///     your code go here      

 }
 } 
```

# mysql - Mysql将5列合并为一并替换行

> ID：10769109
> 
> 赞同：0
> 
> 时间：2012-05-26T19:22:17.670
> 
> 标签：mysql, str-replace

所以我有疑问：

```
SELECT worker_ID as widp, DAYS, MAX(ID_WERSJI) max , funcion1 as FUN1,function2 as FUN2,function3 as FUN3,function4 as FUN4,function5 as FUN5
                FROM `grafik201105`
                    WHERE 
                        funcion1 IN ('one','two','three','four','five','six') OR
                        function2 IN ('one','two','three','four','five','six') OR
                        function3 IN ('one','two','three','four','five','six') OR
                        function4 IN ('one','two','three','four','five','six') OR
                        function5 IN ('one','two','three','four','five','six') AND
                        active=1 
                        GROUP BY widp, FUN1,DAYS) as dni 
```

现在我需要在一列（'give_me_all'）中获得 fun1、fun2、fun3、fun4 和 fun5 并且！在 fun1='one' 中，将 'one' 替换为 'first'，如果是 'two' 然后是第二，三个 => 第三...

我尝试使用 if(fun1='one','first',fun1) 但我认为这里更好的解决方案是使用 CASE 但我不知道如何使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:43:35.120

将两列或多列合并为一列，您只需简单地做`(function1+function2+function3+function4+function5) AS give_me_all`，但正如我所说，最好的方法是为您创建一个替换`one`为的函数，`first`然后它会像 一样`(change(function1)+change(function2)+change(function3)+change(function4)+change(function5)) AS give_me_all`，但编写函数是更高级的事情。尝试[在这里](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)阅读更多内容。否则它会看起来很难看，但仍然可能

```
`((CASE 
     function1 
        WHEN 'one' THEN 'first';
        WHEN 'two' THEN 'second';
  END;)+
  (CASE 
     function2 
        WHEN 'one' THEN 'first';
        WHEN 'two' THEN 'second';
  END;)
  ...) AS give_me_all` 
```

看看它看起来有多糟糕？更好地学习编写自己的函数:)

# javascript - Knockout 无法识别手动点击

> ID：10769114
> 
> 赞同：3
> 
> 时间：2012-05-26T19:23:27.340
> 
> 标签：javascript, knockout.js

这是示例[http://jsfiddle.net/HhXGH/57/](http://jsfiddle.net/HhXGH/57/)

我正在单击 jquery 的单选按钮，但 knockout.js 无法识别它。它仍然显示第一次单击的值。

```
<p>Send me spam: <input type="checkbox" data-bind="checked: wantsSpam" /></p>
<div data-bind="visible: wantsSpam">
    Preferred flavor of spam:
    <div><input type="radio" name="flavorGroup" value="cherry" data-bind="checked: spamFlavor" /> Cherry</div>
    <div><input type="radio" name="flavorGroup" value="almond" data-bind="checked: spamFlavor" /> Almond</div>
    <div><input type="radio" name="flavorGroup" value="msg" data-bind="checked: spamFlavor" /> Monosodium Glutamate</div>
</div>

var viewModel = {
        wantsSpam: ko.observable(true),
        spamFlavor: ko.observable('cherry')
    };

ko.applyBindings(viewModel);

$(':radio:last').click();

alert(viewModel.spamFlavor()) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T20:34:50.407

这是因为 Knockout 仅订阅选中的单选/复选框元素的点击事件。如果您签出绑定处理程序代码以进行检查。它这样做。

```
var updateHandler = function() {
            var valueToWrite;
            if (element.type == "checkbox") {
                valueToWrite = element.checked;
            } else if ((element.type == "radio") && (element.checked)) {
                valueToWrite = element.value;
            } else {
                return; // "checked" binding only 
                responds to checkboxes and selected radio buttons
            } 
```

因此，为了让您的代码正常工作，请执行此操作。

```
$(':radio:last').prop('checked', true).click(); 
```

但是，如果目标是检查最后一个值，为什么不直接做

```
viewModel.spamFlavor("msg"); 
```

这将达到相同的结果。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T20:21:46.390

除了`$(':radio:last').attr('checked', true);`触发点击之外，它还对我有用：

[http://jsfiddle.net/jearles/HhXGH/61/](http://jsfiddle.net/jearles/HhXGH/61/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T20:12:19.200

我有**两个不同的 jsFiddles**，因为我不确定你到底想要什么。

当**手动单击**最后一个单选按钮时，**第一个** [jsFiddle](http://jsfiddle.net/HhXGH/59/)将通过**警报**响应。

 **第二**个** [jsFiddle](http://jsfiddle.net/HhXGH/64/)是您发布的**/57/** jsFiddle 没有警报。

使用带有**函数的****alert 或 console.log**实际上会调用该函数。也就是说，在您**手动将 设置**为最后一个单选按钮后，它会无意中重置回，因为这是默认值。****`.click()``cherry`****

 ******重新编辑：**第二**个**jsFiddle 现在包括用不调用函数的语法编写的**警报****& 现在使用 shorted markup**。******

# asp.net - 自定义 IIdentity 或 IPrincipal 或其他

> ID：10769117
> 
> 赞同：0
> 
> 时间：2012-05-26T19:24:23.717
> 
> 标签：asp.net, asp.net-mvc

我发现在我正在使用的当前应用程序中，我在几乎每个控制器中检索几个实体（与经过身份验证的用户帐户相关）。这些实体缓存在 orm 层，但是，这些实体似乎是在身份验证时加载一次并向应用程序自定义 IPrincipal 对象添加一些属性的好候选。

我正在考虑的另一个选项是创建一个自定义上下文对象（与用户相关的帐户对象）并将其与当前请求一起传递。

两种方法的优点/缺点？有没有另一种方法来处理像这样的常用对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:10:21.857

听起来您错过了在每次请求时重新创建 IPrincipal/IIdentity 实例的事实。如果您不以显式方式持久化它，它就不会在任何地方持久化。

我认为保存数据的自定义主体类与缓存的环境属性之间没有性能差异。

另一方面，自定义身份验证类的缺点是您必须提供自定义身份验证模块，以便`AuthenticateRequest`在处理管道中的事件期间重新创建这些实例。换句话说，您必须将 FormsAuthenticationModule 替换为您自己的。这并不难，但如果不是绝对必要，我不会这样做。

另请注意，某些数据可以保存在表单 cookie 的 UserData 部分中。这意味着只要 cookie 有效，您就可以拥有它并且只创建一次。

# c# - 如何使用 C#.NET 代码在 time.windows.com NTP 服务器上查询日期？

> ID：10769118
> 
> 赞同：0
> 
> 时间：2012-05-26T19:24:40.993
> 
> 标签：c#, datetime

> **可能重复：**
> [如何从 C# 查询 NTP 服务器](https://stackoverflow.com/questions/1193955/how-to-query-an-ntp-server-from-c-sharp)

我正在尝试从`time.windows.com`NTP 服务器获取日期时间，我正在使用以下代码：

```
using System;
using System.IO;
using System.Net.Sockets;

namespace ntpdate2
{
    class MainClass
    {
        public static void Main (string[] args)
        {
            var client = new TcpClient("time.windows.com", 123);
            client.SendTimeout = 60;
            using (var streamReader = new StreamReader(client.GetStream()))
            {
                var response = streamReader.ReadToEnd();
                Console.WriteLine(response);
                streamReader.Close();
            }

        }
    }
} 
```

但它给出了一个：

```
Unhandled Exception: System.Net.Sockets.SocketException: Connection timed out
  at System.Net.Sockets.Socket.Connect (System.Net.EndPoint remote_end) [0x00000] 
  at System.Net.Sockets.TcpClient.Connect (System.Net.IPEndPoint remote_end_point) [0x00000] 
  at System.Net.Sockets.TcpClient.Connect (System.Net.IPAddress[] ipAddresses, Int32 port) [0x00000] 
The application was terminated by a signal: SIGHUP 
```

如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T21:37:58.350

[这是在 LINQPad 中运行的代码，对https://mschwarztoolkit.svn.codeplex.com/svn/NTP/NtpClient.cs](https://mschwarztoolkit.svn.codeplex.com/svn/NTP/NtpClient.cs)的原始版本稍作修改

```
void Main()
{
    var x = NtpClient.GetNetworkTime();
   x.Dump();
}

/// <summary>
/// Static class to receive the time from a NTP server.
/// </summary>
public class NtpClient
{
    /// <summary>
    /// Gets the current DateTime from time-a.nist.gov.
    /// </summary>
    /// <returns>A DateTime containing the current time.</returns>
    public static DateTime GetNetworkTime()
    {
        return GetNetworkTime("time.windows.com"); // time-a.nist.gov
    }

    /// <summary>
    /// Gets the current DateTime from <paramref name="ntpServer"/>.
    /// </summary>
    /// <param name="ntpServer">The hostname of the NTP server.</param>
    /// <returns>A DateTime containing the current time.</returns>
    public static DateTime GetNetworkTime(string ntpServer)
    {
        IPAddress[] address = Dns.GetHostEntry(ntpServer).AddressList;

        if(address == null || address.Length == 0)
            throw new ArgumentException("Could not resolve ip address from '" + ntpServer + "'.", "ntpServer");

        IPEndPoint ep = new IPEndPoint(address[0], 123);

        return GetNetworkTime(ep);
    }

    /// <summary>
    /// Gets the current DateTime form <paramref name="ep"/> IPEndPoint.
    /// </summary>
    /// <param name="ep">The IPEndPoint to connect to.</param>
    /// <returns>A DateTime containing the current time.</returns>
    public static DateTime GetNetworkTime(IPEndPoint ep)
    {
        Socket s = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);

        s.Connect(ep);

        byte[] ntpData = new byte[48]; // RFC 2030 
        ntpData[0] = 0x1B;
        for (int i = 1; i < 48; i++)
            ntpData[i] = 0;

        s.Send(ntpData);
        s.Receive(ntpData);

        byte offsetTransmitTime = 40;
        ulong intpart = 0;
        ulong fractpart = 0;

        for (int i = 0; i <= 3; i++)
            intpart = 256 * intpart + ntpData[offsetTransmitTime + i];

        for (int i = 4; i <= 7; i++)
            fractpart = 256 * fractpart + ntpData[offsetTransmitTime + i];

        ulong milliseconds = (intpart * 1000 + (fractpart * 1000) / 0x100000000L);
        s.Close();

        TimeSpan timeSpan = TimeSpan.FromTicks((long)milliseconds * TimeSpan.TicksPerMillisecond);

        DateTime dateTime = new DateTime(1900, 1, 1);
        dateTime += timeSpan;

        TimeSpan offsetAmount = TimeZone.CurrentTimeZone.GetUtcOffset(dateTime);
        DateTime networkDateTime = (dateTime + offsetAmount);

        return networkDateTime;
    }
} 
```

# jquery - 如何为我的左右值使用 HTML 5 数据属性或变量？

> ID：10769122
> 
> 赞同：0
> 
> 时间：2012-05-26T19:25:25.293
> 
> 标签：jquery, animation

我有两个几乎相同的动画......它们之间的区别是“左右”定位。我想为 .forward 和 .backward 重用第一个代码块......我猜这可以通过使用 HTML 5 数据属性或变量来完成，但我不知道如何去吧。

请告知这个菜鸟...谢谢！

```
 .hover-area { position:relative; width:100%; height:50px; }
      .backward, .forward { position:absolute; }
      .backward{ left:0px; }
      .forward { right:0px; }​

      <div class="hover-area">
          Hover Area
          <div class="backward">Previous</div>
          <div class="forward">Next</div>
      </div> 
```

```
 $('.forward').css({opacity:0, right:0});
        $('.hover-area').hover(function() {
            $(this).find('.forward').stop()
                .animate({right:20}, {queue:false, duration:300, easing:'easeOutCubic'})
                .animate({opacity:'0.95'}, {queue:false, duration:400, easing:'easeOutCubic'});
        },function() {
            $(this).find('.forward').stop()
                .animate({right:0}, {queue:false, duration:550, easing:'easeOutSine'})
                .animate({opacity:'0'}, {queue:false, duration:300, easing:'easeOutSine'});
        });

        $('.backward').css({opacity:0, left:0});
        $('.hover-area').hover(function() {
            $(this).find('.backward').stop()
                .animate({left:20}, {queue:false, duration:300, easing:'easeOutCubic'})
                .animate({opacity:'0.95'}, {queue:false, duration:400, easing:'easeOutCubic'});
        },function() {
            $(this).find('.backward').stop()
                .animate({left:0}, {queue:false, duration:550, easing:'easeOutSine'})
                .animate({opacity:'0'}, {queue:false, duration:300, easing:'easeOutSine'});
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:10:32.440

最简单（也是最通用）的方法可能是使用 HTML5 数据属性将开始/停止动画状态存储为 JSON 数据。例子：

[http://jsfiddle.net/ChrisPebble/LFsVr/](http://jsfiddle.net/ChrisPebble/LFsVr/)

HTML

```
<div class="hover-area" data-animate-on='{"right":"20"}' data-animate-off='{"right":"0"}'>hover over me
    <div class="slider">I move to the right</div>
</div>

<div class="hover-area" data-animate-on='{"left":"20"}' data-animate-off='{"left":"0"}'>hover over me
    <div class="slider">I move to the left</div>
</div> 
```

jQuery

```
$('.slider').css({opacity:0, right:0});
$('.hover-area').hover(function() {
    var animationOn = jQuery.parseJSON(($(this).attr("data-animate-on")));
    $(this).find('.slider').stop()
        .animate(animationOn, {queue:false, duration:300, easing:'easeOutCubic'})
        .animate({opacity:'0.95'}, {queue:false, duration:400, easing:'easeOutCubic'});
},function() {
    var animationOff = jQuery.parseJSON(($(this).attr("data-animate-off")));
    $(this).find('.slider').stop()
        .animate(animationOff, {queue:false, duration:550, easing:'easeOutSine'})
        .animate({opacity:'0'}, {queue:false, duration:300, easing:'easeOutSine'});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T19:50:45.513

我不太确定 html 的结构应该是什么或应该发生什么，但这是你的意思吗（就变量而言？）？

```
var option = 'right'; // or option = 'left'
var classDirection = ".forward"; // or ".backward";
move(option, classDirection, 20);
function move(option, classDirection, changeDir}{
   var css = {opacity:0};

   var obj = {};
   obj[option] = 0;
   $.extend(css, obj); 

   var obj2 = {};
   obj2[option] = chaneDir;

   $(classDirection).css(css);
   $('.hover-area').hover(function() {
      $(this).find(classDirection)
      .stop()
      .animate(
           obj2, 
           {queue:false, duration:300, easing:'easeOutCubic'}
      ).animate(
           {opacity:'0.95'}, 
           {queue:false, duration:400, easing:'easeOutCubic'}
      );
   },
   function() {
       $(this).find(classDirection).stop()
       .animate(
           obj, 
           {queue:false, duration:550, easing:'easeOutSine'}
       ).animate(
           {opacity:'0'}, 
           {queue:false, duration:300, easing:'easeOutSine'}
       );
   });
} 
```

​如果有帮助，我在 jsfiddle 上开始了一个东西。至于使用数据属性（如果你真的想），我认为你可以使用 $('.forward).attr('data-dir'); 有什么的。

[http://jsfiddle.net/zBsXX/1/](http://jsfiddle.net/zBsXX/1/)

# django - Django查询集：使用endswith排除电子邮件列表

> ID：10769123
> 
> 赞同：12
> 
> 时间：2012-05-26T19:25:26.247
> 
> 标签：django, django-queryset

我正在运行关于用户数据的指标，并希望排除拥有“@example.com”或“@test.com”等虚假电子邮件的用户。

我试过

```
emails_to_exclude = ['@example.com', '@test.com', '@mailinator.com' ....]
Users.objects.exclude(email__endswith__in=emails_to_exclude) 
```

不幸的是，这不起作用。看起来`endswith`和`in`对方玩得不太好。有任何想法吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-26T19:39:12.790

只需遍历 QuerySet，因为[QuerySet 是惰性的](https://docs.djangoproject.com/en/dev/topics/db/queries/#querysets-are-lazy)。

```
emails_to_exclude = ['@example.com', '@test.com', '@mailinator.com' ....]
users = Users.objects
for exclude_email in emails_to_exclude:
    users = users.exclude(email__endswith=exclude_email)
users = users.all() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T07:07:01.687

您也可以在单个查询中使用正则表达式来执行此操作。

```
emails_to_exclude = ['@example.com', '@test.com', '@mailinator.com' ....]
User.objects.exclude(email__regex = "|".join(emails_to_exclude)) 
```

我不知道这个查询的效率。

这不适用于[SQLite](https://docs.djangoproject.com/en/dev/ref/models/querysets/#regex)，因为它没有内置的正则表达式支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T19:28:30.330

您可能可以遍历电子邮件并建立一个[Q Object](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)。实际上，如果你很聪明，你可能会做一个 1-liner。

```
User.objects.exclude(bitwise_or_function[Q(email__endswith=e) for e in emails_to_exclude]) 
```

类似的东西。我不记得按位或整个列表的功能，我的 Python 生锈了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-07T08:04:34.733

这应该适用于最新版本的 Python 和 Django。该`reduce`函数是一个很好的朋友。

```
from functools import reduce
from operator import or_
from django.db.models import Q

emails_to_exclude = ['@example.com', '@test.com', '@mailinator.com' ....]
users = ( Users.objects
    .exclude( reduce( or_, ( 
        Q(( "email__endswith", k ))
        for k in emails_to_exclude 
    ) ) )
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T19:33:30.817

我更改了排除输入以使其成为一个`set`并且没有“@”。否则，这应该做你想要的。

```
>>> emails = ['foo@example.com', 'spam@stackoverflow.com', 'bad@test.com']
>>> excludes = {'example.com', 'test.com', 'mailinator.com'}
>>> [email for email in emails if email.split('@')[-1] not in excludes]
['spam@stackoverflow.com'] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-09T12:28:31.033

实现这一目标的另一种方法：

```
from django.contrib.auth.models import User
from django.db.models import Q

emails_to_exclude = ['@example.com', '@test.com', '@mailinator.com']

users = User.objects.all()

filters = Q()
for ending in emails_to_exclude:
    filters |= Q(email__endswith=ending)

filtered_users = users.filter(~filters) 
```

# java - java.lang.ClassCastException：org.bson.types.ObjectId 不能转换为 com.mongodb.DBObject

> ID：10769125
> 
> 赞同：1
> 
> 时间：2012-05-26T19:25:39.117
> 
> 标签：java, classcastexception, morphia

我正在尝试将 Morphia 用于项目，但在保存实体时遇到了一些麻烦。我发现我的实体定义有问题，所以我尝试了他们网站上提供的那个，它抛出了这个异常。我检查了 mongo，一切似乎都很好；正在创建集合，并且似乎有记录。

我开始整理一个简单的 JUnit 测试，但它不会超越`datastore.save(e)`：

```
package com.wtf.data;

import com.google.code.morphia.Datastore;
import com.google.code.morphia.Morphia;
import com.google.code.morphia.annotations.Entity;
import com.google.code.morphia.annotations.Id;
import com.google.code.morphia.emul.org.bson.types.ObjectId;
import com.mongodb.Mongo;
import org.junit.Test;

import java.net.UnknownHostException;

public class MorphiaTest {
    @Entity
    class MyEntity {
        @Id
        ObjectId id;
        String name;
    }

    @Test
    public void save() {
        Mongo mongo = null;
        try {
            mongo = new Mongo("127.0.0.1", 27017);
        } catch (UnknownHostException e) {
            e.printStackTrace();
        }
        Morphia morphia = new Morphia();
        morphia.map(MyEntity.class);
        Datastore datastore = morphia.createDatastore(mongo, "MorphiaTest");
        datastore.ensureIndexes();

        MyEntity e = new MyEntity();
        datastore.save(e);
    }
} 
```

java.lang.RuntimeException: java.lang.ClassCastException: org.bson.types.ObjectId 无法在 com.google.code.morphia.mapping.EmbeddedMapper.fromDBObject(EmbeddedMapper.java:149) 处转换​​为 com.mongodb.DBObject com.google.code.morphia.mapping.Mapper.readMappedField(Mapper.java:433) 在 com.google.code.morphia.mapping.Mapper.updateKeyInfo(Mapper.java:228) 在 com.google.code.morphia。 DatastoreImpl.postSaveOperations(DatastoreImpl.java:886) 在 com.google.code.morphia.DatastoreImpl.postSaveGetKey(DatastoreImpl.java:683) 在 com.google.code.morphia.DatastoreImpl.save(DatastoreImpl.java:734) 在 com .google.code.morphia.DatastoreImpl.save(DatastoreImpl.java:802) 在 com.google.code.morphia.DatastoreImpl.save(DatastoreImpl.java:796) 在 com.wtf.data.MorphiaTest.save(MorphiaTest.java :41)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T21:09:26.663

尝试更换

```
import com.google.code.morphia.emul.org.bson.types.ObjectId; 
```

和

```
import org.bson.types.ObjectId; 
```

# assembly - 在装配中为屏幕着色

> ID：10769127
> 
> 赞同：1
> 
> 时间：2012-05-26T19:26:15.717
> 
> 标签：assembly, x86

我已经在一个操作系统上工作了一段时间，它是用汇编语言编写的。到目前为止，一切都运行良好，除了一件事。我正在尝试用背景颜色快速填充屏幕，而不是循环遍历每个像素并更改其颜色（这需要相当长的时间）。是否有任何代码能够完成这样的任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T19:43:28.203

要在“我一直在使用操作系统”的上下文中回答“如何为屏幕着色”的问题……用所需的颜色覆盖帧缓冲区。

如何实现这一点取决于您是在实模式还是保护模式下工作。例如，在图形模式为 13h 的实模式下，您可以访问地址 A000h 的帧缓冲区。有关受保护模式下的图形的信息，请参阅[osdev.org wiki 上的此链接](http://wiki.osdev.org/Drawing_In_Protected_Mode)。

# python - 从 FanycURLLoader 获取响应代码

> ID：10769128
> 
> 赞同：0
> 
> 时间：2012-05-26T19:26:36.267
> 
> 标签：python

我正在寻找一种从 url 获取 http 响应代码的快速方法。如果代码为 200'，则下载图像。我可以使用 MyOpener 获取响应代码吗？坦克

```
from urllib import FancyURLopener
class MyOpener(FancyURLopener):
  version = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; it; rv:1.8.1.11) Gecko/20071127 Firefox/2.0.0.11'

myopener = MyOpener()
myopener.retrieve('http://upload.wikimedia.org/wikipedia/en/4/44/Zindagi1976.jpg', 'Zindagi1976.jpg') 
```

更新：

```
>>> import urllib
>>> resp = urllib.urlopen("http://upload.wikimedia.org/wikipedia/en/4/44/Zindagi1976.jpg")
>>> print resp.getcode()
 403 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:46:41.240

这有什么问题，或者我把你的问题弄错了。

```
>>> import urllib
>>> resp = urllib.urlopen("http://docs.python.org/library/urllib.html")
>>> if resp.getcode() == 200:
...     print "do my stuff"
...
do my stuff
>>> 
```

很高兴你已经解决了这个问题。有一个原因作为响应代码`wikimedia`给出。`403`原因是一旦您发送访问维基媒体内容的请求，它就会意识到该请求不是由 a 发送的，`browser`因此它会引发 403 错误。

网站会进行此类检查，以确保机器人不会访问内容。还有许多其他检查，并且`User-Agent`是其中之一。

所以，要让它像浏览器一样发送请求，你可以添加`User-Agent`到你的 python 代码中。

```
>>> import urllib2
>>> req = urllib2.Request('http://upload.wikimedia.org/wikipedia/en/4/44/Zindagi1976.jpg')
>>> useragent = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; it; rv:1.8.1.11) Gecko/20071127 Firefox/2.0.0.11'
>>> req.add_header('User-Agent',useragent)
>>> resp = urllib2.urlopen(req)
>>> resp.getcode()
200
>>> data  = resp.read()
>>> with open("image.jpg","wb") as f:
...     f.write(data)
...
>>> 
```

# javascript - 使用jQuery对列表进行数字排序然后按字母顺序排序？

> ID：10769130
> 
> 赞同：0
> 
> 时间：2012-05-26T19:27:11.277
> 
> 标签：javascript, jquery, dom, sorting

[http://jsbin.com/aboca3/95/edit](http://jsbin.com/aboca3/95/edit)

这是单独数字和字母排序的工作示例。

它运作良好，问题是，它不会按字母顺序对相同`<em>`数量的项目进行排序。

例如，它在数字排序上给出了 Salpinestars(58)、Joe Rocket (58)。应该给出相反的顺序。

我试图更改`items.sort(sortEm).prependTo(self);`为`items.sort(sortAlpha).sort(sortEm).prependTo(self);`，但它不起作用。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T19:58:40.133

使用这个 sortEm()：

```
function sortEm(a,b){
  var emA = parseInt($('em',a).text().replace(/[\(\)]/g,''));
  var emB = parseInt($('em',b).text().replace(/[\(\)]/g,''));
  if (emA == emB) { // sort alphabetically if em number are equal
    return sortAlpha(a,b);
  }
  return emA < emB ? 1 : -1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T19:59:55.120

您可以编写一个函数来按两个标准进行排序。

```
// ORDER BY EmValue, LiMinusEmText

function sortBoth(a, b) {
    var aText = $(a).text().replace(/\(\d+\)\s*$/, "");      // chop off the bracket
    var bText = $(b).text().replace(/\(\d+\)\s*$/, "");      // and numbers portion
    var aValue = +$(a).find("em").text().replace(/\D/g, ""); // parse out em value
    var bValue = +$(b).find("em").text().replace(/\D/g, ""); // and convert to number
    if (aValue == bValue) {
        if (aText == bText) {
            return 0;
        }
        else if (aText < bText) {
            return -1;
        }
        else /*if (aText > bText)*/ {
            return 1;
        }
    }
    else {
        return aValue - bValue;
    }
}

// ORDER BY LiMinusEmText, EmValue

function sortBoth(a, b) {
    var aText = $(a).text().replace(/\(\d+\)\s*$/, "");      // chop off the bracket
    var bText = $(b).text().replace(/\(\d+\)\s*$/, "");      // and numbers portion
    var aValue = +$(a).find("em").text().replace(/\D/g, ""); // parse out em value
    var bValue = +$(b).find("em").text().replace(/\D/g, ""); // and convert to number
    if (aText == bText) {                                    // strings value same?
        return aValue - bValue;                              // then return a - b
    }
    else if (aText < bText) {
        return -1;
    }
    else /*if (aText > bText)*/ {
        return 1;
    }
} 
```

# javascript - 使用 javascript/jquery 将值存储到循环中的数组

> ID：10769132
> 
> 赞同：1
> 
> 时间：2012-05-26T19:27:38.420
> 
> 标签：javascript, jquery, multidimensional-array

我有一个日期和年份列表，如下所示：

```
<ul>
    <li>Jan 2010</li>
    <li>Mar 2010</li>
    <li>Jan 2011</li>
    <li>Jan 2012</li>
    <li>Mar 2012</li>
</ul> 
```

然后我使用 jquery 从元素和单独的月份和年份获取每个列出的值，例如下面的代码：

```
$("ul").children("li").each(function(){
    var val = $(this).text();
    var month = val.split(" ")[0]; //get month Jan, Mar
    var year = val.split(" ")[1];  //get year 2010, 2011, 2012

    var arrDate = new Array();

    //do some code here to store the year and the month in array w/c is arrDate
}); 
```

所以这有点棘手，因为年份不会重复，而是每个月都存储在同一年，如下图所示：

```
2010 => Jan
     => Mar
2011 => Jan
2012 => Jan
     => Mar 
```

所以数组结构类似于上面，其中年份将是唯一的，并且具有相同年份的每个月都将存储到其引用的年份。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T19:31:25.167

在这种情况下，您不需要一个经典数组，而是一个关联数组，它在 Javascript 中转换为标准对象。

```
var months = {};
$("ul").children("li").each(function(){
    var val = $(this).text().split(" ");
    if (val[1] in months) months[val[1]].push(val[0]);
    else months[val[1]] = [val[0]];
}); 
```

现在`months`是你的二维数组。

注意：我认为从 DOM 内容中检索所需的值不是一个好主意。为什么你必须这样做？

# python - Python：将关键代码诅咒为可读（类似vim？）语法

> ID：10769133
> 
> 赞同：14
> 
> 时间：2012-05-26T19:27:45.563
> 
> 标签：python, vim, curses

我想在基于 curses 的 python 程序中提供键绑定。理想的解决方案是围绕`getch()`产生可读字符串的抽象层，可能是类似 vim 的格式。

在pythonese中：

```
def get_keycomb(wind):
    string = read_keycomb(wind) # read with wind.getch() as needed
    return string # something like '<C-S-a>' 
```

然后我可以通过将字符串用作`dict`函数中的键来轻松实现映射。

是否有提供这种功能的 python 库，或者比手动为所有内容提供名称更容易实现它的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T15:13:27.960

所有非特殊键的代码都是字符的 ascii 代码，因此表的一部分很容易构建。

```
char_codes = {chr(i):i for i in range(256)} 
```

所有特殊字母的代码都可以在 curses 模块中作为 KEY_* 常量使用，因此我们可以通过以下方式获取它们：

```
specials_codes = {name[4:]: value for name, value in vars(curses).items()
    if name.startswith('KEY_')} 
```

因此，您可以使用以下代码构建映射：

```
import curses

mapping = {chr(i):i for i in range(256)}
mapping.update((name[4:], value) for name, value in vars(curses).items()
    if name.startswith('KEY_'))

print(mapping) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:21:36.663

与其使用 curses 进行输入，不如使用[`libtermkey`](http://www.leonerd.org.uk/code/libtermkey/)then 它提供了简单的函数来将键结构与人类可读的字符串相互转换，就这种形式。特别是函数`termkey_strfkey`和`termkey_strpkey`。

[http://www.leonard.org.uk/code/libtermkey/doc/termkey_strfkey.3.html](http://www.leonerd.org.uk/code/libtermkey/doc/termkey_strfkey.3.html)

[http://www.leonard.org.uk/code/libtermkey/doc/termkey_strpkey.3.html](http://www.leonerd.org.uk/code/libtermkey/doc/termkey_strpkey.3.html)

这是一个 C 库，但它确实有一个 Python 绑定；看

[https://github.com/temoto/ctypes_libtermkey](https://github.com/temoto/ctypes_libtermkey)

# javascript - 单击最后一个子元素时，Joomla javascript（JQuery）手风琴菜单总是展开所有节点

> ID：10769136
> 
> 赞同：0
> 
> 时间：2012-05-26T19:28:10.400
> 
> 标签：javascript, jquery

我是 joomla 和 Jquery 的新手。请记住这一点。

我的 javascript 手风琴菜单运行不佳：当我单击最后一个子元素时，所有节点都显示为展开。不仅孩子的节点（父亲）点击了。

我有显示模板的 index.php：

```
function initMenu() {
        $('.menu ul').hide();
        $('.menu li.active.parent ul').show();
        $('.menu li a').click(
        function() {
        $(this).next().slideToggle('normal');
        }
        );
        }
    $(document).ready(function() {initMenu();}); 
```

[我无法发布我为显示行为而编辑的图像（因为我没有声誉），所以我将用概念菜单解释情况]

**显示的行为：**

节点1
|||||节点1.1
|||||节点1.2 ||||||||||||节点
1.2.1
**||||||||||||||||| |||Node 1.2.1.1** <----- 点击这里下面的所有节点都展开了！
|||||Node1.3
Node2
|||||Node2.1
||||||||||||Node2.1.1
||||||||||||Node2.1.2
||| |||||||||Node2.1.3
||||||||||||||||||||Node2.1.3.1
|||||||||||| |||||||||Node2.1.3.2
||||||||||||||||||||Node2.1.3.3
Node3

**正确的行为：**

节点1
|||||节点1.1
|||||节点1.2 ||||||||||||节点
1.2.1
**||||||||||||||||| |||Node 1.2.1.1** <----- 点击这里不再显示任何子节点
|||||Node1.3
Node2
Node3

对此的任何帮助将不胜感激。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T20:05:36.230

首先给我们一些 html 代码，我猜你不是很正确所有节点我猜 Node 1.2.1.1 将其余节点作为 1 个实体处理

其次，Joomla的核心包含mootools框架，可能有冲突尝试用

```
$.noConflict();
  jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
  }); 
```

最少但不是最后，尝试使用[JqueryUI 的手风琴插件](http://jqueryui.com/demos/accordion/)真的很容易使用

# php - 主页登录表单 - Wordpress

> ID：10769140
> 
> 赞同：0
> 
> 时间：2012-05-26T19:28:30.723
> 
> 标签：php, javascript, html, css, wordpress

我已经在我的网站主页上实现了一个登录表单，但是，当我登录时 - 它实际上不允许我登录。在我选择“登录”后，我的网址末尾显示以下内容：“？username=admin&password=admin&submit=+”

**这是HTML：**

```
<div id="navbar">
        <?php wp_nav_menu( array( 'menu' => 'Primary Menu', 'container' => false,'menu_id' => 'main-nav','depth'=>'2')); ?>
            <div id="login" >
        <?php if (!(current_user_can('level_0'))){ ?>               
        <form>
            <input type="text" name="username" id="username" value="<?php echo wp_specialchars(stripslashes($user_login), 1) ?>" style="padding-left: 2px;" onfocus="if(this.value==this.defaultValue) this.value='';" onblur="if(this.value=='') this.value=this.defaultValue;" />
            <input type="password" name="password" id="password" style="padding-left: 2px;" onfocus="if(this.value==this.defaultValue) this.value='';" onblur="if(this.value=='') this.value=this.defaultValue;" />
            <input type="submit" name="submit" value=" " class="loginbutton" />
                </form>
                <a class="helpbutton" href="<?php echo get_option('home'); ?>/wp-login.php?action=lostpassword"></a>
        <?php } else { ?>
        <ul class="admin_box">
                    <li><a href="<?php echo get_option('home'); ?>/wp-admin/">Dashboard</a></li>
                    <li><a href="<?php echo get_option('home'); ?>/wp-admin/post-new.php">Write new Post</a></li>
                    <li><a href="<?php echo get_option('home'); ?>/wp-login.php?action=logout&redirect_to=<?php echo urlencode($_SERVER['REQUEST_URI']) ?>">Log out</a></li>
            </ul>
        <?php }?>
            </div>
        </div> 
```

**这是CSS：**

```
/* Login
-----------------------------------------------------------------------------*/
#login {
    background-image:url(images/bluenavbg.png);
    height:39px;
    width: 370px;
    float:right;
    margin-right: 0px;
    margin-top: 0px;
}

form {
    float: left;
    margin-top: 10px;
    margin-left: 20px;
}

input {
    background:url(images/formbg.png);
    width: 117px;
    height: 20px;
    margin-left: 5px;
    border:none;
    margin-left: 3px;
}

.loginbutton {
    height: 20px;
    width: 40px;
    margin-left: 5px;
    background:url(images/loginbutton.png);
}
.helpbutton {
    height: 20px;
    width: 38px;
    margin-right: 10px;
    background:url(images/helpbutton.png);
    margin-top: 10px;
    float: right;
}

#login ul {
    float: left;
    color: white;
    padding-left: 55px;
}

#login li a {
    float: left;
    color: white;
    text-align: center;
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:05:25.840

我注意到您缺少表单的操作属性。

```
<form name="loginform" id="loginform" action="<?php echo get_option('siteurl'); ?>/wp-login.php" method="post">

        <input value="Username" class="input" type="text" size="20" tabindex="10" name="log" id="user_login" onfocus="if (this.value == 'Username') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Username';}" /> <input name="rememberme" id="rememberme" value="forever" tabindex="90" type="checkbox"> Remember Me? <br />
        <input value="Password" class="input" type="password" size="20" tabindex="20" name="pwd" id="user_pass" onfocus="if (this.value == 'Password') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Password';}" />
        <input name="wp-submit" id="wp-submit" value="Log In" tabindex="100" type="submit">
        <input name="redirect_to" value="<?php echo get_option('siteurl'); ?>/wp-admin/" type="hidden">
        <input name="testcookie" value="1" type="hidden">

</form> 
```

我已将其添加到下面的代码中。

```
<div id="navbar">
        <?php wp_nav_menu( array( 'menu' => 'Primary Menu', 'container' => false,'menu_id' => 'main-nav','depth'=>'2')); ?>
            <div id="login" >
        <?php if (!(current_user_can('level_0'))){ ?>               
        <form name="loginform" id="loginform" action="<?php echo get_option('siteurl'); ?>/wp-login.php" method="post">

            <input value="Username" class="input" type="text" size="20" tabindex="10" name="log" id="user_login" onfocus="if (this.value == 'Username') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Username';}" /> <input name="rememberme" id="rememberme" value="forever" tabindex="90" type="checkbox"> Remember Me? <br />
            <input value="Password" class="input" type="password" size="20" tabindex="20" name="pwd" id="user_pass" onfocus="if (this.value == 'Password') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Password';}" />
            <input name="wp-submit" id="wp-submit" value="Log In" tabindex="100" type="submit">
            <input name="redirect_to" value="<?php echo get_option('siteurl'); ?>/wp-admin/" type="hidden">
            <input name="testcookie" value="1" type="hidden">

    </form>
                <a class="helpbutton" href="<?php echo get_option('home'); ?>/wp-login.php?action=lostpassword"></a>
        <?php } else { ?>
        <ul class="admin_box">
                    <li><a href="<?php echo get_option('home'); ?>/wp-admin/">Dashboard</a></li>
                    <li><a href="<?php echo get_option('home'); ?>/wp-admin/post-new.php">Write new Post</a></li>
                    <li><a href="<?php echo get_option('home'); ?>/wp-login.php?action=logout&redirect_to=<?php echo urlencode($_SERVER['REQUEST_URI']) ?>">Log out</a></li>
            </ul>
        <?php }?>
            </div>
        </div> 
```

# java - 使用 GLSurfaceView 拖动和缩放事件的操作方法和理解

> ID：10769144
> 
> 赞同：4
> 
> 时间：2012-05-26T19:29:54.703
> 
> 标签：java, android, opengl-es, touch, glsurfaceview

我使用我制作的这个测试应用程序，使用标准顶点、颜色和点缓冲区显示 3D 对象，一切正常。

我可以..

*   使用触摸事件旋转对象
*   使用 GL10 使用 openGL ES 1.0 渲染对象
*   一切都很好

现在我希望能够使用两根手指进行“捏合”动作放大和缩小。我找到了一些很好的教程和示例代码，但主要是针对 ImageViews 的。我对 Android 还是半新的，我不完全了解如何使这个缩放功能适用于 GLSurfaceView。

下面是迄今为止我为 Activity 类编写的代码。第一个触摸处理程序用于我通过为 ImageView 设计的教程找到的缩放事件（我使用它是因为我认为它会很容易转换）。第二个处理程序用于旋转事件，它工作得很好。

提前谢谢你，我希望这篇文章能帮助其他有同样问题的人。我将等待任何需要的编辑或添加。

```
 // Activity for rendering 3D object openGL ES 1.0
 public class GL_ExampleActivity extends Activity
 {
      private GLSurfaceView surface;

      @Override
      public void onCreate(Bundle savedInstanceState)
      {
           super.onCreate(savedInstanceState);

           surface = new GL_ExampleSurfaceView(this);
           setContentView(surface);
      }

      @Override
      protected void onPause()
      {
           // TODO Auto-generated method stub
           super.onPause();
           surface.onPause();
      }

      @Override
      protected void onResume()
      {
           // TODO Auto-generated method stub
           super.onResume();
           surface.onResume();
      }
 }

 class GL_ExampleSurfaceView extends GLSurfaceView
 {
      private static final String TAG = "Touch";

      Matrix matrix_new = new Matrix();
      Matrix last_matrix = new Matrix();

      static final int NONE = 0;
      static final int DRAG = 1;
      static final int ZOOM = 2;
      int mode = NONE;

      PointF start = new PointF();
      PointF mid = new PointF();
      float oldDist = 1f;

      private final float SCALE_FACTOR = 180.0f / 320;
      private GLRenderer renderer;
      private float previous_x;
      private float previous_y;

      public GL_ExampleSurfaceView(Context context)
      {
           super(context);

           renderer = new GLRenderer();
           setRenderer(renderer);

           setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);
      }

      @Override
      public boolean onTouchEvent(MotionEvent e)
      {
           // handler for drag and zoom events
           switch (e.getAction() & MotionEvent.ACTION_MASK)
           {
                case MotionEvent.ACTION_DOWN:
                     last_matrix.set(matrix_new);
                     start.set(e.getX(), e.getY());
                     Log.d(TAG, "mode=DRAG");
                     mode = DRAG;
                     //requestRender();
                     break;
                case MotionEvent.ACTION_POINTER_DOWN:
                     oldDist = finger_distance(e);
                     Log.d(TAG, "oldDist=" + oldDist);
                     if (oldDist > 10f)
                     {
                         last_matrix.set(matrix_new);
                         finger_distance_midpoint(mid, e);
                         mode = ZOOM;
                         Log.d(TAG, "mode=ZOOM");
                     }
                     //requestRender();
                     break;
                case MotionEvent.ACTION_UP:
                case MotionEvent.ACTION_POINTER_UP:
                     mode = NONE;
                     Log.d(TAG, "mode=NONE");
                     //requestRender();
                     break;
                case MotionEvent.ACTION_MOVE:
                     if (mode == DRAG)
                     {
                          matrix_new.set(last_matrix);
                          matrix_new.postTranslate(e.getX() - start.x, e.getY() - start.y);
                     }
                     else if (mode == ZOOM)
                     {
                          float newDist = finger_distance(e);
                          Log.d(TAG, "newDist=" + newDist);
                          if (newDist > 10f)
                          {
                               matrix_new.set(last_matrix);
                               float scale = newDist / oldDist;
                               matrix_new.postScale(scale, scale, mid.x, mid.y);
                          }
                     }
                    //requestRender();
                    break;
            }
           //view.setImageMatrix(matrix_new);

           // handler for rotation event, y and x axis
           float x = e.getX();
           float y = e.getY();

           switch (e.getAction())
           {
                case MotionEvent.ACTION_MOVE:

                float dx = x - previous_x;
                float dy = y - previous_y;

                if (y > getHeight() / 2)
                {
                     dx = dx * -1 ;
                }

                if (x < getWidth() / 2)
                {
                     dy = dy * -1 ;
                }
                renderer.angle_x += dx * SCALE_FACTOR;
                renderer.angle_y += dy * SCALE_FACTOR;
                requestRender();
           }
           previous_x = x;
           previous_y = y;
           return true;
      }

      private float finger_distance(MotionEvent e)
      {
           float x = e.getX(0) - e.getX(1);
           float y = e.getY(0) - e.getY(1);
           return FloatMath.sqrt(x * x + y * y);
      }

      private void finger_distance_midpoint(PointF point, MotionEvent e)
      {
           float x = e.getX(0) + e.getX(1);
           float y = e.getY(0) + e.getY(1);
           point.set(x / 2, y / 2);
      }

 } 
```

再次感谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:56:53.333

有两种明显的方法可以解决这个问题。如果只想增加单个对象的大小，可以在绘制对象时使用 glScalef。使用 scalef 很容易且相对简单，但这并不完全符合您的要求。

另一种解决方案是将比例因子应用于您的投影矩阵，这将产生所需的效果。为此，只需在绘图之前将投影矩阵的左、右、上、下距离乘以一个比例即可。

gl.glFrustumf(width/2 * zoom, width/2 * zoom, height/2 * zoom, height/2 * zoom, 1, -1);
*（注意，如果您使用的是正交矩阵，您将使用 glOrthof 代替）*

如果您有兴趣，可以在[此处找到有关投影矩阵的更多信息](http://www.songho.ca/opengl/gl_projectionmatrix.html)

# javascript - Javascript：如何制作页面中每个元素的数组

> ID：10769145
> 
> 赞同：1
> 
> 时间：2012-05-26T19:30:00.320
> 
> 标签：javascript, html, arrays

我正在尝试获取 HTML 页面中每个元素的数组：

```
var elms = document.querySelectorAll(""); 
```

但没有成功。

想法？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T19:37:25.833

```
var elms = document.getElementsByTagName("*"); 
```

# php - 缺少扩展 mysqli，phpmyadmin 不起作用

> ID：10769148
> 
> 赞同：65
> 
> 时间：2012-05-26T19:30:28.480
> 
> 标签：php, mysql, phpmyadmin, ubuntu-12.04

我在 ubuntu 12.04 上遇到了 phpmyadmin 的问题。我已经安装了 apache2、php5、mysql 和 phpmyadmin。

该`phpinfo();`脚本不显示任何关于 mysqli 或 mysql 扩展的信息。

当我尝试启动 phpmyadmin 时出现此错误：

```
----
**phpMyAdmin - 错误**
--------
**缺少 mysqli 扩展。请检查您的 PHP 配置。**
----

```

在 php.ini 文件中，我取消了注释`extension=mysql.so`行，但不起作用...

任何人都有另一个可能的解决方案？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-05-31T14:16:51.050

最新的 phpMyAdmin 版本需要 mysqli 扩展，并且将不再与 mysql 一起使用（注意其名称末尾的额外“i”）。

**对于 PHP 5**

```
sudo apt-get install php5-mysqli 
```

**对于 PHP 7.3**

```
sudo apt-get install php7.3-mysqli 
```

将安装包含旧的和新的包，所以之后你需要做的就是添加

```
extension=mysqli.so 
```

在您的 php.ini 中，在主题 Dynamic Extensions 下。

重启阿帕奇：

```
sudo systemctl restart apache2 
```

验证并按 Enter。

需要被完成！如果问题仍然存在，请删除浏览器缓存。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-04-04T13:36:59.453

```
sudo apt-get install php5-mysql
sudo apt-get install php5-mysqlnd 
```

试试这两种方法，它对我有用

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-09-11T17:48:16.633

如果您在 localhost 上运行 PHPMyAdmin，请在文件中取消注释`/etc/php5/apache2/php.ini`此行：

```
mysqli.allow_local_infile = On 
```

重启阿帕奇：

```
sudo /etc/init.d/apache2 restart 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-09-26T07:16:20.317

只需重新启动 apache2 和 mysql：

*   **阿帕奇2：** `sudo /etc/init.d/apache2 restart`

*   **mysql:** `sudo /etc/init.d/mysql restart`

然后刷新你的浏览器，享受 phpmyadmin :)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-10-07T23:48:07.747

我尝试了很多答案，但它们似乎都不起作用，因为 php7.0 不是默认值。

```
sudo apt-get upgrade 
```

似乎为我完成了这项工作，但之后我不得不重新安装 php7.0 和 phpmyadmin：

```
sudo apt-get install php7.0 php7.0-mysql
sudo apt-get install apache2 apache2-mod-php7.0
sudo apt-get install phpmyadmin 
```

希望能帮助到你！

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-01-08T07:37:29.850

我遇到了同样的问题并通过执行以下步骤**解决了它：**

1.  首先检查 PHP 版本。如果您有多个 PHP 版本。假设您有 PHP 版本，如 php7.0、php7.1 和 php 7.2，那么

2.  运行这些命令

**对于 PHP7.0**

```
sudo apt-get install php7.0-mysql
sudo apt-get install php7.0-mysqlnd 
```

**对于 PHP7.1**

```
sudo apt-get install php7.1-mysql
sudo apt-get install php7.1-mysqlnd 
```

**对于 PHP7.2**

```
sudo apt-get install php7.2-mysql
sudo apt-get install php7.2-mysqlnd 
```

**对于 PHP7.3**

```
sudo apt-get install php7.3-mysql
sudo apt-get install php7.3-mysqlnd 
```

3.  编辑ini文件并寻找mysqli。通过删除取消注释该行**；** 适用于所有 php 版本

    扩展=mysqli.so

> `/etc/php/<php.version>/apache2/php.ini`

**对于 PHP7.0**

```
sudo nano /etc/php/7.0/apache2/php.ini 
```

**对于 PHP7.1**

```
sudo nano /etc/php/7.1/apache2/php.ini 
```

**对于 PHP7.2**

```
sudo nano /etc/php/7.2/apache2/php.ini 
```

**对于 PHP7.3**

```
sudo nano /etc/php/7.3/apache2/php.ini 
```

最后重新启动apache服务器

```
sudo /etc/init.d/apache2 restart 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-26T21:27:35.323

我通过编辑 /usr/local/zend/etc/php.ini 解决了这个问题。

（通过执行 netstat -nlp ¦ grep apache，然后 strace -p somepid ¦ grep php.ini 找到它）。

在文件末尾，我添加了：

```
extension=/usr/lib/php5/20090626+lfs/mysql.so
extension=/usr/lib/php5/20090626+lfs/mysqli.so
extension=/usr/lib/php5/20090626+lfs/mcrypt.so 
```

在没有路径的情况下添加它不起作用。

然后重新启动后它工作。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-01-15T13:15:06.027

对于 ubuntu 用户，打开您的终端并输入以下命令

```
sudo apt-get install mysql 
```

之后只需键入以下内容重新启动 apache2

```
sudo service apache2 restart 
```

刷新您的浏览器并享受 phhmyadmin

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-05-11T11:13:13.173

对于使用 php-fpm 的 Ubuntu 20.04 用户，我通过在 php conf 中添加完整路径来解决此问题：

> 编辑/etc/php/7.4/fpm/conf.d/20-mysqli.ini

并更换

```
extension=mysqli.so 
```

和：

```
extension=/usr/lib/php/20190902/mysqli.so 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-04-13T13:56:47.777

检查 extension_dir 是您喜欢从 phpinfo() 检查的事情之一。在我的情况下，默认情况下是 extension_dir = "./" 这是错误的。将其更改为 extension_dir = './ext/' 或所有扩展 dll 当前所在的位置。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-01-21T03:10:15.947

您需要 MySQLi 模块。手动安装 phpMyAdmin 时通常会出现此错误。

```
sudo apt-get install php7.3-mysql 
```

它会带你回来。

```
[Creating config file /etc/php/7.3/mods-available/mysqlnd.ini with new version]

[Creating config file /etc/php/7.3/mods-available/mysqli.ini with new version] 
```

然后。

```
sudo service apache2 restart. 
```

然后。

```
Press F5 on your browser. 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-12-11T20:21:13.343

这对我有用，使用 php 和 mysql 脚本创建一个数据库并打开 mysql 控制台并输入 create user 'yourName'@'127.0.0.1' 然后输入 grant all permissions on *。*到 'yourName'@'127.0.0.1' 然后打开浏览器转到 localhost 并创建一个数据库，然后转到您的 phpmyadmin 页面，您会看到它在那里弹出。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-06-10T17:26:11.817

在 ubuntu 12.04 我不得不改变`mssql.compatability_mode = On`。穿上并工作

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-03-26T12:08:03.580

由于我在升级后遇到了这个问题，我只是禁用了 Apache2-php5

```
a2dismod php5 
```

并激活php7

```
a2enmod php7 
```

希望它可以帮助任何人！

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-04-18T10:10:43.657

如果您正在使用 XAMPP 等，只需将此行添加到您的 php.ini 中。还要检查它是否已经存在，只需删除；从它的前面

```
extension= php_mysqli.dll 
```

并停止并启动 apache 和 MySQL 它将工作。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-02-05T15:30:00.900

我在 ubuntu 上遇到了同样的错误，对我有用的是在 /etc/php/7.3/apache2/php.ini 中编辑 2 行

```
 ;extension=mysqli to   extension=mysqli 
```

并在取消注释后将**扩展**变量位置提供给**mysqli.so**

```
 extension=/usr/lib/php/20170718/mysqli.so 
```

然后重新启动服务以确保

```
systemctl start mysql 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-05-07T13:34:52.850

作为记录，我的系统是 Ubuntu Server 20.04，这里的解决方案都不起作用。对我来说，我安装了 PHP 7.4，我必须编辑`enter code here`/etc/php/7.4/apache2/php.ini`。

在此范围内，搜索`;extension=mysqli`、取消注释并更改`mysqli`为`mysqlnd`，使其看起来像这样`extension=mysqlnd`。我尝试使用`mysqli`，但遇到了同样的错误，就好像我没有启用它但`mysqlnd`对我有用。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-10-29T09:41:19.643

有同样的问题，但在我的情况下，原因是 Ubuntu 和 php 版本的更新 - 从 18.04 和 php-7.2 到 20.04 和 php-7.4。

Nginx 服务器是相同的，所以在我的**/etc/nginx/sites-available/default**中是旧数据：

```
server {
  location /pma {
    location ~ ^/pma/(.+\.php)$ {
      fastcgi_pass unix:/run/php/php7.2-fpm.sock;
    }
  }
} 
```

我无法让 phpmyadmin 处理任何 php.ini 更改以及来自该线程的所有答案，但在某个时刻我打开了 /etc/nginx/sites-available/default 并意识到我仍然有旧版本的 php . 所以我只是将其更改为

```
fastcgi_pass unix:/run/php/php7.4-fpm.sock; 
```

问题消失了，phpmyadmin 神奇地开始工作，没有任何 mysqli 文件投诉。我什至仔细检查了它，但是是的，它就是这样工作的——如果你的 nginx 配置文件中的 php-fpm.sock 版本错误，你的 phpmyadmin 将无法工作，但显示的原因将是**“缺少 mysqli 扩展”**

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-06-25T14:16:49.407

我希望我的成功答案对最近的人有所帮助，因为我不得不尝试许多混合搭配然后找到它：

该解决方案在 Ubuntu 20.04 Desktop 上使用**PHP v7.4**、**PHP v8.0.7**和**MySQL v8.0.25**设置对我有用。

我所做的是编辑`/etc/php/7.4/apache2/php.ini`和文件， 并 在两个文件中`/etc/php/8.0/apache2/php.ini`替换 为。`extension=mysqli.so``extension=/usr/lib/php/20190902/mysqli.so`

`sudo systemctl restart apache2`后来，通过and重新启动了这两个（PHP 和 MySQL）`sudo systemctl restart mysql`。刷新 Chrome，phpMyAdmin 响应登录屏幕。

（**更新：**请检查您是否也有`/usr/lib/php/20200930/mysqli.so`文件。我对此进行了测试，因为它按目录日期看起来较新，并且这在两个 PHP 文件中也都有效`extension=/usr/lib/php/20200930/mysqli.so`）

# c++ - struct和class之间的区别以及为双链表构造节点？

> ID：10769149
> 
> 赞同：3
> 
> 时间：2012-05-26T19:30:34.443
> 
> 标签：c++, class, struct, linked-list, nodes

我正在尝试为学习经验创建自己的双链表。我的书显示了下面的节点结构，我想知道这是否等同于我创建的节点类？结构中的该函数是否只是一种构造函数，为结构中的每种数据类型分配值？

```
//===== Struct =====

struct Node
{
    Node *next;
    Node *prev;
    std::string val;
    Node(const std::string &value, Node *nextVal = NULL, Node *prevVal = NULL) :
        val(value), next(nextVal), prev(prevVal) {}
};

//===== Class ====
class Node
{
public:
    Node(std::string value = "", Node *pVal = NULL, Node *nVal = NULL);
    virtual ~Node(void);

protected:
    Node *next;
    Node *prev;
    std::string val;
};

Node(std::string value = "", Node *pVal = NULL, Node *nVal = NULL)
{
    next = nVal;
    prev = pVal;
    val = value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:34:08.640

是的 - 这正是它的本质。

这是一个带有结构构造函数示例的页面。

[http://www.yolinux.com/TUTORIALS/LinuxTutorialC++Structures.html](http://www.yolinux.com/TUTORIALS/LinuxTutorialC++Structures.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T19:50:21.757

这称为构造函数初始化列表，它旨在初始化结构或类的属性。

这通常是初始化属性的首选方式。这是一个解释原因的讨论：

[是否可以将成员初始化推迟到构造函数主体？](https://stackoverflow.com/questions/2464296/is-it-possible-to-defer-member-initialization-to-the-constructor-body)

长话短说，如果您没有显式初始化初始化列表中的属性，它会使用默认构造函数隐式初始化，因此您将初始化变量两次。

此外，您需要指针的访问器。

```
class Node
{
public:
    Node():next(NULL),prev(NULL),val("") {};
    Node(std::string value):next(NULL),prev(NULL),val(value) {};
    Node(std::string value, Node *pVal):next(NULL),prev(pVal),val(value) {};
    Node(std::string value, Node *pVal, Node *nVal):next(nVal),prev(pVal),val(value) {};
    virtual ~Node(void);

    std::string getValue()
    {
        return val;
    }
    void setValue(std::string v)
    {
        val = v;
    }

    Node * getNext()
    {
        return next;
    }
    void setNext(Node * n)
    {
        next = n;
    }

    Node * getPrevious()
    {
        return prev;
    }
    void setPrevious(Node * n)
    {
        prev= n;
    }

protected:
    Node *next;
    Node *prev;
    std::string val;
}; 
```

# jquery - 花哨的盒子在 beforeShow 函数中与 iframe 一起使用？

> ID：10769151
> 
> 赞同：0
> 
> 时间：2012-05-26T19:30:53.673
> 
> 标签：jquery, iframe, fancybox, fancybox-2

我试图根据存储在 iframe 内的标签中的信息动态设置我的 Fancybox 对象的一些值，该 iframe 正在加载该标签。问题是，我似乎唯一一次可以从内容中获取正确的值（我几乎尝试了所有可能的回调组合）是在 afterShow 方法上。这会导致显示后重置的宽度和高度的跳跃过渡。

```
$('.fancybox').fancybox({
            openEffect : '弹性',
            closeEffect : '弹性',
            自动尺寸：真，
            演出后：函数（）{
                    变种花哨=这个；
                    var h = $('.fancybox-iframe').contents().find('html').height();
                    var w = $('.fancybox-iframe').contents().find('html').width();
                    花式.宽度 = w;
                    花式.高度 = (h+50);
            }
        });

```

afterShow 方法之外的任何东西都没有给我正确的结果，即使是 beforeShow（这就是我想要的）。在显示花哨的盒子之前，是否有任何回调/jquery 组合可以实现这一点？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T19:06:23.633

您也可以使用`beforeShow`回调选项，但您可能需要取消所有转换（设置`nextSpeed`和`prevSpeed`到`0`）。

过渡速度似乎是使用回调创建跳跃效果`afterShow`或避免使用回调获得正确的值`beforeShow`。

您可能还需要更新到 fancybox 版本 v2.0.6。

此外，您还可以在不使用外部变量的情况下简化脚本，例如：

```
$(document).ready(function() {
 $("a.fancybox").fancybox({
  openEffect : 'elastic',
  closeEffect : 'elastic',
  fitToView: false,
  nextSpeed: 0, //important
  prevSpeed: 0, //important
  beforeShow: function(){
  // added 50px to avoid scrollbars inside fancybox
   this.width = ($('.fancybox-iframe').contents().find('html').width())+50;
   this.height = ($('.fancybox-iframe').contents().find('html').height())+50;
  }
 }); // fancybox
}); // ready 
```

在此处查看[演示](http://www.picssel.com/playground/jquery/getDimensionFromIframe_27may12.html)

# mechanicalturk - 在外部网站上运行 MTurk HIT

> ID：10769152
> 
> 赞同：35
> 
> 时间：2012-05-26T19:30:55.180
> 
> 标签：mechanicalturk

我正在实施一个网站，招募的 MTurk 工人将在该网站上执行任务。我计划使用 MTurk 任务招聘工人，我会将他们重定向到外部网站以进行实际工作。我有以下与此计划有关的问题。

1.  这种运行 HIT 的方法是否存在任何可预见的问题？如果是这样，我们如何减轻它们？

2.  我应该如何在我的外部站点上实施身份验证程序？例如，我如何确保来网站执行**特定任务**的人确实是之前在 MTurk 上**为该特定任务**招募的同一组人？

3.  当工人完成任务后，我应该如何根据他们的表现将付款程序与 MTurk 整合？例如，假设工人在我的外部网站上完成任务后被欠 3 美元，我是否可以告诉 MTurk 以编程方式向他/她支付这笔款项？

如果这些细节很重要，外部站点将使用 Python 构建。

任何基于您使用 MTurk 的经验和见解的建议和意见将不胜感激！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-13T05:22:57.807

我正在考虑我的一个类似项目。我自己作为一名工人进行过实验。这是我的计划，希望对你有用。（我还没有实现它。它基于我作为工人参与的学术 HIT。）这里是：

A. 创建一个具有如下语言的模板：

```
1\. Please open this web site in a new browser window:
   http://your-url.xyz.blah/tasks/${token}
2\. Read and follow the instructions there.
3\. After completing the task, you will receive a confirmation code. Paste 
   it here: [________] 
```

B. 为您的 Mechnical Turk 数据文件创建一些随机标记：

```
1A1B43B327015141
09F49F2D47823E0C
B5C49A18B3DB56F4
4E93BB63B0938728
CCE7FA60BFEB3198
... 
```

（从您的应用程序生成这些令牌；它需要交叉引用它们。）

C. 你的应用程序从 URL 中提取令牌，查找任务，并执行它需要做的任何事情。我个人不担心人们偶然发现 URL，因为它是一次性使用令牌。

D. 用户在外部网站完成任务后，外部应用程序给出确认码。确认码应该是随机且不透明的。只有您的应用程序会知道任何特定代码是否对应于正确或不正确的答案。事实上，如果您愿意，甚至可能无法实时确定正确性——它可能是多个提交的聚合和/或比较的结果。

E. 编写一些代码以编程方式进行交互。从 MTurk 结果中获取令牌和确认码，并确保它们与您的外部应用程序匹配。如果它们不匹配，则拒绝 HIT。如果它们匹配，请检查您的外部应用程序中的正确性并批准或拒绝。您可能会考虑奖金支付结构。

因此，要回答您的特定问题：

1.  我预计我描述的方法不会出现问题。也就是说，Mechanical Turk 既是一门艺术，也是一门科学。也许更多的艺术。写出好的问题并适当地付钱给 Turkers 是你必须结合常识、市场研究和实验来解决的问题。

2.  见上文 (C)。令牌设计为只能使用一次。使用足够长的令牌，碰撞的概率变得非常低。

3.  见上文 (E)。[Mechanical Turk 开发人员指南](http://docs.amazonwebservices.com/AWSMechTurk/latest/AWSMechanicalTurkRequester/Welcome.html?r=8891)是一个很好的起点。

请分享您的结果。或者让 Turkers 向 StackOverflow 发送数百张明信片。:)

笔记：

*   我目前正在探索资格测试。我怀疑它们可能非常有用。

*   我想在我的外部应用程序中获得一个 Turker 的 Worker ID，但我还没有弄清楚那部分。我正在阅读它；例如：[通过 assignmentId 获取 workerId](https://stackoverflow.com/questions/4521846/getting-workerid-by-assignmentid)

*   我正在考虑使用 API 中的[ExternalQuestion](http://docs.amazonwebservices.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_ExternalQuestionArticle.html)功能：“...您可以使用“外部”问题在您自己的网站上托管问题。...带有外部问题的 HIT 会显示您网站上的网页在 Worker 的 web 浏览器的一个框架中。您的网页显示一个表单供 Worker 填写和提交。Worker 使用您的表单提交结果，您的表单将结果提交回 Mechanical Turk。使用您的网站显示表单让您的网站可以控制问题的出现方式和答案的收集方式。”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-13T05:54:59.667

您可能还会发现[PsiTurk](https://github.com/johnmcdonnell/psiTurk)很有用：“PsiTurk 是一个开放平台，用于在 Amazon 的 Mechanical Turk 上进行自定义行为实验。......它旨在提供运行实验所需的大部分后端机器。它使用 AMT 的外部问题 HIT类型，意思是你可以使用任何网站收集数据。只要你能把你的实验变成一个网站，你就可以用 PsiTurk 运行它！”

# jquery - 如何使用 jquery 解析 json 对象

> ID：10769156
> 
> 赞同：6
> 
> 时间：2012-05-26T19:31:06.557
> 
> 标签：jquery, json

我认为这是一个非常基本的问题，但是我花了几个小时寻找没有运气的答案，我有以下 json 对象（使用 play!Framework 生成）

```
{
    "preg.pregunta": [{
        "message":"Debes escribir una pregunta",
        "key":"preg.pregunta",
        "variables":[]
    }],
    "preg":[{
        "message": "validation.object",
        "key":"preg",
        "variables":[]
    }]
} 
```

这是我的 jquery 代码

```
$.ajax({
    type: $target.attr('method'),
    data: dataString,
    url:$target.attr('action'),
    dataType: "json",
    beforeSend: function() {
        //some stuff
    },
    success:function(response){
        //some stuff
    },
    error: function(response){
        //I want to use the json response here.
    }
}); 
```

我想了解所有内容`preg.pregunta`（`message`和`key`价值观）

有什么帮助吗？

**更新**：好吧，我没有足够的声誉来回答自己，这是我迄今为止发现的。

好吧，也许这会更明显，或者我必须多学习一点；我发现 jQuery 无法正确解析 JSON 响应，如果它带有 HTTP 错误（在本例中为 400）。

有人知道为什么这种行为吗？

我刚刚在`success`处理程序中测试了这段代码并且运行良好！

```
$.ajax({
  type: $target.attr('method'),
  data: dataString,
  url:$target.attr('action'),
  dataType: "json",
  beforeSend: function() {
  },
  success:function(response){
    //It is working perfectly!
    $.each(response,function(object){ //first loop of the object
      $.each(response[object],function(values){ //looping inside arrays
        console.log(response[object][values].key) //getting value "key"
        console.log(response[object][values].message) //getting value "message"
      });
    })
  },
  error: function(response){
    //nothing happens here
  }
}); 
```

更新 2。

搜索了大约 2 小时后，我找到了一个简单的解决方案：

```
error: function(response){
//Note the jQuery.parseJSON function
var response = jQuery.parseJSON(response.responseText);
  $.each(response,function(object){
    $.each(response[object],function(values){
      console.log(response[object][values].key)
      console.log(response[object][values].message)
    });
  })
} 
```

说明：当使用错误处理程序时，jQuery 返回一个描述错误的复杂对象，responseText 包含从服务器检索到的数据，因此，您必须使用 parseJSON 函数对其进行解析。

希望这可以帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:34:02.967

试试这个：

```
error: function(response) {
    var pregunta = response["preg.pregunta"][0].message;
    var key = response["preg.pregunta"][0].key;
}, 
```

如果`preg.pregunta`数组中有多个值，则需要循环并用`[0]`迭代变量替换。

另外，我不太明白为什么您只想访问`error`处理程序中的响应？

最后，访问 JSON 的代码是原生 javascript。这是因为当您收到响应时，它已被转换为 POJS 对象，不需要 jQuery。

# jquery - jQuery 重新调用 $(document).ready()？

> ID：10769158
> 
> 赞同：0
> 
> 时间：2012-05-26T19:31:11.323
> 
> 标签：jquery, ajax

我正在尝试在 ajax 回调中重新调用文档的 ready() 函数中的代码。这可能吗？

```
$(document).ready(function() {
  // page initialization functions
  alert('hi');
});

// this gets called from a button click on the screen
function reauth() {
  // logic here omitted for brevity
  $.post("/Base/reauth", $("#reauthForm").serialize(), function(data) {
    if (data.result != null) {
      $(document).ready();  // <-- this does not invoke the alert('hi');
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T19:36:19.793

```
function sayHi() {
  alert('hi');
}

$(document).ready(function() {
  // page initialization functions
  sayHi();
});

// this gets called from a button click on the screen
function reauth() {
  // logic here omitted for brevity
  $.post("/Base/reauth", $("#reauthForm").serialize(), function(data) {
    if (data.result != null) {
      sayHi();
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T19:35:13.577

你不能在`ready`块内放一个函数吗：

```
function something() {
   alert('hi');
}

$(document).ready(function() {
   something();
}); 
```

然后再打电话？

# php - Jquery UI - 多个对话框

> ID：10769161
> 
> 赞同：0
> 
> 时间：2012-05-26T19:31:42.050
> 
> 标签：php, jquery, jquery-ui

我已经像这样初始化了我的 jquery ui，我可以让它在一个对话框中工作：

```
 <script>
// increase the default animation speed to exaggerate the effect
$.fx.speeds._default = 1000;
$(function() {
    $( "#treatment" ).dialog({
        autoOpen: false,
        show: "blind",
        hide: "explode"
    });

    $( "#opener" ).click(function() {
        $( "#treatment" ).dialog( "open" );
        return false;
    });
});
</script> 
```

但是，我有一个表格，其中一列的“治疗”用户必须单击“更多信息”才能了解更多信息，到目前为止，我已将其编码如下：

```
 foreach($foo['MedCond'] as $row)
    { 
    ?>

            <tr>
<td><b>Name:</b></td>
<td><b>Symptoms:</b></td>
<td><b>Treatment:</b></td>
<td><b>Effective From:</b></td>
<td><b>Effective To:</b></td>
    </tr>
        <tr>
        <td><?php echo $row['Name'];?></td>
        <td><?php echo $row['Symptoms'];?> </td>
        <td><div id="treatment"><p><?php echo $row['Treatment'];?></p></div><button id="opener">More info</button></td> [...] 
```

因此，对于治疗的每一行，都有一个相应的对话框打开按钮，一旦他们单击该按钮，就会显示有关该特定治疗的详细信息。我已经让这个工作了，但是当超过一个共享相同的“治疗 div”时它会失败。

我怎样才能让它工作。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:35:49.740

使用类而不是 Id。表示使用 $( ".treatment" ).dialog 并写入 div class="treatment"。开瓶器的相同程序

# javascript - 我不了解 Node.js 架构

> ID：10769162
> 
> 赞同：6
> 
> 时间：2012-05-26T19:31:44.437
> 
> 标签：javascript, python, node.js

我们正在考虑`node.js`作为一个网络平台。但我有一个关键问题，因为我认为我没有得到以下架构`node.js`：

1.  看起来默认情况下您被迫使用他们的自定义 HTTP 服务器，没有 WSGI 或任何东西？！

2.  看起来当在响应中做一些“真正的计算”（不仅仅是一些 I/O）时，所有的基础设施都被搞砸了，并且`ab -n ... -c ...`与 Python 相比，每个请求返回大量的时间——Pyramid/Flask 或其他什么？！

3.  所以，作者`node.js`假设我们只做 I/O 还是我错过了一些非常基本的东西？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-26T19:38:10.717

1.  您自相矛盾：“默认”和“强制”不兼容。你可以使用任何你想要的 HTTP 库。核心`http`模块可能被认为是“默认”模块，但没有什么能阻止您使用另一个模块。

2.  JavaScript 是一种单线程语言，而 Node.js 是一种 JavaScript 运行时，而不是像许多其他语言那样产生一个每次响应的线程的 Web 服务器。如果你愿意，你仍然可以为每个响应创建一个线程，并且有一些基于 Node 构建的项目可以做到这一点，但是你失去了 Node 的大部分好处。如果您正在为响应 Web 请求而进行大量计算（并且您有愿意等待您执行此操作的客户），您应该通过许多可用的解决方案之一（网络工作者、线程-a-go-go、child_process 等）。

3.  Node.js 的作者假设您正在编写一个 Web 服务器。本质上，您在 Web 服务器中所做的大多数事情都是 IO，无论该 IO 涉及文件系统、数据库，甚至是用于在其他济贫院进程上排队计算密集型任务的消息总线。

查看您的问题，如果您尝试将它与 Python 和 WSGI 集成，您似乎对 Node.js 是什么有一个基本的误解。Node.js 用于编写 Web 服务器，所以尝试使用它......与 Python 一起使用？在 Python 里面？（我真的不确定你想要完成什么）没有什么意义。

如果您的任务不仅受 I/O 限制，那么您可能不应该将这些任务托管在与 Web 服务器相同的机器上。因此，在 3 中简要提到了消息总线方法。但是，如果您决心这样做，并且确定这些任务不会占用所有 CPU，您应该确定此类任务的流行频率。如果它们出现在每个 Web 请求中，则不应使用 Node.js；您正在放弃其最基本的优势，只留下次要的优势（例如围绕它成长的生态系统）。如果它们很少见，那么您应该通过 2 中可用的许多方法在单独的线程中分离它们。

相关：[https ://gist.github.com/2794861](https://gist.github.com/2794861)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T19:39:06.843

如果您是基于 Python 的商店，您可能还想考虑[Twisted](http://twistedmatrix.com)，它是一个用 Python 编写的事件驱动框架。Twisted 还能够将长时间运行的阻塞工作推迟到线程。

最重要的是你首先定义你需要什么以及你的问题是什么。不要仅仅因为每个人都在谈论它而跳上新奇的事物。查看您的需求并使用可以解决它们的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T19:44:34.897

我看到有一个以 WSGI 为模式的 node.js 模块：[Strata](http://search.npmjs.org/#/strata)

此外，您可以将密集计算卸载到子进程：[子进程](http://nodejs.org/api/child_process.html)

# java - 使用 JPA 2 TypedQuery 进行更新

> ID：10769164
> 
> 赞同：2
> 
> 时间：2012-05-26T19:32:05.603
> 
> 标签：java, jpa-2.0

假设一个简单的 JPA 实体类是这样的：

```
@Entity(name="TASK")
public class Task implements Serializable {
    /* getters/setters omitted for brevity */

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @Temporal(javax.persistence.TemporalType.TIMESTAMP)
    private Date done;
} 
```

如何使用 JPA 2`TypedQuery`和`CriteriaQuery`元模型来执行相当于简单`UPDATE TASK SET done = ? WHERE id = ?`SQL 查询的操作？我在网上能找到的一切都会导致像这样使用 JPA

```
Query q = em.createQuery(
  "UPDATE TASK SET done = :date WHERE id = :id");
q.setParameter(/* set date and id */);
q.executeUpdate(); 
```

这可以用 a`TypedQuery`代替吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:56:03.567

您应该执行此类操作的 JPA 方式是让 CriteriaQuery 选择要修改的项目，并使用纯 Java 循环遍历它们，然后使用`merge()`方法修改它们。就像是：

```
Date d;
CriteriaQuery<Task> cq = cb.createQuery(Task.class);
...
TypedQuery<Task> tq = em.createQuery(cq);
List<Task> tasks = tq.getResultList();
for (Task task : tasks) {
    task.setDone(d);
    em.merge(task);
}
// or
Task task = tq.getSingleResult();
task.setDone(d);
em.merge(task); 
```

请参阅此[答案](https://stackoverflow.com/a/3623222/870122)以获取更多参考。

# cocoa - 如何重绘 NSTableView(NSScrollView) 聚焦？

> ID：10769165
> 
> 赞同：1
> 
> 时间：2012-05-26T19:33:07.550
> 
> 标签：cocoa, drawing, nstableview

我需要重写什么函数来在 NSTableView 周围绘制自定义焦点环（或者我需要子类 NSScrollView 包含表的内容）？可能有一些自定义对焦环绘图的例子吗？

# .net - 我做了一个 HTTPWebRequest 来登录，但是在我尝试访问数据后，我会提示我再次登录？

> ID：10769167
> 
> 赞同：1
> 
> 时间：2012-05-26T19:33:16.543
> 
> 标签：.net, vb.net, automation, httpwebrequest

好的，伙计们，我最近下载了 LiveHTTPHeaders ......我正在尝试编写代码，以便我可以登录到这个网站：[http](http://stproperty.sg) ://stproperty.sg ..这是我现在的代码：

```
Imports System.Net 
```

导入 System.Text 导入 System.IO

公共课 STclass

```
Dim logincontainer As CookieContainer
Public Sub check()
    Dim request As HttpWebRequest = DirectCast(WebRequest.Create("http://www.stproperty.sg/p/agent/agentad/indexmode=delete"), HttpWebRequest)
    request.CookieContainer = logincontainer

    Dim response As HttpWebResponse = DirectCast(request.GetResponse, HttpWebResponse)

    Dim reader As New StreamReader(response.GetResponseStream)

    Dim theresult As String = reader.ReadToEnd

    Form1.WebBrowser1.DocumentText = theresult

End Sub
Public Sub delete()

    Dim tempCookies As New CookieContainer

    Dim postdata As String = "tab=active&AdForm%5BPTYTYP%5D=&AdForm%5BLISTYP%5D=&active_check%5B%5D=" & Form1.TextBox2.Text & "&massaction=2"

    Dim enconding As New UTF8Encoding

    Dim byteData As Byte() = enconding.GetBytes(postdata)

    Dim postrequest As HttpWebRequest = DirectCast(WebRequest.Create("http://www.stproperty.sg/p/user/userad/expireListing"), HttpWebRequest)

    postrequest.Method = "POST"
    postrequest.KeepAlive = True
    postrequest.CookieContainer = logincontainer

    postrequest.ContentType = "application/x-www-form-urlencoded"
    postrequest.Host = "www.stproperty.sg"
    postrequest.Referer = "http://www.stproperty.sg/p/user/userad/index"
    postrequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0"

    postrequest.ContentLength = byteData.Length

    Dim postreqstream As Stream = postrequest.GetRequestStream
    postreqstream.Write(byteData, 0, byteData.Length)
    postreqstream.Close()

    Dim postresponse As HttpWebResponse
    postresponse = DirectCast(postrequest.GetResponse, HttpWebResponse)

    'logincontainer.Add(postresponse.Cookies)

    ' logincookie = tempCookies

    Dim postreader As New StreamReader(postresponse.GetResponseStream)
    Dim thepage As String = postreader.ReadToEnd

    Form1.WebBrowser1.DocumentText = thepage

End Sub

Public Sub login()

    Dim tempCookies As New CookieContainer
    Dim browser As String = "Mozilla/5.0 (Windows; U; Windows NT 6.1; ru; rv:1.9.2.3) Gecko/20100401 Firefox/4.0 (.NET CLR 3.5.30729)"

    'get facebook login cookies

    Dim firstrequest As HttpWebRequest = WebRequest.Create("http://sphreg.st701.com/RegAuth2/propertyLogin.html?svc=cpy&goto=http%3A%2F%2Fwww.stproperty.sg%2Faccount%2Fdologin")
    firstrequest.CookieContainer = New CookieContainer
    firstrequest.UserAgent = browser
    Dim firstresponse As HttpWebResponse = firstrequest.GetResponse
    tempCookies.Add(firstresponse.Cookies)

    Dim postData As String = "IDToken1=adrian8nairda%40gmail.com&IDToken2=123456&iPSPCookie=false&goto=http%3A%2F%2Fwww.stproperty.sg%2Faccount%2Fdologin"
    Dim encoding As New UTF8Encoding
    Dim byteData As Byte() = encoding.GetBytes(postData)
    Dim postReq As HttpWebRequest = DirectCast(WebRequest.Create("https://sphauth.st701.com/am/UI/Login"), HttpWebRequest)
    postReq.Method = "POST"
    postReq.KeepAlive = True
    postReq.CookieContainer = tempCookies
    postReq.ContentType = "application/x-www-form-urlencoded"
    postReq.Referer = "http://sphreg.st701.com/RegAuth2/propertyLogin.html?svc=cpy&goto=http%3A%2F%2Fwww.stproperty.sg%2Faccount%2Fdologin"

    postReq.Host = "sphauth.st701.com"
    postReq.UserAgent = browser
    postReq.ContentLength = byteData.Length

    'post data to facebook
    Dim postreqstream As Stream = postReq.GetRequestStream()
    postreqstream.Write(byteData, 0, byteData.Length)
    postreqstream.Close()

    'get cookies and store them
    Dim postresponse As HttpWebResponse
    postresponse = DirectCast(postReq.GetResponse(), HttpWebResponse)
    tempCookies.Add(postresponse.Cookies)

    logincontainer = tempCookies

    'check it was all posted correctly
    Dim postreqreader As New StreamReader(postresponse.GetResponseStream())
    Dim thepage As String = postreqreader.ReadToEnd
    Form1.RichTextBox1.Text = thepage
    Form1.WebBrowser1.DocumentText = Form1.RichTextBox1.Text
    Form1.WebBrowser1.ScriptErrorsSuppressed = True
End Sub 
```

结束类

好的..正如你所看到的，我有一个登录功能......我将页面加载到浏览器中，我可以看到浏览和东西..但是当我尝试删除我的一个列表时我不能，我提示登录..即使我将 cookie 存储到 logincontainer 并在尝试删除之前加载它们。有什么帮助吗？

# algorithm - 评估表达式树

> ID：10769174
> 
> 赞同：3
> 
> 时间：2012-05-26T19:34:01.533
> 
> 标签：algorithm, graph, tree, expression-trees, directed-acyclic-graphs

Skiena 关于算法的书包含以下问题：

1) 在给定 n 个节点的情况下，在 O(n) 时间内评估作为二叉树给出的表达式。

2) 在 O(n+m) 时间内评估作为 DAG 给出的表达式，给定 DAG 中的 n 个节点和 m 个边。

![在此处输入图像描述](../Images/9f77f075b5706dae665ef4015fa8f4db.png)

对于第一个问题，我可以想办法：

```
evaluate(node) {
     if(node has children){
          left_val = evaluate(node->left);
          right_val = evaluate(node->right);

          // find operation symbol for node and use it as
          // val = left_val operation right_val

          return val;
     }
     else {
          return node_value;
     }
} 
```

由于我们访问每个节点一次，因此需要 O(n) 时间。

由于这本书没有解决方案，任何人都可以告诉这是否正确？

也有人可以为第二个问题提出解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T19:43:08.637

第一种方式对我来说看起来不错。

对于 DAG，如果您可以修改树以将缓存值添加到每个节点，则可以使用相同的算法并稍作调整，以便在操作员节点具有缓存值时不递归。这应该是 O(n+m) 时间（每个节点最多一次算术运算，每个边最多一次指针查找）。明确地：

```
evaluate(node) {
     if (node has value) {
          return node->value;
     } else {
          left = evaluate(node->left);
          right = evaluate(node->right);

          // find operation symbol for node and use it as
          // val = left_val operation right_val

          node->value = val;
          return val;
     }
} 
```

# sass - 制作精灵时，指南针在图像前面投掷正斜线

> ID：10769179
> 
> 赞同：5
> 
> 时间：2012-05-26T19:34:16.880
> 
> 标签：sass, compass-sass, sprite

我正在使用 Compass 创建精灵。正在创建精灵，但 css 输出指向图像目录的错误位置。

输出是：

```
.menu-sprite, .menu-about, .menu-art, .menu-drum, .menu-links, 
.menu-music, .menu-science, .menu-writing {
    background: url('/images/menu-sb7e36b009c.png') no-repeat;
} 
```

但我希望它是：

```
.menu-sprite, .menu-about, .menu-art, .menu-drum, .menu-links, 
.menu-music, .menu-science, .menu-writing {
    background: url('images/menu-sb7e36b009c.png') no-repeat;
} 
```

这是我的 confib.rb 设置：

```
http_path = "/"
css_dir = "."
sass_dir = "sass"
images_dir = "images"
javascripts_dir = "js" 
```

这是我在我的 scss 文件中调用精灵的方式：

```
@import "compass/utilities/sprites/base";
@import "menu/*.png";
@include all-menu-sprites; 
```

我究竟做错了什么？如何删除图像前面的第一个斜线？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T06:44:01.657

默认情况下，指南针对所有资产使用绝对路径。

要更改此行为，请将此行添加到您的 config.rb：

```
relative_assets = true 
```

否则，您还可以更改“http_path”选项以指向您的项目站点在部署服务器上的位置。

# android - 位图在 Android 中是如何存储在内存中的？

> ID：10769188
> 
> 赞同：2
> 
> 时间：2012-05-26T19:35:58.953
> 
> 标签：android, android-canvas

一直没能找到这个。

[位图](http://developer.android.com/reference/android/graphics/Bitmap.html)在 Android 中是如何存储在内存中的？更具体地说，我正在寻找的是，它是逐像素存储信息，还是使用任何类型的算法来减少存储像素的数量，例如存储单个像素和重复多少次的数字连续。我想知道这一点，因为我们无法将我们想要的所有图像都放入我们的游戏中。如果它确实使用某种算法，那么我们可以对原始图像做一些事情来减少内存消耗，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:41:56.643

位图是压缩存储的，但是如果不在某个点组装像素，您几乎无法显示位图。您最好的选择可能是保存有限的 CPU 堆并将图像作为压缩的 OpenGL ES 纹理推送到 GPU。

附加：看看[Displaying Bitmaps Efficiently](http://developer.android.com/training/displaying-bitmaps/index.html)。如果有帮助，还可以[回收您的位图。](https://stackoverflow.com/q/3823799/517561)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T19:39:18.347

虽然实现*可能会*选择使用**RLE**将位图存储在内存中，但我非常怀疑是否会这样做，因为使用它们会效率低下。

在 Android 3.0 及更高版本上，您可以请求更大的堆。

# objective-c - NSString intValue 变形实际数字

> ID：10769191
> 
> 赞同：1
> 
> 时间：2012-05-26T19:36:18.770
> 
> 标签：objective-c, cocoa-touch, nsstring, integer

我正在制作一个采用 Flickr 图片 URL 并返回图片 ID 的基本方法。我将方法传递给`NSString` `@"http://farm6.staticflickr.com/5183/5629026092_c6762a118f"`.

目标是返回 int: `5629026092`，它位于图像的 URL 中并且是图像的 ID。

这是我的方法：

```
-(int)getImageIDFromFlickrURL:(NSString *)imageURL{
    NSArray *objectsInURLArray = [imageURL componentsSeparatedByString:@"/"];
    NSString *lastObjectInFlickrArray = [objectsInURLArray lastObject];
    NSArray *dirtyFlickrIdArray = [lastObjectInFlickrArray componentsSeparatedByString:@"_"];
    NSString *flickIDString = [dirtyFlickrIdArray objectAtIndex:0];
    NSLog(@"flickr id string: %@",flickIDString);
    int flickrID = [flickIDString intValue];
    NSLog(@"id: %i",flickrID);
    return flickrID;
} 
```

控制台中的输出是：

```
2012-05-26 13:30:25.771 TestApp[1744:f803] flickr id string: 5629026092
2012-05-26 13:30:25.773 TestApp[1744:f803] id: 2147483647 
```

为什么调用会`intValue`变形实际数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:42:07.660

改用`long long`，您的数量大于`int`可以处理的数量（最大值`2147483647`，您可以在第二个日志中看到）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T20:25:16.187

您的值太大而无法以 32 位表示。您可以存储在有符号 32 位整数 (int) 中的最大值是 2147483647。对于无符号整数，它是 4294967295。您需要转换为 long long 整数来表示 5629026092 一样大的数字。

您可能需要为此创建一个数字格式化程序。我不是数字格式化程序方面的专家，并且总是必须挖掘文档才能弄清楚如何使用它们。

我刚试过，这段代码有效：

```
 NSString *numberString = @"5629026092";

  NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];

  NSNumber *number = [formatter numberFromString: numberString];
  long long value = [number longLongValue];
  NSLog(@"%@ = %qi", numberString, value);
  [formatter release]; 
```

您也可以将字符串转换为 C 字符串并使用 scanf，想想看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T19:43:03.803

Easy ^^: INT_MAX int 类型变量的最大值。2147483647

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T23:11:47.660

我发现这是一种方便的方法：

```
NSString *flickIDString = [dirtyFlickrIdArray objectAtIndex:0]; // read some huge number into a string

// read into a NSNumber object or a long long variable. you choose
NSNumber *flickIDNumber = flickIDString.longLongValue;
long long flickIDLong = flickIDString.longLongValue; 
```

# c# - 当我关闭启动窗体时，如何防止应用程序终止？

> ID：10769193
> 
> 赞同：16
> 
> 时间：2012-05-26T19:36:22.703
> 
> 标签：c#, forms

我的项目中有两个表单：Form1 和 Form2。Form1 中有一个按钮，我想要做的是关闭 Form1 并在单击该按钮时显示 Form2。

首先，我试过

```
Form2 frm = new Form2();
frm.Show();
this.Close(); 
```

但随着 Form1 关闭，Form2 也关闭了。接下来，我尝试了

```
Form2 frm = new Form2();
frm.Show();
this.Hide(); 
```

但是有一个缺点是当 Form2 关闭时应用程序不会退出。所以，我不得不在 Form2 的 form_FormClosing 部分放入其他源。

嗯....我想知道这是否是正确的方法....那么，处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-26T20:02:41.640

Program.cs 中自动生成的代码是为了在启动窗口关闭时终止应用程序而编写的。您需要对其进行调整，使其仅在没有更多窗口时终止。像这样：

```
 [STAThread]
    static void Main() {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        var main = new Form1();
        main.FormClosed += new FormClosedEventHandler(FormClosed);
        main.Show();
        Application.Run();
    }

    static void FormClosed(object sender, FormClosedEventArgs e) {
        ((Form)sender).FormClosed -= FormClosed;
        if (Application.OpenForms.Count == 0) Application.ExitThread();
        else Application.OpenForms[0].FormClosed += FormClosed;
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T19:57:17.133

默认情况下，第一个窗体控制 Windows 窗体应用程序的生命周期。如果你想要几个独立的窗口窗体，你的应用程序上下文应该是一个独立于窗体的上下文。

```
public class MyContext : ApplicationContext
{
   private List<Form> forms;     

   private static MyContext context = new MyContext();

   private MyContext()
   {
      forms = new List<Form>();
      ShowForm1();
   }

   public static void ShowForm1()
   {
      Form form1 = new Form1();
      context.AddForm(form1);
      form1.Show();
   }

   private void AddForm(Form f)
   { 
      f.Closed += FormClosed;
      forms.Add(f);
   }

   private void FormClosed(object sender, EventArgs e)
   {
      Form f = sender as Form;
      if (form != null)
          forms.Remove(f);
      if (forms.Count == 0)
         Application.Exit();
   }          
} 
```

要使用上下文，请将其传递给 Application.Run（而不是表单）。如果要创建另一个 Form1，请调用 MyContext.ShowForm1() 等。

```
public class Program
{
   public void Main()
   {
      Application.Run(new MyContext());
   }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-26T19:45:41.430

你可以采取这种方式：

```
form2 f2=new form2()
this.Hide();
f2.Show(); 
```

希望对您有所帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-13T07:25:55.260

将其写入您的方法中，该方法在`FormClosing`事件发生时执行。

```
private void Form1_Closing(object sender, System.ComponentModel.CancelEventArgs e)
{
      // Display a MsgBox asking the user if he is sure to close
      if(MessageBox.Show("Are you sure you want to close?", "My Application", MessageBoxButtons.YesNo) 
         == DialogResult.Yes)
      {
         // Cancel the Closing event from closing the form.
         e.Cancel = false;
         // e.Cancel = true would close the window
      }
} 
```

# c# - 哪些 ORM 支持 SQL Server 2012

> ID：10769194
> 
> 赞同：2
> 
> 时间：2012-05-26T19:36:30.780
> 
> 标签：c#, orm, sql-server-2012

准备开始我的下一个项目并决定使用 SQL Server 2012。我使用 sql 2012 的原因是因为它现在支持我真正需要的序列。在我的研究中，我发现[llblgen](http://www.llblgen.com/defaultgeneric.aspx)支持 sql server 2012。还有支持它的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:52:03.217

SauceDB 适用于 Sql 2012。http: [//sauce.codeplex.com](http://sauce.codeplex.com)

免责声明：我写的

# git - 无法并入主干

> ID：10769197
> 
> 赞同：0
> 
> 时间：2012-05-26T19:36:49.690
> 
> 标签：git, xcode4.3

我对我的分支进行了更改，当我尝试将分支合并到主干（主）时，我收到了以下错误消息：

![在此处输入图像描述](../Images/6814f94180738f7527234048719feee3.png)

我提交了所有更改，但我仍然无法合并。难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:41:34.663

您并没有真正提交所有更改。除非您使用 -a 选项，否则 Git commit 只会提交阶段性更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:05:26.450

打开终端，转到存储库文件夹。运行：

```
git status 
```

它应该显示未分级的更改。手动添加它们或一次添加所有它们：

```
git add . 
```

然后提交

```
git commit -m "Foo" 
```

# c - 将标准输入写入文件

> ID：10769205
> 
> 赞同：4
> 
> 时间：2012-05-26T19:37:32.467
> 
> 标签：c, stream, pipe, stdin

我正在尝试将标准输入写入文件，但由于某种原因，我一直在读取零字节。

这是我的来源：

```
#include <stdio.h>
#include <stdlib.h>

#define BUF_SIZE 1024

int main(int argc, char* argv[]) {

    if (feof(stdin))
        printf("stdin reached eof\n");

    void *content = malloc(BUF_SIZE);

    FILE *fp = fopen("/tmp/mimail", "w");

    if (fp == 0)
        printf("...something went wrong opening file...\n");

    printf("About to write\n");
    int read;
    while ((read = fread(content, BUF_SIZE, 1, stdin))) {
        printf("Read %d bytes", read);
        fwrite(content, read, 1, fp);
        printf("Writing %d\n", read);
    }
    if (ferror(stdin))
        printf("There was an error reading from stdin");

    printf("Done writing\n");

    fclose(fp);

    return 0;
} 
```

我正在跑步`cat test.c | ./test`，输出只是

```
About to write
Done writing 
```

似乎读取了零字节，即使我正在管道很多东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T19:45:52.477

你有两个整数参数要`fread()`反转。你告诉它一次填充缓冲区，或者失败。相反，您想告诉它读取单个字符，最多 1024 次。反转两个整数参数，它将按设计工作。

# regex - 如果某个单词出现在前面，则丢弃正则表达式匹配

> ID：10769209
> 
> 赞同：2
> 
> 时间：2012-05-26T19:38:55.100
> 
> 标签：regex, regex-negation

我对正则表达式完全没有经验，所以如果这是一个简单的问题，我深表歉意，但我无法在任何地方找到任何答案。我正在尝试匹配形式的字符串，`[some numbers] [some letters]`但`123 apples`我不想在它们前面有单词时匹配它们`about`（例如`about 10 apples`不应该匹配）。

我尝试过使用`(?<!about )(\d[,\.\d]*) ([a-zA-Z]+)`，但这显然不起作用，因为它只是在某种程度上移动了比赛（例如`about 12 apples`匹配为`2 apples`）。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:41:21.137

我以前遇到过这个问题。试试这个：

```
(?<!about )(\b\d[,\.\d]*\b) ([a-zA-Z]+) 
```

匹配零字符的`\b`单词边界（空格后跟字母数字，反之亦然）。它将拒绝将“about 123 apples”匹配为“23 apples”，因为“2”之前没有单词边界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T19:45:30.603

你是如此接近： `(?<!about \d*)(\d[,\.\d]*)`。增加`\d*`你的负面看法。

# iphone - 覆盖 Titanium 中导航栏的 always-top 属性

> ID：10769219
> 
> 赞同：2
> 
> 时间：2012-05-26T19:40:10.543
> 
> 标签：iphone, navigation, titanium, overriding

在 iPhone 的 Titanium 中，是否可以在导航栏上方显示某些内容 - 或者只是禁用导航栏的 always-top 属性？

***这就是它现在的样子***： ![应用程序的实际状态](../Images/0a9b31ad83fa6f1d1bc33542b4f48a97.png)

***这是实际 Photoshop 模型的一部分***： ![Photoshop样机](../Images/a18f29876531c1a9f5ae57f1beb96828.png)

调用它的代码片段是：

```
var win1 = Titanium.UI.createWindow({
        title: 'Home',
        navBarHidden: false,
        barImage: 'topbar.png',
        backgroundImage: 'bga.png'
});
c = Titanium.UI.createImageView({
        image: 'logobar.png',
        top: -13,
        right: 7,
        width: 74,
        height: 108,
        exitOnClose: !0
})
try {
        win1.add(c);
        c.animate({zIndex:3});
        win1.addEventListener('focus', function () {
                Titanium.App.Analytics.trackPageview('/win1')
        });
}catch(e){
        alert(e);
} 
```

try-catch 是因为我不相信 .animate 的存在而实现的，但是它确实存在但不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T00:25:45.210

**答案（或者可能不是它应该是什么样的）**

Titanium 本身不支持操纵 zIndex 或更确切地说是 onTop 属性的功能。但是，我找到了一种允许显示叠加层的解决方法。

![截图：它会是什么样子](../Images/d05ed898fcca9374a3b8de41a1af4929.png)

此解决方法通过 Titanium 处理窗口的方式起作用。首先，我们定义主窗口（例如win1）并填充它。然后我们创建一个助手窗口（例如win1a）并将ImageView 分配给它。然后我们将新窗口放在另一个窗口的顶部，瞧。

```
 var win1 = Titanium.UI.createWindow({
            title: "*******",
            navBarHidden: false,
            barImage: 'topbar.png',
            backgroundColor: "gray",
    });
    var win1l = Titanium.UI.createWindow({
            title: "",
            navBarHidden: true,
            height: 84,
            width: 64,
            right: 0,
            top: 0
    });
// Inject ImageView into top-most window
    win1l.add(Titanium.UI.createImageView({
            image: "logobar.png",
            top: 2,
            right: 5,
            width: 60.3, //74, // 74/108 = 0.6851851852
            height: 88, //108, // ((108-20)*(74/108)) = 60.29629 ~ 60.3
            exitOnClose: !0
    }));
    win1l.open(); 
```

我希望这可能对您有所帮助。

谢谢，-凯南。

# c# - C# Dispose : 何时处理以及谁处理它

> ID：10769221
> 
> 赞同：2
> 
> 时间：2012-05-26T19:40:37.123
> 
> 标签：c#, dispose

我在处理和完成之间变得紧张。这是我的示例代码：

```
public class Car:IDisposable
    {
        public string name;
        public Car()
        {
            name = "My Car";
        }
        public void Dispose()
        {
            Console.WriteLine("This object has been disposed");
        }
    }
public static void Main()
        {
            Car anotherCar;
            using (var car = new Car())
            {
                anotherCar = car;
                Console.WriteLine("Before dispose. Name is: "+anotherCar.name);
            }

            Console.WriteLine("After dispose. Name is: "+anotherCar.name);

        } 
```

结果是：

```
Before dispose. Name is My Car
This object has been disposed
After dispose. Name is My Car 
```

我的问题是：因为 C# 会在 之后自动处理对象`using{}`，所以我认为在“处理后”行。`anotherCar.name`必须为 NULL。为什么它仍然是“我的车”？

我的另一个问题是：我的书说你不应该`GC.Collect()`出于某种原因使用，其中之一就是性能。那么，谁处置对象？如果那也是垃圾收集器，那么我认为`dipose()`也有相同的性能问题`finalizer()`

谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T19:47:01.820

我认为您误解了 Dispose 的实际作用。它不会破坏您的对象、将任何内容设置为 null 或以其他方式执行任何类型的魔法。当您使用 using 语句时，这只是保证将调用 Dispose。您在 Dispose 方法中所做的决定了对象的行为。不是语言或 .NET 框架。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T19:47:25.040

如果再次查看代码，您会立即意识到，简单地将 Dispose() 方法放在一个类上并实现 IDisposable 并没有添加任何幕后魔法，它只是一个普通方法，增加了调用它的便利性using 语句的结尾。

通常在 Dispose 方法中，您应该注意清除您想要自己释放的任何（非托管）资源，例如关闭数据库连接或打开以读取/保存的文件......

Microsoft 有一个关于正确实现 IDisposable的很好的[帮助页面。](http://msdn.microsoft.com/en-us/library/ms244737%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T17:16:43.157

.net 中的对象通常是类型引用以及该类型所需的公共和私有字段的组合（有一些特殊情况，如数组和字符串）。一旦创建，.net 中的对象将继续存在，只要存在对它的某种形式的引用。一旦不再有对对象的任何引用，if 将有效地停止存在；它占用的任何内存都将只是未使用的内存，可以在下一次垃圾收集时重用。

的目的`Dispose`不是摧毁一个对象，而是让一个对象在它消失之前对它*自身之外的事物执行必要的动作。*举个简单的例子，假设一个对象请求远程服务器授予它对文件的独占访问权限；服务器提供一个令牌，并承诺只授予提供该令牌的代码访问权限。如果对象只是简单地消失，外部服务器将保持文件锁定，以独占使用持有不再存在的令牌的代码。换句话说，该文件将永远（*）任何人都无法使用。向请求令牌的对象添加`Dispose`方法将允许对象向服务器发送“好的——我已完成文件 XYZ1493”消息，从而使该文件可用于其他实体。

Note that the Dispose method doesn't actually destroy the file object. It may prompt the object to erase some of the data stored in its fields, but the object will continue to exist as long as any reference to it exists, and will cease to exist thereafter. There are some cases where calling Dispose on an object may hasten the demise of the object itself, by asking other outside objects which hold references to it to destroy those references. Even in those cases, however, the purpose of Dispose is to allow objects to issue requests to other things.

# java - LWJGL OpenGL - 从 3d 点到屏幕中心的线

> ID：10769223
> 
> 赞同：1
> 
> 时间：2012-05-26T19:40:49.887
> 
> 标签：java, opengl, lwjgl

有没有一种简单的方法可以从 3D 点画一条线，在这种情况下，它是 0、0、0，到屏幕的中心？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:53:57.887

您可以使用[gluUnProject](http://lwjgl.org/javadoc/org/lwjgl/util/glu/Project.html)计算屏幕中心的 3D 坐标（在给定深度），然后在两个 3D 点之间画一条线。

# javascript - 离开窗口选项卡时堆叠（重叠）的图像

> ID：10769229
> 
> 赞同：1
> 
> 时间：2012-05-26T19:41:40.343
> 
> 标签：javascript, jquery, html, css, browser

我有跨窗口移动的图像（在 2 行中），当我离开页面选项卡时，然后返回到它所有的图像都堆叠在一起。
JS 代码（[感谢 jfriend00](https://stackoverflow.com/users/816620/jfriend00)）

```
function startMoving(img) {

        var img$ = $(img);
        var imgWidth = img$.width();
        var screenWidth = $(window).width();
        var amount = screenWidth - parseInt(img$.css("left"), 10);
        // if already past right edge, reset to 
        // just left of left edge
        if (amount <=0 ) {
            img$.css("left", -imgWidth);
            amount = screenWidth + imgWidth;
        }
        var moveRate = 300;   // pixels per second to move
        var time = amount * 1000 / moveRate;
        img$.stop(true)
        .animate({
            left: "+=" + amount
        }, time, "linear", function() {
            // when animation finishes, start over
            startMoving(this);
        })

}

$(document).ready(function() {
    // readjust if window changes size
    $(window).resize(function() {
        $(".thumbnails").each(function() {

            startMoving(this);
        });
    });
}); 
```

html代码：

```
 <div id="thumbnails_wrapper">
          <img src="http://d17g46tfi0dv3u.cloudfront.net/8294/148294_e492b405eed74bc3ba9f994affac423c.jpg" onload="startMoving(this)" style="top:0px;left:100px" class="thumbnails"/>
          <img src="http://d17g46tfi0dv3u.cloudfront.net/8294/148294_e492b405eed74bc3ba9f994affac423c.jpg" onload="startMoving(this)" style="top:0px;left:200px"
        class="thumbnails"/>
          <img src="http://d17g46tfi0dv3u.cloudfront.net/8294/148294_e492b405eed74bc3ba9f994affac423c.jpg" onload="startMoving(this)" style="top:0px;left:300px"
        class="thumbnails"/>
          <img src="http://d17g46tfi0dv3u.cloudfront.net/8294/148294_e492b405eed74bc3ba9f994affac423c.jpg" onload="startMoving(this)" style="top:100px;left:100px" class="thumbnails"/>
          <img src="http://d17g46tfi0dv3u.cloudfront.net/8294/148294_e492b405eed74bc3ba9f994affac423c.jpg" onload="startMoving(this)" style="top:100px;left:200px" class="thumbnails"/>
          <img src="http://d17g46tfi0dv3u.cloudfront.net/8294/148294_e492b405eed74bc3ba9f994affac423c.jpg" onload="startMoving(this)" style="top:100px;left:300px" class="thumbnails"/>

    </div> 
```

CSS 代码：

```
#thumbnails_wrapper{
    position:absolute;
    width:100%;

    height:147px;
background-color: rgba(150, 150, 150, 0.4);

}
.thumbnails{
    position:absolute;
    border:1px solid white;

} 
```

现场示例：http: [//jsfiddle.net/ScTMP/](http://jsfiddle.net/ScTMP/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T23:20:57.757

好吧，你已经知道你的应用程序出了问题。问题是您的函数无限运行并且不受您的控制（即，当访问者打开一个新选项卡并离开活动窗口时）。

您必须非常小心调用自身的函数。创建无限循环会消耗 CPU 资源并使访问者的浏览器崩溃。

但是你有办法使用 JavaScript 的 window 对象来控制你的动画。假设您在浏览器中打开了四个选项卡。浏览器为每个选项卡创建一个窗口对象。您可以使用窗口对象的 onblur 和 onfocus 事件处理程序来找出访问者在浏览器级别上正在做什么：

```
goMoving();
window.onblur = stopMoving;
window.onfocus = goMoving;

var int;

function goMoving() {
    int = setInterval(function() {
        moveTheBoxes();            
    }, 400); //TODO (AzizAG): Rework the timer function
}

function stopMoving() {
    window.clearInterval(int);
}

function startMoving(img) {
    /* Animation */
} 
```

成功的**关键**是第 2-3 行。goMoving 函数是您一次又一次调用 moveTheBoxes的**新方法。**因此，改变你的动画：

```
.animate({
    left: "+=" + amount
}, time, "linear"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T20:08:34.010

这是我最近在 Chrome 和 Firefox 中注意到的。当您转到另一个选项卡并返回时，动画似乎会做一些时髦的事情。我还没有找到一个好的解决方案，但你并不孤单。

# iphone - CorePlot 1.0 + LLVM GCC 4.2 + ARC - 如何？

> ID：10769230
> 
> 赞同：1
> 
> 时间：2012-05-26T19:41:45.223
> 
> 标签：iphone, ios, xcode, cocoa-touch, core-plot

我正在一个小型个人项目中尝试 CorePlot 来绘制一些条形图。我使用 Xcode 4.3.2 和 ARC 开始了这个项目，认为它会让我的生活更轻松......问题是，当使用 GCC 4.2 时 - 编译器无法识别`@autorelease`. 我过去了，使用：

```
int retVal = 0;

// @autoreleasepool {
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

retVal = UIApplicationMain(argc, argv, nil, NSStringFromClass([kerrAppDelegate class]));

[pool drain];
// }

return retVal; 
```

但是我收到错误消息，说 NSAutoreleasePool 在 ARC 中不可用...有人有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T21:01:41.223

这真的与Core Plot无关。

只有在使用 LLVM 编译器 3.0 或更高版本时才支持自动引用计数。LLVM GCC 4.2 不支持 ARC，因此您需要切换项目以使用完整的 LLVM 编译器。

# java - 如何集成 Java FX 和 Spring MVC

> ID：10769232
> 
> 赞同：6
> 
> 时间：2012-05-26T19:41:55.067
> 
> 标签：java, spring, model-view-controller, javafx

我想在我的 Web 应用程序中使用 JavaFx 作为前端。我的问题是，是否可以将 Model 对象与使用 Java Fx 开发的表单绑定。
我恳请您对这个问题有所了解。
如果您需要对此进行更多说明，请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T23:08:52.163

The main differences between Web front-ends (like Spring MVC) and rich clients (and RIAs like JavaFX) is that for web front-ends the server-side logic runs in the same JVM as the web framework while for rich clients the server-side logic and the client are running on 2 separate JVMs, one on the server machine and one on the client machine.

Rich clients are usually downloaded/ installed completely before the user can run it, while for web front-ends each HTML page is possibly first dynamically created and then send to the user as needed.

Since the user usually already has the complete rich client from start, only the actual data (DTOs) get sent back and forth using some kind of remote service e.g Web Services.

So this means that the JavaFX client cannot access the objects of the server (e.g. attached JPA entities). You need to wrap the data up and send it to the JavaFX client using some kind of service (see the Service Facade and DTO design patterns).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-14T12:53:51.793

JAVAFX 与任何 Java EE 框架之间的主要区别与 Swing 应用程序和 Java EE 应用程序之间的区别相同。

您可以使用 JAVAFX 设计应用程序以直接在桌面上使用或在 Java 浏览器插件的帮助下部署为浏览器小程序。但是，将其用作设计 Java EE 应用程序前端的框架是不可能的。

阅读这篇文章：

[https://www.java.net//node/674176](https://www.java.net//node/674176)

# iphone - 有效删除名称中包含子字符串的多个文件

> ID：10769235
> 
> 赞同：0
> 
> 时间：2012-05-26T19:42:26.317
> 
> 标签：iphone, objective-c, ios, nsfilemanager

我想删除多个包含子字符串的文件。例如，我想删除所有具有 substring 的文件`my`。假设我的目录包含 4 个文件：**photo.jpg**、**myPhoto.jpg**、**beachMyPhoto.jpg**、**anyPhoto.jpg**，因为搜索词是`my`我有兴趣删除的文件是**myPhoto.jpg**和**beachMyPhoto.jpg**（不区分大小写） .

我提出的解决方案（我知道该怎么做）是使用`NSFileManager`类，并使用该函数`contentsOfDirectoryAtPath:error:`读取所有目录内容，然后通过循环搜索命中。如果找到命中，我删除该文件。

在我提出的解决方案中，我不喜欢的是它效率不高，尤其是在目录包含太多文件并且命中率很小的情况下。有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:59:03.680

如果您不想将大数组加载到内存中，可以尝试`-[NSFileManager enumeratorAtURL:includingPropertiesForKeys:options:errorHandler:]`. 由于您只需要目录的直接内容，因此您将为`-[NSDirectoryEnumerator skipDescendants]`它返回的每个目录调用。

如果您关心的是遍历目录中的所有项目，测试您的匹配模式，那是不可避免的。您希望使用的任何技术都必须以某种方式迭代目录中的所有项目并测试匹配。唯一的问题是该迭代是否向您公开。在可可中，它是。如果您想要一个不需要的替代方案，您可以下拉到该[`glob()`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/glob.3)功能。

# wordpress - nginx 和 jQuery 文件上传工具。删除方法

> ID：10769238
> 
> 赞同：2
> 
> 时间：2012-05-26T19:42:57.253
> 
> 标签：wordpress, nginx, centos

我最近使用带有 LEMP 的 VPS 设置配置了一个 wordpress 站点。我是 nginx 新手，所以我使用的是在[这里](https://gist.github.com/878505)找到的 nginx 配置。

无论如何，我正在使用[jQuery 文件上传工具](http://blueimp.github.com/jQuery-File-Upload/)，我将它设置为在上传时将文件（在本例中为图像）上传到几个目录（php/file 和 php/crop）的位置。

使用删除按钮时，删除函数会传递 URL，该 URL`(example.com/server/php?file=image.jpg)`会`index.php`接受删除请求并删除相关目录中的图像。

但是，当我在 nginx 中启用`'dav_methods PUT DELETE MKCOL COPY MOVE;'`时，删除请求会删除目录。

如何让它命中`index.php`，以便我可以让它删除正确目录中的文件？

# html - 适合所有屏幕的百分比定位

> ID：10769246
> 
> 赞同：0
> 
> 时间：2012-05-26T19:43:53.630
> 
> 标签：html, css, css-float

我正在制作一个网页的布局，我希望它在所有屏幕上都具有相同的外观。我正在处理的页面包含三个部分，页眉、主页和页脚，我希望页眉位于屏幕顶部。主要和页脚粘在页面底部。

这是我想做的事情：

1.  我将页眉放在顶部，但我无法在主要和页脚部分添加百分比。
2.  在标题中还有一个名为“div5”的 div，我希望它贴在父 div 的底部，即主框或中间框。

3.  在页脚中，我有三个框，希望将它们分别放在左侧、右侧和中间。

你能看看[链接的网站](http://mersadesign.com/demo/percentage.html)，让我知道如何解决这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:45:07.490

百分比高度仅在您将父元素设置为具有高度时才有效。

（元素会问“什么的百分比？”）

这里我们给body设置一个高度

**css**

```
<style type="text/css">

      html,body { height:100%;}

      #header { display:block; height:10%; }
      #main   { display:block; height:80%; }
      #footer { display:block; height:10%; }

</style> 
```

**标记**

```
 <body>
    <div id="header"></div>
    <div id="main"></div>
    <div id="footer"></div>
   </body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T22:39:04.390

通过这样做，您使您的 div 2,3 和 4 重叠。确保即使是这样也得到了照顾。是的，您必须考虑选择 Css 媒体查询。请在[此处查看演示](http://webdesignerwall.com/demo/adaptive-design/final.html)

# c++ - 将处理程序 OnBegindrag 与 CTreeCtrl 一起使用

> ID：10769247
> 
> 赞同：0
> 
> 时间：2012-05-26T19:44:16.313
> 
> 标签：c++, mfc, event-handling, drag-and-drop

我有 MyCTreeCtrl 类，我想添加消息处理程序，例如：

```
void MyCTreeCtrl::OnBegindrag(NMHDR *pNMHDR, LRESULT *pResult)
{

} 
```

我应该写什么：

```
BEGIN_MESSAGE_MAP(MyCTreeCtrl, CTreeCtrl)

END_MESSAGE_MAP() 
```

用于创建 BEGINDRAG 处理程序。

你不能给我一些关于 MFC 中消息处理的文献吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:13:17.583

您不应该尝试自己创建处理程序来处理消息映射。对于大多数消息，向导将为您添加代码。例如，对于对话框中的树控件，您可以在资源编辑器中选择树控件并选择添加事件处理程序（还有其他使用类视图和属性插入消息处理程序的方法）。不幸的是，MS 将其命名为事件处理程序，而实际上它是用于控制特定通知代码的通知消息处理程序；在您的情况下，它是 TVN_BEGINDRAG。向导将适当的条目插入到消息映射中：

```
ON_NOTIFY(TVN_BEGINDRAG, IDC_TREE_DRAG, &CYourDlg::OnTvnBegindragTreeDrag) 
```

在 .h 文件中添加声明：

```
afx_msg void OnTvnBegindragTreeDrag(NMHDR *pNMHDR, LRESULT *pResult); 
```

和 .cpp 文件的实现（定义）：

```
void CYourDlg::OnTvnBegindragTreeDrag(NMHDR *pNMHDR, LRESULT *pResult)
{
    LPNMTREEVIEW pNMTreeView = reinterpret_cast<LPNMTREEVIEW>(pNMHDR);
    // TODO: Add your control notification handler code here
    *pResult = 0;
} 
```

简而言之：消息映射是 MFC 为插入消息处理程序的灵活性而设计的方式。对于任何 Win32 应用程序，消息处理程序都是从 windows 程序调用的；在 MFC 中，它是所有控件的子类的 MFC 窗口过程。消息映射是 AFX_MSGMAP_ENTRY 结构的静态数组：

```
struct AFX_MSGMAP_ENTRY
{
    UINT nMessage;   // windows message
    UINT nCode;      // control code or WM_NOTIFY code
    UINT nID;        // control ID (or 0 for windows messages)
    UINT nLastID;    // used for entries specifying a range of control id's
    UINT_PTR nSig;       // signature type (action) or pointer to message #
    AFX_PMSG pfn;    // routine to call (or special value)
}; 
```

MFC 窗口程序获取此映射，搜索特定签名 (nSig) 的条目，如果条目的签名匹配，则调用适当的函数 (pfn)。映射中的每个消息条目都使用扩展为此结构的特定宏。在您的情况下，它是 ON_NOTIFY，因为消息是 MW_NOTIFY。您还会注意到通知代码 TVN_BEGINDRAG。如果您想为不在向导数据库中的消息或自定义消息创建消息条目，您有几个选择，ON_MESSAGE 您可以按以下方式使用：宏进入消息映射以及声明和定义进入头文件和cpp文件。

```
 ON_MESSAGE(WM_CUSTOM_MESSAGE, OnCustomMessage)
LRESULT CTreeCtrlDragSampleDlg::OnCustomMessage(WPARAM wParam, LPARAM lParam)
{
    return 0;
}
afx_msg LRESULT OnCustomMessage(WPARAM wParam, LPARAM lParam); 
```

其他选择：ON_COMMAND、ON_CONTROL 映射来自窗口或窗口公共控件的 WM_COMMAND 消息。更多信息：

[http://msdn.microsoft.com/en-us/library/6d1asasd(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/6d1asasd(v=vs.100).aspx)用于 VS 2010

# c# - 这个 c# 位移方法有什么作用？

> ID：10769250
> 
> 赞同：0
> 
> 时间：2012-05-26T19:44:34.973
> 
> 标签：c#, byte, bitwise-operators

此方法几乎是从 java 程序中复制的，但我担心如果 ID 是一个字节，它在 c# 中不能按预期工作，这是做什么的？

```
public int getBit(int position)
    {
        return (ID >> (position - 1)) & 1;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:46:13.710

从 ID 中提取所传递位置的位。
位置应为 1-8
返回位值 (0-1)

例如：

```
ID = 128;  // 10000000
getBit(8); // returns 1

ID = 127;  // 01111111
getBit(8); // returns 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T19:47:03.677

如果 (position-1) 处的位为 1，则返回非零，否则返回 0

# ruby - 如何创建 dsl

> ID：10769252
> 
> 赞同：1
> 
> 时间：2012-05-26T19:44:53.177
> 
> 标签：ruby, dsl

我想为我的班级制作 DSL 结构，例如

```
class Car 
  brand :mercedes
end 
```

我需要写什么代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:49:38.637

`brand`应该是一种方法。它必须在某个地方定义。您可以选择：相同的类、父类或混合模块。我喜欢模块。

```
module MyDSL
  def brand name
    puts "Got brand #{name}"
  end
end

class Car 
  extend MyDSL

  brand :mercedes
end

# >> Got brand mercedes 
```

虽然这回答了您的具体问题，但我强烈建议您阅读这本书：[Metaprogramming Ruby](http://pragprog.com/book/ppmetr/metaprogramming-ruby)。似乎你会在那里找到很多答案。

# sql - 如何从oracle中的层次结构中查询

> ID：10769261
> 
> 赞同：3
> 
> 时间：2012-05-26T19:46:29.423
> 
> 标签：sql, oracle, hierarchy

我使用的 Oracle 数据库包含客户、连锁店和活动表。像这样（精简）：

```
TABLE CUSTOMER 
  ACCOUNTNUMBER   VARCHAR2
  CHAIN           VARCHAR2
  CATEGORY        VARCHAR2

TABLE CHAIN
  CODE            VARCHAR2
  PARENTCHAIN     VARCHAR2

TABLE CAMPAIGN
  ID              NUMBER
  DISCOUNT        NUMBER

TABLE CAMPAIGN_ELIGIBILITY
  CAMPAIGNID      NUMBER   --ID of the campaign
  ACCOUNTNUMBER   VARCHAR2 --Customer included in the campaign
  CHAINCODE       VARCHAR2 --Chain included in the campaign
  CUSTCATCODE     VARCHAR2 --Customercategory included in the campaign 
```

客户可以通过其定义的客户组或作为连锁店的成员有资格参加特定的活动（基于帐号）。

我使用此查询来查找对给定客户有效的所有活动：

```
select * from campaign where id in
(
  select unique campaignid from campaign_eligibility where 
    accountnumber=:accountnumber
  union
  select unique campaignid from campaign_eligibility where 
    chaincode = 
      (select chain from debtable where accountnumber=:accountnumber)
  union
  select unique campaignid from campaign_eligibility where 
    custcatcode =
      (select category from customer where accountnumber=:accountnumber)
) 
```

现在，假设客户“Popeye Spinach Empire”是“Spinach Dealers Inc.”连锁店的成员，该连锁店又是较大连锁店“GreenFud R US”的一部分，而后者又是“FoAC”连锁店的一部分”。如果有针对“GreenFud R US”的广告系列，Popeye 就有资格参与该广告系列。我的查询将仅返回已明确添加 Popeye 或以“Spinach Dealers Inc.”为目标的广告系列。

如何修改我的查询以包含客户间接参与的营销活动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T20:13:43.977

```
WITH    chains AS
        (
        SELECT  code
        FROM    chain c
        START WITH
                c.code IN
                (
                SELECT  chain
                FROM    campaign_eligibility
                WHERE   accountnumber = :acc
                UNION ALL
                SELECT  chain
                FROM    customer c
                JOIN    campaign_eligibility ce
                ON      ce.custcatcode = c.category
                WHERE   accountnumber = :acc
                UNION ALL
                SELECT  chain
                FROM    customer
                WHERE   accountnumber = :acc
                )
        CONNECT BY
                c.code = PRIOR c.parentchain
        ) ch
SELECT  *
FROM    campaign
WHERE   c.id IN
        (
        SELECT  campaignid
        FROM    chains 
        JOIN    campaign_eligibility ce
        ON      ce.chaincode = c.code
        ) 
```

# css - 文本对齐证明不起作用？

> ID：10769262
> 
> 赞同：3
> 
> 时间：2012-05-26T19:46:32.180
> 
> 标签：css

我在一个网站上工作，我有这个 CSS：

```
#aboutMe
{
    position:relative;
    left:20px;
    top:20px;
    behavior: url(/PIE.htc);
    -webkit-border-radius: 400px;
    -moz-border-radius: 400px;
    border-radius: 400px;
    background:#48c7ff;
    width:400px;
    height:400px;
    font-family:'Ciclef';
    color:#e9e9e9;
    padding:35px;
    line-height:25px;
}

#aboutMe p
{
    text-align:justify;
    font-size:16px;
} 
```

但是，文本没有对齐，它是左对齐的。我怎样才能解决这个问题？

这是网站：http: [//ibdesigns.net23.net/](http://ibdesigns.net23.net/)

“关于我”圈子（大约在页面的中间）是给我带来麻烦的段落。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-26T19:48:32.100

该文本是[有道理](http://en.wikipedia.org/wiki/Justification_%28typesetting%29)的。对齐段落中的最后一行不会被拉伸（或压缩）以适应该行。

为了让它看起来更好（在支持的 CSS3 浏览器中[`text-align-last`](http://www.w3.org/TR/css3-text/#text-align-last)），你可以这样做：

```
text-align:justify;
text-align-last:center;
/* for IE9 */
-ms-text-align-last:center; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T22:31:32.397

顺便说一句，你有没有观察到同样的情况`<div>`？文字从图像中移出；你可以考虑一个小的 CSS 更改：

```
#aboutMe p {
    text-align: justify;
    text-align-last: center;
    font-size: 16px;
    margin-left: 15px;
} 
```

我补充说**`margin-left: 15px;`**。

# dom - DOM xpath html 提取

> ID：10769265
> 
> 赞同：-1
> 
> 时间：2012-05-26T19:46:51.870
> 
> 标签：dom, xpath

我正在将一些 html 导入到 dom 文档中，并使用 xpath 来提取我感兴趣的 html 部分。见下文：

$dom = 新的 DOMDocument();
@$dom->loadHTML('$myHtmlFileHere');
$xpath_dom_doc = 新的 DomXPath($dom);
$dom_object = $dom_document->query('myPathHere');

下面是“返回”的 html 结构：

```
<div>GROUP A</div>
<span>aaa</span>
<span>zzz awesome</span>
<span>eee</span>

<div>GROUP B</div>
<span>fff</span>

<div>GROUP C</div>
<span>zzz</span>
<span>uuu</span>
<span>iii</span>
<span>rrr</span> 
```

如您所见，我有类别（A 组、B 组和 C 组）。在每个类别下方的跨度中，我都有与该类别相关的信息。我想要的是将具有相关类别的跨度内容发送到数据库。我面临的问题是该类别的 div 标签没有包装跨度。所以我看不出我该如何管理。希望有人可以提供帮助。先感谢您。干杯。马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:45:55.273

`following-sibling`xpath 函数呢？但是，您应该小心，并且只选择直到 next 的兄弟姐妹`div`。

例如，用[xsh2](http://p3rl.org/XML%3a%3aXSH2)测试：

```
$div = //div[2] ;
ls $div/following-sibling::span[count(preceding-sibling::div)=1+count($div/preceding-sibling::div)] ; 
```

# css - 刷新前后布局不同

> ID：10769270
> 
> 赞同：-3
> 
> 时间：2012-05-26T19:48:00.463
> 
> 标签：css, html, browser-refresh

我正在这个[网站上](http://9amresourceagency.com/index.php)工作。我使用 firebug 和 DreamWeaver 来创建它。打开页面时网站无法正常加载（布局不是我想要的，我创建了它。）但是当我刷新页面时，它完全符合我的要求。现在我被它困住了。我以前从未遇到过这样的情况。请帮助我如何使网站在第一时间正确加载。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T19:56:04.527

可能是您第一次加载时连接速度很慢。所以布局需要更长的时间。下次你加载它时，一切都在缓存中，布局很快！

那么您的网站的低带宽 (HTML) 版本会加载 7.46 MB 的动画 gif 吗？哇...我会摆脱那个动画 gif 的！使您的网站看起来不连贯且不专业！这肯定是你问题的很大一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T19:51:30.937

在刷新之前和之后对我来说它看起来完全一样。硬重置您的缓存，确保您没有使用破坏性代理，并尝试在私人模式下使用您的浏览器。

# ruby-on-rails - 如何在 Rails 中编辑 twitter 引导文件？

> ID：10769274
> 
> 赞同：4
> 
> 时间：2012-05-26T19:48:55.507
> 
> 标签：ruby-on-rails, twitter-bootstrap, twitter-bootstrap-rails

我正在尝试在我的 rails 应用程序（'bootstrap-sass'，'2.0.0'）中找到 twitter-bootstrap 文件，因为我需要直接对 bootstrap-responsive.css 文件进行更改，但是，我可以没找到。

我已经启动并运行了引导程序，但似乎找不到引导程序文件。如何找到 bootstrap-responsive.css 文件？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T22:14:08.927

[`bootstap-sass`](https://github.com/thomas-mcdonald/bootstrap-sass)gem 使用Rails [3.2 资产管道](http://guides.rubyonrails.org/asset_pipeline.html)将必要的样式表注入您的应用程序。实际的样式表文件位于[gem 安装目录](https://github.com/thomas-mcdonald/bootstrap-sass/blob/master/vendor/assets/stylesheets/_bootstrap-responsive.scss)中，而不是在您的项目本身中。

根据您要更改的内容，您可以：

1.  将[`_bootstrap-responsive.scss`](https://github.com/thomas-mcdonald/bootstrap-sass/blob/master/vendor/assets/stylesheets/_bootstrap-responsive.scss)文件从 gem 复制到您的`app/assets`目录并在那里进行编辑。
2.  在您的 application.scss 文件中加载 Bootstrap 之前自定义必要的[Bootstrap 变量：](http://twitter.github.com/bootstrap/less.html#variables)

    ```
    $btnPrimaryBackground: #f00;
    @import "bootstrap"; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T20:07:27.423

编辑：试着往下看

```
app/assets/stylesheets 
```

这是一个例子

```
https://github.com/joliss/solitr/tree/master/app/assets/stylesheets 
```

* * *

我对 Rails 应用程序的结构不太熟悉，但是您是创建了本地副本还是使用了由 github 直接托管的引导文件？您应该能够通过检查您启动的 html 页面之一并查看源代码来解决这个问题，寻找类似的东西

```
<link rel="stylesheet" href="http://twitter.github.com/bootstrap/1.3.0/bootstrap.min.css"> 
```

如果它是本地页面，那么您的 Rails 应用程序中应该有一个目录来存储文件 - 也许有一个“静态”文件夹或类似的东西？尝试文件搜索它，很有可能找到它。

（我将 Django/Python 用于 Web 项目，但我会稍微研究一下 Rails，看看是否有任何发现）

# php - PHP 解析错误：意外的 $end（第 410 行）

> ID：10769277
> 
> 赞同：0
> 
> 时间：2012-05-26T19:49:51.680
> 
> 标签：php

我看过几个关于这个主题的问题，但我觉得这个问题不同。

我知道/谷歌搜索：这通常在文件的末尾，这是我在本地主机上给出的错误行。我正在使用 WAMP 服务器进行本地主机开发。代码在服务器上执行而没有错误。该代码在其他开发人员的计算机上执行，但出现可能与 JS 相关的不同错误。该页面为他们加载。

我尝试过的解决方案：

*   来自 SVN 存储库的新目录中的新代码签出：我在同一行 (410) 上遇到了同样的错误。

*   Notepad++ 中的括号配对：我使用括号突出显示功能浏览了代码，但没有发现未配对的括号。＃失败

*   我从服务器上提取了文件，但我的机器上仍然有同样的错误。＃失败

*   我添加了一个 endif(); 调用，但后来我遇到了一个意外的 endif() 错误，而不是 Unexpected $end。＃失败

代码链接：[https](https://www.box.com/s/09f39cb3c4afb0d93558) ://www.box.com/s/09f39cb3c4afb0d93558 （要点：[https](https://gist.github.com/2795108) ://gist.github.com/2795108 ）

我认为我的机器可能有问题，但我无法弄清楚它可能是什么。还有哪些其他解决方案可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:49:28.593

转到第 260 行并替换`"<? } ?>"`为`"<?php } ?>"`，或创建一个 .htaccess 并添加这行代码以激活 short_open_tag : `php_flag short_open_tag on`。希望这有帮助）

# r - 在这种情况下如何提高 R 中的精度？

> ID：10769288
> 
> 赞同：0
> 
> 时间：2012-05-26T19:51:35.313
> 
> 标签：r, statistics, precision

我想计算 的值`(1e-6)^84`，但是在 R/R64 中，结果是，这在对其应用函数`0`时会导致一些问题。`log10`

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T22:27:04.147

取决于您实际要解决的问题。你关心 log(teenytinynumber) 的值吗？如果不是，请将零值替换为 NA 并继续。如果这样做，请弄清楚是否有比使用对数函数跟随大指数更好的方法。也就是说，在处理数字之前简化你的算法。

# c++ - 避免 C++ 循环中复杂对象的最小范围效率低下的技术？

> ID：10769289
> 
> 赞同：16
> 
> 时间：2012-05-26T19:52:22.757
> 
> 标签：c++, performance, loops

# 问题第一

C++ 中是否有一种优雅的解决方案来防止必须声明复杂的对象变量，这些变量只在循环外的循环中使用，以提高效率？

# 详细解释

一位同事提出了一个有趣的观点。到我们的代码策略，它声明（解释）：*始终使用最小范围的变量并在第一次初始化时声明变量*。

编码指南示例：

```
// [A] DO THIS
void f() {
  ...
  for (int i=0; i!=n; ++i) {
    const double x = calculate_x(i);
    set_squares(i, x*x);
  }
  ...
}

// [B] DON'T do this:
void f() {
  int i;
  int n;
  double x;
  ...
  for (i=0; i!=n; ++i) {
    x = calculate_x(i);
    set_squares(i, x*x);
  }
  ...
} 
```

这一切都很好，这当然没有错，直到你从原始类型转移到对象。（对于*某种界面*）

例子：

```
// [C]
void fs() {
  ...
  for (int i=0; i!=n; ++i) {
    string s;
    get_text(i, s); // void get_text(int, string&);
    to_lower(s);
    set_lower_text(i, s);
  }
  ...
} 
```

在这里，字符串 s 将被破坏，每个循环周期都会释放内存，然后每个循环`get_text`函数都必须为 s 缓冲区重新分配内存。

写起来显然更有效：

```
 // [D]
  string s;
  for (int i=0; i!=n; ++i) {
    get_text(i, s); // void get_text(int, string&);
    to_lower(s);
    set_lower_text(i, s);
  } 
```

因为现在 s 缓冲区中分配的内存将在循环运行之间保留，我们很可能会节省分配。

*免责声明：* **请注意：**由于这是循环并且我们正在谈论内存分配，因此我**不**认为一般考虑这个问题是**过早的优化**。当然，有些情况和循环的开销并不重要。但是`n`有一个比开发人员最初期望的更大的唠叨倾向，并且代码有在性能*确实*很重要的环境中运行的唠叨倾向。

无论如何，现在“通用”循环构造的更有效方法是违反代码局部性并声明复杂对象不合适，“以防万一”。这让我相当不安。

请注意，我考虑这样写：

```
// [E]
void fs() {
  ...
  {
    string s;
    for (int i=0; i!=n; ++i) {
      get_text(i, s); // void get_text(int, string&);
      to_lower(s);
      set_lower_text(i, s);
    }
  }
  ...
} 
```

没有解决方案，*因为*可读性会受到更大的影响！

**进一步思考**，`get_text`函数的接口无论如何都是非惯用的，因为输出参数无论如何都是*昨天*的，一个“好”的接口会按值返回：

```
 // [F]
  for (int i=0; i!=n; ++i) {
    string s = get_text(i); // string get_text(int);
    to_lower(s);
    set_lower_text(i, s);
  } 
```

在这里，我们*不会为内存分配支付双倍*的费用，因为极有可能`s`会通过 RVO 从返回值构造，所以对于 [F]，我们*支付与*[C] 相同的分配开销。*然而，与*[C] 的情况不同，我们无法优化此接口变体。

因此，**底线**似乎是使用最小范围（可能）会损害性能并使用干净的接口[我至少认为按值返回比 out-ref-param 的东西]会阻止优化机会要干净得多——至少在一般情况下.

**问题**不在于有时为了效率而不得不放弃干净的代码，问题在于一旦开发人员开始发现这种特殊情况，整个编码指南（参见 [A]、[B]）就会失去权威.

现在的**问题**是：见第一段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:11:27.067

> 写起来显然更有效：[示例 D 的开头 ...]

我怀疑这一点。您要为从循环外开始的默认构造付费。在循环中，有可能`get_text`调用重新分配缓冲区（取决于您`get_text`的`string`定义方式）。请注意，对于某些运行，您实际上可能会看到改进（例如，在您获得逐渐变短的字符串的情况下），而对于某些（每次迭代时字符串长度增加约 2 倍），性能会受到巨大影响。

如果不变量构成瓶颈（分析器会告诉您），将不变量从循环中提升出来是非常有意义的。否则，请使用惯用的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T20:09:50.733

我要么：

*   为这些重量级人物破例。像“D”，请注意您可以根据需要限制范围。
*   允许辅助函数（字符串也可以是参数）
*   如果你真的不喜欢这些，你可以在你的`for`循环范围内声明一个本地，使用一个包含你的计数器/迭代器和临时的多元素对象。`std::pair<int,std::string>`将是一种选择，尽管专门的容器可以减少句法噪音。

（在许多情况下，out 参数会比 RVO 样式更快）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T20:48:32.327

取决于`get_text`.

**如果**您可以实现它以便它在大多数情况下重用字符串对象中分配的空间，那么一定要在循环之外声明该对象以避免在每次循环迭代时进行新的动态内存分配。

动态分配是昂贵的（最好的单线程分配器一次分配需要大约 40 条指令，多线程会增加开销，并且并非所有分配器都是“最佳”的），并且会导致内存碎片化。

*（顺便说一句，`std::string`通常实现所谓的“小字符串优化”，它避免了小字符串的动态分配。所以如果你知道你的大部分字符串足够小，并且实现`std::string`不会改变，理论上你甚至可以避免动态分配在每次迭代中构造一个新对象时。但是这将非常脆弱，所以我建议不要这样做。）*

* * *

在一般情况下，这完全取决于您的对象和使用它们的函数是如何实现的。如果您关心性能，则必须根据具体情况处理这些“抽象泄漏”。所以，明智地选择你的战斗：首先测量和优化瓶颈。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T20:46:55.857

如果你有一个字符串类的写时复制实现，那么 to_lower(s) 无论如何都会分配内存，所以不清楚你是否可以通过简单地在循环外声明 s 来获得性能。

在我看来，有两种可能性： 1.) 你有一个类，它的构造函数做了一些不平凡的事情，不需要在每次迭代中重新完成。然后将声明放在循环之外在逻辑上很简单。2.) 你有一个类，它的构造函数没有做任何有用的事情，然后将声明放在循环中。

如果 1\. 为真，那么您可能应该将您的对象拆分为一个辅助对象，例如，分配空间并进行非平凡的初始化，以及一个享元对象。类似于以下内容：

```
StringReservedMemory m (500); /* base object for something complex, allocating 500 bytes of space */
for (...) {
   MyOptimizedStringImplementation s (m);
   ...
} 
```

# java - Android 上的点对点音频呼叫：语音中断和延迟（接收数据包延迟）增加

> ID：10769293
> 
> 赞同：4
> 
> 时间：2012-05-26T19:52:53.923
> 
> 标签：java, android

我正在尝试在 android 上建立点对点音频呼叫。我使用安卓手机和平板电脑进行通信，但在收到大约 40 个数据包后，手机几乎停止接收数据包，然后突然收到一些数据包并播放它们等等，但等待时间增加了。同样，平板电脑最初会接收数据包并播放它们，但延迟会增加，并且一段时间后语音开始中断，就好像丢失了一些数据包一样。任何想法是什么导致了这个问题......

这是应用程序的代码...我只是在 RecordAudio 类中提供发送者和接收者的 IP 地址，同时在两台设备上运行它。

```
public class AudioRPActivity extends Activity implements OnClickListener {

    DatagramSocket socketS,socketR;
    DatagramPacket recvP,sendP;
    RecordAudio rt;
    PlayAudio pt;

    Button sr,stop,sp;
    TextView tv,tv1;
    File rf;

    boolean isRecording = false;
    boolean isPlaying = false;

    int frequency = 44100;
    int channelConfiguration = AudioFormat.CHANNEL_CONFIGURATION_MONO;
    int audioEncoding = AudioFormat.ENCODING_PCM_16BIT;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tv = (TextView)findViewById(R.id.text1);
        tv1 = (TextView)findViewById(R.id.text2);

        sr = (Button)findViewById(R.id.sr);
        sp = (Button)findViewById(R.id.sp);
        stop = (Button)findViewById(R.id.stop);

        sr.setOnClickListener(this);
        sp.setOnClickListener(this);
        stop.setOnClickListener(this);

        stop.setEnabled(false);

        try
        {
        socketS=new DatagramSocket();
        socketR=new DatagramSocket(6000);
        }
        catch(SocketException se)
        {
            tv.setText(se.toString());
            finish();
        }
    }

    public void onClick(View v) {

        if(v == sr)
            record();
        else if(v == sp)
            play();
        else if(v == stop)
            stopPlaying();
    }

    public void play()
    {
        stop.setEnabled(true);
        sp.setEnabled(false);
        pt = new PlayAudio();
        pt.execute();
    }

    public void stopPlaying()
    {
        isRecording=false;
        isPlaying = false;
        stop.setEnabled(false);
    }

    public void record()
    {
        stop.setEnabled(true);
        sr.setEnabled(false);
        rt = new RecordAudio();
        rt.execute();
    }

    private class PlayAudio extends AsyncTask<Void,String,Void>
    {

        @Override
        protected Void doInBackground(Void... arg0)
        {
            isPlaying = true;
            int bufferSize = AudioTrack.getMinBufferSize(frequency, channelConfiguration, audioEncoding);

            byte[] audiodata = new byte[bufferSize];

            try
            {
                AudioTrack audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC,frequency,channelConfiguration,
                                                        audioEncoding,4*bufferSize,AudioTrack.MODE_STREAM);
                audioTrack.setPlaybackRate(frequency);
                audioTrack.play();

                while(isPlaying)
                {
                    recvP=new DatagramPacket(audiodata,audiodata.length);
                    socketR.receive(recvP);
                    audioTrack.write(recvP.getData(), 0, recvP.getLength());
                }
                audioTrack.stop();
                audioTrack.release();
            }
            catch(Throwable t)
            {
                Log.e("Audio Track","Playback Failed");
            }
            return null;
        }
        protected void onProgressUpdate(String... progress)
        {
            tv1.setText(progress[0].toString());
        }

        protected void onPostExecute(Void result)
        {
            sr.setEnabled(true);
            sp.setEnabled(true);
        }

    }

    private class RecordAudio extends AsyncTask<Void,String,Void>
    {

        @Override
        protected Void doInBackground(Void... arg0)
        {
            isRecording = true;

            try
            {
                int bufferSize = AudioTrack.getMinBufferSize(frequency, channelConfiguration, audioEncoding);

                AudioRecord audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC,frequency,channelConfiguration
                                                            ,audioEncoding,4*bufferSize);   
                byte[] buffer = new byte[bufferSize];
                audioRecord.startRecording();
                int r=0;
                while(isRecording)
                {
                    int brr = audioRecord.read(buffer,0,bufferSize);

                    sendP=new DatagramPacket(buffer,brr,InetAddress.getByName("sender's/receiver's ip"),6000);
                    socketS.send(sendP);
                    publishProgress(String.valueOf(r));

                    r++;
                }

                audioRecord.stop();
                audioRecord.release();

            }
            catch(Throwable t)
            {
                Log.e("AudioRecord","Recording Failed....");
            }

            return null;
        }

        protected void onProgressUpdate(String... progress)
        {
            tv.setText(progress[0].toString());
        }

        protected void onPostExecute(Void result)
        {
            sr.setEnabled(true);
            sp.setEnabled(true);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T22:54:45.923

通过网络发送语音时，如果频率不是 8000，我会遇到麻烦。44100 听起来很可怕。那可能只是因为我的情况。

另一个困难是，对于 UDP，很难说数据包到达的顺序。我已经看到了一个将它们放回正确顺序的实现，但我现在找不到它。

# javascript - 使用异步 ajax 或 jquery 完全重新加载页面

> ID：10769295
> 
> 赞同：1
> 
> 时间：2012-05-26T19:53:03.813
> 
> 标签：javascript, jquery, asp.net, ajax

我有一个 ASP.net 页面，访问者正在执行将在运行时生成 JavaScript 以在页面中注册的任务，以下 ASP.net 函数用于注册 JS 代码：

```
Page.ClientScript.RegisterHiddenField
Page.ClientScript.RegisterStartupScript
Page.ClientScript.RegisterClientScriptBlock 
```

生成的代码很难维护，页面完全在 ASP.net ajax 和 JS 中，

并且有一个刷新按钮来重新加载页面或清除所有内容（就像您按 F5 一样）是否有任何静默方式来重新加载整个页面？（异步重新加载，无页面闪烁（Ajax））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:57:40.773

“沉默的方式”是什么意思？您可以使用刷新整个页面

```
location.reload(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T12:02:40.070

请使用`location.reload(true);`从服务器重新加载整个页面。`false`如果您想从缓存中重新加载，请使用。使用 ajax，您可以使用空 url 和上下文`document.body`来重新加载页面的完整主体

# prolog - Prolog 编程 - 关于下一个任务的程序是什么？

> ID：10769297
> 
> 赞同：-2
> 
> 时间：2012-05-26T19:53:16.437
> 
> 标签：prolog, logic

**关于接下来的三个 Prolog 程序，你能帮我吗？**

1.  汇总一个列表中的元素，并检查是用 3 分割还是不分割？ *比如列表是[1, 2, 3] --> 元素的和除以3，因为1+2+3=6, 6/3=2 --> 所以输出应该是真的。*

2.  如果 7 在列表中，则将其加倍。*例如：输入列表 --> [1,7,3,7,7]，输出应该是 [1,7,7,3,7,7,7,7]。*

3.  如果 7 在列表中，请将其更改为 2,7,2。*例如：输入列表-->[1,7,2,1]，输出应该是[1,2,7,2,2,1]*

该程序是什么以及如何使用 SWI-Prolog 对其进行测试？

谢谢你的期待！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T12:56:22.767

我会给你几个提示：

1.  您需要 a) 计算总和，b) 检查它是否除以 3。如果您使用 SWI-Prolog，则`sum_list`库`lists`中有一个谓词可以执行 a) 和`... is ... mod ...`求解 b) 如果您需要使用递归而不是用于计算总和的内置谓词：

    > sum([X|Xs], Acc, Sum) :- Acc1 是 Acc + X, sum(Xs, Acc1, Sum)。
    > 
    > 总和（[]，累加，累加）。
    > 
    > 总和（列表，总和）：- 总和（列表，0，总和）。

2.  3\. 这些是递归过程。您应该遍历列表，如果遇到 7，您应该将问题 2 替换为 7,7，问题 3 替换为 2,7,2。

> ```
> traverse_list([],[]).
> traverse_list([7|Xs], [7,7|Ps]) :-
>    !,
>    traverse_list(Xs,Ps).
> traverse_list([X|Xs], [X|Ps]) :-
>    traverse_list(Xs,Ps). 
> ```

考虑将这个片段修改为 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T14:28:06.123

我建议您考虑一下并自行解决。也就是说，我会给你一些帮助开始的东西：

1）我假设您的讲师希望看到您进行递归，而不是使用内置的 sum_list 谓词。看起来像这样：

sum([FirstNum | Rest], Sum) :- sum(Rest, Sum1)，Sum 是 FirstNum + Sum1。

然后使用“mod”运算符来检查整除性。请记住在递归到达空集 [] 时包含一个基本情况。如果你能理解这一点，其余的应该很容易。祝你好运。

# c# - WCF 流 - 限制速度

> ID：10769302
> 
> 赞同：7
> 
> 时间：2012-05-26T19:53:48.163
> 
> 标签：c#, wcf, wcf-streaming

这是我申请中的一个严重问题，几个月来没有找到任何好的解决方案。我注意到 C# 管理 Stream 类在 WCF 中流式传输的方式，而不考虑我的配置。

首先，我有一个继承自 FileStream 的类，因此我可以随时查看从客户端读取了多少内容：

```
public class FileStreamWatching : FileStream
    {
        /// <summary>        
        /// how much was read until now        
        /// </summary>        
        public long _ReadUntilNow { get; private set; }
        public FileStreamWatching(string Path, FileMode FileMode, FileAccess FileAccess)
            : base(Path, FileMode, FileAccess)
        {
            this._ReadUntilNow = 0;
        }
        public override int Read(byte[] array, int offset, int count)
        {
            int ReturnV = base.Read(array, offset, count);
            //int ReturnV = base.Read(array, offset, count);
            if (ReturnV > 0)
            {
                _ReadUntilNow += ReturnV;
                Console.WriteLine("Arr Lenght: " + array.Length);
                Console.WriteLine("Read: " + ReturnV);
                Console.WriteLine("****************************");
            }
            return ReturnV;
        }
    } 
```

其次，下面是我读取包含文件的客户端流的服务方法。我的主要问题是 FileStreamWatching.Read 每次我从下面的这种方法召唤它时都不会启动，而是 FileStreamWatching.Read 每调用一次 X 次就启动一次。奇怪。

***稍后查看输出**

```
 public void Get_File_From_Client(Stream MyStream)
    {
        using (FileStream fs = new FileStream(@"C:\Upload\" + "Chat.rar", FileMode.Create))
        {
            byte[] buffer = new byte[1000];
            int bytes = 0;
            while ((bytes = MyStream.Read(buffer, 0, buffer.Length)) > 0)
            {
                fs.Write(buffer, 0, bytes);
                fs.Flush();
            }
        }
    } 
```

**这是每次激活 FileStreamWatching.Read 时客户端的输出：（请记住缓冲区长度仅为 1000！）**

Arr 长度：256，阅读：256

* * *

Arr 长度：4096，阅读：4096

* * *

Arr 长度：65536，阅读：65536

* * *

Arr 长度：65536，阅读：65536

* * *

Arr 长度：65536，阅读：65536

* * *

Arr 长度：65536，阅读：65536

* * *

....直到文件传输完成。

**问题：**

1.  我带到读取方法的缓冲区长度不是 256/4096/65536。它是 1000。
2.  每次我从服务中调用 FileStreamWatching 类的读取时，它都不会启动。

**我的目标：**

1.  控制每次阅读我从客户那里收到多少。

2.  每次我从服务调用它时，FileStreamWatching.Read 都会启动。

**我的客户端配置：**

```
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IJob" transferMode="Streamed"/>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:8080/Request2" binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_IJob" contract="ServiceReference1.IJob"
                name="BasicHttpBinding_IJob" />
        </client>
    </system.serviceModel>
</configuration> 
```

**我的服务配置**（这里没有配置文件）：

```
 BasicHttpBinding BasicHttpBinding1 = new BasicHttpBinding();
        BasicHttpBinding1.TransferMode = TransferMode.Streamed;
        //
        BasicHttpBinding1.MaxReceivedMessageSize = int.MaxValue;
        BasicHttpBinding1.ReaderQuotas.MaxArrayLength = 1000;
        BasicHttpBinding1.ReaderQuotas.MaxBytesPerRead = 1000;
        BasicHttpBinding1.MaxBufferSize = 1000;
        //
        ServiceHost host = new ServiceHost(typeof(JobImplement), new Uri("http://localhost:8080"));
        //
        ServiceMetadataBehavior behavior = new ServiceMetadataBehavior();
        behavior.HttpGetEnabled = true;
        //
        host.Description.Behaviors.Add(behavior);
        ServiceThrottlingBehavior throttle = new ServiceThrottlingBehavior();
        throttle.MaxConcurrentCalls = 1;
        host.Description.Behaviors.Add(throttle);
        //
        //
        host.AddServiceEndpoint(typeof(IJob), BasicHttpBinding1, "Request2");
        host.Open(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T16:20:23.557

**回复：为什么是 256/4K/65535？**

我看到这里有两种可能性：

*   基地`FileStream`正在做自己的内部缓冲。它可能在内部调用`read(array,offset,length)`以填充其内部缓冲区，然后传回您要求的部分。内部调用最终是递归的，直到它读取了整个文件。然后你的覆盖停止显示任何东西。
*   `stream.read()`您没有显示为被覆盖的其他签名。如果任何代码路径最终调用其他`read`方法之一，那么您的计数将被取消。

**回复：MyStream 每次都没有重新开始**

`MyStream`争论是否已经解决？还是重新用于新流？您的代码仅在构造函数中“重新启动”，因此请*确保*在更改传入流时对象已被释放和重新构造。

您可以通过在到达 EOF 时显示某些内容来测试递归 EOF 情况。

如果添加静态变量来计算应用程序调用`MyStream.Read`和方法进入/退出，则可以测试意外递归。如果它们不匹配，则`FileStream`进行内部（意外递归）调用。

-杰西

# iphone - NSFetchedResultsController 的 didChangeObject 未被调用

> ID：10769305
> 
> 赞同：0
> 
> 时间：2012-05-26T19:54:20.367
> 
> 标签：iphone, objective-c, ios, nsfetchedresultscontroller

我已将 NSFetchtedResultsController 指定为属性...

```
@property (nonatomic, strong) NSFetchedResultsController *controller; 
```

...并将代表设置为我的班级。

```
self.controller.delegate = self; 
```

然后我实现了标题中提到的方法并在其中放置了一个断点。

```
 - (void)controller:(NSFetchedResultsController *)controller 
                didChangeObject:(id)anObject 
                atIndexPath:(NSIndexPath *)indexPath 
                forChangeType:(NSFetchedResultsChangeType)type 
                newIndexPath:(NSIndexPath *)newIndexPath 
    {    

    => BREAKPOINT <=

    } 
```

我为控制器创建了获取请求，如下所示：

```
 NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"Post"]; 
   // ... some sort ...
    self.controller = [[NSFetchedResultsController alloc]
                       initWithFetchRequest:fetchRequest
                       managedObjectContext:self.context
                       sectionNameKeyPath:nil
                       cacheName:@"cache"]; 
```

现在我将一些“Post”类型的 NSManagedObjects 存储在另一个类中，但**从未调用过**`didChangeObject`该方法（我的断点在其中）。

 **有谁知道出了什么问题？

**更新 #1：从服务器获取一些帖子并将其存储到上下文中的类使用 GCD 异步执行。**

**更新#2：我以另一种方式尝试过，因为在多线程环境中使用上下文不起作用。（感谢 svena）现在`ServerConnection`在异步块中运行（使用 GCD）并在主线程上执行选择器。此选择器方法将帖子存储在数据库中，并且应该更新 tableview。基本上，我认为当我在这种情况下存储一些东西时，`didChangeObject`应该自动调用该方法吗？但事实并非如此。：-/**

我添加了一个简短的序列图来说明我当前的状态。 ![示例序列图](../Images/6247dfe2d26e82507ba4514cf4d3cec7.png) 有谁知道为什么这不起作用？请耐心等待。我是 CoreData 和 Objective-C 的新手。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T15:35:03.360

> 更新 #1：从服务器获取一些帖子并将其存储到上下文中的类使用 GCD 异步执行。

如果是这种情况，您如何为 GCD 块创建托管对象上下文？上下文或托管对象都不是线程安全的，不能在线程之间传递。此外，对一个线程上的上下文所做的更改不会自动传播到其他线程上的上下文。在 iOS5 之前，这意味着侦听 NSManagedObjectContextDidSaveNotification 并通过使用 mergeChangesFromContextDidSaveNotification: 方法将其合并到您的 NSFetchedResultsController 实例中以查看它。

顺便说一句很棒的图表:)

您能否在以下位置显示代码：

1.  创建你的上下文
2.  在主线程上执行块以插入数据**

# ruby - 我可以告诉或提示 RubyMine 局部变量或实例变量是什么类型吗？

> ID：10769307
> 
> 赞同：20
> 
> 时间：2012-05-26T19:54:37.693
> 
> 标签：ruby, rubymine

我正在尝试利用 RubyMine 快速文档和代码完成。我很高兴地发现它集成了 YARD 风格的评论：

```
# @param [Numeric] width
# @param [Array<String>] values
# @return [Widget]      
def foo(width, values) 
```

...这些注释非常适用于参数、返回类型，甚至是类型化的集合。但是我找不到任何类似的标签，例如实例或局部变量，并且我很确定 Ruby 中没有可用的类型转换（我有没有提到我是新手？）

有没有办法让 RubyMine 了解本地和/或实例变量的类型？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-08-22T21:36:54.393

根据最近发布到 Matt Connolly 引用的问题跟踪器的评论，这似乎**即将到来：http:** [//youtrack.jetbrains.com/issue/RUBY-9142#comment=27-787975](http://youtrack.jetbrains.com/issue/RUBY-9142#comment=27-787975)

“局部变量可以带有或不带有变量名的注释：”

```
# @type [String]
my_var = magic_method

# @type my_var [String]
my_var = magic_method

# @type [String] my_var
my_var = magic_method

# @type [String] my_var And some documentation is allowed
my_var = magic_method 
```

“还支持多重分配：”

```
# @type my_var [String] The first part
# @type other_var [Range] The second part
my_var, other_var = magic_method 
```

“但是在多重赋值的情况下，没有 var name 的表单将不起作用（这是有争议的，但我倾向于它可能会导致一些错误）

也可以注释块参数："

```
method_with_block do
  # @type [String] param1
  # @type [Range] param2
  | param1, param2 |
  # some code...
end 
```

“需要注意的是，类型注释要放在 do 或 { 和块参数列表之前，以帮助避免可能的歧义。对于单行代码，它看起来很麻烦，但我不确定它们是否会很重注释了。无论如何，任何建议都非常欢迎。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T16:48:23.387

对于这个特定问题，这不是 100% 的答案，但可以指出其他有用的技巧。

在测试中，我这样做是为了欺骗 RubyMine (5.0.2)

```
user = users(:normal) || User.new 
```

因为有了固定装置，我确信 users(:first) 将返回对象，并且由于 Use.new - IDE 认为它应该是 User 实例。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-24T09:13:07.987

看来不是。我建议在问题跟踪器中查找现有的功能请求，并添加让您的声音在那里被听到。例如：

[http://youtrack.jetbrains.com/issue/RUBY-9142](http://youtrack.jetbrains.com/issue/RUBY-9142)

**更新**

此功能现在随 RubyMine 7.0 (Tsubaki) EAP (138.1968) 及更高版本一起提供（但请注意，Rubymine 7.0 目前处于 EAP（即测试版）中，并且总有可能无法进入最终发行版。）

# c# - ASP.NET-Gridview 不显示图像

> ID：10769310
> 
> 赞同：0
> 
> 时间：2012-05-26T19:55:27.413
> 
> 标签：c#, asp.net, sql-server, gridview

```
<form id="form1" runat="server">
<div>

    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataKeyNames="bookname"  Height="504px" 
        Width="289px">
        <Columns>
            <asp:TemplateField HeaderText="image">
                <ItemTemplate>
                    <asp:Image ID="Image1" runat="server" 
                        ImageUrl='<%# String.Format("~/path/to/image/" + Eval("image")) %>' />
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Eval("image") %>'></asp:TextBox>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="bookname" HeaderText="bookname" ReadOnly="True" 
                SortExpression="bookname" />
            <asp:BoundField DataField="price" HeaderText="price" SortExpression="price" />
        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
        SelectCommand="SELECT [image], [bookname], [price] FROM [books]">
    </asp:SqlDataSource> 
```

我的图像字段保存​​在（SQL server 2005）中...并通过文件上传按钮将图像插入数据库...现在我想在gridview中显示数据但不显示图像字段和gridview中显示的其他字段很好，因为其他字段是文本格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T22:18:23.453

```
<asp:Image ID="Image1" runat="server" ImageUrl='<%# String.Format("~/path/to/image/{0}" , Eval("image")) %>' /> 
```

您的问题是`string.Format`接受参数并且您正在使用 concat 操作。这里我用过`{0} - stands for argument at/for index 0`。同样对于多个参数，您可以使用`string.Format("{0} {1} {2}",var1,var2,var3).`

同样在上面我假设 {0} 将被替换为带有扩展名的文件名，如 abc.png。

```
<form id="form1" runat="server">
    <div>
       <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            DataKeyNames="bookname"  Height="504px" 
            Width="289px">
            <Columns>
                <asp:TemplateField HeaderText="image">
                    <ItemTemplate>
                        <asp:Image ID="Image1" runat="server" 
                            ImageUrl='<%# String.Format("~/path/to/image/{0}" , Eval("image")) %>' />
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox1" runat="server" Text='<%# Eval("image") %>'></asp:TextBox>
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:BoundField DataField="bookname" HeaderText="bookname" ReadOnly="True" 
                    SortExpression="bookname" />
                <asp:BoundField DataField="price" HeaderText="price" SortExpression="price" />
            </Columns>
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
            SelectCommand="SELECT [image], [bookname], [price] FROM [books]">
        </asp:SqlDataSource> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T22:10:32.960

当您的图像存储到数据库中时，您需要使用处理程序来检索图像。您可以在这里获得参考[http://www.codeproject.com/Articles/271590/Show-an-image-saved-in-a-SQL-Table-on-an-ASP-Net-I](http://www.codeproject.com/Articles/271590/Show-an-image-saved-in-a-SQL-Table-on-an-ASP-Net-I)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T20:05:01.373

我希望像

```
ImageUrl='<%# this.ResolveUrl("~/path/to/image/" + Eval("image")) %>' /> 
```

而不是`string.Format`

# mysql - 使用 MySQL Workbench 在已建立索引的列上创建外键

> ID：10769312
> 
> 赞同：4
> 
> 时间：2012-05-26T19:55:34.543
> 
> 标签：mysql, foreign-keys, indexing, mysql-workbench

我正在使用 Workbench 创建一个数据库模型并创建下表：

```
CREATE  TABLE IF NOT EXISTS `Database`.`table1` (
  `idtable1` INT NOT NULL ,
  `uniquecolumn` INT NOT NULL ,
  PRIMARY KEY (`idtable1`) ,
  UNIQUE INDEX `UniqueIndex` (`uniquecolumn` ASC) )
ENGINE = InnoDB 
```

它在我的第二列上有一个主键和一个唯一键。

当我在它们上创建外键约束时，Workbench 会自动添加两个索引：

```
CREATE  TABLE IF NOT EXISTS `Database`.`table1` (
  `idtable1` INT NOT NULL ,
  `uniquecolumn` INT NOT NULL ,
  PRIMARY KEY (`idtable1`) ,
  UNIQUE INDEX `UniqueIndex` (`uniquecolumn` ASC) ,
  INDEX `FKOne` (`idtable1` ASC) ,                   //here
  INDEX `FKTwo` (`uniquecolumn` ASC) ,               //(I don't want this!)
  CONSTRAINT `FKOne`
    FOREIGN KEY (`idtable1` )
    REFERENCES `Database`.`table2` (`idtable2` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FKTwo`
    FOREIGN KEY (`uniquecolumn` )
    REFERENCES `Database`.`table2` (`idtable2` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB 
```

（以上是我的模型添加外键后的正向工程脚本）

我现在有四个索引。

这是 MySQL 参考手册所说的：

> 在引用表中，必须有一个索引，其中外键列按相同顺序列为第一列。如果引用表不存在，则会在引用表上自动创建此类索引。

所以我知道没有必要创建索引`FKOne`和`FKTwo`，因为已经有一个主键和一个唯一索引，在相同的列上，以相同的顺序。然而 MySQL Workbench 不允许我删除索引`FKOne`和`FKTwo`. 我认为我应该能够做到这一点：

```
CREATE  TABLE IF NOT EXISTS `Database`.`table1` (
  `idtable1` INT NOT NULL ,
  `uniquecolumn` INT NOT NULL ,
  PRIMARY KEY (`idtable1`) ,
  UNIQUE INDEX `UniqueIndex` (`uniquecolumn` ASC) ,
  CONSTRAINT `FKOne`
    FOREIGN KEY (`idtable1` )
    REFERENCES `Database`.`table2` (`idtable2` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FKTwo`
    FOREIGN KEY (`uniquecolumn` )
    REFERENCES `Database`.`table2` (`idtable2` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB 
```

我对吗？这段代码会起作用吗？有什么方法可以用 Workbench 做到这一点吗？（除了在正向工程之前的最后一刻删除这两行）。

或者也许 MySQL 足够聪明，可以避免创建完全冗余的索引，我不必担心......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T00:08:57.617

（我假设这是在定义模型时。）

请参阅[Bug 53277](http://bugs.mysql.com/bug.php?id=53277)，其中我提到了以下晦涩的解决方法：

您从要删除的外键及其相应的生成索引开始。确保密钥（至少暂时）在单个非唯一列上。在索引选项卡中，将类型更改为唯一。然后转到现在选中 UQ 的 Columns 选项卡，然后取消选中它。不需要的索引被消除了！

# ms-access - 嵌套 if 语句

> ID：10769315
> 
> 赞同：-7
> 
> 时间：2012-05-26T19:55:52.567
> 
> 标签：ms-access

我不知道 SQL 也不知道嵌套语句。请根据我的条件和下面的 SQL 向我提供完整的 SQL 以复制并粘贴到我的 Access 查询中。非常感谢你，纳撒尼尔

**标准**：

1.  `if [POsoI].[PO_number]is like "*H", THEN [o].[SERVICE ID] must be equal to "HEAT TREAT"`

2.  `IF [POsoI].[PO_number] is like "*C", THEN [o].[SERVICE ID] must be equal to "COATING" or equal to "ZINC PLATING"`

3.  `IF [POsoI].[PO_number] is like "*G", THEN [o].[SERVICE ID] must be equal to "GRINDING"`

4.  `IF [POsoI].[.[PO_number] isnt like "*H" or like "*C" or like "*G", then [o].[SERVICE ID] must not be null and can not be equal to "HEAT TREAT" and can not be equal to "COATING" and can not be equal to"ZINC PLATING" and can not be equal to "GRINDING"`

    `SELECT DISTINCT o.SERVICE_ID FROM tbl_PO_service_order_input AS POsoI INNER JOIN SYSADM_OPERATION AS o ON (o.WORKORDER_LOT_ID = POsoI.WO_lot_ID) AND (POsoI.wo_Base_ID = o.WORKORDER_BASE_ID);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:48:59.850

```
SELECT DISTINCT IIf(RIGHT(TBL_PO_SERVICE_ORDER_INPUT.PO_NUMBER,1)='H' And SYSADM_OPERATION.SERVICE_ID='HEAT TREAT',SYSADM_OPERATION.SERVICE_ID,IIf(RIGHT(TBL_PO_SERVICE_ORDER_INPUT.PO_NUMBER,1)='C' And SYSADM_OPERATION.SERVICE_ID='CLOTHING' Or SYSADM_OPERATION.SERVICE_ID='ZINC PLATING',SYSADM_OPERATION.SERVICE_ID,IIf(RIGHT(TBL_PO_SERVICE_ORDER_INPUT.PO_NUMBER,1)='G' And SYSADM_OPERATION.SERVICE_ID='GRINDING',SYSADM_OPERATION.SERVICE_ID,IIf(RIGHT(TBL_PO_SERVICE_ORDER_INPUT.PO_NUMBER,1)<>'G' Or RIGHT(TBL_PO_SERVICE_ORDER_INPUT.PO_NUMBER,1)<>'H' Or RIGHT(TBL_PO_SERVICE_ORDER_INPUT.PO_NUMBER,1)<>'C' And SYSADM_OPERATION.SERVICE_ID Is Not Null,SYSADM_OPERATION.SERVICE_ID,
IIf(SYSADM_OPERATION.SERVICE_ID<>'HEAT TREAT' And SYSADM_OPERATION.SERVICE_ID<>'COATING' And SYSADM_OPERATION.SERVICE_ID<>'ZINC PLATING' And SYSADM_OPERATION.SERVICE_ID<>'GRINDING',SYSADM_OPERATION.SERVICE_ID)))))
FROM SYSADM_OPERATION INNER JOIN TBL_PO_SERVICE_ORDER_INPUT ON ([TBL_PO_SERVICE_ORDER_INPUT].WO_LOT_ID=[SYSADM_OPERATION].WORKORDER_LOT_ID) AND ([TBL_PO_SERVICE_ORDER_INPUT].WO_BASE_ID=[SYSADM_OPERATION].WORKORDER_BASE_ID); 
```

# c# - 将新列中的按钮添加到 DataGrid 中的所有行

> ID：10769316
> 
> 赞同：9
> 
> 时间：2012-05-26T19:56:03.377
> 
> 标签：c#, button, datagridview, row

我有一个`DataGridView`对象：

```
dataGridView1.DataSource = an.peaks; 
```

（an.peaks 是一个`List<Point>`对象。`Point`类型有 3 个属性：x、y、z）

女巫在运行时生成下一张表：（显然我`Image`还不能上传，因为我是新用户，所以我会尝试绘制它：）

```
____|_x__|_y__|_z__|[new column ]
____|_11_|_12_|_13_|[text/button] <==\
____|_20_|_30_|_40_|[text/button] <== } Add text if something or button if something else.
____|_50_|_60_|_70_|[text/button] <==/ 
```

我想在满足某些条件的每一行的新列中添加按钮（如图所示）。如果不满足条件，请添加一些文本。

示例：如果数据库中已经存在该点，则显示它的物质名称（每个点代表一种物质）。如果不添加按钮“添加”到相应的行，将新点添加到数据库中。

条件不是问题 - 它们仅用于示例。问题是将按钮/文本添加到每一行以及新按钮的单击事件。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-27T11:43:26.977

使用`DataGridView`. 你需要做的是：

### 添加 DataGridViewButtonColumn 类型的列

[`DataGridViewButtonColumn`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewbuttoncolumn.aspx)是标准`DataGridView`列类型。它可以通过设计器添加，但我通常更喜欢使用代码（通常在表单构造函数中）。

```
DataGridViewButtonColumn col = new DataGridViewButtonColumn();
col.UseColumnTextForButtonValue = True;
col.Text = "ADD";
col.Name = "MyButton";
dataGridView1.Columns.Add(col); 
```

设置`UseColumnTextForButtonValue`为 true 意味着该`Text`属性将应用于所有按钮，为它们提供“添加”按钮文本。您还可以使用`DataPropertyName`指向网格数据源中的列来提供按钮文本，甚至可以直接设置每个单元格的值。

### 将按钮更改为文本

一旦你有了你的按钮栏，你就想把特定的按钮变成文本。为此，您可以将按钮类型的单元格替换为文本类型之一。您可以在很多地方执行此操作，但最好的方法之一是在`DataBindingComplete`事件处理程序中 - 一旦网格绑定并准备好显示但在绘制之前，此事件将触发。

下面我只是抓取索引为 1 的行，但您也可以检查每个行的`Value`属性。

```
void dataGridView1_DataBindingComplete(object sender,
    DataGridViewBindingCompleteEventArgs e)
{
    dataGridView1.Rows[1].Cells["MyButton"] = new DataGridViewTextBoxCell();
} 
```

### 响应按钮点击

问题的最后一部分是响应按钮点击。这有点笨拙 - 您需要使用`CellClick`事件或`EditingControlShowing`整个网格的事件。

*   细胞点击

    ```
    private void DataGridView1_CellClick(object sender,
        System.Windows.FormsDataGridViewCellEventArgs e) 
    { 
        if (DataGridView1.Columns[e.ColumnIndex].Name == "MyButton") 
        { 
            // button clicked - do some logic
        } 
    } 
    ```

*   编辑控件显示

    ```
    void dataGridView1_EditingControlShowing(object sender,
         DataGridViewEditingControlShowingEventArgs e)
    {
        if (e.Control is Button)
        {
            Button btn = e.Control as Button;
            btn.Click -= new EventHandler(btn_Click);
            btn.Click += new EventHandler(btn_Click);
        }
    }

    void btn_Click(object sender, EventArgs e)
    {
        int col = this.dataGridView1.CurrentCell.ColumnIndex;
        int row = this.dataGridView1.CurrentCell.RowIndex;
        // Rest of the logic goes here!
    } 
    ```

在您的情况下，编辑控件方法可能是最好的，因为它不会响应单击已替换为文本的按钮。此外，这种方式更像是您如何响应表单上的任何其他按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T23:42:09.740

您可以将[WPF 宿主控件](http://msdn.microsoft.com/en-us/library/ms742215.aspx)添加到 WinForms 项目并将 DataGrid 与[CellTemplateSelector](http://msdn.microsoft.com/en-us/library/ms609837%28v=vs.100%29.aspx)一起使用。例如：

```
<DataGrid x:Name="grid" AutoGenerateColumns="False" x:FieldModifier="private">
  <DataGrid.Resources>
    <local:PointDataTemplateSelector x:Key="pointDataTemplateSelector" />
    <DataTemplate x:Key="buttonTemplate">
      <Button Click="OnAddButtonClick" Tag="{Binding Mode=OneWay}">Add</Button>
    </DataTemplate>
    <DataTemplate x:Key="textTemplate">
      <TextBlock>Exists</TextBlock>
    </DataTemplate>
  </DataGrid.Resources>
  <DataGrid.Columns>
    <DataGridTextColumn Header="X" Binding="{Binding X}" />
    <DataGridTextColumn Header="Y" Binding="{Binding Y}" />
    <DataGridTemplateColumn Header="Select" CellTemplateSelector="{StaticResource pointDataTemplateSelector}"></DataGridTemplateColumn>
  </DataGrid.Columns>
</DataGrid> 
```

和选择器类：

```
public class PointDataTemplateSelector : DataTemplateSelector {
    public override DataTemplate SelectTemplate(object item, DependencyObject container) {
        var element = container as FrameworkElement;
        if (element != null && item != null && item is Point) {
            var point = (Point)item;

            // Logic here.
            if (point.X >= 5) {
                return element.FindResource("buttonTemplate") as DataTemplate;
            }
            return element.FindResource("textTemplate") as DataTemplate;
        }

        return null;
    }
} 
```

它可能比 WinForms 方式更容易。

# python - FreqDist，python中的平方和值

> ID：10769320
> 
> 赞同：2
> 
> 时间：2012-05-26T19:56:16.867
> 
> 标签：python, nltk

我有 python 2.7 代码来对 FreqDist （即 NLTK 频率分布）中的值进行平方，并对所有平方求和。

例如，由此： 你应该得到： 2*2 + 1*1 + 1*1 + 1*1 = 7

这对我有用，但我想知道是否有比这“更好”的方法：

```
 for word, frequency in t.freq_dist.iteritems():
            total += frequency*frequency 
```

我之所以问，是因为我需要再次遍历 freq_dist 以获取其他内容；就在这段代码之后，所以我认为如果有更好的方法，必须循环两次并不是一个好习惯......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:57:45.670

```
lst = [2, 1, 1, 1] 
```

使用[生成器表达式](http://docs.python.org/reference/expressions.html#generator-expressions)：

```
sum(i**2 for i in lst) 
```

给

```
7 
```

或者，[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)也可以：

```
sum([i**2 for i in lst]) 
```

如果您稍后出于某种目的不需要平方值，那么生成器表达式是更好的选择，因为它只根据需要创建一次值，而列表推导在内存中创建整个列表。有关更多信息，请参阅[比较列表理解与生成器](https://stackoverflow.com/questions/47789/generator-expressions-vs-list-comprehension)的这个 SO 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T19:59:51.813

如果你使用 Numpy，你可以对数组进行平方：

```
>>> from numpy import array
>>> values = array([2, 1, 1, 1])
>>> sum(values**2)
7 
```

如果您要进行任何重复的、繁重的计算，我建议您使用 Numpy。它会给你巨大的速度提升。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T19:59:58.087

如果第二个循环依赖于`total`，不，不会有更好的方法来做到这一点。如果它*没有*这种依赖性，是的，更好（即更快）的方法是将来自另一个循环的工作包含在当前循环中。但实际上加速应该不显着。

# google-analytics - 如何在 Google Analytics 中将 iPad、iPhone 和 iPod 组合成“iOS”？

> ID：10769328
> 
> 赞同：0
> 
> 时间：2012-05-26T19:58:18.833
> 
> 标签：google-analytics, tracking, user-agent

在我的操作系统数据中，iPhone、iPad 和 iPod 显示为单独的操作系统。有没有办法将所有这三个组合成一个单一的“iOS”操作系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T17:06:45.263

您不能在 GA 中执行此操作。您必须导出到 excel 之类的文件并自己分组。另一种选择是编写自己的操作系统检测代码并将它们作为分组值输出到 GA 自定义变量，然后查看自定义变量报告。

# php - mysql 排序大于

> ID：10769330
> 
> 赞同：1
> 
> 时间：2012-05-26T19:59:16.943
> 
> 标签：php, mysql, database

我如何使用大于从数​​据库中选择一些东西？

我使用此代码但没有运气

```
SELECT *FROM X WHERE Y=:5 **ORDER BY (Z > 5) DESC LIMIT 5** 
```

我只是想取 Z 大于 5 但只有 5 个的 X

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:32:22.580

我认为您可以尝试这样做以无限制地获得结果：

```
SELECT * FROM X WHERE Y = 5 AND Z > 5 ORDER BY Z DESC 
```

如果你真的需要限制你的结果：

```
SELECT * FROM X WHERE Y = 5 AND Z > 5 ORDER BY Z DESC LIMIT 5 
```

检查我为您制作的小提琴： [http ://sqlfiddle.com/#!2/56f17/3](http://sqlfiddle.com/#!2/56f17/3)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T20:05:45.323

我不太确定你想做什么。这将从表`X`中选择`Y`字段大于 5 的前五个元组。此外，输出将按字段排序`Z`。

```
SELECT * FROM X WHERE Y > 5 ORDER BY Z DESC LIMIT 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T20:07:39.393

这行不通……您按字段排序，而不是按顺序排列条件。也许你可以试试

```
SELECT * FROM X WHERE Y=5 and Z > 5 ORDER BY Z DESC LIMIT 5 
```

# iphone - iPhone：inputAccessoryView 上的上一个/下一个按钮的透明度不同

> ID：10769335
> 
> 赞同：0
> 
> 时间：2012-05-26T19:59:56.130
> 
> 标签：iphone, uitextfield, uitoolbar, uisegmentedcontrol

**简短版本**：我有一个使用 UISegmentedControl 的工作解决方案，但我不喜欢它的外观。当我使用 Safari 时，当它位于输入字段列表的开头或结尾时，它会“变暗”上一个或下一个。我无法说服 UISegmentedControl 这样做，那么他们是怎么做到的呢？

**长版**：我有一个 UITableView，其中包含具有文本字段的单元格。文本字段采用数字输入（通常是浮点数）。这意味着我使用keyboardType = UIKeyboardTypeDecimalPad 呈现键盘。这也意味着没有返回按钮，所以我需要一种在单元格之间移动的好方法，而不是触摸单元格。我想像 iOS Safari 那样做——用一个小工具栏写着“上一个 | 下一个……完成”。

我有代码可以完成所有这些工作（将 textField.inputAccessoryView 设置为具有适当按钮的 UIToolbar 的实例），将 UISegmentedControl 用于上一个和下一个按钮。我有这样的工作，以便下一个移动到下一个单元格，前一个移动到上一个单元格。

那我为什么会在这里？我无法让 iOS Safari 中看到的变暗的上一个/下一个行为与 UISegmentedController 一起使用，如果我不需要的话，我真的不想自己实现所有这些（那时，我的 CCB 将调用一个它用于拒绝更改的两条规则中的一条： 规则 1）如果我认为这不是一个好主意，那么我不会实施它；规则 2）如果这很容易，我可能会这样做）。

（我会张贴图片，但我对 SO 太陌生了 - 抱歉）

当我尝试做同样的事情时，它看起来和行为就像一个 Safari 中间文本字段，但我似乎无法让它看起来像第一个或最后一个文本字段的 Safari 版本。

我尝试过启用、选择甚至更改条形背景颜色，但它们似乎都不起作用。背景颜色似乎最接近，但我必须根据第一个、最后一个或中间的时间来使用 3 个不同的工具栏，即使这样也不是很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T01:46:47.967

解决了。问题是在 IB 中设置的各个段的“启用”设置不会使其成为可执行文件。我必须以编程方式禁用视图控制器中的上一个或下一个段。一旦我这样做了，它现在就如我所愿。

当我在 IB 中设置 UISegmentedControl 时，我将一个段设置为启用，另一个设置为禁用（== 未启用）。在调试器中，我开始浏览各个段的设置，发现*实际上*将段设置为禁用可以使其以我想要的方式工作。

例如，在包含附加到“nextControl”的 UISegmentedControl 的“nextToolbar”中，只有“下一步”按钮应显示为活动状态。这意味着我必须将上一个按钮设置为禁用。Previous 按钮位于索引 0，因此禁用它意味着在使用它之前在某处执行此操作（我将其放在 viewDidLoad 中：）：

```
[self.nextControl setEnabled:NO forSegmentAtIndex:0] 
```

同样，对于 prevControl，只有“上一个”按钮应该处于活动状态，我使用：

```
[self.previousControl setEnabled:NO forSegmentAtIndex:1] 
```

# mysql - 使用 .SQL 文件创建 MySQL 数据库

> ID：10769344
> 
> 赞同：15
> 
> 时间：2012-05-26T20:01:41.080
> 
> 标签：mysql, mysqldump

我对MySQL一无所知。但我正在尝试使用 Visio 对 MySQL 数据库进行逆向工程。我知道我应该采取哪些步骤来执行此操作，但我无法让我的数据库显示在“数据库”部分（如下所示）：

![在此处输入图像描述](../Images/a53f076c78fd1c3b304eb09832b5b10b.png)

如何使用 .SQL 文件创建 MySQL 数据库并使其显示在此列表中？我已经尝试过这段代码：mysql -u username -p password database_name < filename.sql 当然使用我自己的凭据。但这似乎不起作用。如果要使用此语句，应将 .SQL 文件放在哪个文件夹中？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-26T20:33:28.333

1）创建文件“filename.sql”

2) 在要导入此文件的数据库中创建一个数据库。

3) 从命令提示符/终端，移动到您创建“filename.sql”的目录。

4) 运行命令：`mysql -u username -p password database_name < filename.sql`. （您还可以提供文件的正确路径并从任何地方运行此命令）。可能是您没有为 MySQL 设置密码。如果是这样，`mysql -u username database_name < filename.sql`也将工作。

在您的情况下，如果您创建了一个名为**ojs**的数据库，并且还在**C: 驱动器中创建了一个名为****ojs.sql**的文件，则运行以下命令：

 *****编辑：***将路径放在引号内。

```
mysql -u username -p password ojs < "C:\ojs.sql" 
```

还有另一种在 mysql 中导入表的方法。你也可以这样做：

1）连接你的数据库

2）键入命令“使用ojs；”

3) 输入命令“source C:/ojs.sql”

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-05-02T02:14:04.363

大多数创建数据库的 MySQL SQL 文件“即时”创建数据库，因此您通常不需要做任何事情，除了：

1.  登录

    `mysql -u [username] -p[password]`

（注意：确保在 -p 和 [password] 之间不包含空格（''）字符。MySQL 会认为 [password] 是您要连接的数据库的名称。'general' 日志-in（上图）不假定您要连接到任何特定模式。）

1.  源文件（不要在文件名周围使用引号）

    `mysql> source [database_creation_file].sql`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-21T07:32:18.430

你可以简单地使用 mysql workbench 来完成

1> 创建一个新的查询选项卡 2> `CREATE DATABASE database_name;` 3> `USE database_name;` 4> 打开 filename.sql 文件并执行它`ctrl + shift + enter` 5> 创建 filename.sql 中的所有表**

# iphone - 是否可以从 iphone 静默发送位置数据（当然需要用户同意）？

> ID：10769348
> 
> 赞同：0
> 
> 时间：2012-05-26T20:02:14.427
> 
> 标签：iphone, ios, geolocation

我想知道是否有可能创建一个应用程序来发送我 9 岁的 iPhone 位置，假设每 30 分钟发送一次，即使 iPhone 未处于活动状态。如果没有，那么他每次使用手机时都可以发送它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T21:28:28.887

为什么不使用现有的解决方案？

[http://www.apple.com/icloud/features/find-my.html](http://www.apple.com/icloud/features/find-my.html)

请参阅查找我的朋友 - 它也有家长限制。这正是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:05:22.410

您可能正在寻找`startMonitoringForReigion:desiredAccuracy:`. 此功能将允许您将 iPhone 设置为在越过定义的边界时通知您的应用程序。当您收到此通知时，我相信您可以将该信息发送到服务器或任何地方。

也就是说，如果您想要监控孩子的位置，那么 Apple 的“查找我的朋友”应用程序会让您非常幸运。

# php - 使用 base64 编码表单输入并通过 get 方法发送

> ID：10769350
> 
> 赞同：0
> 
> 时间：2012-05-26T20:02:56.493
> 
> 标签：php, base64

我有一个带有一个文本字段和一个提交按钮的表单。表单使用 get 方法发送输入数据。我想将文本字段的用户输入解码为 base64 并将其添加到 url 而不是单击提交按钮时的纯文本。

例如：而不是[http://www.example.com/send.php?inputfield=hello_world](http://www.example.com/send.php?inputfield=hello_world)我想要 URL http://www.example.com/send.php?inputfield=[base64 加密“hello_world "]。

有没有一个纯粹的 php 解决方案可以做到这一点？我知道，它可以通过使用 Javascript 来实现，但我想完全用 PHP 来实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T20:08:01.217

这是一个客户端问题，所以不，您不能在 PHP 中执行此操作，因为数据甚至在 PHP 触及它之前就已发送。

另外，不要将 base64 与加密混淆，因为它在任何方面都不安全。它是为通过基于文本的协议传输二进制文件而设计的，而不是为了安全。

# python - python：如何从亚马逊查找产品数据

> ID：10769352
> 
> 赞同：0
> 
> 时间：2012-05-26T20:03:47.713
> 
> 标签：python, amazon-web-services

我正在尝试使用 python-amazon-product-api 库来访问有关亚马逊产品的数据。我的代码如下所示：

我正在尝试通过它的 ASIN 查找产品以获取以下数据：标题、图像、描述。到目前为止出现以下错误：

```
In [57]: result = api.item_lookup(id = 'B007R07BK8')
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
/home/oleg/Documents/<ipython-input-57-d3516809d324> in <module>()
----> 1 result = api.item_lookup(id = 'B007R07BK8')

TypeError: item_lookup() takes exactly 2 arguments (1 given)
In [58]: 
```

需要关于我做错了什么的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T23:22:07.600

据我所知，如果函数定义是，`(self, item_id, **params)`那么您必须提供`item_id`参数（`self`is `api`）。您虽然提供了`id`一个因此进入`params`字典而`item_id`没有价值的人。

我最好的猜测是你必须`id`用`item_id`这里代替，但我可能是错的，你必须`item_id`从其他地方取。

# mysql - 选择有孩子的父母并为每个父母选择孩子的数量

> ID：10769354
> 
> 赞同：1
> 
> 时间：2012-05-26T20:04:06.683
> 
> 标签：mysql, select

我需要通过一个查询为每个父母选择有孩子的父母和孩子的数量。现在我使用下一个查询：

```
SELECT table_a.*, (SELECT COUNT(*) FROM table_b WHERE table_b.LID=table_a.LID AND table_b.Yes=0) AS Co
FROM table_a 
WHERE table_a.Ind>0 ORDER BY table_a.Ind ASC 
```

我想我做错了......是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:11:24.087

您的解决方案应该可以工作，但是对于每一行都会执行子选择，`table_a`使其成为非最佳解决方案。更好的解决方案是`JOIN`两个表并使用 a`GROUP BY`以更低的性能成本获得相同的结果。

```
SELECT table_a.LID
       , COUNT(*) AS Co
FROM   table_a
       LEFT OUTER JOIN table_b ON table_b.LID = table_a.LID AND table_b.Yes = 0
WHERE  table_a.Ind > 0 
GROUP BY
       table_a.LID
ORDER BY 
       table_a.Ind ASC 
```

另外，在我看来，您应该始终为您的表设置别名，并使用该别名使语句更简洁、更易于阅读。

```
SELECT a.LID
       , COUNT(*) AS Co
FROM   table_a AS a
       LEFT OUTER JOIN table_b AS b ON b.LID = a.LID AND b.Yes = 0
WHERE  a.Ind > 0 
GROUP BY
       a.LID
ORDER BY 
       a.Ind ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T20:11:49.013

你是对的 - 你做错了。即使它有效，但它是获得您喜欢的结果的错误方法。为了从一对多关系中获得总数，我们为此使用**连接和分组**：

```
SELECT a.ind, count(*) Total 
FROM a JOIN b ON a.lid = b.lid
WHERE a.ind>0 AND b.yes = 0
GROUP BY a.ind
ORDER BY a.ind 
```

# c# - XNA SpriteSortMode 速度和着色器 (4.0)

> ID：10769356
> 
> 赞同：0
> 
> 时间：2012-05-26T20:04:28.753
> 
> 标签：c#, xna, shader

晚上下午;

我开始着手编写一个小定制 2D XNA 引擎供我个人使用。在决定如何绘制 2D 精灵时，我陷入了困境：

首先，我想在某些时候实现一些*自定义着色器效果*。我在互联网上阅读的每个教程都说我因此被迫使用**SpriteSortMode.Immediate**，除了一个，它说在 XNA 4.0 中不再需要。

此外，无论阴影效果如何，我都不确定哪种 SpriteSortMode 对我的方法来说是最快的。*不同精灵的排序/分层*绝对是必要的（即在游戏精灵前面有一个HUD，在背景前面有游戏精灵等）；但是实现自定义排序列表并按顺序调用 Draw() 或使用**BackToFront** / **FrontToBack**选项会更快吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T00:20:59.170

从 XNA 4.0 开始，您可以在任何精灵排序模式下使用自定义着色器效果。XNA 3.1 中的即时精灵排序模式非常糟糕。（见[http://blogs.msdn.com/b/shawnhar/archive/2010/04/05/spritesortmode-immediate-in-xna-game-studio-4-0.aspx](http://blogs.msdn.com/b/shawnhar/archive/2010/04/05/spritesortmode-immediate-in-xna-game-studio-4-0.aspx)）

关于排序，我会说将它们从前排序以获取透明精灵，从前到后排序以获取不透明精灵。请参阅：http: [//msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritesortmode.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritesortmode.aspx)
那里有一种额外有趣的模式（至少对于 2D 引擎而言），即纹理排序模式，它对需要纹理的绘制调用进行排序，从而减少状态变化。对于主要游戏精灵来说，这可能是一个巨大的性能胜利。

除非您的分析器另有说明，否则我不会太担心性能。SpriteBatch 做了很多批处理（是的，真的），这将是最大的性能改进，因为它最大限度地减少了状态更改的数量。

我能想到的提高性能的唯一其他方法是使用实​​例化，但我认为使用 XNA 可能是个坏主意（理想情况下，您至少需要 SM3.0 硬件和自定义顶点着色器；我不是确定如何与 SpriteBatch 类一起使用）。

# java - 如何将 2D 字符串 ArrayList 转换为简单的 2D 字符串数组？

> ID：10769357
> 
> 赞同：2
> 
> 时间：2012-05-26T20:04:31.923
> 
> 标签：java, arraylist, multidimensional-array

我有一个二维数组列表，如下所示

```
 ArrayList<ArrayList<String>> childrenSuperList = new ArrayList<ArrayList<String>>();
    ...
    childrenList = new ArrayList<String>();
    ...
    childrenSuperList.add(childrenList); 
```

如何将其转换为简单的字符串数组，例如

```
String s[][]= {{"a","b","c"},
{"d","e","f"},
{"a","b","c"}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T20:09:38.930

```
final String[][] r = new String[childrenSuperList.size()][];
int i = 0;
for (ArrayList<String> l : childrenSuperList) 
  r[i++] = l.toArray(new String[l.size()]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T20:18:58.480

您的列表可以有不同的大小，因此表格不会有固定的大小，但这没问题。

```
ArrayList<ArrayList<String>> childrenSuperList = new ArrayList<ArrayList<String>>();
// put some data
ArrayList<String> a = new ArrayList<>();
a.add("a1");
a.add("a2");
ArrayList<String> b = new ArrayList<>();
b.add("b1");
b.add("b2");
b.add("b3");

childrenSuperList.add(a);
childrenSuperList.add(b);

// you need to know sizes of array
String[][] array = new String[childrenSuperList.size()][];
int i = 0, j = 0;
for (ArrayList<String> row : childrenSuperList) {
    array[i] = new String[row.size()];
    j = 0;
    for (String str : row) {
        array[i][j] = str;
        j++;
    }
    i++;
}
System.out.println(Arrays.deepToString(array)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T20:11:05.507

有一种方法可以从 ArrayList 中获取字符串数组：

```
ArrayList listArray = new ArrayList();

listArray.add("One");
listArray.add("Two");
listArray.add("Three");

String []strArray = new String[3];
listArray.toArray(strArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T20:14:31.267

下面的代码将帮助您获得完美的完整结果。

```
public static void main(String[] args) {

    ArrayList<ArrayList<String>> val = new ArrayList<ArrayList<String>>();
    int arraySize = 0;
    int upperSize = 0;

    if (val != null) {
        ArrayList<String> arrayList = val.get(0);
        upperSize = val.size();
        if (arrayList != null) {
            arraySize = arrayList.size();
        }
    }

    int i = 0, j = 0;
    String[][] values = new String[upperSize][arraySize];
    if (val != null) {
        for (ArrayList<String> curr : val) {
            if (curr != null) {
                for (String currValue : curr) {
                    values[i][j++] = currValue;
                }
                i++;
            }
        }
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-19T05:26:31.093

```
import java.util.*; 
```

公共类 HelloWorld{

```
 public static void main(String []args){

     ArrayList<ArrayList<String>> parentList = new ArrayList<ArrayList<String>>();

    ArrayList<String> list=new ArrayList<String>();
    list.add("Joshan Stethem");
    list.add("Bruce Wills");
    list.add("Tom Cruse");
    list.add("Optimus Prime");
    System.out.println("Array List Hollywood : "+list);
    ArrayList<String> list1=new ArrayList<String>();
    list1.add("Salman Khan");
    list1.add("Shahrukh Khan");
    list1.add("AMir Khan");
    list1.add("Fawad Khan");   
     System.out.println("Array List Bollywood : "+list1);
       ArrayList<String> list2=new ArrayList<String>();
    list2.add("Rahat Fateh");
    list2.add("Arijit Singh");
    list2.add("KK");
    list2.add("Ankit Tiwari");   
     System.out.println("Array List Singers : "+list2);
    parentList.add(list);
    parentList.add(list1);
    parentList.add(list2);

 String[][] twodimArray = new String[parentList.size()][];
     int i = 0, j = 0;
 for (ArrayList<String> row : parentList) {
  twodimArray[i] = new String[row.size()];
   j = 0;
   for (String str : row) {
        twodimArray[i][j] = str;
         j++;
        }
       i++;
      }
 System.out.println("List of Artist : "+Arrays.deepToString(twodimArray));
     } 
```

}

# iphone - 在 PushScene 后 AppDelegate 中保留的 NSString 丢失

> ID：10769361
> 
> 赞同：0
> 
> 时间：2012-05-26T20:04:52.740
> 
> 标签：iphone, objective-c, xcode, nsstring, cocos2d-iphone

在我的 AppDelegate 中，靠近 init 方法的末尾，我调用了一个 [self setup] 方法。此方法从 URL 中获取字符串，对其进行修剪，并将字符串分配给名为 _songDirectory 的属性。

下面是它在头文件中的样子：

```
@property (retain) NSString *_songDirectory; 
```

以下是它在 [setup] 方法中的分配方式：

```
//set a URL string
NSString *urlString = [NSString stringWithFormat:@"http://www.blahblahblah.com/php/dev/blah.php?routine=blah"];

NSMutableString *infoString = [self getInfoStringFromURL: urlString];

//get the song directory as a string from the infostring
NSRange startIndex = [infoString rangeOfString:@"song_directory=="];
NSRange endIndex = [infoString rangeOfString:@"end_of_data=="];

_songDirectory = [NSString stringWithString: [infoString substringWithRange: NSMakeRange(startIndex.location + startIndex.length, endIndex.location - startIndex.location - startIndex.length)]];

NSLog(@"STRING IN APP DELEGATE: %@", _songDirectory); 
```

NSLog 在应用程序委托中调用时打印正确的字符串。但是，在我推送新场景后，我无法从中访问 _songDirectory。推送场景中的以下代码产生 EXC_BAD_ACCESS：

```
NSLog(@"STRING IN PUSHED SCENE: %@", [[[UIApplication sharedApplication] delegate] _songDirectory]); 
```

我可以使用上面的语句从应用程序委托中获取整数，而不是字符串。我会很感激一些见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:10:55.650

您将字符串直接分配给实例变量而不是属性，因此不会保留字符串。它应该`self._songDirectory = ...`代替`_songDirectory`（并且您可能应该调用 property `songDirectory`，前导下划线通常仅用于私有实例变量）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T20:11:41.153

你需要使用：

```
 self._songDirectory = [NSString stringWithString: [infoString substringWithRange: NSMakeRange(startIndex.location + startIndex.length, endIndex.location - startIndex.location - startIndex.length)]]; 
```

为了让物业工作。否则，您只是直接设置 ivar 并且不会发生保留。

# .net - 自定义 CLR 主机 - “暂停”/“恢复”应用程序

> ID：10769364
> 
> 赞同：2
> 
> 时间：2012-05-26T20:05:09.590
> 
> 标签：.net, clr, clr-hosting

最近，我一直在研究暂停和恢复 .Net 应用程序的能力，特别是着眼于能够暂停应用程序、存储其状态并稍后再次启动它。

我一直在研究通过编写自定义 CLR 主机提供的选项，这无疑是一种神秘的艺术。似乎自定义主机可以为任务、内存管理、锁等提供自己的实现。因此，从这里看来，我可能能够创建一个自定义 CLR 主机，它可以通过 ICLRTask 暂停和恢复应用程序，但我' m 不确定提供的接口是否有足够的钩子来暂停所有任务，将整个程序状态存储到磁盘，然后稍后再使应用程序恢复活力。有人可以明确告诉我这根本不可能吗？我也不介意它是否仅适用于一小部分应用程序，我只是对这里的可能性感到好奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T21:08:51.827

很抱歉不得不在你的游行中下雨，但这不会飞。ICLRTask 接口是应 SQL Server 团队的明确要求添加的。它们支持 SQLCLR 主机，这是 CLR 的自定义主机，允许程序员在存储过程中编写托管代码。他们要求 CLR 团队打破托管线程和操作系统线程之间的硬链接，即当前框架中的 ProcessThread。旨在将托管线程实现为纤程，这是当时 SQL Server 的核心功能。

这实际上并没有发生，他们无法获得足够的可靠性并放弃了该项目。而且这个项目很快就没有理由让它工作了，光纤无法与拥有自己的 L1 缓存的多核 CPU 相匹敌。

这与你想要完成的事情没有任何关系。到目前为止，除了可靠地捕获进程状态之外，最难解决的问题是您无法真正处理正在执行本机代码的线程。特别是那种调用 winapi 函数并阻塞内核驱动程序以完成 I/O 请求的类型。您无法捕获内核状态，也没有钩子。向 pinvoke 编组器添加钩子会使其太慢。Hibernate 是一个系统特性，它不能是一个进程特性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T21:28:30.510

当 Mono 运行时被集成为 Second Life 脚本引擎时，暂停正在运行的进程，然后序列化并移动到另一台机器（或稍后）并恢复的能力是在 Mono 运行时上实现的。这是几年前的事了，我不确定这项工作是否被重新合并到开源 Mono 代码中。但据所有报道，这是一次成功的演习。

来自 Miguel 的这篇博客文章可能是一个好的开始[http://tirania.org/blog/archive/2008/Jan-29.html](http://tirania.org/blog/archive/2008/Jan-29.html)并且有更多指向 LANG.NET 视频的链接，其中讨论了 Mono 工作的第二人生。

[关于另一篇文章](http://tirania.org/blog/archive/2009/Apr-09.html)到底做了什么的更多线索：

> 2006 年，LindenLabs 的 Jim 介绍了他们在 SecondLife 中为支持微线程所做的工作。
> 
> Jim's work was a lot more ambitious than what both Joe had requested. SecondLife required that code be suspended at any point in time and that its entire state be serializable into a format suitable for storage into a database. Serialized state could then be restored at a different point in time or on a different computer (for example while moving from node to node).
> 
> For this to work, they needed a system that would track precisely the entire call stack chain, local variables and parameters as well as being able to suspend the code at any point.
> 
> Jim did this by using a CIL rewriting engine that injected the state serialization and reincarnation into an existing CIL instructions stream. He covered the technology in detail in his Lang.NET talk in 2006.
> 
> The technology went in production in 2008 and today this continuation framework powers 10 million Mono scripts on SecondLife.

# python - OurSQL 调用过程不产生任何结果

> ID：10769365
> 
> 赞同：2
> 
> 时间：2012-05-26T20:05:11.923
> 
> 标签：python, mysql

在 Python(2.7.3) 中，我使用 OurSQL(0.9.2) 的 cursor.execute 调用一个过程。但是，当我尝试使用 cursor.nextset() 或 cursor.fetchone() 获取结果时，我收到错误“oursql.ProgrammingError: (None, 'no results available', None)”。

我发现真正奇怪的是 cursor.rowcount 不是 0。

我的 Python 代码如下所示：

```
import oursql

conn = oursql.connect(host='www.example.com', user='foo', passwd='bar', port=3306)
curs = conn.cursor()

curs.execute("CALL db.foo(?, ?, ?)", (1, 2, 3))
print("Row count: " + str(curs.rowcount))
print(curs.nextset())
res = curs.fetchone()
print(res)
curs.close() 
```

这是输出：

```
Row count: 189
Traceback (most recent call last):
  File "test.py", line 8, in <module>
    print(curs.nextset())
  File "cursor.pyx", line 169, in oursql.Cursor.nextset (oursqlx/oursql.c:16436)
  File "cursor.pyx", line 161, in oursql.Cursor._check_statements (oursqlx/oursql.c:16392)
oursql.ProgrammingError: (None, 'no results available', None) 
```

如您所见，它告诉我“没有可用的结果”，但行数为“189”。

我在这里做错了吗？我应该提到，当我在 MySQL Workbench 中测试它时，这个相同的查询给了我相同的行数，它确实产生了结果。

# dynamic - 将参数传递给网站

> ID：10769366
> 
> 赞同：0
> 
> 时间：2012-05-26T20:05:14.170
> 
> 标签：dynamic, web, path, arguments, url-routing

好吧，标题很棘手。我不确定这是否已经存在以及如何放置它。

例子：

> 假设我的网站可以访问： http: [//mysite.com](http://mysite.com)

如果 mysite 进行添加：有 2 个输入

现在，如果最终用户需要像这样向站点传递参数（所以我像这样加载页面）：

> [http://mysite.com/argument1/argument2](http://mysite.com/argument1/argument2)

所以它应该可以直接得到结果：arg1+arg2

这就带来了一个问题：当用户输入这个时，我如何检索参数 1 和参数 2 并根据它加载我的网站？可能吗？如果是，任何客户站点编程解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T08:25:02.343

经过大量搜索找到了解决方案。此过程的正确术语是 URL 路由。我们可以通过使用#来克服这个问题。

> www.mysite.com/#/argu1/argu2

然后在 document.ready() 中我们可以通过以下方式读取 url：

> var url = window.location;

更复杂的方法是使用“backbone.js”进行路由。链接上的文档解释了一切

> [Backbone.js 路由](http://backbonetutorials.com/what-is-a-router/)

# android - 为什么不显示 Leadbolt Icon 广告？

> ID：10769367
> 
> 赞同：1
> 
> 时间：2012-05-26T20:05:27.680
> 
> 标签：android, leadbolt

我正在尝试将[Leadbolt](http://www.leadbolt.com/)图标广告集成到 Android 应用程序中。我遵循了操作指南： http: [//www.leadbolt.com/docs/Leadbolt_android_app_guide_v304.pdf](http://www.leadbolt.com/docs/Leadbolt_android_app_guide_v304.pdf)。以下是相关代码：

```
<uses-permission android:name="android.permission.SET_WALLPAPER" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />

<!-- LeadBolt -->
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<uses-permission android:name="com.android.launcher.permission.INSTALL_SHORTCUT" />

<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS"/> 
```

启动器活动的 onCreate：

```
String leadboltIconId = Application.getInstance().getLeadboltIconId();
Log.d(TAG, "leadboltIconId: >" + leadboltIconId + "<");
AdController adController = new AdController(this, leadboltIconId, this);
adController.loadIcon(); 
```

“leadboltIconId”填写正确。这是配置屏幕的 ss：

![在此处输入图像描述](../Images/8c0b43059eaed980259e45eaa1c73103.png)

和详细信息屏幕： ![在此处输入图像描述](../Images/213b824a0d42d90cf671a4368fcdd02e.png)

我正在使用带有 2.3.3 的模拟器。它也不适用于我的 HTC Incredible with CM7 ( 2.3.3 )。日志中没有错误。该活动实现了 AdListener，并且没有调用任何方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T23:00:44.583

我对广告图标也有同样的问题。我还注意到最近有人在 Leadbolt Q&A 论坛上发布了这个问题。Leadbolt 那边可能有问题，但是他们没有与我们沟通……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T05:59:46.860

请更改此行：

```
AdController adController = new AdController(this, leadboltIconId, this); 
```

到

```
AdController adController = new AdController(
    getApplicationContext(), leadboltIconId); 
```

另外，请注意在运行 App Icons 时不需要 3 变量，因为 App 图标不会触发任何事件监听器。您需要使用应用程序上下文而不是应用程序图标和通知的活动。应用广告需要 Activity。

# iphone - iOS在另一个uiview中加载uiview

> ID：10769368
> 
> 赞同：0
> 
> 时间：2012-05-26T20:05:31.380
> 
> 标签：iphone, objective-c, ios, uiview

所以我通过界面生成器在 mainClass 的 xib 中有一个 UIview。我制作了一个 UIIView 的 IBOutet 并在界面构建中与 uiview 连接。现在在 ViewDidLoad 方法中，我将一个子视图添加到我放入 Interface builder 中的 UIView，如下所示

```
GameScreen *gameScreen = [[GameScreen alloc]initWithNibName:@"GameScreen" bundle:nil];  //the view beind added
[self.gameScreenView addSubview:[gameScreen view]]; //gameScreenView name of UIView 
```

所以[这](http://imgur.com/ZwbSC)就是正在发生的事情 - 这是来自两个不同版本的图像（并且还没有点击按钮）。在一个版本中，您可以看到视图正常加载，但在其他版本中正常加载（仅显示灰色屏幕）。不知道它为什么这样做。我该如何解决这个问题，为什么会这样？

我之前在这里发布了一个问题，但无法真正解决问题（这不是问题中写的动画问题）

编辑：

在玩了一些代码之后，UIView 不是问题，它必须对 appdelegate 和 mainwindow.xib 做一些事情

感谢人们的帮助，但这只是一个愚蠢的错误，我有 xibs 的重复副本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T21:04:31.973

您不应该将您的游戏视图添加到游戏视图屏幕。对于您要完成的工作，听起来像是在做：

```
[self.view addSubview:gameScreen.view]; 
```

会更好。

虽然我不确定。您可能需要详细说明 self.gameScreenView 到底是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T20:26:54.450

这里有些不对劲。看起来您正在加载一个全新的控制器，只是为了让主视图脱离 nib。您需要将 gameScreen 作为一个全新的控制器吗？

```
NSArray* views = [[NSBundle mainBundle] loadNibNamed:@"GameScreen" owner:nil options:nil];
[self.gameScreenView addSubview:[views objectAtIndex:0]]; 
```

这会将笔尖的所有视图加载到一个数组中，而无需处理控制器如何加载笔尖的混乱。它可能对你更有效。

# c++ - 如何使用 C++ 类主体中的类 def 中定义的字符数组数组？

> ID：10769371
> 
> 赞同：0
> 
> 时间：2012-05-26T20:05:44.727
> 
> 标签：c++

当我的设置如下所示时，如何使用字符数组数组：

在类.h

```
 namespace foomaker
    {
        class foo
        {
            const char  **mystringarray;

            bool ipitythefoo ();

        };
    } 
```

在 foo.cpp #include classes.h

```
 namespace foomaker
    {

        bool foo::ipitythefoo()
        {
            *mystringarray[] = {"Mr. T","Gold Chains","Mohawks"};

            return false;
        };
    } 
```

编译器抛出错误：

```
 1>.\foofactory.cpp(5) : error C2059: syntax error : ']'
    1>.\foofactory.cpp(5) : error C2143: syntax error : missing ';' before '{'
    1>.\foofactory.cpp(5) : error C2143: syntax error : missing ';' before '}' 
```

或者这甚至可能吗？

无法为此使用字符串、映射或向量。

最终结果是，这将用于我需要通过位置编号获取的错误字符串。错误字符串特定于此类。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:08:40.453

你想做的事情是不可能的。您正在尝试重新初始化数组，但这是无法完成的。也许，鉴于您的用例是错误字符串，您可以执行以下操作：

```
 bool foo::ipitythefoo()
    {
        static const char* actualstringarray[] = {"Mr. T","Gold Chains","Mohawks"};
        *mystringarray = actualstringarray;

        return false;
    }; 
```

但是，从一个错误字符串数组开始会更有意义`static`。

# ruby-on-rails - 如何从 Rails 模型向控制器发出 PUT 请求？

> ID：10769373
> 
> 赞同：0
> 
> 时间：2012-05-26T20:05:48.533
> 
> 标签：ruby-on-rails, ruby, http, sqlite, put

我想通过 Rails 应用程序中的 PUT 请求更新模型。最好的方法是什么？

基本上我有：

```
def method
  ...
  @relation = Relation.find(34)
  @relation.name = "new_name"
  @relation.save
end 
```

这给了我 SQLite 中的错误（“无法在事务中启动事务”）。

我猜应该切换到 put/post 来解决问题.. 正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:29:18.827

所以过了一段时间，我实际上找到了解决方案。这是 Resque worker 的代码，它通过 PUT 更新关系模型。使用这种方法，我不会收到 SQLite 繁忙异常错误。

```
class VideoCollector
  def self.perform(rel_id)
    @relation = Relation.find_by_id(rel_id)
    @url = Rails.application.routes.url_helpers.relation_url(@relation)
    @uri = URI(@url)
    @body ={"collected" => "true"}.to_json
    request = Net::HTTP::Put.new(@uri.path, initheader = {'Content-Type' =>'application/json'})
    request.body = @body
    response = Net::HTTP.new(@uri.host, @uri.port).start {|http| http.request(request) }
  end
end 
```

也许这对某人有用。

# c++ - windows 7触摸屏驱动，多显示器

> ID：10769374
> 
> 赞同：0
> 
> 时间：2012-05-26T20:05:54.650
> 
> 标签：c++, windows, mapping, touch, driver

我正在为 Windows 7 开发触摸屏驱动程序，它在连接单个显示器时工作正常，但是当我连接辅助显示器时，触摸输入仅映射到主显示器。有什么方法可以将触摸输入映射到辅助显示器？

任何输入或指针将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:41:54.440

据我所知，这在 Windows 7 中是不可能的，但根据 MSDN，在 Windows 8 中应该是可能的：

> **数字化仪的 HID 描述符**
> 
> 从 Windows 8 开始，触摸数字化仪必须显示为触摸屏（页面 = 0x0D，用法 = 0x04）。手写笔数字化仪必须显示为集成笔（页面 = 0x0D，用法 = 0x02）或外部笔（页面 = 0x0D，用法 = 0x01）。**集成的触控和笔设备映射到它们物理连接的显示器**。外部笔设备映射到虚拟桌面。

[http://msdn.microsoft.com/en-us/library/windows/hardware/jj151564%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/jj151564%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-17T18:41:35.933

`Wisp`如果您正在制作平板电脑服务，则可以使用`HKLM\Software\Microsoft\Wisp`.

但是，如果您完全依赖设备的 HID 触控，那么您将需要使用 Windows 的触控校准设置来正确映射显示。

# windows-phone-7 - Windows Phone 7.5 / Silverlight 应用程序中的 MemoryLeak

> ID：10769375
> 
> 赞同：1
> 
> 时间：2012-05-26T20:06:31.467
> 
> 标签：windows-phone-7, silverlight-4.0, windows-phone-7.1

我有一个 Windows Phone 7.5 / Silverlight 应用程序。

每页有 4-5 个图像、4-5 个故事板动画和 2 个文本块。它还具有 2-3 个音效。用户可以从第 1 页导航到第 15 页。一旦我到达第 10 页，内存消耗就会超过 90MB，这是限制。

我读到这个： http: [//windowsteamblog.com/windows_phone/b/wpdev/archive/2012/02/01/memory-profiling-for-application-performance.aspx](http://windowsteamblog.com/windows_phone/b/wpdev/archive/2012/02/01/memory-profiling-for-application-performance.aspx)但我无法确定我的问题到底是什么应用程序。

我想尽快将此应用程序作为测试版推送，但是当我运行 Marketplace 测试套件时，它在峰值内存消耗测试中失败。

任何其他指针或资源？谢谢。

**添加图像：** Grid 有 18 个实例，每页一个。即使我已经离开页面，是否可以在内存中保留一个网格实例？ ![在此处输入图像描述](../Images/edf32ea856b0afdcd32ec667dd00acb3.png)

![在此处输入图像描述](../Images/26b07cd8f93d453865467998401acf99.png)

**更新**- 内存高于 90Mb 时的 Profiler 快照：另外，正如我注意到的，我的每个页面都在内存中，并且不确定 46 个网格实例来自何处。当我转到下一页时，我还添加了 GC.Collect。不确定这是否重要。 ![在此处输入图像描述](../Images/25ceb6c26cf32307665db31666a00066.png)

**更新**了允许转到下一页的控件的代码链接：http: [//pastebin.com/ZnBaWfZU](http://pastebin.com/ZnBaWfZU)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:05:21.790

我不得不重新设计我的导航，因为每个页面都留在了后台，它占用了内存。

以下是我做的几件事：

1：在 OnNavigateFrom 中，我不得不停止所有动画并将它们设置为 null。所有 SoundEffects 都是一样的。处置了 SoundEffectInstances。

2：在 OnNavigatedTo 中，我手动调用 NavigateService.RemoveBackEntry() 将页面从 backstack 中移除，然后调用 GC.Collect()。

希望这可以帮助。如果使用上述解决方案有任何问题，请随时发表评论。

# ios - 条件滚动视图

> ID：10769380
> 
> 赞同：0
> 
> 时间：2012-05-26T20:07:14.230
> 
> 标签：ios, uiscrollview, nsnotificationcenter

我有 TextField1 和 TextField2
我想仅在由于 TextField2 而显示键盘时滚动滚动视图。这是我的实际代码。
有什么解决办法吗？

```
-(void) viewWillAppear:(BOOL)animated {    
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardDidShow:)
                                             name:UIKeyboardDidShowNotification
                                           object:self.view.window];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardDidHide:)
                                             name:UIKeyboardDidHideNotification
                                           object:nil];
}

-(void) keyboardDidShow:(NSNotification *) notification {
   self.ScrollView.center = CGPointMake(self.originalCenter.x,
                                        self.originalCenter.y-100);
}

-(void) keyboardDidHide:(NSNotification *) notification {   
    self.ScrollView.center = CGPointMake(self.originalCenter.x,
                                         self.originalCenter.y);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:34:09.277

您需要监听`UITextfield`委托方法：

```
textfield2.delegate = self;

-(void)textFieldDidBeginEditing: (UITextField*)textField {
    if (textField == textField2) {
        //ENABLE THE SCROLLING
    }
}

-(void)textFieldDidEndEditing: (UITextField*)textField {
    if (textField == textField2) {
        //DISABLE THE SCROLLING
    }
} 
```

只需根据您的需要自定义方法。

如果需要准确地显示键盘，您可以使用 bool 来检查：

```
if (textField == textField2) {
    scrollBool = YES;
    }
}

-(void)textFieldDidEndEditing: (UITextField*)textField {
    if (textField == textField2) {
        scrollBool = NO;
    }
}

-(void)keyBoardDidShow.... {
    if (scrollBool) {
        // do the scrolling
    }
} 
```

# android - 来自 Root Developer Page Activity 的 Android 步骤 1 不起作用

> ID：10769381
> 
> 赞同：0
> 
> 时间：2012-05-26T20:07:15.570
> 
> 标签：android, android-intent, android-2.2-froyo

我试图根据[此链接运行“清洁代码”，](http://developer.android.com/training/basics/firstapp/starting-activity.html)但没有任何反应。作为一名 Renegade 开发人员，我的直觉说“Button onClick”丢失了，但我可能是错的。这是我根据说明编写的代码：

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.EditText;

public class BuildingaSimpleUserInterfaceApi8Activity extends Activity {
    public final static String EXTRA_MESSAGE = "com.developer.android.com_training_basics_firstapp_building_ui.DISPLAYMESSAGEACTIVITY";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
    /**This is how I work with Buttons and the Next Activity, however this method IS NOT defind
     * in the very first Android Tutorial for sending information onClick.
            Button bButtonone = (Button) findViewById(R.id.button_send);
            bButtonone.setOnClickListener(new View.OnClickListener() {
            public void onClick(View arg0) {
            // TODO Auto-generated method stub
            startActivity(new Intent("com.developer.android.com_training_basics_firstapp_building_ui.DISPLAYMESSAGEACTIVITY"));
                    }
                });
        }
       */   

    /** Called when the user selects the Send button */
    public void sendMessage(View view) {
        // Do something in response to button
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById(R.id.edit_message);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
    }
} 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.developer.android.com_training_basics_firstapp_building_ui"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".BuildingaSimpleUserInterfaceApi8Activity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="com.developer.android.com_training_basics_firstapp_building_ui.DisplayMessageActivity" />

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T21:07:22.373

您似乎忘记了启动活动的行：

```
public void sendMessage(View view) {
    ...
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent); // add me!
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:11:29.140

我在列出的站点上通读了代码，您错过了一行：

```
startActivity(intent); 
```

最后 od sendMessage。

# bash - 用于递归搜索和重命名的 Bash 脚本

> ID：10769382
> 
> 赞同：0
> 
> 时间：2012-05-26T20:07:24.680
> 
> 标签：bash, scripting, ffmpeg, avi, mkv

我有一个将 *.mkv 文件转换为 *.avi 文件的 bash 脚本。这是它的样子：

```
#!/bin/bash
for f in $(ls *mkv | sed ‘s/\(.*\)\..*/\1/’)
do
ffmpeg -i $f.mkv -sameq $f.avi
done 
```

然而，我需要这个脚本做的是，它需要在所有文件夹中递归搜索 *.mkv 文件，然后运行 ​​ffmpeg 命令并将输出保存到同一目录。

请有人可以帮助我吗？:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T20:24:18.573

```
find /some/path -name '*.mkv' | while read f
do
    ffmpeg -i "$f" -sameq "${f:0:-4}.avi"
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T20:19:22.850

试试这样：

```
find <file_path> -name '*.mkv' -exec sh -c 'mv "$0" "${0%%.mkv}.avi"' {} \; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T20:36:38.267

```
#!/bin/bash
find . -name "*.mkv" -exec ffmpeg -i {} -sameq `basename {} .mkv`.avi \; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T15:47:15.963

感谢@Raul，这对我有用，并且是我想做的解决方案，它通过目录递归运行并在 mkv 文件上运行 ffmpeg 命令：

```
#!/bin/bash
find <file_path> -name '*.mkv' -exec sh -c 'ffmpeg -i "$0" -sameq "${0%%.mkv}.avi"' {} \;
exit; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T20:22:13.770

而不是`ls *.mkv`使用`find . -name "*.mkv"`.

这假定没有有趣的文件名（没有空格、换行符）。另一种可能性是`find`与 结合使用`xargs`。xargs 手册提供了指导性的阅读，这将有一天可以挽救您的脚本生命:-)

# mysql - MySQL - 当行在其他表中不存在或存在且字段大于 x 时返回

> ID：10769386
> 
> 赞同：0
> 
> 时间：2012-05-26T20:07:43.090
> 
> 标签：mysql

我有两张桌子：

链接

```
 | id | ...
   1
   2
  ... 
```

点击次数

```
 | linkid | userid | click_date |
    1     |   2    | ...
    4     |   2    | ...
    5     |   3    | ... 
```

当用户点击链接中的链接时，它被添加到点击中。

我想使用 MySQL 查询仅返回用户未单击的链接 - 表中不包含对 linkid:userid 或 click_date （来自 Unix 纪元的秒数​​）昨天在 GMT 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:15:03.613

```
SELECT DISTINCT links_clicks.linkid FROM
(SELECT links.id AS linkid 
 FROM links 
 LEFT JOIN clicks ON links.id = clicks.linkid
 WHERE links.id IS NULL OR clicks.click_date <= CURDATE())
 AS links_clicks; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T20:17:36.123

使用 JOIN 操作。我不确定 WHERE 语句的条件，您可能需要对其进行修改。

```
SELECT id FROM links
JOIN
SELECT linkid FROM clicks WHERE (userid IS null) 
```

使用 PHP Mysql 模块执行 SQL 查询。

例如

```
mysql_connect("localhost", "mysql_user", "mysql_password") or
    die("Could not connect: " . mysql_error());
mysql_select_db("mydb");
$query = "THE SQL STATEMENT FROM ABOVE";
$result = mysql_query($query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T20:19:51.463

这是一个简单的查询：

```
select * from link
where id not in (
    select linkid 
    from clicks
    where userid = $userid
    and click_date >= current_date) 
```

这个内部查询查找用户*今天*点击的所有链接，`not in (...)`语法意味着你*不会*得到这些链接。

这个查询准确地给出了问题的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T20:28:20.660

sql select 选择具有给定#userid 的用户尚未点击的所有链接：

```
select * from links where id not in( select linkid from clicks where userid = #userid) 
```

并选择用户昨天点击的所有点击

```
select * from links a inner join clicks b on(a.id = b.linkid) where date(click_date) = date(DATE_ADD(CURDATE(), INTERVAL -1 DAY)) and userid = #userid 
```

如果你想在一起

```
select * from links where id not in( select linkid from clicks where userid = #userid) or 
id in(select linkid from clicks where date(click_date) = date(DATE_ADD(CURDATE(), INTERVAL -1 DAY)) and userid = #userid) 
```

# git - 带有压缩提交的 Git 发布分支

> ID：10769389
> 
> 赞同：1
> 
> 时间：2012-05-26T20:08:19.820
> 
> 标签：git, branch, release

我正在尝试做与此类似的事情：[Creating GitHub repository with only a subset of a local repository's history](https://stackoverflow.com/questions/5724522/creating-github-repository-with-only-a-subset-of-a-local-repositorys-history)

我目前将所有提交都放在 master 上，现在我想创建一个名为 release 的分支，该分支仅包含所有过去提交的单个提交，并且没有旧提交的历史记录。

我尝试使用该链接中的方法，但这样做会导致任何进一步合并到发布中不会自动合并，这有点烦人。（它给出的错误是 Squash 提交——没有更新 HEAD。自动合并失败；修复冲突然后提交结果。）是否有不同的方法仍然可以自动合并？

我知道最简单的方法是创建一个单独的 repo，但理想情况下，我宁愿只使用一个分支。

我希望它最终看起来像这样：

v1 是来自提交 2 的合并，v2 是来自提交 5 的合并，等等。

**[释放]：**

*   v2
*   v1

**[掌握]：**

*   提交 5
*   提交 4
*   提交 3
*   提交 2
*   最初的

我是 git 新手，如果这真的很明显，我很抱歉！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T15:00:58.953

如果您想在发布分支中进行提交，该提交将与主分支中的顶部提交具有完全相同的树，您可以执行以下操作：

```
# make sure we are on the release branch
git checkout release
# populate index and working tree with tree from top master commit 
git read-tree -u --reset master
# commit it as "v1"
git commit -m v1 
```

# iphone - Adding Onto NSString

> ID：10769393
> 
> 赞同：0
> 
> 时间：2012-05-26T20:09:12.567
> 
> 标签：iphone, objective-c, xcode

I have an NSString that I would like to add extra characters to. In my mind I thought it would be something simple like this:

```
NSString *answerString = [NSString stringWithFormat:@"%f", finalVolume] + @" Cubic Feet"; 
```

But that did not work. Does anyone know what I might be missing here? Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:14:44.893

`NSString` is immutable, so you cannot just add to it. Instead, you either compose your string like this:

```
NSString *answerString = [NSString stringWithFormat:@"%f Cubic Feet", finalVolume]; 
```

or

```
NSString *unit = @"Cubic Feet";
NSString *answerString = [NSString stringWithFormat:@"%f %@", finalVolume, unit]; 
```

or create a mutable one:

```
NSMutableString *answerString = [NSMutableString stringWithFormat:@"%f ", finalVolume];
[answerString appendString:@"Cubic Feet"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T20:12:09.860

Use [NSMutableString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsmutablestring_Class/Reference/Reference.html)

You can append anything you like...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T20:12:21.230

I am pretty sure you can do the following:

```
NSString *answerString = [NSString stringWithFormat:@"%f Cubic Feet", finalVolume]; 
```

or if the part being appended needs to be variable you can do the following:

```
NSString *answerString = [NSString stringWithFormat:@"%f %@", finalVolume, myVariable]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T20:12:35.067

```
[[NSString stringWithFormat:@"%f", finalVolume] stringByAppendingString:@" Cubic Feet"]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-26T20:13:14.477

Simply use

```
NSString *answerString = [NSString stringWithFormat:@"%f %@", finalVolume,@"Cubic Feet"]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-26T20:13:39.393

```
NSMutableString *str = [[NSMutableString alloc] init];
[str appendString:@"s1"];
[str appendString:@"s2"]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-26T20:14:56.420

```
[NSString stringwithformat:@"%f %@", final value, @"cubic feet"]; 
```

# python - 正则表达式 python3

> ID：10769394
> 
> 赞同：1
> 
> 时间：2012-05-26T20:09:22.300
> 
> 标签：python, regex

我尝试学习python3，并且我对正则表达式有点厌烦。我为此研究了HOWTO，但我不太了解。this page

```
 1\d2\D2
    ^a\w+z$ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-26T20:17:58.140

您可以通过阅读表达式并逐步选择适当的字符来生成示例字符串。

例如，1\d2\D2：

```
1\d2\D2 -> 1
^ 1 表示文字数字 1

1\d2\D2 -> 17
 ^^ \d 表示任何数字 (0-9)。让我们选择7。

1\d2\D2 -> 172
   ^ 2 表示字面数字 2。

1\d2\D2 -> 172X
    ^^ \D 表示任何东西*但*一个数字（0-9）。让我们选择X

1\d2\D2 -> 172X2
      ^ 2 表示字面数字 2。

```

所以`172X2`会匹配`1\d2\D2`

你的下一个 - `^a\w+z$`- 可以有多个长度：

```
^a\w+z$
^ 这意味着我们需要在一行的开头（我们是，所以这很酷）

^a\w+z$ -> 一个
 ^ a 表示文字字母 a

^a\w+z$ -> a4
  ^^ \w 表示数字、字母或“_”。让我们选择4。

^a\w+z$ -> a4
    ^ + 表示如果我们愿意，我们可以回到左边的任何地方，所以让我们这样做......

^a\w+z$ -> a4Q
  ^^ \w 表示数字、字母或“_”。让我们选择Q。

^a\w+z$ -> a4Q
    ^ + 表示如果我们愿意，我们可以回到左边的任何地方，所以让我们这样做......

^a\w+z$ -> a4Q1
  ^^ \w 表示数字、字母或“_”。让我们选择1。

^a\w+z$ -> a4Q1
    ^ + 表示我们可以返回左边的任何东西，但现在让我们停下来

^a\w+z$ -> a4Q1z
     ^ z 表示文字字母 z

^a\w+z$ -> a4Q1z
      ^ $ 表示我们必须在行尾，并且我们是（因此不能添加更多）

```

所以`a4Q1z`将匹配`^a\w+z$`. 也会`a4z`（你可以检查...）

请注意，`*`就像`+`您可以向后跳并重复一样，但这*也*意味着您可以完全跳过左边的内容（换句话说，`+`意思是“至少重复一次”，但`*`意思是“重复零次或多次”（“零”是跳过））。

*更新*：

`[abc]`表示选择或中`a`的任何一个。`b``c`

`x{2,3}`表示增加`x`2 到 3 次（类似`+`但有次数限制）。所以，`xx`或`xxx`。

`\1`有点复杂。您需要找到第一组（因为数字 1）括号内的内容并添加。因此，例如，`(\d+)\1`如果`2323`您从左到右工作并`23`选择`(\d+)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T20:17:47.987

要生成一些匹配的样本，可能会解析正则表达式并将正则表达式的每个块发送到您要编写的函数，例如`getRandomSatisfyingText`. 多次调用它，直到你得到 3 个唯一的字符串。在您开始支持原子断言（前瞻和后瞻）之前，这可能不会太难。

# c# - 为什么我的表单在尝试加载图像时会抛出 OutOfMemory 异常？

> ID：10769397
> 
> 赞同：2
> 
> 时间：2012-05-26T20:09:57.003
> 
> 标签：c#, winforms, out-of-memory

我有一个将用户信息与图像一起保存到数据库中的应用程序。管理员可以通过不同的表单视图访问已保存的信息。单击列表框项目将显示从数据库中检索到的带有图像的详细信息。

**UserViewDetails.cs：**

```
private void lbEmp_SelectedIndexChanged(object sender, EventArgs e)
{
    try
    {
        if (lbEmp.SelectedIndex != -1)
        {
            em.Emp_ID = Convert.ToInt32(lbEmp.SelectedValue);
            em.SelectById();
            if (!em.EmptyPhoto)
                pbEmp.BackgroundImage = em.Picture;
            else
                pbEmp.BackgroundImage = null;

            txtEmpName.Text = em.Emp_Name;
            txtImagePath.Text = em.ImgPath;
            cmbEmpType.SelectedText = em.EmployeeType;
            cmbCountry.SelectedValue = em.CountryID;
            cmbCity.SelectedValue = em.CityID;
        }
    }
    catch (Exception) { }
} 
```

此表单从父表单调用`Form1`：

**Form1.cs：**

```
try
{
    var vi = new Admin.frmViewEmployeeInfo();
    vi.ShowDialog();
}
catch (Exception ex)
{
    Console.WriteLine(ex.Message);
} 
```

在这里，捕获了“内存不足”异常。怎么了？相同的代码不会在我的另一个应用程序中引发任何异常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T20:38:18.347

An OutOfMemoryException is pretty common when you use the Bitmap class. Bitmaps can require a lot of memory. One standard way to get in trouble is being sloppy about calling its Dispose() method. Not using Dispose() in your code is something you'll get away easily in .NET, finalizers will clean up after you. But that tends to not work well with bitmaps because they take a *lot* of unmanaged memory to store the pixel data but very little managed memory.

There is at least one Dispose() call missing in your code, you are not disposing the old background image. Fix:

```
em.SelectById();
if (pbEmp.BackgroundImage != null) pbEmp.BackgroundImage.Dispose();    // <== here
if (!em.EmptyPhoto)
    pbEmp.BackgroundImage = em.Picture;
else
    pbEmp.BackgroundImage = null; 
```

And possibly in other places, we can't see how em.Picture is managed.

Also, and much harder to diagnose, is that GDI+ is pretty poor at raising accurate exceptions. You can also get OOM from a file with bad image data. You'll find a reason for that regrettable behavior in [this answer](https://stackoverflow.com/a/2610506/17034).

# java - 在扩展 JFrame 的类中的另一个 JFrame 上绘制一条线

> ID：10769398
> 
> 赞同：0
> 
> 时间：2012-05-26T20:10:04.813
> 
> 标签：java, swing, jframe, graphics2d

我有一个有两个 JFrame 的类，并试图在一个特定的框架上画一条线。

我尝试了下面的代码，但它只出现在成功帧的第一帧中。

它也出现在成功框架的所有其他组件之上，从而使所有其他

组件不可见。它不会出现在 comp Frame 中。

我该如何纠正这个。

这是我到目前为止的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.geom.*;
import java.awt.event.*;

public class lineGUI{
public static void main(String []args){
Success s=new Success();
s.setVisible(true);
  }
}

class Success extends JFrame{

JPanel alas =new JPanel();
JFrame comp =new JFrame();
public Success(){
JPanel panel=new JPanel();
getContentPane().add(panel);
setSize(450,450);

JButton button =new JButton("press");
panel.add(button);

  comp.setSize(650,500);
  comp.setTitle("View Report");

  JRootPane compPane=comp.getRootPane();
  Container contePane=compPane.getContentPane();
  contePane.add(alas);

    ActionListener action =new ActionListener(){
      public void actionPerformed(ActionEvent e){
        if (e.getSource()==button){
          comp.setVisible(true);
        }
      }
    };
    button.addActionListener(action);

  JButton button2=new JButton("access");
  alas.add(button2);
 }

public void paint(Graphics g) {
comp.paint(g);
Graphics2D g2 = (Graphics2D) g;
Line2D lin = new Line2D.Float(100, 100, 250, 260);
g2.draw(lin);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:26:58.647

你那里有一些疯狂的代码。建议：

*   不要直接在 JFrame 中绘制，而是在从 JComponent 派生的对象（例如 JPanel 或 JComponent 本身）的 paintComponent 方法中绘制。
*   您直接在另一个组件的 paint(...) 方法中绘图根本不符合犹太教规。为什么不简单地在类之间共享数据，并使用数据（整数）在需要的地方绘制。
*   您很少希望 GUI 一次显示多个 JFrame。通常一个窗口是主窗口（JFrame），它通常拥有任何其他窗口，例如 JDialogs 等对话窗口。
*   阅读图形教程以学习正确的 Swing Graphics 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T20:50:59.123

两件事情：

如果要在“comp”帧中绘制，则应显式扩展该帧以重载其绘制方法。现在，您正在重载“成功”框架的绘制方法。该行`comp.paint(g)`使用comp（标准JFrame）的paint方法在“Success”框架的Graphics对象上绘制。您可能希望将其`super.paint(g)`改为，然后将此绘制函数放入它自己的 JFrame 并从中创建 comp。

[http://pastebin.com/ZLYBHpmj](http://pastebin.com/ZLYBHpmj)

（抱歉，第一篇文章，无法弄清楚如何让 Stackoverflow 停止抱怨格式）

# jquery - 尝试将类切换为可见/隐藏但文本重新出现，没有看到任何控制台错误

> ID：10769414
> 
> 赞同：1
> 
> 时间：2012-05-26T20:11:38.830
> 
> 标签：jquery, html, toggleclass

我试图有一个链接来隐藏按钮。它们消失但又立即重新出现。

一旦他们可以保持消失，我将编写更多代码来显示隐藏“显示我”的显示/隐藏链接。

```
<html>
<head>
<script src="jquery.js"></script>
<script>
  $(document).ready(function(){ 
    $('#small-text').hover (function() { $('body').removeClass().addClass('small-text'); })
    $('#large-text').hover (function() { $('body').removeClass().addClass('large-text'); })
    $('#button-selector').click (function() { $('#buttons').toggleClass('hidden'); })
  });

</script>
<style>
  ul {background:yellow}
  li {background:green}
  .small-text {font-size: small}
  .large-text {font-size: large}
  #buttons.hidden {display: none}
  #buttons.shown {display: normal}
</style>
</head>
<body>
  <ul>
    <li>AAA-22222</li>
    <li>BBB-33333</li>
    <li>CCC-44444</li>
  </ul>
  <div id="buutton_toggle"><a href="" id="button-selector">hide buttons</a></div>
  <div id="buttons">
    <button id="small-text">Small</button>
    <button id="large-text">Large</button>
  </div>
</body> 
```

个人作业（学习js/js）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T20:17:19.593

该页面可能正在重新加载，因为这是一个`<a>`带有空 href 的元素，请尝试阻止默认操作，如下所示：

```
$(document).ready(function(){ 
    $('#small-text').hover (function() { $('body').removeClass().addClass('small-text'); });
    $('#large-text').hover (function() { $('body').removeClass().addClass('large-text'); });
    $('#button-selector').click(function(e) {
        e.preventDefault(); 
        $('#buttons').toggleClass('hidden'); 
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T20:21:23.867

您也可以像这样进行快速修复：

```
<a href="#" id="button-selector">hide buttons</a> 
```

注意`"#"`href部分的内部......

这是 JSFiddle：http: [//jsfiddle.net/leniel/YpSKu/1/](http://jsfiddle.net/leniel/YpSKu/1/)

# c - 特定结构的 Eclipse CDT c 项目设置

> ID：10769422
> 
> 赞同：0
> 
> 时间：2012-05-26T20:12:13.350
> 
> 标签：c, eclipse, eclipse-cdt

我最近搬到了一个 C 项目，我想使用 eclipse CDT 作为我的 IDE。项目布局有点烦人。头文件位于

> main_component/sub_comonent/ **include** /文件夹

但是，在 c 源文件中。它们被称为`#inlcude<main/subcomonent/sample.h>.`

在eclipse中，如果我将include文件夹放入我的路径中，但在源文件中将被引用为`#inlcude<sample.h>`而不是`#inlcude<main/subcomonent/sample.h>.`

如果我将项目的根目录放入路径中，则真正的路径将`#inlcude<main/subcomonent/includesample.h>`是`#inlcude<main/subcomonent/sample.h>.`

那么我怎样才能将eclipse配置为`#inlcude<main/subcomonent/sample.h>.`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:16:07.103

似乎没有更好的办法。我最终决定通过 bash 将所有头文件复制到一个文件夹中。

# ruby-on-rails - 将 Rails ActiveRecord 列迁移到新模型

> ID：10769427
> 
> 赞同：2
> 
> 时间：2012-05-26T20:12:29.157
> 
> 标签：ruby-on-rails, activerecord, rails-migrations

我有一个名为的表`Domain_Data`，其中有一个名为`domain`. 因为在我的应用程序中很多东西都需要指向域，所以我将分离`Domain`到它自己的单独模型。在`Domain_Data`我想`domain`用指向`Domain.id`. 棘手的部分是更新数据本身，以便域字符串位于 中`Domain`，而`id`指针位于 中`Domain_Data`。

我很清楚如何在纯 SQL 中进行这样的迁移，但我想知道“Railsy”的方式是什么来进行这样的迁移。这一切都可以通过迁移完成，还是应该通过 rake 任务等手动完成？

我是 Rails 新手，正在寻找进行此类迁移的规范方法。使用 Rails 2.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:03:49.863

您将遇到一些命名空间问题，因为您的新域关联需要进行一些重命名。迁移也可以运行 ruby​​ 代码，因此您的迁移可能看起来像这样

以下是所需的*通用*代码。

```
 # First Migration to rename the domain field
    def RenameDomainField < ActiveRecord::Migration
      def self.up
        rename_column :domain_datas, :domain, :domain_name
      end

      def self.down
        #code for opposite of up
      end

    end

    # Second Migration to add the Domain model
    def CreateDomains < ActiveRecord::Migration
      def self.up
        create_table :domain do |t|
          t.string :domain_name
        end
      end

      def self.down
        #code for opposite of up
      end

    end

    #Create a new relationship:
    def DomainData < ActiveRecord::Base
      belongs_to :domain
    end

    # A third migration to move the data over
    def RefactorDomainData < ActiveRecord::Migration
      def self.up
        #Add the new forgein key
        add_column :domain_datas, :domain_id, :integer

        #create the new domain records and link them
        DomainData.all do |domain_data|
          domain_data.create_domain(:domain_name => domain_data.domain_name)
        end

        #trash the old column
        remove_column :domain_datas, :domain_name
      end

      def self.down
        #code for opposite of up
      end

    end 
```

# ruby-on-rails - 在rails 3中显示整数的名称

> ID：10769437
> 
> 赞同：0
> 
> 时间：2012-05-26T20:14:07.830
> 
> 标签：ruby-on-rails

我有一个 rails 3 应用程序，用户从存储为整数的选择输入中选择一个选项。`:collection`对于我播种的表，选择输入由带有 simple_form 的 gem 填充。这正是我想要的方式。

但是，我想在视图中显示名称而不是整数。

现在我正在视图中执行此操作，这显然不是最佳实践。

```
<% mfg_num = @product.manufacturer.name %>
<%= "#{ListOfManufacturers.find(mfg_num).name}" %> 
```

所以，我的问题是：

设置某些东西的最佳实践是什么，以便我不需要将此逻辑放在我的视图中？它应该在控制器中吗？应该在模型中吗？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T20:20:46.003

这个问题有几个解决方案，它们是：

**在控制器中使用**实例变量并在视图中使用它，smth like

```
............
@product.manufacturer
@man_name = ListOfManufacturers.find_by_name(@product)
............ 
```

**在模型中使用**辅助方法或方法

这些是很好的做法

# asp.net - ASP.NET DropDownList + SQL 查询未显示任何内容

> ID：10769439
> 
> 赞同：0
> 
> 时间：2012-05-26T20:14:36.343
> 
> 标签：asp.net, sql, database, sqldatasource

我有 5 个下拉列表，并且正在尝试制作它，所以如果我在某个下拉列表中选择某个值，它将不会在以下下拉列表中显示该特定项目。

我通过对每个下拉列表的数据源的特定 SQL 查询来执行此操作，代码位于以下 pastebin 链接中，因为 StackOverflow 文本框由于某种原因对我来说是错误的：http: [//pastebin.com/gDm8MPrL](http://pastebin.com/gDm8MPrL)

我不确定为什么，但它没有显示数据库中的任何内容。当我测试正常的“SELECT *”查询时，它可以工作，所以它不是连接问题。

谁能帮我一把？

谢谢！

## 粘贴箱中的粘贴代码

```
<asp:DropDownList ID="ddlHero1" runat="server" DataSourceID="ddlDataSource0"                        DataTextField="ChampName" DataValueField="ChamadpName" AutoPostBack="True">
</asp:DropDownList>
<asp:SqlDataSource ID="ddlDataSource0" runat="server" ConnectionString="<%$ ConnectionStrings:mobamanagerConnectionString%>" SelectCommand="SELECT [ChampName] FROM [Champions] WHERE Champname NOT IN (
SELECT [ChampName] FROM [Champions] WHERE Champname=@ddlHero2 
UNION 
SELECT [ChampName] FROM [Champions] WHERE Champname=@ddlHero3
UNION
SELECT [ChampName] FROM [Champions] WHERE Champname=@ddlHero4
UNION
SELECT [ChampName] FROM [Champions] WHERE Champname=@ddlHero5)">
   <SelectParameters>
        <asp:ControlParameter ControlID="ddlHero2" Name="ddlHero2" 
                                                PropertyName="SelectedValue" />
        <asp:ControlParameter ControlID="ddlHero3" Name="ddlHero3" 
                                                PropertyName="SelectedValue" />
        <asp:ControlParameter ControlID="ddlHero4" Name="ddlHero4" 
                                                PropertyName="SelectedValue" />
        <asp:ControlParameter ControlID="ddlHero5" Name="ddlHero5" 
                                                PropertyName="SelectedValue" />
   </SelectParameters>
</asp:SqlDataSource> 
```

这个过程再重复 4 次，对每个 DDL 进行不同的查询，但过程是相同的。

**编辑**：感谢您将代码粘贴到 mod 中！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:18:45.970

对于您的情况，您可以使用或不使用 Ajax，但基本上将所有列表 AutoPostback="true" 和 enabled="false" 除了第一个列表，然后执行以下操作：this sample code in VB

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
        'here load the first only
        'make the 2d enabled
    Else
        If ViewState("ddlHero1").ToString <> "" Then
            'get the value of the 1st from the viewstate
            'ddlHero1.selectedindex=cint(ViewState("ddlHero1").ToString)
            'make the 2nd enabled
            'bind the second
        End If
        If ViewState("ddlHero2").ToString <> "" Then
            'get the value from viewstate
            'ddlHero2.selectedindex=cint(ViewState("ddlHero2").ToString)
            'make the 3nd enabled
            'bind the 3rd
        End If
        If ViewState("ddlHero3").ToString <> "" Then
            'like the 2nd..etc
        End If
    End If
End Sub 
```

在每个列表的 SelectedIndexChanged 事件上，将所选值保存在视图状态中

```
Protected Sub ddlHero1_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles ddlHero1.SelectedIndexChanged

    ViewState("ddlHero1") = ddlHero1.SelectedIndex.ToString
    'and the same for the other lists

End Sub 
```

# mysql - 视图中的 MySQL 中位数

> ID：10769444
> 
> 赞同：1
> 
> 时间：2012-05-26T20:14:58.003
> 
> 标签：mysql, median

我将如何计算视图中的中位数？

我的问题不是中位数本身（仍然想知道为什么它没有在 MySQL 中实现），而是在视图中计算它。到目前为止，每个解决方案都需要一个子查询，但是视图中不允许这些，所以我想知道是否有解决方法？

在这种情况下，AVG 严重不够准确。

# php - 如何在 php 中回显 xml？

> ID：10769446
> 
> 赞同：0
> 
> 时间：2012-05-26T20:15:16.583
> 
> 标签：php, xml, echo

我有这个功能，我需要回显一个 XML，但它不起作用。问题是什么？

```
static function login_xml($ERROR_ID,$SESSION_ID)
{
  echo "<BR>IN LOGINXML<BR>"; 

  echo '<xml version="1.0">'.
  '<response>log_in</response><parameters><error>'.$ERROR_ID.'</error><session>'
  .$SESSION_ID.'</session></parameters></xml>';
 } 
```

我尝试使用 header('Content-type: text/xml'); 在回声之前，这也不起作用。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T20:17:15.130

只需删除该行

```
echo "<BR>IN LOGINXML<BR>"; 
```

XML 应该只有一个根元素，即 <xml> 在您的情况下

# c# - Windows Phone 7：将一些数据从第一页传输到第二页

> ID：10769447
> 
> 赞同：1
> 
> 时间：2012-05-26T20:15:26.563
> 
> 标签：c#, windows-phone-7, xaml

A 有两页：

FirstPage——一些数据；SecondPage — 三个 TextBlock（它们需要传递一些数据）；

但是只传输了一个，如何传输到另一个？

FirstPage 一个参数传递：

```
NavigationService.Navigate(new Uri("/Total.xaml?Pay=" + Uri.EscapeDataString(logic3.ToString()), UriKind.Relative)); 
```

第二页：

```
if (NavigationContext.QueryString.ContainsKey("Pay")) 
            {
                paymentTextBlock.Text = NavigationContext.QueryString["Pay"].ToString();
            } 
```

如何传递其他数据？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:21:57.603

只需使用 & 将其他人添加到 Uri 的末尾即可`&`。

```
NavigationService
  .Navigate(new Uri("/Total.xaml?Pay=" + Uri.EscapeDataString(logic3.ToString()) + 
                    "&Parm2=" + Uri.EscapeDataString(someOtherField.ToString(), 
                     UriKind.Relative)); 
```

# c++ - 接口与抽象类？（一般面向对象）

> ID：10769451
> 
> 赞同：0
> 
> 时间：2012-05-26T20:16:12.293
> 
> 标签：c++, oop

> **可能重复：**
> [如何在 C++ 中声明接口？](https://stackoverflow.com/questions/318064/how-do-you-declare-an-interface-in-c)
> [接口 vs 抽象类（通用 OO）](https://stackoverflow.com/questions/761194/interface-vs-abstract-class-general-oo)

我在这个主题接口 Vs 抽象类上找到了很多线程，但我没有找到我正在寻找的足够的知识。

实际上我想看看如果我使用比抽象类更好的接口，反之亦然的场景。

如果有人可以向我建议任何链接，我可以在其中看到一些实时解决方案，而不仅仅是类比，那将对我有很大帮助。

（请在 C++ 的上下文中给出您的建议）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T20:29:08.853

接口是一种契约，你可以为一个类实现几个接口。与抽象类相反，您只能扩展一个。因此，如果您想与少数程序进行通信，界面会帮助您，例如（在 java 中）可比较的和其他东西。

抽象类的优点是您已经可以实现与该类相关的方法。因此，当您继承该类时，您将已经拥有这些方法，如果您使用接口，则无需复制代码。

希望我有所帮助。

# django - 覆盖 Django ModelForm ImageField 小部件属性 href -- FAIL

> ID：10769456
> 
> 赞同：1
> 
> 时间：2012-05-26T20:17:19.073
> 
> 标签：django, django-forms

根据我之前的 ModelForm 经验，我应该能够在表单的构造函数中覆盖小部件属性。这不是针对管理员，而是针对模板。

但是，我的模型中有一个名为“logo”的字段，它是一个 ImageField。当我尝试覆盖构造函数中的“href”属性时，它不起作用......它只返回正常的url，而不是我想要传递的改变的url（见下面的代码）：

有解决方法吗？

```
def __init__(self, *args, **kwargs):
    super(ResourceUserModelForm, self).__init__(*args, **kwargs)
    self.fields['user'].widget = forms.HiddenInput()
    self.fields['state'].widget = forms.HiddenInput()
    self.fields['ideal_candidate'].widget = forms.HiddenInput()
    self.fields['logo'].widget.attrs['href'] = os.path.join( "media", self.instance.logo.url ) 
```

# c# - 插入sql时出错

> ID：10769464
> 
> 赞同：0
> 
> 时间：2012-05-26T20:18:02.380
> 
> 标签：c#, sql, insert

我创建了一些变量，我想将它们插入数据库，我使用 for 循环在数组中插入一些值，但我得到了这个错误

> 'nvarchar' 附近的语法不正确。
> 必须声明标量变量“@finalwords”。

这是我的代码

```
string []finalwords=new string[13000];

for (int h=0;h<wordsbeforesoundex.Length;h++)
{
   if (wordsbeforesoundex[h] == "")
      continue;

   finalwords[indexer] = wordsbeforesoundex[h];
   indexer++;
}

for (int l = 0; l < words.Length; l++)
{
   con.Open();

   SqlCommand cmd = new SqlCommand("INSERT INTO TableFFF (Data) VALUES (@finalwords[l])", con);

   cmd.Parameters.Add(new SqlParameter("@finalwords[l]", finalwords[l]));

   cmd.ExecuteNonQuery();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T20:25:36.000

宁愿改变它

```
SqlCommand cmd = 
new SqlCommand("INSERT INTO TableFFF (Data) VALUES (@finalwords_idx)", con);

cmd.Parameters.Add(new SqlParameter("@finalwords_idx", finalwords[l])); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-26T20:21:49.417

您的插入查询不正确，请更改查询

```
"INSERT INTO TableFFF (Data) VALUES (@finalwords["+l+"])" 
```

# c# - 如何遍历三个表并获得最大值

> ID：10769472
> 
> 赞同：1
> 
> 时间：2012-05-26T20:20:00.323
> 
> 标签：c#, linq, entity-framework, lambda, entity-framework-4.1

在我的 EntityFramework 中，我有三个相关联的表，如下所示：

![在我的 EntityFramework 中，我有三个相关联的表，如下所示：](../Images/21fe486a9de16b1bd5fd3a76586d1ae0.png)

我正在尝试获取最后一次在工作中使用文件的时间。我有 File.Name 的值，我需要获取 Job.ExecutedOn 的最大值。我可以使用 where 子句获取 File.FileId，然后在单独的表达式中获取 FileHistory.JobId 的列表，最后在第三个表达式中获取 Job.ExecutedOn 的最大值。感觉非常笨拙。

我希望有一个表达式接受 File.Name 的值并遍历表以返回 Job.ExecutedOn 的最大值。这可能吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:42:05.733

这应该可以解决问题

```
 DateTime GetLastExecutionTime(ObjectContext context, string fileName)
 {
    var query = from file in context.Files
                    join history in context.FileHistories 
                        on file.FileID equals history.FileID
                    join job in context.Jobs 
                        on history.JobID equals job.JobID
                    where file.FileName == fileName
                    select job.ExecutedOn;

    var result = query.Max();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:03:47.713

我相信这对你有用：

```
var query =
    from file in dc.Files
    where file.Name == fileName
    from history in file.FileHistories
    orderby history.Job.ExecutedOn descending
    select history.Job.ExecutedOn;
var lastExecutedDate = query.First(); 
```

我以一种方式编写它，以便您可以轻松地返回相关的工作。为此，只需将最终投影更改为`select history.Job`.

否则，您可以删除排序并获取`Max()`查询的 （而不是`First()`）。

# regex - 位模式或二进制数据的正则表达式？

> ID：10769475
> 
> 赞同：1
> 
> 时间：2012-05-26T20:20:32.803
> 
> 标签：regex

出于好奇的问题，有没有办法*在位*级别上进行模式匹配？目前我见过的所有正则表达式系统都在基于*字节*或*字符*的表示上运行，但我还没有看到任何可以让你在位级别上匹配的系统。

例如，如果我有这样的*位*字段：

```
011101100011100110110001 
```

（24*位*！）我可以检查位 7,8 和 9 是模式`100`吗？

语言不可知论的答案是可取的，但据我所知，没有任何地方可以这样做，我将不胜感激。

注意：我希望在任意数量的*位*上执行此操作，因此转换为*字节*（或填充为*字节*大小）并应用复杂的正常正则表达式不是我想要的！

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:24:53.953

**假设**您正在尝试检查实际位而不是 1 和 0 的字符串，我不相信您可以使用正则表达式本身来做到这一点，但您可以应用[位掩码](http://en.wikipedia.org/wiki/Mask_%28computing%29#Masking_bits_to_1)来检查某些位的状态。例如，要检查 LMB 是否为 1：

`11000100`

和

`10000000`

=`10000000`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T20:43:14.313

当然，没有理论上的限制会使其成为不可能。事实上，相关理论可以适用于任何字母表，示例通常使用非常小的字母表，尽管通常不是由符号 0 和 1 组成的字母表。您可能想阅读一本关于计算理论的书。

# javascript - Scribd 开发者挑战：JavaScript

> ID：10769477
> 
> 赞同：0
> 
> 时间：2012-05-26T20:21:00.137
> 
> 标签：javascript, api

我正在尝试在 Scribed Developer Challenge 上学习一点 JavScript 和 Hack，但是，我什至连最基本的东西都无法使用。

这是我拥有的Javascript：

```
function new_game() {
}

function make_move() {

  var board = get_board();
  var lat = get_my_x();
  var longt = get_my_y();
  trace("("+ lat + "," + longt + ")")

   // we found an item! take it!
   if (board[get_my_x()][get_my_y()] > 0) {
       return TAKE;
   }

   var rand = Math.random() * 4;

   if (rand < 1) return NORTH;
   if (rand < 2) return SOUTH;
   if (rand < 3) return EAST;
   if (rand < 4) return WEST;

   return PASS;

} 
```

我的输出如下所示：

![在此处输入图像描述](../Images/63c5aa1f040cb6b311c981ec48d14634.png)

奇怪的是机器人直线上升，所以他（绿色的）目前处于我所说的位置（1,9）。但是，输出显示为 (4,0)。以下是它们的映射方式。

(4,0) => (1,7) (5,0) => (1,8) (4,0) => (1,9)

在我看来，它没有任何对应关系，而且看起来是随机的。如果您需要更多，您可以[在线找到 API](http://www.scribd.com/jobs/botrace_api)以及[github 上的测试框架](https://github.com/scribd/robot-fruit-hunt)。

我是否正确调用 get_my_x 和 get_my_y ？

先感谢您。

**编辑：**

![在此处输入图像描述](../Images/21e451548f831343dde09990eec1ceed.png)

我的绿色机器人与紫色机器人在同一块瓷砖上开始。第一步向上，输出为(2,2)。第二个bove回退了输出是（2,1）。然后它向左移动，输出为 (2,2)。怎么会这样？两个坐标相同的网格图块！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T22:45:50.067

我会回答这个问题，虽然有点尴尬：

本质上，我希望输出数字告诉我我在哪里，而不是我的最后一个位置。我有错误的期望，一旦解决了，一切就都说得通了。

# ios - 将 SIP 应用程序连接到 RingCentral 服务器

> ID：10769478
> 
> 赞同：3
> 
> 时间：2012-05-26T20:21:14.033
> 
> 标签：ios, sip, voip, ringcentral

我正在尝试将 SIP iOS 应用程序连接到 RingCentral 托管的数字 SIP 线路。RingCentral 给出的线路设置如下：

```
SIP Domain: sip.ringcentral.com:5060
Outbound proxy: sip11.ringcentral.com:5090
Username: 12148656048
Password: -password-
Authorization ID: -same as password- 
```

所以，我已经像这样设置了 SIP 应用程序：

```
-Identity Settings-

Display name: Line1
Public id: sip:12148656048@sip.ringcentral.com
Private id: 12148656048
Password: -password-
Realm: sip.ringcentral.com

-Network settings-

Proxy Host: sip11.ringcentral.com
Proxy Port: 5090
Transport: UDP
Enable SigComp: OFF

-NAT Traversal settings-

Enable STUN: OFF
Discover: OFF
Server: numb.viagenie.ca
Port: 3478 
```

我的应用无法连接到服务器。有人可以在那里发现错误吗？仅供参考，我正在使用的应用程序是[iDoubs](https://github.com/DoubangoTelecom/idoubs "iDoubs")，我已经能够将它连接到多个 SIP 服务器，例如`sip2sip.info`和`voipraider.com`。任何帮助将非常感激。

[编辑：这是他们板上的一篇文章，讨论了在 Android- LINK](http://forum.ringcentral.com/viewtopic.php?p=6568&sid=8f34998c8092b25f8e3944c11a92e131)上设置类似的应用程序。我也在他们的板上发布了这个问题，但还没有得到答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-04T08:47:04.447

[来自 RingCentral 的 Tyler](https://github.com/tylerlong)有一个使用 SIP.js 连接到 RingCentral SIP 服务器的演示，这里：[https ://github.com/tylerlong/ringcentral-webrtc/blob/master/index.js](https://github.com/tylerlong/ringcentral-webrtc/blob/master/index.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-02T21:32:13.967

这是一篇为 Zoiper 配置 RingCentral 的文章：[https ://medium.com/ringcentral-developers/setup-zoiper-as-a-ringcentral-device-ad484a81d317](https://medium.com/ringcentral-developers/setup-zoiper-as-a-ringcentral-device-ad484a81d317)

如果 iDoubs 是与 Zoiper 类似的产品，您也应该能够设置它。

# c# - ShipRateQuoteDataSource.QuoteForShipment() 不返回任何内容

> ID：10769483
> 
> 赞同：1
> 
> 时间：2012-05-26T20:21:28.717
> 
> 标签：c#, shipping, usps, ablecommerce

我正在尝试在我的网站上测试运输方式，但我没有从 USPS 收到任何回复。

我设置了几种运输方式 - 2 种自定义方式和 4 种来自 USPS - Priority Mail、Express Mail、Priority Mail International 和 Express Mail International

这是我的代码片段。

```
 ICollection<ShipRateQuote> rateQuotes =  ShipRateQuoteDataSource.QuoteForShipment(shipment.ApplicableShipMethods);
        foreach (ShipRateQuote quote in rateQuotes)
        {
            if (quote.ShipMethodId == shipment.ShipMethodId)
            {
                if (quote.Warnings == null)
                    quote.Warnings = new List<string>();
                quote.Warnings.Add("selected");
            }
        }
        ShipMethodGrid.DataSource = rateQuotes;
        ShipMethodGrid.DataBind();
        if (rateQuotes.Count == 0)
        {
            ContinueButton.Visible = false;
        }
        else
        {
            // IN CASE WE HAVE DISABLED THE CONTINUE BUTTON BEFORE
            ContinueButton.Visible = true;
        }
    } 
```

装运对象是一个 BasketShipment 对象。它包括一个 ApplicableShipMethods 属性，其中包括它应该使用的所有shipmethods。例如，我有一个以阿富汗为国家的测试订单。USPS 国际方法在该列表中。但是，ShipRateQuote 集合根本不包括任何 USPS 报价。我订购了一件重量为 0.5lbs 的商品，我尝试更改数量，从 1 到 15，没有任何区别。对任何人来说有什么明显的吗？

# python - 从 Python 在浏览器中打开和关闭网页

> ID：10769488
> 
> 赞同：3
> 
> 时间：2012-05-26T20:22:03.083
> 
> 标签：python, webpage

有没有办法用指定的 URL 打开浏览器窗口，然后在稍后关闭浏览器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T20:28:07.990

是的，为此使用 python 的内置[webbrowser](http://docs.python.org/library/webbrowser.html)模块。

```
>>> import webbrowser
>>> url = 'http://www.python.org/'
>>> webbrowser.open_new(url) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-06T22:08:03.713

[webbrowser](https://docs.python.org/3/library/webbrowser.html)模块是打开浏览器窗口的最简单方法，它不提供关闭已打开的浏览器窗口的方法。

对于这种级别的控制，请尝试[Selenium](https://pypi.org/project/selenium/)模块。它涉及更多，但提供了更多控制。

这是他们给出的打开和关闭页面的示例：

```
from selenium import webdriver
from selenium.webdriver.common.keys import Keys

browser = webdriver.Firefox()

browser.get('http://www.yahoo.com')
assert 'Yahoo' in browser.title

elem = browser.find_element_by_name('p')  # Find the search box
elem.send_keys('seleniumhq' + Keys.RETURN)

browser.quit() 
```

# objective-c - 使用 @property 和 @synthesize 创建访问器方法和 ivars 的详细信息

> ID：10769494
> 
> 赞同：2
> 
> 时间：2012-05-26T20:24:28.757
> 
> 标签：objective-c, properties

我正在尝试一些东西，因为我正在学习`@property`和`@synthesize`。我认为`@property`创建了实例变量并`@synthesize`为其创建了 getter 和 setter 方法。

```
#import <Foundation/Foundation.h>

@interface XYPoint : NSObject 
@property int x, y;

-(void) setX: (int) xVar andY: (int) yVar;

@end 
```

我没有在我的实现文件中合成`x`和`y`，但我想知道为什么我被允许同时做这两个：

```
-(void) setX:(int)x {
    x = x;
}

-(void) setY:(int)y {
    y = y;
} 
```

但收到有关未声明标识符的错误消息`x`，`y`当我这样做时：

```
-(void) setX:(int)xVar andY:(int)yVar {
    x = xVar;
    y = yVar;
} 
```

另外，为什么没有`-(void) setY:(int)y`并且`-(void) setX:(int)x`必须在接口文件中声明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:33:25.307

> 我认为@property 创建了实例变量，@synthesize 为它创建了getter 和setter 方法。

这并不完全正确。该`@property`声明基本上只是对其他类做出承诺：“您可以要求我提供一个`int`命名`x`的 ，我也会回应尝试给我一个`int`以该名称存储的尝试。” 声明本身不会在类中创建任何东西，无论是方法还是 ivar。

就是`@synthesize`这样做*的*。您可以自己实现自己的 setter、getter 和 ivar，也可以合成它们（或任何组合）。

因此，当您不使用时出现该错误的原因`@synthesize`是没有创建任何 ivars，因此`x`也不`y`是您可以在类中使用的名称。

在第一种情况下，你没有做你认为你正在做的事情。在这种方法中：

```
-(void) setX:(int)x {
    x = x;
} 
```

`x`是参数的名称，您只是将其分配给它自己。（您不能在同一范围内拥有两个具有相同名称的变量。如果您创建了一个名为 的 ivar *，*`x`则会收到有关方法参数隐藏 ivar 的编译器警告。这意味着参数名称相同作为 ivar，不允许您访问 ivar。）

如果您将其更改为：

```
-(void) setX:(int)newX {
    x = newX;
} 
```

您会看到关于`x`未声明的相同错误。

> 另外，为什么没有`-(void) setY:(int)y`并且`-(void) setX:(int)x`必须在接口文件中声明？

它们由`@property`指令声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T20:32:25.383

在我看来，好像您只是将参数变量分配给它们已有的值。如果您更改参数名称，发生的事情可能更有意义：

```
-(void) setX:(int)xVar {
    x = xVar;
}

-(void) setY:(int)yVar {
    y = yVar;
} 
```

错误消息应该是一致的。

# java - 以多态方式和正常方式声明arrayList之间的区别？

> ID：10769497
> 
> 赞同：3
> 
> 时间：2012-05-26T20:24:37.077
> 
> 标签：java, arraylist, polymorphism

像这样多态地声明一个arrayList有什么区别：

```
List<Integer> iL = new ArrayList<Integer>(); 
```

和这样的正常风格：

```
ArrayList<String> stuff = new ArrayList<String>(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T20:26:13.953

是，有一点不同

和

```
List<Integer> iL ; 
```

你可以做

```
iL = new ArrayList<Integer>(); 
```

并且

```
iL = new LinkedList<Integer>(); 
```

好处：

您可以引用任何其他**对象** `List`

* * *

**另见**

*   [里氏替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T20:27:13.360

通常建议使用第一个声明。它允许轻松更改列表的实现，只需更改带有实例化的行。它还表明您没有使用`ArrayList`.

使用该界面时会产生一些性能成本，但在现代虚拟机上几乎不会被注意到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T20:26:43.003

是的。在第二种情况下，`stuff`只能是一个 ArrayList。首先，`iL`可以是任何实现该`List`接口的类的实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T20:27:57.497

是的。它不仅仅是“编码风格”问题，其他答案正在谈论......

[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)具有比[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)接口提供的更多方法（例如[`trimToSize()`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#trimToSize%28%29)），因此将变量声明为 an 可以`ArrayList`让您访问这些方法。

一般来说，除非您需要访问这些特殊方法，否则最好将其声明为 a `List`，遵循声明抽象类优先于具体类的模式（允许您随意交换实现，例如使用 a`LinkedList`代替）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-26T20:30:54.750

你只能访问列表功能等。它是列表。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-26T20:30:57.210

除了所有这些标准答案“接口程序”等，`ArrayList`在你可以写`List`的地方写简直丑陋，所以你最好有理由这样做——而且 99% 的时间不会可以。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-26T20:35:47.053

在声明中使用接口时有一些区别：

*   表示最不重要的内容。如果您需要仅在具体子类中可用的特定方法，请将其声明为这样。
*   允许您以最小的更改交换不同的实现（`LinkedList`或）。`CopyOnWriteList`
*   *由于多态性导致的*微小性能损失。**

 *鉴于上述情况，使用接口声明方法参数和返回类型以隐藏不重要的实现细节并最大限度地减少限制。仅当性能*非常关键*或需要它提供的其他方法时，才使用实际类声明局部变量。如果您稍后选择不同的具体类，则需要更改对构造函数的调用，该调用可能与声明位于同一行。*

# javascript - Javascript：向页面中具有特定计算样式属性的元素添加内联样式

> ID：10769498
> 
> 赞同：2
> 
> 时间：2012-05-26T20:24:37.217
> 
> 标签：javascript, html, css

我正在尝试向页面中具有特定计算样式属性的元素添加内联样式。

例如：

```
<head>
    <style>
        p.mim {
            cursor:pointer;
        }

        a.fif {
            cursor:pointer;
        }

    </style>
</head>
<body>
     <p class="mim">prova</p>
     <a class="fif">prova</a>
</body> 
```

我想为每个在计算样式中设置了“cursor:pointer”的元素添加一个内联样式“cursor:wait”：

```
<body>
    <p class="mim" style="cursor:wait;">prova</p>
    <a class="fif" style="cursor:wait;">prova</a>
</body> 
```

这是我尝试过的：

```
var elms = document.getElementsByTagName("*");
for (var j = 0; j < elms.length; j++) {

    var crs = getComputedStyle(elm, null).getPropertyCSSValue('cursor') || "";
    crs = crs.replace(/\s/g, "").toLowerCase();

    switch (crs) {
        case "pointer":
        case "Pointer":
        case "POINTER":
            elm.style.cursor = "wait";
            break;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:39:10.843

由于多种原因，您的代码是多余的，而其他原因则不完整。

首先，`getComptedStyle`在早期版本的 IE 中不存在。他们改为使用该`currentStyle`物业。值得庆幸的是，很容易对此进行填充：

```
if( typeof getComputedStyle == "undefined") getComputedStyle = function(elem) {return elem.currentStyle;}; 
```

既然已经解决了这个问题，请删除该`null`论点，因为它完全是多余的。实际上，我什至不知道`getComputedStyle` *有*第二个论点，但那只是我。

接下来，您可以通过获取`.cursor`(or `['cursor']`) 而不是该`.getPropertyCSSValue`调用来获取 cursor 属性（这也是我从未听说过的......）。如果该属性尚未设置，您也可以删除`|| ""`因为`getComputedStyle`将返回一个空字符串。`cursor`

您不需要修剪空格，但为了安全起见，切换到小写似乎是个好主意。

...但是，紧接着`toLowerCase()`，你检查三个不同的大写单词？真的吗？

此外，您永远不会定义`elm`（这是您的实际问题所在），您应该缓存`elms.length`.

最终代码应如下所示：

```
if( typeof getComputedStyle == "undefined") getComputedStyle = function(elem) {return elem.currentStyle;};
var elms = document.getElementsByTagName("*"), l = elms.length, i;
for( i=0; i<l; i++) {
    if( getComputedStyle(elms[i]).cursor.toLowerCase() === "pointer") {
        elms[i].style.cursor = "wait";
    }
} 
```

如果您希望能够撤消此操作，则需要存储您正在修改的元素数组，循环遍历它并删除样式 ( `.style.cursor = "";`)。

# typo3 - 如何从任何页面渲染 cObj 或任何 cObj，但从特定页面上的 eID-ajax 函数？

> ID：10769500
> 
> 赞同：0
> 
> 时间：2012-05-26T20:25:02.787
> 
> 标签：typo3

在 eID 脚本中，我想使用函数 cObjGetSingle 呈现特定页面的所有内容元素，但它给了我一个空字符串？我的代码：

```
tslib_eidtools::connectDB(); //Connect to database
$cObj = t3lib_div::makeInstance('tslib_cObj');
$conf['tables'] = 'tt_content';
$conf['source'] = "551"; 
$conf['dontCheckPid'] = 1;
return $cObj->cObjGetSingle('RECORDS', $conf); 
```

编辑：函数 cObjGetSingle 中的 class.tslib_content.php 有问题吗？该函数没有被执行，因为有一个疯狂的递归循环检查？编码：

```
 // Checking that the function is not called eternally. This is done by interrupting at a depth of 100
    $GLOBALS['TSFE']->cObjectDepthCounter--;
    if ($GLOBALS['TSFE']->cObjectDepthCounter > 0) {
        $name = trim($name); 
```

当我调用 cObjGetSingle $GLOBALS['TSFE']->cObjectDepthCounter 为 null 并且检查后它为 -1 时，该函数会终止循环。但为什么？

编辑2：这也不能解决问题： http: [//lists.typo3.org/pipermail/typo3-dev/2007-August/024497.html](http://lists.typo3.org/pipermail/typo3-dev/2007-August/024497.html)？这是我的 conf 数组：

```
 $conf = array (
                    'tables' => 'tt_content',
                    'source' => "551",
                    'dontCheckPid' => 1,
                    "conf." => array (
                            "tt_content" => "TEXT",
                                "tt_content." => array (
                                        "field" => 'uid'
                                    ),

                        )
                    ); 
```

编辑 3：根据帖子，我不确定这是 USER_INT / COA_INT 还是缓存问题，因为我使用的页面未缓存，我想使用 eID (ajax) 函数来呈现我的内容对象？？？我不确定如何调试这个？

编辑 4：也许解决方案是创建一个 cObj？[http://www.mneuhaus.com/2008/12/05/function-to-make-a-cobj-in-typo3/](http://www.mneuhaus.com/2008/12/05/function-to-make-a-cobj-in-typo3/) ????

编辑 5：这是另一个较短的版本：[http](http://sebastiaandejonge.com/blog/articles/2010/september/21/bringing-ajax-to-your-frontend-plugins/) ://sebastiaandejonge.com/blog/articles/2010/september/21/bringing-ajax-to-your-frontend-plugins/ ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:55:53.310

您在 conf 下缺少渲染定义！

看看。`tt_content`_ `TSOB`在普通页面上，这是存在的。现在你必须手动完成。

# php - 在 php 之前包含脚本

> ID：10769505
> 
> 赞同：0
> 
> 时间：2012-05-26T20:26:00.713
> 
> 标签：php

`<body>`有没有办法在php中的标签之前将脚本注入页面？我已经看到了一些关于如何使用 jquery 执行此操作的示例，但是 jquery 会导致我的网站的某些部分无法正常运行，因此我需要一个 php 代码，以便我可以有选择地在页面的开始标记之前注入脚本。

IE。

```
.....
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="jquery.internads.js"></script>
<script>

    $(document).ready(function(){       

        // Call Intern Ads              
        $().tcInternAds({
            title: "Support Our Sponsors!",
            url: "adpage.html",
            timeout: 10,
            deplay: 0,
            wait: 0,
            closeable: true
        });

    });

</script>
<body>
<div class="xxxxx">
...............</div> 
```

如果可能的话，我希望能够使用 php，因此我可以将代码包含在我需要调用脚本的模板文件中，同时避免全局包含。

有人能帮忙吗？

最好的，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:32:52.323

我找到了解决问题的方法，而无需注入或替换头代码。问题是我的网站包含 mootools 并且 jquery 与之冲突。我通过使用 jQuery noConflict 解决了这个问题，它定义了一个要使用的命名空间，因此通过使用自定义变量而不是美元 $ 来解决这个问题。

这是我解决 jquery/mootools 冲突的工作解决方案。

```
<link href="/internAds.css" rel="stylesheet" type="text/css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="/jquery.internads.js"></script>
<script>
var $j = jQuery.noConflict();
    $j(document).ready(function(){      

        // Call Intern Ads              
        $j().tcInternAds({
            title: "Support Our Sponsors!",
            url: "/adpage.html",
            timeout: 15,
            deplay: 0,
            wait: 5,
            closeable: false
        });

    });

</script> 
```

我感谢大家的时间，我不确定我是如何忽视冲突的。

最好的，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T20:28:06.213

不会简单地把它放在`<head>`作品中吗？

```
<head>
.....
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="jquery.internads.js"></script>
<script>

    $(window).load()(function(){       

        // Call Intern Ads              
        $().tcInternAds({
            title: "Support Our Sponsors!",
            url: "adpage.html",
            timeout: 10,
            deplay: 0,
            wait: 0,
            closeable: true
        });

    });

</script>
</head>
<body>
<div class="xxxxx">
...............</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T20:32:41.890

将您的内容放入 index.php（或其他任何名称）中。

它应该如下所示：

```
<?php

...phpcode...

?>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="jquery.internads.js"></script>
<script>
...
</script>
<body>
<div class="xxxxx">

<?php

another php code

?>

</div> 
```

# android - Android活动故障

> ID：10769507
> 
> 赞同：1
> 
> 时间：2012-05-26T20:26:06.217
> 
> 标签：android, android-activity

我用 Intent 调用一项活动。在那个活动（方法创建）中，我检查一些参数并调用另一个 - 第三个活动。在第三个活动加载之前，我可以在几毫秒内看到第二个活动的视图。我不在第二个活动中加载视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T22:31:52.817

使用[startActivityForResult](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)启动第三个活动（来自 onCreate 方法），即使您不需要结果。这将使第二个活动窗口不显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T20:42:52.857

当您希望显示第二个活动的内容时，仅（一次和）在第二个活动中调用“setContentView”。

此外，如果您在开始第三个活动时对秒活动调用完成，请记住从函数返回，而不是继续初始化（以及“setContentView”的调用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T20:50:53.443

这里的问题实际上是第一个活动应该直接调用第三个活动。只需将确定第二个活动绕过的逻辑提取到一个单独的类并调用它而不是第二个活动。

制作精良的活动实际上应该是非常轻量级的，主要是诸如加载参数和根视图层次结构以及将事件路由到片段之类的管道。如果您不能这样做（重构太难），请尝试通过该[`Activity.overridePendingTransition(int enterAnim,int exitAnim)`](http://developer.android.com/reference/android/app/Activity.html#overridePendingTransition%28int,%20int%29)方法禁用活动转换。

# ruby-on-rails - Ruby on rails 下拉框初学者 lvl

> ID：10769509
> 
> 赞同：0
> 
> 时间：2012-05-26T20:26:15.660
> 
> 标签：ruby-on-rails

所以我是 ROR 的初学者，就像我知道一个月一样（学校作业，我们没有得到诅咒，我们需要使用“谷歌”）

所以我想要一个包含我所有城市列表的下拉框。然后，如果我选择一个城市，我需要将 city_id 与日期一起保存在我的数据库中。到目前为止，我的代码似乎可以工作，除非我点击保存它说城市是空的（由于故障保存它不能为空）

这是我的代码

```
 <div class="field">
    <%= f.label :stad_id %><br />
    <% cities_array = Stad.all.map { |stad| [stad.naam, stad.land] } %>
    <%= select_tag(Stad, options_for_select(cities_array))  %>

    </div>
  <div class="field">
    <%= f.label :datum %><br />
    <% datum = Time.now.to_s(:db) %>
    <%= f.text_field :datum, :value => datum.inspect, :readonly => true %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我真的不知道我做错了什么，除了我有一种奇怪的感觉，我实际上并没有发出保存它的命令。

非常感谢罗宾的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:30:35.630

我注意到这里有几件事是错误的。

1）将城市数组的创建放入您的控制器中，而不是您的视图中：

```
def edit
  @something = Something.find(params[:id])
  @cities_array = ... whatever ...
end 
```

2）创建你的city_array时，你需要指定城市的ID作为第二个参数，像这样：

```
@cities_array = Stad.all.map { |stad| [stad.naam, stad.id] } 
```

3) select_tag 调用不是针对 Stad，而是针对您要保存的模型。例如，您的表单可能如下所示：

```
<%= form_for @something %>
  <%= f.label :city %>
  <%= f.select :city_id, @cities_array %>
  # or!
  <%= select :something, :city_id, @cities_array %>
<% end %> 
```

我希望这可以为您解决问题。

# apache - 通过 apache cgi-bin 运行二进制文件

> ID：10769510
> 
> 赞同：0
> 
> 时间：2012-05-26T20:26:23.580
> 
> 标签：apache, fedora, cgi-bin

我正在尝试通过通用网关接口（cgi-bin）运行二进制文件。但是每当我尝试从浏览器访问*http://localhost/cgi-bin/binary*时，我都会收到 HTTP 500 Internal 错误，在 /var/log 中有以下日志条目

```
[Sat May 26 15:31:55 2012] [error] [client 127.0.0.1] malformed header from script. Bad header=HTTP_HOST=localhost: binary 
```

LE：如果 cgi-bin 对象是 php 脚本或 python，这似乎不会发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:33:43.200

确保在代码的开头至少输出：

`Content-type: text/html\n\n`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T01:32:55.840

尝试这个。

```
`#!/usr/pkg/bin/perl
print "Content-type: text/html\n\n";
print "<HTML>\n";
print "<BODY>\n";
print "<H1>Hello, world!</H1>\n";
print "</BODY>\n</HTML>";` 
```

并确保第一行`#!/usr/pkg/bin/perl`也非常重要，因为它应该适合您的 perl 默认目录。

您可以使用`$ whereis perl`来查找目录。

# python - Bottle 应用程序不处理放入包内单独模块中的路由

> ID：10769514
> 
> 赞同：2
> 
> 时间：2012-05-26T20:26:45.123
> 
> 标签：python, bottle

我有这个目录结构：

```
.
├── controller
│   ├── FooController.py
│   ├── __init__.py
│
├── main.py 
```

`FooController`：

```
from bottle import get, post, request, response, run, abort, \
                   redirect, LocalResponse
import json

@get('/')
def create():
    response.content_type = 'application/json'
    return json.dumps({'hello2' : 'world'}) 
```

我执行具有以下功能的python `main.py`：

```
from controller import *
from bottle import get, post, request, response, run, abort, \
                   redirect, LocalResponse

if __name__ == '__main__':
    run(host = 'localhost', port = 8080) 
```

我希望通过导入所有控制器（在本例中`FooController`），它会挂接到框架中。但是当我转到 localhost:8080/ 时却没有出现 404 错误。如果我将所有路线都放入`main.py`，它可以工作。

有谁知道我怎样才能完成我正在寻找的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T20:32:12.713

不确定这是模块化应用程序的最佳方式，但是

```
from controller.FooController import * 
```

是进行导入的正确方法，它将修复您的 404 错误。

# javascript - 如何通过 Jquery 中的函数调用设置变量？

> ID：10769517
> 
> 赞同：0
> 
> 时间：2012-05-26T20:26:57.220
> 
> 标签：javascript, jquery, variables, for-loop

我想通过运行一个函数并检索一个值来设置一个变量。

这是我的代码（缩写为 if-checks）：

```
var setToPage  = return loopHistory("external");

function loopHistory(scope) {
    for (var i = $.mobile.urlHistory.stack.length-2; i>=0; i--) {

        if (scope == "internal" ){
            if ( some[i] == thing ) || i == 0  ) {
                i == 0 ?  $temp =  "VALUE-ONE" : $temp =  "VALUE-TWO"
                return $temp;
                break;
                }
            } else if (scope == "external") {
                $temp = some[i];
                if ( thing == true )  {
                    return $temp;
                    break;
                    }
                }
        }
    } 
```

这不起作用。

**问题**：
如何通过运行上面的函数来声明**setToPage的值？**

感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T20:31:43.967

我不知道`return`第一行的意义是什么...... return 用于函数内部，将值返回给调用函数的任何内容。

```
var setToPage  = loopHistory("external"); 
```

# c++ - 基于 HOG 特征的 SVM 分类器用于 OpenCV 中的“对象检测”

> ID：10769519
> 
> 赞同：22
> 
> 时间：2012-05-26T20:27:00.440
> 
> 标签：c++, opencv, svm, object-recognition, training-data

我有一个项目，我想检测图像中的对象；我的目标是使用 HOG 功能。通过使用 OpenCV SVM 实现，我可以找到检测人的代码，并且我阅读了一些关于调整参数以检测对象而不是人的论文。不幸的是，由于几个原因，我不能这样做。首先，我可能错误地调整了参数，其次，我不是 C++ 的优秀程序员，但我必须使用 C++/OpenCV 来做这件事……[在这里](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/c/peopledetect.cpp?rev=2314)你可以找到用于检测人的 HOG 特征的代码使用 C++/OpenCV。

假设我想检测这张[图片](http://4.bp.blogspot.com/_T0xDt-BeZ74/TSi61YXwjFI/AAAAAAAAAFc/zEtHc8IVTnQ/s1600/shampoo_004-1.jpg)中的物体。现在，我将向您展示我尝试在代码中更改的内容，但对我来说没有成功。

我试图更改的代码：

```
HOGDescriptor hog;
hog.setSVMDetector(HOGDescriptor::getDefaultPeopleDetector()); 
```

我尝试`getDefaultPeopleDetector()`使用以下参数进行更改，但没有成功：

```
(Size(64, 128), Size(16, 16), Size(8, 8), Size(8, 8), 9, 0,-1, 0, 0.2, true, cv::HOGDescriptor::DEFAULT_NLEVELS) 
```

然后我尝试制作一个矢量，但是当我想打印结果时，它似乎是空的。

```
vector<float> detector;

HOGDescriptor hog(Size(64, 128), Size(16, 16), Size(8, 8), Size(8, 8), 9, 0,-1, 0, 0.2, true, cv::HOGDescriptor::DEFAULT_NLEVELS);

hog.setSVMDetector(detector); 
```

拜托，我需要帮助解决这个问题。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-29T20:23:45.907

为了使用 opencv HOG 描述符和 SVM 分类器检测任意对象，您需要首先训练分类器。在这里玩参数无济于事，对不起:(。

从广义上讲，您需要完成以下步骤：

**步骤 1)**准备一些您想要检测的对象的训练图像（正样本）。此外，您还需要准备一些没有感兴趣对象的图像（负样本）。

**步骤 2）**检测训练样本的 HOG 特征，并使用该特征来训练 SVM 分类器（OpenCV 中也提供）。

**步骤 3)**在 HOGDescriptor::setSVMDetector() 方法中使用经过训练的 SVM 分类器的系数。

只有这样，您才能使用 peopledetector.cpp 示例代码来检测您想要检测的对象。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-12T01:34:33.863

我一直在处理同样的问题，并且对我创建的缺少一些干净的 C++ 解决方案感到惊讶**[~> 这个 SVMLight <~ 的包装器](https://github.com/LihO/SVMLightClassifier)**，它是一个提供类`SVMTrainer`并将`SVMClassifier`培训简化为如下内容的静态库：

```
// we are going to use HOG to obtain feature vectors:
HOGDescriptor hog;
hog.winSize = Size(32,48);

// and feed SVM with them:
SVMLight::SVMTrainer svm("features.dat"); 
```

然后对于每个训练样本：

```
// obtain feature vector describing sample image:
vector<float> featureVector;
hog.compute(img, featureVector, Size(8, 8), Size(0, 0));

// and write feature vector to the file:
svm.writeFeatureVectorToFile(featureVector, true);      // true = positive sample 
```

直到`features.dat`文件包含所有样本的特征向量，最后您只需调用：

```
std::string modelName("classifier.dat");
svm.trainAndSaveModel(modelName); 
```

* * *

一旦你有了一个带有模型的文件（或者`features.dat`你可以训练分类器）：

```
SVMLight::SVMClassifier c(classifierModelName);
vector<float> descriptorVector = c.getDescriptorVector();
hog.setSVMDetector(descriptorVector);
...
vector<Rect> found;
Size padding(Size(0, 0));
Size winStride(Size(8, 8));
hog.detectMultiScale(segment, found, 0.0, winStride, padding, 1.01, 0.1); 
```

只需查看[HOGDescriptor](http://docs.opencv.org/modules/gpu/doc/object_detection.html)的文档以获取更多信息 :)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-25T02:18:57.280

我做过与您类似的事情：使用 HOG 收集正负图像样本以提取汽车特征，使用线性 SVM 训练特征集（我使用 SVM 光），然后使用模型使用 HOG 多检测功能检测汽车。

我得到很多误报，然后我使用正样本和误报+负样本重新训练数据。然后再次测试生成的模型。结果检测有所改善（误报率降低），但结果并不令人满意（平均 50% 的命中率和 50% 的误报率）。调整多检测参数可以改善结果，但效果不大（误报减少 10% 并提高命中率）。

**编辑** 如果你愿意，我可以分享你的源代码，我非常愿意讨论，因为我使用 HOG 没有得到令人满意的结果。无论如何，我认为代码可以作为使用 HOG 进行训练和检测的良好起点

**编辑：添加代码**

```
static void calculateFeaturesFromInput(const string& imageFilename, vector<float>& featureVector, HOGDescriptor& hog) 
{
    Mat imageData = imread(imageFilename, 1);
    if (imageData.empty()) {
        featureVector.clear();
        printf("Error: HOG image '%s' is empty, features calculation skipped!\n", imageFilename.c_str());
        return;
    }
    // Check for mismatching dimensions
    if (imageData.cols != hog.winSize.width || imageData.rows != hog.winSize.height) {
       featureVector.clear();
       printf("Error: Image '%s' dimensions (%u x %u) do not match HOG window size (%u x %u)!\n", imageFilename.c_str(), imageData.cols, imageData.rows, hog.winSize.width, hog.winSize.height);
        return;
    }
    vector<Point> locations;
    hog.compute(imageData, featureVector, winStride, trainingPadding, locations);
    imageData.release(); // Release the image again after features are extracted
} 
```

...

```
int main(int argc, char** argv) {

    // <editor-fold defaultstate="collapsed" desc="Init">
    HOGDescriptor hog; // Use standard parameters here
    hog.winSize.height = 128;
    hog.winSize.width = 64;

    // Get the files to train from somewhere
    static vector<string> tesImages;
    static vector<string> positiveTrainingImages;
    static vector<string> negativeTrainingImages;
    static vector<string> validExtensions;
    validExtensions.push_back("jpg");
    validExtensions.push_back("png");
    validExtensions.push_back("ppm");
    validExtensions.push_back("pgm");
    // </editor-fold>

    // <editor-fold defaultstate="collapsed" desc="Read image files">
    getFilesInDirectory(posSamplesDir, positiveTrainingImages, validExtensions);
    getFilesInDirectory(negSamplesDir, negativeTrainingImages, validExtensions);
    /// Retrieve the descriptor vectors from the samples
    unsigned long overallSamples = positiveTrainingImages.size() + negativeTrainingImages.size();
    // </editor-fold>

    // <editor-fold defaultstate="collapsed" desc="Calculate HOG features and save to file">
    // Make sure there are actually samples to train
    if (overallSamples == 0) {
        printf("No training sample files found, nothing to do!\n");
        return EXIT_SUCCESS;
    }

    /// @WARNING: This is really important, some libraries (e.g. ROS) seems to set the system locale which takes decimal commata instead of points which causes the file input parsing to fail
    setlocale(LC_ALL, "C"); // Do not use the system locale
    setlocale(LC_NUMERIC,"C");
    setlocale(LC_ALL, "POSIX");

    printf("Reading files, generating HOG features and save them to file '%s':\n", featuresFile.c_str());
    float percent;
    /**
     * Save the calculated descriptor vectors to a file in a format that can be used by SVMlight for training
     * @NOTE: If you split these steps into separate steps: 
     * 1\. calculating features into memory (e.g. into a cv::Mat or vector< vector<float> >), 
     * 2\. saving features to file / directly inject from memory to machine learning algorithm,
     * the program may consume a considerable amount of main memory
     */ 
    fstream File;
    File.open(featuresFile.c_str(), ios::out);
    if (File.good() && File.is_open()) {
        File << "# Use this file to train, e.g. SVMlight by issuing $ svm_learn -i 1 -a weights.txt " << featuresFile.c_str() << endl; // Remove this line for libsvm which does not support comments
        // Iterate over sample images
        for (unsigned long currentFile = 0; currentFile < overallSamples; ++currentFile) {
            storeCursor();
            vector<float> featureVector;
            // Get positive or negative sample image file path
            const string currentImageFile = (currentFile < positiveTrainingImages.size() ? positiveTrainingImages.at(currentFile) : negativeTrainingImages.at(currentFile - positiveTrainingImages.size()));
            // Output progress
            if ( (currentFile+1) % 10 == 0 || (currentFile+1) == overallSamples ) {
                percent = ((currentFile+1) * 100 / overallSamples);
                printf("%5lu (%3.0f%%):\tFile '%s'", (currentFile+1), percent, currentImageFile.c_str());
                fflush(stdout);
                resetCursor();
            }
            // Calculate feature vector from current image file
            calculateFeaturesFromInput(currentImageFile, featureVector, hog);
            if (!featureVector.empty()) {
                /* Put positive or negative sample class to file, 
                 * true=positive, false=negative, 
                 * and convert positive class to +1 and negative class to -1 for SVMlight
                 */
                File << ((currentFile < positiveTrainingImages.size()) ? "+1" : "-1");
                // Save feature vector components
                for (unsigned int feature = 0; feature < featureVector.size(); ++feature) {
                    File << " " << (feature + 1) << ":" << featureVector.at(feature);
                }
                File << endl;
            }
        }
        printf("\n");
        File.flush();
        File.close();
    } else {
        printf("Error opening file '%s'!\n", featuresFile.c_str());
        return EXIT_FAILURE;
    }
    // </editor-fold>

    // <editor-fold defaultstate="collapsed" desc="Pass features to machine learning algorithm">
    /// Read in and train the calculated feature vectors
    printf("Calling SVMlight\n");
    SVMlight::getInstance()->read_problem(const_cast<char*> (featuresFile.c_str()));
    SVMlight::getInstance()->train(); // Call the core libsvm training procedure
    printf("Training done, saving model file!\n");
    SVMlight::getInstance()->saveModelToFile(svmModelFile);
    // </editor-fold>

    // <editor-fold defaultstate="collapsed" desc="Generate single detecting feature vector from calculated SVM support vectors and SVM model">
    printf("Generating representative single HOG feature vector using svmlight!\n");
    vector<float> descriptorVector;
    vector<unsigned int> descriptorVectorIndices;
    // Generate a single detecting feature vector (v1 | b) from the trained support vectors, for use e.g. with the HOG algorithm
    SVMlight::getInstance()->getSingleDetectingVector(descriptorVector, descriptorVectorIndices);
    // And save the precious to file system
    saveDescriptorVectorToFile(descriptorVector, descriptorVectorIndices, descriptorVectorFile);
    // </editor-fold>

    // <editor-fold defaultstate="collapsed" desc="Test detecting vector">

    cout << "Test Detecting Vector" << endl;
    hog.setSVMDetector(descriptorVector); // Set our custom detecting vector
    cout << "descriptorVector size: " << sizeof(descriptorVector) << endl;

    getFilesInDirectory(tesSamplesDir, tesImages, validExtensions);
    namedWindow("Test Detector", 1);

    for( size_t it = 0; it < tesImages.size(); it++ )
    {
        cout << "Process image " << tesImages[it] << endl;
        Mat image = imread( tesImages[it], 1 );
        detectAndDrawObjects(image, hog);

        for(;;)
        {
            int c = waitKey();
            if( (char)c == 'n')
                break;
            else if( (char)c == '\x1b' )
                exit(0);
        }
    }
    // </editor-fold>
    return EXIT_SUCCESS;
} 
```

# jquery - 对左右方向值使用 HTML 5 数据属性

> ID：10769521
> 
> 赞同：0
> 
> 时间：2012-05-26T20:27:04.157
> 
> 标签：jquery, animation

以下代码块几乎相同......它们之间的主要区别是左右方向值。

我想尽可能地减少以下代码，可能会为 .forward 和 .backward 重用一个代码块。我假设我们可以使用变量或 html5 数据属性来存储左右的值？？？

再次感谢大家！

```
<div class="hover-area">
    Hover area
    <div class="backward">Backward</div>
    <div class="forward">Forward</div>
</div>

<style>
    a
.hover-area {
    position: relative;
}

.forward,
.backward {
    position: absolute;
}

</style> 
```

​</p>

```
 $('.forward').css({opacity:0, right:0});
    $('.hover-area').hover(function() {
        $(this).find('.forward').stop()
            .animate({right:20}, {queue:false, duration:300, easing:'easeOutCubic'})
            .animate({opacity:'0.95'}, {queue:false, duration:400, easing:'easeOutCubic'});
    },function() {
        $(this).find('.forward').stop()
            .animate({right:0}, {queue:false, duration:550, easing:'easeOutSine'})
            .animate({opacity:'0'}, {queue:false, duration:300, easing:'easeOutSine'});
    });

    $('.backward').css({opacity:0, left:0});
    $('.hover-area').hover(function() {
        $(this).find('.backward').stop()
            .animate({left:20}, {queue:false, duration:300, easing:'easeOutCubic'})
            .animate({opacity:'0.95'}, {queue:false, duration:400, easing:'easeOutCubic'});
    },function() {
        $(this).find('.backward').stop()
            .animate({left:0}, {queue:false, duration:550, easing:'easeOutSine'})
            .animate({opacity:'0'}, {queue:false, duration:300, easing:'easeOutSine'});
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:06:07.370

到底怎么回事，我玩了一下，想出了：

```
$('.forward, .backward').css([$(this).is('.forward')?'right':'left'], 0).css('opacity', 0);
$('.hover-area').on('mouseenter mouseleave', function(evt) {
    $(this).find('.forward, .backward').each(function(i,elm) {
        var direction = {};
            direction[$(elm).is('.forward') ? 'right' : 'left'] = evt.type==='mouseleave'?0:20;
        $(elm).stop()
            .animate(direction, {queue:false, duration:300, easing:'easeOutCubic'})
            .animate({opacity: evt.type==='mouseleave'?0:0.95}, {queue:false, duration:400, easing:'easeOutCubic'});
    });
});​ 
```

[**示范**](http://jsfiddle.net/adeneo/Kv8cK/)

# compilation - 编译 ffmpeg 以用于 x86 架构的 Android (ndk)

> ID：10769522
> 
> 赞同：1
> 
> 时间：2012-05-26T20:27:09.633
> 
> 标签：compilation, android-ndk, ffmpeg, intel

我正在尝试为 Android 编译 ffmpeg，但为 x86 架构编译。我已经成功编译了一个 arm .so 并且一切正常，尽管通过在构建脚本中的相关位置用 x86 替换 arm 来解决问题。不幸的是，情况并非如此，我发生了一些奇怪的事情。

首先我在编译ffmpeg时得到这个：

```
/home/ankur/android-ndk-r8/platforms/android-8/arch-arm//usr/include/strings.h:49: warning: redundant redeclaration of 'index' 
```

注意拱臂而不是arch-x86。最后我明白了：

```
/home/ankur/android-ndk-r8/toolchains/x86-4.4.3/prebuilt/linux-x86/bin/i686-android-linux-ld: libavcodec/libavcodec.a(4xm.o): Relocations in generic ELF (EM: 40)
/home/ankur/android-ndk-r8/toolchains/x86-4.4.3/prebuilt/linux-x86/bin/i686-android-linux-ld: libavcodec/libavcodec.a(4xm.o): Relocations in generic ELF (EM: 40)
/home/ankur/android-ndk-r8/toolchains/x86-4.4.3/prebuilt/linux-x86/bin/i686-android-linux-ld: libavcodec/libavcodec.a(4xm.o): Relocations in generic ELF (EM: 40)
libavcodec/libavcodec.a(4xm.o): could not read symbols: File in wrong format 
```

我创建的构建脚本如下所示：

```
#!/bin/bash

NDK=~/android-ndk-r8
PLATFORM=$NDK/platforms/android-8/arch-x86/
PREBUILT=$NDK/toolchains/x86-4.4.3/prebuilt/linux-x86
function build_one_r8
{
./configure \
    --disable-shared \
    --enable-static \
    --enable-gpl \
    --enable-version3 \
    --enable-nonfree \
    --disable-doc \
    --disable-ffmpeg \
    --disable-ffplay \
    --disable-ffprobe \
    --disable-ffserver \
    --disable-avdevice \
    --disable-avfilter \
    --disable-postproc \
    --enable-small \
    --cross-prefix=$PREBUILT/bin/i686-android-linux- \
    --enable-cross-compile \
    --target-os=linux \
    --extra-cflags="-I$PLATFORM/usr/include" \
    --arch=x86 \
    --disable-symver \
    --disable-debug \
    --disable-stripping \
    $ADDITIONAL_CONFIGURE_FLAG
sed -i 's/HAVE_LRINT 0/HAVE_LRINT 1/g' config.h
sed -i 's/HAVE_LRINTF 0/HAVE_LRINTF 1/g' config.h
sed -i 's/HAVE_ROUND 0/HAVE_ROUND 1/g' config.h
sed -i 's/HAVE_ROUNDF 0/HAVE_ROUNDF 1/g' config.h
sed -i 's/HAVE_TRUNC 0/HAVE_TRUNC 1/g' config.h
sed -i 's/HAVE_TRUNCF 0/HAVE_TRUNCF 1/g' config.h
make clean
make  -j4 install
$PREBUILT/bin/i686-android-linux-ar d libavcodec/libavcodec.a inverse.o
$PREBUILT/bin/i686-android-linux-ld -rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib  -soname libffmpeg.so -shared -nostdlib  -z,noexecstack -Bsymbolic --whole-archive --no-undefined -o $PREFIX/libffmpeg.so libavcodec/libavcodec.a libavformat/libavformat.a libavutil/libavutil.a libswscale/libswscale.a -lc -lm -lz -ldl -llog  --warn-once  --dynamic-linker=/system/bin/linker $PREBUILT/lib/gcc/i686-android-linux/4.4.3/libgcc.a
}
function build_one_r8_2
{
$PREBUILT/bin/i686-android-linux-ar d libavcodec/libavcodec.a inverse.o
$PREBUILT/bin/i686-android-linux-ld -rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib  -soname libffmpeg.so -shared -nostdlib  -z,noexecstack -Bsymbolic --whole-archive --no-undefined -o $PREFIX/libffmpeg.so libavcodec/libavcodec.a libavformat/libavformat.a libavutil/libavutil.a libswscale/libswscale.a -lc -lm -lz -ldl -llog  --warn-once  --dynamic-linker=/system/bin/linker $PREBUILT/lib/gcc/i686-android-linux/4.4.3/libgcc.a
}
#x86
CPU=x86
OPTIMIZE_CFLAGS="-march=$CPU "
PREFIX=./android/$CPU
ADDITIONAL_CONFIGURE_FLAG=
build_one_r8 
```

我希望我做错了什么，而不是这不可能。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:08:39.737

我已经能够为 Atom 编译，但是 GoogleTV 不支持 NDK，这解释了为什么我为我的 GoogleTV 设备编译 NDK 的所有尝试都不起作用。我希望它很快就会到来！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:07:15.273

这是我的构建脚本，如果有帮助，我会看到我设置的一些您似乎没有设置的内容，这可能是您的问题的一部分。我从 ffmpeg 源目录（源）下面的目录中获取它。IE脚本称为build.sh并驻留在〜/ android / ffmpeg中，ffmpeg源在〜/ android / ffmpeg / source中，当我运行脚本时，我的构建输出最终在〜/ android / build / armeabi-v7a中像这样：

```
~/android/ffmpeg$ source build.sh 
```

这是 build.sh：

```
#!/bin/bash

NDK=~/android/ndk
SYSROOT=$NDK/platforms/android-9/arch-arm
TOOLCHAIN=$NDK/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-
ABI="armeabi-v7a"
CPU="armv7-a"
ARCH="arm"
FPU="vfpv3-d16"
ANDROID_LIBS=$SYSROOT/usr/lib
DEST="../build/ffmpeg/$ABI"
EXTRA_LDFLAGS="-Wl,--fix-cortex-a8 -L$ANDROID_LIBS -Wl,-rpath-link,$ANDROID_LIBS"
EXTRA_CXXFLAGS="-Wno-multichar -Wno-psabi -fno-exceptions -fno-rtti"
EXTRA_CFLAGS="-DANDROID -marm -march=$CPU -mfloat-abi=softfp -mfpu=$FPU"

function configure
{
./configure \
    --target-os=linux \
    --prefix=$DEST \
    --cross-prefix=$TOOLCHAIN \
    --sysroot=$SYSROOT \
    --extra-cflags="$EXTRA_CFLAGS" \
    --extra-ldflags="$EXTRA_LDFLAGS" \
    --extra-cxxflags="$EXTRA_CXXFLAGS" \
    --enable-cross-compile \
    --extra-libs="-lgcc" \
    --arch=$ARCH \
    --cpu=$CPU \
    --disable-debug \
    --disable-runtime-cpudetect \
    --disable-optimizations \
    --disable-neon \
    --disable-network \
    --disable-armv5te \
    --disable-armv6 \
    --disable-armv6t2 \
    --disable-armvfp \
    --disable-everything \
    --disable-doc \
    --disable-decoders \
    --disable-encoders \
    --disable-demuxers \
    --disable-muxers \
    --disable-protocols \
    --disable-indevs \
    --disable-filters \
    --disable-outdevs \
    --disable-bsfs \
    --disable-shared \
    --disable-ffprobe \
    --disable-ffserver \
    --disable-avfilter \
    --disable-swresample \
    --disable-avdevice \
    --disable-ffplay \
    --disable-ffmpeg \
    --disable-swscale-alpha \
    --disable-avresample \
    --enable-static \
    --enable-pthreads \
    --enable-protocol=file \
    --enable-libvpx \
    --enable-decoder=vp8 \
    --enable-parser=vp8 \
    --enable-demuxer=matroska
}
cd source
make clean &&
configure &&
make -j8 && 
rm -rf $DEST &&
mkdir -p $DEST &&
make install 
```

# c - 在c中复制字符串的分段错误

> ID：10769524
> 
> 赞同：0
> 
> 时间：2012-05-26T20:27:23.783
> 
> 标签：c, segmentation-fault

以下代码显示了分段错误。如何解决问题？代码有什么问题？

```
#include <stdio.h>

void stcp (char *, char *);

int
main ()
{
  char *s = "This is first string";
  char *t = "string to be copied";
  stcp (s, t);
  printf ("%s", s);
  getch ();
}

void
stcp (char *s, char *t)
{
  while ((*s++ = *t++) != '\0');

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:30:53.837

默认情况下是字符串文字`const`。要使其成为非 const，您必须将其设为数组：

```
char s[] = "this is my string";
char t[] = "another string"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:06:14.093

```
#include <stdio.h>

void stcp (char *s, char *t);

int main (void)
{
  int i;
  char s[] = "This is first string";
  char t[] = "string to be copied        ";
  stcp (s, t);
  printf ("%s\n", s);
  printf ("%s\n", t);
  //getch ();
  return 0;
}

void stcp (char *s, char *t)
{
  int i;
  for (i=0;  (s[i]  != '\0')  &&  (t[i] != '\0') ;i++) {
    printf("%c  %c\n",s[i],t[i]);
    s[i] = t[i];
  }
  s[i] ='\0';
} 
```

# c++ - 如何在同级继承之间交换信息

> ID：10769529
> 
> 赞同：0
> 
> 时间：2012-05-26T20:27:44.093
> 
> 标签：c++, inheritance

我面临在继承树的叶子之间交换信息的问题，但是特定的叶子只需要与其他特定的叶子而不是所有现有的叶子交换信息。请查看以下（非常简化的）继承树和示例实现：

```
class station
{
virtual void transportOut(item* i, station *target) = 0;
virtual void transportIn(item* i, station *source) = 0;
};

class stationTransportOnly : public station
{
virtual void transportOut(item* i, station *target);
virtual void transportIn(item* i, station *source);
};

class stationTransportAndRotate : public station
{
virtual void transportOut(item* i, station *target);
virtual void transportIn(item* i, station *source);
}; 
```

`transportOut`和的示例实现`transportIn`可能如下所示：

```
void transportOut(item *i, station *target)
{
 target->transportIn(i, this);
 SendTransportOutCommandToRealMachine(i. target);
}

void transportIn(item *i, station *source)
{
 SendTransportInCommandToRealMachine(i. source);
} 
```

站点如何处理传输（例如，将哪些命令发送到站点模型的真实传送带）是站点特定的。多年来这一直很好，但现在要求发生了变化：一些车站需要比过去更多地同步他们的运输。他们的传输命令中需要一个“任务ID”，对于输出站和输入站来说必须是相同的。id 可能会在 中生成`transportOut`，但问题是如何携带 id 到中转站？

我可能会简单地扩展 的接口`transportIn`，但由于只有少数现有站需要此 id，因此对我来说似乎臃肿和糟糕的设计。我想知道是否有更好的方法，或者如果他们要从头开始设计，他们会如何处理它。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T01:10:03.160

为什么 item 不能带有 id 属性？然后 TransportOut 可以设置该 id，然后由 TransportIn 方法读取。

像那样：

```
void transportOut(item *i, station *target)
{
    i->SetID(generateID());
    target->transportIn(i, this);
    SendTransportOutCommandToRealMachine(i, target);
}

void transportIn(item *i, station *source)
{
    int taskID = i->GetID();
    SendTransportInCommandToRealMachine(i, source);
} 
```

# oop - 为什么我会在责任链上使用装饰器？

> ID：10769530
> 
> 赞同：0
> 
> 时间：2012-05-26T20:27:46.557
> 
> 标签：oop, design-patterns

我阅读了下一个有趣的讨论：[为什么我会在装饰器上使用责任链？](https://stackoverflow.com/questions/747913/why-would-i-ever-use-a-chain-of-responsibility-over-a-decorator).

我的问题是为什么我会在责任链上使用装饰器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:41:00.100

装饰器之所以有用，原因与接受的答案完全相同：

> 您可以在任何时候打破链条这一事实将责任链模式与装饰者模式区分开来

使用 COR，不能保证请求的执行。请求可能会一直通过链，而不会被链中的任何环节捕获和处理。相反，Decorator 强制请求由链中的所有链接处理。这是因为装饰器将对象包装在内部，并且通常通过在感兴趣的方法中添加更多步骤来增强功能。

我们可以清楚地看到，相同的特征可以看作是模式的优点和缺点。这取决于情况和开发人员来选择最合适的模式来使用。

# node.js - Node.js - 来自 2 个用户的相同输入同时弄乱了数据？

> ID：10769533
> 
> 赞同：0
> 
> 时间：2012-05-26T20:28:07.730
> 
> 标签：node.js

我正在使用 node.js、express 和 nowjs 构建网站/应用程序。用户登录我的网站后，他们可以使用箭头键移动精灵（除了其他服务）。第 i 个用户的精灵的位置保持在服务器端。

```
user[i] = { x : 0; y : 0 } 
```

箭头按键被发送到服务器以更新精灵位置。

```
E.g. user[5].x += 5. 
```

我不希望两个用户共享相同的位置（“冲突”）。因此，当服务器接收到按键时，服务器端函数会检查结果坐标是否等于“用户”数组中的某些坐标，如果是则忽略移动。

问题：当两个用户选择同时移动到坐标上时，我该如何处理？如果我理解正确，服务器端函数将同时被调用，并且两个用户最终将在相同的坐标上，因为在检查时，没有人拥有那组坐标吗？

或者，我是否安全，因为如果 2 个客户端同时调用一个服务器端函数（例如使用 nowjs），一个函数总是会一个接一个地被处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T20:31:06.417

node.js 是单线程的，“同时”没有任何事情发生。您将永远先有一步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T20:31:22.217

node.js 中的 javascript 代码在单个线程上执行，因此您应该是安全的。如果您使用异步库来计算单独线程上的冲突，那么您将处于危险之中，但听起来并没有发生这种情况。

# javascript - Rails 3 使用 jquery 制作 ajax 并执行 .js.erb

> ID：10769537
> 
> 赞同：0
> 
> 时间：2012-05-26T20:28:14.827
> 
> 标签：javascript, jquery, ruby, ajax, ruby-on-rails-3

我有以下haml代码：

```
%input{:value => "", :type => "button",:class => "SendBtn", :onclick => "$.get('#{send_path}',{parameter:$('#parameter').val()}); "} 
```

此输入在控制器中执行一个事件。

```
// This is my controller
def send

    if request.xhr?
        // do stuff
    end
end 
```

但是我在相应的 .js.erb 文件中的 js 代码没有被执行。它作为 get 请求的响应返回。

```
// send.js.erb
alert('hello'); 
```

执行此代码的 rails 方式如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T20:42:12.917

您的问题与 Rails 无关，是 jQuery。使用该`get`方法，您只是获取或多或少的纯文本。这不会被执行。您可以`eval`对文本进行操作，但有更好的方法。使用[`getScript`jQuery 中的方法](http://api.jquery.com/jQuery.getScript/)。这将获取并执行您的代码。

作为旁注，您的代码中有两件事困扰着我：

1.  您正在使用内联 JavaScript。尝试通过使用`data-`您的发送路径的属性来删除它，例如 this `data: { sendPath: send_path }`，并`$(yourInput).data('sendPath')`在您的`application.js`文件中检索它。
2.  从我个人的角度来看，我不喜欢在 ERB 模板中执行 JavaScript 代码。我发现这破坏了我的应用程序的前端逻辑。对我来说，将逻辑放在`.js`文件中并通过 JSON 与服务器通信会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T20:53:36.313

正如@topek 所说，您必须使用`$.getScript`. 同样在您的情况下，更好的方法是使用`button_to`with `:remote => true`property 而不是 plain `input`。

```
<%= button_to "Do Something", 
              { :controller => :somecontroller, :action=> :something }, 
              { :remote => true } 
 %> 
```

您也可以将属性传递给 button_to （但您已在路由定义中添加参数）。

```
<%= button_to "Do Something",
         { :controller => :somecontroller, :action=> :something, :param => @object.id },
         { :remote => true } %> 
```

这里有文档`button_to`：[http ://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to)

# java - Jlist selectedValue 为空

> ID：10769544
> 
> 赞同：0
> 
> 时间：2012-05-26T20:30:00.467
> 
> 标签：java, jlist

我对 JList 上的选择机制有点困惑。假设我在 JFrame 中有一个 JPanel。在这个面板中，我有一个 JList 和一个 TextField。如果我单击 JList 的一个项目，则所选项目变为浅蓝色，并在其周围创建一个深蓝色框架。此时，如果我调用 getSelectedValue() 我会正确选择它。但是，如果我现在单击 TextField，深蓝色框架就会消失（蓝色的“突出显示”仍然存在），如果我调用 getSelectedValue()，我会得到 null。

为什么会发生这种情况？即使它没有焦点（我正在谈论的框架），我如何才能获得“突出显示”的项目？

提前致谢

编辑：看来问题不是我解释的。尽管如此，如果我在按下按钮时尝试获取它，我会得到一个空选定对象。捕获：

![在此处输入图像描述](../Images/1c9eebf0af5f28b853962b0a2b730d19.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T01:06:15.547

该添加按钮触发了一种方法，在该方法中列表被清空并重新填充新值。显然，即使您正在调试，也不会显示更改，这就是我忽略它以及屏幕截图显示的原因。

# java - JSF 2.0 包含 ICEfaces 组件，尝试将 JPA 2.0 用于 JBOSS 独立服务器的 Persistence failed(nullpointException)

> ID：10769547
> 
> 赞同：0
> 
> 时间：2012-05-26T20:30:22.627
> 
> 标签：java, jsf-2, jpa-2.0, jboss7.x, icefaces-3

我正在尝试编写一个仅使用表单的小型网站。我使用 Eclipse IDE(indigo) 和 JBOSS AS 7.1 服务器。我使用 JSF 2.0 和最新的 ICEfaces 组件进行了编码。现在我已经添加了 JPA 组件来读取/写入 oracle 数据库。实体是为示例表创建的，我能够映射到数据库。但是在运行时，当我尝试从 bean 调用实体管理器以获取持久性单元时，它会得到空值。我不确定我在哪里做错了。

这是实体，持久性文件，bean，xhtml的代码

```
 package org.icefaces.training.applicant.view.model;

import java.io.Serializable;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.annotation.Resource;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;
import javax.faces.event.AjaxBehaviorEvent;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.persistence.PersistenceUnit;
import javax.persistence.Query;
import javax.transaction.NotSupportedException;
import javax.transaction.SystemException;
import javax.transaction.UserTransaction;

import org.icefaces.training.applicant.model.EmployeesEntity;

@ManagedBean(name = "jobApplicant")
@ViewScoped
public class JobApplicant implements Serializable {
    private String firstName;
    private String lastName;
    private String country;
    private String title;
    private Integer salary;
    private String email;
    private String subject;
    private String resume;
    private String lastName1;

    @PersistenceUnit(unitName="jobApplication")
    private EntityManagerFactory emf;

    public String getValue() throws NotSupportedException, SystemException
    {
    EntityManagerFactory emf = Persistence.createEntityManagerFactory("jobApplication");
        EntityManager em = emf.createEntityManager();
        EmployeesEntity emp = em.find(EmployeesEntity.class, 207);

        return emp.getLAST_NAME();

    }

    public String getSubject() {
        return subject;
    }

    public void setSubject(String subject) {
        this.subject = subject;
    }

    public String getResume() {
        return resume;
    }

    public void setResume(String resume) {
        this.resume = resume;
    }

    public  void submit(ActionEvent ae) {
    if (firstName.equals("joe") && lastName.equals("bush")){
        String str="Joe Bush is already existed";
        FacesMessage facesMessage = new FacesMessage(str);
        FacesContext facesContext = FacesContext.getCurrentInstance();
        String clientID = null; // this is a global message
        facesContext.addMessage(clientID, facesMessage);
    }
    }

    @Override
    public String toString() {
        return "jobApplicant " + super.toString();
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getCountry() {
        return country;
    }

    public void setCountry(String country) {
        this.country = country;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public Integer getSalary() {
        return salary;
    }

    public void setSalary(Integer salary) {
        this.salary = salary;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }
    @PostConstruct
    public void clear() {
        setFirstName("");
        setLastName("");
        setCountry("");
        setSalary(0);
        setEmail("");
        setTitle(null);
    }

} 
```

## 实体

```
package org.icefaces.training.applicant.model;

import java.io.Serializable;
import java.lang.Number;
import java.lang.String;
import javax.persistence.*;
import static javax.persistence.AccessType.FIELD;

/**
 * Entity implementation class for Entity: EmployeesEntity
 *
 */
@Entity

@Table(schema = "TUHRA", name = "EMPLOYEES")

public class EmployeesEntity implements Serializable {

    @Id
    private Number Employee_ID;
    private String FIRST_NAME;
    private String LAST_NAME;
    private static final long serialVersionUID = 1L;

    public EmployeesEntity() {
        super();
    }   
    public Number getEmployee_ID() {
        return this.Employee_ID;
    }

    public void setEmployee_ID(Number Employee_ID) {
        this.Employee_ID = Employee_ID;
    }   
    public String getFIRST_NAME() {
        return this.FIRST_NAME;
    }

    public void setFIRST_NAME(String FIRST_NAME) {
        this.FIRST_NAME = FIRST_NAME;
    }   
    public String getLAST_NAME() {
        return this.LAST_NAME;
    }

    public void setLAST_NAME(String LAST_NAME) {
        this.LAST_NAME = LAST_NAME;
    }

} 
```

## 持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="jobApplication">

    <provider>org.hibernate.ejb.HibernatePersistence</provider> 
    <!--   <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider> -->
     <jta-data-source>java:/OracleJINDI</jta-data-source>
    <class>org.icefaces.training.applicant.model.EmployeesEntity</class>
      <properties>
      <!-- <property name="hibernate.connection.driver_class" value="oracle.jdbc.driver" />
      <property name="hibernate.connection.url" value="jdbc:oracle:thin:@oracleapps:1521:PROD" />
      <property name="hibernate.connection.username" value="tuhra" />
      <property name="hibernate.connection.password" value="tuhra" /> -->

      </properties>

    </persistence-unit>
</persistence> 
```

## xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:icecore="http://www.icefaces.org/icefaces/core"   xmlns:ace="http://www.icefaces.org/icefaces/components"    xmlns:ice="http://www.icesoft.com/icefaces/component">

<h:head>

    </h:head>
    <h:body >
    <ui:composition template="/WEB-INF/templates/template.xhtml" >
    <ui:param name="title" value="Applicant System" />
    <ui:define name="header">
    <h:graphicImage library="images" name="icefaces.png" />
    <h:outputStylesheet library="css" name="jobApplication.css" /> 
    </ui:define>
    <ui:define name="menu">
    <h:button outcome="applicants" value="Listing Page" />
    </ui:define>
    <ui:define name="content">

    <h:messages globalOnly="true" />
    <h:form>
    <h:panelGrid columns="3">
    <h:outputLabel for="title" value="Title: " />
    <h:selectOneRadio id="title" value="#{jobApplicant.title}"  required="true">
     <f:selectItem itemLabel="Dr." itemValue="1"/>
      <f:selectItem itemLabel="Ms." itemValue="2"/>
       <f:selectItem itemLabel="Mrs." itemValue="3"/>
        <f:selectItem itemLabel="Miss." itemValue="4"/>
         <f:selectItem itemLabel="Mr." itemValue="5"/>
     </h:selectOneRadio>
     <h:message for="title" />
        <h:outputLabel for="firstName" value="First Name"></h:outputLabel>
        <h:inputText id="firstName" value="#{jobApplicant.firstName}" required="true" 
        converter="wordCapitalization"/>
        <h:message for="firstName" />
        <h:outputLabel for="lastName" value="Last Name"></h:outputLabel>
        <h:inputText id="lastName" value="#{jobApplicant.lastName}" required="true"
        converter="wordCapitalization" />
        <h:message for="lastName" />
        <h:outputLabel for="country" value="Country" />
        <h:selectOneMenu id="country" value="#{jobApplicant.country}" required="true">
         <f:selectItem itemLabel="-Select-" noSelectionOption="true"/>
         <f:selectItems value="#{countryList.countries}"/>
        </h:selectOneMenu> 
        <h:message for="country" />
        <h:outputLabel for="salary" value="Salary: " />
        <h:inputText id="salary" value="#{jobApplicant.salary}" required="true">
    <f:validateLongRange minimum="1" maximum="1000000"/> 
        <f:convertNumber type="currency"   />
        </h:inputText>
        <h:message for="salary" />
        <h:outputLabel for="email" value="Email: " />
        <h:inputText id="email" value="#{jobApplicant.email}"  validator="emailValidator" required="true"/>
        <h:message for="email"/>
        <h:outputLabel for="lastname1" value="Last Name: " />
        <h:outputText value="#{jobApplicant.value}" />
        <h:message for="lastname1"/>

        <h:outputLabel for="subject" value="Subject: " />
                    <ice:inputText id="subject" value="#{jobApplicant.subject}"></ice:inputText>
                    <h:message for="subject"/>
        <h:outputLabel for="body" value="Body: " />
                    <ice:inputRichText id="resume" saveOnSubmit="true" toolbar="Default" width="500" height="200" value="#{jobApplicant.resume}"></ice:inputRichText>
                    <h:message for="body"/>
                    <h:commandButton value="Submit: Applicant" action="#{applicationController.addApplicant}" />

         <h:commandButton id="clearButton" value="Clear" >
         <f:ajax event="click" render="@form" listener="#{applicationController.clearForm}" immediate="true"/>
         </h:commandButton>
         <h:commandButton id="cancelButton" action="cancelJobApplication" immediate="true" value="Cancel" />
      </h:panelGrid>
    </h:form>
    </ui:define>
    <ui:define name="footer">
    <br />
    - Server - <br />
    Title: <h:outputText value="#{jobApplicant.title}" /> <br />
    First Name: <h:outputText value="#{jobApplicant.firstName}" /> <br />
    Last Name: <h:outputText value="#{jobApplicant.lastName}" /> <br />
    Country: <h:outputText value="#{jobApplicant.country}" /><br />
    Salary: <h:outputLabel value="#{jobApplicant.salary}" /><br />
    Email: <h:outputLabel value="#{jobApplicant.email}" /><br />
    Applicants: <h:outputLabel value="#{applicants.applicantsList}" /><br />
    </ui:define>
    </ui:composition>
</h:body>
</html> 
```

* * *

感谢您的回复，但是当我浏览以下书籍时，我认为是正确的。

```
 @PersistenceUnit(unitName="jobApplication")
private EntityManagerFactory emf;
public String getValue() throws NotSupportedException, SystemException {
EntityManager em = emf.createEntityManager();
 EmployeesEntity emp = em.find(EmployeesEntity.class, 207);
        return emp.getLAST_NAME();
} 
```

但我仍然收到错误，这可能是由于从 JBOSS 7.1 运行时库中使用的 JPA2.0 [休眠]。以下是我得到的错误，我错过了什么

```
13:34:08,316 SEVERE [javax.enterprise.resource.webcontainer.jsf.application] (http--127.0.0.1-8080-1) Error Rendering View[/job-applicant.xhtml]: java.lang.IllegalStateException: JBAS011048: Failed to construct component instance
    at org.jboss.as.ee.component.BasicComponent.constructComponentInstance(BasicComponent.java:163) [jboss-as-ee-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.as.ee.component.BasicComponent.createInstance(BasicComponent.java:95) [jboss-as-ee-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.as.web.deployment.component.WebComponentInstantiator$2.<init>(WebComponentInstantiator.java:96) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.as.web.deployment.component.WebComponentInstantiator.initializeInstance(WebComponentInstantiator.java:94) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.as.web.deployment.WebInjectionContainer.newInstance(WebInjectionContainer.java:86) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.as.web.deployment.jsf.JsfInjectionProvider.invokePostConstruct(JsfInjectionProvider.java:69) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
    at com.sun.faces.mgbean.BeanBuilder.invokePostConstruct(BeanBuilder.java:223) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:105) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:72) [jbossweb-7.0.10.Final.jar:]
    at org.apache.el.parser.AstValue.getValue(AstValue.java:147) [jbossweb-7.0.10.Final.jar:]
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189) [jbossweb-7.0.10.Final.jar:]
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIOutput.getValue(UIOutput.java:169) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at com.sun.faces.renderkit.html_basic.MenuRenderer.getCurrentSelectedValues(MenuRenderer.java:648) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.renderkit.html_basic.SelectManyCheckboxListRenderer.encodeEnd(SelectManyCheckboxListRenderer.java:122) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at org.icefaces.impl.renderkit.RendererWrapper.encodeChildren(RendererWrapper.java:49) [icefaces.jar:]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.10.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:154) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.10.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.10.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.10.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.10.Final.jar:]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.6.0_25]
Caused by: javax.persistence.PersistenceException: Hibernate cannot unwrap interface javax.persistence.EntityManagerFactory
    at org.hibernate.ejb.AbstractEntityManagerImpl.unwrap(AbstractEntityManagerImpl.java:1173) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.jboss.as.jpa.container.AbstractEntityManager.unwrap(AbstractEntityManager.java:68) [jboss-as-jpa-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.as.jpa.injectors.PersistenceContextInjectionSource$PersistenceContextJndiInjectable.getReference(PersistenceContextInjectionSource.java:188) [jboss-as-jpa-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.as.ee.component.ManagedReferenceFieldInjectionInterceptorFactory$ManagedReferenceFieldInjectionInterceptor.processInvocation(ManagedReferenceFieldInjectionInterceptorFactory.java:104) [jboss-as-ee-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ManagedReferenceInterceptorFactory$ManagedReferenceInterceptor.processInvocation(ManagedReferenceInterceptorFactory.java:106) [jboss-as-ee-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.BasicComponent.constructComponentInstance(BasicComponent.java:161) [jboss-as-ee-7.1.0.Final.jar:7.1.0.Final]
    ... 54 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T16:48:43.323

代替

```
@PersistenceUnit(unitName="jobApplication")
private EntityManagerFactory emf;

public String getValue() throws NotSupportedException, SystemException {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("jobApplication");
        EntityManager em = emf.createEntityManager();
        EmployeesEntity emp = em.find(EmployeesEntity.class, 207);

        return emp.getLAST_NAME();
} 
```

你能试试：

```
@PersistenceContext
private EntityManager em;

public String getValue() throws NotSupportedException, SystemException {
        EmployeesEntity emp = em.find(EmployeesEntity.class, 207);

        return emp.getLAST_NAME();
} 
```

我不知道这是否有帮助，但这样代码更干净:)

# python - eval（函数）混淆

> ID：10769554
> 
> 赞同：0
> 
> 时间：2012-05-26T20:31:42.103
> 
> 标签：python

这是我的代码：

```
import random
a=random.randrange(100,400)
b=0
c=100
d=200
e=300
f=400
g=500
points =("b","c","d","e","f","g")
randomadd=random.randrange(1,500)
linepoints2=(b,305),(c,a),(d,305),(e,305),(f,a),(g,305),(g,300),(f,a+5),(e,300),(d,300),(c,a+5),(b,300)
thingy=points[random.randrange(1,len(points))]
eval(thingy) +=100 
```

我想 eval() 东西，因为我认为它会返回一个字符串，但显然你不能 eval() 一个函数调用，我不知道如何解决这个问题请帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:35:01.317

`thingy`不是一个函数，是一个字符串，所以你*不能*像函数一样评估它。如果它*是*一个函数，你会像这样评估它：

```
eval("thingy()") 
```

你想做什么？代码令人困惑，也许您正在尝试做其他事情，但您做事的方式是错误的。

**编辑 ：**

现在很清楚您打算做什么，我可以建议您使用字典，它将作为“变量”工作（无需*评估*任何内容，这不是解决问题的正确方法）：

```
d = {}
d[thingy] = 100
d[thingy] += 200
d[thingy]
> 300 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T20:38:44.957

呃，你想在这里做什么？

```
# bad
eval(thingy) +=100 
```

这转化为：

```
# bad
eval(thingy) = eval(thingy) + 100 
```

而且您不能分配给函数调用（我认为*这*是您遇到的错误）。

您可以执行以下操作：

```
# good
result = eval(thingy) + 100 
```

这似乎工作得很好（结果= 400）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T20:51:03.240

正如您的评论之一建议您要编辑原始变量，所以试试这个而不是`eval()`：

```
vars()[thingy]+=100 
```

或者按照[ZyX 的](https://stackoverflow.com/users/273566/zyx)建议使用`locals()`：

```
locals()[thingy]+=100 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T20:44:56.440

更好的是 - 完全避免 eval() 。尝试

```
from random import randrange, choice

points = (
    randrange(100,400),
    0,
    100,
    200,
    300,
    400,
    500
)

result = choice(points) + 100 
```

# python - 匹配重叠 - 只有 3 个字符，但不是 4 - 正则表达式

> ID：10769560
> 
> 赞同：0
> 
> 时间：2012-05-26T20:32:16.753
> 
> 标签：python, regex

我想写一个正则表达式，它会给我正好在 3 位数字之间的所有字符。例如：
`111a333b444`将返回`a`和`b`。但是，`1111a333b444`只会返回，`b`因为 . 左侧有 3 位以上的数字`a`。因为这里存在重叠问题，所以我使用了前瞻正则表达式，例如：
`matches = re.finditer(r'(?=([\d]{3}(.){1}[\d]{3}))',str)` 但在上面的第二个示例中，它也匹配`111a333`.

有人对匹配的正则表达式有想法吗？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T20:45:32.950

试试这个

```
(?<=(?<!\d)\d{3})[^\d]+(?=\d{3}(?!\d)) 
```

[在 Regexr 上](http://regexr.com?312ta)查看

# c++ - C ++中的列表析构函数

> ID：10769563
> 
> 赞同：3
> 
> 时间：2012-05-26T20:32:27.893
> 
> 标签：c++, linked-list, destructor

我刚刚实现了链接列表。它工作得非常好，但即使很难，我也看到了我无法在 Node 上创建工作析构函数的符号，这就是为什么它没有在代码中实现。

1.  我需要在节点上实现工作析构函数
2.  List 的析构函数，但这个很简单，我将只使用 Node 类的析构函数（但我需要这个）。
3.  使 List 对 Node 友好，这样我就不必使用 getNext()，但我想我可以自己处理它（不知道如何，但我会找出来的）。

请看一下代码，它非常好，如果你复制它就可以了。

```
#include <cstdio>
#include <cmath>
#include <iostream>
#include <stdio.h>
#include <string.h>
using namespace std;

class Node {
public:
    Node(Node* next, int wrt) {
        this->next = next;
        this->wrt = wrt;
    }

    Node(const Node& obiekt) {
        this->wrt = obiekt.wrt;
        this->next = obiekt.next;
    }
    ~Node() {}

    void show() {
        cout << this->wrt << endl;
    }

    int getWrt(){
        return this->wrt;
    }

    Node* getNext(){
        return this->next;
    }

    void setNext(Node* node){
        this->next = node;
    }

 private:
    Node* next;
    int wrt;
};

class List{
public:
    List(int wrt){
        this->root = new Node(NULL, wrt);
    }

    List(const List& obiekt){
        memcpy(&this->root,&obiekt.root,sizeof(int));
        Node* el = obiekt.root->getNext();
        Node* curr = this->root;
        Node* next;
        while(el != NULL){
            memcpy(&next,&el,sizeof(int));
            curr->setNext(next);
            curr = next;
            next = curr->getNext();
            el = el->getNext();
    /*      curr->show();
            next->show();
            el->show(); */
        }
    }

    void add(int wrt){
        Node* node = new Node(NULL, wrt);
        Node* el = this->root;
        while(el->getNext() != NULL){
            //el->show();
            el = el->getNext();
        }
        el->setNext(node);
    }

    void remove(int index){
        Node* el = this->root;
        if(index == 0){
             //deleting old one
             this->root = this->root->getNext();
        }
        else{
            int i  = 0;
            while(el != NULL && i < index - 1){
            //  el->show();
                el = el->getNext();
                i++;
            }
            if(el!=NULL){
                Node* toRem = el->getNext();
                Node* newNext = toRem->getNext();
                el->setNext(newNext);
                //deleteing old one
            }
        }
    }

    void show(){
        Node* el = this->root;
        while(el != NULL){
            el->show();
            el = el->getNext();
        }
    }

    ~List(){}

private:
    Node* root;
};

int main(){
    List* l = new List(1); //first list
    l->add(2);
    l->add(3);
    l->show();
    cout << endl;

    List* lala = new List(*l); //lala is second list created by copy cosntructor
    lala->show();
    cout << endl;

    lala->add(4);
    lala->remove(0);
    lala->show();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T21:53:56.237

我建议你从实现析构函数开始`List`。由于您通过 using 动态分配内存`new`，因此您应该通过 using 释放它`delete`。（如果您使用`new[]`，它将是`delete[]`）：

```
~List()
{
    Node* currentNode = this->root; // initialize current node to root
    while (currentNode)
    {
        Node* nextNode = currentNode->getNext();    // get next node
        delete currentNode;                         // delete current
        currentNode = nextNode;                     // set current to "old" next
    }
} 
```

一旦你有适当的析构函数，你应该尝试你的复制构造函数是否正确：

```
List* lala = new List(*l);
delete l; // delete list that was used to create copy, shouldn't affect copy 
```

你会发现你的复制构造函数是错误的，也会导致你的应用程序崩溃。为什么？因为**复制构造函数**的目的是创建一个**新**对象作为现有对象的副本。您的复制构造函数只是复制假设`sizeof(Node*)`等于的指针`sizeof(int)`。它应该如下所示：

```
List(const List& list)
{
    // if empty list is being copied:
    if (!list.root)
    {
        this->root = NULL;
        return;
    }

    // create new root:
    this->root = new Node(NULL, list.root->getWrt());

    Node* list_currentNode = list.root;
    Node* this_currentNode = this->root;
    while (list_currentNode->getNext())
    {
        // create new successor:
        Node* newNode = new Node(NULL, list_currentNode->getNext()->getWrt());
        this_currentNode->setNext(newNode);
        this_currentNode = this_currentNode->getNext();
        list_currentNode = list_currentNode->getNext();
    }
} 
```

您的函数`remove`也是错误的，因为它“删除”了对某个节点的引用，但从不释放该节点所在的内存。`delete`应该调用以释放此内存。

***“我需要在节点上实现工作析构函数”*** - 不，你不需要。Node 本身不分配任何内存，因此它不应该释放任何内存。Node 不应该负责销毁`Node* next`或清理存储它的内存。不要实现 Node 的析构函数或复制构造函数。您还想阅读以下内容：[什么是三法则？](https://stackoverflow.com/q/4172722/1168156)

***“使列表对 Node 友好，这样我就不必使用 getNext()”*** - 你想在 Node 类中说，那`class List`就是它`friend`：

```
class Node
{
    friend class List; // <-- that's it 
```

请注意，您包含代码的这 5 个标头中只需要一个：`<iostream>`. 另请注意，`using namespace std;`在文件开头写入被认为是**不好的做法**，因为它可能会导致您的某些类型的名称变得模棱两可。在小范围内明智地使用它或改用`std::`前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:01:31.973

`delete`当与先前分配的指向链表的指针一起使用时，或者当链表变量超出范围时（例如，从函数返回时破坏局部变量），将调用链表析构函数。

链表的析构函数应该负责释放您之前为节点保留的内存（即使用`add`操作）。因此，基本上，您需要遍历节点列表`delete`并对每个节点应用操作。有一个小技巧：当你要删除一个节点时，你必须小心不要丢失指向下一个元素的指针（当一个节点被删除时，你不能确定该`next`成员仍然有效）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-15T17:43:26.980

如果你想为你的节点创建一个析构函数，它实际上应该很简单。

这里是：

```
class Node {
    private:
        int wrt;
        Node* next;
    public:
        Node(Node* next, int wrt) {
            this->next = next;
            this->wrt = wrt;
        }

        // Your desired destructor using recursion
        ~Node() {
            if ( next != NULL )
                delete next;
        }
}; 
```

就这么简单:)

基本上，在节点被删除之前，如果 next 不为空，我们删除 next，这将再次调用 next 的析构函数，如果 next->next 不为空，则再次调用析构函数。

然后最后所有节点都被删除。

递归处理了整个事情:)

# crash - Liferay 在数据库关闭时停止导致崩溃

> ID：10769569
> 
> 赞同：0
> 
> 时间：2012-05-26T20:33:25.530
> 
> 标签：crash, db2, liferay, restart

我正在停止 Liferay 门户，但几秒钟后，我停止了数据库（db2 quiesce，这意味着连接已关闭），显然 Liferay 没有正确停止它的执行。

之后，我重新启动了数据库和 liferay，但门户现在无法正常工作。它在浏览器中显示此消息：

```
HTTP Status 500 - 
type Exception report 
message
description The server encountered an internal error () that prevented it from fulfilling this request.
exception
  javax.servlet.ServletException: Servlet execution threw an exception
    com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
...
root cause
  java.lang.NoSuchMethodError: com.liferay.portal.util.PortalUtil.getCDNHostHttp()Ljava/lang/String;
    com.liferay.portal.events.ServicePreActionExt.servicePre(ServicePreActionExt.java:937) 
```

查看日志后，我发现以下消息（已编辑）：

```
SEVERE: Error waiting for multi-thread deployment of directories to completehostConfig.deployWar=Deploying web application archive {0}
  java.lang.InterruptedException
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1000)

WARN  [DefaultConnectionTester:203] SQL State '08001' of Exception which occurred during a Connection test (fallback DatabaseMetaData test) implies that the database is invalid, and the pool should refill itself with fresh Connections.
 com.ibm.db2.jcc.am.DisconnectNonTransientConnectionException: [jcc][t4][2030][11211][3.63.75] A communication error occurred during operations on the connection's underlying socket, socket input stream, or socket output stream.  Error location: Reply.fill() - insufficient data (-1).  Message: Insufficient data. ERRORCODE=-4499, SQLSTATE=08001
    at com.ibm.db2.jcc.am.fd.a(fd.java:321)
WARN  [DefaultConnectionTester:136] SQL State '08001' of Exception tested by statusOnException() implies that the database is invalid, and the pool should refill itself with fresh Connections.
WARN  [C3P0PooledConnectionPool:708] A ConnectionTest has failed, reporting that all previously acquired Connections are likely invalid. The pool will be reset.
WARN  [NewPooledConnection:486] [c3p0] A PooledConnection that has already signalled a Connection error is still in use!
WARN  [NewPooledConnection:487] [c3p0] Another error has occurred [ com.ibm.db2.jcc.am.SqlNonTransientConnectionException: [jcc][t4][10335][10366][3.63.75] Invalid operation: Connection is closed. ERRORCODE=-4470, SQLSTATE=08003 ] which will not be reported to listeners!
 com.ibm.db2.jcc.am.SqlNonTransientConnectionException: [jcc][t4][10335][10366][3.63.75] Invalid operation: Connection is closed. ERRORCODE=-4470, SQLSTATE=08003
WARN  [BasicResourcePool:1841] com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@4fad5112 -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (3). Last acquisition attempt exception:
 com.ibm.db2.jcc.am.SqlNonTransientConnectionException: DB2 SQL Error: SQLCODE=-20157, SQLSTATE=08004, SQLERRMC=FUT5MAN;QUIESCE DATABASE;;, DRIVER=3.63.75
ERROR [PortalJobStore:109] MisfireHandler: Error handling misfires: Unexpected runtime exception: null
 org.quartz.JobPersistenceException: Unexpected runtime exception: null [See nested exception: java.lang.reflect.UndeclaredThrowableException]
Caused by: java.lang.reflect.UndeclaredThrowableException
    at $Proxy279.prepareStatement(Unknown Source)
    at org.quartz.impl.jdbcjobstore.StdJDBCDelegate.countMisfiredTriggersInState(StdJDBCDelegate.java:413)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.GeneratedMethodAccessor65.invoke(Unknown Source)
Caused by: java.sql.SQLException: Connections could not be acquired from the underlying database!
    at com.mchange.v2.sql.SqlUtils.toSQLException(SqlUtils.java:106)
Caused by: com.mchange.v2.resourcepool.CannotAcquireResourceException: A ResourcePool could not acquire a resource from its primary factory or source.
    at com.mchange.v2.resourcepool.BasicResourcePool.awaitAvailable(BasicResourcePool.java:1319) 
```

现在，我发现启动当前的 Liferay 安装几乎是不可能的。但是，我有数据库（我做了完整备份）和 lucene 的数据目录。如何用这两件事重新创建 Liferay 安装？我想在新安装中恢复其中的一些数据，但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T21:43:26.937

这不是最好的解决方案，但我用一个新数据库安装了 Liferay。配置完成后，我更改数据库配置以使用另一个。可能是 ROOT 部署的问题，但这很奇怪。我可以从 Lucene 和数据库中恢复所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T00:09:50.357

数据库仍然处于静默状态，Liferay 用户没有 QUIESCE_CONNECT 权限。取消静默数据库并重新启动 Liferay。

使用 DB2 实例所有者（如果您在 Windows 上，任何管理员）：

```
db2 connect to DBNAME
db2 unquiesce database 
db2 connect reset 
```

问候。

# c# - 一次停止多个任务

> ID：10769578
> 
> 赞同：2
> 
> 时间：2012-05-26T20:35:15.863
> 
> 标签：c#, multithreading

我正在使用并行 foreach 循环启动多个任务。

现在我想单击停止按钮来停止所有任务。我怎样才能做到这一点？

这是我的代码：

```
tasks2 = new List<Task>();            

Parallel.ForEach<RssToProcess>(RssFeeds, rssFeed =>
    tasks2.Add(Task.Factory.StartNew(() =>
    {
        string urlss = rssFeed.RssUrl;
        nourl += urlss + System.Environment.NewLine;

        RssReader rs = new RssReader();
        rs.FeedsourceLoaded += new EventHandler(rs_FeedsourceLoaded);
        rs.ItemAdded += new EventHandler(rs_ItemAdded);
        rs.AllItemAdded += new EventHandler(rs_AllItemAdded);
        rs.RssReaderrssitemsCountgeta += new EventHandler(rs_RssReaderrssitemsCountgeta);
        rs.RdfMode = true;

        RssFeed f = rs.Retrieve(rssFeed.RssUrl);
     }))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T20:42:36.023

您可能应该传递一个 CancellationToken：http: [//msdn.microsoft.com/en-us/library/dd537607.aspx](http://msdn.microsoft.com/en-us/library/dd537607.aspx)

创建一个 CancellationToken：

```
var tokenSource = new CancellationTokenSource();
var token = tokenSource.Token; 
```

并将其传递给您的任务：

```
Task.Factory.StartNew(() =>
        {
           ... Do Work ...
        }, token); 
```

当您想取消时，请致电

```
tokenSource.Cancel(); 
```

但是，请注意，任务取消是合作的。在您的任务中，您将需要使用

```
token.ThrowIfCancellationRequested(); // To Abort immediately.

 ... OR ...

if (token.IsCancellationRequested)
{
    // Exit your task manually.
} 
```

# php - Javascript 未在 php 函数中运行

> ID：10769579
> 
> 赞同：-4
> 
> 时间：2012-05-26T20:35:43.280
> 
> 标签：php, javascript, function, alert

我的编程逻辑在哪里出错了？

我有 2 个 php 文件。文件1包括文件2。文件1从文件2调用一个php函数。在php函数里面有一堆html。html 完美运行。在函数结束时，我有这个 javascript....

```
<script type="text/javascript">
alert('hello');
</script> 
```

这个 javascript 没有提醒“你好”。我究竟做错了什么？

先感谢您。

**编辑：**新问题，因为我歪曲了最后一个问题。

理论上，下面的代码会正常运行吗？（是/否）

```
<?php function AlertHelp(){ 
    ?><script>
        alert('help');
    </script><?
AlertHelp();
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T20:45:33.073

在您提供的有限信息的情况下，在这里进行疯狂的猜测。

我的假设是您不是通过 PHP 的 、 或 函数“包含”文件`include`，而是`require`实际上使用 AJAX 加载页面内容。`include_once``require_once`

如果是这种情况，那么我还假设您正在使用`innerHTML`将内容放在页面上。

突然，解决方案很明显：`<script>`添加的标签`innerHTML`不会被解析并运行。你可能会做这样的事情：

```
// assume `result` is the variable containing the AJAX response and `elem` the element it goes in
elem.innerHTML = result; // this doesn't change
result.match(/<script[^>]*>([\s\S]*?)<\/script>/i,function(m) {eval(m[1]);}); 
```

但是请注意，`eval`如果可能的话，应该避免这种情况。考虑重新设计布局以使用回调。

# ios - 如何为 iPad 3 命名图形文件

> ID：10769586
> 
> 赞同：7
> 
> 时间：2012-05-26T20:37:06.050
> 
> 标签：ios, ipad

正如我在 iOS 中所理解的那样，我们可以将用于视网膜显示的文件命名为 name@2x.png。

如何为 iPad 3 命名文件

ipad.png - iPad，iPad 2

ipad@2x.png - iPad 3

它是否正确？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T20:53:20.190

对，那是正确的。

任何用于 Retina 显示的图像都应将“ `@2x`”作为文件名的一部分。

如果您的 iPhone 和 iPad 之间的图像不同（如 iBrad 所述），您可以在名称中添加“~ipad”或“~iphone”区分符。[查看此 Apple 文档的“更新您的图像资源文件”部分](http://developer.apple.com/library/ios/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/SupportingHiResScreens/SupportingHiResScreens.html#//apple_ref/doc/uid/TP40010156-CH15-SW8)。

Apple 确实有一些[“自定义图标和图像创建指南”](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)，您可以查看更多详细信息，包括名为[“为 Retina 显示器创建出色艺术品的提示”部分。](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW16)

另外，[这里有一个相关的问题](https://stackoverflow.com/questions/5331889/iphone-adapt-images-to-retina-display)，它讨论了如何调整您的图像以适应视网膜显示。

# java - NullPointerException 试图读取 Parcel String[]

> ID：10769588
> 
> 赞同：7
> 
> 时间：2012-05-26T20:37:17.487
> 
> 标签：java, android, parcelable

[当我从Parcel](http://developer.android.com/reference/android/os/Parcelable.html)`String[]`创建对象时尝试回读 a 时，我收到了 NullPointerException 。这是我的代码：

```
@Override
public void writeToParcel(Parcel out, int flags) {
    out.writeInt(floors);
    out.writeStringArray(indoorMaps);

}

public static final Parcelable.Creator<Building> CREATOR
    = new Parcelable.Creator<Building>() {
    public Building createFromParcel(Parcel in) {
        return new Building(in);
    }

public Building[] newArray(int size) {
    return new Building[size];
}
};

private Building(Parcel in) {   
    floors = in.readInt();
    in.readStringArray(indoorMaps);
} 
```

所以indoorMaps 是我的类的一个属性，它是一个`String[]`，但我得到了NullPointerException。我已经检查了[开发人员的文档](http://developer.android.com/reference/android/os/Parcel.html#readStringArray%28java.lang.String%5B%5D%29)，但那里什么都没有。我按照[本教程](http://prasanta-paul.blogspot.com/2010/06/android-parcelable-example.html)进行操作，他们正在`readStringArray`那里使用。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-26T20:39:51.373

您在调用时给出`Parcel`了一个数组。要使其正常工作，您必须初始化. 你可能想要。`null``readStringArray``indoorMaps``createStringArray`

# jmeter - JMeter：如何在表格中查看结果中显示正则表达式提取器的结果？

> ID：10769590
> 
> 赞同：7
> 
> 时间：2012-05-26T20:37:32.517
> 
> 标签：jmeter

**我想在View Results in Table**侦听器中的示例信息旁边显示提取的值（或指定的**Default Value ），这可能吗？**

 *** * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-30T07:33:31.783

使用[调试](http://jmeter.apache.org/usermanual/component_reference.html#Debug_Sampler)组件。

[此外，您可以使用ViewResultsTree](http://jmeter.apache.org/usermanual/component_reference.html#View_Results_Tree)在响应数据上测试您的正则表达式。只需`Regexp tester`在 ViewResultsTree 侦听器左侧面板底部的下拉框中选择。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2017-01-12T15:22:09.247

**仅** 使用[调试采样器](http://jmeter.apache.org/usermanual/component_reference.html#Debug_Sampler)。将其放在提取的数据下方，并将提取的值放在 Sampler's **Name**中。这将在**View Results Tree**中显示它。**

# jquery - 为什么这个 jquery ajax 不起作用？

> ID：10769591
> 
> 赞同：0
> 
> 时间：2012-05-26T20:37:36.330
> 
> 标签：jquery, ajax

如果我运行它，我会收到“正在发送”的消息，但不会显示“已收到”的消息。为什么？错误消息是失败和错误块中的无传输。

html:

```
<ul>
    <li><a href="http://www.hotmail.com">hotmail.com</a></li>
    <li><a href="http://www.google.com">google.com</a></li>
</ul> 
```

js：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("a").each(function (index) {
            var sUrl = 'http://tinyurl.com/api-create.php?url=' + $(this).attr('href')
            alert('sending: ' + sUrl);
            $.ajax({
                url: sUrl,
                crossDomain: true
            }).fail(function (data) {
                alert('failed: ' + data.statusText);
            }).error(function (data) {
                alert('error: ' + data.statusText);
            }).done(function (data) {
                alert('received: ' + sUrl);
            });
        });
    });
</script> 
```

编辑：接受的答案使用 $.getJSON 在内部调用 $.ajax。对于那些可能对低级 $.ajax 感兴趣的人，请看这里。

```
$('a').each(function (index) {
    var app = 'http://json-tinyurl.appspot.com/';
    var sUrl = app + '?url=' + $(this).attr('href') + '&callback=?';
    $.ajax({
        url: sUrl,
        dataType: 'json',
        success: function (data) {
            alert('ajax:' + data.tinyurl);
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert("jqXHR=" + jqXHR.responseText + "\ntextStatus=" + textStatus + "\nerrorThrown=" + errorThrown);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:51:06.143

您遇到问题是因为您正在进行跨域调用而不是使用 jsonp。有关您的 tinyurl 生成问题的解决方案，请参见此处的答案：

[通过 Jquery Ajax 调用创建 TinyURL](https://stackoverflow.com/questions/1414145/create-tinyurl-via-jquery-ajax-call)

使用它作为参考，这是您的固定代码：

```
$(document).ready(function() {
    $("a").each(function(index) {
        var sUrl = $(this).attr('href');
        $.getJSON("http://json-tinyurl.appspot.com/?&callback=?", {
            url: sUrl
        }, function(data) {
            alert(data.tinyurl);
        });
    });
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T20:52:43.643

crossDomain 参数并不像您认为的那样做。来自 JQuery 文档：

> If you wish to force a crossDomain request (such as JSONP) on the same domain, set the value of crossDomain to true. This allows, for example, server-side redirection to another domain.

Note that if you're requesting a URL from a different domain over AJAX, JQuery will set this to true by default - so it is unnecessary for you to set it yourself.

The reason the code isn't working is you haven't set up cross domain AJAX properly. Due to potential security vulnerabilities, browsers follow the [Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy) for AJAX requests. So the fact that you're trying to access the tinyURL API with an AJAX request will be blocked automatically by the browser. You will need to use a mechanism such as JSONP to get this to work.

[Try this blog post](http://james.padolsey.com/javascript/create-a-tinyurl-with-jsonp/), which has an example of using JQuery/AJAX/JSONP to get shortened URLs from the TinyURL API. It also has some background links about JSONP at the end. Note that it's a bit old, so you may need to update the syntax to the current JQuery/TinyURL API. The basic ideas behind working with JSONP are unchanged.

# matlab - 如何在同一个图中显示多个图像 - Matlab

> ID：10769594
> 
> 赞同：9
> 
> 时间：2012-05-26T20:38:06.930
> 
> 标签：matlab, image-processing

**编辑：**

Hii，不好意思前面没有提到，我需要做的是在同一个图中同时显示 6 个图像。**此外，在每个图像（帧）上，我需要绘制一些点（我的代码跟踪脸部的移动 - 眼睛、鼻子、嘴唇。）** 我有 246 张图像（帧）

这是我使用的主要功能：

```
 // The points/ coordinates of the lips, eyes and nose of the image "i".
Points = createPointsStructure (landmarks , i , NumOfLandarkPerFrame);
   // Draw landmarks and splines on the frame i (and draw/show the frame)
DrawAllPointsOnFace (pointArr , Points , img , 1  , position, i); 
```

有什么想法我该怎么做？

* * *

我需要编写一个代码，在同一个图中（同时）显示 6 个图像。并让用户选择其中一个图像进行编辑（通过单击它）。

任何帮助我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-26T21:52:06.627

这是一个简单的示例，可以帮助您入门：

```
function ImagesExample()
    %# read images in a cell array
    imgs = cell(6,1);
    for i=1:6
        imgs{i} = imread( sprintf('AT3_1m4_%02d.tif',i) );
    end

    %# show them in subplots
    figure(1)
    for i=1:6
        subplot(2,3,i);
        h = imshow(imgs{i}, 'InitialMag',100, 'Border','tight');
        title(num2str(i))
        set(h, 'ButtonDownFcn',{@callback,i})
    end

    %# mouse-click callback function
    function callback(o,e,idx)
        %# show selected image in a new figure
        figure(2), imshow(imgs{idx})
        title(num2str(idx))
    end
end 
```

![在此处输入图像描述](../Images/25ed86e5ff32c4f618369bb25053ac6d.png)

另一个需要研究的函数是 IPT 工具箱中的[MONTAGE](http://www.mathworks.com/help/toolbox/images/ref/montage.html)函数：

```
%# given the above cell array `imgs`
montage( cat(4,imgs{:}) ) 
```

# php - 导入多个表需要自动化

> ID：10769601
> 
> 赞同：1
> 
> 时间：2012-05-26T20:40:26.643
> 
> 标签：php, mysql

我正在将旧程序中的许多表导入 php/mysql 应用程序 - 文件很大，需要进行许多更改才能进行规范化。我设置了程序来做所有事情，但想让它更加自动化。

尝试导入某些表在过程完成之前会出现超时错误。目前有 12 个表需要导入和转换。他们中的许多人拥有大约 12000 条或更多的记录。我已将程序更改为一次仅处理 2000 条记录，记住它停止的位置并让我导入下一个 2000 条。但这不是最好的解决方案，我可能不得不对整个数据集进行 20 次以上的转换因为旧数据仍在更新中。就目前而言，我将不得不被链接到计算机几个小时，而它完成准备好在该过程完成时单击继续按钮。

将超时更改为更大的数字并没有我想要的那么有用。

感谢您的任何建议

# ios - 在 IOS 的 Twitter 上分享图片

> ID：10769604
> 
> 赞同：0
> 
> 时间：2012-05-26T20:41:07.770
> 
> 标签：ios, twitter

嗨，我想通过我的 APP 在 Twitter 上分享图片。我通过以下代码成功推文。如何用文本推文图像。

```
-(IBAction)updateTwitter{

    if(!_engine){  
        _engine = [[SA_OAuthTwitterEngine alloc] initOAuthWithDelegate:self];  
        _engine.consumerKey    = kOAuthConsumerKey;  
        _engine.consumerSecret = kOAuthConsumerSecret;  
    }  
    if(![_engine isAuthorized]){

        UIViewController *controller = [SA_OAuthTwitterController controllerToEnterCredentialsWithTwitterEngine:_engine delegate:self];  
        if (controller){  
            [self presentModalViewController: controller animated: YES]; 
        }  
    } 

    if([_engine isAuthorized]){
        [_engine sendUpdate:@"This is my first test"];  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T23:39:57.170

你考虑过使用 iOS 5 的[Twitter 框架](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TwitterFrameworkReference/_index.html)吗？特别是，查看[TWTweetComposeViewController](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40010943)，它可以让您轻松添加图像。

# iphone - 在 iOS 上，当 ViewController 的视图设置为我的 UIView 子类时，为什么不存在这样的属性？

> ID：10769605
> 
> 赞同：0
> 
> 时间：2012-05-26T20:41:33.493
> 
> 标签：iphone, objective-c, ios, uiview, uiviewcontroller

如果一个子类被定义为`MyView`那个 subclasses `UIView`，并且在 Interface Builder 中，视图被点击，并且 Custom Class 已经被设置为`MyView`。

但是在 ViewController 中`viewDidLoad`，

```
 self.view.foo = ... ; 
```

将创建一个编译错误，说`foo`不是`UIView`. 然后我打印出类`self.view`：

```
NSLog(@"Class of view is %@", NSStringFromClass([self.view class])); 
```

果然，它打印出来了`MyView`。此外，不仅第一行不会编译，Xcode 也不会“自动完成”单词“foo”。但很明显，该类打印出 no as `UIView`but is `MyView`，并且在我的类定义中`MyView`，我确实说过：

```
@property (nonatomic, strong) NSMutableArray *foo; 
```

在接口`.h`文件中，也在实现`.m`文件中：

```
@synthesize foo; 
```

并且`MyView.h`也是进口的`ViewController.h`。为什么会这样以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T20:51:12.633

您的 UIViewController 不知道它的视图是您的`MyView`子类的一个实例。

你需要投射它

```
MyView *myView = (MyView *)self.view;
myView.foo = @"Whatever"; 
```

如果你想简化这一点，你也可以继承 UIViewController 然后总是`self.myView`在你的 MyViewController 子类中引用而不是`self.view`：

```
@interface MyViewController : UIViewController

@property (nonatomic, strong) MyView *myView;

@end

@implementation MyViewController
@synthesize myView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
            self.myView = (MyView *)self.view;
    }
    return self;
}
@end 
```

# java - 每个线程的唯一编号不同

> ID：10769606
> 
> 赞同：0
> 
> 时间：2012-05-26T20:41:46.397
> 
> 标签：java, multithreading

我正在运行下面的代码 60 分钟，它所做的是每个线程将根据命令是否具有 Previous 使用不同的唯一 ID。如果是Previous，那么它将使用1到1000之间的现有ID，如果不是Previous，那么它将使用5000到10000之间的唯一ID。我编写了这段代码，如果命令有Previous，那么每个线程将使用唯一的ID 在 1 到 1000 之间，如果不是 Previous 则它将使用 5000 到 10000 之间的唯一 ID。

**所以问题陈述是这样的-如果命令有Previous，那么每个线程将使用1到1000之间的唯一ID 如果不是Previous，那么每个线程将使用5000到10000之间的唯一ID**

**我的问题是- 1）这是正确的方法吗？或者最好的方法是什么 2）其次，这真的很慢，有时会停下来，并且在这些数字之间不使用任何唯一 ID。如果 id 完成了，我也需要重用 id**

```
class IdPool {
    private final LinkedList<Integer> availableExistingIds = new LinkedList<Integer>();
    private final LinkedList<Integer> availableNewIds = new LinkedList<Integer>();

    public IdPool() {
        for (int i = 1; i <= 1000; i++) {
            availableExistingIds.add(i);
        }

        for (int k = 5000; k <=10000; k++) {
            availableNewIds.add(k);
        }
    }

    public synchronized Integer getNewId() {
        return availableNewIds.removeFirst();
    }

    public synchronized void releaseNewId(Integer id) {
        availableNewIds.add(id);
    }

    public synchronized Integer getExistingId() {
        return availableExistingIds.removeFirst();
    }

    public synchronized void releaseExistingId(Integer id) {
        availableExistingIds.add(id);
    }
}

class ThreadNewTask implements Runnable {
    private IdPool idPool;
    private Command command;

    public ThreadNewTask(IdPool idPool, Command cmd) {
        this.idPool = idPool;
        this.command = cmd;
    }

    public void run() {
        if(command.getDataCriteria().equals("Previous")) {
            Integer id = idPool.getExistingId();
            newMethod(id);
            idPool.releaseExistingId(id);
        } else {
            Integer newId = idPool.getNewId();
            newMethod(newId);
            idPool.releaseExistingId(newId);
        }

    }

    private void newMethod(Integer i) {
        System.out.println("Task ID: " +i);

    }
}

public class TestingPool {
    public static void main(String[] args) throws InterruptedException {
        int size = 10;
        int durationOfRun = 60;
        IdPool idPool = new IdPool();   
        // create thread pool with given size
        ExecutorService service = Executors.newFixedThreadPool(size); 

        // queue some tasks
        long startTime = System.currentTimeMillis();
        long endTime = startTime + (durationOfRun * 60 * 1000L);

        // Running it for 60 minutes
        while(System.currentTimeMillis() <= endTime) {
            Command nextCommand = getNextCommandToExecute();
            service.submit(new ThreadNewTask(idPool, nextCommand));
        }

        // wait for termination        
        service.shutdown();
        service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS); 
    }
} 
```

# javascript - 我可以得到喜欢我的提要的朋友列表吗

> ID：10769609
> 
> 赞同：0
> 
> 时间：2012-05-26T20:42:12.740
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-fql, fql.multiquery

我可以得到喜欢我的提要的朋友列表吗？我
想获得喜欢我的提要的朋友列表。所以我执行这个查询。
但我得到了空的结果。
我应该修改什么以获得喜欢我的提要的朋友列表。

```
queries: {
    likeFriend: 'select user_id from like where post_id in (select post_id from stream where source_id = me())',
    notLikeFriend: 'select uid, name, sex from user where uid in (select user_id from #likeFriend)'
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:41:52.330

你的应用有 read_stream 权限吗？确保您拥有此处所述的内容：[https ://developers.facebook.com/docs/reference/fql/stream/](https://developers.facebook.com/docs/reference/fql/stream/)

# php - 河豚地穴混乱

> ID：10769612
> 
> 赞同：0
> 
> 时间：2012-05-26T20:42:39.093
> 
> 标签：php

不知道为什么，但我想我完全不明白这是如何工作的......

我找到了一个示例脚本，其中包含：

```
echo crypt('abc123', '$2a$04$saltsaltsaltsaltsaltxx'); 
```

它声称给出输出：

```
$2a$04$saltsaltsaltsaltsaltxuK2.MS4sJd6ZjnuS0fp2eenjndo.g4hS 
```

但是当我这样做时，我得到了相同的代码：

```
 $2pGiQ0v1IyNY 
```

作为输出......到目前为止并没有真正向我解释任何事情，或者为什么我得到与我看到的示例不同的输出？

我正在尝试获取销售+哈希密码并将它们存储在每个用户的用户表中，但我没有遵循如何：

a）为每个用户生成一个随机盐

b）从中获取盐和哈希密码来存储它？

c）然后您如何检查它，例如登录页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T09:53:27.283

来自 PHP 文档：

> 使用盐的河豚散列如下：“$2a$”，两位数的成本参数，“$”，以及来自字母表“./0-9A-Za-z”的 22 位数字。在 salt 中使用超出此范围的字符将导致 crypt() 返回零长度字符串。两位数的成本参数是底层基于 Blowfish 的散列算法的迭代计数的以 2 为底的对数，并且必须在 04-31 范围内，超出此范围的值将导致 crypt() 失败。

您不需要从散列密码中分离盐。您存储整个字符串（“$2a$04$saltsaltsaltsaltxuK2.MS4sJd6ZjnuS0fp2eenjndo.g4hS”），当您想验证提供的密码是否与您的哈希匹配时，您可以

```
if (crypt($form_password, $stored_hash) == $stored_hash) {
    // password is correct
} 
```

# java - 如何将 ActionScript 3 客户端连接到 Java 服务器？

> ID：10769615
> 
> 赞同：4
> 
> 时间：2012-05-26T20:43:06.583
> 
> 标签：java, actionscript-3, flash, java-server

我正在考虑制作一款 2D 自上而下的 MMO 浏览器游戏。我希望它是一个 Flash 游戏，因为这给了它更大的目标受众，但我也希望有 Java 的速度会有所帮助的实时多人动作，所以我说 ActionScript 3 客户端是对的使用 Java 服务器可以解决问题吗？

我只是想知道a）上述是否正确且可行，b）如何实现这样的事情，或者将Java客户端连接到Java服务器没有什么不同？（我现在不熟悉 ActionScript 3）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T22:40:52.967

多种方式。[1) 您可以使用 Adob​​e 的BlazeDS](http://livedocs.adobe.com/blazeds/1/blazeds_devguide/)或 3rd Party [Granite](http://www.graniteds.org/confluence/pages/viewpage.action?pageId=229378)数据服务
直接调用 java 对象。BlazeDS 部署为服务器或 Tomcat servlet/Java EE。它的工作是在 AS3<->Java 对象之间编组您的数据对象并调用您的 java 类方法。

2) 您可以使用 Flex 的 HTTPService 对象调用任何后端 Web 服务或 Rest 接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T22:47:01.860

我会使用套接字。Flash 使您可以访问网络套接字，然后您可以通过这些套接字发送 json 或任何您喜欢的格式。

# php - 使用 Javascript 更改 OnClick

> ID：10769622
> 
> 赞同：0
> 
> 时间：2012-05-26T20:45:29.990
> 
> 标签：php, javascript, onclick

我希望能够在选择页面 Javascript 的其他部分时更改 OnClick 事件。以便 OnClick 与此相对应。

```
<a href="#" id="black" onClick="javascript:changetxt
  ('#333');">Black</a> 
```

可以变成：

```
<a href="#" id="black" onClick="javascript:changetxt
  ('#666');">Black</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T20:49:05.440

您可以`onclick`像任何其他属性一样进行更改。

```
// Works, but not recommended:
element.setAttribute("onclick","code to run");

// Better:
element.onclick = function() {code to run};

// There are options with event handlers too, but they're needlessly complicated 
```

请注意，您不需要`javascript:`在事件处理程序的开头。您没有收到错误的唯一原因是因为它被解析为名为 的标签`javascript`，这很好。

# javascript - 如何让 COLLADA 模型在 three.js 中自己投射阴影？

> ID：10769625
> 
> 赞同：3
> 
> 时间：2012-05-26T20:45:37.010
> 
> 标签：javascript, three.js, collada

我试过这个：

```
dae.castShadow = true;
dae.receiveShadow = true;
scene.add(dae);

//spotLight is defined already.
spotLight.castShadow = true;

renderer.shadowMapEnabled = true; 
```

但是模型仍然没有阴影？我做错什么了吗？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-05T21:26:47.333

three.js 发生了变化（参见[three.js 迁移 r51--r52](https://github.com/mrdoob/three.js/wiki/Migration#r51--r52)）：

> 将 SceneUtils.traverseHierarchy 替换为 object.traverse。

因此，现在设置层次结构中所有对象的正确方法`castShadow`是`receiveShadow`：

```
dae.traverse(function(child) {
    child.castShadow = true;
    child.receiveShadow = true;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:31:01.870

您需要为层次结构中的所有对象设置`castShadow`和`receiveShadow`to `true`。

```
THREE.SceneUtils.traverseHierarchy( dae, function ( child ) {

    child.castShadow = true;
    child.receiveShadow = true;

} ); 
```

# python - 初始化包含字符串和列表的python字典

> ID：10769630
> 
> 赞同：0
> 
> 时间：2012-05-26T20:46:20.540
> 
> 标签：python, list, dictionary

初始化（例如在循环之前）将在每个项目中包含字符串和列表的字典的最佳方法是什么？

例如：

```
dict = [("string1", [1,2]), ("string2", [5,6]),..] 
```

所以：

```
dict["string1"] 
```

返回：

```
[1,2] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:48:20.323

请不要调用变量 dict（或列表或集合等），因为它“掩盖”了现有功能并阻止您使用它们。

```
data = {
    "string1": [1,2],
    "string2": [5,6]
}

print data["string1"]    # => [1,2] 
```

如果你有点受虐狂，你也可以试试

```
data = dict([("string1",[1,2]), ("string2", [5,6])]) 
```

或（以 cval 为例）

```
data = dict(zip(strings, numbers)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T20:53:52.537

只需将 传递`list`给`dict()`函数，它将返回 a `dictionary`，并且永远不要`dict`用作变量名：

```
>>> dic = [("string1", [1,2]), ("string2", [5,6])]
>>> dict(dic)
{'string2': [5, 6], 'string1': [1, 2]} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T20:54:29.217

Python 2.7 和 Python 3，[字典理解](https://stackoverflow.com/questions/1747817/python-create-a-dictionary-with-list-comprehension)：

```
data = {entry[0]: entry[1] for entry in data} 
```

或解压你的结构：

```
data = {k: v for (k, v) in data} 
```

Python 2.6 及之前版本，生成器表达式：

```
data = dict((entry[0], entry[1]) for entry in data) 
```

或再次解包：

```
data = dict((k, v) for (k, v) in data) 
```

由于您的数据已经采用 (key, value) 序列的形式，您可以通过将结构传递给 dict 类型来一次性生成 dict，而无需显式 dict 或生成器表达式：

```
dict(data) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T20:50:09.420

```
strings = ["string1","string2"]
numbers = [[1, 2], [5, 6]]
data = {k:v for k,v in zip(strings, numbers)} 
```

而且我不建议使用保留字（例如`dict`）作为变量名。

# map - 是否有“map:”URI 前缀来启动地图应用程序？（如 mailto: 或 tel:)

> ID：10769631
> 
> 赞同：24
> 
> 时间：2012-05-26T20:46:34.537
> 
> 标签：map, uri, mailto, url-scheme, tel

在手机上启动地图应用程序是否有这样的前缀，

```
<a href="map:21st,High Street, London">Toto's home</a> 
```

喜欢可以做

```
<a href="mailto:toto@gmail.com">Toto's mail</a> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-26T20:51:33.863

`geo:`是官方认可的 URI 方案，`maps:`可能会在某些客户端中实现。

[https://en.wikipedia.org/wiki/Geo_URI_scheme](https://en.wikipedia.org/wiki/Geo_URI_scheme)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-06T11:08:39.060

在每个植物形态中：

## 苹果

[文档](https://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/MapLinks/MapLinks.html)

例子：`<a href="http://maps.apple.com/?ll=12.34567,8.90123">`

## 安卓：

[文档](https://developer.android.com/guide/components/intents-common.html#Maps)

例子：`<a href="geo:40.726966,-74.006076">`

## 视窗电话：

[文档](https://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj635237.aspx)

例子：`<a href="bingmaps:?cp=40.726966~-74.006076">`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-21T02:53:20.223

前面的两个答案都以他们自己的方式是正确的，但没有提供一个简洁的例子。所以这里是：

利用：

```
 <a href="geo://?q=My+address+here">View On Map</a> 
```

在我的测试中适用于 Android 和 Apple。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-24T15:06:43.873

Apple 现在也使用与该`maps://`协议的链接，据我所知，只有 Apple Maps 支持它（在 Mac OSX 10.11 El Captain 上测试）。

例子：`maps://maps.apple.com/maps?daddr=48.851925,2.337141`

因此，为了将它们全部列出，有协议：`geo:`、`bingmaps:`、`maps:`或链接到各种网站，例如：[https://goo.gl/maps/VZG3rV6cRGE2](https://goo.gl/maps/VZG3rV6cRGE2)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-27T22:28:14.327

我没有足够的声誉来为上面[ryan knell](https://stackoverflow.com/users/1573153/ryan-knell)的答案添加评论，但是，最近在[OpenStreetMap 站点](http://www.openstreetmap.org)的“**共享**”面板中[实现了地理 uri 功能](https://github.com/openstreetmap/openstreetmap-website/pull/994)，我想指出没有“/ /" 在该方案中。[在RFC 5870](https://tools.ietf.org/rfc/rfc5870)中通过示例清楚地说明了这一点。

 *** * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-21T23:32:27.333

如果你只是这样做......

```
<a href="http://maps.apple.com/?q=123+Main+etc...">View on map</a> 
```

如果浏览器在 iOS/Mac 上，将启动本机地图应用程序（与浏览器无关）。如果在 android/windows/other 上，maps.apple.com 将重定向到 maps.google.com

文档： [https ://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/MapLinks/MapLinks.html#//apple_ref/doc/uid/TP40007894-SW1](https://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/MapLinks/MapLinks.html#//apple_ref/doc/uid/TP40007894-SW1)**

# excel - 更改不同工作簿中单元格中的值

> ID：10769638
> 
> 赞同：0
> 
> 时间：2012-05-26T20:46:58.123
> 
> 标签：excel, vba

我在尝试将值存储在另一个打开的工作簿的单元格中时有点卡住了。我得到一个下标超出范围错误”，所以很明显我没有正确指向这个单元格。这是我所拥有的：

```
 Workbooks(wbSource).Activate
    ActiveWorkbook.Sheet32.Range("currMth").Value = Me.cboCurrMth.Value 
```

wbSource 是一个包含目标工作簿名称的字符串（例如“myfile.xls”）。我相信这是正确定义和设置的。

我尝试了很多不同的方法来存储这个值，但没有任何效果。这只是我的尝试之一。如果我可以从编写代码的工作簿中填充它，我什至不想激活这个工作簿。

谁能看到我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:03:28.057

1.) 什么是 Sheet32？2.) 我不确定您是否可以按名称索引范围。

以下作品：

```
Dim wb As Workbook
Set wb = Workbooks ("t1.xlsx")
wb.Names("MyRange").RefersToRange.Value2 = 5 
```

# python - 如何去除向量中的重复元素，类似于Python中的'set'

> ID：10769640
> 
> 赞同：48
> 
> 时间：2012-05-26T20:47:14.743
> 
> 标签：python, r, duplicates

我有一个包含重复元素的向量，并且想删除它们，以便每个元素只出现一次。

在 Python 中，我可以[`Set`](https://docs.python.org/2/library/sets.html)从向量构造 a 来实现这一点，但是如何在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-05-26T20:54:19.353

您可以签出[`unique`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/unique.html)功能。

```
 > v = c(1, 1, 5, 5, 2, 2, 6, 6, 1, 3)
 > unique(v)
 [1] 1 5 2 6 3 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-22T01:55:12.410

This does the same thing. Slower, but useful if you also want a logical vector of the duplicates:

```
v[duplicated(v)] 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-08-23T09:42:38.783

要仅删除连续的重复元素，您可以将向量与自身的移位版本进行比较：

```
v <- c(1, 1, 5, 5, 5, 5, 2, 2, 6, 6, 1, 3, 3)
v[c(TRUE, !v[-length(v)] == v[-1])]
[1] 1 5 2 6 1 3 
```

使用[dplyr](https://dplyr.tidyverse.org/)可以更优雅地编写相同的内容：

```
library(dplyr)
v[v != lag(v)]
[1] NA  5  2  6  1  3 
```

[lag()](https://dplyr.tidyverse.org/reference/lead-lag.html?q=lag)返回的 NA删除第一个值，要保留第一个值，您可以将默认值更改为与第一个值不同的值。

```
v[v != lag(v, default = !v[1])]
[1] 1 5 2 6 1 3 
```

# php - PHP：从 MySQL 中的内爆数组中选择一个值

> ID：10769641
> 
> 赞同：1
> 
> 时间：2012-05-26T20:47:17.113
> 
> 标签：php, mysql, arrays, select, tags

我有一个标签系统，其中标签作为内爆数组存储在一行中，如下所示：“value1，value2，value3，等等......”
我正在尝试制作一个标签搜索页面，但我不知道如何将其转换为数组以查看某人搜索的特定标签是否在数组中（因为我在使用 SELECT 时无法将其分解）。

任何人都可以帮助还是不可能？

谢谢大家的帮助，成功了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T20:57:01.400

有一个`mysql`函数调用`FIND_IN_SET`它对逗号分隔的字符串进行操作。例如：

```
SELECT * FROM posts WHERE FIND_IN_SET('some_tag', post_tags)>0 
```

此处的文档：[Mysql FIND_IN_SET](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:30:36.717

我认为更好的方法是规范化数据并将标签移动到单独的表中，然后将标签连接到您的实体。搜索会快速简单 =)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T20:51:40.083

从您的数据库中读取 $tags_str。

将字符串转换为数组：

```
 <?php
    $tags_str = "value1, value2, value3";
    $tags_arr = explode(', ', $tags_str);
    ?> 
```

然后使用[in_array()](http://ru.php.net/manual/en/function.in-array.php) PHP 函数来搜索数学。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T20:52:31.853

您可以在选择查询中使用“LIKE”

```
SELECT row FROM table WHERE tag LIKE '%search_value%' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T21:39:47.617

规范化你的数据库

```
tags {
  object_id
  tag_id
} 
```

或者，如果你很懒，那就做

```
UPDATE tags = CONCAT(",", tags, ",") FROM table 
```

接着

```
SELECT * FROM table WHERE tags LIKE '%,selected_tag,%' 
```

# c - C中的SIGSEGV（分段错误）

> ID：10769642
> 
> 赞同：2
> 
> 时间：2012-05-26T20:47:45.697
> 
> 标签：c, posix, segmentation-fault

`log_msg_send`当调用函数 ( )时，我在运行时收到以下代码的 SIGSEGV - Segmentation Fault 。我读到这是关于内存违规的，但我找不到原因。我将不胜感激任何建议/帮助。

```
 #define  MAXSTRINGLENGTH 128
#define BUFSIZE 512

void log_msg_send(char *message, char *next_hop);

struct routing {
        int hop_distance;
        char sender_ID[16]; 
};

struct routing user_list[40]  =  { [0]={0,0,0,0}};

int main(int argc,char *argv[]){
    strcpy(user_list[0].sender_ID,"192.168.001.102");
    char message[1000];
    strcpy(message,"123456123456");
     log_msg_send(message, user_list[0].sender_ID);

    return 0;
}

void log_msg_send(char *message, char *next_hop){
    char *SRV_IP;
    strcpy(SRV_IP,  next_hop);

    if (sizeof(SRV_IP) == 16){
         struct sockaddr_in si_other;
         int s, i, slen=sizeof(si_other);
         char buf[60] ;
         strcpy(buf, message);

        if ((s=socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP))==-1){
          fprintf(stderr, "socket() failed \n");
          exit(1);
        }

        memset((char *) &si_other, 0, sizeof(si_other));
        si_other.sin_family = AF_INET;
        si_other.sin_port = htons(33333);
        if (inet_aton(SRV_IP, &si_other.sin_addr) == 0) {
          fprintf(stderr, "inet_aton() failed \n");
          exit(1);
        }

          if (sendto(s, buf, BUFSIZE, 0,(struct sockaddr *) &si_other, slen)==-1){
          fprintf(stderr, "sendto() failed \n");
          exit(1);
        }

        close(s);
    }
} 
```

PS。对于有 SIGSEGV 问题的人。SIGSEV 问题的最[常见原因](http://en.wikipedia.org/wiki/Segmentation_fault#Common_causes)： - 尝试执行无法正确编译的程序。请注意，大多数编译器不会在编译时错误的情况下输出二进制文件。- 缓冲区溢出。- 使用未初始化的指针。- 取消引用 NULL 指针。- 试图访问程序不拥有的内存。- 试图改变程序不拥有的内存（存储违规）。- 超出允许的堆栈大小（可能是由于递归失控或无限循环）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T20:53:36.930

你不分配内存`SRV_IP`

```
char *SRV_IP;
strcpy(SRV_IP,  next_hop); 
```

所以`strcpy`试图访问无效的内存。

```
char *SRV_IP = malloc(strlen(next_hop)+1);
if (!SRV_IP) exit(1);
strcpy(SRV_IP,  next_hop); 
```

然后你检查

```
if (sizeof(SRV_IP) == 16){ 
```

but`SRV_IP`是 a `char*`，所以它的大小是`char`指针的大小，通常是 8 或 4 个字节。您可能是指长度，因此必须使用`strlen`.

# javascript - 如何禁用按钮图像？

> ID：10769643
> 
> 赞同：1
> 
> 时间：2012-05-26T20:48:03.837
> 
> 标签：javascript, jquery, html, css

我想知道是否可以禁用图像按钮？当用户添加了他们需要的问题数量时：

```
if (qnum == <?php echo (int)$_SESSION['textQuestion']; ?>) 
```

然后我想禁用图像按钮，但是怎么做呢？

以下是我尝试过的，但没有奏效：

```
 //HTML

    <a onclick="return plusbutton();">
    <img src="Images/plussign.jpg" width="30" height="30" alt="Look Up Previous Question" class="plusimage" name="plusbuttonrow"/>
    </a>

    ...

    //jquery

    if (qnum == <?php echo (int)$_SESSION['textQuestion']; ?>) {
    $(".plusimage").attr("disabled", "disabled");

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T20:51:20.057

使用防止默认值

```
$("a").click(function(e) {
     e.preventDefault();
}); 
```

您应该为图像正确使用 id，因为这会禁用所有 a 元素 onclick。或者也许是一些东西

```
$(".plusimage").parent().click(function(e) {
     e.preventDefault();
     //then you can also change the image to a disabled version inhere :)
}); 
```

**编辑**：你刚刚改变了你的问题，从这个角度来看，我很好奇，因为你在页面加载时使用 php 生成输出，你怎么想用 jquery 禁用它？为什么不只是在禁用图像的情况下从服务器输出它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T20:52:19.837

您可以在“a”上设置 prevetDefault，但是，图像没有“禁用”属性。

```
$('a').click(function(event){
   $(this).preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T20:57:18.967

不要为此使用 JQuery！只使用 php（你有禁用按钮的图像吗？？Images/plussignDISABLED.jpg ？？）

**编辑**我只是将 qnum 更改为 php 变量 $numberOfQuestions。我想这个变量将包含用户已经完成的问题数量（与您的 javascript qnum 相同，我想......）

```
<?php 
if ($numberOfQuestions == $_SESSION['textQuestion']) {
?>
    <img src="Images/plussignDISABLED.jpg" width="30" height="30" alt="Look Up Previous Question" class="plusimage" name="plusbuttonrow"/>

<?php 

}else {

?>

<a onclick="return plusbutton();">
    <img src="Images/plussign.jpg" width="30" height="30" alt="Look Up Previous Question" class="plusimage" name="plusbuttonrow"/>
    </a>

<?php } ?> 
```

# python - Django & South：添加新字段但 DatabaseError 发生“表已存在”

> ID：10769644
> 
> 赞同：3
> 
> 时间：2012-05-26T20:48:06.213
> 
> 标签：python, django, django-south

在尝试将新字段添加到预先存在的模型/表时，我得到一个带有“表已存在”的 DatabaseError。我在这个之前已经运行过迁移，所以我有点困惑为什么添加一个新字段会弹出这个错误。

执行的命令：

```
python manage.py schemamigration app --auto
python manage.py migrate app 
```

以前这样的 SO 问题是通过伪造迁移来回答的。

```
python manage.py migrate app --fake
python manage.py migrate app 
```

由此产生的问题是没有创建列。所以当你运行服务器时，你会看到一个 DatabaseError 'no such column'。

就我的模型而言，我只添加了一个 CharField。

在此先感谢您的帮助-

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-26T20:56:02.317

您需要`schemamigration app --initial`首先*不使用*新字段，然后`migrate app --fake 0001`（或它返回的任何迁移编号）将南数据库设置为该状态（已创建表）。

添加新字段，*然后*运行`schemamigration myapp --auto`，*然后*迁移。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:07:54.793

我注释掉了该字段，运行了架构迁移，然后迁移。取消注释该字段，运行架构迁移，然后迁移并且它工作。不知道我做错了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T10:37:48.793

当您在迁移方面做了一些事情并且没有让南方知道这件事时，就会发生这种情况。

如果您查看数据库中的 south_* 表，您会发现 south 在数据库中保留了有关数据库迁移的日志。常见的方法是伪造迁移。南方有`fake`说法。

在这里您可以了解全部内容： [http ://south.readthedocs.org/en/latest/commands.html#options](http://south.readthedocs.org/en/latest/commands.html#options)

# java - android.os.NetworkOnMainThreadException 导致的致命异常

> ID：10769648
> 
> 赞同：2
> 
> 时间：2012-05-26T20:48:38.670
> 
> 标签：java, android, network-programming

由于我是 Android 编程的初学者，我试图运行一些教程，但是在运行程序时（源代码可在此处获得：[http ://www.androidhive.info/2012/01/android-json-parsing-教程/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)）我得到了一个错误。

该程序应该从网站读取数据并进行处理，但我认为网络部分有问题。我完全知道这里有类似的问题，但我不知道如何解决它，也许任何人都可以提供我也能理解的解决方案。

[Android应用程序中奇怪的NetworkOnMainThreadException？](https://stackoverflow.com/questions/8995364/strange-networkonmainthreadexception-in-android-app) 这是一个早先提出的问题，与我的问题相同，但我不知道他们在那里试图说什么，即“要修复你只需将任何接触网络的东西移动到它自己的线程。” 对我来说毫无意义..任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T21:10:56.790

使用 an[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)将您的网络操作从主/ui 线程移到后台/工作线程上。

扩展教程中的示例，将 JSON 内容包装在 anonymous 中`AsyncTask`：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    new AsyncTask<Void, Void, JSONObject>() {

        protected JSONObject doInBackground(Void... args) {
            // Creating JSON Parser instance
            JSONParser jParser = new JSONParser();

            // getting JSON string from URL
            return jParser.getJSONFromUrl(url);
        }

        protected void onPostExecute(JSONObject json) {
            // Hashmap for ListView
            ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

            try {
                // Getting Array of Contacts
                contacts = json.getJSONArray(TAG_CONTACTS);

                // looping through All Contacts
                for(int i = 0; i < contacts.length(); i++){
                    JSONObject c = contacts.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_ID);
                    String name = c.getString(TAG_NAME);
                    String email = c.getString(TAG_EMAIL);
                    String address = c.getString(TAG_ADDRESS);
                    String gender = c.getString(TAG_GENDER);

                    // Phone number is agin JSON Object
                    JSONObject phone = c.getJSONObject(TAG_PHONE);
                    String mobile = phone.getString(TAG_PHONE_MOBILE);
                    String home = phone.getString(TAG_PHONE_HOME);
                    String office = phone.getString(TAG_PHONE_OFFICE);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_ID, id);
                    map.put(TAG_NAME, name);
                    map.put(TAG_EMAIL, email);
                    map.put(TAG_PHONE_MOBILE, mobile);

                    // adding HashList to ArrayList
                    contactList.add(map);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            /**
             * Updating parsed JSON data into ListView
             * */
            ListAdapter adapter = new SimpleAdapter(this, contactList,
                    R.layout.list_item,
                    new String[] { TAG_NAME, TAG_EMAIL, TAG_PHONE_MOBILE }, new int[] {
                            R.id.name, R.id.email, R.id.mobile });

            setListAdapter(adapter);

            // selecting single ListView item
            ListView lv = getListView();

            // Launching new screen on Selecting Single ListItem
            lv.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    // getting values from selected ListItem
                    String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
                    String cost = ((TextView) view.findViewById(R.id.email)).getText().toString();
                    String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

                    // Starting new intent
                    Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                    in.putExtra(TAG_NAME, name);
                    in.putExtra(TAG_EMAIL, cost);
                    in.putExtra(TAG_PHONE_MOBILE, description);
                    startActivity(in);
                }
            });
        }
    }.execute((Void) null);
} 
```

# c# - 如何获取堆栈跟踪中的参数值

> ID：10769651
> 
> 赞同：17
> 
> 时间：2012-05-26T20:49:11.867
> 
> 标签：c#, .net, exception, stack-trace, system.diagnostics

我可以使用以下方法通过 StackTrace 获取有关参数的信息：

```
catch (Exception ex)
{
    var st = new StackTrace(ex);

    System.Reflection.ParameterInfo pi = st.GetFrame(0).GetMethod().GetParameters().First();
} 
```

我想知道如何获得参数的值。例子：

如果我在堆栈跟踪中的方法是这样的：

```
void MyMethod(object value) 
```

电话是这样的：

```
MyMethod(10); 
```

我想获得 10 的值。我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T20:58:57.900

有两种方法。更强大的是用于 .NET 调试的 COM API。例如，调用堆栈中函数的参数和局部变量都可以从[ICorDebugILFrame](http://msdn.microsoft.com/en-us/library/ms232990)访问。但这必须从作为调试器附加到您的进程的单独进程中运行。

对于进程内自省，有[Profiler API，它还可以找到有关函数参数](https://msdn.microsoft.com/en-us/library/bb384493(v=vs.110).aspx)的信息。查看有关“影子堆栈”的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T20:55:47.387

不使用 C#，除非您正在创建高度依赖 CLR（补丁）版本的解决方案。但是起作用的是将 Windbg 附加到您的进程，将 sos.dll 切换到您的线程并键入

```
!ClrStack -p 
```

显示托管调用堆栈和大多数方法的方法参数。这即使在调试器下也不是万无一失的，因为由于内联和 JIT 优化，堆栈布局非常灵活。除此之外，一些参数甚至可能不会出现在堆栈内存中，因为它们是通过寄存器传递的（这在 x64 平台下更为常见）。

回答你的第一个问题。不，您尝试的方法是不可能的。一个可行的解决方案是可能的，但根本不是便携的。托管调试器可以部分检索您的参数，但没有 100% 有效的解决方案（即使在调试器下）。

# hibernate - 如何毫无问题地使用 JPA 2.0 @ManyToMany

> ID：10769656
> 
> 赞同：9
> 
> 时间：2012-05-26T20:49:27.953
> 
> 标签：hibernate, jpa, struts2, jpa-2.0

我正在使用`JPA 2.0`并`Spring`在我的开发中。我的实体类包含两个`@ManyToMany`关系。

```
@Entity("payment")
 public class PaymentData implements Serializable
{
    private Long pk;

    private Collection<PaymentItemData> paymentItem;
    /**
     *  minorPaymentItem
     *
     */
    private Collection<MinorPayItemData> minorPaymentItem;

    @ManyToMany(fetch=FetchType.EAGER)
    @JoinTable(name = "payitem_m_assig",
    joinColumns =
    @JoinColumn(name = "pay_item_id", nullable = false),
    inverseJoinColumns =
    @JoinColumn(name = "minor_pay_item_id", nullable = false))
    public Collection<MinorPayItemData> getMinorPaymentItem()
    {
        return minorPaymentItem;
    }

    /**
     * @param minorPaymentItem the minorPaymentItem to set
     */
    public void setMinorPaymentItem(final Collection<MinorPayItemData> value)
    {
        this.minorPaymentItem = value;
    }

    @ManyToMany(fetch=FetchType.EAGER)
    @JoinTable(name = "payitem_assigned",
    joinColumns =
    @JoinColumn(name = "pay_item_id", nullable = false),
    inverseJoinColumns =
    @JoinColumn(name = "pay_item_id", nullable = false))
    public Collection<PaymentItemData> getPaymentItem()
    {
        return paymentItem;
    }

    /**
     * Set the property paymentItem
     *
     * @param value -paymentItem
     *
     */
    public void setPaymentItem(final Collection<PaymentItemData> value)
    {
        this.paymentItem = value;
    }    

} 
```

当我运行查询以从数据库中的付款表中检索记录时，例如

```
Query q = manager.createQuery("select a from PaymentData a");
q.getResultList(); 
```

如果我允许`fetch=FetchType.EAGER`打开`@ManyToMany`，我会收到以下错误

```
Caused by: org.hibernate.loader.MultipleBagFetchException: cannot simultaneously fetch multiple bags
    at org.hibernate.loader.BasicLoader.postInstantiate(BasicLoader.java:94)
    at org.hibernate.loader.entity.EntityLoader.<init>(EntityLoader.java:119)
    at org.hibernate.loader.entity.EntityLoader.<init>(EntityLoader.java:71)
    at org.hibernate.loader.entity.EntityLoader.<init>(EntityLoader.java:54)
    at org.hibernate.loader.entity.BatchingEntityLoader.createBatchingEntityLoader(BatchingEntityLoader.java:133)
    at org.hibernate.persister.entity.AbstractEntityPersister.createEntityLoader(AbstractEntityPersister.java:1914)
    at org.hibernate.persister.entity.AbstractEntityPersister.createEntityLoader(AbstractEntityPersister.java:1937)
    at org.hibernate.persister.entity.AbstractEntityPersister.createLoaders(AbstractEntityPersister.java:3205)
    at org.hibernate.persister.entity.AbstractEntityPersister.postInstantiate(AbstractEntityPersister.java:3191)
    at org.hibernate.persister.entity.SingleTableEntityPersister.postInstantiate(SingleTableEntityPersister.java:728)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:348)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1845)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:906)
    ... 39 more 
```

但是如果我删除`fetch=FetchType.EAGER`并保留它`@ManyToMany`，我会有例外

```
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.data.PaymentData.paymentItem, no session or session was closed
    at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:383)
    at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:375)
    at org.hibernate.collection.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:368)
    at org.hibernate.collection.AbstractPersistentCollection.read(AbstractPersistentCollection.java:111)
    at org.hibernate.collection.PersistentBag.toString(PersistentBag.java:506)
    at java.lang.String.valueOf(String.java:2826)
    at java.lang.StringBuilder.append(StringBuilder.java:115)
    at com.niu.util.Util.toString(Util.java:131)
    at com.niu.util.data.BaseData.toString(BaseData.java:107)
    at java.lang.String.valueOf(String.java:2826)
    at java.lang.StringBuilder.append(StringBuilder.java:115)
    at java.util.AbstractCollection.toString(AbstractCollection.java:422)
    at java.lang.String.valueOf(String.java:2826)
    at java.io.PrintStream.println(PrintStream.java:771)
    at org.apache.tomcat.util.log.SystemLogHandler.println(SystemLogHandler.java:269)
    at sun.reflect.GeneratedMethodAccessor1861.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:133)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.niu.web.common.interceptor.ApplicationModelDrivenInterceptor.intercept(ApplicationModelDrivenInterceptor.java:31)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:104)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:270)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:498)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:317)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:204)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:311)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

我究竟做错了什么

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-26T21:17:30.103

为避免使用`MultipleBagFetchException`，而不是使用`FetchType.EAGER`，请尝试`@LazyCollection(LazyCollectionOption.FALSE)`在此示例中使用 as ：

```
@ManyToMany
@LazyCollection(LazyCollectionOption.FALSE)
@JoinTable(name = "payitem_m_assig", joinColumns = @JoinColumn(name = "pay_item_id", nullable = e), inverseJoinColumns = @JoinColumn(name = "minor_pay_item_id", nullable = false))
public Collection<MinorPayItemData> getMinorPaymentItem()
{
    return minorPaymentItem;
} 
```

这是[文档](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/)中的一个小描述：

*   > @LazyCollection：定义 @ManyToMany 和 @OneToMany 关联的惰性选项。LazyCollectionOption 可以是 TRUE（集合是惰性的，将在其状态被访问时加载），EXTRA（集合是惰性的，所有操作都会尽量避免加载集合，这对于加载所有元素时的大型集合特别有用没有必要）和 FALSE（关联不懒惰）

*   > @Fetch：定义用于加载关联的获取策略。FetchMode 可以是 SELECT（需要加载关联时触发选择）、SUBSELECT（仅适用于集合，使用子选择策略 - 请参阅 Hibernate 参考文档以获取更多信息）或 JOIN（使用 SQL JOIN 加载加载所有者实体时的关联）。JOIN 覆盖任何惰性属性（通过 JOIN 策略加载的关联不能是惰性的）。

我希望它有帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T21:36:48.963

最好的方法是使 XxxtoMany 关联变得惰性（默认）。这样，集合只会在需要时加载，或者当您告诉 Hibernate 使用带有 join fetch 子句的查询急切地获取它们时。使它们 EAGER 强制 Hibernate*始终*加载它们，即使您不需要它们。

当然，如果您需要它们并且它们被配置为 LAZY，则只有在会话仍然打开时才能加载它们。一旦会话关闭，实体就会分离，并且不能再延迟加载集合。因此，您需要`Hibernate.initialize(collection)`在关闭会话之前显式初始化它们（通过调用集合的方法或调用 ）。

如果你真的想让它们热切地加载，那么其中只有一个应该是一个包（即类型`Collection`or `List`）。其他应声明为`Set`.

旁注：第二个关联的映射是错误的：您使用相同的连接列两次。

# ios - 使用情节提要设置 GLKView 的初始大小

> ID：10769659
> 
> 赞同：0
> 
> 时间：2012-05-26T20:49:53.077
> 
> 标签：ios, storyboard, opengl-es-2.0, glkit

我正在尝试设置 GLKView 的初始大小（基本上，我希望它与屏幕的大小完全相同，尽管存在标签栏）。因为我使用的是故事板，所以 GLKView 是在 GLKViewController init 方法中自动创建的（不确定，它没有真正记录，但我认为是这样）。在 GLKViewController 我只有 viewDidLoad 方法，这里是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];
    if (!self.context) {
        NSLog(@"Failed to create ES context");
    }

    GLKView *view = (GLKView *)self.view;
    view.context = self.context;
} 
```

所以，如果我不使用故事板，我会写这样的东西：

```
EAGLContext * context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];
GLKView *view = [[GLKView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
view.context = context;
view.delegate = self;

GLKViewController * viewController = [[GLKViewController alloc] initWithNibName:nil bundle:nil];
viewController.view = view; 
```

但是在使用情节提要时，我没有机会这样做：

```
GLKView *view = [[GLKView alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 
```

我试图更改现有视图的框架，创建一个新的 GLKView，然后将其分配给 viewController.view - 没有结果。

是否有可能以不同的方法设置或更改 GLKView 的大小等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:16:00.043

找到了解决方案。

首先，我们应该将情节提要中 GLKViewController 的“想要全屏”属性更改为 true。这将允许有条件地隐藏状态栏而不调整 GLKView 的大小，如下所示：

```
 [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationFade]; 
```

第二，我们应该将标签栏的子视图的框架更改为全屏框架。似乎这只是在标签栏*下呈现内容的一种工作方法。*此方法应放置在 TabViewController 子类中。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    CGRect tabbarFrame = CGRectZero;
    for (UIView *view in self.view.subviews)
    {
        if ([view isKindOfClass:[UITabBar class]])
        {
            tabbarFrame = view.frame;
            break;
        }
    }    

    for (UIView *view in self.view.subviews)
    {
        if (![view isKindOfClass:[UITabBar class]])
        {
            view.frame = CGRectMake(view.frame.origin.x, view.frame.origin.y, 
                                    view.frame.size.width, view.frame.size.height + tabbarFrame.size.height);
        }
    }
} 
```

同样，这将允许在需要时隐藏标签栏，使用这段简短的代码：

```
for (UIView *view in self.view.subviews)
{
    if ([view isKindOfClass:[UITabBar class]])
    {
        [UIView animateWithDuration:0.4f
                         animations:^{
                            [view setAlpha:0.f];
                         }
                         completion:nil];
        break;
    }
} 
```

# elasticsearch - Elasticsearch 灵活搜索

> ID：10769664
> 
> 赞同：0
> 
> 时间：2012-05-26T20:50:37.233
> 
> 标签：elasticsearch

有没有人有使用 Elasticsearch 并使搜索更加灵活的经验？

目前，如果我有一个查询“House”，它将返回正确的项目。但如果输入“Hous”，则不会返回任何内容。此外，如果我搜索“OJ”，它将返回 OJ，但如果我想搜索 OJ，我什么也得不到。

# java - 如何在 log4j.xml 中设置 CATALINA_HOME？

> ID：10769667
> 
> 赞同：11
> 
> 时间：2012-05-26T20:50:59.643
> 
> 标签：java, tomcat, log4j

我需要这样的东西：

"参数名称="文件" 值="${CATALINA_HOME}/logs/log4j.log"

我看到了很多类似的问题，但没有有效的解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-10T15:23:40.273

对于 Tomcat 6.0 或更高版本的使用`catalina.base`（而不是`catalina.home`）：

`param name="File" value="${catalina.base}/logs/log4j.log"`

根据主机系统，两者可能不同，例如：

```
catalina.home: /usr/share/tomcat7
catalina.base: /var/lib/tomcat7 
```

下面`catalina.home`是`bin`文件夹。

下面`catalina.base`有`conf`、`logs`和`webapps`其他文件夹/链接。

Tomcat 使用`catalina.base`自己来配置日志目录 - 看看`conf/logging.properties`它在哪里说：

```
1catalina.org.apache.juli.FileHandler.directory = ${catalina.base}/logs 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-26T21:14:47.203

`param name="File" value="${catalina.home}/logs/log4j.log"`

该`catalina.home`属性已由 Tomcat 提供。

[在Tomcat 5.5 日志记录页面](http://tomcat.apache.org/tomcat-5.5-doc/logging.html#log4j)上找到一个（非常）简短的示例，并在以下 SO 问题中找到更多详细信息：

[Log4j，将 Web 应用配置为使用相对路径](https://stackoverflow.com/questions/216781/log4j-configuring-a-web-app-to-use-a-relative-path)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-26T21:02:43.220

您可以执行以下操作：

1.  使用选项`CATALINA_HOME`作为环境变量发送。`-D`你只需要跑

`set JAVA_OPTS=%JAVA_OPTS% -DCATALINA_HOME=%CATALINA_HOME%`如果您在 Windows 或 `export JAVA_OPTS=${JAVA_OPTS} -DCATALINA_HOME=$CATALINA_HOME`unix 上。

现在只需在您的 log4j 配置文件中使用 ${CATALINA_HOME} 就可以了。

# html - 将一组可编辑的表行添加到 showModalDialog 后，有没有办法将行传递给 JSP？

> ID：10769668
> 
> 赞同：0
> 
> 时间：2012-05-26T20:51:01.487
> 
> 标签：html, jsp, showmodaldialog

这是我所拥有的以及我需要的信息：

1.  我在一个 JSP 中有一个`table`带有`checkbox`es 的 HTML。
2.  当用户选择 a`checkbox`然后点击 submit`button`时，我打开一个`showModalDialog`^(（[IE-api-doc](http://msdn.microsoft.com/en-us/library/ie/ms536759%28v=vs.85%29.aspx)）、（[Firefox-api-doc](https://developer.mozilla.org/en/DOM/window.showModalDialog)）)屏幕。
3.  我需要获取整行，然后将其显示`showModalDialog`为可编辑字段。

例如，我有一行：`name`, `dob`, `employee id`,`office loc`然后是`checkbox`. 当我选择其中一行时，我可以将`rowid`行本身以及行本身存储在一个字符串中。

我应该如何将它传递给 JSP（`showmodaldialog`指向的地方），然后将其变成可编辑的行并将其显示在屏幕上？如果用户选择 3 行，则所有三行都应在`showmodaldialog`屏幕上显示为可编辑字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:00:54.877

使用 JavaScript 查找选定的员工，并使用所有选定行的 ID（例如 3、54 和 867）组成一个 URL：

```
/foo/editEmployees?ids=3&ids=54&ids=867 
```

`showModalDialog()`使用此 URL 作为参数调用。

在映射到 的 servlet 中`/editEmployees`，用于`request.getParameterValues("ids")`获取要编辑的员工的 ID。从数据库中获取这些员工的信息并生成包含表单的 HTML 页面来编辑这些员工。

# javascript - 什么是好的 Javascript 教程库？

> ID：10769672
> 
> 赞同：2
> 
> 时间：2012-05-26T20:51:17.497
> 
> 标签：javascript, jquery

我正在寻找可以让我一次一步地引导新用户通过网络应用程序的东西，并提供有关单击和查看内容的不同提示。这样的事情存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:56:33.597

我之前尝试过[jQuery Tour](https://github.com/nickrouty/jQuery-Tour)，发现它非常好。（顺便说一句，这与我评论的那个不一样。）但这是真的，这个问题没有建设性:)

# android - 如何在 android 内容提供者查询中为媒体商店设置“where”语句

> ID：10769675
> 
> 赞同：0
> 
> 时间：2012-05-26T20:51:29.783
> 
> 标签：android, android-contentprovider, mediastore

我可以查询 Android MediaStore，但无法设置“where”语句。所以我放弃了尝试获取它并尝试破解它，我的破解也不起作用。

我的技巧是移动光标的每一行，看看我感兴趣的列的字符串值是否等同于我的搜索关键字......我的代码如下。我想做的是找到专辑（或艺术家、播放列表）中的所有歌曲。

为“where”或为什么我的字符串比较不起作用设置查询的任何帮助将不胜感激...

```
private void loadList() {

        String selection = ((HashMap<String, String>) selectedAlbumData.get(0))
                .get("Album").toString();

        String[] proj = { MediaStore.Audio.Media._ID,
                MediaStore.Audio.Media.DISPLAY_NAME,
                MediaStore.Audio.Media.DATA, MediaStore.Audio.Media.ARTIST,
                MediaStore.Audio.Media.ALBUM, MediaStore.Audio.Media.DURATION };

        // managed query doesn't need startManagingCursor called on the
        Cursor c = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
                proj, null, null, null);

        if (c.getCount() < 1) {
            Log.d("AFA", "Cursor query is empty.. :( ...");
        } else {

            // do stuff with our content...
            while (c.moveToNext()) {

                HashMap<String, String> temp = new HashMap<String, String>();

                if (c.getString(c.getColumnIndex(MediaStore.Audio.Media.ALBUM)) == selection) {

                            //do stuff with this data

                }
                Log.d("SongChoosing", "C str is: " + c.getString(c.getColumnIndex(MediaStore.Audio.Media.ALBUM)));
            }

            //debug stuff
            c.moveToPosition(5);
            Log.d("SongChoosing", "Selection is: " + selection);
            Log.d("SongChoosing", "C str is: " + c.getString(c.getColumnIndex(MediaStore.Audio.Media.ALBUM)));
        }
    } 
```

我在专辑列中查找的字符串值是一个有效字符串，它不是 null 或空的。我尝试在 log cat 上打印我的歌曲的每一行，字符串看起来相当于肉眼，但我的 if 语句是不工作...

非常感谢任何可以帮助我的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:08:04.467

您必须使用 equals 或 equalsIgnoreCase 而不是 == 与字符串。

试试这个

```
 if (c.getString(c.getColumnIndex(MediaStore.Audio.Media.ALBUM)).equalsIgnoreCase(selection)) {

                        //do stuff with this data

            } 
```

# javascript - 发布到相对网址

> ID：10769680
> 
> 赞同：3
> 
> 时间：2012-05-26T20:51:54.643
> 
> 标签：javascript, jquery, asp.net, url

我需要 jQuery 发布到相对 url（当前它发布到根目录）。

结构：

1.  网址：`localhost/myApp`
2.  表格网址：`Account/Login`
3.  实际服务器 url: `localhost/myApp/Account/Login`<- 这里需要它
4.  发布到网址：`localhost/Account/Login`

形式：

```
<form id="login" action="Account/Login" method="POST">
</form> 
```

jQuery：

```
$.post($el.find('form').attr("action"), $el.find('form').serialize(), function(resp) {
}); 
```

我需要能够将此应用程序放在任何 URL 中并且它可以工作，因此如果它托管在`www.site.com/dir1/dir2/`，那么它应该发布到`www.site.com/dir1/dir2/Account/Login`.

请注意，这是一个单页应用程序。所以表格位于`localhost/myApp`。

标头信息：

```
Request URL:http://localhost/Account/Login
Request Method:POST
Status Code:404 Not Found
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-GB,en-US;q=0.8,en;q=0.6
Connection:keep-alive
Content-Length:19
Content-Type:application/x-www-form-urlencoded; charset=UTF-8
Host:localhost
Origin:http://localhost
Referer:http://localhost/myApp
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5
X-Requested-With:XMLHttpRequest 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:57:09.450

尝试在 url 操作前添加一个斜杠以使其：

```
/Account/Login 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:03:54.437

```
Request URL:http://localhost/Account/Login
Request Method:POST
Status Code:404 Not Found
Request Headersview source 
...
...
Referer:http://localhost/myApp 
```

尽管您正在加载 /myApp，但很明显正在发生某种形式的重定向，将客户端置于根 / 路径：

因此，在您的操作中，将以下内容添加到操作属性中：

```
<form action="/myApp/Account/Login"> 
```

顺便说一句，您要么有一个 301/302 重定向将 URL 重写为`http://localhost`，要么您并没有真正访问`http://localhost/myApp`，或者您可能有一个`<base>`HTML 元素导致您的相对 URL 被丢弃。如果没有看到所有的 HTML，很难确定，但是更改操作中的路径会将您的表单连接到服务器。

如果您的应用程序的根因平台而异，请考虑使用`<base>`HTML 元素以避免需要更改所有 URL。使用`<base>`，您只需在 HTML 中的 1 个位置进行更改。

```
<!-- relative urls start from /myApp -->
<base target="_blank" href="http://localhost/myApp/"> 
```

有关更多信息，请参阅关于[基本 HTML 元素](https://developer.mozilla.org/en/HTML/Element/base#Examples)的 Mozilla 开发人员中心文章：

> 链接
> 
> *   在整个文档中用于相对 URL 地址的基本 URL。
> *   如果指定了此属性，则此元素必须位于其属性值为 URL 的任何其他元素之前。
> *   允许使用绝对和相对 URI（但请参阅下面的注释部分）。

此外，虽然来自 W3Schools 的信息应该经过仔细审查来消化，但我在[此处列出了基本 HTML 元素](http://www.w3schools.com/tags/tag_base.asp)上的页面，仅仅是因为它们有比 MDC 更好的示例：

```
<head>
    <base href="http://www.w3schools.com/images/" target="_blank" />
</head>

<body>
    <img src="stickman.gif" />
    <a href="http://www.w3schools.com">W3Schools</a>
</body> 
```

这是[强制性的 W3Fools 链接](http://w3fools.com/)。

注意：基本元素必须位于引用由基本元素修改的 URL 的任何其他元素之前。

# php - 在php中从0000开始递增数字

> ID：10769681
> 
> 赞同：12
> 
> 时间：2012-05-26T20:52:15.127
> 
> 标签：php, numbers

我需要一个关于 php 计数器功能的建议。是否有任何函数可以将 5 位数字作为 00001 或 00123……这个数字应该不是随机的，但必须增加前一个字段的值。

如果一个数字是 $n='00001' 有一个函数加一并得到 00002 而不是 2？

谢谢 F。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-26T20:56:15.880

```
$n2 = str_pad($n + 1, 5, 0, STR_PAD_LEFT); 
```

通过[`str_pad()`](http://php.net/manual/en/function.str-pad.php)将`0`s（**第三个**参数）添加到旧数字的左侧（**第四个**`$n`参数）以递增`1`（**第一个**参数）直到长度为 5（**第二个**参数）来使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T20:57:51.223

```
$number = 1;
$number++;
echo str_pad($number, 5, "0", STR_PAD_LEFT);  //00002 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-26T21:04:12.957

作为替代方案，如果您有兴趣，可以使用 sprintf 很容易地用 0 填充到某个数字。

```
$numbers = array(0,1,11,111,1111,11111,11111);
$padded  = array();
foreach($numbers as $num)
  $padded[] = sprintf('%1$05d', ++$num);

print_r($padded); 
```

PHP 几乎总是有很多方法来做同样的事情。:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-26T20:56:18.397

您需要[`str_pad()`](http://ru.php.net/manual/en/function.str-pad.php)将前导零添加到索引的函数。

```
$new_index = str_pad($index, 5, "0", STR_PAD_LEFT); 
```

圆圈中`$index`的递增索引`$new_index`是带有前导零的索引。

# php - 用于 gettext 翻译的多功能功能

> ID：10769685
> 
> 赞同：1
> 
> 时间：2012-05-26T20:52:47.950
> 
> 标签：php, function, gettext

它类似于[Drupal 所拥有](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/t/)的。

我当前的函数定义是这样的：

`string t(string $singular, [string $plural, int $number, mixed $arg1, ...])`

参数的顺序不必遵循这种模式。只`string $singular`需要出于明显的原因成为第一个。

一些示例来演示它是如何工作的：

*   翻译“你好”：

    ```
    t('Hello') 
    ```

*   翻译“Hello”并格式化字符串（我正在使用[`vsprintf`](http://php.net/manual/en/function.vsprintf.php)with [`func_get_args()`](http://php.net/manual/en/function.func-get-args.php)）

    ```
    t('Hello %s', $user) 
    ```

*   复数翻译：

    ```
    t('%d apple', '%d apples', 5, 5) 
    ```

    所以问题就从这里开始了。**如果第二个参数是字符串并且**第三个参数是整数，我假设这是对复数翻译的请求。

    问题是我可能会错误地截获单个翻译请求：

    ```
    $user = 'Mary';
    t('%s, you need at least %d apples for me to take you srsly', $user, 420) 
    ```

您对如何更好地实现此类功能并避免此类冲突有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T21:11:24.810

我会改用标准的 _() 和 ngettext()，因为这样你就可以通过 xgettext shell 命令收集所有可本地化的字符串。您甚至可以使用您自己的函数名称，例如 t() 和 nt() 并仍然使用 xgettext 提取它们（请参阅[https://developer.mozilla.org/en/gettext](https://developer.mozilla.org/en/gettext)中的 --keyword 参数），但您不能（并且不应该）避免两个功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T21:05:14.357

如果你只有 2 个参数，第一个是字符串，第二个是简单情况下的 int，但在复杂情况下，它会是关联数组，如

```
array('plural_int' => 5, 'plural_str' => '%d apples', 'singular_int' => 10) 
```

或者

```
array('singular_int' => array(10,20,30)) 
```

# jquery - 我如何使用 tablesorter 处理 4 个行组

> ID：10769696
> 
> 赞同：1
> 
> 时间：2012-05-26T20:54:17.340
> 
> 标签：jquery, grouping, tablesorter

我有一个表，每条记录有 3 行，之后有一个空白行。在使用 tablesorter 插件进行排序时，我想将这 4 行视为单行。请帮忙！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:27:27.353

实际上，[tablesorter 的 mod](http://www.pengoworks.com/workshop/jquery/tablesorter/tablesorter.htm)已添加到[tablesorter v2.0.5](http://tablesorter.com/docs/)中。我已经在我的博客上记录[了如何使用该`ccsChildRow`选项。](http://wowmotty.blogspot.com/2011/06/jquery-tablesorter-missing-docs.html#cssChildRow)

另外，如果您有兴趣，我在[github上有一个](https://github.com/Mottie/tablesorter)[tablesorter 的分支，](http://mottie.github.com/tablesorter/docs/)它有很多增强功能和有用的小部件:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-29T14:49:42.273

对于 v2.4 及更高版本，有一个新的 css 类名可供使用。只需将“tablesorter-childRow”类添加到您的子行。有关详细示例，请参见[此处](https://mottie.github.io/tablesorter/docs/example-child-rows.html)。

# unit-testing - 单元测试 - 数据库和夹具

> ID：10769701
> 
> 赞同：9
> 
> 时间：2012-05-26T20:54:40.660
> 
> 标签：unit-testing, testing, mocking

我刚刚开始进行单元测试，由于与数据库的交互，我看不到一个简单的方法来做很多测试用例。

是否有用于单元测试的标准方法/过程，其中需要数据库访问（读取和写入）才能断言测试？

到目前为止，我能想到的最好的方法是使用一个配置文件来使用不同的数据库连接引导我的应用程序，然后使用启动方法将实时数据库复制到一个单独用于测试的数据库？

我接近了吗？或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-26T20:55:55.760

您的业​​务逻辑不应直接与数据库交互。相反，它应该通过一个数据访问层，您可以在单元测试的上下文中对其进行伪造和模拟。查看模拟框架为您进行模拟。您的测试根本不应该依赖于数据库。相反，您应该明确指定从数据访问层返回的数据，然后确保您的业务逻辑正确处理该信息。

测试该程序是否与附加的数据库一起工作更像是一种集成测试，并且这些测试有很多与之相关的成本。它们速度较慢（因此每次编译时都更难运行它们），并且更复杂（因此它们需要更多时间和精力来维护）。如果您可以进行更简单的单元测试，我建议您先这样做。稍后您可以添加也可能使用数据库的集成测试，但您将从首先添加更简单的单元测试中获得最大价值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T21:10:59.907

就单元测试而言，我认为在实践中对你有用的都是可行的方法。单元测试给你一些价值并提高你的系统质量以及你开发和维护它的能力是很重要的。

我建议您可能不想将实时数据库复制到您的测试数据库。可能无法保证您的实时数据库将包含合适的数据，这些数据将使您的单元测试始终如一地运行。单元测试应该测试您的代码是否有效，他们不应该测试实时数据库是否恰好包含导致它们通过的合适数据，因为当它处于实时状态时，您的用户可能会更改它的内容，以便您的测试失败.

您的单元测试代码本身可能应该用模拟您要为其编写单元测试的场景所需的数据填充您的测试数据库。几年前，我搞砸了一些 ruby​​ on rails 代码；测试框架将有一个测试类，它使用一些假数据设置数据库，然后将编写该类中的多个测试方法以针对该数据运行，而拆卸方法将擦除数据库中的数据。因此，不同的测试类（或者有时人们称它们为夹具）将针对特定的数据设置运行，这意味着您可以针对相同的数据设置运行多个测试，而不是为您想要运行的每个测试用例创建它。为每个测试设置数据最终可能会导致您的测试运行缓慢，以至于您厌倦了等待它们运行并停止打扰它们。

# java - 在 Java 上获取 CAS cookie

> ID：10769703
> 
> 赞同：1
> 
> 时间：2012-05-26T20:55:32.677
> 
> 标签：java, cookies, session-cookies, cas

我正在尝试使用基于 CAS 身份验证的 Web 对我的 Java 应用程序进行身份验证。到目前为止我所了解的是我需要处理 cookie。我从登录表单 HTML 页面中检索了 cookie，它向我发送了一个`JSESSION`cookie。使用 POST 提交检索此 cookie 的值。

我的问题是，在提交之后，我得到了一个“成功登录”的 HTML 作为响应，但我不知道如何获取 CASTGT cookie。我需要它来访问网络上的服务（内联网，具体而言）。

此外，在浏览器中，登录后，我看到来自提供登录表单的域的两个 cookie（JSESSION 和 CASTGT），以及来自提供 Intranet 的域的另一个 JESSION cookie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T23:07:06.390

您根本不需要直接处理 cookie。只要您在 Web 应用程序的 web.xml 文件中声明了 AuthenticationFilter 和 ValidationFilter 实例，您就可以通过 CAS Java 客户端 API 与您的 CAS Server 实例进行交互。

有关更多信息，请参阅*[在 web.xml 中为 Java 配置 JA-SIG CAS 客户端](https://wiki.jasig.org/display/CASC/Configuring+the+JA-SIG+CAS+Client+for+Java+in+the+web.xml)*。

# php - 缩短数据库存储的 sha1 哈希以供以后检索？

> ID：10769719
> 
> 赞同：1
> 
> 时间：2012-05-26T20:58:06.440
> 
> 标签：php, sha

有没有办法可以缩短 sha1 哈希以存储在数据库中，然后在检索时对其执行取消缩短功能以显示原始内容？

我不确定这是否可行，我的 sha1 哈希目前有 40 个字符长。

谢谢

# java - Java 文件访问

> ID：10769720
> 
> 赞同：0
> 
> 时间：2012-05-26T20:58:15.890
> 
> 标签：java

目前，在我的 java 程序中，我正在访问项目文件夹中的一个文件。当我加载文件时，它的路径是“./src/package/package/file.txt”。当我将程序构建为可执行文件时，它不起作用。

我希望这些文件位于 .jar 之外，但在同一个文件夹中，我将如何解决这个问题？

萨米沙尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:59:16.370

如果它们在同一个文件夹中，您可以使用[相对路径](http://www.java2s.com/Tutorial/Java/0180__File/Absolutepathandrelativepath.htm)，例如`./file.txt`. 即使使用已编译的 JAR，这也应该继续存在。

否则，如果您要使用同一台机器并且对文件的放置有信心，您*可以*使用绝对路径，但我不推荐它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:10:00.127

您可以`Class.getResourceAsStream`使用`InputStream`. 它也适用于 jar 包。无法`File`直接使用 API 访问 jar 文件中的文件。

```
InputStream ins = Class.getResourceAsStream("/gigadot/exp/resource.properties"); 
```

更多详细信息，请访问[http://blog.gigadot.net/2010/10/loading-classpath-resources.html](http://blog.gigadot.net/2010/10/loading-classpath-resources.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T05:49:53.830

因为相对路径是相对于执行程序时命令提示符所在的位置，而不是程序所在的位置。

您需要以某种方式告诉程序在哪里可以找到资源。大多数人使用 .sh/.bat 脚本来确定脚本本身所在的位置，然后传递 -D 标志或根据该位置设置类路径。

作为说明，I $0 为您提供在 linux 命令行上运行的脚本（它可以是相对的或绝对的），您可以从那里使用 dirname 找到它的目录，并更改 java 命令行。

在 Windows 中 %~dp0 为您提供运行的批处理脚本的目录，您可以使用它来形成您的 java 命令行。

# ios - 为 iPad iOS 5.1.1 开发的先决条件？

> ID：10769721
> 
> 赞同：1
> 
> 时间：2012-05-26T20:58:21.443
> 
> 标签：ios, xcode, ipad

似乎每次我通过需要更新的 mac OS 或设备 iOS 时，我总是非常沮丧，以至于完全放弃 iphone/ipad 开发。

我最近刚买了一个 ipad2 (iOS 5.1.1)。我注意到我的旧 Xcode 4 不支持这个 iOS 版本。所以现在我刚刚升级到 XCode 4.2。但现在我仍然需要将 iPad2 iOS 降级到 5.0（不幸的是）。现在如果我想为 iOS 5.1 开发，那么我必须升级到 XCode 4.3.2，这意味着我还需要将我的操作系统升级到 Lion（我目前有 Snow Leopard）。

我相信这些是我能够理顺的先决条件。如果我错了，请纠正我。

最后，如果我在这里的评估是正确的，那么我确实需要下载 iOS 5.0 固件。我在苹果网站上的任何地方都找不到指向这个的链接（一切都适用于 5.1）。有人知道我在哪里可以获得旧iOS的下载链接吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T21:04:16.293

当您转到您的 Xcode 管理器时，您可以连接您的 iPad 并选择与您的设备一起出现在管理器中的“用于开发”按钮吗？

如果答案是“是”，那么您可以针对 iOS 4 进行开发，然后在运行 OS 5.1.1 的 iPad 上进行测试。

如果答案是“否”，那么您应该将您的 Macintosh 更新为 Lion，并将您的 Xcode 更新为 4.3.X（其中将包括 iOS 5.0 和 5.1 SDK）。

如果您想将您的 iPad“降级”到 iOS 5.0（祝您好运），[您可以在本文中找到下载链接](http://www.redmondpie.com/download-5.0.1-ios-9a406-for-iphone-4s-direct-link/)。

但不要压力太大。一旦你习惯了开发，你就可以很容易地跟上时代的步伐（以及频繁的 OS 和 Xcode 更新）。

# android - 尝试制作一个自定义 CursorAdapter，在放入 ListView 之前将 UnixTime 转换为可读的东西

> ID：10769722
> 
> 赞同：0
> 
> 时间：2012-05-26T20:58:55.357
> 
> 标签：android, sqlite, custom-cursor

我正在尝试为我正在写的东西制作一个自定义的 CursorAdapter。我正在做的计划涉及一个 SQLite 数据库，其中包含警报响起的日期和时间。（因为 SQLite 实际上没有 DATETIME 数据类型，所以它们都只是在存储为 INT 之前转换为 Unix 时间。）我找到[了这个](http://blog.cluepusher.dk/2009/11/16/creating-a-custom-cursoradapter-for-android/)制作自定义游标适配器的示例，并尝试对其进行调整，以便它可以接受Unix 时间条目并将它们转换为人类可读的内容。不过，我遇到了一些障碍。我不确定我所拥有的是否就是我需要的。这是我到目前为止所得到的：

```
import java.util.GregorianCalendar;

import android.content.Context;
import android.database.Cursor;
import android.support.v4.widget.SimpleCursorAdapter;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Filterable;
import android.widget.TextView;

/**
 * @author Dave Smith
 *
 */
public class DateTimeCursorAdapter extends SimpleCursorAdapter implements Filterable {

    private Context context;
    private int layout;

    /**
     * @param context
     * @param layout
     * @param c
     * @param from
     * @param to
     * @param flags
     */
    public DateTimeCursorAdapter(Context context, int layout, Cursor c,
            String[] from, int[] to, int flags) {
        super(context, layout, c, from, to, flags);
        this.context = context;
        this.layout = layout;
    }
    public View newView(Context context, Cursor cursor, ViewGroup parent){
        Cursor c = getCursor();
        final LayoutInflater inflater = LayoutInflater.from(context);
        View v = inflater.inflate(layout, parent, false);
        /*int nameCol = c.getColumnIndexOrThrow("ALARMS.DATETIME");
        String dateTime = c.getString(nameCol);
        dateTime = convertFromUnixTime(Long.parseLong(dateTime)).toString();
        TextView dateTimeText = (TextView) v.findViewById(R.id.dateandtime);
        if (dateTimeText != null){
            dateTimeText.setText(dateTime);
        }*/
        return v;       
    }
    public void bindView(Context context, Cursor c, View v){
        int nameCol = c.getColumnIndexOrThrow("ALARMS.DATETIME");
        String dateTime = c.getString(nameCol);
        dateTime = convertFromUnixTime(Long.parseLong(dateTime)).toString();
        TextView dateTimeText = (TextView) v.findViewById(R.id.dateandtime);
        if (dateTimeText != null){
            dateTimeText.setText(dateTime);
        }
    }
    private GregorianCalendar convertFromUnixTime(long unixTime)
    {
        GregorianCalendar cal = new GregorianCalendar();
    cal.setTimeInMillis(unixTime);
    return cal;
    }

} 
```

这是否允许我从我的数据库中读取所有各种 UnixTime 条目并将它们以 MM/DD/YYYY HH:MM 格式（或当前语言环境接受的任何格式）输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:15:16.503

无需自定义适配器。使数据库为您工作。

从文档：

" 1.2 日期和时间数据类型

SQLite 没有为存储日期和/或时间预留存储类。相反，SQLite 的内置日期和时间函数能够将日期和时间存储为 TEXT、REAL 或 INTEGER 值：

TEXT 作为 ISO8601 字符串（“YYYY-MM-DD HH:MM:SS.SSS”）。REAL 作为儒略日数字，根据预测的公历，自公元前 4714 年 11 月 24 日格林威治中午以来的天数。INTEGER 作为 Unix 时间，自 1970-01-01 00:00:00 UTC 以来的秒数。

应用程序可以选择以任何这些格式存储日期和时间，并**使用内置的日期和时间函数在格式之间自由转换。**"

* * *

使用适当的 SQLite 函数在日期/时间进入光标之前对其进行转换。

# c - 如何用c将10位数据存储到8位数组中？

> ID：10769727
> 
> 赞同：0
> 
> 时间：2012-05-26T20:59:39.320
> 
> 标签：c, algorithm

我有一些这样的数据：
0代表数据
x代表空
0000000000xxxxxx
10bit............6bit浪费

我想用下一个数据压缩它以节省空间。

我使用位移来做到这一点。

| 8位 | 2位 6位 | 4Bit 4Bit | 6位 2位 | 8位 |

到目前为止，我有：

```
#define mask1   (char)((Data & 0xFF00) >> 8);  //apply mask
#define mask2   (char)((Data & 0x00C0) >> 6);
#define mask3   (char)((Data & 0xFC00) >> 10); 
#define mask4   (char)((Data & 0x03C0) >> 6);
#define mask5   (char)((Data & 0xF000) >> 12); 
#define mask6   (char)((Data & 0x0FC0) >> 6);
#define mask7   (char)((Data & 0xC000) >> 14); 
#define mask8   (char)((Data & 0x3FC0) >> 6);

switch (counter) {     //repeat after 4 times
    case 0:
         array[i++] = mask1;
         array[i]   = mask2;
         counter++;
         break; 

    case 1:
         array[i++]| = (mask3);
         array[i]    = (mask4);
         counter++;
         break;

    case 2:
         array[i++]| = mask5;
         array[i]    = mask6;
         counter++;
         break; 

    case 3:
         array[i++]| = mask7;
         array[i++]  = mask8;
         counter=0;
         break;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-08-03T20:42:23.117

一个应该起作用的技巧是转换数组，并移动数组指针。如果我绘制这个更好地解释：

```
oooooooooo_____
        __oooooooooo____
                ____oooooooooo__
                        ______oooooooooo
                             >>>|<<<
                                        oooooooooo______ 
```

因此，如果我们要实现上述想法，我们会得到如下所示的代码：

```
void convert(char* array, int arraySz, tenbitData* Data, int dataSz)
{
    char* arrPtr = array;
    int dataIdx = 0;
    int rollCnt = 0;

    for (int i = 0; i < dataSz; i++)
    {
        ushort dat = dataSz[i] << 6 - ((i % 4) * 2);
        ushort* ariPtr = (ushort*) arrPtr;
        ariPtr[0] |= dat;
        arrPtr += ((i % 4) == 3 ? 2 : 1;
    }
} 
```

# java - Java中的文件传输和对象序列化

> ID：10769730
> 
> 赞同：0
> 
> 时间：2012-05-26T21:00:19.073
> 
> 标签：java, android, sockets, network-programming

我正在开发一个客户端/服务器聊天应用程序，它允许用户通过套接字连接发送文件（图像/视频......）。

为了管理所有类型的通信，我使用一个对象“数据包”来存储我想要发送的所有信息。（发件人，收件人，文件......）。

这是我在流中编写的代码示例：

```
private void write(Packet packet) throws IOException {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ObjectOutputStream os = new ObjectOutputStream(bos);
    os.writeObject(packet);
    this.outStream.write(bos.toByteArray());
} 
```

而outStream 是一个OutputStream。

这是我的连接运行：

```
public void run() {
    while (isRunning()) {
        try {
            byte[] buffer = new byte[65536];
            // Read from the InputStream
            inStream.read(buffer);
            ObjectInputStream in = new ObjectInputStream(new ByteArrayInputStream(buffer));
            Packet p = (Packet) in.readObject();

        } catch (IOException e) {
            e.printStackTrace();
            this.disconnect();
        }
    }
} 
```

除了文件传输之外，它适用于所有目的！我将文件放在一个 byte[]（带有文件流）中，并将数组存储在我的数据包对象中。当服务器接收到通信时，它会在“in.readObject()”上中断，并给我一个漂亮的“java io streamcorruptedexception wrong format: 0”异常。

我尝试使用自定义 byte[]（由 string.getBytes() 填充）进行传输，效果非常好。

那么，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T21:08:21.470

您正在从 InputStream 读取字节数组（任意大小可能太小）。然后你构造一个 ObjectInputStream 来读取这个字节数组。为什么不直接从 InputStream 中读取对象？

```
ObjectInputStream in = new ObjectInputStream(inStream);
Packet p = (Packet) in.readObject(); 
```

不需要缓冲区。

此外，InputStream.read() 不会从 InputStream 中读取所有内容。它读取可用的内容，并返回读取的字节数。如果您在返回 -1 之前不循环，那么您只会读取另一端发送的部分内容。

顺便说一句，您在发送方犯了同样的错误。不是将对象直接写入输出流，而是将其写入字节数组，然后发送此字节数组。将您的对象直接写入流：

```
ObjectOutputStream os = new ObjectOutputStream(this.outputStream);
os.writeObject(packet); 
```

不需要缓冲区。

# javascript - 显示/隐藏效果

> ID：10769731
> 
> 赞同：0
> 
> 时间：2012-05-26T21:00:33.283
> 
> 标签：javascript, jquery

我有一个小博客，其中包含一些用于共享的社交按钮，这些按钮已集成到我的主题中。

现在我想更改显示/隐藏，使其默认显示并在单击时隐藏。

```
$(document).ready(function() {
    $(".post-share").hide();
    $("a.share-btn").click(function() {
        $(this).prev(".post-share").slideToggle("slow");
    });
}); 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T21:05:28.430

```
$(document).ready(function() {
  $(".post-share").show();
  $("a.share-btn").click(function() {
    $(this).prev(".post-share").slideToggle("slow");
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:04:55.157

将dom更改为`hide`准备就绪`show`

```
 $(document).ready(function() {
    $(".post-share").show();
    $("a.share-btn").click(function() {
       $(this).prev(".post-share").slideToggle("slow");
    });

 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T21:06:02.500

如果您希望它默认显示，然后在单击时隐藏...

```
$(document).ready(function() {
    $(".post-share").show();
    $("a.share-btn").click(function() {
        $(this).prev(".post-share").slideUp("slow");
    });
}); 
```

# mysql - myisam表上的外键替代品？

> ID：10769732
> 
> 赞同：5
> 
> 时间：2012-05-26T21:00:35.593
> 
> 标签：mysql, sql

我正在一个需要使用外键的网站上工作，但我已经四处搜索，共享主机不支持 innoDB。我正在使用 MyISAM 引擎。是否有使用外键的替代方法？

我需要的：

```
table_image {
image_id (PK) 
}

table_ratings {
rating_id(PK) 
image_id(FK) 
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T22:38:27.850

在我幸运地自己切换到 innoDb 之前，我一直在苦苦挣扎。

我已经用一堆在线/批处理脚本实现了所有的插入/删除级联逻辑......

但实际上可能没问题，因为在一些非常特殊的情况下，您可以断开级联操作，这对于性能而言并不总是一个坏主意。

rgds。

# node.js - 如何在 Nodejs 中对 http get 请求进行排队以控制它们的速率？

> ID：10769736
> 
> 赞同：12
> 
> 时间：2012-05-26T21:00:50.300
> 
> 标签：node.js

我有一个 NodeJS 应用程序，它从代码中的各个位置发送 HTTP 获取请求，有些甚至是依赖的（发送请求，等待回复，处理它并根据结果发送另一个请求）。我需要限制请求的速率（例如，每小时 10 个请求）。

我考虑过将请求排队，然后在某个中心点以受控方式释放它们，但在如何对回调函数及其相关参数进行排队时陷入困境。

很高兴听到有关如何以最少的应用程序重组来克服这种情况的建议。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T21:25:37.733

我想你已经回答了你的问题。可以限制您的请求的中央队列是要走的路。这里唯一的问题是队列必须具有请求的完整信息和应该使用的回调。我会将其抽象为一个`QueueableRequest`看起来像这样的对象：

```
var QueueableRequest = function(url, params, httpMethod, success, failure){
  this.url = url;
  this.params = params;
  ...

}
//Then you can queue your request with

queue.add(new QueueableRequest({
  "api.test.com",
  {"test": 1},
  "GET",
  function(data){ console.log('success');},
  function(err){ console.log('error');}
})); 
```

当然，这只是示例代码，可能会更漂亮，但我希望你能明白。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T14:36:07.523

[Async](http://github.com/caolan/async)模块有许多可以帮助您的控制流选项。`queue`听起来很合适，您可以在其中限制并发性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T21:14:45.290

我会使用[Deferreds](https://www.npmjs.com/search?q=deferred)并为每个排队的请求返回一个。然后，您可以在延迟承诺排队后将成功/失败回调添加到延迟承诺。

```
var deferred = queue.add('http://example.com/something');
deferred.fail(function(error) { /* handle failure */ });
deferred.done(function(response) { /* handle response */ }); 
```

`[ url, deferred ]`您可以在队列中保留一对，并且每次将 URL 出列时，您还将拥有与之配套的 Deferred，您可以在处理请求后解决或失败。

# asp.net-mvc-3 - 无法添加从其他类继承的模型控制器

> ID：10769740
> 
> 赞同：4
> 
> 时间：2012-05-26T21:01:37.790
> 
> 标签：asp.net-mvc-3, entity-framework, inheritance

我正在使用实体框架和 MVC3，我的问题是，如果模型从另一个类继承，我将无法搭建控制器。

例子：

```
public class Person
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public class User : Person
{
    public string Email { get; set; }
    public string Password { get; set; }
}

public class Context : DbContext
{
    public DbSet<Person> PersonSet { get; set; }
} 
```

当我尝试`User`使用模板添加控制器时，`Controller with read/write actions and views, using Entity Framework`出现此错误：

> 'User' 不是指定的 'Context' 类的一部分，并且无法修改 'Context' 类以向其添加 'DbSet' 属性。（例如，“上下文”类可能在已编译的程序集中。）

我可以补充`public DbSet<User> UserSet { get; set; }`，`Context`但我认为这不是正确的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:33:23.993

目前您`User`不是持久化类型，因为上下文不知道该类型，因此您不能使用持久化实体类型的脚手架来为`User`类型创建控制器。如果您想`User`在数据库中存储及其属性，请将其添加到您的上下文中：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<User>();
} 
```

如果您不想持久 `User`保存到数据库，则不能使用脚手架创建控制器。

# c++ - 从 C++ 中的整数集合中确定第三个四分位数？

> ID：10769743
> 
> 赞同：3
> 
> 时间：2012-05-26T21:02:09.553
> 
> 标签：c++, math, vector, number-sequence

我正在阅读加速 C++。目前我在第 3 章的末尾，这是我正在尝试做的练习：

**“编写一个程序来计算和打印一组整数的四分位数。”**

我找到了第一个和第二个四分位数，但我不知道如何找到第三个。这是我的代码：

```
 #include <algorithm>
 #include <iostream>
 #include <vector>
 using namespace std;

 int main(){
    cout<<"Enter numbers:";
    int x;
    vector<int>integers;
    while(cin>>x)
        integers.push_back(x);

    typedef vector<int>::size_type vec_sz;
    vec_sz size = integers.size();
    sort(integers.begin(), integers.end());
    vec_sz mid = size/2;
    vec_sz q1 = mid/2;
    double median;
    median = size % 2 == 0 ? ((double)integers[mid] + (double)integers[mid-1]) / 2
: integers[mid];
    double quartOne = ((double)integers[q1] + (double)integers[q1-1])/2; 
    cout<<"The First Quartile is: "<<quartOne<<endl;
    cout<<"The Second Quartile is: "<<median<<endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T21:17:35.783

一种方法是对集合进行排序，然后取出 3 个划分项：

```
vector<int> v = ...;
sort(v.begin(), v.end());
int q12 = v[v.size()*1/4];
int q23 = v[v.size()*2/4];
int q34 = v[v.size()*3/4]; 
```

这是数据项数量的 O(nlogn)。

另一种方法是分别对三个分区的数据执行二进制搜索。即提出一个初始的q12，通过传递数据检查它是否正确，如果不正确将其向上或向下调整一半，然后重复。对 q23 和 q34 做同样的事情。

这在技术上是 O(n)，因为 32 位 int 具有固定范围，并且最多可以在 32 次中进行二进制搜索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T21:59:44.267

此解决方案实现了 wikipedia 中描述的用于计算[四分位数](http://en.wikipedia.org/wiki/Quartile)的第二种方法。它为奇数和偶数长度的向量提供正确的值。

```
#include <vector>
#include <tuple>
#include <iostream>
using namespace std;

double median(vector<double>::const_iterator begin,
              vector<double>::const_iterator end) {
    int len = end - begin;
    auto it = begin + len / 2;
    double m = *it;
    if ((len % 2) == 0) m = (m + *(--it)) / 2;
    return m;
}

tuple<double, double, double> quartiles(const vector<double>& v) {
    auto it_second_half = v.cbegin() + v.size() / 2;
    auto it_first_half = it_second_half;
    if ((v.size() % 2) == 0) --it_first_half;

    double q1 = median(v.begin(), it_first_half);
    double q2 = median(v.begin(), v.end());
    double q3 = median(it_second_half, v.end());
    return make_tuple(q1, q2, q3);
}

int main() {
    vector<double> v = {2, 2, 3, 4, 4, 5, 5, 10};
    auto q = quartiles(v);
    cout << get<0>(q) << "," << get<1>(q) << "," << get<2>(q) << endl;
    return 0;
} 
```

它是为实数设计的，但它很容易适应整数值（只需将值四舍五入到最接近的整数）。

# xcode - 如何将文本字段中的双精度添加到 NSMutableArray xcode

> ID：10769744
> 
> 赞同：0
> 
> 时间：2012-05-26T21:02:12.053
> 
> 标签：xcode, nsmutablearray, double, add, textfield

感谢所有帮助解决问题的人。:)

出于某种原因，这对我不起作用，请帮助

`array = [[NSMutableArray alloc] init];
inputted = [input.text doubleValue];
[array addObject:[NSNumber numberWithDouble:inputted]];
NSLog(@"%i",array.count);`

其中 array 是一个 NSMutableArray， inputted 是一个 double 并且 input 是一个文本字段所有发生的事情是保存但删除最后输入的一个。我如何制作它以保存输入的所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:13:46.220

每次执行函数时，您总是在重新创建和重新初始化“ `array`”可变数组，因此难怪您会得到“1”（数组中的一个对象）的结果。

如果您将数组初始化一次且仅一次，并将其*移出*并远离该代码的其余部分（即移至不同的函数或其他），那么您将向可变数组添加其他对象，您将看到计数增量每次将对象添加到可变数组时。

说得通？

# c# - 如何在数据库中插入字典类型的变量

> ID：10769745
> 
> 赞同：-2
> 
> 时间：2012-05-26T21:02:13.187
> 
> 标签：c#, sql, dictionary

我想插入一些类型的值。 我有 4 个循环，我想在**var dict**`var dict = new Dictionary<string, int>();`的变量旁边插入另一个值 这是我的代码

 **```
 var dict = new Dictionary<string, int>();
                    foreach (string word in wordsbeforesoundex)
                    {

                        if (word == null)
                        {
                            continue;
                        }
                        if (word.Trim() != "")
                        {
                            if (dict.ContainsKey(word))
                            {
                                dict[word]++;
                            }
                            else
                            {
                                dict[word] = 1;
                            }
                        }

                    }
    for (int l = 0; l < words.Length; l++)
    {
        con.Open();

        SqlCommand cmd = new SqlCommand("INSERT INTO TableFFF (Frequency) VALUES (@dict_idx)", con);

        cmd.Parameters.Add(new SqlParameter("@dict_idx", dict[wordsbeforesoundex[l]]));

        cmd.ExecuteNonQuery();
        con.Close();
    } 
```

我的问题是如何获取字典中的数据并将其插入数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T22:10:49.283

您将需要有两列，一列用于字典键（单词），另一列用于字典值（频率）

```
foreach(var pair in dict)
{
    con.Open();

    SqlCommand cmd = new SqlCommand("INSERT INTO TableFFF (Word, Frequency) VALUES (@word, @freq)", con);

    cmd.Parameters.Add(new SqlParameter("@word", pair.Key);
    cmd.Parameters.Add(new SqlParameter("@freq", pair.Value);

    cmd.ExecuteNonQuery();
    con.Close();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-27T02:08:54.363

您需要使用 FOR 循环而不是 foreach .. 传递正确的值，您需要 for 循环并将 pair.key 更改为 pair[for loop index].key

```
using (SqlCommand cmd = new SqlCommand("INSERT INTO TableFFF (Word, Frequency) VALUES (@word, @freq)", con))
{
    con.Open();
    for (int i = 0; i < dict.Count; i++)
   {   
      cmd.Parameters.Add(new SqlParameter("@word", pair[i].Key);
      cmd.Parameters.Add(new SqlParameter("@freq", pair[i].Value);

      cmd.ExecuteNonQuery();

    }
} 
```

使用**using**，连接将在完成后自动处理**

# c++ - Clang++ 非静态数据成员初始化错误？C++11

> ID：10769746
> 
> 赞同：2
> 
> 时间：2012-05-26T21:02:13.247
> 
> 标签：c++, c++11, clang, libc++, member-initialization

我似乎无法弄清楚 Clang 在说什么，或者它是否正确，因为 G++-4.7 似乎可以很好地编译它。

该错误来自尝试`std::uniform_int_distribution`使用大括号为非静态成员初始化。

以下失败（`token_count`是模板参数）： `std::uniform_int_distribution<Int> random_dist{0, token_count-1};`

出现错误：

```
error: chosen constructor is explicit in copy-initialization
  std::uniform_int_distribution<Int> random_dist{0, b-1};
                                                ^~~~~~~~

/usr/include/c++/v1/algorithm:2644:14: note: constructor declared here
    explicit uniform_int_distribution(result_type __a = 0, 
```

但是，我可以通过这样做来初始化它：

`std::uniform_int_distribution<Int> random_dist = std::uniform_int_distribution<Int>(0, token_count - 1);`

我正在使用以下命令来编译它：`clang++ -std=c++11 -stdlib=libc++ -lc++abi`使用 Clang-3.2。

输出`clang -v`：

```
clang version 3.2 (trunk 157320)
Target: x86_64-unknown-linux-gnu
Thread model: posix 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:36:38.230

您可能有一个尚未实现通用初始值设定项的 clang 版本。Tip-of-trunk clang 编译你的代码。您可以通过以下方式检查此功能：

```
#if __has_feature(cxx_generalized_initializers) 
```

以下是您可以检查的功能列表：

[http://clang.llvm.org/docs/LanguageExtensions.html#cxx11](http://clang.llvm.org/docs/LanguageExtensions.html#cxx11)

# iphone - 在 iOS 中存储日常数据

> ID：10769747
> 
> 赞同：0
> 
> 时间：2012-05-26T21:02:19.863
> 
> 标签：iphone, objective-c, ios, xcode, tracking

所以我知道 .plist 和 archives 以及 SQLLite 作为在应用程序中存储持久数据的方法，但是，我一直在试图弄清楚如何存储用户日常活动中的数据以便它可以显示在图形。例如，如果用户一天走了 1 英里，第二天走了 3 英里，那么人们如何知道今天什么时候，下一天什么时候？

我能想到的最好的办法是存储当前日期，然后在用户下次执行操作时，检查存储的日期是否与当前日期相同，如果不是，则将数据保存为不同的日期。

有没有人有更好的想法或有处理这个问题的标准方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:17:13.833

我会使用带有时间戳列的 SQLLite DB，指示何时写入条目。使用 NSDateComponents，您可以稍后确定条目是在哪一天添加的。

当您在时间戳列上创建索引时，您的查询将非常快，这对于绘制图表来说是完美的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:18:18.330

使用 NSDate 是一个非常好的方法。无论如何，您可能需要图表的日期，或者？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T21:20:45.520

SQLLite 仍然是一个很好的方法。只是不要把它当作一个平面文件。
SQLLite 支持时间戳。每次输入数据时，您都可以将该标记添加到该字段。运行一个简单的 SQL 查询将为您提供可用于图表的格式的数据。您还可以查询数据库以查看当前数据是什么或自上次输入数据以来已有多长时间。

阅读此页面以获得一些提示： [http ://www.sqlite.org/lang_datefunc.html](http://www.sqlite.org/lang_datefunc.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T04:03:34.290

如果您为此询问正确的数据结构，只需将您的数据和时间戳存储在一个数组中。下次更新时，检查数组中最后一个对象的时间戳，看看数据是否发生了变化。如果是，请添加一个新条目。

要坚持这一点，只需将此数组保存到 PList 中。由于它不是很多数据 PList 不会是一个坏主意。

# java - 使用归并排序与选择排序的比较

> ID：10769749
> 
> 赞同：1
> 
> 时间：2012-05-26T21:02:56.183
> 
> 标签：java, sorting, merge

我有一个 10 个 int 的数组，使用选择排序我计算出大约需要 45 次比较才能对整个数组进行排序，但我不确定使用合并排序需要多少次才能通过我的计算进行排序，它需要 12 次比较...... . 我在这里是对还是错？

提前致谢

这是合并方法

```
static void merge(int[] first, int[] second, int[] a)
    {
        int iFirst = 0;
        int iSecond = 0;
        int i = 0; 
        //moving the smaller element into a
        while(iFirst < first.length && iSecond < second.length)
        {
            if(first[iFirst] < second[iSecond])
            {
                a[i] = first[iFirst];
                iFirst++;
            }
            else
            {
                a[i] = second[iSecond];
                iSecond++;
            } 
            i++;             
        }
        counter += i;

        //copying the remaning of the first array
        while(iFirst < first.length)
        {
            a[i] = first[iFirst];
            iFirst++; i++;
        }
        //copying the remaining of second array
        while(iSecond < second.length)
        {
            a[i] = second[iSecond];
            iSecond++; i++;
        }        
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T21:10:29.323

要将`n`-element 数组与`m`-element 数组合并，您需要`n+m-1`在最坏的情况下（`min{m,n}`最好的情况下）进行比较。

因此，当您将 10 元素数组一分为二时，顶层合并最多需要 9 次比较。两个 5 元素半部分每个需要最多 4 次比较，使得`9 + 2*4 = 17`. 将 5 元素的一半拆分为 2 元素和 3 元素的部分需要最多 1 + 3 次比较，因此最坏的情况总共将是 25 次比较 (9 + 2*4 + 2*3 + 2*1)。

```
 10(9)                             9
               /     \
              /       \
             /         \
            /           \
           /             \
          /               \
         /                 \
        5(4)               5(4)                   8
       /   \              /   \
      /     \            /     \
    3(2)     2(1)      3(2)     2(1)              6
   /   \    /   \     /   \    /   \
  2(1)  1  1     1   2(1)  1  1     1             2
 /   \              /   \
1     1            1     1 
```

# json - 在 Playframework Scala 中列出 Json

> ID：10769751
> 
> 赞同：4
> 
> 时间：2012-05-26T21:03:24.283
> 
> 标签：json, scala, playframework, scala-2.10, playframework-2.2

我是 scala 和 playframework 的新手，但到目前为止它很棒。我无法弄清楚如何将数据列表转换为 json（或任何复杂的结构）。这不是一个真实的例子，但这是我想要做的。从数据库中获取一些数据。

```
scala> val result:List[(Long,String)] = DB.withConnection { implicit c => 
    SQL("select * from users").as(
     long("id")~str("uid") map(flatten)*)
  }
 result: List[(Long, String)] = List((3,397a73ee5150429786863db144341bb3), (4,2850760dc9024c16bea6c8c65f409821), (5,636ee2bf758e4f699f27890ac55d7db2)) 
```

我希望能够将其转换为 json 并返回。基于this doc，看起来我需要遍历并在结果上调用 toJson

[http://www.playframework.org/documentation/2.0/ScalaJson](http://www.playframework.org/documentation/2.0/ScalaJson)

但是，在实践中我很难做到这一点。这甚至是正确的方法吗？是否有一些 scala 概念可以使这变得简单？我看到了一些使用案例类的示例，但我还没有完全理解这个概念。

我真的不希望这会起作用，但是，我想我在概念上正在尝试做这样的事情

```
scala> toJson(Map("response" -> result))
<console>:27: error: No Json deserializer found for type     scala.collection.immutable.Map[java.lang.String,List[(Long, String)]]. Try to implement an     implicit Writes or Format for this type.
          toJson(Map("response" -> result)) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T10:16:03.113

如前所述，您可以编写自己的隐式写入来执行此操作，但您也可以依赖现有的写入并将您的数据检索为 a`List[Map[String, Any]]`并应用 toJson ：

```
val simple = {
    get[Pk[Long]]("user.id") ~
    get[Long]("user.uid") map {
        case id~uid => Map("id" -> id.get.toString, "uid" -> uid.toString)
    }
}
val result:List[Map(String,String)] = DB.withConnection { implicit c => 
    SQL("select * from users").as(User.simple *)
} 
```

# django - Django：我如何编辑/更新模型？

> ID：10769764
> 
> 赞同：0
> 
> 时间：2012-05-26T21:05:11.860
> 
> 标签：django

啊。大家好，我有一个简单的 django 问题：

啊，对不起，我已经读了又读了，我*确信*这在某个地方非常明显，但我还没有找到它！

如何使用 django 编辑/更新模型？比如，数据值？不是模型字段？

这是我的代码！（我正在使用自制版本的东西！）

这是网址：

```
url(r'^editStory/(?P<id>\d+)$',
    StoryModelView.as_view(
        context_object_name='form',
        template_name ='stories/editStory.html',
        success_template= 'stories/editStorySuccess.html'
    ),
    {},
    'editStory'
), 
```

这是视图：

```
def get(self,request,id=None):
    form = self.getForm(request,id)
    return self.renderValidations(form)

def getForm(self, request,id):
    if id:
        return self.getModelById(request,id)
    return StoryForm()

def getModelById(self,request,id):
    theStory = get_object_or_404(Story, pk=id)
    if theStory.user != request.user:
        raise HttpResponseForbidden()
    return StoryForm(theStory)

def renderValidations(self,form):
    if self.context_object_name:
        contextName = self.context_object_name
    else:
        contextName = 'form'
    if self.template_name:
        return render_to_response(self.template_name,{contextName:form})
    else :
        return render_to_response('stories/addStory.html',{contextName:form})

def getPostForm(self,request,id):
    if id:
        theStory = self.idHelper(request,id)
        return StoryForm(request.POST,theStory)
    return StoryForm(request.POST)

def processForm(self,form,request):
    theStory = form.save(commit=False)
    theStory.user = request.user
    return theStory 
```

这是模板代码：

```
{% block content %}
    <h3>Edit story</h3>
    <form action="" method="post">
        {%  csrf_token %}
        {%  for field in form %}
            <div class="fieldWrapper">
                {{ field.errors }}
                {{ field.label_tag }} {{ field }}
            </div>
        {% endfor %}
        <input type="submit" value="Submit"/>
    </form>
{% endblock %} 
```

尽我所能，我要么：

1.  得到一个错误
2.  一无所获

我收到显示的代码错误，由这一行引起

> ```
>  {% for field in form %} 
> ```

并有以下错误：

```
Caught AttributeError while rendering: 'Story' object has no attribute 'get' 
```

或者我什么也得不到——根本没有数据——如果我将“getModelById”方法更改为：

```
def getModelById(self,request,id):
    theStory = get_object_or_404(StoryForm, pk=id)
    if theStory.user != request.user:
        raise HttpResponseForbidden()
    return theStory 
```

StoryForm 是那些“ModelForm”事物之一，它的模型是“Story”。

所以！问题：

如何修复此代码以使其正常工作？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:08:24.793

在不知道您的模型是什么样子的情况下，您是否正在寻找类似的东西

```
s = Story.objects.get(some criteria)
s.user = <some user>
s.save() 
```

?

对不起，我觉得你的问题有点含糊。

重读后，我突然想到一件事：

您不能在模型上进行查询（获取、过滤或任何变化）——您必须在对象管理器上进行，例如对象。

因此，如上所述，在您的情况下， Story.objects.get_object_or_404 应该可以解决您的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:09:42.490

您没有显示您的类继承自什么，但似乎您只是在使用标准的单对象显示视图。相反，您应该使用为此目的提供的[编辑 mixin之一。](https://docs.djangoproject.com/en/1.3/ref/class-based-views/#editing-mixins)

# c++ - 线程是标准 C++ 的一部分吗？

> ID：10769767
> 
> 赞同：2
> 
> 时间：2012-05-26T21:05:21.673
> 
> 标签：c++, multithreading, c++11

新 C++ 标准中是否有线程处理？如果我要编写多线程应用程序，这是否意味着应用程序将使用更多的 cpu 内核？（ 如果可供使用的话 ）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-26T21:06:37.010

> 新 C++ 标准中是否有线程处理？

是的，从**C++11**开始，有[`std::thread`](http://en.cppreference.com/w/cpp/thread/thread),`std::async`等等。

> 如果我要编写多线程应用程序，这是否意味着应用程序将使用更多的 cpu 内核？（ 如果可供使用的话 ）

仅当您正确使用它们时。

# javascript - 创建 Javascript 类的正确方法是什么？

> ID：10769772
> 
> 赞同：9
> 
> 时间：2012-05-26T21:05:33.750
> 
> 标签：javascript, oop, object

我试图弄清楚如何正确构建我的 Javascript 类（或单例对象）。

```
var obj = new Object();
obj.foo = 'bar';
obj.method = function() { ...}

var obj = {
    foo : 'bar',
    method : function() { ...}
}

var obj = function(){}
obj.prototype = {
    foo : 'bar',
    method: function() { ... }
} 
```

我希望能够设置几个属性并分配可用的方法。我还希望能够在对象上使用[mixins之类的东西，这样我就可以使用](http://javascriptweblog.wordpress.com/2011/05/31/a-fresh-look-at-javascript-mixins/)[events](https://github.com/jeromeetienne/microevent.js/blob/master/microevent.js)之类的东西来扩展这些对象。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T21:10:59.053

> 我试图弄清楚如何正确构建我的 Javascript 类（或单例对象）。

这些（“类”和单例对象）之间存在很大差异。您的前几个示例是一次性对象（单例）。您的第三个（最后一个）示例创建了一个*构造函数*，允许您创建多个共享同一原型的对象。我建议*增加*构造函数的`prototype`属性，而不是像你正在做的那样替换它，例如：

```
var Thingy = function() {   // Or use a function declaration rather than expression
    // Optional initialization code here
};
Thingy.prototype.foo = 'bar';
Thingy.prototype.method = function() {
    // Method code here
}; 
```

（按照惯例，构造函数以大写字母开头。）

您使用哪个（单例或构造函数）取决于您的需要。

从 ES2015（又名“ES6”）开始，它更简单，尽管没有用于定义非方法原型属性（您的`foo`）的新语法；[一旦这个提议](https://github.com/jeffmo/es-class-fields-and-static-properties)向前推进，可能会在 ES2017 或 ES2018 中出现，但在那之前：

```
class Thingy {
    constructor() {
        // Optional initialization code here
    }
    method() {
    // Method code here
    }
}
Thingy.prototype.foo = 'bar'; 
```

如果您需要进入继承层次结构，在旧的 ES5 语法中涉及到相当多的管道：

```
var Base = function() {
};
Base.prototype.method = function(arg1) {
    // ...
};

var Derived = function() {
    Base.call(this);
};
Derived.prototype = Object.create(Base.prototype);
Derived.prototype.constructor = Derived;
Derived.prototype.method = function(arg1) {
    // Using Base's `method`, if desired, is a bit ugly:
    Base.prototype.method.call(this, arg1);
}; 
```

...这就是为什么你过去经常看到图书馆介入的原因，比如 Prototype 的`Class`东西，或者我自己的[Lineage](http://code.google.com/p/lineagejs/)；这些在 ES2015 语法中已经过时了，但是，这让它变得非常容易：

```
class Base {
    method(arg1) {
        // ...
    }
}
class Derived extends Base {
    method(arg1) {
        // Use's the superclass's `method`, if desired, is easy:
        super.method(arg1);
    }
} 
```

重新*标题*您的问题：

> 创建 Javascript 类的正确方法是什么？

在 JavaScript 中创建对象“类”有几种同样正确的方法，因为 JavaScript 是一种非常灵活的语言。有标准的构造函数、“builder”函数`Object.create`（在支持 ES5 的环境中）可以让您进行更直接的原型继承，以及其他几个。JavaScript 的一大优点是您可以选择自己的“类”风格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:11:20.500

你也可以使用类似的东西：

```
function O(x,y) {
   this.x=x;
   this.y=y;
   this.method=function() {...}
   return this;
}

var o=new O(0,0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T07:36:17.667

如果您正在寻找实际解决方案而不是理论解决方案，那么您最好使用框架。

*   [Backbone.js](http://documentcloud.github.com/backbone/)拥有你所需要的一切，包括 mixins 和事件系统。

如果您也需要一些小部件，请考虑

*   [酷狗](http://qooxdoo.org/)
*   [ExtJS](http://www.sencha.com/products/extjs)

它们都提供了一个干净的架构，并且可以在没有小部件的情况下使用，但它们需要比 Backbone 更多的学习。

这些框架提供的继承结构感觉很像常见的基于类的结构（想想 Java）。那是因为它们在内部创建了特殊的对象，这些对象仅作为`prototype`其他对象的 s，因此起到了类的作用。

例如，当您调用 时`Ext.define('MyClass', {extend: 'ParentClass', mixins: foo, ... })`，Ext 会创建一个`function`“ ”，以及一个保存您提供的方法`MyClass`的匿名对象 ( )。`MyClass.prototype`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T21:14:42.653

如果你的目标是支持 ES5 的浏览器或环境，那么你可以这样做：

```
var Person = {
  foo: ...,
  bar: ...
};

var Mike = Object.create(Person, { baz: ... }); 
```

# jsp - 在 Spring 3 中将日历对象绑定到 3 个下拉框

> ID：10769773
> 
> 赞同：3
> 
> 时间：2012-05-26T21:05:44.717
> 
> 标签：jsp, spring-mvc, spring-3

我最近开始将我的网站移植到 Spring 3。我的模型有 Author 对象，我在其中存储了一些信息，其中包括 Calendar 类的对象。

为了摆脱解析日期，我使用 3 个下拉框来设置日历。在 Spring 2.5 中，我在 onBind 方法中进行了翻译。

```
@Override
protected void onBind(HttpServletRequest request, Object command) throws Exception {
    Auteur auteur = (Auteur) command;
    Calendar geboorteDatum = getCompositeDate(request, "geboortedatum.time.date", "geboortedatum.time.month", "geboortedatum.time.year");
    auteur.setGeboortedatum(geboorteDatum);
} 
```

getCompositeDate 将使用 ServletRequestUtils 返回日历对象。在我的 JSP 页面中：

```
<form:select path="geboortedatum.time.date">
    <c:forEach var="i" begin="1" end="31" step="1">
        <form:option value="${i}" label="${i}" />
    </c:forEach>
</form:select>
<form:select path="geboortedatum.time.month">
    <c:forEach var="i" begin="1" end="12" step="1">
        <form:option value="${i - 1}" label="${i}" />
    </c:forEach>
</form:select>
<form:select path="geboortedatum.time.year">
    <c:forEach var="i" begin="1900" end="2013" step="1">
        <form:option value="${i}" label="${i}" />
    </c:forEach>
</form:select> 
```

我想知道如何将此代码转换为 Spring 3，或者如果不可能的话是否有替代方案。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:34:36.837

在 Spring 3 中，@InitBinder 可用于绑定对象

```
@InitBinder
protected void initBinder(WebDataBinder binder, WebRequest request) throws Exception {
//implementation
} 
```

您可以使用 WebRequest 对象以相同的方式获取请求属性。

# sql-server - SQL Server 依赖标识 - 有这样的事情吗？

> ID：10769780
> 
> 赞同：4
> 
> 时间：2012-05-26T21:07:15.090
> 
> 标签：sql-server, sql-server-2008

我使用 SQL Server 2008 R2。

我正在寻找我描述为依赖身份的功能。

我将通过一个例子来解释。

考虑这样一张表：

脚本

```
CREATE TABLE [dbo].[Rooms](
    [RoomID] [int] NOT NULL,
    [ItemID] [int] NOT NULL,
    [ItemDescription] [nvarchar] (250))
GO 
```

数据：

```
RoomID  ItemID  ItemDescription
------  ------  --------------- 
7       1       Door
7       2       Window (West)
7       3       Window (North)
8       1       Door
8       2       Table #1
8       3       Table #2
7       4       Table #1 
8       4       Chair #1 
7       5       Table #2 
7       6       Table #3 
8       5       Chair #2 
```

（谁能告诉秘密如何在这里格式化示例表？）

我希望能够像这样声明一个依赖标识列：

`ItemID [int] Identity(RoomID,1,1) NOT NULL`

中的新行应触发对where =`[Rooms]`最大值的测试并加 1。`ItemID``RoomID``@roomID`

而不是使用更改更新来`RoomID`删除并插入所需的数据。

现在我像这样以编程方式做到这一点：

```
DECLARE @roomID INT
SET @roomID = 7
INSERT INTO [Allocation].[dbo].[Rooms]
    ([RoomID], [ItemID], [ItemDescription]) VALUES (@roomID,
    (SELECT max([ItemID])+1 FROM [Allocation].[dbo].[Rooms] WHERE [RoomID]=@roomID)
    ,'Chair #1')
GO 
```

那么，有这样的功能吗？

在可能的情况下没有，我可以对服务器进行编程以自动为我设置下一个依赖标识，给定特定的表、父列和依赖标识列吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:22:40.400

您可以使用触发器和索引来提高性能并确保没有重复。

将表更改为具有主键，并允许 ItemID 为 null

```
CREATE TABLE [dbo].[Rooms](
    [RoomID] [int] NOT NULL,
    [ItemID] [int] NULL,
    [ItemDescription] [nvarchar](250) NULL,
    [Id] [int] IDENTITY(1,1) NOT NULL,
    CONSTRAINT [PK_Rooms] PRIMARY KEY CLUSTERED 
    (
        [Id] ASC
    )
) 
```

然后添加一个触发器

```
CREATE TRIGGER RoomTrigger
   ON  Rooms
   AFTER INSERT
AS 
BEGIN
    SET NOCOUNT ON;

    update Rooms
    set 
        ItemID = (select coalesce(MAX(itemid), 0) + 1 
                      from Rooms r where r.RoomID = inserted.RoomID )
    from
        inserted where Rooms.Id = inserted.Id

END 
```

然后你可以这样做

```
insert into Rooms (RoomID, ItemDescription) values (1, 'Test')
insert into Rooms (RoomID, ItemDescription) values (1, 'Test') 
```

这导致

```
RoomID  ItemID ItemDescription Id
2       0      Test            1
2       1      Test            2 
```

正如 marc_s 所建议的，我使用了 10 个线程的 SQL Query Stress 来查看这个触发器在负载下会发生什么。我根本没有得到任何重复项（使用默认隔离级别），但我确实得到了我所期望的大量死锁。

使用问题中的原始查询，我得到了很多重复项。

使用触发方法，我会遇到这样的死锁和结果：

```
RoomID ItemID ItemDescription Id
1      6      Test            6
1      7      Test            9
1      8      Test            902
1      9      Test            903 
```

这里 ItemID 是连续的，但是 1000 行中大约有 900 行未能插入，在 Id 中留下了很大的空白。

如果我们添加以下索引：

```
CREATE UNIQUE NONCLUSTERED INDEX [IX_Rooms] ON [dbo].[Rooms] 
(
    [RoomID] ASC,
    [ItemID] ASC
) 
```

为了保证没有重复，并提高为特定 RoomID 计算 Max(ItemId) 的性能，那么现在：

*   来自问题的原始查询会导致重复，并且只能插入 500 行。
*   使用默认隔离级别的触发器版本成功**，没有任何死锁或错误**，并且运行速度非常快。

使用隔离级别 = 可序列化的触发器会导致死锁，因此只有 40% 的插入成功（但不会因重复而导致异常）。

作为使用触发器 + 50 个线程 + 隔离级别 = 默认值进行的最终测试。 **没有错误**。

# objective-c - Objective-C 全局可访问的方法

> ID：10769784
> 
> 赞同：0
> 
> 时间：2012-05-26T21:07:38.957
> 
> 标签：objective-c, ios, cocoa-touch

在 Master-Detail Xcode 模板中，我在哪里定义一个可以全局访问的函数（所有 UIViewController 及其子类）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T21:16:09.793

`UIViewController`一种可能性：您可以使用该方法定义一个类别。所以`UIViewController`现在任何人也有这种方法。

另一种可能性：子类 a`UIViewController`并在那里编写你的方法。然后从这个自定义视图控制器子类化。

编辑：

> 另外，我的 MasterViewController 是 UITableViewController 的子类，而 DetailViewController 是 UIViewController 的子类。如果我将它们都子类化为自定义 UIViewController，则 MasterViewController 将失去其 UITableViewController 继承

您可以将 a 子类化并从 this`UITableViewController`中对 and 子类执行相同的操作。`UIViewController`

基本思想是将 a`UITableViewController`和 a`UIViewController`作为模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T18:14:11.153

您可以在 appDelegate 类中创建可以通过所有应用程序访问的方法。例如，在您的 AppDelegate.h 中，您已声明此方法如下：

```
-(void)myMethod; 
```

在您的 AppDelegate.m 中，您将其定义为：

```
-(void)myMethod
{
    NSLog(@"myMethod is getting called");
} 
```

从任何其他类（Master 或 Detail 等），您可以通过以下方式访问 myMethod：

```
#import "AppDelegate.h"

AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate myMethod]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T00:44:08.897

使类和方法成为静态的。使用加号而不是减号，例如`+(void)methodName:param(ParamType *);`。

请注意，您不能实例化此类的对象。这就像过程编程。如果我在不同的对象和视图中需要相同但不断变化的值，我通常会使用它。不过，我没有更好的方法对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T21:28:19.813

如果您有一些代码不关心什么类的对象调用它，它可能被封装到函数或子例程而不是方法中。

方法是了解对象及其类的特殊类型的函数或子例程。函数或子例程就像一个全局方法，但没有。

补充：Objective C 是 C 编程语言的超集。因此，两种语言中的 C 函数和子例程都是相同的。您可以在（或任何）.c 或 .m 文件中编写一个，然后在 .h 文件中声明它以包含在您希望使用的任何位置。根据需要传递参数并从函数中获取返回值，就像方法一样（除了与任何固有的对象类无关）。

添加#2：但是由于您希望您的方法了解一些 NSStream，那么它可能应该是包含这些流的某个模型类（MVC 范式）的方法，而不是真正的全局方法。将此模型对象传递给任何需要访问它的视图控制器或其他类。

# ruby-on-rails - 添加 gem devise_rpx_connectable 后 db:migration add_rpx_to_admins 时出现 rails 错误

> ID：10769787
> 
> 赞同：2
> 
> 时间：2012-05-26T21:08:07.647
> 
> 标签：ruby-on-rails, rpx

错误：/Users/bo/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- devise/schema (LoadError) from /Users/bo/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in`block in require' from /Users/bo/ .rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency' from /Users/bo/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in`require' 来自 /Users/bo/.rvm/gems/ruby-1.9.3 -p194/gems/devise_rpx_connectable-0.2.2/lib/devise_rpx_connectable/schema.rb:2:in `<top (required)>' from /Users/bo/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in`require' 来自 /Users/bo/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3 /lib/active_support/dependencies.rb:251:in `block in require' from /Users/bo/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in`load_dependency' 来自 /Users/bo/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251 :in `require' from /Users/bo/.rvm/gems/ruby-1.9.3-p194/gems/devise_rpx_connectable-0.2.2/lib/devise_rpx_connectable.rb:13:in`'来自 /Users/bo/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in`require' from /Users/bo/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in`来自 /Users/bo/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in`each' from /Users/bo/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in`块中的块（2 级）需要'来自 /Users/bo/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in`each' from /Users/bo/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in`需要'来自 /Users/bo/ .rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler.rb:119:in `require' from /Users/bo/Rails/blog/config/application.rb:7:in`'来自 script/rails:6:in `require' from script/rails:6:in`'

============================ 我的宝石：捆绑包中的宝石：* actionmailer (3.2.3) * actionpack (3.2.3 ) * activemodel (3.2.3) * activerecord (3.2.3) * activeresource (3.2.3) * activesupport (3.2.3) * arel (3.0.2) * bcrypt-ruby (3.0.1) * builder (3.0\. 0) * bundler (1.1.3) * coffee-rails (3.2.2) * coffee-script (2.2.0) * coffee-script-source (1.3.3) * copycopter_client (2.0.0) * devise (2.1\. 0) * devise_rpx_connectable (0.2.2) * erubis (2.7.0) * execjs (1.3.2) * 远足 (1.2.1) * i18n (0.6.0) * 旅程 (1.0.3) * jquery-datatables-rails (1.9.1.3 9e88f3c) * jquery-rails (2.0.2) * jquery-ui-rails (0.4.0) * json (1.7.3) * json_pure (1.7.3) * mail (2.4.4) * mime-类型 (1.18) * multi_json (1.3.5) * orm_adapter (0.0.7) * polyglot (0.3.3) * rack (1.4.1) * rack-cache (1.2) * rack-ssl (1.3.2) * rack-test (0.6.1) * rails (3.2.3) * railties (3.2.3) * rake (0.9.2.2) * rdoc (3.12) * rpx_now (0.6.24) * sass (3.1.18 ) * sass-rails (3.2.5) * sprockets (2.1.3) * sqlite3 (1.3.6) * thor (0.14.6) * 倾斜 (1.3.3) * treetop (1.4.10) * tzinfo (0.3\. 33) * 丑化者 (1.2.4) * 守望者 (1.1.1)

谢谢！

# jquery - jquery跨域认证

> ID：10769791
> 
> 赞同：8
> 
> 时间：2012-05-26T21:08:49.113
> 
> 标签：jquery, http, authentication, cross-domain, jetty

我将我的 Jetty 服务器配置为允许跨域 http 请求 (allowedOrigins = *) 并允许使用其 CrossOriginFilter 进行跨域身份验证 (allowCredentials=true)。没有身份验证要求的跨域 http 请求可以正常工作。现在，当涉及到需要身份验证的 http 调用时，使用 JQuery 无法解决。我使用以下代码并遵循此示例：[http ://www.aswinanand.com/2009/01/http-basic-authentication-using-ajax/](http://www.aswinanand.com/2009/01/http-basic-authentication-using-ajax/)

```
function login(username, password) {
$.ajax({
    type: "GET",
    contentType: "application/json",
    dataType: "json",
    url: url,
    beforeSend: function(xhr) {
        var base64 = Base64.encode(username + ":" + password);
        xhr.setRequestHeader("Authorization", "Basic " + base64);
        xhr.withCredentials = true;
    },
    error: function(data){
        alert("error");
    },
    success: function(data){
        alert("success"); 
    }
}); 
```

在 HTTPFox 中，我看到对服务器的以下请求：

```
OPTIONS /login HTTP/1.1
...
Access-Control-Request-Method   GET
Access-Control-Request-Headers  authorization,content-type 
```

服务器响应一个

```
HTTP/1.1 204 No Content
...
Allow   OPTIONS,GET,HEAD 
```

我还使用了下面的选项，这并没有什么不同。

```
$.ajax({
    ...
    username: username,
    password: password,
    ...
} 
```

错误函数总是触发。有人知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T17:16:09.053

As the default allowed headers are

> X-Requested-With,Content-Type,Accept,Origin

I had to add the headers

> authorization,content-type

Found this via the log file

> DEBUG [2012-05-27 17:04:02,468] org.eclipse.jetty.servlets.CrossOriginFilter: Headers [authorization,content-type] are not among allowed headers [X-Requested-With, Content-Type, Accept, Origin]

Thanks for all the hints!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T22:35:19.480

The response headers that you set in your application -- when security is not enabled 00 works just fine, as you've attested to. However, when security is enabled, your cross-domain requests fail.

This is likely due to the additional Filter and additional response headers that are set by the security filter in order to generate a response.

To solve this problem, the high level solution is that you must set *your* response headers prior to the time that the security Filter sets its response headers and/or commits them to the client.

You're also using Jetty; therefore, you can use the [Jetty Cross Origin Filter](http://wiki.eclipse.org/Jetty/Feature/Cross_Origin_Filter) to ensure that the response headers are set in the Filter chain, in the order that they need to be set:

Here is a list of parameters that you can pass into the Filter configuration in web.xml:

> *   allowedOrigins, a comma separated list of origins that are allowed to access the resources. Default value is *, meaning all origins
>     
>     
> *   allowedMethods, a comma separated list of HTTP methods that are allowed to be used when accessing the resources. Default value is GET,POST
>     
>     
> *   allowedHeaders, a comma separated list of HTTP headers that are allowed to be specified when accessing the resources. Default value is X-Requested-With
>     
>     
> *   preflightMaxAge, the number of seconds that preflight requests can be cached by the client. Default value is 1800 seconds, or 30 minutes
>     
>     
> *   allowCredentials, a boolean indicating if the resource allows requests with credentials. Default value is false

By default, the Allowed Origins response header is set to `*`, which implies that by default, any request can be made from any domain. You'll need to be sure to modify this to allow only domains that you intend to whitelist, assuming you don't want every request from all domains to be valid:

**web.xml entry for the Filter:**

```
<web-app ...>
    ...
    <filter>
        <filter-name>cross-origin</filter-name>
        <filter-class>org.eclipse.jetty.servlets.CrossOriginFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>cross-origin</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    ...
</web-app> 
```

Here is a list of additional resources that you may find helpful in solving this particular problem:

*   [Jetty Cross Origin Filter](https://stackoverflow.com/q/8303162/552792)

*   [Access Control Allow Origin not allowed by](https://stackoverflow.com/q/9327218/552792)

*   [Java EE 5 Tutorial - Filtering Requests and Responses](http://docs.oracle.com/javaee/5/tutorial/doc/bnagb.html)

*   [HttpServletResponseWrapper javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponseWrapper.html) - You may need this in case you need to override the HttpServletResponse object.

*   [Setting Authentication Header in Servlet via Filter](https://stackoverflow.com/q/4899613/552792)

*   [Differences between ServletResponse and HttpServletResponseWrapper?](https://stackoverflow.com/q/7023374/552792)

*   [How to add response headers based on Content-type; getting Content-type before the response is committed](https://stackoverflow.com/q/2563344/552792)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:22:49.657

For SOAP stuff, the allowed headers should also include messagetype,soapaction

Beware that no wildcard is allowed to configure the allowed headers...

# twitter-bootstrap - 引导轮播函数调用

> ID：10769796
> 
> 赞同：0
> 
> 时间：2012-05-26T21:10:14.587
> 
> 标签：twitter-bootstrap

如果您查看引导轮播文档，并查看页面源代码。它没有任何函数调用，它们的轮播从一开始就可以正常工作。如果不需要，为什么我需要添加函数调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:17:56.017

从单独的脚本文件`application.js`第 97 行调用轮播：

```
// carousel demo
$('#myCarousel').carousel() 
```

实际上，您根本不需要调用，只需将其放在那里，这样您的轮播就会在页面加载时开始滑动。如果您省略呼叫，它将是静态的，直到您点击寻呼机。

# c# - 从应用程序中检索元素的标识符

> ID：10769799
> 
> 赞同：1
> 
> 时间：2012-05-26T21:10:52.823
> 
> 标签：c#, automation, element, identity

我正在学习在 C# 中使用自动化 UI。但是问题是我无法正确识别辅助应用程序中的文本框。

我正在使用以下条件来识别文本框：

```
string name = "textBox1";
Condition c = new PropertyCondition(AutomationElement.AutomationIdProperty, name); 
```

如果您知道文本框的确切名称，它可以正常工作，但您不可能知道除您自己之外的应用程序中元素的确切名称。**Spy++ 或 Winspector 等程序均未显示此名称！**

您如何识别另一个应用程序中的文本框？

PS 我也尝试过使用“ClassNameProperty”，但是对于类似的元素，类名通常是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:13:59.077

这个应用程序非常适合：[UISpy](http://msdn.microsoft.com/en-us/library/ms727247.aspx)

# struts2 - 在修改后的 Struts2 模板迭代器中查找索引

> ID：10769811
> 
> 赞同：0
> 
> 时间：2012-05-26T21:11:40.900
> 
> 标签：struts2, iterator, freemarker

这应该很简单，但我找不到正确的变量。

我在 struts2 中自定义了一个 Freemarker 模板（简单-> radioMap）

模板的结构基本上是：

```
<@s.iterator value="parameters.list">
   //Display each item in the list
</@s.iterator> 
```

我想要做的是显示迭代中每个项目的数量。我需要获取每个迭代项的索引，以便我可以打印

```
0 - Item A
1 - Item B
.... 
```

我怎样才能得到这样的索引？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:23:08.943

由于`@s.iterator`不是标准的 FreeMarker 指令，我不知道它是否将当前索引放入某个变量中（标准指令`#list`确实如此，但显然他们出于某种原因使用自己的迭代器）。但是，您可以只计算自己，例如：

```
<#local idx = 0>
<@.iterator ...>
   <#local idx = idx + 1>
   ...
</@.iterator> 
```

请注意，使用`#local`假设这个“radioMap”是一个宏。如果不是，则必须`<#assign ...>`改用，然后我希望在其自己的 FreeMarker 命名空间（即，它是`#import`-ed，而不是`#include`-d）或在其自己的 FreeMarker中调用此代码`Environment`，否则您可能会发生名称冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T12:36:29.020

S2 迭代器标记使用该`status`属性来命名循环状态变量。

属性标签可用于检索循环状态变量。

[http://struts.apache.org/2.x/docs/iterator.html](http://struts.apache.org/2.x/docs/iterator.html)

要使用本机 FM 循环，您可以使用该`stack.findValue()`方法。

[http://struts.apache.org/2.x/docs/freemarker.html](http://struts.apache.org/2.x/docs/freemarker.html)

# java - Java：正则表达式 - 我如何获得第一个引号文本

> ID：10769813
> 
> 赞同：6
> 
> 时间：2012-05-26T21:12:09.817
> 
> 标签：java, regex

作为一个**正则表达式**的初学者，我相信我要问一些太简单的问题，但无论如何我都会问，希望它不会打扰你帮助我..

假设我有一个像**“hello 'cool1' word!'cool2'”**这样的文本 ，我想得到第一个引用的文本（这是没有'的'cool1'）

我的模式应该是什么？并且在使用匹配器时，我如何保证它将保留第一个引号而不是第二个？

（请仅使用正则表达式提出解决方案..）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T21:15:37.187

使用这个正则表达式：

```
'([^']*)'

```

使用如下：[（ideone）](http://ideone.com/02TJx)

```
Pattern pattern = Pattern.compile("'([^']*)'");
Matcher matcher = pattern.matcher(s);
if (matcher.find()) {
    System.out.println(matcher.group(1));
} 
```

或者，如果您知道引用的字符串中没有换行符：

```
'(.*?)'

```

* * *

> 使用匹配器时，我如何保证它将保留第一个引号而不是第二个？

它将首先找到第一个引用的字符串，因为它从左到右开始搜索。如果您要求它进行下一次匹配，它将为您提供第二个带引号的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:19:52.070

如果您想在没有的情况下查找第一个引用的文本，`'`您可以/应该使用 Lookahead 和 Lookbehind 机制，例如

```
(?<=').*?(?=') 
```

例如

```
System.out.println("hello 'cool1' word! 'cool2'".replaceFirst("(?<=').*?(?=')", "ABC"));
//out -> hello 'ABC' word! 'cool2' 
```

[更多信息](http://www.regular-expressions.info/lookaround.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T21:16:10.577

您可以将字符串拆分为引号并获取第二部分（位于第一个和第二个引号之间）。

如果您坚持使用正则表达式，请尝试以下操作：

```
/^.*?'(.*?)'/ 
```

确保它设置为多行，除非你知道你的输入中永远不会有换行符。然后，从结果中获取子模式，这将是您的字符串。

也支持双引号：

```
/^.*?(['"])(.*?)\1/ 
```

然后得到子模式2。

# android - 删除堆叠的 TextView 之间的空间

> ID：10769815
> 
> 赞同：30
> 
> 时间：2012-05-26T21:12:35.150
> 
> 标签：android, android-layout, textview

我有一个垂直的，里面`LinearLayout`有两个。`TextView`前者包含一个静态文本属性（它的文本永远不会改变），最后一个包含一个回归计时器。下图显示了这两个项目：

![堆叠的文本视图](../Images/76541135f8d0e22e219b185e5d564b70.png)

我想消除两个文本都有顶部和底部的空格。我尝试了几种方法...

```
android:includeFontPadding="false"
android:lineSpacingMultiplier="1"
android:lineSpacingExtra="0dp"
android:paddingTop="0dp"
android:paddingBottom="0dp"
android:layout_marginTop="0dp"
android:layout_marginBottom="0dp" 
```

...但他们都没有删除文本上方的空间。如何在没有任何额外空间的情况下使两个文本彼此靠近？

PS：我发现[了这个类似的问题](https://stackoverflow.com/questions/7162500/android-reduce-space-between-two-vertical-textviews)，但没有人回答。

* * *

完整的布局代码：

```
<LinearLayout 
    android:id="@+id/boxTime"
    android:orientation="vertical"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="20dp" >

    <TextView
        android:id="@+id/textRemainingTime2"
        android:layout_width="wrap_content"
        android:layout_heigh="wrap_content"
        android:layout_gravity="center"
        android:gravity="center_horizontal"
        android:textSize="70sp"
        android:includeFontPadding="false"
        android:lineSpacingMultiplier="1"
        android:lineSpacingExtra="0dp"
        android:paddingTop="0dp"
        android:paddingBottom="0dp"
        android:layout_marginTop="0dp"
        android:layout_marginBottom="0dp"
        android:text="@string/title" />

    <TextView
        android:id="@+id/textRemainingTime"
        android:layout_width="wrap_content"
        android:layout_heigh="wrap_content"
        android:layout_gravity="center"
        android:gravity="center_horizontal"
        android:includeFontPadding="false"
        android:lineSpacingMultiplier="1"
        android:lineSpacingExtra="0dp"
        android:paddingTop="0dp"
        android:paddingBottom="0dp"
        android:layout_marginTop="0dp"
        android:layout_marginBottom="0dp"
        android:textSize="107sp"
        android:text="@string/timer" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-26T21:22:14.583

尝试使用负边距。可能需要花点时间才能弄好数字，但我以前做过，而且效果很好。

```
android:layout_marginTop="-5dp" 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-10-13T18:34:39.270

默认情况下，[TextView 包含一些填充，以便为重音字符留出空间](http://developer.android.com/reference/android/widget/TextView.html#setIncludeFontPadding%28boolean%29)。您可以使用以下方法关闭它：

```
 android:includeFontPadding="false" 
```

或者

```
 textView.setIncludeFontPadding(false) 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-11-29T13:53:34.073

使文本的基线等于 TextView 的底部。

```
public class BaselineTextView extends TextView {

    public BaselineTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        int yOffset = getHeight() - getBaseline();
        canvas.translate(0, yOffset);
        super.onDraw(canvas);
    }

} 
```

注意：为了避免砍掉后代，请调用`setClipChildren(false)`您`TextView`的父级`ViewGroup`（`android:clipChildren="false"`在 XML 中）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-20T11:48:49.487

如果您将**includeFontPadding**设置为 false 它会有所帮助。

```
android:includeFontPadding="false" 
```

但如果你知道你没有任何下降，因为你设置

```
android:textAllCaps="true" 
```

或者您知道没有具有下降器的字符，您可以制作自定义 TextView 并将高度设置为基线。

```
public class ExTextView extends TextView {

    public ExTextView(Context context) {
        this(context, null);
    }

    public ExTextView(Context context, @Nullable AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public ExTextView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    @TargetApi(Build.VERSION_CODES.LOLLIPOP)
    public ExTextView(Context context, @Nullable AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(context, attrs, defStyleAttr, defStyleRes);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        setHeight(getBaseline());  // <--- Shrink size to baseline
        super.onDraw(canvas);
    }
} 
```

源代码包含在我的 UiComponents 测试应用程序中。 [https://github.com/landenlabs/UiComponents](https://github.com/landenlabs/UiComponents)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-26T21:24:20.777

负边距可以解决问题

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-02T06:37:43.257

由于我的要求是覆盖现有的 textView get from `findViewById(getResources().getIdentifier("xxx", "id", "android"));`，所以我不能简单地尝试`onDraw()`其他答案。

但我只是想出了解决问题的正确步骤，这是 Layout Inspector 的最终结果：

[![在此处输入图像描述](../Images/846a0ba5a6e6a68eebb297ad5010d63d.png)](https://i.stack.imgur.com/FnA7o.png)

由于我想要的只是删除顶部空格，所以我不必选择其他字体来删除底部空格。

这是修复它的关键代码：

```
Typeface mfont = Typeface.createFromAsset(getResources().getAssets(), "fonts/myCustomFont.otf");
myTextView.setTypeface(mfont);

myTextView.setPadding(0, 0, 0, 0);

myTextView.setIncludeFontPadding(false); 
```

第一个关键是设置自定义字体“fonts/myCustomFont.otf”，它在底部有空间但在顶部没有空间，您可以通过打开 otf 文件并单击 android Studio 中的任何字体轻松找出：

[![在此处输入图像描述](../Images/8624dd2708a8185a43e66cd6e48be4c9.png)](https://i.stack.imgur.com/xRobI.png)

如您所见，底部的光标有额外的间距，但顶部没有，所以它解决了我的问题。

第二个关键是**你不能简单地跳过任何代码**，否则它可能不起作用。这就是为什么您会发现有些人评论说答案有效，而其他人评论说答案无效。

让我们说明如果我删除其中一个会发生什么。

没有`setTypeface(mfont);`：

[![在此处输入图像描述](../Images/4e6d7614b124366a93a27db745a3a11f.png)](https://i.stack.imgur.com/KbkzK.png)

没有`setPadding(0, 0, 0, 0);`：

[![在此处输入图像描述](../Images/5e1476dc63d9253c967f96c69ba3d188.png)](https://i.stack.imgur.com/yydTK.png)

没有`setIncludeFontPadding(false);`：

[![在此处输入图像描述](../Images/a2781b5e2224bee58aab80059b318b34.png)](https://i.stack.imgur.com/JOQnQ.png)

没有其中的 3 个（即原件）：

[![在此处输入图像描述](../Images/915a7e27c5ee60e2d68490040e6c0d67.png)](https://i.stack.imgur.com/ELEwZ.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-02-16T06:56:26.570

只需在下面使用，无需其他任何东西。

```
 android:includeFontPadding="false" 
```

如果您想要线间隙的一些变化，请使用：

```
android:lineSpacingExtra 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-05T06:26:50.233

负边距会起作用。您可以通过两种方法设置它 -

1) 通过 xml - 将`android:Layout_marginTop="-10dp"`字段设置为负数

2）通过java（以编程方式） - 将`topMargin`LayoutParams的字段设置为负数。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-25T03:47:39.207

你应该改变 TextView 的高度，也许改变 android:gravity="bottom"

高度介于 textsize 和带有 Wrapcontent 的 textView 的大小之间。

```
public class MyTextViewBounder extends TextView {
public MyTextViewBounder(Context context) {
    super(context);
}

public MyTextViewBounder(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public MyTextViewBounder(Context context, AttributeSet attrs, int defStyleAttr) {
    super(context, attrs, defStyleAttr);

}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    //test kích thước thực tế với kích thước của Textview bao quanh text của nó như thế nào
    int width, height;
    Paint iPaint;
    Rect  iRect = new Rect();

    iPaint = new Paint();
    iPaint.setTextSize(13);
    iPaint.setTextAlign(Paint.Align.CENTER);

    //call below code outsite
    //this.setText("Hung");
    //this.setTextSize(TypedValue.COMPLEX_UNIT_PX,13);
    //this..setIncludeFontPadding(false);   //height from 18px down to 15px
    iPaint.getTextBounds("Hung",0,4,iRect); //width = 34px, height = 12px

    width = this.getWidth(); //= 30px
    height = this.getHeight(); //= 18px

    width = this.getMeasuredWidth(); //=30px
    height = this.getMeasuredHeight(); //= 18px

    width = iRect.width();  //34px
    height = iRect.height(); //12 px

} 
```

}

# php - 无法在 cakephp 中找到视图地址

> ID：10769816
> 
> 赞同：1
> 
> 时间：2012-05-26T21:12:35.740
> 
> 标签：php, cakephp

我正在尝试在这里完成用户认证 cakephp 教程。[http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)

如果您查看 UsersController 的代码块，它会显示一个编辑操作。他们提供的唯一视图是 add.ctp 所以我试图完成剩余的视图。我已经创建了一个索引，但现在我无法弄清楚编辑视图发生了什么。

当我转到用户/编辑时，我收到以下消息

```
Error: The requested address '/cake/users/edit' was not found on this server. 
```

我在我的用户文件夹中有一个保存为 edit.ctp 的页面，所以我对收到此消息的原因感到困惑。

顺便说一下，这是UsersController中的编辑功能

```
public function edit($id = null) { 
    $this->User->id = $id; 
    if (!$this->User->exists()) {  
        throw new NotFoundException(__('Invalid user'));
    }
    if ($this->request->is('post') || $this->request->is('put')) { 
        if ($this->User->save($this->request->data)) {  
            $this->Session->setFlash(__('The user has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
        }
    } else {
        $this->request->data = $this->User->read(null, $id);
        unset($this->request->data['User']['password']);
    }
} 
```

我只是应该创建另一个视图并将其传递给编辑功能吗？我很困惑为什么我可以通过添加功能添加用户，但我无法编辑自己的密码/用户名/任何用户属性。

# c++ - mingw32 上的 libtar.h

> ID：10769818
> 
> 赞同：0
> 
> 时间：2012-05-26T21:12:49.500
> 
> 标签：c++, mingw, tar

有没有办法在 MinGW 上使用 tar.h/libtar.h？编译 libtar 失败并出现需要 tar.h 的错误 - 并且 tar 甚至没有编译，因为它需要一些仅在 unix 上具有的定义（我假设.. 在 rtapelib.c -> SIGPIPE 中崩溃）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:07:40.427

没有。 [http://www.gnu.org/software/gnulib/manual/gnulib.html#tar_002eh](http://www.gnu.org/software/gnulib/manual/gnulib.html#tar_002eh)

Gnulib 未解决的可移植性问题：

```
This header file is missing on some platforms: Cygwin, mingw, MSVC 9, BeOS. 
```

# ruby-on-rails - 首次进入站点根目录时设计身份验证错误

> ID：10769821
> 
> 赞同：4
> 
> 时间：2012-05-26T21:13:15.447
> 
> 标签：ruby-on-rails, authentication, devise, before-filter

当用户进入我们网站的根目录或注销时，Devise 身份验证第一次显示“您需要先登录或注册才能继续”。页面重新加载后，此消息消失。

我们网站的根目录设置为具有以下功能的控制器：

```
before_filter :authenticate_user! 
```

**我们需要这个控制器作为根。**如何消除此消息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-03-01T00:29:29.113

正确的解决方案是按照官方 wiki 中的说明设置经过身份验证的块：[https ://github.com/plataformatec/devise/wiki/How-To:-Require-authentication-for-all-pages](https://github.com/plataformatec/devise/wiki/How-To:-Require-authentication-for-all-pages)

```
 authenticated :user do
    root to: 'home#index', as: :authenticated_root
  end
  root to: redirect('/users/sign_in') 
```

范围`authenticated`块只有在登录后才会被调用，因此您可以愉快地将用户引导到您选择的控制器。在示例中，它会在未经身份验证时将它们重定向到登录页面，但这可能是您路由中的任何操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T10:12:49.287

我没有找到比定义更好的解决方案

```
unauthenticated: '' 
```

在 /config/locales/devise.en.yml 文件中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-26T22:58:24.147

您想摆脱仅索引上的消息吗？如果是这样，您可以执行以下操作：

```
before_filter :authenticate_user!, :except => [:index] 
```

您也可以将其他操作添加到数组中。

请注意，这不会调用`authenticate_user!`指定的操作，因此请确保用户不需要为给定的操作进行身份验证！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T10:48:37.053

假设您已经封装了您的设计错误消息，如下所示。

```
<p class="notice"><%= notice %></p>
<p class="alert"><%= alert %></p> 
```

您可以将以下 CSS 代码添加到根控制器的索引视图文件中。

```
<style type="text/css">
  .notice, .alert { visibility: hidden; }
</style> 
```

这应该隐藏您网站根目录的错误消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-03T16:00:49.703

在所有页面（登录、注册等除外）都受到保护的情况下`before_action :authenticate_user!`，我会这样覆盖 Devise `SessionController`：

`app/controllers/sessions_controller.rb`

```
class SessionsController < Devise::SessionsController
  def new
    if flash[:alert] == unauthenticated_message
      flash.delete(:alert) unless requested_protected_page?
    end
    super
  end

  private

  def requested_protected_page?
    session[:user_return_to] != root_path
  end

  def unauthenticated_message
    I18n.t('devise.failure.unauthenticated')
  end
end 
```

然后告诉你的`config/routes.rb`文件使用那个被覆盖的控制器：

```
devise_for :users, controllers: {
  sessions: :sessions,
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-08-14T13:08:37.843

您可以在控制器中创建一个单独的操作，只是为了解决用户是否登录，然后重定向到所需的位置。

```
class WelcomeController < ApplicationController
  skip_before_filter :authenticate_user!, only: :root

  def index
  end

  def root
    flash.keep
    redirect_to current_user ? welcome_index_path : new_user_session_path
  end
end 
```

这应该可以工作，当然你应该在你的 ApplicationController

```
before_filer: authenticate_user! 
```

并在路由根配置为welcome#root

# c - 如何将文件内容写入管道？

> ID：10769824
> 
> 赞同：2
> 
> 时间：2012-05-26T21:13:52.367
> 
> 标签：c

我有这个代码：

```
 close(pipefd[0]);

            fp = fopen(argv[1], "r");

            if(fp)
            {
                while((c = getc(fp)) != EOF)
                {
                    if((write(pipefd[1], c, 1)) < 1)
                    {
                        fprintf(stderr, "Write to pipe failed.\n");
                        exit(EXIT_FAILURE);
                    }
                }
            }

            fclose(fp);

            close(pipefd[1]);   
            waitpid(childPID, &status, 0);
            exit(EXIT_SUCCESS); 
```

据我了解，它应该打开一个文件并将其内容写入管道。然后这成为另一个程序的标准输入。我的测试表明除了写入之外一切正常，但我不知道为什么它不工作。

我只是在做一些愚蠢的事情吗？

编辑：是的，我在做一些愚蠢的事情。

我认为问题出在我的写入（在我修复 c 需要是 &c 之后），但它实际上是在我的子进程中，我使用 dup2() 将管道的读取端链接到我的子进程的标准输入. 我的论点倒退了。这是从 fork() 开始的工作代码：

```
childPID = fork();
if (childPID == 0)
{
    //child code
    //printf("In the child process.\n");
    dup2(pipefd[0], STDIN_FILENO);
    close(pipefd[1]);

    execv(argv[2], paramList);
    printf("You shouldn't be seeing this.\n");
}
else
{
    //parent code
    //printf("In the parent process\n");
    close(pipefd[0]);

    fp = fopen(argv[1], "r");

    if(fp)
    {
        while((c = getc(fp)) != EOF)
        {
            if((write(pipefd[1], &c, 1)) < 1)
            {
                fprintf(stderr, "Write to pipe failed.\n");
                perror("write");
                exit(EXIT_FAILURE);
            }
        }
    }

    fclose(fp);

    close(pipefd[1]);   
    waitpid(childPID, &status, 0);
    exit(EXIT_SUCCESS);
} 
```

希望这可以帮助其他人不必在桌子上撞头四天！并感谢所有抽空回答的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T22:17:28.007

`write()`需要一个指向要写入的数据缓冲区的指针，而不是一个字符（本质上是一个数字）。

答案很简单，而不是传递`c`给，而是`write()`传递 的地址`c`，即。`&c`.

# visual-studio-2010 - 在 Visual Studio 2010 中更改窗口名称（输出窗口）

> ID：10769828
> 
> 赞同：1
> 
> 时间：2012-05-26T21:14:29.717
> 
> 标签：visual-studio-2010, visual-studio, user-interface, titlebar

有没有办法在 Visual Studio 2010 中更改窗口名称。我所说的窗口是指“输出窗口”“命令窗口”“代码定义窗口”名称而不是标题栏（已经知道你可以这样做）？我已经净化了，它在它的窗口中没有显示任何名称，这很烦人，因为如果没有选择它，它基本上会因此而消失。我需要一种向空白净化窗口标题栏添加名称的方法。有什么帮助吗？

![在此处输入图像描述](../Images/5dc0e8810d3db089a1cbbc7eb5622c2a.png)

# c++ - 此代码中的错误超出范围

> ID：10769829
> 
> 赞同：0
> 
> 时间：2012-05-26T21:14:29.520
> 
> 标签：c++, image, opencv

> **可能重复：**
> [计数像素坐标 x 和 y](https://stackoverflow.com/questions/10767057/count-pixel-coordinates-x-and-y)

我正在尝试使用此代码对像素坐标值求和

这是代码

```
#include<cv.h>
#include<cvaux.h>
#include<highgui.h>
#include<iostream>
#include<cxtypes.h> // for cvarr 
using namespace std;

void main()
{
    IplImage* image;
    int w,h;
    char* filename;
    filename="D:\\Recognition\\Image Crop\\7.jpg";
    image=cvLoadImage(filename,0); //load image from file 
    // Get image attribute
    w=image->width; //image width
    h=image->height; //image height
    cout<<"1\. image width "<<w<<"\n2\. image height "<<h<<"  \n";
    int Sx,Sy;
    const CvArr* arr; // msh 3arf aih lzmtha
    CvScalar se; // to store the num

    //loop 3shan 23di 3ala kol pixel
    for(int x=0;x<image->width;x++)
    {
        for(int y=0;y<image->height;y++)
        {
            se=cvGet2D(image,x,y);
            Sx=se.val[y];
            Sx+=Sx;
        }
        Sy=se.val[x];
        Sy+=Sy;
    }
    cout<<"1\. image width "<<w<<"\n2\. image height "<<h<<"  \n";
    cout<<"3\. sum x ="<<Sx<<"\n4\. sum y ="<<Sy<<" \n";
} 
```

此代码用于计数或获取图像中 x 和 y 的像素 P(x,y) 总和

这个输出是 width 和 height 的值，但不要计算 x 和 y 的值，并且在输出屏幕中超出范围

任何帮助

提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:56:33.360

```
Sx=se.val[y];
Sx+=Sx; 
```

这不是在做你认为它在做的事情。

`a += b;`与 相同`a = a+b;`：在每次迭代中，您将覆盖 的值`Sx`，然后将其添加到自身（将其加倍）并将该值存储回`Sx`变量中。（它在下一次迭代中被覆盖。）

# php - PHP：将年中的日期转换为月中的日和月

> ID：10769830
> 
> 赞同：4
> 
> 时间：2012-05-26T21:14:37.127
> 
> 标签：php, date, timestamp

如果你有一年中的某一天。你怎么能把它转换成月份和月份的日期？例如：“144”日应转换为 5 月 26 日。我想我还必须添加实际年份来说明闰年。但我什么也没找到。

例如，函数[mktime()](http://php.net/manual/de/function.mktime.php)期望月、年和月中的某日。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-26T21:26:58.933

最可靠、最方便的方法是使用 DateTime 对象。您可以使用[DateTime::createFromFormat()](http://php.net/manual/en/datetime.createfromformat.php)静态方法根据当年的日期创建它：

```
$date = DateTime::createFromFormat('z', '144'); 
```

而且因为您知道`$date`变量中有 DateTime 对象，所以您可以执行任何您想要执行的任务。要输出包含的日期，只需调用：

```
echo $date->format('j. n. Y'); 
```

它将打印出 24\. 5\. 2012，因为它是闰年并且因为它索引从零开始的天数（就像数组索引一样）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T21:17:21.137

```
strtotime("January 1st +".($days-1)." days"); 
```

这将返回对应于一年中指定日期的时间戳。

# python - Python nparray 中的索引状态更改

> ID：10769838
> 
> 赞同：0
> 
> 时间：2012-05-26T21:15:32.977
> 
> 标签：python

我从步行者那里采取了步骤，并且每一步都增加了压力。我想确定每个步骤的开始和停止以及它发生的时间。到目前为止，此代码可以很好地确定压力何时上升或下降到阈值以下（脚着地并抬起）。现在我在 above_threshold 数组中有真/假状态。

```
data = np.loadtxt('junk.csv',delimiter=',',skiprows=1)
Fz = data

sigma = 5                       
threshold = 30                  
above_threshold = gaussian_filter(Fz, sigma=sigma) > threshold 
```

我是 Python 新手，想知道是否有一种有效的方法来构建一个新数组，告诉我状态何时从 false 变为 true（第一步开始），然后由 true 变为 false（结束第一步）。并且，对于后续步骤的开始和停止。

在此先感谢，斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:20:12.197

以下将为您提供变化点的索引：

```
ind = np.where(np.diff(above_threshold))[0] + 1 
```

如果你想把这些索引分成对，你可以做类似的事情

```
np.vstack((ind[::2], ind[1::2])).T 
```

# ruby - Ruby 代码重构

> ID：10769841
> 
> 赞同：0
> 
> 时间：2012-05-26T21:15:55.083
> 
> 标签：ruby, refactoring

我有 n 次类似的陈述

```
 if trigger_data.tt_closed
      unless trouble_ticket.changes.key?(:status)
        @run = 0
        break
      end
      unless trouble_ticket.changes[:status][1] == "Closed"
        @run = 0
        break
      end
    end

    if trigger_data.tt_assignee
      unless trouble_ticket.changes.key?(:assigned_to)
        @run = 0
        break
      end
      unless trouble_ticket.changes[:assigned_to][1] == trigger_data.tt_assignee
        @run
        break
      end
    end 
```

如何重构该代码？也许动态语句通过将一些哈希传递给输入来构建。我是元编程的新手。请给我建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T23:34:11.900

好吧，它可能不是您正在寻找的东西，但它大大缩短了代码。

另外，我删除了那些 key?() 方法，因为如果 key 不存在，它只会传递 nil ，这在 Ruby 中与 if 语句的 false 相同。

为了清楚起见，我留下了 2 个 if 语句。:)

```
changes = trouble_ticker.changes
if trigger_data.tt_closed && changes[:status][1] != "Closed"
  @run = 0
  break
end

if t = trigger_data.tt_assignee && changes[:assigned_to][1] != t)
  @run = 0
  break
end 
```

# html - 文本区域无法正常工作

> ID：10769844
> 
> 赞同：0
> 
> 时间：2012-05-26T21:16:30.403
> 
> 标签：html, css

我有一个文本区域，但它只能让我在底部单击它（以便我可以开始输入）。但是，文本出现在正确的位置。

该网站可以在这里找到：http: [//ibdesigns.net23.net/](http://ibdesigns.net23.net/)。

问题出在标有“请求”的字段中的“联系人”圈内。它只允许您单击最底部的文本区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T22:24:13.913

您的问题既不是 Div 也不是 Circle。您的 CSS 中的一些更改应该可以解决此问题。

```
#selected {
    width: 78px;
    height: 66px;
    top: 18px;
    background: #CCC;
    position: absolute;
    margin-left: 578px;
    border-radius: 36px;
} 
```

您可以使用 Firefox 插件 Color Picker 选择您的背景颜色以使其正常工作。不要为该 div 使用背景图像并为其添加半径。这应该可以解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:19:46.863

你有一个`<div id="circles">`绝对定位在 textarea 上的，它拦截了 textarea 上部的点击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T21:20:13.853

圆形 div 覆盖了 textarea。

```
#circles {
width: 940px;
height: 180px;
left: 10px;
position: absolute;
top: 155px;
} 
```

减小圆形 div 的宽度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T21:21:12.820

有一个`div`带有`id`“圆圈”的“圆圈”漂浮在大部分`textarea`. 乍一看，`div`它似乎没有做任何事情，但它包含一些我认为可能会在页面上动态使用的东西。

样式化`div`不再碍事，你应该没问题。

作为参考，您可以使用浏览器调试工具轻松发现类似的内容。在 Safari 中，我右键单击“问题区域”并选择“检查元素”。浏览器向我展示了`div`，为我突出显示了它，并向我展示了与它相关的所有 CSS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T21:21:20.467

或者你可以添加：

```
textarea {
    z-index: 1000000;
    ...
} 
```

# mongodb - 插入 MongoDB：转换为 BSON 的文档大小会改变吗？

> ID：10769845
> 
> 赞同：0
> 
> 时间：2012-05-26T21:16:39.967
> 
> 标签：mongodb, bson

好的，我是 MongoDB 的新手，并且一直在读一本关于它的书，有些地方在说

> “大于 4MB 的文档（转换为 BSON 时）无法保存到数据库”

好的...文件上限为 4MB？让我感到困惑的是他们在括号中所说的话：（*当转换为 BSON 时）*：所以当转换为 BSON 时大小会发生变化？

因为几行之后它说：

> “为了让你知道 4MB 是多少，***战争与和平***的整个文本只有 3.14 MB”

什么？好吧，现在我很困惑。帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T21:25:57.237

理论上，BSON 文件还包含占用空间和一些开销的字段名称。一般来说，开销不超过几个字节。除了一些文档开销（几个字节）之外，每个存储的值还有一些额外的存储字节。对于一个简单的字符串，它额外增加了 6 个字节（类型为 1，长度为 4，尾随 \0 字符为 1）。您可以在[bsonspec.org](http://bsonspec.org/#/specification)网站上查看开销。一个简单字符串的长度本身在“转换为 BSON 时”不会改变，但是长度等的添加使它稍微变大了一点。大多数驱动程序都有一个帮助函数来计算文档的大小。在 PHP 中，你会这样做：

```
<?php
$document = array(
    '_id' => new MongoId(),
    'name' => 'Derick'
);
echo strlen(bson_encode($document)), "\n";
?> 
```

在这种情况下打印`39`.

此外，当前的文档限制为 16 MB - 自本书编写以来已更改。

# django - 当您从 Django 中的另一个选择框中进行选择时如何显示另一个选择框

> ID：10769847
> 
> 赞同：0
> 
> 时间：2012-05-26T21:16:45.097
> 
> 标签：django

我是 Django 的新手。现在我在下面定义了类

```
PROPERTY_TYPE_CHOICE = [['1', 'Fixed (TODO)'],
                    ['2', 'Trajectory (TODO)'],
                    ['3', 'Error_Detecting'],
                    ['4', 'Error_Correcting']]
FIXED_TYPE_CHOICE = [['1', 'Prefix',
                      '2', 'Suffix']]

class UploadFileForm(forms.Form):
    # title = forms.CharField(max_length=50)
    automata_file  = forms.FileField(required = True)
    transducer_file = forms.FileField(required = True)
    property_type = forms.ChoiceField(choices=PROPERTY_TYPE_CHOICE,
                                      required=True)
    fixed_type = forms.ChoiceField(choices=FIXED_TYPE_CHOICE,
                                   required=True)
    debug_output = forms.BooleanField(required=False) 
```

我在前面的 html 中显示了这个 PROPERTY_TYPE_CHOICE

```
<div class="fieldWrapper">
    {{ form.property_type.errors }}
    <label for="id_a">Select <u>a type</u> of property:</label>
    {{ form.property_type }}
</div> 
```

如果我在 PROPERTY_TYPE_CHOICE 中选择第一个选项“Fixed (TODO)”，我想显示 FIXED_TYPE_CHOICE。我阅读了有关 Django 的文档，我认为它可能以这种方式实现：

```
<div class="fieldWrapper">
    {{ form.property_type.errors }}
    <label for="id_a">Select <u>a type</u> of property:</label>
    {{ form.property_type }}
</div>
{% if form.property_type=='1' %}
    <div class="fieldWrapper">
        {{ form.fixed_type.errors }}
        <label for="id_a">Select <u>a fixed type</u> of property:</label>
    {   { form.fixed_type }}
    </div>
{% endif %} 
```

但我不能那样做。我应该怎么办？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:35:31.797

`form.property_type`是一个 BoundForm 对象，如果你想访问它的值，你需要使用`form.property_type.value`

这就是为什么您的比较`{% if form.property_type=='1'}`不起作用的原因。

有关更多详细信息，请参阅[此页面](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs)约 2/3 处，在自定义表单模板部分下。

要在不刷新页面的情况下进行更新，您需要如下所示的 Javascript（确保您还包含 jQuery 库 (http://jquery.com/)：

```
$("#property_type").change (function() {
    if($(this).val() == '1') {
        $("#fixed_type").show();
    } else {
        $("#fixed_type").hide();
    }
} ) 
```

并确保为下拉菜单提供相应的 id 属性（`id="property_type"`例如）。

# iphone - 处理每日推送通知的最佳方式？

> ID：10769849
> 
> 赞同：1
> 
> 时间：2012-05-26T21:16:56.127
> 
> 标签：iphone, push-notification

我想在我的 iPhone 应用程序中实现推送通知，这是一种当日通知，我希望拥有它，以便每天在给定时间向我的每个用户推送通知。我预计该应用程序将被大约 8000 人使用 - 在不使服务器超载和花费天文数字的情况下，推荐的方法是什么？

在此先感谢，丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:30:05.797

[http://urbanairship.com/](http://urbanairship.com/)是你的朋友（我是用户，但与他们没有股份或投资）。每月 100 万次免费推送——这对您来说应该绰绰有余。如果你想自动化它，只需绑定他们的 API，或者使用他们的网站进行手动发送。

[https://go.urbanairship.com/accounts/register/](https://go.urbanairship.com/accounts/register/)

# java - 如何在 Eclipse 中开始使用 FMJ？

> ID：10769850
> 
> 赞同：1
> 
> 时间：2012-05-26T21:17:09.153
> 
> 标签：java, eclipse, media, fmj

我正计划构建一个程序来处理网络上的音频流。对于这个项目，我选择使用 FMJ。但是，我什至无法开始。我之前没有导入很多库，而且几乎没有 FMJ 可用的信息。我根本无法让我的项目使用 FMJ。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T22:01:21.660

您只需要将库的 JAR 添加到您的类路径中。将 JAR 拖放到您的项目中，然后右键单击项目->属性->Java 构建路径->添加 JAR...，然后从工作区中选择 JAR。

然后，您将能够从您自己的代码访问库的 API 类/方法。

# javascript - IE8 Anchor href 优先于 onclick？

> ID：10769854
> 
> 赞同：1
> 
> 时间：2012-05-26T21:17:23.007
> 
> 标签：javascript, jquery, html, internet-explorer-8

我有以下链接在除 IE8 之外的所有浏览器中运行良好。href 中的代码是否覆盖了 onclick 属性？在 IE8 中，href 会被执行，但 onlick 不会。任何人都可以帮忙吗？

```
<a href="javascript:void(0);" type="submit" onclick="$('#loginForm').submit();">Log in</a> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T21:22:58.483

为什么不使用这样的东西？

```
<a href="#" id="example>Log in</a> 
```

然后使用 javascript（使用 jQuery 库）

```
$("#example").click(function(e) {

  e.preventDefault(); //Prevent the href from jumping to the top
  $('#loginForm').submit(); //Submit the form

}); 
```

我建议这样做的原因是因为使用内联 JavaScript 不是一个好习惯。在这里阅读以了解原因-> [http://robertnyman.com/2008/11/20/why-inline-css-and-javascript-code-is-such-a-bad-thing/](http://robertnyman.com/2008/11/20/why-inline-css-and-javascript-code-is-such-a-bad-thing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:19:16.783

检查您的错误控制台（F12 => 控制台）是否有错误。

`href`在 之后被“调用” `onClick`，除非事件具有`return false;`或以其他方式阻止默认操作。

# ios - 如何在不单击按钮的情况下开始操作？

> ID：10769857
> 
> 赞同：1
> 
> 时间：2012-05-26T21:17:29.823
> 
> 标签：ios, ios5, uikit, core-animation

我有两个 UIButtons，我想先在 Number1 中单击`UIButton`，然后在 Number 2中单击`UIButton`。单击第二个后，`UIButton`我希望两个`UIButton`'s 自动旋转。我`CABasicAnimation`用来旋转它们。两者`UIButton`的`buttonClicked`动作相同。这两个按钮使用不同的`CABasicAnimation`方法。

我创建了一个新方法来旋转它，但是当我从`button clicked`动作中调用它时（两个按钮相同），只有第一个被旋转。为了调用我使用的旋转方法`[self rotateButtons];`

问题是，如果我插入一个新按钮`UIButton`并给`IBAction`新按钮一个就可以了。但我不想要图层中的新按钮。

我如何修复`rotateButtons`以便两个按钮**可以同时旋转**？

这是代码：

```
- (void)animationDidStop:(CAAnimation *)theAnimation finished:(BOOL)flag
{
    if ([value isEqualToString:@"SecondImage"])
    {
        UIImageView *myView2=(UIImageView *)[self.view viewWithTag:numberOfCurrentButton+100];
        [myView2 setHidden:FALSE];
        UIImageView *myView=(UIImageView *)[self.view viewWithTag:numberOfCurrentButton];
        [myView setHidden:TRUE];
        CALayer *layer2 =  myView2.layer;
        layer2.anchorPoint = CGPointMake(0.5f, 0.5f);
        CABasicAnimation *animateImage2 = [CABasicAnimation animationWithKeyPath: @"transform"];
        CATransform3D transform2 = CATransform3DIdentity;
        transform2.m34 = 1.0/-900.0; 
        self.view.layer.transform = transform2;
        layer2.transform = CATransform3DMakeRotation(-M_PI/2, 0.0f, 1.0f, 0.0f);
        self.view.layer.transform = transform2;
        transform2 = CATransform3DRotate(transform2,  -M_PI, 0.0f, 1.0f, 0.0f);
        animateImage2.repeatCount = 1.0;
        animateImage2.toValue = [NSValue valueWithCATransform3D: transform2];
        animateImage2.duration = 0.5;
        animateImage2.fillMode = kCAFillModeForwards;
        animateImage2.removedOnCompletion = NO;
        [layer2 addAnimation: animateImage2 forKey: @"halfAnimatedImage"];

        return;
    }
}

-(void) rotateView1
{
    UIImageView *firstImage=(UIImageView *)[self.view viewWithTag:numberOfCurrentButton];
    CALayer *layer =  firstImage.layer;
    layer.anchorPoint = CGPointMake(0.5f, 0.5f);
    CABasicAnimation *animateImage = [CABasicAnimation animationWithKeyPath: @"transform"];
    CATransform3D transform = CATransform3DIdentity;
    transform.m34 = 1.0/-900.0; 
    self.view.layer.transform = transform;
    layer.transform = CATransform3DMakeRotation(M_PI, 0.0f, 1.0f, 0.0f);
    [animateImage setDelegate:self ];
    animateImage.repeatCount = 0.5;
    animateImage.toValue = [NSValue valueWithCATransform3D: transform];
    animateImage.duration = 0.5;
    animateImage.fillMode = kCAFillModeForwards;
    animateImage.removedOnCompletion = NO;
    animateImage.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
    [animateImage setValue:@"SecondImage" forKey:@"halfAnimatedImage"];
    [layer addAnimation: animateImage forKey: @"halfAnimatedImage"];
}
-(void) rotateView2
{
    UIImageView *firstImage=(UIImageView *)[self.view viewWithTag:numberOfCurrentButton];
    CALayer *layer =  firstImage.layer;
    layer.anchorPoint = CGPointMake(0.5f, 0.5f);
    CABasicAnimation *animateImage = [CABasicAnimation animationWithKeyPath: @"transform"];
    CATransform3D transform = CATransform3DIdentity;
    transform.m34 = 1.0/-900.0; 
    self.view.layer.transform = transform;
    layer.transform = CATransform3DMakeRotation(M_PI, 0.0f, 1.0f, 0.0f);
    [animateImage setDelegate:self ];
    animateImage.repeatCount = 0.5;
    animateImage.toValue = [NSValue valueWithCATransform3D: transform];
    animateImage.duration = 0.5;
    animateImage.fillMode = kCAFillModeForwards;
    animateImage.removedOnCompletion = NO;
    animateImage.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
    [animateImage setValue:@"SecondImage" forKey:@"halfAnimatedImage"];
    [layer addAnimation: animateImage forKey: @"halfAnimatedImage"];
}
-(IBAction) buttonRefresh:(UIButton *)sender
{
    numberOfCurrentButton=1; 
    [self rotateView1];
    numberOfCurrentButton=2;
    [self rotateView2];
}
-(IBAction)buttonClicked:(UIButton *)sender
{
    [self buttonRefresh:sender];

} 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T03:55:57.627

根据我的理解，您的 buttonClicked 操作接收发送者（被点击的 UIButton）并且您旋转相同。

要旋转两者，您可以执行以下任一操作：

1.  为这两个按钮创建一个 IBOutlet（不是 IBAction）。在您的 rotateButtons 方法中，不仅要旋转发送方 UIButton，还要旋转这两个按钮。
2.  正如上面@lnafziger 所建议的，在XIB 中用数字标记两个按钮。在 rotateButtons 方法中旋转这两个按钮。您可以使用以下代码获取每个 UIButton：

    ```
    UIbutton *button1 = (UIButton *)[self.view viewWithTag:101]; 
    ```

# javascript - 无法在 IE 中使用 FB 身份验证

> ID：10769860
> 
> 赞同：0
> 
> 时间：2012-05-26T21:17:40.247
> 
> 标签：javascript, facebook, perl, login, sdk

我正在尝试使用 FB Javascript SDK 在我的网站上对用户进行身份验证。登录按钮拒绝出现在我拥有的任何版本的 IE 上。它出现在 Opera、Safari 等上。

有谁知道这个问题的答案？

另外，一个相当广泛的问题：我是一名 Perl 程序员，如果通过 Perl 更容易做到这一点，我会更喜欢，但如果我不能，我不能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T14:19:04.400

我不确定是否可以放置您自己的登录按钮。

值得一试——我的登录按钮在早期版本的 IE (7+8) 中不起作用。我发现 javascript 侦听器事件给我带来了问题，并将侦听器事件更改为 onclick 事件固定登录。

它在其他浏览器中工作的事实意味着您的代码可能没问题，但请仔细检查是否将 HTML 嵌入 perl 中，检查 JQuery 中的所有 $ 符号是否都是反斜杠（例如 \$），否则它们会在呈现时消失并且它将失败。只需检查源代码是否与您的 perl 嵌入式代码匹配。

否则你能提供一些代码或页面链接吗？

# lisp - 应该是一个lamba表达式-LISP

> ID：10769861
> 
> 赞同：0
> 
> 时间：2012-05-26T21:17:44.880
> 
> 标签：lisp, expression

我的代码只有一个功能：

```
(defun equalprev (x y)
  (cond ((or (atom x) (atom y))
         (if (not (null isLoop))
             t
           ((setq list1 (append list1 (list x)))
            (setq list2 (append list2 (list y)))
            (eql x y))))
        ((equalprev (car x) (car y))
         (equalprev (cdr x) (cdr y))))) 
```

```
*** - SYSTEM::%EXPAND-FORM: (SETQ LIST1 (APPEND LIST1 (LIST X))) should be a lambda
expression
The following restarts are available:
ABORT          :R1      Abort main loop 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T22:38:07.400

'if' 表达式的替代表达式是 ((set! ...) ...)。第一个位置需要是函数或句法形式。在这种情况下，您需要 progn 为：

```
(progn
  (setq list1 ...)
  (setq list2 ...)
  (eql x y)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T12:39:15.733

使用德摩根定律，您可以以不同的方式构建您的条件：

```
(not
 (when (null isLoop)
   (setq list1 (append list1 (list x)))
   (setq list2 (append list2 (list y)))
   (not (eql x y)))) 
```

完全避免使用 progn （并不是说这是一件坏事，但它经常被不赞成）。

# c - 动态内存位置 C - 参数 int *

> ID：10769864
> 
> 赞同：1
> 
> 时间：2012-05-26T21:17:56.287
> 
> 标签：c, memory

我有一段代码：

```
void Read(int T[], int len) {
    int i;
    T = (int*) malloc(len * sizeof *T);
    for (i=0;i<len;i++) {
        scanf("%d", &T[i]);
    }
} 
```

我以这种方式使用：

```
int *T;
Read(T,len); 
```

接下来，我想写我的表：

```
void Write(int T[], int len) {
    int i;
    for(i=0;i<len;i++) {
        printf("%d, ", T[i]);
    }
    printf("\n");
    return;
} 
```

并使用它：

```
Write(T,len); 
```

它给了我错误的结果。我几乎可以肯定这个问题与“ **&** ”有关，但我无法处理它。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T21:29:36.843

一个问题可能是您正在修改函数`T`内部的局部变量：`Read`

```
int *T;
Read(T, len);
// ...

void Read(int T[], int len) {
    int i;
    T = (int*) malloc(len * sizeof *T);
    // ...
} 
```

内部是真实变量`T`的副本。您为副本分配了一个新值，但原始值保持不变。`Read``T`

要实际修改 external `T`，请将指针传递给它，如下所示：

```
int *T;
Read(&T, len);
// ...

void Read(int **T, int len) {
    int i;
    *T = (int*) malloc(len * sizeof *T);
    for (i=0;i<len;i++) {
        scanf("%d", &(*T)[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:25:21.977

尝试以下（功能`Write`不变）：

```
void Read(int T[], int len) {
    int i;
    for (i=0;i<len;i++) {
        scanf("%d", &T[i]);
    }
}

T = (int*) malloc(len * sizeof *T);
Read(T,len);

Write(T,len); 
```

**更新**：但是如果你想`Read`分配内存，它必须接收一个指向指针的指针：

```
void Read(int *T[], int len) {
    int i;
    T = (int**) malloc(len * sizeof **T)

    for (i=0;i<len;i++) {
        scanf("%d", &(*T)[i]); /* not the easiest expression in the language */
    }        
}

Read(&T, len);
Write(T, len); 
```

实际上，修改`Read`为直接返回指针会更容易，但也许这不是你想要的：`int *Read(int len) { ... }`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T21:50:59.420

Nate 的解决方案非常好，但我觉得它有点不雅。

C 本身就相当模糊，我看不出有什么理由让它如此之多。我建议您使用以下内容：

将您的签名更改`void Read(int T[], int len)`为`int* Read(int T[], int len)`.

这样做有很多好处。它不仅使您的代码更具可读性，而且还消除了讨厌的读取带来的“隐藏”副作用（部分），并且还清楚地说明了您的意图是什么，因此您不太可能忘记`free()`简单地调用因为您看到返回了一个指针，所以这暗示函数中可能存在偷偷摸摸的动态分配。你也少了一层需要担心的间接性。

然后您可以执行以下操作：

```
int* Read(int T[], int len) {
    int i;
    T = (int*) malloc(len * sizeof(T));
    for (i=0; i<len; ++i) {
        scanf("%d", &T[i]);
    }
    return T; // Basically the only change!
} 
```

现在，在调用你的函数中`Read()`：

```
int main() {

const int size = 5;
int *T = 0; // It's not needed to do a prior declaration and initialization
            // but it does silence a warning which is a good thing.
T = Read(T, size);
Write(T, size);

// Do more stuff and free() whenever needed

return 0;
} 
```

# mysql - 当同时保留父/子对象时，如何在 Hibernate + Spring JPA 配置中填充外键值？

> ID：10769865
> 
> 赞同：4
> 
> 时间：2012-05-26T21:18:05.503
> 
> 标签：mysql, spring, hibernate, jpa, spring-data-jpa

我有两个对象，Parent 和 Child。Child 有一个外键返回 PARENT 表（MySQL 数据库）中的 PARENT_ID 字段。

当同时创建/组装 Parent 和 Child 对象并调用 persist 时，不会自动填充 Child PARENT_ID 外键。

示例代码：

```
@Entity
@Table(name = "PARENT")
public class Parent {
    @Column(name = "PARENT_ID")
    private Long parentId;

    @OneToMany(mappedBy = "parent")
    private List<Child> children;
}

@Entity
@Table(name = "CHILD")
public class Child {
    @Column(name = "CHILD_ID")
    private Long childId;

    @Column(name = "PARENT_ID")
    private Long parentId;

    @ManyToOne
    @JoinColumn(name = "parent_id")
    private Parent parent;
} 
```

我有两个持久性样本：

1）使用休眠EntityManager：

```
@PersistenceContext
EntityManager em;

...

em.persist(parent); 
```

2) 使用 Spring Data JPA JpaRepository 实例：

```
public interface ParentRepository extends JpaRepository<Parent, Long> {

} 
```

在我的 ParentServiceImpl 中：

```
@Autowired
private ParentRepository parentRepository;

...

public Parent save(Parent parent) {
    return parentRepository.save(parent);
} 
```

填充外键的推荐策略是什么？是否应该先保留 Parent 对象，然后再保留 Child 对象的外键？或者有没有办法通过自动或通过引用设置外键来一次持久化它？

编辑：添加了持久性示例。

**编辑 2（已修复！）：根据 Ryan Stewart 的第二点解决了问题。我从 Child 对象中删除了 Long parentId 字段，并将 parentId 的 @Column 引用放在 getter 上。还要确保正确设置参考（重要的是子参考回到父）。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T22:03:12.420

该代码有两件事阻止它工作：

1.  您的实体没有`@Id`. 您可能只是因为这是一个示例而忽略了它，但值得指出。
2.  您已经对 column 进行了双重映射`parent_id`。Child 具有映射到同一列的 Long 字段和 Parent 字段。摆脱龙。这是你所追求的父母关系。

之后，您将拥有一个完全传统的双向一对多连接列。如果它不适合您，那么您在创建和保存它们的代码中做错了。很可能，您没有正确创建对象。使用这些实体的正确代码如下所示：

```
Session session = sessionFactory.openSession();
Transaction tx = session.beginTransaction();
Parent p = new Parent();
Child child = new Child();
child.parent = p;
Child child1 = new Child();
child1.parent = p;
p.children = Arrays.asList(child, child1);
session.save(p);
session.save(p.children.get(0));
session.save(p.children.get(1));
tx.commit(); 
```

特别要注意的是，child 应该设置在 parent 中，而 parent 应该设置在 child 中。不要建立一个半损坏的对象模型并期望 Hibernate 来清理你的烂摊子。许多人忽略了这个看似显而易见的要求，并想知道为什么 Hibernate 看起来不稳定和/或不可靠。

# c# - 消息队列的延迟调用？

> ID：10769868
> 
> 赞同：1
> 
> 时间：2012-05-26T21:19:09.980
> 
> 标签：c#, msmq

我有一个现有的应用程序，它通过排队传输将消息从一个进程发送到另一个进程。我想通过延迟处理消息来改变消息的处理方式，并让队列更多地充当优先级队列，其中应该首先在队列顶部处理消息。

IE：

在时间 0，消息 A 以 15 分钟的延迟发送到队列。5 分钟后，消息 B 发送到队列，延迟 10 分钟。处理队列的服务随后崩溃并且在 15 分钟内没有重新启动。当队列再次开始处理时，消息 B 将在顶部，然后是消息 A。

在 C# / MSMQ / .NET 生态系统中有这样的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:16:21.510

如果您在 Windows Azure 上进行云编程，有一种方法可以解决这个问题。只需指定`visibilitytimeout`要放置的消息。

来自[http://msdn.microsoft.com/en-us/library/windowsazure/dd179346.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179346.aspx)：

> 可见性超时=
> 
> 可选的。如果指定，则必须使用 2011-08-18 或更高版本的 x-ms-version 发出请求。如果未指定，则默认值为 0。指定新的可见性超时值，以秒为单位，相对于服务器时间。新值必须大于等于 0，且不能大于 7 天。消息的可见性超时不能设置为晚于到期时间的值。visibilitytimeout 应设置为小于生存时间值的值。
> 
> 可选的可见性超时指定消息不可见的时间。超时到期后，消息将变为可见。如果未指定可见性超时，则使用默认值 0。

# android - 通过 Market 和我自己的服务器申请。崩溃报告呢？

> ID：10769870
> 
> 赞同：1
> 
> 时间：2012-05-26T21:19:30.717
> 
> 标签：android, deployment

我不确定这将如何工作。假设我有 android 应用程序，我将通过 Android 市场分发它，并将它保存在我的服务器上（相同的 APK）

我有自己的更新应用程序的方式（下载 APK 并提示用户安装）。我想知道这个应用程序是否会报告崩溃/ANR ot market？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:52:47.983

否 - 必须从 Google Play 下载它才能获得崩溃报告的好处。

# ruby-on-rails - 找不到 id=pJycxPPmoBQw9D2mfW6W 的用户

> ID：10769873
> 
> 赞同：1
> 
> 时间：2012-05-26T21:19:56.223
> 
> 标签：ruby-on-rails, sorcery

实际上，我使用巫术进行身份验证，设置如下：

*   导轨 3.2.3
*   PostgreSQL 9.1.3
*   可以可以

当我单击激活链接时，出现以下错误：

```
ActiveRecord::RecordNotFound in UsersController#activate 

Couldn't find User with id=pJycxPPmoBQw9D2mfW6W 
```

**users_controllers.rb**

＃可以可以

```
before_filter :require_login, :except => [:not_authenticated, :new, :create, :activate]
load_and_authorize_resource 
skip_authorization_check :only => [:new, :create, :activate]
skip_authorize_resource  :only => [:new, :create, :activate] 
```

#激活方法

```
def activate
    if (@user = User.load_from_activation_token(params[:id]))
      @user.activate!
      redirect_to(login_path, :notice => 'Your account is activated.')
    else
      not_authenticated
    end
  end 
```

**生成令牌**

```
def generate_token(column)
    begin
      self[column] = SecureRandom.urlsafe_base64
    end while User.exists?(column => self[column])
end 
```

**魔法源代码中的 load_from_activation_token**

```
def load_from_activation_token(token)
  token_attr_name = @sorcery_config.activation_token_attribute_name
  token_expiration_date_attr = @sorcery_config.activation_token_expires_at_attribute_name
  load_from_token(token, token_attr_name, token_expiration_date_attr)
end 
```

请问我可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T22:43:07.117

啊哈，我认为问题出在这里：

```
load_and_authorize_resource 
```

显然，`params[:id]`请求`#activate`不是用户ID，而是令牌。Cancan 尝试使用此加载用户并且（预期）失败。您也需要跳过此操作的加载（与您已经跳过授权的方式类似）。

```
skip_load_and_authorize_resource  :only => [:new, :create, :activate] 
```

# apache - .htaccess 文件未被读取（.htaccess 文件中的“选项-索引”不起作用）

> ID：10769880
> 
> 赞同：37
> 
> 时间：2012-05-26T21:20:29.420
> 
> 标签：apache, .htaccess

我创建了一个仅包含以下行的 .htaccess 文件：

> 选项 - 索引

但是，仍会为目录显示索引。

我刚刚安装了 Apache2 并使用了所有默认值（我没有修改 apache2.conf 或 httpd.conf）。

操作系统：`Ubuntu 12.04 (Precise Pangolin)`
Apache2 版本：`Server version: Apache/2.2.22 (Ubuntu) Server built: Feb 13 2012 01:51:56`

> $ ls -l .htaccess
> -rwxr-xr-x .htaccess

编辑：

我接受了 lanzz 的建议，在`.htaccess`文件中添加了乱码，发现`.htaccess`文件没有被读取。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-26T21:22:54.100

您应该检查 Apache 配置是否允许执行 .htaccess。在您的虚拟主机配置中，应该有一行：

`AllowOverride All`

如果没有，这就是 .htaccess 没有生效的原因。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-26T23:07:56.363

为了使其正常工作，我将以下内容添加到`/etc/apache2/httpd.conf`（安装 Apache 时默认为零长度文件），然后重新启动 Apache。现在`Options -Indexes`在`.htaccess`文件中按需要工作。这是让它工作的最低要求：

`/etc/apache2/httpd.conf :`

```
<VirtualHost *:80>
        DocumentRoot /var/www
        <Directory / >
        </Directory>
</VirtualHost> 
```

[lanzz](https://stackoverflow.com/users/643827/lanzz)建议在文件中添加一行乱码以`.htaccess`查看它是否正在被读取，这有助于诊断问题。

请注意，根据[Evan Mulawski](https://stackoverflow.com/users/483349/evan-mulawski)`AllowOveride`的评论，默认为，因此在上面的最小行集中不需要它。`All``httpd.conf`

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-03-28T02:33:31.083

I had the same problem. I was using a virtual host so I modified httpd-vhosts.conf so if you are using one this could help

Where you configure your host reference the directory tag to be the same as your document root

```
<VirtualHost *:8080>
ServerName somelocalserver
DocumentRoot "C:/Websites/htdocs/yoursite"
<Directory "C:/Websites/htdocs/yoursite">
    Options FollowSymLinks
    AllowOverride All
</Directory> 
```

I needed `AllowOverride All` to recognize the .htaccess file.

Edit

I also needed to add the path to the site root in the directory tag itself. i.e. `<Directory "C:/Websites/htdocs/yoursite">`. This was the default in the samples I used.

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-11-25T19:24:12.447

As there's no `httpd.conf` file anymore, what you need to do on a VPS is:

1.  Go to `/etc/apache2/sites-enabled/`
2.  Do `ls` to find the file for the website you're looking for
3.  Edit the corresponding file with `nano THE_CONF_FILE` or with whatever editor you'd like
4.  Change all `AllowOverride None` values that you see in different `<Directory> ... </Directory>`s to `AllowOverride All`
5.  Save the file and close it

6.  Now you need to enable module rewrite by running the command:`sudo a2enmod rewrite`

7.  And finally to activate the new configuration, you need to run: `service apache2 restart`

It'll work like a charm now!

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-12-17T16:56:35.977

如果你有

```
AllowOverride None 
```

将其更改为：

```
AllowOverride All 
```

在您的 httpd.conf 或 /etc/apache2/sites-available/...conf 中的默认虚拟主机文件中

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-08-10T19:11:51.620

I solved this problem on RHEL by editing file `/etc/http/conf/httpd.conf` I changed all

```
AllowOverride None 
```

To

```
AllowOverride All 
```

Also you can check httpd.conf AllowOverride by following command on RHEL

```
grep -i AllowOverride /etc/conf/conf/httpd.conf 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-06T18:22:16.237

Also, beside changing AllowOverride All to the vhost configuration file, you may also need to add the following at the beginning of the .htaccess file:

```
RewriteEngine On
RewriteBase / 
```

Otherwise may still not detecting the rewrites or redirects.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-29T11:46:21.857

One more reason one's htaccess file is not being read is an existing htaccess enforces a HTTPS 301 redirect that the browser then caches which can be a problem if virtual hosts are not configured correctly. Full explanation below.

If one is setting up a virtual host in Apache and XAMPP for example, the first time you fire up the URL of your virtual host, if you have an existing htaccess file with a HTTPS 301 redirect, your browser will get redirected to the HTTPS version of your virtual host. But there's a potential problem. If you haven't explicitly set up a *:433 virtual host for the domain in question, in your Apache vhosts config file, Apache will default to using the first virtual host listed.

Depending on the contents of this default virtual host it may be impossible to distinguish what is happening, and user will maddeningly try to determine why changes to the htaccess file are no longer being processed.

Once you determine what is happening, the workaround is to disable any HTTPS redirects and reboot and try again without HTTPS. The real solution is to complete a full virtual host 443 setup with certificate.

# qt - 使用 Qt 和鼠标悬停在 QGraphicsTextItem 上的动画 GUI

> ID：10769881
> 
> 赞同：0
> 
> 时间：2012-05-26T21:20:39.810
> 
> 标签：qt, user-interface, animation, qgraphicsscene

我正在尝试借助 Windows 上的 Qt 4.8 制作自己的动画 GUI。一开始我使用小部件和 Qt 设计器来放置水平/网格/等布局并放入普通小部件中，但我发现让它们与动画框架一起移动并不容易。所以我切换到 QGraphicsScene/QGraphicsView 似乎更容易与动画一起使用。我会制作一个简单的菜单，其中有主要项目，当悬停时可以看到子菜单项目。一些简单的事情，关于下拉水平菜单。我放置了 QGraphicsTextItem 项，但我仍然不明白如何连接主项的悬停事件以显示子菜单项。任何的想法？目前我有一个 QMainWindow 和一个 QGraphicsView 小部件，它占据了所有区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T05:37:48.487

您可以通过创建自己的专用子类`QGraphicsTextItem`并重新实现[`hoverEnterEvent`](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#hoverEnterEvent)and`hoverLeaveEvent`方法来在悬停时显示子菜单（或执行您想要的任何操作）。

确保您已阅读[`setAcceptHoverEvents`](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#setAcceptHoverEvents)文档，以便了解何时以及针对哪些项目生成这些事件。

# ruby-on-rails - 如何在rails 3.2.3中处理原始提交表单中的参数

> ID：10769882
> 
> 赞同：1
> 
> 时间：2012-05-26T21:20:41.917
> 
> 标签：ruby-on-rails

如何处理从原始 HTML 表单传入的参数？

在 /views/feeders/index.html.erb 中：

```
<form action="/feeders/extract/" method="post" accept-charset="utf-8">
    <input type="text" name="url" value="" id="url">    
    <p><input type="submit" value="submit"></p>
</form> 
```

在 /controllers/feeders_controller.rb

```
class FeedersController < ApplicationController
  def index
    @url=params[:url]
  end

  def show

  end

  def extract
    @url=params[:url]
    redirect_to :controller => 'feeders', :action => 'show'
  end
end 
```

在 routes.rb 中：

```
 root :to => 'feeders#index'
  match '/feeders/extract/:url' => 'feeders#extract', :via => :post
  match '/feeders/show/' => 'feeders#show' 
```

我不断得到

```
Routing Error

No route matches [POST] "/feeders/extract" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:40:18.897

第 1 点

将您的路线设为

```
post "feeders/extract" => "feeders#extract" 
```

你的路线匹配 '/feeders/extract/:url' => 'feeders#extract', :via => :post

将允许像这样的网址

```
POST /feeders/extract/somevalue => params[:url] => 'somevalue'
POST /feeders/extract/123       => params[:url] => '123' 
```

尝试“rake routes”以了解更多信息

第 2 点：在您遵循上面的第 1 点之后

当我试图从您的评论中了解您的需求时，您需要如下

在你的 routes.rb

```
post "feeders/extract" => "feeders#show"
match '/feeders/show/' => 'feeders#show' 
```

然后也许您不需要在 FeedersController.rb 中提取操作，显示操作将被调用以使用 params[:url] 进行提取调用

第 3 点（替代第 2 点）：在您遵循上面的第 1 点之后

只需将您的控制器编辑为

```
render :show # redirect_to :controller => 'feeders', :action => 'show' 
```

而不是在那里重定向

因此，您可以根据需要使用#1、#2 或#1、#3。

如果“提取”动作/过程在那里有更多意义，你应该选择#1，#2，我的意思是最终用户。

希望我理解你的情况:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:34:53.937

发布请求正在尝试命中`/feeders/extract/`，但您没有任何匹配的路线（我看到的最接近的是`/feeder/extract/:url`）。

改变你的路线`match '/feeders/extract/' => 'feeders#extract', :via => :post`应该可以解决问题。

一旦请求被正确路由到提取操作，您仍然需要`params[:url]`.

# r - gstat 变异函数中的距离单位是什么？

> ID：10769884
> 
> 赞同：9
> 
> 时间：2012-05-26T21:20:51.837
> 
> 标签：r, spatial

[这是对这个问题](https://stackoverflow.com/questions/10736070/calculate-variogram-of-raster-data-with-nas-in-r)的跟进。我现在已经设法使用对该问题的答案绘制数据的变异函数。我正在使用的代码（其中包含[https://gist.github.com/2780792](https://gist.github.com/2780792)中给出的数据`im`的变量是`dput`

```
library(gstat)
point_data <- as(im, 'SpatialPointsDataFrame')
v <- variogram(band1 ~ 1, data = point_data)
plot(v) 
```

这给了我以下情节： ![在此处输入图像描述](../Images/7a8b48429246b11861d6ed0553bdc67e.png)

如您所见，距离轴上的数字范围从 0 到 150 左右。但是，数据的单位是度：

```
> head(coordinates(point_data))
             x        y
[1,] -1.849353 52.06165
[2,] -1.759728 52.06165
[3,] -1.401227 52.06165
[4,] -1.311602 52.06165
[5,] -1.221977 52.06165
[6,] -1.132352 52.06165 
```

鉴于此，X 轴上距离度量的单位是什么？我希望它们与坐标的单位相同。他们以米为单位没有意义，我猜他们可能是公里。

我在 gstat 手册中找不到任何关于此的内容，所以我假设他们使用了基础数据的单位，但情况似乎并非如此。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-26T21:54:09.403

我发现有些人在邮件列表上提出了类似的问题，并重新检查了帮助文件的详细信息。您的数据未投影（proj=+longlat）。正如我在邮件列表中找到[的文档](http://stat.ethz.ch/CRAN/web/packages/gstat/gstat.pdf)和信息所示，它应该以公里为单位，基于[大圆距离](http://en.wikipedia.org/wiki/Great-circle_distance)。查看 variogram 中的投影（逻辑）*参数*：

> 对于投影数据，计算欧几里得距离，对于未投影的大圆距离 (km)。

# java - 事件调度线程究竟是什么时候开始的？

> ID：10769895
> 
> 赞同：15
> 
> 时间：2012-05-26T21:22:27.203
> 
> 标签：java, swing, event-dispatch-thread

EDT 究竟是什么时候开始的？哪一行代码负责它？

我的猜测是“someSwingComponent.setVisible(true)”可以解决问题，但我不确定。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-26T23:06:28.203

### Q: When exactly is the EDT started? What line of code is responsible [f]of it?

The inner workings of Swing are JVM-specific. Different JVMs start the Event Dispatch Thread (EDT) based on differing criteria. In general though:

> The EDT starts when it receives its first `AWTEvent`.

The stack traces below reaffirm this point. Take for example the following `main` method.

```
public static void main(String[] args) {
    JFrame frame = new JFrame();
    frame.setVisible(true);
} 
```

In the example above, the line of code responsible for starting the EDT is `frame.setVisible(true);`

The above `main` method was executed on two different JVMs. A breakpoint was placed at `EventQueue.initDispatchThread`. When the breakpoint was hit, the following stack traces were noted.

Using the Mac's JDK on the `AWT-AppKit` thread:

```
EventQueue.initDispatchThread() line: 906   
EventQueue.wakeup(boolean) line: 1109   
NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]  
NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39  
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25  
Method.invoke(Object, Object...) line: 597  
SunToolkit.wakeupEventQueue(EventQueue, boolean) line: 348  
PostEventQueue.postEvent(AWTEvent) line: 2137   
SunToolkit.postEvent(AppContext, AWTEvent) line: 583    
SunToolkit.executeOnEventHandlerThread(PeerEvent) line: 654 
SunToolkit.executeOnEventHandlerThread(Object, Runnable) line: 631  
EventFactoryProxy.windowMoved(CWindow) line: 89 
```

Using Oracle's JDK for Windows on the `main` thread:

```
java.awt.EventQueue.initDispatchThread() line: 861  
java.awt.EventQueue.postEventPrivate(java.awt.AWTEvent) line: 199   
java.awt.EventQueue.postEvent(java.awt.AWTEvent) line: 180  
javax.swing.RepaintManager.scheduleProcessingRunnable(sun.awt.AppContext) line: 1369    
javax.swing.RepaintManager.nativeAddDirtyRegion(sun.awt.AppContext, java.awt.Container, int, int, int, int) line: 548   
javax.swing.SwingPaintEventDispatcher.createPaintEvent(java.awt.Component, int, int, int, int) line: 45 
sun.awt.windows.WFramePeer(sun.awt.windows.WComponentPeer).postPaintIfNecessary(int, int, int, int) line: 741   
sun.awt.windows.WFramePeer(sun.awt.windows.WComponentPeer).handlePaint(int, int, int, int) line: 736    
sun.java2d.d3d.D3DScreenUpdateManager.repaintPeerTarget(sun.awt.windows.WComponentPeer) line: 274   
sun.java2d.d3d.D3DScreenUpdateManager.createScreenSurface(sun.awt.Win32GraphicsConfig, sun.awt.windows.WComponentPeer, int, boolean) line: 175  
...
sun.awt.windows.WToolkit.createFrame(java.awt.Frame) line: 383  
javax.swing.JFrame(java.awt.Frame).addNotify() line: 460    
javax.swing.JFrame(java.awt.Window).show() line: 859    
javax.swing.JFrame(java.awt.Component).show(boolean) line: 1584 
javax.swing.JFrame(java.awt.Component).setVisible(boolean) line: 1536   
javax.swing.JFrame(java.awt.Window).setVisible(boolean) line: 842   
Example.main(java.lang.String[]) line: 113 
```

On the Mac, a call to `PostEventQueue.postEvent(AWTEvent)` is made. Similarly on Windows, a call to `java.awt.EventQueue.postEvent(java.awt.AWTEvent)` is made. Both eventually call `EventQueue.initDispatchThread`.

* * *

As another example, consider the following `main` method:

```
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            System.out.println("Start!");
        }
    });
} 
```

Using the Mac's JDK on the `main` thread:

```
EventQueue.initDispatchThread() line: 906 [local variables unavailable] 
EventQueue.postEventPrivate(AWTEvent) line: 227 
EventQueue.postEvent(AWTEvent) line: 208    
EventQueue.invokeLater(Runnable) line: 1048 
SwingUtilities.invokeLater(Runnable) line: 1267 
Example.main(String[]) line: 31 
```

Using Oracle's JDK for Windows on the `main` thread:

```
java.awt.EventQueue.initDispatchThread() line: 861  
java.awt.EventQueue.postEventPrivate(java.awt.AWTEvent) line: 199   
java.awt.EventQueue.postEvent(java.awt.AWTEvent) line: 180  
java.awt.EventQueue.invokeLater(java.lang.Runnable) line: 999   
javax.swing.SwingUtilities.invokeLater(java.lang.Runnable) line: 1267 
```

The call to `SwingUtilties.invokeLater` is responsible for starting the EDT. Here again, calls to `EventQueue.postEvent(AWTEvent)` are made.

* * *

### Thoughts on 'My guess is that "someSwingComponent.setVisible(true)" does the trick, but I'm not sure.'

Not just any call to `someSwingComponent.setVisible(true)` will start the EDT. For example, executing the following `main` method does not create the `AWT-Event-Queue-0` thread:

```
public static void main(String[] args) {
    JLabel label = new JLabel();
    label.setVisible(true);
} 
```

* * *

### Resources

Of course, there are many resources online about the EDT.

*   ["The Event Dispatch Thread"](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html) from The Java Tutorials's ["Lesson: Concurrency in Swing"](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)
*   ["Threads and Swing"](http://java.sun.com/products/jfc/tsc/articles/threads/threads1.html#event_dispatching) from the Sun Developer Network
*   ["Swing Threads"](http://mindprod.com/jgloss/swingthreads.html) from the Java Glossary at mindprod.com
*   ["How does the event dispatch thread work?"](https://stackoverflow.com/questions/2484425/how-does-the-event-dispatch-thread-work) on Stack Overflow

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T22:16:11.763

编辑：你们是对的；EDT 不会在启动时直接启动。我做了一些调试，这就是我发现的：

每当组件通过调用 Toolkit.getEventQueue() 请求访问事件队列时，都会延迟启动事件调度线程。这可以在调用 Component.show() 时完成（与 Component.setVisible() 相同），但也有其他调用可以触发此初始化，如 Component.repaint()。一旦获得对事件队列的引用，就可以使用 EventQueue.postEvent() 将作业添加到其中。此方法检查 EDT 是否存在，如果不存在，则使用 initDispatchThread() 创建它。

阻止它启动的唯一方法是使用“-Djava.awt.headless=true”标志以无头模式启动JVM（这会同时禁用AWT）。但这基本上是您可以与之进行的唯一低级交互。

组件的 setVisible 方法应始终在 EDT 上调用（就像您对 Swing / AWT 组件所做的任何其他修改一样）。您通过告诉 Java 在 EDT 上执行代码来使用 EDT。最简单的方法是使用 SwingUtilities.invokeLater()。这会安排您的 Thread（您的 Runnable 实现）从 EDT 执行。这是您作为开发人员应该与 EDT 进行的唯一一种交互。您不应该与 EDT 进行任何类型的低级交互，例如暂停或中止线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T22:57:14.460

*   对于任何启动 EDT 的 AWT / Swing 容器，您是正确的 setVisible，非安全方式

*   [初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)是关于最安全的方式

*   如果所有事件都在当前 EDT 中完成，则 isDispatchThread 返回 false

*   在 isDispatchThread 返回 false 的情况下，任何 Swing 线程安全方法都可以激活 EDT，最安全的方法是从 invokeLater() 调用

测试代码

```
import java.awt.Color;
import java.awt.EventQueue;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.concurrent.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;

public class IsThereEDT {

    private ScheduledExecutorService scheduler;
    private AccurateScheduledRunnable periodic;
    private ScheduledFuture<?> periodicMonitor;
    private int taskPeriod = 30;
    private SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");
    private Date dateRun;
    private JFrame frame1 = new JFrame("Frame 1");

    public IsThereEDT() {
        scheduler = Executors.newSingleThreadScheduledExecutor();
        periodic = new AccurateScheduledRunnable() {

            private final int ALLOWED_TARDINESS = 200;
            private int countRun = 0;
            private int countCalled = 0;
            private int maxCalled = 10;

            @Override
            public void run() {
                countCalled++;
                if (countCalled < maxCalled) {
                    if (countCalled % 3 == 0) {
                        SwingUtilities.invokeLater(new Runnable() {

                            @Override
                            public void run() {
                                System.out.println("Push a new event to EDT");
                                frame1.getContentPane().setBackground(Color.red);
                                isThereReallyEDT();
                            }
                        });
                    } else {
                        if (this.getExecutionTime() < ALLOWED_TARDINESS) {
                            countRun++;
                            isThereReallyEDT(); // non on EDT
                        }
                    }
                } else {
                    System.out.println("Terminating this madness");
                    System.exit(0);
                }
            }
        };
        periodicMonitor = scheduler.scheduleAtFixedRate(periodic, 0, taskPeriod, TimeUnit.SECONDS);
        periodic.setThreadMonitor(periodicMonitor);
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                isThereReallyEDT();
                frame1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame1.getContentPane().add(new JLabel("Hello in frame 1"));
                frame1.pack();
                frame1.setLocation(100, 100);
                frame1.setVisible(true);
            }
        });
        try {
            Thread.sleep(500);
        } catch (InterruptedException ex) {
            Logger.getLogger(IsThereEDT.class.getName()).log(Level.SEVERE, null, ex);
        }
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame2 = new JFrame("Frame 2");
                frame2.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame2.getContentPane().add(new JLabel("Hello in frame 2"));
                frame2.pack();
                frame2.setLocation(200, 200);
                frame2.setVisible(true);
                isThereReallyEDT();
            }
        });
    }

    private void isThereReallyEDT() {
        dateRun = new java.util.Date();
        System.out.println("                         Time at : " + sdf.format(dateRun));
        if (EventQueue.isDispatchThread()) {
            System.out.println("EventQueue.isDispatchThread");
        } else {
            System.out.println("There isn't Live EventQueue.isDispatchThread, why any reason for that ");
        }
        if (SwingUtilities.isEventDispatchThread()) {
            System.out.println("SwingUtilities.isEventDispatchThread");
        } else {
            System.out.println("There isn't Live SwingUtilities.isEventDispatchThread, why any reason for that ");
        }
        System.out.println();
    }

    public static void main(String[] args) {
        IsThereEDT isdt = new IsThereEDT();
    }
}

abstract class AccurateScheduledRunnable implements Runnable {

    private ScheduledFuture<?> thisThreadsMonitor;

    public void setThreadMonitor(ScheduledFuture<?> monitor) {
        this.thisThreadsMonitor = monitor;
    }

    protected long getExecutionTime() {
        long delay = -1 * thisThreadsMonitor.getDelay(TimeUnit.MILLISECONDS);
        return delay;
    }
} 
```

# c++ - 专门化内部类

> ID：10769901
> 
> 赞同：1
> 
> 时间：2012-05-26T21:23:30.777
> 
> 标签：c++, templates

是否可以专门化在模板类中声明的内部类？或多或少类似于以下示例（不起作用）：

```
template<unsigned N>
class Outer {
    struct Inner {
        typedef int Value;
    };
    typedef typename Inner::Value Value;
};

template<>
struct Outer<0>::Inner {
    typedef float Value;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T21:25:49.933

它可以做到，但不像你尝试的那样。您必须专门化整个外部类型：

```
template<>
struct Outer<0>
{
    struct Inner {
        typedef float Value;
    };
    typedef float Value;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:35:12.003

我发现最好的解决办法是搬到`Inner`外面去。

```
template<unsigned N>
struct Inner {
    typedef int Value;
};

template<>
struct Inner<0> {
    typedef float Value;
};

template<unsigned N>
class Outer {
    typedef typename Inner<N>::Value Value;
}; 
```

# https - HTTPS 和共享

> ID：10769905
> 
> 赞同：0
> 
> 时间：2012-05-26T21:24:40.587
> 
> 标签：https, facebook-sharer

我正在编写一个带有 facebook 集成的视频流媒体网站。我们使用元标签分享视频。我最近为我的网络服务器创建了 ssl，因此我可以使用 og 标签为使用安全浏览的 facebook 用户提供共享视频。一切都运行良好，直到突然 facebook 无法再从我的网站获取任何 https 内容。我无法调试问题，因为 facebook 没有显示任何错误，为什么它不能再使用我的 ssl。我在我的网络服务器日志中没有看到任何错误，而且 Facebook 调试工具也没有提供任何详细信息。我可以通过浏览器打开 https url，但 facebook 似乎有问题。这是我的[网址](https://tv-fa.com/index.php/videos/frontend/videos/show_video/6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:55:01.310

我在 Facebook OG Debugger 上解析了两个网址。报告是这样的：

HTTP 请求 - 没有错误（工作正常）

HTTPS 请求 - OG 图像错误

**错误：**

> Unable to download og:image: og:image 标签的 url 引用的图片无法下载。

[OG报告](http://developers.facebook.com/tools/debug/og/object?q=https://tv-fa.com/index.php/videos/frontend/videos/show_video/6)

由于您的 SSL 可疑，这似乎是它无法正常工作的原因。

# android - 在 Andengine 中移动精灵

> ID：10769912
> 
> 赞同：2
> 
> 时间：2012-05-26T21:25:38.220
> 
> 标签：android, box2d, andengine, racing

[我在andengine](http://www.andengine.org/)中做了一个赛车游戏，通过MoveModifier()，汽车在运动。汽车同时是dynamicBody，但是运动时汽车的dynamicBody特性会丢失。

> （敌人 1=汽车）

```
Sprite enemy1=new Sprite(0,0,this.enemyRegion1);
         enemy1.registerEntityModifier(
                    (IEntityModifier) new SequenceEntityModifier (
                            new MoveModifier(10, enemy1.getX(),  enemy1.getX()+400, 
                                    enemy1.getY(), enemy1.getY())));
        final Vector2 velocity = Vector2Pool.obtain(5, 5);

        final FixtureDef enemyFixtureDef1 = PhysicsFactory.createFixtureDef(0, 0, 0);
        this.enemyBody1 = PhysicsFactory.createBoxBody(this.mPhysicsWorld, enemy1, BodyType.DynamicBody, enemyFixtureDef1);
        this.enemyBody1.setLinearVelocity(velocity);
        Vector2Pool.recycle(velocity);
        this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(enemy1, this.enemyBody1, true, false));

        this.scene.attachChild(enemy1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:17:38.567

您不能使用 MoveModifier 移动物理实体，它仅适用于没有 PhysicsConnector 的 Sprite。连接只有一种方式，从 Box2D 引擎到在其之上工作的 AndEngine。您将不得不在物理方面管理汽车运动，并且精灵将跟随身体。不是反过来。

# iphone - 我需要一些关于@2x UIImageViews 的信息

> ID：10769914
> 
> 赞同：0
> 
> 时间：2012-05-26T21:25:48.980
> 
> 标签：iphone, ios, uiimageview, retina-display

只是想知道，我必须如何使用它？

我只需要在图像名称后设置@2x 吗？或者把它放在一个特定的文件夹中？或者是其他东西 ？

感谢您的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T21:26:56.633

就在文件名之后。例如，将您的启动画面命名为 320x480 default.png，然后将您的 640x960 default@2x.png

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T21:27:07.157

您需要做的就是在您的项目中添加第二个图像，名称与原始图像相同，大小正好是原来的两倍，在扩展名之前的文件名末尾带有@2x。

例子：

some-picture.png 是 20x40 像素

some-picture@2x.png 是 40x80 像素

每当您使用该`imageNamed:`方法时，只需传递原始名称，例如`[UIImage imageNamed:@"some-picture.png"]`

使用 Interface Builder 时也是如此。

它会在运行时自动选择正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T21:29:48.330

[我刚刚按照同样的思路回答了另一个问题](https://stackoverflow.com/a/10769687/981049)。

[Apple 实际上在此 iOS 绘图参考指南的“更新您的图像资源文件”部分](http://developer.apple.com/library/ios/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/SupportingHiResScreens/SupportingHiResScreens.html#//apple_ref/doc/uid/TP40010156-CH15-SW8)中详细描述了预期的文件名。

具体来说，在文档中查找这些行：

```
Standard: <ImageName><device_modifier>.<filename_extension>

High resolution: <ImageName>@2x<device_modifier>.<filename_extension> 
```

# javascript - 如何将javascript时间对象转换为不同的格式？

> ID：10769916
> 
> 赞同：0
> 
> 时间：2012-05-26T21:25:50.933
> 
> 标签：javascript, datetime

```
 tableHTML += "<td class=\"stamp\">"+jsonObject[i]['stamp']+"</td>"; 
```

这目前正在显示`2012-05-25 23:08:57`如何将其更改为`May 25,2012`

一位评论员指出，使用 php 执行此操作可能会更好，我唯一可以使用 php 执行此操作的时间是在将其输入到数组之前。这可能吗？

```
$videos_array = array();
while ($i < $num) {
$current_video = array (
'stamp'=>mysql_result($result,$i,"stamp"));
array_push($videos_array, $current_video);
        $i++;
    }
    echo json_encode($videos_array); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:27:23.910

我强烈推荐使用 Date.js [http://www.datejs.com/](http://www.datejs.com/)虽然很明显对于这么简单的事情你可以很快推出自己的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:29:28.120

使用 Dr.Dredel 建议的真实日期库，但如果你想要一个糟糕的 hack，总有

```
new Date(Date.parse("2012-05-25 23:08:57")).toDateString().substring(4) 
```

不要在严肃的代码中使用。它依赖于依赖于`toDateString`语言环境的输出。正确的方法是获取一个日期对象，然后在显示它之前，选择一个*日期格式*。

JavaScript 中的内置日期对象并不能很好地解决这个问题。

[您可以在MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)中找到其使用示例。

**附录**

好的，我已经认真了，并使用 datejs 制作了一个示例。[您可以在此处](http://jsfiddle.net/Kd9G6/)找到实时工作版本。

基本上，将以下内容放入您的 HTML 中：

```
<script src="http://cachedcommons.org/cache/datejs/1.0.0/javascripts/date-min.js"></script> 
```

​ 然后在你的 JavaScript 中修改以下代码：

```
var d = Date.parse("2012-05-25 23:08:57");
alert(d.toString("MMM dd, yyyy")); 
```

​</p>

# jquery - JQuery 全屏图库

> ID：10769918
> 
> 赞同：0
> 
> 时间：2012-05-26T21:26:47.543
> 
> 标签：jquery, supersized, fancybox-2

我正在使用超大插件[http://buildinternet.com/project/supersized/](http://buildinternet.com/project/supersized/)来获得全屏画廊。

它本身工作正常，但我只需要从一个花式框按钮和一个 esc 按钮隐藏和显示它。我正在使用fancybox 2，我也想实现全屏，所以我使用了超大尺寸。

问题是：如何在不影响其行为的情况下隐藏超大尺寸？

答案并不像您想象的那么简单，因为如果您尝试将 'display: none' 设置为 div#supersized 和其他相关 div，当您显示它时，图像的自动“适合”不起作用......

如果您设置“可见性：隐藏”，它似乎可以工作，但是当我想第一次看到第一张图像时，应该显示图像的框是完全白色的。

您可以查看我的测试站点，例如：[http ://provaschiavello.altervista.org/Projects/STARFISH%20SQUARE%20|%20PIAZZA%20VITTORIO](http://provaschiavello.altervista.org/Projects/STARFISH%20SQUARE%20|%20PIAZZA%20VITTORIO)

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T00:01:25.697

这是解决方案（或解决方法）：

设置这个全局变量：first = true;

创建这两个实用函数：

```
function fullScreen(n) {
    // Init supersized only at first time
    if (first) {
        jQuery(function($){
            $.supersized({
                // All the supersized 'options': 'value'
            });
        });
        first = false;
    }
    // Repeat this for each element of the page
    // which needs to be hided while supersized is running
    $('#myElem').fadeOut();

    // Show it
    $('#supersized-container').fadeIn();
    $('#supersized').fadeIn();
    api.goTo(n+1);
}

function closeFull() {
    $('#supersized-container').fadeOut();
    $('#supersized').fadeOut();

    // Same as above
    $('#myElem').fadeIn();
} 
```

然后使用它们在超大页面和普通页面之间切换。

注意：fullScreen (n) 的参数是传递给超大画廊的索引。

享受。:)

# javascript - Chrome扩展如何基本cURL其他页面？

> ID：10769924
> 
> 赞同：3
> 
> 时间：2012-05-26T21:27:12.833
> 
> 标签：javascript, google-chrome, google-chrome-extension, browser-extension

我正在考虑编写一个 Chrome 扩展程序，该扩展程序需要在某个站点的某个动态页面上抓取一些链接并分析链接页面的内容。

我实际上对编写浏览器扩展知之甚少，所以我想先看看它是否可行，然后再致力于学习如何。我确实知道扩展通常执行 Javascript，但我不知道如何使用 Javascript 获得这种结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T00:12:54.633

你可以使用[jQuery](http://jquery.com)和[James Padolsey的](http://james.padolsey.com)[这个插件](http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/)来进行跨域请求；该插件将返回页面内容。然后，您可以执行以下操作将其放入 jQuery 对象中：

```
$.ajax({
    url: 'http://example.com',
    type: 'GET',
    success: function(res) {
        var contents = $(res.responseText);
    }
}); 
```

使用该内容对象，您可以执行通常使用 jQuery 对象执行的任何操作，例如[`find()`](http://api.jquery.com/find/). 例如，如果你想获取页面的标题，你可以这样做：

```
$.ajax({
    url: 'http://example.com',
    type: 'GET',
    success: function(res) {
        var contents = $(res.responseText);
        var title = contents.find('title').text();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:29:43.033

使用 jquery ajax 获取其他页面的内容。

# javascript - Backbone + Underscore：找不到模板变量。+ 如何正确访问模型属性？

> ID：10769926
> 
> 赞同：1
> 
> 时间：2012-05-26T21:27:30.147
> 
> 标签：javascript, backbone.js, underscore.js, backbone-views

我刚开始使用 Backbone，我的目标是一个简单的幻灯片应用程序。我有一个 REST 接口，其中

`/slidecasts`

给我一份所有可用演示文稿的列表。返回的 json 如下所示：

```
[
    {
        "name": "p75-barth.pdf", 
        "nr": 1, 
        "slideLinks": [
            "slides/0", 
            "slides/1",                
        ]
}] 
```

如果我想访问单个演示文稿并获取例如第一张幻灯片，我可以简单地执行以下操作：

```
slidecasts/1/slides 
```

返回：

```
[
    {
        "content": null, 
        "imageLinks": [
            "images/1"
        ], 
        "nr": 0, 
        "title": null
    }
] 
```

我想将演示文稿和幻灯片表示为骨干模型。我还想要一个 Backbone 视图，它最后只显示幻灯片图像、标题、一些注释和一个前进/后退按钮。

到目前为止，这是我的代码：

```
$(function (){

    initModel();
    initCollection();
    initView();

    var testSlidecast = new Slidecast();
    testSlidecast.id=1;

    testSlide = new Slide();
    testSlide.id = 5;

    testSlidecast.Slide = testSlide;

    var slideView = new SlideView(({model: testSlidecast}));

})

function initView(){
    SlideView = Backbone.View.extend({
        el: $("#presentation"),
        initialize: function(){
            this.render();
            alert("asd")
        },
        render: function(){
            var variables = { presentation_name: "This is a Test-Slide-Name" };
            var template = _.template( $("#slide_template").html(), {} );
            this.el.html( template );
        }
    });
}

function initModel(){
    Slide = Backbone.Model.extend({
    });
}

function initCollection(){
    Slidecast = Backbone.Collection.extend({
      model: Slide,
      url: function(){
        return 'slidecasts/' + this.id + '/slides'
      }
    });
} 
```

这适用于集合，但我真的不知道如何从那里获取单个幻灯片的信息。像 slidecast.slide("0") 这样的东西可能吗？

对于我的观点，我也有一些关于模板的问题：

我的 html 看起来像这样：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <link href="style.css" rel="stylesheet"/>

    <script src="http://underscorejs.org/underscore-min.js" > </script>
    <script src="http://code.jquery.com/jquery-1.7.2.min.js" > </script>
    <script src="http://backbonejs.org/backbone-min.js" > </script>
    <script src="bscript.js" > </script>

    </head>
    <body>
        <div id="presentation"> </div>

    <script type="text/template" id="slide_template">
            <label>Presentation <%= presentation_name %>  </label>
            <img src="" id="slide_pic" />
            <input type="text" id="slide_content" value="asd" />
    </script>

    </body>

</html> 
```

尽管我已经在视图中定义了变量，但我一直收到错误消息，即未定义要传递给模板 *presentation_name* 的变量名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T22:02:08.197

模板范围内的变量必须显式传递。模板不会自动访问视图范围内的变量。代替：

```
var template = _.template( $("#slide_template").html(), {} ); 
```

尝试

```
var template = _.template( $("#slide_template").html(), variables); 
```

# php - 在 CakePhp 中导入供应商类时出错

> ID：10769927
> 
> 赞同：0
> 
> 时间：2012-05-26T21:27:33.083
> 
> 标签：php, cakephp

我有：

```
App/Vendor/Facebook
App/Vendor/Facebook/facebook.php 
```

在**App/Controller/AppController.php**我用过：

```
App::uses('facebook', 'Vendor/Facebook'); 
```

那么 AppController 类是：

```
class AppController extends Controller {

    public $fb;

    public function beforeFilter() {
        $fb = new Facebook();   
    }   

} 
```

这是我得到的错误：

> 致命错误：在第 42 行的 /home/users/example.com/www/app/Controller/AppController.php 中找不到类“Facebook”

这怎么可能？怎么了？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T09:14:46.510

您必须使用`App::import()`来导入您的文件，因为它不遵循 CakePHP 约定。以下代码段应该可以解决问题：

```
App::import('Vendor', 'Facebook', array('file' => 'Facebook' . DS . 'facebook.php')); 
```

另请参阅[http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#loading-vendor-files](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#loading-vendor-files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:55:24.640

这个问题发生在我身上。。

我做了一些测试确实知道发生了什么。

首先，我将 facebook.php 重命名为 Facebook.php。这不是必需的。这取决于你的 cakephp 版本。

因此，在 Cake/Core/App.php 中，我注释了第 738 行（return (bool)include_once $mapped; ）并更改为 require_once $mapped。

后来，我遇到了 LIB CURL 错误，这是运行 php facebook lib 所必需的。所以，我安装了它：

```
sudo aptitude install php5-curl
sudo /etc/init.d/apache2 restart 
```

这一次，错误变为：

```
Fatal error: Cannot redeclare class Facebook in (...) 
```

最后，我将 Cake/Core/App.php 恢复为原来的，错误就解决了。

最好的祝福

# mysql - 复杂的mysql连接查询

> ID：10769930
> 
> 赞同：0
> 
> 时间：2012-05-26T21:28:13.300
> 
> 标签：mysql

我有两张桌子。疾病和医生。疾病与医生1对多的关系。

当我使用与所有疾病和医生姓名匹配的关键字进行搜索并显示结果数据时。假设我写了“Karim”。这将从疾病表中的疾病名称和医生表中的医生名称。在找到正确匹配的地方，它将选择该行。

我并不了解如何编写此查询。我只能为 1 张桌子执行此操作。这是我的代码：

```
$query = "select * from disease where diseasename = '".$txtSearch."'";
$query = "select * from doctor where doctorname = '".$txtSearch."'"; 
```

但是请任何人都可以告诉我如何加入这两个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:36:40.177

您正在寻找的是`OR`关键字。尝试 ：

```
$query = "select * from disease dis inner join doctor doc on dis.doctor_id = doc.id where (dis.diseasename = '".$txtSearch."' or doc.doctorname = '".$txtSearch."')"; 
```

我对列名做了一些假设，因为您没有在问题中发布它们。您必须用数据库中的适当替换它们。

# ruby-on-rails - Gemfile检查错误

> ID：10769933
> 
> 赞同：0
> 
> 时间：2012-05-26T21:28:30.273
> 
> 标签：ruby-on-rails, git, capistrano

部署时出现以下错误：

```
** [out :: 209.12.251.103:2222] 您已在开发中修改了 Gemfile，但未检查
 ** [out :: 209.12.251.103:2222] 生成的快照（Gemfile.lock）进入版本控制
 ** [out :: 209.12.251.103:2222]
 ** [out :: 209.12.251.103:2222] 您已添加到 Gemfile：
 ** [out :: 209.12.251.103:2222] * 来源：git://github.com/dgm/declarative_authorization.git（在nested_in）
 ** [out :: 209.12.251.103:2222]
 ** [out :: 209.12.251.103:2222] 您已从 Gemfile 中删除：
 ** [out :: 209.12.251.103:2222] * 来源：git://github.com/dgm/declarative_authorization.git（在nested_in）
 ** [out :: 209.12.251.103:2222]
 ** [out :: 209.12.251.103:2222] 您在 Gemfile 中进行了更改：
 ** [out :: 209.12.251.103:2222] * declarative_authorization 从 `git://github.com/dgm/declarative_authorization.git (at nested_in)` 到 `no specified source`

```

我已经重新运行 bundle install，删除了 .bundle 并重新运行...我的 gemfile 和 lock 文件都已签入。如何诊断并让它再次运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:56:56.237

我对有问题的 gem 进行了重新设计，并对新版本进行了捆绑更新，我还将 Gemfile 规范从 更改`:branch => :nested_in`为`:branch => 'combined'`. 其中的一些东西设法解除了部署的干扰。

如果其他人遇到此错误，我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T01:05:50.120

我在使用`github: 'user/repo'`而不是`git: 'git://github.com/user/repo.git'`. 更改为完整的 git 定义为我解决了这个问题。

# google-apps-script - 使用 MailApp.sendEmail 时正确递增

> ID：10769935
> 
> 赞同：-1
> 
> 时间：2012-05-26T21:28:42.347
> 
> 标签：google-apps-script

我对谷歌脚本场景有点陌生。我已经经历了很多次，我无法正确地增加我的大脑。

我创建了一个使用表单的 Google 电子表格。当有人使用表单提交设备时，它会使用发送电子邮件功能（MailApp.sendEmail）将其通过电子邮件发送给会计人员。

到目前为止，我可以完美地填充电子表格，但是当函数运行时，它只标记第一行中的“状态”变量并且不会继续通过列表，然后它通过电子邮件多次发送该 1 行。谁能看到我在这方面哪里错了？

我需要它来将数据提交到可用的下一行，然后脚本检查最后一个单元格的 EMAIL_SENT，如果它没有那个值，我需要它发送一封电子邮件，然后检查下一行数据以及（如果我需要从电子表格中手动运行脚本）。我在这里找不到类似的问题，我可以理解我在递增和循环方面做错了什么。

这是脚本：

```
function sendThisOut() {
  // set the current spreadsheet and active sheet
  var sheet = SpreadsheetApp.getActiveSheet();

  // set range data
  var sRow = 2;  // first top left cell of data
  var cols = 9; // Num of cols 

  // define initial data source and get values
  var dataRange = sheet.getRange(sRow,1,1,cols);
  var data = dataRange.getValues();

  // increment data
  for (var i = 0; i < data.length; ++i) {
    var row = data[i];

    // define each column
    var tstamp = row[0]; // get timestamp (col A)
    var acct = row[1]; // define account (col B)
    var cname = row[2]; // define client name (col C)
    var comment = row[3]; // define comments (col D)
    var item1 = row[4]; // defines item 1 (col E)
    var item2 = row[5]; // defines item 2 (col F)
    var item3 = row[6]; // defines item 3 (col G)
    var item4 = row[7]; // defines item 4 (col H)
    var status = row[8]; // get status (emailed or no?)

    // setup e-mail vars
    var emailAddr = "myEmail@myDomain.com";
    var subject = "ACCT:" + acct + " " + cname + " - Equipment Request";

    // setup content of e-mail
    var body = "Hello Accounting,\n\n" +
        "Please bill for the contained items on the following account:\n\n" +
        "Account: " + acct + "\n\n" +
        "Client Name: " + cname + "\n\n" +
        "Item 1: " + item1 + "\n\n" +
        "Item 2: " + item2 + "\n\n" +
        "Item 3: " + item3 + "\n\n" +
        "Item 4: " + item4 + "\n\n" +
        "Reason for rekey: " + comment;

    // check status and if it doesn't have EMAIL_SENT, email it
    if (status != "EMAIL_SENT") {
      MailApp.sendEmail(emailAddr, subject, body);
      // Make sure the cell is updated right away in case the script is interrupted
      sheet.getRange(sRow + i, 9).setValue(EMAIL_SENT);
      SpreadsheetApp.flush();
    };

  };
} 
```

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:55:36.043

> 它只标记第一行中的“状态”变量，并且不会继续通过列表，

你只影响第一行的原因是第三个参数：

var dataRange = sheet.getRange(sRow,1, ***1*** ,cols);

它应该指定数据集中的行数，如您所见，它是 1（一），这导致 dataRange 中只有一行。尝试以下方法，看看是否有帮助：

```
// set range data
  var sRow = 2;  // first top left cell of data
  var cols = 9; // Num of cols 
  var rows = sheet.getLastRow() - sRow + 1
  // define initial data source and get values
  var dataRange = sheet.getRange(sRow,1,rows,cols);
  var data = dataRange.getValues(); 
```

* * *

> 然后它通过电子邮件多次发送该 1 行。

除非在测试期间您可能设置了多个触发器，否则不确定这一点？在上述更改后尝试，如果仍然有问题，请回帖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T05:26:29.927

我在看

```
 sheet.getRange(sRow + i, 9).setValue(EMAIL_SENT); 
```

这不应该是（观察双引号）

```
 sheet.getRange(sRow + i, 9).setValue("EMAIL_SENT"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T19:07:41.163

所以如上所述，我不得不一遍又一遍地重复这个。最后，通过学习一种不同的技术并找到一些分散的线程，我最终得到了以下脚本： - 只需在提交时检查最后一行数据 - 用户是否提交了表单 - 向目标方发送电子邮件 - 更新电子表格- 观察休息 - 提供电子邮件/休息确认

我希望这对其他人有帮助。到目前为止，我仍在研究一个将扫描整个电子表格的脚本，但该脚本会检查提交表单的最后一行，这回答了我的特定问题。当我找到完整版扫描的答案时，我会尝试发布答案：

**（PS：将其传递到 Google Scripter 可能会更顺畅。我添加了很多评论，以使自己和阅读此内容的任何人都了解正在发生的事情）**

```
function other() {
  // set the current sheet
  var sheet = SpreadsheetApp.getActiveSheet();

  // set the last row and column
  var lrow = sheet.getLastRow();
  var lcol = sheet.getLastColumn();

  // set the major row range and data values
  var rowRng = sheet.getRange(lrow, 1, 1, lcol);
  var rowData = rowRng.getValues()[0];

  // setup redundancy checks for status and email
  // data status, email status and submitter are added to column headers AFTER form creation
  var statrng = sheet.getRange(lrow, 8); // set range of status
  var stat = statrng.getValue(); // get value of status in col h
  var emsrng = sheet.getRange(lrow, 9); // set range of emailed status
  var ems = emsrng.getValue(); // get value of emailed status in col i

  // get current submitters data and set ranges for it, then apply data to sheet
  var suberng = sheet.getRange(lrow, 10); // set range of submitters email
  var sube = Session.getActiveUser().getEmail(); // get submitters email
  suberng.setValue(sube); // set subs email to sheet in col j

  // setup the per cell data
  var tstamp = rowData[0]; // col a: set timestamp (created when forms created)
  var cname = rowData[1]; // col b: set the client name
  var acct = rowData[2]; // col c: set the account number cell
  var it1 = rowData[3]; // col d: set item 1
  var it2 = rowData[4]; // col e: set item 2
  var it3 = rowData[5]; // col f: set item 3
  var it4 = rowData[6]; // col g: set item 4

  // setup email vars
  var em = "myEmail@myDomain.com"; // email that data needs to go too
  var sub = "ACCT: " +acct+ " - " +cname+ "Request"; // subject in email
  var body = "Hello Accounting,\n\n"
      + "Please order the following:\n\n"
      + "Item 1: " +it1
      + "\nItem 2: " +it2
      + "\nItem 3: " +it3
      + "\nItem 4: " +it4
      + "\n\nPlease send us the invoicing once complete."
      + "\n\nSubmitted by\n"
      + sube + " : " + tstamp;

  // Now that all variables have been set, run checks and send the email as well
  // as a confirmation email. If script doesn't complete, a failure notice is sent if possible

  // as long as there's a timestamp and submitted status is empty, run if statement
  if (tstamp !== "" && stat == "") {
    statrng.setValue("Submitted"); // update status field since we've gotten this far
    var statu = statrng.getValue(); // make sure update took for status
    if (statu == "Submitted") {
      if (ems == "") { // no need to continue if email has already been sent, so check
        MailApp.sendEmail(em, sub, body); // send to accounting people
        emsrng.setValue("Emailed"); // update status that email was successfully sent
        // let submitter know it was a success
        MailApp.sendEmail(sube,"ACCT: " +acct+ " - Submission Successful","Your Submission was Successful!");
      }
    } else {
      // if form failed, let submitter know it was not a success
      MailApp.sendEmail(sube,"ACCT: " +acct+ " - Submission Successful","Your Submission was Successful!");
    }
  }
} 
```

# javascript - 创建视口会导致 Uncaught SyntaxError: Unexpected string Error

> ID：10769942
> 
> 赞同：2
> 
> 时间：2012-05-26T21:29:43.770
> 
> 标签：javascript, sencha-touch, extjs, mobile-website

我想使用这行代码从 app.js 文件创建我的视口实例：

```
 Ext.create('myapp.view.Viewport') 
```

但我在控制台日志中不断收到此错误

```
 Uncaught SyntaxError: Unexpected string 
```

我感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T23:24:42.717

之前有个问题要问：

```
Ext.create('myapp.view.Viewport') 
```

你错过了吗？在最后？

如果你没有错过，那么我可以告诉你

```
Ext.create('myapp.view.Viewport'); 
```

在我`app.js`为 extjs 使用 MVC 模式时工作正确。

我可以建议的唯一事情是验证文件是否进入正确的目录 MVC，除了查找。

# android - 未裁剪的联系人照片

> ID：10769945
> 
> 赞同：0
> 
> 时间：2012-05-26T21:30:15.427
> 
> 标签：android

我想将未裁剪的联系人图像照片设置为 Android 2.0 以上的全屏图像背景。我使用以下代码获取裁剪的缩略图，但由于照片在画廊中全屏显示，我如何访问这张照片

此代码提供裁剪的缩略图，我如何获得未裁剪的全屏

```
 public static Bitmap loadContactPhoto(ContentResolver cr, long  id) {
        Uri uri =             ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, id);
        InputStream input = ContactsContract.Contacts.openContactPhotoInputStream(cr, uri);
        if (input == null) {
            return null;
        }
        return BitmapFactory.decodeStream(input);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:35:37.053

Android 文档说

> 包含联系人主要照片的单个联系人的只读子目录。照片最多可以以两种方式存储 - 默认“照片”是直接存储在数据行中的缩略图大小的图像，而“显示照片”（**如果存在**）是存储为文件的较大版本。

再次来自文档

```
public InputStream openDisplayPhoto(long contactId) {
     Uri contactUri = ContentUris.withAppendedId(Contacts.CONTENT_URI, contactId);
     Uri displayPhotoUri = Uri.withAppendedPath(contactUri, Contacts.Photo.DISPLAY_PHOTO);
     try {
         AssetFileDescriptor fd =
             getContentResolver().openAssetFileDescriptor(displayPhotoUri, "r");
         return fd.createInputStream();
     } catch (IOException e) {
         return null;
     }
 } 
```

# c# - c#上的Exchange服务器2010

> ID：10769950
> 
> 赞同：-1
> 
> 时间：2012-05-26T21:30:45.147
> 
> 标签：c#, exchange-server

我正在尝试执行从 Exchange 2003 到 Office 365 的电子邮件迁移。但是为了做到这一点，我需要创建一个`ExchangeConnectionSettings`来自`Microsoft.Exchange.Data.Storage.Management.ExchagneConnectionSettings`. 但是我不知道从哪里得到它。谁能帮帮我。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:15:56.643

根据它在Exchange **Server 2010 SP1 Management Shell SDK中**[的文档](http://msdn.microsoft.com/en-us/library/microsoft.exchange.data.storage.management.exchangeconnectionsettings%28v=exchg.140%29.aspx)`microsoft.exchange.data.storage.dll`

# c# - c# vb.net 转换

> ID：10769951
> 
> 赞同：1
> 
> 时间：2012-05-26T21:30:45.793
> 
> 标签：c#, vb.net

是否有将 c# 转换为 vb.net 的 Visual Studio 插件？我尝试使用真正快速完成的网站，但是对于更长更复杂的代码，它会出现很多错误。或者有什么好的第三方应用程序可以做到这一点？

错误：“上下文”不是“默认 2”的成员

然后它指向 XHTML 中的这一行

```
 <%@ Page Language="VB" AutoEventWireup="false" CodeFile="Default2.aspx.vb" Inherits="Default2" %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:36:54.847

我使用[SharpDevelop](http://community.sharpdevelop.net/blogs/mattward/articles/FeatureTourCodeConversion.aspx)进行代码翻译的效果很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:51:55.543

您的页面背后的代码需要如下所示：

```
Partial Class Default2
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load

    End Sub
End Class 
```

如果您缺少 Class Default2，则会生成以下错误：

错误 1 ​​'Context' 不是 'Default2' 的成员。

# php - 文本 尽管没有值，但总是返回一个值

> ID：10769952
> 
> 赞同：0
> 
> 时间：2012-05-26T21:30:48.323
> 
> 标签：php, jquery, html, option

我的问题是选项值
`<option selected="selected" disabled="disabled">Select a city...</option>`
问题是：尽管这个选项没有价值，php 代码将其值视为*** 'Select a city'***。因此，即使未选择城市，我的代码`if(isset($_POST['city'])`也始终返回 true。我该如何解决这个问题？

这是**html**代码：

```
<form id="city_form">

  <select id="city" name="city">
    <option selected="selected" disabled="disabled">Select a city...</option>
    <option value=1 name="city1">City 1</option>
    <option value=2 name="city2">City 2</option>
    <option value=3 name="city3">City 3</option>
    <option value=4 name="city4">City 4</option>
  </select>

  <input type="submit" value="Submit form" id="submit_button" />

</form>
<div id="show_city"></div> 
```

这是**jQuery**代码：

```
$('#submit_button').click(function(e) {
  e.preventDefault();
  var data = $('#city_form').serialize();
  $.post(
         "fetch_city.php",
          data,
          function (response) {
             $('#show_city').html(response);
          }
        );
}); 
```

这是**fetch_city.php**：

```
if (isset($_POST['city']) && !empty($_POST['city'])) {

  $city_id = $_POST['city']);
  echo $city_id;

} else {
  echo "You did not select a city...!";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T21:32:54.867

你不能。给它一个有意义的哨兵`value`，如果该值出现，则忽略该控件。

```
<option selected="selected" disabled="disabled" value="">Select a city...</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:38:31.453

我认为这里的答案是 jquery 忽略了第一个选项的禁用。尝试从中删除 selected="selected" 和 disabled="disabled" 。您现在将看到一个空白的第一个条目。提交表单后，您的 isset 应该返回 false。

# sql-server-2008 - SQL 函数，列作为变量

> ID：10769953
> 
> 赞同：1
> 
> 时间：2012-05-26T21:31:00.773
> 
> 标签：sql-server-2008

SQL 编程新手，我有这个很好用的函数：

```
(
@clientId AS int
)
RETURNS NVARCHAR(50)
AS
BEGIN
declare @result nvarchar(50);
declare @lastDate Date;
declare @dateBefore Date;
declare @count float;
set @count = (select  MAX(A1c)-MIN(A1c) as change from
(select A1c from 
( select top 2 * from vw_MasterView where clientId = @clientId order by vw_masterView.LastVisitDate desc  ) as vw
group by A1c) as hh);
RETURN @count
end; 
```

因为我将重复这个函数来计算 MasterView 中的其他列；我想将 A1c 更改为变量，如下所示：

```
(
@clientId AS int,
@lab AS nvarchar(50)
)
RETURNS NVARCHAR(50)
AS
BEGIN
declare @result nvarchar(50);
declare @lastDate Date;
declare @dateBefore Date;
declare @count float;
set @count = (select  MAX(@lab)-MIN(@lab) as change from
(select @lab from 
( select top 2 * from vw_MasterView where clientId = @clientId order by vw_masterView.LastVisitDate desc  ) as vw
group by @lab) as hh);
RETURN @count
end; 
```

我收到以下错误：

```
Msg 164, Level 15, State 1, Procedure fn_changeA1c, Line 22
Each GROUP BY expression must contain at least one column that is not an outer reference.
Msg 8155, Level 16, State 2, Procedure fn_changeA1c, Line 22
No column name was specified for column 1 of 'hh'. 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T22:53:57.410

您需要使用存储过程而不是函数。

```
create procedure myprocedure
    @clientId AS int,
    @lab AS nvarchar(50)
    AS
BEGIN
    declare @result nvarchar(50);
    declare @lastDate Date;
    declare @dateBefore Date;
    declare @count float;
    declare @sql nvarchar(500);
    set @sql = 'select  MAX(' + @lab + ')-MIN(' + @lab + ') as change from
    (select ' + @lab + ' from 
    ( select top 2 * from vw_MasterView where clientId = ' + convert(nvarchar, @clientId) + ' order by    vw_masterView.LastVisitDate desc  ) as vw
    group by ' + @lab + ') as hh';
    execute sp_executesql @sql;
end; 
```

# php - GPS坐标转换 - PHP

> ID：10769956
> 
> 赞同：0
> 
> 时间：2012-05-26T21:31:45.817
> 
> 标签：php, gps

我有以下代码可以从图像中提取和显示 EXIF 信息。

```
 <?
    // +++++++++++++++++++++++++ //
    // +++++++ GPS EXIF +++++++ //
    // +++++++++++++++++++++++++ //

    // --- Change the 'image1.jpg' value below to the path of your file. --- //
    $Image = 'image1.jpg';

    // --- The EXIF read command --- //
    $ReadEXIFData = read_exif_data($Image, 0, true);

    // +++++++++++++++++ //
    // +++ FILE INFO +++ //
    // +++++++++++++++++ //
    // --- Get the filename --- //
    $Filename = $ReadEXIFData['FILE']['FileName'];
    // --- Get the file size --- //
    $FileSize = $ReadEXIFData['FILE']['FileSize'];
    // --- Converts to user-friendly kb, mb and gb sizes --- //
    if ($FileSize >= 1024) { $ImageFileSize = number_format($FileSize / 1024, 2).'kb'; }
    elseif ($FileSize >= 1048576) { $ImageFileSize = number_format($FileSize / 1048576, 2).'mb'; }
    elseif ($FileSize >= 1073741824) { $ImageFileSize = number_format($FileSize / 1073741824, 2).'gb'; }
    // --- Get the file height --- //
    $FileHeight = $ReadEXIFData['COMPUTED']['Height'].'px';
    // --- Get the file height --- //
    $FileWidth = $ReadEXIFData['COMPUTED']['Width'].'px';

    // +++++++++++++++++++++++ //
    // +++ GPS COORDINATES +++ //
    // +++++++++++++++++++++++ //
    // --- Get GPS hemisphire --- //
    $GPSHemisphire = $ReadEXIFData["GPS"]["GPSLatitudeRef"];

    // --- Get GPS degrees latitude --- //
    $GPSDegreesLat = intval($ReadEXIFData["GPS"]["GPSLatitude"][0]);
    // --- Get GPS minutes latitude --- //
    $GPSMinutesLat = intval($ReadEXIFData["GPS"]["GPSLatitude"][1]);
    // --- Get GPS seconds latitude --- //
    $GPSSecondsLat = intval($ReadEXIFData["GPS"]["GPSLatitude"][2]);
    //  --- Get GPS Hemisphere latitude --- // 
    $GPSSecondsLat2 = ($ReadEXIFData["GPS"]["GPSLatitudeRef"]);
    // --- Decimal Latitude goes here --- //

    // --- Get GPS degrees longitude --- //
    $GPSDegreesLon = intval($ReadEXIFData["GPS"]["GPSLongitude"][0]);
    // --- Get GPS minutes longitude --- //
    $GPSMinutesLon = intval($ReadEXIFData["GPS"]["GPSLongitude"][1]);
    // --- Get GPS seconds longitude --- //
    $GPSSecondsLon = intval($ReadEXIFData["GPS"]["GPSLongitude"][2]);
    //  --- Get GPS Hemisphere longitude --- // 
    $GPSSecondsLon2 = ($ReadEXIFData["GPS"]["GPSLongitudeRef"]);
    // --- Decimal Longitude goes here --- //

    // --- Get GPS altitude --- //
    $GPSAltitude = $ReadEXIFData["GPS"]["GPSAltitude"][0];

    ?> 
```

然后将信息打印在 html 页面中，如下所示[http://ukf.com/easyexif/easyexif3.php](http://ukf.com/easyexif/easyexif3.php)

问题是返回的 GPS 坐标以度/分/秒为单位。

要将它们转换为十进制，我有这个脚本：

```
 function toDecimal($deg, $min, $sec, $hemi) {
     $d = $deg + $min/60 + $sec/3600;
     return ($hemi=='S' || $hemi=='W') ? $d*=-1 : $d;
    }

    function divide($a) {
     $e = explode('/', $a);
     if (!$e[0] || !$e[1]) {
      return 0;
     } else {
      return $e[0] / $e[1];
     }
    }

    function getGPS() {
     global $exif;
     if ($exif) {  $lat = $exif['GPS']['GPSLatitude'];
     $log = $exif['GPS']['GPSLongitude'];
      if (!$lat || !$log) return null;
      $lat_degrees = divide($lat[0]);
      $lat_minutes = divide($lat[1]);
      $lat_seconds = divide($lat[2]);
      $lat_hemi = $exif['GPS']['GPSLatitudeRef'];
      $log_degrees = divide($log[0]);
      $log_minutes = divide($log[1]);
      $log_seconds = divide($log[2]);
      $log_hemi = $exif['GPS']['GPSLongitudeRef'];
      $lat_decimal = toDecimal($lat_degrees, $lat_minutes, $lat_seconds, $lat_hemi);
      $log_decimal = toDecimal($log_degrees, $log_minutes, $log_seconds, $log_hemi);
      return array($lat_decimal, $log_decimal);
     } else{
      return null;
     }
    } 
```

我需要的是表单中返回的十进制对数和纬度

```
 $GPSDECLON
    $GPSDECLAT 
```

所以我可以将它们与上述信息一起包含在我的 html 页面中。

我目前的 PHP 知识非常有限，我不知道如何将转换包含到我现有的脚本中。

有人可以帮忙吗？？如果是这样，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T22:44:18.630

网页上显示的秒数有问题 - 它们必须在 [0,60[

也就是说，转换就是您发布的 php 代码的第一个函数中所说的：

```
function toDecimal($deg, $min, $sec, $hemi) {
 $d = $deg + $min/60 + $sec/3600;
 return ($hemi=='S' || $hemi=='W') ? $d*=-1 : $d;
} 
```

也就是说，一个度数是60分钟，一分钟是60秒。如果您在南半球，则翻转纬度，如果您在“西半球”，则翻转经度值，这些基本上只是两次测量的标志。

所以...

$GPSDECLON = toDecimal($GPSDegreesLon, $GPSMinutesLon, $GPSSecondsLon, $EWHemisphere)

其中 $EWHemisphere 是“E”或“W”，具体取决于您的 hemisphere 变量如何对其进行编码。然后它是纬度的类似线，除了你需要知道它是“N”还是“S”的标志。

希望对您有所帮助，如果我在这里遗漏了您的问题，我深表歉意...

# ios - 活动指示器不为 IOS 设置动画

> ID：10769957
> 
> 赞同：0
> 
> 时间：2012-05-26T21:31:53.203
> 
> 标签：ios, uiactivityindicatorview

活动指示器在我的代码中没有动画。我有以下代码

我该如何解决？是因为平均线程不更新指标状态吗？如果是这样，我该如何解决？

```
@interface ConnectionEstablishedViewController : UIViewController{
 IBOutlet UIActivityIndicatorView * activityView;
    IBOutlet UILabel *loadingLabel;
}
@property(nonatomic,retain)  UIActivityIndicatorView * activityView; 
```

我在 my.xib 文件中分配了标签和活动指示器

.m

```
- (void) threadStartAnimating {
    [activityView startAnimating];
    loadingLabel.hidden=YES;
}
- (void) threadStopAnimating {
    [activityView startAnimating];
    loadingLabel.hidden=NO;
}

-(void)viewDidAppear:(BOOL)animated{

    [self threadStartAnimating];
    [NSThread sleepForTimeInterval:3.0];
    [self hunttable];//call hunttable in order to fetch hunt table data

    [NSThread sleepForTimeInterval:3.0];//sleep to prevent thread from overlap

    [self huntingarea];
    [NSThread sleepForTimeInterval:3.0];

    [self stands]; 
    [NSThread sleepForTimeInterval:3.0];

    [self weapons];
    [NSThread sleepForTimeInterval:3.0];

    [self backpack];
    [NSThread sleepForTimeInterval:3.0];

    [self descriptionget];
    [NSThread sleepForTimeInterval:3.0];

    [self threadStopAnimating];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T21:45:08.690

我有类似的问题

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self threadStartAnimating];
}
-(void)viewDidAppear:(BOOL)animated{
    .
    ...//functions
    [self threadStopAnimating];

} 
```

以上应该工作

# servlets - OSGi环境下在Jetty中注册servlet（类加载问题）

> ID：10769962
> 
> 赞同：3
> 
> 时间：2012-05-26T21:33:04.820
> 
> 标签：servlets, jetty, osgi

我有一个带有嵌入式 Jetty 8.1.1 服务器的 OSGi 应用程序。

当我将我的应用程序作为单体运行（无 OSGi 环境）时，我可以通过调用`org.eclipse.jetty.servlet.ServletContextHandler.addServlet(String className, String mapping)`方法成功注册 servlet。所以现在我正在尝试在 OSGi 环境中做同样的事情。

目标是编写一个 bundle ( `servlet-extender`)，它会在其他 bundle 启动时注册它们提供的 servlet（扩展模式）。因此，在我的应用程序启动后，（除其他外）只有两个基本包在运行：`jetty`和`servlet-extender`.

**第一次尝试写`servlet-extender`：**

首先，我决定在`MANIFEST.MF`提供 servlet 的包的文件中声明 servlet 及其映射。如果启动了这样的包，则`servlet-extender`搜索它`MANIFEST.MF`的 servlet 映射声明。如果找到任何 servlet 映射声明，则`servlet-extender`调用上述`ServletContextHandler.addServlet(...)`方法来实际注册 servlet。

虽然这个想法看起来不错，但类加载存在问题。事实上 Jetty 调用`Class.forName("org.my.servlets.MyServletClass").newInstance()`. 虽然`jetty`bundle 不导入`org.my.servlets`包，但调用`Class.forName("org.my.servlets.MyServletClass")`失败并显示`ClassNotFoundException`.

**第二次尝试写`servlet-extender`：**

我搜索了一些与 OSGi 中的类加载相关的文章。[这](http://njbartlett.name/2010/08/30/osgi-readiness-loading-classes.html)给了我一个希望，我可以通过一些 OSGi 服务提供加载的 servlet 类来解决前面的问题。所以我`ServletProvider`用方法创建了服务`Map<Class<? extends Servlet>, String> getServlets()`（该方法只返回映射到某个上下文的 servlet 类）。然后我进行了修改`servlet-extender`，使其不在`MANIFEST.MF`. 它现在宁愿等到一些捆绑注册`ServletProvider`实现。如果此类服务已在 OSGi 服务注册表中注册，则`servlet-extender`调用其`getServlets()`方法并尝试将返回的 servlet 类注册到`jetty`. 虽然`jetty`现在不需要调用`Class.forName("org.my.servlets.MyServletClass")`它仍然必须调用`servletClass.newInstance()`来实例化 servlet。不幸的是，它仍然失败了`ClassNotFoundException`.

`jetty`我知道如果捆绑包会导入包，这可以解决`org.my.servlets`。但这是不可能的，因为`jetty`bundle 是由 3rd 方提供的，我不能修改它的`Import-Package`声明。

**如何动态注册任意bundle提供的servlet？**

PS：我不能使用“OSGi Http Service”，因为我必须使用 Jetty 的 8.1.1 WebSocketServlet。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:09:41.983

Q：我还是对声明式注册servlet的方式很好奇：通过servlet类名。可能吗？

答：是的:)

第一个可能的解决方案：如果您被允许修改码头清单，您可以将“DynamicImport-Package：*”添加到清单中，这将允许它加载任何类，同时它不会依赖于自定义组织.my.servlets 包。当然，请注意，这对于 OSGi 来说通常是不好的做法。

第二种可能的解决方案：码头保持原样。与您的第一次尝试一样，在清单中以声明方式包含 servlet 的 Servlet 捆绑列表。这里的关键是 servlet 扩展器。它将创建 servlet 并将其注册到码头。**关于整个类加载问题的重要一点是，servlet 对象的创建必须在类加载器（在本例中为 servlet 扩展器的类加载器）可以访问 servlet 类的地方完成。** 这在码头不会发生，因为您无法修改 MF。但是，您可以完全控制 servlet 扩展器的 MF，对吗？

您可以导入 org.my.servlets（不推荐，因为无法预见将来必须安装哪些 servlet）；

或在 MF 中使用“DynamicImport-Package: *”（一般不推荐做法；））

或（推荐）扩展程序使用 servlet jar 的类加载器从 servlet jar 加载类 - 使用**Bundle loadClass()**方法（参见[org.osgi.framework.Bundle](http://dz.prosyst.com/pdoc/mBS_SDK/um/runtime/osgi/docs/framework/api/framework/index.html)）。这将正确加载类。请注意，这可能会受到安全限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T12:03:44.677

您不必自己执行此操作。已经有 pax-web 提供了这个功能。见[http://team.ops4j.org/wiki/display/paxweb/Pax+Web](http://team.ops4j.org/wiki/display/paxweb/Pax+Web)

Pax web 也可​​以在 Apache Karaf 中使用。在那里您可以使用功能安装它：安装 http-whiteboard。

如果您想自己做，可以查看 pax web 的代码。那里的概念是简单地将您的 servlet 注册为 OSGi 服务。使用服务属性，您可以提供要注册的 http 路径等参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T12:57:46.497

I recently noticed that Jetty's 8.1.1 `ServletContextHandler` has a method `addServlet(ServletHolder, String)`. I modified aforementioned `servlet-extender` so it now registers servlets in the following way:

```
 public void servletProviderRegistered(ServletProvider servletProvider) {
     Map<? extends HttpServlet, String> servlets = servletProvider.getServlets();
     for (Entry<? extends HttpServlet, String> entry : servlets.entrySet()) {
         HttpServlet servletInstance = entry.getKey();
         String mapping mapping = entry.getValue();
         ServletHolder servletHolder = new ServletHolder(servletInstance);
         servletContextHandler.addServlet(servletHolder, mapping);
     }
 } 
```

Using this approach Jetty doesn't need to call `Class.forName("org.my.servlets.MyServletClass").newInstance()` so now I don't get `ClassNotFoundException`.

Since this is a solution to my problem **I am still curious about the way of registering servlets declaratively: through servlet class name**. **Is it possible?**

# php - 编码检测php

> ID：10769963
> 
> 赞同：0
> 
> 时间：2012-05-26T21:33:05.653
> 
> 标签：php, encoding

我有闲置字符串：Ëè÷íûå âñòðå÷è 如何将此字符串编码为 int UTF-8 文件 PHP？

我花了一整天的时间来了解如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T23:30:59.033

我认为这就是你要找的：

[http://www.php.net/manual/en/function.mb-detect-encoding.php](http://www.php.net/manual/en/function.mb-detect-encoding.php)

但是，我似乎记得检测编码非常困难。另一方面，如果您知道源编码，则很容易转换：

[http://www.php.net/manual/en/function.mb-convert-encoding.php](http://www.php.net/manual/en/function.mb-convert-encoding.php)

# javascript - 反斜杠 - 正则表达式 - Javascript

> ID：10769964
> 
> 赞同：16
> 
> 时间：2012-05-26T21:33:09.337
> 
> 标签：javascript, regex

我想构建一个 JS 函数，将参数列表连接到有效路径（因为我无法确定路径的一部分是否带有斜杠）

这是功能：

```
concatPath = function() {
    var path = "";
    for(var i = 0; i < arguments.length; i++)   {
        path += arguments[i].replace("(\\|/)$|^(\\|/)", "") + "/";
    }
    return path;
} 
```

[使用的正则表达式匹配http://regexpal.com](http://regexpal.com)上的所有开始和结束斜杠和反斜杠 但该功能无法正常工作（RegEx 不匹配）。此外，Chrome 状态

**SyntaxError: 无效的正则表达式: /()$|^()/: 未终止的组**

当我只使用 RegEx

```
 (\\)$|^(\\) 
```

但是，使用正则表达式

```
 (\\)$|^(\\) 
```

工作正常。

是太晚了还是我错过了一些特别的东西？

提前致谢！

狮子座

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-27T00:13:42.623

您应该在`/.../`调用. 字符串有自己的反斜杠解释，在正则表达式构造函数被破解之前就开始了，所以你需要额外的引用。`'...'``"..."``replace`

匹配一个反斜杠，正则表达式文字：`/\\/`

匹配字符串中的一个反斜杠、正则表达式：`'\\\\'`

但是在正则表达式文字中，您还必须在正斜杠前面放置反斜杠，因为正斜杠是整个事物的分隔符：

```
path += arguments[i].replace(/(\\|\/)$|^(\\|\/)/, "") + "/"; 
```

或者，如果您出于某种原因与使用字符串结婚，这也应该有效：

```
path += arguments[i].replace("(\\\\|/)$|^(\\\\|/)", "") + "/"; 
```

附带说明一下，当您的替代品是单个字符时，`(x|y)`这太过分了；你可以只使用一个字符类（`[xy]`）。在这种情况下，您会得到：

```
path += arguments[i].replace(/[\\\/]$|^[\\\/]/, "") + "/";

path += arguments[i].replace("[\\\\/]$|^[\\\\/]", "") + "/"; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-26T21:42:45.760

试试这个......使用[字符类]会更容易一些。将单个`\`与您需要的 javascript 字符串匹配`\\\\`，这可能是正在发生的事情。

`new Regexp('^[\\\\/]|[\\\\/]$')`

你也可以试试这个`/^[\\\/]|[\\\/]$/g`符号。

```
s = 'c:\\folder\\'
console.log(s.replace(/^[\\\/]|[\\\/]$/g, '')) 
```

# jquery - 带有 LT 选择器的 Jquery 最后一个元素

> ID：10769970
> 
> 赞同：1
> 
> 时间：2012-05-26T21:34:25.407
> 
> 标签：jquery

我正在尝试使用这行 Jquery 代码折叠除最后一个元素之外的所有元素：

```
$(".message_list .message_body:lt(:last-child)").hide(); 
```

这条线没有任何东西崩溃。我努力了：

```
':last child'
:last-child
last()
:last
':last' 
```

但没有什么能给我最后的元素。如何选择少于最后一个元素的每个元素？lt() 中有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:36:01.613

尝试这个：

```
$(".message_list .message_body:not(:last-child)").hide(); 
```

或者根据您的 HTML 结构，您可能需要`:last`.

```
$(".message_list .message_body:not(:last)").hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:40:11.973

[`:lt`](http://api.jquery.com/lt-selector/)采用从零开始的索引作为参数，而不是选择器。如果您*必须*使用`:lt`：

```
var items = $('.message_list .message_body');
var lastItem = $('.message_list .message_body:last');
var index = items.index(lastItem);

$(".message_list .message_body:lt(" + index + ")").hide(); 
```

否则，请使用@Rory 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T21:40:04.993

```
$(".message_list .message_body:not(:last)").hide(); 
```

工作样本：http: [//jsfiddle.net/WnCeH/2/](http://jsfiddle.net/WnCeH/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T21:42:32.310

这是您可以使用的示例小提琴，它可能有助于概念化解决您的问题的一种方法：http: [//jsfiddle.net/T5ZVE/](http://jsfiddle.net/T5ZVE/)

它用 。[不是](http://api.jquery.com/not/)和[:last](http://api.jquery.com/last-selector/)。

# algorithm - 独立顶点覆盖算法

> ID：10769971
> 
> 赞同：5
> 
> 时间：2012-05-26T21:34:28.183
> 
> 标签：algorithm, graph

Skiena关于算法的书的问题：

图 G = (V,E) 的顶点覆盖是顶点 V ∈ V 的子集，使得 E 中的每条边都包含至少一个来自 V 的顶点。图 G = (V,E) 的独立集是顶点 V ∈ V 的子集，使得 E 中的任何边都包含 V 中的两个顶点

独立顶点覆盖是顶点的子集，既是独立集又是G的顶点覆盖。给出一个有效的算法来测试G是否包含独立顶点覆盖。这会减少到什么经典的图问题？

有谁知道这个问题的答案？

谢谢。

**更新**

（需要关于这个想法的建议）

到目前为止，我认为这与检查图形是否可以使用 2 种颜色着色有关，即它是否是二分的？如果使用 BFS 变体为图形着色，比如白色和黑色，那么在某些情况下，具有其中一种颜色的顶点（比如白色）也会形成顶点覆盖。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T23:08:34.283

Your thought is correct. It is the problem of checking if a given graph is [bipartite](http://en.wikipedia.org/wiki/Bipartite_graph).

Bipartite graphs do not have cycles of odd length, so if you use a BFS to color a graph, the vertices of the same colour will be independent sets.

From Wikipedia:

> If a bipartite graph is connected, its bipartition can be defined by the parity of the distances from any arbitrarily chosen vertex v: one subset consists of the vertices at even distance to v and the other subset consists of the vertices at odd distance to v.
> 
> Thus, one may efficiently test whether a graph is bipartite by using this parity technique to assign vertices to the two subsets U and V, separately within each connected component of the graph, and then examine each edge to verify that it has endpoints assigned to different subsets.

The interesting fact is that independent set is Np-complete and vertex cover too, but verifing if a graph is bipartite is plynomial.

In future, for questions like this, also [https://cs.stackexchange.com/](https://cs.stackexchange.com/) is a great place to ask.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T19:13:27.987

**独立顶点覆盖 = 二分图 + 最小顶点覆盖？**同样的问题

# iphone - 添加新按钮后 UIScrollView 变得很粗糙

> ID：10769972
> 
> 赞同：0
> 
> 时间：2012-05-26T21:34:34.213
> 
> 标签：iphone, uiscrollview

我在这里尝试使用 scrollView 构建扩展视图，所以我的类是：

```
ButtonsScroller.h 
```

这是我的组件类，这个类扩展了 UIView 并有 uiscrollview

这是这个类的主要方法

```
-(void)buildUi {

buttonsCount=[buttonsArray count];

NSLog(@"Building Scroll With %d Buttons",buttonsCount);
NSLog(@", every row has %d Buttons",countOfButtonsInOneRow);
NSLog(@", every button Width is :  %d px",buttonWidth);
NSLog(@", every button height is :  %d px",buttonHeight);
NSLog(@", space Between Buttons In One Row   is :  %d px",marginsBetweenButtons);
NSLog(@", space Between 2 rows  is :  %d px",marginsBetweenRows);
NSLog(@"and number Of Rows To Be Shown :  %d row",rowsToShow);
int horizontalStart=horizontalStartFrom-buttonWidth;

int HORIZONTAL_CORDENATES=horizontalStart;

for(int bc=0;bc<buttonsCount;bc++){
    NSLog(@"buttons Counter : %d",bc);

    for(int g=0;g<countOfButtonsInOneRow;g++){
        if(bc==buttonsCount || bc>buttonsCount){
            break;
        }else {

            Expos *expo=[buttonsArray objectAtIndex:bc];

           //ExpoUIButton : My Custom UIView with buttons in it
            ExpoUIButton *btn=[[ExpoUIButton alloc]init];

            [btn.name setText:expo.userName];

            if(![expo.user_type isEqualToString:@"2"]){
                NSLog(@"[expo.user_type isEqualToString:1");
                [btn setType:0];
            }

            btn.frame=CGRectMake(HORIZONTAL_CORDENATES, VERTICAL_CORDENATES, buttonWidth, buttonHeight);                
            [scrollView addSubview:btn];
            bc=bc+1;
            HORIZONTAL_CORDENATES=HORIZONTAL_CORDENATES-(marginsBetweenButtons+buttonWidth);

        }
        NSLog(@"g : %d",g);
    }

    bc=bc-1;
    HORIZONTAL_CORDENATES=horizontalStart;
    VERTICAL_CORDENATES=VERTICAL_CORDENATES+(marginsBetweenRows+buttonHeight);
}

// ComputeRow Count 

int rowCount=buttonsCount;

// NSLog(@"rowCount%4  : %d",(rowCount%4 ));
while((rowCount%countOfButtonsInOneRow) !=0){
    NSLog(@"rowCount : %d",rowCount);
    rowCount=rowCount+1;
}

float rowCounts=(rowCount/countOfButtonsInOneRow);
NSLog(@"rowCounts : %f",rowCounts);

float viewHeight=rowsToShow*(buttonHeight)+(rowsToShow*marginsBetweenRows)+(buttonHeight/2);
NSLog(@"viewHeight : %f",viewHeight);

if(self.showLoadMore){
    if(loadMore==nil){
        loadMore=[UIButton buttonWithType:UIButtonTypeCustom];
        [loadMore setImage:[UIImage imageNamed:@"more"] forState:UIControlStateNormal];
        [loadMore setImage:[UIImage imageNamed:@"more-f"] forState:UIControlStateHighlighted];
        [loadMore setFrame:CGRectMake(130, VERTICAL_CORDENATES+3, 68, 15)];

        [scrollView addSubview:loadMore];

    }else {
        [loadMore setFrame:CGRectMake(130, VERTICAL_CORDENATES+3, 68, 15)];
    }
      [scrollView  setContentSize:CGSizeMake(SC_WIDTH, VERTICAL_CORDENATES+25)];
}else {
    [scrollView  setContentSize:CGSizeMake(SC_WIDTH, VERTICAL_CORDENATES)];
} 
} 
```

在我的 mainView 控制器中，我启动了一个连接，当连接完成时调用此方法

```
#pragma mark -
#pragma mark - YttpConnectionDelegate
-(void) YConnectionDoneWithArray:(NSMutableArray *)items {
    NSLog(@"items : %d",[items count]);
    if([items count]>0  ){
        exposArray =items;
        [productsList hideLoadingView];
        [productsList setButtonsArray:exposArray];
        [productsList buildUi  ];
        SEL selector = @selector(loadDataFromInternet);
        [productsList loadMoreBtnSelector:selector target:self];
        [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    } else {
        [productsList hideLoadingMoreButton];
    }
} 
```

当我打开我的视图并加载第一组按钮时，视图仍然可以，但是当添加第二组按钮时出现问题，uiscrollview 变得粗糙并且所有按钮（旧按钮和新按钮）都不可点击

另外，如果我回到我的 firstVC 视图，然后在加载第一组按钮后转到 scrollviewVC 屏幕，所有按钮仍然不可点击，那么问题是什么？！

编辑 ：

因为我认为这是一个刷新问题？！

# java - 无法将数据从 obj-c 客户端发送到 java 服务器

> ID：10769986
> 
> 赞同：2
> 
> 时间：2012-05-26T21:37:09.587
> 
> 标签：java, objective-c, client

我正在编写一个处理服务器端和客户端的 iPhone 应用程序。我遇到的问题是我无法将任何数据从我的应用程序（客户端）发送到我的 java 程序（服务器端）。我现在有点卡住了，任何帮助将不胜感激。

我的 obj-c 代码（客户端）：

```
- (BOOL) initConnection: (NSString *) ipAddr {
CFWriteStreamRef writeStream;
CFStreamCreatePairWithSocketToHost(NULL, (__bridge CFStringRef)ipAddr, 4444, NULL, &writeStream);

if(!writeStream)
    return NO;

outStream = (__bridge NSOutputStream *) writeStream;

[outStream setDelegate:self];

[outStream scheduleInRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];

[outStream open];

self.data = [[NSData alloc] init];

return YES;

- (void) sendCommand: (NSString *) command {
NSLog(@"Command that was sent to method: %@", command);

self.data = [NSData dataWithBytes:@"This is a test\n" length:16];

int bytes = [outStream write:[self.data bytes] maxLength:[self.data length]]; 
```

我的 Java 代码（服务器）：

```
private void handleCommands() {
    try {
        do {
            System.out.println("Right before reading socket");
            msg = in.readLine();

            System.out.println("Received: " + msg);

        } while(!EOC);
    } catch(IOException e) {
        e.printStackTrace();
    }
} 
```

发生的情况是，当我从应用程序发送数据时，服务器端的代码永远不会超过
**msg = in.readLine()**。当我在应用程序端终止连接时，它会打印出收到的字符串为**null**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T00:33:11.553

实际上在这行代码上：

```
self.data = [NSData dataWithBytes:@"This is a test\n" length:16]; 
```

字符串长度为 15，但您将 16 作为参数传递。也许它正在等待最后一个字符？

尽量不要对字符串长度进行硬编码，例如：

```
NSString *msgStr = @"This is a test\n";
self.data = [NSData dataWithBytes:msgStr length:[msgStr length]]; 
```

# python - Django admin.site.register 没有添加我的应用管理员

> ID：10769987
> 
> 赞同：10
> 
> 时间：2012-05-26T21:37:58.287
> 
> 标签：python, django

作为 django 新手（我对 turbogears 和 Bottle 等其他 python 网络框架有一些经验，但正在探索 django）我正在尝试为我的应用程序模型自动创建管理管理

在主要的 URLS.py 中，我有：

**编辑**：

```
from django.contrib import admin
admin.autodiscover() 
```

在那之后：

```
urlpatterns = patterns('',
                       url(r'^appname/',include('appname.urls')),
                       url(r'^admin/',include(admin.site.urls)) 
```

请注意，这是在主 urls.py 中，而不是在应用程序 urls.py 中

按照教程（在教程中对我有用..）我在 appname 文件夹中创建了一个“admin.py”文件，并在那里：

```
from appname.models import Appname
from django.contrib import admin

class appnameAdmin(admin.ModelAdmin):
        fieldsets = [various field sets and fields etc ]

admin.site.register(Appname,AppnameAdmin) 
```

在setting.py中我没有注释

```
'django.contrib.admin' 
```

我在命令行窗口中没有收到任何错误，并且确实出现了基本管理屏幕（身份验证和站点）

我在 manage.py shell 中检查了 admin.py 中的导入，一切似乎都正常，我还尝试将 AppnameAdmin 类注释掉并仅注册：

```
admin.site.register(Appname) 
```

但这也没有用

我猜我遗漏了一些明显的东西 - 我很乐意帮忙

使用 django 1.4 + python 2.72

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-27T06:44:09.980

检查所有[这些](https://docs.djangoproject.com/en/dev/ref/contrib/admin/)：

> 激活 Django 管理站点有七个步骤：
> 
> 1.  将“django.contrib.admin”添加到您的 INSTALLED_APPS 设置中。
> 2.  管理员有四个依赖项——django.contrib.auth、django.contrib.contenttypes、django.contrib.messages 和 django.contrib.sessions。如果这些应用程序不在您的 INSTALLED_APPS 列表中，请添加它们。
> 3.  将 django.contrib.messages.context_processors.messages 添加到 TEMPLATE_CONTEXT_PROCESSORS 并将 MessageMiddleware 添加到 MIDDLEWARE_CLASSES。（默认情况下这两个都是活动的，所以如果你手动调整了设置，你只需要这样做。）
> 4.  确定您的应用程序的哪些模型应该在管理界面中是可编辑的。
> 5.  对于这些模型中的每一个，可以选择创建一个 ModelAdmin 类，该类封装了该特定模型的定制管理功能和选项。
> 6.  实例化一个 AdminSite 并告诉它你的每个模型和 ModelAdmin 类。
> 7.  将 AdminSite 实例挂接到您的 URLconf 中。

*   您已安装的应用程序中是否有所有其他管理依赖项？
*   你`admin.autodiscover()`的 URLS.py 中有吗？

另外，我认为您的代码应该看起来更像这样：

```
from projectname.appname.models import Appname
from django.contrib import admin

class AppnameAdmin(admin.ModelAdmin):
        fieldsets = [various field sets and fields etc ]

admin.site.register(Appname,AppnameAdmin) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-02-15T21:15:06.190

**您是否重新启动了服务器进程？**

也许这对某人有帮助：在我的情况下，问题是通过停止和启动服务器进程来解决的，因为当您添加新`admin.py`文件时，它不会自动重新加载。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-28T20:35:17.537

aaargghhh - 我发现了问题。我将 admin.py 保存在 template/appname/ 文件夹中，而不是 appname/ 文件夹中。我真傻。很抱歉打扰了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-10T14:37:23.967

在您的模型管理员中设置：

```
def has_add_permission(self, request, obj=None):
    return True
def has_change_permission(self, request, obj=None):
    return True
def has_delete_permission(self, request, obj=None):
    return True 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-26T14:09:08.250

以上没有对我有用。

然后我转到设置，在 Project:MyApp Project Interpreter 下我将 Project Interpreter 从 Python 3.8(venv) 切换到 Python 3.8(MyApp)

然后我所有注册的模型（可以列出它们`http://localhost:8000/admin/`）

奇怪的是，还在`admin.py`“admin.site”之后。注册的方法不会被列为可用。但无论如何它都有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-20T07:12:21.670

转到 models.py 文件并在您的类中添加“models.Model”作为参数。

例子：

```
class className(models.Model) 
```

在您的情况下，使用下面的类名，它将 100% 为您工作。

```
class AppnameAdmin(models.Model): 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-18T08:09:07.483

检查所有这些：

1.  **重新启动服务器**并再次检查

2.  在 models.py 文件中的类中添加**“models.Model”**作为参数

```
 class Classname(models.Model): 
```

3.  **在settings.py**的“INSTALLED_APPS”中添加您的应用程序，在我的情况下，它是“travello.apps.TravelloConfig”

```
 INSTALLED_APPS = [
        'travello.apps.TravelloConfig',
        'django.contrib.admin',
        'django.contrib.auth',
        'django.contrib.contenttypes',
        'django.contrib.sessions',
        'django.contrib.messages',
        'django.contrib.staticfiles',
    ] 
```

4.  **在主**urls.py中添加 'admin.autodiscover()'

```
 from django.contrib import admin
    from django.urls import path, include
    admin.autodiscover()

    urlpatterns = [
        path('', include('travello.urls')),
        path('admin/', admin.site.urls),
    ] 
```

它对我有用！

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2022-02-02T21:06:45.380

请考虑某些模型只能从超级用户看到。尝试创建一个并使用该用户登录管理员。

```
python3 manage.py createsuperuser 
```

# android - 如何使用 ImageAdapter 从 Gridview 中获取所选项目？（安卓）

> ID：10769989
> 
> 赞同：7
> 
> 时间：2012-05-26T21:38:06.763
> 
> 标签：android, gridview, selecteditem

我曾使用 ListView 来显示从数据库中检索到的一些数据（字符串）……非常简单，但我的一位同事决定将图像放在屏幕文本的前面。我们无法用 Listview 做到这一点，但我们找到了一些看起来完全符合我们需要的 GridView 示例，然后我们花了一些时间使用 GridView 并将图像放在文本的前面。

现在，不幸的是，我们不知道如何获取所选项目（基于来自所选项目的文本）

我正在使用 OnItemClickListener，并在 onItemClick 方法 gridView.getItemSelectedAtPosition() 中使用，但我得到的一切都是“null”。

如果 ImageAdapter 与它有关，我现在不知道，因为如果我将其更改为 ArrayAdapter，我可以正确获得正确的项目，但是以这种方式在行中没有图像。

```
gridview.setOnItemClickListener(new OnItemClickListener() {  
   public void onItemClick(AdapterView<?> parent, View v, int position, long id{     String selectedItem = (String) (gridView.getItemAtPosicion(position)); //always null     } }); 
```

我能做些什么？

已编辑 - ListView 源

```
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;
public class ImageAdapter extends BaseAdapter {
private Context context;
private final String[] mobileValues;
private final String[] mobileValuesD;

public ImageAdapter(Context context, String[] mobileValues, String[] mobileValuesD) {
this.context = context;
this.mobileValues = mobileValues;
this.mobileValuesD = mobileValuesD;
}

  public View getView(int position, View convertView, ViewGroup parent) { 
  LayoutInflater inflater = (LayoutInflater) context.getSystemService           (Context.LAYOUT_INFLATER_SERVICE);
  View gridView;

  if (convertView == null) {

  gridView = new View(context);

   // get layout from mobile.xml
    gridView = inflater.inflate(R.layout.pesquisa_2, null);

  // set value into textview
    TextView textView = (TextView) gridView.findViewById(R.id.grid_item_label);
     textView.setText(mobileValues[position]+"\n"+mobileValuesD[position]);

 // set image based on selected text
  ImageView imageView = (ImageView) gridView.findViewById(R.id.grid_item_image);

  String mobile = mobileValues[position];

 //SELECT DAS IMAGENS

  if (mobile.equals("pdt1")) {
     imageView.setImageResource(R.drawable.img1);
  } else if (mobile.equals("prd2")) {
      imageView.setImageResource(R.drawable.feijao);
   } else {
       imageView.setImageResource(R.drawable.acucar);
    }

   } else {
    gridView = (View) convertView;
   }

    return gridView;
 }

   public int getCount() {
        return mobileValues.length;
 }

  public Object getItem(int position) {
      return null;
 }

   public long getItemId(int position) {
      return 0;
 }

 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T22:51:21.513

`gridView.getItemAtPosition(position)`调用场景下的适配器`getItem(int position)`- 所以`getItem`在你的`ImageAdapter`类中实现以返回某物，这将允许你识别选择的内容（可能`mobileValues[position]`就足够了，或者只是你在 textview 中写入的内容：）`mobileValues[position] + "\n" + mobileValuesD[position]`。

另一方面，`onItemClick(AdapterView<?> parent, View v, int position, long id)`您已经有了所选项目的位置，也许它是足够的信息？你要在那个听众身上做什么？

我对您的适配器进行了一些更改：

```
public class ImageAdapter extends BaseAdapter {

    private final String[] mobileValues;
    private final String[] mobileValuesD;

    public ImageAdapter(String[] mobileValues, String[] mobileValuesD) {
        this.mobileValues = mobileValues;
        this.mobileValuesD = mobileValuesD;
    }

    @Override
    public View getView(int position, View view, ViewGroup parent) {
        if (view == null) {
            view = ViewGroup.inflate(
                    parent.getContext(), R.layout.pesquisa_2, null);
        }

        ((TextView) view.findViewById(R.id.grid_item_label))
                .setText(getItem(position));

        ((ImageView) view.findViewById(R.id.grid_item_image))
                .setImageResource(getImageResForPosition(position));

        return view;
    }

    private int getImageResForPosition(int position) {
        String mobile = mobileValues[position];
        if (mobile.equals("pdt1")) {
            return R.drawable.img1;
        } else if (mobile.equals("prd2")) {
            return R.drawable.feijao;
        } else {
            return R.drawable.acucar;
        }
    }

    @Override
    public int getCount() {
        return mobileValues.length;
    }

    @Override
    public Object getItem(int position) {
        return mobileValues[position] + "\n" + mobileValuesD[position];
    }

    @Override
    public long getItemId(int position) {
        return position;
    }
} 
```

# php - 在fancybox弹出窗口中的codeigniter打开控制器

> ID：10769990
> 
> 赞同：1
> 
> 时间：2012-05-26T21:38:06.950
> 
> 标签：php, html, codeigniter, popup, fancybox

我正在使用 codeignite 开发一个网站。我在花式框弹出窗口中提交表单时遇到问题。

考虑这是原始页面：

http://mysite/admin/blog/posts

我想在花哨的弹出框中打开评论页面

但是当我想删除弹出框中的评论时，弹出框关闭并且原始页面重定向到：

http://mysite/admin/comments/delete/5

如何在不关闭弹出窗口的情况下提交或打开弹出窗口中的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:54:00.113

你也可以试试这个来解决你的问题：

```
<a id="cmid" href="comments page url">View Comments</a> 
```

然后你的花哨的 javascript 代码是这样的：

```
<script type="text/javascript">
    $(function(){

        $("#cmid").fancybox({
        'width'     : '50%',
        'height'    : '50%',
            'autoScale'     : false,
            'transitionIn'  : 'none',
        'transitionOut' : 'none',
        'type'      : 'iframe'
        });

    });
    </script> 
```

然后你删除评论。我认为这不会关闭弹出窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T00:42:59.003

我对你的情况有类似的需求。当我用fancybox解决它时，我将类型设置为ajax它将关闭盒子。所以我意识到还有其他支持。我们可以使用 iFrame 类型。当您使用 iFrame 时，url 访问在框架内进行。因此，您可能希望查看删除数据的后处理结果，不是吗？所以你应该考虑改变 iFrame。

资源：

1.  [http://fancybox.net/howto](http://fancybox.net/howto)
2.  [http://fancybox.net/api](http://fancybox.net/api)
3.  [http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

# c# - 选择一项 sql

> ID：10769993
> 
> 赞同：0
> 
> 时间：2012-05-26T21:38:45.727
> 
> 标签：c#, sql

我试图从数据库中只选择一个条目。它目前正在返回一个 xml 文档对象，我不知道为什么。至少，这就是我的 javascript 告诉我的。我希望它返回一个字符串，它是 gameRequestUser 的名称，其中 userName="this user"

```
 try {
            SqlConnection conn = new SqlConnection(@"Data asdfasdf;database=asdfsdfdf;User id=asdfasdfasdfPassword=asdfasdf;");

            SqlCommand getRequest = new SqlCommand("SELECT gameRequestUser FROM UserData Where userName='" + Session["userName"].ToString() + "'", conn);

            conn.Open();

            SqlDataReader reader = getRequest.ExecuteReader();

            while (reader.Read()) {
                user = reader.GetValue(0).ToString().Trim();
            }

            conn.Close();

            return user;
        } catch (Exception e) { return e.Message.ToString(); } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T21:51:28.820

您应该使用`ExecuteScalar`而不是`ExecuteReader`：

```
user = (string)getRequest.ExecuteScalar(); 
```

甚至在您应该使用 SQL Server Management Studio 检查查询结果之前 - 在那里运行查询并检查结果是否正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T21:58:17.983

始终使用参数，避免太多问题（字符串引用、sql 注入等）

```
using(SqlConnection conn = new SqlConnection("yourconnectionstring"))
{
    SqlCommand getRequest = new SqlCommand("SELECT gameRequestUser FROM UserData Where " + 
                                           "userName=@user", conn); 
    conn.Open(); 
    getRequest.Parameters.AddWithValue("@user",Session["userName"].ToString()) 
    SqlDataReader reader = getRequest.ExecuteReader(); 
    while (reader.Read()) { 
        user = reader.GetValue(0).ToString().Trim(); 
    } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T21:47:04.337

您应该做的一件事是进入 SQL Server Management Studio，并尝试在那里直接运行查询：

```
SELECT gameRequestUser FROM UserData Where userName='this user' 
```

话虽如此，要记住的另一件事是，您可以通过执行以下操作来告诉 SQL 最多返回 1 行：

```
SELECT top 1 gameRequestUser FROM UserData Where userName='this user' 
```

我希望这有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T21:54:36.173

1.  使用 SELECT TOP 1 ... 查询

    SELECT TOP 1 gameRequestUser 从 UserData WHERE ...

2.  使用 SqlCommand 的 ExecuteScalar() 方法而不是 ExecuteReader()，因为您只需要返回一个字段值。

    SqlCommand getRequest = new SqlCommand(....);
    ...
    字符串用户 = Convert.ToString(cmd.ExecuteScalar());

# c# - 许多模型以许多局部视图查看

> ID：10769997
> 
> 赞同：2
> 
> 时间：2012-05-26T21:39:56.650
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有一个包含许多部分视图的视图，我需要将匹配模型传递给每个视图。

我找到了两种方法来做到这一点，但我不知道应该做的真正方法是什么。

1.  我想创建一个包含所有模型作为属性的大类，然后我可以将模型发送到每个局部视图。问题是它是硬类型的，如果我需要传递不同的模型组合，它不适合。

2.  我想到的另一种方法是在每个模型中都有一个方法，为我提供每个局部视图的模型（GetMenuBar() 等）。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T21:57:12.660

我的建议是选择选项 1。我将它与我的所有主视图/多个部分视图场景一起使用。由于每个部分都有自己的 ViewModel，因此易于维护。它使整个事物保持整洁

我使用完全相同的设置，如下所示：

```
public class MainViewModel {

    public Partial1ViewModel Partial1 [ get; set; }
    public Partial2ViewModel Partial2 [ get; set; }
    public Partial3ViewModel Partial3 { get; set; }
    public Partial4ViewModel Partial4 { get; set; }

    public MainViewModel() {}

    public MainViewModel() {
        Partial1 = new Partial1ViewModel();
        Partial2 = new Partial2ViewModel();
        Partial3 = new Partial3ViewModel();
        Partial4 = new Partial4ViewModel();
    }
} 
```

每个`PartialViewXViewModel`都是它自己的 ViewModel，如果需要，可以在另一个视图中重用。

呈现的 Action 可能如下所示：

```
public ActionResult Index {
    var model = new MainViewModel();
    return View(model);
} 
```

你的看法

```
@model MainViewModel

<div>
    {@Html.RenderPartial("PartialOne", Model.Partial1)}
</div>

<div>
    {@Html.RenderPartial("PartialTwo", Model.Partial2)}
</div>

<div>
    {@Html.RenderPartial("PartialThree", Model.Partial3)}
</div>

<div>
    {@Html.RenderPartial("PartialFour", Model.Partial4)}
</div> 
```

为每个`PartialX`类似定义 UI：

```
@model Partial1ViewModel

//view html here 
```

现在，每个 Partial view html 和他们使用的每个模型都可以在任何地方使用。

现在最重要的是，如果您有一个只需要其中两个的页面，您只需创建一个新`ViewModel`的来表示该特定视图，如下所示：

```
public class OtherMainViewModel {

    public Partial2ViewModel Partial2 [ get; set; }
    public Partial4ViewModel Partial4 { get; set; }

    public OtherMainViewModel() {}

    public OtherMainViewModel() {
        Partial2 = new Partial2ViewModel();
        Partial4 = new Partial4ViewModel();
    }
} 
```

并在另一个视图中使用它，如下所示：

```
public ActionResult SomeOtherAction {
    var model = new OtherMainViewModel();
    return View(model);
} 
```

这是完全可以接受的，也是 MVC 中的首选设计策略，让 ViewModel 专门表示视图需要什么，并且只表示它需要什么。

您可能希望使用不同的方法来填充模型。这里的大多数人会推荐使用 Automapper。无论哪种方式，上面只是在 MainViewModel 的构造函数中初始化 PartialViewXModels。如果您使用数据库中的数据填充这些模型，则不一定是您的情况。你会想要你自己的策略。这将在这里工作：

```
public ActionResult Index {
    var model = new MainViewModel();
    model.Partial1 = GetPartial1Data(); // this method would return Partial1ViewModel instance
    model.Partial2 = GetPartial2Data(); // same as above for Partial2ViewModel
    ...
    return View(model);
} 
```

这一切只会让您开始设计，您可以根据自己的内心进行调整:-)