# StackOverflow 问答 11946000-11946999

# python - 标记外部节点，与networkx中的其他节点/边缘重叠最小

> ID：11946005
> 
> 赞同：21
> 
> 时间：2012-08-14T04:57:11.780
> 
> 标签：python, label, nodes, networkx

我正在尝试创建一个在节点外部打印节点标签的图形。我能够生成如下所示的“偏移量”来解决这个目的。但是，有时标签与边缘重叠（这是不可取的，因为节点周围有很多空白区域可以打印相应的标签）。我需要以标签不与任何边缘重叠的方式标记这些节点，或者至少尝试尽可能减少重叠。

```
import networkx as nx
from networkx.utils import is_list_of_ints, flatten
import matplotlib.pyplot as plt

G=nx.Graph()

G = nx.complete_graph(5)
mapping = {0:'aaaaaaa',1:'bbbbbbb',2:'ccccccc', 3:'dddddddd', 4:'eeeeeeeee'}
G = nx.relabel_nodes(G,mapping)

plt.figure(figsize=(10,10), facecolor="w", frameon=False)
pos = nx.graphviz_layout(G, prog="fdp") #calculate position (x,y) coordinates
nx.draw_networkx_nodes(G,pos,node_size=1200,node_shape='o',node_color='0.75')
nx.draw_networkx_edges(G,pos, width=2,edge_color='b')

#for labeling outside the node
offset =10
pos_labels = {}
keys = pos.keys()
for key in keys:
    x, y = pos[key]
    pos_labels[key] = (x, y+offset)
nx.draw_networkx_labels(G,pos=pos_labels,fontsize=2)
plt.show() 
```

networkx 中是否有任何功能可以处理这种情况。我google了很久没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-07T16:42:28.877

我之前曾尝试过类似的事情，主要想法是尽量避开边缘。

假设边缘是直线，有两种简单且类似的方法可以实现这一点：

1.  基于节点[邻域](https://en.wikipedia.org/wiki/Neighbourhood_%28graph_theory%29)的边缘相对于节点本身所形成的角度。

2.  基于邻域节点的[质心。](https://en.wikipedia.org/wiki/Centroid)

因此，找到从一个节点到其邻域的边缘形成的角度，并尝试将标签定位在远离大多数边缘的位置；或估计节点邻域的质心并将标签沿相反方向定位。

第一个解决方案可能有点问题，主要是因为[atan2](https://en.wikipedia.org/wiki/Atan2)函数的操作方式（它本质上决定了边缘角度），但它确实在定位标签方面提供了一些灵活性。

第二种解决方案是最简单的，其工作原理如下：

```
import networkx as nx
import matplotlib.pyplot as plt

#Build the graph
#Please note, the code here is as per the original post
G=nx.Graph()
G = nx.complete_graph(5)
mapping = {0:'aaaaaaa',1:'bbbbbbb',2:'ccccccc', 3:'dddddddd', 4:'eeeeeeeee'}
G = nx.relabel_nodes(G,mapping)

plt.figure(figsize=(10,10), facecolor="w", frameon=False)
#Get a graph layout
pos = nx.graphviz_layout(G, prog="fdp") #calculate position (x,y) coordinates
#Here is an alternative layout, please see below.
#pos = nx.layout.spring_layout(G)
nx.draw_networkx_nodes(G,pos,node_size=1200,node_shape='^',node_color='0.75')
nx.draw_networkx_edges(G,pos, width=2,edge_color='r')
#Show the original position of the labels using a Green colour.
nx.draw_networkx_labels(G,pos,font_color='g')

#Please note, the code below uses the original idea of re-calculating a dictionary of adjusted label positions per node.
label_ratio = 1.0/8.0
pos_labels = {} 
#For each node in the Graph
for aNode in G.nodes():
    #Get the node's position from the layout
    x,y = pos[aNode]
    #Get the node's neighbourhood
    N = G[aNode]
    #Find the centroid of the neighbourhood. The centroid is the average of the Neighbourhood's node's x and y coordinates respectively.
    #Please note: This could be optimised further
    cx = sum(map(lambda x:pos[x][0], N)) / len(pos)
    cy = sum(map(lambda x:pos[x][1], N)) / len(pos)
    #Get the centroid's 'direction' or 'slope'. That is, the direction TOWARDS the centroid FROM aNode.
    slopeY = (y-cy)
    slopeX = (x-cx)
    #Position the label at some distance along this line. Here, the label is positioned at about 1/8th of the distance.
    pos_labels[aNode] = (x+slopeX*label_ratio, y+slopeY*label_ratio)

#Finally, redraw the labels at their new position.
nx.draw_networkx_labels(G,pos=pos_labels,fontsize=2)
#Show the figure
plt.show() 
```

这主要适用于主要位于图形外围的节点，但对于位于图形中心的节点具有挑战性，因为质心不会提供避开大部分边的可靠方向。

这是graphviz的[fdp](http://www.graphviz.org/category/graphviz-terms/fdp)布局的输出......

![graphviz fdp 输出](../Images/e86e3e2a4e6d86fdf8338c9f6a1ea5bf.png)

...这是 networkx 的[spring layout](https://networkx.github.io/documentation/latest/reference/generated/networkx.drawing.layout.spring_layout.html)的输出。

![networkx 弹簧布局](../Images/74fba59d7bbabe56d7b651d3985c88f0.png)

请注意第二个图上绿色和黑色标签的接近程度。本质上，dddddddd 的邻域的质心相对接近节点的实际位置。

对于更复杂的解决方案，您可能需要检查更复杂的算法，例如[Wordle 使用的算法](https://stackoverflow.com/questions/342687/algorithm-to-implement-a-word-cloud-like-wordle)，以便在标签与边相交时调整标签的初始位置。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-03T12:41:40.203

@A_A 概述的方法建立在良好的直觉之上，并且是不错的初步近似。然而，除了@A_A 已经提到的问题之外，这两种方法还有一些额外的问题。

1.  如果节点的（欧几里德）附近的所有边也属于该节点，则这两种方法都只会减少标签边重叠。但是，如果图很大或很密集，则节点附近的大多数边可以属于其他节点，这两种方法都没有考虑到这一点。

2.  尽管这两种方法通常都会减少小型稀疏图中的标签边重叠，但两种方法都没有解决标签节点和标签标签重叠的问题。

**有一种概念上简单的方法也可以解决标签节点和标签标签重叠：在每个被标记的节点周围画一个圆圈。在每个圆圈上，找到离其他所有东西（节点、边、其他标签）最远的点。**这确保了圆圈上的这个位置周围有最空的画布，因此是放置标签的好地方。

这可以通过以下方式完成：

1.  使用沿边缘密集采样的一系列点来逼近每个边缘。在实践中，10-20 点似乎工作得很好，但即使是 100-1000 点在计算上也很容易处理。确保包括边缘的起点和终点，即节点位置。

2.  对于每个标签，计算沿相应节点周围的圆圈采样的第二组点。同样，35 点（每 10 度一个点）通常绰绰有余，但使用更多点（例如 100 点）并没有实质性的危害。

3.  对于每个圆，在圆上找到其最近的欧几里得邻居最远的点（同时排除同一圆上的点）。将标签放在那里。

步骤 3 可以进一步细化以使用最近的两个邻居的最大平均距离。这解决了当节点位于图的外围时可能发生的关系，因此圆的大部分区域的最近邻居是被标记的节点。

从数字的角度来看，所有这些都可能听起来很可怕。*然而，使用 KD 树可以非常*有效地计算最近邻距离，如下所示（使用 100 个点来近似每个边和圆）。

[![在此处输入图像描述](../Images/504ab93b2f313e011c62627d5617e9f2.png)](https://i.stack.imgur.com/L7Hdp.gif)

这种方法在[netgraph](https://github.com/paulbrodersen/netgraph)中实现，这是一个用于可视化网络的 python 库（我是作者）。该库与大多数常见的图形数据格式（包括对象）完全兼容`networkx`，`igraph` `Graph`因此制作漂亮的图形应该是容易和快速的。至少是这样的想法。

重现动画的代码（不包括鼠标移动）：

```
#!/usr/bin/env python
import matplotlib.pyplot as plt
import networkx as nx
from netgraph import InteractiveGraph # pip install netgraph

g = InteractiveGraph(nx.complete_graph(10), node_size=2, edge_width=0.5,
                     node_labels=dict(zip(range(10), 'abcdefghij')), node_label_offset=0.05,
                     node_label_fontdict=dict(size=20, fontweight='bold'))
plt.show() 
```

# javascript - 为什么在 Less.js 中使用 JavaScript

> ID：11946006
> 
> 赞同：1
> 
> 时间：2012-08-14T04:57:23.667
> 
> 标签：javascript, css, less

当我看到的每个示例和解释都谈到在服务器端编译它并将其作为缓存的 CSS 文件提供时，你为什么要在 Less.js 文件中使用 JavaScript。我还没有看到一个使用 JavaScript 的示例，而不是它可以使用的示例，并且'这是一个 Less 文件中的一些随机 JavaScript，看到了吗？有用！'。

这里的想法是，您将拥有两个 Less 文件，一个包含所有样式并用作缓存的 CSS 文件（快速服务），另一个将包含任何（并且更少）动态的、客户端特定的计算，以及与 JavaScript 完成的任何样式一样（服务时间更长，但更少）- Less 文件现在包含与样式有关的所有内容（而不是在 CSS 和 JS 文件之间拆分）？

或者这仅仅是“看起来它可以解析 JavaScript”的噱头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:28:29.750

当你在服务器端编译时，它使用节点，所以 JavaScript 仍然被执行，只是不在浏览器的上下文中。

我建议永远不要使用它，因为它混合了技术并使文件看起来很乱。但是有时它是必需的，例如将@arguments 转换为逗号分隔格式或执行子字符串 - 任何你被困在少做和需要的事情。

但是如果不用js也可以，那就不用js就可以了。

# android - 在 Android 上搜索 ListView 项目和数据库

> ID：11946010
> 
> 赞同：0
> 
> 时间：2012-08-14T04:58:20.283
> 
> 标签：android, list, sqlite, search, sql-like

我尝试了这段代码，但是遍历所有列表项太耗时了。 `item_all`是一个列表，其中包含我从数据库中获得的数据。

```
et_Search.addTextChangedListener(new TextWatcher() {

    int textlength;
    long time = System.currentTimeMillis();

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        textlength = getSearchText().length();

        item_filtered = new ArrayList<StockItem>();
        long time = System.currentTimeMillis();

        int i = 0;

        do {
            int startpost = 0;
            int endpost = textlength;
            boolean found;
            do {
                found = false;
                if (getItemDesc(i).length() >= textlength 
                    && getSearchText().equalsIgnoreCase((String)getItemDesc(i).subSequence(startpost, endpost))) {
                    item_filtered.add(item_all.get(i));
                    found = true;
                }

                startpost++;
                endpost++;
            } while (endpost <= getItemDesc(i).length() && !found);

            i++;
        } while ((i < item_all.size()) && (item_filtered.size() <= 20));

        Log.v("Time", "Time needed " + (System.currentTimeMillis() - time));

        if (item_filtered.isEmpty())
            AppendList(new ArrayList<StockItem>());
        else
            AppendList(item_filtered);
    } 
```

然后我尝试使用 LIKE

```
try {
    String[] WHATYOUWANT = { "*" };
    String WHERECLAUSE = KEY_DESCRIPTION + " LIKE '%" + textIinput + "%' " ;
    String GROUPBY = null;
    String HAVING = null;
    String ORDERBY = KEY_ROWID + " ASC LIMIT 0,100 ";

    cursor = mDb.query(DATABASE_TABLE, WHATYOUWANT, WHERECLAUSE, null, GROUPBY, HAVING, ORDERBY);

    } catch (Exception e) {
        e.printStackTrace();
} 
```

它工作得很好，但它并没有真正做到我想要的。

我想要的是搜索的项目与输入完全匹配。Aay 我输入“abc”，我不希望出现仅包含“ab”或“bc”（不是“abc”）的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:36:19.100

尝试使用`contains()`而不是`equalsIgnoreCase()`.

```
 if (getItemDesc(i).length() >= textlength
                            && getItemDesc(i)
                                    .contains(getSearchText())); 
```

这可能会帮助你。:)

# android - Android - 订购应用的布局类型

> ID：11946011
> 
> 赞同：0
> 
> 时间：2012-08-14T04:58:23.640
> 
> 标签：android, android-layout

我正在 Android 中创建我的第一个应用程序，但我很困惑我应该为我的一个活动使用哪种布局类型。我想要显示餐厅菜单项的列表，所以我在考虑 LinearLayout。但是，这些项目中的每一个都应该有名称、描述、价格、数量。因此，我现在正在考虑一个带有片段的线性布局，其中每个菜单项都是一个片段。请注意，菜单项是从服务器动态检索的。这是 UI 布局的合适方法还是我应该使用其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:30:34.643

好吧，你可以使用 ListView ......我不认为这取决于它本身的布局。如果重要的是你想从数据库中动态添加数据，ListView 应该可以工作，它与布局无关（除了设计你的 UI）

# mysql - 如何为mysql数据库添加超级权限？

> ID：11946012
> 
> 赞同：62
> 
> 时间：2012-08-14T04:58:34.640
> 
> 标签：mysql

我正在尝试在 mysql 中执行查询。

```
SET GLOBAL log_bin_trust_function_creators =1; 
```

> 错误：
> 
> SQL 查询：
> SET GLOBAL log_bin_trust_function_creators =1
> MySQL 说：
> #1227 - 拒绝访问；您需要此操作的 SUPER 权限

我想知道如何`SUPER`为任何数据库分配权限

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-08-14T05:02:06.697

您可以使用以下命令添加超级权限`phpmyadmin`：

> 转到 PHPMYADMIN > 权限 > 编辑用户 > 在管理员选项卡下单击 SUPER。> 去

如果你想通过`Console`，这样做：

```
 mysql> GRANT SUPER ON *.* TO user@'localhost' IDENTIFIED BY 'password'; 
```

执行上述代码后，以：

```
mysql> FLUSH PRIVILEGES; 
```

您应该这样做，`*.*`因为 SUPER 不是仅适用于一个数据库的特权，它是全局的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-14T05:29:38.223

您可以在此处查看特权。![在此处输入图像描述](../Images/1ca9f952a93a6610dbea6e559281a8eb.png)

然后你可以编辑用户

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-14T17:15:54.500

在 Sequel Pro 中，访问用户帐户窗口。请注意，任何 MySQL 管理程序都可以代替 Sequel Pro。

添加以下帐户和权限：

`GRANT SUPER ON *.* TO 'user'@'%' IDENTIFIED BY PASSWORD`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-27T13:52:33.860

授予超级用户后仅打印查询 phpmyadmin。希望对控制台的人有所帮助：

ON $.$ TO-> $=* 不显示当您将两个放在它们之间并带有一个点时。

> 撤销所有特权*。*FROM 'usr'@'localhost'; 授予所有特权*。*TO 'usr'@'localhost' REQUIRE NONE WITH GRANT OPTION MAX_QUERIES_PER_HOUR 0 MAX_CONNECTIONS_PER_HOUR 0 MAX_UPDATES_PER_HOUR 0 MAX_USER_CONNECTIONS 0;

和相反的一个，删除授权：

> 撤销所有特权*。*FROM 'dos007'@'localhost'; 撤销授予选项*。*FROM 'dos007'@'localhost'; 授予所有特权*。* TO 'dos007'@'localhost' REQUIRE NONE WITH MAX_QUERIES_PER_HOUR 0 MAX_CONNECTIONS_PER_HOUR 0 MAX_UPDATES_PER_HOUR 0 MAX_USER_CONNECTIONS 0;

检查流浪汉应该在任何mysql中工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-16T03:14:11.373

在 Centos 5 上，在使用正确的 uid 和 pw（具有 root 访问权限）登录后，尝试从 MySQL shell 更改某些变量值时，我遇到了各种错误。我得到的错误是这样的：

```
mysql> -- Set some variable value, for example
mysql> SET GLOBAL general_log='ON';
ERROR 1227 (42000): Access denied; you need (at least one of) the SUPER privilege(s) for this operation 
```

在一个极其偶然的时刻，我做了以下事情：

```
OS-Shell> sudo mysql                          # no DB uid, no DB pw 
```

**请注意，我没有提供数据库 uid 和密码**

```
mysql> show variables;
mysql> -- edit the variable of interest to the desired value, for example
mysql> SET GLOBAL general_log='ON'; 
```

它就像一个魅力

# node.js - Nowjs 仍然无法使用 express 3.0

> ID：11946014
> 
> 赞同：0
> 
> 时间：2012-08-14T04:58:53.453
> 
> 标签：node.js, express, nowjs-sockets

我正在尝试让 nowjs 与 express 3.0 一起使用，就像在[这个](https://stackoverflow.com/questions/10782832/nowjs-expressjs-3-0)问题中一样。我正在关注代码，但我仍然得到“现在未定义”。

我在 Oracle VM 虚拟机中运行 Ubuntu 12.04。

首先，我创建了一个快速应用程序。

```
$ express myBrilliantNewApp 
```

然后我在新目录中安装 nowjs。

```
$ sudo npm install now 
```

添加服务器变量并立即使用它。

```
var server = http.createServer(app).listen(app.get('port'), function() {
console.log('Express server listening on port ' + app.get('port'));
})

var everyone = require('now').initialize(server); 
```

那么我应该可以做到这一点......

```
everyone.now.writesomething = function() {
console.log('I would really like it if this shows up at the console') 
}; 
```

...并打电话并检查每个人的所有内容。

```
now.writesomething();
console.log(everyone); 
```

这没用。我得到：

```
[ReferenceError: now is not defined]
ReferenceError: now is not defined
at Object.<anonymous> (/home/jan/dev/apps/probeer1/app.js:44:1)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.runMain (module.js:492:10)
at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

谁能告诉我我在这里做错了什么？

完整列表 app.js

```
/**
* Module dependencies.
*/

var express = require('express')
  , routes = require('./routes')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);

var server = http.createServer(app).listen(app.get('port'), function() {
  console.log('Express server listening on port ' + app.get('port'));
})

var everyone = require('now').initialize(server);

everyone.now.writesomething = function() {
  console.log('I would really like it if this shows up at the console')
};

now.writesomething();
console.log(everyone); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:15:28.493

在服务器上使用 nowjs 之前，您需要调用：

```
var nowjs = require('now'); 
```

要在客户端上使用 nowjs，您需要在 HTML 中包含脚本引用：

```
<script src="/nowjs/now.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:58:45.367

有关详细信息，请参阅此答案：[找不到模块 'now' - nowjs 和 nodejs](https://stackoverflow.com/questions/10857409/cannot-find-module-now-nowjs-and-nodejs)

```
npm config set global true && \
     echo 'export NODE_PATH="'$(npm root -g)'"' >> ~/.bashrc && \
     . ~/.bashrc 
```

使用全局标志重试

```
sudo npm install now -g 
```

# c++ - 带有立体声输出的 midiOutShortMsg 和 midiOutSetVolume

> ID：11946016
> 
> 赞同：1
> 
> 时间：2012-08-14T04:59:12.043
> 
> 标签：c++, winapi, midi

我正在编写 C++ 代码来输出 midi 消息。我需要它在立体声中工作，以便通过左声道/扬声器播放一些音符，通过右声道播放其他音符。如果我调用 midiOutSetVolume(midiOutHandle, 0xFFFF)，然后调用 midiOutShortMsg，每次调用间隔几百毫秒，则音符会通过左侧扬声器。同样，如果我在调用 midiOutShortMsg 之前首先调用 midiOutSetVolume(midiOutHandle, 0xFFFF0000) ，那么一切都会从正确的扬声器中出来。但是，如果我尝试通过执行以下操作同时通过左扬声器和右扬声器输出一个音符：

```
midiOutSetVolume(midiOutHandle, 0xFFFF);
midiOutShortMsg(...);
midiOutSetVolume(midiOutHandle, 0xFFFF0000);
midiOutShortMsg(...); 
```

两个音符都只是从正确的扬声器中出来。我想如果我可能有 2 个独立的设备手柄，我可以设置一个来播放左声道音符，另一个用于播放右声道。但是，如果我尝试通过对 midiOutOpen 的 2 次调用打开同一设备的 2 个句柄，我会在第二次调用时收到 MMSYSERR_ALLOCATED 错误。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T05:21:08.913

您应该使用**两个通道**并在每个通道上设置**声像。**然后在通道 0 上为左扬声器播放您的音符，在通道 1 上为右扬声器播放您的音符。

要设置音符的通道，您的*Note On*事件有 4 个通道位：

```
1001nnnn (Note On)
nnnn = channel number (0..15) 
```

因此，将通道**0**用于左扬声器，将通道**1**用于右扬声器。

要设置通道的声像，请将*Control Change*消息输出到该通道：

```
Status byte: 1011nnnn (Control Change)
nnnn = channel number (0..15)

First data byte - Controller number: 0ccccccc
Second data byte - Controller value: 0vvvvvvv
ccccccc = 10 (0x0A) for Pan
vvvvvvv = 0..127 (left = 0, right = 127) 
```

将通道 0 的声像设置为 0，将通道 1 的声像设置为 127。

有关更多详细信息，请参阅[MIDI 消息参考](http://www.midi.org/techspecs/midimessages.php#3)。此外，这里是控制变更编号的[简短列表](http://www.indiana.edu/~emusic/cntrlnumb.html)。

* * *

**更新：**使用*同步打击乐器需要 MIDI 标准 XG 或 GM 2 级。*[在此处](http://en.wikipedia.org/wiki/Comparison_of_MIDI_standards)阅读它们。您使用哪种方法取决于您设备的 MIDI 标准：

*   XG：发送值为**127** (0x7F)的**Bank Select** Control Change 消息（控制器编号**0 ）。**
***   GM Level 2: Use channels **10** and **11** for your two kits (ie. 9 and 10 when you send Note On).**

# ruby-on-rails - 连接表上的 Rails 条件

> ID：11946017
> 
> 赞同：1
> 
> 时间：2012-08-14T04:59:16.090
> 
> 标签：ruby-on-rails, join, conditional-statements

我有表a，b。相关课程

```
class A < ActiveRecord::Base
   has_one :b
end

class B <ActiveRecord::Base
end 
```

b 具有整数字段 c。

我想检索 A 的所有记录，其中 B 的 c<5。

我试过了

```
A.find(:conditions => (B.c < 5) ) 
```

但我收到投诉“未定义的成员 c”。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:05:26.563

尝试这个：

```
A.joins(:b).where("b.c < 5") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T05:30:04.950

不要使用查找。继续“在哪里”

```
A.joins(:b).where("b.c < 5")

A.b.where("c < 5") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T05:05:25.117

尝试这个

```
 A.b.where("c < 5") 
```

不要使用 find contions，它会随着 rails 3 递减

# rdf - 将 rdf 三元组加载到 virtuoso 开源

> ID：11946022
> 
> 赞同：7
> 
> 时间：2012-08-14T04:59:53.330
> 
> 标签：rdf, semantic-web, triplestore, virtuoso, n-triples

我正在尝试从此[转储创建](http://downloads.linkedgeodata.org/dumps/latest/LGD-Dump-Complete-2011-01-02.nt.bz2)[LinkedGeoData.org](http://linkedgeodata.org)的本地镜像。

这大约是 61,000,000 个三倍。Virtuoso 应该可以轻松处理更多的事情，但每次它在大约 40,000,000 个三倍之后停止加载。我正在使用来自 Amazon EC2 的双倍特大实例，它有 30 GB 的 RAM，还有大量的存储空间。我的配置文件有问题吗？我正在使用 ubuntu 服务器 12.04，我尝试通过（6.1.5 版）安装 Virtuoso，并按照[Jörn Hees 的说明](http://joernhees.de/blog/2012/05/25/setting-up-a-local-dbpedia-3-7-mirror-with-virtuoso-6-1-5/)`apt-get`从 github（6.1.6 版）的最新稳定源编译。

我还尝试将转储文件拆分为更小的部分并一一加载。在插入了大约 40,000,000 个三元组后，这也会崩溃。

日志文件没有显示任何奇怪的东西；`virtuoso-t`只是停止工作而没有实际崩溃，并`top`显示该进程使用 0% 的 CPU。在前半小时左右之后，我已经让该过程运行了几天而没有任何进展。

这是我的`virtuoso.ini`文件：

```
[Database]
DatabaseFile            = /var/lib/virtuoso/db/virtuoso.db
ErrorLogFile            = /var/lib/virtuoso/db/virtuoso.log
LockFile            = /var/lib/virtuoso/db/virtuoso.lck
TransactionFile         = /var/lib/virtuoso/db/virtuoso.trx
xa_persistent_file      = /var/lib/virtuoso/db/virtuoso.pxa
ErrorLogLevel           = 7
FileExtend          = 200
MaxCheckpointRemap      = 625000
Striping            = 0
TempStorage         = TempDatabase

[TempDatabase]
DatabaseFile            = /var/lib/virtuoso/db/virtuoso-temp.db
TransactionFile         = /var/lib/virtuoso/db/virtuoso-temp.trx
MaxCheckpointRemap      = 2000
Striping            = 0

;
;  Server parameters
;
[Parameters]
ServerPort          = 1111
LiteMode            = 0
DisableUnixSocket       = 1
DisableTcpSocket        = 0
;SSLServerPort          = 2111
;SSLCertificate         = cert.pem
;SSLPrivateKey          = pk.pem
;X509ClientVerify       = 0
;X509ClientVerifyDepth      = 0
;X509ClientVerifyCAFile     = ca.pem
ServerThreads           = 20
CheckpointInterval      = 60
O_DIRECT            = 0
CaseMode            = 2
MaxStaticCursorRows     = 5000
CheckpointAuditTrail        = 0
AllowOSCalls            = 0
SchedulerInterval       = 10
DirsAllowed         = ., /usr/share/virtuoso/vad, /home/ubuntu/lgd
ThreadCleanupInterval       = 0
ThreadThreshold         = 10
ResourcesCleanupInterval    = 0
FreeTextBatchSize       = 100000
SingleCPU           = 0
VADInstallDir           = /usr/share/virtuoso/vad/
PrefixResultNames               = 0
RdfFreeTextRulesSize        = 100
IndexTreeMaps           = 256
MaxMemPoolSize                  = 200000000
PrefixResultNames               = 0
MacSpotlight                    = 0
IndexTreeMaps                   = 64
;;
;; When running with large data sets, one should configure the Virtuoso
;; process to use between 2/3 to 3/5 of free system memory and to stripe
;; storage on all available disks.
;;
;; Uncomment next two lines if there is 2 GB system memory free
;       NumberOfBuffers          = 170000
;       MaxDirtyBuffers          = 130000
;; Uncomment next two lines if there is 4 GB system memory free
;       NumberOfBuffers          = 340000
;       MaxDirtyBuffers          = 250000
;; Uncomment next two lines if there is 8 GB system memory free
;       NumberOfBuffers          = 680000
;       MaxDirtyBuffers          = 500000
;; Uncomment next two lines if there is 16 GB system memory free
;       NumberOfBuffers          = 1360000
;       MaxDirtyBuffers          = 1000000
;; Uncomment next two lines if there is 32 GB system memory free
       NumberOfBuffers          = 2720000
       MaxDirtyBuffers          = 2000000
;; Uncomment next two lines if there is 48 GB system memory free
;       NumberOfBuffers          = 4000000
;       MaxDirtyBuffers          = 3000000
;; Uncomment next two lines if there is 64 GB system memory free
;       NumberOfBuffers          = 5450000
;       MaxDirtyBuffers          = 4000000
;;
;; Note the default settings will take very little memory
;; but will not result in very good performance
;;

[HTTPServer]
ServerPort          = 8890
ServerRoot          = /var/lib/virtuoso/vsp
ServerThreads           = 20
DavRoot             = DAV
EnabledDavVSP           = 0
HTTPProxyEnabled        = 0
TempASPXDir         = 0
DefaultMailServer       = localhost:25
ServerThreads           = 10
MaxKeepAlives           = 10
KeepAliveTimeout        = 10
MaxCachedProxyConnections   = 10
ProxyConnectionCacheTimeout = 15
HTTPThreadSize          = 280000
HttpPrintWarningsInOutput   = 0
Charset             = UTF-8
;HTTPLogFile                = logs/http.log

[AutoRepair]
BadParentLinks          = 0

[Client]
SQL_PREFETCH_ROWS       = 100
SQL_PREFETCH_BYTES      = 16000
SQL_QUERY_TIMEOUT       = 0
SQL_TXN_TIMEOUT         = 0
;SQL_NO_CHAR_C_ESCAPE       = 1
;SQL_UTF8_EXECS         = 0
;SQL_NO_SYSTEM_TABLES       = 0
;SQL_BINARY_TIMESTAMP       = 1
;SQL_ENCRYPTION_ON_PASSWORD = -1

[VDB]
ArrayOptimization       = 0
NumArrayParameters      = 10
VDBDisconnectTimeout        = 1000
KeepConnectionOnFixedThread = 0

[Replication]
ServerName          = db-IP-10-252-61-61
ServerEnable            = 1
QueueMax            = 50000

;
;  Striping setup
;
;  These parameters have only effect when Striping is set to 1 in the
;  [Database] section, in which case the DatabaseFile parameter is ignored.
;
;  With striping, the database is spawned across multiple segments
;  where each segment can have multiple stripes.
;
;  Format of the lines below:
;    Segment<number> = <size>, <stripe file name> [, <stripe file name> .. ]
;
;  <number> must be ordered from 1 up.
;
;  The <size> is the total size of the segment which is equally divided
;  across all stripes forming  the segment. Its specification can be in
;  gigabytes (g), megabytes (m), kilobytes (k) or in database blocks
;  (b, the default)
;
;  Note that the segment size must be a multiple of the database page size
;  which is currently 8k. Also, the segment size must be divisible by the
;  number of stripe files forming  the segment.
;
;  The example below creates a 200 meg database striped on two segments
;  with two stripes of 50 meg and one of 100 meg.
;
;  You can always add more segments to the configuration, but once
;  added, do not change the setup.
;
[Striping]
Segment1            = 100M, db-seg1-1.db, db-seg1-2.db
Segment2            = 100M, db-seg2-1.db
;...

;[TempStriping]
;Segment1           = 100M, db-seg1-1.db, db-seg1-2.db
;Segment2           = 100M, db-seg2-1.db
;...

;[Ucms]
;UcmPath            = <path>
;Ucm1               = <file>
;Ucm2               = <file>
;...

[Zero Config]
ServerName          = virtuoso (IP-10-252-61-61)
;ServerDSN          = ZDSN
;SSLServerName          = 
;SSLServerDSN           = 

[Mono]
;MONO_TRACE         = Off
;MONO_PATH          = <path_here>
;MONO_ROOT          = <path_here>
;MONO_CFG_DIR           = <path_here>
;virtclr.dll            =

[URIQA]
DynamicLocal            = 0
DefaultHost         = localhost:8890

[SPARQL]
;ExternalQuerySource        = 1
;ExternalXsltSource         = 1
;DefaultGraph           = http://localhost:8890/dataspace
;ImmutableGraphs            = http://localhost:8890/dataspace
ResultSetMaxRows            = 10000
MaxQueryCostEstimationTime  = 4000  ; in seconds
MaxQueryExecutionTime       = 600   ; in seconds
DefaultQuery                = select distinct ?Concept where {[] a ?Concept} LIMIT 100
DeferInferenceRulesInit     = 0  ; controls inference rules loading
;PingService            = http://rpc.pingthesemanticweb.com/
ShortenLongURIs = 1

[Plugins]
LoadPath            = /usr/lib/virtuoso/hosting
Load1               = plain, wikiv
Load2               = plain, mediawiki
Load3               = plain, creolewiki
Load4           = plain, im 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T01:08:54.050

回答我自己的问题。问题是行中的前导空格

```
 NumberOfBuffers          = 2720000
   MaxDirtyBuffers          = 2000000 
```

删除这些，Virtuoso 实际上使用了可用内存而不是默认的 16MB。

# magento - 产品属性的默认选择 - Magento

> ID：11946023
> 
> 赞同：3
> 
> 时间：2012-08-14T04:59:59.283
> 
> 标签：magento, attributes, default, product

我在 Magento 中为产品创建了一个自定义 Yes/No 属性，在升级文件中使用此代码：

```
$model = Mage::getModel('catalog/resource_eav_attribute');

$attributeData = array(
    'attribute_code' => 'custom_attribute',
    'frontend_label' => 'My custom attribute',
    'is_global' => '1',
    'frontend_input' => 'boolean',
    'backend_type' => 'int',
    'default_value' => null,
    'is_unique' => '0',
    'is_required' => '0',
    'is_configurable' => '1',
    'is_searchable' => '1',
    'is_visible_in_advanced_search' => '1',
    'is_comparable' => '1',
    'is_used_for_price_rules' => '0',
    'is_wysiwyg_enabled' => '1',
    'is_html_allowed_on_front' => '1',
    'is_visible_on_front' => '1',
    'used_in_product_listing' => '1',
    'used_for_sort_by' => '1',
    'is_filterable_in_search' => 1,
    'is_filterable' => 1,
    'source_model' => null,
    'option' => array(),
    'apply_to' => 'simple,configurable,bundle,grouped',
    'is_user_defined' => true,
    'global' => true,
);

$model->addData($attributeData);
$model->setEntityTypeId(
    Mage::getModel('eav/entity')->setType(Mage_Catalog_Model_Product::ENTITY)->getTypeId()
);
$model->save(); 
```

该代码有效。但是我希望在创建新产品或尝试编辑产品时默认选择是选项。现在，只有 No 首先显示。我尝试将 defult_value 更改为 true 或 1，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:08:26.270

我发现 default_value 是用于创建新产品时的选项值，而不是用于没有设置属性的产品。所以我认为为了在所有产品上显示“是”，我应该制作一个脚本来更新所有具有此属性的产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:19:09.693

为了添加一个属性，你应该去文件夹：

```
/var/www/html/<YOUR APP>/app/code/core/Mage/Catalog/etc 
```

并编辑文件：`config.xml`，转到部分：

```
<product> 
<collection> 
<attributes> 
```

并添加所需的属性。接下来，转到文件夹：

```
/var/www/html/<YOUR APP>/app/design/frontend/base/<YOUR THEME>/template/catalog/product 
```

`new.phtml`并在需要使用属性调用时编辑文件：

```
<?php echo $_product→getAttributeName();?> 
```

例如，如果您的属性称为`size`，请使用：

```
<?php echo $_product→getSize();?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T05:52:00.267

我认为您需要更新属性。假设“custom_attribute”是您的新属性的属性代码，“默认值”是您要更改/更新的代码，然后您将以下代码添加为新的升级脚本。

```
 $installer = new Mage_Eav_Model_Entity_Setup('core_setup');
    $installer->startSetup();

    $aAttribute = $installer->getAttribute('catalog_product', 'custom_attribute');
    $aAttribute['default_value'] = '1';

    $installer->updateAttribute('catalog_product', 'custom_attribute', $aAttribute);
    $installer->endSetup(); 
```

我希望这行得通。

# django - 根据参数简化 QuerySet 调用

> ID：11946028
> 
> 赞同：1
> 
> 时间：2012-08-14T05:00:21.207
> 
> 标签：django, coding-style

假设我有一个变量`time_period`，其值为以下字符串之一：`weekly`, `monthly`, `yearly`。

...以及通过模型过滤的 QuerySet 调用`TimeModel`：

```
time_period = 'monthly'
instance = TimeModel.objects.get(time_period=time_period,
                                 year=datetime.now().year,
                                 month=datetime.now().month) 
```

在这种情况下，我已经传递了参数`year`和`month`in，因为`time_period == 'monthly'`. 如果`time_period == yearly`, 我只想通过`year`, 如果`time_period == weekly`, 我会通过所有三个 ( `yearly`, `monthly`, 和`weekly`) 。

`if`除了写 3 个陈述之外，有什么方法可以做我所描述的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:10:39.200

也许这有帮助：

```
from django.db.models import Q

now = datetime.now()
time_periods = {
    'weekly': Q(year=now.year, month=now.month, day=now.week),  # note from OP: now.week is technically invalid; you actually want to use now.isocalendar()[1]
    'monthly': Q(year=now.year, month=now.month),
    'yearly': Q(year=now.year),
}

instance = TimeModel.objects.get(time_periods[time_period], time_period=time_period) 
```

# javascript - 使用 Jquery 模拟 iframe 行为

> ID：11946031
> 
> 赞同：0
> 
> 时间：2012-08-14T05:00:37.507
> 
> 标签：javascript, jquery

我需要将整个 php 页面动态嵌入到另一个页面中，并且我不能使用 iframe 来实现这一点，因为它会覆盖申请的重要部分，最重要的是，我需要完全控制嵌入页面，以便通过拖动插入元素和无需使用黑客即可删除脚本。

我需要模仿 iframe 行为，因为来自主页和加载的 css 不会相互干扰，并且我需要加载页面中的脚本正常工作。

此时，结果的验证不是问题。

有人可以帮忙吗？？

提前致谢！

**编辑：** 让我明确一点：我可以使用 jquery 将一个页面嵌入到另一个页面中。这很简单。但是，当我这样做时，一个 css 会干扰另一个 css 并且 js 无法正确执行，这就是我试图避免的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:11:18.267

在我看来，只要它都在同一台服务器上，AJAX 调用就可以完成这项工作。

如果您使用以下方式调用页面：

```
 function assignRequestObject(){
    try{
    // Firefox, Opera 8.0+, Safari
        xmlHttp=new XMLHttpRequest();
    }
    catch (e){
    // Internet Explorer
        try{
        xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
        }
        catch (e){
            try{
            xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch (e){
            alert("Your browser does not support AJAX!");
            return false;
            }
        }
    }
}
    assignRequestObject();
    xmlHttp.onreadystatechange = readyStateCheck;
    xmlHttp.open('GET', '/mydir/fooBar.php', true); // '/' begins at your site's root
    xmlHttp.send(null);

    readyStateCheck = function(){
    if(xmlHttp.readyState==4){
        document.getElementById('mydiv').innerHTML = xmlHttp.responseText;      }
} 
```

（这是未经测试的）

这部分 - `document.getElementById('mydiv').innerHTML = xmlHttp.responseText;`- 将用您的 php 文件生成的任何内容填充您的 div。请注意，您甚至可以使用 .txt 文件执行此操作。

# jasper-reports - 如何比较 PrintWhenExpression 中的布尔值

> ID：11946033
> 
> 赞同：2
> 
> 时间：2012-08-14T05:00:57.127
> 
> 标签：jasper-reports

我在 jrxml 文件中定义了一个布尔类型的参数。该参数的值来自我的 java 类（true/false）。如果值为 true，那么我不想显示该字段。我正在编写表达式如下。

```
<printWhenExpression><![CDATA[$P{flag}==false]]></printWhenExpression> 
```

这个表达式有什么问题。这里我只在标志值为 false 时显示该字段。谁能告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:26:19.267

在尝试了这里的其他 2 条建议之后，可能还有大约 30 条其他的东西（java 表达式杀死了我），我终于得到了以下工作。在我的示例中，如果 PRINT_INSTRUCTIONS 布尔参数为 TRUE，我不想打印特定的文本字段，除非它为 FALSE。

在 iReport 中它看起来像这样：

```
new Boolean($P{PRINT_INSTRUCTIONS}.booleanValue() == false) 
```

在 XML 中，它看起来像这样：

```
<printWhenExpression><![CDATA[new Boolean($P{PRINT_INSTRUCTIONS}.booleanValue() == false)]]></printWhenExpression> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T05:23:38.740

试试这样：

```
<printWhenExpression><![CDATA[$P{flag}==Boolean.FALSE]]></printWhenExpression> 
```

这是我正在工作的表达式：

```
<printWhenExpression><![CDATA[$V{REPORT_COUNT}.intValue() % 2 == 0 ? Boolean.TRUE : Boolean.FALSE]]></printWhenExpression> 
```

# perl - perl 配置文件

> ID：11946039
> 
> 赞同：2
> 
> 时间：2012-08-14T05:01:33.283
> 
> 标签：perl

我正在尝试创建一个设置文件/配置文件。这将包含一个键值对列表。有 10 个脚本将使用此配置文件，或者从其中获取输入或将输出发送到它（键值）或两者兼而有之。

我可以通过简单地读取和写入文件来做到这一点..但我正在考虑我的设置文件中的全局哈希，所有 10 个脚本都可以访问它，并且可以保留每个脚本所做的更改。现在，如果我使用： require "setting.pl" 我可以更改当前脚本中的哈希值，但在下一个脚本中，更改不可见..

有没有办法做到这一点？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:09:33.880

[绑定到哈希](http://p3rl.org/Config%3a%3aSimple#TIE-INTERFACE)的配置文件怎么样？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T06:32:41.137

查看此模块[AppConfig](http://p3rl.org/AppConfig)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T05:17:21.673

我认为您需要某种数据库。您可以使用 mysql/sqlite/etc 或创建一个独特的脚本来保存您的哈希并通过套接字提供对它的读/写访问。

# jquery - 成功后AJAX获取然后重定向

> ID：11946040
> 
> 赞同：0
> 
> 时间：2012-08-14T05:01:48.827
> 
> 标签：jquery, ajax, forms, get

我正在尝试使用 ajax 获取表单数据以发送到 api url，然后将填写表单的用户重定向到感谢页面。

```
<form id="valform">
<!-- form elements -->
</form>
<div id="status_message"></div> 
```

简单的表单代码在上面，ajax代码在下面

```
$(document).ready(function(){
var API_URL = 'http://www.some-api-provider.com/api.php';    
$('#valform').on('submit', function (e){
e.preventDefault();

$.ajax({
  type: 'GET',
  url: API_URL,
  data: $('#valform').serialize(),
  success: function () {
    window.location.href = "thankyou.html";

  },
  error: function () {
    alert('There was a problem!'); // do something better than this!
  }
});
return false;
}); 
```

这段代码有问题吗？我不断在 GET 部分收到警报消息，所以我假设那里有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:07:09.960

除非您的文件托管在与 相同的域中，否则`API_URL`AJAX 将停止您的请求，这就是您看到错误消息的原因。这是为了阻止[XSS（跨站点脚本）](http://en.wikipedia.org/wiki/Cross-site_scripting)，一种黑客技术。这称为[同域](http://en.wikipedia.org/wiki/Same_origin_policy)策略。

# linux - 如何在 linux 或 unix 上自动安装简单的应用程序

> ID：11946041
> 
> 赞同：0
> 
> 时间：2012-08-14T05:01:49.443
> 
> 标签：linux, unix, automation, installation

在我的测试中，我将通过命令行安装和卸载一个简单的程序/应用程序。我想自动化这个过程。它在安装过程中询问简单的输入，例如是、否和路径。

请让我知道如何做到这一点..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:25:04.183

`./configure && make && make install`对你来说不简单吗？

# c# - 解决索引超出范围错误

> ID：11946042
> 
> 赞同：-3
> 
> 时间：2012-08-14T05:01:58.757
> 
> 标签：c#

我正在使用 gridview 行命令编辑和删除。当我单击那些特定行数据显示在文本框上的链接时，如前所述。

第一个循环正在工作，但`e.CommandName == "deletevalue"`显示错误

> 指数超出范围。必须是非负数且小于集合的大小

```
protected void GrdBuilding_RowCommand(object sender, GridViewCommandEventArgs e)
    {

        int index = Convert.ToInt32(e.CommandArgument);
        if (e.CommandName == "editvalue")
        {

            TxtBuildingid.Text = GrdBuilding.Rows[index].Cells[1].Text;
            TxtBuildingCode.Text = GrdBuilding.Rows[index].Cells[2].Text;
            TxtBuildingName.Text = GrdBuilding.Rows[index].Cells[3].Text;
            DrpBuilding.Text = GrdBuilding.Rows[index].Cells[4].Text;
            if (GrdBuilding.Rows[index].Cells[5].Text.ToString() == "True")
            {
                ChkisActive.Checked = true;
            }
            else
            {
                ChkisActive.Checked = false;
            }

            BtnSave.Text = "Update";
        }

        else if (e.CommandName == "deletevalue")
        {
            TxtBuildingid.Text = GrdBuilding.Rows[index].Cells[1].Text;
            TxtBuildingCode.Text = GrdBuilding.Rows[index].Cells[2].Text;
            TxtBuildingName.Text = GrdBuilding.Rows[index].Cells[3].Text;
            DrpBuilding.Text = GrdBuilding.Rows[index].Cells[4].Text;
            if (GrdBuilding.Rows[index].Cells[5].ToString() == "True")
            {
                ChkisActive.Checked = true;
            }
            else
                ChkisActive.Checked = false;
            }

            BtnSave.Text = "Delete";
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:15:25.783

我们不能用“这样做，然后它会起作用”来回答这个问题，因为问题不在您向我们展示的代码中。

我将尝试回答您可以做些什么来找到问题。

**你需要调试你的代码。**这是一个基本程序，当我阅读您的问题时，在我看来，您还没有这样做。

1.  对我来说，第一步是`else if`在 IDE 中的行上设置一个断点。

2.  当执行在那里停止时，检查的值`e.CommandArgument`

    ==> 是错误的还是未定义的？

3.  现在，回到`GrdBuilding_RowCommand(...)`被调用的地方。`e.CommandArgument`来自哪里？关于如何设置值的逻辑必须存在问题。

在那里你会发现问题，或者在代码中找到另一个你不清楚的地方。在那里设置一个新的断点并单步执行您的代码，观察创建`e.CommandArgument`.

# php - 计算另一行中的条目数

> ID：11946045
> 
> 赞同：0
> 
> 时间：2012-08-14T05:02:22.610
> 
> 标签：php, mysql

我正在从一个表（名称）中选择数据。在另一张表中，我有老师的姓名。

当我从表中选择我的数据时，我如何计算每位教师的姓名总数？

例子：

```
$q = mysql_query("SELECT * FROM names ORDER BY limit 50");
while($row = mysql_fetch_array($q)){
    $name = $row['name'];
    $teacher $row['teacher'];
    $total = ?????

    echo "the name is $name and the teacher is $teacher (total number for this teacher is $total";

} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:08:52.680

```
SELECT teachersTable.*, COUNT(`names`.`id`) as NamesCount FROM `teachersTable`
LEFT JOIN `names` ON `teachersTable`.`id`=`names`.`teacherid`
GROUP BY `teachersTable`.`id` 
```

使用它作为您的查询，列 NamesCount 应该是每个教师的姓名数量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:07:56.130

最简单的可能是在数据库查询中聚合它。类似的东西（如果我理解正确的话）：

```
SELECT n1.*, (SELECT COUNT(*) FROM names n2 WHERE n2.teacher = n1.teacher) AS total
FROM names n1
ORDER BY ...
LIMIT 50 
```

*请注意，这将计算整个表中的名称数量。*如果您需要它只计算前 50 个，则还必须在子查询中指定一个`ORDER BY`and `LIMIT 50`。

* * *

您还可以遍历 PHP 中的所有行，并将每个教师计数到一个关联数组中，然后对其进行索引以查找总数。这需要首先获取所有数据，然后循环返回以显示。*这将计算返回数据集中的名称数量，而不是整个表。*

# date - 只返回满足 solr 中日期条件的结果？

> ID：11946050
> 
> 赞同：1
> 
> 时间：2012-08-14T05:03:02.450
> 
> 标签：date, datetime, solr, conditional

我有表`television`，它有字段`createdDate`。

现在我想获取所有创建的电视：|NOW - createdDate| 例如，< 10（天）。

我怎样才能在 solr 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:56:08.927

查看[date-math-now-and-filter-queries](http://searchhub.org/dev/2012/02/23/date-math-now-and-filter-queries/)

您可以创建查询`fq=createdDate:[NOW-10DAY TO NOW]`以过滤掉文档。
调试查询将创建为`createdDate:[1344059617705 TO 1344923617705]`

在 solrconfig.xml 中，您可以将以下内容与请求处理程序一起使用：-

> ```
>  <lst name="appends">
>      <str name="fq">createdDate:[NOW-10DAY TO NOW]</str>
>    </lst> 
> ```

# php - php mssql 选择 * 不起作用

> ID：11946051
> 
> 赞同：1
> 
> 时间：2012-08-14T05:03:15.427
> 
> 标签：php, sql-server-2008

我收到错误

```
No data! (sqlJadual) 
```

从这个查询

```
mssql_query("SELECT * 
             from tblstatusjadual 
             where idjadual like '1%' and 
                   tahun='2011' 
             order by idjadual") or die('No data! (sqlJadual)'); 
```

但是，当我将其更改为

```
mssql_query("SELECT idjadual,status 
             from tblstatusjadual 
             where idjadual like '1%' and 
             tahun='2011' 
             order by idjadual") or die('No data! (sqlJadual)'); 
```

它工作正常。

如果我只从 2 个字段中选择也没关系，但是当我想选择超过 15 个字段时，查询会变得冗长且令人困惑。

我的问题是 mssql 在他们的查询中不支持 select * 吗？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:22:50.860

这取决于列的数量及其类型。可能（例如）其中一种列类型是 BLOB 并且驱动程序确保它在行数据结构中具有 2GB 可用空间来保存它（我以前在一些写得不好的 JDBC 驱动程序中看到过这种情况）。

最好的检查方法是逐渐将其他列（除`schedule`and `year`）添加到第二个查询中，直到它失败。这可能会告诉您错误的列，如果有的话。

另外，将您的`die`声明更改为：

```
die(mssql_get_last_message()) 
```

所以你可以希望看到失败消息是什么。

并且，根据您对此的回应：

> 仅 Unicode 排序规则中的 Unicode 数据或 ntext 数据无法使用 DB-Library（例如 ISQL）或 ODBC 版本 3.7 或更早版本发送到客户端。

看起来您的数据库和您用来访问它的库之间的功能不匹配。

由于 Unicode 通常被认为是一件*好事*，我会说坚持下去，看看是否有更高版本的 MSSQL（或底层 ODBC 驱动程序）可以处理它。

[此页面](http://www.php.net/manual/en/function.mssql-query.php)还有一些建议可以解决您的问题：

* * *

当您收到此错误消息时：“无法使用 DB-Library（如 ISQL）或 ODBC 版本 3.7 或更早版本将仅 Unicode 排序规则中的 Unicode 数据或 ntext 数据发送到客户端。”

在 /etc/freetds/freetds.conf 添加这两行（最后两行）：

```
[global]
;tds version = 4.2
tds version = 8.0
client charset = UTF-8 
```

您也可以在 php.ini 中编辑“charset”（但如果您之前在 freetds.conf 中做过，则不需要）：

```
; Specify client character set..
; If empty or not set the client charset from freetds.comf is used
; This is only used when compiled with FreeTDS
mssql.charset = "UTF-8" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:50:20.217

我在这里提到我的评论作为答案，因为它对您有所帮助，并且下次有人访问/面临类似情况时，他/她可能会参考此内容（而不是扫描上述评论系列的整个字符串）。

如果您`SELECT *`对一个`MSSQL`表发出 a 并且您的表包含一个`TEXT`带有空白字符串的列，您要么

1) 将该列的数据类型更改为`varchar`
2) 将该列的值从空白字符串重置为`NULL`.

做这项`SELECT *`工作。

（另一方面，我建议您不要使用`SELECT *`，而只在查询中包含您真正需要的那些列。）

# yii - 如何将最后一页的信息添加到登录页面，并在登录成功后重定向到具有相同信息的最后一页

> ID：11946057
> 
> 赞同：0
> 
> 时间：2012-08-14T05:04:20.827
> 
> 标签：yii

我有“创建包”页面，用户填写所需的数据。
之后，当用户按下创建按钮时，我的系统将检查用户是否已登录。
如果用户尚未登录，则应将用户重定向到登录页面。
当用户凭证被接受时，用户将被重定向到“创建包”过程，具有相同的信息（最新的 POST 数据）。
怎么做 ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:53:38.140

将 POST 数据存储在 session 中， [http://www.yiiframework.com/doc/api/1.1/CHttpSession/](http://www.yiiframework.com/doc/api/1.1/CHttpSession/)

# android - Android：如何在 Eclipse 中更新新的 API 级别

> ID：11946066
> 
> 赞同：6
> 
> 时间：2012-08-14T05:06:36.173
> 
> 标签：android, eclipse

在 Eclipse(Helios) 中，我只能将 android API 级别提高到 13(Android 3.2)。我想在 Android 4.0 中创建一个项目，但是当我创建一个新项目时，我只能将目标 API 级别提高到 13。我已将 ADT 和 SDK 平台工具更新到最新版本。即使在 AVD 管理器中，当我创建一个新的 AVD 时，目标版本也只显示为 API 级别 13。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T05:11:37.167

您需要在 eclipse windows mwnu 中选择并选择 Android SDK Manager，它会检查未安装的 API 级别并选择您要安装的 API 级别，然后安装软件包并接受所有条款和条件并安装新的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:11:57.030

通过单击它的图标（Eclipse 下拉菜单下方的绿色下载图标）或运行：ANDROID_SDK_FOLDER\tools\android.bat 打开 Android SDK 管理器

并安装更多SDK平台

# java - 选择 X 窗口

> ID：11946068
> 
> 赞同：1
> 
> 时间：2012-08-14T05:06:41.307
> 
> 标签：java, linux, xorg

有没有办法在 Xorg 下选择 Java 中的 OS 窗口？

本质上，我想复制像 xwininfo 这样的命令的功能，但如果可能的话，我想避免将其作为子进程执行。至于所需的实际信息，我正在寻找用户选择的窗口的位置和大小（x、y、宽度、高度），最好是通过鼠标（与 xwininfo 一样），但按名称搜索是可以接受的也是。

据我所知，标准 JDK 中不存在此功能，但预制库或一些相当简单的 JNA 代码将是完美的。仅需要与最新版本的 Linux / Xorg 兼容。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:42:46.017

如果没有 JNI/JNA 编码，我认为这是不可能的。但是有些图书馆已经这样做了。看看 SWT。它可能可以满足您的需求。看看这个线程：[Java 是否允许您在 Mac OS X 上使用本机 UI 小部件？](https://stackoverflow.com/questions/2489916/does-java-allow-you-to-use-native-ui-widgets-on-mac-os-x) 这可能会有所帮助。

也看看[xdotool](http://www.semicomplete.com/projects/xdotool/)。我从未尝试过，但它似乎正是您所需要的。

# iphone - 如何使用 NSURLConnectionDelegate 验证用户是否已经登录

> ID：11946076
> 
> 赞同：0
> 
> 时间：2012-08-14T05:07:46.563
> 
> 标签：iphone, login, nsurlconnectiondelegate

我正在使用 NSURLConnection 和 NSURLConnectionDelegate 协议将带有从 iPhone 客户端输入的用户名和密码的 URL 发布到服务器。服务器收到 URL 后，服务器上提供的 Web 服务将填充一些 JSON 格式的数据并将其发送回 iPhone 客户端。

我的 WebserviceDelegate 类使用 NSURLConnectionDelegate 协议。

```
 @implementation WebserviceDelegate

    - (id)initWithURL:(NSURL *)url
    {
        if (self = [super init])
        {
            responseData = [NSMutableData data];
            NSURLRequest *request = [NSURLRequest requestWithURL:url];

            connection = [NSURLConnection connectionWithRequest:request delegate:self];

            [connection start];
        }

        return self;
    }

    ...

    @end 
```

现在我想验证我从服务器获得的响应是​​否告诉我我是否已登录。为此，Web 服务发送的数据将具有一个名为“status”的字典键。如果“status”为“true”，则表示登录成功。如果看到“false”，则表示登录失败。

但在 iPhone 端，我不知道如何实现上述逻辑，因为：

该请求是异步的，因此当我尝试在自定义方法中验证状态键时，我得到空值。（responseDict 是在 .h 文件中定义的变量，它的值是从

> (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data

在我的 WebserviceDelegate 类中）

```
 NSString *status = [responseDict objectForKey:@"status"];
    NSLog(@"status = %@", status);

    if ([@"true" isEqualToString:status]) {
        return YES;
    }
    else {
        return NO;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:47:28.037

这实际上取决于您在服务器中执行的身份验证类型。

例如，如果您使用基本的 http 身份验证，您可以轻松地在标头中发送凭据，如果成功则返回 200，如果失败则返回 4xx。如果您正在执行其他类型的身份验证，例如您在此处描述的身份验证，这意味着只要您连接，无论结果如何，您都会收到 200 响应，因此您将按照您所说的阅读字典。

在这种情况下，除了等待响应执行以下操作之外别无他法。您可以采取几种方法，例如：

在委托方法中执行您想要执行的任何操作，以便如果身份验证成功，则在响应到达时完成。

您还可以在另一个线程中发送同步请求，并在那里执行以下任务。由于它不在主线程中，因此不会阻塞 gui，并且由于验证用户不应该花费那么长时间，因此不会对该线程产生太大影响。

（但是您可以做的最简单的事情就是让成功或不成功的路径从委托方法中执行）

# ios - Gmail的收件箱文件夹路径？

> ID：11946085
> 
> 赞同：1
> 
> 时间：2012-08-14T05:08:36.423
> 
> 标签：ios, path, gmail, gmail-imap, inbox

我正在开发一个应该阅读和发送邮件的 iOS 应用程序。为了访问收件箱文件夹，我使用了“收件箱”。它适用于 Yahoo 和 AOL，但不适用于 Gmail。有人告诉我尝试“[Gmail]”、“[Gmail]/All Mails”、“Gmail/[All Mails]”。我已经尝试了所有这些，但没有一个有效。重要的是，如果我写“[Gmail]/Spam”或“[Gmail]/Trash”，它可以正常工作。所以重点是我可以访问除收件箱以外的所有文件夹的邮件。如何访问 gmail 的收件箱文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:39:32.900

使用`"Inbox"`适用于我使用 python3 和 imaplib 访问 GMail。以下是如何获取所有有效文件夹名称的列表并确保：

```
import imaplib
mail = imaplib.IMAP4_SSL('imap.gmail.com')
mail.login('username', 'password')
print(mail.list()) 
```

对我来说，一些返回值是：（`"INBOX"`收件箱）、`"PERSONAL"`（标签）、`"[Gmail]/Drafts"`（GMail 草稿）、`"[Gmail]/Sent Mail"`（GMail 发送的项目）。

登录后，只需选择“收件箱”文件夹并使用查询搜索文件夹的内容。`"Inbox"`例如，这将返回文件夹中电子邮件的主题列表：

```
# mail is the imap object from the previous listing
mail.select('"INBOX"')
result, data = mail.search(None, "ALL")

for e_id in data[0].split()[-10:]:
    _, response = mail.fetch(e_id, '(body[header.fields (subject)])')
    print(response[0][1][9:]) 
```

`"[Gmail]/Drafts"`对您来说可能会成功而失败的原因`"[Gmail]/Sent Mail"`是您没有引用带有空格的文件夹名称和周围的双引号。以下是在 python3 中的操作方法：

```
# mail is the imap object from the previous listing
mail.select('"[Gmail]/Sent Mail"') # notice the double quotes as a part of the folder name
result, data = mail.search(None, "ALL") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T04:29:24.790

解决了这个问题

```
"[Gmail]/All Mail" 
```

# iphone - 使用按钮将视图与情节提要中的 tableview 连接

> ID：11946089
> 
> 赞同：0
> 
> 时间：2012-08-14T05:08:53.953
> 
> 标签：iphone, ios, uitableview, uistoryboard

我是新手，所以请帮助我，我们如何将 UIview 控制器按钮单击连接到故事板中的 uitableviewcontroller（它也包含导航栏）？我尝试了很多请帮助我？![在此处输入图像描述](../Images/e1212bacc942cd17a487a40cdb1aa5cc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:29:39.823

右键单击（或在单击时按住`control`键）按钮，然后拖动到导航控制器，您应该会看到两个控制器之间出现一条线（并且导航控制器将在您可以松开的位置突出显示并建立segue）。您将看到一个弹出窗口，您可以描述它是否是模态转场（在这种情况下看起来是这样，因为父视图没有自己的导航控制器，而子视图有）或其他。

顺便说一句，这两个“按钮”实际上是带有图像或图像视图的按钮吗？如果是图像视图，您需要用按钮替换它们并将按钮设置为自定义按钮，然后提供图像。它看起来一样，但您将拥有按钮功能。你不能从普通的旧图像视图中进行 segue，只有按钮。

# java - 如何在 Restful Web 服务中编辑默认 URL

> ID：11946097
> 
> 赞同：0
> 
> 时间：2012-08-14T05:09:33.910
> 
> 标签：java, netbeans-7, restful-url

我使用 netbeans 创建了 Restful Web 服务，但无法更改默认 URL。是这样的

```
http://localhost:8080/project/resources/path 
```

所以我需要将该网址更改为

```
http://localhost:8080/project/search/path. 
```

那么有可能这样做吗？请给出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:11:45.663

尝试更改服务配置中的url

# html - 如何删除点“。” 在 OL LI 的有序列表项中的编号之后？

> ID：11946098
> 
> 赞同：21
> 
> 时间：2012-08-14T05:09:36.993
> 
> 标签：html, css

> **可能重复：**
> [HTML + CSS：没有句点的有序列表？](https://stackoverflow.com/questions/5945161/html-css-ordered-list-without-the-period)

想要删除点“。” 来自 OL（订单列表）

```
<ol>
<li>One</li>
<li>Two</li>
</ol> 
```

结果

```
 1\. One
 2\. Two 
```

要求的结果

```
 1 One  
 2 Two 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-14T05:11:57.310

这将适用于 IE8+ 和其他浏览器

```
ol { 
    counter-reset: item;
    list-style-type: none;
}
li { display: block; }
li:before { 
    content: counter(item) "  "; 
    counter-increment: item 
} 
```

甚至：

```
ol li:before {
  content: counter(level1) " "; /*Instead of ". " */
  counter-increment: level1;
} 
```

如果您希望也支持较旧的浏览器，那么您可以这样做（由 neemzy 提供）：

```
ol li a {
    float: right;
    margin: 8px 0px 0px -13px; /* collapses <a> and dots */
    padding-left: 10px; /* gives back some space between digit and text beginning */
    position: relative; z-index: 10; /* make the <a> appear ABOVE the dots */
    background-color: #333333; /* same background color as ol ; the dots are now invisible ! */
} 
```

# java - 我如何实际使用分隔符？

> ID：11946105
> 
> 赞同：0
> 
> 时间：2012-08-14T05:11:39.930
> 
> 标签：java, swing, list, io, jlist

如何在 java 中实际使用分隔符，这是示例 data.dat 文件

```
 1 yuri
   2 fisher
   3 McMillan
   4 price
   5 soap 
```

如何仅获取文件中每一行的第一个数字并使用 useDelimiter() 方法

我该如何处理这段代码

```
Scanner src = new Scanner(fin);
                                 src.useDelimiter(" \n");
                                DefaultListModel model = new DefaultListModel();
                                while (src.hasNext()) {
                                String lol = src.nextLine();
                                model.addElement(lol);
                                }
                                list.setModel(model);
                                } 
                                }); 
```

这是整个代码.. 嗯.. 文件中并不总是“lol”我稍后会更改它

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.util.Scanner;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.DefaultListModel;
import javax.swing.DefaultListSelectionModel;
import javax.swing.ListSelectionModel;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author Jfetizanan
 */
@SuppressWarnings("serial")
public class IOtestForm extends javax.swing.JFrame {

    /**
     * Creates new form IOtest
     */
    public IOtestForm() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        list = new javax.swing.JList();
        input0 = new javax.swing.JTextField();
        load = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jScrollPane1.setViewportView(list);
        DefaultListSelectionModel m = new DefaultListSelectionModel();
        m.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        m.setLeadAnchorNotificationEnabled(false);
        list.setSelectionModel(m);
        list.addListSelectionListener(new ListSelectionListener() {
            @Override
        public void valueChanged(ListSelectionEvent e) {
        int selected[] = list.getSelectedIndices();
        for (int i = 0; i < selected.length; i++) {
        String element = (String) list.getModel().getElementAt(selected[i]);
        input0.setText(element);
        }}});

        load.setText("Load");
        load.addActionListener(new ActionListener() {
                            @Override
            @SuppressWarnings("unchecked")
                            public void actionPerformed(ActionEvent e) {
                                 FileReader fin = null;
                            try {
                                 fin = new FileReader("data.dat");
                                } catch (FileNotFoundException ex) {
                                   Logger.getLogger(IOtestForm.class.getName()).log(Level.SEVERE, null, ex);
                                }
                                Scanner src = new Scanner(fin);
                                src.useDelimiter("\\s*lol\\s*");
                                DefaultListModel model = new DefaultListModel();
                                while (src.hasNext()) {
                                String lol = src.next();
                                model.addElement(lol);
                                }
                                list.setModel(model);
                                } 
                                });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 380, Short.MAX_VALUE)
                    .addComponent(input0)
                    .addComponent(load, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(13, 13, 13)
                .addComponent(load)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(input0, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(94, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {

        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(IOtestForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }

        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new IOtestForm().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JTextField input0;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JList list;
    private javax.swing.JButton load;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:25:46.820

您可以使用`src.useDelimiter("\\s*lol\\s*")`. 有关解析的示例，请参见[http://ideone.com/kZUL6 。](http://ideone.com/kZUL6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T05:23:36.907

一个不同的解决方案是在空格处分割每一行：

```
String[] split = lol.trim().split("\\s+"); 
```

然后你应该看到每个 的第一个数字`split[0]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T05:30:54.013

让我们从基本的开始

要加载文件，你会这样做

```
Scanner src = new Scanner(is);
while (src.hasNext()) {

    int line = src.nextInt();
    String value = src.next();

    System.out.println(line + " = " + value);

} 
```

现在，我们真正需要的是某种方法来对这些信息进行建模。更好的解决方案是创建某种类型的对象来表示此信息，使其更易于管理。

就像是

```
public class LineOfText {

    private int line;
    private String value;

    public LineOfText(int line, String value) {
        this.line = line;
        this.value = value;
    }

    public int getLine() {
        return line;
    }

    public String getValue() {
        return value;
    }

} 
```

好的，那么我们需要将文件中的属性应用到它。

```
Scanner src = new Scanner(is);
while (src.hasNext()) {

    int line = src.nextInt();
    String value = src.next();

    LineOfText lot = new LineOfText(line, value);

} 
```

我们可以将其添加到`ListModel`您已经创建的内容中。

```
model.addElement(lot); 
```

现在，如果我们在 UI 上显示它，它看起来就不是很漂亮。我们真正需要的是某种更有效地“渲染”文本的方法。

就像是

```
public class LineOfTextListCellRenderer extends DefaultListCellRenderer {

    @Override
    public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {

        if (value instanceof LineOfText) {

            value = ((LineOfText)value).getLine();

        }

        return super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);

    }

} 
```

应该做。我们需要将此渲染器应用于您之前创建的列表。

```
list.setListCellRenderer(new LineOfTextListCellRenderer()); 
```

现在，如果我们在 UI 上显示它，我们应该只看到列表中的行号。

接下来，我们需要一些方法来检测选择的变化。为此，我们需要一个`ListSelectionListener`

```
list.addListSelectionListener(new ListSelectionListener() {

    @Override
    public void valueChanged(ListSelectionEvent e) {

        Object item = list.getSelectedItem();
        if (item != null && item instance of LineOfText) {
            ListOfText lot = (LineOfText)lot;
            // Now we have access to the text value
            // Simply use "setText" on the text area to apply it

            textArea.setText(lot.getValue());

            // Remember, "textArea" should be replaced with the name
            // of your text area
        }

    }

}); 
```

现在你明白为什么这是一个单独的问题了；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T05:34:06.033

将分隔符设置为`\\s*lol\\s*`

```
public static void main(String[] args)
{
    String myString = "1 lol\n2 lol\n3 lol\n4 lol\n5 lol";
    System.out.println(myString);
    Scanner scanner = new Scanner(myString);
    scanner = scanner.useDelimiter("\\s*lol\\s*");
    while(scanner.hasNext())
    {
        System.out.println(scanner.next());
    }
} 
```

# php - 根据另一个表的值有条件地更新一个表

> ID：11946112
> 
> 赞同：5
> 
> 时间：2012-08-14T05:12:36.687
> 
> 标签：php, mysql

您好，我有 2 个表：`user_badges`和`badges`表，以下是`user_badges`表数据：

```
id | user_id | badge_id | points_earned | badges_awarded |
 1    2324        0             5               0 
```

如果用户满足最低要求点数，即`badges`表中的 5，SQL 将更新上述内容为：

```
id | user_id | badge_id | points_earned | badges_awarded |
 1    2324        1             5               1 
```

如果将来为同一用户注册了新积分，则`user_table`徽章将添加一个新行，如下所示：

```
 id | user_id | badge_id | points_earned | badges_awarded |
  1    2324        1             5               1
  2    2324        0             7               0 
```

* * *

## 上述问题已解决

* * *

这是`badges`表：

```
badge_id | badge_name | required_points
   1           new          5
   2           adv          10 
```

* * *

## 下面是我需要的

* * *

问题是我需要一个查询来将`user_badges`表与`badges`表进行比较，前提是查询必须知道之前是否已授予徽章。

我将其用于 Zend 应用程序，需要解决此问题的方法...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T07:36:33.793

如果我正确理解您的问题，首先您需要获取之前尚未授予徽章的用户，然后使用`correlated subquery`您需要更新表格，并从表格中`user_badges`获得相应的最高有效值。`badges_id``badges`

```
UPDATE user_badges a
       INNER JOIN(SELECT DISTINCT user_id, SUM(badges_awarded) AS total_badges_awarded
                  FROM user_badges
                  GROUP BY user_id
                 ) b
             ON a.user_id = b.user_id
                AND b.total_badges_awarded = 0
SET a.badge_id = (@var_badges_awarded_flag:= (IFNULL((
                             SELECT c.badge_id
                             FROM badges c
                             WHERE a.points_earned > c.required_points
                             ORDER BY c.required_points DESC
                             LIMIT 1
                            ), 0))),
    a.badges_awarded = a.badges_awarded + IF(@var_badges_awarded_flag > 0, 1, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:04:48.757

我不会跟踪在`user_badges`表中获得的积分，而是将它们保存在其他地方，要么在`users`表内，要么在单独的表中`user_points`。这使得只需一个简单的`UPDATE ... SET earned_points = earned_points + :points`.

接下来，我会将`user_badges`表格简化为：

```
user_id | badge_id 
```

使用跨越`UNIQUE`索引来确保用户不能拥有多个徽章。

最后，更新`user_badges`表可以通过两个步骤作为后台任务（cron 等）执行：

1.  确定使用 获得了哪些徽章`points_earned >= required_points`。
2.  将新徽章插入`user_badges`using `INSERT IGNORE INTO user_badges ...`; 这样可以确保只添加新的徽章并且不会覆盖现有的徽章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T05:31:32.873

下面是一些 SQL 逻辑，可以让您获得所有用户以及每个人可以获得的下一个徽章：

```
SELECT *
FROM user_badges
JOIN badges
ON badges.badge_id = (user_badges.badge_id + 1) 
```

然后您可以遍历每个用户并确定他们的徽章是否需要使用 PHP 更新：

```
while ($row = mysqli_fetch_assoc($result)) // where result is the result from running the above query
{
    if ($row["points_earned"] >= $row["required_points"]) // enough points for next badge, update badges
    {
        mysqli_query("UPDATE user_badges SET badge_id = badge_id + 1, badges_awarded = badges_awarded + 1 WHERE user_id = ".$row['user_id']);
    }
} 
```

这只是一些帮助您入门的示例 SQL/PHP 代码。您可以查询所需的任何行，在 PHP 中检查它们，并在需要时随时更新它们。

# emacs - Emacs 外壳。如何在按 RET 时读取命令行的内容

> ID：11946113
> 
> 赞同：5
> 
> 时间：2012-08-14T05:12:59.370
> 
> 标签：emacs, command-line, elisp, eshell

我的意图是在按*RET时为每个提示使用*`bm.el` *[Visible Bookmarks](http://www.emacswiki.org/VisibleBookmarks)*。我已经设法在某种程度上实现了这一点。如果缺少一些重要问题，请在下面评论我的代码：例如。除了将参数传递给默认函数之外，我不知道是否需要处理这些参数。

 *当我在空命令行上按*RET*时，我不想为该行添加书签。在将控制传递给默认函数之前，如何拦截命令行内容`eshell-send-input`？

```
(defun eshell-send-input-zAp (&optional use-region queue-p no-newline)
  "eshell-send-input, customized to add bm-bookmark to prompt line"
 (interactive)
  (bm-bookmark-add)
  (eshell-send-input use-region queue-p no-newline))

(add-hook 'eshell-mode-hook
          #'(lambda ()
              (define-key eshell-mode-map
                [return]
                'eshell-send-input-zAp))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T12:34:36.043

你的代码看起来不错。如果您阅读 的代码`eshell-send-input`，您将了解如何获取当前输入。

还阅读[交互式](http://www.gnu.org/software/emacs/manual/html_node/elisp/Using-Interactive.html)参数。 `"P"`需要将用户区域传递给`eshell-send-input`.

```
(defun eshell-send-input-zAp (&optional use-region queue-p no-newline)
  "eshell-send-input, customized to add bm-bookmark to prompt line"
  (interactive "*P")
  (unless (string-equal (eshell-get-old-input use-region) "")
    (bm-bookmark-add))
  (eshell-send-input use-region queue-p no-newline)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:15:08.437

`esh-mode`定义一个变量`eshell-last-output-end`，每次打印输出时都会更新该变量。因此，您可以通过执行`(buffer-substring eshell-last-output-end (point-max))`我相信的操作来获取要发送到 shell 的字符串。

编辑：从文档中引用`eshel-send-input`：

> “将接收到的输入发送到 Eshell 进行解析和处理。**在 eshell-last-output-end 之后，将来自该标记的所有文本发送到该点作为输入。** 在该标记之前，调用 `eshell-get-old-input' 以检索旧输入，将其复制到缓冲区的末尾，然后发送。
> 
> 如果 USE-REGION 不为零，则当前区域（点和标记之间）将用作输入。
> 
> 如果 QUEUE-P 不为零，输入将排队等待下一个提示，而不是发送到当前活动的进程。如果没有处理，则立即处理输入。
> 
> 如果 NO-NEWLINE 不为零，则发送的输入没有隐含的最终换行符。”

口音是我的。如果您查看 的来源`eshel-send-input`，您可能会了解它的使用方式。

要反映 event_jr 的答案 - 如果您自己的函数没有这样的选项，您不一定需要将通用参数传递给该函数......显然，到目前为止，您对此没有用处，这是不必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:29:56.323

（回答我自己的问题）......我意识到`eshell`它的核心只是一个 emacs 缓冲区，所以，考虑到这一点，我想出了这个方法，它确实有效，但也许可以做得更好。也许有一些我还不知道的东西，所以我仍然愿意接受建议。

```
(defun eshell-send-input-zAp (&optional use-region queue-p no-newline)
  "A customized `eshell-send-input`, to add bm-bookmark to prompt line" 
  (interactive)
  (let ((line (buffer-substring-no-properties (point-at-bol) (point-at-eol))))
    (if (string-match eshell-prompt-regexp line)
        (if (> (length (substring line (match-end 0))) 0)
            (bm-bookmark-add))))
  (eshell-send-input use-region queue-p no-newline)) 
```*

# c# - WCF 不活动超时

> ID：11946117
> 
> 赞同：3
> 
> 时间：2012-08-14T05:13:34.143
> 
> 标签：c#, .net, wcf, app-config

我创建了一个非常简单的 WCF 服务，托管在 Windows 服务上，紧跟 MSDN 上的示例：http: [//msdn.microsoft.com/en-us/library/ff649818.aspx](http://msdn.microsoft.com/en-us/library/ff649818.aspx)

如果我在第一次呼叫后超过 10 分钟对我的服务进行第二次呼叫，我将收到不活动超时错误。我了解这是 WCF 客户端的默认设置。

但是，当我改变我的 app.config 从

```
 <reliableSession ordered="true" inactivityTimeout="00:10:00"
                   enabled="false" /> 
```

到

```
 <reliableSession ordered="true" inactivityTimeout="infinite"
                    enabled="true" /> 
```

当我尝试拨打电话时出现此错误：

> *由于 EndpointDispatcher 的 ContractFilter 不匹配，接收方无法处理带有 Action 'http://schemas.xmlsoap.org/ws/2005/02/rm/CreateSequence' 的消息。这可能是因为合约不匹配（发送方和接收方之间的操作不匹配）或发送方和接收方之间的绑定/安全不匹配。检查发送方和接收方是否具有相同的合同和相同的绑定（包括安全要求，例如消息、传输、无）。*

这就是我的 WCF 配置文件在 Windows 服务上的样子。

```
 <system.serviceModel>
<services>
  <service name="Asis.IBSS.Milestone.WCFService.ServiceImplementation.VideoService">
    <endpoint address="" binding="netTcpBinding" bindingConfiguration="" contract="Asis.IBSS.Milestone.WCFService.ServiceContract.IVideoService">
      <identity>
        <dns value="localhost"/>
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration="" contract="IMetadataExchange"/>
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:8555/MilestoneService"/>
      </baseAddresses>
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="false"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

我的问题是，如何将 inactivityTimeout 设置为 inifinte，并规避我遇到的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T07:00:41.513

我认为您还需要将绑定上的 receiveTimeout 设置为无限。这两个属性，receiveTimeout 和 inactivityTimeout 相互之间有一些依赖关系，如果你将 inactivityTimeout 设置为比 receiveTimeout 更高的值，你可能会得到一些错误。

例如：

```
 <bindings>
        <wsFederationHttpBinding>
    <binding name="someServiceFederatedBinding" maxReceivedMessageSize="2147483647" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="infinite" sendTimeout="01:00:00">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="2147483647" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
    </binding>
        </wsFederationHttpBinding>
    </bindings> 
```

并将 bindingConfiguration="someServiceFederatedBinding" 放入您的服务中。

# android - 自定义键盘上的箭头键

> ID：11946118
> 
> 赞同：0
> 
> 时间：2012-08-14T05:13:42.627
> 
> 标签：android

我一直在尝试从 SDK 向 SoftKeyboard 示例添加箭头键，但没有成功：将此添加到键盘 xml (qwerty.xml)：

我可以看到键盘上的额外键，但是当我单击它们时，我会得到方块。谁能告诉我为什么？

我用谷歌搜索但找不到任何答案，这似乎是正确的 - 但不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:46:43.227

好，我知道了。我需要处理按键并执行以下操作：

```
 CharSequence txt = getCurrentInputConnection().getTextBeforeCursor(1000, 0);
    int len = txt.length();

    if ( len > 1 )
    {
        switch (arrow)
        {
        case KEY_LEFT:
            len--;
            break;
        case KEY_RIGHT:
            len++;
            break;
        case KEY_UP: case KEY_DOWN: //TBD
            break;
        }

        getCurrentInputConnection().setSelection(len, len);     
    } 
```

亚科邦

# javascript - 在 Google 应用引擎上使用 javascript 实现多个倒计时

> ID：11946120
> 
> 赞同：0
> 
> 时间：2012-08-14T05:14:21.303
> 
> 标签：javascript, python, django, google-app-engine

我正在尝试在具有多个倒数计时器的 Google 应用程序引擎上实现应用程序。

我想知道如何刷新所有计数器

```
{% for counter in counters %}
    <table class="countdown">
         <tr class="countdown_amount" align="center">
            <td width="25%" valign="bottom" id="day"></td>
            <td width="25%" valign="bottom" id="hour"></td>
            <td width="25%" valign="bottom" id="minute"></td>
            <td width="25%" valign="bottom" id="second"></td>
         </tr>
    </table> 
```

并且有javascript函数来更新`<td>`

由于有很多事件，截止日期存储在 counter.date 中，我如何将其传递给 javascript？

////////// 我能想到的另一种方法是在 html 中使用 javascript

```
{% for event in events %}

     var a = parseFloat("{{ event.second }}") * 1000
     var endtime = new Date(a)
     setInterval( function(endtime){
                    var nowtime = new Date()
                    var leftsecond=parseInt((endtime.getTime()-nowtime.getTime())/1000)
                    d=parseInt(leftsecond/3600/24)
                    h=parseInt((leftsecond/3600)%24)
                    m=parseInt((leftsecond/60)%60)
                    s=parseInt(leftsecond%60)
                    document.write('<td width=\"25%\" valign=\"bottom\">' + d + '</td>')
                    document.write('<td width=\"25%\" valign=\"bottom\">' + h + '</td>')
                    document.write('<td width=\"25%\" valign=\"bottom\">' + m + '</td>')
                    document.write('<td width=\"25%\" valign=\"bottom\">' + s + '</td>')}, 1000) 
```

但当然它不起作用，还有其他方法可以在 django 中使用谷歌应用引擎实现多个倒数计时器吗？

谢谢！！

# ruby - 使用 Mailman 使用 POP3 接收旧电子邮件

> ID：11946126
> 
> 赞同：2
> 
> 时间：2012-08-14T05:15:42.160
> 
> 标签：ruby, imap, pop3, mailman

我对邮递员很陌生，只是想创建一个处理程序，以便在收到**新**邮件时收到通知，如下所示：

```
require "rubygems"
require "mailman"

Mailman.config.pop3 = {
  server: 'pop.gmail.com', port: 995, ssl: true,
  username: "email@gmail.com",
  password: "password"
}

Mailman::Application.run do
  default do
    puts message.subject
  end
end 
```

无论如何，出于某种原因，我不断收到一长串旧邮件主题而不是新邮件，我完全确定我在这里做错了什么，但我怎样才能让它只接收新的邮件？

# java - Android 的演示模型：如何将模型包装在演示模型中？

> ID：11946127
> 
> 赞同：0
> 
> 时间：2012-08-14T05:15:43.650
> 
> 标签：java, android, observer-pattern, presentation-model

我正在尝试使用 PM 设计（MVC + 演示模型）制作我的应用程序，但我已经坚持如何巧妙地将模型类包装在演示模型类中。现在，我编写了一个简单的代码，其中根据 Model 类实例中的值更改图片和文本。

```
// Disclaimer: 
// View and Controller are merged in this sample for clarity's sake. 
```

枚举

```
Enum AnimalSpecies {
    Dog, Cat, Rabbit, Bird,   
} 
```

MVC + RM

```
class Model extends Observable {

    // in my actual code Model has 10+ member variables and most of them are Enum

    protected AnimalSpecies species;
    protected String name;
    protected Object update;

    public void setSpecies (AnimalSpecies species) {
        this.species = species;
        notifyUpdate(species); 
    }

    public void setName (String s) {
        this.name = s;
        notifyUpdate(name);
    } 

    public void notifyUpdate(Object o) {
        this.update = o;
        this.setChanged();
        this.notifyObservers(update);
    }
} 
```

MVC 的 RM + RM

```
class PresentationModel extends Observable implements Observer {

@Override
    public void update(Observable model, Object data) {
        // Called when notified by Model

        // No idea what to write... but what I want to do is,  
        // a) determine what text for View to display
        // b) determine what pics for View to display, 
        // based on values of Model.    

        this.setChanged();
        this.notifyObservers(update);
    }    
} 
```

MVC 的 VC + RM

```
class View extends Activity implements Observer {

    // This is View + Controller, so it'd implement some interfaces like onClickListener, 
    // and in events such as onClick(), values of Model class are changed, 
    // but for clarity's sake, I keep everything in onCreate() event. 

    TextView header;
    TextView footer
    ImageView imgview;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        header = (TextView) findViewById(R.id.header);
        footer = (TextView) findViewById(R.id.footer);
        imgview = (ImageView) findViewById(R.id.imgview);

        Model model = new Model();
        PresentationModel pm = new PresentationModel();
        model.addObserver(pm);
        pm.addObserver(this);

        model.setSpecies(AnimalSpecies.Cat);
        model.setName("Max");
    }

    @Override
    public void update(Observable pm, Object data) {

        // Called when notified by PresentationModel
        // *** varies based on parameters from PresentationModel

        header.setText(***);
        footer.setText(***);
        imgview.setImageResource(R.drawable.***);

    }

} 
```

我的问题：如何在`public void update()`课堂上编写逻辑`PresentationModel`？我只能从中得到一个`Object`变量`NotifyObserver()`，即使是嵌套的`switch`or `if`... `else`，我也根本想不出代码...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-27T09:00:40.917

正如 Peter 所指出的，如果没有框架，在 android 应用程序中应用 Presentation Model 模式将会有很多工作。JGoodies Binding 是 Java Swing 的框架。我知道我迟到了。但是对于其他人或您未来的项目，您可能会感兴趣。我们的开源项目[Robobinding](http://robobinding.org)是一个用于 Android 平台的数据绑定表示模型框架。当我们应用 MVC/ [MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel) / [Presentation Model](http://martinfowler.com/eaaDev/PresentationModel.html)对于 android app，我们真正想要的是有一个清晰的结构化项目，更重要的是更容易进行单元测试。目前，在没有第三方框架的情况下，您通常会有很多代码（如 addXXListener()、findViewById()...），这些代码不会增加任何业务价值。更重要的是，您必须运行 android 单元测试而不是普通的 JUnit 测试，这需要很长时间才能运行并且使单元测试有些不切实际。由于这些原因，几年前我们开始了[RoboBinding](http://robobinding.org)。RoboBinding 可帮助您编写更易于阅读、测试和维护的 UI 代码。RoboBinding 消除了对 addXXListener 等不必要的**代码**的需求，并将 UI 逻辑转移到 Presentation Model，这是一个 pojo，可以通过**正常的 JUnit 测试进行测试**. RoboBinding 本身带有 300 多个 JUnit 测试以确保其质量。其他替代方案：Android-Binding、Bindroid 和 MvvmCross。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:06:08.143

嗯，你可能想告诉你的听众发生了什么变化。例如，如果模型中的 name 字段发生了变化，则调用`notifyObservers(update, PROPERTY_NAME)`. 然后表示模型只需要处理名称更改的逻辑。

也就是说，我不建议在没有框架的情况下使用 Presentation Model。触发事件和正确移动数据需要太多的复杂性和代码。实际上，即使有一个框架，也有一个显着的学习曲线——但我确实认为它对于大型项目来说是一个不错的架构。

[JGoodies Binding](http://www.jgoodies.com/freeware/libraries/binding/)是表示模型框架的一个很好的例子。但是，它针对的是 Swing 应用程序。它可以通过一些努力适应 Android，但我会看看是否存在一个好的 Android 特定框架。

# c# - 使用 C# 在 ASP.Net 中聚类柱形图

> ID：11946128
> 
> 赞同：0
> 
> 时间：2012-08-14T05:15:47.527
> 
> 标签：c#, asp.net, .net, charts

我想要一个带有 C# 的 asp.net 中的簇柱形图...我有一个像这样的表

请参见下面的参考图 6。我希望在 Asp.net 中使用 C# 来制作该图表。

[http://www.codeproject.com/Articles/27251/Create-Column-Charts-Using-OWC11#_rating](http://www.codeproject.com/Articles/27251/Create-Column-Charts-Using-OWC11#_rating)

在此链接中存在一个问题，因为他们使用的是 Microsoft Excel DLL，所以我想要该图表而不使用该 DLL....尽快回复我，我想要 C# 中的代码，而不使用 Microsoft Excel，这是最简单的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:48:56.743

您可以使用 highcharts 控件。有很多不同种类的图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-27T17:07:05.207

查看 Ms Chart Controls - [Microsoft Chart Controls 的示例环境](https://code.msdn.microsoft.com/Samples-Environments-for-b01e9c61/view/SamplePack#content) 代码项目文章似乎完全使用了相同的 MS 图表。

该示例包括您需要的各种图表。

# dojo - Dojo EnhancedGrid CoulmnSelector 复选框样式

> ID：11946130
> 
> 赞同：0
> 
> 时间：2012-08-14T05:15:58.667
> 
> 标签：dojo, dojox.grid.datagrid

我用于创建 dojo 增强型数据网格的 Javascript 代码是：

```
grid = new dojox.grid.EnhancedGrid({
                            store: store,
                            rowSelector: 'auto',
                            **plugins: {indirectSelection: {headerSelector:true, width:'auto', styles:"text-align: center;"}},**
                            structure: [
                                          {field: 'msname', width: 'auto', name: 'Milestone'},
                                          {field: 'description', width: 'auto', name: 'Description'},
                                          {field: 'msorder', width: 'auto', name: 'Milestone Order'},
                                          {field: 'eventtype', width: 'auto', name: 'Event Type'},
                                          {field: 'isngrp', width: 'auto', name: 'Is NGRP?'},
                                          {field: 'eventAttribute', width: 'auto', name: 'Event Attribute(s)'}
                                      ]
                        },"grid");
                        grid.startup(); 
```

但是复选框的样式不正确。复选框内有一个小方块。任何想法如何解决它。截图是：

![增强的网格复选框样式](../Images/b2ed5b39bdf1bda55eafe72051c05201.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:13:24.990

我错过了将 enhancedgrid.css 包含在我的页面正文中。现在渲染得很好。

# .net - 在 Windows 应用程序中的标签内格式化文本

> ID：11946131
> 
> 赞同：5
> 
> 时间：2012-08-14T05:16:04.593
> 
> 标签：.net, wpf, winforms

我想将文本添加到我的标签中：area(m^2) 但 2 应该是 m 的幂。

.NET 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:30:07.993

![在此处输入图像描述](../Images/6ca3e3f6be04ecfc40b09f58d6fb73f9.png)

```
<Label Content="2 power of 3 => 3 &#x00B2; " /> 
```

而不是`U+00B2`我写的`&#x00B2;`

但是如果你想用 C# 代码编写它，你必须使用第一种格式

```
label.Content = "\u00B2"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T05:17:46.417

使用上标 2 字符`²`（unicode U+00B2）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T07:36:49.643

如果需要为任意文本添加上标，可以设置 TextBlock 的[Inlines](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.inlines)属性：

```
<TextBlock>
    <TextBlock.Inlines>
        <Run Text="area (m"/>
        <Run Text="2" BaselineAlignment="Superscript"/>
        <Run Text=")"/>
    </TextBlock.Inlines>
</TextBlock> 
```

您还可以减少`FontSize`上标文本的 。

如果你真的需要控件是一个标签，你可以使用上面的 TextBlock 作为标签的`Content`属性：

```
<Label>
    <TextBlock>
        <TextBlock.Inlines>
            <Run Text="area (m"/>
            <Run Text="2" BaselineAlignment="Superscript"/>
            <Run Text=")"/>
        </TextBlock.Inlines>
    </TextBlock>
</Label> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T05:42:19.937

这是您的问题的 WPF 解决方案：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <FlowDocumentReader>
        <FlowDocument>
            <Paragraph>
                <Span>number</Span>
                <Span BaselineAlignment="Superscript">2</Span>
                <Span>number</Span>
                <Span BaselineAlignment="Subscript">indexed2</Span>
            </Paragraph>
        </FlowDocument>
    </FlowDocumentReader>
</Grid> 
```

这为您提供了下图中的结果：

![在此处输入图像描述](../Images/fc6e3550e614bcdd6d240167ac79481f.png)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-14T05:22:14.363

您最好的选择是添加第二个标签以保持“2”并且位置高于标签 1，以使其感觉像一个正方形。

# python - 尝试捕获字符串时如何修复错误“int() 的无效文字，以 10 为基数：'goelv'”

> ID：11946132
> 
> 赞同：0
> 
> 时间：2012-08-14T05:16:10.507
> 
> 标签：python, django, django-models, django-views, django-urls

我有以下 urls.py

```
urlpatterns = patterns('accounts.views',
  url(r'^user/(?P<id>\w+)/$', 'profile'),
) 
```

我有以下views.py

```
def profile(request, id):
  user = UserProfile.objects.get(user__username=id)
  product = Mattress.objects.filter(owner = id)   #PROBLEM IS IN THIS LINE
  c = RequestContext(request, {
    'action': 'update/',
    'button': 'Update', 
    'profile': user,
    'product': product,
  })
  return render_to_response('registration/user_profile.html', c) 
```

当我输入网址“http://127.0.0.1:8000/user/goelv/”时，ID“goelv”被成功捕获。但是，我收到错误 <invalid literal for int() with base 10: 'goelv' > 这可以追溯到我在行 product=Mattress.objects.filter(owner = id) 中的 views.py。

作为参考，我有以下 models.py ，其中所有者字段仅与用户对象相关

```
class Product(models.Model):
  owner = models.ForeignKey(User, null=True, blank=True)
  title = models.CharField(max_length=50)
  manufacturer = models.CharField(max_length=75)
  product_description = models.TextField(max_length=2000) 
```

谁能看到我做错了什么或如何解决这个问题？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:21:54.387

如果您指的是`id`，那么它不应该是`integer`字符串。

但是，这将解决您的问题。

```
product = Mattress.objects.filter(owner = user) 
```

注意：使用`user`而不是`id`在过滤器中，因为您已经检索到用户对象。

# apache - 保持活力图像错误

> ID：11946135
> 
> 赞同：0
> 
> 时间：2012-08-14T05:16:31.333
> 
> 标签：apache, keep-alive, image-loading

最近我一直在尝试保持活动设置，并且我发现了一些关于图像加载的令人吃惊的错误。

在 firefox <4 中，某些图像甚至不会在 5 秒的超时后加载。

在 5 秒的 chrome 中，页面正常加载，但在默认的 15 秒时，一些图像会加载到其他图像应该加载的位置。

有没有人经历过这个错误？我想保持它关闭可能是最“安全”的解决方案。但我仍然觉得好像有什么东西从我头顶飞过。

# c++ - C++ Linux 服务器获取 Facebook HTTP 身份验证消息

> ID：11946136
> 
> 赞同：1
> 
> 时间：2012-08-14T05:16:36.527
> 
> 标签：c++, facebook, http, webserver

我有一个 C++ Linux 服务器在端口 3600 上侦听来自闪存客户端的连接。该服务器管理游戏逻辑以及客户端之间的聊天功能。我正在将我的 Flash 客户端放到网络上并使用 Facebook 登录来跟踪用户玩过的游戏数等。

我有一个 Apache 服务器，它发送带有嵌入式 SWF 的 index.html。

我面临的问题是我的 C++ 服务器中需要 Facebook 令牌。从我在 Facebook 身份验证文档中了解到的是，在我重定向用户并登录后，用户将被重定向到我指定的 URI，并将获得我的服务器获取令牌和制作 facebook API 所需的数据来电。

所以我的问题是：如何让 C++ 服务器监听 facebook 在某个 URL 上发送的 HTTP？我知道 HTTP 是在端口 80 上发送的，但我不确定如何只监听特定的 URL。此外，我认为我不能让 Apache 在端口 80 上侦听，而第二个应用程序也尝试在端口 80 上进行侦听。

我是否需要废弃 Apache 并让我的 C++ 服务器发送我的 index.html 文件以及监听端口 80 上的请求？我查看了 libcurl，但没有看到任何关于侦听某些 URL 的信息。

我已经在内容中挖掘了几个小时，但找不到我需要的信息。希望有人可以让我走上正确的道路！

谢谢你的帮助。

# php - 下拉菜单没有说不

> ID：11946140
> 
> 赞同：0
> 
> 时间：2012-08-14T05:17:01.917
> 
> 标签：php, codeigniter, drop-down-menu

如果选择“是”，我有以下控制器可以正常工作，但如果选择“否”，则会给我带来一些麻烦。

我怎样才能让它在数据库中插入“否”？**

** 我添加了 elseif 试图让它拒绝！

**控制器：**

```
public function add()
{

    $this->form_validation->set_rules('add_fields_name', 'Name', 'trim|required|xss_clean');
    $this->form_validation->set_rules('add_fields_value', 'Value', 'trim|xss_clean');
    $this->form_validation->set_rules('add_fields_class', 'Class', 'trim|xss_clean');
    $this->form_validation->set_rules('add_fields_placeholder', 'Placeholder', 'trim|required|xss_clean|callback_dropdown_check');
    $this->form_validation->set_rules('add_fields_type', 'Type', 'trim|required|xss_clean|callback_dropdown_check');

    if($this->form_validation->run() == FALSE)
    {
        $data['validation_errors'] = validation_errors('<div class="alert alert-error">', '</div>');
        $data['contentMangement'] = $this->options_model->systemOptions();
        $data['pageTitle'] = 'Add Fields';
        $this->load->view('_assets/dashHeader', $data);
        $this->load->view('dashboard/add_fields', $data);
        $this->load->view('_assets/footer');    

    }else{

        $fieldName = $this->input->post('add_fields_name', TRUE);
        $fieldClass = $this->input->post('add_fields_class', TRUE);
        $fieldValue = $this->input->post('add_fields_defaultValue', TRUE);

        //Dropdown Placeholder
        $dropdown = $this->input->post('add_fields_placeholder', TRUE);

        if($dropdown =='yes')
        {
          $dropdown_value = $this->input->post('add_fields_placeholderValue', TRUE);
        }
        else($dropdown == 'no')
        {

        }

        //Removes Caps & spaces
        $fieldNameStripped = strtolower(str_replace(" ", "", $fieldName));
        $fieldValueStripped = strtolower(str_replace(" ", "", $fieldValue));
        $fieldClassStripped = strtolower(str_replace(" ", "", $fieldClass));
        //Default Form Details

        $fieldLabel = '<label for="'. $fieldNameStripped . '">'. $fieldName. '</label>'."\n";

        $formData = array(
                            'name' => ''.$fieldNameStripped.'',
                            'id' => ''.$fieldNameStripped.'',
                            'value' => ''.$fieldValueStripped.'',
                            'class' =>''.$fieldClassStripped.'',
                            'placeholder' => ''.$dropdown_value.''
                        );

        if (isset($_REQUEST['add_fields_type']))
        {
            if($_REQUEST['add_fields_type'] == 'input')
            {
                $fieldField = form_input($formData, TRUE);
            }

            if($_REQUEST['add_fields_type'] == 'textarea')
            {
                $fieldField = form_textarea($formData, TRUE);
            }

            if($_REQUEST['add_fields_type'] == 'radiobutton')
            {
                $fieldField = form_radio($formData, TRUE);
            }

            if($_REQUEST['add_fields_type'] == 'checkbox')
            {
                $fieldField = form_checkbox($formData, TRUE);
            }

            $fieldTypeInsert = array(
                                    'name'  =>  ''.$fieldName.'',
                                    'class' =>  ''.$fieldClass.'',
                                    'value' => ''.$fieldValue.'',
                                    'placeholder' => ''.$dropdown.'',
                                    'placeholder_value' => ''.$dropdown_value.'', 
                                    'type'  =>  ''.$_REQUEST['add_fields_type'].'',
                                    'label' =>  ''.$fieldLabel.'',
                                    'field' =>  ''.$fieldField.''   
                                    );

            $this->field_model->insertField($fieldTypeInsert);

            $data['validation_errors'] = '<div class="alert alert-success"><strong>Thank You</strong> Your Field Has Been Added</div>';
            $data['contentMangement'] = $this->options_model->systemOptions();
            $data['pageTitle'] = 'Add Fields';
            $data['fieldType'] = $this->input->get('add_fields_type');
            $data['placeholderType'] = $this->input->get('add_fields_placeholder');
            $this->load->view('_assets/dashHeader', $data);
            $this->load->view('dashboard/add_fields', $data);
            $this->load->view('_assets/footer');    

        }
    }
} 
```

**看法：**

```
<label for="add_fields_placeholder">Placeholder: </label>
    <select name="add_fields_placeholder" id="add_fields_placeholder">
        <option value="">Please Select</option>
        <option value="yes" <?php echo set_select('add_fields_placeholder','yes', ( !empty($placeholderType) && $placeholderType == "yes" ? TRUE : FALSE ));?>>Yes</option>
        <option value="no" <?php echo set_select('add_fields_placeholder','no', ( !empty($placeholderType) && $placeholderType == "no" ? TRUE : FALSE ));?>>No</option>
    </select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T05:20:40.053

好的，首先摆脱

```
$dropdown = ''; 
```

因为这会重置您的价值，所以它不会持有是或否

其次，两者

```
if($dropdown = 'yes')
else($dropdown = 'no') 
```

需要使用**==**而不是**=**。**=**用于为**变量**赋值，**==**用于**比较**值。

改完之后还能用吗？

编辑：您不能使用其他，然后添加另一个条件。你要么只需要使用

```
else { 
```

或使用其他

```
if($dropdown == 'no') { 
```

编辑：为了清晰和信息，你在你的 if 中用单个 = 做的不是询问它是否等于是或否，你**让它**相等，并询问你是否能够

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:20:54.233

您将 $dropdown 设置为空字符串，然后将其比较“是”和“否”。实际上你没有比较，但检查你是否分配了`$dropdown = 'yes'`. 请检查比较运算符： http: [//php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

```
$dropdown = '';
if($dropdown = 'yes') 
```

# c# - 如何为没有标题栏的表单制作自定义边框？

> ID：11946143
> 
> 赞同：3
> 
> 时间：2012-08-14T05:17:14.273
> 
> 标签：c#, forms, border

我有一个没有标题栏的表单，但我希望我的表单仍然有边框，如下所示：

![在此处输入图像描述](../Images/db366dd7e7cd393bfd25a800f1e646c2.png)

目前，我使用了一个文本框，然后将其发送回，我的表单有 1px 边框。我构建了一个很小的应用程序，所以我不想编写长代码来绘制边框。有什么简单的方法可以做到这一点：**我希望我的表单有简单的黑色 3px 边框，但没有标题栏？？？**

语言：C#

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T05:51:39.877

如果您通过将 ControlBox 设置为 false 并将 FormBorderStyle 设置为 None 来删除标题栏

然后您可以订阅 Form.Paint 事件并使用类似的处理程序：

```
private void Form1_Paint(object sender, PaintEventArgs e)
{
   e.Graphics.DrawRectangle(new Pen(Color.Black, 3),
                            this.DisplayRectangle);                                     
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T05:22:27.007

您可以覆盖`Form.Paint`事件或覆盖`OnPaint`方法。网络上有很多示例，例如[http://www.codeproject.com/Articles/17874/Custom-shape-form-with-a-drop-down-in-C](http://www.codeproject.com/Articles/17874/Custom-shaped-form-with-a-drop-down-in-C)。

# python - 将django1.2项目迁移到django1.4

> ID：11946144
> 
> 赞同：1
> 
> 时间：2012-08-14T05:17:18.120
> 
> 标签：python, django, migration

我们使用 django 版本 1.2 和 python 2.4 开发项目。现在我们要将项目迁移到最新版本（Django1.4 和 python2.7）。

我对移民很陌生，有人可以就此提出建议吗？

我需要注意哪些事项？我们需要重新重写所有代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:37:48.070

这就是我们正在做的事情（我们正在将 ~60Kloc 从 Django 0.97 升级到 1.4）：

*   创建代码的升级分支
*   创建一个用于升级的 virtualenv
*   下载 Django 的“下一个”版本（如果您更喜欢小步骤），或者您想要最终使用的 Django 版本，并将其放入您自己的版本控制系统 (VCS)。
*   将 Django 从您的 VCS 签出到您的 virtualenv 的根目录。
*   重复直到完成：
    *   运行您的测试套件（和覆盖范围）。
    *   解决任何问题
*   在你的根`__init__.py`文件中添加一个注释，指明你的代码使用哪个 Django 版本（这会为你节省很多时间：-）
*   将您的主干合并到您的升级分支（以获取在您进行升级时发生的所有更改）。
*   运行您的测试套件，修复任何问题，然后签入合并。
*   最后：将您的升级分支重新集成回主干。

现在您已经升级了代码（您仍然需要计划升级的部署，但这是另一个问题）。

ps：我们将 Django 存储在我们的 VCS 中，因此我们可以跟踪我们需要对 Django 本身进行的任何更改（如果您不想转到 1.4，则尤其需要，但仍可能需要从该版本进行一两个修复）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:55:09.390

只是先在本地做。你肯定会遇到问题，然后做出相应的改变。尽管我假设您不需要更改很多代码。对于 Django，请阅读[Django 1.3 发行说明](https://docs.djangoproject.com/en/dev/releases/1.3/)和[Django 1.4 发行说明](https://docs.djangoproject.com/en/dev/releases/1.4/)，并特别注意与以前的 Django 版本（不仅仅是 1.2，因为您可能在您的应用程序中使用了 Django 1.0/1.1 的功能）相比已弃用的内容。以我的经验，这些主要是设置的变化和项目结构的一些小变化。

对于 Python 2.4 -> Python 2.7 我不能说太多。这实际上取决于您使用了多少旧功能。当您测试整个应用程序时，您会发现。可能完全没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:11:08.173

如果您使用的是 virtualenv，只需使用您想要的 django/python 版本创建一个新的 virtualenv，处理这个 virtualenv 并针对它运行您的测试套件。

顺便说一句，在 Django 上下文中，您可能需要小心使用“迁移”这个词。当您对数据库中的表进行更改时，迁移通常是指使用 South 进行的模型迁移。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-14T06:21:37.747

Python 不支持向后兼容性，考虑到您在从 2.4 迁移到 2.7 时可能会遇到一些问题。

# c# - 当我将应用程序安装到 C:\ProgramFiles 时，我的应用程序总是无法工作（我在 NSIS && MSI 安装程序中都尝试过）

> ID：11946147
> 
> 赞同：-1
> 
> 时间：2012-08-14T05:18:05.653
> 
> 标签：c#

当我在 C:\ProgramFiles 中安装我的 C# winform 应用程序时遇到问题，每次尝试运行它时，我都会通过 3 个选项（关闭、调试、检查在线解决方案）收到通常的“应用程序已停止工作”错误。

现在我很确定我在 InstDir 中得到了所有的 Dll 和要求。我确定这个因为如果我将 InstDir 复制/粘贴到另一个位置，例如桌面，该应用程序可以工作！

为什么这会发生在我身上？！我错过了任何设置吗？我怎样才能解决这个问题 ？

添加：我从错误消息中收到了这个：

```
Problem signature:
  Problem Event Name:   CLR20r3
  Problem Signature 01: typingfreak.exe
  Problem Signature 02: 1.0.0.0
  Problem Signature 03: 5029e51b
  Problem Signature 04: mscorlib
  Problem Signature 05: 4.0.0.0
  Problem Signature 06: 4ba1da6f
  Problem Signature 07: 3dab
  Problem Signature 08: 13c
  Problem Signature 09: System.UnauthorizedAccess
  OS Version:   6.1.7600.2.0.0.256.1
  Locale ID:    12297
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789 
```

请，任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:26:23.840

首先，您需要检索应用程序崩溃时引发的异常。没有它，就不可能诊断出问题。使用[此](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)事件创建日志并将异常转储到某种日志。

# google-maps - 如何避免对标记点击事件监听器使用匿名回调函数？

> ID：11946150
> 
> 赞同：2
> 
> 时间：2012-08-14T05:18:27.183
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我知道有很多方法可以对谷歌地图标记进行点击事件处理，我一直在使用这些方法，它们总是很好用。

但只是好奇如果我们能以更好的方式做同样的事情，我正在考虑这个，因为在一个新项目中可能会有 100,000 个标记（当然它们不会同时显示在地图上，但标记的实例确实存在）

google.maps.event.addListener(marker, 'click', clickhandler); function clickhandler(event) { /* 这里 */ }

在 clickhandler 的范围内，我们只有 latLng 信息，我想通过 latLng 搜索标记是不可靠的，它们是浮点数，所以问题是，找到单击哪个标记的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:59:50.677

标记上的鼠标单击事件将[**google.maps.MouseEvent 对象**](https://developers.google.com/maps/documentation/javascript/reference#MouseEvent)传递给侦听器函数，因此：

```
// give the maker an id
marker.myId = 25;
google.maps.event.addListener(marker, 'click', clickhandler);

function clickhandler(mev) {
    alert(mev.latLng); 
    alert(this.myId);// shows 25
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T05:53:25.497

当我试图从一组元素中引用一个元素（例如，具有相同类的元素）时，使用`this`可以帮助找到触发事件的正确元素。只是为了确保`this`能正常工作，我与`console.log`.

`google.maps.event.addListener(marker, 'click', clickhandler); function clickhandler() { console.log(this); }`

这应该记录标记对象。

# ruby - 在 Ruby 中查找和删除

> ID：11946151
> 
> 赞同：-1
> 
> 时间：2012-08-14T05:18:28.203
> 
> 标签：ruby, hash

我有一个方法，它被赋予了这样的特定选项哈希

```
def send_params(options = {})
 #Create string of some values in the hash.
end 
```

我想创建一个字符串，其中一些值在哈希中。特别是我正在寻找键 :key1, :key2, :key3, :key4 来创建一个带有对应值的字符串。所以，如果我的哈希是这样的：

```
{:key1 => 'value1', :key2 => 'value2', :key3 => 'value3', :key4 => 'value4', , :key5 => 'value5'} 
```

我希望能够创建一个字符串，如：

```
'value1,value2|value3,value4' 
```

并将剩余的哈希值设为：

```
{:key5 => 'value5'} 
```

因此，应该从散列中删除找到的值。这样做的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:31:04.320

[`Hash#delete`](http://ruby-doc.org/core-1.9.3/Hash.html#method-i-delete)可能是您正在寻找的东西。它将从哈希中删除键/值对并返回值。

例子：

```
h = {
  :key1 => 'value1',
  :key2 => 'value2',
  :key3 => 'value3',
  :key4 => 'value4',
  :key5 => 'value5'
}
str = "#{h.delete :key1},#{h.delete :key2}|#{h.delete :key3},#{h.delete :key4}"
p str # => "value1,value2|value3,value4" 
p h   # => {:key5=>"value5"} 
```

# titanium - 如何在 Titanium 中解析这个 XML>

> ID：11946153
> 
> 赞同：0
> 
> 时间：2012-08-14T05:18:29.337
> 
> 标签：titanium, titanium-mobile

```
<?xml version="1.0" ?>
<SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body>
    <ns1:getCountriesResponse xmlns:ns1="SoapQrcode">
      <return SOAP-ENC:arrayType=":[8]" xsi:type="SOAP-ENC:Array">
        <item xsi:type="xsd:string">
          China
        </item>
        <item xsi:type="xsd:string">
          France
        </item>
     </return>
    </ns1:getCountriesResponse>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我正在使用这种 XML 格式，如何使用 Titanium 从中获取国家/地区的名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T15:23:45.857

至少*尝试*解析 XML[或至少](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.XML)在寻求帮助之前让您知道 DOCS 的位置是一种善意的姿态。但幸运的是，这对于 Titanium 来说非常简单，这里有一个例子：

```
// Load file containing XML from resources directory
var xmlFile = Ti.Filesystem.getFile('countries.xml');

// Get contents(as blob) from file
var contents = xmlFile.read();

// Turn contents into a XMLDomDocument for parsing (get string from blob first)
var xmlDomDoc = Ti.XML.parseString(contents.text);

// Get all the item tags and their contents
var allItemTags = xmlDomDoc.getElementsByTagName('item');

// Loop over them and grab the text contents and print
for (var i = 0; i < allItemTags.length; i++) {
    var countryName = allItemTags.item(i).textContent;
    Ti.API.info(countryName);
} 
```

粗略检查我提供的链接会向您展示如何执行此操作的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:31:17.723

上面的 Xml 响应是动态的，我自己解析了下面的 Xml 是解决方案

```
Ti.API.info('Original response ' + this.responseText);

// Document Object
var doc = this.responseXML.documentElement;

Ti.API.info('Document XML' + doc);

var elements = doc.getElementsByTagName("item");

Ti.API.info('Document item' + elements.text);

//this is the XML document object

// Parse XML
var xml = Ti.XML.parseString(this.responseText);
Ti.API.info('Parsed XML' + xml);

// get item from xml
var countryList = xml.documentElement.getElementsByTagName("item");

Titanium.API.info("country is " + countryList);
Titanium.API.info("lenght of countries" + countryList.length);
Titanium.API.info("country is " + countryList.item(0));

for (var i = 0; i < countryList.length; i++) {
    Titanium.API.info("loop country is " + countryList.item(i).text);
    countryArray[i] = countryList.item(i).text;
};

Titanium.API.info("Array country is " + countryArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-21T08:52:33.443

```
var win = Titanium.UI.createWindow({  
    title:"XHR",
    backgroundColor:"#FFFFFF",
    exitOnClose:true
});

var data = [];//We'll fill this table after the xml has loaded
var tableView = Titanium.UI.createTableView({
    data:data
});

function errorMessage(){
    alert("Well, that didn't work");
}

function renderXML(){
    var tours = this.responseXML.documentElement;
    var tour = tours.getElementsByTagName("tour");

    //traverse the tour node, pull out the titles
    for(var i=0; i<tour.length;i++){
        var item = tour.item(i);
        var title = item.getElementsByTagName("tourTitle").item(0).text;

        var row = Titanium.UI.createTableViewRow({
            title:title,
            className:"tableRow",
        });
        data.push(row);
    }

    tableView.setData(data);

}

var xhr = Titanium.Network.createHTTPClient({
    onload: renderXML,
    onerror: errorMessage
});

win.add(tableView);

xhr.open("GET","http://services.explorecalifornia.org/rest/tours.php");
xhr.send();

win.open(); 
```

# php - 如果我们没有特定控制器的视图，我们应该怎么做？

> ID：11946155
> 
> 赞同：0
> 
> 时间：2012-08-14T05:18:37.480
> 
> 标签：php, cakephp

我有一个控制器说`class_controller.php`。但我不想创建它的视图。那么控制器中应该写什么呢？

我喜欢如果您不希望任何模型相关我们`var $uses = null;`同样使用与它的视图无关的代码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:25:45.667

通过在控制器操作中添加以下行，可以很容易地禁用 CakePHP 中的布局和视图：

`$this->autoRender = false;`

如果您只想禁用布局，请在控制器操作中使用以下行：

`$this->layout = false;`

如果您只想禁用此操作的视图，请在控制器中使用以下行：

`$this->render(false);`

*注意*：这将是特定于操作的，而不是您要求的控制器。

您可以使用`beforeFilter()`将在控制器中的每个操作之前调用并为您禁用布局的函数来完成这个技巧。

```
public function beforeFilter() {
    parent::beforeFilter();
    $this->autoRender = false;
} 
```

# android - Android 动画《滚来滚去》

> ID：11946156
> 
> 赞同：1
> 
> 时间：2012-08-14T05:18:41.643
> 
> 标签：android, rotation, translate-animation

我正在制作一个硬币从左边滚进来的动画。

到目前为止，我可以通过 RotateAnimation 旋转它并通过 TranslateAnimation 移动它。

现在我一直试图让这两个同时运行。

```
{
    Animation animation = new TranslateAnimation(Animation.RELATIVE_TO_PARENT,-1f,Animation.RELATIVE_TO_PARENT,0,Animation.RELATIVE_TO_PARENT, 0, Animation.RELATIVE_TO_PARENT, 0);
    animation.setDuration(5000);
    setCoinAppear.addAnimation(animation);
}
{
    Animation animation = new RotateAnimation(0, 720, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
    animation.setDuration(5000);
    setCoinAppear.addAnimation(animation);
} 
```

如果我同时启动它们，硬币将显示围绕中心的会聚圆周运动。

关于如何完成它的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:20:07.870

您需要创建一个 AnimationSet 并将每个动画添加到集合中，如下所示：

```
AnimationSet rollingIn = new AnimationSet(true);

Animation moving = new TranslateAnimation(Animation.RELATIVE_TO_PARENT,-1f,Animation.RELATIVE_TO_PARENT,0,Animation.RELATIVE_TO_PARENT, 0, Animation.RELATIVE_TO_PARENT, 0);
moving.setDuration(5000);

rollingIn.addAnimation(moving);

Animation rotating = new RotateAnimation(0, 720, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
rotating.setDuration(5000);

rollingIn.addAnimation(rotating);

setCoinAppear.startAnimation(rollingIn); 
```

# eclipse - 标记栏在 Eclipse 中不可见

> ID：11946160
> 
> 赞同：0
> 
> 时间：2012-08-14T05:19:13.860
> 
> 标签：eclipse

我正在使用 Eclipse IDE 进行 JAVA 开发。但是文本编辑器中的标记栏不可见，因此我无法在我的代码中放置调试点（断点）。

请建议如何启用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:36:19.323

[我看到这个（制造商栏](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/reference/ref-66.htm)不可见）的唯一情况是：

*   未选择 Java 透视图（请参阅“ [Java 透视图在 eclipse 中不可见](https://stackoverflow.com/questions/1897223/java-perspective-is-not-visible-in-eclipse?rq=1)”）
*   Java 文件不是源的一部分
*   Java 文件是 .class/jar 反编译（“ [Java Decompiler](https://stackoverflow.com/questions/4375037/java-decompiler) ”）的结果。

检查您是否处于其中一种情况。

# wcf - WCF 工作人员完成通知

> ID：11946162
> 
> 赞同：0
> 
> 时间：2012-08-14T05:19:31.050
> 
> 标签：wcf, methods

我有我的网络应用程序，可以构建报告。mvc3 上的 Web 应用程序。构建器是 WCF 服务。
我使用线程池使我的报告自动生成。
**基本模型如下所示：**
-- Web 应用程序在报告生成时发送请求。
-- WCF 服务创建工作线程并向服务接受工作的 Web 应用程序发送响应。
-- Web 应用程序继续工作。

**我需要什么：**当 WCF 工作线程完成工作时，我需要通知**Web 应用程序**工作已完成。

那么如何用我的网络应用程序捕获该回调。（我使用 mvc 3）

你能建议最简单的方法来实现这个逻辑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:57:08.817

这可以帮助您： [带有来自后台线程的回调的 WCF 服务？](https://stackoverflow.com/questions/2603135/wcf-service-with-callbacks-coming-from-background-thread)

如果还不够，您必须向您的 web 应用程序实施推送通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:08:38.160

有趣的问题。如果我了解您的要求，您需要允许用户在后台生成报告时继续他们的业务，然后最终通过 AJAX 向用户发送报告准备就绪的通知。

我相信你正朝着正确的方向前进。我的建议是利用 WCF 异步回调。MSDN 上的一篇不错的入门文章可[在此处](http://msdn.microsoft.com/en-us/library/ms730059.aspx)获得。回调事件处理程序应使用报表请求最初发送到 WCF 操作时创建的唯一缓存键来设置报表的缓存状态。

客户端通知可以使用报告状态轮询机制来实现，该机制使用由 AJAX 启用的相同的唯一缓存键定期检查报告的状态。

异步 WCF 回调的一个简单示例可以执行以下操作：

```
ReportServiceClient reportSvcClient = new ReportServiceClient();
Guid reportStatusKey = Guid.NewGuid();
reportSvcClient.GenerateReportCompleted += new EventHandler<GenerateReportCompletedEventArgs>(ReportStatusCallback);
reportSvcClient.GenerateReportAsync(reportStatusKey, <other operation paramters>);

// Set initial report status to False
// (recommend setting an appropriate expiration period)
Cache.Insert(reportStatusKey.ToString(), false);

// WCF callback static method which sets the report status in cache 
static void ReportStatusCallback(object sender, GenerateReportCompletedEventArgs e)
{
    Cache[e.ReportStatusKey.ToString()] = e.IsComplete;
}
...
public partial class GenerateReportCompletedEventArgs : System.ComponentModel.AsyncCompletedEventArgs
{
    private object[] results;

    public GenerateReportCompletedEventArgs(object[] results, System.Exception exception, bool cancelled, object userState) : 
        base(exception, cancelled, userState)
    {       this.results = results;         }

    public Guid ReportStatusKey
    {
        get            {
            base.RaiseExceptionIfNecessary();
            return ((Guid)(this.results[0]));
        }
    }
    public bool IsComplete
    {
        get {
            base.RaiseExceptionIfNecessary();
            return ((bool)(this.results[1]));
        }
    }
} 
```

客户端 AJAX 实现可以使用相同的 ReportStatusKey 以您认为合适的任何频率检查报告的缓存状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:02:44.977

为什么不使用 svcutil /async 为您的 wcf 服务生成异步代理。这样，您的服务中就不需要自己的工作线程，客户端只需注册回调即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T09:11:27.850

WCF 包含一个叫做***Completion Callbacks***的东西。在这里，您的客户端有一个方法，它仅在异步操作完成后才要求 WCF 为您调用。

例如：

```
public class MyClient : IDisposable
{
    BuilderClient _proxy = new BuilderClient();

    public void CallAsync(object input)
    {
        _proxy.BeginBuildReport(input, Oncompletion, null);
    }

    void OnCompletion(IAsyncResult result)
    {
        object output = _proxy.EndBuildReport(result);
        //Do whatever you want with your output here.
    }

    public void Dispose()
    {
        _proxy.Close();
    }
} 
```

这将允许您使用简单的事件驱动模型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T02:07:48.387

有一些方法可以使用 Comet 或 Reverse-Ajax。之前已经回答了这个问题： [有什么方法可以将数据从 Web 服务器推送到浏览器？](https://stackoverflow.com/questions/19995/is-there-some-way-to-push-data-from-web-server-to-browser)

# sql - 从 Oracle 中的表中获取每个字段的最新数据

> ID：11946166
> 
> 赞同：1
> 
> 时间：2012-08-14T05:20:02.143
> 
> 标签：sql, oracle

假设我有一个名为 VISITS 的表，其中包含以下内容

*   VISIT_DATE（时间戳）
*   高度（数字）
*   腰围（数字）
*   重量（数量）
*   PATIENT_ID (NUMBER)

    访问日期| 高度 | 腰围 | 重量 | PATIENT_ID

    2012 年 10 月 1 日 | (空) | 96 | 130 | 44123

    2012 年 11 月 1 日 | 1.74 | (空) | 120 | 44123

    2012 年 12 月 1 日 | (空) | (空) | 150 | 44123

我需要的是一个 sql select 语句来获取每列的最新值，但忽略空字段，所以我需要的输出是

WHERE 子句将是

```
WHERE PATIENT_ID = 44123 ORDER BY VISIT_DATE DESC LIMIT 1 
```

* * *

```
12/01/2012 | 1.74 | 96 | 150 | 44123 
```

正如您从输出中看到的那样，我希望从选择中获得我正在为患者向后退一步，直到找到每个字段的值。

我希望这个问题是明确的和可能的，我已经搜索但到目前为止还没有找到任何真正的解决方案，这将用于简化医院使用的医疗系统，上面大约有​​ 100 个领域只是一个几个字段的示例，以了解所需的概念。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T08:20:44.123

```
create table VISITS 
(
  VISIT_DATE TIMESTAMP
, HEIGHT NUMBER
, WAIST NUMBER
, WEIGHT NUMBER
, PATIENT_ID NUMBER
);

insert into visits values(systimestamp, null, 96, 130, 44123);
insert into visits values(systimestamp, 1.74, NULL, 120, 44123);
insert into visits values(systimestamp, null, NULL, 150, 44123);

select 
  last_visit_date
, height
, waist
, weight
, patient_id
from
(
  select 
    first_value( VISIT_DATE) over( partition by patient_id order by visit_date desc) last_visit_date
  , first_value( HEIGHT ignore nulls) over( partition by patient_id order by visit_date desc) height
  , first_value( WAIST ignore nulls) over( partition by patient_id order by visit_date desc) WAIST
  , first_value( WEIGHT ignore nulls) over( partition by patient_id order by visit_date desc) WEIGHT
  , min(visit_date) over( partition by patient_id)  min_visit_date
  , visit_date
  , patient_id
  from visits

)
where 
  min_visit_date = visit_date
and patient_id = 44123
; 
```

这是[SQLfiddle 示例](http://sqlfiddle.com/#!4/1dcb4/1/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:00:30.593

试试这个：

```
select a.PATIENT_ID,a.VISIT_DATE,b.HEIGHT,c.WEIGHT,d.WAIST
from
    (select    PATIENT_ID,
              max(VISIT_DATE) as VISIT_DATE 
    from      VISITS
    group by  PATIENT_ID)a
join
    (select PATIENT_ID,HEIGHT from (select PATIENT_ID,HEIGHT 
    from VISITS v
    order by  case when v.HEIGHT is null 
        then to_date('1900/01/01','YYYY/MM/DD') 
                    else v.VISIT_DATE end desc) where rownum=1)b
on a.PATIENT_ID=b.PATIENT_ID
join
    (select PATIENT_ID,WEIGHT from (select PATIENT_ID,WEIGHT 
    from VISITS v 
    order by  case when v.WEIGHT is null 
          then to_date('1900/01/01','YYYY/MM/DD') 
                       else v.VISIT_DATE end desc) where rownum=1)c
on a.PATIENT_ID=c.PATIENT_ID
join
    (select PATIENT_ID,WAIST from (select PATIENT_ID,WAIST 
    from VISITS v
    order by  case when v.WAIST is null 
          then to_date('1900/01/01','YYYY/MM/DD') 
                      else v.VISIT_DATE end desc) where rownum=1)d
on a.PATIENT_ID=d.PATIENT_ID 
```

**SQL 小提琴[演示](http://sqlfiddle.com/#!4/d6402/68)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T06:17:48.187

```
select visits2.patient_id,visits2.maxDate,
(  select max(HEIGHT) from visits where visit_Date=
    (select max(visit_date) m from visits l
    where (HEIGHT is not null)
           and
          (l.patient_id=visits2.patient_id)
     )
     and 
     (patient_id=visits2.patient_id)
) HEIGHT,

(  select max(WAIST) from visits where visit_Date=
    (select max(visit_date) m from visits l
    where (WAIST is not null)
           and
          (l.patient_id=visits2.patient_id)
     )
     and 
     (patient_id=visits2.patient_id)
) WAIST,
(  select max(WEIGHT) from visits where visit_Date=
    (select max(visit_date) m from visits l
    where (WEIGHT is not null)
           and
          (l.patient_id=visits2.patient_id)
     )
     and 
     (patient_id=visits2.patient_id)
) WEIGHT

from
(select patient_id,max(visit_date) maxDate 
 from visits group by patient_id) visits2 
```

这是[SQLfiddle 示例](http://sqlfiddle.com/#!4/d6402/36)

# c - 父进程和子进程同步

> ID：11946170
> 
> 赞同：0
> 
> 时间：2012-08-14T05:20:45.950
> 
> 标签：c

我有一个项目需要我使用信号和叉来读取文件的内容并将其写回标准输出（低级 I/O）。我应该在父进程和子进程之间拆分读写工作，我应该先启动父进程来读取和写入文件的内容。父进程完成后，我应该向子进程发送信号 SIGUSR1，以便它可以开始读取和写入下一个数据块。我的读写部分运行正常，但信号和处理部分有问题。当我运行我的程序时，它会显示正确的输出，但它永远不会终止。有人可以检查我的代码有什么问题吗？

这是我到目前为止得到的：

```
#define _XOPEN_SOURCE 600

#include <limits.h> /* For LONG_MAX */
#include <fcntl.h> /*For open()*/
#include <unistd.h> /*For close(), read(), write(), nice()*/
#include <stdlib.h> /*For exit()*/
#include <stdio.h> /*For fprintf(),perror()*/
#include <signal.h> /*For signal()*/
#include <sys/types.h> /* For pid_t */
#include <sys/wait.h> /* For wait() */

void my_handler(int);
void displayUsage(FILE *, const char *);

int main(int argc, char **argv) {

        char c[BUFSIZ]; /* To hold the string that has been read from the file */
        int fd; /* file descriptor */
        int n;
        long int nBytes; /* To hold the number of bytes to read */
        pid_t pid;
        int child_status;

        /* Display usage if user use this process wrong */
        if(argc != 3){
            displayUsage(stderr, argv[0]);
            exit(1);
        }

        /* Convert argv[1] to long - number of bytes to read */
        nBytes = strtol(argv[1], NULL, 10);
        if((nBytes <= 0) || (nBytes > INT_MAX)){
            fprintf(stderr, "Bufferize %s is not a positive integer\n",
             argv[1]);
            exit(2);
        }

        /* Open a file */
        if((fd = open(argv[2],O_RDONLY,0)) < 0){
           perror(argv[2]);
           exit(3);
        }

        /* Attempt to register a signal handler */
        if(signal(SIGUSR1, my_handler) == SIG_ERR){
           perror("Could not set a handler for SIGUSR1");
           exit(4);
        }

        /* lowering the process priority */
        if(nice(40) < 0){
           perror("Cannot lower the priority");
           exit(5);
        }

        /* Create a new process */
        pid = fork();
        if(pid < 0){
           exit(6);
        }
        /* Allocating memory space for string/data to be read from the file
        if(!(c = malloc(nBytes))){
           perror("ERROR");
           exit(4);
        }*/

        if(pid == 0){
           pause();
           /* I'm the child */
           printf("Child's turn!\n");

           /* Read The File */
           while((n = read(fd, c, nBytes)) != 0){
                  /* Write content of 'c' to the stdout */
                  if(write(STDOUT_FILENO, c, n) < 0){
                         perror("Write Error!\n");
                         exit(7);
                  }
           }
           kill(pid,SIGUSR1);

        }
        else{
           /* I'm the parent */
           printf("Parent's turn!\n");
           /* Read The File */
           while((n = read(fd, c, nBytes)) != 0){
                 /* Write content of 'c' to the stdout */
                 if(write(STDOUT_FILENO, c, n) < 0){
                          perror("Write Error!\n");
                          exit(7);
                 }
           }
           /* Reap the child */
           wait(&child_status);
           kill(pid, SIGUSR1);
         }
         pause();

         /* Close the file */
         if(close(fd) < 0){
            perror(argv[2]);
            exit(8);
         }

         exit(0);
}

void displayUsage(FILE *fp, const char *arg){

        fprintf(fp, "Usage: %s n filename\n", arg);
        fprintf(fp, "where\n");
        fprintf(fp, 
            "\tn\tNumber of bytes to read and write in each \"block\".\n");
        fprintf(fp,"\tfilename\tName of file to be catted.\n");
}

void my_handler(int sig){
        /* Re-registering the handler */
        if(signal(SIGUSR1, my_handler) == SIG_ERR){
             perror("Could not set a handler for SIGUSR1");
             exit(4);
        }

        /*if(isParent == 1){
             printf("Parent's turn!\n");
          }
          else{
             printf("Child's turn!\n");
          }*/
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T05:27:04.943

我认为您的问题是您要等待孩子死去，然后再给它发出去读取文件的信号。

你有：

```
 /* Reap the child */
       wait(&child_status);
       kill(pid, SIGUSR1); 
```

你可能需要：

```
 kill(pid, SIGUSR1);
       /* Reap the child */
       wait(&child_status); 
```

您问题的另一部分可能是孩子`pause()`在退出之前到达第二个，但此时没有进程向它发送信号。而且由于父母仍在等待孩子死去，但孩子无法退出，直到有人向它发送信号以破坏`pause()`，所以除了每个人都在等待其他人做某事外，没有什么事情发生。

* * *

而且，经过更多的实验（以及更多的诊断输出），我得到了父级打印的文件（它是源代码），然后是信息：

```
Parent sending signal to child
Parent waiting for child
Child (56243) about to pause() 
```

从表面上看，信号是在孩子暂停之前发送给孩子的，所以信号可能从未发送过。由于代码正在刷新，我不太确定为什么我没有看到来自孩子的信号处理程序的跟踪。

* * *

没有什么比一个简单的问题更适合在一个人的脸上炸毁了......

下面是一些修改后的代码，可以实现预期的效果，尽管您可能会有些惊讶：

```
#define _XOPEN_SOURCE 600

#include <limits.h> /* For LONG_MAX */
#include <fcntl.h> /*For open()*/
#include <unistd.h> /*For close(), read(), write(), nice()*/
#include <stdlib.h> /*For exit()*/
#include <stdio.h> /*For fprintf(),perror()*/
#include <signal.h> /*For signal()*/
#include <sys/types.h> /* For pid_t */
#include <sys/wait.h> /* For wait() */

static volatile sig_atomic_t sigusr1 = 0;

void my_handler(int);
void displayUsage(FILE *, const char *);

int main(int argc, char **argv)
{
    char c[BUFSIZ]; /* To hold the string that has been read from the file */
    int fd; /* file descriptor */
    int n;
    long int nBytes; /* To hold the number of bytes to read */
    pid_t pid;
    int child_status;

    /* Display usage if user use this process wrong */
    if(argc != 3){
        displayUsage(stderr, argv[0]);
        exit(1);
    }

    /* Convert argv[1] to long - number of bytes to read */
    nBytes = strtol(argv[1], NULL, 10);
    if((nBytes <= 0) || (nBytes > INT_MAX)){
        fprintf(stderr, "Bufferize %s is not a positive integer\n",
                argv[1]);
        exit(2);
    }

    /* Open a file */
    if((fd = open(argv[2],O_RDONLY,0)) < 0){
        perror(argv[2]);
        exit(3);
    }

    /* Attempt to register a signal handler */
    if(signal(SIGUSR1, my_handler) == SIG_ERR){
        perror("Could not set a handler for SIGUSR1");
        exit(4);
    }

    /* lowering the process priority */
    if(nice(40) < 0){
        perror("Cannot lower the priority");
        exit(5);
    }

    /* Create a new process */
    pid = fork();
    if(pid < 0){
        perror("fork");
        exit(6);
    }
    /* Allocating memory space for string/data to be read from the file
       if(!(c = malloc(nBytes))){
       perror("ERROR");
       exit(4);
       }*/

    if(pid == 0){
        printf("Child (pid = %d) about to signal self (sigusr1 = %d)\n", (int)getpid(), (int)sigusr1);
        fflush(0);
        kill(pid, SIGUSR1);
        printf("Child (%d) about to pause() (sigusr1 = %d)\n", (int)getpid(), (int)sigusr1);
        fflush(0);
        pause();

        /* I'm the child */
        printf("Child's turn %d!\n", (int)getpid());

        /* Read The File */
        while((n = read(fd, c, nBytes)) != 0){
            /* Write content of 'c' to the stdout */
            if(write(STDOUT_FILENO, c, n) < 0){
                perror("Write Error!\n");
                exit(7);
            }
        }
        printf("Child signalling parent\n");
        kill(pid,SIGUSR1);
        printf("Child exiting (status = 37)\n");
        exit(37);
    }
    else{
        /* I'm the parent */
        printf("Parent's turn! (pid = %d, kid = %d)\n", (int)getpid(), (int)pid);
        /* Read The File */
        while((n = read(fd, c, nBytes)) != 0){
            /* Write content of 'c' to the stdout */
            if(write(STDOUT_FILENO, c, n) < 0){
                perror("Write Error!\n");
                exit(7);
            }
        }
        printf("Parent sleeping\n");
        sleep(1);
        printf("Parent sending signal to child\n");
        fflush(0);
        kill(pid, SIGUSR1);
        printf("Parent waiting for child\n");
        fflush(0);
        /* Reap the child */
        int corpse = wait(&child_status);
        printf("waiting over: pid = %d, status = 0x%.4X\n", corpse, child_status);
    }

    printf("%d skipping final pause\n", (int)getpid());
    /*pause();*/

    /* Close the file */
    if(close(fd) < 0){
        perror(argv[2]);
        exit(8);
    }

    printf("%d exiting\n", (int)getpid());
    return(0);
}

void displayUsage(FILE *fp, const char *arg)
{
        fprintf(fp, "Usage: %s n filename\n", arg);
        fprintf(fp, "where\n");
        fprintf(fp, 
            "\tn\tNumber of bytes to read and write in each \"block\".\n");
        fprintf(fp,"\tfilename\tName of file to be catted.\n");
}

void my_handler(int sig)
{
    /* Re-registering the handler */
    if(signal(sig, my_handler) == SIG_ERR){
        perror("Could not set a handler for SIGUSR1");
        exit(4);
    }
    sigusr1 = 1;
    printf("In signal handler (pid %d)\n", (int)getpid());
    fflush(0);
} 
```

示例输出：

```
$ ./doze 20 file.1
Parent's turn! (pid = 56459, kid = 56460)
0.0
Parent sleeping
Child (pid = 56460) about to signal self (sigusr1 = 0)
In signal handler (pid 56460)
Child (56460) about to pause() (sigusr1 = 1)
In signal handler (pid 56459)
Parent sending signal to child
Parent waiting for child
In signal handler (pid 56460)
Child's turn 56460!
Child signalling parent
In signal handler (pid 56460)
Child exiting (status = 37)
In signal handler (pid 56459)
waiting over: pid = 56460, status = 0x2500
56459 skipping final pause
56459 exiting
$ 
```

数据文件 ,`file.1`包含一行包含`0.0`（非常令人兴奋的）。如您所见，父级很好地复制了文件。现在，多亏了`sleep(1)`，孩子才有机会做事，并从信号处理程序中醒来。它将文件的其余部分复制到标准输出...

那是什么——你看不到孩子抄了什么？呃，好吧...

两个进程共享一个打开文件描述，文件中的当前位置由打开文件描述中的位置控制。因此，当父级完成读取文件时，文件处于 EOF，因此`read()`子级的第一个字节为零。你需要做一个`lseek(fd, 0L, SEEK_SET);`让它再次读取文件。

因此，子节点复制数据，然后向父节点发出信号，以状态 37 退出。您可以看到父节点响应，依此类推，直到退出。因此，正如编辑的那样，它可以工作。你有太多的停顿。我不确定这`sleep()`是必要的，但我怀疑它是必要的。

* * *

细节点：消息`Child signalling parent`是不准确的信息；那是孩子自己发出信号。我不认为这是必要的。事实上，这里的“相同”代码少了 40 行：

```
#define _XOPEN_SOURCE 600

#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <signal.h>
#include <sys/wait.h>

void my_handler(int);
void displayUsage(FILE *, const char *);

int main(int argc, char **argv)
{
    char c[BUFSIZ];
    int fd;
    int n;
    long int nBytes;
    pid_t pid;
    int child_status;

    if(argc != 3){
        displayUsage(stderr, argv[0]);
        exit(1);
    }

    nBytes = strtol(argv[1], NULL, 10);
    if((nBytes <= 0) || (nBytes > BUFSIZ)){
        fprintf(stderr, "Buffer size %s is not a positive integer between 1 and %d\n",
                argv[1], BUFSIZ);
        exit(2);
    }

    if((fd = open(argv[2], O_RDONLY, 0)) < 0){
        perror(argv[2]);
        exit(3);
    }

    if(signal(SIGUSR1, my_handler) == SIG_ERR){
        perror("Could not set a handler for SIGUSR1");
        exit(4);
    }

    pid = fork();
    if(pid < 0){
        perror("fork");
        exit(6);
    }

    if(pid == 0){
        printf("Child (%d) about to pause()\n", (int)getpid());
        pause();
        printf("Child's turn %d!\n", (int)getpid());
        lseek(fd, 0L, SEEK_SET);
        while((n = read(fd, c, nBytes)) != 0){
            if(write(STDOUT_FILENO, c, n) < 0){
                perror("Write Error!\n");
                exit(7);
            }
        }
        int rc = 37;
        printf("Child exiting (status = %d (0x%.2X))\n", rc, rc);
        exit(rc);
    }
    else{
        printf("Parent's turn! (pid = %d, kid = %d)\n", (int)getpid(), (int)pid);
        while((n = read(fd, c, nBytes)) != 0){
            if(write(STDOUT_FILENO, c, n) < 0){
                perror("Write Error!\n");
                exit(7);
            }
        }
        printf("Parent sleeping\n");
        sleep(1);
        printf("Parent sending signal to child\n");
        kill(pid, SIGUSR1);
        printf("Parent waiting for child\n");
        int corpse = wait(&child_status);
        printf("waiting over: pid = %d, status = 0x%.4X\n", corpse, child_status);
    }

    if(close(fd) < 0){
        perror(argv[2]);
        exit(8);
    }

    printf("%d exiting\n", (int)getpid());
    return(0);
}

void displayUsage(FILE *fp, const char *arg)
{
        fprintf(fp, "Usage: %s n filename\n", arg);
        fprintf(fp, "where\n");
        fprintf(fp, "\tn\tNumber of bytes to read and write in each \"block\".\n");
        fprintf(fp, "\tfilename\tName of file to be catted.\n");
}

void my_handler(int sig)
{
    if(signal(sig, my_handler) == SIG_ERR){
        perror("Could not set a handler for SIGUSR1");
        exit(4);
    }
    printf("In signal handler (pid %d)\n", (int)getpid());
} 
```

示例输出：

```
$ ./doze 20 file.1
Parent's turn! (pid = 56651, kid = 56652)
0.0
Parent sleeping
Child (56652) about to pause()
Parent sending signal to child
Parent waiting for child
In signal handler (pid 56652)
Child's turn 56652!
0.0
Child exiting (status = 37 (0x25))
waiting over: pid = 56652, status = 0x2500
56651 exiting
$ 
```

当我删除 时`sleep()`，程序再次挂起；父母在孩子进入之前向孩子发送了信号`pause()`。

# marklogic - Marklogic：安全和配置升级消息

> ID：11946171
> 
> 赞同：0
> 
> 时间：2012-08-14T05:20:46.640
> 
> 标签：marklogic

我的 Windows 7 笔记本电脑上安装了 Marklogic 5。然后我被告知有问题的应用程序需要 Marklogic 4.2。我卸载了 5 并安装了 4.2。启动服务器，并登录到管理页面。我收到消息

“此服务器现在必须将安全数据库和配置文件升级到最新版本。完成后，安全数据库和配置文件将与以前的版本不兼容。此外，还将安装和配置 AppServices 数据库和林。单击好的继续”

但是当我单击确定时，它会停留在同一页面上。

任何指向问题的指针？

谢谢萨米尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T15:00:58.873

卸载 MarkLogic 程序不会删除配置或数据目录，只会删除应用程序二进制文件和支持文件。所以5.0的Security数据库还在data目录下，4.2不能使用5.0的Security数据库。

大多数 4.2 应用程序在 5.0 上运行良好，所以我会先尝试。如果应用程序仅适用于 4.2，则必须停止 MarkLogic，删除现有数据目录，然后继续。如果您被要求重新输入您的许可证密钥，您就会知道这是有效的（您可能希望从旧数据目录中保存一份副本）。

有关详细信息，请参阅[http://docs.marklogic.com/4.2doc/docapp.xqy#display.xqy?fname=http://pubs/4.2doc/xml/install_all/procedures.xml%2328962 。](http://docs.marklogic.com/4.2doc/docapp.xqy#display.xqy?fname=http://pubs/4.2doc/xml/install_all/procedures.xml%2328962)

# vba - 在 excel 中调用 GetCrossReferenceItems(wdRefTypeHeading)

> ID：11946173
> 
> 赞同：2
> 
> 时间：2012-08-14T05:20:56.370
> 
> 标签：vba, excel, ms-word

我正在尝试使用模板将 excel 内容导出到 word 文档中。

单词模板中有不同的标题级别。我需要获取标题列表，以便可以将 excel 中的内容插入到正确的位置。但是，`GetCrossReferenceItems(wdRefTypeHeading)`不工作。

这是代码：

```
Private Sub CommandButton1_Click()
    Set wdObj = CreateObject("Word.Application")
    wdObj.Visible = True
    wdObj.Documents.Open FileName:="test.dotx"
    Set wdDoc = wdObj.ActiveDocument
    astrHeadings = wdDoc.GetCrossReferenceItems(wdRefTypeHeading)
    MsgBox ("headings #" & UBound(astrHeadings)) 'correct number if in word, 0 if in excel
    wdObj.Quit
End Sub 
```

如果我将完全相同的代码放入 word 文档中，我可以获得列表，但`(ubound(~) = 0)`如果我将相同的代码放入 excel 中，列表将始终为空。

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T05:41:42.370

您与 MS Word 绑定较晚，因此 MS Excel 无法理解是什么`wdRefTypeHeading`。对于 MS Excel，该变量的值为 ，`0`而对于 MS Word，该常量的值为`1`。

尝试这个。（**经过试验和测试**）

```
Const wdRefTypeHeading = 1

Sub Sample()
    Dim wdObj As Object, wdDoc As Object
    Dim FlName As String
    Dim astrHeadings

    Set wdObj = CreateObject("Word.Application")
    wdObj.Visible = True
    FlName = "C:\test.dotx"
    Set wdDoc = wdObj.Documents.Open(FlName)

    astrHeadings = wdDoc.GetCrossReferenceItems(wdRefTypeHeading)

    MsgBox ("headings #" & UBound(astrHeadings))

    wdObj.Quit

    '~~> Close and Clean Up
    Set wdDoc = Nothing
    Set wdObj = Nothing
End Sub 
```

# ruby-on-rails - 如何在windows上处理和使用RubyGem bundle

> ID：11946176
> 
> 赞同：0
> 
> 时间：2012-08-14T05:21:20.113
> 
> 标签：ruby-on-rails, ruby, rubygems

`Ruby`我从 ( **[http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)** )开始学习并成功安装了 ruby​​ 并在教程中给出的 htdocs 下创建了一个博客文件夹。

在创建新文件夹（博客文件夹）的过程中，它显示“ `Fetching source index for https://rubygems.org`”并安装了一些带有最终消息“你的包已完成！使用'bundle show [gemname]'查看.....”但是当我运行命令时就像“bundle show jquery-rails”一样，它会标记像“Could not locate GemFile”这样的消息，然后我在我的计算机中搜索了这个文件并在“ `C:\Users\MyComUserName\.gem\specs\rubygems.org%443\quick\Marshal.4.8`”下找到了它。

现在我的问题是——我做错了什么，如果我真的做错了什么，我该如何解决。我来自 PHP 背景，所以使用 XAMPP 并将 ROR 项目也保存在我的 HTDOCS 文件夹下（`Windows 7`操作系统即时通讯使用）。在开发过程中我如何使用宝石或它们对我有什么好处。我也看过这篇文章（**[http://docs.rubygems.org/read/chapter/1/](http://docs.rubygems.org/read/chapter/1/)**），但由于我还处于初始阶段，所以无法得到很多。请在最初使用 RoR 时指导我，`looking for a descriptive answer with some links to get more hands on RoR`.

（我来自 PHP 背景并了解 MVC）。

请检查截图

![http://i.stack.imgur.com/VdnUK.jpg](../Images/f9f0392a1f538b18790362dc85a0be97.png)

![http://i.stack.imgur.com/Hzk8Y.jpg](../Images/db9a61543196486db6db93c8241bceef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:10:29.780

尝试在项目目录中运行它：

```
gem install jquery-rails
bundle show jquery-rails 
```

即使它被列为安装，安装 gem 似乎也是多余的，但最好仔细检查。

我不确定——如果你知道，请编辑——但我认为 rails 会将你所有的 gem 安装在`ruby/gems`文件夹中，并在你需要它们时查找它们。也许不知何故， gem 被放在了错误的位置，但安装正确（因此，没有错误），当你第一次`jquery-rails`运行时找不到它。`bundle show jquery-rails`

[另外，如果您刚开始学习 ruby​​ 和 rails，我会推荐tryruby.org](http://tryruby.org)和[railsforzombies.com](http://railsforzombies.com)上提供的免费课程。它们涵盖的内容不多，但它们为您提供了运行所需的基础知识。

如需更详细和高级的教程，请查看[railscasts.com](http://railscasts.com)。他涵盖了很多主题，并展示了很多有用的 rails 技巧。

祝你好运，与 Ruby 一起玩得开心！

# java - 如何在 Java 线程之间实现共享缓冲区？

> ID：11946178
> 
> 赞同：2
> 
> 时间：2012-08-14T05:21:30.847
> 
> 标签：java, multithreading, shared, producer-consumer

我打算在生产者和消费者线程之间编写一个共享缓冲区。这是我的代码：

```
class PQueue
{
    Token token;
    boolean flag = false;   // false: add, true: poll

    PQueue()
    {
        token = null;
    }

    synchronized void add(Token token)
    {
        if(flag == true)
        {
            try {
                wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        flag = true;
        notify();
        this.token = token;
    }

    synchronized Token poll()
    {
        if(flag == false)
        {
            try {
                wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        flag = false;
        notify();
        return this.token;
    }
} 
```

我是多线程的新手。是否有任何潜在的并发错误？这是实现这一目标的“标准/通用”方式吗？或者有没有更简单、更有效的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T05:34:51.577

看一下[`java.util.concurrent`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)包，特别是[`BlockingQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)接口和实现它的类。这些用于将消息从一个线程传递到另一个线程。这[`SynchronousQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/SynchronousQueue.html)正是您要实施的。

您自己的实现有一些缺陷。一方面，应该声明两个共享变量`volatile`以确保一个线程上的更改被另一个线程看到。而且您的`if (flag == false)`和`if (flag == true)`测试实际上应该是`while`循环，因为实际上没有被调用时`wait()`可能会[虚假地唤醒。](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#wait%28%29)`notify()`

我建议不要使用单独的标志变量，而是将令牌设置为 null 以指示没有对象。而不是捕捉、打印和盲目地继续面对`InterruptedException`，我建议让这两种方法都在发生异常时抛出该异常。这些是阻塞方法，调用者有责任处理阻塞方法被中断的可能性。

另外，我不知道您的`Token`课程是什么，但您的队列中的任何内容实际上都取决于它的类型。定义一个 generic 会更有意义`PQueue<T>`，然后`PQueue<Token>`在你想传递令牌时使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T05:36:11.597

**1.**尝试使用Package中的`thread-safe`类和接口。`java.util.concurrent`

**2.**与`BlockingQueue` `Interface`一起使用`ArrayBlockingQueue` `Class`。

# java - Java Spring Web 应用程序 - 利用 140MB 内存进行单用户性能测试

> ID：11946182
> 
> 赞同：-1
> 
> 时间：2012-08-14T05:21:56.717
> 
> 标签：java, spring, memory-management

我有一个 Spring 应用程序，在性能和负载测试中，它提供了 130-140 MB 的内存使用量，对于多个用户，它高达 1GB。任何人都可以帮助我解决此问题或对性能调整有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:03:51.370

我使用了 java profilers，但我对实际性能调整和内存使用的输出不满意，目前我们已经切换到[java melody](https://code.google.com/p/javamelody/)。这不仅有助于开发和生产系统中的性能优化。Java melody 非常易于集成和配置，在生产中您只需更新 web.xml 即可启用或禁用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:32:09.223

使用名为[jmeter](http://jmeter.apache.org/)的工具。否则手工制作 Spring AOP 或 AspectJ 方面。

# c# - 将 C++ 迁移到 C#（回调）

> ID：11946193
> 
> 赞同：1
> 
> 时间：2012-08-14T05:23:52.443
> 
> 标签：c#, c++, callback, migration

我目前正在将 c++ 迁移到 c#，我提出了以下问题，我没有在 c# 中完成的最微弱的想法

```
typedef void (CALLBACK *funtion1)(int a , int b);

void SetCallBackFuntion(funtion1 pfn);

void something(){

obj->SetCallBackFuntion(&funtion1);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:18:42.753

有几种方法可以在 C# 中实现等效行为，具体取决于您希望它如何工作以及您所针对的 .NET 版本。最简单的方法是使用[Action](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)。

要使用 C# 标准实现这一点，首先应注意它更适合作为属性而不是方法。此外，因为回调不返回值，所以它被称为方法，而不是函数。所以上面的代码看起来像这样：

```
public Action<int,int> CallBack { set; }

public void Something()
{
    obj.CallBack = function1;
} 
```

调用回调的代码将执行以下操作：

```
if(CallBack != null)
    CallBack(1, 2); 
```

另一种方法是使用[委托](http://msdn.microsoft.com/en-us/library/ms173171%28v=vs.80%29.aspx)，这只是描述动作的一种稍微冗长的方式，并且与旧版本的 .NET 兼容。它还可以更紧密地与 C++ 代码进行转换。注意：尽管这在技术上可行（假设您正确实施了其余部分），但通常不被视为良好做法。我只是想向您展示一种快速而肮脏的方式。

```
public delegate void CallBack(int x, int y);

private void SetCallBackFuntion(CallBack pfn)
{
}

private void Something()
{
    obj.SetCallBackFuntion(funtion1);
} 
```

第三种方法是使用接口。你可以用你的方法签名来描述一个接口，如下所示：

```
public interface IMyInterface
{
    void CallBack(int x, int y);
} 
```

然后你可以在你的类上有一个类似于 Action 但使用接口的属性。

```
public IMyInterface CallBackObject { set; }

public void Something()
{
    obj.CallBackObject = someObject;
}

if(CallBackObject != null)
    CallBackObject.CallBack(1, 2); 
```

想到的最后一种方法是使用事件处理程序，但由于当您的回调有多个订阅者时它们更有用，所以我不会在这里介绍它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:38:59.420

可以用 C# 简单地用**委托编写**

# javascript - jQuery 熔岩灯悬停 (CSS)

> ID：11946200
> 
> 赞同：0
> 
> 时间：2012-08-14T05:25:11.547
> 
> 标签：javascript, jquery, css, lavalamp

我的熔岩灯导航基本上可以工作，但我有一个小问题。

我正在使用这个[LavaLamp 菜单插件](http://www.gmarwaha.com/blog/2007/08/23/lavalamp-for-jquery-lovers/)，并试图让我的导航看起来像这样：

![在此处输入图像描述](../Images/3f41430feaa35762f01651749a80a576.png)

所以我让它工作了，除了我遇到的问题是当熔岩灯图像不在它们上面时我需要链接是一种颜色（黑色），而当它是白色时。悬停可以正常工作，但问题来自类电流（熔岩灯悬停效果默认为类电流）。

如果我将当前类的链接设置为白色，即使您将鼠标悬停在不同的导航链接上，该链接也会保持白色。

我假设一些简单的 JavaScript 可以解决这个问题，但我对此并不了解，如果有人能与我分享解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:04:03.277

只是重写插件来添加颜色？

```
//lavalamp plugin
(function($) {
    $.fn.lavaLamp = function(o) {
        o = $.extend({
            fx: "linear",
            speed: 500,
            click: function() {}
        }, o || {});
        return this.each(function() {
            var me = $(this),
                noop = function() {},
                $back = $('<li class="back"><div class="left"></div></li>').appendTo(me),
                $li = $("li", this),
                curr = $("li.current", this)[0] || $($li[0]).addClass("current")[0];
            $li.not(".back").hover(function() {
                move(this);
            }, noop);
            $(this).hover(noop, function() {
                move(curr);
            });
            $li.click(function(e) {
                setCurr(this);
                return o.click.apply(this, [e, this]);
            });
            setCurr(curr);

            function setCurr(el) {
                $back.css({
                    "left": el.offsetLeft + "px",
                    "width": el.offsetWidth + "px"
                });
                curr = el;
            };

            function move(el) {
                $(el).find('a')
                     .css('color', o.hover_color).end()
                     .siblings('li').find('a')
                     .css('color', o.color);
                $back.each(function() {
                    $(this).dequeue();
                }).animate({
                    width: el.offsetWidth,
                    left: el.offsetLeft
                }, o.speed, o.fx);
            };
        });
    };
})(jQuery); 
```

用颜色调用插件

```
$(document).ready(function() {

    $(".lavaLamp").lavaLamp({
        fx: "backout",
        speed: 700,
        color: "#fff",
        hover_color: "#000"
    });

});​ 
```

[**小提琴**](http://jsfiddle.net/bnVKW/)

添加了彩色动画（需要缓动插件/jQuery UI） - [**FIDDLE**](http://jsfiddle.net/bnVKW/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:28:18.910

用 !important 设置你的颜色

```
color:black !important; 
```

可能这会帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T06:07:54.770

请参阅更新的小提琴：http: [//jsfiddle.net/DRPsA/5/](http://jsfiddle.net/DRPsA/5/)

基本上，您可以添加以下内容：

```
 $(".lavaLampWithImage .current").addClass("theCurrentLink");                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 

    $(".lavaLampWithImage").hover(function() {    
          $(this).find(".current").removeClass("current");                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  } , 
        function() {    
          $(this).find(".theCurrentLink").addClass("current");                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        } 
); 
```

# c# - 为不同页面之间的用户聊天记录保存数据，facebook 风格

> ID：11946206
> 
> 赞同：0
> 
> 时间：2012-08-14T05:25:54.870
> 
> 标签：c#, asp.net-mvc, signalr

我目前在页面的最底部有一个像 facebook 这样的聊天界面。您可以单击您的联系人并开始与他们聊天。我目前没有将聊天消息存储在数据库中，因为我只是使用 signalR 将一条消息从一个浏览器中继到另一个浏览器，进行一些标签剥离等。如果用户导航到网站上的另一个页面，那么保存的好策略是什么用户的打开聊天，以及他们打开的聊天窗口的聊天记录？我应该为此使用数据库吗？或者是否有另一种方法可以将它存储在会话中，但我可以看到这会占用服务器上的大量内存。

如果您确实为此建议了一个数据库，那么像 mongoDB 或 sql server 这样的东西会是更好的选择吗？

*请记住，聊天数据对我来说并不重要，我只想为用户打开的每个聊天保存一点对话，所以如果他或她开始浏览网站，聊天栏仍然可以在任何页面上从中断处继续，并从聊天中获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:01:35.297

如果您不想在服务器端存储消息，我建议将最后 X 条消息保存在客户端的 localStorage 中：[https ://developer.mozilla.org/en-US/docs/DOM/Storage](https://developer.mozilla.org/en-US/docs/DOM/Storage)

# php - 有没有办法在 QuickForm2 中创建自定义规则，就像在 QuickForm 中使用 addFormRule 一样

> ID：11946211
> 
> 赞同：3
> 
> 时间：2012-08-14T05:26:31.313
> 
> 标签：php, forms, pear

在 QuickForm 中，它可以像这样完成：

```
$form = new HTML_QuickForm2('changepassword');

$passwordold = $fs->addElement('password', 'oldpassword')->setLabel('Old password');

function chkPass($fields)
{
    if ((strlen($fields['oldpassword']) && (md5($fields['oldpassword'])<>passwordcheck())))      
    {
        return array('oldpassword' => 'Old password does not match your records.');
    }
    return true;
}

$form->addFormRule('chkPass'); 
```

但是QuickForm2好像没有addFormRule()，有什么可以替代的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T05:38:58.597

找到了答案：

```
function chkPass($password)
{
    return ($password == 'qwerty');
}
$oldpassword->createRule('callback', 'Old password does not match your records.', 'chkPass') 
```

# linq - 如何按结果在 Linq Group 中包含不是键或聚合的字段？

> ID：11946212
> 
> 赞同：0
> 
> 时间：2012-08-14T05:26:42.453
> 
> 标签：linq

我有以下对象

```
 public partial class Log
{
    public System.Guid Id { get; set; }
    public double Lat { get; set; }
    public double Lng { get; set; }
    public System.DateTime TimeStamp { get; set; }
    public int DeviceId { get; set; }
} 
```

我想获取每台设备的最新日志。所以我有这个

```
from log in allLogs
                   group log by log.DeviceId
                   into l
                   select new {DeviceId = l.Key, TimeStamp = l.Max(s => s.TimeStamp)}; 
```

这很好用，只是它只包含 deviceId 和 TimeStamp。我还想包括 Log 中的 Lat 和 Lng 字段。

但请注意，这些字段不是键或聚合函数的一部分。IE 我不想按这些字段分组，我只想在结果集中。这样我就有了每台设备最新日志的 lat Lng。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:47:10.733

这适用于 LINQ to Objects - 我不知道 LINQ to SQL 等：

```
var query = from log in allLogs
            group log by log.DeviceId into logs
            select logs.OrderByDescending(x => x.Timestamp).First(); 
```

换句话说，对每个组进行排序，然后取最新的。

或者，*绝对*仅在 LINQ to Objects 中，您可以[`MaxBy`](http://code.google.com/p/morelinq/source/browse/MoreLinq/MaxBy.cs)从[MoreLINQ](http://morelinq.googlecode.com)使用：

```
var query = from log in allLogs
            group log by log.DeviceId into logs
            select logs.MaxBy(x => x.Timestamp); 
```

# objective-c - 使用表格视图作为选取器

> ID：11946213
> 
> 赞同：0
> 
> 时间：2012-08-14T05:26:46.330
> 
> 标签：objective-c, cocoa-touch, uitableview, uiviewcontroller

在我的 iOS 应用程序中，我有一个视图控制器来处理我的主视图。如果我在该视图上有一个按钮，我可以让它打开一个模式表视图，以便用户可以从表中选择一行，然后主视图上的标签等于所选行文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:00:08.583

就这样做

向您的视图控制器添加一个表格视图，为表格视图创建一个对象。

然后在这样做之后

```
- (void)viewDidLoad
{
[super viewDidLoad];
 tableViewObj.hidden = YES;
array = [[NSArray alloc]initWithObjects:@"label1",@"label2",@"label3",@"label4", nil];  
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
displayText.text = [array objectAtIndex:indexPath.row];
tableViewObj.hidden = YES;
}

-(IBAction)gotoBack:(id)sender
{
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.75];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:tableViewObj cache:YES];
[UIView commitAnimations];
tableViewObj.hidden = NO;
} 
```

我想可能对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:36:29.933

当然，这是可能的。您可以使用方法 presentViewController:animated:completion: 来呈现模态表视图控制器。主视图控制器有一个属性，presentedViewController，它使您可以访问该控制器（您正在呈现的那个），因此您可以获得其属性之一的值（将设置为所选行的文本）。

编辑后：

你可以这样做。在呈现视图控制器中有这个：

在 init 方法（或 viewDidLoad）注册接收通知的这一行：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(dismissAndUpdate:) name:@"ItemSelectedNotification" object:nil]; 
```

然后这两种方法：

```
 -(IBAction)buttonClick:(id)sender {
    RDTableViewController *tvc = [[RDTableViewController alloc] initWithStyle:UITableViewStylePlain];
    [self presentViewController:tvc animated:YES completion:nil];
}

-(void)dismissAndUpdate:(NSNotification *) aNotification {
    self.label.text = [aNotification.userInfo valueForKey:@"selectedText"];
    [self dismissModalViewControllerAnimated:YES];

} 
```

这是一个可以在表格视图控制器子类中完成的示例：

```
@implementation RDTableViewController

- (id)initWithStyle:(UITableViewStyle)style {
    if (self = [super initWithStyle:style]) {
        self.theData = @[@"one",@"two",@"three",@"foour",@"five",@"six"];
    }
    return self;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return self.theData.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"NewCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"NewCell"];
    }
    cell.textLabel.text = [self.theData objectAtIndex:indexPath.row] ;
    return cell;
}

    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSDictionary *dict = [NSDictionary dictionaryWithObject:[self.theData objectAtIndex:indexPath.row] forKey:@"selectedText"];
    [[NSNotificationCenter defaultCenter] postNotificationName:@"ItemSelectedNotification" object:self userInfo:dict];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T05:46:17.080

```
You can handle those values by using UITableViewDelegate methods . By getting the selectedIndex path value set the text to Button.<br/>

  #import <UIKit/UIKit.h>

@interface MainView : UIViewController
{
    IBOutlet UIButton *mainButton;

}  
 @property(nonatomic,retain)IBOutlet UIButton *mainButton;

//in MainView.m file 
@synthesize mainButton;

 //in CustomViewController.h file 
     #import "MainView.h"
    #import <UIKit/UIKit.h>

    @interface CustomViewController :UIViewController<UITableViewDelegate,UITableViewDataSource> {

     IBOutlet UITableView *tableList;

    }

    //in .m file 

    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
        [tableView deselectRowAtIndexPath:indexPath animated:YES];
     //Pass the indexPath.row to mainView
    if (indexPath.row==0) {
MainView *mainV = [[MainView alloc]initWithNibName:@"MainView" bundle:nil];
            mainV.mainButton.text=@"setMainButtonText";
            [self.navigationController pushViewController:mainV animated:YES];

    }
  ///By using indexPath you can set that value ..

    } 
```

# android - 为 android 编译的问题...“未在此范围内声明”错误

> ID：11946215
> 
> 赞同：0
> 
> 时间：2012-08-14T05:27:04.620
> 
> 标签：android, c++

大家好，另一个 C++ 编程问题。再次对我轻松一点，因为我刚刚开始学习 C++。我在编译时收到一个错误，显示：

> frameworks/native/libs/gui/SurfaceTextureClient.cpp：在成员函数'virtual int >android::SurfaceTextureClient::setUsage(uint32_t)'中：frameworks/native/libs/gui/SurfaceTextureClient.cpp:498:20：错误：> 'GRALLOC_USAGE_PRIVATE_EXTERNAL_ONLY' 未在此范围内声明 frameworks/native/libs/gui/SurfaceTextureClient.cpp:503:23：错误：>'GRALLOC_USAGE_PRIVATE_EXTERNAL_BLOCK' 未在此范围内声明 frameworks/native/libs/gui/SurfaceTextureClient.cpp:505 :30: 错误：>'GRALLOC_USAGE_PRIVATE_EXTERNAL_CC' 未在此范围内声明

这是“SurfaceTextureClient.cpp”文件：

```
 17 #define LOG_TAG "SurfaceTextureClient"
 18 #define ATRACE_TAG ATRACE_TAG_GRAPHICS
 19 //#define LOG_NDEBUG 0
 20
 21 #include <android/native_window.h>
 22 
 23 #include <utils/Log.h>
 24 #include <utils/Trace.h>
 25
 26 #include <gui/ISurfaceComposer.h>
 27 #include <gui/SurfaceComposerClient.h>
 28 #include <gui/SurfaceTexture.h>
 29 #include <gui/SurfaceTextureClient.h>
 30
 31 #include <private/gui/ComposerService.h>
 32 #ifdef QCOMHW
 33 #include <gralloc_priv.h>
 34 #endif
 35 
 36 namespace android {
 37 
 38 SurfaceTextureClient::SurfaceTextureClient(
 39         const sp<ISurfaceTexture>& surfaceTexture)
 40 {
 41     SurfaceTextureClient::init();
 42     SurfaceTextureClient::setISurfaceTexture(surfaceTexture);
 43 }
 44 
 45 // see SurfaceTextureClient.h
 46 SurfaceTextureClient::SurfaceTextureClient(const
 47          sp<SurfaceTexture>& surfaceTexture)
 48 {
 49     SurfaceTextureClient::init();
 50     SurfaceTextureClient::setISurfaceTexture(surfaceTexture->getBufferQueue());
 51 }
 52
 53 SurfaceTextureClient::SurfaceTextureClient() {
 54     SurfaceTextureClient::init();
 55 }
 56 
 57 SurfaceTextureClient::~SurfaceTextureClient() { 
 58     if (mConnectedToCpu) {
 59         SurfaceTextureClient::disconnect(NATIVE_WINDOW_API_CPU);
 60
 61 }

494 int SurfaceTextureClient::setUsage(uint32_t reqUsage)
493 {
494     ALOGV("SurfaceTextureClient::setUsage");
495     Mutex::Autolock lock(mMutex);
496 
497 #ifdef QCOMHW
498     if (reqUsage & GRALLOC_USAGE_PRIVATE_EXTERNAL_ONLY) {
499         //Set explicitly, since reqUsage may have other values.
500         mReqExtUsage = GRALLOC_USAGE_PRIVATE_EXTERNAL_ONLY;
501         //This flag is never independent. Always an add-on to
502         //GRALLOC_USAGE_EXTERNAL_ONLY
503         if(reqUsage & GRALLOC_USAGE_PRIVATE_EXTERNAL_BLOCK) {
504             mReqExtUsage |= GRALLOC_USAGE_PRIVATE_EXTERNAL_BLOCK;
505         } else if(reqUsage & GRALLOC_USAGE_PRIVATE_EXTERNAL_CC) {
506             mReqExtUsage |= GRALLOC_USAGE_PRIVATE_EXTERNAL_CC;
507         }
508     }
509 #endif 
```

如果需要更多信息，请告诉我。修复了此编译的先前错误。不知道如何处理这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:42:38.097

Well I found the solution to the problem I think lol. There was another gralloc_priv.h file in source folder under a different directory and copied over the declarations in that header file for the unscoped members and it went through fine. If anyone is coming across this problem let me know and I'll show you where I found the files.

# google-maps - 如何使用谷歌静态地图 api 显示世界地区

> ID：11946216
> 
> 赞同：3
> 
> 时间：2012-08-14T05:27:08.083
> 
> 标签：google-maps, google-static-maps

我想使用谷歌地图图像 API 来显示世界上突出显示的区域。地区可以是地区或国家和地区的组合。所以我将有区域数组，我希望将图像映射到生成的指出通过的区域。如何使用谷歌地图图像 API 做到这一点

# jquery - 在其他下拉列表中选择值时从下拉列表中删除值

> ID：11946218
> 
> 赞同：0
> 
> 时间：2012-08-14T05:27:27.043
> 
> 标签：jquery, drop-down-menu

我有三个具有相同选项值的下拉列表我想在第一个下拉列表中选择值时从第二和第三下拉列表中删除选定的选项值。

但是当我在第一个下拉列表中更改新选项值时出现问题，然后之前选择的值也从第二个和第三个下拉列表中删除

我希望当在第一个下拉列表中选择选项值时，应该在第二个和第三个下拉列表中显示所有值，期望选择值。

请帮我

jQuery代码

```
$('#select_period').bind('change',function(){
    var select_box=$("#select_period").val();
    if(select_box =='select'){

    } else {
        if($(this).val() == select_box )$('#period_field option[value="'+select_box+'"]').remove();
        if($(this).val() == select_box )$('#fav_period option[value="'+select_box+'"]').remove();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:59:28.833

```
$(".commonClassForThreeSelects").change(function()
{
    var firstSelect = $(this);

    var value = $(this).find(':selected').value();
    $(".commonClassForThreeSelects").each(function()
    {
        if(firstSelect = $(this))
            return;

        $(this).find('option').show();
        $(this).find('option[value=' + value +']').hide();
    });
}); 
```

这对你有什么作用？它不仅限于第一个选择，如果从任何下拉列表中选择了一个值，其他选项将隐藏该值的选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:08:33.457

看到这个[小提琴](http://jsfiddle.net/hsalama/wW8Cv/)

您可以通过组合最后两个语句来进一步优化它，但这应该可以帮助您开始

# matlab - 如何调用matlab

> ID：11946220
> 
> 赞同：-1
> 
> 时间：2012-08-14T05:27:28.613
> 
> 标签：matlab, vba, excel

我有问题。我不知道使用 VBA excel 调用 Matlab 的代码是什么。

我尝试使用

```
matlabinit 
```

但是在我运行它之后，它不起作用并且出现错误消息`"sub or function not defined`“

伙计们，我有这段代码，但我无法运行它。

```
Sub jadwal()
'*************************************************************
'Unprotect sheets
'*************************************************************
Sheets("Hasil_jadwal_baru").Select
ActiveSheet.Unprotect
'*************************************************************
'Clear the previous schedule
'*************************************************************
Sheets("Hasil_jadwal_baru").Select
Range("A1:CG14").Select
Selection.ClearContents
'*************************************************************
'Clear the previous variable in MATLAB and set up the application
'*************************************************************

Application.DisplayAlerts = False
Application.Run "matlabinit"
MLEvalString "clear;"
MLEvalString "clc;"
'*************************************************************
'Send input to MATLAB
'*************************************************************
MLPutMatrix "ic_april", Range("ic_april")
MLPutMatrix "ic_juni", Range("ic_juni")
MLPutMatrix "ic_sept", Range("ic_sept")
MLPutMatrix "ic_libur_april", Range("ic_libur_april")
MLPutMatrix "ic_libur_juni", Range("ic_libur_juni")
MLPutMatrix "ic_libur_sept", Range("ic_libur_sept")
'*************************************************************
'Solve the problem via MATLAB and LP-SOLVE
'*************************************************************
MLEvalString "fixuntukmin"
'*************************************************************
'Send the result to EXCEL
'*************************************************************
MLGetMatrix "hasil_jadwal", "Hasil_jadwal_baru"
MatlabRequest
'*************************************************************
'Close MATLAB
'*************************************************************
MLClose
MLAutoStart "no"
Application.DisplayAlerts = True

'*************************************************************
'Finish Alarm
'*************************************************************

'*************************************************************
'Reprotect sheets
'*************************************************************
Sheets("Hasil_jadwal_baru").Select
ActiveSheet.Protect DrawingObjects:=True, Contents:=True, Scenarios:=True _
        , AllowFormattingCells:=True, AllowFormattingColumns:=True, AllowFormattingRows:=True

End Sub 
```

你能帮助我吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:54:40.723

听起来您只需要在 VBA 代码中添加对电子表格链接 EX 的引用。选择工具 -> 参考，然后勾选电子表格链接 EX 库。之后它应该工作。

或者，您可以调用插件函数而不使用 application.run 添加引用。所以试试 `application.run "matlabinit"`。但我认为在这种情况下添加参考是可取的，因为您不太可能分发调用 matlab 的电子表格。

您是否还确定已安装插件？在 excel 2010 中，单击开发人员选项卡，选择插件（带有大金色齿轮图标）并勾选电子表格链接 Ex Ver... 以用于 Matlab。然后进入 VBA 并如上所述添加引用。

# php - wordpress 中的动态页面标题

> ID：11946226
> 
> 赞同：0
> 
> 时间：2012-08-14T05:28:39.367
> 
> 标签：php, mysql, wordpress

我正在使用外部数据库在 wordpress 网站上工作，以动态填充具有不同相机规格的单个 wp 页面。所有这些都运行良好，最后一个障碍是：

如何强制 WP 使用我的 url-query 作为页面标题？

我尝试了添加的简单解决方案

```
<?php echo $_GET['kamera']; ?> 
```

在标题字段中，但并不奇怪，这不是由 wordpress 解析的。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:21:26.200

尝试：

```
function your_custom_wp_title() {
global $wp_query;
$title = '';

if ( $wp_query->query_vars( 'kamera' ) ) { //or $GET['kamera'] 
    $title = 'kamera';
}

return $title;
}

add_filter( 'wp_title', 'your_custom_wp_title', 10, 3 ); 
```

# android - Android HTML 占位符

> ID：11946227
> 
> 赞同：0
> 
> 时间：2012-08-14T05:28:42.843
> 
> 标签：android

如何将动态字符串传递给 HTML 文档以替换不同的占位符？

即 HTML 占位符 %title% 被标题的动态字符串替换

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:40:55.110

在 HTML 中标记占位符 - 然后我会加载我的 HTML：**`%NAME%`**

```
String template = Utils.inputStreamToString(assets.open("html/template.html")); 
```

然后我会用我想要的东西替换所有动态部分：

```
String data = template.replaceAll("%NAME%", "Alice McGee"); 
```

然后我会将它传递给我的 webView！

```
WebView webView = new WebView(this);
webView.loadDataWithBaseURL("file:///android_asset/html/", data, "text/html", "utf-8", null); 
```

# c# - 如何在 C# 中 for 循环的每次迭代之间添加一些延迟？

> ID：11946232
> 
> 赞同：0
> 
> 时间：2012-08-14T05:28:48.380
> 
> 标签：c#, asp.net-mvc-3, for-loop, timer

我正在使用 C# 开发 ASP.NET MVC3。我想在 for 循环的每次迭代之间添加一些延迟。

```
for(int i=0; i<5; i++)
{
    //some code
    //add delay here
} 
```

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T05:32:14.637

正如其他答案所说，使用[`Thread.Sleep`](http://msdn.microsoft.com/en-us/library/system.threading.thread.sleep.aspx)会使线程休眠......但鉴于您正在编写一个网络应用程序，我认为它不会按照您的意愿行事。

如果目标是让*用户*一次看到一秒钟发生的事情，那么您需要将延迟放在客户端。如果您在发送 HTTP 响应之前有五个一秒延迟，这仅意味着用户必须等待五秒才能看到您的结果页面。

听起来您应该使用 AJAX 来执行此操作。

编辑：如评论中所述，可能值得您查看[`window.setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)Javascript 调用。（我不“做” Javascript，所以恐怕我无法帮助解决这方面的任何细节。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T05:34:45.520

最简单的方法是让当前线程休眠。

```
System.Threading.Thread.Sleep (200); 
```

但请记住，Web 应用程序中的线程是非常宝贵的资源，将线程置于睡眠状态仍然会使线程保持忙碌状态。

通常没有充分的理由在 Web 应用程序中这样做。
**无论问题需要你这样做，都可以以更好的方式解决**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T06:04:18.313

已经描述的另一种方法可能是[反应式扩展（Rx）](http://msdn.microsoft.com/en-us/data/gg577609.aspx)。那里有一些方法可以及时生成值序列。在您的情况下，您可以使用以下代码。

```
var values = Observable.Generate(
        0,           // Initializer.
        i => i < 5,  // Condition.
        i => i + 1,  // Iteration.
        i => i,      // Result selector.
        i => TimeSpan.FromSeconds(1));
var task = values
    .Do(i => { /* Perform action every second. */ })
    .ToTask();
values.Wait(); 
```

该[`ToTask`](http://msdn.microsoft.com/en-us/library/hh229427%28VS.103%29.aspx)调用允许您等待[`IObservable`](http://msdn.microsoft.com/en-us/library/dd990377.aspx)完成。如果你不需要这个，你可以把它放在外面。[`Observable.Generate`](http://msdn.microsoft.com/en-us/library/hh212066%28VS.103%29.aspx)在特定时间戳生成一系列值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T05:34:09.623

您可以使用`Thread.Sleep();`

```
int milliseconds = 5000;
Thread.Sleep(milliseconds); 
```

这会使当前线程的执行停止 5 秒。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-14T05:31:05.243

像这样的东西怎么样

```
System.Threading.Thread.Sleep(1000); 
```

[Thread.Sleep 方法 (Int32)](http://msdn.microsoft.com/en-us/library/d00bd51t.aspx)

# xml - XML 对齐不正确

> ID：11946234
> 
> 赞同：1
> 
> 时间：2012-08-14T05:29:08.530
> 
> 标签：xml, jaxb

我已经使用 jaxb 创建了一个 xml 文件。然而，有些元素没有正确对齐。

当我在写字板或记事本中打开 xml 时，属性的对齐方式不适合例如，

```
<a>
  <b>
  <c>
  <d>
<e>

appears as,
  <a>
<b>
<c>
<d>
  <e> 
```

可能是什么问题呢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:03:18.443

以下内容基于[Markus](https://stackoverflow.com/a/3280116/383861)对[类似问题](https://stackoverflow.com/questions/601143/jaxb-xml-output-format-questions)的回答：

*   [JAXB XML 输出格式问题](https://stackoverflow.com/questions/601143/jaxb-xml-output-format-questions)

**输入.xml**

我们将使用具有多层嵌套的输入文档。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<foo>
    <foo>
        <foo>
            <foo>
                <foo>
                    <foo>
                        <foo>
                            <foo>
                                <foo>
                                    <foo/>
                                </foo>
                            </foo>
                        </foo>
                    </foo>
                </foo>
            </foo>
        </foo>
    </foo>
</foo> 
```

**富**

以下是我们将映射到 XML 的域模型。

```
package forum601143;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Foo {

    private Foo foo;

    public Foo getFoo() {
        return foo;
    }

    public void setFoo(Foo foo) {
        this.foo = foo;
    }

} 
```

**演示**

在我们的演示代码中，我们将解组文档，然后将其编组。我已经指定`Marshaller`应该格式化输出。

```
package forum601143;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Foo.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum601143/input.xml");
        Foo foo = (Foo) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(foo, System.out);
    }

} 
```

**输出 - JAXB RI**

RI 中的缩进以 8 为模，因此我们看到以下输出。由于 JAXB RI 正在按照设计的方式运行，因此没有针对此问题的“修复”。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<foo>
    <foo>
        <foo>
            <foo>
                <foo>
                    <foo>
                        <foo>
                            <foo>
<foo>
    <foo/>
</foo>
                            </foo>
                        </foo>
                    </foo>
                </foo>
            </foo>
        </foo>
    </foo>
</foo> 
```

**输出 - EclipseLink JAXB (MOXy)**

使用另一个 JAXB ( [JSR-222](http://jcp.org/en/jsr/detail?id=222) ) 实现，例如[MOXy](http://www.eclipse.org/eclipselink/moxy.php)并不能证明这种行为。要将 MOXy 用作您的 JAXB 提供程序，请参阅： [http](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html 。

```
<?xml version="1.0" encoding="UTF-8"?>
<foo>
   <foo>
      <foo>
         <foo>
            <foo>
               <foo>
                  <foo>
                     <foo>
                        <foo>
                           <foo/>
                        </foo>
                     </foo>
                  </foo>
               </foo>
            </foo>
         </foo>
      </foo>
   </foo>
</foo> 
```

# iphone - 如何从另一个类中的方法接收返回的数据

> ID：11946240
> 
> 赞同：-3
> 
> 时间：2012-08-14T05:29:50.827
> 
> 标签：iphone, objective-c, ios, methods, nsmutablearray

我正在从另一个类调用一个方法，该方法返回一个 NSMutableArray 但是我不确定如何从该方法接收返回的数据...

我这样称呼它

```
ResultItem *resultItem = [[ResultItem alloc] init];
[resultItem startSortingTheArray:myObjectArray]; 
```

然后在 ResultItem 类中，我正在设置这样的方法

```
- (NSMutableArray *)startSortingTheArray:(NSMutableArray *)unsortedArray
{
//... blaa blaa blaaa then....
return unsortedArray; // how do I capture this value in the other class I called it from?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:38:20.603

```
- (NSMutableArray *)startSortingTheArray:(NSMutableArray *)unsortedArray 
```

方法为您提供一个 NSMutableArray 作为回报......只需将它存储在一个变量中！

```
NSMutableArray *val=[resultItem startSortingTheArray:myObjectArray]; 
```

# sql - 为什么 ORA_ROWSCN 可以在 SELECT 子句中使用，但不能在 GROUP BY 子句中

> ID：11946254
> 
> 赞同：2
> 
> 时间：2012-08-14T05:31:09.250
> 
> 标签：sql, oracle

今天找了一个sql来检查一个表的修改，如下图：

```
SELECT MODEL_ID, STATUS_ID, COUNT(*) as QUANTITY, ORA_ROWSCN as CHANGE_NUM
FROM DEVICE 
GROUP BY MODEL_ID, STATUS_ID 
```

当我在 DEVICE 表中添加一条记录时，结果的 QUANTITY 增加了，但 CHANGE_NUM 没有改变。

然后我惊讶地发现 ORA_ROWSCN 不是 GROUP BY 子句的一部分，是因为 ORA_ROWSCN 是伪列吗？

当我更改`ORA_ROWSCN`为`MAX(ORA_ROWSCN)`时， CHANGE_NUM 按预期增加。

那么我们在第一个 sql 中得到的 ORA_ROWSCN 是什么？组的第一个更改数量？这种用法的含义是什么？

PS：我使用的是 Oracle 数据库 11g

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:50:54.143

> “我惊讶地发现 ORA_ROWSCN 不是 GROUP BY 子句的一部分，是因为 ORA_ROWSCN 是伪列吗？”

是的。您可以将 ORA_ROWSCN 替换为另一个伪列，如 SYSDATE，并且您的查询仍然有效。

> “当我向 DEVICE 表添加一条记录时，结果的 QUANTITY 增加了，但 CHANGE_NUM 没有改变”

根据[文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/pseudocolumns007.htm#BABFAFIC)，“Oracle 通过为该行所在的块*提交的事务跟踪 SCN。”* （强调我的）。因此，如果您没有使用 ROWDEPENDENCIES 跟踪 SCN（这是默认设置），那么您将看到 ORA_ROWSCN 的值是最后提交的事务的 SCN。在有人（不一定是您）发出 COMMIT 之前，CHANGE_NUM 不会改变。

请注意，如果您一直在使用带有 ROWDEPENDENCIES 的表，则 ORA_ROWSCN 函数将返回 null，直到您发出提交。

在任何一种情况下，当您执行聚合查询时，ORA_ROWSCN 的值是块（或表 - 我认为 - 当使用 ROWDEPENDENCIES 时）的最大值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:45:41.943

请参阅以下链接：

[Oracle® 数据库 SQL 参考 -> ORA_ROWSCN 伪列](http://docs.oracle.com/cd/B19306_01/server.102/b14200/pseudocolumns007.htm)

[http://asktom.oracle.com -> ORA_ROWSCN 奇怪的行为](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:517105100346104196)

# google-maps-api-3 - 触发点击来自页面其他位置的链接的 Google Map API3 标记

> ID：11946255
> 
> 赞同：0
> 
> 时间：2012-08-14T05:31:24.290
> 
> 标签：google-maps-api-3, google-maps-markers

我一直在阅读许多类似的线程，但看不到如何在我的代码中进行这项工作......任何建议将不胜感激。

我通过 AJAX 设置了许多标记，并根据 JSON 结果中返回的数据在我的地图下方创建了一个表格。我想在我的数据表中创建一个可单击的链接，该链接将模拟对地图上相应标记的单击，并打开已经为实际单击标记定义的信息窗口...

```
function display( json_results ) {

        $("#map").gmap3({action:'clear'});

        $("#map").gmap3(
            {action: 'init',
              options:{
                center:true,
                zoom:13,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                mapTypeControl: true,
                mapTypeControlOptions: {
                        style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
                },
                navigationControl: true,
                scrollwheel: true,
                streetViewControl: true
                }
            },
            {action: 'addMarkers',
                radius:100,
                markers: json_results,
                clusters:{
                            maxZoom: 10,
                            // This style will be used for clusters with more than 0 markers
                            20: {
                            content: '<div class="cluster cluster-1">CLUSTER_COUNT</div>',
                            width: 53,
                            height: 52
                            },
                            // This style will be used for clusters with more than 20 markers
                            50: {
                            content: '<div class="cluster cluster-2">CLUSTER_COUNT</div>',
                            width: 56,
                            height: 55
                            },
                            // This style will be used for clusters with more than 50 markers
                            100: {
                            content: '<div class="cluster cluster-3">CLUSTER_COUNT</div>',
                            width: 66,
                            height: 65
                            }

                    },
                marker: {
                    options: {
                        //icon: new google.maps.MarkerImage('http://maps.gstatic.com/mapfiles/icon_green.png'),
                        clickable: true
                        },
                    events:{
                        click: function(marker,event,data) {
                            $(this).gmap3({action: 'clear', name : 'infowindow'});
                            $(this).gmap3({action: 'addinfowindow', anchor: marker, options: { content:
                            '<div class="text"><strong><div style="color:navy;">' + data.itype + '</strong><br/><div id="address" snum="' + data.streetnum + '" snam="' + data.streetnam + '" styp="' + data.streettyp + '">'+ data.iaddress +'</div><br/>' + data.inum + '<br/>'+ data.datetime +'</div><hr>'+data.notes+'</div>'} })
                        },  
                        mouseover: function(marker, event, data){
                            $(this).gmap3(
                                { action:'clear', name:'overlay'},
                                { action:'addOverlay',
                                    latLng: marker.getPosition(),
                                    content:    '<div class="infobulle">' +
                                                '<div class="bg"></div>' +
                                                '<div class="text">' + data.itype +'</div>' +
                                                '</div>' +
                                                '<div class="arrow"></div>',
                                    offset: {
                                        x:-46,
                                        y:-73
                                    }
                                });
                        },
                        mouseout: function(){
                            $(this).gmap3({action:'clear', name:'overlay'});
                            }

                    } //end events
                } // end marker

                }
                ,{action:"autofit"} //end action

                );
            }; 
```

当页面被加载并且带有搜索结果的表单被提交时，我从一些 JQUERY 调用这个函数。一切都完美无缺。现在我想在地图外添加一个链接，该链接将触发对相应标记的点击...

例如：`<a href="javascript:google.maps.event.trigger(markers[i], "click")">See This Infowindow</a>`其中 i 将是我在 JSON 中传递的值，同时我将 lat/long 和 infowindow 数据传递给上面的函数。我假设要发送用于映射的第一个数据数组是 0，第二个是 1 等等，所以我会让第一个链接的 i=0，第二个链接的 i=1 等等......

不确定该逻辑是否有意义，也许有更好的方法将引用传递给标记......

谁能帮我解决这个问题？也许是一个简单的函数，我可以将标记的值传递到我现有的代码中？或者任何你认为最好的方法......

谢谢大师！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:44:03.480

您是否尝试定义自己的函数来处理点击？

```
function myclick(i) {
    google.maps.event.trigger(markers[i],"click");
  } 
```

和

```
 function setHTML() {
    var html = "";
    for (var i=0; i<markers.length; i++) {
        html += '<a href="javascript:myclick(' + i + ')">' + marker[i].id + '<\/a>';
    }
    document.getElementById("table").innerHTML = html;
  } 
```

# git - git reset --hard . 是不是把所有东西都删了？

> ID：11946265
> 
> 赞同：2
> 
> 时间：2012-08-14T05:32:59.187
> 
> 标签：git, github

我有一个分支开发人员和一个分支前沿。

我在 dev 上有一个 SHA1 id 说 4356xyz 的提交。我希望那是最前沿的。所以我检查了尖端并做了

`git reset --hard 4356xyz`

现在，当我这样做时，`git log`我看到两个分支的历史都变得相同。有没有办法可以在重置之前恢复尖端分支的先前历史记录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T05:35:09.763

`git reset --hard 4356xyz`拿起你的`cutting-edge`分支并将其指向那个提交。如果那是指向同一个提交`dev`，那么是的，它们将共享相同的历史记录，因为它们现在指向同一个提交。

在您告诉 get 指向它*之前*，您可以检查`git reflog`以找出您的分支`cutting-edge`指向的内容 commit 。*`4356xyz`*

 *将来，如果您想将一个分支的提交添加到另一个分支，您需要合并您的分支，或者挑选特定的提交。

要拉*只是*提交`4356xyz`，你会`git checkout cutting-edge`然后`git cherry-pick 4356xyz`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T05:35:15.583

是的，您可以使用该`git reflog`命令显示分支头所在位置的历史记录。选择您想要的提交，并`git reset --hard`与该提交一起使用。*

# c# - 如何从不同的表中获取值并插入 ID？

> ID：11946267
> 
> 赞同：-2
> 
> 时间：2012-08-14T05:33:10.060
> 
> 标签：c#, asp.net, sql-server-2008

```
dbo.confirmend_Orders 
EmpID (FK) | Client (FK) | StartDate | EndDate | **LocationID (FK) | POCID (FK)** 
```

在我的 .aspx 页面中，我有用于 EmpId、clientID 的控件以将它们插入上表，但没有用于 LocationID 和 POCID。

如何从其他表中获取 LocationID 和 POCID 的值并将它们插入到表 dbo.ConfirmEnd_Orders 中？

```
Dbo.Contacts
Address1| Address2 | CityID (FK) | ContactID(PK)

dbo.POC
FName| Lastname | Mob1 | POCID (PK) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:40:30.263

```
INSERT INTO dbo.confirmend_Orders (LocationId,POCID) 
SELECT locationId,POCID FROM dbo.anotherTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:41:57.300

```
 INSERT INTO dbo.ConfirmEnd_Orders(EmpId,clientID,LocationID,POCID)
    select  vEmpId, vclientID,t2.LocationID,t3.POCID from
    dbo.ConfirmEnd_Orders t1 inner join dbo.Contacts t2
    on t1.LocationID = t2.LocationID inner join dbo.PointOfContact t3 on t1.POCID =t3.POCID 
```

# php - 登录页面的记住我功能

> ID：11946268
> 
> 赞同：-5
> 
> 时间：2012-08-14T05:33:22.667
> 
> 标签：php

我需要在我的代码中记住我的功能。我设置了会话，但我不知道设置 cookie 以记住我。请在我的登录页面下方设置记住我的代码。我尝试了很多网站，但没有得到准确的输出。

```
<?php 
session_start();
ob_start();
error_reporting (E_ALL ^ E_NOTICE);
$con=mysql_connect("localhost","root","");
mysql_select_db("pratice") or die (mysql_error());
$username=$_POST['username'];
$password=$_POST['password'];
$remember=$_POST['remember'];

if(isset($_POST['submit']))
{
$sql="select id, username FROM `action2` WHERE username='$username' and password='$password'";
$result=mysql_query($sql);
$num=mysql_num_rows($result);

if($num>0)
{
    $row=mysql_fetch_array($result);
    $username=$row['username'];
    $_SESSION['id'] = $row['id'];
    $_SESSION['username']=$username;
    header("location:userpage.php");
}
else 
{
echo"<p><center><b><font color='red'>Incorrect Username or Password!</font></b></center></p>";
}
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Log In</title>
</head>
<body>
<form action="<?php $_SERVER['PHP_SELF']; ?>" method="post"> 
<table align="center">
<tr>
    <td colspan="2">LOGIN</td>
</tr>
<tr>
    <td>Username</td>
    <td><input type="text" name="username" /></td>
</tr>
<tr>
    <td>Password</td>
    <td><input type="password" name="password" /></td>
</tr>
<tr>
    <td align="right"><input name="remember" type="checkbox" value=""/></td>
    <td>Remember me</td>
</tr>
<tr>
    <td colspan="2" align="center"><input type="submit" name="submit" value="LogIn" /></td>
</tr>
</table>
</form>
<br />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:48:54.923

在您当前的文件中，检查`$_SESSION['id']`and是否`$_SESSION['username']`已设置。我是的，您可以直接将用户重定向到`userpage.php`.

```
if($_SESSION['id'] != "" && $_SESSION['username'] != "")
{
    header("location:userpage.php");
} 
```

如果您想在检查“记住我”时执行此操作，您可以使用 javascript 或 jquery。

# android - Android：检测活动何时返回上一个活动

> ID：11946271
> 
> 赞同：11
> 
> 时间：2012-08-14T05:33:57.453
> 
> 标签：android

我有一个带有 listView 的活动 A，用户单击启动 Activity B 的任何项目。根据用户在活动 B 中的操作，可能会更改活动 A 上的 listView。

所以我的问题：

当用户从活动 B 返回到活动 A 时，如何告诉活动 A 已恢复？

我希望能够在活动 A 返回时发出刷新 listView 的信号。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T05:41:03.303

您可以在活动 A中添加代码以刷新**列表视图。**`onResume()`

```
@Override
protected void onResume() {
    super.onResume();
    //Code to refresh listview
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-05-14T13:52:15.337

使用`startActivityForResult`是最优雅的方式。`OnResume`每次您关闭和打开应用程序时都会发生这种情况，这将使用更多资源，尤其是在您刷新大量数据时。

在活动顶部将请求代码声明为常量：

```
public static final int OPEN_NEW_ACTIVITY = 123456; 
```

把它放在你开始新活动的地方：

```
Intent intent = new Intent(this, NewActivity.class);
startActivityForResult(intent, OPEN_NEW_ACTIVITY); 
```

活动结束后做点什么。文档建议您使用`resultCode`，但根据具体情况，您的结果可以是`RESULT_OK`或`RESULT_CANCELED`按下按钮时。所以我会把它排除在外。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == OPEN_NEW_ACTIVITY) {
        // Refresh your ListView here
        // ....
    }
} 
```

出于某种原因，我在将其放入 Fragment 时遇到了麻烦。所以你必须把它放在活动中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-22T00:04:13.867

我有另一种方法可以做到这一点，在某些情况下可能会派上用场 - 我保留私有 Bundle 变量，我们称之为它`state`，当我开始一项活动时，我输入了一个字符串，说明我开始了哪个活动：

```
state.putString("startedActivity", "A");
Intent intent = new Intent(this, ActivityA.class);
startActivity(intent); 
```

我存储状态包以保持设备更改（旋转等）：

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    super.onSaveInstanceState(savedInstanceState);
    savedInstanceState.putAll(state);
} 
```

在`onCreate`我加载状态：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (savedInstanceState == null) {
        savedInstanceState = new Bundle();
    }
    state = savedInstanceState;
} 
```

然后在`onResume`方法中，我可以检查我是否只是在某个活动中。请注意，我立即从状态中删除了字符串，因此它不会在旋转更改等时再次出现。

```
public void onResume() {
    super.onResume();
    if (state.getString(STARTED_ACTIVITY, null) != null) {
        // we just came from another activity!
        state.putString(STARTED_ACTIVITY, null); // clear the state
        // do whatever you need
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T05:37:43.337

使用 startActivityForResult 启动 B 活动。并在活动 A 的 onActivityResult() 方法上检查活动 B 的数据。对 listView 使用 notifyDataSetChanged 来更新内容。

# mysql - 与组加入自我的mysql

> ID：11946272
> 
> 赞同：4
> 
> 时间：2012-08-14T05:33:59.170
> 
> 标签：mysql, pivot

桌子

```
 id | name | year 
```

数据：

```
 1  | ham   | 2006
 2  | ham   | 2007
 3  | ham   | 2008
 4  | amm   | 2007
 5  | amm   | 2008
 6  | inn   | 2009 
```

现在我正在尝试构建一个给我以下输出（或类似输出）的 sql

```
 name  | y1   | y2   | y3   | y4    
 ham   | 2006 | 2007 | 2008 | null
 amm   | null | 2007 | 2008 | null
 inn   | null | null | null | 2009 
```

当进行多个（自我）左连接时，我有点明白这一点，但前提是为该名称设置了 2006。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T05:44:57.793

您想要所谓的“枢轴”，而您需要的是有条件的`sum`：

```
select
   name,
   sum(year = 2006) as y1,
   sum(year = 2007) as y2,
   sum(year = 2008) as y3,
   sum(year = 2009) as y4
from mytable
group by name; 
```

没有加入，没有混乱，没有大惊小怪。它会表现得非常好。

这是有效的，因为在 mysql 中，`true`is`1`和`false`is `0`，所以对一个条件求和计算它有多少次是真的！

请注意，`null`对于“无数据”年份，这将为您提供零而不是 s，这可能会更好。如果您真的想要空值，请使用`if(sum(year = 2006) = 0, null, sum(year = 2006)) as y1`等，但希望您不需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T05:40:38.567

这是给出您的示例（[sqlfiddle](http://sqlfiddle.com/#!2/d6a91/2)）的一种方法：

```
SELECT t1.name, MAX(y1.year) AS y1, MAX(y2.year) AS y2, MAX(y3.year) AS y3, MAX(y4.year) AS y4
FROM theTable t1
LEFT OUTER JOIN theTable y1 ON t1.name = y1.name AND y1.year = 2006
LEFT OUTER JOIN theTable y2 ON t1.name = y2.name AND y2.year = 2007
LEFT OUTER JOIN theTable y3 ON t1.name = y3.name AND y3.year = 2008
LEFT OUTER JOIN theTable y4 ON t1.name = y4.name AND y4.year = 2009
GROUP BY t1.name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T05:45:22.437

如果您不介意结果的结构，可以使用`group_concat`：

```
select name , group_concat(ifnull(year ,'null') separator ', ') 
              as years from table 
```

结果将显示为：

```
name  | years
ham   | 2006 , 2007 , 2008 , null
amm   | null , 2007 , 2008 , null
inn   | null , null , null , 2009 
```

# r - 使用 R 中的 glm 在多变量分析中计算 R 平方

> ID：11946281
> 
> 赞同：0
> 
> 时间：2012-08-14T05:35:08.657
> 
> 标签：r, glm

我正在使用 step() 函数在 R 中进行反向消除。现在，我正在尝试查看每个自变量如何与它们的 AIC、F 和 P 值一起排名。

```
step(Mod1,direction="backward",test="F")

                      Df Deviance    AIC  F value    Pr(>F)    
<none>                     6127.4 6215.4                       
- as.factor(var2)      3   6133.6 6215.6   2.6103 0.0497127 *  
- as.factor(var28)     2   6131.7 6215.7   2.7292 0.0653326 .  
- as.factor(var32)     2   6131.8 6215.8   2.7794 0.0621388 .  
- as.factor(var30)     1   6130.3 6216.3   3.6075 0.0575550 .  
- as.factor(var20)     1   6131.9 6217.9   5.7262 0.0167368 *  
- as.factor(var9)      1   6133.5 6219.5   7.6627 0.0056507 ** 
- as.factor(var15)     1   6133.7 6219.7   7.8952 0.0049691 ** 
- as.factor(var10)     1   6133.8 6219.8   8.1314 0.0043621 ** 
- as.factor(var14)     1   6134.7 6220.7   9.2528 0.0023592 ** 
- as.factor(var33)     2   6137.1 6221.1   6.0993 0.0022552 ** 
- as.factor(var16)     1   6135.9 6221.9  10.6794 0.0010881 ** 
- as.factor(var19)     4   6142.5 6222.5   4.7684 0.0007674 ***
- as.factor(var23)     2   6138.9 6222.9   7.2488 0.0007158 ***
- as.factor(var24)     2   6139.0 6223.0   7.3060 0.0006761 ***
- as.factor(var13)     1   6139.3 6225.3  14.9746 0.0001099 ***
- as.factor(var11)     1   6141.0 6227.0  17.1558 3.480e-05 ***
- as.factor(var6)      2   6149.3 6233.3  13.8110 1.030e-06 ***
- as.factor(var22)     2   6150.6 6234.6  14.6341 4.534e-07 ***
- as.factor(var8)      4   6155.4 6235.4   8.8624 3.893e-07 ***
- as.factor(var3)      4   6172.7 6252.7  14.3214 1.189e-11 ***
- as.factor(var1)      1   6230.8 6316.8 130.7555 < 2.2e-16 ***
- as.factor(var5)      4   6245.6 6325.6  37.3782 < 2.2e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
```

接下来，我想

i) 根据 p 值从最重要（顶部）到不太重要（底部）对变量进行排序

ii) 获取每个自变量的 R 平方并显示在最后一列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:58:23.477

将结果保存为模型。

```
final_model <- step(Mod1,direction="backward",test="F")
# drop1 will give you the "type II anova" (the effect of dropping)
drop_anova <- drop1(final_model, test = 'F')
#  or the more traditional `anova` which gives the SS as 
# if they are sequentially  added to the model
anova(final_model) 
```

您可以使用这些按 p 值进行排名。请参阅我对每个变量的 r-squared 的评论——我不知道你的意思。

# css - Safari 6 Inspector 是否显示 CSS 继承链？

> ID：11946284
> 
> 赞同：0
> 
> 时间：2012-08-14T05:35:21.450
> 
> 标签：css, safari

我无法在 Mac Safari 6 Inspector 中找到元素的 CSS 样式规则继承列表。这样的事情存在吗？

ADD：我已经看到了它的外观，但与 Chrome 对应物相比，它似乎仍然受到严重限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:00:23.300

它`{}`在右侧面板的部分下方（ctrl+shift+3 将其调出）；在下面的屏幕截图中，我正在“询问者”部分检查您的用户名：

![在此处输入图像描述](../Images/c90729461b602ceec359abd527381a0c.png)

IMO Safari 6 检查工具似乎比以往任何时候都更强大，重点关注 JS 属性和 DOM。

# workflow - SDL Tridion 工作流程下一个活动链接

> ID：11946285
> 
> 赞同：0
> 
> 时间：2012-08-14T05:35:34.467
> 
> 标签：workflow, tridion

我有一个用例，我需要向用户/组发送邮件，以便直接单击此用户可以完成一个活动。请提供我可以通过添加我的活动 tcmCRI 来完成活动的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:13:24.980

这个的用例是什么？这违背了工作流程的想法。正在完成活动的用户应该在完成活动之前至少查看项目。通过完成活动，他负责批准项目或声称他对它执行了一些操作，并且您希望让用户有可能在不看的情况下批准某事？最接近它的是为 OnActivityFinish 事件或自动活动创建事件处理程序，当活动被分配给他时，它将向用户或组发送电子邮件。在这封信中，您可以链接到 CME 中的用户工作项，用户将在其中看到分配给他的内容并决定他应该做什么。

完成活动不仅仅是 1 个动作。用户可能需要选择下一个活动，或者可能想要留言或重新分配活动。如果你真的想要，你可以创建一个提供这些功能的 web 服务

# certificate - 由于 TLS 解密错误导致 TLS 握手失败

> ID：11946288
> 
> 赞同：3
> 
> 时间：2012-08-14T05:36:11.200
> 
> 标签：certificate, ssl, pki

我正在尝试调试与 TLS 相关的问题。在两个应用程序客户端 A 和服务器 B 之间设置了 TLS。A 和 B 都交换了证书，我已经验证证书具有正确的扩展名，并且也通过其根 CA 成功验证。叶证书的根 CA 已上传并可供应用程序信任存储使用。在 wireshark 中的 TLS 期间，我看到以下消息流：

```
CLIENT : Client Hello 
SERVER : Server Hello , Certificate , Certificate request , Server Hello Done
CLIENT : Certificate , Client key exchange 
CLIENT : Certificate Verify , Change Cipher spec , Encrypted Handshake Message 
SERVER : Alert : Level Fatal, Description : Decrypt Error ) 
```

TLS日志还显示：

```
TLS protocol error(ssl reason
code=block type is not 01 [106]),lib=rsa routines
[4],fun=RSA_padding_check_PKCS1_type_1 [112], errno=12 for
192956|<CLID::StandAloneCluster><NID::xxx.xxx.xxx.xxx><CT::0,0,0,0.0><IP::>
192956|<DE
V::><LVL::Error><MASK::0800> 
```

任何可能导致服务器端解密错误的指针？TLS 交换期间的证书很好，可以正确链接到它们的根证书。

任何指针都会有很大帮助！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-07T17:03:32.643

显然发生的事情是服务器无法解密客户端发送给他的第一条加密消息（更改密码规范之后的“完成”），该消息应该由客户端“更改”中指定的密码套件加密和验证密码规范”-消息。

这意味着例如服务器并不真正拥有来自它提供给带有证书或类似东西的客户端的公钥的私钥。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-17T20:13:23.287

尝试以下命令：

```
openssl s_client -connect mail.example.com:25 -starttls smtp 
```

# javascript - 在没有加载和 .ready 函数的情况下编写 javascript

> ID：11946290
> 
> 赞同：0
> 
> 时间：2012-08-14T05:36:23.570
> 
> 标签：javascript, jquery

有没有办法编写 javascript 代码而不使用`load()`函数和 jquery`.ready()`来执行 javascript 代码？如果是，那么我们该怎么做？请提供此类代码的一些教程链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:37:37.990

是的，但你为什么要这样做？将您的脚本放在结束标记之前的底部`</body>`，您不需要使用`document.ready()`.

链接：

*   [http://encosia.com/dont-let-jquerys-document-ready-slow-you-down/](http://encosia.com/dont-let-jquerys-document-ready-slow-you-down/)
*   [我可以避免在每个 JavaScript 文件中调用 $(document).ready() 吗？](https://stackoverflow.com/questions/8364498/can-i-avoid-putting-document-ready-calls-in-each-javascript-file)
*   [jQuery：如果页面底部有外部 JS，为什么要使用 document.ready？](https://stackoverflow.com/questions/1438883/jquery-why-use-document-ready-if-external-js-at-bottom-of-page)

# java - 如何将数据直接从数据库填充到 Jtable

> ID：11946293
> 
> 赞同：1
> 
> 时间：2012-08-14T05:36:46.830
> 
> 标签：java, swing, jdbc, jtable

我已经显示 Jtable 取决于数据库中的特定列，而我的 jtable 中的最后两列是图像字段。如何在不影响最后两列的情况下动态更改列。请告诉我。怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T05:44:08.720

使用`Vector`自`java.util.Collection`

**[请参阅http://www.roseindia.com](http://www.roseindia.com)**中的此示例****

 **```
import java.sql.*;
import java.util.*;
import javax.swing.*;
import javax.swing.table.TableColumn;

public class JTableResultSet {
    public static void main(String[] args) {
        Vector columnNames = new Vector();
        Vector data = new Vector();
        JPanel panel = new JPanel();   //
        try {
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            Connection con = DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/test", "root", "root");
            String sql = "Select name,address from user";
            Statement statement = con.createStatement();
            ResultSet resultSet = statement.executeQuery(sql);
            ResultSetMetaData metaData = resultSet.getMetaData();
            int columns = metaData.getColumnCount();
            for (int i = 1; i <= columns; i++) {
                columnNames.addElement(metaData.getColumnName(i));
            }
            while (resultSet.next()) {
                Vector row = new Vector(columns);
                for (int i = 1; i <= columns; i++) {
                    row.addElement(resultSet.getObject(i));
                }
                data.addElement(row);
            }
            resultSet.close();
            statement.close();
        } catch (Exception e) {
            System.out.println(e);
        }
        JTable table = new JTable(data, columnNames);
        TableColumn column;
        for (int i = 0; i < table.getColumnCount(); i++) {
            column = table.getColumnModel().getColumn(i);
            column.setMaxWidth(250);
        }
        JScrollPane scrollPane = new JScrollPane(table);        panel.add(scrollPane);               
        JFrame frame = new JFrame();
        frame.add(panel);         //adding panel to the frame
        frame.setSize(600, 400); //setting frame size
        frame.setVisible(true);  //setting visibility true
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T05:38:41.860

`TableModel.setValueAt(Objet value, int row, int col)`**

# path - 转储包含来自 g++ 的路径

> ID：11946294
> 
> 赞同：73
> 
> 时间：2012-08-14T05:36:49.893
> 
> 标签：path, include, g++, build-automation

我正在尝试编写一个小构建脚本，并想确定包含是否是系统包含。所以我想让**g++**告诉我它正在使用的包含路径。

`cpp -v`似乎是最好的选择，但它没有给我 C++ 路径。

所以我尝试了：

```
g++ -Xpreprocessor -v 
```

这不太正确 - **g++**捕获`-v`它自己的详细输出。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-08-14T05:36:49.893

来自 Jonathan Wakely 的一个更好的选择（也适用于 clang）：

```
g++ -E -x c++ - -v < /dev/null 
clang++ -E -x c++ - -v < /dev/null 
```

我注意到 cpp 中有一个用于指定语言的标志。这就像一个魅力。

```
cpp -xc++ -v < /dev/null

#include "..." search starts here:
#include <...> search starts here:
 /usr/local/Cellar/gcc/4.7.0/gcc/lib/gcc/x86_64-apple-darwin11.4.0/4.7.0/../../../../include/c++/4.7.0
 /usr/local/Cellar/gcc/4.7.0/gcc/lib/gcc/x86_64-apple-darwin11.4.0/4.7.0/../../../../include/c++/4.7.0/x86_64-apple-darwin11.4.0
 /usr/local/Cellar/gcc/4.7.0/gcc/lib/gcc/x86_64-apple-darwin11.4.0/4.7.0/../../../../include/c++/4.7.0/backward
 /usr/local/Cellar/gcc/4.7.0/gcc/lib/gcc/x86_64-apple-darwin11.4.0/4.7.0/include
 /usr/local/include
 /usr/local/Cellar/gcc/4.7.0/gcc/include
 /usr/local/Cellar/gcc/4.7.0/gcc/lib/gcc/x86_64-apple-darwin11.4.0/4.7.0/include-fixed
 /usr/include
 /System/Library/Frameworks
 /Library/Frameworks
End of search list. 
```

刚刚注意到它对`-x c++ to be -xc++`gcc 4.2很重要

# macos - 在 Mac 上运行时分配失败

> ID：11946297
> 
> 赞同：0
> 
> 时间：2012-08-14T05:37:19.670
> 
> 标签：macos, node.js, jsdom, contextify

我有一个在 PC 和 Linux 上运行良好的 node.js 项目，但是在 Mac（Mountain Lion）上运行时，jQuery 模块不起作用。任何对窗口对象属性的赋值都会被忽略。

那是

```
if(jQuery){
   window.jQuery = jQuery;
   if(!window.jQuery){
       throw "assignment didn't have any effect";
   }
} 
```

会抛出异常。任何解决它的想法将不胜感激

对象的原型是`undefined`我希望这两件事是相关的。窗口对象是使用 jsdom.createWindow() 创建的（反过来又返回 doc.parentWindow）

似乎是由下面的行引起的

```
vm.runInContext('this', context); 
```

它返回实际对象（没有原型）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:31:40.890

问题是安装 jsdom 模块时无法编译 contextify 的副作用。这可以通过安装 make 来解决。失败的问题中的 conde 是尝试处理 contextify 的安装问题的错误处理。

在 make 上安装 make 可以通过安装开发工具（XCode for OSX 的命令行工具）来完成。安装 make 然后重新安装 contextify

# java - 遍历 DOM 解析的 XML

> ID：11946302
> 
> 赞同：0
> 
> 时间：2012-08-14T05:37:33.367
> 
> 标签：java, android, xml-parsing

> **可能重复：**
> [在android中遍历复杂的xml文件](https://stackoverflow.com/questions/11932168/traversing-complex-xml-file-in-android)

在此我正在使用 DOM 解析器解析一个 xml 文件，该解析器将 dom1 作为解析后的文档。问题是我想在此之后创建 UI，但我无法相同，因为我找不到相同的逻辑，请帮助我。这也给了我错误的*getLength()* 值。它有什么问题？

xml 在此链接中：

[http://nchc.dl.sourceforge.net/project/trialxml/options.xml](http://nchc.dl.sourceforge.net/project/trialxml/options.xml)

```
//this is function is called when i click my button
public void next123(View view){

    Element root=dom1.getDocumentElement();

    NodeList nodes=root.getChildNodes();
    create_Menu(nodes);

}

    public void create_Menu(NodeList nodes){

    for(int i=0;i<nodes.getLength();i++){
    Node node=nodes.item(i);

    if(node instanceof Element){

         Element child = (Element)node;
        String name=getTextValue(child,"Name");
        String typ=child.getAttribute("type");
        if(name!=null){
            z++;
            Log.i(TAG,"Names are:= " +name+ " ->  "+typ +"  ->  "+ z+ "  -> "+ i);  

             NodeList nod=child.getChildNodes();
            Log.i(TAG,"Length  : "+nod.getLength());

            create_Menu(nod);

            Log.i(TAG,"end");

        }
    }

 }
} 
```

在此之后我必须创建一个 UI，因为我使用 ListView 和一个 ArrayList 数组来存储我的值。问题是我必须指定一个否。到各个层面，

例如，如果我的数组是 test[]，那么

```
test[0]-> main, 

test[1]->1L1,1L2,1L3, 

test[2]->2L1, 

test[3]->2L2 

test[4]->3L1,3L2 
```

请参考xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:41:06.333

我只是举个例子，试着这样做......

```
DocumentBuilderFactory odbf = DocumentBuilderFactory.newInstance();
       DocumentBuilder odb =  odbf.newDocumentBuilder();
       InputSource is = new InputSource(new StringReader(xml));
       Document odoc = odb.parse(is);
       odoc.getDocumentElement().normalize ();    // normalize text representation
       System.out.println ("Root element of the doc is " + odoc.getDocumentElement().getNodeName());
       NodeList LOP = odoc.getElementsByTagName("locations");
       int totalPersons =LOP.getLength();
       System.out.println("Total nos of locations:"+totalPersons);

       for(int s=0; s<LOP.getLength() ; s++)
       {
           Node FPN =LOP.item(s);
           if(FPN.getNodeType() == Node.ELEMENT_NODE)
                {

           Element latlon = (Element)FPN;                                                                

               NodeList oNameList1 = latlon.getElementsByTagName("featured");                                       
               Element firstNameElement = (Element)oNameList1.item(0);
               NodeList textNList1 = firstNameElement.getChildNodes();
                featuredArr = changeToBoolean(((Node)textNList1.item(0)).getNodeValue().trim());                                    // value taken
               System.out.println("#####The Parsed data#####");
               System.out.println("featured : " + ((Node)textNList1.item(0)).getNodeValue().trim());            
               System.out.println("#####The Parsed data#####");

    }
} 
```

# c# - 从 AsyncCodeActivity 中执行 AsyncCodeActivity

> ID：11946305
> 
> 赞同：1
> 
> 时间：2012-08-14T05:38:03.417
> 
> 标签：c#, workflow-foundation-4

我被困在一个地方，我想编写一个封装另一个预先存在的活动的活动。

预先存在的 Activity 是调用 SaySpeech，它有一些参数。所需的是一个连接和一个文本（它将使用 TTS 连接到连接上）。它是一个 AsyncCodeActivity。

我正在创建一个名为 SayPassword 的新活动，它接受与 SaySpeech 相同的参数，但不是 TextToSpeak，而是 PasswordToSpeak。其前奏是：[从预先定义的单词生成一个句子](https://stackoverflow.com/questions/11931199/generate-a-sentence-from-a-pre-defined-words)

现在，在内部调用 SaySpeech 之前，我需要为其提供与收到的 SayPassword 相同的参数，并将 TextToSpeak 参数值替换为生成的 PasswordToSpeak。

除了我无法弄清楚如何在内部代码中启动 SaySpeech 活动之外，一切都已完成？我需要在 SayPassword 中调用 SaySpeech 的 BeginExecute，并使用 SayPassword 的 EndExecute 调用 EndExecute。

任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:31:25.460

CodeActivity 不允许您执行子活动，您需要改用[NativeActivity](http://msdn.microsoft.com/en-us/library/system.activities.nativeactivity.aspx)。在 Execute() 方法中，您可以使用[context.ScheduleActivity()](http://msdn.microsoft.com/en-us/library/ee473635.aspx)要求运行时为您执行另一个活动。

```
public sealed class MyActivity : NativeActivity
{
    public Activity Body { get; set; }

    protected override void Execute(NativeActivityContext context)
    {
        context.ScheduleActivity(Body);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:19:24.673

好的。经过六个小时的试验和测试，我终于开始了我的活动。这是最终代码：

```
public sealed class SayPassword : NativeActivity
{

    [RequiredArgument]
    public InArgument<ConnectionInfo> Connection { get; set; }
    [RequiredArgument]
    public InArgument<String> Password { get; set; }

    public InArgument<String> Language { get; set; }
    public InArgument<Int32?> Speaker { get; set; }

    #region Implementation
    private SaySpeech InnerSaySpeech { get; set; }

    private Variable<ConnectionInfo> TempConnectionInfo { get; set; }
    private Variable<String> TempUtterance { get; set; }
    private Variable<String[]> TempParameters { get; set; }
    private Variable<String> TempLanguage { get; set; }
    private Variable<Int32?> TempSpeaker { get; set; }
    #endregion

    public SayPassword()
    {
        TempConnectionInfo = new Variable<ConnectionInfo>();
        TempUtterance = new Variable<String>();
        TempParameters = new Variable<String[]>();
        TempLanguage = new Variable<String>();
        TempSpeaker = new Variable<Int32?>();

        InnerSaySpeech = new SaySpeech
        {
            Connection = new InArgument<ConnectionInfo>(TempConnectionInfo),
            Utterance = new InArgument<string>(TempUtterance),
            Parameters = new InArgument<string[]>(TempParameters),
            Language = new InArgument<string>(TempLanguage),
            Speaker = new InArgument<int?>(TempSpeaker)
        };
    }

    private String[] GetSentences(String password) {}

    private static string GetPlaceholderString(Int32 NumberOfPlaceholders) {}

    protected override void CacheMetadata(NativeActivityMetadata metadata)
    {
        base.CacheMetadata(metadata);

        metadata.AddImplementationVariable(TempConnectionInfo);
        metadata.AddImplementationVariable(TempUtterance);
        metadata.AddImplementationVariable(TempParameters);
        metadata.AddImplementationVariable(TempLanguage);
        metadata.AddImplementationVariable(TempSpeaker);

        metadata.AddImplementationChild(InnerSaySpeech);
    }

    protected override void Execute(NativeActivityContext context)
    {
        String[] SpeakablePassword = GetSentences(Password.Get(context));

        context.SetValue(TempConnectionInfo, Connection.Get(context));
        context.SetValue(TempUtterance, GetPlaceholderString(SpeakablePassword.Length));
        context.SetValue(TempParameters, SpeakablePassword);
        context.SetValue(TempLanguage, Language.Get(context));
        context.SetValue(TempSpeaker, Speaker.Get(context));

        context.ScheduleActivity(InnerSaySpeech);
    }
} 
```

我需要创建中间变量来映射传入的参数，以便它们可以成功地传递给内部活动。

CacheMetadata中的 Misadventures 文章[– 用代码包装内部活动](http://blogs.msdn.com/b/tilovell/archive/2010/02/26/misadventures-in-cachemetadata-wrapping-an-inner-activity-in-code.aspx)对我帮助很大。工作流框架似乎不是您日常的 c# 代码。我还有很多东西要学。希望这对其他人有用。

# javascript - 带有基本身份验证的 jQuery AJAX 跨域

> ID：11946307
> 
> 赞同：3
> 
> 时间：2012-08-14T05:38:16.707
> 
> 标签：javascript, jquery, ajax, cross-domain

我试图通过将数据拉入网页来使用 Beanstalk (beanstalkapp.com) API，这样人们就可以在不访问我的 SVN 的情况下查看它。

我正在尝试通过 jQuery 使用 AJAX 请求来访问它。代码如下，但每次都报错，无法返回数据。

```
<script type="text/javascript">
$(document).ready(function() {
    var tok = 'username' + ':' + 'password123';
        hash = btoa(tok);
        authInfo = "Basic " + hash;
    $.ajax({
        url: "http://username.beanstalkapp.com/api/changesets.json",
        beforeSend: function (xhr) { xhr.setRequestHeader ("Authorization", authInfo); },
        type: "GET",
        async: false,
        crossDomain: true,
        dataType: "json",
        success:  function(html){
            console.log(html);
        },
        error: function(html){
            console.log('error');
        }
    });
});
</script> 
```

如果我直接通过浏览器（[http://username.beanstalkapp.com/api/changesets.json](http://username.beanstalkapp.com/api/changesets.json)）访问 URL，它就可以正常工作并返回 json。但是，我无法让 AJAX 退回它。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T05:49:28.600

您将需要为跨域 ajax 请求制作代理。

通常的场景如下所示：

1.  客户端向服务器发送ajax请求
2.  您的服务器将请求转发到外部/远程服务器
3.  等待远程服务器的响应
4.  解析和处理来自远程服务器的响应
5.  将响应发送回客户端

如果您使用的是 php，您可以使用 curl 发送请求，这很容易实现。我最近写了一篇关于这个主题的文章[http://www.svlada.com/proxy-ajax-requests-curl-and-symfony-2/](http://www.svlada.com/proxy-ajax-requests-curl-and-symfony-2/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T05:50:15.033

您无法从其他域获取 json。这是一个称为[同源策略的安全问题，使用](http://en.wikipedia.org/wiki/Same_origin_policy)[JSONP](http://en.wikipedia.org/wiki/JSONP)而不是 JSON来克服它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T05:57:15.510

检查这个[jsfiddle](http://jsfiddle.net/RvWb4/)。用户名和密码不正确。输入正确的用户名和密码并再次检查。

# php - 使用 FOSUserBundle 注册期间出现白屏

> ID：11946309
> 
> 赞同：0
> 
> 时间：2012-08-14T05:38:31.090
> 
> 标签：php, symfony, fosuserbundle

在 /register 中发送表单后，我在同一页面中得到一个白屏。

我不知道如何调试这个，任何帮助表示赞赏。

这是 prod.log 文件（我将其 action_level 配置为“调试”）：

```
[2012-08-14 05:32:20] request.INFO: Matched route "fos_user_registration_register" (parameters: "_controller": "Symfony\Bundle\FrameworkBundle\Controller\RedirectController::urlRedirectAction", "path": "/register/", "permanent": "true", "scheme": "null", "httpPort": "80", "httpsPort": "443", "_route": "fos_user_registration_register") [] []
[2012-08-14 05:32:20] security.INFO: Populated SecurityContext with an anonymous Token [] []
[2012-08-14 05:32:20] security.DEBUG: Write SecurityContext in the session [] []
[2012-08-14 05:32:20] request.INFO: Matched route "fos_user_registration_register" (parameters: "_controller": "FOS\UserBundle\Controller\RegistrationController::registerAction", "_route": "fos_user_registration_register") [] []
[2012-08-14 05:32:20] security.INFO: Populated SecurityContext with an anonymous Token [] []
[2012-08-14 05:32:20] security.DEBUG: Write SecurityContext in the session [] []
[2012-08-14 05:32:38] request.INFO: Matched route "fos_user_registration_register" (parameters: "_controller": "FOS\UserBundle\Controller\RegistrationController::registerAction", "_route": "fos_user_registration_register") [] []
[2012-08-14 05:32:38] security.INFO: Populated SecurityContext with an anonymous Token [] [] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:38:41.920

显然，在生产模式下，Nginx、PHP 和 Symfony2 都不会记录一些错误。

我的解决方案是克隆站点并将其更改为 true `app.php`：

```
$kernel = new AppKernel('prod', true); 
```

所以现在我有两个“生产”实例，一个是 true，另一个是 false。

错误是这样的：

```
Fatal error: Class 'Mongo' not found in /some/doctrine/file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:29:23.110

某处可能存在PHP错误。请查看您的 Apache error_log 文件（大部分时间它位于`/var/log/apache`）。

如果您没有 Apache，请在 php.ini 中更改以下 PHP 设置：

```
display_errors Off
log_errors On
error_log=/var/log/php_errors.log 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:58:37.153

您应该阅读[http://symfony.com/doc/current/bundles/DoctrineMongoDBBundle/index.html](http://symfony.com/doc/current/bundles/DoctrineMongoDBBundle/index.html)

我确定您忘记在 app/AppKernel.php 中将 DoctrineMongoDBBundle 添加到您的捆绑包中

```
// app/AppKernel.php
public function registerBundles()
{
    $bundles = array(
        // ...
        new Symfony\Bundle\DoctrineMongoDBBundle\DoctrineMongoDBBundle(),
    );

    // ...
} 
```

还要检查供应商目录中的适当文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T07:31:39.880

检查 var/log/apache2/error.log 中的 apache 错误日志

# ruby-on-rails - ActiveRecord 查询中的“包含”和“预加载”有什么区别？

> ID：11946311
> 
> 赞同：52
> 
> 时间：2012-08-14T05:38:48.503
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在努力寻找 ActiveRecord 对象的 include() 和 preload() 的比较。谁能解释其中的区别？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-08-14T07:02:29.760

Rails 有两种方法可以避免 n+1 问题。一个涉及创建一个基于大连接的查询来拉入您的关联，另一个涉及对每个关联进行单独的查询。

当你这样做时，`includes`rails 决定为你使用哪种策略。它默认为单独的查询方法（预加载），除非它认为您正在使用您的条件或顺序中的关联列。因为这只适用于连接方法，所以它使用它。

Rails 的启发式方法有时会出错，或者您可能有特定原因偏爱一种方法而不是另一种方法。`preload`（及其配套方法`eager_load`）允许您指定您希望 Rails 使用的策略。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-03-07T06:26:45.327

有关详细了解，请参阅[此](https://blog.bigbinary.com/2013/07/01/preload-vs-eager-load-vs-joins-vs-includes.html)博客。

简而言之：

> Preload 在单独的查询中加载关联数据。

```
User.preload(:posts).to_a

# => SELECT "users".* FROM "users" SELECT "posts".* FROM "posts"  WHERE "posts"."user_id" IN (1) 
```

> **包括**在单独的查询中加载关联数据，就像预加载一样。但是它**比**. `preload`但在某些情况下，它结合了查询。

**包含如何更智能？**

我们**不能在 where 条件下使用 post 表**。以下查询将导致错误。

```
User.preload(:posts).where("posts.desc='ruby is awesome'")

# =>
SQLite3::SQLException: no such column: posts.desc:
SELECT "users".* FROM "users"  WHERE (posts.desc='ruby is awesome') 
```

但是我们**可以在 where 查询中使用 post 表**和**include**

```
User.includes(:posts).where('posts.desc = "ruby is awesome"').to_a

# =>
SELECT "users"."id" AS t0_r0, "users"."name" AS t0_r1, "posts"."id" AS t1_r0,
       "posts"."title" AS t1_r1,
       "posts"."user_id" AS t1_r2, "posts"."desc" AS t1_r3
FROM "users" LEFT OUTER JOIN "posts" ON "posts"."user_id" = "users"."id"
WHERE (posts.desc = "ruby is awesome") 
```

如您所见，包括从使用两个单独的查询到创建单个 LEFT OUTER JOIN 以获取数据的切换。它还应用了提供的条件。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-08-14T05:58:48.583

正如 apidoc 所说，“此方法已被弃用或在最新的稳定版本上移动。最后一个现有版本（v3.0.9）显示在这里。” 所以不同之处在于包括不被弃用。

# c# - 是否应该在.Net 中破坏事件的对象交叉链接？

> ID：11946312
> 
> 赞同：0
> 
> 时间：2012-08-14T05:38:50.620
> 
> 标签：c#, .net

我有一个关于`cross links`in的问题`.Net`。

据我所知，如果我们希望它们被释放，我们应该打破对象之间的交叉链接`GC`。所以，有时会出现这样一种情况，即我有一个`object`指向另一个链接的链接，`object`并且`object`有一个反向链接，但是通过一个事件。据我所知，如果一个对象订阅了另一个对象，则第二个对象在其事件中的目标`object`属性或`invocation`列表中具有多个订阅的链接。

我必须总是自己解耦这些对象（`Dispose method`例如意识到），还是有另一种方法可以解决这种情况，`.Net`或者可能是.Net clean 事件链接本身？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:46:06.747

只有当您不再需要两者之一（比如*A*）时，您才需要删除对*A 的*所有引用。

*这包括A*上事件的任何事件处理程序。

如果*A*可以与引用它的对象同时被收集，则没有理由删除这些对象之间的引用。只需从需要保持“活动”的对象中删除对所有这些对象的所有引用，垃圾收集器就会看到所有这些对象不再可访问，并在需要时清除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:58:59.697

如果您不再需要获取事件，则应该取消订阅（-= 运算符）。在这种情况下，对象之间的这些类型的链接将被解耦。

# php - 自动增加两列

> ID：11946316
> 
> 赞同：0
> 
> 时间：2012-08-14T05:39:01.587
> 
> 标签：php, mysql

我正在尝试根据 art_userid 自动增加下表中的 art_id，这是否可能不编写任何额外的 php 代码？gen_id 必须保留并且不能被删除。我正在使用 Mysql 和 Php

```
CREATE TABLE `articles` (
        `gen_id` INT(10) NULL AUTO_INCREMENT,
        `art_id` TINYINT(3) NULL DEFAULT '0',
        `art_userid` INT(10) NULL DEFAULT '0',
        `art_title` VARCHAR(150) NULL DEFAULT NULL,
        PRIMARY KEY (`gen_id`) 
```

所以最后，如果用户 1 发布了一篇文章，他的 art_id 将为 1。他发布的下一篇文章的 id 为 2。

但是如果用户 2 发布和文章，他的 art_id 将再次为 1。他发布的下一个将具有 id 2。不是第一个用户 art_id 的延续。

```
gen_id | art_id | art_userid | art_title
-----------------------------------------
1         1        1           Title A
2         2        1           Title B
3         1        2           Title A
4         2        2           Title B
5         3        1           Title A 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:53:34.123

好吧，我有点解决了，但少了一列。为此，引擎类型需要是 MyIsam。然后像这样创建：

```
CREATE TABLE `articles` (
    `art_id` INT(10) NOT NULL AUTO_INCREMENT,
    `art_userid` INT(10) NOT NULL DEFAULT '0',
    PRIMARY KEY (`art_userid`, `art_id`)
)
COLLATE='utf8_general_ci'
ENGINE=MyISAM; 
```

然后，当您插入 art_userid 时，您将为每个用户获得一个从 1 开始的 art_id 的唯一值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:44:58.197

您增加 art_id 的策略与自动增加不同。所以你不能在查询中使用默认值。但是你可以写，这将使用 art_userid`TRIGGER`更新 art_id 。`INSERT`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T05:46:24.197

在这种情况下，您应该做一个表格，将用户和文章与每个 ID 链接起来。

因为这里没有自动增量，它只是一个数据管理:)

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T05:52:15.153

更常见的方法是

```
CREATE TABLE `articles` (
        `id` INT AUTO_INCREMENT, -- entry in table
        `gen_id` INT(10) NULL ,
        `art_id` TINYINT(3) NULL DEFAULT '0',
        `art_userid` INT(10) NULL DEFAULT '0',
        `art_title` VARCHAR(150) NULL DEFAULT NULL,
        PRIMARY KEY(`id`)
) 
```

使用`id column`in 表，以便您指定条目通过查询增加用户的总文章 `UPDATE total_articles SET total_articles=total_articles+1 WHERE userid=1`

# java - 调用 Web 服务所需的 Jar 文件

> ID：11946318
> 
> 赞同：0
> 
> 时间：2012-08-14T05:39:20.530
> 
> 标签：java, web-services, jar, jamvm

我已将 jamvm 移植到我的 armel 设备。我能够通过套接字编程方法运行各种基于摆动并与其他系统通信。但是当我尝试调用网络服务时，我得到了许多 NoClassDefFound 异常。

我放置了 jaxws-api.jar 文件以删除一些此类异常，这些异常将我引导至其他类定义未找到的异常。

有人可以告诉在运行时需要哪些 arfe 所有必要的 jar 文件才能在服务器机器上调用 web 服务。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:00:48.690

如果您使用 net beans IDE 来开发 restful 服务，那是非常简单的。只需按照[这些](http://netbeans.org/kb/docs/websvc/rest.html)说明将所有库（包括 Jersey）添加到您的项目中。如果您需要将库分开，请使用项目路径中的 lib 文件夹。 [http://netbeans.org/kb/docs/websvc/rest.html](http://netbeans.org/kb/docs/websvc/rest.html)

ps：虽然你不需要创建数据库。

# android - 如何通过“换行符”分割字符串？

> ID：11946325
> 
> 赞同：6
> 
> 时间：2012-08-14T05:40:26.983
> 
> 标签：android, string, split

```
BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
String str
while ((str =in.readLine()) != null)
{
     items = str.split("\n");
}
in.close(); 
```

字符串 (str) 包含来自文本文件的数据，例如：

一月

二月

行进

等等

每个单词都在新行上。我想读取字符串并在新行上分隔每个单词并存储到字符串对象数组中（这将是名为“items”的变量）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T05:42:14.087

实际上，`BufferedReader.readLine` *已经*根据换行符拆分了输入。

因此，您目前拥有的位置：

```
items=str.split("\n"); 
```

您只需要附加`str`到您的数组。

例如，使用`infile`文件保存：

```
January
February
March
April
May
June 
```

以下程序输出`6`（创建的数组列表的大小）：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.util.ArrayList;
class Test {
    public static void main (String[] args) {
        try {
            ArrayList<String> itms = new ArrayList<String> ();
            BufferedReader br = new BufferedReader (new FileReader ("infile"));
            String str;
            while ((str = br.readLine()) != null)
                itms.add(str);
            br.close();
            System.out.println (itms.size());
        } catch (Exception e) {
            System.out.println ("Exception: " + e);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T05:42:53.847

该`readLine`方法已经逐行读取。此字符串中不会有任何`\n`字符。

试试这个：

```
ArrayList<String> itemList = new ArrayList<String>();
BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
String str;
while ((str = in.readLine()) != null) {
    itemList.add(str);
}
in.close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-28T04:40:08.877

这是我的代码及其对我的工作

```
private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
        String response = "";
        for (String url : urls) {
            DefaultHttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);
            ArrayList<String> itemList = new ArrayList<String>();
            try {
                HttpResponse execute = client.execute(httpGet);
                InputStream content = execute.getEntity().getContent();

                BufferedReader buffer = new BufferedReader(
                        new InputStreamReader(content, "iso-8859-1"));
                StringBuilder sb = new StringBuilder();

                String s = null;

                while ((s = buffer.readLine()) != null) {

                    itemList.add(s);

                }

                response = itemList.get(0);
                content.close();

            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        return response;
    }

    @Override
    protected void onPostExecute(String result) {
        textView.setText(Html.fromHtml(result));
    }
}

public void readWebpage(View view) {
    DownloadWebPageTask task = new DownloadWebPageTask();
    task.execute(new String[] { "http://www.yourURL.com" });

} 
```

**readWebpage**函数是我在**按钮 xml中创建的****onclick 函数**，如下所示

 **```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent"
>

<Button android:layout_height="wrap_content" android:layout_width="match_parent" android:id="@+id/readWebpage" android:onClick="readWebpage" android:text="Load Webpage"></Button>
<TextView android:id="@+id/TextView01" android:layout_width="match_parent" android:layout_height="match_parent" android:text="Example Text"></TextView> 
```

在我的代码中，我尝试获取**第一行**，因此如果您想获取另一行，则使用**itemList.get(0)只需更改****索引**，例如**itemList.get(1)**或**itemList.get(n)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T05:45:23.143

用于`Arraylist`这个..

```
ArrayList<String> items= new ArrayList<String>();

BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
String str;
while ((str =in.readLine()) != null)
{
    items.add(str.split("\n"));
}
in.close(); 
```

=====>检查

```
 for(int i=0;i<items.size;i++)
 {
    System.out.println("item name "+items.get(i));
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-14T01:52:44.640

## 如何用换行符分割字符串

我来这个问题只是想分割一个字符串，而不是一个文件。所以我会在这里为未来的访客回答这个问题。

给定

```
String myString = "one/ntwo/nthree"; 
```

您可以将其转换为数组

```
String myArray[] = myString.split("\n");    // {"one", "two", "three"}; 
```

如果需要，可以将其转换为`List`with

```
List myList = new ArrayList();
Collections.addAll(myList, myArray); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-11T09:29:05.237

在 Android/Java 中，这非常简单。按照这个： -

认为

```
String txt="I am Rahul Kushwaha.I am an Android Developer"; 
```

现在，将其逐行拆分。使用**split()**方法。像：-

```
String txt_split=txt.split("\n");
System.out.println(txt_split); 
```

输出 ：-

```
I
am
Rahul
Kushwaha
.
I
am
an
Android
Developer 
```

现在，要获取拆分字符串的长度，请使用**lenght()**方法。

```
int txt_length=txt_split.length();
System.out.println("text length=",txt_length); 
```

输出：-

```
text length=10 
```

到特定的数据行。这样做： -

```
String[] text_data=txt.split("\n");

System.out.println("Name :",text_data[2]);
System.out.println("Title :",text_data[3]);
System.out.println("Job :",text_data[8]); 
```

输出：-

```
Name :Rahul
Title :Kushwaha
Job :Android 
```

希望这会帮助你。谢谢...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-10T19:47:30.833

如果您想保留空白行，那么您可以使用

```
String lines[] = givenString.split("\\r?\\n", -1); 
```**

# android - ScrollView 中 Android 滚动条的宽度

> ID：11946328
> 
> 赞同：0
> 
> 时间：2012-08-14T05:40:42.320
> 
> 标签：android

我`ScrollView`通过改变它的“外观和感觉”来定制一个`Scrollbars`。我通过以下代码做到这一点：

```
<ScrollView
        android:id="@+id/quiz_scrollview"
        android:layout_width="match_parent"
        android:layout_height="300dp"
        android:layout_margin="20dp"
        android:fadeScrollbars="false"
        android:fillViewport="true"
        android:scrollbarAlwaysDrawVerticalTrack="true"
        android:scrollbarSize="23dp"
        android:scrollbarStyle="insideOverlay"
        android:scrollbarThumbVertical="@drawable/scrollbar_pointer"
        android:scrollbarTrackVertical="@drawable/scrollbar_blank" > 
```

我的可绘制对象`android:scrollbarTrackVertical`是 23x321。这是我的问题：当我运行我的应用程序时，我的垂直滚动条变得如此之细（仅约 10 像素）！它不尊重我的drawable的实际大小。但是当我在 Eclipse 的图形 XML 设计器上打开它时，滚动条的宽度还可以（没问题）。当我在模拟器中运行应用程序时，问题就出现了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:52:00.223

(@drawable/scrollbar_pointer@drawable/scrollbar_blank) 这些是 xml 文件的图像吗？如果 xml 文件可以在这里列出他们的代码！

# sqlite - ServiceStack OrmLite 使用 Sqlite64 作为内存数据库导致丢失 auth 表

> ID：11946334
> 
> 赞同：4
> 
> 时间：2012-08-14T05:41:14.930
> 
> 标签：sqlite, servicestack, ormlite-servicestack

我试图在我的单元测试中使用 Sqlite 作为带有 ServiceStack ORMlite 的内存数据库。

如果我使用 SQLite 保存到文件来运行我的测试，即。使用连接字符串

```
"Data Source=|DataDirectory|unittest.db;Version=3;" 
```

，它工作正常，并且由 ServiceStacks 生成了很好的身份验证表

```
userRepository.CreateMissingTables(); 
```

但是，当我尝试通过使用此连接字符串将 SQLite 用作内存数据库时

```
":memory:" 
```

我说的时候有一个例外

```
SQLite error
no such table: UserAuth 
```

我第一次尝试通过这样做来获取用户

```
userRepository.GetUserAuthByUserName(...) 
```

这是在我调用 userRepository.CreateMissingTables() 之后，如果我切换到使用带有文件数据库的 SQLite，它工作正常。有谁知道问题可能是什么？（由于在 Ormlite 3.9.4 中对 ORM lite 版本 1.0.65.0 的错误引用，我不得不降级到 ORMLite 版本 3.9.0）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T17:11:33.553

### 服务栈 v5

最近版本的 ServiceStack 自动禁用`AutoDisposeConnection`SQLite`:memory:`连接，因此您可以`OrmLiteConnectionFactory`正常配置，例如：

```
var dbFactory = new OrmLiteConnectionFactory(":memory:", SqliteDialect.Provider);

var sqliteRepo = new OrmLiteAuthRepository(dbFactory);
sqliteRepo.CreateMissingTables(); 
```

* * *

### 服务栈 v3

每当您关闭内存数据库中的 Sqlite 的数据库连接时，您都会丢失数据库。

因此，当您配置数据库工厂时，您需要告诉它永远不要处理连接，您可以使用`autoDisposeConnection`构造函数参数来执行此操作，例如：

```
var dbFactory = new OrmLiteConnectionFactory(":memory:", 
    autoDisposeConnection:false, 
    dialectProvider:SqliteDialect.Provider);

var sqliteRepo = new OrmLiteAuthRepository(dbFactory);
sqliteRepo.CreateMissingTables(); 
```

# internet-explorer-8 - 如何通过 HTML5 视频在 IE8 和 Safari 中播放单个 ogv 文件？

> ID：11946335
> 
> 赞同：0
> 
> 时间：2012-08-14T05:41:21.773
> 
> 标签：internet-explorer-8, safari, html5-video, ogg-theora

如何通过 HTML5 视频在 IE8 和 Safari 中播放单个 ogv 文件？我知道 IE 和 Safari 不支持 Ogg Theora，但我对此有要求。

对我有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-05T12:35:03.823

OGV.JS：一个 OGG THEORA 和 VORBIS 的 JAVASCRIPT 视频解码器

针对 Safari 6+ 和 ie 10+

[http://badassjs.com/post/71980473022/ogv-js-an-ogg-theora-and-vorbis-video-decoder-in](http://badassjs.com/post/71980473022/ogv-js-an-ogg-theora-and-vorbis-video-decoder-in)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:48:34.490

IE8 无法播放*任何*HTML5 视频，更不用说特定格式了。它根本不支持它（或任何其他 HTML5 元素）。您能做的最好的事情就是嵌入 Flash 视频。IE9 确实支持 HTML5 视频，但仍然不支持 OGG Theora 格式。

Safari 也明确不支持它。它确实支持 HTML5 视频，但不支持 OGG Theora 格式。

所以简短的回答是它不能完成。对不起。

如果需要开源视频格式，您可以尝试切换到 WebM，Safari 和 IE9（尽管两者都需要将相关视频驱动程序单独安装到浏览器）以及 Chrome 和 Firefox 都支持。（见[http://caniuse.com/#search=video](http://caniuse.com/#search=video)）

但是，无论您使用什么格式，IE8 都不适合您。它根本不知道 HTML5 视频标签是什么，而且您对此无能为力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T12:44:04.390

Cortado 流媒体小程序

Cortado 是一个基于 Java 技术的开源跨浏览器和跨平台视频播放解决方案。利用庞大的 Java 安装基础，它允许网络作者交付 Ogg Theora 内容，而不必担心安装在客户机器上的媒体播放设置。这使得例如 Wikipedia 能够向数百万用户提供嵌入文章中的 Ogg Theora 视频内容。Cortado 最初由 Fluendo 开发，现在由 Xiph.org 维护。如果您对使用免费媒体交付技术感兴趣，例如为了避免与 H.264 等非免费技术相关的成本，并希望获得大量潜在用户群，Cortado 可能是您一直在寻找的解决方案。

[http://theora.org/cortado/](http://theora.org/cortado/)

# android - Android 短信按号码读取

> ID：11946336
> 
> 赞同：4
> 
> 时间：2012-08-14T05:41:32.030
> 
> 标签：android, android-contentprovider

我正在开发一个短信应用程序。在我的应用程序中，我必须列出所有的对话。所以我使用以下 Uri。

```
content://mms-sms/conversations/ 
```

它工作正常。以下是我的代码片段。

```
 Uri uri = Uri.parse("content://mms-sms/conversations/");
 Cursor c= getContentResolver().query(uri, null, null ,null,null);
 startManagingCursor(c);
 if(c.moveToFirst()){

            for(int i=0;i<c.getCount();i++){
                     body[i]= c.getString(c.getColumnIndexOrThrow("body")).toString();
                     number[i]=c.getString(c.getColumnIndexOrThrow("address")).toString();
                     c.moveToNext();
             }
    }
    c.close();

    for (int i = 0; i < body.length; i++) {
        System.out.println("body ="+body[i]);
        System.out.println("number ="+number[i]);
    } 
```

数字打印每个对话编号，正文打印每个对话的最后一条消息。但我想获得每个对话的完整信息，并帮助我针对特定号码进行对话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:34:23.063

从`Conversations`光标，您可以得到`thread_id`. 一旦你得到`thread_id`，继续查询`sms provider`返回所有具有相同的消息`thread_id`

示例：`thread_id`= 2

```
Uri SMS_INBOX = Uri.parse("content://sms");
Cursor c = getContentResolver().query(SMS_INBOX, null, "thread_id" + " = "
                + "2", null,
                "date" + " ASC");

while (c.moveToNext()){

        Log.v("BODY", c.getString(11).toString()); // 11 is the index of body with project URI

    } 
```

# java - Jvm 从哪里为 64 位操作系统中的堆占用内存？

> ID：11946339
> 
> 赞同：0
> 
> 时间：2012-08-14T05:41:43.240
> 
> 标签：java, memory, memory-management, heap-memory

使用命令 -Xms500m -Xmx139000m 获得 104 Gp 堆内存

我正在使用核心 i5 处理器 64 位 Windows 7 操作系统。500 Gp 硬盘。仅 4GB 内存

1.  我只想知道 Jvm 从哪里获取 104 GB(heap) 的内存？

2.  在输出中没有显示内存使用情况？

    ```
     `public class CPUusage {
         public static void main(String[] args)throws Exception
         {
    int mb = 1024*1024;
    int GB = 1024*1024*1024;
    /* Total number of processors or cores available to the JVM */    
    System.out.println("Available processors (cores): " +          Runtime.getRuntime().availableProcessors());
    /* Total amount of free memory available to the JVM */ 
    System.out.println("Free memory (MB): " +          Runtime.getRuntime().freeMemory()/mb);
    /* This will return Long.MAX_VALUE if there is no preset limit */  
    long maxMemory = Runtime.getRuntime().maxMemory()/GB;
    /* Maximum amount of memory the JVM will attempt to use */    
    System.out.println("Maximum memory (GB): " +          maxMemory);
    /* Total memory currently in use by the JVM */  
    System.out.println("Total memory (MB): " +          Runtime.getRuntime().totalMemory()/mb);
    /* Get a list of all filesystem roots on this system */
    File log=new File("D:\\log.txt");
    log.createNewFile();
    FileWriter fstream = new FileWriter(log);
    BufferedWriter out = new BufferedWriter(fstream);
      out.write("--------------------------------------------"+"\n\n");

    out.write("Available processors (cores): " +          Runtime.getRuntime().availableProcessors());
    out.newLine();
    out.write("Free memory (MB): " +          Runtime.getRuntime().freeMemory()/mb);
    out.newLine();
    out.write("Maximum memory (MB): " +          (maxMemory == Long.MAX_VALUE ? "no limit" : maxMemory));
    out.newLine();
    out.write("Total memory (MB): " +          Runtime.getRuntime().totalMemory()/mb); 
    out.newLine();

    File[] roots = log.listRoots();
    /* For each filesystem root, print some info */ 
    for (File root : roots) {
        System.out.println("-------------------------------------------");
        System.out.println("File system root: " + root.getAbsolutePath());
        System.out.println("Total space (GB): " + root.getTotalSpace()/GB);
        System.out.println("Free space (GB): " + root.getFreeSpace()/GB);
        System.out.println("Usable space (GB): " + root.getUsableSpace()/GB);
       out.write("-------------------------------------------");
        out.newLine();
        out.write("File system root: " + root.getAbsolutePath());
        out.newLine();
        out.write("Total space (GB): " + root.getTotalSpace()/GB);
        out.newLine();
        out.write("Free space (GB): " + root.getFreeSpace()/GB);
        out.newLine();
        out.write("Usable space (GB): " + root.getUsableSpace()/GB);
        out.newLine();

    }
      out.write("-------------------------------------------");
      out.newLine();
      out.close();
        }
        } 

               ` 
    ```

    输出是

    ```
     `Available processors (cores): 4
              Free memory (MB): 476
              Maximum memory (GB): 104
              Total memory (MB): 479
              -------------------------------------------
              File system root: C:\
              Total space (GB): 97
              Free space (GB): 70
              Usable space (GB): 70
              -------------------------------------------
              File system root: D:\
              Total space (GB): 368
              Free space (GB): 366
              Usable space (GB): 366

              ` 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T05:54:21.313

选项“-Xms500m -Xmx139000m”的意思是“分配 500Mb 的初始堆大小，并让它增长到最大 139GB ......如果需要的话”。

您从程序中看到的输出与此完全一致。在程序运行时，堆还没有达到 139Gb。它可能*永远不会*达到那个水平。而且它甚至可能*无法*达到那个水平......取决于操作系统在需要时能够为 JVM 提供的资源。

如果你真的想强制 JVM 使用 139Gb 堆，你也应该尝试将 139Gb 设置为初始堆大小；例如“-Xms139000m -Xmx139000m”。但这可能不是一个好主意，尤其是在您没有那么多物理 RAM 的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:53:36.480

虚拟内存意味着 RAM 是在使用时分配的，而不是在保留地址空间时分配的。如果您实际使用 104GB，操作系统将使用交换（磁盘上的文件或分区）来维持 RAM 比您实际拥有的更多 RAM 的错觉。

# java - 如何创建派生类的单例？

> ID：11946352
> 
> 赞同：1
> 
> 时间：2012-08-14T05:42:38.753
> 
> 标签：java, singleton

我在一次采访中被问到这个问题。我有一个基类（比如 class `A`），然后是两个子类`B`和`C`. 现在我无法控制 B 和 C 的构造函数（那些构造函数不能是 private ，必须是 public ）但要求是 and 的每个实例都`B`应该`C`是**单例**。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T06:17:14.237

我想我会在`A`. 让它调用`this.getClass()`，并使用它在私有 HashSet 中进行查找。如果你得到一个命中，那么这个类的一个实例之前已经被创建了，你会抛出一个异常。

```
public abstract class A {
    private static HashSet<Class<?>> classes = new HashSet<Class<?>>();

    public A () {
        synchronized (classes) {
            Class<?> c = this.getClass();
            if (classes.contains(c)) {
                throw NotSingletonException("Class " + c + " is not singleton");
            }
            classes.add(c);
        }
    }
} 
```

如果你安排 A 的所有构造函数都这样做，那么子类就无法避免检查。而且由于 JLS 不允许您在`this()`or`super()`调用周围放置 try / catch，因此一旦抛出异常，子类的构造函数就永远无法正常返回。

* * *

我会说这是一个相当难的面试问题......

* * *

@emory 评论：

> 如果 B 和 C 不是最终的怎么办？然后我可以创建类 B1、B2、C1、C2 等。

这里的问题（如果算作问题的话）是 B1 和 B2 实例也是 B 实例，这意味着 B 实例不再是单例……取决于您希望实现的单例的定义。

我可以看到几种处理方法：

*   您可以反思性地测试子类修饰符，看看这些类是否是最终类，并拒绝创建非最终类的实例......以防万一。

*   您可以将 替换`HashSet<Class>`为`List<Class>`。然后每次`A`调用构造函数时，它都会遍历调用`elem.isAssignableFrom(c)`每个元素类的列表。如果任何调用返回 true，则违反（严格）单例不变量，因此应抛出异常。

逻辑可能需要根据您尝试强制执行的单例模型进行调整，但通用解决方案适用：记录类并检查/比较新类与以前的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:46:40.387

我正在为 B 级展示它

尽管您可以使用`Double checked locking`, 并`synchronized on method`做到这一点..我向您展示了一种快速而肮脏的方法...

```
public class B {

    private static B b = new B();

    private B() {}

    public static B getInstance() {
           return b;
    }
} 
```

# php - 在 PHP 中检索复选框数组并通过电子邮件发送

> ID：11946354
> 
> 赞同：0
> 
> 时间：2012-08-14T05:42:49.793
> 
> 标签：php, arrays, forms, post, checkbox

我正在尝试将以下复选框提供给 PHP 电子邮件表单：

```
<div id="product_information_container">
    <h1 id="product_information_subtitle"><a data-tooltip="Click to hide/display the content below." href="#"><img class="information_icons" src="images/information_icon.png"></a>What can we help you with?</h1>
    <div class="product_information">
        <div class="product_information_containers" id="product_information_attic_barrier">
            <input id="product_information_checkbox_attic_barrier" name="product_information[]" type="checkbox" value="attic_barrier" />
            <span class="product_options">Attic Barrier</span>
        </div>
    </div>
    <div class="product_information">
        <div class="product_information_containers" id="product_information_doors">
            <input id="product_information_checkbox_doors" name="product_information[]" type="checkbox" value="entry_system_door" />
            <span class="product_options">Entry System Door</span>
        </div>
    </div>
    <div class="product_information">
        <div class="product_information_containers" id="product_information_eavestrough_cover">
            <input id="product_information_checkbox_eavestrough_cover" name="product_information[]" type="checkbox" value="eavestrough_cover" />
            <span class="product_options">Eavestrough Cover</span>
        </div>
    </div>
    <div class="product_information">
        <div class="product_information_containers" id="product_information_windows">
            <input id="product_information_checkbox_windows" name="product_information[]" type="checkbox" value="windows" />
            <span class="product_options">Windows</span>
        </div>
    </div>
    <div class="product_information" id="window_options">
        <div id="windows_options_one">
            <div class="product_information_windows_containers" id="product_information_windows_baybow">
                <input id="windows_baybow_checkbox" name="product_information[]" type="checkbox" value="windows" />
                <span class="product_options">Bay/Bow</span>
            </div>
            <div class="product_information_windows_containers" id="product_information_windows_casement">
                <input id="windows_casement_checkbox" name="product_information[]" type="checkbox" value="windows" />
                <span class="product_options">Casement</span>
            </div>
        </div>
        <div id="windows_options_two">
            <div class="product_information_windows_containers" id="product_information_windows_doublehung">
                <input id="windows_doublehung_checkbox" name="product_information[]" type="checkbox" value="windows" />
                <span class="product_options">Double-Hung</span>
            </div>
            <div class="product_information_windows_containers" id="product_information_windows_sliding">
                <input id="windows_sliding_checkbox" name="product_information[]" type="checkbox" value="windows" />
                <span class="product_options">Sliding</span>
            </div>
        </div>
    </div>
</div> 
```

然后我打算捕获输入的信息，并通知哪些信息是相关的。本质上，在“product_information”中选择的所有产品都应该通过，如果选中的话。但是，使用我当前的代码，我只收到在复选框组中选择的最后一个值。

这是我的PHP代码：

```
<?php  
if(isset($_POST)){
    $ip_address = $_SERVER['REMOTE_ADDR'];
    $date = date('d/m/Y');
    $time = date('H:i:s');

    $first_name = $_POST['first_name'];
    $spouse_name = $_POST['spouse_name'];
    $last_name = $_POST['last_name'];
    $street_number = $_POST['street_number'];
    $street_name = $_POST['street_name'];
    $street_type = $_POST['street_type'];
    $city = $_POST['city'];
    $postal_code = $_POST['postal_code'];
    $phone_number = $_POST['phone_number'];
    $alternate_phone_number = $_POST['alternate_phone_number'];
    $email_address = $_POST['email_address'];
    $contact_time = $_POST['contact_time'];
    $product_information = $_POST['product_information'];

    $headers = "From: from_email@lol.com" . "\r\n";  
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";  

    $emailbody = "<p>You have received a message!</p> 
                  <strong>Name: </strong>{$first_name} {$last_name}, <strong>Spouse's Name: </strong>{$spouse_name}<br />
                  <strong>Address: </strong>{$street_number} {$street_name} {$street_type}, {$city}, ON {$postal_code}<br />
                  <strong>Phone Number: </strong> {$phone_number}, <strong>Alt. Phone Number: </strong> {$alternate_phone_number}<br />
                  <strong>Email Address: </strong> {$email_address}</p>
                  <p>Please contact {$first_name} during the {$contact_time} about {$product_information}.<br
                  <p>This message was sent from the IP Address: {$ip_address} on {$date} at {$time}.</p>";  

    mail('to_email@lol.com','Title',$emailbody,$headers);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:54:18.193

`$_POST['product_information']`是一个数组，也许你会发现有用的[implode](http://sk.php.net/implode)函数用分隔符连接所有值：

```
product_information = implode($_POST['product_information'], ','); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:05:50.620

每个复选框都需要自己的值，但是在`Windows`, `Bay/Bow`, `Casement`,`Double-Hung`上`Sliding`它们都是`value="windows"`如此，如果所有这些都被选中，您将获得数组

```
Array ( [product_information] => Array ( [0] => windows
                                         [1] => windows
                                         [2] => windows
                                         [3] => windows
                                         [4] => windows ) )` 
```

换成类似的东西——

```
<div class="product_information">
    <div class="product_information_containers" id="product_information_windows">
        <input id="product_information_checkbox_windows" name="product_information[]" type="checkbox" value="windows" />
        <span class="product_options">Windows</span>
    </div>
</div>
<div class="product_information" id="window_options">
    <div id="windows_options_one">
        <div class="product_information_windows_containers" id="product_information_windows_baybow">
            <input id="windows_baybow_checkbox" name="product_information[]" type="checkbox" value="baybow" />
            <span class="product_options">Bay/Bow</span>
        </div>
        <div class="product_information_windows_containers" id="product_information_windows_casement">
            <input id="windows_casement_checkbox" name="product_information[]" type="checkbox" value="casement" />
            <span class="product_options">Casement</span>
        </div>
    </div>
    <div id="windows_options_two">
        <div class="product_information_windows_containers" id="product_information_windows_doublehung">
            <input id="windows_doublehung_checkbox" name="product_information[]" type="checkbox" value="doublehung" />
            <span class="product_options">Double-Hung</span>
        </div>
        <div class="product_information_windows_containers" id="product_information_windows_sliding">
            <input id="windows_sliding_checkbox" name="product_information[]" type="checkbox" value="sliding" />
            <span class="product_options">Sliding</span>
        </div>
    </div>
</div> 
```

现在你将拥有一个合适的数组

```
Array ( [product_information] => Array ( [0] => windows 
                                         [1] => baybow 
                                         [2] => casement 
                                         [3] => doublehung 
                                         [4] => sliding )) 
```

# string - 获取字符串的前十个字符

> ID：11946356
> 
> 赞同：3
> 
> 时间：2012-08-14T05:42:55.960
> 
> 标签：string, cocoa-touch, nsstring

我正在向我的应用程序添加记事本功能，我想读取字符串的前十个字符并将该字符串用作表格视图中单元格的标题。

我想我可以使用`substringFromIndex:`.

有人可以详细说明我该怎么做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T05:56:32.730

```
[@"1234567890" substringToIndex:6] 
```

给你 **123456**

*   **substringFromIndex** - 从给定索引到结尾（[苹果文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)）
*   **substringToIndex** - 返回一个新字符串，其中包含接收者的字符，但不包括给定索引处的字符（[苹果文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)）

# jquery - 不通过 AJAX 帖子发送的 jQuery 代码搞砸了

> ID：11946358
> 
> 赞同：0
> 
> 时间：2012-08-14T05:43:03.767
> 
> 标签：jquery

我正在使用`$.post()`将一些数据输入服务器。在 ajax 文件中，我想将 1 添加到包含数字的变量中。但是，当将数据放入服务器时，不是加 1，而是放 1。我对此感到困惑。我究竟做错了什么。我发誓我让它工作了一秒钟，然后我知道它停止工作。这是代码。

```
$liker = $_POST['likes'];

$likes = $liker + 1; 

send_data_to_server($likes); 
```

更新

我发现喜欢不是通过 ajax 帖子发送的。我将尝试解决解决方案，因为我看到 jquery 代码运行不正确。如果有人想在我自己排除故障时试一试，下面是下面的代码。

```
$('#submitter').click(function() {
    var search_term = $('#band_request').val();
    $.post('ajax_searchlike.php', {
        search_term: search_term
    }, function(data) {
    /*this section is where I know the problem is
      $('#like_temp_holder').append(data);
      });
      var likes = $('#like_temp_holder').val();
      */
        $.post('ajax_send_band_request.php', {
            likes: likes
        }, function(data) {
            $(data).appendTo("#response_from_request_verification");
        });
    });​

< /script>
    <div id="like_temp_holder"></div>
    <div id = "response_from_request_verification"></div>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:00:32.993

如何踢出喜欢并这样做：

```
$liker = $_POST['likes'];

$liker++ ; 

send_data_to_server($liker); 
```

还是这种尝试会破坏您的代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:47:47.863

这是我的错。第一个 .post() 毫无意义。我将第一个 ajax 文件附加到第二个文件并完成了工作。我喜欢过度使用 AJAX。经验教训：当您可以简单地执行一个 AJAX 调用时，为什么还要进行多个 AJAX 调用。

# css - 如何使用css禁用jsp中的所有td标签

> ID：11946361
> 
> 赞同：0
> 
> 时间：2012-08-14T05:43:25.177
> 
> 标签：css, jsp

我有一个在 jsp 中的表单，用户单击以查看表单。当表单呈现时，表单中包含的信息不应该是可编辑的，所有的 td 应该是可见的，但不应该是可编辑的。

例如：-

```
 <table width="600" align="center" >
                    <tr>
                        <td class="td_left_b" width="30%">Company Name:</td>
                        <td width="60%" height="25"><input type="text" size="28" value="${com.companyName}" id="companyName"/></td>
                    </tr>
                    <tr>
                        <td class="td_left_b" width="30%">Hotel Name(Display Name):</td>
                        <td width="60%" height="25"><input type="text" size="28" value="${com.hotelName}" id="hotelName"/></td>
                    </tr>
                    <tr>
                        <td class="td_left_b" width="30%">Country:</td>
                        <td width="60%" height="25"><input type="text" size="28" value="" id="country"/></td>
                    </tr>
                    <tr>
                    <td class="td_left_b" width="30%">City:</td>
                    <td width="60%" height="25"><input type="text" size="28" value="${com.cityName}" id="cityName"/></td></tr>
                    <tr>
                        <td class="td_left_b" width="30%">NeighbourhoodName:</td>
                        <td width="60%" height="25"><input type="text" size="28" value="${com.neighbourhoodName}" id="neighbourhoodName"/></td>
                    </tr>
                    <tr>
                        <td class="td_left_b" width="30%">Street Name:</td>
                        <td width="60%" height="25"><input type="text" size="28" value="${com.streetName}" id="streetName"/></td>
                    </tr>
</table> 
```

以上信息我在各自的 td 中通过 spring 模型属性。我不想编辑信息。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:52:38.460

您不能禁用表格列。您必须禁用表中的evere 输入。

# sql-server-2008-r2 - 如何从xml文档转换sql存储过程中的日期格式101

> ID：11946363
> 
> 赞同：0
> 
> 时间：2012-08-14T05:44:19.797
> 
> 标签：sql-server-2008-r2

我写了以下内容`procedure`......如何`date 101 format`在这里转换

```
ALTER PROCEDURE [dbo].[PenDataIns]
--[Begin]~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
(
    @xmlData ntext = null

) As
--[Begin]~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Declare @DocHandle int --Doc handle for P1 
DECLARE @Data_ins_error int

BEGIN TRANSACTION
--[Load data into respective XML document handle before processing]~~~~~~~~~~~~~~
    EXECUTE sp_xml_preparedocument @DocHandle OUTPUT, @xmlData

--[Ecsstru]~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

/*  Begin data transfer   */

BEGIN
 INSERT INTO AG_Data([PPO],
    [NUM],[TYPE],[DOB],[DOA],[DOR]) 

SELECT * FROM OPENXML (@DocHandle, '/root/NewDataSet/Table',8) 
WITH
(
    [PPO] varchar(8) './PPO',
    [NUM] numeric(1,0) './NUM',
    [TYPE] varchar(3) './TYPE',
    [DOB] date './DOB',
    [DOA] date './DOA',
    [DOR] date './DOR')

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:29:35.590

您的代码很好，不需要修复。您的 XML 文件中有`yyyy-mm-dd`日期格式，这[正是它应该](http://www.w3.org/TR/xmlschema11-2/#date)的格式，并且 SQL Server 需要它来正确解释 XML 文件中的日期值。

SQL Server 中的日期不以特定格式存储。日期如何呈现给最终用户最好在表示层完成，您可以根据该用户的区域设置进行不同的表示。

如果您在查询日期值时确实需要特定的日期格式，则必须使用将值转换为字符串[`convert`](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。例如`select convert(char(10), DateColumn, 101) as DateColumn`

# java - IntelliJ 和 Maven 源文件夹问题

> ID：11946368
> 
> 赞同：16
> 
> 时间：2012-08-14T05:44:36.673
> 
> 标签：java, maven, intellij-idea, vaadin

我正在尝试使用 IntelliJ (v11.1.3) 创建一个简单的 Java webapp，并将其与一个简单的 maven pom 文件集成以下载 Vaadin jar。

这是我的pom文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                  http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.a.maven.project</groupId>
<artifactId>MavenProject</artifactId>
<version>0.1</version>
<packaging>war</packaging>

<dependencies>
<dependency>
  <groupId>com.vaadin</groupId>
    <artifactId>vaadin</artifactId>
  <version>6.8.2</version>
</dependency>

</project> 
```

我正在从版本控制中检查这个项目，以便在 IntelliJ 中进行设置。但是，IntelliJ 似乎无法识别“src”文件夹是源文件夹。我可以在项目设置中手动将其设置为源文件夹，这是一个小麻烦，但没什么大不了的。但是，每次我对 pom 文件进行更改时，IntelliJ 都会“忘记”这是源文件夹，然后我的所有 Java 文件都会在它们周围出现红色圆圈。有谁知道可能导致这种情况的原因？我已经尝试了几乎所有方法来解决这个问题，包括在我的 pom 文件中指定源文件夹，但似乎没有任何效果。

提前致谢，

埃里克

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-14T19:12:06.897

IntelliJ IDEA 遵循[Maven 约定](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)，将自动配置`/src/main/java`为**Sources** root。

如果您对源代码使用非标准目录，请查看[IDEA Maven FAQ](https://confluence.jetbrains.com/display/IDEADEV/Maven+Integration+FAQ)以了解解决方法：

```
<sourceDirectory>...</sourceDirectory> will be added as Source folder 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-21T08:19:27.927

我在 Idea 11 上碰巧一切正常，但来源未被识别。我将该项目作为 maven 打开 - 从parrent pom - 并选择删除现有的想法文件并生成新的。那时它奏效了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-21T14:08:10.727

如果您无法将 java dir -> 'src/main/java' 作为源根目录：

*   在 src/main 中创建一个新文件夹“java1”
*   将java文件夹中的所有文件夹和文件移动到java1
*   右键单击 java1 > 将目录标记为 > 源根目录
*   删除java文件夹
*   重命名 java1 -> java

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-16T19:56:53.773

在 IntelliJ IDEA 2019.2.4 中，从项目选择器窗口中，直接打开包含 a`pom.xml`的文件夹或`pom.xml`文件。

假设`pom.xml`结构正确，如果创建项目后源文件夹仍然不存在，请右键单击项目，然后转到`Maven`>`Generate Sources and Update folders`生成它，如下所示：

[![在此处输入图像描述](../Images/4da3a0d2bb62f4805f6659d4e63c2117.png)](https://i.stack.imgur.com/OJkhP.png)

# python - 构建可插拔应用程序：如何包含流行库的分支并防止名称冲突？

> ID：11946369
> 
> 赞同：4
> 
> 时间：2012-08-14T05:44:37.577
> 
> 标签：python, django, plugins, namespaces

我正在构建一个我试图保持可插拔的应用程序。唯一的问题是我需要`django-mailer`稍微修改一下，以便我的应用程序可以跟踪哪些电子邮件已发送/未发送并可以访问电子邮件内容。

确保这不会与使用 的其他人`django-mailer`或我决定为我自己的应用程序分叉/调整的任何其他 python 库冲突的最佳方法是什么？

我应该重命名我的 fork 中的 mailer 及其所有相关导入吗？我错过了一些更容易的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:25:18.273

你可以用一个函数来解决它。创建一个同时做这两件事的函数：

*   确保你能在之后得到你想要的东西
*   确保消息已发送。

或者你可以做一些更重的管道。确保把它记录好，并尽量让其他人不要为了每一个徒劳的目的在家里尝试这个，而是联系 Django 或 Django-mailer 团队并询问他们是否可以安排更好的解决方案。

*   装饰 django.core.mail 模块中的 EmailMessage 类：确保在成功发送消息时，您想要的信息也会传递到其他地方。

    ```
    # wrappedmailer.py
    from django.core.mail import EmailMessage

    class WrappedEmailMessage(object):
        def __init__(self, message):
            self.__message = message
            # more initialization

        # override all EmailMessage methods:
        # do what you want with what is provided,
        # then return self.__message.method(...) 
    ```

*   然后当你的应用程序初始化时，在加载 django-mailer 之前，你可以执行以下操作：

    ```
     import django.core.mail
       import newmailer

       django.core.mail.EmailMessage = newmailer.WrappedEmailMessage 
    ```

django.core.mail 模块保留在同一个 Python 进程中的缓存中，因此每当导入 django.core.mail 时，EmailMessage 类实际上就是 WrappedEmailMessage 类。

# xml - XML2CSV 转换过滤列有条件 | *尼克斯操作系统

> ID：11946377
> 
> 赞同：0
> 
> 时间：2012-08-14T05:45:05.170
> 
> 标签：xml, linux, xml-parsing, export-to-csv

我正在使用[XML2CSV将我的 XML 文件转换为 CSV](http://code.google.com/p/xml2csv-conv/)

XML 格式可以简化为

```
<PersonalInfo>
    <UserDetail>
       <FirstName>ABC</FirstName>
       <Occupation>Student</Occupation>
       <DateOfBirth>08/14/1999</DateOfBirth>
    </UserDetail>
    <CaseDetail>....</CaseDetail>
    <TransactionDetail></TransactionDetail>
</PersonalInfo>      
<PersonalInfo>
    <UserDetail>
       <FirstName>XYZ</FirstName>
       <Occupation>Student</Occupation>
       <DateOfBirth>04/25/1991</DateOfBirth>
     </UserDetail>
     <CaseDetail>....</CaseDetail>
     <TransactionDetail></TransactionDetail>
</PersonalInfo>      
<PersonalInfo>
    <UserDetail>
        <FirstName>DEF</FirstName>
        <Occupation>Teacher</Occupation>
        <DateOfBirth>05/12/1984</DateOfBirth>
    </UserDetail>
    <CaseDetail>....</CaseDetail>
    <TransactionDetail></TransactionDetail>
</PersonalInfo> 
```

在使用 XML 到 CSV 转换器时，我只想转换 Occupation 标记具有 Student 值的那些字段。是否有可能通过这个或者我必须使用其他一些脚本来制作最终的 xml 文件，然后将其转换为 CSV。有任何想法吗。

编辑：只需要 FirstName、Occupation 和 DateOfBirth 的值。CaseDetail 或 TransactionDetail 中的值不应出现在结果文件中。最终文件的格式应该是这样的

```
 ABC|Student|08/14/1999 
 XYZ|Student|04/25/1991 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:46:36.387

现在将我的评论扩展到真正的答案。这是我用来直接将xml转换为csv的xslt。（我使用 libxml2`xsltproc`进行实际转换）

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="text"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="PersonalInfo">
    <!-- causes only UserDetail nodes to be processed -->
    <xsl:apply-templates select="UserDetail"/>
  </xsl:template>

  <xsl:template match="UserDetail[Occupation='Student']">
    <xsl:value-of select="FirstName"/>
    <xsl:text>,</xsl:text>
    <xsl:value-of select="Occupation"/>
    <xsl:text>,</xsl:text>
    <xsl:value-of select="DateOfBirth"/>
    <xsl:text>&#0010;</xsl:text>
  </xsl:template>

  <!-- catch all the other userdetail here -->
  <xsl:template match="UserDetail"/>

</xsl:stylesheet> 
```

应用于您的 xml 这给出：

```
ABC,Student,08/14/1999
XYZ,Student,04/25/1991 
```

# sql-server-2008 - 最大和最小在同一个表中

> ID：11946378
> 
> 赞同：2
> 
> 时间：2012-08-14T05:45:05.407
> 
> 标签：sql-server-2008

假设我有下表：

```
id      flag      date
 1         1      2012-01-01
 2         1      2012-02-01
 3         1      2012-03-01
 4         0      2012-04-01
 5         0      2012-05-01
 6         0      2012-06-01 
```

无论如何我可以使用相同的查询获得标志为**1的行的最大日期和标志为****0**的行的最小日期吗？

**编辑：** 我希望结果看起来像这样：

```
max           min
2012-03-01    2012-04-01 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T05:49:13.597

你可以尝试类似的东西

```
SELECT  MAX(CASE WHEN FLAG = 1 THEN Date ELSE NULL END) MaxFlag1,
        MIN(CASE WHEN FLAG = 0 THEN Date ELSE NULL END) MinFlag0
FROM    [Table] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T05:48:39.273

尝试

```
select flag,
       case when flag = 1 then max([date])
            when flag = 0 then min([date])
       end as date
from your_table
group by flag 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T05:47:57.403

您可以使用 a`UNION (ALL)`来组合两个语句的结果。这些语句的唯一限制是它们都返回相同数量和相同类型的列。

应用于您的示例，这将成为

```
SELECT MAX(date) FROM YourTable WHERE flag = 1
UNION ALL SELECT MIN(date) FROM YourTable WHERE flag = 0 
```

# jquery - jQuery wrap 和 wrapAll 的区别

> ID：11946379
> 
> 赞同：17
> 
> 时间：2012-08-14T05:45:09.173
> 
> 标签：jquery

jQuery .wrap 和 .wrapAll 有什么区别？他们几乎做同样的事情，但有什么区别呢？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-14T05:47:32.607

注意描述的不同：

> [**`.wrap()`**](http://api.jquery.com/wrap/): 围绕匹配元素集中的 **每个**元素包裹一个 HTML 结构。: 围绕匹配元素集中的**所有**[**`.wrapAll()`**](http://api.jquery.com/wrapAll/)元素包裹一个 HTML 结构。

 **`.wrap()`单独包装每个元素，但`.wrapAll()`将所有元素包装为一个组。

例如：

```
<div class="foo"></div>
<div class="foo"></div>
<div class="foo"></div> 
```

随着`$('.foo').wrap('<div class="bar" />');`，会发生这种情况：

```
<div class="bar"><div class="foo"></div></div>
<div class="bar"><div class="foo"></div></div>
<div class="bar"><div class="foo"></div></div> 
```

但是随着`$('.foo').wrapAll('<div class="bar" />');`，会发生这种情况：

```
<div class="bar">
  <div class="foo"></div>
  <div class="foo"></div>
  <div class="foo"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T05:48:52.437

WrapAll 包装所有元素， Wrap 包装每个元素。

```
$('.inner').wrapAll('<div class="new" />'); 
```

**结果将所有**内部 div包装在一个新 div 中

```
<div class="container">
  <div class="new">
    <div class="inner">Hello</div>
    <div class="inner">Goodbye</div>
  </div>
</div> 
```

将结果包装在...**每个**元素中

```
<div class="container">
  <div class="new">
    <div class="inner">Hello</div>
  </div>
  <div class="new">
    <div class="inner">Goodbye</div>
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-20T15:52:58.263

```
Adding jquery to execute a wrap:

$(‘p’).wrap(‘&lt;span class=”newclass” />’);

will result in:

<span class=”newclass”&gt;
<p>This is a paragraph.</p>
</span>

<span class=”newclass”&gt;
<p>This is a paragraph.</p>
</span>

<span class=”newclass”&gt;
<p>This is a paragraph.</p>
</span>

Substitute the .wrap for .wrapAll.

$(‘p’).wrapAll(‘&lt;span class=”newclass” />’);

will result in:

<span class=”newclass”&gt;
<p>This is a paragraph.</p>
<p>This is a paragraph.</p>
<p>This is a paragraph.</p>
</span>

Now try out .wrapInner.

$(‘p’).wrapInner(‘&lt;span class=”newclass” />’);

will result in:

<p><span class=”newclass”&gt;This is a paragraph.</span></p>
<p><span class=”newclass”&gt;This is a paragraph.</span></p>
<p><span class=”newclass”&gt;This is a paragraph.</span></p> 
```**

# valgrind - 需要重新编译的分析器和不需要重新编译的分析器有什么区别？

> ID：11946385
> 
> 赞同：1
> 
> 时间：2012-08-14T05:45:52.127
> 
> 标签：valgrind, profiler, gprof, oprofile

使用需要使用调试选项重新编译源代码的分析器（如 gprof）和不需要重新编译的分析器（如 Valgrind、OProfile...）之间有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:48:04.473

我至少可以谈论 Valgrind 和 gprof。

使用两者之间的主要区别基本上就是您已经说过的。对于 gprof，您必须专门编译它以包含分析代码。然后，当您运行可执行文件时，将执行分析代码（因为它已内置到您的程序中），并创建一个 gmon.out 文件，然后 gprof 可以处理该文件以向您显示程序的运行时统计信息。

Valgrind 的不同之处在于您不需要以任何特殊方式编译程序（如果您希望输出有用，则添加调试符号除外）。Valgrind 动态地将您的程序转换为在模拟 CPU 上运行的内部格式（尽管这很*慢*）。这意味着任何程序都可以通过 Valgrind 运行而无需特殊编译。

另一个重要的区别是 Valgrind 可以报告比 gprof 更多的信息，但这与使用它没有特别的关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T19:57:21.873

我不熟悉命名的分析器，但有两种主要的分析方法：

**Instrumentation**，此方法通常需要重新编译（并非总是如此，例如可以动态检测 java 和 .Net 应用程序）。使用这种方法，可以准确测量例程被调用的频率，或者某个循环进行了多少次迭代。

**采样**是一种不需要任何重新编译的方法，它只是以设定的间隔拍摄堆栈的快照。事实证明，这是一种发现瓶颈的有效方法。

[这里](http://support.smartbear.com/articles/aqtime/profiling/)有关于这两种策略的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:54:28.937

任何分析技术都需要符号表信息，因此必须在编译和链接中请求。

除此之外，一些分析器通过在每个函数的开头和可能结尾处编译对记录保存例程的调用来工作。这些函数可以尝试记录函数使用的时间，以及调用它的一些记录。由于调用这些记录函数的开销，它的计时数字变得不准确。

其他分析器不需要这样做，而是依赖于调用堆栈的定期样本。这样的分析器具有较低的开销。由于其抽样的统计性质，其时间数据不准确。

其中隐含的是，时间的准确性对于定位“瓶颈”是必要的，据我所知，这从未被证明是正确的。[*我一直用来*](https://stackoverflow.com/a/1779343/23771)获得数量级加速的方法依赖于洞察程序在花费时间时所做的事情，而不是确切地花费了多少时间。如果您对统计原理感兴趣，可以[*查看此处*](https://scicomp.stackexchange.com/a/2719/1262)。

# javascript - Javascript 错误：预期功能

> ID：11946386
> 
> 赞同：1
> 
> 时间：2012-08-14T05:45:59.450
> 
> 标签：javascript

我有这个 javascript，我收到错误“预期功能”。我看不出我的 javascript 有什么问题。请帮忙。谢谢。

```
function checkrewardname()
{
var my=document.getElementById("Rname");
var con=my.value;
 var mine=document.getElementById("forref").value.split('\n');

if (con == "")
        {
            alert("Enter a Reward Name.");
    }
 else
    { 
    var i=0;
    while(i<=mine.length)
         {
            if (mine(i) == con)//error here
                {
                    alert("Duplicate reward. Please enter a new reward.");
                }
            else
                {
                    document.getElementById("validate").click();
                    alert("The reward has been saved.");
                }
            i++;
        }   
     }
}` 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T05:47:56.780

`mine`是一个数组，但你调用它就像它是一个函数一样。使用`mine[i]`而不是`mine(i)`，您将按索引访问数组，而不是生成错误。（请注意；大多数 C 风格的语言使用`[`and`]`来进行数组访问和保留`(`以及`)`函数调用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:47:52.710

你也有`while(i<=mine.length)`

不应该`while(i < mine.length)`

# javascript - 在 DIV 标记内动态加载页面

> ID：11946390
> 
> 赞同：0
> 
> 时间：2012-08-14T05:46:24.823
> 
> 标签：javascript, jsp, jquery

我尝试使用脚本在 div 标签内加载页面，该页面是登录页面，当我登录时，我需要在同一个 div 中打开相应的输出页面，我不知道如何进一步进行，因为它是两个不同的页面应该一个接一个地打开

```
<script>
$(document).ready(function() {
$(".link1").click(function(event){
   event.preventDefault();
   var url =$(this).attr("href");
   $('#clear').load(url);
});
});
</script> 
```

上面的脚本将加载 div 标签内的登录页面

```
<a class="link1" href="display.jsp">link to open the login page</a> 
```

登录后的相应页面包含应显示在同一div中的表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:50:21.500

您必须禁用默认行为，以便浏览器无法导航： by`return false;`或 by `event.preventDefault()`，请参阅[此线程](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

# spring - cvc-elt.1：使用 initd 运行时找不到元素“bean”的声明

> ID：11946397
> 
> 赞同：0
> 
> 时间：2012-08-14T05:47:04.237
> 
> 标签：spring, activemq, init.d

我的 activemq 代理使用了以下模式：-

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:amq="http://activemq.apache.org/schema/core"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="
         http://www.springframework.org/schema/beans
         file:////u//amqgod//schema//spring-beans.xsd
         http://activemq.apache.org/schema/core
         file:////u//amqgod//schema//activemq.xsd"> 
```

如果我从命令行启动我的应用程序，它运行良好，但在通过 initd 机制启动时失败并出现以下错误：-

错误：java.lang.RuntimeException：无法执行启动任务。原因：org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException：来自 URL [file:/prod/tools/base/etc/config/activemq/amq_prod_broker_config.xml] 的 X ML 文档中的第 23 行无效；嵌套异常是 org.xml.sax.SAXParseException；行号：23；列号：52；cvc-elt.1：找不到元素“beans”的声明。java.lang.RuntimeException：无法执行启动任务。原因：org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException：来自 URL [file:/prod/tools/base/etc/config/activemq/amq_prod_broker_config.xml] 的 XML 文档中的第 23 行无效；嵌套异常是 org.xml.sax.SAXParseException；行号：23；列号：52；cvc-elt.1：找不到元素“beans”的声明。在组织。

initd 只不过是在重新启动 linux 服务器时自动运行我的脚本的配置。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-08T15:32:54.560

我在这方面有点晚了。我遇到了类似的问题。这可以通过包含正确的依赖关系来解决

```
<dependency>
   <groupId>org.apache.activemq</groupId>
   <artifactId>activemq-all</artifactId>
   <version>5.10.0</version>
</dependency> 
```

或者可以从[这里](http://mvnrepository.com/artifact/org.apache.activemq/activemq-all)下载 对于要注册 XBeanNamespaceHandler 的 xsd，这些配置已经完成（**spring.handlers 和 spring.schemas 存在于 jar 的 META-INF 文件夹中**）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:44:54.827

你的模式位置很奇怪：你为什么用一些 file:// 指定 xsd ？

保留原始 xsd（来自 spring、apcache、...）。只需将 file:// 替换为 http:// ，如下所示：

```
<beans
  xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
  http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd   
  http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd"> 
```

# erlang - 为什么这个守卫不抛出异常？

> ID：11946398
> 
> 赞同：4
> 
> 时间：2012-08-14T05:47:08.077
> 
> 标签：erlang

考虑以下代码：

```
 -module(abc).
    -export([f/1]).
    f(X) when (X==0) or (1/X>2) -> X+100;
    f(X) ->X. 
```

和 abc:f(0)。得到结果 0 ，但为什么 1/X 不抛出异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T06:06:05.547

erlang 文档的[Guard Sequences](http://www.erlang.org/doc/reference_manual/expressions.html#id79432)部分说：

> 如果算术表达式、布尔表达式、短路表达式或对保护 BIF 的调用失败（由于参数无效），则整个保护失败。如果守卫是守卫序列的一部分，则将评估序列中的下一个守卫（即下一个分号后面的守卫）。

换句话说，守卫中的异常被视为如果守卫返回 false 而不引发异常。守卫的评估与正常的 erlang 表达式略有不同。

当您调用 时，将评估`abc:f(0)`表达式。`(0==0) or (1/0>2)`这个表达式“失败”，因为除以零，所以守卫不匹配，下一个子句被评估以给出答案`0`。

如果您希望这种情况返回`100`，您有两个选择：使用保护序列或使用短路布尔运算符。这些将是

```
f(X) when X==0; 1/X>2 -> X + 100;
f(X) -> X. 
```

和

```
f(X) when X==0 orelse 1/X>2 -> X + 100;
f(X) -> X. 
```

分别。两种编写方式都将评估`X==0`为单独的异常，`1/X>2`如果结果为真则不执行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T14:58:17.340

有关文档，请参见[此处](http://www.erlang.org/doc/reference_manual/expressions.html#id79432)。挑剔并准确地说：

守卫由一系列*测试*组成，而不是表达式，*测试*将成功或失败，如果测试中有错误，它不会产生异常，只会失败。

在守卫中，您可以有一个*守卫序列*，它是由 分隔的守卫序列`;`，如果其中一个守卫成功，则整个守卫序列成功。所以`;`分开备用守卫。

在一个守卫中可以有一系列由 分隔的守卫测试，守卫`,`中的所有测试都必须成功，整个守卫才能成功。因此，最一般的后卫将是：

```
f(...) when <test11>, <test12> ; <test21>, <test22> ; ... -> 
```

那么布尔运算符呢？它们与测试有什么`,`关系`;`？在警戒测试中使用布尔运算符是完全合法的，它们的行为符合预期，***但***它们**与**使用`,`and不同`;`。尤其是在失败方面。所以布尔表达式`<test11> and <test12>`只是**一个**测试，而不是两个的序列。更重要的是`<test11> or test<21>`（或使用`orelse`）仍然是一个警卫测试，而不是两个警卫的序列。所以一个错误`<test11>`将使整个警卫失败。而如果`<test11> ; < test21>`出现错误，`<test11>`则该警卫测试将失败，并且`<test21>`将尝试替代警卫。

这就是@ShiDoiSi 提到的评论中建议背后的原因。您可以使用其中任何一种，但请注意它们的含义以及它们的行为方式。**请记住**：*守卫由测试而不是表达式*组成。

PS 关于为什么会这样的一些历史。这真的很简单：早在我们有布尔运算符之前我们就有了守卫，所以当我们最终得到布尔运算符时，守卫的语义已经很好地定义了，现在改变已经太晚了。虽然在守卫中允许布尔表达式允许您编写更精确的守卫，但它确实倾向于隐藏守卫的真实性质。

# c++ - 使用其模式定义从 Solidworks 读取 parasolid 文本 *.x_t 文件

> ID：11946401
> 
> 赞同：1
> 
> 时间：2012-08-14T05:47:10.647
> 
> 标签：c++, schema, solidworks

我分配了一项工作，我应该使用 cpp 中的模式读取从solidworks 生成的 parasolid 文本 *.x_t（版本 20）文件。但是每个实体的模式（版本 20）都包含一些额外的字段。

模式文件已在 cpp 中读取，其定义已加载（包括 no_of_fields 和其他）在结构中。我需要在循环中使用这个 no_of_fields 来读取每个实体的 *.x_t 文件。但是，Body 实体（例如）中的 no_of_fields 在架构定义中为 31，在相同版本的 parasolid 文本文件中为 27。所以我对继续前进感到困惑。有人对使用模式定义来读取 parasolid 文件有想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:43:47.213

.x_t 文件可能是使用 Parasolid 20 版生成的，但使用的是旧模式。在 .x_t 文件中，标题中应该有一行：

```
SCH=SCH_2201272_20000 
```

最后一个下划线后面的数字表示架构。我知道模式 18007 中的 Body 实体有 27 个字段，但在模式 20000 中它有 31 个。

# ios - 在 iOS phonegap 中看不到基于 cordova 的应用程序

> ID：11946403
> 
> 赞同：0
> 
> 时间：2012-08-14T05:47:21.820
> 
> 标签：ios, cordova-2.0.0

我正在尝试使用cordova 开发第一个应用程序。我按照[http://www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-xcode-for-ios.html](http://www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-xcode-for-ios.html)的说明进行操作，但是当我尝试在 Xcode 中创建项目`cordova-based application`时中未找到`choose a template for your new project`。

Xcode 是`xcode_4.4.3`，cordova 是`cordova-2.0.0`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:35:54.547

自 2.0 版以来，Cordova 中不再提供 Xcode 模板：

[http://shazronatadobe.wordpress.com/2012/07/20/improvements-in-cordova-2-0-0-for-ios/](http://shazronatadobe.wordpress.com/2012/07/20/improvements-in-cordova-2-0-0-for-ios/)

# linux - 在 10.04 lucid 上离线安装 g++ 会产生循环依赖

> ID：11946404
> 
> 赞同：0
> 
> 时间：2012-08-14T05:47:25.353
> 
> 标签：linux, ubuntu, ubuntu-10.04

当我尝试安装离线 g++-4.4 包时，它依赖于 libstdc++6-4.4-dev，当我尝试安装 libstdc++6-4.4-dev 时，它依赖于 g++-4.4。

```
ocpe@blrkec241972d:~/Download/g++$ sudo dpkg -i g++-4.4_4.4.3-4ubuntu5.1_amd64.deb
    (Reading database ... 45040 files and directories currently installed.)
    Preparing to replace g++-4.4 4.4.3-4ubuntu5.1 (using g++-4.4_4.4.3-4ubuntu5.1_amd64.deb) ...
    Unpacking replacement g++-4.4 ...
    dpkg: dependency problems prevent configuration of g++-4.4:
     g++-4.4 depends on libstdc++6-4.4-dev (= 4.4.3-4ubuntu5.1); however:
      Package libstdc++6-4.4-dev is not configured yet.
    dpkg: error processing g++-4.4 (--install):
     dependency problems - leaving unconfigured
    Processing triggers for man-db ...
    Errors were encountered while processing:
     g++-4.4
    ocpe@blrkec241972d:~/Download/g++$ sudo dpkg -i libstdc++6-4.4-dev_4.4.3-4ubuntu5.1_amd64.deb
    (Reading database ... 45040 files and directories currently installed.)
    Preparing to replace libstdc++6-4.4-dev 4.4.3-4ubuntu5.1 (using libstdc++6-4.4-dev_4.4.3-4ubuntu5.1_amd64.deb) ...
    Unpacking replacement libstdc++6-4.4-dev ...
    dpkg: dependency problems prevent configuration of libstdc++6-4.4-dev:
     libstdc++6-4.4-dev depends on g++-4.4 (= 4.4.3-4ubuntu5.1); however:
      Package g++-4.4 is not configured yet.
    dpkg: error processing libstdc++6-4.4-dev (--install):
     dependency problems - leaving unconfigured
    Errors were encountered while processing:
     libstdc++6-4.4-dev 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:52:48.740

尝试同时安装它们：

```
sudo dpkg -i ./*.deb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:28:51.570

这在某些情况下可能有效，但我最近在 Linux Mint 13 中遇到了同样的问题。建议的命令 (sudo dpkg -i ./.deb) 将临时安装此类软件包，但它们仍将被注册为“损坏” （即在这些冲突得到解决之前，您不得使用甚至修改您的包）。解决这些问题的唯一方法是通过包管理器。目前没有其他办法。

有趣的是，我在尝试用正常工作的驱动程序替换以太网适配器的故障驱动程序时发现了这些无意义的依赖关系。事实证明，大多数 Linux 发行版都没有附带开发工具（因此您不能只在离线模式下“进行安装”）。但是由于草率的开发人员政策[循环依赖、自依赖、dpkg 在这些情况下不起作用]，无法离线安装软件包，因此某些 Linux 版本可能会在某些平台上永久损坏（如果互联网连接不起作用）。

建议？我建议向开发者论坛发送垃圾邮件，向程序员请求严格的依赖策略：在对其运行自动依赖检查之前，任何模块都不应该向公众发布（以避免自我依赖，这很蹩脚）。在循环依赖的情况下（即 a 依赖于 b，b 依赖于 c，c 依赖于 a），模块应该在发布之前被合并到一个单独的模块中。该文件将变得多大并不重要。没有什么比看似模块化的系统更糟糕的了，但实际上这些模块产生的问题比它们解决的问题还要多。在这种情况下，非模块化“块”策略应该是必须的。

外面的世界很复杂……只有人才能让它变得更复杂……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T12:46:45.080

我愿意： sudo dpkg -i g++-4.4_4.4.3-4ubuntu5.1_i386.deb libstdc++6-4.4-dev_4.4.3-4ubuntu5.1_i386.deb

[很高兴我没有将包加载到： http](http://packages.ubuntu.com/lucid/i386/libstdc++6-4.4-dev/download) ://packages.ubuntu.com/lucid/i386/g++-4.4/download [http://packages.ubuntu.com/lucid/i386/libstdc++6-4.4-dev/](http://packages.ubuntu.com/lucid/i386/g++-4.4/download) [下载](http://packages.ubuntu.com/lucid/i386/libstdc++6-4.4-dev/download)

# python - 如何在谷歌应用引擎网站 https 上制作所有处理程序（页面）

> ID：11946409
> 
> 赞同：0
> 
> 时间：2012-08-14T05:48:01.913
> 
> 标签：python, google-app-engine

嗨，我想让我的所有处理程序在谷歌应用引擎项目中加载为 https。任何人都可以知道一种方法吗？是否有我们可以为所有处理程序应用的配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:51:45.187

在您的 app.yaml 中，`secure: always`用于您希望使用 https 的每个处理程序。例如：

```
handlers:

- url: /youraccount/.*
  script: accounts.py
  login: required
  secure: always 
```

您可以在文档中[阅读有关安全 URL](https://developers.google.com/appengine/docs/python/config/appconfig#Secure_URLs)的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:17:07.400

你使用 webapp2 吗？使用 webapp2，您可以指定路由允许的 URI 方案：

```
webapp2.Route(r'/products', handler='handlers.ProductsHandler', name='products-list', schemes=['https']) 
```

请参阅：[http ://webapp-improved.appspot.com/guide/routing.html](http://webapp-improved.appspot.com/guide/routing.html)

# html - 垂直拉伸div

> ID：11946410
> 
> 赞同：0
> 
> 时间：2012-08-14T05:48:10.337
> 
> 标签：html, css

我正在尝试实施建设，描述[here](http://jsfiddle.net/xyp4j/)。

```
<div id="wrap">
    <div id="header">
        header
    </div>
    <div id="main">
        main<br/>main<br/>main<br/>main<br/>main<br/>main<br/>
    </div>
</div>
<div id="footer">
    footer
</div>​

#header {
    border-top:20px solid #fff;
    height: 33px;
    line-height: 33px;
    text-align: center;
}
html { height: 100%; }
body { height: 100%; width: 90%; margin: auto; }
#wrap { min-height: 100%;background-color:gray;}
#main {
    overflow: auto;
    padding-bottom: 53px; /* must be same height as the footer */
    background-color: red;
    border: solid 1px blue;
    height: 90%;
}
#footer {
    position: relative;
    margin-top: -53px; /* negative value of footer height */
    height: 33px;
    line-height: 33px;
    border-bottom:20px solid #fff;
    text-align: center;
} 
```

​</p>

整个页面有背景色（灰色），页眉和页脚是透明的（所以你可以通过它看到页面的背景），内容块有红色背景。尽管内容部分是可拉伸的，但它并没有填充整个块的背景，只有实际的。

1.  是否可以用颜色填充整个内容块？
2.  在最小化窗口时，页脚浮动在内容上。是否可以禁用这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T06:06:27.320

**[这](http://jsfiddle.net/blasteralfred/xyp4j/32/)**是您正在寻找的解决方法。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:05:17.803

将下面这行代码添加到您的代码中：

```
#main{
  position: absolute;
  top: 33px;
  bottom: 33px;
  left: 0;
  right: 0;
}

#wrap{
  position: relative;
} 
```

# c# - 存储库示例上的 EF 查询对象模式

> ID：11946411
> 
> 赞同：4
> 
> 时间：2012-08-14T05:48:11.553
> 
> 标签：c#, entity-framework-4, repository-pattern, objectquery

我已经建立了一个存储库，它主要基于 Scott Millett 的“专业 ASP.NET 设计模式”中的示例公开 IEnumerable。

然而，因为他主要使用 NHibernate，所以他关于如何实现查询对象模式的示例，或者更确切地说，如何将查询最好地转换为 EF 中有用的东西，有点缺乏。

我正在寻找一个使用 EF4 实现查询对象模式的好例子。

编辑：书中简单示例的主要问题是 CreateQueryAndObjectParameters 仅处理 2 种情况，Equal 和 LesserThanOrEqual - 不完全是一个完整的查询解决方案。它使用字符串来构建标准 - 与 NHibernate 相比，这是一种非常粗略的处理方式。他说他将提供第 10 章示例的 EF 代码，但下载中没有。因此寻找一个真实世界的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:36:02.313

此时您可能已经厌倦了听到我的消息，但本机支持`IQueryable`的是 EF 所需的唯一查询对象模式实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T10:18:22.490

根据这本书（Scott Millett 的“Professional ASP.NET Design Patterns”），您可以使用以下代码[我改进了一些行]：

*   **基础设施层：**

*   Criterion 类：（每个 Query 可以包含一些 Criterion）

    ```
    public class Criterion
    {
    private string _propertyName;
    private object _value;
    private CriteriaOperator _criteriaOperator;

    public Criterion(string propertyName, object value,
                     CriteriaOperator criteriaOperator)
    {
        _propertyName = propertyName;
        _value = value;
        _criteriaOperator = criteriaOperator;
    }

    public string PropertyName
    {
        get { return _propertyName; }
    }

    public object Value
    {
        get { return _value; }
    }

    public CriteriaOperator criteriaOperator
    {
        get { return _criteriaOperator; }
    }

    public static Criterion Create<T>(Expression<Func<T, object>> expression, object value, CriteriaOperator criteriaOperator)
    {
        string propertyName = PropertyNameHelper.ResolvePropertyName<T>(expression);
        Criterion myCriterion = new Criterion(propertyName, value, criteriaOperator);
        return myCriterion;
    }
    } 
    ```

*   CriteriaOperator 类：

    ```
    public enum CriteriaOperator
    {
        Equal,
        LesserThanOrEqual,
        NotApplicable
        // TODO: Add the remainder of the criteria operators as required.
    } 
    ```

*   OrderByClause 类：

    ```
    public class OrderByClause
    {
        public string PropertyName { get; set; }
        public bool Desc { get; set; }
    } 
    ```

*   查询类：

    ```
    public class Query
    {
    private QueryName _name;
    private IList<Query> _subQueries = new List<Query>();
    private IList<Criterion> _criteria = new List<Criterion>();

    public Query()
        : this(QueryName.Dynamic, new List<Criterion>())
    { }

    public Query(QueryName name, IList<Criterion> criteria)
    { 
        _name = name;
        _criteria = criteria;
    }

    public QueryName Name
    {
        get { return _name; }
    }

    public bool IsNamedQuery()
    {
        return Name != QueryName.Dynamic;
    }

    public IEnumerable<Criterion> Criteria
    {
        get {return _criteria ;}
    }          

    public void Add(Criterion criterion)
    {
        if (!IsNamedQuery())
            _criteria.Add(criterion);
        else
            throw new ApplicationException("You cannot add additional criteria to named queries");
    }

    public IEnumerable<Query> SubQueries
    {
        get { return _subQueries; }
    }

    public void AddSubQuery(Query subQuery)
    {
        _subQueries.Add(subQuery);
    }

    public QueryOperator QueryOperator { get; set; }

    public OrderByClause OrderByProperty { get; set; }
    } 
    ```

*   PropertyNameHelper 类：

    ```
    public static class PropertyNameHelper
    {
        public static string ResolvePropertyName<T>(
                           Expression<Func<T, object>> expression)
        {
            var expr = expression.Body as MemberExpression;
            if (expr == null)
            {
                var u = expression.Body as UnaryExpression;
                expr = u.Operand as MemberExpression;
            }
            return expr.ToString().Substring(expr.ToString().IndexOf(".") + 1);
        }
    } 
    ```

    您还需要一个 QueryTranslator 类来翻译查询（在**Repository 层**）：

    ```
    public class TimelogQueryTranslator : QueryTranslator
    {
    public ObjectQuery<Timelog> Translate(Query query)
    {
        ObjectQuery<Timelog> timelogQuery;

        if (query.IsNamedQuery())
        {
            timelogQuery = FindEFQueryFor(query);
        }
        else
        {
            StringBuilder queryBuilder = new StringBuilder();
            IList<ObjectParameter> paraColl = new List<ObjectParameter>();
            CreateQueryAndObjectParameters(query, queryBuilder, paraColl);

            //[Edited By= Iman] :
            if (query.OrderByProperty == null)
            {
                timelogQuery = DataContextFactory.GetDataContext().Timelogs
                .Where(queryBuilder.ToString(), paraColl.ToArray());
            }
            else if (query.OrderByProperty.Desc == true)
            {
                timelogQuery = DataContextFactory.GetDataContext().Timelogs
                .Where(queryBuilder.ToString(), paraColl.ToArray()).OrderBy(String.Format("it.{0} desc", query.OrderByProperty.PropertyName));
            }
            else
            {
                timelogQuery = DataContextFactory.GetDataContext().Timelogs
                    .Where(queryBuilder.ToString(), paraColl.ToArray()).OrderBy(String.Format("it.{0} asc", query.OrderByProperty.PropertyName));
            }
            //[Edited By= Iman] .

        }

        return timelogQuery;
    }
    //-------------------------------------------------------------
        public abstract class QueryTranslator
    {
        public void CreateQueryAndObjectParameters(Query query, StringBuilder queryBuilder, IList<ObjectParameter> paraColl)
        {
            bool _isNotFirstFilterClause = false;

            foreach (Criterion criterion in query.Criteria)
            {
                if (_isNotFirstFilterClause)
                {
                    queryBuilder.Append(" AND "); //TODO: select depending on query.QueryOperator
                }
                switch (criterion.criteriaOperator)
                {
                    case CriteriaOperator.Equal:
                        queryBuilder.Append(String.Format("it.{0} = @{0}", criterion.PropertyName));
                        break;
                    case CriteriaOperator.LesserThanOrEqual:
                        queryBuilder.Append(String.Format("it.{0} <= @{0}", criterion.PropertyName));
                        break;
                    default:
                        throw new ApplicationException("No operator defined");
                }

                paraColl.Add(new ObjectParameter(criterion.PropertyName, criterion.Value));

                _isNotFirstFilterClause = true;
            }
        }
    } 
    ```

现在在您的**服务层**：

```
 public IEnumerable<Timelog> GetAllTimelogsFor(int iadcId, byte workShift)
    {
        Query query = new Query(QueryName.Dynamic,new List<Criterion>());
        query.Add(Criterion.Create<Timelog>(t=>t.IadcId, iadcId, CriteriaOperator.Equal));
        query.QueryOperator = QueryOperator.And;
        query.Add(Criterion.Create<Timelog>(t=>t.Shift, workShift, CriteriaOperator.Equal));
        query.OrderByProperty = new OrderByClause { PropertyName = "FromTime", Desc = false };

        IEnumerable<Timelog> timelogs = _timelogRepository.FindBy(query);

        return timelogs;
    } 
```

# api - 有什么方法可以通过 Shopify App api 编辑/修改商店的电子邮件模板？

> ID：11946413
> 
> 赞同：2
> 
> 时间：2012-08-14T05:48:23.620
> 
> 标签：api, email, shopify

当商店安装应用程序时，我想修改（也就是添加一些文本/html）到商店的电子邮件模板。

他们说 api 允许您更改商店管理员几乎可以更改的任何内容，但我想不是这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:54:22.110

正确，这不是您可以通过 API 访问的资源之一。

# delphi-7 - VirtualStringTree OnNodeRightClick

> ID：11946414
> 
> 赞同：2
> 
> 时间：2012-08-14T05:48:27.420
> 
> 标签：delphi-7, virtualtreeview, delphi, tvirtualstringtree

如果我右键单击节点（或通常在 VirtualStringTree 上），我正在寻找一个程序或被触发的东西

我有以下情况：

*   我的 VST 靠近列表视图。
*   我只能用鼠标多选根节点（按住鼠标按钮并移动鼠标）
*   如果我单击任何子节点（右或左） - 它被选中（+ [VSelected] 状态）
*   如果我右键单击根节点，它会自动选择并打开一个弹出菜单。

现在我想为我的所有子节点（并且只有当它们被选中时）有一个不同的弹出菜单（ 1 common ）。

希望你能明白我的意思，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T08:18:06.747

我不会回答您的问题，但会为您指出正确的事件，因为您说过您希望为每个节点设置不同的弹出菜单。右键单击解决方案至少在缺少调用弹出菜单的菜单键方面存在弱点。

***1.1 如何根据节点级别为每个节点使用不同的弹出菜单？***

```
procedure TForm1.VirtualTreeGetPopupMenu(Sender: TBaseVirtualTree;
  Node: PVirtualNode; Column: TColumnIndex; const P: TPoint;
  var AskParent: Boolean; var PopupMenu: TPopupMenu);
begin
  case VirtualTree.GetNodeLevel(Node) of
    0: PopupMenu := PopupMenu1;
    1: PopupMenu := PopupMenu2;
  end;
end; 
```

***1.2 如何启用鼠标右键单击节点选择？***

并且要允许鼠标右键节点选择，只需将`toRightClickSelect`选项添加到`TreeOptions.SelectionOptions`选项集中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T06:11:56.287

您可以使用普通`OnMouseDown`事件，确保`Button`是`mbRight`，然后使用该`GetHitTestInfoAt`函数检查光标下的哪个节点（如果有的话）。

```
var
  HitInfo : THitInfo;
...
TreeView.GetHitTestInfoAt(X, Y, HitInfo);
if (HitInfo.Node = ?) and (HitInfo.Column = ?) then
  begin
  ...
  end; 
```

还有`OnGetPopupMenu`一个它给你一个节点和一个列，让你返回任何`TPopupMenu`.

# full-text-search - ravendb 将 Search 与 Where 相结合

> ID：11946417
> 
> 赞同：4
> 
> 时间：2012-08-14T05:48:49.970
> 
> 标签：full-text-search, ravendb

我在 C# 中执行 raven 查询，并同时使用 Where() 和 Search() 扩展方法。我需要这两个功能，因为我只需要返回具有特定 Guid 字段的索引和文本正文中存在的文本。不幸的是，Where 扩展方法似乎与 Search 扩展方法不兼容。当我将它们结合起来时，我会得到一个这样的 Lucene 查询：

```
 Query:  FeedOwner:25eb541c\-b04a\-4f08\-b468\-65714f259ac2 MessageBody:<<request*>> 
```

这似乎完全忽略了标准的“MessageBody”部分 - 所以我在“自由文本”中使用什么约束并不重要，它不使用它。

我已经单独使用“搜索”进行了测试，并且它可以工作 - 所以它本身不是自由文本搜索的问题 - 只是将两者结合起来。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T22:07:22.220

感谢 Raven@GoogleGroups 上的 @Tobias 为我指明了正确的方向 - 有一个选项可以定义 Where 和 Search 子句的组合方式：

```
Query<T>.Search(candidate => candidate.MessageBody, queryString + "*", options: SearchOptions.And); 
```

# parsing - Http请求上的Node.js解析错误

> ID：11946420
> 
> 赞同：2
> 
> 时间：2012-08-14T05:48:55.133
> 
> 标签：parsing, node.js, request

我有一个非常简单的要求，但警告我`Parse Error`：

```
var http = require('http');
var url = require('url');

var opts = {
    host: 'www.appletreebooks.com',
    path: 'www.appletreebooks.com/appIndex.php?c=eshop&m=get_hot_new_book_list&per_page=1&devid=c4c8874d16d84cde8fc7b9037ad8e26465bd1560&uid=1&ln=sn',
}

var req = http.request(opts, function (res) {
    res.setEncoding('utf8');
    var data = ""
    res.on('data', function(d) {
        data += d;
    })

    res.on('end', function() {
        console.log(data);
    })
})

req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});

req.end(); 
```

但我的回应`Parse Error`

我的代码有什么问题？如何正确获取数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T05:54:55.497

您`opts.path`不应包含主机名。

```
var opts = {
    host: 'www.appletreebooks.com',
    path: '/appIndex.php?c=eshop&m=get_hot_new_book_list&per_page=1&devid=c4c8874d16d84cde8fc7b9037ad8e26465bd1560&uid=1&ln=sn',
} 
```

# android - getMeasuredHeight() 和宽度在 measure() 之后返回 0

> ID：11946424
> 
> 赞同：7
> 
> 时间：2012-08-14T05:49:07.433
> 
> 标签：android, android-layout

我真的对 android 为布局所做的整个测量工作感到困惑。基本上，我想在布局之前获取视图的实际计算高度和宽度。我需要得到计算的高度和宽度，因为我有一个隐藏`LinearLayout`的东西，我想在使用 viewpropertyanimator 打开时设置动画。在动画制作之前，我需要向动画制作者提供目标宽度（即计算出的宽度）。这个布局的宽度是动态的，因为它依赖于它`android:weight`的宽度参数，所以我不能给出静态值。

这是我的活动课：

```
package com.example.testproject;

import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.util.Log;
import android.view.Display;
import android.view.View;
import android.widget.LinearLayout;
import android.widget.LinearLayout.LayoutParams;

public class TestActivity extends Activity
    {

    private LinearLayout gmailListContainer, yahooMailListContainer, windowsLiveListContainer;
    private LinearLayout emailMessageContainer;

    private Display display;

    @Override
    protected void onCreate(Bundle savedInstanceState)
        {
        super.onCreate(savedInstanceState);

        this.setContentView(R.layout.activity_test);

        gmailListContainer = (LinearLayout) this.findViewById(R.id.email_activity_gmail_layout);
        yahooMailListContainer = (LinearLayout) this.findViewById(R.id.email_activity_yahoo_mail_layout);
        windowsLiveListContainer = (LinearLayout) this.findViewById(R.id.email_activity_windows_live_layout);
        emailMessageContainer = (LinearLayout) this.findViewById(R.id.email_activity_email_content_layout);

        gmailListContainer.setBackgroundColor(Color.CYAN);
        yahooMailListContainer.setBackgroundColor(Color.MAGENTA);
        windowsLiveListContainer.setBackgroundColor(Color.GREEN);
        emailMessageContainer.setBackgroundColor(Color.RED);

        display = getWindowManager().getDefaultDisplay();

        setMeasuredDimensions();
        }

    private void setMeasuredDimensions()
        {
        View v = this.findViewById(R.id.email_activity_layout);
        v.measure(display.getWidth(), display.getHeight());
        Log.v("EmailActivity", v.getMeasuredHeight() + ", " +v.getMeasuredWidth());
        }

    private void setWeight(LinearLayout container, float weight)
        {
        LinearLayout.LayoutParams params = (LayoutParams) container.getLayoutParams();
        params.weight = weight;
        container.setLayoutParams(params);
        container.setVisibility(View.VISIBLE);
        }

    } 
```

这是相关的布局资源：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/email_activity_layout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal"
android:baselineAligned="false">

<LinearLayout
    android:id="@+id/email_activity_gmail_layout"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    />
<LinearLayout
    android:id="@+id/email_activity_yahoo_mail_layout"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    />
<LinearLayout
    android:id="@+id/email_activity_windows_live_layout"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    />
<LinearLayout
    android:id="@+id/email_activity_email_content_layout"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="0"
    /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T06:57:24.110

将以下方法添加到您的 Activity 并从中调用您的方法。

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
      setMeasuredDimensions();
    super.onWindowFocusChanged(hasFocus);
} 
```

在 onCreate() 你不能保证你的视图被绘制。这可能需要一些时间。但是只有在完全绘制视图时才会调用上述方法。所以你应该能够在这里准确地得到宽度和高度。

# internet-explorer - XPath 表达式 - 在 Chrome 中失败但在 IE、FF 中有效

> ID：11946427
> 
> 赞同：1
> 
> 时间：2012-08-14T05:49:34.017
> 
> 标签：internet-explorer, firefox, google-chrome, xpath, cross-browser

我有一个这样的 XML：

```
<root>
 <parent1>
   <parent2>
     <child label="single'quote"/>
     <child label="double&quot;quote"/>
   </parent2>
   <parent3/>
   <parent4>
     <child label = "single'quote"/>
   </parent4>
 </parent1>
</root> 
```

我的目标是选择具有特定标签的子节点，比如**单引号**

我可以使用 XPath 表达式，

```
 //child[@label='single'quote'] 
```

由于值中的特殊字符 ' ，这显然会引发错误。

我想出了一个使用逻辑的解决方案：

> 用label的值给父节点设置一个属性***dummy ，比较两个属性。***[添加**dummy="single'quote"**到**parent1**节点。]

因此，我们可以使用以下方法读取标签为“单引号”的子节点：

```
 //child[@label=//parent1/@dummy] 
```

虽然它在 IE 和 Firefox9 中运行良好，但在 Chrome21 中却失败了。

逻辑有问题吗？如何更正 Chrome 的表达式？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:04:18.340

**使用**：

```
/*/parent1/parent2/*[@label="single'quote"] 
```

**这是使用 XPath Visualizer 执行的评估的屏幕截图：**

![在此处输入图像描述](../Images/81a709532138966917dc4f2e9c722404.png)

**对于第二个问题，请使用**：

```
/*/parent1/parent2/*[@label='double"quote'] 
```

这是 XPath Visualizer 的屏幕截图：

![在此处输入图像描述](../Images/30b770ae609fa39218905f7920260e57.png)

# javascript - 向上和向下箭头的导航在 Bootstrap Typeahead 上不起作用

> ID：11946428
> 
> 赞同：1
> 
> 时间：2012-08-14T05:49:46.560
> 
> 标签：javascript, jquery, html, twitter-bootstrap, typeahead

我正在使用 Twitter Bootstrap 的 Jquery [Typeahead 插件](http://twitter.github.com/bootstrap/javascript.html#typeahead)。

我已经集成了它，添加了适当的 .js 文件，并为所需字段设置了`data-items`,`data-source`和值。`data-provide``<input>`

```
<input data-provide='typeahead' 
         data-items='4' 
        data-source='["Alabama","Colorado","Texas"]' 
               type='text' 
               name='someName' 
                 id='someId'> 
```

**有用。**问题是，当列表弹出时，我无法使用箭头（向上、向下）导航 - 如示例所示。

我究竟做错了什么？？？

* * *

**更新：**似乎这是一个关于 Firefox 的错误（我现在注意到它**确实**在 Chrome 下工作）；关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T06:04:22.387

这将解决您的问题。

您可以编辑 bootstrap-typeahead.js 第 171 行

```
if ($.browser.webkit || $.browser.msie) { 
```

对此

```
if ($.browser.webkit || $.browser.msie || $.browser.mozilla) 
```

[GitHub页面链接](https://github.com/twitter/bootstrap/issues/3741)

# scala - 为什么 Scala 的类型系统不是 Clojure 中的库

> ID：11946429
> 
> 赞同：9
> 
> 时间：2012-08-14T05:49:46.433
> 
> 标签：scala, clojure

我听说有人声称：

*   Scala 的类型系统令人惊叹（存在类型、变体、协变）

*   由于宏的强大功能，Clojure 中的一切都是库：（模式匹配、逻辑编程、非确定性……）

问题：

如果两个断言都是真的，为什么 Scala 的类型系统不是 Clojure 中的库？是不是因为：

*   类型是不能作为库工作的这些东西之一？[即，更改必须以某种方式贯穿每个现有的 clojure 库，包括 clojure.core？]

*   Scala 的类型概念与 clojure 协议/记录根本不兼容吗？

*   ... ?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T06:29:55.130

这是一个有趣的问题。

关于 Scala 有一个惊人的类型系统，关于 Clojure 在元编程和语言扩展方面非常出色（尽管这不仅仅是宏......），你当然是对的。

我能想到的几个原因：

1.  Clojure 是一种动态类型语言，而 Scala 是一种静态类型语言。强大的类型推断在您可以对输入类型假设相对较少的语言中并没有多大用处。
2.  Clojure 已经有一个非常有趣的项目将类型添加为一个库（[Typed Clojure](https://github.com/frenchy64/typed-clojure)），这看起来非常有前途 - 但是它与 Scala 的方法非常不同，因为它从一开始就是为动态语言设计的（我相信更多的是受[Typed Racket](http://docs.racket-lang.org/ts-guide/)的启发）。
3.  Clojure 哲学实际上不鼓励某些 OOP 概念（特别是实现继承、可变对象和数据封装）。支持这些东西的类型系统（如 Scala 所做的那样）并不适合 Clojure 惯用语——充其量它们会被忽略，但它们很容易鼓励一种会导致人们以后遇到严重问题的开发风格。
4.  Clojure 已经提供了一些工具，可以解决您通常使用其他语言的类型解决的许多问题——例如，使用多态性协议。
5.  Clojure 社区非常关注简单性（从出色的视频[“Simple Made Easy”](http://www.infoq.com/presentations/Simple-Made-Easy/)的意义上说- 尤其参见 39:30 的幻灯片）。虽然 Scala 的类型系统确实令人惊叹，但我认为将其描述为“简单”有点牵强
6.  放入 Scala 风格的类型系统可能需要完全重写 Clojure 编译器，并使其变得更加复杂。到目前为止，似乎没有人愿意接受这一特定挑战……而且即使有人愿意并且能够做到这一点，也有可能由于上述各种文化/技术原因而拒绝更改。

在没有对 Clojure 本身进行重大更改（我认为这不太可能）的情况下，一个有趣的可能性是在 Clojure 中创建一个 DSL，为特定域提供 Scala 样式的类型推断，并将此 DSL 直接编译为优化的 Java 字节码. 我可以看到这是针对特定问题域的有用方法（例如，使用大矩阵处理大规模数值数据）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T09:07:44.020

简单回答您的问题“......为什么 Scala 的类型系统不是 Clojure 中的库？”：

因为类型系统是 scala 编译器的一部分，而不是 scala 库的一部分。scalas 类型系统的全部功能只存在于编译时。JVM 不支持这样的事情，因为类型擦除，也因为它只会减慢执行速度。而且也没有必要。如果你有一个静态类型的语言，你在运行时不需要类型信息，除非你想做一些肮脏的事情。

编辑：

@mikera jvm 肯定能够运行 scala 编译器，我没有说那样的话。我刚才说过，jvm 不支持这样的类型系统。它甚至不支持泛型。在运行时，所有这些类型都消失了。编译器检查程序的正确性并删除所有更高种类的类型/泛型。

例子：

```
val xs: List[Int] = List(1,2,3,4)
val x1: Int = xs.head 
```

在运行时将如下所示：

```
val xs: List = List.apply(1,2,3,4)
val x1: Int = xs.head.asInstanceOf[Int] 
```

不过没关系，因为编译器之前检查过了。当您使用反射时，您只会在这里遇到麻烦，因为您可以将任何值放入列表中，并且它会在运行时准确地在值被强制转换为`Int`.

这也是为什么 scala 类型系统不是 scala 库的一部分，而是内置在编译器中的原因之一。

OP 的问题也是“......为什么 Scala 的类型系统不是 Clojure 中的库？” 而不是“是否可以为 clojure 创建类型系统，例如 scalas？” 我完美地回答了这个问题。

# cloud - 无法使用 Google 云消息传递/GCM 从服务器向客户端发布消息

> ID：11946432
> 
> 赞同：1
> 
> 时间：2012-08-14T05:50:01.130
> 
> 标签：cloud, messaging, google-cloud-messaging

我能够使用代码在我的客户端应用程序上获取注册密钥

GCMRegistrar.register(this, "805421596082");

我收到了注册 ID。

我正在使用以下 JAVA 代码发布消息。

```
import java.util.ArrayList; 

import com.google.android.gcm.server.Message; 
import com.google.android.gcm.server.MulticastResult; 
import com.google.android.gcm.server.Result;
import com.google.android.gcm.server.Sender; 

public class Notify { 

    public static void main(String args[]) { 

        try { 

            Sender sender = new Sender("AIzaSyAj0cooI3YxBzbug-6CcmJQdRXxGKphRbU"); // This is the server api key 

            Message message = new Message.Builder() 
            .collapseKey("1") 
            .timeToLive(3) 
            .delayWhileIdle(true) 
            .addData("message", 
            "this text will be seen in notification bar!!") 
            .build(); 

            Result result = sender 
            .send(message, 
            "APA91bEMi5lmYKxaJX4-80eUp1JsW50_jSbZoqUs16xswI9EuXK_Km3qyuGxvoqKBvg9_5009naFrF7VKBknOKEo946SWtH57cd_m5BbTxpgaaT_Iy-m9McyV6aqy6BjxAy0d57arqp2yq6mHZrgw7qx-o4ntv7T2Q",  // This is the registration id
            1); 

        } catch (Exception e) { 
            e.printStackTrace(); 
        } 

    } 
} 
```

当我记录结果值时，我得到“ **[errorCode=MismatchSenderId]** ”

我无法继续进行。如果有人可以为此建议我一个解决方案，那将是很大的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T06:12:11.840

API key 和 senderID 应该属于同一个帐户。您还应该使用使用给定的 senderID 生成的相同 registrationID。检查你的钥匙。

[GCM页面](http://developer.android.com/guide/google/gcm/gcm.html#response)中解释如下：

> 注册 ID 与特定的发件人组相关联。当应用程序注册使用 GCM 时，它必须指定允许哪些发送者发送消息。确保您在尝试向设备发送消息时使用其中之一。如果您切换到其他发件人，现有的注册 ID 将不起作用。当错误代码为 MismatchSenderId 时发生。

# java - 将 WidgetSet 文件夹放在 vaadin WAR 文件中

> ID：11946438
> 
> 赞同：0
> 
> 时间：2012-08-14T05:50:40.173
> 
> 标签：java, vaadin

我有一个项目使用需要 widgetset 的附加组件。但是我不确定在我部署的war文件中放置这个widgetset文件夹的位置。

请帮忙。

谢谢达瓦尔·马赫什瓦里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:29:14.153

`<web-root>/VAADIN/widgetsets`

# php - 如何在 symfony2 Doctrine2 的构造函数中将实体添加到用户对象

> ID：11946445
> 
> 赞同：1
> 
> 时间：2012-08-14T05:51:36.323
> 
> 标签：php, symfony, doctrine-orm

我有一个`user`与实体有多对多关系的对象`Group`。

但我希望默认情况下，用户应添加到`Group_User`数据库中 id=4 的组中。

现在我如何在用户构造函数中添加它

如何在实体类中使用查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:00:01.827

您可以在 User 构造函数中传递您想要的内容。您必须从您的控制器（您的 queryManger 可用的地方）传递它。

在您的控制器中：

```
$group_user = $this->getDoctrine()->getEntityManager()->getRepository("Bundle:Entity")->find(4);
$user = new User($group_user); 
```

在您的构造中：

```
public function __construct(Group $group_user)
{
    $this->$group = $group_user;
} 
```

当您将用户实体持久保存在控制器中时，将直接保存用户及其组关系。

# android - 从其他应用程序打开聊天屏幕 Skype

> ID：11946449
> 
> 赞同：1
> 
> 时间：2012-08-14T05:51:51.457
> 
> 标签：android, skype, skypedeveloper

开发一个应用程序，其中我有许多用户的 account_id（skype id），现在我想要的是当我从我的应用程序中单击特定用户的 skype_id 时打开 Skype 的聊天屏幕（已安装在设备中）。

我在网上搜索但没有成功获得链接如何在 Skype 上开始通话但聊天？

[1) 链接 1](https://stackoverflow.com/questions/10132556/how-to-start-a-skype-call-from-an-android-app)

[2) 链接 2](https://stackoverflow.com/questions/6414494/launch-skype-from-the-app-programetically-pass-number-android/8844526#8844526)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:04:40.103

您可以为此使用 Skype URI 方案 (Skype:echo123?chat)。

您可以在此处找到有关 URI 方案的更多信息：[https ://dev.skype.com/skype-uri](https://dev.skype.com/skype-uri)

谢谢

Allen Smith Skype 开发人员支持经理

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-27T10:16:51.643

以下是打开 Skype 聊天对话的代码：

```
 private void openSkype(Context context) {

  // Make sure the Skype for Android client is installed
        if (!isSkypeClientInstalled(context)) {
            goToMarket(context);

            return;
        }

        final String mySkypeUri = "skype:echo123?chat";
                    // Create the Intent from our Skype URI.
                    Uri skypeUri = Uri.parse(mySkypeUri);
                    Intent myIntent = new Intent(Intent.ACTION_VIEW, skypeUri);

                    // Restrict the Intent to being handled by the Skype for Android client only.
                myIntent.setComponent(new ComponentName("com.skype.raider", "com.skype.raider.Main"));
                myIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        try {
                    context.startActivity(myIntent);
                } catch (Exception e) {
                    e.printStackTrace();
                }
    }

/**
     * Determine whether the Skype for Android client is installed on this device.
     */
    public boolean isSkypeClientInstalled(Context myContext) {
        PackageManager myPackageMgr = myContext.getPackageManager();
        try {
            myPackageMgr.getPackageInfo("com.skype.raider", PackageManager.GET_ACTIVITIES);
        } catch (PackageManager.NameNotFoundException e) {
            return (false);
        }
        return (true);
    }

/**
     * Install the Skype client through the market: URI scheme.
     */
    public void goToMarket(Context myContext) {
        Uri marketUri = Uri.parse("market://details?id=com.skype.raider");
        Intent myIntent = new Intent(Intent.ACTION_VIEW, marketUri);
        myIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        myContext.startActivity(myIntent);
    } 
```

# iphone - Xcode 方向属性不返回当前方向

> ID：11946457
> 
> 赞同：0
> 
> 时间：2012-08-14T05:52:25.163
> 
> 标签：iphone, xcode, button, orientation, hide

当设备向右旋转时，我想禁用按钮 myButton 。我设置了一个 if 块以在旋转时隐藏按钮，但设备无法识别它已被旋转。当我运行模拟并旋转模拟器时，我的 NSLog 语句显示为 false。为什么要这样做？

```
UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
NSLog(orientation == UIInterfaceOrientationLandscapeLeft?@"true":@"false");

if([[UIDevice currentDevice] orientation]  == UIInterfaceOrientationLandscapeLeft)
{
   [myButton setHidden:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:59:48.317

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft )
{
     [myButton setHidden:YES];
}

return interfaceOrientation;
} 
```

祝你好运......

# java - 将数据加载到 Hbase

> ID：11946461
> 
> 赞同：0
> 
> 时间：2012-08-14T05:52:41.957
> 
> 标签：java, hadoop, hbase

我需要使用 Mapreduce 将数据加载到 Hbase，我需要如何从 Hbase 开始，将 Hbase 与 Java 集成是否需要使用任何 jar 文件。

1.  Hbase与MapReduce集成需要哪些jar文件
2.  我需要参考哪些 API
3.  如何在 Java 中为 MapReduce 编写代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:12:48.350

要从 java 访问 Hbase，请使用以下代码：

```
conf = new HBaseConfiguration();        
conf.set("hbase.zookeeper.quorum", "ip1,ip2,ip3");
conf.addResource(new Path("/etc/hbase/conf/hbase-site.xml"));
hbase = new HBaseAdmin(conf); 
```

# c# - WCF 5 - 使用 POST 的 OData 3

> ID：11946463
> 
> 赞同：1
> 
> 时间：2012-08-14T05:52:49.087
> 
> 标签：c#, post, wcf-data-services, odata

我有一个使用 OData v3 的 WFC 数据服务。遵循 REST 规范，我创建了一个由 POST 调用的方法，该方法使用 Entity Framework 添加一个实体（在本例中为*客户端）。*

一切正常并按预期添加，但问题是我不太习惯使用查询字符串传递我需要的所有参数，这意味着“典型”POST 通常是`application/x-www-form-urlencoded`在请求正文中而不是在查询字符串中发送参数。WCF 数据服务似乎不允许以相对直接的方式进行此操作。

使用我应该知道的查询字符串是否有任何主要的缺点/安全问题（除了查询字符串的明显大小限制）？我可以在请求正文中发送参数并在`application/x-www-form-urlencoded`不跳过数百万圈的情况下使用吗？

对所有内容都使用查询字符串感觉不妥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:05:14.107

使用 OData 创建实体的标准方法是将 POST 发送到实体集 URL（您希望实体插入的实体集的 URL）。该 POST 在其正文中具有作为 ATOM 或 JSON 有效负载的实体。[http://www.odata.org/documentation/operations#CreatingnewEntries](http://www.odata.org/documentation/operations#CreatingnewEntries)

使用服务操作来创建新实体绝对是可能的，但并不常见。目前无法将参数发送到主体内的服务操作（没有一些严重的黑客攻击）。

# linux - 复制一个没有内容的文件名的目录结构

> ID：11946465
> 
> 赞同：17
> 
> 时间：2012-08-14T05:53:13.073
> 
> 标签：linux, copy, structure, rsync

我有一个巨大的电影文件目录结构。为了分析该结构，我想复制整个目录结构，即文件夹和文件，但是我不想复制所有电影文件，而我想保留文件名。理想情况下，我会得到带有原始电影文件名的零字节文件。

我尝试然后 rsync 到我没有获取链接文件的远程机器。

任何想法如何在不编写脚本的情况下做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-14T12:46:30.013

您可以使用查找：

```
find src/ -type d -exec mkdir -p dest/{} \; \
       -o -type f -exec touch dest/{} \; 
```

`-d`在 () 下查找目录 ( )`src/`并在 () 下创建 ( `mkdir -p`) 它们`dest/`或 ( `-o`) 查找文件 ( `-f`) 并`touch`在`dest/`.

这将导致：

```
dest/src/<file-structre> 
```

您可以`mv`创造性地解决此问题。

* * *

其他（部分）解决方案可以通过 rsync 实现：

```
rsync -a --filter="-! */" sorce_dir/ target_dir/ 
```

这里的技巧是`--filter=RULE`排除 ( `-`) 不是 ( `!`) 目录 ( ) 的`*/`所有内容的选项

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-14T05:59:48.253

在 ubuntu 上，您可以尝试：

```
cp -r --attributes-only <source_dir> <target_dir> 
```

它不会复制文件数据。从手册页`cp`

```
--attributes-only
          don't copy the file data, just the attributes 
```

注意：我不确定此选项可用于其他发行版，如果有人可以确认请更新答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-21T09:56:08.713

我需要一个替代方法来仅同步文件结构：

```
rsync --recursive --times --delete --omit-dir-times --itemize-changes "$src_path/" "$dst_path" 
```

这就是我意识到的方式：

```
# sync source to destination
while IFS= read -r -d '' src_file; do
  dst_file="$dst_path${src_file/$src_path/}"
  # new files
  if [[ ! -e "$dst_file" ]]; then
    if [[ -d "$src_file" ]]; then
      mkdir -p "$dst_file"
    elif [[ -f $src_file ]]; then
      touch -r "$src_file" "$dst_file"
    else
      echo "Error: $src_file is not a dir or file"
    fi
    echo -n "+ "
    ls -ld "$src_file"
  # modification time changed (files only)
  elif [[ -f $dst_file ]] && [[ $(date -r "$src_file") != $(date -r "$dst_file") ]]; then
    touch -r "$src_file" "$dst_file"
    echo -n "+ "
    ls -ld "$src_file"
  fi
done < <(find "$src_path" -print0)

# delete files in destination if they disappeared in source
while IFS= read -r -d '' dst_file; do
  src_file="$src_path${dst_file/$dst_path/}"
  # file disappeard on source
  if [[ ! -e "$src_file" ]]; then
    delinfo=$(ls -ld "$dst_file")
    if [[ -d "$dst_file" ]] && rmdir "$dst_file" 2>/dev/null; then
      echo -n "- $delinfo"
    elif [[ -f $dst_file ]] && rm "$dst_file"; then
      echo -n "- $delinfo"
    fi
  fi
done < <(find "$dst_path" -print0) 
```

如您所见，我使用`echo`and`ls`来显示更改。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-14T12:20:37.793

ls > listOfMovie.txt; 您将在 .txt 文件中获得电影列表。对于多个目录，请参见手册页。

# c++ - Boost：两个工作线程，让主线程休眠，直到它们都完成

> ID：11946466
> 
> 赞同：0
> 
> 时间：2012-08-14T05:53:19.983
> 
> 标签：c++, multithreading, boost, boost-thread

我已经使用 Boost 线程编写了一个程序。我已经分配了两个缓冲区（每个工作线程一个）来存储他们要处理的一些信息。他们坐下来等待缓冲区上出现一些东西，然后他们处理它并将结果放到不同的缓冲区中。我的缓冲区实现是线程安全的。目前，我让主线程忙于等待缓冲区大小为零，但这确实效率低下，因为它必须不断请求对缓冲区的控制然后检查大小。我想要一种让主线程休眠的方法，直到两个工作线程都表示它们已完成。我相当肯定这可以通过使用来实现，`boost::condition_variable`但我不确定如何使用两个工作线程来做到这一点。

非常感谢帮助。

编辑 - 另外，也`boost::barrier`适合吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:57:00.410

你也可以使用 thread::join 方法。此方法将等待线程完成（线程函数返回）。

有关[加入](http://www.boost.org/doc/libs/1_35_0/doc/html/thread/thread_management.html#thread.thread_management.thread.join)的更多信息。

我不认为这个障碍可以帮助你。屏障允许停止线程处理，直到所有线程都遇到屏障。当所有线程都调用了barrier::wait时，所有线程停止等待。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:11:10.200

缓冲区大小为 0 似乎是条件变量的谓词。该大小必须以某种方式受到互斥锁的保护。无论何时锁定该互斥体以更改缓冲区大小，都必须在大小为零时向条件变量发出信号。

一个新的 wait_for_zero_size() 函数必须锁定互斥体，并在条件不成立时在等待条件变量的循环中查找该谓词：

```
void buffer::wait_for_zero_size()
{
    boost::mutex::scoped_lock lock( mutex_ );

    while ( size_ != 0 )
        condition_.wait( lock );
} 
```

HTH，托尔斯滕

# android - 如何更改 Android 通知栏抽屉运行应用程序的背景颜色？

> ID：11946470
> 
> 赞同：0
> 
> 时间：2012-08-14T05:53:38.803
> 
> 标签：android, notifications

我需要知道如何更改正在运行的应用程序通知抽屉背景颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:57:21.250

这不是一个编程问题。你根本没有表现出任何研究努力。无论如何回答你的问题：

*除非扎根并且您安装了自定义主题，否则无法以任何方式更改通知抽屉（包括背景）。*

希望有帮助。

# web-services - 将函数（带参数）传递给 Metro Apps 中的 JSON 服务？

> ID：11946476
> 
> 赞同：0
> 
> 时间：2012-08-14T05:54:08.430
> 
> 标签：web-services, html, microsoft-metro, winjs

我有一个使用 HTML 和 Winjs 的 Metro 应用程序，其中试图调用一个以 JSON 格式提供输出的服务。但是该服务将函数名称（带参数）作为输入。
我知道如何使用通用 url 调用服务，但不知道如何使用该 url 发送函数名称。

# ruby-on-rails - 自动完成 Rails 它不起作用

> ID：11946482
> 
> 赞同：0
> 
> 时间：2012-08-14T05:54:23.937
> 
> 标签：ruby-on-rails, ruby, autocomplete

我在本教程中做错了什么：[https ://github.com/grosser/simple_auto_complete](https://github.com/grosser/simple_auto_complete)

顺便说一下，这是我的脚本：

首先我把它放在我的**users_controller.rb**

```
autocomplete_for :user, :username, :limit => 15, :order => 'created_at DESC' 
```

在我的 routes.rb

```
namespace :profile do

  resources :users, :only => [:index] do 
    collection do
      post "search"
      get "autocomplete_for_user_name"
  end
end 
```

在我的 application.js

```
//= require jquery
//= require jquery_ujs
//= require_tree .

//= require jquery.autocomplete.js

//= require jquery.js

jQuery(function($){//on document ready
    //autocomplete
    $('input.autocomplete').each(function(){
        var input = $(this);
        input.autocomplete(input.attr('data-autocomplete-url'),{
            matchContains:1,//also match inside of strings when caching
            //    mustMatch:1,//allow only values from the list
            //    selectFirst:1,//select the first item on tab/enter
            removeInitialValue:0//when first applying $.autocomplete
        });
    });
}); 
```

在我看来（app/views/profile/messages/compose.html.haml）

```
%div#page-info
  %span#title
    Compose
  %span#desc
    Compose a new Message

= form_for :message, :url => send_message_profile_messages_path do |message|
  %label{:for => "friend"} To:
  %br
  =message.text_field :auto_user_name , :class => 'autocomplete', 'data-autocomplete-url'=> autocomplete_for_user_name_profile_users_path

  %script{:type => "text/javascript"}jQuery(function($){//on document ready $('input.autocomplete').each(function(){var $input = $(this);$input.autocomplete($input.attr('data-autocomplete-url'));});});

  //= collection_select(:message, :friend_id, @friends, :id, :username)
  %br
  %label{:for => "message"} Body:
  %br
  = message.text_area :message
  %br
  = message.file_field :attachment
  %br
  = submit_tag "Send", :confirm => "Are you sure?" 
```

我正在尝试使用用户名自动完成用户

注意：我还安装了 gem，我认为这没有问题。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:07:52.867

鉴于`//on document ready`从中删除评论`script`，因为它都在单行中，我认为它正在评论包括 js 代码在内的整行。

或使用替代格式

```
:javascript
  //on document ready
  jQuery(function($){
    $('input.autocomplete').each(function(){
      var $input = $(this);
      $input.autocomplete($input.attr('data-autocomplete-url'));
    });
  }); 
```

添加`//= require_self`到应用程序文件以添加自己的 js 代码。

```
//= require jquery
//= require jquery_ujs
//= require_tree .
//= require jquery.autocomplete.js
//= require jquery.js 

jQuery(function($){//on document ready
    //autocomplete
    $('input.autocomplete').each(function(){
        var input = $(this);
        input.autocomplete(input.attr('data-autocomplete-url'),{
            matchContains:1,//also match inside of strings when caching
            //    mustMatch:1,//allow only values from the list
            //    selectFirst:1,//select the first item on tab/enter
            removeInitialValue:0//when first applying $.autocomplete
        });
    });
}); 
```

也尽量不要在require之间有空格。application.js 中的 rails 警告说

```
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW. 
```

我一直在使用这个自动完成它对我很有用 [https://github.com/crowdint/rails3-jquery-autocomplete](https://github.com/crowdint/rails3-jquery-autocomplete)

# asp.net - 如何使用 asp.net 获取网络 IP 地址（Internet）？

> ID：11946484
> 
> 赞同：0
> 
> 时间：2012-08-14T05:54:40.783
> 
> 标签：asp.net, c#-4.0, ip-address, lan

我正在开发asp.net网站，现在我的问题是如何使用c#代码获取局域网连接的IP地址，例如打开[http://whatismyipaddress.com/](http://whatismyipaddress.com/)显示IP信息：183.82.77.56这样我必须得到IP地址，现在我是这样写的

```
//Get Lan Connected IP address method
        public string GetLanIPAddress()
        {
            //Get the Host Name
            string stringHostName = Dns.GetHostName();
            //Get The Ip Host Entry
            IPAddress[] arrIpAddress1 = Dns.GetHostAddresses(stringHostName);

            IPHostEntry ipHostEntries = Dns.GetHostEntry(stringHostName);
            //Get The Ip Address From The Ip Host Entry Address List
            IPAddress[] arrIpAddress = ipHostEntries.AddressList;
            return arrIpAddress[arrIpAddress.Length - 1].ToString();
        }
        //Get Visitor IP address method
        public string GetVisitorIpAddress()
        {
            string stringIpAddress;
            stringIpAddress = Request.ServerVariables["HTTP_X_FORWARDED_FOR"];
            if (stringIpAddress == null) //may be the HTTP_X_FORWARDED_FOR is null
            {
                stringIpAddress = Request.ServerVariables["REMOTE_ADDR"];//we can use REMOTE_ADDR
                string add = HttpContext.Current.Request.UserHostAddress;
            }
            return "Your ip is " + stringIpAddress;
        } 
```

但是输出错误，请帮助我。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:58:52.297

添加此代码

```
 foreach (IPAddress ipaddress in ipHostEntries.AddressList)
        {
            IPStr = ipaddress.ToString();
            return IPStr;
        }
        return IPStr; 
```

试试这个网关地址将是你需要的

```
 IPGlobalProperties ipProperties = IPGlobalProperties.GetIPGlobalProperties();
        Console.WriteLine(ipProperties.HostName);

        foreach (NetworkInterface networkCard in NetworkInterface.GetAllNetworkInterfaces())
        {
            foreach (GatewayIPAddressInformation gatewayAddr in networkCard.GetIPProperties().GatewayAddresses)
            {
                Console.WriteLine("Information: ");
                Console.WriteLine("Interface type: {0}", networkCard.NetworkInterfaceType.ToString());
                Console.WriteLine("Name: {0}", networkCard.Name);
                Console.WriteLine("Id: {0}", networkCard.Id);
                Console.WriteLine("Description: {0}", networkCard.Description);
                Console.WriteLine("Gateway address: {0}", gatewayAddr.Address.ToString());
                Console.WriteLine("IP: {0}", System.Net.Dns.GetHostByName(System.Net.Dns.GetHostName()).AddressList[0].ToString());
                Console.WriteLine("Speed: {0}", networkCard.Speed);
                Console.WriteLine("MAC: {0}", networkCard.GetPhysicalAddress().ToString());
            }
        } 
```

# java - Java 8 中字符串键的替代散列是什么？

> ID：11946486
> 
> 赞同：13
> 
> 时间：2012-08-14T05:55:05.287
> 
> 标签：java, collections, hashmap, hash, hashcode

Java 8 正在为字符串键提供替代散列，以在遇到大量键散列码冲突时提高性能。谁能解释那是什么以及它将如何工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-08T06:34:58.040

为了使这个问题更加相关，替代散列已从 JDK 8 中删除。查看：

[http://docs.oracle.com/javase/8/docs/technotes/guides/collections/changes8.html](http://docs.oracle.com/javase/8/docs/technotes/guides/collections/changes8.html)

[http://openjdk.java.net/jeps/180](http://openjdk.java.net/jeps/180)

有趣的是，一旦哈希桶中的项目数增长超过某个阈值，该桶将从使用条目的链接列表切换到平衡树。

HashMap 中的 hash(Object key) 函数已修改为如下，对 String 对象没有特殊处理：

```
static final int hash(Object key) {
    int h;
    return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-14T11:36:31.350

从这封[电子邮件](http://permalink.gmane.org/gmane.comp.java.openjdk.core-libs.devel/10361)：`core-lib-devs@openjkd`

> *   引入了一个新的接口 Hashable32。
> *   Hashable32 提供了一个方法 hash32()
> *   String 实现 Hashable32 和 hash32() 方法
> *   HashMap 等人识别 String 并调用 hash32() 而不是 hashCode()

代码的修订：

*   杂音3：[https ://code.google.com/p/smhasher/wiki/MurmurHash3](https://code.google.com/p/smhasher/wiki/MurmurHash3)
*   althashing "7" webrev： [http ://cr.openjdk.java.net/~mduigou/althashing7/8/webrev/](http://cr.openjdk.java.net/~mduigou/althashing7/8/webrev/)
*   althashing "8" webrev： [http ://cr.openjdk.java.net/~mduigou/althashing8/8/webrev/](http://cr.openjdk.java.net/~mduigou/althashing8/8/webrev/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-09T13:40:13.280

需要注意的是，转向 MurmurHash3 并不能防止 DoS 攻击： [http ://emboss.github.com/blog/2012/12/14/break-murmur-hash-flooding-dos-reloaded/](http://emboss.github.com/blog/2012/12/14/breaking-murmur-hash-flooding-dos-reloaded/)

# javascript - 框架的可用性问题是什么？

> ID：11946489
> 
> 赞同：0
> 
> 时间：2012-08-14T05:55:21.097
> 
> 标签：javascript, jquery, css, ajax, xhtml

为什么 w3c 不鼓励在 xhtml 中使用框架？框架的导航问题是什么？取代框架集和框架的技术是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:36:13.450

> 为什么 w3c 不鼓励在 xhtml 中使用框架？

*   他们打破了 one-uri-one-document 原则。
*   他们打破书签
*   他们中断了与文档的链接
*   它们使打印复杂化

> 取代框架集和框架的技术是什么？

*   服务器端（或预处理）模板或包含。
*   Ajax 与 History API 的谨慎使用相结合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:33:31.277

问题的“替代框架”部分由

[框架的现代替代品](https://stackoverflow.com/questions/9609977/modern-day-alternative-to-frames)

# iphone - 在应用商店提交应用时版本号问题

> ID：11946491
> 
> 赞同：0
> 
> 时间：2012-08-14T05:55:38.397
> 
> 标签：iphone, ios

我想在应用商店提交我的应用程序。我理解所有步骤但对版本号有点困惑。我有以下查询。

1- 是否必须仅输入版本号数字，例如 1.0、1.1 等？

2-我们可以在版本号上放置任何文本而不是数值，例如发型，保持身体吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:00:14.747

[这是指南](http://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/11_EditingandUpdatingAppInformation/EditingandUpdatingAppInformation.html#//apple_ref/doc/uid/TP40011225-CH14-SW1)

它说的是版本号：

> 编号应遵循典型的软件版本控制约定（例如，1.0 或 1.0.1 或 1.1）。

“MyApp v.maintain body”没有意义，无法比较更新通知等。

# c++ - 这些 Boost::Interprocess 组件是否需要同步？

> ID：11946497
> 
> 赞同：3
> 
> 时间：2012-08-14T05:56:20.907
> 
> 标签：c++, synchronization, ipc, boost-interprocess

我正在使用 IPC 构建一个多生产者/单消费者应用程序，使用[Boost.Interprocess](http://www.boost.org/doc/libs/1_50_0/doc/html/interprocess.html)实现。

每个生产者通过在共享内存 () 中分配一个块`managed_shared_memory::allocate`并将一个对象编组到该块中来发送消息。然后，它通过 a 发送一个小对象，该对象`message_queue`保存块的位置（偏移量）和大小。

消费者`receives`从队列中取出这个指示符并解组对象。消费者负责释放内存块。

基于这个实现，我不相信内存中存在的对象或块需要同步，因为一旦消费者知道它们，生产者将不再接触它们。因此，我相信只有内部`message_queue`结构`managed_shared_memory`需要同步。

**我的问题是：**记住每个进程都是单线程的，做`allocate`/`deallocate`和`send`/`receive`调用需要同步吗？

文档提供的 Boost 示例没有使用消息队列的同步，但我认为这只是为了简化示例源。

* * *

我见过[这个问题](https://stackoverflow.com/questions/9266895/is-boostinterprocess-threadsafe)，但它询问的是*线程安全*，而不是 Boost.Interprocess 的这些特定组件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T07:47:41.270

您不需要使用任何类型的锁定来保护这些操作。它们已经在共享内存中使用递归互斥锁进行保护，否则多个进程将无法同时在同一个共享内存块中操作。

关于[managed_shared_memory](http://www.boost.org/doc/html/interprocess/managed_memory_segments.html#interprocess.managed_memory_segments.managed_memory_segment_features.synchronization)：

> 命名/唯一分配/搜索/破坏的特征之一是它们是原子的。命名分配使用由内存分配算法模板参数 ( ) 定义的内部 mutex_family typedef 定义的递归同步方案`MemoryAlgorithm`。也就是说，用于同步命名/唯一分配的互斥锁类型由 `MemoryAlgorithm::mutex_family::recursive_mutex_type`类型定义。对于共享内存和基于内存映射文件的托管段，此递归互斥锁定义为`boost::interprocess::interprocess_recursive_mutex`.

这也扩展到原始分配，您可以通过查看`boost/interprocess/mem_algo/detail/simple_seq_fit.hpp`.

对于消息队列，`boost::interprocess`将其视为与互斥锁相同的同步机制，它将处理所有必要的保证，锁定其内部数据结构并根据需要发出内存屏障。

此外，这同样适用于多线程编程。即使您在同一个程序中从多个线程调用 send 或 allocate ，一切都会好起来的。锁定`boost::interporcess`提供将保护您免受其他线程的侵害，就像它保护您免受其他进程的侵害一样。

# google-apps-script - 我需要将数据从 3 张表复制到同一电子表格中的另一张主表

> ID：11946500
> 
> 赞同：0
> 
> 时间：2012-08-14T05:56:35.527
> 
> 标签：google-apps-script, google-sheets, google-sheets-api

我为此编写了一个代码，但出现错误

`The coordinates or dimensions of the range are invalid. (line 44)`

代码：

```
function updateMaster() {
var repArray  = new Array();
 var ss        = SpreadsheetApp.getActiveSpreadsheet();
 var allSheets = ss.getSheets();
 // build array of all sheets
 for (i in allSheets) {                              
   if ((allSheets[i].getName()).match(/.*?\-Rep$/))
      {repArray.push(allSheets[i].getName());}
 }

 // store all sheets in array
 var sheetArray = [];   
 // loop through all rep sheets                             
 for (var j in repArray) {       
   // get each sheet                    
   var tempSheet  = ss.getSheetByName(repArray[j]);  
       // get sheet data
   var dataRange  = tempSheet.getDataRange().getValues(); 
   // remove the first header row
   dataRange.splice(parseInt(0), 1);                 
       // append sheet data to array
   var sheetArray = sheetArray.concat(dataRange);    
 }

 // Time to update the master sheet
 var mSheet    = ss.getSheetByName("summary");        
 // save top header row
 var headerRow = mSheet.getRange(1,1,1,12).getValues(); 
 // clear the whole sheet
 mSheet.clear({contentsOnly:true});                 
 // put back the header row 
 mSheet.getRange(1, 1, 1, 12).setValues(headerRow); 
```

这是我在写入主表时遇到错误的地方：

```
 // write to the Master sheet via the array 
 mSheet.getRange(2, 1, sheetArray.length, 12).setValues(sheetArray);
  // force spreadsheet updates
 SpreadsheetApp.flush();                   
 // pause (1,000 milliseconds = 1 second)          
 Utilities.sleep("200");                             

 // delete empty rows at bottom
 var last = mSheet.getLastRow();                     
 var max  = mSheet.getMaxRows();
 if (last !== max) {mSheet.deleteRows(last+1,max-last);}

} 
```

我无法找出错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-05T08:55:02.830

mSheet.getRange(2, 1, sheetArray.length, 12).setValues(sheetArray)

我遇到了同样的问题并通过遵循“Rep”解决方案解决了它。然后我遇到了另一个问题，并意识到我的列数不同......所以只需返回并将第 12 行更改为工作表中的行数。

还要尽量保持所有工作表的格式相同。

重命名您希望数据组合的工作表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T08:49:37.780

您需要一张名称中带有“Rep”的表格。

“第一个数组存储所有销售代表工作表。由于某些工作表可能不是销售代表工作表，因此脚本仅在工作表名称具有“-Rep”后缀（例如“JohnDoe-Rep”）时才存储工作表”

代码来源：[http ://blog.ditoweb.com/2012/01/consolidate-spreadsheet-sheets-with.html](http://blog.ditoweb.com/2012/01/consolidate-spreadsheet-sheets-with.html)

这就是为什么它不起作用。

# objective-c - 为什么我创建的这个时钟似乎永远不会释放它的任何内存？

> ID：11946501
> 
> 赞同：0
> 
> 时间：2012-08-14T05:56:37.693
> 
> 标签：objective-c, memory, memory-management, memory-leaks

我为我正在开发的应用程序创建了一个时钟，该时钟开始正常（每次计数一秒），然后每两秒冻结一次，然后每四秒，然后八秒，等等，直到它达到 20 并且应用程序崩溃，在 xcode 显示中没有错误，甚至没有`Recieved Memory Warning`.

我去了 Instruments，发现当使用我的时钟时，我的应用程序的内存正在以惊人的速度增加（尽管任何速度对我来说都是令人震惊的）。问题是，我无法弄清楚究竟是什么导致内存如此之高。该应用程序在 ARC 上运行，所以我知道我没有忘记发布一些东西。我唯一能想到的是，每次加载数字时，它都会存储到内存中并且永远不会释放。那是怎么回事，我不知道，如何解决它我什至没有想法。请让我知道我能做什么。这是我的代码：

```
-(void)updateTime {

    calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    unsigned unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;
    updateTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateTime) userInfo:nil repeats:YES];

    currentTime = [NSDate date];
    dateComponents = [calendar components:unitFlags fromDate:currentTime];
    year = [dateComponents year];
    month = [dateComponents month];
    day = [dateComponents day];
    hour = [dateComponents hour];
    minute = [dateComponents minute];
    second = [dateComponents second];

    if (hour >= 12) {
        lblAMPM.text = @"PM";
    } else {
        lblAMPM.text = @"AM";
    }

    //if (isTwelveHour == YES) {
        //make a 12 hrs clock instead of 24
        if (hour >= 12) {
            hour = 12 - (24-hour);
        }
    //}

    //if midnight, show hour as 12 instead of 0
    if (hour == 0) {
        hour = 12;
    }

    if (second < 10) {
        seconds = [NSString stringWithFormat:@"0%i", second];
    } else {
        seconds = [NSString stringWithFormat:@"%i", second];
    }

    if (minute < 10) {
        lblTime.text = [NSString stringWithFormat:@"%i:0%i:%@", hour, minute, seconds];
    } else {
        lblTime.text = [NSString stringWithFormat:@"%i:%i:%@", hour, minute, seconds];
    }

    [lblDate setText:[NSString stringWithFormat:@"%d/%d/%d", month, day, year]];

}

- (void) updateDateFirst:(int)firstComponent setSecond:(int)secondComponent{

    calendar = [NSCalendar currentCalendar];
    unsigned unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;
    updateTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateTime) userInfo:nil repeats:YES];

    currentTime = [NSDate date];
    dateComponents = [calendar components:unitFlags fromDate:currentTime];
    year = [dateComponents year];
    month = [dateComponents month];
    day = [dateComponents day];

    [lblDate setText:[NSString stringWithFormat:@"%d/%d/%d", firstComponent, secondComponent, year]];

}

- (void)viewDidUnload {
    lblTime = nil;
    lblAMPM = nil;
    lblDate = nil;
    [super viewDidUnload];
} 
```

我打电话`updateTimer`来`viewDidAppear`，仅供参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:54:17.473

`NSTimer`每次`updateTime`调用时都会创建新对象。因此，分配和运行的计时器的数量每秒增加 2 倍！

*   一秒钟后，`updateTime`被调用并创建一个新的计时器。但是由于该`repeats:YES`选项，第一个计时器继续运行。
*   下一秒后，两个计时器都会触发并调用`updateTime`。现在你有 4 个计时器。
*   等等 ...

我不知道你`updateDateFirst:`的用途是什么，但它会创建另一个计时器。

所以你应该只创建一次计时器，例如在`viewDidAppear`. 并且不要忘记停止计时器（使用`invalidate`），例如在`viewWillDisappear`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T06:55:12.363

每次`updateTime`调用它都会创建一个新计时器，并在您调用时将其添加到当前运行循环中：

```
updateTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateTime) userInfo:nil repeats:YES]; 
```

运行循环保留这些计时器。因此，尽管您不断替换`NSTimer`ivar 指向的指针，`updateTimer`但它们永远不会`dealloc`被编辑。ARC 管理每个`NSTimer`分配给的对象，`updateTimer`以便他们对它们进行匹配`retain`/`release`调用。但是，`retain`第一次添加时的运行循环永远不会与匹配项配对，`release`因为计时器正在重复并且永远不会失效。所以顺序是这样的：

1.  你打电话`- (void) updateDateFirst:(int)firstComponent setSecond:(int)secondComponent`来开始事情，它会创建一个`NSTimer`.
2.  此计时器在 1 秒后触发并调用`updateTime`，这会创建一个新计时器。原始计时器正在重复，因此它将在 1 秒内再次触发。现在你有 2 个计时器。
3.  两个计时器大约在 1 秒后触发，调用`updateTime`并创建 2 个新计时器。现在你有 4 个计时器....

执行此操作的标准方法是在开始时创建 1 个重复计时器，而不是在每次调用`updateTimer`. 然后当你完成后，你打电话：

```
[updateTimer invalidate];
upateTimer = nil; 
```

这将停止并释放计时器。

# silverlight - Silverlight 中 DatePicker 的自动完成功能

> ID：11946502
> 
> 赞同：0
> 
> 时间：2012-08-14T05:56:41.487
> 
> 标签：silverlight, autocomplete, datepicker

我正在构建一个 silverlight 4 应用程序，并且用户希望有一个自动完成日期控件的功能。（注意我使用的是 DatePicker）。例如，当用户键入 5 并标记出日期时，应将日期转换为 2012 年 9 月 5 日，因为 8 月 5 日已经过去。对于这个日期格式，我还有一些其他规则。我计划在 KeyUp 事件中为此编写一些代码，但我无法获取用户在日期选择器中输入的文本。在我的情况下，也永远不会调用 TextInputStart 和 TextInputUpdate 。

我正在寻找可以获取用户输入内容的正确事件

谢谢阿莫尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:57:31.067

我曾经`DatePicker`在[Silverlight Toolkit](http://silverlight.codeplex.com)上遇到过类似的问题。我能解决这个问题的唯一方法是`UserControl`使用标准`TextBox`和`DatePicker`. 我重新设置了样式`DatePicker`，使其默认文本区域保持隐藏状态，并将其替换为标准`TextBox`. 我将 's -Property 连接到`DatePicker`'s `SelectedDate`-Property `Text`，`TextBox`这样一旦有人选择了日期，它就会得到更新。

在您的情况下，您可以使用`AutoCompleteBox`Toolkit 随附的而不是标准`TextBox`，然后使用一些巧妙的逻辑来预填充自动完成提案列表。因此，您的控件看起来像一个标准的，`DatePicker`并且主要表现得像一个，但会提供 和 的混合功能。`DatePicker``TextBox``AutoCompleteBox`

# javascript - javascript在文本区域的特定位置插入文本

> ID：11946503
> 
> 赞同：0
> 
> 时间：2012-08-14T05:56:46.667
> 
> 标签：javascript, jquery, html

我编写了一个将一些 xml 标签插入 textarea 的表单。我使用这个功能：

```
 (function ($) {
     addCustomTag = function (name, param, value) {
         var code = "<" + name + " " + param + "=\"" + value + "\">\n</" + name + ">";
         document.getElementById("codeArea").value += code;
     };
 })(jQuery); 
```

我怎样才能让其他一些功能将子标签插入到之前创建的标签中？XML 代码永远不会在服务器上使用。我需要的只是在特定行中插入 tex，这取决于在不切割之前这条线上的内容。像这样的东西：

```
 addCustomSubtag = function(name,param,value,parent) {
    document.getElementById("codeArea").selectionStart = document.getElementById("codeArea").value - parent.length;
    var code = "<" + name + " " + param + "=\"" + value + "\">\n</" + name + ">";
    document.getElementById("codeArea").value += code;
}; 
```

不需要Javascript。它也可以用 jQuery 编写。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:41:10.823

这可能有用：[http ://dwieeb.github.com/jquery-textrange/](http://dwieeb.github.com/jquery-textrange/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:39:17.880

您可以使用这些 jQuery 函数中的任何一个

*   [http://api.jquery.com/append/](http://api.jquery.com/append/)
*   [http://api.jquery.com/appendTo/](http://api.jquery.com/appendTo/)
*   [http://api.jquery.com/prepend/](http://api.jquery.com/prepend/)

更新：

实际上我们也可以使用 jQuery DOM 操作方法来操作 XML。

```
var xml = "<main/>";
alert(xml);                                  // <main/>
var $xml = $(xml).append($("<sub1/>"));
alert($xml.html());                          // <sub1></sub1>
$xml.find("sub1").append($("<sub2/>"));
alert($xml.html());                          // <sub1><sub2></sub2></sub1>
alert($xml.get(0).outerHTML);                // <main><sub1><sub2></sub2></sub1></main> 
```

# spring - Spring 3 和 Hibernate 4 配置

> ID：11946506
> 
> 赞同：1
> 
> 时间：2012-08-14T05:57:10.800
> 
> 标签：spring, hibernate

我正在尝试使用声明性事务管理来实现新的 Spring 3 和 Hibernate 4 集成。但是网上的文档很少。我总是收到一个错误：

```
nested exception is org.hibernate.HibernateException: No Session found for current thread 
```

这是数据源配置的样子：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="org.apache.derby.jdbc.ClientDriver"/>
        <property name="url" value="jdbc:derby://localhost:1527/sample;create=true;upgrade=true"/>
        <property name="username" value="******"/>
        <property name="password" value="******"/>
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean"> 
    <property name="dataSource" ref="dataSource" /> 
    <property name="packagesToScan" value="com.rpm.domain" />
    <property name="hibernateProperties"> 
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.DerbyDialect</prop> 
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.cache.provider_class">org.hibernate.cache.internal.NoCacheProvider</prop>
            <!-- <prop key="hibernate.current_session_context_class">thread</prop> -->
            <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
    </property>
</bean>

<bean id = "transactionManager" class = "org.springframework.orm.hibernate4.HibernateTransactionManager"> 
    <property name = "sessionFactory" ref = "sessionFactory" /> 
</bean>

<bean class="org.springframework.orm.hibernate4.HibernateExceptionTranslator"/>

<bean id="userAccountDAO" class="com.rpm.dao.impl.UserAccountDAO" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T12:47:48.263

你好，在我当前的项目中，我正在使用这个配置：Spring 3 framework 3.2.3.RELEASE + Hibernate 4.2.3 + MySQL 5

在我的 pom.xml 下面，它工作得很好！

我希望它可以帮助你：

```
<properties>
    <org.springframework.version>3.2.3.RELEASE</org.springframework.version>
    <org.springframework.security.version>3.1.4.RELEASE</org.springframework.security.version>
    <hibernate.version>4.2.3.Final</hibernate.version>
    <junit.version>4.5</junit.version>
    <jdk.version>1.6</jdk.version>
</properties>

<dependencies>
    <!-- Spring MVC depends on spring-core, spring-beans, spring-context, spring-web -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-oxm</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-crypto</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aspects</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-instrument</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-acl</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-aspects</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-cas</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-ldap</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-openid</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-remoting</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.25</version>
    </dependency>

    <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.3</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>4.2.3.Final</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>${hibernate.version}</version>
    </dependency>

    <dependency>
        <groupId>net.sf.flexjson</groupId>
        <artifactId>flexjson</artifactId>
        <version>2.1</version>
    </dependency>

    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.17</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>
    <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4.7</version>
    </dependency>

    <dependency>
        <groupId>org.apache.velocity</groupId>
        <artifactId>velocity</artifactId>
        <version>1.7</version>
    </dependency>

    <dependency>
        <groupId>org.apache.directory.studio</groupId>
        <artifactId>org.apache.commons.io</artifactId>
        <version>2.4</version>
    </dependency>

    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-core</artifactId>
        <version>3.0.1</version>
    </dependency>

    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-extras</artifactId>
        <version>3.0.1</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.5.6</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>${junit.version}</version>
    </dependency>

</dependencies>

<build>
    <finalName>context</finalName>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

这是休眠配置.xml：

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driver}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.user}" />
    <property name="password" value="${jdbc.password}" />
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T13:22:43.773

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="packagesToScan">
        <list>
            <value>com.zeronetribe.context.model</value>
            <value>com.zeronetribe.context.model.graph</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>

    </property>
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/>

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T13:02:03.193

看起来您还没有启用基于注释的事务。你如何实现**UserAccountDAO**？哪一行引发了异常？

# c - 请建议设计实现：动态更新项目列表

> ID：11946507
> 
> 赞同：0
> 
> 时间：2012-08-14T05:57:10.380
> 
> 标签：c, menu, ncurses

我正在使用 C 和 ncurses 库编写应用程序。我的程序正在与一些传感器密集交换数据（发送和接收一些数据）。有许多传感器（最多 500 个）。现在我想以“用户友好”的方式显示每个传感器的信息：它必须是一个带有项目的可滚动列表，用户可以选择每个项目。我现在最好的主意是使用 ncurses '菜单库'。步骤如下：

1.  创建项目列表（实际上是一些字符串数组，其中每个字符串包含传感器编号、类型和其他信息。
2.  创建菜单并将这些项目添加到菜单
3.  显示菜单

听起来可能不错，但问题是每个传感器的信息（实际状态）是动态更新的。好的，我可以实现一些“热键”来更新信息，但这可能非常耗时：重建和重新显示*所有*项目不是一个好主意。那么你会怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:18:23.643

您基本上拥有数据源的视图，并且数据源正在更新和修改，您需要向查看者发出信号，告知特定数据项已被修改，以便查看者可以更新其视图。

通常，我在这种情况下所做的是拥有一个事件路径，以便当查看器、数据的消费者和生产者、您的传感器线程之间共享的数据源时，共享数据被更新，然后事件消息被发送到查看器。

事件消息通常使用某种 FIFO 排队机制发送，以便查看者按照生产者发送事件的顺序接收事件。

对于诸如 Windows 之类的事件驱动窗口系统，通常有一个`PostMessage()`函数允许您将消息发布到特定窗口或特定线程。

因此，基本的窗口设计是接受具有指示源数据已更新的消息标识符以及一些标识符或索引以指示哪些项目已更新的消息。然后查看器将访问存储区域以从该区域中提取该特定数据项，然后使用该数据更新视图中的特定项文本。

这几乎是标准的[MVC 模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。令人讨厌的一点是您如何将源数据更新事件传达给查看器。

# java - 如何从 PostgreSQl/PostGIS 生成 POJO？

> ID：11946512
> 
> 赞同：0
> 
> 时间：2012-08-14T05:57:22.720
> 
> 标签：java, xml, hibernate, postgis

我有 25 个 .xsd 模式，并希望从该模式生成 DB 表和 POJO 类。
Hibernate可以做到吗？我已经尝试使用 XMLSpy 和使用 JiBX 的 POJO 生成 DB 表，但是当我使用 DB 和映射中的表的 Hibernate 名称生成映射时是不同的。我想使用单一工具来做到这一点。

**更新**

我尝试使用休眠生成 POJO。我创建`\hibernate.cfg.xml`和`hibernate.reveng.xml`控制台配置。当我尝试运行配置时出现错误

```
org.hibernate.MappingException: Could not configure overrides from file: D:\liferay-develop\workspace\JABX_test\src\hibernate.reveng.xml
Could not configure overrides from file: D:\liferay-develop\workspace\JABX_test\src\hibernate.reveng.xml
org.hibernate.MappingException: invalid override definition
invalid override definition
org.hibernate.MappingException: invalid override definition
invalid override definition
org.xml.sax.SAXParseException: The content of element type "hibernate-reverse-engineering" must match "(schema-selection*,type-mapping?,table-filter*,table*)".
The content of element type "hibernate-reverse-engineering" must match "(schema-selection*,type-mapping?,table-filter*,table*)". 
```

当我在逆向工程中使用空 TableFilter 时，休眠创建 POJO 但仅来自默认的 postgres 表。

我做错了什么？

**更新 2**

我如何使用本教程 [http://www.youtube.com/watch?v=tfZiKn5xhXk](http://www.youtube.com/watch?v=tfZiKn5xhXk)并得到错误

```
 org.hibernate.exception.JDBCConnectionException: Getting database metadata
Getting database metadata
java.sql.SQLException: No suitable driver found for   jdbc:postgresql:localhost:5632:postgis_test
No suitable driver found for jdbc:postgresql:localhost:5632:postgis_test
java.sql.SQLException: No suitable driver found for jdbc:postgresql:localhost:5632:postgis_test
No suitable driver found for jdbc:postgresql:localhost:5632:postgis_test 
```

**更新 3**

好的。我重新安装 Eclipse 并再次获得第一次更新中的情况。所以我尝试从 DB 生成 POJO 并从 postgis 表中只获取 POJO：`geography_columns`和`spatial_ref_sys`. Hibernate 不能与 PostGis 一起工作？

# mysql - 大型静态表上的 MySQL INSERT SELECT

> ID：11946515
> 
> 赞同：0
> 
> 时间：2012-08-14T05:57:48.300
> 
> 标签：mysql, sql

我需要将一个表的内容复制到另一个表。所以我开始使用：

```
INSERT new_table SELECT * FROM old_table 
```

但是，我现在收到以下错误：

```
1297, "Got temporary error 233 'Out of operation records in transaction coordinator (increase MaxNoOfConcurrentOperations)' from NDBCLUSTER" 
```

我想我明白为什么会发生这种情况：我的表很大，MySQL 试图及时拍摄快照（锁定所有内容并从中进行一个大事务）。

但是，我的数据是相当静态的，没有其他可以修改数据的并发会话。如何告诉 MySQL 一次复制一行，或者以较小的块复制，而不锁定整个内容？

编辑说明：我已经知道我可以将整个表逐行读取到内存/文件/转储中并写回。我很想知道是否有简单的方法（也许设置隔离级别？）。请注意，引擎是 InnoDB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:01:32.340

正如您所说，数据迁移是[CURSOR](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)有意义的少数实例之一，可确保锁的数量保持正常。

将游标与[TRANSACTION](http://dev.mysql.com/doc/refman/5.0/en/commit.html)结合使用，在每行之后或 N 行之后提交（例如，使用带模数的计数器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:10:33.330

从 innodb 中选择数据到 outfile 并将 infile 加载到集群中

# iphone - 被 iPhone 的 Facebook Feed Dialogue 阻碍

> ID：11946516
> 
> 赞同：0
> 
> 时间：2012-08-14T05:58:01.703
> 
> 标签：iphone, xcode, facebook

我正在开发一个 iPhone 应用程序，我希望用户能够从中将照片和标题发布到他或她的 Facebook 墙上。我从以下代码开始，我从`developers.facebook.com`.

```
UIImage *pic = [self createImage];
NSString *kAppId=@"xxxxxxxxxxx0507";
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:kAppId, @"app_id",
    pic, @"picture",@"My Haiku", @"name",@"Maybe he'll love me if I give him a haiku....",@"message",nil];
[facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

这给了我一个`undeclared identifier 'facebook'`错误，所以在浏览了更多之后，我下载了 iOS Facebook SDK。但是，以下安装说明阻碍了我`developers.facebook.com`：

- 引用 -

如果您创建一个启用了自动引用计数 (ARC) 的 iOS 应用程序，那么您应该使用 iOS Facebook SDK 的静态库版本，而不是从 src 文件夹中拖入文件。iOS Facebook SDK 的最新版本包含一个 shell 脚本，您可以运行该脚本来构建静态库。您可以通过命令行调用脚本目录下的 build_facebook_ios_sdk_static_lib.sh 构建脚本来执行此操作，例如：

```
% ~/facebook-ios-sdk/scripts/build_facebook_ios_sdk_static_lib.sh 
```

这将在 /lib/facebook-ios-sdk 文件夹下创建静态库（例如 ~/facebook-ios-sdk/lib/facebook-ios-sdk）。然后，您可以将 facebook-ios-sdk 文件夹拖到应用程序 Xcode 项目中以包含 iOS Facebook SDK 静态库。

--结束报价--

我不知道什么是 shell 脚本或什么是脚本目录。我尝试在终端中运行代码行，但收到​​一条`no such job`消息。我在哪里以及如何运行“shell 脚本 [I] 可以运行以构建静态库”？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:25:16.767

首先下载 iOS facebook sdk。然后解压缩 zip 文件，您将打开一个文件夹。在其中您将有一个名为 Scripts 的文件夹打开它，您将找到一个脚本文件“build_facebook_ios_sdk_static_lib.sh” 现在打开终端 [Launchpad --> Utilities --> 终端] 并将这个 shell 脚本文件拖放到终端并按下回车它会在你解压后的下载文件夹中生成一个名为 Lib 的文件夹 打开你的 Xcode 项目并右键单击项目顶部的 naivgator 右键单击​​ --> 将文件添加到“项目”现在导航到你的 facebook sdk 并添加刚刚创建的Lib文件夹内的文件夹..就是这样:)

# html - 如何在 HTML5 图片 gif 中保持在同一行

> ID：11946517
> 
> 赞同：1
> 
> 时间：2012-08-14T05:58:03.277
> 
> 标签：html, line, image

```
$<input id="" name="" value="V" type="radio"><img id="" src=".../image.gif" alt="" border="0"><input id="" name="" value="V" type="radio"><img id="" src=".../image.gif" alt="" border="0"><input id="" name="" value="V" type="radio"><img id="" src=".../image.gif" alt="" border="0">
$<div class="wrapper"> 
```

正如你在这里看到的，我在一个 php 文件中有 3 行或更多行，当我用任何浏览器打开它时，它会在同一行显示 2 行，最后一个在下面，所以如何将这三张图片保持在同一行。 .这与页面大小有关系吗？如果更大，它将在同一行显示它们？这是真的 ？

谢谢您的回复 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:36:51.883

如果我误解了您的要求，请提前道歉，但如果您想在一行中显示三个图像，您可以使用 CSS。在每个图像标签中，您可以通过添加“样式”属性来添加内联样式：

```
<img id="" src=".../image.gif" alt="" style="display: inline; border-width: 0px;" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:38:17.457

`input`如果您在 HTML 源代码中有元素、元素和文本等文本级（内联）内容`img`，如果可用宽度允许，它们将出现在同一行中，并且没有任何东西会导致换行（例如`<br>`）。

为了可用性和可访问性，通常应该在一行上有一个输入项（一个`input`元素和相关标签）。这最好使用导致此类呈现的 HTML 标记来实现，例如将项目包装在`div`元素中。

但是，如果您希望将内容放在一行上，您可以将其全部包装在一个`div`元素中并`white-space: nowrap`在 CSS 中对其进行设置（或者，更有效地，将其全部包装在非标准但得到良好支持的`nobr`元素中）。如果内容不适合可用宽度，这可能会强制水平滚动条。

# php - 需要在 php/html 中设置变量 = 以下拉选择

> ID：11946520
> 
> 赞同：0
> 
> 时间：2012-08-14T05:58:15.120
> 
> 标签：php, html, drop-down-menu

我是 php 和 html 的新手，我需要制作一个下拉列表以及其他输入来创建将在 perl 脚本中使用的参数。

我需要在提交时下拉设置一个变量 = 用户选择的内容。

到目前为止我的代码：

```
<HTML>
<?php
$value0 = "";
$value1 = "Banana";
$value2 = "Apple";
$value3 = "Orange";
$submittedValue;
?>
<select project="FruitList" id="FruitList">
 <option value = <?php echo $value0; ?>><?php echo $value0; ?></option>
 <option value = <?php echo $value1; ?>><?php echo $value1; ?></option>
 <option value = <?php echo $value2; ?>><?php echo $value2; ?></option>
 <option value = <?php echo $value3; ?>><?php echo $value3; ?></option>
<input type="submit" name="submit" id="submit" value="Submit" />
</form>
</HTML> 
```

我不确定如何使用提交按钮，以便可以将 $submittedValue 变量 = 设置为下拉列表中的选定值。帮助！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T06:03:27.270

您可以使用现有选项检查提交的值，如下所示；

```
 <HTML>
        <?php
        $submittedValue = "";
        $value0 = "";
        $value1 = "Banana";
        $value2 = "Apple";
        $value3 = "Orange";
        if (isset($_POST["FruitList"])) {
            $submittedValue = $_POST["FruitList"];
        }
        ?>
        <form action="" name="fruits" method="post">
        <select project="FruitList" id="FruitList" name="FruitList">
         <option value = "<?php echo $value0; ?>"<?php echo ($value0 == $submittedValue)?" SELECTED":""?>><?php echo $value0; ?></option>
         <option value = "<?php echo $value1; ?>"<?php echo ($value0 == $submittedValue)?" SELECTED":""?>><?php echo $value1; ?></option>
         <option value = "<?php echo $value2; ?>"<?php echo ($value0 == $submittedValue)?" SELECTED":""?>><?php echo $value2; ?></option>
         <option value = "<?php echo $value3; ?>"<?php echo ($value0 == $submittedValue)?" SELECTED":""?>><?php echo $value3; ?></option>
        </select>
        <input type="submit" name="submit" id="submit" value="Submit" />
        </form>
        </HTML> 
```

编辑：我已经更正了您的 html 并添加了一些功能来检查提交的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:14:43.427

首先，您缺少表单操作：

```
<HTML>
<?php
$value0 = "";
$value1 = "Banana";
$value2 = "Apple";
$value3 = "Orange";
$submittedValue;
?>
<form action"formProcessing.php" method="POST">

<select project="FruitList" id="FruitList">
<option value = <?php echo $value0; ?>><?php echo $value0; ?></option>
<option value = <?php echo $value1; ?>><?php echo $value1; ?></option>
<option value = <?php echo $value2; ?>><?php echo $value2; ?></option>
<option value = <?php echo $value3; ?>><?php echo $value3; ?></option>
<input type="submit" name="submit" id="submit" value="Submit" />
</form>
</HTML> 
```

然后您需要创建一个新脚本 formProcessing.php，您可以使用 $_POST 变量访问表单变量。

```
<?php
function filter($data) {
$data = trim(htmlentities(strip_tags($data)));
if (get_magic_quotes_gpc())
$data = stripslashes($data);
$data = mysql_real_escape_string($data);
return $data;
}
foreach($_POST as $key => $value) {
 $mydata[$key] = filter($value);
}
echo $mydata['FruitList'];
?> 
```

filter 方法用于转义 $_POST 变量，以保护您的应用程序免受 MySQL 和 XSS 攻击。这应该创建 $_POST 变量的新副本，但可以通过 $mydata 数组访问。

# android - Android，处理来电事件

> ID：11946522
> 
> 赞同：2
> 
> 时间：2012-08-14T05:58:27.787
> 
> 标签：android, countdowntimer

我正在开发一个具有倒数计时器的应用程序。我只想在电话有来电时暂停该计时器。每当我们接到电话时，有什么方法可以触发事件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T06:48:44.653

我认为你应该扩展`PhoneStateListener`类。在那个类中你处理电话状态。为此，使用清单文件中的权限来处理电话状态（即`<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE">`）。

并用于`TelephonyManager`获取手机状态。

```
 TelephonyManager  manager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
 manager.listen(this, LISTEN_CALL_STATE); // Registers a listener object to receive notification of changes in specified telephony states. 
```

并覆盖此方法。

```
 @Override
public void onCallStateChanged(int state, String incomingNumber) {
    super.onCallStateChanged(state, incomingNumber);
    switch (state) {
    case TelephonyManager.CALL_STATE_OFFHOOK:
    case TelephonyManager.CALL_STATE_RINGING:
        // Here you can perform your task while phone is ringing.
        break;
    case TelephonyManager.CALL_STATE_IDLE:
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T12:34:55.933

当收到电话时，操作系统会触发一条消息，技术上称为广播。

任何应用程序都可以通过注册 PhoneIntentReceiver 查看/响应此消息，如果安装的多个应用程序已为此注册，则所有应用程序都有机会根据优先级查看此消息。

您可以通过 Manifest 或以编程方式注册 PhoneIntentReceiver。在这两种情况下，您都指定了一个扩展项目中广播接收器的类，它将在检测到来电时接收回调。

然后在这个类中，控件被传递给 onReceive 方法。它在这里，你可以停止你的 Timmer。

这就是它背后的故事。Happy Coding。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T10:29:20.423

在您的 Broadcastreceiver 中[`onReceive()`](http://developer.android.com/reference/android/content/BroadcastReceiver.html#onReceive(android.content.Context,%20android.content.Intent))编写以下代码

不要忘记给予适当的许可

```
TelephonyManager telephony = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
            MyCallStateListener customPhoneListener = new MyCallStateListener();

            telephony.listen(customPhoneListener, PhoneStateListener.LISTEN_CALL_STATE);
            if (!intent.getStringExtra(TelephonyManager.EXTRA_STATE).equals(TelephonyManager.EXTRA_STATE_OFFHOOK))
                return;

public class MyCallStateListener extends PhoneStateListener {

        public void onCallStateChanged(int state, String incomingNumber) {

        super.onCallStateChanged(state, incomingNumber);

        switch (state) {
        case TelephonyManager.CALL_STATE_RINGING:
                        break;
        case TelephonyManager.CALL_STATE_OFFHOOK:
                        break;
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T06:09:40.543

您必须编写侦听来电的广播接收器

有关更多信息，请参阅[此链接...](https://stackoverflow.com/questions/1853220/retrieve-incoming-calls-phone-number-in-android)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-02T18:56:47.417

我想说最好的实现是利用时间戳、定时器（java.util.Timer 或 android.app.AlarmManager），然后使用广播接收器监听电话事件。

基本上每次您需要在一段时间内启动警报时，都会存储该警报开始的时间戳（可能在 sql db 中最简单），然后启动计时器/警报。当警报响起时，请确保清理您存储的时间戳。

确保收听电话状态的变化，并在接听电话时清除所有警报/计时器并记录停止日期以及之前的时间戳，然后在电话结束时（从您的接收者事件）重新启动计时器/警报剩余时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-30T09:16:52.330

你必须为此使用广播接收器......

首先在 manifest.xml 中注册您的接收器

`<receiver android:name="com.cygnet.phonefinder.receiver.PhoneIntentReceiver" > <intent-filter> <action android:name="android.intent.action.PHONE_STATE" /> </intent-filter> </receiver>`

然后你必须处理那个接收器

```
public class PhoneIntentReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) { } } 
```

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2012-08-14T06:07:37.513

```
public class OutgoingCallReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

           Toast.makeText(context, "My Toast", Toast.LENGTH_LONG).show();
    }
} 
```

试试这个接收器来触发一个事件

# c++ - 优化按位逻辑

> ID：11946523
> 
> 赞同：12
> 
> 时间：2012-08-14T05:58:30.767
> 
> 标签：c++, optimization, bit-manipulation, 64-bit

在我的代码中，以下几行当前是热点：

```
int table1[256] = /*...*/;
int table2[512] = /*...*/;
int table3[512] = /*...*/;

int* result = /*...*/;
for(int r = 0; r < r_end; ++r)
{
    std::uint64_t bits = bit_reader.value(); // 64 bits, no assumption regarding bits.

    // The get_ functions are table lookups from the highest word of the bits variable.

    struct entry
    {
        int sign_offset : 5;
        int r_offset    : 4;        
        int x           : 7;        
    };

    // NOTE: We are only interested in the highest word in the bits variable.

    entry e;
    if(is_in_table1(bits)) // branch prediction should work well here since table1 will be hit more often than 2 or 3, and 2 more often than 3.
        e = reinterpret_cast<const entry&>(table1[get_table1_index(bits)]);
    else if(is_in_table2(bits))
        e = reinterpret_cast<const entry&>(table2[get_table2_index(bits)]);
    else
        e = reinterpret_cast<const entry&>(table3[get_table3_index(bits)]);

    r                 += e.r_offset; // r is 18 bits, top 14 bits are always 0.
    int x              = e.x; // x is 14 bits, top 18 bits are always 0\.        
    int sign_offset    = e.sign_offset;

    assert(sign_offset <= 16 && sign_offset > 0);

    // The following is the hotspot.

    int sign    = 1 - (bits >> (63 - sign_offset) & 0x2);
    (*result++) = ((x << 18) * sign) | r; // 32 bits

    // End of hotspot

    bit_reader.skip(sign_offset); // sign_offset is the last bit used.
} 
```

虽然我还没有想出如何进一步优化这一点，但可能来自[操作的内在函数 Bit-Granularity](http://software.intel.com/sites/products/documentation/hpc/composerxe/en-us/2011Update/cpp/lin/intref_cls/common/intref_bk_avx2_manipulate.htm)，[`__shiftleft128`](http://msdn.microsoft.com/en-US/library/szzkhewe%28v=vs.80%29)或者[`_rot`](http://msdn.microsoft.com/en-us/library/t5e2f3sc%28v=vs.80%29.aspx)可能有用？

请注意，我还在 GPU 上对结果数据进行处理，所以重要的是得到`result`GPU 可以用来计算正确的数据。

建议？

编辑：

添加了表格查找。

编辑：

```
 int sign = 1 - (bits >> (63 - e.sign_offset) & 0x2);
000000013FD6B893  and         ecx,1Fh  
000000013FD6B896  mov         eax,3Fh  
000000013FD6B89B  sub         eax,ecx  
000000013FD6B89D  movzx       ecx,al  
000000013FD6B8A0  shr         r8,cl  
000000013FD6B8A3  and         r8d,2  
000000013FD6B8A7  mov         r14d,1  
000000013FD6B8AD  sub         r14d,r8d 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:27:19.227

*我忽略了符号为 +/-1 的事实，所以我正在纠正我的答案。*

假设这`mask`是一个为所有可能的值正确定义位掩码的数组`sign_offset`，这种方法可能更快

```
 bool sign = (bits & mask[sign_offset]) != 0;
  __int64 result = r;
  if (sign)
    result |= -(x << 18);
  else
    result |= x << 18; 
```

VC2010优化构建生成的代码

操作码（11 条指令）

```
; 23   :   __int64 sign = 1 - (bits >> (63 - sign_offset) & 0x2);

    mov rax, QWORD PTR bits$[rsp]
    mov ecx, 63                 ; 0000003fH
    sub cl, BYTE PTR sign_offset$[rsp]
    mov edx, 1
    sar rax, cl

; 24   :   __int64 result  = ((x << 18) * sign) | r; // 32 bits
; 25   :   std::cout << result;

    and eax, 2
    sub rdx, rax
    mov rax, QWORD PTR x$[rsp]
    shl rax, 18
    imul    rdx, rax
    or  rdx, QWORD PTR r$[rsp] 
```

我的代码（8 条指令）

```
; 34   :   bool sign = (bits & mask[sign_offset]) != 0;

    mov r11, QWORD PTR sign_offset$[rsp]

; 35   :   __int64 result = r;
; 36   :   if (sign)
; 37   :     result |= -(x << 18);

    mov rdx, QWORD PTR x$[rsp]
    mov rax, QWORD PTR mask$[rsp+r11*8]
    shl rdx, 18
    test    rax, QWORD PTR bits$[rsp]
    je  SHORT $LN2@Test1
    neg rdx
$LN2@Test1:

; 38   :   else
; 39   :     result |= x << 18;

    or  rdx, QWORD PTR r$[rsp] 
```

*由斯基兹*编辑**

 *要摆脱分支：

```
shl rdx, 18
lea rbx,[rdx*2]
test rax, QWORD PTR bits$[rsp]
cmove rbx,0
sub rdx,rbx
or rdx, QWORD PTR r$[rsp] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:44:41.800

让我们做一些等价的转换：

```
int sign = 1 - (bits >> (63 - sign_offset) & 0x2);
int result  = ((x << 18) * sign) | r; // 32 bits 
```

也许处理器会发现移位 32 位值更便宜 -`HIDWORD`用任何导致直接访问高阶 DWORD 而无需移位的定义替换。另外，为了准备下一步，让我们重新安排第二个作业中的移位：

```
#define HIDWORD(q) ((uint32_t)((q) >> 32))
int sign = 1 - (HIDWORD(bits) >> (31 - sign_offset) & 0x2);
int result  = ((x * sign) << 18) | r; // 32 bits 
```

观察到，在二进制补码中，`q * (-1)`等于`~q + 1`或`(q ^ -1) - (-1)`，而`q * 1`等于`(q ^ 0) - 0`。这证明了摆脱讨厌的乘法的第二个转换：

```
int mask = -(HIDWORD(bits) >> (32 - sign_offset) & 0x1);
int result  = (((x ^ mask) - mask) << 18) | r; // 32 bits 
```

现在让我们再次重新安排移位：

```
int mask = (-(HIDWORD(bits) >> (32 - sign_offset) & 0x1)) << 18;
int result  = (((x << 18) ^ mask) - mask) | r; // 32 bits 
```

回忆有关`-`和的恒等式`~`：

```
int mask = (~(HIDWORD(bits) >> (32 - sign_offset) & 0x1) + 1) << 18; 
```

再次移位重排：

```
int mask = (~(HIDWORD(bits) >> (32 - sign_offset) & 0x1)) << 18 + (1 << 18); 
```

谁能最终解开这个？（无论如何，转换是否正确？）

（请注意，只有在真实 CPU 上进行分析才能评估性能。指令计数之类的措施是行不通的。我什至不确定这些转换是否有帮助。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T08:52:36.327

要计算符号，我建议这样做：

```
int sign = (int)(((int64_t)(bits << sign_offset)) >> 63); 
```

这只有 2 条指令（`shl`和`sar`）。

如果`sign_offset`比我预期的大一：

```
int sign = (int)(((int64_t)(bits << (sign_offset - 1))) >> 63); 
```

这还不错。应该只有3条指令。

这给出了 0 或 -1 的答案，你可以这样做：

```
(*result++) = (((x << 18) ^ sign) - sign) | r; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T09:03:06.990

内存访问通常是现代 CPU 上所有优化问题的根源。您被性能工具误导了减速发生的位置。编译器可能正在将代码重新排序为如下所示：-

```
int sign    = 1 - (bits >> (63 - get_sign_offset(bits)) & 0x2);
(*result++) = ((get_x(bits) << 18) * sign) | (r += get_r_offset(bits)); 
```

甚至：-

```
(*result++) = ((get_x(bits) << 18) * (1 - (bits >> (63 - get_sign_offset(bits)) & 0x2))) | (r += get_r_offset(bits)); 
```

这将突出显示您确定为热点的行。

我会看看你组织记忆的方式以及各种 get_ 函数的作用。你能发布 get_ 函数吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T10:46:43.663

我认为这是最快的解决方案：

```
*result++ = (_rotl64(bits, sign_offset) << 31) | (x << 18) | (r << 0); // 32 bits 
```

然后根据是否在 GPU 上设置符号位来纠正 x。*

# android - android中的自定义进度条

> ID：11946527
> 
> 赞同：0
> 
> 时间：2012-08-14T05:58:45.150
> 
> 标签：android, android-layout

我是创建自定义组件的新手。我正在通过扩展**ProgressBar**创建自定义进度条。但得到这个例外。

```
07-07 17:38:00.700: D/AndroidRuntime(3513): Shutting down VM
07-07 17:38:00.700: W/dalvikvm(3513): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
07-07 17:38:00.720: E/AndroidRuntime(3513): FATAL EXCEPTION: main
07-07 17:38:00.720: E/AndroidRuntime(3513): android.view.InflateException: Binary XML file line #7: Error inflating class com.customprogress.TextProgressBar
07-07 17:38:00.720: E/AndroidRuntime(3513):     at android.view.LayoutInflater.createView(LayoutInflater.java:503)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at android.app.Activity.setContentView(Activity.java:1647)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at com.customprogress.TextProgressBar.<init>(TextProgressBar.java:22)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at com.customprogress.Progress$Click.onClick(Progress.java:27)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at android.view.View.performClick(View.java:2408)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at android.view.View$PerformClick.run(View.java:8816)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at android.os.Handler.handleCallback(Handler.java:587)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at android.os.Looper.loop(Looper.java:123)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at android.app.ActivityThread.main(ActivityThread.java:4627)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at java.lang.reflect.Method.invokeNative(Native Method)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at java.lang.reflect.Method.invoke(Method.java:521)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at dalvik.system.NativeStart.main(Native Method)
07-07 17:38:00.720: E/AndroidRuntime(3513): Caused by: java.lang.NoSuchMethodException: TextProgressBar(Context,AttributeSet)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at java.lang.Class.getMatchingConstructor(Class.java:660)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at java.lang.Class.getConstructor(Class.java:477)
07-07 17:38:00.720: E/AndroidRuntime(3513):     at android.view.LayoutInflater.createView(LayoutInflater.java:475)
07-07 17:38:00.720: E/AndroidRuntime(3513):     ... 20 more 
```

我的创建代码在这里.. TextProgressBar.class

```
public class TextProgressBar extends ProgressBar {
    Activity activity;

    public TextProgressBar(Activity activity) {
        super(activity);
        this.activity = activity;
        this.activity.setContentView(R.layout.custom_progress);
    } 
```

我从我的 Progress.java 活动中调用这个类

```
public class Progress extends Activity {
    /** Called when the activity is first created. */
    Button buttonClick;
    TextProgressBar textProgressBar;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        buttonClick = (Button) findViewById(R.id.buttonClick);
        buttonClick.setOnClickListener(new Click());
    }

    class Click implements OnClickListener
    {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            textProgressBar = new TextProgressBar(Progress.this);
        }

    }
} 
```

custom_progress 的 xml 在这里..

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <com.customprogress.TextProgressBar
        android:id="@+id/progressBarWithText"
        android:layout_width="100dp"
        android:layout_height="100dp"
       />

</LinearLayout> 
```

如果有人知道这个的解决方案，请帮助我..提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:04:14.757

尝试添加第二个构造函数。

```
public TextProgressBar(Context context, AttributeSet attrs) {
    super(context, attrs); 

} 
```

看看是否有帮助：

# javascript - 使用 Javascript 创建 XML 文件

> ID：11946530
> 
> 赞同：3
> 
> 时间：2012-08-14T05:58:48.520
> 
> 标签：javascript, xml

我有以下代码：

```
xmlDoc=loadXMLDoc("dbbackup.xml");
x=xmlDoc.getElementsByTagName("record");
alert(x);
for (i=0;i<3;i++) {
  newel=xmlDoc.createElement("edition");
  newtext=xmlDoc.createTextNode("first");
  alert("x  : "+x[i]);
  alert("newtext :"+newtext.nodevalue);
  x[i].appendChild(newel);
  alert("sd");
}
function loadXMLDoc(dname) {
  if (window.XMLHttpRequest) {
    xhttp=new XMLHttpRequest();
  } else {
    xhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xhttp.open("GET",dname,false);
  xhttp.send();
  return xhttp.responseXML;
} 
```

我`dbbackup.xml`在同一位置创建了 XML 文件，如下所示：

```
<sticky>
  <record></record>
</sticky> 
```

但是在运行我的脚本后，`xml`文件没有得到更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:36:34.680

SomeKidWithHTML 是对的。

JavaScript 旨在仅修改内存中加载在浏览器框架内的文件。

将浏览器视为您的孩子（html、xml 等）可以在其中玩的沙盒。只要 Johnny (xml) 在沙盒中玩，一切都很好。但是如果约翰尼被允许在那个沙盒之外玩，想想网站可能在你的机器上造成的破坏。

JavaScript 本身不可能永久影响本地计算机上的文件。它只能在沙箱内运行（在本地，它可以调用 Java 或其他 API 来影响更改，但这是另一回事）。

JavaScript 只是客户端。如果您希望它影响服务器，它只能通过回调服务器来实现。在服务器上，您将需要某种编程（asp.net、java、php、html 等）来接收和应答该呼叫并对其进行处理。

JavaScript 本身非常强大……但仅限于沙箱（浏览器）。要让它影响该浏览器之外的任何其他内容，它必须依赖于已经存在并准备好接收这些请求的其他程序。

而这一切都是以安全的名义，主要是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T13:28:17.510

您可以从客户端的网页收集数据并将它们发送到服务器（ajax），然后服务器将生成 xml 文件并发送回文件的链接（ajax）。使用 javascript 使用服务器返回的链接生成下载链接。

这是我在我的一个项目中解决问题的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T06:01:37.903

Javascript 不能修改磁盘上的文件，它只能在客户端的 Web 浏览器中为客户端运行。

要实际写入和写入服务器上的文件，您必须使用服务器端语言和技术，例如 PHP 或 ASP。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T06:11:20.137

我做了这个 - 在客户端制作 XML，然后使用日常实践 Mike

函数 makeSlot() {

```
 var xmlhttp = new XMLHttpRequest();    
  xmlhttp.onreadystatechange=function() { if (xmlhttp.readyState==4 && xmlhttp.status==200) showBon(); } 
  xmlhttp.open("POST","crMakeSlot.php",true);  
  xmlhttp.send(wrapUp());  
}

/***
* make the final transaction - using XML
*/
function wrapUp () {   

  var transaction = document.implementation.createDocument("","", null);           

  var operator = document.createElement("operator");
  var textblok1 = document.createTextNode(document.getElementById("rText").value);
      operator.appendChild(textblok1);         

  var root = document.createElement("transaction"); 
      root.setAttribute("tstamp",  now);
      root.setAttribute("sequenceno", zSequenceNo.textContent);
      if (parseInt(document.getElementById("zDankort").value) > 0) root.setAttribute("dankort", document.getElementById("zDankort").value);        
      if (parseInt(document.getElementById("zCash").value) > 0) root.setAttribute("cash", document.getElementById("zCash").value);              
      if (parseInt(document.getElementById("zCredit").value) > 0) root.setAttribute("credit", document.getElementById("zCredit").value);              
      if (parseInt(document.getElementById("zCheck").value) > 0) root.setAttribute("check", document.getElementById("zCheck").value);              
      if (parseInt(document.getElementById("zGiftcard").value) > 0) root.setAttribute("giftcard", document.getElementById("zGiftcard").value);              
      if (parseInt(document.getElementById("zVoucher").value) > 0) root.setAttribute("voucher", document.getElementById("zVoucher").value);              

      root.appendChild(operator);

  var divObj = document.getElementsByTagName("div");   

/***
*  when column value is 4, then we have our data complete - next cycle 
*/
  for (ix = 0; ix < divObj.length; ix++) {     
    switch (divObj[ix].getAttribute("column")) {
     case "1": var row = document.createElement("row"); row.setAttribute("item",divObj[ix].textContent);
     case "2": row.setAttribute("price",divObj[ix].textContent);        
     case "3": row.setAttribute("quantum",divObj[ix].textContent);        
     case "4": root.appendChild(row); 
     default: break;                 
    }
  }        
  transaction.appendChild(root);
  return(transaction);
} 
```

# c# - 反序列化使得字段是空列表而不是 null

> ID：11946531
> 
> 赞同：11
> 
> 时间：2012-08-14T05:58:49.767
> 
> 标签：c#, .net, json, json.net, deserialization

如果我有这样的课程：

```
[DataContract(Name = "", Namespace = "")]
public class MyDataObject
{
    [DataMember(Name = "NeverNull")]
    public IList<int> MyInts { get; set; }
} 
```

当反序列化以下字符串时，有没有办法可以使 MyInts 字段成为非空的空列表？

```
string serialized = @"{""NeverNull"":null}";

MyDataObject myDataObject = JsonConvert.DeserializeObject<MyDataObject>(serialized); 
```

我正在使用 Newtonsoft.Json

我问的原因是我有一个相当复杂的 json 请求要解析，它包含对象列表的嵌套，我想要反序列化代码来创建这些对象，这样我就可以避免大量的空检查：

```
if (foo.bar != null)
{
    foreach (var bar in foo.bar)
    {
        if (bar.baz != null)
        {
            foreach (var baz in bar.baz)
            {
                ... 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T06:09:01.843

也许添加一个在反序列化结束时检查这个的序列化后回调？

```
[DataContract(Name = "", Namespace = "")]
public class MyDataObject
{
    [OnDeserialized]
    public void OnDeserialized(StreamingContext context)
    {
        if (MyInts == null) MyInts = new List<int>();
    }
    [DataMember(Name = "NeverNull")]
    public IList<int> MyInts { get; set; }
} 
```

另请注意`JsonConvert`（与 不同`DataContractSerializer`）执行默认构造函数，因此*通常*您也可以添加一个默认构造函数：

```
 public MyDataObject()
    {
        MyInts = new List<int>();
    } 
```

但是，在这种情况下，**显式** `"NeverNull":null`在反序列化期间将其更改回`null`，因此我在上面使用了回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:32:33.900

`IList<int>`with的初始化`new int[0]`会帮助你！它是给我最好结果的解决方案。

# c++ - 链接静态库时未定义的引用

> ID：11946536
> 
> 赞同：0
> 
> 时间：2012-08-14T05:59:11.250
> 
> 标签：c++, gcc, linker, ld, avr-gcc

我有几个使用 avr-ar 创建的库。每个都包含一些对象。

library1 中的对象需要 library2 中对象的符号。问题是，当我尝试编译整个东西时，我遇到`undefined reference`了问题。

这就是失败的地方，$(INCLUDE) $(CFLAGS) $(LIBS)

```
CFLAGS=-mmcu=atmega328p -DF_CPU=16000000UL -Os -w -funsigned-char -funsigned-bitfields -fpack-struct -fshort-enums
LIBS=library1.a library2.a

$(CXX) $(INCLUDE) $^ $(CFLAGS) -o $@ $(LIBS) 
```

我正在运行 Ubuntu 12.04 和

```
Using built-in specs.
COLLECT_GCC=avr-g++
COLLECT_LTO_WRAPPER=/usr/lib/gcc/avr/4.5.3/lto-wrapper
Target: avr
Configured with: ../src/configure -v --enable-languages=c,c++ --prefix=/usr/lib --infodir=/usr/share/info --mandir=/usr/share/man --bindir=/usr/bin --libexecdir=/usr/lib --libdir=/usr/lib --enable-shared --with-system-zlib --enable-long-long --enable-nls --without-included-gettext --disable-libssp --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=avr
Thread model: single
gcc version 4.5.3 (GCC) 
```

如果我从库中提取对象并将所有内容放入库中，一切都会顺利进行。

我想把它们分开，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:12:27.243

您可以尝试通过对库进行分组来使链接器执行递归链接。我没有检查以下但可能会改变：

```
LIBS=library1.a library2.a 
```

到

```
LIBS=-Wl,--start-group library1.a library2.a -Wl,--end-group 
```

这将导致链接器来回运行，直到定义所有符号，以链接器性能为代价。当两个库相互依赖时，这很有用，因为链接器通常只传递每个文件一次。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:59:24.487

由于您说 library1 依赖于 library2 的引用，因此您的 LIBS=library1.a library2.a 需要更改为 LIBS=library2.a library1.a

在编译过程中，符号是从你列出的库的从左到右的顺序解析的，所以如果你依赖于 library1.a 中的 library2.a，你需要首先提供 library2.a。

# android - 如何检查不在模拟器中的语言？

> ID：11946537
> 
> 赞同：0
> 
> 时间：2012-08-14T05:59:16.883
> 
> 标签：android

我读到，在 Jelly Bean 版本中，他们添加了印度语言，如卡纳达语、泰卢固语、马拉雅拉姆语。但我认为果冻豆模拟器中不存在这些语言，所以如果我想尝试任何这些语言的任何字符串，我该如何实现呢？正是我的问题是，如果模拟器中不存在特定语言，如何为这些语言开发，我还有其他方法可以使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:09:09.827

您可以使用自定义字体。要使用自定义字体，请执行以下操作： 1\. 找到所需语言的字体，将其放入 assets 文件夹 2.

```
Typeface mFont1 = Typeface.createFromAsset(context.getAssets(), "myFont.ttf");
myTextView.setTypeface(mFont1); 
```

要将字体应用于当前视图中的所有字段，您可以使用：

```
 /**
 * Sets a selected font for all activity child views
 * @param activity
 * @param font
 */
public static void setFont(Activity activity,Typeface font) {
    setFont(activity.findViewById(android.R.id.content).getRootView(),font);
}

/**
 * Sets a selected font for current view and all its child views
 * @param activity
 * @param font
 */
public static void setFont(View view,Typeface font) {
    if (font == null || view == null)
        return;

    if (view instanceof TextView)
        ((TextView)view).setTypeface(font);

    if (view instanceof ViewGroup) {
        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
            setFont(((ViewGroup) view).getChildAt(i),font);
        }
    }
} 
```

# batch-file - 批处理文件：如何操作文件的内容

> ID：11946540
> 
> 赞同：1
> 
> 时间：2012-08-14T05:59:34.277
> 
> 标签：batch-file, dos

我有一个 Input.txt 文件，其中包含绝对地址：

我正在从该目录运行批处理文件：“D:\FINAL\FINAL_3\mybatch.bat” Input.txt 存在于：“D:\FINAL\FINAL_3\Input.txt”

**输入.txt：**

> D:\FINAL\FINAL_3\xx\yy\User\src\abc.c D:\FINAL\FINAL_3\qq\ww\src\def.c

**输出模板.txt**

> 第 1 行：BLA BLA BLA
> 第 2 行：BLA BLA BLA
> 第 N 行：BLA BLA BLA

相对文件 = 文件 =

> 第 1 行：BLA BLA BLA
> 第 2 行：BLA BLA BLA
> 第 N 行：BLA BLA BLA

现在，我需要使用 Input.txt 和 Output_Template.txt 中的信息创建一个新的 Output.txt 文件：

**输出.txt**

> 第 1 行：BLA BLA BLA
> 第 2 行：BLA BLA BLA
> 第 N 行：BLA BLA BLA

相对文件 = .\xx\yy\User\src\abc.c
文件 = D:\FINAL\FINAL_3\xx\yy\User\src\abc.c
相对文件 = .\qq\ww\src\def.c
文件 = D:\FINAL\FINAL_3\qq\ww\src\def.c

> 第 1 行：BLA BLA BLA
> 第 2 行：BLA BLA BLA
> 第 N 行：BLA BLA BLA

我正在做的是：
读取 Input.txt 的内容并将其写入 Output.txt

> for /f "tokens=* delims= " %%a in (%CD%\Input.txt) do (
> echo FILE=%%a >> %file_name%
> )

这只是打印：

> 文件 = D:\FINAL\FINAL_3\xx\yy\User\src\abc.c
> 文件 = D:\FINAL\FINAL_3\qq\ww\src\def.c

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:19:59.680

您的脚本甚至没有读取模板。是否可以使用两个模板，一个用于文件路径上方的所有内容，一个用于以下所有内容？这将使它们与文件路径的组合更加容易。

要获取相对路径，您可以使用波浪号 (~) 语法从 %%a 变量中提取您需要的内容。看到[这个问题](https://stackoverflow.com/questions/5034076/what-does-dp0-mean-and-how-does-it-work)。

# c++ - 为什么复制省略不适用于 std::move？

> ID：11946551
> 
> 赞同：7
> 
> 时间：2012-08-14T06:00:11.530
> 
> 标签：c++, gcc, c++11, copy-constructor

我使用下面的代码来测试复制省略：

```
class foo
{
public:
    foo() {cout<<"ctor"<<endl;};
    foo(const foo &rhs) {cout<<"copy ctor"<<endl;}
};

int g(foo a)
{
    return 0;
}

int main()
{
    foo a;
    g(std::move(a));
    return 0;
} 
```

我预计只会调用默认构造函数，因为参数`g()`是右值，并且副本将被省略。但是结果显示默认构造函数和复制构造函数都被调用了。为什么？

如果我将函数调用更改为`g(foo())`，则副本将被省略。`foo()`和的返回类型有什么区别`std::move(a)`？如何使编译器在左值上省略副本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T06:21:25.850

复制省略只能在少数特定情况下发生，其中最常见的是临时复制（其他是返回本地，以及抛出/捕获异常）。您的代码没有临时生成，因此不会省略任何副本。

复制构造函数被调用是因为`foo`没有移动构造函数（移动构造函数不会为具有显式复制构造函数的类隐式生成），因此 `std::move(a)`匹配`foo(const foo &rhs)`构造函数（用于构造函数参数）。

在以下情况下可以省略左值的副本（尽管没有办法*强制*编译器执行省略）：

```
foo fn() {
    foo localAutomaticVariable;
    return localAutomaticVariable; //Copy to construct return value may be elided
}

int main() {
    try {
        foo localVariable;
        throw localVariable; //The copy to construct the exception may be elided
    }
    catch(...) {}
} 
```

如果你想在传递函数参数时避免复制，你可以使用一个移动构造函数来窃取给它的对象的资源：

```
class bar {
public:
    bar() {cout<<"ctor"<<endl;};
    bar(const bar &rhs) {cout<<"copy ctor"<<endl;}
    bar(bar &&rhs) {cout<<"move ctor"<<endl;}
};

void fn(bar a)
{
}
//Prints:
//"ctor"
//"move ctor"
int main()
{
    bar b;
    f(std::move(b));
} 
```

此外，只要允许复制省略但不发生复制省略，则将使用移动构造函数（如果可用）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T06:02:38.977

您需要声明`g`为：

```
int g(foo && a) //accept argument as rvalue reference
{
    return 0;
} 
```

现在它可以通过右值引用接受参数。

在您的情况下，即使表达式产生 rvalue，它也不会绑定到*按 value*`std::move(a)`接受参数的参数。接收端也必须是*右值引用*。

 **在 的情况下`g(foo())`，复制省略由编译器执行，这是一种优化。**这不是语言的要求**^([[直到 C++17]](https://stackoverflow.com/q/38043319/3132718))。如果您愿意，您可以禁用此优化：然后`g(foo())`和`g(std::move(a))`预期的行为完全相同。

但是，如果您`g`按照我上面的建议进行更改，则该调用`g(foo())`将不会进行复制，因为**语言要求不要使用 && 进行复制**。它不再是编译器优化。**

# php - Thumbsup：为什么 $user_id 被解释为一个函数？

> ID：11946553
> 
> 赞同：0
> 
> 时间：2012-08-14T06:00:21.857
> 
> 标签：php, function, callback, warnings

**细节**

用户`id=12`尝试打开页面，出现以下错误：

**警告：call_user_func() 期望参数 1 是有效的回调、`'12'`未找到函数或 E:\thumbsup2\classes\thumbsup.php 中的无效函数名称（第 201 行）**

违规行是`$user_id = (int) call_user_func(ThumbsUp::config('user_id_callback'));`

大拇指.php

```
public static function get_user_id()
{
    // Cache
    static $user_id = FALSE;

    // This code only needs to be executed once per request
    if ($user_id !== FALSE)
        return $user_id;

    // The callback config is left empty
    if ( ! ThumbsUp::config('user_id_callback'))
        return $user_id = NULL;

    // Load the user id
    $user_id = (int) call_user_func(ThumbsUp::config('user_id_callback'));//<<-- line 201

    // Set user id to NULL if not found
    return ($user_id) ? $user_id : $user_id = NULL;
} 
```

在 config.php 中

```
 'user_id_callback' => $userz_id, //                                 <<-- $userz_id is 12 
```

**问题**

如何返回 12 作为 $user_id ？为什么 12 被解释为一个函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:22:55.403

因为 call_user_func(::config('user_id_callback')) 和 user_id_callback 是 12。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:54:56.803

你根本不需要 call_user_func 方法。看起来你正在做的只是从配置文件中加载你的用户 ID，看起来你没有做任何修改它，所以它应该可以工作。

```
$user_id = ThumbsUp::config('user_id_callback'); 
```

# objective-c - iOS 应用上的 PIN 身份验证，然后列出所有 ios 应用

> ID：11946554
> 
> 赞同：0
> 
> 时间：2012-08-14T06:00:21.933
> 
> 标签：objective-c, ios, xcode

我想在我的主 ios 应用程序上列出我所有已发布的 iOS 应用程序列表。

我的主要 iOS 应用程序将像这样执行：第一个屏幕将要求输入 PIN（授权码，用户将从我的其他 web url 获得此代码），下一个屏幕将显示所有已发布的应用程序（从我的开发人员 a/c 发布) 的 iTunes 商店。应用程序将是免费类型类别，如果用户单击任何特定应用程序，则应启动 iTunes 应用程序以在设备上下载该应用程序。

有人可以建议我，以这种方式向我的客户展示我的应用程序是否违反了 Apple 的规则？苹果会拒绝我的应用吗？

虽然我试图了解 iTunes 的搜索 API

[http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)

非常感谢，

# android - 在呼叫内容提供者中插入数据失败呼叫应用程序

> ID：11946556
> 
> 赞同：0
> 
> 时间：2012-08-14T06:00:26.647
> 
> 标签：android, android-contentprovider

我正在尝试将数据插入呼叫日志并将其检索回来，应用程序运行良好，但活动中没有显示数据，我的代码如下。

```
 ContentValues values = new ContentValues();
    values.put(Calls.CACHED_NAME, "Chaitanya");

    Uri uri = getContentResolver().insert(Calls.CONTENT_URI, values); 
```

uri 也接收一个值，但游标不返回任何记录。

```
 Cursor cursor = getContentResolver().query(Calls.CONTENT_URI,
    projection, null, null, null); 
```

然后使用该光标显示数据。

程序执行后，如果调用或调用日志应用程序启动，则会显示异常。

代码可能存在什么问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:36:59.477

您只在数据库中添加了一个名称。尝试添加更多信息，如呼叫类型、日期、持续时间......

# jquery - HTML5 每 _ 秒播放音频

> ID：11946564
> 
> 赞同：0
> 
> 时间：2012-08-14T06:01:12.533
> 
> 标签：jquery, playback, html5-audio, intervals

我想要做的是让它在页面加载时播放 highpitchsound.wav（或 .mp3）x 秒，用户在页面加载时在警报框中定义。

在警报框中有一个文本框和一个“确认”按钮。默认文本是 5 代表 5 秒，或 5000 代表 5000 毫秒。

我以前使用过 jquery 的间隔，在这里和那里多次在 html5 中弄乱了音频，不知道如何将两者结合起来，也不知道如何制作自定义警报框 onload。

```
<html>
<head>
<title>Audio Play Interval</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {

});
</script>
</head>
<body>
    <audio autoplay="true">
        <source src="sounds/highpitchsound.mp3" type="audio/mpeg" />
        <source src="sounds/highpitchsound.wav" type="audio/wav" />
        <source src="sounds/highpitchsound.ogg" type="audio/ogg" />
        Your browser does not support the audio element.
    </audio>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T01:40:17.883

## 理解

您可以通过将音频元素专门引用为对象来实现此目的。因为 jquery 还没有扩展，所以`HTMLAudioElement`您必须专门引用 jquery 对象中音频元素的第一条记录。

然后，您可以简单地引用任何函数，例如`.play()`,`.pause()`或`.load()`从那时起。

您可以像这样简单地执行此操作：

```
setInterval(function() { $('audio')[0].play(); },1000); 
```

**打破这个**

*   我们使用每毫秒`setInterval(a(),b)`运行一次函数`a()``b`

*   引用 dom 中的音频 html 对象，`$('audio')`然后选择其中的`HTMLAudioElement`对象与之交互（`$('audio')[0]`）

*   那么我们可以简单地使用其中的任何功能（即`.play()`）

* * *

## 解决方案

现在，为了实现你想要的，你可以这样做，

**Javascript：**

```
startplaying(parseInt(prompt('in milliseconds, set an interval!')));

function startplaying(time) {
    var run = setInterval(function() { $('audio')[0].play(); }, time);
} 
```

这首先提示用户输入时间，然后通过用户设置的时间执行功能，并进行触摸验证。

*   **[jsfiddle](http://jsfiddle.net/mJ3R4/)**

# php - 如何生成动态id ?

> ID：11946569
> 
> 赞同：1
> 
> 时间：2012-08-14T06:01:29.813
> 
> 标签：php, html, loops, auto-increment

我有一个包含 UL 和 LI 的 div。在此我想生成该 LI 的动态 ID。现在我使用了静态 HTML：

```
<li id= "nav-fragment-1">
<li id= "nav-fragment-2">
<li id= "nav-fragment-3">
<li id= "nav-fragment-4"> 
```

我想要相同的输出，但是是动态的。现在我有点困惑我将如何得到这个？

```
<div id="featured">
  <ul class="ui-tabs-nav">
<?php $i = 0; foreach($posts as $post): ?>
   <li class="ui-tabs-nav-item ui-tabs-selected" id="nav-fragment-1">
    <a href="<?php //echo $i++;) ?>"><span><?php echo $this->escape($post['title']) ?>
<?php if($leads): ?>
      <p><?php echo $this->maxText($post['content'], 50, '...', true) ?></p>
    <?php endif ?></span>
  <img class="post-image" src="<?php echo $this->postImage($post['image'], '50px', '50px') ?>" alt="" title="<?php echo $this->escape($post['title']) ?>"/></a>
 </li>
<?php endforeach ?>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T06:07:08.190

改变这个：

```
<li class="ui-tabs-nav-item ui-tabs-selected" id="nav-fragment-1"> 
```

到：

```
<li class="ui-tabs-nav-item ui-tabs-selected" id="nav-fragment-<?php echo ++$i; ?>"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:06:17.003

此处需要更多详细信息，但是您可以使用简单的字符串函数：

```
<div id="featured">
 <ul class="ui-tabs-nav">
  <?php $i = 0; foreach($posts as $post): ?>
  <li class="ui-tabs-nav-item ui-tabs-selected" id="nav-fragment-<?php echo ++$i;?>">
  <a href="<?php //echo $i++;) ?>"><span><?php echo $this->escape($post['title']) ?>
  <?php if($leads): ?>
  <p><?php echo $this->maxText($post['content'], 50, '...', true) ?></p>
  <?php endif ?></span>
  <img class="post-image" src="<?php echo $this->postImage($post['image'], '50px', '50px') ?>" alt="" title="<?php echo $this->escape($post['title']) ?>"/></a>
 </li>
<?php endforeach ?>
</ul>
</div> 
```

这应该为您的`<li>`nav-fragment-1, 2 ,3提供不同的 id

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T06:06:46.937

请注意在`$i`关闭 foreach 循环之前递增，每次循环重复时使`id`of递增 1。`li`

```
<?php $i = 0; foreach($posts as $post): ?>
   <li class="ui-tabs-nav-item ui-tabs-selected" id="nav-fragment-<?php echo $i + 1; ?>">
    <a href="#"><span><?php echo $this->escape($post['title']) ?>
<?php if($leads): ?>
      <p><?php echo $this->maxText($post['content'], 50, '...', true) ?></p>
    <?php endif ?></span>
  <img class="post-image" src="<?php echo $this->postImage($post['image'], '50px', '50px') ?>" alt="" title="<?php echo $this->escape($post['title']) ?>"/></a>
 </li>

<?php $i++; // important
endforeach ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T06:05:56.767

```
<li class="ui-tabs-nav-item ui-tabs-selected" id="nav-fragment-<?php echo $i ?>"> 
```

只是不要忘记在循环结束时增加 $i

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T06:08:21.500

改变

```
<li class='ui-tabs-nav-item ui-tabs-selected' id='nav-fragment-1'> 
```

到

```
<?php echo "<li class='ui-tabs-nav-item ui-tabs-selected' id='nav-fragment-$i'>"; ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T06:11:27.890

`<li>`如果您愿意`nav-fragment-0`，只需将您的标签替换为 , `nav-fragment-1`, .... 像这样：

```
<li class="ui-tabs-nav-item ui-tabs-selected" id="nav-fragment-<?php echo $i++; ?>"> 
```

# java - 使用java属性的音乐播放器

> ID：11946572
> 
> 赞同：0
> 
> 时间：2012-08-14T06:01:43.090
> 
> 标签：java, winamp

我想这样做会有一个音乐播放程序，并且会有一个列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:07:00.187

使用 java 媒体框架 (jmf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T12:28:12.250

使用JavaFX，它可以播放所有常见的媒体文件（原生）。

# css - 用于 grails 的 vaadin 插件中的 CSS

> ID：11946575
> 
> 赞同：1
> 
> 时间：2012-08-14T06:01:59.890
> 
> 标签：css, grails, vaadin, grails-config

我正在为 grails 使用 vaadin 插件，并且正在尝试定义一些自定义样式。我应该将 .css 放在我的 grails 应用程序的哪个位置？我的 Vaadin 应用程序在`/vaadin/`我尝试创建一个`/vaadin/themes/mytheme/`文件夹，然后将我的 styles.css 文件放在那里，但仍然没有运气。任何帮助将不胜感激。对 grails 和 vaadin 的新手，我正在为这样的小东西拔头发，在我弄清楚这些事情之前无法完成任何实际的跑腿工作。

在这一点上，任何做内联样式的方式对我来说都很好。我真的只需要一些方法来写明确的风格..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:08:14.320

您需要将其放入 /web-app/VAADIN/themes/mytheme

您可以查看已[完成的地址簿教程](https://github.com/sarbogast/addressbook)（添加了 Gorm 和 Spring Security Core 支持）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-23T08:21:27.363

使用最新版本的插件：

*   文件名必须是styles.css（或者styles.scss，然后通过命令grails prod war编译成styles.css）
*   该文件必须位于 /web-app/VAADIN/themes/mytheme ，其中最后一部分是您的样式的名称
*   例如，在您的 UI 文件中，使用 @Theme 注释

    ```
    @Theme("mytheme")
    @VaadinUI(path = '/')
    class MyUI extends UI {
    // ... 
    ```

*   在 VaadinConfig.groovy 中，指定应用程序使用的样式：

    ```
    themes = ['mytheme'] 
    ```

# java - HttpMethod.releaseConnection() 用法

> ID：11946577
> 
> 赞同：0
> 
> 时间：2012-08-14T06:02:09.690
> 
> 标签：java, httpclient

我正在使用 HttpClient 3..0.1`MultiThreadedHttpConnectionManager`并使用以下代码来获取页面并获取该页面的最终重定向 url。

多个线程并行访问此代码。运行此代码一段时间后，我开始`ConnectionPoolTimeoutException`不断获取，然后没有进一步获取页面。

这与`connectionManagerParam`我应该增加的价值观有关还是我在代码中做错了什么？

```
GetMethod get = null;
    try {
        get = new GetMethod();
        get.setURI(uri);
        get.setFollowRedirects(false);
        int status = httpClient.executeMethod(null, get, new HttpState());

        String location = null;
        int retry = 2;
        if (get.getResponseHeader("location") != null) {
            location = get.getResponseHeader("location").getValue();
        }
        while (retry > 0 && ((int) (status / 100) != 2) && ((int) (status / 100) == 3) && location.length() > 0) {
            // To get the final redirected url.
            uri = URLUtil.createAbsoluteURIWithFix(location, null);
            get = new GetMethod();
            get.setURI(uri);
            get.setFollowRedirects(false);
            status = httpClient.executeMethod(null, get, new HttpState());
            if (get.getResponseHeader("location") != null) {
                location = get.getResponseHeader("location").getValue();
            }
            retry--;
        }

        if (status == 200) {
            uri = get.getURI();
            String html = URLUtil.getResponseBodyAsString(get, charsets);
        }
    } catch (Exception e) {

    } finally {
        if (get != null) {
            get.releaseConnection();
        }
    } 
```

异常堆栈跟踪

```
org.apache.commons.httpclient.ConnectionPoolTimeoutException: Timeout waiting for connection
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager.doGetConnection(MultiThreadedHttpConnectionManager.java:490)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager.getConnectionWithTimeout(MultiThreadedHttpConnectionManager.java:394)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:152)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:396) 
```

我需要在每个执行方法之后调用 get.releaseConnection() 吗？还是当前的编码很好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:19:20.717

似乎您没有关闭第一个 get 并创建一个您影响到同一个 var 的新 get 。并且在循环中做同样的事情。

您应该在此代码中只保留一个实例，并在全局 try/finally 中将其清理干净。

# jakarta-ee - OpenJPA：为枚举扩展值处理程序

> ID：11946580
> 
> 赞同：0
> 
> 时间：2012-08-14T06:02:21.203
> 
> 标签：jakarta-ee, jpa-2.0, openjpa

我想从 openJpa 覆盖枚举值处理程序，因为我想向它添加一些自定义功能。有人知道怎么做吗？

我找不到可以配置 OpenJpa 用于枚举字段的 valuehandler 的参数。对于字符串或整数字段，我可以使用 FieldStrategy 参数指定自定义值处理程序，但对于枚举字段它不起作用。

我知道我可以使用 @Strategy 注释为实体中的每个字段指定自定义策略。它工作得很好，但我正在寻找一个更通用的解决方案，因为我不想注释我的数据模型中的每个字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:24:05.283

敬启者 ;-）

我调试了 OpenJpa Source 的源代码，似乎无法为枚举实现 FieldStrategy。我没有在 OpenJpa Jira 中搜索，但如果它还不是 bug，应该是一个。

最后，我通过提供自定义 valueHandler 并使用 @Strategy 注释对每个枚举字段进行注释来解决了这个问题。

# android - logcat过滤和行数

> ID：11946581
> 
> 赞同：3
> 
> 时间：2012-08-14T06:02:31.183
> 
> 标签：android, logcat, android-logcat

这个问题一直困扰着我，希望能得到您的解答。

我正在尝试显示具有我的类 xx 标记和级别信息的日志的最后 100 次出现（或行）

这是使用

adb logcat -t 100 -v long xx:I *:s

我只得到最近 12 次左右的 xx：我不是 100 次。

会不会是 logcat 正在读取最后 100 行日志并根据我的标准过滤它们？它不应该显示最后 100 个标记行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:15:23.710

写`adb logcat -t 100 -v long xx:I`，没有`*:s`。

# iphone - iPhone：使用城市飞艇不接收推送通知

> ID：11946585
> 
> 赞同：1
> 
> 时间：2012-08-14T06:03:00.840
> 
> 标签：iphone, objective-c, push-notification, urbanairship.com

我正在使用[文档在我的应用程序中使用城市飞艇推送通知](https://docs.urbanairship.com/display/DOCS/Getting+Started%253A+iOS%253A+Push#quickstart)

我编写代码如下

```
NSMutableDictionary *takeOffOptions = [[[NSMutableDictionary alloc] init] autorelease];
[takeOffOptions setValue:launchOptions forKey:UAirshipTakeOffOptionsLaunchOptionsKey];

[UAirship takeOff:takeOffOptions];

[[UIApplication sharedApplication]
 registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge |
                                     UIRemoteNotificationTypeSound |
                                     UIRemoteNotificationTypeAlert)]; 
```

但我在控制台中收到以下错误日志。

```
did Fail To Register For Remote Notifications With Error: Error Domain=NSCocoaErrorDomain Code=3000 "no valid 'aps-environment' entitlement string found for application" UserInfo=0xce2a310 
```

我两次检查了文档并实现了代码

在城市飞艇的网站上，它显示消息“找不到设备令牌”，那么应该是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:23:42.150

尝试以下步骤：

问题确实是配置文件——这是 iOS 报告它，所以没有办法解决它。这是我的建议：

1.  删除设备上的应用程序和配置文件。
2.  与 iTunes 同步，以确保它已完全删除
3.  从 Xcode 中删除配置文件。
4.  重启 Xcode
5.  从 iOS 配置文件重新生成并重新下载配置文件。
6.  在文本编辑器中打开配置文件以确保它存在“aps-environment”
7.  将配置文件加载到 Xcode 中，并将代码签名身份设置为使用正确的配置文件。

这应该确保 Xcode 加载正确的配置文件并安装应用程序；我已经看到它默默地失败了，所以彻底是你最好的选择。

您可以在我找到上述解决方案的位置搜索更多相关信息：https: [//support.urbanairship.com/customer/portal/questions/13141-push-error-failure-to-register-on-iphone](https://support.urbanairship.com/customer/portal/questions/13141-push-error-failure-to-register-on-iphone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:07:11.567

aps-environment 是出现在您的配置文件中的键值。要在此配置文件中拥有此键，您的配置文件必须注册推送通知服务。

对开发服务器使用开发凭证，对生产服务器使用生产凭证。

要做的事情：从 xcode 中删除您的配置文件，并从已配置的开发人员站点下载一个新配置文件。

# qt - Qt 4.8 - QFileIconProvider，获取不存在文件的图标（基于扩展名）

> ID：11946601
> 
> 赞同：4
> 
> 时间：2012-08-14T06:04:21.277
> 
> 标签：qt, filesystems, qtgui

我目前正在尝试基于文件扩展名获取图标，但似乎 QFileIconProvider 只有在它实际上可以读取现有文件时才会返回一个图标。有什么方法可以根据文件扩展名获取 QIcon 吗？一种替代方法是编写具有所需扩展名的临时文件，但这非常低效，因此我正在寻找解决方法。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:00:58.670

这是我的 Windows 解决方案：

图标提供者.h：

```
class IconProvider
{
public:
    static IconProvider * instance();
    static QIcon fileIcon(const QString &filename);
    static QIcon dirIcon();

private:
    IconProvider() {}

private:
    static IconProvider *self;
    QPixmapCache iconCache;
    QFileIconProvider iconProvider;
}; 
```

图标提供者.cpp：

```
IconProvider *IconProvider::self = 0;

IconProvider *IconProvider::instance()
{
    if(!self)
        self = new IconProvider();
    return self;
}

QIcon IconProvider::fileIcon(const QString &filename)
{
    QFileInfo fileInfo(filename);
    QPixmap pixmap;

#ifdef Q_OS_WIN32

    if (fileInfo.suffix().isEmpty() || fileInfo.suffix() == "exe" && fileInfo.exists())
    {
        return instance()->iconProvider.icon(fileInfo);
    }

    if (!instance()->iconCache.find(fileInfo.suffix(), &pixmap))
    {
        // Support for nonexistent file type icons, will reimplement it as custom icon provider later
        /* We don't use the variable, but by storing it statically, we
         * ensure CoInitialize is only called once. */
        static HRESULT comInit = CoInitialize(NULL);
        Q_UNUSED(comInit);

        SHFILEINFO shFileInfo;
        unsigned long val = 0;

        val = SHGetFileInfo((const wchar_t *)("foo." + fileInfo.suffix()).utf16(), 0, &shFileInfo,
                            sizeof(SHFILEINFO), SHGFI_ICON | SHGFI_USEFILEATTRIBUTES);

        // Even if GetFileInfo returns a valid result, hIcon can be empty in some cases
        if (val && shFileInfo.hIcon)
        {
            pixmap = QPixmap::fromWinHICON(shFileInfo.hIcon);
            if (!pixmap.isNull())
            {
                instance()->iconCache.insert(fileInfo.suffix(), pixmap);
            }
            DestroyIcon(shFileInfo.hIcon);
        }
        else
        {
            // TODO: Return default icon if nothing else found
        }
    }

#else
    // Default icon for Linux and Mac OS X for now
    return instance()->iconProvider.icon(fileInfo);
#endif

    return QIcon(pixmap);
}

QIcon IconProvider::dirIcon()
{
    return instance()->iconProvider.icon(QFileIconProvider::Folder);
} 
```

# java - Swing JTabbedPane 中的外观没有更新

> ID：11946604
> 
> 赞同：4
> 
> 时间：2012-08-14T06:04:25.143
> 
> 标签：java, swing, look-and-feel

我在 Java Swing 中创建了一个应用程序。我提供了从菜单更改应用程序外观和感觉的选项，但是在添加新选项卡后`JTabbedPane`，它并没有更新为新外观。

我已经使用了这段代码：

```
Window windows[] = Frame.getWindows();
for(Window window : windows) {
    SwingUtilities.updateComponentTreeUI(window);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T09:59:20.077

利用@Andrew 的[例子](https://stackoverflow.com/a/5630271/230513)和这个老[东西](https://stackoverflow.com/a/5773956/230513)，它似乎对我有用。

![在此处输入图像描述](../Images/f689e0e8073fc99a1806ee2fe771f8fa.png)

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.List;
import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTabbedPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.JToolBar;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;

/**
* @see https://stackoverflow.com/a/11949899/230513
* @see https://stackoverflow.com/a/5773956/230513
*/
public class JTabbedText {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            private final JTabbedPane jtp = new JTabbedPane();

            @Override
            public void run() {
                JFrame f = new JFrame();
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                jtp.addTab("Model", createPanel());
                jtp.addTab("View", createPanel());
                jtp.addTab("Control", createPanel());

                f.add(createToolBar(f), BorderLayout.NORTH);
                f.add(jtp, BorderLayout.CENTER);
                f.pack();
                f.setLocationRelativeTo(null);
                f.setVisible(true);
            }
        });
    }

    private static JToolBar createToolBar(final Component parent) {
        final UIManager.LookAndFeelInfo[] available =
            UIManager.getInstalledLookAndFeels();
        List<String> names = new ArrayList<String>();
        for (LookAndFeelInfo info : available) {
            names.add(info.getName());
        }
        final JComboBox combo = new JComboBox(names.toArray());
        String current = UIManager.getLookAndFeel().getName();
        combo.setSelectedItem(current);
        combo.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent ae) {
                int index = combo.getSelectedIndex();
                try {
                    UIManager.setLookAndFeel(
                        available[index].getClassName());
                    SwingUtilities.updateComponentTreeUI(parent);
                } catch (Exception e) {
                    e.printStackTrace(System.err);
                }
            }
        });
        JToolBar bar = new JToolBar("L&F");
        bar.add(combo);
        return bar;
    }

    private static Box createPanel() {
        Box panel = new Box(BoxLayout.X_AXIS);
        JLabel label = new JLabel("Code: ", JLabel.LEFT);
        label.setAlignmentY(JLabel.TOP_ALIGNMENT);
        JTextArea text = new JTextArea(4, 16);
        text.setAlignmentY(JTextField.TOP_ALIGNMENT);
        text.append("#" + panel.hashCode());
        text.append("\n#" + label.hashCode());
        text.append("\n#" + label.hashCode());
        panel.add(label);
        panel.add(text);
        return panel;
    }
} 
```

# java - myeclipse 工作台中的嵌套工作集

> ID：11946605
> 
> 赞同：2
> 
> 时间：2012-08-14T06:04:41.780
> 
> 标签：java, eclipse, myeclipse, working-set

我正在`MyEclipse Workbench 8.6`用于我的开发环境。工作区有大约 30 个项目，分为几个项目`Working Sets`，每个项目在文件系统中都有一个相应的文件夹。

有没有办法`MyEclipse`创建一个嵌套的`Working Set`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:34:09.443

这似乎早在 Eclipse 3.1就根据**[这个错误报告实现了](https://bugs.eclipse.org/bugs/show_bug.cgi?id=102893)**

经过一番谷歌搜索和比较**[MyEclipse 8.5](http://jaxenter.com/myeclipse-8-5-released-11006.html)**的发布日期和**[Eclipse 的发布日期](http://en.wikipedia.org/wiki/Eclipse_software)**后，我猜您的 MyEclipse 版本是基于 Eclipse Helios 的？

此外，**[这](https://bugs.eclipse.org/bugs/show_bug.cgi?id=71128#c2)**似乎表明在这个很久以前做了一些工作。

我还检查了 Eclipse JUNO，即使它没有嵌套工作集的功能。

因此，开箱即用，**似乎没有办法做到这一点**。 **[关于同一主题的另一个 SO 问题](https://stackoverflow.com/questions/11241701/nested-working-sets-in-eclipse-3-4)**从未得到回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-01T16:08:29.330

与此同时，实施了“项目的嵌套/分层视图”。见[http://www.eclipse.org/eclipse/news/4.5/M5/](http://www.eclipse.org/eclipse/news/4.5/M5/)

# javascript - FancyBox 不再使背景变暗，在最近更新之前工作正常

> ID：11946606
> 
> 赞同：0
> 
> 时间：2012-08-14T06:04:42.807
> 
> 标签：javascript, css

正如标题所说，fancybox 不再使背景变暗。它可以正常工作和工作，但不会变暗。

来自我的网站的示例：[http ://www.remodeling-buffalo.com/gallery.php](http://www.remodeling-buffalo.com/gallery.php)

我注意到的一件奇怪的事情是，如果我摆脱了在每个页面上调用的“jquery.easing.1.3.min.js”，它会随机修复自己。我可以确认在过去一个月左右调用相同的脚本时它运行良好。

可能是我的 custom.js 中的某些东西导致了问题，但是如果我完全删除它，问题就没有解决，这让我相信这不是问题所在。

这是我专门为fancybox提供代码的文件：[http ://www.remodeling-buffalo.com/resource/js/filter-masonry.js](http://www.remodeling-buffalo.com/resource/js/filter-masonry.js)

代码是：

```
/* ---------------------------------------------------------------------- */
/*  Fancybox
/* ---------------------------------------------------------------------- */

(function() {

    // Images
    $('.fancybox').fancybox({
        'transitionIn'  : 'fade',
        'transitionOut' : 'fade',
        'titlePosition' : 'over'
    }).each(function() {
        $(this).append('<span class="zoom">&nbsp;</span>');
    });

    // Iframe
    $('.iframe').fancybox({
        'autoScale'     : false,
        'transitionIn'  : 'fade',
        'transitionOut' : 'fade',
        'type'          : 'iframe',
        'titleShow'     : false
    }).each(function() {
        $(this).append('<span class="zoom">&nbsp;</span>');
    });

})();

/* end Fancybox */ 
```

我只是不知道出了什么问题，因为一切似乎都和以前一样，但是为什么随机删除“jquery.easing.1.3.min.js”可以解决问题？

不知道我还能在这里发布什么有用的信息，但这里是 custom.js 的位置：[http ://www.remodeling-buffalo.com/resource/js/custom.js](http://www.remodeling-buffalo.com/resource/js/custom.js)

不知道是什么导致了这个问题，或者我可以在这里发布什么来提供帮助。javascript 或控制台中的任何内容都没有弹出错误消息，所以我什至无法开始找出问题所在。

非常感谢大家，我真的很感激，因为我已经为此强调了好几个星期了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:12:40.237

我看到您使用的是 jQuery 1.8.0。Fancybox 2 不适用于 jQuery 1.8.0。降级到 jQuery 1.7.2 应该可以解决您的问题。

有关此特定问题，请参阅[https://github.com/fancyapps/fancyBox/issues/339](https://github.com/fancyapps/fancyBox/issues/339)。似乎有一个 PNG 修复，因为 fancybox_overlay.png 是 7 天前添加的：[https ://github.com/fancyapps/fancyBox/tree/master/source](https://github.com/fancyapps/fancyBox/tree/master/source)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:30:47.013

FancyBox[网站](http://fancyapps.com/fancybox/)向您展示了如何做到这一点。请参阅“提示和技巧”下的“更改叠加颜色和不透明度”。简而言之，您向传递给fancybox 的对象添加一个“助手”元素。

在您的情况下，它应该看起来像这样：

```
$('.fancybox').fancybox({
    transitionIn  : 'fade',
    transitionOut : 'fade',
    titlePosition : 'over',
    helpers : {
        overlay : {
            opacity: 0.2,
            css : { 'background-color' : '#000' }
        }
    }
}).each(function() {
    $(this).append('<span class="zoom">&nbsp;</span>');
}); 
```

# tomcat7 - 使用 Tomcat 7 更改 JSESSION ID

> ID：11946607
> 
> 赞同：0
> 
> 时间：2012-08-14T06:04:54.540
> 
> 标签：tomcat7, sessionid, jsessionid

根据 tomcat 文档，tomcat7 不易受到会话固定攻击。但是我的 tomcat 7.0.25 和 7.0.27 很容易受到这种攻击。成功登录后，JSESSIONID cookie 值不会更改。

我在我的 conf/context.xml 中添加了以下阀门。但这没有用。请帮我。

```
<Valve className="org.apache.catalina.authenticator.BasicAuthenticator" changeSessionIdOnAuthentication="true" />
<Valve className="org.apache.catalina.authenticator.SSLAuthenticator" changeSessionIdOnAuthentication="true" />
<Valve className="org.apache.catalina.authenticator.SpnegoAuthenticator" changeSessionIdOnAuthentication="true" />
<Valve className="org.apache.catalina.authenticator.DigestAuthenticator" changeSessionIdOnAuthentication="true" />
<Valve className="org.apache.catalina.authenticator.FormAuthenticator" changeSessionIdOnAuthentication="true" /> 
```

我也开始知道 JSESSION ID cookie 值只会在身份验证时发生变化。身份验证是什么意思？是否将应用程序从 http 切换到 https ？

是否已经构建了可以更改登录时的 jsession id 值的任何东西？现在我正在通过代码更改它。

提前致谢。如果您需要更多信息，请告诉我。

问候，

普拉尚古普塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:06:44.687

您确定您的应用程序使用服务器安全性。

这些配置仅在您使用它时才会影响此行为。

如果您的身份验证使用例如自定义或弹簧安全身份验证，它们将不适用，您必须自己执行此操作。

例如在 spring sec 中有参数。

问候

# javascript - 如何以相反的顺序从 CalendarControl.js 中选择日期

> ID：11946608
> 
> 赞同：1
> 
> 时间：2012-08-14T06:05:10.263
> 
> 标签：javascript

我有 CalendarControl.js，它在选择日期时给了我 2012 年 8 月 14 日格式的日期。但我想从中选择日期为 2012 年 8 月 14 日，以便在 MySQL 查询中使用，因为它在插入时显示日期记录2012-08-14格式./*这里我改成var months = ['01','02','03','04','05','06','07','08', '09','10','11','12']; 然后我得到月份作为数字，但想扭转它。

```
function positionInfo(object) {

  var p_elm = object;

  this.getElementLeft = getElementLeft;
  function getElementLeft() {
    var x = 0;
    var elm;
    if(typeof(p_elm) == "object"){
      elm = p_elm;
    } else {
      elm = document.getElementById(p_elm);
    }
    while (elm != null) {
      x+= elm.offsetLeft;
      elm = elm.offsetParent;
    }
    return parseInt(x);
  }

  this.getElementWidth = getElementWidth;
  function getElementWidth(){
    var elm;
    if(typeof(p_elm) == "object"){
      elm = p_elm;
    } else {
      elm = document.getElementById(p_elm);
    }
    return parseInt(elm.offsetWidth);
  }

  this.getElementRight = getElementRight;
  function getElementRight(){
    return getElementLeft(p_elm) + getElementWidth(p_elm);
  }

  this.getElementTop = getElementTop;
  function getElementTop() {
    var y = 0;
    var elm;
    if(typeof(p_elm) == "object"){
      elm = p_elm;
    } else {
      elm = document.getElementById(p_elm);
    }
    while (elm != null) {
      y+= elm.offsetTop;
      elm = elm.offsetParent;
    }
    return parseInt(y);
  }

  this.getElementHeight = getElementHeight;
  function getElementHeight(){
    var elm;
    if(typeof(p_elm) == "object"){
      elm = p_elm;
    } else {
      elm = document.getElementById(p_elm);
    }
    return parseInt(elm.offsetHeight);
  }

  this.getElementBottom = getElementBottom;
  function getElementBottom(){
    return getElementTop(p_elm) + getElementHeight(p_elm);
  }
}

function CalendarControl() {

  var calendarId = 'CalendarControl';
  var currentYear = 0;
  var currentMonth = 0;
  var currentDay = 0;

  var selectedYear = 0;
  var selectedMonth = 0;
  var selectedDay = 0;

  var months = 

['JAN','FEB','MAR','APR','MAY','JUN','JUL','AUG','SEP','OCT','NOV','DEC'];

  var dateField = null;

  function getProperty(p_property){
    var p_elm = calendarId;
    var elm = null;

    if(typeof(p_elm) == "object"){
      elm = p_elm;
    } else {
      elm = document.getElementById(p_elm);
    }
    if (elm != null){
      if(elm.style){
        elm = elm.style;
        if(elm[p_property]){
          return elm[p_property];
        } else {
          return null;
        }
      } else {
        return null;
      }
    }
  }

  function setElementProperty(p_property, p_value, p_elmId){
    var p_elm = p_elmId;
    var elm = null;

    if(typeof(p_elm) == "object"){
      elm = p_elm;
    } else {
      elm = document.getElementById(p_elm);
    }
    if((elm != null) && (elm.style != null)){
      elm = elm.style;
      elm[ p_property ] = p_value;
    }
  }

  function setProperty(p_property, p_value) {
    setElementProperty(p_property, p_value, calendarId);
  }

  function getDaysInMonth(year, month) {
    return [31,((!(year % 4 ) && ( (year % 100 ) || !( year % 400 ) ))?29:28),31,30,31,30,31,31,30,31,30,31][month-1];
  }

  function getDayOfWeek(year, month, day) {
    var date = new Date(year,month-1,day)
    return date.getDay();
  }

  this.clearDate = clearDate;
  function clearDate() {
    dateField.value = '';
    hide();
  }

  this.setDate = setDate;
  function setDate(year, month, day) {
    if (dateField) {
      if (day < 10) {day = "0" + day;}
      month=parseInt(month);
      var dateString = day+"-"+ months[month-1]+"-"+year;
      dateField.value = dateString;
      hide();
    }
    return;
  }

  this.changeMonth = changeMonth;
  function changeMonth(change) {
    currentMonth += change;
    currentDay = 0;
    if(currentMonth > 12) {
      currentMonth = 1;
      currentYear++;
    } else if(currentMonth < 1) {
      currentMonth = 12;
      currentYear--;
    }

    calendar = document.getElementById(calendarId);
    calendar.innerHTML = calendarDrawTable();
  }

  this.changeYear = changeYear;
  function changeYear(change) {
    currentYear += change;
    currentDay = 0;
    calendar = document.getElementById(calendarId);
    calendar.innerHTML = calendarDrawTable();
  }

  function getCurrentYear() {
    var year = new Date().getYear();
    if(year < 1900) year += 1900;
    return year;
  }

  function getCurrentMonth() {
    return new Date().getMonth() + 1;
  } 

  function getCurrentDay() {
    return new Date().getDate();
  }

  function calendarDrawTable() {

    var dayOfMonth = 1;
    var validDay = 0;
    var startDayOfWeek = getDayOfWeek(currentYear, currentMonth, dayOfMonth);
    var daysInMonth = getDaysInMonth(currentYear, currentMonth);
    var css_class = null; //CSS class for each day

    var table = "<table cellspacing='0' cellpadding='0' border='0'>";
    table = table + "<tr class='header'>";
    table = table + "  <td colspan='2' class='previous'><a href='javascript:changeCalendarControlMonth(-1);'>&lt;</a> <a href='javascript:changeCalendarControlYear(-1);'>&laquo;</a></td>";
    table = table + "  <td colspan='3' class='title'>" + months[currentMonth-1] + "<br>" + currentYear + "</td>";
    table = table + "  <td colspan='2' class='next'><a href='javascript:changeCalendarControlYear(1);'>&raquo;</a> <a href='javascript:changeCalendarControlMonth(1);'>&gt;</a></td>";
    table = table + "</tr>";
    table = table + "<tr><th>S</th><th>M</th><th>T</th><th>W</th><th>T</th><th>F</th><th>S</th></tr>";

    for(var week=0; week < 6; week++) {
      table = table + "<tr>";
      for(var dayOfWeek=0; dayOfWeek < 7; dayOfWeek++) {
        if(week == 0 && startDayOfWeek == dayOfWeek) {
          validDay = 1;
        } else if (validDay == 1 && dayOfMonth > daysInMonth) {
          validDay = 0;
        }

        if(validDay) {
          if (dayOfMonth == selectedDay && currentYear == selectedYear && currentMonth == selectedMonth) {
            css_class = 'current';
          } else if (dayOfWeek == 0 || dayOfWeek == 6) {
            css_class = 'weekend';
          } else {
            css_class = 'weekday';
          }

          table = table + "<td><a class='"+css_class+"' href=\"javascript:setCalendarControlDate("+currentYear+","+currentMonth+","+dayOfMonth+")\">"+dayOfMonth+"</a></td>";
          dayOfMonth++;
        } else {
          table = table + "<td class='empty'>&nbsp;</td>";
        }
      }
      table = table + "</tr>";
    }

    table = table + "<tr class='header'><th colspan='7' style='padding: 3px;'><a href='javascript:clearCalendarControl();'>Clear</a> | <a href='javascript:hideCalendarControl();'>Close</a></td></tr>";
    table = table + "</table>";

    return table;
  }

  this.show = show;
  function show(field) {
    can_hide = 0;

    // If the calendar is visible and associated with
    // this field do not do anything.
    if (dateField == field) {
      return;
    } else {
      dateField = field;
    }

    if(dateField) {
      try {
        var dateString = new String(dateField.value);
        var dateParts = dateString.split("-");

        selectedMonth = parseInt(dateParts[0],10);
        selectedDay = parseInt(dateParts[1],10);
        selectedYear = parseInt(dateParts[2],10);
      } catch(e) {}
    }

    if (!(selectedYear && selectedMonth && selectedDay)) {
      selectedMonth = getCurrentMonth();
      selectedDay = getCurrentDay();
      selectedYear = getCurrentYear();
    }

    currentMonth = selectedMonth;
    currentDay = selectedDay;
    currentYear = selectedYear;

    if(document.getElementById){

      calendar = document.getElementById(calendarId);
      calendar.innerHTML = calendarDrawTable(currentYear, currentMonth);

      setProperty('display', 'block');

      var fieldPos = new positionInfo(dateField);
      var calendarPos = new positionInfo(calendarId);

      var x = fieldPos.getElementLeft();
      var y = fieldPos.getElementBottom();

      setProperty('left', x + "px");
      setProperty('top', y + "px");

      if (document.all) {
        setElementProperty('display', 'block', 'CalendarControlIFrame');
        setElementProperty('left', x + "px", 'CalendarControlIFrame');
        setElementProperty('top', y + "px", 'CalendarControlIFrame');
        setElementProperty('width', calendarPos.getElementWidth() + "px", 'CalendarControlIFrame');
        setElementProperty('height', calendarPos.getElementHeight() + "px", 'CalendarControlIFrame');
      }
    }
  }

  this.hide = hide;
  function hide() {
    if(dateField) {
      setProperty('display', 'none');
      setElementProperty('display', 'none', 'CalendarControlIFrame');
      dateField = null;
    }
  }

  this.visible = visible;
  function visible() {
    return dateField
  }

  this.can_hide = can_hide;
  var can_hide = 0;
}

var calendarControl = new CalendarControl();

function showCalendarControl(textField) {
  // textField.onblur = hideCalendarControl;
  calendarControl.show(textField);
}

function clearCalendarControl() {
  calendarControl.clearDate();
}

function hideCalendarControl() {
  if (calendarControl.visible()) {
    calendarControl.hide();
  }
}

function setCalendarControlDate(year, month, day) {
  calendarControl.setDate(year, month, day);
}

function changeCalendarControlYear(change) {
  calendarControl.changeYear(change);
}

function changeCalendarControlMonth(change) {
  calendarControl.changeMonth(change);
}

document.write("<iframe id='CalendarControlIFrame' src='javascript:false;' frameBorder='0' scrolling='no'></iframe>");
document.write("<div id='CalendarControl'></div>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:16:10.493

尝试更改数组做一个新的顺序来恢复它

```
selectedMonth = parseInt(dateParts[1],10);
selectedDay = parseInt(dateParts[2],10);
selectedYear = parseInt(dateParts[0],10); 
```

# javascript - 为什么 keyup 事件在 chrome 中触发而不在 Firefox 中触发

> ID：11946613
> 
> 赞同：1
> 
> 时间：2012-08-14T06:05:51.590
> 
> 标签：javascript, firefox, dom, javascript-events

我将一些事件绑定到 textarea。keydown 和 keyup 在 Chrome 中运行良好，但在 Firefox 中不行：

您可以在firebug的控制台中复制以下代码进行试用。

火狐版本：7.0.1

操作系统：Ubuntu

```
function mykeydown(e) {
  console.log('keydown');
} 

function mykeyup(e) {
  console.log('keyup');
}

function bindEvent(el, eventName, eventHandler) {
  if (el.addEventListener){
    el.addEventListener(eventName, eventHandler, false); 
  } else if (el.attachEvent){
    el.attachEvent('on'+eventName, eventHandler);
  }
}

var text = document.createElement('textarea');
bindEvent(text, 'keydown', mykeydown);   
bindEvent(text, 'keyup', mykeyup);
document.body.appendChild(text); 
```

# python - 通过 uWSGI + apache 使用 SocketIOServer 服务 Django

> ID：11946614
> 
> 赞同：0
> 
> 时间：2012-08-14T06:05:56.030
> 
> 标签：python, django, uwsgi, gevent

如何通过 uWSGI 通过 Apache 使用 gevent-socketio 的 SocketIOServer 为我的 Django 应用程序提供服务？

我有以下 uWSGI .ini 文件：

```
[uwsgi]
socket = 127.0.0.1:3031
master = true
processes = 2
env = DJANGO_SETTINGS_MODULE=demo.settings
module = app:serve 
```

然后我有以下内容`app.py`：

```
from gevent import monkey
from socketio.server import SocketIOServer
import django.core.handlers.wsgi
import os
import sys

monkey.patch_all()

PORT = 3031

os.environ['DJANGO_SETTINGS_MODULE'] = 'demo.settings'

def serve():
    application = django.core.handlers.wsgi.WSGIHandler()
    SocketIOServer(('', PORT), application, namespace="socket.io").serve_forever() 
```

但它只是继续加载，基本上我的问题是我如何告诉 uWSGI 在服务时使用 SocketIOServer？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:34:14.103

目前尚不清楚您是否希望 uWSGI 为两者提供服务，或者您希望使用 socketio 服务器的附加进程。

通常，您不能在同一进程中将阻塞应用程序（如 django）与非阻塞应用程序（如基于 gevent）混合，即使您使用猴子补丁，您的数据库适配器也不会被猴子补丁（除非您使用本机 python 适配器，这在 django 中并不常见）。

所以我想你想将 SocketIOServer 作为一个不同的进程产生。只需将最后两行移出 serve() 以便 uwsgi 导入器将解析/运行两者

# java - jsoup选择命令操作

> ID：11946616
> 
> 赞同：1
> 
> 时间：2012-08-14T06:06:01.963
> 
> 标签：java, html, css, jsoup

我是 Jsoup 的新手。

我可以使用选择命令

```
Elements media = doc.select("[src]"); 
```

如果你看到这个：en.wikipedia.org/wiki/States_and_territories_of_India。在那里，我只想拥有印度各州的所有名称。但是当我做 doc.select("area[title]"); 我正在获取所有表格信息。所以我正在寻找是否在选择中我可以告诉它如何仅用于特定表格。

如果是这种情况，我认为 Jsoup 可能无法解决这个问题，你能告诉我如何实现这个吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:24:59.017

尝试这样的事情

```
Element indiaTable = doc.select("table").get(2); //India table is the third (index is 2) table on page
Elements myTds = indiaTable.select("td:eq(0)"); //The states are the first column

//or you can replace the two lines of code above with this

Elements myTds = doc.select("table.wikitable td:eq(0)");

for (Element td: myTds ) {
    System.out.println(td.text());
} 
```

# jquery-plugins - KnockoutJs + Jquery 插件验证

> ID：11946620
> 
> 赞同：0
> 
> 时间：2012-08-14T06:06:15.023
> 
> 标签：jquery-plugins, knockout.js

使用 KnockoutJS + JQuery Validation，所有控件验证工作正常。虽然 Radio btn 验证不起作用。

问题 1： * 显示在收音机 btn 附近

男 女

输出：*男性预期输出：男性*输出：*女性预期输出：女性*

问题 2：在应用 Class=Required 时，两个单选按钮都是必需的，我们将如何解决该问题

问题 3：动态单选按钮也发生了同样的事情。所有这些都可以在同一页面中找到。

引导我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:38:56.280

尝试淘汰赛验证，它与淘汰赛一起工作得更好

[https://github.com/ericmbarnard/Knockout-Validation](https://github.com/ericmbarnard/Knockout-Validation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:16:23.800

1.  Make sure your radio buttons have the same "name" attribute (this is the case with jquery validation regardless of using knockout)

2.  You only need to add required class to one of them if you do my first point above

3.  Dynamic radio buttons need to have specific names (and names need to be same for all buttons you want to validate in a group)

For instance, I have this foreach loop that validates the radiobuttons correctly because they have unique names

```
<input type="radio" data-bind="attr: { name: 'options-' + $index() }" class="required" value="Yes" checked />
<input type="radio" data-bind="attr: { name: 'options-' + $index() }" value="No" checked /> 
```

# c++ - 随机数发生器的实现

> ID：11946622
> 
> 赞同：5
> 
> 时间：2012-08-14T06:06:19.547
> 
> 标签：c++, c, random, implementation

> **可能重复：**
> [随机数生成器如何工作？](https://stackoverflow.com/questions/1716308/how-does-a-random-number-generator-work)

我正在寻找 C/C++ 中随机数生成器的内部实现。基本上我很想知道，调用 rand() 时究竟会发生什么。毕竟机器遵循一定的指令，怎么可能是随机的！
编辑：想知道如何在 C/C++ 中实现一个。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T06:10:15.593

它们是*伪随机*数生成器，而不是真正的随机数生成器。这通常是一件*好事*，因为它允许您在涉及“随机”数字的情况下更轻松地重现错误。

您*可以获得*随机数生成器，例如`/dev/random`在 Linux 下阅读，但 C 库附带的普通生成器通常不是。

最简单的是线性同余生成器，其中：

```
n(x+1) = n(x) * A + C modulo M 
```

with suitably chosen values of `A`, `C`and `M`.

[Wikipedia 的 LCG 页面](http://en.wikipedia.org/wiki/Linear_congruential_generator)提供了各种实现使用的一些示例值。例如，`glibc`那里列出的那个有`a = 1103515245, c = 12345, m = 2^31`，所以它很简单，例如：

```
static unsigned int seed = 1;
void srand (int newseed) {
    seed = (unsigned)newseed & 0x7fffffffU;
}
int rand (void) {
    seed = (seed * 1103515245U + 12345U) & 0x7fffffffU;
    return (int)seed;
} 
```

> 另外：glibc 实现中仍然有这个生成器（称为 0 型生成器），但它也有一个更高级的三项式生成器，它（可能）更好。

还有更复杂的（例如梅森捻线机）具有更长的循环时间（开始重复之前的时间）。

任何真正的随机生成器都必须使用真正随机的输入源，这就是为什么`/dev/random`有时会阻塞（“等待熵”）而`/dev/urandom`不会阻塞的原因。

“真正的”随机源可能会受到击键之间的时间、用户输入的数据、网络数据包的内容、磁盘 I/O 模式、ICMP 响应通过网络返回所需的时间以及各种其他奇妙的影响，主要是非确定性的东西。

除非您对加密非常感兴趣，否则普通的随机数生成器就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:14:38.217

正如我在评论中所说，RAM 机器的随机生成器并不是真正的随机，它们是[*伪随机的*](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)。

您可以随时查看[java.util.Random](http://www.docjar.com/html/api/java/util/Random.java.html)的 java 源代码。

具体来说 - 该方法`next(int bits)`是您正在寻找的。

```
protected int next(int bits) {
      long oldseed, nextseed;
      AtomicLong seed = this.seed;
      do {
            oldseed = seed.get();
            nextseed = (oldseed * multiplier + addend) & mask;
      } while (!seed.compareAndSet(oldseed, nextseed));
      return (int)(nextseed >>> (48 - bits));
} 
```

(*) 此答案适合该问题的先前版本，该版本被标记为 java 并且没有专门询问 C++。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T06:16:39.573

这是一个简单的伪随机算法：

```
//generates pseudo random series of numbers 0...RAND_MAX - 1 with uniform distribution, starting with 0

static const int A = 15342; // any number in (0, RAND_MAX)
static const int C = 45194; // any number in [0, RAND_MAX)
static const RAND_MAX = 100000;

int rand()
{
    static int prev = 0; //seed. any number in [0, RAND_MAX)
    prev = ( prev * A + C ) % RAND_MAX;
    return prev;
} 
```

你可以在这里阅读更多：[http ://en.wikipedia.org/wiki/Linear_congruential_generator](http://en.wikipedia.org/wiki/Linear_congruential_generator)

# java - 将服务器连接到多个客户端

> ID：11946634
> 
> 赞同：-1
> 
> 时间：2012-08-14T06:07:03.430
> 
> 标签：java, networking, client-server

我创建了一个客户端/服务器应用程序。现在，客户端可以向服务器发送请求并接收服务器响应。现在我想通知所有连接的客户端执行一些操作。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:23:20.870

在服务器上注册所有连接的客户端，并将对客户端的引用存储在`List`实例中。

如果您想异步通知您的客户端，则在您的每个客户端上打开 ServerSocket 实例并仅接受来自他们正在使用的服务器的连接。

在这种情况下，您的服务器充当客户端并向所有连接的客户端发送请求，就像客户端向服务器发送请求一样。

# php - 长轮询阻止了我的其他 Ajax 请求

> ID：11946638
> 
> 赞同：0
> 
> 时间：2012-08-14T06:07:25.187
> 
> 标签：php, xmlhttprequest, long-polling

好的，我确实使用了 Apache 服务器，但我遇到了以下情况。

1.  我有一个向长轮询 PHP 文件发送 XHR 请求的 JScript
2.  现在请求被长时间轮询了 15 秒
3.  现在，在进行长轮询时，我尝试发送另一个 XHR 请求
4.  但是另一个 XHR 请求超时并且似乎没有到达我的 Apache 服务器

**现在我的问题是，为什么会这样？**这是因为 Apache 服务器仅对单个客户端使用单线程连接吗？或者由于长时间轮询连接变得持久，其他 XHR 请求不能被授予？

我的服务器是带有 Apache 2.4.2 的 XAMPP 1.8.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:35:19.127

已经在这里找到了答案。

我需要使用下面的功能

```
session_write_close(); 
```

[长轮询锁定其他 AJAX 调用](https://stackoverflow.com/questions/4457178/long-polling-locking-up-other-ajax-calls)

# php - 删除默认商店的商店代码

> ID：11946640
> 
> 赞同：0
> 
> 时间：2012-08-14T06:07:35.453
> 
> 标签：php, magento, magento-1.4, magento-1.5

该网站有 2 种语言：法语和荷兰语，由 2 个商店视图表示。法语是默认的。对于我们的 SEO 工作，我们需要以下网址：

1.  法语 - [http://www.domain.com/category/product](http://www.domain.com/category/product)
2.  荷兰语 - [http://www.domain.com/nl/category/product](http://www.domain.com/nl/category/product)

System -> Configuration -> Web -> Add Store Codes to URL 是全有或全无设置。我们只需要为默认商店关闭它。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-16T06:58:28.313

我开发了一个扩展程序，允许您直接从 Magento Admin 隐藏默认商店代码。

![在此处输入图像描述](../Images/63ef9d777be9438ac672178185a6e42b.png)

更多信息在这里：[https ://github.com/jreinke/magento-hide-default-store-code](https://github.com/jreinke/magento-hide-default-store-code)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:44:30.407

After short investigation I found that it is possible, but it is not programmatically enabled by default.

Take a look in this file from *app/code/core/Mage/Core/etc/system.xml*:

```
// around line 1092 - magento v1.6.2.0
<use_store translate="label">
    <label>Add Store Code to Urls</label>
    <frontend_type>select</frontend_type>
    <source_model>adminhtml/system_config_source_yesno</source_model>
    <backend_model>adminhtml/system_config_backend_store</backend_model>
    <sort_order>10</sort_order>
    <show_in_default>1</show_in_default>
    <show_in_website>0</show_in_website>
    <show_in_store>0</show_in_store>
</use_store> 
```

This three lines indicates configuration visibility in current scope

```
<show_in_default>1</show_in_default>
<show_in_website>0</show_in_website>
<show_in_store>0</show_in_store> 
```

Unfortunately you cannot simply change those values to 1, because magento after upgrade overwrites all core files from *app/core* and you will lose all setup that was done there.

You can override config by overriding module system. Check: [How to override a Magento administration panel?](https://stackoverflow.com/questions/2523853/how-to-override-a-magento-administration-panel)

I am a new with Magento world. Perhaps there's an easier way to do it

Greetings Marcin

# keyboard-shortcuts - Sublime Text 2 中替换所有文件中的文本的快捷键是什么？

> ID：11946643
> 
> 赞同：10
> 
> 时间：2012-08-14T06:07:50.247
> 
> 标签：keyboard-shortcuts, sublimetext2

如何使用键盘快捷键执行“替换”命令？

我似乎在 OS X 的默认键盘映射中找不到“命令”。

我知道单个文件替换所有快捷方式是`control + option + enter`，但在这种情况下不起作用。这是在 OS X 中，但它可能适用于 Windows。

![在此处输入图像描述](../Images/65d282c4c9f26a476de003ffe1f9625b.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T12:48:24.407

20 分钟的研究一无所获。

尝试：

1.  打开`Find in Files`面板，尝试了很多组合。没运气。
2.  浏览`keybindings`文件以查找绑定到`find_in_files`面板的任何内容。没运气
3.  浏览了官方的[Sublime Text API](http://www.sublimetext.com/docs/2/api_reference.html)。没运气。
4.  浏览了非官方[的命令列表](http://sublime-text-unofficial-documentation.readthedocs.org/en/latest/reference/commands.html)。没运气。

这感觉像是一个很大的疏忽……

**更新**：这没有实现。这是官方[功能请求](http://sublimetext.userecho.com/topic/89699-replace-button-in-find-panel-does-not-have-a-keybinding/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-28T06:25:59.153

`Ctrl + shift + F`

现在您可以在所有文件中添加要查找和替换的文件和文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-29T07:34:42.920

Ctrl + Alt + Enter 在最新的 Sublime Text 2 中对我有用

# mysql - 如何在 SQL 中加入“union all”的结果

> ID：11946646
> 
> 赞同：1
> 
> 时间：2012-08-14T06:08:12.113
> 
> 标签：mysql, sql, group-by, union-all

我使用*union all*合并了两个表。但是，生成的数据有重复。有没有办法加入重复？

例如，*union all* ,之后的结果表`t`如下所示：

```
__DAY__.....................__COUNT__
monday....................1
tuesday...................2
tuesday...................3
wednesday..............4
wednesday..............1
wednesday..............5 
```

我希望它看起来像这样：

```
__DAY__.................__COUNT__
monday....................1
tuesday....................5
wednesday..............10 
```

另外，我尝试了“按 t.day，t.count 分组”，但它不起作用。并且“....”仅用于格式化目的，以便进行某种缩进。

查询如下。

```
SELECT   t1.hour, t1.day, t1.count
FROM
(
  (SELECT hour(time(FROM_UNIXTIME( timecode)))  AS hour,
   date(FROM_UNIXTIME( timecode))  AS day,
  (FROM_UNIXTIME( timecode)) AS original, COUNT(1)  as 'count'
   FROM sampleData
  WHERE hour(time(FROM_UNIXTIME( timecode)))>=14
   GROUP BY DAY)
 union all
  (SELECT hour(time(FROM_UNIXTIME( timecode))) as hour,
   date(FROM_UNIXTIME( timecode-86400) ) AS day,
   (FROM_UNIXTIME( timecode)) AS original, COUNT(1)  as 'count'
  FROM sampleData
  WHERE hour(time(FROM_UNIXTIME( timecode)))< 14
   GROUP BY DAY)
)  t1
GROUP BY  t1.day, t1.count
HAVING COUNT(*)>0
ORDER BY t1.day 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T06:12:52.307

试试这个简单的查询：

```
SELECT day,sum(count) FROM Table1
Group by day 
```

[*看到这个 SQLFiddle*](http://sqlfiddle.com/#!2/b1f3e/2)

**编辑：**对于您的查询，请尝试以下操作：

```
SELECT   t1.hour, t1.day, sum(t1.count)
FROM 
(
  (SELECT hour(time(FROM_UNIXTIME( timecode)))  AS hour,  
   date(FROM_UNIXTIME( timecode))  AS day, 
  (FROM_UNIXTIME( timecode)) AS original, COUNT(1)  as 'count'  
   FROM sampleData  
  WHERE hour(time(FROM_UNIXTIME( timecode)))>=14  
   GROUP BY DAY)   
 union all   
  (SELECT hour(time(FROM_UNIXTIME( timecode))) as hour,  
   date(FROM_UNIXTIME( timecode-86400) ) AS day,  
   (FROM_UNIXTIME( timecode)) AS original, COUNT(1)  as 'count'  
  FROM sampleData   
  WHERE hour(time(FROM_UNIXTIME( timecode)))< 14  
   GROUP BY DAY)  
)  t1  
GROUP BY  t1.day
HAVING COUNT(*)>0  
ORDER BY t1.day 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:14:28.747

对计数求和，仅按天分组。

```
SELECT   t1.hour, t1.day, sum(t1.count)   
    FROM 
    (
      (SELECT hour(time(FROM_UNIXTIME( timecode)))  AS hour,  
       date(FROM_UNIXTIME( timecode))  AS day, 
      (FROM_UNIXTIME( timecode)) AS original, COUNT(1)  as 'count'  
       FROM sampleData  
      WHERE hour(time(FROM_UNIXTIME( timecode)))>=14  
       GROUP BY DAY)   
     union all   
      (SELECT hour(time(FROM_UNIXTIME( timecode))) as hour,  
       date(FROM_UNIXTIME( timecode-86400) ) AS day,  
       (FROM_UNIXTIME( timecode)) AS original, COUNT(1)  as 'count'  
      FROM sampleData   
      WHERE hour(time(FROM_UNIXTIME( timecode)))< 14  
       GROUP BY DAY)  
    )  t1  
    GROUP BY  t1.day
    HAVING COUNT(*)>0  
    ORDER BY t1.day 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T06:12:00.270

您可以尝试*分组*：

```
select DAY,sum(COUNT) as COUNT
from
( select DAY,COUNT from table1
  union all
 select DAY,COUNT from table1)a
group by a.DAY 
```

**编辑**：

对于您的查询，

```
SELECT    t1.day, sum( t1.count )

.....
.....
GROUP BY  t1.day
HAVING COUNT(*)>0
ORDER BY t1.day 
```

# java - For 循环似乎在 Java 中运行得超出了必要的范围

> ID：11946649
> 
> 赞同：-1
> 
> 时间：2012-08-14T06:08:32.443
> 
> 标签：java, data-structures

```
for(LogProcess process : lo) {
  for(PathInfo info : process.getPathinfolist()) {
    a1.add(info.getFilepath());
  }
} 
```

我这里有这段代码。`lo`是大小的一个实例`LinkedList`。

是`LinkedList`：

```
public LogProcess(int rev, String auth, String date,
                  List<PathInfo> pathinfolist) 
```

现在`PathInfo`是：

```
public PathInfo(String action,String kind,String filepath) 
```

现在我的`LinkedList`尺码是`130`. 这很好。

但是正在从 xml`process.getPathInfoList()`中读取记录。`1657`但是，当我检查`a1`使用`a1.size()`它的大小时，循环之后显示`7216`这是不可能的。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:15:23.867

您遍历不同的流程实例，这些流程实例可能具有不同数量的路径信息，所以对我来说并不陌生。

您应该显示每个列表的所有代码和大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:30:01.610

如上所示，a1.size() 是所有 LogProcess 对象中 PathInfo 的总数。正如你所说，有 130 个 logprocess 对象，getPathInfo 读取 1657，但你没有提到哪个 logprocess 有那么多路径信息。都是一样的号码吗？我想您必须如上所述提供更多详细信息。

# javascript - 标题栏中的 Dashlet 编辑按钮未正确显示

> ID：11946651
> 
> 赞同：1
> 
> 时间：2012-08-14T06:08:37.450
> 
> 标签：javascript, alfresco, freemarker

我正在尝试创建一个简单的 Alfresco dashlet，并在标题栏上启用了编辑按钮。不幸的是，我不知道如何让编辑按钮实际*显示*在标题栏上。

这是我到目前为止所拥有的：

**dashlet desc 文件**(.desc.xml)

```
<webscript>
   <shortname>Sample</shortname>
   <description>Displays a Sample dashlet</description>
   <family>dashlet</family>
   <url>/mycompany/components/dashlets/sample-dashlet</url>
</webscript> 
```

**我的主要 freemarker 模板文件**(.ftl)

```
<script type="text/javascript">
    //<![CDATA[
    var sampleDashlet = new MyCompany.dashlet.SampleDashlet("${args.htmlid}").setOptions({
        "componentId": "${instance.object.id}",
        "siteId": "${page.url.templateArgs.site!""}",
        "title": "${msg("header")}"
    }).setMessages(${messages});
    new Alfresco.widget.DashletResizer("${args.htmlid}", "${instance.object.id}");

    var editDashletEvent = new YAHOO.util.CustomEvent("onDashletConfigure");
    editDashletEvent.subscribe(sampleDashlet.onConfigClick, sampleDashlet, true);

    new Alfresco.widget.DashletTitleBarActions("${args.htmlid}").setOptions({
        actions: [{
            cssClass: "edit",
            eventOnClick: editDashletEvent,
            tooltip: "${msg("dashlet.edit.tooltip")?js_string}"
        }]
    });
    //]]>
</script>

<div class="dashlet-1"> 
 <div> Test </div>
</div> 
```

似乎问题一定出在我的配置中，但我找不到。谁能指出我正确的方向，好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:12:08.373

如果您想要一个以这种方式设置为可配置的非常简单的 dashlet 的工作示例，请参阅[http://code.google.com/p/alfresco-get-latest-document](http://code.google.com/p/alfresco-get-latest-document)。这篇博文设置了基本功能：[http](http://ecmarchitect.com/archives/2012/05/08/1592) ://ecmarchitect.com/archives/2012/05/08/1592 。此博客文章对此进行了扩展，以使初始 dashlet 可配置：[http](http://ecmarchitect.com/archives/2012/05/15/1599) ://ecmarchitect.com/archives/2012/05/15/1599 。

在将您的 FTL 与我的进行比较时，我想知道您的 div 类/ID 是否需要遵循以下模式：

```
 <div class="dashlet getlatestdoc">
  <div id="getlatestdoc_title" class="title">
    ${title}
  </div> 
```

否则，编辑按钮如何知道在哪里呈现自己？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:49:44.760

正如 Jeff 建议的那样，您需要`<div>`在标记中包含一个用于 dashlet 标题栏的元素，并为该属性提供适当的值`class`，如下所示

```
<div class="dashlet dashlet-1">
    <div class="title">Title</div>
    <div class="body">Body content</div>
</div> 
```

当`Alfresco.widget.DashletTitleBarActions`您的内联 JavaScript 代码创建的实例被实例化时，它将寻找`<div>`具有该类的子类`title`并在那里添加操作。

我还向`dashlet`父 div 添加了一个类，这是应用默认 dashlet 样式所必需的。

# ios - 最新来自 NSArray

> ID：11946660
> 
> 赞同：0
> 
> 时间：2012-08-14T06:09:09.477
> 
> 标签：ios, nsarray, nsdate

我在 NSArray 中有 NSdate 对象。我想从日期数组中获取最新信息。

```
NSDate *tomorrow = [NSDate dateWithTimeInterval:(24*60*60) sinceDate:[NSDate date]];

    NSDate *today = [NSDate date];

    NSDate *yesterday = [NSDate dateWithTimeInterval:-(24*60*60) sinceDate:[NSDate date]];

    NSMutableArray* arr = [[NSMutableArray alloc] initWithObjects:today,yesterday,tomorrow,today,yesterday,tomorrow, nil]; 
```

我的返回值应该是明天（最晚日期）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:14:47.310

您可以使用：

```
[arr lastObject]; //Returns the object in the array with the highest index value. 
```

或者

```
[arr objectAtIndex:[arr count]-1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:22:49.263

您可以使用[sortedArrayUsingComparator](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)并分别[比较](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)From NSArray & NSDate Class

```
NSArray *sortedDates = [arr sortedArrayUsingComparator: 
                                                     ^(id obj1, id obj2) {
                                                          return [obj1 compare:obj2];
                                                     }];
NSLog(@"%@",[sortedDates lastObject]); // SortedDates Contains dates in ascending Order (last object of the array returns the latest date. 
```

# asp.net - 实体框架如何映射这种关系？

> ID：11946663
> 
> 赞同：0
> 
> 时间：2012-08-14T06:09:18.220
> 
> 标签：asp.net, asp.net-mvc, entity-framework

我有

```
User:
 -ID
 -Name

Badge
 -ID
 -Name (E.G "User has made 100 posts", the same relationship as Stackoverflow) 
```

所以我意识到我需要第三张表，（因为徽章也在数据库中定义，所以我创建了：

```
UserBadge
 -ID
 -User
 -Badge 
```

所以现在在我的用户类中我有

```
List<UserBadge> Badges; 
```

问题是我要去

```
Users.Find(1).Badges.Where(x => x.User == user && x.Badge = badgeIWant)
     .FirstOrDefault(); 
```

（或类似的东西）因为...... EF 没有智能（我猜）自动知道“徽章”应该只包括用户匹配的那些。

我该怎么做？正在想我可以为徽章定制一个吸气剂，其中包含 LINQ 条件...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:33:40.333

这是 EF 4.3 代码优先：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.Entity;

namespace ConsoleApp
{
    public class User
    {
        public int ID { get; set; }
        public string Name { get; set; }
        public virtual ICollection<Badge> Badges { get; set; }
    }

    public class Badge
    {
        public int ID { get; set; }
        public string Name { get; set; }
        public virtual ICollection<User> Users { get; set; }
    }

    public class Context : DbContext
    {
        public Context()
            : base("Votes")
        {

        }
        public DbSet<User> Users { get; set; }
        public DbSet<Badge> Badge { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Context context = new Context();
            User user = context.Users.Include("Badges").Where(u => u.ID == 1).SingleOrDefault();
            if(user != null)
            {
                //write your code.
            }

            Console.ReadKey();
        }
    }
} 
```

我已经测试过了，这应该可以工作。这通常是多对多关系，因为用户可以拥有许多徽章，而 1 个徽章可以属于许多用户。如果您运行此代码，您会发现 EF`BadgeUsers`使用 BadgeID 和 UserID 作为外键创建表。从那里您可以查询并且 EF 知道您在谈论哪些徽章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:14:14.253

如果您想获得用户的所有徽章，那么只需使用`users.Find(1).Badges`. EF 会自动过滤与用户相关的徽章。

# packet-capture - 数据包捕获看到 1434 字节而不是 1500 字节

> ID：11946664
> 
> 赞同：1
> 
> 时间：2012-08-14T06:09:20.513
> 
> 标签：packet-capture, mtu

我在 python 中使用套接字来发送文件，并且在发送这些文件时我正在做一个数据包捕获。但是，我发现每个数据包都是 1434 字节而不是 1500 字节（我的系统上的 MTU 设置为 1500 字节）。

我附上了一些数据包捕获的屏幕截图。我需要以 1500 字节而不是 1434 字节发送数据包，有人可以告诉我发生了什么吗？

![抓包1](../Images/ab89fd895c69709d8bdb612a9ddfa46f.png) ![抓包2](../Images/625cb635e24a0b07be06a4b22e198695.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:34:15.263

TCP 通过网络发送它想发送的任何大小的段；您无法从套接字层控制它。也许远程机器只提供了一个足够大的窗口来发送 1314 字节的数据（1314 + 14 字节的以太网头 + 20 字节的没有选项的 IP 头 + 20 字节的没有选项的 TCP 头 = 1368），或者[拥塞窗口](http://en.wikipedia.org/wiki/Congestion_window)没有足够宽以发送更多数据。

此外，您不必*控制*它。TCP 提供了一个有序的字节流；数据包边界在 TCP中*并不重要！*

# asp.net-mvc - 从 XML 读取数据并将其写入数据库

> ID：11946665
> 
> 赞同：0
> 
> 时间：2012-08-14T06:09:32.073
> 
> 标签：asp.net-mvc, oracle, c#-4.0, xml-parsing, linq-to-xml

根据要求，将有一些 XML 文件（大约 20-30 个）使用，我必须阅读它们并将详细信息插入数据库中。我的应用程序使用 EF4.0 和 oracle。

我想知道读取 XML 并将记录插入数据库的最佳方法。

我在想的是，将 XML 数据加载到数据集中，然后仅使用 EF 将它们一一保存。

如果有人可以建议我一些更好更有效的方法来实现它，那将非常有帮助。

将数据从 XML 加载到数据集，然后从数据集加载到实体是更好的方法，还是使用 LINQ to XML，在读取 XML 时直接创建实体对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:11:10.463

1.  为您的 XML 文件生成 XSD [http://www.freeformatter.com/xsd-generator.html](http://www.freeformatter.com/xsd-generator.html)
2.  从您的 XSD [http://msdn.microsoft.com/en-us/library/x6c1kb0s(v=vs.71).aspx生成 C# 类](http://msdn.microsoft.com/en-us/library/x6c1kb0s(v=vs.71).aspx)
3.  将您的 XML 序列化到您的模型中。
4.  随心所欲地处理数据

这就是我使用 XML 的方式

# linux - 加号登录 sed

> ID：11946666
> 
> 赞同：0
> 
> 时间：2012-08-14T06:09:34.757
> 
> 标签：linux, awk

我正在尝试执行以下操作：

```
echo "test++abc" | awk -v bar="test++" 'BEGIN {FS=bar} {print $2}' 
```

我希望看到`abc`输出，因为我用作`bar="test++"`分隔符。但我却得到`++abc`了。

谁能解释一下这种行为以及如何解决它？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:20:21.807

```
echo "test++abc" | awk -v bar='test[+][+]' 'BEGIN {FS=bar} {print $2}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:19:50.327

尝试：

```
echo "test++abc" | awk -v bar="test\\+\\+" 'BEGIN {FS=bar} {print $2}' 
```

在 sed 中：

```
echo "test++abc" | sed -e 's/test++//' 
```

# javascript - 在Javascript中使用&&作为条件

> ID：11946673
> 
> 赞同：-1
> 
> 时间：2012-08-14T06:10:11.170
> 
> 标签：javascript

我有这个：

```
var field = query("form#"+form.id+" input[name='" + error.field + "']");
if(field.length){
  if( field[0].id ) {
    widget = registry.byId( field[0].id );
    if(widget){
    ...
  }
 } 
```

我原以为我可以写：

```
var field = query("form#"+form.id+" input[name='" + error.field + "']");
if(field.length && field[0].id && widget = registry.byId( field[0].id) ){
...
} 
```

但是，如果我使用第二种“缩短”形式，则会出现 Javascript 错误。

抱歉，给 JSFiddle 会很麻烦。当 query() 返回 0 值时会出现问题—— `field[0].id`&&`widget = registry.byId( field[0].id)` 仍然被解释。

我以为我玩得很安全，因为第二个`field[0].id`只会发生，如果`field.length`是`> 0`，那么`widget = registry.byId( field[0].id)`只会发生，如果`field[0].id` 是真的......

我错过了什么？

默克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:48:06.963

问题是`=`运算符的优先级低于`&&`运算符，因此您的代码试图获取以下结果：

```
field.length && field[0].id && widget 
```

...并为其赋值。您可以通过在作业周围加上括号来解决此问题：

```
if(field.length && field[0].id && (widget = registry.byId(field[0].id)) ){ 
```

（似乎在这个小演示中工作正常：http: [//jsfiddle.net/nnnnnn/4dAfS/](http://jsfiddle.net/nnnnnn/4dAfS/)）

进一步阅读：[MDN 的运算符优先级文章](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:36:36.193

您可能会遇到`Uncaught ReferenceError: Invalid left-hand side in assignment`错误，这是因为您尝试`registry.byId()`在 RIGHT 上评估方法并将其分配到`result`LEFT 上，但由于您没有使用括号限制左手分配，因此整个`field.length && field[0].id && widget`被认为引发了错误。

您可以通过将最后一个条件括在括号中来抑制错误。 `if(field.length && field[0].id && (widget = registry.byId( field[0].id)) ){`

# jquery - jquery 函数在 jsfiddle 上工作，但不在我的 cakephp 网站上

> ID：11946675
> 
> 赞同：0
> 
> 时间：2012-08-14T06:10:32.010
> 
> 标签：jquery, input, html-select, cakephp-2.2

我陷入了转储问题，但无法解决，我通过两个选择输入按钮选择了年龄范围。我从标记中获取了代码，它在[小提琴](http://jsfiddle.net/abhijatyatewari/VBrEj/10/)上有效，但在页面上无效。

我尝试将脚本放在视图文件、布局标题和视图末尾。

但它从来没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:17:40.773

一定有一些JS错误。跟踪您在 Firefox 中使用 Firebug 或在 Google Chrome 中使用 Chrome Inspector 时可能遇到的任何错误。确保在 cakephp 页面中包含 jQuery.js。另请注意，并非所有[浏览器](http://caniuse.com/#feat=input-number)都支持它，因此如果存在任何特定于浏览器的问题，您可以使用[Polyfill 。](https://github.com/jonstipe/number-polyfill)

**更新：**

让我们尝试另一种方法，而不是在单击第二个输入时获取第一个输入的值，如果我们尝试在更改第一个输入时为第二个输入设置一个值会怎样。

```
$("input#range1").bind('change',function(){
   $("input#range2").val(this.value);
}); 
```

演示：http: [//jsfiddle.net/VBrEj/12/](http://jsfiddle.net/VBrEj/12/)

# apache-flex - 如何将参数发送到 HTTPService 调用以作为组件重用

> ID：11946677
> 
> 赞同：1
> 
> 时间：2012-08-14T06:10:32.850
> 
> 标签：apache-flex, parameters, components, httpservice

如果可能的话，我想重用一个`s:HTTPService`组件。我无法理解如何将参数传递给服务调用，以便可以更改结果函数。

例如，

```
functOne(), HTTPService result = "FunctOneRtn(event)"
functTwo(), HTTPService result = "FunctTwoRtn(event)" 
```

弹性 4.6

```
<fx:Declarations>
    <s:HTTPService id="myCall" url="http://myUrl.com/"
                   useProxy="false" method="POST" result=funct***Rtn(event) >
    </s:HTTPService>
</fx:Declarations>
<fx:Script>
    <![CDATA[
        import mx.rpc.events.ResultEvent;
        private function functOne() :void
        {
            var params:Object = new Object();
            /* call FuntOneRtn */       
            myCall.send(params);
        }
                    private function functTwo() :void
        {
            var params:Object = new Object();
            /* call FuntTwoRtn */       
            myCall.send(params);
        }

        public function FunctOneRtn(event:ResultEvent) : void{
            // Do Some Stuff
        }
                    public function FunctTwoRtn(event:ResultEvent) : void{
            // Do Some Stuff
        }

    ]]>
</fx:Script> 
```

谢谢艺术

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:25:35.533

您不能将参数传递给 HTTPService，但可以更改不同请求的处理函数。这是一个样本

```
<fx:Declarations>
<s:HTTPService id="myCall" url="http://myUrl.com/"
               useProxy="false" method="POST">
</s:HTTPService>
</fx:Declarations>

private function functOne():void
{
       myCall.addEventListener("result",FunctOneRtn);
}
private function functTwo():void
{
       mycall.removeEventListner("result",FunctOneRtn);
       myCall.addEventListener("result",FunctTwoRtn);
}
private function FunctOneRtn(event:ResultEvent)
{
    //handle function one result
}
private function FunctTwoRtn(event:ResultEvent)
{
    //handle function two result
} 
```

然后你可以随意调用functOne()和functTwo()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:25:08.000

我相信我们将只有一个 ResultEvent 函数，您必须编写逻辑来区分第一次和第二次调用从 ResultEvent 获得的结果。

# javascript - 在谷歌地图中切换信息框

> ID：11946679
> 
> 赞同：0
> 
> 时间：2012-08-14T06:10:35.887
> 
> 标签：javascript, google-maps-api-3

我在谷歌地图工作并成功实现了谷歌地图的**信息框插件**。现在我担心的是我们如何知道**标记的信息框是否处于打开状态**。这样我就可以在单击标记时切换它...

```
var locations = [
        //this is array of arrays
    ];

    var map = new google.maps.Map(document.getElementById('map_canvas'),{
        disableDefaultUI : true,
        zoom : 12,
        center : new google.maps.LatLng(defaultLatitude,defaultLongitude),
        mapTypeId : google.maps.MapTypeId.ROADMAP
    });

    var mapcode,myOptions;

    for (var i = 0,len = locations.length; i < len; i++) {
        var marker = add_marker(locations[i][1],locations[i][2],locations[i][3],'this is title',locations[i][0]);
        allMarkers.push(marker);
        marker.setMap(map);
    };

    function add_marker(lat,lng,icn,title,box_html) {

        var marker = new google.maps.Marker({
            animation : google.maps.Animation.DROP,
            position : new google.maps.LatLng(lat,lng),
            map : map,
            icon : icn
        }); 

        mapcode = '<this is the code of infobox to show>';

        myOptions = {
             //options of the infobox...bla bla
        };

        var ib = new InfoBox(myOptions);

        google.maps.event.addListener(marker, 'click', function() {
            ib.open(map, marker);
        });   
        return marker;
    } 
```

我是**谷歌地图**的新手，所以可能我错过了一些非常小的东西......提前谢谢...... Ankur

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:34:19.450

您可以检查是否已在 Google 地图的单击事件侦听器中打开了信息窗口。您可以像这样检查它：

```
var ib = new InfoBox(myOptions);
google.maps.event.addListener(marker, 'click', function() {
    if(ib)
        ib.close();
    marker.ib.open(map, marker);
} 
```

我希望这可以解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T09:40:49.203

如果您只需要随时打开一个信息框，您可以这样做：

```
 var ib = new InfoBox();
    ib.isOpen = false;
    function add_marker(lat,lng,icn,title,box_html) {

    var marker = new google.maps.Marker({
        animation : google.maps.Animation.DROP,
        position : new google.maps.LatLng(lat,lng),
        map : map,
        icon : icn
    }); 

    mapcode = '<this is the code of infobox to show>';

    myOptions = {
         //options of the infobox...bla bla
    };
    marker.ibOptions = myOptions;

    google.maps.event.addListener(marker, 'click', function() {
        ib.setOptions(marker.ibOptions);
        ib.open(map, marker);
        ib.isOpen = true;
    });   
    return marker;
} 
```

如果您这样做，则每次使用 ib.isOpen = false; 调用 ib.close() 时都需要重置标志；（您没有指定在什么情况下关闭该框）

如果您需要打开多个盒子：

```
function add_marker(lat,lng,icn,title,box_html) {

    var marker = new google.maps.Marker({
        animation : google.maps.Animation.DROP,
        position : new google.maps.LatLng(lat,lng),
        map : map,
        icon : icn
    }); 

    mapcode = '<this is the code of infobox to show>';

    myOptions = {
         //options of the infobox...bla bla
    };

    var ib = new InfoBox(myOptions);
    ib.isOpen = false;
    marker.ib = ib;

    google.maps.event.addListener(marker, 'click', function() {
        marker.ib.open(map, marker);
        marker.ib.isOpen = true;
    });   
    return marker;
} 
```

如果您再次调用 allMarkers[...].ib.close() ，则需要使用 allMarkers[...].ib.isOpen = false; 重置标志；

我希望这有帮助。

# c# - 在 C# 中的图像中绘制一个点

> ID：11946680
> 
> 赞同：1
> 
> 时间：2012-08-14T06:10:42.423
> 
> 标签：c#

我有一个尺寸为 100x50 的图像，我想在中心画一个点 - 即 50x25。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:27:31.120

您可以使用[setPixle()](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.setpixel.aspx)函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T06:16:09.173

```
Graphics g = pictureBox1.CreateGraphics();
g.DrawEllipse(Pens.Black, new Rectangle(50, 25, 1, 1)); 
```

看[这里](https://stackoverflow.com/questions/4203733/save-user-drawn-bitmap-graphics-in-c-sharp)保存图片

它不会在表单加载时使用，因此您应该在表单`paint`事件中添加代码：

```
private void Form1_Paint(object sender, PaintEventArgs e)
    {
        Application.DoEvents();
        Graphics g = pictureBox1.CreateGraphics();
        g.DrawEllipse(Pens.DarkBlue, new Rectangle(120, 90, 1, 1));
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T07:09:15.787

```
 Image img = pictureBox1.Image;

        Graphics g = Graphics.FromImage(img);

        g.DrawEllipse(Pens.DarkBlue, new Rectangle(50, 25, 1, 1));

        g.DrawImage(img, new Point(0, 0));

        img.Save("d:\\img.Jpeg", System.Drawing.Imaging.ImageFormat.Jpeg); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T07:31:22.703

试试这个其他问题：

```
 Rectangle bounds = new Rectangle(10, 20, 50, 60);
        Bitmap bitmap = new Bitmap(bounds.Width, bounds.Height);

        Graphics g = Graphics.FromImage(bitmap);
        g.CopyFromScreen(Point.Empty,Point.Empty, bounds.Size);

        bitmap.Save("d:\\img.Jpeg", System.Drawing.Imaging.ImageFormat.Jpeg); 
```

此代码将捕获具有边界矩形边界的屏幕。

# twitter-bootstrap - 如何在所见即所得 HTML5 编辑器中嵌入视频

> ID：11946681
> 
> 赞同：1
> 
> 时间：2012-08-14T06:10:46.357
> 
> 标签：twitter-bootstrap, ruby-on-rails-3.2

我正在开发一个教程网站，我想在其中为用户显示文本和视频教程。为了输入信息和格式化，我使用了 bootstrap-wysihtml5-rails 编辑器。使用这个编辑器，我可以添加链接、图像并执行所有基本功能。现在我想在编辑器中添加一个按钮来添加一个视频链接，帮助我添加本地视频存储的视频路径。我搜索了许多链接，但无法获得我的问题所需的解决方案。顺便说一下 m 使用 rails 3.2.2。任何帮助都是可观的。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T17:40:06.717

消除

第 4798 行 wysihtml5.js 将其更改为：

```
return elementOrHtml //turn off parser//  isString ? wysihtml5.quirks.getCorrectInnerHTML(element) : element; 
```

原线：

```
return isString ? wysihtml5.quirks.getCorrectInnerHTML(element) : element; 
```

将完全关闭解析器。

在

```
function parse(elementOrHtml, rules, context, cleanUp) {... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:42:16.233

我想这就是你要找的。我认为它只适用于 IE > 8。

[https://github.com/xing/wysihtml5/pull/4](https://github.com/xing/wysihtml5/pull/4)

# android - 应用程序在 froyo 和姜饼中运行良好，但在 ICS 中运行良好

> ID：11946687
> 
> 赞同：1
> 
> 时间：2012-08-14T06:11:33.960
> 
> 标签：android

我最近开发了一个应用程序，该应用程序将来自网络服务器的数据连接并解析到安卓设备中，在 froyo 和姜饼上进行了测试，运行良好，但在 ICS 设备上崩溃。至于 UI，我使用了 gingebread 对象，所以我认为这不是问题。

即使在连接到 facebook 后，它在第一次运行时也能正常工作，但在获取和解析所有收集的 JSON 数据的部分出现错误。

这是直接来自设备的 logcat 错误：

```
E/AndroidRuntime(25620): FATAL EXCEPTION: Thread-9660
E/AndroidRuntime(25620): java.lang.UnsupportedOperationException
E/AndroidRuntime(25620):        at java.lang.Thread.stop(Thread.java:1076)
E/AndroidRuntime(25620):        at java.lang.Thread.stop(Thread.java:1063)
E/AndroidRuntime(25620):        at com.android.guestlist.SplashScreen$1.run(Spla
shScreen.java:89)
E/android.os.Debug( 2090): !@Dumpstate > dumpstate -k -t -n -z -d -o /data/log/d
umpstate_app_error

E/Launcher(18546): Error finding setting, default accessibility to not found: ac
cessibility_enabled

E/log_tag (25620): Error in http connection android.os.NetworkOnMainThreadExcept
ion

E/log_tag (25620): Error converting result java.lang.NullPointerException

E/log_tag (25620): Error parsing data org.json.JSONException: End of input at ch
aracter 0 of

E/log_tag (25620): Error in http connection android.os.NetworkOnMainThreadExcept
ion

E/log_tag (25620): Error converting result java.lang.NullPointerException

E/log_tag (25620): Error in http connection android.os.NetworkOnMainThreadExcept
ion

E/log_tag (25620): Error parsing data org.json.JSONException: End of input at ch
aracter 0 of 
```

这是我的 JSON 解析器，因为我认为这是问题发生的地方？哦，我创建的日志甚至没有出现在电话日志中我真的不能说，但这里是代码：

```
public void getDataFromWeb(String a, String b){
        String result = "";

        Log.v(TAG, "Name Value Pair a " + a);
        Log.v(TAG, "Name Value Pair b " + b);

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

        nameValuePairs.add(new BasicNameValuePair("a_param",a));
        nameValuePairs.add(new BasicNameValuePair("b_param",b));

             try{
                     HttpClient httpclient = new DefaultHttpClient();
                     HttpPost httppost = new HttpPost("http://[mywebserviceshere].php");
                     httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                     HttpResponse response = httpclient.execute(httppost);
                     HttpEntity entity = response.getEntity();
                     is = entity.getContent();
                     Log.v(TAG, "connected");
             }catch(Exception e){
                     Log.v(TAG, "run failed");

                     Log.e("log_tag", "Error in http connection "+e.toString());
             }

             try{
                     BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                     sb = new StringBuilder();
                     String line = "0";

                     while ((line = reader.readLine()) != null) {
                             sb.append(line + "\n");
                     }
                     is.close();
                     result=sb.toString(); 
                     Log.v(TAG, "buffered read");
             }catch(Exception e){
                 Log.v(TAG, "buffered error");
                     Log.e("log_tag", "Error converting result "+e.toString());
             }

             try{
                 Log.v(TAG, result);

                     JSONArray jArray = new JSONArray(result);
                     JSONObject json_data=null;

                     for(int i=0;i<jArray.length();i++){
                         Log.v(TAG, "loop start");

                             json_data = jArray.getJSONObject(i);
                             w.add(json_data.getString("w_data"));
                             x.add(json_data.getString("x_data"));
                             y.add(json_data.getString("y_data"));
                             z.add(json_data.getString("y_data"));
                             Log.v(TAG, "list added");
                     }

             }catch(JSONException e){
                 w.add("0");
                 x.add("No Data");
                 y.add("No Data");
                 z.add("No Data");
                 Log.v(TAG, "rest failed");
                     Log.e("log_tag", "Error parsing data "+e.toString());
             }

    } 
```

最后，这正是 AVD 中的样子：

![在此处输入图像描述](../Images/1c9492639b185c39ebd0e5eb962f77ce.png)

这是 ICS 的问题还是我必须修改我的一些代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T06:18:16.313

你有一个`NetworkOnMainThreadException`，这通常是代码糟糕的标志，它会导致糟糕的用户体验，因为应用程序在运行某种网络活动时会锁定。是的，它（不幸的是）适用于蜂窝之前的设备，但这不是任何人都应该追求的。

为了解决您的问题，我强烈建议您使用单个`AsyncTask`并在该方法中执行所有 HTTP 调用`doInBackground()`。完成后，`onPostExecute()`将自动调用该方法，因此您可以更新 GUI。非常简单。

在做任何其他事情之前，请查看文档`AsyncTask`并理解它。我相信这将非常适合您的应用程序：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

所以不 - 这不是冰淇淋三明治的问题。它根本不允许您在主线程上发出网络请求，因为它可以阻止其他所有内容。

（这与我几天前回答的另一个问题非常相似，因此部分答案是从那里复制的：[https](https://stackoverflow.com/a/11897381/762442) ://stackoverflow.com/a/11897381/762442 ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:28:26.957

您收到此异常是因为您在主线程中执行网络操作

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://[mywebserviceshere].php");
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
HttpResponse response = httpclient.execute(httppost);
HttpEntity entity = response.getEntity();
is = entity.getContent(); 
```

这在 Honeycomb 之前是允许的，但在 honeycomb 之后这已经停止，如果你这样做，你会得到[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)。

所以最好使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。使用它，您可以在后台线程（除了主线程）中执行网络操作。

要了解更多`AsyncTask`工作原理，请参阅此[链接](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T06:27:06.643

在你的代码中使用 Asynctask 你得到 NetworkOnMainThreadException ，不仅使用 ics ，而且使用 honeycomb 它会给你同样的异常。

# bash - 为什么这个 shell 脚本不从标准输入收集所需的信息？

> ID：11946690
> 
> 赞同：0
> 
> 时间：2012-08-14T06:11:53.867
> 
> 标签：bash, centos

用例：我想将一封电子邮件从 procmail 传递到 shell 脚本，并让脚本将**Subject:**标头值存储为一个变量和**Return-Path:**标头值。

作为测试，我正在使用以下脚本：

```
#!/bin/bash
while read data; do
        SearchCriteria1=$(echo "$data" | grep "Subject: " | cut -c 9-)
        SearchCriteria2=$(echo "$data" | grep "Return-Path: " | cut -c 13-)
        echo "$SearchCriteria1" > test.1
        echo "$SearchCriteria2" > test.2
done 
```

echo 语句只是一个测试。我计划稍后在脚本中使用这些变量。

但是，当我尝试此操作时， test.1 和 test.2 只有空行。我知道我遗漏了一些明显的东西。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:21:53.550

对于每一行，您都对行进行 grep，留下一行或没有行。然后你用该行覆盖一个文件（大多数迭代可能是空的）。因此，如果这两个文件都是空的，则输入的最后一行既不包含`Subject:` or `Return-Path:`。

这可能是我的做法：

```
#!/usr/bin/env bash
while read -r key value; do
    case $key in 
        Subject:) subject=$value;;
        Return-Path:) return_path=$value;;
    esac
done
echo "<$subject> <$return_path>" 
```

我说可能是因为我不知道输入会是什么样子。

另请参阅[http://mywiki.wooledge.org/BashFAQ/001](http://mywiki.wooledge.org/BashFAQ/001)

# usb - 使端点数据缓冲区能够 DMA

> ID：11946694
> 
> 赞同：1
> 
> 时间：2012-08-14T06:12:22.650
> 
> 标签：usb, dma

我目前正在开发具有 SH_MOBILE 架构的定制硬件。硬件带有 USB（外设）和具有 2 个通道的 DMAC。我正在使用主线内核中可用的 R8a66597 UDC 驱动程序。我已将 DMA 相关功能添加到外围控制器驱动程序中。目前我能够让 DMA 在 TX 路径中工作。但在 RX 路径中，我无法使用 DMA，而是使用 PIO。这是因为缓冲区地址（struct usb_request 中的 buf）不是 8 位对齐的。我想知道如何确保这些数据传输缓冲区支持 DMA？

在此先感谢，斯里尼迪 KV

# php - 在 LIKE 条件下转义通配符

> ID：11946695
> 
> 赞同：0
> 
> 时间：2012-08-14T06:12:35.163
> 
> 标签：php, mysql, cakephp

在[搜索条件](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)中使用 LIKE 运算符时：

```
<?php
array('OR' => array(
    array('Post.title LIKE' => '%one%'),
    array('Post.title LIKE' => '%two%')
)) 
```

... CakePHP 中是否有一种内置机制来转义通配符，以便您可以搜索文字`%`或`_`简单地从不受信任的来源（例如表单）中注入搜索词？

```
<?php
array('OR' => array(
    array('Post.title LIKE' => '%' . $this->foo('100%') . '%'),
    array('Post.title LIKE' => '%' . $this->foo('red_apples') . '%')
                                            ^^^
)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:19:59.573

```
App::uses('Sanitize', 'Utility'); // load Sanitize utility        
$db = $this->Model->getDataSource(); // get the datasource
$this->Model->find('all', array(
    'conditions' => array(
        'name LIKE' => $db->expression('\'%' . addcslashes(Sanitize::escape($userInput), '%_') . '%\'')
    )
)); 
```

当我们使用`$db->expression`时，蛋糕不会为我们逃脱。因此，我们使用`Sanitize`实用程序手动进行转义，然后将`%`and`_`替换为`\%`and `\_`。不确定这是否 100% 安全，如果您发现不是这样，请告诉我，以便我更新答案。

你会想要创建自己的方法来完成这一切，让你保持干燥

编辑：替换`str_replace`为`addcslashes`

Edit2：意识到我过于复杂了。如果你想让蛋糕不逃逸，你也可以只提供一个没有键的值。前任。

```
'conditions' => array(
    'Post.title LIKE \'%' . addcslashes(Sanitize::escape($userInput), '%_') . '%\'',
) 
```

两种方式产生

```
`Post`.`title` LIKE '%100\'\%\_%' 
```

用于用户输入`$userInput = "100'%_";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:17:44.083

您将不得不使用[Data Sanitization 类](http://book.cakephp.org/2.0/en/core-utility-libraries/sanitize.html#data-sanitization)来实现相同的目的。希望它对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-13T12:23:02.060

我最终发现我可以简单地明确使用准备好的语句：

```
<?php
$query = array('OR' => array(
    array(
        'Post.title LIKE ?' => array(
            '%' . $this->escapeLike('100%') . '%'),
        ),
    ),
    array(
        'Post.title LIKE ?' => array(
            '%' . $this->escapeLike('red_apples') . '%'),
        ),
    ),
); 
```

...或者，当 DBMS 没有默认分隔符或者我们更喜欢设置我们的分隔符时：

```
<?php
$separator = '|';
$query = array('OR' => array(
    array(
        'Post.title LIKE ? ESCAPE ?' => array(
            '%' . $this->escapeLike('100%', $separator) . '%'),
            $separator
        ),
    ),
    array(
        'Post.title LIKE ? ESCAPE ?' => array(
            '%' . $this->escapeLike('red_apples', $separator) . '%'),
            $separator
        ),
    ),
); 
```

我的`escapeLike()`方法目前是这样的（这从来都不是困难的部分）：

```
/**
 * Escapes LIKE wildcard characters
 *
 * @param string $text
 * @param string $escape_character
 * @return string
 */
protected function escapeLike ($text, $escape_character='\\') {
    return strtr($text, array(
        '%'               => $escape_character . '%',
        '_'               => $escape_character . '_',
        $escape_character => $escape_character . $escape_character,
    ));
} 
```

为了简单起见，我实现了它`AppModel`（至少在我的项目中）。

这适用于带有 MySQL 适配器的 CakePHP/2.5（不知道其他场景）。

# php - PHP：带符号的二进制字符串

> ID：11946696
> 
> 赞同：4
> 
> 时间：2012-08-14T06:12:35.703
> 
> 标签：php, flash, bits

我在将二进制字符串转换为有符号整数时遇到问题

如果调用decbin('-40')，php会输出1111111111111111111111111111111111111111111111111111111111011000

但是，如果您调用 bindec(decbin('-40'))，它将输出 1.84467440737E+19（或类似的东西，显然不是 -40），因为它“将最高有效位视为另一个数量级，而不是符号位” - php 手册

有没有办法将二进制 64 位二进制字符串（很像 decbin 的输出）字符串转换为有符号整数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T06:37:09.640

从文档中，您不能使用`bindec`

> bindec() 将所有 binary_string 值解释为无符号整数。这是因为 bindec() 将最高有效位视为另一个数量级，而不是符号位。

`base_convert`似乎完全忽略了签名。

如果您知道传入的字符串**将始终**是 64 位二进制并且您**不在**32 位系统上，那么编写自定义函数非常容易。

*   检查字符串是否为 64 个字符长。
*   检查最高有效位是否为 1。
*   翻转所有位
*   添加 1
*   否定

这是我拼凑的一个快速的。

```
function bindec2($bin)
{
    if (strlen($bin) == 64 && $bin[0] == '1') {
        for ($i = 0; $i < 64; $i++) {
            $bin[$i] = $bin[$i] == '1' ? '0' : '1';
        }

        return (bindec($bin) + 1) * -1;
    }
    return bindec($bin);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:31:55.213

使用[pack](http://php.net/manual/en/function.pack.php)和[unpack](http://www.php.net/manual/en/function.unpack.php)在 int 和 binary string 之间进行转换。

```
// 'i' means signed integer
var_dump(unpack('i', pack('i', '-40'))); // gives you -40 
```

# asp.net-mvc-3 - 从 ajax 调用中注销

> ID：11946699
> 
> 赞同：2
> 
> 时间：2012-08-14T06:13:01.650
> 
> 标签：asp.net-mvc-3, session, jquery

现在我们倾向于在这个页面渲染之前将工作量拆分在一个页面中，以加快速度，所以，我们通常加载基本的，然后在 DOM 准备好后，我们调用所有部分以带来更多显示正常动画的数据加载 gif ...

**当请求这种方法时，用户会话已经过期并且他/她需要再次登录**的正常程序是什么？****

 **目前我没有这样的东西，浏览器只显示无穷无尽的加载 gif ......我想知道解决这种琐碎问题的最佳方法是什么。

我想过发送一个错误标志，我可以从 javascript 读取并重定向到登录页面

```
$.get( url, data, function(data) { 
    if(data.logout) document.location.href = '/LogOut'; 
    ...
}); 
```

但我很快就从我的控制器那里得到什么会话过期了**......**

PS 我的 Web 应用程序是使用 ASP.NET MVC 3 制作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T06:16:42.757

我建议您从[以下文章](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)开始，Phil Haack 在其中解释了如何正确处理 ASP.NET MVC 中的 401 错误，而不会自动将您重定向到`LogOn`页面。

然后像往常一样简单地执行您的 AJAX 请求：

```
$.get(url, data, function(data) { 
    // if we got here it means that the request succeeded
    // => do whatever you have to do for this case
}); 
```

然后您可以注册一个[全局 AJAX 事件](http://api.jquery.com/ajaxError/)来处理所有 AJAX 请求的 401 案例：

```
$(document).ajaxError(function (event, jqXHR, ajaxSettings, thrownError) {
    if (jqXHR.status == 401) {
        // the server returned 401 (Unauthorized) => 
        // redirect to the LogOn page
        window.location.href = 'put your logon url here';
    }
}); 
```**

# vb.net - 从一个文本文件中提取特定行到另一个文本文件

> ID：11946702
> 
> 赞同：1
> 
> 时间：2012-08-14T06:13:27.617
> 
> 标签：vb.net

我想从文本文件中提取一些特定的行到其他文本文件。我正在使用以下代码

```
 Imports System.IO

Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        Dim Tr As IO.TextReader = System.IO.File.OpenText("C:\Assignment.txt")
        For c As Integer = 1 To 10

            If c = 7 Then
                Dim MyFileLine As String = Split(Tr.ReadToEnd(), vbCrLf)(c) & vbCrLf
                Tr.Close()

                Dim TW As System.IO.TextWriter
                'Create a Text file and load it into the TextWriter 
                TW = System.IO.File.CreateText("C:\Assignment1.txt")
                TW.WriteLine(MyFileLine)
                'Flush the text to the file 
                TW.Flush()
                'Close the File 
                TW.Close()
            End If

        Next c
    End Sub
End Class 
```

但是这段代码只提取第 7 行，我也想提取第 8、9、10、14、15、16 行。请指导我正确的解决方案。提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:03:52.170

这里似乎有几个问题。我将更正它们，然后在下面解释：

```
Imports System.IO

Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        Dim currentLine As String
        Dim lineCounter As Integer = 1
        Dim lineNumbersRequired As List(Of Integer) = New List(Of Integer)
        lineNumbersRequired.Add(7)
        lineNumbersRequired.Add(8)
        lineNumbersRequired.Add(9)
        lineNumbersRequired.Add(10)
        lineNumbersRequired.Add(14)
        lineNumbersRequired.Add(15)
        lineNumbersRequired.Add(16)

        Dim TW As System.IO.TextWriter
        'Create a Text file and load it into the TextWriter 
        TW = System.IO.File.CreateText("C:\Assignment1.txt")

        Using Tr As IO.TextReader = New IO.StreamReader("C:\Assignment.txt")
            While Not Tr.EndOfStream
                If lineNumbersRequired.Contains(lineCounter) Then
                    Dim MyFileLine As String = Split(currentLine, vbCrLf)(c) & vbCrLf
                    TW.WriteLine(MyFileLine)
                End If
                lineCounter = lineCounter + 1
            End While
        End Using

        TW.Flush()
        'Close the File 
        TW.Close()

    End Sub
End Class 
```

*注意：代码未经测试，但如果您确实遇到一些编译错误，应该非常接近！*

好吧，简单介绍一下我在这里所做的事情：

1.  将 For 循环更改为一段时间，因为您的 for 循环从 1 运行到 10，因此即使它有效，您也永远不会读到文件中的第 10 行。因此，我将其更改为 while 循环，该循环将在 TextReader 读取文件中的所有行时结束。此外，从文件中读取的当前行已添加到名为 currentLine 的新变量中。
2.  新的 currentLine 变量现在用于填充写入文件的行。
3.  我添加了一个整数列表，它将保存您要保留的行号，然后在 while 循环中，我有一个计数器，它在处理每一行时对其进行计数，如果该计数器在您要保存的行号列表中到您的输出文件中，然后它将输出当前行。

让我知道你的进展情况，如果你需要更多的解释，请询问。

# php - zend 形式的验证

> ID：11946703
> 
> 赞同：0
> 
> 时间：2012-08-14T06:13:28.887
> 
> 标签：php, zend-framework, zend-form

在 Zend Form 中使用更改密码时，我想检查旧密码和新密码。两者不应该相同。Zend Form 中是否有任何选项可以检查两者。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:31:35.260

在 My 下创建一个库并使用以下内容：

```
class My_Validate_PasswordConfirmation extends Zend_Validate_Abstract
{
    const NOT_MATCH = 'notMatch';

    protected $_messageTemplates = array(
        self::NOT_MATCH => 'Password confirmation does not match'
    );

    public function isValid($value, $context = null)
    {
        $value = (string) $value;
        $this->_setValue($value);

        if (is_array($context)) {
            if (isset($context['password_confirm'])
                && ($value == $context['password_confirm']))
            {
                return true;
            }
        } elseif (is_string($context) && ($value == $context)) {
            return true;
        }

        $this->_error(self::NOT_MATCH);
        return false;
    }
} 
```

[更多信息请参阅： Zend 手册](http://framework.zend.com/manual/en/zend.form.elements.html) 向下滚动或查找：

> 注意：验证上下文

在源页面上。代码在它的正下方给出，解释也是如此。

希望能帮助到你！:)

# python - 在python中以给定速率执行特定语句

> ID：11946706
> 
> 赞同：4
> 
> 时间：2012-08-14T06:14:00.653
> 
> 标签：python

我想编写一个每秒执行指定次数的语句的代码，你们中的许多人可能对术语速率比较熟悉

在这里，我希望速率为每秒 30

说我想在 60 秒内每秒执行 30 次函数意味着速率 = 30/秒 持续时间 = 60 秒

谁能告诉我他们的任何 api 在 python 中可以做同样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:04:36.670

该`sched`模块正是为此而设计的：

```
from __future__ import division
import sched
import time

scheduler = sched.scheduler(time.time, time.sleep)

def schedule_it(frequency, duration, callable, *args):
    no_of_events = int( duration / frequency )
    priority = 1 # not used, lets you assign execution order to events scheduled for the same time
    for i in xrange( no_of_events ):
        delay = i * frequency
        scheduler.enter( delay, priority, callable, args)

def printer(x):
    print x

# execute printer 30 times a second for 60 seconds
schedule_it(1/30, 60, printer, 'hello')
scheduler.run() 
```

对于线程环境，使用`sched.scheduler`可以替换为`threading.Timer`：

```
from __future__ import division
import time
import threading

def schedule_it(frequency, duration, callable, *args, **kwargs):
    no_of_events = int( duration / frequency )
    for i in xrange( no_of_events ):
        delay = i * frequency
        threading.Timer(delay, callable, args=args, kwargs=kwargs).start()

def printer(x):
    print x

schedule_it(5, 10, printer, 'hello') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:33:29.300

尝试使用[`threading.Timer`](http://docs.python.org/library/threading.html#timer-objects)：

```
def hello():
    print "hello, world"

t = Timer(30.0, hello)
t.start() # after 30 seconds, "hello, world" will be printed 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T08:48:43.150

你可以`time.time()`用来做你想做的事：

```
import time

def your_function():
    # do something...

while True:
    start = time.time() # gives current time in seconds since Jan 1, 1970 (in Unix)
    your_function()
    while True:
        current_time = time.time()
        if current_time - start >= 1.0/30.0:
            break 
```

这将确保调用之间的延迟`your_function`非常接近 1/30 秒，即使`your_function`运行需要一些时间。

还有一种方法：使用 Python 内置的调度模块，`sched`. 我从来没有使用过它，所以我无法帮助你，但看看它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-14T12:00:35.590

花了一些时间后，我发现了如何做好它，我在 python 中使用了多处理来实现它，这是我的解决方案

```
#!/usr/bin/env python
from multiprocessing import Process
import os
import time
import datetime
def sleeper(name, seconds):
   time.sleep(seconds)
   print "PNAME:- %s"%name

if __name__ == '__main__':
   pros={}
   processes=[]
   i=0
   time2=0
   time1=datetime.datetime.now()
   for sec in range(5):
        flag=0
        while flag!=1:
                time2=datetime.datetime.now()
                if (time2-time1).seconds==1:
                        time1=time2
                        flag=1
                        print "Executing Per second"
                        for no in range(5):
                                i+=1
                                pros[i] = Process(target=sleeper, args=("Thread-%d"%i, 1))
                        j=i-5
                        for no in range(5):
                                j+=1
                                pros[j].start()
                        j=i-5
                        for no in range(5):
                                j+=1
                                processes.append(pros[j])
   for p in processes:
        p.join() 
```

# drop-down-menu - 下拉菜单中的推特引导弹出窗口不起作用

> ID：11946707
> 
> 赞同：1
> 
> 时间：2012-08-14T06:14:12.647
> 
> 标签：drop-down-menu, twitter-bootstrap, popover

```
 <div class="btn-group">
   <button class="btn dropdown-toggle" data-toggle="dropdown"> Reviews </button>
   <button class="btn dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
   <ul class="dropdown-menu">
      <li><a href="#" id="reviewhover" rel="popover" placement="right" data-content="Reviewer:testuser is too good, too cool, too sad, too bad, too right, too wrong">testuser 2012/08/12 12:25:42:836 PM</a></li>
      <li><a href="#" id="reviewhover" rel="popover" placement="right" data-content="Reviewer:testuser11 is too">testuser11 2012/08/13 12:25:42:836 PM</a></li>
    </ul>
 </div>​ 
```

我正在使用 bootstrap.min.js v2.0.4 和 jquery 1.7.2，尝试使用 jquery 1.8.0 和 1.7.1，结果相同

我在 tbspopover.js 中有这个 js 代码-

```
 jQuery(function(){
     $('a[rel=popover]').popover();
 }); 
```

脚本顺序

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="/vendor/bootstrap.min.js"></script>
<script src="/js/views/tbspopover.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:45:52.410

在元素添加到 DOM 之前调用了启用 popover 的 js 函数。直到完成 ajax 调用后才添加 DOM 元素。在这里找到[一个提示](https://stackoverflow.com/a/11947156/1447121)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:55:20.313

使用旧版本（2.0.2）的 Bootstrap 它应该可以工作。

[您可以在此处](http://jsfiddle.net/handtrix/kRLea/1/)找到一个工作示例。

旧版本的 Twitter Bootstrap 可以在 Github 上[找到](https://github.com/twitter/bootstrap/tags)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T22:48:34.837

我有一个类似的问题，这是因为 .btn-group 的字体大小设置为零！

# ajax - 主干：在重置集合之前发出 ajax 调用

> ID：11946709
> 
> 赞同：0
> 
> 时间：2012-08-14T06:14:19.563
> 
> 标签：ajax, collections, asynchronous, backbone.js

现在我有一个获取值的集合，然后每个附加到重置事件的视图都会再次呈现

问题是我还必须发出另一个查询来获取检索到的记录总数，并且只有在该 ajax 调用完成后才会触发重置事件

用一些代码更清楚：

```
fetch: function() {
  options = { data: this.getParams() };
  this.fetch_total();
  return Backbone.Collection.prototype.fetch.call(this, options);
},

fetch_total: function() {
  var that = this;
  var options = { 
    url: this.url + '/count',
    data: this.getParams(),
    contentType: 'application/json',
    success: function(resp, status, xhr) {
      that.total = parseInt(resp);
      return true;
    }
  };
  return $.ajax(options);
} 
```

如您所见，我必须向 localhost/myentity/count 发出 get 以获取实体的数量...

问题是我需要在刷新视图之前更新 collection.total 变量，这意味着我需要在刷新所有视图之前完成对 localhost/myentity 和 localhost/myentity/count 的 GET 请求……

知道如何实现吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:56:54.113

如果您选择的 $ 是 jQuery>1.5，您可以利用[延迟对象](http://api.jquery.com/category/deferred-object/)在两个调用都完成时手动触发重置事件。与您的答案类似，但更具可读性且无需链接调用：

```
fetch: function() {
  options = {silent: true, data: this.getParams()};
  var _this = this;
  var dfd_total = this.fetch_total();
  var dfd_fetch = Backbone.Collection.prototype.fetch.call(this, options);

  return  $.when(dfd_total, dfd_fetch).then(function() {
        _this.trigger('reset', _this);
  })
},

fetch_total: function() {
    // what you have in your question
} 
```

还有一个模拟这些调用的小提琴[http://jsfiddle.net/rkzLn/](http://jsfiddle.net/rkzLn/)

当然，一次性返回结果和总数可能更有效，但我想这不是一个选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:03:58.027

我认为@nikoshr 的答案是一个很好的答案，这样您就不必修改您的 API。如果您认为要减少对服务器的调用，请考虑从具有分页信息的端点返回一个对象。

```
{
  count: 1243,
  page: 3,
  per_page: 10,
  results: [
    ...
  ]
} 
```

然后覆盖集合的解析功能

```
parse: function(res) {
  this.count = res.count;
  this.page = res.page;
  this.per_page = res.per_page;
  // return the collection
  return res.results;
} 
```

**资源**

*   [http://backbonejs.org/#Collection-parse](http://backbonejs.org/#Collection-parse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T06:32:30.763

我想我找到了一种方法。我所做的是静默触发 fetch 调用，而不触发“重置”事件

在那里，从回调中，我发出总数的获取（GET 到 localhost/myentity/count）

从总回调中，我终于触发了重置事件

在代码中是这样的：

```
fetch: function() {
  var that = this;
  options = {
    // will manually trigger reset event after fetching the total
    silent: true,       
    data: this.getParams(),
    success: function(collection, resp) {
      that.fetch_total();
    } 
  };
  return Backbone.Collection.prototype.fetch.call(this, options);
},

fetch_total: function() {
  var that = this;
  var options = { 
    url: this.url + '/count',
    data: this.getParams(),
    contentType: 'application/json',
    success: function(resp, status, xhr) {
      that.total = parseInt(resp);
      // manually trigger reset after fetching total
      that.trigger('reset', that);    
      return true;
    }
  };
  return $.ajax(options);
} 
```

这是我的第一次尝试，我想知道是否有更简单的方法

# javascript - 使用 setTimeout() 时，函数未按我期望的顺序执行

> ID：11946710
> 
> 赞同：0
> 
> 时间：2012-08-14T06:14:20.730
> 
> 标签：javascript

我有这段代码，我使用两个 javascript 函数为我做一些操作。一个函数进行一些计算，但在执行其他任何操作之前调用另一个函数。当另一个函数返回给它时，它应该进行最后的计算。

**问题：**对另一个函数的调用没有正确执行。甚至在第二个函数返回之前，第一个函数完全执行。 **代码：**

```
firstfunction{

        secondfunction();

        do something more nothing related to second
     }

secondfunction(){

           setTimeout(func1(){
               do something independently
                 then call func1 depending on some condition
               },time);     
         } 
```

第二个功能也在其他地方使用并且工作正常。

**我的问题：** 我使用这段代码认为第一个函数在第二个函数完全执行之前不会执行。这样对吗？这不是javascript函数应该运行的方式吗？第一个函数在第二个返回之前完全执行。我确信这一点，因为在第二次返回图形的位置后，首先应该将该图形放在屏幕上。但是第一个完全执行，图形被笨拙地放置在屏幕上，观众可以看到它移动到第二个循环给出的正确位置。是`setTimeout`造成这个问题吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:19:19.980

发生这种情况是因为您使用`setTimeout`. `setTimeout`将使其异步。设置间隔后将完成第二个函数的执行，执行流程将返回到第一个函数。因此，您必须拆分您的第一个功能并制作第三个功能，该功能将具有最后的步骤。这第三个函数必须从`setTimeout`处理程序中调用。

```
 function firstfunction(){

        secondfunction(params);

     }

     function secondfunction(params){

           setTimeout(func1(){
               do something independently
                    then call thirdfunction depending on some condition
               },time);     
     }

     function thirdfunction(params){
         do something more nothing related to second
     } 
```

在这种方法中，您必须将所有内容作为参数从一个函数传递到另一个函数。

您也可以通过将第三个设置为回调函数来以不同的方式执行此操作。这样，您可以使 firstfunction 范围内的所有内容都可用于 thirdfunction。

```
 function firstfunction{

        secondfunction(thirdfunction);

        function thirdfunction(){
            do something more nothing related to second
        }

     }

     function secondfunction(callback){

           setTimeout(func1(){
               do something independently
                 then call callback depending on some condition
               },time);     
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:19:22.387

> *“即使在第二个函数返回之前，第一个函数也会完全执行。”*

不，实际上第二个函数在调用后立即返回`setTimeout()`- 它不会*等待*超时发生。您传递给的`func1()`函数`setTimeout()`将在指定的超时延迟后稍后被调用，但同时执行将继续调用之后的任何内容`setTimeout()`（在这种情况下，函数的结尾跟随，所以它返回到第一个函数，然后是第一个函数的其余部分功能继续）。换句话说，`setTimeout()`不会暂停执行。

*如果您需要在超时后*发生某些事情，您需要将它放在您传递给的函数中`setTimeout()`或从该函数调用它。

# c++ - Stroustrup 如何对临时对象进行非常量引用？

> ID：11946711
> 
> 赞同：27
> 
> 时间：2012-08-14T06:14:26.757
> 
> 标签：c++, reference, language-lawyer

在 Stroustrup 的 C++ Programming Language book（第 3 版）中，在 Numerics 章节中，他展示了以下代码片段：

```
void f(valarray<double>& d)
{
    slice_array<double>& v_even = d[slice(0,d.size()/2,2)];
    slice_array<double>& v_odd = d[slice(1,d.size()/2,2)];

    v_odd *= v_even;
    v_even = 0;
} 
```

问题是，`v_even`并且`v_odd`是对临时对象的非常量引用，这是不允许的。并尝试编译它会发出错误：

```
error: non-const lvalue reference to type 'slice_array<double>' cannot bind to a temporary of type 'slice_array<double>'
    slice_array<double>& v_even = d[slice(0,d.size()/2,2)];
                         ^        ~~~~~~~~~~~~~~~~~~~~~~~~ 
```

我检查了所有在线可用的勘误表，没有任何内容涉及这个基本问题。我错过了什么吗？自从这本书出版以来，这方面的语言是否发生了变化（不太可能，因为这本书本身提到了反对非常量引用临时变量的规则）？这里发生了什么？

* * *

如果我修改函数以使用值而不是引用，例如`slice_array<double> v_even = ...`，那么这实际上是编译的。然而，事实证明我的本地 C++ 头文件使复制构造函数公开，而 Stroustrup 和各种在线参考（cppreference.com、cplusplus.com）声称复制构造函数是私有的。我认为这意味着这个解决方案是不可移植的。Stroustrup 明确列出了一个带有非引用变量的代码示例，并表示这会产生错误，这一事实进一步强化了这一点。

* * *

C++98 规范 ( [PDF](http://www-d0.fnal.gov/~dladams/cxx_standard.pdf) ) 声明`slice_array<T>`具有私有复制构造函数。到 2005 年（根据[这个规范](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1905.pdf)），大概是作为 C++03 的一部分，这变成了一个公共复制构造函数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T07:58:34.353

原始代码示例似乎存在几个不同的问题，并且书中为许多运算符给出的声明也存在。

我认为“最佳”解决方案如下

```
void f(valarray<double>& d)
{
    const slice_array<double>& v_even = d[slice(0,d.size()/2,2)];
    const slice_array<double>& v_odd = d[slice(1,d.size()/2,2)];

    v_odd *= v_even;
    v_even = 0;
} 
```

所有操作符`slice_array<T>`都被定义为`const`它们不是修改切片本身，而是修改内容。这些在书中被错误地定义为非`const`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T06:30:41.500

这似乎是在勘误表中发布的（尽管链接现在已经失效）。

但是谷歌很棒，它显示了像“slice_array& v_even”这样的搜索

> Stroustrup：**C++ 编程**语言第三次印刷的勘误表
> www.research.att.com/~bs/3rd_printing4.html
> [缓存][分享] 在 Google+ 上共享。
> 查看帖子。
> 你公开为此 +1 了。
> 撤消

```
void f(valarray<double>& d)
{
    slice_array<double>& v_even = d[slice(0,d.size()/2, 2)];
    slice_array<double>& v_odd  = d[slice(1,d.size()/2,2)];

    v_odd *= 2; // double ... 
```

编辑：-感谢凯文的问题编辑，我可以在 N3092 中清楚地看到它不再是错误（第 26.6.1，第 944 页）

> **4.**引入此类替换类型的实现应提供如下附加函数和运算符：
> — 对于每个采用 const valarray& 的函数，应添加采用替换类型的相同函数；
> — 对于每个采用两个 const valarray& 参数的函数，应添加采用 const valarray& 和替换类型的每种组合的相同函数。
> 
> **5.**特别是，实现应允许从此类替换类型构造 valarray，并应允许将此类类型的赋值和计算赋值给 valarray、**slice_array、** gslice_array、mask_array 和indirect_array 对象。

此外，我的编译器没有给出任何代码问题（目前是 VS 2010），可以完美编译。

# database - 我如何设置从数据库中动态读取的日期？

> ID：11946712
> 
> 赞同：-5
> 
> 时间：2012-08-14T06:14:26.067
> 
> 标签：database, date, css

在codeigniter中从数据库中动态读取日期，如下所示

```
<?php echo format_date($row['date'], 'd M')?> 
```

结果会像`27 Jul`

我想将其设置为喜欢这张图片[http://line25.com/wp-content/uploads/2012/date-icon/16.jpg](http://line25.com/wp-content/uploads/2012/date-icon/16.jpg)

我怎样才能像这张图片一样风格请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:05:02.780

恐怕仅靠 CSS 是做不到的。主要问题是日期的组成部分不会作为元素出现在标记中，因此您不能对它们进行不同的样式设置，除非在一定程度上。通过设置将它们强制为不同线条的宽度，您就有机会使用`:first-line`. 但是，在规范和实践中，为该伪元素设置样式的可能性相当有限。

所以你需要修改生成代码以产生类似的东西

```
<span class=date><span class=day>27</span><span class=month>Jul</span></span> 
```

然后，您可以将这样的元素设置为内联块，将内部`span`元素设置为块，并为外部元素设置背景和内容颜色、字体属性和圆角边框。

# c# - XNA 在渲染中清除纹理？

> ID：11946723
> 
> 赞同：1
> 
> 时间：2012-08-14T06:15:35.440
> 
> 标签：c#, xna, textures

我们正在将大量纹理预渲染到 RenderTexture2D，这就是我们遇到的问题：

![XNA 的渲染问题](../Images/b0668e5a03f05ba0e6af58308fdb9ee7.png)

似乎在渲染块期间随机地，每个单元格（顶部和侧面）的纹理都会损坏并消失。奇怪的是，当渲染下一个块时它们又回来了，所以它似乎是每帧发生的事情。

有谁知道为什么会发生这种情况（而且似乎是随机的；注意白色矩形是侧面纹理损坏的地方，您可以从那里看到纹理只包含透明）？

**编辑：**立方体的侧面被保存到 Texture2D，但它们仍然在块渲染的中间消失，然后在下一个渲染中回来。所以我不明白为什么 Texture2D 中的图形会消失并回来，没有重新初始化（这是奇怪的部分）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:29:46.133

RenderTexture2D 只是一个临时内存结构，并且会很快且定期地刷新。这是因为它被重用以节省内存并在较小程度上加快速度。因此，您应该只将其视为存储纹理的非常临时的地方。您需要将其转移到合适的 Texture2D 上，这样可以保存更长时间。就像做一个简单的：

```
Texture2D YourPic = (RenderTexture2D)SomeRenderedPic; 
```

不会这样做。这只是将指针传递给渲染图像的内存空间。当显卡丢弃它时，它仍然会消失。你想做的更像是：

```
Color[] MyColorArray = new Color[SomeRenderedPic.Width * SomeRenderedPic.Height];
SomeRendeerPic.GetData<Color>(MyColorArray);
Texture2D YourPic = new Texture2D(
        GraphicsDevice,
        SomeRenderedPic.Width,
        SomeRenderedPic.Height);
YourPic.SetData<Color>(MyColorArray); 
```

现在，如果我正确地编写了该代码，那么它应该将数据而不是指针存储到新纹理中。这使得新纹理拥有自己独特的内存空间，不会像渲染目标空间那样被刷新。

这种方法有一个缺点。它不能在 XNA 的全刷新率下完成。（大约每秒 60 帧……我想……也许是 30 帧……我忘了。）无论如何，如果您需要非常持续的刷新，这可能还不够快。但是，如果您正在创建一个不会真正改变太多的静态纹理，那么这可能会为您解决问题。

希望这是有道理的，因为我在飞行中和深夜写这篇文章。如果这不起作用，我道歉。如果需要，请随时通过 jareth_gk@hotmail.com 给我写信。如果我能够回答您的问题，我将很高兴。

否则祝你好运，并有创造力。我确信有一个解决方案。

x 杰里米·M。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:30:49.430

我不能说我们曾经肯定地解决过这个问题，但它似乎是由线程化或将任务拆分到多个周期引起的。这不是 RenderTarget2D 的问题，因为我们当时已经这样做了。

# jsf-2 - 使用 facelets 在 JSF 应用程序中刷新页面时 CSS 和 JS 库丢失

> ID：11946726
> 
> 赞同：0
> 
> 时间：2012-08-14T06:15:43.290
> 
> 标签：jsf-2, facelets

为什么我在 JSF 中刷新具有模板的页面时会丢失所有 CSS 和 JS？

**我的模板：**

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link href="./resources/css/default.css" rel="stylesheet" type="text/css" />
        <link href="./resources/css/cssLayout.css" rel="stylesheet" type="text/css" />
        <title>Facelets Template</title>
    </h:head>

    <h:body>

        <div id="top" class="top">
            <ui:insert name="top">
                <h:form>
                    <h:commandButton value="Home" action="#{auth.goHome()}"/>
                    <h:commandButton value="Logout" action="#{auth.logout}"/>
                </h:form>
            </ui:insert>
        </div>
        <div>
            <div id="left">
                <ui:insert name="left">Left</ui:insert>
            </div>
            <div id="content" class="left_content">
                <ui:insert name="content">Content</ui:insert>
            </div>
        </div>
    </h:body>

</html> 
```

**子页面：**

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <ui:composition template="/contentTemplate.xhtml" >

        </ui:composition>
    </h:body>
</html> 
```

![在此处输入图像描述](../Images/85ff506528b5e7d71859fa328b392f87.png)

```
**GET http://localhost:11032/Integration/Common/resources/css/default.css 404 (Not Found) welcome.xhtml:5
GET http://localhost:11032/Integration/Common/resources/css/cssLayout.css 404 (Not Found)** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:10:08.793

开始尝试更换

```
<link href="./resources/css/default.css" rel="stylesheet" type="text/css" /> 
```

（和其他CSS）与

```
<h:outputStylesheet name="css/default.css" target="head" /> (do same for the other css) 
```

如果那不起作用，您可以尝试使用`#{facesContext.externalContext.requestContextPath}`

```
<link href="#{facesContext.externalContext.requestContextPath}/css/default.css" rel="styleSheet" type="text/css"/> 
```

# android - 想要从 Listview 中删除选定的项目

> ID：11946733
> 
> 赞同：4
> 
> 时间：2012-08-14T06:16:19.247
> 
> 标签：android

我使用 List 和 Arrayadapter 将字符串放入 Listview 中。现在我想删除选定的项目。我尝试了以下代码，但效果不佳。我怎样才能解决这个问题？

这是我的代码：

```
TextView t1;
String[] temp;
mylist = (ListView) findViewById(R.id.list);
final List<String> wordList = Arrays.asList(temp);
adapter = new ArrayAdapter<String>(this,
                                   android.R.layout.simple_list_item_multiple_choice, 
                                   wordList);
delete.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View arg0) {
       int index = mylist.getSelectedItemPosition();
       int count=mylist.getCount();
       for(int i=0;i<=count;i++) {
           if (index >= 0) {
               t1.setText(wordList.remove(index));
           }
           adapter.notifyDataSetChanged();
       } 
   }
}); 
```

这里有更多源代码：

```
 public class Edit extends Activity {
        SharedPreferences sharedpref;
        ListView mylist;
        String[] temp;
        String name, 
        ArrayAdapter<String> adapter;
        Button save, delete, cancel;
        TextView t1;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.edit);
            mylist = (ListView) findViewById(R.id.list);
            cancel = (Button) findViewById(R.id.cancel1);
            save = (Button) findViewById(R.id.save1);
            delete = (Button) findViewById(R.id.delete1);
            t1=(TextView)findViewById(R.id.textView1);
            sharedpref = PreferenceManager
                    .getDefaultSharedPreferences(getApplicationContext());
            name = sharedpref.getString("Visible_selected", "");

            String delimiter = "\n";
            temp = name.split(delimiter);

            mylist.setItemsCanFocus(true);
            mylist.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
             final List<String> wordList = Arrays.asList(temp);  

            adapter = new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_multiple_choice, wordList);
            mylist.setAdapter(adapter);
            save.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub

                }
            });

            delete.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    mylist.setOnItemClickListener(new OnItemClickListener() {
                        private String getSelectedItemOfList;
                        @Override
                        public void onItemClick(AdapterView<?> arg0, View arg1,
                                int arg2, long arg3) {
                            // TODO Auto-generated method stub
                             getSelectedItemOfList = sortedList.get(arg2).getStr_movieParam();

                }
            });

            cancel.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                }
            });

        }

    } 
```

这是我的更新代码：

```
enter code here 
```

delete.setOnClickListener(new OnClickListener() {

```
 @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
         adapter.remove(getSelectedItemOfList);
         adapter.notifyDataSetChanged();
            }
        });
        mylist.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                // TODO Auto-generated method stub
                SparseBooleanArray checkedPositions =mylist.getCheckedItemPositions();
                if(checkedPositions.get(arg2)==true){
                getSelectedItemOfList = (String) mylist.getItemAtPosition(arg2);
                t1.append(getSelectedItemOfList.toString()+"\n");}
            }
        }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T06:21:58.187

尝试实现 onitemclickListener 并获取项目 id 并删除在 arrayadapter 中单击的项目，然后调用 adapter.notifyDataSetChanged();

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-28T20:13:05.967

试试这个...

```
 mylist.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> adapter, View v, int position,
                                long arg3) {
            String value = (String) adapter.getItemAtPosition(position);
            adapter.remove(value);
            adapter.notifyDataSetChanged();               
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T06:33:40.190

我认为您应该使用`OnItemClickListener()`，`listview`以便当您选择/单击任何列表项时，您将获得所选项目的名称，然后您可以执行删除操作。

试试这个。

```
 mylist.OnItemClickListener(listenerOflistView);

private OnItemClickListener listenerOflistView = new OnItemClickListener() {
    private String getSelectedItemOfList;

    public void onItemClick(AdapterView<?> view, View view1, int pos,
            long arg3) {
        // TODO Auto-generated method stub

    getSelectedItemOfList = mylist.get(pos).toString(); // here you will get selected item name.
      }
    } 
```

希望这会帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-27T20:15:47.967

请参阅此代码，它可以帮助您了解如何删除列表视图中的项目。

```
private ArrayList<String> students = new ArrayList<>();
private ArrayAdapter<String> arrayAdapter;
private ListView myListView;
private int getSelectedIndex = -1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    myListView = (ListView) findViewById(R.id.myListView);
    students.add("rahim");
    students.add("karim");
    students.add("sumon");
    students.add("rakib");
    students.add("porag");
    arrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, students);
    myListView.setAdapter(arrayAdapter);
    myListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            Toast.makeText(getApplicationContext(), "hello " + students.get(position), Toast.LENGTH_LONG).show();
            MainActivity.this.getSelectedIndex = position;
            for (int i = 0; i < myListView.getChildCount(); i++) {
                if(position == i ){
                    myListView.getChildAt(i).setBackgroundColor(Color.BLUE);
                }else{
                    myListView.getChildAt(i).setBackgroundColor(Color.TRANSPARENT);
                }
            }

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.menu_main, menu);//Menu Resource, Menu
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.add:
            Toast.makeText(getApplicationContext(), "Item 1 Selected", Toast.LENGTH_LONG).show();
            return true;
        case R.id.delete:
            if(this.getSelectedIndex!=-1){
                students.remove(this.getSelectedIndex);
                this.getSelectedIndex = -1;

                arrayAdapter.notifyDataSetChanged();
                myListView.setAdapter(arrayAdapter);

            }
            return true;
        default:
            return false;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T06:24:46.037

我想说做到这一点的最好方法（真正最好的方法是自定义适配器）是在你的类中保留你的数组列表的副本。然后，当调用 delete 时，从您的数组列表副本中删除该项目并重新初始化列表视图。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T06:28:18.740

我想告诉你的第一件事是你编写的代码是错误的......可能是你想要listview上的上下文菜单......

如果您获得所选项目的位置，那么您可以拥有

```
adapter.removeItem(adapter.getItem(position));
adapter.notifyDatasetChanged() 
```

这可以帮助你吗

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-14T09:54:08.147

代替

```
delete.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            mylist.setOnItemClickListener(new OnItemClickListener() {
                private String getSelectedItemOfList;
                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    // TODO Auto-generated method stub
                     getSelectedItemOfList = sortedList.get(arg2).getStr_movieParam();
        }
    }); 
```

和

```
 mylist.setOnItemClickListener(new OnItemClickListener() {
                private String getSelectedItemOfList;
                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    // TODO Auto-generated method stub
                     getSelectedItemOfList = sortedList.get(arg2).getStr_movieParam();
        }
    }); 
```

和

```
delete.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

                 adapter.remove(getSelectedItemOfList );
adapter.notifydatasetChanged

        }
    }); 
```

检查这个

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-20T02:16:51.433

尝试在[http://appfulcrum.com/2010/09/12/listview-example-3-simple-multiple-selection-checkboxes/中使用此代码](http://appfulcrum.com/2010/09/12/listview-example-3-simple-multiple-selection-checkboxes/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-25T13:10:45.153

公共类 ListTest 扩展 Activity {

```
String selectedItem;
ArrayAdapter<String> adapter;
ArrayList<String> newList = new ArrayList<String>();
ListView l1;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_test);

  l1 = (ListView) findViewById(R.id.lsvSign);

    newList.add("Android");
    newList.add("iOS");
    newList.add("Mac");
    newList.add("Windows");
    newList.add("Linux");;
    Collections.sort(newList);
    adapter = new new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,newList);
    l1.setAdapter(adapter);  

  l1.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int position,
            long arg3) {            
         selectedItem = l1.getItemAtPosition(position).toString();           
       RemoveItem(selectedItem);

    }
});  
protected void RemoveItem(String item) {
    newList.remove(item);
    adp2.notifyDataSetChanged();
}   
} 
```

}

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-24T11:15:33.823

尝试工作代码： `listAdapter.remove(listAdapter.getItem(position)); mainListView.setAdapter( listAdapter );`

# ajax - 发送请求后中止 Servlet 调用

> ID：11946734
> 
> 赞同：-1
> 
> 时间：2012-08-14T06:16:33.350
> 
> 标签：ajax, servlets

1.通过 ajax，我在单击 OK 按钮时向 servlet 发送了一个请求。
2.该请求处理一些数据库调用并持有一些结果集
3.现在，当我单击“取消”按钮时，需要取消/中止请求。
4.同时，我需要按请求保存的结果集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:46:10.333

Servlet API（或我知道的任何容器特定机制）中没有允许中止正在进行的 HTTP 请求的机制（在这种情况下，缺少 kill -9 将中止而不是您希望的更多） ）。

# postgresql - 无法在 PostgreSQL 8.2 中运行块

> ID：11946736
> 
> 赞同：2
> 
> 时间：2012-08-14T06:16:39.293
> 
> 标签：postgresql

我不能在 PostgreSQL 8.2 中运行这个块。

```
DECLARE
        curtime char;
BEGIN
        curtime := 'now';
        INSERT INTO logtable VALUES (logtxt, curtime);
        RETURN curtime;
END; 
```

当我尝试它显示错误：

```
ERROR: syntax error at or near "char"
SQL state: 42601 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T06:18:30.507

听起来您正在尝试独立运行[PL/PgSQL](http://www.postgresql.org/docs/current/static/plpgsql.html)代码块，而不是使用[`CREATE OR REPLACE FUNCTION`](http://www.postgresql.org/docs/9.1/static/sql-createfunction.html). 那是行不通的，你需要将它包含在一个函数或（从 PostgreSQL 9.0）一个[`DO`块](http://www.postgresql.org/docs/current/static/sql-do.html)中。*PL/PgSQL 和普通 SQL 是不同的语言*，因此您不能直接运行 PL/PgSQL 代码。

如果您解释*了为什么*要尝试编写粘贴的代码，将会有所帮助。我怀疑您正在尝试解决一个问题，该问题可以使用诸如[审计触发器之类的](http://wiki.postgresql.org/wiki/Audit_trigger)[触发器功能](http://www.postgresql.org/docs/9.1/static/triggers.html)更好地处理。

## 一些重要的注意事项：

**您需要更新 PostgreSQL**：PostgreSQL 8.2 已经过时且[不受支持](http://www.postgresql.org/support/versioning/)。不再发布安全和错误修复。紧急升级到受支持的版本，但请务必阅读每个主要“.0”版本（如“8.3.0”、“8.4.0”等）的[发行说明，以获取迁移和兼容性建议。](http://www.postgresql.org/docs/current/static/release.html)

**避免`'now'`**：此外，`'now'`您通常不应使用 [当前日期/时间函数](http://www.postgresql.org/docs/9.1/static/functions-datetime.html#FUNCTIONS-DATETIME-CURRENT)，尤其是`current_timestamp`.

**`current_timestamp`是稳定**的：您正在做的跳圈可能是不必要的，因为`current_timestamp`(and `'now'::timestamp`) 的值在事务期间不会改变。例如：

```
regress=# BEGIN;
regress=# SELECT current_timestamp;
 2012-08-14 14:52:43.382596+08
regress=# SELECT pg_sleep(5);
regress=# SELECT current_timestamp;
 2012-08-14 14:52:43.382596+08 
```

## 细节

您的意图似乎类似于以下（*不正确，请勿使用*）代码：

```
CREATE OR REPLACE FUNCTION some_function(logtxt text) RETURNS timestamptz AS $$
DECLARE
        curtime char;
BEGIN
        curtime := 'now';
        INSERT INTO logtable VALUES (logtxt, curtime);
        RETURN curtime;
END;
$$ LANGUAGE 'plpgsql'; 
```

但是您误用了`char`需要长度参数的数据类型。如果未提供，则默认为 1，因此您将获得：

```
regress=# SELECT some_function();
ERROR:  value too long for type character(1)
CONTEXT:  PL/pgSQL function "some_function" line 5 at assignment 
```

*永远不要*`char`在 SQL 中使用数据类型；使用`varchar`或`text`。`varchar(n)`对于需要`n`最大长度的跨数据库可移植性；如果不需要可移植性，请使用`text`.

如果您更改`char`为`text`上述内容，您的代码可能会运行，但仍然没有任何意义。我强烈怀疑你真的想写：

```
CREATE OR REPLACE FUNCTION some_function(logtxt text) RETURNS timestamptz AS $$
BEGIN
        INSERT INTO logtable VALUES (logtxt, current_timestamp);
        RETURN current_timestamp;
END;
$$ LANGUAGE 'plpgsql'; 
```

...但您不知道[当前的日期/时间函数](http://www.postgresql.org/docs/9.1/static/functions-datetime.html#FUNCTIONS-DATETIME-CURRENT)。

即使这样也太过分了，真的。我认为您正在尝试解决更适合触发器的问题。

# jquery - 如果有错误输入框消失

> ID：11946739
> 
> 赞同：0
> 
> 时间：2012-08-14T06:16:55.673
> 
> 标签：jquery, html, codeigniter

如果选择“是”，我有以下 jQuery 代码显示输入框。我的问题是，当我遇到错误时，下拉框的状态会被记住是/否，但如果选择是，它不会显示输入框，为什么？

**jQuery：**

```
$("#add_fields_placeholder").change(function()
        {
            if($(this).val() == "yes")
        {
            $('label[for="add_fields_placeholderValue"]').show();
            $("#add_fields_placeholderValue").show();
        }
        else
        {

            $('label[for="add_fields_placeholderValue"]').hide();
            $("#add_fields_placeholderValue").hide();
        }
            }); 
```

**看法：**

```
<label for="add_fields_placeholder">Placeholder: </label>
<select name="add_fields_placeholder" id="add_fields_placeholder">
    <option value="">Please Select</option>
    <option value="yes" <?php echo set_select('add_fields_placeholder','yes', ( !empty($placeholderType) && $placeholderType == "yes" ? TRUE : FALSE ));?>>Yes</option>
    <option value="no" <?php echo set_select('add_fields_placeholder','no', ( !empty($placeholderType) && $placeholderType == "no" ? TRUE : FALSE ));?>>No</option>
</select>

<label for="add_fields_placeholderValue">Placeholder Text: </label>
<input type="text" name="add_fields_placeholderValue" id="add_fields_placeholderValue" value="<?php echo set_value('add_fields_placeholderValue'); ?>"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:20:12.730

如果发生错误，更改事件将不会触发。尝试同时处理 onchange 和页面加载事件以使其正确。

# asp.net - 在asp.net mvc项目中使用msdeploy创建部署包时出现奇怪的PackageTmp

> ID：11946741
> 
> 赞同：1
> 
> 时间：2012-08-14T06:17:18.433
> 
> 标签：asp.net, asp.net-mvc-3, msdeploy

我的asp.net（使用mvc）项目的路径如下：

```
D:\testAppMvc\testAppMvc.sln 
```

我`msdeploy`从[这里](http://www.iis.net/download/WebDeploy)安装（没有进行任何设置）。

在 Visual Studio 2010 中，右键单击 project-> `Build Deployment package`。到现在还可以。

如果我打开 ZIP 包，我会看到我的项目所需的 IIS 文件的奇怪路径。

`\Content\D_C\testAppMvc\obj\Debug\Package\PackageTmp\`

有什么方法可以更改部署源文件的路径还是不可更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:39:03.173

我认为您需要在项目文件中进行设置：

```
<!-- Must be after Microsoft.WebApplication.targets import -->
<PropertyGroup>
  <_PackageTempDir>C:\Package</_PackageTempDir>
</PropertyGroup> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T01:59:04.697

请注意， Visual Studio 2010 中的“右键单击项目-> ”在 Visual Studio 2013 中`Build Deployment package`已变为“右键单击项目-> ”。`Publish...`

[如何：使用](http://msdn.microsoft.com/en-us/library/dd465323(v=vs.110).aspx)MSDN 上的 Web 部署包部署 Web 应用程序项目提供了有关在 VS 2013 中发布部署包的详细信息。

为了在 VS 2013 中发布部署包，我创建了一个名为 Local Package 的自定义发布配置文件，然后选择了*Web Deploy Package*发布方法 - 截图如下：

![VS 2013 网络发布 - 简介](../Images/41e2391350b2322da5f9b89eb7418c76.png)

![VS 2013 网络发布 - 连接](../Images/68d356a8611e2b949c5542ae84eb8cf9.png)

# java - 在视图显示或更改后执行一些代码

> ID：11946747
> 
> 赞同：0
> 
> 时间：2012-08-14T06:17:48.900
> 
> 标签：java, jsf, session-scope, view-scope

我有一个菜单，其中包含指向不同视图的项目。

每个视图都有一个带有附加侦听器的选择组合框。

在该视图中，我使用会话范围的托管 bean。

当我第一次导航到视图时，会在构造 bean 时调用一个方法。当用户从选择框中更改值时，将调用相同的方法。但是重新显示视图时不会调用该方法。

发生这种情况是因为我使用了会话范围的 bean。更好的解决方案是改用视图范围的 bean，但我正在寻找替代方案。有没有办法在视图更改时执行某些代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:34:10.393

您可以使用`<f:event>`其中将侦听器方法附加到`preRenderView`事件。

例如

```
<f:event type="preRenderView" listener="#{bean.preRenderView}" /> 
```

和

```
public void preRenderView() {
    // ...
} 
```

每次在渲染响应阶段开始时都会调用它。

# iphone - 如何在精灵运行动作和动画时更改或替换动画

> ID：11946754
> 
> 赞同：0
> 
> 时间：2012-08-14T06:18:46.437
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我正在使用 Cocos2D 和 SneakyInput 操纵杆制作格斗游戏。我有一个角色和这个角色的一些动画。（walkAnim、attackAnim、jumpAnim...等）

我想做这样的事情：当我按下 jumpButton 时，角色将运行 ccjumpby 和 jumpAnim。

在角色跳跃时，我按下attackButton 让角色运行attackAnim，而角色仍在运行ccjumpby。

没有attackbutton，角色仍然运行jumpAnim 和ccjumpby。

我想做的只是像“街头霸王”一样。

在 character.m 中，我有：

```
- (void) jumpButtonPress {
    id action = nil;
    id movementAction = nil;
    CGPoint newPosition;
    newPosition = ccp(screenSize.width * 0.2f, 0.0f);
    if ([self flipX] == YES) {
        newPosition = ccp(newPosition.x * -1.0f, 0.0f);
    } 
    movementAction = [CCJumpBy actionWithDuration:1.5f 
                                       position:newPosition 
                                         height:160.0f 
                                          jumps:1];
    action = [CCSequence actions:
                      [CCAnimate 
                       actionWithAnimation:crouchingAnim 
                       restoreOriginalFrame:NO],
                      [CCSpawn actions:
                       [CCAnimate 
                        actionWithAnimation:jumpingAnim 
                        restoreOriginalFrame:YES],
                       movementAction,
                       nil],
                      [CCAnimate 
                       actionWithAnimation:afterJumpingAnim 
                       restoreOriginalFrame:NO],
                      nil];
    [self runAction:action];
}

- (void) attackButtonPressed {
    action = [CCAnimate 
                          actionWithAnimation:rightPunchAnim 
                          restoreOriginalFrame:NO];
    [self runAction:action];
} 
```

这是行不通的。

# shortest-path - DAG（有向无环图）中的所有最短路径

> ID：11946755
> 
> 赞同：1
> 
> 时间：2012-08-14T06:18:53.877
> 
> 标签：shortest-path, directed-acyclic-graphs, floyd-warshall

我有一个加权 DAG，带有一些负边权重，并且想在其中找到**所有**最短路径。有没有比 O(n^2) 复杂度更好的算法。（我的图是完整的，即对于 {1..n} 中的任何 i,j 和 i < j 都有一条边 (i,j)。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:32:51.103

好吧，一种流行的寻路算法是 A*。但是您可以查看这篇文章以获取更多信息：

[转到文章](http://en.wikipedia.org/wiki/Shortest_path_problem)

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:43:47.180

您正在寻找的算法是[Floyd-Warshall](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)，它在 O(n ³ ) 中运行。

有时你可以通过在每个节点上运行 Djikstra 来做得更好。使用[斐波那契堆](http://en.wikipedia.org/wiki/Fibonacci_heap)，您可以获得 O(n ² log n + ne)，其中 e = 边数。[甚至可以](http://en.wikipedia.org/wiki/Johnson%27s_algorithm)让它与负边权重一起使用！

然而，斐波那契堆有很大的常数，所以在实践中，这种方法只会对非常稀疏的图更快。既然您说您的图表是完整的，那么 Floyd-Warshall 是您最好的选择。

# google-earth - 谷歌地球之旅错误

> ID：11946757
> 
> 赞同：0
> 
> 时间：2012-08-14T06:18:54.800
> 
> 标签：google-earth

过去，我成功地创建了几个带有音频和动画的 Google 地球导览。据我所知，两周前我看过我的一次旅行？一切正常。

但是我现在在我的本地机器和我的主机网络服务器上查看旅游，谷歌地球旅游已经消失了。当我在 firebug 中查看代码应该在哪里时，我看到以下错误：

无法处理小工具[http://code.google.com/apis/kml/embed/tourgadget.xml](http://code.google.com/apis/kml/embed/tourgadget.xml)。原因：无法检索... code.google.com/apis/kml/embed/tourgadget.xml 的规范。HTTP 错误 404

我没有改变我的代码中的任何东西，所以我完全不知所措。

谁能分享可能发生的事情或我需要做些什么才能让我的 GE 再次运行？我的网站是 www.kavelookout.com...请参阅 www.kavelookout.com/fingers.html 了解游览的地点。

更新：

我相信这是我需要的 GE 旅游小工具代码...

[http://www.gmodules.com/ig/creator?synd=open&url=http://code.google.com/apis/kml/embed/tourgadget.xml](http://www.gmodules.com/ig/creator?synd=open&url=http://code.google.com/apis/kml/embed/tourgadget.xml)

但如您所见，单击“更多信息...”链接会将我带到... google.com/ig/directory?synd=open&url=http://...

有谁知道为什么 GE Gadgets 现在不工作？或者我应该使用什么链接来嵌入 GE Tours？谁能确认 GE Tours 有问题，还是我？

非常感谢，

ķ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:28:12.930

您应该注意到您尝试处理的页面不再可用，因此，这就是错误的性质。

检查链接，它说找不到该页面，这就是您收到 404 错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:29:04.657

所以我想通了。

过去生成的嵌入代码是...
script src="http://www.gmodules.com/ig/ifr?url=http://code.google.com/apis/kml/embed/tourgadget .xml

我不知道为什么或什么时候改变了，但我发现这个 URL 上的 GE Tour 小工具... [http://www.gmodules.com/ig/creator?synd=open&url=http://dl.google .com/developers/maps/tourgadget.xml](http://www.gmodules.com/ig/creator?synd=open&url=http://dl.google.com/developers/maps/tourgadget.xml)

...现在生成这个新的嵌入代码...注意差异...
script src="//www.gmodules.com/ig/ifr?url=http://dl.google.com/developers/maps/ tourgadget.xml

同样，我很想知道为什么事情会发生变化，但很高兴知道有答案。

# ios - 为什么不能调用委托的方法

> ID：11946760
> 
> 赞同：0
> 
> 时间：2012-08-14T06:19:09.470
> 
> 标签：ios, delegates, uistoryboard

## 文件：PeopleLinkEditViewController.h

```
@protocol  PeopleLinkEditViewControllerDelegate<NSObject>
@optional
-(void)headerInfoEditFinish;

@end
@interface PeopleLinkEditViewController : UITableViewController
{
    id<PeopleLinkEditViewControllerDelegate> delegate;
}

@property (nonatomic, retain) id<PeopleLinkEditViewControllerDelegate> delegate;
-(IBAction)doneEdit:(id)sender;

@end 
```

* * *

文件：PeopleLinkEditViewController.m

* * *

```
@implementation PeopleLinkEditViewController
...
@synthesize delegate = _delegate;
...
- (void)viewDidLoad
{
...
headerView = [[PeopleLinkHeaderView alloc] initWithFrame:CGRectMake(0, 0, 320, 286)
                                                    passData:headerDic];
...
}
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    if(section == 0)
    {
        return headerView;
    }

    return nil;
}
-(IBAction)doneEdit:(id)sender
{      
    if ([delegate respondsToSelector:@selector(headerInfoEditFinish)])
    {
        NSLog(@"%d", __LINE__);
        [delegate headerInfoEditFinish];
    }
}
@end 
```

* * *

## 文件：PeopleLinkHeaderView.h

```
#import "PeopleLinkEditViewController.h"

@interface PeopleLinkHeaderView : UIView<PeopleLinkEditViewControllerDelegate>
{

}
@end 
```

* * *

## 文件：PeopleLinkHeaderView.m

```
@interface PeopleLinkHeaderView()

@property (nonatomic, retain) PeopleLinkEditViewController *edit;

@end

@implementation PeopleLinkHeaderView

- (id)initWithFrame:(CGRect)frame passData:(NSDictionary *)data
{
    UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"MainStoryboard"
                                                  bundle:nil];
    PeopleLinkEditViewController *edit = [sb instantiateViewControllerWithIdentifier:@"PeopleLinkEditController"];
    edit.editDelegate = self;
}

-(void)headerInfoEditFinish
{
    [baseInfo setValue:baseInfoValue forKey:@"value"];
    [dataPass writeHeaderValueToPlist:baseInfo];
} 
```

* * *

无法调用委托的方法。当我调试它时，我发现在editcontroller中委托是零。和 editcontroller 由情节提要创建。Headerview 是编辑控制器的子视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T06:33:06.847

问题是您向其发送操作的实例与您为其声明委托的实例不同。

我可以通过看这个来判断

```
edit = [[PeopleLinkEditViewController alloc] init];
edit.delegate = self; 
```

这是一个新创建的实例，您不会以任何方式显示或呈现它。也许这是在故事板上制作的不同视图控制器的形式？如果它是您在情节提要中指定的，您应该检索那个并分配它的委托。

使用它来检索正确的实例

```
#import ViewController.h 
```

然后在要设置委托的地方。

```
ViewController *tmp = [[self storyboard] instantiateViewControllerWithIdentifier:@"ViewControllerIdentifier"];
tmp.delegate = self; 
```

不要忘记更改以包含类的标题并更改为正确的标签。

从这里检索：

[https://stackoverflow.com/a/11931714/1068522](https://stackoverflow.com/a/11931714/1068522)

# python - Countletters(排序)

> ID：11946764
> 
> 赞同：3
> 
> 时间：2012-08-14T06:19:21.677
> 
> 标签：python, string, count

以下是我的计数字母编码，我需要输出为

```
[('e', 1), ('g', 2), ('l', 1), ('o', 2)] 
```

我的输出是

```
[('e', 1), ('g', 2), ('g', 2), ('l', 1), ('o', 2), ('o', 2)] 
```

这是我的代码

```
def countLetters(word):
    word=list(word)
    word.sort()
    trans=[]
    for j in word:
        row=[]
        a=word.count(j)
        row.append(j)
        row.append(a)
        trans.append(tuple(row))
    return trans 
```

谁能解释我，如何用我的代码获得预期的输出？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T06:26:41.117

为什么不只使用 a [`Counter`](http://docs.python.org/library/collections.html#collections.Counter)？

**例子：**

```
from collections import Counter

c = Counter("Foobar")
print sorted(c.items()) 
```

**输出：**

> [('F', 1), ('a', 1), ('b', 1), ('o', 2), ('r', 1)]

* * *

另一种方法是使用 a`dict`或更好的 a [`defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)（在运行 python 2.6 或更低版本时，因为`Counter`是在 Python 2.7 中添加的）

**例子：**

```
from collections import defaultdict

def countLetters(word):
    d = defaultdict(lambda: 0)
    for j in word:
        d[j] += 1
    return sorted(d.items())

print countLetters("Foobar") 
```

**输出：**

> [('F', 1), ('a', 1), ('b', 1), ('o', 2), ('r', 1)]

* * *

或者使用简单的列表推导

```
word = "Foobar"
print sorted((letter, word.count(letter)) for letter in set(word)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T06:25:49.490

```
>>> from collections import Counter
>>> Counter('google')
Counter({'o': 2, 'g': 2, 'e': 1, 'l': 1})
>>> from operator import itemgetter
>>> sorted(Counter('google').items(), key=itemgetter(0))
[('e', 1), ('g', 2), ('l', 1), ('o', 2)]
>>> 
```

实际上，没有必要`key`：

```
>>> sorted(Counter('google').items())
[('e', 1), ('g', 2), ('l', 1), ('o', 2)] 
```

由于元组首先按第一项排序，然后按第二项排序，依此类推。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-02T17:36:42.760

```
def countLetters(word):
    k=[]
    Listing=[]
    Cororo=[]
    for warm in word:
        if warm not in k:
            k.append(warm) 
    for cold in range(len(k)):
        word.count(k[cold])
        Listing.append(word.count(k[cold]))
        Cororo.append((k[cold],Listing[cold]))
    return sorted(Cororo) 
```

这是一种老式的做法，因为您可以像我上面的人一样使用计数器模块，让生活更轻松。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T06:26:15.200

您可以像这样修改代码（Python 2.5+）：

```
def countLetters(word):
    word=list(word)
    word.sort()
    trans=[]
    for j in word:
        row=[]
        a=word.count(j)
        row.append(j)
        row.append(a)
        trans.append(tuple(row))
    ans = list(set(trans))
    ans.sort()
    return ans 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T06:27:58.367

问题是您没有考虑`j`循环中重复出现的字母

我认为快速解决方法是将迭代修改为`for j in set(word)`.

这确保了每个字母都被迭代一次。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-14T06:26:22.217

`trans = list(set(trans))`

将 a 转换`list`为 a`set`会删除重复项（我认为这是您想要做的）。

# sql-server-2008-r2 - 如何修改此查询以显示每个活动事件中的座位数？

> ID：11946769
> 
> 赞同：0
> 
> 时间：2012-08-14T06:19:28.557
> 
> 标签：sql-server-2008-r2

我有以下数据库设计：

```
Users Table: NetworkID, Name, BadgeNo, DepartmentCode
Events Table: ID, Title, Description, Location, StartDateTime, EndDateTime, NumberOfSeats, IsActive
BookingDetails Table: BookingID, EventID, NetworkID 
```

我需要提出一个查询，显示每个事件中的座位数、预订数和剩余（或可用）座位数。我写了一个查询，显示座位数和预订数。现在，我需要找到等于（座位数 - 预订数）的剩余（或可用）座位数。**那么你能帮我修改它以找到这个要求吗？**

我的查询：

```
SELECT     dbo.Events.Title, dbo.Events.Description, dbo.Events.Location, dbo.Events.NumberOfSeats, COUNT(DISTINCT dbo.BookingDetails.NetworkID) 
                      AS [Number of Bookings]
FROM         dbo.BookingDetails INNER JOIN
                      dbo.Users ON dbo.BookingDetails.NetworkID = dbo.Users.NetworkID RIGHT OUTER JOIN
                      dbo.Events ON dbo.BookingDetails.EventID = dbo.Events.ID
WHERE     (dbo.Events.IsActive = 1)
GROUP BY dbo.Events.Title, dbo.Events.Description, dbo.Events.Location, dbo.Events.NumberOfSeats 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:28:40.990

```
SELECT     dbo.Events.Title, dbo.Events.Description, dbo.Events.Location,
           dbo.Events.NumberOfSeats, COUNT(DISTINCT dbo.BookingDetails.NetworkID) AS [Number of Bookings],
           dbo.Events.NumberOfSeats - COUNT(DISTINCT dbo.BookingDetails.NetworkID) AS RemainingSeats
FROM         dbo.BookingDetails INNER JOIN
                      dbo.Users ON dbo.BookingDetails.NetworkID = dbo.Users.NetworkID RIGHT OUTER JOIN
                      dbo.Events ON dbo.BookingDetails.EventID = dbo.Events.ID
WHERE     (dbo.Events.IsActive = 1)
GROUP BY dbo.Events.Title, dbo.Events.Description, dbo.Events.Location, dbo.Events.NumberOfSeats 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:31:22.620

```
SELECT result.t, result.d, result.l, result.c, result.r, result.c-result.r
 FROM (SELECT     dbo.Events.Title t, dbo.Events.Description d, dbo.Events.Location l, dbo.Events.NumberOfSeats c, COUNT(DISTINCT dbo.BookingDetails.NetworkID) r                       AS [Number of Bookings] FROM         dbo.BookingDetails INNER JOIN                       dbo.Users ON dbo.BookingDetails.NetworkID = dbo.Users.NetworkID RIGHT OUTER JOIN                       dbo.Events ON dbo.BookingDetails.EventID = dbo.Events.ID WHERE     (dbo.Events.IsActive = 1) GROUP BY dbo.Events.Title, dbo.Events.Description, dbo.Events.Location, dbo.Events.NumberOfSeats) result 
```

试试这个查询。

# blackberry - BlackBerry 通过 GPS 或 Cell Tower 刷新位置

> ID：11946774
> 
> 赞同：4
> 
> 时间：2012-08-14T06:19:59.557
> 
> 标签：blackberry, java-me, gps, location, gps-time

我正在尝试通过单击按钮来刷新当前位置。该位置可以通过 GPS 或手机信号塔获取，无论哪个可用。我的问题是我从来没有看到“加载屏幕”。我知道当坐标保持为零时，它会立即出现/关闭。有人可以帮助我 - 我在下面做错了什么？

位置不会更新，加载屏幕也不会出现。在没有加载屏幕的情况下，通过多次单击“刷新按钮”，我确实得到了位置。下面是我处理点击“刷新按钮”的代码：

```
FieldChangeListener refreshImgListener = new FieldChangeListener() {   
    public void fieldChanged(Field field, int context) 
    {
        Thread backgroundWorker = new Thread(new Runnable() {
            public void run() {
                refreshCoordinates();
            }
        });
        busyDialog.setEscapeEnabled(false);  
        busyDialog.show();
        backgroundWorker.start();
    }
}; 
```

我的`refreshCoordinates()`方法如下：

```
public void refreshCoordinates() {
    do
    {
        getLatitude(handleeGPS.latitude);
        getLongitude(handleeGPS.longitude);
    } while ((longi == "0.0" || lati == "0.0") || (longi.length() == 0 || lati.length()==0));

    UiApplication.getUiApplication().invokeLater( new Runnable()
    {
        public void run ()
        {
            lblLatitude.setText(lati);
            lblLongitude.setText(longi);
            busyDialog.cancel();
        }
    } );
}

public static String getLatitude(double value) 
{
    lati= Double.toString(value);
    return lati;
}
public static String getLongitude(double value) 
{
    longi= Double.toString(value);
    return longi;
} 
```

返回纬度和经度值的类：

```
public class handleeGPS{

    static GPSThread gpsThread;
    public static double latitude;
    public static double longitude;

    public handleeGPS(){
        gpsThread = new GPSThread();
        gpsThread.start();
    }

    private static class GPSThread extends Thread{
        public void run() {
            Criteria myCriteria = new Criteria();
            myCriteria.setCostAllowed(false);
            int m_bbHandle = CodeModuleManager.getModuleHandle("net_rim_bb_lbs");
            if(m_bbHandle>0){
                try {
                    int cellID = GPRSInfo.getCellInfo().getCellId();
                    int lac = GPRSInfo.getCellInfo().getLAC();
                    String urlString2 = "http://www.google.com/glm/mmap";
                    // Open a connection to Google Maps API
                    ConnectionFactory connFact = new ConnectionFactory();
                    ConnectionDescriptor connDesc;
                    connDesc = connFact.getConnection(urlString2);
                    HttpConnection httpConn2;
                    httpConn2 = (HttpConnection)connDesc.getConnection();
                    httpConn2.setRequestMethod("POST");
                    // Write some custom data to Google Maps API
                    OutputStream outputStream2 = httpConn2.openOutputStream();//getOutputStream();
                    WriteDataGoogleMaps(outputStream2, cellID, lac);
                    // Get the response
                    InputStream inputStream2 = httpConn2.openInputStream();//getInputStream();
                    DataInputStream dataInputStream2 = new DataInputStream(inputStream2);
                    // Interpret the response obtained
                    dataInputStream2.readShort();
                    dataInputStream2.readByte();
                    int code = dataInputStream2.readInt();
                    //Dialog.alert(code+"");
                    if (code == 0) {
                        latitude= dataInputStream2.readInt() / 1000000D;
                        longitude=dataInputStream2.readInt() / 1000000D;
                        //Dialog.alert(latitude+"-----"+longitude);
                        dataInputStream2.readInt();
                        dataInputStream2.readInt();
                        dataInputStream2.readUTF();
                    } else {
                        System.out.println("Error obtaining Cell Id ");
                    }
                    outputStream2.close();
                    inputStream2.close();
                } catch (Exception e) {
                    System.out.println("Error: " + e.getMessage());
                }
            } else {
                try {
                    LocationProvider myLocationProvider = LocationProvider.getInstance(myCriteria);
                    try {
                        Location myLocation = myLocationProvider.getLocation(300);
                        latitude  = myLocation.getQualifiedCoordinates().getLatitude();
                        longitude = myLocation.getQualifiedCoordinates().getLongitude();
                        if(latitude==0.0 && longitude==0.0){
                            try {
                                int cellID = GPRSInfo.getCellInfo().getCellId();
                                int lac = GPRSInfo.getCellInfo().getLAC();
                                String urlString2 = "http://www.google.com/glm/mmap";
                                // Open a connection to Google Maps API
                                ConnectionFactory connFact = new ConnectionFactory();
                                ConnectionDescriptor connDesc;
                                connDesc = connFact.getConnection(urlString2);
                                HttpConnection httpConn2;
                                httpConn2 = (HttpConnection)connDesc.getConnection();
                                httpConn2.setRequestMethod("POST");
                                // Write some custom data to Google Maps API
                                OutputStream outputStream2 = httpConn2.openOutputStream();
                                //getOutputStream();
                                WriteDataGoogleMaps(outputStream2, cellID, lac);
                                // Get the response
                                InputStream inputStream2 = httpConn2.openInputStream();
                                //getInputStream();
                                DataInputStream dataInputStream2 = new DataInputStream(inputStream2);
                                // Interpret the response obtained
                                dataInputStream2.readShort();
                                dataInputStream2.readByte();
                                int code = dataInputStream2.readInt();
                                //Dialog.alert(code+"");
                                if (code == 0) {
                                    latitude= dataInputStream2.readInt() / 1000000D;
                                    longitude=dataInputStream2.readInt() / 1000000D;
                                    //Dialog.alert(latitude+"-----"+longitude);
                                    dataInputStream2.readInt();
                                    dataInputStream2.readInt();
                                    dataInputStream2.readUTF();
                                } else {
                                    System.out.println("Error obtaining Cell Id ");
                                }
                                outputStream2.close();
                                inputStream2.close();
                            } catch (Exception e) {
                                System.out.println("Error: " + e.getMessage());
                            }
                        }
                    }
                    catch ( InterruptedException iex ) {
                        return;
                    }
                    catch ( LocationException lex ) {
                        return;
                    }
                } catch ( LocationException lex ) {
                    return;
                }
            }
            return;
        }
    }

    private static void WriteDataGoogleMaps(OutputStream out, int cellID, int lac)
    throws IOException {
        DataOutputStream dataOutputStream = new DataOutputStream(out);
        dataOutputStream.writeShort(21);
        dataOutputStream.writeLong(0);
        dataOutputStream.writeUTF("en");
        dataOutputStream.writeUTF("Android");
        dataOutputStream.writeUTF("1.0");
        dataOutputStream.writeUTF("Web");
        dataOutputStream.writeByte(27);
        dataOutputStream.writeInt(0);
        dataOutputStream.writeInt(0);
        dataOutputStream.writeInt(3);
        dataOutputStream.writeUTF("");
        dataOutputStream.writeInt(cellID);
        dataOutputStream.writeInt(lac);
        dataOutputStream.writeInt(0);
        dataOutputStream.writeInt(0);
        dataOutputStream.writeInt(0);
        dataOutputStream.writeInt(0);
        dataOutputStream.flush();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T03:02:20.903

好的，虽然我的原始答案是有效的，但您发布的**新**代码存在一些不同的问题，所以我发布了第二个答案。有很多看起来不正确的东西，我只是重写了你的`handleeGPS`课程。我将一一解释我所做的主要更改：

1.  尝试使用[Java 命名约定](http://java.about.com/od/javasyntax/a/nameconventions.htm)。这使我们更容易为您提供帮助。在您将代码发布到您的`handleeGPS`类之前，我认为它是一个变量，因为小写名称通常用于变量，而不是类。

2.  避免重复代码。该`handleeGPS`课程有很多代码要通读，但大部分是从 Google 的网络服务获取位置的代码，您在两个地方重复了这些代码。只需创建一个只包含该代码的方法，然后调用它两次。

3.  我将您的`handleeGPS`课程重命名为`GPSHandler`. 我不确定这是否`handlee`是一个错误，或者这是否是您使用的另一种语言中的一个词。无论如何，名称至少应该以大写字母开头。

4.  避免大量的`static`变量和方法。有时，真的应该只有其中之一。GPS 处理类可能是一个很好的例子，因为该设备只有一个 GPS 系统。但是，要强制执行此代码结构，请不要将所有内容标记为`static`. 只需[将类设为 Singleton 即可](http://www.javabeginner.com/learn-java/java-singleton-design-pattern)，这仅涉及创建一个`static`成员变量 ( `_instance`) 和一个静态方法 ( `getInstance()`)。在我的代码中，您将像这样访问该类：`GPSHandler gps = GPSHandler.getInstance();`.

5.  我相信您对是否安装了 BB 地图的检查实际上是倒退的。您查看了该`net_rim_bb_lbs`模块，如果它大于零（这意味着安装了 BB 地图），那么您就直接访问了 Google 网络服务。我认为您希望反过来（如果安装了 BB 地图，请尝试设备 GPS）。此外，从 6.0 开始，您还需要检查`net_rim_bb_maps`.

6.  在您发布更新之前，我认为您的`getLatitude()`和`getLongitude()`方法实际上是在获取设备位置。这对我来说是一个糟糕的假设。他们只是将数字转换为字符串。因此，没有理由在后台（使用`Thread`）完成此操作。您已经编写`handleeGPS`了使用后台线程的类，这很好。一个后台线程就足够了。使用位置信息的 UI 也不需要背景`Thread`。我更改了代码以添加`GPSListener`接口。该接口应该由您的 UI 代码实现，以接收位置更新。没有理由继续循环，询问位置是否不等于 {0.0, 0.0}。那是低效的。使用我的代码，您只会在位置发生变化时收到通知。

7.  原始代码不是线程安全的。`handleeGPS` `latitude`和`longitude`变量在后台线程上设置，并在 UI 线程上访问。那不安全。两个线程不应该同时读取和写入同一条数据。通过更改将位置数据推送到 的代码`GPSListener`，可以避免此问题。

8.  我取消了`Dialog.alert()`您在`handleeGPS`课堂上的代码的注释，这对您不起作用，因为您不允许从后台进行 UI 调用。我包围了这些电话，`UiApplication.getUiApplication().invokeLater()`以确保它们安全。

要使用此类，请在您的 UI 代码中的某处执行此操作，而不是使用 a`Thread`来运行您的`refreshCoordinates()`方法：

```
public void fieldChanged(Field field, int context) 
    // this is called when your location refresh button is clicked
    GPSHandler.getInstance().setListener(this); 
    GPSHandler.getInstance().requestLocationUpdates();
    busyDialog.setEscapeEnabled(false);  
    busyDialog.show();
} 
```

...

```
public void onLocationReceived(Coordinates location) {
    lblLatitude.setText(Double.toString(location.getLatitude()));               
    lblLongitude.setText(Double.toString(location.getLongitude()));               
    busyDialog.cancel();               
} 
```

确保您放置该代码（上面）的类也是`implements GPSListener`一个接口，在此处定义：

```
public interface GPSListener {
    public void onLocationReceived(Coordinates location);
} 
```

最后是`GPSHandler`：

```
public class GPSHandler { 

   private GPSThread _gpsThread;
   private Coordinates _location;
   private boolean _gotLocation;
   private GPSListener _listener;

   /** this class will be a Singleton, as the device only has one GPS system */
   private static GPSHandler _instance;

   /** @return the Singleton instance of the GPSHandler */
   public static GPSHandler getInstance() {
      if (_instance == null) {
         _instance = new GPSHandler();
      }
      return _instance;
   }

   /** not publicly accessible ... use getInstance() */
   private GPSHandler() { 
   }

   /** call this to trigger a new location fix */
   public void requestLocationUpdates() {
       if (_gpsThread == null || !_gpsThread.isAlive()) {
          _gpsThread = new GPSThread();
          _gpsThread.start(); 
       }
   }

   public void setListener(GPSListener listener) {
      // only supports one listener this way
      _listener = listener;   
   }

   private void setLocation(final Coordinates value) {
      _location = value;
      if (value.getLatitude() != 0.0 || value.getLongitude() != 0.0) {
         _gotLocation = true;
         if (_listener != null) {
            // this assumes listeners are UI listeners, and want callbacks on the UI thread:
            UiApplication.getUiApplication().invokeLater(new Runnable() {
               public void run() {
                  _listener.onLocationReceived(value);
               }
            });
         }
      }
   }

   private class GPSThread extends Thread {

      private void getLocationFromGoogle() {
         try { 
            int cellID = GPRSInfo.getCellInfo().getCellId(); 
            int lac = GPRSInfo.getCellInfo().getLAC(); 

            String urlString2 = "http://www.google.com/glm/mmap"; 

            // Open a connection to Google Maps API  
            ConnectionFactory connFact = new ConnectionFactory(); 
            ConnectionDescriptor connDesc; 
            connDesc = connFact.getConnection(urlString2); 

            HttpConnection httpConn2; 
            httpConn2 = (HttpConnection)connDesc.getConnection(); 
            httpConn2.setRequestMethod("POST"); 

            // Write some custom data to Google Maps API  
            OutputStream outputStream2 = httpConn2.openOutputStream();//getOutputStream(); 
            writeDataGoogleMaps(outputStream2, cellID, lac); 

            // Get the response   
            InputStream inputStream2 = httpConn2.openInputStream();//getInputStream(); 
            DataInputStream dataInputStream2 = new DataInputStream(inputStream2); 

            // Interpret the response obtained  
            dataInputStream2.readShort(); 
            dataInputStream2.readByte(); 

            final int code = dataInputStream2.readInt(); 
            UiApplication.getUiApplication().invokeLater(new Runnable() {
               public void run() {
                  Dialog.alert(code + "");   
               }
            });                        

            if (code == 0) { 
               final double latitude = dataInputStream2.readInt() / 1000000D; 
               final double longitude = dataInputStream2.readInt() / 1000000D; 
               setLocation(new Coordinates(latitude, longitude, 0.0f));

               UiApplication.getUiApplication().invokeLater(new Runnable() {
                  public void run() {
                     Dialog.alert(latitude+"-----"+longitude);   
                  }
               });

               dataInputStream2.readInt(); 
               dataInputStream2.readInt(); 
               dataInputStream2.readUTF(); 
            } else { 
               System.out.println("Error obtaining Cell Id "); 
            } 
            outputStream2.close(); 
            inputStream2.close(); 
         } catch (Exception e) { 
            System.out.println("Error: " + e.getMessage()); 
         } 
      }

      private void tryGetLocationFromDevice() {
         _gotLocation = false;
         try {
            Criteria myCriteria = new Criteria(); 
            myCriteria.setCostAllowed(false); 
            LocationProvider myLocationProvider = LocationProvider.getInstance(myCriteria); 

            try { 
               Location myLocation = myLocationProvider.getLocation(300); 
               setLocation(myLocation.getQualifiedCoordinates()); 
            } catch ( InterruptedException iex ) { 
               System.out.println(iex.getMessage());
            } catch ( LocationException lex ) { 
               System.out.println(lex.getMessage());
            } 
         } catch ( LocationException lex ) { 
            System.out.println(lex.getMessage());
         }

         if (!_gotLocation) { 
            getLocationFromGoogle();
         } 
      }

      public void run() { 
         int bbMapsHandle = CodeModuleManager.getModuleHandle("net_rim_bb_lbs");    // OS < 6.0
         int bbMapsHandle60 = CodeModuleManager.getModuleHandle("net_rim_bb_maps"); // OS 6.0+
         if (bbMapsHandle > 0 || bbMapsHandle60 > 0) { 
            tryGetLocationFromDevice();
         } else {
            getLocationFromGoogle();
         }
      } 
   } 

   private void writeDataGoogleMaps(OutputStream out, int cellID, int lac) throws IOException { 
      DataOutputStream dataOutputStream = new DataOutputStream(out); 
      dataOutputStream.writeShort(21); 
      dataOutputStream.writeLong(0); 
      dataOutputStream.writeUTF("en"); 
      dataOutputStream.writeUTF("Android"); 
      dataOutputStream.writeUTF("1.0"); 
      dataOutputStream.writeUTF("Web"); 
      dataOutputStream.writeByte(27); 
      dataOutputStream.writeInt(0); 
      dataOutputStream.writeInt(0); 
      dataOutputStream.writeInt(3); 
      dataOutputStream.writeUTF(""); 

      dataOutputStream.writeInt(cellID); 
      dataOutputStream.writeInt(lac); 

      dataOutputStream.writeInt(0); 
      dataOutputStream.writeInt(0); 
      dataOutputStream.writeInt(0); 
      dataOutputStream.writeInt(0); 
      dataOutputStream.flush(); 
   } 

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T07:38:40.727

有很多我们看不到的代码（例如`getLatitude()`, `getLongitude()`, `refreshDetails()`）。所以，那里可能会出现问题。另外，我在您发布的代码中没有看到任何**加载屏幕**，所以我不能说为什么没有显示。

但是，这里有一些看起来不正确的东西：

```
 synchronized (Application.getEventLock())
        {
            busyDialog.show();
        } 
```

[如果您阅读此 BlackBerry 论坛问题](http://supportforums.blackberry.com/t5/Java-Development/synchronized-Application-getEventLock-freezing-my-app-on-new/td-p/1196403)，您会发现尝试**从主 (UI) 线程**同步应用程序事件锁定可能会导致您的应用程序冻结。该`public void fieldChanged(Field field, int context)`方法总是在 UI 线程上调用，因为它是 UI 线程监视按钮的点击，并回调您的点击处理程序，例如`fieldChanged()`.

您还可以阅读[Application 的 BlackBerry API 文档](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/system/Application.html#getEventLock%28%29)，该文档说明这`getEventLock()`是针对*工作*线程（也称为*background*）线程，而不是主（又名*UI*）线程。

因此，无需在已在 UI 线程上运行的代码中使用特殊技术来获取事件锁。而不是上面的代码，只需这样做：

```
 busyDialog.show(); 
```

这两种技术：

```
 synchronized (Application.getEventLock())
        {
            busyDialog.show();
        } 
```

或者

```
 UiApplication.getUiApplication().invokeLater(new Runnable() {
            public void run() {
               busyDialog.show();  
            }
        }); 
```

是从**后台线程****安全**调用 UI 方法的方法。但是，您不应该在您知道已经在 UI 线程上运行的代码中使用这些代码。

 **尝试修复它，看看您的问题是否消失。

**编辑：**此外，您的代码正在刷新位置之前检查用户名和密码。这真的是你想要的吗？我认为这与您的问题没有任何关系，但通常情况下，我不希望需要用户名或密码才能访问位置服务。当然，我不知道你的申请，所以这只是我的评论。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T12:12:55.313

我认为你很简单的答案是这里的错误：

```
((longi == "0.0" || lati == "0.0") || (longi.length() == 0 || lati.length()==0)); 
```

您必须使用`String.equals()`而不是`==`运算符。

在第一次调用`longi`并`lati`具有`"0.0"`价值之后。但是`==`会返回`false`，因为它默认比较引用并且它们是不同的，因为它是不同的对象。**

# mysql - “nil:NilClass 的未定义方法‘接受’”

> ID：11946775
> 
> 赞同：2
> 
> 时间：2012-08-14T06:20:01.037
> 
> 标签：mysql, windows, ruby-on-rails-3

运行 db:migrate 时出现“nil:NilClass 的未定义方法 `accept'”错误。我的配置是：

```
Rails 3.2.8
MySql 5.1.54
OS : win7
ruby : 1.9.2 
```

我的宝石列表命令输出：

```
F:\RailsApp\MyApp>gem list

*** LOCAL GEMS ***

actionmailer (3.2.8)
actionpack (3.2.8)
activemodel (3.2.8, 3.1.0)
activerecord (3.2.8)
activeresource (3.2.8)
activesupport (3.2.8, 3.1.0)
arel (3.0.2)
bcrypt-ruby (3.0.1 x86-mingw32)
builder (3.0.0)
bundler (1.1.5)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.3.3)
erubis (2.7.0)
execjs (1.4.0)
hike (1.2.1)
i18n (0.6.0)
journey (1.0.4)
jquery-rails (2.0.2)
json (1.7.4)
mail (2.4.4)
mime-types (1.19)
minitest (1.6.0)
multi_json (1.3.6)
mysql (2.8.1 x86-mingw32)
mysql2 (0.3.11 x86-mingw32, 0.2.6 x86-mingw32)
polyglot (0.3.3)
rack (1.4.1, 1.3.6)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.8)
railties (3.2.8)
rake (0.9.2.2, 0.8.7)
rdoc (3.12, 2.5.8)
sass (3.2.0)
sass-rails (3.2.5)
sprockets (2.1.3)
thor (0.15.4)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33)
uglifier (1.2.7) 
```

我还将 %MYSQLPATH%/bin/libmySQL.dll 文件复制到 %RUBYHOME%/bin 文件夹。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:04:53.053

最后，我参考了[mysql2 gem 为错误的 mysql 客户端库编译的](https://stackoverflow.com/questions/8740868/mysql2-gem-compiled-for-wrong-mysql-client-library)这篇文章解决了这个问题。

我所做的如下：

1.  [从http://dev.mysql.com/get/Downloads/Connector-C/mysql-connector-c-noinstall-6.0.2-win32.zip/from/pick](http://dev.mysql.com/get/Downloads/Connector-C/mysql-connector-c-noinstall-6.0.2-win32.zip/from/pick)下载并解压包

2.  删除所有 mysql/mysql2 gem 并使用以下命令重新安装 mysql gem： `gem install mysql --platform=ruby -- --with-mysql-dir=E:/mysql-connector-c-noinstall-6.0.2-win32`

3.  添加`gem 'mysql'`GemFile

4.  修改database.yml`adapter:mysql`

5.  将 MYSQLHOME/bin/libmsql.dll 复制到 RUBYHOME/bin

6.  如果发现 dsl 错误，则`require 'rake/dsl_definition'`在 RakeFile 顶部添加

它有效.. :-)

我最终的 GemFile 是：

```
source 'https://rubygems.org'
gem 'rails', '3.2.3'
gem 'mysql'
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T15:17:02.340

我通过更正 database.yml 文件解决了同样的问题。它的采用者为 mysql2 现在我已将其更正为 mysql

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T07:26:45.937

这可能是 AR-JDBC 问题。尝试运行

```
bundle update activerecord-jdbc-adapter 
```

这可能会帮助你..

如果它不适合您，请尝试

```
bundle update mysql2 
```

有关更多信息，请查看[GitHub 问题](https://github.com/rails/rails/issues/4632)

# javascript - 给定一个带有位置“loc”搜索的链接，使用 Google Maps API 从标记中提取纬度和经度

> ID：11946778
> 
> 赞同：0
> 
> 时间：2012-08-14T06:20:09.960
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

假设我有一个指向[带有位置标记的地图](https://maps.google.com/?q=loc%3a%202526%20Mathews%20Street%20Berkeley%20CA%20US)的链接，我如何使用 JavaScript 和 Google API 从该地图标记中找到纬度和经度？

诀窍是我不知道地址。有没有办法优雅地找出页面上的地址是什么，而不必在 HTML 上使用正则表达式？

具体来说，我想从给定的标记中提取地址和纬度/经度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:28:49.220

这很容易'。谷歌地图 api 有一个地理定位对象，这与谷歌地图使用的相同。所以你应该使用这样的东西：

```
var geocodeLocation = 'String of the adress you''re looking for';

  var geocoder = new google.maps.ClientGeocoder();
  geocoder.getLatLng(geocodeLocation, function(point) {
    if (point) {
      //Do something with point - //You have point.x and point.y
    }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:42:28.313

您可以直接使用地理编码网络服务并以[**JSON**](http://maps.googleapis.com/maps/api/geocode/json?sensor=false&address=2526%20Mathews%20Street,Berkeley,CA,US)或[**XML 格式获取响应，而不是使用 Google Maps API**](http://maps.googleapis.com/maps/api/geocode/xml?sensor=false&address=2526%20Mathews%20Street,Berkeley,CA,US)

[**文档在这里**](https://developers.google.com/maps/documentation/geocoding/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:15:32.383

在给定 URL 的情况下查找地址的问题实际上比我想象的要容易得多。就我而言，我收到的 Google Maps URL 的格式如下：

[https://maps.google.com/?q=loc:+ADDRESS+CITY+STATE+COUNTRY](https://maps.google.com/?q=loc:+ADDRESS+CITY+STATE+COUNTRY)

所以，我直接从 URL 中快速获取地址。
我不知道这是否是谷歌地图 URLS 的默认设置。如果没有，那么事情会更加困难。

[从这里开始，它是地理编码器的简单使用， Google Maps API 页面](https://developers.google.com/maps/documentation/javascript/examples/)上有很多示例。

# grid - struts2 jquery网格中的jsonmap

> ID：11946782
> 
> 赞同：0
> 
> 时间：2012-08-14T06:20:34.547
> 
> 标签：grid, struts2-jquery

struts2 jquery gridcolumn标签中的“jsonmap”属性是什么？

请告诉我有关 jsonmap 的信息。

是用来动态开发网格的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:05:59.367

Jsonmap 为传入的 json 字符串中的列定义 json 映射，可以在此处找到更多信息：[http ://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data)

# c# - 在C#中反序列化JSON字符串而不使用反射

> ID：11946796
> 
> 赞同：6
> 
> 时间：2012-08-14T06:22:08.837
> 
> 标签：c#, json, serialization

我正在研究 Sharepoint 中的沙盒解决方案，因此重要的限制（关于这个问题）是使用 .net 3.5 并且不允许反射。

* * *

***例 1***

如果我尝试将 JSON 字符串反序列化为像这样的简单类，它可以正常工作：

**JSON字符串**

```
{"field":"Picture1","url":"whatever"} 
```

**C#类**

```
public class PictureSetting
{
    public string field { get; set; }
    public string url { get; set; }
} 
```

* * *

***例 2***

但是如果我尝试反序列化一个更复杂的字符串，我会得到一个错误：

**JSON字符串**

```
{
  "Rows": [
    {
      "Columns": [
        {
          "Width": "100"
        }
      ]
    }    
  ]
} 
```

**C# 类**

```
internal class PageStructure
{
    public List<StructureElement> Rows { get; set; }
    public PageStructure()
    {
        Rows = new List<StructureElement>();
    }
}

internal class StructureElement
{
    public List<BlockAssigment> Columns { get; set; }
    public StructureElement()
    {
        Columns = new List<BlockAssigment>();
    }
}

internal class BlockAssigment
{
    public string Width { get; set; }
} 
```

**错误**

请求“System.Security.Permissions.ReflectionPermission、mscorlib、Version=2.0.0.0、Culture=neutral、PublicKeyToken=b77a5c561934e089”类型的权限失败。

* * *

***反序列化**

我用于反序列化两个示例的代码只是标准的.net：

```
var serializer = new JavaScriptSerializer();
var obj = serializer.Deserialize<PageStructure>("jsonstring"); 
```

* * *

因此，对于第一个示例，.net 似乎**没有**使用反射，因为它有效。所以问题是：

**有没有一种方法可以反序列化第二个示例而无需.net 在内部使用反射？**

修改 JSON 字符串和 C# 类都没有问题，我只需要以某种方式保留结构（行包括列的基础对象）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T06:37:37.277

我怀疑最大的问题实际上在这里：

```
public class PictureSetting // public, works 
```

相对

```
internal class PageStructure // non-public, permission denied 
```

在我看来，沙盒正在阻止*非公共类型/成员的*反射。这将与大多数沙箱一致，例如 Silverlight：您可以使用反射，但仅限于可以正常执行的操作 - 即访问公共类型/成员。尝试制作`PageStructure`，`StructureElement`并`BlockAssigment`进入`public`课堂。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T06:55:35.963

您可以使用此服务[http://json2csharp.com/](http://json2csharp.com/)生成正确的 C# 类来解析 json。

# android - 按下选项菜单时关闭弹出窗口

> ID：11946797
> 
> 赞同：1
> 
> 时间：2012-08-14T06:22:13.537
> 
> 标签：android, popup, android-menu

当我按下硬件菜单键时，我实现了一个弹出窗口。现在，当我再次按下菜单键时，我想关闭弹出窗口。

我试过这个

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    if (keyCode == KeyEvent.KEYCODE_MENU) {
        if (pw.isShowing()) {
            pw.dismiss();
        } else {
            openpopup();
        }
        return true;
    }

    return super.onKeyDown(keyCode, event);
} 
```

这是打开弹出方法

```
public void openpop() {
    View view1 = getCurrentFocus();
    showpopup(view1);
} 
```

这是 showpopup 方法

```
public void showpopup(View view) {

    pw.setTouchable(true);
    pw.setFocusable(true);
    pw.setTouchInterceptor(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_OUTSIDE) {
                pw.dismiss();

                return true;
            }

            return false;
        }
    });

    try {
        pw.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);
        pw.setHeight(WindowManager.LayoutParams.WRAP_CONTENT);
        pw.setOutsideTouchable(false);
        pw.setContentView(popupView);
        pw.showAsDropDown(view, 0, 0);
        popUpShowed = true;
    } catch (Exception e) {
        Log.e("SAMPLE", "Exception", e);
    }

} 
```

但是当我按下菜单时弹出窗口并没有消失。

可能是什么问题呢？我需要以某种方式完成这项工作。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:10:39.080

尝试这个：

```
@Override 
public boolean onKeyDown(int keyCode, KeyEvent event) { 

if (keyCode == KeyEvent.KEYCODE_MENU) { 
    if (pw.isShowing()) { 
        closePW(); 
    } else { 
        openpopup(); // <- I think you do this already here
    } 
    return true; 
} 

return super.onKeyDown(keyCode, event); 
} 
}

// Put this function in the class which open the popup
// like your function openpopup()
public void closePW(){
   pw.dismiss();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:17:48.117

显然，第二次按菜单键不会触发。[在这里](https://stackoverflow.com/questions/9037043/detecting-menu-button-being-pressed-a-second-time)
找到了解决方案。 希望能帮助到你。

**编辑：**
检查并创建了另一种方法。这应该这样做：

```
boolean open = false;
boolean itemSelected = false;

@Override
public boolean onMenuOpened(int featureId, Menu menu) {

    if(!open || itemSelected) {
        showPopup();
        open = true;
        itemSelected = false;
    }
    return false;
}

@Override
public void onPanelClosed(int featureId, Menu menu) {
    if (open && !itemSelected) {
        closePopup();
        open = false;
    }
}
@Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {
    itemSelected = true;
    return false;
} 
```

在 Android 4.0.3 上为我工作。显然`onPrepareOptionsMenu`在 v3 之后改变了功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T07:00:24.823

你为什么不这样做？

```
private boolean popUpShowed = false;

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    if (keyCode == KeyEvent.KEYCODE_MENU) {
        if (popUpShowed) {
            pw.dismiss();
            popUpShowed = false;
        } else if(!popUpShowed){
            openpopup();
            popUpShowed = true;
        }
        return true;
    }

    return super.onKeyDown(keyCode, event);
} 
```

并删除弹出窗口中的 keyListener。

# php - php curl 来自服务器的空回复

> ID：11946802
> 
> 赞同：0
> 
> 时间：2012-08-14T06:22:46.033
> 
> 标签：php, curl, reply

我有 php curl 的问题。我正在使用这个脚本

```
curl_setopt($ch, CURLOPT_HEADER, true); // header will be at output
curl_setopt($ch, CURLOPT_NOBODY, false);
$content = curl_exec ($ch);
$info = curl_getinfo($ch);

if ($content === false || $info['http_code'] != 200) {
$output = "No cURL data returned for $url [". $info['http_code']. "]";
if (curl_error($ch))
$output .= "\n". curl_error($ch);
print $output;
}
else {
print $content;
}
curl_close ($ch);
?> 
```

我正在尝试连接到这个网站：kaztorka.org，但给了我“来自服务器的空回复”错误。但是它适用于控制台 CURL。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:47:34.143

您是否检查过 php 中是否启用了 curl 扩展？

如果没有，请编辑您的`php.ini`并**取消注释** `;extension=php_curl.dll`，即删除尾随分号。

# android - ListView 按字母顺序排列？

> ID：11946808
> 
> 赞同：0
> 
> 时间：2012-08-14T06:23:05.450
> 
> 标签：android, android-listview

我的列表视图如何自动按字母顺序显示数据。因为在我的模拟器中，它显示的数据是按照它在我的数据库中的排列方式排列的。

谁能解释这个问题？

这就是我从数据库中检索数据的方式。

```
 SQLiteDatabase db = openOrCreateDatabase("database", MODE_PRIVATE, null);
          Cursor c = db.rawQuery("SELECT DISTINCT category,cimage from FoodList", null);
          int count = c.getCount();
          String[] values = new String[count];
          String[] values1 = new String[count];
          c.moveToFirst();
          for(int x = 0; x < count; x++){
             values[x] = c.getString(c.getColumnIndex("category"));
             values1[x] = c.getString(c.getColumnIndex("cimage"));
             c.moveToNext();
          } 

           list.setAdapter(new imageadapter(this,values,values1));
           db.close();
           c.close(); 
```

这是我的图像适配器活动

```
public class imageadapter extends BaseAdapter {
    private Context context;
    private final String[] mobileValues;
    public final String[] mobileValues2;

    public imageadapter(Context context, String[] mobileValues, String[] mobileValues1) {
        this.context = context;
        this.mobileValues = mobileValues;
        this.mobileValues2 = mobileValues1;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        viewHolder holder = new viewHolder();
        if (convertView == null) {

            convertView = inflater.inflate(R.layout.logo, null);
            holder.category = (TextView) convertView.findViewById(R.id.cat);
            holder.image = (ImageView) convertView.findViewById(R.id.imglogo);
             convertView.setTag(holder);

        } else {
            holder = (viewHolder) convertView.getTag();
        }

        holder.category.setText(mobileValues[position]);
        holder.s = mobileValues2[position];
        byte[] decodedString = null;
        try {
            decodedString = Base64.decode(holder.s, 0);

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
          Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length);
          holder.image.setImageBitmap(decodedByte);

        return convertView;
    }

    public int getCount() {
        return mobileValues.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    static class viewHolder{
        ImageView image;
        TextView category;
        String s;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:32:57.050

您是否使用任何查询从数据库中获取信息？如果是这样，为什么不使用这样的 SQL 语句：

```
SELECT * FROM your_table ORDER BY your_column 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:25:10.870

通过按照您感兴趣的顺序排列从数据库中获取数据，然后添加到 arrayadapter。这可能会解决您的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T06:57:47.787

```
public Cursor fetchAllData() {
        return database.query(urtablename, null, null, null, null, null,
                null);
    } 
```

它将使用游标返回所有数据，在您的活动中

```
 Cursor cr=dba.fetchAllData();
    cr.movetofirst();
    while(!cr.isAfterLast())
    {
    //fetch all data using column name
    //like cr.getString(cr.getColumnIndex("ur column name"));
    //it will return as per in dATABASE
    cr.movetoNext();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T06:58:08.087

根据需要创建自定义比较器。现在在 ArrayAdapter 的排序函数中使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T08:14:24.820

在构造函数中试试这个：

```
public imageadapter(Context context, String[] mobileValues, String[] mobileValues1) {
    this.context = context;
    this.mobileValues = mobileValues;
    this.mobileValues2 = mobileValues1;

Arrays.sort(mobileValues);

//Arrays.sort(mobileValues2);

} 
```

请享用。

# php - 在知道帖子已被删除之前重新加载页面？

> ID：11946814
> 
> 赞同：0
> 
> 时间：2012-08-14T06:23:55.800
> 
> 标签：php, post

我有一个包含 2 个函数的类，一个用于删除帖子，一个用于提交帖子。提交帖子的功能将重定向到我想要的任何页面，如果它是同一页面，它将与新帖子一起显示。

用于删除帖子的功能将刷新或重定向，但如果它被重定向回同一页面，则页面不会显示更新，直到页面再次刷新（第二次）。我已经查看并没有找到任何有效的方法或发生这种情况的原因。我是 php 新手，所以请放轻松！

页面是否在知道帖子已被删除之前重新加载？我能做些什么来解决这个问题？

这是我的代码：

```
class userPost{
     // For Removing Post 
function remove(){
if(($_SERVER['REQUEST_METHOD'] == "POST") && ($_POST['delete_id'])){

    if(!$_POST['delete_id'] || !$_SESSION['SESS_USER']){
            header('Location: ?id=profile');
    }
    else{
$delete = mysql_real_escape_string($_POST['delete_id']);
$remove = mysql_query("DELETE FROM Post WHERE post_id = '".$delete."' AND   post_member='" . $_SESSION['SESS_USER'] . "'");   
        if($remove){ 
            header('Location: ?id=profile');    
        }
        elseif(!$remove){ ?>
        <script>
        $('#div-id').triggerevent(function(){
  $('#div-id').html(newContent);
});
</script>
        <?php
        } // End Else
        } // End Else
        } // End If
   } // End If
} // End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:28:12.543

你需要一个`exit;`after `header`。否则 PHP 会继续处理脚本。

**顺便说一句：**不要继续以这种方式编程。这个脚本有很多问题，我不知道从哪里开始。一本以正确方式学习 PHP 的好书是 Matt Zandstra 的[PHP : Ojects, Patterns, and Practices](http://www.apress.com/9781430229254/)。

# php - 用 Smarty 解析 stdClass() 对象

> ID：11946815
> 
> 赞同：0
> 
> 时间：2012-08-14T06:23:59.820
> 
> 标签：php, object, smarty, stdclass

所以我将一个 PHP stdClass() 对象传递给 Smarty，它看起来像这样，例如：

```
stdClass Object
(
    [1] => stdClass Object
        (
            [id] => 1
            [children] => stdClass Object
                (
                    [4123] => stdClass Object
                        (
                            [id] => 4123
                            [children] => stdClass Object
                                (
                                    [221] => stdClass Object
                                        (
                                            [id] => 221
                                            [children] => stdClass Object
                                                (
                                                )
                                        ),
                                    [55] => stdClass Object
                                        (
                                            [id] => 55
                                            [children] => stdClass Object
                                                (
                                                )
                                        )
                                )
                        ),
                    [666] => stdClass Object
                        (
                             [id] => 666
                             [children] => stdClass Object
                                 (
                                 )
                        )
                )
        )
) 
```

每个对象都有一个 id 和 children，它们具有相同的结构。我怎样才能像这样递归地输出所有 id-s：`1, 4123, 221, 55, 666`使用 Smarty ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:34:43.547

递归数据处理有两种选择。首选解决方案是使用[{function}](http://www.smarty.net/docs/en/language.function.function.tpl)。类似于以下内容：

```
{function name=printId comma=false data=false}
  {if $comma}, {/if}{$object->id}
  {foreach $data.children as $object}
    {printId data=$object comma=true}
  {/foreach}
{/function}

{* invoke with: *}
{printId data=$yourObjectStructure} 
```

另一个 - Smarty2 兼容 - 选项使用 {include}：

```
{* recursive-thing.tpl *}
{if $comma}, {/if}{$object->id}
{foreach from=$data.children item="object"}
  {include file="recursive-thing.tpl" data=$object comma=true}
{/foreach}

{* invoke with: *}
{include file="recursive-thing.tpl" data=$yourObjectStructure} 
```

# jsf-2 - Primefaces TreeNode 不展开

> ID：11946822
> 
> 赞同：0
> 
> 时间：2012-08-14T06:25:03.063
> 
> 标签：jsf-2, primefaces, treetable

我是 Primefaces 的新手，我尝试使用 Primefaces 3.3.1 中的 treeTable。开始时只显示 TreeTable 的第一条记录。然后，当我单击小图像展开 TreeTable 时，什么也没有发生。在 FireBug 中，我可以看到以下结果：

```
<partial-response>
    <error>
        <error-name>class java.lang.StringIndexOutOfBoundException</error-name>
        <error-message>String index out of range: -1</error-message>
    </error>
</partial-response> 
```

如果我用 node0.setExpanded(true) 强制我的 treeTable 展开，那么 TreeTable 就会展开。然后我可以折叠它，但我不能再展开它了。在其他帖子中，写到模型和/或 bean 必须实现 Serializable。我尝试但它不起作用。

下面，我的模型（将放置在 TreeTable 的每条记录中的内容）：

```
public class MyModel{
    private String field_1;
    private String field_2;
    public MyModel(){};
    public MyModel(String field_1, String field_2){
        this.field_1 = field_1;
        this.field_2 = field_2;
    }
    //Getters and setters
} 
```

下面是创建 TreeTable 的 JSF 托管 bean：

```
@ManagedBean
@SessionScoped
public class MyManagedBean{
    public TreeNode root;
}
public MyManagedBean{
    root = new DefaultTreeNode("root",null);
    TreeNode node0 = new DefaultTreeNode(new MyModel("Field 1", "Field 2"), root);
    TreeNode sub0 = new DefaultTreeNode(new MyModel("Sub", "Sub"), node0);
    //node0.setExpanded(true);
}
public TreeNode getRoot(){
    return root;
} 
```

最后，我的 JSF 文件：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"     "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>PrimeFaces</title>
            </f:facet>
        </h:head>
        <h:body>
            <p:treeTable value="#{myManagedBean.root}" var="test">    
            <p:column>
                <f:facet name="header">
                    Field 1
                </f:facet>
                <h:outputText value="#{test.field_1}" />
            </p:column>
            <p:column>
                <f:facet name="header">
                    Field 2
                </f:facet>
                <h:outputText value="#{test.field_2}" />
            </p:column>
        </p:treeTable>
    </h:body>
</f:view> 
```

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:51:46.243

解决了。我忘记将 treeTable 包装在 h:form 标记中。它现在工作正常。

# jquery - Ajaxifying Joomla 1.5/2.5 模板

> ID：11946827
> 
> 赞同：0
> 
> 时间：2012-08-14T06:25:19.733
> 
> 标签：jquery, ajax, joomla

它是网站中使用最广泛的功能。但我从来没有发现有人在 Joomla 网站上做过。我需要的只是 ajaxify Joomla 网站。IE; 网站导航没有页面加载。我已经在 wordpress 中成功地做到了这一点。但是尝试移植代码并没有运气。像地狱一样修改代码仍然没有好消息。谁可以帮我这个事。这是我用来 ajaxify wordpress 的教程。

[http://goo.gl/97TZA](http://goo.gl/97TZA)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:41:24.097

你总是可以试试这个扩展：

[http://extensions.joomla.org/extensions/core-enhancements/performance/scripts/13293](http://extensions.joomla.org/extensions/core-enhancements/performance/scripts/13293)

我以前从未测试过它，所以不能告诉你它有多好，但从评论来看，它确实做得很好。要使这个扩展工作，您的模板必须使用 Joomla 标准编写，但是它不适用于某些组件和插件，但尽管如此，试一试，让我知道它是怎么回事。

# javascript - 加载 gif 图像未在 IE 和 chrome 中显示

> ID：11946828
> 
> 赞同：15
> 
> 时间：2012-08-14T06:25:25.870
> 
> 标签：javascript, ajax, jquery

我正在使用 JQuery ajax 调用向服务器发送同步调用，并希望显示当时的加载图像。

但加载图像在 Firefox 中可见，但在 IE 和 chrome 中不可见。当我调试时，我发现在 IE 中，当我们调用 java 脚本时，它停止显示浏览器中的更改，因为它暂停了 DOM，并且当调用完成时，它会显示所有更改。由于我在 ajax 调用中显示加载图像并在完成调用后将其删除，因此 IE 不显示任何图像。

但是当我使用警告框时，它会在 IE 中显示加载图像，因为它会停止线程，直到我们响应它。

是否有任何方法可以停止 java 脚本执行一毫秒，以便 IE 执行停止并显示加载图像。

我已经尝试过 JQuery 的 ajaxSend、ajaxComplete、ajaxStart、ajaxStop 和 java 脚本的计时器事件，但没有得到任何解决方案。

任何帮助都是宝贵的，在此先感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T09:52:27.633

在 XHR 的上下文中，*同步*意味着浏览器冻结直到请求完成。如果您想要确保在给定时间仅运行一个请求，则使用您自己的标志来指示请求正在进行中。

根据定义，请求的同步标志意味着任何其他活动都必须停止。我很惊讶它甚至可以在 Firefox 中工作，上次我尝试它不起作用，但那是很久以前的事了。所以忘记它，没有办法让它在所有浏览器中都工作。即使您使用 延迟请求`setTimeout`，充其量您也会得到一个带有非动画 gif 的冻结浏览器。当您冻结他们的浏览器时，用户不喜欢，特别是如果请求可能需要不到一秒钟的时间。

**永远不要依赖浏览器来获得安全性或与功能相关的正确功能。**如果客户端并行执行两个请求，您的应用程序可能会损坏，那么您在服务器端就有错误。没有什么可以阻止恶意用户使用普通 UI 之外的其他工具发出并行请求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T09:42:38.090

您的问题可能是您开篇文章中的“同步”部分。

异步打开连接。这会阻止浏览器锁定，它会按您的预期工作。（在您的 XmlHttpRequest / activex 对象上设置 async = true）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T06:27:13.383

尝试在 ajax jquery 调用开始时显示加载图像并在成功事件中隐藏它

或者

你也可以使用设置超时

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T11:21:42.583

我在使用 ajax 时也遇到了类似的问题，就像我在 ajax 调用期间对 UI 应用了一些样式，但这些样式并没有应用于 UI，就像你告诉过的那样，如果我们发出一些警报，它将按预期工作，直到没有单击 OK 进行警报

我猜不出它为什么会发生，但你可以使用 JQuery 来显示或隐藏正在加载.... div 希望它会工作....

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T06:38:19.287

我遇到了类似的问题，然后我使用 ASP.NET 中的更新面板对其进行了整理。如果您使用 PHP 或任何其他技术，那么您必须使用 ajax 调用。如果您进行同步呼叫，则不会显示正在加载的图像。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-21T15:09:47.370

我也遇到过类似的情况，如果你必须进行同步调用，浏览器会暂停 DOM 操作。因此，除非绝对必要，否则请继续使用异步调用。

有一种解决方法可以在开始 ajax 调用之前操作 DOM 并显示一个元素。使用 jQuery animate()，并在动画回调中完成 ajax 调用。以下代码对我有用：

```
//show the loading animation div
$('#loading').show();

//call dummy animate on element, call ajax on finish handler
$('#loading').animate({
    opacity: 1
  }, 500, function() {
        //call ajax here
        var dataString = getDataString() + p + '&al=1';
        $.ajax(
        {
            type: 'GET',
            async: false,
            url: 'uldateList.php',
            data: dataString,
            dataType: 'json',
            success: function(result){
                //Do something with result
                ...
                //hide loading animation
                $('#loading').hide();
            }
        });
  }); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-21T16:10:42.727

可以尝试在图片加载回调中执行ajax同步调用。

就像是：

```
var img = new Image();
img.src = "loading.gif";
img.onload = function() {
    /* ajax synch call */
} 
```

然后将 img 附加到 DOM。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-15T12:38:27.613

嗨尝试像这样修改ajax调用它对我有用

```
 xmlHttp.open('POST', url, true);
xmlHttp.onreadystatechange = myHandlerFunction;
xmlHttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
xmlHttp.setRequestHeader("Accept-Charset", "charset=UTF-8");
xmlHttp.send(query); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-06T16:55:11.133

我以 Sergiu Dumitriu 的信息为基础。我将我的 async 设置为 true 并添加

```
 beforeSend: function() {
    $('#Waiting').jqmShow();
  },
  complete: function() {
    $('#Waiting').jqmHide();
  } 
```

它对我有用。基本上我创建了自己的 async:false 属性。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-11-03T09:54:00.693

在您的 $.ajax 调用中，您需要添加 async: true。以下代码对我有用：

```
$.ajax({
    url: 'ajax_url',
    data: 'sending_data',
    type: 'POST',
    cache : false,
    async: true,
    beforeSend: function() {
        $('#id_of_element_where_loading_needed').html('html_of_loading_gif');
    },
    success: function(data) {
        $('#id_of_element_where_result_will_be_shown').html(data.body);           
    }
}); 
```

# html - 如何从 webdriver 将文本附加到小程序文本框？

> ID：11946833
> 
> 赞同：1
> 
> 时间：2012-08-14T06:26:17.113
> 
> 标签：html, selenium, selenium-webdriver, japplet

我的网页上有小程序文本框，selenium webdriver 无法识别。加载小程序时，我需要在该文本框中附加一个默认文本。我怎样才能做到这一点？

Applet 类在 Javascript 中编码，HTML 结构如下。

```
<tbody>
<tr>
<td>
<input type="hidden" value="FFM" name="origintype"/>
<applet height="180" width="420" name="frtext" codebase="/applets"     code="textarea_counter_applet.class"/>
</td>
</tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:16:38.160

Selenium 本身不支持小程序，您必须找到外部工具来扩展 selenium 以供小程序使用。试试[http://docs.codehaus.org/display/FEST/Selenium](http://docs.codehaus.org/display/FEST/Selenium)

# iphone - How to save pdf locally from image view

> ID：11946835
> 
> 赞同：0
> 
> 时间：2012-08-14T06:26:21.813
> 
> 标签：iphone, ipad

How to save the pdf locally

I have loaded the pdf doc into imageView. Now i need to save into locally into iPhone device.

Any one advice me how to save the pdf file from image view

@All

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:08:39.247

For saving the pdf in document directory use below code.

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *localFilePath = [documentsDirectory stringByAppendingPathComponent:@"data.pdf"];

        NSData *thedata = [NSData dataWithContentsOfURL:[NSURL URLWithString:`ADD URL OF PDF DATA`]];

        [thedata writeToFile:localFilePath atomically:YES]; 
```

For retrieving the pdf use below code.

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
            NSString *documentsDirectory = [paths objectAtIndex:0];
            NSString *localFilePath = [documentsDirectory stringByAppendingPathComponent:@"data.pdf"];
if ( [[NSFileManager defaultManager] fileExistsAtPath:localFilePath] ) {
            NSData *data = [NSData dataWithContentsOfFile:localFilePath];
        } 
```

# asp.net - 将 Silverlight 应用程序转换为 Silverlight 类库

> ID：11946838
> 
> 赞同：0
> 
> 时间：2012-08-14T06:26:34.950
> 
> 标签：asp.net, visual-studio-2010, silverlight, build-automation

在我的 Visual Studio 2010 解决方案中，我有一个 Silverlight 应用程序项目和一个托管 ASP.NET 项目。
现在，我添加了一个托管在同一个 ASP.NET 项目中的新 Silverlight 应用程序项目。我想将旧的 Silverlight 应用程序项目转换为 Silverlight 类库项目，并能够通过按需程序集下载从新的应用程序项目中使用它。
为此，我需要在每次构建 ASP.NET 项目时构建类库项目，并将生成的 DLL 复制到相应的 ClientBin 文件夹中。

所以我的问题是：

1) 如何将现有的 Silverlight 应用程序转换为 Silverlight 类库？
2) 如何在ASP.NET 项目中托管Silverlight 类库项目，即如何将DLL 文件复制到托管项目的ClientBin 文件夹中？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:37:42.143

首先卸载silverlight 应用程序。然后编辑 .csproj 文件。

寻找

```
 <SilverlightApplication>true</SilverlightApplication> 
```

并将其设置为：

```
 <SilverlightApplication>false</SilverlightApplication> 
```

保存，重新加载，仅此而已。

# php - 如何将错误的查询字符串重定向到自定义错误页面 + 404 状态

> ID：11946843
> 
> 赞同：3
> 
> 时间：2012-08-14T06:27:02.963
> 
> 标签：php, .htaccess

我想将在 URL 中使用错误查询字符串的用户重定向到自定义错误页面，同时还通过 .htaccess 指令提供 404 状态

```
ErrorDocument 404 http://www.domain.com/404.php 
```

> > 编辑：这不会给出 404 而是 302 ！！！“http://www.domain.com”会导致重定向。只是本地路径给出 404。另见[http://httpd.apache.org/docs/2.0/mod/core.html#errordocument](http://httpd.apache.org/docs/2.0/mod/core.html#errordocument)

因此，我在请求接收 index.php 中创建了一个脚本，用于确定查询字符串是否无效，如果是，则给出以下命令：

```
header("HTTP/1.0 404 Not Found"); 
```

但是这不会通过 .htaccess 指令 ErrorDocument 重定向，而只是向访问者提供 404 状态。

使用时`header("Location: 404.php")`会得到 302 状态，使用时`header("Location: 404.php", true, 404)`状态为 404 但不会转到自定义 404.php 页面。

现在我用

```
header ("Location: ", true, 404); 
echo "The URL you use doesn't lead to an existing page, etc."; 
```

但这不是最初的计划......我如何让在 URL 中使用错误查询字符串的用户重定向到自定义错误页面，同时还通过 .htaccess 指令 ErrorDocument 给出 404 状态，或者这是不可能的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T06:38:16.680

据我所知，从 PHP 显示 404 页面的唯一方法是显式重定向到它。原因是 Apache（或您正在使用的任何 Web 服务器）已经成功地找到了将客户端定向到的资源（正在执行的 PHP 脚本）。如果 PHP 脚本无法解析客户端的请求，那么它必须处理 404 标头的发送并显示页面本身。

您可以重定向

```
header ("HTTP/1.0 404 Not Found");
header ('Location: http://' . $_SERVER["SERVER_NAME"] . '/404.php'); 
```

或者您可以将 404 页面包含到想要触发 404 的 PHP 脚本中。

```
header ("HTTP/1.0 404 Not Found");
include ('/path/to/404.php'); 
```

编辑：如果您使用第一种技术（重定向）并希望将 $_GET 传递给脚本以便确定它有什么问题，您可以这样做。

```
header ("HTTP/1.0 404 Not Found");
header ('Location: http://' . $_SERVER["SERVER_NAME"] . '/404.php?' . http_build_query ($_GET)); 
```

如果您包含 404.php 文件，则 $_GET 将对其可用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:42:10.283

显示自定义 404 页面并使用标题刷新获取状态 4​​04 的替代解决方案：

```
header("refresh:0;url=/404.php",TRUE,404); 
```

但是，这不是标准行为，因为您实际上是将用户重定向到 www.domain.com/404.php，而不是在错误的 url（如 www.domain.com/index.php?q=badrequest）下显示 404 页面Apache ErrorDocument 会，虽然我不确定这对搜索引擎蜘蛛是否重要，因为原始 url 仍然返回 404 响应......

此外，对于任何对 Gordon 的回答评论中提到的 htaccess 404 重定向感到好奇的人，您可以像这样使用它：

```
RewriteRule ^(match conditions)$ - [R=404,NC,L] 
```

# java - IllegalArgumentException 锁定面

> ID：11946845
> 
> 赞同：6
> 
> 时间：2012-08-14T06:27:09.187
> 
> 标签：java, android

**设备三星 Galaxy s3。OS-4.0.4.我有一个列表视图显示列表项。然后在我让手机闲置 5-10 分钟后，当我解锁并恢复我的应用程序时，我看到了这个异常**

```
E/SurfaceTextureClient( 9044): dequeueBuffer failed (No such device)
E/ViewRootImpl( 9044): IllegalArgumentException locking surface
E/ViewRootImpl( 9044): java.lang.IllegalArgumentException
E/ViewRootImpl( 9044): at android.view.Surface.lockCanvasNative(Native Method)
E/ViewRootImpl( 9044):        at android.view.Surface.lockCanvas(Surface.java:76)
E/ViewRootImpl( 9044):        at android.view.ViewRootImpl.draw(ViewRootImpl.java:2157)
E/ViewRootImpl( 9044):        at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1846)
E/ViewRootImpl( 9044):        at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2658)
E/ViewRootImpl( 9044):        at android.os.Handler.dispatchMessage(Handler.java:99)
E/ViewRootImpl( 9044):        at android.os.Looper.loop(Looper.java:137)
E/ViewRootImpl( 9044):        at android.app.ActivityThread.main(ActivityThread.java:4514)
E/ViewRootImpl( 9044):        at java.lang.reflect.Method.invokeNative(Native Method)
E/ViewRootImpl( 9044):        at java.lang.reflect.Method.invoke(Method.java:511)
E/ViewRootImpl( 9044):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
E/ViewRootImpl( 9044):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
E/ViewRootImpl( 9044):        at dalvik.system.NativeStart.main(Native Method) 
```

# javascript - 地图 背景图片不显示

> ID：11946848
> 
> 赞同：1
> 
> 时间：2012-08-14T06:27:20.200
> 
> 标签：javascript, css

当用户将鼠标悬停在地图区域上时，我正在尝试显示地图区域的背景图像。目前我已经为每个区域指定了一个单独的 id，并且我编写了一个 javascript 函数，当该区域悬停时触发。我向这个函数传递了元素 id，通过查看控制台，我知道该函数是用正确的元素调用的，但没有显示背景！目前我只实现了产品标签中的功能。

我还尝试为该区域提供 9999 的 z-index 和固定的宽度/最小宽度和高度/最小高度。

这是网站[https://dl.dropbox.com/u/14863356/OsmosysV3/index.html](https://dl.dropbox.com/u/14863356/OsmosysV3/index.html)

注意：对于面临此问题的其他人来说，Chrome 或 safari 要求您为 map 声明 name 属性，即使它已被弃用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:34:43.210

为什么你甚至需要 javascript？在 CSS 中你不能这样做：

```
#welcome{
  height: 300px; // or whatever
  &:hover{
    background: url("welcome.jpg")
  }
} 
```

其他元素也一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:15:34.213

根据这个[可见区域标签](https://stackoverflow.com/questions/1906734/visible-area-tag/1908347#1908347)，图像地图区域没有视觉表示，因此没有 css 反映在它们上面。如果您想在地图上悬停效果，那么您可以通过[点击此链接找到一种方法](http://www.svennerberg.com/2008/09/imagemap-rollover/)

这可能不是最简洁的方法，但它确实有效。

# python - 具有多个类的 Django 模型

> ID：11946849
> 
> 赞同：0
> 
> 时间：2012-08-14T06:27:22.427
> 
> 标签：python, mysql, django

我正在编写我的第一个 Django 应用程序，并希望创建一个包含多个不同类的标头模型。

代码：

```
class Meta(models.Model):
    meta_keywords = models.CharField(max_length=500) 
    meta_description = models.CharField(max_length=500)
    page_title = models.CharField(max_length=200)
    page_id = models.CharField(max_length=100)

class Javascript(models.Model):
    page_id = models.CharField(max_length=100)
    status = models.BooleanField()

class Javascript_resources(models.Model):
    page_id = models.CharField(max_length=100)
    status = models.BooleanField() #whether or not these are live/local

class Style_sheets(models.Model):
    page_id = models.CharField(max_length = 100)
    resource_type = models.CharField(max_length = 100)
    status = models.BooleanField() 
```

我如何在模型中创建一个函数来返回一个具有正确元对象、style_sheets 对象、javascript 对象等的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:57:02.847

如果有不同的模型，您不能在任何模型中创建这样的方法，因为一个模型不知道其他模型。这是一个封装。

我认为创建对象的字典并集是很正常的，您拥有的具有相同名称（“状态”）的不同字段越多。

```
from django.http import HttpResponse
from django.template import RequestContext
...
def your_view( request ):
    t = loader.get_template( your_template )
    if 'page_id' in request.REQUEST:
        page_id = request.REQUEST[ 'page_id' ]       

        all_objs = { 'metas': Meta.objects.filter( page_id = page_id ),
                        'javascripts': Javascript.objects.filter( page_id = page_id ),
                        'javascript_resources': JavascriptResources.objects.filter( page_id = page_id ),
                        'style_sheets': StyleSheets.objects.filter( page_id = page_id ) }
        c = RequestContext( request, all_objs )
    else:
        c = RequestContext( request )

    return HttpResponse( t.render(c), content_type = 'text/html' ) 
```

然后在模板中你可以迭代它们（javascripts的一个例子）：

```
{% for javascript in javascripts %}
    {% if javascript.status %}
        ...
    {% endif %}
{% endfor %} 
```

实现的细节取决于是否存在具有自定义 page_id 的对象。可能是你应该检查存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:00:50.303

由于您的所有模型似乎都引用了一个页面，您可能应该创建一个`Page`模型并将您的替换`page_ids`为`ForeignKeys`：

```
class Page(models.Model):
    title = models.CharField()

class Meta(models.Model):
    meta_keywords = models.CharField(max_length=500) 
    meta_description = models.CharField(max_length=500)
    page_title = models.CharField(max_length=200)
    page = models.ForeignKey(Page) 
```

尽管如此，我认为将页面的所有部分都放在单独的模型中（=数据库中的表）有点过分，尽管我并不完全了解您的用例。另一种可能性是使用多重继承将这些模型组合在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:02:14.190

在 Django 中，您在 models.py 中定义数据库结构，并在 views.py 中保留大多数功能。似乎您正在尝试创建一个函数，该函数可以根据某些参数为您获取记录。为此，请在 views.py 中定义一个函数，该函数从您的表中获取相关记录并将其返回给您。

我建议您阅读此处找到的 Django 教程，尤其是第 3 页。

[https://docs.djangoproject.com/en/dev/intro/tutorial03/](https://docs.djangoproject.com/en/dev/intro/tutorial03/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T07:32:15.350

就我而言，这个问题的最佳解决方案最终看起来像这样：

出于几个原因，我喜欢将相关文件存储在数据库中。在我的设置文件中，我有一个状态设置，允许我控制整个站点的标题。我有某些文件仅是实时/本地文件，还有一些是资源文件。例如，我在本地使用较少的 css，但为实时站点编译它。当我更改此变量时，它会通过在数据库中查询正确的文件来自动更改我的标题。我还检查了文件是否存在，因为当 css/js 文件无法正确加载时调试会非常令人沮丧！它有点矫枉过正，但将用于许多网站。

```
from models import * 
```

from django.conf import settings from os import path # 也可以写成 import os.path

类资源（对象）：

```
status = True
page_id = ""

# META INFORMATION
meta_keywords = ""
meta_description = ""
page_title = ""
favicon = ""

# RESOURCES
javascript_resources = []
javascript_files = []
style_sheets = []

def __init__(self, page_id = "home"):
    self.page_id = page_id.lower()
    self.get_status()
    self.get_meta()
    self.get_javascript()
    self.get_style_sheets()

def get_status(self):
    status = settings.SITE_STATUS

    if(status != "live"):
        self.status = False
    else:
        self.status = True

def get_meta(self):
    current = Meta.objects.get(page_id = self.page_id)
    self.meta_keywords = current.meta_keywords
    self.meta_description = current.meta_description
    self.page_title = current.page_title
    self.favicon = current.favicon

# this function will set all of the proper javascript lists and validate all files!
def get_javascript(self):

    javascript_list = Javascript.objects.filter(Q(page_id = "all") | Q(page_id = self.page_id)).filter(status = self.status)
    javascript_resources_list = Javascript_resources.objects.filter(Q(page_id = "all") | Q(page_id = self.page_id)).filter(status = self.status)

    #now evaulate the javascript
    if len(javascript_list) > 0:
        for resource in javascript_list:
            file_name = resource.url

            if self.exists(file_name):
                self.javascript_files.append(file_name)

    if len(javascript_resources_list) > 0:
        for resource in javascript_resources_list:
            file_name = resource.url

            if self.exists(file_name):
                self.javascript_resources.append(file_name)

def get_style_sheets(self):

    style_sheet_list = Style_sheets.objects.filter(Q(page_id = "all") | Q(page_id = self.page_id)).filter(status = self.status)

    if len(style_sheet_list) > 0:
        for resource in style_sheet_list:
            file_name = resource.url
            file_type = resource.file_type

            if self.exists(file_name):
                style_sheet = []
                style_sheet.append(file_type)
                style_sheet.append(file_name)

                self.style_sheets.append(style_sheet)

def exists(self, file_name):

    url = settings.STATIC_URL + file_name

    status = False

    if  path.exists(url):
        status = True

    return status 
```

# sql - sql查询以选择从和到日期

> ID：11946852
> 
> 赞同：-1
> 
> 时间：2012-08-14T06:27:43.793
> 
> 标签：sql, oracle-sqldeveloper

```
select PERIOD_NAME
    from gl_periods
    where :l_date_from between start_date and end_date
    and :l_date_to between start_date and end_date 
```

此查询不起作用。我需要从这两个列之间的日期和日期中进行选择。并且应该显示这两个日期之间的所有期间名称。帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:29:51.887

试试这个：

```
select PERIOD_NAME
    from gl_periods
where :l_date_from <= end_date
    and :l_date_to >= start_date 
```

# jasper-reports - iReport 中的边距问题

> ID：11946855
> 
> 赞同：0
> 
> 时间：2012-08-14T06:28:01.580
> 
> 标签：jasper-reports, ireport

我使用*iReport创建了**PDF*报告。*PDF*输出看起来不错，但是当我单击打印时，在硬拷贝（纸）中，左侧、右侧和底部的空白区域太多。因此字体大小自动减小。

 **我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:06:18.547

您的页面宽度设置为 800，但您的列宽是 535。如果您只有一列，请将列宽增加到 760（800 - 20 右边距 - 20 左边距）。

您的页面高度设置为 2,000，这可能是底部多余空间的原因。根据需要减少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T07:09:41.967

如果您在 Eclipse IDE 中使用 Jasper Report 插件，那么

1.  只需右键单击 Jasper Report 的（设计）页面，然后选择“页面格式”选项。
2.  您将看到“页面格式”窗口。
3.  现在根据需要进行更改。**

# .net - 使用 Inno Setup 进行 Com+ 互操作注册

> ID：11946856
> 
> 赞同：1
> 
> 时间：2012-08-14T06:28:07.283
> 
> 标签：.net, inno-setup, com+, dllregistration

我使用 Inno Setup 来创建我的设置。一切正常，但我遇到了问题：如何注册 .NET DLL 以使其可被 COM+ 访问。众所周知，.NET 带来`RegSvcs.exe`了这一点，所以我检查了 Inno Setup 文档，只发现 gacinstall 用于程序集注册，但不用于 COM+ 交互。所以我在`[Run]`部分添加了这个

```
; register .Net components for com+
Filename: {win}\Microsoft.NET\Framework\v4.0.30319\RegSvcs.exe; Parameters: "{app}\bin\Common.dll"; Description: Component registration; WorkingDir: {app}\bin; StatusMsg: Component registration...; Flags: waituntilterminated 
```

但是通过测试设置，这一行就被跳过了。该 DLL 在之前的部分中被复制到目标`[Files]`并且可用。设置后，我也可以从命令行手动运行 RegSvcs.exe，而不会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:13:06.600

Inno Setup 是否按预期工作！

**我的问题是：** RegSvcs.exe 使用错误的凭据安装组件。它安全地安装了 COM+，`interactive user`但是当我从服务中调用它时，没有用户，所以我需要`SYSTEM`作为凭据。

**解决方案：** 编写一小段代码，在注册后修改安全凭证。我没有找到任何选项标志来直接告诉 regsvcs.exe 它。在这里找到了一个帖子[http://www.carlosag.net/articles/configure-com-plus](http://www.carlosag.net/articles/configure-com-plus)如何做到这一点，现在将从那里调整想法来编写一个小程序来完成这项工作。

# jquery - 对 Spring Rest Web 服务的 jQuery corss 域 ajax 请求的 Parsererror

> ID：11946857
> 
> 赞同：2
> 
> 时间：2012-08-14T06:28:11.003
> 
> 标签：jquery, spring-mvc, cross-domain, restful-url

我已经部署了一个 REST Web 服务，并且该服务返回字符串作为响应。当我发送跨域 jQuery ajax 请求时，我得到'parsererror'。

下面是弹簧控制器：

```
@RequestMapping(value="/TestService",method=RequestMethod.GET)
@ResponseBody
public String testServiceGet()
{
     return "This is GET";
} 
```

下面是 jQuery ajax() 方法：

```
$.ajax({
    url: 'http://localhost:8080/Example_REST_WS_Deploy/service/TestService',
    dataType: 'jsonp',
    crossDomain: true,
    contentType: 'text/plain',
    success : function(data, textStatus, xhr) {
       alert(data);
    },
    error : function(xhr, textStatus, errorThrown) {
       alert("Error ->" + textStatus);
    }
}); 
```

我们在 FF 浏览器错误控制台中收到的错误如下：

```
SyntexError: missing ; before statement
This is GET
-----^ 
```

请尽快提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:25:24.750

终于解决了。

我`contentType: 'text/plain'`从 ajax 方法中删除了 , 它工作正常。

# ios - 在 UIScrollView 中动画子视图大小的最佳方法是什么？

> ID：11946864
> 
> 赞同：0
> 
> 时间：2012-08-14T06:28:40.797
> 
> 标签：ios, uiscrollview

我有一个滚动视图，允许用户在不同页面之间滚动，然后点击其中一个使其展开，以便他们可以完整阅读页面，有点像在 iPhone 上更改 Safari 中的选项卡。旋转时更改每个子视图的帧大小有点痛苦，因为滚动位置会丢失，因为子视图的内容大小也必须更改。我想知道是否有更有效的方法来调整视图大小以进入“查看”模式或旋转设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:06:52.740

第一个问题的解决方案是，当您想要扩展视图时，将其从 scrollView 中拉出，然后使用适当的框架将其添加到 self.view.subviews，然后为框架设置动画以填充屏幕。完成后反向操作，缩小它，然后当它恢复到适当的大小时，将它放回滚动视图中。

如果由于某种原因这不起作用 - 滚动视图显示在您删除视图时移动的其他内容，那么不要只是从中删除您的视图，而是创建一个与您将展开的视图大小相同的简单 UIView，并且本质上用“占位符”视图替换您拉出的视图。

# xamarin.ios - 配置文件问题

> ID：11946868
> 
> 赞同：4
> 
> 时间：2012-08-14T06:28:51.563
> 
> 标签：xamarin.ios, monodevelop, xamarin

当我尝试上传我的应用程序时，我在应用程序上传器中收到此错误“应用程序代码验证失败。签名无效，包含不允许的权利，或者它没有使用 iPhone 分发证书签名。”。

如果我打开 MonoDevelop，属性并选择“iPhone 捆绑签名”，然后我会看到一个“Provisioning profile”，但如果我单击另一个主题（例如崩溃报告）并返回“Provisioning profile”，那么它会突然显示“Unknown”和一个向导。

我如何告诉 MonoDevelop 使用正确的配置文件？

我删除了一些旧的配置文件（在 Organizer 中），但它们仍然显示在 MonoDevelop 中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T08:58:59.793

不幸的是，由 Apple 签名系统创建的“供应地狱”在 MonoDevelop 中变得更糟。

没有配置管理器，无法设置和关联所有配置文件和特定单点触控应用程序的密钥。MonoDevelop 缺少自动创建或指导用户创建、下载或备份正确配置文件、密钥和 appID 的向导。

了解配置文件或密钥是否错误、过期、与 appId 不兼容或被拒绝的最佳方法是在 XCode Organizer 中手动检查所有这些（您可以在 XCode“Window”菜单中找到它）。

进入 Organizer 后，您需要点击左侧的 LIBRARY -> Provisioning Profiles 部分，然后点击 Refresh 按钮将您的配置文件与苹果服务器同步（如果您有这些配置文件或您在另一台开发计算机上）并且您必须只安装选定的配置文件，单击“导入”按钮并手动选择文件）。

然后您需要附加您的 ios 设备，当它出现在 DEVICE->your_iPhone_or_Ipad 名称中时。您需要将所需的配置文件从 LIBRARY->Provisioning Profile 拖放到 DEVICE->your_iPhone_or_Ipad_name->Provisioning Profiles ...

无论如何，很多事情都可能出错，尤其是将旧配置文件与支持 iCloud 或其他一些高级应用程序功能的新配置文件混合使用。无法知道捆绑包 ID 是否有效，是否允许授权，是否启用了配置文件或 appID 以使用 iCloud、通知、IAP 等，或者它是否已注册用于 Developer、AdHoc 或 Distribution ，以及它兼容的产品 ID 字符串。你需要经历试验和错误。即使是为受信任的远程测试人员启用的应用程序的临时版本的简单创建也是一条漫长而危险的道路。MonoDevelop 中没有用户和测试人员配置文件管理器，您需要记住每次与谁相关的内容。

如果您在不同的开发人员机器上，您还需要在本地 KeyChain 中安装注册的开发人员密钥（我建议在某处备份这些密钥：如果您丢失了这些密钥，您将无法在未来！！）。

让我们希望 Xamarin 尽快添加配置文件和密钥管理器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T17:14:21.077

@Emanuale 提到了很多，但他在很多这些方面都走了很长的路。

有一种更简单的方法可以处理所有事情。以下是干脆利落的做法：

*   登录到Web 上[的供应门户](https://developer.apple.com/devcenter/ios/index.action)
*   为您的公司创建一个 App ID 作为“com.yourcompanyname.*”
*   为这个应用 ID 创建一个供应配置文件，用于开发和分发
*   （我还建议删除您不需要的任何配置文件）
*   打开 XCode->My Organizer，然后按右下角的刷新按钮（您将看到您在线上的所有个人资料）
*   从 MonoDevelop 将您的应用程序部署到设备（确保您的捆绑包 ID 是 com.yourcompanyname.yourappname）

这是解决此问题的最简单方法。无需弄乱 MonoDevelop 中的配置文件设置，默认值应该可以工作。

唯一的问题是您是否需要支持推送通知。com.yourcompanyname.* 配置文件不起作用，在这种情况下，您必须针对每个应用程序创建一个配置文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-05T00:32:29.907

乔纳森胡椒的好答案！只是一个 2c，现在**XCode->My Oganizer**是**Preferences->Accounts**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-16T10:40:48.700

如果接受的响应没有帮助，您还应该确保您的签名身份与您正在使用的配置文件匹配，并且它具有私钥。如果您安装了多个签名证书，则可以打开这些证书，并且您将无法分辨出与 Xamarin Studio 的区别。看

[https://stackoverflow.com/a/37856762/660194](https://stackoverflow.com/a/37856762/660194)

# ubuntu - LIBADD 不会在 ubuntu 上将一个 libtool 库添加到另一个库？

> ID：11946876
> 
> 赞同：2
> 
> 时间：2012-08-14T06:29:34.527
> 
> 标签：ubuntu, autotools, automake, libtool

我有一个使用 GNU autotools 的项目，其中一部分`Makefile.am`如下所示：

```
lib_LTLIBRARIES += myproj/mysupport/libmysupport.la
myproj_mysupport_libmysupport_la_SOURCES = myproj/mysupport/some_sources.cc

lib_LTLIBRARIES += myproj/myapp/libmyapp.la
myproj_myapp_libmyapp_la_SOURCES = myproj/myapp/app_logic.cc
myproj_myapp_libmyapp_la_LIBADD = myproj/mysupport/libmysupport.la

sbin_PROGRAMS += myproj/myapp/myapp
myproj_myapp_myapp_SOURCES = myproj/myapp/main.cc
myproj_myapp_myapp_LDADD = myproj/myapp/libmyapp.la 
```

在这里，我有一个支持（libtool）库、一个应用程序库和一个二进制文件。应用程序库包含二进制文件 save 中的所有内容`main`，这是二进制文件引入的唯一来源。

在我的 Mac 上，这可以很好地编译和链接，一切都很好。然而，在 Ubuntu 上，我收到此链接错误：

```
/bin/bash ./libtool --tag=CXX   --mode=link g++ -Wall -Wextra -Werror -ansi -fprofile-arcs -ftest-coverage --coverage -g -O0 -fprofile-arcs -ftest-coverage  -L/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib -L/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib -L/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib -L/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib -L/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib  -o myproj/myapp/myapp myproj/myapp/main.o myproj/myapp/libmyapp.la -lgcov -llog4cplus  -lboost_filesystem-mt -lboost_iostreams-mt -lboost_program_options-mt -lboost_system-mt -lboost_thread-mt -lboost_system-mt -pthread 
libtool: link: g++ -Wall -Wextra -Werror -ansi -fprofile-arcs -ftest-coverage --coverage -g -O0 -fprofile-arcs -ftest-coverage -Wl,-rpath -Wl,/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib -o myproj/myapp/.libs/myapp myproj/myapp/main.o -pthread  -L/usr/local/lib myproj/myapp/.libs/libmyapp.so -lgcov /usr/lib/liblog4cplus.so -lboost_filesystem-mt -lboost_iostreams-mt -lboost_program_options-mt -lboost_thread-mt -lboost_system-mt -pthread
/usr/bin/ld: myproj/myapp/main.o: undefined reference to symbol 'myproj::mysupport::Application::main(sauce::Modules&, int, char**)'
/usr/bin/ld: note: 'myproj::mysupport::Application::main(sauce::Modules&, int, char**)' is defined in DSO /home/user/code/local-myproj/debug/myproj/mysupport/.libs/libmysupport.so.0 so try adding it to the linker command line
/home/user/code/local-myproj/debug/myproj/mysupport/.libs/libmysupport.so.0: could not read symbols: Invalid operation
collect2: ld returned 1 exit status 
```

这是在我的 Mac 上运行的等效 libtool 命令：

```
/bin/sh ./libtool --tag=CXX   --mode=link g++-4.2 -Wall -Wextra -Werror -ansi -fprofile-arcs -ftest-coverage --coverage -g -O0 -fprofile-arcs -ftest-coverage  -L/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib -L/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib -L/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib -L/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib -L/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib  -o myproj/myapp/myapp myproj/myapp/main.o myproj/myapp/libmyapp.la -lgcov -llog4cplus -L/usr/local/lib -lintl -R/usr/local/lib -Wl,-framework -Wl,CoreFoundation -lboost_filesystem-mt -lboost_iostreams-mt -lboost_program_options-mt -lboost_system-mt -lboost_thread-mt -lboost_system-mt
libtool: link: g++-4.2 -Wall -Wextra -Werror -ansi -fprofile-arcs -ftest-coverage --coverage -g -O0 -fprofile-arcs -ftest-coverage -Wl,-rpath -Wl,/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib -o myproj/myapp/.libs/myapp myproj/myapp/main.o -Wl,-framework -Wl,CoreFoundation -Wl,-bind_at_load  -L/usr/local/lib myproj/myapp/.libs/libmyapp.dylib /home/user/code/myproj/debug/myproj/mysupport/.libs/libmysupport.dylib -lgcov -llog4cplus -lintl -lboost_filesystem-mt -lboost_iostreams-mt -lboost_program_options-mt -lboost_thread-mt -lboost_system-mt 
```

一个关键的区别似乎是在第二个变体`/home/user/code/myproj/debug/myproj/mysupport/.libs/libmysupport.dylib`的`libtool:`回声中的出现。事实上，如果我在文字 ubuntu 命令中添加了等价的参数，它就会成功完成。

缺少的参数对应`LIBADD`于`Makefile.am`. 所以，问题是：我这样做对吗？如果是这样，为什么它可以在 OS X 而不是 Ubuntu 上运行？

OS X 上的一些相关版本：

```
$ autoconf --version
autoconf (GNU Autoconf) 2.69
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+/Autoconf: GNU GPL version 3 or later
<http://gnu.org/licenses/gpl.html>, <http://gnu.org/licenses/exceptions.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by David J. MacKenzie and Akim Demaille.
$ automake --version
automake (GNU automake) 1.12.2
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv2+: GNU GPL version 2 or later <http://gnu.org/licenses/gpl-2.0.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by Tom Tromey <tromey@redhat.com>
       and Alexandre Duret-Lutz <adl@gnu.org>.
$ libtool -V
Apple Inc. version cctools-822
$ g++-4.2 --version
i686-apple-darwin11-g++-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5666) (dot 3)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

现在在 Ubuntu 上：

```
$ autoconf --version
autoconf (GNU Autoconf) 2.68
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+/Autoconf: GNU GPL version 3 or later
<http://gnu.org/licenses/gpl.html>, <http://gnu.org/licenses/exceptions.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by David J. MacKenzie and Akim Demaille.
$ automake --version
automake (GNU automake) 1.11.3
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv2+: GNU GPL version 2 or later <http://gnu.org/licenses/gpl-2.0.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by Tom Tromey <tromey@redhat.com>
       and Alexandre Duret-Lutz <adl@gnu.org>.
$ libtool --version
libtool (GNU libtool) 2.4.2
Written by Gordon Matzigkeit <gord@gnu.ai.mit.edu>, 1996

Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
$ g++ --version
g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:05:47.023

你真的需要安装你的支持库吗？因为你可以尝试声明它，`noinst_LTLIBRARIES`看看它是否有效。

# css - 如何在 div 多行中制作文本？

> ID：11946877
> 
> 赞同：32
> 
> 时间：2012-08-14T06:29:35.257
> 
> 标签：css

> **可能重复：**
> [将文本包装在 div - css 中](https://stackoverflow.com/questions/5120313/wrapping-the-text-inside-div-css)

小提琴：http: [//jsfiddle.net/aTFK2/2/](http://jsfiddle.net/aTFK2/2/)

*HTML：*

```
<div id="ChannelDescription">ThisIsAVeryLongTextWithoutAnySpacesLoremIpsumDolorSitAmedLoremIpsumDolorSitAmedLoremIpsumDolorSitAmedLoremIpsumDolorSitAmedLoremIpsumDolorSitAmedLoremIpsumDolorSitAmedLoremIpsumDolorSitAmedLoremIpsumDolorSitAmedLoremIpsumDolorSitAmed</div>​ 
```

*CSS：*

```
#ChannelDescription {
  width:560px;
  color:Gray;
  white-space:normal;
  font-size:14px;
}​ 
```

注意：我无法将宽度更改为任何其他值。我也不能使用断点。我正在寻找一个纯 CSS2 解决方案。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-15T05:22:59.260

`word-wrap: break-word;`将解决问题。

# php - PHP 根据 msg_id 显示数据

> ID：11946878
> 
> 赞同：0
> 
> 时间：2012-08-14T06:29:47.377
> 
> 标签：php, mysql

**t_message**
msg_id
消息
用户名
date_post
url

**t_comment**
com_id
评论
msg_id
用户名
date_comment
url

如何根据 msg_id 显示评论？例子 ：

约翰发布消息：欢迎来到我的世界。然后简评论了他的信息：也欢迎。
格雷格也评论说：欢迎老板......

其他简发布消息：我今天很高兴。
然后格雷格评论了她的信息：哇......

应该是每次都会有不同的表现吧？

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:34:27.333

根据 msg_id 检索评论

```
SELECT c.comment,c.username from t_comment c 
left join t_message m on c.msg_id=m.msg_id 
where c.msg_id={your msg id} 
order by c.date_comment 
```

根据 msg_id 检索评论和消息

```
select * from
(select m.message,m.username,m.date_post as date_p,m.msg_id from t_message m
union
SELECT c.comment,c.username,c.date_comment as date_p,c.msg_id from t_comment c 
left join t_message m on c.msg_id=m.msg_id )t
where t.msg_id={your msg id} 
order by t.date_p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:42:53.803

你可以用这样的方式，

```
//Do your connect operations here

$sql_message = "SELECT * FROM t_message;

$result = mysql_query($sql_message);

while ($row = mysql_fetch_assoc($result)) {
    echo "\nMessage : " . $row["message"] . "\n";
    echo "-----Comments : \n"; 

    $sql_comment = "SELECT * FROM t_comments where msg_id = " . $row["msg_id"];
    $result_comments = mysql_query($sql_comment);
    while ($row_comments = mysql_fetch_assoc($result_comments)) {
        echo $row_comments["comment"] . "\n";

    }       
} 
```

# blackberry - 在 BlackBerry 中使应用程序图标无法聚焦？

> ID：11946884
> 
> 赞同：1
> 
> 时间：2012-08-14T06:30:13.197
> 
> 标签：blackberry

我已经在我正在使用的设备中安装了一个应用程序。当我在我的设备中打开下载文件夹时，我的应用图标似乎很集中。现在我的问题是，是否有可能使它无法聚焦。如图所示。如果有人对此任务有任何建议，请告诉我。![在此处输入图像描述](../Images/c66f227a3f933ce69dbded037445912e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:18:56.033

您可以通过在 BlackBerry Application Descriptor 中指定具有非透明背景的翻转图标来移除图标上的蓝色背景：

![在此处输入图像描述](../Images/17a812fc5e0f77230abf22df3bb5ff75.png)

请注意，您将无法删除图标下方突出显示的文本，因为该行为由操作系统控制，顺便说一句，这是*一件好事*，因为否则您的用户将不知道您的应用何时获得焦点。

# kml - 谷歌地球加载 KML 文件失败

> ID：11946887
> 
> 赞同：1
> 
> 时间：2012-08-14T06:30:18.427
> 
> 标签：kml, google-earth

我已经从谷歌地球导出了3D模型的KML文件（ICBC.kml），我想将3D模型加载到谷歌地球插件中，但我无法得到结果，非常感谢您的建议。

用于加载 kml 的 javascript 代码

```
// Create the placemark.
var placemark = ge.createPlacemark('');
// Get the current view`enter code here`
var myCamera = ge.getView().copyAsCamera(ge.ALTITUDE_RELATIVE_TO_GROUND);

// Set new latitude and longitude values
myCamera.setLatitude(30.55552076525944);
myCamera.setLongitude(114.3344795151639);
myCamera.setAltitude(500);

// Placemark/Model/Location
var loc = ge.createLocation('');
loc.setLatitude(myCamera.getLatitude());
loc.setLongitude(myCamera.getLongitude());

// Update the view in Google Earth
ge.getView().setAbstractView(myCamera);

var fso = new ActiveXObject("Scripting.FileSystemObject");

var f = fso.OpenTextFile("http://localhost/ICBC.kml",1,true);

var kmlobject = ge.parseKml(f.ReadAll());
ge.getFeatures().appendChild(kmlobject);
var la = ge.createLookAt('');
la.set(30.55552076525944, 114.3344795151639, 500, ge.ALTITUDE_RELATIVE_TO_GROUND, 0, 45, 900);
ge.getView().setAbstractView(la); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:39:21.957

如果你有`KML file`，你不应该使用`parseKml`，这是一个更好的做法`fetchKml`，它不需要传递 Kml 的字符串，只需要传递`URL`KML 的字符串。

在您的情况下，您应该使用此行：

```
var href = UrlOfKML;

google.earth.fetchKml(googleEarthInstance, href, function(kmlObject) {
      if (kmlObject)
         ge.getFeatures().appendChild(kmlObject);
}); 
```

如果您对两者的区别有更多疑问`fetchKml`并`parseKml`查看此链接：[导入 KML - GE 文档](https://developers.google.com/earth/documentation/kml#fetchkml_and_parsekml)

# php - 尝试准备好的语句时无法传递参数

> ID：11946890
> 
> 赞同：2
> 
> 时间：2012-08-14T06:30:31.517
> 
> 标签：php, mysql, mysqli

由于这里有很多建议，我现在正在尝试在 PHP/MYSQL 中学习准备好的语句。我不断收到此错误：

```
Fatal error: Cannot pass parameter 2 by reference in C:\xampp\htdocs\blog\admin\create.php on line 57 
```

谁能告诉我如何解决这个问题？我一直在四处寻找，但找不到任何可以帮助我解决这个问题的东西。

这是我的代码：

```
<?php

require_once '../config.php';

// Check to see if the title was entered from new.php
if ($_POST['title'])
{
$title = $_POST['title'];
} else {

echo "No title was entered. Please go back. <br />";
}

// Check to see if the body was entered from new.php
if ($_POST['body'])
{
$body = $_POST['body'];
} else {

echo "No body was entered. Please go back. <br />";
}

// Get the date
$date = time();

// ID = NULL because of auto-increment
$id = 'NULL';

// If magic_quotes_gpc returns true then it's enabled on the serever and all variables   will be
// automatically escaped with slashes. If it isn't true then it's done manually

if (!get_magic_quotes_gpc())
{
$title = addslashes($title);
$body = addslashes($body);
$date = addslashes($date);
}

// Connect to the database

$db = new mysqli('localhost','username','password','database');

// Check to see if the connection works
if ($db->connect_errno)
{
echo 'Error: Could not connect to database. Please try again.';
exit;
}

// Prepared statement for a query to place something in the database
if(!($stmt = $db->prepare("insert into pages (id, title, body, date) values (?,?,?,?)")))
{
echo "Prepare failed: (" .$db->errno . ")" . $db->error;
}

// THIS IS THE LINE WHERE I'M RECEIVING THE ERROR!!!!!!!!
if (!$stmt->bind_param('isss', ''.$id.'', ''.$title.'',''.$body.'',''.$date.''))
{
echo "Binding parameters failed: (" .$stmt->errno. ")" . $stmt->error;
}

if (!$stmt->execute())
{
echo "Execute failed: (" .$stmt->errno . ") " .$stmt->error;
}

$db->close;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:22:50.680

您应该查看相应的[mysqli_stmt::bind_param](http://de2.php.net/manual/en/mysqli-stmt.bind-param.php)文档。更准确地说，看一下函数的定义：

```
bool mysqli_stmt::bind_param ( string $types , mixed &$var1 [, mixed &$... ] ) 
```

注意到这`mixed &$var1`部分了吗？这基本上表明您的参数是通过引用而不是通过值传递的（看起来像`mixed $var1`-`&`有所作为）。

现在，您调用的问题是您试图通过引用传递**表达式**而不是变量。从[PHP 文档](http://php.net/manual/en/language.references.pass.php)：

> 以下内容可以通过引用传递：
> - 变量，即 foo($a)
> - 新语句，即 foo(new foobar())
> - 从函数返回的引用，[...]

简单的补救措施是首先使用未初始化的变量调用绑定，然后将这些变量分配给您处理过的输入数据，即

```
// Prepared statement for a query to place something in the database
$stmt = $db->prepare("insert into pages (id, title, body, date) values (?,?,?,?)");

if ( !$stmt ) {
    echo "Prepare failed: (" .$db->errno . ")" . $db->error;
}

if ( !$stmt->bind_param('isss', $stmt_id, $stmt_title, $stmt_body, $stmt_date) ) {
    echo "Binding parameters failed: (" .$stmt->errno. ")" . $stmt->error;
}

$stmt_id    = (int) $id;
$stmt_title = (string) $title;
$stmt_body  = (string) $body;
$stmt_date  = (string) $date;

if ( !$stmt->execute() ) {
    echo "Execute failed: (" .$stmt->errno . ") " .$stmt->error;
} 
```

# android - 我的主屏幕应用程序（在启动时启动）需要列出并链接到内置应用程序，如相机、时钟等。如何做到这一点？

> ID：11946893
> 
> 赞同：0
> 
> 时间：2012-08-14T06:30:34.647
> 
> 标签：android

我有一个从启动时开始的活动，其中包含 9 个图标。当用户单击这些图标时，需要启动相应的应用程序。其中一些是内置的，如相机、时钟、互联网等。这是在 Android 3.0（平板电脑）上。我应该如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:42:42.517

1.  首先列出所有可用的应用程序：

    ```
     final PackageManager pm = getPackageManager(); 
    ```

    > ```
    >  //get a list of installed apps.
    >             List<ApplicationInfo> packages = pm
    >                     .getInstalledApplications(PackageManager.GET_META_DATA);
    > 
    >             for (ApplicationInfo packageInfo : packages) {
    > 
    >                 Log.d(TAG, "Installed package :" + packageInfo.packageName);
    >                 Log.d(TAG,
    >                         "Launch Activity :"
    >                                 + pm.getLaunchIntentForPackage(packageInfo.packageName)); 
    > 
    >             }// the getLaunchIntentForPackage returns an intent that you can use with startActivity() 
    >         } 
    > ```

2.  将每个应用程序链接到可绘制（图标）和意图

3.  单击图标时启动该意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:43:46.913

我认为内置的发布不依赖于 Android 版本。
[启动相机](http://mobile.tutsplus.com/tutorials/android/android-sdk-quick-tip-launching-the-camera/)
[启动浏览器](http://mobile.tutsplus.com/tutorials/android/launch-android-browser/)
网上有很多小技巧。深入搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:07:06.823

你见过[adw-launcher-android](http://code.google.com/p/adw-launcher-android/) 吗？

该项目是开源的，它包含列出内置/已安装应用程序并在此应用程序本身内打开它们的类。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-14T06:39:10.310

我认为这可能会有所帮助

```
final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
startActivity(mainIntent); 
```

从此列表中，您可以获取所需的应用程序

# c# - 使用pinvoke将结构数组内的嵌入式C结构数组传递给c#

> ID：11946895
> 
> 赞同：2
> 
> 时间：2012-08-14T06:30:39.333
> 
> 标签：c#, c, dll, struct, pinvoke

我正在尝试使用结构数组将数据传递给我的 C# ui 和我的 C dll。更复杂的事情是该结构包含另一个结构数组。我已经想出了如何使用 pinvoke 来实现更简单的东西，但是如何声明嵌入式结构，以及如何传递它们？

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public class csForm {
    public int endDate;   
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 128)]
    public char[] formId;
}

 [DllImport("myDll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
 public static extern void fillForm([In, Out] csForm data, 5);

// c code
typedef struct s_ptxRow {
int ptxNumber;
char primitive[128];
int primitiveParams[128];
} ptxRow;

typedef struct s_workSpace{
char formId[128];
int endDate;
ptxRow PtxRow[128];
} cForm;

extern "C" __declspec(dllexport) fillForm(cForm csForm[], interface csFormCount)
{

    for (int i = 0, j = 0; i < csFormCount; ++i)
    {
        j = int / 2;
        csForm[i].endDate = i;
        strcpy(csForm[i].formId, "formId here");

        csForm[i].PtxRow[j].ptxNumber = i;
        csForm[i].PtxRow[j].primitiveParams[i] = i;
        strcpy(csForm[i].PtxRow[j].primitive, "someText");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:29:22.047

你正朝着正确的方向前进。您只需要`ptxRow`在 C# 中声明该结构，然后将其数组添加到`csForm`. 你甚至不需要事先分配任何数组——显然 P/Invoke 会为你做这件事，因为它知道它们的大小。包含整个示例代码是因为在某些声明中存在微小错误。

*注意：当我尝试在 C# 中使用类时，我得到了奇怪的结果（例如，C++ 代码中的成员和指针值不正确）导致了各种错误。切换到结构使问题消失了。我认为这与参考和价值类型有关，但希望有更多知识渊博的人提供意见。如果重要，我正在使用 .NET 3.5 进行测试。*

```
#include <string.h>

typedef struct s_ptxRow {
    int ptxNumber;
    char primitive[128];
    int primitiveParams[128];
} ptxRow;

typedef struct s_workSpace {
    char formId[128];
    int endDate;
    ptxRow PtxRow[128];
} cForm;

extern "C" __declspec(dllexport) void fillForm(cForm csForm[], int csFormCount)
{
    for (int i = 0, j = 0; i < csFormCount; ++i)
    {
        j = i / 2;
        csForm[i].endDate = i;
        strcpy(csForm[i].formId, "formId here");

        csForm[i].PtxRow[j].ptxNumber = i;
        csForm[i].PtxRow[j].primitiveParams[i] = i;
        strcpy(csForm[i].PtxRow[j].primitive, "someText");
    }
} 
```

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace PInvokeStructsCS
{
    class Program
    {
        [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
        public struct PtxRow
        {
            public int ptxNumber;
            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 128)]
            public char[] primitive;
            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 128)]
            public int[] primitiveParams;
        }

        [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
        public struct csForm
        {
            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 128)]
            public char[] formId;
            public int endDate;
            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 128)]
            public PtxRow[] ptxRow;
        }

        [DllImport("PInvokeStructsC.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
        public static extern void fillForm([In, Out]csForm[] data, int count);

        static void Main(string[] args)
        {
            csForm[] forms = new csForm[2];

            try
            {
                fillForm(forms, 2);
            }
            catch (Exception e)
            {
                Console.Out.WriteLine(e.Message);
                return;
            }
        }
    }
} 
```

# c# - 在 C# 中获取 FatalExecutionEngineError？

> ID：11946899
> 
> 赞同：0
> 
> 时间：2012-08-14T06:30:56.893
> 
> 标签：c#, exception, clr, system.data.sqlite, objectlistview

在随机位置获得以下异常。

> 运行时遇到致命错误。错误地址位于线程 0x14d8 上的 0x65c08447。错误代码为 0xc0000005。此错误可能是 CLR 中的错​​误或用户代码的不安全或不可验证部分中的错误。此错误的常见来源包括 COM 互操作或 PInvoke 的用户封送错误，这可能会损坏堆栈。

该模块昨天运行良好，但今天给出了这个例外。我刚刚将调试配置更改为 x86。昨天是AnyCPU。但是我使用的是 sqlite，当配置为 AnyCPU 时它会报告以下警告。

> 警告：- 正在构建的项目“MSIL”的处理器架构与参考“System.Data.SQLite，版本=1.0.66.0，文化=中性，PublicKeyToken=db937bc2d44ff139，处理器架构=x86”的处理器架构不匹配”、“x86”。这种不匹配可能会导致运行时失败。请考虑通过配置管理器更改项目的目标处理器体系结构，以便在项目和参考之间对齐处理器体系结构，或者依赖具有与项目的目标处理器体系结构匹配的处理器体系结构的参考。

我正在使用[如何在 C# 中获取常用文件类型图标中的非托管代码？](https://stackoverflow.com/a/616947/1273550). 我也在使用[objectlistview](http://objectlistview.sourceforge.net/cs/index.html)。除此以外的所有代码仅用于访问数据库。我的机器有 Windows 7 x64 终极版。

我的应用程序的搜索功能开始出现错误

# ffmpeg - 如何使用ffmpeg在视频上添加水印

> ID：11946900
> 
> 赞同：0
> 
> 时间：2012-08-14T06:31:07.710
> 
> 标签：ffmpeg, watermark

所以我安装了 ffmpeg 等，它似乎工作正常，但由于某种原因，我的服务器上没有 watermark.so。我在名为 gpac_extra_libs 的文件夹中有一个 watermark.c。也许我在安装过程中遗漏了一些东西，有人知道我需要做什么才能在 Centos 5.x 64 位上获取 watermark.so 吗？

# java - 如何为 RESTful 端点禁用基于 Spring 表单的登录？

> ID：11946903
> 
> 赞同：11
> 
> 时间：2012-08-14T06:31:20.423
> 
> 标签：java, spring, spring-security

我使用基本和基于表单的身份验证配置了 spring-security `auto-config='true'`。

我希望下面的端点`/api/**`不使用基于表单的安全性。外部的其他端点`/api/**`应使用基于表单的登录。我希望`401`对这些未在`/api/**`.

**更新**：感谢卢克泰勒在下面的评论，我提出了以下解决方案。

**注意**：此技术只能在 spring-security 3.1 中应用。

首先我单挑`/api/**`。我们从不创建会话，但如果可用的话，我们会使用它，这是`create-session="never"`由`<session-management/>`.

```
<http pattern="/api/**" create-session="never" use-expressions="true">
    <http-basic />
    <session-management />
    <intercept-url pattern="/api/**" access="hasRole('API_ACCESS')"/>
</http>

<http auto-config="true" use-expressions="true">
    <intercept-url pattern="/" access="permitAll"/>
    <intercept-url pattern="/**" access="isAuthenticated()"/>
</http> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-15T11:22:15.377

`<http>`使用 Spring Security 3.1，您最好的选择是使用两个单独的元素将应用程序的 restful 和 non-restful 部分拆分为单独的过滤器链。然后可以将 restful API 链配置为无状态并使用基本身份验证，而默认链可以使用普通的表单登录配置。

然后你会有类似的东西：

```
<http pattern="/api/**" create-session="stateless">
    <intercept-url pattern="/api/**" access="ROLE_API_USER" />
    <http-basic />        
</http>

<!-- No pattern attribute, so defaults to matching any request -->
<http>
    <intercept-url pattern="/**" access="ROLE_USER" />
    <form-login />        
</http> 
```

链定义必须从最具体的模式到最一般的模式排序，因此默认链排在最后。

# c# - 在填充到数据表之前将所有 excel 列格式化为常规

> ID：11946906
> 
> 赞同：4
> 
> 时间：2012-08-14T06:31:33.030
> 
> 标签：c#, asp.net, .net

是否可以在填充数据集之前将 Excel 工作表的所有列更改为常规类型？我不能在我的应用程序中使用 Interop 或任何其他 3rd 方 dll。我正在使用 OleDbDataAdapter 将数据填充到数据集。

```
string SourceConstr = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source='" + fileName + "';Extended Properties= 'Excel 12.0;HDR=NO;TypeGuessRows=0;ImportMixedTypes=General'";
OleDbConnection con = new OleDbConnection(SourceConstr);
string query = "Select * from [Sheet1$A9:FG100]";
OleDbDataAdapter data = new OleDbDataAdapter(query, con);
data.Fill(ds); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-23T10:27:32.400

一种方法是获取所有列并更改它们

```
foreach (DataColumn c in DT.Columns)
{
    iColumnCount++;
    if(iRowCount == 0)
        Worksheet.Cells[1, iColumnCount] = c.ColumnName;
    else
        Worksheet.Cells[iRowCount, iColumnCount] = c.ColumnName;

    Worksheet.Columns.AutoFit(); //Correct the width of the columns
    //THIS IS WHERE I WANT TO COLOR THE HEADERS
}

    foreach (DataRow r in DT.Rows)
    {
        iRowCount++;
        iColumnCount = 0;
        foreach (DataColumn c in DT.Columns)
        {
            iColumnCount++;
            if(iRowCount == 1)
                Worksheet.Cells[iRowCount + 1, iColumnCount] = r[c.ColumnName].ToString();
            else
                Worksheet.Cells[iRowCount, iColumnCount] = r[c.ColumnName].ToString();

            Worksheet.Columns.AutoFit(); //Correct the width of the columns
        }
    } 
```

改变颜色或蚂蚁属性

```
Worksheet.Range["A1","G1"].Interior.Color = Excel.XlRgbColor.rgbDarkBlue; 
```

Worksheet.Range["A1","G1"].name or header = Excel.XlRgbColor.rgbWhite;

# django - 如何在 Webfaction 服务器上安装 Mezzanine

> ID：11946914
> 
> 赞同：3
> 
> 时间：2012-08-14T06:32:08.990
> 
> 标签：django, webfaction, mezzanine

我一直在为我的个人网站选择一个 django CMS，我决定 Mezzanine 将是最能满足我需求的一个。但我发现我无法将它安装在 Webfaction 上。各种各样的错误都在发生，对于像我这样的菜鸟来说，这非常令人沮丧。我遵循了这个很棒的指南， http: [//ijcdigital.com/blog/installing-django-mezzanine-at-webfaction/](http://ijcdigital.com/blog/installing-django-mezzanine-at-webfaction/)，它可能是在一年前写的。不幸的是，我根本无法按照该指南使其工作。那么任何人都可以为我提供一个更新且易于遵循的在 Webfaction 上安装 Mezzanine 的指南吗？

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T22:20:25.940

要在 WebFaction 主机帐户上安装 Mezzanine，首先通过 WF 控制面板创建一个新的 PostgreSQL 数据库，并记下数据库名称和密码。

接下来，创建一个“Django 1.6.10 (mod_wsgi 3.5/Python 2.7)”应用程序并将其分配给一个网站。

接下来，通过 SSH 连接到您的服务器并运行以下命令（将`name_of_your_app`、`database_name`、`database_password`和替换`my_cms`为适当的值）：

```
mkdir -p ~/lib/python2.7
easy_install-2.7 pip
cd ~/webapps/name_of_your_app
export PYTHONPATH=$PWD/lib/python2.7
pip2.7 install -U --install-option="--install-scripts=$PWD/bin" --install-option="--install-lib=$PWD/lib/python2.7" mezzanine
~/bin/mezzanine-project my_cms
cd my_cms
sed -i 's/"ENGINE": "django.db.backends.sqlite3"/"ENGINE": "django.db.backends.postgresql_psycopg2"/g' local_settings.py
sed -i 's/"NAME": "dev.db"/"NAME": "database_name"/g' local_settings.py
sed -i 's/"USER": ""/"USER": "database_name"/g' local_settings.py
sed -i 's/"PASSWORD": ""/"PASSWORD": "database_password"/g' local_settings.py
sed -i 's/DEBUG = True/DEBUG = False/g' local_settings.py
echo "ALLOWED_HOSTS = ['yourdomain.com',]" >> local_settings.py
python2.7 manage.py createdb --noinput
python2.7 manage.py collectstatic --noinput
sed -i 's/myproject\/myproject\/wsgi.py/my_cms\/wsgi.py/g' ../apache2/conf/httpd.conf
sed -i 's/myproject/my_cms/g' ../apache2/conf/httpd.conf
../apache2/bin/restart 
```

接下来，在控制面板中创建一个“仅静态应用程序的符号链接”，使用“ `/home/your_username/webapps/name_of_your_app/my_cms/static`”作为符号链接路径（在“额外信息”字段中，然后将该应用程序分配给您的站点，使用“ `/static`”作为 URL 路径。

然后等待几分钟，让最后的变化变成凝胶，你就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:40:24.597

好的，既然还没有人回答我的问题，而且我意识到 django-cms 对我来说是一个更好的选择，我决定自己回答这个问题来结束这个问题。谢谢。

# http - HTTP 内容协商/压缩：使用 Base64 和 Accept-Encoding/Content-Encoding？

> ID：11946920
> 
> 赞同：8
> 
> 时间：2012-08-14T06:32:38.457
> 
> 标签：http, base64, content-negotiation

我想知道以下想法是否违背了[HTTP Content Negotiation](https://en.wikipedia.org/wiki/Content_negotiation)和[HTTP Compression](https://en.wikipedia.org/wiki/HTTP_compression)的精神和/或文字。

**情况**

HTTP 客户端请求资源：

```
HTTP GET /image.jpeg HTTP/1.1
Accept: image/jpeg 
```

HTTP 服务器返回此资源：

```
HTTP/1.1 200 OK
Content-Type: image/jpeg 
```

**理念**

客户认为请求资源*编码*是个好主意：

```
HTTP GET /image.jpeg HTTP/1.1
Accept: image/jpeg
Accept-Encoding: base64 
```

服务器接受此请求并返回编码的资源：

```
HTTP/1.1 200 OK
Content-Type: image/jpeg
Content-Encoding: base64 
```

**问题**

我对这个想法不太满意。`Accept-Encoding`使用和标头的HTTP 压缩`Content-Encoding`是关于*压缩*数据，而不是像 Base64 那样*增加其大小。*

使用`base64`这些标头的值是否违反了 HTTP 内容协商和 HTTP 内容压缩的精神和/或文字？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T06:37:03.947

[RFC 2616 第 3.5 节](https://www.rfc-editor.org/rfc/rfc2616#section-3.5)（强调我的）：

> 内容编码主要用于允许对文档进行压缩**或以其他方式进行有用的转换**，而不会丢失其底层媒体类型的身份，也不会丢失信息。

您的想法完全符合 HTTP 的“精神和文字”。

# php - 如何在php中包含URL？

> ID：11946922
> 
> 赞同：1
> 
> 时间：2012-08-14T06:32:46.160
> 
> 标签：php, url, dynamic, include

我想让我的索引页面显示当前的季度和年份，这样它会随着时间的推移而更新。我需要帮助重建我的代码。这里是。它就像某种公告板日历：

```
$now   = new DateTime();
    $month = (int)$now->format("m");
            $get_year = date("Y");

    if ($month >= 1 AND $month <= 3) {
       include_once("../index.php?year=".$get_year."&quarter=Q1");  
    }
    elseif ($month >= 4 AND $month <= 6) {
         include_once("../jet/index.php?year=".$get_year."&quarter=Q2");  
    }
    elseif ($month >= 7 AND $month <= 9) {
          include_once("../jet/index.php?year=".$get_year."&quarter=Q3");  
    }
    else {
         include_once("../jet/index.php?year=".$get_year."&quarter=Q4");  
    } 
```

将显示的页面已准备就绪，只是我无法显示它并导致这些错误：

警告：include_once(.../index.php?year=2012&quarter=Q3) [function.include-once]：无法打开流：结果在 D:\xampp\htdocs\jet\index.php 中的第 121 行太大

警告：include_once() [function.include]: 未能打开 '.../index.php?year=2012&quarter=Q3' 以包含在 D:\ xampp\htdocs\jet\index.php 在第 121 行

帮助任何人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T06:39:42.930

区别。

让我们回到基础，好吗？

您通过 URL 发送的内容作为“GET”在另一端接收，它需要作为 HYPERTEXT 发送到网络服务器，该服务器会将信息传递给 PHP 脚本，PHP 脚本将相应地编译它们。所以，这个逻辑是行不通的，因为在 include 中你会使用 FILE SYSTEM。

你想要做的是使用 header()

```
header("location: http://example.com/jet/index.php?year=$get_year&quarter=Q2"); 
```

代替

```
include_once("../index.php?year=".$get_year."&quarter=Q1"); 
```

[header()](http://php.net/manual/en/function.header.php)将用户重定向为 HTTP 响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:40:06.177

不要在包含字符串中传递 $_GET 变量。

准备好变量

```
$year='2012';
$quarter='Q3';
include_once('index.php'); 
```

然后运行包含字符串，就可以正常访问年份和季度了。确保检查变量的范围。

所以你的完整代码：

```
$year=$get_year;
if ($month >= 1 AND $month <= 3) {
   $quarter='Q1';
   include_once("../index.php");  
}
elseif ($month >= 4 AND $month <= 6) {
   $quarter='Q2';
   include_once("../jet/index.php");  
}
elseif ($month >= 7 AND $month <= 9) {
   $quarter='Q3';
   include_once("../jet/index.php");  
}
else {
   $quarter='Q4';
   include_once("../jet/index.php");  
} 
```

# hibernate - 想要使用 jpa 或 hibernate 自动生成用户提供的字符串前面的 Id 值

> ID：11946929
> 
> 赞同：0
> 
> 时间：2012-08-14T06:33:20.653
> 
> 标签：hibernate, jpa

我的代码是：-

```
@Id
//@SequenceGenerator(name = "non_distributor", sequenceName="nd")
@GeneratedValue

public int getNondistid()
{
    return nondistid;
}
public void setNondistid(int nondistid) 
{
    this.nondistid = nondistid;
} 
```

它以 1、2,3 的数字生成 id 值，但我希望自动生成的 Id 必须像：-“nd_01”或“nd1”。因此，请建议如何使用注释生成相同的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:38:30.593

```
@Id
@GeneratedValue(strategy=GenerationType.AUTO)
@Column(name="fooId")
private Integer id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:39:23.307

```
@Entity
public class News implements Serializable {

   @Id   
   @GeneratedValue(strategy = GenerationType.AUTO)
   private Long id;
}

TABLE SQL::
create table News (id bigint not null primary key (id)); 
```

# java - 找到除以 Pi 到 4 个小数位的最小素数？爪哇

> ID：11946943
> 
> 赞同：3
> 
> 时间：2012-08-14T06:35:13.010
> 
> 标签：java, numbers, pi

我发现了一个有趣的问题，我想我可以尝试做；我几乎立即发现了一个我似乎无法解决的问题。

当我运行我的代码时，没有错误，但它只是运行而不返回任何内容。我的循环似乎没问题，而且我知道我的查找素数的算法有效，所以我不知道出了什么问题。

经过大量编辑后，我仍然遇到同样的问题，但是当在 python 中运行几乎相同的代码时，python 代码运行并实际返回结果。这是更改后的代码：

```
public class PrimeNumtoPi {

    static double pi = Math.PI;
    static double accuracy = 0.1;
    static int range = 10000;

    //checks whether an int is prime or not.
    static boolean isPrime(int n) {
        if(n % 2 == 0) {
            return false;
        } else {
            int i = 3;
            while (i < n / 2) {
                if(n % i == 0) {
                    return false;
                }
                i += 2;
            }
        }
        return true;
    }

    public static int nearestwhole(double n) {
        double remainder = n%1;
        if(remainder >= 0.5) {
            return (int) (n - remainder + 1);
        } else {
            return (int)(n - remainder);
        }
    }

    public static boolean isClose(double n) {
        if(abs(n - pi) < accuracy) {
            return true;
        } else {
            return false;
        }
    }

    public static double abs(double n) {
        if(n < 0) {
            return n * -1;
        } else {
            return n;
        }
    }

    public static void main(String[] args) {
        int current = 3;
        while(current <= range) {
            int numerator = nearestwhole(current * pi);
            if (isPrime(numerator)) {
                if(isClose(numerator/current) == true) {
                    System.out.println(numerator + " and " + current);
                }
            }
            current += 2;
            while(isPrime(current) == false) {
                current += 2;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-11T01:14:05.390

变量 numerator 和 current 都是 int，因此将它们相除会得到一个 int，其中最接近 pi 的是 3，相差超过 0.1，这意味着 isClose 永远不会返回 true，所以你永远不会打印任何东西出去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:54:06.670

您不必比较每个可能的数字，也不需要比较任何数字。你想找到一个素数，它乘以 PI 也是一个素数。

```
public static void findSmallInt() {
    double pi = 3.1415;
    for (int i = 3; ; i += 2) {
        if (!isPrime(i)) continue;
        int num = (int) Math.round(i * pi);
        if (!isPrime(num)) continue;
        if (round4((double) num / i) == pi) {
            System.out.println(num + "/" + i + "= "+(double) num/i);
            break;
        }
    }
}

private static double round4(double v) {
    return Math.round(v * 1e4) / 1e4;
}

public static void main(String... args) {
    findSmallInt();
} 
```

印刷

```
977/311= 3.1414790996784565 
```

这可能不是您想要的，但您可以看到这更加简单和快捷。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T06:41:45.247

**在谈论双打时，您不能期望完美的准确性**，双打*不是*实数（或有理数）。

请记住，在任何（非平凡的）范围内都有无限数量的有理数，但只有有限数量的位来表示它们。

因此，**比较两个双精度数的身份 (==) 很少返回想要的结果**。

出于您的目的，一个有效的替代方法可能是使用 java 的[BigDecimal](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)类，它可以让您控制所需的精度级别。

有关更多信息，您可能需要阅读关于双精度的[维基百科页面和/或](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)[这篇文章](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

此外，似乎`b`和`j`总是一起增加，这是这里的另一个问题。蛮力解决方案将有 2 个嵌套循环，每个循环增加一个变量，而不是 1 个循环增加两个变量。

以及关于优化的评论：您可能希望使用[eratosthenes 筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)来提高查找素数的效率。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T06:52:42.513

我在您的代码中发现了一些问题：

1.  `b`并且`j`同时增加，所以在这里`if (b / j == pi)`，`b/j`始终为 1
2.  你的循环应该从 2 开始，因为 0,1 不是素数：`for (int b = 2, j = 2; notequal == true`;....)`
3.  `if ((isPrime(b)) && (isPrime(j)))`检查相同的号码`primeness`
4.  我检查了在我的机器上运行。它永远运行，因为`b`和`j`相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T07:02:13.160

1.  让 j 从 2 运行到 b（或 b/something，以获得更好的性能）。

2.  由于您的 PI 并不完美，所以我认为您期望一些宽容。2 个素数相除通常会得到实数，这很少等于您的 PI。您可以与 PI +/- 一些容差进行比较，从而为解决方案提供更好的机会。

# javascript - 如何将多个/不同的隐藏字段插入 XML？

> ID：11946950
> 
> 赞同：1
> 
> 时间：2012-08-14T06:35:52.027
> 
> 标签：javascript, xml, arrays, jsp, hidden

我需要在 XML 中插入多个隐藏字段（数据）。目前，我一次只能插入一个数据。假设我有一些“图块”（包含多个坐标）要插入到 XML 中。所以，到目前为止，我一次只能在 XML 中插入一个“平铺”（数据）。

```
<<==Javascript code==>>    

function moveIt(){ 

if (!moveEnabled||!MovableItem) return;

// display info during testing

X = MovableItem.offsetLeft;

Y = MovableItem.offsetTop;

W = MovableItem.offsetWidth;

H = MovableItem.offsetHeight;

document.getElementById('X').value = X;     
    document.getElementById('Y').value = Y;
    document.getElementById('W').value = W;
    document.getElementById('H').value = H;  

    document.form1.elements['X'].value;
    document.form1.elements['Y'].value;
    document.form1.elements['W'].value;
    document.form1.elements['H'].value;

    }

 <<==JSP codes==>>

 <form name='form1' action='UpdateXML.jsp' method='post'>

 <input type='hidden' name=source value="<%=src%>" />
 <input type='hidden' id="X" name="X" value="<%=X%>"/>
 <input type='hidden' id="Y" name="Y" value="<%=Y%>"/>
 <input type='hidden' id="W" name="W" value="<%=W%>"/>
 <input type='hidden' id="H" name="H" value="<%=H%>"/> 

 <button type="button" onclick="window.location.href='editcompany.jsp'">Back!</button>
 <button type="submit">Insert Into XML!</button>
 </form>

 <<==XML==>>

<%
try {

String X        = request.getParameter("X");
    String Y        = request.getParameter("Y");
    String W        = request.getParameter("W");
    String H        = request.getParameter("H");

    pw.println ( "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>"  );
    pw.println ( "<TemplateEditor>");
    pw.println ( "\t<Logo>");
    pw.print ( "\t\t<X_Coord>"); pw.print (X); pw.println ( "</X_Coord>");
    pw.print ( "\t\t<Y_Coord>"); pw.print (Y); pw.println ( "</Y_Coord>");
    pw.print ( "\t\t<Width>");   pw.print (W); pw.println ( "</Width>");
    pw.print ( "\t\t<Height>");  pw.print (H); pw.println ( "</Height>");
    pw.println ( "\t</Logo>");
    pw.println ( "</TemplateEditor>");

    pw.flush(); 
    pw.close();
    br.close();
    fw.close();
  } catch (Exception e) {}
%> 
```

希望有好心人能帮帮我！我真的很需要帮助。非常感谢

编辑：

函数 $(v){return document.getElementById(v)}

函数 startMove(e){

```
if (!MovableItem){return;}

canvas=isIE ? "BODY" : "HTML";

    activeItem=isIE ? event.srcElement : e.target;  

    offsetx=isIE ? event.clientX : e.clientX;

    offsety=isIE ? event.clientY : e.clientY;

    lastX=parseInt(MovableItem.style.left);

    lastY=parseInt(MovableItem.style.top);

    lastW=parseInt(MovableItem.style.width);

    lastH=parseInt(MovableItem.style.height);

if (offsetx+scrollAmt[0]>=(MovableItem.parentNode.offsetLeft+parseInt(MovableItem.style.left)+(MovableItem.offsetWidth*.98))|| offsety+scrollAmt[1]>=(MovableItem.parentNode.offsetTop+parseInt(MovableItem.style.top)+(MovableItem.offsetHeight*.98)) ){edge=true; MovableItem.style.cursor="se-resize"} else{edge=false;MovableItem.style.cursor="move"}

moveEnabled=true;

document.onmousemove=moveIt; 
```

}

这有帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:31:29.030

以下是处理 N 个 MovableItems 的一些提示和建议（代码基于您当前的逻辑。

**注意：它不遵循所有 JavaScript/JSP 最佳实践（据我所知），仅用于演示目的。**

1.您可以只使用一个隐藏输入字段来保存所有MovableItems信息（而不是创建4xN隐藏字段），因为这样更容易处理

```
<input type='hidden' id="movableItems" name="movableItems" value="<%=value%>"/> 
```

2.更新 moveIt() 函数以支持 N 个项目。（假设您有一个名为 MovableItems 的数组，其中包含所有项目的信息）

```
function moveIt() {
    if (!moveEnabled || !MovableItems || MovableItems.length === 0) return;
    var value = '';
    for (var i = 0; i < MovableItems.length; i += 1) {
        if (i > 0) {
            value += '|';
        }
        value = [value, MovableItems[i].offsetLeft, ',',
                MovableItems[i].offsetTop, ',',
                MovableItems[i].offsetWidth, ',',
                MovableItems[i].offsetHeight].join('');
    }

    //the hidden field's value would be something like 10,20,50,50|5,5,30,20|1,2,60,20
    document.getElementById('movableItems').value = value;
} 
```

* * *

在 UpdateXML.jsp 中

```
try {
    pw.println ( "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>"  );
    pw.println ( "<TemplateEditor>");

    String value = request.getParameter("movableItems");
    String[] items = value.split("\\|");
    int size = items.length;
    for (int i=0; i<size; i++) {
        String[] coords = items[i].split(",");
        pw.println ( "\t<Logo>");
        pw.print ( "\t\t<X_Coord>"); pw.print(coords[0]); pw.println ( "</X_Coord>");
        pw.print ( "\t\t<Y_Coord>"); pw.print(coords[1]); pw.println ( "</Y_Coord>");
        pw.print ( "\t\t<Width>");   pw.print(coords[2]); pw.println ( "</Width>");
        pw.print ( "\t\t<Height>");  pw.print(coords[3]); pw.println ( "</Height>");
        pw.println ( "\t</Logo>");
    }
    ...
} catch (Exception e) {} 
```

我相信还有很多其他方法可以做到这一点。我希望这会给你一些想法。

* * *

编辑：

这是创建/更新/删除 MovableItems 数组的一种可能方法：

```
var MovableItems = []; //create an empty array 
```

处理创建/更新/删除 MovableItem 的可能实现

注意：它假设您在 UI 中生成每个 MovableItem 时为其分配一个唯一的 id

```
function getItem(items, id) { //helper function for getting item from array by id
    for (var i = items.length; i >= 0; i -= 1) {
        if (items[i].id === id) {
            return i;
        }
    }
    return -1;
}

function updateMovable(MovableItem) {
    var index = getItem(MovableItems, MovableItem.id);
    if (item < 0) { //it's a new item
        MovableItems.push(MovableItem);
    } else { //it's an existing item
        MovableItems[index] = MovableItem;
    }
}

function deleteMovableItem(MovableItem) {
    var index = getItem(MovableItems, MovableItem.id);
    if (index) {
        MovableItems.splice(index, 1);
    }
} 
```

# c# - 实体框架 4.1 连接到外部数据库失败

> ID：11946956
> 
> 赞同：0
> 
> 时间：2012-08-14T06:36:26.437
> 
> 标签：c#, entity-framework, connection-string

我想连接到外部数据库。我在添加连接字符串时检查了连接，没关系。但是，当我运行该程序时，它说“我的帐户登录失败”。

有谁知道发生了什么？

谢谢！

编辑，连接字符串：

```
 connectionString="Data Source=server_of_th_db;Initial Catalog=the_DB;Integrated Security=SSPI;" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:13:39.483

可能，您不想使用`Integrated Security=SSPI;`这意味着当前的 Windows 帐户凭据用于身份验证。
您可能必须指定`User Id`并`Password`能够连接到远程服务器。喜欢：

```
connectionString="Data Source=server_of_th_db;Initial Catalog=the_DB;Uid=MY_USER_ID;Pwd=MY_PASSWORD;" 
```

您必须从该服务器的 dba 获取这些凭据。

*更新：* 另一个可能的问题是您使用了错误的 .config 文件。如果您的解决方案中有多个项目，请确保`connectionstrings`正确设置启动项目的部分。

# sql-server - SQL Server：表和/或数据库使用的 8K 页数

> ID：11946957
> 
> 赞同：16
> 
> 时间：2012-08-14T06:36:27.710
> 
> 标签：sql-server, tsql

我可以使用 T-SQL 显示一个表用于存储其行的 8K 页数吗？

另外，我可以看到数据库正在使用的 8K 页数吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-14T06:53:57.933

尝试这样的事情：

```
-- Total # of pages, used_pages, and data_pages for a given heap/clustered index
SELECT 
    t.NAME AS TableName,
    p.rows AS RowCounts,
    SUM(a.total_pages) AS TotalPages, 
    SUM(a.used_pages) AS UsedPages, 
    (SUM(a.total_pages) - SUM(a.used_pages)) AS UnusedPages
FROM 
    sys.tables t
INNER JOIN      
    sys.indexes i ON t.OBJECT_ID = i.object_id
INNER JOIN 
    sys.partitions p ON i.object_id = p.OBJECT_ID AND i.index_id = p.index_id
INNER JOIN 
    sys.allocation_units a ON p.partition_id = a.container_id
WHERE 
    t.NAME NOT LIKE 'dt%' 
    AND t.is_ms_shipped = 0
    AND i.OBJECT_ID > 255 
GROUP BY 
    t.Name, p.Rows
ORDER BY 
    t.Name 
```

这会向您显示表格使用的页面 - 已使用、未使用和总计。

对于整个数据库 - 只需总结每个表的页面并为每个数据库重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-03T16:35:48.097

SQLSERVER2012 的另一种方法没有显示行数..我对一些问题的搜索将我带到这里，我用我使用的那个更新了答案

```
select 
object_name(object_id) as 'tablename',
count(*) as 'totalpages',
sum(Case when is_allocated=0 then 1 else 0 end) as 'unusedPages',
sum(Case when is_allocated=1 then 1 else 0 end) as 'usedPages'
from sys.dm_db_database_page_allocations(db_id(),null,null,null,'DETAILED')
group by
object_name(object_id) 
```

# javascript - 使用 div 切换页面中的不同文本

> ID：11946958
> 
> 赞同：0
> 
> 时间：2012-08-14T06:36:29.673
> 
> 标签：javascript, jquery, jquery-ui, html

这是我的代码：

```
<a class="clickMe">Text 1</a>
<br />
<div class="sri"> - This text will be toggled</div>

<a class="clickMe">Text 2</a>
<br />
<div class="sri"> - This text will be toggled 2</div> 
```

和jQuery

```
$(function () {
    $('a.clickMe').click(function () {
        // find first of following DIV siblings
        // with class "textBox" and toggle it
        $(this).nextAll('div.sri:first').toggle();
    });
}); 
```

现在它通过显示“此文本将被切换”并在单击 Text1 时隐藏“此文本将被切换 2”工作正常，但我希望它以相反的方式工作，也就是说，它应该隐藏“此文本将切换”并在单击 Text1 时显示“此文本将被切换 2”。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:41:08.067

用这个

```
$(function () {
$('a.clickMe').click(function () {
    // find first of following DIV siblings
    // with class "textBox" and toggle it
       $('div.sri').eq(1).toggle();
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:54:06.363

试试这个 ：

html：

```
<a class="clickMe a1">Text 1</a>
<br />
<div class="a2"> - This text will be toggled</div>

<a class="clickMe a2">Text 2</a>
<br />
<div class="a1"> - This text will be toggled 2</div> 
```

js：

```
$(function () {
$('a.clickMe').click(function () {

    var class1 = $(this).attr("class").split(" ")[1];
    $("div." + class1).toggle();
});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T06:56:01.567

为什么需要额外的课程这将解决您的问题

```
 $('a.clickMe').click(function () {
        // find first of following DIV siblings
        // with class "textBox" and toggle it
$(this).nextAll('div.sri:first').show();        
$('div.sri:visible').not($(this).nextAll('div.sri:first')).toggle();

    });​ 
```

[现场演示](http://jsfiddle.net/LTYa2/5/)

# javascript - $.getScript 第二次工作？

> ID：11946961
> 
> 赞同：1
> 
> 时间：2012-08-14T06:36:38.003
> 
> 标签：javascript, ajax, jquery, javascript-events

我想知道这是否是 jQuery 的常见问题`$.getScript()`？我有一个使用此功能的 JS 脚本。

我的 JS 文件真的很长，我认为发布整个脚本对我来说不是一个好主意，所以我只是好奇这是否是一个常见问题？

我有一个 $.ajax 函数，它在按下按钮后运行

```
$.ajax({
   url: thisURL,
   type: "POST",
   crossDomain:true,
   data: searliziedData
}).done(function(data){

var jsPaths = ["http://www.mysite.com/js/jquery.jscrollpane.min.js","http://www.mysite.com/js/jquery.hoverIntent.minified.js","http://www.mysite.com/js/jquery.mousewheel.js","http://www.mysite.com/js/image_contents.js"];
$.each(jsPaths, function(i, jsPath) {
    $.getScript(jsPath);
});

   // do something
}); 
```

**因此，在我第二次**按下按钮之前，脚本不会插入到站点中。我还尝试在 $.ajax 之前插入 $.getScript 代码，并且在第二次按下之前它不会执行。

我没有从这段代码中得到任何错误或任何东西。

我还在 $.each() 函数中放入了一个 `alert("test") 并被执行。

你可能会问我怎么知道我的脚本没有被执行？我使用谷歌浏览器的检查元素，在资源下我可以看到网站中正在执行哪些脚本。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-17T16:17:42.187

每次我`getScript()`在清除缓存后遇到无法处理第一页加载的问题（或者如果它只在第一次加载时有效），那是因为我有一些问题。

我将在这里过分简化一点：上次我遇到这个时，我正在检查`<body>`元素是否具有特定的类，但我是在`<body>`标记本身之前调用脚本。在第一次加载`getScript()`时不会执行，但在第二次加载时它会执行，因为文档被缓存了。在这种情况下，问题不是特定于`getScript()`，而是缓存是如何工作的。

另一个常见问题是脚本依赖性，例如：

```
$.getScript('plugin.js');
$.getScript('developers.js'); 
```

如果`developers.js`依赖于插件功能之类的东西`plugin.js`，在某些情况下它很可能`developers.js`无法运行，因为它的下载速度比下载速度快`plugin.js`，因此首先执行。

对此的解决方案类似于：

```
$.getScript('plugin.js').done(function(){
    $.getScript('developers.js');
}); 
```

您说您的 JS 文件很大，并询问这是否是常见问题。我会说是的。当您有很多事情要做时，很容易忽略脚本相对于彼此和 HTML 文档的执行顺序。这是一个您只需要调试以查看是否缺少任何依赖项的问题。

# .net - 当 .NET 崩溃报告中的 P9“桶”包含乱码而不是导致崩溃的异常的名称时，这意味着什么？

> ID：11946964
> 
> 赞同：3
> 
> 时间：2012-08-14T06:36:51.290
> 
> 标签：.net, exception, .net-2.0, clr, event-log

今天，我们的一位客户在下载并安装了更新版本的产品后，遇到了作为我们产品一部分的 Windows 服务的问题。

他们在 Windows Server 2003 R2 (Service Pack 2) 机器上运行该服务，该机器上安装了 .NET 2.0（这是该服务器上 .NET Framework 的最新版本）。

在他们安装产品更新并重新启动服务后，它几乎立即崩溃，并在 Windows 事件日志中记录了以下错误信息：

```
事件类型：错误
事件源：.NET 运行时 2.0 错误报告
事件类别：无
事件编号：5000
日期：2012 年 8 月 13 日
时间：上午 11:46:23
用户：不适用
电脑：   
描述：
EventType clr20r3、P1 our-service-name-redacted.exe、P2 2.6.31.0、P3 4fcd090b、P4 mscorlib、P5 2.0.0.0、P6 4889dc80、P7 e38、P8 1e8、P9 pszqoadhx1u5zahbhohghldgiy4qixhx、P10 NIL。

```

现在，其他一些客户正在运行相同版本的 Windows 服务而没有任何问题（在不同版本的 Windows 上），我在运行 Windows Server 2003 R2 (Service Pack 2) 的虚拟机上测试了该服务并没有遇到这种情况问题，但对于这个单一的客户来说，它始终如一地发生。

所以，这不是“我的代码有什么问题？” 问题：我对这个错误信息的两件事更感兴趣，我觉得很奇怪：

*   故障模块 (P4) 是**mscorlib**
*   P9，据我所知，通常应该命名发生的异常，包含看起来像垃圾数据的东西（或者可能是某种混淆信息？）

对此有一般解释吗？我尝试了谷歌搜索，但运气不佳，因为很难搜索“P9 垃圾”和类似的东西并获得任何有用的东西。特别是，我真的很好奇 P9 的“胡言乱语”值可能表明什么。例如，这是否暗示他们的 .NET 安装已损坏，或者这种“胡言乱语”是否真的意味着什么？

此外，我有点惊讶错误模块是**mscorlib**而不是我们自己的程序集之一，这让我再次怀疑客户的 .NET 安装是否损坏，或者病毒或其他恶意软件潜伏在他们的服务器上。

因此，如前所述，对于这个相当奇怪的错误报告和 P9“乱码”，或者我应该尝试在 WinDbg 中进行故障转储和调试之外的任何特定故障排除步骤，是否有任何常见的解释？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T07:59:45.703

如果异常信息太长而无法放入该字段中，则对其中的异常信息进行`P9`哈希处理（我不确定字段的长度是多少，但显然它们是有限的）。

但是，除非您不走运，否则很可能过去很多人都遇到过哈希码 - 因此您可以根据哈希进行搜索，您可能会找到已经知道什么类型的人实际上是例外。在这种情况下，它似乎是一个[COM 异常](http://www.pcreview.co.uk/forums/system-runtime-interopservices-comexception-t2404096.html)。

最后，所有模块信息都会告诉您异常的来源。调用引发异常的代码并不少见，这将是一个不寻常的 .NET 程序，它没有对**mscorlib**进行多次调用。当我们（现在）知道这是一个 COM 异常时，这尤其不足为奇。

# pdfsharp - MigraDoc 中的“无法读取图像”

> ID：11946965
> 
> 赞同：0
> 
> 时间：2012-08-14T06:36:55.833
> 
> 标签：pdfsharp, migradoc

当我指定图像的路径时，我收到一条消息，指出“无法读取图像”。我想看看我是否走错了路，所以我把这条路改成了为了测试而编造的东西。在此之后，我收到一条消息，说找不到图像。

因此，看来我实际上确实有正确的路径，并且我之前在本地机器上尝试过这个没有任何问题（但是在另一个文件夹中）。当我在我的服务器上尝试它时出现了问题，它无法加载该文件夹中的所有图像。这与文件夹或类似的权限有关吗？为什么我看不到图片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:40:02.140

可能与权限有关。应用程序是否在完全信任的情况下运行？IIS 应用程序？服务？尝试使用本地系统用户帐户 - 如果它可以工作，那就是权限问题。

可能是图像格式的问题。PDFsharp 依靠操作系统/框架来读取图像。从 GDI+ 构建切换到 WPF 构建或反之亦然可能会有所不同。

在例程“private void CalculateImageDimensions()”中捕获了一个异常。也许您可以在消息框中显示异常或将其保存在文件中。这将有助于确定出了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T10:15:58.637

我在使用**PDFSharp 1.32**版本时遇到了同样的问题。ImageRenderer中出现错误：

```
A generic error occurred in GDI+. 
 at System.Drawing.Image.Save(Stream stream, ImageCodecInfo encoder, EncoderParameters encoderParams)
 at PdfSharp.Pdf.Advanced.PdfImage.InitializeJpeg()
 at PdfSharp.Pdf.Advanced.PdfImage..ctor(PdfDocument document, XImage image)
 at PdfSharp.Pdf.Advanced.PdfImageTable.GetImage(XImage image)
 at PdfSharp.Pdf.PdfPage.GetImageName(XImage image)
 at PdfSharp.Drawing.Pdf.XGraphicsPdfRenderer.GetImageName(XImage image)
 at PdfSharp.Drawing.Pdf.XGraphicsPdfRenderer.Realize(XImage image)
 at PdfSharp.Drawing.Pdf.XGraphicsPdfRenderer.DrawImage(XImage image, XRect destRect, XRect srcRect, XGraphicsUnit srcUnit)
 at PdfSharp.Drawing.XGraphics.DrawImage(XImage image, XRect destRect, XRect srcRect, XGraphicsUnit srcUnit)
 at MigraDoc.Rendering.ImageRenderer.Render() 
```

正如我在 XImage.cs:241 中看到的，EXIF 格式不受官方支持：

```
case "{B96B3CB2-0728-11D3-9D7B-0000F81EF32E}":  // exif

default:
    throw new InvalidOperationException("Unsupported image format."); 
```

不幸的是，GDI+ 将我的 exif 格式图像定义为 JPEG，因此不会触发预期的情况。

目前我没有找到任何理想的解决方案。在开发者论坛（[http://forum.pdfsharp.net/viewtopic.php?f=3&t=3304](http://forum.pdfsharp.net/viewtopic.php?f=3&t=3304)）上，您可以找到有关类似问题的更多信息。似乎出现问题是因为图像是使用 Adob​​e 工具之一保存的。

从其他角度来看 - 较新版本的 Windows 可以正确处理此问题，此问题仅在**Windows Server 2008 R2**上重现，因此也许更新可以解决此问题。

# c# - 在属性值更改时触发的 C# 事件

> ID：11946967
> 
> 赞同：1
> 
> 时间：2012-08-14T06:37:01.537
> 
> 标签：c#, properties

嗨，我有带有属性状态的文档类（例如 doc.Status），情况如下：当状态属性设置为确认时，我想创建另一个相关文档。当文档状态设置为未确认时，我想删除该相关文档（如果存在）。实现这一目标的最佳方法是什么？在属性设置方法中设置 if 子句或在属性值发生更改时使用相同的 if 子句触发事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:42:43.840

我肯定会选择活动解决方案。这将使您的解决方案更加解耦，并且如果您将来希望这样做，它将使您可以更轻松地在代码中的其他位置使用该功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:44:24.637

这在很大程度上取决于您的应用程序。通常，您的模型（我假设您的文档类所属的地方）不应该包含业务逻辑。它应该只提供允许对数据进行基本操作的数据、方法和回调。

您最好[实现自己的事件](http://msdn.microsoft.com/en-us/library/5z57dxz2)并以您需要的任何方式在业务逻辑中处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T06:50:10.403

这取决于您想要为您的功能实现的行为。

1)**在 set 属性中使用“If 子句”：** 在此方法中，一旦编译了文档类，就无法更改行为，因为 set 属性会变成硬编码。因此，如果唯一要做的事情是创建和删除相关文档，那么这种方法更可取。

2)**为“status”属性的更改创建事件：** 当您想将“status”属性的任何更改后执行的操作与文档类分离时，应使用此功能。如果“status”属性改变后要执行的业务逻辑在编译文档类时没有决定，那么这种方法是可取的。

这是你的选择！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T06:39:31.583

“有办法”是生成一个事件并将一个方法连接到它，这将创建另一个文档。如果其他人为您的代码提供服务，这将是一种更具解释性的方式来了解您的意图。

# excel-formula - 如何有条件地对excel中的单元格求和？

> ID：11946975
> 
> 赞同：1
> 
> 时间：2012-08-14T06:37:37.020
> 
> 标签：excel-formula

这是我正在使用的表格（它的 ascii 艺术表示）：

```
|---|---------|-----------|--
|   |A        |B          |
|---|---------------------|--
|1  |price    |override   |
|---|---------|-----------|--
|2  |10       |           |
|---|---------|-----------|--
|3  |20       |100        |
|---|---------|-----------|--
|4  |30       |           |
|---|---------|-----------|--
|5  |40       |90         |
|---|---------|-----------|--
|6  |50       |           |
|---|---------|-----------|--
|7  |150      |280        | <-- SUMS
|---|---------|-----------|--
|   |         |           | 
```

A 列有一些价格，B 列有覆盖价格（如果有）。第 1 到第 6 行有价格，第 7 行有总和。

第 7 行计算为“=SUM(A1:A7)”

我想为单元格 B7 编写一个公式，它将执行以下操作：

```
for every cell in range A1:A7
    if the override field for that price is blank
        add the original price to the total
    else
        add the override price to the total 
```

**我的问题：什么公式可以做到以上？**

我看过 IF（无法弄清楚如何将其应用于范围）和 SUMIF（无法弄清楚如何获取“当前单元格”和“相对单元格”），但我想不出办法去做这个。我是excel公式的新手。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T06:46:38.037

试试数组公式怎么样？在 cell`B7`中，尝试添加：

```
=SUM(IF(ISBLANK(B2:B7), A2:A7, B2:B7)) 
```

然后按`Ctrl+Shift+Enter`以作为数组公式输入。这将检查 B 列中是否有值并在总和中使用它；否则，它将使用 A 列中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:51:51.460

似乎最简单的方法是创建第三列，您可以使用价格填充这些单元格，也可以使用`=IF(ISBLANK(B1); A1; B1)`公式覆盖这些单元格。然后你用鼠标将公式拖到所有单元格上（将相应地更新它）。然后你只需对第三列中的值求和。对不起，不是优秀的艺术家

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T06:53:03.750

我会有一个新的 row.row C 来收集求和所需的价格。

C行是这样的

```
if(B1 = "",A1,B1) 
```

你将有 C 行

```
C

10
100
30
90
50 
```

然后总结这一行C。你会得到你想要的。

# php - 广播组 + javascript

> ID：11946976
> 
> 赞同：0
> 
> 时间：2012-08-14T06:38:00.390
> 
> 标签：php, javascript, jquery

我试图在选择后使用一些单选按钮将值发布到另一个页面进行处理，脚本如下：-

```
<script>
function add_new_event(){
$.post('process.php',{

        event_color:document.getElementById('event_color').value,

}
</script>

        <input type="radio" name="event_color" id="event_color" value="#FF0000"> Color A
        <input type="radio" name="event_color" id="event_color" value="#FF6666"> Color B
        <input type="radio" name="event_color" id="event_color" value="#66FF99"> Color C
        <input type="radio" name="event_color" id="event_color" value="#CCFF66"> Color D
        <input type="radio" name="event_color" id="event_color" value="#00CCFF"> Color E
        <input type="radio" name="event_color" id="event_color" value="#996633"> Color F 
```

我没有成功。代码有什么问题吗？？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:39:38.387

ID 应该是唯一的，因为它们都具有相同的 ID，所以您要针对所有元素，期望得到一些回报。

您可以改为按名称或类定位元素：

```
<script type="text/javascript">
    $(function() {
        function add_new_event(){
            var myValue = $('[name="event_color"]').filter(':checked').val();
            $.post('process.php',{ event_color : myValue });
        }
    });
</script> 
```

html：

```
 <input type="radio" name="event_color" value="#FF0000"> Color A
    <input type="radio" name="event_color" value="#FF6666"> Color B
    <input type="radio" name="event_color" value="#66FF99"> Color C
    <input type="radio" name="event_color" value="#CCFF66"> Color D
    <input type="radio" name="event_color" value="#00CCFF"> Color E
    <input type="radio" name="event_color" value="#996633"> Color F​​​​​​​​​​​​​​​​​ 
```

[**小提琴**](http://jsfiddle.net/Vz2Du/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:41:03.457

为所有单选按钮分配相同的类，然后使用它

```
$('.ClassName:checked').val() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T06:42:21.283

为什么不使用 jQuery 呢？

$("输入[type=radio][name=event_color]:checked")

# c# - Itemscontrol 中的 Itemscontrol 并将它们与自定义数据绑定

> ID：11946978
> 
> 赞同：4
> 
> 时间：2012-08-14T06:38:16.597
> 
> 标签：c#, .net, wpf

我是 WPF 的新手。我一直在尝试执行以下操作：

以下是我的数据结构：

```
public class TokenItems {public string items {get;set;} public int quantity {get;set}}
public class Token { public int tokenNo {get;set;} public string name {get;set;} public   List<TokenItems> currentItems {get;set;}}
public List<Token> tokenList = new List<Token>(); 
```

XAML：

```
<ItemsControl Name="ParentControl">
   ....
   <DataTemplate>
   <TextBlock Content="{Binding tokenNo}"/>

   <Itemscontrol Name="{Binding tokenNo}">  ?? I tried and want dynamic naming or any other solution for this {Binding name} just won't work i know.??
      ...
      <DataTemplate>
        <Button>
            <Grid>
               ...
               <TextBlock Content="{Binding items}/>
               <TextBlock Content="{Binding quantity}/>
      </DataTemplate>

   </Itemscontrol>
     ....
   </DataTemplate>
</Itemscontrol> 
```

我将所有必要的数据添加到 tokenList 并执行以下操作：

```
ParentControl.ItemsSource = tokenList; 
```

毫无疑问，所有内容都为 ParentControl 正确绑定。现在我想用列表 currentItems 填充它的子 Itemcontrol。由于我需要多个父控件，因此我需要对子 Itemscontrol 进行动态命名。此外，我无法从代码访问子 ItemsControl。

如何使这成为可能？我不知道是否存在 ItemsControl 本身的子 ItemsControl。

请建议我解决此问题的任何解决方案或替代解决方案。

编辑：我希望用户查看令牌编号、时间等以及将由交互式按钮列表替换的项目列表。

更新：稍微修改了 XAML 内容。子 ItemsControl 位于 DataTemplate 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T07:17:23.333

您不需要在 itemscontrol 中命名，如果您希望 itemscontrol 触发某些内容，请使用 itemtemplate 中的按钮：

```
<ItemsControl ItemsSource="{Binding tokenList}">
   <ItemsControl ItemsSource="{Binding currentItems}">
       <ItemsControl.ItemTemplate>
           <DataTemplate>
               <Button Content="{Binding TokenNo}"/>
           </DataTemplate>
       </ItemsControl.ItemTemplate>
   </ItemsControl>
</ItemsControl> 
```

您可以在 datatemplate 标记中添加您需要显示的任何内容。在我的示例中，按钮上的文本将是它在父级中找到的 TokenNo，即通过 tokenlist 绑定显示的 Token。

# r - 什么是 R 中的 .rbin 扩展文件

> ID：11946989
> 
> 赞同：0
> 
> 时间：2012-08-14T06:38:47.417
> 
> 标签：r

我是 R 编程语言的新手。我正在下载一些以 zip 格式存档的科学数据。在解压缩时，它会给出一些具有 .rbin 扩展名的文件，这些文件实际上是二进制文件。在谷歌搜索“.rbin”一词时，我找不到使用它们的方法。谁能告诉我如何使用这些 .rbin 文件的指南？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T06:46:52.590

据我所知，扩展名`rbin`不是像 eg`.Rdata`或`.rda`. 我认为您是对的，并且它们是二进制文件。要读取二进制文件，您需要使用该`readBin`函数。为了获得好的结果，您确实需要了解一些细节：

*   存储的二进制数的大小是多少，例如 4 个字节。
*   存储什么，例如逻辑、数字、双精度、整数等。
*   如果存储整数，它们是否无符号。
*   文件是以大字节序还是小字节序存储的。

请查看`?readBin`更多详细信息。

或者，该`rbin`文件可以包含 R 对象的二进制表示（正如@Andrie 评论的那样）。在这种情况下，您需要使用该`load`函数将对象加载到您的工作区中，请参阅`?load`了解更多详细信息。

# sql - 使用 SCOPE_IDENTITY() 是否会影响批量插入的性能？

> ID：11946991
> 
> 赞同：0
> 
> 时间：2012-08-14T06:38:56.263
> 
> 标签：sql, performance

我正在处理数据（“事件”）并将结果插入表格以进行报告。数据是批量插入的，所以我使用的是存储过程。

各种事件类型具有公共和特定字段，因此 INSERT 语句如下所示：

```
INSERT INTO [Event](EventID, ...) VALUES(@EventID, ...)
INSERT INTO [FileEvent](EventID, ...) VALUES(@EventID, ...) 
```

Event 和 FileEvent 之间是 1:1 的关系。

EventID 过去由原始数据提供。最近，我不得不将 EventID 列修改为 IDENTITY 列（原始数据中的 EventID 重复，因此不能再将其用作输入）。INSERT 语句现在看起来像这样：

```
INSERT INTO [Event](...) VALUES(...)
declare @EventID int
SET @EventID = SCOPE_IDENTITY()
INSERT INTO [FileEvent](EventID, ...) VALUES(@EventID, ...) 
```

这工作正常，但我可以看到在批处理过程中插入数据时性能明显下降。例如，我提供 ID 的 INSERT 在 15 分钟内完成，其中使用 IDENTITY 和 SCOPE_IDENTITY() 的 INSERT 在 18 分钟内完成。

授予 SQL 服务器有更多工作要做（组成新 ID 等），但我是否以低效的方式获取 ID？有没有更有效的方法来插入两个表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:30:33.470

您可能希望使用插入语句的输出子句将标识值保存到变量或临时表中。

这样，您还可以在更少的语句中插入更大的批次。您可以使用表值参数发送数据。您可以看到的加速非常显着，就像一个数量级。绝对值得一看批量操作。