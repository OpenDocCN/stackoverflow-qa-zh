# StackOverflow 问答 10768000-10768999

# android - 测试安卓应用

> ID：10768004
> 
> 赞同：4
> 
> 时间：2012-05-26T16:31:23.943
> 
> 标签：android, android-testing

我是测试新手。我已经开发了一个应用程序，现在我需要测试。我在谷歌上搜索了一段时间，了解了一般有哪些不同类型的测试。我写了几个测试用例。

三件事，我想知道，

1.  是否有任何不同类型的安卓测试，如果有，你能给我一些链接，可以帮助我参考。

2.  android用户通常如何测试他的应用程序，他会使用测试框架工作还是通常编写测试用例并在真实手机上测试以查看它们的性能。

3.  是否有任何示例测试用例书面文档可以给我一些基本的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T16:52:47.273

对于集成测试，我使用[Robotium](https://code.google.com/p/robotium/)。[它是仪器测试](https://developer.android.com/guide/topics/testing/index.html)构建之上的一个非常方便的层。这些测试需要在模拟器或真实设备上运行。建议在这两种情况下都有一个依赖于被测项目的额外测试项目（生成额外的 APK）。

就我个人而言，我喜欢对我的应用程序进行分区，这样我就有一个或多个不依赖于 Android 特定类的库，因此可以使用[JUnit](http://junit.org/)在常规 JVM 中进行测试。

还有第三种测试方法，即模拟 android 类并让测试在 JVM 中运行。我还没有使用它，但我听说[Roboelectric](http://pivotal.github.com/robolectric/)是一个允许进行这种测试的框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T17:42:30.650

Android Monkey 工具可以是一个方便的小工具。我发现伪随机方式很方便生成不寻常的用例。

[http://developer.android.com/guide/developing/tools/monkey.html](http://developer.android.com/guide/developing/tools/monkey.html)

# python - numpy 中是否有一个函数来替换 numpy 数组的上下对角线值？

> ID：10768007
> 
> 赞同：5
> 
> 时间：2012-05-26T16:31:55.077
> 
> 标签：python, arrays, numpy

要替换我使用的主对角线`np.fill_diagonal`：

```
matrix = np.zeros((4, 4), float)
main = np.array([2,2,2,2])
np.fill_diagonal(matrix, main) 
```

但我还需要替换主对角线旁边的上下对角线：

```
upper=np.array([1,1,1])
lower=np.array([7,7,7]) 
```

要得到：

```
matrix=[[2 1 0 0]
        [7 2 1 0]
        [0 7 2 1]
        [0 0 7 2]] 
```

谢谢你

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T16:46:51.647

通过一些智能切片，`np.fill_diagonal`也可以这样做：

```
>>> np.fill_diagonal(matrix[:-1, 1:], upper)
>>> np.fill_diagonal(matrix[1:, :-1], lower)
>>> matrix
array([[ 2.,  1.,  0.,  0.],
       [ 7.,  2.,  1.,  0.],
       [ 0.,  7.,  2.,  1.],
       [ 0.,  0.,  7.,  2.]]) 
```

# c++ - boost线程死锁，任何人都可以检查为什么？

> ID：10768008
> 
> 赞同：0
> 
> 时间：2012-05-26T16:32:06.000
> 
> 标签：c++, multithreading, boost, deadlock

我试图编写一个可以进行多线程读写的程序。它在一次读取和一次写入时工作正常，但是当我使用两次读取和一次写入时它以死锁告终。

谁能帮忙查一下？

```
const int BUF_SIZE = 10;
const int ITERS = 100;

boost::mutex io_mutex;

class buffer
{
public:

    typedef boost::mutex::scoped_lock scoped_lock;

    buffer() : p(0), c(0), full(0)
    {}

    void put(int m)
    {
        scoped_lock lock(mutex);
        if (full == BUF_SIZE)
        {
            {
                boost::mutex::scoped_lock lock(io_mutex);
                std::cout << "Buffer is full. Waiting..." << std::endl;
            }
            while (full == BUF_SIZE)
                cond.wait(lock);
        }

        buf[p] = m;

        p = (p+1) % BUF_SIZE;

        ++full;

        cond.notify_all();
    }

    int get()
    {
        scoped_lock lk(mutex);

        if (full == 0)
        {
            {
                boost::mutex::scoped_lock lock(io_mutex);
                std::cout << "Buffer is empty. Waiting..." << std::endl;
            }

            while (full == 0)
                cond.wait(lk);
        }

        int i = buf[c];

        c = (c+1) % BUF_SIZE;

        --full;

        cond.notify_one();

        return i;
    }

private:
    boost::mutex mutex;

    boost::condition cond;

    unsigned int p, c, full;

    int buf[BUF_SIZE];
};

buffer buf;

void writer()
{
    for (int n = 0; n < ITERS; ++n)
    {
        {
            boost::mutex::scoped_lock lock(io_mutex);
            std::cout << "sending: " << n << std::endl;
        }
        buf.put(n);
    }
}

void reader()
{
    for (int x = 0; x < ITERS; ++x)
    {
        int n = buf.get();
        {
            boost::mutex::scoped_lock lock(io_mutex);
            std::cout << "reader1: received: " << n <<  std::endl;
        }
    }
}

int main(int argc, char* argv[])
{
    boost::thread thrd1(&reader);
    boost::thread thrd2(&writer);
    boost::thread thrd3(&reader);

    std::string str;

    thrd1.join();
    thrd2.join();
    thrd3.join();

    std::getline(std::cin,str);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T17:17:47.240

你可能在这里有点为了树木而失去了森林。您的代码写入 ITERS 值，但尝试读取 2 * ITERS 值，因为您有两个阅读器。那是行不通的。

您至少必须编写 2 * ITERS 值才能完成程序。

# c++ - Visual Studio 2010 不重建/重新编译

> ID：10768021
> 
> 赞同：2
> 
> 时间：2012-05-26T16:33:50.340
> 
> 标签：c++, visual-studio-2010, build, compilation, rebuild

当我每次调试时突然VS停止重新编译我的项目时，我正在开发一个项目（在工作中途......我从未改变任何东西）。所以它会一遍又一遍地运行相同的旧版本。

我不想每次都“清理构建”，并且我已按照此处的说明进行操作（[Visual Studio 2010 不会重建更改的代码，除非我手动选择“重建”](https://stackoverflow.com/questions/3489794/visual-studio-2010-doesnt-rebuild-changed-code-unless-i-manually-select-rebuil)）。令人惊讶的是，它们已经设置好了（当项目过时时提示构建，在配置管理器下检查构建）。

然而，它仍然从来没有提示过我（除了清洁之后），而且它变得非常令人沮丧。如果有帮助，我正在使用 VS c++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-23T07:09:23.463

我只是有同样的问题。这可能会解决您的问题：

工具->选项->项目和解决方案->构建和运行。

有一个选项可以用于“运行中，当项目过期时”。将此设置为“始终创建”。这意味着如果您编译的项目依赖于项目文件夹中的另一个项目，那么首先编译另一个项目，就像您想要的那样。

就我而言，此选项已设置，但在 VS2010 崩溃后设置为其他内容。

# php - 将复选框状态传递给 PHP

> ID：10768024
> 
> 赞同：1
> 
> 时间：2012-05-26T16:35:16.650
> 
> 标签：php, html

```
<input type="hidden" name="check_box_1" value="0" />
<input type="checkbox" name="check_box_1" value="1" /> 
```

这工作正常，但是当您单击提交并勾选复选框时，它会将隐藏值和原始复选框值都传递给 php 中的 $_POST 变量，这可以避免吗？

我在那里有隐藏的值，因此未选中的复选框被传递给 $_POST 变量以及选中的复选框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T16:40:48.040

更好的方法是删除隐藏字段，并简单地在 PHP 中进行检查：

```
if ($_POST['check_box_1']=='1') { /*Do something for ticked*/ }
else { /*Do something for unticked*/ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T16:38:23.703

你不应该需要隐藏字段。实际上，您首先不应该信任任何发送的表单字段。这意味着您不能编写获取已发送字段的代码并信任它们发送正确的数据（我假设您现在这样做）。

您应该做的是处理您*期望*获得的所有字段。这样，如果您没有获得复选框值，您仍然可以处理它，就好像它没有被选中一样。然后，您还将获得丢弃您最初不期望的表单数据的附加固有功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T16:37:48.587

不，它会传递所有的表单数据，不管它是什么。这样做的正确方法不是通过隐藏字段设置复选框，而是将复选框设置为其实际状态！

我的意思是......你为什么要添加隐藏字段开始？

您的 PHP 正在接收两个名为 check_box_1 的字段，上次我检查时无法保证这些参数会以与您发送它们的顺序完全相同的顺序被读入 REQUEST 哈希，因此，无法判断哪个会最后到达（这是将设置其值的那个）。所以......这不是解决您要在这里解决的任何问题的正确方法。

欢迎来到 Stack，顺便说一句！如果您发现答案有用或有帮助，请确保将其标记为正确并投票。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T16:37:55.797

这很正常。

它们必须同时`type="checkbox"`传递 1 个值。

如果你想在任何情况下只得到 1 ，你可以这样做：

```
<input type="checkbox" style="display:none;" name="check_box_1" value="0"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T16:38:39.320

确保第一个输入字段的类型为 Checkbox，否则它的行为将不像一个。

```
<input type="checkbox" name="check_box_0" value="0" />
<input type="checkbox" name="check_box_1" value="1" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-26T20:53:06.903

到目前为止，您的代码一切正常。

我假设您正在创建隐藏字段，以便在未选中复选框时将 0 传递给服务器。问题是当复选框*被*选中时它们都通过了。

正如死神所说，你*应该的方式*这样做的方式是使用一个复选框，然后检查值是否已发送到服务器。这就是复选框的工作方式。

如果你想有一个*默认*设置，那么你必须根据天气处理服务器端的所有内容，复选框有一个值。

例如：

```
$myValue = "";
if(isset($_POST['check_box_1']))
{
    $myValue=$_POST['check_box_1'];
}
else
{
    $myValue="0";
} 
```

# c++ - 实时光线追踪器

> ID：10768034
> 
> 赞同：0
> 
> 时间：2012-05-26T16:36:50.307
> 
> 标签：c++, windows, real-time, raytracing

我想用 C++ 制作一个基本的实时 CPU 光线追踪器（主要用于学习建议）。[本教程](http://www.codermind.com/articles/Raytracer-in-C++-Part-I-First-rays.html)非常适合制作基本的光线追踪器。但是在屏幕上实时绘制它的最佳解决方案是什么？我不是在问如何优化光线追踪部分，只是在绘画部分，以便它可以在屏幕上而不是在文件中绘画。

我正在/为 Windows 开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T16:52:01.183

您可以查看[这篇](http://www.codeproject.com/Articles/1988/Guide-to-WIN32-Paint-for-beginners)关于使用 Win32API 的基本绘制机制的代码项目文章

更新：OP 想要快速绘图，这是 Win32API 不提供的。OP 需要这个，以便他们可以在优化过程中测量光线追踪算法的加速。绘图的其他可能性是：DirectX、XNA、Allegro、OpenGL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T10:10:03.480

我正在专业从事实时 CPU 光线追踪器的工作，从我在那里工作 2 年的经验来看，显示图像的 GPU 部分不会成为瓶颈，如果达到它的瓶颈将是 RAM 的速度，我认为绘图技术不会产生任何重大影响。

例如，我们正在使用集群（一个 CPU 是不够的 :p），我们能够在 1920x1080 的分辨率下渲染 100-200fps，但瓶颈不是显示部分，而是网络……编辑：我们使用 OpenGL 进行显示。

当你在做 CPU 光线追踪器时，你不会做 printPixelToGPU()，但你会写入你的 RAM，然后在图像完成后将它发送到 GPU。执行 printPixelToGPU() 可能会导致很大的开销，并且（在我看来）这是一个非常糟糕的设计选择。

它看起来像过早的优化。但是，如果您仍然对此感到担忧，只需做一个基准测试，看看您可以使用 OpenGL、directX... 将多少 RAM 纹理传输到 GPU，然后打印平均帧速率。您可能会看到帧速率非常非常高，因此除非您使用的是 SDRAM 或非常差的 GPU，否则您肯定永远不会达到那个“瓶颈”。

# java - 有短语头查找器吗？

> ID：10768038
> 
> 赞同：4
> 
> 时间：2012-05-26T16:37:19.273
> 
> 标签：java, nlp

我有一些要解析的句子。这是我拥有的和需要的：我有这样的句子：

> 我在医院。
> 
> 我从家里去加拿大。

我想知道“in the hospital”、“from home”和“to Canada”这几个词组的头。

我正在使用 Berkley 解析器，但它给我的是所有句子的解析结果，如果我想手动提取短语的头部，我应该开发另一个解析器！我要解析的文件是一个很大的文件，所以如果我自己开发一个解析器，它可能会有很多错误。有没有任何解析器可以给我我正在寻找的结果？

顺便说一下，由于单独解析短语，可能会导致与句子解析不同的解析，我坚持先解析句子，然后提取短语头。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T16:45:36.867

S [tanford Parser](http://nlp.stanford.edu/software/lex-parser.shtml)和[OpenNLP](http://opennlp.apache.org/)解析器将为您提供词性和依赖信息，您可以使用这些信息来确定短语的头部

例如，使用斯坦福解析器，你会得到：

```
(S
  (NP (PRP I))
  (VP (VBD was)
      (PP (IN in)
          (NP (DT the)
              (NN hospital))))) 
```

这告诉您句子（S）由一个名词短语（NP）和一个动词短语（VP）组成；动词短语是动词（V*）+介词短语（PP），是介词*in*和名词短语；第二个名词短语是限定词（DT）和名词（NN）。

如果我正确理解了这个问题，那么您正在寻找名词短语（可能还有动词短语）的头部。您已经*可以*从此信息中识别头部，但解析器也会为您提供以下依赖信息：

```
nsubj(was, I)
prep_in(was, hospital)
det(hospital, the) 
```

这告诉您单词*was*和*I*处于名义-主语*nsubj*关系（*I*是动词*was*的主语）；*was*和*hospital*这两个词处于“in”介词（*prep-in*）关系；“hospital”和“the”这两个词是限定词（*det*）关系。使用前面的解析和依赖信息，你可以知道第一个名词短语的头部是“I”（琐碎），第二个名词短语的头部是“医院”（因为那是“顶部”名词短语中的关系元素）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-04T03:12:14.010

正如 Attila 的回答中所概述的那样，在短语中找到中心词的问题并非微不足道。Michael Collins 教授有一个寻找中心词的启发式列表（他的启发式基于 Penn Tree 银行数据集），这些启发式的实现可在斯坦福 CoreNLP 套件中找到（我在 20140104 版本中查看）。

[此处](https://stackoverflow.com/a/22841952/1019673)给出的回复有更多关于斯坦福 CoreNLP 中为您找到核心词的课程的详细信息。

# ruby-on-rails - 如何在 Heroku 上刷新清漆缓存

> ID：10768039
> 
> 赞同：1
> 
> 时间：2012-05-26T16:37:33.923
> 
> 标签：ruby-on-rails, caching, heroku, memcached, varnish

有没有办法强制刷新（清除）heroku 上的清漆缓存？在`git push heroku master`我的旧（和错误）缓存仍然存在之后。

**更新：**我尝试设置 varnish = 0 然后再次提交并推送 heroku +master

```
-      response.headers['Cache-Control'] = 'public, max-age=604800'
+      response.headers['Cache-Control'] = 'public, max-age=0' 
```

但无济于事...

**更新：**我试过`heroku restart`但没有帮助......

**更新：**到目前为止，似乎没有官方方法可以手动过期 Heroku 上的 Varnish 缓存（请参阅帖子[heroku-force-clear-varnish-cache](https://stackoverflow.com/questions/6182754/heroku-force-clear-varnish-cache)）。我只是在 Heroku 支持上打开一个问题，看看他们会说什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:33:58.753

显然，在最后一次之后事情本身就正常了`heroku restart`（注意，我已经做了几次但没有成功），请注意以下查询中的 X-Varnish num：

**重启前：**

lsoave@ubuntu:~/rails/github/gitwatcher$ curl -I PURGE [http://gitwatcher.com/](http://gitwatcher.com/) curl: (6) 无法解析主机 'PURGE' HTTP/1.1 200 OK 服务器：nginx 日期：星期六，26 2012 年 5 月 19:16:01 GMT 内容类型：text/html；charset=utf-8 Connection: keep-alive X-Ua-Compatible: IE=Edge,chrome=1 Etag: "f5a232e0193cfc6ad55c7b19033552b5" 缓存控制: max-age=0, private, must-revalidate Set-Cookie: _rails3-mongoid -omniauth-simple_session = BAh7B0kiD3Nlc3Npb25faWQGOgZFRkkiJTk0YTk3YTFlYWU5ZjMwYmE4M2Y3MzBlZGE5NWE5ZTYzBjsAVEkiEF9jc3JmX3Rva2VuBjsARkkiMTFpL0pKbHl0OFRLYnpoZFJCbmlrKytOUmRKWi9Kd0MxdExPektUVTErOUk9BjsARg％3D％3D - 826c4f58013b8a28da1544ab455ac928e1d8c961; 路径=/; HttpOnly X-Request-Id: bd82e473e163a47f57440e351d2757ce X-Runtime: 0.021009 X-Rack-Cache: stale, invalid Content-Length: 8302 Accept-Ranges: bytes **X-清漆：197775566** 年龄：0 通过：1.1 清漆

**重启后**

lsoave@ubuntu:~/rails/github/gitwatcher$ curl -I PURGE [http://gitwatcher.com/](http://gitwatcher.com/) curl: (6) 无法解析主机 'PURGE' HTTP/1.1 200 OK 服务器：nginx 日期：星期六，26 2012 年 5 月 19:18:12 GMT 内容类型：text/html；charset=utf-8 Connection: keep-alive X-Ua-Compatible: IE=Edge,chrome=1 Etag: "495098767d9e77dc52081d8de3f4b27e" 缓存控制: max-age=0, private, must-revalidate Set-Cookie: _rails3-mongoid -omniauth-simple_session = BAh7B0kiD3Nlc3Npb25faWQGOgZFRkkiJWRkNTZiZDQ1YmY5YzhjM2Y3MTRiNmEwZjg4Y2YyMGE1BjsAVEkiEF9jc3JmX3Rva2VuBjsARkkiMVpKZWlScGNmWGtkRnZ3OFZOQWRDOGhVZWZ6WlNEN0dMYlVOZzFxc0NhVVU9BjsARg％3D％3D - 51d21b9b6c039eacece832c8fc17c221393a86b2; 路径=/; HttpOnly X-Request-Id: 002d2081c7b55c3edf7070316a216c28 X-Runtime: 0.016595 X-Rack-Cache: stale, invalid Content-Length: 8302 Accept-Ranges: bytes **X-清漆：1359484771** 年龄：0 通过：1.1 清漆

lsoave@ubuntu:~/rails/github/gitwatcher$

仍然没有人回复我的**请求 #53071**，来自 Heroku 支持。一切正常......如果您对这种延迟有任何想法或也发生在您身上，请发布您的经验。

> 更新：我对 Heroku/support 的最后两个答案：
> 
> **2012 年 5 月 31 日 15:09**我们最近升级了清漆版本，目前正在调查这对缓存清除操作的影响。但是，要回答您的问题，不，没有办法从缓存中手动清除项目。我们的系统旨在在部署时刷新您应用程序域的所有资源。
> 
> **凌晨 1:02（23 小时前）**我们有一段时间没有收到您的回复，因此我们将这张票标记为已解决。如果您有进一步的意见，请随时在 [http://support.heroku.com/tickets/53071](http://support.heroku.com/tickets/53071)重新打开票证。否则，请随时在这里打开一个新问题` [http://support.heroku.com/tickets/new](http://support.heroku.com/tickets/new)。

# android - Android - 如何使扩展 ListView 的 Activity 也扩展我的 BaseView

> ID：10768044
> 
> 赞同：0
> 
> 时间：2012-05-26T16:38:08.223
> 
> 标签：android, android-layout

我有一个 BaseActivity 有我的标题：

```
public class BaseActivity extends Activity
{
        @Override
        public void setContentView(int layoutResID) {
            super.setContentView(layoutResID);      
        {
            Button home_header = (Button)findViewById(R.id.home_header);
            Button questions_header = (Button)findViewById(R.id.questions_header);

            home_header.setOnClickListener(new Button.OnClickListener() 
            {  
                public void onClick(View v) 
                {                   
                  Intent myIntent = new Intent( BaseActivity.this , ProblemioActivity.class);
                  BaseActivity.this.startActivity(myIntent);
                }
            });                 

            questions_header.setOnClickListener(new Button.OnClickListener() 
            {  
                public void onClick(View v) 
                {                   
                  Intent myIntent = new Intent( BaseActivity.this , MyQuestionsActivity.class);
                  BaseActivity.this.startActivity(myIntent);
                }
            });         
        }
    }
} 
```

当我像这样扩展它时它可以工作：

```
public class ProblemActivity extends BaseActivity 
```

但是如果我有一个扩展 ListActivity 的类，我不能也扩展 BaseActivity。有没有办法让我强制扩展 ListActivity 的类也能够拥有标题？现在我通过扩展 BaseActivity 使它们具有标题，但是由于一些扩展 ListActivity 已经，我似乎不能那样做。

我怎样才能解决这个问题并使扩展 ListActivity 的类也能够具有标题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:44:11.150

您可以`BaseActivity`扩展 from `ListActivity`，但这将使您的所有活动成为一个`ListActivity`，并且可能会给其他不是 ListActivity 的活动带来问题。

`ListActivity`不需要使用`ListView`. 您可以`ListView`在简单的活动中使用。如果您想继续为所有活动使用 BaseActivity，请不要使用 ListActivity 并自行管理 ListView。另一种选择是制作您自己`ListActivity`的扩展自`BaseActivity`. 这是一个基本的例子：

```
class MyBaseListActivity extends BaseActivity {

  protected ListView getListView() {
    return (ListView)findViewById(android.R.id.list);
  }

  protected ListAdapter getListAdapter() {
    return getListView().getAdapter();
  }

  ...

} 
```

# java - 在android中取消选中单选按钮

> ID：10768046
> 
> 赞同：1
> 
> 时间：2012-05-26T16:38:16.853
> 
> 标签：java, android, radio-button

大家好，我正在android中开发一个基于测验的应用程序，我使用单选按钮作为选项，它有一个任务和4个选项，还有2个按钮可以返回上一个任务和下一个任务。我的任务一旦第一次打开应用程序，所有单选按钮都将被取消选中，在回答第一个任务后说他回答了第三个任务并进入下一个任务，那么单选按钮将处于相同的第三个选项中（但该选项将更改）我希望在用户每次转到下一个问题时都取消选中所有单选按钮。谁能帮我解决这个问题。提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:40:35.637

清除您的 radioButtonGroup....

```
radioButtonGroup.clearCheck(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T16:44:30.440

[RadioButton](http://developer.android.com/reference/android/widget/RadioButton.html)扩展[了 CompuntButton](http://developer.android.com/reference/android/widget/CompoundButton.html)

这意味着您也可以使用方法[setChecked(boolean checked);](http://developer.android.com/reference/android/widget/CompoundButton.html#setChecked%28boolean%29)

# php - PHP mail() 函数不起作用，不返回错误但未收到邮件

> ID：10768049
> 
> 赞同：0
> 
> 时间：2012-05-26T16:38:36.187
> 
> 标签：php, macos, smtp, osx-tiger

为了尝试从 php 脚本发送邮件，我正在使用以下代码测试 mail() 函数：

```
<?php  
ini_set("display_errors", "1");
error_reporting(E_ALL);
$to = 'example@gmail.com';
$message = 'test';
$from = 'test@gmail.com';
$subject = 'Test';
$headers = "From: $from\n";
mail($to, $subject, $message, $headers) or die ("Message not sent");
?> 
```

这不是我尝试过的唯一代码，但似乎没有任何效果。我在这里询问的原因之一是因为它没有返回任何错误。我根本没有收到任何错误的迹象，除了邮件永远不会到达它的目的地。我为尝试解决问题所做的事情：

1.  将 php.ini 中的 SMTP 从 localhost 更改为 gmail 的 smtp
2.  检查两端的垃圾邮件过滤器和发件箱
3.  尝试了各种报错方法
4.  尝试了几种不同的发送邮件功能
5.  在 phpinfo() 中检查了看似相关的东西，但没有用

我认为这可能是我终端中的 sendmail 功能的问题，但我无法测试或修复与 sendmail 功能相关的任何问题。

我在装有 OS X 10.4 Tiger 和 PHP 5.3.12 的 PPC Mac 上运行 apache 2.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:41:46.357

php.ini 中的 SMTP 设置仅适用于 Windows。在其他系统上，始终使用本地 MTA（Sendmail），并且您提供的 SMTP 设置会被忽略。如果您想使用 Gmail，请确保在 MTA 中对其进行配置。

检查发送系统上 Sendmail 的邮件日志。您应该能够在其中找到有关消息传递的提示。

# java - Java中具有共享扩展的通用对象

> ID：10768056
> 
> 赞同：1
> 
> 时间：2012-05-26T16:39:29.600
> 
> 标签：java, generics, annotations

我不确定这是可能的，但我试图声明一个`Object`将充当`Class`,`Method`或`Field`（主要只是调用`getAnnotation()`）的。我想过尝试`Object<? extends AnnotatedElement>`，因为它们都共享该实现，但`Object`不是通用类型。这是可能的吗？如果不是，什么是更好的方法（除了每个对象都分开）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T16:42:20.847

只需声明为 AnnotatedElement。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T16:42:18.277

我认为您在这里尝试做的太多了，只需将您的对象声明为`AnnotatedElement`.

尽管尽可能频繁地使用泛型很有说服力，但我们永远不应忘记 OO 的简单、基本构造。保持专注的最好方法是，每当你想出一个与它正在做的事情相比看起来过于复杂的结构时，只要问自己一个问题“我在这里使用了正确的工具吗？”

# iphone - UINavigationController 后退和关闭按钮

> ID：10768059
> 
> 赞同：3
> 
> 时间：2012-05-26T16:39:49.713
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller

我有一个导航控制器。控制器运行良好，并向我显示返回按钮以返回窗口。但是当我添加此代码以添加关闭按钮时：

```
- (void)viewDidLoad 
{
  [super viewDidLoad];

  UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithTitle:@"Chiudi" 
                                  style:UIBarButtonItemStylePlain target:self
                       action:@selector(dismissModalViewControllerAnimated:)];          

  self.navigationItem.rightBarButtonItem = doneButton;

  [doneButton release];

} 
```

...然后后退按钮消失，我只能看到关闭按钮。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:59:14.860

问题出在

```
 dismissModalViewControllerAnimated 
```

我不得不使用

```
 [self.navigationController dismissModalViewControllerAnimated:YES];     
 [self.navigationController popToRootViewControllerAnimated:NO]; 
```

# php - Wordpress 子主题：覆盖函数

> ID：10768065
> 
> 赞同：1
> 
> 时间：2012-05-26T16:40:42.220
> 
> 标签：php, wordpress, themes, wordpress-theming

在我的父主题中，我有一个没有初始语句的函数：

```
if (!function_exists(... etc... 
```

如何在我的子主题中用同名的函数替换它？如果我在我的functions.php中创建函数，它会给我一个错误，因为有两个同名的函数。

预先感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:34:16.560

这似乎对我有用：

```
function fileExistsInChildTheme($file_path){
    $file_directory = get_template_directory();
    if(file_exists($file_directory . "-child" . $file_path)){
        return $file_directory .= "-child" . $file_path;
    }
    return $file_directory .= $file_path;
}

require ( fileExistsInChildTheme('/includes/functions.php') );
require ( fileExistsInChildTheme('/includes/theme-options.php') );
require ( fileExistsInChildTheme('/includes/hooks.php') );
require ( fileExistsInChildTheme('/includes/version.php') ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:53:52.573

子主题 function.php 文件在父主题函数文件**之前**加载，因此在子主题中重新声明函数不应出现致命错误。这就是您的父主题使用`function_exists`检查的原因。

也许你在钩子（例如初始化）之后在子主题中声明函数？

这是有关此的法典文档：http: [//codex.wordpress.org/Child_Themes#Referencing_.2F_Including_Files_in_Your_Child_Theme](http://codex.wordpress.org/Child_Themes#Referencing_.2F_Including_Files_in_Your_Child_Theme)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-19T04:04:02.213

我想如果你添加相同的函数名称，那么它从子主题函数中获取，然后从父主题函数中获取。

例如。

**儿童主题**

```
if ( ! function_exists( 'function_name' ) ) {
  function function_name(){
    echo 'This is child theme';
  }
} 
```

**家长主题**

```
if ( ! function_exists( 'function_name' ) ) {
  function function_name(){
    echo 'This is parent theme';
  }
} 
```

# javascript - javascript for循环只给出元素的数量

> ID：10768070
> 
> 赞同：2
> 
> 时间：2012-05-26T16:41:17.510
> 
> 标签：javascript, for-loop, closures

我有一个包含 3 个链接的列表，我想遍历这些链接，因此每个链接都可以做某事。但是当我使用for循环时，它只会`3`在控制台中给我，这是列表中的链接数。我希望控制台像这样显示他们每个人：`0, 1, 2`;

另外如何获得每个链接的索引位置？

在这里查看代码：http: [//jsfiddle.net/c8Wdj/](http://jsfiddle.net/c8Wdj/)

请不要使用 jQuery 或任何库...

### JavaScript：

```
(function(){
    var triggers = document.getElementById('some-list').getElementsByTagName('a');

    for (var i = 0, max = triggers.length; i < max; i += 1) {
        triggers[i].addEventListener('mouseenter', function(e) {

            console.log(i);

        }, false);
    }

}()); 
```

### HTML：

```
<ul id="some-list">
    <li><a href="#">One</a></li>
    <li><a href="#">Two</a></li>
    <li><a href="#">Three</a></li>
</ul>​ 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T16:45:42.700

for 没有范围，因此当您使用 console.log(i) 时，它使用 i 的最新值。试试这个：

```
for (var i = 0, max = triggers.length; i < max; i += 1) {
    (function(num){
        triggers[i].addEventListener('mouseenter', function(e) {
            console.log(num);
        }, false);
    })(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:59:36.890

一种常见的方法是在循环的每次迭代中创建一个新的变量范围，方法是调用一个函数，传递`i`给它，然后返回一个引用该值的函数。

但是，如果您只需要引用一些轻量级数据（如数字），另一种方法是简单地在元素上放置一个 expando 属性。

```
for (var i = 0, max = triggers.length; i < max; i += 1) {
    triggers[i].__i__ = i;
    triggers[i].addEventListener('mouseenter', function(e) {
        console.log(this.__i__);
    }, false);
} 
```

这不需要嵌套变量范围的开销。

***演示：http:*** [//jsfiddle.net/c8Wdj/5/](http://jsfiddle.net/c8Wdj/5/)

可能是 IE6 的问题*（我不记得了）*，但这无关紧要，因为您希望不再支持它的 JS 环境。`:)`

# c# - 如何创建静态可绑定属性描述对象

> ID：10768082
> 
> 赞同：1
> 
> 时间：2012-05-26T16:43:26.837
> 
> 标签：c#, wpf, properties, propertyinfo

为了确保 WPF 中的绑定以现有属性为目标，我使用了静态属性名称属性。

现在，我不想将有关我的属性的更多信息封装到静态属性描述对象、名称、类型、ID 等中，但不必为名称提供一个可路径绑定的属性，并为所有其他信息提供一个属性。

问题是 WPF 抱怨属性类型错误，而不是 String 而是 PropertyInfo。

我试图以某种方式绕过这个限制。例如，我尝试让我的 PropertyInfo 隐式转换为字符串，覆盖 ToString 并将 PropertyInfo 中的 TypeConverter 添加到字符串和 PropertyInfo 中的字符串。没有任何效果。

而且我也不能直接绑定到 Name 属性。

```
<TextBlock Text="{Binding Path={x:Static l:Test.TitleProperty}}" /> 
```

* * *

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        TypeDescriptor.AddAttributes(typeof(string),
          new TypeConverterAttribute(typeof(StringFromPropertyConverter)));

        DataContext = new Test { Title = "hello" };
    }
}

public class Test
{
    public static readonly PropertyInfo TitleProperty = 
      new PropertyInfo { Name = "Title" };

    public string Title { get; set; }
}

[TypeConverter(typeof(PropertyToStringConverter))]
public class PropertyInfo
{
    public string Name { get; set; }

    public static implicit operator string(PropertyInfo p) { return p.Name; }

    public override string ToString()
    {
        return Name;
    }
}

public class PropertyToStringConverter : TypeConverter
{
    public override bool CanConvertTo(ITypeDescriptorContext context,
      Type destinationType)
    {
        if (destinationType == typeof(string)) return true;
        return base.CanConvertTo(context, destinationType);
    }

    public override object ConvertTo(ITypeDescriptorContext context, 
      System.Globalization.CultureInfo culture, object value,
      Type destinationType)
    {
        return ((PropertyInfo)value).Name;
    }
}

public class StringFromPropertyConverter : TypeConverter
{
    public override bool CanConvertFrom(ITypeDescriptorContext context,
      Type sourceType)
    {
        if (sourceType == typeof(PropertyInfo)) return true;
        return base.CanConvertFrom(context, sourceType);
    }

    public override object ConvertFrom(ITypeDescriptorContext context, 
      System.Globalization.CultureInfo culture, object value)
    {
        return ((PropertyInfo)value).Name;
    }
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T17:51:13.780

您的 PropertyInfo 需要有一个 TypeConverter 才能将 PropertyInfo 转换为 System.Windows.PropertyPath，而不是字符串。此外，您可能需要考虑为此目的重用 .NETs System.Reflection.PropertyInfo。

我以前见过这种方法，其主要原因是避免属性更改通知中的“神奇字符串”。因此，您还可以看看如何使用 System.Linq.Expressions 来完成获取 PropertyInfo，如下所示：

```
public static class ReflectionHelper
{
    public static PropertyInfo GetPropertyInfo<T>(Expression<Func<T, object>> getter)
    {
        return (PropertyInfo)((MemberExpression)getter.Body).Member;
    }
} 
```

并像这样使用它：

```
public class Test
{
    public static readonly PropertyInfo TitleProperty = ReflectionHelper.GetPropertyInfo<Test>(x => x.Title);

    public string Title { get; set; }
} 
```

* * *

**编辑：新答案**

是的你是对的。即使您定义 TypeConverter 将 PropertyInfo 转换为 System.Windows.PropertyPath，它也不起作用。我认为这是因为 ConverterType 属性应该放在 System.Windows.PropertyPath 类上。但是由于它是一个你不拥有的类，你不能在它上面放置属性。使用 TypeDescriptor 添加属性将不起作用，因为 XAML 不使用 TypeDescriptor 基础结构。

您可以使用 MarkupExtension 完成转换。这是一个完整的代码（它使用来自 System.Reflection 命名空间的 PropertyInfo）：

**反射助手.cs**

```
using System;
using System.Linq.Expressions;
using System.Reflection;

namespace WpfApplication
{
    public static class ReflectionHelper
    {
        public static PropertyInfo GetPropertyInfo<T>(Expression<Func<T, object>> getter)
        {
            return (PropertyInfo)((MemberExpression)getter.Body).Member;
        }
    }
} 
```

**测试.cs**

```
using System.Reflection;

namespace WpfApplication
{
    public class Test
    {
        public static readonly PropertyInfo TitleProperty = ReflectionHelper.GetPropertyInfo<Test>(x => x.Title);

        public string Title { get; set; }
    }
} 
```

**PropertyInfoPathExtension.cs**

```
using System;
using System.Reflection;
using System.Windows;
using System.Windows.Markup;

namespace WpfApplication
{
    public class PropertyInfoPathExtension : MarkupExtension
    {
        private readonly PropertyInfo propertyInfo;

        public PropertyInfoPathExtension(PropertyInfo propertyInfo)
        {
            if (propertyInfo == null)
                throw new ArgumentNullException("propertyInfo");

            this.propertyInfo = propertyInfo;
        }

        public override object ProvideValue(IServiceProvider serviceProvider)
        {
            return new PropertyPath(propertyInfo);
        }
    }
} 
```

**主窗口.xaml**

```
<Window x:Class="WpfApplication.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication"
        Title="MainWindow" Height="350" Width="525">
    <Window.DataContext>
        <local:Test Title="hello"/>
    </Window.DataContext>
    <TextBlock Text="{Binding Path={local:PropertyInfoPath {x:Static local:Test.TitleProperty}}}"/>
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T17:07:40.760

那么，您的语法正确吗？

不久前我不得不绑定到一个静态类。绑定到静态的语法是不同的。我在这里记录了它。

[WPF绑定到静态类的属性](http://www.wpfsharp.com/2011/09/04/wpf-binding-to-a-property-of-a-static-class/)

但本质上语法是这样的：

```
{x:Static s:MyStaticClass.StaticValue1} 
```

# javascript - toFixed(2) 轮“x.525”不一致？

> ID：10768083
> 
> 赞同：7
> 
> 时间：2012-05-26T16:44:07.473
> 
> 标签：javascript, rounding

使用 toFixed 时遇到舍入错误：

我`toFixed(2)`在数值计算中使用过，但在少数情况下舍入结果与预期不符。

假设它`toFixed(2)`被申请价值`17.525`然后它给出结果`17.52`，如果它被申请`5.525`那么它给出结果`5.53`。

在后一种情况下，舍入结果是准确的，所以请您建议需要做什么才能获得后一种情况下的准确舍入结果。或者您能否建议这个 toFixed 函数的替代方法以获得正确的舍入结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T17:06:48.340

浮点数不准确意味着大多数以 0.525 结尾的数字实际上是 0.52500..1，而其他数字是 0.5249999.....

值的舍入方式取决于 IEEE-754 浮点中最接近的实际表示是高于还是低于所需值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T17:17:56.363

而不是`toFixed()`使用`Math.ceil()`,`Math.floor()`或`Math.round()`

有办法

```
var rnum = 5.525,
    decimalPlaces = 2,
    factor = Math.pow(10, decimalPlaces),
    newnumber = Math.round(rnum * factor) / factor,
    mydecimalvalue = parseFloat(newnumber); 
```

结果是`5.53`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T17:02:56.187

将数字转换为字符串并使用它？

这是我尝试使用 Math.round 或使用 Math.ceil 模拟最接近的舍入但失败后的最后手段。当乘以 100 时，某些数字（例如 17.525）会略小于其值的 100 倍（1752.5），而其他数字（例如 17.545）将略大于其值的 100 倍（1754.5）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-28T13:04:35.093

使用[Intl.NumberFormat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat)`minimumFractionDigits`并在选项集中设置`maximumFractionDigits`为相同的数字（要显示的位数）。

```
const formatter = [0, 1, 2, 3, 4, 5].map(
    (decimals) =>
        new Intl.NumberFormat('en-US', {
            minimumFractionDigits: decimals,
            maximumFractionDigits: decimals,
        }),
);

console.log(formatter[2].format(17.525)); // 17.53
console.log(formatter[2].format(5.525)); // 5.53
console.log(formatter[2].format(1.005)); // 1.01
console.log(formatter[2].format(8.635)); // 8.64
console.log(formatter[2].format(8.575)); // 8.58
console.log(formatter[2].format(35.855)); // 35.86
console.log(formatter[2].format(859.385)); // 589.39
console.log(formatter[2].format(859.3844)); // 589.38
console.log(formatter[2].format(.004)); // 0.00
console.log(formatter[2].format(0.0000001)); // 0.00

// keep in mind that this will not be formatted as expected, as the value that
// you pass is actually 0.07499999999998863\. 
console.log(formatter[2].format(239.575 - 239.5)); // 0.07
console.log(formatter[2].format(0.07499999999998863)); // 0.07
```

# firefox - chrome扩展中是否有firefox AddonInstall的等效项？

> ID：10768086
> 
> 赞同：0
> 
> 时间：2012-05-26T16:44:24.657
> 
> 标签：firefox, google-chrome, browser, google-chrome-extension, firefox-addon

在 Firefox中[，此代码](https://developer.mozilla.org/en/Addons/Add-on_Manager)可以安装新插件：

```
Components.utils.import("resource://gre/modules/AddonManager.jsm");  

AddonManager.getInstallForURL("http://www.foo.com/test.xpi", function(aInstall) {  
  // aInstall is an instance of {{AMInterface("AddonInstall")}}  
  aInstall.install();  
}, "application/x-xpinstall"); 
```

我将它用于自定义更新程序并且效果很好。现在我想知道**Chrome 扩展是否有类似的东西？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T22:00:35.307

如果您查看[`chrome.management`API](http://code.google.com/chrome/extensions/management.html) - 它具有各种扩展操作功能，但扩展安装除外。这绝对是故意的，Chrome 开发人员不想允许编写“自定义更新程序”（可能很容易被滥用）。

只有一个有限的解决方案来安装扩展[`chrome.webstore.install()`](http://code.google.com/chrome/extensions/webstore.html)- 您获得与任何网站相同的“服务”。您必须`<link>`像这样向背景页面添加标签：

```
<link rel="chrome-webstore-item" href="https://chrome.google.com/webstore/detail/..." /> 
```

然后您可以拨打电话`chrome.webstore.install()`，然后会向用户显示确认提示。无法安装 Web Store 中不存在的扩展，静默安装也是如此。

# heroku - 使用 Play 2 框架在 Heroku 中进行 Akka 调度

> ID：10768092
> 
> 赞同：2
> 
> 时间：2012-05-26T16:45:23.950
> 
> 标签：heroku, playframework, playframework-2.0, akka

我无法让 Akka 调度方法在 Heroku 中正常工作。它在本地运行良好，并将“心跳”打印到日志中。

这是有问题的文件：[https](https://github.com/magnusart/actor-test/blob/master/app/Global.scala) ://github.com/magnusart/actor-test/blob/master/app/Global.scala和下面的片段。

```
override def onStart(app: Application) {
    Logger.debug("Starting application")
    Akka.system(app).scheduler.schedule(2 seconds, 10 seconds) {
      Logger.debug("Heartbeat")
    }
  } 
```

完整的应用程序在这里（为此目的而隔离，也在 actor-test.herokuapp.com 上）。 [https://github.com/magnusart/actor-test](https://github.com/magnusart/actor-test)

启动后发生的事情是我`Starting application`在日志中看到，然后我看不到任何进一步的东西：

```
2012-05-26T16:29:40+00:00 heroku[web.1]: Starting process with command `target/start -Dhttp.port=43943 -Xmx384m -Xss512k -XX:+UseCompressedOops`
2012-05-26T16:29:41+00:00 app[web.1]: Play server process ID is 3
2012-05-26T16:29:42+00:00 app[web.1]: [debug] application - Starting application
2012-05-26T16:29:42+00:00 app[web.1]: [info] play - Starting application default Akka system.
2012-05-26T16:29:42+00:00 app[web.1]: [info] play - Application started (Prod)
2012-05-26T16:29:42+00:00 app[web.1]: [info] play - Listening for HTTP on port 43943... 
```

所以预定的演员实际上似乎并没有开始（它当然在本地开始）。我在 Heroku Cedar 上。我感谢任何关于为什么这不起作用的提示，我错过了什么？

BR 马格努斯·安德森

* * *

**更新** 根据我的发现，这似乎是 Play 2 中的一个错误（我正在运行 2.0.1 版），并且与 Heroku 无关。我已经用相关信息更新了 Play 2 Lighthouse 门票。门票可以在这里找到：[https ://play.lighthouseapp.com/projects/82401-play-20/tickets/448-play-dist-ignores-loggerxml#ticket-448-5](https://play.lighthouseapp.com/projects/82401-play-20/tickets/448-play-dist-ignores-loggerxml#ticket-448-5)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T05:48:54.957

问题似乎来自您的记录器设置，因为在您的 Heartbeat 中，您打印了一条带有“调试”级别的消息。AFAIK，Heroku 以“生产”模式（=“播放开始”）运行您的 Play 应用程序，即日志级别设置为“信息”，因此调试消息永远不会打印在 Heroku 上。

# c# - 使用 C# WinForms 应用程序访问另一个应用程序的元素

> ID：10768093
> 
> 赞同：4
> 
> 时间：2012-05-26T16:45:24.287
> 
> 标签：c#, winforms, handle

我希望能够在另一个应用程序中执行以下操作：

*   更改选项卡
*   从 TextBox 中复制文本
*   点击按钮
*   在 TextBox 中输入文本
*   选择 DropDownList 元素

现在我正在使用单独的方法，例如：

*   mouse_event() 更改鼠标坐标并单击按钮
*   另一个 mouse_event（LeftMouseClick 后跟 RightMouseClick）复制文本框中的文本
*   Clipboard.GetText(System.Windows.Forms.TextDataFormat.Text) 复制剪贴板中的内容
*   SendInput（对于每个键） - 将文本输入到 TextBox

这种方法的缺点是：

*   （不重要）PC 变得无法使用（脚本运行时您无法工作）
*   我必须知道应用程序中每个元素的确切像素（读取 - 位置/坐标）
*   执行时间慢（每个键必须单独输入）

我期待创建一个可以单击文本框/按钮/列表*而不需要*这些元素的精确坐标的应用程序。

C# WinForms 可以完成这样的任务吗？我目前的方法有效，但它有缺陷。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:51:48.757

阅读有关[Mutex](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)的信息。如果您计划扩展能力，请阅读网络通信（例如，TCP 协议。[TcpListner](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.aspx)和[TcpClient](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:52:06.710

有一个完整的框架可以做这种事情，它被称为[UI 自动化框架](http://msdn.microsoft.com/en-us/library/aa348551)

[这里有一些](http://msdn.microsoft.com/en-us/library/aa358520.aspx)关于如何使用它的例子。
您还可以将此技术应用于通用窗口，使用[UI Spy](http://msdn.microsoft.com/en-us/library/ms727247)来确定自动化元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T16:53:11.453

这听起来像是[UI 自动化](http://msdn.microsoft.com/en-us/library/ms747327.aspx)的工作。我只使用它从另一个应用程序获取文本，但它具有按名称激活控件或在没有名称时导航控件树的功能。

您可以使用您使用模式或导航控件树找到的[AutomationElement](http://msdn.microsoft.com/en-us/library/system.windows.automation.automationelement.aspx)获取文本并与控件交互。

# actionscript-3 - as3 使用 Flash Professional cs6 使用 CreateJS 导出 html5

> ID：10768095
> 
> 赞同：0
> 
> 时间：2012-05-26T16:45:37.960
> 
> 标签：actionscript-3, flash, html

嗨，如果这个问题不适合这个表格，我很抱歉。请不要给我负分。只需提出建议，我将删除该帖子。如果没问题，我稍后会删除这些顶行。

我正在使用 cs6 并使用 CreateJS 扩展导出到 html5。除非您进入 java 文件并对其进行调整，否则动作脚本似乎将无法工作。

**我的问题是，有没有人找到任何关于如何使用 CreateJS 调整动作脚本以在 HTML5 导出文件中工作的精彩教程？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T20:37:26.280

用于 CreateJS 的 Toolkit 忽略 ActionScript。您可以使用以下语法使用一些 JavaScript：

```
/* JS
this.gotoAndPlay("label");
*/ 
```

对于以后的问题，我推荐[http://community.createjs.com](http://community.createjs.com)，它是主动监控的。干杯，

# css - 修复了 div 内的非滚动页脚？

> ID：10768098
> 
> 赞同：6
> 
> 时间：2012-05-26T16:46:10.423
> 
> 标签：css, position, positioning, css-position

我在页面中心制作了一个小 div，它有一个固定的页脚，但 div 是可滚动的。
在我看来，有两种方法可以做到：

1.  使用`position:fixed`：固定位置实际上相对于浏览器窗口有效，但我想要相对于我的小 div 的位置
2.  使用`position:absolute`：使用`bottom:0;`我最初解决了这个问题，但页脚滚动了 div 文本。

**HTML**：

```
<div id="wrapper">
    <div id="box">
        <div id="header">
            <h1>Heading</h1>
        </div>
        <div id="content">
           Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text Some text 
        </div>
        <div id="footer">
            <p>Fooooooooooooooooooooooooooter</p>            
        </div>
    </div>
</div>​ 
```

**CSS**：

```
#wrapper{
    width:600px;
    height:500px;    
    border:thin solid #c00;
}
#box {
    width:400px;
    height:300px;
    margin:100px auto;            
    border:medium dashed #c00;
    position:relative;    
    overflow:auto;
}
#content {
    background-color:rgba(0,0,208,0.1);   
}
#footer {
    position:absolute;
    bottom:0px;
    width:100%;
    height:50px;
    background-color:rgba(0,0,0,0.8);
    color:#fff;
}​ 
```

看：[JSfiddle](http://jsfiddle.net/knoxxs/6W5uq/19/)

如何使此 div 的页脚固定？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-26T16:56:52.650

解决方案：在您的外部`#wrapper`创建另一个包装器`#box`- 请参阅[http://jsfiddle.net/thebabydino/6W5uq/30/](http://jsfiddle.net/thebabydino/6W5uq/30/)

你设计你的包装盒：

```
.box-wrap {
    width:400px;
    height:300px;
    margin:100px auto;  
    position:relative;
} 
```

...你取出`width`, `margin`s`position:relative`和`#box`:

```
#box {
    height:300px;
    margin:0;
    border:medium dashed #c00;    
    overflow:auto;
} 
```

...并且您在定位 时将`border`s考虑在内。`#box``#footer`

还有一件事：`position: fixed`不是相对于父母，而是相对于浏览器窗口，所以在这种情况下它不是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T17:01:25.223

您需要进行某些修改，而不是使用#footer。尝试以下操作：

在 #footer 添加 margin-top:10px; 而不是位置：绝对；底部：0px；

将此 margin-top 定义为您希望页脚低于“一些文本”div 的高度。发生这种情况是因为页脚被设置为 div 的底部，但是由于有更多的文本要出现并且溢出打开，它会粘在 div 高度的底部而不是内容的底部

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T16:57:55.177

```
<div id="wrapper">
    <div id='outer_box'>
        <div id="box">
            <div id="header">
                <h1>Heading</h1>
            </div>
            <div id="content">
               {text}
            </div>
        </div>
        <div id="footer">
            <p>Fooooooooooooooooooooooooooter</p>            
        </div>
    </div>
</div>​ 
```

然后为元素添加一些样式，如此处所述：http: [//jsfiddle.net/6W5uq/29/](http://jsfiddle.net/6W5uq/29/)

基本上，您使页脚与outer_box 的底部对齐。我为内容添加了边距，因此向下滚动时您仍然可以看到所有内容，并为页脚添加了边距，以便您可以完全使用滚动条。

# android - Android在x角度上绘制固定值

> ID：10768100
> 
> 赞同：5
> 
> 时间：2012-05-26T16:46:12.157
> 
> 标签：android, androidplot

是否可以创建具有固定 x 和 y 值的图表？我的 x 值类似于 60、90、120、180、250、375、500、750、1000，但 androidplot 根据值之间的相等距离​​创建 9 个不同的值。

```
Number[] timestamps = {60, 90, 120, 180, 250, 375, 500, 750, 1000}; 
```

我正在使用 mySimpleXYPlot.setDomainStep(XYStepMode.SUBDIVIDE, 9); 我想解决方案是围绕这个命令，但我不知道该怎么做。

![在此处输入图像描述](../Images/26248e1ce8a6fbb3d0c0e36b5114e458.png)

完整代码：

```
mySimpleXYPlot = (XYPlot) findViewById(R.id.mySimpleXYPlot);
         Number[] numSightings = {70, 63, 56, 49, 43, 37, 32, 27, 23};

         Number[] timestamps = {
            60, 90, 120, 180, 250, 375, 500, 750, 1000 

         };

         // create our series from our array of nums:
         XYSeries series2 = new SimpleXYSeries(
                 Arrays.asList(timestamps),
                 Arrays.asList(numSightings),
                 "USA");

         mySimpleXYPlot.getGraphWidget().getGridBackgroundPaint().setColor(Color.WHITE);
         mySimpleXYPlot.getGraphWidget().getGridLinePaint().setColor(Color.BLACK);
         mySimpleXYPlot.getGraphWidget().getGridLinePaint().setPathEffect(new DashPathEffect(new float[]{1,1}, 1));
         mySimpleXYPlot.getGraphWidget().getDomainOriginLinePaint().setColor(Color.BLACK);
         mySimpleXYPlot.getGraphWidget().getRangeOriginLinePaint().setColor(Color.BLACK);

         mySimpleXYPlot.setBorderStyle(Plot.BorderStyle.SQUARE, null, null);
         mySimpleXYPlot.getBorderPaint().setStrokeWidth(1);
         mySimpleXYPlot.getBorderPaint().setAntiAlias(false);
         mySimpleXYPlot.getBorderPaint().setColor(Color.WHITE);

         // Create a formatter to use for drawing a series using LineAndPointRenderer:
         LineAndPointFormatter series1Format = new LineAndPointFormatter(
                 Color.rgb(0, 100, 0),                   // line color
                 Color.rgb(0, 100, 0),                   // point color
                 Color.rgb(100, 200, 0));                // fill color

         // setup our line fill paint to be a slightly transparent gradient:
         Paint lineFill = new Paint();
         lineFill.setAlpha(200);
         lineFill.setShader(new LinearGradient(0, 0, 0, 250, Color.WHITE, Color.GREEN, Shader.TileMode.MIRROR));

         LineAndPointFormatter formatter  = new LineAndPointFormatter(Color.rgb(0, 0,0), Color.BLUE, Color.RED);
         formatter.setFillPaint(lineFill);
         mySimpleXYPlot.getGraphWidget().setPaddingRight(2);
         mySimpleXYPlot.addSeries(series2, formatter);

         // draw a domain tick for each year:
         mySimpleXYPlot.setDomainStep(XYStepMode.SUBDIVIDE, 9);
         mySimpleXYPlot.setRangeBoundaries(-20,100, BoundaryMode.FIXED);

         // customize our domain/range labels
         mySimpleXYPlot.setDomainLabel("Frequency (Hz)");
         mySimpleXYPlot.setRangeLabel("Loud pressure (dB)");
         mySimpleXYPlot.getLegendWidget().setVisible(false);

         // get rid of decimal points in our range labels:
         mySimpleXYPlot.setRangeValueFormat(new DecimalFormat("0"));

         //mySimpleXYPlot.setDomainValueFormat(new MyDateFormat());

         // by default, AndroidPlot displays developer guides to aid in laying out your plot.
         // To get rid of them call disableAllMarkup():
         mySimpleXYPlot.disableAllMarkup(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T12:31:37.400

`XYStepType.INCREMENT_BY_VALUE`

此模式为原点上方和下方的每个值的倍数创建一个刻度。让我们将 Quick Start 示例修改如下：

`mySimpleXYPlot.setDomainStep(XYStepMode.INCREMENT_BY_VAL, 1);`

这告诉 XYPlot 为每个可见域值 (x) 绘制一个刻度，其中 x 减去 domainOrigin 的模数为零，或者更简单地说，从 domainOrigin 开始在每个增量 1 处绘制一个刻度。现在，我们的情节现在看起来像这样：

![在此处输入图像描述](../Images/8eb29a8eb66e9430cafdc88a3e0d7728.png)

来自[androidplot 参考](http://androidplot.com/wiki/XYPlot_Axis_Value_Labels#XYStepType.INCREMENT_BY_VALUE)

# jquery - Rails 应用程序中的日历

> ID：10768104
> 
> 赞同：0
> 
> 时间：2012-05-26T16:46:42.217
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3

我正在努力在我的 rails 3.2 应用程序中实现一个日历。我发现这个很棒的 railscast 解释了一个完全符合我需要的插件。但是，我需要从多个模型中提取数据，而不仅仅是一个模型。任何人都知道解决方案吗？

即 - 我有单独的生日、周年纪念日和假期表，并希望将它们全部显示在同一个日历上...... railscast 只处理文章模型......

谢谢！

[http://railscasts.com/episodes/213-calendars](http://railscasts.com/episodes/213-calendars)

[https://github.com/watu/table_builder](https://github.com/watu/table_builder)

用户/show.html.erb

```
<div id="calendar">
    <h2 id="month">
    <%= link_to "<", :month => (@date.beginning_of_month-1).strftime("%Y-%m") %>
    <%=h @date.strftime("%B %Y") %>
    <%= link_to ">", :month => (@date.end_of_month+1).strftime("%Y-%m") %>
  </h2>
                <%= calendar_for @friends, :year => @date.year, :month => @date.month do |calendar| %>
                 <%= calendar.head('mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun') %>
                  <%= calendar.day(:day_method => :dob) do |date, friends| %>
                   <%= date.day %>
                    <ul>
                        <% friends.each do |friend| %>
                        <li> <%= h(friend.name) %><%= "\'s birthday"%></li>
                        <% %>
                     <% end %>
                    </ul>
                <% end %>
            <% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T17:55:11.517

日历表只是构建了一个数组（也就是说，来自活动记录查询的结果集）。如果您需要它来处理不同的模型，您只需执行以下操作：

```
def calendar_action
  #assumes a scope of this_month on each model
  @events = []
  @events << Birthday.this_month
  @events << Anniversary.this_month
  @events << Holiday.this_month
end 
```

当然，听起来生日、纪念日和假期并没有什么不同，为什么不将它们重构为具有事件类别关联的事件模型呢？无论如何，您如何实施取决于您，只是一个建议！

# linux-kernel - Linux-PAM 与内核的关系

> ID：10768111
> 
> 赞同：1
> 
> 时间：2012-05-26T16:48:24.563
> 
> 标签：linux-kernel, relation, pam

Linux-PAM 和内核有什么关系？Linux-PAM 是内核的一部分吗？

当我使用`sudo`,`tty`时，这种身份验证是否在内核空间中完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T23:04:13.440

PAM 完全在用户空间中。它是一组库，供需要验证凭据的程序使用。

例如，`ldd /usr/bin/sudo`在我的机器上显示

```
    linux-vdso.so.1 => (0x00007fff30fff000)
    libutil.so.1 => /lib/x86_64-linux-gnu/libutil.so.1 (0x00007f5923fd4000)
    libpam.so.0 => /lib/x86_64-linux-gnu/libpam.so.0 (0x00007f5923dc7000)
    libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f5923bc2000)
    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f592382d000)
    /lib64/ld-linux-x86-64.so.2 (0x00007f59241fd000)

```

使用 PAM 库的二进制文件需要以 root 身份运行（例如，库代码可能需要访问 /etc/shadow）。

# django - 如何在 Heroku for Django 应用程序中删除单个表

> ID：10768112
> 
> 赞同：2
> 
> 时间：2012-05-26T16:48:37.613
> 
> 标签：django, heroku

我看到了如何在 Django 中将整个数据库放到 heroku 中（[在 Heroku 上销毁 Postgres DB](https://stackoverflow.com/questions/7622633/destroying-a-postgres-db-on-heroku-for-django)）。但是，我只想删除几个表（基本上是在“python manage.py sqlclear appname”中执行 sql 命令）。我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T19:19:26.560

嘿，这很简单。您应该只创建一个可以处理原始 SQL 的视图函数。我昨天才这样做，试图解决 postgres 唯一索引同步问题。

Views.py：将其映射到某个 URL，然后在浏览器中访问该 url，该函数将执行。

```
from django.db import connection, transaction

def dropTable(request):

 cursor = connection.cursor()

 cursor.execute(“DROP TABLE WHATEVER”) //custom raw SQL goes here

 success = simplejson.dumps({‘success’:’success’,}) //I do this as a success message

 return HttpResponse(success, mimetype=’application/json’) //you'll need an import or two for the json stuff to work 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-05T08:35:56.493

当我遇到这篇文章时，我遇到了同样的问题，我认为有一种更简单的方法可以解决这个问题。Heroku 推出了[PostgreSQL Studio](https://devcenter.heroku.com/articles/pgstudio)，这是一个基于 Web 的 PSQL UI，允许您查看 DB 和 PSQL 命令。

连接到数据库后，只需打开[工作表](https://devcenter.heroku.com/articles/pgstudio#writing-sql-queries)并运行

```
TRUNCATE TABLE table_name; 
```

# javascript - JS - 为单元格分配隐藏值

> ID：10768118
> 
> 赞同：0
> 
> 时间：2012-05-26T16:49:52.483
> 
> 标签：javascript, cell, tablecell

有没有办法为表格单元格分配隐藏值？我想将某个值、整数或字符串分配给表格单元格，因此我可以使用 id 在 javascript 中附加和编辑该值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:53:08.367

您可以将一个名为“data-”的属性附加到任何 DOM 节点。使用标准属性访问和更改函数来读取和写入当然是字符串的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:53:24.010

试试 HTML5 的数据 API。您可以在单元格上设置属性：

```
<td id="cell1" data-value="1">One</td><td id="cell2" data-value="2">Two</td> 
```

然后你可以使用：

```
document.getElementById('cell1').dataset.value; 
```

# android - 从 SQLite 数据库获取数据到 String Android

> ID：10768119
> 
> 赞同：2
> 
> 时间：2012-05-26T16:49:56.163
> 
> 标签：android, sqlite, cursor

我正在尝试从我的数据库中获取信息并将其放入字符串中以在屏幕上打印。我想我可以使用下面的代码来做到这一点，但它给出了一些关于光标的信息，而不是光标内的信息。

```
datasource = new DataBaseHelper(this);
datasource.open();
Cursor c = datasource.getAllGoals();
startManagingCursor(c);
String g = c.toString();
goal.setText(g);
datasource.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:53:13.540

游标可以被认为是指向一些基础数据的指针。在游标对象上运行`c.toString()`将打印`Cursor`其字符串表示的默认类的实现（一个符号字符`@`和对象哈希码的无符号十六进制表示），这不是您想要的。

要检索基础数据库数据，您将需要调用`c.getString(columnIndex)`( [source](http://developer.android.com/reference/android/database/Cursor.html#getString%28int%29) )，或者该特定列索引所需的任何列数据类型。

[这是一个从源代码修改](http://www.vogella.com/articles/AndroidSQLite/article.html)的示例：

假设您创建了一个表

```
private static final String DATABASE_CREATE = 
            "create table comments ( "
            + "_id integer primary key autoincrement, "
            + "comment text not null);"; 
```

并且您的`getAllGoals`函数返回一个光标，该光标指向关于**和** `_id`的数据`comment`。现在您只想显示有关该`comment`列的详细信息。所以你必须运行`c.getString(1)`。假设您的`getAllGoals`函数返回一个仅指向有关`comment`列的数据的游标。现在你必须运行`c.getString(0)`.

我建议您下载提供的示例中的源代码，并了解如何从游标中检索数据。

**编辑：**

```
 public List<Comment> getAllComments() {
        List<Comment> comments = new ArrayList<Comment>();

        Cursor cursor = database.query(MySQLiteHelper.TABLE_COMMENTS,
                allColumns, null, null, null, null, null);

        cursor.moveToFirst();
        while (!cursor.isAfterLast()) {//retrieve data from multiple rows
            Comment comment = cursorToComment(cursor);
            comments.add(comment);
            cursor.moveToNext();
        }
        // Make sure to close the cursor
        cursor.close();
        return comments;
    }

    private Comment cursorToComment(Cursor cursor) {
        Comment comment = new Comment();
        comment.setId(cursor.getLong(0));
        comment.setComment(cursor.getString(1));
        return comment;
    } 
```

[来源](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T17:03:58.810

```
openDataBase();
Cursor c = myDataBase.rawQuery("SELECT * FROM tb_aa_City where City_Name = '"+cityname+"'", null);
if (c.getCount() > 0) {
    c.moveToFirst();
    seqid = c.getString(4);
    System.out.println("In DB..getSequenceID..."+seqid);
    }
    c.close();
    myDataBase.close();
    SQLiteDatabase.releaseMemory(); 
```

# php - 如何使用 php 解析提要的文本

> ID：10768124
> 
> 赞同：0
> 
> 时间：2012-05-26T16:50:28.430
> 
> 标签：php, xml, parsing

使用 Wikipedia API 链接获取一些世界知名字符的基本信息。

示例：（关于[理查德·迈鲍姆](http://en.wikipedia.org/w/api.php?format=xml&action=query&list=search&srsearch=Richard%20Maibaum&srlimit=1)）

这将显示如下 ![理查德·迈鲍姆维基百科](../Images/f3cd32ba99b217b9f231e3e536ddd77c.png)

**现在我的问题**是我想解析 xml 以获得这样的基本信息`<search></search>`来显示它。

这是我愿意使用的代码~感谢[ccKep](https://stackoverflow.com/users/1179287/cckep) ~

```
<?PHP
ini_set("user_agent","Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1");

$url = "http://en.wikipedia.org/w/api.php?format=xml&action=query&list=search&srsearch=Richard Maibaum&srlimit=1";

$xml = simplexml_load_file($url);

$extracts = $xml->xpath("/api/query/search");

echo $extracts["0"];
?> 
```

但它失败并给出空白输出

所以任何帮助〜谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T17:01:34.303

我不确定你的问题是什么，但你可以得到这样的搜索结果。

```
 strip_tags($extracts[0]->p['snippet'])); 
```

# apache2 - 在服务器上的每个页面之前执行的代码片段

> ID：10768138
> 
> 赞同：0
> 
> 时间：2012-05-26T09:52:11.337
> 
> 标签：apache2

我有一个 apache2 服务器，它有一个庞大且不断增长的文件夹结构。

我想在该网站的每个页面的开头执行一组指令。

我如何实现它而不只是在网站中每个文件的开头粘贴这些行？

顺便说一句，我有 apache 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T09:57:14.160

您可以使用说明编写一个 shell 脚本，并在所有页面顶部使用 php shell exec 函数执行它，以便在加载时执行 shell 脚本。或任何其他语言您需要的任何其他功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T09:59:44.390

您可以通过在 php.ini 中设置 'auto_prepend_file' 和 'auto_append_file' 指令来做到这一点。

# java - 验证点是否在 3D 空间中的圆锥内

> ID：10768142
> 
> 赞同：7
> 
> 时间：2012-05-26T16:52:45.417
> 
> 标签：java, android, opengl-es, formula

考虑：

*   `X(x1,y1,z1)`我需要验证它是否在圆锥内。
*   `M(x2,y2,z2)`圆锥的顶点。（圆锥的顶点）
*   `N(x3,y3,z3)`圆锥底部中间的点。

我发现如果一个点 X 在圆锥上，它需要验证这个方程：

```
cos(alfa) * ||X-M|| * ||N|| = dot(X-M,N) 
```

其中 dot 是 2 个向量的标量积， alfa 是这 2 个向量之间的角度。

根据公式，我计算得出：

```
X-M = (x1-x2,y1-y2,z1-z2) 
```

所以，

```
cos(alfa)
  * Math.sqrt((x1-x2)^2+(y1-y2)^2+(z1-z2)^2)
  * Math.sqrt(x3^2 + y3^2+z3^2)
= x3(x1-x2) + y3(y1-y2) + z3(z1-z2) 
```

不幸的是，上述计算似乎给了我错误的结果。我究竟做错了什么？

另外我怀疑要检查是否`X`在圆锥内，我必须输入`<=`而不是`=`公式。它是否正确？

它的用途是：我开发了一个游戏，当物体在其“视野”中时，机枪必须开始射击。这个视图将是一个圆锥体。锥体的顶点将在机枪中，锥体的底部将在前方某个已知距离处。任何进入这个锥体的物体，机枪都会射击它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-27T08:51:58.863

我完全同意蒂姆的观点：我们需要锥体的“角度”（孔径）来得到答案。

那么让我们做一些编码吧！*我将使用[这里](http://en.wikipedia.org/wiki/Cone_%28geometry%29#Further_terminology)的一些术语。*

结果功能：

```
/**
 * @param x coordinates of point to be tested 
 * @param t coordinates of apex point of cone
 * @param b coordinates of center of basement circle
 * @param aperture in radians
 */
static public boolean isLyingInCone(float[] x, float[] t, float[] b, 
                                    float aperture){

    // This is for our convenience
    float halfAperture = aperture/2.f;

    // Vector pointing to X point from apex
    float[] apexToXVect = dif(t,x);

    // Vector pointing from apex to circle-center point.
    float[] axisVect = dif(t,b);

    // X is lying in cone only if it's lying in 
    // infinite version of its cone -- that is, 
    // not limited by "round basement".
    // We'll use dotProd() to 
    // determine angle between apexToXVect and axis.
    boolean isInInfiniteCone = dotProd(apexToXVect,axisVect)
                               /magn(apexToXVect)/magn(axisVect)
                                 >
                               // We can safely compare cos() of angles 
                               // between vectors instead of bare angles.
                               Math.cos(halfAperture);

    if(!isInInfiniteCone) return false;

    // X is contained in cone only if projection of apexToXVect to axis
    // is shorter than axis. 
    // We'll use dotProd() to figure projection length.
    boolean isUnderRoundCap = dotProd(apexToXVect,axisVect)
                              /magn(axisVect)
                                <
                              magn(axisVect);
    return isUnderRoundCap;
} 
```

下面是我对基本函数的快速实现，上层代码需要这些函数来操作向量。

```
static public float dotProd(float[] a, float[] b){
    return a[0]*b[0]+a[1]*b[1]+a[2]*b[2];
}

static public float[] dif(float[] a, float[] b){
    return (new float[]{
            a[0]-b[0],
            a[1]-b[1],
            a[2]-b[2]
    });
}

static public float magn(float[] a){
    return (float) (Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]));
} 
```

玩得开心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T17:15:21.563

您需要检查差异向量 (XM) 和中心向量 (N) 之间的角度是否小于或等于圆锥的角度（您没有在问题中指定）。这将告诉您位置矢量 (X) 是否在无限锥内，然后您还可以检查距离（如果需要）。所以，

```
float theta = PI/6; //half angle of cone
if (acos(dot(X-M, N)/(norm(X-M)*norm(N)) <= theta) doSomething(); 
```

为了性能，您还可以对 N 进行归一化（将其转换为长度为 1 的向量）并单独存储长度。然后你可以比较`norm(X-M)`长度，给你一个圆底锥体（我确定它的名字存在，但我不知道）。

编辑：忘记了反余弦，点积等于`norm(U)*norm(V)*cos(Angle)`所以我们必须反转该操作来比较角度。在这种情况下，acos 应该没问题，因为我们希望正角和负角相等，但要注意这一点。

编辑：弧度。

# python - setup.py ：创建与 ant 脚本一样的命令？

> ID：10768145
> 
> 赞同：2
> 
> 时间：2012-05-26T16:53:04.523
> 
> 标签：python, ant, packaging, distutils, setup.py

我在 python 下有一个项目，并且有一个 setup.py 脚本，可以为每个 realease 构建我的 egg 和 .exe 文件。我习惯使用 ant 脚本，在这里我可以轻松定义目标。

我可能会错过一些东西，但我找不到任何解释如何使用 distutils 创建此类命令的文档。（好吧，我实际上发现[了这一点](http://docs.python.org/distutils/extending.html#integrating-new-commands)，但这作为文档很短：s）

以下是我想要自动化的一些示例：

*   为各种平台（exe、pypi、linux、source）创建包
*   构建文档（pdf、html、rst）
*   压缩我的样本，将它们移动到远处
*   将新包上传到 pypi
*   运行测试
*   . . .

但最重要的是，我希望能够只用一个命令来完成，就像我使用 ant build 一样。

那么你通常如何用你的 python 项目来完成这些任务呢？虽然我认为在这里添加我的 setup.py 并不重要，但如果需要，我可以这样做。

非常感谢你 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T12:37:52.630

你看过[Ant Python 任务](http://code.google.com/p/pyanttasks/)吗？

> 这些 Ant 扩展添加了一些任务来支持 Python 构建。特别是，支持 Python 编译、单元测试执行、pydoc 生成和执行 Python 脚本。

# string - Delphi 应用程序泄漏 AnsiStrings

> ID：10768152
> 
> 赞同：12
> 
> 时间：2012-05-26T16:53:28.783
> 
> 标签：string, delphi, memory, memory-leaks, dev-c++

根据 FastMM4 的说法，我目前正在开发的 Delphi 程序泄漏了很多字符串。AnsiStrings 准确地说：

![在此处输入图像描述](../Images/84dddafa4a0080947362585b7792ba20.png)

该应用程序 ( [http://sourceforge.net/projects/orwelldevcpp/](http://sourceforge.net/projects/orwelldevcpp/) ) 用于泄漏更多其他数据类型，但 FastMM4 可以报告实例的创建位置，因此我设法解决了这个问题。奇怪的是，FastMM4 根本不报告这些泄漏的位置。

**编辑：毕竟它似乎确实如此，请参阅修复的答案。无论如何，问题仍然存在：我到底是怎么泄露这些东西的？**

所以，嗯，不幸的是，我不知道要寻找什么。我的意思是，如果这些东西超出范围，它们应该被自动释放（即使它们在堆上）？

我确实设法通过随机评论并查看计数会发生什么来追踪一些泄漏。这是一个例子：

```
// simply passing it a constant creates a leak...
MainForm.UpdateSplash('Creating extra dialogs...');

procedure TMainForm.UpdateSplash(const text : AnsiString);
begin
  if not devData.NoSplashScreen then // even if this branch is NOT taken
    SplashForm.Statusbar.SimpleText := 'blablabla' + text;
end;

// And even if the function call itself is placed within a NOT taken branch! 
```

这是另一个泄漏示例：

```
// Passing this constants produces leaks...
procedure TCodeInsList.AddItemByValues(const a, b, c: AnsiString;...);
var
  assembleditem : PCodeIns;
begin
   new(assembleditem);
   assembleditem^.Caption:=a;
   assembleditem^.Line:=b;
   assembleditem^.Desc:=c;
   ...
   fList.Add(assembleditem);
end;

// ... even when calling this on WM_DESTROY!
destructor TCodeInsList.Destroy;
var
  I: integer;
begin
  for I := 0 to fList.Count - 1 do
    Dispose(fList[I]);
  fList.Free;
  inherited Destroy;
end;

// produces leaks!? 
```

这里有很多字符串泄漏问题，但没有一个真正阐明**应该寻找什么模式**。谷歌也不提供。

**编辑：所以，我必须寻找传递的常量。但为什么？**

**所以嗯，有什么想法吗？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-27T01:37:17.057

您不需要显式分配字符串。除了使用引用计数进行修改外，对象或记录的字符串字段也可能泄漏。例如，

```
type
  PRecord = ^TRecord;
  TRecord = record
    S: string;
  end;

procedure TForm1.Button4Click(Sender: TObject);
var
  r: PRecord;
begin
  GetMem(r, SizeOf(r^));
  Initialize(r^);
  r.S := ' ';
  FreeMem(r); 
```

在上面的例子中，由于记录本身的内存被释放，FastMM 将只报告泄漏的字符串。

在任何情况下，FastMM 没有在对话框中显示堆栈跟踪并不意味着它缺少该信息。确保有`FullDebugMode`,`LogMemoryLeakDetailToFile`并且`LogErrorsToFile`在“FastMM4Options.inc”中定义。然后在可执行文件的目录中查找“[ExecutableName]_MemoryManager_EventLog.txt”文件。

对于上面的示例，FastMM 生成以下文件：

```
--------------------------------2012/5/27 4:34:46-------- ----------------------
内存块已泄漏。尺寸为：12

分配此块时的堆栈跟踪（返回地址）：
40305E
404B5D
404AF0
45C47B
43D726
42B0C3
42B1C1
43D21E
76C4702C [GetWindowLongW]
77AE3CC3 [RtlImageNtHeader 处的未知函数]

该块当前用于类对象：未知

分配编号为：484

从指针地址 7EF8DEF8 开始的 256 字节的当前内存转储：
01 00 00 ...
...

```

现在您可以运行应用程序，*暂停*它，然后搜索地址。对于上述日志和测试应用程序，地址解析为：

```
分配此块时的堆栈跟踪（返回地址）：
40305E -> _GetMem
404B5D -> _NewAnsiString
404AF0 -> _LStrAsg
45C47B -> TForm1.Button4Click（在 FreeMem 行）
43D726 -> TControl.单击
...

```

**编辑：** 不是手动查找地址，而是通过链接器选项生成详细的地图文件，FastMM 会这样做（感谢 Mason 的评论）。

* * *

您对问题的编辑反映了与上述示例中的泄漏非常相似的泄漏。如果 'fList' 是一个常规的`TList`，它只保存指针并且不知道这些指针指向什么。因此，当您释放指针时，只会释放为指针本身分配的内存，而不是记录的字段。所以泄漏与传递给函数的常量无关，但就像下面的模式：

```
var
  assembleditem: PCodeIns;
  p: Pointer;
begin
  new(assembleditem);
  assembleditem^.Caption:='a';
  ..    
  p := assembleditem;
  Dispose(p); 
```

对于要处理的记录，代码应该将指针类型转换为它的类型：

```
Dispose(PCodeIns(p)); 
```

所以你的 'TCodeInsList.Destroy' 应该是：

```
destructor TCodeInsList.Destroy;
var
  I: integer;
begin
  for I := 0 to fList.Count - 1 do
    Dispose(PCodeIns(fList[I]));
  fList.Free;
  inherited Destroy;
end; 
```

最后，您正在寻找的模式似乎是在寻找代码意图释放具有字符串字段的记录（不太可能的对象）的地方。寻找`Dispose`，不太可能`FreeMem`，甚至不太可能`FreeInstance`释放 FastMM 在分配的内存泄漏时显示的对象/记录的内存可能会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T17:03:46.410

你是对的，应该自动清理字符串。不过，我已经看到了几种解决方法。

第一个是如果你直接使用字符串数据结构做的事情会破坏引用计数。这是最有可能的，与您泄漏的字符串数量有关。

另一种是调用 Halt 并将字符串引用留在堆栈上。但是您不会在堆栈上留下 40,000 个字符串引用，因此我会寻找传递字符串然后调整其引用计数的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T16:50:10.360

简而言之，Delphi 内置字符串类型是引用计数的。内存分配和处置方法不负责更新引用计数，因此编译器不知道记录中的字符串实际上可以被释放。

不鼓励使用引用计数字符串类型定义记录。我以前也有同样的困惑。如果您查看 Delphi 库的源代码。你会发现很多记录的 PChar 不是字符串。

[有些人讨论记录](https://stackoverflow.com/questions/783825/why-most-delphi-examples-use-fillchar-to-initialize-records)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-26T06:07:44.733

泄漏字符串的最常见方法是拥有一个包含字符串和指向该记录的指针的记录。如果您只是对该指针执行 Dispose()，编译器将只释放指针，而不是下面记录中的所有内容。始终确保您的处置代码告诉编译器您正在处置什么。

例如，假设我在一个 TTreeView 中放入`PMyRecord = ^MyRecord`了 Node.Data。如果最后您循环遍历所有节点并简单地执行，`Dispose(Node.Data)`那么 MyRecord 中的任何字符串都将无法正确处理。

但是如果你通过调用明确地告诉编译器指针的底层类型是什么来处理你的指针`Dispose(PMyRecord(Node.Data))`，那么就不会有内存泄漏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-02T10:28:40.827

我发现即使没有内存分配/指针操作，字符串（作为记录中的字段）也可能泄漏。

这听起来很疯狂，但这是真的，至少在 XE3 中是这样。这是示例：

```
TMyRecord = record
x,
y: integer;
s: ansistring;
end;

function GetMyRec: TMyRecord;
begin
....
end;

....
procedure DoSomething;
var
  rec: TMyRecord;
begin
  ...
  rec := GetMyRec; //First call - everything is OK
  ...
  rec := GetMyRec; //Repeated call > Memory Leak of 
                   //Ansistring !!!!
  //To avoid the leak do the following BEFORE a 
  //repeated call: rec.s := unassigned;
end; 
```

# php - 自定义信息框地图 Sql php

> ID：10768157
> 
> 赞同：2
> 
> 时间：2012-05-26T16:53:44.163
> 
> 标签：php, javascript, sql, map

我会很感激我正在尝试创建一个与 php 和 sql 连接的地图的手 hecharais。我的意图是自定义“信息框”，但我找不到解决方案。这是在 .js 中，希望您能帮助我。谢谢你。

```
 var map;

  function initialize() {
    var myOptions = {
      zoom: 15,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('map'),
        myOptions);

    // Try HTML5 geolocation
    if(navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(position)  {
        var pos = new google.maps.LatLng(position.coords.latitude,
                                         position.coords.longitude);

        var marker = new google.maps.Marker({
          map: map,
          position: pos,
          icon:'images/bar.png',
          animation: google.maps.Animation.DROP,
          title: 'Location found using HTML5.'
        });

  var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("http://adricas.org/onferrol/mapa/phpsqlajax_genxml.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var citystate = markers[i].getAttribute("citystate");
      var phone = markers[i].getAttribute("phone");
      var type = markers[i].getAttribute("type");
      var info = markers[i].getAttribute("info");
      var website = markers[i].getAttribute("website");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name +"</b> <br/>" 
      + info + 
      "</br> <a href="+website+">Zoom out</a>" ;

      var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      bindInfoWindow(marker, map, infoWindow, html);
    }
  });           

        map.setCenter(pos);
      }, function() {
        handleNoGeolocation(true);
      });
    } else {
      // Browser doesn't support Geolocation
      handleNoGeolocation(false);
    }
  }

  function handleNoGeolocation(errorFlag) {
    if (errorFlag) {
      var content = 'Error: The Geolocation service failed.';
    } else {
      var content = 'Error: Your browser doesn\'t support geolocation.';
    }

    var options = {
      map: map,
      position: new google.maps.LatLng(60, 105),
      content: content
    };

    var infowindow = new google.maps.InfoWindow(options);
    map.setCenter(options.position);

  } 
```

// 与“其他”数据库列表功能相关的附加功能

```
function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}   

  google.maps.event.addDomListener(window, 'load', initialize); 
```

# jquery - 回调未从 jQuery post 执行

> ID：10768158
> 
> 赞同：7
> 
> 时间：2012-05-26T16:53:51.247
> 
> 标签：jquery, post, callback

我在执行回调函数时遇到问题。

```
$.post("/" + contentId + "/postComment", {
    "postComment": ""
}, function(data) {
    alert('call back');
}); 
```

这个帖子确实发生了。但是，不会调用警报。

这篇文章导致一些`xml`返回。我无法确切地说出它的外观，因为我正在使用**Spring**映射，`application/xml`而`@RequestBody`我只是不知道 Spring 对我返回的内容做了什么。我这样说是为了以防服务器响应的内容会以某种方式影响回调。

***问题是：***

### 我需要做什么才能在我的代码示例中看到该警报？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-26T16:56:59.393

您的代码很好，除了它没有挂钩错误处理程序（我不喜欢的原因之一`$.post`）。我认为 POST 操作一定会导致错误。尝试将其转换为：

```
$.ajax({
  type:    "POST",
  url:     "/"+contentId+"/postComment",
  data:    {"postComment":""},
  success: function(data) {
        alert('call back');
  },
  // vvv---- This is the new bit
  error:   function(jqXHR, textStatus, errorThrown) {
        alert("Error, status = " + textStatus + ", " +
              "error thrown: " + errorThrown
        );
  }
}); 
```

...所以你可以看到错误是什么。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-10-02T12:05:37.343

有一个类似的问题，当您提供字符串作为数据并且服务器返回 JSON 响应时，回调不会触发。为了解决这个问题，只需将数据类型明确指定为 JSON：

```
function update_qty(variant_id, qty){
  $.post('/cart/update.js', "updates["+variant_id+"]="+qty, function(data){
    updateCartDesc(data);
  }, "json");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-03T03:08:51.523

我注意到 ajax 脚本需要有一个内容类型`application/json`而不是`application/javascript`，如果它确实是 JSON。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-15T17:21:28.423

为了可读性，我建议忽略上述正确答案。从 JQuery 1.5（或更高版本，在问题的情况下）使用：

```
$.post("/" + contentId + "/postComment", {
    "postComment": ""
}).always(function() {
    alert('call back');
}); 
```

如 JQuery 文档中所述：[https](https://api.jquery.com/jquery.post/)
: //api.jquery.com/jquery.post/ 从文档中不是很清楚，但是您从 post 请求中获取返回的“jqXHR”对象作为始终、失败和的参数完成的功能。

您可以根据需要将参数扩展到：

```
.always(function(responseArray, request, jqxhr, status, error) {
    alert( jqxhr.responseText );
}); 
```

# bash - IP 地址转换器

> ID：10768160
> 
> 赞同：11
> 
> 时间：2012-05-26T16:54:01.283
> 
> 标签：bash, ip, converter

有IP地址：66.102.13.19，并且从这个地址收到这个地址

```
http://1113984275 
```

但是怎么做？以及如何在 bash 的帮助下做到这一点。比如[这个服务](http://www.csgnetwork.com/ipaddconv.html)可以做，但是算法我不懂。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-26T16:59:49.513

```
ip=66.102.13.19
IFS=. read -r a b c d <<< "$ip"
printf '%s%d\n' "http://" "$((a * 256 ** 3 + b * 256 ** 2 + c * 256 + d))" 
```

顺便说一句，您问题中的数字与 IP 地址不匹配。

要将小数转换为 IP：

```
#!/bin/bash
dec2ip () {
    local ip dec=$@
    for e in {3..0}
    do
        ((octet = dec / (256 ** e) ))
        ((dec -= octet * 256 ** e))
        ip+=$delim$octet
        delim=.
    done
    printf '%s\n' "$ip"
}

dec2ip "$@" 
```

要将 IP 转换为小数：

```
#!/bin/bash
ip2dec () {
    local a b c d ip=$@
    IFS=. read -r a b c d <<< "$ip"
    printf '%d\n' "$((a * 256 ** 3 + b * 256 ** 2 + c * 256 + d))"
}

ip2dec "$@" 
```

演示：

```
$ ./dec2ip 1113984275
66.102.13.19

$ ./ip2dec 66.102.13.19
1113984275 
```

这两个脚本依赖于一些 Bourne 派生的 shell 中不存在的 Bash 功能。以下是要使用的 AWK 版本：

```
#!/usr/bin/awk -f
# dec2ip
BEGIN {
    dec = ARGV[1]
    for (e = 3; e >= 0; e--) {
        octet = int(dec / (256 ^ e))
        dec -= octet * 256 ^ e
        ip = ip delim octet
        delim = "."
    }
    printf("%s\n", ip)
} 
```

和

```
#!/usr/bin/awk -f
# ip2dec
BEGIN {
    ip = ARGV[1]
    split(ip, octets, ".")
    for (i = 1; i <= 4; i++) {
        dec += octets[i] * 256 ** (4 - i)
    }
    printf("%i\n", dec)
} 
```

它们的调用方式与上面的 Bash 脚本相同。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-06-10T08:16:02.803

IP 地址 -> 号码：

```
echo 66.102.13.19 | tr . '\n' | awk '{s = s*256 + $1} END{print s}' 
```

号码 -> IP 地址：

```
(export ip=1113984275; for i in {1..4}; do s='.'$((ip%256))$s && ((ip>>=8)); done; echo ${s:1}) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-09T17:56:32.177

二进制移位总是比乘法或除法快。
使用二进制 AND 比 mod 更快。

```
ip2dec(){ # Convert an IPv4 IP number to its decimal equivalent.
          declare -i a b c d;
          IFS=. read a b c d <<<"$*";
          echo "$(((a<<24)+(b<<16)+(c<<8)+d))";
        }
dec2ip(){ # Convert an IPv4 decimal IP value to an IPv4 IP.
          declare -i a=$((0xff)) b=$1; 
          c="$((b>>24&a)).$((b>>16&a)).$((b>>8&a)).$((b&a))";
          echo "$c";
        }

ip=66.102.13.19
a=$(ip2dec "$ip")
b=$(dec2ip "$a")
echo "$ip DecIP=$a IPv4=$b " 
```

注意：此系统将失败，并显示`0008`.
Bash 认为它是一个八进制数。

为了解决这个问题，每个值都必须使用以下内容进行清理：

```
IsDecInt()(     # Is the value given on $1 a decimal integer (with sign)?
                declare n=$1; set --
                if [[ $n =~ ^([+-]?)((0)|0*([0-9]*))$ ]]; then
                    set -- "${BASH_REMATCH[@]:1}"
                else
                    exit 1
                fi
                echo "$1$3$4";
          )

  a=$(IsDecInt "$a")||{ Echo "Value $a is not an integer" >&2; exit 1; } 
```

对于（非常）旧的 shell：自 2.04 以来的 bash，或 dash 或任何（合理的）shell：

```
ip2dec(){ # Convert an IPv4 IP number to its decimal equivalent.
          local a b c d;
          IFS=. read a b c d <<-_EOF_
$1
_EOF_
          echo "$(((a<<24)+(b<<16)+(c<<8)+d))";
        }

dec2ip(){   # Convert an IPv4 decimal IP value to an IPv4 IP.
            local a=$((~(-1<<8))) b=$1; 
            c="$((b>>24&a)).$((b>>16&a)).$((b>>8&a)).$((b&a))";
            echo "$c";
        }

ip=$1
a=$(ip2dec "$ip")
b=$(dec2ip "$a")
echo "$ip DecIP=$a IPv4=$b " 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-07T17:12:54.317

我的 int 到 ip 转换版本：

`echo 3232235521| awk {'print rshift(and($1, 0xFF000000), 24) "." rshift(and($1, 0x00FF0000), 16) "." rshift(and($1, 0x0000FF00), 8) "." and($1, 0x000000FF) '}`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-07T23:51:18.130

这是我的看法：

```
$ host google.com
google.com has address 216.58.216.142
$ ./ip2d.sh 216.58.216.142
3627735182
$ ./d2ip.sh 3627735182
216.58.216.142 
```

ip2d.sh：

```
#!/bin/bash

IFS=.
set -- $*
echo $(( ($1*256**3) + ($2*256**2) + ($3*256) + ($4) )) 
```

d2ip.sh：

```
#!/bin/bash

IFS=" " read -r a b c d  <<< $(echo  "obase=256 ; $1" |bc)
echo ${a#0}.${b#0}.${c#0}.${d#0} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-08-23T08:49:57.097

bash 的简单 int 到 IP 转换

```
dec2ip ()
{
   local v=$1
   local i1=$((v>>24&255))
   local i2=$((v>>16&255))
   local i3=$((v>>8&255))
   local i4=$((v&255))
   printf '%d.%d.%d.%d\n' $i1 $i2 $i3 $i4
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-11-11T23:18:47.500

我认为有一个更简单的解决方案，它也可以处理任意数量的八位字节，而不引用固定偏移等。

```
echo 66.102.13.19 |
    tr . '\n' |
    while read octet; do
        printf "%.08d" $(echo "obase=2;$octet" | bc)
    done |
    echo $((2#$(cat))) 
```

输出：1113984275

# sql - 如何修改表中的列，添加 CASE 语句

> ID：10768163
> 
> 赞同：1
> 
> 时间：2012-05-26T16:54:16.067
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我想通过添加这样的 CASE 语句来修改表中的列：

```
ALTER TABLE GIAC
alter column President_Eligible varchar(3) as CASE WHEN DATEDIFF(day,Date_Election_President,CURRENT_TIMESTAMP) >= 730 THEN 'NON' ELSE 'OUI' END 
```

但我收到一个错误：

> 消息 156，级别 15，状态 1，第 2 行
> 关键字“CASE”附近的语法不正确。

这是表结构：

```
create table GIAC
(
    Nom_Giac varchar(50) primary key, 
    Raison_sociale varchar(20) not null,
    Ville varchar(20),
    Fax varchar(30),
    Adress varchar(50) not null,
    SiteWeb varchar(40),
    Nom_Prenom_President varchar(50) not null,
    President_Eligible varchar(3) as CASE WHEN DATEDIFF(day,Date_Election_President,CURRENT_TIMESTAMP) >= 730 THEN 'NON' ELSE 'OUI' END,
    Tel_President varchar(30),
    EMAIL_President varchar(30),
    Nom_Prenom_Directeur varchar(50),
    Tel_Directeur varchar(30),
    EMAIL_Directeur varchar(30),
    Nom_Prenom_Contact varchar(50),
    Tel_Contact varchar(30),
    EMAIL_Contact varchar(30),  
    RIB_Fonct varchar(60) unique,
    RIB_Action varchar(60) unique 
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-07T18:36:00.323

老问题，但多年来访问的足够多的人仍然可以帮助给出答案。两步过程。更改表格以添加字段。然后用 case 语句更新。例如

```
alter table mytable add column new_field int;
update mytable  set new_field =
                (case
                when existing_field =1 then 1
                when existing_field =2  then 0
                when existing_field =0  then 0
                else null
                end); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:55:51.217

指定数据类型是无效的，所以它必须是：

```
President_Eligible  as CASE WHEN 1>2 THEN 'NON' ELSE 'OUI' END 
```

代替

```
President_Eligible varchar(3) as CASE WHEN 1>2 THEN 'NON' ELSE 'OUI' END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T10:31:30.803

不幸的是，为了更改计算列，您必须删除并重新创建该列。

# c++ - “需要左值”错误

> ID：10768169
> 
> 赞同：3
> 
> 时间：2012-05-26T16:55:04.943
> 
> 标签：c++

我有以下 C++ 代码，当我编译它时，我得到“需要左值”错误。请指出我哪里出错了。谢谢。

```
#include <iostream.h>
#include <conio.h>
void main()
{
  clrscr();
  char r[5];
  int mark;
  cout<<"Please enter your goddamn marks";
  cin>>mark;
  r=mark>=35?"pass":"fail";
  cout<<"\n"<<r;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T16:58:04.740

问题在这里：

```
r=mark>=35?"pass":"fail"; 
```

您不能将字符串文字分配给`char`数组。你有几个选择：

*   使用`strcpy()`而不是赋值；
*   更改`r`为 type `const char*`；
*   更改`r`为 type `std::string`。

最后一个选项是迄今为止最好的。

# java - 如何声明二维字符串数组列表？

> ID：10768170
> 
> 赞同：24
> 
> 时间：2012-05-26T16:55:27.317
> 
> 标签：java, arrays, arraylist

我想做这样的事情`ArrayList<String<String>> mylist`

我怎样才能创建它？

如何添加到外部和内部列表

以及如何将内部列表转换为简单的数组列表？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-26T16:59:58.327

你可以和

```
List<List<String>> ls2d = new ArrayList<List<String>>();
List<String> x = new ArrayList<String>();
x.add("Hello");
x.add("world!");
ls2d.add(x);

System.out.println(Arrays.deepToString(ls2d.toArray())); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-26T16:56:56.503

第一个数组列表不是 String 的数组列表，它是 ArrayList 的 ArrayList。

```
ArrayList<ArrayList<String>> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-26T17:01:11.700

```
List<List<String>> super2dArray = new ArrayList<ArrayList<String>>() 
```

这是一个包含字符串的数组列表。

也`ArrayList<String<String>> mylist`没有任何意义，因为 String 不是集合/列表，但我想你明白了。未来的读者可能不会。

请参阅[此答案](https://stackoverflow.com/a/8896608/645270)以了解我为什么选择`List`在左侧。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-26T16:59:03.493

```
List<List<String>> array = new ArrayList<List<String>>();
...
array.add(new ArrayList<String>())
array.get(0).add("qqq"); 
```

array.get(0) - 是一个内部列表

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-23T03:17:17.103

有两种方法可以实现您的愿望。我为两者提供代码片段：

**1.`List<List<String>> lol = new ArrayList<List<String>>();`**

```
Scanner in = new Scanner(System.in);
int size = in.nextInt();

//Declare your two dimensional ArrayList of Strings. 
List< List<String>> lol = new ArrayList<List<String>>();

//Instantiate and Populate
for (int i=0;i<size;i++){
    int internalListSize = in.nextInt(); //the size of each internal list
    lol.add(new ArrayList<String>());
    for (int j=0;j<internalListSize;j++){
        String whateverYouWanttoPut = in.nextLine();
        lol.get(i).add(whateverYouWanttoPut);
    }
}

//Access Elements 
try {
    System.out.println(lol.get(0).get(4));
    System.out.println(lol.get(1).get(2));
    System.out.println(lol.get(3).get(2));
} catch (Exception e){
    System.out.println("ERROR!");
} 
```

**2.`ArrayList[] set = new ArrayList[n];`**

```
Scanner in = new Scanner(System.in);
int size = in.nextInt();
//Declare your two dimensional ArrayList of Strings.
ArrayList[] set = new ArrayList[size];

//Populate it. 
for(int i=0;i<size;i++){
    int innerSize = in.nextInt();
    set[i] = new ArrayList<String>();
    for(int j=0;j<innerSize;j++){  
        set[i].add(in.nextLine());                
    }
}        
try{
    System.out.println(set[0].get(1));
    System.out.println(set[1].get(2));
} catch(Exception e){
    System.out.println("ERROR!");
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-28T22:31:55.823

尝试这个 ：

```
public class JavaTests {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

    String[ ][ ] test2 = new String[3][3];      //3 can be replace if you add more test2[?][?] = "RandomString"

        test2[0][0] = "String1";
        test2[0][1] = "String2";
        test2[0][2] = "String3";

        test2[1][0] = "String4";
        test2[1][1] = "String5";
        test2[1][2] = "String6";

        test2[2][0] = "String7";
        test2[2][1] = "String8";
        test2[2][2] = "String9";

        for (int i = 0; i <= 2; i++){
            for (int j = 0; j <= 2; j++){
                System.out.print(test2[i][j] +"\t");
            }
            System.out.println("\n");
        }  
        System.out.println("\n");      
    }
} 
```

# firefox - 如何将javascript代码附加到此按钮？

> ID：10768171
> 
> 赞同：0
> 
> 时间：2012-05-26T16:55:51.103
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我用这段代码创建了一个简单的按钮：

```
 <toolbarpalette id="BrowserToolbarPalette">

      <toolbarbutton id="ok-nav"
                     class="toolbarbutton-1 chromeclass-toolbar-additional"
                     label="&okok;"
                     tooltiptext="&okok;" />
  </toolbarpalette> 
```

我需要将此小书签附加到该按钮：

```
javascript:(function(){window.open('http://example.com/test/mm.php?title='+encodeURIComponent(document.title))})(); 
```

有人可以告诉我如何将此书签附加到该按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:25:19.253

首先，您需要`<script>`在叠加层中添加一个元素。然后，在脚本中，类似以下代码片段的内容将帮助您在按钮被激活时执行操作。

```
window.addEventListener("load", function () {
  document.getElementByid("ok-nav").addEventListener("command", function () {
    // do your bookmarklet here
  });
}); 
```

我认为可能值得阅读[XUL 教程](https://developer.mozilla.org/en/XUL_Tutorial/Overlays)，尤其是关于覆盖的部分 :)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T17:35:15.350

我打赌你会更频繁地使用它。查看JQuery ...

使用 JQuery，您可以轻松地使用它：

```
$(document).on('click', '#BrowserToolbarPalette', function(){

window.open('http://example.com/test/mm.php?title='+encodeURIComponent(document.title));

}); 
```

# jquery - 使用同位素插件破坏布局

> ID：10768173
> 
> 赞同：0
> 
> 时间：2012-05-26T16:55:56.347
> 
> 标签：jquery, css, jquery-isotope

[这](http://www.yawer.net/test-portofolio/)是我的示例代码：

当我单击任何过滤器链接时，布局被破坏。

我使用`isotope`插件，这是我的 jquery 代码。

**JSS**标记：

```
$(function(){
$('.fancygallery-panel').wrapAll('<div id="isotopeCont" />');

$('#filters a').click(function(){
  var selector = $(this).attr('data-filter');
  $('#isotopeCont').isotope({ 
  filter: selector ,
  animationEngine:'best-available'
  });

  return false;
});

}) 
```

**CSS**标记：

```
/**** Isotope filtering ****/

.isotope-item {
  z-index: 2;
}

.isotope-hidden.isotope-item {
  pointer-events: none;
  z-index: 1;
}

.isotope,
.isotope .isotope-item {
  /* change duration value to whatever you like */
  -webkit-transition-duration: 0.8s;
     -moz-transition-duration: 0.8s;
      -ms-transition-duration: 0.8s;
       -o-transition-duration: 0.8s;
          transition-duration: 0.8s;
}

.isotope {
  -webkit-transition-property: height, width;
     -moz-transition-property: height, width;
      -ms-transition-property: height, width;
       -o-transition-property: height, width;
          transition-property: height, width;
}

.isotope .isotope-item {
  -webkit-transition-property: -webkit-transform, opacity;
     -moz-transition-property:    -moz-transform, opacity;
      -ms-transition-property:     -ms-transform, opacity;
       -o-transition-property:         top, left, opacity;
          transition-property:         transform, opacity;
}

/**** disabling Isotope CSS3 transitions ****/

.isotope.no-transition,
.isotope.no-transition .isotope-item,
.isotope .isotope-item.no-transition {
  -webkit-transition-duration: 0s;
     -moz-transition-duration: 0s;
      -ms-transition-duration: 0s;
       -o-transition-duration: 0s;
          transition-duration: 0s;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:50:04.453

```
$(document).ready(function(){
$('.fancygallery-panel').wrapAll('<div id="isotopeCont" />');

$('#filters a').click(function(){
  var selector = $(this).attr('data-filter');
  $('#isotopeCont').isotope({ 
  filter: selector ,
  animationEngine:'best-available'
  });

  return false;
});

}) 
```

我不是 jQuery 专家，但您不需要那里准备好文档吗？我使用列表项上的类以及活动状态以不同方式设置同位素。这是我的代码。

过滤器的 HTML

```
<div id="filter">
            <ul>
                <li><a href="" title="*">All</a></li>
                <li><a href="" title="test1">1</a></li>
                <li><a href="" title="test2">2</a></li>
                <li><a href="" title="test3">3</a></li>
                <li><a href="" title="test4">4</a></li>
                <li><a href="" title="test5">5</a></li>
                <li><a href="" title="test6">6</a></li>
            </ul>
        </div> 
```

列表项画廊

```
<ul class="gallery simple" data-current="">
<li class="test5">
<a href="largerimage.jpg" class="button-thumbs" data-fancybox-group="gallery"  title=""><span class="hover"></span><img src="image.jpg"/></a>
</li>
<li class="test6">
<a href="largerimage.jpg" class="button-thumbs" data-fancybox-group="gallery"  title=""><span class="hover"></span><img src="image.jpg"/></a>
</li>
<li class="test5">
<a href="largerimage.jpg" class="button-thumbs" data-fancybox-group="gallery"  title=""><span class="hover"></span><img src="image.jpg"/></a>
</li>
<li class="test3">
<a href="largerimage.jpg" class="button-thumbs" data-fancybox-group="gallery"  title=""><span class="hover"></span><img src="image.jpg"/></a>
</li>
<li class="test1">
<a href="largerimage.jpg" class="button-thumbs" data-fancybox-group="gallery"  title=""><span class="hover"></span><img src="image.jpg"/></a>
</li>
<li class="test2">
<a href="largerimage.jpg" class="button-thumbs" data-fancybox-group="gallery"  title=""><span class="hover"></span><img src="image.jpg"/></a>
</li> 
```

jQuery

```
<script src="PATHTOYOURJSDIR/jquery.isotope.min.js"></script>

        <script type="text/javascript">

        $(document).ready(function(){
        var $container = $('ul.gallery');
    var toFilter = '*';

    $container.isotope({
        filter: toFilter,
        animationOptions: {
            duration: 750,
            easing: 'linear',
            queue: false
        }
    });

    $container.attr('data-current',toFilter);

    checkActive();

    $('#filter a').click(function(){
        var title = $(this).attr('title');
        var text = $(this).text();
        if(text == "All"){
            var selector = title;
        }
        else {
            var selector = "." + title;
        }

        $container.attr('data-current',selector);

        $container.isotope({ 
            filter: selector,
            animationOptions: {
                duration: 750,
                easing: 'linear',
                queue: false
            }
        });

        checkActive();

        return false;
    });

    function checkActive(){

    $('#filter a').each(function(){

        $(this).removeClass("current");

        var title = $(this).attr('title');

        title = '.'+title;

        if(title=='.*'){
            title = '*';
        }

        var currentCat = $container.attr('data-current');

        if(title==currentCat){
            $(this).addClass("current");
        }

    });

    }

var $container = $('ul.gallery')
// initialize Isotope
$container.isotope({
  // options...
  resizable: false, // disable normal resizing
  // set columnWidth to a percentage of container width
  masonry: { columnWidth: $container.width() / 4 }
});

// update columnWidth on window resize
$(window).smartresize(function(){
  $container.isotope({
    // update columnWidth to a percentage of container width
    masonry: { columnWidth: $container.width() / 4 }
  });
});

// trigger isotope again after images have loaded
$container.imagesLoaded( function(){
  $(window).smartresize();
});

});
        </script> 
```

我正在做一个四跨响应式设计，你必须根据你的布局修改它并更改类和 ID。确保将html中调用的那些与jQuery中使用的结合起来。#filter ul.gallery等，并关闭所有标签，该系统不显示关闭</ul>

# sql - 比较两个表格并提取每个日期的缺失元素

> ID：10768176
> 
> 赞同：0
> 
> 时间：2012-05-26T16:56:37.160
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

大家好，我有一个 SQL 查询问题，我找不到解决方案。

在我的数据库中，我有两个表，Mytable1 和 Mytable2。Mytable1 包含列 idCalendar、idPlayer、datePlaying，而 Mytable2 包含列 idPlayer 和 namePlayer。

我想在 Mytable1 中提取未参加比赛的球员的姓名。

例如 Mytable1（包含播放器和播放日期）：

`idCalendar|idPlayer|datePlaying`

 ````
1         |     1  | 05/01/2012
2         |     2  | 06/01/2012
3         |     3  | 08/01/2012
4         |     2  | 05/01/2012 
````  `Mytable2（包含所有玩家姓名）：

`idPlayer|namePlayer`

 ````
1  | P1
2  | P2
3  | P3
4  | P4 
````  `我想创建一个显示以下结果的视图：

ViewResult（按日期没有玩过的玩家）：

`datePlaying | playerName`

 ````
05/01/2012  | P2
05/01/2012  | P3
06/01/2012  | P1
06/01/2012  | P3
08/01/2012  | P1
08/01/2012  | P2 
````  `如您所见，我需要此信息的结果：- 2012 年 5 月 1 日 P2 和 P3 尚未播放。- 2012 年 6 月 1 日 P1 和 P3 尚未播放。- 2012 年 8 月 1 日 P1 和 P2 尚未播放。

我希望我已经足够清楚了。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T20:10:05.187

可能像这样简单的东西会起作用。

```
select
    d.datePlaying, p.namePlayer
from
    table2 p
cross join 
    (select distinct datePlaying from table1) d
left join
    table1 t on t.idPlayer = p.idPlayer and t.datePlaying = d.datePlaying
where
    t.idPlayer is null 
```

作为旁注，如果您有一个没有球员参加的日期会发生什么？您不会在 table2 中有条目。您是否关心或是否应该有第三张桌子来代表任何玩家应该玩的日期。此日期表将用于替换我的别名“d”交叉连接表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T17:38:45.643

我在这台计算机上没有数据库，所以我现在无法测试它——我会继续努力。

```
SELECT     DISTINCT a.datePlaying, b.playerName
FROM       Mytable1 a
INNER JOIN Mytable2 b
        ON a.idPlayer = b.idPlayer
WHERE      NOT EXISTS (
           SELECT idPlayer
           FROM   Mytable1 a2
           WHERE  a.datePlaying = a2.datePlaying)
ORDER BY   a.datePlaying 
``````

# java - 错误回调中的错误：TestPlugin2 = ReferenceError：找不到变量：登录文件：///android_asset/www/js/cordova-1.6.1.js:276

> ID：10768180
> 
> 赞同：0
> 
> 时间：2012-05-26T16:56:59.890
> 
> 标签：java, javascript, android, plugins, cordova

有人可以帮我解决这个问题：这是我的代码：

//js

```
var TestPlugin={ 
test:function(name,successCallback,failureCallback){
    console.log("navigator.service.sms smssend: ----------------");
    PhoneGap.exec(successCallback, failureCallback, "TestPlugin", "test", [name]);
}};

TestPlugin.test(
    "hubiao",
        function(){
            alert("success");
        },
        function(e){
            alert("fail");
            log(e);
        }
    ); 
```

//Android phonegap

```
public class TestPlugin extends Plugin {
@Override
public PluginResult execute(String action, JSONArray data, String callBackId) {

    if ("test".equalsIgnoreCase(action)) {  
        Log.d("DatePickerPluginListener execute", "test");  
        Context context=ctx.getContext();
        String name="";
        JSONObject fileInfo = new JSONObject();
        try {
            name = data.getString(0);
            fileInfo.put("hello", "Android"+name);
        } catch (JSONException e) {
            e.printStackTrace();
        }
        final PluginResult r = new PluginResult(  
                Status.OK,fileInfo); 
        Log.i("TestPlugin", name);
        Toast.makeText(context,"User:"+name, Toast.LENGTH_LONG).show();
        return r;  
    }else{
         Log.d("DatePickerPlugin", "Invalid action : " + action + " passed"); 
         return new PluginResult(Status.INVALID_ACTION); 
    }
} 
```

}

/// 重点：如果我添加：

```
 Toast.makeText(context,"User:"+name, Toast.LENGTH_LONG).show(); 
```

当我删除时，phonegap 会给出 failureCallback：

```
 Toast.makeText(context,"User:"+name, Toast.LENGTH_LONG).show(); 
```

phonegap 会给出successCallback。为什么？我不知道。有人可以帮助我吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:58:43.807

这不只是`console.`from的简单省略`console.log()`吗？

```
TestPlugin.test(
    "hubiao",
    function(){
        alert("success");
    },
    function(e){
        alert("fail");
        // log() is undefined.  console.log() is defined!
        console.log(e);
        // Or more likely you want the error message only
        console.log(e.message);
    }
); 
```

# c++ - 在构造函数中实现一个函数

> ID：10768181
> 
> 赞同：0
> 
> 时间：2012-05-26T16:57:06.177
> 
> 标签：c++, io

我正在尝试从文件中读取一些我已经拥有的数据并将其加载到向量中。然后我试图将更改保存到文件（有效）。

但是当我运行程序时，它不会读取我的文件。这是我的代码：

保存/加载功能：

```
void StudentRepository::loadStudents(){
    ifstream fl;
    fl.open("studs.txt");
    Student st("",0,0);
    string str,ss;
    int i;
    int loc;
    if(fl.is_open()){
        while(!(fl.eof())){
            getline(fl,str);
            loc = str.find(",");
            ss = str.substr(0,loc);
            st.setName(ss);
            str.erase(0,loc);
            loc = str.find(",");
            ss = str.substr(0,loc);
            i = atoi(ss.c_str());
            st.setId(i);
            str.erase(0,loc);
            i = atoi(ss.c_str());
            st.setGroup(i);

        }
    }
    else{
        cout<<"~~~ File couldn't be open! ~~~"<<endl;
    }
    fl.close();
}

void StudentRepository::saveStudents(){
    ofstream fl;
    fl.open("studs.txt");
    if(fl.is_open()){
        for(unsigned i=0; i<students.size(); i++){
            fl<<students[i].getName();
            fl<<",";
            fl<<students[i].getID();
            fl<<",";
            fl<<students[i].getGroup();
            fl<<endl;
        }
    }
    else{
        cout<<"~~~ File couldn't be open! ~~~"<<endl;
    }
} 
```

实现（尽我所能） - 我调用了加载函数，因为内存中的向量被创建：

```
StudentRepository::StudentRepository(){
loadStudents();
} 
```

有什么想法/我做错了什么，或者有什么建议可以解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T17:05:43.580

看来您正确阅读了学生信息。但是您不会将读取信息添加到任何向量中。`students.push_back(st);`你的方法中应该有类似的东西`loadStudents`。此外，最好`st`在循环开始时进行初始化。

# javascript - 如何将 JSLint 与针对不同引擎的代码一起使用？

> ID：10768186
> 
> 赞同：0
> 
> 时间：2012-05-26T16:57:59.183
> 
> 标签：javascript, jslint

例如，考虑以下 Node.js 代码：

```
(function () {
    "use strict";
    /*jslint node: true */

    var toBeExecutedInBrowser = function () {
        "use strict";
        /*jslint devel: true */
        alert('Hello world!');
    };

    exports.controller = function (req, res) {
        res.send(toBeExecutedInBrowser.toString());
    };
}()); 
```

最新的 JSLint 版本[无条件地无法](https://github.com/douglascrockford/JSLint/blob/master/jslint.js#L2386)检查此代码。显然，JSLint 作者不想回答在这种情况下我们应该做什么，从他删除我的问题来看；但也许有人可以回答在这种情况下我该怎么办？

*   我不想显着改变应用程序逻辑；
*   我不想通过让客户端模式在非严格上下文中执行来编写不安全的代码（Douglas Crockford 应该也想要）；
*   我不想通过完全禁用此文件的 JSLint 来编写不安全的代码（Douglas Crockford 应该也想要这样做）；
*   我不希望 JSLint 报告被`unnecessary 'use strict'`消息“垃圾邮件”，这样就可能忽略一些真正重要的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:00:49.417

您可能会发现**[JSHint](http://www.jshint.com/)**很有趣。这是一个更仁慈的 JSLint 版本。此外，它还有一个 NodeJS 选项。

# objective-c - NSCombox 的 comboBoxSelectionDidChange 值被延迟

> ID：10768190
> 
> 赞同：1
> 
> 时间：2012-05-26T16:58:47.657
> 
> 标签：objective-c, xcode, macos, cocoa, combobox

我有一个带有组合框的 NSAlert，每次它发生变化时我都需要知道它的价值。
在我的 .hi 中实现了`NSComboBoxDelegate`协议和`NSComboBox* comboBox`.

在我的 .mi 中有：

```
[comboBox setDelegate:self];

- (void)comboBoxSelectionDidChange:(NSNotification *)notification{
    int x = [[comboBox stringValue] intValue];
    NSLog(@"ComboBox Value Changed to --> %i", x);
} 
```

但问题是：
组合框的默认值为 2。例如，如果我将值更改为 6，我的`NSLog`显示器：`ComboBox Value Changed to --> 2`
然后，当我将其值更改回 2 时，我的`NSLog`显示器：`ComboBox Value Changed to --> 6`
关于这个问题的任何想法？谢谢你。

PS：我尝试了其他`NSComboBoxDelegate`方法，但它发生了与我上面描述的相同的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:10:28.700

更改代码以使用 objectValueOfSelectedItem 而不是 stringValue。

```
- (void)comboBoxSelectionDidChange:(NSNotification *)notification{
    int x = [[notification.object objectValueOfSelectedItem] intValue];
    NSLog(@"ComboBox Value Changed to --> %i", x);
} 
```

# c# - XNA 如何通过单个 Update 调用制作模拟动画

> ID：10768193
> 
> 赞同：0
> 
> 时间：2012-05-26T16:59:16.833
> 
> 标签：c#, animation, xna, draw

我想在 Update 方法中捕获 Flick 触摸事件。在那里，我在 Y 方向增加图形，例如 70。绘制时，图形像跳跃一样被绘制。我如何使它看起来像做动画？请注意，我想在 Flick 事件而不是多个 VerticalDrag 事件中执行此操作。

```
Update(GameTime...)
{
...
case GestureType.Flick:
    figure.rect.Y += 70;
...
}

Draw(...)
{
...
spriteBatch.Draw(..
...
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T00:15:58.823

答案已在 Cicada 对问题的评论中提供。谢谢！

# java - 在数组 Java 中删除

> ID：10768202
> 
> 赞同：0
> 
> 时间：2012-05-26T17:00:39.250
> 
> 标签：java, arrays, eclipse

我有那个功能，我希望用户选择一些所有时间表来删除一个。我的删除逻辑是找到`i`我想要删除的，然后将我的数组的最后一个调度与那个交换`i`，然后最后一个为空。

当我测试我的程序时，我发现当我想删除数组的最后一个时，一切正常，但是当我尝试删除其他内容时，eclipse 中会出现错误。

线程“主”java.lang.NullPointerException 中的异常我无法弄清楚发生了什么。我已经多次审查我的代码。

```
 public void ScheduleDelete(){
    StandardInputRead readDeleteSchedule = new StandardInputRead();

    int deleteScheduleNum =readDeleteSchedule.readPositiveInt("Enter the schedule number you want to delete: ");
    for(int i=0;i<scheduleSize;i++){
        if(deleteScheduleNum==this.scheduleList[i].getScheduleNum()){
            this.scheduleList[i]= this.scheduleList[this.scheduleSize-1];
            this.scheduleList[i].setScheduleNum(i);
            this.scheduleList[this.scheduleSize-1]= null;
        }
    }
    this.scheduleSize--;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T17:03:58.353

当您第二次将元素与最后一个元素交换时，您将替换该元素`null`（因为您刚刚将数组的最后一个元素设置为上`null`一次交换中的元素）。因此，当您要使用该元素时，您正在对空引用进行操作，因此会出现异常。

您需要跟踪数组中有多少*活动*元素，并将该元素与最后一个*活动*元素交换。

或者，您可以使用动态集合（例如列表），您不需要明确跟踪活动元素，因为您只存储活动元素。

# ios - IOS - 为图像添加阴影边框使其沉重且无响应

> ID：10768206
> 
> 赞同：1
> 
> 时间：2012-05-26T17:01:08.983
> 
> 标签：ios, border, shadow

我正在开发一个 iPad 应用程序。在我的应用程序中，用户可以移动、旋转和缩放图像。我注意到，当我为图像添加 3d 阴影边框时，它们会变得异常沉重且反应迟钝。我使用以下代码添加边框：

```
self.layer.MasksToBounds = false;
self.layer.ShadowColor = [[UIColor alloc] initWithRed:0 green:0 blue:0 alpha:0.5].CGColor;
self.layer.ShadowOpacity = 1.0f;
self.layer.ShadowOffset = CGSizeMake(0, 2.5f); 
```

为什么会这样？我有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T17:05:06.703

这是 CALayer 阴影的一个众所周知的问题。也设置`shadowPath`属性，您将看到良好的性能提升。

阴影路径可以只是图像视图边界的路径。您应该能够只设置一次，并且图层转换将在您的图像缩放等时使其保持最新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T21:24:20.170

您还应该设置

```
self.layer.ShouldRasterize = YES 
```

这将栅格化图层。如果将其设置为 NO（默认），则应用在图层上的所有过滤器和阴影将被重新计算多次，这会消耗相当多的性能。特别是在滚动视图或表格视图中。

# javascript - jQuery 过渡没有完成

> ID：10768209
> 
> 赞同：1
> 
> 时间：2012-05-26T17:01:18.127
> 
> 标签：javascript, jquery

所以我在图像翻转中添加了一些过渡：

```
$(document).ready(function(){
    $('.project').hover(function(){
        $(this).children('.description').stop().slideDown('fast');
    }, function(){
        $(this).children('.description').stop().slideUp('fast');
    });
}); 
```

然而，有时描述框只向下滑动一半，甚至只是它应该滑动的长度的十分之一......描述框是 300 x 300px，应该滑入一个 300x300px 的盒子......

如果我很快将鼠标悬停在 .project 上，这似乎会发生，stop() 是否可以将自身添加到队列中，从而在不应该的时候停止事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:09:56.047

`stop( true, true )`如果您希望动画立即完成，或者`stop( true, false )`您不想完成动画，请尝试将其反转。第一个 true 将清除队列，以便动画可以重新开始。我不完全确定为什么会出错，我很抱歉无法给出更完整的答案，但现在我无法查找它。你可以在这里阅读更多关于它的信息：http: [//api.jquery.com/stop/](http://api.jquery.com/stop/)，我发现 jQuery API 通常非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T17:19:05.183

[我在 jsfiddle http://jsfiddle.net/gizmovation/TpqvT/](http://jsfiddle.net/gizmovation/TpqvT/)上创建了一个示例

通过快速将鼠标移入和移出项目容器，我可以让描述框出现在中途。

发生这种情况是因为`stop()`正在停止上一个动画，然后您正在开始一个新动画。如另一个答案中所述通过`stop(true, true)`将使事情看起来更好一些。

您是否在动画完全挂起时遇到问题？如果是这样，请修改我创建的 jsfiddle 以更好地说明问题，我们可以提供进一步的帮助。

# android - 当我在手机上调试时，Eclipse 显示不同

> ID：10768213
> 
> 赞同：0
> 
> 时间：2012-05-26T17:01:45.673
> 
> 标签：android, xml, eclipse, debugging, sdk

这就是 Eclipse 在编辑器中向我展示的内容。

[http://i.stack.imgur.com/tjwu9.png](http://i.stack.imgur.com/tjwu9.png)

这就是我在手机上运行它时的样子。

[http://i.stack.imgur.com/V6NG5.png](http://i.stack.imgur.com/V6NG5.png)

这是我使用的代码。

```
 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="bottom" >

    <Button
        android:id="@+id/buttonLocation"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/settings_button"

        android:text="Settings" android:textStyle="bold" android:textSize="24dp"  android:textColor="#000000" android:gravity="center_horizontal"/>
</LinearLayout> 
```

我需要设置在中心。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:52:59.113

尝试这个

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="bottom" >

    <Button
        android:id="@+id/buttonLocation"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/settings_button"
        android:gravity="center"
        android:text="Settings" android:textStyle="bold" android:textSize="24dp"  android:textColor="#000000" android:gravity="center_horizontal"/>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T20:03:17.047

android:layout_gravity 用于设置 View 或 Layout 相对于其父级的重力。

对于按钮元素添加 `android:layout_gravity="center"` 这应该使其居中。

另外，不确定，但由于选择的文本大小，您可能会得到不同的结果...尝试更小/更大的大小并检查结果是否有所不同。

# c# - Dotfuscator 坏 RVA

> ID：10768214
> 
> 赞同：1
> 
> 时间：2012-05-26T17:01:50.060
> 
> 标签：c#, debugging, dotfuscator

我刚开始使用 Dotfuscator 并且从一开始就碰壁了，当我构建我的项目 Dotfuscator 时说：

```
Writing Assemblies...

Bad RVA found: 46
Build Error. 
```

我在网上的任何地方都找不到关于这个问题的任何提及。

我的项目分为几个部分，一个核心库项目和几个依赖于库项目的应用程序。我现在只是想混淆图书馆项目。对于输入程序集，我刚刚将 Dotfuscator 指向 bin/x86/Release 文件夹中的 Library.dll。

我在这里做错了什么，还是我真的在 Dotfuscator 中遇到了以前未知的错误？

**编辑：**我刚刚注意到“仅调查”选项，我刚刚针对该项目运行它，它似乎工作得很好：

```
Build Finished.
Build Statistics    Total  Renamed  Percent Renamed
Types:                271       63          23.25 %
Methods:             1609      672          41.77 %
Fields:              1099      852          77.53 %
Dotfuscator Community Edition cannot rename generic types or methods. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T01:35:45.980

RVA 是程序集元数据的一个组件，代表“相对虚拟地址”。它是存储在程序集头中的一个数字，指向程序集中的某个虚拟地址。在 Dotfuscator 中，每个 RVA 在由给定子系统处理时都会检查其有效性（尽管并非所有子系统都处理 RVA），如果出现以下情况，此检查将失败

A) 在程序集元数据中未找到节标题，但找到 RVA，或

B) RVA 指向的地址位于所有找到的节头的最后一个虚拟地址之前。

一般来说，这些事情都不应该发生。检查是否存在可能改变库程序集的构建后行为。您可能还想尝试运行[PEVerify](http://msdn.microsoft.com/en-us/library/62bwd2yd%28v=vs.80%29.aspx "PE验证")以查看您的库是否正常签出。未能通过 PEVerify 并不意味着代码不会运行，但它可能会干扰混淆（或程序集元数据的任何处理）。如果 PEVerify 通过，你就知道了 :) 也许手动检查元数据，看看上面的条件 A 或 B 是否被击中。

# java - 树 Java 插入

> ID：10768215
> 
> 赞同：0
> 
> 时间：2012-05-26T17:01:59.403
> 
> 标签：java, tree

我遇到了一个树问题。代码中没有错误；这只是一个错误的输出。问题是当我插入“100”时，它给出了错误的叶子数量和高度，并且顺序遍历也是错误的。这是二叉树类：

```
public class BinaryTree {

    //Definition of the node
    protected class BinaryTreeNode {

        Object info;
        BinaryTreeNode llink;
        BinaryTreeNode rlink;
    }
    protected BinaryTreeNode root;

    //default constructor 
    //Postcondition: root = null;
    public BinaryTree() {
        root = null;
    }

    //copy constructor
    public BinaryTree(BinaryTree otherTree) {
        if (otherTree.root == null) //otherTree is empty
        {
            root = null;
        } else {
            root = copy(otherTree.root);
        }
    }

    //Method to determine whether the binary tree is empty.
    //Postcondition: Returns true if the binary tree is empty;
    //               otherwise, returns false.    
    public boolean isEmpty() {
        return (root == null);
    }

    //Method to do an inorder traversal of the binary tree.
    //Postcondition: The nodes of the binary tree are output
    //               in the inorder sequence.
    public void inorderTraversal() {
        inorder(root);
    }

    //Method to do a preorder traversal of the binary tree.
    //Postcondition: The nodes of the binary tree are output
    //               in the preorder sequence.
    public void preorderTraversal() {
        preorder(root);
    }

    //Method to do a postorder traversal of the binary tree.
    //Postcondition: The nodes of the binary tree are output
    //               in the postorder sequence.       
    public void postorderTraversal() {
        postorder(root);
    }

    //Method to determine the height of the binary tree.
    //Postcondition: The height of the binary tree is returned.    
    public int treeHeight() {
        return height(root);
    }

    //Method to determine the number of nodes in the 
    //binary tree.
    //Postcondition: The number of nodes in the binary tree
    //               is returned.       
    public int treeNodeCount() {
        return nodeCount(root);
    }
    //Method to determine the number of nodes in the binary 
    //tree to which p points. 
    //Postcondition: The number of nodes in the binary tree
    //               to which p points is returned.    

    private int nodeCount(BinaryTreeNode p) {
        if (p == null) {
            return 0;
        } else {
            return (1 + nodeCount(p.llink) + nodeCount(p.rlink));
        }
    }

    //Method to determine the number of leaves in the 
    //binary tree.
    //Postcondition: The number of leaves in the binary tree
    //               is returned.       
    public int treeLeavesCount() {
        return leavesCount(root);
    }
    //Method to determine the number of leaves in the binary 
    //tree to which p points.
    //Postcondition: The number of leaves in the binary tree
    //               to which p points is returned.    

    private int leavesCount(BinaryTreeNode p) {
        if (p == null) {
            return 0;
        }
        if (p.llink == null && p.rlink == null) {
            return 1;
        }
        return (leavesCount(p.rlink) + leavesCount(p.llink));
    }

    //Method to destroy the binary tree.
    //Postcondition: root = null     
    public void destroyTree() {
        root = null;
    }

    //Method to make a copy of the binary tree 
    //specified by otherTree points. 
    //Postcondition: A copy of otherTree is assigned to
    //               this binary tree.   
    public void copyTree(BinaryTree otherTree) {

        if (this != otherTree) //avoid self-copy
        {
            root = null;

            if (otherTree.root != null) //otherTree is nonempty
            {
                root = copy(otherTree.root);
            }
        }

    }

    //Method to make a copy of the binary tree to 
    //which otherTreeRoot points. 
    //Postcondition: A copy of the binary tree to which
    //               otherTreeRoot is created and the reference of
    //               the root node of the copied binary tree
    //               is returned.
    private BinaryTreeNode copy(BinaryTreeNode otherTreeRoot) {
        BinaryTreeNode temp;

        if (otherTreeRoot == null) {
            temp = null;
        } else {
            temp = new BinaryTreeNode();
            temp.info = (((String) otherTreeRoot.info));
            temp.llink = copy(otherTreeRoot.llink);
            temp.rlink = copy(otherTreeRoot.rlink);
        }

        return temp;
    }//end copy

    //Method to do an inorder traversal of the binary
    //tree to which p points.  
    //Postcondition: The nodes of the binary tree to which p
    //               points are output in the inorder sequence.    
    private void inorder(BinaryTreeNode p) {
        if (p != null) {
            inorder(p.llink);
            System.out.print(p.info + " ");
            inorder(p.rlink);
        }
    }

    //Method to do a preorder traversal of the binary
    //tree to which p points.  
    //Postcondition: The nodes of the binary tree to which p
    //               points are output in the preorder sequence.       
    private void preorder(BinaryTreeNode p) {
        if (p != null) {
            System.out.print(p.info + " ");
            preorder(p.llink);
            preorder(p.rlink);
        }
    }

    //Method to do a postorder traversal of the binary
    //tree to which p points.  
    //Postcondition: The nodes of the binary tree to which p
    //               points are output in the postorder sequence.      
    private void postorder(BinaryTreeNode p) {
        if (p != null) {
            postorder(p.llink);
            postorder(p.rlink);
            System.out.print(p.info + " ");
        }
    }

    public void insert(String x) {
        BinaryTreeNode c1, c2, nn;
        nn = new BinaryTreeNode();
        nn.info = x;
        nn.llink = null;
        nn.rlink = null;
        if (isEmpty()) {
            root = nn;
        } else {
            c2 = root;
            c1=null;
            while (c2 != null) {
                c1 = c2;
                if (c2.info.equals(x)) {
                    System.out.println("Error");
                    return;
                } else {
                    if (((String) c2.info).compareTo(x) > 0) {
                        c2 = c2.llink;
                    } else {
                        c2 = c2.rlink;
                    }
                }
            }
        if (((String) c1.info).compareTo(x) > 0) {
            c1.llink = nn;
        } else {
            c1.rlink = nn;
        }
    }
    }

    public boolean search(String x) {
        boolean found = false;
        BinaryTreeNode c1;
        BinaryTreeNode c2 = root;
        while (c2 != null && !found) {
            c1 = c2;
            if (c2.info.equals(x)) {
                found = true;
            } else {
                if (((String) c2.info).compareTo(x) > 0) {
                    c2 = c2.llink;
                } else {
                    c2 = c2.rlink;
                }
            }
        }
        return found;
    }
    //Method to determine the height of the binary tree
    //to which p points. 
    //Postcondition: The height of the binary tree to which p
    //               points is returned.   

    private int height(BinaryTreeNode p) {
        if (p == null) {
            return 0;
        } else {
            return 1 + max(height(p.llink), height(p.rlink));
        }
    }

    //Method to determine the larger of x and y.
    //Postcondition: The larger of x and y is returned.    
    private int max(int x, int y) {
        if (x >= y) {
            return x;
        } else {
            return y;
        }
    }

    public void deleteNode(String deleteItem) {
        BinaryTreeNode current;  //reference variable to 
        //traverse the tree
        BinaryTreeNode trailCurrent; //reference variable 
        //behind current
        boolean found = false;

        if (root == null) {
            System.out.println("Cannot delete from the empty tree.");
        } else {
            current = root;
            trailCurrent = root;

            while (current != null && !found) {
                if (current.info.equals(deleteItem)) {
                    found = true;
                } else {
                    trailCurrent = current;
                    if (((String) current.info).compareTo(deleteItem) > 0) {
                        current = current.llink;
                    } else {
                        current = current.rlink;
                    }
                }
            }//end while
            if (current == null) {
                System.out.println("The delete item is not in "
                        + "the list.");
            } else if (found) {
                if (current == root) {
                    root = deleteFromTree(root);
                } else if (((String) trailCurrent.info).compareTo(deleteItem) > 0) {
                    trailCurrent.llink = deleteFromTree(trailCurrent.llink);
                } else {
                    trailCurrent.rlink = deleteFromTree(trailCurrent.rlink);
                }
            }//end if
        }
    }//end deleteNode        
    //Method to delete the node, to which p points, from the
    //binary search tree.
    //Postcondition: The node to which p points is deleted
    //               from the binary search tree. The reference
    //               of the root node of the binary search tree
    //               after deletion is returned.

    private BinaryTreeNode deleteFromTree(BinaryTreeNode p) {
        BinaryTreeNode current;        //reference variable to 
        //traverse the tree
        BinaryTreeNode trailCurrent;   //reference variable 
        //behind current
        if (p == null) {
            System.out.println("Error: The node to be deleted "
                    + "is null.");
        } else if (p.llink == null && p.rlink == null) {
            p = null;
        } else if (p.llink == null) {
            p = p.rlink;
        } else if (p.rlink == null) {
            p = p.llink;
        } else {
            current = p.llink;
            trailCurrent = null;

            while (current.rlink != null) {
                trailCurrent = current;
                current = current.rlink;
            }//end while

            p.info = current.info;

            if (trailCurrent == null) //current did not move; 
            //current == p.llink; adjust p
            {
                p.llink = current.llink;
            } else {
                trailCurrent.rlink = current.llink;
            }
        }//end else

        return p;
    }//end deleteFromTree
} 
```

这是主要课程：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author Evil Weevil
 */
public class Run {

    public static void main(String[] args) {
        BinaryTree a=new BinaryTree();
        a.insert("88");
        a.insert("75");
        a.insert("100");
        a.insert("70");
        a.insert("20");
        a.insert("70");      
        a.insert("14");
        System.out.println("InorderTraversal Tree:");
        a.inorderTraversal();
        System.out.print("\n");
        System.out.println("PreorderTraversal Tree:");
        a.preorderTraversal();
        System.out.print("\n");
        System.out.println("PostorderTraversal Tree:");           
        a.postorderTraversal();
        System.out.print("\n");
        System.out.println(" Tree Node Count:");
        System.out.println(a.treeNodeCount());
        System.out.println(" Tree Leaves Count:");
        System.out.println(a.treeLeavesCount());
        System.out.println(" is the Tree Empty :");
        System.out.println(a.isEmpty());
        System.out.println(" Tree Height(longest chain of nodes ):");
        System.out.println(a.treeHeight());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:12:03.330

预期的顺序是：

“100” “14” “20” ...

如果你期望

“14” “20” ....

您可能想使用数字而不是字符串。原因在于字符串是从左开始逐个字符比较的。所以 '0' < '4' 表示 100 排在 14 之前。如果出于某种原因需要使用字符串，请确保它们具有相同的长度。使用“014”“020”等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T17:44:52.627

如果您使用调试器观察内存中的数据结构，您会看到树的每个节点只有一个子节点（总是左边的，除了“100”有右边的孩子），所以输出是正确的：你只有一个叶节点和最长的链（它是唯一的！）由 6 个节点组成。显然这不是你所期望的，所以问题出在 insert() 方法上，但是这个方法没有“后置条件”注释，所以不清楚你想要获得什么样的插入逻辑。

Stefan Haustein 的回答也很恰当：使用包含数字的字符串进行测试可能会产生误导。

# android - 为什么我的 admob 广告没有显示？

> ID：10768217
> 
> 赞同：0
> 
> 时间：2012-05-26T17:02:43.910
> 
> 标签：android, admob

我遵循了有关如何添加广告的文档，但是我似乎遗漏了一些东西，因为示例应用程序正在运行。admob 帐户报告我的应用程序正在请求广告，我在 logcat 中看到了请求，但广告没有显示。

这是 onCreate 的代码：

```
this.adView = new AdView(this, AdSize.BANNER, MY_UNIT_ID);
LinearLayout layout = (LinearLayout) findViewById(R.id.appLayout);
layout.addView(adView);
AdRequest ad = new AdRequest();
ad.addTestDevice("DEVICE_ID");
this.adView.loadAd(ad); 
```

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:id="@+id/appLayout"
     >

   <ListView
       android:id="@+id/myListView"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:scrollbars="vertical" 
       >
   </ListView>
</LinearLayout> 
```

在 AndroidManifest.XML 中：

我宣布了 2 个必需的权限：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

和活动：

```
<activity android:name="com.google.ads.AdActivity"                android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

我错过了什么？

编辑：我也附上了一个 logcat

```
05-26 21:04:01.761: I/Ads(6186): adRequestUrlHtml: removed requestHtml also
05-26 21:04:02.171: I/Ads(6186): Received ad url: removed ad url from here
05-26 21:04:02.752: I/Ads(6186): onReceiveAd() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:58:04.667

这是因为，您的视图不可见，您的 ListView 我们占用了所有空间。请更改它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T20:27:36.167

好吧，看来我也实现了 onResume()。如果您同时实现了 onCreate 和 onResume，则应该在那里完成整个广告加载。

# java - java中的第一类对象

> ID：10768219
> 
> 赞同：0
> 
> 时间：2012-05-26T17:02:56.747
> 
> 标签：java, arrays, object, first-class

> **可能重复：**
> [Java 和 C# 中的一等对象是什么？](https://stackoverflow.com/questions/1599176/what-are-first-class-objects-in-java-and-c)

现在我听说 java 中的 First class 对象是不使用像 String 这样的 new 关键字创建的对象

现在我们声明数组也没有 new 关键字？他们也是头等舱所以我得到了这篇文章[http://c2.com/cgi/wiki?JavaArraysShouldBeFirstClassObjects](http://c2.com/cgi/wiki?JavaArraysShouldBeFirstClassObjects)

现在我发现的另一篇有趣的文章是 [http://c2.com/cgi/wiki?JavaExceptionsAreFirstClassObjects](http://c2.com/cgi/wiki?JavaExceptionsAreFirstClassObjects) 那么异常是头等对象吗？

所以任何人都可以用简单的方式定义一个第一类对象并告诉我java中的所有第一类对象

* * *

***编辑：***

在标记为可能重复之前，请仔细阅读问题让我简而言之我的问题是

1.数组和异常是第一类对象吗？2.你能定义头等舱对象（面试类型）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:10:00.473

[同一个站点上](http://c2.com/cgi/wiki?FirstClass)的链接不只是覆盖它吗？请记住，“一流对象”不是由任何类型的规范定义的，它在不同的上下文中意味着不同的东西。c2.com 站点定义了自己的含义，但是您提到的其他示例以不同的含义使用它。这让你感到困惑，这是正确的，因为你习惯于比较苹果和橘子。

# java - java：有没有可以做到这一点的循环？

> ID：10768221
> 
> 赞同：1
> 
> 时间：2012-05-26T17:03:43.490
> 
> 标签：java, loops

我用java做一个游戏，需要能够做一个循环来做这样的事情：

首先通过循环：

```
for(int i=0;i<5;i++)
{
    example.print(0);
} 
```

第二关：

```
for(int i=0;i<5;i++)
{
    example.print(0);
    example.print(1);
} 
```

依此类推，每次都添加另一个 example.print()。

为了使程序正常工作，每个“example.print()”都必须在物理上存在代码。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T17:05:49.373

听起来你想要嵌套循环：

```
for (int i = 0; i < 5; i++) {
    for (int j = 0; j < 5; j++) {
        example.print(i + j); // This will need adjusting
    }
} 
```

笔记：

*   您需要根据需要调整`i + j`部件以获得所需的输出。你没有说当我们超过前五个时会发生什么。:-)
*   `i`你没有说你想要多少遍，所以我假设 5。如果你想要更少，可能会改变循环的上限（外层）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T17:06:49.103

```
int loopCounter = 0;

for(int i=0;i<5;i++)
{
    for(int k=0; k<loopCounter; k++)example.print(k);
    loopCounter++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T17:11:10.190

我的版本：

```
for(int i=0;i<5;i++)
{
    for(int k=0; k<i; k++)
          example.print(k);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T17:33:14.990

尝试这个。

```
for (int x = 0,y = 0; x < 100; x++,y++) {

        example.print(x + y); // You will need to tweak these values
    } 
```

100 在这里是一个假设值，因为循环将迭代的次数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T17:35:03.300

这是我的看法，*考虑到您发送给 print 方法的参数是您希望它打印的内容

```
int n=3; //n is the highest param value you want your print method to receive, 
         //here it's just 3

for (int i=0; i<n; i++) {
    for (int j=0; j<(i+1)*5; j++) {
        example.print(j/5);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-26T17:21:03.817

任何人都猜到你所说的“身体在那里”是什么意思，但我会试一试：

```
final Example example = new Example();
for (int i = 0; i < 5; i++)
  switch (i) {
    case 4: example.print(i-4);
    case 3: example.print(i-3);
    case 2: example.print(i-2);
    case 1: example.print(i-1);
    case 0: example.print(i-0);
  } 
```

# ruby-on-rails - Rails 3 - 投票作为一个整数值（增加）还是作为数据库中的投票列表/数量？

> ID：10768225
> 
> 赞同：0
> 
> 时间：2012-05-26T17:04:07.287
> 
> 标签：ruby-on-rails

我是 Rails 的新手，目前正在开发一个应用程序，我的同学/同学可以在其中评论主题/问题（与我们相关），并且每个评论都应该可以被投票赞成或反对。

我为“upvote”和“downvote”创建了一个自己的模型。

现在，在数据库中，我想知道，两个投票模型是否应该有一个整数可以增加，所以在我的控制器操作中，它会是...... + = 1。 - 或者它应该是一个列表/仅使用 .count 方法计算的选票集合以显示赞成票或反对票的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:23:21.967

Rails 有一个名为 counter_cache 的功能，用于在创建/销毁时自动计算关联模型的数量。这是关于它的：http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)第 4.1.2.4 节。它是通过数据库中的额外列完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T17:39:36.623

我认为您选择的选项取决于您的应用程序的要求。

*   单整数
    *   如果您不需要与投票相关的任何其他信息，我只需将其作为单个整数存储在模型中。
*   记录每票
    *   如果您想将其他信息与投票一起存储，例如每次投票发生的人员和时间，那么您可以为每次投票创建记录。然后你可以在模型上做一个 .size （[出于性能原因，建议使用 size 超过计数](https://stackoverflow.com/questions/6083219/activerecord-size-vs-count)......甚至更好，使用 jdoe 指出的 counter_cache ）。

话虽如此，从您的应用程序的描述来看，我认为赞成票和反对票不一定需要他们自己的模型。我会在您的 Comments 模型上为赞成和反对票创建一个属性，并使用单个整数来表示投票计数。

# php - PHP后期静态绑定错误

> ID：10768226
> 
> 赞同：0
> 
> 时间：2012-05-26T17:04:14.237
> 
> 标签：php, oop, late-static-binding

我正在尝试学习如何使用 LSB。我正在尝试将我的常用数据库方法分成`class DatabaseObject`并将其扩展到将使用它们的所有类。常见的 db 方法是`find_by_id()`, `create()`,`delete()`等。

```
$username = trim($_POST['username']);
$password = trim($_POST['password']);

$found_personnel = Personnel::authenticate($username, $password); 
```

## 课程

```
class DatabaseObject {

  public static function find_by_sql($sql="") {
    global $database;
    $result_set = $database->query($sql);
    $object_array = array();
    while ($row = $database->fetch_array($result_set)) {
        $object_array[] = self::instantiate($row);
    }

    return $object_array;
  }

  private static function instantiate($record) {
    $object = new self;

    foreach($record as $attribute=>$value){
        if ($object->has_attribute($attribute)) {
            $object->$attribute = $value;
        }
    }
    return $object;
  }

  private function has_attribute($attribute) {
    $object_vars = $this->attributes();

    return array_key_exists($attribute, $object_vars);
  }

  protected function attributes() {
    $attributes = array();

    //this static::$db_fields is where my problem is
    foreach(static::$db_fields as $field) {

      if(property_exists($this, $field)) {
        $attributes[$field] = $this->$field;
      }
    }
    return $attributes;
  }
}

class Personnel extends DatabaseObject {
  protected static $table_name = "personnel";

  //this is the property I am trying to access in DatabaseObject
  protected static $db_fields = array('id', 'username', 'password', 'first_name', 'last_name', 'email', 'permissions');

public static function authenticate($username="", $password="") {
    global $database;
    $username = $database->escape_value($username);
    $password = $database->escape_value($password);

    $sql = "SELECT * FROM " . self::$table_name . " ";
    $sql .= "WHERE username = '{$username}' ";
    $sql .= "AND password = '{$password}' ";
    $sql .= "LIMIT 1";

    $result_array = parent::find_by_sql($sql);
    return !empty($result_array) ? array_shift($result_array) : false;

}
} 
```

## 我得到的错误：

```
Fatal error: Access to undeclared static property: DatabaseObject::$db_fields 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:08:49.320

对我来说很好。该错误听起来像您有一个`DatabaseObject`实例而不是一个`Personnel`实例。

# php - 如何显示“最受欢迎”标签

> ID：10768227
> 
> 赞同：0
> 
> 时间：2012-05-26T17:04:35.907
> 
> 标签：php, mysql, tags

我有一个输入框，用户可以在其中输入标签，当他们提出问题时。它们用逗号分隔，如下所示：

```
test1, test2, test3, test4 
```

我的`questions`表结构是：

![在此处输入图像描述](../Images/ae946ad22f3f25f746bf9e512409a285.png)

为了显示我刚刚使用的问题的标签，`explode(",", $qinfo['tags'])`然后是一个`foreach`循环。

但是，我不知道如何在单独的“流行标签”页面上显示从最流行到最不流行的标签。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T17:07:35.553

您应该将标签单独放入其他表中（不以逗号分隔）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T17:20:09.113

您应该创建`tags`和`questions_tags`表。

```
tags
----
id
name

questions_tags
-------------
id
question_id
tag_id 
```

并获取按受欢迎程度排序的标签：

```
SELECT t.id, t.name, COUNT(qt.id) AS total
FROM tags t
LEFT JOIN questions_tags qt ON t.id=qt.tag_id
GROUP BY t.id, t.name
ORDER BY total DESC 
```

但我建议您将该`tags`字段保留在`questions`表格中。将其用于缓存。例如：如果您显示单个问题，则无需查询`tags`and`questions_tags`表。

# c# - 在按钮上的两个 WPF 渐变之间创建过渡？

> ID：10768231
> 
> 赞同：1
> 
> 时间：2012-05-26T17:05:03.470
> 
> 标签：c#, wpf, xaml

我有这个按钮：

![在此处输入图像描述](../Images/c57181595fc950ec25fc7717c2cb3c6a.png)

由以下 XAML 代码组成：

```
<Style TargetType="{x:Type Button}" x:Key="GreenButtonStyle" BasedOn="{StaticResource {x:Type Button}}">
    <Setter Property="Foreground" Value="#fff" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border Name="border" BorderThickness="1" BorderBrush="#446c06" CornerRadius="3" Background="{TemplateBinding Background}">
                    <Border BorderBrush="#55ffffff" BorderThickness="1" CornerRadius="3" Padding="6,4">
                        <Grid>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Name="contentShadow" Style="{StaticResource ShadowStyle}">
                                <ContentPresenter.RenderTransform>
                                    <TranslateTransform X="1.0" Y="1.0" />
                                </ContentPresenter.RenderTransform>
                            </ContentPresenter>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Name="content" />
                        </Grid>
                    </Border>
                </Border>

                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="False">
                        <Setter Property="Background">
                            <Setter.Value>
                                <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                                    <GradientStop Color="#aae64b" Offset="0"/>
                                    <GradientStop Color="#7eb922" Offset="0.16"/>
                                    <GradientStop Color="#6aa016" Offset="0.57"/>
                                    <GradientStop Color="#649714" Offset="0.86"/>
                                    <GradientStop Color="#7eb922" Offset="1"/>
                                </LinearGradientBrush>
                            </Setter.Value>
                        </Setter>
                    </Trigger>

                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background">
                            <Setter.Value>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                    <GradientStop Color="#bbf75c" Offset="0"/>
                                    <GradientStop Color="#8fba33" Offset="0.16"/>
                                    <GradientStop Color="#7bb127" Offset="0.57"/>
                                    <GradientStop Color="#75a825" Offset="0.86"/>
                                    <GradientStop Color="#8fca33" Offset="1"/>
                                </LinearGradientBrush>
                            </Setter.Value>
                        </Setter>
                    </Trigger>

                    <Trigger Property="IsPressed" Value="True">
                        <Setter Property="Background" >
                            <Setter.Value>
                                <LinearGradientBrush StartPoint="0,1" EndPoint="0,0" >
                                    <GradientStop Color="#aae64b" Offset="0"/>
                                    <GradientStop Color="#7eb922" Offset="0.16"/>
                                    <GradientStop Color="#6aa016" Offset="0.57"/>
                                    <GradientStop Color="#649714" Offset="0.86"/>
                                    <GradientStop Color="#7eb922" Offset="1"/>
                                </LinearGradientBrush>
                            </Setter.Value>
                        </Setter>

                        <Setter TargetName="content" Property="RenderTransform" >
                            <Setter.Value>
                                <TranslateTransform Y="1.0" />
                            </Setter.Value>
                        </Setter>
                    </Trigger>

                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

一切都很好，除了我想在鼠标状态（按下+正常+悬停）之间进行转换/动画。

我在网上找到了一些指南，它们为每个渐变停止属性设置动画，但我不想这样做。我只是想在渐变之间进行直接过渡。

有没有一种简单的方法可以在不为每个渐变停止属性设置动画的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T12:55:54.593

正如 Erno 所指出的，没有`LinearGradientAnimation`，但它可以以与`ColorAnimation`作品相同的方式创建。如果我们查看 的实现，`ColorAnimation`我们会发现它使用了辅助函数，例如

*   `AddColor(Color value1, Color value2)`
*   `SubtractColor(Color value1, Color value2)`
*   `ScaleColor(Color value, double factor)`
*   `InterpolateColor(Color from, Color to, double progress)`

要创建 a`LinearGradientAnimation`我们需要相同的功能，但使用 for`LinearGradientBrush`而不是`Color`. 我创建了这样一个动画，它似乎按预期工作。一个要求是`To`和`From`value 具有相同数量的`GradientStops`。

可以这样使用

```
<Storyboard>
    <ani:LinearGradientAnimation Storyboard.TargetProperty="Background" 
                                 Duration="0:0:0.2"
                                 From="{StaticResource NormalBrush}"
                                 To="{StaticResource MouseOverBrush}"/>
</Storyboard> 
```

在你的情况下，它会是这样的..

```
<LinearGradientBrush x:Key="NormalBrush" EndPoint="0,1" StartPoint="0,0">
    <GradientStop Color="#aae64b" Offset="0"/>
    <GradientStop Color="#7eb922" Offset="0.16"/>
    <GradientStop Color="#6aa016" Offset="0.57"/>
    <GradientStop Color="#649714" Offset="0.86"/>
    <GradientStop Color="#7eb922" Offset="1"/>
</LinearGradientBrush>

<LinearGradientBrush x:Key="MouseOverBrush" StartPoint="0,0" EndPoint="0,1">
    <GradientStop Color="#bbf75c" Offset="0"/>
    <GradientStop Color="#8fba33" Offset="0.16"/>
    <GradientStop Color="#7bb127" Offset="0.57"/>
    <GradientStop Color="#75a825" Offset="0.86"/>
    <GradientStop Color="#8fca33" Offset="1"/>
</LinearGradientBrush>

<LinearGradientBrush x:Key="PressedBrush" StartPoint="0,1" EndPoint="0,0" >
    <GradientStop Color="#aae64b" Offset="0"/>
    <GradientStop Color="#7eb922" Offset="0.16"/>
    <GradientStop Color="#6aa016" Offset="0.57"/>
    <GradientStop Color="#649714" Offset="0.86"/>
    <GradientStop Color="#7eb922" Offset="1"/>
</LinearGradientBrush>

<Style x:Key="GreenButtonStyle"
        TargetType="{x:Type Button}"               
        BasedOn="{StaticResource {x:Type Button}}">
    <Setter Property="Foreground" Value="#fff" />
    <Setter Property="Background" Value="{StaticResource NormalBrush}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border Name="border" BorderThickness="1" BorderBrush="#446c06" CornerRadius="3" Background="{TemplateBinding Background}">
                    <Border BorderBrush="#55ffffff" BorderThickness="1" CornerRadius="3" Padding="6,4">
                        <Grid>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Name="contentShadow">
                                <ContentPresenter.RenderTransform>
                                    <TranslateTransform X="1.0" Y="1.0" />
                                </ContentPresenter.RenderTransform>
                            </ContentPresenter>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Name="content" />
                        </Grid>
                    </Border>
                </Border>

                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Trigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <ani:LinearGradientAnimation Storyboard.TargetProperty="Background" 
                                                                    Duration="0:0:0.2"
                                                                    To="{StaticResource MouseOverBrush}"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </Trigger.EnterActions>
                        <Trigger.ExitActions>
                            <StopStoryboard BeginStoryboardName="mouseUpStoryboard"/>
                            <BeginStoryboard x:Name="mouseLeaveStoryboard">
                                <Storyboard>
                                    <ani:LinearGradientAnimation Storyboard.TargetProperty="Background" 
                                                                    Duration="0:0:0.2"
                                                                    To="{StaticResource NormalBrush}"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </Trigger.ExitActions>
                    </Trigger>

                    <Trigger Property="IsPressed" Value="True">
                        <Trigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <ani:LinearGradientAnimation Storyboard.TargetProperty="Background" 
                                                                Duration="0:0:0.2"
                                                                To="{StaticResource PressedBrush}"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </Trigger.EnterActions>
                        <Trigger.ExitActions>
                            <BeginStoryboard x:Name="mouseUpStoryboard">
                                <Storyboard>
                                    <ani:LinearGradientAnimation Storyboard.TargetProperty="Background" 
                                                                Duration="0:0:0.2"
                                                                To="{StaticResource MouseOverBrush}"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </Trigger.ExitActions>
                        <Setter TargetName="content" Property="RenderTransform" >
                            <Setter.Value>
                                <TranslateTransform Y="1.0" />
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

在这里上传了一个小示例应用程序`LinearGradientAnimation`：[LinearGradientAnimationDemo.zip](https://www.dropbox.com/s/1ngd2p4ezo6x6ec/LinearGradientAnimationDemo.zip?dl=0)

*线性渐变动画.cs*

```
public class LinearGradientAnimation : AnimationTimeline
{
    #region Dependency Properties

    public static readonly DependencyProperty FromProperty =
         DependencyProperty.Register("From",
                                     typeof(LinearGradientBrush),
                                     typeof(LinearGradientAnimation),
                                     new PropertyMetadata(null, AnimationFunction_Changed));

    public static readonly DependencyProperty ToProperty =
        DependencyProperty.Register("To",
                                    typeof(LinearGradientBrush),
                                    typeof(LinearGradientAnimation),
                                    new PropertyMetadata(null, AnimationFunction_Changed));

    public static readonly DependencyProperty ByProperty = 
        DependencyProperty.Register("By",
                                    typeof(LinearGradientBrush),
                                    typeof(LinearGradientAnimation),
                                    new PropertyMetadata(null, AnimationFunction_Changed));

    public static readonly DependencyProperty EasingFunctionProperty =
        DependencyProperty.Register("EasingFunction",
                                    typeof(IEasingFunction),
                                    typeof(LinearGradientAnimation));

    private static void AnimationFunction_Changed(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        LinearGradientAnimation linearGradientAnimation = (LinearGradientAnimation)d;
        linearGradientAnimation._isAnimationFunctionValid = false;
    }

    #endregion // Dependency Properties

    #region Private Fields

    private LinearGradientBrush[] _keyValues;
    private AnimationType _animationType;
    private bool _isAnimationFunctionValid;

    #endregion // Private Fields

    #region Constructor

    public LinearGradientAnimation()
    {
    }

    public LinearGradientAnimation(LinearGradientBrush toValue, Duration duration)
        : this()
    {
        this.To = toValue;
        base.Duration = duration;
    }

    public LinearGradientAnimation(LinearGradientBrush toValue, Duration duration, FillBehavior fillBehavior)
        : this()
    {
        this.To = toValue;
        base.Duration = duration;
        base.FillBehavior = fillBehavior;
    }

    public LinearGradientAnimation(LinearGradientBrush fromValue, LinearGradientBrush toValue, Duration duration)
        : this()
    {
        this.From = fromValue;
        this.To = toValue;
        base.Duration = duration;
    }

    public LinearGradientAnimation(LinearGradientBrush fromValue, LinearGradientBrush toValue, Duration duration, FillBehavior fillBehavior)
        : this()
    {
        this.From = fromValue;
        this.To = toValue;
        base.Duration = duration;
        base.FillBehavior = fillBehavior;
    }

    #endregion // Constructor

    #region Properties

    public LinearGradientBrush From
    {
        get { return (LinearGradientBrush)base.GetValue(LinearGradientAnimation.FromProperty); }
        set { base.SetValue(LinearGradientAnimation.FromProperty, value); }
    }

    public LinearGradientBrush To
    {
        get { return (LinearGradientBrush)base.GetValue(LinearGradientAnimation.ToProperty); }
        set { base.SetValue(LinearGradientAnimation.ToProperty, value); }
    }

    public LinearGradientBrush By
    {
        get { return (LinearGradientBrush)base.GetValue(LinearGradientAnimation.ByProperty); }
        set { base.SetValue(LinearGradientAnimation.ByProperty, value); }
    }

    public IEasingFunction EasingFunction
    {
        get { return (IEasingFunction)base.GetValue(LinearGradientAnimation.EasingFunctionProperty); }
        set { base.SetValue(LinearGradientAnimation.EasingFunctionProperty, value); }
    }

    public bool IsAdditive
    {
        get { return (bool)base.GetValue(AnimationTimeline.IsAdditiveProperty); }
        set { base.SetValue(AnimationTimeline.IsAdditiveProperty, value); }
    }

    public bool IsCumulative
    {
        get { return (bool)base.GetValue(AnimationTimeline.IsCumulativeProperty); }
        set { base.SetValue(AnimationTimeline.IsCumulativeProperty, value); }
    }

    #endregion // Properties

    #region Private Methods

    protected LinearGradientBrush GetCurrentValueCore(LinearGradientBrush defaultOriginValue, LinearGradientBrush defaultDestinationValue, AnimationClock animationClock)
    {
        if (!this._isAnimationFunctionValid)
        {
            this.ValidateAnimationFunction();
        }
        double num = animationClock.CurrentProgress.Value;
        IEasingFunction easingFunction = this.EasingFunction;
        if (easingFunction != null)
        {
            num = easingFunction.Ease(num);
        }
        LinearGradientBrush brush = null;
        LinearGradientBrush brush2 = null;
        LinearGradientBrush value = null;
        LinearGradientBrush value2 = null;
        switch (this._animationType)
        {
        case AnimationType.Automatic:
            brush = defaultOriginValue;
            brush2 = defaultDestinationValue;
            value = GetDefaultLinearGradientBrush(brush);
            value2 = GetDefaultLinearGradientBrush(brush);
            break;
        case AnimationType.From:
            brush = this._keyValues[0];
            brush2 = defaultDestinationValue;
            value = GetDefaultLinearGradientBrush(brush);
            value2 = GetDefaultLinearGradientBrush(brush);
            break;
        case AnimationType.To:
            brush = defaultOriginValue;
            brush2 = this._keyValues[0];
            value = GetDefaultLinearGradientBrush(brush2);
            value2 = GetDefaultLinearGradientBrush(brush2);
            break;
        case AnimationType.By:
            brush2 = this._keyValues[0];
            value2 = defaultOriginValue;
            value = GetDefaultLinearGradientBrush(brush2);
            value2 = GetDefaultLinearGradientBrush(brush2);
            break;
        case AnimationType.FromTo:
            brush = this._keyValues[0];
            brush2 = this._keyValues[1];
            value = GetDefaultLinearGradientBrush(brush);
            value2 = GetDefaultLinearGradientBrush(brush);
            if (this.IsAdditive)
            {
                value2 = defaultOriginValue;
            }
            break;
        case AnimationType.FromBy:
            brush = this._keyValues[0];
            brush2 = AddLinearGradientBrush(this._keyValues[0], this._keyValues[1]);
            value = GetDefaultLinearGradientBrush(brush);
            value2 = GetDefaultLinearGradientBrush(brush);
            if (this.IsAdditive)
            {
                value2 = defaultOriginValue;
            }
            break;
        }

        if (this.IsCumulative)
        {
            double num2 = (double)(animationClock.CurrentIteration - 1).Value;
            if (num2 > 0.0)
            {
                LinearGradientBrush value3 = SubtractLinearGradientBrush(brush2, brush);
                value = ScaleLinearGradientBrush(value3, num2);
            }
        }
        LinearGradientBrush returnBrush = AddLinearGradientBrush(value2, AddLinearGradientBrush(value, InterpolateGradientBrush(brush, brush2, num)));
        return returnBrush;
    }

    private LinearGradientBrush GetDefaultLinearGradientBrush(LinearGradientBrush brush)
    {
        LinearGradientBrush returnBrush = new LinearGradientBrush();
        returnBrush.StartPoint = default(Point);
        returnBrush.EndPoint = default(Point);
        for (int i = 0; i < brush.GradientStops.Count; i++)
        {
            returnBrush.GradientStops.Add(new GradientStop(default(Color), default(double)));
        }
        return returnBrush;
    }

    private void ValidateAnimationFunction()
    {
        this._animationType = AnimationType.Automatic;
        this._keyValues = null;
        if (this.From != null)
        {
            if (this.To != null)
            {
                this._animationType = AnimationType.FromTo;
                this._keyValues = new LinearGradientBrush[2];
                this._keyValues[0] = this.From;
                this._keyValues[1] = this.To;
            }
            else
            {
                if (this.By != null)
                {
                    this._animationType = AnimationType.FromBy;
                    this._keyValues = new LinearGradientBrush[2];
                    this._keyValues[0] = this.From;
                    this._keyValues[1] = this.By;
                }
                else
                {
                    this._animationType = AnimationType.From;
                    this._keyValues = new LinearGradientBrush[1];
                    this._keyValues[0] = this.From;
                }
            }
        }
        else
        {
            if (this.To != null)
            {
                this._animationType = AnimationType.To;
                this._keyValues = new LinearGradientBrush[1];
                this._keyValues[0] = this.To;
            }
            else
            {
                if (this.By != null)
                {
                    this._animationType = AnimationType.By;
                    this._keyValues = new LinearGradientBrush[1];
                    this._keyValues[0] = this.By;
                }
            }
        }
        this._isAnimationFunctionValid = true;
    }

    #endregion // Private Methods

    #region AnimationTimeline / Freezable Members

    public override Type TargetPropertyType
    {
        get { return typeof(LinearGradientBrush); }
    }

    public override object GetCurrentValue(object defaultOriginValue, object defaultDestinationValue, AnimationClock animationClock)
    {
        if (defaultOriginValue == null)
        {
            throw new ArgumentNullException("defaultOriginValue");
        }
        if (defaultDestinationValue == null)
        {
            throw new ArgumentNullException("defaultDestinationValue");
        }
        return this.GetCurrentValue((LinearGradientBrush)defaultOriginValue, (LinearGradientBrush)defaultDestinationValue, animationClock);
    }

    public LinearGradientBrush GetCurrentValue(LinearGradientBrush defaultOriginValue, LinearGradientBrush defaultDestinationValue, AnimationClock animationClock)
    {
        base.ReadPreamble();
        if (animationClock == null)
        {
            throw new ArgumentNullException("animationClock");
        }
        if (animationClock.CurrentState == ClockState.Stopped)
        {
            return defaultDestinationValue;
        }
        return this.GetCurrentValueCore(defaultOriginValue, defaultDestinationValue, animationClock);
    }

    public new LinearGradientAnimation Clone()
    {
        return (LinearGradientAnimation)base.Clone();
    }

    protected override Freezable CreateInstanceCore()
    {
        return new LinearGradientAnimation();
    }

    #endregion // AnimationTimeline / Freezable Members

    #region Helper Methods

    internal static LinearGradientBrush AddLinearGradientBrush(LinearGradientBrush brush1, LinearGradientBrush brush2)
    {
        LinearGradientBrush gradientBrush = new LinearGradientBrush();
        gradientBrush.StartPoint = AddPoint(brush1.StartPoint, brush2.StartPoint);
        gradientBrush.EndPoint = AddPoint(brush1.EndPoint, brush2.EndPoint);
        for (int i = 0; i < brush1.GradientStops.Count; i++)
        {
            GradientStop gradientStop1 = brush1.GradientStops[i];
            GradientStop gradientStop2 = brush2.GradientStops[i];

            Color color = AddColor(gradientStop1.Color, gradientStop2.Color);
            double offset = AddDouble(gradientStop1.Offset, gradientStop2.Offset);

            gradientBrush.GradientStops.Add(new GradientStop(color, offset));
        }
        return gradientBrush;
    }
    internal static LinearGradientBrush SubtractLinearGradientBrush(LinearGradientBrush brush1, LinearGradientBrush brush2)
    {
        LinearGradientBrush gradientBrush = new LinearGradientBrush();
        gradientBrush.StartPoint = SubtractPoint(brush1.StartPoint, brush2.StartPoint);
        gradientBrush.EndPoint = SubtractPoint(brush1.EndPoint, brush2.EndPoint);
        for (int i = 0; i < brush1.GradientStops.Count; i++)
        {
            GradientStop gradientStop1 = brush1.GradientStops[i];
            GradientStop gradientStop2 = brush2.GradientStops[i];

            Color color = SubtractColor(gradientStop1.Color, gradientStop2.Color);
            double offset = SubtractDouble(gradientStop1.Offset, gradientStop2.Offset);

            gradientBrush.GradientStops.Add(new GradientStop(color, offset));
        }
        return gradientBrush;
    }
    internal static LinearGradientBrush ScaleLinearGradientBrush(LinearGradientBrush value, double factor)
    {
        LinearGradientBrush gradientBrush = new LinearGradientBrush();
        gradientBrush.StartPoint = ScalePoint(value.StartPoint, factor);
        gradientBrush.EndPoint = ScalePoint(value.EndPoint, factor);
        for (int i = 0; i < value.GradientStops.Count; i++)
        {
            Color color = ScaleColor(value.GradientStops[i].Color, factor);
            double offset = ScaleDouble(value.GradientStops[i].Offset, factor);
            gradientBrush.GradientStops.Add(new GradientStop(color, offset));
        }
        return gradientBrush;
    }
    internal static LinearGradientBrush InterpolateGradientBrush(LinearGradientBrush from, LinearGradientBrush to, double progress)
    {
        LinearGradientBrush gradientBrush = new LinearGradientBrush();
        gradientBrush.StartPoint = InterpolatePoint(from.StartPoint, to.StartPoint, progress);
        gradientBrush.EndPoint = InterpolatePoint(from.EndPoint, to.EndPoint, progress);
        for (int i = 0; i < from.GradientStops.Count; i++)
        {
            Color color = InterpolateColor(from.GradientStops[i].Color, to.GradientStops[i].Color, progress);
            double offset = InterpolateDouble(from.GradientStops[i].Offset, to.GradientStops[i].Offset, progress);
            gradientBrush.GradientStops.Add(new GradientStop(color, offset));
        }
        return gradientBrush;
    }
    internal static Color AddColor(Color value1, Color value2)
    {
        return value1 + value2;
    }
    internal static Color SubtractColor(Color value1, Color value2)
    {
        return value1 - value2;
    }
    internal static Color ScaleColor(Color value, double factor)
    {
        return value * (float)factor;
    }
    internal static Color InterpolateColor(Color from, Color to, double progress)
    {
        return from + (to - from) * (float)progress;
    }

    internal static double AddDouble(double value1, double value2)
    {
        return value1 + value2;
    }
    internal static double SubtractDouble(double value1, double value2)
    {
        return value1 - value2;
    }
    internal static double ScaleDouble(double value, double factor)
    {
        return value * factor;
    }
    internal static double InterpolateDouble(double from, double to, double progress)
    {
        return from + (to - from) * progress;
    }

    internal static Point AddPoint(Point value1, Point value2)
    {
        return new Point(value1.X + value2.X, value1.Y + value2.Y);
    }
    internal static Point SubtractPoint(Point value1, Point value2)
    {
        return new Point(value1.X - value2.X, value1.Y - value2.Y);
    }
    internal static Point ScalePoint(Point value, double factor)
    {
        return new Point(value.X * factor, value.Y * factor);
    }
    internal static Point InterpolatePoint(Point from, Point to, double progress)
    {
        return from + (to - from) * progress;
    }

    #endregion // Helper Methods
} 
```

你还需要

```
internal enum AnimationType : byte
{
    Automatic,
    From,
    To,
    By,
    FromTo,
    FromBy
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T17:34:22.117

您可以叠加两个矩形，每个矩形都填充有渐变，并为顶部矩形的不透明度设置动画。

这可能看起来不错或不好看，具体取决于您对过渡的期望。

如果你喜欢冒险：没有 LinearGradientAnimation 但你可以做到......

# .net - VB.NET 抛出“对象引用未设置为对象的实例”异常

> ID：10768233
> 
> 赞同：0
> 
> 时间：2012-05-26T17:05:32.600
> 
> 标签：.net, vb.net, exception

为什么我会得到这个异常？

> 你调用的对象是空的。

和：

```
wb.Document.GetElementById("formfieldv1").InnerText = "some value" 
```

`wb`控件的名称在哪里`WebBrowser`。

这是所有代码：

```
Private Sub btnSend_Click(sender As System.Object, e As System.EventArgs) Handles btnSend.Click
Dim strFrom As String = txtFrom.Text
Dim strTo As String = txtTo.Text
Dim strMsg As String = txtMsg.Text
wb.Document.GetElementById("formfieldv1").InnerText = strFrom ' strFrom fills fine
End Sub 
```

* * *

**更新**

正如评论中所建议的，我修改了这样的代码：

```
 Dim doc = wb.Document

  If (doc Is Nothing) Then
     MsgBox("doc is nothing")
  End If

  Dim el = wb.Document.GetElementById("formfieldv1")

  If (el Is Nothing) Then
     MsgBox("el is nothing")
  Else
     el.InnerText = strFrom
  End If 
```

有了这个，我得到了`el is nothing`。我现在该如何解决？

* * *

或者，如果你们可以帮助我解决这个问题，也可以解决我的问题：

[如何使用 Web 浏览器控件填写 html 表单](https://stackoverflow.com/questions/10767434/how-to-fill-html-form-using-web-browser-control)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:44:43.037

我认为这是一个很好的例子，说明为什么将操作分解为多行而不是尝试在一行中执行许多操作是很好的，尤其是当可以返回空值时。

如果你拿`wb.Document.GetElementById("formfieldv1").InnerText = "some value"`

并将其分解为

```
var document = wb.Document;
var element = document.GetElementById("formfieldv1");
element.InnerText = "some value"; 
```

当抛出异常时，失败的原因会更加明显。单步执行代码时也更容易检查每个操作的结果。从编译的角度来看，它没有任何区别，它最终会被编译成相同的 IL。

我认为在一行代码中做尽可能多的事情往往是一种自然的愿望，但我认为在许多情况下它会损害可读性和调试能力。

# c++ - C++ 中的列表实现

> ID：10768252
> 
> 赞同：-1
> 
> 时间：2012-05-26T17:07:41.593
> 
> 标签：c++, list

这次我没有问题，但我只是在寻找 List implementationetion，只是一个简单的 List，其中包含 Node(int,nextNode) 之类的节点。我过去做过很多次，但我的 c++ 有点生锈了。你能和我分享一下吗？我正在查看我的存档，在 github 上，但我没有找到 antyhing。

编辑：

*****我决定做我的，但我不明白为什么在使用 delete 后我仍然可以得到 cout<getWrt()<*****

 **```
#include <cstdio>
#include <cmath>
#include<iostream>

using namespace std;

class Node{

public:
    Node(Node* next, int wrt){
        this->next = next;
        this->wrt = wrt;

    }

    Node(const Node& obiekt){
        this->wrt = obiekt.wrt;
        this->next = obiekt.next;
    }
    ~Node(){}

    void show(){
        cout<<this->wrt<<endl;
    }

    int getWrt(){
        return this->wrt;
    }

    Node* getNext(){
        return this->next;
    }

 private:
    Node* next;
    int wrt;

};

int main()
{
Node* n  = new Node(NULL, 2);
n->show();
Node* n2 = new Node(*n);
n2->show();
delete n;
n->show();
n2->show();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T17:23:53.993

基本列表实现通常称为单链表（或在函数式语言中称为 cons-list）。

函数定义直接切入列表的结构：

```
List := Empty | Cons T List 
```

当然，这在 C 或 C++ 中并不真正起作用，因此我们需要将结构一分为二：

*   该列表被实现为一个节点链
*   List 类隐藏了这个实现细节

这是一些简单的代码：

```
template <typename T>
struct Node {
    Node(T t): element(t) {}

    T element;
    std::unique_ptr<Node> next;
};

template <typename T>
class List {
    typedef Node<T> N;
public:
    List() {}

    bool empty() const { return head == nullptr; }

    T& front() { assert(!this->empty()); return head->elem; }
    T const& front() const { { assert(!this->empty()); return head->elem; }

    void pop() { assert(!this->empty()); swap(head, head->next); }

    void push(T t) {
        std::unique_ptr<N> n{ new Node {t} };

        n->next = std::move(head);

        head = std::move(n);
     }

private:
    std::unique_ptr<N> head;
}; 
```

如您所见，此列表只是作为堆栈实现，没有迭代等......不过，这是一个好的开始:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T17:12:45.900

正如 aix 所说，你最好的选择是选择...

*   std::list，它是一个双向链表，这意味着它以向后遍历速度换取内存使用量*或*
*   不太广泛实现的 std::slist（在 C++11 中称为 forward_list），它是单链接的，只能以一种方式遍历。

[当然，cplusplus.com 有这两者的参考信息。](http://www.cplusplus.com/reference/stl/)

作为 STL 的一部分，这两个列表实现都经过了广泛的测试、调整和调试。两者都支持标准的 STL 算法。几乎没有理由不使用它们。**

# php - $.ajax 值未正确返回

> ID：10768253
> 
> 赞同：1
> 
> 时间：2012-05-26T17:07:53.470
> 
> 标签：php, jquery

我正在尝试从数据库中获取从 PHP 数组到 JavaScript 数组的返回值。到目前为止，我所做的是将值作为字符串返回，并且我希望每个值都作为数组索引。

这是我的 jQuery AJAX 调用：

```
 $.ajax({
          type: 'GET',
          url: "Profile_Control.php",
          data:"ajaxRequest=yes&id="+document.getElementById("compid").value,
          success:function(data)
          {       
              document.getElementById("asd").innerHTML=data;
          }
        }); 
```

到目前为止，这是我的 PHP 脚本，它像字符串一样返回值，我想要数组索引中的每个值。

```
 $branches=Profile_Model::getCompanyBranches($_GET['id']);

    while($row=mysql_fetch_array($branches))
    {
        echo $row[3];
    } 
```

现在我只回显从数据库返回的值的第 3 列，输出如下所示：

```
 67.030867.020467.031167.020667.0357 
```

我想要的结果应该是这样的。

```
 arr[0]=67.0308
   arr[1]=67.0204
   arr[2]=67.0311
   arr[3]=67.0206
   arr[4]=67.0357 
```

我还尝试使用 JSON 对数据进行编码，`json_encode($row[3]);`但它返回了以下结果。

```
 "67.0308""67.0204""67.0311""67.0206""67.0357" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:11:08.633

创建一个数组，其中包含您最终想要在 JS 数组中的元素，然后`json_encode`是该数组：

```
$rows = array();
while($row=mysql_fetch_array($branches)) {
    $rows[] = $row[3];
}
echo json_encode($rows); 
```

但是，`data`将是成功回调中的一个数组，因此您不能简单地将其分配给`innerHTML`元素的属性。但由于这似乎是调试输出，只需将其替换为`console.log(data);`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T17:12:16.290

创建一个包含每个元素`$row[3]`的新数组，通过 发送新数组`json_encode`。

现在你只是 json_encoding 每个`$row[3]`单独。

# ios - 替换 iOS ALAssetsLibrary 中的 ALAsset 对象

> ID：10768257
> 
> 赞同：2
> 
> 时间：2012-05-26T17:08:58.213
> 
> 标签：ios, xcode, cocoa, alassetslibrary, alasset

我正在开发一个应用程序，它读取图像的地理位置并允许用户修改此信息并将此数据写回。我使用 writeImageDataToSavedPhotosAlbum 函数成功读取数据、操作和写入库。问题是它不是更新原始图像，而是创建一个新图像。

我怎样才能更换或更新该项目？

```
[...]

NSMutableDictionary *EXIFDictionary = [[[metadata objectForKey:(NSString *)kCGImagePropertyExifDictionary]mutableCopy]autorelease];
NSMutableDictionary *GPSDictionary  = [[[metadata objectForKey:(NSString *)kCGImagePropertyGPSDictionary]mutableCopy]autorelease];
NSMutableDictionary *TIFFDictionray = [[[metadata objectForKey:(NSString *)kCGImagePropertyTIFFDictionary]mutableCopy]autorelease];

Byte *buffer = (Byte*)malloc(representation.size);
NSUInteger buffered = [representation getBytes:buffer fromOffset:0.0 length:representation.size error:nil];
NSData *imageData = [NSData dataWithBytesNoCopy:buffer length:buffered freeWhenDone:YES]; //this is NSData may be what you want

if(!EXIFDictionary) {
    //if the image does not have an EXIF dictionary (not all images do), then create one for us to use
    EXIFDictionary = [NSMutableDictionary dictionary];
}
if(!GPSDictionary) {
    GPSDictionary = [NSMutableDictionary dictionary];
}
if(!TIFFDictionray) {
    TIFFDictionray = [NSMutableDictionary dictionary];
}

[TIFFDictionray setObject:@"This should be the image description" forKey:(NSString*)kCGImagePropertyTIFFImageDescription];
[EXIFDictionary setObject:@"This should be the user comment" forKey:(NSString*)kCGImagePropertyExifUserComment];

[metadataAsMutable setObject:TIFFDictionray forKey:(NSString*)kCGImagePropertyTIFFDictionary];
[metadataAsMutable setObject:EXIFDictionary forKey:(NSString*)kCGImagePropertyExifDictionary];

__block NSDate *date = [[NSDate date] retain];

ALAssetsLibrary *library = [[ALAssetsLibrary alloc]init];

[library writeImageDataToSavedPhotosAlbum:imageData metadata:metadataAsMutable completionBlock:^(NSURL *assetURL, NSError *error) {
    NSLog(@"Saving Time: %g", [[NSDate date] timeIntervalSinceDate:date]);
    [date release];
}];

[...] 
```

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T17:21:12.937

您只能更改您的应用程序创建的照片（请参阅`editable`属性的文档`ALAsset`）。为此，请调用`setImageData:metadata:completionBlock:`代表`ALAsset`照片的 。

还有一种`writeModifiedImageDataToSavedPhotosAlbum:metadata:completionBlock:`方法，但它总是创建一个新资产，该资产被认为是原始资产的修改版本（我不确定如何使用该信息）。

# ruby-on-rails - solr 太阳黑子 - 搜索 belongs_to 关联

> ID：10768267
> 
> 赞同：4
> 
> 时间：2012-05-26T17:10:43.190
> 
> 标签：ruby-on-rails, ruby-on-rails-3, solr, full-text-search, sunspot

我有一个属于多个其他表的织物模型。

```
class Fabric < ActiveRecord::Base
  validates :name, presence: true
  belongs_to :design
  belongs_to :composition
  belongs_to :collection
  belongs_to :style
  belongs_to :origin
  belongs_to :texture
  belongs_to :supplier
  has_and_belongs_to_many :colours

  searchable do
    text :name, :boost => 5 
    text :description
    text :composition do
      composition.name
   end
    text :collection do
      collection.name
    end
   text :style do
     style.name
   end
   text :origin do
     origin.name
   end
   text :texture do
     texture.name
  end
   text :supplier do
      supplier.name
  end
  end
  end 
```

我已经设置了所有反向关联（Has_many）等。但是我似乎无法获得全文搜索来查询所有这些关联表的名称字段。

任何帮助将不胜感激。

```
 @search = Fabric.search do
    fulltext params[:search]
  end
  @fabrics = @search.results 
```

罗斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T15:48:26.920

如果某些关联可以为零，请不要忘记对其进行测试，否则在重建索引时会出错

```
text :collection do 
  collection.name if collection
end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-26T17:32:24.100

您需要在全文中传递块以指定要搜索的字段。

```
@search = Fabric.search do
  fulltext params[:search] do
    fields(:collection, :style, :origin)
  end
  .....
end 
```

这是您在可搜索块中索引的方式。Solr 从文档的角度思考。它不关心它是否是一个协会。

```
searchable do 
  text :collection do 
    collection.text 
  end
end 
```

然后重新索引。

查看更多详细信息[https://github.com/sunspot/sunspot#full-text](https://github.com/sunspot/sunspot#full-text)

[https://github.com/sunspot/sunspot#setting-up-objects](https://github.com/sunspot/sunspot#setting-up-objects)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-26T17:29:49.720

看起来您在模型更新后没有重新索引数据。

运行以下命令重新索引：

```
bundle exec rake sunspot:solr:reindex 
```

# matlab - matlab gui单选按钮

> ID：10768273
> 
> 赞同：0
> 
> 时间：2012-05-26T17:11:28.793
> 
> 标签：matlab, user-interface, radio-button

我正在尝试@Amro 的建议，我更改了部分代码，但出现了一些错误：/

请帮我。

我将选项设置为：

```
options = {
    {'r','g','b','c','m','y','k'} ;
    {'x','o','.','s'} ;
    {'1','2','3'} ;
    {'2','3'} ;
    {'1','3'} ;
    {'1','2'}
}; 
```

现在，我在matlab中写道：

```
mainGUI(options) 
```

我得到了这些错误：

```
??? Index exceeds matrix dimensions.

Error in ==> tmp>secondaryGUI at 67
        if strcmp(selected{i},options{i}{j})

Error in ==> tmp>callback at 17
    hOptsGUI = secondaryGUI(hFig);

??? Error while evaluating uicontrol Callback 
```

这是代码：

```
function  mainGUI(options)
    %# current options
    opts = {'r', '.', '1'};

    %# create main figure, with plot and options button
    hFig = figure;
    callback

    %# options button callback function
    function callback(o,e)
        %# save current options (sharing data between the two GUIs)
        setappdata(hFig, 'opts',opts);

        %# display options dialog and wait for it
        hOptsGUI = secondaryGUI(hFig, options);
        waitfor(hOptsGUI);

        %# get new options, and update plot accordingly
        opts = getappdata(hFig, 'opts');
        opts
    end
end

function hFig = secondaryGUI(hParentFig, options)
    %# create figure
    hFig = figure('Menubar','none', 'Resize','off', ...
    'WindowStyle','modal', 'Position',[100 100 350 200]);
    movegui(hFig, 'center');

    %# all possible plot options

    options = cellfun(@(c) c(end:-1:1), options, 'Uniform',false);
    num = length(options);

    %# get saved settings
    selected = getappdata(hParentFig, 'opts');

    %# top/bottom panels
    hPanBot = uipanel('Parent',hFig, 'BorderType','none', ...
    'Units','normalized', 'Position',[0 0.0 1 0.2]);
    hPanTop = uipanel('Parent',hFig, 'BorderType','none', ...
    'Units','normalized', 'Position',[0 0.2 1 0.8]);

    %# buttongroups in top panel
    hBtnGrp = zeros(1,num);
    width = 1/num;
    for i=1:num
        %# create button group
        hBtnGrp(i) = uibuttongroup('Parent',hPanTop, ...
            'Units','normalized', 'Position',[(i-1)*width 0 width 1]);
        %# populate it with radio buttons
        height = 1./numel(options{i});
        for j=1:numel(options{i})
            h = uicontrol('Parent',hBtnGrp(i), 'Style','Radio', ...
            'Units','normalized', 'Position',[0.05 (j-1)*height 0.9 height], ...
            'String',options{i}{j});
            %# set initially selected values
            if strcmp(selected{i},options{i}{j})
                set(hBtnGrp(i), 'SelectedObject',h)
            end
        end
    end

    %# save button in bottom panel
    uicontrol('Parent',hPanBot, 'Style','pushbutton', ...
        'Units','normalized', 'Position',[0.3 0.2 0.4 0.6], ...
        'String','start', 'Callback',@callback)

    %# save button callback function
    function callback(o,e)
        %# get selected values
        hObjs = get(hBtnGrp(:), 'SelectedObject');
        vals = get(cell2mat(hObjs),{'String'});

        %# update settings
        setappdata(hParentFig, 'opts',vals);

        %# close options dialog
        close(hFig)
    end
end 
```

也许变量'opts'有问题，因为没有以下值： {'r', '.', '1'} ？

因为我不知道为什么它超过了矩阵维度，选项的长度是 6。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T00:22:29.397

如果我理解正确，您正在设计一个 GUI，使用户能够设置一些参数并返回选定的选项。

[您可以使用GETAPPDATA](http://www.mathworks.com/help/techdoc/ref/getappdata.html) / [SETAPPDATA](http://www.mathworks.com/help/techdoc/ref/setappdata.html)作为数据共享机制，而不是像现在这样立即返回值。

至于布局，使用[面板](http://www.mathworks.com/help/techdoc/ref/uipanel.html)将组件组合在一起，这允许更灵活的 GUI。

这是一个示例应用程序来说明。这个想法是我们有一个包含情节的主要人物，我们提供了第二个“对话框”来自定义情节选项。

```
function mainGUI()
    %# current options
    opts = {'r', '.', '1'};

    %# create main figure, with plot and options button
    hFig = figure;
    hLine = plot(cumsum(rand(100,1)-0.5), ...
        'Color',opts{1}, 'Marker',opts{2}, 'LineWidth',str2double(opts{3}));
    uicontrol('Style','pushbutton', 'String','Options...', 'Callback',@callback)

    %# options button callback function
    function callback(o,e)
        %# save current options (sharing data between the two GUIs)
        setappdata(hFig, 'opts',opts);

        %# display options dialog and wait for it
        hOptsGUI = secondaryGUI(hFig);
        waitfor(hOptsGUI);

        %# get new options, and update plot accordingly
        opts = getappdata(hFig, 'opts');
        set(hLine, 'Color',opts{1}, 'Marker',opts{2}, 'LineWidth',str2double(opts{3}))
    end
end

function hFig = secondaryGUI(hParentFig)
    %# create figure
    hFig = figure('Menubar','none', 'Resize','off', ...
        'WindowStyle','modal', 'Position',[100 100 350 200]);
    movegui(hFig, 'center');

    %# all possible plot options
    options = {
        {'r','g','b','c','m','y','k'} ;    %# color
        {'x','o','.','s'} ;                %# shape
        {'1','2','3'}                      %# width
    };
    options = cellfun(@(c) c(end:-1:1), options, 'Uniform',false);
    num = length(options);

    %# get saved settings
    selected = getappdata(hParentFig, 'opts');

    %# top/bottom panels
    hPanBot = uipanel('Parent',hFig, 'BorderType','none', ...
        'Units','normalized', 'Position',[0 0.0 1 0.2]);
    hPanTop = uipanel('Parent',hFig, 'BorderType','none', ...
        'Units','normalized', 'Position',[0 0.2 1 0.8]);

    %# buttongroups in top panel
    hBtnGrp = zeros(1,num);
    width = 1/num;
    for i=1:num
        %# create button group
        hBtnGrp(i) = uibuttongroup('Parent',hPanTop, ...
            'Units','normalized', 'Position',[(i-1)*width 0 width 1]);
        %# populate it with radio buttons
        height = 1./numel(options{i});
        for j=1:numel(options{i})
            h = uicontrol('Parent',hBtnGrp(i), 'Style','Radio', ...
                'Units','normalized', 'Position',[0.05 (j-1)*height 0.9 height], ...
                'String',options{i}{j});
            %# set initially selected values
            if strcmp(selected{i},options{i}{j})
                set(hBtnGrp(i), 'SelectedObject',h)
            end
        end
    end

    %# save button in bottom panel
    uicontrol('Parent',hPanBot, 'Style','pushbutton', ...
        'Units','normalized', 'Position',[0.3 0.2 0.4 0.6], ...
        'String','Save & Close', 'Callback',@callback)

    %# save button callback function
    function callback(o,e)
        %# get selected values
        hObjs = get(hBtnGrp(:), 'SelectedObject');
        vals = get(cell2mat(hObjs),{'String'});

        %# update settings
        setappdata(hParentFig, 'opts',vals);

        %# close options dialog
        close(hFig)
    end
end 
```

![截屏](../Images/c4f47d53caa27d3f957d9f899d30c749.png)

# ruby - Ruby 语法 '{:age.gt => 60}'，它是如何工作的？

> ID：10768274
> 
> 赞同：3
> 
> 时间：2012-05-26T17:11:35.590
> 
> 标签：ruby, mongoid

我想知道这个语法`{:age.gt => 60}`，我从中找到了这个语法`mongoid`。它是如何工作的？我正在查看mongoid的源代码，它没有对`Symbol`类进行太多扩展，并且有一个`matchers`包含gt.rb，lt.rb，...的目录。这些文件用于条件逻辑：大于，小于比....我无法理解它与`Symbol`课堂的关系。

在普通的 irb 会话中，它显示一个错误：

```
NoMethodError: undefined method `gt' for :age:Symbol 
```

任何人都可以解释我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T17:38:21.773

这是由 mongoid 本身作为[符号变形文件](https://github.com/mongoid/mongoid/blob/2.4.0-stable/lib/mongoid/extensions/symbol/inflections.rb)`Mongoid::Criterion::Complex`的一部分完成的。奇怪的是，这个文件不再存在于 master 分支中，但我在我的项目中使用 2.4.7 并且它存在于那里（它可能只是移动了，但我在 master 中找不到它）。

相当有趣的魔法。魔术我不会认为所有这些都是必要的，`:field => { :$gt => 5 }`对我来说看起来还不错，但无论如何:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T17:39:02.253

请参阅@rfunduk 对当前发布的 2.4.10 版本的回答。

在 master 分支中，它发生了变化。您现在可以在需要的`origin`库中找到它`mongoid`：

[https://github.com/mongoid/origin/blob/master/lib/origin/extensions/symbol.rb](https://github.com/mongoid/origin/blob/master/lib/origin/extensions/symbol.rb)，特别是这个方法：

```
module Origin
  module Extensions
    module Symbol
      # ...
      module ClassMethods
        # Adds a method on symbol as a convenience for the MongoDB operator.
        #
        # @example Add the $in method.
        #   Symbol.add_key(:in, "$in")
        #
        # @param [ Symbol ] name The name of the method.
        # @param [ Symbol ] strategy The name of the merge strategy.
        # @param [ String ] operator The MongoDB operator.
        # @param [ String ] additional The additional MongoDB operator.
        #
        # @since 1.0.0
        def add_key(name, strategy, operator, additional = nil, &block)
          define_method(name) do
            method = "__#{strategy}__".to_sym
            Key.new(self, method, operator, additional, &block)
          end
        end

        # ...
      end
    end
  end
end 
```

它根据主库中列出的匹配器添加 、 等`gt`方法（参见文件和文件夹）。`gte``mongoid``strategies.rb``matchers/`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T17:41:44.203

看起来相关代码在[这里](https://github.com/mongoid/mongoid/blob/2.4.0-stable/lib/mongoid/extensions/symbol/inflections.rb)（`Mongoid::Extensions::Symbol::Inflections`）。有时最容易在运行时使用以下方法深入研究这些内容`Tracer`：

```
require 'tracer'
require 'mongoid'

Tracer.on {
  :test.gt
} 
```

输出

```
#0:(irb):9:Object:-: -
#0:(eval):1:Mongoid::Extensions::Symbol::Inflections:>: -
#0:(eval):2:Mongoid::Extensions::Symbol::Inflections:-: -
#0:/home/abe/.rvm/gems/ruby-1.9.3-p125@deleteme/gems/mongoid-2.4.10/lib/mongoid/criterion/complex.rb:21:Mongoid::Criterion::Complex:>:       def initialize(opts = {})
#0:/home/abe/.rvm/gems/ruby-1.9.3-p125@deleteme/gems/mongoid-2.4.10/lib/mongoid/criterion/complex.rb:22:Mongoid::Criterion::Complex:-:         @key, @operator = opts[:key], opts[:operator]
#0:/home/abe/.rvm/gems/ruby-1.9.3-p125@deleteme/gems/mongoid-2.4.10/lib/mongoid/criterion/complex.rb:23:Mongoid::Criterion::Complex:<:       end
#0:(eval):3:Mongoid::Extensions::Symbol::Inflections:<: - 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T17:18:17.883

### 继续寻找...

...定义范围 DSL 的方法是

*   猴子补丁`Symbol`或者`Object`直接使用方法
*   添加`method_missing`并解析名称的含义

# php - 在 PHP 中使用 URL 获取元素的特定内容块

> ID：10768275
> 
> 赞同：2
> 
> 时间：2012-05-26T17:11:44.357
> 
> 标签：php, file-get-contents

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我知道 file_get_contents(url) 方法，但我想要的是可能首先使用 file_get_contents(url) 来提取页面的内容，然后是否有一些方法/函数可以从您的内容中提取或获取特定的内容块使用 file_get_contents(url)？这是一个示例：

所以代码将是这样的：

```
$pageContent = file_get_contents('http://www.pullcontentshere.com/'); 
```

这将是`$pageContent`

```
<html> <body>
    <div id="myContent">
        <ul>    
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div> 
</body> </html> 
```

也许您有什么建议或想法如何专门提取`<div id="myContent">`它的整个子代？

所以它会是这样的：

```
$content = function_here($pageContent); 
```

所以输出会是这样的：

```
 <div id="myContent">
            <ul>    
                <li></li>
                <li></li>
                <li></li>
            </ul>
        </div> 
```

答案非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T17:31:41.027

另一种方法是使用正则表达式。

```
<?php

$string = '<html> <body> 
    <div id="myContent"> 
        <ul>     
            <li></li> 
            <li></li> 
            <li></li> 
        </ul> 
    </div>  
</body> </html>';

if ( preg_match ( '/<div id="myContent"(.*?)<\/div>/s', $string, $matches ) )
{
    foreach ( $matches as $key => $match )
    {
        echo $key . ' => ' . htmlentities ( $match ) . '<br /><br />';
    }
}
else
{
    echo 'No match';
}

?> 
```

现场示例：[http ://codepad.viper-7.com/WSoWCh](http://codepad.viper-7.com/WSoWCh)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T17:36:14.067

您可以使用 nullpointr 的答案中解释的内置 SimpleXMLElement，也可以使用正则表达式。另一个我通常觉得很简单的解决方案是[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)。你可以在这个库中使用 jQuery 风格的选择器。您的代码的一个简单示例如下所示：

```
// Create DOM from url
$html = file_get_html('http://www.pullcontentshere.com');
// Use a selector to reach the content you want
$myContent = $html->find('div.myContent')->plaintext; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T17:24:14.420

您需要使用 XML 解析来解决您的问题。我会向您推荐 SimpleXML，它已经是 php 的一部分。这是一个例子：

```
$sitecontent = "
<html>   
   <body>
      <div>
         <ul>    
            <li></li>
            <li></li>
            <li></li>
         </ul>
      </div> 
   </body> 
 </html>";

 $xml = new SimpleXMLElement($sitecontent);
 $xpath = $xml->xpath('//div');

 print_r($xpath); 
```

# javascript - 如何从代码中动态删除 div 标签？

> ID：10768277
> 
> 赞同：0
> 
> 时间：2012-05-26T17:12:05.153
> 
> 标签：javascript, jquery, asp.net-mvc-3, razor

在 mvc3 中，我希望所有视图都位于“contener”div 中并在 Layout.cshtml 中使用它：

```
<div class="full_width"
    <div class="contener" >
       @RenderBody()
    </div>
</div> 
```

但只有索引视图不能出现在“竞争者”div中。
仅加载索引视图时，如何使用 jscript 或 jquery-ajax 评论或隐藏或删除“竞争者” div？我无法显示索引视图。因为，它在“竞争者”div 中不起作用。加载索引视图时，我希望代码是这样的：

```
<div class="full_width" >
    *....its index view in "full_width" div, not in "contener" div....*
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:30:00.603

尝试这个

```
@{
        if (Request.RawUrl.Contains("Index")==false){
            <div class="contener" >
               @RenderBody()
            </div>
        }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T19:50:37.120

这对你有用。

```
<div class="full_width">
  @if (Request.RawUrl.StartsWith("/Index-or-whatever-your-url-is"))
  {
     @RenderBody()
  }
  else
  {
     <div class="contener">
        @RenderBody()
     </div>
  }
</div> 
```

# php - 当图像名称中有连字符时，为什么我的背景图像在 CSS 中不起作用？

> ID：10768287
> 
> 赞同：0
> 
> 时间：2012-05-26T17:13:43.810
> 
> 标签：php, html, css

当图像名称中有连字符时，它们不会加载。删除连字符后，它们可以正常工作。

有谁知道为什么会这样？有很多带有连字符的图像，所以我想知道如何解决这个问题而不必重命名所有图像名称。

这是代码示例：

```
background:url(../img/new-jb-hvr.jpg); 
```

有些人可能会建议使用`""`，但在 IE 中它不起作用。

这也不起作用：

```
background:url("../img/new-jb-hvr.jpg"); 
```

路径是正确的。

它在 HTML 中运行良好。问题是代码在 PHP 中时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T22:37:42.580

这能满足你的需要吗？它去掉了连字符。

```
<?php

$badBackground = "background:url(../img/new-jb-hvr.jpg);"
$goodBackground = str_replace('-', '', $badBackground );

echo $goodBackground;

?> 
```

# actionscript-3 - AS3 - 球超速

> ID：10768290
> 
> 赞同：0
> 
> 时间：2012-05-26T17:14:24.137
> 
> 标签：actionscript-3, flash

我正在用 Flash Pro CS6 制作一个小应用程序，我制作了这个球，它使用箭头键（使用 Code Sippets 制作）以每帧 4 个像素的速度移动。问题是，每当我死后，我就会进入另一帧，我可以点击重播并再次尝试游戏，但这一次，球的速度是 8 像素/帧，并且每次我重播游戏时这个数字都会不断增加。有没有办法解决这个问题？这是我正在使用的片段：

```
var upPressed:Boolean = false;
var downPressed:Boolean = false;
var leftPressed:Boolean = false;
var rightPressed:Boolean = false;

ball.addEventListener(Event.ENTER_FRAME, fl_MoveInDirectionOfKey); //I think the problem might be this "Enter Frame"
stage.addEventListener(KeyboardEvent.KEY_DOWN, fl_SetKeyPressed);
stage.addEventListener(KeyboardEvent.KEY_UP, fl_UnsetKeyPressed);

function fl_MoveInDirectionOfKey(event:Event)
{
if (upPressed)
{
    ball.y -=  4;
}
if (downPressed)
{
    ball.y +=  4;
}
if (leftPressed)
{
    ball.x -=  4;
}
if (rightPressed)
{
    ball.x +=  4;
}
}

function fl_SetKeyPressed(event:KeyboardEvent):void
{
switch (event.keyCode)
{
    case Keyboard.UP :
        {
            upPressed = true;
            break;

        };
    case Keyboard.DOWN :
        {
            downPressed = true;
            break;

        };
    case Keyboard.LEFT :
        {
            leftPressed = true;
            break;

        };
    case Keyboard.RIGHT :
        {
            rightPressed = true;
            break;

    }
}
};

function fl_UnsetKeyPressed(event:KeyboardEvent):void
{
switch (event.keyCode)
{
    case Keyboard.UP :
        {
            upPressed = false;
            break;

        };
    case Keyboard.DOWN :
        {
            downPressed = false;
            break;

        };
    case Keyboard.LEFT :
        {
            leftPressed = false;
            break;

        };
    case Keyboard.RIGHT :
        {
            rightPressed = false;
            break;

    }
}
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T17:25:05.013

在我看来，每次`gotoAndPlay`第一帧时都会创建一个新的球实例 - 但仍然有一个事件侦听器附加到原始实例，即使它已从舞台上移除。

因此，在每个新的 ENTER_FRAME 上，该方法不仅被调用一次，而且为球的每个实例调用一次。解决方法是在“你死了”的时候移除事件监听器，或者使用弱引用，这样就可以干净地移除球实例。

顺便说一句，这是您脚本的简短版本 - 不需要所有这些 if 和 switch 语句以及实例变量：

```
var keyPressed:int = -1;
ball.addEventListener(Event.ENTER_FRAME, fl_MoveInDirectionOfKey);
stage.addEventListener(KeyboardEvent.KEY_DOWN, fl_SetKeyPressed);
stage.addEventListener(KeyboardEvent.KEY_UP, fl_UnsetKeyPressed);

function fl_SetKeyPressed(event:KeyboardEvent):void {
    keyPressed = event.keyCode;
}

function fl_UnsetKeyPressed(event:KeyboardEvent):void {
    keyPressed = -1;
}

function fl_MoveInDirectionOfKey(event:Event) {
    ball.y += keyPressed == Keyboard.UP ? -4 : keyPressed == Keyboard.DOWN ? 4 : 0;
    ball.x += keyPressed == Keyboard.LEFT ? -4 : keyPressed == Keyboard.RIGHT ? 4 : 0;
} 
```

# android - Android 发布需要很长时间

> ID：10768292
> 
> 赞同：0
> 
> 时间：2012-05-26T17:14:47.307
> 
> 标签：android, publish

我已经在两个多小时前发布了我的 Android 应用程序，但它仍然没有发布，我的另一个应用程序在一小时内发布了。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T17:18:21.453

这很正常，Google 中有一个每 X 小时运行一次的缓存系统，您可能在缓存周期之前上传了您的其他应用程序。

# perl - 如何使用 perl 拼接参考数组？

> ID：10768293
> 
> 赞同：4
> 
> 时间：2012-05-26T17:15:02.970
> 
> 标签：perl

如何使用 perl 拼接参考数组？我正在尝试从函数中使用的引用数组中删除某些元素。

```
 &removeELement(@spliceArray);

    sub removeELement
    {
        my $ref_to_spliceArray = shift;

        foreach my $i (0 .. $#$ref_to_spliceArray)
        {
              if($ref_to_spliceArray->[$i] == /failed/)
              {
                    splice $ref_to_spliceArray->[$i],1; # this syntax does not work...
              }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:43:42.510

您可以通过对代码进行一些更改来获得所需的行为。

*   如果删除数组的一个元素，下一个元素的索引现在与旧值的索引相同。你不能盲目地迭代`0 .. $#ref_to_spliceArray`。
*   正则表达式绑定运算符 is`=~`和 not `==`。
*   尝试与未定义值匹配的正则表达式可能会触发警告。
*   将数组传递给`splice`，而不是数组的单个元素。

下面的代码修复了这些问题。

```
sub removeElement
{
  my $ref_to_spliceArray = shift;

  my $i = 0;
  while ($i <= $#$ref_to_spliceArray)
  {
    if (defined $ref_to_spliceArray->[$i]
          && $ref_to_spliceArray->[$i] =~ /failed/)
    {
      splice @$ref_to_spliceArray, $i, 1;
    }
    else {
      ++$i;
    }
  }
} 
```

将您的呼叫修改为

```
&removeElement(\@spliceArray); 
```

请注意，这种语法在现代人眼中会显得过时。考虑对整个数组进行操作，而不是一次偷看和戳一个元素。在这种简单的情况下，您无需费心定义另一个 sub。

```
@spliceArray = grep !(defined && /failed/), @spliceArray; 
```

也就是说，`@spliceArray`应该只包含那些与正则表达式不匹配的元素。该`defined`检查可防止警告可能存在于 中的未定义值`@spliceArray`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T17:35:28.250

尝试从您正在迭代的列表中删除元素通常是一个坏主意。尝试使用`grep`创建一个仅包含您想要保留的元素的新列表，并将其分配回原始参考。

```
sub removeElement {
    my $ref_to_Array = shift;

    @$ref_to_Array = grep { ! /failed/ } @$ref_to_array;
}

&removeElement(\@someArray); 
```

请注意，您需要将对数组的*引用传递给函数。*

`splice`顺便说一句，您可能正在寻找的电话是

```
splice @$ref_to_spliceArray, $i, 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T17:28:35.550

为了`splice`正确使用，我建议看一下[`splice`手册页](http://perldoc.perl.org/functions/splice.html)。

如果使用引用，只需取消引用它：`@$aref`而不是`$aref`.

为了解决手头的问题，请考虑[`grep`](http://perldoc.perl.org/functions/grep.html)改用。这是一个使用 Windows（双引号！）命令行的示例：

```
perl -lwe "$x = [qw/a b failed d/]; print for grep ! m/failed/, @$x" 
```

还有一件事：将正则表达式与`=~`and `!~`， not一起使用`==`。

而你正在使用[`strict`](http://perldoc.perl.org/strict.html)，不是吗？永远`use strict`，永远！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T17:28:38.897

你可以简单地使用`grep`这个：

```
my @array = qw/foo bar baz qux/;
@array = grep { ! m/baz/ } @array;
# @array now contains foo bar qux 
```

您的代码有几个错误：

*   `==`不是一回事`=~`
*   您没有指定拼接的偏移量和长度（例如`splice $@aray, $i, 1`）
*   从数组中删除拼接和元素后，索引`$i`将不正确，因为您从数组中删除了和项目，并且您将针对不存在的元素检查数组。

# phpstorm - PhpStorm 无法自动完成模型属性

> ID：10768296
> 
> 赞同：4
> 
> 时间：2012-05-26T17:15:46.337
> 
> 标签：phpstorm, yii

只是当我使用 find()、findAll()、findByAttributes() 等时，我希望 PhpStorm 自动完成我的模型属性......

我有一个模型：

```
/**
 * member model parameters:
 * @property integer $id
 * @property integer $city_id
 * @property string $e_mail
 */

    class Member extends CActiveRecord
    {
        /**
         * @static
         * @param string $className
         * @return Member
         */
        public static function model($className = __CLASS__)
        {
            return parent::model($className);
        }
... 
```

当我使用活动记录方法时，例如：

```
$member = Member::model()->findByAttributes(array('e_mail'=>'Foo Bar')); 
```

并在我写这篇文章时尝试自动完成：

```
$member-> 
```

它只在列表中给了我 CActiveRecord 的参数和方法。

我试图改变

```
 /**
     * Finds a single active record that has the specified attribute values.
     * See {@link find()} for detailed explanation about $condition and $params.
     * @param array $attributes list of attribute values (indexed by attribute names) that the active records should match.
     * An attribute value can be an array which will be used to generate an IN condition.
     * @param mixed $condition query condition or criteria.
     * @param array $params parameters to be bound to an SQL statement.
     * @return CActiveRecord the record found. Null if none is found.
     */
    public function findByAttributes($attributes,$condition='',$params=array())
    {... 
```

此方法从 CActiveRecord 到 Member、self、parent、$this、child 等的返回参数...自动完成仅在“Member”时有效。但是这种方法用于所有模型，而不仅仅是成员模型，所以这不是一个解决方案。

如果有人知道解决方案（最好不更改框架核心方法），我会很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T16:55:12.157

**注意：我所有很棒的 Yii 代码都可以在**[此处](https://bitbucket.org/dreamfactory/lib-php-common-yii)和[此处](https://bitbucket.org/dreamfactory/lib-php-common-platform)的存储库中的[bitbucket](http://bitbucket.org)上免费获得。如果你讨厌 Yii 的冗长，请查看我的**[Pii](https://bitbucket.org/dreamfactory/lib-php-common-yii/src/f4d693675ecac268b30e91b4b66cbc7ac522f245/Utility/Pii.php?at=master)**课程。我想你会完全挖掘它。

我遇到了这个问题，我所做的是为静态 model() 方法增加 phpdoc。这解决了问题并且自动完成工作正常。

例如：

```
class MyModel extends CActiveRecord {

         /**
         * @static
         * @param string $className
         * @return MyModel|CActiveRecord
         */    
         public static function model($className=__CLASS__) {
             .... yada yada yada ...
         }

} 
```

注意添加到“@return”的管道和附加类。这告诉 PhpStorm 在自动完成查找中也包含该类。

还有一点需要注意的是，如果您使用命名空间，您可能需要在某些类名前加上斜杠。仅取决于您的项目和包括。

=============== 更新：2013-08-05 ===============

使用 PhpStorm v6 及更高版本，您可以使用：

```
 *
   * @return $this
   * 
```

并获得适当的自动完成。

附带说明一下，整个静态“model()”方法的东西已经过时了（比如 Yii），我有一个基本模型类，我现在将它用于所有项目。它包含静态模型方法；然后在我的每个子类中不再需要它。这是一个例子......

```
<?php
namespace My\Awesome\Name\Space;

/**
 * MyBaseModel
 * etc.etc.
 */
class MyBaseModel extends \CActiveRecord
{
    /**
     * Returns the static model of the specified AR class.
     *
     * @param string $className
     *
     * @return $this
     */
    public static function model( $className = null )
    {
        return parent::model( $className ? : \get_called_class() );
    }

    //code code code code
}

/**
 * MySubModel
 */
class MySubModel extends MyBaseModel
{
    /**
     * {@InheritDoc}
     */
    public function tableName()
    {
        return 'my_sub_table';
    }
}

$_models = MySubModel::model()->findAll( 'xyz = :xyz', array( ':xyz' => 'abc' ) );

if ( !empty( $_models ) )
{
    foreach ( $_models as $_model )
    {
        //  Do awesome stuff...
    }
} 
```

自动完成功能适用于所有子类...

只是想我会更新这个，让你们都知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:58:05.230

您可以使用 phpdoc `@method`。您可以将此方法用于常用模型，也可以为代码生成器创建新模板。

```
 /**
     * @method Member findByPk($pk,$condition='',$params=array())
     */
    class Member extends CActiveRecord
    { 
```

# android - QR 阅读器可在手机上使用，但不适用于 SDK

> ID：10768297
> 
> 赞同：0
> 
> 时间：2012-05-26T17:16:15.310
> 
> 标签：android, qr-code

创建了以下照片。[https://plus.google.com/photos/110072219024510812700/albums/5746888837287802097?authkey=CJXL587H74LUVA](https://plus.google.com/photos/110072219024510812700/albums/5746888837287802097?authkey=CJXL587H74LUVA)

如果我通过将三星 Galaxy S 指向笔记本电脑的屏幕进行解码，它就可以读取。为此，我使用 Quickmark 的应用程序。我想以编程方式处理它，所以我下载了 Quickmark 的 SDK 并使用演示应用程序对其进行了测试，但它无法处理它。

有人可以帮忙吗，可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:41:53.130

当您使用应用程序扫描时，您扫描的不是此图像，而是此图像的图像。这很可能会解码，即使这个没有，奇怪的是。ZXing 也不扫描这个特定的图像，但它也很容易从屏幕上读取。

# asp.net - 使用 ASP .NET SQLDATASOURCE 更改 Gridview 数据源

> ID：10768298
> 
> 赞同：0
> 
> 时间：2012-05-26T17:16:20.033
> 
> 标签：asp.net, sql-server, visual-studio-2010, gridview, sqldatasource

我有一个自动与 sqldatasource1 等连接的 gridview。对于网格，我还有一个搜索文本框，所以我需要将gridView.datasourceID更改为另一个sqldatasource onclick a button ..

注意： sqldatasource1 和 sqldatasource2 返回相同的查询，

sqldatasource1 的生产者：

```
create proc AfficheDossiers
@Nom_GIAC varchar(50)
as
 begin
 select [ID_Dossier] as 'ID_Dossier'
      ,[ID_Entreprise] as 'ID_Entreprise'
      ,[Date_Depot] as 'Date_Dépôt'
      ,[Type_Etude] as 'Type_Etude'
      ,[Dernier_Type] as 'Dernier_Type'
      ,[Eligibile] as 'Eligibilité'
      ,[Fiche_Information] as 'Fiche_Information'
      ,[Buletin_Adhesion] as 'Bulletin_d’adhésion'
      ,[Fiche_Renseignment] as 'Fiche_Renseignment'
      ,[Attestation] as 'Attestation'
      ,[Date_Debut] as 'Date_Début'
      ,[Date_Fin] as 'Date_Fin'
      ,[ID_Cabinet] as 'ID_Cabinet'
      ,[Montant_Demander] as 'Montant_Demander'
      ,[Duree] as 'Durée'
      ,[Porcentage_Taux] as 'Pourcentage,Taux' from Dossier where Nom_Giac = @Nom_GIAC 
 end 
```

sqldatasource2((searche) 的生产者：

```
alter proc rechercherGIAC @nomgiac varchar(20),@nom varchar(30),@par varchar(50)
           as
            begin
            if @nom='CNSS' 
              begin
              select d.[ID_Dossier] as 'ID_Dossier'
              ,d.[ID_Entreprise] as 'ID_Entreprise'
              ,[Date_Depot] as 'Date_Dépôt'
              ,[Type_Etude] as 'Type_Etude'
              ,[Dernier_Type] as 'Dernier_Type'
              ,[Eligibile] as 'Eligibilité'
              ,[Fiche_Information] as 'Fiche_Information'
              ,[Buletin_Adhesion] as 'Bulletin_d’adhésion'
              ,[Fiche_Renseignment] as 'Fiche_Renseignment'
              ,[Attestation] as 'Attestation'
              ,[Date_Debut] as 'Date_Début'
              ,[Date_Fin] as 'Date_Fin'
              ,[ID_Cabinet] as 'ID_Cabinet'
              ,[Montant_Demander] as 'Montant_Demander'
              ,[Duree] as 'Durée'
              ,[Porcentage_Taux] as 'Pourcentage,Taux' 
              from dbo.Dossier d inner join entreprise e on d.ID_Entreprise=e.ID_Entreprise
              where CNSS_Entreprise=@par and d.Nom_Giac=@nomgiac 
              end
            else if @nom='RS'  
              begin
              select [ID_Dossier] as 'ID_Dossier'
              ,[ID_Entreprise] as 'ID_Entreprise'
              ,[Date_Depot] as 'Date_Dépôt'
              ,[Type_Etude] as 'Type_Etude'
              ,[Dernier_Type] as 'Dernier_Type'
              ,[Eligibile] as 'Eligibilité'
              ,[Fiche_Information] as 'Fiche_Information'
              ,[Buletin_Adhesion] as 'Bulletin_d’adhésion'
              ,[Fiche_Renseignment] as 'Fiche_Renseignment'
              ,[Attestation] as 'Attestation'
              ,[Date_Debut] as 'Date_Début'
              ,[Date_Fin] as 'Date_Fin'
              ,[ID_Cabinet] as 'ID_Cabinet'
              ,[Montant_Demander] as 'Montant_Demander'
              ,[Duree] as 'Durée'
              ,[Porcentage_Taux] as 'Pourcentage,Taux'  
              from dbo.Dossier 
              where  Nom_Giac=@nomgiac and ID_Entreprise in( select ID_Entreprise
                                                             from dbo.Entreprise
                                                             where Raison_Social=@par)                                            
              end
           else if @nom ='Date'
            begin
             declare @v smalldatetime,@b smalldatetime
              set @b=SUBSTRING(@par,1,4)
              set @v=SUBSTRING(@par,5,8)
            select [ID_Dossier] as 'ID_Dossier'
              ,[ID_Entreprise] as 'ID_Entreprise'
              ,[Date_Depot] as 'Date_Dépôt'
              ,[Type_Etude] as 'Type_Etude'
              ,[Dernier_Type] as 'Dernier_Type'
              ,[Eligibile] as 'Eligibilité'
              ,[Fiche_Information] as 'Fiche_Information'
              ,[Buletin_Adhesion] as 'Bulletin_d’adhésion'
              ,[Fiche_Renseignment] as 'Fiche_Renseignment'
              ,[Attestation] as 'Attestation'
              ,[Date_Debut] as 'Date_Début'
              ,[Date_Fin] as 'Date_Fin'
              ,[ID_Cabinet] as 'ID_Cabinet'
              ,[Montant_Demander] as 'Montant_Demander'
              ,[Duree] as 'Durée'
              ,[Porcentage_Taux] as 'Pourcentage,Taux'  
            from Dossier 
            where Date_Depot between @b and @v and Nom_Giac like @nomgiac

            end 
            end 
```

这是搜索文本和按钮：

```
 Saisir la CNSS : 
                     <asp:TextBox ID="CNSSTxt" class="TXTBOX" runat="server" Height="23px" placeholder="CNSS" style="font-family : Comic Sans MS, Arial, Tahoma; color:Red;"></asp:TextBox>

                     <asp:Button ID="BtnFiltrerCNSS" runat="server" Text="Filtrer" class="BTN" style="font-variant:small-caps;" /> 
```

这是网格视图：

```
 <div class="GridViewDiv">

              <asp:UpdatePanel ID="DossierUpdatePanel" runat="server" UpdateMode="Conditional" >
                  <ContentTemplate>
                      <asp:SqlDataSource ID="Dossier" runat="server" 
                              ConnectionString="<%$ ConnectionStrings:OfficeConnectionString %>" 
                              SelectCommand="AfficheDossiers" SelectCommandType="StoredProcedure">
                                   <SelectParameters>
                                       <asp:SessionParameter Name="Nom_GIAC" SessionField="Nom_GIAC" Type="String" />
                                   </SelectParameters>
                          </asp:SqlDataSource>

                      <asp:SqlDataSource ID="RechercheDossierDS" runat="server" 
                          ConnectionString="<%$ ConnectionStrings:OfficeConnectionString %>" 
                          SelectCommand="rechercherGIAC" SelectCommandType="StoredProcedure">
                          <SelectParameters>
                              <asp:SessionParameter Name="nomgiac" SessionField="Nom_GIAC" Type="String" />
                              <asp:ControlParameter ControlID="RecherhcerComboBox" Name="nom" 
                                  PropertyName="SelectedValue" Type="String" />
                              <asp:SessionParameter Name="par" SessionField="Recherche" Type="String" />
                          </SelectParameters>
                      </asp:SqlDataSource>
                      <asp:GridView ID="DossierGV" runat="server" AllowPaging="True" AllowSorting="True" 
          DataSourceID="Dossier" AutoGenerateColumns="False" DataKeyNames="ID_Dossier">
                          <Columns>
                              <asp:CommandField ShowSelectButton="True" />
                              <asp:BoundField DataField="ID_Dossier" HeaderText="ID_Dossier" ReadOnly="True" 
                                  SortExpression="ID_Dossier" />
                              <asp:BoundField DataField="ID_Entreprise" HeaderText="ID_Entreprise" 
                                  SortExpression="ID_Entreprise" />
                              <asp:BoundField DataField="Date_Dépôt" HeaderText="Date_Dépôt" 
                                  SortExpression="Date_Dépôt" />
                              <asp:BoundField DataField="Type_Etude" HeaderText="Type_Etude" 
                                  SortExpression="Type_Etude" />
                              <asp:BoundField DataField="Dernier_Type" HeaderText="Dernier_Type" 
                                  SortExpression="Dernier_Type" />
                              <asp:BoundField DataField="Eligibilité" HeaderText="Eligibilité" 
                                  SortExpression="Eligibilité" />
                              <asp:BoundField DataField="Fiche_Information" HeaderText="Fiche_Information" 
                                  SortExpression="Fiche_Information" />
                              <asp:BoundField DataField="Bulletin_d’adhésion" HeaderText="Bulletin_d’adhésion" 
                                  SortExpression="Bulletin_d’adhésion" />
                              <asp:BoundField DataField="Fiche_Renseignment" HeaderText="Fiche_Renseignment" 
                                  SortExpression="Fiche_Renseignment" />
                              <asp:BoundField DataField="Attestation" HeaderText="Attestation" 
                                  SortExpression="Attestation" />
                              <asp:BoundField DataField="Date_Début" HeaderText="Date_Début" 
                                  SortExpression="Date_Début" />
                              <asp:BoundField DataField="Date_Fin" HeaderText="Date_Fin" 
                                  SortExpression="Date_Fin" />
                              <asp:BoundField DataField="ID_Cabinet" HeaderText="ID_Cabinet" 
                                  SortExpression="ID_Cabinet" />
                              <asp:BoundField DataField="Montant_Demander" HeaderText="Montant_Demander" 
                                  SortExpression="Montant_Demander" />
                              <asp:BoundField DataField="Durée" HeaderText="Durée" SortExpression="Durée" />
                              <asp:BoundField DataField="Pourcentage,Taux" HeaderText="Pourcentage,Taux" 
                                  SortExpression="Pourcentage,Taux" />
                          </Columns>
                      </asp:GridView>
                  </ContentTemplate>
              </asp:UpdatePanel>
       </div> 
```

有什么线索吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T17:28:01.463

在刚刚设置的onclick按钮事件中

> gridview.datasource = newDataSource;

然后调用

> girdView.DataBind();

让我知道这是否是您需要的。

如果您使用的是 Visual Studio 2010，则需要单击 .aspx 文件，然后单击窗口右下角的设计视图。这将加载您的屏幕模型，您只需双击您想要点击事件的按钮。然后它会将您重定向到 (.aspx.cs) 文件后面的代码。在那个方法中是你需要写这个的地方。

我现在才这么说是因为我看到您的按钮没有 onclick="methodName" 属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T17:33:06.700

您可以根据条件在后面的代码中给出数据源。

```
 if(someCondition)
       myStoredProcedure = "storedProc1";
    else
       myStoredProcedure = "storedProc2";

    SqlDataSource dataSource = new SqlDataSource(ConfigurationManager.ConnectionStrings["connstr"].ConnectionString, searchQuery);
    dataSource.SelectCommandType = SqlDataSourceCommandType.StoredProcedure;
    dataSource.SelectCommand = myStoredProcedure;
    dataSource.ID = "myDataSource";

   // Your code to set datasource to grid

   gridBookings.DataSourceID = dataSource.ID;
   gridBookings.DataBind(); 
```

# .net - Silverlight Visual Studio System.UnauthorizedAccessException

> ID：10768300
> 
> 赞同：1
> 
> 时间：2012-05-26T17:17:01.083
> 
> 标签：.net, wcf, silverlight

我有一个奇怪的问题。

我有一个针对 .net 4 框架（EF4 --> WCF4 --> Silverlight 4）的解决方案。

目前，ASP.NET 网页与 WCF 服务在同一个项目中。

我最近开始调试应用程序，一切都很好。我必须解决我在服务中使用异步方法时遇到的一些问题，并删除和重建服务引用。

在此之后，我开始收到一系列异常，从 System.UnauthorizedAccessException 开始，我无法捕获这些异常。它们发生在加载 GAC 模块期间；我很难找到任何模式，因为它并不总是发生。

让我知道哪些附加信息会有用，因为我不知道。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:26:01.477

调试问题的解决方案如下：

1.  在 VS2010 中，转到 Debug 菜单 --> Exceptions... --> 选中所有框（b/c 我不知道更好），然后单击 OK。

2.  再次以调试模式运行。

该应用程序现在将在这些运行前错误时立即中断，您可以进一步探索。

由于另一个 SO question (2014365)，我能够到达那里。

显然有一个我没有正确权限的临时文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:03:34.573

如果您使用某些授权域服务等，尝试以未经授权的用户身份调用具有“[RequiresAuthentication()]”属性的服务方法时会出现此错误。更多信息：http: [//msdn.microsoft.com /en-us/library/ee707353(v=vs.91).aspx](http://msdn.microsoft.com/en-us/library/ee707353%28v=vs.91%29.aspx)

# iphone - 获取 NSArray 中 xcode 项目文件夹的所有图像

> ID：10768310
> 
> 赞同：1
> 
> 时间：2012-05-26T17:19:28.223
> 
> 标签：iphone, ios, xcode, nsarray, directory

我的项目中有一个“memes”文件夹。我想在 NSArray 中加载所有这些图像（具有不同的名称）。我能怎么做？谢谢，戴维德

# java - 简单日志记录应用程序中的 NullException 错误

> ID：10768311
> 
> 赞同：0
> 
> 时间：2012-05-26T17:19:42.093
> 
> 标签：java, android

我正在android中制作一个简单的日志记录系统。我正在关注本[教程](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)。在测试我的应用程序时，我不断得到`NullException error`. 此错误在下面的这一行`if(json.getString(KEY_SUCCESS) != null)`中`LoginScreensActivity`。我不知道为什么 json 为空。请帮助我我在哪里犯错。

这是我的代码

单击登录按钮时触发的功能。这是 LoginScreensActivity.java 类

```
btnLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            String email = inputEmail.getText().toString();
            String password = inputPassword.getText().toString();
            UserFunctions userFunction = new UserFunctions();
            JSONObject json = userFunction.loginUser(email,password);

            try {
                if(json.getString(KEY_SUCCESS) != null) {
                    loginErrorMsg.setText("");
                    String res = json.getString(KEY_SUCCESS);
                    if(Integer.parseInt(res) == 1) {
                        Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);

                        // Close all views before launching Dashboard
                        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(dashboard);

                        // Close Login Screen
                        finish();
                    }
                } else {
                    Toast.makeText(getBaseContext(), "Login failed", Toast.LENGTH_LONG).show();
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
    }); 
```

上面代码中触发的 loginUSer 函数

```
public JSONObject loginUser(String email, String password) {
    //Toast.makeText(context, "loginUser function", Toast.LENGTH_LONG).show();
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", login_tag));
    params.add(new BasicNameValuePair("email", email));
    params.add(new BasicNameValuePair("password", password));

    JSONObject json = jsonParser.getJSONFromUrl(loginUrl, params);
    //Log.e("JSON", json.toString());
    //Log.d("TAG", json.toString());
    return json;
} 
```

这是我的 JSONPareser 类

```
public class JSONParser {
static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

public JSONParser() {

}

public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;

        while((line = reader.readLine()) != null) {
            sb.append(line + "n");
        }

        is.close();
        json = sb.toString();
        Log.e("JSON",json);
    } catch (Exception e) {
        //e.printStackTrace();
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    return jObj;
}
} 
```

这是我的日志猫

```
05-26 20:16:52.658: I/Process(31217): Sending signal. PID: 31217 SIG: 9
05-26 20:16:59.793: D/dalvikvm(31361): GC_EXTERNAL_ALLOC freed 41K, 50% free 2725K/5379K, external 0K/0K, paused 31ms
05-26 20:16:59.843: D/dalvikvm(31361): GC_EXTERNAL_ALLOC freed 7K, 50% free 2743K/5379K, external 455K/518K, paused 32ms
05-26 20:16:59.973: D/CLIPBOARD(31361): Hide Clipboard dialog at Starting input: finished by someone else... !
05-26 20:17:06.883: W/System.err(31361): java.net.UnknownHostException: zafarsaleem.info
05-26 20:17:06.883: W/System.err(31361):    at java.net.InetAddress.lookupHostByName(InetAddress.java:506)
05-26 20:17:06.883: W/System.err(31361):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:294)
05-26 20:17:06.883: W/System.err(31361):    at java.net.InetAddress.getAllByName(InetAddress.java:256)
05-26 20:17:06.883: W/System.err(31361):    at    org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:136)
05-26 20:17:06.883: W/System.err(31361):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
05-26 20:17:06.883: W/System.err(31361):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
05-26 20:17:06.883: W/System.err(31361):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:428)
05-26 20:17:06.883: W/System.err(31361):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
05-26 20:17:06.888: W/System.err(31361):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
05-26 20:17:06.888: W/System.err(31361):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
05-26 20:17:06.888: W/System.err(31361):    at library.JSONParser.getJSONFromUrl(JSONParser.java:38)
05-26 20:17:06.888: W/System.err(31361):    at library.UserFunctions.loginUser(UserFunctions.java:37)
05-26 20:17:06.888: W/System.err(31361):    at com.zafar.loginscreens.LoginScreensActivity$1.onClick(LoginScreensActivity.java:48)
05-26 20:17:06.888: W/System.err(31361):    at android.view.View.performClick(View.java:2538)
05-26 20:17:06.888: W/System.err(31361):    at android.view.View$PerformClick.run(View.java:9152)
05-26 20:17:06.888: W/System.err(31361):    at android.os.Handler.handleCallback(Handler.java:587)
05-26 20:17:06.888: W/System.err(31361):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-26 20:17:06.888: W/System.err(31361):    at android.os.Looper.loop(Looper.java:130)
05-26 20:17:06.888: W/System.err(31361):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-26 20:17:06.888: W/System.err(31361):    at java.lang.reflect.Method.invokeNative(Native Method)
05-26 20:17:06.888: W/System.err(31361):    at java.lang.reflect.Method.invoke(Method.java:507)
05-26 20:17:06.888: W/System.err(31361):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-26 20:17:06.888: W/System.err(31361):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-26 20:17:06.888: W/System.err(31361):    at dalvik.system.NativeStart.main(Native Method)
05-26 20:17:06.893: E/Buffer Error(31361): Error converting result java.lang.NullPointerException
05-26 20:17:06.893: E/JSON Parser(31361): Error parsing data org.json.JSONException: End of input at character 0 of 
05-26 20:17:06.893: D/AndroidRuntime(31361): Shutting down VM
05-26 20:17:06.893: W/dalvikvm(31361): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
05-26 20:17:06.893: E/AndroidRuntime(31361): FATAL EXCEPTION: main
05-26 20:17:06.893: E/AndroidRuntime(31361): java.lang.NullPointerException
05-26 20:17:06.893: E/AndroidRuntime(31361):    at com.zafar.loginscreens.LoginScreensActivity$1.onClick(LoginScreensActivity.java:51)
05-26 20:17:06.893: E/AndroidRuntime(31361):    at android.view.View.performClick(View.java:2538)
05-26 20:17:06.893: E/AndroidRuntime(31361):    at android.view.View$PerformClick.run(View.java:9152)
05-26 20:17:06.893: E/AndroidRuntime(31361):    at android.os.Handler.handleCallback(Handler.java:587)
05-26 20:17:06.893: E/AndroidRuntime(31361):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-26 20:17:06.893: E/AndroidRuntime(31361):    at android.os.Looper.loop(Looper.java:130)
05-26 20:17:06.893: E/AndroidRuntime(31361):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-26 20:17:06.893: E/AndroidRuntime(31361):    at java.lang.reflect.Method.invokeNative(Native Method)
05-26 20:17:06.893: E/AndroidRuntime(31361):    at java.lang.reflect.Method.invoke(Method.java:507)
05-26 20:17:06.893: E/AndroidRuntime(31361):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-26 20:17:06.893: E/AndroidRuntime(31361):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-26 20:17:06.893: E/AndroidRuntime(31361):    at dalvik.system.NativeStart.main(Native Method) 
```

**更新**

添加后`if(json != null && json.getString(KEY_SUCCESS) != null) {`我得到以下logcat

```
05-26 20:44:46.243: W/System.err(32680): java.net.UnknownHostException: zafarsaleem.info
05-26 20:44:46.243: W/System.err(32680):    at java.net.InetAddress.lookupHostByName(InetAddress.java:506)
05-26 20:44:46.243: W/System.err(32680):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:294)
05-26 20:44:46.243: W/System.err(32680):    at java.net.InetAddress.getAllByName(InetAddress.java:256)
05-26 20:44:46.248: W/System.err(32680):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:136)
05-26 20:44:46.248: W/System.err(32680):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
05-26 20:44:46.248: W/System.err(32680):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
05-26 20:44:46.248: W/System.err(32680):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:428)
05-26 20:44:46.248: W/System.err(32680):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
05-26 20:44:46.248: W/System.err(32680):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
05-26 20:44:46.248: W/System.err(32680):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
05-26 20:44:46.248: W/System.err(32680):    at library.JSONParser.getJSONFromUrl(JSONParser.java:38)
05-26 20:44:46.248: W/System.err(32680):    at library.UserFunctions.loginUser(UserFunctions.java:37)
05-26 20:44:46.248: W/System.err(32680):    at com.zafar.loginscreens.LoginScreensActivity$1.onClick(LoginScreensActivity.java:49)
05-26 20:44:46.248: W/System.err(32680):    at android.view.View.performClick(View.java:2538)
05-26 20:44:46.248: W/System.err(32680):    at android.view.View$PerformClick.run(View.java:9152)
05-26 20:44:46.248: W/System.err(32680):    at android.os.Handler.handleCallback(Handler.java:587)
05-26 20:44:46.248: W/System.err(32680):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-26 20:44:46.248: W/System.err(32680):    at android.os.Looper.loop(Looper.java:130)
05-26 20:44:46.248: W/System.err(32680):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-26 20:44:46.248: W/System.err(32680):    at java.lang.reflect.Method.invokeNative(Native Method)
05-26 20:44:46.248: W/System.err(32680):    at java.lang.reflect.Method.invoke(Method.java:507)
05-26 20:44:46.248: W/System.err(32680):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-26 20:44:46.248: W/System.err(32680):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-26 20:44:46.248: W/System.err(32680):    at dalvik.system.NativeStart.main(Native Method)
05-26 20:44:46.248: E/Buffer Error(32680): Error converting result java.lang.NullPointerException
05-26 20:44:46.248: E/JSON Parser(32680): Error parsing data org.json.JSONException: End of input at character 0 of 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:27:58.530

您的问题的根本原因是 UnknownHostException，似乎`email`EditText 没有链接到有效的 URL，该 URL 返回`json`导致 NullPointerException 的空值。

你在输入`email`什么？

**添加**

明确地说，教程代码：

```
if(json.getString(KEY_SUCCESS) != null) { 
```

仅检查从 getString() 返回的字符串是否不为空。在你的情况下`json`是 null 所以你需要这样的测试：

```
if(json != null && json.getString(KEY_SUCCESS) != null) { 
```

检测空指针并优雅地退出您的应用程序。

**加法2**

正如**用户函数类**所述，如果您的服务器是在线托管的，您需要在`UserFunctions`类中更改这些代码行：

```
private static String loginURL = "http://10.0.2.2/ah_login_api/";
private static String registerURL = "http://10.0.2.2/ah_login_api/"; 
```

如果您是 Stack Overflow，您可以尝试以下操作：

```
private static String loginURL = "http://www.stackoverflow.com/ah_login_api/";
private static String registerURL = "http://www.stackoverflow.com/ah_login_api/"; 
```

但是你不是 Stack Overflow，当然你需要将这些 URL 指向你的服务器和路径。

# google-maps - 地图溢出内容div，但大部分地图都是灰色的？（jQuery手机）

> ID：10768315
> 
> 赞同：0
> 
> 时间：2012-05-26T17:20:50.877
> 
> 标签：google-maps, jquery-mobile, google-maps-api-3

所以我们这里有两个问题，这两个问题都可以在这个小提琴中看到：http: [//jsfiddle.net/5hR9x/4/](http://jsfiddle.net/5hR9x/4/)如果你点击底部的“测试”链接。

首先，包含地图画布的内容 div 正好溢出标题栏。我的印象是绝对定位相对于父元素（即内容 div）起作用，但地图画布正好超过了它。

此外，您会看到地图仅出现在灰色画布的一小部分中，并且拒绝展开……当将更多内容拖入视图时，它会自行调整大小。谁能解释这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:55:29.100

绝对定位元素相对于页面定位它，除非它的父级设置为`position: absolute`or `position: relative`。

内容 div 在标题上方溢出，因为`map_canvas`设置为`position: absolute`. 你需要给 div 包裹它`position: relative`，这样它就不会再阻塞标题栏了。

不过，这并不能解决地图高度的次要问题。

# php - php/mysql 合并表中的重复记录并创建一个新表

> ID：10768318
> 
> 赞同：0
> 
> 时间：2012-05-26T17:21:28.013
> 
> 标签：php, mysql

请关于用户名和存储类型，如何合并行以实现最终表？每个用户名的 storetype 应该是唯一的。有成千上万的用户名和记录，所以 php/mysql 会有所帮助。谢谢 ![在此处输入图像描述](../Images/06858475c263a40a5f4c66b5509d5606.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:34:21.010

由于只有 storetype 很重要，因此只需遍历表中的每个用户名，将详细信息存储在不为空的变量中。之后运行alter table 命令，只用变量中的这些值更新一行，然后删除其他行。您还可以使用某些规范化规则首先分解表并重新加入它们。虽然它可能效率较低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T23:30:37.867

```
 select min(id), username, min(filename), min(date), min(desc), storetype,
 min(password), min(email), min(ftp)
 from table1
 group by username, storetype 
```

感谢@Mosty Mostacho

# algorithm - 实现部分密钥散列的最佳方法

> ID：10768319
> 
> 赞同：5
> 
> 时间：2012-05-26T17:22:04.390
> 
> 标签：algorithm

我出现在一次采访中，我被要求编写一个用于部分密钥散列的算法，即；如果将 ABCBC 插入哈希中，则搜索任何子字符串都应返回存储的值。我的答案是创建给定键的所有可能子字符串的集合，并维护每个子字符串与其一个或多个父字符串之间的映射。然后维护所有子字符串的集合的 BST。每个节点将指向该子字符串可能匹配的实际值的集合。例如。A, AB, ABC, ABCB, ABCBC, B, BC, BCB, BCBC, C, CB, CBC 是这个字符串的可能子串。可能还有其他字符串也像 BAB 一样，其中 AB 和 B 是子字符串。所以给定 AB，它将映射到两个字符串 BAB 和 ABCBC。

还有其他更有效的方法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T17:55:09.933

将每个子字符串存储在散列中，并注明它是否是最终的，以及可能的下一个字符和前一个字符。存储所有可以在中间有这个子字符串的单词的前一个字符，以及所有有这个子字符串作为开始的单词的下一个字符。

因此，for 条目`a`不需要包含所有单词`a`。但是，如果您愿意，构建该列表很容易。同样在插入过程中，一旦您减小子字符串的大小并且发现您已经拥有当前继续的当前子字符串，您可以停止。

假设您有许多具有相同字母的单词，这将节省一些空间和插入，但代价是实际生成列表的速度变慢。最坏的情况仍然`O(n*n)`是一个`n`字母字符串。

要删除，您可以遵循类似的过程，在包含其他子字符串的任何子字符串处停止删除。

# php - PHP将值传递给类

> ID：10768321
> 
> 赞同：0
> 
> 时间：2012-05-26T17:22:11.610
> 
> 标签：php, class, constructor

我有一个名为 DatabaseController 的类，我已将其设置为：

```
<?php

class DBController {

    public $dbName;

    function _controller($passedDBName) { 
        $dbName = $passedDBName;
    }

    function dbConnect() { 
        print $this->$dbName;
    }

} //end of class       
?> 
```

我这样称呼它：

```
<?php

    //make new database connection
    $dbManager = new DBController("somevalue");
    $dbManager->dbConnect();

?> 
```

但我不断收到此错误：

```
<b>Fatal error</b>:  Cannot access empty property in 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T17:23:35.227

在构造函数中，`$dbName = $passedDBName;`应该是`$this->dbName = $passedDBName;`.

**更新：**

1.  `$this->$dbName`应该是`$this->dbName`。
2.  `_controller()`应该是`__construct()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T17:23:36.990

使用`$this->dbName`- 否则您将尝试访问名称存储在`$dbName`. 您还需要修复您的构造函数以分配给`$this->dbName`而不是`$dbName`.

```
class DBController {
    public $dbName;
    function _controller($passedDBName) { 
        $this->dbName = $passedDBName;
    }
    function dbConnect() { 
        print $this->dbName;
    }
} 
```

# actionscript-3 - AS3 - 快门动画

> ID：10768322
> 
> 赞同：0
> 
> 时间：2012-05-26T17:22:28.003
> 
> 标签：actionscript-3, animation

如何创建相机快门动画（例如：[快门 .gif 动画](http://3.bp.blogspot.com/-QUzB8g8y0tQ/TazX2iGajqI/AAAAAAAAAQ8/pP7ViFVycY8/s1600/fotoartgif.gif)）以及如何使其适用于不同的屏幕分辨率？

谢谢。乌里

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T18:06:57.267

你想要的不是快门，而是隔膜。像真正的作品一样构建和制作动画应该很容易；

本质上，在框架的一个角处有一组三角形连接到框架，然后向内旋转以确定光圈大小。

[http://en.wikipedia.org/wiki/Diaphragm_（光学）](http://en.wikipedia.org/wiki/Diaphragm_%28optics%29)

编辑：我做了一个简单的flash文件来演示效果。 [http://dl.dropbox.com/u/340238/share/aperture.fla](http://dl.dropbox.com/u/340238/share/aperture.fla)

编辑 2：用于动态放置；

```
dummy.x = stage.stageWidth / 2;
dummy.y = stage.stageHeight / 2;
var stageSize:int = (stage.stageWidth > stage.stageHeight ? stage.stageWidth : stage.stageHeight);
displacement = stageSize * K + M;  //Where K and M are constants that you might have to experiment a bit to get. My guess is K = 1, M = 100 
```

您还必须增加要匹配的三角形的大小。

# javascript - YUI3 示例应用程序

> ID：10768324
> 
> 赞同：3
> 
> 时间：2012-05-26T17:22:43.653
> 
> 标签：javascript, yui

我一直在看 YUI3 Mobile 演示文稿，但是我看不到任何完整的示例应用程序，例如我们可以使用 jQuery mobile 找到的应用程序。是否有类似“Kichen Sink”移动版 YUI3 的示例应用程序？我在 YUI 库中看到的只是模块，并不是一个完整的示例应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:07:15.943

*   [示例：GitHub 贡献者](http://yuilibrary.com/yui/docs/app/app-contributors.html)
*   [示例：待办事项列表](http://yuilibrary.com/yui/docs/app/app-todo.html)

我从这两个人身上学到了很多。从 Todo List 开始，也许自己实现它。然后尝试重新实现 Github-app。此应用程序要求您处理更多视图和数据类型。

这很有趣，但实际上，只需从某个地方开始并使用[文档](http://yuilibrary.com/yui/docs/api/classes/App.html)来尝试/失败/学习/尝试/失败/学习。

# c++ - 使用 mingw 和 msys 编译带有 Python 绑定的 c++ 时出错

> ID：10768325
> 
> 赞同：1
> 
> 时间：2012-05-26T17:23:06.993
> 
> 标签：c++, python, mingw

我的环境：Windows 7 64 pro、mingw32（使用 2012-04-26.exe 安装程序安装）、msys 1.0、Python 2.7.3 使用来自 python.org 的 Win64 安装程序安装

我正在尝试使用 mingw 和 msys 编译具有 python 绑定的 c++ 程序。当我从 msys shell 运行配置时，我得到了错误

```
Could not link test program to Python. 
Maybe the main Python library has been installed in some non-standard library path. 
If so, pass it to configure, via the LDFLAGS environment variable. 
Example: ./configure LDFLAGS="-L/usr/non-standard-path/python/lib"

============================================================================
ERROR!
You probably have to install the development version of the Python package
for your distribution.  The exact name of this package varies among them.
============================================================================ 
```

我尝试使用以下各项运行配置：

```
./configure LDFLAGS="-L/c/Python27/libs"

./configure LDFLAGS="-L/c/Python27/Lib"

./configure LDFLAGS="-Lc:/Python27/libs"

./configure LDFLAGS="-Lc:/Python27/libs" 
```

并且都给了我同样的最终错误。我已经在[http://pastebin.com/fZVjTeub](http://pastebin.com/fZVjTeub)上发布了整个 config.log 文件。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:02:34.577

问题最终是我使用的是 32 位编译器并试图将其链接到 64 位 Python。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T16:33:34.280

就我而言，我不得不`LDFLAGS="-L/c/Python27/libs"`通过`./configure`

# ruby - 如何处理我正在排序的数组中的 nil 元素？

> ID：10768326
> 
> 赞同：-1
> 
> 时间：2012-05-26T17:23:10.907
> 
> 标签：ruby

我正在调用`sort`这样的数组：

```
new_list = my_array.sort 
```

我得到的错误是：

```
NoMethodError: undefined method `<=>' for nil:NilClass 
```

对于这种简单的排序，我如何处理 nil 案例？

我最初有一个破坏性的排序调用（即`sort!`）并将其更改为常规的`sort`，但它仍然会引发此错误。

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T17:27:00.833

好吧，我假设你不需要/不想要 nils，所以......

```
new_list = my_array.compact.sort 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T17:26:43.867

如果你想忽略 nil，你可以这样做：

```
new_list = my_array.compact.sort 
```

[`compact`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-compact)复制数组，跳过`nil`值

# apache2 - 在服务器上的每个页面之前执行的代码

> ID：10768339
> 
> 赞同：1
> 
> 时间：2012-05-26T17:26:10.490
> 
> 标签：apache2, sysadmin

我有一个 apache2 服务器，它有一个庞大且不断增长的文件夹结构。

我希望在该网站的每个页面的开头执行一组指令。

如何在不将这些行粘贴到网站中每个文件的开头的情况下实现这一点？

*   我不想在每个文件的开头都有代码。
*   我尝试将`auto_prepend_file`php.ini 中的更改为：
    `auto_prepend_file = ~/website_preview/say_hello.php`

'say_hello' 是一个 hello-world php 脚本，但该脚本仍然没有被执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T17:42:56.157

`auto_prepend_file`如果您的所有页面都使用 PHP，那么我认为您在 php.ini 中进行设置是正确的。

试试这个：

1.  检查您`include_path`的 php.ini 并在需要时为您的说明文件附加一个新路径。
2.  将您的 instructions.php 文件从包含路径复制到该位置。
3.  将您的 in php.ini 编辑`auto_prepend_file`为步骤 2 中的文件名。

我对此进行了测试，并能够让它以这种方式工作，但无法直接在`auto_prepend_file`设置中指定路径。

此外，当我的`auto_prepend_file`设置配置不正确时，我收到以下 php 错误：
*PHP 致命错误：未知：需要打开失败...*

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:27:49.420

错误`php.ini`的文件，正确的位置是`/etc/php5/apache2/php.ini`

# iphone - 文本框加倍然后显示为字符串 AlertView

> ID：10768341
> 
> 赞同：0
> 
> 时间：2012-05-26T17:26:32.953
> 
> 标签：iphone, xcode

我无法让双重显示在我的警报视图中。该字符串在 AlertView 中一直显示为 0。提前致谢！

```
 double binRadius = [txtRadiusInches.text doubleValue] / 12 + [txtRadiusFeet.text doubleValue];
NSString *myString = [NSString stringWithFormat:@"%d", binRadius];

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Estimatated Amount"
                                                message:myString
                                               delegate:self
                                      cancelButtonTitle:@"Continue"
                                      otherButtonTitles:@"Clear All", nil];

[alert show]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T17:28:10.223

`%d`(and `%i`) 是整数（小数）的格式说明符。对于浮点数，您应该使用`%f`.

# jquery - 使用 % 时 JQuery 动画不工作

> ID：10768345
> 
> 赞同：1
> 
> 时间：2012-05-26T17:27:15.947
> 
> 标签：jquery, animation

我有以下代码，当我想将 div 标签高度更改为 100% 时，动画似乎不起作用。但是，如果我将其设置为像素，那么动画就会起作用。

任何帮助，将不胜感激。

HTML / CSS

```
 <br />
<div id="biotext" style="width: 400px; height:50px; border: 1px solid #FF0000; background-color: #FF0000; overflow:hidden;">
    Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024 Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024 Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024 Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024  Hello Testing 123 456 789 1024
</div>

    <p><a href="#" id="seemoreb">Click</a></p> 
```

Javascript

```
$(document).ready(function() {
    $("#seemoreb").click(function() {
        $("#biotext").animate({
            height: '100%'
        }, 1000);
    });

});​ 
```

[http://jsfiddle.net/4MTyW/](http://jsfiddle.net/4MTyW/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:33:24.517

这本身就是 jQuery 中的一个“错误”。不是真正的错误，而是人们可能期望的不存在的功能。这不起作用的原因是因为您从固定高度开始并试图将该高度转换为百分比，这是 CSS 无法真正做到的。如果你试图用常规的 CSS 过渡来做到这一点，它也不会起作用。我不知道为什么，但就是这样。

但是，有一种解决方法。您可以手动计算您尝试扩展的容器的高度，然后将该数字放入动画中。这不是太难：

```
var containerHeight = $('.mycontainer').height();
$("#seemoreb").click(function() {
    $("#biotext").animate({
        height: containerHeight
    }, 1000);
}); 
```

当然，根据您的应用程序，它可能比这更复杂，但这至少是它不起作用的原因以及如何绕过它。

好的，我看到您的演示中没有容器。在这种情况下，`animate`为什么不使用，而不是使用`.slideDown()`？

# symfony1 - SELECT DISTINCT YEAR 学说

> ID：10768347
> 
> 赞同：0
> 
> 时间：2012-05-26T17:27:51.940
> 
> 标签：symfony1, doctrine

我想使用学说从 mysql 数据库中选择不同的年份：

使用mysql很容易做到这一点

```
SELECT DISTINCT DATE_FORMAT( year , '%Y') as dates FROM Inscription 
```

我在教义文档中找不到如何做到这一点，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T20:12:41.070

如果你想在 Doctrine 2 中使用这个，你可以使用这个扩展：

指南： [http ://www.uvd.co.uk/blog/labs/using-mysqls-date_format-in-doctrine-2-0](http://www.uvd.co.uk/blog/labs/using-mysqls-date_format-in-doctrine-2-0)

代码： [https ://github.com/uvd/Doctrine](https://github.com/uvd/Doctrine)

这对我很有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:40:37.187

SQL 语句`SELECT DISTINCT DATE_FORMAT( year , '%Y') as dates FROM Inscription`可以用 Doctrine 编写如下：

**A. 如果您正在编写表格方法：**

```
class InscriptionTable extends Doctrine_Table {
  /* ... */
  public function getDistinctYears()
  {
    return $this->createQuery('I')
           ->select('DISTINCT(DATE_FORMAT( year , '%Y')) years')
           ->setHydrationMode(Doctrine::HYDRATE_ARRAY)
           ->execute();
  }
} 
```

**B. 如果您正在编写内联 DQL 调用：**

```
InscriptionTable::getInstance()->createQuery('I')
                ->select('DISTINCT(DATE_FORMAT( year , '%Y')) years')
                ->setHydrationMode(Doctrine::HYDRATE_ARRAY)
                ->execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T17:41:11.227

永远不要使用 distinct，尽可能使用 group by，如下所示：

```
 SELECT DATE_FORMAT( year , '%Y') as dates 
    FROM Inscription 
GROUP BY dates 
```

我认为关于 group by 的教义文档很容易找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T22:12:42.513

如果您使用 Postgresql，您将收到：

```
select('SUBSTRING(offer.date_closed, 0, 5)') 
```

> 函数 substr(timestamp without time zone integer integer) 不存在

改用：

```
select('SUBSTRING(CONCAT(offer.date_closed, \'\'), 0, 5)') 
```

# c# - C# 控制台应用程序中的 MasterMind

> ID：10768348
> 
> 赞同：-3
> 
> 时间：2012-05-26T17:27:53.557
> 
> 标签：c#, console-application

我有一个学校的任务，我们必须在控制台应用程序中用 C# 制作 MasterMind 游戏。

到目前为止，我设法完成了边框（在朋友的帮助下），游戏开始时的介绍性曲调（哔声），以及用户输入以插入数字。

问题是当用户结束游戏时，游戏并没有停止接受用户的输入并且显然崩溃了。

我在高分方法“使用未分配的局部变量”中也有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:41:39.897

```
score = ptsguesses * ptsTime; 
```

ptsguesses 和 ptsTime 在哪里初始化？显然，无处可去。

您可能希望在计算分数*之前设置 ptsguesses 和 ptsTime。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T17:38:32.363

未分配值的使用可能是这个：

```
 static void highscore()
    {
        {
            byte ptsguesses,ptsTime, userGuesses, timeTaken;
            int score; <<------ 
```

将其更改为 int score = 0;

此外，ptsguesses、ptstime、userguesses 和 timetaken 从未被初始化。您可能想尝试将这些参数传递给您的 highscore() 方法。

就像是

```
static void highscore(byte ptsguesses, byte ptsTime, byte userGuesses, byte timeTaken) 
```

然后您必须调用 highscore() 方法，并将实际值传递给该方法。这样，如果您尝试运行 highscore()，您将有一些实际计算的东西。

# github - 如何将 Smartgit 链接到 GitHub

> ID：10768349
> 
> 赞同：15
> 
> 时间：2012-05-26T17:27:55.153
> 
> 标签：github, smartgit

去年左右我有一个公共 GitHub 帐户。昨天我在我的 Windows 7 PC 上安装了 SmartGit。SmartGit 在本地运行良好，但我想推送到 GitHub 上的远程仓库。

当我查看**SmartGit -> Preferences -> Authentication**时，我选择使用 SmartGit 作为 SSH 客户端。“已知凭据”区域为空。在托管提供商下，我添加了我的 github 帐户 [用户名+密码] 并单击“在 GitHub 登录 ...”它会打开浏览器，我已成功登录。

我会假设会有一些东西填充已知凭据区域？我徒劳地尝试查看是否有一些密钥对存储在 SmartGit 可以使用的某个地方。最终我下载了 PuttyGen 并创建了一对密钥。我一开始就给了它们一些愚蠢的名字，但经过一些阅读后，它们将它们重命名为 *id_rsa* 和“id_rsa.pub”，并将它们放入我的*c:\users\MYNAME.ssh*目录中。

SmartGit 中仍然没有任何凭据的迹象。

当我运行'**远程-> 管理远程-> 添加**时，我输入 git 名称（基于我从 github 存储库获得的链接。我得到“提供凭据以作为用户身份验证 SSH 服务器'github.com'' git'。该对话框已使用我放入 .ss 目录的 id_rsa 预先填充了私钥文件。

我什至去了 github 并将这个密钥添加到 SSH 密钥列表中。仍然没有喜悦。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T22:17:50.723

假设它在 github 和 bitbucket 上工作类似。今天我通过以下步骤让 Smartgit 3.0.10 与 bitbucket 一起运行：

上传本地代码

1）通过网站手动在bitbucket中创建存储库

2) 将您的 ssh 密钥添加到网站（PuttyGen > Conversions > Export OpenSSH）

3) 在您的本地仓库中检查 reposDir.hg\hgrc 的内容，应该看起来像

```
[paths] 
default = ssh://hg@bitbucket.org/user123/reposXYZ 
```

如果不手动更改。您还可以克隆您的空存储库并签入此行的本地副本。

重新启动 SmartGit，您应该能够推拉。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-21T10:29:24.073

如果您使用 github 上的“HTTPS 克隆 URL”，它会创建一个不需要 SSH 密钥的链接。这两篇文章解释它： [https://help.github.com/articles/which-remote-url-should-i-use](https://help.github.com/articles/which-remote-url-should-i-use) [https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

# macos - NSTask 从沙盒应用程序中产生

> ID：10768354
> 
> 赞同：2
> 
> 时间：2012-05-26T17:28:13.983
> 
> 标签：macos, cocoa, sandbox, nstask

假设一个沙盒化的基于 Cocoa 的应用程序生成了一个 SSH 实例。到目前为止一切顺利，SSH 进程正在启动。

问题是，如何让子进程读取文件（例如~/.ssh/config 或~/.ssh/known_hosts，甚至~/.ssh/my_specific_rsa_id）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T07:52:34.497

您生成的进程继承了其父进程的沙箱，如果不是这种情况，任何进程都可能突破沙箱......

您可以通过向用户请求访问权限（然后使用安全范围的书签将其保存以供后续运行）或通过临时权利，使您的父进程能够访问这些文件。

如果您是开发人员，请访问开发人员论坛并在沙盒主题中搜索 SSH。这个问题得到了很好的解决，并且可以从 Apple 工程师那里获得建议。

如果您不是开发人员，请放弃沙盒——至少对于这个应用程序而言——您只是在为自己制造问题。

# php - 从 PHP 更新数据库记录的灵活功能

> ID：10768355
> 
> 赞同：0
> 
> 时间：2012-05-26T17:28:17.927
> 
> 标签：php, mysql, arrays

有什么方法可以使下面给出的代码可重复用于不同的表，例如使用`foreach`？那么，如何发送和使用列名和值的数组呢？任何例子都受到高度赞赏。

```
<?php
    include_once 'include/DatabaseConnector.php';
    if(isset($_POST['flightNum'])) {
        $flightNum=$_POST['flightNum'];
        $from=$_POST['from'];
        $STADate=$_POST['STADate'];
        $query = 'UPDATE flightschedule 
                  SET frm="'.$from.'",STADate="'.$STADate.'"
                  WHERE flightNum="'.$flightNum.'"';
        DatabaseConnector::ExecuteQuery($query);
        echo '1';
    } else { 
        echo '0'; 
    }
?> 
```

更新：如果我不知道列名先验怎么办？如何创建灵活的 UPDATE 语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:34:09.310

您可以将代码转换为可重用的函数。例如。

```
function updateDB($tableName, $flightNum, $from, $STADate) {
    include_once 'include/DatabaseConnector.php';
    $query = 'UPDATE ' . $tableName 
              SET frm="'.$from.'",STADate="'.$STADate.'"
              WHERE flightNum="'.$flightNum.'"';
    $execute = DatabaseConnector::ExecuteQuery($query);
    return $execute;
} 
```

并使用它

```
if(isset($_POST['flightNum']) {
    $update = updateDB('flightschedule', $_POST['flightNum'], $_POST['from'], $_POST['STADate']);
    echo $update;
} 
```

**更新：**

> 我想将一组列名发送到函数“updateDB”。假设这些是 UPDATE 语句的 SET 和 WHERE 部分的列名。然后我可以使用 FOREACH，但我需要一些例子。

这就是你可以做到的。

```
function updateDB($tableName, $columns, $where) {
    //do some validation here to check if proper data is being passed like
    if(!isarray($columns)) {
        throw new Exception('argument two $columns should be an associative array');
    }
    include_once 'include/DatabaseConnector.php';
    $query  = 'UPDATE ' . $tableName;
    foreach($columns as $column => $data) {
        $query .= ' SET ' . $column . ' = ' . $data . ', ';
    }
    //remove last comma from the update query string
    $query = substr($query, 0, -1);
    $query .= ' WHERE ' . $where['column'] . ' = ' . $where['value'];
    $execute = DatabaseConnector::ExecuteQuery($query);
    return $execute;
} 
```

并使用它。

```
if(isset($_POST['flightNum']) {
    $columns = array(
        'frm' => $_POST['frm'],
        'STADate' => $_POST['STADate']
    );
    $where = array(
        'column'=> 'flightNum', 
         'value' =>  $_POST['flightNum']
    );
    $update = updateDB('flightschedule', $columns, $where);
    echo $update;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T17:53:54.227

像这样的东西应该工作：

```
function generateUpdateQuery($table, $fields, $where) {
    $updateFields = array();
    foreach ($fields as $k => $v) {
        $updateFields[] = $k.' = \''.$v.'\'';
    }
    $sqlQuery = 'UPDATE '.$table.
                ' SET '.implode(', ', $updateFields).
                ' WHERE '.implode(' AND ', $where);

    return $sqlQuery;
}

echo generateUpdateQuery('table_name',
                        array(
                            'field_a' => '10',
                            'field_b' => 'hello',
                            'field_c' => 'world'),
                        array(
                            'id=12',
                            'datetime > NOW()')
                        ); 
```

请记住，这是一个没有任何安全检查的简单示例。建议使用 PDO 之类的东西。此外，如果你正在寻找更健壮和灵活的东西，你应该看看 ORM 系统，比如[Doctrine](http://www.doctrine-project.org/)

# scala - 如何使用 xsbt-proguard-plugin 排除/包含特定包？

> ID：10768356
> 
> 赞同：1
> 
> 时间：2012-05-26T17:28:19.070
> 
> 标签：scala, sbt, proguard

我正在使用[xsbt-proguard-plugin](https://github.com/siasia/xsbt-proguard-plugin)，这是一个用于与 Proguard 一起工作的 SBT 插件。

我正在尝试为我编写的[Hive Deserializer提供 Proguard 配置，它具有以下依赖项：](https://github.com/snowplow/snowplow-log-deserializers)

```
// project/Dependencies.scala
val hadoop      = "org.apache.hadoop"          %  "hadoop-core"          % V.hadoop
val hive        = "org.apache.hive"            %  "hive-common"          % V.hive
val serde       = "org.apache.hive"            %  "hive-serde"           % V.hive
val httpClient  = "org.apache.httpcomponents"  %  "httpclient"           % V.http 
val logging     = "commons-logging"            %  "commons-logging"      % V.logging
val specs2      = "org.specs2"                 %% "specs2"               % V.specs2      % "test" 
```

加上一个非托管依赖：

```
// lib/UserAgentUtils-1.6.jar 
```

因为其中大多数要么用于本地单元测试，要么在 Hadoop/Hive 环境中可用，我希望我的缩小 jarfile 只包括：

*   Java 类 SnowPlowEventDeserializer.class 和 SnowPlowEventStruct.class
*   `org.apache.httpcomponents.httpclient`
*   `commons-logging`
*   `lib/UserAgentUtils-1.6.jar`

但我真的很难让语法正确。我应该从我想要保留的类的白名单开始，还是明确过滤掉 Hadoop/Hive/Serde/Specs2 库？我知道[这个 SO question](https://stackoverflow.com/questions/4830474/how-to-keep-exclude-a-particular-package-path-when-using-proguard)，但它似乎不适用于这里。

如果我最初尝试白名单方法：

```
// Should be equivalent to sbt> package
import ProguardPlugin._
lazy val proguard = proguardSettings ++ Seq(
  proguardLibraryJars := Nil,
  proguardOptions := Seq(
    "-keepattributes *Annotation*,EnclosingMethod",
    "-dontskipnonpubliclibraryclassmembers",
    "-dontoptimize",
    "-dontshrink",
    "-keep class com.snowplowanalytics.snowplow.hadoop.hive.SnowPlowEventDeserializer",
    "-keep class com.snowplowanalytics.snowplow.hadoop.hive.SnowPlowEventStruct"
  )
) 
```

然后我得到一个 Hadoop 处理错误，很明显 Proguard 仍在尝试捆绑 Hadoop：

```
proguard: java.lang.IllegalArgumentException: Can't find common super class of [[Lorg/apache/hadoop/fs/FileStatus;] and [[Lorg/apache/hadoop/fs/s3/Block;] 
```

同时，如果我尝试[使用 Proguard 的过滤语法](http://proguard.sourceforge.net/index.html#manual/usage.html)来建立我不想包含的库的黑名单：

```
import ProguardPlugin._
lazy val proguard = proguardSettings ++ Seq(
  proguardLibraryJars := Nil,
  proguardOptions := Seq(
    "-keepattributes *Annotation*,EnclosingMethod",
    "-dontskipnonpubliclibraryclassmembers",
    "-dontoptimize",
    "-dontshrink",
    "-injars  !*hadoop*.jar"
  )
) 
```

然后这似乎也不起作用：

```
proguard: java.io.IOException: Can't read [/home/dev/snowplow-log-deserializers/!*hadoop*.jar] (No such file or directory) 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:11:40.973

白名单是正确的方法：ProGuard 应该得到一个完整的上下文，这样它就可以正确地剔除不需要的类、字段和方法。

错误“找不到公共超类”表明输入中仍然缺少某些库。ProGuard 可能警告过它，但配置似乎包含选项 -ignorewarnings 或 -dontwarn （应该避免）。您应该使用 -injars 或 -libraryjars 添加库。

如果 ProGuard 然后在输出中包含一些您不期望的类，您可以使用“-whyareyoukeeping class somepackage.SomeUnexpectedClass”获得解释。

从工作配置开始，您仍然可以尝试从输入中过滤掉类或整个 jar。过滤器被添加到类路径中的项目中，而不是单独添加，例如“-injars some.jar(!somepackage/**.class)”——cfr。手册。如果输入包含拖入其他不需要的类的测试类，这将很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:41:20.473

最后，我无法使用 Proguard 解决重复的类错误，更不用说如何弄清楚如何过滤掉相关的 jar，所以最终切换到了一种更[简洁的 sbt-assembly](https://github.com/sbt/sbt-assembly)方法：

-1。[根据README](https://github.com/sbt/sbt-assembly/blob/master/README.md)将 sbt-assembly 插件添加到我的项目中

-2。使用标志更新了适当的项目依赖项，`"provided"`以阻止它们被添加到我的胖 jar 中：

```
val hadoop      = "org.apache.hadoop"          %  "hadoop-core"          % V.hadoop      % "provided"
val hive        = "org.apache.hive"            %  "hive-common"          % V.hive        % "provided"
val serde       = "org.apache.hive"            %  "hive-serde"           % V.hive        % "provided"
val httpClient  = "org.apache.httpcomponents"  %  "httpclient"           % V.http
val httpCore    = "org.apache.httpcomponents"  %  "httpcore"             % V.http  
val logging     = "commons-logging"            %  "commons-logging"      % V.logging     % "provided"
val specs2      = "org.specs2"                 %% "specs2"               % V.specs2      % "test" 
```

-3。添加了一个 sbt-assembly 配置，如下所示：

```
import sbtassembly.Plugin._
import AssemblyKeys._
lazy val sbtAssemblySettings = assemblySettings ++ Seq(
  assembleArtifact in packageScala := false,
  jarName in assembly <<= (name, version) { (name, version) => name + "-" + version + ".jar" },
  mergeStrategy in assembly <<= (mergeStrategy in assembly) {
    (old) => {
      case "META-INF/NOTICE.txt" => MergeStrategy.discard
      case "META-INF/LICENSE.txt" => MergeStrategy.discard
      case x => old(x)
    }
  }
) 
```

然后键入`assembly`生成了一个“胖 jar”，其中仅包含我需要的包，包括非托管依赖项，不包括 Hadoop/Hive 等。

# iphone - Cocos2D 随机精灵运动

> ID：10768360
> 
> 赞同：3
> 
> 时间：2012-05-26T17:28:42.400
> 
> 标签：iphone, objective-c, random, cocos2d-iphone, sprite

作为 Cocos2D 的初学者，我正在尝试制作一个 iPhone 游戏，其中一些奶牛在屏幕上随机移动。我使用了从这里移动精灵的代码：[highoncoding.com/.../](http://highoncoding.com/Articles/741_Cocos2d_iPhone_Sprite_Movement_and_Collision_Detection.aspx)。我通过 addAnimal 方法在 init 方法中添加精灵：

```
-(void) addAnimal {
animal = [CCSprite spriteWithFile:@"cow.png"];
animal.position = [self generateRandomCoordinates];

[self addChild:animal];
[self startAnimation:animal];
} 
```

我的问题：当我在游戏中添加多头奶牛时，它们会从那个随机生成位置移动到另一个随机位置，然后第一头奶牛停止，另一头奶牛正确继续。finishedMoving 方法中的 startAnimation 命令总是转到最后一个精灵。这意味着我需要更好地控制我的精灵但是如何做到这一点呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T17:53:46.337

您可以尝试实现动物类，它将包含您的精灵并封装随机运动。喜欢

```
@implementation Cow

- (id) init
{
    self = [super init];

    if( self != nil )
    {
        CCSprite* cowSprite = [CCSprite spriteWithFile:@"cow.png"];
        [self addChild: cowSprite];
    }

    return self;
}

- (void) onEnter
{
    [super onEnter];
    [self makeRandomMovement];
}

- (void) makeRandomMovement
{
    id randomMoveAction = // create your random move action here
    id moveEndCallback = [CCCallFunc actionWithTarget: self selector: @selector(makeRandomMovement)];
    id sequence = [CCSequence actionOne: randomMoveAction two: moveEndCallback];
    [self runAction: sequence];
}

@end 
```

这样随机运动部分结束后，会再次调用makeRandomMovement方法生成并开始新的随机运动部分。

然后将您的 addAnimal 方法重新制作为类似

```
- (void) addAnimal
{
    Cow* newCow = [Cow node];
    [newCow setPosition: [self generateRandomPosition]];
    [self addChild: newCow];
} 
```

# android - 函数参数作为文件名

> ID：10768361
> 
> 赞同：0
> 
> 时间：2012-05-26T17:28:47.927
> 
> 标签：android

将文件添加到 MediaPlayer 很容易：

```
mp = MediaPlayer.create(Myctivity.this, R.raw.sound); 
```

但是，如果我将文件名作为来自这样的函数的参数呢？

```
 public void CreateSound(String filename, float volume)
    {
        mp = MediaPlayer.create(Myctivity.this, R.raw.???);
             mp.setVolume(volume, volume);
           try {
            mp.prepare();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
           mp.start();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:40:03.223

[这个](https://stackoverflow.com/q/7499605/645270)线程提到

```
 int resID=getResources().getIdentifier(fname, "raw", getPackageName()); 
```

它采用文件名并获取 ID。（**OBS：**在使用文件名之前，它被转换为小写）然后可以将其传递给 MediaPlayer：

```
MediaPlayer mediaPlayer=MediaPlayer.create(this,resID); 
```

# .net - 安全高效地生成excel文件

> ID：10768363
> 
> 赞同：0
> 
> 时间：2012-05-26T17:29:28.363
> 
> 标签：.net, excel

我想用 .NET 或 JAVA 创建一个与数字秤连接的软件。我希望导出的数据能够用 Excel 打开。我有什么选择？

*   CSV 文件？
*   Excel互操作.net库？
*   其他？

我猜 csv 是一个解决方案，但不允许任何额外的东西。但是我不希望数据丢失，所以我认为如果使用 interop .net 文件的计算机崩溃可能会损坏。如果使用 csv，它不会被损坏。有没有其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T01:00:27.387

如果要创建 Excel 文件，请尝试使用[OpenXML](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=5124)或[一些 lib](https://stackoverflow.com/questions/151005/create-excel-xls-and-xlsx-file-from-c-sharp)来包装它。要在已经存在的文件中查找一些数据，[OleDb](http://www.codeproject.com/Articles/8500/Reading-and-Writing-Excel-using-OLEDB)可以更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T01:36:55.807

我更喜欢 CSV，因为它更容易从一种系统/语言移动到另一种系统/语言，更改代码更少 [Java 到 .Net 或 .Net 到 Java]

# vba - 无法以引号开头的值分配给excel vba中的另一个单元格

> ID：10768370
> 
> 赞同：3
> 
> 时间：2012-05-26T17:30:05.700
> 
> 标签：vba, excel-2007, quote

我有一个 Excel 工作表，其中一个单元格由网络查询填充。该单元格的内容以单引号 ( `'`) 开头。单元格具有文本数字格式。

当我使用 VBA 将此单元格的内容分配给另一个单元格时，引号被删除，但我不希望这种情况发生。

如何获得单元格的精确副本，即未删除引用？

我用：

```
Dim lSourceRange as Range
Dim lTargetRange as Range

set lSourceRange = Cells(1,1)
set lTargetRange = Cells(2,2)

lTargetRange.numberformat = '@'
lTargetRange.value2 = lSourceRange.Value2 
```

我也试过

```
lTargetRange.value2 = lSourceRange.text
lTargetRange.value2 = lSourceRange.Value

lTargetRange.value = lSourceRange.text
lTargetRange.value = lSourceRange.Value 
```

始终删除初始报价。（的 value/value2/text ，在调试器中显示`lSourceRange`为）`'s-Hertogenbosch``"'s-Hertogenbosch"`

我知道引号是为了让 Excel 清楚我想使用文本，但**我需要引号成为值的一部分（以及工作表中的显示）**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:39:52.007

尝试这个

```
lTargetRange.value = "'" & lSourceRange.Value 
```

或使用这个

```
lSourceRange.Copy lTargetRange 
```

# mysql - 从两个表中删除连接

> ID：10768372
> 
> 赞同：0
> 
> 时间：2012-05-26T17:30:35.187
> 
> 标签：mysql, join, sql-delete

我需要创建一个连接来删除两个表中的条目。当表中的 project_id 等于 php 文档页面上的时，删除将发生在项目中。我还需要删除 project_course 上的链接条目。这是我目前拥有的代码。

```
$deleteSQL = sprintf("DELETE FROM projects p
INNER JOIN project_course pc
WHERE p.Project_id=%s",
                   GetSQLValueString($_GET['Project_id'], "int")); 
```

有人知道怎么做吗？我之前没有做过要删除的连接，只是一个普通的连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:35:10.647

您不必使用连接查询显式执行此操作。您可以`DELETE CASCADE`在表定义中使用。请参阅[如何在 mysql 中删除级联？](https://stackoverflow.com/questions/511361/how-do-i-use-on-delete-cascade-in-mysql)

# java - Google App Engine NotSerializableException DatastoreServiceImpl

> ID：10768377
> 
> 赞同：0
> 
> 时间：2012-05-26T17:31:49.423
> 
> 标签：java, google-app-engine, jakarta-ee, jsf-2

我无法解决这里出了什么问题。我机器上代码的本地版本可以正常工作，不会引发任何异常。这是堆栈跟踪

```
Uncaught exception from servlet
java.lang.RuntimeException: java.io.NotSerializableException: com.google.appengine.api.datastore.DatastoreServiceImpl
    at com.google.apphosting.runtime.jetty.SessionManager.serialize(SessionManager.java:373)
    at com.google.apphosting.runtime.jetty.DatastoreSessionStore.createEntityForSession(DatastoreSessionStore.java:71)
    at com.google.apphosting.runtime.jetty.DatastoreSessionStore.saveSession(DatastoreSessionStore.java:93)
    at com.google.apphosting.runtime.jetty.SessionManager$AppEngineSession.save(SessionManager.java:164)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:41)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:249)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:135)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:477)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679) 
```

我正在使用带有 primefaces 3.2 的 JSF 2 相同的应用程序在 localhost:8888 上完美运行

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:56:21.283

正在全局声明数据存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T01:57:39.377

这看起来像您正在尝试（直接或间接）存储`DatastoreServiceImpl`与您的会话有关的内容。

# jquery - 如何强制渲染使用 jQuery 和 jqPlot 库的 JSF 复合组件

> ID：10768378
> 
> 赞同：1
> 
> 时间：2012-05-26T17:31:49.823
> 
> 标签：jquery, jsf, primefaces, jqplot, composite

我使用了优秀的库 Primefaces，但不幸的是我不得不创建自己的组件来自定义它。

问题是该组件在第一个选项卡上显示得很好，但在第二个选项卡上却没有。

加载选项卡时如何强制显示组件？

这里是自定义组件**wm:dateLineChart**：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:cc="http://java.sun.com/jsf/composite"
  xmlns:h="http://java.sun.com/jsf/html">

<!-- INTERFACE -->
<cc:interface>
</cc:interface>

<!-- IMPLEMENTATION -->
<cc:implementation>
    <h:panelGroup rendered="true">
        <div id="#{cc.id}" 
             style="height:208px;"/>
        <script type="text/javascript" >
            var chartId = '<h:outputText value="#{cc.id}"/>';
            dateLineChart(chartId);

            function dateLineChart(id) {
                $(document).ready(function(){
                    jQuery.jqplot (id, [[3,7,9,1,4,6,8,2,5]], {
                        title: 'Plot With Options',
                        axesDefaults: {
                            labelRenderer: $.jqplot.CanvasAxisLabelRenderer
                        },
                        axes: {
                            xaxis: {
                                label: "X Axis",
                                pad: 0
                            },
                            yaxis: {
                                label: "Y Axis"
                            }
                        }
                    });
                });
            }
        </script>
    </h:panelGroup>
</cc:implementation>
</html> 
```

在这里我使用它：

```
<p:tabView id="tabView" dynamic="true" cache="true">  

    <p:tab id="homeView">  
        <wm:dateLineChart id="chartOnFirstTab" />
    </p:tab>  

    <p:tab id="otherView" >
        <wm:dateLineChart id="chartOnSecondTab" />
    </p:tab>

</p:tabView> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T22:40:43.053

Primefaces 的适配解决方案。希望它可以为其他人服务。

```
 <p:tabView id="tabView" dynamic="true" cache="true" onTabShow="refreshDateLineChart()" >
    //...
 </p:tabView> 
```

使用的JS：

```
 /**
  * The date line chart reference.
  */
 var DATE_LINE_CHART;

 /**
  * Draw the date line chart.
  * @param id : the div id
  */
 function dateLineChart(id) {
    $(document).ready(function(){
        DATE_LINE_CHART = jQuery.jqplot (id, [[3,7,9,1,4,6,8,2,5]]);
    });
 }

 /**
  * Refresh the date line chart.
  */
 function refreshDateLineChart() {
    if (DATE_LINE_CHART != null && DATE_LINE_CHART._drawCount === 0) {
        DATE_LINE_CHART.replot();
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:25:31.880

为确保您的图表正确绘制，您需要在`replot()`第一次显示适当图表时调用相应图表的方法（例如单击包含选项卡的图表）。

这就是我为`jQuery UI`标签做的方式：

```
 $('#tabs').bind('tabsshow', function(event, ui) {
      if (ui.index === 1 && plot1._drawCount === 0) {
        plot1.replot();
      }
      else if (ui.index === 2 && plot2._drawCount === 0) {
        plot2.replot();
      }
  }); 
```

[上面的代码在这里展示。](http://jsfiddle.net/Boro/kU3jg/)代码示例[取自这个答案](https://stackoverflow.com/a/10412837/613495)。如果您需要查找图表的选项卡，我在那里使用的方法可能与您相关。

# iphone - 如何将 iPhone 的闪屏添加到从 iPad 到 Universal 制作的应用程序

> ID：10768379
> 
> 赞同：0
> 
> 时间：2012-05-26T17:31:51.267
> 
> 标签：iphone, default, splash-screen, ios-universal-app

我想在当前是 iPad 应用的应用中添加启动画面。我成功地使用了不同的应用程序图标（适用于 iPhone 和 iPad），但启动画面。现在称为“Default-Portrait~iphone.png”，但没有显示启动画面。有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:38:58.983

您只需将文件命名为 Default.png（和 Default@2x.png），iPhone 版本就会使用它。iPhone 不像 iPad 那样支持多个 Default.png 方向。

# php - 向 mysql 添加行-随机排序-希望它们在顶部

> ID：10768384
> 
> 赞同：1
> 
> 时间：2012-05-26T17:32:35.927
> 
> 标签：php, mysql, row

我有一种“问题”，我不知道它是怎么发生的。如果我通过 php 将行添加到我的表中，它只是将它们随机添加到某处。但我希望将它们添加到顶部。相反，它只是将它们添加到整个表格中。

```
 $name = ($_GET["name"]);
 $sql = "INSERT INTO $DB_Table VALUES('$name')";

 $number = ($_GET["number"]);
 $sql = "INSERT INTO $DB_Table VALUES('$number')";

 $con = mysql_connect($DB_HostName,$DB_User,$DB_Pass) or die (mysql_error()); 
 mysql_select_db($DB_Name,$con) or die(mysql_error()); 

 mysql_query("INSERT INTO $DB_Table (Name,number)
 VALUES ('$name','$m_yolo')");

 $res = mysql_query($sql,$con) or die(mysql_error());

        mysql_close($con);
if ($res) {
    echo "success";
}else{
    echo "faild";
}// end else
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:45:21.567

关系表中没有行排序之类的东西。如果你想让它们排序，你需要使用一个`ORDER BY`子句。您可以添加一`TIMESTAMP`列，您可以在选择数据时对其进行排序：[11.3.1。DATE、DATETIME 和 TIMESTAMP 类型](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T17:53:27.363

创建另一个表，但在其中添加一个 ID 自增列：

```
CREATE TABLE IF NOT EXISTS `table` (
  `id` int(5) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  `number` int(10) NOT NULL,
  PRIMARY KEY (`id`)
); 
```

然后你可以像这样插入新行：

```
$sql = "INSERT INTO $DB_Table (id, name,number) VALUES ('', '$name', '$number')"; 
```

然后，您的新条目将按 id 排序。您可以在选择查询中订购它们：

```
$sql = "SELECT 'name', 'number' FROM `table` ORDER BY 'id' DESC"; 
```

不过，关于您的代码的一点评论：直接使用 $_GET 中的值是不安全的，就像您在代码开头所做的那样。尝试使用[`mysql_real_escape_string()`](http://fr.php.net/manual/en/function.mysql-real-escape-string.php)例如。

# php - 致命错误：无法重新声明-（之前在 wordpress 插件中声明

> ID：10768385
> 
> 赞同：0
> 
> 时间：2012-05-26T17:32:38.997
> 
> 标签：php, wordpress, plugins, fatal-error

我是一个 php 菜鸟，试图为 wordpress 使用一个名为特色项目滑块的插件

- 当我使用**简码**将其放置到页面或帖子时，它**工作正常**。-**问题**是当我尝试通过**php include**将它放置到我的模板中时，我得到了这个错误

（致命错误：无法在 /home/infostar/public_html/ 中重新声明 features_options_page()（之前在 /home/infostar/public_html/wp-content/plugins/featured-item-slider/featured-item-slider.php:36 中声明） wp-content/plugins/featured-item-slider/featured-item-slider.php（第 37 行）

到目前为止，我已经尝试 过**include_once** ，当我使用它时，我没有收到任何错误，但没有显示 **require_once**再次没有错误，但我的插件没有显示 **get_included_files**仍然没有错误，但没有显示

我认为可能不会多次包含文件functions.php，因为当我用短代码调用它时它工作正常

有高手能帮我吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T05:49:34.770

您如何在模板中发布短代码？

这是根据 wordpress 支持线程的正确格式。 [http://wordpress.org/support/topic/short-code-outside-page-or-post](http://wordpress.org/support/topic/short-code-outside-page-or-post)

```
<?php echo do_shortcode('[catlist id=1 numberposts=5)]'); ?> 
```

实际的简码放在方括号中。

# javascript - 奇怪的javascript语法

> ID：10768386
> 
> 赞同：-2
> 
> 时间：2012-05-26T17:32:47.597
> 
> 标签：javascript, syntax

昨天，我看到了一个 javascript 文件，我创建了两个与语言语法相关的问题。

首先，是什么让这段代码

```
var result= { 'index': 0 , 'is_check': false }; 
```

结果是什么类型的变量...？

代码的第二部分是

```
return { '_teams': teams, 'champions': champions }; 
```

球队和冠军都在阵中。

该方法返回什么...？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T17:34:11.133

*   键值对
*   哈希表/映射
*   字典
*   关联数组
*   还有很多...

但在 JavaScript 中，它们被简单地称为[**对象**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object)，所以不要混淆。这种表示法，它包含在其中`{}`并用逗号分隔的值，称为[**对象文字表示法**](http://www.crockford.com/javascript/survey.html)

[**您可以使用typeof**](https://developer.mozilla.org/en/JavaScript/Reference/Operators/typeof)检查它们的类型。

```
console.log(typeof result) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T17:36:09.873

这将返回对象。您可以使用点运算符访问元素。

# sql-server - 线串到点

> ID：10768390
> 
> 赞同：10
> 
> 时间：2012-05-26T17:33:57.123
> 
> 标签：sql-server, tsql, geospatial, sql-server-2012

我需要使用 SQL Server 从 Linestring 中提取点。我知道我可以使用 geometry.ToString() 查看坐标，但我需要新的点几何。我该怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-12T04:17:20.660

如果您使用的是 SQL 2005+，我建议您使用 CTE：

```
DECLARE @GeometryToConvert GEOMETRY
SET     @GeometryToConvert = 
    GEOMETRY::STGeomFromText('LINESTRING (-71.880713132200128 43.149953199689264, -71.88050339886712 43.149719933022993, -71.880331598867372 43.149278533023676, -71.88013753220099 43.147887799692512, -71.879965998867931 43.147531933026357, -71.879658998868422 43.147003933027179, -71.879539598868575 43.146660333027739, -71.879525332201979 43.145994399695439, -71.87959319886852 43.145452399696296, -71.879660598868384 43.14531113302985, -71.879915932201357 43.145025599696908, -71.879923198868028 43.1449217996971, -71.879885998868076 43.144850733030523, -71.879683932201715 43.144662333030851, -71.879601398868488 43.144565333030982, -71.879316798868956 43.144338333031328, -71.879092332202617 43.144019799698469, -71.8789277322029 43.143902533032019, -71.878747932203169 43.143911533031996, -71.878478132203554 43.14405779969843, -71.878328332203807 43.144066133031743, -71.878148732204068 43.144016599698489, -71.8772655988721 43.143174533033118, -71.876876198872708 43.142725133033821, -71.876801532206173 43.142654933033953, -71.876629398873092 43.142600733034044)', 4269)
;
WITH GeometryPoints(N, Point) AS  
( 
   SELECT 1,  @GeometryToConvert.STPointN(1)
   UNION ALL
   SELECT N + 1, @GeometryToConvert.STPointN(N + 1)
   FROM GeometryPoints GP
   WHERE N < @GeometryToConvert.STNumPoints()  
)

SELECT *, Point.STAsText() FROM GeometryPoints 
```

**文本结果**

![文本结果](../Images/071b6942664a5d510e7676516bae2b21.png)

**空间结果 - STBuffer(.0001)**

![空间结果（缓冲）](../Images/bcb861cffd138b6d4393534593f88d49.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T21:20:25.920

下面是一个关于如何从 LineString 中提取点的小例子：

```
declare @LineString geography,
        @loop       int
declare @Points     table (Point geography)

set @LineString = geography::Parse('LINESTRING(
        -22.8317451477051 -43.4041786193848,-22.8308925628662 -43.4045524597168,-22.8314971923828 -43.404727935791, 
        -22.833927154541  -43.4069404602051,-22.8267574310303 -43.4071388244629)')

set @loop = @LineString.STNumPoints()

while @loop > 0
    begin
    insert into @Points values(@LineString.STPointN(@loop))
    set @loop = @loop -1
    end

select Point.Lat as Lat, Point.Long as Long from @Points 
```

不要放弃：T-SQL 中的空间数据有点棘手，但它确实有效！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T20:28:45.677

我对几何数据类型几乎一无所知，但[文档](http://technet.microsoft.com/en-us/library/bb895270#number)说您使用[`STNumPoints`](http://technet.microsoft.com/en-us/library/bb933916)获取对象中的点数，然后使用[`STPointN`](http://technet.microsoft.com/en-us/library/bb933908).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-15T09:50:36.717

我知道这个非常老的问题，但应该提到的是，这可以在没有循环的情况下完成（或递归 CTE，这是一种循环）

```
DECLARE @GeometryToConvert GEOMETRY
SET     @GeometryToConvert = 
    GEOMETRY::STGeomFromText('LINESTRING (-71.880713132200128 43.149953199689264, -71.88050339886712 43.149719933022993, -71.880331598867372 43.149278533023676, -71.88013753220099 43.147887799692512, -71.879965998867931 43.147531933026357, -71.879658998868422 43.147003933027179, -71.879539598868575 43.146660333027739, -71.879525332201979 43.145994399695439, -71.87959319886852 43.145452399696296, -71.879660598868384 43.14531113302985, -71.879915932201357 43.145025599696908, -71.879923198868028 43.1449217996971, -71.879885998868076 43.144850733030523, -71.879683932201715 43.144662333030851, -71.879601398868488 43.144565333030982, -71.879316798868956 43.144338333031328, -71.879092332202617 43.144019799698469, -71.8789277322029 43.143902533032019, -71.878747932203169 43.143911533031996, -71.878478132203554 43.14405779969843, -71.878328332203807 43.144066133031743, -71.878148732204068 43.144016599698489, -71.8772655988721 43.143174533033118, -71.876876198872708 43.142725133033821, -71.876801532206173 43.142654933033953, -71.876629398873092 43.142600733034044)', 4269)
;WITH
    L0   AS(SELECT 1 AS c UNION ALL SELECT 1),
    L1   AS(SELECT 1 AS c FROM L0 AS A CROSS JOIN L0 AS B),
    L2   AS(SELECT 1 AS c FROM L1 AS A CROSS JOIN L1 AS B),
    L3   AS(SELECT 1 AS c FROM L2 AS A CROSS JOIN L2 AS B),
    L4   AS(SELECT 1 AS c FROM L3 AS A CROSS JOIN L3 AS B),
    L5   AS(SELECT 1 AS c FROM L4 AS A CROSS JOIN L4 AS B),
    Nums AS(SELECT ROW_NUMBER() OVER(ORDER BY (SELECT NULL)) AS n FROM L5)
SELECT n, @GeometryToConvert.STPointN(n), @GeometryToConvert.STPointN(n).STAsText()
FROM Nums -- can be done with real numbers table
where n  <= @GeometryToConvert.STNumPoints ()
GO 
```

或使用即时值

```
DECLARE @GeometryToConvert GEOMETRY
SET     @GeometryToConvert = 
    GEOMETRY::STGeomFromText('LINESTRING (-71.880713132200128 43.149953199689264, -71.88050339886712 43.149719933022993, -71.880331598867372 43.149278533023676, -71.88013753220099 43.147887799692512, -71.879965998867931 43.147531933026357, -71.879658998868422 43.147003933027179, -71.879539598868575 43.146660333027739, -71.879525332201979 43.145994399695439, -71.87959319886852 43.145452399696296, -71.879660598868384 43.14531113302985, -71.879915932201357 43.145025599696908, -71.879923198868028 43.1449217996971, -71.879885998868076 43.144850733030523, -71.879683932201715 43.144662333030851, -71.879601398868488 43.144565333030982, -71.879316798868956 43.144338333031328, -71.879092332202617 43.144019799698469, -71.8789277322029 43.143902533032019, -71.878747932203169 43.143911533031996, -71.878478132203554 43.14405779969843, -71.878328332203807 43.144066133031743, -71.878148732204068 43.144016599698489, -71.8772655988721 43.143174533033118, -71.876876198872708 43.142725133033821, -71.876801532206173 43.142654933033953, -71.876629398873092 43.142600733034044)', 4269)
SELECT n, @GeometryToConvert.STPointN(n), @GeometryToConvert.STPointN(n).STAsText()
FROM (VALUES (1),(2),(3),(4),(5),(6),(7),(8),(9),(10),(11),(12),(13),(14),(15),(16),(17),(18),(19),(20),(21),(22),(23),(24),(25),(26),(27),(28),(29)) Numbers (n) 
where n  <= @GeometryToConvert.STNumPoints ()
GO 
```

# scala - Scala 创建需要复杂构造过程的对象的默认方式

> ID：10768397
> 
> 赞同：0
> 
> 时间：2012-05-26T17:34:12.787
> 
> 标签：scala, constructor, factory

我认为了解语言设计者想要的默认实践以及他们针对语言改进的默认实践总是有用的，即使后来偏离了这些约定。在 Scala 中，所有字段都必须在声明它们的类的构造函数中初始化。这是一个重要的限制。辅助构造函数也受到限制。构造函数中的任何临时变量都需要放在内部方法或闭包中，以避免不需要的字段，这会使构造函数的主体看起来混乱。所有这些都不利于使用构造函数体。即使从超类分配给抽象变量时也需要覆盖 val/var 语法，这消除了为构造而使用派生类的一些优势。

伴随对象可以访问其类的所有字段。然而，对于构造来说，这并不是它可能首先出现的优势，因为所有字段都必须在类的构造函数中初始化。所以看起来很自然的做法是使用对象中的方法对类变量进行任何处理，为类中的每个不可变集合创建一个临时可变集合，listbuffer 是默认值，然后将所有值和集合传递到一个无形的构造函数。工厂可以在任何对象甚至类中，但也可以在伴随对象中，除非有充分的理由。对象不能接受类型参数，但如果需要，它们的工厂方法可以。当然，你可以拥有尽可能多的工厂方法，因为你需要准构造函数，它们可以重用任何常见的算法。

**它是否正确？**

为了响应示例的请求，这是我正在从 C# 移植到 Scala 的构造函数，请注意多个类型参数在 Scala 中消失了：

```
public class GridC : GridBase<HexC, SideC, UnitC, ISegC>
{        
    public Geometry<HexC, SideC, UnitC, ISegC> geomC { get; private set; }        

    internal GridC(Scen scen, int gridNum, int xDim, int yDim, int xOff, int yOff, Terr terr = Terr.Plain):
        base(gridNum, scen, 10.0)
    {            
        this.geomC = scen.geomC;
        xIntLeft = xOff + 1;
        yIntBottom = yOff;
        xIntRight = xDim * 2 + 1 + xOff;
        yIntTop = yDim * 2 + 2 + yOff;            
        Coodg hexCoodg;
        for (int x = xOff; x < xDim * 2 + xOff; x += 2)
        {
            for (int y = yOff; y < yDim * 2 + yOff; y += 2)
            {
                if (x % 4 == y % 4)
                {
                    hexCoodg = new Coodg(num, x + 2, y + 2);                         
                    HexC hexC = scen.hexCs.NewHexC(hexCoodg);
                    SideC sideC;
                    MiscStrat.sixDirn.ForEach(i =>
                        {
                            Coodg sideCoodg = hexCoodg + Cood.DirnTrans(i);
                            sideC = sides[sideCoodg];
                            if (sideC == null)
                                scen.sideCs.NewSide(hexC, i);                                
                            else
                                scen.sideCs.SetHex2(sideC, hexC, i);
                        });                                                                         
                }
            }
        }
    } 
```

创建上面的子类纯粹是为了给下面的基类提供一个构造函数，只是为了展示与构造相关的部分；

```
public class GridBase<HexT, SideT, UnitT, SegT> : IGridBase
    where HexT : Hex where SideT : Side where UnitT : Unit where SegT : ISeg
{
    public int num { get; private set; }
    int IGridBase.num { get { return num; } }
    IListsGeom<HexT, SideT, UnitT> iLists;
    public HexList<HexT> hexs { get { return iLists.hexs; } }
    public SideList<SideT> sides { get { return iLists.sides; } }
    public Geometry<HexT, SideT, UnitT, SegT> geom { get; private set; }        
    public int xIntLeft { get; protected set; }
    public int xIntRight { get; protected set; }
    public int yIntBottom { get; internal set; }
    public int yIntTop { get; internal set; }
    public double scale { get; private set; }        

    protected GridBase(int num, IListsGeom<HexT, SideT, UnitT> iLists, double scale)
    {
        this.num = num;
        this.iLists = iLists;
        this.scale = scale;
    }
} 
```

构造函数创建一个简单的统一十六进制网格。需要使用完全不同算法的其他构造函数，并且将创建需要相关但更复杂算法的其他构造函数。我不是专家，但我的印象是工厂在 C# 中的使用要少得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:55:01.377

如果我理解你的问题，我会说需要复杂构造方法的东西应该有应用方法来支持伴随对象的方法。但是我担心他们有如此复杂的施工要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T22:00:10.820

通常，您通常通过（基）类的伴随对象上的方法提供这样的复杂构造。它提供了初始化代码和构建后使用代码的良好分离。

此外，拥有不可变数据可能有助于设计更小、更集中的关注点。例如，您有一个框（左、右、上、下），您可以将其分成自己的类（或者如果您愿意，也可以只是一个元组）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T09:25:38.073

关于您必须在类的构造函数中初始化所有字段的声明：您有两种方法来处理这个问题。

1.  在类的构造函数中将更复杂的字段设置为默认值，例如`val a: Int = _`
2.  在伴生对象的 apply 方法中进行计算并初始化构造函数中的所有字段（即，将所有这些预先计算的值传递给构造函数）

就个人而言，我更喜欢 2\. 因为它保证了一个对象在构造后在语义上是完整的。

# php - 脚本必须在 24 小时内执行 X 次。我如何随机化？

> ID：10768403
> 
> 赞同：2
> 
> 时间：2012-05-26T17:35:12.647
> 
> 标签：php, bash, cron

我有一个 PHP 脚本，它可以在几秒钟内完成一些事情（长时间不运行）。我需要执行此脚本，**假设**每天执行 12 次（这可以更改）。24 / 12 = 2 小时。

我可以每 2 小时执行一次脚本，但我需要它在 24 小时内随机分配。

这意味着脚本不必在 01:05 PM、03:05 PM、05:05 PM 执行**，**而是**在**01:37 **PM**、**03** : **11** PM、05: **46** PM 执行。我想你已经明白了重点。很抱歉不是很清楚。

 *****（可以安装 cron 和其他工具（如果需要）。运行 debian 6）*

**将提供赏金（100 代表）以获得可行的解决方案。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:41:37.637

我会这样做：设置一个 cron 来告诉它像这样每 2 小时运行一次

```
0 /2 * * * php youscript.php 
```

这表示每隔一小时运行一次 yourscript.php。然后在 php 代码本身的顶部放置：

```
sleep(rand(5*60,50*60)); 
```

这将使脚本在开始工作前 5 到 50 分钟之间随机暂停一段时间。您可以更改随机数的最小值和最大值，以确保运行之间的时间最短。

如果您希望它运行 24 次而不是

```
0 * * * * php youscript.php 
```

甚至一天48次

```
0,30 * * * * php youscript.php 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T17:53:46.037

假设您希望脚本`N`每天运行几次。然后创建一个 bash 脚本 `my_php_runner.bash`，如下所示：

```
#!/bin/bash

N=12  # 50 times a day

let WAIT_TIME=86400/$N

while [[ $n -gt 0 ]]; do
    php yourscript.php

    # Sleep for $WAIT +/- 300 seconds
    sleep $(( $WAIT - 300 + $RANDOM%600 ))
    ((n--))
done 
```

它将运行您的脚本 12 次，每次运行之间等待 115 到 125 分钟。然后添加类似

```
0 0 * * * my_php_runner.bash 
```

`cron`每天运行一次 bash 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T17:49:44.187

如果您严格必须每天运行 X 次：

*   手动（或制作一个简单的脚本）将一天分成 X 部分。
*   为每个部分制作一个 cron 行。
*   在运行期间将脚本延迟 0 到 24H/x 之间的随机量。

如果不：

*   Cron 在午夜运行。
*   PHP使用泊松分布延迟然后处理。
*   脚本结束运行一个新脚本，除非它的处理超过了午夜。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T17:42:55.827

您始终可以`sleep(rand(60, 1.5 * 60))`在 cronjob 开始时抵消其执行。在此期间，您将有一个空闲的 PHP 进程，这可能是也可能不是问题。****

# sql - SQL Server 日期范围和外部联接

> ID：10768404
> 
> 赞同：1
> 
> 时间：2012-05-26T17:35:12.727
> 
> 标签：sql, sql-server-2008, join, aggregate-functions

我正在尝试做一个简单的聚合查询来为某个日期范围内的用户汇总一些结果。我想选择所有用户，如果他们没有适当的记录，查询应该只为他们返回 0。

问题是，即使在选择用户 ID 的表上使用右外连接，它也只会选择左表的该日期范围内存在的用户......

这是查询：

```
select B.fld_strcode, sum(ISNULL(fld_val, 0)) as res
from tbl_transproc A right outer join tbl_pr B on A.fld_int_id = B.fld_auto_int_id
where A.fld_dtmservicedate between '2012-04-01' and '2012-05-01'
and B.fld_bytprtypeid = 1
group by B.fld_strcode 
```

此查询返回 13 行。仅选择 ID (fld_strcode) 的查询返回 25 个唯一结果。我希望它返回 25 行（对于每个 ID），而那些没有值的行的值为 0。如果我取出日期范围（遍历表中的所有结果），那么它适用于所有用户，这这是有道理的，因为在所有时间里，所有用户都会在表中至少有一条记录。有些用户几个月都没有记录，在这种情况下，我需要它为他们返回 0。

关于如何实现这一目标的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T17:43:35.127

过滤外连接时，必须记住在连接本身中进行，否则最终会得到屏蔽内连接：

```
select B.fld_strcode, sum(ISNULL(fld_val, 0)) as res
  from tbl_transproc A 
 right outer join tbl_pr B 
    on A.fld_int_id = B.fld_auto_int_id
   AND A.fld_dtmservicedate between '2012-04-01' and '2012-05-01'
 where B.fld_bytprtypeid = 1
 group by B.fld_strcode 
```

我会切换表，所以我得到左连接，因为在更复杂的查询中它变得不可读，特别是如果你混合右连接和左连接，就像查询设计者喜欢做的那样。

# android - 让手机在接收器中休眠

> ID：10768407
> 
> 赞同：1
> 
> 时间：2012-05-26T17:35:33.303
> 
> 标签：android, standby, powermanager

如果有短信进来（广播接收器），我的应用程序需要播放铃声。如果我的手机开机，它就可以正常工作。但是在睡眠中，短信进来了，什么也没发生。如果我从待机状态接听电话……我的铃声正在播放……

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
 PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "My Tag");
 wl.acquire();
   .. play the ringtone and do other actions..
 wl.release(); 
```

在我还放的清单中：

```
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

有人知道我错过了什么吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:05:17.583

电话正在使用广播接收器在 Textmssage 处做出反应。在广播接收器中，我只是开始一项活动

在那个活动（新课程）中，我放置了 OnCreate：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.niceapp);

    //if phone is in on sleep ...wake him up
    AlarmAlertWakeLock.acquireCpuWakeLock(this); 
```

在 OnStop 我放：

```
 AlarmAlertWakeLock.releaseCpuLock(); 
```

这对我有用。

# java - 如何在 JTextArea 中显示整数数组？

> ID：10768412
> 
> 赞同：1
> 
> 时间：2012-05-26T17:36:26.597
> 
> 标签：java, swing, compiler-errors, jtextarea

```
for (int j =0; j < marks.size(); j++) {
    analyzeTextArea.setText(j + marks.get(j));
} 
```

上面的代码给了我以下错误：

```
required: java.lang.String found: int 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T18:01:38.233

我想`marks.get(j)`给你一个整数。因此，当您这样做时，`j + marks.get(j)`您将 的值添加`marks.get(j)`到 的值中`j`。

因此，您以 Integer 作为`j + marks.get(j)`. 但`setText`期待一个字符串。

您现在有多种可能性，具体取决于您的需要。

```
analyzeTextArea.setText(Integer.toString(j + marks.get(j))); 
```

这种情况仍然进行添加然后将其转换为 String 以尊重`setText`参数类型。

有了这个 ：

```
analyzeTextArea.setText("" + (j + marks.get(j))); 
```

`""`告诉参数将是一个字符串，然后你将连接`j`和`marks.get(j)`。因此，例如，对于第一个循环，您将有一些以`0`

现在`setText`在循环中使用实际上没有意义，因为只会使用循环中设置的最后一个值，您可能应该使用[JTextArea#append(String)](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JTextArea.html#append%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T17:38:47.280

你需要做这样的事情：

```
analyzeTextArea.setText("" + (j + marks.get(j))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T17:39:42.133

```
analyzeTextArea.setText(Integer.toString(j + marks.get(j))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T17:40:49.167

试试这个，

```
for (int j =0; j < marks.size(); j++) {
    analyzeTextArea.setText(j + marks.get(j)+"");
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-28T08:30:19.543

这应该有效，但您应该使用 .append() 而不是 .setText()。因为 .setText() 删除之前的内容并写入。但是 .append() 只是添加信息

# android - 如何在 Android 中创建带有单选按钮的子菜单？

> ID：10768419
> 
> 赞同：17
> 
> 时间：2012-05-26T17:37:31.507
> 
> 标签：android, contextmenu

我在一个简单的情况下遇到了问题（至少看起来是这样）。我需要为上下文菜单动态创建一个子菜单，并为每个项目提供一个单选框。我做了很多试验。当我调用`menu.setGroupCheckable(0, true, true)`0 时，默认情况下是菜单本身，它会按预期在每个菜单项的右侧显示单选按钮，但我需要这个子菜单。所以我有以下代码：

```
SubMenu sub = menu.addSubMenu(R.string.name);
int count = 1000;
for(String e : someList)
{
  MenuItem item = sub.add(1, count, count, e);
  count++;
}
menu.setGroupCheckable(1, true, true); 
```

在这种情况下，我在子菜单中既看不到单选框，也看不到复选框。然后我写了以下代码：

```
SubMenu sub = menu.addSubMenu(R.string.name);
int count = 1000;
for(String e : someList)
{
  MenuItem item = sub.add(1, count, count, e);
  item.setCheckable(true);
  count++;
}
menu.setGroupCheckable(1, true, true); 
```

这使得子菜单在每个项目中都有一个复选框，并且复选框专门工作，但我想要单选框，因为它们看起来更直观地进行独家选择。

那么，如何实现呢？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-05-27T01:52:24.590

将 xml 中的 checkableBehavior 设置为单个。这是一些代码：

```
<menu>
      <group android:id="@+id/group"
             android:checkableBehavior="single">
             <item android:id="@+id/menu_sort_by_name"
                   android:title="@string/action_sort_by_name"/>
             <item android:id="@+id/menu_sort_by_last_edit"
                   android:title="@string/action_sort_by_last_edit"/>
      </group>
</menu> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-18T13:05:33.620

我发现菜单组和子菜单是分开处理的，即子菜单中形成的组，应该通过子菜单而不是通过顶级菜单来处理。所以解决方案是调用：

```
sub.setGroupCheckable(1, true, true); 
```

此代码按预期工作，即子菜单中的项目显示单选按钮而不是复选框。

# jquery - 试图结合jquery克隆，appendTo

> ID：10768420
> 
> 赞同：0
> 
> 时间：2012-05-26T17:37:32.350
> 
> 标签：jquery

```
$('.reply').click(function () {

                var replybox = $(".replybox").clone().show();
                $(replybox).appendTo(this,parent('.post'));

        }); 
```

我正在尝试做的事情：

1.  克隆 .replybox (display:none;) 然后使其可见
2.  放入 $(this).parent('.post')
3.  理想情况下，让 .replybox 在 .reply 点击时显示/隐藏（有点像 youtube 评论回复框）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T17:39:19.493

```
$('.reply').click(function () {
    $(this).parent('.post').append($(".replybox").clone().show());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T17:40:36.327

```
$('.reply').click(function () {
    var replybox = $(".replybox:hidden"); // take a reference of replybox
    $(this).parent('.post').append(replybox.clone().show());
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T18:06:36.453

```
$(".reply").click(function () {
 $(this).parent(".replybox").clone().hide().appendTo($(this).parents(".post")).fadeIn("slow") 
});​ 
```

但我仍然不确定你想要什么或你的 HTML 结构是什么，所以这可能不是你想要的。

# java - 仅当在 jsp 中启用时才重定向到 SSL

> ID：10768421
> 
> 赞同：0
> 
> 时间：2012-05-26T17:37:50.100
> 
> 标签：java, jsp, ssl

我一直在尝试找到一种方法来轻松判断 Java 服务器是否已从 JSP 启用 SSL 以重定向单个页面。我的理由是，如果启用 SSL，我只想转发到 SSL，以便在我们的本地开发系统中轻松进行测试，而无需设置证书，然后部署到我们的发布系统并让证书“正常工作”。

我已经研究过尝试创建一个 SslSocketFactory 并查看它是否可以正常工作而不会引发异常，但这似乎并没有像我想的那样工作。然而，我并不特别喜欢这种方法，因为我必须花时间创建工厂才能把它扔掉。我真的只是在寻找`public boolean isSslEnabled()`可以使用的方法调用。

目前我们所拥有的是默认状态是不使用 HTTPS，但是在发布系统上您可以通过 HTTPS 访问该站点。这并不理想，因为用户仍然可以通过 HTTP 访问该站点，然后所有内容都会以明文形式发送。我也不希望加密整个服务器，如果启用了 SSL，则只加密一个页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:05:08.960

您的 Java 代码不应该关心 SSL 是否启用。尽量让他只进行配置。

如果您在 web.xml 中设置了 SSL 要求，那么您的开发人员可以覆盖他们的本地 web.xml 以满足他们的本地服务器要求（例如 eclipse）。

如果您担心每个生产服务器的 SSL，最好创建您自己的证书颁发机构并生成您自己的 SSL 证书。这样您就可以将**完全相同的**EAR 或 WAR 部署到预生产环境和生产环境。您不想在每个环境中摆弄您的部署。

[Jboss SSL 配置](https://stackoverflow.com/questions/2382380/changes-to-jboss-web-xml-have-no-effect)

[Tomcat SSL 配置](http://marc.info/?l=tomcat-user&m=104951559722619&w=2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:51:18.993

我最终做的是将所有 SSL 重定向/强制转移到 Apache 中，而不是在 Tomcat 中担心它。我在 Apache 后面运行 Tomcat，这似乎是获得强制 SSL 的最佳解决方案。我在 Apache 中使用了 mod_rewrite 来执行规则，它看起来就像一个魅力。

# jquery - jQuery event.preventDefault(); 不抓

> ID：10768423
> 
> 赞同：0
> 
> 时间：2012-05-26T17:38:04.827
> 
> 标签：jquery, forms

任何人都可以看到为什么这个表单以正常方式提交并且没有被 jQuery submit() 捕获，我在控制台中没有收到任何错误。

```
<script charset="utf-8">
$("#theform").submit(function(event) {  

    $.post('./index.php',{INPUT: $("#INPUT").val(),
                          TO_TYPE: $("#TO_TYPE").val(),
                          TO_V_BITRATE: $("#TO_V_BITRATE").val(),
                          TO_A_BITRATE: $("#TO_A_BITRATE").val()},
    function(data) {
        $('#divResult').replaceWith('<div id="divResult">'+ data.result +'<div>');
    });

    event.preventDefault();
    return false;
});
</script>

<h1>FFmpeg</h1>

<form id="theform" action="" method="POST">

  <p>Input file:
     <select size="1" id="INPUT" name="INPUT">
        <option value="demo.mp4">demo.mp4</option>
     </select>
  </p>

  <p>Convert To:
     <select size="1" id="TO_TYPE" name="TO_TYPE">
      <option value="AVI">AVI</option>
      <option selected value="MP4">MP4 (x264)</option>
      <option value="FLV">Flash</option>
     </select>

    Video Bitrate: 
    <select size="1" id="TO_V_BITRATE" name="TO_V_BITRATE">
     <option value="96">96</option>
     <option value="192">192</option>
     <option value="288">288</option>
     <option value="384">384</option>
     ...
    </select>

   Audio Bitrate: 
    <select size="1" id="TO_A_BITRATE" name="TO_A_BITRATE">
     <option value="96">96</option>
     <option value="192">192</option>
     <option value="288">288</option>
     <option value="384">384</option>
     ...
    </select>
  </p>
   <p><input type="submit" id="Submit" value="Convert"></p>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:46:55.380

尝试在表单之后或何时添加**脚本**`$(document).ready(function(){do_something;});`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T17:38:56.203

你忘了设置`event`参数

```
$("#theform").submit(function(event) {
                                ^ ------ you missed it
....
}); 
```

你需要`$`包装器：

```
<script charset="utf-8" type="text/javascript">
  $(function() {

    $("#theform").submit(function(event) {  

      $.post('./index.php',{INPUT: $("#INPUT").val(),
                          TO_TYPE: $("#TO_TYPE").val(),
                          TO_V_BITRATE: $("#TO_V_BITRATE").val(),
                          TO_A_BITRATE: $("#TO_A_BITRATE").val()},
      function(data) {
        $('#divResult').replaceWith('<div id="divResult">'+ data.result +'<div>');
      });

      event.preventDefault();
     return false;
    });
  });
</script> 
```

# nhibernate - NHibernate 使用错误的列名进行关联

> ID：10768424
> 
> 赞同：1
> 
> 时间：2012-05-26T17:38:07.673
> 
> 标签：nhibernate, fluent-nhibernate

```
//Map for Url class
this.Table("Urls");
this.Id(x => x.ID).GeneratedBy.GuidComb().Access.BackingField();
this.Map(x => x.Address).Access.BackingField();
this.HasMany(x => x.Parameters)
    .Inverse()
    .AsList(col => col.Column("ParameterIndex"))
    .Cascade.AllDeleteOrphan()
    .Access.BackingField();

//Map for UrlParameter class
this.Table("UrlParameters");
this.Id(x => x.ID).GeneratedBy.GuidComb().Access.BackingField();
this.References(x => x.Url).Column("Url").Access.BackingField();
this.Map(x => x.Name).Access.BackingField();

//Code to execute the query
Session.Query<Url>().FetchMany(x => x.Parameters);

//The SQL generated
select url0_.ID as ID1_0_, parameters1_.ID as ID2_1_, url0_.Address as Address1_0_, url0_.Prohibited as Prohibited1_0_, url0_.CreatedOn as CreatedOn1_0_, url0_.LastUpdatedOn as LastUpda5_1_0_, url0_.TotalComments as TotalCom6_1_0_, url0_.TotalNegative as TotalNeg7_1_0_, url0_.TotalNeutral as TotalNeu8_1_0_, url0_.TotalPositive as TotalPos9_1_0_, url0_.CreatedBy as CreatedBy1_0_, parameters1_.Name as Name2_1_, parameters1_.Url as Url2_1_, parameters1_.Url_id as Url4_0__, parameters1_.ID as ID0__, parameters1_.ParameterIndex as Paramete5_0__ from Urls url0_ left outer join UrlParameters parameters1_ on url0_.ID=parameters1_.Url_id where url0_.Address=@p0

//Exception message
Message=Invalid column name 'Url_id'. 
```

当我明确告诉 NHibernate 在我的 UrlParameter 映射中使用“Url”时，为什么 NHibernate 会生成列名“Url_id”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T22:57:00.173

您需要在映射中定义`KeyColumn()`列。`HasMany`

它应该与您在`References()`侧面 ( `"Url"`) 上写的内容相匹配。

# android - 我应该为 Android 构建“另一个白板”应用程序吗？

> ID：10768430
> 
> 赞同：-1
> 
> 时间：2012-05-26T17:38:39.680
> 
> 标签：android, android-intent, image

我正在开发一个笔记应用程序。我希望允许用户绘制图片以及编辑现有图片。
显然“绘制/编辑图片”应该在另一个独立的应用程序中完成。然后通过以下方式启动该应用程序会很好`intent`：

```
intent.setAction(android.content.Intent.ACTION_EDIT);
intent.setDataAndType(uri, "image/*");
context.startActivity(intent); 
```

该应用程序应编辑图像并将其“原位”保存。

据我所知，有很多不错的图像绘制/编辑应用程序，例如 Skitch、SketchBook。但不幸的是，他们都没有接受`ACTION_EDIT`，并将编辑后的图像“保存在适当的位置”。
仅有的两个支持`ACTION_EDIT`“ `image/*`”的应用程序是[JXWhiteboard](https://github.com/OpenJunction/JXWhiteboard)和 picSay。（我从[这个博客](http://mobisocial.stanford.edu/news/2012/03/writing-interactive-photo-editors-for-android/)的评论中得到信息）
虽然 picSay 可以编辑图像，但它不是用于“绘图”的东西。它也不会“原地”保存图像。
JXWhiteboard 确实支持我想要的，但它的编辑功能真的很差。

总之，我花了很多时间，但没有找到一个像样的接受ACTION_EDIT的图像绘制/编辑应用程序！
我不想构建自己的图像绘制应用程序，因为 Skitch 和 sketchBook 都很棒。

我应该从头开始构建它吗？还是我错过了任何可以接受的优秀应用程序`ACTION_EDIT`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:32:40.853

> 显然“绘制/编辑图片”应该在另一个独立的应用程序中完成。

这远非显而易见。

> 然后通过意图启动该应用程序会很好：

请使用真正的 MIME 类型。

> 该应用程序应编辑图像并将其“原位”保存。

充其量，这仅适用于位于可互写位置（例如，外部存储）的图像。

> 我花了很多时间，但没有找到一个像样的接受 ACTION_EDIT 的图像绘制/编辑应用程序！

Photoshop Express 支持`ACTION_EDIT`图像。

# java - Android，我可以将 AsyncTask 放在单独的类中并进行回调吗？

> ID：10768449
> 
> 赞同：17
> 
> 时间：2012-05-26T17:41:17.963
> 
> 标签：java, android, android-asynctask

我只是在学习 AsyncTask 并想将它用作一个单独的类，而不是一个子类。

例如，

```
class inetloader extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... urls) {

        String response = "";

            DefaultHttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(urls[0]);
            try {
                HttpResponse execute = client.execute(httpGet);
                InputStream content = execute.getEntity().getContent();

                BufferedReader buffer = new BufferedReader(
                        new InputStreamReader(content));
                String s = "";
                while ((s = buffer.readLine()) != null) {
                    response += s;
                }

            } catch (Exception e) {
                e.printStackTrace();
            }

        return response;
    }

    @Override
    protected void onPostExecute(String result) {
        Log.e("xx",result);
        // how do I pass this result back to the thread, that created me?
    }

} 
```

和主（ui）线程：

```
inetloader il = new inetloader();
il.execute("http://www.google.com");
//il.onResult()
//{
    ///do something...
//} 
```

谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-26T17:54:48.267

使用接口。就像是：

```
interface CallBackListener{
  public void callback();
} 
```

然后在您的 UI 线程中执行此操作：

```
inetloader il = new inetloader();
li.setListener(this);
il.execute("http://www.google.com"); 
```

在 inetloader 中，添加：

```
 CallBackListener mListener;

   public void setListener(CallBackListener listener){
     mListener = listener;
   } 
```

然后在 postExecute() 中，执行：

```
 mListener.callback(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T17:53:19.017

您可以将活动实例传递给构造函数并从那里调用活动函数......
就像使用接口：

```
public interface ResultUpdatable {

   public void setResult(Object obj);
   } 
```

在 Activity 中实现 this 并传入 Async 任务的构造函数并`onPostExecute`使用`setResult`函数更新结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T17:43:26.917

```
inetloader il = new inetloader();
il.execute("http://www.google.com");

String result = il.get();//put it in try-catch
                ^^^^^^^^ 
```

`here you get result which is in onPostExecute(String result)`

# css - CSS 中的内联 SVG

> ID：10768451
> 
> 赞同：377
> 
> 时间：2012-05-26T17:41:27.557
> 
> 标签：css, svg

是否可以在 CSS 中使用内联 SVG 定义？

我的意思是：

```
.my-class {
  background-image: <svg>...</svg>;
} 
```

* * *

## 回答 #1

> 赞同：515
> 
> 时间：2012-05-26T18:09:19.330

是的，有可能。试试这个：

```
body { background-image: 
        url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'><linearGradient id='gradient'><stop offset='10%' stop-color='%23F00'/><stop offset='90%' stop-color='%23fcc'/> </linearGradient><rect fill='url(%23gradient)' x='0' y='0' width='100%' height='100%'/></svg>");
      } 
```

*   [http://jsfiddle.net/6WAtQ/](http://jsfiddle.net/6WAtQ/)

（请注意，SVG 内容需要进行 url 转义才能正常工作，例如`#`替换为`%23`.）

[这适用于 IE 9（支持 SVG）](http://caniuse.com/#feat=datauri)。数据 URL 也适用于旧版本的 IE（有限制），但它们本身并不支持 SVG。

* * *

## 回答 #2

> 赞同：306
> 
> 时间：2014-02-07T11:34:24.257

有点晚了，但是如果你们中的任何一个人一直在疯狂地尝试使用**内联 SVG 作为背景**，那么上面的转义建议并不完全奏效。一方面，它在 IE 中不起作用，并且根据 SVG 的内容，该技术会在其他浏览器（如 FF）中引起问题。

如果您对 svg 进行 base64 编码（不是整个 url，只是 svg 标签及其内容！）它适用于所有浏览器。这是 base64 中相同的 jsfiddle 示例：http: [//jsfiddle.net/vPA9z/3/](http://jsfiddle.net/vPA9z/3/)

CSS 现在看起来像这样：

```
body { background-image: 
    url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+PGxpbmVhckdyYWRpZW50IGlkPSdncmFkaWVudCc+PHN0b3Agb2Zmc2V0PScxMCUnIHN0b3AtY29sb3I9JyNGMDAnLz48c3RvcCBvZmZzZXQ9JzkwJScgc3RvcC1jb2xvcj0nI2ZjYycvPiA8L2xpbmVhckdyYWRpZW50PjxyZWN0IGZpbGw9J3VybCgjZ3JhZGllbnQpJyB4PScwJyB5PScwJyB3aWR0aD0nMTAwJScgaGVpZ2h0PScxMDAlJy8+PC9zdmc+"); 
```

请记住在转换为 base64 之前删除任何 URL 转义。换句话说，上面的例子显示color='#fcc'转换为color='%23fcc'，你应该回到#。

base64 效果更好的原因是它消除了单引号和双引号以及 url 转义的所有问题

如果你使用的是 JS，你可以用它`window.btoa()`来生成你的 base64 svg；如果它不起作用（它可能会抱怨字符串中的无效字符），您可以简单地使用[https://www.base64encode.org/](https://www.base64encode.org/)。

设置 div 背景的示例：

```
var mySVG = "<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'><linearGradient id='gradient'><stop offset='10%' stop-color='#F00'/><stop offset='90%' stop-color='#fcc'/> </linearGradient><rect fill='url(#gradient)' x='0' y='0' width='100%' height='100%'/></svg>";
var mySVG64 = window.btoa(mySVG);
document.getElementById('myDiv').style.backgroundImage = "url('data:image/svg+xml;base64," + mySVG64 + "')";
```

```
html, body, #myDiv {
  width: 100%;
  height: 100%;
  margin: 0;
}
```

```
<div id="myDiv"></div>
```

使用 JS，您可以动态生成 SVG，甚至可以更改其参数。

关于使用 SVG 的一篇更好的文章在这里：[http ://dbushell.com/2013/02/04/a-primer-to-front-end-svg-hacking/](http://dbushell.com/2013/02/04/a-primer-to-front-end-svg-hacking/)

希望这可以帮助

麦克风

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2016-06-07T15:41:06.017

对于仍在苦苦挣扎的人，我设法让它在所有现代浏览器 IE11 及更高版本上运行。

base64 对我来说是没有选择的，因为我想使用 SASS 根据任何给定的颜色生成 SVG 图标。例如：`@include svg_icon(heart, #FF0000);`这样我可以创建任何颜色的特定图标，并且只需在 CSS 中嵌入一次 SVG 形状。（使用 base64，您必须将 SVG 嵌入到您想要使用的每种颜色中）

您需要注意三件事：

1.  **URL 编码您的 SVG** 正如其他人所建议的，您需要对整个 SVG 字符串进行 URL 编码，以便它在 IE11 中工作。在我的例子中，我省略了和等字段中的颜色值，`fill="#00FF00"`并将`stroke="#FF0000"`它们替换为 SASS 变量`fill="#{$color-rgb}"`，以便可以用我想要的颜色替换它们。您可以使用[任何在线转换器](http://meyerweb.com/eric/tools/dencoder/)对字符串的其余部分进行 URL 编码。你最终会得到一个像这样的 SVG 字符串：

    *%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20viewBox%3D%270%200%20494.572%20494.572%27%20width%3D%27512%27%20height%3D ％27512％27％3e％0a％20％20％3cpath％20d％3d％23m257.063％200c127.06％200％2021.808％20105.33％2021.808％20235.260％％2041.012％2013.535％2079.541％2028.973％20113.104L3.825 %20464.586c345%2012.797%2041.813%2012.797%2015.467%200%2029.872-4.721%2041.813-12.797v158.184z%27%20fill%3D%27# **{$color-rgb}** %27%vsg%3E2% 3E*

* * *

2.  **省略数据 URL 中的 UTF8**字符集 创建数据 URL 时，您需要省略字符集以使其在 IE11 中工作。

    **不是**背景图像：url（数据：图像/svg+xml；utf-8，%3Csvg%2....）
    **但是**背景图像：url（数据：图像/svg+xml，%3Csvg%2... .)

* * *

3.  **使用 RGB() 代替十六进制颜色** Firefox 不喜欢 SVG 代码中的 #。因此，您需要将颜色十六进制值替换为 RGB 值。

    **不**填充="#FF0000"
    **但**填充="rgb(255,0,0)"

就我而言，我使用 SASS 将给定的十六进制转换为有效的 rgb 值。正如评论中指出的那样，最好也对您的 RGB 字符串进行 URL 编码（因此逗号变为 %2C）

```
@mixin svg_icon($id, $color) {
   $color-rgb: "rgb(" + red($color) + "%2C" + green($color) + "%2C" + blue($color) + ")";
   @if $id == heart {
      background-image: url('data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20viewBox%3D%270%200%20494.572%20494.572%27%20width%3D%27512%27%20height%3D%27512%27%3E%0A%20%20%3Cpath%20d%3D%27M257.063%200C127.136%200%2021.808%20105.33%2021.808%20235.266c0%204%27%20fill%3D%27#{$color-rgb}%27%2F%3E%3C%2Fsvg%3E');
   }
} 
```

* * *

我意识到这可能不是非常复杂的 SVG 的最佳解决方案（在这种情况下，内联 SVG 从来都不是），但对于只有几种颜色的平面图标，这真的很好用。

我能够省略整个精灵位图并在我的 CSS 中用内联 SVG 替换它，压缩后结果只有 25kb 左右。因此，这是限制您的站点必须执行的请求数量的好方法，而不会使您的 CSS 文件膨胀。

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2015-03-04T22:11:30.173

在 Mac/Linux 上，您可以使用这个简单的 bash 命令轻松地将 SVG 文件转换为 CSS 背景属性的 base64 编码值：

```
echo "background: transparent url('data:image/svg+xml;base64,"$(openssl base64 < path/to/file.svg)"') no-repeat center center;" 
```

在 Mac OS X 上测试。这样您还可以避免 URL 转义混乱。

请记住，对 SVG 文件进行 base64 编码会增加其大小，请参阅[css-tricks.com 博客文章](https://css-tricks.com/probably-dont-base64-svg/)。

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2020-08-05T10:50:56.253

我的解决方案是[https://yoksel.github.io/url-encoder/](https://yoksel.github.io/url-encoder/) 您只需插入您的 svg 并取回背景图像代码

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2016-02-04T14:57:00.927

我已经分叉了一个 CodePen 演示，它在将内联 SVG 嵌入 CSS 时遇到了同样的问题。与 SCSS 一起使用的解决方案是构建一个简单的 url 编码函数。

可以从内置的 str-slice、str-index 函数创建字符串替换函数（参见[css-tricks](https://css-tricks.com/snippets/sass/str-replace-function/)，感谢 Hugo Giraudel）。

然后，只需将`%`, `<`, `>`, `"`, `'`,`替换为`%xx`代码：`

 ````
@function svg-inline($string){
  $result: str-replace($string, "<svg", "<svg xmlns='http://www.w3.org/2000/svg'");
  $result: str-replace($result, '%', '%25');
  $result: str-replace($result, '"', '%22');
  $result: str-replace($result, "'", '%27');
  $result: str-replace($result, ' ', '%20');
  $result: str-replace($result, '<', '%3C');
  $result: str-replace($result, '>', '%3E');
  @return "data:image/svg+xml;utf8," + $result;
}

$mySVG: svg-inline("<svg>...</svg>");

html {
  height: 100vh;
  background: url($mySVG) 50% no-repeat;
} 
```

Compass中还有一个[`image-inline`](http://compass-style.org/reference/compass/helpers/inline-data/)帮助函数，但由于 CodePen 不支持它，所以这个解决方案可能很有用。

CodePen 演示：[http ://codepen.io/terabaud/details/PZdaJo/](http://codepen.io/terabaud/details/PZdaJo/)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-08-11T08:58:29.037

我找到了一种 SVG 解决方案。但这仅适用于 Webkit，我只想与您分享我的解决方法。在我的示例中，展示了如何通过过滤器将 DOM 中的 SVG 元素用作背景（背景图像：url（'#glyph'）不起作用）。

此 SVG 图标渲染所需的功能：

1.  使用 CSS 将 SVG 滤镜效果应用于 HTML 元素（IE 和 Edge 不支持）
2.  feImage 片段加载支持（firefox 不支持）

```
.test {
  /*  background-image: url('#glyph');
    background-size:100% 100%;*/
    filter: url(#image); 
    height:100px;
    width:100px;
}
.test:before {
   display:block;
   content:'';
   color:transparent;
}
.test2{
  width:100px;
  height:100px;
}
.test2:before {
   display:block;
   content:'';
   color:transparent;
   filter: url(#image); 
   height:100px;
   width:100px;
}
```

```
<svg style="height:0;width:0;" version="1.1" viewbox="0 0 100 100"
     xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink">
 <defs>
     <g id="glyph">
          <path id="heart" d="M100 34.976c0 8.434-3.635 16.019-9.423 21.274h0.048l-31.25 31.25c-3.125 3.125-6.25 6.25-9.375 6.25s-6.25-3.125-9.375-6.25l-31.202-31.25c-5.788-5.255-9.423-12.84-9.423-21.274 0-15.865 12.861-28.726 28.726-28.726 8.434 0 16.019 3.635 21.274 9.423 5.255-5.788 12.84-9.423 21.274-9.423 15.865 0 28.726 12.861 28.726 28.726z" fill="crimson"/>
     </g>
    <svg id="resized-glyph"  x="0%" y="0%" width="24" height="24" viewBox="0 0 100 100" class="icon shape-codepen">
      <use xlink:href="#glyph"></use>
    </svg>
     <filter id="image">
       <feImage xlink:href="#resized-glyph" x="0%" y="0%" width="100%" height="100%" result="res"/>
       <feComposite operator="over" in="res" in2="SourceGraphic"/>
    </filter>
 </defs>
</svg>
<div class="test">
</div>
<div class="test2">
</div>
```

另一种解决方案是使用 url 编码

```
var container = document.querySelector(".container");
var svg = document.querySelector("svg");
var svgText = (new XMLSerializer()).serializeToString(svg);
container.style.backgroundImage = `url(data:image/svg+xml;utf8,${encodeURIComponent(svgText)})`;
```

```
.container{
  height:50px;
  width:250px;
  display:block;
  background-position: center center;
  background-repeat: no-repeat;
  background-size: contain;
}
```

```
<svg  height="100" width="500" xmlns="http://www.w3.org/2000/svg">
    <ellipse cx="240" cy="50" rx="220" ry="30" style="fill:yellow" />
</svg>
<div class="container"></div>
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-06-26T20:46:49.603

来自 3rd 方源（如 Google 图表）的内联 SVG 可能`xmlns="http://www.w3.org/2000/svg"`在 SVG 元素中不包含 XML 命名空间属性 ( )（或者可能在呈现 SVG 后将其删除 - 浏览器检查器和浏览器控制台中的 jQuery 命令都不会显示 SVG 元素中的命名空间）。

当您需要将这些 svg 片段重新用于您的其他需求（CSS 中的背景图像或 HTML 中的 img 元素）时，请注意缺少的命名空间。没有命名空间的浏览器可能会拒绝显示 SVG（不管编码是 utf8 还是 base64）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-03-06T22:11:00.777

根据已经提到的[https://github.com/yoksel/url-encoder/](https://github.com/yoksel/url-encoder/)采用的方法以编程方式完成：

```
// Svg (string)

const hexagon = `
<svg
width="100"
height="20"
viewBox="0 0 100 20"
xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient
      id="redyel"
      gradientUnits="objectBoundingBox"
      x1="0"
      y1="0"
      x2="1"
      y2="1"
    >
      <stop offset="0%" stop-color="#ff0000" />
      <stop offset="100%" stop-color="#ffff00" />
    </linearGradient>
  </defs>
  <polygon
    points="0,10 5,0 95,0 100,10 95,20 5,20"
    fill="#eee"
    stroke="url(#redyel)"
  />
</svg>
`

// svgToBackgroundImage

const symbols = /[%#()<>?[\\\]^`{|}]/g;

const newLine = /\r?\n/;

const notEmptyString = (str) => str.length;
const trim = (str) => str.trim();

const toOneLine = (str) =>
  str.split(newLine).filter(notEmptyString).map(trim).join(" ");

function addNameSpace(svgString) {
  if (svgString.indexOf(`http://www.w3.org/2000/svg`) < 0) {
    svgString = svgString.replace(
      /<svg/g,
      `<svg xmlns="http://www.w3.org/2000/svg"`
    );
  }

  return svgString;
}

function encodeSVG(svgString) {
  svgString = svgString.replace(/>\s{1,}</g, `><`);
  svgString = svgString.replace(/\s{2,}/g, ` `);

  // Using encodeURIComponent() as replacement function
  // allows to keep result code readable
  return svgString.replace(symbols, encodeURIComponent);
}

const svgToBackgroundImage = (svgString) =>
  `url('data:image/svg+xml,${encodeSVG(addNameSpace(toOneLine(svgString)))}')`;

// DOM

const element = document.querySelector("#hexagon");
element.style.backgroundImage = svgToBackgroundImage(hexagon);
```

```
#hexagon {
  width: 100px;
  height: 20px;
}
```

```
<div id="hexagon"/>
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-06-23T01:02:22.290

如果您使用的是 postcss，您可以尝试`postcss-inline-svg`插件[https://www.npmjs.com/package/postcss-inline-svg](https://www.npmjs.com/package/postcss-inline-svg)

```
.up {
    background: svg-load('img/arrow-up.svg', fill: #000, stroke: #fff);
}
.down {
    background: svg-load('img/arrow-down.svg', fill=#000, stroke=#fff);
} 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2020-07-21T19:53:10.027

你也可以这样做：

```
<svg viewBox="0 0 32 32">
      <path d="M11.333 13.173c0-2.51 2.185-4.506 4.794-4.506 2.67 0 4.539 2.053 4.539 4.506 0 2.111-0.928 3.879-3.836 4.392v0.628c0 0.628-0.496 1.141-1.163 1.141s-1.163-0.513-1.163-1.141v-1.654c0-0.628 0.751-1.141 1.419-1.141 1.335 0 2.571-1.027 2.571-2.224 0-1.255-1.092-2.224-2.367-2.224-1.335 0-2.367 1.027-2.367 2.224 0 0.628-0.546 1.141-1.214 1.141s-1.214-0.513-1.214-1.141zM15.333 23.333c-0.347 0-0.679-0.143-0.936-0.404s-0.398-0.597-0.398-0.949 0.141-0.689 0.398-0.949c0.481-0.488 1.39-0.488 1.871 0 0.257 0.26 0.398 0.597 0.398 0.949s-0.141 0.689-0.398 0.949c-0.256 0.26-0.588 0.404-0.935 0.404zM16 26.951c-6.040 0-10.951-4.911-10.951-10.951s4.911-10.951 10.951-10.951c6.040 0 10.951 4.911 10.951 10.951s-4.911 10.951-10.951 10.951zM16 3.333c-6.984 0-12.667 5.683-12.667 12.667s5.683 12.667 12.667 12.667c6.984 0 12.667-5.683 12.667-12.667s-5.683-12.667-12.667-12.667z"></path>
</svg>
````

# java - 用于读取 HTTPS 请求的 Java 应用程序

> ID：10768455
> 
> 赞同：-1
> 
> 时间：2012-05-26T17:41:45.813
> 
> 标签：java, android, ios, https

我正在尝试构建 iOS 应用程序的后端。我想知道是否有任何关于如何创建 java 后端来处理 HTTPS 请求的示例？我想记住可伸缩性......所以显然需要能够添加更多服务器来处理未来的请求。有什么东西可以看吗？也许是代码示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T17:51:35.510

您可能想查看[Netty](http://www.jboss.org/netty)，特别是[Secure Chat 示例](http://docs.jboss.org/netty/3.2/xref/org/jboss/netty/example/securechat/package-summary.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T17:53:46.613

大多数用 Java 编写的 Web 容器都支持 https，但如何配置它是个人的。

如果您只是想开始，Tomcat 和 Jetty 是两个众所周知的具有良好文档的 Web 容器（我个人的偏好是 Jetty，但这不是基于任何技术 - 两者都很好）。

对于 Tomcat，请参阅：http: [//tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html)

对于 Jetty，请参阅：[http ://docs.codehaus.org/display/JETTY/How+to+configure+SSL](http://docs.codehaus.org/display/JETTY/How+to+configure+SSL)

请注意，您将需要一个证书，以便设备信任您。现在，您可以创建自己的自签名证书并教您的开发设备信任它。

# java - Spring webflow PropertyNotFoundException：找不到属性

> ID：10768456
> 
> 赞同：3
> 
> 时间：2012-05-26T17:41:48.103
> 
> 标签：java, spring-webflow

我正在尝试从 spring webflow xml 定义中设置会话范围内的变量并点击属性未找到..请帮助

> 118484 [http-8080-6] DEBUG servlet.YBRServlet - 处理程序执行导致异常 - 转发到已解决的错误视图：ModelAndView：引用名为“Err010DfltCrtc”的视图；模型是 {exception=org.springframework.webflow.execution.ActionExecutionException: 异常抛出执行 [AnnotatedAction@87ba9e targetAction = [SetAction@1ed364c name = flowRequestContext.externalContext.sessionMap.testCompleted, value = yes], attributes = map[[empty] ]] 在流 'QlfyEnrl' 的状态 'AnnIncr' 中 -- 动作执行属性是 'map[[empty]]'} org.springframework.webflow.execution.ActionExecutionException: 执行 [AnnotatedAction@87ba9e targetAction = [SetAction@1ed364c name = flowRequestContext.externalContext.sessionMap.testCompleted, value = yes],
> 
> org.springframework.expression.spel.SpelEvaluationException: EL1008E* :(pos 0):在 org.springframework 的 * 类型“org.springframework.webflow.engine.impl.RequestControlContextImpl”的*对象上找不到字段或属性“yes”* 。 expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:180) 在 org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:60) 在 org.springframework.expression.spel.ast.SpelNodeImpl。 getTypedValue(SpelNodeImpl.java:102) at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:97) at org.springframework.binding.expression.spel.SpringELExpression.getValue(SpringELExpression.java:84) ... 88 更多

流程代码

```
<view-state id="AnnIncr" view="AnnIncr" model="ssModel">
<on-entry>

            <set name="flowRequestContext.externalContext.sessionMap.testCompleted" value="yes"></set>
        </on-entry>
.....
    <on-exit>
    <set name="flowRequestContext.externalContext.sessionMap.testCompleted" value="no"></set>
    </on-exit>
</view-state> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-27T03:24:24.570

我发现了问题，在双引号内我必须用单引号包裹值以将其表示为一个值，否则它需要一个表达式。

```
 <set name="flowRequestContext.externalContext.sessionMap.testCompleted" value="yes"></set> 
```

它应该是

```
<set name="flowRequestContext.externalContext.sessionMap.testCompleted" value="'yes'"></set> 
```

# c++ - glGetTexLevelParameter 的问题

> ID：10768458
> 
> 赞同：0
> 
> 时间：2012-05-26T17:42:24.753
> 
> 标签：c++, opengl

我在尝试使用 glGetTexLevelParameter 函数获取纹理的宽度和高度时遇到问题。无论我尝试什么，该函数都不会设置宽度或高度变量的值。我检查了错误，但一直没有错误。这是我的代码（如果有帮助，基于 NeHe 教程）：

```
int LoadGLTextures()
{
//load image file directly into opengl as new texture
GLint width = 0;
GLint height = 0;
texture[0] = SOIL_load_OGL_texture("NeHe.bmp", SOIL_LOAD_AUTO, SOIL_CREATE_NEW_ID,   SOIL_FLAG_INVERT_Y);       //image must be in same place as lib
if(texture[0] == 0)
{
    return false;
}
glEnable(GL_TEXTURE_2D);
glGenTextures(3, &texture[0]);

glBindTexture(GL_TEXTURE_2D, texture[0]);
glGetTexLevelParameteriv(GL_TEXTURE_2D, 0, GL_TEXTURE_WIDTH, &width);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);  //no filtering bc of GL_NEAREST, looks really bad
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);

const GLubyte* test = gluErrorString(glGetError());
cout << test << endl;
return true;
} 
```

如果有帮助，我也在使用 Visual Studio 2010。加载纹理[0] 的调用来自 SOIL 图像库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:21:20.073

让我们分解一下：

此调用加载图像，创建新的纹理 ID 并将图像加载到由该 ID 命名的纹理对象中。如果成功，则返回 ID 并将其存储在`texture[0]`.

```
texture[0] = SOIL_load_OGL_texture(
     "NeHe.bmp",
     SOIL_LOAD_AUTO,
     SOIL_CREATE_NEW_ID,
     SOIL_FLAG_INVERT_Y); 
```

BTW：图像文件与库不在同一目录下，而是在调用此函数时进程的当前工作目录中。如果您没有更改工作目录，那么它就是调用您的进程的任何目录。

检查纹理是否加载成功

```
if(texture[0] == 0)
{
    return false;
} 
```

在此处启用纹理几乎没有意义。`glEnable`调用属于渲染代码。

```
glEnable(GL_TEXTURE_2D); 
```

好的，这里有个问题。glGenTextures 生成新的纹理 ID 并将它们放置在提供给它的数组中。之前存储在该数组中的任何内容都会被覆盖。在您的情况下，由`SOIL_load_OGL_texture`. 请注意，这只是一些句柄，不会以任何方式收集垃圾。您现在面对一个悬挂在 OpenGL 中的纹理对象并且不再访问它，因为您扔掉了句柄。

```
glGenTextures(3, &texture[0]); 
```

现在您绑定一个由新创建的 ID 命名的纹理对象。由于这是一个新 ID，因此您实际上是在创建一个没有分配图像数据的新纹理对象。

```
glBindTexture(GL_TEXTURE_2D, texture[0]); 
```

以下所有调用都在与 SOIL 创建的完全不同的纹理上运行。

如何修复代码：删除`glGenTextures`. 在您的情况下，它不仅是多余的，而且是您的问题的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T19:55:15.260

这一行：

```
texture[0] = SOIL_load_OGL_texture("NeHe.bmp", SOIL_LOAD_AUTO, SOIL_CREATE_NEW_ID,   SOIL_FLAG_INVERT_Y); 
```

创建一个纹理，将 OpenGL 纹理存储在`texture[0]`.

这一行：

```
glGenTextures(3, &texture[0]); 
```

创建三个纹理，将它们存储在`texture`数组中，*覆盖那里的任何内容。*

看到问题了吗？您从 SOIL 获得纹理，然后立即通过用新创建的纹理覆盖它来丢弃它。

这在概念上与以下内容没有什么不同：

```
int *pInt = new int(5);
pInt = new int(10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T17:47:44.257

嗯，glGenTextures(howmany,where) 不像 glGenBuffers 那样工作吗？为什么要将三个纹理分配给一个指针，它是如何工作的？

我认为应该是

```
int textures[3];
glGenTextures(3,textures); 
```

这样，三个生成的纹理缓冲区将被放置在纹理数组中。或者

```
int tex1, tex2, tex3;
glGenTextures(1,&tex1);
glGenTextures(1,&tex2);
glGenTextures(1,&tex3); 
```

所以你有三个单独的纹理缓冲区指针

# google-checkout - Google Checkout 每件商品统一费率和同一购物车中的重量

> ID：10768459
> 
> 赞同：0
> 
> 时间：2012-05-26T17:42:26.780
> 
> 标签：google-checkout

我正在设置一些 Google 添加到购物车按钮，但无法计算正确的运费。我的整个商店都有具有产品重量等级的商品来计算运费。从 Merchant Center 检索运输表。

我有一件物品需要统一运费，因此它具有产品运输优先和产品运输类别。当此商品与任何其他产品一起放入购物车时，统一运费将覆盖整个购物车，并且仅向客户收取统一运费。

我希望购物车默认情况下像 PayPay 一样计算。它计算所有按重量计算的产品，然后将统一费率添加到该总数之上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T04:21:55.747

请注意，在已发布的购物车中提交的送货说明将优先于 Merchant Center，因此 Merchant Center 中的设置将被忽略。

在您的情况下，使用 product-shipping 类将在购物车 XML 中创建一个“shipping-methods”标签，从而覆盖 Merchant Center 运输说明。尝试找到一种方法来使用其中一个。

这里有一些运输故障排除提示：

[https://developers.google.com/checkout/articles/Troubleshoot_Merchant_Issues](https://developers.google.com/checkout/articles/Troubleshoot_Merchant_Issues)

# nsdata - NSData 对 hash 方法的实现是如何工作的？

> ID：10768467
> 
> 赞同：2
> 
> 时间：2012-05-26T17:43:20.150
> 
> 标签：nsdata, foundation

在基础框架中的内置 NSData 类上调用 hash 时——使用什么实现来返回 hash 值？（CRC32，还有别的吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T17:51:29.607

别的东西。其实是一个实现细节，不需要在不同版本中使用固定的算法。

您可以在 Core Foundation 的开源版本中查看实现。请注意，NSData 是免费桥接到 CFDataRef。来自[http://opensource.apple.com/source/CF/CF-635.21/CFData.c](http://opensource.apple.com/source/CF/CF-635.21/CFData.c)：

```
static CFHashCode __CFDataHash(CFTypeRef cf) {
    CFDataRef data = (CFDataRef)cf;
    return CFHashBytes((uint8_t *)CFDataGetBytePtr(data), __CFMin(__CFDataLength(data), 80));
} 
```

我们看到前 80 个字节用于计算哈希。CFHashBytes 函数使用[**ELF 哈希算法实现**](http://eternallyconfuzzled.com/tuts/algorithms/jsw_tut_hashing.aspx#elf)：

```
#define ELF_STEP(B) T1 = (H << 4) + B; T2 = T1 & 0xF0000000; if (T2) T1 ^= (T2 >> 24); T1 &= (~T2); H = T1;

CFHashCode CFHashBytes(uint8_t *bytes, CFIndex length) {
    /* The ELF hash algorithm, used in the ELF object file format */
    UInt32 H = 0, T1, T2;
    SInt32 rem = length;
    while (3 < rem) {
    ELF_STEP(bytes[length - rem]);
    ELF_STEP(bytes[length - rem + 1]);
    ELF_STEP(bytes[length - rem + 2]);
    ELF_STEP(bytes[length - rem + 3]);
    rem -= 4;
    }
    switch (rem) {
    case 3:  ELF_STEP(bytes[length - 3]);
    case 2:  ELF_STEP(bytes[length - 2]);
    case 1:  ELF_STEP(bytes[length - 1]);
    case 0:  ;
    }
    return H;
}

#undef ELF_STEP 
```

# iphone - 在 iOS 上，如果 plist 显示“Landscape Left”，并且 shouldAutorotateToInterfaceOrientation 显示 LandscapeRight，应用程序可以以纵向模式启动吗？

> ID：10768470
> 
> 赞同：1
> 
> 时间：2012-05-26T17:43:47.947
> 
> 标签：iphone, ios, ipad, uiviewcontroller, uiinterfaceorientation

我想知道为什么，如果为 iPad 创建了一个全新的 Single View 应用程序，然后单击项目，我在“支持设备方向”中选择为`Landscape Left`，而在 ViewController 中`shouldAutorotateToInterfaceOrientation`，我`YES`只有在它是时才返回`UIInterfaceOrientationLandscapeRight`，然后应用程序才能真正启动设置为人像模式？

我更希望该应用程序启动`Landscape Left`并能够旋转到`Landscape Right`然后将无法旋转到任何其他方向。我想知道是什么导致了上述行为？

# php - 仅从字符串中回显图像的 src 属性值的函数

> ID：10768471
> 
> 赞同：0
> 
> 时间：2012-05-26T17:43:52.360
> 
> 标签：php, function, preg-match, image

我想创建一个函数，它只回显字符串中的图像链接。

我的代码失败了，但我不知道为什么。

```
function csak_a_kepek($bejovo_szoveg){
    $re = '/(?<=src=")(?:.*?)(?=")/ui';
    $eredmeny = preg_match('/(<img[^>]+>)/i', $bejovo_szoveg, $matches);
    for($i=0;$i<count($matches);$i++){
        $nMatches = preg_match($re, $matches[$i], $aMatches);
    }
    for($i=0;$i<count($aMatches);$i++){
        $return .= $aMatches[$i].'/;/';
    }
    return $return;
} 
```

/;/ 是一个分隔符，以便更容易分解它。

你能帮我吗，我必须在哪里改变它，让它工作？

工作代码：（感谢redskins80）

```
include('simplehtmldom/simple_html_dom.php');
function only_pictures($string){
    $html = str_get_html($string);
    foreach($html->find('img') as $element) {
      $return .= $element->src . '<br />';
    }
    return $return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:03:23.423

你的模式似乎是错误的。尝试这个：

```
$html = '<img class="" src="http://www.google.com" />';
$pattern = '/<img([^>]*)>/i';
preg_match($pattern, $html, $m);

if(!empty($m)) {
    $max = count($m);
    for($i=1; $i<$max; $i++) {
        $pattern = '/src="([^"]*)"/i';
        preg_match($pattern, $m[$i], $m2);
        echo $m2[1]."\n";
    }
} 
```

# hibernate - 休眠验证器异常“找不到类型的验证器：java.lang.String。”

> ID：10768472
> 
> 赞同：7
> 
> 时间：2012-05-26T17:44:01.753
> 
> 标签：hibernate, spring-mvc, hibernate-validator

我使用 Spring 和 Spring MVC 3.1、Hibernate 3、Hibernate Validator 4.3。

我想添加我的自定义约束验证器，但似乎我的验证器没有被调用并且总是得到“找不到类型的验证器”异常。我犯了什么错误吗？我总是遇到这个异常的一个大问题

```
javax.validation.UnexpectedTypeException: HV000030: No validator could be found for type: java.lang.String.
    at org.hibernate.validator.internal.engine.ConstraintTree.verifyResolveWasUnique(ConstraintTree.java:394)
    at org.hibernate.validator.internal.engine.ConstraintTree.findMatchingValidatorClass(ConstraintTree.java:375) 
```

但是，如果我删除我的自定义约束验证器，一切正常。这是我的代码，您能帮忙找到导致此异常的来源吗？

```
test.constraint.ActorConstraint

@Target({ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Constraint(validatedBy=ActorConstraintValidator.class)
public @interface ActorConstraint {

  String message() default "Actor already exists in database";
  public abstract Class<?>[] groups() default {};
  public abstract Class<? extends Payload>[] payload() default {};

}

test.constraint.ActorConstraintValidator
@Component
public class ActorConstraintValidator implements ConstraintValidator<ActorConstraint, Actor> {

  @Autowired
  private ActorModel actorModel;

  @Override
  public void initialize(ActorConstraint arg0) {
    System.out.println("ActorConstraintValidator is initialized");
  }

  @Override
  public boolean isValid(Actor actor, ConstraintValidatorContext context) {

    boolean pass = true;

    if (getActorModel().isActorExist(actor.getName()) ){
      pass = false;
    }
    return pass;
  }

  public ActorModel getActorModel() {
    return actorModel;
  }

  public void setActorModel(ActorModel actorModel) {
    this.actorModel = actorModel;
  }  
}

test.entity.Actor

@Entity  /*(findByName named query definition is omitted)*/
public class Actor implements Serializable {

  public static final String NAMED_QUERY__FIND_ACTOR_BY_NAME = "findActorByName";

  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  private Long id;

  @ActorConstraint
  @NotEmpty
  private String name;

  @DateTimeFormat(iso=ISO.DATE)
  private Date birthday;

  @Min(0)
  @Max(300)
  private Integer height;

  ...
 } 
```

额外说明，我已添加

```
<bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/> 
```

到春天的xml

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T20:01:54.713

您将 放入类型`@ActorConstraint`为 的字段，而验证器类型使用 进行参数化。也就是说，没有约束和类型的验证器。`name``String``ActorConstraintValidator``Actor``@ActorConstraint``String`

# objective-c - 如何通过 SoundCloud API 添加评论

> ID：10768474
> 
> 赞同：2
> 
> 时间：2012-05-26T17:44:24.967
> 
> 标签：objective-c, macos, api, soundcloud

我想通过 SoundCloud API 发表评论，但查看[文档](http://developers.soundcloud.com/docs/api/reference#tracks)似乎是不可能的，唯一可用的方法`/tracks/{id}/comments`似乎是`GET`. 当我尝试发送它时，`POST`我得到一个`HTTP Error: 422`，如果我使用控制台我也会得到一个 422，`"error_message": "Body can't be blank"`即使这样我也添加`body=test`了一个参数。

知道您应该如何通过 API 添加评论吗？

我可以看到，例如 ruby​​ SDK 似乎是可能的：

```
# create a new timed comment
comment = client.post("/tracks/#{track.id}/comments", :comment => {
  :body => 'This is a timed comment',
  :timestamp => 1500
}) 
```

但我使用的是 Objective-C SDK，这是我目前的代码（返回 422）：

```
NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithObject:content forKey:@"body"];
if (timestamp >= 0)
{
    [dict setObject:[NSString stringWithFormat:@"%i", timestamp] forKey:@"timestamp"];
}

NSString *resource = [NSString stringWithFormat:@"tracks/%i/comments", trackId];

[scAPI performMethod:@"POST" onResource:resource withParameters:dict context:delegate userInfo:nil]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T10:02:23.923

好的，我自己找到了，我查看了 Java 版本及其示例：

```
List<NameValuePair> params = new java.util.ArrayList<NameValuePair>();
params.add(new BasicNameValuePair("comment[body]", "This is a test comment"));

HttpResponse response = api.post("tracks/" + TRACK_ID + "/comments", params); 
```

所以这个奇怪的决定不仅`body`是关键，`comment[body]`而且没有在 API 中记录它是我遇到的问题。我尝试像 ruby​​ 版本建议的那样做，它有一个`NSDictionary`with 键`comment`和另一个 with `body`，`timestamp`但这只会抛出错误，因为 SDK 不期望嵌套字典。所以现在代码看起来像这样：

```
NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithObject:content forKey:@"comment[body]"];
if (timestamp >= 0)
{
    [dict setObject:[NSString stringWithFormat:@"%i", timestamp] forKey:@"comment[timestamp]"];
}

NSString *resource = [NSString stringWithFormat:@"tracks/%i/comments", trackId];

[scAPI performMethod:@"POST" onResource:resource withParameters:dict context:delegate userInfo:nil]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-03-24T19:31:23.393

这是一款出色的音乐应用程序，可让您轻松连接亚马逊最新的音乐、视频和电影，同时还可以自由创作其他产品。

# java - Eclipse 今天早上工作正常……现在它和 AVD 每隔几分钟就崩溃一次？

> ID：10768476
> 
> 赞同：0
> 
> 时间：2012-05-26T17:44:43.160
> 
> 标签：java, android, eclipse

今天早上我在使用 Eclipse，它运行良好，它和 AVD 都将在不到一分钟的时间内加载......几个小时后它开始崩溃。

现在，如果我足够幸运，Eclipse 能够在不崩溃的情况下加载，那么从基本的“ANDROID”文本到实际徽标至少需要半个小时。

我尝试清理我的项目，重新创建 AVD，将 AVD 的内存从 256mB 增加到 1024，禁用动画和从快照加载......

除了使用 Eclipse 之外，我对计算机所做的唯一一件事就是在 stackoverflow 上进行搜索。是什么导致了几个小时内性能发生了如此大的变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:48:15.793

也许你启动了一个后台应用程序或其他东西。重新启动您的机器。你的记忆可能在某处被拦截。检查处理器是否处于省电模式或任何状态。

另外，也许[这篇文章](https://stackoverflow.com/questions/1554099/slow-android-emulator?newsletter=1&nlcode=252%7C91bc)可能会有所帮助。

# antlr - 复合语法：访问导入的语法作用域

> ID：10768481
> 
> 赞同：1
> 
> 时间：2012-05-26T17:45:18.420
> 
> 标签：antlr, antlr3

假设我有两个语法（并且在某处定义了 Lexer），ParserA 和 ParserB。

在 ParserA 我有以下代码：

```
parser grammar ParserA;

classDeclaration
scope {
    ST mList;
}
... 
```

ParserB 类似于：

```
parser grammar ParserB;

import ParserA;

methodDeclaration : something something { $classDeclaration::mList.add(...) }; 
```

由于 classDeclaration 位于不同的类（和文件）中，因此操作中的代码将无法编译（通过 javac）。有关如何修复它的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:05:59.537

> 有关如何修复它的任何提示？

不，（AFAIK）这里没有 ANTLR 快捷方式：导入的语法之间不可能进行通信（通过使用范围或通过为导入的语法规则提供参数）。

# spring - 休眠模板为空

> ID：10768483
> 
> 赞同：0
> 
> 时间：2012-05-26T17:45:28.837
> 
> 标签：spring, hibernate

我正在 STS 上制作一个 Web 应用程序。我正在使用 Spring 3.1.0 和 HIbernate 4.0.1 的罐子。我在项目构建路径中包含 jars。在 DAO 层中，当我尝试创建 HibernateTemplate 对象时，它没有被实例化，它在那里为空。我不明白为什么它是空的。

早些时候我遇到了一个错误，比如 NoClassDefinitionFound: org.springframework.orm.hibernate3.HibernateTemplate....然后我将这些 jars 包含在 WEB-INF->lib 文件夹中，然后这个错误被删除但 hibernateTemplate 对象仍然为空。关于 beans.xml 在项目文件夹中的位置是否有任何问题。? 谁能帮我。

下面是我的 beans.xml 和 Userinfo.java 的代码。

* * *

[b]Beans.xml[/b]

只有 bean.xml 的相关部分

```
<bean id="hibTemplateBean" class="org.springframework.orm.hibernate3.HibernateTemplate" >
    <property name="sessionFactory" ref="sfBean" />
</bean> 
```

* * *

[b]UserinfoDao.java[/b]

```
package com.home.dao;

import org.springframework.orm.hibernate3.HibernateTemplate;

import com.home.pojo.User;

public class UserinfoDao {

    public UserinfoDao() {

            super();

        }

    private static HibernateTemplate hibernateTemplate;

    public void setHibernateTemplate(HibernateTemplate hibernateTemplate) {
        UserinfoDao.hibernateTemplate = hibernateTemplate;
    }

    public static void fetchUserInfo(){
        try{
            User user = (User)hibernateTemplate.get(User.class, 111);
        }catch(NullPointerException npe){
            npe.printStackTrace();
        }
    }
} 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:50:24.083

你的版本让我相信你只是用`static`方法访问你的bean：

```
UserinfoDao.fetchUserInfo(); 
```

看起来您缺少 Spring 的几个关键点。首先，您不应该使用`static`方法和字段，请尝试使用以下类：

```
public class UserinfoDao {

    private HibernateTemplate hibernateTemplate;

    public void setHibernateTemplate(HibernateTemplate hibernateTemplate) {
        this.hibernateTemplate = hibernateTemplate;
    }

    public void fetchUserInfo(){
        try{
            User user = (User)hibernateTemplate.get(User.class, 111);
        }catch(NullPointerException npe){
            npe.printStackTrace();
        }
    }

} 
```

现在您需要以某种方式获取 Spring bean 的实例。您不能简单地使用`new UserinfoDao()`运算符。您必须在 XML 中或通过注释声明您的 bean（并声明对`HibernateTemplate`.

最后，您通常不应该 catch `NullPointerException`，但如果出于调试目的，我理解这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T17:57:51.653

您正在使用 Hibernate 4，并且正在使用`org.springframework.orm.hibernate3.HibernateTemplate`Hibernate 3 包。

不再支持此模板。您可以进行[声明式事务管理](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#transaction-declarative)。

# delphi - 如果我正在处理的请求已被取消，如何通知我？

> ID：10768484
> 
> 赞同：3
> 
> 时间：2012-05-26T17:45:35.097
> 
> 标签：delphi, http, delphi-xe, indy

我正在使用基于 Indy 的 HTTP 服务器构建的 Web 服务器，我发现如果我在浏览器中单击一个请求，然后在第一个请求完成处理之前单击另一个请求，可能会导致各种问题. 但我找不到任何方法来确定我是否处于取消请求中。每个请求都发生在自己的线程中，因此将线程设置为 Terminated 将是一个很好的检查方法，但这似乎没有发生。

有什么方法可以让 Indy 通知我它当前正在处理的请求已被发送它的浏览器取消，并且它现在正试图加载不同的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T22:03:59.693

Web 浏览器可以取消正在进行的 HTTP 请求的唯一方法是关闭其与服务器的连接。发生这种情况时，TIdHTTPServer 将在下次尝试访问断开连接的套接字时引发异常。只需让异常传入 TIdHTTPServer 进行默认处理，这样它就可以终止调用线程并清理套接字。这是正常行为。

# css - css中的垂直方向文本

> ID：10768488
> 
> 赞同：6
> 
> 时间：2012-05-26T17:46:27.993
> 
> 标签：css

我不敢相信没有人问过这个问题，所以我只是假设我不知道我想要的正确名称。我想要一个像`jelly`这样垂直对齐的文本：

```
j
e
l
l
y 
```

有跨浏览器解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T17:50:44.017

这是一篇文章，详细介绍了使用 CSS 和 javascript 完成此任务的几种方法以及每种方法的优缺点。

[http://net.tutsplus.com/tutorials/html-css-techniques/the-easyest-way-to-create-vertical-text-with-css/](http://net.tutsplus.com/tutorials/html-css-techniques/the-easiest-way-to-create-vertical-text-with-css/)

希望你觉得它有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-01T10:50:48.410

正确的做法是使用`text-orientation`. （见片段或[小提琴](https://jsfiddle.net/yu7qr809/)。）

```
 p {
    text-orientation: upright;
    writing-mode: vertical-lr;
  }
```

```
<p>Jelly</p>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T17:51:44.757

你可以这样写：

```
p{
    width:5px;
    word-wrap:break-word;
} 
```

检查这个[http://jsfiddle.net/TWb9j/](http://jsfiddle.net/TWb9j/)

# bash - rsync --delete 选择文件名时可能吗？

> ID：10768490
> 
> 赞同：0
> 
> 时间：2012-05-26T17:46:53.913
> 
> 标签：bash, rsync

我希望能够拥有我在 bash 脚本中列出的 rsync 复制文件，然后删除源目录中不存在的任何文件（如果我更改脚本中的文件列表）。展开命令如下：

```
rsync -axSR --delete src_dir1/file1 src_dir2/file2 dst_dir/ 
```

但是，rsync 不会删除无关文件。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:41:22.187

使用这种语法，可能是因为您使用了多个源，而这些源是实际文件。

`src_dir`为什么不同步to的父目录`dst_dir`？

# binding - 如何在基于视图的 NSTableView 中从 CoreData 填充 NSPopupButton

> ID：10768492
> 
> 赞同：4
> 
> 时间：2012-05-26T17:47:00.067
> 
> 标签：binding, nstableview, nspopupbutton

我正在使用基于视图的 NSTableViews，它使用带有核心数据的绑定和数组控制器填充。一切都很好——带有文本和按钮的单元格以及带有图像和文本的单元格——我也可以编辑文本，等等。

我无法弄清楚并且到处搜索的是如何填充弹出菜单。有 2 个数组控制器，一个用于表格视图，一个用于弹出按钮菜单项。

我尝试过以经典方式绑定弹出菜单：通过绑定内容（arrangedObjects 到实体 Place）、内容值（arrangedObjects Place.name）和选定对象（Table Cell View objectValue.places.name。

所有控件不应该像基于视图的表格视图中的普通控件一样工作吗？菜单没有被填充。但是，如果 tableView 的实体已经设置了值/关系，则该值将正确显示。

任何帮助都会很棒。谢谢，丹

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T10:01:46.370

我认为这里有一个错误，我遇到了完全相同的问题。这是我的解决方法：

我没有将弹出按钮直接绑定到 IB 中的 Array Controller，而是在 nib 的 File's Owner 中放置了一个插座（名为 arrayController），`NSArrayController`并将弹出按钮绑定如下：

![设置](../Images/507a48de367173b90246c46ee1221a5b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T04:16:03.727

看一下这个：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaBindings/Tasks/onerelation.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaBindings/Tasks/onerelation.html)

[http://www.tbef.se/blog/2006/08/31/core-data-bindings-nstableview-and-nspopupbuttoncell/](http://www.tbef.se/blog/2006/08/31/core-data-bindings-nstableview-and-nspopupbuttoncell/)

检查只设置了 3 个参数！！

**内容**
绑定到：LanguagesArrayController
控制器键：排列对象
模型键路径：

**内容值**
绑定到：LangsArrayController
控制器键：排列对象
模型键路径：名称

**所选对象**
绑定到：CoursesArrayController
控制器键：排列对象
模型键路径：语言

# c# - 应用程序启动失败

> ID：10768499
> 
> 赞同：2
> 
> 时间：2012-05-26T17:47:58.020
> 
> 标签：c#

您好，我已经创建了一个 WinForms 应用程序，准备在其他计算机（我的计算机之外）上实现它。我在其他地方运行它时遇到问题。

在`Program.cs`文件中我有这个来看看问题是什么：

```
static void Main()
{
   try
   {
       Application.EnableVisualStyles();
       Application.SetCompatibleTextRenderingDefault(false);
       Application.Run(new mainForm());
    }
    catch(SystemException ex)
    {
       MessageBox.Show("Error: ", ex.ToString());
    }
} 
```

除了添加`try/catch`. 我知道问题出在这`Program.cs`，因为我设置了一系列消息框以显示在`MainForm_Load()`块的不同阶段。该应用程序没有到达任何一个。

这可能听起来很模糊，但我根本无法让这个应用程序在我的笔记本电脑以外的任何地方工作。它会是`Usings`我拥有的其中之一吗？如果需要，我可以包括那些。

编辑 2：根据 Marko 的建议，我将所有外部 DLL 复制到与我尝试运行的 EXE 相同的根文件夹中。第三个 try-catch 块正在抛出异常，我将`Program.cs`其`Application.Run(new mainForm());`追溯到我的`mainForm.cs`. 在这条线上，我有我的后台工作人员：

`private BackgroundWorker snBW = new BackgroundWorker();`

我们离得更近了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T18:02:16.320

伟大而酷的问题。

有时应用程序会因为丢失、损坏或关闭目标框架版本而失败。您可以查看您的应用程序需要什么框架，完整或客户端配置文件，并在使用前安装它。

由于该组件的 Microsoft 更新损坏，.Net 2.0 经常发生框架损坏的问题。它不时发生在不同的机器上。解决方案是重新安装框架。

Windows 7、2008 Server 有时会出现停用 .Net 3.5 功能的问题。它可以在 Windows 的功能中激活。

许多 .Net 3.5 应用程序实际上需要 .Net 3.5SP1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T18:02:15.943

首先，检查您的计算机上是否安装了适当的 .net 框架。其次，如果您使用任何外部库，请务必将所有必需的 dll 复制到应用程序文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T18:02:55.643

事件`Form.Load`处理程序不会在您的外部 try–catch 块的上下文中执行。UI 事件是有效的回调；您应该在它们的每个处理程序中声明一个新的 try-catch 块以进行有效调试。

# java - 如果给出超过 3 个单词，Android Text 函数会强制关闭

> ID：10768500
> 
> 赞同：0
> 
> 时间：2012-05-26T17:48:00.160
> 
> 标签：java, android, hashmap, forceclose

我是 java 新手，来自 c++，为了快速学习不同的实践，我将我的聊天机器人转换为 java android 应用程序。如果超过 3 个不同的单词，这里的这个函数会强制关闭，我不知道为什么。如果有人能帮我解开这个谜语，我会很高兴的！

```
public void AI(String text) {
// initiate new lists to be on the safe side
List<String>    indexer = new ArrayList<String>();
List<String>    sentence = new ArrayList<String>();
List<String>    explode = new ArrayList<String>();
List<String>    ary = new ArrayList<String>(); 

explode = Arrays.asList(text.split(" "));  

// initiate randint and trigger variable
Random rand = new Random();
int randint = rand.nextInt(explode.size());

// initiate the trigger variable
String trigger = explode.get(randint); 

     // check if word exists in database and add if it not.
for(int i = 0; i < explode.size(); i++) {
    String word = explode.get(i);   

if(common.get(word)==null) {
                        words.add(word);
                        common.put(word, 1);
                        context.put(word, explode);
                        pos.put(word, i);
                        length.put(word, explode.size());

                         }else{
        // increase the weight of common if the word repeats
                         common.put(word, common.get(word)+1 );
                                     }
                                  }
     //check if context with index set as trigger is empty, if not, copy the   arraylist to the ary variable
     if(!context.get(trigger).isEmpty()) {
            Collections.copy( ary, context.get(trigger));}

     // fill the arraylist sentence with words to be used, some in context, some random from the database.
 for(int i2 = 0; i2 < length.get(trigger); i2++ ) {

                  randint = rand.nextInt(length.get(trigger));

if(randint < length.get(trigger)/2) {
                                        //
                                         if(ary.get(i2)!=null) {
                                                                   sentence.add(ary.get(i2));
                                                               }
                                    }else{
                        sentence.add(words.get(rand.nextInt(words.size())));
                                         }

}    

   // use to the pos-hashmap to check at which index the word was detected at, if not     place it at the deliberate index.
for(int i3 = 0; i3 < sentence.size(); i3++) {
                                            if(sentence.get(i3)!=null) {    
                                            indexer.add(pos.get(sentence.get(i3)), sentence.get(i3));   
                                                                       }
                                            }

// compose the final string that is to be passed to the speak function
for(int i4 = 0; i4 < indexer.size(); i4++) {
say = say + indexer.get(i4)+" ";    
    }   

// pass the string to the speak function
mTts.speak(say, TextToSpeech.QUEUE_FLUSH, null);     

// removing final string to be ready for next iteration
    say = "";

// end of AI stuff          
} 
```

日志猫：

```
05-26 17:40:08.266: E/AndroidRuntime(490): Uncaught handler: thread main exiting due to  uncaught exception
05-26 17:40:08.276: E/AndroidRuntime(490): java.lang.ArrayIndexOutOfBoundsException
05-26 17:40:08.276: E/AndroidRuntime(490):  at  java.util.Collections.copy(Collections.java:1593)
05-26 17:40:08.276: E/AndroidRuntime(490):  at sarah.namespace.SarahActivity.AI(SarahActivity.java:163) 
```

变量：

```
// arraylists
public List<String> explode = new ArrayList<String>();
    public List<String> words = new ArrayList<String>();
    public List<String> sentence = new ArrayList<String>();
    public List<String> indexer = new ArrayList<String>();
// hashmaps
    public Map<String, Integer> common = new HashMap<String, Integer>();
public Map<String, List<String>> context = new HashMap<String, List<String>>();
public Map<String, Integer> pos = new HashMap<String, Integer>();
public Map<String, Integer> length = new HashMap<String, Integer>();

 // strings
public String say; 
```

Logcat 指向的行：

```
if(!context.get(trigger).isEmpty()) {
            Collections.copy( ary, context.get(trigger));} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:46:15.607

我没有查明问题，但我相信这种替代方法更快并且应该避免它。（老实说，您的代码在第四个单词上崩溃了？这很奇怪。我相信还有更多……无论如何）

在 Java[中，for-each 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)更快更简单，因此：

```
// check if word exists in database and add if it not.
int i = 0;
for(String word : explode) {
    if(common.get(word) == null) {
        if(word.equals(trigger)) {
            ary = new ArrayList<String>(explode);
        }

    ...
    i++;
} 
```

此外，如果`trigger`不存在`context`则返回 null，而不是空列表，因此您可以进行简单的更改：

```
if(context.get(trigger) != null && !context.get(trigger).isEmpty()) {
    Collections.copy(ary, context.get(trigger));
} 
```

但这应该抛出 NullPointerException 而不是越界......我仍然不知道为什么第四个词是致命的。希望这可以帮助。

# .net - Visual Studio 2010 SP1 性能问题

> ID：10768501
> 
> 赞同：1
> 
> 时间：2012-05-26T17:48:03.040
> 
> 标签：.net, visual-studio-2010, performance, xaml, resharper

最近我的 Visual Studio 2010 IDE 遇到了很多麻烦。该问题在编辑 XAML 时最为明显。当我简单地更改 XAML 字符串、向上或向下滚动或编辑任何内容时，IDE 会滞后，在 20-30 秒内没有响应，然后恢复，我可以进一步工作。有时重新启动有帮助，有时没有。这个问题确实无法正常工作，但XAML编辑大多受到影响。在调试模式下构建和运行一个小型解决方案（3-4 个项目）也最多需要 2 分钟。

我研究了这个网站和谷歌，有很多有用的答案，我大多尝试过，但没有任何帮助。我自己的研究是这样的：

*   安装的插件没有效果，我把它们都禁用了测试
*   我想使用 InteliSense，所以我不想禁用它（但我也尝试过禁用它）
*   硬件/软件渲染没有区别，与富客户端相同
*   启用/禁用自动工具箱生成没有区别
*   计算机是 i7 六核、24GB 内存和 SSD，因此不是问题（我的笔记本电脑上也出现了同样的问题）-Visual Studio 使用的内存不超过 200MB
*   运行最新的 Visual Studio 2010 Ultimate SP1，最新版本的 Resharper，以及最新的 Win7 x64
*   与 ReSharper 没有冲突的插件

也许问题是SSD？还有什么可能是造成这种情况的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:29:51.033

尝试再次安装visual studio，它对我有帮助。我曾经重新启动 VS，拒绝重新启动系统，但是一旦我重新安装了 VS 2010，我就不会遇到任何问题。希望能帮助到你 ：）

# spring - Spring MVC + Hibernate DAO：无法连接 bean

> ID：10768502
> 
> 赞同：0
> 
> 时间：2012-05-26T17:48:05.793
> 
> 标签：spring, hibernate, spring-mvc, hibernate-generic-dao

我目前正在开发一个集成了 Hibernate 的 Spring MVC 项目。纯 Spring MVC 部分（DispatcherServlet + 请求映射）工作正常。现在，我必须处理的问题很奇怪：我已经阅读了“Java Persistence with Hibernate”，并且我正在尝试以与书中解释的方式类似的方式设计我的持久层。也就是说，我在两个并行的层次结构中设计了它：一个用于实现类，另一个用于接口。

所以，我有一个名为 GenericDaoImpl 的抽象类，它实现了 GenericDao 接口。然后我有一个名为 AdvertisementDaoImpl 的具体类，它扩展了 GenericDaoImpl 并实现了 AdvertisementDao 接口（它扩展了 GenericDao）。

然后，在一个服务 bean（标有@Service 的类）中，我将自动装配我的 dao 类。

这是我的问题：

*   自动装配实现接口但**不**扩展我的抽象 GenericDaoImpl 类的 DAO 类：好的
*   自动装配实现了 AdvertisementDao 接口并**扩展了我的抽象 GenericDaoImpl 类**的 AdvertisementDaoImpl ：导致 bean 初始化异常。

我在 DAO 层次结构顶部的抽象类处理常见 CRUD 方法的所有样板代码。所以，我绝对想保留它。

有人对此有解释吗？

这是代码的摘录：

```
public abstract class GenericDaoImpl <T, ID extends Serializable> implements BeanPostProcessor, GenericDao<T, ID>{
    @Autowired(required=true)
    private SessionFactory sessionFactory;
    private Session currentSession;
    private Class<T> persistentClass;

...
}

@Repository
public class AdvertisementDaoImpl extends GenericDaoImpl<Advertisement, Long> implements AdvertisementDao {

...

    public List<Advertisement> listAdvertisementByType(AdvertisementType advertisementType, Class<? extends Good> type) {
        return null;
    }

}

@Service
public class AdvertisementServiceImpl implements AdvertisementService{
    @Autowired(required=false)
    private AdvertisementDao advertisementDao;

    public List<Advertisement> listAllAdvertisements() {

        return null;
    }

} 
```

这是堆栈跟踪中最相关的部分（至少，我猜是这样）：

> 嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：be.glimmo.service.AdvertisementService be.glimmo.controller.HomeController.advertisementService；嵌套异常是 java.lang.IllegalArgumentException：无法将 be.glimmo.service.AdvertisementService 字段 be.glimmo.controller.HomeController.advertisementService 设置为 be.glimmo.dao.AdvertisementDaoImpl

这是我的[Spring 配置](http://pastebin.com/BwD9exwi)（链接到 pastebin.com）：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:56:26.250

经过几次测试后，发现问题是由我的抽象 GenericDaoImpl 类实现 BeanPostProcessor 接口引起的：出于某种原因，该接口的方法不仅在此 bean 实例化时执行，而且在**每个 bean**实例化时都执行。

鉴于在我的 BeanPostProcessor 挂钩方法中，我正在检索泛型参数化类型，当这些方法针对不在我的 DAO 层次结构中的类执行时，它们最终会产生运行时异常（更具体地说，ClassCastException）。

所以，为了解决这个问题，我让我的 GenericDaoImpl 类不再实现 BeanPostProcessor 接口，并将钩子方法的主体移动到空构造函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T10:27:21.773

我相信你应该`proxy-target-class`在你的事务管理配置中使用：

```
<tx:annotation-driven transaction-manager="transactionManagerForHibernate" 
     proxy-target-class="true" /> 
```

您描述的问题的症状与[Spring 事务管理](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-proxying)（查找表 10.2）和[使用 Spring 的 AOP 代理](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-proxying)中提到的症状相匹配：

> 如果要代理的目标对象至少实现一个接口，则将使用 JDK 动态代理。目标类型实现的所有接口都将被代理。如果目标对象没有实现任何接口，那么将创建一个 CGLIB 代理。

因此，当默认情况下不存在 CGLIB 时，您拥有来自已实现接口的所有方法，但您将错过来自层次结构中超类的方法的代理，这就是您在此问题上遇到异常的原因。

# html - WinJS.UI.ListView 水平

> ID：10768503
> 
> 赞同：1
> 
> 时间：2012-05-26T17:48:10.893
> 
> 标签：html, windows-runtime, winjs

有一些项目并希望水平显示它们，并且在空间不足时需要将它们换行到下一行。

```
<div class="historyItem">
    <div id="testTemplate" data-win-control="WinJS.Binding.Template" style="display:none">
        <div class="itemTemp">
            <h6  data-win-bind="innerText: desc"></h6>
        </div>
    </div>
</div>
<div id="listViewForecast"
    data-win-control="WinJS.UI.ListView"
    data-win-options="{itemTemplate:testTemplate, selectionMode: 'none', tapBehavior: 'none', swipeBehavior:'none',  layout: {groupInfo: groupInfo, type: WinJS.UI.GridLayout}}"
    >
</div> 
```

现在我不知道如何使它“水平”，但我知道你应该能够做到这一点，因为 ListView 上有一个属性，如果列表是水平的，则返回布尔值 h​​ttp: [//msdn.microsoft.com/ en-us/library/windows/apps/br211788.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211788.aspx)。我也可以使用 GridView，但即使是首先垂直显示项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:30:28.157

ListView 将始终垂直排列内容项。即使使用 GridLayout，项目也会依次填充每一列。

定义了一个水平属性，但是如果您查看 ui.js 中的源代码，您会发现它被硬编码为 GridLayout 为 true 而 ListLayout 为 false 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T17:16:46.853

弄清楚了。答案在[这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh465496.aspx#styling_the_listview)。为 ListView 控件指定您自己的高度并使其更宽。确保它的高度仅足以容纳一件物品，并且下一件物品将被扔在右侧。就我而言，我有固定数量的项目并且可以正常工作。这可能不适用于可变数量的项目。

只需将以下类添加到您的 html 并指定您的宽度和高度。页面中的所有 ListView 都使用此类设置样式。

```
.win-listview 
{
    height: 500px; 
    width: 500px; 
    border: 2px solid gray;
} 
```

# c++ - 使 C++ 模拟类同时使用 2D 和 3D 向量

> ID：10768504
> 
> 赞同：1
> 
> 时间：2012-05-26T17:48:13.780
> 
> 标签：c++, templates, pointers, vector, polymorphism

d我正在编写一个模拟程序。现在它应该适用于 2D 和 3D，所以我试图让我的课程适用于 2D 和 3D 向量。此外，向量应该有一个模板参数来指示坐标应该使用哪种类型。

我的基类如下所示：

```
class SimulationObject {
    AbstractVector<int>* position;
    AbstractVector<float>* direction;
} 
```

现在的问题是，我不能使用多态性，因为那时我所有的向量都必须是指针，这使得操作符重载几乎不可能用于这样的操作：

```
AbstractVector<float>* difference = A.position - (B.position + B.direction) + A.direction; 
```

但我也不能使用模板参数来指定要使用的类型：

```
template <typename T> class Vector2d;
template <typename T> class Vector3d;

template <class VectorType> class SimulationObject {
    VectorType<int> position;
    VectorType<float> direction;
}

SimulationObject<Vector2D> bla; 
//fails, expects SimulationObject< Vector2D<int> > for example.
//But I don't want to allow to specify
//the numbertype from outside of the SimulationObject class 
```

那么，怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T17:52:07.100

您可以使用模板模板参数：

```
template <template <class> class VectorType> 
class SimulationObject {
    VectorType<int> position;
    VectorType<float> direction;
}; 
```

# python - 在 Python 中终止子进程

> ID：10768507
> 
> 赞同：0
> 
> 时间：2012-05-26T17:48:33.157
> 
> 标签：python, subprocess, python-2.7

我有一个包装脚本，里面还有很多其他的测试脚本。在其中一个测试脚本中，我使用 Popen 类创建了一个子进程。问题是我不知道如何终止该子进程并返回主进程并继续下一个测试脚本。我的包装器在具有子进程的测试脚本处停止并且永远不会继续。能给个提示吗？谢谢。PS kill() 或 terminate() 或我认为有用的任何其他功能，不会让我回到主进程。我想终止子进程并继续主进程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:52:06.737

在主脚本中保留对子项的引用。使用该参考调用`terminate()`

```
from subprocess import Popen

class TestApp(object):
    app = None

    def start(self):
        self.app = Popen(['your command'])

    def stop(self):
        self.app.terminate() 
```

在主脚本中：

```
app1 = TestApp()
app1.start()
app2 = TestApp()
app2.start()
#do something here
app1.stop()
app2.stop()
#do more here 
```

# android - 使用陀螺仪和加速度计计算位置

> ID：10768510
> 
> 赞同：0
> 
> 时间：2012-05-26T17:48:50.860
> 
> 标签：android, core-location

我想向其他人开放，看看是否有人对此有任何想法？我们正在创建一个使用核心定位和一些物理学的应用程序..但是我们没有得到这种准确性... [http://www.youtube.com/watch?v=HTZFRDBdQck&feature=related](http://www.youtube.com/watch?v=HTZFRDBdQck&feature=related)

对他们为使这一点如此准确所做的工作有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:54:02.873

一旦有了与运动相关联的地图，就很容易纠正轨迹。如果您尝试从头开始绘制运动，那会有点困难，因为您无法用任何已知环境来补偿它。另外，他们说他们只使用指南针，其准确性高度依赖于周围的磁场（因为当周围有干扰时，它会疯狂地脱离电网）。

# c# - Metro Style App：如何从 webview 控件中运行的 javascript 代码调用 C# 方法

> ID：10768516
> 
> 赞同：2
> 
> 时间：2012-05-26T17:50:59.070
> 
> 标签：c#, javascript, webview, windows-8, windows-runtime

我想使用 Web 视图来实现我的 Metro 应用程序的 UI。然后，HTML/JS/CSS 代码将在其中运行。这个想法是将纯 JS 代码与 WinRT 和 Metro SDK 隔离开​​来。此外，我想在同一个 Metro 应用程序中编写一个 C# API 层，该层将由 Web 视图中的 JS 使用。当 UI 需要使用本机代码（例如调用 WinRT 组件）时，在 webview 中运行的 UI 代码应该调用我的 C# 方法。

有人可以给我一个关于如何从 Metro 应用程序的 Web 视图中调用 C# 方法的示例。谢谢，雨果。

你告诉我的演练使用 JavaScript 项目作为客户端，它引用了用 C# 开发的 Windows 运行时组件。（WinMD 文件）我想使用 C# 项目作为客户端开发 Metro Style App，而不是 Metro Javascript 项目。它将包含一个 Web 视图，它是我的 UI 的容器。该项目将引用使用 C# 开发的 Windows 运行时组件。（WinMD 文件）这个想法是运行在 Web 视图中的 javascript 调用 WinMD 文件中的方法，但不幸的是，我无法从运行在 Web 视图中的 javascript 调用 WinMD 中的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T03:57:31.667

您在这里发布了完全相同的问题：

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/fa0db73d-66db-4330-bf24-644703e9265b](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/fa0db73d-66db-4330-bf24-644703e9265b)

您的问题的答案应该在这里：

*   [在 C# 和 Visual Basic 中创建 Windows 运行时组件](http://msdn.microsoft.com/en-us/library/windows/apps/br230301%28v=vs.110%29.aspx)

和这里：

*   [演练：在 C# 或 Visual Basic 中创建一个简单的组件并从 JavaScript 调用它](http://msdn.microsoft.com/en-us/library/windows/apps/hh779077%28v=vs.110%29.aspx)

# api - 需要使用 OAuth 帮助的 API 身份验证

> ID：10768517
> 
> 赞同：1
> 
> 时间：2012-05-26T17:51:11.317
> 
> 标签：api, authentication, rest, oauth

**背景**：我正在尝试创建 SMS API 服务。开发人员有一个 Dev ID，以及分配给他们的开发人员帐户的 API 密钥。开发人员将创建将调用我的 API 的应用程序。但必须首先验证发出调用的应用程序。

**问题**：我遇到的主要问题是身份验证。我阅读了 OAuth 并且非常了解它。我通读了[这个](http://www.slideshare.net/coldfumonkeh/oauth-demystified-hopefully)演示文稿（幻灯片 71-82）。所有 OAuth 文章都在谈论 OAuth 的“舞蹈”或“三角恋”。我的问题似乎是，在我的情况下我没有看到合适的三角形。或者，更好的说法是，三角形似乎并不完整。

我的意思是，假设 LinkedIn 试图制作一些应用程序来帮助用户将他们的 LinkedIn acc 与 twitter 关联起来，OAuth 是完全有意义的。因为LinkedIn需要代表用户从twitter获取资源（因为用户有一个推特账户）。在我的情况下，只有消费者拥有在我的服务中注册的开发者帐户。最终用户没有任何凭据可供消费者代表询问。那么我该如何实现 Oauth？那么消费者会问供应商什么呢？它只会说“小心，我来了？”。因为这似乎毫无意义，除非它要求请求令牌以换取访问令牌。但在这种情况下，由于最终用户甚至没有帐户，因此这些步骤似乎毫无用处。

所以，我不知道如何解决这个身份验证问题。我尝试过考虑使用 php 会话，这样它可以帮助我将令牌与使用 API 的特定客户端相关联。但是 REST/OAUTH 纯粹主义者似乎不同意在身份验证中使用会话。他们声称 OAuth 是一个已经证明了自己的标准，这是我应该使用的，而不是提出我自己的晦涩方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T12:41:06.433

从您的描述来看，您似乎只处于两方场景中（开发人员编写代码代表他们自己访问您的 API，而不是代表最终用户），所以这确实意味着执行完整的 3-legged oAuth不需要场景。

您可以使用几乎任何身份验证方案，并且可以使用（API 密钥、其他 oAuth 授权类型 [见下文] 甚至 ID/Secret 组合。在 oAuth 世界中：

*   查看其他 oAuth 2.0 授权类型：尤其是资源所有者 PW 授权 - [https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-26#section-4.3](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-26#section-4.3)。它比 username-password 稍微好一点，因为 PW 并不是一直通过通道传递的（虽然它只传递一次），并且它假定编写代码的开发人员是凭据的所有者。

*   看看 oAuth v1.0：这与 v2.0 有很多不同，但它确实具有一些人喜欢的一个特性是令牌的使用方式——而不是通过它们用于生成哈希的线路传递客户端，然后在服务器端验证哈希。它比检查密钥更昂贵和复杂，但更不容易受到攻击。

在非 oAuth 世界中，如果它主要是开发人员直接使用的服务器资源，那么 ID/Secret 或 API-Key 模式可能就绰绰有余，并且对您的开发人员来说更容易实现。

回复：oAuth - 如果您正在执行任何类型的用户身份验证，那么一定要坚持使用标准 - 这些东西很复杂，并且有库真的很有帮助。如果它是 developer-api，您可能不需要走那么远。

如果您希望 API 在理想世界中是安全的，那么任何需要安全令牌通过间隙的东西都应该使用 SSL 来保护，*特别是*如果该客户端代码可以在可能通过无线通信的移动设备或笔记本电脑上运行。如果不是这种情况，有人可以从其中一个开发人员那里复制一个令牌。

上面唯一避免这种情况的协议是 oAuth 1.0 变体，因为秘密永远不会离开客户端，而是用于散列。但这很复杂。最后一个要查看的是 Amazon AWS 模式，它进行类似于 oAuth 1.0 [http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html)的散列，人们模仿了很多。

# python - Python发送带有标题的POST

> ID：10768522
> 
> 赞同：106
> 
> 时间：2012-05-26T17:51:36.913
> 
> 标签：python, http, post, request, http-headers

我尝试构建一个 python 脚本，它发送一个带有参数的 POST 以提取结果。使用提琴手，我提取了我想要的返回请求。该网站仅使用 https。

```
POST /Services/GetFromDataBaseVersionned HTTP/1.1
Host: www.mywbsite.fr
"Connection": "keep-alive",
"Content-Length": 129,
"Origin": "https://www.mywbsite.fr",
"X-Requested-With": "XMLHttpRequest",
"User-Agent": "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5",
"Content-Type": "application/json",
"Accept": "*/*",
"Referer": "https://www.mywbsite.fr/data/mult.aspx",
"Accept-Encoding": "gzip,deflate,sdch",
"Accept-Language": "fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4",
"Accept-Charset": "ISO-8859-1,utf-8;q=0.7,*;q=0.3",
"Cookie": "ASP.NET_SessionId=j1r1b2a2v2w245; GSFV=FirstVisit=; GSRef=https://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CHgQFjAA&url=https://www.mywbsite.fr/&ei=FZq_T4abNcak0QWZ0vnWCg&usg=AFQjCNHq90dwj5RiEfr1Pw; HelpRotatorCookie=HelpLayerWasSeen=0; NSC_GSPOUGS!TTM=ffffffff09f4f58455e445a4a423660; GS=Site=frfr; __utma=1.219229010.1337956889.1337956889.1337958824.2; __utmb=1.1.10.1337958824; __utmc=1; __utmz=1.1337956889.1.1.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided)"

{"isLeftColumn":false,"lID":-1,"userIpCountryCode":"FR","version":null,"languageCode":"fr","siteCode":"frfr","Quotation":"eu"} 
```

现在我的python脚本：

```
#!/usr/bin/env python
# -*- coding: iso-8859-1 -*-
import string
import httplib
import urllib2

host = "www.mywbsite.fr/sport/multiplex.aspx"
    params='"isLeftColumn":"false","liveID":"-1","userIpCountryCode":"FR","version":"null","languageCode":"fr","siteCode":"frfr","Quotation":"eu"'

headers = { Host: www.mywbsite.fr,
"Connection": "keep-alive",
"Content-Length": 129,
"Origin": "https://www.mywbsite.fr",
"X-Requested-With": "XMLHttpRequest",
"User-Agent": "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5",
"Content-Type": "application/json",
"Accept": "*/*",
"Referer": "https://www.mywbsite.fr/data/mult.aspx",
"Accept-Encoding": "gzip,deflate,sdch",
"Accept-Language": "fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4",
"Accept-Charset": "ISO-8859-1,utf-8;q=0.7,*;q=0.3",
"Cookie": "ASP.NET_SessionId=j1r1b2a2v2w245; GSFV=FirstVisit=;     GSRef=https://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CHgQFjAA&url=https://www.mywbsite.fr/&ei=FZq_T4abNcak0QWZ0vnWCg&usg=AFQjCNHq90dwj5RiEfr1Pw; HelpRotatorCookie=HelpLayerWasSeen=0; NSC_GSPOUGS!TTM=ffffffff09f4f58455e445a4a423660; GS=Site=frfr; __utma=1.219229010.1337956889.1337956889.1337958824.2; __utmb=1.1.10.1337958824; __utmc=1; __utmz=1.1337956889.1.1.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided)"

}

url = "/Services/GetFromDataBaseVersionned"

# POST the request
conn = httplib.HTTPConnection(host,port=443)
conn.request("POST",url,params,headers)
response = conn.getresponse()

data = response.read()
print data 
```

但是当我运行我的脚本时，我有这个错误：

```
socket.gaierror: [Errno -2] Name or service not known 
```

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-05-28T10:06:26.120

非常感谢您链接到请求模块。简直太完美了。下面是我的问题的解决方案。

```
import requests
import json

url = 'https://www.mywbsite.fr/Services/GetFromDataBaseVersionned'
payload = {
    "Host": "www.mywbsite.fr",
    "Connection": "keep-alive",
    "Content-Length": 129,
    "Origin": "https://www.mywbsite.fr",
    "X-Requested-With": "XMLHttpRequest",
    "User-Agent": "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5",
    "Content-Type": "application/json",
    "Accept": "*/*",
    "Referer": "https://www.mywbsite.fr/data/mult.aspx",
    "Accept-Encoding": "gzip,deflate,sdch",
    "Accept-Language": "fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4",
    "Accept-Charset": "ISO-8859-1,utf-8;q=0.7,*;q=0.3",
    "Cookie": "ASP.NET_SessionId=j1r1b2a2v2w245; GSFV=FirstVisit=; GSRef=https://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CHgQFjAA&url=https://www.mywbsite.fr/&ei=FZq_T4abNcak0QWZ0vnWCg&usg=AFQjCNHq90dwj5RiEfr1Pw; HelpRotatorCookie=HelpLayerWasSeen=0; NSC_GSPOUGS!TTM=ffffffff09f4f58455e445a4a423660; GS=Site=frfr; __utma=1.219229010.1337956889.1337956889.1337958824.2; __utmb=1.1.10.1337958824; __utmc=1; __utmz=1.1337956889.1.1.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided)"
}
# Adding empty header as parameters are being sent in payload
headers = {}
r = requests.post(url, data=json.dumps(payload), headers=headers)
print(r.content) 
```

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2019-02-02T14:01:56.280

如果我们想将**自定义 HTTP 标头**添加到**POST 请求**，我们必须通过**字典将它们传递给** `headers` **参数**。

这是一个带有**非空*正文***和***标头***的示例：

```
import requests
import json

url = 'https://somedomain.com'
body = {'name': 'Maryja'}
headers = {'content-type': 'application/json'}

r = requests.post(url, data=json.dumps(body), headers=headers) 
```

[来源](https://www.pythonforbeginners.com/requests/using-requests-in-python)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-11-26T08:22:06.887

要使用 POST 请求而不是 GET 请求`urllib2`，您需要指定空数据，例如：

```
import urllib2
req = urllib2.Request("http://am.domain.com:8080/openam/json/realms/root/authenticate?authIndexType=Module&authIndexValue=LDAP")
req.add_header('X-OpenAM-Username', 'demo')
req.add_data('')
r = urllib2.urlopen(req) 
```

# iphone - 在 iOS 上，为什么 shouldAutorotateToInterfaceOrientation 被调用 10、12 或 13 次？

> ID：10768524
> 
> 赞同：0
> 
> 时间：2012-05-26T17:51:49.237
> 
> 标签：iphone, ios, ipad, uiviewcontroller, uiinterfaceorientation

如果为 iPad 创建 Single View 应用程序，取决于为 plist 设置的 Supported Device Orientation，以及`shouldAutorotateToInterfaceOrientation`返回的内容，`shouldAutorotateToInterfaceOrientation`可以调用 10、12 甚至 13 次。

一个简单的情况是，如果“支持设备方向”设置为横向左侧，并且`shouldAutorotateToInterfaceOrientation`也`YES`仅返回横向左侧，那么如果我以横向左侧方向启动应用程序，`shouldAutorotateToInterfaceOrientation`则将连续调用 12 次。如果我把它放在其他方向并启动应用程序，那么它是 13 次。

连续调用这么多次是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T02:46:42.907

正如我在 UIDevice.h 中看到的，方向类型不用作掩码，应该执行几个请求：

*   检查是否支持当前方向
*   如果没有，请使用 1-3 或 1-4 请求找到支持的方向

对于单个方向更改，整个过程可能发生不止一次（例如，系统可能希望向应用程序窗口发送正确的通知，状态栏可能希望独立检查方向，欢迎使用 OOP，我不是说发生，但它可能）而第一或第二阶段的结果可能会以某种方式被一个组件而不是另一个组件缓存。

# java - 如何检查您是在 Mac 还是 Windows 上调整 Java 中的 GUI 大小？

> ID：10768525
> 
> 赞同：2
> 
> 时间：2012-05-26T17:52:04.553
> 
> 标签：java, windows, macos, swing, layout-manager

我编写了一个需要在 Mac 和 Windows 上运行的程序。就 GUI 而言，它在 Windows 上看起来不错，但 JFrame 在 Mac 上太小了。我使用了 GridBag 布局，没有使用绝对的，这在与此问题类似的答案中已被建议。我尝试过使用 pack() 但它不适用于这个 GUI。它甚至不会调整框架的大小以适应菜单栏。我正在使用 setSize(X, Y) 但有没有办法检查用户是否在 Mac 上，然后相应地更改大小？我也尝试过使用 setMinimumSize() 然后 pack() 但 pack 无论如何都没有做任何事情。

这是我的帧代码位；以防由于 pack() 无法正常工作而出现任何问题。

```
try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    } catch (Exception e) { }

    try {
        timeCodeMask = new MaskFormatter(" ## : ## : ## : ## ");
    } catch(ParseException e) {
        errorMessage("Warning!", "Formatted text field hasn't worked, text fields will not be formatted.");
    }

    try {
        activePanel = new JPanelSwapper("src/bg.png");
    } catch(IOException e) {
        errorMessage("Warning!", "Background image has not loaded, continuing without one.");
    }

    FPS = 24;

    calculatorPanel = calculatorPanel();
    converterPanel = converterPanel();

    activePanel.setPanel(calculatorPanel());
    previousTimes = new TimeStore();
    resultTimes = new TimeStore();
    previousConversions = new TimeStore();

    frame = new JFrame("TimeCode Calculator & Converter");
    ImageIcon frameIcon = new ImageIcon("src/frame icon.png");
    frame.setIconImage(frameIcon.getImage());
    frame.setExtendedState(JFrame.NORMAL);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //frame.setSize(WIDTH, HEIGHT);
        //frame.pack();
        frame.setMinimumSize(new Dimension(WIDTH, HEIGHT));
        frame.pack();
        frame.setResizable(false);

    frame.setJMenuBar(menuBar());
    frame.getContentPane().add(activePanel);
    frame.setBackground(Color.WHITE);
    frame.setVisible(true);

    screen = Toolkit.getDefaultToolkit().getScreenSize();
    frame.setLocation((screen.width - WIDTH) / 2, (screen.height - HEIGHT) / 2); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T17:56:31.263

您可以通过系统属性找出使用哪个操作系统。

例如：

```
System.getProperty("os.name"); //returns name of os as string
System.getProperty("os.version"); //returns version of os as string
System.getProperty("os.arch"); //returns architecture of os as string 
```

根据条件检查：

```
public String getOS() {
    String os = System.getProperty("os.name").toLowerCase();

    if(os.indexOf("mac") >= 0){
       return "MAC";
    }
    else if(os.indexOf("win") >= 0){
       return "WIN";
    }
    else if(os.indexOf("nix") >= 0 || os.indexOf("nux") >= 0){
       return "LINUX/UNIX";
    }
    else if(os.indexOf("sunos") >= 0){
       return "SOLARIS";
    } 
```

# c++ - 试图创建 HIMAGELIST，我在这里做错了什么？

> ID：10768529
> 
> 赞同：0
> 
> 时间：2012-05-26T17:52:38.500
> 
> 标签：c++, winapi

我想`HIMAGELIST`为列表视图创建一个。它实际上需要由文件图标组成。

这是我的代码：

```
HIMAGELIST imageList = ImageList_Create(GetSystemMetrics(SM_CXSMICON),
                                          GetSystemMetrics(SM_CYSMICON),
                                          ILC_MASK, 1, 1);

HICON ico = reinterpret_cast<HICON>(LoadImage(0,IDI_APPLICATION,
                                                IMAGE_ICON,0,0,LR_SHARED));
ImageList_AddIcon(imageList, ico);

ListView_SetImageList(listView, imageList, LVSIL_SMALL); 
```

具有三个元素的列表视图现在具有三个应用程序项。

但是，当我尝试添加另一个图标（`IDI_HAND`在这种情况下）时，我仍然得到相同的 3 个图标。

我遇到的另一个问题是我无法获取我需要的实际文件图标：

```
SHFILEINFO sfi;
SHGetFileInfo (L"C:\\test.txt", NULL, &sfi, sizeof (sfi), SHGFI_SYSICONINDEX | SHGFI_SMALLICON);
ImageList_AddIcon(imageList, sfi.hIcon); 
```

这会导致空图标，而不是`txt`我想要的图标。

我一直在为此苦苦挣扎，非常感谢您在这里的帮助。

*更新*

我正在使用在 Internet 上找到的示例代码来填充列表视图（显然这不是我想要的）：

```
UINT columnMask = LVCF_TEXT|LVCF_FMT|LVCF_SUBITEM|LVCF_WIDTH;
LVCOLUMN lc[] = {
{ columnMask, 0, 150, L"Text...",0, 0,0,0 },
{ columnMask, LVCFMT_CENTER, 70, L"Number",0, 1,0,0 },
{ columnMask, 0, 100, L"Whatever",0, 2,0,0 },
};

ListView_InsertColumn(listView, 0, &lc[0]);
ListView_InsertColumn(listView, 1, &lc[1]);
ListView_InsertColumn(listView, 2, &lc[2]);

UINT itemMask = LVIF_TEXT;
LVITEM li[] = {
   { itemMask, 0,0, 0,0, L"...for the first item!",0, 0,0,0,0,0,0 },
   { itemMask, 0,1, 0,0, L"1",0, 0,0,0,0,0,0 },
   { itemMask, 0,2, 0,0, L"14 bucks",0, 0,0,0,0,0,0 },
   { itemMask, 1,0, 0,0, L"...for the second item!",0, 0,0,0,0,0,0 },
   { itemMask, 1,1, 0,0, L"24",0, 0,0,0,0,0,0 },
   { itemMask, 1,2, 0,0, L"2 suns",0, 0,0,0,0,0,0 },
   { itemMask, 2,0, 0,0, L"...for the second item!",0, 0,0,0,0,0,0 },
   { itemMask, 2,1, 0,0, L"24",0, 0,0,0,0,0,0 },
   { itemMask, 2,2, 0,0, L"2 suns",0, 0,0,0,0,0,0 },
   { itemMask, 3,0, 0,0, L"...for the second item!",0, 0,0,0,0,0,0 },
   { itemMask, 3,1, 0,0, L"24",0, 0,0,0,0,0,0 },
   { itemMask, 3,2, 0,0, L"2 suns",0, 0,0,0,0,0,0 },
};

// setting an icon like this doesn't work
li[0].iImage = sfi.iIcon;

ListView_InsertItem(listView, &li[0]);
ListView_SetItem(listView, &li[1]);
ListView_SetItem(listView, &li[2]);

ListView_InsertItem(listView, &li[3]);
ListView_SetItem(listView, &li[4]);
ListView_SetItem(listView, &li[5]);

ListView_InsertItem(listView, &li[6]);
ListView_SetItem(listView, &li[7]);
ListView_SetItem(listView, &li[8]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T18:28:24.913

的`iImage`成员`LVICON`是您传递给的图像列表中图标的索引`ListView_SetImageList`。您正在系统图像列表中传递图标的索引，但您传递给的图像列表`ListView_SetImageList`是您的私有图像列表。任何一个

1.  用于`ListView_SetImageList`将图像列表与您的私有图像列表相关联，并将 设置为`iImage`您的私有图像列表中的索引（从 的返回值`ImageList_AddIcon`）
2.  用于`ListView_SetImageList`将 imagelist 与系统 imagelist 关联，并将 设置为`iImage`系统 imagelist 中的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T18:11:48.573

对于您的第二个问题，请尝试仅传递 .extension，在您的情况下传递 .txt 作为第一个参数，以及这些标志：SHGFI_SYSICONINDEX 或 SHGFI_USEFILEATTRIBUTES 或 SHGFI_SMALLICON 或 SHGFI_ICON 并在返回时，sfi.hIcon 应包含 txt 文件图标的句柄

如果没有 SHGFI_ICON，SHGetFileInfo 只是填写 sfi.iIcon 是系统图像列表中图标的索引，通过添加 SHGFI_ICON，SHGetFileInfo 也将填写 sfi.hIcon 这就是你想要的。

你是如何添加列表视图项目的？显示填写 LVITEM 结构的代码。

# java - struts2如何从url获取参数

> ID：10768530
> 
> 赞同：1
> 
> 时间：2012-05-26T17:52:45.663
> 
> 标签：java, struts-1, seo, struts2

我正在使用 struts2 并进行了配置，因此 url 看起来像 www.myweb.com/index 而不是 www.myweb.com/index.action

但是现在我面临的问题是我应该如何在 struts.xml 文件中映射并获取请求参数，就像在 struts1 中一样，我可以通过 mapping.getParameters() 接收它，但是 struts2 中有什么可用的呢？

```
<action path="/profile/*"
type="net.viralpatel.struts.cleanurl.ProfileAction"
parameter="{1}">
<forward name="success" path="/profile.jsp" />
<forward name="fail" path="/profile.jsp" />
</action> 
```

**字符串参数 = mapping.getParameter();**

所以在 struts2 中，如果我点击 www.myweb.com/index/p=2 www.myweb.com/index/biz/name /*这里 biz & name 是 2 个参数*/ www.myweb.com/index/biz/name/23 /*这里 biz & name & 23 是参数*/

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-14T06:59:52.010

您可以使用通配符模式来传递参数。

```
<action name="/profile/*" class="net.viralpatel.struts.cleanurl.ProfileAction">
 <param name="id">{1}</param>
<result>
  <param name="location">/profile.jsp</param>
  <param name="id">{1}</param> 
</result>
 </action> 
```

您还可以使用命名参数

```
<constant name="struts.patternMatcher" value="namedVariable"/>

@Namespace{"/users/{userID}");
public class ProfileAction exends ActionSupport {
private Long userID;
public void setUserID(Long userID) {...}
} 
```

如果请求的 URL 是`/users/10/detail`，则**ProfileAction**将被执行并且其`userID`字段将被设置为**10**。

## 动作名称后的参数

要在 URL 中使用参数，请确保在操作名称之后设置：

```
 <constant name="struts.enable.SlashesInActionNames" value="true"/>
 <constant name="struts.mapper.alwaysSelectFullNamespace" value="false"/> 
```

然后动作映射将如下所示：

```
 <package name="edit" extends="struts-default" namespace="/edit">
 <action name="/profile/*" class="net.viralpatel.struts.cleanurl.ProfileAction">
    <param name="id">{1}</param>
    <result>/profile.jsp</result>
 </action>   
 </package> 
```

`/edit/profile/123`当请求一个 URL like 时，将调用**ProfileAction**，其“id”字段将设置为**123**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T17:57:52.120

使用 patternMatcher，通配符用于做其他事情。

[http://struts.apache.org/2.x/docs/wildcard-mappings.html](http://struts.apache.org/2.x/docs/wildcard-mappings.html)

使用 REST 插件是另一种选择，或正则表达式匹配器，具体取决于您的需要。

# javascript - AJAX 加载内容

> ID：10768531
> 
> 赞同：0
> 
> 时间：2012-05-26T17:52:54.683
> 
> 标签：javascript, ajax, jquery

我完全迷失了如何使用 AJAX。查阅了一些教程，一切似乎都很混乱。我遇到了问题：[[脚本只运行一次](https://stackoverflow.com/questions/10766852/script-only-runs-once#comment13997334_10766852)]。

我会用它来重新加载这样的页面：[ [http://www.roblox.com/Poison-Horns-item?id=62152671](http://www.roblox.com/Poison-Horns-item?id=62152671) ] 这样我就可以获得最新的商品价格，而无需刷新页面。如果有人可以帮助/告诉/指出我正确的方向，那会有所帮助。

我有点像初学者脚本编写者，所以请耐心等待；）

感谢您的帮助，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:59:26.940

AJAX 请求与页面请求（GET 和 POST）相同，只是它们是异步处理的并且不会离开当前页面。响应数据是您要获取的页面的来源。在您解析/使用它之前，该来源是无用的。

一个简单的 jQuery 示例：

```
//for example, we are on example.com
$.ajax({
    type : 'get',         //the METHOD of the request, like the method of the form
    url : 'index.php'     //the url to fetch
    data : {              //additional data which is synonymous to:
        query1 : 'foo',   // - url queries
        query2 : 'bar',   // - form inputs
        query3 : 'baz',
    },
    success : function(resposeText){   //response text is the raw source of the fetched resource
        $(element).html(responseText); //use response as HTML for element
    }
});

//this is similar to requesting:
http://example.com/index.php?query1=foo&query2=bar&query3=baz 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:06:43.127

同意约瑟夫。你可以通过javascript方式或jQuery使用ajax，我个人建议使用jQuery，因为它实现起来很简单。

```
$.ajax({
        type: 'GET',
        url: "URL you want to call" ,
        data: 'Data you want to pass to above URL',
        cache: true, //to enable cache in browser
        timeout: 3000, // sets timeout to 3 seconds
        beforeSend: function() {
             //when ur ajax call generate then u can set here loading spinner
        },
        error: function(){
             // will fire when timeout is reached
        },

        success: function(response){
            //in response you can get your response data from above called url.
        }
    }); 
```

# ios - iOS - 核心数据 - UITableView - 更新计算值 - NSFetchedResultsController

> ID：10768533
> 
> 赞同：0
> 
> 时间：2012-05-26T17:53:06.867
> 
> 标签：ios, uitableview, core-data, transient, nsfetchedresultscontroller

**概述**

*   我有一个使用核心数据（`NSFetchedResultsController`）和表格视图的 iOS 项目。我有一个名为“joingDate”的字段。

*   我在表格视图单元格上有一组标签来表示数据。

*   如果加入日期是今天/明天，那么我想显示为“今天”或“明天”，而不是指定实际日期。

*   我只是在想，我会检查 lastCheckedDate （上次检查日期的时间），如果超过一天，那么我将不得不更新行中的所有标签，这些标签具有加入日期和“今天”或“明天”。

*   在数据库中，“JoiningDate”将存储为日期，只有标签需要以特定格式显示“今天”/“明天”/日期。

我已经实现了以下方法，其中标签“joingDateComments”根据其当前日期进行更新。

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

**问题**

注意 - 我正在使用`NSFetchedResultsController`

1.  更新所有具有`joiningDate`今天/明天的行标签的最佳方法是什么？
2.  我应该重新加载表中的所有记录吗？（但这只会影响几行。）
3.  我是否应该遍历所有索引并检查和更新。我不确定这是否可行，因为我正在使用`NSFetchedResultsController`.
4.  我是否应该使用瞬态数据，以便我可以查询数据库并获取今天/明天具有“JoingDate”的记录并更新瞬态字段`JoingDateComments`，以便 NSFetchedResultsController 自动刷新这些记录

**回答：**

请仔细阅读安德鲁的评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T14:45:40.197

用户1046037，

这真的不是核心数据问题，而是 UITableView 问题。大多数事情都在该`-tableView:cellForRowAtIndexPath:`方法中处理。在那里，您将选择如何表示单元格。另一个地方是当`NSFetchedResultsController`你用改变的对象打电话给你的时候。（标准的核心数据表视图控制器为您编写了这个样板。）换句话说，您不必遍历所有对象。如果您希望对这些单元格的更新时间进行更精细的控制，您可以收听确实保存通知。然后在 tableView 中查询可见单元格的数组。然后可以使用单元格索引路径来更新单元格内容。

安德鲁

# python - Django 项目运行良好；重新打开并导入模块错误

> ID：10768537
> 
> 赞同：0
> 
> 时间：2012-05-26T17:53:43.403
> 
> 标签：python, django

我一直在做一个 Django 项目，这是我的第一个项目，没有任何问题。我关闭了文件并重新启动计算机以进行软件更新，现在我收到以下错误：

```
Traceback (most recent call last):
  File "manage.py", line 14, in <module>
    execute_manager(settings)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/__init__.py", line 436, in execute_manager
setup_environ(settings_mod)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/__init__.py", line 419, in setup_environ
    project_module = import_module(project_name)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
__import__(name)
ImportError: No module named Stentorian 
```

模块名称是项目的名称。我无法弄清楚导致此错误的可能原因。任何洞察力将不胜感激。

编辑：这是 Python sys.path：

```
['', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/distribute-0.6.24-    py2.7.egg', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PIL', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info', '/Library/Python/2.7/site-packages'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T06:00:44.313

确保这个`Stentorian`项目目录有一个`__init__.py`. 您可以在 Mac 上将父目录添加到`PYTHONPATH`环境变量中`~/.bash_profile`，也可以在`manage.py`脚本中附加目录。在您的 bash_profile 中，在 PYTHONPATH 上拥有 和 是非常习惯的`.`：`..`

```
 PYTHONPATH=.:..:/path/to/parent:${PYTHONPATH} 
```

或者，在 manage.py 脚本中：

```
import sys
sys.path.insert(0, '.')
sys.path.insert(0, '..') 
```

# php - 标头重定向非常时髦.. 发生了什么？

> ID：10768542
> 
> 赞同：1
> 
> 时间：2012-05-26T17:53:58.987
> 
> 标签：php, redirect

这真的很奇怪..我在文件中有以下重定向：

```
header('Location: http://google.com'); 
```

它不起作用。页面加载并且用户没有被重定向。但是，如果我在该行下方添加 die() 语句，如下所示：

```
header('Location: http://google.com');
die('what the heck is going on here?'); 
```

然后重定向神奇地开始工作！

我完全不知道为什么会发生这种情况，而且我不知道如何调试它。

任何人都可以给我任何建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T17:54:54.383

您应该在发送位置标头后退出。发送任何标头都不会影响脚本的流程，因此它之后的任何代码仍会执行。如果有任何事情导致设置不同的响应状态代码，则根本不会发生重定向。

标`Location`头本身什么也不做——只有与正确的 30x 响应代码一起，它才会导致重定向。PHP 在发送`Location`标头时手动设置此响应代码，但您的代码可能会修改它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T17:57:16.023

可能您的脚本在标头调用之后没有结束。确保结束脚本。

# web-applications - Web 应用程序、基于 Web 的应用程序和云应用程序之间的区别

> ID：10768543
> 
> 赞同：2
> 
> 时间：2012-05-26T17:54:06.520
> 
> 标签：web-applications, cloud

嗨，这是一个理论问题，但我真的无法弄清楚 Web 应用程序、基于 Web 的应用程序和基于云的应用程序之间的区别。这个你能帮我吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T18:09:37.787

@Matt 是对的 - 这真的没关系，但是，为了清楚起见，这是我的定义：

*   网络应用程序 - 在浏览器中运行的应用程序，它不是*网页*，这意味着它可以*做一些事情*- 例如，允许您分享照片
*   基于 web 的应用程序 - 如上所述，但您可以认为重点是*web*，这意味着该应用程序不能离线工作
*   基于云的应用程序——这里的重点是应用程序的逻辑（*服务器端*）使用某种形式的 SaaS/PaaS/IaaS，例如 Google App Engine、Amazon EC2、Microsoft Azure 或 VMWare Cloud Foundry。此术语也不表示该应用程序在浏览器中工作 - 它可能是本机移动（Android、iOS、WP7）应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-01T16:46:03.787

真的很欣赏你的两个答案。只是想用@Grzegorz Grzybek 和@flamesavor 加点-

云模型由 5 个基本特征、3 个服务模型和 4 个部署模型组成。

扩展特征模型-

*   广泛的网络访问
*   快速弹性
*   测量服务
*   按需自助服务
*   资源轮询

# xamarin.android - 在 Mono for android 中加载程序集时出错

> ID：10768547
> 
> 赞同：0
> 
> 时间：2012-05-26T17:55:02.467
> 
> 标签：xamarin.android

Mono for android 工作得很好，但是在电脑重启后，我的项目出现以下错误？错误标题只是“错误加载程序集”，详细信息如下图所示。

![在此处输入图像描述](../Images/ab6757dd4e4f3ab5d66834b2ce4d27b9.png)

知道可能是什么原因吗？这发生在 monodroid 4.2.2 中，它发生在模拟器和物理 android 上：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:55:14.753

通过 xamarin 论坛，我发现在 Visual Studio 中清理解决方案可以解决此问题。希望这对其他人有帮助。

# php - 使用 cakephp 检查控制器中的用户身份验证

> ID：10768551
> 
> 赞同：0
> 
> 时间：2012-05-26T17:55:21.743
> 
> 标签：php, cakephp

我正在为 cakephp 编写博客/用户身份验证教程，并尝试添加一些功能来掌握事情的窍门。我现在在这个身份验证页面上 [http://book.cakephp.org/2.0/ en/tutorials-and-examples/blog-auth-example/auth.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)

我试图仅在用户登录时显示注销链接，仅在用户注销时显示登录链接。我正在尝试遵循这篇文章[CakePHP 检查用户是否在视图中登录](https://stackoverflow.com/questions/5901685/cakephp-check-if-user-is-logged-in-inside-a-view)的建议，但我有点困惑。

**编辑-为了确保正确找到我的 authuser，我只需在其中放置一个 echo“test”语句。链接工作正常，但是，当我删除 echo 语句时，即使我已登录，链接也只会显示登录名。我无法弄清楚为什么链接只有在我在元素中回显某些内容时才能正常工作。**

所以，在我的帖子/索引页面上，我有以下内容

```
<?php
if($this->element('authuser') == TRUE){   
?>
    <p><?php echo $this->Html->link('Log In', array('controller'=>'users','action' => 'login')); ?></p>
<?
}
   else{ 
?>
    <p><?php echo $this->Html->link('Log Out', array('controller'=>'users','action' => 'logout')); ?></p>
<?
}
?> 
```

我的元素 authuser.ctp 包含

```
<?
 $authuser = AuthComponent::user();

if($authuser){
  RETURN TRUE;
}
 echo "test"; //when this is commented out the link on posts/index only displays login
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T18:00:30.310

您始终可以通过调用静态方法来查看当前登录的用户

```
$authUser = AuthComponent::user(); 
```

通过这种方式，您可以在任何地方获取当前登录的用户，而不是从操作中传递它。

无论如何，我建议您将此逻辑添加到[元素中](http://book.cakephp.org/2.0/en/views.html)并重用它。

# sql - 将返回的 SQL 查询行的内容复制到列表框或数组

> ID：10768552
> 
> 赞同：0
> 
> 时间：2012-05-26T17:55:23.777
> 
> 标签：sql, visual-studio-2010, ado.net, vb.net-2010

**tl;dr**将 SQL 查询的内容复制到数组或字符串或列表框的方法。单列，多行。

从事一个小项目以获得额外的课程学分。目前在 Visual Studio 2010 中开发。本质上是一个交互式菜单，用户可以在其中选择项目并将它们添加到内置列表中，它将计算总营养信息和成本等。

但是我有一个问题。当用户到达订单构建器页面时，他们可以选择他们想要购买的商品类型。

例如

牛肉

单击此按钮应该会填充一个包含所有相关项目的列表框。

我希望通过数据库连接来做到这一点。我目前有一个嵌入式数据库。

我尝试过两种方法，但都证明不成功，或者我只是做错了。

第一种方法。

```
 Dim index As Integer = 0
    Dim length As Integer = adapter.productscounter()
    ' Small query that works out total number of rows.

    For index = 0 To length
        ListBox1.Items.Add(adapter.SelectBeef(index))

    Next 
```

这给了我错误：

> 位置 0 处没有行。

我似乎无法解决。该查询在试用执行时运行，而他们的东西是他们的。

> 索引超出范围异常

我尝试的另一种方法是类似的代码，但是使用一个数组，然后将其内容复制到列表框中。

```
 Dim index As Integer
    Dim test(5)
    Dim length As Integer = adapter.productscounter()
    Dim counter As Integer

    For index = 0 To length

        test(index) = adapter.SelectChicken()
        counter = counter + 1

    Next

    For counter = 0 To length
        ListBox1.Items.Add(test(index))

    Next 
```

生成：

```
Argument nullexception 

Value cannot be null.
Parameter name: item. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:38:12.540

在 Visual Basic 中，标准是从元素 1 开始列表，而不是元素 0。您可以尝试：

```
For index = 1 To length
    ListBox1.Items.Add(adapter.SelectBeef(index))
Next 
```

当然，我不知道该`SelectBeef`方法的作用。

# c# - 2 富文本框中的列

> ID：10768553
> 
> 赞同：0
> 
> 时间：2012-05-26T17:55:25.947
> 
> 标签：c#, winforms, richtextbox

我正在为一本书的软拷贝设计一个获胜表格。问题是这本书是 diglot（两种不同的语言）版本，我需要在一个文本框中给出 2 列。目前我没有提供任何列，而是一个单选按钮来选择语言。

但我认为为每种语言提供一个带有一列的单个文本框会更好。书中也有一些文本只有一种语言，所以我需要在文本的某些部分提供列。这些列应引用不同的 rtf 文件。我尝试了两个带有 [同步滚动条](https://stackoverflow.com/questions/10266625/same-scroll-bar-for-two-richtextboxes)的不同文本框，但效果不佳。在 rtf 文件中创建列不会在richtextbox 中创建列。

关于我应该如何进行的任何想法。是否有第三方工具可以为我提供这种灵活性。

# visual-c++ - 如何从映射的枚举中正确重载 <<？

> ID：10768554
> 
> 赞同：0
> 
> 时间：2012-05-26T17:55:32.993
> 
> 标签：visual-c++

我正在使用状态机来学习 C++，并且我想提供一个重载`operator <<`来返回相应的字符串而不是一个 int。道歉的长度...

```
#ifndef STATEMACHINE_H
#define STATEMACHINE_H

#include <map>
#include <string>

namespace statemachine{
    using namespace std;

    enum State { ON, RESTING, SLEEPING, LOCKED, OFF };

    struct StateMap : map<unsigned int, string>
    {
        StateMap()
        {
            this->operator[]( ON ) = "ON";
            this->operator[]( RESTING ) = "RESTING";
            this->operator[]( SLEEPING ) = "SLEEPING";
            this->operator[]( LOCKED ) = "LOCKED";
            this->operator[]( OFF ) = "OFF";
        };

        ~StateMap(){};
    };

struct Machine {

    Machine(State state) : statemap() {
        m_currentstate = state;
    }

    //  trying to overload the operator -- :(
    //  Error   1   error C2676: binary '<<' : 'std::ostream' does not define this operator or a 
    //  conversion to a type acceptable to the predefined operator **file** 38 1 statemachine_01
    ostream& operator << (ostream& stream){
        stream << statemap[m_currentstate];
        return stream;
    }

    State state() const {
        return m_currentstate;
    }

    void set_state(State state){
        m_currentstate = state;
    }

private:
    State m_currentstate;
    StateMap statemap;
};

}

#endif 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:00:17.113

您正在定义`operator <<`成为 的成员`Machine`。这意味着它必须像这样调用：

```
machine << stream; 
```

代替：

```
stream << machine; 
```

您需要将 定义`operator`为自由函数，以便能够以正确的顺序获取参数。例如，你可以把它变成一个`friend`函数：

```
friend ostream& operator << (ostream& stream, Machine const& m){
    stream << m.statemap[m.m_currentstate];
    return stream;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T18:00:17.267

它不必对重载做任何事情（好吧，也许有点）。

这个说法

```
stream << statemap[m_currentstate]; 
```

失败，因为您尚未定义如何将 StateMap 应用于 <<。

[你也必须在 statemap 类中重载 <<。]

抱歉，您需要一个独立的功能，而不是方法，请参阅其他答案。

# javascript - 是否有开源或其他 asp.net javascript api 来为调查问题类型生成 html 元素

> ID：10768564
> 
> 赞同：0
> 
> 时间：2012-05-26T17:58:05.820
> 
> 标签：javascript, asp.net, asp.net-mvc-3, frameworks, survey

我希望这个问题不会令人困惑。但我需要生成 HTML 代码以在客户端生成调查表（使用 javascript 或作为最后的手段，将 ajax 回调到服务器），然后存储在服务器端。用户必须能够通过首先选择问题类型来添加问题。类型是多项选择（用户可以添加任意数量的选项）和数字（带有 min 和 max 参数）。

我发现了一堆开源 asp.net 表单控件，它们实现了 ajax 回调以生成 HTML，但对于 MVC3 却没有。我真的不想在我的 MVC3 项目中实现这两个 aspx 页面，所以表单组件是不可行的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:56:46.980

我认为你不需要做 ajax 回调，jquery 可以很容易地为你处理它。此链接可能对您有用：

[http://www.bluelemoncode.com/post/2011/11/30/Adding-HTML-control-dynamically-using-jQuery.aspx](http://www.bluelemoncode.com/post/2011/11/30/Adding-HTML-control-dynamically-using-jQuery.aspx)

或者，如果您在谷歌上搜索“jquery add control dynamic”，您会得到很多好帖子，稍后当您需要保存时，您可以对 Web 服务进行基于 JQuery 的调用并保存您的数据。

# php - 无法在视图中使用变量

> ID：10768565
> 
> 赞同：0
> 
> 时间：2012-05-26T17:58:07.453
> 
> 标签：php, model-view-controller, scope

我正在构建自己的 MVC 框架，并且在将变量发送到视图时遇到了问题。`loadView()`看起来像这样：

```
function loadView($view, $variables = array())
{
    $file_path = APPLICATION_PATH . 'views/' . $view;

    if (file_exists($file_path))
    {
        if (is_readable($file_path))
        {
            if (! empty($variables)) extract($variables);
            include($file_path);
        }
        else
        {
            throw new Exception('Could not read view from ' . $file_path);
        }
    }
    else
    {
        throw new Exception('Could not load view from ' . $file_path);
    }
} 
```

它按预期工作。但是，当我设置这样的模板视图时，事情变得很奇怪：

```
loadView('layout/header.php');
loadView($view);
loadView('layout/footer.php'); 
```

它是这样调用的（`$user`是一个对象）：

```
$data['view'] = 'login/showUser.php';
$data['user'] = $user;
loadView('layout/template.php', $data); 
```

该`$view`变量在模板文件中设置并加载正确的视图。但是，该`$user`变量无法进入仅包含以下代码的动态加载视图：

```
<p>User ID: <?php echo $user->id; ?></p> 
```

我可以在 CodeIgniter 中执行此操作，但我觉得这有点奇怪，因为在第一次调用模板时提取`$view`和`$user`变量时`loadView()`，它们应该可用于下一个视图，该视图只是包含在范围中。

我忽略了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:20:07.760

每个 loadView() 调用都有自己的本地范围，在 loadView() 的不同调用之间不共享。在 CodeIgniter 中，这可能有效，因为它的视图渲染器将变量存储在一些静态存储中。您需要在每个视图中显式传递您需要的所有变量，或者您需要将静态存储添加到 loadView()，如下所示：

```
function loadView($view, $variables = array())
{
    static $static_vars = array();
    $static_vars = array_merge($static_vars, $variables);
    ...
    extract($static_vars); // instead of extract($variables);
    ... 
```

# sql - sql按房间类型计数

> ID：10768566
> 
> 赞同：0
> 
> 时间：2012-05-26T17:59:01.280
> 
> 标签：sql, sql-server-2008

我有以下表格结构，我想从预订表中计算所有房间类型。我想要这样的东西： Roomtype :double 3 :simple 5 这有可能吗？

![在此处输入图像描述](../Images/c3cabd8ff95a8921c6dca76bfb60331a.png)

我只计算了预订表中的所有房间

`SELECT COUNT(Room_ID)AS NumarRezervari FROM dbo.Reservation WHERE MONTH(Data_Check_in)=5`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T18:06:49.957

```
SELECT Room_Type, COUNT(*) AS NumarRezervari
FROM   dbo.Reservation re
JOIN   dbo.Room ro ON ro.RoomID = re.RoomID
JOIN   dbo.Room_Type rt ON rt.Room_Type_ID = ro.Room_Type_ID
WHERE  MONTH(re.Data_Check_in) = 5
GROUP  BY Room_Type 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T18:05:06.230

您需要使用一个`GROUP BY`子句和几个连接，如下所示：

```
SELECT Room_Type, count(*) FROM Reservation rv
INNER JOIN Room rm ON rm.Room_ID = rv.Room_ID
INNER JOIN Room_Type rt ON rm.RoomType_ID = rt.RoomType_ID
GROUP BY Room_Type 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T18:06:52.290

如果您想计算房间类型的数量，我认为您可以执行以下操作：

```
select count (Room_Type_Id) from Room_Type
inner join Room on Room.Room_Type_ID = Room_Type.RoomType_ID 
inner join Reservation on Reservation.Room_ID = Room.RoomID 
where ... 
```

# c# - Graphic - DrawLine - 画线并移动

> ID：10768570
> 
> 赞同：10
> 
> 时间：2012-05-26T17:59:38.297
> 
> 标签：c#, .net, animation, drawing

在我的 .net c# 程序中，我使用文本框中的值绘制了几行（我使用 DrawLine 函数）。我希望能够通过单击它来移动其中一条线并用鼠标移动这条线 - 有可能吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-26T23:46:45.750

![线移动](../Images/1ec22d46e87a4e505a6d3f45e334b05a.png)

```
public class LineMover : Form
{
  public LineMover()
  {

    this.DoubleBuffered = true;

    this.Paint += new PaintEventHandler(LineMover_Paint);
    this.MouseMove += new MouseEventHandler(LineMover_MouseMove);
    this.MouseDown += new MouseEventHandler(LineMover_MouseDown);
    this.MouseUp += new MouseEventHandler(LineMover_MouseUp);

    this.Lines = new List<GraphLine>()
    {
      new GraphLine (10, 10, 100, 200),
      new GraphLine (10, 150, 120, 40),
    };
  }

  void LineMover_MouseUp(object sender, MouseEventArgs e)
  {
    if (Moving != null)
    {
      this.Capture = false;
      Moving = null;
    }
    RefreshLineSelection(e.Location);

  }

  void  LineMover_MouseDown(object sender, MouseEventArgs e)
  {
    RefreshLineSelection(e.Location);
    if (this.SelectedLine != null && Moving == null)
    {
      this.Capture = true;
      Moving = new MoveInfo 
       {
          Line = this.SelectedLine, 
          StartLinePoint = SelectedLine.StartPoint, 
          EndLinePoint = SelectedLine.EndPoint, 
          StartMoveMousePoint = e.Location 
       };
    }
    RefreshLineSelection(e.Location);
  }

  void LineMover_Paint(object sender, PaintEventArgs e)
  {
    e.Graphics.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.High;
    e.Graphics.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
    foreach (var line in Lines)
    {
      var color = line == SelectedLine ? Color.Red : Color.Black;
      var pen = new Pen(color, 2);
      e.Graphics.DrawLine(pen, line.StartPoint, line.EndPoint);
    }
  }
  void LineMover_MouseMove(object sender, MouseEventArgs e)
  {
    if (Moving != null)
    {
      Moving.Line.StartPoint = new PointF(Moving.StartLinePoint.X + e.X - Moving.StartMoveMousePoint.X, Moving.StartLinePoint.Y + e.Y - Moving.StartMoveMousePoint.Y);
      Moving.Line.EndPoint = new PointF(Moving.EndLinePoint.X + e.X - Moving.StartMoveMousePoint.X, Moving.EndLinePoint.Y + e.Y - Moving.StartMoveMousePoint.Y);
    }
    RefreshLineSelection(e.Location);
  }

  private void RefreshLineSelection(Point point)
  {
    var selectedLine = FindLineByPoint(Lines, point);
    if (selectedLine != this.SelectedLine)
    {
      this.SelectedLine = selectedLine;
      this.Invalidate();
    }
    if (Moving != null)
      this.Invalidate();

    this.Cursor =
        Moving != null ? Cursors.Hand :
        SelectedLine != null ? Cursors.SizeAll :
          Cursors.Default;

  }

  public List<GraphLine> Lines = new List<GraphLine>();
  GraphLine SelectedLine = null;
  MoveInfo Moving = null;

  static GraphLine FindLineByPoint(List<GraphLine> lines, Point p)
  {
    var size = 10;
    var buffer = new Bitmap(size * 2, size * 2);
    foreach (var line in lines)
    {
      //draw each line on small region around current point p and check pixel in point p 

      using (var g = Graphics.FromImage(buffer))
      {
        g.Clear(Color.Black);
        g.DrawLine(new Pen(Color.Green, 3), line.StartPoint.X - p.X + size, line.StartPoint.Y - p.Y + size, line.EndPoint.X - p.X + size, line.EndPoint.Y - p.Y + size);
      }

      if (buffer.GetPixel(size, size).ToArgb() != Color.Black.ToArgb())
        return line;
    }
    return null;
  }

  public static void Main()
  {
    Application.Run(new LineMover());
  }
}

public class MoveInfo
{
  public GraphLine Line;
  public PointF StartLinePoint;
  public PointF EndLinePoint;
  public Point StartMoveMousePoint;
}
public class GraphLine
{
  public GraphLine(float x1, float y1, float x2, float y2)
  {
    this.StartPoint = new PointF(x1, y1);
    this.EndPoint = new PointF(x2, y2);
  }
  public PointF StartPoint;
  public PointF EndPoint;
} 
```

# c++ - 类、指针、向量和删除

> ID：10768573
> 
> 赞同：1
> 
> 时间：2012-05-26T18:00:14.040
> 
> 标签：c++, pointers, memory-management, vector

假设我有：

```
class A {
public:
    A(HWND hwnd, HWND hwnd2);
    ~A();

    int  i;
    HWND hwndFrame;
    HWND hwndCanvas;
    bool bool;

};

class B {
public:
    B(HWND hwnd);
    ~B();

    HWND hwndFrame;
    Vec<A *> vecA;  // class Vec is implemented by someone else.

}; 
```

假设我创建了：

```
A * elementA1 = new A(...);
A * elementA2 = new A(...);
B * element B = new B(...);
B->vecA.Append(A1);
B->vecA.Append(A2); 
```

在某些时候，我想删除所有上述对象（因此它们不再存在于内存中）。

我很困惑如何去做。

我的问题是：

1.  如果我放入`delete hwndFrame`析构函数`~A();`，那么当我做的时候`delete A`，做`hwndFrame`真的被删除了吗？

2.  在析构函数`~B()`中，为了`delete`（从内存中）向量`B->vecA`及其元素指向的内容，即`A1`和`A2`指向的内容，我必须做些什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T18:03:57.940

> 如果我把delete hwndFrame放在析构函数~A();中，那么当我delete A时，hwndFrame真的被删除了吗？

您不应该尝试删除 a `HWND`，它是一个不透明的指针句柄。您可以改为调用类似`DestroyWindow`或类似的功能，具体取决于您真正想做的事情。

> 在析构函数~B() 中，为了（从内存中）删除向量B->vecA 及其元素指向的内容，即A1 和A2 指向的内容，我必须做些什么。

您必须遍历每个向量的每个元素，并调用`delete`它们中的每一个。

# php - 如何解决“在 PHP 5.4 中不应静态调用非静态方法 xxx:xxx()？

> ID：10768576
> 
> 赞同：32
> 
> 时间：2012-05-26T18:00:29.197
> 
> 标签：php, static-methods

目前在PHP中使用一个大平台。

它托管的服务器最近已升级到 PHP 5.4。

从那以后，我收到了许多错误消息，例如：

> [2012 年 5 月 26 日星期六 19:04:41] [错误] PHP 严格标准：不应静态调用非静态方法 Config::getData()，假设 $this 来自 /xxx/Config.inc.php 中的不兼容上下文第 35 行

示例方法定义为（注意缺少“静态”关键字）：

```
function &getData() {
            $configData =& Registry::get('configData', true, null);

    if ($configData === null) {
        // Load configuration data only once per request, implicitly
        // sets config data by ref in the registry.
        $configData = Config::reloadData();
    }

    return $configData;
} 
```

这之前没有引起问题，我认为错误消息（导致应用程序崩溃）可能与最近升级到 PHP5.4 有关。

是否有可以修改为“忽略”缺少静态关键字的 PHP 设置？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-26T18:15:31.863

`E_STRICT`如果需要静态调用，您可以从中删除`error_reporting()`，也可以简单地将方法设为静态。据我所知，没有（严格的）方法可以拥有可以作为静态和非静态方法调用的方法。此外，更烦人的是，您不能有两个同名的方法，一个是静态的，另一个是非静态的。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-03-02T14:08:38.227

禁用警报消息不是解决问题的方法。尽管 PHP 核心仍在继续工作，但它做出了危险的假设和行动。

**永远不要忽略 PHP 应该做出假设的错误！！！！**

**如果该类**组织为单例，您始终可以使用函数 getInstance() 然后使用 getData()

喜欢：

```
$classObj = MyClass::getInstance();
$classObj->getData(); 
```

如果该类不是单例，请使用

```
 $classObj = new MyClass();
 $classObj->getData(); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-05-15T23:05:32.383

我不建议您只是隐藏项目中的严格错误。Intead，您应该将您的方法转换为静态或尝试创建对象的新实例：

```
$var = new YourClass();
$var->method(); 
```

自 PHP 5.4 起，您也可以使用新的方法来做同样的事情：

```
(new YourClass)->method(); 
```

我希望它对你有帮助！

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2015-03-02T13:53:03.523

我用一个代码行解决了这个问题，如下所示： 在文件 index.php 中，在模板根目录下，在此代码行之后：

定义（'_JEXEC'）或死（'限制访问'）；

粘贴这一行： ini_set ('display_errors', 'Off');

别担心，开心就好...

由杰尼奥发布。

# php - 这个循环有更好的解决方案吗？

> ID：10768578
> 
> 赞同：0
> 
> 时间：2012-05-26T18:00:38.987
> 
> 标签：php

我正在制作一个基本上显示随机图像的网站，但我需要更好的代码来说明我目前拥有的内容。我希望有人能提出更好的解决方案。

```
$p = $_GET["p"];
$qrynumrows = mysql_query("SELECT * FROM pictures");
$numrows = mysql_num_rows($qrynumrows);

if (!isset($p)) {
    $randid = rand(1, $numrows);
    $qryrecord = mysql_query("SELECT * FROM pictures WHERE id='$randid'");

    while ($row = mysql_fetch_array($qryrecord)) {
        $rowp = $row["p"];
        $rowremove = $row["remove"];
    }

    if ($rowremove == 1) {
        header("Location: http://www.lulzorg.com/");
        exit();
    }
    else {
        header("Location: http://www.lulzorg.com/?p=$rowp");
        exit();
    }       
} 
```

所以它正在做的是从数据库中选择一条随机记录，但它需要检查该记录是否被允许。这段代码工作得很好，但我确信有更好/更快的方法来做到这一点。

如果 $rowremove 等于 0，则允许显示图像。如果 $rowremove 等于 1，则不允许显示图像。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:06:15.970

ID 不一定是连续的，因此您获取随机行的方式很可能会被破坏。

获得单个随机行的最简单方法是：

```
SELECT ... FROM ... WHERE remove = 0 ORDER BY rand() LIMIT 1 
```

由于您只得到一行，因此不需要循环：

```
$row = mysql_fetch_assoc($qryrecord); 
```

然后简单地使用`$row['p']`if `$row != false`：

```
header("Location: http://www.lulzorg.com/?p='.$row['p']);
exit; 
```

这是您需要的全部代码：

```
$p = isset($_GET['p']) ? $_GET['p'] : 0;
if (!$p) {
    $qryrecord = mysql_query("SELECT * FROM pictures WHERE remove = 0 ORDER BY rand() LIMIT 1");

    $row = mysql_fetch_assoc($qryrecord);
    if(!$row) {
        // No valid row. Do something.
        exit;
    }
    header('Location: http://www.lulzorg.com/?p=' . $row['p']);
    exit;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T18:06:39.567

无需生成随机 ID，只需在按 . 排序结果后选择第一行`RAND()`。此外，检查行中的`NOT remove`（等价于`remove = 0`）以消除单独检查行的需要。

```
$p = $_GET["p"];

if (is_int($p))
{
    $qryrecord = mysql_fetch_row(mysql_query("SELECT p FROM pictures WHERE NOT remove ORDER BY RAND() LIMIT 1"));
    $rowp = $qryrecord[0];
    header("Location: http://www.lulzorg.com/?p=$rowp");
    exit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T18:03:02.290

```
SELECT * FROM pictures WHERE id='$randid' AND rowremove == 0 
```

有了这个，你的整个事情可以很容易地重写为：

```
$p = $_GET["p"];

if (!isset($p)) 
{
    $randid = rand(1, $numrows);
    $qryrecord = mysql_query("SELECT * FROM pictures WHERE id='$randid' AND rowremove == 0");
    $row = mysql_fetch_array($qryrecord);

    if($row)
    {
        $rowp = $row["p"];
        header("Location: http://www.lulzorg.com/?p=$rowp");
        exit();
    }
    header("Location: http://www.lulzorg.com/");
} 
```

# php - php Codeigniter - 执行库 Subquery.php 时出错

> ID：10768582
> 
> 赞同：0
> 
> 时间：2012-05-26T18:01:09.337
> 
> 标签：php, codeigniter, subquery

我一直在使用子查询库 - Subquery.php 参考：[https ://github.com/NTICompass/CodeIgniter-Subqueries](https://github.com/NTICompass/CodeIgniter-Subqueries)

```
$this->db->select('test');
$this->db->select('test2');
$this->db->from('table');
$sub = $this->subquery->start_subquery('where_in');
$sub->select('IDs');
$sub->from('idTable');
$sub->where('date', '2011-07-10');
$this->subquery->end_subquery('id'); 
```

我认为这种说法：

```
$sub = $this->subquery->start_subquery('where_in'); 
```

包含错误。当我执行这一行时，我得到一个空白页。fn。start_subquery 是：

```
function start_subquery($statement, $join_type = '', $join_on = 1){
        $db = $this->CI->load->database('', true); // after executing this statement, a blank page shows...
        $this->dbStack[] = $db;
        $this->statement[] = $statement;
        if(strtolower($statement) == 'join'){
            $this->join_type[] = $join_type;
            $this->join_on[] = $join_on;
        }
        return $db;
    } 
```

仅供参考 - 在我的 database.php 中：

```
$active_group = 'default'
$active_record = TRUE; 
```

CI版本是2.1.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:59:59.117

嗯，明白了。当我在第 27 行看到子查询的源代码时，它想要调用`_compile_select`or `get_compiled_select`。如果您可以签入 CI `DB_active_rec.php`，`_compile_select`则受保护，因此您无法从 Subquery 访问（它不是 的子类`db`）。

可能的解决方案：`_compile_select()`public 或 class`Subquery`应该是 CI 的 db 类的扩展。我认为您应该将此报告给子查询的作者。

或者您可以扩展 CI 的 db 类:)

对不起 - 我想把它写成评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:20:41.100

谢谢，我已经改变了stmt。`class Subquery`在`class Subquery extends CI_DB_active_record`Subquery.php 中，它工作正常。是的，我会向作者报告。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T17:22:59.393

我写了那个库，所以感谢您使用它。问题是（正如[@uzsolt 所说](https://stackoverflow.com/a/10793787/206403)）`_compile_select`是受保护的。它曾经不在 CodeIgniter 1.7.x 中（它只是一些开发人员发现的一种巧妙的隐藏方法）。

在 GitHub ( [https://github.com/EllisLab/CodeIgniter](https://github.com/EllisLab/CodeIgniter) ) 上的 CodeIgniter 开发版中，有一个公共`get_compiled_select`方法。似乎此更改尚未推送到稳定版本。

因此，要让这个库正常工作，您可以尝试使用 CodeIgniter 的开发版本。我很确定他们`extend CI_DB_active_record`将来会删除该功能（[http://codeigniter.com/user_guide/general/creating_libraries.html](http://codeigniter.com/user_guide/general/creating_libraries.html)）。

# python - 使用 python -c 执行在命令行中作为字符串传递的 python 命令

> ID：10768584
> 
> 赞同：44
> 
> 时间：2012-05-26T18:01:22.883
> 
> 标签：python

是否可以使用 python -c 执行作为字符串传递的 python 命令？有人可以举个例子。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2015-06-07T05:47:51.840

你可以`-c`用来让 Python 执行一个字符串。例如：

`python3 -c "print(5)"`

但是，似乎没有办法使用转义字符（例如`\n`）。因此，如果您需要它们，请使用来自`echo -e`or的管道`printf`。例如：

`$ printf "import sys\nprint(sys.path)" | python3`

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-05-26T18:19:12.677

对于*单个字符串*，您可以使用`python -c`. 但是对于问题所要求的*字符串*，您必须将它们传递给标准输入：

```
$ python << EOF
> import sys
> print sys.version
> EOF
2.7.3 (default, Apr 13 2012, 20:16:59) 
[GCC 4.6.3 20120306 (Red Hat 4.6.3-2)] 
```

# ruby - 无法在 Mac 上为 ruby 安装 mechanize

> ID：10768586
> 
> 赞同：1
> 
> 时间：2012-05-26T18:01:52.527
> 
> 标签：ruby, rubygems, gem, nokogiri, mechanize

我正在尝试在带有 ruby​​ 版本 1.8.7 的 Mac OS X 版本 10.7.3 上安装 mechanize。问题在于它的依赖项之一 nokogiri。我看过其他关于安装 xcode 的帖子，我这样做是 4.3.2 版本。这是我收到的错误。先感谢您。

```
sudo gem install mechanize
Building native extensions.  This could take a while...
ERROR:  Error installing mechanize:
ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
mkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/nokogiri-1.5.2 for inspection.
Results logged to /Library/Ruby/Gems/1.8/gems/nokogiri-1.5.2/ext/nokogiri/gem_make.out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T22:37:09.260

我只需要简单地为 xcode 安装命令行工具，它就很顺利。必须编译 nokogiri gem。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:09:19.837

那这个呢：

点安装机械化

或者

easy_install 机械化

# ios - 当表格有更多时，从视图中选择只给我 5 行

> ID：10768587
> 
> 赞同：0
> 
> 时间：2012-05-26T18:01:57.800
> 
> 标签：ios, sqlite

我在我的 iPhone 应用程序中使用 SQLite。

我试过这个

```
SELECT * 
FROM Table_1; 
```

响应包含 5 行，但表有 30 行；为什么会这样？

# javascript - Backbone js 并使用 fetch() 使用数据填充模型

> ID：10768595
> 
> 赞同：3
> 
> 时间：2012-05-26T18:03:14.040
> 
> 标签：javascript, jquery, ajax, backbone.js

我在 Backbone js 中工作，我正在尝试使用 fetch 用数据填充模型。问题是提取似乎正在工作，但我的模型没有填充数据。

代码片段：

```
Backbone.emulateHTTP = true;
    Backbone.emulateJSON = true;

    ComponentsModel = Backbone.Model.extend({

        initialize : function() {

        },
        defaults : {
            component_id : null
        },
        urlRoot : "/components/ajax_component",

    });

    ComponentsView = Backbone.View.extend({
        el : $('body'),

        events : {
            'change #component-selector' : 'changeComponent',
        },

        initialize : function() {
            _.bindAll(this, 'render', 'changeComponent');
            this.render();
        },

        changeComponent : function(e) {
            var clickedEl = $(e.currentTarget);
            var value = clickedEl.attr("value");
            var component = new ComponentsModel({id :value, component_id :value });
            component.fetch();
            component.toJSON();
            alert(component.get('component_name'));

        },

        render : function() {

        },
    }); 
```

从服务器返回的 JSON 如下所示：

```
{"component_id":"1","component_name":"Test Component 1","component_description":"A simple test component","component_required":"","user_id":"1","component_approved":"0","component_price":"0","component_overview":"'"} 
```

警报始终未定义。我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T18:57:07.537

Fetch 是异步的，这就是它有`success`回调`error`的原因。因此，不确定在您尝试获取属性时是否已获取数据。试试这个：

```
component.fetch({
   success: function(){
       // Now you got your data
   }}); 
```

# javascript - 如何使用 JavaScript 浏览网页中的嵌入式资源？

> ID：10768597
> 
> 赞同：0
> 
> 时间：2012-05-26T18:03:44.960
> 
> 标签：javascript, html, dom, html-parsing

我希望能够逐步浏览网页中的每个嵌入资源——CSS 样式表、外部 JavaScript 文件、图像、iframe 等——然后用 JavaScript 对它们做一些事情。

我可以分别针对它们，但我想知道是否没有更通用的方法。一些内置方法或库，可让您遍历 DOM 并与这些类型的嵌入式资源进行交互。

在那儿？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:19:55.137

收集 DOM 元素的方法有[很多](https://developer.mozilla.org/en/DOM/document#Methods)，但最常见的有以下几种：

```
document.body
document.getElementById()
document.getElementsByTagName()
document.getElementsByClassName()
document.querySelectorAll() 
```

* * *

如果你想获得所有元素，没有正式的结构，你可以这样做：

```
//non-standard
document.all

//or
document.getElementsByTagName('*'); 
```

此外，还有[Sizzle](http://sizzlejs.com/)，它是 jQuery 使用的选择器引擎。它使用 CSS 选择器来定位元素。或者如果可能的话，使用 jQuery，它承载了很多 DOM[遍历](http://api.jquery.com/category/traversing/)和[操作](http://api.jquery.com/category/manipulation/)方法。

# ruby-on-rails - 将类分配给简单形式

> ID：10768599
> 
> 赞同：0
> 
> 时间：2012-05-26T18:03:48.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

我试图将自定义类分配给我的 simple_form 元素以使用 CSS 进行修改，但它只是不起作用.. 遵循文档，类似于

```
<%= f.input :username, :input_html => { :class => 'special' } %> 
```

应该工作，但不...

有什么线索吗？谢谢！！！

PS-这一行在嵌套的“f.simple_fields_for”中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:09:52.903

如果您嵌入在 a`fields_for`那么它应该是

```
<%= simple_for_object @object do |f| %>
  <%= f.simple_fields_for :fields do |field| %>
    <%= field.input :username, :input_html => {:class => 'special'} %>
  <% end %>
<% end %> 
```

我通常使用haml，所以我的erb可能有点偏。但想法是，如果您在一个`fields_for`块中，则需要使用该块的块变量，而不是父表单块的变量。

# perl - 如何通过对 Perl 变量的引用来更改它？

> ID：10768602
> 
> 赞同：1
> 
> 时间：2012-05-26T18:04:16.440
> 
> 标签：perl, reference

为什么会这样打印`8`？为什么不`$e`改`$i`？

```
my $i = 8;

sub u
{
    return \$i;
}

my $e = u();
$e = "eer";
print $i; #8 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T18:07:19.667

引用不是别名。您必须明确取消引用它们。

```
$$e = "eer"; # Store 'eer' into the variable referenced by $e 
```

不一样

```
$e = 'eer'; # Store 'eer' into $e, discarding its previous content 
```

# c# - 使用 PowerShell 在远程计算机上启动监视应用程序时的性能计数器访问

> ID：10768605
> 
> 赞同：1
> 
> 时间：2012-05-26T18:05:36.440
> 
> 标签：c#, powershell, performancecounter, winrm

我有一个 C# 进程，作为其角色的一部分，它从一组 Windows Server 2008R2 机器中读取性能计数器。所有机器都在一个公司的 AD 域中并且在同一个网络上。如果我登录到服务器计算机并从我的登录会话中运行 C# 进程，该程序可以正常工作。我现在正在尝试使用带有 powershell 的这个 C# 进程来自动化一些实验。目标是在其中一台服务器上从我的桌面远程启动它。所有机器都在同一个域中（桌面和服务器）。

所有机器都设置了：

```
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned
Configure-SMRemoting.ps1 -force -enable 
```

powershell 脚本正在创建一个 PsSession 以连接到运行 C# 进程并使用 invoke-command 启动它的机器。但是，远程主机上的 C# 应用程序无法再访问它监视的设置机器上的性能计数器：-“访问被拒绝”。

怀疑这是一个多跳认证问题，我按照这些说明[http://www.ravichaganti.com/blog/?p=1230](http://www.ravichaganti.com/blog/?p=1230)启用多跳认证。尝试使用 CredSSP：

```
$cred = Get-Credential -Credential "Company\user"
$session = new-pssession -ComputerName $loadHost -Credential $cred -Authentication CredSSP -ErrorAction Stop 
```

产量：

> 连接到远程服务器失败并显示以下错误消息：WinRM 客户端无法处理请求。CredSSP 身份验证当前在客户端配置中被禁用。更改客户端配置并再次尝试请求。还必须在服务器配置中启用 CredSSP 身份验证。此外，必须编辑组策略以允许将凭据委派给目标计算机。使用 gpedit.msc 并查看以下策略：计算机配置 -> 管理模板 -> 系统 -> 凭证委派 -> 允许委派新凭证。验证它是否已启用并使用适合目标计算机的 SPN 进行配置。例如，对于目标计算机名称“myserver.domain.com”，SPN 可以是以下之一：WSMAN/myserver.domain.com 或 WSMAN/*。

使用 gpedit.msc，它是简单的 Allow Delegating Fresh Credentials 设置与域的相应 SPN 条目。所有计算机上的防火墙都配置为启用 WinRM Http-In。我已阅读 about_Remote_Troubleshooting 文档无济于事。

关于多跳身份验证是否确实是正确方法的任何想法，或者其他任何可能破坏这一点的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:20:09.357

我写了那篇博文。而且，是的，从问题的描述来看，它看起来像是一个 CredSSP 身份验证问题。首先，您需要正确的权限来监控性能计数器。当使用远程处理时，如果凭据被委派，则第二个接收请求为 SYSTEM，因此远程系统上的 Invoke-COMmand 产生拒绝访问。

第一个问题是：为什么不在远程系统上使用 Enable-PSremoting？第二个问题是：您是否将运行 C# 应用程序的本地系统配置为 CredSSP 客户端。

```
Enable-WSManCredSSP -Role Client -DelegateComputer "*.SP2010lab.com" 
```

这只需要在您用作客户端的计算机上完成。在您使用 Invoke-Command 的系统上，您必须设置 CredSSP 服务器。

```
Enable-WSManCredSSP -Role Server 
```

你能证实这一点吗？

# css - 创建此字体的 CSS 是什么？

> ID：10768607
> 
> 赞同：0
> 
> 时间：2012-05-26T18:05:49.903
> 
> 标签：css

我不是 css 专家，但我正在尝试从此链接复制一些字体：

[developer.slidedeck.com](http://developers.slidedeck.com/)

如果您向下滚动到标题为“您得到什么？”的部分。我看到这个 H3 标题的唯一相关风格是：

```
font-size: 45px;
text-transform: uppercase;
margin-bottom: 20px;
color: 
#E4E4E4;
letter-spacing: -0.02em;
font-family: 'Oswald', sans-serif; 
```

我已经将该 css 复制到我的网站中，但我的字体看起来与他们的不太一样。据我所知，他们没有使用任何特殊的字体生成器插件（如 cufon）。

那么，如果它是纯 CSS，我的字体怎么会看起来不像他们的呢？并解释差异 - 我的字体没有那么瘦，我的 G 看起来不像他们的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:08:06.707

他们使用@font-face 来包含这个字体。

我认为他们正在使用字体 google api [https://developers.google.com/webfonts/](https://developers.google.com/webfonts/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T18:38:06.037

他们使用的字体是 Oswald，可从 Google Web Fonts 获得，它为您提供了有关如何将其导入您的网站的说明。

[http://www.google.com/webfonts#UsePlace:use/Collection:Oswald](http://www.google.com/webfonts#UsePlace:use/Collection:Oswald)

# html - 居中对齐页面的内容

> ID：10768608
> 
> 赞同：0
> 
> 时间：2012-05-26T18:05:55.707
> 
> 标签：html, css, responsive-design, blogger

`#main`到目前为止， 我一直在尝试使页面上的 div 居中对齐，但没有成功。

有问题的页面是通用页面。

我一直在将 css`margin: 0px auto;`应用于`#main`div，但无法使其居中对齐。

我希望内容在大屏幕上居中对齐，但浮动菜单栏是相同的。任何人都可以帮助我实现这一目标吗？我搞不清楚了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T18:23:41.217

只需添加以下内容：

```
#main {
      margin: 0 auto;
      width: 600px;
      background-color: #EEEEEE;
      text-align: center;
} 
```

这么简单的`HTML`例子：

```
<div id="main">
    <span>Simply dummy text</span>
    <span>Simply dummy text</span>
    <span>Simply dummy text</span>
</div> 
```

您不能这样做`width: 100%`，因为您需要定义要居中的元素的宽度，而不是父元素。

**编辑：**

[我在这里](http://jsfiddle.net/Sajmon/j6rbL/)创建了演示`jsFiddle.net`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T18:17:02.113

只要您不设置宽度，margin 的值 auto 就不起作用。因此，您必须设置 div#main 的宽度。

看看这个[演示](http://jsfiddle.net/byBxH/)中的紫框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T18:31:46.457

首先，你的 HTML 有问题。您在一个页面中应用了一个 ID ( `main`) 两次。ID 是唯一的，即每页只能使用一次。可以根据需要尽可能多地使用类。

```
#main {
  width: 1320px;
  margin: 0 auto;
}

.right {
  width: 200px;
}

.bigpic {
  width: 540px;
  /** and  remove max-width **/
} 
```

并且不要忘记删除第二个 ID。`#main-wrapper`这是（不幸的命名）的第一个孩子

# android - onTouchListener 和 onCreateContextMenu 冲突？

> ID：10768609
> 
> 赞同：1
> 
> 时间：2012-05-26T18:06:05.753
> 
> 标签：android, contextmenu, conflict, ontouchlistener

这是怎么回事？？

我正在创建一个可移动的文本视图，所以我可以将它拖放到整个屏幕上......然后，我决定向它添加上下文菜单，所以我做到了，但上下文菜单只有在我禁用 onTouchListener 时才会出现，所以我在这里我的问题是：有什么方法可以使它们兼容吗？

如果需要，我稍后会发布代码

提前致谢！！！;P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:38:48.447

上下文菜单通常通过长按来启动。您通过长按启动拖动，您将需要通过其他方式启动其中一个或另一个。我有一个类似的问题，并通过将移动命令放在上下文菜单中来解决它。

我通过将“移动”变量设置为 true 并突出显示控件来做到这一点。然后用户拖动控件并在释放时将移动设置为 false 并保存位置。

# c++ - lua+luabind，栈顶没有错误信息，在“运行时错误”之后

> ID：10768610
> 
> 赞同：2
> 
> 时间：2012-05-26T18:06:14.217
> 
> 标签：c++, lua, runtime-error, luabind

我正在尝试将 lua 嵌入到我的游戏引擎中。直到现在一切都很好。我开始注册与游戏引擎交互的函数（例如 move_object(id, x, y)），并且注册工作正常。接下来，我尝试像这样使用它：

```
handlers={}

handlers["update"] = function(objId)
--  print(objId)
    move_object(objId, 0, 0)
end 
```

这给了我一个来自 luabind 的“运行时错误”异常。我到处搜索，根据互联网（和 luabind 源），错误消息应该仍然在 lua 堆栈的顶部。我尝试捕获 luabind::error，并像这样打印堆栈的顶部：

```
std::cout << "error: lua: " << lua_tostring(exc.state(), -1) << std::endl; 
```

像这样：

```
std::cout << "error: lua: " << luabind::object(luabind::from_stack(exc.state(), -1)) << std::endl 
```

并且都打印这个：

```
error: lua: update 
```

我假设这只是我从处理程序表中调用更新函数时推送的最后一个值。这个值应该在遇到错误时被详细的错误字符串覆盖，对吗？根据luabind源文件“error.hpp”的定义`class error`：

```
// this exception usually means that the lua function you called
// from C++ failed with an error code. You will have to
// read the error code from the top of the lua stack
// the reason why this exception class doesn't contain
// the message itself is that std::string's copy constructor
// may throw, if the copy constructor of an exception that is
// being thrown throws another exception, terminate will be called
// and the entire application is killed. 
```

我相信我的 lua 代码的问题实际上在于我的 move_object 函数的注册（更新函数运行。我知道这一点，因为我之前取消了该 print 调用的注释），但如果没有更好的错误信息，我无法确定！哈哈

我修复了错误，如果它有任何帮助。我正在定义 move_object 函数，如下所示：

```
luabind::module(m_L)[
    luabind::def("move_object", &ScriptEntityManager::move_object)
]; 
```

但显然，您不能使用 luabind 将静态成员函数定义为常规函数。我把它改成了这个（`move_object`在 C++ 中做了一个常规的全局函数）：

```
luabind::module(m_L)[
    luabind::def("move_object", move_object)
]; 
```

我不知道这是否有助于解决原始问题，但我认为更多信息不会造成伤害！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T22:14:53.127

捕获 luabind 异常时，我也得到错误消息的错误值。我通过设置 luabind 使用的错误处理程序（set_pcall_callback）解决了这个问题，以便它打印错误（和调用堆栈），这发生在抛出异常之前。这样对我来说效果很好。

但是如果有人真的知道为什么在捕获异常时堆栈顶部不包含错误消息，我也很感兴趣:-)

这是我使用的错误处理程序，以防它可以帮助某人（其中“打印”是一些可以记录 std::string 的自定义函数）：

```
int luabindErrorHandler( lua_State* L )
{
    // log the error message
    luabind::object msg( luabind::from_stack( L, -1 ) );
    std::ostringstream str;
    str << "lua> run-time error: " << msg;
    print( str.str() );

    // log the callstack
    std::string traceback = luabind::call_function<std::string>( luabind::globals(L)["debug"]["traceback"] );
    traceback = std::string( "lua> " ) + traceback;
    print( traceback.c_str() );

    // return unmodified error object
    return 1;
} 
```

# java - Java中的paint()和repaint()

> ID：10768619
> 
> 赞同：23
> 
> 时间：2012-05-26T18:06:55.847
> 
> 标签：java, paint, repaint

我可能在过去的两个小时里浏览和阅读了这些方法和 Graphics 类，也许我很愚蠢，哈哈，但我只是不理解它们。它们是干什么用的？我知道他们应该在屏幕上重绘或更新组件，但我从来不明白为什么需要这样做（我是新手）。例如，如果我在屏幕上移动 JLabel，调用 setLocation() 就可以很好地移动它。这是不需要 repaint() 的场景吗？它在哪些情况下有用，为什么？

抱歉，如果您觉得这是一个可以使用搜索功能解决的问题，但无论出于何种原因，我都没有得到它。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-26T18:13:27.743

# Paint() 和 Repaint() 方法之间的区别

## 画（）：

此方法包含绘制此组件的指令。实际上，在 Swing 中，您应该更改paintComponent() 而不是paint()，因为paint 调用paintBorder()、paintComponent() 和paintChildren()。你不应该直接调用这个方法，你应该调用 repaint() 。

## 重绘（）：

此方法不能被覆盖。它控制 update() -> paint() 循环。您应该调用此方法来让组件重新绘制自身。如果您对组件的外观做了任何更改，但没有更改其大小（例如更改颜色、动画等），请调用此方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T14:16:13.030

该`paint()`方法支持通过 Graphics 对象进行绘画。

该`repaint()`方法用于导致`paint()`被 AWT 绘制线程调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T18:12:30.320

除非您需要将特定内容渲染到组件上，否则无需调用 repaint。“特定的东西”是指您正在使用的窗口工具包内部未提供的任何东西。

# ruby-on-rails - 如何将rails更改为开发模式

> ID：10768621
> 
> 赞同：12
> 
> 时间：2012-05-26T18:07:00.150
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在 rails (3.2.3) 的文档中它说

> 在开发模式下（这是您默认的工作模式），Rails 会在每次浏览器请求时重新加载您的应用程序，因此无需停止和重新启动 Web 服务器。

但很明显，我的应用程序在开箱即用的生产模式下加载。（我可以输入 Rails.env 并查看它）。

为什么？

然后我去 environment.rb 并添加

```
ENV["RAILS_ENV"] = "development" 
```

它仍在生产中。任何的想法？

编辑：给你

```
#Load the rails application
require File.expand_path('../application', __FILE__)

# Initialize the rails application
MyAppName::Application.initialize!

ENV["RAILS_ENV"] = "development" 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-26T18:13:53.160

针对您的情况的可能解决方案可能是：

```
rails server -e development 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-26T23:09:53.007

虽然这不是解决方案，但请尝试以这种方式启动 Rails 服务器：

```
RAILS_ENV=development bundle exec rails s 
```

如果放在`<%= Rails.env %>`布局文件的某个位置，你会看到什么？

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-19T22:33:35.413

如果您使用的是 Phusion Passenger，则将以下内容添加到您的虚拟主机配置文件中：

```
 RailsEnv development 
```

换句话说，在我的系统上，你可以 vim /etc/apache2/sites-available/[name of app] 使它看起来像下面这样：

```
 <VirtualHost *>
   ServerName example.com
   DocumentRoot /home/yourname/htdocs/example.com/public
   RailsEnv development
   </VirtualHost> 
```

然后，您需要重新启动 Web 服务器：

```
 sudo /etc/init.d/apache2 reload 
```

归功于： http: [//my.opera.com/williamn/blog/2009/03/03/how-to-make-phusion-passenger-run-in-development-mode](http://my.opera.com/williamn/blog/2009/03/03/how-to-make-phusion-passenger-run-in-development-mode)

# objective-c - 如何更新 UITableView 中的单元格？

> ID：10768623
> 
> 赞同：0
> 
> 时间：2012-05-26T18:07:26.470
> 
> 标签：objective-c, ios, uitableview

我正在使用 Delegate 方法从子视图中获取数据，并希望在根视图中动态编辑我的表。

所以我想在我的 viewWillAppear 方法中做这样的事情：

```
[myTable setCell:newCell atIndex:i]; 
```

我该怎么办 ？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:25:38.927

将您的代码放在两者之间：

```
[myTable beginUpdates];
//your code
[myTable setCell:newCell atIndex:i];
//your code end
[myTable endUpdates]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T19:51:14.923

好吧，最后我使用了：

```
[cellules beginUpdates];
[cellules reloadData];
[cellules endUpdates]; 
```

我使用了 reloadData，因为它是一个小的 TableView（3 个单元格），对于大的 TableViews 这应该更好：

```
– reloadRowsAtIndexPaths:withRowAnimation: 
```

不管怎么说，还是要谢谢你 ！

# c++ - Throw 导致程序崩溃而不是进入 Catch 块

> ID：10768626
> 
> 赞同：1
> 
> 时间：2012-05-26T18:07:46.477
> 
> 标签：c++, netbeans-7, ubuntu-11.10

我在 Ubuntu 11.10 上使用 NetBeans 7.0.1。

我设置了一个

```
try
{
int error;

// Code
if (error) throw error;

}
catch(int errorNumber)
{
// Error handling
} 
```

堵塞。但是，当抛出异常时，我得到以下“信号捕获”框，而不是程序进入我的 catch 块。

```
Signal received: SIGABRT (?) with sigcode ? (?)
From process: ?
For program celltowebimage, pid 30,222

You may discard the signal or forward it and you may continue or pause the process
To control which signals are caught or ignored use Debug->Dbx Configure 
```

每当我编写的程序抛出异常时，它就会进入 catch 块。为什么 NetBeans 反而使程序崩溃？引发的异常编号的一个示例是 -23。但是，它们都是小的负数，并且都会导致相同的问题。

# php - 创建一个php文件

> ID：10768627
> 
> 赞同：2
> 
> 时间：2012-05-26T18:08:05.167
> 
> 标签：php

是否有任何脚本可以在指定目录中创建文件？喜欢

`<?php`

`createfile("hi.txt","/home/public_html/files");`

`?>`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T18:09:22.900

您可以使用[file_put_contents](http://php.net/manual/en/function.file-put-contents.php)。

```
<?php

file_put_contents("/home/public_html/files/hi.txt", "content");

?> 
```

或者，如果您不需要该内容而只是想确保文件已创建，请[点击：](http://php.net/touch)

```
<?php

touch("/home/public_html/files/hi.txt");

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T18:30:35.523

也试试`fopen("/path/to/file", 'w')`

“w”将根据[文档](http://php.net/manual/en/function.fopen.php "文档")“如果文件不存在，请尝试创建它。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T18:10:49.587

是[file_put_contents()](http://uk3.php.net/manual/en/function.file-put-contents.php)

`file_put_contents("/home/public_html/files/hi.txt",$data);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T18:13:05.637

您可以/应该使用原生 PHP 函数：

```
file_put_contents('/home/public_html/files/hi.txt', 'lorem ipsum') 
```

[http://php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-18T22:05:31.553

也许[这](http://php.net/touch#100337)是一些人询问是否使用`file_put_contents()`或`touch()`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-16T20:37:34.517

简单地：

```
fwrite($file = fopen($filename, "w"), "New content");
fclose($file); 
```

如果文件不包含任何内容：

```
fclose($file = fopen($filename, "w")); 
```

此外，使用[file_exists()](http://php.net/manual/en/function.file-exists.php)检查文件是否存在，以防止清除现有文件的内容：

```
if (!file_exists($filename))
    fclose($file = fopen($filename, "w")); 
```

# iphone - 从另一个视图控制器类dismissModalViewControllerAnimated

> ID：10768629
> 
> 赞同：1
> 
> 时间：2012-05-26T18:08:27.477
> 
> 标签：iphone

我确实有两个 ViewController 类，一个 firstviewController 另一个 secondViewController 在第一个 viewcontroller 我称之为`[self dimissModalViewControllerAnimation:NO];` 关闭视图！现在我需要从另一个 secondViewController 类中删除相同的视图。

所以我需要打电话给超级！

```
[super dismissModalViewControllerAnimated:NO]; 
```

或者我是否需要创建任何协议来关闭视图！从另一个 secondViewController 类。

任何人都可以指导我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T23:55:45.853

您应该只`super`在重载方法定义时使用，例如：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.title = @"Login / Signup";
} 
```

通常，如果您试图告诉一个视图从另一个视图做某事，委托是您的朋友。您可以创建一个弱`delegate`变量来保存对要关闭的视图控制器的引用，然后调用`[delegate dismissModalViewControllerAnimated:NO];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T23:34:34.113

您可以在 firstViewController 的 viewDidLoad 中注册通知

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleNotification:) name:@"MyNotification" object:nil]; 
```

在 firstViewController 中添加事件处理程序

```
- (void)handleNotification:(NSNotification*)note {
    [self dismissModalViewControllerAnimated:NO];
} 
```

然后就可以在 secondViewController 中触发事件了

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"MyNotification" object:nil ]; 
```

# javascript - 从服务器向网页发送响应

> ID：10768634
> 
> 赞同：1
> 
> 时间：2012-05-26T18:09:35.047
> 
> 标签：javascript, jquery, html, google-talk

我正在尝试制作一个与 gtalk 交互的网络聊天应用程序。成功从我的应用程序向 gtalk 用户发送消息。如果 gtalk 用户从另一端 ping 我，我也可以在我的服务器上接收消息，但问题是我如何知道有消息在等待。我只能想到每 5 秒或什么的 ajax 命中。有没有更好的方法来实现它？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:14:53.283

据我所知，您真正需要的是[Comet 解决方案](http://en.wikipedia.org/wiki/Comet_%28programming%29)之一。您的选择取决于您计划支持的应用程序架构和浏览器。

如果您可以只支持主流浏览器，我建议为此使用网络套接字，这里有一个快速演示 - [http://html5demos.com/web-socket](http://html5demos.com/web-socket)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T18:16:27.917

根据您的问题，我认为您正在搜索类似推送邮件系统的东西，也就是说，您正在尝试从服务器推送到浏览器。但是，我认为没有比每 5 秒命中一次 ajax 更好的方法了。

**[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)**有一种方法，它的效果不太好。看[这里](https://stackoverflow.com/questions/603201/using-comet-with-php)

但是，在 HTML5 中你有[socket](http://html5demos.com/web-socket)。您可以从以下链接中获取有关套接字的更多信息：

[http://en.wikipedia.org/wiki/WebSocket](http://en.wikipedia.org/wiki/WebSocket)

[https://stackoverflow.com/questions/4262543/what-are-good-resources-for-learning-html-5-websockets](https://stackoverflow.com/questions/4262543/what-are-good-resources-for-learning-html-5-websockets)

因此，考虑到各个方面，您的选择会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T18:15:40.103

在 HTML 5 之前，不。你必须投票。

这有几个原因（归结为 Web、Web 浏览器和 HTTP 的工作方式），但最简单的考虑方法是 Web 和 HTTP 以请求/响应模式运行；也就是说，来自网络浏览器的请求被发送到返回响应的网络服务器，然后连接被切断。服务器无法与浏览器重新建立联系；浏览器必须返回到服务器。

# c# - 在 x 秒内调用方法 x 次

> ID：10768640
> 
> 赞同：0
> 
> 时间：2012-05-26T18:10:46.157
> 
> 标签：c#, .net, windows

我试图在 1 秒内尽可能多地调用一个方法，所以我决定使用计时器来帮助执行此操作，但是当计时器运行滴答事件处理程序时（1 秒后），该方法仍然被调用 -我已经开始如下：

```
public partial class Form1 : Form
    {
        public static Timer prntScreenTimer = new Timer();

        public Form1()
        {
            InitializeComponent();

            startCapture();
        }

        private static void startCapture()
        {
            prntScreenTimer.Tick += new EventHandler(prntScreenTimer_Tick);
            prntScreenTimer.Start();
            prntScreenTimer.Interval = 1000;
            while (prntScreenTimer.Enabled)
            {
                captureScreen();
            }

        }

        private static void prntScreenTimer_Tick(object sender, EventArgs e)
        {
            prntScreenTimer.Stop();
        }

        private static void captureScreen()
        {
            int ScreenWidth = Screen.PrimaryScreen.Bounds.Width;
            int ScreenHeight = Screen.PrimaryScreen.Bounds.Height;
            Graphics g;
            Bitmap b = new Bitmap(ScreenWidth, ScreenHeight);
            g = Graphics.FromImage(b);
            g.CopyFromScreen(Point.Empty, Point.Empty, Screen.PrimaryScreen.Bounds.Size);

            // Draw bitmap to screen
            // pictureBox1.Image = b;

            // Output bitmap to file
            Random random = new Random();
            int randomNumber = random.Next(0, 10000);
            b.Save("printScrn-" + randomNumber, System.Drawing.Imaging.ImageFormat.Bmp);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T18:26:11.187

我相信问题是你阻塞了主线程`startcapture`。表单 Timer 需要处理消息才能运行。将循环更改为：

```
 while (prntScreenTimer.Enabled)
    {
        captureScreen();
        Application.DoEvents();
    } 
```

由于您不需要从您的方法访问 UI 线程，这会更好，因为它不会阻塞 UI：

```
private void startCapture()
{
    Thread captureThread = new Thread(captureThreadMethod);
    captureThread.Start();
}

private void captureThreadMethod()
{
   Stopwatch stopwatch = Stopwatch.StartNew();
   while(stopwatch.Elapsed < TimeSpan.FromSeconds(1))
   {
       captureScreen();
   }        
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T18:24:03.997

您的代码对我来说看起来是正确的，所以我无法确定您的问题的原因。但是，您实际上并不需要 a 来做`Timer`您正在做的事情。在循环中进行简单的`Stopwatch`检查`while`就足够了：

```
Stopwatch sw = Stopwatch.StartNew();
while (sw.ElapsedMilliseconds < 1000)
    captureScreen(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T18:24:22.173

该方法被调用了多少次？您是如何计算的（无法从您粘贴的代码中得知）。
无论是哪种情况，您都必须记住 elapsed 事件在单独的线程上运行，因此这种竞争条件是可能的（您的方法在您停止计时器后运行一次甚至更多次）。当然有办法防止这种竞争条件。[在 msdn 上](http://msdn.microsoft.com/en-us/library/system.timers.timer.stop.aspx)存在一个有点复杂的示例

# android - Android、SQLite 连接和事务

> ID：10768642
> 
> 赞同：3
> 
> 时间：2012-05-26T18:10:56.467
> 
> 标签：android, multithreading, sqlite

我目前正在研究 SQLiteDatabase 和相关类，目的是更好地理解它如何处理并发（我当前的解决方案有效，但我觉得我实际上可能在做多余的工作，因为它是在假设并发的情况下完成的不为我处理）。

对，关于 SQLiteOpenHelper 的 android 文档说明了以下关于 getWriteableDatabase 方法的内容

> 一旦打开成功，数据库就会被缓存，所以每次需要写入数据库时​​都可以调用这个方法。（确保在不再需要数据库时调用 close()。）

我有点不清楚正在缓存什么（所以我目前有一个为我做缓存的包装器）。那么，这里发生了什么？两个 SQLiteDatabase 实例是围绕缓存/静态实例包装的吗？

另外，实际的锁定是如何处理的？如果我有两个单独的 SQLiteDatabase 实例，由同一个 SQLiteOpenHelper 实例创建，那么这些是事务安全的吗？就像我在一个事务上以独占模式开始一个事务，然后在另一个线程中启动另一个事务，在另一个 SQLiteDatabase 实例上，我希望第二个事务在第一个事务完成之前不会启动。这是它的工作原理吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T18:24:03.263

“缓存” .. 好吧，我想你可以这么称呼它。`SQLiteOpenHelper`通常在内部存储一个（`SQLiteDatabase`自上次调用创建数据库以来），因此调用`#getWritableDatabase()`两次将在第二次为您提供相同的对象（除非您关闭第一个实例 - 然后它将再次创建它）。实际上，调用`#getReadableDatabase()`将尝试以 r/w 方式打开数据库，并且只有在失败时才返回只读实例。

请注意，关闭数据库和调用`#getWritableDatabase()`不是线程安全的 - 即，`SQLiteOpenHelper`如果您在许多线程中弄乱它，它可以返回关闭的数据库。

简而言之，您将拥有一个`SQLiteDatabase`- 但您可以启用锁定 - 使其成为线程安全 - 通过调用`SQLiteDatabase#setLockingEnabled(true)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T18:22:32.597

> 我有点不清楚正在缓存什么（所以我目前有一个为我做缓存的包装器）。

`SQLiteDatabase`对象被缓存。

> 如果我用这个方法创建了两个 SQLiteDatabase 实例，然后关闭一个，另一个仍然是打开的。

假设你只有一个`SQLiteOpenHelper`，你不能“`SQLiteDatabase`用这个方法创建两个实例”。第二次`getWriteableDatabase()`调用返回的结果与`SQLiteDatabase`第一次调用相同。

如果您仅从单个组件（例如，仅一项活动或仅一项服务）访问数据库，请使用该组件持有的一个`SQLiteOpenHelper`（并且，通过扩展，仅一项）。`SQLiteDatabase`如果您从多个组件访问数据库，则需要使用单例`SQLiteOpenHelper`实例，直接或通过将数据库包装在`ContentProvider`.

# templates - 尝试 .sql 导入后的错误消息

> ID：10768644
> 
> 赞同：1
> 
> 时间：2012-05-26T18:11:39.957
> 
> 标签：templates, joomla, phpmyadmin, importerror, mysqlimport

我使用 Joomla，最近安装了一个新模板。为了使上述模板的演示内容工作，我需要使用 phpMyAdmin 将 .sql 文件导入我的数据库。但是，在尝试导入文件后，我收到此错误消息：

SQL-Befehl *[SQL-Order]*：

```
--
-- Datenbank *[database]*: `j17_jp_investment`
--
-- --------------------------------------------------------
--
-- Tabellenstruktur *[table structure]* für Tabelle *[table, sheet]* `jos_assets`
--
DROP TABLE IF EXISTS `jos_assets` ; 
```

MySQL meldet *[报告]*：Dokumentation *[文档]*

```
#1046 - No database selected 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T05:20:58.157

我刚买的模板也有同样的问题！添加 MySQL 语句：USE jml_d52ka2dc1f; 其中jml_d52ka2dc1f；是您的数据库名称。

您的 dump.sql 文件应如下所示：

```
USE jml_d52ka2dc1f;

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

DROP TABLE IF EXISTS `jml_assets`;
CREATE TABLE IF NOT EXISTS `jml_assets` (
`id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'Primary Key',
`parent_id` int(11) NOT NULL DEFAULT '0' COMMENT 'Nested set parent.',
`lft` int(11) NOT NULL DEFAULT '0' COMMENT 'Nested set lft.',
`rgt` int(11) NOT NULL DEFAULT '0' COMMENT 'Nested set rgt.',
`level` int(10) unsigned NOT NULL COMMENT 'The cached level in the nested tree.',
`name` varchar(50) NOT NULL COMMENT 'The unique name for the asset.\n',
`title` varchar(100) NOT NULL COMMENT 'The descriptive title for the asset.',
`rules` varchar(5120) NOT NULL COMMENT 'JSON encoded access control.',
 PRIMARY KEY (`id`),
 UNIQUE KEY `idx_asset_name` (`name`),
 KEY `idx_lft_rgt` (`lft`,`rgt`),
 KEY `idx_parent_id` (`parent_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=43 ; 
```

：） 享受！

参考：[http ://dev.mysql.com/doc/refman/5.0/en/use.html](http://dev.mysql.com/doc/refman/5.0/en/use.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:54:38.763

你有一个名为“j17_jp_investment”的数据库吗？

否则从 .sql 文件中删除该行，转到 phpmyadmin，选择 joomla 正在使用的数据库，然后转到导入选项卡并尝试导入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-22T17:04:35.870

同样的错误出现在我身上。我试图将我客户的 mySQL 数据库导入我的 WAMP 服务器。

我只是在我的 SQL 查询的开头添加了这两个词：

`USE [database_name]`

但是，在这样做之前，我确保创建了一个与上面代码中使用的名称完全相同的数据库。

# android - Android - 创建 BaseListView 后 ListViews 损坏

> ID：10768650
> 
> 赞同：0
> 
> 时间：2012-05-26T18:12:34.537
> 
> 标签：android, android-layout

我有一些过去直接从 ListActivity 继承的类。一切正常。现在我从继承自 ListActivity 的 BaseListActivity 继承。

这是 BaseListActivity：

```
public class BaseListActivity extends ListActivity 
{
    @Override
    public void setContentView(int layoutResID) {
        super.setContentView(layoutResID);      
    {
        Button home_header = (Button)findViewById(R.id.home_header);
        Button questions_header = (Button)findViewById(R.id.questions_header);

        home_header.setOnClickListener(new Button.OnClickListener() 
        {  
            public void onClick(View v) 
            {                   
              Intent myIntent = new Intent( BaseListActivity.this , ProblemioActivity.class);
              BaseListActivity.this.startActivity(myIntent);
            }
        });                 

        questions_header.setOnClickListener(new Button.OnClickListener() 
        {  
            public void onClick(View v) 
            {                   
              Intent myIntent = new Intent( BaseListActivity.this , MyQuestionsActivity.class);
              BaseListActivity.this.startActivity(myIntent);
            }
        });         
}
} 
```

它基本上为页面添加了标题。但现在没有一个列表被渲染，也没有例外。

知道我还需要做什么才能使其正常工作吗？

以下是我更改原始布局的方式：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:orientation="vertical" >    

<include android:id="@+id/header"
         layout="@layout/header"
         android:layout_height="wrap_content"
         android:layout_width="fill_parent"/>    

<TextView
    android:id="@+id/question_label"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Loading your questions..."
    />     

    <ListView
    android:id="@android:id/list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="20px" >        
    </ListView> 
```

这是我的 onCreate

```
public class MyQuestionsActivity extends BaseListActivity
{
    ArrayAdapter<Question> adapter;     

    ArrayList<Question> questions = new ArrayList <Question>( );        

@Override
    public void onCreate(Bundle savedInstanceState) 
{   
    super.onCreate(savedInstanceState);

    setContentView(R.layout.users_questions);

    Question q = new Question ();
    q.setQuestion( "" );

    questions.add(q);       

    adapter = new ArrayAdapter<Question>(this, R.layout.user_question_list, questions); 
```

现在我的 BaseListActivity 中有这个

```
@Override
    public void setContentView(int layoutResID) {
        super.setContentView(layoutResID);      
    { 
```

我刚试过这个：

```
public class BaseListActivity extends ListActivity 
{
    @Override
    public void setContentView(int layoutResID) {
        super.setContentView(layoutResID);      
    {
        setListAdapter(this.getListAdapter()); 
```

但它并不完全有效:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:27:17.467

请看这个

[http://jnastase.alner.net/archive/2011/08/08/custom-android-listactivity.aspx](http://jnastase.alner.net/archive/2011/08/08/custom-android-listactivity.aspx)

[http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)

onCreate 中有没有这一行……​​ setContentView(R.layout.main);

# sql - 从Oracle的两张表中选择一条记录

> ID：10768651
> 
> 赞同：2
> 
> 时间：2012-05-26T18:12:37.750
> 
> 标签：sql, oracle11g, greatest-n-per-group

共有三个表：

1.  关于学生的表格：`s41071030(sno, sname, ssex, sage, sdept)`

2.  课程表：`c41071030(cno, cname, cpno, credit)`

3.  关于选择课程的表格：`sc41071030(sno, cno, grade)`

现在，我想选择一个学生的详细信息`sdept='CS'`，他或她选择了部门中最多的课程`'CS'`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T23:24:24.383

1.  聚合`sc41071030`行以获取计数。

2.  将结果加入`s41071030`到：

    *   过滤行`sdept`；

    *   获取学生详细信息；

    *   `RANK()`计数值上的连接行。

3.  选择排名为 1 的行。

```
WITH
  aggregated AS (
    SELECT
      sno,
      COUNT(*) AS coursecount
    FROM
      sc41071030
    GROUP BY
      sno
  ),
  ranked AS (
    SELECT
      s.*,
      RANK() OVER (ORDER BY agg.coursecount DESC) AS rnk
    FROM
      s41071030 s
      INNER JOIN aggregated agg ON s.sno = agg.sno
    WHERE
      s.sdept = 'CS'
  )
SELECT
  sno,
  sname,
  ssex,
  sage,
  sdept
FROM
  ranked
WHERE
  rnk = 1
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:25:34.067

与任何适度复杂的 SQL 语句一样，最好执行“TDQD”——测试驱动查询设计。从问题的简单部分开始，然后将它们构建成更复杂的答案。

要了解计算机系每个学生上多少门课程，我们写道：

```
SELECT S.Sno, COUNT(*) NumCourses
  FROM s41071030 S
  JOIN sc41071030 SC ON S.Sno = SC.Sno
 WHERE S.Sdept = 'CS'
 GROUP BY S.Sno; 
```

我们现在需要找到 NumCourses 的最大值：

```
SELECT MAX(NumCourses) MaxCourses
  FROM (SELECT S.Sno, COUNT(*) NumCourses
          FROM s41071030 S
          JOIN sc41071030 SC ON S.Sno = SC.Sno
         WHERE S.Sdept = 'CS'
         GROUP BY S.Sno
       ) 
```

现在我们需要将该结果与子查询连接起来，所以是时候使用 CTE（公共表表达式）了：

```
WITH N AS
    (SELECT S.Sno, COUNT(*) NumCourses
       FROM s41071030 S
       JOIN sc41071030 SC ON S.Sno = SC.Sno
      WHERE S.Sdept = 'CS'
      GROUP BY S.Sno
    )
SELECT N.Sno
  FROM N
  JOIN (SELECT MAX(NumCourses) MaxCourses FROM N) M
    ON M.MaxCourses = N.NumCourses; 
```

我们需要获取学生详细信息，因此我们将其与学生表连接：

```
WITH N AS
    (SELECT S.Sno, COUNT(*) NumCourses
       FROM s41071030 S
       JOIN sc41071030 SC ON S.Sno = SC.Sno
      WHERE S.Sdept = 'CS'
      GROUP BY S.Sno
    )
SELECT S.*
  FROM s41071030 S
  JOIN N ON N.Sno = S.Sno
  JOIN (SELECT MAX(NumCourses) MaxCourses FROM N) M
    ON M.MaxCourses = N.NumCourses; 
```

轻微测试的 SQL：你被警告了。要进行测试，请运行组件查询，确保每次都能获得合理的结果。在前一个查询正常工作之前，不要继续下一个查询。

请注意，课程表对您正在解决的查询并不重要。

另请注意，如果事实证明有几个学生都参加了相同数量的课程，并且该数字是任何学生正在学习的最大数量，则这可能会返回几行。（因此，如果有 3 名学生每人选修 7 门课程，并且没有学生选修超过 7 门课程，那么您将在结果集中看到 3 行。）

# php - 电子邮件表单字段数组

> ID：10768653
> 
> 赞同：0
> 
> 时间：2012-05-26T18:12:52.907
> 
> 标签：php, arrays, email

谁可以使用电子邮件表单字段数组创建数组。

```
 if(isset($_POST['submit'])){
        $content=array(
        $name=$this->strip_tags($_POST['name']),
        $email=$this->strip_tags($_POST['email']),
        $phone=$this->strip_tags($_POST['phone']),
        $address=$this->strip_tags($_POST['address']),
        $city=$this->strip_tags($_POST['city']),
        $subject=$this->strip_tags($_POST['subject']),
        $message=$this->strip_tags($_POST['message'])
        ); 
```

然后使用邮件功能发送。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T18:24:22.157

你可以这样做，这要容易得多：

```
if(isset($_POST['submit'])) {

$to = "someone@example.com"; // send email to
$from = "Your Name <you@example.com>"; // send email from
$subject = "Form submitted"; // email subject
$body = "The form has been submitted!

Here's the form data that was submitted.

Name: ".$_POST['name']."
Email: ".$_POST['email']."
Phone: ".$_POST['phone']."
Address: ".$_POST['address']."
City: ".$_POST['city']."
Subject: ".$_POST['subject']."

Message:

".$_POST['message']."

Some other text under the form data here...";

$email = mail($to, $subject, $body, "From: $from");

if($email) { // you don't actually need this, it's just to make sure it sends :)
echo "Email sent successfully";
}

} 
```

这将发送一封电子邮件，其中包含提交的表单数据。

我希望这有帮助！

# java - 如何在java中将图像文件转换为整数数组？

> ID：10768655
> 
> 赞同：1
> 
> 时间：2012-05-26T18:13:23.693
> 
> 标签：java, image

如何将图像文件（在本例中为 .png）转换为 3d（一个坐标表示图像宽度，一个坐标表示重量，一个表示显示红色、绿色和蓝色值的整数）整数或字节数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T18:23:45.820

> 如何将图像文件转换为整数数组..？

看：

*   [`BufferedImage.getData()`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html#getData%28%29)
*   [`Raster.getPixels(int,int,int,int,int[])`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/Raster.html#getPixels%28int,%20int,%20int,%20int,%20int%5b%5d%29)

# ios - 关闭键盘后让 inputAccessoryView 可见

> ID：10768659
> 
> 赞同：37
> 
> 时间：2012-05-26T18:14:40.087
> 
> 标签：ios, user-interface, uitoolbar, uikeyboard

我想做的是在 iPad 上的 Safari 中创建类似于“在页面上查找”搜索功能的东西。

我正在使用 a `UIToolbar`，其中包含一些项目，并通过将其设置`inputAccessoryView`为`UITextField`. 像魅力一样工作，但有一件事我无法弄清楚。在 Safari 中，当您搜索某些内容时，键盘会消失，但工具栏仍保留在屏幕底部。

有没有人知道如何做到这一点？我能想到的唯一解决方案是响应键盘关闭事件，然后拉出`UIToolBar`并创建一个自定义动画，将其移动到屏幕底部。但这是骇人听闻的。我正在寻找更优雅的解决方案。当键盘被关闭时，可以让我决定如何处理输入附件视图。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2014-07-20T21:30:41.340

它是这样完成的：

将 UIToolbar 分配给视图控制器中的属性：

```
@property (strong, nonatomic) UIToolbar *inputAccessoryToolbar; 
```

在您的顶视图控制器中，添加以下方法：

```
- (BOOL)canBecomeFirstResponder{

    return YES;

}

- (UIView *)inputAccessoryView{

    return self.inputAccessoryToolbar;

} 
```

然后（可选，因为通常不需要），只要键盘被隐藏，只需调用：

```
[self becomeFirstResponder]; 
```

这样，您的 inputAccessoryToolbar 将是您的视图控制器和文本视图的输入附件视图。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-05T11:59:46.083

我最终`UIToolBar`没有将其分配为输入附件视图，然后上下滑动`UIKeyboardWillShowNotification / UIKeyboardWillHideNotification`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-06T09:07:40.257

根据先前的答案更新到 Swift 4。如果您通过[情节提要](https://stackoverflow.com/a/41059137)添加工具栏，您可以这样做

```
class ViewController: UIViewController {

    @IBOutlet weak var textField: UITextField!
    @IBOutlet var toolbar: UIToolbar!

    override var canBecomeFirstResponder: Bool {
        get {
            return true
        }
    }

    override var inputAccessoryView: UIView {
        get {
            return self.toolbar
        }
    }

    override func viewDidLoad() {
        super.viewDidLoad()

        textField.inputAccessoryView = toolbar
    }
} 
```

在这种情况下，每当文本字段退出第一响应者时，它默认第一响应者为主视图。请记住，如果有多个 UI 元素并且第一响应者在辞职后默认为不想要的视图，您可能希望显式辞职第一响应者，并将主视图设置为第一响应者。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-06-26T06:37:51.147

添加到@arik 的答案，这里是 Swift 版本：

```
class ViewController: UIViewController {

  @IBOutlet var textField: UITextField!      

  // Input Accessory View
  private var inputAccessoryToolbar: UIToolBar?
  override func canBecomeFirstResponder() -> Bool {
    return true
  }
  override var inputAccessoryView: UIView? {
    return inputAccessoryToolbar
  }

  override func viewDidLoad() {
    super.viewDidLoad()
    inputAccessoryToolbar = UIToolbar(frame: CGRectMake(0, 0, view.frame.size.width, 50))
    textField.inputAccessoryView = inputAccessoryToolbar
  }

  // UITextFieldDelegate
  func textFieldShouldReturn(textField: UITextField) -> Bool {
    becomeFirstResponder()
    return true
  }
} 
```

感谢您提供干净的解决方案！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-22T18:16:10.970

您可能还需要解决 inputAccessoryView 不尊重安全区域边距的错误，因此没有为 iPhone X 上的主页指示器腾出空间：[iPhone X 如何处理视图控制器 inputAccessoryView？](https://stackoverflow.com/questions/46282987/iphone-x-how-to-handle-view-controller-inputaccessoryview)

当您有来自 xib 的 UIToolbar 并且您还使用该 UIToolbar 作为文本字段的 inputAccessoryView 时，我找到了最简单的解决方案，即当您从覆盖的 inputAccessoryView 返回工具栏时，将工具栏嵌入 UIView 中，并使包含的 UIView 更高通过 safeAreaInsets.bottom。（其他解决方案建议将工具栏的底部约束到子类中的安全区域，但这会导致约束冲突，也意味着工具栏下的区域颜色错误。）但是，您还必须记住，文本即使屏幕上没有键盘（例如，如果有外部键盘），字段也可以具有焦点，因此在这种情况下，您也需要将文本视图的 inputAccessoryView 更改为此工具栏-in-a-UIView。事实上，总是使用包含视图并适当地调整它的大小可能会使事情变得更简单。无论如何，这是我对 inputAccessoryView 的覆盖：

```
 override var inputAccessoryView: UIView? {

    if toolbarContainerView == nil {

        let frame=CGRect(x: toolBar.frame.minX, y: toolBar.frame.minY, width: toolbar.frame.width, height: toolBar.frame.height+view.safeAreaInsets.bottom)

        toolbarContainerView = UIView(frame: frame)

    }

    if (toolbar.superview != toolbarContainerView) {

        //this is set to false when the toolbar is used above the keyboard without the container view

        //we need to set it to true again or else the toolbar will appear at the very top of the window instead of the bottom if the keyboard has previously been shown.

        toolbar.translatesAutoresizingMaskIntoConstraints=true

        toolbarContainerView?.addSubview(toolbar)

    }

    return toolbarContainerView

} 
```

It would probably be a good idea to override viewSafeAreaInsetsDidChange to adjust the size of toolbarContainerView in that case, too.

# scala - 单位作为参数

> ID：10768661
> 
> 赞同：1
> 
> 时间：2012-05-26T18:15:12.627
> 
> 标签：scala

以下方法有什么区别？

```
def sum1() = 1+2

def sum2(a:Unit) = 1+2 
```

我认为它们在语义上是相同的，对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T18:37:24.910

使用`sum1`，您可以使用或不使用括号来调用它：

```
val x = sum1    // x: Int = 3
val y = sum1()  // y: Int = 3 
```

但是 with`sum2`你被迫提供括号。我认为如果你打电话`sum2()`，你实际上是在打电话`sum2`with`()`作为参数`a`。

```
val x2 = sum2   // error
val y2 = sum2() // y2: Int = 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T20:46:03.587

请注意，将 unit 作为参数传递给表达式可以让您以严格的语言模拟惰性求值。通过“在 lambda 下移动评估”，您可以确保表达式在传入之前不会被评估`()`。这对于例如自动记忆数据结构很有用，这些数据结构在第一次从函数崩溃到一个值时重新检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T06:54:07.813

这些方法并不完全相同。一旦接收到一个参数，另一个则不接收。看这里：

```
scala> sum1(println("Hi, there!"))
<console>:9: error: too many arguments for method sum1: ()Int
              sum1(println("Hi, there!"))
                  ^

scala> sum2(println("Hi, there!"))
Hi, there!
res1: Int = 3 
```

# javascript - 最小高度：不工作

> ID：10768665
> 
> 赞同：1
> 
> 时间：2012-05-26T18:15:54.627
> 
> 标签：javascript, html, styles

我有一个固定的容器，其结构简单，如下所示。我的问题是，当我将子容器添加到 subContainer 时，subContainer 会产生一种错觉，即它失去了 100% 的高度。

像这样的事件。添加第一个孩子一切正常，第二个孩子subContainer给人的印象是现在高度为99％，而第三个孩子和subContainer看起来好像回到了100％；

宽度始终正确显示。这个正在驱使我发疯，任何建议将不胜感激。

```
 <div id="containerr" style="width: 175px; height: 250px;overflow:hidden;display: inline-block;">

  <div id="subContainer" style="width:100%; height:100%;">

    <div style="width:100%;height:25%;"></div> 
    <div style="width:100%;height:55%;"></div>
    <div style="width:100%;height:15%;"></div>

  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:02:54.960

如果您进行数学计算，您会注意到 250 像素的 25% 是 62.5 像素，其他百分比也是如此。根据我所看到的

```
$('#subContainer > div:eq(0)').height() 
```

看起来 FF 正在向上取整，而 Chrome 正在向下取整。一些快速的谷歌搜索发现这是一个已知问题，例如。[http://ejohn.org/blog/sub-pixel-problems-in-css/](http://ejohn.org/blog/sub-pixel-problems-in-css/)

# linq-to-sql - 如何获取由 Linq2SQL ORM 生成的 sql 字符串？

> ID：10768666
> 
> 赞同：1
> 
> 时间：2012-05-26T18:15:56.197
> 
> 标签：linq-to-sql

所以，实际上这是一个主要问题：如何获取由 Linq2SQL ORM 生成的 sql 字符串？我熟悉其他 ORM 系统，例如 nHibernate 和 EntityFramework (4+)。例如，对于 nHibernate，存在[探查器](http://nhprof.com/)允许捕捉任何活动，由 nHibernate 引擎执行。另一方面，EntityFramework 具有内置功能 - 方法

```
query.ToSqlString() 
```

那么Linq2SQL 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:22:50.923

正如@usr 提到的，您可以使用`ToString()`查询来获取生成的SQL。您还可以使用 linq 数据上下文的[`Log`属性](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.log.aspx)来转储[所有 SQL 命令](http://mattberseth.com/blog/2008/01/profiling_linq_to_sql_using_th.html)。

另一个通用选项是使用 SQL Server Profiler 来观察所有进入服务器的查询。这适用于所有 ORM。

# c# - 跨越两个表的 Linq-to-Sql 时间戳

> ID：10768674
> 
> 赞同：0
> 
> 时间：2012-05-26T18:17:50.863
> 
> 标签：c#, sql-server, linq-to-sql, concurrency

我正在使用 SQL Server 时间戳列（称为 VersionNumber）来支持 Linq-to-SQL 的乐观并发。当只涉及一张桌子时，这很有效。但是，我有如下所示的域实体：

人员：FirstName、LastName、Age、VersionNumber
医生：所有人员属性 + 职业
运动员：所有人员属性 + 运动、YearsPro
音乐家：所有人员属性 + 乐器

我的数据库有一个 Person 表，然后是每种 Person 类型的其他表。具体表（如运动员）只有运动员所需的列。具体表与 Person 表具有 1-1 映射关系。在这种情况下如何使用 VersionNumber？具体表可以/应该有自己的 VersionNumber 列吗？只有 Person 表应该有 VersionNumber 列吗？在这种情况下我应该如何保存数据？

在这种特殊情况下，我想拯救运动员。现在，只有 Person 基类有 VersionNumber。我只是不确定如何保存它。

注意：因为 Person 在 C# 域实体中已经有一个 VersionNumber 属性，所以我不能将相同的属性名称添加到具体类中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:26:31.607

linq-to-sql 支持[单表继承](http://msdn.microsoft.com/en-us/library/bb384467.aspx)，所以如果你可以自由地重新设计你的数据库，你应该创建一个包含所有字段的表。然后添加一个`type`字段，该字段将告诉 linq-to-sql 为每个特定行实现哪种具体类型。

如果这不是一个选项，则必须在每个表的基础上完成乐观锁定。为每个表添加一个 VersionNumber 列，linq-to-sql 将使用它。你现在拥有的方式也有效。Linq-to-sql 将使用`Person`表的 VersionNumber 并回退到在更新其他表时断言每个属性都没有改变。如果数据库中的任何属性在它们为红色后发生了更改，则 linq-to-sql 将导致更新失败并出现并发错误。

# mysql - 需要有关mysql日期范围查询的帮助

> ID：10768675
> 
> 赞同：1
> 
> 时间：2012-05-26T18:18:01.863
> 
> 标签：mysql, sql

下面是我在搜索中使用的查询

我在搜索中有日期范围，当我在“01/05/2012”和“31/05/2012”日期范围之间搜索数据但查询返回所有记录集时。

```
SELECT t.created date, t.saleid sale_id, u.id user_id, NULL merchant_name, cheque_number cheque_number, u.first_name name, (
SELECT company_name
FROM users
WHERE id = u.my_charity_id)charity_name, t.campaignname website, t.campaignid campaign_id, t.mysoko_discount discount_percentage, t.discount, t.salecommission sale_commission, t.salevalue total_sale_value, t.salestatus sale_status
FROM `transaction` AS `t` , `users` AS `u`
WHERE DATE_FORMAT( t.created, '%d/%m/%Y' )
BETWEEN '01/05/2012' AND '31/05/2012'
AND t.user_id = u.id
LIMIT 0 , 30 
```

我正在寻找日期范围搜索数据，但结果返回表中的所有数据。

```
date            sale_id       user_id   
2012-04-19 00:00:00     20253305    45  
2012-04-11 00:00:00     20253306    68  
2012-04-23 00:00:00     20253307    68  
2012-04-25 00:00:00     20253308    45  
2012-04-27 00:00:00     20253309    45  
2012-04-29 00:00:00     20253310    68  
2012-04-30 00:00:00     20253311    45  
2012-05-01 00:00:00     20253312    45  
2012-05-03 00:00:00     20253313    68  
2012-04-18 00:00:00     20253314    4 
```

我的搜索来自日期范围 txn 搜索（从/到日期）

输入日期格式：DD/MM/YYYY

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T00:08:01.900

您可以尝试像这样过滤行：

```
WHERE t.created >= '2012-05-01'
  AND t.created <  '2012-06-01' 
```

如果将月份指定为参数，则可以在 WHERE 子句中使用以下计算：

```
WHERE t.created >= @monthdate
  AND t.created <  @monthdate + INTERVAL 1 MONTH 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T03:09:07.947

做这个：

```
WHERE t.created BETWEEN '2012-05-01 00:00:00' AND '2012-05-31 23:59:59' ... 
```

MySQL 会将 '2012-05-31 23:59:59' 解释为适当的 DATETIME 或 TIMESTAMP 类型，允许您利用`t.created`.

您的问题是您当前的查询指定*字符串表示*介于*字符串*“01/05/2012”和“31/05/2012”`t.created`之间。由于您将字符串格式设置为日-月-年，因此日组件介于“02”和“30”（含）之间的任何日期都将匹配。（并且五月或之后的任何一个月的第一个月都会匹配，等等）

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T18:20:14.747

一种选择：

```
 WHERE MONTH(t.created) = 5 AND YEAR(t.created) = 2012 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T02:31:55.790

```
SELECT t.created date, t.saleid sale_id, u.id user_id, NULL merchant_name, cheque_number cheque_number, u.first_name name, (
SELECT company_name
FROM users
WHERE id = u.my_charity_id)charity_name, t.campaignname website, t.campaignid campaign_id, t.mysoko_discount discount_percentage, t.discount, t.salecommission sale_commission, t.salevalue total_sale_value, t.salestatus sale_status
FROM `transaction` AS `t` , `users` AS `u`
WHERE DATE_FORMAT( t.created, '%d/%m/%Y' )
BETWEEN STR_TO_DATE('01/05/2012','%d,%m,%Y') AND STR_TO_DATE('31/05/2012','%d,%m,%Y')
AND t.user_id = u.id
LIMIT 0 , 30 
```*

# c# - 多个事件处理程序触发，为什么？

> ID：10768676
> 
> 赞同：2
> 
> 时间：2012-05-26T18:18:14.017
> 
> 标签：c#, windows-phone-7, event-handling

我很难解决这个问题。我已经呆了 3 个小时，但我仍然无法找出它为什么会这样。这是代码：

```
private void Catagory_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        int selectedCategoryId = categoryIdList[categoryListBox.SelectedIndex];

        client.GetItemsAsync(selectedCategoryId);
        client.GetItemsCompleted += 
            new EventHandler<GetItemsCompletedEventArgs>(client_GetItemsCompleted);
    }

void client_GetItemsCompleted(object sender, GetItemsCompletedEventArgs e)
{
        itemIdList.Clear();
        itemNameList.Clear();
        itemNumberList.Clear();
        itemDisplayList.Clear(); //Clears the Display List Items

        if (e.Error == null)
        {
            itemIdList = e.ItemIDList;
            itemNumberList = e.itemNumber;
            itemNameList = e.Result;

            for (int i = 0; i < itemIdList.Count; i++)
            {
                itemDisplayList.Add(new ItemDisplay { itemNumber = itemNumberList[i], itemName = itemNameList[i] });
            }

            //Populating the listbox controll with the itemDisplaylist...
            Items.ItemsSource = itemDisplayList;
        }
        else
        {
            MessageBox.Show("Problem in getting the items list.");
        }
    } 
```

当我第一次更改类别时，它可以完美运行。完美地说，我的意思是它调用函数`GetItemsAsync(selectedCategoryId)`并获取结果并调用事件处理程序`client_GetItemsCompleted()`，事件处理程序的内部工作按预期工作，它使用正确的数据设置列表并显示 itemNumber 和 itemName列表框。但是，当我再次更改类别以获取不同的项目时，它无法正常工作，它所做的是它清除列表并按预期填充列表，运行 for 循环并填充调用的 listBox`Items`但由于某种原因，它再次进入函数顶部并清空所有列表。请告诉我为什么它再次执行该功能？当我再次选择另一个类别时，它会执行事件处理程序 3 次，然后执行 4 次，依此类推。知道为什么要这样做吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-26T18:26:41.003

每次执行时：

```
 client.GetItemsCompleted += 
```

您向事件添加了一个订阅者，所以第二次它会触发两次（第三次三次，等等）。

完成方法中的取消订阅（ -= ）：

```
void client_GetItemsCompleted(object sender, GetItemsCompletedEventArgs e)
{
    try {
       /* .... */
    }
    finally {
        client.GetItemsCompleted -= 
            new EventHandler<GetItemsCompletedEventArgs>(client_GetItemsCompleted);
    }
} 
```

或在每次调用之前启动客户端对象。

```
var client = new ...();
client.GetItemsAsync(selectedCategoryId);
client.GetItemsCompleted += 
            new EventHandler<GetItemsCompletedEventArgs>(client_GetItemsCompleted); 
```

# vim - 删除 Vim 中下一行不带 '£' 的所有换行符

> ID：10768678
> 
> 赞同：1
> 
> 时间：2012-05-26T18:18:27.417
> 
> 标签：vim, macvim

我有一个非常大的文件，我想删除每行末尾的所有换行符，所以要合并所有，除非该行以字符开头 `£`。

所以，如果我有这个：

```
data1
data2
£data3
data4
data5 
```

我想结束这个：

```
data1data2
£data3data4data5 
```

我在想类似的东西

```
:%s/\n(but not \n£)//g 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T18:24:33.690

只需删除所有新行，然后将它们再次添加到应有的位置。或者使用负面的展望，但这对任何人来说都更简单、更容易、更容易理解。

```
s/\n//g
s/£/\n£/g 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T19:40:35.350

@pb2q 提供的解决方案将删除所有换行符*和下一个字符*，如果此字符不是“£”*或换行符*（因为默认情况下集合不匹配换行符），而在您的问题中您要求仅删除换行符。这可以通过使用`\ze`或负前瞻来解决：

```
%s/\n\ze\_[^£]
%s/\n£\@! 
```

注意一些事情：首先，如果你想删除一些文本，你可以省略一个替换字符串（除非你需要一个在这种情况下你不需要的替换标志）。其次，`\_`在集合中添加换行符。它也可以写成`[^£\n]`，但我想这不是你能做的最好的事情：任何来自某种支持 PCRE 的语言的人都认为`[^£\n]`“匹配除 '£' 和换行符之外的任何东西”，而在 Vim 中它真的是“匹配除“£”之外的任何内容（包括换行符）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T02:56:04.887

我会使用以下`:global`命令：

```
:g/^[^£]/-j! 
```

它遍历所有以任何字符开头的行，但 `£`从上到下，并通过`:join`命令将每一行与前一行连接起来。

# python - 正则表达式介于两者之间，Python

> ID：10768679
> 
> 赞同：2
> 
> 时间：2012-05-26T18:18:36.793
> 
> 标签：python, regex, wxpython, wxwidgets

为什么这个正则表达式不起作用？

```
import re
i="<wx._controls.Button; proxy of <Swig Object of type 'wxButton *' at 0x2d040b0> >"
m = re.match("controls(.*)[;]", i)
if m:
    print m.group(1) 
```

它什么也不返回。我正在尝试将所有内容置于“控制”和“；”之间 此解决方案适用于其他测试用例，但不适用于此测试用例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T18:21:05.577

[`re.match`](http://docs.python.org/library/re.html#re.match)仅匹配字符串的开头。你想要[`re.search`](http://docs.python.org/library/re.html#re.search)。

但是，看起来您正在评估`repr`对象的结果以获取类名。为什么不直接使用`obj.__class__.__name__`呢？关于使用[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)并避免特定于单个类的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T18:20:31.740

`.match()`从一开始就看起来。你想要`.search()`。

# android - android中的接口与匿名类

> ID：10768681
> 
> 赞同：0
> 
> 时间：2012-05-26T18:19:00.273
> 
> 标签：android

我对匿名类的后端工作有点困惑，比如我们有一个按钮并且我们正在设置 onclickListener

```
Button B = (Button)findViewById(R.id.myButton);
B.setOnClickListener(new onClickListener(){ 
          public void onClick(View V){ 
              Log.v("","Hello world");
          }
 )); 
```

后端实际发生了什么？这会实现 View.OnClickListener 的接口还是其他东西？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T18:23:56.967

请看这个

[匿名类如何使用“扩展”或“实现”？](https://stackoverflow.com/questions/5848510/how-can-an-anonymous-class-to-extends-or-implements)

[http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T18:24:46.573

是的，它是实现 OnClickListener 接口的新未命名类的实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T18:29:40.067

匿名类必须始终扩展类或实现接口。

```
b.setOnClickListener(new OnClickListener() { 
    public void onClick(View V) { 
        Log.v("", "Hello world");
    }
}); 
```

`View.OnClickListener`在这种情况下，您正在创建一个实现接口的新匿名（未命名）类。这是有效的，因为该`setOnClickListener`方法采用 type 的参数`View.OnClickListener`。

# linux - 用于 Linux 中 C/C++ 编程的 IDE

> ID：10768683
> 
> 赞同：0
> 
> 时间：2012-05-26T18:19:31.770
> 
> 标签：linux, ide

哪个 IDE 最适合在 Linux 中使用 C/C++ 进行编码，它提供以下功能：

1.  调试
2.  代码完成
3.  工具提示/文档（函数定义）

此外，如果 IDE 通常可用于 Python 和 Perl 编码，那将是最好的选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T18:24:02.607

我个人最喜欢的是KDevelop。我从未使用过它的调试器（我使用的是 straight `gdb`），但它的代码完成和文档查看器非常棒。你会发现的最好的之一。此外，它不是用 Java 编写的，而是用 C 或 C++ 编写的，因此它在较差的系统上运行得更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T18:23:41.240

我通常使用[Eclipse](http://www.eclipse.org/)。[它通过CDT](http://www.eclipse.org/cdt/)对 C/C++ 有很好的支持。它具有您要求的所有功能。它还通过一个名为[pydev](http://pydev.org/)的插件支持 python 。对于 perl，你有[epic](http://www.epic-ide.org/)。

此外，还有更多可用的插件。只是一个简短的列表：

1.  SVN 集成
2.  支持许多 linux 工具（autotools、valgrind、gcov、gprof 等）
3.  应用程序生命周期 (Mylyn)

也可以在 stackoverflow中查看类似[问题的答案。](https://stackoverflow.com/questions/24109/c-ide-for-linux)

维基百科总是派上用场。[在这里](http://en.wikipedia.org/wiki/Comparison_of_integrated_development_environments)，您可以比较按编程语言分组的许多 IDE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T18:35:16.047

我更喜欢[QtCreator](http://qt.nokia.com/products/developer-tools)进行 C++ 开发。它与使用`Qt`工具包（我偶尔需要）进行编程紧密耦合，但适用于更多“通用”程序。我特别喜欢它对`CMake`. 当然`qmake`也支持。除此之外，它`QtCreator`是*独立于平台的*，并且内置了对多个版本控制系统的支持，包括`SVN`和`git`. 最后但并非最不重要的一点是，它的调试功能非常棒（尽管我有时更喜欢`gdb`手动使用）。

编辑：澄清：`QtCreator`既不支持Python也不支持Perl。它仅适用于 C/C++ 编程。对于 Perl，我个人最喜欢[vim 编辑器](http://www.vim.org/)（只使用正常的语法突出显示；我在那里有点纯粹）。对于 Python，我不能推荐任何东西，希望我的 stackoverflowers 同伴能够介入:)

# .net - 我如何告诉 ninject 3 默认情况下对所有类型使用单例范围？

> ID：10768684
> 
> 赞同：5
> 
> 时间：2012-05-26T18:19:37.200
> 
> 标签：.net, dependency-injection, inversion-of-control, ninject

我希望我的应用程序始终将服务用作单例，如何将 Ninject 设置为默认使用单例范围。我使用约定来注册我的类型，我需要使用 Bind<> 方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T10:03:15.277

Hy，假设您的所有服务都从您那里继承，`IService`可以编写以下内容

添加以下 using 语句

```
using Ninject.Extensions.Conventions; 
```

使用约定，如

```
kernel.Bind( x => x
.FromThisAssembly()
.SelectAllClasses().InheritedFrom<IService>()
.BindAllInterfaces()
.Configure(b => b.InSingletonScope())); 
```

您可能需要根据自己的需要稍微调整一下。

# ruby-on-rails - Rails 3 - Omniauth 和设计 - SSL 证书错误

> ID：10768689
> 
> 赞同：1
> 
> 时间：2012-05-26T18:20:29.553
> 
> 标签：ruby-on-rails, ssl, ssl-certificate, omniauth

我设置了我的 rails 应用程序，集成了 Omniauth 和 Devise。但是，当我从 facebook/google/yahoo 登录后的回调函数（/auth/:provider/callback）时，我看到 SSL 证书错误。我还在omniauth.rb中下载了cacert.pem & config，但是这个错误仍然存​​在。

谁能帮我？

# ios - iAd 横幅永远不会在模拟器中获得广告

> ID：10768693
> 
> 赞同：0
> 
> 时间：2012-05-26T18:20:42.890
> 
> 标签：ios, xcode, iad

```
- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error 
```

总是被调用......我没有在模拟器中看到任何广告。这真的很奇怪，因为我以前做过 iAd，而且它们非常简单。

到目前为止，我已经清理/重建并再次下载了配置文件。如果我不隐藏它......它会显示一个空白广告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:26:27.840

当您说“空白广告”时，您是指黑白广告，上面写着“这是一个测试广告”吗？如果是这样，这就是您应该看到的——iAd 只向模拟器提供测试广告。一切安好 ：）

# sql - 数据库规范化 - 谁是对的？

> ID：10768696
> 
> 赞同：15
> 
> 时间：2012-05-26T18:21:09.507
> 
> 标签：sql, sql-server, database, database-normalization, redundancy

我的教授（他声称对系统开发有多年的深刻理解）和我正在争论我们数据库的设计。

举个例子：我的教授坚持这个设计是正确的：（列列表）

```
Subject_ID
Description
Units_Lec
Units_Lab
Total_Units 
```

ETC...

注意总单位栏。他说这个栏目必须包括在内。我试图解释它是不必要的，因为如果你想要它，那么只需将两者相加即可进行查询。

我向他展示了我在书中找到的一个例子，但他坚持说我在制作我们的系统时不必过多地依赖书籍。同样的事情也适用于与此类似的情况：

```
student_ID
prelim_grade
midterm_grade
prefinal_grade
average 
```

他希望我包括平均值！无论我走到哪里，我都能发现自己阅读的文章让我相信这违反了规范化。如果我需要平均值，我可以很容易地计算出三个等级。他列举了一些场景，包括（'嘿！如果查询被意外删除了怎么办？你会怎么做？这就是为什么你需要将它包含在你的表中！'）

我是否需要重建我的数据库（由大约 40 多个表组成）以符合他的要求？我错了，只是忽略了这些事情吗？

另一件事是他想在付款表中包括总金额，我认为这是不必要的。（只需计算产品的单价和数量。）他指出，我们需要该列来计算对整个系统管理至关重要的借方和/或贷方，这是平衡交易所必需的。请告诉我你的想法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-26T18:24:22.253

你是绝对正确的！规范化的规则之一是减少那些可以通过使用其他属性的值很容易推导出来的属性。即，通过执行一些数学计算。在您的情况下，只需添加即可获得总单位列。

告诉您的教授，拥有该特定列将显示传递依赖的明显迹象，并且根据第三规范化规则，建议减少这些。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-26T19:42:34.507

当您说您的解决方案更加规范化时，您是对的。

但是，有一种叫做**非规范化**（google for it）的东西，它是关于故意违反规范化规则以提高查询性能。

例如，您想检索按减少数量或总单位排序的前五个主题（无论是什么）。

您的解决方案需要对两个表（`subject`和`unit`）进行全面扫描，加入结果集并对输出进行排序。

您教授的解决方案只需要从索引中获取前五条记录`total_units`。

这当然是以增加维护成本为代价的（无论是在计算资源方面还是在开发方面）。

我不能告诉你谁是“正确的”：我们对项目本身、数据量、要进行的查询等一无所知。这是每个项目都需要做出的决定（对于某些项目，它可能是核心决定）。

问题是教授确实有这个要求的理由，这可能是公正的，也可能是不公正的。

为什么他没有亲自向您解释以上所有内容，这是另一个问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-26T18:37:15.410

除了 redskins80 的出色回答，我想指出**为什么**这是一个坏主意：每次您需要更新其中一个源列时，您也需要更新计算列。这是更多可以轻松包含错误的工作（可能在 1 年后，当不同的程序员正在更改系统时）。

也许您可以改用计算列？那将是一个可行的中间立场。

编辑：非规范化有它的位置，**但它是最后采取的措施**。这就像化疗：医生给你注射毒药只是为了治愈对你健康更大的威胁。这是最后一步。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-13T13:03:01.707

认为添加此内容很重要，因为当您看到问题时，我认为答案并不完整。原始问题已得到很好的回答，但这里有一个小故障。所以我只考虑下面引用的附加问题：

> 另一件事是他想在付款表中包含总金额，我认为这是不必要的（只需计算产品的单价和数量即可。）。他指出，我们需要该列来计算对整个系统管理至关重要的借方和/或贷方，它是平衡交易所必需的。请告诉我你的想法。

这个编辑很有趣。基于这是一个处理金钱的交易系统的事实，它必须负责。我采用一些基本术语：交易、产品、价格、金额。

从这个意义上说，它非常普遍，甚至需要非规范化。为什么？因为你需要它负责。因此，当事务被注册时，它可能永远不会被修改。如果您需要更正它，那么您将进行另一笔交易。

现在是的，您可以计算例如产品价格 * 金额 * 税金等。这在标准化意义上是有意义的。但是，您将需要完全锁定所有相关记录。以 products 表为例：如果您在交易前更改价格，则应在交易发生时将其考虑在内。但如果之后价格发生变化，则不会影响交易。

因此，仅加入 transaction.product_id=products.id 是不可接受的，因为该产品可能会发生变化。例子：

```
2012-01-01 price = 10
2012-01-05 price = 20
Transaction happens here, we sell 10 items so 10 * 20 = 200
2012-01-06 price = 22 
```

现在我们在 2012-01-10 查找交易，所以我们这样做：

```
SELECT 
    transactions.amount * products.price AS totalAmount 
FROM transactions 
INNER JOIN products on products.id=transactions.product_id 
```

那将给出 10 * 22 = 220 所以这是不正确的。

所以你有2个选择：

1.  不允许更新产品表。因此，您对该表进行了版本控制，因此对于每条记录，您都添加了一个新的 INSERT 而不是更新。所以交易一直指向产品的正确版本。

2.  或者您只需将字段添加到事务表中。因此，将 totalAmount 添加到 transactions 表并在插入事务时计算它（在数据库事务中）并保存。

是的，它是非规范化的，但它有充分的理由，它让它负责。您只知道并通过交易、锁等验证了交易发生的那一刻，它与所描述的产品相关，价格 = 20 等。

除此之外，当您无论如何都必须这样做时，这只是非规范化的一件好事，运行报告非常容易。月、年等总交易金额，计算起来非常简单。

规范化有很多好处，例如没有双重存储、单点编辑等。但在这种情况下，您只是不想要这个概念，因为对于事务日志数据库来说，这是不允许的，也不首选的。

将交易视为对现实世界中发生的事情的登记。它发生了，你把它写下来。现在你不能改变历史，它是按原样写的。未来不会改变它，它发生了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-26T19:26:04.450

如果你想实现好的、旧的、经典的关系模型，我认为你所做的是正确的。

一般来说，这实际上是一个哲学问题。某些系统，例如 Oracle，甚至允许您放弃传统的关系模型以支持对象，这（通过保存在表中的复杂结构）违反了第一个 NF，但给了您面向对象模型的力量（您可以使用继承、覆盖方法等），这在某些情况下非常棒。使用的语言仍然是 SQL，只是扩展了。

我知道我的答案偏离了主题（因为我们考虑了一种全新的数据库类型），但我认为在一个非常普遍的问题之际分享它是一件有趣的事情。

实际应用程序的数据库设计几乎不是制作什么表的问题。目前，在保存和处理数据方面有无数种可能性。有我们都知道和喜爱的关系系统、对象数据库（如 db4o）、对象关系数据库（不要与对象关系映射混淆，我的意思是 Oracle 11g 等工具及其对象）、xml 数据库（以 eXist 为例） 、流式数据库（如 Esper）和目前蓬勃发展的 noSQL 数据库（有些人坚持不应该将它们称为数据库），如 MongoDB、Cassandra、CouchDB 或 Oracle NoSQL

在其中一些情况下，规范化失去了意义。每个模型都有完全不同的目的。我认为“数据库”一词的含义比以前要广泛得多。

谈到关系数据库，我同意你的观点，而不是教授的观点（尽管我不确定强烈反对他是否是个好主意）。

现在，说到重点。我认为你可以通过表现出你的思想开放并且你理解有很多选择需要考虑（包括他的观点）来赢得他，但是这种情况需要你对数据进行规范化。

我知道我的回答对于 stackoverflow 帖子来说是良心之流，但我希望它不会被视为疯子喋喋不休。

在关系拉锯战中祝你好运

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-14T23:04:46.243

您在这里谈论的是历史和财务数据。存储一些永远不会改变的计算是很常见的，因为那是当时收取的成本。如果您从产品 * 价格计算并且交易后 6 个月价格发生变化，那么您的值不正确。你的教授很聪明，听他的。此外，如果您在数据库之外进行大量报告，您不希望经常计算在没有另一条数据输入记录的情况下不允许更改的值。当您只需要执行一次时，为什么要在应用程序的历史上执行多次计算？这浪费了宝贵的服务器资源。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-14T22:39:49.447

规范化的目的是消除冗余，从而消除更新异常，主要是在事务系统中。迄今为止，关系仍然是事务处理、DW、主数据和许多 BI 解决方案的最佳解决方案。大多数 NOSQL 具有低完整性要求。所以你失去了我的推文——烦人但不是灾难性的。但是失去我的百万美元股票交易是一个大问题。选择不是 NOSQL 与关系。NOSQL 在某些事情上做得很好。但是关系不会去任何地方。它仍然是面向事务的、面向更新的解决方案的最佳选择。当数据为只读或多读时，可以放宽规范化的要求。这就是为什么冗余在 DW 中不是一个大问题的原因。没有更新。

# python - 在 OSX 上构建 PyOpenNI

> ID：10768701
> 
> 赞同：2
> 
> 时间：2012-05-26T18:22:10.283
> 
> 标签：python, macos, kinect, openni

我正在研究一个适当的（或至少是简单的堆栈），以最终通过 OSX 平台上的 python api 从 kinect 获取骨架信息。我发现的大部分信息都非常分散且不连贯。

虽然基于 Windows 的堆栈似乎是微软在其 kinect SDK 之上的自己的 pykinect 似乎非常明显，但我似乎无法弄清楚什么在 OSX 环境中运行良好。

这是我到目前为止编译的信息：

*   [libfreenect](https://github.com/OpenKinect/libfreenect)是低级驱动程序的明显来源（这部分工作得很好）
*   [OpenNI](http://openni.org/)提供框架 + NITE 中间件来提供识别。（不是蟒蛇）
*   [PyOpenNI](https://github.com/jmendeth/PyOpenNI) - OpenNI 的 python 绑定，支持骨架和其他高级功能。

我得出的结论是，这是迄今为止最推荐的堆栈。我想要实现的是简单的骨架数据，类似于 windows SDK python 包装器为您提供的开箱即用的数据。最终，我将在基于 PyQt 的应用程序中使用它来绘制显示，然后在 Maya 中应用数据。

我的问题分为两部分，如果是最合适的，我会接受任何一个方向的答案......

**PyOpenNI 的构建问题**

到目前为止，我无法在 OSX Snow Leopard (10.6.8) 或 Lion (10.7.4) 上成功构建 PyOpenNI。两个系统都更新了 xcode。我注意到源文件被硬编码为期望 python2.7，所以在雪豹上我必须确保它已安装并且是默认版本（也尝试了 virtualenv）。

在 Snow Leopard 上，我看到 cmake 进程为 python 找到不同的库、头文件、bin，最终 make 生成了一个 .so，它因“不匹配的解释器”而崩溃。

在 Lion 上，我也遇到了不匹配的解释器崩溃。但是在我通过自制软件安装了python2.7之后，它产生了一个新的错误：

```
ImportError: dlopen(./openni.so, 2): Symbol not found: _environ
  Referenced from: /usr/local/lib/libpython2.7.dylib
  Expected in: dynamic lookup 
```

是否有任何特定步骤可以在我缺少的 OSX 上构建它，例如环境变量以确保其指向正确的 python2.7 库？有没有人有这个平台的成功构建过程？

**替代问题**

这仍然是 OSX 最推荐的堆栈吗？

**跟进**

我已经接受我自己的答案作为临时工作解决方案。如果有人能提供更好的，我很乐意接受！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T14:27:33.637

*更新*

[在我提交了一个补丁后（这里的信息](https://github.com/jmendeth/PyOpenNI/pull/18)） ，这个过程的一部分是不必要的。从那以后，我还写了一篇关于在 OSX 上安装整个堆栈的更详细的博客文章：在 OSX 上 [使用 Xbox360 Kinect 入门](http://www.justinfx.com/2012/06/21/getting-started-with-xbox-360-kinect-on-osx/)

* * *

在对此进行了一番修改之后，我找到了一个有效的修复程序（尽管它没有解决构建级别的问题）。cmake 存在一个问题，它无法正确检测除系统框架之外的其他 python 框架（这会导致 python 二进制文件和库之间的不匹配）。

我首先通过自制软件重新安装了我的 python2.7 安装，添加了 --framework 标志

构建模块后，我通过 otool 注意到它仍然链接到我的系统 python，并且 Lion 上的系统 python 是 fat i386 和 x86_64。我还注意到链接到 openni.so 的 libboost（通过 homebrew 安装）也链接到系统 python 而不是 homebrew。所以我使用以下方法重新链接它们：

```
install_name_tool -change \
    /System/Library/Frameworks/Python.framework/Versions/2.7/Python \
    /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Python \
    openni.so 

install_name_tool -change \
    /System/Library/Frameworks/Python.framework/Versions/2.7/Python \
    /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Python \
    /usr/local/Cellar/boost/1.49.0/lib/libboost_python-mt.dylib 
```

完成此操作后，我能够毫无错误地导入 openni。

以下是解决方法的摘要：

1.  python2.7作为框架，x86_64（不胖）
2.  libboost 链接到正确的 64 位 python
3.  `export CPPFLAGS="-arch x86_64"`
4.  cmake并像平常一样制作步骤
5.  将 openni.so 重新链接到 64 位 python

理想情况下，有人会发布比这个更好的答案，展示如何在构建阶段使用环境变量修复此问题，而不必在最后进行重新链接修复。

# android - Android - 如何在首次启动时进行加载

> ID：10768703
> 
> 赞同：0
> 
> 时间：2012-05-26T18:22:25.233
> 
> 标签：android

嗨，如果我做错了什么，这是我在 stackoverflow 中的第一个问题。

我的问题是，当我第一次启动应用程序时，我需要在数据库中写入 SQL 数据。如果我在编写 sql 时在 onCreate() 中这样做，它不会显示视图，所以它就像冻结一样。如果我在那里制作加载器，它不会显示，因为首先我想完成所有的 oncreate，然后显示视图。然后，如果 SQL 为空，我让 AlertDialog 运行，以通知用户需要“安装”，并在确认我想在它运行时插入 SQL 时制作加载框...

所以我的问题是：如何在活动运行时加载 onCreate ......你能给我一些好主意......这是我制作的代码：

```
private DatabaseHandler db = new DatabaseHandler(this);

Context context;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    context = this;     

    if(db.getWordsCount() == 0)
    {           
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Instalation needed");
        builder.setMessage("Database need to be installed");
        builder.setPositiveButton("Ok", dialogClickListener);
        builder.setNegativeButton("Close", dialogClickListener);
        builder.show();
    }
}

DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() { 
    public void onClick(DialogInterface dialog, int which) { 
        switch (which){ 
        case DialogInterface.BUTTON_POSITIVE:

                    ProgressDialog progress = new ProgressDialog(context);
              progress.setTitle("Instalation");
              progress.setMessage("Please wait...");
                progress.show();                
                db.insertWords(db);
                progress.cancel();
            break; 

        case DialogInterface.BUTTON_NEGATIVE: 
            finish();
            break; 
        } 
    } 
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:45:49.250

有很多相同的例子：

[http://ashwinrayaprolu.wordpress.com/2011/03/15/android-database-example-database-usage-asynctask-database-export/](http://ashwinrayaprolu.wordpress.com/2011/03/15/android-database-example-database-usage-asynctask-database-export/)

```
private class InsertDataTask extends AsyncTask {
        private final ProgressDialog dialog = new ProgressDialog(
                DatabaseActivity.this);

        // can use UI thread here
        protected void onPreExecute() {
            this.dialog.setMessage("Inserting data...");
            this.dialog.show();
        }

        // automatically done on worker thread (separate from UI thread)
        protected Void doInBackground(final String... args) {
            DatabaseActivity.this.application.getDataHelper().insert(args[0]);
            return null;
        }

        // can use UI thread here
        protected void onPostExecute(final Void unused) {
            if (this.dialog.isShowing()) {
                this.dialog.dismiss();
            }
            // reset the output view by retrieving the new data
            // (note, this is a naive example, in the real world it might make sense
            // to have a cache of the data and just append to what is already there, or such
            // in order to cut down on expensive database operations)
            new SelectDataTask().execute();
        }
    } 
```

# javascript - 在 knockoutjs 教程中，无线电绑定无法按预期工作

> ID：10768708
> 
> 赞同：0
> 
> 时间：2012-05-26T18:23:14.033
> 
> 标签：javascript, knockout.js

我尝试简单地演示来自 knockout.js 教程的单选按钮绑定，但它不能按原样工作。例如，评论说应该检查 msg 值，但事实并非如此。

文档链接在这里[http://knockoutjs.com/documentation/checked-binding.html](http://knockoutjs.com/documentation/checked-binding.html)

```
<p>Send me spam: <input type="checkbox" data-bind="checked: wantsSpam" /></p>
<div data-bind="visible: wantsSpam">
    Preferred flavor of spam:
    <div><input type="radio" name="flavorGroup" value="cherry" data-bind="checked: spamFlavor" /> Cherry</div>
    <div><input type="radio" name="flavorGroup" value="almond" data-bind="checked: spamFlavor" /> Almond</div>
    <div><input type="radio" name="flavorGroup" value="msg" data-bind="checked: spamFlavor" /> Monosodium Glutamate</div>
</div>

var viewModel = {
        wantsSpam: ko.observable(true),
        spamFlavor: ko.observable("almond") // Initially selects only the Almond radio button
    };

    // ... then later ...
    viewModel.spamFlavor("msg"); // Now only Monosodium Glutamate is checked​ 
```

​</p>

这是链接[http://jsfiddle.net/HhXGH/55/](http://jsfiddle.net/HhXGH/55/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:56:42.340

您在底部缺少这一行：

ko.applyBindings(viewModel);​</p>

仅供参考：如果您不知道 ko.applyBindings 是什么，以及它如何与 Knockout 绑定交互，请阅读此处的 Activating Knockout 部分：http: [//knockoutjs.com/documentation/observables.html](http://knockoutjs.com/documentation/observables.html)

编辑：更新的小提琴

[http://jsfiddle.net/jearles/HhXGH/56/](http://jsfiddle.net/jearles/HhXGH/56/)

# java - 使用 Java 和 Ektorp 在 CouchDB 中进行 BulkUpdate

> ID：10768709
> 
> 赞同：1
> 
> 时间：2012-05-26T18:23:37.260
> 
> 标签：java, couchdb, bulk, ektorp

我有一个派生自 org.ektorp.support.CouchDbDocument 的类：

```
@TypeDiscriminator( value="doc.type == 'TYPE_PRODUCT' )
public class Product extends CouchDbDocument { 
.... 
```

还有一个存储库类：

```
public class ProductRepo extends CouchDbRepositorySupport<Product> { .... 
```

存储库类有一个方法：

```
public List<DocumentOperationResult> executeBulk( Set<Product> bulk ) {
    return db.executeBulk( bulk );
} 
```

该方法用于创建和更新项目。创作进展顺利。但是在更新时，Ektorp 会抛出这个异常：

```
Caused by: java.lang.IllegalStateException: cannot set id, id already set
    at org.ektorp.support.CouchDbDocument.setId(CouchDbDocument.java:39)
... 18 more 
```

我正在做的是发送一组最初由同一存储库中的视图获取的对象 - 当然，这些对象确实有一个非空的 Id。这当然不应该发生，因为对象确实有一个 id 并且必须更新，而不是创建。根据 Ektorp 文档，db.executeBulk 应该处理创建和更新文档。

在 CouchDbDocument.setId 中引发了异常：

```
@JsonProperty("_id")
public void setId(String s) {
  Assert.hasText(s, "id must have a value");
  if (id != null && id.equals(s)) {
    return;
  }
  if (id != null) {
    throw new IllegalStateException("cannot set id, id already set");
  }
  id = s;
} 
```

但为什么 ？发送的对象确实设置了 ID（也设置了修订版），因此 Ektorp 应该检测到我们正在谈论现有对象，而不是尝试为它们生成新的 ID。任何人都知道如何解决这个问题，或者在这种情况下放弃 Ektorp 并在 http 上使用纯 json 的解决方案？

（项目在 Jboss 7.1.1.Final、CouchDB 1.2.0、Ektorp 1.2.2 上运行）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T07:41:19.487

Ektorp 中的批量操作响应处理程序不检查 id 是否已设置。当散装对象扩展 CouchDbDocument 时，这会导致问题，而 CouchDbDocument 不允许多次设置 id。这认为这是一个错误，它将在 Ektorp 1.3.0 中修复

在 1.3.0 之前的解决方法是在您的 Product 类中覆盖**setId**并稍微放宽断言。

# python - 为什么Python简单的除法计算返回0？

> ID：10768724
> 
> 赞同：56
> 
> 时间：2012-05-26T18:24:22.423
> 
> 标签：python

为什么这个简单的计算返回 0

```
>>> 25/100*50  
0 
```

虽然这实际上计算正确？

```
>>> .25*50
12.5

>>> 10/2*2  
10 
```

第一个例子有什么问题？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-05-26T18:25:49.410

在 Python 2 中，`25/100`执行整数除法时为零。因为结果小于`1`。

`from __future__ import division`您可以通过添加到您的脚本来“修复”这个问题。`/`这将在使用运算符并`//`用于整数除法时始终执行浮点除法。

另一种选择是将至少一个操作数设为浮点数，例如`25.0/100`.

在 Python 3 中，`25/100`总是`0.25`.

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-26T18:26:17.557

这是整数**截断**的问题（即，数字的任何小数部分都被丢弃）。所以：

`25 / 100`给`0`

但是，只要除法中的*至少一个*操作数是浮点数，您就会得到浮点数结果：

 `25 / 100.0`或`25.0 / 100`  或`25.0 / 100.0`全部给`0.25`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T18:26:02.763

`25/100`是一个整数计算，它（通过截断）四舍五入到`0`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-02T00:39:17.900

我只是通过这个技巧解决了这个问题。

> (25 * 1.0) / 100 * 50

所以，(1.0) 确保分子是浮点型

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-15T21:00:39.060

如果结果小于 1，Python 2 将返回零进行整数除法。

解决方案是将整数之一转换为浮点数，例如

```
float(25)/100*50 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2019-01-03T14:23:09.220

*   在 Python 2 中：默认情况下 25/100 是整数除法

*   在 Python 3 中：25/100 始终为 0.25。

# ajax - 使用 Ajax 的最佳方式

> ID：10768728
> 
> 赞同：0
> 
> 时间：2012-05-26T18:24:50.420
> 
> 标签：ajax, jquery

我有一个网页，一旦加载，它会发送大量 Ajax 调用来填充页面的某些部分。这是一个 Django 模板，它发送大约六个调用，代码类似于：

```
$.get("http://127.0.0.1:8000/purchase/?name="+me.username, function(data){
        $("#purchase").append(data);
    }); 
```

有时它们在用户单击按钮时被调用，但它们大多在页面刷新时被调用。

我是 Ajax 的新手，我想知道这是否是以最佳方式使用这项技术的正确方法。发送 Ajax 调用是否可以发送类似的单独调用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:40:12.303

现在，我认为`$.get()`如果您希望它们在页面加载而不是刷新时触发，只需将这些脚本放入 jQuery 就绪函数中......是的，页面表现得像这样是正常的。这就是 AJAX 的意义所在。

```
$(document).ready(function(){
    $.get("http://127.0.0.1:8000/purchase/?name="+me.username, function(data){
        $("#purchase").append(data);
    });

    //other  $.get 's
}); 
```

还可以使用[jQuery ready()](http://api.jquery.com/ready/)文档。

# java - iOS 应用服务器

> ID：10768730
> 
> 赞同：-1
> 
> 时间：2012-05-26T18:25:20.517
> 
> 标签：java, ios, json

我正在尝试构建一个服务器来处理来自 iOS 应用程序的 JSON 请求。我的问题是，有什么例子可以做到这一点吗？完成这项工作的最简单和最具扩展性的方法是什么？

我一直在试验 Ruby on Rails、Django、Play！框架，并想了解其他人的想法。这些框架是否有任何陷阱？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T18:28:18.147

这个问题很可能会因为没有建设性或“购物”而被关闭。但是，我建议您查看任何广泛使用的 Java REST 开发工具包。我头上的两个是泽西岛和 CXF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T18:28:58.277

一个简单的解决方案是在 tomcat 中使用 servlet，并使用 Google gson 管理编码和解码。

但是你的问题太宽泛了，所以从现在开始你必须用谷歌搜索一下。

# playn - playn 入门 - eclipse

> ID：10768732
> 
> 赞同：2
> 
> 时间：2012-05-26T18:25:31.753
> 
> 标签：playn

我按照在 eclipse indigo EE 中设置环境的所有说明进行操作。我在 ubuntu 12.04 64bit 和 Windows 7 64bit 中都做到了，一切都很顺利，直到我尝试运行导入的示例（showcase-java）。构建失败并在 Eclipse 控制台中出现以下错误：

无法在项目 playn-showcase-java 上执行目标：无法解析项目 com.googlecode.playn:playn-showcase-java:jar:1.0-SNAPSHOT 的依赖项：找不到工件 com.googlecode.playn:playn-showcase- forplay-legacy (http://forplay.googlecode.com/svn/mavenrepo) 中的 core:jar:1.0-SNAPSHOT -> [帮助 1]

请注意，我遵循“入门”页面上的所有说明，并且我确信我不会错过页面上提到的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:03:24.070

[嗨，这里有一个更详细的教程，关于如何使用 playn链接](http://programmerintrouble.blogspot.de/2013/04/getting-started-with-eclipse-and-playn.html)设置 Eclipse 可能对你有帮助。

# php - 解析 Bibtex 文件

> ID：10768747
> 
> 赞同：2
> 
> 时间：2012-05-26T18:27:22.193
> 
> 标签：php, javascript

我想使用 php 或 javascript解析以下`bibtex`字符串或整个文件。`.bib`

有什么建议么？

字符串看起来像：

```
@article{Sng:2010:PMW:1750585.1750678,
 author = {Sng, Colin T. S. and Manlove, David F.},
 title = {Popular matchings in the weighted capacitated house allocation problem},
 journal = {J. of Discrete Algorithms},
 issue_date = {June, 2010},
 volume = {8},
 number = {2},
 month = jun,
 year = {2010},
 issn = {1570-8667},
 pages = {102--116},
 numpages = {15},
 url = {http://dx.doi.org/10.1016/j.jda.2008.11.008},
 doi = {10.1016/j.jda.2008.11.008},
 acmid = {1750678},
 publisher = {Elsevier Science Publishers B. V.},
 address = {Amsterdam, The Netherlands, The Netherlands},
 keywords = {Maximum popular matching, Polynomial-time algorithm, Popular matching     problem, Priorities, Strict preference lists},
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T18:41:59.730

我不太记得 BibTeX 语法，但我建议转换语法以使其可解析`JSON.parse`，如下所示：

```
var bibjson = bibtex.replace(/(\w+)\s*=\s*\{/g,"\"$1\": \"")
          .replace(/\}(?=\s*[,\}])/g,"\"")
          .replace(/@(\w+)\s*\{([^,]*)/,"{\"$1\": \"$2\"");
var bibobj = JSON.parse(bibjson); 
```

# c# - C# 到 SQL 连接用户名问题

> ID：10768750
> 
> 赞同：0
> 
> 时间：2012-05-26T18:27:51.043
> 
> 标签：c#, sql

我正在编写的程序必须能够在每台电脑上运行。这是一个表单应用程序。如何获取任何电脑的用户名信息作为连接字符串的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T18:30:59.313

从 myapplicaiton.exe.config：

```
connectionString="Data Source=myserver;Initial Catalog=myDB;Persist Security Info=False;User ID=USER_NAME;Password=USER_PASS;" 
```

# php - 通过 PHP exec 传递变量

> ID：10768751
> 
> 赞同：4
> 
> 时间：2012-05-26T18:27:59.893
> 
> 标签：php, exec

我正在使用 php`exec`命令执行另一个文件。

我正在使用以下内容：

```
 exec ('php email.php'); 
```

但我希望通过 exec 命令将一个名为 $body 的变量传递给“email.php”文件。如何通过 exec 命令传递变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T18:48:58.693

传递参数：

```
exec('php email.php "' . addslashes($body) . '"'); 
```

*在email.php*中获取它：

```
$body = stripslashes($argv[1]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T18:33:21.417

利用：

```
 exec ('php email.php firstparameter secondparameter thirdparameter'); 
```

您也可以参考：[命令行手册](http://php.net/manual/en/features.commandline.php "命令行手册")

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-26T18:42:06.327

您可以将其作为参数传递给`email.php`

```
exec('php email.php "'.addslashes($body).'"'); 
```

并`email.php`得到它

```
$body = stripslashes($argv[1]); 
```

但是，如果 $body 包含带有花哨字符的长文本，最好将其保存到具有随机名称的临时文件中。

```
<?php
$temp_file = uniqid().'.txt';
file_put_contents($temp_file, $body);
exec("php email.php $temp_file"); 
```

然后在 中`email.php`，获取`$body`from 的内容`$temp_file`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T02:23:10.803

从 php exec 命令向 php 脚本传递参数的 2 种方法：

```
<?php 
$fileName = '/var/www/ztest/helloworld.php 12';
$options = 'target=13';
exec ("/usr/bin/php -f {$fileName} {$options} > /var/www/ztest/log01.txt 2>&1 &");

echo "ended the calling script"; 
?> 
```

查看[完整答案](https://stackoverflow.com/a/14993436/1166727)（带有调用脚本和结果）

# html - 拐角处的边界半径中断

> ID：10768752
> 
> 赞同：0
> 
> 时间：2012-05-26T18:28:03.200
> 
> 标签：html, css

我为网站设计了一个内容框，在桌面上看起来不错。但现在我想把它放在手机上。
您可以在此处查看仅包含相关 html+css 的示例[http://pastehtml.com/view/bze2phhwn.html](http://pastehtml.com/view/bze2phhwn.html)
在我的智能手机上，我看到边界半径中断（它显示背景颜色而不是边框​​颜色） 1-3px的圆角，如果你放大一点，你也可以在浏览器上看到这种效果。这很奇怪，因为如果你稍微放大和缩小，你会发现这种效果并不总是存在。所以我认为这不是我的坏 html+css。

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T14:20:41.680

这似乎是一个错误。提交给 Mozilla：

[https://bugzilla.mozilla.org/show_bug.cgi?id=758958](https://bugzilla.mozilla.org/show_bug.cgi?id=758958)

另外：[https ://stackoverflow.com/questions/10774506/border-radius-causes-white-lines-when-applied-to-individual-corners/10774635#10774635](https://stackoverflow.com/questions/10774506/border-radius-causes-white-lines-when-applied-to-individual-corners/10774635#10774635)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-02T17:54:51.887

我认为这也是一个错误，但我找到了一个修复......错误也许它会被认为是一个黑客。这是我的问题的图像：

[http://i909.photobucket.com/albums/ac298/roboyak/missingBorder_zpsbhftdfmd.png](http://i909.photobucket.com/albums/ac298/roboyak/missingBorder_zpsbhftdfmd.png)

所以我的故事是，我从父网页上得到了一个 reset.css 样式表。td 元素从该 css 表中获取以下样式：

```
table tbody tr td {
    border-bottom: 1px solid #ccc;
} 
```

很久以前，当我开始这个项目时，我通过在工作表中声明以下规则来覆盖这种风格：

```
table tbody tr td {
    border-bottom: none;
} 
```

在尝试解决我的问题时，我注意到边界底部规则显示为“中等无”而不是无。我添加了以下代码，边框不再被破坏。

```
 table tbody tr td {
     border-bottom: none none;
 } 
```

从本质上讲，这违反了规则，因此边界再次出现在所有 td 上，这不是我想要的，但我认为这可能会对正在发生的事情有所了解。

# php - 本地主机不起作用

> ID：10768757
> 
> 赞同：0
> 
> 时间：2012-05-26T18:28:30.423
> 
> 标签：php, apache, phpmyadmin, localhost, wampserver

一个多星期以来，我一直在尝试解决我的问题，但直到现在还没有结果。当我尝试打开`localhost/phpmyadmin`或任何 php 文件时，我收到以下消息：

> Internet Explorer无法显示该网页 ”。

Mozilla 也是如此。没有错误，但页面一直加载而没有答案。

*我的配置*

```
Windows 7 32bit
Wampserver 2.2D ( all services are running ) green status,  server online 
```

*我的主机文件*

```
127.0.0.1 localhost
::1 localhost 
```

IIS 已停止，但我认为端口 80 没有问题。

我试过直接去127.0.0.1，没用。

我将不胜感激任何建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T03:42:13.567

您可能需要检查您的防火墙授权...

我有同样的问题；此后，我已将`wampserver`其作为授权程序添加到我的防火墙中，并且如上所述，在控制面板/管理工具中停止了 IIS 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T18:33:54.587

我有类似的问题，进行了大量的研究和分析，但没有任何帮助。最后我遇到了 UwAmp，从那时起它对我来说就像一个魅力。试试看：

[http://www.uwamp.com/](http://www.uwamp.com/)

它还支持多个版本的 PHP，您可以随时单击切换。

![在此处输入图像描述](../Images/02c58b93814349dc4a17be3fd9d7b393.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T03:35:59.077

好的，如果您打开了 IIS，请停止它。

转到`cpanel`并搜索管理工具、组件服务、服务（本地），然后滚动到`w`'s 以查找并停止：

```
World wide web publishing service 
```

和

```
Web deployment agent service (something like that) 
```

祝你好运。

# java - MVC 中所有控制器的通用业务服务层

> ID：10768758
> 
> 赞同：0
> 
> 时间：2012-05-26T18:28:31.733
> 
> 标签：java, oop, optimization, crud, genericdao

我创建了一个包含以下方法的服务类

```
selectAll() return Obj Array
selectOne(); return Obj Array
insert(Obj); return int
delete(); return int
update(); return int 
```

我想让这个类成为通用的，因为 Controller 可以在调用方法时传递任何对象。而没有属性从一个 bean 到另一个 bean 变化的现实。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:34:31.973

无论如何，您的控制器不应该知道数据库表。您的控制器应该访问一些业务服务层，而后者又应该访问一些数据库层。

尝试根据域对象来组织您的数据库层。即：有一个类可以保留像“部门”或“类别”这样的对象，而不管该对象接触多少表。

# magento - 如何在顶部链接中添加类？

> ID：10768759
> 
> 赞同：5
> 
> 时间：2012-05-26T18:28:34.953
> 
> 标签：magento

我尝试使用`<aParams>class="class-name"</aParams>`
例如将类添加到顶部链接：

```
<reference name="top.links">
    <action method="addLink" translate="label title" module="customer"><label>My Account</label><url helper="customer/getAccountUrl"/><title>My Account</title><prepare/><aParams>class="top-link-myaccount"</aParams><position>10</position></action>
</reference> 
```

至少对于 1.7.0.0 版本，上述技巧对我不起作用。
任何想法？

**编辑：**
我想我使用以下方法修复了它`<li/><a>class="top-links-register"</a>`：

```
<reference name="top.links">
        <action method="addLink" translate="label title" module="customer"><label>My Account</label><url helper="customer/getAccountUrl"/><title>My Account</title><prepare/><aParams/><position>10</position><li/><a>class="top-link-myaccount"</a></action>
    </reference> 
```

请注意，您必须在前面`<li/>`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-22T00:49:39.363

要通过示例完成 Lee 的回答，要将类添加到顶部链接（`<li>`元素本身），您可以通过下面的新节点（或字符串）来完成，`<liParams>`如下所示：

```
<action method="addLink">
    <label/>
    <url/>
    <title/>
    <prepare/>
    <urlParams/>
    <position/>
    <liParams>
        <class>myclassname</class>
    </liParams>
    <aParams/>
    <beforeText/>
    <afterText/>
</action> 
```

但正如 Lee 所指出的，您需要保留这些子元素的顺序。

如果要将类放在`<a>` **列表**中，则语法类似，只需针对节点：

```
<action method="addLink">
    <label/>
    <url/>
    <title/>
    <prepare/>
    <urlParams/>
    <position/>
    <liParams/>
    <aParams>
        <class>myclassname</class>
    </aParams>
    <beforeText/>
    <afterText/>
</action> 
```

如果您需要对链接文本和格式设置**更大**的灵活性，另一种方法是在块中生成链接，然后添加该块，而不是使用“addLink”节点。

这就是添加购物车和结帐链接的方式，而不是在 XML 中添加指向顶部链接的链接，他们直接从块中调用 addLink 方法，这样他们就可以计算适当的文本以显示给每个客户。

有关此示例，请参阅`Mage_Checkout_Block_Links`结合使用的类。`base\default\layout\checkout.xml`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-27T18:03:08.873

正如您所发现的，addLink 的方法签名是：

```
public function addLink($label, $url='', $title='', $prepare=false, $urlParams=array(), $position=null, $liParams=null, $aParams=null, $beforeText='', $afterText='') 
```

因此，使用所有参数的布局中的正确调用将是：

```
<action method="addLink">
    <label/>
    <url/>
    <title/>
    <prepare/>
    <urlParams/>
    <position/>
    <liParams/>
    <aParams/>
    <beforeText/>
    <afterText/>
</action> 
```

不幸的是，Magento 没有使用反射将动作元素子元素映射到方法的命名参数，而是依赖于位置。

还有一点需要注意，liParams 和 aParams 可以是字符串，也可以是一系列表示键/值对的子元素。

# php - 单击提交按钮时将文本值传递给 ajax 函数

> ID：10768760
> 
> 赞同：0
> 
> 时间：2012-05-26T18:28:49.563
> 
> 标签：php, ajax

我有一个由文本字段（id="txt1"）和提交按钮（id="submit"）组成的表单。在提交按钮的“onclick”事件上调用 Ajax 函数“showhint()”。

```
<form action="">  
<input type="text" id="txt1"   />
<input type="submit" id="submit" onclick="showhint()"/>
</form> 
```

和ajax功能

```
 function showhint(){
var xmlhttp;

if(window.XMLHttpRequest)
{
    xmlhttp=new XMLHttpRequest();
}
else
{
    xmllhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function(){
    if(xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById("txthint").innerHTML=xmlhttp.responseText;
    }
        }
            xmlhttp.open("GET","gethint.php",true);
            xmlhttp.send();
            } 
```

这里 gethint.php 是 showhint() 函数执行其工作的页面，目标 div 编写 ajax 响应是 "txthint" 。我想要的是将文本值（表单）传递给 ajax 函数。有什么简单的方法吗？等待响应，任何有用的响应都将是非常可观的。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:41:15.113

```
var value = document.getElementById("txt1").value;

xmlhttp.open("GET","gethint.php?value="+value,true); 
```

在 gethint.php 中

```
 echo $_REQUEST['value']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T18:38:39.343

如果我正确阅读了此内容，则您正在尝试获取文本框的值并将其传递给您的 showhint() 方法。

尝试这个：

```
<input type="submit" id="submit" onclick="showhint(document.getElementById('txt1').value)" value="test"/> 
```

然后你可以接受这样的值：

```
function showhint(value) {
  // use value here
} 
```

希望有帮助。

# google-app-engine - GWT RequestFactory 偶尔出现非法参数异常

> ID：10768762
> 
> 赞同：1
> 
> 时间：2012-05-26T18:28:56.880
> 
> 标签：google-app-engine, gwt, requestfactory

我正在使用 GWT 请求工厂迈出第一步，但我偶尔会遇到异常。我觉得奇怪的是它不会发生在每个服务器请求中……只是有时。

例外是：

```
>      Caused by: java.lang.IllegalArgumentException: Something other than a Java object was returned from JSNI method
> '@com.google.web.bindery.autobean.gwt.client.impl.JsniCreatorMap::invoke(Lcom/google/gwt/core/client/JavaScriptObject;Ljava/lang/Object;Ljava/lang/Object;)':
> JS value of type boolean, expected java.lang.Object 
```

我打电话时遇到错误：

```
> Request<List<ConcertProxy>> findAll(); 
```

这是这样实现的：

```
public static List<Concert> findAll()
{
    Objectify ofy = ObjectifyService.begin();
    List<Concert> concerts = ofy.query(Concert.class).limit(100).order("-id").list();/* this dumps to memory */
    return concerts;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:39:38.653

与 RequestFactory 无关，这是一个 Chrome DevMode 插件错误。Google 建议使用 Firefox（或 IE）进行 DevMode：[http ://code.google.com/p/google-web-toolkit/issues/detail?id=5778#c65](http://code.google.com/p/google-web-toolkit/issues/detail?id=5778#c65)

# javascript - 服务器如何验证书签（链接中的 javascript）？安全性如何保持？

> ID：10768768
> 
> 赞同：1
> 
> 时间：2012-05-26T18:29:50.383
> 
> 标签：javascript, ajax, bookmarklet

我一直在尝试从我的 JavaScript 访问不同的域（以提取页面标题），但不能 bc 同源策略。

我意识到，通过小书签“安装”到浏览器中的 JavaScript 不受此政策的限制。

这让我想知道如何保持安全性......例如美味的书签......我可以修改它们并开始 ajaxing delicous.com......我不打算这样做，但同样有人可以对书签这样做我创造的。

您如何在这里创建安全性？

某些网站是否允许通过 ajax 进行公共访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T21:15:25.943

就服务器而言，没有 AJAX 之类的东西。AJAX 请求与任何其他请求一样只是 HTTP 请求。

跨域 AJAX 的限制是由浏览器完成的，以避免跨站点脚本攻击（您不希望第三方广告访问您的 Stack Overflow 会话数据并能够将其发送到其他地方，对吗？ ？）。

浏览器（显然）不会以同样的方式限制“书签”。如果您决定将一些脚本放入书签中，我猜浏览器会非常乐意执行它。

# regex - 如何将域和任何子目录重定向到新域？

> ID：10768772
> 
> 赞同：0
> 
> 时间：2012-05-26T18:30:14.790
> 
> 标签：regex, .htaccess

所以我正在建立一个新站点，旧站点上的所有内容都将被废弃——包括域结构和域名。我目前在我的 .htaccess 设置中有一个重定向规则，可以将[http://jagdesignideas.com](http://jagdesignideas.com)重定向到[http://jag.is](http://jag.is)，如下所示：

```
RewriteCond %{HTTP_HOST} ^(www.)?jagdesignideas.com
RewriteRule ^(/)?$ "http://jag.is" [R=301,L] 
```

但问题是，如果用户从 intarwebz 上的其他地方访问[http://jagdesignideas.com/about](http://jagdesignideas.com/about)的链接，例如，它不会像我想要的那样重定向到[http://jag.is 。](http://jag.is)相反，它会从 jagdesignideas.com 域中调出 404 页面。

如何让 jagdesignideas.com 域的所有子字符串以新的重定向结束？

编辑：需要明确的是，我不是试图将旧站点上的页面与新站点匹配，只是对 jagdesignideas.com 和任何指向 jag.is 域的内容进行大规模重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:50:20.927

向我们展示您在 RewriteRule 中匹配的内容：`^(/)?$`匹配根斜线或不匹配任何内容，这意味着您只是重写对域根的调用。您需要使用 捕获所有路径组件`^.*$`，它匹配域根之后的任何内容，或者什么都不匹配。这会将任何对旧域的调用（无论是否有路径）重定向到新域的根目录：

```
RewriteCond %{HTTP_HOST} ^(www\.)?jagdesignideas\.com [NC]
RewriteRule ^.*$ http://jag.is [R=301,L] 
```

如果您想将路径结构重定向到新服务器上的相同路径结构，则可以这样做：

```
RewriteRule ^.*$ http://jag.is/$0 [R=301,L] 
```

从那里开始，您基本上可以执行任何类型的重定向以将旧路径结构映射到新路径结构 - 请参阅[Apache 模块 mod_rewrite](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html)参考。

# clojure - 使用 compojure 解析来自多个复选框的值

> ID：10768775
> 
> 赞同：1
> 
> 时间：2012-05-26T18:30:31.670
> 
> 标签：clojure, compojure, hiccup

我创建了小型组合 Web 应用程序，它可以使用提供的 URL 显示从其他网站获取的多个值。目前，这个 URL 被硬编码在我的一个函数中，现在我想添加基于文本字段和复选框中的值的动态 URL 创建功能。

这是我的页面的样子：

```
(defn view-layout [& content]
  (html [:body content]))

(defn view-input []
    (view-layout
     [:h2 "Find"]
     [:form {:method "post" :action "/"}
     ( for [category ["Cat1" "Cat2" "Cat3"]]
      [:input {:type "checkbox" :id category } category ] )       
      [:br]
     [:input {:type "text" :id "a" :value "insert manga name"}] [:br]
     [:input.action {:type "submit" :value "Find"}]
     [:a {:href "/downloads"} "Downloads"]]))

(defn view-output []
  (view-layout
    [:h2 "default images"]
    [:form {:method "post" :action "/"}         
      (for [name (get-content-from-url (create-url))]        
        [:label name [:br]]            
           )]))

(defn create-manga-url
  []
  "http://www.mysite.net/search/?tfield=&check=000") 
```

以下是路线：

```
(defroutes main-routes            
   (GET "/" []
      (view-input))
  (GET "/downloads" []
      (view-downloads))
  (POST "/" []
       (view-output) )) 
```

目前，我需要`(create-url)`函数帮助（返回一个字符串），我想在其中获取所有字段，对于我的搜索是必需的（一个文本字段和 3 个复选框），并从中解析值，这些值将被输入（连接) URL - 对于复选框，如果选中，则检查部分的值将是 1，而不是 0，否则保持 0（如果选中了两个复选框，则检查 = 100，或 010、011）。如果是文本字段，则 tfield=userinputtext。

编辑我花了很多时间作为 .Net 和 Java 开发人员，而这部分组合对我来说完全是个谜。这就是我想用`(create-url)`函数实现的（用 OO 风格编写的伪代码）：

```
 (defn create-url [*text_field cbox1 cbox2 cbox3*]
(def url "http://www.mysite.net/search/?")
(def tfield "tfield=")
(def cbox "&check=")

(if (checked? cbox1)
(str cbox "1")
(str cbox "0"))

(if (checked? cbox2)
(str cbox "1")
(str cbox "0"))

(if (checked? cbox3)
(str cbox "1")
(str cbox "0"))

(str tfield (:value text_field))

(str url tbox cbox)) 
```

我为这个伪代码的样子道歉，但这是我想学习的部分：如何从表单中获取数据并解析它（在这种情况下，我想将表单字段中的值附加到字符串中）

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:12:05.043

首先，您需要为 HTML 输入元素添加“名称”属性。'id' 属性不会在发布时发送到服务器。

接下来，我想一种类似于您的示例的快速方法是：

```
(POST "/" [a Cat1 Cat2 Cat3] (create-url a [Cat1 Cat2 Cat3])) 
```

然后是这样的：

```
(defn checked? [c]
  (and c (= c "on")))

(defn checked->num [c]
  (if (checked? c) "1" "0"))

(defn create-url [a cats]
  (str "x?tfield=" a "&check="
    (apply str (for [c cats] (checked->num c))))) 
```

或者只是删除两个助手：

```
(defn create-url [a cats]
  (str "x?tfield=" a "&check="
     (apply str (map #(if (= "on" %) "1" "0") cats)))) 
```

# oracle - 查找表中长时间未修改的记录数

> ID：10768779
> 
> 赞同：1
> 
> 时间：2012-05-26T18:31:03.917
> 
> 标签：oracle

我正在使用 Oracle 10g。我想查找特定表中过去 2 年未修改（插入或更新）的记录数量。

但该表没有日期列。我需要从数据库选项中找到它。有没有办法找到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T04:31:02.410

您不能对单个行执行此操作，但可以对数据库块执行此操作。转储各个数据库块并确定每个块的最后一次更改的 scn，然后使用 scn_to_timestamp 函数来计算块的最后一次更改的时间。

如果此数据块中的任何行都没有被修改，您将获得准确的信息。但是，如果更改了单行，则无法使用此方法确定该块中的其他行是否在过去两年内未更改。

# actionscript-3 - 在 ActionScript3 中嵌入位图

> ID：10768780
> 
> 赞同：2
> 
> 时间：2012-05-26T18:31:10.123
> 
> 标签：actionscript-3, actionscript, bitmap, embed

如何在 Actionscript 3 中嵌入位图并获取 BitmapData？

```
public class MyGame extends Sprite {
    [EMBED(source="Assets/helicopter1.png")] private static var BMClass:Class;
    public function MyGame() {
        var BM:Bitmap = new BMClass();
        var BMData:BitmapData = new BitmapData(BM.width, BM.height);
        BMData.draw(BM)
    }
} 
```

我什么都试过了。如果我尝试实例化嵌入式类 ( `new BMClass();`)，我会收到此错误：

`TypeError: Error #1007: Instantiation attempted on a non-constructor.`.

如果我使用

`[EMBED(source="Assets/helicopter1.png")] private static var BMClass:BitmapData;`

或类似的 BitmapData 为空。

**编辑：**

所以我发现嵌入的数据是空的，但我不知道为什么。我在嵌入中做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-26T18:40:15.627

如果您没有收到错误转码，看起来您正在正确嵌入。您应该能够直接从位图中获取 bitmapData：

```
[Embed(source="picture.jpg")]
private var Picture:Class;

// create a bitmap of the embedded
var pic:Bitmap = new Picture();

// add to display list
addChild(pic);

// if you need to get the bitmapData for something else
var bitmapData:BitmapData = pic.bitmapData; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T18:39:00.747

您不需要实例化为 BitmapData 并绘制 - 您可以简单地：

```
[Embed(source="Assets/helicopter1.png")]
private var AssetClass:Class;

var bitmap:Bitmap = new AssetClass(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-28T15:23:52.723

在某些编辑器（至少我的 Intellij 版本）中，Embed 标签区分大小写。我在使用 [EMBED] 时遇到了与您完全相同的错误，但当我切换到 [Embed] 时效果很好

# django - Django model imagefield This field is required 错误

> ID：10768781
> 
> 赞同：3
> 
> 时间：2012-05-26T18:31:10.547
> 
> 标签：django, field, required, imagefield

我有一个包含以下模型的 django 应用程序：

```
class Business(models.Model, GetDistance):
    business_name = models.CharField(max_length=128)
    .
    user = models.ForeignKey(User)
    .
    media_dir = models.CharField(max_length=256, blank=True)
    .
    business_image = models.ImageField(max_length=128, upload_to=upload_business_image_handler, blank=True, height_field='business_image_height', width_field='business_image_width')

    business_image_height = models.IntegerField(blank=True, null=True)
    business_image_width = models.IntegerField(blank=True, null=True) 
```

然后我还定义了一个在“业务”模型中使用的上传处理程序：

```
def upload_business_image_handler(instance, filename):
    # determine the upload path
    .
    return file_path 
```

我有一个表单使用一些小部件更改输入字段的默认呈现，例如：

```
business_name = forms.CharField(widget=forms.TextInput(attrs={'size':'50', 'class': 'address'}), required=True) 
```

在表单中，我没有指定 business_image 字段，以便采用模型的默认值。模板中的表格有：

```
<form enctype="multipart/form-data" method="POST" action="">{% csrf_token %} 
```

并且视图代码包含：

```
business_form = BusinessForm(request.POST, request.FILES, auto_id='id_registration_%s', branch_list = branch_list, country_list = country_list) 
```

现在，当我在表单中输入一些数据并为 business_image 字段选择图像时，一切都按预期工作。文件名在业务对象中，文件上传到由“upload_business_image_handler”确定的目录中。但是，当我将 business_image 字段更改为：

```
business_image = models.ImageField(max_length=128, upload_to=upload_business_image_handler, height_field='business_image_height', width_field='business_image_width') 
```

即删除“空白=真”选项，然后我总是得到一个“此字段是必需的”错误，即使我在 business_image 表单字段中选择了一个图像。

当我在视图中插入“assert False”时，我可以看到错误，但我也可以看到文件名和文件对象，所以我不理解错误消息。

# load-balancing - 在 2 个或更多物理上独立的服务器上运行相同的 Web 应用程序？

> ID：10768782
> 
> 赞同：1
> 
> 时间：2012-05-26T18:31:23.133
> 
> 标签：load-balancing, lamp

我不确定我是否应该在这里或在 ServerFault 上发布这个问题，所以如果它在错误的地方，我们深表歉意。

我有一个小型网络应用程序，它开始获得更多业务。

目前我为此有一个专用的 LAMP 服务器，而且效果很好——这台服务器能够处理我们所有的流量。

但是...最近，一些有兴趣使用该应用程序的潜在客户与我接触，但前提是他们的数据可以存储在与他们相同的省份的服务器上（法律原因）。

我可以迁移服务器，但我不愿意这样做。我喜欢它现在的位置。

所以，我想知道在物理上分开的数据中心中的多台服务器运行相同的 Web 应用程序涉及什么？服务器之间的数据不一定需要保持同步。

我以前从来没有做过这样的事情，也不知道这项工作有多复杂。任何有关如何以及从何处开始研究此问题的建议将不胜感激。

（提前）感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:34:30.217

只要每个客户都有自己的数据集，您就可以在另一个数据中心安装应用程序的另一个副本。它需要您对源代码控制和部署过程有一些结构，但它确实有效。此选项将为您提供两个独立的数据库。

如果您必须为所有客户提供一个公共数据库（例如某种公共资源的预订/预订系统），那么复制数据库等的复杂性将达到完全不同的水平。这是可行的，但很难。

# html - 如何在 ubuntu 中自动缩进 HTML？

> ID：10768786
> 
> 赞同：3
> 
> 时间：2012-05-26T18:32:21.103
> 
> 标签：html, vim, indentation, auto-indent

我刚刚得到了一个我应该修改的网站的 HTML 文件。问题是文件没有缩进。我使用 GEdit 并希望 HTML 代码自动缩进。我读到 Gedit 中已停止使用 Indent Lines Plugin。

我尝试`gg=G`在 Vim 中使用。但什么也没发生。我还在[这里](https://stackoverflow.com/a/3277361/1418853) 发现我必须`filetype plugin`在`filetype plugin indent on`.vimrc 中更改。

但是 .vimrc 在哪里以及如何编辑它？像纯文本文件一样？或者我如何缩进我的 HTML 呢？

**编辑**：我是 ubuntu 的初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T18:47:27.810

`.vimrc`位于您的主目录中，您可以使用您喜欢的任何文本编辑器对其进行编辑，即键入 shell

```
learner@ubuntu ~> vim .vimrc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:23:23.723

要在 vim 中的每一行的开头添加一个制表符，请在命令模式下键入以下内容（按 escape 进入命令模式）：

```
:%s/^/<TAB>/g 
```

键入时，您应该会在屏幕底部的 a 旁边看到该命令`:`。该选项卡可能会被替换为`^I`（或类似的东西。）

*   `%`意味着文件中的每一行
*   `s`表示替代（如搜索/替换）
*   字符分隔`/`搜索和替换模式
*   `^`表示行的开头（这是我们要*替换的**模式*）
**   `<TAB>`是我们要用于替换的模式*   `g`意味着在全球范围内进行（我认为）*

 *这是一个示例 .vimrc 文件（您可以粘贴到新文件中的内容）：

```
"  this is a comment 
"
"
"  set autoindent (indent the next line the same
"  as the line before it)
"  
"  this feature will be very helpful if you choose
"  to indent the file manually, which would be a great
"  way to learn vi

set ai

"  set tabstop and shiftwidth to 4
"

set ts=4
set sw=4

"  expand tabs into multiple spaces
"
set expandtab

"  highlight text when you search for it
"  you can search a file in vi by pressing "/"
"  then typing a search term

set hlsearch

"  turn off the annoying feature that causes
"  the screen to bounce all over the place 
"  as you're typing a search term

set noincsearch 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T18:53:20.440

`.vimrc`是位于主目录中的 vim 用户配置文件。

打字：

```
vim ~/.vimrc 
```

将在 vim 中打开文件。*

# ruby-on-rails - 如何在 ruby on rails 中使用服务器到服务器调用访问链接的 api 安全代码

> ID：10768790
> 
> 赞同：1
> 
> 时间：2012-05-26T18:32:43.273
> 
> 标签：ruby-on-rails, api, gem, linkedin

我正在使用 Ruby on Rails(3.2.3) 和 omniauth/linkedin gems

我已经从用户那里授权了我的 Web 应用程序。授予访问链接后，将用户重定向到具有安全代码的页面，如下所示

* * *

您已成功授权 emprat 请返回您的应用程序并输入以下安全代码以授予访问权限：

45656

* * *

我不希望该用户必须复制和粘贴此代码。有一个关闭按钮将我带到回调 url，但没有任何参数。

如何通过服务器到服务器调用访问此代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:15:27.360

您应该做的是，一旦您拥有 PIN 验证器，将其保存在会话变量中或内存中的某个位置。获取该 PIN 并使用它来升级用户的访问令牌。下面是一个如何使用 Rails 中的 OAuth gem 执行此操作的示例：

```
@access_token = request_token.get_access_token(:oauth_verifier => verifier) 
```

您需要做的就是通过“验证程序”来检索访问令牌。因此，这一切都可以通过编程方式完成，用户无需自己复制/粘贴代码。只需将 PIN 验证器保存在内存中并使用它。

# html - HTML 是 Chrome 默认指针光标的所有标签的列表

> ID：10768791
> 
> 赞同：0
> 
> 时间：2012-05-26T18:32:44.457
> 
> 标签：html, google-chrome, cursor

我正在寻找指针光标默认为 Chrome 的所有标签的列表

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:35:00.433

最终它将取决于浏览器。

例如，IE 中的“a”标签使用默认光标，而 webkit 会将其更改为“指针”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T18:43:36.543

除了 'input' 和 'a' 标签，所有标签都只有默认光标。

对于输入：文本对于'A'标签：手

# java - 手机混音软件应该如何管理内存？

> ID：10768793
> 
> 赞同：0
> 
> 时间：2012-05-26T18:32:50.887
> 
> 标签：java, android, memory, audio, mixing

我正在尝试创建一个纯 Java 音频混合库，最好是可以与 Android 一起使用的库，虽然不完全实用，但绝对是一件有趣的事情。我确信它已经完成了，但只是为了我自己的学习经验，我试图用 wav 文件来做这件事，因为通常没有压缩模型可以解决。

鉴于 java.io 的性质，它定义了许多 InputStream 类型的类。每个都实现了主要用于从某些底层资源读取数据的操作。之后您如何处理数据，将其转储或聚合到您自己的地址空间等，取决于您。我希望这是纯Java，例如适用于任何东西（不需要JNI），针对低内存配置进行了优化，并且易于扩展。

我了解 RIFF 格式的性质以及如何组装 PCM 样本数据，但我不知道管理将文件膨胀到内存所需的内存的最佳方法。使用 FileInputStream，一次只能读取这么多数据，具体取决于底层文件系统和读取操作的调用方式。FileInputStream 没有提供一种方法来索引您在文件中的位置，因此无法检索流以供以后混合。我的目标是将 RIFF 文档扩展为允许读取和写入底层块的适当区域的 Java 对象。

如果我为整个事物分配空间，例如所有 PCM 样本数据，那么平均每首歌曲大约 50 MB。在典型的智能手机或平板电脑上，这会影响整体性能的可能性有多大？我会更好地提出我自己的 InputStream 类型，它可能会跟踪块在 InputStream 中的位置吗？对于文件，这将在获取 PCM 样本时导致大量阻塞，但仍会减少系统上的整体内存占用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T23:48:23.933

我不确定我是否理解你的所有问题，但我会尽可能回答。随时在评论中澄清，我会编辑。

不要将所有文件数据保存在内存中，以用于 DAW 类型的应用程序或任何需要播放大文件的文件/视频播放器。这可能适用于某些设备，具体取决于内存型号，但您是在自找麻烦。

相反，根据需要（即按需）阅读文件的所需部分。它实际上比这要复杂一些，因为您不想在音频播放线程中读取文件（您不希望低延迟的音频播放依赖于高延迟的文件 IO ）。为了解决这个问题，您可能必须提前缓冲一些文件。（这取决于您使用的是回调模型还是阻塞模型）

使用 FileInputStream 可以正常工作，您只需要自己跟踪文件中所有内容的位置（这涉及将毫秒或其他任何内容转换为字节并考虑标头的大小 [1]）。一个稍微好一点的选择是 RandomAccessFile，因为它允许你来回跳转。

我关于音频软件编程的演讲中的幻灯片可能会有所帮助，特别是如果您对回调 v 阻塞感到困惑：http: [//blog.bjornroche.com/2011/11/slides-from-fundamentals-of-audio.html](http://blog.bjornroche.com/2011/11/slides-from-fundamentals-of-audio.html)

[1] 或者更准确地说，知道文件中音频数据的偏移量。

# scala - Scala 中使用的下划线字符是什么？

> ID：10768794
> 
> 赞同：0
> 
> 时间：2012-05-26T18:32:59.420
> 
> 标签：scala

> **可能重复：**
> [Scala 中下划线的所有用途是什么？](https://stackoverflow.com/questions/8000903/what-are-all-the-uses-of-an-underscore-in-scala)

当我遵循特定教程时，我碰巧看到以下两种用法给出了相同的结果。我理解第一个，但我不明白为什么第二个也有效。谁能给我一个解释，同时总结一下_的用法？

```
def sum (a:Int, b:Int) = a + b

val sumAsFunction1 = sum(_:Int, _:Int)  
// I understand this, _ used as placeholder of parameters

val sumAsFunction2 = sum _
// why this usage has the same effect as sumAsFunction1? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:42:09.543

*这是eta 扩展*机制需要帮助的少数几个地方之一。考虑一个更简单的例子：

```
def foo() = {
  println("foo"); 
  42
}

val bar1 = foo
val bar2 = foo _ 
```

`bar1`和之间有根本的区别`bar2`。前者被解释为*调用`foo`并赋值给，`bar`*而后者：将*方法`foo`变为函数并赋值给`bar2`*。结果`bar1`只是一个简单的`Int`变量，而`bar2`实际上是一个将调用原始`foo()`方法（和 print `"foo"`）的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T18:42:56.077

下划线用于很多事情，但在这种情况下，它用于表示您想要`sum`函数的未调用版本。

你定义`sum(a: Int, b:Int) = a + b`了 ，所以可以把它想象`sum _`成一个匿名函数，它接受两个参数并返回它们的总和。您可以传递该函数，因为它是[Function2[Int,Int,Int]](http://www.scala-lang.org/api/current/index.html#scala.Function2)的一个实例。

# dcpu-16 - 如何最好地从 DCPU16 上的键盘获取字符

> ID：10768796
> 
> 赞同：1
> 
> 时间：2012-05-26T18:33:02.577
> 
> 标签：dcpu-16

因此，我的目标是编写一个子例程，该子例程在调用时会挂起，直到用户输入以 结尾的字符串`<return>`，然后返回（可能通过将其写入用户指定的地址）。

我的问题在于如何最好地从键盘上获取单个字符。在我看来，有3种方法：

1.  聆听来自键盘的中断并让角色响应这些中断。这意味着由 执行的逻辑`getline`将在中断处理程序中，这似乎会导致一些问题。即，您如何`getline`响应`<return>`按键返回？在中断处理程序中，您没有方便的返回地址。在我看来，在中断处理程序中放置太多特定逻辑的模式......错误......即使我在低级编码方面非常缺乏经验。

2.  只需继续拉动键盘即可进行按键操作。

3.  通过将所有按下的字符加载到循环缓冲区（可能长度为 1）中，使用中断处理程序实现旧的 1.1 行为。

对这些选项有更多的看法会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:33:22.433

当您调用时，`getline`它应该设置中断处理程序，以便将键入的键添加到缓冲区并更新索引

然后开始一个繁忙的循环，直到缓冲区的末尾有一个新行并禁用键盘的中断

```
getline: 
set push B
set push X
;--coming from interrupt dispatch
SET B, buffer ;--address from argument
SET C, bufferlength ;-- from argument
SET PUSH, 0
SET X, SP ;--address of counter
SET A, startKeyInput
INT softwareInterrupt

IAQ 1;--restart interrupts
startloop:
SET A,buffer
ADD A,SP
IFN [A],'\n'
    set PC, startloop ;--busy loop
IFL PEEK, X
    set PC, startloop ;-- stopping buffer overflow
IAQ 0;--stop interrupts
set A, stopKeyInput
INT softwareInterrupt

SET C,POP;-- C is return value
SET X,POP
SET B,POP
FRI ;-- from interrupt 
```

并且中断处理程序将键入的键添加到缓冲区直到它已满并向计数器添加 1，这可以放在中断处理程序本身中，但您需要在繁忙循环中重新激活中断

# c++ - 注释掉几个函数后的链接器错误

> ID：10768797
> 
> 赞同：0
> 
> 时间：2012-05-26T18:33:11.793
> 
> 标签：c++, visual-studio, visual-studio-2008, visual-c++, linker

我在这里需要一些想法。代码分为多个项目，错误发生在主项目静态链接子项目。我可能在子项目的设置中搞砸了一些东西，但我不知道如何准确解决这个问题。

但基本上我现在从子项目中找到了两个函数，如果我在主项目中使用它们，一切都编译得很好。如果我从主项目的源代码中注释掉那些函数调用，它会给我一些未注释掉的函数的链接器错误。（来自同一个子项目。）

当一切编译正常时，我收到几个链接器警告“警告 LNK4049：本地定义的符号”，也许这与它有关？

一种方法如何解决这样的问题？欢迎任何建议。

（尝试：构建/重建一切）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T22:02:56.760

您很可能弄乱了打开和关闭（大括号）括号。

您要么注释掉了太多，要么留下了一个未注释。

# iphone - 如何为 iPhone 构建 mp4v2

> ID：10768798
> 
> 赞同：5
> 
> 时间：2012-05-26T18:33:20.230
> 
> 标签：iphone, ios, compiler-errors, cross-compiling

我是 ios 开发的新手，我想使用 mp4v2 库。我已经为 iphone 模拟器 i386 成功编译，但是在为 iphone 架构编译时遇到了问题。i386 的配置/制作很容易：

```
./configure --disable-gch --enable-ub=i386 
```

但是，使用 armv6/7 作为标签不起作用

```
./configure --disable-gch --enable-ub=armv6,armv7 
```

在配置工作时，make 命令导致以下错误：

```
/bin/sh ./libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H   -arch i386 -arch armv6 -arch armv7 -I./include -I./include -I. -I.  -Wall -Wformat -g -O2 -fvisibility=hidden -c -o src/3gp.lo src/3gp.cpp
libtool: compile:  g++ -DHAVE_CONFIG_H -arch i386 -arch armv6 -arch armv7 -I./include -I./include -I. -I. -Wall -Wformat -g -O2 -fvisibility=hidden -c src/3gp.cpp  -fno-common -DPIC -o src/.libs/3gp.o
llvm-g++-4.2: error trying to exec '/usr/bin/../llvm-gcc-4.2/bin/arm-apple-darwin11-llvm-g++-4.2': execvp: No such file or directory
llvm-g++-4.2: error trying to exec '/usr/bin/../llvm-gcc-4.2/bin/arm-apple-darwin11-llvm-g++-4.2': execvp: No such file or directory
lipo: can't figure out the architecture type of: /var/folders/b6/vmqqncd55k79nb1nc4x30nwr0000gn/T//cctU2lnr.out
make: *** [src/3gp.lo] Error 1 
```

如何为 iphone 编译？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T05:28:42.067

我猜这个错误是由于试图从系统根路径`/usr/bin/../llvm-gcc-4.2/bin/arm-apple-darwin11-llvm-g++-4.2`而不是从开发者文档中查找交叉编译器引起的。一个有点愚蠢的解决方案是`llvm-gcc-4.2`在系统根路径中创建一个符号链接`/usr`，指向真实路径。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-23T15:33:22.620

我相信您可能需要验证您的 xcode-select(1) 值，以便您的路径包含新的 xcode 发布树。这些工具应该在最新版本的 /Applications/xcode 下找到。

# android - 从错误的起点发射子弹

> ID：10768800
> 
> 赞同：1
> 
> 时间：2012-05-26T18:33:43.543
> 
> 标签：android, box2d, andengine, bullet, racing

我在andengine中创建了一个赛车游戏。有一个大小为100x30px的玩家，像一个矩形。并且有fire（）函数来射击子弹，代码如下。它工作正常。但问题是当玩家旋转时。玩家是汽车图像。所以它们通过方向按钮（）旋转。当我射击子弹时，它从汽车的 0x0 像素开始。但我希望它必须像 100x15 像素的汽车一样开始在汽车前面移动。我该怎么办？

```
public void fire() {

        float startBulletX=player.getX();
        float startBulletY=player.getY();
        Sprite bullet=new Sprite(startBulletX,startBulletY,bulletRegion);

           final float xComp = (float) Math.cos(MathUtils.degToRad(this.player.getRotation() + 90));
           final float yComp = (float) Math.sin(MathUtils.degToRad(this.player.getRotation() + 90));
           final Vector2 velocity = Vector2Pool.obtain(xComp * 10, yComp * 10);

           bullet.setRotation(this.player.getRotation());

           final FixtureDef bulletFixtureDef1 = PhysicsFactory.createFixtureDef(0, 0, 0);
           this.mBulletBody = PhysicsFactory.createBoxBody(this.mPhysicsWorld, bullet, BodyType.KinematicBody, bulletFixtureDef1);
           this.mBulletBody.setLinearVelocity(velocity);
           Vector2Pool.recycle(velocity);
           this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(bullet, this.mBulletBody, true, false));

        this.scene.attachChild(bullet);
    } 
```

//屏幕控制按钮

```
 public void addDirectionButton() {
       player = new AnimatedSprite(centerX, centerY, this.playerTextureRegion);
        final AnalogOnScreenControl analogOnScreenControl = new AnalogOnScreenControl(0, CAMERA_HEIGHT - this.mOnScreenControlBaseTextureRegion.getHeight(), this.mBoundChaseCamera, this.mOnScreenControlBaseTextureRegion, this.mOnScreenControlKnobTextureRegion, 0.1f, 200, new IAnalogOnScreenControlListener() {

                 public void onControlChange(final BaseOnScreenControl pBaseOnScreenControl, final float pValueX, final float pValueY) {

                         final Body carBody = DeffenseActivity.this.mCarBody;

                         final Vector2 velocity = Vector2Pool.obtain(pValueX * 5, pValueY * 5);
                         carBody.setLinearVelocity(velocity);
                         Vector2Pool.recycle(velocity);

                         final float rotationInRad = (float)Math.atan2(-pValueX, pValueY);

                         player.setRotation(MathUtils.radToDeg(rotationInRad));

                 }

                 public void onControlClick(final AnalogOnScreenControl pAnalogOnScreenControl) {

                 }
         });
         analogOnScreenControl.getControlBase().setBlendFunction(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
         analogOnScreenControl.getControlBase().setAlpha(0.5f);
         analogOnScreenControl.getControlBase().setScaleCenter(0, 128);
         analogOnScreenControl.getControlBase().setScale(1.25f);
         analogOnScreenControl.getControlKnob().setScale(1.25f);
         analogOnScreenControl.refreshControlKnobPosition();

         this.scene.setChildScene(analogOnScreenControl);

         this.mBoundChaseCamera.setChaseEntity(player);
       a=new Sprite(0,0,bulletRegion);
         player.attachChild(a);

         final FixtureDef carFixtureDef = PhysicsFactory.createFixtureDef(1, 0.5f, 0.5f);
         this.mCarBody = PhysicsFactory.createBoxBody(this.mPhysicsWorld, player, BodyType.DynamicBody, carFixtureDef);
         this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(player, this.mCarBody, true, false));
         this.scene.attachChild(player);

       } 
```

# css - 菜单栏的 Li 项换行（液体布局 CSS）

> ID：10768803
> 
> 赞同：2
> 
> 时间：2012-05-26T18:34:03.960
> 
> 标签：css

我正在尝试使用 html、css、php 和 MySQL 创建一个站点。我正在尝试在标题中设计一个带有居中导航菜单的液体布局。在谷歌浏览器中，设计效果很好。但在 Firefox 和 IE 中，列表项的末尾会下拉到新行。我该如何解决这个问题？

我附上下面的代码片段：

* * *

菜单的 CSS 样式：

```
.menu {
    float:left;
    width:100%;
    background-image:url(../images/menu_bg.gif);
    background-repeat:repeat-x;
    min-width:750px;
    min-height:81px;
    overflow:hidden;
    position:relative;
    }

.menu ul{
    clear: both;
    float:left;
    list-style:none;
    text-align:center;
    left:50%;
    position:relative;
    display:inline-block;
    white-space: nowrap;
    }

.menu > ul > li { 
     float:left;
     right: 50%;
     position:relative;
     list-style:none;
}

.menu > ul > li > a {
    display:block;
    color:#ff3;
    text-decoration:none;
    background:transparent;
    padding:0 0 0 10px;
}

.menu > ul > li > a b {
    display:block;
    background:transparent;
    padding:0 10px 0 10px;
}

**********************************

css styles for Header:

#header {
    background-image:url(../images/header_bg.gif);
    background-repeat:repeat-x;
    height:160px;
    min-width:750px;
}

#logo {
    background-image:url(../images/logo.gif);
    background-position:10px 10px;
    background-repeat:no-repeat;
    height:79px;
}

*******************************************************

body: 

<div id="header">
  <div id="logo"></div>
  <div class="menu">
  <ul>
    <li class="current"><a href="../index.php"><b>Home</b></a></li>
    <li><a href="../about/about.php"><b>About Us</b></a></li>
    <li><a href="../services/services.php"><b>Services</b></a></li>
    <li><a href="../shop/shop.php"><b>Tech Shop</b></a></li>
    <li><a href="../downloads/downloads.php"><b>Downloads</b></a></li>
    <li><a href="../knowledge/knowledge.php"><b>Knowledge Base</b></a></li>
    <li><a href="../contact/contact.php"><b>Contact Us</b></a></li>
    <li><a href="../Livehelp/livehelp.php"><b>Live Help</b></a></li>
  </ul>   
  </div>
</div>
******************************** 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-29T11:50:54.587

删除左边：50%；右：50%；它们毫无意义

# asp.net - 隐藏模拟密码

> ID：10768805
> 
> 赞同：2
> 
> 时间：2012-05-26T18:34:05.877
> 
> 标签：asp.net, vb.net

以下网页讨论了在代码中使用模拟 (ASP.NET)：http: [//support.microsoft.com/kb/306158](http://support.microsoft.com/kb/306158)。我正在考虑为代码创建一个类，然后应用程序可以调用 impersonateValidUser 和 undoimpersonation。

我担心将用户名和密码放入我的代码中，因为任何人都可以使用 ILDASM 之类的工具看到它们。隐藏这些密码的最佳方法是什么？

该文章有一个标题为：模拟 IIS Authenticated 帐户或用户。我想过在 Web.Config 中创建一个模拟用户，但这意味着整个应用程序都作为模拟用户运行。我只希望应用程序的一小部分作为模拟用户运行 - 当需要访问和更新活动目录时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:41:41.507

我真的很喜欢您打算只让应用程序的一部分进行 AD 更新在高特权帐户下运行。我还分享了您对将密码存储在 web.config 或代码中的担忧。

我可以为你想两个选择。

1.  将帐户详细信息存储在 web.config 中并[加密](http://odetocode.com/blogs/scott/archive/2006/01/08/encrypting-custom-configuration-sections.aspx)web.config的该部分。这将确保只有 Web 服务器的管理员才能获得密码。掌握 web.config 的其他人将无法理解密码。

2.  使用 AD 更新代码创建一个小的独立 WCF 服务。然后在单独的应用程序池中运行该 WCF 服务，并将应用程序池设置为有权访问活动目录的用户的身份。为 WCF 设置一个受限的、仅限本地主机的终结点。WCF 服务应具有访问控制，仅允许来自专用帐户的访问。该帐户应设置为主网站的应用程序池的标识。

选项 1 更容易实现并且可以很好地保护密码。选项 2 为密码提供了更好的保护，因为它们根本不存储在 web.config 中 - 它们是 IIS 配置的一部分。选项 2 还增加了特权代码和系统其余部分之间的完全隔离，因为它在单独的进程中运行 AD 更新代码。有了这种隔离，就可以更轻松地对 AD 代码进行代码审查以检查安全问题。

# c# - ASP.NET C# FTP 到 GoDaddy

> ID：10768807
> 
> 赞同：1
> 
> 时间：2012-05-26T18:34:34.820
> 
> 标签：c#, asp.net, ftp

我正在向网站添加一项功能，以便会员可以将自己的照片上传到他们的个人资料中。我遇到的问题是我的 FTP 功能在我运行它自己的 localhost 时工作正常。但是，在我将站点放在 GoDaddy 的服务器上并尝试从那里进行 FTP 后，它不起作用。我明白了

> 无法连接到远程服务器

这是我的代码：

```
protected string savePath = Path.GetTempPath();
protected string saveThumbPath = Path.GetTempPath() + "/Thumb";
Guid g;
protected void UploadButton_Click(object sender, EventArgs e)
{
    bool worked = false;
    if (FileUploadControl.HasFile)
    {
        try
        {
            g = Guid.NewGuid();
            string filename = Path.GetFileName(FileUploadControl.FileName);
            Bitmap src = Bitmap.FromStream(FileUploadControl.PostedFile.InputStream) as Bitmap;
            Bitmap thumb = Bitmap.FromStream(FileUploadControl.PostedFile.InputStream) as Bitmap;

            // Resize the bitmap data
            //Create the large image
            Bitmap result = ProportionallyResizeBitmap(src, 800, 600);
            //string saveName = Server.MapPath(savePath) + g + filename;
            string saveName = savePath + g + filename;
            result.Save(saveName, ImageFormat.Jpeg);
            //Create the thumbnail
            result = ProportionallyResizeBitmap(thumb, 200, 150);
            //string saveThumbName = Server.MapPath(saveThumbPath) + g + filename;
            string saveThumbName = saveThumbPath + g + filename;
            result.Save(saveThumbName, ImageFormat.Jpeg);

            StatusLabel.Text = "Upload status: File uploaded!";
            worked = true;
            Thumbholder.Value = "Thumb" + g + filename;
            Photoholder.Value = g + filename;
// Get the object used to communicate with the server.
//If the specified proxy is an HTTP proxy. only the DownloadFile, ListDirectory and ListDirectoryDetails commands are supported

//get the object used to communicate with the server
System.Net.FtpWebRequest request = System.Net.WebRequest.Create("ftp://mydomain/newcorvetteclub/Images/" + g + filename) as System.Net.FtpWebRequest;
//this example assumes the FTP site uses anoymous login on
//NetWorkCredentials provides credentials for  password-based authentication such as digest, basic, NTLM
request.Credentials = new System.Net.NetworkCredential("username", "password");

//Copy the contents of the file to the request stream
byte[] fileContents = null;
if (FileUploadControl.HasFile)
{
    //fileContents = FileUploadControl.FileBytes;
    fileContents = File.ReadAllBytes(saveName);

}
else
{
    Response.Write("you need to provide a file");
    return;
}
request.Method = System.Net.WebRequestMethods.Ftp.UploadFile;
request.ContentLength = fileContents.Length;
//GetReequestStream: retrieves the stream used to upload data to an FTP server.
Stream requestStream = request.GetRequestStream();
requestStream.Write(fileContents, 0, fileContents.Length);
requestStream.Close();
System.Net.FtpWebResponse response = request.GetResponse() as System.Net.FtpWebResponse;
//Response.Write("Upload file complete, status: " + response.StatusDescription);
response.Close();
request = System.Net.WebRequest.Create("ftp://mydomain/newcorvetteclub/Images/Thumb" + g + filename) as System.Net.FtpWebRequest;
request.Credentials = new System.Net.NetworkCredential("username", "password");
if (FileUploadControl.HasFile)
{
    fileContents = File.ReadAllBytes(saveThumbName);
}
else
{
    Response.Write("you need to provide a file");
    return;
}
request.Method = System.Net.WebRequestMethods.Ftp.UploadFile;
request.ContentLength = fileContents.Length;
//GetReequestStream: retrieves the stream used to upload data to an FTP server.
requestStream = request.GetRequestStream();
requestStream.Write(fileContents, 0, fileContents.Length);
requestStream.Close();
response = request.GetResponse() as System.Net.FtpWebResponse;
//Response.Write("Upload file complete, status: " + response.StatusDescription); 
```

另一个奇怪的事情是我的电子邮件客户端正在做类似的事情。只要它通过 localhost 运行，它就可以正常工作，但是当它从 GoDaddy 的服务器运行时会超时。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:33:56.357

我可以告诉你为什么电子邮件没有通过你必须使用“relay-hosting.secureserver.net”作为你的 SMTP 服务器。就 FTP 而言，您无法在 Godaddy 上执行此操作，它们会阻止传出的 ftp。我刚刚发现了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T19:01:18.707

问题出在这里，您对这两个调用使用相同的流：

```
Bitmap src = Bitmap.FromStream(FileUploadControl.PostedFile.InputStream) as Bitmap;
FileUploadControl.PostedFile.InputStream.Position = 0; // try this
Bitmap thumb = Bitmap.FromStream(FileUploadControl.PostedFile.InputStream) as Bitmap; 
```

流具有当前位置，因此第一个`.FromStream`可能读取整个流，将流的位置设置为流的末尾。要撤消此操作，您需要通过设置来重置它`stream.Position = 0`。

# java - 同时突出显示多个 EditText 控件中的文本

> ID：10768808
> 
> 赞同：7
> 
> 时间：2012-05-26T18:34:48.750
> 
> 标签：java, android, android-edittext, highlight

我遇到了以下问题：我试图`EditText`通过调用同时突出显示多个控件中的文本`viewXYZ.setSelection(int, int)`，但选择仅在焦点视图上可见。

有什么办法可以绕过这个，以不集中的方式突出显示文本`EditText`？也许通过重载`onDraw()`方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T18:47:28.813

> 我知道，但它（据我所知？）在 EditText 控件中标记文本的唯一方法。

EditText 支持`Spannable`对象，因此您可以自己将突出显示应用于文本（例如背景颜色）。

[此示例项目](https://github.com/commonsguy/cw-advandroid/tree/master/RichText/Search)演示了一个搜索字段，该字段根据搜索结果将背景颜色应用于较大的文本。关键部分是`searchFor()`方法：

```
 private void searchFor(String text) {
    TextView prose=(TextView)findViewById(R.id.prose);
    Spannable raw=new SpannableString(prose.getText());
    BackgroundColorSpan[] spans=raw.getSpans(0,
                                             raw.length(),
                                             BackgroundColorSpan.class);

    for (BackgroundColorSpan span : spans) {
      raw.removeSpan(span);
    }

    int index=TextUtils.indexOf(raw, text);

    while (index >= 0) {
      raw.setSpan(new BackgroundColorSpan(0xFF8B008B), index, index
          + text.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
      index=TextUtils.indexOf(raw, text, index + text.length());
    }

    prose.setText(raw);
  } 
```

但是请注意，您的“输出字符串”可能应该是 a `TextView`，而不是`EditText`. `EditText`用于输入，而不是输出。

# android - 带有android的html单元

> ID：10768811
> 
> 赞同：3
> 
> 时间：2012-05-26T18:35:39.353
> 
> 标签：android, htmlunit

我有一个带有html单元和java的工作代码（重复，工作代码：P）没有错误没有丢失的罐子。现在我将相同的代码复制粘贴到一个android项目中，添加html单元库等......尝试运行它，我找不到类“com.gargoylesoftware.htmlunit.webclient”和一系列后续错误

我尝试按照一些建议（通过谷歌）将 jar 文件添加到 /libs 文件夹中，并且在打开模拟器之前花费 eclipse 内存不足我还在 order 和 export 下勾选了库（这并没有做太多）

无论如何，所以问题是，是否有可能让 html 单元与 android 一起运行？如果不是，那么在 android 中它的替代方法是什么？我的软件需要登录到服务器，填写几个表格，等等...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T20:36:19.237

尝试从现有源创建项目......当我尝试外国代码时，我经常遇到这个问题。

# java - Java 中的内存效率

> ID：10768813
> 
> 赞同：4
> 
> 时间：2012-05-26T18:36:25.177
> 
> 标签：java, optimization, memory, jvm

关于内存使用和变量实例化哪个更好或者没有区别：

这

```
for(int i = 0; i < someValue; i++)
{
    Obj foo = new Obj();
    Use foo.....
} 
```

相对于：

```
Obj foo;

for(int i = 0; i < someValue; i++)
{
    foo = new Obj();
    Use foo.....
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-26T18:39:49.047

没有区别。编译器将优化内存使用方面的任何潜在差异。

如果您编译（使用`javap -c`）这两个示例并比较字节码，您会发现字节码是相同的。当然，这取决于 JVM 版本。但是由于这个例子太简单了，所以可以肯定地假设两者的内存效率都不比另一个高。

* * *

## 示例 1：

代码：

```
public class example1 {
    public static void main(String[] args) {
        for (int i=0; i<10; i++) {
            Object a = new Object();
        }
    }
} 
```

字节码：

```
public class example1 extends java.lang.Object{
public example1();
  Code:
   0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
   4:   return

public static void main(java.lang.String[]);
  Code:
   0:   iconst_0
   1:   istore_1
   2:   iload_1
   3:   bipush  10
   5:   if_icmpge       22
   8:   new     #2; //class java/lang/Object
   11:  dup
   12:  invokespecial   #1; //Method java/lang/Object."<init>":()V
   15:  astore_2
   16:  iinc    1, 1
   19:  goto    2
   22:  return
} 
```

* * *

## 示例 2：

代码：

```
public class example2 {
    public static void main(String[] args) {
        Object a;
        for (int i=0; i<10; i++) {
            a = new Object();
        }
    }
} 
```

字节码：

```
public class example2 extends java.lang.Object{
public example2();
  Code:
   0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
   4:   return

public static void main(java.lang.String[]);
  Code:
   0:   iconst_0
   1:   istore_2
   2:   iload_2
   3:   bipush  10
   5:   if_icmpge       22
   8:   new     #2; //class java/lang/Object
   11:  dup
   12:  invokespecial   #1; //Method java/lang/Object."<init>":()V
   15:  astore_1
   16:  iinc    2, 1
   19:  goto    2
   22:  return
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-26T18:40:11.940

使用现代 JVM，两者的工作方式相同，编译器优化也将使它们两者相同。

忽略编译器优化和现代 JVM，第一种方法更好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-26T18:40:31.900

第一个示例在对象范围方面最有意义，但两者都应该与另一个一样具有内存效率。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-26T19:40:01.837

正如其他答案所指出的那样，您的示例之间没有区别。但有趣的问题是：如果你的例子很慢，你应该怎么做？

如果您想减少在真正的性能关键部分分配/垃圾收集所花费的时间，请考虑重用对象而不是在每次迭代时分配新对象。

```
foo = new Obj();
for(int i = 0; i < someValue; i++)
{
    foo.init(i);
    Use foo.....
} 
```

来自[java 性能调优](http://oreilly.com/catalog/javapt/chapter/ch04.html)（一本旧书，但在现代 jvm:s 和 .NET clr 中也是如此）

> ...对象的创建成本很高。如果重用同一个对象是合理的，你应该这样做。您需要注意何时不调用 new。一个相当明显的情况是当您已经使用了一个对象并且可以在您即将创建同一类的另一个对象之前将其丢弃。您应该查看对象并考虑是否可以重置字段然后重用该对象，而不是丢弃它并创建另一个。这对于经常使用和丢弃的对象尤其重要

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-14T23:34:19.090

The compiler optimization will make both of them same. I prefer the first approach better, however, if you were to ignore the compiler optimization. It is more to the point and even Joshua Bloch suggests to do so in Effective Java (a great read).

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-26T21:15:19.953

编译器应该为您优化它。我更喜欢第一个而不是第二个，因为它更具可读性。让`Object foo`范围更大可能会造成混乱。

# php - 在哪里保存自定义类以及如何在 CakePHP 组件中加载它？

> ID：10768816
> 
> 赞同：4
> 
> 时间：2012-05-26T18:36:49.340
> 
> 标签：php, cakephp, components

我有一个名为 MathLib.php 的自定义类，我需要在所有控制器的这个类中使用一些登录名。阅读 CakePHP 文档我发现组件是最好的方法。但是现在，我有一个问题，我想知道我必须**在哪里**保存 MathLib.php 类（我必须在什么文件夹中放置自定义类），以及如何将它加载到组件中。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T18:51:10.230

如果您编写了自定义类，则将其放入`app\libs`cake 1.x 和`app\Lib`cake 2.x 中，否则放入 app\vendors 或 app\Vendor。

要将其加载到 cake 2.x 的组件中，您需要在组件类声明之前添加：

```
App::uses('MathLib', 'Lib'); 
```

类名和文件名应该相同。

对于 1.x，您可以通过以下方式加载它：

```
App::import('Lib', 'MathLib'); 
```

1.x 的更多信息在这里[http://book.cakephp.org/1.3/view/1579/Library-classes](http://book.cakephp.org/1.3/view/1579/Library-classes)

如果是供应商，同样的想法，但请阅读以下文档：[http](http://book.cakephp.org/1.3/view/944/Vendor-examples) ://book.cakephp.org/1.3/view/944/Vendor-examples 。

重要的是文件命名。

# python - 如何计算python中单调增长序列的估计？

> ID：10768817
> 
> 赞同：1
> 
> 时间：2012-05-26T18:36:54.367
> 
> 标签：python, math, numpy, scipy

我有一个单调增长的整数序列。例如

`seq=[(0, 0), (1, 5), (10, 20), (15, 24)]`.

以及大于序列中最大参数的整数值`(a > seq[-1][0])`。我想估计与给定值对应的值。序列几乎呈线性增长，早期的值不如后面的重要。尽管如此，我不能简单地取最后两个点并计算新值，因为很可能出错，曲线可能会改变角度。

任何人都可以为 Python 中的此类任务提出一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T01:27:31.087

有很多问题。外推是一件令人讨厌的事情。你假设一个线性外推吗？一般而言，多项式模型（超出线性）的外推非常差。或者你应该假设某种对一条线渐近的外推？重要的是您愿意承担什么，以及您可以为建模过程带来什么信息。

如果你可以假设一个线性外推，那么我可能会做一个加权最小二乘拟合，一个直线模型随着你远离端点而减小权重。（事实上​​，无论你最终提出什么模型，加权最小二乘估计似乎是合乎逻辑的，权重是位置的函数。）

因此，假设您选择提出一个非线性模型，类似于

```
y = a + bx + c*exp(-d*x) 
```

当 x 变大时，该模型将渐近地逼近一条斜率为 b 的直线。您可能仍会使用加权模型，将这些点从您感兴趣的末尾扣除。

同样，长距离外推是一件很难尝试的事情。记住马克吐温的话...

“在一百七十六年的时间里，下密西西比河已经缩短了两百四十二英里。这是平均每年超过一英里和三分之一。因此，任何冷静的人，只要不是瞎子或白痴，都可以看到，在古奥里特志留纪时期，也就是一百万年前的次年十一月，密西西比河下游长达一百万三十万英里，突出于大地之上。墨西哥湾就像一根钓鱼竿。同样的道理，任何人都可以看到，七百四十二年后，密西西比河下游将只有一英里四分之三长，而开罗[伊利诺伊州]和新奥尔良将与他们的街道连在一起，步履蹒跚在一个市长和一个共同的市议员委员会的领导下，安然无恙。科学有一些令人着迷的东西。人们从如此微不足道的事实投资中获得了如此巨大的猜测回报。” “密西西比河上的生活”，马克吐温，1884

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T18:45:13.933

如果序列没有很多噪音，只需使用最新的点，以及当前 1/3 的点，然后据此估计你的线。否则，做一些更复杂的事情，比如适合序列后半部分的最小二乘法。

如果您在 Google 上搜索，有许多代码示例可以用于后者，并且一些模块可能会有所帮助。（我不是 Python 程序员，所以我不能给最好的一个有意义的推荐。）

# java - JMF：当播放器播放视频达到一定时间时如何触发事件？

> ID：10768822
> 
> 赞同：0
> 
> 时间：2012-05-26T18:37:40.840
> 
> 标签：java, frameworks, media, jmf

如何用 Java 编写代码（使用 Java Media Framework）：当播放器播放视频剪辑达到一定​​时间（例如，播放时间达到 3.124 分钟）时，它会生成一个事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:47:30.910

JMF[`Player`](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/javax/media/Player.html)实现[`Clock`](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/javax/media/Clock.html)了，而后者又提供了如下方法：

*   [`setStopTime(Time)`](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/javax/media/Clock.html#setStopTime%28javax.media.Time%29). 为播放器添加一个监听器并监听停止事件。
*   [`getMediaNanoseconds()`](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/javax/media/Clock.html#getMediaNanoseconds%28%29). 启动一个 Swing`Timer`以每 NN 毫秒重复一次。检查媒体时间。如果超出感兴趣的时间，请停止计时器和播放器。

# android - 无法从 Tegra Android Developer Pack 1.0r8 执行示例

> ID：10768823
> 
> 赞同：1
> 
> 时间：2012-05-26T18:37:50.107
> 
> 标签：android, tegra

我最近在 Windows PC 上下载了 Tegra Android Developer Pack 1.0r8。我正在尝试从 Eclipse IDE 运行 NativeBasic 和 NativeGlobe 示例，但我无法获得它。

我安装`Tegra Android Developer Pack 1.0r8`，然后打开 Eclipse，更新，创建了一个具有以下规格的新 android 虚拟设备：

*   Android 2.3.3 - API 级别 10
*   SD 卡：1024 MB
*   分辨率：1280 x 800
*   摄像头支持：是
*   设备内存大小：512
*   GPU 仿真：是

问题是，当我这样做时`Package Explorer>NativeBasic>Run As>Android application`，它会打开模拟器，当它尝试加载`NativeBasic`时，应用程序崩溃，显示以下错误：

```
05-26 03:12:08.057: E/AndroidRuntime(331): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.nvidia.devtech.NativeBasic/android.app.NativeActivity}: java.lang.IllegalArgumentException: Unable to find native library: native_basic 
```

# android - FragmentActivity 没有调用 ListFragment

> ID：10768825
> 
> 赞同：0
> 
> 时间：2012-05-26T18:38:06.657
> 
> 标签：android, android-listview, android-fragments

我正在尝试实现一个`ListFragment`. 这个想法是使用`CursorLoader`. FragmentActivity 的代码是

```
public class XYZ extends FragmentActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        FragmentManager fm = getSupportFragmentManager();

        // Create the list fragment and add it as our sole content.
        if (fm.findFragmentById(android.R.id.content) == null) {
            XYZFragment list = new XYZFragment();
            fm.beginTransaction().add(android.R.id.content, list).commit();
        }
} 
```

现在我假设应该调用`onActivityCreate`of ，`XYZFragment`但这并没有发生，而是我在模拟器上得到了下面的图像。我正在寻找关于正在发生的事情和我做错了什么的解释？

谢谢。

![在此处输入图像描述](../Images/28dcef73495ff8d36c06a16b57945a30.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:03:22.967

更改`onActivityCreate`为`onActivityCreated`，您应该得到预期的结果。

# facebook - 页面底部的网页视图

> ID：10768828
> 
> 赞同：0
> 
> 时间：2012-05-26T18:38:18.393
> 
> 标签：facebook, webview, titanium-mobile, appcelerator-mobile

我正在制作一个应用程序，我想在页面底部有一个 facebook“Like”按钮。甚至可能吗？我玩过不同的东西，这就是我现在所拥有的。var win = Ti.UI.currentWindow;

```
win.showNavBar(); // Force the navbar to show

var bgImage = Ti.UI.createImageView({
height  : 'auto',
top     : -11,
image   : 'images/h-4.jpg',
zIndex  : 0
});
win.add(bgImage);

var ticksterImage = Ti.UI.createImageView({
height  : 'auto',
top     : 1,
image   : 'images/takida.png',
zIndex  : 0
});
win.add(ticksterImage);

var facelike = Ti.UI.createWebView({
html: '<iframe src="//www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2Ftakidamusic&send=false&layout=standard&width=320&show_faces=true&action=like&colorscheme=dark&font&height=80&appId=368268836546636" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:320px; height:80px;" allowTransparency="true"></iframe>',
height: '80dp',
bottom: 1,

});
win.add(facelike); 
```

我要解决这个问题吗？我应该用 HTML5 或 XFBML 代替 iframe 吗？我已经尝试了所有三个但没有结果。我刚得到：加载应用程序时出错：//www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2Ftakidamusic&send=false&layout=standard&width=320&show_faces=true&action=like&colorscheme=dark&font&height= 80&appId=234826439948817

这是另一种方式吗？

Thanx //R — Rickard Harrysson 6 小时前问

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T04:07:13.947

我建议不要使用 webview - 尝试使用 Ti.Facebook 模块。这将使您在允许用户通过 Titanium 登录 Facebook 时更加灵活。有关示例，请参见 KitchenSink。

[https://github.com/appcelerator/titanium_mobile/blob/master/demos/KitchenSink/Resources/examples/facebook.js](https://github.com/appcelerator/titanium_mobile/blob/master/demos/KitchenSink/Resources/examples/facebook.js)

如果您必须使用网站，则 html 必须是完整的网页，而不仅仅是 iframe。它应该以`<html><head/><body>`. 我建议在 Titanium 之外创建一个可以工作的网页，然后将该页面的 html 插入到 html 属性中。

# c++ - 将字符串转换为无符号字符 str

> ID：10768829
> 
> 赞同：1
> 
> 时间：2012-05-26T18:38:20.553
> 
> 标签：c++, linked-list

我正在尝试将字符串转换为无符号字符 *。我一直在兜圈子。我的程序提示用户输入我作为字符串输入的姓氏。然后我使用 djb2 将字符串散列成一个整数。它将 unsigned char * 作为参数。我的程序的目标是使用链接创建一个哈希表来处理冲突。

```
unsigned long djb2(unsigned char *str)
{
    unsigned long hash = 5381;
    int c;

    while (c = *str++)
        hash = ((hash << 5) + hash) + c; /* hash * 33 + c */

    return hash;
} 
```

我的代码如下atm。

```
void insert(LinkedList<Person>* HashList1[], LinkedList<Person>* HashList2[], int listSize)
{
    char * cstr;
    string str;
    cin >> str;
    cstr = new char [str.size()+1];
    strcpy (cstr, str.c_str());
    int hashBucket1 = djb2(cstr) % listSize;
} 
```

我收到一个错误，上面告诉我““char *”类型的参数与“unsigned char *”类型的参数不兼容。非常感谢任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T18:54:03.047

当您遇到这样的打字问题时，这很好地表明您没有以最佳方式使用该语言。在 C++ 中的字符串和 char*s 之间来回切换是一种[不好的代码气味](http://en.wikipedia.org/wiki/Code_smell)。

修改`dbjc`为使用字符串：

```
unsigned long djb2(const string& str)
{
    unsigned long hash = 5381;

    for(string::iterator it=str.begin();it!=str.end();it++) 
        hash = ((hash << 5) + hash) + *it; /* hash * 33 + character */

    return hash;
} 
```

这将大大简化您的插入：

```
void insert(LinkedList<Person>* HashList1[], LinkedList<Person>* HashList2[], int listSize){
    string str;
    cin >> str;
    int hashBucket1;
    hashBucket1 = djb2(str) % listSize;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T19:04:27.523

最好的解决方案是修改`dbjc`功能，正如@Steven Burnap 所建议的那样。

如果您无法更改，请在通话中进行`dbjc`转换：`cstr``unsigned char *``dbjc`

```
void insert(LinkedList<Person>* HashList1[], LinkedList<Person>* HashList2[], int listSize){
        char * cstr;
        string str;
        cin >> str;
        cstr = new char [str.size()+1];
        strcpy (cstr, str.c_str());
        int hashBucket1;
        hashBucket1 = djb2((unsigned char *)cstr) % listSize; // <-- here is the change
} 
```

# php - 警告：mysql_data_seek(): Offset 1 对 MySQL 结果索引 5 无效（或查询数据未缓冲）

> ID：10768831
> 
> 赞同：3
> 
> 时间：2012-05-26T18:38:25.363
> 
> 标签：php

请任何人都可以提供帮助。我正在尝试执行以下 php 代码：

```
 $sql="SELECT * FROM vendors WHERE vuid=".$uid."AND status="."'c'";
   $sql=$sql . "LIMIT 0, 10"; 
   $result=mysql_query($sql);
   $numrows=mysql_num_rows($result);        

   for($i=0;$i<$numrows;$i++)
   {

    if($numrows>0) 
    {
    mysql_data_seek($result,$i);
} 
```

我收到以下错误警告：mysql_data_seek()：偏移量 1 对 MySQL 结果索引 5 无效（或查询数据未缓冲）。$numrows 是 2，因此 mysql_data_seek 的范围是有效的。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T18:50:23.370

如果结果集为空，[mysql_data_seek()](http://php.net/manual/en/function.mysql-data-seek.php)将失败并显示 E_WARNING。那是我认为发生在您的情况下，因为您在调用 mysql_data_seek() 之前没有检查结果集是否为空。

如果行数 >=1，请始终检查结果，然后您可以安全地调用 mysql_data_seek()

```
if ( mysql_num_rows ( $sql ) > 0 )
{
    // do stuff, you have some results
}
else
{
    // no results to process
} 
```

# r - 使用 write.csv 时出现内存错误

> ID：10768834
> 
> 赞同：4
> 
> 时间：2012-05-26T18:38:44.007
> 
> 标签：r

我有一个 9 列的 data.frame (x)，它有数百万行。我能够将它读入 R，成功地对其进行一些修改，并且代码将毫无问题地执行。但是，当我尝试使用将其写入 .csv 文件时

```
write.csv(x,file=argv[2],quote=F,row.names=F) 
```

我收到一个错误，上面写着

```
Error: cannot allocate vector of size 1.2Gb 
```

这是没有意义的，因为数据已经在内存中，计算完成了，我想做的就是把它写到磁盘上。此外，当我监控内存时，在这个写入阶段，这个进程的虚拟内存大小几乎翻了一番。编写一个自定义 C 函数来写出这个 data.frame 有帮助吗？任何建议/帮助/指针表示赞赏。

ps：我在一个大约 24G RAM 的 64 位 ubuntu 机器上运行所有这些。整体空间可能不是问题。数据大小约10G

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-26T19:17:24.967

您必须了解，如果 R 函数修改参数，它们通常会复制参数，因为 R 采用的函数式编程范式规定函数不会更改作为参数传入的对象；因此，当在执行函数的过程中需要进行更改时，R 会复制它们。

如果您使用内存跟踪支持构建 R，您可以在遇到问题的任何操作中看到此复制。使用`airquality`示例数据集，跟踪我看到的内存使用

```
> head(airquality)
  Ozone Solar.R Wind Temp Month Day
1    41     190  7.4   67     5   1
2    36     118  8.0   72     5   2
3    12     149 12.6   74     5   3
4    18     313 11.5   62     5   4
5    NA      NA 14.3   56     5   5
6    28      NA 14.9   66     5   6
> tracemem(airquality)
[1] "<0x12b4f78>"
> write.csv(airquality, "airquality.csv")
tracemem[0x12b4f78 -> 0x1aac0d8]: as.list.data.frame as.list lapply unlist which write.table eval eval eval.parent write.csv 
tracemem[0x12b4f78 -> 0x1aabf20]: as.list.data.frame as.list lapply sapply write.table eval eval eval.parent write.csv 
tracemem[0x12b4f78 -> 0xf8ae08]: as.list.data.frame as.list lapply write.table eval eval eval.parent write.csv 
tracemem[0x12b4f78 -> 0xf8aca8]: write.table eval eval eval.parent write.csv 
tracemem[0xf8aca8 -> 0xca7fe0]: [<-.data.frame [<- write.table eval eval eval.parent write.csv 
tracemem[0xca7fe0 -> 0xcaac50]: [<-.data.frame [<- write.table eval eval eval.parent write.csv 
```

这表明当 R 准备将其写入文件时，正在制作 6 个数据副本。

很明显，这正在消耗您可用的 24Gb RAM；该错误表示 R 需要*另外*1.2Gb 的 RAM 才能完成操作。

最简单的解决方案是分块写入文件。使用 写出第一组数据行`append = FALSE`，然后`append = TRUE`用于后续调用以`write.csv()`写出剩余的块。您可能需要使用它来找到不会超过可用内存的块大小。

# math - Alpha 混合如何在数学上逐个像素地工作？

> ID：10768836
> 
> 赞同：2
> 
> 时间：2012-05-26T18:38:52.443
> 
> 标签：math, colors, shader, pixel, alphablending

似乎它不像 RGB1*A1 + RGB2*A2 那样简单……值是如何裁剪的？加权？等等。

这是一个与上下文相关的问题吗？是否有不同的算法产生不同的结果？还是一种标准实现？

我对特定于 OpenGL 的答案特别感兴趣，但来自其他环境的上下文也很有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T18:41:57.170

我不了解 OpenGL，但不透明度 A 的一个像素通常绘制在另一个像素上，如下所示：

```
result.r = background.r * (1 - A) + foreground.r * A
result.g = background.g * (1 - A) + foreground.g * A
result.b = background.b * (1 - A) + foreground.b * A 
```

对多个像素重复此操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-05T15:16:17.653

如果图像不是预乘 alpha，则上述答案有效。但是，如果您将这种类型的混合与预乘 Alpha 图像一起使用，则会出现黑色边框。

**预乘阿尔法：**

创建图像时，颜色值乘以 Alpha 通道。看一下这个单像素示例：

```
Pixel: r = 1, g = 0, b = 0, a = 0.5 
```

保存后，rgb vales 将乘以 alpha 值，给出：

```
Pixel: r = 0.5, g = 0, b = 0, a = 0.5 
```

要混合这种图像，您需要使用以下公式：

```
result.r = background.r * (1 - A) + foreground.r
result.g = background.g * (1 - A) + foreground.g
result.b = background.b * (1 - A) + foreground.b 
```

**非预乘 Alpha**

在此示例中，Alpha 通道与颜色通道完全分离。

```
Pixel: r = 1, g = 0, b = 0, a = 0.5 
```

保存时：

```
Pixel: r = 1, g = 0, b = 0, a = 0.5 
```

一样的。在这种情况下，minitech 提供的答案是正确的。

更多细节可以在这里找到：[预乘 alpha](https://developer.nvidia.com/content/alpha-blending-pre-or-not-pre)

# c# - 如何从 Facebook C# SDK 在 JsonArray 中执行 linq 查询？

> ID：10768839
> 
> 赞同：3
> 
> 时间：2012-05-26T18:39:25.923
> 
> 标签：c#, linq, facebook-c#-sdk

我正在尝试使用 Facebook C# SDK 在朋友 JsonArray 中执行 linq 查询。所以，我尝试：

```
var facebook = new FacebookWebClient();

dynamic facebookFriends = facebook.Get("me/friends");

JsonArray data = facebookFriends.data;

var friends = data.Where<JsonObject>(d => d["name"].ToString().StartsWith("D")); 
```

但在最后一行我得到以下编译错误：

“'Facebook.JsonArray' 不包含 'Where' 的定义，并且最佳扩展方法重载 'System.Linq.ParallelEnumerable.Where(System.Linq.ParallelQuery, System.Func)' 有一些无效参数”

那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T18:53:59.283

你不能使用，`Where<JsonObject>`因为`JsonArray`is `IEnumerable<JsonValue>`， not `IEnumerable<JsonObject>`。

另一方面，您不必使用`Where<>`扩展方法指定类型：

```
var friends = data.Where(d => d["name"].ToString().StartsWith("D")); 
```

这将使`d`lambda 表达式中的变量为`JsonValue`.

如果您只想迭代`JsonObject`元素，则必须在之前添加`OfType`方法`Where`（但我还没有真正测试过它是否有效）：

```
var friends = data.OfType<JsonObject>().Where(d => d["name"].ToString().StartsWith("D")); 
```

# iphone - 识别循环生成的所有对象

> ID：10768847
> 
> 赞同：0
> 
> 时间：2012-05-26T18:40:51.120
> 
> 标签：iphone, loops, uitextfield

[这个问题与我之前提出的题为“从循环中识别 UIButton](https://stackoverflow.com/questions/10694165/recognizing-uibutton-from-a-loop) ”的问题有点相关。

在这种情况下，我生成了一堆带有循环的 UITextField。当其中一个的值发生更改时，我能够识别它是哪个文本字段。

但是，我想编辑生成的每个文本字段。具体来说，我从一个已编辑的文本字段中获取输入，并且我想根据已识别文本字段的输入和名称重新计算其他文本字段。

我如何要求修改每个其他生成的、未编辑的文本字段？

/弗拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:46:25.857

将文本字段存储在数组中，然后当您想要更改值时

```
[self.myTextFieldArray enumerateObjectsUsingBlock:^(UITextField *textField, NSUInteger idx, BOOL *stop){
    if (![textField isEqual:theTextFieldThatWasEdited])
        textField.text = @"whatever text you want";
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T19:34:03.650

由于您已经在使用标签，因此这`viewWithTag`是用于：

```
// Get a reference to the textfield with tag 3
UITextField *textField3 = (UITextField *)[self.view viewWithTag:3];

// Calculate your new value
float result = 4.32; // Calculate the value that you want the textfield with tag 3 to display

// Change the contents
textField3.text = [NSString stringWithFormat:@"%f", result]; 
```

# ruby-on-rails - Rails 3，在另一个控制器的视图中创建一个控制器的视图

> ID：10768848
> 
> 赞同：0
> 
> 时间：2012-05-26T18:40:59.620
> 
> 标签：ruby-on-rails

我正在开发一个涉及用户、项目和线程模型的 Rails 应用程序。用户可以创建或访问项目并创建有关该项目的线程。因此，用户可能会访问项目页面并从菜单中选择“创建线程”选项。我希望线程控制器的“新”和“显示”操作的视图显示在项目的“显示”视图中。

我在过去的三四天里才使用 Rails，所以我目前的解决方案效率很低。

我以这种方式为项目页面中的线程创建了指向“新”表单的链接：

```
<%= link_to "Create Thread", {controller: 'projects', action: 'show',
newthread: true} %> 
```

项目的“显示”动作存储@newthread 值，在呈现项目页面时，它会检查是否设置了@newthread，如果是，则显示创建新线程的表单。

我可以通过这种方式创建新线程，但是当表单出现错误时，我不确定如何使用线程表单及其错误消息来呈现项目页面。

我该如何解决这个特定问题？或者，有没有更好的方法来组织这两个资源，以便线程控制器的视图始终显示在项目的“显示”视图中？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T23:25:30.023

我认为在这种情况下最好的选择是使用嵌套路由。

看看这里： http: [//guides.rubyonrails.org/routing.html#nested-resources](http://guides.rubyonrails.org/routing.html#nested-resources)

您可以使用项目的显示视图显示与其相关的线程，使用简单的循环。

例如：

项目负责人：

```
def show
    @project = Project.find(params[:id])
    @threads = @project.threads.all
end 
```

显示视图：

```
<% @threads.each do |thread| %>
...
<% end %> 
```

我希望它有帮助...

# ruby - Ruby + AMQP：并行处理队列

> ID：10768850
> 
> 赞同：4
> 
> 时间：2012-05-26T18:41:25.157
> 
> 标签：ruby, amqp

由于我的大部分任务都依赖于网络，我想并行处理我的队列，而不是一次只处理一条消息。

所以，我正在使用以下代码：

```
#!/usr/bin/env ruby
# encoding: utf-8

require "rubygems"
require 'amqp'

EventMachine.run do
  connection = AMQP.connect(:host => '127.0.0.1')

  channel  = AMQP::Channel.new(connection)
  channel.prefetch 5

  queue    = channel.queue("pending_checks", :durable => true)
  exchange = channel.direct('', :durable => true)

  queue.subscribe(:ack => true) do |metadata, payload|
    time = rand(3..9)
    puts 'waiting ' + time.to_s + ' for message ' + payload
    sleep(time)

    puts 'done with '+ payoad

    metadata.ack
  end
end 
```

为什么它不使用我的预取设置？我想它应该得到 5 条消息并并行处理它们，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T01:46:25.050

预取是在您确认之前可以提前发送给您的最大消息数。

换句话说，预取大小不限制单个消息到客户端的传输，仅限制在客户端仍有一条或多条未确认消息时提前发送更多消息。（来自 AMPQ 文档）

[QoS 预取消息](http://rubydoc.info/github/ruby-amqp/amqp/master/file/docs/Queues.textile#QoS___Prefetching_messages)

[RabbitMQ AMQP 参考](http://www.rabbitmq.com/amqp-0-9-1-reference.html)

EventMachine 是单线程和基于事件的。对于不同线程或进程上的并行作业，请参阅 EM::Deferrable，然后是 Thread 或 spawn。

另请参阅 Hot Bunnies，一种基于 RabbitMQ Java 客户端的快速 DSL：

[https://github.com/ruby-amqp/hot_bunnies](https://github.com/ruby-amqp/hot_bunnies)

（感谢 Google Groups 上的 Michael Klishin 和博主 stoyan 提供的信息）

# php - 使用正则表达式分隔本地、youtube 或 vimeo 视频

> ID：10768858
> 
> 赞同：2
> 
> 时间：2012-05-26T18:42:25.790
> 
> 标签：php, regex

我正在制作一个视频播放网站，我需要使用 html5 视频播放器来播放本地视频和 youtube api 和 vimeo api 来播放 vimeo 视频。问题是我想过滤用户输入的所有 3 个条件的链接。我尝试了一些正则表达式，因为我以前从未使用过它但没有成功。谁能帮我举一个例子，展示如何分离这些链接以制作 3 个条件

1.  从 youtube 链接中取出“youtube”一词，以便我可以做出条件声明

2.  同样的方法从本地视频中取出 .mp4 和 .ogg 扩展名，以便可以在 html5 视频播放器中播放

3.  同样的方法从 vimeo 链接中提取单词“vimeo”，这样我就可以使用 vimeo api 来播放 vimeo 视频。

任何人都可以帮忙吗？

例如我们输入一个 youtube 链接

[http://www.youtube.com/watch?v=example](http://www.youtube.com/watch?v=example)

那么如何从这个链接中得到“youtube”这个词呢？

我上传了一个带有文件名的本地视频

例子.mp4

那么我怎样才能从中获得扩展的 mp4 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:28:14.427

这是改编自我之前写[的一个 php 类](http://code.google.com/p/videopian/source/browse/trunk/Videopian.php)：

```
<?php

function identifyService ( $url )
{
    $url = preg_replace('#\#.*$#', '', trim($url));

    $services_regexp = array(
        "#^\w+\.(?P<format>[a-zA-Z0-9]{2,5})#"                     => 'local',
        '#vimeo\.com\/(?P<id>[0-9]*)[\/\?]?#i'                     => 'vimeo',
        '#youtube\.[a-z]{0,5}/.*[\?&]?v(?:\/|=)?(?P<id>[^&]*)#i'   => 'youtube'
    );

    foreach ( $services_regexp as $pattern => $service ) {
        if ( preg_match ( $pattern, $url, $matches ) ) {
            return ( $service === 'local' ) ? $matches['format']  : $service;
        }
    }

    return false;

}

$url = "foo.ogg";
// $url = "bar.mp4";
// $url = "http://www.youtube.com/watch?v=_rqR8_mOp_A";
// $url = "http://vimeo.com/39044814";
$service  = identifyService( $url );
var_dump( $service );

?> 
```

希望能帮助到你。

# mapping - Play 2.0表单映射约束：不支持Double？

> ID：10768859
> 
> 赞同：2
> 
> 时间：2012-05-26T18:42:46.767
> 
> 标签：mapping, double, constraints, playframework-2.0

新手，看起来可以将数字约束应用于 Ints 和 Longs，但不能应用于 Doubles。

鉴于不能绑定/取消绑定具有 Double 属性的案例类，这有点令人作呕；IE

```
case class Foo(orderTotal: Double)

// no dice, need a Double but get an Int (same deal with longNumber)
val form = Form(mapping('orderTotal -> number)(Foo.apply)(Foo.unapply) ) 
```

有人有解决方法吗？似乎是一个疏忽，不是吗？你会认为 Double 将是一个相当普遍的要求......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:50:33.203

请参阅上面 Julian 的评论，在 2.1 快照中解决...

# ios - Apple HIG 是否强制点击 UITableView 中的单元格在正常和编辑模式下应该具有相同的操作？

> ID：10768861
> 
> 赞同：0
> 
> 时间：2012-05-26T18:42:59.803
> 
> 标签：ios, user-interface, uitableview

我有一个 UITableView 显示每周计划。在普通视图中，如果用户点击单元格，则会在不可编辑的视图中打开活动。然而，在编辑模式下，点击一个单元格允许用户用活动列表中的另一个活动替换现有活动。编辑模式还有一些额外的“添加...”单元格，允许用户将列表中的活动添加到他们的日程安排中。

虽然从我的测试经验来看这似乎很直观，但我想知道 Apple 是不允许这样做还是建议不要这样做。我在 HIG 中找不到这样的直接引用。

有没有人遇到过这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:46:09.937

它允许在编辑和正常模式下有不同的动作。事实上，苹果的一些应用程序就是这样做的。例如，联系人应用程序将在正常模式下拨打被窃听的电话号码，但在编辑模式下对其进行编辑。并且有一个新的添加按钮来添加新号码。

# linux - traceroute输出分析linux - 路由器ip地址

> ID：10768864
> 
> 赞同：0
> 
> 时间：2012-05-26T18:43:42.660
> 
> 标签：linux, networking, topology, traceroute

我有兴趣了解网络拓扑。具体来说，我想知道“外部世界”看到的路由器的 IP 地址，而不是 192.168.1.1，因为我使用了 traceroute 命令，它给出了以下输出：

```
..~\ $ traceroute www.google.com
traceroute to www.google.com (74.125.236.148), 30 hops max, 60 byte packets
1  172.16.0.1 (172.16.0.1)  4.130 ms  21.449 ms  36.993 ms
2  192.168.1.1 (192.168.1.1)  46.944 ms  51.243 ms  68.279 ms
3  ras.beamtele.net (49.206.128.1)  87.065 ms  87.423 ms  87.982 ms
4  ras.beamtele.net (183.82.14.41)  88.742 ms  88.949 ms  90.708 ms
5  121.240.252.5.STATIC-Hyderabad.vsnl.net.in (121.240.252.5)  91.331 ms  91.590 ms    115.113.207.53.static-hyderabad.vsnl.net.in (115.113.207.53)  91.896 ms
6  172.31.16.197 (172.31.16.197)  142.291 ms  85.328 ms  19.992 ms
7  115.113.165.98.static-mumbai.vsnl.net.in (115.113.165.98)  21.951 ms  23.432 ms  24.055 ms
8  72.14.232.202 (72.14.232.202)  25.678 ms * *
9  216.239.48.179 (216.239.48.179)  25.949 ms  44.853 ms  47.146 ms
10  bom03s02-in-f20.1e100.net (74.125.236.148)  68.244 ms  68.474 ms  68.842 ms 
```

我在 WLAN 中的 IP 是 172.16.0.9（使用 ifconfig 找到）。我想 49.206.128.1 是网关。当我使用“http://whatismyipaddress.com”之类的网络服务时，我得到 49.206.128.1，这是第三个跃点。

LAN 中的所有其他 IP 地址都类似于 172.16.0.xxx（可能是保留的 IP 系列之一）。

请解释一下第一跳和第二跳实际上是什么。有人（不在局域网内）可以像局域网中的人那样使用 192.168.1.1 联系路由器吗？

（我是这个领域的新手，所以请忽略任何误解）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:19:51.990

使用 NAT 的典型情况（即：将具有私有 IP 范围的网络连接到 Internet）内部网络内的所有机器共享相同的公共 IP 地址（或地址集）。

所以 49.206.128.1 是路由器和网络内所有其他机器的公共地址。

# c++ - 等距，鼠标位置->平铺坐标公式中的坐标不正确

> ID：10768865
> 
> 赞同：2
> 
> 时间：2012-05-26T18:43:59.733
> 
> 标签：c++, math, collision, sfml, isometric

> > 编辑调整了所有发布的算法。它现在几乎完美无缺。它只是失败的最左边的 9 个图块（图片在底部）。在大多数情况下，当悬停在这九个中的一个时，它会选择完全错误的图块。
> > 
> > EDIT2 我现在几乎可以肯定问题是由于 screenX 或 screenY 为负数时的错误造成的，所以它可能归结为在 tilePixelX/Y 上使用 math.abs，但不能只是这样，否则结果不会相距甚远（尽管它很可能有所贡献）

我正在制作一个等距游戏，现在我正在研究地图渲染引擎。从理论上讲，它应该相当简单，但我无法从鼠标位置获取瓷砖坐标。

我的瓷砖是 64 宽和 32 高。如下图所示：

![在此处输入图像描述](../Images/8593692d63d1226dda67d0b965aa7530.png)

我的地图显示得相当完美：

实际问题在顶部进行了解释。

这是我现在正在使用的代码：

```
int screenX = sf::Mouse::getPosition(window).x - 250;
int screenY = sf::Mouse::getPosition(window).y - 250;

int tilex = floor((screenY / 32) + (screenX / 64));
int tiley = floor((screenY / 32) - (screenX / 64));

int tilePixelX = abs(screenX % 64); // I believe part of the problem
int tilePixelY = abs(screenY % 32); // is absoluting these. Not all though.

sf::Color mCol = mouseMap.getPixel(tilePixelX, tilePixelY);

if (mCol.r == 20)
    tilex -= 1;
else if (mCol.r == 40)
    tiley -= 1;
else if (mCol.r == 60)
    tilex += 1;
else if (mCol.r == 80)
    tiley += 1; 
```

我现在正在使用一个运行良好的鼠标地图，但是如上所述，它仍然在钻石中最左边的九个瓷砖上失败（当你将它们悬停时，它会选择一个看似随机的大约 4-5 个瓷砖，或者根本没有瓷砖（我猜测超出了地图范围）：

![图片](../Images/1858085b66c688b76319d01ec68995a8.png)

这也显示了以红色突出显示的问题图块。

这就是地图的样子，让您了解我的渲染引擎是如何工作的。请注意，透明像素被认为是空的，黑色像素被认为是墙壁（我没有为上面的示例图片渲染，所以上图中显示的瓷砖都不是第 0 列或第 0 行，它们也不是最后一行。

![在此处输入图像描述](../Images/9dcfeee9fc1397084b5a2cb288e51965.png)

由于大部分地图都可以正常工作，我的鼠标地图绝对是正确的，但无论如何都是这样：

![在此处输入图像描述](../Images/a6b7dcd80d3dc950c058280681ce7cc0.png)

编辑：

我已将必要的文件和 DLL 打包到一个 zip 文件中，以便您可以运行它并亲自查看发生了什么：

[https://dl.dropbox.com/u/37019412/Broken.zip](https://dl.dropbox.com/u/37019412/Broken.zip)

绘图公式为：

```
(x - y) * 32 + 250, (x + y) * 16 + 250 
```

coma 之前是 X，之后是 Y，x 和 y 内部是瓦片坐标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T22:27:12.773

查看教程，您似乎需要从鼠标坐标中减去 256（224 加上宽度的一半）。告诉我们这是否有效！

并且请不要在每次绘制一个新精灵时动态分配一个新精灵，只是为了以相同的方法删除它！好的，我会尽量避免对您的代码发表进一步的评论。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T19:29:00.343

最后是由于很多舍入错误。

```
 if (screenX < 0 || tilePixelX < 0)
                    tilePixelX = 64 - abs(tilePixelX);
                if (screenY < 0 || tilePixelY < 0)
                    tilePixelY = 32 - abs(tilePixelY);
                if (tilePixelX >= 64)
                    tilePixelX = 63;
                if (tilePixelY >= 32)
                    tilePixelY = 31;

                if (screenX < 0 || screenY < 0)
                {
                    tilex--;
                    tiley++;
                } 
```

整理出来，即使它在某些地方有点丑陋。

# django - 日期未在 Django-Crispy-Forms 中呈现

> ID：10768867
> 
> 赞同：2
> 
> 时间：2012-05-26T18:44:07.690
> 
> 标签：django, django-forms

我正在使用带有引导日期选择器的酥脆表单，我可以保存表单，但在编辑页面中，日期未显示在模板中。

这是代码：

在editForm() 中：

```
def init(self, *args, **kwargs):
self.helper = FormHelper()
Div('date_end', id="date_end", template='project/util/datepicker_end.html'), 
```

datepicker_end.html：

```
 <div class="input-append date" id="date_end" data-date="{% now 'd-m-Y' %}" data-date-format="dd-mm-yyyy">
    <label for="id_date_end">Date end:</label>
    <input type="text" name="date_end" id="id_date_end" readonly="readonly" class="input-small"><span id="datepicker-icon" class="add-on"><i class="icon-calendar"></i></span>
    </div> 
```

“打印表单”的输出（日期在表单中，但未在“div”中呈现）：

```
<tr><th><label for="id_date_end" class="required">Date end: *</label></th><td><input type="text" name="date_end" value="31-05-2012" id="id_date_end" /></td></tr> 
```

这导致一个空字段： http: [//postimage.org/image/r9wqfyrvf/](http://postimage.org/image/r9wqfyrvf/)

项目链接：[https ://github.com/maraujop/django-crispy-forms](https://github.com/maraujop/django-crispy-forms)

文档链接：http: [//django-crispy-forms.readthedocs.org/en/d-0/index.html](http://django-crispy-forms.readthedocs.org/en/d-0/index.html)

编辑！

我找到了解决方案。而不是在模板中使用输入 html 标记，而是使用普通标记 django {{form.date_end}}。注册表格使用相同的模板。

模板 datepicker_end.html 使用 django 标签 {{form.date_end}} 而不是普通的 html 输入。

```
<div id="div_id_data_end" class="clearfix control-group">
    <div class="input-append date" id="date_end" data-date="{% now 'd-m-Y' %}" data-date-format="dd-mm-yyyy">
            <label class="control-label requiredField" for="id_date_end">Data end* </label>
            <div class="controls">
                    {{form.date_end}}<span id="datepicker-icon" class="add-on"><i class="icon-calendar"></i></span>        
            </div>
    </div>
</div> 
```

在forms.py

```
class EditForm(ModelForm):
class Meta:
    model = MyModel

self.helper.layout = Layout(  
        Fieldset(
        [...]
        Field('date_end', css_class='input-small dateinput', id='date_end', readonly='readonly', template='project/util/datepicker_end.html'),
) 
```

问候！

# spring - Spring DI applicationContext.xml xsi:schemaLocation 究竟是如何使用的？

> ID：10768873
> 
> 赞同：9
> 
> 时间：2012-05-26T18:45:20.637
> 
> 标签：spring, dependency-injection, applicationcontext

注意：我提到的测试项目可以通过以下方式下载：

git 克隆 [https://github.com/mperdikeas/so-spring-di-appcontext-schemalocation.git](https://github.com/mperdikeas/so-spring-di-appcontext-schemalocation.git)

..并使用“ant run”运行。

我“理解”XML 命名空间名称只是用作不透明的标识符，而不是用作 URI（[维基百科](http://en.wikipedia.org/wiki/XML_namespace)）。我还“理解”XML 模式位置旨在提供有关模式文档实际位置的提示，并且作为提示，在实践中未使用 ( [w3.org](http://www.w3.org/TR/xmlschema-0/#schemaLocation) )。考虑到这一点，我一直在通过修改 applicationContext.xml 来试验一个简单的 Spring DI 应用程序（用于简单的 J2SE 设置）。这是起始版本：

```
<beans xmlns             = "http://www.springframework.org/schema/beans"                                             
      xmlns:xsi         = "http://www.w3.org/2001/XMLSchema-instance"                                               
      xmlns:context     = "http://www.springframework.org/schema/context"                                           
      xmlns:p           = "http://www.springframework.org/schema/p"                                                 
      xsi:schemaLocation="http://www.springframework.org/schema/beans                                               
                          http://www.springframework.org/schema/beans/spring-beans-2.5.xsd                          
                          http://www.springframework.org/schema/context                                             
                         http://www.springframework.org/schema/context/spring-context-2.5.xsd">                    

<context:component-scan base-package="atm"/>                                                                       
<context:property-placeholder location="classpath:META-INF/spring/atm.properties"/>                                

<bean id="soapTransport_" class="atm.SoapATMTransport" p:retries="${transport.retries}"/> 
```

当我执行“sudo ifconfig eth0 down”时，项目运行完美，这与运行时一致，无需费心从 schemaLocations 中获取任何内容。但是，当我通过在每对中的第二个 URL 中添加一个简单的下划线来破坏 schemaLocations 时，我收到了以下投诉：

```
 [java] org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 10 in XML document from class path resource [META-INF/spring/applicationContext.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 10; columnNumber: 100; cvc-elt.1: Cannot find the declaration of element 'beans'.
 [java]     at org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:194)
 [java]     at org.apache.tools.ant.taskdefs.Java.run(Java.java:771)
 [java]     at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:221)
 [java]     at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:135)
 [java]     at org.apache.tools.ant.taskdefs.Java.execute(Java.java:108)
 [java]     at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
 [java]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 [java]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
 [java]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 [java]     at java.lang.reflect.Method.invoke(Method.java:601)
 [java]     at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
 [java]     at org.apache.tools.ant.Task.perform(Task.java:348)
 [java]     at org.apache.tools.ant.Target.execute(Target.java:390)
 [java]     at org.apache.tools.ant.Target.performTasks(Target.java:411)
 [java]     at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
 [java]     at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
 [java]     at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
 [java]     at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
 [java]     at org.apache.tools.ant.Main.runBuild(Main.java:809)
 [java]     at org.apache.tools.ant.Main.startAnt(Main.java:217)
 [java]     at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
 [java]     at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109) 
```

这似乎表明 Spring DI 运行时使用 xsi:schemaLocation 中每对中的第二个 URL 作为某种标识符（在其逻辑中硬编码，因为没有网络访问）。所以我的假设是 Spring DI 运行时对每个命名空间使用两种标识符：用于唯一标识命名空间的**xmlns**标识符（用作不透明字符串）和用于唯一标识该命名空间的架构版本的**schemaLocation**标识符（再次使用作为一个不透明的字符串）。即，**schemaLocation**实际上被使用（以一种扭曲的方式？因为这似乎不是 w3c 文档的意图）来对命名空间进行版本控制。而且，在这种情况下，为什么 Spring DI 运行时不抱怨缺少**“ **p** ”命名空间的**schemaLocation 。**我的心智模型正确吗？**

 *** * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-26T19:02:13.107

这是发生的事情：

*   XML 模式允许您为 XML 命名空间定义别名（简称）。从技术上讲，所有名称空间都由完整的 URI 标识，但这会非常麻烦 - 因此您可以使用短别名，例如`context`and `p`。还有一个由`xmlns`属性表示的默认命名空间

*   默认情况下，XML 解析器假定命名空间 URI 也是 XSD 文件 URL 位置。这通常是这种情况，但不是规范要求的。如果您不提供`schemaLocation`属性，这也是 Spring 中 XML 解析器的工作方式。

*   `schemaLocation`用于从命名空间 URI 映射到 XSD 文件物理位置 (URL)。当架构命名空间不指向有效的 XSD URL 时使用它**（**请参阅[MSDN 上的`schemaLocation`](http://msdn.microsoft.com/en-us/library/ms256100.aspx)）。

*   最后但同样重要的是，Spring 添加了另一层，将 Internet URL 转换为 CLASSPATH 上的本地文件。这样，您的应用程序可以在没有 Internet 连接的情况下启动（或者当 springframework.org 站点关闭时）。

如果你搜索你的项目库，你会发现几个名为`spring.schemas`. 这些文件包含类似于下面的行（从找到的文件中提取`spring-context.jar`，我添加了对齐方式）：

```
http\://www.springframework.org/schema/context/spring-context.xsd= org/springframework/context/config/spring-context-3.1.xsd
http\://www.springframework.org/schema/jee/spring-jee.xsd=         org/springframework/ejb/config/spring-jee-3.1.xsd
http\://www.springframework.org/schema/lang/spring-lang.xsd=       org/springframework/scripting/config/spring-lang-3.1.xsd
http\://www.springframework.org/schema/cache/spring-cache.xsd=     org/springframework/cache/config/spring-cache-3.1.xsd 
```**

# mysql - 插入后更新已读/未读表

> ID：10768879
> 
> 赞同：0
> 
> 时间：2012-05-26T18:46:23.837
> 
> 标签：mysql, database, foreign-keys

我正在尝试创建一个单独的表来跟踪已读/未读帖子。使用`MySQLi`我将有两个表`items`和`items_tracking`. 呈现页面时，它将加入表格并检查用户是否阅读了帖子。

```
items
+-------+------------+----+
|  id   | created_by | .. |
+-------+------------+----+
| item1 | id12       | .. |
| item2 | id433      | .. |
+-------+------------+----+

items_tracking
+---------+---------+------+
| user_id | item_id | read |
+---------+---------+------+
| id1     | item1   |    0 |
| id2     | item2   |    0 |
| id94    | item1   |    1 |
+---------+---------+------+ 
```

现在的想法是，每当在`items`表中创建新项目/帖子时，它还将在`items_tracking`表中为所有用户和列创建行`read = 0`。问题是，我不知道如何解决这个问题，因为我将使用的外键`items_tracking`仍然几乎未确定。

关于如何同时插入两个表，而第二个表引用第一个表的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:54:53.390

您不需要跟踪表中 read=0 的记录。

```
SELECT ..., t.read FROM items i LEFT JOIN items_tracking t ON (t.item_id = i.id) 
```

即使 ; 中没有对应的记录，这个查询也会起作用`items_tracking`。在这种情况下，结果中的 t.read 将为`NULL`. 你只需要插入记录`read = 1`，虽然你甚至不需要这个标志，你测试`t.item_id IS NOT NULL`看看你是否有记录`items_tracking`。

# php - PHP - 正则表达式删除一个字符太多

> ID：10768880
> 
> 赞同：1
> 
> 时间：2012-05-26T18:46:25.160
> 
> 标签：php, regex

我不知道如何解决以下问题：

```
 preg_replace("/e[^t]/", "", "testet"); 
```

这将只删除“e”，但会删除“es”。我怎样才能做到它只删除第一个 e （并留下第二个'et'）？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T18:49:20.640

负前瞻：

```
preg_replace("/e(?!t)/", "", "testet") 
```

正如[这里](http://www.regular-expressions.info/lookaround.html)所解释的，前瞻不会捕获字符（消耗字符），它们仅在匹配有效时才断言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T18:50:13.110

```
preg_replace("/e([^t])/", "$1", "testet"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T18:51:55.747

而不是`/e[^t]/`尝试`/e(?!t)/`（负前瞻）

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-26T18:50:19.373

让它不贪心

```
preg_replace("/e[^t]/u", "", "testet"); 
```

# wrapper - 在 ubuntu 中将 jpeg 库添加到 C++ Qt Creator 项目？

> ID：10768881
> 
> 赞同：1
> 
> 时间：2012-05-26T18:46:25.567
> 
> 标签：wrapper, qt-creator, libjpeg

我想为现有的 jpeg 库创建一个包装类。我已经在 Qt creator 中创建了项目？谁能告诉我如何在 Qt Creator 中链接 libjpeg8？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:55:55.000

只需添加

```
LIBS += -L/usr/lib -ljpeg8 
```

在您的 .pro 文件中

# iphone - 尝试实现委托继承

> ID：10768884
> 
> 赞同：6
> 
> 时间：2012-05-26T18:46:44.157
> 
> 标签：iphone, ios, cocoa-touch, design-patterns, delegates

我有一个名为 ToolbarView 的类，它是 UIView 的子类，基本上创建了一个 UIView，其顶部有一个消失/重新出现的 UIToolbar。我还有一个名为 DraggableToolbarView 的 ToolbarView 子类，它允许用户在屏幕上拖动视图。

我需要为 ToolbarView 创建一个委托，以便它可以在工具栏重新出现和消失时通知另一个对象/类。我还需要创建一个委托，`DraggableToolbarView`以便在拖动视图时通知另一个对象/类。DraggableToolbarViews 委托还需要通知另一个对象/类工具栏何时重新出现和消失。

所以我决定实现 ToolbarViewDelegate，并让 DraggableToolbarViewDelegate 继承自它并拥有自己的方法，如下所示：

**工具栏视图.h**

```
#import <UIKit/UIKit.h>

@protocol ToolbarViewDelegate;

@interface ToolbarView : UIView <UIGestureRecognizerDelegate>
{
    id <ToolbarViewDelegate> _toolbarViewDelegate;
}

@property(nonatomic, assign) id <ToolbarViewDelegate> toolbarViewDelegate;

@end 
```

**工具栏视图.m**

```
#import "ToolbarView.h"
#import "ToolbarViewDelegate.h"

...

- (void) showBars
{      
       ...
        if (self.toolbarViewDelegate)
        {
            [self.toolbarViewDelegate toolbarViewWillShowToolbar:self];
        }

       ...
}

- (void) hideBars
{
       ...
        if (self.toolbarViewDelegate)
        {
            [self.toolbarViewDelegate toolbarViewWillHideToolbar:self];
        }

        ...
} 
```

**ToolbarViewDelegate.h**

```
@class ToolbarView;

@protocol ToolbarViewDelegate

@required

- (void) toolBarViewWillShowToolbar:(ToolbarView *)toolbarView;
- (void) toolBarViewWillHideToolbar:(ToolbarView *)toolbarView;

@end 
```

**DraggableToolbarView.h**

#import "工具栏视图.h"

```
@protocol DraggableToolbarViewDelegate;

@interface DraggableToolbarView : ToolbarView
{
    id <DraggableToolbarViewDelegate> _draggableToolbarViewDelegate;
}

@property(nonatomic, assign) id <DraggableToolbarViewDelegate> draggableToolbarViewDelegate;

@end 
```

**DraggableToolbarView.m**

```
#import "DraggableToolbarView.h"
#import "DraggableToolbarViewDelegate.h"

...

- (void)drag:(UIPanGestureRecognizer *)sender
{
   ...
        if (self.draggableToolbarViewDelegate)
        {
            [self.draggableToolbarViewDelegate draggableToolbarViewWillDrag:self];
        }

  ...

}

... 
```

**DraggableToolbarViewDelegate.h**

```
#import "ToolbarViewDelegate.h"

@class DraggableToolbarView;

@protocol DraggableToolbarViewDelegate <ToolbarViewDelegate>

@required

- (void) draggableToolbarViewWillDrag:(DraggableToolbarView *)draggableToolbarView;

@end 
```

**SomeViewController.h**

```
#import <UIKit/UIKit.h>
#import "ToolbarViewDelegate.h"
#import "DraggableToolbarViewDelegate.h"

@interface SomeViewController : UIViewController <ToolbarViewDelegate, DraggableToolbarViewDelegate>
{

}
@end 
```

**SomeViewController.m**

```
#import "DraggableToolbarView.h"
...
- (void) toolbarViewWillShowToolbar:(ToolbarView*)toolbarView
{
    //NSLog(@"Toolbar Showed");
}

- (void) toolbarViewWillHideToolbar:(ToolbarView*)toolbarView
{
    //NSLog(@"Toolbar Hidden");
}

- (void) draggableToolbarViewWillDrag:(DraggableToolbarView*)draggableToolbarView
{
    //NSLog(@"Dragged");
}

...

[draggableToolbarView setDraggableToolbarViewDelegate:self];

... 
```

当我这样做时，只有`DraggableToolbarDelegate`方法会响应。但是，当我也这样做`[drabbleToolbarView setToolbarViewDelegate:self]`时。我试过在没有继承的情况下单独做每个委托，它工作正常，所以我相信问题不在代码的任何其他部分。

任何人都可能知道为什么？我想通过使协议继承，我也不必为 DraggableToolbar 对象设置 ToolbarViewDelegate。

更新：添加了更多代码

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T21:54:09.813

在您的代码中，任何给定的`DraggableToolbarView`实例都有*两个*属性可以连接到委托，一个调用`toolbarViewDelegate`它从其超类继承，另一个调用`draggableToolbarViewDelegate`它本身定义`DraggableToolbarView`。如果您希望控制器获取所有委托消息，则必须同时设置这两个。

但是，您尝试做的事情是可能的。您需要在两个视图类中使用相同的属性名称，以便任何实例只有一个委托连接。

首先，更改超类中委托的名称。（请注意，您不需要，也确实不应该为该属性声明一个 ivar——它是由 . 创建的`@synthesize`。）

```
@interface ToolbarView : UIView <UIGestureRecognizerDelegate>
@property (nonatomic, assign) id <ToolbarViewDelegate> delegate;
@end 
```

您将在子类中使用相同的属性名称。

```
@interface DraggableToolbarView : ToolbarView
@property (nonatomic, assign) id <DraggableToolbarViewDelegate> delegate;
@end 
```

只要子类中的支持 ivar 的名称与超类的名称不同，这是允许的，例如，

```
// In superclass
@synthesize delegate;
// In subclass
@synthesize delegate = delegate_; 
```

现在更改两个视图类中的所有委托消息以使用这一属性：

```
- (void)showBars 
{

    if (self.delegate)
    {
        [self.delegate ...

- (void)drag:(UIPanGestureRecognizer *)sender
{
    //...
    if (self.delegate)
    {
        [self.delegate ... 
```

现在您可以发送`setDelegate:`到 a `DraggableToolbarView`，它会为拖动方法和显示/隐藏方法使用相同的委托。

最后，一个术语/解释性说明。在回答[您之前的问题](https://stackoverflow.com/questions/10766643/subclass-a-delegate/)时，Caleb 对“堆叠”协议使用了正确的术语，而 Richard 没有。协议不会相互*继承*，但一个协议可以*采用*另一个协议。关系相似，但不同。当一个对象*符合*协议时，它承诺实现该协议中声明的方法。该协议没有任何实现。一个协议采用另一个协议也是如此——这些方法只是被声明为在两者中都存在。当你写：

```
@protocol DraggableToolbarViewDelegate <ToolbarViewDelegate> 
```

您是说任何承诺实现`DraggableToolbarViewDelegate`的方法的对象也将实现来自 的方法`ToolbarViewDelegate`。这就是它的全部含义。同样，没有实现与该承诺一起出现。

在这种情况下，这意味着 a`DraggableToolbarView`可以期望其委托实现`ToolbarViewDelegate`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T19:09:47.077

您还没有给出完整的代码，但是从这里的任何内容来看，请确保

1.  您的 ToolBarView 及其子类有一个`id <ToolBarViewDelegate>`委托作为属性。
2.  您的 DraggableToolbarViewDelegate 扩展了 NSObject 协议。
3.  并且您的其他 ViewController 对象符合委托协议而不是工具栏视图。
4.  一旦您的控制器实现了委托方法并符合协议，请将视图对象的委托设置为 self，然后使用视图中设置的委托属性来调用这些协议方法。

# c# - 旋转 TIF/JPG 图像而不丢失元数据：EXIF 和颜色配置文件

> ID：10768887
> 
> 赞同：0
> 
> 时间：2012-05-26T18:47:09.570
> 
> 标签：c#, .net, image-processing, colors

我有工作代码来旋转图像。但我需要保留元数据，特别是颜色配置文件信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T00:43:25.460

```
 public static void Rotate(string fileName,RotateFlipType rft, string targetMimeType)
    {
        ImageCodecInfo imageCodecInfo = ImageCodecInfo.GetImageEncoders().Single(i => i.MimeType == targetMimeType);

        EncoderParameters encoderParams = new EncoderParameters(1);
        encoderParams.Param[0] = new EncoderParameter(Encoder.Quality, 100L);

        using( Image im = Image.FromFile(fileName, true))
        {
            im.RotateFlip(rft);
            im.Save("rotated_"+fileName, imageCodecInfo, encoderParams);
        }
    } 
```

看起来怎么样？

# css - 如何在 twitter bootstrap 中将默认背景颜色白色更改为其他颜色

> ID：10768891
> 
> 赞同：40
> 
> 时间：2012-05-26T18:47:44.593
> 
> 标签：css, twitter-bootstrap

我正在构建一个 Web 应用程序，其中我使用 css 将我的默认颜色设置为深蓝色。但是当我在我的页面中添加 twitter bootstrap css 时，我没有找到我的海军蓝色，而是找到了 twitter bootstrap 提供的白色背景颜色。

我的问题是我应该在引导程序中更改 css 的哪个部分来更改页面的背景。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-26T20:26:49.803

您可以通过添加自己的规则来覆盖 Bootstraps 默认 CSS。

```
<style type="text/css">
   body { background: navy !important; } /* Adding !important forces the browser to overwrite the default style applied by Bootstrap */
</style> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2019-07-27T20:31:26.963

Bootstrap 4为此提供了标准方法，在此处进行了全面描述：[https ://getbootstrap.com/docs/4.3/getting-started/theming](https://getbootstrap.com/docs/4.3/getting-started/theming)

例如。您可以通过在导入引导程序的 SASS 文件中设置变量来覆盖默认值。文档中的一个例子（也回答了这个问题）：

```
// Your variable overrides
$body-bg: #000;
$body-color: #111;

// Bootstrap and its default variables
@import "../node_modules/bootstrap/scss/bootstrap"; 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-09-13T21:28:19.570

您必须通过更具体一点来覆盖引导程序默认值。试试这个黑色背景：

```
html body {
    background-color: rgba(0,0,0,1.00);

} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-05T07:47:23.280

我不建议更改实际的引导 CSS 文件。如果您不想使用 Jako 的第一个解决方案，您可以使用可用的 Bootstrap 主题生成器（[Bootstrap 主题生成器](http://www.webdesignforbeginners.info/bootstrap-theme-generators/)）创建自定义引导样式表。这样，您可以使用 1 个样式表和所有默认的 Bootstrap CSS，只需对它进行一次您想要的更改。使用 Bootstrap 主题生成器，您无需编写任何 CSS。您只需为您想要的身体颜色设置十六进制值（脚手架；bodyBackground）。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-02-22T15:24:05.620

您可以简单地将这一行添加到您的 bootstrap_and_overides.css.less 文件中

```
body { background: #000000 !important;} 
```

就是这样

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-01-29T18:52:56.353

我正在使用cdn boostrap，我找到的解决方案是：首先包含引导程序的cdn，然后（就在下方）包含`.css`您正在编辑引导程序默认样式的文件。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-07-17T18:17:26.523

添加您自己的 .css 文件并放入其中：

```
body{
    background: navy;
} 
```

**重要提示：** 在 html 中包含 css 文件时，首先包含 cdn bootstrap css，然后仅包含您​​自己的 .css 文件。这样，您自己的 css 文件中的样式会覆盖引导 css 的默认行为。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-11T07:29:06.290

不建议覆盖引导文件，只需在本地 style.css 中使用

身体{背景：你的颜色**！重要**；

这里**！重要**声明覆盖引导值。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-01-01T10:36:15.690

**颜色因 CSS 文件的顺序而改变。**

将自定义 CSS 放在引导 CSS 下。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-05T11:00:31.730

如何使用类更改 html 和 css 中的背景颜色

例子：

在你写的 html 上

```
<div class="pad_menu">
</div> 
```

在 CSS 上

```
.pad_menu {
   padding: 100px;
   background-color: #A9FFCB;
} 
```

所以你的背景会变成魔法薄荷，如果你想知道颜色的代码，我建议你访问[https://coolors.co](https://coolors.co)。希望这有用:)

# android - 响铃时更改电话铃声

> ID：10768892
> 
> 赞同：1
> 
> 时间：2012-05-26T18:47:55.530
> 
> 标签：android

我知道 Android 有一个内置系统，可让用户为单个电话簿联系人/组选择特殊铃声，但我必须在通话时动态更改铃声：

所以，我写了一个服务并在手机启动时加载它，设置一个捕获来电的电话监听器，保存默认电话铃声（在服务变量中）并在必要时用另一个铃声更改原始铃声，然后恢复原始铃声电话状态返回空闲时的铃声。好吧，我可以保存原音，设置新的，但听不到新的铃声，只能听到旧的：

看看我的代码并记住，当电话听众选择是否更改原始铃声时，电话**已经响起。**

那么，如何在电话已经响铃时更改铃声？

我在我的清单中有权限`android.permission.WRITE_SETTINGS`。`android.permission.READ_PHONE_STATE`

服务：

```
public class CallFilterService extends Service {

    private Uri originalRingtoneUri;

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        TelephonyManager telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
        telephonyManager.listen(new CallFilterListener(this), PhoneStateListener.LISTEN_CALL_STATE);
        return START_STICKY;
    }

    public void saveOriginalRingtone() {
        originalRingtoneUri = RingtoneManager.getActualDefaultRingtoneUri(context, RingtoneManager.TYPE_RINGTONE);
    }

    public void restoreOriginalRingtone() {
        RingtoneManager.setActualDefaultRingtoneUri(context, RingtoneManager.TYPE_RINGTONE, originalRingtoneUri);
    }
} 
```

电话监听器：

```
public class MyPhoneListener extends PhoneListener
{
    private CallFilterService service;
    private Uri specialRingtoneUri;

    public CallFilterListener(CallFilterService service) {
        super();
        this.service = service;
        specialRingtoneUri = setSpecialRingtone();       
    }

    @Override
    public void onCallStateChanged(int state, String incomingNumber) {
        switch (state) {
            case TelephonyManager.CALL_STATE_RINGING: {
                service.saveOriginalRingtone();
                if (canChangeRingtone(incomingNumber)) {
                    //When in this if block, the default phone ringtone is already playing.
                    RingtoneManager.setActualDefaultRingtoneUri(context, RingtoneManager.TYPE_RINGTONE, specialRingtoneUri);
                }
                break;
            }
            case TelephonyManager.CALL_STATE_IDLE: 
            {
                service.restoreOriginalRingtone();
                break;
            }
            default:
                break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-04T10:57:46.170

首先，使用路径和文件名创建一个文件：

```
File file = new File(path, songName); 
```

然后，准备查询：

```
ContentValues values = new ContentValues();
values.put(MediaStore.MediaColumns.DATA, file.getAbsolutePath());
values.put(MediaStore.MediaColumns.TITLE, "My Song title");
values.put(MediaStore.MediaColumns.SIZE, 215454);
values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/mp3");
values.put(MediaStore.Audio.Media.ARTIST, "Artist");
values.put(MediaStore.Audio.Media.DURATION, 230);
values.put(MediaStore.Audio.Media.IS_RINGTONE, true);
values.put(MediaStore.Audio.Media.IS_NOTIFICATION, false);
values.put(MediaStore.Audio.Media.IS_ALARM, false);
values.put(MediaStore.Audio.Media.IS_MUSIC, false); 
```

然后将其插入数据库：

```
Uri uri = MediaStore.Audio.Media.getContentUriForPath(file.getAbsolutePath());
Uri newUri = this.getContentResolver().insert(uri, values); 
```

最后，设置铃声：

```
RingtoneManager.setActualDefaultRingtoneUri(
  myActivity,
  RingtoneManager.TYPE_RINGTONE,
  newUri
); 
```

这假定您具有适当的权限。如果您以 API 23 或更高版本为目标，除了在清单中声明之外，您还必须在运行时请求权限

# magento - sql将默认属性值插入magento中的所有产品

> ID：10768896
> 
> 赞同：0
> 
> 时间：2012-05-26T18:48:34.267
> 
> 标签：magento, insert, entity-attribute-value

我安装了一个扩展程序，该扩展程序添加了一个属性，您可以在编辑或添加新产品时为每个产品打开该属性……但我需要将其添加到所有现有产品中。

一）SQL？

b）将我指向某个为 Magento 集合执行此操作的课程？

类似的问题，但我需要在 sql 或模块中进行：[Magento 中所有产品的默认属性值](https://stackoverflow.com/questions/4906497/default-attribute-value-for-all-product-in-magento)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T00:54:30.177

> 添加一个属性，您可以为每个产品打开该属性

以前来过这里。

安装模块后，它是否会出现在产品维护中？如果是这样，那么它将显示在导出配置文件中。导出 skuid、store、type 和新属性并导出到 CSV 文件。确保使用 Magento 列标题设置为是。将新属性设置为您需要在 CSV 文件中为您需要设置的产品设置的属性，并使用 Import All Products 配置文件将其导入。

新安装的模块属性将默认为空白，直到在属性显示的页面上编辑的内容被保存。使用配置文件导入将它们全部设置为是或 1，如果它是一个是/否启用类型字段以全面启用。您将必须检查导出以查看它们是否在数据库中使用是/否或布尔值 1/0。

如果此属性是下拉项，您需要在属性维护中创建所有选择项，并确保上传文件中的值与属性维护中的选择完全匹配，以便上传正常工作。

作为补充说明，如果此属性仅在简单项目上创建，请过滤您的导出以仅包含简单项目以包含在导入文件中。

这听起来像是一次性交易之一，在一次性代码上花费大量精力违反了 KISS 方法，而一个简单的导入将修复它并且您已经完成了该操作。

# html - 以 margin:0 自动居中内容

> ID：10768900
> 
> 赞同：0
> 
> 时间：2012-05-26T18:49:13.080
> 
> 标签：html, css

以下是我的 CSS 代码：

```
<style type="text/css">

body {
    background-color:#FFF;
    font-weight:bold;
    font-size:12pt;
    font-family:Arial,sans-serif;
}

.container {
    width: 800px;
    margin: 0 auto;

}

#header {
    text-align: left;
    padding-top: 220px;
    font-size: 60pt;

}
#subheader {
    text-align:left;
    font-size: 15pt;
    color: #666;
    margin-top: -5px;
    margin-bottom: 15px;

}

#email {
    width: 165px;
    height: 25px;       
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px; 
    border-radius: 10px;
    text-align:center;
    border: 2px solid;
    color: #666;
    border-color: black;

}
input[type=submit] {
    height: 30px;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px; 
    border-radius: 10px;
    background-color: #000;
    border-color: #fff;
    color: #fff;
}

#socialMedia {
    padding-top: 60px;
    text-align:center;
}
#video {
    padding-left: 600px;
    margin-top: -260px;

}
</style> 
```

HTML div 的划分如下：

```
<div class="container">
<div id="header">
    <Content>
</div>
<div id="subheader">
    <Content>
</div>
<Form Input Field>

<div id="video">

<Embedded Video>
</div>

<div id="socialMedia">
    <Social Media Image Links>
</div>

</div>
</body>
</html> 
```

我遇到的问题是，虽然页面尝试通过浏览器重新缩放来居中，但只有内容的左侧真正在调整。右侧基本上挂在页面的边缘，因此不居中。

有什么建议么？我用 Chrome 试过这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:55:30.220

尝试在容器上设置最大宽度：

```
.container {
    max-width: 800px;
    margin: 0 auto;
} 
```

这是一个演示：http: [//jsfiddle.net/Ltf5U/](http://jsfiddle.net/Ltf5U/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T20:33:40.253

这可能是问题所在：

```
#video {
    padding-left: 600px;
    margin-top: -260px;

} 
```

我不确定视频容器的大小，但也许这就是它没有与其他所有内容正确居中的原因。

当你改用这个 CSS 时，会发生什么？

```
#video {
    text-align:right;
    margin-top: -260px;

} 
```

也许我误解了问题所在。能否发个问题截图？

# cron - 在没有 cron 作业选项的 cpanel 上设置 cron 作业

> ID：10768907
> 
> 赞同：0
> 
> 时间：2012-05-26T18:50:45.917
> 
> 标签：cron, cpanel

请任何人都可以给我一个关于如何设置 cronjob 以每 15 分钟执行一次我的 API 回调 URL 的线索，因为我的控制面板没有这种能力，请我需要带有示例的规范，因为我仍然处于电枢级别，例如：我想设置一个 cronjop 来执行这个 API 回调 url [http://shop.site.com/modules/cashenvoy/validation.php](http://shop.site.com/modules/cashenvoy/validation.php)每 15 分钟，我的控制面板没有直接 cronjob 设置的选项，请我该如何设置一个 cronjob 来执行这个 URL，谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:17:56.547

此演示假设您已经登录到 cPanel

现在让我们学习如何设置 cron 作业

1) 单击**Cron 作业**图标

![在此处输入图像描述](../Images/a2b38d87398c4ec68bacde326f3bc6e1.png)

2）输入您希望每次运行后发送cron作业结果的电子邮件地址 ![在此处输入图像描述](../Images/d6bbbab97f9244f38593ff3cee1ad760.png)

3) 现在您必须准确定义您希望 cron 作业运行的时间和频率。使用预定义或**常用设置之一可以更轻松地完成此操作**

![在此处输入图像描述](../Images/970ea44bc794a66da27ac7afc2b51bdf.png)

请注意，通过选择通用设置，所有字段都会自动填写。这也有助于您了解每个字段的含义 ![在此处输入图像描述](../Images/1ddb884ce3f8bfd7d02d31fed1891913.png)

如果您有一个共享主机帐户，则不应将 crons 设置为每 10 分钟一次以上。

4）让我们选择**每周一次**

![在此处输入图像描述](../Images/2306da396588553904e7dc2a3c4c7082.png)

5）接下来，输入要运行的脚本的命令，包括路径（从根目录）。如果您在共享主机上 - 在末尾添加 nice -n 15。这确保了服务器给予 cron 的优先级低于关键系统进程，从而有助于保持稳定性和服务器正常运行时间。请记住在命令末尾添加“nice -n 15”！

![在此处输入图像描述](../Images/551abc9134f32a0edc37055b5d2953f9.png)

6) 准备就绪后，单击**添加新的 Cron 作业** ![在此处输入图像描述](../Images/8dea143c43061647d31a1ac38cd4314a.png)

而已！如您在此处所见，已设置 cron 作业。您可以创建额外的 cron 作业，并编辑或删除现有的

![在此处输入图像描述](../Images/081f4326a0fb700b21ed7015cfe53d2b.png)

教程到此结束。您现在知道如何在 cPanel 中设置 cron 作业

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T09:30:55.523

第三方 cron 作业提供者可能会有所帮助：[http](http://www.easycron.com) ://www.easycron.com 。

免责声明：我为 easycron.com 工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T09:53:51.670

尝试使用 crontab：

```
# to list current cron jobs
sudo crontab -u username -l

# edit the cron list
sudo crontab -u username -e 
```

这证明了一个终端，您可以在其中编辑 cron 作业。

插入以下内容：

```
*/15 * * * * curl -s http://shop.site.com/modules/cashenvoy/validation.php 
```

这将每隔 15 分钟静默呼叫所需的网站。

# sql - 带有实体框架的 SQL 视图

> ID：10768908
> 
> 赞同：1
> 
> 时间：2012-05-26T18:50:49.080
> 
> 标签：sql, entity-framework, view

我有一个与我的应用程序集成的 SQL 视图。到目前为止，我一直在使用实体框架。但问题是，当我向 Entity Framework 添加视图时，它开始将我的视图视为表格。

我真正想知道的是，我错过了什么吗？另外，如果我使用 Nhibernate，这个问题会得到解决吗？它将视图仅视为视图吗？

这个视图是一个非常复杂的查询，它有多个连接和聚合。这就是我使用视图的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:37:45.727

> 但问题是，当我向 Entity Framework 添加视图时，它开始将我的视图视为表格。

不，它没有。如果您通过向导（EDMX 设计器）将视图添加到模型中，它将在内部将视图作为定义查询处理，该查询会生成只读实体。在实体级别（概念模型）您看不到差异，因为它只是另一个实体/类，但是如果您尝试更改该类的实例并保存它们，您将得到一个异常（除非您映射存储过程或用于对该实体进行插入、更新和删除操作的自定义 SQL 命令）。

编辑：

数据库视图以及存储过程或 SQL 函数等其他数据库特定功能仅适用于数据库优先方案（当您在设计器中使用*从数据库更新模型时*）。

使用*从模型生成数据库*适用于模型第一个场景，您告诉 VS：“这是我的模型，我想要一些数据库来存储它。” 首先，仅使用来自概念模型的信息（每次运行此命令时，原始映射和数据库描述都会被替换为新的，因此即使映射到原始数据库也可能会被破坏）。它无法为您创建数据库特定的功能，因为它不知道应该将类映射到视图，而且它不知道应该如何创建视图（来自原始视图的查询是未知的）。

您可以强制 VS 为您创建视图，但在 T4 模板中需要做很多工作，您必须以某种方式为视图提供 SQL 创建脚本。

# objective-c - ObjC 书籍和官方文档中内存管理描述的冲突

> ID：10768911
> 
> 赞同：3
> 
> 时间：2012-05-26T18:51:22.433
> 
> 标签：objective-c, cocoa, memory-management

我正在尝试学习/理解在使用或创建各种对象时会发生什么以及为什么。（希望从文档中学习。）

我正在阅读“Objective-C 2.0 中的编程”（第 2 版，作者 Steven Kochan）。在第 408 页，第一段讨论了保留计数：

> 请注意，它的引用计数会变为 2。该`addObject:`方法会自动执行此操作；如果您检查您的文档以了解该`addObject:`方法，您将看到那里描述的这一事实。

所以我阅读了`addObject:`文档：

> 在数组末尾插入给定对象。

在那里，**缺少描述**，而其他项目，如`arrayByAddingObject:`，**则说明**：

> 返回一个新数组，它是接收数组的副本，末尾添加了给定对象。

它在参考文献中的什么地方表明`addObject:`增加了保留计数？鉴于 ARC 的存在，我仍然应该了解这些方法正在做什么来避免错误和问题。ARC为此带来了什么？（要再读一遍……）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T20:13:40.997

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-26T18:59:29.970

这本书一定是指过时的文档，因为你是对的，它没有提到任何关于保留计数的内容。它实际上保留了该对象。您需要考虑的方式不是保留计数（这是无用的），而是所有权。尤其是在使用 ARC 时。

当您将对象添加到 时`NSMutableArray`，它会获得该对象的所有权（在 ARC 术语中，它具有对它的强引用）。

“ARC为此带来了什么？”

ARC 没有什么不同。ARC 所做的所有事情（除了一些优化）都是添加相同的 release、retain 和 autorelease 语句，这些语句与您在不使用 ARC 的情况下自己添加的语句相同。您需要关心的是，一旦将对象添加到数组中，它将至少与数组一样长。

* * *

并且该`arrayByAddingObject:`方法创建一个包含您正在传递的对象的新`NSArray`（或`NSMutableArray`），并保持对传递对象的强引用。它创建的实际数组对象还没有引用，除非您将它分配给 ivar、属性或局部变量。你分配给它的东西决定了它的寿命。

* * *

基本上即使没有 ARC，最好从所有权的角度考虑对象生命周期，ARC 只是将其形式化。因此，因此，在使用框架时，无论何时发生或不发生保留都无关紧要，您只需对您的对象负责，直到您将所有权传递给另一个对象并且您可以相信框架将使对象保持活动状态只要它需要它。

当然，现在你必须凭直觉知道什么是所有权。例如，委托属性通常`assign`是 ARC`unsafe_unretained`或ARC 中的`weak`，以防止循环保留循环（两个对象彼此保留），尽管有时保留/强，因此您需要逐个研究这些。

并且在像键值观察和 NSNotification 观察你正在观察的对象这样的情况下也不会保留观察者。

但这些确实是规则的例外。一般来说，你可以假设一个强参考。

关于上面这句话：“它创建的实际数组对象还没有引用，除非您将它分配给 ivar、属性或局部变量。您分配给它的内容决定了它的生命周期。” 我将尝试解释：

当您运行这段代码时：`[someArray arrayByAddingObject:someObject];`您已经实例化了一个新对象`NSArray`或`NSMutableArray`对象（取决于对象类型`someArray`），但实际上并未将其分配给任何引用。这意味着如果您使用 ARC，它可能会在之后立即释放，或者如果不使用 ARC，它将在它的 autoreleasepool 耗尽时被释放（可能在该线程的 runloop 的下一次迭代中）。

现在，如果您这样做：`NSArray *someOtherArray = [someArray arrayByAddingObject:someObject];`您现在有一个对新创建的数组的引用，称为 someOtherArray。在这种情况下，这是一个局部变量，其作用域仅位于它所在的集合中`{` `}`（因此它可能位于`if`语句、循环或方法中。现在，如果您对它不做任何其他事情，它会在它结束后的某个时间死掉范围结束（不能保证它会立即死亡，但这并不重要，你不能假设它的寿命更长）。

现在，如果在您的类中，您在标头中声明了一个 iVar（实例变量），例如`NSArray *someOtherArray;`（在 ARC 中默认情况下是强的）并且您`someOtherArray = [someArray arrayByAddingObject:someObject];`在类中的某个位置运行，则该对象将一直存在，直到您删除引用（`someOtherArray = nil`），您覆盖引用 ( `someOtherArray = someThirdArray`)，或者类被释放。如果您不使用 ARC，则必须确保保留它以达到相同的效果（`someOtherArray = [[someArray arrayByAddingObject:someObject] retain];`这实际上是 ARC 在幕后所做的）。

或者你可能有一个声明的属性，而不是像`@property (nonatomic, strong) NSArray *someOtherArray`in`self.someOtherArray = [someArray arrayByAddingObject:someObject];`那样会达到相同的效果，但会使用属性访问器 ( `setSomeOtherArray:`)，或者你仍然可以使用`someOtherArray = [someArray arrayByAddingObject:someObject];`直接设置 iVar（假设你`@synthesized`这样做）。

或者假设非 ARC，您可能已经声明了类似于 ARC 的属性`@property (nonatomic, retain) NSArray *someOtherArray`，`self.someOtherArray = [someArray arrayByAddingObject:someObject];`但是当直接设置 iVar 时，您仍然需要手动添加该保留。

我希望能把事情弄清楚一点，如果有什么我掩盖或遗漏的地方，请告诉我。

* * *

正如您在评论中提到的，这里的关键是直观地知道一个对象何时会被视为由另一个对象拥有。幸运的是，Cocoa 框架遵循一组非常严格的约定，允许您做出安全的假设：

*   在设置`NSString`框架对象的属性（例如`text`a 的属性`UILabel`）时，它总是被复制（如果有人知道反例，请评论或编辑）。因此，一旦通过它，您就不必担心您的字符串。复制字符串以防止可变字符串在传递后被更改。
*   当设置除 之外的任何其他属性时`delegate`，它（几乎？）总是保留（或 ARC 中的强引用）
*   在设置委托属性时，它（几乎？）总是一个分配（或弱引用）以防止循环保留循环。（例如，对象`a`有一个`b`强引用的属性和`b`一个强引用的委托属性。您设置`a`为`b`. 现在`a`和`b`都相互强引用，并且两个对象都不会达到保留计数 0 并且永远不会达到它的 dealloc 方法来释放另一个对象。`NSURLConnection`是一个强烈引用它的委托的反例，因为它的委托是通过一个方法设置的——参见下面的约定——并且它是`NSURLConnection`在完成后取消或释放一个约定而不是 in `dealloc`，这将删除循环保留）
*   添加到数组或字典时，它总是被保留（或强引用）。
*   当调用方法并传递块时，它们总是被复制以将它们从堆栈（最初出于性能目的创建它们的地方）移动到堆中。
*   接受对象参数并且不立即返回结果的方法是（总是？我想不出任何不）复制或保留（强引用）您传递的参数以确保该方法可以执行他们需要什么。例如，`NSURLConnection`甚至保留它的委托，因为它是通过方法传入的，而在设置其他对象的委托*属性*时不会保留，因为这是约定。

建议您在自己的类中也遵循这些相同的约定以保持一致性。

此外，不要忘记所有类的标题都可供您使用，因此您可以轻松查看属性是保留还是分配（或强或弱）。您无法检查方法对其参数的作用，但由于参数归接收者所有的约定，因此没有必要。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-26T22:08:49.077

一般来说，您应该在“最全球化”的地方查找有关 Cocoa API 中任何内容的信息。由于内存管理在系统 API 中普遍存在，*并且*API 在 Cocoa 内存管理策略的实现中是一致的，因此您只需阅读和理解 Cocoa 内存管理指南。

一旦理解，您可以放心地假设所有系统 API 都实现了该内存管理策略，除非另有*明确说明*。

因此，对于 NSMutableArray 的`addObject:`方法，它**必须** `retain`将对象添加到数组中，否则它将违反该标准策略。

您将在整个文档中看到这一点。这可以防止每个方法的文档变成一页或更长*，并且*当罕见的方法或类实现某些东西时，无论出于何种原因（有时不是那么好），规则的例外情况都很明显。

* * *

在内存管理指南的“基本内存管理规则”部分：

**您可以使用保留获得对象的所有权。**

> 接收到的对象通常保证在接收它的方法中保持有效，并且该方法也可以安全地将对象返回给它的调用者。你在两种情况下使用retain：（1）在访问器方法或init方法的实现中，获取你想要存储的对象的所有权作为属性值；(2) 防止对象因某些其他操作的副作用而失效（如“避免导致正在使用的对象的释放”中所述）。

(2) 是关键；NS{Mutable}Array 必须`retain`准确地添加任何对象，因为它需要防止添加的对象由于某些副作用而失效。不这样做将与上述规则背道而驰，因此将被明确记录在案。

# c# - SignalR 不工作协议错误：未知传输

> ID：10768917
> 
> 赞同：1
> 
> 时间：2012-05-26T18:53:28.723
> 
> 标签：c#, jquery, asp.net, knockout.js, signalr

我试图在 SignalR 和 Knockout.js 上参考这篇文章，但有些东西不起作用。我指的是这篇文章：

[http://www.codeproject.com/Articles/322154/ASP-NET-MVC-SIngalR-and-Knockout-based-Real-time-U](http://www.codeproject.com/Articles/322154/ASP-NET-MVC-SIngalR-and-Knockout-based-Real-time-U)

我下载了代码和设置以在我的 SQL 服务器上运行，但我无法让它工作。附件是我得到的错误

![在此处输入图像描述](../Images/38ff83092bf2eca6b01c161ac8887afa.png)

谁能让我知道问题可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T06:01:44.477

我发现我引用的是旧版本的 SignalR。如果有人从该链接下载代码并使用 Nuget 进行更新，请确保您使用 0.5 版本引用 SignalR 脚本

# php - 从 md5() 切换到 crypt()

> ID：10768918
> 
> 赞同：0
> 
> 时间：2012-05-26T18:53:39.203
> 
> 标签：php, encryption, hash

到目前为止，我一直在使用 md5 在我的网站上散列密码，没有加盐。

现在我正在构建一个必须更安全的应用程序，并且我正在阅读 md5 很容易受到暴力攻击。

所以我想用[`crypt()`](http://www.php.net/manual/en/function.crypt.php)哈希密码。

我没有完全理解的是：

1.  我必须提供盐还是内置生成的盐可以吗？
2.  为了安全，我应该迭代 crypt 函数多少次（如果不止一次）？
3.  使用 md5，无论输入字符串的长度如何，哈希都是 32 位的。crypt 是否也返回标准长度的哈希？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:58:36.493

如果要指定除 DES 以外的加密，则需要提供盐。否则，您可以使用默认盐。

您不会自己迭代 crypt 函数，这是在内部使用有意义的算法完成的。迭代次数通过盐指定。

是的，给定哈希算法的哈希长度是标准的；但是，不同的哈希算法具有不同的哈希长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T18:59:10.300

crypt 可以使用不同的哈希算法。使用`md5`它返回 128 位整数（具有 32 个字符的十六进制表示）。与盐一起使用`crypt`一次是安全的。建议应用程序提供盐

> 一个可选的盐字符串，作为散列的基础。如果未提供，则行为由算法实现定义，并可能导致意外结果。

# eclipse - Eclipse 项目资源管理器在乳胶项目名称前加上“P/”

> ID：10768919
> 
> 赞同：5
> 
> 时间：2012-05-26T18:53:42.720
> 
> 标签：eclipse, latex

好的，这已经困扰了我很长一段时间了：Eclipse 的项目资源管理器在我的一些项目名称中添加了前缀“P/”。它只发生在资源管理器中，因为项目名称在其他任何地方都正常显示。

我没有设法在文档中找到与该主题相关的任何内容，而且我真的不知道如何用谷歌搜索它。

我刚刚在 Precise 上重新安装了 Eclipse 的 Platform Binary 3.7.2 以及 CDT 和 Texlipse 插件。前缀“P/”仅出现在 texlipse 项目中，或者当我在任何项目中打开 .tex 文件时。

所以我的问题是：你知道这意味着什么吗？怎么摆脱呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T22:53:41.607

当你打电话`toString()`给`Project`你时，你会得到这个。前导`P/`表示它是一个项目（它是所有 Eclipse 资源的约定，`F/`例如文件）。这可能是 Texlipse 插件中的一个问题，其中他们提供给 Project Explorer (Common Nagivgator) 的标签提供程序是错误的，它只使用项目，而不是`project.getName()`. 您应该向他们提交错误。作为用户，您无能为力。

# java - 比较两个列表（作为字符串）似乎永远不会匹配

> ID：10768922
> 
> 赞同：1
> 
> 时间：2012-05-26T18:54:02.747
> 
> 标签：java, arrays

我不知道我做错了什么，我有两个项目列表，并试图比较它们。

```
private static void check_results(ArrayList<int[]> result2, int[] reversedList) {
    //check results list for matches
    System.out.println();
    for (int[] item : result2) {
        System.out.println(Arrays.toString(item) + " compared to " + Arrays.toString(reversedList));
        if ( Arrays.toString(item) == Arrays.toString(reversedList)) 
        {   
            System.out.println("we have a match!");
        }
    }

} 
```

但我似乎从来没有比赛。当我明显比较时，我可以看到它们是匹配的。

```
[0, 0, 0, 20] compared to [0, 0, 0, 20]
... and so on 
```

我究竟做错了什么？我知道`result2`从 ArrayList 开始，但我反复认为它`int[]`就像我的变量一样`reversedList`，但我从来没有得到匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T18:55:25.650

**使用`equals()`on`String`**（请参见[此处的确切定义](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)），**`==`按引用比较**（*即，您拥有的两个引用指向内存中完全相同的对象*），**而不是按值**（*内存中可能有多个字符串实例具有相同的内容*） .

你需要的是这样的：

```
if ( Arrays.toString(item).equals( Arrays.toString(reversedList) )) { ... } 
```

字符串可能会被优化，也可能不会，你永远无法确定（好吧，在某些情况下由 JLS 定义，例如，当两个字符串被定义在同一个编译单元中，并且它们的值完全相同而无需任何额外的编译-time 验证，它们将使用相同的引用，但使用例如`"ab"`并且`"a" + "b"`可能是相同或不同的引用，具体取决于您的操作系统、JVM 版本、内部版本号、cosmos 的当前状态等）。

[请参阅此处](http://www.leepoint.net/notes-java/data/strings/12stringcomparison.html)或[此处](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)的一些附加说明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T18:55:52.140

`==`使用检查它们是否是完全相同的对象来比较对象（哪些是字符串） 。换句话说，它们指的是内存中的相同位置。您想改用该`.equals()`方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T18:56:38.473

Don't compare `String`with `==`it 比较 ( `String`) 对象的引用以进行有意义的比较用途`equals`或`equalsIgnoreCase`方法。

代替

```
if ( Arrays.toString(item) == Arrays.toString(reversedList)) 
```

用这个 ：

```
if (Arrays.toString(item).equals(Arrays.toString(reversedList))) 
```

或者如果你想要不区分大小写的比较

```
if (Arrays.toString(item).equalsIgnoreCase(Arrays.toString(reversedList))) 
```

# regex - 在指定字符后使用正则表达式匹配序列

> ID：10768924
> 
> 赞同：27
> 
> 时间：2012-05-26T18:54:10.720
> 
> 标签：regex

初始字符串是**[image:salmon-v5-09-14-2011.jpg]**

我想捕获文本“salmon-v5-09-14-2011.jpg”并使用[GSkinner 的 RegEx 工具](http://gskinner.com/RegExr/)

最接近我想要的输出的是使用这个 RegEx：

```
:([\w+.-]+) 
```

问题是这个序列包括冒号，输出变成

```
:salmon-v5-09-14-2011.jpg 
```

如何在没有冒号的情况下捕获所需的输出。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-26T19:08:22.607

使用后视：

```
(?<=:)[\w+.-]+ 
```

后视（编码为`(?<=someregex)`）是零宽度匹配，因此它断言但不捕获匹配。

此外，您的正则表达式可能可以简化为：

```
(?<=:)[^\]]+ 
```

它只是抓住（但不包括） a`:`和 a之间的任何东西`]`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-26T19:09:51.103

如果您总是查看该格式的字符串，我会使用这种模式：

```
(?<=\[image:)[^\]]+ 
```

这在后面寻找`[image:`，然后匹配直到结束`]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T18:57:04.920

您只有正确的正则表达式，您使用的工具是突出显示整个匹配，而不仅仅是您的捕获组。将鼠标悬停在比赛上，看看“第 1 组”实际上是什么。

如果您想要一个更强大的正则表达式，您可以尝试`:([^\]]+)`允许除`]`文件名部分之外的任何字符。

# iphone - UISlider 和连续属性

> ID：10768925
> 
> 赞同：1
> 
> 时间：2012-05-26T18:54:12.717
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在更改一个值，`UISlider`这个值是我的 PDF 页面的数量，所以当用户滑动时，他们可以浏览页面，因为瓷砖渲染我需要将`continuous`属性设置为`NO`，我还需要一个使用相同的实时页面计数器滑块，所以属性应该是`YES`：，如何为具有相同滑块的特定代码设置属性是或否？

这部分，属性应该是NO

```
navSlider.continuous = NO;
     pageInt = CGPDFDocumentGetNumberOfPages(pdfscroll.pdf);
     prgress = (int)(navSlider.value + 0.5);
    navSlider.maximumValue = pageInt;
    navSlider.minimumValue = 1;
    [bookController moveToPage:prgress]; 
```

这里是的：

```
navSlider.continuous = YES;
    NSString *numberOfPage = [NSString stringWithFormat:@"%d of %d",prgress,pageInt];
    pageCounter.text = numberOfPage; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T02:33:26.353

您显然*确实*需要了解每个滑块的变化，因此它必须是连续的。但是，您不应*在*`[bookController moveToPage:prgress];`每次滑块移动后调用。解决方案是为每个滑块移动更新页码，但仅`[bookController moveToPage:prgress];`在释放滑块时调用。

# android - android java将数据从视图传递到活动

> ID：10768927
> 
> 赞同：-2
> 
> 时间：2012-05-26T18:54:29.430
> 
> 标签：android, android-activity, ondraw

我从在 android 中绘图开始。

我只有 onCreate 方法的简单活动：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Set full screen view
    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                     WindowManager.LayoutParams.FLAG_FULLSCREEN);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
    height = displaymetrics.heightPixels;
    width = displaymetrics.widthPixels;

    drawView = new DrawView(this, height, width);
    setContentView(drawView);
    drawView.requestFocus();        
} 
```

在 drawView 中，我每次点击屏幕时都使用 onDraw 方法绘制圆圈。我点击的地方画了圆圈。当应用程序检测到不再有可能添加圈子时，我想回到我的主要活动并开始另一个动作。将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:19:18.287

我认为您在这里错过了面向对象编程的重点。对于面向对象的程序，您的程序没有明确的路径。您创建一系列对象并教他们如何处理事件。

如果您的 drawView 完成了它的工作，则将其从视图中删除并将其他东西放在它的位置以供用户交互。

就是这么简单。

在你的情况下，你的drawview是一个axctivity。完成后，您应该调用另一个活动。我建议重新阅读此[开发指南部分](http://developer.android.com/guide/topics/fundamentals.html)。

学习和理解的最好方法是找到一个做类似事情的开源应用程序（谷歌自己的应用程序最好）并研究它的源代码。

# c++ - glDeleteBuffers 比 glBufferData 慢

> ID：10768929
> 
> 赞同：3
> 
> 时间：2012-05-26T18:55:06.480
> 
> 标签：c++, opengl-es

我在我的 iOS/Android 游戏中遇到了一些性能问题，其中几个 VBO 必须不时更新。在对我的游戏进行分析后，结果表明 glDeleteBuffers() 每次 VBO 更新最多需要 7 毫秒。当帧通常只需要 4 毫秒来渲染时，这当然会导致打嗝。

这是我更新 VBO 的部分：

```
Chunk* chunk;
pthread_join(constructionThread, (void**)&chunk);
building = false;

if (vboID)
{
    //takes 7 milliseconds
    glDeleteBuffers(1, &vboID); 
    vboID = 0;
}
if (offset)
{
    glGenBuffers(1, &vboID);
    glBindBuffer(GL_ARRAY_BUFFER, vboID);

    //takes about 1-2 milliseconds, which is acceptable
    glBufferData(GL_ARRAY_BUFFER, offset * 4, constructionBuffer, GL_STATIC_DRAW);
} 
```

其中 offset 是一个实例变量，基本上是新 VBO 的大小，这是非常可变的。vboID 不言自明，我猜 ;)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T19:07:46.770

`glGenBuffers`并且`glDeleteBuffers`被设计为分别仅在初始化和清理时运行。在运行时调用它们是不好的。

`glBufferData`用一组新数据替换当前缓冲区数据，这会自动更改缓冲区的大小。您可以安全地删除整个`glGenBuffers`/`glDeleteBuffers`事物并将其移动到初始化和清理中。

此外，您将缓冲区创建为静态缓冲区。这告诉 OpenGL 您几乎永远不会更改它，因此它以一种在 GPU 上访问速度更快但从系统其余部分访问速度较慢的方式存储它。尝试更改`GL_STATIC_DRAW`为`GL_DYNAMIC_DRAW`或`GL_STREAM_DRAW`。更多信息在这里：[http ://www.opengl.org/wiki/Buffer_Objects#Buffer_Object_Usage](http://www.opengl.org/wiki/Buffer_Objects#Buffer_Object_Usage)

# java - Android PhoneGap 1.7 调用一个javascript函数

> ID：10768934
> 
> 赞同：5
> 
> 时间：2012-05-26T18:55:37.290
> 
> 标签：java, javascript, jquery, cordova

好的，所以我需要提供一些背景知识。首先，我将 jquery-mobile 与 PhoneGap 1.7 一起使用。我编写了一个使用 ServerSocket 对象的非常简单的 Java 服务器。在 Android 手机上，我连接到服务器，然后服务器通过套接字发送数据。这部分正在工作。

我坚持的部分是我打算通过该套接字发送数据，这将需要在接收数据时更新 jquery 移动 UI。

* * *

答案：Simon 帮了我很大的忙，我在他的帮助下并按照[本教程解决了这个问题](http://www.speakingcode.com/2012/05/29/call-native-android-java-code-from-html5javascript-using-phonegap-plugins-and-implement-async-callbacks/)

真正打动我的部分是在 PhoneGap 插件本身中产生了线程。一旦我意识到这一点，一切就都到位了。但是，对于任何对此感兴趣的人来说都是代码。请记住，我从教程中学到了很多东西。我还包括了我为测试这些概念而创建的非常简单的 Java 服务器。我想也许这会对将来的某人有所帮助。请记住，这基本上是一个概念证明。

我需要修改这个插件以满足我的实际需求：

Android Activity：导入 org.apache.cordova.DroidGap；

```
import android.os.Bundle;

public class ISSAndroidActivity extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

PhoneGap 插件：

```
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.InetSocketAddress;
import java.net.Socket;
import java.net.SocketAddress;
import java.net.SocketException;

import org.apache.cordova.api.*;
import org.apache.cordova.api.PluginResult;
import org.apache.cordova.api.PluginResult.Status;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class InvokeJavaScriptPlugin extends Plugin {
    public static String PLUGIN_TAG = "InvokeJavaScriptPlugin";
    public static String PROCESS_DATA_ACTION = "processData";
    private String callBackId = "";

    @Override
    public PluginResult execute(String action, JSONArray args, String callbackId) {
        PluginResult pluginResult = null;
        Log.d(PLUGIN_TAG, "Invoking Javascript w\\ NO_RESULT");

        if (action.equals(PROCESS_DATA_ACTION)) {
            this.callBackId = callbackId;
            startProcessingData();
            pluginResult = new PluginResult(Status.NO_RESULT);
            pluginResult.setKeepCallback(true);
        } else {
            pluginResult = new PluginResult(Status.INVALID_ACTION);
            Log.e(PLUGIN_TAG, "Invalid action : " + action);
        }
        return pluginResult;
    }

    /**
     * Spawns a thread that connects to a server, and receives data from it
     */
    private void startProcessingData() {
        new Thread() {
            @Override
            public void run() {

                // Socket Testing
                ObjectOutputStream out;
                ObjectInputStream in;
                Socket requestSocket = new Socket();
                Object inboundObject;

                SocketAddress ipAddr = new InetSocketAddress("192.168.1.2",
                        2012);
                try {
                    requestSocket.connect(ipAddr);

                    out = new ObjectOutputStream(
                            requestSocket.getOutputStream());
                    out.flush();
                    in = new ObjectInputStream(requestSocket.getInputStream());

                    do {
                        inboundObject = in.readObject(); // Data is received
                                                         // here
                        int processedData = ((Number) inboundObject).intValue();
                        onProcessDataReadSuccess(processedData);

                    } while (requestSocket.isConnected());

                } catch (SocketException ex) {
                    Log.d(PLUGIN_TAG, "Connection to Server lost");
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        }.start();
    }

    /**
     * Callback method for startProcessingData(). Sends the result up to
     * javascript layer via Plugin.success()<br>
     * This method is automatically called asynchronously when processing is
     * finished.
     * 
     * @param processedData
     *            the result of data processing which will be passed back to
     *            javascript.
     */
    private void onProcessDataReadSuccess(int processedData) {
        Log.d(PLUGIN_TAG, "Processing data: " + processedData);
        PluginResult result;
        try {
            JSONObject resultJSON = new JSONObject();
            resultJSON.put("processedData", processedData);
            result = new PluginResult(Status.OK, resultJSON);
        } catch (JSONException jsonEx) {
            Log.e(PLUGIN_TAG, "Got JSON Exception " + jsonEx.getMessage());
            jsonEx.printStackTrace();
            result = new PluginResult(Status.JSON_EXCEPTION);
        }

        result.setKeepCallback(true);
        this.success(result, this.callBackId);
    }
} 
```

索引.html：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<link type="text/css" href="css/jquery.mobile-1.1.0.min.css"
    rel="stylesheet" />
</head>
<script type="text/javascript" charset="utf-8"
    src="scripts/cordova-1.7.0.js"></script>
<script type="text/javascript" src="scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="scripts/jquery.mobile-1.1.0.min.js"></script>
<script type="text/javascript" src="scripts/InvokeJavaScript.js"></script>
<script type="text/javascript" charset="utf-8">
    document.addEventListener('deviceready', function() {
        window.plugins.InvokeJavaScript.processData(function(result) {
            displayProcessedData(result)
        }, function(error) {
            console.log(error)
        });
    }, true);

    function displayProcessedData(result) {
        document.getElementById("processedData").innerHTML = result.processedData;
    }
</script>

<body>
    <div data-role="page">
        <div data-role="header" data-position="fixed">
            <h1>Demo</h1>
        </div>
        <div data-role="content">
            Result:
            <div id="processedData"></div>
        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar"></div>
        </div>
    </div>
</body>
</html> 
```

服务器.java

```
import java.io.BufferedReader;
import java.io.ObjectOutputStream;
import java.net.ServerSocket;
import java.net.Socket;

public class ISSServer {

    private static Socket androidSocket;
    private static ServerSocket serverSocket;
    static ObjectOutputStream out;
    static BufferedReader in;

    public static void main(String[] args) {
        System.out.println("Listen Thread: Waiting for connection");
        int port_number = 2012; // The default port

        try {
            serverSocket = new ServerSocket(port_number);
            androidSocket = serverSocket.accept();

            System.out.println("Connection established");

            out = new ObjectOutputStream(androidSocket.getOutputStream());
            out.flush();
            // in = new BufferedReader(new
            // InputStreamReader(androidSocket.getInputStream()));

            out.writeObject(1337);
            out.flush();
            out.reset();
            System.out.println("1337 sent");
            Thread.sleep(2000);

            out.writeObject(9999);
            out.flush();
            out.reset();
            System.out.println("9999 sent");
            Thread.sleep(2000);

            out.writeObject(1234);
            out.flush();
            out.reset();
            System.out.println("1234 sent");
            Thread.sleep(2000);

        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T20:26:30.193

你这样做是为了让自己很难受。如果您使用PhoneGap 插件，您将能够保存初始JavaScript 调用的回调ID，然后发回您调用result.setKeepCallback(true) 的PluginResult 以及状态PluginResult.Status.NO_RESULT。

然后，每当您在 Java 端获取和更新时，您都会创建一个新的 PluginResult。将状态设置为 OK，将数据设置为您想要发送的任何内容，当然在您返回之前设置保持回调（true）。然后调用 this.success(callbackId, result) 你的 JS 端会得到持续更新。

# php - 提交表单后重定向是一种好习惯吗？

> ID：10768936
> 
> 赞同：3
> 
> 时间：2012-05-26T18:55:57.007
> 
> 标签：php, redirect

在我的网站上的某些表单已提交（主要与购物车应用程序相关）之后，我最近开始执行 header() 重定向（到同一页面），以便用户不会通过刷新页面来做意外的事情或通过“后退”或“前进”并刷新页面。这是可接受的做法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T19:00:53.433

[这是称为Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)`redirect after post`的标准做法。处理帖子表单时被认为是最佳实践

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T18:58:04.417

是的，这是一个很好的做法。它使事情对用户更加友好。事实上，它也可能是第二好的解决方案（当然，首先是主要使用 Ajax）！只要确保只在成功时这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T18:58:32.907

我不认为用`header()`它来完成它，但我认为这是一个很好的做法。

正如 minitech 所说，确保你只在成功时才这样做。否则，使用显示的相应错误消息重新呈现您的表单。

# ios - UITableViewCell 填充另一个单元格内容

> ID：10768937
> 
> 赞同：-1
> 
> 时间：2012-05-26T18:56:05.687
> 
> 标签：ios, uitableview, drawing

我`UITableViewCell`在打电话之前先等一下`drawRect:`，因为一些后台进程正在发生。在那个时候，它用另一个单元格的内容填充单元格。我不希望它那样做，我希望它看起来是空的。我该如何阻止这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:22:15.857

与其让 drawRect 等待，不如调用它，但让它在加载时在那里绘制你想要的东西（空白区域，加载......等），然后再次调用它来绘制你有数据时需要的东西。

# php - 带有彩色行的 jQuery 数据表

> ID：10768938
> 
> 赞同：2
> 
> 时间：2012-05-26T18:56:15.107
> 
> 标签：php, javascript, jquery, datatable

我需要创建一个 jQuery 数据表，其中某些行可能具有灰色背景色——这意味着它们已被禁用。仅当相应 MySQL 表的“状态”列等于 0 时，行才能具有灰色背景。

看看下面的代码。'10' 列被隐藏。它包含`status`价值。如果为 0，则该行应具有不同的背景颜色。但这不起作用。没有错误信息。有任何想法吗？

```
$(document).ready(function(){
              $('#newspaper-b').dataTable({
              "sPaginationType":"full_numbers",
              "aaSorting":[[4, "asc"]],
              "aoColumns": [null,null,null,null,null,null,null,null,null,null,
                            {"bSearchable": true, "bVisible": false},null,null],
              "bJQueryUI":true,
              'fnRowCallback': function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                    if(aData[10]=="0"){
                        nRow.className = "disactivatedRow";
                    }
                    return nRow;
                }
              }); 
```

**CSS**

```
.disactivatedRow td { 
    background-color:#ffbba9 !important;
    color: #e6e6fa;
}
#newspaper-b {
    border-collapse: collapse;
    border-color: #B7DDF2;
    border-style: solid;
    border-width: 1px;
    font-family: Arial,Helvetica,sans-serif;
    font-size: 11px;
    margin: 0;
    text-align: left;
    width: 480px;
}
#newspaper-b th {
    background: none repeat scroll 0 0 #EBF4FB;
    border-color: lightgray;
    font-size: 11px;
    font-weight: bold;
    padding: 15px 10px 10px;
}
#newspaper-b tbody tr td {
    background: none repeat scroll 0 0 #FFFFFF;
}
#newspaper-b td {
    border-top: 1px dashed #FFFFFF;
    color: #000000;
    padding: 10px;
}
#newspaper-b tbody tr:hover td {
    background: none repeat scroll 0 0 #FFCF8B;
    color: #000000;
}
#newspaper-b tbody tr.selected td {
    background: none repeat scroll 0 0 #FFCF8B;
    color: #000000;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:11:13.403

Row 没有内容因此背景， td 应该是彩色的：

```
.disactivatedRow td { 
    background-color:#ffbba9 !important;
    color: #e6e6fa;
} 
```

如果仍然无法解决，我建议您在 if 之外使用 console.log(aData[10])。为了使 console.log 使用 Chrome/Firefox，通过 F12 找到控制台输出并查看 aData[10] 包含的内容，也许您需要 aData[9] （程序员使用从零开始计数；）。

# c# - wpf 强制构建可视化树

> ID：10768945
> 
> 赞同：5
> 
> 时间：2012-05-26T18:57:12.077
> 
> 标签：c#, wpf, user-controls, itemscontrol, visual-tree

我有 ItemsControl 和 Grid 作为 ItemsPanelTemplate

```
<ItemsControl ItemsSource="{Binding CellCollection}" Name="CellGrid">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Grid Name="grid" />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
</ItemsControl> 
```

我在代码隐藏中用这个 ItemControl 创建了一些 UserControl，然后我需要创建 RowDefinitions 和 ColumnDefinitons。我使用这种方法来获取“网格”：

```
private TChildItem FindVisualChild<TChildItem>(DependencyObject obj) where TChildItem : DependencyObject
    {
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
        {
            var child = VisualTreeHelper.GetChild(obj, i);

            if (child != null && child is TChildItem)
                return (TChildItem)child;

            var childOfChild = FindVisualChild<TChildItem>(child);

            if (childOfChild != null)
                return childOfChild;
        }

        return null;
    } 
```

但是，如果我在显示 UserControl 之前调用此方法，它将返回 null，因此我无法找到访问“网格”，并且当 UserControl 出现时，它的显示与我预期的不同。

我试图用谷歌搜索，但我发现的只是假设 VisualTree 不会为 ItemControl 构建，直到它显示在表单上。

有什么建议么？感谢和抱歉英语不好；）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T19:22:39.850

您可以调用[ApplyTemplate](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.applytemplate.aspx)这告诉元素应用模板并构建可视化树。

虽然，这不会一直应用模板。在这种情况下，您首先必须调用`ApplyTemplate()`ItemsControl，然后`var item_presenter = FindVisualChild<ItemsPresenter>(items_control)`再调用`item_presenter.ApplyTemplate()`，现在您将强制网格进入 VisualTree。

# c - typedef 结构指针定义

> ID：10768947
> 
> 赞同：6
> 
> 时间：2012-05-26T18:57:32.373
> 
> 标签：c, pointers, struct, typedef, declaration

我是 C 语言的新手，对所有指针的东西都有一些问题。

我写了这段代码：

```
typedef struct edgeitem
{
    double          weight;
}EDGE_ITEM, *pEDGE_ITEM; //also declaration of a pointer

/************ edge that includes a pointer to the edge item, next and prev ******/
typedef struct edge
{
    pEDGE_ITEM  *edge_item;  
    pEDGE       *next;      //pointer to next edge
    pEDGE       *prev;      //pointer to prev edge
}EDGE, *pEDGE; 
```

我以这种方式得到一个错误，只是无法理解为什么。

我知道`edgeitem`并且`edge`是标签，我可以使用`struct edge *next`，但我声明了指针，为什么我不能使用它们？

如果我有指针，我需要使用 * 吗？

```
pEDGE_ITEM *edge_item
//or
pEDGE_ITEM edge_item 
```

我无法理解，这是一个指针，所以为什么要添加 *？

最后一个问题是：如果我使用上面的，有什么区别：

```
*EDGE  next
EDGE  *next 
```

最后一个：如果我要添加：

```
typedef struct edge_list
{
    EDGE        *head;
}EDGE_LIST; 
```

是否与以下内容相同：

```
pEDGE      head; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T19:10:55.950

您不能在结构的定义中使用 pEDGE。你应该这样做：

```
typedef struct edge {
    pEDGE_ITEM          *edge_item;  
    struct edge         *next;      //pointer to next edge
    struct edge         *prev;      //pointer to prev edge
} EDGE, *pEDGE; 
```

您还必须注意这`edge_item`是一个双指针。你也在你的问题中提到了这一点。因此，如果您使用`pEDGE_ITEM`并且只想拥有一个普通指针，则不应编写`pEDGE_ITEM *edge_item`，而只需`pEDGE_ITEM edge_item`.

为了澄清起见，以下所有声明都是等效的：

```
struct edgeitem *edge_item;
EDGE_ITEM *edge_item;
pEDGE_ITEM edge_item; 
```

但

```
pEDGE_ITEM *edge_item; 
```

相当于

```
struct edgeitem **edge_item;
EDGE_ITEM **edge_item; 
```

关于`*EDGE next`那是错误的语法。正确的语法是`EDGE* next`or `pEDGE next`。因此，一旦`struct edge`定义了您就可以使用这两个中的任何一个，但是在定义结构时，您必须按照我在答案开头显示的那样做。

是的，以下两个定义是等价的：

```
typedef struct edge_list {
    EDGE        *head;
} EDGE_LIST;

typedef struct edge_list {
    pEDGE        head;
} EDGE_LIST; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T19:12:01.213

您在定义之前使用类型别名。使用结构标签是一种解决方法：

```
typedef struct edge
{
    EDGE_ITEM    *edge_item;  
    struct edge  *next;      //pointer to next edge
    struct edge  *prev;      //pointer to prev edge
} EDGE; 
```

请注意，您几乎可以肯定错误地使用了指针别名，我避免使用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T20:45:44.547

我认为这应该可以正常工作。

```
 typedef struct edgeitem
    {
       double          weight;
    }EDGE_ITEM, *pEDGE_ITEM; //also declaration of a pointer

    /************ edge that includes a pointer to the edge item, next and prev ******/
    typedef struct edge *pEDGE;  //<<-------  this
    typedef struct edge
    {
       pEDGE_ITEM  *edge_item;  
       pEDGE       *next;      //pointer to next edge
       pEDGE       *prev;      //pointer to prev edge
    }EDGE; 
```

# c# - OpenTK C# 透视照明看起来有问题

> ID：10768950
> 
> 赞同：2
> 
> 时间：2012-05-26T18:58:25.497
> 
> 标签：c#, opengl, perspective, lighting, opentk

**我的目标是使透视图中的照明平滑。**我对透视和正交使用相同的灯光设置。下图显示正交照明看起来很棒。**当我旋转透视照明时，它看起来会出现故障和闪烁。**我错过了什么会使透视图照明看起来不错？

**处理器：AMD FX 6100 6 核 3.31GHz**

**显卡：AMD Radeon HD 6800**

注意：我引用了一个 OpenGL 示例。我正在使用不同的灯光设置来了解它们是如何工作的。我在本文末尾粘贴的代码是创建图像的代码。

透视图：http: [//i.stack.imgur.com/pSXul.png](http://i.stack.imgur.com/pSXul.png)

正交：http: [//i.stack.imgur.com/Q7Yr2.png](http://i.stack.imgur.com/Q7Yr2.png)

**这是我的绘画方法中的相关代码。**

```
private void glControl1_Paint(object sender, PaintEventArgs e)
{
    if (!glLoaded)
        return;

    GL.Enable(EnableCap.DepthTest);
    //GL.Enable(EnableCap.Blend);
    GL.Clear(ClearBufferMask.ColorBufferBit | ClearBufferMask.DepthBufferBit);

    //SET PERSPECTIVE OR ORTHOGRAPHIC VIEW
    if (chkPerspective.Checked)
    {
        double aspect = glControl1.Width / (double)glControl1.Height;

        Matrix4 perspective = Matrix4.CreatePerspectiveFieldOfView(MathHelper.PiOver4, (float)aspect, 0.0001f, 5000.0f);
        GL.MatrixMode(MatrixMode.Projection);
        GL.LoadIdentity();
        GL.LoadMatrix(ref perspective);

        Matrix4 lookat = Matrix4.LookAt(eyeOffset.X, eyeOffset.Y, eyeOffset.Z, 0, 0, 0, 0, 1, 0);

        GL.MatrixMode(MatrixMode.Modelview);
        GL.LoadMatrix(ref lookat);

        //GL.Translate(-boxOffset);
    }
    else
    {
        setupViewPort(); //Orthographic settings
        GL.MatrixMode(MatrixMode.Modelview); 
        GL.LoadIdentity();
    }

    GL.Rotate(angleY, 1.0f, 0, 0);
    GL.Rotate(angleX, 0, 1.0f, 0);

    //LIGHTING
    if (chkLighting.Checked)
    {
        float[] mat_specular = { 1.0f, 1.0f, 1.0f, 1.0f };
        float[] mat_shininess = { 50.0f };
        float[] light_position = { 1000.0f, 1000.0f, 1000.0f, 100.0f };
        float[] light_ambient = { 0.5f, 0.5f, 0.5f, 1.0f };

        GL.ClearColor(0.0f, 0.0f, 0.0f, 1.0f);
        //GL.ShadeModel(ShadingModel.Smooth);

        //GL.Material(MaterialFace.Front, MaterialParameter.Specular, mat_specular);
        //GL.Material(MaterialFace.Front, MaterialParameter.Shininess, mat_shininess);
        GL.Light(LightName.Light0, LightParameter.Position, light_position);
        //GL.Light(LightName.Light0, LightParameter.Ambient, light_ambient);
        //GL.Light(LightName.Light0, LightParameter.Diffuse, mat_specular);

        GL.Enable(EnableCap.Lighting);
        GL.Enable(EnableCap.Light0);
        GL.Enable(EnableCap.ColorMaterial);
        //GL.Enable(EnableCap.CullFace);
    }
    else
    {
        GL.Disable(EnableCap.Lighting);
        GL.Disable(EnableCap.Light0);
    }

    foreach (Cube cube in cubes)
    {
        cube.drawCube(selectionCubeRadius);
    }

    glControl1.SwapBuffers();
} 
```

**这是我的正交视口代码，以防万一。**

```
private void setupViewPort()
{
    if (chkPerspective.Checked)
        return;

    int w = glControl1.Width;
    int h = glControl1.Height;
    GL.MatrixMode(MatrixMode.Projection);
    GL.LoadIdentity();
    GL.Ortho(-w, w, -h, h, -5000, 5000); // Bottom-left corner pixel has coordinate (0, 0)
    GL.Viewport(0, 0, w, h); // Use all of the glControl paintingarea
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:13:17.470

仅基于图像，看起来深度测试被禁用，或者一些法线被翻转或非标准化。

drawCube 到底是做什么的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T17:49:21.137

我找到了一个现在可以使用的解决方案。在透视图中，我将立方体的大小从 200.0 减小到 5.0。然后我将相机移近，使它们看起来大小相同。也有人说，当我创建透视视野时，我应该减少远 Z 平面。

减小模型的大小是可行的，但出于约定目的，我还减小了远 z 平面的距离。我还可能会创建一个算法，根据我当前的模型大小和角度确定要使用的 z 平面距离。

用户 'dflemstr' 询问了我的 GL.Normal3f 调用。答案是我没有。他们做什么，他们有必要吗？

# facebook - 我们如何从玩家加入前看到的 Facebook 中删除“此页面包含不安全的内容”？

> ID：10768953
> 
> 赞同：1
> 
> 时间：2012-05-26T18:58:50.670
> 
> 标签：facebook, facebook-apps

我们的服务器是安全的，我们遵守了所有规则，现在正在对位于[http://apps.facebook.com/cityfederation/](http://apps.facebook.com/cityfederation/) 的游戏进行 beta 测试。问题是新玩家（我们在世界各地都有测试人员）都看到这个页面说“这个页面有不安全的内容”所有玩家都看到了这个，它说 Facebook 建议玩家不要加载这个游戏。

我们已经在 Facebook 上测试过广告，这个警告会阻止任何人加入，即使您可以从屏幕截图中清楚地看到网址是[https://apps.cityfederation](https://apps.cityfederation) ...

有谁知道如何纠正这个问题，因为在 Facebook 上以每次点击 1 美元左右的价格做广告会很昂贵，然后当他们看到这个时会失去 75% 的人。另外，我们希望能够在 Facebook 中成长，但这无济于事。

由于是stackoverflow的新成员，这不会让我发布屏幕截图，但任何人都可以看到您是否尝试玩游戏。在 Facebook 中搜索城市联合会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:18:51.537

控制台说：

```
[blocked] The page at https://cityfederation.com/testing/examples/ ran insecure content 
from http://script.opentracker.net/?site=cityfederation.com. 
```

这就是您的问题所在。

# html - Favicon 链接中如何指定相对定位

> ID：10768957
> 
> 赞同：1
> 
> 时间：2012-05-26T18:59:13.153
> 
> 标签：html

例如`utexas.edu`，在路径前加上`/`

```
<link rel="shortcut icon" href="/sites/default/files/webcentral_favicon_0.ico" type="image/x-icon" /> 
```

`columbia.edu`没有，它只是以文件夹名称或路径开头

```
<link rel="shortcut icon" href="sites/all/themes/base/columbia2/images/favicon-crown.png" type="image/x-icon" /> 
```

这两者都是相对的，但我需要一种方法来区分绝对路径。

如何以编程方式判断何时使用相对路径或绝对路径？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T19:18:27.197

URLS 可以像下面这样格式化

*   绝对：

    [http://google.com](http://google.com) , [https://google.com](https://google.com)

*   方案相关：

    //google.com 链接使用与页面加载相同的方案

    //en.wikipedia.org/apple-touch-icon.png

*   网站绝对：

    /index.html

*   页面相关：

    index.html、../index.html、./index.html

我不太明白这个问题，但您似乎对什么是相对/绝对 URL 感到困惑。

如果需要将相对 URL 转换为绝对 URL，可以使用[http://code.google.com/p/js-uri/](http://code.google.com/p/js-uri/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T19:05:12.840

如果 href 值中的第一个字符以开头，`/`则它相对于域的根。如果它以`.`相同的目录开头..`..`是上面的目录，这些可以堆叠。如果它不是以这些开头而不是`//`完整的 URL，那么它是**相对**的。实际上，`.`并且`..`也是相对的。

请注意，它也可以以`//`or开头`https?`，在这种情况下它将是绝对的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T19:04:20.373

您可以简单地检查前导斜杠：

```
var link = $('link[rel="shortcut icon"]').attr('href');
var start = link.charAt(0); // Returns the leading slash (or not...)
if(start=='/'){
   return 'absolute';
}else{
   return 'relative';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T19:04:27.453

如果您的“站点”目录位于站点的根目录中，则两者是等效的。顺便问一下，您使用的是 Drupal 吗？Drupal 允许您上传网站图标并由它处理路径。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-26T19:09:11.823

难道你不能在 URL 的开头寻找一个“http”吗？即使您正在安全地连接，如果它是一个完整的 URL，它也应该以 http 开头。

# c++ - Visual Studio 2010 C++ MySQL

> ID：10768959
> 
> 赞同：0
> 
> 时间：2012-05-26T18:59:35.403
> 
> 标签：c++, mysql, visual-studio-2010

使用 Visual Studio 的连接到数据库选项和 .net 的 MySql 网页中的连接器，我设法连接到我的本地主机 MySql 数据库，并且在 Visual Studio 的服务器资源管理器选项卡中，我可以看到我的表。是否有可能在我的 c++ 项目中提取该数据？如果是这样，我需要包含什么标题才能访问数据库？此外，如果无法按照我的方式连接到我的数据库，我的可能性是什么？

# string - Prolog将字符串转换为对列表

> ID：10768961
> 
> 赞同：0
> 
> 时间：2012-05-26T19:00:15.523
> 
> 标签：string, list, prolog

我正在学习 Prolog，我需要知道如何转换字符串列表：

```
['f(a,45)', 'f(b,13)', 'f(c,12)'] 
```

成如下所示的对列表：

```
[[45,'a'],[13,'b'],[12,'c']] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:39:35.693

那是*atom*的列表，而不是字符串。Prolog 中的字符串通常*是字符代码列表*，表示为

```
["f(a,45)", "f(b,13)", "f(c,12)"] 
```

无论如何，使用递归函数对每个元素应用转换：

```
convert([], []).
convert([Atom|Atoms], [Pair|Pairs]) :-
  convert_element(Atom, Pair),
  convert(Atoms, Pairs). 
```

[您可以使用maplist](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.2%27,swi%28%27/doc/Manual/apply.html%27%29%29) /3代替递归：

```
convert(As, Ps) :- maplist(convert_element, As, Ps). 
```

要转换元素，您需要一个解析器。DCG 很方便：

```
convert_element(Atom, [N, A]) :-
  atom_codes(Atom, Codes),
  phrase(("f(", atomc(Ac), ",", numc(Nc), ")"), Codes, []),
  atom_codes(A, Ac),
  number_codes(N, Nc).

atomc(A) --> ([C], {is_lowerc(C)}, atomc(Cs), {A = [C|Cs]}) ; {A = []}.
numc(N) --> ([C], {is_numc(C)}, numc(Cs), {N = [C|Cs]}) ; {N = []}.

is_lowerc(C) :- C @>= 0'a, C @=< 0'z.
is_numc(C) :- C @>= 0'0, C @=< 0'9. 
```

测试：

```
?- convert(['f(a,45)', 'f(b,13)', 'f(c,12)'],L).
L = [[45, a], [13, b], [12, c]] . 
```

atomc//1 & numc//1 以紧凑的方式表示，但是是非常简单的递归模式匹配过程，即 atomc//1 可以是

```
atomc([C|Cs]) --> [C], {is_lowerc(C)}, !, atomc(Cs).
atomc([]) --> []. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T20:48:12.670

或者，您可以使用以下代码：

```
convert :-
    L = ["f(a,45)", "f(b,13)", "f(c,12)"],
    maplist(extract_args,L, LA),
    writeln(LA).

extract_args(S, [A1,A2]) :-
    string_to_atom(S, A),
    term_to_atom(T, A),
    T =..[_, A2, A1]. 
```

如果你有原子，只需在 extract_args/2 中使用 term_to_atom/2。

# python - 使用上下文管理器进行控制流

> ID：10768962
> 
> 赞同：5
> 
> 时间：2012-05-26T19:00:16.193
> 
> 标签：python, python-3.x

我想知道在python（3.2，如果相关的话）中是否有可能发生这样的事情。

```
with assign_match('(abc)(def)', 'abcdef') as (a, b):
    print(a, b) 
```

行为在哪里：

*   如果正则表达式匹配，则正则表达式组被分配到`a`和`b`
    *   如果那里不匹配，它会抛出异常
*   如果匹配`None`，它将完全绕过上下文

我的目标基本上是一种非常简洁的上下文行为方式。

我尝试制作以下上下文管理器：

```
import re

class assign_match(object):
    def __init__(self, regex, string):
        self.regex = regex
        self.string = string
    def __enter__(self):
        result = re.match(self.regex, self.string)
        if result is None:
            raise ValueError
        else:
            return result.groups()
    def __exit__(self, type, value, traceback):
        print(self, type, value, traceback) #testing purposes. not doing anything here.

with assign_match('(abc)(def)', 'abcdef') as (a, b):
    print(a, b) #prints abc def
with assign_match('(abc)g', 'abcdef') as (a, b): #raises ValueError
    print(a, b) 
```

它实际上完全符合正则表达式匹配的情况，但是，如您所见，它会抛出`ValueError`if there's no match。有什么办法可以让它“跳”到退出序列？

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T19:09:03.710

啊! 也许在 SO 上解释它为我澄清了这个问题。我只是使用 if 语句而不是 with 语句。

```
def assign_match(regex, string):
    match = re.match(regex, string)
    if match is None:
        raise StopIteration
    else:
        yield match.groups()

for a in assign_match('(abc)(def)', 'abcdef'):
    print(a) 
```

给出了我想要的行为。将其留在这里以防其他人想从中受益。（Mods，如果不相关，请随时删除等）

**编辑：**实际上，这个解决方案带有一个相当大的缺陷。我在 for 循环中执行此行为。所以这阻止了我做：

```
for string in lots_of_strings:
    for a in assign_match('(abc)(def)', string):
        do_my_work()
        continue # breaks out of this for loop instead of the parent
    other_work() # behavior i want to skip if the match is successful 
```

因为 continue 现在打破了这个循环，而不是父 for 循环。如果有人有建议，我很想听听！

**EDIT2**：好吧，这次真的想通了。

```
from contextlib import contextmanager
import re

@contextmanager
def assign_match(regex, string):
    match = re.match(regex, string)
    if match:
        yield match.groups()

for i in range(3):
    with assign_match('(abc)(def)', 'abcdef') as a:
#    for a in assign_match('(abc)(def)', 'abcdef'):
        print(a)
        continue
    print(i) 
```

很抱歉这个帖子 - 我发誓在我发帖之前我真的感觉很卡。:-) 希望其他人会觉得这很有趣！

# symfony - Twig 是否包含用于自动链接文本的过滤器？

> ID：10768967
> 
> 赞同：9
> 
> 时间：2012-05-26T19:01:20.453
> 
> 标签：symfony, twig

Symfony1 有一个名为 的辅助函数`auto_link_text()`，它解析文本块并将所有文本 URL 包装在`<a>`标签中，自动填充`href`属性。

Twig 是否包含这样的功能？我在谷歌上查看过代码，但找不到。我显然可以自己编写一个代码，但如果它已经存在，我不想复制它。

如果我自己编写一个代码，它应该是一个函数还是一个过滤器？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-26T20:11:41.007

该函数在 twig 中不存在，但您甚至可以将自己的扩展添加到 Twig ：

```
class AutoLinkTwigExtension extends \Twig_Extension
{

    public function getFilters()
    {
        return array('auto_link_text' => new \Twig_Filter_Method($this, 'auto_link_text', array('is_safe' => array('html'))),
        );
    }

    public function getName()
    {
        return "auto_link_twig_extension";
    }

    static public function auto_link_text($string)
    {

        $regexp = "/(<a.*?>)?(https?)?(:\/\/)?(\w+\.)?(\w+)\.(\w+)(<\/a.*?>)?/i";
        $anchorMarkup = "<a href=\"%s://%s\" target=\"_blank\" >%s</a>";

        preg_match_all($regexp, $string, $matches, \PREG_SET_ORDER);

        foreach ($matches as $match) {
            if (empty($match[1]) && empty($match[7])) {
                $http = $match[2]?$match[2]:'http';
                $replace = sprintf($anchorMarkup, $http, $match[0], $match[0]);
                $string = str_replace($match[0], $replace, $string);
            }
        }

        return $string;
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-22T03:59:43.567

如果您在 Symfony2 中使用 twig，则有一个捆绑包：[https ://github.com/liip/LiipUrlAutoConverterBundle](https://github.com/liip/LiipUrlAutoConverterBundle)

如果你在 Symfony2 之外使用它，你可以提交一个 PR 给他们以解耦包和树枝扩展！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-11-13T04:16:53.963

另一个列出的“答案”有点过时并且有问题。这个可以在最新版本的 Symfony 中运行，并且问题更少

```
class AutoLinkTwigExtension extends AbstractExtension
{
    public function getFilters()
    {
        return [new TwigFilter('auto_link', [$this, 'autoLink'], [
            'pre_escape'=>'html',
            'is_safe' => ['html']])];
    }

    static public function autoLink($string)
    {
        $pattern = "/http[s]?:\/\/[a-zA-Z0-9.\-\/?#=&]+/";
        $replacement = "<a href=\"$0\" target=\"_blank\">$0</a>";
        $string = preg_replace($pattern, $replacement, $string);
        return $string;
    }
} 
```

# php - 省略搜索结果

> ID：10768969
> 
> 赞同：0
> 
> 时间：2012-05-26T19:01:43.590
> 
> 标签：php, foursquare

使用foursquare api php

我正在搜索具有夜生活类别的场所：

```
$params = array("near"=>"92101", "radius"=>"800", "intent"=>"checkin",
                "categoryId"=>"4d4b7105d754a06376d81259", "limit"=>"50");

$venues = $foursquare->GetPublic("venues/search", $params); 
```

按预期工作......有点。问题是被归类为酒吧的餐厅正在填补我的退货限制。所以在那次搜索中，我可能只会得到一些实际的夜生活场所。如果我可以省略具有某些类别的场地，那将非常有帮助。获得 50 个夜生活场所，但不是那些也被标记为食物的场所。

我已经四处搜索并继续重新阅读搜索端点页面，希望我忽略了省略功能。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T07:34:12.417

我们有同样的问题（不同的类别类型）

我们最终做的是针对特定类别执行多次搜索。categoryId 字段接受多个以逗号分隔的类别，因此我们有时会使用多个 categoryId 执行多达 3 次搜索。

因此，就要求一个类别而言，您的请求看起来像（没有“酒吧”，我只是选择了几个随机的夜生活类别）：

```
$params = array("near"=>"92101", "radius"=>"800", "intent"=>"checkin",
                "categoryId"=>"4bf58dd8d48988d11f941735,4bf58dd8d48988d121941735,...", "limit"=>"50"); 
```

然后对一般的夜生活再做一个请求

```
$params = array("near"=>"92101", "radius"=>"800", "intent"=>"checkin",
                "categoryId"=>"4d4b7105d754a06376d81259", "limit"=>"50"); 
```

并合并结果。

此解决方案需要注意两点：

1.  您可能（可能）从多个搜索中获得重叠的结果，因为场所有时有多个类别（正如您已经发现的那样），请记住处理多个结果。我们首先扫描所有结果并根据foursquare ID保留唯一的结果，然后开始我们的处理。
2.  此解决方案无法与foursquare API 很好地扩展 - 进行 40 次搜索将无法正常工作.. （但没有它就没有其他方法可以获得您需要的东西，所以我仍然在这里编写整个解决方案）

# facebook-graph-api - 更新之前通过 Graph API 创建的对象

> ID：10768971
> 
> 赞同：0
> 
> 时间：2012-05-26T19:01:50.623
> 
> 标签：facebook-graph-api, updates

我一直在寻找这个问题的答案，但似乎不可能。我几乎不敢相信:)

我正在为我的网站构建 Facebook 集成，并且正在通过 Graph API 创建链接。到现在为止还挺好。但是，在更新内容时，我被卡住了；当我的内容更新时，我也想以某种方式更新 Facebook 数据，但我不知道该怎么做。文档中似乎没有关于此的任何内容；我可以创建新项目，例如链接和事件，我可以通过编程方式删除它们，但我无法更新它们。我尝试对对象 URL 进行 POST（例如，我使用[https://graph.facebook.com/](https://graph.facebook.com/) /links 创建了一个链接，我为我的新链接取回了 ID 123456，然后我尝试更新通过发布到[https://graph.facebook.com/123456](https://graph.facebook.com/123456)）。这只是一个猜测，并没有奏效。

我错过了什么吗？Facebook 不喜欢更新我通过 Graph API 创建的对象吗？感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:23:51.437

事实证明我是在正确的轨道上。发布到对象本身是正确的方法（我在评论中链接的问题很有帮助）。我只是在存储原始 ID 时遇到问题，这意味着我要发布到一个完全不同的 ID。Facebook 文档的缺乏让你望而却步，并阻止你深入挖掘。

# ios5 - 故事板中未调用 CellForRowAtIndexPath 方法

> ID：10768976
> 
> 赞同：0
> 
> 时间：2012-05-26T19:02:43.090
> 
> 标签：ios5, uitableview

我正在使用`storyboards`我的应用程序。因为我有一个类。我正在从来自 web 服务的数据中`UITableViewController`加载。`UITableView`问题是数据即将到来但没有被填充到`UITableView`. 在解码时，我发现该`cellForRowAtIndexPath`方法没有被调用。

我们是否需要像之前单独完成的那样连接`datasource`和`delegate`输入。如果是这样，在哪里连接和方法，**因为**.`storyboard``xibs``storyboard``datasource``delegate` **`Filesowner``storyboard`**

 **我坚持这个问题，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:12:59.183

如果您将表视图控制器放入情节提要中，它通常已经正确设置了表视图的数据源和委托。如果您的连接正常，另一种可能性是`tableView:numberOfRowsInSection:`返回零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-08T13:20:51.470

如果您使用的是`UITableViewController`，那么您需要使`numberOfSections:tableView:`数据源方法返回 1 而不是默认返回 0。

```
override func numberOfSections(in tableView: UITableView) -> Int {
        // #warning Incomplete implementation, return the number of sections
        return 1 // Default is 0, should be greater than 0
} 
```**

# asp.net - 如何通过 NuGet 和 Azure 使用 51Degrees？

> ID：10768980
> 
> 赞同：1
> 
> 时间：2012-05-26T19:02:57.207
> 
> 标签：asp.net, asp.net-mvc-3, nuget, 51degrees

我正在尝试在部署到 Azure 的 .NET 项目中使用 51Degrees。2011 年 8 月，他们发布了标记为“Azure 兼容”的[v1.2.1.3 ：](http://51degrees.codeplex.com/releases/view/71426)

> Foundation 现在可以部署到 Windows Azure 云服务上。有关要求和如何设置的完整详细信息，请参阅发行说明。Azure 相关更改包括： 将日志条目写入日志表而不是日志文件，而不是设备文件，将先前的设备请求写入设备表 新的条件编译符号 - “AZURE”。启用 AZURE 的构建在传统的 ASP.NET 中不起作用。

从那时起，已经发布了十几个版本，它们都达到了[v2.1.4.9](http://51degrees.codeplex.com/releases/view/87862)。但是，他们的文档非常简单地介绍了如何将它与 Azure 一起使用。其实原来有一个[bug](http://51degrees.mobi/Support/Forum/tabid/65/forumid/2/postid/1316/scope/posts/Default.aspx#1316)是因为v1.2.1.3声明

> 要使用这些更改，您必须创建一个名为“fiftyonedegrees”的存储帐户。然后，基金会将创建两个表，一个用于以前的设备，另一个用于日志。

这是不可能的，因为 Azure 存储帐户需要在所有实例中都是唯一的，因此每个人都无法创建名为`fifityonedegrees`.

他们的回应是：

> 重读博客后，我似乎在这方面做了一个疏忽，很快就会更新。
> 
> Foundation 查找的存储帐户可以在 Foundation 源代码中更改。转到 Foundation/Properties/Constants.cs 并将字符串“AZURE_STORAGE_NAME”更改为您的存储帐户的名称。

但是，我仍然不知道如何在我的项目中使用它。这是我的问题：

1.  我不清楚 v1.2.1.3 是唯一与 Azure 兼容的版本，还是之后的每个版本都与 Azure 兼容。他们的文件没有说。
2.  [当我通过NuGet](http://nuget.org/packages/51Degrees.mobi)安装 51Degrees 时，我的项目没有`App_Data`创建与其文档相矛盾的文件夹。该`web.config`文件甚至包含引用`App_Data`文件夹的条目，例如`<log logFile="~/App_Data/Log.txt" logLevel="Info"/>`.
3.  根据我之前引用的对 Azure 存储帐户错误的响应，他们说 IN 需要编辑文件`Foundation/Properties/Constants.cs`。但是，由于我是通过 NuGet 安装并且它是一个 DLL，所以 NuGet 可能是错误的方法？我是否需要下载源代码并自己编译并手动将其连接到我的项目？

我通常是 .NET、NuGet、VS 等的新手，因此感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:15:15.083

从 1.2.1.3 开始，所有版本都与 Azure 兼容。我假设[这](http://51degrees.mobi/Support/Blogs/tabid/212/EntryId/22/51Degrees-mobi-Foundation-and-Windows-Azure.aspx?CATReferrer=1765)是您正在谈论的博客文章。创建 azure 存储帐户后，您必须编辑源代码中的 Constants.cs 文件并添加您的帐户名称。据我了解，这意味着您必须访问源代码并直接对其进行编辑。完成此操作后，您需要重新编译软件才能正常工作。我不确定是否有办法使用 NuGet 执行相同的任务，但我会研究一下。希望这可以帮助。

# php - Facebook 获取正确的访问令牌

> ID：10768983
> 
> 赞同：0
> 
> 时间：2012-05-26T19:04:07.270
> 
> 标签：php, facebook, api

长访问令牌和短访问令牌有什么区别？

例如，我正在尝试使用以下方法来获得共同的朋友：

> [https://graph.facebook.com/$uid1/mutualfriends/$uid2?access_token=$token](https://graph.facebook.com/) _

并使用以下函数获取访问令牌：

```
function getAccessToken(){
    $url ='https://graph.facebook.com/oauth/access_token?client_id='.FB_APP_ID.'&client_secret='.FB_SECRET_ID.'&grant_type=client_credentials';
    $info = file_get_contents($url);
    $clean = clean_up_data($info);
    return($clean); 
```

}

但这不起作用，因为令牌无效，尽管如果我使用在[Graph API Explorer](https://developers.facebook.com/tools/explorer/?method=GET&path=me/mutualfriends/1207059 "图形 API 资源管理器")中找到的访问令牌，它可以工作，但这个令牌变化很大。

那么你将如何获得有效的令牌以允许访问共同的朋友呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:55:31.630

您使用问题中的代码获得的令牌是应用令牌，不能用于获取用户的朋友。与用户令牌不同，应用令牌不会过期。

用户令牌可以是短期或长期的，具体取决于您获得它们的方式。短期令牌在几个小时内到期，但长期令牌仅在 60 天后到期。

[使用javascript sdk](http://developers.facebook.com/docs/reference/javascript/)和[客户端身份验证流程](http://developers.facebook.com/docs/authentication/client-side/)为登录用户生成短期令牌，并且可以使用[这个新端点](http://developers.facebook.com/roadmap/offline-access-removal/)将其扩展到长期令牌。[服务器端流程](http://developers.facebook.com/docs/authentication/server-side/)也会产生长期存在的令牌。

一旦应用程序获得用户访问令牌，它就会代表登录用户查询数据。您可以通过选择右上角的应用程序然后单击“获取访问令牌”按钮来使用资源管理器工具进行检查，在允许应用程序和权限后，您将看到“访问令牌”字段具有访问令牌并且您可以开始发出api请求了。

# jvm - 如何防止死代码被JVM优化？

> ID：10768984
> 
> 赞同：0
> 
> 时间：2012-05-26T19:04:12.467
> 
> 标签：jvm, jpda

```
public class A
{
    public String getText()
    {
        Marker.start();
        ...
        ...
        Marker.end();
    }
}

public class Marker
{
    public static void start()
    {
        long now = System.currentTimeMillis;
    }

    public static void end()
    {
        long now = System.currentTimeMillis;
    }
} 
```

我想使用 JPDA（Java 平台调试器架构）来检测来自外部应用程序的 Marker.start() 和 Marker.end() 的发生。但是我认为代码可能会被 JVM 优化/消除。如何防止死代码被JVM优化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:21:08.370

`int`例如，您可以在类中的某处创建一个假变量，并在and方法`Marker`中增加/减少它的值。我不认为任何优化器都可以从类中删除实例字段，即使该值没有在任何地方使用。毕竟，总有人可以将新的代理代码注入 JVM 并要求其值。这意味着调用也不应该得到优化。`start()``end()``start()``stop()`

# php - php mysql 在条件下从数据库中读取

> ID：10768985
> 
> 赞同：0
> 
> 时间：2012-05-26T19:04:17.097
> 
> 标签：php, mysql

因此，如果满足条件，应用程序应该从数据库中读取并以这种格式打印在页面上： ![在此处输入图像描述](../Images/9a2ed32493e6a14b375e156c3c9096d5.png) 这里是代码，我将在最后的 lib.php 中发布我的输出图像：

```
 <?php
$db_name = "ispit_septembar";
$db_user = "root";
$db_host = "localhost";
$db_pass = "";

function vratiStudente($godina)
{
global $db_name,$db_user,$db_host,$db_pass;
$studenti = array();
$link = mysql_connect("$db_host","$db_user","$db_pass") or die ("Nije moguca konekcija");

mysql_select_db("$db_name",$link) or die ("Nepostojeca baza");
$sql = mysql_query("SELECT * from studenti where godina = '$godina'");
while ($row = mysql_fetch_array($sql) )
    {
    $indeks = $row["indeks"];
    $imeiprezime = $row["imeiprezime"];
    $godina = $row["godina"];
    $studenti["indeks"] = $indeks;
    $studenti[$indeks]["imeiprezime"] = $imeiprezime;
    $studenti[$indeks]["godina"] = $godina;

    }
return $studenti;
}
function daLiPostojiStudent($indeks)
{
    global $db_name,$db_user,$db_host,$db_pass;
    $link = mysql_connect("$db_host","$db_user","$db_pass") or die ("Nije moguca konekcija");
    mysql_select_db("$db_name","$link") or die ("Nepostojeca baza");
    $sql = mysql_query("SELECT * from studenti where indeks = '$indeks'");
    $check = mysql_num_rows($sql);
    if ($check >0 )
    {
    $postoji = "postoji";
    }
    else
    {
    $postoji = "ne postoji";
    }
    return $postoji;
}
function dodajStudenta($indeks,$ime,$godina)
{
    global $db_name,$db_user,$db_host,$db_pass;
    $link = mysql_connect("$db_host","$db_user","$db_pass") or die ("Nije moguca konekcija");
    mysql_select_db("$db_name","$link") or die ("Nepostojeca baza");
    $result = daLiPostojiStudent($indeks);
    if ($result == "postoji")
    {
    $postoji = "Student sa tim brojem indeksa postoji";
    return $postoji;
    }
    else
    {
    $sql = ("INSERT INTO studenti (indeks,imeprezime,godina)
            VALUES ('$indeks','$ime','$godina' ");
    mysql_query($sql);
    return 1;
    }
}
?> 
```

strana1.php：`

```
<?php
include "lib.php";
include "Smarty/libs/Smarty.class.php";
$dodaj1 = "strana2.php?godina=1";
$dodaj2 = "strana2.php?godina=2";
$dodaj3 = "strana2.php?godina=3";

$studenti1 = vratiStudente(1);
echo ($studenti1["indeks"]);
$studenti2 = vratiStudente(2);
$studenti3 = vratiStudente(3);

$smarty= new Smarty();
$smarty->assign("dodaj1",$dodaj1);
$smarty->assign("dodaj2",$dodaj2);
$smarty->assign("dodaj3",$dodaj3);
$smarty->assign("studenti1",$studenti1);
$smarty->assign("studenti2",$studenti2);
$smarty->assign("studenti3",$studenti3);
$smarty->display("strana1.tpl");

?> 
```

strana1.tpl

```
<html>
    <head>
    </head>
    <body>
    Godina: 1  <a href ={$dodaj1}>Dodaj</a> 
<hr>
<table>

<tr>
    <th>Indeks</th>
    <th>Ime i Prezime </th>
</tr>
{foreach name="studenti1loop" item=student key=indeks from=$studenti1}
<tr>
    <td> {$indeks} </td>
    <td> {$student.imeiprezime}</td>
    <td>{$student.godina}</td>
</tr>
{/foreach}
</table>
{* druga godina*}
Godina: 2  <a href ={$dodaj2}>Dodaj</a> 
<hr>
<table>

<tr>
    <th>Indeks</th>
    <th>Ime i Prezime </th>
</tr>
{foreach name="studenti2loop" item=student from =$studenti2}
<tr>
    <td> {$indeks} </td>
    <td> {$student.imeiprezime}</td>
    <td>{$student.godina}</td>
</tr>
{/foreach}
</table>
{* treca godina*}
Godina: 3  <a href ={$dodaj3}>Dodaj</a> 
<hr>
<table>

<tr>
    <th>Indeks</th>
    <th>Ime i Prezime </th>
</tr>
{foreach name="studenti2loop" item=student from=$studenti3}
<tr>
    <td> {$indeks} </td>
    <td> {$student.imeiprezime}</td>
    <td>{$student.godina}</td>
</tr>
{/foreach}
</table>

</body> 
```

这是 my_sql 基本结构： ![在此处输入图像描述](../Images/44dac2fd69fb5ad1a5334fa785f92bb5.png)

和我的输出（错误的）： ![在此处输入图像描述](../Images/c4cb8a2a2f6218ff566a58f619187e77.png)

现在，问题：我不知道为什么第一个数组 ($studenty1) 的第一个成员作为属性索引，imeiprezime 和 godina 有 indeks,3,3 - 它应该是 12345,dusan skoric, 1。第二个问题，为什么是第一个数组的最后一个成员的最后一个索引属性，用作接下来两个数组的每个成员的 ideks 属性（Studenti2，studenti3）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:22:04.133

好的，我已经解决了我的第一个问题： line studenti["indeks"] = $indeks in lib.php 出现问题，但仍然找不到第二个问题的答案

# java - 递归方法的调用顺序

> ID：10768990
> 
> 赞同：2
> 
> 时间：2012-05-26T19:04:33.057
> 
> 标签：java, recursion

我很好奇递归在 jvm 中是如何工作的。遵循示例。首先计算给定数字的阶乘。

```
public class Factorial {

public int factorial(int n) {
    System.out.println("Factorial: " + n);
    if ( n < 2) {
        return 1;
    } 

    return n * factorial(n - 1);
} 
```

执行以下测试

```
 @Test
public void test_factorial() {
    Factorial fact = new Factorial();
    System.out.println(fact.factorial(3));
} 
```

显示

```
3
2
1 
```

看起来很明显，方法调用被放入堆栈，执行到达 n == 1 并返回。现在，我尝试计算斐波那契数。

```
public int fibo(String name, int n) {
    System.out.println("fibo: " + name +  " " + n);
    if (n < 2 ) {
        return n;
    }
    return fibo ("left", n - 1) + fibo ("right", n - 2);
} 
```

执行测试

```
@Test
public void test_fibonacci() {
    Fibo fibo = new Fibo();

    assertEquals(8, fibo.fibo("start",6));

} 
```

打印以下内容

```
fibo: start 6
fibo: left 5
fibo: left 4
fibo: left 3
fibo: left 2
fibo: left 1
fibo: right 0
fibo: right 1
fibo: right 2
fibo: left 1
fibo: right 0
fibo: right 3
fibo: left 2
fibo: left 1
fibo: right 0
fibo: right 1
fibo: right 4
fibo: left 3
fibo: left 2
fibo: left 1
fibo: right 0
fibo: right 1
fibo: right 2
fibo: left 1
fibo: right 0 
```

我的问题是在这个例子中调用方法并将其放入堆栈的规则是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T19:29:17.133

在 Java 中，语句是从左到右计算的。以下是您在较小输入上的斐波那契函数的简单分解：

```
fib.fibo("start",3) 
```

被调用，打印“开始：3”。它试图评估

```
(1) fibo("left", 2) + fibo("right", 1) 
```

由于评估是 LTR，这意味着

```
(2) fibo("left", 2) 
```

首先得到评估。我们创建了一个新的堆栈帧，语句 (1) 正在等待它的返回。调用 (2) 打印 "left: 2" 并尝试评估

```
(3) fibo("left", 1) + fibo("right", 0) 
```

同样，LTR 评估意味着我们评估

```
(4) fibo("left", 1) 
```

第一的。同样，新的堆栈帧 (3) 等待 (4) 的响应。调用 (4) 打印“left: 1”并返回 1。堆栈帧弹出，并且 (3) 现在继续其评估，调用

```
(5) fibo("right", 0) 
```

这将打印“right: 0”并返回 0。(2) 现在能够完成其评估并返回 1+0 = 1。语句 (1) 终于完成了评估`fibo("left", 2)`，可以继续以`fibo("right",1)`与上述相同的方式进行评估。

我希望这有助于一些人澄清！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T19:29:29.380

有什么问题？您在运行此代码时从左到右和从右到左更改（left1 内部有 right2）：

```
 start
    left1           right1 
left2  right2    left3  right3 
```

你`left1`先打电话，然后`left2`。然后返回 left1，但不打印，然后调用`right2`. 然后返回两次，您`start`再次进入。之后你打电话`right1`，这将是类比。

所以你有：开始 - 左1 - 左2 - 右2 - 右1 - 左3 - 右3

# jquery - JQuery ajax调用的返回值

> ID：10768991
> 
> 赞同：4
> 
> 时间：2012-05-26T19:04:41.543
> 
> 标签：jquery, ajax, return

我希望这个函数返回 ajax 调用是否成功。有什么办法可以做到这一点吗？我下面的代码不这样做。

```
function myFunction(data) {
var result = false;
$.ajax({
    type: "POST",
        contentType: "application/json",
        dataType: "json",
        url: "url",
        data: data,
        error: function(data){
             result = false;
             return false;
        },
        success: function(data){
            result = true;
            return true;
        }
     });
     return result;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T21:57:59.077

不幸的是，您不能将值返回给包装异步回调的函数。相反，来自 AJAX 请求的成功回调会将数据和控制权移交给另一个函数。我在下面演示了这个概念：

**myFunction 的定义：**

```
// I added a second parameter called "callback", which takes a function
 // as a first class object
function myFunction(data, callback) {
    var result = false;
    $.ajax({
        type: "POST",
        contentType: "application/json",
        dataType: "json",
        url: "url",
        data: data,
        error: function(data){
            result = false;

            // invoke the callback function here
            if(callback != null)  {
                callback(result);
            }

            // this would return to the error handler, which does nothing
            //return false;
        },
        success: function(data){
            result = true;

            // invoke your callback function here
            if(callback != null) {
                callback(result);                
            }

            // this would actually return to the success handler, which does
              // nothing as it doesn't assign the value to anything
            // return true;
        }
     });

     // return result; // result would be false here still
} 
```

**回调函数定义：**

```
// this is the definition for the function that takes the data from your
 // AJAX success handler
function processData(result) {

    // do stuff with the result here

} 
```

**调用你的 myFunction：**

```
var data = { key: "value" }; /* some object you're passing in */

// pass in both the data as well as the processData function object
 // in JavaScript, functions can be passed into parameters as arguments!
myFunction(data, processData); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-30T20:01:57.330

无需回电。您可以使用 async 属性来实现这一点。

```
function myFunction(){
    var retVal;
    $.ajax({
        url:url,
        method: GET/POST,
        data: data,
        async: false,
        success:function(response) {
            retVal = response;
        }
    });
    return retVal;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T19:07:30.717

您可以`async: false`在 AJAX 配置中指定，尽管文档指出这也会在 AJAX 调用期间锁定浏览器，因此不建议这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T19:09:20.183

不，`myFunction`不能返回 ajax 调用的成功，因为 ajax 调用是异步完成的。

您的代码将按以下顺序执行：

1.  `var result = false;`
2.  `$.ajax`将请求发送到服务器。
3.  `return result`（仍然设置为假）。
4.  当从服务器接收到响应时，包含`result = false`或被`result = true`调用的成功或错误处理程序。

处理这个问题的正确方法是将任何依赖于 ajax 代码结果的代码移到成功和错误函数中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-11T12:01:13.263

添加这个对你有帮助的属性

```
async: false 
```

# coda - 在 Coda Editor 中跳转到相应/匹配的括号

> ID：10768997
> 
> 赞同：4
> 
> 时间：2012-05-26T19:05:35.023
> 
> 标签：coda

我在 Mac OSX 上使用 Coda IDE。在 Eclipse 中有一个称为“跳转到匹配括号”的功能（由 Command+Shift+P 调用）。Coda 中是否有任何等价物，或者可能是插件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T19:45:22.620

我知道这是几个月后的事了，但最好把我的发现留在这里，以防其他人也在这里结束。

我最近开始使用 Coda 2 并且一直希望跳转到匹配的括号（在 Windows 上的 Textpad 中，它类似于 Ctrl+M）。

这是我发现的最接近的：

*   可视化：在输入时，越过一个括号会在其匹配的圆圈上动画一个圆圈（如果它不在屏幕上，你就不走运了！）

*   对于光标放置：在括号或括号`Command+B`（或双击它）将选择块，然后您可以点击向左或向右箭头移动过去或前面的选择

*   对于两者：您可以使用冷折叠、`Ctrl+Command+left arrow`折叠和右箭头展开

*   对于 HTML：试试这个插件并使用`Ctrl+B`：Zen.Coding-Coda.v0.7.1.zip（[Github](https://github.com/downloads/sergeche/zen-coding/Zen.Coding-Coda.v0.7.1.zip) | [Google Code](https://zen-coding.googlecode.com/files/Zen.Coding-Coda.v0.7.1.zip)）（不要使用名为 Emmet 的新版本或类似的东西，该插件对我不起作用，在撰写本文时，我链接的这个旧版本似乎仍然适用于 Coda 2 (Coda 2.0.4))

不像其他编辑器/IDE那么明显，可能需要一些时间来适应。

# php - 通过引用返回

> ID：10768998
> 
> 赞同：5
> 
> 时间：2012-05-26T19:05:45.473
> 
> 标签：php, pass-by-reference

在 PHP 文档中它说：

> 不要使用按引用返回来提高性能。引擎会自行自动优化。

我希望返回对数组的引用（这是我的类的属性）。PHP如何优化这一点，因为数组不是对象？

如果数组有 10 亿个条目，如果我不通过引用传递它，我不会得到两个存储在内存中的 10 亿个条目的数组吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T19:08:45.107

PHP 使用写入时复制。这意味着如果您将巨大的数组作为函数参数传递并仅从中读取（例如 foreach），您将不会写入它，因此它不需要制作副本。

```
$count = count($huge_array); // read the reference at the bottom
for($i = 0; $i < $count $i++) {
    $value = 2*$huge_array[$i]/15;
    if($value > 3)
        $sub_array []= $value;
} 
```

$subarray 应该更小（它是巨大数组的子集），将只包含所需的（更改的）数据。

如果您不打算更改原始 $huge_array 的值，它将永远不会被复制，因此不会使用额外的内存。

如果您打算更改数组的原始值，则**需要**通过引用传递它。

如果您打算制作并返回原始数组的更改版本，那么您确实**需要**PHP 为您分配的额外内存。

如果您打算制作并返回原始数组的更改后的较小子集，那么您将创建一个新的空数组，您将从巨大的数组中复制一些数据并注意不要覆盖 $huge_array 中的值，因此您' 将避免从 $huge_array 写入并强调从中读取。

此[链接](http://schlueters.de/blog/archives/125-Do-not-use-PHP-references.html)说明 PHP 已针对按值传递用例进行了优化。

仅当变量不是传递给期望值的函数的引用时，写入时复制才有效，如果是，则将其传递会触发复制。

这使得期望参数按值传递并接收引用变量的 PHP 本机函数复制引用的值。

```
function foo(&$data) {
    for ($i = 0; $i < strlen($data); $i++) {
        do_something($data{$i});
    }
}

$string = "... looooong string with lots of data .....";
foo(string); 
```

在 C 中执行 strlen 将意味着遍历整个字符串以对其进行计数。在 PHP 中，字符串有一个附加的长度值。所以 strlen 返回从那里读取的值（快速）。

但是如果你给它一个引用的变量，它必须在读取它的长度之前复制它，所以它会遍历值以将它复制到它的参数列表中，读取并返回长度（然后释放新复制的字符串的内存） .