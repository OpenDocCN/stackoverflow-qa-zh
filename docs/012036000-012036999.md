# StackOverflow 问答 12036000-12036999

# tcl - 如何在 Tcl 的嵌套字典中设置条目的值？

> ID：12036009
> 
> 赞同：2
> 
> 时间：2012-08-20T10:26:48.837
> 
> 标签：tcl

例如在这个[字典中](http://wiki.tcl.tk/19941)：

如何更改名字、姓氏、街道、城市和电话字段的值？我试过这样：

```
dict for {id info} $employeeInfo {
    puts "Employee #[incr i]: $id"
    dict with info {
        puts "   Name: $forenames $surname"
        puts "   Address: $street, $city"
        puts "   Telephone: $phone"

        set [dict get $employeeInfo $id phone] 2341

        puts "   New Telephone: $phone"

    }
} 
```

电话通过以下方式设置了新值：

```
set [dict get $employeeInfo $id phone] 12345 
```

它不起作用。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:56:50.777

该`dict set`命令可以设置嵌套字典的元素：

```
dict set employeeInfo $id phone 12345 
```

请注意，封闭`dict for`循环不会看到变化；它（从概念上）在迭代之前获取字典的副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:59:46.777

`phone`元素在元素之下，`info`所以：

```
dict set employeeInfo $info phone 12345 
```

前提是您知道该`info`元素。

### 更新

在`with`上下文中，你可以直接设置电话元素，试试看：

```
dict with info {
    ...
    dict set phone 12345
    ...
} 
```

# opencv - 如何使用 OpenCV 提取和定位图像的特定区域？

> ID：12036013
> 
> 赞同：-2
> 
> 时间：2012-08-20T10:26:57.440
> 
> 标签：opencv, roi

我是 OpenCV 的新手。我想从事一个小项目来跟踪齿轮的旋转速度（通过使用网络摄像头）。但是，直到现在，我不知道如何处理这个问题。发布的图片显示了一台包含两个“大”齿轮的机器。我只对左侧的齿轮感兴趣（我突出显示的红线）。

[关联](http://www.u-file.net/f-wgd0642)

我的计划是：

1.  提取感兴趣的齿轮区域。

2.  屏蔽所有不相关的区域。因此，蒙版图像仅显示左侧齿轮 (ROI)。

3.  ......

    问题是，如何定位/提取/屏蔽 ROI 和屏蔽？
    我通过一些关于 的示例`cvMatchTemplate()`，但它不支持旋转和缩放。由于使用网络摄像头，捕获的图像可能会缩放或旋转。`cvfindcontour()`将提取图像中的所有轮廓而不是 ROI。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T07:39:49.970

如果您以前知道齿轮，您可以使用它的图片通过 SIFT、SURF、FAST 或任何角点检测算法提取关键点。然后执行以下操作：

1- 在每一帧上应用 FAST 来检测关键点。

2- 从这些关键点中提取 SIFT 描述符

3-将场景中检测到的点与您之前从图像中提取的点匹配。您可以为此使用 FLANN 匹配器。

4- 这些匹配将定义场景中包含您正在寻找的装备的区域。

这不是微不足道的，因此您需要在 OpenCV 文档中查找有关使用所有这些功能的信息。

# macos - NSWindow 跟踪

> ID：12036018
> 
> 赞同：2
> 
> 时间：2012-08-20T10:27:25.560
> 
> 标签：macos, cocoa, nswindow, nswindowcontroller

我想在 OS X 应用程序中每次出现某个窗口（对用户可见）时进行跟踪。哪里是最适合调用跟踪器的地方？

[windowWillLoad](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindowController_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindowController/windowWillLoad)，也许？

我希望能找到类似的东西，`windowWillAppear`但似乎我想太多 iOS 了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:34:20.887

如何获得通知，例如`NSWindowDidBecomeMainNotification`，主要我猜是用户直接可见的屏幕上最顶部的通知。

请参阅：[Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Articles/Registering.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-31T07:05:40.793

是的，人们会期望一个窗口会用一个`windowWillAppear`or`windowDidAppear`消息通知它的委托或它的控制器，或者发布一个记录在案的通知，如`NSWindowDidAppearNotification`. 但很可惜，这些都不存在。我向 Apple 提交了一份错误报告，并得到了使用故事板和视图控制器的建议。这对于已经使用大量窗口控制器和 xib 的旧版应用程序没有帮助。

您可以继承`NSWindow`并覆盖`orderWindow:relativeTo:`以发送通知。大多数（但不是全部）使窗口显示自身的消息最终都会通过这种方法，包括`orderBack:`、`orderFront:`、`makeKeyAndOrderFront:`和`-[NSWindowController showWindow:]`。但`orderFrontRegardless`不会通过，因此您*还*`orderWindow:relativeTo:`需要覆盖它以确保完整性。

另一种获得通知的方法是创建一个子类`NSViewController`来控制一些在窗口中始终可见的视图。视图控制器将接收`viewWillAppear`和`viewDidAppear`。

如果您正在子类化`NSWindow`或`NSViewController`已经出于其他原因，这些都是合理的解决方案。

如果您还没有`NSWindow`进行子类化，并且没有`NSViewController`在窗口中始终可见的视图的子类，那么另一种方法是使用 Cocoa 绑定将窗口的`visible`绑定连接到您的对象的一个​​属性。例如，我有一个自定义`NSWindowController`子类。我给了它一个`windowIsVisible`属性：

```
@interface MyWindowController ()

@property (nonatomic) BOOL windowIsVisible;

@end 
```

我实现了这样的访问器：

```
- (BOOL)windowIsVisible { return self.window.visible; }

- (void)setWindowIsVisible:(BOOL)windowIsVisible {
    NSLog(@"window %@ became %s", self.window, windowIsVisible ? "visible" : "hidden");
} 
```

在中`awakeFromNib`，我将窗口的`visible`绑定绑定到属性，如下所示：

```
- (void)awakeFromNib {
    [super awakeFromNib];

    [self.window bind:NSVisibleBinding toObject:self withKeyPath:NSStringFromSelector(@selector(windowIsVisible)) options:nil];
} 
```

当窗口变得可见时，将`setWindowIsVisible:`使用参数调用 setter `YES`。请注意，如果整个应用程序被隐藏并重新出现，则将再次调用 setter，即使`NO`在隐藏应用程序时未使用参数调用它。因此，请注意不要假设该窗口以前是隐藏的。

此外，绑定可能会创建一个保留周期，因此您可能应该在窗口关闭时取消绑定它，除非您想保留窗口和控制器。请注意，窗口`NSWindowWillCloseNotification`在关闭时确实会发布，因此您不需要任何特殊的魔法来检测它。

# content-management-system - Plone 4.2 中的 Diazo 已启用，但旧主题仍处于激活状态

> ID：12036020
> 
> 赞同：1
> 
> 时间：2012-08-20T10:27:33.153
> 
> 标签：content-management-system, themes, plone, diazo

我对 Plone 4.2 和 Diazo 主题有一些问题，我想使用 Diazo 主题。

我安装了皮肤并选择了它启用了重氮并保存了更改，但是重氮主题仍然没有在洞网站上被激活。

那么如何激活重氮主题？

问候nameno

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:34:04.817

1.  安装 Diazo 主题支持 (http://localhost:8080/Plone/prefs_install_products_form)
2.  安装你的主题（http://localhost:8080/Plone/prefs_install_products_form）
3.  在 Diazo 主题（http://localhost:8080/Plone/@@theming-controlpanel）中，选中“启用主题”并选择您的主题
4.  在“高级”选项卡中，配置“非主题主机名”以反映您的配置（如果您继续使用 127.0.0.1，默认情况下，重氮将被禁用）
5.  在主题配置（http://localhost:8080/Plone/@@skins-controlpanel）中，检查您的主题是否已启用

有了这个，你就有了一个工作重氮主题。

# multithreading - 使用两个 EMF 适配器将 GEF 编辑器与 EMF 模型同步

> ID：12036025
> 
> 赞同：1
> 
> 时间：2012-08-20T10:28:10.123
> 
> 标签：multithreading, eclipse-rcp, eclipse-emf, eclipse-gef, synchronisation

我无法将 GEF 编辑器与基于 EMF 的模型同步。我认为这是因为模型内部的 EMF 适配器，或者更确切地说是它调用的方法，在调用编辑器的适配器`notifyChanged()`并更新模型子节点之前没有完成。这导致编辑器视图与模型本身不同步，或者更确切地说，模型的更改没有在视图中显示，而它们应该显示在视图中。

考虑这个设置。一个`Command`" `CreateNodeCommand`" 向底层模型添加一个节点：

```
@Override
public void execute() {
...
getNewNode().setGraph(getGraph());
...
} 
```

有`GraphEditPart`一个内部类扩展`org.eclipse.emf.common.notify.Adapter`。它的`notifyChanged()`方法确实被通知了，测试类似于下面（不完整的代码）：

```
@Override
public void notifyChanged(Notification notification) {
  switch (notification.getEventType()) {
case Notification.ADD:
      System.err.println("ADD occurred!");
  refreshChildren();
} 
```

问题是，（第三方）模型本身也实现了一个`Adapter`，它又在新的模型元素上运行许多方法，例如添加一个 ID 等。

在我看来，新元素的图形在创建后并没有直接出现在编辑器中这一事实 - 但只有在下一个编辑步骤之后，然后没有出现的图形 - 表明*模型*适配器是仍在忙于设置新元素，而*编辑器*适配器`refreshChildren()`已经在调用它。

 *这似乎需要**同步**，但我不确定这是否可以通过用于多线程的内置 Java 功能或调用基于 EMF 的方法来实现。

请分享您在 EMF 中同步的知识。

提前谢谢了！

# 编辑

根据要求，这是该`getModelChildren()`方法的源代码：

```
@Override 
protected List<EObject> getModelChildren() {
  List<EObject> allModelObjects = new ArrayList<EObject>();
  allModelObjects.addAll(((MyGraph) getModel()).getTokens());
  allModelObjects.addAll(((MyGraph) getModel()).getNodes());
  return allModelObjects;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:51:50.247

调试（第 3 方）模型，我发现`Graph`'`enotify()`在实际添加发生之前触发了通知，因此我`Adapter`太早收到通知，即在添加节点之前。

现在在添加后调用通知，一切正常。

感谢您所有的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:51:43.437

尝试扩展 EContentAdapter 而不是 AdapterImpl，不要忘记调用

```
super.notifyChanged(Notification notification); 
```

在里面。它是一个适配器，它将自己添加到模型的新元素中，并在它们发生更改时通知您。*

# ruby-on-rails - Rails 3：form_tag 检查代码

> ID：12036026
> 
> 赞同：0
> 
> 时间：2012-08-20T10:28:21.690
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, tags

我的帖子在创建时会生成一个 :key_code。我希望用户能够在表单字段中使用该代码来销毁他们发布的帖子，而无需登录。我的困难在于 form_tag ......我如何制作一个 form_tag 视图来检查输入的 :key_code一个存储在数据库中？我很难理解 form_tag。

我的路线如下所示：

```
get 'posts/:id/code' => 'posts#code', :as => :code 
```

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:40:54.167

如果我理解正确，那么您的路线是错误的，因为您需要一个动态参数`code`，所以您应该使用`:code`而不是简单地使用`code`：

```
get 'posts/:id/:code' => 'posts#code', :as => :code 
```

要生成该路由的 url，`form_tag`请使用：

```
form_tag code_path(@post, :code => @post.key_code) 
```

# sql - SQL - 查找在另一个之前出现的总记录

> ID：12036030
> 
> 赞同：2
> 
> 时间：2012-08-20T10:28:57.020
> 
> 标签：sql, sql-server, sql-server-2008

我有以下架构，并希望找到首先出现的 typeId 为 10 的客户端数量。以下数据的答案将是 2（客户 ID 1000 和 1003 在 1 月 1 日有 10，在 1 月 2 日有 11。

```
CREATE TABLE Event (ClientId int, TypeId int, Date smalldatetime)
INSERT Event (ClientId , TypeId, Date) VALUES (1000, 10, '1 JAN 12')
INSERT Event (ClientId , TypeId, Date) VALUES (1000, 11, '2 JAN 12')
INSERT Event (ClientId , TypeId, Date) VALUES (1001, 11, '1 JAN 12')
INSERT Event (ClientId , TypeId, Date) VALUES (1001, 10, '2 JAN 12')
INSERT Event (ClientId , TypeId, Date) VALUES (1002, 11, '1 JAN 12')
INSERT Event (ClientId , TypeId, Date) VALUES (1003, 10, '1 JAN 12')
INSERT Event (ClientId , TypeId, Date) VALUES (1003, 11, '2 JAN 12') 
```

我用 ROW_NUMBER() 尝试了一些查询，但有点迷失了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:38:43.070

尝试这个：

```
SELECT a.* FROM 
    (SELECT CLIENTID,TYPEID,MIN(DATE) AS DATE
     FROM EVENT
     GROUP BY CLIENTID, TYPEID)A
JOIN
    (SELECT CLIENTID,MIN(DATE) AS DATE
     FROM EVENT
     GROUP BY CLIENTID)B
 ON   B.CLIENTID=A.CLIENTID
 AND  B.DATE=A.DATE
 WHERE TYPEID=10 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/1bf3d/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:54:51.967

您可以使用两个 row_number() 来执行此操作：

```
select count(*)
from (select e.*,
             row_number() over (partition by clientId order by date) as seqnum,
             row_number() over (partition by clientId, typeid order by date) as ct_seqnum
      from event e
     ) e
where seqnum = 1 and ct_seqnum = 1 and typeid = 10 
```

这是进行整体排序和按类型排序。您的条件相当于说在 typeid 为 10 的行中这两个都是 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T10:32:23.723

您可以尝试以下方法。

*   自加入表`ClientID`
*   仅当`typeID`自联接表的 较大时
*   并且`Date`自联接表的 更大

**SQL 语句**

```
SELECT e1.*
FROM   Event e1
       INNER JOIN Event e2 ON e2.ClientID = e1.ClientID
                              AND e2.TypeID > e1.TypeID
                              AND e2.Date > e1.Date
WHERE  e1.TypeID = 10 
```

[示例小提琴](http://sqlfiddle.com/#!3/41c88/6)

# iphone - 如何在 5 秒内显示模态视图？

> ID：12036033
> 
> 赞同：0
> 
> 时间：2012-08-20T10:29:12.377
> 
> 标签：iphone, objective-c, ios, modalviewcontroller

我正在做一个模态视图控制器（changeviewcontroller），它只会出现 5 秒，那么该怎么做呢？我需要编写哪些重要代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:38:52.897

使用`-performSelector:withObject:afterDelay:`方法：

```
-(void)someButtonClicked:(id)sender
{
   [self performSelector:@selector(openController) withObject:nil afterDelay:5.0];
}

-(void)openController
{
    //present the view controller
    SomeViewController *ctrl = ....;
    [self present...];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:14:45.850

对于 MVC（模型视图控制器）

```
 -(void)viewWillAppear:(BOOL)animated
  {
                 [self performSelector:@selector(CloseViewController) withObject:nil afterDelay:5.0];

}

    -(void)CloseViewController{

        [yourViewController dissmissModalViewController];
    } 
```

如果你在这里使用任何视图，那么它也可以像下面这样工作

```
-(void)viewWillAppear:(BOOL)animated
{
        [self performSelector:@selector(hideView) withObject:nil afterDelay:5.0];
}
-(void)hideView{

    CATransition *animation = [CATransition animation];
    [animation setDelegate:self];   
    [animation setType:kCATransitionFromBottom];
    [animation setDuration:1.0];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseInEaseOut]];
    [[yourView layer] addAnimation:animation forKey:@"transitionViewAnimation"];
    yourView.hidden=YES;
} 
```

在上面我使用了 MVC 的 Imageview Insted。我希望它对你有用...... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:30:31.613

查看 NSTimer 类。将其设置为运行 5 秒并调用 selecor 以关闭视图。这一切都在 Apple 文档中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T10:37:00.630

做这个：

```
 [UIView animateWithDuration:5

 animations:^{ 
   //add you modal view here
 }]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T10:37:28.070

```
[NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(theSelector) userInfo:nil repeats:NO]; 
```

这应该这样做。只需插入正确的选择器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T11:02:24.430

试试这个：在模态视图控制器类中创建一个方法来关闭模态视图控制器。

```
-(void)dismissModal{
   [self dissmissModalViewController];
} 
```

从您的 viewdidLoad 方法中以 5 秒的延迟调用此方法。

```
-(void)viewDidLoad{
  [self performSelector @selector(dismissModal) afterDelay:5.0 ];

} 
```

检查语法，我没有使用 xcode 。

# ruby-on-rails - 如果下一个不存在，则 Ruby 数组重复值，

> ID：12036035
> 
> 赞同：2
> 
> 时间：2012-08-20T10:29:19.280
> 
> 标签：ruby-on-rails, ruby, arrays

我们如何在 Ruby 中实现这一点？

```
xs = [1,2,3]
x = 5 
```

那我需要那个`sum = 1+2+3+1+2 = 9`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-20T10:57:51.397

您在核心中拥有所需的抽象，只需将它们连接在一起：[Enumerable#cycle](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-cycle)、[Enumerable#take](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-take)和[Enumerable#inject](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)：

```
>> [1, 2, 3].cycle.take(5).inject(0, :+)
=> 9 
```

这就是[功能性](https://en.wikipedia.org/wiki/Functional_programming)/声明性方法：使用抽象（现有的或您自己实现的），这样您就可以编写描述您正在做*什么*而不是*如何*做的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T10:34:06.937

```
def get_sum_cyclic(array, number)
   sum = 0
   0.upto(number - 1) do |i|
     sum += array[i % array.size]
   end
   return sum
end 
```

另一种选择是在一个范围内使用地图：

```
(0...5).map{|i| a[i % a.size]}.inject(0){|t,v| t + v} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:34:49.117

我认为在 Ruby 中没有特殊的方法可以做到这一点，但是您可以使用以下代码段来实现这一点。

```
(0..x).inject(0) do |sum, i|
  sum += arr[ i % arr.size ]
end 
```

# c++ - 显式调用构造函数

> ID：12036037
> 
> 赞同：9
> 
> 时间：2012-08-20T10:29:25.327
> 
> 标签：c++, constructor

我知道我们可以同时调用构造函数的概念，`Explicitly`并且`Implicitly`我已经测试了这两个场景（通常到现在我的所有目的都通过调用构造函数来实现`Implicitly`），但我想知道每当我们创建时构造函数都会被隐式调用`objects`，所以什么是调用构造函数的主要原因`Explicitly`。当我们调用构造函数而不是它时，它提供了什么优点或`Explicitly`缺点`Implicit Call`？

例子

```
class integer
{
   int m ,n;
 public:
   integer (int x , int y); 
};
integer :: integer (int x , int y )
{
   m=x; n = y;
} 
```

现在如果我打电话

```
integer int1 = integer( 0 , 100); //  Explicit Call
integer int1(1,100); // implicit call 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-20T13:21:33.263

这里有两个不同的问题，因为您对*显式*和*隐式*的定义与标准定义不匹配（大多数现有答案都基于标准定义，在您添加包含您自己的*显式*和*隐式*定义的示例之前编写）。

好的，让我们首先考虑一下你对*explicit*的定义，这将是（我猜你称它为*explicit*是因为你明确地写了类型名称？）：

```
integer int1 = integer(0, 100); 
```

与您对*隐式*的定义相比：

```
integer int1(1, 100); 
```

在这种情况下，第一个*“显式”调用确实比第二个**“隐式”*调用没有任何优势。但是还是有区别的。第一个实际上使用两个参数的构造函数创建了一个临时对象，然后使用`int1`复制构造函数进行创建。尽管实际上编译器通常会优化掉这个额外的副本，但如果您的副本构造函数是私有的，它仍然无法工作，而第二个只需要双参数构造函数（您甚至可以将此视为缺点）。

* * *

*但现在到了显式*和*隐式*的实际标准定义。*显式*构造函数调用是任何构造函数调用，好吧，显式调用。实际上，每当您使用括号语法`()`创建对象时，您都会显式调用构造函数，否则它是*隐式*构造函数调用（也就是说，由编译器在幕后完成）：

```
integer int1;                   // implicit default constructor
integer int1(1, 100);           // explicit two-arg constructor
integer int1 = integer(0, 100); // explicit two-arg constructor, implicit copy constructor

void func(integer);             // function taking by-value
func(int1);                     // implicit copy constructor 
```

因此，唯一可以*隐式*调用的构造函数是默认构造函数和任何单参数构造函数（包括复制和移动构造函数）。这方面的一个特殊问题是单参数构造函数不是复制/移动构造函数：

```
struct integer
{
    integer(int);
}; 
```

这允许编译器*隐*式调用构造函数来转换类型，因此 any`int`可以隐式转换为`integer`：

```
void func(integer);
func(42);             // implicit call to int-constructor 
```

要禁止这种行为，您必须标记构造函数`explicit`：

```
struct integer
{
    explicit integer(int);
}; 
```

这只允许*显式*调用它（例如`func(integer(42))`）（但我猜你已经知道这一点）。这样做的好处是它不会在幕后引入未被注意到/不需要的转换，这可能会导致各种难以发现的问题和关于重载解决方案的歧义。因此，通常的做法是标记任何转换构造函数（单参数非复制/移动构造函数）`explicit`，并且很可能也是 C++11 最终引入`explicit`转换运算符的原因。

* * *

`integer int1 = integer(1, 100);`因此，总而言之，根据您的定义和示例，使用instead of确实没有任何优势`integer int1(1, 100);`，尽管它会产生（通常不相关的）差异。

但是根据标准定义，*显式构造函数调用比**隐式*调用有很多优势，因为**显式**构造对象的唯一方法是使用*显式构造函数调用*，而*隐式构造函数调用*仅在某些情况下在幕后完成情况，并且仅适用于零参数和一参数构造函数（正如*aschepler*已经指出的那样）。并且将转换构造函数显式标记为`explicit`具有不允许在幕后进行不需要的隐式转换的优点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T10:32:26.840

显式调用构造**函数**允许您使用参数构造对象，而不是使用**默认构造函数**。

```
class Foo
{
  public:
    Foo() {}
    Foo(int bar) : mBar(bar) {}
  private:
    int mBar;
}

Foo f;    // Implicitly constructed with default constructor.
Foo f(7); // Explicitly constructed with argument for 'bar' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T10:42:17.787

可以通过三种方式调用构造函数：

*   隐式地，通过声明类型的实例而不初始化它
*   `=`同样隐式地，通过使用或通过导致从参数类型到您的类的隐式转换来初始化实例。
*   显式调用构造函数，传递参数。

您可以在特定上下文中使用哪些取决于您正在调用的构造函数。

```
class Foo 
{
    Foo();                                  // 1
    Foo(int a);                             // 2
    explicit foo(const std::string& f);     // 3
    Foo(int c, int d);                      // 4
}; 
```

1.  声明时将隐式调用此构造函数`Foo f;`。**永远不要**尝试显式调用没有参数的构造函数，就像`Foo f();`声明*一个函数一样！*
2.  这个可以通过写作`Foo f = 42;`或来调用`Foo f(42)`。
3.  关键字通过写or`explicit`禁止隐式转换。`Foo f = std::string("abc");``function_taking_foo(function_returning_string());`
4.  由于有多个参数，显式版本是唯一合适的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-02T19:02:28.313

我讨厌这样说，因为它太反常了，但是还有另一种方法可以显式调用构造函数。

```
class integer
{
   int m ,n;
 public:
   integer (int x , int y); 
};
integer :: integer (int x , int y )
{
   m=x; n = y;
} 
```

可以在已构造的对象上显式调用构造函数。

```
integer i(1,100);
i.~integer();
i.integer::integer(2,200); 
```

在这里，我（明确地）构造了一个整数实例。然后我明确地调用了它的析构函数。然后我再次明确地调用了构造函数。我想你可能会在测试中使用这个成语。我不知道标准中有任何地方禁止它。它适用于 Visual Studio 2010。我还没有测试过非常广泛的编译器。

这些调用对于“显式”的大值是显式的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T10:39:15.703

如果你创建一个函数来引用你的类的一个对象，并且你将它传递给你的对象以外的另一种类型，那么你的类的构造函数会将该类型转换为你的类的对象。任何一个参数构造函数都被视为转换构造函数。如果您显式声明该构造函数，则将对象以外的其他类型传递给该函数将不会对其进行转换，并且编译器将返回错误

# unicode - 是否有 Unicode 字形符号来表示“搜索”

> ID：12036038
> 
> 赞同：208
> 
> 时间：2012-08-20T10:29:27.720
> 
> 标签：unicode, symbols, html-entities

Unicode 有一百万个类似图标的字形，但它们很难搜索。

有没有看起来像“双筒望远镜”或“放大镜”的 Unicode 字形？或者是否有一个用于表示“搜索”的符号，它是 Unicode 格式的？

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2012-08-20T10:36:59.093

有[U+1F50D左指向放大镜](http://www.fileformat.info/info/unicode/char/1f50d/index.htm)（）和[U+1F50E右指向放大镜](http://www.fileformat.info/info/unicode/char/1f50e/index.htm)（）。

您应该使用（在 HTML 中）`&#x1F50D;`或`&#x1F50E;`

但是，许多字体不支持它们（fileformat.info 仅列出了一些字体以支持具有适当字形的代码点）。

另请注意，它们不在[BMP](https://en.wikipedia.org/wiki/Plane_%28Unicode%29#Basic_Multilingual_Plane)范围内，因此某些支持 Unicode 的软件在渲染它们时可能会遇到问题，即使它们有支持它们的字体。

通常可以使用诸如[fileformat.info](http://www.fileformat.info/info/unicode/char/search.htm)之类的站点来搜索 Unicode 字形。这会“仅”搜索 Unicode 字形的名称和属性，但它们通常包含足够的元数据以提供良好的搜索结果（例如，对于这个答案，我搜索了“glass”并浏览了结果列表）。

请注意，您可以使用[Unicode 变体选择器](https://en.wikipedia.org/wiki/Variation_Selectors_(Unicode_block))来明确选择字形的呈现方式。具体而言，文本样式的 VS15 (U+FE0E) 和表情符号样式的 VS16 (U+FE0F) 与此处相关。只需将它们附加到您选择的 Unicode 符号上，以表明您是否希望将其呈现为文本或表情符号（假设软件/浏览器支持选择器*和*相关表示）：

| Unicode 符号 | 变体选择器 | HTML 编码 | 结果 |
| --- | --- | --- | --- |
| U+1F50E | 没有任何 | `&#x1F50E;` |  |
| U+1F50E | VS15 = U+FE0E | `&#x1F50E;&#xFE0E;` | ︎</td> |
| U+1F50E | VS16 = U+FE0F | `&#x1F50E;&#xFE0F;` | ️</td> |

请注意，结果可能因平台而异。例如，Chrome 似乎总是在 Linux 和 Windows 上将此字符呈现为表情符号。

* * *

## 回答 #2

> 赞同：138
> 
> 时间：2013-08-21T21:10:18.437

使用 ⚲ 符号（编码为`&#9906;`或`&#x26B2;`），并旋转它以达到所需的效果：

```
<div style="-webkit-transform: rotate(45deg); 
               -moz-transform: rotate(45deg); 
                 -o-transform: rotate(45deg);
                    transform: rotate(45deg);">
    &#9906;
</div> 
```

它旋转一个符号:)

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2013-04-03T09:59:32.103

我建议使用[http://shapecatcher.com/](http://shapecatcher.com/)来帮助搜索 unicode 字符。它允许您绘制您所追求的形状，然后列出与该形状最接近的匹配项。

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2015-08-28T19:52:46.017

在 Chrome 操作系统上显示正确 - 此系统的屏幕截图。

[![西藏星座 sgra gcan -char rtags U+0F17](../Images/f4a285c5477884a042a293031b9891f0.png)](https://i.stack.imgur.com/OxlUf.png) ༗ [U+0F17](http://graphemica.com/%E0%BC%97)

[![电话录音机 (U+2315)](../Images/fa0256ea866764b41a43a8610ab27d9d.png)](https://i.stack.imgur.com/xXLCA.png) ⌕ [U+2315](http://graphemica.com/%E2%8C%95)

[![lepcha 字母 gla (U+1C04)](../Images/9d8fa4bb75e67812b1d31b72fe44399e.png)](https://i.stack.imgur.com/ESzYl.png) ᰄ [U+1C04](http://graphemica.com/%E1%B0%84)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-09-10T11:37:55.253

您可以简单地将这个 CSS 添加到您的标题中

```
<link href='http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css' rel='stylesheet' type='text/css'> 
```

接下来将此代码添加到要显示字形符号的位置。

```
<div class="fa fa-search"></div> <!-- smaller -->
<div class="fa fa-search fa-2x"></div> <!-- bigger --> 
```

玩得开心。

# java - 遍历列表并排列数据

> ID：12036039
> 
> 赞同：0
> 
> 时间：2012-08-20T10:29:29.087
> 
> 标签：java, json, list, hashmap

我从数据库中获取列表对象形式的数据列表，其中包含数据

```
field_id  value dt_updated
1          3    jun-6
2          5    jun-5
1          2    jun-3
3          5    jun-3 
```

我想根据旧值和新值遍历此列表并为字段分组数据。例如：我想创建一个像这样的 json：

```
 "field_1":
       [
           oldvalue"2"
           new value:"3"

       ],
  field_2 :
  [ oldvalue:"5"], 
```

我想遍历列表并获取该字段的旧值和新值并放入一些对象。如何执行此操作？在某些情况下，字段将只有旧值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:29:43.667

我不知道数据库中的条目是否按 dt_update 排序，但我认为不能保证。

只需将您的条目从 db 到`Map(id->DBUpdate)`where`DBUpdate`是一些简单的值对象`value`和`updateDate`字段到一些 MultiMap（例如在 Google Guava 库中可用）。在从 DB 对每个 id 的所有对象进行排序之后`updateDate`（只需通过实现`Comparable`接口 in `DBUpdate`）并构造适当的字符串（如果 MultiMap 中给定的 id 只有一个值，则只有 oldValue，否则使用第一个元素作为新值和MultiMap 中的第二个元素作为 oldValue)

# asp.net - 如何使用我的 asp.net 自定义控件（扩展 System.Web.UI.UserControl）？

> ID：12036040
> 
> 赞同：1
> 
> 时间：2012-08-20T10:29:34.873
> 
> 标签：asp.net, user-controls, custom-controls

我正在使用 asp.net 4，与 2010 相比。

我有一个网站项目，有一些分页（apsx）和WebServices（asmx）。

我正在尝试使用我的项目中包含的自定义 UserControl。

WebControl/UserControl 是一个普通的 c# 类，没有 aspx/ascx/asmx。该类配置如下：

```
public class DropDownMenu : UserControl 
```

这意味着它扩展了 System.Web.UI.UserControl，并且它覆盖了许多 UserControls 方法，例如 OnPreRender、OnLoad 等。

该文件编译正常，但我没有成功在 aspx 文件中使用它。

我尝试了以下方法：

```
 <%@ Register TagPrefix="My" TagName="DropDownMenu"  
Src="DropDownMenu.cs"%> 
```

但这确实有效。我收到一个运行时错误：

> 文件 'src' 在此处无效，因为它不公开类型。

我也试过

```
<%@ Register Assembly="DropDownMenu" Namespace="MyNameSpace" TagPrefix="My" %> 
```

我收到了运行时错误

> 无法加载文件或程序集“DropDownMenu”或其依赖项之一。该系统找不到指定的文件。

有谁知道我如何使用我的类作为 asp 标签/控件？我只想在 aspx 页面中使用以下内容：

> < 我的:DropDownMenu >

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T10:37:55.827

登记：

```
<%@ Register TagPrefix="My" Assembly="AssemblyName" NameSpace="NameSpace"%> 
```

这里包含程序集的名称`Assembly`和`NameSpace`定义控件类的命名空间，它们都不是控件本身的名称。请注意，程序集名称不包括文件扩展名。

用法：

```
<My:DropDownMenu ...> 
```

# .htaccess - .htaccess 程序斜线被添加到 url

> ID：12036042
> 
> 赞同：0
> 
> 时间：2012-08-20T10:29:38.423
> 
> 标签：.htaccess, mod-rewrite

我正在尝试编写以下内容`.htaccess`

```
RewriteRule ^follower/([A-Za-z0-9-]+)/?$ follower.php?username=$1 [NC,L] 
```

但它的执行就像`follower.php/?username=example`，所以我的页面 CSS 出现问题.. 总布局受到干扰！

这个问题有什么解决办法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:32:05.067

逃避你的斜线

```
RewriteRule ^follower\/([A-Za-z0-9-]+)\/?$ follower.php?username=$1 [NC,L] 
```

# javascript - 如何在 Android 上以编程方式退出全屏视频？

> ID：12036048
> 
> 赞同：3
> 
> 时间：2012-08-20T10:29:55.483
> 
> 标签：javascript, android, html5-video, fullscreen

我需要在结束时关闭全屏视频。

此代码适用于 iOS，但不适用于 Android

```
$("#myvideo").on("ended", function() {
    this.webkitExitFullScreen();
}); 
```

有没有办法在 Android 上以编程方式关闭视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:39:04.777

要退出全屏试试这个。

getWindow().addFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);

getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);

活动CurrentContentView.requestLayout();

# .net - MySQL Workbench 5.2.42 在 Win7 x64 上启动时崩溃

> ID：12036051
> 
> 赞同：2
> 
> 时间：2012-08-20T10:30:02.040
> 
> 标签：.net, windows, visual-c++, mysql-workbench

我有一个 win7 x64 系统（i3，nvidia 卡），我想使用 MySQL Workbench，但启动后它崩溃并显示以下消息：

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: MySQLWorkbench.exe
  Application Version:  5.2.42.9752
  Application Timestamp:    50243f32
  Fault Module Name:    wbprivate.be.dll
  Fault Module Version: 0.0.0.0
  Fault Module Timestamp:   50243a9e
  Exception Code:   c0000005
  Exception Offset: 0025e562
  OS Version:   6.1.7601.2.1.0.256.1
  Locale ID:    1049
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789 
```

我正在搜索这个问题，发现很少有可能的解决方案，比如删除 AppData 中的 Workbench 文件夹或重新安装 .NET 或从 Microsoft 重新安装 Visual C x86，但没有任何帮助。感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:55:47.880

您是否将 WB 下载为无安装程序的 zip 文件？问题可能是可执行文件（exe、dll 等）被 Windows 阻止并显示此警告“此文件来自另一台计算机，可能被阻止以帮助保护此计算机”。

如果您在解压缩内容之前解压缩您的 zip 文件，则不会阻止任何文件，并且希望 WB 可以正常运行。例如见[这篇文章](https://superuser.com/questions/38476/this-file-came-from-another-computer-how-can-i-unblock-all-the-files-in-a)。

# sharepoint - 如何从快速启动菜单中删除“列表”和“站点”节点？

> ID：12036052
> 
> 赞同：1
> 
> 时间：2012-08-20T10:30:01.487
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-api

我有自定义共享点站点 xml 模板。

当我根据我的网站模板创建自定义网站时的共享点。包括的功能：

```
 <Feature ID="22A9EF51-737B-4ff2-9346-694633FE4416">
      <!-- Publishing -->
      <Properties xmlns="http://schemas.microsoft.com/sharepoint/">
        <!--<Property Key="ChromeMasterUrl" Value="~SiteCollection/_catalogs/masterpage/my.master" />-->
        <Property Key="WelcomePageUrl" Value="$Resources:osrvcore,List_Pages_UrlName;/default.aspx" />
        <Property Key="PagesListUrl" Value="" />
        <Property Key="SimplePublishing" Value="true" />
        <!--<Property Key="DefaultPageLayout" Value="~SiteCollection/_catalogs/masterpage/my.aspx"/>-->
        <Property Key="EnableApprovalWorkflowOnDocuments" Value="false"/>
        <Property Key="EnableApprovalWorkflowOnImages" Value="false"/>
        <Property Key="EnableApprovalWorkflowOnPages" Value="false"/>
        <Property Key="EnableModerationOnDocuments" Value="false"/>
        <Property Key="EnableModerationOnImages" Value="false"/>
        <Property Key="EnableModerationOnPages" Value="true"/>
        <Property Key="EnableSchedulingOnDocuments" Value="false"/>
        <Property Key="EnableSchedulingOnImages" Value="false"/>
        <Property Key="EnableSchedulingOnPages" Value="true"/>
        <Property Key="RequireCheckoutOnDocuments" Value="false"/>
        <Property Key="RequireCheckoutOnImages" Value="false"/>
        <Property Key="RequireCheckoutOnPages" Value="false"/>
        <Property Key="VersioningOnPages" Value="MajorAndMinor"/>
      </Properties>
    </Feature>

    <Feature ID="541F5F57-C847-4e16-B59A-B31E90E6F9EA">
      <!-- Per-Web Portal Navigation Properties-->
      <Properties xmlns="http://schemas.microsoft.com/sharepoint/">
        <Property Key="InheritGlobalNavigation" Value="false"/>
        <Property Key="IncludeSubSites" Value="false"/>
        <Property Key="IncludePages" Value="false"/>
      </Properties>
    </Feature> 
```

而且我具有尝试添加节点的功能：

```
 private void ProvisionQuickLaunchLinks(SPWeb web)
    {
        var serverUrl = web.ServerRelativeUrl;
        SPSecurity.RunWithElevatedPrivileges(delegate()
        {
            using (SPSite impSite = new SPSite(web.Site.ID))
            {
                RemoveExistingNodes(web, impSite);

                using (SPWeb impWeb = impSite.OpenWeb(web.ID))
                {
                    if (impWeb != null && impWeb.Exists)
                    {
                        try
                        {
                            var isRoot = SiteHelper.GetIsProjectRootSite(web);
                            impWeb.AllowUnsafeUpdates = true;

                           AddQuickLink(impWeb, "My link", "/Lists/MyList/Forms/AllItems.aspx", Constants.Navigation.NavigationLinkKey, "/_layouts/temp/temp/img/menu_icon3.png");
                            impWeb.Update();
                        }

                        catch (Exception ex)
                        {
                            LoggingService.WriteError(ex, "Cannot remove links to navigation menu");
                        }
                        finally
                        {
                            if (impWeb != null)
                            {
                                impWeb.AllowUnsafeUpdates = false;
                            }
                        }
                    }
                }
            }
        });
    } 
```

添加之前，我要删除所有内容：

```
private static void RemoveExistingNodes(SPWeb web, SPSite impSite)
    {
        using (SPWeb impWeb = impSite.OpenWeb(web.ID))
        {
            if (impWeb != null && impWeb.Exists)
            {
                try
                {
                    var isRoot = SiteHelper.GetIsProjectRootSite(web);
                    impWeb.AllowUnsafeUpdates = true;

                    var quicklaunchCollection = impWeb.Navigation.QuickLaunch;
                    foreach (SPNavigationNode tempNode in quicklaunchCollection)
                    {
                        impWeb.Navigation.QuickLaunch.Delete(tempNode);
                        impWeb.Update();
                    }
                }
                catch (Exception ex)
                {
                    LoggingService.WriteError(ex, "Cannot remove links to navigation menu");
                }
                finally
                {
                    if (impWeb != null)
                    {
                        impWeb.AllowUnsafeUpdates = false;
                    }
                }
            }
        }
    } 
```

创建网站后的问题，我不仅有我的链接，还有“网站”和“列表”！但我不想拥有那些！请告知如何删除它们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:45:41.277

foreach 循环有问题。采用：

```
 for(int i = quicklaunchCollection.Count - 1; i >= 0; i--)
  {
     quicklaunchCollection[i].Delete();
  } 
```

# c# - 字符串的平均值，最大值，最小值，总和？

> ID：12036053
> 
> 赞同：-1
> 
> 时间：2012-08-20T10:30:05.067
> 
> 标签：c#, asp.net, asp.net-mvc

你好，我有一个字符串数组，它们是我自己制作的持续时间格式`H:M:S:MS`

示例字符串：

```
0:0:4:410
0:0:1:425
0:0:1:802
0:0:1:509
0:0:1:674
0:0:1:628
0:0:2:76 
```

我如何在arraylist中对这些项目进行**求和/平均/最小/最大值？**

数组列表名称是`arrayLL`.

我是 C# 的新手，所以希望有人能告诉我如何使用字符串。

添加到数组的函数是：

```
if (Session["DT"].ToString() != "")
{
    TimeSpan ts = ((DateTime)Session["DT2"]).Subtract((DateTime)Session["DT"]);

    Session["TimeL"] = ts.Hours.ToString() + ":" 
                            + ts.Minutes.ToString() + ":"
                            + ts.Seconds.ToString() + ":" 
                            + ts.Milliseconds.ToString();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:48:27.030

假设数字代表小时、分钟、秒和毫秒，您可以尝试以下操作：

```
// Empty list you will populate:
List<int> durationsInMilliseconds = new List<int>();

// Loop through your existing data, and calculate all
// durations into milliseconds:
foreach (string word in yourDurationArray)
{
    string[] values = s.Split(':');
    int hoursAsMilliseconds = Integer.parse(values[0]) * 60 * 60 * 1000;
    int minutesAsMilliseconds = Integer.parse(values[1]) * 60 * 1000;
    int secondsAsMilliseconds = Integer.parse(values[2]) * 1000;

    int sumDurationAsMilliseconds = hoursAsMilliseconds + 
                                    minutesAsMilliseconds + 
                                    secondsAsMilliseconds + 
                                    Integer.parse(values[3]);

    durationsInMilliseconds.add(sumDurationAsMilliseconds);
} 
```

现在您应该有一个 Integer ( `durationsInMilliseconds`) 类型的列表，其中包含单一可比较格式的数字。有了这个，您应该能够进行所需的任何计算。

*（PS：如果您需要与原始输入数据格式相同的结果，则必须添加一个从 MS 计算回小时、分钟和秒的操作..）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:31:54.357

因为我猜它们是持续时间所以我应该这样做

```
var enu_ts = yourvariable.OfType<string>().Select(x => 
             TimeSpan.Parse(x, @"h\:m\:s\:fff", CultureInfo.InvariantCulture)); 
```

最大限度

```
var max = enu_ts.Max().ToString(); 
```

敏

```
var max = enu_ts.Min().ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:32:37.097

```
foreach(string s in dateString)
{
   spanList[i] = TimeSpan.Parse(s);
   total=total.Add(spanList[i++]);
}

Response.Write("Max TimeSpan:"+spanList.Max<TimeSpan>());
Response.Write("Min TimeSpan:" + spanList.Min<TimeSpan>());
Response.Write("Total Sum of TimeSpan:"+total); 
```

# web-applications - Tomcat + Jboss 应用程序

> ID：12036061
> 
> 赞同：0
> 
> 时间：2012-08-20T10:31:07.353
> 
> 标签：web-applications, tomcat7, jboss7.x

对于一个 java web 应用程序项目，我们将 tomcat7 标识为 web 服务器，并将 jboss（7.1 版）标识为应用程序服务器。对于开发环境，两者都将在同一台机器上运行。我的问题是这样的设置需要做哪些配置？

Web 应用程序在表示层使用带有主要面孔的 JSF，在业务层使用 Spring

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:22:11.823

Tomcat 是一个 servlet 引擎，而不仅仅是一个简单的 Web 服务器。[JBoss AS](http://www.jboss.org/jbossas/)已经提供了一个 servlet 引擎作为 Java EE 规范的一部分。没有必要同时运行两者。事实上，JBoss AS 使用的是基于 Tomcat 的[JBossWeb 。](http://www.jboss.org/jbossweb/)

如果您正在为前端寻找一个 Web 服务器，[Apache HTTPD](http://httpd.apache.org/)可能是您要走的路，尽管它并不是真正需要的。

# ajax - JPlayer + Ajax 页面加载

> ID：12036063
> 
> 赞同：1
> 
> 时间：2012-08-20T10:31:19.100
> 
> 标签：ajax, callback, load, jplayer

我会尽量保持简短：

在 ajax 页面加载后，我将如何设法使 jPlayer (http://jplayer.org/) 的唯一实例“工作”？

我的 jPlayer 使用以下内联 javascript 代码：

```
<?
    $mp3    = get_post_meta(get_the_ID(), 'audio_mp3', TRUE);
    $ogg    = get_post_meta(get_the_ID(), 'audio_ogg', TRUE);

?>

<?php if($mp3 && $ogg) { ?>

<script type="text/javascript">
jQuery(document).ready(function($) {

        jQuery( '#jquery_jplayer_<?php the_ID(); ?>' ).jPlayer({
            ready: function() {
                jQuery(this).jPlayer('setMedia', {
                    mp3: "<?php echo ($mp3); ?>",
                    oga: "<?php echo ($ogg); ?>"
                    });
                },
            swfPath: "<?php echo get_template_directory_uri(); ?>/js/jplayer/",
            cssSelectorAncestor: "#jp_container_<?php the_ID(); ?>",
            supplied: "<?php if($mp3 != '') : ?>mp3, <?php endif; ?><?php if($ogg != '') : ?>oga, <?php endif; ?> all"
        });

});

</script> 
```

对于非独特的东西，例如漂亮的照片灯箱，我创建了一个函数 (prettyPhoto(); 我放入回调。但我似乎无法使用 jplayer！

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:24:38.990

我建议使用播放列表插件。

1.  创建一个空的播放器实例

    ```
    var jpplaylist = new jPlayerPlaylist({
        jPlayer: "#jquery_jplayer_1",
        cssSelectorAncestor: "#jp_container_1"
        }, [], {
            swfPath: "/path/to/swf",
            supplied: "mp3",
            wmode: "window"
        }); 
    ```

2.  加载 AJAX 页面后，使用 setPlaylist 函数添加曲目：

    ```
    jpplaylist.add({
        title:"Song Title",
        mp3:"http://example.com/example.mp3"
    }); 
    ```

完整的播放列表规格在这里：[http ://www.jplayer.org/latest/demo-02-jPlayerPlaylist/](http://www.jplayer.org/latest/demo-02-jPlayerPlaylist/)

# css - 基于带有伪类的订单号定位元素

> ID：12036067
> 
> 赞同：0
> 
> 时间：2012-08-20T10:31:36.450
> 
> 标签：css, pseudo-class

想象一下，我有一个嵌套了一堆段落的 div，我想选择第二、第四和第七个段落元素。

我知道你可以使用 nth-child 来选择一个嵌套元素，但只适用于一个。这行不通；

```
nth-child(2,4,7) 
```

如何选择多个特定元素。这可能吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:33:14.687

像这样的东西怎么样：

```
p:nth-child(2), p:nth-child(3), p:nth-child(8)
{
    background:#000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:33:44.343

阅读这篇文章，希望对您有所帮助：- [http://css-tricks.com/how-nth-child-works/](http://css-tricks.com/how-nth-child-works/)

你可以使用这个方法，就像下面提到的css这样，这将选择每隔一段。

```
p:nth-child(2n) {
            background:red;
            } 
```

[http://tinkerbin.com/8KzrmwdB](http://tinkerbin.com/8KzrmwdB)

# iis-6 - 未加载指定的模块“WebAdministration”（Windows 2003、IIS 6）

> ID：12036071
> 
> 赞同：1
> 
> 时间：2012-08-20T10:31:54.467
> 
> 标签：iis-6, powershell-2.0, windows-2003-webserver

我正在尝试在机器上运行一些 IIS 管理脚本 -

```
OS - Windows 2003(with SP2)
IIS - V6.0
Powershell - V2 
```

但是，当我运行以下命令时，出现错误 -

**- 导入模块 WebAdministration**

```
 **Error**:  
    Import-Module : The specified module 'WebAdministration' was not loaded because no valid module file was found in any module directory.
    At line:1 char:14 + Import-Module <<<<  WebAdministration
        + CategoryInfo          : ResourceUnavailable: (WebAdministration:String) [Import-Module], FileNotFoundException
    + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand 
```

**- 添加PSSnapIn WebAdministration**

```
 **Error:**  
      Add-PSSnapin : No snap-ins have been registered for Windows PowerShell version 2.
        At line:1 char:13 + Add-PSSnapIn <<<<  WebAdministration
        + CategoryInfo          : InvalidArgument: (WebAdministration:String) [Add-PSSnapin], PSArgumentException
        + FullyQualifiedErrorId : AddPSSnapInRead,Microsoft.PowerShell.Commands.AddPSSnapinCommand 
```

我检查了哪些模块/snapin 可用 - 这是结果 -

获取模块 -ListAvailable

```
Result:
    BitsTransfer 
```

获取 PSSnapIn

```
Result:
  Microsoft.PowerShell.Diagnostics
  Microsoft.WSMan.Management  
  Microsoft.PowerShell.Core
  Microsoft.PowerShell.Utility
  Microsoft.PowerShell.Host
  Microsoft.PowerShell.Management
  Microsoft.PowerShell.Security 
```

请指导我应该如何运行 IIS 管理脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:12:32.853

Below link says Powershell SnapIn is not available for IIS 6.0:

[http://forums.iis.net/p/1156851/1903821.aspx#1903821](http://forums.iis.net/p/1156851/1903821.aspx#1903821)

WMI is the option to go with IIS 6.0 administration.
But WMI is not the option for me as soon we will be upgrading to IIS 7.5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T03:51:55.550

在 Windows 2k3 平台上的 IIS6 中，我建议您尝试通过旧的 WMI 提供程序（“Microsoftiisv2”）或 ADSI 提供程序访问 IIS，因为两者都可以从 PowerShell 访问。

snapins 和 WebAdministration 模块都不适用于 IIS 6.0，因此我们可以使用 PowerShell 从 PowerShell 访问 IIS6 元数据库

对于IIS7.0，我们可以“导入WebAdministration”模块。

例如，我必须为 IIS6 的虚拟目录设置物理路径，所以我在 c:/Windows/System32 中使用了与 IIS6 一起提供的 vbs 脚本 iisvdir。

复制代码片段

```
Function resetSiteLocation ($newPath)
{     

Write-Host "List of Virtual directories for the site Test123 before reset :"

C:\WINDOWS\system32\iisvdir /query Test/Test123

Write-Host "About to reset site location"

C:\WINDOWS\system32\iisvdir /delete Test/Test123/Test1

C:\WINDOWS\system32\iisvdir /create Test/Test123 Test1 C:\projects\Test\Test123\Test1

C:\WINDOWS\system32\iisvdir /delete Test/Test123/Test2

C:\WINDOWS\system32\iisvdir /create Test/Test123 Test2 C:\projects\Test\Test123\Test2

Write-Host "Finished to reset site location"

Write-Host "List of Virtual directories for the site Test123 after reset :"

C:\WINDOWS\system32\iisvdir /query Test/Test123

} 
```

由于您将切换到更高版本的 IIS，因此您可以在代码中放置一个开关以确定 IIS 版本并采取适当的措施。

我这样做了：

```
Write-Host "Checking Installed IIS version:"

$iisVersion = Get-ItemProperty "HKLM:\SOFTWARE\Microsoft\InetStp";

Write-host IIS major version : $iisVersion.MajorVersion

Write-host IIS minor version : $iisVersion.MinorVersion

Write-Host "Finished the check."
## IIS inclusion module
## Neither snapins nor WebAdministration module is available for IIS 6.0, so we can access IIS6 metabase 
## from PowerShell using either old WMI provider ("Microsoftiisv2") or ADSI provider as both are accessible from the PowerShell.
## For IIS7.0, we can import WebAdministration module

if (($iisVersion.MajorVersion -eq 7 ) -or ($iisVersion.MajorVersion -ge 7 ))
{
Write-host Detected IIS Major Version : $iisVersion.MajorVersion and Minor version : $iisVersion.MinorVersion. Hence importing WebAdministration module.
Import-Module WebAdministration;

Write-Host "About to reset app pool"
Restart-WebAppPool("Application")
Write-Host "Finished resetting app pool" 
resetSiteLocation

Write-Host "About to reset site"
Restart-WebItem("IIS:\Sites\My application")
Write-Host "Finished to reset site"

}
elseif ($iisVersion.MajorVersion -eq 6) 
{
Write-host IIS version 6 detected. Hence accessing IIS metabase using old WMI provider 

##2\. Reset App Pool
Write-Host "About to reset app pool"

Write-Host "Finished resetting app pool" 

##3\. Reset site location
resetSiteLocation

##4.Reset site
Write-Host "About to reset site"

Write-Host "Finished to reset site"    
}
else
{
     Write-host Detected IIS $iisVersion.MajorVersion         
} 
```

让我知道它是否对您有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-29T19:53:19.700

以下是有关在 IIS 6 中使用 WMI 接口的一些有用信息：

[http://network-nick.blogspot.com/2015/01/powershell-and-iis-6.html](http://network-nick.blogspot.com/2015/01/powershell-and-iis-6.html)

他还指出了适用于此环境的 cmdlet 的 Microsoft 文档，如下所示：

[https://docs.microsoft.com/en-us/previous-versions/iis/6.0-sdk/ms525265(v=vs.90)](https://docs.microsoft.com/en-us/previous-versions/iis/6.0-sdk/ms525265(v=vs.90))

在本文中，他开发并解释了以下 PowerShell 脚本，用于列出服务器的网站及其虚拟目录。我实际上尝试过这个并且它有效。

```
$WebSiteID = Get-WmiObject -Namespace "root/MicrosoftIISv2" -Class IIsWebServer | Select-Object -ExpandProperty Name

ForEach ( $Site in $WebSiteID ) {
    $WebSiteName = Get-WmiObject -Namespace "root/MicrosoftIISv2" -Class IIsWebServerSetting | Where-Object { $_.Name -like "$site" } `
                    | Select-Object -Expandproperty ServerComment

    write-host "`r`n" $WebSiteName

    $AppPath = Get-WmiObject -Namespace "root/MicrosoftIISv2" -Class IIsWebVirtualDirSetting | Where-Object { $_.Name -like "$site/*" } `
                | select -expandproperty path

    $AppPath = $AppPath | select-object -unique | sort-object
    $AppPath
} 
```

# algorithm - 2D 环境中的蛇/蠕虫运动

> ID：12036073
> 
> 赞同：0
> 
> 时间：2012-08-20T10:32:00.493
> 
> 标签：algorithm, math, animation, graphics, 2d

这就是我的目标：我有多个精灵来制作人物。**第一个精灵（在n 个**精灵的数组上，其中**n**是段数）是头部，其他精灵必须跟随它。所以，如果头部改变他的角度然后移动（在头部指向的方向），其他精灵必须跟随头部，就像蛇/蠕虫一样。我正在用 cocos2D 做这个，但不是那么相关，因为我认为我没有这个概念，因为我知道 cocos2D，但这不是问题（不是框架）。那么，我该怎么做呢？其他精灵怎么能完美地跟随头部？游戏示例是 App Store 上的 Death Worm 或 Super Mega Worm

如果需要，我可以发布我正在使用的代码（效果不好）和结果的图像，但我不知道这是否需要。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:40:33.557

我会简单地将每个部分的所有位置存储在一个数组列表/向量中。on Draw 根据游戏计算计算下一个头部位置，然后删除列表中最旧的 (pos==0) 项目并在列表中的位置绘制精灵。

如果这看起来与 Alexey 的回答相似，我很抱歉，我只是认为这可能是一个更简单的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:24:05.600

您将需要手动设置构成人物的每个精灵的位置。必须在重复调用的计划方法中计算和设置新位置。

```
sprite.position = ccp(newX,newY); 
```

你也可以参考这个：[Cocos2D set sprite position in relative to another sprite](https://stackoverflow.com/questions/6511040/cocos2d-set-sprite-position-in-relation-to-another-sprite)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:47:38.130

为小动物的每个部分（包括头部）提供一组坐标。

如果它需要直线移动（不改变方向），则移动数组值，以便尾部（最后一个）段获取相邻段的坐标，该段获取其前段的坐标，依此类推，用于头部段你设置新的头部坐标，它等于旧坐标增加了方向向量 d：

```
dx dy direction  
 0 -1 up
 0 +1 down
-1  0 left
+1  0 right 
```

如果你想改变方向，适当改变方向向量，然后做同样的数组移位和头部坐标更新。

# macos - 将 packagemaker 与 cpack 一起用于 Mac OS X

> ID：12036076
> 
> 赞同：8
> 
> 时间：2012-08-20T10:32:08.197
> 
> 标签：macos, cmake, packagemaker, cpack

我需要使用 CPack 和 PackageMaker 作为生成器为 Mac OS X 的产品创建安装程序。我做了一些小工作，但我有很多事情想弄清楚。

```
set(CPACK_PACKAGE_NAME "MyApp")
  set(CPACK_PACKAGE_VERSION "${CPACK_PACKAGE_VERSION}") 
  set(CMAKE_INSTALL_PREFIX /Applications)
  set(CPACK_PACKAGING_INSTALL_PREFIX ${CMAKE_INSTALL_PREFIX})
  set(CPACK_RESOURCE_FILE_README "${PACKAGE_BINARY_DIR}/Readme.txt")
  set(CPACK_RESOURCE_FILE_LICENSE "${PACKAGE_BINARY_DIR}/EULA.txt")   
  set(CPACK_RESOURCE_FILE_WELCOME "${PACKAGE_BINARY_DIR}/Welcome.txt")
  set(CPACK_GENERATOR PackageMaker)

  install(DIRECTORY ${PACKAGE_BINARY_DIR}/my_app.app DESTINATION ${CMAKE_INSTALL_PREFIX}/)
  install(PROGRAMS ${PACKAGE_BINARY_DIR}/other_executable DESTINATION ${CMAKE_INSTALL_PREFIX}/my_app.app/Contents/MacOS/)
  install(FILES ${PACKAGE_BINARY_DIR}/com.my_app.my_app_daemon.plist DESTINATION ${CMAKE_INSTALL_PREFIX}/Resources) 
```

你能解释一下如何：

1.  如何将自定义图标添加到我的应用程序（打开应用程序目录时的那个）？
2.  如何为可视化安装程序添加自定义背景？
3.  如何正确使用安装后脚本的标志以使脚本正常工作？
4.  将“other_executable”添加到我的应用程序的最佳方法是什么？
5.  我是否使用正确的方式安装 my_app.app？
6.  如何将我的应用程序的快捷方式（或其他任何使用方式）添加到 Dock？

# c++ - 适用于 Windows 的 USB API

> ID：12036077
> 
> 赞同：12
> 
> 时间：2012-08-20T10:32:12.907
> 
> 标签：c++, c, windows, api, usb

Windows 上是否有用于 USB 设备的标准 API？我知道课程会对他们产生影响，但我根本找不到标准的一个/列表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T11:15:25.807

就在这里。

它被称为 WinUSB - [http://msdn.microsoft.com/en-us/library/windows/hardware/ff540196(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540196(v=vs.85).aspx)

在此处找到示例 WinUSB 代码 - [http://msdn.microsoft.com/en-us/library/windows/hardware/ff540174(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540174(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:42:39.603

所有 USB 设备都有唯一的 Pid、Vid。您可以使用通用库与我的端点交互我正在使用 cypress 库，它有 2 个版本用于托管和非托管语言。

[http://www.cypress.com/?rID=34870](http://www.cypress.com/?rID=34870)

请记住，如果仅与 cypress 供电的设备一起使用，此库的许可证是免费的。但是您可以检查它并使用本机 API 来实现相同的行为，但它支持一些很好的特性，特别是高速传输到批量端点。

还要检查这个问题 [Working with USB devices in .NET](https://stackoverflow.com/questions/68749/working-with-usb-devices-in-net)

# asp.net - 嵌套母版页中的事件处理 - 有什么更好的方法来做到这一点？

> ID：12036089
> 
> 赞同：2
> 
> 时间：2012-08-20T10:32:58.680
> 
> 标签：asp.net, vb.net, events, event-handling, master-pages

**简要问题***

通过一个或多个嵌套母版页在顶级母版页中引发事件时，您是否需要在嵌套母版页中捕获该事件并重新引发它？如果没有，采取什么更好的方法？

* 这是我希望在 SO.SE 上回答的问题 - 其余的只是为了提供更多背景信息来帮助解释它。

**详细的问题，带有示例**

母版页中的事件（我们称之为“TopLevel.master”）需要通过所有嵌套的母版页（假设只有一个并称之为“MidLevel.master”）触发到页面本身（Page.aspx）。我正在做的事情（如下）工作正常，但我担心我使用了错误的方法，这最终会在未来的某个时候咬住我*（*例如，当我来维护代码时） . 这也可能是一种成本更高的方法，因为在可能不需要的地方创建了几个额外的事件。

每个嵌套母版页和页面本身都有一个@MasterType 声明，因此母版页的公共属性、方法和事件可通过后面的代码获得。

到目前为止，我有一些类似（为简洁起见）的内容：

**顶级大师：**

```
' A public event available from this master page
Public Event MyEvent(sender As Object, e As EventArgs)

' A function that can be called via "Master.DoSomething" to initiate the process
Public Sub DoSomething(someArgs As Object)
    Me._DoSomething(someArgs)
End Sub

' A local function that starts the process. SomeEventFiringObject is
' just an object that fires an event when the process is complete.
Private Sub _DoSomething(someArgs As Object)
    _someEventFiringObject.DoSomething(someArgs)
End Sub

' A local function that handles the process-complete event fired by
' SomeEventFiringObject and fires my public masterpage event
Private Sub Me_HandleEvent(sender As Object, e As EventArgs) Handles _someEventFiringObject.HasDoneSomething
    RaiseEvent MyEvent(sender, e)
End Sub 
```

**中级大师：**

```
' Handle the event from the masterpage.
Private Sub Page_Init(sender As Object, e As EventArgs) Handles Me.Init
    AddHandler Master.MyEvent, AddressOf Master_MyEvent
End Sub

' A public event available from this master page 
' NOTE: This is essentially the same event as in the TopLevel master page.
Public Event MyEvent(sender As Object, e As EventArgs)

' A function that can be called via "Master.DoSomething" to initiate the process
' NOTE: Just passing this up to the TopLevel master page.
Public Sub DoSomething(someArgs As Object)
    Master.DoSomething(someArgs)
End Sub

' A local function that re-raises the event from this master page
' NOTE: Handler added on Page.Init.
Private Sub Master_MyEvent(sender As Object, e As EventArgs)
    RaiseEvent MyEvent(sender, e)
End Sub 
```

**页面.aspx：**

```
' EDIT: This needs to be done on Page.Init as well.
Private Sub Page_Init(sender As Object, e As EventArgs) Handles Me.Init
    AddHandler Master.MyEvent, AddressOf Master_MyEvent
End Sub

' Some process initiation (button click in this example could be anything)
' The master page does the deed and will eventually raise the MyEvent event.
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Master.DoSomething(someArgs)
End Sub

' The page handles the master MyEvent event (which is actually from MidLevel.master)
Private Sub Master_MyEvent(sender As Object, e As EventArgs)
    ' Finally I can do something with this event
End Sub 
```

**问题：**

在我看来，必须有某种方法可以访问在 TopLevel 母版页中触发的 MyEvent 事件，而不必在 MidLevel 母版页中有效地捕获它，然后创建一个新事件并将其复制以发送它，但我可以' t 似乎解决了。有没有办法做到这一点？还是我采取的方法足够有效？

我担心的是，我实际上在 MidLevel.master 中有两层母版页，因此似乎有很多复制的代码和几个事件被创建，除了传递事件之外似乎没有其他原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:20:00.790

好的，您需要的第一个是创建描述母版页常用功能的界面。像这样的东西：

```
public interface IMaster
{
    event EventHandler MyEvent;
} 
```

从该接口继承的 in top master page 定义您的事件：

```
private static readonly object MyEventObject = new object();

public event EventHandler MyEvent
{
    add
    {
        Events.AddHandler(MyEventObject, value);
    }
    remove
    {
        Events.RemoveHandler(MyEventObject, value);
    }
}

private void RaiseMyEvent()
{
    var handler = Events[MyEventObject] as EventHandler;
    if (handler != null)
    {
        handler(this, EventArgs.Empty);
    }
} 
```

然后在嵌套母版页中定义事件，但将其添加到调用列表中委托给父级

```
public event EventHandler MyEvent
{
    add
    {
        ((IMaster)Master).MyEvent += value;
    }
    remove
    {
        ((IMaster)Master).MyEvent -= value;
    }
} 
```

完成所有这些步骤后，您可以在页面上使用此事件：

```
protected void Page_Init(object sender, EventArgs e)
{
    ((IMaster)Master).MyEvent += new EventHandler(WebForm3_MyEvent);
} 
```

VB.NET版无接口

顶级大师：

```
<asp:Button runat="server" Text="Click Me" OnClick="FireMyEvent" />

Private ReadOnly MyEventObject As Object = New Object()

Public Custom Event MyEvent As EventHandler
    AddHandler(value As EventHandler)
        Events.AddHandler(MyEventObject, value)
    End AddHandler

    RemoveHandler(value As EventHandler)
        Events.RemoveHandler(MyEventObject, value)
    End RemoveHandler

    RaiseEvent(sender As Object, e As System.EventArgs)
        Dim handler As EventHandler = TryCast(Events.Item(MyEventObject), EventHandler)
        If Not handler Is Nothing Then
            handler(Me, EventArgs.Empty)
        End If
    End RaiseEvent
End Event

Protected Sub FireMyEvent(sender As Object, e As EventArgs)
    RaiseEvent MyEvent(Me, EventArgs.Empty)
End Sub 
```

嵌套大师：

```
Public Custom Event MyEvent As EventHandler
    AddHandler(value As EventHandler)
        AddHandler DirectCast(Master, TopMaster).MyEvent, value
    End AddHandler

    RemoveHandler(value As EventHandler)
        RemoveHandler DirectCast(Master, TopMaster).MyEvent, value
    End RemoveHandler

    RaiseEvent(sender As Object, e As System.EventArgs)
    End RaiseEvent
End Event 
```

内容页

```
Protected Sub Page_Load(sender As Object, e As EventArgs)
    AddHandler DirectCast(Master, MasterPage2).MyEvent, AddressOf Foobar

End Sub

Private Sub Foobar(sender As Object, e As EventArgs)
    Response.Write("MyEvent handled from top master page at " & DateTime.Now.ToLongTimeString())
End Sub 
```

# c - 我可以将 SIGCONT 发送到正在运行的进程吗？

> ID：12036090
> 
> 赞同：7
> 
> 时间：2012-08-20T10:33:03.353
> 
> 标签：c, linux, signals

我知道 SIGCONT 会继续之前由 SIGSTOP 停止的进程。我可以在没有 SIGSTOP 的情况下多次使用 SIGCONT 吗？即，以下序列是否有效？

```
SIGSTOP to process A : The process stops
SIGCONT to process A : Process resumes
SIGCONT to process A : Process already runs - this SIGCONT has no effect 
SIGCONT to process A : Process already runs - this SIGCONT has no effect 
...
SIGSTOP to process A : The process stops
SIGCONT to process A : Process resumes 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T10:37:09.240

你能行的。TLPI 说：

> 当发送到停止的进程时，该信号会导致进程恢复（即，重新安排在稍后的某个时间运行）。当被当前未停止的进程接收时，**默认情况下会忽略此信号**。一个进程可能会捕捉到这个信号，以便在它恢复时执行一些动作。

亚太地区：

> 请注意，如果进程停止，SIGCONT 的默认操作是继续进程；**否则，信号被忽略**。

# c# - 从 Web 服务向页面动态添加控件

> ID：12036093
> 
> 赞同：0
> 
> 时间：2012-08-20T10:33:23.820
> 
> 标签：c#, asp.net, vb.net

如果我从页面加载内部调用 webservise，如何让我的 ASP.net Web 服务向我的页面添加控件？

下面是我的代码的一个非常简化的版本。谢谢

```
''''''''''''''''''page code behind'''''''''''''''''''''''''''''''''''''''''''''''
    Partial Class _Default
        Inherits System.Web.UI.Page

        Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

            Dim m As New myWebService.Service

            m.DoThis()

        End Sub
    End Class

''''''''''''''''''''''Web service'''''''''''''''''''''''''''''''''''''''

Imports System.Web
Imports System.Web.Services
Imports System.Web.Services.Protocols

<WebService(Namespace:="http://test.org/")> _
<WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Public Class Service
     Inherits System.Web.Services.WebService

    <WebMethod()> _
    Public Function DoThis() As String

        Dim pg As Page = DirectCast(HttpContext.Current.Handler, Page)

        Dim txtb As HtmlButton = New HtmlButton()

        txtb.InnerText = "my bu-----tton"

        pg.Form.Controls.Add(txtb)

        Return "added"
    End Function

End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:39:34.323

网络服务的工作不是控制页面。

使用您的 Web 服务来决定是否应将某些控件添加到 Page，但将控件添加到 Page 的代码必须在 Page 内部。

如果是通用代码，可以添加到通用类或辅助函数中。

将 Web 服务视为您可以通过 Web 调用、传递参数和接收处理值的方法。

向页面添加控件并不能很好地满足 Web 服务的目的。

# php - 为什么 $_POST 从 ajax 请求中一无所获？

> ID：12036096
> 
> 赞同：1
> 
> 时间：2012-08-20T10:33:45.920
> 
> 标签：php, ajax, post

```
var httpRequest = new XMLHttpRequest();
httpRequest.onreadystatechange = action;
httpRequest.open('POST','/fetch_product_list.php','true');
httpRequest.send("var=5"); 
```

但在`fetch_product_list.php`， $_POST['var'] 什么都没有，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:38:24.277

您没有为请求正文包含内容类型。

```
httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T10:51:27.153

添加行：`httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");`因此代码如下所示：

```
var httpRequest = new XMLHttpRequest();
httpRequest.onreadystatechange = action;
httpRequest.open('POST','/fetch_product_list.php','true');
httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
httpRequest.send("var=5"); 
```

并在 php 中使用：`$_POST['var']`.

# ruby-on-rails - 从 link_to rails 3.1 刷新一个 div

> ID：12036100
> 
> 赞同：0
> 
> 时间：2012-08-20T10:33:58.010
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是一个试图在 Rails 中做一些小事情的新手，目前我创建了一个构建一些链接的应用程序，并且我想在单击它们时刷新 Div 的内容。

在我的 application.html.erb 我有下一个头的布局：

```
<%= stylesheet_link_tag    "application" %>
<%= javascript_include_tag "application" %>
<%= csrf_meta_tags %> 
```

（我已阅读有关更改 :defaults 的第二行的信息，但如果这样做，我会收到 404 错误 defauls.js）

我有一个 index.html.erb 用这个渲染一个部分：

```
<%= render :partial => 'masvisitadas' %> 
```

在我的 _masvisitadas.html.erb 我有生成链接的代码：

```
<%= link_to solution.SolutionName, "/soluciones/despliega/" + solution.Id.to_s, :remote=>true %> 
```

这会生成下一个 html：

```
http://localhost:3000/soluciones/despliega/501D0000000QWp6IAG 
```

在我的控制器中，我有下一个定义：

```
def despliega
    respond_to do |format|
        format.js {}
    end
end 
```

最后我创建了despliega.js.erb：

```
jQuery(function($) {
    var html = "<%= escape_javascript(render('despliega')) %>";
  $("#customTopLeft").prepend(html)
$("customTopLeft").html("<%= escape_javascript(render(:partial => 'despliega')) %>");

}); 
```

当我点击一个链接时，在网络服务器的日志中似乎一切顺利：

```
Started GET "/soluciones/despliega/501D0000000QXM0IAO" for 127.0.0.1 at 2012-08-
20 12:16:53 +0200
Processing by SolucionesController#despliega as JS
  Parameters: {"id"=>"501D0000000QXM0IAO"}
  Rendered soluciones/_despliega.html.erb (0.0ms)
  Rendered soluciones/_despliega.html.erb (0.0ms)
  Rendered soluciones/despliega.js.erb (15.6ms)
Completed 200 OK in 31ms (Views: 31.3ms | ActiveRecord: 0.0ms) 
```

在萤火虫中，我可以看到有任何错误的调用，但什么也没发生。这让我很头疼:) 提前感谢您在这里提供的任何帮助。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:43:30.983

_despliega.html.erb 中有什么？

尝试将 despliega.js.erb 更改为此（并且仅此）：

```
$('#customTopLeft').html("<%= escape_javascript(render :partial => 'despliega') %>"); 
```

编辑 - 哦，确保你包含了 jQuery 库..

# c++ - 来自 Boost 的 typedef'ing basic_ptree

> ID：12036108
> 
> 赞同：1
> 
> 时间：2012-08-20T10:34:35.013
> 
> 标签：c++, templates, boost, compiler-errors, boost-propertytree

我正在为一个项目使用 Boost.PropertyTree，我想对 Key 和 Data 使用用户定义的类型，而不是 Boost 在 ptree typedef 中使用的 std::string。

但是，当我自己 typedef basic_ptree 时，会出现以下编译器错误：

```
1>  main.cpp
1>c:\boost_1_49_0\boost\property_tree\ptree.hpp(82): error C2027: use of undefined type 'boost::property_tree::path_of<Key>'
1>          with
1>          [
1>              Key=int
1>          ]
1>          c:\users\mathias\documents\visual studio 2012\projects\testappern\testappern\main.cpp(10) : see reference to class template instantiation 'boost::property_tree::basic_ptree<Key,Data>' being compiled
1>          with
1>          [
1>              Key=int,
1>              Data=int
1>          ]
1>c:\users\mathias\documents\visual studio 2012\projects\testappern\testappern\main.cpp(13): error C2664: 'boost::property_tree::basic_ptree<Key,Data>::add_child' : cannot convert parameter 1 from 'int' to 'const boost::type &'
1>          with
1>          [
1>              Key=int,
1>              Data=int
1>          ]
1>          Reason: cannot convert from 'int' to 'const boost::type'
1>          The target type has no constructors
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

以下代码片段显示了我如何 typedef basic_tree 并获取编译器错误的示例：

```
#include <iostream>
#include <boost\property_tree\ptree.hpp>

using namespace boost::property_tree;

typedef basic_ptree<int, int> IntTree;

int main(int argc, char* argv[])
{
    IntTree tree;
    IntTree child;
    int index = 42;
    tree.add_child(index, child);

    return 0;
} 
```

所以我的问题是，我如何正确地键入它？如果有兴趣，我正在运行 MSVC 2012。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:44:29.823

根据 的内容`boost/property_tree/ptree_fwd.hpp`，如果你想使用自定义类型作为键，你应该遵循这个：

```
/// If you want to use a custom key type, specialize this struct for it
/// and give it a 'type' typedef that specifies your path type. The path
/// type must conform to the Path concept described in the documentation.
/// This is already specialized for std::basic_string. 
```

所以不能简单地使用int。如代码所述，请参阅文档以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-03T16:35:42.617

这是一个例子 `basic_ptree <int, int>`

```
//path class must conform Path concept
template<> class boost::property_tree::path_of < int >
{
public:
    typedef int key_type;
    typedef boost::property_tree::path_of < int > type;
    boost::property_tree::path_of<int>(vector<int>& vals)
    {
        std::transform(vals.begin(), vals.end(), back_inserter(_impl),  
            [&](int v) -> int{ return v; });
    }
    key_type reduce()   
    {
        key_type res = *_impl.begin();
        _impl.pop_front();
        return res;
    }
    bool empty() const
    {
        return _impl.empty();
    }
    bool single() const
    {
        return _impl.size() == 1;
    }
    std::string dump() const
    {
        std::string res;
        std::for_each(_impl.begin(),
        _impl.end(), [&res](key_type k) -> void
        {
            res.append(".");
            res.append(boost::lexical_cast<std::string>(k));
        });
        return res;
    }
    private:
         deque<key_type> _impl;
};
//usage:
typedef boost::property_tree::basic_ptree < int, int> custom_int_tree_t
//or 
typedef boost::property_tree::basic_ptree < int, void*> custom_int_tree2_t 
```

# c# - 所需标签的正则表达式模式

> ID：12036110
> 
> 赞同：0
> 
> 时间：2012-08-20T10:34:50.863
> 
> 标签：c#, regex, tags

豪齐特，

我需要以下帮助。

我需要在字符串中查找标签。这些标签以 开头`{{`和结尾`}}`，我收到的字符串中会有多个标签。

到目前为止我有这个，但它没有找到任何匹配，我在这里错过了什么？

```
List<string> list = new List<string>();

string pattern = "{{*}}";

Regex r = new Regex(pattern, RegexOptions.IgnoreCase);
Match m = r.Match(text);

while (m.Success)
{
    list.Add(m.Groups[0].Value);

    m = m.NextMatch();
}

return list; 
```

甚至尝试过`string pattern = "{{[A-Za-z0-9]}}";` thanx

PS。我对正则表达式几乎一无所知。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T10:40:24.293

您不仅要使用 {{.+?}} 作为您的正则表达式，还需要传递 RegexOptions.SingleLine。这会将您的整个字符串视为单行，而 . 将匹配 \n （通常不会这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:36:50.947

试试`{{.+}}`。这`.+`意味着必须至少有一个字符作为标签的一部分。

编辑：

要捕获包含您的标签的字符串，您可以这样做`{{(.+)}}`，然后使用 Tokenize 或 Scanner 类标记您的匹配项？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T10:56:13.067

我建议尝试以下方法：

```
List<string> list = new List<string>();

string pattern = "{{(.*?)}}";

Regex r = new Regex(pattern, RegexOptions.IgnoreCase);
Match m = r.Match(text);

while (m.Success)
{
    list.Add(m.Groups[1].Value);

    m = m.NextMatch();
}

return list; 
```

正则表达式指定：

```
{{       # match {{ literally
(        # begin capturing into group #1
  .*?    # match any characters, from zero to infinite, but be lazy*
)        # end capturing group
}}       # match }} literally 
```

“懒惰”意味着尝试在“ `}}`”之后继续匹配模式，然后再回溯到并且*仅*当字符不匹配时才`.*?`不情愿地将字符添加到捕获组- 希望这是有道理的。*`}}`*

 *我通过修改正则表达式更改了您的代码，并从正则表达式匹配对象（ ）中提取了*第一个匹配组*`m.Groups[1].value`，而不是整个匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T10:38:36.983

`{{.*?}}`或者 `{{.+?}}`

. - 表示任何符号

? - 表示懒惰（不要忽略下一个模式）*

# msbuild - MSBuild - 解决方案的项目特定目标不起作用

> ID：12036112
> 
> 赞同：27
> 
> 时间：2012-08-20T10:34:57.063
> 
> 标签：msbuild, msbuild-wpp

我有一个包含多个项目的解决方案，包括一个 Web 应用程序。我希望 MSBuild 对 Web 应用程序项目执行“WebPublish”目标，并为解决方案中的所有其他项目执行“默认目标”。

[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms171486.aspx)说我可以指定命令行

```
msbuild SlnFolders.sln /t:NotInSlnfolder:Rebuild;NewFolder\InSolutionFolder:Clean 
```

但我永远无法让它工作 - MSBuild 返回一个错误，类似于“NotInSlnFolder:Rebuild”目标不存在。指定什么目标（构建、重建或清理）并不重要——它在任何情况下都不起作用。

如何实现为解决方案指定项目特定目标的目标？

MSDN 文档不起作用。还是我错过了什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-22T21:51:01.183

*注意：此解决方法不受 Microsoft 官方支持，因此不能保证它会永远有效。*

* * *

### 简答

在包含 SLN 文件的文件夹中，创建文件`before.{YourSolution}.sln.targets`，其内容如下：（将大括号中的内容替换为您需要的任何内容。）

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="{MyCompany_MyProduct_WebApp:WebPublish}">
    <MSBuild
        Condition="'%(ProjectReference.Identity)' == '{$(SolutionDir)MyCompany.MyProduct.WebApp\MyCompany.MyProduct.WebApp.csproj}'"
        Projects="@(ProjectReference)"
        Targets="{WebPublish}"
        BuildInParallel="True"
        ToolsVersion="4.0"
        Properties="BuildingSolutionFile=true; CurrentSolutionConfigurationContents=$(CurrentSolutionConfigurationContents); SolutionDir=$(SolutionDir); SolutionExt=$(SolutionExt); SolutionFileName=$(SolutionFileName); SolutionName=$(SolutionName); SolutionPath=$(SolutionPath)"
        SkipNonexistentProjects="%(ProjectReference.SkipNonexistentProjects)" />
  </Target>
</Project> 
```

之后，您可以执行命令行：

```
msbuild {YourSolution}.sln /t:{MyCompany_MyProduct_WebApp:WebPublish} 
```

* * *

### 长答案

如果添加*环境变量* `MSBUILDEMITSOLUTION`，将其值设置为 1，MSBuild 将不会删除为解决方案和项目生成的临时文件。

这将允许您查找在解决方案文件夹中生成`{YourSolution}.sln.metaproj`的`{YourSolution}.sln.metaproj.tmp`文件，这些文件只是标准的 MSBuild 项目文件。

对于*MSBuild 3.5*`{YourSolution}.sln.cache` ，无论环境变量如何，都会保留生成的文件。分析这些文件，您将了解流程的底层细节并查看可用的定制机会。

在 .Metaproj 文件中使用某些特定于项目的目标执行 MSBuild 后，您会发现特定于**项目的目标列表是硬编码的**，并且**仅支持标准目标**（构建、重建、清理、编译、发布；注意：发布和 WebPublish不一样）。*MSBuild 3.5*仅生成 Clean、Rebuild 和 Publish 目标以及*仅具有项目名称的目标，即“构建”。*

您还可以看到这`NotInSlnfolder:Rebuild`只是*一个自动生成的目标的名称*。实际上，MSBuild 不会解析它，也不关心项目名称和位置。另请注意，*自动生成的目标名称指定具有解决方案文件夹层次结构的项目名称（*如果它在一个中），例如`SolFolder\SolSubfolder\ProjectName:Publish`.

您会发现另一件至关重要的事情：MSBuild 目标名称**不支持点**。*项目名称中的所有点都替换为下划线*。例如，对于一个名为的项目，`MyCompany.MyProduct.Components`您必须在命令行中指定：

```
/t:MyCompany_MyProduct_Components:Rebuild 
```

这就是为什么即使是标准的项目特定目标 Build 也不起作用 - 我的项目名称包含*点*。

分析 file `{YourSolution}.sln.metaproj.tmp`，您会发现在运行时它会尝试从名为`before.{YourSolution}.sln.targets`and的文件中导入目标`after.{YourSolution}.sln.targets`，如果这些文件存在的话。这是解决此 MSBuild 限制/错误的关键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-15T12:45:17.680

您可以在文本编辑器中打开解决方案文件并检查以下行是否存在，如果不存在，则可以添加

`<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />``<Project>`标签内。

希望这对您有所帮助。

# php - 如何在 PHP 中找到数组的模式

> ID：12036114
> 
> 赞同：5
> 
> 时间：2012-08-20T10:35:02.360
> 
> 标签：php, arrays, mode

我有一个从低到高排序的数组，其中包含超过 260k 的值。我已经找到了数组的平均值（平均值）和中位数，只需要找出模式？

我不能使用 PHP 拥有的任何数学函数，它必须全部手动完成。

我想要它，所以可能只有一个值是模式，但可能有多个值可以是模式。我还需要能够记录值被存储的次数。例如数字 51 出现 6 次，所以我可以打印这两个值。

到目前为止，这是我的代码：

```
$amountRecords = 0;
$totalValue = 0;
$valueArray = array();

// reads in csv file
$handle = fopen('Task1-DataForMeanMedianMode.csv', 'r');
// to skip the header names/values
fgetcsv($handle);

// creates array containing variables of csv file in ascending order
while(($row = fgetcsv($handle, "\r")) != FALSE)
{

    // if amountRecords equals 0
    if($amountRecords == 0)
    {

        // adds value from csv to array
        $valueArray[] = $row[1];

    } // else amountRecords does not equal 0
    else 
    {

        // if the value in array location before is greater than the current value from the csv file
        if($valueArray[$amountRecords - 1] > $row[1])
        {

             // the current array location becomes the one in the location before
             $valueArray[] = $valueArray[$amountRecords - 1];
             // add the value from the csv to the location before
             $valueArray[$amountRecords - 1] = $row[1];

         } // if the value in the location before is not greater than the current value in the csv file
         else 
         {

             // adds value from csv to array
             $valueArray[] = $row[1];

         }

    }

    // calculates the total value of the values in csv file
    $totalValue = $totalValue + $row[1];
    // calculates the number of values in the csv file
    $amountRecords++;

}    

// calculate average value of payments
$averageValue = $totalValue / $amountRecords;
// limit integer to 2 decimal place
$average = number_format($averageValue,2,'.','');

// finds middle value
$middle = floor(($amountRecords / 2) - 1);

// calculates the median value
// if array size is even
if($amountRecords % 2 == 0)
{

    // calculates median
    $median = $valueArray[$middle];

} 
else // if array size is odd
{

    // calculate low and high values
    $low = $valueArray[$middle];
    $high = $valueArray[$middle + 1];
    // calculates median
    $median = (($low + $high) / 2);

}

// works out mode
// creates array count
$count = array();
// for each value in the valueArray
foreach( $valueArray as $value )
{

    if( isset( $count[$value] ))
    {

        $count[$value]++;

    }
    else
    {

        $count[$value] = 1;

    }

}

$mostCommon = "";
$iter = 0;

foreach( $count as $k => $v )
{

     if( $v > $iter )
     {

         $mostCommon = $k;
         $iter = $v;

     }

}

$modeArray = array( "mode" => $mostCommon , "count" => $iter ); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-20T10:39:06.353

数字集的众数是出现频率最高的数字。您可以使用 PHP 使用类似于以下的代码执行此操作：

```
$values = array_count_values($valueArray); 
$mode = array_search(max($values), $values); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-31T05:15:28.967

简单的！

```
$arr = array(4,6,7,1,4,7,4,7,1);
$freq = array();
for($i=0; $i<count($arr); $i++)
{
   if(isset($freq[$arr[$i]])==false)
   {
       $freq[$arr[$i]] = 1;
   }
   else
   {
       $freq[$arr[$i]]++;
   }
}
$maxs = array_keys($freq, max($freq));

for($i=0; $i<count($maxs); $i++)
{
   echo $maxs[$i] . ' ' . $freq[$maxs[$i]];
   echo '<br />';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-11T10:14:03.133

仅数学解决方案：

```
 //sample data
$dataArr = ["1", "3", "5", "1", "3", "7", "1", "8", "1"];

//a multidimensional array to hold the keys (extracted fro above) and their values (number of occurrences)
$multiDArr = [];
for ($i = 0; $i < count($dataArr); $i++) {
    $key = $dataArr[$i];

    if (isset($multiDArr[$key])) {
        //key already exists; increment count of its value
        $multiDArr[$key] = $multiDArr[$key] + 1;
    } else {
        //key does nto exist; add it and an inital value of 1
        $multiDArr[$key] = 1;
    }
}

$highestOccuring = 0;
$highestOccuringKey = null;
foreach ($multiDArr as $key => $value) {

    if ($value > $highestOccuring) {
        $highestOccuring = $value;
        $highestOccuringKey = $key;
    }

}

echo "MODE / highest occuring key: " . $highestOccuringKey; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-30T12:09:00.287

```
/** find array mode, most often see value
 * @param list(int) $a_in
 * @return list(int)
 */
function array_mode(array $a_in): array{
    $a_freq = [];
    foreach( $a_in as $v ) {
        if (!isset($a_freq[$v])) {
            $a_freq[$v] = 0;
        }
        $a_freq[$v]++;
    }
    $a_maxs = array_keys($a_freq, max($a_freq));
    return $a_maxs;
}
// test code
$a_in = [4,6,7,1,4,7,4,7,1];
array_mode( $a_in); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-30T19:52:12.590

这将获取值并将其转换为模式数组。例如：`print_r(get_mode(1,2,2,3,3,3,4,4,5,5,5,6,7,8,9));`将返回，

```
Array
(
    [0] => Array
        (
            [value] => 3
            [count] => 3
        )

    [1] => Array
        (
            [value] => 5
            [count] => 3
        )

) 
```

代码：

```
function get_mode(...$inputArray){
    $max=0;
    return array_reduce(
        array_values(array_reduce(array_values($inputArray),function($talliedArray,$inputNode){
            if(isset($talliedArray[(string)$inputNode])) 
                $talliedArray[(string)$inputNode]['count']++;
            else 
                $talliedArray[(string)$inputNode] = [
                    'value' => $inputNode,
                    'count' => 1
                ];
            return $talliedArray;
    },[])),function($modeArray,$talliedNode)use(&$max){
        if($talliedNode['count'] < $max) return $modeArray;
        if($talliedNode['count']=== $max) return array_merge($modeArray,[$talliedNode]);
        //if count > $max
        $max = $talliedNode['count'];
        return [$talliedNode];
    },[]);
} 
```

这满足了*“无数学函数”*、*“多种返回模式”*和*“有返回值和出现次数”*。

这只适用于字符串和数字。布尔值、对象和数组会变得很奇怪。

# python - 使用正则表达式搜索 CSV 文件

> ID：12036116
> 
> 赞同：0
> 
> 时间：2012-08-20T10:35:20.053
> 
> 标签：python, regex

我正在尝试编写一个 python 脚本，该脚本将使用正则表达式搜索 .csv 文件以搜索特定字符串。

```
 for csv in glob.glob('C:\\Upload\\Uploads\\.csv'):
l = re.compile('[Longitude] + [Latitude]*', re.IGNORECASE)
f = re.match('[Longitude] + [Latitude]*', bFile, re.IGNORECASE)

    for csv in glob.glob('C:\\Upload\\Uploads\\.csv'):
m = re.compile('[!]+[@]+[#]+[$]+[%]+[^]+[&]+[*]+[(]+[)]+[{]+[}]',re.IGNORECASE)
n = re.search('[!]+[@]+[#]+[$]+[%]+[^]+[&]+^*]+[{]+[}]',bFile, re.IGNORECASE) 
```

bFile 变量是我要搜索的 .csv 文件。

我正在尝试搜索经度和纬度作为字段名称，然后在 .csv 中搜索第二个表达式中的任何字符。我实际上很难让表达式准确地搜索 .csv 文件。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:58:16.907

稍微简单一点的东西怎么样？

```
# iterates over every csv file
for csv in glob.glob('C:\\Upload\\Uploads\\.csv'):
    # opens the file
    with open(csv, "r") as csv_reader:
        # iterates over every line in the file
        for line in csv_reader:
            # turns each line into a list of elements
            elements_in_line = line.strip("\r\n").split(",")
            # iterates over each element of each line of each file
            for element in elements_in_line:
                #you can do your code or what you want here. 
```

虽然你的问题很难理解，具体来说，你到底在搜索什么——因为你的正则表达式看起来不太好。这可能会对您有所帮助。您可以决定要搜索的迭代级别。例如，您甚至不需要使用正则表达式。

```
if "longitude" in element: 
```

可以正常工作。

# msbuild - TFS2010 使用 ClickOnce 签名构建 Excel 加载项

> ID：12036117
> 
> 赞同：0
> 
> 时间：2012-08-20T10:35:22.220
> 
> 标签：msbuild, clickonce

ClickOnce 清单和我们的构建服务器有问题。

我们有一个 .p12 代码签名证书（与 .pfx 相同）。我可以在开发人员机器上分配此证书：

> Visual Studio->Project->Properties->Signing->Select from file，然后输入证书的密码。

一切都在本地构建/发布。

但是，当将所有文件签入到我们的 TFS 构建服务器时，自动构建会生成此错误：

> 无法导入以下密钥文件： 。密钥文件可能受密码保护。要更正此问题，请尝试再次导入证书或手动将证书导入当前用户的个人证书存储区。

有没有办法将密码传递给构建定义，以便对构建的程序集进行签名？

此外，每个“获取最新”的开发人员目前每次都需要使用正确的密码重新签署程序集，有没有更好的方法？

> 笔记：
> 
> *   构建服务器没有 Visual Studio。
> *   我尝试在运行构建的帐户下手动将证书导入个人证书文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:04:56.440

这就是解决我的问题的原因：

1 ) 以 TFS 构建控制器帐户登录并在那里手动安装证书。

2) 对于一些较旧的证书，根授权（链接）可能存在问题，在这种情况下，从您的证书颁发者处下载根证书，可能还有中间证书。

3) 确保运行“Visual Studio Team Foundation Build Service Host”服务的计算机/虚拟机在安装了证书的帐户下运行。在我们的例子中，这与构建控制器帐户相同。

# qt - QSortFilterProxyModel 并按整数、布尔值过滤

> ID：12036119
> 
> 赞同：2
> 
> 时间：2012-08-20T10:35:34.480
> 
> 标签：qt, qsortfilterproxymodel

我有一个`QSortFilterProxyModel`连接到一个`QSqlQueryModel`. 在基础查询中有布尔和整数字段。我想按这些布尔值、整数等值进行过滤。令人惊讶的是（或者我错了）`QSortFilterProxyModel`仅按字符串过滤。例如，如果您想过滤 ID（通常是整数），这就是一个“问题”。例如，如果您尝试过滤`ID=22`，您将获得所有内部带有“22”的 ID（122、222、322 等）。请参阅[此链接](http://qt-project.org/forums/viewthread/5046)以获取非非常优雅的解决方案。

但是您将如何按布尔字段过滤？有人可以给点提示吗？我想我必须子类化`QSortFilterProxyModel`，还是有另一种方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-30T09:17:06.400

有点晚了，但它可能对其他人有用（也许一些真正的专家可能会增加精度/更正）！

**QSortFilterProxyModel**实例使用该方法

```
bool QSortFilterProxyModel::filterAcceptsRow(int source_row, const QModelIndex & source_parent) 
```

确定是否应该保留给定的行。默认情况下，它只会测试返回的字符串

```
myProxyModel.data(source_row, QtCore.Qt.DisplayRole) 
```

匹配您之前可能使用的正则表达式

```
myProxyModel.setFilterRegExp(myRegex) 
```

由于您正在**继承**此**QSortFilterProxyModel**，因此您可以轻松定义一种新方法来过滤您的项目。

添加一个方法来设置你要检查的ID

```
myProxyModel.setFilterID(myRefId) 
```

然后覆盖**filterAcceptsRow**以针对 ID 而不是正则表达式进行测试！

您可能还希望保持这两种方法（或更多）可用。为此，请在您的**filterAcceptsRow** 方法中从

```
myProxyModel.data(source_row, QtCore.Qt.UserRole) 
```

而不是**DisplayRole**。设置**UserRole**时，您可以存储任何数据，而不仅仅是字符串。这是一个示例（在 python 中，它更短，但在任何语言中都一样），我们将自定义代理对象存储到模型中：

```
from PyQt4 import QtGui
from PyQt4 import QtCore

class MyDummyObj(object):

    def __init__(self, objLabel, objID, hidden=False)
        self.__label = objLabel
        self.__id = objLabel
        self.__hidden = hidden

    def getLabel(self):
        return self.__label

    def getID(self):
        return self.__id

    def isSecret(self):
        return self.__hidden

class MyProxyModel(QtGui.QSortFilterProxyModel):

    def __init__(self):
        super(MyProxyModel, self).__init__()
        self.__testID = None
        self.__showHidden = False

    def setFilterID(self, filterID):
        self.__testID = filterID

    def showHiddenRows(self, showHidden=False)
        self.__showHidden = showHidden

    def filterAcceptsRow(self, sourceRow, sourceParent):
        model = self.sourceModel()
        myObject = model.data(model.index(sourceRow, 0, sourceParent),
                              QtCore.Qt.UserRole).toPyObject()

        if not self.__showHidden:
            if myObject.isSecret():
                return False

        if self.__testID is not None:
            return self.__testID == myObject.getID()

        return self.getFilterRegExp().exactMatch(myObject.getLabel()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-28T13:12:27.840

一个简单的解决方案是将正则表达式与开始和结束锚点一起使用：

```
 proxyModel->setFilterRegExp(QString("^%1$").arg(id)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-05T14:59:50.163

[您可以使用setFilterFixedString](https://doc.qt.io/qt-5/qsortfilterproxymodel.html#setFilterFixedString)明确过滤布尔角色：`filterModel->setFilterFixedString("false")` 或`filterModel->setFilterFixedString("true")`根据需要。

# clearcase - 将结账转移到不同的分行

> ID：12036120
> 
> 赞同：1
> 
> 时间：2012-08-20T10:35:35.970
> 
> 标签：clearcase

对于一项功能，我已经检查了 X 分支上的文件。经过一些实施，我意识到我应该分支到 Y。我想将我的更改迁移到正确的分支。我知道的唯一解决方案是备份我的更改，撤消结帐并分支到 Y 并恢复我的更改。有没有其他简单的方法？

Clearcase 版本是 Windows XP 的 7.1.1.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:52:04.623

您可以简单地更改视图的配置规范（以确保在新分支中完成任何结帐）

首先撤消签出所有文件，`-keep`以保留您的更改。
然后更新配置规范。
这将更新您的视图（如果它是快照视图，则重新加载它），但**不会触及/擦除您当前拥有的任何本地修改**（即您在前一个分支中签出的文件）。
然后，您可以再次签出这些文件，然后将它们签入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:42:26.467

创建分支 Y 后，您始终可以直接从 X 合并到 Y。您可能希望分支 Y 与分支 X 在同一点分支。

虽然你仍然有分支 X，但你可以[删除它](http://www.philforhumanity.com/ClearCase_Support_49.html)。

如果您想使用备份方法，我发现 WinMerge 的文件夹比较实用程序最快。不过，如上所述的 MergeManager 应该做同样的事情。

# bash - 限制 bash 脚本中的并发进程数

> ID：12036124
> 
> 赞同：1
> 
> 时间：2012-08-20T10:35:48.897
> 
> 标签：bash, solaris

我正在尝试使用 bash 脚本并行执行多项工作。这些作业是内存密集型的，所以我需要控制一次启动的数量。我所拥有的如下，它可以广泛使用，但有时延迟循环不知道刚刚启动的作业，因此启动了几个额外的作业，导致系统内存不足。

在延迟循环中的 while 语句之前添加一个 sleep 可以减少这个问题，但并不能完全消除它。任何人都知道治愈这种情况的方法。如果相关的话，我正在 Solaris 上运行。

```
#!/bin/bash
delay(){
while [ 8 -le $(ps -ef |grep  myjob |wc -l) ]
do
sleep 1
done
}

./myjob -params1 &
delay
./myjob -params2 &
delay
./myjob -params3 &
delay
./myjob -params4 &
delay
.
.
. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:13:09.310

GNU`parallel`实用程序[http://www.gnu.org/software/parallel/](http://www.gnu.org/software/parallel/)可能是正确的工具，因为可以说它比 xargs 更易于使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:38:11.710

用于`xargs`执行此操作。传递它`-n 1`以指示每个作业一个参数，并使用该`--max-jobs`参数指定并发进程的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:01:49.100

根据 a 制定您的脚本，`makefile`并通过[Parallel Execution](http://www.gnu.org/software/make/manual/html_node/Parallel.html#Parallel)`make -j N`对其进行整理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-20T20:01:24.513

首先，我将给您一个精简的示例，说明我在几个 linux 脚本中所做的事情。这**应该**适用于 solaris，但我目前没有任何系统可以测试。我修改了一些使用 /proc 的东西，所以如果有什么不起作用，请告诉我。

```
#!/bin/bash

# set the max # of threads
max_threads=4
# set the max system load
max_load=4

print_jobs(){
# flush finished jobs messages
  jobs > /dev/null
  for x in $(jobs -p) ; do
   # print all jobs
    echo "$x"
  done
}

job_count(){
  cnt=$(print_jobs $1)
  if [ -n "$cnt" ]; then
    wc -l <<< "$cnt"
  else
    echo 0
  fi
}

cur_load(){
  # get the 1 minute load average integer
  uptime |sed 's/.*load average[s]*:[[:space:]]*\([^.]*\)\..*/\1/g'
}

main_function(){
 # get current job count and load
  jcnow=$(job_count)
  loadnow=$(cur_load)

 # first, enter a loop waiting for load/threads to be below thresholds
  while [ $loadnow -ge $max_load ] || [ $jcnow -ge $max_threads ]; do
    if ! [ $firstout ]; then
      echo "entering sleep loop. load: $loadnow, threads: $jcnow"
      st=$(date +%s)
      local firstout=true
    else
      now=$(date +%s)
     # if it's been 5 minutes, echo again:
      if [ $(($now - $st)) -ge 300 ]; then
        echo "still sleeping. load: $loadnow, threads: $jcnow"
        st=$(date +%s)
      fi
    fi
    sleep 5s

   # refresh these variables for loop
    loadnow=$(cur_load)
    jcnow=$(job_count)
  unset firstout
  done

  ( ./myjob $@ ) &
}

# do some actual work
for jobparams in "params1" "params2" "params3" "params4" "params5" "params6" "params7" ; do
   main_function $jobparams
done

wait 
```

几个警告：

*   你应该捕获信号，这样你就可以杀死子进程。我不知道如何在 solaris 中执行此操作，但这适用于 linux：`trap 'echo "exiting" ; rm -f $lockfile ; kill 0 ; exit' INT TERM EXIT`
*   如果在工作已经在运行的情况下负载攀升，则无法进行节流

如果您根本不关心负载，这可能会更简单一些：

```
#!/bin/bash

# set the max # of threads
max_threads=4

print_jobs(){
# flush finished jobs messages
  jobs > /dev/null
  for x in $(jobs -p) ; do
   # print all jobs
    echo "$x"
  done
}

job_count(){
  cnt=$(print_jobs $1)
  if [ -n "$cnt" ]; then
    wc -l <<< "$cnt"
  else
    echo 0
  fi
}

main_function(){
 # get current job count
  jcnow=$(job_count)

 # first, enter a loop waiting for threads to be below thresholds
  while [ $jcnow -ge $max_threads ]; do
    if ! [ $firstout ]; then
      echo "entering sleep loop. threads: $jcnow"
      st=$(date +%s)
      local firstout=true
    else
      now=$(date +%s)
     # if it's been 5 minutes, echo again:
      if [ $(($now - $st)) -ge 300 ]; then
        echo "still sleeping. threads: $jcnow"
        st=$(date +%s)
      fi
    fi
    sleep 5s

   # refresh these variables for loop
    jcnow=$(job_count)
  unset firstout
  done

  ( ./myjob $@ ) &
}

# do some actual work
for jobparams in "params1" "params2" "params3" "params4" "params5" "params6" "params7" ; do
   main_function $jobparams
done

wait 
```

# ruby-on-rails - Rails - 我如何获得喜欢这个故事的用户

> ID：12036127
> 
> 赞同：0
> 
> 时间：2012-08-20T10:36:11.353
> 
> 标签：ruby-on-rails, ruby-on-rails-3

嗨，Story、Likes 和 User 的轨道中有一些对象

我想创建一个“喜欢”系统作为社交网络（facebook、google+ 等）。事情是“喜欢”将出现在故事​​而不是用户身上。

所以我在故事和用户之间创建了一个 Like 对象 [relationships]

我的对象如下所示：

```
class Story < ActiveRecord::Base
  has_many :likes , dependent: :destroy
  has_many :users , through: :likes, source: :users
  belongs_to :user
end 
```

对象喜欢：

```
class Like < ActiveRecord::Base
 attr_accessible :story_id, :user_id
 belongs_to :users
 belongs_to :story
end 
```

现在

说用户有赞是错误的，因为故事有赞，而不是用户。

我不想这样做：

```
user.likes 
```

和用户模型：

```
class User < ActiveRecord::Base
 attr_accessible :avatar, :email

 has_many :stories
 #What am i missing here?
end 
```

问题是我怎样才能得到喜欢这个故事的用户？我想做类似的事情：

s = Story.find(2) s.likes.users

我在这里想念什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:38:23.687

在用户

```
class User < ActiveRecord::Base
  attr_accessible :avatar, :email
  has_many :likes , dependent: :destroy
  has_many :stories,through: :likes
end 
```

# javascript - 如何使用 java 脚本获取基于 url 的源代码？

> ID：12036128
> 
> 赞同：2
> 
> 时间：2012-08-20T10:36:21.263
> 
> 标签：javascript, jquery, url, cross-browser, xmlhttprequest

我写了一些代码来获取 html 源代码，但它只能在 IE8 上工作，但不能在 mozila 和 chrome 上工作，有什么问题，请给我建议。我的代码

```
<script>

        function processStateChange() {
            statusDiv = document.getElementById("stats");
            if (req.readyState == 0) { statusDiv.innerHTML = "UNINITIALIZED"; }
            if (req.readyState == 1) { statusDiv.innerHTML = "LOADING"; }
            if (req.readyState == 2) { statusDiv.innerHTML = "LOADED"; }
            if (req.readyState == 3) { statusDiv.innerHTML = "INTERACTIVE"; }
            if (req.readyState == 4) {
                statusDiv.innerHTML = "COMPLETE";
                statusDiv.innerHTML = req.responseText;
            }
        }
        function GetXmlHttpObject() {
            if (window.XMLHttpRequest) {  // code for IE7+, Firefox, Chrome, Opera, Safari
                return new XMLHttpRequest();
            } if (window.ActiveXObject) {  // code for IE6, IE5 
                return new ActiveXObject("Microsoft.XMLHTTP");
            } return null;
        }
        //req = new XMLHttpRequest("Msxml2.XMLHTTP");     
        req = GetXmlHttpObject();
        debugger;
        if (req) {
            req.onreadystatechange = processStateChange;
            req.open("GET", "http://whatismyipaddress.com/", true);            
            req.send();
        }

    </script> 
```

我检查了调试代码 IE 完全在循环中工作（req.readystate==4 最终得到响应文本）但 mozila 或 chrome 只是在工作循环（req.readystate==2 在中止循环后），什么是问题，请给我一些建议，使用jquery或java脚本来解决问题

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T12:25:24.397

由于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)限制，您不能发送跨域 AJAX 调用。这在 IE 中起作用的原因可能是您正在使用一些旧的恐龙版本的 IE，它有一些错误并允许这样的 AJAX 请求。但是没有现代浏览器会允许你这样做。

您只能向包含发送 AJAX 请求的 javascript 代码的页面所在的域发送 AJAX 请求。

根据您对远程域的控制级别，有一些解决方法。在您的情况下，我猜您无法控制`http://whatismyipaddress.com/`. 因此，您唯一的选择是在您的域上编写一个服务器端脚本，作为您的域和远程域之间的桥梁，然后将 AJAX 请求发送到您的脚本：

```
req.open("GET", "/myscript", true); 
```

# java - 扩展java点类以找到中点

> ID：12036129
> 
> 赞同：1
> 
> 时间：2012-08-20T10:36:23.803
> 
> 标签：java, point

我正在为即将到来的考试而学习，并且正在处理示例问题，特别是以下问题：

在类 Point 下面添加一个名为 midpoint 的实例方法，该方法返回一个 Point 类型的对象，表示两个点的中点，其中一个点作为参数提供，另一个是当前点（即本地实例提供的点变量）。注意 midpoint 返回一个新的 Point 对象。善用 Point 类，编写一个程序，读取两个点并打印它们的中点。输入由两行组成，每行包含一个点的 x 和 y 坐标。下面是输入/输出的示例，输入用粗体表示：

```
Enter two points
2.1 3.2
3.0 2.8
The midpoint is (2.55,3.0) 
```

我的点类代码如下，似乎没问题（请随时指出任何错误或改进）：

```
 class Point {

private double x, y; // coordinates

Point(double x0, double y0){ // all-args constructor

    x = x0; y = y0;

}

Point(){}; // no-args constructor (defaults apply)

void get() { 

    x = Console.readDouble(); 

    y = Console.readDouble();

}

public Point midPoint(Point p) {
     double mx = (p.x + x)/2;
     double my = (p.y + y)/2;
     return new Point(mx,my);
}

public String toString() 
{ 

    return "(" + x + "," + y + ")";
}

} 
```

我遇到麻烦的地方是在下面的代码中实际使用我的 midPoint 方法，任何建议都值得赞赏。

```
import java.util.Scanner;
import java.io.*;

class Midpoint extends Point
{
public static void main (String[] args ) {

    Scanner scanner = new Scanner(System.in);

    System.out.println("Please enter two points:");
    double x1 = scanner.nextDouble();
    double y1 = scanner.nextDouble();
    double x2 = scanner.nextDouble();
    double y2 = scanner.nextDouble();

    Point p1 = new Point(x1, y1);
    Point p2 = new Point(x2, y2);

    p1.get();
    return midPoint(p2);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:41:25.087

对方法的调用`get()`似乎没有必要。

其次，调用您`midPoint`使用的对象（根据问题中的要求）。因此，它应该是：

```
p1.midPoint(p2); 
```

最后，由于该方法返回一个`Point`类型，请确保您捕获返回的内容。

```
Point p3 = p1.midPoint(p2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:42:36.923

好吧，从您提供的代码来看，这绝对是错误的， midPoint 是一个类方法，因此使用它的唯一方法是首先实例化该类，就像您一样 p1 ，然后为该特定实例调用该方法：

```
Point p1 = new Point(whatever);
Point p2 = new Point(whatever);

Point p3 = p1.midPoint(p2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T10:45:36.187

1.  你的主要方法是无效的，所以它不能返回点
2.  如果你想对点 p1 和 p2 进行操作，它们之间的中点是`p1.midPoint(p2)`如果你这样做，你不需要扩展点类
3.  你到底在`p1.get()`做什么？有没有可能和扫描仪一样？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T11:09:45.347

除了其他人写的所有内容之外，您的`MidPoint`课程不应该扩展`Point`课程。我认为您这样做是为了使用该 midPoint 方法，但这是错误的。您没有向 Point 类添加任何新行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-30T09:13:06.517

```
import java.util.*;

public class Hello {

    public static void main(String[] args) {
        Scanner sc=new Scanner(System.in);
        int a=sc.nextInt();
        int b=sc.nextInt();
        int c=sc.nextInt();
        int d=sc.nextInt();
        System.out.println((a+c)/2,(b+d)/2);

    }
} 
```

# vb.net - 如何让“Windows”检测到我的程序最近对某些文件所做的更改（重命名、移动或删除）？

> ID：12036130
> 
> 赞同：0
> 
> 时间：2012-08-20T10:36:28.600
> 
> 标签：vb.net, file, contextmenu, rename, undo

Windows 在系统上下文菜单中显示**“撤消重命名”**、“撤消删除”或“撤消移​​动”，因为您对某些文件进行了任何这些最近的更改！

我创建了一个程序，使用`My.Computer.FileSystem.RenameFile`VB.net 中的方法重命名用户选择的特定文件。

```
My.Computer.FileSystem.RenameFile("C:\Test.txt", "SecondTest.txt") 
```

但是“Windows”无法检测到这些变化。

这不是在我的程序中给这个选项**“撤消重命名”**，而是让“Windows”检测到更改以提供通过系统上下文菜单撤消它们的选项！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:14:52.153

It is not "Windows" that is tracking that change it is the "File Explorer" program (it tracks changes that are made from within *that* program).

I don't think there will be any way to tell File Explorer that you have made a change to a file and add the undo action to its list.

# regex - 使用 reg-ex 过滤包含某些单词的 URL GA

> ID：12036134
> 
> 赞同：0
> 
> 时间：2012-08-20T10:36:38.587
> 
> 标签：regex, google-analytics

我想过滤掉所有包含某些单词的 URL，例如：

我有一个如下所示的 URL：

www.google.com/&SaveThis=true&SaveType=VeryFast&Page=0

有时“保存类型”可能会变慢或其他什么。所以我想做的是显示所有具有“SaveType=VeryFast”的 URL，有时这可能位于一个很长的 URL 的中间。

我试过这个：

```
.*SaveType=VeryFast.* 
```

但它没有用！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:10:02.470

[从此页面](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1034324)上的提示 #4来看，您似乎不需要`.*`任何一端。也就是说，如果没有`^`and`$`锚， using`SaveType=VeryFast`应该匹配包含这些确切字符的任何 URL。看起来确实`\b`不支持单词边界锚 ( )，因此您可能还会匹配任何包含例如`OtherSaveType=VeryFast`或`SaveType=VeryFastly`

否则，我看不出你的表情有什么问题……（？）

# javascript - Javascript：拖放图像标签

> ID：12036136
> 
> 赞同：2
> 
> 时间：2012-08-20T10:36:46.437
> 
> 标签：javascript, html, image, drag-and-drop

我想知道如何使用 javascript 进行拖放图像标记。我知道 html5 每个元素都可以拖动，但我想让它在旧浏览器上工作。我已经使用javascript进行了拖放，它工作正常，除了在ie和firefox中当鼠标按下时，鼠标移动事件没有反应，除非用户点击它，这就是ie的反应。在 Firefox 上，图像变为半透明且可拖动，但我的代码拖动它。

谁能知道如何解决这个问题？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:39:43.790

你试过 jQuery 了吗？使用插件 jQuery ui，您可以拖放网站上的每个对象.. [jQuery UI：可拖动](http://jqueryui.com/demos/draggable/)

# eclipse - 无法使用密钥文件 Eclipse

> ID：12036139
> 
> 赞同：2
> 
> 时间：2012-08-20T10:36:53.673
> 
> 标签：eclipse, git, ssh, public-key-encryption, egit

我通过 ssh 设置对我的服务器的公钥访问。我的本地 Windows 计算机上有一个 .ssh 文件夹。`ssh-add <directory>`我配置 ssh 以使用该命令添加私钥。我能够使用**windowspowershell**成功连接到我的服务器。.ssh 目录和授权文件的 chmod 和 Chown 在我的服务器上配置正确。sshd_config 配置正确并指向正确的密钥。

该连接与 shell 完美配合，因此我的服务器上没有问题。但是对于 Eclipse，尤其是它的插件，Egit，`Unable to use key file <directory of the key file I loaded into eclipse the same one used by ssh`每次尝试将修订提交推送到服务器上的 git 存储库时，我都会收到错误消息。我去了`Pref > General > Network > SSH2`并添加了正确的私钥，ssh2 主目录也设置正确，实际上公钥和私钥都是使用密钥管理选项卡生成并加载到我的服务器中的。

我对该文件夹和这些键的 Windows 权限设置为允许所有用户做所有事情，只是为了更好地衡量。

现在一个线索是，`known hosts`选项卡的主机指纹与我的密钥指纹不匹配。我的密钥类似于 f1:19: 等，并且主机指纹不同。我希望我能尽快解决这个问题。任何建议都会很棒。

```
ssh-add -l = two private keys that I am using. So its not this. 
```

**另一个线索是，在进入我的腻子程序并突然更改它的私钥后，我尝试使用 Eclipse 中的密钥访问连接到 ssh，它抛出的错误显示反映了我刚刚在腻子中更改的相同密钥！不知何故，日食似乎正在使用腻子进行公钥访问。我该如何阻止这个？！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:43:06.833

好的，这是解决方案。无论出于何种原因，Egit 使用 putty 连接到 ssh，使用配置 putty 设置为使用公钥访问服务器。解决此问题的方法是确保 putty 能够使用公钥连接到服务器。如果不能，那么试试这个：

1.  下载puttygen
2.  使用 ssh shell 或 eclipse 上的密钥管理选项卡生成 rsa 密钥。不要使用 puttygen 生成密钥。无论出于何种原因，它从未对我有用。
3.  将您生成的私钥（不是用 puttygen 生成的）加载到 puttygen 中，然后另存为 putty 私钥（.ppk）
4.  转到 Eclipse 密钥管理选项卡并将其设置为识别新的 .ppk 私钥文件
5.  最后转到 putty，通过分配地址创建您的服务器配置文件，然后转到 auth 并加载 .ppk 文件。禁用选美。
6.  保存并尝试使用密钥连接到服务器，如果成功，那么恭喜 Egit 和 Eclipse 现在可以使用密钥建立连接。

# python - Python：如果应用程序已经在运行，如何禁止打开它

> ID：12036146
> 
> 赞同：6
> 
> 时间：2012-08-20T10:37:08.117
> 
> 标签：python, wxpython

我正在为**Windows 7设计一个用****Python**编码的 Windows 实用程序软件，使用**Wxpython**进行*GUI*工作。如果我的软件已经打开，我不想打开它。如果用户打开该软件，我想要这样的功能，将在 Windows 屏幕上显示一个消息框，显示“您的应用程序已经在运行”。

请帮忙。提前致谢...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T10:41:56.940

已经存在实现所需逻辑的 wxPython 工具，称为`wx.SingleInstanceChecker`. 这是代码示例（无耻地从[wxPython wiki](http://wiki.wxpython.org/OneInstanceRunning)借用）：

```
import wx

class SingleAppFrame(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent, title=title, size=(300, 300))
        self.Centre()

class SingleApp(wx.App):
    def OnInit(self):
        self.name = "SingleApp-%s" % wx.GetUserId()
        self.instance = wx.SingleInstanceChecker(self.name)
        if self.instance.IsAnotherRunning():
            wx.MessageBox("Another instance is running", "ERROR")
                return False
       frame = SingleAppFrame(None, "SingleApp")
       frame.Show()
       return True

app = SingleApp(redirect=False)
app.MainLoop() 
```

这个典型的例子（为了运气）完全符合您的要求。

# sql - 错误通常但在 EXISTS 子查询中运行

> ID：12036149
> 
> 赞同：2
> 
> 时间：2012-08-20T10:37:18.130
> 
> 标签：sql, sql-server-2008-r2

以下有问题吗？

```
DELETE a
FROM WHAnalysis.dbo.tb_r12027dxi_CalculatedData a
WHERE EXISTS
        (
        SELECT * 
        FROM WHAnalysis.dbo.tb_r12027dxi_CalculatedData b
        WHERE 
            b.[Past28Days] = 1 AND
            a.[Index] = b.[Index]
        HAVING SUM(b.Amount) = 0
        ) 
```

我对使用上面的脚本有点不安的原因是，如果我运行以下错误：

```
SELECT * 
FROM WHAnalysis.dbo.tb_r12027dxi_CalculatedData b
WHERE 
    b.[Past28Days] = 1
HAVING SUM(b.Amount) = 0 
```

我理解为什么这个脚本错误 => 选择没有分组，因此处理器不喜欢 HAVING 子句中的聚合。

但作为一个子查询，这个错误不会发生 - 为什么？这是一个有问题的方法吗？

**编辑**

最终使用以下内容：

```
DELETE a
FROM WHAnalysis.dbo.tb_r12027dxi_CalculatedData a
WHERE a.[Index] IN
    (
    SELECT [Index] 
    FROM WHAnalysis.dbo.tb_r12027dxi_CalculatedData
    WHERE [Past28Days] = 1
    GROUP BY [Index] 
    HAVING SUM(Amount) = 0
    ) 
```

但正如答案中所建议的，只需将 GROUP BY 添加到子查询中，以下内容就更具可读性：

```
DELETE a
FROM WHAnalysis.dbo.tb_r12027dxi_CalculatedData a
WHERE EXISTS
    (
    SELECT * 
    FROM WHAnalysis.dbo.tb_r12027dxi_CalculatedData b
    WHERE 
            b.[Past28Days] = 1 AND
            a.[Index] = b.[Index]
    GROUP BY b.[Index]
    HAVING SUM(b.Amount) = 0
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:52:50.497

省略 group by 并且仍然执行聚合是合法的，因此`having`仍然是限制结果的一种方式：

```
select sum(x)
from
(
  select 1 x union all select 2
) a
having sum(x) = 3 
```

`Exists()`工作，因为选择列表中的所有内容都被忽略。`Exists()`仅查找行，并在找到后立即终止。您可以添加`group by b.Index`以使以后查看代码的任何人都清楚意图，或者使用内部联接和派生表重写它。

```
DELETE a
FROM WHAnalysis.dbo.tb_r12027dxi_CalculatedData a
INNER JOIN
        (
        SELECT b.[Index]
        FROM WHAnalysis.dbo.tb_r12027dxi_CalculatedData b
        WHERE 
            b.[Past28Days] = 1
        GROUP BY b.[Index]
        HAVING SUM(b.Amount) = 0
        ) b1
   ON a.[Index] = b1.[Index] 
```

# winapi - 使用 ReadDirectoryChangesW 时丢失文件

> ID：12036150
> 
> 赞同：1
> 
> 时间：2012-08-20T10:37:18.037
> 
> 标签：winapi

我正在使用 ReadDirectoryChangesW 来监视目录。
这是我的简单代码

```
 #include <windows.h>
        #include <stdlib.h>
        #include <stdio.h>
        #include <tchar.h>
        #include <iostream>
        #include <string>
        #include <cwctype>

        using namespace std;
        wstring getname(FILE_NOTIFY_INFORMATION *tmp)
        {
            wstring s = L"";
            for (int i = 0;i < tmp->FileNameLength / 2;i++)
                s += tmp->FileName[i];
            return s;
        }
        void _tmain(int argc, TCHAR *argv[])
        {

            HANDLE hDir; 
            char notify[1024]; 
            DWORD cbBytes,i; 
            char AnsiChar[3]; 
            wchar_t UnicodeChar[2]; 
            LPTSTR path;

            FILE_NOTIFY_INFORMATION *pnotify=(FILE_NOTIFY_INFORMATION *)notify; 
            FILE_NOTIFY_INFORMATION *tmp ; 

        //    GetCurrentDirectory(MAX_PATH,path.GetBuffer(MAX_PATH+1));
            wcout.imbue(locale("chs"));
            path = argv[1];
            hDir = CreateFile( path, FILE_LIST_DIRECTORY,
                FILE_SHARE_READ | 
                FILE_SHARE_WRITE | 
                FILE_SHARE_DELETE, NULL, 
                OPEN_EXISTING, FILE_FLAG_BACKUP_SEMANTICS | 
                FILE_FLAG_OVERLAPPED, NULL); 
            wcout << L"===CreateFile complete===" << endl;
            if (hDir == INVALID_HANDLE_VALUE) 
            { 
                wcout << L"invalid handle value" << endl;       
                return;
            } 
            FILE_NOTIFY_INFORMATION buffer[1024];
            FILE_NOTIFY_INFORMATION *pbuffer;
            while (TRUE) 
            { 
                wcout << L"waiting..." << endl;
                if(ReadDirectoryChangesW(hDir, &buffer, sizeof(buffer),
                    TRUE, FILE_NOTIFY_CHANGE_FILE_NAME| FILE_NOTIFY_CHANGE_LAST_WRITE, 
                    &cbBytes, NULL, NULL)) 
                { 
                    pbuffer = buffer;
                    do{
                        tmp = pbuffer; 
                        switch(tmp->Action) 
                        { 
                        case FILE_ACTION_ADDED: 
                            wcout << L"Directory/File added - " << getname(tmp) << endl;
                            break; 
                        case FILE_ACTION_REMOVED:
                            wcout << L"Directory/File removed - " << getname(tmp) << endl;
                            break; 
                        case FILE_ACTION_MODIFIED: 
                            wcout << L"Directory/File modfied - " << getname(tmp) << endl;
                            break; 
                        case FILE_ACTION_RENAMED_OLD_NAME: 
                            wcout << L"Directory/File old name - " << getname(tmp) << endl;
                            break; 
                        case FILE_ACTION_RENAMED_NEW_NAME: 
                            wcout << L"Directory/File new name - " << getname(tmp) << endl;
                            break; 
                        default:
                            wcout << L"unknown action\n" << endl;
                            break; 
                        }
                        pbuffer += pbuffer->NextEntryOffset;
                    }while(pbuffer->NextEntryOffset);
                } else
                {
                    wcout << "readChangesW failed  now return" << endl;
                    return;
                }
            }
        } 
```

看起来不错，但是，当我在目录中添加或删除大量文件时，它不会报告某些更改，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:13:24.953

尝试使缓冲区更大。

从 ReadDirectoryChangesW 函数的文档中：

> 当您第一次调用 ReadDirectoryChangesW 时，系统会分配一个缓冲区来存储更改信息。此缓冲区与目录句柄相关联，直到它被关闭并且其大小在其生命周期内不会改变。调用此函数之间发生的目录更改将添加到缓冲区中，然后在下一次调用中返回。如果缓冲区溢出，缓冲区的全部内容将被丢弃，并且 lpBytesReturned 参数包含零。

系统分配的缓冲区大小取决于您传入的缓冲区大小。如果传入更大的缓冲区，系统将分配更大的缓冲区来存储在您处理前一批更改时发生的更改，这意味着缓冲区溢出和丢失这些更改的可能性较小。

# mysql - 一列上的简单 MySQL 分区 (groupID)

> ID：12036152
> 
> 赞同：1
> 
> 时间：2012-08-20T10:37:32.560
> 
> 标签：mysql, database, database-partitioning

我有一个很大的表（超过 1000 万行）。我有以下几列； `rowId`,`groupId`和`textString`. ID 既是`ints`又`textString`是简单的`varchar`. 我一次最多只有 50 个 groupId，它们存储在另一个表中（可能不感兴趣），但 groupID 不是连续的（rowId 是 AUTO_INCREMENT 和 PRIMARY KEY）。

我想做的是在这些 groupID 上对我的表进行分区。我知道 groupID 列表是什么（即 2342、5251、1591、5915 等）。

我如何在 MySQL 中做到这一点？

修正：运行版本 5.5.23

谢谢！

# c# - 调用异步方法与事件

> ID：12036156
> 
> 赞同：6
> 
> 时间：2012-08-20T10:38:05.457
> 
> 标签：c#, events, async-await

我正在为网络应用程序协议开发客户端库。

客户端代码调用库来初始化它并连接到服务器。客户端当然可以向服务器发送请求，但是服务器也可以向客户端发送请求（Commands，下面称为Cmd）。

传输协议是 TCP/IP，所以基本上客户端库连接到服务器并调用异步方法以从服务器检索下一个请求或响应，以避免在等待来自的响应/请求时 I/O 阻塞服务器。

话虽如此，我在库中看到了两种可能的解决方案（仅使用 C# 构造，没有特定的第三方框架），以允许客户端接收来自服务器的请求：

要么在图书馆提供活动，例如

```
public EventHandler<ReceivedCmdEventArgs> event ReceivedCmd; 
```

客户端将订阅，以便收到来自服务器的请求的通知。当然，对于这种机制，我必须在客户端库中创建一个异步循环来接收来自服务器的请求并在 Cmd 接收时引发事件。

或者另一种解决方案是在客户端库中制作这样的方法

```
public async Task<Cmd> GetNextCmdAsync() 
```

客户端代码将在异步循环中调用以接收 cmd。

这些解决方案是否相同？完全使用 C#5 的 async/await 构造而不依赖事件会更好吗？有什么区别 ？有什么建议，备注？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T12:37:06.563

`Task`表示单个异步操作，例如接收单个命令。因此，[它并不直接适用于事件流](http://nitoprograms.blogspot.com/2011/09/rx-and-async.html)。

事件流的终极库是[Reactive Extensions (Rx)](http://msdn.microsoft.com/en-us/data/gg577609.aspx)，但不幸的是它的学习曲线相当陡峭。

一个较新的选项是鲜为人知的[TPL Dataflow](http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx)，它允许构建`async`友好的数据流网格。事实上，我正在编写一个`async`友好的 TCP/IP 套接字包装器，并且`ISourceBlock<ArraySegment<byte>>`作为读取流公开。然后，最终用户可以直接从该块接收`ReceiveAsync`（

Dataflow 的效率略低于 Rx，但我认为较低的学习曲线是值得的。

我不会推荐一个裸事件——你要么最终得到一个自由线程事件（想想你将如何处理套接字关闭 - 处理后会发生事件吗？）或者基于事件的异步模式（它有自己类似的问题同步到提供的`SynchronizationContext`）。Rx 和 Dataflow 都为同步和处置/取消订阅提供了更好的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T10:53:01.890

我认为事件驱动的方法在你的情况下更好。

实际上，您正在谈论可观察/观察者模式。*如果收到某个命令，未知数量的侦听器/观察者正在等待执行某项操作。*

Async/await 模式不会像事件驱动的方法那样工作，因为它就像*我期望一个结果*相反，*每当你向我报告你收到命令时我会做你想做的事*。

从概念上讲，我更喜欢事件驱动的方法，因为它更适合您的架构目标。

C# 5 中的异步/等待模式不是为您的情况设计的，但它适用于某些代码执行异步任务并且应在任务收到结果后执行下一行代码时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:52:12.150

由于您正在制作图书馆，因此事件似乎更适合。

事件允许您在不强制必须指定回调的情况下构建库。

您图书馆的消费者决定他们感兴趣的内容并收听这些事件。

另一方面，异步任务意味着您知道会有延迟（IO、网络等）。异步任务允许您在这些延迟发生时释放资源，从而更好地利用资源。

异步任务不能替代您引发的事件。

# javascript - 用主干覆盖同步值的简单方法

> ID：12036158
> 
> 赞同：1
> 
> 时间：2012-08-20T10:38:09.013
> 
> 标签：javascript, backbone.js

我有许多模型，它们基本上是永远不会改变的类。它们代表对象的许多设置，并且不会更改。即使他们这样做，我也想使用客户端的最新值而不是服务器值。我不想像现在这样序列化整个对象，而是想在主干同步时重新实例化实际的类。实现这一目标的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:42:17.540

看起来 .parse() 是我想要的。回答未来的可搜索性。

# perl - 递归调用当前 perl 脚本并将结果推送到数组

> ID：12036169
> 
> 赞同：0
> 
> 时间：2012-08-20T10:38:43.020
> 
> 标签：perl, recursion

我有一个 perl 脚本，它接受 1 个参数，将结果存储在一个数组中，然后转到数组中的元素并以数组元素作为参数调用自身并将新结果推送到数组中。出于某种原因，我无法让它工作并且数组没有改变。

我有类似的东西：

```
#some code here that stores result in @result
foreach $i (@result){
    push(@result, `perl ./myperlscript.pl "$i"`);
} 
```

我怎样才能让它工作？有没有比这更好的递归调用 myperlscript.pl 的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T10:50:28.313

如果您正在编写一个调用自身的脚本，您*可能会*遇到设计问题。尝试将主逻辑放入*子程序*并调用它。这为您提供了更多控制权并且更安全，因为没有外壳转义。

您也不应该修改您正在迭代的数组。这可能会更好：

```
my @tmp = ();
foreach my $i (@array) {
    push @tmp, function($i);
}
push @array, @tmp; 
```

如果你不想不确定地进入，你应该使用传统的`for`循环：

```
# infinite loop! Yay!
for (my $i = 0; $i < @array; $i++) {
    push @array, function($i);
} 
```

如果你不能重建你的脚本并且你必须让它自己调用，你应该宁愿*管道*参数，而不是把它们放在同一行。好处包括无限长度的数据和提高安全性（没有外壳转义！）。只需考虑格式错误的数据（例如`x" | tee "mySecretFile`. 这是无害的。但同样，宁愿声明一个子程序而不是那个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T11:20:02.900

Perl 不是外壳程序，通常最好避免使用反引号运算符和 system() 函数，除非没有其他选择，或者您故意进行快速'n'dirty hack。

Learn to write a subroutine and do your recursion that way. You shouldn't be tackling recursion if you've not got the hang of subroutines.

* * *

However, let's discuss what you're doing anyway.

Your backtick invocation is OK:

```
`perl ./myperlscript.pl "$i"` 
```

... and will return whatever that process puts to stdout. It follows that your program must print to standard out.

In Perl, adding items to the list being iterated *does* cause the iteration to continue.

```
push (@arr,10);
foreach $i (@arr) {
   print "$i\n";
   if($i > 0) {
      push(@arr,$i-1);
   }
} 
```

... prints a countdown from 10 to 0\. So there is potential for your code to work. However I think it's a confusing model, and not a good habit to get into. Modifying the data structure you're looping over is not generally considered good practice.

Your code showed no evidence of a stopping condition. When you recurse, you always need to consider stopping conditions.

Note that anything that happens to the @result array in a backtick invocation, has no effect on the @result array in the current process. They are invisible to one another.

# javascript - javascript：如何实现动画？

> ID：12036175
> 
> 赞同：1
> 
> 时间：2012-08-20T10:39:05.793
> 
> 标签：javascript, google-maps, animation, jquery-animate

我在我的项目中使用 Google Maps Javascript API V3。我想将标记从一个位置动画移动到另一个位置。我可以通过以下方式更新标记的位置

```
marker.setPosition(newPosition) 
```

但是如何平滑地移动标记？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:51:11.987

```
var startPos, curPos, endPos, delta; // set these values
var interval;

curPos = startPos;

function move() {
    marker.setPosition(curPos);

    if ( curPos < endPos ) {
       if ( curPos + delta > endPos ) curPos = endPos - curPos;
       else curPos += delta;

       setTimeout(move, interval);
    }
}

move(); 
```

`curPos`, `startPos` `endPos`, 和`delta`是`google.maps.LatLng`

# css - 使用 CSS2/3、mixins 和绘图 API/HTML5 画布的 OpenLaszlo 的现代组件集

> ID：12036187
> 
> 赞同：2
> 
> 时间：2012-08-20T10:39:45.280
> 
> 标签：css, user-interface, custom-component, skinning, openlaszlo

[OpenLaszlo](http://www.openlaszlo.org)的优点之一是创建自定义组件相对容易，尤其是结合使用类层次结构、[mixins](http://wiki.openlaszlo.org/Mixins)、[CSS 支持](http://www.openlaszlo.org/lps4.9//docs/developers/css.html)和最新版本的 OpenLaszlo 添加的 CSS2/3 功能。

但是当我查看 OpenLaszlo 5.0 主干中最新组件的源代码时，在渲染组件时似乎没有使用这些功能。以[<checkbox> 类](http://svn.openlaszlo.org/openlaszlo/trunk/lps/components/lz/checkbox.lzx)为例：

```
<library>
    <include href="base/baseformitem.lzx"/>
    <include href="base/multistatebutton.lzx"/>
    <resource name="lzcheckbox_rsrc">
        <frame src="resources/checkbox/checkbox_off.swf" />
        <frame src="resources/checkbox/checkbox_off_mo.swf" />
        <frame src="resources/checkbox/checkbox_on.swf" />
        <frame src="resources/checkbox/checkbox_disable_off.swf" />
        <frame src="resources/checkbox/checkbox_on.swf" />
        <frame src="resources/checkbox/checkbox_on_mo.swf" />
        <frame src="resources/checkbox/checkbox_off.swf" />
        <frame src="resources/checkbox/checkbox_disable_on.swf" />
    </resource>

    <!-- A checkbox component representing a boolean -->
    <class name="checkbox" extends="baseformitem" pixellock="true">

        <!-- FIXME: [hqm 2006-09] LPP-2244 This used to be y="$once{classroot.text_y}"
             but the DHTML runtime fires an early text onheight  event, which has the wrong value,
             so we need to use an 'always' constraint till we fix it
        -->
        <text name="_title" x="16" y="${classroot.text_y}" text="${parent.text}" resize="true"/>

        <!--- the y position of the text label. default: centered -->
        <attribute name="text_y"
            value="${this.cb.height/2 - this._title.height/2+1}" type="number"/>

        <!--- @keywords private -->
        <attribute name="value" setter="setValue(value)" value="false"/>

        <!-- views -->
        <multistatebutton name="cb" resource="lzcheckbox_rsrc" text=""
            statenum="${parent.value ? 1 : 0}"
            statelength="4" maxstate="1"
            reference="parent">
        </multistatebutton> 
```

复选框由许多定义为 SWF 文件的资源组成（这意味着，无法更改复选框的样式）。对于 DHTML 运行时，SWF 资源被转换为 PNG 文件：

[lps/components/lz/resources/checkbox/checkbox_disable_on.swf](http://www.openlaszlo.org/lps4.9/lps/components/lz/resources/checkbox/checkbox_disable_on.swf) [lps/components/lz/resources/checkbox/autoPng/checkbox_disable_on.png](http://www.openlaszlo.org/lps4.9/lps/components/lz/resources/checkbox/autoPng/checkbox_disable_on.png)

这种方法似乎非常过时，并且与为组件使用绘图 API 和 CSS 的组合相比具有明显的缺点：

*   对现有组件进行蒙皮需要创建新资源。
*   除非您接受像素化效果，否则组件不会缩放。随着越来越多的移动设备使用不一致的 DPI 值，这尤其是一个问题。
*   阴影等效果是资源的一部分，无法激活、停用或修改。
*   由于原始 .fla 文件似乎不可用，因此甚至无法修改现有样式。

[Laszlo](http://www.laszlosystems.com)是否曾经创建过更新的组件集，或者社区是否有可用的开源组件集？如果没有，有没有人考虑开始这样的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:02:57.577

在创建当前组件很久之后，OpenLaszlo 的 mixins、css 支持甚至 HTML5 模式（以前​​称为 DHTML 模式）都被添加到平台中。自从我在 2006 年开始使用 OpenLaszlo 3.3.3 以来，它们的外观一直没有改变，这可能是它们仍然以旧方式实现的原因。据我所知，没有可用的开源组件集，大多数公司最终都会根据人们在 OpenLaszlo 论坛上所说的话来扩展基本组件以自行对其进行皮肤处理。

大多数可视组件类都有一个“基”类，它具有基本功能而无需皮肤，因此您可以扩展它们以使它们看起来像您想要的样子，您可以在参考手册中找到它们：

[http://www.openlaszlo.org/lps4.9/docs/reference/](http://www.openlaszlo.org/lps4.9/docs/reference/)

例如，<combobox> 扩展了 <basecombobox> 等。

# oracle - Oracle SQL*Plus：禁用处理“@”（at 符号）元字符

> ID：12036190
> 
> 赞同：4
> 
> 时间：2012-08-20T10:40:08.720
> 
> 标签：oracle, sqlplus

Oracle SQL*Plus 将 at 符号解释为[运行 SQL 脚本](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12002.htm)`@`的命令。

我有一个`.sql`脚本，其中包含`@`注释中的字符，例如：

```
create or replace package mypkg
as

  /*
    Procedure foo

    @param bar blah blah blah
  */
  procedure foo(bar varchar2);

end mypkg;
/ 
```

如何禁用 at 符号的处理？我已经在使用`SET DEFINE OFF`并`SET SQLPREFIX OFF`禁用不需要的元字符处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T11:25:24.460

有几种方法可以禁用 START 命令（包括 @ 和 @@ 命令）。

一种方法是在 PRODUCT_USER_PROFILE（实际上是 SYSTEM.PRODUCT_PRIVS 的同义词）中放置一个适当的条目。为此，请执行类似于

```
INSERT INTO PRODUCT_USER_PROFILE
  (PRODUCT,     USERID, ATTRIBUTE, CHAR_VALUE)
VALUES
  ('SQL*Plus', 'DUMMY', 'START',   'DISABLED') 
```

这要求您使用的用户 ID 对 PRODUCT_USER_PROFILE 具有 INSERT 权限。

第二种方法是在启动 SQL*Plus 时使用带有参数 3 的 -RESTRICT 选项。这可能更简单，但是您可能需要启用 -RESTRICT 3 禁用的其他命令，例如 SPOOL。[有关详细信息，请参阅本页](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch3.htm#i1169742)标题为“限制选项”的部分。

分享和享受。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T19:56:42.920

我多年来一直使用这种注释符号，所以我很惊讶这是一个问题。我使用包“pldoc” [http://sourceforge.net/projects/pldoc/?source=directory](http://sourceforge.net/projects/pldoc/?source=directory)来生成文档。标准的注释方式是这样的（如 javadoc）：

```
create or replace package mypkg
as

  /**
  * Procedure foo
  * 
  * @param bar blah blah blah
  */
  procedure foo(bar varchar2);

end mypkg;
/

me@XE> @mypkg.sql

Package created. 
```

# maven - Maven 3 antrun 问题

> ID：12036193
> 
> 赞同：0
> 
> 时间：2012-08-20T10:40:19.067
> 
> 标签：maven, ant, build-process, maven-3, maven-plugin

最近我们从 maven2 升级到 maven 3 但 ant build 无法正常工作。Ant 没有在 maven 3 中编译我的项目，但能够使用 maven 2 编译相同的项目。举个简单的例子，我在我的 pom 文件中添加了一些消息来回显我正在使用 maven 2.0.6 获取消息，但我正在使用 maveb 3.0.3运行同样收不到消息。ant 和 maven 3 中是否存在兼容性问题？我的 pom 文件中有以下内容

...

```
<plugin>
  <artifactId>maven-antrun-plugin</artifactId>
    <executions>
    <execution>
            <id>1</id>
        <phase>validate</phase>
        <configuration>
            <tasks>
              <echo message="SOME MESSAGE TO DISPLAY " />
            </tasks>

        </configuration>
        <goals>
            <goal>run</goal>
        </goals>
    </execution>
</executions>
</plugin>
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:05:15.070

我建议使用[maven-echo-plugin](http://site.supose.org/maven-echo-plugin/)：

像这样：

```
 <plugin>
    <groupId>com.soebes.maven.plugins</groupId>
    <artifactId>maven-echo-plugin</artifactId>
    <version>0.1</version>
    <executions>
      <execution>
        <id>echo-first-time</id>
        <phase>validate</phase>
        <goals>
          <goal>echo</goal>
        </goals>
        <configuration>
          <echos>
            <echo>This message is very early in the build process.</echo>
          </echos>
        </configuration>
      </execution>
    <execution>
 </plugin> 
```

# javascript - javascript的Hessian序列化库？

> ID：12036194
> 
> 赞同：2
> 
> 时间：2012-08-20T10:40:20.523
> 
> 标签：javascript, serialization, deserialization, hessian

我刚刚开始使用 Hessian，并且惊讶地发现 javascript 中显然没有 Hessian 功能（特别是序列化/反序列化）的库。我想我有两个问题：

1) 实际上我还没有找到一个像样的 Hessian javascript 库吗？

2）如果没有，是否有充分的理由不存在？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T22:54:10.510

有点自我推销，我用 JavaScript 写了一个 Node.js Hessian 解析器。它可以在[npm](http://npmjs.org/package/hessian)或[github 上](https://github.com/bramp/hessian.js)找到。

目前它只支持解码粗麻布数据，我个人目前不需要编写编码器。我一直在寻找的一件事是一些示例编码数据，我可以将其用作单元测试的一部分。关于我在哪里可以找到一些建议？还是我需要自己创建它？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-02T06:15:48.293

我只是为 RPC 调用写了一个，类似于 ruby​​-hessian。仅在 nodejs 中可用。使用文档位于[https://github.com/villadora/node-hessian](https://github.com/villadora/node-hessian)。[在http://hessian.caucho.com/test/test2](http://hessian.caucho.com/test/test2)中针对 Hessian v2.0 进行了测试。

安装：

```
npm install hessian-proxy 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-03T10:17:55.993

npm 安装 hession.js

[https://github.com/node-modules/hessian.js](https://github.com/node-modules/hessian.js)

纯 JavaScript 编写的 Hessian 序列化 1.0 和 2.0。支持Java中的所有类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T10:48:50.103

根据他们的[网站](http://hessian.caucho.com/)，看起来那里没有 JavaScript 端口。

为什么一个不存在？不确定，但似乎 Hessian 的开发人员似乎提倡将 Flash/Flex 作为首选的客户端实现平台。当然，这个网站似乎有点过时了，可能是在 JavaScript 真正流行起来之前就已经建立起来的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-23T20:32:51.963

最后，我成功地将 Bram 的库放在浏览器中运行。这是丑陋的代码，但它的工作。请看一下[https://github.com/CarlosUrbina/hessianInBrowser](https://github.com/CarlosUrbina/hessianInBrowser)

编辑：我意识到 Bram 的库只支持解码 Hessian 1.0 规范。不幸的是，我的应用程序在 Hessian 2.0 上运行，所以我需要编写自己的库。 [https://github.com/CarlosUrbina/Hessian2Javascript](https://github.com/CarlosUrbina/Hessian2Javascript)

AMD 是否准备好并被证明可以在 Chrome 27 和 Firefox 21 中工作。尽管如此，您需要小心使用相同的域策略。如果您需要调用另一个域中的 Web 服务，这可能效果不佳。

我只实现了我需要的数据类型，所以编码部分只是编码整数。解码器更健壮，实现缺少的类型不应该那么难。

# php - 分隔块 - openTBS / xlsx，

> ID：12036197
> 
> 赞同：0
> 
> 时间：2012-08-20T10:40:30.227
> 
> 标签：php, xlsx, tinybutstrong, opentbs

我正在使用 openTBS 制作一个 excel 文档。这是我的问题：

我试图复制父标题下的子模块（红色一个）

![代码](../Images/7f3d25a7d0b249376f6a8b2d86808913.png)

我的输出是：

![输出](../Images/399cae85595586e3a5742ed3ccbf3a41.png)

有没有办法限制该表内的块？所以我可以把所有的绿色模块放在一个大红色模块下面吗？：秒

提前致谢

**更新：**

我试图将headrgroup设置为红色

```
[base_sub.modules;block=c;headergrp=module] 
```

但我得到的是

![在此处输入图像描述](../Images/d888b33b3225b45bc544ffe7ea0a52c0.png)

但我需要的是一个红色的大号，而不是所有绿色的，就像一个标题 +/-

**更新：**

我的模板：

![在此处输入图像描述](../Images/88518f589a6d54ac5de08671fcdfc837.png)

我的输出（excel）：

![在此处输入图像描述](../Images/6bba55740e3c5f8045fef09cf081d699.png)

我应该使用其他类型的块吗？而不是`block=c`？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:06:54.447

以下是一些可能对您的模板有所帮助的建议：

1.  `block=begin/block=end`通过将 TBS 标签替换为`[base;block=beging;sub1=trainees;sub2=modules]`，`[base;block=row+row+row+row+row;sub1=trainees;sub2=modules]`然后删除标签来避免使用`[base;block=end]`。这可能暂时不会改变事情，但这将防止进一步的意外 XML 拆分。

2.  在几个 [base_sub2] 标记中添加没有值的参数“p1”。像这样：`[base_sub2.module;block=c;p1]`和`[base_sub2.test;block=c;p1]`。这将使 TBS 使用多块而不是具有交替部分的块。

3.  `[base_sub2;block=c;p1]`在红色单元格“Modulos”中添加一个 TBS 标签。

4.  避免使用合并后可以移动的合并单元格（如块下单元格中的单元格）。这是因为在 Ms Excel 中，合并单元格的信息与单元格本身分开保存。所以不能简单地复制单元格来复制它。改用单元格格式。例如：为单元格“Formados”、“Media Final”、“Situaciao Final”使用背景颜色、前景色、边框。

**模板示例：**

![模板](../Images/d3e13e0cb37fc37b5bfd7534569f456d.png)

**结果：**

![在此处输入图像描述](../Images/2500373a098e38aff3b28c50fff70260.png)

# android - 如何在android中取消异步任务？

> ID：12036199
> 
> 赞同：1
> 
> 时间：2012-08-20T10:40:51.817
> 
> 标签：android, android-asynctask, contacts

嗨，在我的应用程序中有一个异步任务来读取联系人详细信息（这需要一点时间）。它做得很好，但是当我在完成之前取消异步任务时，问题是什么，获取详细信息我的应用程序崩溃了。所以我我认为当我取消异步任务时会使应用程序退出。我在网上搜索并找到了一些方法但它没有用，那么在取消异步任务时如何退出我的应用程序？ **我的 Asyn 任务代码（普通代码）**

```
public class FetchingContact extends AsyncTask<String, Void, Void> {
    private final ProgressDialog dialog = new ProgressDialog(
            MobiMailActivity.this);

    // can use UI thread here
    protected void onPreExecute() {
        this.dialog.setMessage("Fetching Contact...");
        this.dialog.show();
    }

    // automatically done on worker thread (separate from UI thread)
    protected Void doInBackground(final String... args) {
        readContact();
        if (isCancelled ()) {

            finish();
        }

        return null;
    }

    // can use UI thread here
    protected void onPostExecute(final Void unused) {
        if (this.dialog.isShowing()) {
            this.dialog.dismiss();
            CharSequence test=sam;
            //  search_sort.setText(test);
                check(test);

        }
        // reset the output view by retrieving the new data
        // (note, this is a naive example, in the real world it might make
        // sense
        // to have a cache of the data and just append to what is already
        // there, or such
        // in order to cut down on expensive database operations)
        // new SelectDataTask().execute();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:50:54.583

A`AsyncTask`可以随时通过调用来取消`cancel(boolean)`。调用此方法将导致后续调用`isCancelled()`返回 true。调用此方法后，将在返回后调用`onCancelled(Object)`, 而不是。**为了确保尽快取消任务，如果可能（例如在循环内），您应该始终从 doInBackground(Object[]) 定期检查 isCancelled() 的返回值。**`onPostExecute(Object)``doInBackground(Object[])`

 **[这是从AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)字面上引用的。但是看到你已经把你的整个代码放在了一个叫做 readContact() 的方法中，你不能这样做。

你可以做的是：

```
protected void onPostExecute(final Void unused) {
    if (this.dialog.isShowing()) {
        this.dialog.dismiss();
        (if !isCancelled()) {
            CharSequence test=sam;
        //  search_sort.setText(test);
            check(test);
        }
    }
} 
```

因此，您在 AsyncTask 结束时检查是否应该做某事。这不是这样做的方法，所以我建议您采用您的`readContact()`方法，并将其完全放在 AsyncTask 中，或者如果它是 AsyncTask 中的方法，`isCancelled()`请在此处调用 check in。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:52:28.030

1.  我假设您尝试通过调用`get()`方法来获取结果，该方法在取消任务时引发异常。[`isCancelled()`](https://developer.android.com/reference/android/os/AsyncTask.html#isCancelled%28%29)在尝试检索结果之前检查如何？

    `if(!task.isCancelled()) { Result result = task.get(); }`

2.  此外，您可以尝试检查[`onCancelled()`](https://developer.android.com/reference/android/os/AsyncTask.html#onCancelled%28Result%29). 这在 UI 线程上运行，将在任务取消时调用。**

# php - 端口随机间隔关闭？（Windows和Linux）

> ID：12036201
> 
> 赞同：1
> 
> 时间：2012-08-20T10:40:54.440
> 
> 标签：php, linux, port, monitor, windows-server

我有一个端口监视器，它查询一些服务器端口以检查它们的状态'。有时在同一台服务器上（不是全部或许多）端口 21 关闭，但 80 开启。或者端口 3001 已关闭，而 443 正在工作等。

这怎么可能？为什么端口有时会在它们应该启动时显示它们已关闭？这是一个问题吗？我有几个不同的服务器：ubuntu、2003、centos、2008 r2，但它发生在所有服务器上（随机间隔）。

这是我的端口监视器代码：

```
function ping($host,$port,$timeout)
{
   $tB=microtime(true); 
   $fP=fSockOpen($host,$port,$errno,$errstr,$timeout); 
   if(!$fP)
       {return "DOWN";}
   $tA=microtime(true);
   return "UP";
} 
```

# c# - 任何自动关闭的 Java 迭代器（如 C#）？

> ID：12036203
> 
> 赞同：2
> 
> 时间：2012-08-20T10:41:11.520
> 
> 标签：c#, java, iterator, idisposable

我来自 C# 背景，其中迭代器实现[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)接口。Java中是否有任何迭代器实现了类似的接口，使它们自动关闭？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T10:48:41.750

Java 的 Iterator 只是用于迭代某些对象集合的抽象。如果底层数据结构在迭代后需要一些清理（例如关闭文件），那么您需要保留对该底层对象的引用，以便您可以做任何必须做的事情来“处理”它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T12:36:33.457

在 Java 7 中，您可以创建自己的迭代器（或一个装饰器），它也恰好实现了 AutoCloseable。然后您可以在 try 块中使用它：

```
try ( Iterator<MyObject> it = new MyAutoCloseableIterator(list) ) {
    while (it.hasNext()) {
       MyObject obj = it.next();
    }
} 
```

在 try 块结束时，如果 Iterator 实现了 AutoCloseable 接口，“.close()”方法将自动调用它。

[http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

但是，我不相信任何内置迭代器（通常是集合的内部类，因此不公开可用）实现此接口。

另一种选择是（再次）编写您自己的迭代器，并在“.hasNext()”方法返回 false 时关闭资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T10:45:30.593

在Java中，[`Iterator`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html)本身就是一个接口。而且它没有任何`close()`方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T10:58:16.623

这是[Iterator提供的 API](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html)

> 方法总结
> 
> boolean hasNext()
> 如果迭代有更多元素，则返回 true。E next()
> 返回迭代中的下一个元素。void remove()
> 从底层集合中移除迭代器返回的最后一个元素（可选操作）。

它旨在替换`Enumeration`Java 集合框架，并用于迭代集合。它基于`Iterator`设计模式。
它的目的正是所提供的。即迭代。`close`与等无关。
如果实现迭代器接口的类（例如[Scanner](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html) ）提供`close`this 是`Scanner`API 的一部分。与迭代器方面/接口无关

# eclipse - 如何在 Apache http 服务器中部署 html 或 javascript 应用程序

> ID：12036205
> 
> 赞同：4
> 
> 时间：2012-08-20T10:41:16.640
> 
> 标签：eclipse, apache

您能否向我指出一些有关使用 Eclipse 将包含 html 和 javascript 的 Web 应用程序部署到 apache http 服务器实例的文档？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T10:44:06.670

**[使用此处](https://stackoverflow.com/a/8629043/325742)**的说明适应最新的 Apache 2.4 ：

要求：Apache 服务器（我从**[这里](http://mirrors.ukfast.co.uk/sites/ftp.apache.org//httpd/binaries/win32/)**下载了 v2.4 ）

**使用 Eclipse 在 Apache 服务器上发布静态内容和 JavaScript**

> 添加服务器

1.  `Window -> Show View -> Servers`
2.  右键单击内部`Servers`选项卡
3.  新建 -> 服务器 -> HTTP 服务器 -> 下一步
4.  添加发布目录：在我的情况下（`C:\Program Files (x86)\Apache Group\Apache2\htdocs`）
5.  下一步 -> 添加端口（在我的情况下为 8080）

> 创建一个网络项目

6.  切换到 Web 视图（右上角）
7.  右键单击左侧的项目资源管理器
8.  新建 -> 项目 -> Web -> 静态 Web 项目
9.  为项目命名
10.  选择运行时目标作为 HTTP 服务器
11.  Next -> 注意你的默认上下文根
12.  结束

> 将当前的 js 和 html 文件复制到 Project Explorer 的“WebContent”目录中。

* * *

> 在服务器选项卡中

1.  右键单击 HTTP 服务器
2.  添加 - 删除 -> 添加您的项目 -> 完成
3.  右键单击 Http Server -> 发布 4 完成！

* * *

您应该能够在发布目录中看到您的内容。您可以访问该页面

`http://localhost:<port>/context_root`

此外，对于这个问题，**[这](https://stackoverflow.com/questions/10400752/config-apache-http-server-for-eclipse)**是值得一读的。

# java - 映射如何更改键值

> ID：12036208
> 
> 赞同：2
> 
> 时间：2012-08-20T10:41:27.940
> 
> 标签：java, android

可以在java中更改特定键的值

```
 int increment = 0;
    if (tilesMap.containsKey('a'){
    int value = tilesMap.get('a')

// setting the increment value in 'a'

    increment ++;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T10:43:24.147

```
 int increment = 0;
    if (tilesMap.containsKey('a'){
    int value = tilesMap.get('a')

    tilesMap.put('a', ++value);

    increment ++;
    } 
```

之后`put`，旧值将被删除，新值将被分配

如果你有`Map<Character, Integer>`.
如果你有`Map<String, Integer>`，使用`"a"`代替`'a'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:58:20.217

注意。由于在 map 的键中使用“char”文字但“String”，您无法工作。

此代码将编译并显示“不包含”a。因此您可能会产生无法将某些内容放入地图的错觉。

```
 Map<String, Integer> tilesMap = new HashMap<String, Integer>();   

    Integer increment = 0;
    tilesMap.put("a", increment);
    if (tilesMap.containsKey('a')){
        System.out.println("contain \"a\"");

        int value = tilesMap.get('a');

        // setting the increment value in 'a'

        increment ++;
    }else{
        System.out.println("does not contain \"a\"");
    } 
```

# c# - EF 4：LINQ to Entities 不支持指定的类型成员“*”

> ID：12036210
> 
> 赞同：3
> 
> 时间：2012-08-20T10:41:32.960
> 
> 标签：c#, entity-framework

我有一个像这样的映射类：

```
[Table("MyTable")]
class MyClass         
{   
        //properties; id, name, etc...

        private string _queuedToWHTime = string.Empty;
        [Column("QueuedToWHTime")]
        public string QueuedToWHTime
        {
            get { return _queuedToWHTime; }
            set { _queuedToWHTime = value; }
        }

        public DateTime? QueuedToWHTime_DateTime
        {
            get
            {
                if (!string.IsNullOrWhiteSpace(_queuedToWHTime))
                {
                    return Convert.ToDateTime(_queuedToWHTime);
                }
                return null;
            }
        }
} 
```

和一个表（MyTable）：

```
CREATE TABLE webnews_in
(
Id                INT NOT NULL auto_increment,
QueuedToWHTime    VARCHAR (50) NULL
...
PRIMARY KEY (Id)
); 
```

当我试图这样查询时：

```
var searchRslt=(from m in queryableNews
    orderby m.QueuedToWHTime_DateTime descending
    select m).ToList(); 
```

我得到一个`NotSupportedException`：**LINQ to Entities 不支持指定的类型成员“QueuedToWHTime_DateTime”。仅支持初始化程序、实体成员和实体导航属性。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T10:43:48.860

您不能使用 EF 查询自定义属性。无法在 SQL 中翻译自定义属性。

您可以这样做以强制 orderby 在“内存中”完成。

```
var searchRslt = queryableNews
    .AsEnumerable()
    .OrderBy(m => m.QueuedToWHTime_DateTime)
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:28:28.343

问题在这里：

```
var searchRslt=(from m in queryableNews
orderby m.QueuedToWHTime_DateTime descending
select m).ToList(); 
```

您正在尝试使用该属性`.QueuedToWHTime_DateTime`，但该属性在数据库中不存在。您需要使用数据库中使用的名称。在这种情况下`.QueuedToWHTime` ，所以：

```
var searchRslt=(from m in queryableNews
orderby m.QueuedToWHTime descending
select m).ToList(); 
```

如果数据库属性在这种情况下不可用，则必须提取整个列表，将其转换为 IEnumerable（任何都可以），然后按其属性过滤/排序 IEnumerable。

像这样的东西：

```
var result = queryableNews.ToList().OrderbyDescending(x=>x.QueuedToWHTime_DateTime).ToList(); 
```

# debugging - Drupal：在 Teaserview 中调试

> ID：12036215
> 
> 赞同：0
> 
> 时间：2012-08-20T10:41:55.767
> 
> 标签：debugging, drupal, drupal-7, drupal-nodes

只要我在单视图页面上，我就可以使用它来查看我的节点的整个数组：

```
dpm($content); 
```

它还可以帮助我通过“管理显示”获取有关已激活字段的信息。

但例如在起始页上，没有单一视图，只有预告片列表，因此，尝试使用 dpm($content) 进行调试时会出现超时；

有没有类似的东西

```
dpm($content[5360]); 
```

并且数字是nodeid，用于获取某个节点的输出，但不是在单页上，而是在带有teaserviews的页面上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:01:16.547

我假设您`dpm($content)` 的节点模板文件中有该语句？

你应该能够做这样的事情：

```
if ($node->nid == 5360) {
  dpm($content);
} 
```

# python - 有什么方法可以访问 使用 lxml.html 解析表单时的文本？

> ID：12036217
> 
> 赞同：0
> 
> 时间：2012-08-20T10:41:58.557
> 
> 标签：python, lxml

我正在尝试解析一个看起来像这样的 html 表单：

```
<select name="country">
<option value="1">Afghanistan</option>
<option value="2">Albania</option>
<option value="3">Algeria</option>
<option value="4">Andorra</option>
....
</select> 
```

使用 lxml.html.parse 解析文档后，我可以使用以下方法访问值列表：

```
doc.forms[0].elements["country"].value_options 
```

但是，这将返回一个原始值列表（['1', '2', '3', '4' ...]），没有相应的国家名称。有没有一种简单的方法来获取选项标签的内容，包括文本和值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:50:27.977

我使用 xpath 来通过 html... 尝试：

```
options = doc.xpath("//select[@name='country']/option")
option_text = [option.text for option in options] 
```

# android - 如何在 android 4.0 中以编程方式打开/关闭扬声器

> ID：12036221
> 
> 赞同：22
> 
> 时间：2012-08-20T10:42:15.933
> 
> 标签：android, android-4.0-ice-cream-sandwich, speaker

我通过媒体播放器播放文件，我想提供扬声器开/关、通过耳机播放、蓝牙等选项。我尝试了下面的代码，它适用于 android 2.2，但我想要的东西也适用于 2.2 和 4.0。你能帮我以编程方式打开/关闭扬声器并通过耳机播放吗？

```
AudioManager audioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
    if(isOn){
        audioManager.setMode(AudioManager.MODE_IN_CALL);    
        audioManager.setMode(AudioManager.MODE_NORMAL); 
    }else{
        //Seems that this back and forth somehow resets the audio channel
        audioManager.setMode(AudioManager.MODE_NORMAL);     
        audioManager.setMode(AudioManager.MODE_IN_CALL);        
    }
    audioManager.setSpeakerphoneOn(isOn); 
```

PS：我已在清单中授予此权限：

```
android.permission.MODIFY_AUDIO_SETTINGS 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-20T12:33:24.300

像这样的东西可能适用于某些设备（我只在 XPeria P 上测试过）：

```
final static int FOR_MEDIA = 1;
final static int FORCE_NONE = 0;
final static int FORCE_SPEAKER = 1;

Class audioSystemClass = Class.forName("android.media.AudioSystem");
Method setForceUse = audioSystemClass.getMethod("setForceUse", int.class, int.class);
setForceUse.invoke(null, FOR_MEDIA, FORCE_SPEAKER);
// To get back to the default behaviour, use the combination FOR_MEDIA,FORCE_NONE. 
```

该组合`FOR_MEDIA, FORCE_SPEAKER`通常仅在内部用于将 FM 收音机音频路由到扬声器（因为 FM 收音机需要您插入有线耳机/耳机以充当天线）。没有 FM 收音机功能（或使用替代实现）的设备可能会忽略此参数组合，因此此方法不适用于此类设备。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-21T12:59:51.523

```
AudioManager mAudioMgr = (AudioManager)getSystemService(Context.AUDIO_SERVICE); 

Button mVolumeButton = (Button)findViewById(R.id.btn_Volume);
        mVolumeButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if(mAudioMgr.isWiredHeadsetOn()){
                    mAudioMgr = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
                    mAudioMgr.setWiredHeadsetOn(false);
                    mAudioMgr.setSpeakerphoneOn(true);
                    mAudioMgr.setMode(AudioManager.MODE_IN_COMMUNICATION);

                    Toast.makeText(getApplicationContext(), "SpeakerPhone On", Toast.LENGTH_LONG).show();
                }else{
                    mAudioMgr.setMode(AudioManager.MODE_IN_COMMUNICATION);
                    mAudioMgr.setSpeakerphoneOn(false);
                    mAudioMgr.setWiredHeadsetOn(true);
                    Toast.makeText(getApplicationContext(), "Wired Headset On", Toast.LENGTH_LONG).show();
                }
            }
        }); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-14T11:50:20.820

您可以随时购买后置扬声器或前置听筒。

如果没有连接配件；

使用`audioManager.setMode(AudioManager.MODE_IN_CALL);`&`audioManager.setSpeakerphoneOn(false);`使用前置扬声器/听筒。但这会在听筒而不是扬声器上播放音频。要使用后置扬声器，请使用`audioManager.setMode(AudioManager.MODE_NORMAL);`&`audioManager.setSpeakerphoneOn(true);`

如果连接了附件；使用 audioManager.setMode(AudioManager.MODE_IN_CALL); & audioManager.setSpeakerphoneOn(假); 使用前置扬声器/听筒。但这会在听筒而不是扬声器上播放音频。要使用后置扬声器，请使用`audioManager.setMode(AudioManager.MODE_IN_CALL);`&`audioManager.setSpeakerphoneOn(true);`

注意：确保`audioManager.setWiredHeadsetOn(boolean on)`并`audioManager.setBluetoothScoOn(boolean on)`设置为**`false`**通过耳机路由音频。并设置为**`true`**相应地路由音频。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-08-24T09:04:00.793

尝试遵循代码片段：

```
//for speakerphone on
audioManager.setMode(AudioManager.MODE_NORMAL);
audioManager.setSpeakerphoneOn(true);

//for headphone on
audioManager.setMode(AudioManager.MODE_IN_COMMUNICATION);
audioManager.setSpeakerphoneOn(false); 
```

顺便说一句，我在 Android 7.0（Redmi 4x）中进行了测试，效果很好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-22T07:52:58.623

问题解决了。对于所有仍在寻找答案的人。那么这不是一个错误，而只是一个棘手的事情。您需要使用 PhoneStateListener

使用本指南：[http ://danielthat.blogspot.co.il/2013/06/android-make-phone-call-with-speaker-on.html](http://danielthat.blogspot.co.il/2013/06/android-make-phone-call-with-speaker-on.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-10-29T10:12:13.920

如果你只是想在你身上打开你的免提电话，只需在你的活动的 oncreate() 中写下这一行。

```
static AudioManager audioManager =  (AudioManager)getSystemService(Context.AUDIO_SERVICE);
audioManager.setMode(AudioManager.MODE_IN_CALL);
audioManager.setSpeakerphoneOn(true); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-04-20T08:51:17.757

尝试这个。

```
AudioManager audioManager =(AudioManager)getSystemService(Context.AUDIO_SERVICE);
    if (isOn) {
        isOn = false;
        audioManager.setMode(AudioManager.MODE_IN_CALL);
        audioManager.setMode(AudioManager.MODE_NORMAL);

    } else {
        isOn = true;
        audioManager.setMode(AudioManager.MODE_NORMAL);
        audioManager.setMode(AudioManager.MODE_IN_CALL);

    }
    audioManager.setSpeakerphoneOn(isOn); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-20T10:48:24.210

尝试

```
AudioManager.speakerphone(true); 
```

看看[这个](http://developer.android.com/reference/android/media/AudioManager.html)。

# windows-phone-7 - 在 wp 中使用滚动查看器的分页概念

> ID：12036231
> 
> 赞同：0
> 
> 时间：2012-08-20T10:42:47.527
> 
> 标签：windows-phone-7

我是 wp7 的新手。我想在我的页面中添加三个图像。但不是在一个页面上。它应该在三页上。当我移动图像时，图像发生了变化，我在 secong 页面上保持我的页眉和页脚固定。

那么如何在一页中添加三个图像呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:40:01.913

为什么要使用滚动查看器？

1）尝试使用没有任何枢轴标题的枢轴控件。将您的图像添加到三个不同的枢轴项。在枢轴中，您指定的页眉和页脚将保持固定，只有内容会改变。

2）您也可以创建一个页面。将三个图像添加到列表中。将其绑定到您的图像控件。在轻弹手势上，更改图像 URL，从而更改正在显示的图像，但保持其他所有内容不变。

我给了你两种方法，尝试使用最适合你的任何一种。有关更多信息，请尝试研究枢轴和轻弹手势。

# playframework-2.0 - SecureSocial 2 - 使用自己的数据库注册和登录 [play framework 2]

> ID：12036232
> 
> 赞同：0
> 
> 时间：2012-08-20T10:42:48.793
> 
> 标签：playframework-2.0, securesocial

1.  我想通过我自己的数据库在安全社交 2 中使用注册和登录。我尝试`doSave`在课堂上使用方法`InMemoryUserService`，但无法检索密码。（我正在使用 Java）
2.  如何使用`doFind`方法验证用户日志记录。

请帮助我。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:01:43.720

要使用 HTML 表单身份验证，您必须：

1.  注册[UsernamePasswordProvider](https://github.com/jaliss/securesocial/blob/master/module-code/app/securesocial/core/providers/UsernamePasswordProvider.scala)
2.  通过在数据库中搜索，从 id 和提供者创建一个[SocialUser](https://github.com/jaliss/securesocial/blob/master/module-code/app/securesocial/core/java/SocialUser.java)的新实例，实现服务的[doFind方法。](https://github.com/jaliss/securesocial/blob/master/samples/java/demo/app/service/InMemoryUserService.java#L42)在此 SocialUser 中，您必须使用数据库中的属性填充[passwordInfo](https://github.com/jaliss/securesocial/blob/master/module-code/app/securesocial/core/java/SocialUser.java#L74)属性
3.  UsernamePasswordProvider 将通过[这行代码](https://github.com/jaliss/securesocial/blob/master/module-code/app/securesocial/core/providers/UsernamePasswordProvider.scala#L47)为您检查密码：

    `if user.passwordInfo.isDefined && use[PasswordHasher].matches(user.passwordInfo.get, credentials._2)`

# wordpress - wordpress 导入功能

> ID：12036233
> 
> 赞同：2
> 
> 时间：2012-08-20T10:42:49.313
> 
> 标签：wordpress

我有一个开发站点和一个实时站点，其中数据库在 2 周内有所不同（在开发方面已在新帖子和页面之间添加）。我现在想要的是从实时站点导出帖子和页面并在开发端导入，但不覆盖新创建的帖子和页面。是否可以使用标准的 wordpress 导入导出插件来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:56:05.283

Wordpress 中的导入工具不会覆盖您的帖子和页面，它只是将它们添加到您的数据库中。您可以阅读以下主题：

[http://wordpress.org/support/topic/wordpress-import-1](http://wordpress.org/support/topic/wordpress-import-1)

[http://en.forums.wordpress.com/topic/will-import-over-write-existing-posts](http://en.forums.wordpress.com/topic/will-import-over-write-existing-posts)

但是，在执行之前备份数据库始终是一个好主意。

# r - 与彭博的 R 连接

> ID：12036234
> 
> 赞同：3
> 
> 时间：2012-08-20T10:42:50.043
> 
> 标签：r, bloomberg

我想知道是否有办法将 R 连接到 Bloomberg 以获得真实的市场数据（RBloomberg 软件包不适用于最新的 R 版本：

```
 install.packages("RBloomberg")
Installing package(s) into ‘C:/Documents and Settings/b001akh/My Documents/R/win-library/2.15’
(as ‘lib’ is unspecified)
Warning in install.packages :
  package ‘RBloomberg’ is not available (for R version 2.15.0) 
```

)

否则，我知道还有其他软件包可以使用 R 获取市场报价，例如 quantmod，但我想使用 Bloomberg 来避免 15-20 分钟的延迟。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T11:43:47.873

给你一些好[消息](http://r.789695.n4.nabble.com/RBloomberg-package-rename-td4630766.html)：

> 以前称为 RBloomberg 的软件包已更名为 Rbbg

所以试试

```
install.packages("Rbbg", repos = "http://r.findata.org") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-24T00:47:33.317

为了完整起见，请允许我提到 Whit、John 和我向 CRAN 发布了一个新包[Rblpapi](http://dirk.eddelbuettel.com/code/rblpapi.html)，您可以通过它直接安装

```
 install.packages("Rblpapi") 
```

它不依赖于 Java，可在 Windows、OS X 和 Linux 上运行。

# java - 关于在自定义日志文件中记录日志错误消息

> ID：12036235
> 
> 赞同：0
> 
> 时间：2012-08-20T10:42:49.980
> 
> 标签：java, log4j

我有一个关于日志记录的查询是，为了登录我的应用程序，我使用的是 apache log4j api，并且我能够在单独的日志文件中记录我的应用程序的事件，查询是在我的应用程序中，让我们说在我通常写的 catch 块内e.printstacktrace() 这不是正确的方法，因为我还想在自定义日志文件中而不是在控制台中记录我的错误，所以对于这个在 catch 块中我应该写什么来将消息记录回自定义日志文件。 。 请指教

```
catch (Exception e) {
 log.logError("Error getting  value.", e);
      } 
```

还请建议如何记录其他消息，如警告和警报也..！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:44:46.000

```
log.error("Error getting value. " + e.getLocalizedMessage()); 
```

# .htaccess - 从 url 中删除 index.php

> ID：12036236
> 
> 赞同：0
> 
> 时间：2012-08-20T10:42:52.260
> 
> 标签：.htaccess, codeigniter

我正在使用 codeigniter 我想从 url 重写 index.php。

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ ./index.php/$1 [L] 
```

当我在`.htaccess` `index.php`不删除时使用此代码时。

`index.php`但是当我从网址中手动删除时，它可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:49:01.080

通过删除**config/config.php**中的`'index.php'`并替换为来完成此操作。`''`

 **那应该是文件中创建的第二个键。这将改变您网站上的所有`base_url()`功能`site_url()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:48:42.487

更改 $config['index_page'] = 'index.php'; 在 config.php 到 $config['index_page'] = '';

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:47:59.560

> 当我在我的 .htaccess index.php 中使用此代码时，不会删除。

这些规则仅将请求路由到 index.php，它不会对“删除”它做任何事情。这取决于您在自己的内容中生成的链接。如果由于某种原因，您需要处理外部链接并希望将客户端重定向到缺少 index.php 的新 URL（如 Google 索引机器人），那么您可以这样做：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index.php/([^\ ]+) 
RewriteRule ^index.php/ /%1 [L,R=301] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T13:32:17.273

`AllowOverride All`

确保目录部分的 apache 配置中存在允许覆盖指令。如果`.htaccess`文件位于指定目录中，则可以读取该文件。

例如。

```
<Directory /var/www>
AllowOverride All
</Directory> 
```

[http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)**

# java - Spring Security 预认证

> ID：12036238
> 
> 赞同：0
> 
> 时间：2012-08-20T10:42:55.037
> 
> 标签：java, jakarta-ee, spring-security, pre-authentication

我被要求修改一个用 Java EE+Spring+Hibernate 构建的 Web 应用程序，以通过 Spring Security 提供安全性。

我以前没有使用过 Spring Security，我已经阅读了文档，但我没有看到使它工作的正确方法。

我们有一个登录页面，其中嵌入了另一个页面，该页面具有实际的登录表单，该表单调用另一个 Web 应用程序的登录操作，并使用登录结果调用我们应用程序的一个方法。（嵌入的登录页面是处理登录的“外部”Web 应用程序的一部分）。

我不明白我应该如何配置 Spring Security。我想这是一个预身份验证场景，但我不知道我应该如何让它工作。

这是我的 security-context.xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:security="http://www.springframework.org/schema/security"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <!-- preauthentication -->    
    <security:global-method-security pre-post-annotations="enabled">
    </security:global-method-security>

   <security:http auto-config="false" use-expressions="true" entry-point-ref="http403EntryPoint" access-denied-page="/403.jsp">
        <security:intercept-url pattern="/" access="permitAll"/>
        <security:intercept-url pattern="/403.jsp" access="permitAll"/>
        <security:intercept-url pattern="/gestion/**" access="permitAll"/>
        <security:intercept-url pattern="/consulta/**" access="hasRole('ROLE_ADMIN')"/>
        <security:intercept-url pattern="/importacion/**" access="hasRole('ROLE_ADMIN')"/>
        <!-- Allow non-secure access to static resources  -->
        <security:intercept-url pattern="/resources/**" access="permitAll"/>

        <security:logout logout-success-url="/"/>
    </security:http>

    <bean id="http403EntryPoint" class="org.springframework.security.web.authentication.Http403ForbiddenEntryPoint">
    </bean>

    <bean id="filterChainProxy" class="org.springframework.security.web.FilterChainProxy">
        <security:filter-chain-map path-type="ant">
            <security:filter-chain pattern="/**" filters="j2eePreAuthFilter"/>
        </security:filter-chain-map>
    </bean>

    <security:authentication-manager alias="authenticationManager">
        <security:authentication-provider ref='preAuthenticatedAuthenticationProvider'/>
    </security:authentication-manager>

    <bean id="preAuthenticatedAuthenticationProvider" class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
        <property name="preAuthenticatedUserDetailsService" ref="preAuthenticatedUserDetailsService"/>
    </bean>

    <bean id="preAuthenticatedUserDetailsService"
            class="org.springframework.security.web.authentication.preauth.PreAuthenticatedGrantedAuthoritiesUserDetailsService"/>

    <bean id="j2eePreAuthFilter" class="es.myapp.security.MyUserJ2eePreAuthenticatedProcessingFilter">
        <property name="authenticationManager" ref="authenticationManager"/>
        <property name="authenticationDetailsSource" ref="authenticationDetailsSource"/>
        <property name="continueFilterChainOnUnsuccessfulAuthentication" value="false"/>
    </bean>

  <bean id="authenticationDetailsSource" class="org.springframework.security.web.authentication.preauth.j2ee.J2eeBasedPreAuthenticatedWebAuthenticationDetailsSource">
    <property name="mappableRolesRetriever" ref="j2eeMappableRolesRetriever"/>
    <property name="userRoles2GrantedAuthoritiesMapper" ref="j2eeUserRoles2GrantedAuthoritiesMapper"/>
  </bean>

  <bean id="j2eeMappableRolesRetriever" class="org.springframework.security.web.authentication.preauth.j2ee.WebXmlMappableAttributesRetriever">
  </bean>

   <bean id="j2eeUserRoles2GrantedAuthoritiesMapper" class="org.springframework.security.core.authority.mapping.SimpleAttributes2GrantedAuthoritiesMapper">
    <property name="attributePrefix" value="test"/>
  </bean>

</beans> 
```

还有我的 web.xml

```
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <display-name>Aplicación Web</display-name>

    <!-- Define la localización de los ficheros de configuración de Spring -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/classes/applicationContext.xml
        </param-value>
    </context-param>

    <!-- Reads request input using UTF-8 encoding -->
    <filter>
        <filter-name>characterEncodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>characterEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter>
        <filter-name>myUserJ2eePreAuthenticatedProcessingFilter</filter-name>
        <filter-class>es.myapp.security.MyUserJ2eePreAuthenticatedProcessingFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>myUserJ2eePreAuthenticatedProcessingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Handles all requests into the application -->
    <servlet>
        <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
        <servlet-class>es.myapp.controller.MyDispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <!-- del. welcome files -->
    <!-- useful for Servlet 3 container (Tomcat 7 and Jetty 6) -->
    <welcome-file-list>
        <welcome-file></welcome-file>
    </welcome-file-list>

    <!-- Referencia a recursos jndi WAS -->
    <resource-ref id="ResourceRef_XISCO">
        <res-ref-name>jdbc/myapp</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
        <res-sharing-scope>Shareable</res-sharing-scope>
    </resource-ref>

</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:22:29.810

在登录调用者应用程序中调用方法时从另一个应用程序成功登录。您应该构建身份验证对象并为安全上下文持有者设置。

```
 UserDetails user = userDetailsManager.loadUserByUsername(username);
    Authentication auth = new UsernamePasswordAuthenticationToken(user, null, user.getAuthorities());
    SecurityContextHolder.getContext().setAuthentication(auth); 
```

不确定这是最好的方法，但这可能会解决您的问题。

# jboss - 在其他元数据文件中找不到 wsdlLocation

> ID：12036241
> 
> 赞同：2
> 
> 时间：2012-08-20T10:43:23.050
> 
> 标签：jboss, wsdl, jax-ws

我有配置了注释的 jax-ws Web 服务（jboss 实现）。

@WebService([...], wsdlLocation = "/WEB-INF/wsdl/service.wsdl")

wsld 文件包含在 war 文件中。war 文件包含在 ear 文件中，部署在 JBoss（版本：5.0.1.GA）上。

在部署期间，我收到如下错误消息：“在附加元数据文件中找不到 /WEB-INF/wsdl/service.wsdl！”

我尝试将文件放在很多地方：-war 文件的 META-INF 文件夹，-ear 文件的 META-INF 文件夹，-war 文件的类路径，

但我没有帮助。

任何人都知道我应该如何配置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-05T15:06:23.317

我有同样的问题，我这样解决：

`@WebService(targetNamespace="http://my.app.it/", wsdlLocation = "WEB-INF/wsdl/additional.wsdl")`

（WEB-INF 不以斜线开头）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:45:47.763

为了解决这个问题，我将 WSDL 放入了我从生成的存根创建的 jar 文件中。然后设置 wsdllocation，一切都很好。

我的蚂蚁目标的例子：

```
<target name="genclients" depends="clean, -createdirs">
    <wsimport
        fork="true"
        xnocompile="true"
        wsdl="${src.resource.dir}\${wsdl.name}"
        wsdllocation="/resources/${wsdl.name}"
        sourcedestdir="${src.generated.dir}"
        verbose="true"
        destdir="${target.classes.dir}"
        keep="true"
        extension="true"
        debug="true"
        package="com.fedex.ship.stub"
        xadditionalHeaders="true"
        binding="${basedir}/binding.xml"
        >
        <arg line="-mark-generated"/>
    </wsimport>

    <javac srcdir="${src.generated.dir}" destdir="${target.classes.dir}" includeantruntime="false" source="1.6" target="1.6" debug="true" deprecation="false" optimize="false" failonerror="true">
        <include name="**/*.java"/>
    </javac>

    <copy todir="${target.classes.dir}" preservelastmodified="true" overwrite="true">
      <fileset dir="${src.dir}" >
        <include name="**/*.wsdl"/>
        <include name="**/*.xsd"/>
      </fileset>
    </copy>

    <pathconvert property="manifest.classpath" pathsep=" ">
        <mapper>
            <chainedmapper>
                <flattenmapper />
            </chainedmapper>
        </mapper>
        <path>
        </path>
    </pathconvert>

    <mkdir dir="${target.classes.dir}/META-INF"/>
    <manifest file="${target.classes.dir}/META-INF/manifest.mf">
        <attribute name="Built-By" value="${user.name}"/>
        <attribute name="Class-Path" value="${manifest.classpath}"/>
    </manifest>

    <jar jarfile="${target.jar.dir}/${jar.name}" basedir="${target.classes.dir}" manifest="${target.classes.dir}/META-INF/manifest.mf" excludes=".settings,**/.svn"/>

    <!--
    <delete failonerror="false" includeEmptyDirs="true">
        <fileset dir="${target.classes.dir}"/>
    </delete>
    -->

</target> 
```

# c# - 使用 Assembly.LoadFrom 加载泛型类型

> ID：12036247
> 
> 赞同：4
> 
> 时间：2012-08-20T10:43:39.993
> 
> 标签：c#, generics, late-binding

在这里参考 Jon Skeet 的答案：[Pass An Instantiated System.Type as a Type Parameter for a Generic Class](https://stackoverflow.com/q/266115/592111)

我需要根据泛型类型的名称以及作为泛型类型参数的类型名称来加载泛型类型。所以从乔恩的例子中我会有：

```
string genName = "MyNamespace.Generic";
string itemName = "System.String"; 
```

我有以下代码将根据类型名称和完全合理的程序集名称/路径加载类型。它适用于“简单类型”

```
public Type GetTypeOf(string assemblyPath, string className)
{
    var asmbly = System.Reflection.Assembly.LoadFrom(assemblyPath); //open assembly
    return asmbly.GetType(className, true, true); //throws error, not case sensitive
} 
```

我希望按如下方式使用它：

```
//Get the types
var genTyp = GetTypeOf(genPath,genName);
var itemTyp = GetTypeOf(itemPath,itemName);

//Put them together:
var typ = getType.MakeGenericType(itemTyp); 
```

这落在第一行，`System.TypeLoadException`说明：

```
Could not load type <TypeName here> from assembly <AssemblyName here> 
```

我尝试了许多创建泛型的排列方式，包括提供完整的类名`MyNamespace.Generic<System.String>`。当我指定一个非泛型类型从包含泛型类型的同一个程序集中加载时，它可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T11:08:10.717

不幸的是，将 GetType 与泛型类型一起使用并不那么可读。您必须使用完整的限定类型名称，即使是泛型参数：。例如，`TestType<object>`读起来像这样：

```
TestType`1[[System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]] 
```

您的示例代码不包含类型声明，因此您必须使用它。你可以试试这个代码片段，看看调试器说了什么：

```
string typeName = typeof(MyNamespace.Generic<>).Name;
string fullTypeName = typeof(MyNamespace.Generic<>).FullName; 
```

结果应该可以帮助您获得正确的类型名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T11:38:26.003

根据上面卡斯滕的回答，我调整了我的`GetTypeOf`方法如下：

```
 public Type GetGenericTypeOf(string assemblyPath, string genericClass, string itemQualifiedClass)
    {
        string typString = String.Format("{0}`1[[{1}]]",genericClass,itemQualifiedClass)
        var asmbly = System.Reflection.Assembly.LoadFrom(assemblyPath); //open assembly
        return asmbly.GetType(typString, true, true); //throws error, not case sensitive
    } 
```

然后我可以按如下方式使用它：

```
var itemTyp = GetTypeOf(itemPath,itemName);
var genTyp = GetGenericTypeOf(genPath,genName,itemTyp.AssemblyQualifiedName);

//This genTyp is then good to go:
var genInst = Activator.CreateInstance(getTyp); 
```

没有必要，`MakeGenericType`因为返回的 genType 绕过了这一步。

我现在已经对此进行了完整的编写，包括我博客上的 VB.Net 版本的[代码](http://www.jonegerton.com/dotnet/loading-generic-types-with-assembly-loadfrom)。

# asp.net - 添加RequiredFieldValidator 调用的目标抛出异常时

> ID：12036248
> 
> 赞同：0
> 
> 时间：2012-08-20T10:43:41.220
> 
> 标签：asp.net, gridview, requiredfieldvalidator

我的网格视图：

```
<asp:GridView ID="MyGridView" runat="server" ShowFooter="true"
                                AutoGenerateColumns="False" Visible="True">
<Columns>
<asp:BoundField DataField="id" ItemStyle-HorizontalAlign="center"/>
<asp:BoundField DataField="fullName"  />
<asp:TemplateField HeaderText="situation>">
<ItemTemplate>
  <asp:DropDownList ID="dl_situation" runat="server">
   </asp:DropDownList>
</ItemTemplate>
</asp:TemplateField>

<asp:TemplateField>
 <ItemTemplate>
         <asp:TextBox ID="tbNr" runat="server"></asp:TextBox>
</ItemTemplate>
</asp:TemplateField>  
<asp:TemplateField HeaderText="Data">
<ItemTemplate>
 <asp:TextBox ID="tbDate" runat="server"></asp:TextBox>
 <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
      ErrorMessage="*" ControlToValidate="tbDate">
   </asp:RequiredFieldValidator>
 </ItemTemplate>
</asp:TemplateField>     
</Columns>
</asp:GridView> 
```

当我试图填充 GridView 它给了我错误

```
Uncaught Sys.WebForms.PageRequestManagerServerErrorException:     
Sys.WebForms.PageRequestManagerServerErrorException: Exception has been 
thrown by the target of an invocation. ScriptResource.axd:847
Error$create ScriptResource.axd:847
PageRequestManager$_createPageRequestManagerServerError ScriptResource.axd:765
PageRequestManager$_parseDelta ScriptResource.axd:1654
PageRequestManager$_onFormSubmitCompleted ScriptResource.axd:1415
$type.createDelegate ScriptResource.axd:628
$type.getHandler ScriptResource.axd:4338
raise ScriptResource.axd:7248
WebRequest$completed ScriptResource.axd:7252
Sys.Net.XMLHttpExecutor._onReadyStateChange 
```

在页面上的资源中，此错误位于此处

```
$type.create = function Error$create(message, errorInfo) {
    /// <summary locid="M:J#Error.create">Use this method to create a new error.   
   </summary>
    /// <param name="message" type="String" optional="true" mayBeNull="true">
     The error message.</param>
    /// <param name="errorInfo" optional="true" mayBeNull="true">
   A plain JavaScript object that contains extended information about the error.  
    The object should have a 'name' field that contains a string that identifies 
 the error   and any additional fields that are necessary to fully describe 
 the error.</param>
    /// <returns type="Error">An Error object.</returns>
    var e = Function._validateParams(arguments, [
        {name: "message", type: String, mayBeNull: true, optional: true},
        {name: "errorInfo", mayBeNull: true, optional: true}
    ]);
    if (e) throw e;

    var err = new Error(message);
**Uncaught Sys.WebForms.PageRequestManagerServerErrorException: 
Sys.WebForms.PageRequestManagerServerErrorException: 
 Exception has been thrown by the target of an invocation.**
    err.message = message;

    if (errorInfo) {
        for (var v in errorInfo) {
            err[v] = errorInfo[v];
        }
    }

    err.popStackFrame();
    return err;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-17T05:22:19.473

我遇到了同样的问题，并通过将**ClientIDMode="AutoID"**添加到 GridView ItemTemplate 中的验证器来解决它。

# linux - Cronjob 每小时运行一次

> ID：12036251
> 
> 赞同：1
> 
> 时间：2012-08-20T10:44:03.813
> 
> 标签：linux, cron

我编写了一个清除日志的小 bash 脚本（假设脚本名称是 clearLogs.sh）。

*   **我的任务：**每小时运行 bash 脚本以清除日志
*   **到目前为止我所做的：**我创建了我的 bash 脚本的符号链接并将其放在 /etc/cron.hourly 中。

    ```
    example -> cd /etc/cron.hourly    
    ln -s /home/sam/clearLogs.sh  clearLogs.sh 
    ```

现在，一个小时过去了，但日志还没有被删除。如果我独立运行脚本，它会按预期工作。你们能不能让我知道我在这里做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:55:03.763

1.在 clearLogs.sh 添加行：RUN_PATH=/you/script/path cd $RUN_PATH

2.cat "* */1 * * * /you/script/path/clearLogs.sh" >> $HOME/crontab.txt

3.crontab $HOME/crontab.txt

4.crontab -l，查看所有crontab作业

# django - Django：使用外键导出 MongoDB

> ID：12036253
> 
> 赞同：1
> 
> 时间：2012-08-20T10:44:19.470
> 
> 标签：django, mongodb, pymongo

我正在使用 Django 和 Mongodb，我试图像这样导出我的数据库：

```
./mongoexport -d foo_db -c foo_bar --csv -f "client,name,brand_manager_name,brand_manager_email" -o foo_bar.csv 
```

csv 文件和电子邮件字段中的foreignKey Client 是空白的。

在其他导出中，日期字段也是空白的。

你应该怎么做？

# scheme - 实现返回函数

> ID：12036259
> 
> 赞同：4
> 
> 时间：2012-08-20T10:44:40.913
> 
> 标签：scheme, continuations, callcc

我正在尝试`return`在 Scheme R6RS 中实现一个功能。我想要这样的东西：

```
(lambda ()
  (do-some-job-before)
  (return some-value)
  (do-some-job-after)) 
```

执行`(do-some-job-before)`，不执行 `(do-some-job-after)`和 lambda 函数的最终值`some-value`。

我想我必须使用延续。我试过了：

```
(define return #f)
(call/cc (lambda (k)
           (set! return k))) 
```

但它不起作用；例如

```
(+ 2 (return 3)) ; -> 3 (and not 5 as I expected) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T10:53:59.720

**编辑：**误读的问题。

事实上很容易:)

```
(call/cc 
  (lambda (return)
    (printf "before\n")
    (return 3)
    (printf "after\n"))) 
```

[这里](http://eval.ironscheme.net/?id=66)的例子。

**注意：**你不能一概而论，除非你把它包装在一个不卫生的宏的语法中。

# javascript - Google Maps JS API v3 上带有字母的“现代”标记

> ID：12036261
> 
> 赞同：0
> 
> 时间：2012-08-20T10:44:44.610
> 
> 标签：javascript, google-maps

我一直在网上搜索一段时间，寻找在谷歌地图上用字母创建标记的选项（又名：[https](https://maps.gstatic.com/mapfiles/markers2/red_markers_A_J2.png) ://maps.gstatic.com/mapfiles/markers2/red_markers_A_J2.png ）。我知道谷歌提供动态选项（https://developers.google.com/chart/image/docs/gallery/dynamic_icons），但现在已弃用，而且图标看起来很老派，不像上面链接中的那些。

所以谷歌过去在 API 中提供了这个选项，但现在看起来它只对他们自己可用？这不是很奇怪吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:06:21.420

这不是他们 API 的一部分，但我敢肯定他们不会介意您为地图借用他们的图像。只需将 PNG 上传到您自己的服务器并实例化您的标记，例如：

```
var markerImages = {
  a: new google.maps.MarkerImage('red_markers_A_J2.png', new google.maps.Size(20,34), new google.maps.Point(0,0)),
  b: new google.maps.MarkerImage('red_markers_A_J2.png', new google.maps.Size(20,34), new google.maps.Point(0,34)),
  c: …
}

var marker = new google.maps.Marker({
  position: myPosition,
  map: myMap,
  icon: markerImages.a
}); 
```

# json - 如何通过杰克逊解析json文件？

> ID：12036267
> 
> 赞同：0
> 
> 时间：2012-08-20T10:45:14.220
> 
> 标签：json, javabeans, jackson

我正在使用 Jackson 来解析 JSON 对象。它工作得很好，但在 bean 类中，成员变量之一是动态的。这意味着有时我的 json 属性返回一个字符串数组，有时返回相同的属性`return map<String,Object>`。

如何在 Beans 中为此属性定义 Setter 和 Getter 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:12:28.667

使用获取/返回对象的 getter/setter，Jackson 默认会从 json 流中确定类型。

唯一的问题是 Jackson 将反序列化为列表而不是数组（但是您可以将其转换为 setter 中的数组）。

如果你真的想要一个默认的数组，你可以看看 Genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)

# database - IV 关注静态数据的身份验证加密（GCM 模式）

> ID：12036271
> 
> 赞同：1
> 
> 时间：2012-08-20T10:45:22.190
> 
> 标签：database, authentication, encryption, cryptography

我计划在 GCM 模式下使用 AES 加密来保护我的应用程序的静态数据。

我浏览了 NIST 对 GCM 模式的建议。它提到IV的唯一性非常重要。它说如果（密钥，IV）对重复，对手可以构造密文伪造。

现在应用程序的设计是这样的，每当用户访问数据时，整个数据库都会被解密并加载到内存中。在关闭应用程序时，数据被加密并保存到数据库中。

在这种情况下生成和处理 IV 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:20:08.057

每次加密时都需要一个新的 NONCE，即使是相同的字段，也不应该使用相同的 NONCE 进行加密。最好用一个新的、随机生成的 IV 开始每个加密，并将这个随机添加到密文中。如果你不这样做，你很可能会泄露数据，甚至是整个纯文本。

# linq - 使用 ORM 和 LINQ 在架构上是否不合理？

> ID：12036272
> 
> 赞同：2
> 
> 时间：2012-08-20T10:45:27.293
> 
> 标签：linq, tsql, architecture, orm, telerik

我目前正在使用可恨的 Telerik Open Access，但也就是说，一般来说，使用 LINQ 和 ORM 没有架构问题吗？

我突然想到，我们正在做的是将数据操作的负担从经过优化以执行该任务的 DBMS 转移到在我的情况下不是的网络服务器。

此外，至少在 Telerik 的案例中，我们限制了编码模型的灵活性。在这个项目中，我必须提取并创建不直接映射到 CRUD 接口的复杂数据结构。至少在 Telerik Open Access 中，如果我使用存储过程来创建数据并且它没有映射到已知实体，我必须将数据作为对象数组返回。

因此，我使用 ORM 创建的“实体”并使用 LINQ 操作它们。与相对简单的等效 SQL 语句相比，生成的代码复杂得离谱。

我会对您关于使用 ORM 和 LINQ 的主张以及这在架构上是否不合理的观点感兴趣。

这对我来说当然是有感觉的。

我没有包含代码示例，因为实际代码无关紧要。也就是说，知道 10 行 T-SQL 查询（其中 6 行是连接）已经变成 300 行（包括空格）的 LINQ 语句来做同样的事情，这可能是有益的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:51:42.967

如果您使用 Linq2SQL 或 Linq2Entities，它们实际上会生成 SQL 代码，并且“数据操作的负担”仍将在 DBMS 上。您编写的 Linq 代码在大小上将非常类似于 SQL 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:28:43.830

Using Linq in addition to an ORM isn't architecturally unsound.

You always have some amount of data manipulation on the database side and some amount on the client side. As a developer, it is yours to find the right balance. Obviously, if your ORM obliges you to do such convoluted things as manipulating a jumble of untyped data on the client side and doing massive queries on it with Linq, there's a problem. Either with your ORM or the way your system was designed.

# facebook - Facebook Like 按钮重定向

> ID：12036281
> 
> 赞同：2
> 
> 时间：2012-08-20T10:45:58.353
> 
> 标签：facebook, facebook-like

我们提供了一个 Facebook 的like 按钮，设置如下：

```
<fb:like href="http://www.mydomain.com/mypage?id=123456" send="true" layout="button_count" width="134" show_faces="false" action="recommend" font=""></fb:like> 
```

URL [http://www.mydomain.com/mypage?id=123456](http://www.mydomain.com/mypage?id=123456)实际上指向一个重定向，最终将用户重定向到最终页面。

当用户单击 Like 按钮时，Facebook 会显示最终页面的规范 URL，而不是 href 中指定的 URL。有没有办法阻止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:02:33.127

> 该 URL`http://www.mydomain.com/mypage?id=123456`实际上指向一个重定向，该重定向最终将用户重定向到最终页面。

这对用户有什么好处吗？

> 有没有办法阻止这种情况发生？

只有当你停止重定向时——一般情况下（如果它对用户没有好处，为什么首先要这样做），或者专门针对 Facebook 抓取工具（通过[它的用户代理检测它](https://developers.facebook.com/docs/opengraphprotocol/#bestpractices)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T14:42:11.757

实际上，当我刚开始作为开发人员时，我遇到了非常困难的时期，并且可能也遇到过一两次这篇文章。

我为此目的制作了一个工具——因为我认为它可能对其他人有帮助：

[Facebook Like 按钮生成器](http://o-e.us/fb/lbg)

它生成（并存储）开放图形标签，因此您无需将它们放在您的页面中，并且“重定向 URL”会告诉它将所有流量发送到哪里。

它也可以检测到 Facebook bot/scraper，因此它不会干扰任何事情。

# jquery - 滑动 jquery 滑块时防止点击 Ipad/Iphone

> ID：12036285
> 
> 赞同：0
> 
> 时间：2012-08-20T10:46:27.417
> 
> 标签：jquery, ipad, slider, touchstart, touchmove

我有结构

```
<div>
  <ul>
    <li><a></a></li>
    <li><a></a></li>
    <li><a></a></li>
  </ul>
</div> 
```

我为 iphone/ipad 创建了滑动，我在 DIV 上设置了溢出：隐藏并上下移动 UL

问题是当我开始touchstart事件时，通过将手指放在链接`<a></a>`上并上下移动手指进行滑动，滑动完成后页面的位置发生了变化，链接点击工作......我需要防止那

我只想更改页面的位置，并且仅在 touchstart 之后发生 touchend 时，它们之间没有 touchmove ...

请给我建议，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:47:23.303

```
inner_container.bind('touchstart', function(e) {
//e.preventDefault();
   .... 
});

inner_container.on('click', 'a', function(e) {
  if(touch_moving){
    touch_moving = 0;
    return false;
  }
});

inner_container.bind('touchmove', function(e) {
  touch_moving = 1;
  ...
}); 
```

请注意，在 touchstart 中默认不会被阻止！

# vim - VIM Omni 完成：未找到模式

> ID：12036288
> 
> 赞同：9
> 
> 时间：2012-08-20T10:46:49.053
> 
> 标签：vim

我一直试图让 VIM 自动完成工作，但不幸的是遇到了问题。

现在我试着从基础开始。试图让自动完成首先在 HTML 文档上工作。但即使这也成为一个问题。

我设置了正确的 DOCTYPE，甚至指定了不同的 DOCTYPE，以查看它是否适用于 Transitional、Strict，甚至 XHTML 或 HTML5，但似乎都不起作用。

htmlcomplete.vim 文件确实在“autoload”目录中。

在我的 vimrc 文件中，应用了正确的设置：

```
filetype plugin indent on 
```

但这仍然行不通，并且没有任何研究对我有帮助，因为唯一相关的结果是 VIM 中的 C++ 自动完成问题。（vim 目前不完全支持，但它确实支持 HTML 自动完成，因为我知道它之前已经在不同系统的多个实例上工作过。）

大家觉得我接下来应该怎么做？我不知道我应该从这里去哪里..

无论如何，当我使用“全方位完成”选项时。又名 (Ctrl+X, Ctrl+O)，它总是说：

```
Omni Completion (^O^N^P) Pattern not found 
```

语法高亮默认工作，甚至不使用：

```
:syntax on/:syntax enable 
```

它只是按应有的文件类型识别。这样就可以了。自从我取消注释“文件类型插件缩进”以来，缩进就开始工作了。但我无法让它正常工作。

但也许，我在这里错过了重点，并以错误的方式思考了这一点。所以如果我错了，请纠正我。我正在寻找什么功能，当我输入“<”时，它会自动弹出一个下拉列表，其中包含所有可能的标签，并说我输入“<”它会进一步细化为“div”等。这个是我在 Vim 中习惯的功能，没有任何配置，只是默认的。

当我使用命令“Ctrl+N”或“Ctrl+P”时，我得到一个非常小的（12 个标签）可能标签列表，但这是手动的，不会自动检测键入的“<”。

我看错了吗？Omni Completion 不是我应该考虑配置的正确选项吗？或者这是一个不同的插件来提供这个功能？

每当我研究它时，它总是将“Ctrl+X + Ctrl+O”称为语法自动完成，所以我认为这是我所知道的功能。但也许我错了。

因此，有人可以帮助向我更好地解释这一点，为我指明正确的方向。或者让我知道我在正确的道路上（如果我是的话）并帮助我解决这个问题？

谢谢你们。小心。

此处要求提供以下信息：

> vimrc 文件在这里： http: [//pastebin.com/QfUDVvdP](http://pastebin.com/QfUDVvdP)
> 
> 我的版本是 7.3（又名 vim73）
> 
> 我使用的是 CLI 版本，因为我发现 GVIM 实际上更令人困惑。但我两者都有。他们使用相同的 vim 运行时。
> 
> 我没有添加任何插件或额外功能，因为这是 Ubuntu 12.04 上的全新安装，也是全新安装。唯一被更改或添加的是“smali.vim”语法高亮到语法文件夹，以及 opa.vim 和 opajs.vim。opacomplete.vim 也可以自动加载。
> 
> /etc/vim/ 文件夹中有 vimrc 和 vimrc.tiny 以及 gvimrc。
> 
> vim 的所有文件都位于默认目录 /usr/share/vim/vim73/ 和 /usr/share/vim/ 中。除了已经指定的文件外，没有任何文件被移动、更改或更改。

希望有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:02:06.507

Omnicompletion 是正确的功能，`<C-x><C-o>`也是正确的捷径。顺便说一句，您应该停止将其称为自动完成，因为它远非自动。

你不需要任何东西，`~/.vim/autoload`因为`htmlcomplete.vim`已经在`$VIMRUNTIME`.

简而言之，鉴于我对您的设置的了解，完成应该可以工作。

但事实并非如此。请附加您的内容、`~/.vimrc`已安装插件的列表（以及它们的安装方式/安装位置）以及有关您的 Vim 版本、平台以及是否使用 GUI 或 CLI 版本的详细信息。

***编辑***

Omnicompletion 是正确的功能，但您正在寻找一个特定的插件，该插件在每次击键时都在引擎盖下使用omnicompletion，因为没有内置设置来启用**自动**完成。[AutoComplPop](http://www.vim.org/scripts/script.php?script_id=1879)就是这样一个插件（也是我使用的那个），[还有其他插件。](http://www.vim.org/scripts/script_search_results.php?keywords=completion&script_type=&order_by=rating&direction=descending&search=search)选择与您以前的经验最匹配的一个。

你不应该触摸`/usr/share/vim/`or中的任何东西`/etc/vim/`。你的所有设置都应该进入`~/.vimrc`，你的插件应该进入`~/.vim/`.

```
~
  .vim/
    autoload/
      opacomplete.vim
    syntax/
      opa.vim
      opajs.vim
      smali.vim
  .vimrc 
```

在进一步操作之前，您必须将默认文件和目录恢复为其原始状态。

***结束编辑***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:42:00.403

首先，Omni Completion 从未自动工作（或工作）。您说插入 '<' 时应该出现弹出窗口 - 默认情况下这在 Vim 中不起作用。你必须按 Ctrl XO 组合。至少它对我不起作用。

[http://vimdoc.sourceforge.net/htmldoc/version7.html#new-omni-completion](http://vimdoc.sourceforge.net/htmldoc/version7.html#new-omni-completion)

我猜你有一个插件或其他东西。实施起来并不难。在不加载任何插件的情况下启动 Vim 以检查它。无论如何，对于这个问题。

很多人不知道，Vim 7+**对 XML/XHTML/HTML 语言**有很好的支持（**不需要插件**！），并且有可能用任何你想要的基于 XML 的语言来扩展它。您可以做的是使用准备 Vim 定义的 DTD/RNG 转换器，该定义用于为您提供全方位的完成。

例如，我的 Vim 安装默认包含对 HTML4 和 XHTML 语言的支持：

```
$ rpm -ql vim vim-common | grep xml
/usr/share/vim/vim73/autoload/xml
/usr/share/vim/vim73/autoload/xml/html32.vim
/usr/share/vim/vim73/autoload/xml/html401f.vim
/usr/share/vim/vim73/autoload/xml/html401s.vim
/usr/share/vim/vim73/autoload/xml/html401t.vim
/usr/share/vim/vim73/autoload/xml/html40f.vim
/usr/share/vim/vim73/autoload/xml/html40s.vim
/usr/share/vim/vim73/autoload/xml/html40t.vim
/usr/share/vim/vim73/autoload/xml/xhtml10f.vim
/usr/share/vim/vim73/autoload/xml/xhtml10s.vim
/usr/share/vim/vim73/autoload/xml/xhtml10t.vim
/usr/share/vim/vim73/autoload/xml/xhtml11.vim
/usr/share/vim/vim73/autoload/xml/xsd.vim
/usr/share/vim/vim73/autoload/xml/xsl.vim
/usr/share/vim/vim73/autoload/xmlcomplete.vim
/usr/share/vim/vim73/compiler/xmllint.vim
/usr/share/vim/vim73/compiler/xmlwf.vim
/usr/share/vim/vim73/ftplugin/xml.vim
/usr/share/vim/vim73/indent/xml.vim
/usr/share/vim/vim73/syntax/docbkxml.vim
/usr/share/vim/vim73/syntax/xml.vim 
```

诀窍是 Vim 的自动加载功能。您需要确保您打开的文件具有正确的 DOCTYPE 定义。因此，将它用于 HTML 和 XHTML 文件，Vim 7+ 将自动为您启用 XML/HTML 全方位完成。HTML4 示例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html>
</html> 
```

现在尝试插入正文标签，键入“bo”并按 Ctrl X O. Bang。尝试添加一个属性，输入“on”并再次点击它。答对了。

您可以使用 Ctrl XO 和其他功能：

*   在“<”之后完成标签名称，具体取决于上下文
*   在标签内完成正确的属性
*   当属性具有有限数量的可能值时，有助于完成它们
*   实体的完整名称（定义在 |xml-omni-datafile| 和当前文件中用 "
*   在 " 之后使用时

更多信息（以及可能使用自己的 XML 定义的用户自定义）：

[http://vimdoc.sourceforge.net/htmldoc/insert.html#ft-xml-omni](http://vimdoc.sourceforge.net/htmldoc/insert.html#ft-xml-omni)

# apache - 如何设置 .htaccess 重写 url

> ID：12036289
> 
> 赞同：0
> 
> 时间：2012-08-20T10:46:49.233
> 
> 标签：apache, .htaccess, redirect, apache2

如何设置重定向如下：

重定向这些：

```
http://www.domain.com.au/browse-stores/storeA
http://www.domain.com.au/browse-stores/storeB 
```

对这些

```
http://www.domain.com.au/browse-stores?centre=storeA
http://www.domain.com.au/browse-stores?centre=storeB 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:59:59.470

将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteRule ^browse-stores/(.+)$ /browser-stores?centre=$1 [L,QSA] 
```

如果您确实想重定向浏览器以使地址栏中的 URL 发生变化，请将括号中的标志更改为`[L,QSA,R=301]`.

# c# - 防止在 C# PowerPoint 2010 加载项中复制对象

> ID：12036290
> 
> 赞同：0
> 
> 时间：2012-08-20T10:46:50.553
> 
> 标签：c#, visual-studio-2010, add-in, powerpoint

我正在使用 Visual Studio 2010 构建 PowerPoint 2010 C# 加载项。加载项的功能之一是将形状添加到当前幻灯片。但是，将形状添加到幻灯片后，我需要防止它被复制。那就是我遇到问题的地方。我查看了所有应用程序级别的事件，没有看到任何类型的 beforeCopy 或 beforePaste 类型的事件。

我现在能想到的唯一选择是添加一个 keydown 事件侦听器来侦听“ctrl+c”并在我的形状被选中时阻止它，然后创建一个自定义右键单击菜单（甚至不确定我是否可以）如果选择了我的形状，请删除“复制”选项。不过，必须有更简单的选择。

任何人都知道如何防止用户复制形状？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:07:33.837

可以禁用或重新路由 Microsoft Office 内置功能区按钮执行的命令。Microsoft 将此称为“再利用”，可以在[此处](http://msdn.microsoft.com/en-us/library/office/bb462633%28v=office.12%29.aspx)找到介绍。

因此，另一种方法可能是使用类似这样的东西“重新调整”内置复制按钮的用途。（需要通过GetCustomUI返回来自定义功能区，见上面的链接。）这修改了复制按钮执行的动作和确定按钮是否启用的回调方法。

```
<command idMso="Copy" onAction="copyAction" getEnabled="copyEnabled" /> 
```

当你的形状被选中时实现`copyAction`返回`cancelDefault = true`，这样它就不会被复制。

如果您的形状被选中，实现`copyEnabled`返回。`false`请记住使选择更改事件的按钮无效。

实际上，两种方法中的一种就足够了。我想`onAction`更容易实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:33:19.717

只是为了结束这个循环，我正在分享我的解决方法，希望有这个问题的其他人不会像我在这方面浪费那么多时间。我最终只使用*SlideSelectionChanged*和*WindowSelectionChange*事件以及字典来删除已复制的对象。

首先，当我的形状被添加到舞台时，我在字典中添加了一个新条目，其中包含形状名称（在我的例子中，它实际上是一组形状）和它的 ID。

```
itemIDDictionary.Add(myGroup.Name, myGroup.Id); 
```

*WindowSelectionChange*是一个相当简单的检查。它只是查看新选择的项目是否已经在字典中。如果是，则检查 ID 是否匹配。如果不是，它会删除该项目。这是因为当您复制和粘贴一个项目时，新粘贴的项目会自动在幻灯片上被选中。

```
public void itemSelectionChange(PowerPoint.Selection SelectedItem)
{
    try
    {
        if (Globals.Ribbons.Ribbon2.itemIDDictionary.ContainsKey(SelectedItem.ShapeRange.Name))
        {
            for (int shapeIDCount = 0; shapeIDCount < Globals.Ribbons.Ribbon2.itemIDDictionary.Count; shapeIDCount++)
            {
                if (!Globals.Ribbons.Ribbon2.itemIDDictionary.ContainsValue(SelectedItem.ShapeRange[1].Id))
                {
                    SelectedItem.Delete();
                    MessageBox.Show("You can not copy the browser object.\nAdd a new one using the ribbon bar");
                }
            }
        }
    }
catch {} 
```

*SlideSelectionChanged*稍微复杂一点，因为我必须遍历幻灯片上的所有形状。

```
try
{
    if (SldRange.Count > 0)
    {
        var showWarning = false;
        for (int slideCount = 1; slideCount <= SldRange.Count; slideCount++)
        {
            int shapeCount = 1;
            while (shapeCount <= SldRange[slideCount].Shapes.Count)
            {
                if (Globals.Ribbons.Ribbon2.itemIDDictionary.ContainsKey(SldRange[slideCount].Shapes[shapeCount].Name))
                {
                    if (!Globals.Ribbons.Ribbon2.itemIDDictionary.ContainsValue(SldRange[slideCount].Shapes[shapeCount].Id))
                    {
                        SldRange[slideCount].Shapes[shapeCount].Delete();
                        showWarning = true;
                    }
                    else
                    {
                        shapeCount++;
                    }
                }
                else
                {
                    shapeCount++;
                }
            }
        }
        if(showWarning == true)
        {
            MessageBox.Show("You can not copy the browser object.\nAdd a new one using the ribbon bar");
        }
    }
}
catch { } 
```

正如我在最初的帖子中所说，我确信有一种更清洁的方法可以做到这一点。我只是找不到一个来救我的命。

# playframework - Mailer-Plugin 未显示在应用程序的依赖项中

> ID：12036293
> 
> 赞同：8
> 
> 时间：2012-08-20T10:47:12.130
> 
> 标签：playframework, playframework-2.0

我正在尝试在我的游戏中使用[Mailer 插件](https://github.com/typesafehub/play-plugins/tree/master/mailer)！2 Java 应用程序。
我按照自述文件中的说明进行操作，但该模块未显示在我的应用程序的依赖项中。所以当我尝试编译它时播放！给我一个错误：

```
object plugin is not a member of package com.typesafe 
```

我尝试重新加载项目并仔细检查`/project`. 到目前为止没有任何效果。

有没有办法强制播放！检查应用程序的依赖项？

**更新：**

好的，新的错误消息。我删除了`/project/project/`，`/project/target/`和`/target/`。下次我开始玩！获得所有模块花了相当长的时间。它没有下载 Mailer-Plugin。
但现在我得到：

```
play.api.PlayException: Cannot load plugin [Plugin [com.typesafe.plugin.CommonsMailerPlugin] cannot been instantiated.] 
```

其次是：

```
Caused by: java.lang.ClassNotFoundException: com.typesafe.plugin.CommonsMailerPlugin 
```

有任何想法吗？

**更新 2：**
好的，我通过直接从 typesafe 下载 play-plugins- *mailer_2.9.1-2.0.4.jar*并将其放入`/lib`. 这绝对不是正确的方法，但至少现在可行。
我的游戏需要的 .jar！2.0.3 项目：[http ://repo.typesafe.com/typesafe/releases/com/typesafe/play-plugins-mailer_2.9.1/2.0.4/](http://repo.typesafe.com/typesafe/releases/com/typesafe/play-plugins-mailer_2.9.1/2.0.4/)

**更新 3：**
相关文件的内容：
Build.scala：

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {

    val appName         = "thesis"
    val appVersion      = "0.9"

    val appDependencies = Seq(
        "com.typesafe" %% "play-plugins-mailer" % "2.0.4"
    )

    val main = PlayProject(appName, appVersion, mainLang = JAVA).settings(
        lessEntryPoints <<= baseDirectory(_ / "app" / "assets" / "stylesheets" ** "bootstrap.less"),
        templatesImport += "helper._",
        templatesImport += "views.html.Helpers._"
    )

} 
```

build.properties：

```
sbt.version=0.11.3 
```

插件.sbt:

```
// Comment to get more information during initialization
logLevel := Level.Info

// The Typesafe repository
resolvers += "Typesafe repository" at "http://repo.typesafe.com/typesafe/releases/"

// Use the Play sbt plugin for Play projects
addSbtPlugin("play" % "sbt-plugin" % "2.0.3") 
```

conf/play.plugins：

```
1500:com.typesafe.plugin.CommonsMailerPlugin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:54:57.690

好吧，为了玩！为了管理我的依赖项，我必须在旧文件（不包括已编译的代码）上创建一个新的项目副本，`Build.scala`在 play 中编辑并重新加载/编译项目！安慰。
现在它起作用了！Mailer Plugin 被下载、编译并`play dependencies`列出。

# r - if ... else 是否适用于数组和矩阵？

> ID：12036297
> 
> 赞同：-1
> 
> 时间：2012-08-20T10:47:46.813
> 
> 标签：r

```
aa <- seq(1, 10, 1)
bb <- a * runif(n = 10, min = 0, max = 2) * 1000
cc <- cbind(aa, bb)

dd <- ifelse(aa / bb - 1 > .1, cc, cc * 10) 
```

我怎样才能`ifelse`返回一个矩阵`cc`而不是列数组？

我试过`if`并且`else`喜欢

```
aa <- seq(1, 10, 1)
bb <- a * runif(n = 10, min = 0, max = 2) * 1000
cc <- cbind(aa, bb)

if(aa / bb - 1 > .1) {
    cc
}
else {
    cc * 10
} 
```

两个问题：第一个是它只使用了第一个元素，但我想我可以通过使用`for()`循环来解决它；第二个是它返回

```
Error: unexpected 'else' in "else" 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:29:48.313

如果会尝试这样的事情：

```
sel <- aa / bb - 1 > .1
cc[sel, ] <- 10 * cc[sel,] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:09:25.967

该函数`ifelse()`同样乐于接受向量和矩阵。稍微调整你的例子：

```
ifelse(cc > 1000, -cc, cc * 10)
       aa          bb
 [1,]  10   2006.2160
 [2,]  20  -3636.6234
 [3,]  30    455.8483
 [4,]  40  -4939.6886
 [5,]  50  -3519.1552
 [6,]  60  -1359.0747
 [7,]  70  -2267.0220
 [8,]  80  -9232.1221
 [9,]  90  -5942.5760
[10,] 100 -19439.4255 
```

这样做的原因是数组和矩阵实际上是带有一些附加属性的向量，这些属性定义了数量或行和列。

重点`ifelse`是您的输入和输出应该具有相同数量的元素。

# magento - Magento 的属性定义的登陆页面

> ID：12036298
> 
> 赞同：0
> 
> 时间：2012-08-20T10:47:53.447
> 
> 标签：magento, catalog

我正在寻找解决方案，如何拥有一个包含按某些属性（即品牌 = Addidas）过滤的产品的登录页面。我正在检查高级搜索，但它不提供客户端要求的分层导航。

我发现的是免费模块[http://fishpig.co.uk/attribute-splash-pages.html](http://fishpig.co.uk/attribute-splash-pages.html)。它似乎正在工作，但是对于属性 X 属性值的每个组合，我需要在数据库中配置一些东西。如果您需要维护数以千计的组合，它就没有用了。

我的另一个想法是查看目录/图层模型以删除按类别过滤，但它可能会破坏某些东西:)

你有什么想法或方向吗？

谢谢，杰罗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:10:40.893

看看[http://yoast.com/landing-pages-module-magento/](http://yoast.com/landing-pages-module-magento/)

我已经使用了这两种方法，并且发现 fishpigs 对于手动创建优化页面要好得多，但是对于爆破自动登录页面 yoast 是理想的。

# javascript - Fancybox 2.0.6 关闭方法

> ID：12036301
> 
> 赞同：0
> 
> 时间：2012-08-20T10:48:04.857
> 
> 标签：javascript, jquery, ajax, fancybox

我对fancybox v2.0.6的关闭方法有疑问

我的页面中有这段代码。

```
<a href="myurl" class="btnslide" id="Imagemulti" title="Aggiungi immagine">Aggiungi immagine</a>

<script type="text/javascript">
$(document).ready(function() {
    $("#Imagemulti").fancybox({
        maxWidth: 800,
        maxHeight: 600,
        fitToView: false,
        width: '88%',
        height: '88%',
        autoSize: false,
        closeClick: false,
        openEffect: 'none',
        closeEffect: 'none',
        arrows: false,
        type: 'iframe',
        afterClose: function() {
            $('#imgqueue').load('myurl2')
        }
    });
});
</script> 
```

当我点击一个标签时，fancybox 弹出窗口会显示我的页面，我有一个表单；当我在弹出窗口上提交表单时，我会在提交后显示另一个表单 e，然后我将通过此功能关闭：

```
<script type="text/javascript">
parent.$.fancybox.close();
</script> 
```

注意：myurl 和 myurl2 不是变量，而是指向我隐藏的网站的链接

没关系；但是，如果我再次单击一个标签，弹出窗口会显示表单，但在提交时弹出窗口不会关闭。为什么？代码是相等的。没看懂。。。。

这是一个fancybox错误？

感谢您的回答，并为我糟糕的英语感到抱歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:29:38.300

使用 onclosed 方法关闭弹出窗口

```
 $("#Imagemulti").fancybox({
        maxWidth: 800,
        maxHeight: 600,
        fitToView: false,
        width: '88%',
        height: '88%',
        autoSize: false,
        closeClick: false,
        openEffect: 'none',
        closeEffect: 'none',
        arrows: false,
        type: 'iframe',
         'onClosed' : function () { self.parent.location.reload(); }
        }
    }); 
```

# python - 将 hdf5 matlab 字符串加载到 Python 中

> ID：12036304
> 
> 赞同：8
> 
> 时间：2012-08-20T10:48:16.390
> 
> 标签：python, matlab, hdf5

我在用 Python 读取 hdf5 matlab 7.3 文件时遇到了麻烦。我正在使用 h5py 2.0.1。

我可以读取文件中存储的所有矩阵，但无法读取字符串列表。h5py 将字符串显示为形状 (1, 894) 的数据集，类型为 |04。该数据集包含对象引用，我尝试使用`h5file[obj_ref]`语法取消引用。

这会产生类似`dataset "FFb": shape (4, 1) type "<u2"`. 我将其解释为长度为 4 的字符数组。这似乎是字符串的 ASCII 表示。

有没有简单的方法可以把琴弦拿出来？

是否有任何软件包为 python hdf5 提供 matlab 支持？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T05:01:47.730

我假设您的意思是它是 MATLAB 中的字符串元胞数组？这个输出看起来很正常：数据集是一个对象数组（`|O4`是 NumPy 对象数据类型）。每个对象都是一个 2 字节整数数组（`<u2`是 NumPy little-endian 无符号 2 字节整数数据类型）。h5py 无法知道数据集是字符串的元胞数组；它也可以是任意 16 位整数的元胞数组。

获取字符串的最简单方法是使用迭代器，使用 unichr 来转换字符，如下所示：

```
strlist = [u''.join(unichr(c) for c in h5file[obj_ref]) for obj_ref in dataset]) 
```

这样做是遍历数据集 ( `for obj_ref in dataset`) 以创建一个新列表。对于每个对象引用，它会取消引用对象 ( `h5file[obj_ref]`) 以获取整数数组。它将每个整数转换为一个字符 ( `unichr(c)`) 并将这些字符全部连接成一个 Unicode 字符串 ( `u''.join()`)。

请注意，这会生成一个 unicode 字符串列表。如果您绝对确定每个字符串仅包含 ASCII 字符，则可以替换`u''`为`''`和`unichr`by `chr`。

*警告*：我没有 h5py；这篇文章基于我使用 MATLAB 和 NumPy 的经验。您可能需要调整语法或迭代顺序以适应您的数据集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-20T03:36:08.187

`Group`您可以通过以下方式获取和`Dataset`对象的原始 Matlab 类名称

```
dataset.attrs['MATLAB_class'] 
```

如果`dataset`包含一个字符串，它将返回`b'char'`.

# notepad++ - 在记事本++中使用行号复制粘贴

> ID：12036307
> 
> 赞同：16
> 
> 时间：2012-08-20T10:48:31.427
> 
> 标签：notepad++

你能告诉我如何在记事本++中复制一些代码行及其行号吗？

也就是说，假设我有一个这样由记事本++打开的code.txt（数字通过使用设置->首选项->编辑->显示行号显示）：

```
1 This is line 1
2 This is line 2 
.
.
n This is line n 
```

我想将其复制到 .doc / .odt 文件中，以便将行号包含在结果中，而**不是**这样：

```
This is line 1
This is line 2 
    .
    .
This is line n 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-20T11:12:08.090

您应该在 nodepad++ 中打开的文档中添加行号。然后你复制到 .doc 或其他文件。要实现这一点，可能有两种方法。对于两种方式。 **在 nodepad++ 中选择您的行**。

**1)**使用**TextFX->TextFX 工具->插入行号。** ![在此处输入图像描述](../Images/4be133d6b4d1038acefc12afb9f609ba.png)

取而代之的是， **2）**删除不必要的前导零

2.1)First Left indent **TextFX->TextFX Edit->Indent text sticky left margin** ![在此处输入图像描述](../Images/8735a2c4659f368f36f677e60424bf4c.png)

2.2）添加数字 **Edit->Column Editors** in Number to Insert

*   设置初始编号 1
*   增加 1
*   选择 12 月选项。

![在此处输入图像描述](../Images/24ce7dd6cb133244fdfcecf0a1484747.png) 我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-21T03:20:13.670

如果您对行号的格式不严格，则无需使用任何插件即可轻松完成此操作。你的文件是

```
1 This is line 1
2 This is line 2 
.
.
n This is line n 
```

去查找，`.*`输入`find what`ie正则表达式以查看一行中的所有内容，然后单击`find all in current document`。您将在搜索窗口中获得关注。

```
Line 1: 1 This is line 1
Line 2: 2 This is line 2 
Line 3: .
Line 4: .
Line 5: n This is line n 
```

您可以复制搜索窗口的内容`[right click in the search window -> select all -> copy]`并粘贴到另一个文件中。当然 line no 不仅是数字，而且是`Line #:`。如果可以接受，那么您的工作就完成了。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-08-26T13:45:17.337

步骤 2.2 非常简单。

在记事本++中打开文件

数字将应用于您选择的文件部分。例如 A 会将数字应用于整个文件。

转到菜单编辑/列编辑器或使用热键 ALT+C。

列编辑器将如上所示打开。

单击“要插入的数字”的单选按钮。以 1 递增 1 开始 单击确定。

您应该会看到插入到文件中的行号。将此保存为类似 myFileWithLineNumbers.js

# c# - 向上或向下移动队列项目

> ID：12036312
> 
> 赞同：-2
> 
> 时间：2012-08-20T10:48:43.240
> 
> 标签：c#

在我的 c sharp 程序中，我有 5 个项目在队列中。从 0 1 2 4。
当用户按下按钮时，我想更改项目的位置，就像
第一个项目应该是 1，最后一个项目应该变成 0。
就像 1 2 3 4 0 和 2 3 4 0 1.
我怎么能这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T10:57:42.847

您可以使用 Queue 来实现类似的行为。当用户单击按钮时，您可以执行以下操作：

```
queue.Enqueue(queue.Dequeue());
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:58:17.580

你用什么类来实现你的队列？

如果使用 List<>，你可以这样做：

```
 List<MyQueueEntry> queue = new List<MyQueueEntry>();

        // Add stuff into the queue list

        // take the head entry, remove it from the queue and add it to the tail
        MyQueueEntry head = queue.First();
        queue.RemoveAt(0);
        queue.Add(head); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:52:09.850

听起来像[循环队列/缓冲区](http://en.wikipedia.org/wiki/Circular_buffer)是你想要的。它环绕。

# ruby-on-rails - TimeZone 的参数无效？

> ID：12036322
> 
> 赞同：5
> 
> 时间：2012-08-20T10:49:50.287
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试使我的用户时区成为我的应用程序的当前时区，因此他们交互的所有内容都将由它进行。我在我的 ApplicationController 中遇到`ArgumentError`了我的方法。

**application_controller.rb**

```
before_filter :set_user_time_zone

private

def set_user_time_zone
  if signed_in?
   Time.zone = Time.now.in_time_zone(current_user.time_zone)
  end
end 
```

注意：current_user 是一个[设计助手](https://github.com/plataformatec/devise#controller-filters-and-helpers)，我的用户模型是一个`:time_zone`列。

比错误：

```
invalid argument to TimeZone[]: Mon, 20 Aug 2012 13:16:20 JST +09:00 
```

我不知道从这里去哪里。关于如何纠正这个问题的任何想法？

谢谢。

**更新**

```
class Price
  attr_accessible :date
  def self.today
    where(:date => Date.today)
  end
end 
```

如果我的方法是：

```
def set_user_time_zone
  if signed_in?
    Time.zone = current_user.time_zone
  end
end 
```

我遇到的问题是这样的：

```
 Time.now = US EAST- 2012-08-22 21:17:03 -0400 
 Time.zone = TOKYO - (GMT+09:00) Tokyo 
 Time.zone.now 2012-08-23 10:17:03 +0900 
```

这意味着我所有的`Date`方法都通过了

`Time.now = US EAST- 2012-08-22 21:17:03 -0400`

什么时候应该

```
Time.zone.now 2012-08-23 10:17:03 +0900 
```

我怎样才能把它交给后者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:15:15.727

[Time#zone=](http://apidock.com/rails/v3.2.3/Time/zone=/class) method accepts only these params:

> *   A Rails TimeZone object.
>     
>     
> *   An identifier for a Rails TimeZone object (e.g., “Eastern Time (US & Canada)”, -5.hours).
>     
>     
> *   A TZInfo::Timezone object.
>     
>     
> *   An identifier for a TZInfo::Timezone object (e.g., “America/New_York”).

So you should pass something from this list

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T18:25:46.037

`Time.now.in_time_zone(current_user.time_zone)`返回类的实例`TimeWithZone`，但 `Time#zone=`期望得到可以转换为`TimeZone`.

假设您`TimeZone`在列中存储标识符`:time_zone`（“东部时间（美国和加拿大）”、“夏威夷”等），您可以简单地做

```
Time.zone = current_user.time_zone 
```

# sitecore - 将 Microsoft 快速搜索与 Sitecore 集成

> ID：12036327
> 
> 赞同：2
> 
> 时间：2012-08-20T10:50:17.190
> 
> 标签：sitecore, fastsearch

我正在尝试查找一些信息来解释/展示如何将[Microsoft 快速搜索](http://sharepoint.microsoft.com/en-us/product/capabilities/search/Pages/Fast-Search.aspx)与[Sitecore集成](http://www.sitecore.net/unitedkingdom)

到目前为止，我发现的只是大量的招聘广告和偶尔在他们的解决方案中使用的数字代理。

基本上.. 谁能指出我正确的方向或告诉我是否有现成的 Sitecore 模块可以做正确的事情？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:38:59.627

我们已经为这里的一些项目完成了它，但没有任何现成的模块作为模块，因此需要我们自己构建一些东西。我将以我不是 FAST 专家的评论作为我的回答的开头，但有幸与一些知道他们的东西的人一起工作；）

对于我们的项目，我们使用了 FAST Enterprise Search Platform .NET API (ESP .NET)，并围绕它构建了一个项目，为我们提供了一个层来执行我们的查询。我们实现了执行搜索的方法，以包装 API 已经返回的内容。例如：

```
ISearchView view = _searchFactory.GetSearchView(searchView);

Com.FastSearch.Esp.Search.Query.IQuery query =
            new Com.FastSearch.Esp.Search.Query.Query("string(\"" + searchTerm + "\", mode=simpleall)");

IQueryResult result = view.Search(query);
return result; 
```

在上面的示例中，我们还有一些代码实际上采用了 IQueryResult 并将其包装到我们自己的搜索对象层中，这样我们就可以为自己的目的扩展 API。除了从 CMS 中加载一些有助于推动我们的一些层的配置之外，在我们处理事物的特定方式中没有什么真正的“Sitecore”。

ESP API 使用搜索工厂配置，允许您配置要连接的搜索引擎，可以轻松地将其包含到您的 Sitecore .NET 配置文件中。这是一个配置示例：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="HttpSearchFactory" type="System.Configuration.NameValueSectionHandler" />
    </configSections>
    <HttpSearchFactory>
        <add key="Com.FastSearch.Esp.Search.Http.RequestMethod" value="GET" />
        <add key="Com.FastSearch.Esp.Search.Http.QRServers" value="fastserver.mydomain.com:1234" />
        <add key="Com.FastSearch.Esp.Search.Http.CertiticateFile" value="" />
    </HttpSearchFactory>
    <appSettings>
        <add key="NavigatorPrefix" value="nav-" />
        <add key="EnableReporting" value="false" />
    </appSettings>
</configuration> 
```

您看到代理广告和招聘广告的原因之一可能是因为 FAST 实施在大多数情况下不是“即插即用”类型的解决方案，一般建议您可能聘请一家以前做过这件事的公司让你开始，这样当其他人已经经历过头部撞击时，你就不必用头部撞击 FAST。祝您进入 FAST 世界的旅程好运！

**FAST ESP 产品指南：http:** [//download.microsoft.com/download/1/4/8/1483939B-15B8-4DD3-B06D-204D03EC8A1E/Fast_ESP_Prod_Guide.pdf](http://download.microsoft.com/download/1/4/8/1483939B-15B8-4DD3-B06D-204D03EC8A1E/Fast_ESP_Prod_Guide.pdf)

**ESP SDK 包：** [http](http://connect.microsoft.com/fastsearch) ://connect.microsoft.com/fastsearch （至少，这篇[知识库文章](http://support.microsoft.com/kb/2448443)给出了那个链接）

# javascript - 如何使用 window.showModalDialog() 显示 HTML 内容

> ID：12036329
> 
> 赞同：3
> 
> 时间：2012-08-20T10:50:17.510
> 
> 标签：javascript, html, popup

我可以使用 JS 在弹出窗口中显示 HTML 内容（不是文件）吗？

我正在尝试打开一个弹出窗口并在其中显示用户定义的 HTML。我正在尝试以下方法，但它不起作用。

```
window.showModalDialog("<p>Pop up window text</p>","resizable: yes"); 
```

有人可以建议我如何做到这一点吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T10:53:10.940

与 相反`window.open()`，第一个 (URL) 参数[`showModalDialog()`](http://tjvantoll.com/2012/05/02/showmodaldialog-what-it-is-and-why-you-should-never-use-it/)是必需的。因此，您不能将 HTML 字符串传递给它。您可以使用`window.open`：

```
var newWindow = window.open("", "newWindow", "resizable=yes");
newWindow.document.write('<p>Pop up window text</p>'); 
```

或者，使用现有的模态插件之一，例如[jQuery UI Dialog](http://jqueryui.com/demos/dialog/)或[Twitter Bootstrap Modals](http://twitter.github.com/bootstrap/javascript.html#modals)。它们允许您根据现有 HTML 元素的内容轻松显示模式窗口，例如：

```
<div id="dialog">
  <p>Pop up window text</p>
</div>

$('#dialog').modal(); // Twitter Bootstrap
$("#dialog").dialog({ resizable: true }); // jQuery UI 
```

# c# - 通过网页c#用JavaScript下载网页

> ID：12036335
> 
> 赞同：0
> 
> 时间：2012-08-20T10:50:43.983
> 
> 标签：c#, javascript, download, webclient

我想在他的 JavaScript 之后或使用他的 JavaScript 下载网页。例如，带有在 javaScript 中加载的数据的网页。我正在使用 WebClient 类。

我的代码：

```
WebClient wb = new WebClient();
htmlDoc = wb.DownloadString(link); 
```

我的问题是我在 javaScript 下载数据之前获得了 html 代码。我能做些什么？

这是我的链接：[http ://www.select-test.com/HTML/frmDisplayGrid.aspx?Type=cat&Data=OS](http://www.select-test.com/HTML/frmDisplayGrid.aspx?Type=cat&Data=OS)

谢谢， 查尼

# c# - 将文件移动到文件夹中（C#）

> ID：12036336
> 
> 赞同：0
> 
> 时间：2012-08-20T10:50:53.110
> 
> 标签：c#, file, move, directory

如果文件存在，我想将文件移动到文件夹中，并在移动时将日期附加到文件中。尽管我已将日期转换为字符串，但我收到错误*“不支持给定路径的格式”*，这是在触发此代码的事件中。

**XAML：**

```
<add key ="Directory" value ="C:\FILE WATCHER TEST FOLDER\"/>
<add key ="File name" value ="update1"/>
<add key="extension" value =".txt"/>
<add key ="Folder name" value ="archive updates\"/> 
```

**后面的代码：**

```
 DateTime date = DateTime.Parse("17/08/2012",ukCulture.DateTimeFormat);
        string theDate = Convert.ToString(date);

        string directory = ConfigurationManager.AppSettings["Directory"];
        string file = ConfigurationManager.AppSettings["File name"];
        string folder = ConfigurationManager.AppSettings["Folder name"];
        string extension = ConfigurationManager.AppSettings["extension"];

        string file_exe = file + extension;  

        string file_theDate = file + "-" + theDate;
        string file_theDate_exe = file_theDate + extension;

        string dir_fol = System.IO.Path.Combine(directory, folder);
        string dir_file_exe = System.IO.Path.Combine(directory, file_exe);
        string dir_file_theDate_exe = System.IO.Path.Combine(dir_fol, file_theDate_exe);

        if (File.Exists(dir_file_exe))
        {
            update.readNewFile();
            update.updatePaf();

            if (!Directory.Exists(dir_fol))
            {
                //create it move it
                System.IO.Directory.CreateDirectory(dir_fol);
                File.Move(dir_file_exe,dir_file_theDate_exe);

            }
            else
            {
                // move it
                if (File.Exists(dir_file_exe))
                {
                    File.Move(dir_file_exe, dir_file_theDate_exe);
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:54:42.897

```
DateTime date = DateTime.Parse("17/08/2012",ukCulture.DateTimeFormat); 
```

您的路径中不能有正斜杠。

您可以在使用路径之前删除它们（以及其他非法字符），请查看以下内容：[如何从路径和文件名中删除非法字符？](https://stackoverflow.com/questions/146134/how-to-remove-illegal-characters-from-path-and-filenames)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:54:44.110

请使用`theDate.ToString({format as you need})` . 可能是您的语言环境中的日期格式包含“坏”符号（斜杠）。

可以在[http://msdn.microsoft.com/en-us/library/az4se3k1.aspx找到格式](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

# asp.net - 替换字符串，例如。带有 ASP.net 控件的“[EMAIL]”

> ID：12036338
> 
> 赞同：0
> 
> 时间：2012-08-20T10:51:05.580
> 
> 标签：asp.net, replace, controls

我有我需要构建的表格，但用户可以以不同的方式对其进行布局。

表单的布局保存在一个 xml 文件中，并将包含诸如

```
<div class="holder">
 <div>name</div>
 <div>[Name]</div>
<div>Surname</div>
 <div>[Surname]</div>
<div>Contact Numer</div>
 <div>[ContactNumber]</div>
<div>Email</div>
 <div>[Email]</div>
<div>[Submit]</div>
</div> 
```

我需要做的是用 asp.net 控件替换那些 [name]etc.. 标记，并能够读取这些控件的内容。我在这件事上碰了壁，谁能帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:23:36.780

要在运行时创建新控件，从代码隐藏：

**文本框**

```
TextBox textBox = new TextBox
                              {
                                  ID = "dynamicTextBox",
                                  Text = "This is a new textbox"
                              };
        [Container].Controls.Add(textBox); 
```

您可以对任何其他控件执行 sae。

# scala - 旧（1.0 - 2.5）版本的Scala的二进制发行版？

> ID：12036341
> 
> 赞同：4
> 
> 时间：2012-08-20T10:51:22.143
> 
> 标签：scala

[斯卡拉网站](http://www.scala-lang.org/downloads)说：

> 出于历史和测试目的，我们还保留了以前版本的存档（目前是从 2.5 版开始）。Scala 的早期版本，从 0.9.x 到 2.4.x，已经离线存档。

有没有办法获得这些版本？源代码在 git repo 中可用，但二进制文件会很好。

**编辑：**

我在archive.org 上找到了一些旧版本，但我能从[http://web.archive.org/web/20040603140225/http://scala.epfl.ch/downloads/index 获得的最旧版本是1.1.1.3。 html](http://web.archive.org/web/20040603140225/http://scala.epfl.ch/downloads/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:36:27.203

事实证明，如果看起来足够努力，从 1.0.0-b4 的所有内容都可以在[archive.org](http://wayback.archive.org/web/20040515000000%2a/http://scala.epfl.ch/downloads/index.html)上找到。不幸的是，找不到介于两者之间的版本，例如 2.3.x 和 2.0.x。问题仍然是为什么它们没有在[http://scala-lang.org](http://scala-lang.org)上发布。

# visual-studio-2010 - CodeRush Xpress for VS 2010 的备忘单？

> ID：12036343
> 
> 赞同：1
> 
> 时间：2012-08-20T10:51:25.940
> 
> 标签：visual-studio-2010, coderush-xpress

是否有适用于 VS 2010 的 CodeRush Xpress 的备忘单/键盘映射？

我发现的最好的[是这个](http://community.devexpress.com/blogs/markmiller/CodeRushShortcutsAndTemplates.pdf)。

但这是针对 CodeRush 的完整版，并且是针对 2008 版的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:44:24.637

您找到的备忘单已替换为[CodeRush 键盘映射窗口](http://help.devexpress.com/#CodeRush/CustomDocument11759)。很可能，备忘单将不再更新。但是，列出的快捷方式适用于 Visual Studio 2010 和 Visual Studio 2008。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T03:08:24.600

没有。没有可用于 VS2010 上的 CodeRush **Xpress**的备忘单，也没有可用的替代品。

# ruby-on-rails - Rails 3.1 - 使用 Devise/Cancan 和 Prawn

> ID：12036347
> 
> 赞同：0
> 
> 时间：2012-08-20T10:51:51.753
> 
> 标签：ruby-on-rails, ruby, devise, cancan, prawn

在我的 html.erb 视图中，我通常可以使用如下代码：

```
if current_user.role?(:label)
"do something"
end 
```

我正在尝试在基于 Prawn 的 PDF 中执行相同的操作，但出现“未定义的局部变量或方法 `current_user'”错误。

我知道我需要在我的 PDF 类中明确包含一个帮助程序，例如：

```
class SalesnotePdf < Prawn::Document
  include CanCan::Ability
  "do pdf layout here"
end 
```

但这似乎不起作用？关于正确包含或其他方法的任何想法？

提前致谢！

编辑：我认为 current_user 实际上是我需要访问的设计方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:50:32.620

嗯，`current_user`真的是一种设计方法，在视图、助手和控制器中可用，但在模型中不可用。更好的方法是检查用户在控制器中的角色，然后调用特定的 Prawn 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T07:55:42.593

除非每个用户都需要一个显着不同的报告，否则您可以将 view_context 作为参数之一传递。

控制器

```
...
format.pdf do
...
    pdf = MyPdf.new @records, reportDate, view_context
...
end 
```

然后在 MyPdf 中你选择它......

```
def initialize(records, reportDate, view)
    super()
    @nonPagedTransactions = transactions
    @view = view 
```

……

所以现在它可用于 MyPdf 中的所有方法（以及其他视图上下文帮助器），如果你说......

```
@view.current_user 
```

# solr - “日期”数据索引的 solr 错误

> ID：12036354
> 
> 赞同：0
> 
> 时间：2012-08-20T10:52:11.573
> 
> 标签：solr

在将数据索引到 solr 时，我在日志文件中出现以下错误。当我将“日期”信息索引到 solr 时，会出现此错误。我正在使用 Oracle 10G 和 solr 3.5 版。我认为这里的日期格式可能是错误的。我检查了足够的找不到解决方案。以下是我的错误：

```
date format "'date1'='2012-05-23T09:47:23'"
------
SEVERE: org.apache.solr.common.SolrException: ERROR: [doc=12603] Error adding field     'date1'='2012-05-23T09:47:23'
at org.apache.solr.update.DocumentBuilder.toDocument(DocumentBuilder.java:324)
at org.apache.solr.update.processor.RunUpdateProcessor.processAdd(RunUpdateProcessorFactory.java:60)
at org.apache.solr.update.processor.LogUpdateProcessor.processAdd(LogUpdateProcessorFactory.java:115)
at org.apache.solr.handler.XMLLoader.processUpdate(XMLLoader.java:158)
at org.apache.solr.handler.XMLLoader.load(XMLLoader.java:79)
at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(ContentStreamHandlerBase.java:58)
at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
at org.apache.solr.core.SolrCore.execute(SolrCore.java:1398)
at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:356)
at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:252)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:228)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:212)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:634)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:445)
at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.solr.common.SolrException: Invalid Date String:'2012-05-23T09:47:23'
at org.apache.solr.schema.DateField.parseMath(DateField.java:165)
at org.apache.solr.schema.TrieField.createField(TrieField.java:421)
at org.apache.solr.schema.TrieDateField.createField(TrieDateField.java:120)
at org.apache.solr.schema.SchemaField.createField(SchemaField.java:104)
at org.apache.solr.update.DocumentBuilder.addField(DocumentBuilder.java:203)
at org.apache.solr.update.DocumentBuilder.toDocument(DocumentBuilder.java:281) 
```

我这边有错误吗？请帮助我...我是 solr 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:59:36.237

您似乎错过了尾随的 Z - 即强制性的 UTC 时区。它应该看起来像这样：

```
2012-05-23T09:47:23Z 
```

[http://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/schema/DateField.html](http://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/schema/DateField.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T12:58:48.723

```
{
    convertTimestamp {
      field :To
      inputFormats : ["yyyy-MM-dd'T'HH:mm:ss.SSS'Z'", "yyyy-MM-dd'T'HH:mm:ss", "yyyy-MM-dd"]
      inputTimezone : UTC
      outputFormat : "yyyy-MM-dd'T'HH:mm:ss.SSSZ"                                 
      outputTimezone : Europe/London
    }
  } 
```

如果您使用的是 kite-examples-morphlines 包中的这段 morphlines 代码，如果您查看 out outputformat 列，他们就会出错。它应该是“yyyy-MM-dd'T'HH:mm:ss.SSS'Z'”。希望这可以帮助其他使用吗啉的人。

# java - Java Swing - 知道选项卡是否已在 ChangeListener 中删除/添加

> ID：12036355
> 
> 赞同：4
> 
> 时间：2012-08-20T10:52:22.297
> 
> 标签：java, swing, jtabbedpane, changelistener

假设我有带有 ChangeListener 的 JTabbedPane

```
JTabbedPane tabbedPane = new JTabbedPane();

// Add few tabs
.....
.....

tabbedPane.addChangeListener(new ChangeListener() {
  public void stateChanged(ChangeEvent changeEvent) {
    // How to determine if the changeEvent was fired because of a tab remove/add ?
  }
}); 
```

在某个地方我正在做一个

```
tabbedPane.removeTabAt(2); 
```

和其他地方

```
tabbedPane.add(panel, 0); 
```

ChangeListener 现在应该被触发，有没有办法在监听器中确定它是否由于标签删除/添加而被调用？

编辑：我基本上只是在用户在选项卡之间切换而不是在添加或删除时才尝试执行一些操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T11:10:09.430

如果我没记错的话，JTabbedPane 将`componentAdded()`在添加新选项卡时触发一个事件（在容器中定义），`componentRemoved()`如果删除一个选项卡，则会触发一个事件。

您应该能够通过注册[ContainerListener来监听选项卡的添加或删除](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ContainerListener.html)

[http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#addContainerListener(java.awt.event.ContainerListener)](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#addContainerListener%28java.awt.event.ContainerListener%29)

该`stateChanged()`事件只是添加的副作用，因为 JTabbedPanel 会自动切换到新选项卡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T11:18:27.050

You might also want to examine the client property `__index_to_remove__`, which is set by `removeTabAt()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T11:51:32.997

根据确切的要求，您可能会跟踪所选组件，并且仅在发生更改时才执行操作：

```
ChangeListener l = new ChangeListener() {

    Component lastSelected = tabbedPane.getSelectedComponent();
    @Override
    public void stateChanged(ChangeEvent e) {
        if (lastSelected != tabbedPane.getSelectedComponent()) {
            LOG.info("changed: " + tabbedPane.getSelectedIndex());
            lastSelected = tabbedPane.getSelectedComponent();
        }

    }
};
tabbedPane.addChangeListener(l); 
```

但是，可能还不够好，因为如果选定的选项卡本身被删除，它将触发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-07T22:00:51.050

通过跟踪当前选项卡的数量，您可以检测基于添加或删除的选择更改

```
ChangeListener l = new ChangeListener() {

    int lastTabCount = tabbedPane.getTabCount();
    Component lastSelected = tabbedPane.getSelectedComponent();

    @Override
    public void stateChanged(ChangeEvent e) {
        if (lastSelected != tabbedPane.getSelectedIndex())
        {
            int currentTabCount = tabbedPane.getTabCount();
            if (lastTabCount == currentTabCount ) {
                LOG.info("changed: " + tabbedPane.getSelectedIndex());
            } else if (lastTabCount < currentTabCount)
                LOG.info("changed due to delete: " + tabbedPane.getSelectedIndex());
            } else if (lastTabCount > currentTabCount)
                LOG.info("changed due to add: " + tabbedPane.getSelectedIndex());
            }
            lastTabCount = tabbedPane.getTabCount();
            lastSelected = tabbedPane.getSelectedComponent();
        }

    }
};
tabbedPane.addChangeListener(l); 
```

# c# - 用 C# 发送 SMTP 邮件（互联网连接 + WebProxy）

> ID：12036358
> 
> 赞同：0
> 
> 时间：2012-08-20T10:52:38.247
> 
> 标签：c#, smtp, webproxy

目标是从 C# 应用程序发送电子邮件。下面的代码片段对我有用，但是当我在工作中运行它（使用脚本配置 proxi.pac 的互联网连接）时，它会崩溃。

有人能帮我吗？

```
string SendersAddress = "jd@gmail.com";
string ReceiversAddress = "dj@xxx.com";

const string SendersPassword = "xxxxxx";
const string subject = "Testing Gmail LOCAL";
const string body = "Hi This Is my Mail From Gmail";

try
{
  SmtpClient smtp = new SmtpClient
  {
    Host = "smtp.gmail.com",
    Port = 587,
    EnableSsl = true,
    DeliveryMethod = SmtpDeliveryMethod.Network,
    Credentials = new NetworkCredential(SendersAddress, SendersPassword),
    //Timeout = 3000
  };

  MailMessage message = new MailMessage(SendersAddress, ReceiversAddress, subject, body);
  smtp.Send(message);
  Console.WriteLine("Message Sent Successfully");
  Console.ReadKey();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:44:28.537

~~[尝试端口 465](http://email.about.com/od/accessinggmail/f/Gmail_SMTP_Settings.htm)~~似乎端口 587 是正确的。

**请注意**，某些 ISP 和代理服务器在不使用端口 25 时会阻止 SMTP 数据。这可能会影响您的交易。

**更新** 似乎您的代理服务器阻止了您的通信。

* * *

*有趣的是，简单的 Google 搜索无法提供具有预期 SMTP 设置的 Google 帮助页面，尽管有 POP 和 IMAP 设置页面。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:06:19.407

尝试使用端口号 25。希望它有效。

# windows - bat文件中未定义的变量错误

> ID：12036361
> 
> 赞同：0
> 
> 时间：2012-08-20T10:52:58.237
> 
> 标签：windows, batch-file

搜索站点后，我尝试使用命令构建批处理文件。我正在尝试查找正在运行的进程的数量/计数，然后如果此类进程的数量在任何情况下都超过 5 个，则使用 if 执行另一个命令。

当我在 CMD 提示符下逐行运行语句时，它工作正常。
但是，当我通过一个 bat 文件运行它时，它会给出一个错误消息——此时 a 是意外的。

这是脚本。另外我不确定是否使用了正确的 If 语句（我在来找你之前确实搜索并使用过，但仍然只是以防万一）：

```
for /f "tokens=1,*" %a in ('tasklist ^| find /I /C "iexplore.exe" ') do 
@set var=%a
echo %var%
if %var% <= 5
::echo "hi"
::end if 
```

此外，还有一种语法可以做到这一点：

```
wmic process where name="iexplore.exe" | find "iexplore.exe" /c 
```

但我不确定如何将此命令的输出分配给任何变量，然后继续将此命令的值与 5 进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:39:56.153

`FOR`在批处理文件中使用时，您需要使用 double % 作为命令。

```
@echo off
set var=0
for /f "tokens=1,*" %%a in ('tasklist ^| find /I /C "explorer.exe" ') do set var=%%a
echo %var%
if %var% leq 5 (
  echo less or equal to 5
) else (
  echo 5 or more
) 
```

# string - matlab中的匹配检查

> ID：12036364
> 
> 赞同：1
> 
> 时间：2012-08-20T10:53:16.833
> 
> 标签：string, matlab, match

我有这样的字符串：

```
s{1,2} = 'string';
s{2,2} = 'string2'; 
```

在这样的工作区结构中

```
U.W.string = [2 2.5 3] 
```

我想检查（在循环中） s{1,2} 或 s{2,2} 或 s{i,2} 是否匹配具有相同名称的任何结构。如果是这样，则将此结构中的值分配给某个变量 var(i)。如何做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:10:41.250

用于`isfields`检查字符串是否是结构中字段的名称。然后使用语法`struct.(name)`，其中`name`是一个字符串来访问该字段。您的代码可能类似于：

```
test = struct('hello', 'world', 'count', 42, 'mean', 10);

fields = {'test', 'count';
          'hello', 'text';
          'more', 'less'};
values = {pi, 'dummy', -1};

for row = 1 : size(fields, 1)
    for column = 1 : size(fields, 2)
        if isfield(test, fields{row, column})
            test.(fields{row, column}) = values{row};
        end
    end
end 
```

这将转换初始结构

```
test =
    hello: 'world'
    count: 42
    mean: 10 
```

对这个

```
test =
    hello: 'dummy'
    count: 3.1416
    mean: 10 
```

一个更短的实现是通过删除内部循环并给一个单元阵列来实现的`isfields`：

```
for row = 1 : size(fields, 1)
    %# Note the parenthesis instead of curly braces in the next statement.
    match = isfield(test, fields(row, :));
    if any(match)
        test.(fields{row, match}) = values{row};
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:16:50.877

使用 isfield(structName,fieldName)。这应该可以解决问题：

```
strings{1,1} = 'foo';
strings{1,2} = 'bar';
strings{1, 3} = 'foobar';

U.W.foo = 1;
U.W.foobar = 5;

for idx = 1:length(strings)
    if(isfield(U.W,strings{1,idx}))
        expression = sprintf('outvar(idx) = U.W.%s',strings{1,idx});
        eval(expression);
    end
end 
```

# perl - 在 perl 中执行 bash 脚本

> ID：12036365
> 
> 赞同：-1
> 
> 时间：2012-08-20T10:53:22.170
> 
> 标签：perl, bash

我想在 perl 中运行这个命令

```
for dir in *; do
 test -d "$dir" && ( find "$dir" -name '*test' | grep -q . || echo "$dir" );
 done 
```

我努力了 ：

```
 system ("for dir in *; do
        test -d "\$dir" && ( find "\$dir" -name '*test' | grep -q . || echo "\$dir" );
        done"); 
```

但不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:22:24.160

使用[`File::Find`](https://metacpan.org/module/File%3a%3aFind)模块[`find`](https://metacpan.org/module/File%3a%3aFind#find)功能的纯 Perl 实现：

```
#!/usr/bin/env perl

use strict;
use warnings;

use File::Find;

find \&find_directories, '.';

sub find_directories {
    if ( -d && $File::Find::name =~ /test$/ ) {
        print "$File::Find::name\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:12:43.653

您的报价已关闭。

```
"for dir in *; do
    test -d "\$dir" && ( find "\$dir" -name '*test' | grep -q . || echo "\$dir" );
    done" 
```

您已决定用双引号分隔您的字符串`"`，但它们包含在您的字符串中。

要么**转义其他引号**：

```
"for dir in *; do
    test -d \"\$dir\" && ( find \"\$dir\" -name '*test' | grep -q . || echo \"\$dir\" );
    done" 
```

（容易出错，丑陋）

… 或**使用另一个分隔符**：Perl 为您提供了广泛的可能性。这些引用语法在内部*插入*变量：`"…"`并且`qq{…}`您可以在其中使用任何字符`[^\s\w]`作为分隔符，*非插入*语法是：`'…'`并且`q{…}`具有与以前相同的分隔符灵活性：

```
qq{for dir in *; do
    test -d "\$dir" && ( find "\$dir" -name '*test' | grep -q . || echo "\$dir" );
    done} 
```

`q`and结构可以在`qq`字符串中包含分隔符，如果出现是平衡的：`q( a ( b ) c )`有效。

第三种引用机制是*here-doc*：

```
system( <<END_OF_BASH_SCRIPT );
for dir in *; do
    test -d "\$dir" && ( find "\$dir" -name '*test' | grep -q . || echo "\$dir" );
    done
END_OF_BASH_SCRIPT 
```

这对于包含更长的片段而不用担心分隔符很有用。字符串以预定义的标记结束，该标记必须单独出现在一行中。如果分隔符声明放在单引号 ( `<<'END_OF_SCRIPT'`) 中，则不会插入任何变量：

```
system( <<'END_OF_BASH_SCRIPT' );
for dir in *; do
    test -d "$dir" && ( find "$dir" -name '*test' | grep -q . || echo "$dir" );
    done
END_OF_BASH_SCRIPT 
```

注意`q{}`and`qq{}`语法：这是一个永远不会在混淆之外使用的功能，但可以使用字符 in`\w`作为分隔符。`q`您必须在引用运算符or`qq`和分隔符之间包含一个空格。这有效：`q xabcx`并且等于`'abc'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:56:22.910

不要启动脚本，而是尝试启动一个运行脚本的 bash 实例。例如

```
system("bash -c 'for dir bla bla bla'"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T11:01:08.847

`system()`使用您的默认系统 shell，它可能不是 Bash。解决方案是[使用 system() 命令显式调用 Bash](https://stackoverflow.com/questions/571368/how-can-i-use-bash-syntax-in-perls-system)。

# c++ - 如何确定 libssl-dev 包含来自 libssl 0.9.8 而不是 libssl 1.0 的标头？

> ID：12036366
> 
> 赞同：0
> 
> 时间：2012-08-20T10:53:33.370
> 
> 标签：c++, openssl, ubuntu-12.04

我正在将开发环境从 Ubuntu 10.04 迁移到 Ubuntu 12.04。一个问题是 lib openssl 已从版本 0.9.8 升级到 1.xxx。

我从其他问题中得到了很多有用的提示，但现在我不确定我的最终版本是否真的正确。

我正在使用具有以下内容的 SDK

*   一些动态库，明确需要库的 0.9.8 版本（否则我在运行时收到错误消息）
*   一些需要包含 openssl/x509.h 和 openssl/evp.h 的标头

我做了什么：

*   apt-get install libssl-dev（在 /usr/include/openssl/ 下创建了头文件）
*   apt-get install libssl0.9.8（拥有这个版本的库）。

**==> 一切似乎都很好。**

**但**我担心我通过 libssl-dev 获得的包含是 1.0 版本的，它们可能会弄乱我在 0.9.8 版本上运行的代码。

我当前的环境是正确的还是我应该做其他事情（比如以某种方式获取 0.9.8 版本的标题）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:33:21.410

`libssl-dev`包括 1.0 头文件，没有 Ubuntu 提供的 0.9.8 开发包。如果我必须使用 0.9.8，我可能会自己编译并安装到`/usr/local`.

# python - Python 元类默认属性

> ID：12036367
> 
> 赞同：3
> 
> 时间：2012-08-20T10:53:42.977
> 
> 标签：python, metaclass

我正在尝试在 Python (2.7) 中创建元类，它将设置传递给对象的参数`__init__`作为对象属性。

```
class AttributeInitType(type):        
    def __call__(self, *args, **kwargs):
        obj = super(AttributeInitType, self).__call__(*args, **kwargs)
        for k, v in kwargs.items():
            setattr(obj, k, v)
        return obj 
```

用法：

```
class Human(object):
    __metaclass__ = AttributeInitType

    def __init__(self, height=160, age=0, eyes="brown", sex="male"):
        pass

man = Human() 
```

**问题：**我希望`man`实例的默认属性设置为类的`__init__`. 我该怎么做？

**更新：**我找到了更好的解决方案：

*   `__init__`在类创建期间只检查一次方法
*   不会覆盖由类的真实设置（可能）设置的属性`__init__`

这是代码：

```
import inspect
import copy

class AttributeInitType(type):
    """Converts keyword attributes of the init to object attributes"""
    def __new__(mcs, name, bases, d):
        # Cache __init__ defaults on a class-level
        argspec = inspect.getargspec(d["__init__"])
        init_defaults = dict(zip(argspec.args[-len(argspec.defaults):], argspec.defaults))
        cls = super(AttributeInitType, mcs).__new__(mcs, name, bases, d)
        cls.__init_defaults = init_defaults
        return cls

    def __call__(mcs, *args, **kwargs):
        obj = super(AttributeInitType, mcs).__call__(*args, **kwargs)
        the_kwargs = copy.copy(obj.__class__.__init_defaults)
        the_kwargs.update(kwargs)
        for k, v in the_kwargs.items():
            # Don't override attributes set by real __init__
            if not hasattr(obj, k):
                setattr(obj, k, v)
        return obj 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:10:33.360

您需要自省该`__init__`方法并从中提取任何默认值。该[`getargspec`功能](http://docs.python.org/library/inspect.html#inspect.getargspec)在那里会有所帮助。

该`getargspec`函数返回（除其他外）参数名称列表和默认值列表。您可以结合这些来查找给定函数的默认参数规范，然后使用该信息来设置对象的属性：

```
import inspect

class AttributeInitType(type):        
    def __call__(self, *args, **kwargs):
        obj = super(AttributeInitType, self).__call__(*args, **kwargs)
        argspec = inspect.getargspec(obj.__init__)
        defaults = dict(zip(argspec.args[-len(argspec.defaults):], argspec.defaults))
        defaults.update(kwargs)
        for key, val in defaults.items():
            setattr(obj, key, val)
        return obj 
```

使用上面的元类，您可以省略任何参数，它们将在新实例上设置，或者您可以通过显式传递它们来覆盖它们：

```
>>> man = Human()
>>> man.age
0
>>> man.height
160
>>> Human(height=180).height
180 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:09:04.957

如果您在创建对象时传递参数，您的情况就有效

```
>>> man
<test.Human object at 0x10a71e810>
>>> dir(man)
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__metaclass__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__']
>>> man=Human(height=10)
>>> dir(man)
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__metaclass__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'height']
>>> man.height
10 
```

但它不适用于默认参数。为此，您必须专门从`__init__`函数对象中提取它们。

另一种方法是装饰`__init__`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-14T00:19:24.063

我在我的框架中使用 *args/**kwargs、一个类默认字典以及在我的基础对象**init**中调用 attribute_setter 来执行此操作。我觉得这比装饰更简单，而且绝对比元类更简单。

```
Class Base(object):
    defaults = {"default_attribute" : "default_value"}

    def __init__(self, *args, **kwargs):
        super(Base, self).__init__()
        self.attribute_setter(self.defaults.items(), *args, **kwargs)

    def attribute_setter(self, *args, **kwargs):
        if args: # also allow tuples of name/value pairs
            for attribute_name, attribute_value in args:
                setattr(self, attribute_name, attribute_value)
        [setattr(self, name, value) for name, value in kwargs.items()]
b = Base(testing=True)
# print b.testing
# True
# print b.default_attribute
# "default_value" 
```

这种组合允许在运行时通过**init**分配任意属性，方法是将它们指定为关键字参数（或作为名称/值对的位置参数元组）。

类默认字典用于提供默认参数，而不是在**init**的参数列表中显式命名的关键字参数。这使得创建新实例的默认属性可以在运行时修改。您可以通过 dict.copy + dict.update “继承”类词典。

# mysql - CSV 到 MySQL：单表与多表？

> ID：12036368
> 
> 赞同：1
> 
> 时间：2012-08-20T10:53:57.217
> 
> 标签：mysql, csv

我有一个包含 74 列和大约 60K 行的 CSV 文件。这个 CSV 文件的内容必须每月导入 MySQL 数据库。

插入数据后，最终用户可以使用预定义的过滤器查询 MySQL 数据库的内容。

将所有内容放在一个表中意味着更快的插入，但更慢的读取。将内容拆分为多个表（使用外键）将意味着更慢的插入、更快的读取以及我认为更高的失败机会。

您认为对我来说最好的选择是什么，或者还有其他可能性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:31:15.563

如果所有数据关系（巴士、客户和行程之间）都是 1 对 1 的，并且信息没有在整个 CSV 中重复，那么您可以使用单个表，原因如下：

1.  从 CVS 到数据库的最简单转换，CVS 中的每一列将对应数据库中的一列
2.  任何在数据库上工作的人都会知道确切的数据在哪里，因为它“看起来像”CVS
3.  您主要关心的“读取速度较慢”不会是一个大问题，因为当您查询数据库以获取信息时，您只需要您想要的数据并过滤掉您不需要的列。（例如`SELECT departure, arrival, distance FROM bustrips WHERE distance > 1000`）\

但是，如果您查看数据，并且 CVS 中存在大量重复，可能来自多个客户乘坐同一次旅行，或者同一巴士用于多次旅行等。我会创建每个唯一数据块的新表。我可能已经看到的一个示例是公共汽车的新表：

```
Bus_ID;
Numberplate;
Handicap;
Odometer reading; 
```

我希望这可以帮助您做出决定。这与“易读”与“易写”无关，而是通过减少冗余来提高信息清晰度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:08:36.380

不用看你的专栏，我几乎可以保证多表是要走的路。

1.  它将减少人为错误
2.  通过减少冗余，
3.  作为奖励，客户地址的任何更新都可以在客户的表格中进行一次，而不必在他们参与的每个行项目上进行更新。
4.  您还会注意到插入变得更容易，因为可以将另一个表中涵盖的整行数据总结为引用单个外键！

如果数据库插入时间确实成为一个大问题，您总是可以花一点时间编写一个宏来为您完成。

# javascript - 多次启动 facebook like script

> ID：12036371
> 
> 赞同：1
> 
> 时间：2012-08-20T10:54:00.527
> 
> 标签：javascript, facebook, facebook-like, tumblr

我在 tumblr 上使用无限滚动，在运行时加载的元素内部，我有一个类似 facebook 的按钮。我第一次调用脚本时一切正常，但是，似乎我不能多次加载它，因此滚动时创建的元素不会有一个工作的 facebook 按钮，因为加载脚本时不存在。如果我在加载更多内容后执行此操作，则不会发生任何事情。

查看脚本（[http://connect.facebook.net/en_GB/all.js](http://connect.facebook.net/en_GB/all.js)），看起来脚本每页只运行一次，有什么办法解决这个问题吗？

我的代码：

```
var js, fjs = d.getElementsByTagName(s)[0];   
js = d.createElement(s); js.id = id;
js.async=true;  
js.src = "http://connect.facebook.net/en_GB/all.js#xfbml=1&appId=484534104905547";
fjs.parentNode.insertBefore(js, fjs); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:59:52.137

这是一个简单的解决方案。JavaScript SDK 为我们提供了一个名为`FB.XFBML.parse`.

> **FB.XFBML.parse** - 此函数动态解析和呈现文档中的 XFBML 标记...

一旦调用了无限滚动函数并加载了更多数据，只需再次调用此函数即可呈现新插件。

要重新解析整个页面，您可以按原样调用此函数 -

```
 FB.XFBML.parse(); 
```

如果要解析页面上的特定元素，可以将其传递给函数 -

```
 FB.XFBML.parse(document.getElementById('foo')); 
```

* * *

### 参考 -

*   [Facebook JavaScript SDK](https://developers.facebook.com/docs/reference/javascript/)
*   [FB.XFBML.parse](https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)

# c++ - Kiss FFT 似乎将数据乘以它转换的点数

> ID：12036374
> 
> 赞同：5
> 
> 时间：2012-08-20T10:54:23.887
> 
> 标签：c++, signal-processing, fft, kissfft

我对傅里叶变换的有限理解是，您应该能够在不更改原始数据的情况下在时域和频域之间切换。所以，这里是我（认为我）正在做的总结：

1.  `kiss_fft_next_fast_size(994)`用于确定我应该使用 1000 。

2.  **用于**`kiss_fft_alloc(...)`创建一个kiss_fft_cfg 。**`nfft = 1000`**

***   通过将额外点填充为零，将我的输入数据从 994 大小扩展到 1000。

    *   将Kiss_fft_cfg与我的输入**和**`kiss_fft(...)`输出数组一起传递。

    *   `kiss_fft_alloc(...)`用于创建一个**反向**的kiss_fft_cfg `nfft = 1000`。

    *   **将逆的kiss_fft_cfg**传递给`kiss_fft(...)`输入前一个输出数组。

    *   期望返回原始数据，但将每个数据精确地放大 1000 倍！** 

 **我在[这里放了一个完整的例子](http://liveworkspace.org/code/912ca15cac001f0bf63b18cb107c730b "完整的例子在这里")，我的 50 多行代码可以**在最后**找到。虽然我可以通过将每个结果除以`OPTIMAL_SIZE`（即 1000）的值来解决这个问题，但这个修复让我非常不安，不明白为什么。

请你能告诉我我做错了什么愚蠢的事情吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-20T11:48:28.557

这是意料之中的：离散傅里叶逆变换（可以使用快速傅里叶变换实现）需要除以 1/N：

> 乘以 DFT 和 IDFT（此处为 1 和 1/N）的归一化因子以及指数的符号只是惯例，在某些处理中有所不同。这些约定的唯一要求是 DFT 和 IDFT 具有相反符号的指数，并且它们的归一化因子的乘积为 1/N。DFT 和 IDFT 的 \sqrt{1/N} 归一化使得变换是单一的，这具有一些理论上的优势。但是在数值计算中，像上面那样一次执行缩放通常更实用（并且单位缩放在其他方面可能很方便）。

[http://en.wikipedia.org/wiki/Dft](http://en.wikipedia.org/wiki/Dft)**

# c# - 如何在 LINQ Join 中使用 AND 运算符

> ID：12036377
> 
> 赞同：4
> 
> 时间：2012-08-20T10:54:44.877
> 
> 标签：c#, linq, linq-to-sql, linq-to-entities, linq-to-objects

我有以下 SQL 查询

```
SELECT * FROM KDMS_dynamic vd

INNER JOIN KDMS_definition tblKDMS  ON tblKDMS.SystemID=vd.SystemID    
LEFT OUTER JOIN KDMS_typeid tblKDMSType ON tblKDMS.TypeId=tblKDMSType.TypeId            
INNER JOIN  KDMS_configuration tblKDMSConfig ON tblKDMS.SystemID=tblKDMSConfig.SystemID

    AND tblKDMSConfig.ConfigurationDate = (SELECT MAX(ConfigurationDate)
                                        FROM KDMS_configuration vc
                                        WHERE vc.SystemID=tblKDMSConfig.SystemID)
    AND vd.LastUpdated=(SELECT MAX(LastUpdated) FROM KDMS_dynamic vd 
                        WHERE vd.SystemID=tblKDMS.SystemID)  

        WHERE  

         DeletionDate IS NULL             
      AND LongDescription IS NOT NULL       
      AND tblKDMS.TypeId <> 1 
```

正如我尝试将其转换为 LINQ 一样，但由于 AND OPERATOR 在 Inner Join 中的使用，我不能。

我不知道如何在 LINQ 中使用 And 运算符， JOIN

正如我尝试的 linq 代码一样。

```
IQueryable<getKDMS> query = (from VD in this._db.GetTable<KDMS_dynamic>()
                                        join TblKDMS in this._db.GetTable<KDMS_definition>() on VD.SystemID equals TblKDMS.SystemID
                                        join TblKDMSType in this._db.GetTable<KDMS_typeid>().DefaultIfEmpty() on TblKDMS.TypeID equals TblKDMSType.TypeID 
                                        join TblKDMSConfig in this._db.GetTable<KDMS_configuration>() on TblKDMS.SystemID equals TblKDMSConfig.SystemID

                                        &&  TblKDMSConfig.ConfigurationDate == (from TblKDMS_conf in this._db.GetTable<KDMS_configuration>()
                                                                                      where TblKDMS_conf.SystemID == TblKDMSConfig.SystemID
                                                                                      select TblKDMS_conf.ConfigurationDate).Max()) 
```

正如我尝试过 && 但它没有用....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T11:11:05.610

它是这样完成的`on new{x.field1,x.field2} equals new{y.field1,y.field2}`

```
var somedata = (from TblKDMS_conf in this._db.GetTable<KDMS_configuration>()
              where TblKDMS_conf.SystemID == TblKDMSConfig.SystemID select TblKDMS_conf.ConfigurationDate).Max();

Queryable<getKDMS> query = (from VD in this._db.GetTable<KDMS_dynamic>()
                                    join TblKDMS in this._db.GetTable<KDMS_definition>() on VD.SystemID equals TblKDMS.SystemID
                                    join TblKDMSType in this._db.GetTable<KDMS_typeid>().DefaultIfEmpty() on TblKDMS.TypeID equals TblKDMSType.TypeID 
                                    join TblKDMSConfig in this._db.GetTable<KDMS_configuration>() on new {TblKDMS.SystemID,TblKDMSConfig.ConfigurationDate} equals new{TblKDMSConfig.SystemID,somedata} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T10:58:49.903

将`AND`条件移至您的`WHERE`子句。写作

```
SELECT * FROM Table1
INNER JOIN Table2 ON *first condition* AND *second condition*
WHERE *third condition* 
```

和写完全一样

```
SELECT * FROM Table1
INNER JOIN Table2 ON *first condition*
WHERE *second condition* AND *third condition* 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-20T11:00:06.080

我认为您需要使用 where 运算符代替 &&。

# asp.net - allowDefinition='MachineToApplication' 错误仅在我的托管网站上

> ID：12036380
> 
> 赞同：1
> 
> 时间：2012-08-20T10:54:51.070
> 
> 标签：asp.net, windows-hosting

错误：

> 解析器错误消息：在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

```
Line 10: </connectionStrings>
Line 11: <system.web>
Line 12: <roleManager enabled="true" />
Line 13: <membership>
Line 14: <providers> 
```

> 源文件：\Ns2\f\Users\cPanel\jdlferre\public_html\orangefresh\web.config
> 行：12

我环顾了互联网，没有运气，我的子文件夹甚至我网站上的任何地方都没有任何其他 web.config 文件。我不使用IIS，所以我也把它刮掉了......

我的网站在本地运行良好，只有在线才会出现此错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:07:36.813

我假设您的主机正在网站的子文件夹中运行您的网站。该网站将包含一个顶级 web.config，然后您的 web.config 的各个部分将与父配置文件冲突。

我建议您尝试在本地复制该环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:39:57.020

> 好的，现在给我一个“解析器错误消息：无法识别的属性'targetFramework'。请注意，属性名称区分大小写。” 这也是我尝试移动 web.config 文件时发生的情况。– Joao Ferreira 1 分钟前

在我看来，您正试图在仅支持 .net 3.5 的托管服务提供商下运行 .Net 4 或更高版本的网站

您可以通过右键单击 Visual Studio 中的网站根目录进行检查，然后转到“属性页面”，然后单击“构建”（注意：这是在 VS2010 中，我没有 2012，但可能非常相似）。那应该为您提供目标框架信息。

如果您使用的是 VS2012，那么它可能会默认创建一个 .Net 4 网站，所以它可能会说 .NET Framework 4。

如果您没有使用任何需要 .Net 4 或更高版本的控件，您可以在 3.5 中重新构建它，看看是否能解决问题。

否则，请与您的托管公司核实，确保他们托管 .Net 4 站点。并非所有人都这样做，几个月前我遇到了这个确切的问题。

# android - android:shadowColor 不适用于白色

> ID：12036385
> 
> 赞同：0
> 
> 时间：2012-08-20T10:55:12.727
> 
> 标签：android, shadow

有简单的 xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:gravity="center"
    android:padding="5dp" >

    <Button
        android:padding="15dp"
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:shadowColor="@android:color/black"
        android:shadowDy="10"
        android:shadowRadius="5"
        android:text="Button" />
 </LinearLayout> 
```

当我将其设置为活动的内容视图时，我在按钮文本下方看到黑色阴影。但是如果我改成`android:shadowColor="@android:color/black"`-`android:shadowColor="@android:color/white"`我再也看不到阴影了。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:03:12.497

我自己也遇到了这个。对我来说，它发生在背景明亮的时候，明亮背景上白色阴影的混合并不明显。我将 android:shadowRadius 更改为小（0.1）并解决了问题。

# android - 图像占用太多堆空间

> ID：12036391
> 
> 赞同：0
> 
> 时间：2012-08-20T10:55:38.637
> 
> 标签：android, image, memory, bitmap, heap-memory

我遇到了一个奇怪的问题 - 我正在制作一个 android 游戏，每隔几秒就会注意到一次延迟，并在我注意到垃圾收集器每隔几秒被调用一次 50-150 毫秒时检查日志。

当我使用一个背景图像（150kb）启动我的标题屏幕活动时，我已经将这个问题缩小到图像 - 我得到的消息是：

4% 空闲 (8009k/8259k) 将堆增长到 9.012MB GC_CONCURRENT 释放 1kb (9178k/9479k)

对于一个图像和三个按钮来说，这是一个很大的堆空间。当我删除图像时，我没有收到任何警告或消息（不确定如何在堆空间上强制输出，但我希望它处于正常水平）

活动图像的代码并不那么令人兴奋，因为它只是一个标题屏幕，但是：

```
 <ImageView
    android:id="@+id/backgroundImage1"
    android:contentDescription="Image"
    android:src="@drawable/openingscreen" 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="top"
    /> 
```

当我启动实际游戏时，堆大小再次增加（仅增加了几 mb）——奇怪的是当我没有标题屏幕时，主游戏的堆空间仍然是 12 mb 左右——所以我'我在想，也许图像是对其他一切的引用。尽管我尝试使用大小为 1 像素的背景图像，但这没有引起任何问题。

其次，gameThread里面的图片代码：

`mPlayer = Bitmap.createScaledBitmap(mPlayer, mCanvasWidth / 15, mCanvasHeight / 8, true);`

`canvas.drawBitmap(mPlayer, xPosition, yPosition, null);`

我确实在某处听说缩放位图会导致内存问题，但这并不能真正与其他所有内容相加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:10:09.603

是的，很多开发者在开发过程中都遇到过这种情况。

我要你做的是彻底研究检查这个堆到底是什么，垃圾收集器如何处理它，你如何有效地使用甚至缩放位图

您可以先浏览此视频 [Google Android Memory Management](http://www.youtube.com/watch?v=_CruQY55HOk)

接下来在android开发者站点中，详细介绍如何 [高效显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)

最后也是最后一件事是养成使用 MAT（[内存分析器工具](http://www.eclipse.org/mat/)）的习惯，有很多教程，有很多关于如何使用它以及找出应用程序被剥夺内存的位置和原因的博客

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:04:26.537

以下公式告诉您图像占用多少堆空间：宽度 x 高度 x 8 字节。所以一个全白但尺寸很大的图像仍然会占用大量的堆空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:18:33.990

刚刚更新，我发现了我的代码中的主要问题并设法让它顺利运行，我怀疑其他人是否愚蠢到犯同样的错误，但我会发布我的解决方案以防万一！

我在游戏的每次迭代中都重新调整了图像的大小，不知何故我没有意识到我把代码放在那里，改变了它，所以它在一开始就重新调整了它们的大小，就是这样。但是就是这样，我怀疑这个解决方案会帮助任何人，但也许有一天它会！

凯文。

# asp.net - 错误 [IM002] [Microsoft][ODBC Driver Manager] 未找到数据源名称且未指定默认驱动程序

> ID：12036394
> 
> 赞同：3
> 
> 时间：2012-08-20T10:55:48.997
> 
> 标签：asp.net, oracle, odbc, windows-server-2008-r2

我们有一个在以下环境中运行的 ASP.net Web 应用程序 -

***现有环境***

操作系统：Windows 2003

框架：.NET 框架：2.0

IIS：6.0

数据库：Oracle 10g

我们希望将其升级到以下环境

***当前环境***

操作系统：Windows 2008 R2 x64

框架：.NET 框架：2.0

IIS：7.0

数据库：Oracle 11g

这样做时，我们面临以下问题

Windows Server 2008 R2 64 位上的 ODBC 连接问题

无法从 Windows Server 2008 R2 中的 ASP.net Web 应用程序建立 ODBC 连接。

应用程序引发错误： **错误 [IM002] [Microsoft][ODBC 驱动程序管理器] 未找到数据源名称且未指定默认驱动程序。**

连接字符串：

```
<add name="ConnectionString" connectionString="Driver=Oracle in XE;Dsn=winerenew;uid=winere;pwd=winere;dbq=XE;dba=W;apa=T;exc=F;fen=T;qto=T;frc=10;fdl=10;lob=T;rst=T;btd=F;bam=IfAllSuccessful;num=NLS;dpm=F;mts=T;mdi=F;csr=F;fwc=F;fbs=64000;tlo=O" providerName="System.Data.Odbc"/> 
```

应用程序在 Windows 2008 x86 中完美运行。

我们尝试了以下方法来解决 Windows Server 2008 x64 中的此问题，

1) 在应用程序池中启用 32 位应用程序 (IIS 7)

2) 使用以下命令执行 ODBC 32 位驱动程序 C:\Windows\SysWOW64\odbcad32.exe

3) 安装 oracle 64 位 ODBC 驱动程序。

上述方法似乎不能解决这个问题。谁能告诉我它背后的问题以及解决这个问题的解决方案？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-27T05:14:09.183

如果您有可用的 DNS，那么您可以启用从`odbcad32.exe`. 然后从任何 ODBC 编辑器/工具测试 Oracle 连接（我经常使用使用`odbc`模块的简单 Python 程序对其进行测试）。这样的跟踪将创建一个成功尝试连接到数据库的文件。连接do数据库关闭程序后，停止跟踪并重命名跟踪文件。

现在你必须为你的应用程序创建这样的跟踪：启用跟踪，启动你的程序，尝试连接数据库，关闭程序，停止跟踪。您有两个文件尝试通过 ODBC 连接到数据库：一个成功，一个失败。比较它们。

# macos - 在 OSX Mountain Lion 中，portmap 的计划替代品是什么？

> ID：12036399
> 
> 赞同：2
> 
> 时间：2012-08-20T10:56:14.470
> 
> 标签：macos, rpc, osx-mountain-lion

（听到这是一个愚蠢的问题，我会很遗憾，但我已经做了一些相当多的谷歌搜索，无法理解它。）

如果我尝试开发一些使用 RPC 的软件，我不仅发现 RPC Portmapper 尚未在我的系统上运行，而且我找不到也无法启动它。虽然我找不到任何关于此的痕迹，但这对我来说是一个明显的迹象，表明 Apple 决定要么撤回对仅好的 ONC RPC 的支持，要么他们切换到其他我找不到的东西。

[https://www.cs.rutgers.edu/~pxk/rutgers/notes/rpc/step3.html](https://www.cs.rutgers.edu/~pxk/rutgers/notes/rpc/step3.html)（它们似乎并没有那么过时）仍然指出必须完成`launchctl start com.apple.portmap`但很明显对我来说不再存在：`launchctl start error: No such process`

我只能确认 portmap 不再适用于 10.8（Mountain Lion），而我可以验证它在 10.6（Snow Leopard）上仍然存在。我不知道 10.7 (Lion) 中的状态是什么。

（令人惊讶的是，一开始我认为 Stackoverflow 是一个非常聪明的东西，然而，每次我问一个问题时，它都会以道歉和我承认自己的愚蠢开始）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:02:25.450

原来我的问题至少有一半是愚蠢的。我仍然找不到任何关于此的文档，但`launchctl start rpcbind`似乎漂浮我的船。这是更多的 BSD 变体。

让我们希望这至少以某种文档方式对其他人有所帮助。谢谢你成为我的泰迪熊。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T04:12:52.610

FWIW 在您链接到的页面上，它列出了 OS X 的命令，因为`launchctl start com.apple.portmap`它还列出了 BSD 的命令`/usr/sbin/rpcbind`，它位于 Mtn Lion 中，可能会解释为什么`launchctl start rpcbind`有效。

# python - python django 中 /***/ (1048, "Column '***' cannot be null") 处的 IntegrityError

> ID：12036400
> 
> 赞同：3
> 
> 时间：2012-08-20T10:56:21.230
> 
> 标签：python, django

嗨，我收到此错误是因为我的[附加用户信息模型](https://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users)( `user = models.OneToOneField(User)`) 中有一个字段，我没有在注册时填写（因为我想让用户稍后再填写）。

我想知道除了允许数据库中的空字段之外是否有任何方法可以解决这个问题？

干杯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T12:09:54.873

尝试

`user = models.OneToOneField(User, null=True, blank=True)`

然后重新创建你的数据库。[您可以在https://docs.djangoproject.com/en/1.4/ref/models/fields/#null](https://docs.djangoproject.com/en/1.4/ref/models/fields/#null)上找到更多信息

否则，您可以使用代理模型：

```
class UserExtraInfo(User):
#here your extra fields 
```

在这种情况下，您不需要与 User 同时创建 UserExtraInfo 实例。阅读更多关于[https://docs.djangoproject.com/en/1.4/topics/db/models/#model-inheritance](https://docs.djangoproject.com/en/1.4/topics/db/models/#model-inheritance)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:33:59.883

当您将某些数据库字段定义为非空并通过时，基本上会发生完整性错误

空值或空白值

我假设您通过 django 表单将值存储在数据库中

所以在那种情况下你可以这样做

`if request.method == POST:` # 不管是什么方法

```
 get_form_obj = form.save(commit = False) 
```

不要忘记在您的模型用户字段中进行更改，例如`(null = True,blank = True)`

希望这会有所帮助

# ruby-on-rails - Ruby on Rails NoMethodError

> ID：12036402
> 
> 赞同：1
> 
> 时间：2012-08-20T10:56:23.663
> 
> 标签：ruby-on-rails, twitter-bootstrap, formtastic

我有一个问题`formtastic-bootstrap`。

`semantic_form_for`捕获以下异常：

> <#:0xb3580fe4> 的未定义方法'request_request_request_request_request_request_request_request_request_request_request_request_request_request_request_request_request_request_request_request_request_request_request_request_request_request_request_request_request_request_path'。

有没有人遇到过这样的问题？或者有人知道解决方案吗？

# iphone - UIImageview 设置图片崩溃

> ID：12036404
> 
> 赞同：1
> 
> 时间：2012-08-20T10:56:34.377
> 
> 标签：iphone, ios5, uitableview, uiimageview

我正在使用以下代码将图像设置为 UIImageView

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    for(int i=0;i<[radioButtons count];i++){
        [[radioButtons objectAtIndex:i] setImage:[UIImage imageNamed:@"checkbox_unchecked.png"]];

    }    
    UIImageView *imageViews=(UIImageView *)[self.view viewWithTag:indexPath.row];
    [imageViews setImage:[UIImage imageNamed:@"checkbox_checked.png"]];
} 
```

因此，在单击任何 tableview 单元格时，图像都会被设置。但是一旦我点击`objectatindex:0` 然后应用程序崩溃。我无法解决这个问题。

以下是崩溃日志：

```
2012-08-20 16:25:36.321 EventApp[2422:12503] -[UIView setImage:]: unrecognized selector sent to instance 0x79642b0
2012-08-20 16:25:36.321 EventApp[2422:12503] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIView setImage:]: unrecognized selector sent to instance 0x79642b0'
*** First throw call stack:
(0x1de3022 0x1c03cd6 0x1de4cbd 0x1d49ed0 0x1d49cb2 0x7a98c 0xc615c5 0xc617fa 0x14f685d 0x1db7936 0x1db73d7 0x1d1a790 0x1d19d84 0x1d19c9b 0x1be57d8 0x1be588a 0xbd0626 0x380a2 0x23b5)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T11:02:58.370

我认为你没有得到 UIImageView 对象，你得到的是 uiview 类型对象，这就是它崩溃的原因。您应该尝试定义另一个标记属性，例如 999+indexPath.row。在您定义 tag=0 或 IB 自动将 tag=0 用于所有对象的某个地方得到它，因此它使用带有标签 0 的 uiview 而不是 uiimageView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:01:10.583

这意味着您将消息 -(void)setImage 发送到 UIView，而不是 UIImageView。确保带有标签 indexPath.row 的视图和数组中的所有单选按钮实际上都是 UIImageView

# c# - 如何更新 viewmodel 方法中的 busyIndi cator 状态？

> ID：12036405
> 
> 赞同：2
> 
> 时间：2012-08-20T10:56:34.983
> 
> 标签：c#, silverlight, mvvm

我有一个 web 服务调用，我想在 web 服务收到错误时更新 UI busyIndi​​cator 状态！这是viewmodel webservice调用完成方法中的代码：

```
if (e.Error != null)
                {
                    MessageBox.Show(msg);
                    busyIndicator.IsBusy = false;
                    return;
                } 
```

我知道当它有多个线程时如何在另一个线程中更新 UI 对象，但是视图模型没有对 busyIndi​​cator 的引用！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T11:04:02.573

对于 MVVM 模式做这样的事情

XAML 文件

```
 <controlsToolkit:BusyIndicator BusyContent="Fetching Data Please Wait.." IsBusy="{Binding IsBusy}" >
            <Grid >....</Grid>
        </controlsToolkit:BusyIndicator> 
```

查看模型类

```
private bool isBusy = false; 

public bool IsBusy 

{ 

    get { return isBusy; } 

    internal set { isBusy = value; OnPropertyChanged("IsBusy"); } 
```

不，您只需要为可以为您工作的属性设置值

类似于视图模型中的东西

```
 IsBusy = true; //or false 
```

* * *

你有没有尝试过这样的事情，即使用 Dispatcher 来更新 UI

```
private void btnClick_Click(object sender, RoutedEventArgs e)
{
busyIndicator.IsBusy = true;
//busyIndicator.BusyContent = "Fetching Data...";

ThreadPool.QueueUserWorkItem((state) =>
{
Thread.Sleep(3 * 1000);
Dispatcher.BeginInvoke(() => busyIndicator.IsBusy = false);
});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:27:56.970

将忙碌指示符内容绑定到字符串。并将值设置为您要显示的值。

```
if (e.Error != null)
            {
                MessageBox.Show(msg);
                busyIndicator.IsBusy = false;
                IndicatorMessage = "There has been an error"
                return;
            } 
```

在您的 XAML 中，您执行标准绑定。

# visual-studio-2010 - 可以通过 msvsmon.exe 远程调试 Silverlight 应用程序吗？

> ID：12036409
> 
> 赞同：1
> 
> 时间：2012-08-20T10:56:52.223
> 
> 标签：visual-studio-2010, silverlight, remote-debugging

我们的 Silverlight 应用遇到了一个问题，只能在***一台 IE9 (x64) 的特定 PC 上***重现（此问题无法在具有相同版本 IE 的开发机器上重现），因此我们需要使用远程调试，但是，它似乎不可能，因为它总是告诉我无法附加到 IE 进程（使用 Visual Studio 2010）。我发现[http://forums.silverlight.net/t/100057.aspx/1](http://forums.silverlight.net/t/100057.aspx/1)告诉Silvelight不支持远程调试？有这方面的更新吗？在这种情况下启用调试的任何想法？

# google-analytics - 在谷歌分析中按用户代理过滤

> ID：12036413
> 
> 赞同：7
> 
> 时间：2012-08-20T10:57:11.710
> 
> 标签：google-analytics

有没有办法在配置文件过滤器（Admin < Profiles < Filter）中按**user-agent过滤？**

*（“浏览器版本”和用户代理一样吗？）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-09T15:13:45.153

Google Analytics 浏览器版本与 UA 标头不同。浏览器版本会给你`11`或`Edge`或`35`取决于 Internet Explorer、Chrome 等、、、等`Operating System`只是谷歌预先解析的用户代理结果。`Browser``Device Category`

但是，您可以做的是使用`Google Tag Manager`并创建一个自定义 JavaScript 变量，`navigator.userAgent`该变量作为变量返回，您可以将其作为自定义维度推送到 Google Analytics。

你当然可以在没有 GTM 的情况下使用纯 JavaScript 来做同样的事情，而 GTM`Analytics.js`只是做这些事情的一种更简单的方法。

当您将用户代理作为 Google Analytics 中的自定义维度时，您可以在这些维度上运行报告。

# c - 如何从 C 中的函数返回 1000 个变量？

> ID：12036416
> 
> 赞同：0
> 
> 时间：2012-08-20T10:57:32.867
> 
> 标签：c

如何从 C 中的函数返回 1000 个变量？
这是一个面试问题，我无法回答。

我想在指针的帮助下，我们可以做到这一点。我是指针的新手，C 任何人都可以使用指针或不同的方法给我解决这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:59:21.607

将它们全部打包在一个结构中并返回该结构。

```
struct YourStructure
{
    int a1;
    int b2;

    int z1000;
};

YouStructure doSomething(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:02:00.487

如果它是同一类型的 1000 倍（例如 int 的）：

```
void myfunc(int** out){
  int i = 0;
  *out  = malloc(1000*sizeof(int));
  for(i = 0; i < 1000; i++){
    (*out)[i] = i;
  }
} 
```

此函数为 1000 个整数（整数数组）分配内存并填充数组。

该函数将以这种方式调用：

```
int* outArr = 0;
myfunc(&outArr); 
```

`outArr`使用后必须释放所持有的内存：

```
free(outArr); 
```

看到它在 ideone 上运行：http: [//ideone.com/u8NX5](http://ideone.com/u8NX5)

* * *

替代解决方案：不是`myfunc`为整数数组分配内存，而是让调用者完成工作并将数组大小传递给函数：

```
void myfunc2(int* out, int len){
  int i = 0;
  for(i = 0; i < len; i++){
    out[i] = i;
  }
} 
```

然后，它是这样调用的：

```
int* outArr = malloc(1000*sizeof(int));
myfunc2(outArr, 1000); 
```

`outArr`同样，调用者必须释放内存。

* * *

第三种方法：静态内存。`myfunc2`使用静态内存调用：

```
int outArr[1000];
myfunc2(outArr, 1000); 
```

在这种情况下，不必分配或释放内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T11:06:09.333

数组指针方法：

```
int * output(int input)
{
    int *temp=malloc(sizeof(int)*1000);
    // do your work with 1000 integers
    //...
    //...
    //...
    //ok. finished work with these integers
    return temp;
} 
```

结构指针方法：

```
struct my_struct
{
    int a;
    int b;
    double x;
    ...
    //1000 different things here
    struct another_struct;
}parameter;

my_struct * output(my_struct what_ever_input_is)
{
    my_struct *temp=malloc(sizeof(my_struct));
    //...
    //...
    return temp;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T11:14:50.860

这就是你在 C 中的做法。

```
void func (Type* ptr);
/*
   Function documentation.
   Bla bla bla...

   Parameters
   ptr      Points to a variable of 'Type' allocated by the caller. 
            It will contain the result of...

*/ 
```

如果你的意图不是通过“ptr”返回任何东西，你会写

```
void func (const Type* ptr); 
```

反而。

# debugging - installanywhere 将调试日志重定向到文件

> ID：12036425
> 
> 赞同：0
> 
> 时间：2012-08-20T10:58:17.123
> 
> 标签：debugging, installanywhere

为了调试 Installanywhere 创建的应用程序，我使用

**导出 LAX_DEBUG=true**

然后我运行我的安装程序

**./setup.sh -DDEBUG=控制台**

它将所有调试日志重定向到控制台。我可以将此日志重定向到任何文件，以便我可以提及：

**./setup.sh -DDEBUG=/tmp/a.txt**

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:25:44.247

Installanywhere 将所有日志放到用户选择的安装目录中的-log.log 文件中。要在该文件中添加其他条目，您需要使用带有 appendMessage 和 appendError api 的 CustomError 类。

# google-docs-api - 按多个resourceId过滤

> ID：12036429
> 
> 赞同：0
> 
> 时间：2012-08-20T10:58:29.153
> 
> 标签：google-docs-api, google-drive-api

有没有办法`resourceId`使用 .Net 库通过多个查询？

例如，通常我这样查询单个提要条目`resourceId`：

```
DocumentsListQuery query = new DocumentsListQuery();
query.Uri = new Uri(string.Format("{0}/{1}", DocumentsListQuery.documentsBaseUri, doc.ResourceId));
DocumentsFeed feed = service.Query(query); 
```

我想知道是否有某种方法可以`resourceId`在单个查询中通过它们的 's 查询多个文档，而不仅仅是获取整个列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:23:45.460

单个 RESTful 查询只能返回单个元素或提要，因此无法通过多个`resourceId`' 进行查询。

另一种方法可能是指定一个搜索查询，将您的结果限制为您想要的元素，但只有当您的文件具有将它们与其他文档区分开来的共同点时，才会存在此类搜索条件。

文档列表 API 中的搜索查询文档可在[https://developers.google.com/google-apps/documents-list/#searching_for_documents_and_files](https://developers.google.com/google-apps/documents-list/#searching_for_documents_and_files)获得，但我也建议您查看较新的[Drive API](https://developers.google.com/drive/)以及它如何管理搜索：

[https://developers.google.com/google-apps/documents-list/#searching_for_documents_and_files](https://developers.google.com/google-apps/documents-list/#searching_for_documents_and_files)

# objective-c - 当我想在变量更改时停止时，如何在 xCode 中设置断点？

> ID：12036432
> 
> 赞同：2
> 
> 时间：2012-08-20T10:58:35.333
> 
> 标签：objective-c, ios, xcode, breakpoints

我想在变量更改时设置一个断点。例如：

```
......
if(downloader){
        [downloader addDelegate:sImageAutoSaver];
}
...... 
```

我想在下载器更改时破坏应用程序。因为我想知道谁更改了变量。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T11:26:31.947

如果*下载*器是 ivar 并且您使用的是 Xcode 4.4，则可以使用调试器控制台。`init`在此类的方法内或`viewDidLoad`（如果它是 ViewController）或一般情况下，在分配*下载*器之前放置普通断点。当在创建的断点处停止执行时，`watch set variable -w write self->downloader`在调试器控制台中键入。你会看到`Watchpoint created: Watchpoint 1: addr = 0x092359b4 ...`消息。接下来，按继续按钮，您的程序将在分配变量时停止。

在变量断点命中后，您将只看到程序集，尝试通过左侧导航面板上的执行堆栈查看应用程序的方法。

# iphone - 当我们在设置中更改日历时，日期格式会有所不同

> ID：12036434
> 
> 赞同：0
> 
> 时间：2012-08-20T10:58:46.333
> 
> 标签：iphone

我在`UILabel`问题中显示日期字段是当我更改使用的设置`ipad` 时 `settings->international->calender`

`gregorian`并从日期格式不同将其更改为佛教。

如何解决此问题，以便`gregorian`即使更改日​​历也仅显示日期格式？

# android - 更新电子邮件地址的标签

> ID：12036439
> 
> 赞同：0
> 
> 时间：2012-08-20T10:59:04.033
> 
> 标签：android, label, android-contacts, contactscontract

我需要更新android 电话簿上的***标签电子邮件地址。***有谁知道我该怎么做？

这是我的代码

```
String stEtEmail = etEmail.getText().toString();  //EMAIL
String stBtnLabelEmail = etBtnLabelEmail.getText().toString();  //**LABEL**
values.clear();
String mailWhere = ContactsContract.Data.CONTACT_ID + "=? AND " + ContactsContract.Data.MIMETYPE + "=?"; 
String[] mailWhereParams = new String[]{String.valueOf(idContacto),ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE}; 
values.put(ContactsContract.CommonDataKinds.Email.DATA,stEtEmail);

cr.update(ContactsContract.Data.CONTENT_URI, values, mailWhere, mailWhereParams); 
```

我不知道如何更新我的电子邮件标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:18:48.267

我得到了解决方案：

```
 values.put(ContactsContract.CommonDataKinds.Email.TYPE,ContactsContract.CommonDataKinds.Email.TYPE_HOME);  //TYPE_WORK  TYPE_HOME.......
     values.put(ContactsContract.CommonDataKinds.Email.LABEL,stBtnLabelEmail); 
```

# asp.net-mvc - 使用 EF 5.0 时，MVC3 找不到元素“entityFramework”的架构信息

> ID：12036444
> 
> 赞同：0
> 
> 时间：2012-08-20T10:59:26.310
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-3

在查找了几分钟以了解为什么我的数据库没有播种后，我在 we.config 文件中发现了以下消息。

完整的消息列表如下：

> > 消息 1 找不到元素“entityFramework”的架构信息。
> > 
> > 消息 2 找不到元素“defaultConnectionFactory”的架构信息。
> > 
> > 消息 3 找不到 at'type' 的架构信息。

现在我对 MVC 非常陌生，这是我构建的第一个应用程序。我想利用可用的 Code First 技术从我构建的模型中创建数据库。

这是我创建的模型的示例：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations.Schema;
using System.ComponentModel;
using System.Data.Entity;
using System.ComponentModel.DataAnnotations;

namespace TNTMVC.Models.UECDECZA.BaseTables
{
public class Actions
{
    [Key]
    public int ActionID { get; set; }
    [Timestamp]
    public DateTime ActionDateCreated { get; set; }
    [Required]
    [DefaultValue(true)]
    public bool ActionActive { get; set; }
    [Required]
    public string ActionName { get; set; }
    [Required]
    [DefaultValue(true)]
    public bool ActionRequiresComponents { get; set; }
    [Required]
    [DefaultValue(1000)]
    public int ActionListOrder { get; set; }
}
} 
```

然后我创建了我的数据库上下文类，看起来像这样。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;
using TNTMVC.Models.UECDECZA.BaseTables;
using TNTMVC.Models.UECDECZA.DataTables;

namespace TNTMVC.Models.UECDECZA
{
public class UecdeczaContext : DbContext
{
    public DbSet<Actions> Actions { get; set; }
    public DbSet<Application> Application { get; set; }
    public DbSet<Area> Area { get; set; }
 }
 } 
```

这是我的 Web.Config 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
For more information on how to configure your ASP.NET application, please visit
http://go.microsoft.com/fwlink/?LinkId=152368
-->
<configuration>
<configSections>
<!-- For more information on Entity Framework configuration, visit   http://go.microsoft.com/fwlink/?LinkID=237468 -->
<section name="entityFramework"   type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
</configSections>
<connectionStrings>
<add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
<add name="UecdeczaContext" connectionString="Data Source=.\SQLExpress;Integrated Security=True" providerName="System.Data.SqlClient" />
</connectionStrings>
<appSettings>
<add key="webpages:Version" value="1.0.0.0" />
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings>
<system.web>
<compilation debug="true" targetFramework="4.0">
  <assemblies>
    <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </assemblies>
  </compilation>
  <authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" />
  </authentication>
  <membership>
  <providers>
    <clear />
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
   </providers>
  </membership>
  <profile>
  <providers>
    <clear />
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
   </providers>
  </profile>
  <roleManager enabled="false">
  <providers>
    <clear />
    <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
    <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
    </providers>
  </roleManager>
  <pages>
  <namespaces>
    <add namespace="System.Web.Helpers" />
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Routing" />
    <add namespace="System.Web.WebPages" />
    <add namespace="System.Data.Entity" />
  </namespaces>
  </pages>
</system.web>
<system.webServer>
<validation validateIntegratedModeConfiguration="false" />
<modules runAllManagedModulesForAllRequests="true" />
</system.webServer>
<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
  </dependentAssembly>
</assemblyBinding>
</runtime>
<entityFramework>
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
   <parameters>
    <parameter value="Data Source=.\SQLEXPRESS; Integrated Security=True;      MultipleActiveResultSets=True" />
    </parameters>
 </defaultConnectionFactory>
 </entityFramework>
</configuration> 
```

这应该是一个成功的模型实现吧？但它似乎根本不起作用。它没有播种我的数据库，也没有工作:(

我也在 ASP 论坛上问过同样的问题：[我的 ASP 论坛问题](http://forums.asp.net/p/1834261/5113253.aspx/1?Re%20Could%20not%20find%20schema%20information%20for%20the%20element%20entityFramework%20)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:25:02.020

您似乎没有调用 Seed() 方法的初始化程序（默认初始化程序除外）。有关更多信息，请参阅 Julia Lerman[关于播种的博客文章](http://thedatafarm.com/blog/data-access/seeding-a-database-with-ef4-code-first/)。你需要类似的东西：

```
public class UecdeczaInitializer : DropCreateDatabaseIfModelChanges<UecdeczaContext >
{
    protected override void Seed(UecdeczaContext context)
    {
        new List<Actions>
        {
            new Actions
                {
                    ActionName = "My action name"
                }
            }
        }.ForEach(b => context.Blogs.Add(b));
       base.Seed(context);  }
} 
```

您可能需要在其中添加更多属性来为您的 Actions 实体播种，但这是基本思想。

# bash - Bash 中的命令行参数

> ID：12036445
> 
> 赞同：78
> 
> 时间：2012-08-20T10:59:35.723
> 
> 标签：bash, command-line-arguments

我想编写一个带有不同参数的 bash 脚本。它应该像普通的 linux 控制台程序一样使用：

```
my_bash_script -p 2 -l 5 -t 20 
```

因此，值 2 应保存在名为 pages 的变量中，参数 l 应保存在名为 length 的变量中，值 20 应保存在变量 time 中。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-08-20T11:08:07.160

使用`getopts`内置：
[这里有一个教程](http://wiki.bash-hackers.org/howto/getopts_tutorial)

```
pages=  length=  time=

while getopts p:l:t: opt; do
  case $opt in
  p)
      pages=$OPTARG
      ;;
  l)
      length=$OPTARG
      ;;
  t)
      time=$OPTARG
      ;;
  esac
done

shift $((OPTIND - 1)) 
```

`shift $((OPTIND - 1))`转换命令行参数，以便您可以访问脚本的可能参数，即`$1, $2, ...`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-20T11:07:34.163

类似的东西

```
pages=
length=
time=

while test $# -gt 0
do
    case $1 in
        -p)
            pages=$2
            shift
            ;;
        -l)
            length=$2
            shift
            ;;
        -t)
            time=$2
            shift
            ;;
        *)
            echo >&2 "Invalid argument: $1"
            ;;
    esac
    shift
done 
```

# sql - 将数据库模式导出到 SQL 文件中

> ID：12036458
> 
> 赞同：112
> 
> 时间：2012-08-20T11:00:20.023
> 
> 标签：sql, sql-server, database, tsql, export

是否可以`MS SQL Server 2008`将数据库结构导出到`T-SQL`文件中？

我不仅要导出表模式，还要导出主键、外键、约束、索引、存储过程、用户定义的类型/函数。

另外我不希望数据出现在这个`T-SQL`文件中。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-08-20T11:03:57.813

您可以通过 SQL Server Management Studio 为文件生成脚本，步骤如下：

1.  右键单击要为其生成脚本的数据库（不是表）并选择任务 - 生成脚本
2.  接下来，选择请求的表/表、视图、存储过程等（从选择特定的数据库对象中）
3.  单击高级 - 选择要编写脚本的数据类型
4.  单击下一步并完成

[MSDN 生成脚本](http://msdn.microsoft.com/en-us/library/hh245282.aspx)

生成脚本时，有一个区域允许您编写脚本、约束、键等。从 SQL Server 2008 R2 开始，脚本下有一个高级选项：

![在此处输入图像描述](../Images/a8425563b0e1b113e09e84453109a0e9.png)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-04-11T16:01:52.437

![在此处输入图像描述](../Images/bf81f8f1c759ecc1ff0c7804cc49dd6c.png)

在图片中你可以看到。在设置脚本选项中，选择最后一个选项：要编写脚本的数据类型，您可以在右侧单击，然后选择所需的内容。这是您应该选择导出架构和数据的选项

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-20T11:03:21.490

您是否尝试过`Generate Scripts`SQL Management Studio 中的（右键单击、任务、生成脚本）选项？这会产生你所说的“SQL文件”吗？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-03T11:32:46.170

我写了这个 sp 来自动创建包含所有东西的模式，pk，fk，分区，约束......我写它是为了在同一个 sp 中运行。

重要的！！在执行之前

```
 create type TableType as table (ObjectID int) 
```

这里是 SP：

```
create PROCEDURE [dbo].[util_ScriptTable] 
     @DBName SYSNAME
    ,@schema sysname
    ,@TableName SYSNAME
    ,@IncludeConstraints BIT = 1
    ,@IncludeIndexes BIT = 1
    ,@NewTableSchema sysname
    ,@NewTableName SYSNAME = NULL
    ,@UseSystemDataTypes BIT = 0
    ,@script varchar(max) output
AS 
BEGIN try
    if not exists (select * from sys.types where name = 'TableType')
        create type TableType as table (ObjectID int)--drop type TableType

    declare @sql nvarchar(max)

    DECLARE @MainDefinition TABLE (FieldValue VARCHAR(200))
    --DECLARE @DBName SYSNAME
    DECLARE @ClusteredPK BIT
    DECLARE @TableSchema NVARCHAR(255)

    --SET @DBName = DB_NAME(DB_ID())
    SELECT @TableName = name FROM sysobjects WHERE id = OBJECT_ID(@TableName)

    DECLARE @ShowFields TABLE (FieldID INT IDENTITY(1,1)
                                        ,DatabaseName VARCHAR(100)
                                        ,TableOwner VARCHAR(100)
                                        ,TableName VARCHAR(100)
                                        ,FieldName VARCHAR(100)
                                        ,ColumnPosition INT
                                        ,ColumnDefaultValue VARCHAR(100)
                                        ,ColumnDefaultName VARCHAR(100)
                                        ,IsNullable BIT
                                        ,DataType VARCHAR(100)
                                        ,MaxLength varchar(10)
                                        ,NumericPrecision INT
                                        ,NumericScale INT
                                        ,DomainName VARCHAR(100)
                                        ,FieldListingName VARCHAR(110)
                                        ,FieldDefinition CHAR(1)
                                        ,IdentityColumn BIT
                                        ,IdentitySeed INT
                                        ,IdentityIncrement INT
                                        ,IsCharColumn BIT 
                                        ,IsComputed varchar(255))

    DECLARE @HoldingArea TABLE(FldID SMALLINT IDENTITY(1,1)
                                        ,Flds VARCHAR(4000)
                                        ,FldValue CHAR(1) DEFAULT(0))

    DECLARE @PKObjectID TABLE(ObjectID INT)

    DECLARE @Uniques TABLE(ObjectID INT)

    DECLARE @HoldingAreaValues TABLE(FldID SMALLINT IDENTITY(1,1)
                                                ,Flds VARCHAR(4000)
                                                ,FldValue CHAR(1) DEFAULT(0))

    DECLARE @Definition TABLE(DefinitionID SMALLINT IDENTITY(1,1)
                                        ,FieldValue VARCHAR(200))

  set @sql=
  '
  use '+@DBName+'
  SELECT distinct DB_NAME()
            ,inf.TABLE_SCHEMA
            ,inf.TABLE_NAME
            ,''[''+inf.COLUMN_NAME+'']'' as COLUMN_NAME
            ,CAST(inf.ORDINAL_POSITION AS INT)
            ,inf.COLUMN_DEFAULT
            ,dobj.name AS ColumnDefaultName
            ,CASE WHEN inf.IS_NULLABLE = ''YES'' THEN 1 ELSE 0 END
            ,inf.DATA_TYPE
            ,case inf.CHARACTER_MAXIMUM_LENGTH when -1 then ''max'' else CAST(inf.CHARACTER_MAXIMUM_LENGTH AS varchar) end--CAST(CHARACTER_MAXIMUM_LENGTH AS INT)
            ,CAST(inf.NUMERIC_PRECISION AS INT)
            ,CAST(inf.NUMERIC_SCALE AS INT)
            ,inf.DOMAIN_NAME
            ,inf.COLUMN_NAME + '',''
            ,'''' AS FieldDefinition
            --caso di viste, dà come campo identity ma nn dà i valori, quindi lo ignoro
            ,CASE WHEN ic.object_id IS not NULL and ic.seed_value is not null THEN 1 ELSE 0 END AS IdentityColumn--CASE WHEN ic.object_id IS NULL THEN 0 ELSE 1 END AS IdentityColumn
            ,CAST(ISNULL(ic.seed_value,0) AS INT) AS IdentitySeed
            ,CAST(ISNULL(ic.increment_value,0) AS INT) AS IdentityIncrement
            ,CASE WHEN c.collation_name IS NOT NULL THEN 1 ELSE 0 END AS IsCharColumn 
            ,cc.definition 
            from (select schema_id,object_id,name from sys.views union all select schema_id,object_id,name from sys.tables)t
                --sys.tables t
            join sys.schemas s on t.schema_id=s.schema_id
            JOIN sys.columns c ON  t.object_id=c.object_id --AND s.schema_id=c.schema_id
            LEFT JOIN sys.identity_columns ic ON t.object_id=ic.object_id AND c.column_id=ic.column_id
            left JOIN sys.types st ON st.system_type_id=c.system_type_id and st.principal_id=t.object_id--COALESCE(c.DOMAIN_NAME,c.DATA_TYPE) = st.name
            LEFT OUTER JOIN sys.objects dobj ON dobj.object_id = c.default_object_id AND dobj.type = ''D''
            left join sys.computed_columns cc on t.object_id=cc.object_id and c.column_id=cc.column_id
            join INFORMATION_SCHEMA.COLUMNS inf on t.name=inf.TABLE_NAME
                                               and s.name=inf.TABLE_SCHEMA
                                               and c.name=inf.COLUMN_NAME
    WHERE inf.TABLE_NAME = @TableName and inf.TABLE_SCHEMA=@schema 
    ORDER BY inf.ORDINAL_POSITION
    '

  print @sql
  INSERT INTO @ShowFields( DatabaseName
                                    ,TableOwner
                                    ,TableName
                                    ,FieldName
                                    ,ColumnPosition
                                    ,ColumnDefaultValue
                                    ,ColumnDefaultName
                                    ,IsNullable
                                    ,DataType
                                    ,MaxLength
                                    ,NumericPrecision
                                    ,NumericScale
                                    ,DomainName
                                    ,FieldListingName
                                    ,FieldDefinition
                                    ,IdentityColumn
                                    ,IdentitySeed
                                    ,IdentityIncrement
                                    ,IsCharColumn
                                    ,IsComputed)

    exec sp_executesql @sql,
                       N'@TableName varchar(50),@schema varchar(50)',
                       @TableName=@TableName,@schema=@schema            
    /*
    SELECT @DBName--DB_NAME()
            ,TABLE_SCHEMA
            ,TABLE_NAME
            ,COLUMN_NAME
            ,CAST(ORDINAL_POSITION AS INT)
            ,COLUMN_DEFAULT
            ,dobj.name AS ColumnDefaultName
            ,CASE WHEN c.IS_NULLABLE = 'YES' THEN 1 ELSE 0 END
            ,DATA_TYPE
            ,CAST(CHARACTER_MAXIMUM_LENGTH AS INT)
            ,CAST(NUMERIC_PRECISION AS INT)
            ,CAST(NUMERIC_SCALE AS INT)
            ,DOMAIN_NAME
            ,COLUMN_NAME + ','
            ,'' AS FieldDefinition
            ,CASE WHEN ic.object_id IS NULL THEN 0 ELSE 1 END AS IdentityColumn
            ,CAST(ISNULL(ic.seed_value,0) AS INT) AS IdentitySeed
            ,CAST(ISNULL(ic.increment_value,0) AS INT) AS IdentityIncrement
            ,CASE WHEN st.collation_name IS NOT NULL THEN 1 ELSE 0 END AS IsCharColumn 
            FROM INFORMATION_SCHEMA.COLUMNS c
            JOIN sys.columns sc ON  c.TABLE_NAME = OBJECT_NAME(sc.object_id) AND c.COLUMN_NAME = sc.Name
            LEFT JOIN sys.identity_columns ic ON c.TABLE_NAME = OBJECT_NAME(ic.object_id) AND c.COLUMN_NAME = ic.Name
            JOIN sys.types st ON COALESCE(c.DOMAIN_NAME,c.DATA_TYPE) = st.name
            LEFT OUTER JOIN sys.objects dobj ON dobj.object_id = sc.default_object_id AND dobj.type = 'D'

    WHERE c.TABLE_NAME = @TableName
    ORDER BY c.TABLE_NAME, c.ORDINAL_POSITION
    */
    SELECT TOP 1 @TableSchema = TableOwner FROM @ShowFields

    INSERT INTO @HoldingArea (Flds) VALUES('(')

    INSERT INTO @Definition(FieldValue)VALUES('CREATE TABLE ' + CASE WHEN @NewTableName IS NOT NULL THEN @DBName + '.' + @NewTableSchema + '.' + @NewTableName ELSE @DBName + '.' + @TableSchema + '.' + @TableName END)
    INSERT INTO @Definition(FieldValue)VALUES('(')
    INSERT INTO @Definition(FieldValue)
    SELECT   CHAR(10) + FieldName + ' ' + 
        --CASE WHEN DomainName IS NOT NULL AND @UseSystemDataTypes = 0 THEN DomainName + CASE WHEN IsNullable = 1 THEN ' NULL ' ELSE ' NOT NULL ' END ELSE UPPER(DataType) +CASE WHEN IsCharColumn = 1 THEN '(' + CAST(MaxLength AS VARCHAR(10)) + ')' ELSE '' END +CASE WHEN IdentityColumn = 1 THEN ' IDENTITY(' + CAST(IdentitySeed AS VARCHAR(5))+ ',' + CAST(IdentityIncrement AS VARCHAR(5)) + ')' ELSE '' END +CASE WHEN IsNullable = 1 THEN ' NULL ' ELSE ' NOT NULL ' END +CASE WHEN ColumnDefaultName IS NOT NULL AND @IncludeConstraints = 1 THEN 'CONSTRAINT [' + ColumnDefaultName + '] DEFAULT' + UPPER(ColumnDefaultValue) ELSE '' END END + CASE WHEN FieldID = (SELECT MAX(FieldID) FROM @ShowFields) THEN '' ELSE ',' END 

        CASE WHEN DomainName IS NOT NULL AND @UseSystemDataTypes = 0 THEN DomainName + 
            CASe WHEN IsNullable = 1 THEN ' NULL ' 
            ELSE ' NOT NULL ' 
            END 
        ELSE 
            case when IsComputed is null then
                UPPER(DataType) +
                CASE WHEN IsCharColumn = 1 THEN '(' + CAST(MaxLength AS VARCHAR(10)) + ')' 
                ELSE 
                    CASE WHEN DataType = 'numeric' THEN '(' + CAST(NumericPrecision AS VARCHAR(10))+','+ CAST(NumericScale AS VARCHAR(10)) + ')' 
                    ELSE
                        CASE WHEN DataType = 'decimal' THEN '(' + CAST(NumericPrecision AS VARCHAR(10))+','+ CAST(NumericScale AS VARCHAR(10)) + ')' 
                        ELSE '' 
                        end  
                    end 
                END +
                CASE WHEN IdentityColumn = 1 THEN ' IDENTITY(' + CAST(IdentitySeed AS VARCHAR(5))+ ',' + CAST(IdentityIncrement AS VARCHAR(5)) + ')' 
                ELSE '' 
                END +
                CASE WHEN IsNullable = 1 THEN ' NULL ' 
                ELSE ' NOT NULL ' 
                END +
                CASE WHEN ColumnDefaultName IS NOT NULL AND @IncludeConstraints = 1 THEN 'CONSTRAINT [' + replace(ColumnDefaultName,@TableName,@NewTableName) + '] DEFAULT' + UPPER(ColumnDefaultValue) 
                ELSE '' 
                END 
            else
                ' as '+IsComputed+' '
            end
        END + 
        CASE WHEN FieldID = (SELECT MAX(FieldID) FROM @ShowFields) THEN '' 
        ELSE ',' 
        END 

    FROM    @ShowFields

    IF @IncludeConstraints = 1
        BEGIN    

        set @sql=
        '
        use '+@DBName+'
        SELECT  distinct  '',CONSTRAINT ['' + @NewTableName+''_''+replace(name,@TableName,'''') + ''] FOREIGN KEY ('' + ParentColumns + '') REFERENCES ['' + ReferencedObject + '']('' + ReferencedColumns + '')'' 
           FROM ( SELECT   ReferencedObject = OBJECT_NAME(fk.referenced_object_id), ParentObject = OBJECT_NAME(parent_object_id),fk.name
                ,   REVERSE(SUBSTRING(REVERSE((   SELECT cp.name + '',''   
                FROM   sys.foreign_key_columns fkc   
                JOIN sys.columns cp ON fkc.parent_object_id = cp.object_id AND fkc.parent_column_id = cp.column_id   
                WHERE fkc.constraint_object_id = fk.object_id   FOR XML PATH('''')   )), 2, 8000)) ParentColumns,   
                REVERSE(SUBSTRING(REVERSE((   SELECT cr.name + '',''   
                FROM   sys.foreign_key_columns fkc  
                JOIN sys.columns cr ON fkc.referenced_object_id = cr.object_id AND fkc.referenced_column_id = cr.column_id
                WHERE fkc.constraint_object_id = fk.object_id   FOR XML PATH('''')   )), 2, 8000)) ReferencedColumns   
                FROM sys.foreign_keys fk    
                    inner join sys.schemas s on fk.schema_id=s.schema_id and s.name=@schema) a    
            WHERE ParentObject = @TableName    
        '

        print @sql

        INSERT INTO @Definition(FieldValue)
        exec sp_executesql @sql,
                   N'@TableName varchar(50),@NewTableName varchar(50),@schema varchar(50)',
                       @TableName=@TableName,@NewTableName=@NewTableName,@schema=@schema
            /*
           SELECT    ',CONSTRAINT [' + name + '] FOREIGN KEY (' + ParentColumns + ') REFERENCES [' + ReferencedObject + '](' + ReferencedColumns + ')'  
           FROM ( SELECT   ReferencedObject = OBJECT_NAME(fk.referenced_object_id), ParentObject = OBJECT_NAME(parent_object_id),fk.name
                ,   REVERSE(SUBSTRING(REVERSE((   SELECT cp.name + ','   
                FROM   sys.foreign_key_columns fkc   
                JOIN sys.columns cp ON fkc.parent_object_id = cp.object_id AND fkc.parent_column_id = cp.column_id   
                WHERE fkc.constraint_object_id = fk.object_id   FOR XML PATH('')   )), 2, 8000)) ParentColumns,   
                REVERSE(SUBSTRING(REVERSE((   SELECT cr.name + ','   
                FROM   sys.foreign_key_columns fkc  
                JOIN sys.columns cr ON fkc.referenced_object_id = cr.object_id AND fkc.referenced_column_id = cr.column_id
                WHERE fkc.constraint_object_id = fk.object_id   FOR XML PATH('')   )), 2, 8000)) ReferencedColumns   
                FROM sys.foreign_keys fk    ) a    
            WHERE ParentObject = @TableName    
            */

            set @sql=
            '
            use '+@DBName+'
            SELECT distinct '',CONSTRAINT ['' + @NewTableName+''_''+replace(c.name,@TableName,'''') + ''] CHECK '' + definition 
            FROM sys.check_constraints c join sys.schemas s on c.schema_id=s.schema_id and s.name=@schema    
            WHERE OBJECT_NAME(parent_object_id) = @TableName
            '

            print @sql
            INSERT INTO @Definition(FieldValue) 
            exec sp_executesql @sql,
                               N'@TableName varchar(50),@NewTableName varchar(50),@schema varchar(50)',
                       @TableName=@TableName,@NewTableName=@NewTableName,@schema=@schema
            /*
            SELECT ',CONSTRAINT [' + name + '] CHECK ' + definition FROM sys.check_constraints    
            WHERE OBJECT_NAME(parent_object_id) = @TableName
            */

            set @sql=
            '
            use '+@DBName+'
            SELECT DISTINCT  PKObject = cco.object_id 
            FROM    sys.key_constraints cco    
            JOIN sys.index_columns cc ON cco.parent_object_id = cc.object_id AND cco.unique_index_id = cc.index_id    
            JOIN sys.indexes i ON cc.object_id = i.object_id AND cc.index_id = i.index_id
            join sys.schemas s on cco.schema_id=s.schema_id and s.name=@schema
            WHERE    OBJECT_NAME(parent_object_id) = @TableName    AND  i.type = 1 AND    is_primary_key = 1
            '
            print @sql
            INSERT INTO @PKObjectID(ObjectID) 
            exec sp_executesql @sql,
                               N'@TableName varchar(50),@schema varchar(50)',
                               @TableName=@TableName,@schema=@schema
            /*
            SELECT DISTINCT  PKObject = cco.object_id 
            FROM    sys.key_constraints cco    
            JOIN sys.index_columns cc ON cco.parent_object_id = cc.object_id AND cco.unique_index_id = cc.index_id    
            JOIN sys.indexes i ON cc.object_id = i.object_id AND cc.index_id = i.index_id
            WHERE    OBJECT_NAME(parent_object_id) = @TableName    AND  i.type = 1 AND    is_primary_key = 1
            */

            set @sql=
            '
            use '+@DBName+'
            SELECT DISTINCT    PKObject = cco.object_id
            FROM    sys.key_constraints cco   
            JOIN sys.index_columns cc ON cco.parent_object_id = cc.object_id AND cco.unique_index_id = cc.index_id  
            JOIN sys.indexes i ON cc.object_id = i.object_id AND cc.index_id = i.index_id
            join sys.schemas s on cco.schema_id=s.schema_id and s.name=@schema
            WHERE    OBJECT_NAME(parent_object_id) = @TableName AND  i.type = 2 AND    is_primary_key = 0 AND    is_unique_constraint = 1
            '
            print @sql
            INSERT INTO @Uniques(ObjectID)
            exec sp_executesql @sql,
                               N'@TableName varchar(50),@schema varchar(50)',
                               @TableName=@TableName,@schema=@schema
            /*
            SELECT DISTINCT    PKObject = cco.object_id
            FROM    sys.key_constraints cco   
            JOIN sys.index_columns cc ON cco.parent_object_id = cc.object_id AND cco.unique_index_id = cc.index_id  
            JOIN sys.indexes i ON cc.object_id = i.object_id AND cc.index_id = i.index_id
            WHERE    OBJECT_NAME(parent_object_id) = @TableName AND  i.type = 2 AND    is_primary_key = 0 AND    is_unique_constraint = 1
            */

            SET @ClusteredPK = CASE WHEN @@ROWCOUNT > 0 THEN 1 ELSE 0 END

            declare @t TableType
            insert @t select * from @PKObjectID
            declare @u TableType
            insert @u select * from @Uniques

            set @sql=
            '
            use '+@DBName+'
            SELECT distinct '',CONSTRAINT '' + @NewTableName+''_''+replace(cco.name,@TableName,'''') + CASE type WHEN ''PK'' THEN '' PRIMARY KEY '' + CASE WHEN pk.ObjectID IS NULL THEN '' NONCLUSTERED '' ELSE '' CLUSTERED '' END  WHEN ''UQ'' THEN '' UNIQUE '' END + CASE WHEN u.ObjectID IS NOT NULL THEN '' NONCLUSTERED '' ELSE '''' END 
            + ''(''+REVERSE(SUBSTRING(REVERSE(( SELECT   c.name +  + CASE WHEN cc.is_descending_key = 1 THEN '' DESC'' ELSE '' ASC'' END + '',''    
            FROM   sys.key_constraints ccok   
            LEFT JOIN sys.index_columns cc ON ccok.parent_object_id = cc.object_id AND cco.unique_index_id = cc.index_id
            LEFT JOIN sys.columns c ON cc.object_id = c.object_id AND cc.column_id = c.column_id 
            LEFT JOIN sys.indexes i ON cc.object_id = i.object_id AND cc.index_id = i.index_id  
            WHERE i.object_id = ccok.parent_object_id AND   ccok.object_id = cco.object_id    
            order by key_ordinal FOR XML PATH(''''))), 2, 8000)) + '')''
            FROM sys.key_constraints cco 
            inner join sys.schemas s on cco.schema_id=s.schema_id and s.name=@schema
            LEFT JOIN @U u ON cco.object_id = u.objectID
            LEFT JOIN @t pk ON cco.object_id = pk.ObjectID    
            WHERE    OBJECT_NAME(cco.parent_object_id) = @TableName 

            '

            print @sql
            INSERT INTO @Definition(FieldValue)
            exec sp_executesql @sql,
                               N'@TableName varchar(50),@NewTableName varchar(50),@schema varchar(50),@t TableType readonly,@u TableType readonly',
                               @TableName=@TableName,@NewTableName=@NewTableName,@schema=@schema,@t=@t,@u=@u

            /*
            SELECT ',CONSTRAINT ' + name + CASE type WHEN 'PK' THEN ' PRIMARY KEY ' + CASE WHEN pk.ObjectID IS NULL THEN ' NONCLUSTERED ' ELSE ' CLUSTERED ' END  WHEN 'UQ' THEN ' UNIQUE ' END + CASE WHEN u.ObjectID IS NOT NULL THEN ' NONCLUSTERED ' ELSE '' END 
            + '(' +REVERSE(SUBSTRING(REVERSE(( SELECT   c.name +  + CASE WHEN cc.is_descending_key = 1 THEN ' DESC' ELSE ' ASC' END + ','    
            FROM   sys.key_constraints ccok   
            LEFT JOIN sys.index_columns cc ON ccok.parent_object_id = cc.object_id AND cco.unique_index_id = cc.index_id
           LEFT JOIN sys.columns c ON cc.object_id = c.object_id AND cc.column_id = c.column_id 
           LEFT JOIN sys.indexes i ON cc.object_id = i.object_id AND cc.index_id = i.index_id  
           WHERE i.object_id = ccok.parent_object_id AND   ccok.object_id = cco.object_id    FOR XML PATH(''))), 2, 8000)) + ')'
           FROM sys.key_constraints cco 
           LEFT JOIN @PKObjectID pk ON cco.object_id = pk.ObjectID    
           LEFT JOIN @Uniques u ON cco.object_id = u.objectID
           WHERE    OBJECT_NAME(cco.parent_object_id) = @TableName 
           */
        END

        INSERT INTO @Definition(FieldValue) VALUES(')')

        set @sql=
        '
        use '+@DBName+'
        select '' on '' + d.name + ''([''+c.name+''])''
        from sys.tables t join sys.indexes i on(i.object_id = t.object_id and i.index_id < 2)
                          join sys.index_columns ic on(ic.partition_ordinal > 0 and ic.index_id = i.index_id and ic.object_id = t.object_id)
                          join sys.columns c on(c.object_id = ic.object_id and c.column_id = ic.column_id)
                          join sys.schemas s on t.schema_id=s.schema_id
                          join sys.data_spaces d on i.data_space_id=d.data_space_id
        where t.name=@TableName and s.name=@schema
        order by key_ordinal
        '

        print 'x'
        print @sql
        INSERT INTO @Definition(FieldValue) 
        exec sp_executesql @sql,
                           N'@TableName varchar(50),@schema varchar(50)',
                           @TableName=@TableName,@schema=@schema

        IF @IncludeIndexes = 1
        BEGIN
            set @sql=
            '
            use '+@DBName+'
            SELECT distinct '' CREATE '' + i.type_desc + '' INDEX ['' + replace(i.name COLLATE SQL_Latin1_General_CP1_CI_AS,@TableName,@NewTableName) + ''] ON '+@DBName+'.'+@NewTableSchema+'.'+@NewTableName+' ('' 
            +   REVERSE(SUBSTRING(REVERSE((   SELECT name + CASE WHEN sc.is_descending_key = 1 THEN '' DESC'' ELSE '' ASC'' END + '',''   
            FROM  sys.index_columns sc  
            JOIN sys.columns c ON sc.object_id = c.object_id AND sc.column_id = c.column_id   
            WHERE  t.name=@TableName AND  sc.object_id = i.object_id AND  sc.index_id = i.index_id   
                                         and is_included_column=0
            ORDER BY key_ordinal ASC   FOR XML PATH('''')    )), 2, 8000)) + '')''+
            ISNULL( '' include (''+REVERSE(SUBSTRING(REVERSE((   SELECT name + '',''   
            FROM  sys.index_columns sc  
            JOIN sys.columns c ON sc.object_id = c.object_id AND sc.column_id = c.column_id   
            WHERE  t.name=@TableName AND  sc.object_id = i.object_id AND  sc.index_id = i.index_id   
                                         and is_included_column=1
            ORDER BY key_ordinal ASC   FOR XML PATH('''')    )), 2, 8000))+'')'' ,'''')+''''    
            FROM sys.indexes i join sys.tables t on i.object_id=t.object_id
                               join sys.schemas s on t.schema_id=s.schema_id   
            AND CASE WHEN @ClusteredPK = 1 AND is_primary_key = 1 AND i.type = 1 THEN 0 ELSE 1 END = 1   AND is_unique_constraint = 0   AND is_primary_key = 0 
                where t.name=@TableName and s.name=@schema
            '

            print @sql
            INSERT INTO @Definition(FieldValue)    
            exec sp_executesql @sql,
                               N'@TableName varchar(50),@NewTableName varchar(50),@schema varchar(50), @ClusteredPK bit',
                               @TableName=@TableName,@NewTableName=@NewTableName,@schema=@schema,@ClusteredPK=@ClusteredPK

        END 

            /*

                SELECT   'CREATE ' + type_desc + ' INDEX [' + [name] COLLATE SQL_Latin1_General_CP1_CI_AS + '] ON [' +  OBJECT_NAME(object_id) + '] (' +   REVERSE(SUBSTRING(REVERSE((   SELECT name + CASE WHEN sc.is_descending_key = 1 THEN ' DESC' ELSE ' ASC' END + ','   
                FROM  sys.index_columns sc  
                JOIN sys.columns c ON sc.object_id = c.object_id AND sc.column_id = c.column_id   
                WHERE  OBJECT_NAME(sc.object_id) = @TableName AND  sc.object_id = i.object_id AND  sc.index_id = i.index_id   
                ORDER BY index_column_id ASC   FOR XML PATH('')    )), 2, 8000)) + ')'    
                FROM sys.indexes i    
                WHERE   OBJECT_NAME(object_id) = @TableName
                AND CASE WHEN @ClusteredPK = 1 AND is_primary_key = 1 AND type = 1 THEN 0 ELSE 1 END = 1   AND is_unique_constraint = 0   AND is_primary_key = 0 

            */

            INSERT INTO @MainDefinition(FieldValue)   
            SELECT FieldValue FROM @Definition    
            ORDER BY DefinitionID ASC 

            ----------------------------------
            --SELECT FieldValue+'' FROM @MainDefinition FOR XML PATH('')
            set @script='use '+@DBName+' '+(SELECT FieldValue+'' FROM @MainDefinition FOR XML PATH(''))

            --declare @q    varchar(max)
            --set @q=(select replace((SELECT FieldValue FROM @MainDefinition FOR XML PATH('')),'</FieldValue>',''))
            --set @script=(select REPLACE(@q,'<FieldValue>',''))
            --drop type TableType
END try
-- ##############################################################################################################################################################################
BEGIN CATCH        
    BEGIN
        -- INIZIO  Procedura in errore =========================================================================================================================================================
            PRINT '***********************************************************************************************************************************************************' 
            PRINT 'ErrorNumber               : ' + CAST(ERROR_NUMBER() AS NVARCHAR(MAX))
            PRINT 'ErrorSeverity             : ' + CAST(ERROR_SEVERITY() AS NVARCHAR(MAX)) 
            PRINT 'ErrorState                : ' + CAST(ERROR_STATE() AS NVARCHAR(MAX)) 
            PRINT 'ErrorLine                 : ' + CAST(ERROR_LINE() AS NVARCHAR(MAX)) 
            PRINT 'ErrorMessage              : ' + CAST(ERROR_MESSAGE() AS NVARCHAR(MAX))
            PRINT '***********************************************************************************************************************************************************' 
        -- FINE  Procedura in errore =========================================================================================================================================================
    END 
        set @script=''
    return -1
END CATCH   
-- ############################################################################################################################################################################## 
```

执行它：

```
declare @s varchar(max)
exec [util_ScriptTable]   'db','schema_source','table_source',1,1,'schema_dest','tab_dest',0,@s output
select @s 
```

# asp.net - URL 路由到同名页面

> ID：12036462
> 
> 赞同：0
> 
> 时间：2012-08-20T11:00:38.020
> 
> 标签：asp.net, .net, vb.net, routing

我有一个当前存在的站点，使用 ISAPI 重写和 IIRF 文件启用了 URL 重写，问题是它导致了很多问题，无论是对于站点开发/维护，还是由于服务器上的持续错误。

因此，我希望将其替换为 .Net 4.0 的 URL 路由。

我有两个问题，首先，设置了当前的路由规则，以便路由到的页面只是重新编写的 URL，并在末尾附加了文件扩展名。

所以`www.site.com/page/`会变成`www.site.com/page.aspx`

第二个问题是某些重写的 URL 实际上使用与上述相同的逻辑指向网站上子文件夹中的物理文件。

所以`www.site.com/folder/page/`会重定向到`www.site.com/folder/page.aspx`

我已经阅读了[这篇文章](http://www.4guysfromrolla.com/articles/012710-1.aspx)并创建了自定义的 IRouteHandler 和 IHttpHander 实现的类，但我不确定从这里去哪里。

我尝试了一些不同的方法，主要与 URL 中的变量相关并尝试重定向到它们，但我不确定这是否适合我。

我没有发布代码，因为我目前所拥有的几乎就是上面链接中的示例代码。

我在另一个站点上实现了基本路由，其中​​单个页面使用 URL 中的变量从数据库中获取相关内容，这看起来很简单，但这让我头晕目眩，我相信它应该没这么复杂。

# wpf - PRISM + WPF - 如何使区域出现动画？

> ID：12036471
> 
> 赞同：0
> 
> 时间：2012-08-20T11:01:16.763
> 
> 标签：wpf, animation, prism

我有一个使用 PRISM 架构 (MVVM) 编写的 WPF 应用程序。

我在“主窗口”区域的顶部有一个“过滤器”**按钮和一个包含行的****ListView**，如下所示：

![前](../Images/6e6516efc72d19f50cb5e94130c98170.png)

我希望当按下“过滤器”按钮时，用户控件将在“过滤器”按钮下“滑动”（使用动画）并显示自身，推动**ListView**并缩小它......

当用户控件完成出现时，它应该如下所示：

![后](../Images/b9d772a222e6fd4a7e80276b5dee5158.png)

出现的控件将有一个“隐藏”按钮，该按钮将触发动画并将其缩小回顶部，直到它消失......

我怎样才能在 PRISM 中做到这一点？我必须为出现的用户控件选择一个区域吗？

我如何告诉该地区使用动画“展示”自己？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:00:59.313

您可能想查看[WPF Toolkit](http://wpf.codeplex.com/)`TransitioningContentControl`中的哪个。如果这不是您所需要的，那么，我想，您必须自己制作，您可以在其中覆盖方法，例如or并将自定义动画应用于内容。获得控制权后，在其上设置一个区域，就像简单`ContentControl``OnContentChanged``OnApplyTemplate``ContentControl`

```
<toolkit:TransitioningContentControl Regions:RegionManager.RegionName="AnimatedControlRegion" /> 
```

注册该区域的视图

```
regionManager.RegisterViewWithRegion("AnimatedControlRegion", () => container.Resolve<MyView>()); 
```

并导航到它

```
regionManager.RequestNavigate("AnimatedControlRegion", new Uri("MyView", UriKind.Relative)); 
```

或激活它

```
var view = container.Resolve<MyView>();
var region = regionManager.Regions["AnimatedControlRegion"];
region.Activate(view); 
```

# css - 标签显示在复选框下方

> ID：12036473
> 
> 赞同：5
> 
> 时间：2012-08-20T11:01:18.963
> 
> 标签：css, ruby-on-rails, view-helpers

```
<%= f.check_box :openid_enabled %>
<%= f.label :openid_enabled, 'OpenID' %> 
```

上面的代码生成这个 HTML

```
<input type="hidden" value="0" name="application[openid_enabled]">
<input type="checkbox" value="1" name="application[openid_enabled]" id="application_openid_enabled">
<label for="application_openid_enabled">OpenID</label> 
```

并且标签显示为

```
[x]
OpenID 
```

代替

```
[x] OpenID 
```

我是否需要对其进行样式设置或 rails helpers 有一些内置功能？

**添加**

我在我的 Rails 应用程序中使用[twitter bootstrap](http://twitter.github.com/bootstrap/) CSS 框架。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T11:08:00.520

这一定会发生，因为要么 要么`input`设置`label`为`display: block;`您可以通过使这些元素在一行中显示它`inline`-

```
input, label{ display: inline; } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T11:41:58.663

我使用以下方法解决了这个问题，而没有覆盖 twitter bootstrap css 的风格。

```
<%= f.label :openid_enabled, class: 'checkbox' do %>
  <%= f.check_box :openid_enabled %>
  OpenID
<% end %> 
```

生成以下HTML

```
<label for="application_openid_enabled" class="checkbox">
  <input type="hidden" value="0" name="application[openid_enabled]">
  <input type="checkbox" value="1" name="application[openid_enabled]" id="application_openid_enabled">
  OpenID
</label> 
```

这是参考[http://twitter.github.com/bootstrap/base-css.html](http://twitter.github.com/bootstrap/base-css.html)

感谢@MyHeadHurts 和@Dipaks 的宝贵意见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-04T16:44:13.880

我知道它很旧，但今天最好的方法是使用标签上的[checkbox-inline 类。](https://www.w3schools.com/bootstrap/tryit.asp?filename=trybs_form_checkbox_inline)

# java - 在java中使用iText创建pdf

> ID：12036474
> 
> 赞同：0
> 
> 时间：2012-08-20T11:01:18.500
> 
> 标签：java, swing, itext

我下载了 iTextpdf-5.1.0 并将其添加到我的项目库中。

```
 import com.itextpdf.text.Document;
    import com.itextpdf.text.DocumentException;
    import com.itextpdf.text.Paragraph;
    import com.itextpdf.text.pdf.PdfWriter;

    /**
    * First iText example: Hello World.
     */
   public class Testcase {

    /** Path to the resulting PDF file. */
      public static final String RESULT= "E:/hello.pdf";

     /**
      * Creates a PDF file: hello.pdf
      * @param    args    no arguments needed
      */
      public static void main(String[] args)
       throws DocumentException, IOException {
        new Testcase().createPdf(RESULT);
       }

     /**
     * Creates a PDF document.
      * @throws    DocumentException 
     * @throws    IOException 
     */
    public void createPdf(String filename)
    throws DocumentException, IOException {
    // step 1
    Document document = new Document();
    // step 2
    PdfWriter.getInstance(document, new FileOutputStream(filename));
    // step 3:gives error as no suitable method
    document.open();
    // step 4
    document.add(new Paragraph("Hello World!"));
    // step 5
    document.close();
    }
   } 
```

在第 3 步：它给了我以下错误：`no suitable method found for getInstance()`. 为什么会出现这个错误？谁能告诉我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-19T12:55:12.633

我使用 iText - 7.1.3 进行了尝试。它对我有用。

```
 public static void main(String[] args) {

    try {           

        PdfWriter writer = new PdfWriter(new FileOutputStream("/home/users/Documents/pdf/hello_world.pdf"));
        PdfDocument pdfDoc = new PdfDocument(writer);
        Document doc = new Document(pdfDoc);
        doc.add(new Paragraph("Hello World"));                      
        pdfDoc.addNewPage();            
        doc.close();

        } catch(SvgProcessingException e ){
              e.printStackTrace();
          }
          catch (Exception e) {         
             e.printStackTrace();
          }
    } 
```

> 这里添加了我使用的jar文件。我想这可能会对你有所帮助。

```
 <dependency>
        <groupId>com.itextpdf</groupId>
        <artifactId>kernel</artifactId>
        <version>7.1.3</version>
      </dependency>

    <!-- https://mvnrepository.com/artifact/com.itextpdf/layout -->
    <dependency>
        <groupId>com.itextpdf</groupId>
        <artifactId>layout</artifactId>
        <version>7.1.3</version>
    </dependency>

    <dependency>
        <groupId>com.itextpdf</groupId>
        <artifactId>font-asian</artifactId>
        <version>7.1.3</version>
    </dependency>

    <dependency>
        <groupId>com.itextpdf</groupId>
        <artifactId>io</artifactId>
        <version>7.1.3</version>
    </dependency>

    <dependency>
        <groupId>com.itextpdf</groupId>
        <artifactId>forms</artifactId>
        <version>7.1.3</version>
    </dependency>

    <dependency>
        <groupId>com.itextpdf</groupId>
        <artifactId>pdfa</artifactId>
        <version>7.1.3</version>
    </dependency>

    <dependency>
        <groupId>com.itextpdf</groupId>
        <artifactId>sign</artifactId>
        <version>7.1.3</version>
    </dependency>

    <dependency>
        <groupId>com.itextpdf</groupId>
        <artifactId>barcodes</artifactId>
        <version>7.1.3</version>
    </dependency>

    <dependency>
        <groupId>com.itextpdf</groupId>
        <artifactId>hyph</artifactId>
        <version>7.1.3</version>
    </dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:57:41.937

这对我有用：

```
public static void createPdf() throws DocumentException, IOException {

    File f = File.createTempFile("test", ".pdf");

    // step 1
    Document document = new Document();
    // step 2
    PdfWriter.getInstance(document, new FileOutputStream(f));
    // step 3:gives error as no suitable method
    document.open();
    // step 4
    document.add(new Paragraph("Hello World!"));
    // step 5
    document.close();
} 
```

所以我认为问题出在你的文件名上，因为这是我唯一改变的部分。尝试使用*E:\hello.pdf*（带反斜杠）并确保 JVM 在该位置具有写访问权限。

如果这不能解决您的问题，请提供完整的堆栈跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T03:24:54.053

你的代码对我有用。我要做的唯一更改是**输出文件名**， 即 `public static final String RESULT = "C:\\hello.pdf";`输出文件名需要转义字符 "\" 。

我用**itextpdf-5.3.2.jar**进行了测试。

尝试这个。

```
import java.io.FileOutputStream;
import java.io.IOException;

import com.itextpdf.text.Document;
import com.itextpdf.text.DocumentException;
import com.itextpdf.text.Paragraph;
import com.itextpdf.text.pdf.PdfWriter;

/**
 * First iText example: Hello World.
 */
public class CreatePdf2 {

    /** Path to the resulting PDF file. */
    public static final String RESULT = "C:\\hello.pdf";

    /**
     * Creates a PDF file: hello.pdf
     * 
     * @param args
     *            no arguments needed
     */
    public static void main(String[] args) throws DocumentException,
            IOException {
        new CreatePdf2().createPdf(RESULT);
    }

    /**
     * Creates a PDF document.
     * 
     * @throws DocumentException
     * @throws IOException
     */
    public void createPdf(String filename) throws DocumentException,
            IOException {
        // step 1
        Document document = new Document();
        // step 2
        PdfWriter.getInstance(document, new FileOutputStream(filename));
        // step 3:gives error as no suitable method
        document.open();
        // step 4
        document.add(new Paragraph("Hello World!"));
        // step 5
        document.close();
    }
} 
```

# .net - 调用soap方法时的HTTP超时

> ID：12036476
> 
> 赞同：0
> 
> 时间：2012-08-20T11:01:21.543
> 
> 标签：.net, web-services, soap, httprequest, soapfault

我有一个 .net 网络服务，一周前从某些国家/地区开始无法访问它，奇怪的问题是该国家/地区的客户可以成功向我的网站发送 http 调用，有什么问题吗？

# ios - 自定义UIViewController IOS4.3

> ID：12036477
> 
> 赞同：0
> 
> 时间：2012-08-20T11:01:26.537
> 
> 标签：ios, uiviewcontroller, modalviewcontroller, ios4, presentmodalviewcontroller

我有静态库和我的自定义视图控制器（fe mainVC）。我的静态库将在一些第三方应用程序中构建。

在第三个应用程序启动后，我必须立即显示 mainVC.view。我愿意：

```
[window addSubView:mainVC.view]; 
```

但我怎样才能让我的 mainVC 处于活动状态？这意味着我必须在

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

在这种情况下，此方法永远不会调用。

我也试过手动打电话

```
[self.mainVC viewWillAppear:NO]; 
```

但仍然不成功。

也许我应该使用

```
-(void)presentModalViewController:animated 
```

但它已被弃用。而且我必须支持IOS 4.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:11:08.057

您可能想在调用该方法之前检查是否允许该类响应该方法。

```
if([self respondsToSelector:@selector(presentViewController:animated:completion:)]) 
{
    [self presentViewController:viewController animated:YES];
}
else
{
    //some other methods
} 
```

这样，您可以使用已弃用的方法来支持 IOS 4.3，并为更高的 IOS 版本使用另一种解决方案

# c++ - 当多个指针指向一个对象时删除它？

> ID：12036478
> 
> 赞同：7
> 
> 时间：2012-08-20T11:01:28.680
> 
> 标签：c++, pointers, memory-management

有人告诉我，如果我有多个指向同一个对象的指针，我不能正常删除它（使用 delete 关键字）。相反，有人告诉我需要将指针设置为 NULL 或 0。

鉴于我有：

```
ClassA* object = new ClassA();
ClassA* pointer1 = object;
ClassA* pointer2 = object; 
```

那么到`delete` `pointer1`and `pointer2`，我需要做以下事情吗？

```
pointer1 = 0;
pointer2 = 0: 
```

一旦我将它设置为 NULL，我还需要使用关键字`delete`吗？还是只是将其设置为 0 就足够了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T11:04:45.513

每当你`new`成为一个对象时，你就需要`delete`它，释放内存

```
ClassA* object = new ClassA();

delete object; // Free's the memory you allocated. 
```

设置指针的目的`NULL`是停止**取消引用****无效**的指针

 **```
object = NULL; 
```

这样做是为了在尝试取消引用之前可以执行测试：

```
if(object != NULL)
{
  object->SomeMethod(); // We can assume it's safe to use the pointer.
} 
```

**另请注意，您可以从指向它的****任何指针**中删除内存。

```
ClassA* object = new ClassA();
ClassA* pointer1 = object;
ClassA* pointer2 = object;

delete pointer1; 
```

`object, pointer1, and pointer2`现在**都**指向已经释放的内存，除非它们被重新定义，否则它们都应该设置为**NULL**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T11:04:52.493

规则是你**必须**调用`delete`你调用的次数`new`。
所以如果你只分配一次内存，你也只需要释放一次。

您最好使用`shared_ptr`避免这种手动内存管理，其中智能指针本身将在没有指针指向它时释放内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T11:05:11.323

您只需确保在删除对象后不再使用该对象。你是否有指向它的指针并不重要，但你需要知道这些指针现在是无效的。将它们设置为 nullptr 只是在使用它们时确保崩溃的一种方法；使用无效指针可能会也可能不会导致崩溃，但最终会导致难以追踪的晦涩问题。

但是，如果您在删除对象时拥有指向该对象的“活动”指针，则可能表明您的代码存在问题。通常，当不再需要一个对象时，它会被删除，这意味着应该没有指针或其他对它的引用。当然，这不是硬性规定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T11:03:35.170

没有。您需要删除它并在此之后设置为 0，或使用智能指针

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T11:04:22.783

你必须使用`delete`其他方式你有[内存泄漏](http://en.wikipedia.org/wiki/Memory_leak)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T11:05:29.943

它不是你不能`delete`。但你不应该。因为删除一个已经删除的对象会使你的程序崩溃。你会看到`glibc detected double free`。所以最好的做法是

```
if(object){
   delete object;
   object = 0;
} 
```

如果您没有将其设置为`0`or`NULL`并且 gaurd it win an`if`您可以将其双重删除。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-20T22:27:01.657

代码用 new 创建对象；它应该用删除来销毁对象。一次。有其他指向该对象的指针这一事实并不重要，代码是否将这些指针设置为 0 也不重要。（除非您正在使用垃圾收集器运行，但您没有这样做）。将这些指针设置为 0 的唯一好处是，如果您的程序使用 0 作为表示没有对象的标志。这是一个设计决定，从这里提供的信息中无法回答它是否合适。**

# iphone - 如何在 iPhone 的表格视图中获取搜索数据的索引值

> ID：12036479
> 
> 赞同：0
> 
> 时间：2012-08-20T11:01:34.483
> 
> 标签：iphone, objective-c, ios, tableview, searchbar

我正在使用带有搜索栏的 tableview 控制器。我想获取与表中任何字符串的搜索结果相关的数组元素的所有索引位置。

例如：如果我有一个包含以下内容的数组：@"sau",@"jain",@"abc",@"sau",@"zyx" 我搜索 'sau' 然后我希望它输出索引0 和 3。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:07:01.653

试试下面的代码：

```
NSArray *array = @[ @"sau", @"jain", @"abc", @"sau", @"zyx" ];

NSString *searchString = @"sau";
NSIndexSet *result = [array indexesOfObjectsPassingTest:^BOOL(NSString *string, NSUInteger idx, BOOL *stop) {
    NSRange searchStringRange = [string rangeOfString:searchString options:NSCaseInsensitiveSearch];
    return searchStringRange.length > 0;
}];
NSLog(@"Result indexes: %@", result); 
```

控制台输出是`Result indexes: <NSIndexSet: 0x8a80c50>[number of indexes: 2 (in 2 ranges), indexes: (0 3)]`

调整块内的代码以匹配您的搜索逻辑

**编辑**

或者逐个处理对象

```
NSArray *array = @[ @"sau", @"jain", @"abc", @"sau", @"zyx" ];

NSString *searchString = @"sau";
[array enumerateObjectsUsingBlock:^(NSString *obj, NSUInteger idx, BOOL *stop) {
    BOOL searchCondition = [obj isEqualToString:searchString];
    if (!searchCondition) return;

    // You logic to process objects passing the search condition
}]; 
```

# java - 为什么 java 语句评估会像这样发生？

> ID：12036481
> 
> 赞同：2
> 
> 时间：2012-08-20T11:01:40.273
> 
> 标签：java, post-increment, pre-increment

```
int z = 1;
System.out.println(z++ == ++z);
System.out.println(++z == z++); 
```

输出将是：

```
false
true 
```

我不明白为什么，请向我解释一下。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T11:08:20.957

[的操作数`==`从左到右进行评估](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.21-120)，并且`++`具有更高的优先级，因此您的代码等效于：

```
int z = 1;
int tmp1 = z++; //tmp1 = 1 / z = 2
int tmp2 = ++z; //tmp2 = 3 / z = 3
System.out.println(tmp1 == tmp2);

tmp1 = ++z; //tmp1 = 4 / z = 4
tmp2 = z++; //tmp2 = 4 / z = 5
System.out.println(tmp1 == tmp2); 
```

`z++`我假设您了解和之间的区别`++z`：

*   `tmp1 = z++;`可以分解为：`tmp1 = z; z = z + 1;`
*   而`tmp2 = ++z;`可以分解为：`z = z + 1; tmp2 = z;`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T11:04:57.557

```
int z = 1;
    System.out.println(z++ == ++z);
    System.out.println(++z == z++); 
```

z++ 是后增量，++z 是前增量。后增量在计算表达式后增加值，而前增量在计算表达式之前增加值。

因此，

```
int z = 1;
    System.out.println(z++ == ++z); // 1 == 3 false
    System.out.println(++z == z++);// 4 == 4 true 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T11:18:50.197

运算符`==`优先于其左侧的内容，换句话说，由于它对 2 个值进行操作，因此首先评估左侧的值。

var 的标签之前的运算符`++`表示在评估它之前将增量分配给该值，放在标签之后的相同运算符会导致后增量，这意味着变量的值在评估它之后增加 1。

关于代码的第二行：

*   操作员`==`向左看
*   运算符评估`z`为`1`
*   操作员已经完成了左侧部分，但是由于您`z++`的意思是增加了增量`z`，所以现在`z`是`2`但是由`==`操作员评估为`1`，请记住这一点。
*   操作员`==`向右看
*   由于 ，操作员无法在`z`不进行增量的情况下评估其中的内容`++z`，这意味着`z`被评估为`3`

1！= 3。

相同的概念适用于下一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T11:03:42.183

```
System.out.println(z++ == ++z); // 1 == 3 is false
System.out.println(++z == z++); // 4 == 4 is true 
```

在使用后增量值被复制到临时变量 'tmp' 中时，请在此处检查[postincrement](https://stackoverflow.com/a/12033710/1065180)。所以`z++ == ++z`=> 评估`1 == 3`哪个是假的。现在 z 为 3。

来到第二个表达式 : `++z == z++`，再次： ++z 变为 4 并且在 z++ 的情况下，值被复制到`tmp`变量中并在`z++`. 表达式变为`4 == 4`真值和最终值`z is 5`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T10:14:28.747

首先你应该清楚前增量和后增量让我们看看

```
int i=1;
int j=i++;
int k=++i; 
```

这里的值`j`will be`1`和`k`will be`3`

为什么意味着`i++`首先将值存储`i`到`j`其中，然后增加`i`so的值

```
j=1,i=2 ok :) 
```

现在在`++i`where 首先增加值然后存储到`k`so的情况下

```
k=3,i=3 ok :) 
```

现在我来回答你的问题

```
int z = 1; System.out.println(z++ == ++z); 
```

那么告诉我会是`z++`什么？1 好的 :) 因此`++z`会是？`3`所以该语句将打印`false`ok :) 和第二种情况

```
System.out.println(++z == z++); 
```

`++z`将是`4`并且`z++`将是`4`所以你得到 `true` 所以希望你清楚......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-25T06:28:35.067

++z 语句返回 z 的增量值，而 z++ 返回增量之前的值，然而 z++ 表达式返回后的 z 值是 z 的增量值。

所以

```
int z = 1;                                        // Line 1
System.out.println(z++ == ++z);                   // Line 2
System.out.println(++z == z++);                   // Line 3 
```

在第 2 行中，z++ 返回 1，并且 z 的值一旦返回就会增加，所以 z 现在是 2，++z 在返回之前增加值，所以 z 是 3。因此第 2 行是

```
System.out.println(1 == 3); 
```

这是**错误**的。

在第 3 行中，++z 的计算结果为 4（因为 z 的前一个值是 3）并且 z++ 再次返回 z 的前一个值，即 4 但现在 z 是 5。因此第 3 行是

```
System.out.println(4 == 4); 
```

这是**真的**。

# css - 将背景图像放置在 ul/li 项的边缘之外

> ID：12036482
> 
> 赞同：0
> 
> 时间：2012-08-20T11:01:41.350
> 
> 标签：css, image, background, html-lists

我有一个背景图像，我想将其放置在我的 ul li 项目的边缘。

**图片**

![UL LI 项目上的箭头](../Images/c0fcf1c1773fdcf5b5f8e908d9900985.png)

我想你可以看到我正在尝试做的事情，将那个小右箭头定位在 egde 之外，类似于顶部向下的箭头。（石灰将更改为与箭头相同的颜色，但我已经设置了对比色，因此实际上可以看到箭头）

**CSS**

```
body ul#main_navigation li li:hover > a, body ul#main_navigation li li.over > a
{
     background-image:url(/images/nav_arrow_right.png);
     background-repeat:no-repeat;
     background-position:center right;
     background-color: #0F0;
     color: #FFF;
} 
```

**期望的结果**

![在此处输入图像描述](../Images/2b2cfb98b18467a7126958bf0e2c2da8.png)

编辑：我已经设法让箭头正确定位，但是它正在切断......我怎样才能让它不切断物品之外的任何东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:09:42.280

@Francesca 所以你可以玩定位你可以设置`background-position`你想要的箭头图像去哪里............

我在下面给你一些粗略的想法我没有你的太多代码....

```
body ul#main_navigation li li:hover > a, body ul#main_navigation li li.over > a
{
     background-image:url(/images/nav_arrow_right.png);
     background-repeat:no-repeat;
     background-position:center 10px;
     background-color: #0F0;
     color: #FFF;
} 
```

# function - MATLAB 中的 tofloat 函数

> ID：12036486
> 
> 赞同：0
> 
> 时间：2012-08-20T11:02:07.520
> 
> 标签：function, matlab, image-processing

为什么**tofloat**函数在 MATLAB 2010 中不起作用？它是省略还是只是用其他东西代替？此函数应用适当的比例因子将逻辑、uint8、uint16 或 int16 类的图像转换为单一类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:17:31.423

I don't think **tofloat** was ever a part of offical matlab. It is a support function used by the [imageprocessingplace](http://www.imageprocessingplace.com/) books/exercises. You can find the code for **tofloat** [here](https://beagle.whoi.edu/redmine/projects/ifcb-web/repository/revisions/290/entry/trunk/dipum_toolbox_2.0.1/tofloat.m).

# vb.net - 实现继承的功能 - VB.net

> ID：12036488
> 
> 赞同：1
> 
> 时间：2012-08-20T11:02:10.543
> 
> 标签：vb.net, winforms, interface

我有一个表单类，命名为`EditCellForm`应该实现接口`ICoordsRequester`。

该接口需要`Focus()`实现该方法。

只要它是一种形式，我的类就已经实现了该`Focus()`方法，但编译器看不到它，因为它在`Windows.Forms.Form`超类中。

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:37:17.783

您可以使用关键字创建一个新`Focus`方法来实现接口：`Shadows`

```
Class EditCellForm 
    Inherits Form
    Implements ICoordsRequester

    Shadows Sub Focus Implements ICoordsRequester.Focus
        Mybase.Focus
    End Sub

End Class 
```

或重命名您的方法

```
Class EditCellForm 
    Inherits Form
    Implements ICoordsRequester

    Sub NewFocus Implements ICoordsRequester.Focus
        Focus()
    End Sub

End Class 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T11:40:33.457

您可以像往常一样实现该方法，但只需将其称为不同的名称。然后在方法中，只需调用基类的Focus事件即可。如果它所做的一切都是一样的，我只是将它设为私有，以便它只能通过接口访问。

```
Public Class EditCellForm
    Implements ICoordsRequester 

    Private Sub ICoordsRequester_Focus() Implements ICoordsRequester.Focus
        Me.Focus()
    End Sub
End Class 
```

# javascript - 在加载后将字符串附加到未来元素（jquery）

> ID：12036489
> 
> 赞同：0
> 
> 时间：2012-08-20T11:02:19.453
> 
> 标签：javascript, jquery

需要这样的东西（用于将来加载的 html 到页面！）：

```
$(document).on('ready', 'a', function(){ $(this).after('it works'); }); 
```

这不起作用（需要类似的事件，如“加载”或“准备”**在元素添加到页面后触发**）。例如另一个事件：

```
$(document).on('mouseover', 'a', function(){ $(this).after('it works'); }); 
```

正常工作。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:07:46.613

这可能是因为这些元素不会触发`onload`事件。`document`'s事件在`load`所有元素加载后触发，因此您可以尝试使用它。

```
$(document).on('DOMNodeInserted', 'a', function(){ $(this).after('it works'); }); 
```

[演示](http://jsfiddle.net/aajFc/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:32:02.257

$.ajaxComplete()? 还是只是 CSS？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:09:02.687

我不确定它是否会有所帮助，但请尝试使用 .live

[http://api.jquery.com/live/](http://api.jquery.com/live/)

# php - 使用多个命名空间解析 XML

> ID：12036491
> 
> 赞同：0
> 
> 时间：2012-08-20T11:02:26.717
> 
> 标签：php, dom, xml-parsing, simplexml, xml-namespaces

所以我想解析这个 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <soapenv:Body>
    <requestContactResponse xmlns="http://webservice.foo.com">
      <requestContactReturn>
        <errorCode xsi:nil="true"/>
        <errorDesc xsi:nil="true"/>
        <id>744</id>
      </requestContactReturn>
    </requestContactResponse>
  </soapenv:Body>
</soapenv:Envelope> 
```

具体来说，我想获取标签的值`<id>`

这是我尝试过的：

```
$dom = new DOMDocument;
$dom->loadXML($xml);
$dom->children('soapenv', true)->Envelope->children('soapenv', true)->Body->children()->requestContactResponse->requestContactReturn->id; 
```

但我收到此错误消息：

> PHP 致命错误：调用未定义的方法 DOMDocument::children()

我也尝试过使用 simpleXML：

```
$sxe = new SimpleXMLElement($xml);
$sxe->children('soapenv', true)->Envelope->children('soapenv', true)->Body->children()->requestContactResponse->requestContactReturn->id; 
```

但是我收到了另一个错误消息：

> PHP 致命错误：在非对象上调用成员函数 children()

我尝试过的最后一个解决方案：

```
$sxe = new SimpleXMLElement($xml);
$elements = $sxe->children("soapenv", true)->Body->requestContactResponse->requestContactReturn;

foreach($elements as $element) {
    echo "|-$element->id-|";
} 
```

这次的错误信息是：

```
Invalid argument supplied for foreach() 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:37:02.510

这里没有记录的事实是，当您选择带有 的命名空间时`->children`，它对**后代节点仍然有效**。

因此，当您询问时`$sxe->children("soapenv", true)->Body->requestContactResponse`，SimpleXML 假定您仍在谈论`"soapenv"`名称空间，因此正在寻找`<soapenv:requestContactResponse>`不存在的元素。

要切换回默认命名空间，您需要`->children`使用命名空间再次调用`NULL`：

```
$sx->children("soapenv", true)->Body->children(NULL)->requestContactResponse->requestContactReturn->id 
```

# delphi - 向 TWebBrowser 发送 OnClick 消息

> ID：12036492
> 
> 赞同：2
> 
> 时间：2012-08-20T11:02:29.540
> 
> 标签：delphi, onclick, twebbrowser

如何在 Delphi 中向 TWebBrowser 发送鼠标点击消息？OnClick 消息必须发送到网站中出现的特定控件。

例如，我在名为 XXXRB 的网站中出现了一个单选按钮，我想将消息发送到该单选按钮（名为 XXXRB）以选择它。

我该怎么做？

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:05:22.360

你能从 Delphi 调用 JS 吗？

[http://www.delphidabbler.com/articles?article=21](http://www.delphidabbler.com/articles?article=21)

[http://jansfreeware.com/articles/delphi-ie-javascript.html](http://jansfreeware.com/articles/delphi-ie-javascript.html)

[http://www.programmersheaven.com/article/12946-How+to+call+JavaScript+functions+in+a+TWebBrowser+from+Delphi/info.aspx](http://www.programmersheaven.com/article/12946-How+to+call+JavaScript+functions+in+a+TWebBrowser+from+Delphi/info.aspx)

* * *

可能应该有办法

[http://www.roseindia.net/javascript/javascript-click-method.shtml](http://www.roseindia.net/javascript/javascript-click-method.shtml)

* * *

要定位控制 DOM 对象，您可以尝试使用 GetXXXByName 等集合或 jQuery 或自定义 JS 代码等库。

然而，这是 Internet Epxlorer + JavaScript 上的问题，而不是 Delphi 上的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T17:55:07.173

正如 Arioch 所暗示的那样，不需要 javascript。您可以通过 TWebBrowser.Document 访问完整的 DOM。网上有很多关于这个主题的资源，这是最完整的一个：

[http://www.cryer.co.uk/brian/delphi/twebbrowser/read_write_form_elements.htm](http://www.cryer.co.uk/brian/delphi/twebbrowser/read_write_form_elements.htm)

如果您环顾四周，您还会发现一些[片段](https://stackoverflow.com/a/11454482/800214)。

# dojo - 删除 FilteringSelect 中的选定选项后显示占位符文本

> ID：12036493
> 
> 赞同：1
> 
> 时间：2012-08-20T11:02:31.770
> 
> 标签：dojo

我有一个绑定到 FilteringSelect 组件的商店，该组件成功获取并填充了过滤选择。

稍后我使用 deleteItem 方法从底层存储中动态删除一些选项，如下所示：

```
scheduleTypeStore.fetch({query:{id: '*'}, onComplete: function (items) {
                    for(i = 0; i < items.length; i++){
                        var item = items[i];
                        scheduleTypeStore.deleteItem(item);
                    }
                }});
scheduleTypeStore.save(); 
```

下拉选项已更新，但最后选择的选项即使已被删除，仍会保留。删除操作后，如果用户选择了另一个选项，那么他将无法看到这个先前选择的选项。

当所选选项被动态删除时，我是否需要在 FilteringSelect 上调用某些方法来显示占位符文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:06:12.810

好的，我使用 dijit.byId('myid').reset(); 解决了它

# html - 在 html 页面中打印 xml 源

> ID：12036496
> 
> 赞同：0
> 
> 时间：2012-08-20T11:02:40.490
> 
> 标签：html, xml, printing

所以我有一个打印各种文件内容的servlet。但是当我想打印 .xml 文件时，我的 servlet 页面不打印任何东西，因为页面使用这个 xml 标签作为 html 并且正在解析它们而不是打印。我想打印这个标签。我正在逐行读取文件，并且行存储在变量行中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:27:50.613

如果要在 HTMl 页面中打印 xml 内容，可以使用Apache commons lang 库中的[StringEscapeUtils.escapeHtml()](http://commons.apache.org/lang/api/org/apache/commons/lang3/StringEscapeUtils.html)函数将 xml 文件内容写入 HTML 页面

```
PrintWriter writer = response.getWriter();
writer.write("<html><head></head><body>");
writer.write(StringEscapeUtils.escapeHtml(xmlContent);
writer.write("</body></html>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T11:08:00.647

如果您尝试将**XML 显示为 HTML 文档中的内容**：

浏览器无法更好`<`地区分作者打算表示“标签开始”和作者打算表示“渲染此”的区别。

您需要将其表示为`&lt;`好像您希望它显示为数据一样。

[JSP 中等价的 htmlentities](https://stackoverflow.com/questions/328381/htmlentities-equivalent-in-jsp)的答案？解释了如何将文本字符串转换为 HTML 字符串。

* * *

如果您尝试**输出 XML 文档而不是 HTML 文档**：

您需要指定 XML 内容类型（例如`application/xml`）而不是 HTML 内容类型。

有关说明，请参阅[如何在 servlet 上设置内容类型](https://stackoverflow.com/questions/5216190/how-to-set-the-content-type-on-the-servlet)。

# asp.net - 虚拟目录中的相对路径

> ID：12036497
> 
> 赞同：4
> 
> 时间：2012-08-20T11:02:52.637
> 
> 标签：asp.net, asp.net-mvc, hyperlink

我正在将电子商务应用程序从旧的 php 框架迁移到 ASP.NET MVC。某些产品的描述中包含指向其他产品的链接。我编写了一个小应用程序来将旧站点中的所有内容导入新站点，现在我也想更新这些链接。我想让链接相对，但相对链接不起作用，`localhost`因为该站点位于虚拟目录中。

旧链接：`http://domain/index.php?productID=1234`
新链接：`/product/1234`

新链接将不起作用，`localhost`因为它将被翻译成`localhost/product/1234`而不是`localhost/virtualdirectory/product/1234`.

我已经在谷歌上搜索了很长一段时间的解决方案，但我似乎找不到任何东西。您对如何解决此问题有任何想法吗？

实际上，我在写问题时想出了一个解决方案，但无论如何我都会发布这个，也许你会想出一个更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:05:41.697

我想出的解决方案是使用这样的链接：`../../product/1234`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:07:02.113

您是否考虑过不在虚拟目录中运行您的应用程序？虽然它可能是 Visual Studio 中的默认值，但可以更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T20:58:42.160

在 Visual Studio 中，右键单击您的项目，然后单击“属性”。在“Web”选项卡下，在“Virtual Path:”框中输入虚拟路径

例如，/MyVirtualPath

在你的代码中，确保你的链接写成“../MyVirtualPath/”。

# php - PHP 中 __construct() 和 __destruct() 的有趣行为

> ID：12036498
> 
> 赞同：-1
> 
> 时间：2012-08-20T11:02:52.963
> 
> 标签：php

我在开发我的应用程序时正在测试一门课程，就像我所做的任何其他快速懒惰方法调整`echo`一样

```
function __construct(){
   parent::__construct();
   echo "yaba daba doo"; 
   exit();
} 
```

现在，经过几次测试，我想检查该类是否已完全编译，因此我写道：

```
function __destruct(){
   echo "ends here"; 
   exit();
} 
```

有趣的是，即使有一个`exit`in `__construct`，它仍然执行`__destruct`！

据我所知，退出“杀死”了这个过程，不是吗？

`__destruct`当对象不再有对该类的引用时调用。

这是否意味着，`exit(0)`不会优先终止进程？

它是一个PHP错误吗？因为，IMO 脚本不应该更进一步？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T11:05:09.907

这一切都在[手册](http://php.net/manual/en/language.oop5.decon.php#language.oop5.decon.destructor)中。

> 即使使用 exit() 停止脚本执行，也会调用析构函数。在析构函数中调用 exit() 将阻止执行剩余的关闭例程。

# c# - C# 中的欧拉 23：0.2 秒，F# 中：30.5 秒。为什么？

> ID：12036502
> 
> 赞同：2
> 
> 时间：2012-08-20T11:03:00.563
> 
> 标签：c#, f#, c#-to-f#

我对我对这个问题的 F# 解决方案不是很满意，因为我找不到漂亮且快速的解决方案，但这不是这里的问题。问题是，我把解决方案翻译成 C# 真是太棒了，而且速度很快。就像，真的很快，相对而言。

我不知道为什么。是的，我去过Reflector，C#代码看起来很相似，不能说我真的了解IL，但看起来有点像。我唯一能想到的是 F# int[] 对 C# List 的性能。

所以这里是：

## F＃

```
module Euler023

let divisorsSum n =
  let mutable sum = 1
  let limit = (int (sqrt(float n)))
  for i in [2..limit] do
    if n%i=0 then sum <- sum+i+n/i
  if (limit*limit)=n then sum-limit else sum

let isAbundant x = (divisorsSum x)>x
let abundants  = [1..28123] |> List.filter isAbundant |> List.toArray
let domain = System.Collections.BitArray(28124)

let rec loopUntil i j =
    if i=abundants.Length then ()
    elif j=abundants.Length then loopUntil (i+1) (i+1)
    else
      let sum = abundants.[i]+abundants.[j] 
      if sum<28124 then 
        domain.Set(sum, true)
        loopUntil i (j+1)
      else 
        loopUntil (i+1) (i+1)

let solve  =    loopUntil 0 0
            [1..28123] |> List.filter (fun x -> domain.Get(x)=false) |> List.sum 
```

## C＃

```
static int divisorsSum(int n)
{
    int sum = 0;
    var limit = (int)Math.Sqrt(n);

    for (int i=2;i<=limit;++i) if (n%i==0) sum += i + n/i;

    if ((limit * limit) == n) return sum-limit;

    return sum;
}

static List<int> getAbundants(int ceiling)
{
    var ret = new List<int>();

    for (int i = 1; i < ceiling; ++i) if (divisorsSum(i) > i) ret.Add(i);

    return ret;
}

 static void Main(string[] args)
 {

     var abundants = getAbundants(28124);
     var bitField = new bool[28124];

     for (int i = 0; i < abundants.Count; ++i)
         for (int j = i; j < abundants.Count; ++j)
         {
             var sum = abundants[i] + abundants[j];
             if (sum < 28124) bitField[sum] = true;
             else break;
         }

     var total = 0;
     for (int i = 0; i < 28124; ++i) if (bitField[i]==false) total += i;

} 
```

## 更新

包含此代码的项目由每个问题的单独文件 (EulerXXX.fs) + 主程序文件组成。主程序文件如下

```
module Program =

let stopWatch = System.Diagnostics.Stopwatch()
let mutable totalTime = System.TimeSpan()

let inline tick()
 = 
    stopWatch.Stop();
    totalTime <- totalTime.Add stopWatch.Elapsed
    printfn " -> Elapsed: %2.2f sec Total: %2.2f s" stopWatch.Elapsed.TotalSeconds  totalTime.TotalSeconds
    stopWatch.Restart()

let _ = 

    stopWatch.Start()
    printf "Euler001 solution: %A" Euler001.solve
    tick()
    printf "Euler002 solution: %A" Euler002.solve
    tick()
    printf "Euler003 solution: %A" Euler003.solve
    tick()
    printf "Euler004 solution: %A" Euler004.solve
    tick()
    printf "Euler005 solution: %A" Euler005.solve
    tick()
    printf "Euler006 solution: %A" Euler006.solve
    tick()
    printf "Euler007 solution: %A" Euler007.solve
    tick()
    printf "Euler008 solution: %A" Euler008.solve
    tick()
    printf "Euler009 solution: %A" Euler009.solve
    tick()
    printf "Euler010 solution: %A" Euler010.solve
    tick()
    printf "Euler011 solution: %A" Euler011.solve
    tick()
    printf "Euler012 solution: %A" Euler012.solve
    tick()
    printf "Euler013 solution: %A" Euler013.solve
    tick()
    printf "Euler014 solution: %A" Euler014.solve
    tick()
    printf "Euler015 solution: %A" Euler015.solve
    tick()
    printf "Euler016 solution: %A" Euler016.solve
    tick()
    printf "Euler017 solution: %A" Euler017.solve
    tick()
    printf "Euler018 solution: %A" Euler018.solve
    tick()
    printf "Euler019 solution: %A" Euler019.solve
    tick()
    printf "Euler020 solution: %A" Euler020.solve
    tick()
    printf "Euler021 solution: %A" Euler021.solve
    tick()
    printf "Euler022 solution: %A" Euler022.solve
    tick()
    printf "Euler023 solution: %A" Euler023.solve
    tick()
    printf "Euler024 solution: %A" Euler024.solve
    tick()
    printf "Euler059 solution: %A" Euler059.solve
    tick()
    printf "Euler067 solution: %A" Euler067.solve
    tick()
    stopWatch.Stop()
    System.Console.ReadLine() 
```

程序的输出如下：

```
Euler001 solution: 233168 -> Elapsed: 0.02 sec Total: 0.02 s
Euler002 solution: 4613732 -> Elapsed: 0.03 sec Total: 0.04 s
...
Euler022 solution: 871198282 -> Elapsed: 0.02 sec Total: 4.11 s
Euler023 solution: 4179871 -> Elapsed: 81.11 sec Total: 85.22 s
Euler024 solution: [2; 7; 8; 3; 9; 1; 5; 4; 6; 0] -> Elapsed: 0.01 sec Total: 85.23 s
...
Euler067 solution: [7273] -> Elapsed: 0.01 sec Total: 85.31 s 
```

所以问题不在于项目参数。此外，如果我将代码从 Euler023 复制到 Program，它将立即运行。问题是，为什么这种减速只发生在这个问题上？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T07:53:37.477

您的 F# 版本一点也不慢；在我的机器上使用 F# Interactive 需要 0.44 秒。我不知道你怎么能观察到这样的缓慢（30.5 秒）。如果您编译并运行代码，请确保您处于发布模式并打开优化和尾调用消除。

但是，您仍然可以通过消除冗余中间集合的使用来进一步优化。

A. 将（冗余）列表更改为`[2..limit]`范围表达式：`2..limit``divisorsSum`

```
for i in 2..limit do
    if n%i=0 then sum <- sum+i+n/i 
```

B. 在不创建大列表的情况下生成丰富数组（更忠实于 C# 版本）：

```
let abundants = 
    let arr = ResizeArray(28123)
    for i in 1..28123 do
        if isAbundant i then arr.Add i
    arr.ToArray() 
```

C.`solve`在不创建大列表的情况下计算：

```
let solve = 
    loopUntil 0 0
    let mutable sum = 0
    for i in 1..28123 do
       if not <| domain.Get(i) then
            sum <- sum + i
    sum 
```

新的 F# 版本比原来的版本快 4 倍；完成大约需要 0.1 秒。

**更新：**

你的测量不准确。首先，您测量了两次打印值调用之间的时间差。二`EulerXXX.solve`是价值观；因此它们是在您编译程序时预先计算的。您应该声明`EulerXXX.solve`为函数：

```
let solve() = ... 
```

并测量函数调用的执行时间：

```
let time fn =
    let sw = new System.Diagnostics.Stopwatch()
    sw.Start()
    let f = fn()
    sw.Stop()
    printfn "Time taken: %.2f s" <| (float sw.ElapsedMilliseconds)/1000.0
    f

let s023 = time Euler023.solve
printf "Euler023 solution: %A" s023 
```

# php - 将新行插入多维数组php

> ID：12036511
> 
> 赞同：3
> 
> 时间：2012-08-20T11:03:55.157
> 
> 标签：php

PHP：

如何将值插入多维数组的特定行或在多维数组中插入空行？

从：

```
a ={ (0,1,2),
     (3,4,5),
     (6,7,8) } 
```

成为

```
a ={ (0,1,2),
     (null,null,null),
     (3,4,5),
     (6,7,8) } 
```

还是 null 值我想引入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:09:37.633

[在 4warding dot com](http://www.php.net/manual/en/function.array-splice.php#61710)使用 gerry-03 的这个功能应该是可能的：

```
function array_insert(&$input, $offset, $replacement){
    array_splice($input, $offset, 0, 0);
    $input[$offset] = $replacement;
} 
```

演示：

```
$a = array(array(0, 1, 2), array(3, 4, 5), array(6, 7, 8));
array_insert($a, 1, array(9, 10, 11)); 
```

结果：

```
[0] => Array
    (
        [0] => 0
        [1] => 1
        [2] => 2
    )

[1] => Array
    (
        [0] => 9
        [1] => 10
        [2] => 11
    )

[2] => Array
    (
        [0] => 3
        [1] => 4
        [2] => 5
    )

[3] => Array
    (
        [0] => 6
        [1] => 7
        [2] => 8
    ) 
```

# ios - 如何从 Webserver 获取 cookie 并在 iOS 应用程序中维护它？

> ID：12036512
> 
> 赞同：0
> 
> 时间：2012-08-20T11:03:55.650
> 
> 标签：ios, cookies, nsurlconnection, session-cookies, nsurlcredential

我想从[http://mycompany.com/page1...http://mycompany.com/page2](http://mycompany.com/page1...http://mycompany.com/page2)获取 JSON ...在网络服务器端，它需要初始登录[http://mycompany.com /login](http://mycompany.com/login)，然后为用户维护一个 cookie。如何使用 NSURLConnection 获得这种行为，而不必每次都要求登录？这是使用 NSURLCredential 存储的非工作代码。我是否需要在登录时从 web 服务获取 cookie，然后将其与以后的请求一起发送？我为此苦苦挣扎了一段时间，所以你能澄清你的答案吗？

```
- (IBAction)getJSON:(id)sender
{

NSURLCredential *credential = [NSURLCredential credentialWithUser:@"user"
                                                         password:@"pass"
                                                          persistence:NSURLCredentialPersistenceForSession];

NSURLProtectionSpace *protectionSpace = [[NSURLProtectionSpace alloc]
                                         initWithHost:@"myCompany.com"
                                         port:0
                                         protocol:@"http"
                                         realm:nil
                                         authenticationMethod:nil];

[[NSURLCredentialStorage sharedCredentialStorage] setDefaultCredential:credential
                                                    forProtectionSpace:protectionSpace];

//////////GET JSON//////////////

NSError *error;
NSURL *url = [NSURL URLWithString:@"http://mycompany.com.jsonpage1"];
 NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[[NSURLConnection alloc] initWithRequest:request delegate:self];
}

 //I am NOT getting JSON in this delegate
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

NSString *responseString = [[NSString alloc] initWithData:responseData    encoding:NSUTF8StringEncoding];

NSLog(@"%@",responseString);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:37:04.830

阅读饼干：

请参阅[在 iPhone 上管理 HTTP Cookie](https://stackoverflow.com/questions/2053568/managing-http-cookies-on-iphone)

设置cookie：

... 使用 cookie 属性设置字典，然后：

```
NSHTTPCookie *cookie = [NSHTTPCookie cookieWithProperties:[NSDictionary dictionaryWithObjects:object forKeys:keys]];
[[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:cookie]; 
```

但请记住，会话 cookie 可能会在您的服务器上过期

# jquery - 滑块 1px 镀铬错误

> ID：12036516
> 
> 赞同：0
> 
> 时间：2012-08-20T11:04:16.583
> 
> 标签：jquery, html, css, google-chrome, slider

我有一个有趣的错误，它只发生在 Chrome 中......如果你看看这个页面： http: [//forbrugsforeningen.build.dis-play.dk/Om-Forbrugsforeningen](http://forbrugsforeningen.build.dis-play.dk/Om-Forbrugsforeningen)

那么如果你使用滑块，看一下顶部菜单，它在滑动动画期间会跳1px吗？以前从未见过，甚至更奇怪的是，它是页面上的两个独立元素，位于不同的容器中？

滑块的代码是：

```
if ($jq('.rotator').length) {
    $jq('.flexslider').flexslider({
        animation: "slide",              //String: Select your animation type, "fade" or "slide"
        slideDirection: "horizontal",   //String: Select the sliding direction, "horizontal" or "vertical"
        slideshow: true,                //Boolean: Animate slider automatically
        slideshowSpeed: 7000,           //Integer: Set the speed of the slideshow cycling, in milliseconds
        animationDuration: 400,         //Integer: Set the speed of animations, in milliseconds
        directionNav: true,             //Boolean: Create navigation for previous/next navigation? (true/false)
        controlNav: true,               //Boolean: Create navigation for paging control of each clide? Note: Leave true for manualControls usage
        keyboardNav: false,              //Boolean: Allow slider navigating via keyboard left/right keys
        mousewheel: false,              //Boolean: Allow slider navigating via mousewheel
        prevText: "Tilbage",           //String: Set the text for the "previous" directionNav item
        nextText: "Frem",               //String: Set the text for the "next" directionNav item
        pausePlay: false,               //Boolean: Create pause/play dynamic element
        pauseText: 'Pause',             //String: Set the text for the "pause" pausePlay item
        playText: 'Afspil slider',               //String: Set the text for the "play" pausePlay item
        randomize: false,               //Boolean: Randomize slide order
        slideToStart: 0,                //Integer: The slide that the slider should start on. Array notation (0 = first slide)
        animationLoop: true,            //Boolean: Should the animation loop? If false, directionNav will received "disable" classes at either end
        pauseOnAction: true,            //Boolean: Pause the slideshow when interacting with control elements, highly recommended.
        pauseOnHover: false            //Boolean: Pause the slideshow when hovering over slider, then resume when no longer hovering
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:17:56.150

滑块内的图像元素应将其位置设置为相对。

```
#slider li img {
position: relative;
} 
```

# image-processing - 无法加载文件或程序集'AForge，版本 = 2.2.4.0，...'

> ID：12036518
> 
> 赞同：4
> 
> 时间：2012-08-20T11:04:24.827
> 
> 标签：image-processing, powershell, powershell-2.0, aforge

在 Visual Studio 的 Windows 窗体应用程序中使用 AForge 类没有问题。我现在正尝试在 Windows PowerShell 中使用它们。

```
[Reflection.Assembly]::LoadFile('C:\Program Files\AForge.NET\IPLab\References\AForge.NET\AForge.Imaging.dll') 
```

给出：

```
GAC    Version        Location
---    -------        --------
False  v2.0.50727     C:\Program Files\AForge.NET\IPLab\References\AForge.NET\AForge.Imaging.dll 
```

即使 AForge.Imaging.dll 文件版本和产品版本都是 2.2.4.0，它也会显示 v2.0.50727。但我执行以下实例化 AForge.Imaging.UnmanagedImage 对象 $umi （其中 $bmdata 是 Drawing.BitMapData 对象）没有问题：

```
$umi = new-object Aforge.Imaging.UnmanagedImage $bmdata 
```

但是当我尝试访问 $umi 对象时，例如 $umi.GetType()，我收到以下错误：

```
The following exception occurred while retrieving member "GetType": "Could not load file or assembly 'AForge, Version=2.2.4.0, Culture=neutral, PublicKeyToken=c1db6ff4eaa06aeb' or one of its dependencies. The system cannot find the file specified."
At line:1 char:13
+ $umi.GetType <<<< ()
    + CategoryInfo          : NotSpecified: (:) [], ExtendedTypeSystemException
    + FullyQualifiedErrorId : CatchFromBaseGetMember 
```

有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:41:43.113

“AForge.Imaging.dll”库依赖于以下也必须加载的库；

```
Add-Type -AssemblyName "System.Drawing"
Add-Type -Path "E:\AForge.dll"
Add-Type -Path "E:\AForge.Math.dll"
Add-Type -Path "E:\AForge.Imaging.dll" 
```

运行以下 PowerShell 命令以列出当前加载的程序集并验证您是否拥有必要的位。

```
[appdomain]::currentdomain.getassemblies() | sort -property fullname | format-table fullname 
```

这是我的结果：

```
FullName
--------
AForge, Version=2.2.4.0, Culture=neutral, PublicKeyToken=c1db6ff4eaa06aeb
AForge.Imaging, Version=2.2.4.0, Culture=neutral, PublicKeyToken=ba8ddea9676ca48b
AForge.Math, Version=2.2.4.0, Culture=neutral, PublicKeyToken=abba2e25397ee8c9
Microsoft.PowerShell.Commands.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
Microsoft.PowerShell.Commands.Management, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
Microsoft.PowerShell.Commands.Utility, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
Microsoft.PowerShell.ConsoleHost, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
Microsoft.PowerShell.Security, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
Microsoft.WSMan.Management, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
System.Configuration.Install, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
System.DirectoryServices, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
System.Management, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
System.Management.Automation, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
System.Transactions, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 
```

我可以确认这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:42:03.147

运行`Process Monitor`并检查它正在寻找的程序集和位置。可能是找不到 AForge.NET 所需的程序集之一，或者某些安全限制。如果您尝试将 32 位版本的 DLL 加载到 64 位 powershell 中，有时可能会出现类似的问题，反之亦然

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-04T08:06:34.600

在您调用函数的项目中安装 aforge.video - 以下是 nuget 控制台 Install-Package AForge.Video -Project "ProjectNameFromWhichAforgeFunctionCalls" -Version 2.2.4.0 的语法

这解决了我的问题

# sql - 在给定日期的sql中将日期转换为YYMM格式

> ID：12036521
> 
> 赞同：0
> 
> 时间：2012-08-20T11:04:28.223
> 
> 标签：sql, sql-server, sql-server-2008

对于给定的日期 25/08/2012，我们如何将日期格式转换为 YYMM（例如：1208）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T11:09:05.637

使用带有样式 12 的[转换并选择前四个字符。](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

```
select convert(char(4), getdate(), 12) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:16:19.383

You did not specify the datatype for the value `25/08/2012`.

```
declare @dt char(10)
set @dt = '25/08/2012'

select right(@dt, 2) + substring(@dt, 4, 2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:11:38.123

尝试这个：

```
declare @date date='08/25/2012'
 select CONVERT(varchar(4),@date,12) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T13:24:10.687

如果您不喜欢记住字符串转换公式，也可以使用：

```
declare @date date=CURRENT_TIMESTAMP
select right(CAST(year(@date) as varchar(4)), 2) + RIGHT('0'+cast(month(@date) as varchar(2)), 2) 
```

它有点麻烦，但节省了访问帮助页面的时间。

# c# - 如何在众多网站中共享通用功能？

> ID：12036522
> 
> 赞同：2
> 
> 时间：2012-08-20T11:04:30.340
> 
> 标签：c#, asp.net

在我的服务器上，我有 20 个 asp.net 站点。如何让他们共享一个通用函数类而不必复制该通用函数类二十次？

我的网站都是 .net 2 并使用 c#

我可以通过服务做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T11:06:42.580

将您的常用类和函数编译到一个库中，并将该库作为参考包含在 20 个站点中的每一个中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T11:08:06.137

创建一个新的空类库项目。

将您想要共享的所有代码放在该项目的一个（或多个）类中。

在您的 ASP.net 网站中设置对该项目的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:18:51.967

如果您提到的所有“站点”都是纯 asp.net 并且不太可能从该平台更改，则创建一个通用 dll 并在每个站点上引用它。如果您以后发现必须满足混合“语言”（php、ruby、python、java 等）的需求，那么请使用 web 服务（或更可能是 RESTApi）方法。

每种方法都有其优点和缺点，因此根据您更全面的要求，只有您自己知道线在哪里。

# cuda - cudaGetDeviceCount 在 > 2 个 CPU 上并行执行时返回 0

> ID：12036524
> 
> 赞同：0
> 
> 时间：2012-08-20T11:04:32.703
> 
> 标签：cuda, openmpi

如果与大于一起使用，我会遇到一些`cudaGetDeviceCount`返回零的问题。来自更大程序的代码部分是：`mpirun``-np``2`

```
bool cpuInterfaces::checkGPUCount(int gpusPerMachine){

    int GPU_N;
    cudaGetDeviceCount(&GPU_N);

    //if the gpu count on this node does not equal what was given in fvSolution, return false
    return ((gpusPerMachine>GPU_N || gpusPerMachine < 1)? false : true);

} 
```

大部分代码位于[cufflink-source 文件](https://code.google.com/p/cufflink-library/source/browse/trunk/lduMatrix/solvers/CFL_Headers/cpuInterfaces.C)中。如果使用执行运行，`mpirun -np 2 somethingsomething`则一切运行正常并`cudaGetDeviceCount`返回`4`，好像`mpirun -np 4 somethingsomething`将导致`cudaGetDeviceCount`返回零。是否有`cudaGetDeviceCount`我不知道的在 MPI 中使用的特殊情况？任何帮助或建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:34:02.410

感谢那些提供了一些答案的人。事实证明，这是一个驱动程序的问题。稍等片刻，驱动更新解决了这个问题。

# c# - 如何获取 SetBinding 方法

> ID：12036527
> 
> 赞同：0
> 
> 时间：2012-08-20T11:04:56.373
> 
> 标签：c#, wpf, xaml, binding

我需要做这样的事情： [http ://social.msdn.microsoft.com/Forums/en-US/wpf/thread/982e2fcf-780f-4f1c-9730-cedcd4e24320/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/982e2fcf-780f-4f1c-9730-cedcd4e24320/)

我决定按照约翰史密斯的建议采取最好的方法。

我试图在 xaml 中设置绑定，但它不起作用（目标始终为空）。

我决定在代码中手动设置绑定（出于调试目的），所以我需要执行 DateRange 对象的“SetBinding”方法。

此方法在 DateRange 类型的对象中不存在。

有任何想法吗？

```
<TextBox Grid.Row="1"
         Grid.Column="1"
         Name="Xml_Name"
         >
    <TextBox.Text>
        <Binding XPath="@name" UpdateSourceTrigger="PropertyChanged" >
            <Binding.ValidationRules>
                <local:UniqueValidationRule x:Name="uniqueDatasourcesRule001" >
                    <local:UniqueValidationRule.UniqueCollection>
                        <local:UniqueDependencyObject uu="{Binding  ElementName=Xml_Name, Path=Name, UpdateSourceTrigger=PropertyChanged}" />
                    </local:UniqueValidationRule.UniqueCollection>
                </local:UniqueValidationRule>
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox>

public class UniqueDependencyObject : DependencyObject
{
    public static readonly DependencyProperty uu11Property =
        DependencyProperty.Register("uu", typeof(string), typeof(UniqueDependencyObject));

    public string uu
    {
        set { 
            SetValue(uu11Property, value); }
        get { 
            return (string)GetValue(uu11Property); }
    }

}

public class UniqueValidationRule : ValidationRule
{
    public UniqueDependencyObject UniqueCollection
    {
        get;
        set;
    }

    public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
    {
        // I set breakpoint to this line and check UniqueCollection.uu - it is always null
        ////////////////////////////////////////////////////////////////////////////////
        ////////////////////////////////////////////////////////////////////////////////
        return new ValidationResult(true, null);
    }
} 
```

// 并在代码中绑定：

```
 Binding binding = new Binding();
            binding.ElementName = "Xml_Name";
            binding.Path = new System.Windows.PropertyPath("Name");
            binding.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;

            UniqueValidationRule uVal = new UniqueValidationRule();
            uVal.UniqueCollection = new UniqueDependencyObject();

            BindingOperations.SetBinding(uVal.UniqueCollection, UniqueDependencyObject.uu11Property, binding); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T11:43:53.547

我还没有阅读您所指的论坛帖子的所有详细信息，但我相信您需要先了解一些有关数据绑定的知识，然后才能开始使用它。

1.  数据绑定的目标是[依赖属性](http://msdn.microsoft.com/en-us/library/ms752914.aspx)

2.  必须在派生自[DependencyObject](http://msdn.microsoft.com/en-us/library/System.Windows.DependencyObject.aspx)的类中声明依赖属性（至少当它不是附加属性时，但我们在这里不讨论这些）

3.  您要查找的[SetBinding](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingoperations.setbinding.aspx)方法是[BindingOperations](http://msdn.microsoft.com/en-us/library/ms613480)中的静态方法，或者是[FrameworkElement](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.setbinding.aspx)的方法。

因此，当您要在 DataRange 类的某些属性上设置绑定时，它必须从 DependencyObject 派生，并且您可以像这样设置绑定：

```
DataRange dataRange = ...
Binding binding = ...
BindingOperations.SetBinding(dataRange, DataRange.StartProperty, binding); 
```

如果 DataRange 是从 FrameworkElement 派生的，您可以这样写：

```
dataRange.SetBinding(DataRange.StartProperty, binding); 
```

这里 DataRange.StartProperty 是[DependencyProperty](http://msdn.microsoft.com/en-us/library/system.windows.dependencyproperty.aspx)类型，表示`Start`DataRange 类的依赖属性。

您至少应该阅读 MSDN 文章[Data Binding Overview](http://msdn.microsoft.com/en-us/library/ms752347)、[Dependency Properties Overview](http://msdn.microsoft.com/en-us/library/ms752914.aspx)和[Custom Dependency Properties](http://msdn.microsoft.com/en-us/library/ms753358.aspx)。

# jquery - 使用 highchart 时出现“TypeError：firstAxis.options.plotBands 未定义”

> ID：12036530
> 
> 赞同：0
> 
> 时间：2012-08-20T11:04:58.953
> 
> 标签：jquery, highcharts, highstock

我正在使用 highchart.js 创建条形图和仪表图。我需要在一定的时间间隔后刷新数据。当我点击 URl 但当我使用刷新它时，我的图表会按要求出现

```
 setInterval(function(){ 
        //code goes here that will be run every 5 seconds.     
        getDailyProduction();
        getEnergyProduction();
       // getOperationCapacity();
    }, 5000); 
```

几秒钟后，我收到“TypeError：firstAxis.options.plotBands is undefined”错误。

以下是我为条形图编写的代码：

```
createBarGraph = function (data, name, title){
    $(function () {
        var chart;
        $(document).ready(function() {
            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'energyProductionGraph',
                    type: 'column'
                },
                title: {
                    text: 'Energy Production (WEEK)'
                },
                xAxis: {
                    title: {
                        text: 'X Axis Variables'
                    }
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Y Axis Variables'
                    }
                },
                legend: {
                    enabled: false
                },
                tooltip: {
                    formatter: function() {
                        return ''+
                        this.x +': '+ this.y +' mm';
                    }
                },
                credits: {
                    enabled: false
                },
                exporting: {
                    enabled: false
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0
                    }
                },
                series: [{
                    name: 'Energy Production',
                    color: '#81BEF7',
                    data: data

                }]
            });
        });

    });
} 
```

下面是我的仪表图的代码

```
createGaugeGraph = function (data, name, title){
    $(function () {
        $(document).ready(function() {
            var chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'operatingCapacityGraph',
                    type: 'gauge',
                    alignTicks: false,
                    plotBackgroundColor: null,
                    plotBackgroundImage: null,
                    plotBorderWidth: 0,
                    plotShadow: false
                },

                title: {
                    text: 'Operating Capacity %'
                },

                pane: {
                    startAngle: -90,
                    endAngle: 90,

                    background: [{
                        backgroundColor: {
                            linearGradient: {
                                x1: 0, 
                                y1: 0, 
                                x2: 0, 
                                y2: 1
                            },
                            stops: [
                            [0, '#FFF'],
                            [1, '#333']
                            ]
                        },
                        borderWidth: 0,
                        outerRadius: '109%'
                    }, {
                        backgroundColor: {
                            linearGradient: {
                                x1: 0, 
                                y1: 0, 
                                x2: 0, 
                                y2: 1
                            },
                            stops: [
                            [0, '#333'],
                            [1, '#FFF']
                            ]
                        },
                        borderWidth: 1,
                        outerRadius: '107%'
                    }, {
                        backgroundColor: {
                            linearGradient: {
                                x1: 0, 
                                y1: 0, 
                                x2: 0, 
                                y2: 1
                            },
                            stops: [
                            [0, '#666'],
                            [1, '#0c0c0c']
                            ]
                        },
                        borderWidth: 1,
                        outerRadius: '107%'
                    }, {
                        backgroundColor: '#DDD',
                        borderWidth: 1,
                        outerRadius: '105%',
                        innerRadius: '104%'
                    }]
                },            
                plotOptions: {
                    gauge: {
                        dial: {
                            baseWidth: 4,
                            backgroundColor: '#C33',
                            borderColor: '#900',
                            borderWidth: 1,
                            rearLength: 20,
                            baseLength: 10,
                            radius: 80
                        }                
                    }
                },

                yAxis: [{
                    min: 0,
                    max: 100,
                    lineColor: '#fff',
                    tickColor: '#fff',
                    minorTickColor: '#fff',
                    minorTickPosition: 'inside',
                    tickLength: 10,
                    tickWidth: 4,
                    minorTickLength: 5,
                    offset: -2,
                    lineWidth: 2,
                    labels: {
                        distance: -25,
                        rotation: 0,
                        style: {
                            color: '#fff',
                            size: '120%',
                            fontWeight: 'bold'
                        }
                    },
                    endOnTick: false,
                    plotBands: [{
                        from: 0,
                        to: 100,
                        innerRadius: '40%',
                        outerRadius: '65%',
                        color: {
                            linearGradient: {
                                x1: 0, 
                                y1: 0, 
                                x2: 0, 
                                y2: 1
                            },
                            stops: [
                            [0, '#fff'],
                            [1, '#fff']
                            ]
                            } // white
                    }, 
                    {
                        from: 0,
                        to: 50,
                        innerRadius: '45%',
                        outerRadius: '60%',
                        color: '#000' // black
                    }]
                }],

                series: [{
                    name: 'Value',
                    data: [50],
                    dataLabels: {
                        formatter: function () {
                            var kmh = this.y;
                            return '<span style="color:#339">'+ kmh + '%</span>';
                        },
                        backgroundColor: {
                            linearGradient: {
                                x1: 0,
                                y1: 0,
                                x2: 0,
                                y2: 1
                            },
                            stops: [
                            [0, '#DDD'],
                            [1, '#FFF']
                            ]
                        },
                        offset: 10
                    },
                    tooltip: {
                        valueSuffix:' %'
                    }
                }]

            }

        );
        });
    });
} 
```

下面是我调用这些图形函数的文件

```
$(document).ready(function() {

    getDailyProduction();
    getEnergyProduction();
  getOperationCapacity();

    // Put all your code here
    function getDailyProduction(){

        // setting vaiables for Daily prodution graph
        var data= [1,2,3,4,5,6,7,8,9,2,3,4,3,2,3,4,5,12,54,34];
        var title ='Daily Production (KW)';
        var name='Daily Production';
        createAreaGraph(data, name, title);
    }
    function getEnergyProduction(){
        // setting variables for Energy production
        var last7daysProduced = [1,2,3,4,5,6,7];
        var title1 ='Energy Production (KW)';
        var name1='Energy Production';
        createBarGraph(last7daysProduced, name1, title1);
    }
    function getOperationCapacity(){
        // setting variables for Operating Capacity
        var operatingCapacity = 62;
        var title2 ='Operating Capacity %';
        var name2='Operating Capacity';
        createGaugeGraph(operatingCapacity, name2, title2);
    }

    setInterval(function(){ 
        //code goes here that will be run every 5 seconds.     
        getDailyProduction();
        getEnergyProduction();
        getOperationCapacity();
    }, 5000); 
```

而且我还按以下顺序包含了所需的库

```
 <script type="text/javascript" src="<?php echo base_url(); ?>public/js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="<?php echo base_url(); ?>public/js/highcharts.js"></script>
     <script type="text/javascript" src="<?php echo base_url(); ?>public/js/highcharts-more.js"></script>
    <script type="text/javascript" src="<?php echo base_url(); ?>public/js/exporting.js"></script> 
```

请帮助我获得解决方案。也让我知道是否需要其他任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:22:01.380

Highcharts 的仪表图仍处于测试阶段。目前还没有官方文档可用。

这是 HighChart 网站中的 beta 示例。

[http://www.highcharts.com/component/content/article/2-news/46-gauges-ranges-and-polar-charts-in-beta#gauges](http://www.highcharts.com/component/content/article/2-news/46-gauges-ranges-and-polar-charts-in-beta#gauges)

`TypeError: firstAxis.options.plotBands is undefined`

它是一个报告的错误，

[https://github.com/highslide-software/highcharts.com/issues/1155](https://github.com/highslide-software/highcharts.com/issues/1155)

并且已经修复。所以，为此你必须抓住最新的

`highcharts-more.js`从不稳定的分支。

Highcharts官方论坛上也有很好的转换： [http ://highslide.com/forum/viewtopic.php?f=9&t=19618](http://highslide.com/forum/viewtopic.php?f=9&t=19618)

# android - 如何在我的资产文件夹中的数据库中显示数据并通过 ListView 查看

> ID：12036536
> 
> 赞同：0
> 
> 时间：2012-08-20T11:05:10.880
> 
> 标签：android

我为我的主题制作了一个字典应用程序，我的计划是查看`My Data.db`使用的内容`ListView`。

我读过[这篇关于在 android 中使用 sqlite 的博客，](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)但我是 android 编程中的“新人”。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:12:18.537

文章链接可以回答您的问题。它展示了如何将数据库从本地资产文件夹复制到应用程序使用的数据库中。Android 设置为为您创建数据库，因此它将它们保存在自己的文件路径位置。许多教程展示了如何将一个数据库从您的资产文件夹复制到应用程序数据库。这往往是安装/设置过程之一，之后您将使用内容提供程序将数据存储在 android 使用的默认位置。

即，您可以为用户提供一个重置选项，该选项将执行此操作，擦除现有数据库，但将其替换为有效的空数据库。

以下在 google 上查找的文章深入探讨了这将为您提供使用内容提供程序和列表的进一步帮助。如果它不包括从资产文件夹加载数据库，您可能必须将它与您已有的教程结合起来。

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

# c++ - 使用glDrawElements时如何将法线传递给GLSL中的顶点着色器

> ID：12036537
> 
> 赞同：3
> 
> 时间：2012-08-20T11:05:13.143
> 
> 标签：c++, opengl, glsl, shader, lighting

我正在为练习构建一个简单的 3D 游戏，但在使用索引渲染时，我无法将法线传递给我的着色器。对于多边形的每个面，每个顶点都有相同的法线值。对于具有 8 个顶点的立方体，将有 6 * 6 = 36 条法线（因为每个表面都使用两个三角形进行渲染）。使用索引绘图我只能传递 8 个，每个顶点一个。这不允许我通过表面法线，只能通过平均顶点法线。

如何将 36 个不同的法线传递给 36 个不同的索引？使用 glDrawArrays 显然很慢，所以我选择不使用它。

这是我的着色器：

```
#version 330

layout(location = 0) in vec3 position;
layout(location = 1) in vec3 vertNormal;

smooth out vec4 colour;

uniform vec4 baseColour;
uniform mat4 modelToCameraTrans;
uniform mat3 modelToCameraLight;
uniform vec3 sunPos;

layout(std140) uniform Projection {
    mat4 cameraToWindowTrans;
};

void main() {
    gl_Position = cameraToWindowTrans * modelToCameraTrans * vec4(position, 1.0f);

    vec3 dirToLight   = normalize((modelToCameraLight * position) - sunPos);
    vec3 camSpaceNorm = normalize(modelToCameraLight * vertNormal);

    float angle = clamp(dot(camSpaceNorm, dirToLight), 0.0f, 1.0f);

    colour = baseColour * angle * 0.07;
} 
```

这是我目前用来绑定到 VAO 的代码：

```
 glGenVertexArrays(1, &vertexArray);
    glBindVertexArray(vertexArray); 

    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, polygonBuffer);

    // The position input to the shader is index 0
    glEnableVertexAttribArray(POSITION_ATTRIB);
    glVertexAttribPointer(POSITION_ATTRIB, 3, GL_FLOAT, GL_FALSE, 0, 0);

    // Add the vertex normal to the shader
    glBindBuffer(GL_ARRAY_BUFFER, vertexNormBuffer);

    glEnableVertexAttribArray(VERTEX_NORMAL_ATTRIB);
    glVertexAttribPointer(VERTEX_NORMAL_ATTRIB, 3, GL_FLOAT, GL_FALSE, 0, 0);

    glBindVertexArray(0); 
```

这是我的渲染器：

```
glBindVertexArray(vertexArray);
glDrawElements(GL_TRIANGLES, polygonVertexCount, GL_UNSIGNED_SHORT, 0);
glBindVertexArray(0); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T11:19:54.040

> 对于具有 8 个顶点的立方体，将有 6 * 6 = 36 条法线（因为每个表面都使用两个三角形进行渲染）。

如果错了，请纠正我，但我只看到 6 个法线，每张脸一个。该面上的所有顶点都将使用相同的法线。

> 使用索引绘图我只能传递 8 个，每个顶点一个。这不允许我通过表面法线，只能通过平均顶点法线。

这就是你的推理失败的地方。您不仅将顶点位置传递给着色器，还传递了一大堆使顶点唯一的顶点属性。

因此，如果您使用相同的顶点位置 6 次（您经常这样做），但每次使用不同的法线（实际上两个三角形将共享相同的数据），您实际上应该发送该顶点的所有数据 6x，包括位置的副本。

话虽如此，您不需要 36，您需要`4*6=24`独特的属性。您必须分别发送每个面的所有顶点，因为法线不同，每个面您必须在 4 个位置之间有所不同。您也可以将其视为 8*3，因为您必须复制 8 个位置以处理 3 个不同的法线。

所以你最终会得到类似的东西：

```
GLFloat positions[] = { 0.0f, 0.0f, 0.0f, 
                        0.0f, 0.0f, 0.0f, 
                        0.0f, 0.0f, 0.0f,
                        1.0f, 0.0f, 0.0f,
                        ...}
GLFloat normals[] = { 1.0f, 0.0f, 0.0f, 
                      0.0f, 1.0f, 0.0f, 
                      0.0f, 0.0f, 1.0f,
                      1.0f, 0.0f, 0.0f,
                      ... } 
```

请注意，while inside`normals`和`positions`有重复，但两者在同一位置的组合是唯一的。

# android - 有什么方法可以禁用 EditText 在 Android ICS 中进行编辑但仍使其突出显示？

> ID：12036547
> 
> 赞同：0
> 
> 时间：2012-08-20T11:05:47.987
> 
> 标签：android, input, android-edittext, highlight

我正在制作一个将存储一页文本的应用程序。此应用程序应读取屏幕上显示的突出显示文本并为用户发音。问题是当我从编辑中禁用 EditText 时，我不能再在 EditText 中设置突出显示。

我使用此代码禁用：

```
contentBox.setKeyListener(null); 
```

这个设置高亮的代码：

```
contentBox.setSelection(0,findNextLineIndex(0)); 
```

任何想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:20:02.517

我认为您可以使用`android:editable="false"`它来禁用它；那么你可以得到它的关注:)干杯:)

# c++ - C++ 提取 .reg 文件到注册表

> ID：12036551
> 
> 赞同：0
> 
> 时间：2012-08-20T11:06:31.067
> 
> 标签：c++, registry

谁能告诉我如何将 .reg 文件中的数据提取到注册表中？

我试过了：

```
 system("regedit /s product.reg"); 
```

它不起作用，我也在这里查看了其他各种问题，但没有任何乐趣，我也很难理解它们。

任何人都可以阐明或发给我一个有很好例子的链接吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:07:39.883

以下内容适用于 Windows Vista / Windows 7 及更高版本。

除非您的应用程序没有以管理员权限运行，否则您将无法成功执行 regedit.exe。

如果您使用的是 Visual Studio 2005/2008/2010，请转到项目的属性窗口，展开“链接器”选项，然后选择“清单文件”。将 UAC 执行级别更改为“requireAministrator”。保存您的项目并重建您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:35:46.453

```
system("product.reg") 
```

should also work. This is akin to double-clicking the file.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:22:14.300

据此[，](http://commandwindows.com/reg.htm)正确的命令是：

```
reg IMPORT <FileName> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T11:37:36.730

由于您仍然在 Windows 上：`ShellExecuteA("product.reg")`. 与 不同`system`，这不会启动控制台窗口。

# c++ - 非常量指针可以修改 const var int c++ 吗？

> ID：12036559
> 
> 赞同：0
> 
> 时间：2012-08-20T11:06:58.080
> 
> 标签：c++, pointers, constants

这是我的测试代码：

```
#define print(A) cout << #A <<  " = " << A <<  endl;
int main()
{
    const int e = 2;
    int *p = (int *)&e;
    *p = 4;

    print(e);
    print(*p);
    print(&e);
    print(p);
} 
```

结果：

```
e = 2;
*p = 4;
&e = 0xbfc6b458;
p = 0xbfc6b458; 
```

既然“p”按照相同的地址指向“e”，那么*p和“e”怎么会不同？？？这可能很危险，对吧？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T11:12:07.697

抛弃`const`是合法的；使用由此获得的指针（或引用）来（尝试）修改`const`对象是非法的。

您的代码导致未定义的行为；它可以做任何事情，而且没有任何意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T11:12:29.370

以任何方式修改常量变量都会导致**Undefined Behavior**。
所以是的，这很危险。
未定义的行为意味着任何行为都是可能的，并且您不能期望任何有效的行为。编译器可以免费为您提供任何结果，并且标准允许这样做。一旦调用了 UB，该程序就不再是有效程序。所以最好避免任何导致 UB 的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T11:13:04.910

它们可能不同，因为“e”是一个常量，因此任何体面的编译器都会在编译时插入该值，而不是从内存中读取它。

由于您获取地址，因此它仍然有一个“真实”变量，但在您的情况下实际上并未使用它。

而且您“很幸运”可以完全修改该值；由于它被声明为“const”，编译器可以将它放入只读内存中。

无论哪种方式，修改 const 值都会产生“未定义的行为”。我们很幸运，你没有用你愚蠢的游戏毁灭世界。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T11:13:13.203

您正在尝试写入一个未定义的行为的常量变量（是的，这个名字很矛盾，但我离题了）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T11:15:01.890

你正在抛弃 const。这给了你错误的价值，这是未定义的行为。它应该是

```
int e = 2;
int* p = (int *)&e;
*p = 4; 
```

或者

```
const int e = 2;
const int* p = (const int *)&e;
*p = 4; 
```

后一个会在您写入 const 时给您编译错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T13:30:46.553

定义变量：

```
 const int e = 2; 
```

指令 const 告诉 c/c++ 编译器检查 e 变量的 L 值，编译器会阻止你的代码为 e 分配新值。

```
int* p = (int *)&e; 
```

p is a pointer (also int 4 bytes), can be assigned any value , p = (((int *) e ) -2)+2\. The compiler no need to check *p whether *p is constant. I think that is a flexible of c/c++ languages, the better way is avoiding pointer.

# facebook - 获取图形对象的大图

> ID：12036563
> 
> 赞同：1
> 
> 时间：2012-08-20T11:07:27.580
> 
> 标签：facebook, facebook-graph-api

我可以获得图形对象的大图吗？

例子：

```
//take id,name,picture,description from pages, that I like:

http://graph.facebook.com/me/likes?fields=id,name,picture,description&access_token=[token] 
```

但是如何在一个查询中获得所有这些页面的**大图呢？**这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:11:29.553

好的，基本上，您根本不需要请求图像。一旦你有了`object_id`，并且你想显示一张大图，你所要做的就是使用这个 URL -

```
https://graph.facebook.com/OBJECT_ID/picture?type=large 
```

我不再存储任何个人资料图片 URL，我所要做的就是知道 user/page_id 并且我可以通过它访问个人资料图片`object_id`。

对于一个`<img>`元素，只需将 URL 放在`src`属性中 -

```
<img src="https://graph.facebook.com/OBJECT_ID/picture?type=large" /> 
```

# iis-7 - 嵌套的 ServiceStack 站点和路由

> ID：12036569
> 
> 赞同：1
> 
> 时间：2012-08-20T11:07:56.773
> 
> 标签：iis-7, iis-express, servicestack

我的团队正在构建大量服务，并且自动生成的元数据变得有点难以管理。为了解决这个问题，我创建了一个项目作为根的嵌套站点（或子站点）。这在我的本地 IIS 上运行良好，但似乎不适用于基于服务器的 IIS。是否可以获取如下 URL：

```
 - http://server/WebServices  [Root Project]
 - http://server/WebServices/Project1  [Sub Project 1]
 - http://server/WebServices/Project2  [Sub Project 2] 
```

我知道使用 AppHost 中的路由可以获得这种效果，但是生成的元数据开始变得庞大，因为它们都在一个站点中。我想要的是能够在单独的项目中管理单独的服务，并让它们以类似于上面的层次结构出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:02:53.637

查看[Routes.AddFromAssembly()](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/ServiceRoutesExtensions.cs#L26)扩展方法的实现，该方法通过所有服务注册具有以下约定的路由：

```
/{requestDto}
/{requestDto}/{Id} 
```

在每个已实现的 HTTP 动词上。

您应该能够使用类似的方法来实现自己的约定。

# c++ - 指向非静态方法的指针的 C++ 用处

> ID：12036581
> 
> 赞同：1
> 
> 时间：2012-08-20T11:08:59.083
> 
> 标签：c++, design-patterns, idioms

正如我所理解的指向非静态方法的指针，它们并不比为某个方法提供别名机制更有用。例如，拥有一个具有三个方法的对象

```
 class Provider
 {
 public:
 int A(int in);
 int B(int in);
 int C(int in);
 } 
```

以及需要指向提供者方法（无论是 A、B 还是 C）的指针的消费者。有了一个*控制器*，它向所谓的消费者提供了 3 种方法之一的指针，我们可以在消费者代码中编写一些内容，使用 Provider 实例和指向 A、B 或 C 的指针，具体取决于控制器发送的内容.

如果这就是 C++ 中指向非静态方法的指针所能做的全部事情，是否还有一种方法可以为对象的方法提供更“智能”的指针，而无需将对象与该方法指针一起发送给消费者？在肯定的情况下，成语/机制是什么（即使是模拟这种情况的方法也可以作为我感兴趣的答案）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T11:37:51.783

您对成员函数指针的概念通常是正确的。

成员函数指针实际上对于与诸如[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)或等辅助函数的连词非常有用[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)。原始成员函数指针通常很难看。

至于你的例子，

您的消费者可以接受`std::function<return_type(args)>`并且您可以将对象及其成员函数的绑定传递给此类消费者。

此类结构`std::bind`还允许实现部分特化和[柯里](https://en.wikipedia.org/wiki/Currying)化等概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:21:41.923

“指向成员函数的指针”的全部意义在于您可以在任何对象（正确类的）上调用命名方法。所以，不，没有办法“隐藏”指针内的对象引用。

你总是可以为这样的东西编写自己的包装器；这就是 C++ 的各种回调机制为您手头的应用程序提供更方便的 API 所做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T11:50:06.293

您不必将指向对象的指针与要调用的方法的指针粘合在一起，您可以随时提供指向实例的指针，即：

```
class CClass {
public:
    void func(int a) {}
};

///
std::function<void(CClass&, int)> call_func = &CClass::func;

///
CClass cls1;
CClass cls2;
call_func(cls1, 1);
call_func(cls2, 2); 
```

# facebook-graph-api - 如何使用应用程序访问令牌检索所有用户字段？

> ID：12036588
> 
> 赞同：4
> 
> 时间：2012-08-20T11:09:33.497
> 
> 标签：facebook-graph-api, access-token

根据 Facebook 的 Using App Access Token 文档，

虽然应用访问令牌主要用于代表用户将信息发布回 Facebook，但使用应用访问令牌可以从 Facebook 检索的信息集有限。

*   用户的基本个人资料信息（ID、姓名、用户名、性别）

*   用户的朋友和他们的 ID

*   用户授予您的应用程序的权限

参考：developers.facebook.com/docs/opengraph/using-app-tokens/

但我无法通过应用程序 access_token 获取大部分字段。我向 ID 为 UID1 的用户提供所有用户和朋友的权限和扩展权限

检查为：[https ://graph.facebook.com/UID1/permissions?access_token=APP_ACCESS_TOKEN](https://graph.facebook.com/UID1/permissions?access_token=APP_ACCESS_TOKEN)

我得到了：（ 1 表示已授予权限，0 表示未授予权限。）

```
{

   "data": [
  {
     "installed": 1,
     "read_stream": 1,
     "manage_friendlists": 1,
     "read_mailbox": 1,
     "publish_checkins": 1,
     "status_update": 1,
     "photo_upload": 1,
     "video_upload": 1,
     "create_event": 1,
     "rsvp_event": 1,
     "email": 1,
     "xmpp_login": 1,
     "create_note": 1,
     "share_item": 1,
     "publish_stream": 1,
     "ads_management": 1,
     "read_insights": 1,
     "read_requests": 1,
     "manage_notifications": 1,
     "read_friendlists": 1,
     "publish_actions": 1,
     "user_birthday": 1,
     "user_religion_politics": 1,
     "user_relationships": 1,
     "user_relationship_details": 1,
     "user_location": 1,
     "user_likes": 1,
     "user_activities": 1,
     "user_interests": 1,
     "user_education_history": 1,
     "user_online_presence": 1,
     "user_groups": 1,
     "user_events": 1,
     "user_photos": 1,
     "user_notes": 1,
     "user_questions": 1,
     "user_about_me": 1,
     "user_status": 1,
     "friends_birthday": 1,
     "friends_religion_politics": 1,
     "friends_relationships": 1,
     "friends_relationship_details": 1,
     "friends_location": 1,
     "friends_likes": 1,
     "friends_activities": 1,
     "friends_interests": 1,
     "friends_education_history": 1,
     "friends_online_presence": 1,
     "friends_groups": 1,
     "friends_events": 1,
     "friends_photos": 1,
     "friends_notes": 1,
     "friends_questions": 1,
     "friends_about_me": 1,
     "friends_status": 1
  }
   ]
} 
```

然后我使用 APP_ACCESS_TOKEN 对以下 URL 进行 API 调用，以检索所有可能的信息 [https://graph.facebook.com/UID1?fields=id,name,picture,gender,locale,languages,link,username,third_party_id,installed,时区、更新时间、已验证、生物、生日、封面、货币、教育、电子邮件、家乡、兴趣、位置、政治、宗教、网站、工作、关系_状态&access_token=APP_ACCESS_TOKEN](https://graph.facebook.com/UID1?fields=id,name,picture,gender,locale,languages,link,username,third_party_id,installed,timezone,updated_time,verified,bio,birthday,cover,currency,education,email,hometown,interested_in,location,political,religion,website,work,relationship_status&access_token=APP_ACCESS_TOKEN)

结果，我只得到了 { id、name、gender、locale、username、third_party_id、installed、cover、email 和 picture }。

我能从中得到

```
{ id, name, gender, locale, username, cover and picture } without any access_token. 
```

但 Facebook 服务器根本没有向我发送所有其他字段

```
{ location, birthday, relationship_status,languages,link,updated_time,bio,education,hometown,political,religion,work } 
```

哪个用户已授权该应用程序。现在 app_access_token 工作正常（我希望如此），这就是为什么我能够得到

```
 { email, installed and third_party_id } 
```

但如何获得休息场。请帮助我。

# c# - 在 WebBrowser 控件中调试 HTML

> ID：12036592
> 
> 赞同：8
> 
> 时间：2012-08-20T11:09:47.613
> 
> 标签：c#, javascript, .net, html, visual-studio-2010

我需要在 Winforms 项目中嵌入 HTML 并从中调用 Javascript 函数。我在 ac# 项目中使用 webBrowser 控件并调用：

```
webBrowser.Navigate("website");
return webBrowser.Document.InvokeScript("myMethod", new object[]{"test"}); 
```

当调试器位于“myMethod”中时，如何调试代码的执行？

有这篇关于如何从 IE 调试 HTML 的文章：http: [//www.codeproject.com/Articles/18921/Using-Visual-Studio-to-Debug-JavaScript-in-IE](http://www.codeproject.com/Articles/18921/Using-Visual-Studio-to-Debug-JavaScript-in-IE)

我不知道它有多相关。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-20T12:07:30.640

在您网站的“myMethod”函数中添加以下“调试器”行 -\

```
function myMethod(arg1, arg2)
{
    // when myMethod executes you will get prompt that with which 
     // debugger you want to execute
    // then from prompt select "New Instance of Visual Studio 2xxx"
    debugger; 

    //
    ...
    ...
} 
```

“debugger”语句将提示调试 JavaScript。

当 myMethod 执行时，您将收到提示，您要使用哪个调试器执行，然后从提示中选择“Visual Studio 2xxx 的新实例”

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-09T17:28:44.400

除了 Parag 提到的方法之外，您还可以在 Visual Studio 中显式附加调试器并选择**Attach to: Script code**。

[![在此处输入图像描述](../Images/3e87be2c1efbd84cb6055ab8724fd4e6.png)](https://i.stack.imgur.com/iC2GQ.png)

完成后，您将获得所有打开的脚本以在 Visual Studio 中显示为**脚本文档**，并且您可以在任何这些脚本中设置断点。您可以为多个调试会话重用同一个实例。您还可以打开 JavaScript 控制台和 DOM Explorer，让您可以访问与完整 Internet Explorer 相同的工具。

[![在此处输入图像描述](../Images/bcbb1ce4b54a3587c34427080af01788.png)](https://i.stack.imgur.com/MMXgK.png)

此处的博客文章中的更多详细信息：[https ://weblog.west-wind.com/posts/2017/Jul/06/JavaScript-Debugging-in-a-Web-Browser-Control-with-Visual-Studio](https://weblog.west-wind.com/posts/2017/Jul/06/JavaScript-Debugging-in-a-Web-Browser-Control-with-Visual-Studio)

> 注意：Visual Studio 2019 使脚本调试更难设置，不幸的是不再支持控制台视图/评估窗口。您仍然可以单步调试和调试值，但无法进行实时评估或查看`console.log`输出。

# javascript - 用“内容”替换“带有内容的 HTML 标记”

> ID：12036594
> 
> 赞同：-2
> 
> 时间：2012-08-20T11:09:54.817
> 
> 标签：javascript, jquery

我需要更换

```
<span class='foo'>bar</span> 
```

和

```
bar 
```

使用 JavaScript / jQuery。

注意：标签内容必须完全插入到标签所在的相同位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:13:18.160

使用 jQuery，您可以使用[`replaceWith`](http://api.jquery.com/replaceWith/)以下方法：

```
$(".foo").replaceWith(function() {
    return $(this).contents();
});​ 
```

**演示：http:** [//jsfiddle.net/wwAu4/](http://jsfiddle.net/wwAu4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T11:34:36.983

一种普通的 JavaScript 方法如下：

```
function textUnwrap(el) {
    if (!el) {
        return false;
    }
    else {
        var text = el.textContent || el.innerText,
            textnode = document.createTextNode(text);
        el.parentNode.insertBefore(textnode, el.nextSibling);
        el.parentNode.removeChild(el);
    }
}

var spans = document.getElementsByTagName('span');

for (var i=0, len=spans.length; i<len; i++){
    if (spans[i].className.indexOf('foo') !== -1) {
        textUnwrap(spans[i]);
    }
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/8QFKh/)。

**编辑**了函数以缓存`el.parentNode`（因为我使用了两次）：

```
function textUnwrap(el) {
    if (!el) {
        return false;
    }
    else {
        var text = el.textContent || el.innerText,
            textnode = document.createTextNode(text),
            parent = el.parentNode;
        parent.insertBefore(textnode, el.nextSibling);
        parent.removeChild(el);
    }
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/8QFKh/1/)。

此外，再次更新函数，使用`replaceChild()`而不是`insertBefore()`and `removeChild()`：

```
function textUnwrap(el) {
    if (!el) {
        return false;
    }
    else {
        var text = el.textContent || el.innerText,
            textnode = document.createTextNode(text),
            parent = el.parentNode;
        parent.replaceChild(textnode, el);
    }
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/8QFKh/2/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:16:21.780

```
 var $foo = $(".foo").first();
 $foo.replaceWith($foo.contents()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T11:17:44.937

在我看来，您似乎还没有真正尝试过任何事情，但这应该可以帮助您入门：

```
var theElement = document.getElementById('foobar');// or: $('#foobar')[0]
theElement.parentNode.innerHTML = theElement.parentNode.innerHTML.replace(theElement.outerHTML, theElement.innerText);//<- done
//or:
theElement.parent.html(theElement.parent.html().replace(theElement[0].outerHTML,theElement.contents()); 
```

后者仅是 jQuery。可能有更干净的 jQ 方式，但我还是更喜欢纯 JS，所以我的重点是无工具包的方式

顺便说一句：如果您使用 jQuery，则使用 JavaScript（jQuery *IS* JavaScript）

# python - Python Pulp 将两个变量相乘

> ID：12036595
> 
> 赞同：0
> 
> 时间：2012-08-20T11:09:58.770
> 
> 标签：python, optimization

我想`f(x,y,z) = x*y*z`通过一些约束`x<=20 + y`和`y < z+2`使用 Pulp 来最小化以下简单功能。有没有人知道如何做到这一点？

尝试时我总是得到

```
TypeError: Non-constant expressions cannot be multiplied 
```

任何帮助将不胜感激。请在下面找到下面的代码

```
 from pulp import *

            #pulp.pulpTestAll()
            prob = LpProblem("Profit", LpMinimize)

            # Variables
            x = LpVariable.dicts("x",[0,1,2],0 ,100)

            def fun(x):
                return x[0]*x[1]*x[2]

            # Objective
            opt=fun(x)
            prob += opt

            # Constraints
            prob += x[0]   <= 20
            prob += x[1]   <= x[2]+2

            #print prob
            print prob        
            status=prob.solve()
            print "Status: %s" %LpStatus[status]

            #Solution
            for v in prob.variables():
                print v.name, "=", v.varValue

            print "Optimum =", value(prob.objective) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:30:16.273

我认为纸浆可能只解决线性程序。

在您的情况下，您有一个三次的目标函数（因此是非线性的），因为您有 3 个变量之间的乘积。

这就是 PuLP 引发此错误的原因。

# php - 生成pdf并使用mpdf嵌入页面

> ID：12036597
> 
> 赞同：0
> 
> 时间：2012-08-20T11:10:04.320
> 
> 标签：php, codeigniter, pdf-generation, mpdf

我正在使用[mPdf](http://www.mpdf1.com/mpdf/)生成一个 pdf，它工作得很好。

```
function generate_pdf()
{
    $bom =$_POST["bom_contents"];
    $html = $this->load->view("public/print",array($bom),TRUE); //returns the html
    $this->load->library("mpdf");//loading the library
    $this->mpdf->WriteHTML($html); //setting the html content to generate
    $this->mpdf->Output(); //send to browser
} 
```

我的html如下：

```
<div>
    <embed  id="doc" class="doc" src="what_i_put_here ?"></embed>
</div> 
```

如何设置嵌入元素的 src 属性，因为 mPdf 将内容直接发送到浏览器，而且我正在使用 POST 数据，因此我无法通过 URL 访问它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:19:01.310

将您的`generate_pdf()`函数放在另一个文件中，例如 pdf_generator.php。然后将该文件设置为源：

```
<div>
    <embed  id="doc" class="doc" src="pdf_generator.php<?=$_POST["bom_contents"];?>"></embed>
</div> 
```

更新功能：

```
function generate_pdf()
{
    $bom =$_GET["bom_contents"];
    $html = $this->load->view("public/print",array($bom),TRUE); //returns the html
    $this->load->library("mpdf");//loading the library
    $this->mpdf->WriteHTML($html); //setting the html content to generate
    $this->mpdf->Output(); //send to browser
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:42:14.403

我设法让它工作。

当我点击预览按钮时，它会显示一个通知，告诉`Please wait generating pdf...`我，我也做了一个 ajax 请求。

我使用 ajax 请求生成了一个文件，在创建文件之后我打开了一个弹出窗口，以便我可以使用`src`嵌入的属性。

# c# - TextBlock 不会更新

> ID：12036600
> 
> 赞同：2
> 
> 时间：2012-08-20T11:10:32.080
> 
> 标签：c#, wpf, multithreading, textblock

我有一个名为“findListText”的文本块。在这里，我正在更新其中的文本：

```
private void InstantSearch(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Return)
    {
        HitEnter = true;
    }
    findListText.Text = "Processing request. Please wait...";
    Find(bool.Parse("False" as string));
} 
```

但是，下一组代码是一个搜索功能，可能需要长达 10 秒的时间，并且在它结束时，它会再次更改 findListText 中的文本。

```
private void Find(bool? bForward = true)
{
    {
        //Lots and lots of code
    }
    findListText.Text = "Search completed."
} 
```

问题是，文本块似乎永远不会更新为“正在处理请求。请稍候......”。文本块处于原始状态，10 秒后更新为“搜索完成。”，似乎跳过了中间人。

我正在使用 C# - WPF。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:14:52.800

Doesn't matter what technology I think.

The code is running on the same thread, meaning the the UI won't be updated untill all the code on that thread is completed. You should address a different thread to update that textblock.

In that case, you will have 2 thread:

*   The origininal thread, executing the "lots and lots of code"
*   The second (extra) created thread, which will handle updating the textblock's text while the other thread is executing the other code.

I've created [a little something](https://www.dropbox.com/s/57yzv0vhnyujnk3/Threading.zip?m) that should resolve your problem, it's based on [this](https://stackoverflow.com/questions/4205502/wpf-not-updating-textbox-while-in-progress) Stack Overflow page

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:15:39.300

You should look into the UI threading concept of WPF. Invoke the `Dispatcher` to modify the textbox. Also the search should run with `ThreadPool.QueueWorkerItem`.

```
// Start worker thread
ThreadPool.QueueUserWorkItem(state =>
{
    // Long running logic here
   findListText.Dispatcher.BeginInvoke(() => findListText.Text = "Processing request. Please wait...");
   Find(bool.Parse("False" as string)); 

    // Tip: Run change on GUI thread from the worker using the dispatcher
    findListText.Dispatcher.BeginInvoke(() => findListText.Text = "Search completed.");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T11:17:23.603

Since this is WPF, try the following: after changing the text to "Processgin", call:

```
Application.Current.Dispatcher.Invoke(DispatcherPriority.Background, new Action(delegate { this.UpdateLayout(); })); 
```

This will tell the thread to update the UI as soon as possible.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T11:25:35.107

以下是如何在自己的线程中运行 find 方法。

```
private void InstantSearch(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Return)
    {
        HitEnter = true;
    }
    findListText.Text = "Processing request. Please wait...";
    BackgroundWorker tempWorker = new BackgroundWorker();
    tempWorker.DoWork += delegate
    {
       Find(bool.Parse("False" as string));
    };
    tempWorker.RunWorkerAsync();
} 
```

如果你尝试这样做，你会得到一个错误，因为你从后台线程访问你的 UI 线程。因此，您还需要更新您的 find 方法。

```
private void Find(bool? bForward = true)
{
   {
       //Lots and lots of code
   }
   Dispatcher.BeginInvoke((Action) delegate {
      findListText.Text = "Search completed."
   });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T11:30:23.297

我刚刚回到这个问题，并在互联网上再次浏览了类似的问题。对于像在长时间运行的进程发生之前推送一条消息这样简单的事情，我很惊讶没有人建议“Application.DoEvents();”。是的，我知道它有缺陷，我的 UI 仍然会挂起，但这至少非常适合我的情况。

# java - 是否可以在 Spring 中提交包含现有实体的表单？如果是，如何？

> ID：12036603
> 
> 赞同：1
> 
> 时间：2012-08-20T11:10:33.940
> 
> 标签：java, spring, form-submit

这是jsp：

```
<c:if test="${!empty USERS}">
    <form:form method="post" action="requestForFriends.html" commandName="user">
        <form:select path="userName">
            <c:forEach items="${USERS}" var="user">
                <form:option value="${user.userName}"></form:option>
            </c:forEach>
        </form:select>

        <input type="submit" value="Send freindship request" />
    </form:form>
</c:if> 
```

这是控制器的相关部分：

```
@RequestMapping("/toAddFriend")
public ModelAndView toAddNewFriend() {
    Map<String, Object> model = new HashMap<String, Object>();
    model.put("USERS", userService.getUsers());
    ModelAndView ret=new ModelAndView("addFriend", model);
    ret.addObject("user", new User());

    return ret;
} 
```

如果我执行上面的代码，那么当我提交表单时将创建一个全新的用户对象。但是，当我单击“提交”时，**我想获得一个 ALREADY EXISTING User instance**，这些实例明确存在于此处：

```
<c:forEach items="${USERS}" var="user">
    <form:option value="${user.userName}"></form:option> 
```

如何修改我的代码以获取现有对象？
实际上，我知道一种获取现有实例的丑陋方法。通过提交表单，我可以创建一个新的用户实例，其用户名与我正在寻找的用户名相同。然后在 DaoImpl 类中，我可以查询与新创建的用户共享用户名的“旧”用户。但我想这是相当浪费和丑陋的，所以我不敢相信没有更好的方法。

**更新**

```
 <!-- language: lang-java -->

 @RequestMapping(value = "/requestForFriends", method = RequestMethod.POST)
        public ModelAndView requestNewFriend(@ModelAttribute("user") User user, BindingResult result) {
            System.out.println(user.getUserName());
                System.out.println(user.getEmail());
                Map<String, Object> model = new HashMap<String, Object>();
                model.put("USERS", userService.getUsers());
                ModelAndView ret=new ModelAndView("addFriend", model);
                ret.addObject("user", new User());

                return ret;

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:31:25.893

```
 @ModelAttribute
    public void fillUsers(Model model) {
        model.addAttribute("USERS", userService.getUsers());
    }

    @ModelAttribute
    public void getUser(@RequestParam(required = false) String userName, Model model) {
        User user = null;
        if (userName != null) {
            user = userService.getUserByName(userName);
        }
        if (user == null) {
            user = new User();
        }
        model.addAttribute("user", user);
    }

    @RequestMapping("/toAddFriend")
    public String toAddNewFriend() {
        return "addFriend";

    }

    @RequestMapping(value = "/requestForFriends", method = RequestMethod.POST)
    public String requestNewFriend(@ModelAttribute("user") User user) {
        System.out.println(user.getUserName());
        System.out.println(user.getEmail());
        return "addFriend";

    } 
```

# java - 如何使用线程在java中暂停执行

> ID：12036604
> 
> 赞同：0
> 
> 时间：2012-08-20T11:10:38.740
> 
> 标签：java, multithreading, swing

我以编程方式创建了一个向导。它包含 3 个面板。第二个是devicePane，第三个是detailsPane。第三个面板由一个进度条组成。我希望我的程序`process()`在显示第三个面板后启动一个功能？可以使用线程吗？

```
else if(ParserMainDlg.this.POSITION==1){
    if(sqlConnectionPane.executeProcess()==true){    
        devicePane.setDeviceList();                             
         ParserMainDlg.this.POSITION++;
         fireStateChanged(oldValue);
    }
}
else if(ParserMainDlg.this.POSITION==2){
    System.out.println("position:"+ParserMainDlg.this.POSITION);
    if(devicePane.executeProcess()==true){
         ParserMainDlg.this.POSITION++;
         fireStateChanged(oldValue);    
    } 
```

我想`sqlConnectionPane.executeProcess()`调用一个在显示 devicePane 面板后开始执行的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:13:22.103

您可以明确地使用线程来执行您的任务，这是处理长时间运行任务的首选方式。

您在这里有多种选择。所有选项都包括对您的向导进行回调，以更新进度条。

您可以创建自己的任务类来完全做到这一点，或者您可以使用现有的[SwingWorker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)。“SwingWorker 本身是一个抽象类；您必须定义一个子类才能创建 SwingWorker 对象；匿名内部类通常对于创建非常简单的 SwingWorker 对象很有用。”

使用我们刚刚了解的 swing worker 可以使用如下内容：

```
SwingWorker<Integer, Integer> backgroundWork = new SwingWorker<Integer, Integer>() {

        @Override
        protected final Integer doInBackground() throws Exception {
            for (int i = 0; i < 61; i++) {
                Thread.sleep(1000);
                this.publish(i);
            }

            return 60;
        }

        @Override
        protected final void process(final List<Integer> chunks) {
            progressBar.setValue(chunks.get(0));
        }

    };

    backgroundWork.execute(); 
```

请注意，您必须将任务分解为更小的部分才能真正显示进度。

# jquery - jQuery .html() 或 .text() 不工作

> ID：12036606
> 
> 赞同：0
> 
> 时间：2012-08-20T11:10:41.220
> 
> 标签：jquery, jquery-selectors

我在 Joomla 中有一个页面，表单可以动态加载（来自模块）。我已经清空了这个表单的内部 HTML 内容并插入了我自己的内容来自定义我的表单。

在清空原始表单的内容之前，我已经将表单元素放在了它们自己的变量中：

```
var element1 = $('#e1').val();
var element2 = $('#e2').val(); 
```

在上面几行之后，我清空了表单的内容并加载了新元素：

```
$('.originalform').empty();
$('.originalform').load("Location of my new file"); 
```

最后，我在自定义元素中插入了之前存储的元素：

```
$('#newDiv').text(element1); // newDiv is a div element whose innerHTML should be element1 
```

但是，newDiv 元素未按预期显示任何值。

自从它被修改后，它与 DOM 结构有关吗？请协助。

来吧，伙计们。HTML 代码：

```
<script>

                    var fname=$('#firstname').val();
                    var lname=$('#lastname').val();
                    var email123=$('#email').val();
                    var cname=$('#cb_companyname').val();
                    var city=$('#cb_city').val();
                    var bphone=$('#cb_businessphone').val();
                    var hphone=$('#cb_homephone').val();
                    var addr=$('#cb_address').val()+"\n"+city;
                    var postal=$('#cb_postalcode').val();
                    var mphone=$('#cb_mobilephone').val();
                    var altemail=$('#cb_alternateemail').val();
                    var country=$('#cb_country').val();
                    var name=fname+" "+lname; 
                    $('.cb_template_default').empty();//I empty a div that is within the form and load another content which is language dependant:
                    <?php if ($lang->getTag()=="en-GB") {?>
                    $('.cb_template_default').load('<?php echo JURI::base(); ?>templates/calderoni/edit-profile.php');
                    <?php } else { ?>
                    $('.cb_template_default').load('<?php echo JURI::base(); ?>templates/calderoni/edit-profile-it.php');

                //The new elements have new values inserted here.                   
                $(".newemail").text(email);
                $(".newname").text(name);
                $(".altemail").text(altemail);
                $(".bphone").text(bphone);
                $('.name').text(name);
                $('.altemail').text(altemail);
                $('.bphone').text(bphone);
                $('.hphone').text(hphone);
                $('.mphone').text(mphone);
                $('.cname').text(cname);

                $('.newaddr').text(addr);
                $('.postal').text(postal);
                $('.country').text(country); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:14:02.343

替换这些..

```
var element1 = $('e1').html();
var element2 = $('e2').html();
$('#newDiv').html(element1); 
```

**编辑**

```
var element1 = $('#e1').html();
var element2 = $('#e2').html();
$('#newDiv').html(element1); 
```

**编辑 2**

```
$('.originalform').load("Location of my new file");// populate form first
var element1 = $('#e1').val();// take value out
var element2 = $('#e2').val();
$('.originalform').empty();// and then empty
('#newDiv').text(element1); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-20T11:25:42.990

您需要`#`在选择器中包含以按 id 查询元素。所以：

```
var element1 = $('#e1').val(); 
var element2 = $('#e2').val(); 
```

# java - 使用 Maven 在可运行的 .jar 中捆绑原生依赖项

> ID：12036607
> 
> 赞同：19
> 
> 时间：2012-08-20T11:10:44.860
> 
> 标签：java, maven, deployment, jar, native

我有一个在 Maven 中管理的项目，它有一些**本机依赖**项（[LWJGL](http://www.lwjgl.org/)）。

在开发中一切正常，但现在我想设置 Maven，以便它构建一个可运行的 .jar 文件，我可以重新分发。特别是，我希望用户可以非常轻松地运行应用程序，而不必弄乱库路径或解压缩本机库等。

目前我能够构建一个包含所有依赖项的 .jar 文件，但是如果我运行它（不出所料），我会收到一个不满意的链接错误：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no lwjgl in java.libr
ary.path
        at java.lang.ClassLoader.loadLibrary(Unknown Source)
        at java.lang.Runtime.loadLibrary0(Unknown Source)
        at java.lang.System.loadLibrary(Unknown Source)
        at org.lwjgl.Sys$1.run(Sys.java:73)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.lwjgl.Sys.doLoadLibrary(Sys.java:66)
        at org.lwjgl.Sys.loadLibrary(Sys.java:95)
        at org.lwjgl.Sys.<clinit>(Sys.java:112)
        at org.lwjgl.opengl.Display.<clinit>(Display.java:132)
        at glaze.TestApp.start(TestApp.java:10)
        at glaze.TestApp.main(TestApp.java:31) 
```

显然，我可以通过手动安装本机库并运行 jar 来使其工作，`java -Djava.library.path=/path/to/libs`但这不是我可以期望我的用户做的事情。

这是 pom.xml 以防万一：[https ://github.com/mikera/glaze/blob/master/pom.xml](https://github.com/mikera/glaze/blob/master/pom.xml)

是否可以设置 Maven，使其创建一个包含本机依赖项的可运行 .jar，并在双击时成功运行？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-20T15:12:19.517

这是我用来加载`dll`或`so`捆绑在 jar 中的库的一些代码。

库必须作为资源添加。我们使用 maven 并将它们放在这个层次结构中：

```
src/main/resources/lib/win-x86/<dlls for 32-bit windows>
src/main/resources/lib/linux-x86/<so for 32-bit linux>
src/main/resources/lib/linux-x86_64/<so for 64-bit linux>
src/main/resources/lib/linux-ia64/<so for 64-bit linux on itanium> 
```

共享库将被解压到平台的 tmp 目录，并且在解压时也有一个临时名称。这是为了让多个进程加载 dll/so 而不共享实际提取的 dll/so，因为如果具有相同的名称，解包可能会覆盖现有的（在替换文件时在某些平台上会出现非常奇怪的行为）。

该文件也设置为已`deleteOnExit`设置，但在 Windows AFAIK 上不起作用。

`NativeLoader.java`

```
public class NativeLoader {

    public static final Logger LOG = Logger.getLogger(NativeLoader.class);

    public NativeLoader() {
    }

    public void loadLibrary(String library) {
        try {
            System.load(saveLibrary(library));
        } catch (IOException e) {
            LOG.warn("Could not find library " + library +
                    " as resource, trying fallback lookup through System.loadLibrary");
            System.loadLibrary(library);
        }
    }

    private String getOSSpecificLibraryName(String library, boolean includePath) {
        String osArch = System.getProperty("os.arch");
        String osName = System.getProperty("os.name").toLowerCase();
        String name;
        String path;

        if (osName.startsWith("win")) {
            if (osArch.equalsIgnoreCase("x86")) {
                name = library + ".dll";
                path = "win-x86/";
            } else {
                throw new UnsupportedOperationException("Platform " + osName + ":" + osArch + " not supported");
            }
        } else if (osName.startsWith("linux")) {
            if (osArch.equalsIgnoreCase("amd64")) {
                name = "lib" + library + ".so";
                path = "linux-x86_64/";
            } else if (osArch.equalsIgnoreCase("ia64")) {
                name = "lib" + library + ".so";
                path = "linux-ia64/";
            } else if (osArch.equalsIgnoreCase("i386")) {
                name = "lib" + library + ".so";
                path = "linux-x86/";
            } else {
                throw new UnsupportedOperationException("Platform " + osName + ":" + osArch + " not supported");
            }
        } else {
            throw new UnsupportedOperationException("Platform " + osName + ":" + osArch + " not supported");
        }

        return includePath ? path + name : name;
    }

    private String saveLibrary(String library) throws IOException {
        InputStream in = null;
        OutputStream out = null;

        try {
            String libraryName = getOSSpecificLibraryName(library, true);
            in = this.getClass().getClassLoader().getResourceAsStream("lib/" + libraryName);
            String tmpDirName = System.getProperty("java.io.tmpdir");
            File tmpDir = new File(tmpDirName);
            if (!tmpDir.exists()) {
                tmpDir.mkdir();
            }
            File file = File.createTempFile(library + "-", ".tmp", tmpDir);
            // Clean up the file when exiting
            file.deleteOnExit();
            out = new FileOutputStream(file);

            int cnt;
            byte buf[] = new byte[16 * 1024];
            // copy until done.
            while ((cnt = in.read(buf)) >= 1) {
                out.write(buf, 0, cnt);
            }
            LOG.info("Saved libfile: " + file.getAbsoluteFile());
            return file.getAbsolutePath();
        } finally {
            if (in != null) {
                try {
                    in.close();
                } catch (IOException ignore) {
                }
            }
            if (out != null) {
                try {
                    out.close();
                } catch (IOException ignore) {
                }
            }
        }
    }
} 
```

这些库是通过创建一个实例来加载的`NativeLoader`，然后在`loadLibrary("thelibrary")`没有特定于操作系统的前缀和扩展的情况下调用。

这对我们来说效果很好，但您必须手动将共享库添加到不同的资源目录，然后构建 jar。

我意识到这个类中的一些代码可能很奇怪或过时，但请记住这是我几年前编写的代码，它运行得非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:34:14.643

您是否尝试使用`maven-assembly-plugin`这里是一个示例：

```
<build>
   <plugins>
      <plugin>
         <artifactId>maven-assembly-plugin</artifactId>
         <configuration>
         <archive>
             <manifest>
                <mainClass>your.main.Class</mainClass>
             </manifest>
         </archive>
         <descriptorRefs>
             <descriptorRef>jar-with-dependencies</descriptorRef>
         </descriptorRefs>
         </configuration>
       </plugin>
   </plugins>
</build> 
```

对于您的本机依赖项，​​您可能希望`Bundle-NativeCode`在清单文件中使用。请参阅[http://wiki.osgi.org/wiki/Bundle-NativeCode](http://wiki.osgi.org/wiki/Bundle-NativeCode)。

您可能还想看看`maven-bundle-plugin`： http: [//felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)以使用 Maven 生成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-23T12:59:20.857

`pom.xml`这是您使用您提到的所需运行参数运行构建所需的插件：

```
 <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <version>1.6.0</version>
        <configuration>
            <executable>java</executable>
            <arguments>
                <argument>-Djava.library.path=target/natives</argument>
                <argument>-classpath</argument>
                <classpath />
                <argument>my.main.package.MainClass</argument>
            </arguments>
        </configuration>
    </plugin> 
```

然后使用运行您的 LWJGL 程序

```
mvn exec:exec 
```

# php - php 横幅缓存建议

> ID：12036608
> 
> 赞同：0
> 
> 时间：2012-08-20T11:10:46.293
> 
> 标签：php, caching, banner

我们为几个高负载站点提供服务，到目前为止，我们提供了用于缓存支持一些基本本地横幅旋转的远程横幅的代码。所有人都应该很容易理解，我想从您那里听到有关此代码的可能改进或建议的内容。这里是...

```
 $cachetime = 6 * 60 * 60; // 6 hours
        $bannercache = $_SERVER['DOCUMENT_ROOT']."/banner-".$bpos.".txt";

            // Serve from the cache if it is younger than $cachetime

            if (file_exists($bannercache) && (time() - $cachetime
             < filemtime($bannercache)))
            {

                    // if it's ok don't update from remote

            } else {

                    // if cache is old, update from remote

                    $bannercachecontent = @file_get_contents('ADSERVER.com/showad.php?category='.$adcat.'&dimensions='.$dimensions);

                    if ($bannercachecontent === FALSE) {

                        // on error, just update local time, so that it's not pulled again in case of remote mysql overload

                        $fb = @fopen($bannercache, 'a+');
                        fwrite($fb, "\n<!-- Changed date on ".date('jS F Y H:i', filemtime($cachefile))."-->\n");
                        fclose($fb);

                    } else {

                        // if it's ok, save new local file

                        $fb = @fopen($bannercache, 'w');
                        fwrite($fb, $bannercachecontent);
                        fwrite($fb, "\n<!-- Cached ".date('jS F Y H:i', filemtime($cachefile))."-->\n");
                        fclose($fb);
                    }

            }

        $fhm = file_get_contents($bannercache);

        $fhmpos = strpos($fhm, '-----#####-----'); // check if it needs to be exploded for rotation
        if ($fhmpos === false) {

            echo $fhm;

        } else {

            $fhmpicks = explode("-----#####-----", $fhm);

        foreach ($fhmpicks as $fhmkey => $fhmvalue)
        {
            if (trim($fhmpicks[$fhmkey]) == '')
            {
                unset($fhmpicks[$fhmkey]);
            }
        }

            $fhmpick = array_rand($fhmpicks,1);

            echo $fhmpicks[$fhmpick]; // show only one banner

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:15:49.783

Don't let your clients update your banners. You will always have 1 user that has to do this, and that isn't necessary:

Instead: let you clients always load the local image, and run a **background process** (cron, with a manual override if you want to pull the image NOW) that fetches the right image(s).

The code would be fairly simple:

your client does: `$yourImage= $_SERVER['DOCUMENT_ROOT']."/banner-".$bpos.".txt";`

and your update-script can just `cURL` the right image.

# algorithm - 带有哈希数组的背包 DP

> ID：12036610
> 
> 赞同：2
> 
> 时间：2012-08-20T11:10:56.617
> 
> 标签：algorithm, optimization, dynamic-programming, knapsack-problem, decimal

我正在尝试使用非整数值减少 Knapsack DP 算法所需的时间和空间。

[http://en.wikipedia.org/wiki/Knapsack_problem#Meet-in-the-Middle_Algorithm](http://en.wikipedia.org/wiki/Knapsack_problem#Meet-in-the-Middle_Algorithm)

```
In particular, if the [elements] are nonnegative but not integers, we could 
still use the dynamic programming algorithm by scaling and rounding (i.e. using 
fixed-point arithmetic), but if the problem requires  fractional digits of 
precision to arrive at the correct answer, W will need to be scaled by 10^d,  
and the DP algorithm will require O(W * 10^d) space and O(nW * 10^d) time. 
```

DP 背包算法使用 [ nx W ] 矩阵，用结果填充它，但有些列永远不会被填充 - 它们不匹配对象权重的任何组合。这样，它们最终只会在每一行上填充零，只是浪费时间和空间。

如果我们使用哈希数组而不是矩阵，我们可以减少所需的时间和空间。

```
edit:
knapsack capacity = 2
items: [{weight:2,value:3} ]

   [0   1   2]
   [0   0   0] 
2: [0   0   3]
        ^
Do we need this column?

Substitution with hash:
2: {0:0, 2:3} 
```

在 Python 中，dict 插入有一个 O(n) 更坏的情况和一个 O(1) 的“摊销”线性时间。

我错过了什么吗？

背包 DP 算法的这种变化的复杂性是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:16:02.137

如果我可以这么说，您所说的是快乐的案例-您可以将很少数量的物品放入容量很大的背包中的案例。在这种情况下，hashmap 可以证明是优化触发的复杂性从`O(W * n)`到`O(min(O(2^n * n), O(W * n)))`（`2^n`是 n 个元素的组合数）。然而，通过这种估计，很明显，对于没有那么多的元素，`O(2^n * n)`将主导其他估计。另外，请注意，虽然`O(W * n)`它们属于同一类，但后一种情况下的常数要大得多（甚至更多：第二种情况下的估计考虑了摊销的复杂性，而不是最坏的情况）。

因此，您会发现，在某些情况下，哈希映射可能会更好，但在常见情况下，情况正好相反。

# vba - System.Security.Cryptography.HMACSHA1 是 Com 可见的。我应该如何调用 ComputeHash？

> ID：12036611
> 
> 赞同：0
> 
> 时间：2012-08-20T11:10:59.193
> 
> 标签：vba, ms-access

我想在 Microsoft Access 中为某些文本创建 HMAC SHA1 签名

.net 对象 System.Security.Cryptography.HMACSHA1 是可见的，所以我想我可以使用它。

我可以创建对象并设置密钥，但是当我调用计算函数来获取哈希时，我收到错误运行时错误 5“无效的过程调用或参数”

```
Public Function sign(Key As String, Message As String)
    Dim asc, enc
    Dim MessageBytes() As bytes, HashBytes() As bytes
    Set asc = CreateObject("System.Text.UTF8Encoding")
    Set enc = CreateObject("System.Security.Cryptography.HMACSHA1")
    enc.Key = asc.GetBytes_4(Key)
    MessageBytes = asc.GetBytes_4(Message)
    HashBytes = enc.ComputeHash(MessageBytes)
    sign = EncodeBase64(HashBytes)
    Set asc = Nothing
    Set enc = Nothing
End Function 
```

我从网上复制了编码位，我注意到 GetBytes 已转换为 GetBytes_4。这个名字是不是乱码？我需要做一些类似于 ComputeHash 的事情吗？如果是这样的话（我试过 _n 其中 n = 1 到 6 无济于事）。

如果不是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:26:58.343

我在这个问题中找到了我的问题的答案

[VBA中的Base64 HMAC SHA1字符串](https://stackoverflow.com/questions/10068548/base64-hmac-sha1-string-in-vba)

我以为我尝试过 enc.ComputeHash_2，但也许我没有尝试过，因为它似乎有效

# jquery - Yii，如何通过 AJAX 提交没有按钮的 CActiveForm？

> ID：12036613
> 
> 赞同：0
> 
> 时间：2012-08-20T11:11:02.577
> 
> 标签：jquery, ajax, yii, form-submit

我正在尝试制作一个包含单个 textField 的 CActiveForm 以在没有提交按钮的情况下提交，但我需要它通过 AJAX 调用操作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:44:39.237

您应该在此处替换为`CHtml::submitButton()`详细`CHtml::ajaxSumbitButton()`信息：[http ://www.yiiframework.com/doc/api/1.1/CHtml#ajaxSubmitButton-detail](http://www.yiiframework.com/doc/api/1.1/CHtml#ajaxSubmitButton-detail)

这将使用 ajax 而不是标准的表单提交来提交表单

编辑：

只需重新阅读问题并注意到“没有”按钮位...

如果您没有在单击按钮时提交表单，只需将 jQuery 附加到您要提交值的操作，您可以使用`CHtml::ajax()`帮助器：[http ://www.yiiframework.com/doc/api/1.1 /CHtml#ajax-详细信息](http://www.yiiframework.com/doc/api/1.1/CHtml#ajax-detail)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:16:13.513

如果您想通过 ajax “提交”它，您需要将点击事件绑定到您的按钮：

```
$('#myButton').click(function(){

}); 
```

然后获取表单数据以提交使用`$('#myForm').serializeArray()`，这将返回一个对象以用作`data`您的 ajax 请求中的选项。

如果你不能把它拼凑起来，你需要对 Ajax、事件和表单数据做更多的阅读。

您可以在此处阅读有关[jQuery AJAX 的信息](http://api.jquery.com/jQuery.ajax/)

**PS**：我假设使用 jQuery，因为您使用的是 Yii，您也应该使用 jQuery 标记问题。

# tinymce - 如何以编程方式显示外部工具栏

> ID：12036618
> 
> 赞同：2
> 
> 时间：2012-08-20T11:11:14.193
> 
> 标签：tinymce

我需要在初始化后以编程方式将焦点设置到编辑器实例。

该框获得焦点，您可以开始输入，但除非您在编辑器框架中单击，否则不会显示外部工具栏。

我尝试更改一些 css 设置并显示工具栏，但单击编辑器框架时它会消失。

```
var toolbar = $('#' + ed.id + '_external').hide().appendTo("#tiny_toolbar");
toolbar.show();
toolbar.css('top','50px');
toolbar.css('display','block');
$(".defaultSkin,.mceExternalToolbar").css("position","").css("z-index","1000"); 
```

有没有办法通过 js 代码模拟编辑器单击，以便正确显示工具栏？

* * *

### 更新：

不，我没有错！微小的 iframe 出现在我的文本容器左侧的不同顶部。此代码将更好地解释问题所在。

```
 <html>
    <head>

    <script type="text/javascript" src="js/lib/jquery.js"></script>
    <script type="text/javascript" src="js/lib/jquery-ui.js"></script>
    <script src="js/lib/tiny/tiny_mce.js"></script>
    <script type="text/javascript">

    function initTiny(){
    tinyMCE.init({
        language: false,
        mode: "none",
        theme: "advanced",
        dialog_type: "modal",
        theme_advanced_buttons1: ",bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
        theme_advanced_toolbar_align: "left",
        theme_advanced_statusbar_location: "none",
        theme_advanced_path: "none",
        theme_advanced_toolbar_location: "external",
        setup: function (ed) {
            ed.onInit.add(function (ed) {
                var visible = 1;
                var tout = null;
                var $toolbar = $('#' + ed.id + '_external');

                $toolbar.css('top', '50px');
                $toolbar.css('display', 'block');
                $toolbar.hide();
                $toolbar.show();

                var show = function () {
                    tout && clearTimeout(tout);
                    tout = setTimeout(function () {
                        tout = null;
                        $toolbar.css({
                            top: "50px",
                            display: 'block'
                        });
                        visible = 1;

                    }, 250);
                };

                $(ed.getWin()).bind('click', function () {
                    if (ed.isHidden()) {
                        show();
                    }
                });
            })
        }

    });
    }

    $(document).ready(function(){
        initTiny();
        $('#content3').click(function(){
            tinyMCE.execCommand("mceAddControl", false, 'content3');    
        });
        $('html').click(function(){
            tinyMCE.execCommand("mceRemoveControl", false, 'content3'); 
        });

    });

    </script>
    </head>

    <body>
        <div id="tiny_toolbar" class="defaultSkin" style="position:relative;"> toolbar  </div>
                <div id="content3" style="top:120px;left:180px;width:180px;height:200px;border:1px solid;position:absolute;">
                        <p>CONTENT 3!</p>
                </div>
    </body>
        </html> 
```

* * *

不，我没有错！微小的 iframe 出现在我的文本容器左侧的不同顶部。此代码将更好地解释问题所在。

```
 <html>
    <head>

    <script type="text/javascript" src="js/lib/jquery.js"></script>
    <script type="text/javascript" src="js/lib/jquery-ui.js"></script>
    <script src="js/lib/tiny/tiny_mce.js"></script>
    <script type="text/javascript">

    function initTiny(){
    tinyMCE.init({
        language: false,
        mode: "none",
        theme: "advanced",
        dialog_type: "modal",
        theme_advanced_buttons1: ",bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
        theme_advanced_toolbar_align: "left",
        theme_advanced_statusbar_location: "none",
        theme_advanced_path: "none",
        theme_advanced_toolbar_location: "external",
        setup: function (ed) {
            ed.onInit.add(function (ed) {
                var visible = 1;
                var tout = null;
                var $toolbar = $('#' + ed.id + '_external');

                $toolbar.css('top', '50px');
                $toolbar.css('display', 'block');
                $toolbar.hide();
                $toolbar.show();

                var show = function () {
                    tout && clearTimeout(tout);
                    tout = setTimeout(function () {
                        tout = null;
                        $toolbar.css({
                            top: "50px",
                            display: 'block'
                        });
                        visible = 1;

                    }, 250);
                };

                $(ed.getWin()).bind('click', function () {
                    if (ed.isHidden()) {
                        show();
                    }
                });
            })
        }

    });
    }

    $(document).ready(function(){
        initTiny();
        $('#content3').click(function(){
            tinyMCE.execCommand("mceAddControl", false, 'content3');    
        });
        $('html').click(function(){
            tinyMCE.execCommand("mceRemoveControl", false, 'content3'); 
        });

    });

    </script>
    </head>

    <body>
        <div id="tiny_toolbar" class="defaultSkin" style="position:relative;"> toolbar  </div>
                <div id="content3" style="top:120px;left:180px;width:180px;height:200px;border:1px solid;position:absolute;">
                        <p>CONTENT 3!</p>
                </div>
    </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T05:50:07.000

我正在使用 TinyMCE 4，我的应用程序需要一个外部工具栏。

我最初只设置了“fixed_toolbar_container”和“inline”属性，但是当我的编辑器文本区域不在焦点上时，我的工具栏不断消失。

因此，在 INIT 中，我更改了以下内容：

1.  在“INIT”中，我将“inline”设置为“true”，将“fixed_toolbar_container”设置为我的外部工具栏 div 的选择器。
2.  在“设置”功能中，我阻止了“模糊”事件的传播。

这似乎对我有用，但我不完全确定阻止模糊的默认行为是否会产生任何不利后果。如果我发现了什么，我会更新这篇文章。

希望这可以帮助。:)

```
tinyMCE.init({
            ...

            inline: true,
            fixed_toolbar_container: "div#ToolBar",

            // Set the mode & plugins
            nowrap: false,
            statusbar: true,
            browser_spellcheck: true,
            resize: true,

           ...

            setup: function (editor) {
                // Custom Blur Event to stop hiding the toolbar
                editor.on('blur', function (e) {
                   e.stopImmediatePropagation();
                   e.preventDefault();
                });
            }
        }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:08:17.130

在您的 tinymce 初始化中使用

```
 ...
   theme_advanced_toolbar_location: "external",
   setup : function(ed) {
        ed.onInit.add(function(ed, evt) {
            var $toolbar = $('#'+ed.id + '_external');
                        $toolbar.css('top','50px');
                        $toolbar.css('display','block');
                        $toolbar.hide();
                        $toolbar.show();

        });
    }); 
```

您还应该使用超时来调用以下函数（即 show() onclick）

```
 var visible = 1;
        var tout = null;

        var show = function() {
            tout && clearTimeout(tout);
            tout = setTimeout(function() {
                tout = null;
                $toolbar.css({ top : $window.scrollTop(), display : 'block' });
                visible = 1;    
            }, 250);
        };

        var hide = function() {
            if (!visible) { return; }
            visible = 0;
            $toolbar.hide();
        };

        $(ed.getWin()).bind('click', function() {
            show();
        }); 
```

# python - 在詹金斯让工作失败

> ID：12036620
> 
> 赞同：8
> 
> 时间：2012-08-20T11:11:25.890
> 
> 标签：python, jenkins

这个问题可能听起来很奇怪，但我如何让工作失败呢？

我有一个 python 脚本，它使用 scons 编译几个文件，并且作为 jenkins 作业运行。该脚本测试编译器是否可以构建 x64 或 x86 二进制文件，如果它无法执行其中之一，我希望该作业失败。

例如：如果我在 64 位系统上运行我的脚本并且它无法编译 64 位。我可以在脚本中做一些可能导致失败的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T11:17:43.010

如果您的脚本以非零状态退出，则构建应该失败。

```
import sys
sys.exit(-1) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-12T19:22:35.923

重要的是，当您的 python 脚本抛出异常或非零异常代码时，它的运行是您的 jenkins 作业的最后一步。如果您在那之后运行其他任何东西，即使 echo "my job is done" 也会更改错误代码。

对我来说，以下失败了我的詹金斯工作

> ```
> echo "exit(1)" >> test.py
> python test.py 
> ```

当我执行以下操作时，我的詹金斯工作显示为成功

> ```
> echo "exit(1)" >> test.py
> python test.py
> echo "This changes my exit code back to 0, which is successful" 
> ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T11:15:17.053

您可以随时**引发异常**。如果未处理，应用程序将停止。您甚至不需要指定要引发的异常。

```
if not yourTestHere:
    raise 
```

如果要指定消息，只需引发标准​​异常。

```
from exceptions import Exception
if not yourTestHere:
    raise Exception("Script failed because of bla bla bla") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-19T09:12:35.130

我作为菜鸟遇到了这个问题，发现如果您通过 Jenkins 中的 Windows 批处理 shell 运行 python 脚本，则接受的答案会丢失一些东西。

在这种情况下，只有在 shell 中的最后一个命令失败时，Jenkins 才会失败。因此，您的 python 命令可能会失败，但如果在它之后有另一行更改目录或其他内容，那么 Jenkins 会认为 shell 是成功的。

解决方案是在python行之后检查错误级别：

> 如果 %ERRORLEVEL% NEQ 0（退出）

如果 python 行失败，这将导致 shell 立即退出，导致 Jenkins 被标记为失败，因为 shell 上的最后一行失败。

# c# - 编译器不执行特定部分

> ID：12036629
> 
> 赞同：-9
> 
> 时间：2012-08-20T11:12:00.347
> 
> 标签：c#

```
if (radioButton1.Checked)
{
    int a;
    string s = comboBox1.SelectedItem.ToString();

    if (s == "30 Days")
    {
        a = 30;
    }                
    if (s == "60 days")
    {
        a = 60;
    }
    else
    {
        MessageBox.Show(comboBox1.SelectedItem.ToString());
    }
    view_n_cstmr v = new view_n_cstmr(a);
    v.MdiParent = this.MdiParent;
    v.Show();
} 
```

'a'(int) 的值不受此代码影响，但在 swe 中发现该组合框项目请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:21:32.250

您的代码中最大的问题（这可能让您感到困惑）是第一个`if`语句没有“连接”到下一个`if...else`语句。尝试将其更改为：

```
if {...}
else if {...}
else {...} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:23:20.863

我相信存在字符串感觉比较的问题。

尝试以下代码进行字符串不敏感比较 -

```
if (radioButton1.Checked)
{
    int a; string s = comboBox1.SelectedItem.ToString();

    if (string.Compare(s, "30 days", true) == 0) { a = 30; } 
    else if (string.Compare(s, "60 days", true) == 0) { a = 60; } 
    else 
    { 
        MessageBox.Show(comboBox1.SelectedItem.ToString()); 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:15:14.137

I think it should be

```
if (radioButton1.Checked)
{
    int a = 0;
    string s = comboBox1.SelectedItem.ToString();

    if (s == "30 Days")
        a = 30;            
    else if (s == "60 days")
        a = 60;
    else
        MessageBox.Show(comboBox1.SelectedItem.ToString());

    view_n_cstmr v = new view_n_cstmr(a);
    v.MdiParent = this.MdiParent;
    v.Show();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T11:16:55.717

```
switch (s.ToLower())
{
    case "30 days":
       a = 30;
       break;
    case "60 days":
       a = 60;
       break;
    default:           
       MessageBox.Show(comboBox1.SelectedItem.ToString());
       break;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T11:32:09.767

正如许多人指出的那样，您使用的 if else 语句没有连接。并且。`"30 Days"`在您的组合框中，您是否还有更多项目`"60 days"`？在您的 else 中，您没有设置整数 a。

这将导致编译错误：“ `Use of unassigned local variable 'a'`”

您的代码中的这一行。

```
view_n_cstmr v = new view_n_cstmr(a); 
```

也许为变量“a”分配一个默认值，或者在 else 语句中返回？

# c# - 像素化绘图和 3D 表示

> ID：12036635
> 
> 赞同：1
> 
> 时间：2012-08-20T11:12:30.830
> 
> 标签：c#, opengl

我正在编写一个模仿自然物理学的程序。我想知道是否有更好的方法来绘制对象，而不是覆盖该`OnDraw`方法，以及`FillRectangle(x,y,1,1)`每个像素。

有没有办法使用 DirectX 或 OpenGL 执行类似的操作？因为据我所知，`Graphics`不使用计算机的视频卡（如果我错了，请纠正我）。

说到这里，我想要一些关于使用数学计算来计算相对象限大小来创建 3D 环境的想法，以便对象看起来比现实更远（因为监视器只有 2D）或更近。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:36:01.490

是的。使用 FillRectangle 逐像素绘制效率非常低，并且会大大减慢速度。正如您所说，您应该使用 DirectX 或 OpenGL 等图形渲染系统。选择哪个取决于您。如果您在网络上进行简单搜索，您会发现许多关于如何开始使用 3D 图形的教程。

OpenGL 专注于“在空间中为我绘制这个对象”，它会负责渲染它，并尽可能利用您的显卡。您不必担心像素，您可以指定尺寸、摄像机角度、着色器等。

您可以使用 OpenGL 绘制像素，但这不是使用它绘制 3D 图形的“正确”方式。

编辑回应瓦萨的问题：

我相信 OpenGL 会根据您的显卡功能和驱动程序做最好的事情。一般来说，OpenGL 不会是您绘制直接像素的最佳选择。但请记住

1.  不同机器上的像素大小不同。您是否期望只忍受这个？还是在低分辨率屏幕上使用大显示器而在高分辨率屏幕上使用小显示器？可能涉及乘法。如果您使用文字像素，那么一旦您开始为不同的屏幕相乘，您就会得到伪像和不准确。

2.  您想要将 X 直接映射到像素。OpenGL 使用浮点值。它们不是整数 1 到 1 的映射，但它们确实使用直接比例。如果你选择一个比例，那么 OpenGL 不会突然开始扭曲比例。

重要的是比例而不是绝对像素。尽管我接受您的情况可能会有所不同。

看到这个二维绘图：

[http://basic4gl.wikispaces.com/2D+Drawing+in+OpenGL](http://basic4gl.wikispaces.com/2D+Drawing+in+OpenGL)

# asp.net - 无法从 loginview 获取价值

> ID：12036638
> 
> 赞同：0
> 
> 时间：2012-08-20T11:12:50.023
> 
> 标签：asp.net, c#-4.0

我正在尝试从 loginView 获取用户名值。我从这里和其他网站尝试了很多方法。有些不起作用，有些只给我在计算机上或从 AD 登录。

有谁知道，如何在网站上获取登录人的用户名？

我试过这段代码：

```
LoginName loginName = HeadLoginView.FindControl("HeadLoginName") as LoginName;
        Label1.Text = (loginName.ToString()); 
```

所以也在这里尝试了这段代码：

```
 //var Login1 = ((Login)HeadLoginView.FindControl("HeadLoginName"));

        //var Login1 = ((LoginName)HeadLoginView.FindControl("HeadLoginName"));

        //LoginName Login1 = ((LoginName)HeadLoginView.FindControl("HeadLoginName"));
        //string userName = Login1.UniqueID.ToString();

        //string Username = User.Identity.Name;
        //Label1.Text = Username;

        //LoginName Login1 = ((LoginName)HeadLoginView.FindControl("HeadLoginName"));
        //string userName = Convert.ToString(Login1);

        //Login Login1 = ((Login)HeadLoginView.FindControl("HeadLoginName"));
        //string userName = Login1.UserName.ToString();

        //var userName = ((Login)HeadLoginView.FindControl("HeadLoginName"));
        //Label1.Text = Convert.ToString(userName);

        //LoginName loginName = (LoginName)HeadLoginView.FindControl("HeadLoginName");
        //Label1.Text = Convert.ToString(loginName);

        //string merda = (HttpContext.Current.User.Identity.Name);

        //LoginName loginName = HeadLoginView.FindControl("HeadLoginName") as LoginName;
        //Label1.Text = (loginName.ToString()); 
```

但总是相同的错误，nullexeption 和 'System.Web.UI.WebControls.LoginName' ao Tipo 'System.Web.UI.WebControls.Login

但没有成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:52:40.980

这里有两种可能的方法：

1) 尝试从 LoginView 中获取 LoginName，如下所示：

```
LoginName loginName = (LoginName)HeadLoginView.FindControl("HeadLoginName"); 
```

2）或者你可以浏览到这个属性：

```
HttpContext.Current.User.Identity.Name 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-24T08:13:03.783

采用：

```
Login login2 = (Login)(LoginView1.FindControl("Login2"));

if(login2!=null) {
    string user=login2.UserName;
    string pass=login2.Password;
} 
```

# javascript - 如何以编程方式查找 javascript 语法错误的位置？

> ID：12036640
> 
> 赞同：3
> 
> 时间：2012-08-20T11:13:01.263
> 
> 标签：javascript, node.js, syntax-error

我正在使用 require 加载一个 Node.js 模块。这会引发语法错误（错误对象）。

有没有办法获取文件中发生错误的位置？

我可以看到堆栈（下），但我没有任何位置信息。我知道我可以使用 substack 的[node-syntax-error](https://github.com/substack/node-syntax-error)，但是有没有办法从 Javascript Error 对象中获取类似的位置信息？

```
SyntaxError: Unexpected identifier
at Module._compile (module.js:437:25)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.require (module.js:362:17)
at require (module.js:378:17)
... // the rest is in my code 
```

编辑：

根据下面瓦迪姆的评论，是的，这就是我想做的事情。我看到那个节点抛出了很好的错误。拥有一个`test.js`仅包含`abc`您的文件的文件会从节点收到错误消息

```
ReferenceError: abc is not defined
    at Object.<anonymous> (test.js:1:63)
    at Module._compile (module.js:456:26)
    at Object.Module._extensions..js (module.js:474:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Function.Module.runMain (module.js:497:10)
    at startup (node.js:119:16)
    at node.js:901:3 
```

现在的问题是，是否有一个节点 API 可以得到这个错误（节点 module.js 模块使用），这样我就不必了`child_process.spawn('node', ['test.js'])`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:39:15.467

`node`您可以使用包含 SyntaxError 的文件简单地运行并查看控制台输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T01:39:17.507

## 错误堆栈

错误具有存储堆栈跟踪的“堆栈”属性。

```
try {
    throw new Error("with some message");
}
catch(err) {
    // print error's stack trace to stder
    console.error(err.stack);
} 
```

在名为“/home/myusername/test.js”的文件上运行它

```
node /home/myusername/test.js 
```

将输出以下内容

```
Error: with some message
    at Object.<anonymous> (/home/myusername/test.js:2:11)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-31T03:14:20.880

@laconbass 答案对我有用。

```
err.stack 
```

我尝试了一个博客框架，我得到：500 Internal Server Error。希望我放一个控制台：

```
 app.use(function(error, req, res, next) {
    res.status(500).render('500');
      console.log(error);
  }); 
```

我可以看到没有描述性的错误：

```
TypeError: Cannot read property 'replace' of undefined 
```

经过几分钟的研究，我找到了这个答案，所以我尝试了：

```
 app.use(function(error, req, res, next) {
    res.status(500).render('500');
      console.log(error.stack);
  }); 
```

我可以看到错误的根源：（Object.exports.replace）

```
TypeError: Cannot read property 'replace' of undefined
    at Object.exports.replace (/.../some_folder/node.js-blog-engine/node_modules/swig/lib/filters.js:411:15)
    at eval (eval at <anonymous> (/.../some_folder/node.js-blog-engine/node_modules/swig/lib/swig.js:498:13), <anonymous>:41:63)
    at Object.exports.each (/.../some_folder/node.js-blog-engine/node_modules/swig/lib/utils.js:45:11)
    at eval (eval at <anonymous> (/.../some_folder/node.js-blog-engine/node_modules/swig/lib/swig.js:498:13), <anonymous>:26:10)
    at Object.eval [as tpl] (eval at <anonymous> (/.../some_folder/node.js-blog-engine/node_modules/swig/lib/swig.js:498:13), <anonymous>:85:3)
    at compiled (/.../some_folder/node.js-blog-engine/node_modules/swig/lib/swig.js:619:18)
    at /.../some_folder/node.js-blog-engine/node_modules/swig/lib/swig.js:559:20
    at /.../some_folder/node.js-blog-engine/node_modules/swig/lib/swig.js:690:9
    at FSReqWrap.readFileAfterClose [as oncomplete] (fs.js:380:3) 
```

我知道这不是语法错误，但可以用来查找 javascript/node 错误的位置。

我是nodejs的新手。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-18T22:56:07.173

您可以使用该[`stacktracey`](https://github.com/xpl/stacktracey#stacktracey)库（注意：*我是该库的作者*）。

它打印漂亮的调用堆栈以及源代码行，还解析 SyntaxError 输出（在高于 v4 的 Node 中）。

例如，当尝试要求此文件（名为`test_files/syntax_error.js`）时：

```
// next line contains a syntax error (not a valid JavaScript)
foo->bar () 
```

...抛出的错误的漂亮打印调用堆栈将是：

```
at (syntax error)                  test_files/syntax_error.js:2  foo->bar ()
at it                              test.js:184                   try { require ('./test_files/syntax_error.js') }
at runCallback                     timers.js:781
at tryOnImmediate                  timers.js:743
at processImmediate [as _immediat  timers.js:714 
```

`util.inspect`...第一行是通过解析 Node.js 中调用的原始输出生成的。

该库还提供对已解析调用堆栈内容的完整 API 访问，因此您可以将输出调整为您想要的任何内容。

# regex - matlab中的正则表达式解析

> ID：12036645
> 
> 赞同：0
> 
> 时间：2012-08-20T11:13:19.600
> 
> 标签：regex, parsing, matlab

我有一个像这样的 3x1 单元阵列：

```
name1 = text1
name2 = text2
name3 = text3 
```

我想将它解析成单独的单元格 1x2，例如 name1 ， text1。将来我想将 text1 视为字符串以与其他字符串进行比较。我该怎么做？我正在尝试使用正则表达式和令牌，但我无法为此编写适当的公式，如果有人可以帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T11:31:33.203

这段代码

```
input = {'name1 = text1';
         'name2 = text2';
         'name3 = text3'};

result = cell(size(input, 1), 2);
for row = 1 : size(input, 1)
    tokens = regexp(input{row}, '(.*)=(.*)', 'tokens');
    if ~isempty(tokens)
        result(row, :) = tokens{1};
    end
end 
```

产生结果

```
result = 
    'name1 '    ' text1'
    'name2 '    ' text2'
    'name3 '    ' text3' 
```

请注意，等号周围的空格被保留。您可以通过调整正则表达式来修改此行为，例如也尝试`'([^\s]+) *= *([^\s]+)'`给

```
result = 
    'name1'    'text1'
    'name2'    'text2'
    'name3'    'text3' 
```

**编辑：**基于[user1578163](https://stackoverflow.com/users/1578163/user1578163)的评论。

Matlab 还支持不那么贪婪的量词。例如`'(.*?) *= *(.*)'`，如果文本包含空格，则正则表达式（注意星号后的问号）有效。会变身

```
input = {'my name1 = any text1';
         'your name2 = more text2';
         'her name3 = another text3'}; 
```

进入

```
result = 
    'my name1'      'any text1'    
    'your name2'    'more text2'   
    'her name3'     'another text3' 
```

# visual-studio-2010 - 在 VS 2010 上使用 JustCode 的 CodeRush Xpress

> ID：12036651
> 
> 赞同：1
> 
> 时间：2012-08-20T11:13:48.190
> 
> 标签：visual-studio-2010, coderush-xpress, justcode

CodeRush Xpress 在 VS 2010 上是否与 JustCode 配合得很好？

默认键绑定会冲突吗？

背景：我对 C# 缺乏经验，希望 IDE 尽可能地帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:46:43.510

我们（DevExpress）没有被告知与 JustCode 不兼容。因此，它们很可能会正常工作。如果您发现任何问题，我们将很乐意研究并解决它们 - 只需发送电子邮件至 support@devexpress.com。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:13:11.020

我在 Telerik，我在使用 CodeRush Xpress 测试 JustCode 时没有遇到任何问题。安装其他 Visual Studio 扩展可能会覆盖 JustCode 的键映射。如果您怀疑发生了这种情况，请转到 JustCode | 选项 | 常规，然后单击“重置键盘快捷键”。

# delphi - 自定义 Windows Vista 日历显示

> ID：12036652
> 
> 赞同：2
> 
> 时间：2012-08-20T11:13:57.363
> 
> 标签：delphi, calendar, windows-vista, customization, persian

我想使用 Delphi 制作一个程序，以观看和等待 windows vista 日历显示（当您在系统托盘中按住或单击鼠标时出现在屏幕右下角的两个窗口），当它们出现时将其内容更改为制作我自己的日历（波斯历）。有没有办法用 Windows 消息更改日历控件（SysMonthCal32）的内容？

样本： [![在此处输入图像描述](../Images/21d48ea8703712f4f28d6d8d4318157e.png)](https://i.stack.imgur.com/vlOIN.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:20:08.233

最后我做到了。程序必须监视日历窗口的创建，然后使用 SetParent API 函数将自己的日历放在上面。[您可以在http://www.dihav.com/pghcal/](http://www.dihav.com/pghcal/)
中查看结果应用程序。

# python - Python 2.5 作为关键字，但有多个例外

> ID：12036658
> 
> 赞同：1
> 
> 时间：2012-08-20T11:14:36.100
> 
> 标签：python, exception-handling, keyword

`as`有没有办法通过使用关键字或 python 2.5 语法来定义多个异常的名称`Exception, e`？因此，如果您在这样的元组中定义带有异常的 try/except 子句，`...except (RuntimeError, TypeError, NameError):`也可以为错误分配名称，例如`as (Rerr,Terr,Nerr)`？

还是我**必须**一一单独定义它们？

```
try:
    ....
except RuntimeError as Rerr:
    ....
except TypeError as Terr:
    ....
.... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T11:18:33.213

You've misunderstood what the `as` keyword is doing. It's assigning the exception instance itself to the variable, not the class. So whichever type is caught by the `except`, it will end up in the `as` variable.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T11:19:10.763

但是，如果您需要将它们分别命名，那么您可能会为每个定义单独的处理程序逻辑，在这种情况下，单独的定义有什么问题？

无论类型如何，您都可以为异常分配一个名称：

```
except (RuntimeError, TypeError, NameError) as e: 
```

# windows-7 - 为什么我不能在没有 /d 的命令行中启动程序？（视窗 7x64）

> ID：12036659
> 
> 赞同：3
> 
> 时间：2012-08-20T11:14:41.803
> 
> 标签：windows-7, batch-file, dos

我正在尝试创建一个打开程序的批处理脚本。我正在做一些测试，但我无法弄清楚：

如果我运行 CMD.exe 并输入`start /d "C:\wamp" wampmanager.exe`程序打开

但

如果我运行 CMD.exe 并输入`start "C:\wamp\wampmanager.exe"`我得到“当前目录无效”

现在，当我尝试这样做时，系统`start runas /profile /user:Administrator "C:\wamp\wampmanager.exe"`会提示我输入管理员密码，但是当我输入密码时没有任何反应。

有人可以告诉我如何运行上述命令吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T11:27:04.347

因为启动程序的语法期望窗口标题作为它的第一个*引用*参数。（见`start /?`）。但是，您可以提供一个空字符串：

```
start "" "C:\wamp\wampmanager.exe" 
```

或者，如果您不需要引号来掩盖路径的某些部分，则完全不使用它们：

```
start C:\wamp\wampmanager.exe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:29:57.567

```
start "some-text" 
```

以“some-text”作为窗口标题启动一个新的命令窗口。要启动程序，请不要在参数周围使用引号

```
start program-name 
```

# java - Open Session in view for new version of Hibernate

> ID：12036661
> 
> 赞同：0
> 
> 时间：2012-08-20T11:14:46.123
> 
> 标签：java, hibernate, lazy-loading, open-session-in-view

I look at [this](https://community.jboss.org/wiki/OpenSessioninView), very popular page and see that it start with

```
This page describes Hibernate 3.1.x and code shown here does not work in older versions. 
```

So my question very easy: how to implement behavior like this in newest versions of hibernate (4.1+)? Maybe it exist more elegant decision of **lazy initialization** problem? Any advice and links are welcome.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:25:10.840

看看 ThreadLocalSessionContext 和 ManagedSessionContext 类。它应该可以帮助您做您需要的事情。

如果您查看 spring 的过滤器实现，它很可能会使用 ThreadLocalSessionContext 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:38:52.797

与 Hibernate 3 几乎相同，但引用了 Hibernate 4 包：

```
<filter>
                    <filter-name>hibernateFilter</filter-name>
                    <filter-class>org.springframework.orm.hibernate4.support.OpenSessionInViewFilter</filter-class>
                    <init-param>
                            <param-name>singleSession</param-name>
                            <param-value>true</param-value>
                    </init-param>
            </filter>

            <filter-mapping>
                    <filter-name>hibernateFilter</filter-name>
                    <url-pattern>/*</url-pattern>
            </filter-mapping> 
```

# wcf - System.ServiceModel.Channels.MessageProperties object has been disposed

> ID：12036672
> 
> 赞同：1
> 
> 时间：2012-08-20T11:15:26.333
> 
> 标签：wcf

When I raise an exception in my WCF service. The built in WebErrorHandler exception handler itself fails trying to access OperationContext.Current.IncomingMessageProperties as it seems to have been disposed. The consequence is that the real error is masked, and I always get an HTML error output.

Why would my IncomingMessageProperties be disposed? The service returns a stream - not sure if that is relevant.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:00:21.247

我发现了问题。我正在创建一个 WebFaultException。现在我创建一个普通的异常并使用 IErrorHandler 将其正确序列化到客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T21:57:03.963

当我尝试从另一个方法而不是 OperationContract 方法访问 OperationContext.Current.IncomingMessageProperties 时，这发生在我身上。

要访问 OperationContext.Current.IncomingMessageProperties，请为 OperationContext 创建一个扩展方法以访问该属性

像这样的东西：

```
public static string GetClientIP(this OperationContext context)
        {
            string ip = "";
            MessageProperties messageProperties = context.IncomingMessageProperties;
            RemoteEndpointMessageProperty endpointProperty =
              messageProperties[RemoteEndpointMessageProperty.Name] as RemoteEndpointMessageProperty;

            if (endpointProperty != null)
            {
                 ip = endpointProperty.Address;
            }

            return ip;
        } 
```

# java - java.lang.InstantiationError while running sparql query in jena

> ID：12036674
> 
> 赞同：2
> 
> 时间：2012-08-20T11:15:28.597
> 
> 标签：java, jakarta-ee, rdf, sparql, jena

Dear Friends I m using Jena framework with RDF database model with virtuoso in my project. my jena version is jena-core2.7.2 and jena-arq-2.9.2

Here is the my code which is giving me error

```
public JsonArray getCountryAutoSuggestData()
{
    JsonArray countryArray = new JsonArray();
    Model model = DataModel.getModel();
    String mystr = " PREFIX plcontologyurl:<http://www.plcontology.com/#> "
            + " PREFIX rdf:<http://www.w3.org/1999/02/22-rdf-syntax-ns#> "
            + "select ?cn"
            + " where "
            + " { "
            + " ?d plcontologyurl:Country_Name ?cn . "
            + "}";
    Query query = QueryFactory.create(mystr);
    QueryExecution qe = QueryExecutionFactory.create(query, model);
    QuerySolutionMap qMap = new QuerySolutionMap();
    qe.setInitialBinding(qMap);
    ResultSet rs = qe.execSelect();
    while(rs.hasNext())
    {
        qMap = (QuerySolutionMap)rs.next();
        countryArray.add(new JsonPrimitive(qMap.getLiteral("cn").getString()));
    }
    return countryArray;
} 
```

Error is java.lang.InstantiationError: com.hp.hpl.jena.sparql.engine.binding.BindingMap at line while(rs.hasNext())

I tried looking for the problem and I found one [relevant discussion](http://www.mail-archive.com/owlim-discussion@ontotext.com/msg01415.html)

They are saying that now com.hp.hpl.jena.sparql.engine.binding.BindingMap is not a simple class now in this version but an interface now.

If it is like that then how to run sparql query in the current version. Please give an example based on the code i have shared. Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T11:26:43.317

您在类路径上有多种版本。

您链接到的信息是正确的 - BindingMap 变成了一个接口，因此如果您看到 java.lang.InstantiationError，则表示调用代码来自 ARQ 的早期版本。

检查您在类路径上没有超过一份 Jena 代码副本，并且在 JVM 的认可目录中没有副本。

# android - 在Android中解析两行CSV数据？

> ID：12036675
> 
> 赞同：0
> 
> 时间：2012-08-20T11:15:32.437
> 
> 标签：android, parsing, csv

所以我对 Android 比较陌生，我正在尝试解析基于 Web 的 CSV 文档，并在我的应用程序中使用该文档中的两个值。我已经成功解析了一个 CSV 文档，但它只有 1 行。我试图解析的文档如下所示：

```
Light,2012-08-20T11:04:42.407301Z,107
Temperature,2012-08-20T11:04:42.407301Z,24 
```

我正在尝试获取“107”和“24”值。谁能解释如何做到这一点？这是我当前的 CSV 解析器类的代码，它可以成功解析一行 CSV 数据。

```
public class CSVParser {
    static InputStream is = null;
    private String value;

    public String getCSV(String url) {
        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        try {
            String line;
            while ((line = reader.readLine()) != null) {
                String[] RowData = line.split(",");
                value = RowData[2];
                // do something with "data" and "value"
            }
        } catch (IOException ex) {
            // handle exception
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                // handle exception
            }
        }
        return value;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:28:27.170

我看到您正在分配 value = rowData [2]，这看起来像在 2 行 csv 上，您每次读取一行时只返回 24，因为您分配了 value。即第一次分配为 107，然后在下一个 readLine 上它被 24 覆盖。

您应该使 value 变量成为一个数组（如果您知道要获取的项目数）或可以容纳多个字符串的列表。然后在每个 readLine 循环中添加到这个数组或列表中。

所以第一次是（如果使用 value as a `List<string>`）

```
 while ((line = reader.readLine()) != null) {
    string[] RowData = line.split(",");
    value.add(RowData[2]);
  } 
```

第一次它将添加 107 到列表中，然后下一行将添加 24。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:24:56.387

你有正确的想法 - 所以在你的想法中，while循环为流中的每一行运行一次，直到你用完行（readline返回null）

然后使用 split 将单行拆分为多个字符串。在您的情况下 split 应该返回三个数组（列表中的三个逗号分隔元素）

*   RowData[0] 将包含文本描述（例如 Light）
*   RowData[1] 将包含时间戳
*   RowData[2] 将包含您想要的数字

如果你想要一个整数，你可能想要做类似 Integer.Parse(RowData[2])

# drag-and-drop - KendoDraggable - Really Drag and Drop function

> ID：12036678
> 
> 赞同：0
> 
> 时间：2012-08-20T11:15:57.240
> 
> 标签：drag-and-drop, draggable, kendo-ui

I would like to ask for help with my D&D function...

Here is a Fiddle: [http://jsfiddle.net/B5kJf/5/](http://jsfiddle.net/B5kJf/5/)

Function D&D is implemented but I can't fix bug when you drop object to his original target. If you do it, object will split in two.

Please help me. -David

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:22:12.803

我在这个例子中发现了问题：http: [//jsfiddle.net/RichardAD/K27fu/](http://jsfiddle.net/RichardAD/K27fu/)

只需要改变这一行：

```
this.element.html(this.element.html() + e.draggable.element[0].outerHTML); 
```

这样：

```
this.element.append(e.draggable.currentTarget); 
```

希望对其他人有所帮助...

最好的问候，-大卫

# desire2learn - Valence Api 从 D2L 获取 Locale 列表

> ID：12036691
> 
> 赞同：0
> 
> 时间：2012-08-20T11:17:21.453
> 
> 标签：desire2learn

是否有可用于从 D2L 站点获取区域设置 ID 列表的 valence API。我正在使用 API 创建需要输入 LocaleID 的课程，并且我正在尝试构建一些逻辑，可以将存储在我的系统中的语言环境转换为 D2L 系统的语言环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:31:03.837

不幸的是，目前没有一个 Valence API 来检索区域设置 ID 列表以及区域设置名称和其他元数据。此外，可能只有有权使用*区域设置管理*管理工具的用户才能为您提供您希望在呼叫中使用的区域设置 ID。

admin 用户可以进入 Locale Management 工具查看 locale 列表，单击其中一个进行选择/编辑，然后在查询 URL 中查看*id*参数的值是什么：这应该是 locale ID。

# android - Calendar Gridview - slide in and out animation on month switched

> ID：12036697
> 
> 赞同：4
> 
> 时间：2012-08-20T11:17:49.187
> 
> 标签：android, animation, gridview, transition, slide

I want to animate `Gridview` which works as Calendar. Calendar items(days, months) are added to gridview dynamicaly on button click, when i choose next or previous month.

I want to create slide in and slide out animation when i change month as uses Viewpager. I can animate slide out and slide in using `listener` and starting slide In `onAnimationEnd()` of slide Out `listener`.

Problem is I want to start both animations on this gridview at the same time(so gridview will be sliding out and in at the same time), but second animation always overide the first animation so i see only slide in animation.

Has anyone any idea how to achieve this kind of animation on gridview?

Thank you

# selenium - Webdriver Ruby Bindings - Setting Capabilities

> ID：12036698
> 
> 赞同：1
> 
> 时间：2012-08-20T11:17:54.430
> 
> 标签：selenium, webdriver, selenium-webdriver

I am using Ruby bindings for Webdriver and need to set a particular capability when creating a webdriver instance for IE. The capabilitiy is :ignore_zoom_setting. However, the options I can pass through to the driver are limited to :timeout, :port, :http_client, :introduce_flakiness_by_ignoring_security_domains, and :native_events.

The only way I've found of passing a desired capabilities object is if I use remote webdriver. Can I somehow call Selenium::WebDriver.for :ie and pass in capabilities as well?

Mark

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:58:52.717

哦，是的，你可以。这是应该可以帮助您的代码片段

oops 给出了 java 的代码。我会让它在那里，但对于 ruby​​，你确实需要使用远程

```
caps = Selenium::WebDriver::Remote::Capabilities.htmlunit(:javascript_enabled => true)
driver = Selenium::WebDriver.for :remote, :url => "http://localhost:4444/wd/hub", :desired_capabilities => caps 
```

**对于 Java**

```
DesiredCapabilities cap = new DesiredCapabilities();
cap.setJavascriptEnabled(false);
driver = new InternetExplorerDriver(cap); 
```

# mysql - 将全文功能添加到 MySql 中的现有表

> ID：12036699
> 
> 赞同：3
> 
> 时间：2012-08-20T11:17:54.900
> 
> 标签：mysql, full-text-search, full-text-indexing

> **可能重复：**
> [MySQL/PHP 搜索效率](https://stackoverflow.com/questions/2954022/mysql-php-search-efficiency)

如何将全文功能添加到 MySQL 中的现有表。

我已经看到在创建表时直接添加它，如下所示。

```
CREATE TABLE articles (
    id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,
    title VARCHAR(200),
    body TEXT,
    FULLTEXT (title,body)
); 
```

但是创建表格后如何手动添加全文呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T11:20:30.327

根据[http://dev.mysql.com/doc/refman/5.0/en/alter-table.html上的文档](http://dev.mysql.com/doc/refman/5.0/en/alter-table.html)

`ALTER TABLE TABLE_NAME ADD [FULLTEXT|SPATIAL] [INDEX|KEY] [index_name]`

# python - python gnupg over ssh 在 python shell 中工作，而不是在脚本中

> ID：12036702
> 
> 赞同：0
> 
> 时间：2012-08-20T11:18:26.660
> 
> 标签：python, ssh, gnupg

这是一个关于通过 SSH 在 python 交互模式下工作的命令的问题，但如果包含在脚本中则不会。它快把我逼疯了。我一直遇到脚本问题，但现在我发现我可以简单地将这些行放入 python shell 中，我得到了我期望的确切结果！这让我很困惑，我不知道如何继续，因为我需要它在脚本中工作。对于 python shell，我通过 SSH 登录，然后打开一个 python 脚本，而不是通过 python ssh 模块登录。从那里开始，它完全按预期工作。

```
import ssh
import gnupg
import pickle

s = ssh.Connection(host = 'ipaddress', username = 'toolserv', password = 'xxxx') 

gpg = gnupg.GPG(gnupghome="/home/toolserv/.gnupg") 

with open("result1.txt", "r") as my_file:
    signed_data1 = pickle.load(my_file)
    my_file.close()

print signed_data1

s.close() 
```

如果我从 sudo 执行脚本，我从脚本中得到的错误是：

```
Traceback (most recent call last):
  File "sshx.py", line 11, in <module>
    with open("result1.txt", "r") as my_file:
IOError: [Errno 2] No such file or directory: 'result1.txt 
```

ls -ld 给出以下结果： drwxr-xr-x 29 toolserv toolserv 4096 2012-08-19 22:38

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:31:48.247

## 初步答案

您的脚本在您的本地主机上执行，而不是在您的目标服务器上。请注意您如何打开`SSH`会话然后不使用它。

`toolserv`此主机上可能不存在该用户。因此`gnupg`尝试创建目录时出现错误。

## 回应您的评论：

让我更清楚地说明这一点。**仅仅**调用`s = ssh.Connection(host = 'ipaddress', username = 'toolserv', password = 'xxxx')` **并不*意味着***所有后续代码都将在远程主机上执行。

现在，您的代码执行以下操作：

1.  `ipaddress`通过 SSH连接到远程主机
2.  使用带有位于*本地主机*`/home/toolserv/.gnupg`上的密钥的 gnupg 库。
**   阅读本地主机上的一些（腌制？）文件内容。*   打印（未腌制的）内容*   关闭 SSH 连接（从不使用它）。*

 *您从不使用 SSH 连接，这*可能*不是您想要的，也*可能*是您的脚本失败的原因。

当然，如果您通过 SSH 登录然后使用 shell 在远程主机上执行完全相同的脚本，那么您的本地主机实际上就是远程主机，所以它可以工作。但是，从远程主机执行代码时可以工作的事实**只不过是一个巧合**。

**最后一次，您的脚本可能没有按照您的想法执行，除非您对此进行调查，否则它永远不会起作用。***

# r - 将 if then 循环应用于 R 中的每一行数据帧

> ID：12036703
> 
> 赞同：1
> 
> 时间：2012-08-20T11:18:29.923
> 
> 标签：r

来自 R 新手的另一个基本问题。我有一个数据集：testMeanSD。这是一些相关数据，使用 dput() - 我第一次尝试这个输出，所以我希望我做得正确：

```
testMeanSD <- structure(list(RT = c(1245L, 1677L, 1730L, 1066L, 994L), mean = c(1143.77777777778, 
1143.77777777778, 1143.77777777778, 1143.77777777778, 1143.77777777778
), sd = c(202.255299928596, 202.255299928596, 202.255299928596, 
202.255299928596, 202.255299928596), RT2 = c(1245L, 1677L, 1730L, 
1066L, 994L)), .Names = c("RT", "mean", "sd", "RT2"), row.names = c(NA, 
5L), class = "data.frame") 
```

RT2 只是 RT 的副本，供我修改。对于每一行，如果满足某些条件，我需要更改 RT2 的值。否则 RT2 与 RT 保持相同（或与 RT2 中的当前值相同，这是同一件事）。以下是条件：

1.  找到 RT2 中所有超过平均值 + 2.5 * SD 的值，并将它们修剪为等于平均值​​ + 2.5 * SD

    > 如果 (RT2 > 平均值 + (2.5 * SD)) RT2 = 平均值 + 2.5 * SD

2.  找到所有小于平均值 - 2.5 倍 SD 的值并将它们修剪为等于平均值​​ - 2.5 * SD

    > 否则，如果 (RT2 < 平均值 - (2.5 * SD)) RT2 = 平均值 - 2.5 * SD

3.  其他一切保持原样

    > 否则
    > RT2 = RT

我认为这在 R 中是相当基本的，但我根本找不到让它工作的方法。这是我的一些尝试（都失败了）：

第一的：

```
testMeanSD$RT2 = testMeanSD$RT
if (testMeanSD$RT2 > (testMeanSD$mean + (2.5 * testMeanSD$sd))) {
    testMeanSD$RT2 = (testMeanSD$mean + (2.5 * testMeanSD$sd))
}
else if(testMeanSD$RT2 < (testMeanSD$mean - (2.5 * testMeanSD$sd))) {
    testMeanSD$RT2 = (testMeanSD$mean - (2.5 * testMeanSD$sd))
}
else {
    testMeanSD$RT2 = testMeanSD$RT
} 
```

第二：

```
ifelse(testMeanSD$RT2 > (testMeanSD$mean + (2.5 * testMeanSD$SD)), testMeanSD$RT2 <- (testMeanSD$mean + (2.5 * testMeanSD$sd)),
    ifelse(testMeanSD$RT2 < (testMeanSD$Mean - (2.5 * testMeanSD$sd)), testMeanSD$RT2 <- (testMeanSD$mean - (2.5 * testMeanSD$sd)), testMeanSD$RT2 <- testMeanSD$RT) 
```

第三：

```
testMeanSD$RT2 <- ifelse(testMeanSD$RT2 > (testMeanSD$mean + (2.5 * testMeanSD$sd)), testMeanSD$mean + (2.5 * testMeanSD$sd)),
   ifelse(testMeanSD$RT2 < (testMeanSD$mean - (2.5 * testMeanSD$SD)), (testMeanSD$mean - (2.5 * testMeanSD$sd)), testMeanSD$RT2 <- testMeanSD$RT) 
```

我浏览了一些相关的帖子，这个似乎最接近：[Loop over rows of dataframe apply function with if-statement](https://stackoverflow.com/questions/6518456/r-loop-over-rows-of-dataframe-applying-function-with-if-statement)

但我不清楚如何将 if then 纳入那里概述的方法（如果不是我上面的方法）。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T11:36:14.990

您几乎肯定希望避免循环和 if 语句，以支持向量化条件和赋值。

让我们以您的第一个示例为例`if (RT2 > Mean + (2.5 * SD)) RT2 = Mean + 2.5 * SD`，假设您的 data.frame 被调用`dat`：

```
sel <- dat$RT2>dat$mean + 2.5*dat$SD # creates a boolean of length nrow(dat)
dat$RT2[sel] <- with(dat[sel,], mean + 2.5*SD) 
```

您可以使用`with()`“”来节省大量打字`dat$`。

注意，因为没有可重现的数据集，所以我没有对此进行测试。几乎可以肯定某处有错字！

# jquery - Jquery-当我更改不是默认项目的下拉值时如何清除输入的数据？

> ID：12036712
> 
> 赞同：0
> 
> 时间：2012-08-20T11:18:51.450
> 
> 标签：jquery, jquery-ui, jquery-plugins

在这里，我有一个下拉菜单，其中包含 3 个值，例如 0、1、2 和 5 文本框。

[http://jsfiddle.net/ssthil/j4JZX/3/](http://jsfiddle.net/ssthil/j4JZX/3/)

当我更改下拉值，从信用卡到购买卡或从购买卡到信用卡时，我只需要清除输入的数据。不是从 0 到 1 或 0 到 2。

**添加了更多：**

我有 3 个下拉值，分别为 0、1 和 3。还有 5 个文本框。默认情况下，下拉值是 0，现在我输入该文本框的数据并将下拉值 0 更改为 1 或 2。这一次不应该发生这些文本框值的更多更改。如果我选择从 1 到 2 或 2 到 1 的下拉值，那么这次数据应该是清晰的。

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:28:48.007

保存先前选择的值，将其与当前选择的值进行比较，如果有过渡`2 -> 1`或`1 -> 2`，清理您的文本框：

```
 $(function(){
     var previousValue = $("select").val();
     $('select').change(function() {
         var currentValue = $(this).val();
         if (previousValue == 2 && currentValue == 1 
             || previousValue == 1 && currentValue == 2) {
           $("input.textbox").val("");
         }
         previousValue = currentValue;
     });
 })​ 
```

[小提琴](http://jsfiddle.net/j4JZX/7/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:27:05.377

我已经更新了你的小提琴：

[http://jsfiddle.net/j4JZX/5/](http://jsfiddle.net/j4JZX/5/)

我所做的是清除所有关于更改 html 选择更改事件的文本框

请看一看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:27:49.823

如果您有一个`select`元素来选择支付类型，您可以在值更改时重置**文本框类**的值。您可以使用`focus`回调来保存先前选择的值。一旦开始进行选择，**删除默认选择**也可能是一个好主意。为什么有人需要选择**-Select-**作为付款选项？

```
var previous;
$("select").focus(function () {
    previous = this.value; // Store the value before change.
}).change(function() {
    $("select option[value='-1']").remove(); // Remove default selection.
    if(previous != -1) { // If the last value wasn't -1 ('-Select-')
      $(".textbox").val(""); // Then clear all textboxes.
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T11:35:02.180

您需要按照@Joao 的建议保存最后一个值以跟踪更改。您可以使用 select 元素的属性来存储最后选择的值，而不是使用全局变量。像这样：

```
$(function(){
 $("select").attr('rel', $("select").val());

 $('select').change(function() {
     previousValue = $("select").attr('rel');

     var currentValue = $(this).val();
     if (previousValue != 0) {
       $("input.textbox").val("");
     }
     $("select").attr('rel', currentValue);
 });
})​ 
```

# wcf-data-services - 从 WCF 数据服务调用另一个 WCF 数据服务

> ID：12036714
> 
> 赞同：0
> 
> 时间：2012-08-20T11:19:06.737
> 
> 标签：wcf-data-services, odata

我有这种情况：

1- 带有自定义实体的 WCF 数据服务 #1（无实体框架）

2- WCF 数据服务 #2 与实体框架的实体。

我的客户应该只调用 WCF 数据服务#2，然后公开更多的功能，然后使用自己的实体也使用来自 WCF 数据服务#1 的实体。

换句话说，我在 WCF 数据服务 #2 上调用了一个服务操作，它返回 WCF 数据服务 #1 上的一个实体，但不幸的是它失败了。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:58:19.113

当前，任何 OData 服务都必须具有完全自描述的 $metadata。因此，在您的场景中，服务 2 可以从服务 1 返回一个实体，但服务 2 需要描述相同的实体。

如果您已经有一个自定义提供程序，那么代理对服务 2 上的服务操作的调用以包含来自服务 1 的结果应该不会太难（在这种情况下，您只需拥有一个充当客户端和服务器的 WCF 数据服务）。问题是服务 2 必须根据该模型而不是模型 1 来描述实体。

在未来的某个地方有一个称为模型参考的功能，它应该既能看到曙光，又能解决这个特定问题。

# php - 提取数组数据

> ID：12036718
> 
> 赞同：0
> 
> 时间：2012-08-20T11:19:35.927
> 
> 标签：php, arrays

我正在编写一个脚本，该脚本将从网页中获取域名并打印符合特定条件的域名列表。

我有一个数组中的数据，但我似乎无法以友好的格式打印出来，尽管无论我尝试什么，我似乎都无法提取我需要的东西。

我的数组示例如下所示：

```
Array
(
    [0] => Array
        (
            [0] => domain1.com.au
            [1] => domain2.com.au
            [2] => domain3.com.au
            [3] => domain4.com.au
            [4] => domain5.com.au
        )

) 
```

基本上我只想在新行上打印每次出现的 *.com.au 。

如果有人给我一个例子或建议，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:22:41.320

您提供的数组应该在`$array`.

`PHP_EOL`如果您查看源代码，则插入换行符。`<br />`直观地插入新行

```
foreach ($array[0] as $domain){
    echo $domain.'<br />'.PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T11:23:58.620

```
foreach ($array[0] as $domain){
    if(strstr($domain, '.com.au')){
        echo $domain."<br />";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T11:23:03.657

尝试：

```
foreach( $arr[0] as $key => $value)
{
echo '<br/>'. $value;
} 
```

# google-apps-script - 如何使用 Google Apps 脚本将公式添加到 Google 表格？

> ID：12036726
> 
> 赞同：61
> 
> 时间：2012-08-20T11:20:13.663
> 
> 标签：google-apps-script, google-sheets, google-docs

如何添加如下公式：

```
=SUM(A1:A17) 
```

使用 Google Apps Script API for Google Sheets 访问一系列字段？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-08-20T12:42:37.023

这是使用选定单元格的[setFormula完成的。](https://developers.google.com/apps-script/reference/spreadsheet/range#setFormula(String))以下是如何执行此操作的示例。

```
var ss = SpreadsheetApp.getActiveSpreadsheet();
var sheet = ss.getSheets()[0];

var cell = sheet.getRange("B5");
cell.setFormula("=SUM(B3:B4)"); 
```

您还可以使用[setFormulaR1C1](https://developers.google.com/apps-script/reference/spreadsheet/range#setFormulaR1C1(String))创建 R1C1 符号公式。下面的例子。

```
var ss = SpreadsheetApp.getActiveSpreadsheet();
var sheet = ss.getSheets()[0];

var cell = sheet.getRange("B5");
// This sets the formula to be the sum of the 3 rows above B5
cell.setFormulaR1C1("=SUM(R[-3]C[0]:R[-1]C[0])"); 
```

要将多个公式添加到多个字段，请使用[setFormulas](https://developers.google.com/apps-script/reference/spreadsheet/range#setFormulas(String))。下面的例子

```
var ss = SpreadsheetApp.getActiveSpreadsheet();
var sheet = ss.getSheets()[0];

// This sets the formulas to be a row of sums, followed by a row of averages right below.
// The size of the two-dimensional array must match the size of the range.
var formulas = [
  ["=SUM(B2:B4)", "=SUM(C2:C4)", "=SUM(D2:D4)"],
  ["=AVERAGE(B2:B4)", "=AVERAGE(C2:C4)", "=AVERAGE(D2:D4)"]
];

var cell = sheet.getRange("B5:D6");
cell.setFormulas(formulas); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-05-08T01:14:46.253

这是一个更一般的答案。

假设您想用一个公式填充 B 列，该公式是 A 列的值加 1。例如，单元格 B1 中的公式将是“=A1 + 1”。

让我们规定范围的第一行是 1，最后一行是 20。

```
// create an array the same size as the number of rows.
var data = [];
// populate the array with the formulas.
for (var i=0; i < 20; i++)
{
  // note that as usual, each element of the array must itself be an array 
  // that has as many elements as columns. (1, in this case.)
    data[i] = ['=A' + (i+1).toString() + ' + 1 ' ];
}
// set the column values.
sheet.getRange(1,2,20,1).setFormulas(data); 
```

使这项工作适用于不同数量的行和不同的起始行，是使用变量而不是本示例中硬编码的 1 和 20 的问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-05-20T15:48:18.127

在范围内设置、复制和粘贴

例如，如果您希望 A18 包含公式 '=SUM(A1:A17)' 并且对于列 B 到 Z 相同，您可以在 A18 中设置公式，然后将 A18**复制**到 B18:Z18。同样的事情也适用于更复杂的范围。最简单的方法是使用宏记录器，然后检查您的脚本。

```
var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheets()[0];
sheet.getRange('A18').setFormula('=SUM(A1:A17)');
sheet.getRange('A18').copyTo(sheet.getRange('B18:Z18'));
//There are other parameters to 'copyTo' that you can use if needed 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-10-07T16:33:42.973

我使用了[Frans Van Assche](https://stackoverflow.com/users/915197/frans-van-assche)建议的 copyTo 公式，但使用了从数字行和列到 A1 表示法的转换，因为我没有预定义的范围。例如，以下代码将 D 列中的每一行（不包括标题）与之前在总计列 C 中创建的数据列相加。

```
 const startRow = 2; // first row to sum
  const startCol = 4; // first column to sum
  let endCol = sheet.getLastColumn(); // last column with data
  let endRow = sheet.getLastRow(); // last row with data
  let sumRange = sheet.getRange(startRow, startCol, 1, endCol - startCol + 1); // range for first cell of formula
  let copyRange = sheet.getRange(startRow, startCol - 1, endRow - 1, 1); // range to copy formulas into
  let sumFormula = "=SUM(" + sumRange.getA1Notation() + ")"; // define formula
  let totalsCol = startCol - 1; // this could be whichever column you want the totals to be in, for example, a constant or endCol + 1 if you want the totals at the end
  let startCell = sheet.getRange(startRow, totalsCol); // first cell to copy formula into
  startCell.setFormula(sumFormula); // add formula to first cell
  startCell.copyTo(copyRange); // copy formula from first cell to other range 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-08-26T06:55:01.403

setValues() 也可以代替 setFormulas()

```
 var disht = spss.getSheetByName("DI");
  var divals = disht.getRange("A1:G50").getValues();
  divals[40][5]= "=round(SUM(F10:F39),0)"; //F41 =round(SUM(F10:F39),0)
  divals[42][5]= "=(F42+F41)*(F8/100)";  //F43 =(F42+F41)*(F8/100)
  divals[43][5]= '=if(G8>0,(F41+F42)*(G8/100),"")' ; //F44 =if(G8>0,(F41+F42)*(G8/100),"")
  divals[44][5]= '=if(isblank($G$7),"",sum($F$41:$F$44)*$G$7*0.01)';//F45 =if(isblank($G$7),"",sum($F$41:$F$44)*$G$7*0.01)
  divals[45][5]= '=round(F41,0)+round(F42,0)+round(F43,0)+round(F44,0)+round(F45,0)' ; //F46 =round(F41,0)+round(F42,0)+round(F43,0)+round(F44,0)+round(F45,0)
  divals[47][5]= "=F46-F47"; //F48 =F46-F47
  divals[44][4]= '=if(isblank($G$7),"","TCS")'; //E45  =if(isblank($G$7),"","TCS")
  disht.getRange("A1:G50").setValues(divals); 
```

# android - 无法在android4.0的webview里面输入

> ID：12036729
> 
> 赞同：2
> 
> 时间：2012-08-20T11:20:33.323
> 
> 标签：android, webview

我想在 webview 中显示的编辑文本框中输入一些内容。当我在 android2.2 设备中加载 webview 时，它工作正常。但不幸的是它不适用于android4.0。我没有从任何其他帖子中得到任何提示。下面是我的代码。

```
 mWebView.clearSslPreferences();
        mWebView.setInitialScale(0);
        mWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setLoadWithOverviewMode(true);
        mWebView.getSettings().setUseWideViewPort(true);
        mWebView.setHorizontalScrollBarEnabled(false);

        mWebView.requestFocus(View.FOCUS_DOWN); //to show the keyboard
        mWebView.setWebViewClient(webClient);

        mWebView.getSettings().setBuiltInZoomControls(true);
                mWebView.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            WebView.HitTestResult hr = ((WebView)v).getHitTestResult();
            if(hr!=null){
            if(hr.getType()==HitTestResult.EDIT_TEXT_TYPE )
                ((Activity) context).setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);

            else
                ((Activity) context).setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
            }
            return false;  
            }     
        }); 

    return v; 
```

请告诉我为什么会这样？有什么解决方案吗？

# ruby-on-rails - 我关注 mongodb 的令牌字段，我停止在我的 mongo 集合中保存令牌

> ID：12036733
> 
> 赞同：1
> 
> 时间：2012-08-20T11:21:24.160
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid, jquery-tokeninput

我有一个作者模型

```
class Author
  include Mongoid::Document
  field :name

end 
```

在我的文章表格中，我想带上所有作者

```
 <div class="field">
    <%= f.label :author_tokens, "Authors" %><br />
    <%= f.text_field :author_tokens, "data-pre"=> @article.authors.map(&:attributes).to_json %>
  </div> 
```

这是工作。所有作者的名字都可以看到。现在我想提交所有作者姓名，我在作者中单击。我的文章模型应该是什么？我很困惑。当我发布时在这里

```
{"utf8"=>"✓",
 "authenticity_token"=>"bE0PpLx+qBUJqIavfvpDOjzrhIHFku+IrgjnU0OLOC8=",
 "article"=>{"name"=>"ram",
 "published_on(1i)"=>"2012",
 "published_on(2i)"=>"8",
 "published_on(3i)"=>"20",
 "author_tokens"=>"",
 "content"=>"fdsfds"},
 "commit"=>"Create Article"} 
```

author_tokens 字段为空。我有我的文章模型

```
class Article

  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::MultiParameterAttributes
  field :name
  field :content
  field :author_tokens
  field :token_inputs
 field :published_on, :type => Date 
 validates_presence_of :name,:content

has_many :authors
 attr_reader :author_tokens

 def author_tokens=(ids)
 self.author_ids =ids.split
 end

end 
```

我的文章模型应该是什么，以便我可以将所有输入的作者标记名称保存在我的文章集合中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:49:04.820

在文章模型上，尝试删除：

```
field :author_tokens 
```

并添加：

```
attr_accessible :author_tokens 
```

此外，不确定该`token_inputs`字段的使用位置。也许没必要？

**编辑：**

我之前忽略了这一点，但是你需要`has_and_belongs_to_many`在关系的两边才能让它按照你想要的方式工作，所以：

```
Class Author
  has_and_belongs_to_many :articles
  ...
end 
```

和：

```
Class Article
  has_and_belongs_to_many :authors
  # has_many :authors <- Remove this
  ...
end 
```

为了澄清我原来的解释：

1）您编写的 setter 方法`author_tokens`和`attr_reader : author_tokens`都很好，但如果您在控制器中使用质量分配（可能），您需要`author_tokens`使用`attr_accessible :author_tokens`. 如果您尚未明确设置任何其他内容，Mongoid 可能会自动执行此操作`attr_accessible`，具体取决于您使用的版本。

2）您不需要该`field :author_tokens`行，因为它是通过您编写的 setter 和`attr_reader`调用访问的虚拟属性。您实际上并不想将用户传入的值存储`author_tokens`在数据库中，而是希望设置器为您将这些值放入`author_ids`字段中。

3)`has_and_belongs_to_many :authors`调用将`author_ids`在文档中为您创建字段。

4) 假设您使用的是[此处](http://railscasts.com/episodes/258-token-fields)显示的模式，那么在使用 Mongoid 而不是 ActiveRecord 时，前端实现应该没有什么不同。

# android - 我无法通过谷歌云消息在我的 Android 设备中接收消息？

> ID：12036734
> 
> 赞同：4
> 
> 时间：2012-08-20T11:21:24.113
> 
> 标签：android, python, google-cloud-messaging

我使用 python 作为服务器应用程序将我的消息发送到 GCM 服务器以在注册的 android 设备上接收。我从带有消息 ID 的 GCM 服务器获得成功。

在 android 手机上，我正在接收功能中`arg1`的数据，`onMessage()`但只有两个键`arg1`, `from`& `collapse_key`。

在下面的 Java 代码中，`from`key 包含一个`LongInt`值 & `message`is `null`。

谁能告诉我我在 Java 代码或 Python 代码中缺少什么？

**这是我的 JavaCode：**

```
@Override
protected void onMessage(Context arg0, Intent arg1) {
    // TODO Auto-generated method stub
    String keys="";
    for (String key : arg1.getExtras().keySet())
        keys+=key+"||";
    String mess = arg1.getExtras().getString("from");
    String mess1 = arg1.getExtras().getString("message");
} 
```

**蟒蛇代码：**

```
def SelectAction(request,client_id):
    if request.method == 'GET':

        message = request.GET.get('message','')
        if not message:
            return Error(message = "Argument Missing.")
        registration=  Registration.objects.get(registeredUser = user)
        values = {}
        values['registration_id'] = registration.appId
        values['data.message'] = message
        param = urllib.urlencode(values)
        req = urllib2.Request("https://android.googleapis.com/gcm/send", param)
        req.add_header( 'Content-Type' , 'application/x-www-form-urlencoded;charset=UTF-8' )
        req.add_header( 'Authorization' , 'key=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX')
        response = urllib2.urlopen(req)
        reply = {}
        if response.read().split('=')[0] == 'id':
            reply['error'] = '0'
        else:
            reply['error'] = '1'

        return HttpResponse(json.dumps(reply), mimetype="application/javascript")
    else:
        return Error() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:36:25.843

一切似乎都设置正确。在我看来，该消息从未首先发送到您的服务器。由于您可以检索 from 但不是消息，这可能是正确的。

在服务器中，您可以更改以下行吗？

```
values['data.message'] = message 
```

对此；

```
values['data.message'] = "testMessage" 
```

我认为这很可能会导致您在 android 中收到消息.. 只需暂时更改消息以查看推送是否开始工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:23:10.377

在执行其他操作之前尝试提取数据：

```
Bundle data = intent.getExtras();
        if (data != null) {
            data.isEmpty(); toString();
        } 
```

现在您可以使用 toString(); 并查看数据包含的内容：

```
Log.i("C2DM", data.toString()); 
```

检查 C2DM 的日志并粘贴您获得的内容。

# python - 使用tastepie 编写APIS。urls.py 中出现错误

> ID：12036738
> 
> 赞同：0
> 
> 时间：2012-08-20T11:21:48.250
> 
> 标签：python, django, tastypie

```
name 'entry_resource' is not defined 
```

这是我的models.py

```
from tastypie.utils.timezone import now
from django.contrib.auth.models import User
from django.db import models
from django.template.defaultfilters import slugify

class Entry(models.Model):
    user = models.ForeignKey(User)
    pub_date = models.DateTimeField(default=now)
    title = models.CharField(max_length=200)
    slug = models.SlugField()
    body = models.TextField()

    def __unicode__(self):
        return self.title

    def save(self, *args, **kwargs):
        # For automatic slug generation.
        if not self.slug:
            self.slug = slugify(self.title)[:50]

        return super(Entry, self).save(*args, **kwargs) 
```

这是我的 api.py：

```
from tastypie.resources import ModelResource
from links.models import Entry

class EntryResource(ModelResource):
    class Meta:
        queryset = Entry.objects.all()
        resource_name = 'entry' 
```

这是我的 urls.py

```
from django.conf.urls import patterns, include, url
from links.api import EntryResource
# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    # url(r'^admin/', include(admin.site.urls)),
     (r'^api/', include(entry_resource.urls)),
) 
```

我很确定我在做一些相当愚蠢的事情。只是找不到什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T11:29:41.900

从官方`tastypie`文档（[https://github.com/toastdriven/django-tastypie#whats-it-look-like](https://github.com/toastdriven/django-tastypie#whats-it-look-like)）：

```
# urls.py
# =======
from django.conf.urls.defaults import *
from tastypie.api import Api
from myapp.api import EntryResource

v1_api = Api(api_name='v1')
v1_api.register(EntryResource())

urlpatterns = patterns('',
    # The normal jazz here then...
    (r'^api/', include(v1_api.urls)),
) 
```

# c++ - C++：在迭代器向量中使用擦除

> ID：12036739
> 
> 赞同：1
> 
> 时间：2012-08-20T11:21:49.010
> 
> 标签：c++, vector, erase

我在使用 C++ 中的擦除函数时遇到问题。

我有以下结构：

```
typedef std::map<std::string,TreeElement> ObjMap;
class TreeElement {
    public:
        ObjMap::const_iterator parent;
        std::vector<ObjMap::const_iterator > children;
} 
```

现在我正在尝试使用擦除函数从其父级的子级列表中删除一个 TreeElement。

```
//Remove from parent
SegmentMap::const_iterator parent = segment->second.parent;
std::vector<SegmentMap::const_iterator >::const_iterator it = parent->second.children.begin();
for(;((*it)->first != segment->first) && (it != parent->second.children.end()); it++);
parent->second.children.erase(it); //Compilation fails 
```

这会在编译期间出现错误，表明它无法转换

```
__gnu_cxx::__normal_iterator<const std::_Rb_tree_const_iterator<std::pair<const std::basic_string<char>, TreeElement> >*, std::vector<std::_Rb_tree_const_iterator<std::pair<const std::basic_string<char>, TreeElement> > > > 
```

到

```
__gnu_cxx::__normal_iterator<std::_Rb_tree_const_iterator<std::pair<const std::basic_string<char>, TreeElement> >*, std::vector<std::_Rb_tree_const_iterator<std::pair<const std::basic_string<char>, TreeElement> > > > 
```

有没有什么办法解决这一问题？我尝试使用迭代器而不是 const_iterator 但这只是将编译错误移至

```
std::vector<SegmentMap::const_iterator >::iterator it = parent->second.children.begin(); 
```

澄清：我知道擦除函数需要一个非常量迭代器。我正在寻找一种方法来创建此非常量迭代器，而无需更改TreeElement 类中*父*项和*子项的声明。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:27:04.297

Parent 是 const 迭代器，因此`parent->second`是 const，因此`parent->second.children`是 const，因此`parent->second.children.begin()`返回 const 迭代器。

`erase`需要一个非常量迭代器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:27:35.887

`erase()`使用时不能这样做`const_iterator`。的目的`const_iterator`是禁止`vector`以任何方式修改 ，包括通过它擦除元素。您应该简单地使用`iterator`，然后修复该编译错误。

那么该编译错误是因为您试图将 a 分配`const_iterator`给非 const `iterator`。如果您修改并制作`parent`一个非常量`iterator`，错误应该会消失。

# android - 从 Android 应用程序打开 Twitter 应用程序用户配置文件

> ID：12036753
> 
> 赞同：17
> 
> 时间：2012-08-20T11:23:20.197
> 
> 标签：android, twitter

我能够启动 Twitter 应用程序（如果它存在于手机上），但我找不到如何自动显示特定用户配置文件。

像这样的东西适用于 Google+：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setClassName("com.google.android.apps.plus", "com.google.android.apps.plus.phone.UrlGatewayActivity");
intent.putExtra("customAppUri", "USER_ID"); 
```

这是Facebook的方式：

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("fb://profile/USER_ID"));
startActivity(intent); 
```

启动 Twitter 应用程序时应该有相同的解决方案吗？

```
Intent intent = getPackageManager().getLaunchIntentForPackage("com.twitter.android");
intent.putExtra("WHAT_TO_PUT_HERE?", "USER_ID");
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-09-09T09:41:53.043

```
try {
   startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("twitter://user?screen_name=" + twitter_user_name)));
}catch (Exception e) {
   startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("https://twitter.com/#!/" + twitter_user_name)));
} 
```

这适用于新的 Twitter 应用程序。@Baptiste Costa 提供的解决方案对我不起作用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-20T14:06:15.283

```
try
{
    // Check if the Twitter app is installed on the phone.
    getPackageManager().getPackageInfo("com.twitter.android", 0);

    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setClassName("com.twitter.android", "com.twitter.android.ProfileActivity");
    // Don't forget to put the "L" at the end of the id.
    intent.putExtra("user_id", 01234567L);
    startActivity(intent);
}
catch (NameNotFoundException e)
{
    // If Twitter app is not installed, start browser.
    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("https://twitter.com/AndroTesteur")));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-17T04:35:06.100

这是一个非常古老的问题，我想对此有所了解。如果失败，我已经使用用户 ID 或用户名完成了它。

```
Intent intent;
try {
    // Check if the Twitter app is installed on the phone.
    context.getPackageManager().getPackageInfo("com.twitter.android", 0);

    intent = new Intent(Intent.ACTION_VIEW, Uri.parse("twitter://user?user_id=813679215195410432"));
} catch (Exception e) {
    intent = new Intent(Intent.ACTION_VIEW, Uri.parse("https://twitter.com/LynxMods"));
}
context.startActivity(intent); 
```

# asp.net - 如何在 Telerik 网格中以“活动”或“关闭”之类的词显示布尔字段？

> ID：12036759
> 
> 赞同：1
> 
> 时间：2012-08-20T11:23:47.217
> 
> 标签：asp.net, asp.net-mvc-3, razor, telerik-grid

我正在研究 asp.net MVC。我想在网格视图中显示列表。我正在使用 Telerik 网格视图。我必须在 gridview 中显示一个布尔类型字段。假设它的值为 False，那么它必须在 Telerik 网格中显示为“已关闭”，否则为“活动”。我的示例代码是：

```
<td>
        @(Html.Telerik().Grid<test>()
                .Name("test-grid")
                .BindTo(Model.Data)
                .Columns(columns =>
                {
                    columns.Bound(x => x.Id)
                        .Centered();
                    columns.Bound(x => x.Name)
                        .Centered();
                    columns.Bound(x => x.Class)
                         .Centered();
                    columns.Bound(x => x.Remarks)
                        .Centered();
                    columns.Bound(x => x.IsActive)
                        .Centered();
                    columns.Bound(x => x.Progress) 
                        .Template(x => x.Progress + "%") 
                        .Centered()
                        .Filterable(true);
                })

    </td> 
```

我的网格视图在复选框中显示了 IsActive 状态（只读）。我想要一些不同的东西。我必须用文字显示为“活动”或“关闭”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:22:18.213

尝试

```
<td>
    @(Html.Telerik().Grid<test>()
            .Name("test-grid")
            .BindTo(Model.Data)
            .Columns(columns =>
            {
                columns.Bound(x => x.Id)
                    .Centered();
                columns.Bound(x => x.Name)
                    .Centered();
                columns.Bound(x => x.Class)
                     .Centered();
                columns.Bound(x => x.Remarks)
                    .Centered();
                columns.Bound(x => x.IsActive)
                    .ClientTemplate("<# if(IsActive) { #>Active<# } else {#>Closed<# } #>")
                    .Centered();
                columns.Bound(x => x.Progress) 
                    .Template(x => x.Progress + "%") 
                    .Centered()
                    .Filterable(true);
            })

</td> 
```

# c# - 全球化只适用于发布

> ID：12036761
> 
> 赞同：1
> 
> 时间：2012-08-20T11:23:55.370
> 
> 标签：c#, asp.net, web-config, format, globalization

我`<globalization uiCulture="fi-FI" culture="fi-FI"/>`在里面添加了`<system.web>`,`"Web.config"`和. `"Web.Debug.config"``"Web.Release.config"`

当我发布网站时，`dates`格式正确`d.m.yyyy`。
当我调试时，`dates`格式错误`yyyy-mm-dd`。
什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:26:46.237

如您所见，Visual Studio 中的[配置转换仅在您发布时应用。](http://msdn.microsoft.com/en-us/library/dd465326.aspx)

您可以使用[Slow Cheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5) Visual Studio 扩展在构建期间应用它们。

# ruby-on-rails - 为什么迁移中的 change_column 不起作用？

> ID：12036764
> 
> 赞同：1
> 
> 时间：2012-08-20T11:24:37.530
> 
> 标签：ruby-on-rails, ruby-on-rails-3

```
change_column :posts, :ID, :string, :null => false 
```

我在 add_column 之后使用了它，但是当我将值保留为空时，它不会显示任何错误。为什么以及我能做些什么来捕获错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:35:02.597

您应该在模型中使用验证：

```
class Post < ActiveRecord::Base
  validates :column_name, presence: true
end 
```

最好不要使用 :id 来存储一些字符串。此列名称在 Rails 中保留。

# php - 如何手动调用 MediaWiki 将 wiki 文本转换为 HTML？

> ID：12036765
> 
> 赞同：1
> 
> 时间：2012-08-20T11:24:38.993
> 
> 标签：php, html, mediawiki, wikitext

我有一个 MediaWiki 安装，我正在编写一个自定义脚本来读取一些数据库条目并为客户端生成一个自定义输出。

但是，文本是 wiki 格式的，我需要将它们转换为 HTML。是否有一些我可以调用的 PHP API - 必须有，但究竟是什么以及如何调用？

要包含哪些文件以及调用什么文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:12:18.967

您使用全局对象[`$wgParser`](http://www.mediawiki.org/wiki/Manual%3a%24wgParser)来执行此操作：

```
<?php

require(dirname(__FILE__) . '/includes/WebStart.php');

$output = $wgParser->parse(
    "some ''wikitext''",
    Title::newFromText('Some page title'),
    new ParserOptions());
echo $output->getText();

?> 
```

虽然我不知道这样做是否是一种好习惯，或者是否有更好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T11:49:05.330

我发现的只是[dumpHTML.php](http://www.mediawiki.org/wiki/Extension%3aDumpHTML)，它会转储你所有的mediawiki；或者可能是更好的[API:Parser wiki text](http://www.mediawiki.org/wiki/API%3aParsing_wikitext)它告诉：

> 如果您对简单地获取页面的渲染内容感兴趣，您可以绕过 api 并简单地将 action=render 添加到您的 url，如下所示：/w/index.php?title=API:Parsing_wikitext&action=render

添加 action=render 后，您似乎可以获得 html 页面；你不觉得吗？

希望这会有所帮助。

问候。

# c++ - 子类隐藏父类的构造函数

> ID：12036774
> 
> 赞同：1
> 
> 时间：2012-08-20T11:25:26.220
> 
> 标签：c++, inheritance

我有一个`C`继承类的类`P`

```
template <typename T>
class P{
  public:
  P();
  P(T* sometype);
};

class C: public P<sometype>{

}; 
```

现在会`C`隐藏`P(sometype*)`构造函数吗？但我需要该`P(ometype*)`构造函数在`C`. 我是否需要编写另一个`C(sometype*)`调用父构造函数？或者有一些容易的突破。而且我不想使用`C++11`功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:32:28.493

是的，构造函数不是继承的。你需要写一个新的`C`：

```
template <typename T>
class C : public P<T> {
public:
  C(T* sometype) { /*...*/ }
}; 
```

另外请注意，您对标识符的使用`sometype`是不一致的。在`P`您将其用作变量名的情况下，`C`它是一个类型名，但尚未声明。

另一个问题是构造函数`C`要对`sometype`对象做什么。我怀疑它会完全按照`P`'s 的构造函数所做的那样做，并且由于无论如何您都需要调用基类的构造函数，因此构造函数的实现`C`很可能如下所示：

```
template <typename T>
class C : public P<T> {
public:
  C(T* sometype):P<T>(sometype) { }
}; 
```

最后一点：C++11 实际上提供了构造函数继承作为一个特性。由于您对使用 C++11 功能不感兴趣（虽然这确实很遗憾），并且由于许多编译器尚未实现该功能，所以我不会详细介绍。对特征定义的参考在[这里](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2540.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:30:12.833

如果您需要通过**子类型指定****基类** ，请尝试以下操作：`type T`

 **```
template<typename T>
class C : public P<T> {
  public:
    C(T* pT): P(pT) {}
}

int* pMyInt;
C<int> myClass(mMyInt); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:30:24.853

您应该编写一个 C 的构造函数，它采用相同的参数并将其传递给其父类，如下所示：

```
C(T* sometype)
    : P(sometype)
{
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T11:32:28.767

> 现在 C 会隐藏 P(sometype*) 构造函数吗？

是的，在`C`不继承 P 的构造函数的意义上。所以`C`不会有父类的构造函数可供类的用户使用。

> 但我需要 P(ometype*) 构造函数在 C 中可用

这是可能的：您只需直接调用它：

```
P::P(sometype*) 
```**

# c# - 需要 C# 构造函数语法解释

> ID：12036776
> 
> 赞同：3
> 
> 时间：2012-08-20T11:25:34.847
> 
> 标签：c#, constructor

有人可以向我解释以下构造函数语法吗？我以前没有遇到过它并在同事代码中注意到它。

```
public Service () : this (Service.DoStuff(), DoMoreStuff())
{ } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T11:28:07.350

它链接到同一类中的另一个构造函数。基本上，任何构造函数都可以*使用*链接到同一类中的另一个构造函数`: this (...)`，*或者*使用 链接到基类中的构造函数`: base(...)`。如果两者都没有，则相当于`: base()`.

链式构造器在实例变量初始化器执行*之后*，构造器主体*之前执行。*

有关更多信息，请参阅[我关于构造函数链接的文章](http://pobox.com/~skeet/csharp/constructors.html)或[关于 C# 构造函数的 MSDN 主题](http://msdn.microsoft.com/en-us/library/ms173115.aspx)。

例如，考虑以下代码：

```
using System;

public class BaseClass
{
    public BaseClass(string x, int y)
    {
        Console.WriteLine("Base class constructor");
        Console.WriteLine("x={0}, y={1}", x, y);
    }
}

public class DerivedClass : BaseClass
{
    // Chains to the 1-parameter constructor
    public DerivedClass() : this("Foo")
    {
        Console.WriteLine("Derived class parameterless");
    }

    public DerivedClass(string text) : base(text, text.Length)
    {
        Console.WriteLine("Derived class with parameter");
    }

}

static class Test
{
    static void Main()
    {
        new DerivedClass();
    } 
} 
```

该`Main`方法调用中的无参数构造函数`DerivedClass`。它链接到 中的单参数构造函数`DerivedClass`，然后链接到 中的双参数构造函数`BaseClass`。当该基本构造函数完成时，单参数构造函数`DerivedClass`继续，然后当*它*完成时，原始无参数构造函数继续。所以输出是：

```
Base class constructor
x=Foo, y=3
Derived class with parameter
Derived class parameterless 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T11:27:09.600

在这种情况下，必须有第二个构造函数，它将接受两个参数—— `Service.DoStuff()`and的返回值`DoMoreStuff()`。这两个方法必须是静态方法。

# compact-framework - 如何在运行时添加组件（Compact Framework 3.5）？

> ID：12036778
> 
> 赞同：0
> 
> 时间：2012-08-20T11:25:36.290
> 
> 标签：compact-framework

我需要在运行时添加`PictureBox`.

会有几个到几个。我该怎么做？

程序员基于`Compact Framework 3.5`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:03:41.060

您将按照添加所有控件的相同方式执行此操作。一般来说，它看起来像这样：

```
var newControl = new Control(); // or new PictureBox
// initialize properties like size, position, etc
myForm.Controls.Add(newControl); 
```

了解如何为不同控件完成此操作的一个好方法是查看设计器创建的 conde for `InitializeComponents`，因为它创建了在运行时在设计器中完成的所有控件和布局。

# html - 将下拉子菜单与父菜单宽度对齐

> ID：12036779
> 
> 赞同：1
> 
> 时间：2012-08-20T11:25:39.667
> 
> 标签：html, css

我想使用jQuery将我的下拉菜单保留在body wrapper中，只需告诉我这个mega-menu的下拉菜单如何在body wrapper宽度内

[在此处查看演示](http://www.geektantra.com/projects/jquery-megamenu-2/)

截屏：

在第一个示例中，下拉菜单浮动在身体包裹或身体宽度之外。而在第二个示例中，下拉菜单位于正文包装器内。我想将下拉菜单保留在正文包装内，下拉菜单不应浮动在正文宽度之外

![菜单](../Images/d594c94315a05b3ab14de31568de08db.png)

# multithreading - 大规模多线程操作

> ID：12036782
> 
> 赞同：3
> 
> 时间：2012-08-20T11:25:43.640
> 
> 标签：multithreading, macos, cocoa, grand-central-dispatch, nsoperationqueue

**用下面的新代码编辑**

我是多线程的新手，但为了实现我的目标，快速完成并学习新知识，我决定使用多线程应用程序来完成。

目标：从文件中解析大量字符串，并使用 CoreData 将每个单词保存到 SQLite 数据库中。巨大，因为字数约为 300.000 ...

所以这是我的方法。

步骤 1\. 将所有单词解析到文件中，并将其放入一个巨大的 NSArray。（快速完成）

步骤 2\. 创建插入 NSBlockOperation 的 NSOperationQueue。

主要问题是该过程开始非常快，但很快就会减慢。我正在使用最大并发操作设置为 100 的 NSOperationQueue。我有一个 Core 2 Duo 进程（没有 HT 的双核）。

我看到使用 NSOperationQueue 创建 NSOperation 有很多开销（停止调度队列需要大约 3 分钟才能创建 300k NSOperation。）当我开始调度队列时 CPU 达到 170%。

我还尝试删除 NSOperationQueue 并使用 GDC（300k 循环是瞬时完成的（注释行））但使用的 cpu 仅为 95%，问题与 NSOperations 相同。很快这个过程就变慢了。

一些技巧可以做得很好？

这里有一些代码（原始问题代码）：

```
- (void)inserdWords:(NSArray *)words insideDictionary:(Dictionary *)dictionary {
    NSDate *creationDate = [NSDate date];

    __block NSUInteger counter = 0;

    NSArray *dictionaryWords = [dictionary.words allObjects];
    NSMutableSet *coreDataWords = [NSMutableSet setWithCapacity:words.count];

    NSLog(@"Begin Adding Operations");

    for (NSString *aWord in words) {

        void(^wordParsingBlock)(void) = ^(void) {
            @synchronized(dictionary) {
                NSManagedObjectContext *context = [(PRDGAppDelegate*)[[NSApplication sharedApplication] delegate] managedObjectContext];                

                [context lock];

                Word *toSaveWord = [NSEntityDescription insertNewObjectForEntityForName:@"Word" inManagedObjectContext:context];
                [toSaveWord setCreated:creationDate];
                [toSaveWord setText:aWord];
                [toSaveWord addDictionariesObject:dictionary];

                [coreDataWords addObject:toSaveWord];
                [dictionary addWordsObject:toSaveWord];

                [context unlock];

                counter++;
                [self.countLabel performSelectorOnMainThread:@selector(setStringValue:) withObject:[NSString stringWithFormat:@"%lu/%lu", counter, words.count] waitUntilDone:NO];

            }
        };

        [_operationsQueue addOperationWithBlock:wordParsingBlock];
//        dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
//        dispatch_async(queue, wordParsingBlock);
    }
    NSLog(@"Operations Added");
} 
```

先感谢您。

编辑...

感谢 Stephen Darlington，我重写了我的代码，我发现了问题所在。最重要的是：**不要在 Thread 之间共享 CoreData 对象**……这意味着不要混合不同上下文检索到的 Core 数据对象。

这让我使用了导致慢动作代码执行的@synchronized(dictionary)！比我只使用 MAXTHREAD 实例删除了大量的 NSOperation 创建。（2 或 4 而不是 300k ......差别很大）

现在我可以在 30/40 秒内解析 300k+ 字符串。感人的！！我仍然有一些问题（接缝它解析的单词比仅用 1 个线程解析的单词多，如果线程超过 1 个，它不会解析所有单词......我需要弄清楚）但现在代码真的很有效。也许下一步可能是使用 OpenCL 并将其注入 GPU :)

这里是新代码

```
- (void)insertWords:(NSArray *)words forLanguage:(NSString *)language {
    NSDate *creationDate = [NSDate date];
    NSPersistentStoreCoordinator *coordinator = [(PRDGAppDelegate*)[[NSApplication sharedApplication] delegate] persistentStoreCoordinator];

    // The number of words to be parsed by the single thread.
    NSUInteger wordsPerThread = (NSUInteger)ceil((double)words.count / (double)MAXTHREADS);

    NSLog(@"Start Adding Operations");
    // Here I minimized the number of threads. Every thread will parse and convert a finite number of words instead of 1 word per thread.
    for (NSUInteger threadIdx = 0; threadIdx < MAXTHREADS; threadIdx++) {

        // The NSBlockOperation.
        void(^threadBlock)(void) = ^(void) {
            // A new Context for the current thread.
            NSManagedObjectContext *context = [[NSManagedObjectContext alloc] init];
            [context setPersistentStoreCoordinator:coordinator];

            // Dictionary now is in accordance with the thread context.
            Dictionary *dictionary = [PRDGMainController dictionaryForLanguage:language usingContext:context];

            // Stat Variable. Needed to update the UI.
            NSTimeInterval beginInterval = [[NSDate date] timeIntervalSince1970];
            NSUInteger operationPerInterval = 0;

            // The NSOperation Core. It create a CoreDataWord.
            for (NSUInteger wordIdx = 0; wordIdx < wordsPerThread && wordsPerThread * threadIdx + wordIdx < words.count; wordIdx++) {
                // The String to convert
                NSString *aWord = [words objectAtIndex:wordsPerThread * threadIdx + wordIdx];

                // Some Exceptions to skip certain words.
                if (...) {
                    continue;
                }

                // CoreData Conversion.
                Word *toSaveWord = [NSEntityDescription insertNewObjectForEntityForName:@"Word" inManagedObjectContext:context];
                [toSaveWord setCreated:creationDate];
                [toSaveWord setText:aWord];
                [toSaveWord addDictionariesObject:dictionary];

                operationPerInterval++;

                NSTimeInterval endInterval = [[NSDate date] timeIntervalSince1970];

                // Update case.
                if (endInterval - beginInterval > UPDATE_INTERVAL) {

                    NSLog(@"Thread %lu Processed %lu words", threadIdx, wordIdx);

                    // UI Update. It will be updated only by the first queue.
                    if (threadIdx == 0) {

                        // UI Update code.
                    }
                    beginInterval = endInterval;
                    operationPerInterval = 0;
                }
            }

            // When the NSOperation goes to finish the CoreData thread context is saved.
            [context save:nil];
            NSLog(@"Operation %lu finished", threadIdx);
        };

        // Add the NSBlockOperation to queue.
        [_operationsQueue addOperationWithBlock:threadBlock];
    }
    NSLog(@"Operations Added");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:37:24.930

一些想法：

*   将最大并发操作数设置得如此之高不会产生太大影响。如果您有两个核心，则不太可能超过两个
*   看起来您`NSManagedObjectContext`对所有流程都使用相同的。不是很好
*   假设您的最大并发操作数*为*100。瓶颈将是主线程，您尝试在其中更新每个操作的标签。尝试为每*n*条记录而不是每条记录更新主线程
*   如果您正确使用 Core Data，则不需要锁定上下文……这意味着为每个线程使用不同的上下文
*   你似乎从来没有保存上下文？
*   批处理操作是提高性能的好方法......但请参阅上一点
*   正如您所建议的，创建 GCD 操作会产生开销。为每个单词创建一个新单词可能不是最佳选择。您需要平衡创建新流程的开销与并行化的好处

简而言之，即使您使用 GCD 之类的东西，线程也很难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:01:12.113

没有测量和分析很难做到，但在我看来可疑的是你保存了迄今为止保存的完整单词词典，并保存了每个单词。所以每次保存的数据量越来越大。

```
// the dictionary at this point contains all words saved so far
// which each contains a full dictionary
[toSaveWord addDictionariesObject:dictionary];

// add each time so it gets bigger each time
[dictionary addWordsObject:toSaveWord]; 
```

因此，每次保存都会保存越来越多的数据。为什么要保存每个单词的所有单词的字典？

其他一些想法：

*   为什么要建立你从不使用的 coreDataWords？
*   我想知道您是否获得了您在同步整个工作块时的并发性。

要尝试的事情：

*   除了您正在构建的字典之外，在 toSaveWord 上注释掉字典并重试 - 看看它是您的数据/数据结构还是 DB/coreData。
*   做第一个，但也要创建它的串行版本，看看你是否真的获得了并发收益。

# oracle - 报告模板中的 Oracle Apex 自定义标签

> ID：12036783
> 
> 赞同：0
> 
> 时间：2012-08-20T11:25:51.363
> 
> 标签：oracle, oracle-apex

我正在为 oracle apex 应用程序创建报告模板。我创建了一个自定义标签，例如#TITLE#，当我运行我的报告时，数据没有显示，它只显示#TITLE#。更具体地说，这里是我的代码。

## 报告模板（列模板 1）

```
<td#ALIGNMENT# headers="#COLUMN_HEADER_NAME#" class="data">#TITLE#</td> 
```

因此，在我的列模板 1 中，自定义标签 #TITLE# 是我希望放置查询中的数据的位置。这是我的查询

```
SELECT f.filename AS TITLE
FROM files f 
```

在我的报告中，我选择了我的自定义报告模板。我知道我可能缺少一些配置复选框以使数据识别自定义标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:07:10.133

在 APEX 中有 2 种报表模板：列模板和行模板。 ![在此处输入图像描述](../Images/94465e698e4cf708a831bd856fad3075.png)

您需要行模板版本，但选择了列模板版本，它只允许通用 #COLUMN_VALUE# 而不是特定的命名列。

# facebook-graph-api - Facebook FQL 查询 (#601) 解析器错误：第 58 位出现意外的“#”

> ID：12036788
> 
> 赞同：5
> 
> 时间：2012-08-20T11:26:20.240
> 
> 标签：facebook-graph-api, facebook-php-sdk, facebook-fql

这是我第一次无法自己找到错误的解决方案。我尝试执行 fql 查询，但我得到一个非常奇怪的响应：/

问题解答：

```
{
  "477215715631180":
      "SELECT name, start_time, location, creator, pic_square 
       FROM event WHERE eid=477215715631180",
  "creator_477215715631180":
      "SELECT name FROM profile WHERE id IN (SELECT creator FROM #477215715631180)"
 } 
```

回复：

```
(#601) Parser error: unexpected '#' at position 58. 
```

位置 58：

```
... FROM event WHERE ... 
```

[API 资源管理器。](https://developers.facebook.com/tools/explorer?fql=%7B%22477215715631180%22%3a%22SELECT%20name,%20start_time,%20location,%20creator,%20pic_square%20FROM%20event%20WHERE%20eid=477215715631180%22,%22creator_477215715631180%22%3a%22SELECT%20name%20FROM%20profile%20WHERE%20id%20IN%20%28SELECT%20creator%20FROM%20#477215715631180%29%22%7D)

有没有人有解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T11:47:53.037

问题似乎是您不能将子查询命名为与保留的 FQL 项目相同的名称。您在此处使用 id 作为查询指示符。Facebook 不喜欢这样。

我可以通过在子查询名称的开头添加“q”来运行您的查询：

```
{
  "q477215715631180":
      "SELECT name, start_time, location, creator, pic_square 
       FROM event WHERE eid=477215715631180",
  "creator_477215715631180":
      "SELECT name FROM profile WHERE id IN (SELECT creator FROM #q477215715631180)"
} 
```

For your parser error, Facebook's messages don't reference the whole FQL multiquery. Facebook parses each query individually and throws an error just for the current query it's parsing. So in your case, the first query parsed fine, then this error came from your `creator_` query, where the `#` occurs at position 58.

# ruby-on-rails - Fancybox 不显示来自 rails 的 ajax 内容渲染

> ID：12036789
> 
> 赞同：0
> 
> 时间：2012-08-20T11:26:30.503
> 
> 标签：ruby-on-rails, fancybox, fancybox-2

我已经实现了 fancybox 来呈现来自服务器的 ajax 内容

这是fancybox代码

```
 <%= link_to "Disallow Download",reason_path(audio),:class => "reasoning fancybox.ajax" %>

$('.reasoning').fancybox() 
```

现在每当我链接上面的链接时，内容都会从服务器渲染，但fancybox不会在浏览器上显示它

任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:49:04.300

您必须设置 fancybox 类型选项

```
$(".reasoning").fancybox({
'type': 'iframe'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:26:11.363

知道了 只需要`dataType`在 ajax 属性中指定

```
$('.reasoning').fancybox({ajax: {
  'dataType': 'html'
}) 
```

它就像魅力一样

# android - Android 浏览器 Facebook 重定向并不总是触发 URL 的意图

> ID：12036793
> 
> 赞同：6
> 
> 时间：2012-08-20T11:26:36.493
> 
> 标签：android, facebook, redirect, android-intent, intentfilter

我正处于一个真正的泡菜中，迫切需要一些帮助来解决我遇到的一个关键问题。

我花了几个月的时间编写一个 HTML5 应用程序/网站以及一个本机 Android 应用程序，它只是 HTML5 网站的 WebView 包装器。该应用程序的核心功能之一是用户可以将应用程序特定的 URL 共享到 Facebook 和 Twitter 等，以便他们的朋友可以关注共享的 URL，这将在他们的浏览器中打开我的应用程序的 HTML5 版本，或者最重要的是，如果他们是在 Android 上，他们安装了我的原生 Android 应用程序，他们被提示在我的应用程序中打开。

这是一个相当长的复杂问题，因此为简化起见，我将在这篇文章中始终使用一些特定的术语：

*   “MyApp 用户”是安装了我的原生 Android 应用程序的 Android 设备用户
*   “非 MyApp 用户”未安装我的原生 Android 应用程序的 Android 设备用户
*   “股票浏览器用户” 使用股票浏览器的股票 Android 用户
*   “非库存浏览器用户” 使用非库存浏览器的 Android 用户（请注意，三星 Galaxy SII 库存“互联网”应用程序被视为非库存）
*   Android 上的“选择应用程序对话框” 出现的操作系统对话框询问用户他们想要打开操作/意图/url/文档的应用程序，以及他们是否希望默认始终使用此应用程序

* * *

我的 AndroidManifest.xml 包含以下内容...

```
<intent-filter>
  <action android:name="android.intent.action.VIEW" />
  <category android:name="android.intent.category.DEFAULT" />
  <category android:name="android.intent.category.BROWSABLE" />
  <data android:scheme="http" android:host="myapp.com" android:pathPrefix="/" />
</intent-filter> 
```

在任何正常情况下测试时都可以完美运行。例如，如果“MyApp 用户”跟随指向[http://myapp.com/sharedpage](http://myapp.com/sharedpage)的直接链接，则会出现“选择应用程序对话框”。太好了，我已经正确配置了我的 AndroidManifest.xml。

然而，在关键的 Facebook 分享场景中，事情并不总是有效。它并不总是有效，因为 Facebook 的原生 Android 应用程序和 Facebook 的移动网站 (http://m.facebook.com) 都不会直接链接到共享 URL，而是通过 Facebook 重定向页面链接。例如，如果[http://myapp.com/sharedpage](http://myapp.com/sharedpage)被共享，Facebook 最终将传递以下 URL：

[http://m.facebook.com/l.php?u=http%3A%2F%2Fmyapp.com%2Fsharedpage&h=EAQGpLtuF&enc=AZMXYZg7XwQ39zlWkKSGnLw62lEbtbMeWFmRwRZINoOcg0UgZe3fUVPgqQzV1nuTipSVnquV3a3ovqu7HQFUf3bb3ZJ1gYG8dEOJXzPf6RJGflf9_x8w-6CCXu8G2VZqgfD7lx6EbLTSKLnF56_o5khHybycPUlhpdfLsk6M9muer4jMOmPK6_kfjTq2gvnYNNpStcF0ilJD6nacPqx_1xsdYkUMpKYWbJfSo7qqv1S5xT5KRaLPxl8zmAkYc0FhwyTdn-tUGwRBbbdM4QCd2Z75Tb_VeJG3LvbDwFAbp6G3kH3LOSxVtTd5MST4pUW8xmhNeTUVBVXV16OD27QcsSWOlEfL72fxn11PDE5s4WWsXMnwhDJLUAWOAna7lziBnWzjZdlQK_amI9nhcegaOLDLNFCp125rZS3jxFXf7gtF9g0BsmnPZ2Gjxkc6UgQXhEYldllq9nwpShGbnZDlSg0_&s=1](http://m.facebook.com/l.php?u=http%3A%2F%2Fmyapp.com%2Fsharedpage&h=EAQGpLtuF&enc=AZMXYZg7XwQ39zlWkKSGnLw62lEbtbMeWFmRwRZINoOcg0UgZe3fUVPgqQzV1nuTipSVnquV3a3ovqu7HQFUf3bb3ZJ1gYG8dEOJXzPf6RJGflf9_x8w-6CCXu8G2VZqgfD7lx6EbLTSKLnF56_o5khHybycPUlhpdfLsk6M9muer4jMOmPK6_kfjTq2gvnYNNpStcF0ilJD6nacPqx_1xsdYkUMpKYWbJfSo7qqv1S5xT5KRaLPxl8zmAkYc0FhwyTdn-tUGwRBbbdM4QCd2Z75Tb_VeJG3LvbDwFAbp6G3kH3LOSxVtTd5MST4pUW8xmhNeTUVBVXV16OD27QcsSWOlEfL72fxn11PDE5s4WWsXMnwhDJLUAWOAna7lziBnWzjZdlQK_amI9nhcegaOLDLNFCp125rZS3jxFXf7gtF9g0BsmnPZ2Gjxkc6UgQXhEYldllq9nwpShGbnZDlSg0_&s=1)

如果“MyApp 用户”关注这些 Facebook 链接之一，则可能会发生以下两种情况之一，具体取决于他们使用的浏览器...

**MyApp 股票浏览器用户：**

如果用户安装了股票 Android 并使用股票 Android 浏览器，那么一切正常，因为发生以下事件......

*   FB l.php URL 的 Intent 触发
*   FB URL 在 ANDROID 股票浏览器中打开
*   加载 FB l.php 并启动​​重定向到[http://myapp.com/sharedpage](http://myapp.com/sharedpage)
*   **[http://myapp.com/sharedpage](http://myapp.com/sharedpage) URL的 Intent 触发**
*   “选择应用程序对话框”提示用户在 MY NATIVE APP 或浏览器中打开

**MyApp 非股票浏览器用户：**

但是，如果用户...

1.  已安装并使用非现货 Android 浏览器，例如 Dolphin HD/mini、Opera Mobile/Mini 等，或
2.  具有制造商定制的 Android 版本（例如三星 Galaxy SII 等），因此具有定制的浏览器

...然后这是主要问题，因为发生了以下事件...

*   FB l.php URL 的 Intent 触发
*   FB URL 在非股票浏览器中打开
*   加载 FB l.php 并启动​​重定向到[http://myapp.com/sharedpage](http://myapp.com/sharedpage)
*   **非库存浏览器未触发意图，未出现“选择应用程序对话框”，未提示用户在我的应用程序中打开 URL**
*   [http://myapp.com/sharedpage](http://myapp.com/sharedpage) URL 加载并呈现在非库存浏览器的选项卡中

* * *

**客户端重定向**

为了确认导致问题的重定向，我创建了一个非常简单的 HTML 页面，名为“clientSideRedirector.htm”

```
<html><body><script>
   window.location.href = "http://myapp.com/sharedpage";
</script></body></html> 
```

如果 My-App/non-stock 浏览器用户打开[http://myapp.com/clientSideRedirector.htm](http://myapp.com/clientSideRedirector.htm)，则不会出现“应用程序选择对话框”。失败。

如果 My-App/stock 浏览器用户打开[http://myapp.com/clientSideRedirector.htm](http://myapp.com/clientSideRedirector.htm)会出现“应用程序选择对话框”。

这似乎与我们在 Facebook 共享/重定向中看到的一致。

**服务器端 (302) 重定向**

我还想尝试服务器端重定向，所以我创建了一个 .NET dotNetRedirect.ashx 页面：

```
public class ShareRedirect : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
            context.Response.Redirect("http://myapp.com/sharedpage");
    }
    public bool IsReusable { get { return false; } }
} 
```

这对客户端重定向有一个非常有趣且不同的结果。
如果 My-App 用户打开[http://myapp.com/dotNetRedirect.htm](http://myapp.com/dotNetRedirect.htm)，则无论用户浏览器如何，都会出现“应用程序选择对话框”。所以这种类型的重定向似乎有效！

* * *

**尝试的解决方案 A**

（双重重定向：Facebook l.php 重定向到服务器端重定向到应用 URL）

我认为这可以解决我的 Facebook 分享问题。如果我将[http://myapp.com/dotNetRedirect.ashx](http://myapp.com/dotNetRedirect.ashx) URL 共享给 Facebook，那么 Facebook 可能会重定向到 dotNetRedirect.htm 页面，然后服务器端重定向会强制打开“选择应用程序对话框”提示。

不幸的是，这不起作用，在非股票浏览器中，如果第一个重定向没有触发意图/“选择应用程序对话框”，则进一步重定向也不会出现。大量的内脏。

* * *

**尝试的解决方案 B**

（使用自定义方案）

用尽了服务器端的想法后，我想我会调查使用自定义 URI 方案来触发“应用程序选择对话框”。

AndroidManifest.xml：

```
<intent-filter>
  <action android:name="android.intent.action.VIEW" />
  <category android:name="android.intent.category.DEFAULT" />
  <category android:name="android.intent.category.BROWSABLE" />
  <data android:scheme="myapp" />
</intent-filter> 
```

重定向.htm

```
<html><body><script>
   window.location.href = "myapp.com://sharedpage";
</script></body></html> 
```

这确实有效，即使使用非库存浏览器，“选择应用程序对话框”也会通过 DB l.php URL 出现。然而，这并不是一个真正可行的解决方案，因为“非 MyApp 用户”在重定向到 myapp.com://sharedpage URL 时会留下“网页不可用”页面。]

* * *

还有其他人有其他好的想法或建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T16:41:09.733

I made some further developments in my search and found that performing a "fake click" was the solution that worked in the majority of scenarios (but not all).

If the user wishes to share URL [http://myapp.com/sharedpage](http://myapp.com/sharedpage), then I actually post the following URL to Facebook [http://myapp.com/share.htm?redirectUrl=sharedpage](http://myapp.com/share.htm?redirectUrl=sharedpage)

share.htm is just a javascript redirect page that immediately redirects to the appropriate page. It is clever though as on Android instead of just using `window.location.replace` it uses a fake click of a button with the link which can force an intent to be triggered on some devices/some browsers. Code looks like below.

```
<!DOCTYPE HTML>
<html>
<body>
    <script type="text/javascript">
        var redirectUrlRelativeToThisPage = ""; // Read off the querystring here
        var isAndroidDevice = (/android/gi).test(navigator.userAgent);

        if (isAndroidDevice) {
            // Android device. If the user isn't using a stock browser then window.location.redirect() doesn't always
            // trigger an Intent (and prompt to open Native app) so instead attempt to fake click a hyperlink with the
            // URL as this works more reliably (but not always).
            var linkToFakeClick = document.createElement("a");
            linkToFakeClick.href = redirectUrlRelativeToThisPage;
            var fakeMouseClickEvent = document.createEvent("MouseEvents");
            fakeMouseClickEvent.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
            linkToFakeClick.dispatchEvent(fakeMouseClickEvent);
        }
        // If we got here either we're not on an Android device or the fake click didn't work so just redirect normally
        window.location.replace(redirectUrlRelativeToThisPage);
    </script>
</body>
</html> 
```

In addition to the example code above and if it suited your scenario, you could also incorporate (in the event the fake click didn't work) two different "I do/don't have the app installed" buttons which link to the custom scheme URL (to force an intent) and the usual URL.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-14T19:35:17.510

[一个非常肮脏的解决方法是在http://m.facebook.com/l.php](http://m.facebook.com/l.php)上放置一个意图过滤器：

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data 
        android:scheme="http" 
        android:host="m.facebook.com" 
        android:path="/l.php" />
</intent-filter> 
```

然后解析查询字符串并通过另一个意图传递实际 URL（如果它不适合您的应用程序）。

但不推荐它，因为它可能看起来有点奇怪，将您的应用程序视为与您的应用程序完全不相关的链接的选择。此外，如果用户第一次选择了您的应用，则会提示用户两次选择应用。唯一一次可以很好地工作（在链接不适合您的应用程序的情况下）是如果手机将您的应用程序设置为所有[http://m.facebook.com/l.php](http://m.facebook.com/l.php)请求的默认值。你仍然会搞乱 facebook 的内部运作。

希望 android 浏览器将来会更多地使用隐式意图，这是一个开始：[https ://code.google.com/p/chromium/issues/detail?id=235060](https://code.google.com/p/chromium/issues/detail?id=235060)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T12:49:09.640

您是否考虑过使用 Facebook 深度链接？ [http://developers.facebook.com/docs/mobile/android/deep_linking/](http://developers.facebook.com/docs/mobile/android/deep_linking/)

# php - 被 PHP preg_replace 阻碍

> ID：12036794
> 
> 赞同：0
> 
> 时间：2012-08-20T11:26:36.870
> 
> 标签：php, regex, preg-replace

以下 preg_replace 有问题：

```
$subject = '<div class="main"> <div class="block_bc"> <a href="index.php?x_param=11" class="BC-1"> Gallery</a> / <a href="path/Title_Item/?x_param=17" class="BC-2"> Title Item</a> / <span class="BC-3"> Bridge</span> </div> </div>';
$regex = '/(<div\sclass=\"block_bc\"[^>]*>)([^<\/div>]*>)(<\/div>)/is';   
$replacement = '<div class="block_bc"></div>';
preg_replace($regex, $replacement, $subject); 
```

基本上，我想结束，`<div class="main"> <div class="block_bc"></div> </div>`但它没有被选中。

谁能指出我的“明显”错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:34:44.850

You try to use character classes (`[]`) wrong. The `[^<\/div>]*` part means that number of characters except one of the following: `<`,`/`,`d`,`i`,`v`,`>`. This probably not what you meant.

What you could use is [non-greedy repeat](http://www.regular-expressions.info/repeat.html#lazy):

```
$regex = '/(<div\s*class=\"block_bc\"[^>]*>)(.+?)(<\/div>)/is'; 
```

Also, getting things out from html with regexp can be extremely brittle, try using the DOM for this with xpath. It's more verbose but also more resilient for badly formatted input:

```
$subject = '<div class="main"> <div class="block_bc"> <a href="index.php?x_param=11" class="BC-1"> Gallery</a> / <a href="path/Title_Item/?x_param=17" class="BC-2"> Title Item</a> / <span class="BC-3"> Bridge</span> </div> </div>';

libxml_use_internal_errors(true); // supress warnings
$doc = new DOMDocument;
$doc->loadHTML($subject);

$xpath = new DOMXpath($doc);
// get the <div class="main"> node for exporting
$main_node  = $xpath->query('//div[@class="main"]');
// select the block_bc classed div's childs, and the textnodes under it
$childNodes = $xpath->query('//div[@class="block_bc"]/* | //div[@class="block_bc"]/text()'); 
foreach ($childNodes as $c) {
    $c->parentNode->removeChild($c); // clear them all
}

// export the part of the document under the <div class="main">
print $doc->saveHTML($main_node->item(0)); 
// update:
// if you want the full document in html you can simply omit the parameter, with this you can get rid of the $main_node = ... line too
print $doc->saveHTML(); // this will print from doctype to </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:34:02.107

Pattern

```
~<div\sclass="block_bc"[^>]*>.*</div>~isU
```

will work until you add some divs inside "block_bc".

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:36:45.053

[^</div>] just creates a character class without '<', '/', 'd', 'i', 'v', and '>'. It is not doing what you think it would. Replacing the middle part with a non-greedy any match should do the trick:

```
'/(<div\sclass=\"block_bc\"[^>]*>)(.*?)(<\/div>)/is' 
```

# ios - Apple TV 开发者指南

> ID：12036795
> 
> 赞同：1
> 
> 时间：2012-08-20T11:26:41.020
> 
> 标签：ios, airplay, apple-tv

我正在寻找 iPhone 与 Apple TV 交互的开发人员指南。我不是在谈论为 Apple TV 开发应用程序。我说的是通过 iPhone 应用程序与 Apple TV 进行交互。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:36:04.517

I've asked this question before, and written an iOS app that fully supports an external screen and I've found there's very little you can actually do besides put stuff in a separate UIWindow.

An Apple TV presents itself to your iOS device as an AirPlay device and you can use it as an external screen and also send and receive remote control events if it's playing media from your device with some of the built in movie controllers.

If you connect to an AppleTV your app will receive a `UIScreenDidConnectNotification` and you can then choose to place a UIWindow in the second `UIScreen` instance made available to you.

Two places to look are:

**Edit** (changed the order)

1.  Apple's [View Programming Guide](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/CreatingWindows/CreatingWindows.html) probably has the most useful information on external screens and windows. I've linked to the section on windows that mentions external screens explicitly.

2.  [UIScreen documentation](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScreen_Class/Reference/UIScreen.html)

3.  [Event Handling Documentation](http://developer.apple.com/library/ios/#DOCUMENTATION/EventHandling/Conceptual/EventHandlingiPhoneOS/RemoteControl/RemoteControl.html) is less useful, as it only really applies if you're playing media from the Music App etc.

Hope that helps!

# plugins - Joomla 文章按评级 + 评级插件/组件实现

> ID：12036796
> 
> 赞同：0
> 
> 时间：2012-08-20T11:26:41.750
> 
> 标签：plugins, joomla, components, voting

我不想浪费大量时间来创建错误的功能

**计划：**

*   它已经完成了，但是为了更好地理解.. 我告诉你:) 所以我做的第一件事是：我添加了额外的文章，这些文章显示在主文章中。所以它看起来像这样：主要文章和我想要添加投票的额外九篇文章。
*   每篇文章（额外文章，不是主要文章）都必须像在 youtube 中一样具有评分 - 喜欢和不喜欢。我想使用[这个脚本](http://www.9lessons.info/2010/07/youtube-like-rating-jquery-and-ajax.html)（所以第一个问题是 - 如何创建这个投票并添加到这些文章中？我应该创建这个投票插件或组件吗？或者我已经可以将代码添加到文章视图和模型？每篇文章都会有不同的其中的文章，基于投票和（稍后可能？）标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:50:11.560

我不会尝试将投票脚本硬编码到核心 Joomla 内容文件中，您也不需要为此创建自己的插件。JED 上有很多投票插件，我认为它们会满足您的需求。你可以在这里找到它们：

[http://extensions.joomla.org/extensions/clients-a-communities/ratings-a-reviews](http://extensions.joomla.org/extensions/clients-a-communities/ratings-a-reviews)

我最喜欢的插件之一是：

[http://extensions.joomla.org/extensions/clients-a-communities/ratings-a-reviews/5483](http://extensions.joomla.org/extensions/clients-a-communities/ratings-a-reviews/5483)

希望这可以帮助。

# mysql - 使用 Hive 查询 Sqoop 到 MySQL

> ID：12036801
> 
> 赞同：1
> 
> 时间：2012-08-20T11:27:02.843
> 
> 标签：mysql, hadoop, hive, bigdata, sqoop

我想将 Hive 表中的数据 sqoop 到 MySQL 表中。两者都有相同的列集，但它们的顺序不同。

有没有办法使用具有属于 mysql 表的列顺序的 Hive 查询将数据sqoop 到 mysql 表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:10:15.503

Sqoop 目前不支持从 Hive 查询“导出”操作。支持的解决方法是运行您的 Hive 查询，该查询将更改 Hive 中的列顺序并将其结果作为临时表存储在 Hive 中。然后，您可以使用 Sqoop 导出此临时表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:04:33.803

`sqoop export`您可以使用该`--columns`选项传递您需要的 MySQL 列顺序。例如，如果您的 Hive 表按顺序排列它们，`A, B, C`那么您运行`sqoop export --connect ... --columns A,B,C`以告诉 MySQL 它获取列的顺序。您必须使用目标 MySQL 表的列名。

# javascript - Javascript 中什么更快？循环或重复的函数调用？

> ID：12036806
> 
> 赞同：3
> 
> 时间：2012-08-20T11:27:16.027
> 
> 标签：javascript, performance

这两位中哪一位执行（计数）更快？

```
var i = 0;
while(true){
    i++;
} 
```

或者

```
var i = 0;
inc = function(){
    i++;
    inc();
} 
```

如果循环代码/函数变长，首选方式会改变吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T11:32:13.787

这只会给你一个堆栈溢出，因为递归没有结束条件：

```
var i = 0;
inc = function(){
    i++;
    inc();
} 
```

对于足够大的`i`，这将比标准循环更快地失败。

更一般地说，调用函数比循环的开销更大。当它有助于您的代码可重用或可读时，请创建一个函数。一个循环很快。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T11:32:02.583

如果您的迭代次数很少，那也没关系。调用函数有更多开销，但这对于短循环并没有太大的区别。

第二种方法受堆栈大小的限制。如果迭代次数过多，它将耗尽堆栈空间并崩溃。

因此，第一种方法会运行得更快，但整个问题是没有实际意义的，因为第二种方法在一个足够长的循环中崩溃的风险很大，以至于速度会有所不同。

# android - 线程，无法在未调用 looper.prepare 的线程内创建处理程序

> ID：12036807
> 
> 赞同：0
> 
> 时间：2012-08-20T11:27:20.567
> 
> 标签：android, multithreading, location, handler, looper

我在尝试调用时收到“无法在未调用 looper.prepare 的线程内创建处理程序”错误，

locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);

但是，如果我不在线程内调用它（ run() ）它工作正常..我该怎么办？

编辑：MyAlarmService.java

```
private Handler handler = new Handler(){

    @Override
    public void handleMessage(Message msg) {
        // TODO Auto-generated method stub
        super.handleMessage(msg);
        System.out.println("Handle MSGGGGGGGGGG");

    }

};

@Override
public void onStart(Intent intent, int startId) {
 // TODO Auto-generated method stub
 super.onStart(intent, startId);

 WorkerThreads WT1 = new WorkerThreads("Thread1");
 WorkerThreads WT2 = new WorkerThreads("Thread2");
    WT1.start();
    WT2.start();
}

class WorkerThreads extends Thread{

    public WorkerThreads(String string) {
        // TODO Auto-generated constructor stub
        super(string);
    }

    @Override
    public void run() {
        // TODO Auto-generated method stub
        super.run();

        if(getName().equals("Thread1")){
            System.out.println("MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM");
            GetAlarmCoordinates gcc = new GetAlarmCoordinates();
            gcc.init(getApplicationContext(),handler);
            /*try {
                wait();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }*/

              System.out.println(MyAlarmService.currentLatLon[0] + "   " + MyAlarmService.currentLatLon[1] );

        }else if(getName().equals("Thread2")){

        }

    }

} 
```

GetAlarmCoordinates.java

```
public void init(Context cont, Handler handler){

    mHandler = handler;
    locManager = (LocationManager) cont.getSystemService(Context.LOCATION_SERVICE);
    onClick();
}

 public void onClick() {
//  progress.setVisibility(View.VISIBLE);
    // exceptions will be thrown if provider is not permitted.
    System.out.println("GetCurrentLocation");
    try {
        gps_enabled = locManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    } catch (Exception ex) {
    }
    try {
        network_enabled = locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
    } catch (Exception ex) {
    }

    System.out.println("gps_enabled : "+gps_enabled+ " network_enabled : "+network_enabled);

    if (gps_enabled) {
        locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);
    }

    if (network_enabled) {
        locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locListener);
    }
}

     class MyLocationListener implements LocationListener {

    @Override
    public void onLocationChanged(Location location) {
        if (location != null) {
            // This needs to stop getting the location data and save the battery power.
            locManager.removeUpdates(locListener); 
            //locationManager.requestLocationUpdates(GPS_PROVIDER, intervall, distance, listener);

            latitude =  location.getLatitude();
            londitude = location.getLongitude();

            MyAlarmService.currentLatLon[0] = latitude;
            MyAlarmService.currentLatLon[1] = londitude;

            System.out.println("Alarm Coodinates lat : "+latitude+"  lon : "+londitude);
            mHandler.sendEmptyMessage(0);
        //notify();

        } 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:34:38.783

You can use the `Activity.runOnUiThread()` method to avoid this exception, here's the snippet:

```
activity.runOnUiThread(new Runnable() {

            @Override
            public void run() {
                    locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);
            }
        }); 
```

Hope this helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:37:02.730

我猜`locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);`必须在 UI 线程中运行。

解决方案：

只需在 UI 线程中运行它，无需创建新线程。

如果你正在跑步

```
`locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);` 
```

从另一个类，然后您可以通过活动实例运行代码：

```
activity.runOnUiThread(new Runnable() {

@Override
public void run() {
// Your code
locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);
}
}); 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-10T12:00:21.000

您可以`getMainLooper`在**Context**中使用，只需将上下文作为参数和用户 lopper 发送到您的类

```
locationManager.requestLocationUpdates(getProviderName(), time, meter, locationUpdateListener,context.getMainLooper()); 
```

# asp.net-mvc-3 - MVC3 DataAnnotations 服务器端验证

> ID：12036813
> 
> 赞同：3
> 
> 时间：2012-08-20T11:27:52.987
> 
> 标签：asp.net-mvc-3, validation, data-annotations, server-side

所以我是 MVC3 的新手，并且正在使用 DataAnnotations 进行验证。客户端一切正常，但如何让服务器端版本正常工作？如果我禁用 Javascript，则看不到任何验证。

我的模型看起来像这样

```
[Required(ErrorMessageResourceName = "Verplicht", ErrorMessageResourceType = typeof (ValidatieStrings))]
    [Display(Name="Voorletters", ResourceType = typeof (VeldNaamStrings))]
    public string Voorletters { get; set; } 
```

我的控制器看起来像这样

```
using System.Web.Mvc;
using inschrijven_werknemer.Models;

namespace inschrijven_werknemer.Controllers
{
    public class HomeController : LocalizationController
    {
        public ActionResult Index()
        {
            return View(new MedewerkInfoModel());
        }
    }
} 
```

我的视图看起来像这样

```
@model inschrijven_werknemer.Models.MedewerkInfoModel

<div class="stap-div" id="stap2">
    @Html.EditorForModel("MedewerkInfoModel")
</div> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T12:25:20.263

你可以做这样的事情......使用`Model.IsValid`属性。

所以你可以试试这个：

```
[HttpPost]
public ActionResult Index()
{
    if (ModelState.IsValid)
    {
        return View(new MedewerkInfoModel());
    }
    return View();
} 
```

此处提供更详细的阅读：[https](https://stackoverflow.com/a/5969156/1182982) ://stackoverflow.com/a/5969156/1182982和[https://stackoverflow.com/a/4760494/1182982](https://stackoverflow.com/a/4760494/1182982)

# html - 如何在 html5 混合应用程序中添加 webview，就像我们在本机应用程序中添加 webview 一样？

> ID：12036814
> 
> 赞同：0
> 
> 时间：2012-08-20T11:28:01.330
> 
> 标签：html

如何在 html5 混合应用程序中添加 webview，就像我们在本机应用程序中添加 webview

请不要混淆 html5 应用程序在 webview 中的包装并将其添加为本机应用程序。

我需要的是在显示 url 内容的 html5 应用程序中添加一个 web 视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:36:35.723

If you want to display the content of another url within your page, just use an `iframe`:

```
<body>
    <p>My stuff</p>
    <iframe src="url_to_load"></iframe>
</body> 
```

Have in account that `WebView` is a class of the Cocoa framework, which is written in objective-c and allows you to build Mac applications. You can't use this with Html

# jquery - IE在使用jquery从json对象构建动态列表时截断包含“&”的单词

> ID：12036818
> 
> 赞同：1
> 
> 时间：2012-08-20T11:28:22.040
> 
> 标签：jquery, html, internet-explorer

在测试我的功能在不同浏览器中的兼容性时，我发现了一个我在 IE 中不知道的行为。

当单词包含字符“&”时，它们看起来会被截断。

javascript 函数从服务器 (c#) 获取一个 json 对象并动态构建一个列表。如果对象的描述是“Test & Test”，那么当 Chrome 和 Firefox 按预期显示描述时，IE 会显示“Test”。

我找到的唯一解决方案是按 F12 并强制“文档模式”为“IE9 标准”。
我尝试了不同的文档类型，与不同的内容值一起使用，我已经包含了 javascript ie9.js 文件（使 MSIE 表现得像一个符合标准的浏览器的文件），将对象的描述包装在 div、span、p 或任何html中可用的一种标签，到目前为止还没有结果。

这是构建列表的 javascript 函数：

```
$.each(data, function (ind, c) {
  if ($container.find('option:contains("' + c.Description + '")').length > 0) {
    var name = c.Description;
    var $div = $('<div style="margin:0px;padding:0px;width:80%;float:left;" />').html(name).attr({ 'id': c._id });
    var $o = $('<li />').html($div).css({ 'margin': 0, 'padding': 0, 'width': '100%', 'font-size': '1em' })
    .addClass((ind % 2 == 0 ? 'odd' : 'even'));
    if (!(c.IsDefault)) {
      var $actionContainer = $('<div />').css({ 'height': 17, 'width': 17, 'float': 'right' });
      var $action = $('<button />').html('Delete')
      .css({ 'height': 16, 'width': 16 })
      .button({
        icons: { primary: 'ui-icon-trash' },
        text: false
      }).click(function () {
        if (confirm("Are you sure you wish to delete this object from the list?")) {
          var objectId= $(this).parent().parent().children(':first-child').attr('id');
          var server = $('#GroupServer').val();
          delete($container, server, objectId, $dialog);
        }
      });
      $action.removeClass('ui-corner-all');
      $actionContainer.append($action);
      $o.append($actionContainer);
    }
    $ul.append($o);
  }
}); 
```

和 json 对象：

```
{ "_id":1,"Description":"Test & Test", "IsDefault":true } 
```

有没有人见过这种行为？除了我已经尝试过的方式之外，是否有可能以其他方式将 IE 的文档模式强制为 IE9 标准？亲切的问候，

洛朗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:32:56.050

**您要从**什么更改文档模式？它最初是在怪癖模式下渲染的吗？如果是这样最有可能导致您的问题，请确保您拥有有效的文档类型、有效的 HTML 等。

# android - 在 SimpleAdapter 的 TextView 的 onClickListener() 中调用 finish()？

> ID：12036825
> 
> 赞同：1
> 
> 时间：2012-08-20T11:28:54.083
> 
> 标签：android, android-intent, onclicklistener, simpleadapter

初学者**Android**和**Java**开发人员在这里。

**我在SimpleAdapter**类中有这段代码，用于呈现包含**TextView**和**ImageView**的自定义列表。这是**TextView**处理另一个活动中的 URL 的部分。

```
 for (int i = 0; i < fromList.length; i++) {
        id = mySimpleAdapter.listMap.get(position).get("id");
        holder.textView[i].setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                //How to call finish() here for containing Activity?
                Intent i = new Intent (context, Details.class);
                i.putExtra("url", "http://foo.net/do?id="+id);
                context.startActivity(i);
            }
        });
    } 
```

我的问题是如何简单地调用包含此**SimpleAdapter**的链接**ListView的****Activity的****finish()**方法（以强制**Activity**在下次调用时完全重新加载）。

 ******感谢任何回答的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:31:52.810

实例化 时`SimpleAdapter`，您应该传递一个`Activity`实例而不是`Context`，然后调用`finish()`它。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-03T14:23:22.840

解决这个问题很简单。

首先，您应该声明一个活动实例

```
private Activity activity; 
```

然后，您应该在此变量中“保存”您的活动实例。在**OnCreate**方法中执行此操作。

```
activity = this; 
```

然后，只需在任何你想要的地方调用函数finish()

```
activity.finish(); 
```

希望对您有所帮助。******

# iphone - 基于 HTML 以编程方式创建 UIImage 和 UILabel

> ID：12036826
> 
> 赞同：1
> 
> 时间：2012-08-20T11:28:54.543
> 
> 标签：iphone, ios, xcode, cocoa-touch, ipad

我有一个像这样的 html 字符串：

[div][p]这里有一些文字[/p][img src=@"url"][b]这里是图片[/b][/div]

我怎样才能以编程方式创建这样的东西：

(UILabel) 这里有一些文字

(UIImage) 显示图像

（UILabel）（粗体）这是图片

这里重要的是解析 html 内容，获取所有段落、brs、图像，然后以编程方式创建 uiimages 和 uilabels，计算每一帧。

听起来有很多事情要做，但有人可以给我一个想法吗？谢谢！（PS 我知道如何以编程方式添加视图）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:34:54.673

也许您想[`UIWebView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)改用 ？

它有一个名为`loadHTMLString:baseURL:`您可以使用的方法，让它显示来自字符串的 HTML。

# java - scala for 循环值不是 Int 的成员

> ID：12036827
> 
> 赞同：0
> 
> 时间：2012-08-20T11:28:57.467
> 
> 标签：java, scala, pug

我遇到了一个`value map is not a member of Int`错误，我不确定这意味着什么，所以我无法弄清楚。

我有两个页面，scala.html 和 scala.jade。创建 template.scala 文件时会出现此问题。这是创建问题的两个页面的代码：

```
scala.html
@page.getProduct().getRichContent().size()
@for(i <- page.getProduct().getRichContent().size()) {
<p>@page.getProduct().getRichContent.get(i)</p>
}

scala.jade
p @page.getProduct().getRichContent().size()
| @for (i <- page.getProduct().getRichContent().size()) {
p @page.getProduct().getRichContent.size()
} 
```

抛出的错误是：

```
value map is not a member of int
for(i <- page.getProduct().getRichContent().size()) yield /*74.63*/
                                                ^ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T11:35:00.397

```
for(i <- 0 to page.getProduct().getRichContent().size()) 
```

是你在找什么。

# android - 在android中获取微录制音频的指纹/语音打印

> ID：12036829
> 
> 赞同：3
> 
> 时间：2012-08-20T11:29:04.743
> 
> 标签：android, audio, voice-recognition, fingerprint, audio-fingerprinting

我正在尝试看看这是否可行...在此先感谢大家:)

我想制作一个应用程序，它可以识别从麦克风中获取的一些音频。现在我只需要获取指纹（或音频我不知道英文的确切名称^^）。`"sjd78fhwHJsdjsDjwrkf"`类似于音频指纹形状的文本。

我只需要知道如何在 android 中获取音频的指纹，但我在 java/android 的所有这些音频识别中都找不到简单的解决方案。

谢谢大家，对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:48:13.527

听起来您想要的是所谓的“音频指纹识别”。我所知道的唯一开源音频指纹识别系统叫做“echoprint” [http://echoprint.me/](http://echoprint.me/)

# ruby-on-rails - 为什么我的 Rails 应用程序中的 JavaScript 文件出现异常行为？

> ID：12036831
> 
> 赞同：0
> 
> 时间：2012-08-20T11:29:23.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3

因此，我的控制器有 3 个以下 JS 文件：

```
movie.js.coffeee
application.js
facebook.js.coffee.erb
sessions.js.coffee
users.js.coffee 
```

出于某种原因，当我将 JS 代码放入我的 users.js.coffee 或 facebook.js.coffee.erb（或任何其他文件）中的 $(document).ready 中时，它不会触发。即我在 users.js.coffee 中放了一个简单的警报：

```
$ ->
  alert 'hello' 
```

但这不会执行。

我还有代码可以在 facebook.js.coffee.erb 中使用 Facebook 的 JavaScript SDK，但是当我将代码放在 $(document).ready() 中时，这一切都不会执行。

我不得不求助于将我所有的 JS 代码放在 movie.js.coffee 文件中，并且它都可以在其中工作。在该文件中，我有以下代码：

```
$ ->

    #Home page login dropdown
    $('.dropdown-toggle').dropdown()

    $('.dropdown input, .dropdown label').click (e) ->
        e.stopPropagation()

    #Users edit page
    $('.hint a').tooltip()

    #Movie show page
    $('#movie-tabs a:first').tab('show')

    $('#movie-info').stickyMojo({footerID: '#footer', contentID: '#movie-description'}) 
```

我的 application.js 文件如下所示：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_self
//= require_tree . 
```

这很烦人，知道为什么会这样吗？当 JS 代码没有包装在 $(document).ready 的其他文件中时，它可以工作，但我最好避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:59:56.470

```
$ ->
  'alert hello' 
```

你只是在那里放了一个字符串，而不是调用`alert`，所以这不会做任何事情。

```
$ ->
  alert('hello') 
```

那应该行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:18:44.637

我记得前段时间遇到过这样的问题。我不知道为什么会发生这种情况，但是我删除了咖啡文件并再次创建它们并且它起作用了。还要检查你的缩进，因为 CoffeeScript 的语法是基于它的。

此外，您应该使用`jQuery ->`而不是`$ ->`这样，如果您可能在同一个项目中使用任何其他 JS 框架，它就不会感到困惑。

# jquery - 此选择器与此选择器中的元素

> ID：12036836
> 
> 赞同：2
> 
> 时间：2012-08-20T11:29:44.187
> 
> 标签：jquery, jquery-selectors

有没有办法同时包含：`$(this)`和`$("h3", this)`在同一行？

也许像`$("h3,", this)`什么？

我知道这是不对的，但我从未听说过类似的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T11:32:50.540

您可以使用[`.andSelf` *^([文档])*](http://api.jquery.com/andSelf/)：

```
$(this).find('h3').andSelf() 
```

它将堆栈中先前选择的元素 ( `$(this)`) 与当前选择 ( `$(this).find('h3')`) 合并。

# ms-access - MS Access 通过 ODBC 导出到特定的 DB2 模式

> ID：12036837
> 
> 赞同：1
> 
> 时间：2012-08-20T11:29:44.317
> 
> 标签：ms-access, odbc, db2

我正在尝试使用 ODBC 将表从 MS Access (2007) 导出到 DB2 (9.7 LUW)。只要我将表导出到我自己的模式中，我就可以做到这一点。

但是，我想将表导出到另一个模式。如何让 Access 将表放入另一个模式？在 Db2 中，`foo`模式`bar`中的表通常称为`bar.foo`. 但是，如果我将此作为要导出到的目标，Access 会给我一个错误：

*您输入的对象名称“bar.foo”不符合 Microsoft Access 对象命名规则。*

这是因为它不接受表名中的句点。有谁知道我可以如何克服这个限制？我可以在导出后将表复制过来，但其他一些用户无权在自己的模式中创建表；因此，这会阻止他们从 Access 中导出。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:38:15.850

Remou 建议使用这样的查询：

```
SELECT * 
INTO [ODBC;<db2 connection string>].schema.table
FROM ms_access_table1 
```

我相信可以使类似的东西适用于 DB2。如果有人需要解决方案，我建议尝试这个。然而，我决定坚持我目前笨拙的方法。遗憾的是，Access 的导出功能由于如此愚蠢的原因无法做到这一点。

# javascript - 在 for 循环之后返回一个值

> ID：12036842
> 
> 赞同：1
> 
> 时间：2012-08-20T11:30:01.367
> 
> 标签：javascript, arrays, object

所以，在过去的几个小时里，我一直在尝试在执行一些 for 循环后从函数中得到结果：

```
Cluster.prototype.initiate_api_data_fetching = function(username) {
var self = this,
    object = [];

return self.initiate_available_market_search(username, function(data_object){
    var json_obj = JSON.parse(data_object);
    for(var obj_key in json_obj) {
        for (var i = json_obj[obj_key].length - 1; i >= 0; i--) {
            self.initiate_market_items_data_fetching(username, json_obj[obj_key][i].site, function(data_obj){
                var json_object = JSON.parse(data_obj);
                for(var data_key in json_object) {
                    for (var j = json_object[data_key].length - 1; j >= 0; j--) {
                        object.push(json_object[data_key][j]);
                        /*log(object);*/
                    };
                };
                log(object);
            });
        };
    };
});
}; 
```

抽象所有变量和其他对您的读者没有意义的东西，我只想知道如何返回`object`包含我正在推入的数据的数组。如果我正在记录它的位置，一切都很好`/*log(object);*/`，但是如果我想在函数末尾查看对象包含的内容，我会得到一个空数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:37:47.260

我建议您在主函数中添加一个回调，并在完成后调用它..

```
Cluster.prototype.initiate_api_data_fetching = function (username, callback) {
    var self = this,
        object = [];

    return self.initiate_available_market_search(username, function (data_object) {
        var json_obj = JSON.parse(data_object)
            , counter = 0;

        function done() {
            counter -= 1;
            if (counter === 0) {
                callback(object);
            }
        }

        for (var obj_key in json_obj) {
            if (!json_obj.hasOwnProperty(obj_key)) { continue; }

            for (var i = json_obj[obj_key].length - 1; i >= 0; i--) {
                counter += 1;
                self.initiate_market_items_data_fetching(username, json_obj[obj_key][i].site, function (data_obj) {
                    var json_object = JSON.parse(data_obj);
                    for (var data_key in json_object) {
                        if (!json_object.hasOwnProperty(data_key)) { continue; }

                        for (var j = json_object[data_key].length - 1; j >= 0; j--) {
                            object.push(json_object[data_key][j]);
                            /*log(object);*/
                        }
                    }
                    done();
                });
            }
        }
    });
}; 
```

**PS。1 个**假设是initial_api_data_fetching 是异步的。
**PS。2**遵循上述评论者的建议来改进您的代码。我通过向您展示如何同步异步调用来回答您的直接问题，但不要止步于此。

# css - 背景图像在项目之外被截断。我怎样才能让它显示出来？

> ID：12036845
> 
> 赞同：0
> 
> 时间：2012-08-20T11:30:14.177
> 
> 标签：css, html-lists, background-image

我有一个正确定位在 ul li 项目背景上的背景图像。

我想将它定位在石灰容器的边缘之外，但是当我正确定位它时，它会切断不在容器内的图像的任何部分。

即使它在容器之外，我怎样才能让它显示出来，而不是像这样被切断？

![在此处输入图像描述](../Images/ea58bc2df191b5652ee5c34e11ab6ad9.png)

**期望的结果**

![在此处输入图像描述](../Images/16fb8b7e54068e9e184a8e0395639589.png)

**CSS**

```
body ul#main_navigation li li:hover > a, body ul#main_navigation li li.over > a
{
     background-image:url(/images/nav_arrow_right.png);
     background-repeat:no-repeat;
     background-position: 197px 12px;
     background-color: #0F0;
     color: #FFF;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:33:36.937

我不认为你可以有一个打破容器界限的图像。您可以尝试使 li 稍微宽一些，以适应箭头图像，然后将子元素向左移动。

或者您可以将箭头作为子元素的背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:41:20.443

为什么不将此图像作为子列表的第一个列表项的背景？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:15:07.290

您不能`background-image`从任何元素中突出。您可以使用`span`附加到元素，或将背景图像附加到它旁边的元素，给人一种它是原始元素一部分的错觉。

就我个人而言，我会`span`在位于 div 之外的元素内使用带有背景图像的 a。

# audio - 处理：将记录的声学空间（脉冲响应）应用于音频文件

> ID：12036846
> 
> 赞同：0
> 
> 时间：2012-08-20T11:30:16.263
> 
> 标签：audio, processing, minim

我需要将48kHz 的[音频文件的脉冲响应应用于 44.1kHz 的音频文件。](http://www.openairlib.net/sites/default/files/auralization/data/audiolab/york-minster/stereo/minster1_000_ortf_48k.wav)例如，可能是某人说话。如果我使用正确的术语，我需要将两个音频文件卷积在一起，这样听起来就像有人在大教堂里说话。

我不知道我是如何做到这一点的。我查看了 minim 库，因为它是我记得使用的唯一音频库，并且我找到了一个将低通滤波器的脉冲响应应用于音频文件的示例。有没有办法将两个音频文件卷积在一起以输出新声音？音频处理不是我的强项，所以请不要介意我的无知。谢谢，我正在努力解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T23:44:18.893

是的，卷积是你想要的，但首先你的源需要是相同的采样率。一旦您的源具有相同的采样率，您有两种选择来执行 S/R 转换：1\. 您可以“直接”进行，这是最直接的方式，但需要 M*N 时间，或者 2\. 您可以使用傅里叶变换来做到这一点，这要复杂得多，但速度更快。您还需要实现重叠添加算法。查看 Minim 的文档，在我看来他们使用标准 IIR 滤波器，而不是通过脉冲响应进行卷积，所以我认为这不会有帮助。您必须做很多工作才能在 Minim 使用 FFT 为您提供的之上进行卷积。如果你想走“直接”路线，它看起来像这样：

```
for( i in 0...input.length )
    for( j in 0...conv.length )
        output[i] += i-j < 0 ? 0 : input[i-j] * conv[j] ; 
```

更多细节在这里：[http](http://www-rohan.sdsu.edu/~jiracek/DAGSAW/4.3.html) ://www-rohan.sdsu.edu/~jiracek/DAGSAW/4.3.html或谷歌“离散卷积”

更新：Minim 确实给你卷积：[http ://code.compartmental.net/minim/javadoc/ddf/minim/effects/Convolver.html](http://code.compartmental.net/minim/javadoc/ddf/minim/effects/Convolver.html)

# javascript - 如何访问 Chrome 创建的 SQLITE 数据库？

> ID：12036849
> 
> 赞同：0
> 
> 时间：2012-08-20T11:30:40.703
> 
> 标签：javascript, sqlite, google-chrome

Chrome 可以使用 window.openDatabase 创建 sqlite 数据库。如何使用像 sqlite 管理器这样的独立应用程序访问 sqlite 数据库？

当我使用独立应用程序更新 Sqlite 数据库时，chrome 会自动将其数据库更新到还是需要重新启动？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:39:58.943

如果你在 Windows 平台上，你可以试试这个[sqlitebrowser](http://sourceforge.net/projects/sqlitebrowser/)。它工作正常（例如，您可以在 chrome 用户配置文件中找到 sqlite 文件）。

# java - 类加载器定义包示例

> ID：12036850
> 
> 赞同：3
> 
> 时间：2012-08-20T11:30:44.750
> 
> 标签：java, class, package

我目前正在为我的应用程序创建一个自定义 ClassLoader，我让类加载器加载类文件，但没有将包添加到类中

我知道 ClassLoader 有一个 definePackage() 可让您在加载包时将包添加到文件中，但我在网上找不到任何示例，我正在尝试使用以下内容，但它不适用于我

```
definePackage(name, "", "", "", "", "", "", url);
return defineClass(name, classBytes, 0, classBytes.length); 
```

有谁知道如何使用definePackage（）做到这一点？

[这](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html#definePackage%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.net.URL%29)是 ClassLoader definePackage() 的 API

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-11T02:47:05.637

看来此信息通常包含在 jar 的清单中。文档：[https ://docs.oracle.com/javase/tutorial/deployment/jar/packageman.html](https://docs.oracle.com/javase/tutorial/deployment/jar/packageman.html)

至于您的特定用法，`URLClassLoader`除了用空值代替空字符串之外，做同样的事情，除非存在清单，所以您的可能没问题：http: [//grepcode.com/file/repository.grepcode.com/java/root /jdk/openjdk/6-b14/java/net/URLClassLoader.java#261](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/net/URLClassLoader.java#261)

但是，您使用类名作为包名，这是行不通的。查找在`Class.getPackage()`其中，看起来像：

```
static Package getPackage(Class<?> c) {
        String name = c.getName();
        int i = name.lastIndexOf('.');
        if (i != -1) {
            name = name.substring(0, i); 
```

你可以看到它去掉了类名。这意味着您需要`definePackage`使用包而不是类名。您还需要确保您不会多次定义包。总而言之，它看起来像：

```
private static void yourMethod() {
    String packageName = getPackageName(name);
    if (packageName != null && getPackage(packageName) == null) {
        definePackage(getPackageName(name), null, null, null, null, null, null, null);
    }
}

private static String getPackageName(String className) {
    int i = className.lastIndexOf('.');
    if (i > 0) {
        return className.substring(0, i);
    } else {
        // No package name, e.g. LsomeClass;
        return null;
    }
} 
```

我正在尝试解决类似的问题，发现这有点有趣。显然，进行此调用是子类的责任：*http* : [//www.javaworld.com/article/2076054/core-java/create-a-custom-java-1-2-style-classloader.html](http://www.javaworld.com/article/2076054/core-java/create-a-custom-java-1-2-style-classloader.html)`ClassLoader`

# algorithm - 对 100 万个查询进行排序

> ID：12036855
> 
> 赞同：0
> 
> 时间：2012-08-20T11:31:21.723
> 
> 标签：algorithm

```
I have 1 million queries on disk to sort, my local memory/cache can store
up to 1 thousand queries, how can I perform sort? 
```

这是一个谷歌面试问题。有人可以帮我找到答案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T11:33:57.750

您在内存中加载 1000 个查询并使用**quicksort**对它们进行排序，将它们写入文件。最后，您将拥有 1000 个这样的文件。

然后你继续使用合并文件，你猜对了，**mergesort**。

我就是这样做的。绝不是最优解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:34:02.740

可以使用[外部合并排序来实现这一点。](http://en.wikipedia.org/wiki/External_sorting#External_merge_sort)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T11:35:32.473

获取更多内存。查询不是那么大。这是一个考验你是否能跳出框框思考的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T11:41:26.487

我很懒：读取所有查询（每个 1,000 个），将它们转储到数据库中，然后`SELECT ORDER BY anything`. 如果是谷歌要求，他们无论如何都会有数据库......

# wpf - 将相同的属性绑定到 WPF 中的两个路径

> ID：12036860
> 
> 赞同：0
> 
> 时间：2012-08-20T11:31:45.030
> 
> 标签：wpf, mvvm, binding, multibinding

我有一个图形控件，它有两种类型的实体：节点和边（链接）。图形控件公开了几个属性，即

*   myGraphContol.SelectedNode
*   myGraphControl.SelectedLink

节点和边都有一些用于可视化的配置文件数据，因此它们都实现了一个名为 IProfile 的接口。

配置文件数据将在相邻的 ContentControl 中可视化，该 ContentControl 将选择适当的模板。这工作得很好：

```
<ContentControl VerticalAlignment="Stretch" ContentTemplate="{Binding Source={StaticResource AllPropertiesTemplate}}" Content="{Binding Path=SelectedNode.Data,ElementName=myGraphContol}"/> 
```

但是我如何使它适用于另一个属性 SelectedLink.Data。基本上，内容控件必须与这两个属性绑定。用户将一次单击任何一个节点或边，并能够查看配置文件。任何帮助将不胜感激。感谢您阅读此内容。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:36:52.987

The ContentControl has only a single Content element so you can either:

1.  Nest the two properties in an encapsulating object or

2.  Create a Custom Control with two (or more) properties that can be bound.

# java - 来自 Android 的视频流，无需保存在 sdcard 上

> ID：12036873
> 
> 赞同：0
> 
> 时间：2012-08-20T11:32:43.743
> 
> 标签：java, android, sockets, android-mediaplayer, java-server

我有代码：

```
private MediaRecorder recorder;

String hostname = "192.168.1.125";
int port = 1935;
Socket socket;
ParcelFileDescriptor pfd;

public void start()
    {

        try {
            socket = new Socket(InetAddress.getByName(hostname), port);
            pfd = ParcelFileDescriptor.fromSocket(socket);

        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

  recorder.setOutputFile(pfd.getFileDescriptor()); 

  //  String filename = String.format("/sdcard/%d.mp4", System.currentTimeMillis());
  // 
  // recorder.setOutputFile(filename);

    try
        {
        recorder.prepare();
            recorder.start();
        }
        catch (IllegalStateException e)
        {
        e.printStackTrace();
        }
        catch (IOException e)
        {
        e.printStackTrace();
        }
    } 
```

和服务器端：

```
import java.io.DataInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.ServerSocket;
import java.net.Socket;

public class Server {

        public static void main(String[] args) 
        {

            try
                {
                System.out.println("create sock");
                ServerSocket svsock = new ServerSocket(1935);

                System.out.println("accept");
                Socket sock = svsock.accept();
                System.out.println("buffer read");

                FileOutputStream outFile = null;

    String filename = String.format("%d.mp4", System.currentTimeMillis());

                   try {
                                        outFile = new FileOutputStream(filename);
                                        System.out.println(filename);
                                } catch (IOException e1) {
                                        e1.printStackTrace();
                                }

                  InputStream is = new DataInputStream(sock.getInputStream());
                                byte[] byteBuffer = new byte[1024];

                                int allsize = 0;
                                while(sock.isConnected()) {

                                    int size = is.read(byteBuffer);
                                        if (size == -1){
                                                break;
                                        } else {
                                                outFile.write(byteBuffer, 0, size);
                                        }
                                        allsize += size;

                                }
                                System.out.println("close size=" + allsize);
                                outFile.close();
                                sock.close();

                }
                catch(Exception e)
                {
                        e.printStackTrace();
                }       

                System.out.println("endmain");
        }
} 
```

我在 Android 2.2.2（HTC 安静辉煌）上对其进行了测试，一切正常。当我按下“开始”按钮时，服务器创建文件并从流到文件记录数据。此文件在 VLC 播放器等中正常播放后。

但是当我在 Android 4.0.4（Galaxy S2）服务器上测试它时，创建文件并从流到文件记录数据但不能在 VLC（以及其他播放器）中播放并给我错误

mp4 错误：MP4 插件被丢弃（没有 moov、foov、moof 框） avcodec 错误：无法打开 `codec demux 错误：指定的事件对象句柄无效 ps 错误：无法查看主要错误：`file/:/ 没有合适的 demux 模块//C:/1345461283455.mp4'

我也尝试将此文件上传到 youtube，但上传 youtube 后给我错误，例如文件格式不受支持。

但是当我将文件保存在手机内存中（而不是流式传输到服务器）时，Android 4.0.4（Galaxy S2）成功创建并播放文件

我认为问题可能在服务器端，或者在 android 4.0.4 上发生了一些变化。

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:27:16.433

尝试这个

```
recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
recorder.setOutputFile(pfd.getFileDescriptor()); 
```

我认为它应该可以解决问题。试一试，看看是否有帮助...

# vba - 如何从旋转按钮中删除黑色边框

> ID：12036877
> 
> 赞同：1
> 
> 时间：2012-08-20T11:33:21.303
> 
> 标签：vba, excel

在尝试从旋转按钮 onclick 中删除黑色边框时
（顺便说一句，我对这个丑陋的黑色边框的原因很感兴趣）

```
Private Sub spin01_SpinUp()
... //some code
ch01.SetFocus // ch01 is a textbox 
```

第一次点击 - 没有边框
下一次点击 - 有边框 下一次点击 -
没有边框 - 等等
SpinDown()也是如此
很奇怪，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:09:10.153

这些黑色边框是为了让您知道旋转按钮当前具有焦点。如果您单击用户窗体上的文本框`ch01`，则这些行将消失。AFAIK 没有任何属性可以永久删除这些黑色边框。

在您的情况下发生的情况是代码将焦点转移到文本框`ch01`，即当您看不到边框但当焦点回到旋转按钮时，那些黑色边框又回来了。

**替代方案**：

使用两个命令按钮并复制旋转按钮的功能。您还可以将 更改为`.Picture`在命令按钮上显示箭头而不是文本。请参阅下面的屏幕截图

![在此处输入图像描述](../Images/a03be27a7b7cbd49d2a5935f18a708d7.png)

**跟进**

```
Private Sub spin01_SpinUp()
    '
    '~~> Rest of the code
    '
    wait 0.1
    ch01.SetFocus
End Sub

Private Sub spin01_SpinDown()
    '
    '~~> Rest of the code
    '
    wait 0.1
    ch01.SetFocus
End Sub

Public Sub wait(ByVal nsec As Double)
    nsec = nsec + Timer
    While nsec > Timer
        DoEvents
    Wend
End Sub 
```

# android - 安卓召回活动

> ID：12036881
> 
> 赞同：0
> 
> 时间：2012-08-20T11:33:37.153
> 
> 标签：android

我有变量 loopnum ，我将其初始化为`loopnum = 0;`

现在我想说

```
 if(loopnum <6) 
  { 
    loopnum++; //And then recall the `Activity` from the beginning.
   } 
```

我应该如何回忆`Activity`？我应该定义`loopnum` `static`吗？因为每次召回活动后，`loopnum`都会丢失 的值。

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:39:00.933

将其设为静态，这样您将只有一个 loopnum 实例。

# exception - EJB 和 EAR 项目中的相同 jar 文件

> ID：12036882
> 
> 赞同：0
> 
> 时间：2012-08-20T11:33:42.613
> 
> 标签：exception

如何在 EJB 和 EAR 项目中使用相同的 jar 文件？

*   **EJB** ---> 用于在 Eclipse 中添加构建路径的 Jar 文件。
*   **EAR** ---> EJB 项目和 jar 文件以添加 Java EE 依赖项。

否则，我会得到一个似乎是相同类的***类转换异常。***

例子：

com.sample.es.ra。**EsCciConnectionFactory**无法转换为 com.sample.es.ra。**EsCciConnectionFactory**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:36:46.920

In short: add the jar files as dependencies to your EJB project and the resulting EJB jar to your EAR project.

You can do it differently depending on the build management system. With ant, use `depends` attribute for your targets, with maven, define the EAR project as `parent` for your EJB project.

Ant [example](http://www.java2s.com/Code/Java/EJB3/EJBTutorialfromJBossantscriptforEJBpackaging.htm)

Maven [example](http://www.sonatype.com/books/mvnex-book/reference/multimodule-web-spring.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:41:56.133

EAR 归档中的所有模块共享的 Jar 文件可以放在`\lib`EAR 根目录中的文件夹中。

在 Eclipse 中，使用 WTP`Enterprise Application Project`在项目资源管理器中将如下所示：

```
foo_ear <--- the EAR project
    EarContent
        lib <--- Put your jars here
            bar.jar
            kaz.jar
foo_ejb <--- the EJB project
    src
        com.example
            Something.java
    EAR Libraries <--- lists libraries "found" in root EAR's /lib
        bar.jar
        kaz.jar 
```

# delphi - 如何在Delphi中提取网站源代码

> ID：12036883
> 
> 赞同：8
> 
> 时间：2012-08-20T11:33:47.213
> 
> 标签：delphi

我需要一种在 Delphi 中提取网站源代码并将其放入 TStrings 或 TStringList 的方法

当您在 Internet Explorer 中单击查看源代码并打开记事本并显示源代码时，方式完全相同。

也许我们可以使用 TWebBrowser 或者我不知道谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T11:50:58.087

使用 Indy 你可以简单地做

```
Strings.Text := IdHttp.Get(URL); 
```

您真的不想为简单的 HTTP GET 启动 TWebBrowser。

# android - 仅下载可见内容

> ID：12036893
> 
> 赞同：0
> 
> 时间：2012-08-20T11:34:15.170
> 
> 标签：android, lazy-loading, scrollview

我正在编写使用延迟加载模式的 android 应用程序。如果用户滚动到它，我需要下载视图内容。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:46:48.590

是的，看这个[谈话](http://www.youtube.com/watch?v=wDBM6wVEO70)

您正在寻找的是所谓的持有人模式。

参考[这里](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)的代码

几乎所有具有动态 listView 内容的 android 应用程序都以一种或其他形式使用这种模式，

它可以根据您的特定情况轻松修改。

# android - 杀死 Android 上的另一个应用程序？

> ID：12036895
> 
> 赞同：16
> 
> 时间：2012-08-20T11:34:30.540
> 
> 标签：android

我试图杀死我的另一个应用程序。但是这段代码无法杀死我的另一个应用程序。我知道杀死另一个应用程序是一个坏主意。但我有一个学习的目的，我曾试图杀人。我的代码部分：

```
Button runningApp = (Button) findViewById(R.id.runningApp);
runningApp.setOnClickListener(new View.OnClickListener()
{
    @Override
    public void onClick(View v)
    {
        String nameOfProcess = "com.example.filepath";
        ActivityManager  manager = (ActivityManager)ApplicationActivity.this.getSystemService(Context.ACTIVITY_SERVICE);
        List<ActivityManager.RunningAppProcessInfo> listOfProcesses = manager.getRunningAppProcesses();
        for (ActivityManager.RunningAppProcessInfo process : listOfProcesses)
        {
            if (process.processName.contains(nameOfProcess))
            {
                Log.e("Proccess" , process.processName + " : " + process.pid);
                android.os.Process.killProcess(process.pid);
                android.os.Process.sendSignal(process.pid, android.os.Process.SIGNAL_KILL);
                manager.killBackgroundProcesses(process.processName);
                break;
            }
        }
    }
}); 
```

我添加了权限，它们是：

```
<uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES" />
<uses-permission android:name="android.permission.GET_TASKS" /> 
```

每次我看到[LogCat](https://sites.google.com/site/androidhowto/how-to-1/save-logcat-to-a-text-file)时，特定的应用程序都在后台运行。我错在哪里？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-20T11:58:30.567

您只能终止与正在执行终止的进程具有相同用户 ID 的进程。如果您试图杀死自己的进程，它应该可以工作。否则你不能这样做（除非你有一个根设备并且你的应用程序有根权限）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-31T07:05:36.777

如果您的设备已植根并且您的应用程序位于 /system/app 中，那么您可以通过禁用和启用另一个应用程序来杀死另一个应用程序：

```
pm.setApplicationEnabledSetting(packageName, PackageManager.COMPONENT_ENABLED_STATE_DISABLED, 0);
pm.setApplicationEnabledSetting(packageName,PackageManager.COMPONENT_ENABLED_STATE_ENABLED, 0); 
```

这将杀死该应用程序并使其再次可访问。请注意，主屏幕快捷方式会消失。

# php - PHP & ZF2 / Comparison: expected == actual

> ID：12036910
> 
> 赞同：4
> 
> 时间：2012-08-20T11:35:14.360
> 
> 标签：php, coding-style, zend-framework2, comparison

does anyone know why some developers (especially seen in the sources of Zend Framework 2) write the expected value before the actual value in comparisons?

Example:

```
if (true === $actualValue) { ... } 
```

instead of

```
if ($actualValue === true) { ... } 
```

This case is not defined in the PSR coding standard.

**Note:** There is a similar topic for c++ but without *really* helpful answers.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T11:39:43.233

你看到的是[尤达条件](http://united-coders.com/christian-harms/what-are-yoda-conditions/)。没有标准定义这些（至少据我所知）。它们只是一种保护自己免受常见编码错误（根据您的条件分配）的方法。

例子：

```
if( number = 4 ) // Works perfectly

if( 4 = number ) // Throws an exception 
```

# c# - LINQ query expression to explicit dot-notation

> ID：12036913
> 
> 赞同：-1
> 
> 时间：2012-08-20T11:35:43.020
> 
> 标签：c#, .net, linq

Could you tell me how transform the query below to Linq Method version :

```
 myResult =
    from table1 in db.TABLE1
    join table2 in db.TABLE2 on table1.TABLE2_ID equals table2.ID
    join table3 in db.TABLE3 on table1.TABLE3_ID equals table3.ID
    where table1.ACTIF == true
    select new MyClass
    {
         T1MyField1 = table1.MyField1,
         T1MyField2 = table1.MyField2,
         T2MyField1 = table2.MyField1,
         T2MyField2 = table2.MyField2,
         T3MyField1 = table3.MyField1,
         T3MyField2 = table3.MyField2,
         T3MyField3 = table3.MyField3
    } 
```

**Update 1:** I created a predicate :

```
 Expression<Func<IMyClass, bool>> predicate; 
```

And I'd like apply it the the lambada but I think it's not possible with lambda syntax.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:46:11.313

您可以使用[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)将带有查询语法的当前程序集反编译为方法语法查询。只需转到选项，然后取消选择“反编译查询表达式”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:53:37.690

```
var myResult = db.TABLE1
    .Join(db.TABLE2, t1 => t1.TABLE2_ID, t2 => t2.ID, (t1, t2) => new { Table1 = t1, Table2 = t2 })
    .Join(db.TABLE3, j => j.Table1.TABLE3_ID, t3 => t3.ID, (j, t3) => new { Table1 = j.Table1, Table3 = j.Table2, Table3 = t3 })
    .Where(row => row.Table1.ACTIF)
    .Select(row => new MyClass {
        T1MyField1 = row.Table1.MyField1,
        T1MyField2 = row.Table1.MyField2,
        T2MyField1 = row.Table2.MyField1,
        ...

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:55:03.413

关于您的编辑：您可以随时混合使用两种样式：

```
myResult = (from ... select new MyClass { ... }).Where(predicate); 
```

# android - Why mediaPlayer.seekTo(msec) doesn't update surfaceView when mediaPlayer is paused?

> ID：12036914
> 
> 赞同：5
> 
> 时间：2012-08-20T11:35:43.487
> 
> 标签：android, video, media-player

I use `MediaPlayer` in my android app to play videos. When playback is paused via `mediaPlayer.pause()` method and I call `mediaPlayer.seekTo(msec)` the surfaceView I display video in is not updated. It displays the frame where the video was stopped when I called `pause()` method.

When I `start()` it again only then it starts from the frame I specified in `seekTo()` earlier.

How can I force `mediaPlayer` to update `surfaceView` when mediaPlayer is paused and not playing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:51:56.057

我在姜饼系列操作系统上遇到了同样的问题。我在实际调用 start 的 seekbar 中使用 onProgressChanged 时修复了它，这会将视频更新到正确的位置，但仍将视频保持在同一位置。

```
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) 
{
    if(fromUser)
    {
    videoPlayer.seekTo(progress);
    setRemainingTime(progress);
    setPreviousTime(progress);
    playerPausedAt = progress;
    videoPlayer.start();
     }

} 
```

上面的代码对我来说效果很好。

# c# - 在 Silverlight 中将值附加到 treeviewitem 项

> ID：12036919
> 
> 赞同：0
> 
> 时间：2012-08-20T11:35:51.763
> 
> 标签：c#, wpf, silverlight, treeview

我正在尝试为 Silverlight 应用程序制作控件，但遇到了一些麻烦。该控件是一个树视图。当我选择一个项目时，它应该传递更新画布大小的宽度和高度值。它们基本上是模板。假设我希望我的模板是“大方形”，它将传递 600 和 600 的宽度和高度值，“小方形”将是 400*400，以及将传递 600 宽度和 400 高度值的矩形。等等。这将绑定到我的画布宽度和高度属性。正方形将位于名为“Square”的父级下，矩形位于“Rectangles”等下。

我可以在 XAML 中编写树视图，但不能将高度和宽度值附加到它，因此不能将我的画布高度和宽度绑定到任何东西。我正在考虑在 .cs 文件中定义我的项目（带有父项、模板名称、高度和宽度）并使用它来填充树视图。Then when an item is selected the values associated with that item are passed as my width and height to controls in my MainPage.xaml which are already bound to my canvas width and height.

不需要添加太多现有代码，但即使我可以让这个示例正常工作，它也会有很大帮助。

```
<sdk:TreeView x:Name="trvTemplate">
        <sdk:TreeViewItem Header="Squares">
              <sdk:TreeViewItem Header="Big Square"/>
              <sdk:TreeViewItem Header="Smaller Square"/>
        </sdk:TreeViewItem>
        <sdk:TreeViewItem Header="Rectangles">
              <sdk:TreeViewItem Header="Big Rectangle"/>
              <sdk:TreeViewItem Header="Small Rectangle"/>
        </sdk:TreeViewItem>
<\sdk:TreeView> 
```

这是否可以通过树视图实现，如果可以，我将如何处理？谢谢你的帮助。

编辑：现在考虑一下，我可以轻松地在每个模板上使用事件处理程序，但我宁愿不这样做，而是使用 mvvm 方法。

可能是这样的？

```
public class CanvasTemplate
{
    private static List<CanvasTemplate> listTemplates = null;

    public CanvasTemplate(string name, double width, double height)
    {

        new CanvasTemplate("Template 1", 800, 400);
        new CanvasTemplate("Template 2", 600, 600);

        Name = name;
        Width = width;
        Height = height;

    }

    public string Name { get; set; }
    public double Width { get; set; }
    public double Height { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:44:03.423

这是你的 xml

```
 <sdk:TreeView.ItemTemplate>
            <DataTemplate>
                <sdk:TreeViewItem Header="{Binding HeaderName}" ItemsSource="{Binding ListTemplates}">
                    <sdk:TreeViewItem.ItemTemplate>
                        <DataTemplate>
                            <sdk:TreeViewItem Header="{Binding Name}"  GotFocus="TreeViewItem_GotFocus"/>
                        </DataTemplate>
                    </sdk:TreeViewItem.ItemTemplate>

                </sdk:TreeViewItem>
            </DataTemplate>
        </sdk:TreeView.ItemTemplate>
        </sdk:TreeView> 
```

该类是

```
public class ParentCanvasTemplate
    {
        public ParentCanvasTemplate(string headername)
        {
            if (headername == "Squares")
            {
                HeaderName = headername;
                ListTemplates = new List<CanvasTemplate>();
                CanvasTemplate ct = new CanvasTemplate("Smaller Square", 400, 400);
                ListTemplates.Add(ct);
                ct = new CanvasTemplate("Bigger Square", 800, 800);
                ListTemplates.Add(ct);
            }
            else if (headername == "Rectangles")
            {
                HeaderName = headername;
                ListTemplates = new List<CanvasTemplate>();
                CanvasTemplate ct = new CanvasTemplate("Smaller Rectangle", 600, 400);
                ListTemplates.Add(ct);
                ct = new CanvasTemplate("Bigger Rectangle", 800, 600);
                ListTemplates.Add(ct);
            }
        }
        public string HeaderName { get; set; }
        public List<CanvasTemplate> ListTemplates { get; set; }
    }

    public class CanvasTemplate
    {

        public CanvasTemplate(string name, double width, double height)
        {       

            Name = name;
            Width = width;
            Height = height;

        }

        public string Name { get; set; }
        public double Width { get; set; }
        public double Height { get; set; }

    } 
```

将此添加到您必须创建树视图的地方

```
List<ParentCanvasTemplate> lst = new List<ParentCanvasTemplate>();
            ParentCanvasTemplate pct = new ParentCanvasTemplate("Squares");
            lst.Add(pct);
            pct = new ParentCanvasTemplate("Rectangles");
            lst.Add(pct);
            trvTemplate.ItemsSource = lst; 
```

这会给你你想要的

```
 private void TreeViewItem_GotFocus(object sender, RoutedEventArgs e)
        {
            string test = ((sender as TreeViewItem).DataContext as CanvasTemplate).Name;
            string Width = ((sender as TreeViewItem).DataContext as CanvasTemplate).Width+"";

        } 
```

# html - Percent vs. pixels in fluid layout

> ID：12036920
> 
> 赞同：0
> 
> 时间：2012-08-20T11:35:53.023
> 
> 标签：html, css, fluid-layout

I would like to build a fluid layout and would like to achieve something like

```
width:100%-200px; 
```

i.e. have a div with content, call it `div id="content"` with a fixed margin on either side. I have tried to use the trick of putting the `div id="content"` into another div container with a margin, but I don't know how to fill out the background of `div id="content"`. Is there a way of telling the `div id="content"` to use 100% of the available space as background, such that the width of the content plus the width of the margin does not exceed 100% of the browser window size?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:50:09.763

将 DIV 设置为 100% 并在任一侧留出 XXX 的边距是行不通的，因为这会超出浏览器窗口的大小。

您可以尝试以下方法：

```
body {
    padding:0 2%;
}

#content {
    width:96%;
} 
```

[http://jsfiddle.net/YYhvT/](http://jsfiddle.net/YYhvT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:54:29.327

使用绝对位置...

```
#content {
  position: absolute;
  left: 0;
  right: 200px;
} 
```

见我的[小提琴](http://jsfiddle.net/ndWxH/1/)。

**PS**优点是您不需要其他元素的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:56:42.807

您可以在内容周围放置一个容器，并为其提供 200 像素的左/右填充。这应该可以解决问题（至少，根据我对您要完成的工作的理解）。另请参阅此代码示例：

```
<!doctype html>
<html>
<head>
    <style type="text/css">
        body { margin: 0 50px; }
        #container { padding: 0 200px; background: #FF0000; }
        #content { width: 100%; background: #00FF00; }
    </style>
</head>
<body>
    <div id="container">
        <div id="content">
            Here goes my content
        </div>
    </div>
</body>
</html> 
```

请注意，正文边缘仅用于说明目的，让您看到背景差异。

（我会发布一个 jsFiddle，但是我无法使用它，因为此时我只能使用 IE7。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T12:17:52.390

这是我的解决方案，html：

```
<div id="content" class="content">
  My Content
</div>​ 
```

CSS：

```
.content {
  position: absolute;
  right: 100px;
  left: 100px;
  background-color:#A5112C;
}​ 
```

并链接到它：http: [//jsfiddle.net/MPYHs/](http://jsfiddle.net/MPYHs/)

另外，如果您想将某种图像作为背景，我建议您使用像[https://ssl.gstatic.com/android/market_images/web/background_stripes.gif这样的小图案](https://ssl.gstatic.com/android/market_images/web/background_stripes.gif)

希望能帮助到你，

问候

# c - 即使在正确转换之后，增加 void 指针也需要左值

> ID：12036921
> 
> 赞同：1
> 
> 时间：2012-08-20T11:35:59.400
> 
> 标签：c, lvalue, memset

我正在实施`memset()`方法。下面是代码片段：

```
void my_memset(void* ptr, int n, size_t size)
{
    unsigned int i;

    for( i = 0; i < size; ++i, ++(char*)ptr )
            *(char*)ptr = n;
} 
```

我收到的[错误](http://ideone.com/4EdHd)是：

```
prog.cpp: In function ‘void my_memset(void*, int, size_t)’:
prog.cpp:8: error: lvalue required as increment operand 
```

当我将 ptr 的类型从 更改为`void*`时`int*`，它[编译成功](http://ideone.com/1DUkC)。

为什么它要求左值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T11:39:56.747

```
void my_memset(void* ptr, int n, size_t size)
{
    char *cptr = (char *)ptr;
    char *limit = cptr + size;

    for(; cptr < limit; cptr++) {
        *cptr = n;
    }
} 
```

你不能通过这样的演员阵容增加，你不应该想要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T11:44:15.917

类型转换的结果不是左值。说，

```
float f = 3.14;
++((int)f); 
```

在这里，我们将`++`运算符应用于 int 值，但我们没有要递增的 int 变量。所以在一般情况下，类型转换不能产生左值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:49:00.683

您不能这样做的原因与您不能这样做的原因相同：

```
++someFunction(); 
```

或者

```
 ++(a + b); 
```

强制转换是一个表达式，表达式的结果没有可写存储。

# php - 性能：查询到外部 MYSQL 或 HTTP 发布到服务器上的 PHP 文件？

> ID：12036935
> 
> 赞同：0
> 
> 时间：2012-08-20T11:36:36.590
> 
> 标签：php, android, mysql, performance, external

我正在开发一个需要查询外部 MYSQL 数据库的 Android 应用程序。为此，这是获得最佳*性能*并尝试避免数据库过度收费的最佳方式：

*   直接查询 MYSQL 数据库，或
*   对 PHP 文件执行 HTTP POST 并对 MYSQL 数据库执行本地查询（请注意，使用这种方式我可以在执行查询之前控制输入并使用它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:49:20.047

这是使用 JSON 和 PHP 将应用程序连接到 MySQL 数据库的完整解决方案。您可以在执行查询之前在 PHP 页面中编写脚本。访问此页面，

[http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:02:11.513

*直接查询MYSQL数据库*比较**好**。让 mySql 自己管理他，他应该能够同步需要的和不需要的。

# c# - 使用同步上下文将事件编组到 ui 线程

> ID：12036936
> 
> 赞同：0
> 
> 时间：2012-08-20T11:36:38.930
> 
> 标签：c#, .net, multithreading

我看到的所有使用 SynchronisationContext.Post 的示例都在同一个类中使用过。我所拥有的是 UI 线程将一些 by-ref 参数传递给 threadwrapper 类，更新参数，然后我希望它更新 UIThread 上的一些标签等。

```
 internal class ConnThreadWrapper 
{
    ....

    public event EventHandler<MyEventArgs<String, Boolean>> updateConnStatus = 
        delegate { };

    public void updateUIThread(string conn, bool connected)
    {
        uiContext.Post(new SendOrPostCallback((o) => 
                           { 
                               updateConnStatus(this, 
                                  new MyEventArgs<String, Boolean>(conn, 
                                                                   connected));  
                           }), 
                       null);
    }
}

//on ui thread

 public void updateConnStatus(object sender, MyEventArgs<String, Boolean> e)
    {
        switch (e.val1)
        {
           case "CADS" :
           if (e.val2 == true)
           {

           } 
```

事件似乎在没有任何错误的情况下触发，但在 uiThread 上没有收到任何内容 - 我不确定我对子 updateConnStatus 的签名是否正确，或者它是否像这样工作。我显然希望在 uithread 上处理该事件并更新该子的标签。

在以前的 vb.net 项目中，我曾经直接在线程上引用表单并使用委托来调用回调，但显然这是一个糟糕的设计，因为我正在混合应用程序层。我想使用同步上下文，因为它是线程安全的，但我见过的大多数示例都使用了调用。

有什么我想念的想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:20:06.607

我写了这个对我有用的助手类。在应用程序启动的某个地方在 UI 线程上使用此类调用 InitializeUiContext() 之前。

```
 public static class UiScheduler
   {
      private static TaskScheduler _scheduler;
      private static readonly ConcurrentQueue<Action> OldActions = 
          new ConcurrentQueue<Action>();

      public static void InitializeUiContext()
      {
         _scheduler = TaskScheduler.FromCurrentSynchronizationContext();
      }

      private static void ExecuteOld()
      {
         if(_scheduler != null)
         {
            while(OldActions.Count > 0)
            {
               Action a;

               if(OldActions.TryDequeue(out a))
               {
                  UiExecute(_scheduler, a);
               }
            }
         }
      }

      private static void UiExecute(TaskScheduler scheduler, 
                                    Action a, 
                                    bool wait = false)
      {
         //1 is usually UI thread, dunno how to check this better:
         if (Thread.CurrentThread.ManagedThreadId == 1)  
         {
            a();
         }
         else
         {
            Task t = Task.Factory.StartNew(a, 
                                           CancellationToken.None,  
                                           TaskCreationOptions.LongRunning,  
                                           scheduler);

            if (wait) t.Wait();
         }         
      }

      public static void UiExecute(Action a, bool wait = false)
      {
         if (a != null)
         {
            if (_scheduler != null)
            {
               ExecuteOld();

               UiExecute(_scheduler, a, wait);
            }
            else
            {
               OldActions.Enqueue(a);
            }
         }
      }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T20:24:16.030

最后我放弃了 ThreadWrapper 并试图将事件编组到 UI 线程并使用 Task 代替，事实上我认为我可以使用 task 来完成这个项目中的大部分事情，所以我很开心。

```
 Task<bool> t1 = new Task<bool>(() => testBB(ref _bbws_wrapper));
 t1.Start();
 Task cwt1 = t1.ContinueWith(task => { if (t1.Result == true) { this.ssi_bb_conn.BackColor = Color.Green;} else { this.ssi_bb_conn.BackColor = Color.Red; } }, TaskScheduler.FromCurrentSynchronizationContext());

.....
private static bool testBB(ref BBWebserviceWrapper _bbwsw)
    {
        try
        {
            //test the connections
            if (_bbwsw.initialize_v1() == true)
            {
                if (_bbwsw.loginUser("XXXXXXXX", "XXXXXXXXX") == true)
                {
                    return true;
                }
                else
                {
                    return false;
                }
            }
            else
            {
                return false;
            }

        }
        catch
        {
            return false;
        }
    } 
```

# php - Declare one class variable via another

> ID：12036937
> 
> 赞同：0
> 
> 时间：2012-08-20T11:36:40.460
> 
> 标签：php, oop, class, php4

sorry for the vague title... I have a problem with a php4 class that seems hard to put to words.

My class has a "possibleValues" array, that holds information on what kind of values are acceptable for certain attributes that can be changed from the outside. In my pseudocode example below you can see that I have attributes that share the same acceptable values (colors). Obviously, the `$this->colors` in my code fails, because you can't define one class variable via another (can you?).

How would I go about setting a common colors array that I could reference like this so I don't have to repeat the same valid options for different fields that allow the same values?

```
Class MyTest {

    var $colors = array('red', 'yellow', 'blue');

    var $possibleValues = array(
        'someAttribute',               array(0,1),
        'someEmotions',                array('happy, 'sad'),
-->     'someColorableAttribute',      $this->colors,
-->     'someOtherColorableAttribute', $this->colors,
     );

    ...

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:39:51.970

在回答您的问题时，您应该在构造函数中设置变量。在你真的不应该使用的 PHP4 中，构造函数应该具有类的名称。

```
function MyTest()
{
   $this->var = $this->colors;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:13:42.190

如果您不想设置`$possibleValues`in 构造函数，可以尝试这种方法：

**PHP 4**

```
class MyTest {
    var $colors = array('red', 'yellow', 'blue');

    var $possibleValues = array(
        'someAttribute' =>             array(0,1),
        'someEmotions'  =>             array('happy', 'sad'),
        'someColorableAttribute' =>    'colors',
        'someOtherColorableAttribute' => 'colors',
     );

    function getPossibleValues($attr) {
        //no attribute, empty list
        if (!array_key_exists($attr, $this->possibleValues))
            return array();

        $possible_values = $this->possibleValues[$attr];
        //value is a string, check for object variable with such name
        if (is_string($possible_values)) {
            if (!array_key_exists($possible_values, get_object_vars($this)))
                return array();

            return $this->$possible_values;
        }

        return $possible_values;
    }
}

$a = new MyTest();
var_dump($a->getPossibleValues('someAttribute'));
var_dump($a->getPossibleValues('someEmotions'));
var_dump($a->getPossibleValues('someColorableAttribute'));
var_dump($a->getPossibleValues('someOtherColorableAttribute')); 
```

我正在使用`get_object_vars`，因为`property_exists`PHP 4 中不存在。

**PHP 5（类常量）**

```
class MyTest {
    const COLORS = 'red|yellow|blue';

    private $possibleValues = array(
        'someAttribute' =>             array(0,1),
        'someEmotions'  =>             array('happy', 'sad'),
        'someColorableAttribute' =>    self::COLORS,
        'someOtherColorableAttribute' => self::COLORS,
     );

    public function getPossibleValues($attr) {
        //no attribute, empty list
        if (!array_key_exists($attr, $this->possibleValues))
            return array();

        $possible_values = $this->possibleValues[$attr];
        //value is a string, explode it around |
        if (is_string($possible_values)) {
            return explode('|', $possible_values);
        }

        return $possible_values;
    }
} 
```

# mongodb - MongoDB消耗大量内存

> ID：12036941
> 
> 赞同：4
> 
> 时间：2012-08-20T11:36:58.440
> 
> 标签：mongodb, debian, database

一个多月以来是我与 mongoDB 的战争。直到我输了=] ...

[战斗 1。](https://stackoverflow.com/questions/11665559/database-error-mongodb-disappeared-database) [战斗 2。](https://stackoverflow.com/questions/11775078/mongodb-errors-couldnt-connect-to-server-open-create-failed-in-createpriva) 现在是一个新问题。再次，内存不足。

最初，这是通过以 VPS 的速率简单地增加内存来解决的。然后日记=假。但是现在我已经达到了你的计划并继续增加内存是不可能的。

我的基地缺少 4 GB 的内存。项目应该怎么选数据库，mongoDB内存这么多，居然没写。mongoDB 中大约有 1000 万条记录缺少 4 GB 内存，而我的 1000 万条 MySQL 数据库可以轻松应对 1.4 GB 内存。

据我了解，问题是大量索引字段。但是由于我不能登录数据库，所以不能分别删除它们。他们在发展的早期阶段需要我，现在他们对我来说并不重要。

请告诉我，我可以以某种方式删除它们吗？有一个数据库的转储完全是整个文件夹 database / data / db 在我的具有 4 GB 内存的 PC 上，数据库不会在具有 4 GB 的 VPS 上启动。作为替代方案，我认为在某些 VPS / VDS 上进行测试以运行 mongo 并删除密钥。

你知道有一个测试期和 6 GB 内存的虚拟主机吗？

或者如果有替代方案，你能说什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:55:47.370

这些问题与数据集的大小几乎没有关系。MongoDB 使用内存映射文件作为其存储引擎。因此，它会在可能的情况下开始将热数据页面交换到内存中，并且这样做相当积极（或者更准确地说，操作系统内存管理确实如此）。

基本上，它使用尽可能多的内存，您几乎无法避免它。如果有可用空间，在操作期间访问的所有数据页（无论是实际数据还是索引）都将被交换到内存中。

顺便说一下，在 Internet 和 mongodb.org 上有很多关于此的参考。说在任何地方都没有提到它是不正确的。

# google-docs-api - 如何在 Google Docs List API 中设置自动删除修订？

> ID：12036946
> 
> 赞同：0
> 
> 时间：2012-08-20T11:37:25.427
> 
> 标签：google-docs-api, google-drive-api

谷歌云端硬盘存储以前的文档修订版，这非常适合时光倒流。您可以使用 Google Drive 网络界面选择是否存储以前的修订：http: [//support.google.com/drive/bin/answer.py ?hl=en&answer=2375120](http://support.google.com/drive/bin/answer.py?hl=en&answer=2375120)

是否可以通过 API 或更改某些文档属性来做到这一点？

我检查了修订提要，但那里什么也没看到。通过 JSON，我看到一个名为“blob_versionable”的文档属性。有 API 来设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T00:29:53.850

您可以将`pinned`修订的字段设置为 true 以防止 Google 自动清除该修订：

[https://developers.google.com/drive/manage-revisions](https://developers.google.com/drive/manage-revisions)

# php - Swift Mailer 可以禁止群发邮件地址吗？

> ID：12036952
> 
> 赞同：1
> 
> 时间：2012-08-20T11:37:58.367
> 
> 标签：php, swiftmailer, massmail

我需要发送超过 2000 封邮件，我正在使用 Swift Mailer 库。

我们有自己的服务器，它有 SMTP 和 sendmail 传输。我正在使用 SMTP：

```
$transport = Swift_SmtpTransport::newInstance('localhost', 25); 
```

所有的邮件都可以发给少数人，但我担心我们在发送大量邮件时会被禁止。我真的不知道“禁止”是什么意思以及它的样子，但我害怕后果。

那么，这样的“禁令”是否存在，以及如何以正确的方式使用 Swift Mailer 实现群发邮件是真的吗？

PS：我的代码看起来像：

```
 // Create the Transport
    $transport = Swift_SmtpTransport::newInstance('localhost', 25);

    // Create the Mailer using your created Transport
    $mailer = Swift_Mailer::newInstance($transport);

    // Create a message
    $message = Swift_Message::newInstance($message_theme)
      ->setFrom(array($sender => $name))
      ->setTo($emails)
      ->setBody($message_text,"text/html")
      ;
    try {
        // Send the message
        $result = $mailer->send($message);
    }
    catch(Exception $e) {
        echo "Error: ".$e->getMessage();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:45:37.190

因为我希望您不会将其用于垃圾邮件！！！

这里有一些事情要做：

*   尝试相同的不同电子邮件（更改正文中的收件人姓名）
*   每 3-4 秒发送一次电子邮件，而不是 100 封电子邮件/秒 - 它应该在大约 2-3 小时内发送 2000 封电子邮件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T22:06:26.497

黑名单/灰名单确实存在，您可以实施一些最佳实践来避免这些问题。对于 2,000 封电子邮件，只要您的标题是合法的，您的正文中没有任何可疑之处，并且您的收件人位于不同的域中，您就不应该遇到这个问题。但是，正如 khomyakoshka 所提到的，上面的代码是不正确的，您应该使用循环来发送每封电子邮件。这样可以避免将整个邮件列表暴露给每个用户。

一些额外的最佳实践：

1) Swiftmailer 提供插件 (http://swiftmailer.org/docs/plugins.html) 可以帮助您发送大量电子邮件。特别值得注意的是 Throttler 和 AntiFlood 插件。

2) 如果您打算修改邮件内容以适应收件人，请考虑使用装饰器插件（也在插件页面上提到）来完成此任务。

希望这些提示有所帮助。

# android - Android 应用程序在方向更改时使用设备区域设置而不是强制区域设置

> ID：12036953
> 
> 赞同：1
> 
> 时间：2012-08-20T11:38:00.863
> 
> 标签：android

我通过设置一个`BroadcastReceiver`for 来强制我的应用程序的语言环境`android.intent.action.CONFIGURATION_CHANGED`。如果用户更改了语言环境并且我的应用程序已经启动，则不应更新到新的语言环境。

如果我启动我的应用程序，然后更改语言环境并通过单击打开一个新的应用程序，那么语言`Activity`环境`Button`将被保留。

`Activity`但是，如果我在单击启动新的后更改方向，`Button`则使用设备区域设置而不是应用程序。

谁能指出为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:09:04.343

在 AndroidManifest.xml 你应该定义

```
android:configChanges="locale|orientation|screenSize|keyboardHidden" 
```

为您的每一项活动。

# c# - 为 CustomControl 注册修饰键

> ID：12036955
> 
> 赞同：1
> 
> 时间：2012-08-20T11:38:23.187
> 
> 标签：c#, winforms, keyboard, keyevent

我正在研究一个`CustomControl`，我想`ModifierKeys`在这个控件中注册。我已经将这个控件添加到其中`KeyPerview`。`True``Form`

现在我有一个`Boolean`命名`_ctrl`，我希望这个布尔值是`true`在`Control`按住键时，它应该是`false`在`Control`释放键时。

我试图用下面的 conde 来实现这一点，`CustomControl`但没有成功！

```
private bool _ctrl = false;

private void MyCustomControl_KeyDown(object sender, KeyEventArgs e)
{
    if(e.KeyCode == Keys.Control)
    {
        _ctrl = true;
    }
}

private void MyCustomControl_KeyUp(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Control)
    {
        _ctrl = false;
    }
} 
```

任何提示/解决方案都将得到应用！

**更新**

好的，我决定在表单本身中执行按键向下和向上事件：

```
 private void MainForm_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Modifiers == Keys.Control)
        {
            projectBrowser.ControlKeyIsDown = true; //bool in MyCustomControl
            MessageBox.Show("CTRL is PRESSED");
        } 
     }

    private void MainForm_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.Modifiers == Keys.Control)
        {
            projectBrowser.ControlKeyIsDown = false; //bool in MyCustomControl
            MessageBox.Show("CTRL is DEPRESSED");
        } 
    } 
```

现在，KeyDown 事件检测到控制键并显示消息框。但是该`KeyUp`事件不起作用，并且不显示消息框。有什么问题？

`KeyUp`如果我像这样更改事件，似乎键被检测到：

```
private void MainForm_KeyUp(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.LControlKey || e.KeyCode == Keys.RControlKey || e.KeyCode == Keys.ControlKey || e.KeyCode == Keys.Control)
    {
        projectBrowser.ControlKeyIsDown = false;
        e.Handled = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:37:51.477

您可以尝试调用该`Control.ModifierKeys`属性：

```
protected override void OnKeyDown(KeyEventArgs e) {
  if (Control.ModifierKeys == Keys.Control) {
    MessageBox.Show("I am pressing control.");
  }
  base.OnKeyDown(e);
} 
```

如果您在 KeyDown 事件上抛出 MessageBox，则不会调用 KeyUp 事件。

# c# - 解析变量 URI (RegEx, Uri, String-Functions?) c#

> ID：12036958
> 
> 赞同：2
> 
> 时间：2012-08-20T11:38:26.487
> 
> 标签：c#, regex, string, parsing, url

我正在编写一个 RTSP 客户端模块，为此，我需要解析一个非常可变的 URI。但是我完全不知道应该使用哪种方法（最安全）以及如何实现这一点。

示例 URI 可能如下所示：

```
rtsp://192.168.1.100:554/videocam/media/1/video/1
\_/    \_______________/\_______/\______________/
 |              |           |           |
scheme      authority     [sub]     [mediacontrol] 
```

但也有其他可能性：

```
192.168.1.100/videocam/media/1/video/1
192.168.1.100:6000/media/1/video/1
192.168.1.100:6000/videocam 
```

我需要以下信息：

```
IP         | how can I recognise this pattern [num].[num].[num].[num]?
Port       | easy if the string contains rtsp://, but what about just a number? 1-65555
Sub        | Optional subpath, can completely vary!
MediaLevel | Optional MediaLevel (indicator for stream/track), 
             not to be confused with the path. MediaLevel can be also just like this: track1 or m1s3 or media1/video1.. see?
             I can't go for the slash, also the path also can contain multiple slashes 
```

也许有一个用于此类任务的库？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:48:15.693

```
var uri = new Uri("rtsp://192.168.1.100:554/videocam/media/1/video/1");
var host = uri.Host;
var port = uri.Port;
var sub = uri.Segments[1];
var mlevel = uri.Segments.Skip(2).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:23:17.710

这是一个如何使用 UriBuilder 类的快速示例。它有点冗长，因为它是一个示例，还没有准备好投入生产。如果要识别更多的子，则可以将它们添加到子列表中，如示例中所示。

```
class Program
    {
        private static string _scheme = string.Empty;
        private static string _host = string.Empty;
        private static string _sub = string.Empty;

        static void Main(string[] args)
        {
            ParseUri("rtsp://192.168.1.100:554/videocam/media/1/video/1");
            ParseUri("192.168.1.100/videocam/media/1/video/1");
            ParseUri("192.168.1.100:6000/media/1/video/1");
            ParseUri("192.168.1.100:6000/videocam");
            // example of adding a new sub
            Sub.Add("sample");
            ParseUri("192.168.1.100:6000/sample/");
            Console.ReadLine();
        }

        private static void ParseUri(string URI)
        {
            UriBuilder uri = new UriBuilder(URI);
            _scheme = uri.Scheme;
            _host = uri.Host;
            _sub = string.Empty;
            StringBuilder sb = new StringBuilder();
            foreach (string s in uri.Uri.Segments)
            {
                if (Sub.Contains(s.Replace("/","")))
                {_sub = s;}
                else
                { sb.Append(s); }
            }

            Console.Out.WriteLine("+++++++++++++");
            Console.Out.WriteLine("URI: {0}",URI);
            Console.Out.WriteLine("Scheme: {0}", _scheme);
            Console.Out.WriteLine("sub: {0}",_sub);
            Console.Out.WriteLine("mediaControl: {0}", sb.ToString());
        }

        private static List<string> Sub
        {
            get
            {
                List<string> sub = new List<string>();
                sub.Add("videocam");
                return sub;
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-22T15:22:07.553

```
 trace("Url      : {0}", turl.Text);
                var uri = new Uri(turl.Text);
                string host = uri.Host;
                int port = uri.Port;
                string userInfo = uri.UserInfo;
                string subStream = "";
                string userName = "";
                string password = "";
                if (uri.Segments?.Any() == true)
                {
                    subStream = string.Join("", uri.Segments);
                }
                if (!string.IsNullOrEmpty(userInfo))
                {
                    if (userInfo.Contains(":"))
                    {
                        string[] data = userInfo.Split(':');
                        userName = data[0];
                        password = data[1];
                    }
                    else
                    {
                        userName = userInfo;

                    }
                }
                trace("host     : {0}", host);
                trace("port     : {0}", port);
                trace("userName : {0}", userName);
                trace("password : {0}", password);
                trace("subStream: {0}", subStream); 
```

[![没有用户信息](../Images/dd029b541963172347768c360538f309.png)](https://i.stack.imgur.com/aqmiE.png) [![在此处输入图像描述](../Images/28e3c0b3272be0b29f9536d457032e66.png)](https://i.stack.imgur.com/6vkK8.png)

# eclipse - Codecover 插件和 Eclipse - 致命错误

> ID：12036959
> 
> 赞同：1
> 
> 时间：2012-08-20T11:38:26.963
> 
> 标签：eclipse, code-coverage

我将[CodeCover](http://codecover.org/)安装到我的 STS 中，以便可以在我的项目中使用它。我可以运行代码覆盖并获得测量结果，但有一件事困扰着我。

如果我为给定项目启用代码覆盖，每次我对源文件进行更改然后保存它时，我都会收到以下错误消息：

```
[FATAL]An error occured when trying to compile instrumented sources 
```

如果 eclipse 验证器在某些项目文件中报告了一些错误。我可以禁用此功能吗，因为我保存一个文件并收到一些错误消息，即使我可以看到编辑器用红色下划线标记它们，这真的很令人沮丧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:26:11.367

这很可能是一个错误，我建议您在项目网站上提交一个错误，或者尝试通过获取[源代码](http://codecover.svn.sourceforge.net/viewvc/codecover/)自行修复它。

# wordpress - WP电子商务显示问题

> ID：12036962
> 
> 赞同：0
> 
> 时间：2012-08-20T11:38:32.353
> 
> 标签：wordpress

我在一个页面上使用 WP-e-commerce 并添加了大约 30 种产品，但 WP-eCommerce 仅显示 10 种产品，我检查了短代码，一切似乎都很好。即使它显示它也不会显示被调用的子类别。任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:50:28.973

您的博客文章是否只显示 10 篇？

```
Settings -> Reading -> 'Blog pages show at most' 
```

# javascript - Javascript中的通用树实现

> ID：12036966
> 
> 赞同：6
> 
> 时间：2012-08-20T11:39:13.160
> 
> 标签：javascript, tree

有人知道 JavaScript 的通用树（节点可能有多个子节点）实现吗？

它至少应该能够做这些事情，

1.  获取父节点。
2.  获取子节点。
3.  得到所有的后代。
4.  删除所有后代。
5.  删除子节点。

一些类似于邻接列表模型的实现。

**背景：**我需要为我的网页存储基于 JavaScript 的分层数据我找不到通用树的良好 JavaScript 实现所以我所做的是我使用 ajax 使用邻接列表模型和 php 将分层数据存储到数据库中。当用户在同一浏览器的两个选项卡中打开同一页面或在两个不同的浏览器中打开该页面时，问题就出现了，因为这两个实例都在写入从同一个表读取的同一个表，这导致我遇到任何可能的解决方法回答我的问题。

**编辑：** *性能*在任何时候都不是我的限制，我不会有超过 50 个条目。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T12:42:25.453

你可以试试这个：[https ://github.com/afiore/arboreal](https://github.com/afiore/arboreal)

或者这个：[https](https://github.com/mauriciosantos/buckets/) ://github.com/mauriciosantos/buckets/ （只有二叉搜索树，但还有其他数据结构）

如果您需要更复杂的东西，您将需要编写自己的库（或至少一个包含您所描述的所有方法的对象）。

编辑：

这是我实现树功能的简单代码。删除所有后代并删除所有孩子实际上是相同的......所以：

```
function Node(value) {

    this.value = value;
    this.children = [];
    this.parent = null;

    this.setParentNode = function(node) {
        this.parent = node;
    }

    this.getParentNode = function() {
        return this.parent;
    }

    this.addChild = function(node) {
        node.setParentNode(this);
        this.children[this.children.length] = node;
    }

    this.getChildren = function() {
        return this.children;
    }

    this.removeChildren = function() {
        this.children = [];
    }
}

var root = new Node('root');
root.addChild(new Node('child 0'));
root.addChild(new Node('child 1'));
var children = root.getChildren();
for(var i = 0; i < children.length; i++) {
    for(var j = 0; j < 5; j++) {
        children[i].addChild(new Node('second level child ' + j));
    }
}
console.log(root);
children[0].removeChildren();
console.log(root);
console.log(root.getParentNode());
console.log(children[1].getParentNode()); 
```

在 Chrome（或其他支持控制台的浏览器）中运行它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T05:18:06.683

尽管您确实说过“通用树”，但对于已经内置*的*`DOMParser`.

我尊重其他程序员的意见，但我仍然认为您可以`DOM`尝试一下，看看它是否适合您。

这是一个关于它如何工作的简单说明：

```
var tXML="<root><fruit><name>apple</name><color>red</color></fruit><fruit><name>pear</name><color>yellow</color></fruit></root>";
var tree=(new DOMParser).parseFromString(tXML,"text/xml");
//get descendants
var childs=tree.documentElement.childNodes;
for(var i=0;i<childs.length;i++)
{
 if(childs[i].nodeName=="fruit")
 {
  document.write(childs[i].getElementsByTagName("name")[0].textContent);
  document.write(": ");
  document.write(childs[i].getElementsByTagName("color")[0].textContent);
  document.write("<br />");
 }
}
//get child node
var appl=tree.documentElement.getElementsByTagName("fruit")[0];
document.write(appl.getElementsByTagName("name")[0].textContent+"<br />");
//get parent node
document.write(appl.parentNode.nodeName);
document.write("<br />");
//remove child node
if(tree.documentElement.getElementsByTagName("color").length>1)
{
 var clr=tree.documentElement.getElementsByTagName("color")[1];
 clr.parentNode.removeChild(clr);
}
document.write("<textarea>"+(new XMLSerializer).serializeToString(tree)+"</textarea><br />");
//remove descendants
while(tree.documentElement.childNodes.length>0)
{
 tree.documentElement.removeChild(tree.documentElement.childNodes[0]);
}
document.write("<textarea>"+(new XMLSerializer).serializeToString(tree)+"</textarea>"); 
```

我没有“简化”那些长函数名，所以你可能会有更好的主意。

# php - 如何在外键中插入数据以及zend框架中的其他数据

> ID：12036968
> 
> 赞同：0
> 
> 时间：2012-08-20T11:39:16.047
> 
> 标签：php, zend-framework

将数据插入 MySQL 数据库时出现问题。出现以下错误：

> SQLSTATE [HY000]：一般错误：1452 无法添加或更新子行：外键约束失败（`login`. `employees`, CONSTRAINT `employees_ibfk_1`FOREIGN KEY ( `u_id`) REFERENCES `users`( `id`) ON DELETE CASCADE ON UPDATE CASCADE）

我有一个名为`employees`：

```
+-------------+
|  employees  |
+-------------+
| id          |
| u_id        |  foreign key of table `user` field `id`
| firstname   |
| lastname    |
| city        |
| designation |
+-------------+ 
```

我的表单代码：

```
class Application_Form_Login extends Zend_Form
{
public function init()
{
    $this->setName('Login');
    $this->setMethod('post');

    $username = $this->createElement('text','username');
    $username->setLabel('Username: *')
            ->setRequired(true)
            ->setFilters(array('StringTrim','StringToLower'))
            ->getValidators(array('stringLength',false,array(0,50)));

    $password = $this->createElement('password','password');
    $password->setLabel('Password: *')
            ->setRequired(true)
            ->setFilters(array('StringTrim'))
            ->getValidators(array('stringLength',false,array(0,50)));

    $submit = $this->createElement('submit','Sign in');
    $submit->setLabel('Sign in')
            ->setIgnore(true);

    $this->addElements(array($username,
                        $password,
                        $submit,));
}
} 
```

这是我的表模型：

```
class Application_Model_Dbtables_Employees extends Zend_Db_Table
{
protected $_name = 'employees';
} 
```

这是我的控制器：

```
class EmployeeController extends Zend_Controller_Action
{

public function init()
{
    /* Initialize action controller here */
}

public function indexAction()
{
    // action body
}

public function addAction()
{
    $emp = new Application_Model_Dbtables_Employees();
    $form = new Application_Form_employee();
    $this->view->form = $form;

    if($this->getRequest()->isPost())
    {
        $formdata = $this->_request->getPost();

          if($form->isValid($formdata))
          {
            unset($formdata['addemployee']);
            $emp->insert($formdata);
            $this->_redirect('Auth/home');
          }
          else
          {
            $this->view->errMsg = "Cound not able to insert data";
          }
    }
}
} 
```

我的视图文件：

```
<?php
if(isset($this->errMsg)) {
echo $this->errMsg;
}
?>

<?php 
 echo $this->form;
?> 
```

我的代码员工

```
<?php
class Application_Form_employee extends Zend_Form
{
public function init()
{
    $this->setMethod('post');
    $this->setName('addemployee');

    $firstname = $this->createElement('text', 'firstname');
    $firstname->setLabel('Firstname: *')
                ->setRequired(true)
                ->setFilters(array('StringToLower'));

    $lastname = $this->createElement('text', 'lastname');
    $lastname->setLabel('Lastname: *')
                ->setRequired(true)
                ->setFilters(array('StringToLower'));

    $city = $this->createElement('select', 'city');
    $city->setLabel('city: ')
        ->setRequired(true)
        ->setMultiOptions(array(
                '' => '---select city---',
                'ahmedabad' => 'Ahmedabad',
                'Vadodara' => 'Vadodara',
                'Anand' => 'Anand',
                'Surat' => 'Surat'));
    $designation = $this->createElement('select', 'designation');
    $designation->setLabel('Designation: ')
                ->setMultiOptions(array(
                        'java' => 'Java developer',
                        'php' => 'PHP developer',
                        'unix' => 'Unix developer'));

    $submit = $this->createElement('submit', 'addemployee');
    $submit->setLabel('Add Employee')
            ->setIgnore(true);

    $this->addElements(array(
            $firstname,
            $lastname,
            $city,
            $designation,
            $submit,));
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:20:31.313

这是我能想到的一种使它起作用的方法。基本上，当在员工表中插入新条目时，您有一个限制，即数据库需要相应的外键 (u_id)。您传递了表单数据，但没有传递 u_id。因此，在您的 Application_Form_employee 表单中，您可以添加一个隐藏字段来保存插入记录的用户 ID：

```
$uId = $this->createElement('hidden', 'u_id');
$uId->setValue(Zend_Auth::getInstance()->getIdentity()->id);
//And when you add elements to your form, add this field
    $this->addElements(array(
            $firstname,
            $lastname,
            $city,
            $designation,
            $uId,
            $submit,)); 
```

我认为这可以解决问题。

# c - C 目录扫描进入无限循环

> ID：12036969
> 
> 赞同：1
> 
> 时间：2012-08-20T11:39:22.463
> 
> 标签：c

```
int ScanDirectories(const char *dirname, struct images *imagesHeadPtr, struct filesToParse *filesHeadPtr)
{
    // scan the directory and store the entries in a buffer 

DIR *dir;
struct dirent *ent;
int jpgs = 0, pngs = 0;
int totalFiles = 0;
int filesToScan = 0;
char name[256];
char *tmp = malloc(sizeof(char));

if((dir = opendir(dirname)) == NULL)
{
    perror("Unable to open directory");
    DisplayFolderNotFound();
    return(0);
}

while((ent = readdir(dir)) != NULL)
{
    strcpy(name, ent->d_name);
    strncpy(tmp, name, 1);
    if(strcmp(tmp, ".") == 0)   //Not valid directories. These are dir's created by system and are hidden.
    continue;

    char dirCopy[strlen(dirname)+ strlen(name) + 1 /* for slash */  + 1 /*for null character*/];

    strcpy(dirCopy, dirname);        
    strcat(dirCopy, "/");
    strcat(dirCopy, name);

    struct stat s;

    if( stat(dirCopy, &s) == 0 )
    {
        if( s.st_mode & S_IFDIR )
        {
            //              it's a directory
            //              printf("Directory [%s]\n", dirCopy);
            ScanDirectories(dirCopy, imagesHeadPtr, filesHeadPtr); //Already inside a dir, recursively traverse it.
        }
        else if( s.st_mode & S_IFREG )
        {
            //it's a file
            //printf("File [%s]\n", name);

            ++totalFiles;
        }
        else
        {
            //something else
        }
    }
    else
    {
        //error
        return(0);
    }

    int extensionLength = 0;
    char *endP = name + strlen(name) - 1; //pointer to the last char of filename
    char *temp = endP;

    while (*temp != '.')
    {
        ++extensionLength;
        --temp;
    }

    char *extension = (char *)malloc(sizeof(char)*(extensionLength+1 /* for . */ + 1 /* for null char */));
    strncpy(extension, name+strlen(name)-extensionLength-1, extensionLength+2);

    if(strcmp(extension, ".abc")==0)
    {                
        ++pngs;

        struct images *nextPtr = imagesHeadPtr;

        while(nextPtr->next != NULL)
        nextPtr = nextPtr ->next;

        nextPtr->fileName = (char *)malloc(sizeof(char)*(strlen(name)+1));
        strcpy(nextPtr->fileName, name);
        nextPtr->filePath = (char *)malloc(sizeof(char)*(strlen(dirCopy)+1));
        strcpy(nextPtr->filePath, dirCopy);
        nextPtr->isUsed = 0;
        nextPtr->fileSize = GetFileSize(dirCopy)/1000.0;
        nextPtr->next = (struct images *)malloc(sizeof(struct images));
        nextPtr = nextPtr->next;
        nextPtr->fileName = NULL;
        nextPtr->filePath = NULL;
        nextPtr->isUsed = 0;
        nextPtr->fileSize = 0;
        nextPtr->next = NULL;
    }

    else if(strcmp(extension, ".rst")==0)
    {                
        ++jpgs;

        struct images *nextPtr = imagesHeadPtr;

        while(nextPtr->next != NULL)
        nextPtr = nextPtr ->next;

        nextPtr->fileName = (char *)malloc(sizeof(char)*(strlen(name)+1));
        strcpy(nextPtr->fileName, name);
        nextPtr->filePath = (char *)malloc(sizeof(char)*(strlen(dirCopy)+1));
        strcpy(nextPtr->filePath, dirCopy);
        nextPtr->isUsed = 0;
        nextPtr->fileSize = GetFileSize(dirCopy)/1000.0;
        nextPtr->next = (struct images *)malloc(sizeof(struct images));
        nextPtr = nextPtr->next;
        nextPtr->fileName = NULL;
        nextPtr->filePath = NULL;
        nextPtr->isUsed = 0;
        nextPtr->fileSize = 0;
        nextPtr->next = NULL;
    }

    else if(strcmp(extension, ".dig") == 0)
    {
        ++filesToScan;

        struct filesToParse *nextPtr = filesHeadPtr;

        while(nextPtr->next != NULL)
        nextPtr = nextPtr ->next;

        nextPtr->filePath = (char *)malloc(sizeof(char)*(strlen(dirCopy)+1));
        strcpy(nextPtr->filePath, dirCopy);
        nextPtr->next = (struct filesToParse *)malloc(sizeof(struct filesToParse));
        nextPtr = nextPtr->next;
        nextPtr->filePath = NULL;
        nextPtr->next = NULL;        
    }

    else if(strcmp(extension, ".x") == 0)
    {
        ++filesToScan;

        struct filesToParse *nextPtr = filesHeadPtr;

        while(nextPtr->next != NULL)
        nextPtr = nextPtr ->next;

        nextPtr->filePath = (char *)malloc(sizeof(char)*(strlen(dirCopy)+1));
        strcpy(nextPtr->filePath, dirCopy);
        nextPtr->next = (struct filesToParse *)malloc(sizeof(struct filesToParse));
        nextPtr = nextPtr->next;
        nextPtr->filePath = NULL;
        nextPtr->next = NULL;        
    }

    else if(strcmp(extension, ".cderf") == 0)
    {
        ++filesToScan;

        struct filesToParse *nextPtr = filesHeadPtr;

        while(nextPtr->next != NULL)
        nextPtr = nextPtr ->next;

        nextPtr->filePath = (char *)malloc(sizeof(char)*(strlen(dirCopy)+1));
        strcpy(nextPtr->filePath, dirCopy);
        nextPtr->next = (struct filesToParse *)malloc(sizeof(struct filesToParse));
        nextPtr = nextPtr->next;
        nextPtr->filePath = NULL;
        nextPtr->next = NULL;                        
    } 

        free(extension); //because of this line, my code runs into infinite loop saying
//unable to open dir : too many files open. If I comment this out, my code works fine but the concepts of memory management say that I should be freeing it. 

}

free(tmp);

if (closedir(dir) != 0)
perror("Unable to close directory");

return(1); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:41:34.663

*更新*：为了完整起见，添加另一个观察：

`tmp`处理也坏了；它被分配为一个 1 字符的缓冲区，除了空字符串之外，它永远不能保存任何有效的 C 字符串，因为字符串终止字符需要 1 个字符。

删除`tmp`，然后直接比较`ent->d_name`：

```
if(strcmp(ent->d_name, ".") == 0)
  continue; 
```

然后，这个：

```
char *endP = name + strlen(name) - 1; //pointer to the last char of filename
char *temp = endP;

while (*temp != '.')
{
    ++extensionLength;
    --temp;
} 
```

对于不包含句点的文件名会严重破坏。

一个更理智的方法是寻找最后一个时期，并处理它不存在的情况：

```
const char *ldot = strrchr(name, '.');
if(ldot != NULL)
{
  /* Extension found. */
}
else
{
  /* No extension. */
} 
```

当然，`[strrchr()](http://linux.die.net/man/3/strrchr)`如果文件名采用多字节编码，则使用诸如文件名之类的库函数是不安全的。你需要意识到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T11:44:42.647

当字符串不同或到达（字符串结尾）时， C 库函数`strcmp()`停止比较： [http ://www.cplusplus.com/reference/clibrary/cstring/strcmp/](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)`\0`

```
if(strcmp(tmp, ".") == 0)   //Not valid directories. These are dir's created by system and are hidden.
    continue; 
```

但是 tmp 字符串没有空终止符`\0`。所以比较产生了无限循环。

为 tmp 字符串保留 2 个字节而不是 1 个字节：

```
char *tmp = malloc(2*sizeof(char)); 
```

将终止符添加`\0`到字符串：

```
tmp[1]='\0'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:47:18.207

我还没有阅读所有代码，但我可能在这里的错误：

```
if(strcmp(tmp, ".") == 0)   //Not valid directories. These are dir's created by system and are hidden.
continue; 
```

通过使用这种结构，你只是 exclude 。（当前）目录。所以你不排除 .. （父）目录，这会导致循环。除了你想排除隐藏的目录，所以最好的办法是使用这个结构：

```
if (tmp[0] == '.') 
```

# mongodb - 为什么在 MongoDB 中完整扫描一个表需要更长的时间？

> ID：12036970
> 
> 赞同：4
> 
> 时间：2012-08-20T11:39:25.853
> 
> 标签：mongodb

我已经用 10 M 行数据进行了测试。每行有 3 个整数列和 2 个字符串列。首先，我将这些数据导入到单个分片的 mongoDB。我在非索引列上使用 db.table.find() 进行了简单的“where”查询。该查询获取大约需要 7 秒的单行。

在同一硬件上，我将相同的数据加载到内存中的 ac# 列表中。我做了一个 while 循环来扫描所有 10M 数据并做一个简单的相等控制来模拟 where 查询。它只需要大约 650 毫秒，比 MongoDB 快得多。

我有一台 32 GB 的机器，所以 mongodb 对表进行内存映射没有问题。

为什么 mongoDB 慢得多？是因为 mongoDB 将数据保存在难以完全扫描的数据结构中，还是因为内存映射与将数据保存在变量中不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T12:16:40.260

正如 Remon 指出的那样，您在此测试中肯定是在将苹果与橙子进行比较。

要了解更多关于该表扫描幕后发生的事情，请在[此处](http://horicky.blogspot.com/2012/04/mongodb-architecture.html)阅读 MongoDB 内部。（查看存储模型下）

![在此处输入图像描述](../Images/58401928cabb79e742ce7839000a6cd4.png) 有一个表示连续磁盘​​空间的范围的概念。

每个范围都指向一个文档链接列表。

该文档包含 BSON 格式的数据。所以现在你可以想象我们将如何检索数据。

现在，拥有索引的美妙之处恰如其分地显示在右上角。MongoDB 使用 BTree 结构进行导航，速度非常快。

尝试更改您的测试以进行一些热身运行并使用索引。

**更新**：作为我日常工作的一部分，我做了一些测试来比较 JBoss Cache（内存中的 Java 缓存）与 MongoDB 作为应用程序缓存（针对 _id 的查询）的性能。结果相当可比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:59:25.510

从哪儿开始..

首先测试完全是苹果和橘子。将数据集加载到内存中并对其进行完全的内存扫描绝不等于对任何数据库进行表扫描。

我也敢打赌，您正在对冷数据进行测试，并且 MongoDB 的性能在将热数据交换到内存时显着提高。请注意，MongoDB 不会抢先将数据交换到内存中。当且仅当频繁访问数据（或根本不访问，取决于）时，它才会这样做。实际上，更准确地说操作系统确实如此，因为 MongoDB 的存储引擎是建立在 MMF（内存映射文件）之上的。

所以简而言之，您的测试不是一个好的测试，而且您测试 MongoDB 的方式并没有产生准确的结果。您正在使用 C# 等效项测试理论上的最佳案例，除此之外，它比数据库代码复杂得多。

# c# - TimeSpan.ParseExact 给出错误

> ID：12036972
> 
> 赞同：3
> 
> 时间：2012-08-20T11:39:37.543
> 
> 标签：c#, timespan

我创建了一个`TimeSpan`这样的

```
TimeSpan ts = new Timespan();

// Do some addition and subtraction on it 
```

然后我使用这个将它保存到一个文件中

```
string.Format("{0}:{1}:{2}:{3}", ts.Hours, ts.Minutes, ts.Seconds, ts.MilliSeconds); 
```

从它返回的各种值是这样的

```
0:0:4:410
0:0:1:425
0:0:1:802
0:0:1:509
0:0:1:674
0:0:1:628
0:0:2:76 
```

如何将其转换回 TimeSpan。

我在用

```
TimeSpan.ParseExact("0:0:4:410", "h:m:s:fff", null); 
```

但它给了我错误`Input String is not in correct format.`

我哪里错了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T11:46:14.097

我相信你需要解析冒号，基本上。我还建议使用不变的文化而不是当前的线程文化：

```
var ts = TimeSpan.ParseExact("0:0:4:410", @"h\:m\:s\:fff",
                             CultureInfo.InvariantCulture); 
```

从[文档中](http://msdn.microsoft.com/en-us/library/ee372287.aspx)：

> 自定义 TimeSpan 格式说明符不包括占位符分隔符，例如将天与小时、小时与分钟或秒与小数秒分开的符号。相反，这些符号必须作为字符串文字包含在自定义格式字符串中。例如，“dd.hh:mm”将句点 (.) 定义为天和小时之间的分隔符，将冒号 (:) 定义为小时和分钟之间的分隔符。

我*还*建议使用以下格式`h:mm:ss.fff`- 我相信这会比您当前的格式更清晰。请注意，您可以直接使用格式而不是当前的格式化方法：

```
const string TimeSpanFormat = @"h\:mm\:ss\.fff";

string text = ts.ToString(TimeSpanFormat, CultureInfo.InvariantCulture);
...
TimeSpan parsed = TimeSpan.ParseExact(text, TimeSpanFormat,
                                      CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:47:13.660

`colons`当你进行解析时，你将不得不逃避:

```
TimeSpan.ParseExact("0:0:4:410", @"h\:m\:s\:fff", null) 
```

> 自定义 TimeSpan 格式说明符不包括占位符分隔符，例如将天与小时、小时与分钟或秒与小数秒分开的符号。相反，这些符号必须作为字符串文字包含在自定义格式字符串中。例如，“dd.hh:mm”将句点 (.) 定义为天和小时之间的分隔符，将冒号 (:) 定义为小时和分钟之间的分隔符。

[被咬了一段时间](https://stackoverflow.com/questions/11719055/why-does-timespan-parseexact-not-work/11719101#11719101)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T11:54:51.090

尝试这个：

```
TimeSpan timeSpan = TimeSpan.ParseExact("0:0:4:410", @"h\:m\:s\:fff", null); 
```

# node.js - 如何匹配 MongoDB 中给定坐标列表中的任何位置？

> ID：12036986
> 
> 赞同：-1
> 
> 时间：2012-08-20T11:40:02.000
> 
> 标签：node.js, mongodb, mongoose, geospatial

我目前正在使用带有 node.js 和 Mongoose 的 MongoDB 来执行地理空间搜索。

我正在使用以下文档和集合：

*   *航路点*是包含位置和其他元数据的文档（就在那里，与此问题无关）
*   *目标*集合包含`1...n` *航点*
*   *来源*集合包含确切的`1` *航点*

这些文档可能看起来像什么的简单示例：

```
// Target
{
  waypoints: [
    {
      loc: [61.24, 22.24],
      time: 0
    },
    {
      loc: [61.25, 22.24],
      time: 1
    },
    {
      loc: [61.26, 22.24],
      time: 2
    },
  ]
}

// Source
{
  waypoint: {
    loc: [61.24, 22.24],
    time: 0
  }
} 
```

所以我的问题是：

**鉴于我们有一个特定的`target`文档（如上面的文档），找到`source`靠近（在 MAX_DISTANCE 的距离内）任何给定航路点的所有文档的最简单方法是`target`什么？**

单个航路点的匹配是微不足道的：

```
Source.find({
  'from.loc': {
    $within: {
      $center: [target.waypoints[0].loc, MAX_DISTANCE],
      $uniqueDocs: true
    }
  }
}) 
```

但是，我正在努力寻找如何匹配任何给定航点的解决方案。例如以下查询不起作用：

```
Source.find({
  $or: [
    {
      'waypoint.loc': {
        $within: {
          $center: [target.waypoints[0].loc, MAX_DISTANCE],
          $uniqueDocs: true
        }
      }
    },
    {
      'waypoint.loc': {
        $within: {
          $center: [target.waypoints[1].loc, MAX_DISTANCE],
          $uniqueDocs: true
        }
      }
    },
    {
      'waypoint.loc': {
        $within: {
          $center: [target.waypoints[2].loc, MAX_DISTANCE],
          $uniqueDocs: true
        }
      }
    }
  ] 
}) 
```

有什么想法为什么这不起作用，还有什么替代方法？

非常感谢所有帮助！

PS 我正在使用 MongoDB v2.0.5、Mongoose 2.7.4 和节点 v0.8.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T01:00:10.140

`$or`无论如何，查询在内部都是作为单独的查询实现的，所以除了缺乏优雅之外，像下面这样的工作没有太多的膨胀（在[下划线](http://documentcloud.github.com/underscore/#)库的帮助下）：

```
var nearSources = {}, count = target.waypoints.length;
target.waypoints.forEach(function (waypoint) {
  Source.find({
    'waypoint.loc': {
      $within: {
        $center: [waypoint.loc, MAX_DISTANCE],
        $uniqueDocs: true
      }
    }
  }, function (err, sources) {
    if (sources) {
      // Add the unique sources to the nearSources object by _id.
      sources.forEach(function (source) {
        nearSources[source._id] = source;
      });
    }
    if (--count === 0) {
      // Done!  Convert nearSources to an array of source docs.
      nearSources = _.values(nearSources);
    }
  });
}); 
```

# android - 在 webview 中实现 Next Previous

> ID：12036989
> 
> 赞同：0
> 
> 时间：2012-08-20T11:40:32.657
> 
> 标签：android, webview

我正在尝试创建一个 EPUB 阅读器，并且我想在 webview(html) 中实现 Next Previous 我使用这种方法

```
webViewRead.scrollBy(0, 0);
webViewRead.scrollTo(0, webViewRead.getHeight()); 
```

但问题是`webViewRead.getContentHeight()`给我完美的 html 文件内容高度，但它不能正确显示。

```
if(pageUP){
    webViewRead.scrollBy(0, 0);
    webViewRead.scrollTo(0, _webviewHeightIndex*webViewRead.getHeight());
    pageUP=false;
}

if(pageDown){
    webViewRead.scrollBy(0, 0);
    webViewRead.scrollTo(0, _webviewHeightIndex*webViewRead.getHeight());
    pageDown=false;
} 
```

这里`_webviewHeightIndex`页数女巫的 if 索引从 0 开始到

```
webViewRead.getContentHeight()/webViewRead.getHeight(); 
```

它没有给我正确的分页。他们有什么其他方式吗...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:05:55.463

[在这里](https://github.com/NightWhistler/HtmlSpanner)和[这里](https://github.com/NightWhistler/PageTurner/tree/master/src/main/java/net/nightwhistler/pageturner)查看epub 阅读应用程序。这将对您有所帮助。

# c#-4.0 - EF4 - 仅当列具有唯一值时才插入？

> ID：12036991
> 
> 赞同：0
> 
> 时间：2012-08-20T11:40:42.780
> 
> 标签：c#-4.0, entity-framework-4

假设一个简单的类似博客的场景，其中帖子由 id 和 SEO 友好的 slug 存储。有没有办法在插入过程中检查 slug 是否已经存在？我的意思是，我总是可以做类似的事情：

```
var check = context.Posts.SingleOrDefault(p => p.slug == slug);

if (check != null)
{
    // slug already exists - modify or throw exception
}
else
{
    // save as normal
} 
```

但这对我来说似乎非常不雅。我认为有更好的方法，但不确定它会是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:49:45.040

您可以`UNIQUE CONSTRAINT`在基础数据库中的适当表上设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:53:08.737

你应该尽可能避免抛出异常，并且只使用它们来处理“适当的”异常，这意味着你可以避免发生的事情。

无论如何，您的代码没有任何问题

# algorithm - 算法中的抽象数据类型

> ID：12036993
> 
> 赞同：1
> 
> 时间：2012-08-20T11:40:45.020
> 
> 标签：algorithm, data-structures, adt

> 我们在应用程序中使用的数据结构往往包含大量各种类型的信息，而某些信息可能属于多个独立的数据结构。例如，人事数据文件可能包含姓名、地址和有关员工的各种其他信息的记录；并且每条记录可能需要属于一个用于搜索特定员工的数据结构，属于另一个用于回答统计查询的数据结构，等等。
> 
> 尽管存在这种多样性和复杂性，但一大类计算应用程序涉及对数据对象的一般操作，并且出于有限数量的特定原因需要访问与它们相关联的信息。许多所需的操作是基本计算过程的自然产物，因此在广泛的应用中都需要它们。

以上文本由 Robert Sedwick 在 C++ 中的算法中在抽象数据类型的上下文中进行了描述。

我的问题是作者在上述文本中的第一段是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:48:21.490

数据结构是数据存储和算法的组合，它们在这些数据组织上工作，以提供具有特定约束的某些操作（搜索、索引、排序、更新、添加等）的实现。这些是软件中信息表示的构建块（在黑盒意义上）。在最基本的层面上，这些是队列、堆栈、列表、哈希映射/关联容器、堆、树等。

不同的数据结构有不同的**权衡**。你必须在正确的情况下使用正确的。这是关键。

有鉴于此，您可以并行使用多个（或“复合”）数据结构，允许以不同方式查询和操作相同的逻辑数据，从而填补彼此的权衡（优势/劣势，例如一个可能是预先排序的，另一个可能是擅长跟踪更改，但删除条目等的成本更高），通常以一些额外开销为代价，因为这些数据结构需要保持彼此同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:47:26.967

如果有人知道这一切的结论是什么，那将会有所帮助，但从我收集到的信息来看：

员工记录：

```
Name Address Phone-Number      Salary Bank-Account      Department Superior 
```

如您所见，员工数据库包含每个员工的信息，这些信息本身被“细分”为或多或少独立的块：员工的联系信息与他工作的部门几乎没有关系，或者他得到的薪水。

编辑：因此，根据需要做什么样的事情，需要查看这个较大记录的不同部分，可能以不同的方式。如果您想知道您总共支付了多少薪水，您需要做的事情与查找员工的电话号码不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:53:01.340

一个对象可能是另一个对象/结构的一部分，并且关联不是唯一的；一个对象可能是多个不同结构的一部分，具体取决于上下文。

比如说，有一个公司员工约翰。他的“员工记录”将出现在他的团队成员名单、工资名单、安全许可名单、停车位分配等中。

Not all data contained within his "employee record" will be needed in all of these contexts. His expertise fields are not necessary for parking place allotment, and his marital status should not play a role in meeting room assignment - separate subsystems and larger structures his entry is a part of don't require all of the data contained within his entry, just specific parts of it.