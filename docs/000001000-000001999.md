# StackOverflow 问答 1000-1999

# linux - 获取vi中文件的root权限？

> ID：1005
> 
> 赞同：252
> 
> 时间：2008-08-04T03:34:02.860
> 
> 标签：linux, unix, vi

通常在编辑配置文件时，我会用 vi 打开一个，然后当我去保存它时发现我没有输入

```
sudo vi filename 
```

有没有办法给 vi sudo 权限来保存文件？我似乎记得不久前在查找有关 vi 的一些内容时看到了一些关于此的内容，但现在我找不到它。

* * *

## 回答 #1

> 赞同：306
> 
> 时间：2008-08-31T19:23:48.347

`%`替换为当前文件名，因此您可以使用：

```
:w !sudo tee % 
```

（`vim`将检测到文件已被更改并询问您是否要重新加载它。通过选择`[L]`而不是 OK 说是。）

作为快捷方式，您可以定义自己的命令。将以下内容放入您的`.vimrc`:

```
command W w !sudo tee % >/dev/null 
```

使用上述内容，您可以键入`:W<Enter>`以保存文件。自从我写了这个，我找到了一个更好的方法（在我看来）来做到这一点：

```
cmap w!! w !sudo tee >/dev/null % 
```

这样你可以输入`:w!!`，它会被扩展为完整的命令行，把光标留在最后，所以你可以用`%`你自己的文件名替换，如果你喜欢。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2008-08-04T06:52:32.270

一般来说，你不能改变vi进程的有效用户id，但是你可以这样做：

```
:w !sudo tee myfile 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-10-13T06:54:18.770

# 常见注意事项

解决只读文件问题的最常见方法是使用`sudo tee`. 但是，我在 Internet 上找到的所有最流行的解决方案都有几个潜在的警告：

*   整个文件以及文件都被写入终端。这对于大文件可能会很慢，尤其是在网络连接速度较慢的情况下。
*   该文件将失去其模式和类似属性。
*   可能无法正确处理包含异常字符或空格的文件路径。

# 解决方案

要解决所有这些问题，您可以使用以下命令：

```
" On POSIX (Linux/Mac/BSD):
:silent execute 'write !sudo tee ' . shellescape(@%, 1) . ' >/dev/null'

" Depending on the implementation, you might need this on Windows:
:silent execute 'write !sudo tee ' . shellescape(@%, 1) . ' >NUL' 
```

这些可以缩短，恭敬地：

```
:sil exec 'w !sudo tee ' . shellescape(@%, 1) . ' >/dev/null'
:sil exec 'w !sudo tee ' . shellescape(@%, 1) . ' >NUL' 
```

# 解释

`:`开始命令；您需要在正常模式下键入此字符才能开始输入命令。它应该在脚本中省略。

`sil[ent]`禁止命令的输出。在这种情况下，我们要停止运行命令`Press any key to continue`后出现的类似提示。`:!`

`exec[ute]`将字符串作为命令执行。我们不能只是运行`:write`，因为它不会处理必要的函数调用。

`!`表示`:!`命令：唯一`:write`接受的命令。通常，`:write`接受要写入的文件路径。 `:!`单独在 shell 中运行命令（例如，使用`bash -c`）。使用`:write`，它将在 shell 中运行命令，然后将整个文件写入`stdin`.

`sudo`应该很明显，因为这就是你在这里的原因。以超级用户身份运行命令。网络上有很多关于它是如何工作的信息。

`tee`管道`stdin`到给定的文件。 `:write`将写入`stdin`，然后超级用户`tee`将接收文件内容并写入文件。它不会创建新文件——只是覆盖内容——所以文件模式和属性将被保留。

`shellescape()`根据当前 shell 对给定文件路径中的特殊字符进行转义。只有一个参数，它通常会根据需要将路径括在引号中。由于我们要发送到完整的 shell 命令行，因此我们希望传递一个非零值作为第二个参数，以启用其他特殊字符的反斜杠转义，否则这些特殊字符可能会使 shell 出错。

`@%`读取`%`寄存器的内容，其中包含当前缓冲区的文件名。它不一定是绝对路径，因此请确保您没有更改当前目录。在某些解决方案中，您会看到 Commercial-at 符号被省略。取决于位置，是一个有效的表达式，并且与读取寄存器`%`具有相同的效果。`%`然而，嵌套在另一个表达式中的快捷方式通常是不允许的：例如在这种情况下。

`>NUL`并`>/dev/null`重定向`stdout`到平台的空设备。尽管我们已经使命令静音，但我们不希望所有与管道`stdin`返回 vim 相关的开销——最好尽早转储它。 `NUL`是 DOS、MS-DOS 和 Windows 上的空设备，不是有效文件。从 Windows 8 开始，重定向到 NUL 不会导致写入名为 NUL 的文件。尝试在您的桌面上创建一个名为 NUL 的文件，带或不带文件扩展名：您将无法这样做。（Windows 中还有其他几个可能值得了解的设备名称。）

# ~/.vimrc

## 平台相关

当然，您仍然不想记住这些并每次都输入它们。将适当的命令映射到更简单的用户命令要容易得多。要在 POSIX 上执行此操作，您可以将以下行添加到您的`~/.vimrc`文件中，如果它不存在则创建它：

```
command W silent execute 'write !sudo tee ' . shellescape(@%, 1) . ' >/dev/null' 
```

这将允许您键入 :W（区分大小写）命令以使用超级用户权限写入当前文件 - 容易得多。

## 平台无关

我使用`~/.vimrc`跨计算机同步的独立于平台的文件，因此我添加了多平台功能。这是一个`~/.vimrc`只有相关设置的：

```
#!vim
" Use za (not a command; the keys) in normal mode to toggle a fold.
" META_COMMENT Modeline Definition: {{{1
" vim: ts=4 sw=4 sr sts=4 fdm=marker ff=unix fenc=utf-8
"   ts:     Actual tab character stops.
"   sw:     Indentation commands shift by this much.
"   sr:     Round existing indentation when using shift commands.
"   sts:    Virtual tab stops while using tab key.
"   fdm:    Folds are manually defined in file syntax.
"   ff:     Line endings should always be <NL> (line feed #09).
"   fenc:   Should always be UTF-8; #! must be first bytes, so no BOM.

" General Commands: User Ex commands. {{{1
    command W call WriteAsSuperUser(@%)         " Write file as super-user.

" Helper Functions: Used by user Ex commands. {{{1
    function GetNullDevice() " Gets the path to the null device. {{{2
        if filewritable('/dev/null')
            return '/dev/null'
        else
            return 'NUL'
        endif
    endfunction

    function WriteAsSuperUser(file) " Write buffer to a:file as the super user (on POSIX, root). {{{2
        exec '%write !sudo tee ' . shellescape(a:file, 1) . ' >' . GetNullDevice()
    endfunction

" }}}1
" EOF 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-09-24T04:12:25.080

如果您使用的是[Vim](http://www.vim.org/)，则有一个名为[sudo.vim](http://www.vim.org/scripts/script.php?script_id=729)的脚本可用。如果您发现您打开了一个需要 root 访问权限才能读取的文件，请键入

```
:e 须藤:%
```

Vim 将 % 替换为当前文件的名称，并`sudo:`指示 sudo.vim 脚本接管读取和写入。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-08-04T04:04:52.110

Ryan 的建议通常是好的，但是，如果遵循第 3 步，请不要移动临时文件；它将拥有错误的所有权和权限。相反，`sudoedit`正确的文件并读入`:r`临时文件的内容（使用等）。

如果按照步骤 2，使用`:w!`强制写入文件。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-08-12T18:37:53.133

当您进入需要 sudo 访问权限才能编辑的文件的插入模式时，您会收到一条状态消息

```
-- INSERT -- W10: Warning: Changing a readonly file 
```

如果我错过了，通常我会

```
:w ~/edited_blah.tmp
:q 
```

..然后..

```
sudo "cat edited_blah.tmp > /etc/blah" 
```

..或者..

```
sudo mv edited_blah.tmp /etc/blah 
```

可能有一种不那么迂回的方法，但它确实有效。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-04T03:39:31.163

一个快速的谷歌似乎给出了这个建议：

1.  如果它是只读的，请不要尝试编辑。
2.  您也许可以更改文件的权限。（它是否会让你保存取决于实验。）
3.  如果您仍然编辑，请保存到临时文件，然后移动它。

[http://ubuntuforums.org/showthread.php?t=782136](http://ubuntuforums.org/showthread.php?t=782136)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-01-29T17:21:29.890

这是自回答此问题以来出现的另一个插件，一个名为 SudoEdit 的插件，它提供 SudoRead 和 SudoWrite 功能，默认情况下，它将首先尝试使用 sudo，如果失败，则使用 su：http: [//www.vim.org/scripts/ script.php?script_id=2709](http://www.vim.org/scripts/script.php?script_id=2709)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-19T12:51:48.797

我的 ~/.bashrc 中有这个：

```
alias svim='sudo vim' 
```

现在每当我需要编辑配置文件时，我只需用 svim 打开它。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2008-08-05T22:20:58.403

您可以考虑的一个快速破解方法是对您正在编辑的文件执行 chmod，用 vim 保存，然后 chmod 回到文件的原始状态。

```
ls -l test.file (to see the permissions of the file)
chmod 777 test.file
[This is where you save in vim]
chmod xxx test.file (restore the permissions you found in the first step) 
```

当然，我不建议在您担心安全性的系统中使用这种方法，因为几秒钟内任何人都可以在您没有意识到的情况下读取/更改文件。

# c# - 如何获取已构建、编码的 ViewState 的值？

> ID：1010
> 
> 赞同：31
> 
> 时间：2008-08-04T03:59:42.557
> 
> 标签：c#, asp.net, viewstate

我需要获取`base64-encoded`. `ViewState`显然，这在请求生命周期的相当晚的时候才可用，这没关系。

例如，如果页面的输出包括：

```
<input type="hidden" name="__VIEWSTATE" 
  id="__VIEWSTATE" value="/wEPDwUJODU0Njc5MD...==" /> 
```

我需要一种在服务器端获取价值的方法`"/wEPDwUJODU0Njc5MD...=="`

澄清一下，我在呈现页面时需要这个值，而不是在 PostBack 上。例如，我需要知道*发送*给客户端的 ViewState 值，而不是我从他们那里得到的 ViewState。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-08-04T08:04:41.737

Rex，我怀疑一个开始寻找的好地方是**压缩 ViewState**的解决方案——他们在将 ViewState 发送到客户端并压缩它之前在服务器上抓取它。这正是你想成为的地方。

*   [Scott Hanselman 谈 ViewState 压缩](http://www.hanselman.com/blog/CommentView,guid,febce059-7e7c-439e-af3d-c53d250b3e9c.aspx)(2005)
*   [使用 System.IO.Compression 进行 ViewState 压缩](http://www.bloggingdeveloper.com/post/How-To-Compress-ViewState-in-ASPNET-20-ViewState-Compression-with-SystemIOCompression.aspx)(2007)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-04T09:04:17.997

请参阅此[博客文章](http://aspguy.wordpress.com/2008/07/09/reducing-the-page-size-by-storing-viewstate-on-server/)，其中作者描述了一种用于覆盖生成 ViewState 的默认行为的方法，而是展示了如何将其保存在服务器 Session 对象上。

> 在 ASP.NET 2.0 中，ViewState 由 PageStatePersister 类的后代保存。这个类是一个用于保存和加载 ViewsState 的抽象类，在 .Net Framework 中有两个实现了这个类的后代，名为 HiddenFieldPageStatePersister 和 SessionPageStatePersister。默认情况下 HiddenFieldPageStatePersister 用于保存/加载 ViewState 信息，但我们可以很容易地让 SessionPageStatePersister 工作并将 ViewState 保存在 Session 对象中。

虽然我没有测试他的代码，但它似乎准确地显示了你想要的：一种在回发之前在服务器上访问 ViewState 代码的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-05T10:07:51.847

我在与上面发布的类似文章之后启用了压缩。在应用程序发送 ViewState 之前访问它的关键是覆盖此方法；

```
protected override void SavePageStateToPersistenceMedium(object viewState) 
```

您可以在此覆盖中调用基本方法，然后添加处理 ViewState 所需的任何其他逻辑。

# ruby-on-rails - 如何使用 Rails 2.1 中的 ExceptionNotifier 插件修复“找到未处理的视图路径”错误？

> ID：1024
> 
> 赞同：23
> 
> 时间：2008-08-04T04:48:38.013
> 
> 标签：ruby-on-rails, ruby, exception, plugins

将 rails 1.2 网站升级到 2.1 后，[ExceptionNotifier 插件](http://agilewebdevelopment.com/plugins/exception_notifier)不再工作，抱怨此错误：

> ActionView::TemplateFinder::InvalidViewPath：找到未处理的视图路径：“/path/to/appname/vendor/plugins/exception_notification/lib/../views”。使用#append_view_path、#prepend_view_path 或#view_paths= 设置视图路径。

是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-04T04:50:44.437

这是由 rails 2.1 中的更改引起的，该更改阻止 rails 出于安全原因从任意路径加载视图。

现在 github 上有插件的更新版本，所以解决方案是使用它。

* * *

后代的旧解决方案

要解决它，`init.rb`请在您的`vendor/plugins/exception_notification`目录下进行编辑，并将以下代码添加到末尾

```
ActionController::Base.class_eval do
  append_view_path File.dirname(__FILE__) + '/lib/../views'
end 
```

这会将 ExceptionNotifier 插件的视图文件夹添加到列表中，因此允许加载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-04T23:18:41.483

你应该升级到最新的异常通知插件，[它位于 GitHub 的新主页中](http://github.com/rails/exception_notification/tree/master)。

# ip - 如何根据某个IP获取Country？

> ID：1033
> 
> 赞同：61
> 
> 时间：2008-08-04T05:15:35.773
> 
> 标签：ip, lookup, country

有谁知道从给定 IP 地址检索国家/地区的任何简单方法，最好是 ISO_3166-1 格式？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2008-09-15T19:45:33.067

有两种方法：使用 Internet 服务和使用某种本地列表（可能包含在库中）。你想要什么取决于你正在建造什么。

对于服务：

*   [http://www.hostip.info/use.html](http://www.hostip.info/use.html)（如[Mark](https://stackoverflow.com/questions/1033/ip-to-country#1034)所述）
*   [http://www.team-cymru.org/Services/ip-to-asn.html](http://www.team-cymru.org/Services/ip-to-asn.html)

对于列表：

*   [http://www.maxmind.com/app/geoip_country](http://www.maxmind.com/app/geoip_country)（如[Orion](https://stackoverflow.com/questions/1033/ip-to-country#1056)所述）
*   您可以通过从 RIR 下载列表来创建自己的列表：

    *   [ftp.arin.net/pub/stats/arin/delegated-arin-latest](ftp://ftp.arin.net/pub/stats/arin/delegated-arin-latest)
    *   [ftp.ripe.net/ripe/stats/delegated-ripencc-latest](ftp://ftp.ripe.net/ripe/stats/delegated-ripencc-latest)
    *   [ftp.afrinic.net/pub/stats/afrinic/delegated-afrinic-latest](ftp://ftp.afrinic.net/pub/stats/afrinic/delegated-afrinic-latest)
    *   [ftp.apnic.net/pub/stats/apnic/delegated-apnic-latest](ftp://ftp.apnic.net/pub/stats/apnic/delegated-apnic-latest)
    *   [ftp.lacnic.net/pub/stats/lacnic/delegated-lacnic-latest](ftp://ftp.lacnic.net/pub/stats/lacnic/delegated-lacnic-latest)

        格式记录[在这个自述文件中](ftp://ftp.arin.net/pub/stats/arin/README)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2008-08-04T06:26:22.370

很多人（包括我的公司）似乎都在使用 MaxMind GeoIP。

他们有一个免费版本的[GeoLite](http://dev.maxmind.com/geoip/geoip2/geolite2/)，它不如付费版本准确，但如果你只是追求简单的东西，它可能就足够了。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-08-04T05:21:59.660

这是一个带有公共 API 的不错的免费服务：http: [//www.hostip.info/use.html](http://www.hostip.info/use.html)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2010-01-13T13:13:54.450

[ipinfodb](http://ipinfodb.com/)为国家/地区的 IP 提供免费的数据库和 API，反之亦然。他们使用 MaxMind 的免费数据。数据每个月都会更新，它是一个很好的免费替代品，准确度不错。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-08-04T14:02:14.493

我不知道[http://hostip.info](http://hostip.info)网站有多准确。我刚刚访问了那个网站，它报告说我的国家是加拿大。我在美国，我办公室使用的 ISP 仅在美国运营。它确实允许您更正其猜测，但如果您使用此服务按国家/地区跟踪网站访问者，您将无法知道数据是否正确。当然，我只是一个数据点。我下载了 GeoLite Country 数据库，它只是一个 .csv 文件，我的 IP 地址被正确识别为美国。

MaxMind 产品线（付费或免费）的另一个好处是您拥有数据，不会因向另一个系统调用 Web 服务而导致性能下降。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-27T03:04:41.713

最准确的是[Digital Elements](http://www.digital-element.net) NetAcuity。它不是免费的，但您大部分时间都能得到您所支付的费用。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-01-13T13:25:21.400

[谷歌的](http://code.google.com/p/gmaps-samples/source/browse/trunk/clientlocation/clientlocation.html)客户端位置返回（[我的例子](http://www.gralumo.com)）

```
latlng = new google.maps.LatLng(google.loader.ClientLocation.latitude, google.loader.ClientLocation.longitude);
location = "IP location: " + getFormattedLocation();
document.getElementById("location").innerHTML = location; 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2011-10-19T14:04:01.440

您可以使用为[这个问题](https://stackoverflow.com/questions/7778844/how-to-program-different-welcome-pages-based-on-country-ip)提供的解决方案。

但它返回一个 2 位数的国家代码。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-07-30T08:07:35.403

试试这个 php 代码

```
 <?php  $ip = $_SERVER['REMOTE_ADDR'];
    $json = file_get_contents("http://api.easyjquery.com/ips/?ip=".$ip."&full=true");
    $json = json_decode($json,true);
    $timezone = $json[localTimeZone];?> 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-08-26T04:49:49.810

为此，您可以使用我的服务[http://ipinfo.io](http://ipinfo.io)。API 返回一大堆关于 IP 地址的不同细节：

```
$ curl ipinfo.io/8.8.8.8
{
  "ip": "8.8.8.8",
  "hostname": "google-public-dns-a.google.com",
  "loc": "37.385999999999996,-122.0838",
  "org": "AS15169 Google Inc.",
  "city": "Mountain View",
  "region": "CA",
  "country": "US",
  "phone": 650
} 
```

如果您只在国家代码之后，您只需将 /country 添加到 URL：

```
$ curl ipinfo.io/8.8.8.8/country
US 
```

这是您可以使用的通用 PHP 函数：

```
function ip_details($ip) {
    $json = file_get_contents("http://ipinfo.io/{$ip}");
    $details = json_decode($json);
    return $details;
}

$details = ip_details("8.8.8.8");

echo $details->city;     // => Mountain View
echo $details->country;  // => US
echo $details->org;      // => AS15169 Google Inc.
echo $details->hostname; // => google-public-dns-a.google.com 
```

我在这些示例中使用了 IP 8.8.8.8，但如果您想要用户 IP 的详细信息，只需传入即可`$_SERVER['REMOTE_ADDR']`。更多详细信息，请访问[http://ipinfo.io/developers](http://ipinfo.io/developers)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-06-27T17:54:01.927

[使用来自http://www.mmtutorialvault.com/php-ip-to-country-function/](http://www.mmtutorialvault.com/php-ip-to-country-function/)的函数 ipToCountry($ip)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-05-26T14:59:31.140

您可以使用执行此工作的 Web 服务 API，例如：

```
see example of service: http://ip-api.com and usage: http://whatmyip.info 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-02-18T19:05:11.513

请参阅[ipdata.co](https://ipdata.co)，它为您提供来自 IP 地址的多个数据点。

API 非常快，有 10 个全局端点，每个端点每天能够处理超过 8 亿次调用。

这是一个卷曲示例：

```
curl https://api.ipdata.co/78.8.53.5
{
    "ip": "78.8.53.5",
    "city": "G\u0142og\u00f3w",
    "region": "Lower Silesia",
    "region_code": "DS",
    "country_name": "Poland",
    "country_code": "PL",
    "continent_name": "Europe",
    "continent_code": "EU",
    "latitude": 51.6461,
    "longitude": 16.1678,
    "asn": "AS12741",
    "organisation": "Netia SA",
    "postal": "67-200",
    "currency": "PLN",
    "currency_symbol": "z\u0142",
    "calling_code": "48",
    "flag": "https://ipdata.co/flags/pl.png",
    "emoji_flag": "\ud83c\uddf5\ud83c\uddf1",
    "time_zone": "Europe/Warsaw",
    "is_eu": true,
    "suspicious_factors": {
        "is_tor": false
    }
}⏎ 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-02-27T05:32:26.040

您可以尝试免费的[IP2Location LITE 数据库](https://lite.ip2location.com/database/ip-country)

在 MySQL 中创建表

```
CREATE DATABASE ip2location;
USE ip2location;
CREATE TABLE `ip2location_db1`(
    `ip_from` INT(10) UNSIGNED,
    `ip_to` INT(10) UNSIGNED,
    `country_code` CHAR(2),
    `country_name` VARCHAR(64),
    INDEX `idx_ip_to` (`ip_to`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 
```

导入数据

```
LOAD DATA LOCAL
    INFILE 'IP2LOCATION-LITE-DB1.CSV'
INTO TABLE
    `ip2location_db1`
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\r\n'
IGNORE 0 LINES; 
```

查询MySQL的PHP​​代码

```
<?php
// Replace this MYSQL server variables with actual configuration
$mysql_server = "mysql_server.com";
$mysql_user_name = "UserName";
$mysql_user_pass = "Password";

// Retrieve visitor IP address from server variable REMOTE_ADDR
$ipaddress = $_SERVER["REMOTE_ADDR"];

// Convert IP address to IP number for querying database
$ipno = Dot2LongIP($ipaddress);

// Connect to the database server
$link = mysql_connect($mysql_server, $mysql_user_name, $mysql_user_pass) or die("Could not connect to MySQL database");

// Connect to the IP2Location database
mysql_select_db("ip2location") or die("Could not select database");

// SQL query string to match the recordset that the IP number fall between the valid range
$query = "SELECT * FROM ip2location_db1 WHERE $ipno <= ip_to LIMIT 1";

// Execute SQL query
$result = mysql_query($query) or die("IP2Location Query Failed");

// Retrieve the recordset (only one)
$row = mysql_fetch_object($result);

// Keep the country information into two different variables
$country_code = $row->country_code;
$country_name = $row->country_name;

echo "Country_code: " . $country_code . "<br/>";
echo "Country_name: " . $country_name . "<br />";

// Free recordset and close database connection
mysql_free_result($result);
mysql_close($link);

// Function to convert IP address (xxx.xxx.xxx.xxx) to IP number (0 to 256^4-1)
function Dot2LongIP ($IPaddr) {
 if ($IPaddr == "")
 {
   return 0;
 } else {
   $ips = explode(".", $IPaddr);
   return ($ips[3] + $ips[2] * 256 + $ips[1] * 256 * 256 + $ips[0] * 256 * 256 * 256);
 }
}
?> 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2020-12-05T19:30:21.047

你可以试试[https://astroip.co](https://astroip.co)，​​它是我构建的一个新的 Geolocation API，它公开地理数据以及其他有用的数据点，如货币、时区、ASN 数据和安全性。

这是 json 响应的示例：

```
curl https://api.astroip.co/70.163.7.1
{
  "status_code": 200,
  "geo": {
    "is_metric": false,
    "is_eu": false,
    "longitude": -77.0924,
    "latitude": 38.7591,
    "country_geo_id": 6252001,
    "zip_code": "22306",
    "city": "Alexandria",
    "region_code": "VA",
    "region_name": "Virginia",
    "continent_code": "NA",
    "continent_name": "North America",
    "capital": "Washington",
    "country_name": "United States",
    "country_code": "US"
  },
  "asn": {
    "route": "70.160.0.0/14",
    "type": "isp",
    "domain": "cox.net",
    "organization": "ASN-CXA-ALL-CCI-22773-RDC",
    "asn": "AS22773"
  },
  "currency": {
    "native_name": "US Dollar",
    "code": "USD",
    "name": "US Dollar",
    "symbol": "$"
  },
  "timezone": {
    "is_dst": false,
    "gmt_offset": -18000,
    "date_time": "2020-12-05T17:04:48-05:00",
    "microsoft_name": "Eastern Standard Time",
    "iana_name": "America/New_York"
  },
  "security": {
    "is_crawler": false,
    "is_proxy": false,
    "is_tor": false,
    "tor_insights": null,
    "proxy_insights": null,
    "crawler_insights": null
  },
  "error": null,
  "ip_type": "ipv4",
  "ip": "70.163.7.1"
} 
```

# c# - 在 C# WinForms 应用程序中显示 Flash 内容

> ID：1037
> 
> 赞同：39
> 
> 时间：2008-08-04T05:35:52.240
> 
> 标签：c#, winforms, flash, adobe, macromedia

**在C#** WinForms 应用程序中显示`Flash`内容的最佳方式是什么？我想创建一个能够显示图像和 Flash 内容的用户控件（类似于 current ）。**`PictureBox`**

 **能够从各种**流**而不是磁盘上的文件加载闪存内容会很棒。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2008-08-04T05:44:45.887

虽然我自己没有在 Windows 窗体应用程序中使用过 Flash 对象，但我知道这是可能的。在工具箱上的 Visual Studio 中，选择添加新组件。然后在出现的新窗口中选择**“COM Components”**选项卡以获取一个列表，您可以在其中找到**“Shockwave Flash Object”**

添加到工具箱后，只需使用该控件，就像使用 Visual Studio 中的任何其他“标准”控件一样。

三个简单的命令可用于与控件交互：

*   AxShockwaveFlash1.Stop()
*   AxShockwaveFlash1.Movie = FilePath & "\FileName.swf"
*   AxShockwaveFlash1.Play()

我认为，这都是不言自明的。

> 能够从各种流而不是磁盘上的文件加载闪存内容会很棒。

我刚刚看到您也在寻找一种从流中加载内容的方法，并且因为我不太确定使用 Shockwave Flash 对象是否可行，所以我会给您另一种选择（实际上是两个）。

第一个是我建议您仅在必要时使用的那个，因为它使用完整的**“网络浏览器组件”**（也可作为额外的工具箱项目提供），这就像试图用火箭筒射击苍蝇一样。当然它会起作用，因为该控件将充当[真正的浏览器窗口](http://visualbasic.about.com/library/courses/blecvbsbs2202.htm)（实际上是 Internet Explorer 浏览器），但它并不真正意味着以您需要的方式使用。

第二种选择是使用我刚刚在寻找有关在 Windows 窗体中播放 Flash 内容的更多信息时发现的东西。[F-IN-BOX](http://www.f-in-box.com/dotnet/#feature_flv_playing)是一种商业解决方案，它还将播放来自给定网站 URL 的内容。（提供的链接将引导您访问必须使用的 .NET 代码）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-08-04T07:12:57.237

[Sven](https://stackoverflow.com/users/46/sven)，您得出了与我相同的结论：我找到了 Shockwave Flash 对象，尽管它的路径略有不同，但对于如何从磁盘/URL 上的文件以外的其他地方加载文件感到困惑。[F-IN-BOX](https://www.f-in-box.com/dotnet/)虽然只是 Shockwave Flash Object的一个包装器，但似乎提供了更多功能，这可能对我有帮助！

用火箭筒射击苍蝇可能很有趣，但嵌入式网络浏览器不是我要寻找的路径。:)

*Adobe 网站上有一个链接谈到“在 C# Windows 应用程序中嵌入和与 Macromedia Flash Player 通信”，但他们似乎已将其删除:(***

# c# - 如何删除被 C# 中的另一个进程锁定的文件？

> ID：1040
> 
> 赞同：58
> 
> 时间：2008-08-04T05:45:22.080
> 
> 标签：c#, file-locking

我正在寻找一种方法来删除被另一个使用 C# 的进程锁定的文件。我怀疑该方法必须能够找到哪个进程正在锁定文件（也许通过跟踪句柄，尽管我不确定如何在 C# 中执行此操作）然后关闭该进程，然后才能使用`File.Delete()`.

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2008-08-04T06:01:52.873

杀死其他进程不是一件健康的事情。如果您的场景涉及卸载之类的事情，您可以使用[**`MoveFileEx`**API 函数](https://docs.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-movefileexa)在下次重新启动时将文件标记为删除。

如果您确实需要删除另一个进程正在使用的文件，我建议您在考虑任何解决方案之前重新考虑实际问题。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-08-04T06:15:30.363

典型的方法如下。你说过你想在 C# 中做到这一点，所以这里......

1.  如果您不知道哪个进程锁定了文件，则需要检查每个进程的句柄列表，并查询每个句柄以确定它是否标识了锁定的文件。在 C# 中执行此操作可能需要 P/Invoke 或中间 C++/CLI 来调用您需要的本机 API。
2.  一旦你确定了哪个进程锁定了文件，你需要安全地将一个小的本地 DLL 注入到进程中（你也可以注入一个托管 DLL，但这更麻烦，因为你必须开始或附加到 .NET 运行时）。
3.  该引导 DLL 然后使用 CloseHandle 等关闭句柄。

本质上：解锁“锁定”文件的方法是将 DLL 文件注入有问题的进程的地址空间并自行关闭它。您可以使用本机或托管代码执行此操作。无论如何，您将需要少量的本机代码或至少 P/Invoke 到相同的代码中。

有用的网址：

*   *[将代码注入另一个进程的三种方法](http://www.codeproject.com/KB/threads/winspy.aspx)*
*   *[.NET 代码注入](http://damianblog.com/2008/07/02/net-code-injection/)*

祝你好运！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-08-04T06:12:11.447

如果您想以编程方式执行此操作。我不确定......我真的建议不要这样做。如果您只是在自己的机器上进行故障排除，[SysInternals Process Explorer](https://docs.microsoft.com/en-gb/sysinternals/downloads/process-explorer)可以帮助您

运行它，使用 Find Handle 命令（我认为它在 find 或 handle 菜单中），然后搜索文件名。找到句柄后，您可以强制关闭它们。

然后，您可以删除文件等。

**请注意**，这样做可能会导致拥有句柄的程序行为异常，因为您刚刚从它下面拉出了众所周知的地毯，但是当您调试自己的错误代码或 Visual Studio/Windows 资源管理器时，它工作得很好即使您在很久以前告诉他们关闭文件，也被废话并且不释放文件句柄...叹息:-)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-08-04T05:59:53.000

您可以使用这个程序[Handle](https://docs.microsoft.com/en-gb/sysinternals/downloads/handle)来查找哪个进程锁定了您的文件。这是一个命令行工具，所以我猜你会使用它的输出。我不确定以编程方式找到它。

如果删除文件可以等待，您可以指定在您的计算机下次启动时将其删除：

1.  开始`REGEDT32 (W2K)`或`REGEDIT (WXP)`导航到：

    ```
    HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\Session Manager 
    ```

2.  W2K 和 WXP

    *   **W2K：**
        编辑
        添加值...
        数据类型：`REG_MULTI_SZ`
        值名称：`PendingFileRenameOperations`
        `OK`

    *   **WXP：**
        编辑
        新
        的多字符串值
        `enter`
        `PendingFileRenameOperations`

3.  在数据区域，输入`"\??\" + filename`要删除。LFN 可以在不嵌入引号的情况下输入。要删除`C:\Long Directory Name\Long File Name.exe`，请输入以下数据：

    ```
    \??\C:\Long Directory Name\Long File Name.exe 
    ```

    然后按`OK`。

4.  “目标文件名”是一个空（零）字符串。输入如下：

    *   **W2K：**
        编辑
        二进制
        选择数据格式：十六进制
        单击十六进制字符串的末尾
        输入0000（四个零）
        `OK`

    *   **WXP：**
        右键单击值
        选择“修改二进制数据”
        单击十六进制字符串的末尾
        输入 0000（四个零）
        `OK`

5.  关闭`REGEDT32/REGEDIT`并重新启动以删除文件。

^(（为了后人的缘故，从[某个随机论坛](http://www.pcreview.co.uk/forums/thread-1581158.php)无耻地窃取。）)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-04T13:43:43.283

使用 Orion Edwards 的建议，我下载了 Sysinternals [Process Explorer](https://en.wikipedia.org/wiki/Process_Explorer)，这反过来又让我发现我在删除时遇到困难的文件实际上不是由`Excel.Applications`我认为的对象持有，而是我的 C# 代码发送邮件代码已经创建的事实一个 Attachment 对象，它使该文件的句柄处于打开状态。

看到这个，我很简单的调用了 Attachment 对象的 dispose 方法，句柄就被释放了。

Sysinternals explorer 让我发现它与 Visual Studio 2005 调试器一起使用。

我强烈推荐这个工具！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-08-04T06:14:42.690

哦，我多年前使用的一个大技巧是，Windows 不允许你*删除*文件，但它允许你*移动*它们。

伪代码：

```
mv %WINDIR%\System32\mfc42.dll %WINDIR\System32\mfc42.dll.old
Install new mfc42.dll
Tell user to save work and restart applications 
```

当应用程序重新启动时（注意我们不需要重新启动机器），它们加载了新的`mfc42.dll`，一切都很好。再加上`PendingFileOperations`在下次整个系统重新启动时删除旧的，效果很好。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-02-25T17:41:47.297

这看起来很有希望。一种杀死文件句柄的方法....

[http://www.timstall.com/2009/02/killing-file-handles-but-not-process.html](http://www.timstall.com/2009/02/killing-file-handles-but-not-process.html)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-01-27T20:45:29.153

您可以使用提供完整文件路径的代码，它将返回`List<Processes>`锁定该文件的任何内容：

```
using System.Runtime.InteropServices;
using System.Diagnostics;

static public class FileUtil
{
    [StructLayout(LayoutKind.Sequential)]
    struct RM_UNIQUE_PROCESS
    {
        public int dwProcessId;
        public System.Runtime.InteropServices.ComTypes.FILETIME ProcessStartTime;
    }

    const int RmRebootReasonNone = 0;
    const int CCH_RM_MAX_APP_NAME = 255;
    const int CCH_RM_MAX_SVC_NAME = 63;

    enum RM_APP_TYPE
    {
        RmUnknownApp = 0,
        RmMainWindow = 1,
        RmOtherWindow = 2,
        RmService = 3,
        RmExplorer = 4,
        RmConsole = 5,
        RmCritical = 1000
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    struct RM_PROCESS_INFO
    {
        public RM_UNIQUE_PROCESS Process;

        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = CCH_RM_MAX_APP_NAME + 1)]
        public string strAppName;

        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = CCH_RM_MAX_SVC_NAME + 1)]
        public string strServiceShortName;

        public RM_APP_TYPE ApplicationType;
        public uint AppStatus;
        public uint TSSessionId;
        [MarshalAs(UnmanagedType.Bool)]
        public bool bRestartable;
    }

    [DllImport("rstrtmgr.dll", CharSet = CharSet.Unicode)]
    static extern int RmRegisterResources(uint pSessionHandle,
                                          UInt32 nFiles,
                                          string[] rgsFilenames,
                                          UInt32 nApplications,
                                          [In] RM_UNIQUE_PROCESS[] rgApplications,
                                          UInt32 nServices,
                                          string[] rgsServiceNames);

    [DllImport("rstrtmgr.dll", CharSet = CharSet.Auto)]
    static extern int RmStartSession(out uint pSessionHandle, int dwSessionFlags, string strSessionKey);

    [DllImport("rstrtmgr.dll")]
    static extern int RmEndSession(uint pSessionHandle);

    [DllImport("rstrtmgr.dll")]
    static extern int RmGetList(uint dwSessionHandle,
                                out uint pnProcInfoNeeded,
                                ref uint pnProcInfo,
                                [In, Out] RM_PROCESS_INFO[] rgAffectedApps,
                                ref uint lpdwRebootReasons);

    /// <summary>
    /// Find out what process(es) have a lock on the specified file.
    /// </summary>
    /// <param name="path">Path of the file.</param>
    /// <returns>Processes locking the file</returns>
    /// <remarks>See also:
    /// http://msdn.microsoft.com/en-us/library/windows/desktop/aa373661(v=vs.85).aspx
    /// http://wyupdate.googlecode.com/svn-history/r401/trunk/frmFilesInUse.cs (no copyright in code at time of viewing)
    /// 
    /// </remarks>
    static public List<Process> WhoIsLocking(string path)
    {
        uint handle;
        string key = Guid.NewGuid().ToString();
        List<Process> processes = new List<Process>();

        int res = RmStartSession(out handle, 0, key);
        if (res != 0) throw new Exception("Could not begin restart session.  Unable to determine file locker.");

        try
        {
            const int ERROR_MORE_DATA = 234;
            uint pnProcInfoNeeded = 0,
                 pnProcInfo = 0,
                 lpdwRebootReasons = RmRebootReasonNone;

            string[] resources = new string[] { path }; // Just checking on one resource.

            res = RmRegisterResources(handle, (uint)resources.Length, resources, 0, null, 0, null);

            if (res != 0) throw new Exception("Could not register resource.");                                    

            //Note: there's a race condition here -- the first call to RmGetList() returns
            //      the total number of process. However, when we call RmGetList() again to get
            //      the actual processes this number may have increased.
            res = RmGetList(handle, out pnProcInfoNeeded, ref pnProcInfo, null, ref lpdwRebootReasons);

            if (res == ERROR_MORE_DATA)
            {
                // Create an array to store the process results
                RM_PROCESS_INFO[] processInfo = new RM_PROCESS_INFO[pnProcInfoNeeded];
                pnProcInfo = pnProcInfoNeeded;

                // Get the list
                res = RmGetList(handle, out pnProcInfoNeeded, ref pnProcInfo, processInfo, ref lpdwRebootReasons);
                if (res == 0)
                {
                    processes = new List<Process>((int)pnProcInfo);

                    // Enumerate all of the results and add them to the 
                    // list to be returned
                    for (int i = 0; i < pnProcInfo; i++)
                    {
                        try
                        {
                            processes.Add(Process.GetProcessById(processInfo[i].Process.dwProcessId));
                        }
                        // catch the error -- in case the process is no longer running
                        catch (ArgumentException) { }
                    }
                }
                else throw new Exception("Could not list processes locking resource.");                    
            }
            else if (res != 0) throw new Exception("Could not list processes locking resource. Failed to get size of result.");                    
        }
        finally
        {
            RmEndSession(handle);
        }

        return processes;
    }
} 
```

然后，迭代进程列表并关闭它们并删除文件：

```
 string[] files = Directory.GetFiles(target_dir);
    List<Process> lstProcs = new List<Process>();

    foreach (string file in files)
    {
        lstProcs = ProcessHandler.WhoIsLocking(file);
        if (lstProcs.Count > 0) // deal with the file lock
        {
            foreach (Process p in lstProcs)
            {
                if (p.MachineName == ".")
                    ProcessHandler.localProcessKill(p.ProcessName);
                else
                    ProcessHandler.remoteProcessKill(p.MachineName, txtUserName.Text, txtPassword.Password, p.ProcessName);
            }
            File.Delete(file);
        }
        else
            File.Delete(file);
    } 
```

并取决于文件是否在本地计算机上：

```
public static void localProcessKill(string processName)
{
    foreach (Process p in Process.GetProcessesByName(processName))
    {
        p.Kill();
    }
} 
```

或网络计算机：

```
public static void remoteProcessKill(string computerName, string fullUserName, string pword, string processName)
{
    var connectoptions = new ConnectionOptions();
    connectoptions.Username = fullUserName;  // @"YourDomainName\UserName";
    connectoptions.Password = pword;

    ManagementScope scope = new ManagementScope(@"\\" + computerName + @"\root\cimv2", connectoptions);

    // WMI query
    var query = new SelectQuery("select * from Win32_process where name = '" + processName + "'");

    using (var searcher = new ManagementObjectSearcher(scope, query))
    {
        foreach (ManagementObject process in searcher.Get()) 
        {
            process.InvokeMethod("Terminate", null);
            process.Dispose();
        }
    }
} 
```

**参考：**
[如何找出使用 .NET 锁定文件的进程？](https://stackoverflow.com/questions/317071/how-do-i-find-out-which-process-is-locking-a-file-using-net)

[删除某人打开文件的目录](https://stackoverflow.com/questions/41841590/delete-a-directory-where-someone-has-opened-a-file)

# c++ - C++ 中易于使用的正则表达式支持？

> ID：1041
> 
> 赞同：29
> 
> 时间：2008-08-04T05:50:00.337
> 
> 标签：c++, regex

我正在为本地 C++ 寻找一个健壮的、易于使用的正则表达式评估器，无论是平台独立的还是特定于 Windows 的。

要求：

*   不能使用 Boost 或 ACE 正则表达式库（很遗憾）
*   不能使用 .NET Regex（或任何托管代码）

主要要求是它应该是独立的和开放的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-19T18:47:47.330

C++11 现在包括对正则表达式的支持。它将独立于平台。你只需要一个最近的编译器。检查以下列表以了解使用哪一个。

[http://wiki.apache.org/stdcxx/C%2B%2B0xCompilerSupport](http://wiki.apache.org/stdcxx/C%2B%2B0xCompilerSupport)

希望能帮助到你

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-08-04T06:23:51.847

尝试[libpcre](http://www.pcre.org/)

如果你被困在 Windows 上，他们有一个应该可以工作的 Windows 端口。我知道[e-texteditor](http://e-texteditor.com)使用它，所以至少这是它有效的证明:-)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-08-04T19:44:24.397

如果您使用 Visual Studio，您可以使用 Visual C++ 2008 Feature Pack Release，它实现了一些 TR1，并包括正则表达式解析。[得到它](http://www.microsoft.com/downloads/details.aspx?FamilyId=D466226B-8DAB-445F-A7B4-448B326C48E7&displaylang=en)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-08-10T13:07:10.103

[Qt](http://qt.nokia.com/)还有一个不错的[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)实现[QRegExp](http://qt-project.org/doc/qt-4.8/qregexp.html)。它也是独立于平台的。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-08-04T06:41:29.547

GNU C 库支持[正则表达式](http://www.gnu.org/software/libtool/manual/libc/Regular-Expressions.html)。它是开放的，并且 RE 代码似乎很容易提取。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-08-11T08:25:13.337

我会支持[PCRE](http://pcre.org)的建议。我在 Windows 的 C++ 项目中使用过它，效果很好。它是免费的，甚至用于构建商业软件。它还实现了某种事实上的标准正则表达式语言，这将受到您的用户的欢迎。PCRE 当然与 Perl 兼容，Python 也使用相同的库。

原生 PCRE 接口有点笨拙且非常 C 风格，因此可能值得围绕它编写一个不错的 C++ 包装器。很可能已经有一个，但我不熟悉。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-08-04T12:23:35.067

GNU C 库正则表达式工具（regcomp()、regexec() 和朋友）已损坏。改用 libetre；函数签名与 glibc 提供的签名匹配。 [http://laurikari.net/tre/](http://laurikari.net/tre/)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-05-08T14:36:25.613

C++11 及更高版本现在包含[标准正则表达式库](http://en.cppreference.com/w/cpp/regex)。
包括`<regex>`标题，并使用。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-08-11T06:13:15.927

为什么不使用 Microsoft ATL 的正则表达式库？肯尼·克尔最近写了一篇关于这方面的[短文。](http://weblogs.asp.net/kennykerr/archive/2008/07/18/visual-c-in-short-regular-expressions.aspx)

> ATL 包括一个轻量级的正则表达式实现。虽然最初是 Visual C++ 的一部分，但它现在包含在 ATL Server 下载中。
> 
> 类`CAtlRegExp`模板实现解析器和匹配引擎。...
> 
> 正则表达式语法定义在`atlrx.h` 头文件的顶部。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-16T20:06:12.477

CodePlex 的免费 ATL 服务器库和工具包括一个正则表达式解析器。请参阅[CodePlex 存档中的 AtlServer](https://archive.codeplex.com/?p=atlserver)

> ATL Server 是一个 C++ 类库，允许开发人员构建服务型 C++ 应用程序和 Web 服务的客户端和服务器部分。它提供了构建大型 Internet 站点所需的许多功能，例如 SOAP 消息传递、缓存设施、线程设施、正则表达式处理、会话状态管理、性能监控、MIME 支持、与 IIS 的集成以及与安全性交互的类和加密基础设施。该库的早期版本是 Visual Studio 2002、Visual Studio 2003 和 Visual Studio 2005 的一部分。该项目从作为 Visual Studio 2005 SP1 的一部分发布的库版本开始。

# sql - 为什么 SQL 全文索引不返回包含 # 的单词的结果？

> ID：1042
> 
> 赞同：26
> 
> 时间：2008-08-04T05:51:56.683
> 
> 标签：sql, sql-server, sql-server-2005, indexing, full-text-search

例如，我的查询使用 SQL Server 2005 如下所示：

```
SELECT * FROM Table WHERE FREETEXT(SearchField, 'c#') 
```

我定义了一个全文索引以使用 SearchField 列，该列在使用时返回结果：

```
SELECT * FROM Table WHERE SearchField LIKE '%c#%' 
```

我相信 # 是一个特殊的字母，那么如何让 FREETEXT 对上述查询正常工作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-04T06:39:40.003

# 字符被索引为标点符号，因此被忽略，所以看起来我们将从单词索引忽略列表中删除字母 C。

在这样做并重建索引后在本地测试它，我得到了结果！

查看在索引列上使用不同的分词器语言，以便不会忽略这些特殊字符。

编辑：我还发现[了这些信息](http://www.simple-talk.com/sql/learn-sql-server/sql-server-full-text-search-language-features/)：

> c# 被索引为 c（如果 c 不在您的干扰词列表中，请稍后查看干扰词列表的更多信息），但 C# 被索引为 C#（在 SQL 2005 和 SQL 2000 中运行在 Win2003 上，无论 C 或 c 是否在您的干扰中词汇表）。存储为 C# 的不仅是 C#，任何大写字母后跟 #。相反，c++（以及任何其他后跟 ++ 的小写字母）被索引为 c（无论 c 是否在您的干扰词列表中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-04T06:10:16.600

引用关于索引服务查询语言的大量重复帮助页面：

> 要在查询中使用特殊处理的字符，例如 &、|、^、#、@、$、(、)，请将您的查询用引号 (“) 括起来。

据我所知，全文搜索`MSSQL`也是由索引服务完成的，所以这可能会有所帮助。

# math - 一点点转向浮点（im）精度，第 1 部分

> ID：1053
> 
> 赞同：23
> 
> 时间：2008-08-04T06:21:38.293
> 
> 标签：math, language-agnostic, floating-point

大多数数学家都同意：

> e ^(πi) + 1 = 0

但是，大多数浮点实现不同意。我们能在多大程度上解决这个争端？

我很想听听不同的语言和实现，以及使结果尽可能接近零的各种方法。要有创意！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-12-26T20:22:01.910

并不是大多数浮点实现不同意，只是它们无法获得获得 100% 答案所需的准确性。正确的答案是他们不能。

PI 是一个无限系列的数字，除了符号表示之外，没有人能够用任何东西来表示，而 e^X 也是如此，因此达到 100% 准确度的唯一方法就是使用符号表示。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-08-04T06:22:18.713

这是我尝试过的实现和语言的简短列表。它按接近于零的程度排序：

*   方案：`(+ 1 (make-polar 1 (atan 0 -1)))`
    *   ⇒ `0.0+1.2246063538223773e-16i`（Chez 方案，麻省理工学院方案）
    *   ⇒ `0.0+1.22460635382238e-16i`（诡计）
    *   ⇒ `0.0+1.22464679914735e-16i`（`numbers`鸡蛋鸡）
    *   ⇒ `0.0+1.2246467991473532e-16i`(MzScheme, SISC, Gauche, Gambit)
    *   ⇒ `0.0+1.2246467991473533e-16i`(单片机)
*   普通 Lisp：`(1+ (exp (complex 0 pi)))`
    *   ⇒ `#C(0.0L0 -5.0165576136843360246L-20)`(CLISP)
    *   ⇒ `#C(0.0d0 1.2246063538223773d-16)`(CMUCL)
    *   ⇒ `#C(0.0d0 1.2246467991473532d-16)`(SBCL)
*   珀尔：`use Math::Complex; Math::Complex->emake(1, pi) + 1`
    *   ⇒`1.22464679914735e-16i`
*   Python：`from cmath import exp, pi; exp(complex(0, pi)) + 1`
    *   ⇒ `1.2246467991473532e-16j`(CPython)
*   红宝石：`require 'complex'; Complex::polar(1, Math::PI) + 1`
    *   ⇒ `Complex(0.0, 1.22464679914735e-16)`(核磁共振)
    *   ⇒ `Complex(0.0, 1.2246467991473532e-16)`(JRuby)
*   回复：`complex(argument = pi) + 1`
    *   ⇒`0+1.224606353822377e-16i`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-08-04T06:29:03.910

有可能解决这个争端吗？

我的第一个想法是寻找一种符号语言，例如[Maple](http://en.wikipedia.org/wiki/Maple_(software))。我不认为这算作浮点数。

事实上，如何在传统的编程语言中表示*i*（或工程师的*j ）？*

也许一个更好的例子是 sin(π) = 0？（或者我又错过了重点？）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-08-25T01:10:29.007

我同意 Ryan 的观点，你需要转移到另一个数字表示系统。该解决方案超出了浮点数学的范围，因为您需要将 pi 表示为无限长的小数，因此任何有限的精度方案都行不通（至少在不使用某种软糖因子来弥补丢失的情况下）精确）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-08-25T13:37:28.430

您的问题对我来说似乎有点奇怪，因为您似乎暗示浮点数学是由该语言实现的。这通常不是真的，因为 FP 数学是使用硬件中的浮点处理器完成的。但是无论是软件还是硬件，浮点数总是不准确的。这就是花车的工作原理。

如果您需要更高的精度，则需要使用不同的数字表示。就像您对不适合 int 或 long 的数字进行整数数学一样。有些语言有内置的库（我知道 java 有 BigInteger 和 BigDecimal），但你必须明确地使用这些库而不是原生类型，并且性能会（有时明显）比使用浮点数更差。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-08-25T13:29:01.803

@瑞恩福克斯

> 事实上，如何在传统的编程语言中表示 i（或工程师的 j）？

原生复杂数据类型远非未知。Fortran 在 60 年代中期就有了它，并且 OP 展示了各种其他语言来支持它们。

复数可以作为库添加到其他语言中（通过运算符重载，它们甚至看起来就像代码中的本机类型）。

但是除非你为这个问题提供一个特例，否则“不同意”只是不精确的机器算术的一种表达，不是吗？这就像在抱怨

```
float r = 2/3;
float s = 3*r;
float t = s - 2; 
```

以 (t != 0) 结尾（至少如果您使用足够愚蠢的编译器）...

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-05-06T03:07:58.910

我和我最好的朋友聊了很久的咖啡聊天，谈论无理数和其他数字之间的差异。好吧，我们俩都同意这个不同的观点：

无理数在某种程度上是关系，作为函数，以什么方式？好吧，想想“如果你想要一个完美的圆，给我一个完美的圆周率”，但圆与其他图形不同（4 边、5、6... 100、200）但是......还有多少边呢你有，更像一个圆圈的样子。如果您到目前为止一直关注我，那么在这里将所有这些想法联系起来就是 pi 公式： [![在此处输入图像描述](../Images/eee0eb80db9b2775ecd61895ee9cb432.png)](https://i.stack.imgur.com/uM2PX.gif)

所以，pi 是一个函数，但它永远不会结束！因为 ∞ 参数，但我喜欢认为您可以拥有 pi 的“实例”，如果您将 ∞ 参数更改为非常大的 Int，您将拥有一个非常大的 pi 实例。

和e一样，给我一个巨大的参数，我给你一个巨大的e。

把所有的想法放在一起：

由于我们有内存限制，语言和库为我们提供了巨大的无理数实例，在这种情况下，pi 和 e，作为最终结果，你将有很长的方法来获得 0，就像@Chris Jester-Young 提供的示例一样

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-08-25T13:48:46.517

> 事实上，如何在传统的编程语言中表示 i（或工程师的 j）？

在没有本机表示的语言中，通常使用 OOP 添加它以创建一个`Complex`表示`i`and的类，并`j`使用运算符重载来正确处理涉及其他`Complex`数字和或该语言本机的其他数字原语的操作。

例如：[Complex.java](http://www.math.ksu.edu/~bennett/jomacg/c.html) , [C++ < complex >](http://msdn.microsoft.com/en-us/library/0352zzhd%28VS.80%29.aspx)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-12-26T21:22:09.527

数值分析告诉我们，你不能依赖大数之间微小差异的精确值。

这不仅会影响这里所讨论的方程，还会给所有事情带来不稳定性，从求解一组近乎奇异的联立方程组，到找到多项式的零点，再到计算 log(~1) 或 exp(~0) (我什至看到了用于评估 log(x+1) 和 (exp(x)-1) 来解决这个问题的特殊函数。

我鼓励你不要考虑将差异归零——你不能——而是以确保最小误差的方式进行相关计算。

对不起，自从我在大学里听到这句话已经 43 年了，即使我能记住参考资料，我相信现在还有更好的东西。我建议***[以此](http://en.wikipedia.org/wiki/Numerical_analysis#The_generation_and_propagation_of_errors)***为起点。

* * *

如果这听起来有点傲慢，我道歉。我的“数值分析 101”是我化学课程的一部分，因为当时没有太多的 CS。我真的不知道数值分析在现代 CS 课程中的位置/重要性。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-11-20T20:37:54.937

这是我们当前浮点计算架构的限制。浮点运算只是数字极点的近似值，例如 e 或 pi（或任何超出您的位允许的精度）。我真的很喜欢这些数字，因为它们无视分类，并且似乎比标准系列的素数具有更大的熵（？）。比率不符合数字表示，有时像这样简单的事情会让人大吃一惊（我喜欢它）。

[幸运的是，通过使用符号概念（类似于Lasse V. Karlsen](https://stackoverflow.com/users/267/lasse-v-karlsen)所描述的那些），整个语言和库都可以专用于精确三角函数。

考虑一种以机器可以理解的形式描述 e 和 pi 等概念的库/语言。机器对什么是完美圆有任何概念吗？可能不是，但我们可以创建一个对象 - 圆，它满足我们赋予它的所有已知特征（恒定半径，半径与圆周的关系为 2*pi*r = C）。像 pi 这样的对象仅由上述比率描述。r & C 可以是数字对象，用你想给它们的任何精度来描述。e 可以定义为“因为 e 是唯一的实数，使得函数 f(x) = ex 在点 x = 0 处的导数（切线的斜率）的值恰好是 1”来自[维基百科](http://en.wikipedia.org/wiki/E_(mathematical_constant))。

有趣的问题。

# language-agnostic - 使用 DirectX 或 OpenGL 显示 100 个浮动立方体

> ID：1064
> 
> 赞同：20
> 
> 时间：2008-08-04T06:51:20.323
> 
> 标签：language-agnostic, opengl, 3d, directx

我想使用`DirectX`or显示 100 个浮动立方体`OpenGL`。

我正在寻找一些示例源代码或该技术的描述。我无法正确显示多个立方体。

我在网上搜索了一系列很好的教程，虽然他们谈论如何做`3D`原语，但我找不到关于如何做大量`3D`原语的信息 - `cubes`、`spheres`、`pyramids`等等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-04T09:12:37.543

你说你很难让一个立方体显示......所以我不确定你是否有一个要显示的。

基本上...将编写多维数据集的代码放在一个函数中，然后调用该函数 100 次。

```
void DrawCube()
{
    //code to draw the cube
}

void DisplayCubes()
{
    for(int i = 0; i < 10; ++i)
    {   
         for(int j = 0; j < 10; ++j)
         {
             glPushMatrix();
             //alter these values depending on the size of your cubes.
             //This call makes sure that your cubes aren't drawn overtop of each other
             glTranslatef(i*5.0, j*5.0, 0);
             DrawCube();
             glPopMatrix();
         }
    }              
} 
```

这是您如何进行此操作的基本大纲。如果您想要更有效的东西，请在了解基本知识后的某个时候查看显示列表:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-08-04T09:04:01.867

只需使用 glTranslatef（或 DirectX 等效项）使用相同的代码绘制立方体，但移动绘制它的相对点。也许有更好的方法可以做到这一点，我对 OpenGL 还很陌生。一定要设置好你的观点，这样你就可以看到它们。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-08-19T11:12:23.777

是的，如果你效率很高，你会把所有东西都扔到同一个顶点缓冲区中，但我认为绘制 100 个立方体不会推动过去 5 年生产的任何 GPU，所以你应该可以按照上面的建议进行操作。

编写一个基本的通过顶点着色器，在像素着色器中随心所欲地着色。要么传入一个世界矩阵并在顶点着色器中进行平移，要么只计算 CPU 端的世界空间顶点位置（如果你的立方体要保持固定，请执行此操作）。

您可以花哨并进行[几何实例化](http://en.wikipedia.org/wiki/Geometry_instancing)等，但首先要掌握基础知识。

# c++ - Win32下的堆损坏；如何定位？

> ID：1069
> 
> 赞同：64
> 
> 时间：2008-08-04T07:30:01.727
> 
> 标签：c++, windows, multithreading, debugging, memory

我正在开发一个破坏堆的**多线程**C++ 应用程序。定位这种损坏的常用工具似乎不适用。源代码的旧版本（18 个月大）表现出与最新版本相同的行为，所以这已经存在很长时间了，只是没有被注意到；不利的一面是，源增量不能用于识别何时引入错误 -存储库中*有很多*代码更改。

崩溃行为的提示是在该系统中生成吞吐量 - 数据的套接字传输，该数据被转换为内部表示。我有一组测试数据会定期导致应用程序异常（各种地方，各种原因 - 包括堆分配失败，因此：堆损坏）。

该行为似乎与 CPU 功率或内存带宽有关；每台机器拥有的越多，就越容易崩溃。禁用超线程内核或双核内核会降低（但不会消除）损坏率。这暗示了一个与时间相关的问题。

现在问题来了：
当它在轻量级调试环境（比如`Visual Studio 98 / AKA MSVC6`）下运行时，堆损坏相当容易重现 - 十到十五分钟后，某些事情会发生可怕的失败和异常，例如`alloc;`在复杂的调试环境下运行时（Rational Purify，`VS2008/MSVC9`甚至微软应用程序验证程序）系统成为内存速度限制并且不会崩溃（内存限制：CPU没有超过`50%`，磁盘灯不亮，程序运行速度尽可能快，消耗`1.3G`2G RAM的盒子） . 因此，**我可以在能够重现问题（但不能识别原因）或能够识别原因或我无法重现的问题之间做出选择。**

我目前对下一步的最佳猜测是：

1.  获得一个疯狂的盒子（替换当前的开发盒：2Gb RAM in an `E6550 Core2 Duo`）；这将使在强大的调试环境下运行时重现导致错误行为的崩溃成为可能；或者
2.  重写操作符`new`，并`delete`在完成后立即使用`VirtualAlloc`并将`VirtualProtect`内存标记为只读。运行`MSVC6`并让操作系统捕获正在写入释放内存的坏人。是的，这是绝望的迹象：到底是谁重写`new`和`delete`？！我想知道这是否会使它像 Purify 等人一样慢。

而且，不：不能选择内置 Purify 仪器。

一位同事刚刚走过，问“堆栈溢出？我们现在堆栈溢出了吗？！？”

现在，问题是：**我如何找到堆损坏器？**

* * *

更新：平衡`new[]`，`delete[]`似乎在解决问题方面取得了长足的进步。现在，该应用程序在崩溃前大约需要两个小时，而不是 15 分钟。还没有。有什么进一步的建议吗？堆损坏仍然存在。

更新：Visual Studio 2008 下的发布版本似乎要好得多；`STL`目前的怀疑取决于`VS98`.

* * *

> 3.  重现问题。`Dr Watson`将产生一个可能有助于进一步分析的转储。

我会记下这一点，但我担心 Watson 博士只会在事后被绊倒，而不是在堆被踩踏时。

> 另一种尝试可能是`WinDebug`用作调试工具，它非常强大，同时也是轻量级的。

现在又开始了：在出现问题之前没有太多帮助。我想在行为中抓住破坏者。

> 也许这些工具至少可以让您将问题缩小到某个组件。

我不抱太大希望，但绝望的时候需要...

> 您确定项目的所有组件都具有正确的运行时库设置（`C/C++ tab`VS 6.0 项目设置中的代码生成类别）吗？

不，我不是，明天我将花几个小时浏览工作区（其中有 58 个项目）并检查它们是否都在编译并与适当的标志链接。

* * *

更新：这需要 30 秒。选择对话框中的所有项目`Settings`，取消选择，直到找到没有正确设置的项目（它们都有正确的设置）。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-08-04T07:51:02.997

我的第一选择是专用的堆工具，例如[pageheap.exe](https://support.microsoft.com/en-us/kb/286470)。

重写 new 和 delete 可能有用，但这并不能捕获低级代码提交的分配。如果这是您想要的，最好`low-level alloc API`使用 Microsoft Detours 绕道。

还有健全性检查，例如：验证您的运行时库是否匹配（发布与调试、多线程与单线程、dll 与静态库），查找错误删除（例如，删除 delete [] 应该在的位置使用），请确保您没有混合和匹配您的分配。

还可以尝试有选择地关闭线程并查看问题何时/是否消失。

在第一个异常发生时，调用堆栈等是什么样的？

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-08-06T12:41:52.737

我在工作中遇到了同样的问题（我们`VC6`有时也使用）。并且没有简单的解决方案。我只有一些提示：

*   尝试在生产机器上使用自动故障转储（请参阅[Process Dumper](http://www.microsoft.com/downloads/details.aspx?FamilyID=e089ca41-6a87-40c8-bf69-28ac08570b7e&displaylang=en)）。我的经验表明，Watson 博士**并不**适合倾倒。
*   从您的代码中删除所有**catch(...) 。**它们经常隐藏严重的内存异常。
*   检查[高级 Windows 调试](https://rads.stackoverflow.com/amzn/click/com/0321374460)- 对于像您这样的问题，有很多很棒的提示。我全心全意地推荐这个。
*   如果您使用`STL`尝试`STLPort`和检查的构建。无效的迭代器是地狱。

祝你好运。像您这样的问题需要我们几个月的时间才能解决。准备好迎接这个...

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-08-22T17:11:22.950

通过编写我们自己的 malloc 和 free 函数，我们已经很幸运了。在生产中，他们只是调用标准的 malloc 和 free，但在调试中，他们可以做任何你想做的事情。我们还有一个简单的基类，它除了重写 new 和 delete 运算符来使用这些函数之外什么都不做，那么您编写的任何类都可以简单地从该类继承。如果您有大量代码，将 malloc 和 free 的调用替换为新的 malloc 和 free 可能是一项艰巨的工作（不要忘记 realloc！），但从长远来看，它非常有帮助。

在 Steve Maguire 的《[Writing Solid Code》](http://www.microsoft.com/mspress/books/1024.aspx)一书中（强烈推荐），有一些你可以在这些例程中执行的调试示例，例如：

*   跟踪分配以发现泄漏
*   分配比需要更多的内存，并在内存的开头和结尾放置标记——在空闲例程期间，您可以确保这些标记仍然存在
*   memset 在分配（查找未初始化内存的使用情况）和空闲（查找已释放内存的使用情况）时使用标记设置内存

另一个好主意是*永远不要*使用`strcpy`,`strcat`或`sprintf`—— 总是使用`strncpy`,`strncat`和`snprintf`。我们也编写了自己的版本，以确保我们不会注销缓冲区的末尾，这些也遇到了很多问题。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-09-16T07:33:25.580

运行原始应用程序，`ADplus -crash -pn appnename.exe` 当内存问题弹出时，您将获得一个不错的大转储。

您可以分析转储以找出损坏的内存位置。如果幸运的话，覆盖内存是一个唯一的字符串，您可以找出它的来源。如果您不走运，则需要深入`win32`研究堆并弄清楚原始内存特征是什么。（堆 -x 可能有帮助）

在您知道出了什么问题后，您可以使用特殊的堆设置来缩小 appverifier 的使用范围。即你可以指定`DLL`你监控什么，或者监控什么分配大小。

希望这将加快监控速度，足以抓住罪魁祸首。

根据我的经验，我从来不需要全堆验证器模式，但我花了很多时间分析故障转储和浏览源代码。

**PS：** 您可以使用[DebugDiag](http://blogs.msdn.com/tess/archive/2008/05/21/debugdiag-1-1-or-windbg-which-one-should-i-use-and-how-do-i-gather-memory-dumps.aspx)来分析转储。它可以指出`DLL`拥有损坏的堆，并为您提供其他有用的详细信息。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-10-12T21:55:18.483

您应该使用运行时和静态分析来解决这个问题。

对于静态分析，请考虑使用 PREfast ( `cl.exe /analyze`) 进行编译。它检测不匹配的`delete`和`delete[]`，缓冲区溢出和许多其他问题。不过，请准备好应对数千字节的 L6 警告，尤其是在您的项目仍未`L4`修复的情况下。

PREfast 可与 Visual Studio Team System 一起使用，并且[显然](http://www.cs.auckland.ac.nz/~pgut001/pubs/sal.html)是 Windows SDK 的一部分。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-02T06:03:55.913

这是在内存不足的情况下吗？如果是这样，可能是 new 返回`NULL`而不是抛出 std::bad_alloc。较旧`VC++`的编译器没有正确实现这一点。有一篇关于[Legacy memory allocation failures](http://msdn.microsoft.com/en-us/magazine/cc164087.aspx) crashing `STL`apps built with的文章`VC6`。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-25T19:55:09.893

内存损坏的明显随机性听起来很像线程同步问题 - 根据机器速度重现错误。如果对象（内存块）在线程之间共享并且同步（临界区、互斥体、信号量、其他）原语不是基于每个类（每个对象、每个类），那么就有可能出现以下情况其中类（内存块）在使用时被删除/释放，或在删除/释放后使用。

作为对此的测试，您可以向每个类和方法添加同步原语。这将使您的代码变慢，因为许多对象将不得不相互等待，但如果这消除了堆损坏，您的堆损坏问题将成为代码优化问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-04T07:48:51.440

您尝试了旧版本，但是您是否有理由不能继续深入了解存储库历史并准确查看引入错误的时间？

否则，我建议添加某种简单的日志记录来帮助追踪问题，尽管我不知道您可能想要记录的具体内容。

如果您可以通过谷歌和您获得的异常文档找出究竟是什么导致了这个问题，也许这将进一步了解在代码中寻找什么。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-04T08:26:55.967

我的第一个动作如下：

1.  在“发布”版本中构建二进制文件，但创建调试信息文件（您将在项目设置中找到这种可能性）。
2.  在要重现问题的机器上使用 Dr Watson 作为默认调试器 (DrWtsn32 -I)。
3.  重现问题。Watson 博士将生成一个可能有助于进一步分析的转储。

另一种尝试可能是使用 WinDebug 作为调试工具，它非常强大，同时也很轻量级。

也许这些工具至少可以让您将问题缩小到某个组件。

您确定项目的所有组件都具有正确的运行时库设置（C/C++ 选项卡，VS 6.0 项目设置中的代码生成类别）吗？

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-22T16:51:06.710

因此，从您拥有的有限信息来看，这可以是一个或多个事物的组合：

*   堆使用不当，即双重释放、释放后读取、释放后写入、使用 alloc 设置 HEAP_NO_SERIALIZE 标志并从同一堆上的多个线程释放
*   内存不足
*   错误代码（即缓冲区溢出、缓冲区下溢等）
*   “时机”问题

如果它只是前两个但不是最后一个，那么您现在应该已经使用 pageheap.exe 捕获了它。

这很可能意味着这是由于代码如何访问共享内存。不幸的是，追踪这一点将是相当痛苦的。对共享内存的非同步访问通常表现为奇怪的“时间”问题。诸如不使用获取/释放语义来同步使用标志对共享内存的访问，不适当地使用锁等。

至少，如前所述，能够以某种方式跟踪分配将有所帮助。至少那时您可以查看在堆损坏之前实际发生的情况并尝试从中进行诊断。

此外，如果您可以轻松地将分配重定向到多个堆，您可能想尝试一下，看看是否可以解决问题或导致更多可重现的错误行为。

当您使用 VS2008 进行测试时，您是否使用 HeapVerifier 并将 Conserve Memory 设置为 Yes？这可能会降低堆分配器的性能影响。（另外，您必须使用它运行 Debug->Start with Application Verifier，但您可能已经知道了。）

您还可以尝试使用 Windbg 和 !heap 命令的各种用途进行调试。

微信

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-02T04:23:34.610

Graeme 对自定义 malloc/free 的建议是个好主意。看看你是否可以描述一些关于腐败的模式来给你一个利用的把柄。

例如，如果它总是在一个相同大小的块中（比如 64 字节），那么将你的 malloc/free 对更改为始终在它们自己的页面中分配 64 字节块。当您释放 64 字节块时，然后在该页面上设置内存保护位以防止读取和写入（使用 VirtualQuery）。然后任何试图访问此内存的人都会产生异常而不是破坏堆。

这确实假设未完成的 64 字节块的数量只是中等，或者您有很多内存要在盒子里烧！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-17T13:40:35.547

如果您选择重写新/删除，我已经这样做了，并且在以下位置提供了简单的源代码：

[http://gandolf.homelinux.org/~smhanov/blog/?id=10](http://gandolf.homelinux.org/~smhanov/blog/?id=10)

这会捕获内存泄漏，并在内存块之前和之后插入保护数据以捕获堆损坏。您可以通过将#include "debug.h" 放在每个 CPP 文件的顶部并定义 DEBUG 和 DEBUG_MEM 来集成它。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-12-19T11:52:50.977

我不得不解决类似问题的时间很少。如果问题仍然存在，我建议您这样做：监控对 new/delete 和 malloc/calloc/realloc/free 的所有调用。我制作单个 DLL 导出函数以注册所有调用。此函数接收用于标识代码源的参数、指向分配区域的指针和将此信息保存在表中的调用类型。所有分配/释放的对都被消除。最后或之后，您需要调用其他函数来为剩余数据创建报告。有了这个，您可以识别错误的调用（新/免费或 malloc/删除）或丢失。如果您的代码中有任何缓冲区被覆盖的情况，则保存的信息可能是错误的，但每个测试都可能检测/发现/包含已识别的故障解决方案。许多运行以帮助识别错误。祝你好运。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-07-30T13:48:40.267

你认为这是一种竞争条件吗？多个线程是否共享一个堆？你能用 HeapCreate 给每个线程一个私有堆，然后他们可以用 HEAP_NO_SERIALIZE 快速运行。否则，如果您使用系统库的多线程版本，堆应该是线程安全的。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-10-03T16:48:57.280

几个建议。你提到了 W4 的大量警告——我建议花时间修复你的代码以在警告级别 4 下干净地编译——这将大大有助于防止微妙的难以发现的错误。

其次 - 对于 /analyze 开关 - 它确实会产生大量警告。要在我自己的项目中使用此开关，我所做的是创建一个新的头文件，该文件使用 #pragma 警告来关闭 /analyze 生成的所有附加警告。然后在文件的更下方，我只打开我关心的那些警告。然后使用 /FI 编译器开关强制将此头文件首先包含在所有编译单元中。这应该允许您在控制输出时使用 /analyze 开关

# unix - UNIX 上的进程大小

> ID：1070
> 
> 赞同：28
> 
> 时间：2008-08-04T07:34:44.137
> 
> 标签：unix, size

获取进程大小的正确方法是`Solaris, HP-UX`什么`AIX`？我们应该使用`top`还是`ps -o vsz`其他？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-08-05T01:07:50.657

`vsize`, `rss`, `rprvt`,和其他看起来晦涩的缩写的确切定义`rshrd`因操作系统而异。`top`和命令的手册页`ps`会有某种描述，但所有这些描述都被大大简化了（或者基于早已灭绝的内核实现）。
在一般情况下，“流程规模”作为一个概念很难确定。特定情况下的答案在很大程度上取决于操作系统中的实际内存管理实现，并且很少像大多数用户（和大多数开发人员）头脑中存在的整洁的“进程大小”概念那样令人满意。

例如，这些数字中的任何一个（也可能是它们的任何组合）都不能用来准确地告诉您在给定的空闲内存量中可以同时运行多少个此类进程。但实际上，你最好的选择是从那一端开始：你为什么要这个号码，你会用它做什么？鉴于这些信息，我认为您会得到更多有用的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-04T08:21:07.570

是的，你锁定在 VSZ 是对的。

`ps u`将为您提供 VSZ 和 RSS，它们是虚拟内存大小和驻留集大小。RSS 是为进程分配了多少物理内存，VSZ 是进程的虚拟内存大小。如果您有多个程序正在运行，那么 VSZ 中的大量内存将在这些进程之间共享。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-20T05:37:54.940

在 Solaris 上，您可以使用该`pmap`命令获取有关进程内存使用情况的详细信息。特别是，`pmap -x <pid>`向您显示一个进程的内存有多少是共享的，以及该进程专门使用了多少。这对于计算进程的“边际”内存使用量很有用——通过这种技术，您可以避免重复计算共享库。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-20T14:59:09.273

我总结了所有这样的进程的驻留集大小（作为根）：

```
ps ax -o rss | awk '{rss += $1;} END { print rss}' 
```

# oop - 面向对象的贝叶斯垃圾邮件过滤？

> ID：1083
> 
> 赞同：29
> 
> 时间：2008-08-04T08:21:42.043
> 
> 标签：oop, artificial-intelligence, naivebayes, email-spam

我想知道是否有针对垃圾邮件和文本分类的贝叶斯过滤的良好且干净的面向对象编程 (OOP) 实现？这仅用于学习目的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-03T19:46:47.923

我绝对推荐[Weka](http://www.cs.waikato.ac.nz/ml/weka/)，它是一个用 Java 编写的*开源数据挖掘软件：*

> Weka 是用于数据挖掘任务的机器学习算法的集合。这些算法既可以直接应用于数据集，也可以从您自己的 Java 代码中调用。Weka 包含用于数据预处理、分类、回归、聚类、关联规则和可视化的工具。它也非常适合开发新的机器学习方案。

如上所述，它附带了许多不同的分类器，例如[SVM](http://en.wikipedia.org/wiki/Support_vector_machine)、[Winnow](http://en.wikipedia.org/wiki/Winnow_%28algorithm%29)、[C4.5](http://en.wikipedia.org/wiki/C4.5_algorithm)、朴素贝叶斯（当然）等等（参见[API 文档](http://weka.sourceforge.net/doc/)）。请注意，众所周知，在垃圾邮件检测或文本分类领域，许多分类器的**性能都比朴素贝叶斯好得多。**

此外，Weka 为您带来了非常[强大的 GUI](http://www.cs.waikato.ac.nz/~ml/weka/gui_explorer.html) ……</p>

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-04T08:54:16.393

也许[https://ci-bayes.dev.java.net/](https://ci-bayes.dev.java.net/)或[http://www.cs.cmu.edu/~javabayes/Home/node2.html](http://www.cs.cmu.edu/~javabayes/Home/node2.html)？

我也从来没有玩过它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-01T06:19:15.760

查看[编程集体智能的第 6 章](https://rads.stackoverflow.com/amzn/click/com/0596529325)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-04T09:08:32.217

这是 C# 中贝叶斯过滤的实现：[A Naive Bayesian Spam Filter for C#](http://www.codeproject.com/KB/recipes/BayesianCS.aspx)（托管在 CodeProject 上）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-08T14:59:46.683

[nBayes](http://codecube.net/2009/05/bayesian-filtering-with-c/) - CodePlex 上托管的另一个 C# 实现

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-04T11:03:51.437

用法语，但你应该可以找到下载链接 :) [PHP Naive Bayesian Filter](http://xhtml.net/scripts/PHPNaiveBayesianFilter)

# c++ - 确保始终捕获异常

> ID：1104
> 
> 赞同：32
> 
> 时间：2008-08-04T10:01:37.927
> 
> 标签：c++, exception, try-catch

C++ 中的异常不需要被调用函数捕获（没有编译时错误）。因此，是否使用 try/catch 捕获它们取决于开发人员的判断（与 Java 不同）。

有没有一种方法可以确保调用函数始终使用 try/catch 捕获抛出的异常？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-08-04T10:10:15.727

不。

请参阅[A Pragmatic Look at Exception Specifications](http://www.gotw.ca/publications/mill22.htm)了解为什么不这样做。

你可以“帮助”的唯一方法是记录你的函数可以抛出的异常，比如在头文件中声明它的注释。这不是由编译器或任何东西强制执行的。为此目的使用代码审查。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-24T09:24:01.213

你不应该在这里使用异常。如果您需要在使用此功能的任何地方都期待它，这显然不是一个例外情况！

更好的解决方案是让函数返回这样的实例。在调试版本中（假设开发人员使用他们刚刚编写的代码路径），如果他们忘记检查操作是否成功，他们会得到一个断言。

```
class SearchResult
{
  private:
    ResultType result_;
    bool succeeded_;
    bool succeessChecked_;

  public:
    SearchResult(Result& result, bool succeeded)
      : result_(result)
      , succeeded_(succeeded)
      , successChecked_(false)
    {
    }

    ~SearchResult()
    {
      ASSERT(successChecked_);
    }

    ResultType& Result() { return result_; }
    bool Succeeded() { successChecked_ = true; return succeeded_; }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-04T17:51:33.627

在您的问题范围之外，所以我讨论过不发布此内容，但在 Java 中实际上有两种类型的异常，已检查和未检查。基本区别在于，就像在 中一样`c[++]`，您不必捕获未经检查的异常。

一个很好的参考[试试这个](http://java.sun.com/docs/books/tutorial/essential/exceptions/runtime.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-05T04:56:30.210

[Chris](https://stackoverflow.com/questions/1104/#1109) ' 可能对这个问题有最好的纯答案：

但是，我很好奇问题的根源。如果用户应该*始终*将调用包装在 try/catch 块中，那么用户调用的函数真的应该首先抛出异常吗？

如果没有关于所讨论代码库的更多上下文，这是一个很难回答的问题。从臀部射击，我认为这里最好的答案是将函数包装起来，以便推荐的（如果不仅是，取决于代码的整体异常样式）公共接口*为*用户执行 try/catch。如果您只是想确保代码中没有未处理的异常，那么单元测试和代码审查可能是最好的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-08T15:07:06.227

曾经有人尝试将[动态异常规范](http://en.cppreference.com/w/cpp/language/except_spec)添加到函数的签名中，但由于该语言无法强制它们的准确性，它们后来被贬值了。

在 C++11 及更高版本中，我们现在有了[noexcept 说明符](http://en.cppreference.com/w/cpp/language/noexcept_spec)。
同样，如果签名被标记为抛出，则仍然不需要调用者处理它。

* * *

根据上下文，您可以通过将异常行为编码到类型系统中来确保对其进行处理。

**请参阅：** [std::optional](http://en.cppreference.com/w/cpp/utility/optional)作为库基础的一部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-04T18:14:20.493

> 有没有一种方法可以确保调用函数始终使用 try/catch 捕获抛出的异常？

我觉得这很有趣，Java 人群——[包括我自己](http://dlinsin.blogspot.com/2008/01/wonderful-checked-exceptions.html)——试图避免检查异常。[他们正试图通过使用RuntimeExceptions](http://java.sun.com/javase/6/docs/api/java/lang/RuntimeException.html)来解决被迫捕获异常的问题。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-08-04T17:33:57.890

或者你可以开始抛出严重异常。当然，访问冲突异常会*引起*用户的注意。

# sql - 数据库索引如何工作？

> ID：1108
> 
> 赞同：2687
> 
> 时间：2008-08-04T10:07:12.673
> 
> 标签：sql, database, performance, indexing, database-indexes

鉴于索引随着数据集大小的增加而变得如此重要，有人可以解释索引如何在与数据库无关的级别上工作吗？

有关对字段进行索引的查询的信息，请查看[如何索引数据库列](https://stackoverflow.com/questions/1156/)。

* * *

## 回答 #1

> 赞同：3896
> 
> 时间：2008-08-04T10:41:04.620

**为什么需要它？**

当数据存储在基于磁盘的存储设备上时，它被存储为数据块。这些块被完整地访问，使它们成为原子磁盘访问操作。磁盘块的结构与链表非常相似；两者都包含一个数据部分，一个指向下一个节点（或块）位置的指针，并且两者都不需要连续存储。

由于许多记录只能在一个字段上排序，我们可以说在未排序的字段上搜索需要线性搜索，这需要`(N+1)/2`块访问（平均），其中`N`是块的数量表跨度。如果该字段是非键字段（即不包含唯一条目），则必须在`N`块访问时搜索整个表空间。

而对于排序字段，可以使用具有`log2 N`块访问的二进制搜索。此外，由于数据是在给定非关键字段的情况下排序的，因此一旦找到更高的值，就不需要在表的其余部分搜索重复值。因此，性能提升是可观的。

**什么是索引？**

索引是一种对多个字段上的许多记录进行排序的方法。在表中的字段上创建索引会创建另一个数据结构，该结构包含字段值和指向与其相关的记录的指针。然后对该索引结构进行排序，允许对其执行二进制搜索。

索引的缺点是这些索引需要额外的磁盘空间，因为索引使用 MyISAM 引擎一起存储在一个表中，如果同一个表中的许多字段都被索引，这个文件可以很快达到底层文件系统的大小限制.

**它是如何工作的？**

首先，让我们概述一个示例数据库表模式；

```
字段名称 数据类型 磁盘大小
id (主键) 无符号 INT 4 字节
名字 Char(50) 50 字节
姓氏 Char(50) 50 字节
电子邮件地址 Char(100) 100 字节

```

**注意**：使用 char 代替 varchar 以允许磁盘值的准确大小。此示例数据库包含 500 万行并且未编制索引。现在将分析几个查询的性能。这些是使用*id*（排序的键字段）的查询和使用*firstName*（非键未排序的字段）的查询。

***示例 1*** -*已排序字段与未排序字段*

给定我们的固定大小记录的示例数据库，`r = 5,000,000`给出了字节的记录长度，`R = 204`并且它们使用 MyISAM 引擎存储在一个表中，该引擎使用默认的块大小`B = 1,024`字节。表的阻塞因子是`bfr = (B/R) = 1024/204 = 5`每个磁盘块的记录。保存表所需的块总数是`N = (r/bfr) = 5000000/5 = 1,000,000`块。

`N/2 = 500,000`鉴于 id 字段是关键字段，对 id 字段进行线性搜索需要平均块访问才能找到值。但由于 id 字段也已排序，因此可以进行二进制搜索，需要平均`log2 1000000 = 19.93 = 20`块访问。立即我们可以看到这是一个巨大的改进。

现在*firstName*字段既不是排序字段也不是关键字段，因此不可能进行二进制搜索，值也不是唯一的，因此该表将需要搜索到最后以获取确切的`N = 1,000,000`块访问。索引旨在纠正这种情况。

鉴于索引记录仅包含索引字段和指向原始记录的指针，因此按道理它会小于它所指向的多字段记录。所以索引本身比原始表需要更少的磁盘块，因此需要更少的块访问来迭代。*firstName*字段的索引架构概述如下；

```
字段名称 数据类型 磁盘大小
名字 Char(50) 50 字节
（记录指针）特殊 4 字节

```

**注意**：MySQL 中的指针长度为 2、3、4 或 5 个字节，具体取决于表的大小。

***示例 2*** -*索引*

给定我们的示例`r = 5,000,000`记录数据库，其索引记录长度为`R = 54`字节并使用默认块大小`B = 1,024`字节。索引的阻塞因子将是`bfr = (B/R) = 1024/54 = 18`每个磁盘块的记录。保存索引所需的总块数是`N = (r/bfr) = 5000000/18 = 277,778`块。

现在使用*firstName*字段的搜索可以利用索引来提高性能。这允许使用平均`log2 277778 = 18.08 = 19`块访问对索引进行二进制搜索。要找到实际记录的地址，这需要进一步的块访问才能读取，从而带来块访问的总数，这与在非索引表中查找*firstName*`19 + 1 = 20`匹配所需的 1,000,000 次块访问相去甚远。

 ***什么时候应该使用它？**

鉴于创建索引需要额外的磁盘空间（从上面的示例中额外增加了 277,778 个块，增加了约 28%），并且索引过多会导致文件系统大小限制引起的问题，因此必须仔细考虑选择正确的要索引的字段。

由于索引仅用于加快在记录中搜索匹配字段的速度，因此按理说，仅用于输出的索引字段在执行插入或删除操作时只会浪费磁盘空间和处理时间，因此应该避免。同样考虑到二分搜索的性质，数据的基数或唯一性也很重要。对基数为 2 的字段进行索引会将数据分成两半，而基数为 1,000 的字段将返回大约 1,000 条记录。在如此低的基数下，效率降低为线性排序，如果基数小于记录数的 30%，查询优化器将避免使用索引，从而有效地使索引浪费空间。

* * *

## 回答 #2

> 赞同：516
> 
> 时间：2017-04-23T14:43:46.063

经典示例**“书籍索引”**

考虑一本 1000 页的“书”，除以 10 个章节，每个章节有 100 页。

很简单吧？

现在，假设您要查找包含单词“ **Alchemist** ”的特定章节。如果没有索引页，除了浏览整本书/章节之外，您别无选择。即：1000 页。

这个类比在数据库世界中被称为**“全表扫描” 。**

[![在此处输入图像描述](../Images/6e6cb30ba0675b75b1a170dc9a02f93c.png)](https://i.stack.imgur.com/Mnuvr.jpg)

但是有了索引页面，您就知道该去哪里了！而且，要查找任何重要的特定章节，您只需要一次又一次地查看索引页面。找到匹配索引后，您可以通过跳过其余部分有效地跳到该章节。

但是，除了实际的 1000 页之外，您还需要大约 10 页来显示索引，因此总共需要 1010 页。

> 因此，索引是一个单独的部分，它按排序顺序存储索引列的值 + 指向索引行的指针，以实现高效查找。

学校里的事情很简单，不是吗？:P

* * *

## 回答 #3

> 赞同：303
> 
> 时间：2014-02-20T14:40:46.957

索引只是一种数据结构，它使搜索数据库中特定列的速度更快。这种结构通常是 b 树或哈希表，但也可以是任何其他逻辑结构。

* * *

## 回答 #4

> 赞同：259
> 
> 时间：2013-04-30T14:31:40.497

第一次读到这篇文章对我很有帮助。谢谢你。

从那时起，我对创建索引的缺点有了一些了解：如果你用一个索引写入一个表（`UPDATE`或`INSERT`），你实际上在文件系统中有两个写操作。一个用于表数据，另一个用于索引数据（以及对它的重新排序（以及 - 如果聚集 - 对表数据进行重新排序））。如果表和索引位于同一个硬盘上，这将花费更多时间。因此，没有索引（堆）的表将允许更快的写入操作。（如果你有两个索引，你最终会得到三个写操作，依此类推）

然而，在两个不同的硬盘上为索引数据和表数据定义两个不同的位置可以减少/消除时间成本增加的问题。这需要在所需硬盘上定义具有相应文件的附加文件组，并根据需要定义表/索引位置。

索引的另一个问题是随着数据的插入，它们会随着时间的推移而产生碎片。`REORGANIZE`有帮助，您必须编写例程才能完成。

在某些情况下，堆比带有索引的表更有帮助，

例如：- 如果您有很多相互竞争的写入，但在工作时间之外只有一个夜间阅读用于报告。

此外，聚集索引和非聚集索引之间的区别非常重要。

帮助我：-[聚集索引和非聚集索引实际上是什么意思？](https://stackoverflow.com/questions/1251636/what-do-clustered-and-non-clustered-index-actually-mean)

* * *

## 回答 #5

> 赞同：190
> 
> 时间：2016-08-13T18:36:32.480

现在，假设我们要运行一个查询来查找任何名为“Abc”的员工的所有详细信息？

```
SELECT * FROM Employee 
WHERE Employee_Name = 'Abc' 
```

**没有索引会怎样？**

数据库软件实际上必须查看 Employee 表中的每一行，以查看该行的 Employee_Name 是否为“Abc”。而且，因为我们希望其中的每一行都带有名称“Abc”，所以一旦我们找到一个名称为“Abc”的行，我们就不能停止查找，因为可能还有其他行名称为**Abc**。因此，必须搜索直到最后一行的每一行——这意味着在这种情况下，数据库必须检查数千行才能找到名称为“Abc”的行。这就是所谓的**全表扫描**

**数据库索引如何帮助提高性能**

拥有索引的全部意义在于通过减少表中需要检查的记录/行数来加速搜索查询。索引是一种数据结构（最常见的是 B 树），用于存储表中特定列的值。

**B树索引如何工作？**

B-树是最流行的索引数据结构的原因是因为它们具有时间效率——因为查找、删除和插入都可以在对数时间内完成。而且，B-tree 更常用的另一个主要原因是因为存储在 B-tree 中的数据可以排序。RDBMS 通常确定索引实际使用的数据结构。但是，在某些使用某些 RDBMS 的场景中，您实际上可以在创建索引本身时指定您希望数据库使用的数据结构。

**哈希表索引如何工作？**

使用哈希索引的原因是哈希表在查找值时非常有效。因此，与字符串比较相等性的查询如果使用哈希索引，则可以非常快速地检索值。

例如，我们之前讨论的查询可以受益于在 Employee_Name 列上创建的哈希索引。哈希索引的工作方式是列值将成为哈希表的键，映射到该键的实际值将只是指向表中行数据的指针。由于哈希表基本上是一个关联数组，典型的条目看起来像“Abc => 0x28939”，其中 0x28939 是对 Abc 存储在内存中的表行的引用。在哈希表索引中查找“Abc”之类的值并返回对内存中行的引用显然比扫描表以查找 Employee_Name 列中具有“Abc”值的所有行要快得多。

**哈希索引的缺点**

哈希表不是排序的数据结构，有很多类型的查询是哈希索引无法解决的。例如，假设您想找出所有 40 岁以下的员工。你怎么能用哈希表索引来做到这一点？好吧，这是不可能的，因为哈希表只适用于查找键值对——这意味着查询是否相等

**数据库索引中到底是什么？** 所以，现在您知道数据库索引是在表中的列上创建的，并且索引将值存储在该特定列中。但是，重要的是要了解数据库索引不会将值存储在同一个表的其他列中。例如，如果我们在 Employee_Name 列上创建索引，这意味着 Employee_Age 和 Employee_Address 列的值不会也存储在索引中。如果我们只是将所有其他列存储在索引中，那么就像创建整个表的另一个副本一样 - 这会占用太多空间并且效率非常低。

**数据库如何知道何时使用索引？** 当运行像“SELECT * FROM Employee WHERE Employee_Name = 'Abc'”这样的查询时，数据库将检查被查询的列上是否有索引。假设 Employee_Name 列上确实创建了索引，数据库将不得不决定使用索引来查找正在搜索的值是否真的有意义——因为在某些情况下使用数据库索引实际上效率较低，并且更高效地只扫描整个表。

**拥有数据库索引的成本是多少？**

它占用空间——而且你的表越大，你的索引就越大。索引的另一个性能问题是，无论何时添加、删除或更新相应表中的行，都必须对索引执行相同的操作。请记住，索引需要包含与索引所涵盖的表列中的任何内容相同的最新数据。

作为一般规则，只有当索引列中的数据将被频繁查询时，才应在表上创建索引。

也可以看看

1.  [哪些列通常可以制作好的索引？](https://stackoverflow.com/questions/107132/what-columns-generally-make-good-indexes/8937872#8937872)
2.  [数据库索引如何工作](http://www.programmerinterview.com/index.php/database-sql/what-is-an-index/)

* * *

## 回答 #6

> 赞同：130
> 
> 时间：2016-08-02T01:30:10.813

## **简单说明！**

索引只不过是一种数据结构，用于**存储表中特定列的值**。索引是在表的列上创建的。

示例：我们有一个名为的数据库表，其中`User`包含三列 –`Name`和。假设该表有数千行。`Age``Address``User`

现在，假设我们要运行一个查询来查找名为“John”的任何用户的所有详细信息。如果我们运行以下查询：

```
SELECT * FROM User 
WHERE Name = 'John' 
```

数据库软件实际上必须查看表中的每一行，`User`以查看`Name`该行是否为“John”。这将需要很长时间。

这`index`对我们有帮助：*索引用于通过减少表中需要检查的记录/行数来加速搜索查询*。

如何创建索引：

```
CREATE INDEX name_index
ON User (Name) 
```

An`index`由**一个表中的列值（例如：John）组成**，这些值存储在**数据结构**中。

> 因此，现在数据库将使用索引来查找名为 John 的员工，因为该索引可能会按用户名称的字母顺序排序。而且，因为它是排序的，这意味着搜索名称要快得多，因为所有以“J”开头的名称将在索引中彼此相邻！

* * *

## 回答 #7

> 赞同：43
> 
> 时间：2015-01-14T06:44:51.540

只是一个快速的建议.. 由于索引会花费您额外的写入和存储空间，因此如果您的应用程序需要更多的插入/更新操作，您可能希望使用没有索引的表，但如果它需要更多的数据检索操作，您应该使用索引桌子。

* * *

## 回答 #8

> 赞同：39
> 
> 时间：2016-12-21T17:16:02.777

只需将数据库索引视为一本书的索引。

如果您有一本关于狗的书，并且想查找有关德国牧羊犬的信息，您当然可以翻阅这本书的所有页面并找到您要查找的内容-但这当然很耗时，而且不会非常快。

另一种选择是，您可以转到本书的索引部分，然后使用您正在查找的实体的名称（在本例中为德国牧羊犬）并查看页码来查找您要查找的内容快速找到您要查找的内容。

在数据库中，页码被称为一个指针，它将数据库指向实体所在的磁盘上的地址。使用相同的德国牧羊犬类比，我们可以有这样的东西（“德国牧羊犬”，0x77129），其中`0x77129`是存储德国牧羊犬行数据的磁盘上的地址。

简而言之，索引是一种数据结构，用于存储表中特定列的值，以加快查询搜索速度。*

# windows - Windows 帮助文件 - 有哪些选项？

> ID：1131
> 
> 赞同：39
> 
> 时间：2008-08-04T10:43:05.707
> 
> 标签：windows, language-agnostic, chm, winhelp

回到过去，Help 不是微不足道的，而是可能的：生成一些带有特殊标签的时髦 .rtf 文件，通过编译器运行它，你会得到一个实际上运行良好的 WinHelp 文件 (.hlp)。

然后，微软认为 WinHelp 不再时髦和酷，并转而使用 CHM，直到他们实际上从 Vista 中删除了 WinHelp。

现在，CHM 可能不错，但每个尝试在网络上打开 .chm 文件的人都会知道由安全限制引起的漂亮的“网页导航已取消”屏幕。

虽然有一些方法可以使 CHM 脱离网络工作，但这并不是一个好的选择，因为当用户按下帮助按钮时，他需要帮助，而不必进行一些时髦的设置。

底线：我发现 CHM 绝对无法使用。但是随着 WinHelp 不再是一个选项，我想知道有什么替代方案，尤其是在与我的应用程序集成时（即对于 WinHelp 和 CHM，有一些功能可以让您直接跳转到某个主题）？

PDF 的缺点是需要 Adob​​e Reader（或不是很多人使用的更轻量级的之一）。我可以忍受这种看法，因为这是当今的一种标准，但你能告诉它可靠地跳转到给定的页面/锚点吗？

HTML 文件似乎是最好的选择，然后你只需要处理不同的浏览器（CSS 和其他东西）。

*编辑：*我正在寻找创建自己的帮助文件。由于我是“无需设置，只需提取并运行”理念的粉丝，我过去曾多次遇到过这个问题，因为我的许多用户会从网络上运行它，这正是导致这个问题的原因。

因此，我正在寻找一种更强大且面向未来的方式来为我的用户提供帮助，而无需为我制作的每个应用程序编写不同的帮助系统。

CHM 是一种非常好的格式，但是 Security Stuff 使它无法使用，因为帮助系统应该为用户提供帮助，而不是产生更多问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-04T10:51:39.560

HTML 将是下一个最佳选择，只有当您从公共网络服务器提供它们时。如果您尝试将它与您的应用程序捆绑在一起，那么所有文件（和图像（和样式表（和...）））都会使 CHM 看起来像是上帝的礼物。

也就是说，当实际捆绑在安装包中时（而不是通过网络提供服务），我发现 CHM 文件运行良好。

OTOH，关于 CHM 文件的另一个陷阱：即使您尝试在**本地**磁盘上打开 CHM 文件，如果您最初从某个地方下载它，您也可能会遇到安全块，因为该文件可能被标记为“来自外部源”获得时。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-09-06T00:03:19.187

我不喜欢 html 选项，实际上是通过压缩和索引它们从纯 HTML 移动到 CHM。甚至在少数非 Windows 客户上使用它们。它简单地解决了人们将它放在网络上的持续小故障（嵌套深度有限，奇怪的锁定效果），杀毒软件在包含 30000 个 html 文件的目录中死去，以及在旧系统上安装时需要 20 分钟的解压时间，浏览器安全区和功能，安装程序中所需空间的错误计算等。

然后我什至不包括开始“纠正”它们的人，具有错误“集成”尝试的第 3 方产品等，关于速度缓慢的投诉（浏览器启动）

随着操作系统和硬件的改进，我们都等了好几年，直到问题消失，但问题不断出现，种类繁多，足够了。我们找到了 chmlib，并决定如果操作系统提供的那些停止工作并切换，我们可以永远使用基于此的东西作为简单的外部阅读器的转义。

同时我们也有自己的编译器，所以我们是免费的，面向未来。这并不意味着我们永远不会改变（使用本地网络服务器的解决方案现在似乎最受欢迎），但至少我们有一个选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-04T10:52:26.173

问题是如何生成自己的帮助文件，或者最好的帮助文件格式是什么？

就个人而言，我发现 CHM 非常出色。设置机器时，我做的第一件事就是下载 CHM 格式的 PHP 手册 ( [http://www.php.net/download-docs.php](http://www.php.net/download-docs.php) ) 并在[Crimson Editor](http://crimsoneditor.com/)中为其添加热键。因此，当我按下 F1 时，它会加载 CHM 并搜索我的光标所在的单词（非常适合快速功能参考）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-04T11:02:12.097

我们的软件既在本地分发给客户端，又通过网络共享提供服务。我们选择生成一个 CHM 文件和一组 HTML 文件，以便从网络上提供服务。在本地启动程序的用户使用 CHM 文件，从网络共享获取程序的用户必须使用 HTML 文件。

我们使用[帮助和手册](http://www.helpandmanual.com/)，因此可以轻松地从同一源项目生成两种类型的输出。HTML 文件还包含搜索功能，并且不需要 Web 服务器，因此虽然它不是最佳解决方案，但可以正常工作。

到目前为止，Windows 的所有单文件类型似乎都以一种或另一种方式被破坏：

*   WinHelp - 已过时
*   HtmlHelp (CHM) - 在 Vista 上已过时，不能通过网络共享工作，除此之外真的很好用
*   Microsoft Help 2 (HXS) - 这似乎一直有效，直到它没有，损坏的索引或类似的，这被 Visual Studio 2005 及更高版本使用，作为一个例子

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-04T13:48:02.993

如果您不想使用安装程序并且您不希望用户执行任何额外的步骤来允许 CHM 文件通过网络，为什么不回退到 WinHelp？Vista 不包括开箱即用的 WinHlp32.exe，但可以[免费下载](http://support.microsoft.com/kb/917607)Vista 和 Server 2008。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-21T00:11:04.110

这取决于如何将在线文档导入到您的产品中，一个好的文档基础架构可能很难建立，但一旦完成，它就会得到回报。这是我们的做法 -

*   帮助源[DITA](http://en.wikipedia.org/wiki/Darwin_Information_Typing_Architecture)兼容 XML，存储在 SCC (ClearCase) 中。
*   帮助编辑[XMetal](http://na.justsystems.com/content.php?page=xmetal)
*   帮助编译，自定义[Open DITA Toolkit](http://dita-ot.sourceforge.net/)，带有自定义 Perl/Java 预处理
*   帮助在编译时交叉引用应用程序资源、.RC 文件等
*   来自单一来源、PDF、CHM、[Eclipse 帮助](http://help.eclipse.org/ganymede/index.jsp)、HTML 的帮助可交付成果。
*   单源存储库为 10 多个具有数千个共享主题的多个产品提供帮助。

根据您的描述，我将查看 Eclipse 帮助，集成到 .NET 或 MFC 应用程序中并不简单，您基本上必须进行帮助映射以将请求解析为 URL，然后将 URL 触发到 Eclipse 帮助包装器或浏览器。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-04T12:11:47.900

如果您正在执行“只需提取并运行”，那么您将遇到安全问题。如果您是运行 Vista（或更高版本）的用户，则尤其如此。您是否有理由避免将应用程序打包在安装程序中？使用安装程序将缓解“外部源”问题。您可以毫无问题地使用 .chm 文件。

我们使用[InstallAware](http://www.installaware.com)来创建我们的安装包。它并不便宜，但非常好。如果您关心成本，[WIX](http://wix.sourceforge.net/)是开源的并且非常强大。WIX 确实有一个学习曲线，但它很容易使用。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-08-05T18:55:00.440

> PDF 的缺点是需要 Adob​​e Reader

我在家里和工作中使用 Windows 上的[Foxit Reader 。](http://www.foxitsoftware.com/pdf/rd_intro.php)小很多，打开速度也很快。当您想知道 a80000326.pdf 到底是什么以及为什么它会堵塞您的文档文件夹时，它非常方便。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-11-27T20:39:16.930

我认为我们最终要为我们的应用程序使用的解决方案是自己托管帮助文件。这使我们能够立即访问文件并使其保持最新状态。

我的计划是将内容加载到大量 XML 文件中，每个文件都包含特定项目的帮助。此 XML 将包含指向其他 XML 文件的链接。我们将根据需要使用 XSLT 来显示内容。

根据许可，我们可能会构建一个特定于客户端的 XSLT 文件，以便根据他们的需要定制外观。我们可能还需要能够仅显示针对我们产品的特定版本的帮助，这可以通过过滤掉 XSLT 中的内容来完成。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-18T14:47:16.580

我使用了一个名为 AuthorIT 的商业软件包，它可以生成多种不同的格式，例如 chm、html、pdf、word、windows help、xml、xhtml 以及一些我从未听说过的其他格式（dita 会响铃吗？）。它是一个面向技术文档编写者需求的内容管理系统。优点是您可以使用和重复使用相同的内容来构建一组指南，然后以不同的格式生成它们。

因此，与选择 chm 或 html 或其他任何问题有关的底线是，如果您使用它，您不会被锁定在给定的格式中，但您可以提供几种用户可以选择的格式，您甚至可以添加更多格式一路走来，无需额外费用。

如果您只有一个创建指南，那将不值得您花时间，但是如果您有要管理的文档集，那么据我所知，这是最好的。他们的支持也很有帮助。

# c - 为什么使用 realloc() 时会出现双重释放或损坏错误？

> ID：1145
> 
> 赞同：18
> 
> 时间：2008-08-04T11:06:00.560
> 
> 标签：c, malloc

我尝试在 C 中编写一个字符串替换函数，该函数适用于`char *`已使用`malloc()`. 它有点不同，它会查找和替换字符串，而不是起始字符串中的字符。

如果搜索和替换字符串的长度相同（或者替换字符串比搜索字符串短），这很简单，因为我分配了足够的空间。如果我尝试`realloc()`使用`realloc()`.

也许一些代码会有所帮助：

```
void strrep(char *input, char *search, char *replace) {
    int searchLen = strlen(search);
    int replaceLen = strlen(replace);
    int delta = replaceLen - searchLen;
    char *find = input;

    while (find = strstr(find, search)) {

        if (delta > 0) {
            realloc(input, strlen(input) + delta);
            find = strstr(input, search);            
        }

        memmove(find + replaceLen, find + searchLen, strlen(input) - (find - input));
        memmove(find, replace, replaceLen);
    }
} 
```

该程序有效，直到我尝试`realloc()`在替换字符串比初始字符串长的情况下。（它仍然有效，它只是吐出错误以及结果）。

如果有帮助，调用代码如下所示：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

void strrep(char *input, char *search, char *replace);

int main(void) {
    char *input = malloc(81);

    while ((fgets(input, 81, stdin)) != NULL) {
        strrep(input, "Noel", "Christmas");
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-04T11:19:54.447

作为一般规则，您**永远**不应该在用户提供的缓冲区上执行 free 或 realloc。您不知道用户在哪里分配空间（在您的模块中，在另一个 DLL 中），因此您不能在用户缓冲区上使用任何分配函数。

如果你现在不能在你的函数中进行任何重新分配，你应该稍微改变它的行为，比如只做一个替换，这样用户就可以计算得到的字符串最大长度，并为你提供一个足够长的缓冲区。发生更换。

然后您可以创建另一个函数来进行多次替换，但您必须为结果字符串分配整个空间并复制用户输入字符串。然后您必须提供一种方法来删除您分配的字符串。

导致：

```
void  strrep(char *input, char *search, char *replace);
char* strrepm(char *input, char *search, char *replace);
void  strrepmfree(char *input); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-08-08T21:37:38.887

首先，对不起，我迟到了。这是我的第一个 stackoverflow 答案。:)

正如已经指出的那样，当调用 realloc() 时，您可能会更改指向正在重新分配的内存的指针。发生这种情况时，参数“string”变得无效。即使您重新分配它，一旦函数结束，更改也会超出范围。

为了回答 OP，realloc() 返回一个指向新分配的内存的指针。返回值需要存储在某个地方。通常，您会这样做：

```
data *foo = malloc(SIZE * sizeof(data));
data *bar = realloc(foo, NEWSIZE * sizeof(data));

/* Test bar for safety before blowing away foo */
if (bar != NULL)
{
   foo = bar;
   bar = NULL;
}
else
{
   fprintf(stderr, "Crap. Memory error.\n");
   free(foo);
   exit(-1);
} 
```

正如 TyBoer 指出的那样，你们不能更改作为该函数输入的指针的值。您可以分配您想要的任何内容，但更改将在函数结束时超出范围。在以下块中，一旦函数完成，“输入”可能是也可能不是无效指针：

```
void foobar(char *input, int newlength)
{
   /* Here, I ignore my own advice to save space. Check your return values! */
   input = realloc(input, newlength * sizeof(char));
} 
```

Mark 试图通过返回新指针作为函数的输出来解决这个问题。如果你这样做，调用者有责任不再使用他用于输入的指针。如果它与返回值匹配，那么您有两个指向同一位置的指针，只需要在其中一个上调用 free()。如果它们不匹配，则输入指针现在指向进程可能拥有或不拥有的内存。取消引用它可能会导致分段错误。

您可以使用双指针作为输入，如下所示：

```
void foobar(char **input, int newlength)
{
   *input = realloc(*input, newlength * sizeof(char));
} 
```

如果调用者在某处有输入指针的副本，那么该副本现在可能仍然无效。

我认为这里最干净的解决方案是在尝试修改函数调用者的输入时避免使用 realloc() 。只需 malloc() 一个新缓冲区，返回它，然后让调用者决定是否释放旧文本。这具有让调用者保留原始字符串的额外好处！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-08-04T11:14:48.827

只是在黑暗中拍摄，因为我还没有尝试过，但是当你重新分配它时，它会像 malloc 一样返回指针。因为 realloc 可以在需要时移动指针，所以如果您不执行以下操作，您很可能对无效指针进行操作：

```
input = realloc(input, strlen(input) + delta); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-10-21T02:41:12.413

另一个人为迟到而道歉——两个半月前。哦，好吧，我花了很多时间做软件考古。

我很感兴趣，没有人明确评论原始设计中的内存泄漏，或者一个错误。它正在观察内存泄漏，它准确地告诉我为什么你会得到双重释放错误（因为，准确地说，你正在多次释放相同的内存 - 而你是在践踏已经释放的内存之后这样做的）。

在进行分析之前，我同意那些说你的界面不那么出色的人。但是，如果您处理了内存泄漏/践踏问题并记录了“必须分配内存”的要求，那么它可能是“好的”。

有什么问题？好吧，您将缓冲区传递给 realloc()，然后 realloc() 返回一个指向您应该使用的区域的新指针 - 您忽略该返回值。因此， realloc() 可能已经释放了原始内存，然后您再次将相同的指针传递给它，它抱怨您释放了两次相同的内存，因为您再次将原始值传递给它。这不仅会泄漏内存，还意味着您将继续使用原始空间——John Downey 在黑暗中的镜头指出您在滥用 realloc()，但并未强调您这样做的严重程度。还有一个错误，因为您没有为终止字符串的 NUL '\0' 分配足够的空间。

发生内存泄漏是因为您没有提供一种机制来告诉调用者字符串的最后一个值。因为你一直在践踏原始字符串加上它后面的空格，所以看起来代码可以工作，但是如果你的调用代码释放了空间，它也会得到一个双释放错误，或者它可能会得到一个核心转储或等效的，因为内存控制信息是完全加扰的。

您的代码也不能防止无限增长——考虑用“Joyeux Noel”替换“Noel”。每次，您将添加 7 个字符，但您会在替换的文本中找到另一个 Noel，然后将其展开，依此类推。我的修复（如下）没有解决这个问题——简单的解决方案可能是检查搜索字符串是否出现在替换字符串中；另一种方法是跳过替换字符串并继续搜索。第二个有一些重要的编码问题需要解决。

因此，我建议对您调用的函数的修订是：

```
char *strrep(char *input, char *search, char *replace) {
    int searchLen = strlen(search);
    int replaceLen = strlen(replace);
    int delta = replaceLen - searchLen;
    char *find = input;

    while ((find = strstr(find, search)) != 0) {
        if (delta > 0) {
            input = realloc(input, strlen(input) + delta + 1);
            find = strstr(input, search);            
        }

        memmove(find + replaceLen, find + searchLen, strlen(input) + 1 - (find - input));
        memmove(find, replace, replaceLen);
    }

    return(input);
} 
```

此代码不会检测内存分配错误 - 如果 realloc() 失败，可能会崩溃（但如果没有，则会泄漏内存）。有关内存管理问题的广泛讨论，请参阅 Steve Maguire 的“Writing Solid Code”一书。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-08-04T11:17:32.330

**请注意，尝试编辑您的代码以摆脱 html 转义码。**

好吧，虽然我使用 C/C++ 已经有一段时间了，但如果在原始块之后内存中有空间，增长的 realloc 只会重用内存指针值。

例如，考虑一下：

（xxxxxxxxx........）

如果您的指针指向第一个 x，并且 . 表示空闲内存位置，并且您将变量指向的内存大小增加 5 个字节，它会成功。这当然是一个简化的示例，因为块被四舍五入到一定大小以进行对齐，但无论如何。

但是，如果您随后尝试将其再增加 10 个字节，而只有 5 个字节可用，则需要在内存中移动该块并更新您的指针。

但是，在您的示例中，您向函数传递了一个指向字符的指针，而不是指向变量的指针，因此虽然 strrep 函数在内部可能能够调整正在使用的变量，但它是 strrep 函数的局部变量，并且您的调用代码将保留原始指针变量值。

但是，该指针值已被释放。

在您的情况下，输入是罪魁祸首。

不过，我会提出另一个建议。在您的情况下，看起来*输入*变量确实是输入，如果是，则根本不应该修改它。

因此，我会尝试找到另一种方法来做你想做的事，而不改变*input*，因为这样的副作用很难追踪。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-08-04T11:39:47.853

这似乎有效；

```
char *strrep(char *string, const char *search, const char *replace) {
    char *p = strstr(string, search);

    if (p) {
        int occurrence = p - string;
        int stringlength = strlen(string);
        int searchlength = strlen(search);
        int replacelength = strlen(replace);

        if (replacelength > searchlength) {
            string = (char *) realloc(string, strlen(string) 
                + replacelength - searchlength + 1);
        }

        if (replacelength != searchlength) {
            memmove(string + occurrence + replacelength, 
                        string + occurrence + searchlength, 
                        stringlength - occurrence - searchlength + 1);
        }

        strncpy(string + occurrence, replace, replacelength);
    }

    return string;
} 
```

叹息，无论如何发布代码而不吸吮？

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2011-05-16T22:57:53.513

realloc 很奇怪，很复杂，只应在每秒处理大量内存时使用。ie - 它实际上使您的代码更快。

我在哪里看到代码

```
realloc(bytes, smallerSize); 
```

用于调整缓冲区大小，使其更小。工作了大约一百万次，然后由于某种原因 realloc 决定即使您缩短缓冲区，它也会为您提供一个不错的新副本。所以你在坏事发生后的 1/2 秒内随机坠毁。

始终使用 realloc 的返回值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-04T11:20:58.657

我的快速提示。

而不是：
`void strrep(char *input, char *search, char *replace)`
尝试：
`void strrep(char *&input, char *search, char *replace)`

而不是在体内：
`input = realloc(input, strlen(input) + delta);`

通常阅读有关将函数参数作为值/引用和 realloc() 描述传递的内容:)。

# sql - 如何索引数据库列

> ID：1156
> 
> 赞同：66
> 
> 时间：2008-08-04T11:21:26.567
> 
> 标签：sql, database, indexing

希望我能得到每个数据库服务器的答案。

有关索引如何工作的概述，请查看：[数据库索引如何工作？](https://stackoverflow.com/questions/1108/how-does-database-indexing-work)

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2008-08-04T11:25:14.017

以下是 SQL92 标准，因此大多数使用 SQL 的 RDMBS 都应该支持：

```
CREATE INDEX [index name] ON [table name] ( [column name] ) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-08-13T14:05:26.880

`Sql Server 2005`使您能够指定覆盖索引。这是一个包含叶级别其他列的数据的索引，因此您不必返回表来获取索引键中未包含的列。

```
create nonclustered index my_idx on my_table (my_col1 asc, my_col2 asc) include (my_col3); 
```

这对于包含`my_col3`在选择列表和`my_col1`where`my_col2`子句中的查询来说是无价的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-01-23T15:13:48.257

对于 python pytables，索引没有名称，它们绑定到单个列：

```
tables.columns.column_name.createIndex() 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-15T18:01:12.187

在 SQL Server 中，您可以执行以下操作：（[MSDN Link](http://msdn.microsoft.com/en-us/library/ms188783.aspx) to full list of options.）

```
CREATE [ UNIQUE ] [ CLUSTERED | NONCLUSTERED ] INDEX index_name 
    ON <object> ( column [ ASC | DESC ] [ ,...n ] ) 
    [ INCLUDE ( column_name [ ,...n ] ) ]
    [ WHERE <filter_predicate> ] 
```

（忽略一些更高级的选项......）

每个索引的名称在数据库范围内必须是唯一的。

所有索引都可以有多个列，并且每一列都可以按照您想要的任何顺序进行排序。

聚集索引是唯一的 - 每个表一个。他们不能有`INCLUDE`d 列。

非聚集索引不是唯一的，每个表最多可以有 999 个。它们可以包含列和 where 子句。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-02T13:38:43.480

要创建索引，可以使用以下内容：

1.  在表上创建索引。允许重复值： `CREATE INDEX index_name ON table_name (column_name)`

2.  在表上创建唯一索引。不允许重复值： `CREATE UNIQUE INDEX index_name ON table_name (column_name)`

3.  聚集索引：`CREATE CLUSTERED INDEX CL_ID ON SALES(ID);`

4.  非聚集索引：
    `CREATE NONCLUSTERED INDEX NONCI_PC ON SALES(ProductCode);`

有关详细信息，请参阅：[http](http://www.codeproject.com/Articles/190263/Indexes-in-MS-SQL-Server) ://www.codeproject.com/Articles/190263/Indexes-in-MS-SQL-Server 。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-17T10:48:15.933

1.  `CREATE INDEX name_index ON Employee (Employee_Name)`

2.  在多列上：`CREATE INDEX name_index ON Employee (Employee_Name, Employee_Age)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-01T19:05:49.237

由于大多数答案都是针对 SQL 数据库给出的，因此我正在为 NOSQL 数据库，特别是 MongoDB 编写这个。

下面是使用 mongo shell 在 MongoDB 中创建索引的语法。

```
db.collection.createIndex( <key and index type specification>, <options> ) 
```

例子 -`db.collection.createIndex( { name: -1 } )`

在上面的示例中，在 name 字段上创建了一个单键降序索引。

请记住，MongoDB 索引使用 B-tree 数据结构。

我们可以在 mongodb 中创建多种类型的索引，有关更多信息，请参阅以下链接 - [https://docs.mongodb.com/manual/indexes/](https://docs.mongodb.com/manual/indexes/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-05T10:24:47.673

并非所有数据库都需要索引。例如：Kognitio aka WX2 引擎不提供用于索引的语法，因为数据库引擎会隐式处理它。数据通过循环分区进行，Kognitio WX2 以最简单的方式在磁盘上和磁盘上获取数据。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-07T19:09:29.887

我们可以使用以下语法来创建索引。

```
CREATE INDEX <index_name> ON <table_name>(<column_name>) 
```

如果我们不希望允许重复值，那么我们可以在创建索引时添加**UNIQUE**，如下所示

```
CREATE UNIQUE INDEX <index_name> ON <table_name>(<column_name>) 
```

**我们可以通过给出由 ' ,** '分隔的多个列名来在多个列上创建索引

# svn - 使用 SVN Revision 标记 CCNET 中的构建

> ID：1160
> 
> 赞同：42
> 
> 时间：2008-08-04T11:37:24.863
> 
> 标签：svn, msbuild, cruisecontrol.net

我在以 SVN 作为源代码控制的示例项目中使用 CCNET。CCNET 配置为在每次签入时创建构建。CCNET 使用 MSBuild 构建源代码。

我想`AssemblyInfo.cs`在编译时使用最新的修订号来生成。如何从 subversion 中检索最新版本并使用 CCNET 中的值？

编辑：我没有使用 NAnt - 只有 MSBuild。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-06-10T12:37:30.197

CruiseControl.Net 1.4.4 现在有一个[Assembly Version Labeller](http://confluence.public.thoughtworks.org/display/CCNET/Assembly+Version+Labeller)，它生成与 .Net 程序集属性兼容的版本号。

在我的项目中，我将其配置为：

```
<labeller type="assemblyVersionLabeller" incrementOnFailure="true" major="1" minor="2"/> 
```

（警告：`assemblyVersionLabeller`在实际的提交触发构建发生之前，不会开始生成基于 svn 修订的标签。）

然后使用[MSBuildCommunityTasks.AssemblyInfo](http://msbuildtasks.tigris.org/)从我的 MSBuild 项目中使用它：

```
<Import Project="$(MSBuildExtensionsPath)\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets"/>
<Target Name="BeforeBuild">
  <AssemblyInfo Condition="'$(CCNetLabel)' != ''" CodeLanguage="CS" OutputFile="Properties\AssemblyInfo.cs" 
  AssemblyTitle="MyTitle" AssemblyCompany="MyCompany" AssemblyProduct="MyProduct"
  AssemblyCopyright="Copyright ©  2009" ComVisible="false" Guid="some-random-guid"
  AssemblyVersion="$(CCNetLabel)" AssemblyFileVersion="$(CCNetLabel)"/>
</Target> 
```

为了完整起见，使用 NAnt 而不是 MSBuild 的项目同样容易：

```
<target name="setversion" description="Sets the version number to CruiseControl.Net label.">
    <script language="C#">
        <references>
            <include name="System.dll" />
        </references>
        <imports>
            <import namespace="System.Text.RegularExpressions" />
        </imports>
        <code><![CDATA[
             [TaskName("setversion-task")]
             public class SetVersionTask : Task
             {
              protected override void ExecuteTask()
              {
               StreamReader reader = new StreamReader(Project.Properties["filename"]);
               string contents = reader.ReadToEnd();
               reader.Close();
               string replacement = "[assembly: AssemblyVersion(\"" + Project.Properties["CCNetLabel"] + "\")]";
               string newText = Regex.Replace(contents, @"\[assembly: AssemblyVersion\("".*""\)\]", replacement);
               StreamWriter writer = new StreamWriter(Project.Properties["filename"], false);
               writer.Write(newText);
               writer.Close();
              }
             }
             ]]>
        </code>
    </script>
    <foreach item="File" property="filename">
        <in>
            <items basedir="..">
                <include name="**\AssemblyInfo.cs"></include>
            </items>
        </in>
        <do>
            <setversion-task />
        </do>
    </foreach>
</target> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-08-04T11:56:42.533

你基本上有两个选择。您可以编写一个简单的脚本来启动并解析来自

**svn.exe 信息 --revision HEAD**

获取修订号（然后生成 AssemblyInfo.cs 非常简单）或仅使用 CCNET 插件。这里是：

> **SVN Revision Labeller**是 CruiseControl.NET 的插件，它允许您根据 Subversion 工作副本的修订号为您的构建生成 CruiseControl 标签。这可以使用前缀和/或主要/次要版本号进行自定义。
> 
> [http://code.google.com/p/svnrevisionlabeller/](http://code.google.com/p/svnrevisionlabeller/)

我更喜欢第一个选项，因为它只有大约 20 行代码：

```
using System;
using System.Diagnostics;

namespace SvnRevisionNumberParserSample
{
    class Program
    {
        static void Main()
        {
            Process p = Process.Start(new ProcessStartInfo()
                {
                    FileName = @"C:\Program Files\SlikSvn\bin\svn.exe", // path to your svn.exe
                    UseShellExecute = false,
                    RedirectStandardOutput = true,
                    Arguments = "info --revision HEAD",
                    WorkingDirectory = @"C:\MyProject" // path to your svn working copy
                });

            // command "svn.exe info --revision HEAD" will produce a few lines of output
            p.WaitForExit();

            // our line starts with "Revision: "
            while (!p.StandardOutput.EndOfStream)
            {
                string line = p.StandardOutput.ReadLine();
                if (line.StartsWith("Revision: "))
                {
                    string revision = line.Substring("Revision: ".Length);
                    Console.WriteLine(revision); // show revision number on screen                       
                    break;
                }
            }

            Console.Read();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-04T11:51:59.297

我在谷歌代码上找到[了这个](http://code.google.com/p/svnrevisionlabeller)项目。这是`CCNET`生成标签的插件`CCNET`。

`DLL`已经过测试，但`CCNET 1.3`它适用`CCNET 1.4`于我。我成功地使用这个插件来标记我的构建。

现在将其传递给`MSBuild`...

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-04T12:03:03.487

如果您更喜欢在配置上执行它`MSBuild`，`CCNet`看起来`MSBuild`社区任务扩展的[`SvnVersion`](http://msbuildtasks.tigris.org/)任务可能会成功。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-08-04T13:43:54.530

我编写了一个 NAnt 构建文件来处理解析 SVN 信息和创建属性。然后，我将这些属性值用于各种构建任务，包括在构建上设置标签。我将此目标与 lubos hasko 提到的 SVN Revision Labeller 结合使用，效果很好。

```
<target name="svninfo" description="get the svn checkout information">
    <property name="svn.infotempfile" value="${build.directory}\svninfo.txt" />
    <exec program="${svn.executable}" output="${svn.infotempfile}">
        <arg value="info" />
    </exec>
    <loadfile file="${svn.infotempfile}" property="svn.info" />
    <delete file="${svn.infotempfile}" />

    <property name="match" value="" />

    <regex pattern="URL: (?'match'.*)" input="${svn.info}" />
    <property name="svn.info.url" value="${match}"/>

    <regex pattern="Repository Root: (?'match'.*)" input="${svn.info}" />
    <property name="svn.info.repositoryroot" value="${match}"/>

    <regex pattern="Revision: (?'match'\d+)" input="${svn.info}" />
    <property name="svn.info.revision" value="${match}"/>

    <regex pattern="Last Changed Author: (?'match'\w+)" input="${svn.info}" />
    <property name="svn.info.lastchangedauthor" value="${match}"/>

    <echo message="URL: ${svn.info.url}" />
    <echo message="Repository Root: ${svn.info.repositoryroot}" />
    <echo message="Revision: ${svn.info.revision}" />
    <echo message="Last Changed Author: ${svn.info.lastchangedauthor}" />
</target> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-08-04T11:41:37.133

我目前正在使用我的[cmdnetsvnrev](http://www.stum.de/various-tools/cmdtools/)工具通过 prebuild-exec 任务“手动”执行此操作，但如果有人知道更好的 ccnet 集成方式，我会很高兴听到 :-)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-08-04T13:22:31.640

> **自定义 csproj 文件以自动生成 AssemblyInfo.cs**
> [http://www.codeproject.com/KB/dotnet/Customizing_csproj_files.aspx](http://www.codeproject.com/KB/dotnet/Customizing_csproj_files.aspx)
> 
> 每次我们创建一个新的 C# 项目时，Visual Studio 都会为我们放置 AssemblyInfo.cs 文件。该文件定义程序集元数据，如其版本、配置或生产者。

找到了使用 MSBuild 自动生成 AssemblyInfo.cs 的上述技术。将很快发布样品。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2010-04-12T01:04:20.763

我不确定这是否适用于 CCNET，但我已经为 CodePlex 上的[Build Version Increment](http://autobuildversion.codeplex.com/)项目创建了一个[SVN 版本插件。](http://happyturtle.codeplex.com/)该工具非常灵活，可以设置为使用 svn 修订版自动为您创建版本号。它不需要编写任何代码或编辑 xml，所以耶！

我希望这会有所帮助！

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-02-03T04:16:04.260

我的方法是使用前面提到的 ccnet 插件和一个 nant echo 任务来生成一个`VersionInfo.cs`只包含版本属性的文件。我只需要将`VersionInfo.cs`文件包含到构建中

echo 任务只是将我给它的字符串输出到一个文件中。

如果有类似的 MSBuild 任务，您可以使用相同的方法。这是我使用的小任务：

```
<target name="version" description="outputs version number to VersionInfo.cs">
  <echo file="${projectdir}/Properties/VersionInfo.cs">
    [assembly: System.Reflection.AssemblyVersion("$(CCNetLabel)")]
    [assembly: System.Reflection.AssemblyFileVersion("$(CCNetLabel)")]
  </echo>
</target> 
```

试试这个：

```
<ItemGroup>
    <VersionInfoFile Include="VersionInfo.cs"/>
    <VersionAttributes>
        [assembly: System.Reflection.AssemblyVersion("${CCNetLabel}")]
        [assembly: System.Reflection.AssemblyFileVersion("${CCNetLabel}")]
    </VersionAttributes>
</ItemGroup>
<Target Name="WriteToFile">
    <WriteLinesToFile
        File="@(VersionInfoFile)"
        Lines="@(VersionAttributes)"
        Overwrite="true"/>
</Target> 
```

请注意，我对 MSBuild 不是很熟悉，所以我的脚本可能无法开箱即用，需要更正......

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-09-12T10:03:28.150

基于 skolimas 解决方案，我更新了 NAnt 脚本以更新 AssemblyFileVersion。感谢 skolima 的代码！

```
<target name="setversion" description="Sets the version number to current label.">
        <script language="C#">
            <references>
                    <include name="System.dll" />
            </references>
            <imports>
                    <import namespace="System.Text.RegularExpressions" />
            </imports>
            <code><![CDATA[
                     [TaskName("setversion-task")]
                     public class SetVersionTask : Task
                     {
                      protected override void ExecuteTask()
                      {
                       StreamReader reader = new StreamReader(Project.Properties["filename"]);
                       string contents = reader.ReadToEnd();
                       reader.Close();                     
                       // replace assembly version
                       string replacement = "[assembly: AssemblyVersion(\"" + Project.Properties["label"] + "\")]";
                       contents = Regex.Replace(contents, @"\[assembly: AssemblyVersion\("".*""\)\]", replacement);                                        
                       // replace assembly file version
                       replacement = "[assembly: AssemblyFileVersion(\"" + Project.Properties["label"] + "\")]";
                       contents = Regex.Replace(contents, @"\[assembly: AssemblyFileVersion\("".*""\)\]", replacement);                                        
                       StreamWriter writer = new StreamWriter(Project.Properties["filename"], false);
                       writer.Write(contents);
                       writer.Close();
                      }
                     }
                     ]]>
            </code>
        </script>
        <foreach item="File" property="filename">
            <in>
                    <items basedir="${srcDir}">
                            <include name="**\AssemblyInfo.cs"></include>
                    </items>
            </in>
            <do>
                    <setversion-task />
            </do>
        </foreach>
    </target> 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-09-18T17:18:26.017

不知道我在哪里找到这个。但我在互联网上的“某处”找到了这个。

这会在构建发生之前更新所有 AssemblyInfo.cs 文件。

奇迹般有效。我所有的 exe 和 dll 都显示为 1.2.3.333（如果“333”是当时的 SVN 修订版。）（并且 AssemblyInfo.cs 文件中的原始版本被列为“1.2.3.0”）

* * *

$(ProjectDir) （我的 .sln 文件所在的位置）

$(SVNToolPath) (指向 svn.exe)

是我的自定义变量，它们的声明/定义未在下面定义。

* * *

[http://msbuildtasks.tigris.org/](http://msbuildtasks.tigris.org/) 和/或 [https://github.com/loresoft/msbuildtasks](https://github.com/loresoft/msbuildtasks) 具有（ FileUpdate 和 SvnVersion ）任务。

* * *

```
 <Target Name="SubVersionBeforeBuildVersionTagItUp">

    <ItemGroup>
      <AssemblyInfoFiles Include="$(ProjectDir)\**\*AssemblyInfo.cs" />
    </ItemGroup>

    <SvnVersion LocalPath="$(MSBuildProjectDirectory)" ToolPath="$(SVNToolPath)">
      <Output TaskParameter="Revision" PropertyName="MySubVersionRevision" />
    </SvnVersion>

    <FileUpdate Files="@(AssemblyInfoFiles)"
            Regex="(\d+)\.(\d+)\.(\d+)\.(\d+)"
            ReplacementText="$1.$2.$3.$(MySubVersionRevision)" />
  </Target> 
```

编辑 - - - - - - - - - - - - - - - - - - - - - - - - - -

在您的 SVN 修订号达到 65534 或更高版本后，上述操作可能会开始失败。

看：

[关闭警告 CS1607](https://stackoverflow.com/questions/13414409/turn-off-warning-cs1607/13751833#13751833)

这是解决方法。

```
<FileUpdate Files="@(AssemblyInfoFiles)"
Regex="AssemblyFileVersion\(&quot;(\d+)\.(\d+)\.(\d+)\.(\d+)"
ReplacementText="AssemblyFileVersion(&quot;$1.$2.$3.$(SubVersionRevision)" /> 
```

结果应该是：

在 Windows/资源管理器//文件/属性中……。

程序集版本将为 1.0.0.0。

如果 333 是 SVN 修订版，则文件版本将为 1.0.0.333。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-02-03T18:34:49.067

当心。用于内部版本号的结构很短，因此您对修订可以达到多高有一个上限。

在我们的例子中，我们已经超过了限制。

如果您尝试输入内部版本号 99.99.99.599999，则文件版本属性实际上将显示为 99.99.99.10175。

# python - Python中最有效的图数据结构是什么？

> ID：1171
> 
> 赞同：73
> 
> 时间：2008-08-04T12:00:57.297
> 
> 标签：python, performance, data-structures, graph-theory

我需要能够在 python 中操作一个大的（10^7 个节点）图。每个节点/边对应的数据是最少的，比如说，少量的字符串。***就内存和速度***而言，最有效的方法是什么？

dict 的 dict 更灵活、更易于实现，但我直观地希望列表列表更快。list 选项还要求我将数据与结构分开，而 dicts 将允许以下内容：

```
graph[I][J]["Property"]="value" 
```

你有什么建议？

* * *

是的，我应该更清楚我所说的效率是什么意思。在这种特殊情况下，我的意思是随机访问检索。

将数据加载到内存中并不是一个大问题。这是一劳永逸的。耗时的部分是访问节点，以便我可以提取信息并测量我感兴趣的指标。

我没有考虑将每个节点都设为一个类（所有节点的属性都相同），但似乎这会增加额外的开销层？我希望有人对他们可以分享的类似案例有一些直接的经验。毕竟，图是 CS 中最常见的抽象之一。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2008-08-26T17:43:06.413

我强烈建议您查看[NetworkX](http://networkx.github.com/)。这是一匹经过实战考验的战马，也是大多数“研究”类型在需要对基于网络的数据进行分析时使用的第一个工具。我已经在笔记本上毫无问题地操作了具有 100 条边的图形。它的功能丰富且非常易于使用。您会发现自己更多地关注手头的问题，而不是底层实现中的细节。

**[Erdős-Rényi](http://en.wikipedia.org/wiki/Erd%C5%91s%E2%80%93R%C3%A9nyi_model)随机图生成和分析示例**

```
 """
Create an G{n,m} random graph with n nodes and m edges
and report some properties.

This graph is sometimes called the Erd##[m~Qs-Rényi graph
but is different from G{n,p} or binomial_graph which is also
sometimes called the Erd##[m~Qs-Rényi graph.
"""
__author__ = """Aric Hagberg (hagberg@lanl.gov)"""
__credits__ = """"""
#    Copyright (C) 2004-2006 by 
#    Aric Hagberg 
#    Dan Schult 
#    Pieter Swart 
#    Distributed under the terms of the GNU Lesser General Public License
#    http://www.gnu.org/copyleft/lesser.html

from networkx import *
import sys

n=10 # 10 nodes
m=20 # 20 edges

G=gnm_random_graph(n,m)

# some properties
print "node degree clustering"
for v in nodes(G):
    print v,degree(G,v),clustering(G,v)

# print the adjacency list to terminal 
write_adjlist(G,sys.stdout) 
```

可视化也很简单：

![在此处输入图像描述](../Images/99d1f3e4595843b96d0218378f1ae635.png)

更多可视化：http: [//jonschull.blogspot.com/2008/08/graph-visualization.html](http://jonschull.blogspot.com/2008/08/graph-visualization.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2010-11-27T14:10:33.897

尽管这个问题现在已经很老了，但我认为值得一提的是我自己的用于图形操作的 python 模块，称为[graph-tool](http://graph-tool.skewed.de)。它非常有效，因为数据结构和算法是在 C++ 中实现的，带有模板元编程，使用 Boost Graph Library。因此，它的性能（在内存使用和运行时）与纯 C++ 库相当，并且可以比典型的 python 代码好几个数量级，而不会牺牲易用性。我自己经常使用它来处理非常大的图表。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-08-27T10:01:21.803

如前所述，NetworkX 非常好，另一个选项是[igraph](http://cneurocvs.rmki.kfki.hu/igraph/)。这两个模块都将拥有您可能需要的大部分（如果不是全部）分析工具，并且这两个库通常用于大型网络。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-04T12:09:55.830

字典也可能包含开销，具体取决于实际实现。哈希表通常包含一些可用节点的素数，即使您可能只使用几个节点。

从您的示例“Property”来看，您是否会更好地使用最终级别和真实属性的类方法？或者属性的名称从节点到节点变化很大？

我想说“高效”的含义取决于很多事情，例如：

*   更新速度（插入、更新、删除）
*   随机存取检索速度
*   顺序检索速度
*   使用的内存

我认为您会发现，速度快的数据结构通常会比速度慢的数据结构消耗更多的内存。情况并非总是如此，但大多数数据结构似乎都遵循这一点。

字典可能易于使用，并为您提供相对一致的快速访问，它很可能会使用比您建议的列表更多的内存。然而，当您将数据插入其中时，列表通常会包含更多开销，除非它们预先分配 X 节点，在这些节点中它们将再次使用更多内存。

一般来说，我的建议是使用对您来说最自然的方法，然后对系统进行“压力测试”，向其中添加大量数据，看看它是否会成为问题。

您还可以考虑为您的系统添加一个抽象层，这样如果您以后需要更改内部数据结构，您就不必更改编程接口。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-06T05:37:33.607

据我了解，对于 Python 的 dicts 和列表，随机访问是在恒定时间内进行的，不同之处在于您只能对带有列表的整数索引进行随机访问。我假设您需要通过其标签查找节点，因此您需要一个字典。

然而，在性能方面，将它加载到内存中可能不是问题，但如果你使用太多，你最终会交换到磁盘，这甚至会破坏 Python 的高效 dicts 的性能。尽量减少内存使用量。此外，RAM 现在非常便宜。如果你经常做这种事情，没有理由不拥有至少 4GB。

如果您想获得有关降低内存使用率的建议，请提供有关您为每个节点跟踪的信息类型的更多信息。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-04T12:41:15.767

制作基于类的结构可能比基于 dict 的结构有更多的开销，因为在 python 中，类在实现时实际上使用了 dicts。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-18T09:08:03.070

毫无疑问，NetworkX 是迄今为止最好的图数据结构。它带有辅助函数、数据结构和算法、随机序列生成器、装饰器、Cuthill-Mckee 排序、上下文管理器等实用程序

NetworkX 很棒，因为它适用于图、有向图和多重图。它可以用多种方式写图：邻接表、多行邻接表、边表、GEXF、GML。它适用于 Pickle、GraphML、JSON、SparseGraph6 等。

它实现了各种辐射算法，包括：逼近、二分、边界、中心性、团、聚类、着色、分量、连通性、循环、有向无环图、距离度量、支配集、欧拉、同构、链接分析、链接预测、匹配，最小生成树，丰富的俱乐部，最短路径，遍历，树。

# web-applications - 如何在 webapp 中创建子域用户帐户

> ID：1180
> 
> 赞同：24
> 
> 时间：2008-08-04T12:22:07.910
> 
> 标签：web-applications, dns, subdomain, account

我希望允许用户控制我正在玩弄的应用程序的子域，就像它所在的 Basecamp 一样`customusername.seework.com`。

最终需要什么`DNS`来允许这些动态创建并立即可用。

你建议如何在网站的逻辑中处理这个问题？在?`Htaccess`中查找子域的规则`DB`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-04T13:39:39.423

我们这样做的方式是为我们在 DNS 中注册的域名设置一个“包罗万象”，以便 any.ourdomain.com 指向我们的服务器。

使用 Apache，您可以为您的虚拟主机设置类似的包罗万象。ServerName 必须是单个静态名称，但 ServerAlias 指令可以包含模式。

```
Servername www.ourdomain.com
ServerAlias *.ourdomain.com 
```

现在所有域都将触发我们项目的虚拟主机。最后一部分是解码实际使用的域名，以便您可以在代码中计算出用户名，例如（PHP）：

```
list( $username ) = explode( ".", $_SERVER[ "HTTP_HOST" ] ); 
```

或已经建议的 RewriteRule 将 user.ourdomain.com/foo/bar 静默映射到 www.ourdomain.com/foo/bar?user=user 或您喜欢的任何内容。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-08-04T12:32:24.143

**不用担心 DNS 和 URL 重写**

您的 DNS 记录将是静态的，例如：

```
*.YOURDOMAIN.COM A 123.123.123.123 
```

请让您的 DNS 提供商为您完成（如果尚未完成），或者如果您可以控制您的 DNS 记录，请自行完成。这将自动将您的所有子域（当前和未来的）指向同一个 HTTP 服务器。

完成后，您只需在每个 http 请求上解析 HOST 标头，以检测用于访问 http 服务器上的服务器端脚本的主机名。

假设您使用的是 ASP.NET，这是我想出的一个愚蠢的例子，但可以工作并演示这种方法的简单性：

```
<%@ Language="C#" %>
<%
string subDomain = Request.Url.Host.Split('.')[0].ToUpper();
if (subDomain == "CLIENTXXX") Response.Write("Hello CLIENTXXX, your secret number is 33");
else if (subDomain == "CLIENTYYY") Response.Write("Hello CLIENTYYY, your secret number is 44");
else Response.Write(subDomain+" doesn't exist");
%> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-04T12:28:03.467

诀窍是使用 URL 重写，以便**name.domain.com**透明地映射到服务器上的**domain.com/users/name**之类的东西。一旦你开始沿着这条路走下去，实施起来就相当简单了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-12T15:28:31.603

我想做类似的事情（`www.mysite.com/SomeUser`）。

我所做的是我编辑`404.shtml`包含这个服务器端包含（SSI）代码：

```
<!--#include virtual="404.php" -- > 
```

然后我创建了文件`404.php`，在其中解析 URL 以检查用户名并显示数据库中的信息。

# c# - ViewState 仅在 Safari 中无效

> ID：1189
> 
> 赞同：16
> 
> 时间：2008-08-04T12:38:21.263
> 
> 标签：c#, .net, safari, viewstate

我维护的网站之一在很大程度上依赖于使用`ViewState`（这不是我的代码）。但是，在某些`ViewState`过度膨胀的页面上，Safari 会引发`"Validation of viewstate MAC failed"`错误。

这似乎只发生在 Safari 中。Firefox、IE 和 Opera 都在相同的场景下成功加载。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-04T13:44:49.473

虽然我支持 Channel 9 解决方案，但也请注意，在某些托管环境中，Safari 不被视为高级浏览器。您可能需要将它添加到应用程序的浏览器中才能使用一些 ASP.Net 功能。

这就是我们对使用 ASP Menu 控件的客户端站点感到头疼的根本原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-04T13:00:32.043

我的第一个调用端口是浏览页面上的元素并查看哪些控件：

1.  当我关闭 ViewState 时仍然可以工作
2.  可以移出页面并在需要时加载到 AJAX 调用中

如果做不到这一点，这是免责声明——我从未在面向 Web 的网站上使用过这个解决方案——但在过去，我想在有限受众应用程序中消除大量 ViewState，我将 ViewState 存储在 Session 中。

它对我有用，因为对内存的影响对于用户数量来说并不重要，但是如果您正在运行一个相当受欢迎的网站，我不会推荐这种方法。但是，如果 Session 解决方案适用于 Safari，则您始终可以检测到用户代理并适当地捏造。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-04T12:40:49.137

我一直在对此进行一些研究，虽然我不完全确定其原因，但我认为这是因为 Safari 没有返回完整的结果集（因此对其进行了裁剪）。

我一直在与另一位开发人员进行讨论，并在 Channel 9 上找到了以下帖子，该帖子建议使用 SQL 状态服务来存储视图状态，从而避免回发问题和页面大小。

[http://channel9.msdn.com/forums/TechOff/250549-ASPNET-ViewState-flawed-architecture/?CommentID=270477#263702](http://channel9.msdn.com/forums/TechOff/250549-ASPNET-ViewState-flawed-architecture/?CommentID=270477#263702)

这似乎是最好的解决方案吗？

# hyperlink - 如何超链接到 .ppt 文件的特定幻灯片？

> ID：1229
> 
> 赞同：17
> 
> 时间：2008-08-04T13:38:18.677
> 
> 标签：hyperlink, powerpoint

我想链接到在线 PowerPoint 文件中的特定幻灯片（例如 `http://www.example.com/hello.ppt`），但我想要的是当人们点击我的链接时，它会直接转到第 n 张幻灯片。

这可能吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-08-04T13:54:01.687

链接到

[http://www.whatever.com/hello.ppt](http://www.whatever.com/hello.ppt) **#4**

用于最初打开幻灯片 4。

看看这个网站： [http ://www.tinyempire.com/shortnotes/files/specific_slide_in_ppt.htm](http://www.tinyempire.com/shortnotes/files/specific_slide_in_ppt.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-12-01T14:30:01.937

此外，如果您想要一个指向同一文件中第 n 张幻灯片的链接（以自动执行“编辑超链接”>“放置在此文档中”操作），则省略文件名并仅将其设置为“#n”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-04T14:06:02.863

我找到了答案。您所要做的就是在.ppt 之后添加#n。

例如，[http://www.whatever.com/hello.ppt#4](http://www.whatever.com/hello.ppt#4) 将带您直接进入第四张幻灯片。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-06T12:29:00.257

以下方法适用于任何在线版本的 PowerPoint（例如 Office 365）。

1.  在浏览器中打开 powerpoint 文件（链接可能如下所示：http: [//YourCompany.sharepoint.com/:p:/r/sites/SiteName/..](http://YourCompany.sharepoint.com/:p:/r/sites/SiteName/..)）
2.  在缩略图列表（左侧）中，右键单击要引用的幻灯片并选择“链接到此幻灯片”（免费翻译，我的版本是荷兰语“Koppeling naar deze dia”）
3.  在弹出屏幕中，您可以选择共享只读或可编辑版本

# regex - 正则表达式：提取字符串中两个标签之间的子字符串

> ID：1237
> 
> 赞同：48
> 
> 时间：2008-08-04T13:47:10.547
> 
> 标签：regex, parsing

我有一个格式如下的文件：

```
数据数据
数据
[开始]
我要的数据
[结尾]
数据

```

我想使用正则表达式`Data I want`从`[Start]`和`[End]`标签之间获取。谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2008-08-04T13:52:06.043

```
\[start\](.*?)\[end\] 
```

Zhich 会将文本放在捕获的中间。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2008-08-04T13:55:05.647

```
\[start\]\s*(((?!\[start\]|\[end\]).)+)\s*\[end\] 
```

希望这也应该删除`[start]`和`[end]`标记。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-06T16:52:08.530

```
$text ="Data Data Data start Data i want end Data";
($content) = $text =~ m/ start (.*) end /;
print $content; 
```

我有一段时间遇到类似的问题，我可以告诉你这种方法有效......

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-20T19:14:19.237

有关使用正则表达式查找匹配标签的陷阱的更完整讨论，请参见：http: [//faq.perl.org/perlfaq4.html#How_do_I_find_matchi](http://faq.perl.org/perlfaq4.html#How_do_I_find_matchi)。特别要注意，嵌套标签确实需要一个成熟的解析器才能正确解释。

请注意，需要关闭区分大小写才能回答所述问题。在 perl 中，这就是**i**修饰符：

```
$ echo "Data Data Data [Start] Data i want [End] Data" \
  | perl -ne '/\[start\](.*?)\[end\]/i; print "$1\n"'
 Data i want 
```

另一个技巧是使用***?** 量词，它关闭捕获的匹配的贪婪。例如，如果您有一个不匹配的**[end]**标签：

```
Data Data [Start] Data i want [End] Data [end] 
```

您可能不想捕获：

```
 Data i want [End] Data 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-15T14:18:27.953

虽然您可以使用正则表达式来解析开始标签和结束标签之间的数据，但您需要仔细考虑这是否是您想要走的路径。其原因是标签嵌套的潜力：如果嵌套标签可能发生或可能发生，则称该语言不再是正​​则的，并且正则表达式不再是解析它的适当工具。

许多正则表达式的实现，例如 PCRE 或 perl 的正则表达式，都支持回溯，可以用来实现这种粗略的效果。但是 PCRE（与 perl 不同）不支持无限回溯，一旦标签过多，这实际上会导致事情以奇怪的方式中断。

有一篇非常常被引用的博客文章对此进行了更多讨论， http: [//kore-nordmann.de/blog/do_NOT_parse_using_regexp.html](http://kore-nordmann.de/blog/do_NOT_parse_using_regexp.html) （谷歌搜索并检查缓存，他们似乎有一些停机时间）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-11T20:08:30.597

好吧，如果您保证每个开始标签后面都有一个结束标签，那么以下内容将起作用。

```
\[start\](.*?)\[end\] 
```

但是，如果您有复杂的文本，例如以下内容：

```
[start] sometext [start] sometext2 [end] sometext [end] 
```

那么你会遇到正则表达式的问题。

现在下面的示例将拉出页面中的所有热链接：

```
'/<a(.*?)a>/i' 
```

在上述情况下，我们可以保证不会有任何嵌套情况：

```
'<a></a>' 
```

所以，这是一个复杂的问题，不能用简单的答案来解决。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-04T14:00:04.373

使用 Perl，您可以用 () 包围您想要的数据，然后将其拉出，也许​​其他语言也有类似的功能。

```
if ($s_output =~ /(data data data data START(data data data)END (data data)/) 
{
    $dataAllOfIt = $1;      # 1 full string
    $dataInMiddle = $2;     # 2 Middle Data
    $dataAtEnd = $3;        # 3 End Data
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-28T21:12:48.020

请参阅此问题以提取带有空格字符和点 ( `.`)的标签之间的文本

`[\S\s]`是我用的那个

[正则表达式匹配任何字符，包括换行符](https://stackoverflow.com/questions/8303488/regex-to-match-any-character-including-new-lines)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-12T08:26:38.207

使用方括号 [] 即 [Start] 和 [End] 读取文本，并使用值列表验证数组。***jsfiddle*** [http://jsfiddle.net/muralinarisetty/r4s4wxj4/1/](http://jsfiddle.net/muralinarisetty/r4s4wxj4/1/)

```
var mergeFields = ["[sitename]",
                   "[daystoholdquote]",
                   "[expires]",
                   "[firstname]",
                   "[lastname]",
                   "[sitephonenumber]",
                   "[hoh_firstname]",
                   "[hoh_lastname]"];       

var str = "fee [sitename] [firstname] \
sdfasd [lastname] ";
var res = validateMeargeFileds(str);
console.log(res);

function validateMeargeFileds(input) {
    var re = /\[\w+]/ig;
    var isValid;
    var myArray = input.match(re);

    try{
        if (myArray.length > 0) {
            myArray.forEach(function (field) {

                isValid = isMergeField(field);

                if (!isValid){
                   throw e;                        
                }
            });
        }
    }
    catch(e) {        
    }

    return isValid;
}

function isMergeField(mergefield) {
    return mergeFields.indexOf(mergefield.toLowerCase()) > -1;
} 
```

# c# - 通过同一个开放套接字进行异步多向服务器 - 客户端通信？

> ID：1241
> 
> 赞同：27
> 
> 时间：2008-08-04T13:52:25.090
> 
> 标签：c#, c++, sockets

我有一个客户端-服务器应用程序，客户端在 Windows Mobile 6 设备上，用 C++ 编写，服务器在完整的 Windows 上，用 C# 编写。

最初，我只需要它从客户端向服务器发送消息，而服务器只发回它收到消息的确认。现在，我想对其进行更新，以便服务器实际上可以向客户端发送消息以请求数据。正如我目前设置的那样，客户端仅在将数据发送到服务器后才处于接收模式，这不允许服务器随时发送请求。我将不得不等待客户数据。我的第一个想法是使用单独的打开套接字在客户端上创建另一个线程，监听服务器请求......就像服务器已经拥有客户端一样。有没有办法在同一个线程中使用同一个套接字，随时向所有服务器发送请求？

你可以使用一些东西来`WaitForMultipleObjects()`传递一个接收缓冲区和一个告诉它有数据要发送的事件吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-08-04T14:30:12.223

当我需要使用客户端-服务器模型编写应用程序时，客户端可以随时离开和进入（我假设您的应用程序也是如此，因为您使用移动设备时）我确保客户端发送*在线*消息到服务器，表明他们已连接并准备好做他们需要做的任何事情。

那时服务器可以通过相同的打开连接将消息发送回客户端。

另外，但我不知道这是否适用于你，我有某种*心跳*客户端发送到服务器，让它知道它仍然在线。这样，服务器就可以知道客户端何时被强制断开网络连接，并且可以将该客户端标记为脱机。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-08-17T13:53:04.733

在单线程中使用异步通信是完全可能的！

网络软件开发中有一种常见的设计模式，称为反应器模式（[看这本书](http://www.amazon.fr/Pattern-Oriented-Software-Architecture-Concurrent-Networked/dp/0471606952/ref=sr_1_9?ie=UTF8&s=english-books&qid=1218980593&sr=1-9)）。一些著名的网络库提供了这种模式的实现（[查看 ACE](http://www.cs.wustl.edu/~schmidt/ACE.html)）。

简而言之，reactor 是一个对象，您在其中注册所有套接字，然后等待某些东西。如果发生了什么事（新数据到达，连接关闭......），反应堆会通知你。当然，您可以只使用一个套接字来异步发送和接收数据。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-05T05:30:41.297

我不清楚您是否想将异步位添加到 C# 中的服务器或 C++ 中的客户端。

如果您正在谈论在 C++ 中执行此操作，桌面 Windows 平台可以通过使用重叠 I/O 的 API 异步执行套接字 I/O。对于套接字，WSASend、WSARecv 都允许异步 I/O（阅读有关其 LPOVERLAPPED 参数的文档，您可以使用 I/O 完成时设置的事件来填充这些参数）。

我不知道 Windows Mobile 平台是否支持这些功能，因此您可能需要进行一些额外的挖掘。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-11T10:00:06.437

查看[asio](http://tenermerx.com/Asio/)。它是一个用于异步 IO 的交叉兼容 C++ 库。我不确定这对服务器是否有用（我从未尝试将标准 c++ DLL 链接到 ac# 项目），但对于客户端它会很有用。

我们将它与我们的应用程序一起使用，它解决了我们大部分的 IO 并发问题。

# svn - 与 CVS 相比，使用 SVN 有什么优势？

> ID：1261
> 
> 赞同：65
> 
> 时间：2008-08-04T14:06:48.540
> 
> 标签：svn, version-control, cvs

我的公司正在使用 CVS 作为我们事实上的源代码控制标准。但是，我听到很多人说 SVN 更好。

我知道 SVN 较新，但除此之外，我不熟悉它的好处。

我正在寻找的是对这两个系统的良好、简洁的比较，并指出每个系统在 Java/Eclipse 开发环境中的优点或缺点。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2008-08-04T14:17:59.080

CVS 仅在逐个文件的基础上跟踪修改，而 SVN 将整个提交作为新修订跟踪，这意味着更容易跟踪项目的历史。加上所有现代源代码控制软件都使用修订的概念，因此从 SVN 迁移比从 CVS 迁移要容易得多。

还有原子提交问题。虽然我只遇到过一次，但在 CVS 中一起提交的 2 个人可能会相互冲突，丢失一些数据并使您的客户端处于不一致的状态。如果及早发现，这些问题并不严重，因为您的数据仍然存在于某个地方，但在压力大的环境中可能会很痛苦。

最后，围绕 CVS 开发的工具已经不多了。虽然像 Git 或 Mercurial 这样的新工具和新工具肯定还缺乏工具，但 SVN 在任何系统上都有相当大的应用程序基础。

**编辑 2020**：说真的，这个答案现在已经 12 岁了。忘记 SVN，像其他人一样使用 Git！

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-08-04T14:09:54.993

众多比较之一：

[http://wiki.scummvm.org/index.php/CVS_vs_SVN](http://wiki.scummvm.org/index.php/CVS_vs_SVN)

现在这是非常特定于该项目的，但很多东西都适用。

专业颠覆：

> *   支持版本化重命名/移动（CVS 不可能）：Fingolfin、Ender
> *   原生支持目录：可以删除它们，并且它们是版本化的：Fingolfin、Ender
> *   文件属性是版本化的；不再有“可执行位”地狱：Fingolfin
> *   总体修订号使构建版本控制和回归测试更加容易：Ender，Fingolfin
> *   原子提交：Fingolfin
> *   直观的（基于目录的）分支和标记：Fingolfin
> *   更简单的钩子脚本（提交前/提交后等）：SumthinWicked（我在提交后将它用于 Doxygen）
> *   防止意外提交冲突文件：Salty-horse、Fingolfin
> *   支持自定义 'diff' 命令：Fingolfin
> *   离线差异，它们是即时的：sev

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-08-04T14:35:12.277

SVN 与 CVS 相比有 3 个主要优势

*   它更快
*   支持二进制文件的版本控制
*   并添加事务提交（全有或全无）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-08-04T14:14:14.877

Subversion 书有[一个附录](http://svnbook.red-bean.com/en/1.4/svn.forcvs.html)，详细说明了与 CVS 的重要区别，它可以帮助您做出决定。这两种方法或多或少是相同的想法，但 SVN 是专门为修复 CVS 中长期存在的缺陷而设计的，因此，至少在理论上，SVN 将永远是更好的选择。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-08-18T17:04:41.977

我将支持 Eridius 对 Git 的建议，但我会将其扩展到其他 DRCS（分布式修订控制系统），例如[Mercurial](http://www.selenic.com/mercurial/wiki/)和[bazaar](http://bazaar-vcs.org/)。

这些产品是相当新的产品，目前与它们的工具和集成水平似乎很低（基于我最初的研究）。我会说它们最适合那里的电力开发人员（以及这里;-)）。

另一方面，CVS 目前没有为您做什么**？**从您最初的问题来看，您实际上并没有任何问题，“CVS 很烂，我可以用什么来代替？”

您必须权衡任何潜在迁移的成本与收益。对于一个现有的项目，我认为这很难证明是合理的。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-08-18T17:22:05.733

不可忽视的一件事是生态系统。我在一家 CVSNT 商店工作，我发现越来越多的开源工具默认支持 SubVersion。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-18T16:22:00.097

顺便说一句：CVSNT 支持原子提交

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-04T17:44:16.510

作为一个正在 CVS 和 SVN 之间切换的人（最初我们用 cvs2svn 切换了我们所有的项目，然后决定在新项目上只使用 svn 进行转换），这里是我们遇到的一些问题。

*   合并和分支是非常不同的，如果你经常分支和合并，除非你的服务器上运行了 SVN 1.5，否则必须知道你何时分支（这在 Tortoise SVN 对话框中不是很清楚）。Michael 说分支和合并是直观的，我认为在使用 CVS 10 年后，它不是。
*   如果您在 Linux 上运行 SVN 服务器，可能很难让您的 SA 迁移到 svn 1.5，因为默认安装 1.4.x。
*   在 TortoiseSVN 中合并冲突并不像在 TortoiseCVS 中那样容易或清晰（至少对我和我的同事来说）。三窗格方法需要一些时间来适应，而 WinMerge（我的首选合并工具）不会进行三窗格合并。
*   当心：我读过的许多在线教程和杂志文章显然没有分支和合并，您应该将您的主存储库设置为[https://svn.yoursvnserver.com/repos/YourProject/Trunk](https://svn.yoursvnserver.com/repos/YourProject/Trunk)并在[https:// /svn.yoursvnserver.com/repos/YourProject/Branches/BranchX](https://svn.yoursvnserver.com/repos/YourProject/Branches/BranchX)。如果你在错误的地方开始你的回购，你可以清理，但这会导致混乱。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-06T23:09:43.920

你应该看看[Git](http://git-scm.com)而不是 SVN。这是一款速度极快且功能强大的 DVCS。它不像 SVN 那样用户友好，但在这方面正在改进，而且学习起来并不*难*。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-07-17T07:19:01.830

CVS（并发版本系统）和 SVN（SubVersioN）是两个版本控制文件系统，在单个项目上进行协作的团队普遍使用。这些系统允许协作者跟踪所做的更改并知道谁在开发哪个以及是否应将分支应用于主干。CVS 是两者中较老的一个，它一直是很多人的标准协作工具。SVN 更新很多，它引入了很多改进来满足大多数人的需求。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-08T16:19:04.527

您也可以选择仅将最新代码从 CVS 迁移到 SVN 并冻结您当前的 CVS 存储库。这将使迁移更容易，您还可以在旧的 CVS 存储库中构建旧版本。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-09-18T14:01:16.107

好吧，我觉得有几件事让 svn 很棒。

1.  SVN-Altassian 坩埚组合是一种优越得多的审查和质量检查方法
2.  更好地管理冲突和合并
3.  进行结帐、执行提交等显然更快。
4.  原子提交问题 - 在 CVS 中一起提交的 2 个人可能会相互冲突，丢失一些数据并使您的代码库处于不一致的状态

使用 cvs2svn 可以在几个小时内轻松完成迁移。

# mysql - 在性能开始下降之前 MySQL 数据库可以有多大

> ID：1276
> 
> 赞同：327
> 
> 时间：2008-08-04T14:31:11.410
> 
> 标签：mysql, database, database-performance

MySQL 数据库从什么时候开始性能下降？

*   物理数据库大小重要吗？
*   记录数量重要吗？
*   性能下降是线性的还是指数的？

我有一个我认为是大型数据库的数据库，大约有 1500 万条记录，占用了将近 2GB 的空间。基于这些数字，我是否有动力清理数据，或者我是否可以安全地让它继续扩展几年？

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2008-08-04T15:26:55.807

物理数据库大小无关紧要。记录的数量无关紧要。

以我的经验，您将遇到的最大问题不是大小，而是您一次可以处理的查询数量。很可能您将不得不迁移到主/从配置，以便读取查询可以针对从属运行，而写入查询可以针对主控运行。但是，如果您还没有为此做好准备，您可以随时调整您正在运行的查询的索引以加快响应时间。此外，您可以对 Linux 中的网络堆栈和内核进行大量调整，这将有所帮助。

我的内存容量高达 10GB，连接数量适中，它处理的请求很好。

我将首先关注您的索引，然后让服务器管理员查看您的操作系统，如果这一切都没有帮助，那么可能是时候实施主/从配置了。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2008-08-04T18:44:15.690

一般来说，这是一个非常微妙的问题，而不是微不足道的。我鼓励您阅读[mysqlperformanceblog.com](http://mysqlperformanceblog.com)和[High Performance MySQL](https://rads.stackoverflow.com/amzn/click/com/0596101716)。我真的认为对此没有一般性的答案。

我正在开发一个项目，该项目有一个 MySQL 数据库，其中包含近 1TB 的数据。最重要的可扩展性因素是 RAM。如果您的表的索引适合内存并且您的查询经过高度优化，那么您可以使用普通机器处理合理数量的请求。

记录的数量确实很重要，具体取决于您的表格的外观。有很多 varchar 字段或只有几个 int 或 long 是不同的。

数据库的物理大小也很重要：例如，考虑备份。根据您的引擎，您的物理数据库文件会增长，但不会缩小，例如使用 innodb。所以删除很多行，无助于缩小你的物理文件。

这个问题有很多，而且在很多情况下，魔鬼在细节中。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2012-01-26T10:33:01.050

数据库大小**确实很重要**。如果您有多个表包含超过一百万条记录，那么性能确实开始下降。记录的数量当然会影响性能：[MySQL 对于大型表可能会很慢](http://www.mysqlperformanceblog.com/2006/06/09/why-mysql-could-be-slow-with-large-tables/)。如果您达到一百万条记录，如果索引设置不正确（例如，“WHERE 语句”或连接中的“ON 条件”中的字段没有索引），则会出现性能问题。如果你达到 1000 万条记录，即使你的所有索引都正确，你也会开始遇到性能问题。硬件升级——增加更多内存和更多处理器能力，尤其是内存——通常至少在一定程度上通过再次提高性能来帮助减少最严重的问题。例如[Basecamp 数据库服务器的 37 个信号从 32 GB RAM 变为 128 GB RAM](http://37signals.com/svn/posts/1185-the-need-for-speed-making-basecamp-faster)。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2008-08-11T19:19:05.547

> 我会首先关注您的索引，而不是让服务器管理员查看您的操作系统，如果这一切都没有帮助，那么可能是时候进行主/从配置了。

确实如此。通常有效的另一件事是减少重复使用的数据量。如果您有“旧数据”和“新数据”，并且 99% 的查询都使用新数据，只需将所有旧数据移动到另一个表 - 不要查看它；）

-> 看看[分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)。

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2017-06-30T16:25:34.353

我目前在亚马逊的云基础设施上管理一个 MySQL 数据库，该数据库已经增长到 160 GB。查询性能很好。已成为噩梦的是备份、恢复、添加从属设备或任何其他处理整个数据集，甚至是大型表上的 DDL。获得转储文件的干净导入已成为问题。为了使流程足够稳定以实现自动化，需要做出各种选择来优先考虑稳定性而不是性能。如果我们不得不使用 SQL 备份从灾难中恢复，那么我们会瘫痪好几天。

水平扩展 SQL 也非常痛苦，并且在大多数情况下会导致以您最初选择将数据放入 SQL 时可能不打算使用的方式使用它。Shards、read slaves、multi-master 等等，它们都是非常糟糕的解决方案，会增加你对 DB 所做的一切的复杂性，而且没有一个能解决问题；只是在某些方面减轻了它。我强烈建议您在开始处理这些类型的事情成为问题的大小的数据集时，考虑将您的一些数据移出 MySQL（或实际上是任何 SQL）。

更新：几年后，我们的数据集已经增长到大约 800 GiB。此外，我们有一个 200+ GiB 的表，还有一些在 50-100 GiB 范围内的表。我之前所说的一切都成立。它仍然执行得很好，但是运行完整数据集操作的问题变得更糟了。

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2010-08-05T09:03:48.627

2GB 和大约 1500 万条记录是一个非常小的数据库 - 我在 pentium III（！）上运行了更大的记录，而且一切仍然运行得很快。如果你的速度很慢，那是数据库/应用程序设计问题，而不是 mysql一。

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2008-08-06T19:53:54.580

谈论“数据库性能”是没有意义的，“查询性能”在这里是一个更好的术语。答案是：它取决于查询、它所操作的数据、索引、硬件等。您可以了解要扫描的行数以及使用 EXPLAIN 语法将使用哪些索引。

2GB 并不能真正算作“大型”数据库——它更像是一个中等大小的数据库。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2008-08-04T19:01:23.860

还要注意复杂的连接。除了交易量之外，交易复杂性也是一个重要因素。

重构繁重的查询有时会大大提高性能。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2008-08-06T04:27:52.373

我曾经被要求查看一个“停止工作”的 mysql。我发现数据库文件驻留在使用 NFS2 安装的 Network Appliance 文件管理器上，最大文件大小为 2GB。果然，停止接受事务的表在磁盘上正好有 2GB。但是关于性能曲线，我被告知它一直像冠军一样工作，直到它根本不起作用！这段经历对我来说总是一个很好的提醒，在你自然怀疑的维度之上和之下总是存在维度。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2012-12-06T05:13:30.677

需要考虑的一点也是系统的目的和日常数据。

例如，对于具有 GPS 监控汽车的系统，从前几个月的汽车位置查询数据是不相关的。

因此，可以将数据传递到其他历史表以进行可能的查询，并减少日常查询的执行时间。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2013-09-19T11:26:31.763

如果数据库设计不当，性能可能会下降几千行。

如果你有合适的索引，使用合适的引擎（不要在需要多个 DML 的地方使用 MyISAM），使用分区，根据使用情况分配正确的内存，当然还有良好的服务器配置，MySQL 甚至可以处理 TB 级的数据！

总有一些方法可以提高数据库性能。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2016-11-29T12:05:24.577

**这取决于您的查询和验证。**

例如，我使用了一个包含 100 000 种药物的表，该表有一个通用名称列，其中该表中每种药物的字符数超过 15 个。我提出了一个查询来比较两个表之间的药物通用名称。查询需要运行更多分钟。同样，如果您使用药物索引比较药物，使用 id 列（如上所述），只需几秒钟。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-06-05T10:27:47.113

数据库大小在字节和表的行数方面确实很重要。您会注意到轻量级数据库和填充 blob 的数据库之间存在巨大的性能差异。一旦我的应用程序卡住了，因为我将二进制图像放在字段中，而不是将图像保存在磁盘上的文件中，并且只将文件名放在数据库中。另一方面，迭代大量行并不是免费的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-05-25T09:18:46.853

不，这并不重要。MySQL 的速度约为每秒 700 万行。所以你可以扩展它

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-06-14T14:10:10.887

查询性能主要取决于它需要扫描的记录数，索引在其中起着很大的作用，索引数据大小与行数和索引数成正比。

带有索引字段条件和完整值的查询通常会在 1ms 内返回，但starts_with、IN、Between 显然包含条件可能需要更多时间扫描更多记录。

此外，您将面临许多 DDL 维护问题，例如 ALTER、DROP 会很慢且很难处理更多实时流量，即使添加索引或新列也是如此。

一般来说，建议将数据库集群到尽可能多的集群中（500GB 将是一个通用基准，正如其他人所说，它取决于许多因素，并且可能因用例而异），这样它可以提供更好的隔离并提供独立于规模特定集群（更适合 B2B 的情况）

# sql - 捕获 SQL 注入和其他恶意 Web 请求

> ID：1284
> 
> 赞同：24
> 
> 时间：2008-08-04T14:40:58.050
> 
> 标签：sql, xss, sql-injection

我正在寻找一种可以检测恶意请求（例如明显的 SQL 注入获取或帖子）并会立即禁止请求者的 IP 地址/添加到黑名单的工具。我知道，在理想的世界中，我们的代码应该能够处理此类请求并相应地处理它们，但是即使站点可以免受此类攻击，这种工具也有很多价值，因为它可能导致节省带宽，防止分析膨胀等。

`LAMP/.NET`理想情况下，我正在寻找比技术堆栈更高级别的跨平台 ( ) 解决方案；也许在网络服务器或硬件级别。不过，我不确定这是否存在。

无论哪种方式，我都想听听社区的反馈，以便了解我在实施和方法方面的选择。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-08-04T15:43:50.063

您几乎以错误的方式看待它，没有不了解您的应用程序方法/命名/数据/域的 3party 工具将能够完美地保护您。

像 SQL 注入预防这样的东西必须在代码中，最好由编写 SQL 的人编写，因为他们会知道这些领域应该/不应该是什么（除非你的项目有非常好的文档)

你的权利，这一切都已经完成了。您不必完全重新发明轮子，但由于每个人的车轴直径不同，您必须雕刻一个新的轮子。

这不是一个即插即用的问题，您确实必须先熟悉 SQL 注入的确切含义，然后才能阻止它。这是一个偷偷摸摸的问题，所以它需要同样偷偷摸摸的保护。

这 2 个链接教会了我更多关于该主题的基础知识，并帮助我更好地表达我未来对未回答的特定问题的查找。

*   [SQL注入](http://en.wikipedia.org/wiki/SQL_injection)
*   [SQL 注入攻击示例](http://www.unixwiz.net/techtips/sql-injection.html)

虽然这不是一个 100% 的查找器，但它会“向您展示”现有代码中存在的问题，但与 web 标准一样，一旦您通过此测试，就不要停止编码。

*   [剥削我](http://www.securitycompass.com/exploitme.shtml)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-04T15:11:16.663

通用工具的问题在于，很难提出一组只匹配真正攻击的规则。

SQL关键字都是英文单词，别忘了字符串

```
 DROP TABLE users; 
```

在表单域中是完全有效的，例如，包含一个编程问题的答案。

唯一明智的选择是在将输入传递到数据库之前对其进行清理，但仍然要传递它。否则，许多完全正常、非恶意的用户将被禁止访问您的网站。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-04T15:20:17.973

一种可能适用于某些情况的方法是采用如果您天真地使用表单数据将运行的 sql 字符串并将其传递给一些代码，该代码计算实际执行的语句数。如果它大于预期的数字，则很有可能尝试注入，特别是对于不太可能包含控制字符（如用户名）的字段。

像普通文本框这样的东西会有点困难，因为这种方法更有可能返回误报，但这至少是一个开始。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-04T15:22:04.380

需要记住的一件小事：在一些国家（即欧洲大部分地区），人们没有静态 IP 地址，因此黑名单不应该永远存在。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-05T17:38:53.840

Oracle 有一个[关于 SQL 注入的在线教程](http://st-curriculum.oracle.com/tutorial/SQLInjection/index.htm)。即使您想要一个现成的解决方案，这也可能会给您一些提示，告诉您如何更好地使用它来保护自己。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-04T15:26:05.013

现在我想一想，类似于用于阻止垃圾邮件的贝叶斯过滤器也可能工作得很好。如果您为每个字段收集一组普通文本和一组 sql 注入，您也许可以训练它来标记注入攻击。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T14:04:17.573

我的一个网站最近被 SQL 注入攻击了。它为数据库中的每个文本字段添加了一个病毒链接！解决方法是添加一些查找 SQL 关键字的代码。幸运的是，我是在 ColdFiusion 中开发的，所以代码位于我的 Application.cfm 文件中，该文件在每个网页的开头运行，它会查看所有 URL 变量。维基百科也有一些很好的链接可以提供帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-24T05:18:24.343

有趣的是，几年后谷歌是如何实现这一点的，他们一起删除了 URL，以防止 XSS 攻击和其他恶意活动

# .net - 队列的限制大小 在.NET 中？

> ID：1292
> 
> 赞同：62
> 
> 时间：2008-08-04T14:47:10.970
> 
> 标签：.net, collections, queue

我有一个 Queue<T> 对象，我已将其初始化为容量 2，但显然这只是容量，并且在我添加项目时它会不断扩展。是否已经有一个对象在达到限制时自动使项目出列，或者是创建我自己的继承类的最佳解决方案？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2008-08-04T14:57:28.767

我已经找到了我正在寻找的基本版本，它并不完美，但它会完成这项工作，直到出现更好的东西。

```
public class LimitedQueue<T> : Queue<T>
{
    public int Limit { get; set; }

    public LimitedQueue(int limit) : base(limit)
    {
        Limit = limit;
    }

    public new void Enqueue(T item)
    {
        while (Count >= Limit)
        {
            Dequeue();
        }
        base.Enqueue(item);
    }
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-10-24T13:51:56.427

我建议你拉起[C5 Library](http://www.itu.dk/research/c5)。与 SCG（System.Collections.Generic）不同，C5 被编程为接口并被设计为子类。大多数公共方法是虚拟的，并且没有一个类是密封的。这样，您就不必使用如果您`LimitedQueue<T>`被强制转换为`SCG.Queue<T>`. 使用 C5 并使用与以前几乎相同的代码，您将从`CircularQueue<T>`. `CircularQueue<T>`实际上实现了堆栈和队列，因此您几乎可以免费获得这两个选项。我在下面用一些 3.5 结构重写了它：

```
using C5;

public class LimitedQueue<T> : CircularQueue<T>
{
    public int Limit { get; set; }

    public LimitedQueue(int limit) : base(limit)
    {
        this.Limit = limit;
    }

    public override void Push(T item)
    {
        CheckLimit(false);
        base.Push(item);
    }

    public override void Enqueue(T item)
    {
        CheckLimit(true);
        base.Enqueue(item);
    }

    protected virtual void CheckLimit(bool enqueue)
    {
        while (this.Count >= this.Limit)
        {
            if (enqueue)
            {
                this.Dequeue();
            }
            else
            {
                this.Pop();
            }
        }
    }
} 
```

我认为这段代码应该完全符合您的要求。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-11-15T12:40:39.537

好吧，我希望本课程对您有所帮助：
在内部循环 FIFO 缓冲区使用具有指定大小的 Queue<T>。一旦达到缓冲区的大小，它将用新的项目替换旧项目。

注意：您不能随意删除项目。我将方法 Remove(T item) 设置为返回 false。如果您愿意，您可以修改以随机删除项目

```
public class CircularFIFO<T> : ICollection<T> , IDisposable
{
    public Queue<T> CircularBuffer;

    /// <summary>
    /// The default initial capacity.
    /// </summary>
    private int capacity = 32;

    /// <summary>
    /// Gets the actual capacity of the FIFO.
    /// </summary>
    public int Capacity
    {
        get { return capacity; }          
    }

    /// <summary>
    ///  Initialize a new instance of FIFO class that is empty and has the default initial capacity.
    /// </summary>
    public CircularFIFO()
    {            
        CircularBuffer = new Queue<T>();
    }

    /// <summary>
    /// Initialize a new instance of FIFO class that is empty and has the specified initial capacity.
    /// </summary>
    /// <param name="size"> Initial capacity of the FIFO. </param>
    public CircularFIFO(int size)
    {
        capacity = size;
        CircularBuffer = new Queue<T>(capacity);
    }

    /// <summary>
    /// Adds an item to the end of the FIFO.
    /// </summary>
    /// <param name="item"> The item to add to the end of the FIFO. </param>
    public void Add(T item)
    {
        if (this.Count >= this.Capacity)
            Remove();

        CircularBuffer.Enqueue(item);
    }

    /// <summary>
    /// Adds array of items to the end of the FIFO.
    /// </summary>
    /// <param name="item"> The array of items to add to the end of the FIFO. </param>
     public void Add(T[] item)
    { 
        int enqueuedSize = 0;
        int remainEnqueueSize = this.Capacity - this.Count;

        for (; (enqueuedSize < item.Length && enqueuedSize < remainEnqueueSize); enqueuedSize++)
            CircularBuffer.Enqueue(item[enqueuedSize]);

        if ((item.Length - enqueuedSize) != 0)
        {
            Remove((item.Length - enqueuedSize));//remaining item size

            for (; enqueuedSize < item.Length; enqueuedSize++)
                CircularBuffer.Enqueue(item[enqueuedSize]);
        }           
    }

    /// <summary>
    /// Removes and Returns an item from the FIFO.
    /// </summary>
    /// <returns> Item removed. </returns>
    public T Remove()
    {
        T removedItem = CircularBuffer.Peek();
        CircularBuffer.Dequeue();

        return removedItem;
    }

    /// <summary>
    /// Removes and Returns the array of items form the FIFO.
    /// </summary>
    /// <param name="size"> The size of item to be removed from the FIFO. </param>
    /// <returns> Removed array of items </returns>
    public T[] Remove(int size)
    {
        if (size > CircularBuffer.Count)
            size = CircularBuffer.Count;

        T[] removedItems = new T[size];

        for (int i = 0; i < size; i++)
        {
            removedItems[i] = CircularBuffer.Peek();
            CircularBuffer.Dequeue();
        }

        return removedItems;
    }

    /// <summary>
    /// Returns the item at the beginning of the FIFO with out removing it.
    /// </summary>
    /// <returns> Item Peeked. </returns>
    public T Peek()
    {
        return CircularBuffer.Peek();
    }

    /// <summary>
    /// Returns the array of item at the beginning of the FIFO with out removing it.
    /// </summary>
    /// <param name="size"> The size of the array items. </param>
    /// <returns> Array of peeked items. </returns>
    public T[] Peek(int size)
    {
        T[] arrayItems = new T[CircularBuffer.Count];
        CircularBuffer.CopyTo(arrayItems, 0);

        if (size > CircularBuffer.Count)
            size = CircularBuffer.Count;

        T[] peekedItems = new T[size];

        Array.Copy(arrayItems, 0, peekedItems, 0, size);

        return peekedItems;
    }

    /// <summary>
    /// Gets the actual number of items presented in the FIFO.
    /// </summary>
    public int Count
    {
        get
        {
            return CircularBuffer.Count;
        }
    }

    /// <summary>
    /// Removes all the contents of the FIFO.
    /// </summary>
    public void Clear()
    {
        CircularBuffer.Clear();
    }

    /// <summary>
    /// Resets and Initialize the instance of FIFO class that is empty and has the default initial capacity.
    /// </summary>
    public void Reset()
    {
        Dispose();
        CircularBuffer = new Queue<T>(capacity);
    }

    #region ICollection<T> Members

    /// <summary>
    /// Determines whether an element is in the FIFO.
    /// </summary>
    /// <param name="item"> The item to locate in the FIFO. </param>
    /// <returns></returns>
    public bool Contains(T item)
    {
        return CircularBuffer.Contains(item);
    }

    /// <summary>
    /// Copies the FIFO elements to an existing one-dimensional array. 
    /// </summary>
    /// <param name="array"> The one-dimensional array that have at list a size of the FIFO </param>
    /// <param name="arrayIndex"></param>
    public void CopyTo(T[] array, int arrayIndex)
    {
        if (array.Length >= CircularBuffer.Count)
            CircularBuffer.CopyTo(array, 0);           
    }

    public bool IsReadOnly
    {
        get { return false; }
    }

    public bool Remove(T item)
    {
        return false; 
    }

    #endregion

    #region IEnumerable<T> Members

    public IEnumerator<T> GetEnumerator()
    {
       return CircularBuffer.GetEnumerator();
    }

    #endregion

    #region IEnumerable Members

    IEnumerator IEnumerable.GetEnumerator()
    {
        return CircularBuffer.GetEnumerator();
    }

    #endregion

    #region IDisposable Members

    /// <summary>
    /// Releases all the resource used by the FIFO.
    /// </summary>
    public void Dispose()
    {          
        CircularBuffer.Clear();
        CircularBuffer = null;
        GC.Collect();
    }

    #endregion
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-05-09T20:39:16.563

### 并发解决方案

```
public class LimitedConcurrentQueue<ELEMENT> : ConcurrentQueue<ELEMENT>
{
    public readonly int Limit;

    public LimitedConcurrentQueue(int limit)
    {
        Limit = limit;
    }

    public new void Enqueue(ELEMENT element)
    {
        base.Enqueue(element);
        if (Count > Limit)
        {
            TryDequeue(out ELEMENT discard);
        }
    }
} 
```

注意：由于`Enqueue`控制元素的添加，并且一次添加一个，因此无需执行`while`for `TryDequeue`。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-08-04T14:56:49.470

您应该创建自己的类，环形缓冲区可能会满足您的需求。

.NET 中允许您指定容量的数据结构（数组除外）使用它来构建用于保存内部数据的内部数据结构。

例如，对于列表，容量用于确定内部数组的大小。当您开始向列表中添加元素时，它将开始从索引 0 开始填充此数组，当它达到您的容量时，它将容量增加到新的更高容量，并继续填充它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-08-04T14:52:40.493

为什么不直接使用大小为 2 的数组？队列应该能够动态增长和收缩。

或者围绕一个实例创建一个包装类`Queue<T>`，每次将一个`<T>`对象入队时，检查队列的大小。如果大于 2，则将第一项出列。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-01-15T05:28:40.097

如果它对任何人有用，我做了一个`LimitedStack<T>`.

```
public class LimitedStack<T>
{
    public readonly int Limit;
    private readonly List<T> _stack;

    public LimitedStack(int limit = 32)
    {
        Limit = limit;
        _stack = new List<T>(limit);
    }

    public void Push(T item)
    {
        if (_stack.Count == Limit) _stack.RemoveAt(0);
        _stack.Add(item);
    }

    public T Peek()
    {
        return _stack[_stack.Count - 1];
    }

    public void Pop()
    {
        _stack.RemoveAt(_stack.Count - 1);
    }

    public int Count
    {
        get { return _stack.Count; }
    }
} 
```

当它变得太大时，它会删除最旧的项目（堆栈底部）。

（这个问题是“C# 限制堆栈大小”的最高 Google 结果）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-30T20:48:24.267

您可以使用 a[`LinkedList<T>`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.linkedlist-1?view=netcore-3.1)并添加线程安全：

```
public class Buffer<T> : LinkedList<T>
{
    private int capacity;

    public Buffer(int capacity)
    {
        this.capacity = capacity;   
    }

    public void Enqueue(T item)
    {
        // todo: add synchronization mechanism
        if (Count == capacity) RemoveLast();
        AddFirst(item);
    }

    public T Dequeue()
    {
        // todo: add synchronization mechanism
        var last = Last.Value;
        RemoveLast();
        return last;
    }
} 
```

需要注意的一点是，在此示例中，默认枚举顺序将是 LIFO。但如有必要，可以覆盖它。

# .net - nAnt 是否仍然支持并适用于 .net 3.5/VS2008？

> ID：1300
> 
> 赞同：31
> 
> 时间：2008-08-04T14:55:04.433
> 
> 标签：.net, .net-3.5, msbuild, nant

我正在使用 MSBuild 来构建我的东西。我想通过 Build Server 使用 CruiseControl.net。

现在，CCNET 经常引用 nAnt，但看起来 ccnet 似乎可以完成 nant 通过项目配置和 msbuild 可以完成的大部分工作。此外，nAnt 似乎有点不受支持，现在已经有将近一年的 Beta 版本。

简而言之：我实际上对 MSBuild 很满意（特别是因为它是“官方”编译器前端），对 nAnt 有点不舒服，但我不想过早判断。

在 MSBuild 上使用 nAnt 的原因是什么？尤其是 ccnet，它在功能方面似乎与 nant 有一些重叠（并添加了与自动构建相关的东西）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-08-04T22:52:31.677

如果您对 MSBuild 非常满意，那么我会坚持使用 MSBuild。这可能是您首先学习的工具是您更喜欢的工具的情况之一。我从 NAnt 开始，不太习惯 MSBuild。我敢肯定他们都会在相当长的一段时间内出现。

两者之间存在一些根本差异，[一些 NAnt 粉丝和 Microsoftie 之间的对话](http://forums.msdn.microsoft.com/en-US/msbuild/thread/994761a3-ea9d-40c7-8d4f-4c208b2023f6/)可能最能突出显示。

有趣的是，[Jeremy Miller](http://codebetter.com/blogs/jeremy.miller/default.aspx)去年 [在他的博客](http://codebetter.com/blogs/jeremy.miller/archive/2007/09/20/is-there-a-good-reason-to-switch-to-msbuild.aspx)上提出了完全相反的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-04T15:12:37.630

在我看来，这更多是个人喜好的问题。nAnt 是一个很棒的框架，MSBuild 几乎同样强大。凭借轻松开发自定义任务（在两个框架中）的能力，您几乎可以完成任何您需要做的事情。

我无法回答您问题的“仍受支持”部分，但我会说如果您已经对 nAnt 感到满意，那么它可能是可行的。如果您（或您小组中的某个人）熟悉 MSBuild，那么这也是一个不错的选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-04T15:52:42.290

如果您已经有一堆与 nAnt 一起使用的自定义任务，请坚持使用它——您不会从 MSBuild 获得太多收益。也就是说，nAnt 似乎没有什么可以做，而 MSBuild 不能在其核心。两者都可以调用外部工具，都可以运行基于 .Net 的自定义任务，并且都有大量的社区任务。

我们在这里使用 MSBuild 的原因与您相同 - 它现在是 VS 的默认构建系统，我们无需担心任何特定于 nAnt 的东西。

MSBuildCommunityTasks是一个很好的第三方任务库，它涵盖了我在 nAnt 中做过的大部分自定义内容，包括 VSS 和 Subversion 支持[。](http://msbuildtasks.tigris.org/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-29T04:23:19.820

CC.NET 只是构建服务器技术，而不是构建脚本技术。我们在工作中使用 CC.NET 非常成功地调用 MSBuild 构建脚本，没有任何问题。

NAnt 是一种较老且更成熟的构建脚本语言，但它们的工作方式相似。我在 NAnt 中可以做的事情很少，而在 MSBuild 中我也做不到，所以这真的归结为你更喜欢哪一个。就 NAnt 的活跃程度而言，不要以最后一次发布的时间为准……而是以最后一次夜间构建的时间为准。NAnt 在发布之间往往会持续很长时间，但每晚构建通常非常稳定。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-04T15:37:31.197

老实说，这取决于什么更适合您的环境。如果你使用很多非微软工具，nunit、ccnet、ncover。您可能会在 nant 中找到更好的支持。或者，如果您使用 MSTest、TFSBuild，您可能会发现 MSBuild 是一个更好的环境。我会同时学习并使用哪个更适合您的环境。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-04T20:52:25.603

就像很多人已经指出的那样，这里的答案是“视情况而定”。在 NAnt中有一些类似*重复操作*的东西更简单、更清晰。有关此问题的讨论，请参阅[MSDN 论坛](http://forums.msdn.microsoft.com/en-US/msbuild/thread/417329cb-a6f6-45dd-9a56-98bb4aee74f9)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-29T14:00:55.097

我发现您也可以使用混合方法，尤其是在大型项目中。当开发新组件时，我们的许多 nant 脚本都被转换为 msbuild。两者都支持相同的主要功能，并且如果您发现其中一个本地支持但另一个不支持的任务，则可以相互调用。

对于从 MSBuild 开始的新 .NET 开发，可以为您节省大量时间，因为它可以直接运行解决方案文件。从主编译扩展以执行其他任务（源代码控制、部署等）效果很好。

# c# - 如何检查文件锁定？

> ID：1304
> 
> 赞同：259
> 
> 时间：2008-08-04T14:56:57.490
> 
> 标签：c#, .net, io, filelock

有没有办法在不使用 try/catch 块的情况下检查文件是否被锁定？

现在，我知道的唯一方法就是打开文件并捕获任何`System.IO.IOException`.

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2010-07-08T09:12:36.160

当我遇到类似的问题时，我完成了以下代码：

```
public class FileManager
{
    private string _fileName;

    private int _numberOfTries;

    private int _timeIntervalBetweenTries;

    private FileStream GetStream(FileAccess fileAccess)
    {
        var tries = 0;
        while (true)
        {
            try
            {
                return File.Open(_fileName, FileMode.Open, fileAccess, Fileshare.None); 
            }
            catch (IOException e)
            {
                if (!IsFileLocked(e))
                    throw;
                if (++tries > _numberOfTries)
                    throw new MyCustomException("The file is locked too long: " + e.Message, e);
                Thread.Sleep(_timeIntervalBetweenTries);
            }
        }
    }

    private static bool IsFileLocked(IOException exception)
    {
        int errorCode = Marshal.GetHRForException(exception) & ((1 << 16) - 1);
        return errorCode == 32 || errorCode == 33;
    }

    // other code

} 
```

* * *

## 回答 #2

> 赞同：153
> 
> 时间：2013-12-16T23:47:30.900

**其他答案依赖于旧信息。这提供了一个更好的解决方案。**

很久以前，不可能可靠地获取锁定文件的进程列表，因为 Windows 根本不跟踪该信息。为了支持[Restart Manager API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373656%28v=vs.85%29.aspx)，现在跟踪该信息。重新启动管理器 API 从 Windows Vista 和 Windows Server 2008 开始可用（[重新启动管理器：运行时要求](https://msdn.microsoft.com/en-us/library/windows/desktop/cc948910(v=vs.85).aspx)）。

`List<Process>`我将获取文件路径并返回锁定该文件的所有进程的代码放在一起。

```
static public class FileUtil
{
    [StructLayout(LayoutKind.Sequential)]
    struct RM_UNIQUE_PROCESS
    {
        public int dwProcessId;
        public System.Runtime.InteropServices.ComTypes.FILETIME ProcessStartTime;
    }

    const int RmRebootReasonNone = 0;
    const int CCH_RM_MAX_APP_NAME = 255;
    const int CCH_RM_MAX_SVC_NAME = 63;

    enum RM_APP_TYPE
    {
        RmUnknownApp = 0,
        RmMainWindow = 1,
        RmOtherWindow = 2,
        RmService = 3,
        RmExplorer = 4,
        RmConsole = 5,
        RmCritical = 1000
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    struct RM_PROCESS_INFO
    {
        public RM_UNIQUE_PROCESS Process;

        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = CCH_RM_MAX_APP_NAME + 1)]
        public string strAppName;

        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = CCH_RM_MAX_SVC_NAME + 1)]
        public string strServiceShortName;

        public RM_APP_TYPE ApplicationType;
        public uint AppStatus;
        public uint TSSessionId;
        [MarshalAs(UnmanagedType.Bool)]
        public bool bRestartable;
    }

    [DllImport("rstrtmgr.dll", CharSet = CharSet.Unicode)]
    static extern int RmRegisterResources(uint pSessionHandle,
                                          UInt32 nFiles,
                                          string[] rgsFilenames,
                                          UInt32 nApplications,
                                          [In] RM_UNIQUE_PROCESS[] rgApplications,
                                          UInt32 nServices,
                                          string[] rgsServiceNames);

    [DllImport("rstrtmgr.dll", CharSet = CharSet.Auto)]
    static extern int RmStartSession(out uint pSessionHandle, int dwSessionFlags, string strSessionKey);

    [DllImport("rstrtmgr.dll")]
    static extern int RmEndSession(uint pSessionHandle);

    [DllImport("rstrtmgr.dll")]
    static extern int RmGetList(uint dwSessionHandle,
                                out uint pnProcInfoNeeded,
                                ref uint pnProcInfo,
                                [In, Out] RM_PROCESS_INFO[] rgAffectedApps,
                                ref uint lpdwRebootReasons);

    /// <summary>
    /// Find out what process(es) have a lock on the specified file.
    /// </summary>
    /// <param name="path">Path of the file.</param>
    /// <returns>Processes locking the file</returns>
    /// <remarks>See also:
    /// http://msdn.microsoft.com/en-us/library/windows/desktop/aa373661(v=vs.85).aspx
    /// http://wyupdate.googlecode.com/svn-history/r401/trunk/frmFilesInUse.cs (no copyright in code at time of viewing)
    /// 
    /// </remarks>
    static public List<Process> WhoIsLocking(string path)
    {
        uint handle;
        string key = Guid.NewGuid().ToString();
        List<Process> processes = new List<Process>();

        int res = RmStartSession(out handle, 0, key);

        if (res != 0)
            throw new Exception("Could not begin restart session.  Unable to determine file locker.");

        try
        {
            const int ERROR_MORE_DATA = 234;
            uint pnProcInfoNeeded = 0,
                 pnProcInfo = 0,
                 lpdwRebootReasons = RmRebootReasonNone;

            string[] resources = new string[] { path }; // Just checking on one resource.

            res = RmRegisterResources(handle, (uint)resources.Length, resources, 0, null, 0, null);

            if (res != 0) 
                throw new Exception("Could not register resource.");                                    

            //Note: there's a race condition here -- the first call to RmGetList() returns
            //      the total number of process. However, when we call RmGetList() again to get
            //      the actual processes this number may have increased.
            res = RmGetList(handle, out pnProcInfoNeeded, ref pnProcInfo, null, ref lpdwRebootReasons);

            if (res == ERROR_MORE_DATA)
            {
                // Create an array to store the process results
                RM_PROCESS_INFO[] processInfo = new RM_PROCESS_INFO[pnProcInfoNeeded];
                pnProcInfo = pnProcInfoNeeded;

                // Get the list
                res = RmGetList(handle, out pnProcInfoNeeded, ref pnProcInfo, processInfo, ref lpdwRebootReasons);

                if (res == 0)
                {
                    processes = new List<Process>((int)pnProcInfo);

                    // Enumerate all of the results and add them to the 
                    // list to be returned
                    for (int i = 0; i < pnProcInfo; i++)
                    {
                        try
                        {
                            processes.Add(Process.GetProcessById(processInfo[i].Process.dwProcessId));
                        }
                        // catch the error -- in case the process is no longer running
                        catch (ArgumentException) { }
                    }
                }
                else
                    throw new Exception("Could not list processes locking resource.");                    
            }
            else if (res != 0)
                throw new Exception("Could not list processes locking resource. Failed to get size of result.");                    
        }
        finally
        {
            RmEndSession(handle);
        }

        return processes;
    }
} 
```

**更新**

这是另一个关于如何使用 Restart Manager API 的[示例代码讨论。](https://blogs.msdn.microsoft.com/oldnewthing/20120217-00/?p=8283)

* * *

## 回答 #3

> 赞同：132
> 
> 时间：2008-08-04T14:59:24.410

不，不幸的是，如果您考虑一下，无论如何该信息将毫无价值，因为文件可能会在下一秒被锁定（阅读：短时间跨度）。

为什么特别需要知道文件是否被锁定？知道这可能会给我们一些其他的方式来给你很好的建议。

如果您的代码如下所示：

```
if not locked then
    open and update file 
```

然后在这两行之间，另一个进程可以轻松地锁定文件，给你同样的问题，你试图避免开始：异常。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2011-04-01T11:19:20.407

您还可以检查是否有任何进程正在使用此文件，并显示您必须关闭才能继续的程序列表，就像安装程序一样。

```
public static string GetFileProcessName(string filePath)
{
    Process[] procs = Process.GetProcesses();
    string fileName = Path.GetFileName(filePath);

    foreach (Process proc in procs)
    {
        if (proc.MainWindowHandle != new IntPtr(0) && !proc.HasExited)
        {
            ProcessModule[] arr = new ProcessModule[proc.Modules.Count];

            foreach (ProcessModule pm in proc.Modules)
            {
                if (pm.ModuleName == fileName)
                    return proc.ProcessName;
            }
        }
    }

    return null;
} 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2010-03-08T17:09:15.270

您可以使用 .NET FileStream 类方法 Lock 和 Unlock，而不是使用互操作：

FileStream.Lock [http://msdn.microsoft.com/en-us/library/system.io.filestream.lock.aspx](http://msdn.microsoft.com/en-us/library/system.io.filestream.lock.aspx)

FileStream.Unlock [http://msdn.microsoft.com/en-us/library/system.io.filestream.unlock.aspx](http://msdn.microsoft.com/en-us/library/system.io.filestream.unlock.aspx)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-01-03T03:41:42.223

DixonD 出色答案的变体（上图）。

```
public static bool TryOpen(string path,
                           FileMode fileMode,
                           FileAccess fileAccess,
                           FileShare fileShare,
                           TimeSpan timeout,
                           out Stream stream)
{
    var endTime = DateTime.Now + timeout;

    while (DateTime.Now < endTime)
    {
        if (TryOpen(path, fileMode, fileAccess, fileShare, out stream))
            return true;
    }

    stream = null;
    return false;
}

public static bool TryOpen(string path,
                           FileMode fileMode,
                           FileAccess fileAccess,
                           FileShare fileShare,
                           out Stream stream)
{
    try
    {
        stream = File.Open(path, fileMode, fileAccess, fileShare);
        return true;
    }
    catch (IOException e)
    {
        if (!FileIsLocked(e))
            throw;

        stream = null;
        return false;
    }
}

private const uint HRFileLocked = 0x80070020;
private const uint HRPortionOfFileLocked = 0x80070021;

private static bool FileIsLocked(IOException ioException)
{
    var errorCode = (uint)Marshal.GetHRForException(ioException);
    return errorCode == HRFileLocked || errorCode == HRPortionOfFileLocked;
} 
```

用法：

```
private void Sample(string filePath)
{
    Stream stream = null;

    try
    {
        var timeOut = TimeSpan.FromSeconds(1);

        if (!TryOpen(filePath,
                     FileMode.Open,
                     FileAccess.ReadWrite,
                     FileShare.ReadWrite,
                     timeOut,
                     out stream))
            return;

        // Use stream...
    }
    finally
    {
        if (stream != null)
            stream.Close();
    }
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-09-24T18:34:18.777

这是 DixonD 代码的变体，它增加了等待文件解锁的秒数，然后重试：

```
public bool IsFileLocked(string filePath, int secondsToWait)
{
    bool isLocked = true;
    int i = 0;

    while (isLocked &&  ((i < secondsToWait) || (secondsToWait == 0)))
    {
        try
        {
            using (File.Open(filePath, FileMode.Open)) { }
            return false;
        }
        catch (IOException e)
        {
            var errorCode = Marshal.GetHRForException(e) & ((1 << 16) - 1);
            isLocked = errorCode == 32 || errorCode == 33;
            i++;

            if (secondsToWait !=0)
                new System.Threading.ManualResetEvent(false).WaitOne(1000);
        }
    }

    return isLocked;
}

if (!IsFileLocked(file, 10))
{
    ...
}
else
{
    throw new Exception(...);
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-07-24T06:42:10.800

您可以通过互操作在您感兴趣的文件区域上调用[LockFile](http://msdn.microsoft.com/en-us/library/aa365202%28VS.85%29.aspx)。这不会引发异常，如果成功，您将锁定文件的该部分（由您的进程持有），该锁定将是一直保留到您调用[UnlockFile](http://msdn.microsoft.com/en-us/library/aa365715%28VS.85%29.aspx)或您的进程终止。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-08-17T18:17:12.937

> 然后在这两行之间，另一个进程可以轻松地锁定文件，给你同样的问题，你试图避免开始：异常。

但是，通过这种方式，您会知道问题是暂时的，并稍后重试。（例如，您可以编写一个线程，如果在尝试写入时遇到锁，则继续重试直到锁消失。）

另一方面，IOException 本身并不够具体，以至于锁定是导致 IO 失败的原因。可能有一些不是暂时的原因。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-03-09T12:54:57.213

您可以通过自己尝试读取或锁定文件来查看文件是否被锁定。

[请在此处查看我的答案以获取更多信息](https://stackoverflow.com/questions/203837/can-i-simply-read-a-file-that-is-in-use/203839#203839)。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-23T14:24:09.253

同样的事情，但在 Powershell 中

```
function Test-FileOpen
{
    Param
    ([string]$FileToOpen)
    try
    {
        $openFile =([system.io.file]::Open($FileToOpen,[system.io.filemode]::Open))
        $open =$true
        $openFile.close()
    }
    catch
    {
        $open = $false
    }
    $open
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2013-12-16T19:19:18.057

我最终做的是：

```
internal void LoadExternalData() {
    FileStream file;

    if (TryOpenRead("filepath/filename", 5, out file)) {
        using (file)
        using (StreamReader reader = new StreamReader(file)) {
         // do something 
        }
    }
}

internal bool TryOpenRead(string path, int timeout, out FileStream file) {
    bool isLocked = true;
    bool condition = true;

    do {
        try {
            file = File.OpenRead(path);
            return true;
        }
        catch (IOException e) {
            var errorCode = Marshal.GetHRForException(e) & ((1 << 16) - 1);
            isLocked = errorCode == 32 || errorCode == 33;
            condition = (isLocked && timeout > 0);

            if (condition) {
                // we only wait if the file is locked. If the exception is of any other type, there's no point on keep trying. just return false and null;
                timeout--;
                new System.Threading.ManualResetEvent(false).WaitOne(1000);
            }
        }
    }
    while (condition);

    file = null;
    return false;
} 
```

# ruby - 如何在 Ruby 中使用 (n) 诅咒？

> ID：1306
> 
> 赞同：46
> 
> 时间：2008-08-04T14:57:59.547
> 
> 标签：ruby, unix, curses

我想创建一个进度条来指示批处理作业的状态`Ruby`。

我已经阅读了一些关于使用*(n)curses的*[教程](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/ "NCURSES 编程指南")/[库](http://ncurses-ruby.berlios.de/ "ncurses-红宝石")，其中没有一个特别有助于解释如何在终端中创建*“动画”*进度条或使用 curses with 。**`Ruby`**

 **我已经知道使用单独的线程来监视给定作业的进度，我只是不确定如何继续绘制进度条。

* * *

**更新**

[ProgressBar](http://0xcc.net/ruby-progressbar/ "红宝石进度条")类非常简单，完美地解决了我的问题。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-08-04T15:11:19.770

您也许可以从[Ruby/ProgressBar 库](http://0xcc.net/ruby-progressbar/ "红宝石/进度条")中获得一些实现想法，该库会生成文本进度条。几个月前我偶然发现了它，但没有使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-04T16:18:32.770

就我个人而言，我认为在这种情况下，诅咒是矫枉过正的。虽然 curses 库很好（我自己经常使用它），但每次我 12 个月不需要它时都要重新学习 PITA，这一定是界面设计糟糕的标志。

如果由于某种原因你无法继续使用[进度条库，乔伊建议](https://stackoverflow.com/questions/1306/#1318)你自己动手，并在一个非常免费的许可证下发布它，以获得即时的荣誉:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-12-08T21:29:29.487

很晚的答案，很抱歉自我提升，但我创建了[库](https://rubygems.org/gems/progress)来显示终端的进展。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-04T16:03:22.720

在 Windows 上，curses 开箱即用，ncurses 没有，对于进度条来说，curses 应该足够了。所以，使用curses而不是ncurses。

此外，curses 和 ncurses 都是围绕 c 库的薄薄的包装器——这意味着您实际上并不需要特定于 Ruby 的教程。

但是，在[PickAxe 网站上，](http://www.pragprog.com/titles/ruby/source_code)您可以下载本书的所有代码示例。文件“ex1423.rb”包含一个可播放 Pong 的 curses 演示 - 它应该为您提供足够的材料来帮助您前进。**

# c - Rockbox 音频格式

> ID：1311
> 
> 赞同：21
> 
> 时间：2008-08-04T15:02:41.893
> 
> 标签：c, audio, rockbox

你如何指定回调`rb->pcm_play_data()`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-11-14T18:34:34.470

回调函数的原型如下：

```
static void my_audio_callback(const void **start, size_t *size); 
```

`*start`应该设置为指向存储 PCM 数据的内存区域（16 位有符号整数），并且`*size`应该是该区域的大小。

一旦你写了你的回调，打电话`rb->pcm_play_data()`，享受音乐！

```
rb->pcm_play_data(my_audio_callback, NULL, NULL, 0); 
```

一个非常晚的编辑：自动的格式是 16 位有符号整数 PCM，带有立体声交错（偶数索引：左声道，奇数：右声道）。

# language-agnostic - 跟进：找到颜色之间的准确“距离”

> ID：1313
> 
> 赞同：50
> 
> 时间：2008-08-04T15:08:13.143
> 
> 标签：language-agnostic, colors

[原始问题](https://stackoverflow.com/questions/180/function-for-creating-color-wheels)

我正在寻找一个试图量化两种颜色“遥远”（或不同）的功能。这个问题实际上分为两部分：

1.  什么色彩空间最能代表人类视觉？
2.  该空间中的什么距离度量最能代表人类视觉（欧几里得？）

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2008-09-16T16:08:42.313

转换为 La*b*（也就是简单的“Lab”，您还会看到对“CIELAB”的引用）。一个很好的快速测量色差的方法是

> (L1-L2)^2 + (a1-a2)^2 + (b1-b2)^2

色彩科学家还有其他更精细的测量方法，这可能不值得费心，这取决于您正在做的事情所需的准确性。

`a`和`b`值以类似于锥体工作方式的方式表示相反的颜色，并且可能是负数或正数。中性色——白色，灰色是`a=0`，`b=0`。这`L`是以特定方式定义的亮度，从零（纯黑暗）到其他任何值。

粗略的解释：>> 给定一种颜色，我们的眼睛可以区分两种广泛的波长范围——蓝色和更长的波长。然后，由于最近的基因突变，较长波长的锥体分成两部分，为我们区分了红色和绿色。

顺便说一句，如果你的职业生涯超越那些只知道“RGB”或“CMYK”对设备非常有用但对严肃的感知工作却很糟糕的色彩穴居人同事，那将是一件好事。我曾为对这些东西一无所知的成像科学家工作过！

如需更多有趣的色差理论阅读，请尝试：

*   [http://white.stanford.edu/~brian/scielab/introduction.html](http://white.stanford.edu/~brian/scielab/introduction.html)和信息
*   和一般色彩理论的链接，从[http://www.efg2.com/Lab/Library/Color/](http://www.efg2.com/Lab/Library/Color/)开始的网上冲浪和
*   [http://www.poynton.com/Poynton-color.html](http://www.poynton.com/Poynton-color.html)

有关 Lab 的更多详细信息，请访问[http://en.kioskea.net/video/cie-lab.php3](http://en.kioskea.net/video/cie-lab.php3)我目前无法找到实际上包含转换公式的非丑陋页面，但我相信有人会编辑这个答案包括一个。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-17T01:39:38.420

由于上面的 cmetric.htm 链接对我来说失败了，以及我发现的许多其他颜色距离实现（经过很长的旅程......）如何计算最佳颜色距离，以及......最科学准确的一个：**deltaE**和从 2使用 OpenCV 的 RGB (!) 值：

这需要 3 次色彩空间转换 + 从 javascript ( [http://svn.int64.org/viewvc/int64/colors/colors.js](http://svn.int64.org/viewvc/int64/colors/colors.js) ) 到 C++的一些代码转换

最后是代码（似乎开箱即用，希望没有人在那里发现严重的错误......但经过多次测试后似乎很好）

```
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/photo/photo.hpp>
#include <math.h>

using namespace cv;
using namespace std;

#define REF_X 95.047; // Observer= 2°, Illuminant= D65
#define REF_Y 100.000;
#define REF_Z 108.883;

void bgr2xyz( const Vec3b& BGR, Vec3d& XYZ );
void xyz2lab( const Vec3d& XYZ, Vec3d& Lab );
void lab2lch( const Vec3d& Lab, Vec3d& LCH );
double deltaE2000( const Vec3b& bgr1, const Vec3b& bgr2 );
double deltaE2000( const Vec3d& lch1, const Vec3d& lch2 );

void bgr2xyz( const Vec3b& BGR, Vec3d& XYZ )
{
    double r = (double)BGR[2] / 255.0;
    double g = (double)BGR[1] / 255.0;
    double b = (double)BGR[0] / 255.0;
    if( r > 0.04045 )
        r = pow( ( r + 0.055 ) / 1.055, 2.4 );
    else
        r = r / 12.92;
    if( g > 0.04045 )
        g = pow( ( g + 0.055 ) / 1.055, 2.4 );
    else
        g = g / 12.92;
    if( b > 0.04045 )
        b = pow( ( b + 0.055 ) / 1.055, 2.4 );
    else
        b = b / 12.92;
    r *= 100.0;
    g *= 100.0;
    b *= 100.0;
    XYZ[0] = r * 0.4124 + g * 0.3576 + b * 0.1805;
    XYZ[1] = r * 0.2126 + g * 0.7152 + b * 0.0722;
    XYZ[2] = r * 0.0193 + g * 0.1192 + b * 0.9505;
}

void xyz2lab( const Vec3d& XYZ, Vec3d& Lab )
{
    double x = XYZ[0] / REF_X;
    double y = XYZ[1] / REF_X;
    double z = XYZ[2] / REF_X;
    if( x > 0.008856 )
        x = pow( x , .3333333333 );
    else
        x = ( 7.787 * x ) + ( 16.0 / 116.0 );
    if( y > 0.008856 )
        y = pow( y , .3333333333 );
    else
        y = ( 7.787 * y ) + ( 16.0 / 116.0 );
    if( z > 0.008856 )
        z = pow( z , .3333333333 );
    else
        z = ( 7.787 * z ) + ( 16.0 / 116.0 );
    Lab[0] = ( 116.0 * y ) - 16.0;
    Lab[1] = 500.0 * ( x - y );
    Lab[2] = 200.0 * ( y - z );
}

void lab2lch( const Vec3d& Lab, Vec3d& LCH )
{
    LCH[0] = Lab[0];
    LCH[1] = sqrt( ( Lab[1] * Lab[1] ) + ( Lab[2] * Lab[2] ) );
    LCH[2] = atan2( Lab[2], Lab[1] );
}

double deltaE2000( const Vec3b& bgr1, const Vec3b& bgr2 )
{
    Vec3d xyz1, xyz2, lab1, lab2, lch1, lch2;
    bgr2xyz( bgr1, xyz1 );
    bgr2xyz( bgr2, xyz2 );
    xyz2lab( xyz1, lab1 );
    xyz2lab( xyz2, lab2 );
    lab2lch( lab1, lch1 );
    lab2lch( lab2, lch2 );
    return deltaE2000( lch1, lch2 );
}

double deltaE2000( const Vec3d& lch1, const Vec3d& lch2 )
{
    double avg_L = ( lch1[0] + lch2[0] ) * 0.5;
    double delta_L = lch2[0] - lch1[0];
    double avg_C = ( lch1[1] + lch2[1] ) * 0.5;
    double delta_C = lch1[1] - lch2[1];
    double avg_H = ( lch1[2] + lch2[2] ) * 0.5;
    if( fabs( lch1[2] - lch2[2] ) > CV_PI )
        avg_H += CV_PI;
    double delta_H = lch2[2] - lch1[2];
    if( fabs( delta_H ) > CV_PI )
    {
        if( lch2[2] <= lch1[2] )
            delta_H += CV_PI * 2.0;
        else
            delta_H -= CV_PI * 2.0;
    }

    delta_H = sqrt( lch1[1] * lch2[1] ) * sin( delta_H ) * 2.0;
    double T = 1.0 -
            0.17 * cos( avg_H - CV_PI / 6.0 ) +
            0.24 * cos( avg_H * 2.0 ) +
            0.32 * cos( avg_H * 3.0 + CV_PI / 30.0 ) -
            0.20 * cos( avg_H * 4.0 - CV_PI * 7.0 / 20.0 );
    double SL = avg_L - 50.0;
    SL *= SL;
    SL = SL * 0.015 / sqrt( SL + 20.0 ) + 1.0;
    double SC = avg_C * 0.045 + 1.0;
    double SH = avg_C * T * 0.015 + 1.0;
    double delta_Theta = avg_H / 25.0 - CV_PI * 11.0 / 180.0;
    delta_Theta = exp( delta_Theta * -delta_Theta ) * ( CV_PI / 6.0 );
    double RT = pow( avg_C, 7.0 );
    RT = sqrt( RT / ( RT + 6103515625.0 ) ) * sin( delta_Theta ) * -2.0; // 6103515625 = 25^7
    delta_L /= SL;
    delta_C /= SC;
    delta_H /= SH;
    return sqrt( delta_L * delta_L + delta_C * delta_C + delta_H * delta_H + RT * delta_C * delta_H );
} 
```

希望它可以帮助某人:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-04T15:16:11.537

HSL 和 HSV 更适合人类的颜色感知。根据[维基百科](http://en.wikipedia.org/wiki/HSL_and_HSV)：

> 在处理艺术材料、数字化图像或其他媒体时，有时最好使用 HSV 或 HSL 颜色模型，而不是 RGB 或 CMYK 等替代模型，因为这些模型模拟人类感知颜色的方式存在差异。RGB 和 CMYK 分别是加法和减法模型，模拟原色光或颜料（分别）在混合时组合形成新颜色的方式。

![HSV 的图形描述](../Images/cf1590bc88e7a8ed3817c5163ee8dcbe.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-04T15:14:40.277

最简单的*距离*当然是将颜色视为源自同一原点的 3d 矢量，并取其端点之间的距离。

如果需要考虑绿色在判断强度方面更突出的因素，可以权衡取值。

[ImageMagic](http://www.imagemagick.org/Usage/color/#grayscale)提供以下比例：

*   红色：0.3
*   绿色：0.6
*   蓝色：0.1

当然，像这样的值只会相对于其他颜色的其他值有意义，而不是对人类有意义的东西，所以你可以使用的值将是相似性排序。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-08-24T15:38:38.320

维基[百科关于颜色差异](http://en.wikipedia.org/wiki/Color_difference)的文章列出了许多颜色空间和距离度量，旨在与人类对颜色距离的感知一致。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-08-04T15:37:43.367

好吧，作为第一个电话点，我想说的是通用指标 HSV（色相、饱和度和值）或 HSL 比 RGB 或 CYMK 更能代表人类感知颜色的方式。请参阅[Wikipedia 上的 HSL、HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)。

我天真地想我会在 HSL 空间中为两种颜色绘制点并计算差异向量的大小。然而，这意味着亮黄色和亮绿色将被视为与绿色与深绿色一样不同。但后来许多人认为红色和粉红色是两种不同的颜色。

而且，这个参数空间中同方向的差分向量是不相等的。例如，人眼对绿色的感知比其他颜色要好得多。色调从绿色的偏移量与从红色的偏移量相同可能看起来更大。此外，饱和度从少量到零的变化是灰色和粉红色之间的差异，在其他地方，这种变化将是两种红色之间的差异。

从程序员的角度来看，您需要绘制差异向量，但需要通过比例矩阵修改，该矩阵将相应调整 HSL 空间各个区域的长度 - 这将是相当随意的，并且将基于各种颜色理论思想，但可以根据您想要应用的内容进行相当任意的调整。

更好的是，你可以看看是否有人已经在网上做过这样的事情......

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-16T16:45:50.010

作为一个色盲的人，我相信尝试增加比正常视力更多的分离是件好事。最常见的色盲形式是红/绿缺乏症。这并不意味着你看不到红色或绿色，它意味着更难看到，更难看到差异。因此，色盲者在分辨出差异之前需要更大的分离度。

# msbuild - 将 MSTest 与 CruiseControl.NET 一起使用

> ID：1314
> 
> 赞同：19
> 
> 时间：2008-08-04T15:09:07.043
> 
> 标签：msbuild, build-process, cruisecontrol.net

我们在 NUnit 和 NAnt 中使用 CruiseControl 已经有一段时间了。对于最近的一个项目，我们决定使用 Visual Studio 附带的测试框架，到目前为止它已经足够了。

我试图让解决方案在 CruiseControl 中运行。我终于让构建本身工作了；但是，尽管添加了自定义构建任务和旨在执行此操作的组件，但我无法在 CruiseControl 界面中显示任何测试。有没有人有一个明确的链接来获得这个设置的说明？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-04T15:12:13.917

不确定这是否有帮助（我发现 ccnet 文档有时有些无用）：

[将 CruiseControl.NET 与 MSTest 结合使用](http://confluence.public.thoughtworks.org/display/CCNET/Using+CruiseControl.NET+with+MSTest)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-04T15:46:42.223

CC.Net 接口是通过对您的项目的 ccnet.config 文件中指定的 XML 文件进行 XSL 转换生成的。XSL 已经为 FxCop 之类的东西编写了 - 检查服务器的 CC xsl 目录中的示例 - 编写自己的内容以添加到信息中应该不会太难 - 只需记住将测试的 XML 输出添加到主日志中。

# algorithm - 跟进：按独特性“排序”颜色

> ID：1323
> 
> 赞同：23
> 
> 时间：2008-08-04T15:14:47.517
> 
> 标签：algorithm, language-agnostic, colors

[原始问题](https://stackoverflow.com/questions/180/function-for-creating-color-wheels)

如果给你 N 个最大距离的颜色（以及一些相关的距离度量），你能想出一种方法来将这些颜色排序成某种顺序，使第一个 M 也合理地接近最大不同的集合吗？

换句话说，给定一堆不同的颜色，想出一个排序，这样我就可以从一开始就使用我需要的尽可能多的颜色，并合理地确保它们都是不同的，并且附近的颜色也非常不同（例如，蓝红色不在红蓝色旁边）。

随机化是可以的，但肯定不是最优的。

*澄清：给定一些大型且视觉上不同的颜色集（比如 256 或 1024），我想对它们进行排序，以便当我使用第一个，比如 16 种颜色时，我得到一个视觉上相对不同的颜色子集。这大致相当于说我想对这个 1024 的列表进行排序，以便单个颜色在视觉上越接近，它们在列表中的距离越远。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-04T15:38:09.887

在我看来，这听起来也像是某种*阻力图*，您可以在其中尝试绘制出阻力最小的路径。如果您反转要求，最大阻力的路径，它也许可以用来产生一个从一开始就产生最大差异的集合，并且到最后开始回到更接近其他值的值。

例如，这是一种可能做你想做的事的方法。

1.  计算从每种颜色到所有其他颜色的距离（参考[您的其他帖子）](https://stackoverflow.com/questions/1313/followup-finding-an-accurate-distance-between-colors)
2.  将每种颜色的距离相加，这可以指示*该颜色与所有其他颜色的总距离*
3.  按距离排序列表，向下

这似乎会产生一个列表，该列表以距离所有其他颜色最远的颜色开始，然后向下，接近列表末尾的颜色通常更接近其他颜色。

编辑：阅读您对我的第一篇文章的回复，关于空间细分，不完全符合上述描述，因为接近其他颜色的颜色会落在列表的底部，但假设您在某处有一组颜色，在该集群中的至少一种颜色将位于列表的开头附近，并且通常是与所有其他颜色最远的颜色。如果这是有道理的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-12T12:11:29.387

这个问题被称为颜色量化，并且有许多众所周知的算法： [http://en.wikipedia.org/wiki/Color_quantization](http://en.wikipedia.org/wiki/Color_quantization) 我知道有人实施了八叉树方法，效果很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-12T12:33:29.000

感觉对您来说似乎很重要，在这种情况下，您可能需要考虑使用感知色彩空间，例如 YUV、YCbCr 或 Lab。每次我使用它们时，它们给我的结果都比单独使用 sRGB 好得多。

与 sRGB 相互转换可能会很痛苦，但在您的情况下，它实际上可以使算法更简单，并且作为奖励，它也主要适用于色盲！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-25T08:44:06.310

N 个最远的颜色可以被认为是 3 维（颜色）空间中分布良好的一组点。如果您可以从[Halton 序列](http://en.wikipedia.org/wiki/Halton_sequence)中生成它们，那么任何前缀（前 M 个颜色）也由分布良好的点组成。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-03T20:50:02.030

您可以根据与任何索引颜色的最小距离的最大距离对候选颜色进行排序。

使用欧几里得颜色距离：

```
public double colordistance(Color color0, Color color1) {
    int c0 = color0.getRGB();
    int c1 = color1.getRGB();
    return distance(((c0>>16)&0xFF), ((c0>>8)&0xFF), (c0&0xFF), ((c1>>16)&0xFF), ((c1>>8)&0xFF), (c1&0xFF));
}

public double distance(int r1, int g1, int b1, int r2, int g2, int b2) {
    int dr = (r1 - r2);
    int dg = (g1 - g2);
    int db = (b1 - b2);
    return Math.sqrt(dr * dr + dg * dg + db * db);
} 
```

虽然你可以用你想要的任何东西替换它。它只需要一个颜色距离例程。

```
public void colordistancesort(Color[] candidateColors, Color[] indexColors) {
    double current;

    double distance[] = new double[candidateColors.length];
    for (int j = 0; j < candidateColors.length; j++) {
        distance[j] = -1;
        for (int k = 0; k < indexColors.length; k++) {
            current = colordistance(indexColors[k], candidateColors[j]);
            if ((distance[j] == -1) || (current < distance[j])) {
                distance[j] = current;
            }
        }
    }

    //just sorts.
    for (int j = 0; j < candidateColors.length; j++) {
        for (int k = j + 1; k < candidateColors.length; k++) {
            if (distance[j] > distance[k]) {
                double d = distance[k];
                distance[k] = distance[j];
                distance[j] = d;

                Color m = candidateColors[k];
                candidateColors[k] = candidateColors[j];
                candidateColors[j] = m;
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-16T17:11:04.110

如果我正确理解了这个问题，您希望在给定一些距离函数*d*的情况下获得颜色之间**平均距离最大的***M*颜色子集。

 ***换句话说，将最初的*N*个颜色集合视为一个大型的无向图，其中所有颜色都相互连接，您希望找到访问任何*M*个节点的**最长路径。**

 *恐怕解决 NP 完全图问题超出了我的范围，但您可以尝试运行一个简单的物理模拟：

1.  在色彩空间中生成*M个随机点*
2.  计算每个点之间的距离
3.  计算将其从所有其他点移开的每个点的排斥向量（使用 1 /（*距离*^ 2）作为向量的大小）
4.  将每个点的排斥向量相加
5.  根据求和的斥力向量更新每个点的位置
6.  约束任何超出范围的坐标（例如亮度变为负值或高于一）
7.  从步骤 2 开始重复，直到点稳定
8.  *对于每个点，从N*的原始集合中选择最接近的颜色

 *它远非高效，但对于小*M*而言，它可能足够高效，并且会给出接近最佳的结果。

如果您的颜色距离函数很简单，则可能有一种更确定的方式来生成最佳子集。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-21T09:29:38.157

1.  从两个列表开始。CandidateColors，最初包含您的不同颜色和 SortedColors，最初是空的。
2.  选择任何颜色并将其从 CandidateColors 中删除，然后放入 SortedColors。这是第一种颜色，也是最常见的颜色，因此是选择适合您的应用程序的颜色的好地方。
3.  对于 CandidateColors 中的每种颜色，计算其总距离。总距离是从 CandidateColor 到 SortedColors 中每种颜色的距离之和。
4.  从 CandidateColors 中删除总距离最大的颜色，并将其添加到 SortedColors 的末尾。
5.  如果 CandidateColors 不为空，请返回步骤 3。

这个贪心算法应该会给你很好的结果。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-04T15:29:49.793

你的意思是从一组 N 种颜色中，你需要选择 M 种颜色，其中 M < N，使得 M 是 M 空间中 N 种颜色的*最佳*表示？

作为一个更好的例子，将真彩色（24 位色彩空间）减少到 8 位映射色彩空间（GIF？）。

对此有量化算法，例如ImageMagic 使用的[自适应空间细分算法。](http://www.imagemagick.org/www/quantize.html)

这些算法通常不只是从源空间中挑选现有颜色，而是在目标空间中创建最接近源颜色的新颜色。作为一个简化示例，如果您在原始图像中有 3 种颜色，其中两种是红色（具有不同的强度或蓝色等），第三种是蓝色，并且需要减少到两种颜色，则目标图像可能具有红色那是原始图像中原始两个红色+蓝色的某种平均值。

如果您需要其他内容，那么我不明白您的问题:)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-04T15:31:15.500

您可以将它们拆分为 RGB HEX 格式，以便您可以将 R 与不同颜色的 R 进行比较，与 G 和 B 相同。

与 HTML 格式相同

```
XX XX XX
RR GG BB

00 00 00 = black
ff ff ff = white
ff 00 00 = red
00 ff 00 = green
00 00 ff = blue 
```

因此，您唯一需要决定的是您希望颜色有多接近，以及对于被视为不同的段而言，可接受的差异是多少。*****

# windows - 什么是比 Windows 默认更好的文件复制替代方案？

> ID：1329
> 
> 赞同：38
> 
> 时间：2008-08-04T15:20:42.683
> 
> 标签：windows, file, filesystems, utilities

我需要在我的计算机上复制数百个随机文件，并且对使用 Windows 内置的普通文件副本非常谨慎。

我不希望它挂在“你确定吗？”、“你真的确定吗？”、“即使是 zip 文件？”、“当然也不是只读文件！” 我一走开就循环。

我不希望它工作几个小时然后意外停止：“有人曾经打开过这个文件，所以我不会复制它！” 然后取消整个副本，或者直接退出，不知道做了什么，还有什么工作。

您使用过哪些文件管理程序？你推荐哪个？

这个问题与我的另一个问题有关：[如何在我较新的仅支持 SATA 的计算机上使用旧的 PATA 硬盘驱动器？](https://stackoverflow.com/questions/225/how-can-i-use-an-old-pata-hard-disk-drive-on-my-newer-sata-only-computer)

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2008-08-04T15:21:49.047

使用[Robocopy（强大的文件复制）](http://en.wikipedia.org/wiki/Robocopy)。

笔记：

在 Windows Vista 和 Server 2008 中，当您键入：

```
xcopy /? 
```

你得到：

> 注意：Xcopy 现已弃用，请使用 Robocopy。

所以开始习惯 robocopy :)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-08-04T15:28:23.527

好的旧命令行 Xcopy 怎么样？S：作为源，T：目标：

```
xcopy /K /R /E /I /S /C /H /G /X /Y s:\*.* t:\ 
```

> /K 复制属性。普通 Xcopy 将重置只读属性。
> 
> /R 覆盖只读文件。
> 
> /E 复制目录和子目录，包括空目录。
> 
> /I 如果目标不存在并且复制多个文件，则假定目标必须是一个目录。
> 
> /S 复制目录和子目录，除了空目录。
> 
> /C 即使发生错误也继续复制。
> 
> /H 也复制隐藏文件和系统文件。
> 
> /Y 禁止提示确认您要覆盖现有的目标文件。
> 
> /G 允许将加密文件复制到不支持加密的目标。
> 
> /X 复制文件审核设置（隐含 /O）。

（编辑：添加 /G 和 /X 这是几年以来的新内容）

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-08-04T15:23:08.620

您可以尝试[TeraCopy](http://www.codesector.com/teracopy.php)或[RoboCopy](http://en.wikipedia.org/wiki/Robocopy)。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-08-05T11:54:16.453

我肯定更喜欢：

1) [Teracopy](http://www.codesector.com/teracopy.asp) - 基于 GUI，替换默认的 Windows 复制/移动 UI 并将其自身添加到上下文菜单中。基本版是免费的（我猜是家庭使用）。

2) [Robocopy](http://en.wikipedia.org/wiki/Robocopy) - 基于 CLI，在编写脚本时很有用。MS 提供的免费工具，包含在 Vista/Windows 2008 中。MS Technet 也有一个用于 robocopy 的 GUI - 对于创建以后可以嵌入脚本或命令提示符的语句很有用。

PS：我知道这里已经提出了这些建议，如果可以的话，我会对它们进行投票。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-08-04T15:26:39.817

您确实需要使用文件同步工具，例如[SyncBackSE](http://www.2brightsparks.com/syncback/syncback-hub.html)、[MS SyncToy](http://www.microsoft.com/downloads/details.aspx?familyid=C26EFA36-98E0-4EE9-A7C5-98D0592D8C52&displaylang=en)，甚至是[WinMerge](http://winmerge.org/)之类的工具。我更喜欢 SyncBack，因为它允许您为几乎所有可能的情况和冲突设置非常明确的规则，至少比其他两种情况更是如此。使用其中任何一个，您都不必一直单击所有弹出窗口，并且您可以毫无疑问地验证目标与源完全相同。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-08-04T15:31:04.783

你可以试试[SuperCopier](http://sourceforge.net/projects/supercopier/)，它在加载时取代了标准的 Windows 复制机制。

它可以在最后重试失败的文件，恢复取消的副本（甚至是被 Windows 取消的副本），接受每个答案的“全部”。您甚至可以在烦人的问题（文件已存在、复制文件时出错）发生之前回答它们。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-10-15T16:47:25.763

对 robocopy 竖起大拇指。我用它来做你提到的那种事情。

例如，我目前在我的服务器上运行 5 个 robocopy 会话，我在 3 个远程服务器之间复制大约 60GB 的文件，我通过 CheckPoint VPN 连接到两个，另一个是通过 JungleDisk 映射的 Amazon S3 空间。

我正在与该国另一端的同事一起工作。他今晚晚些时候将登录到相同的服务器并运行一组类似的 robocopy 批处理文件来下载我当前正在上传的所有更改。

“杀手级应用”功能是 robocopy 将保留文件日期/时间戳，并且默认情况下只会复制不同的文件。因此，您可以将其指向一个巨大的目录树，并且只会复制更改的文件。

这里有一些有用的技巧来做这种事情......

`/MIR`镜像目录树，因此将删除和添加

`/R:10`告诉 robocopy 在放弃之前尝试 10 次复制文件。默认为 1,000,000 次

`/LOG+somefilename.log`将屏幕输出附加到 somefilename.log，如有必要，创建它。

`/XD dir1 dir2` 将忽略副本中任何名为 dir1 或 dir2 的目录。可以使用通配符。

`/FFT`将使用不如 NTFS 准确的 FAT 时间戳（在时间戳中使用 2 秒粒度）。在 Linux 文件系统和 NTFS 之间进行复制时，我还发现这个很有用。

我通常使用类似的东西

```
robocopy d:\workdir y:\workdir /TEE /LOG+:d:\update.log /MIR /R:5 
```

它将用 y:\workdir 镜像 (/MIR) d:\workdir，将它所做的日志附加到 d:\update.log (/LOG+d:\update.log) 将输出写入控制台和日志文件 (/TEE)，并在继续下一个文件之前尝试每个文件 5 次。

它也适用于 UNC 路径。

如果您有大量需要在多台 PC 上同步的文件，那么 robocopy 就是您的朋友。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-08-04T15:24:03.940

听起来您可能正在寻找一种备份式工具。

我一直在使用[SyncBack](http://www.2brightsparks.com/downloads.html)（其中一个版本是免费的）。您还可以尝试[MS SyncToy](http://en.wikipedia.org/wiki/SyncToy)，它试图让移动、复制、同步等变得容易。

如果您确实只是在随机时间复制随机文件，您可以尝试[Total Copy](http://www.ranvik.net/totalcopy/)，它具有在网络上运行良好的额外好处（暂停、恢复等）。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-08-04T16:25:14.143

使用[Robocopy](http://en.wikipedia.org/wiki/Robocopy)，它能够以“可重启模式”复制文件，而且它应该尊重文件属性。它带有 Vista 和 Server 2008，您可以为旧操作系统下载它。另外，您可以将其设置为重试失败的副本，以获取其他进程临时使用的文件。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-10-28T21:49:43.113

除了已经推荐的 XCOPY、RoboCopy 和 TeraCopy，你也可以试试 Total Commander。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-08-06T18:43:21.617

Powershell 脚本可能也很有用，而且肯定比*xcopy*和其他 DOS 命令更灵活。您可以轻松地通过子目录进行递归，按名称或扩展名过滤文件，根据您选择的标准特别处理某些特定文件等[。Powershell 社区网站](http://www.powershellcommunity.org)是一个很好的起点。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-11-05T18:14:04.757

我已经尝试过[Copy Handler](http://www.copyhandler.com/)并且效果很好。它具有一些很酷的功能，您可以根据媒体类型和文件队列支持来控制缓冲，这样您就可以设置复制和移动操作，同时忘记它们并最大限度地减少磁盘碎片。因此它不会同时从一张 CD 或 DVD 复制多个文件，因为它会使驱动器搜索过多。

最重要的是它的开源。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-08-04T15:41:39.333

Xcopy 保留修改日期，只有创建日期和访问日期会更改。

（在 XP Pro 上测试过，在一个小文件夹上试一下，看看你是否在使用 Vista，因为我没有在 Vista 下测试过）

编辑：您可能希望重定向输出：

```
xcopy /K /R ....... s:\*.* t:\ >c:\xcopy.log 2>&1 
```

这样，如果文件无法复制，您可以检查日志（即系统卷信息将生成错误，但该文件夹对于您尝试执行的操作并不重要）

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-08-05T11:35:58.657

我一直在使用复制处理程序。关于它的最好的事情是它像下载管理器一样排队它的工作。它有一个外壳扩展，因此您可以右键单击拖动，也可以将使用 copyhandler 的复制设置为默认操作。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-08-05T11:44:29.687

我为自己构建了一台具有 4GB RAM、双核 1.8GHz 40GB PATA 驱动器和 250GB SATA 驱动器的 PC，并安装了 Windows Vista Business Edition。当我不得不从我的旧 PATA 磁盘复制 120GB 数据时，Vista 惨遭失败并不断崩溃。我绝对推荐 Teracopy 免费版。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-08-06T18:31:21.300

除了已经提到的 Robocopy，[XXCOPY](http://www.xxcopy.com)还有一个免费版本。它的语法向后兼容 XCOPY，但有大量附加选项（XXCOPY /HELP > x 创建一个包含所有可用选项的 42kb 文件）。例如，您可以使用它删除文件，包含或排除副本的目录列表，将其用作“触摸”实用程序等。

我已经使用它多年了，它是 2 大拇指。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-10-28T21:47:08.143

[ZTreeWin](http://www.ztree.com/html/ztreewin.htm)这是一个用于 Windows 的 32 位文本模式、树形结构的文件/目录管理器。非常易于使用，有一个菜单，但这也显示了各种命令的键。易于在文件系统中导航，并且它具有拆分窗格模式，因此您可以轻松地使用源和目标，只需几次按键。它比 Windows Explorer 或 Xcopy 更有效地完成任务。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2009-02-20T22:29:37.473

我试过 [KillCopy 2.85](http://killprog.narod.ru/KCinst.exe)，我只能说一个——这是一款功能强大的复制软件，可以100%替代windows文件复制。可能是我目前测试过的替代品中最好的。文件传输非常快。KillCopy 是最快的软件，可以以 40 MB/s 的速度复制文件。我选择的原因很简单——KillCopy 在所有 Windows 平台上都能正常工作，而不意味着什么是架构——32 位或 64 位。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2011-03-12T05:37:19.293

xcopy 的 GUI 前端可在以下网址获得：http: [//lorenstuff.weebly.com/](http://lorenstuff.weebly.com/) （免费）控件包括：输入、输出、设置开关和运行。不是 xcopy 的替代或改进，只是简化操作的 GUI。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2010-06-04T05:46:21.750

[Copywhiz](http://www.conceptworld.com/Copywhiz)程序（商业）似乎可以解决您列出的确切问题。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2010-10-31T02:39:08.683

```
Xcopy [source] [destination] /e /c /h /o /d 
```

复制以前未复制的所有内容。基本上可以重新启动，因为您只需按下并输入，它将从您停止它或失去连接时的位置开始。不复制已复制的文件并保留权限和属性。

它还会忽略错误，因此如果 ti 无法复制某些内容，它就会继续运行。

我记得它是因为它的 xcopy echo(e)d

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2010-10-31T02:47:47.077

重新启动到 Linux，挂载驱动器，然后使用 GNU `cp`。

# apache-flex - 在 Adob e Air 中获取当前登录的操作系统用户

> ID：1376
> 
> 赞同：20
> 
> 时间：2008-08-04T16:05:29.333
> 
> 标签：apache-flex, air

我需要**Air/Flex**应用程序中当前登录用户的名称。该应用程序将仅部署在 Windows 机器上。我想我可以通过正则表达式用户目录来实现这一点，但我对其他方式持开放态度。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-26T13:32:08.387

There's a couple of small cleanups you can make...

```
package
{
    import flash.filesystem.File;

    public class UserUtil
    {
        public static function get currentOSUser():String
        {
            var userDir:String = File.userDirectory.nativePath;
            var userName:String = userDir.substr(userDir.lastIndexOf(File.separator) + 1);
            return userName;
        }
    }
} 
```

As Kevin suggested, use `File.separator` to make the directory splitting cross-platform (just tested on Windows and Mac OS X).

You don't need to use `resolvePath("")` unless you're looking for a child.

Also, making the function a proper getter allows binding without any further work.

In the above example I put it into a `UserUtil` class, now I can bind to `UserUtil.currentOSUser`, e.g:

```
<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
    <mx:Label text="{UserUtil.currentOSUser}"/> 
</mx:WindowedApplication> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-08-04T16:39:40.153

我也会尝试：

```
File.userDirectory.name 
```

但我没有安装 Air，所以我无法真正测试这个......

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2011-02-17T03:48:23.593

这不是最漂亮的方法，但如果您知道您的 AIR 应用程序只能在 Windows 环境中运行，它就足够了：

```
public var username:String;

public function getCurrentOSUser():void
{       
   var nativeProcessStartupInfo:NativeProcessStartupInfo = new NativeProcessStartupInfo();  
   var file:File = new File("C:/WINDOWS/system32/whoami.exe");
   nativeProcessStartupInfo.executable = file;

   process = new NativeProcess();       
   process.addEventListener(ProgressEvent.STANDARD_OUTPUT_DATA, onOutputData);
   process.start(nativeProcessStartupInfo);
}

public function onOutputData(event:ProgressEvent):void
{           
   var output:String = process.standardOutput.readUTFBytes(process.standardOutput.bytesAvailable);
   this.username = output.split('\\')[1];
   trace("Got username: ", this.username);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-04T16:19:45.527

这是一个适用于 XP / Vista 的解决方案，但绝对可以扩展到 OSX、Linux，我仍然对另一种方式感兴趣。

```
public static function GetCurrentOSUser():String{
    // XP & Vista only.
    var userDirectory:String = File.userDirectory.resolvePath("").nativePath;
    var startIndex:Number = userDirectory.lastIndexOf("\\") + 1
    var stopIndex:Number = userDirectory.length;
    var user = userDirectory.substring(startIndex, stopIndex);

    return user;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-01-06T17:26:17.940

稍后更新：实际上有一个内置函数可以获取当前用户。我认为它在 nativeApplication 中。

# unit-testing - 什么是单元测试？

> ID：1383
> 
> 赞同：227
> 
> 时间：2008-08-04T16:27:39.787
> 
> 标签：unit-testing

我看到很多问题都在问“如何”用特定语言进行单元测试，但没有问题问“什么”、“为什么”和“何时”。

*   它是什么？
*   它对我有什么用？
*   我为什么要使用它？
*   我应该什么时候使用它（也什么时候不使用它）？
*   有哪些常见的陷阱和误解

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2008-08-04T16:36:51.750

粗略地说，单元测试是与测试代码隔离地测试代码的一部分。想到的直接优势是：

*   运行测试变得可自动化和可重复
*   与通过 GUI 的点击式测试相比，您可以进行更精细的测试

请注意，如果您的测试代码写入文件、打开数据库连接或通过网络执行某些操作，则更适合将其归类为集成测试。集成测试是一件好事，但不应与单元测试混淆。单元测试代码应该简短、甜美且快速执行。

查看单元测试的另一种方法是先编写测试。这被称为测试驱动开发（简称 TDD）。TDD 带来了额外的优势：

*   您不会编写推测性的“我将来可能需要这个”代码——足以让测试通过
*   你写的代码总是被测试覆盖
*   通过首先编写测试，您不得不考虑如何调用代码，从长远来看，这通常会改进代码的设计。

如果你现在不做单元测试，我建议你开始做。买一本好书，几乎任何 xUnit 书都可以，因为它们之间的概念非常容易转移。

有时编写单元测试会很痛苦。当它变成那样时，试着找人来帮助你，并抵制“只写该死的代码”的诱惑。单元测试很像洗碗。这并不总是令人愉快的，但它可以让你隐喻的厨房保持清洁，而且你真的希望它干净。:)

* * *

编辑：我想到了一个误解，尽管我不确定它是否如此普遍。我听过一个项目经理说单元测试让团队把所有的代码都写了两次。如果它看起来和感觉都是这样，那么，你做错了。编写测试不仅通常会加快开发速度，而且它还为您提供了一个方便的“现在我完成了”的指示符，否则您不会有。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2008-08-04T16:41:17.560

我不反对丹（虽然更好的选择可能就是不回答）......但是......

单元测试是编写代码以测试系统的行为和功能的过程。

显然测试可以提高代码的质量，但这只是单元测试的表面好处。真正的好处是：

1.  使更改技术实现变得更容易，同时确保您不更改行为（重构）。正确的单元测试代码可以被积极地重构/清理，几乎没有机会在没有注意到它的情况下破坏任何东西。
2.  在添加行为或进行修复时给开发人员信心。
3.  记录您的代码
4.  指出紧密耦合的代码区域。很难对紧密耦合的代码进行单元测试
5.  提供一种使用您的 API 并尽早发现困难的方法
6.  表示不是很有凝聚力的方法和类

您应该进行单元测试，因为向您的客户提供可维护的优质产品符合您的利益。

我建议您将它用于任何系统或系统的一部分，以模拟现实世界的行为。换句话说，它特别适合企业开发。我不会将它用于一次性/实用程序。我不会将它用于测试有问题的系统部分（UI 是一个常见示例，但并非总是如此）

最大的缺陷是开发人员测试了一个太大的单元，或者他们认为一个方法是一个单元。如果您不了解[控制反转，](https://en.wikipedia.org/wiki/Inversion_of_control)则尤其如此-在这种情况下，您的单元测试将始终变成端到端的集成测试。单元测试应该测试个人行为——大多数方法都有很多行为。

最大的误解是程序员不应该测试。只有糟糕或懒惰的程序员才会相信这一点。建造屋顶的人不应该测试吗？更换心脏瓣膜的医生是否应该不测试新瓣膜？只有程序员可以测试他的代码是否按照他的意图去做（QA 可以测试边缘情况——当被告知做程序员不打算做的事情时代码的行为方式，并且客户端可以进行验收测试——代码做客户为此付出的代价）

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2010-03-14T17:20:44.427

与“只打开一个新项目并测试此特定代码”相比，单元测试的主要区别在于它是*自动化*的，因此是*可重复*的。

如果您手动测试您的代码，它可能会让您相信代码*在当前状态下*运行良好。但是一周后，当你对它进行轻微修改时呢？*每当您的代码发生任何*变化时，您是否愿意再次手动重新测试它？很可能不是:-(

但是，如果您可以**随时运行测试，只需单击一下，完全相同的方式，在几秒钟内**，那么只要出现问题，它们*就会*立即显示给您。而且，如果您还将单元测试集成到您的自动化构建过程中，即使在看似完全不相关的更改破坏了代码库的远处部分的某些东西的情况下，它们也会提醒您注意错误 - 当您甚至不会想到有需要重新测试该特定功能。

这是单元测试相对于手动测试的主要优势。但是等等，还有更多：

*   单元测试极大地**缩短了开发反馈循环**：如果有一个单独的测试部门，您可能需要数周时间才能知道代码中存在错误，此时您已经忘记了大部分上下文，因此可能需要数小时发现并修复错误；OTOH 使用单元测试，反馈周期以秒为单位，错误修复过程通常类似于“哦 sh*t，我忘了在这里检查那个条件”:-)
*   单元测试有效地**记录**（你的理解）你的代码的行为
*   单元测试迫使您重新评估您的设计选择，从而使**设计更简单、更简洁**

反过来，单元测试框架使您可以轻松编写和运行测试。

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2008-09-19T12:45:14.563

我在大学里从来没有教过单元测试，我花了一段时间才“掌握”它。我读到它，然后说“啊，对，自动化测试，我猜这可能很酷”，然后我就忘记了。

在我真正弄清楚这一点之前花了相当长的时间：假设您正在处理一个大型系统并且您编写了一个小模块。它编译，你完成它的步伐，它工作得很好，你继续下一个任务。九个月后，两个版本之后，其他人对程序的一些*看似*无关的部分进行了更改，并且破坏了模块。更糟糕的是，他们测试他们的更改，他们的代码可以工作，但他们不测试你的模块；见鬼，他们甚至可能不知道你的模块*存在*。

现在你遇到了一个问题：损坏的代码在后备箱中，甚至没有人知道。最好的情况是内部测试人员在您发布之前发现它，但是在游戏后期修复代码是昂贵的。如果没有内部测试人员发现它......好吧，那确实会变得非常昂贵。

解决方案是单元测试。他们会在你编写代码时发现问题——这很好——但你可以手动完成。真正的回报是，当你现在从事一个完全不同的项目时，他们会在九个月后发现问题，但是暑期实习生认为如果这些参数按字母顺序排列，它看起来会更整洁 - 然后是单元测试你写回去失败了，有人向实习生扔东西，直到他把参数顺序改回来。**这就是**单元测试的“原因”。:-)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2008-08-24T21:58:49.327

在这里深入了解单元测试和 TDD 的哲学优点是其中一些关键的“灯泡”观察结果，这些观察结果在我通往 TDD 启蒙之路的初步初步步骤中让我印象深刻（非原创或不一定是新闻）......

1.  TDD 并不意味着编写两倍的代码量。测试代码通常写起来相当快速和轻松，并且是您设计过程的关键部分，而且非常重要。

2.  TDD 帮助您意识到何时停止编码！您的测试让您确信您现在已经完成了足够多的工作，并且可以停止调整并继续下一步。

3.  测试和代码协同工作以实现更好的代码。您的代码可能不好/有问题。你的测试可能是坏的/错误的。在 TDD 中，您寄希望于两者都是坏的/错误的可能性相当低。通常它的测试需要修复，但这仍然是一个很好的结果。

4.  TDD 有助于编码便秘。你知道那种你有很多事情要做的感觉，你几乎不知道从哪里开始吗？现在是星期五下午，如果你再拖延几个小时...... TDD 可以让你快速充实你认为需要做的事情，并让你的编码快速进行。另外，就像实验室老鼠一样，我想我们都会对那盏大绿灯做出反应，并更加努力地再次看到它！

5.  同样，这些设计师类型可以看到他们正在做什么。他们可以出去喝一杯果汁/香烟/iphone休息一下，然后回到显示器上，显示器会立即给他们一个视觉提示，知道他们去了哪里。TDD 给了我们类似的东西。当生活介入时，我们更容易看到我们到达了哪里……

6.  我认为是 Fowler 说的：“经常运行的不完美测试比从未编写过的完美测试要好得多”。我将此解释为允许我在我认为它们最有用的地方编写测试，即使我的其余代码覆盖范围非常不完整。

7.  TDD 以各种令人惊讶的方式提供帮助。好的单元测试可以帮助记录应该做什么，它们可以帮助您将代码从一个项目迁移到另一个项目，并给您一种超越非测试同事的无根据的优越感:)

[本演示文稿](http://www.masukomi.org/talks/unit_testing_talk_2/index.xul?data=slide_data.txt#page1)很好地介绍了所有美味佳肴测试所需的内容。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2010-03-14T18:10:04.890

我想推荐 Gerard Meszaros 的 xUnit 测试模式一书。它很大，但在单元测试方面是一个很好的资源。这是他的网站的链接，他在该网站上讨论了单元测试的基础知识。 [http://xunitpatterns.com/XUnitBasics.html](http://xunitpatterns.com/XUnitBasics.html)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-09-17T00:38:12.713

我使用单元测试来节省时间。

在构建业务逻辑（或数据访问）时，测试功能通常会涉及在许多可能尚未完成或尚未完成的屏幕中输入内容。自动化这些测试可以节省时间。

对我来说，单元测试是一种模块化的测试工具。每个公共功能通常至少有一个测试。我编写了额外的测试来涵盖各种行为。

**你在开发代码时想到的所有特殊情况都可以记录在单元测试的代码中。单元测试也成为有关如何使用代码的示例的来源。**

我发现我的新代码在我的单元测试中破坏了某些东西然后检查代码并让一些前端开发人员发现问题要快得多。

对于数据访问测试，我尝试编写没有更改或自行清理的测试。

单元测试不能解决所有的测试需求。他们将能够节省开发时间并测试应用程序的核心部分。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-08-04T23:53:16.440

这是我的看法。我会说单元测试是编写软件测试以验证您的真实软件是否达到预期目的的实践。这从 Java 世界中的 jUnit 开始，[并](http://junit.org/)已成为 PHP 以及[SimpleTest](http://simpletest.org/)和[phpUnit](http://www.phpunit.de/)的最佳实践。这是极限编程的核心实践，可帮助您确保您的软件在编辑后仍能按预期工作。如果您有足够的测试覆盖率，您可以进行重大重构、错误修复或快速添加功能，而不必担心引入其他问题。

当所有单元测试都可以自动运行时，它是最有效的。

单元测试通常与 OO 开发相关联。基本思想是创建一个脚本，为您的代码设置环境，然后对其进行练习；您编写断言，指定您应该接收的预期输出，然后使用上述框架执行您的测试脚本。

该框架将对您的代码运行所有测试，然后报告每个测试的成功或失败。默认情况下，phpUnit 从 Linux 命令行运行，尽管有可用的 HTTP 接口。SimpleTest 本质上是基于网络的，并且更容易启动和运行，IMO。结合 xDebug，phpUnit 可以为您提供代码覆盖率的自动统计信息，有些人认为这非常有用。

一些团队从他们的 subversion 存储库中编写挂钩，以便在您提交更改时自动运行单元测试。

将单元测试保存在与应用程序相同的存储库中是一种很好的做法。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2010-03-14T17:22:09.150

如果您想使用Kent Beck 推广的[TDD](http://en.wikipedia.org/wiki/Test-driven_development)方法开发项目，则像[NUnit](http://en.wikipedia.org/wiki/NUnit)、[xUnit](http://en.wikipedia.org/wiki/XUnit)或[JUnit这样的库是必需的：](http://en.wikipedia.org/wiki/JUnit)

您可以阅读*[测试驱动开发 (TDD) 简介](http://www.agiledata.org/essays/tdd.html)*或 Kent Beck 的书*[测试驱动开发：示例](https://rads.stackoverflow.com/amzn/click/com/0321146530)*。

然后，如果您想确保您的测试涵盖代码的“好”部分，您可以使用[NCover](http://en.wikipedia.org/wiki/NCover)、[JCover](http://www.mmsindia.com/JCover.html)、[PartCover](http://sourceforge.net/projects/partcover/)或其他软件。他们会告诉你代码的覆盖率。取决于你对 TDD 的熟练程度，你会知道你是否练习得足够好 :)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-08-15T17:42:54.617

单元测试是对一个代码单元（例如单个函数）的测试，而不需要该代码单元所依赖的基础设施。即单独测试它。

例如，如果您正在测试的函数连接到数据库并进行更新，那么在单元测试中您可能不想进行该更新。如果它是一个集成测试，你会这样做，但在这种情况下它不是。

因此，单元测试将执行您正在测试的“功能”中包含的功能，而不会产生数据库更新的副作用。

假设您的函数从数据库中检索了一些数字，然后执行了标准偏差计算。你想在这里测试什么？标准差计算正确还是从数据库返回数据？

在单元测试中，您只想测试是否正确计算了标准偏差。在集成测试中，您要测试标准差计算和数据库检索。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-09-17T00:48:33.563

使用[Testivus](http://www.artima.com/weblogs/viewpost.jsp?thread=203994)。所有你需要知道的就在那里:)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2010-03-14T17:19:07.890

单元测试是关于编写测试应用程序代码的代码。

名称的*Unit*部分是关于一次测试小代码单元（例如一种方法）的意图。

xUnit 可以帮助进行此测试 - 它们是帮助此测试的框架。其中一部分是自动化测试运行程序，它会告诉您哪些测试失败以及哪些测试通过。

他们还可以预先设置您在每个测试中需要的通用代码，并在所有测试完成后将其删除。

您可以进行测试来检查是否引发了预期的异常，而无需自己编写整个 try catch 块。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2010-03-14T17:22:05.360

单元测试是一种实践，以确保您将要实现的功能或模块将按预期（要求）运行，并确保它在边界条件和无效输入等场景中的行为方式。

[xUnit](http://en.wikipedia.org/wiki/XUnit)、[NUnit](http://en.wikipedia.org/wiki/NUnit)、[mbUnit](http://mbunit.com/)等是帮助您编写测试的工具。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2010-03-14T17:25:49.237

我认为你不明白的一点是，像 NUnit（等等）这样的单元测试框架将帮助你*自动化*中小型测试。通常，您可以在 GUI 中运行测试（例如[NUnit](http://www.nunit.org/)就是这种情况），只需单击一个按钮，然后 - 希望 - 看到进度条保持绿色。如果它变成红色，则框架会向您显示哪个测试失败以及究竟出了什么问题。在正常的单元测试中，您经常使用断言，例如`Assert.AreEqual(expectedValue, actualValue, "some description")`- 因此，如果两个值不相等，您将看到一条错误消息：“some description: expected <expectedValue> but was <actualValue>”。

因此，作为结论，单元测试将使开发人员的测试更快，更舒适。您可以在提交新代码之前运行所有单元测试，这样您就不会破坏同一项目中其他开发人员的构建过程。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-08-24T22:34:33.467

测试驱动开发已经取代了单元测试这个术语。作为一个老前辈，我会提到它的更通用的定义。

单元测试还意味着在更大的系统中测试单个组件。这个单个组件可以是 dll、exe、类库等。它甚至可以是多系统应用程序中的单个系统。因此，最终单元测试最终会成为对您想要调用的更大系统的单个部分的测试。

然后，您将通过测试所有组件如何协同工作来进行集成或系统测试。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2010-03-14T17:22:23.177

首先，无论是关于单元测试还是任何其他类型的自动化测试（集成、负载、UI 测试等），与您建议的主要区别在于它是自动化的、可重复的并且不需要任何人力资源被消耗（= 没有人必须执行测试，它们通常只需按一下按钮即可运行）。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-08-22T18:10:23.680

我参加了 FoxForward 2007 的单元测试演讲，并被告知永远不要对任何与数据一起工作的东西进行单元测试。毕竟，如果你测试实时数据，结果是不可预测的，如果你不测试实时数据，你实际上并没有测试你编写的代码。不幸的是，这就是我这些天做的大部分编码。:-)

最近，当我编写一个保存和恢复设置的例程时，我确实对 TDD 有所了解。首先，我验证了我可以创建存储对象。然后，它具有我需要调用的方法。然后，我可以称之为。然后，我可以传递它的参数。然后，我可以传递它特定的参数。依此类推，直到我最终验证它是否会保存指定的设置，允许我更改它，然后恢复它，用于几种不同的语法。

我没有走到最后，因为我需要现在的例行公事，但这是一个很好的练习。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-08-22T18:19:39.883

> 如果给你一堆废话，你会怎么做，你会怎么做牌？
> 
> 那我们怎么做单元测试呢？

你从小处着手。我刚刚进入的项目直到几个月前才进行单元测试。当覆盖率很低时，我们只需选择一个没有覆盖率的文件并单击“添加测试”。

现在我们已经达到了 40% 以上，而且我们已经成功地摘下了大部分低垂的果实。

（最好的部分是，即使在这么低的覆盖率下，我们已经遇到了许多代码做错事的实例，并且测试发现了它。这是推动人们添加更多测试的巨大动力。）

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-07-18T18:34:17.097

这回答了为什么你应该进行单元测试。

* * *

下面的 3 个视频涵盖了 javascript 中的单元测试，但一般原则适用于大多数语言。

单元测试：现在只需几分钟即可节省数小时 - Eric Mann - [https://www.youtube.com/watch?v=_UmmaPe8Bzc](https://www.youtube.com/watch?v=_UmmaPe8Bzc)

JS 单元测试（非常好） - [https://www.youtube.com/watch?v=-IYqgx8JxlU](https://www.youtube.com/watch?v=-IYqgx8JxlU)

编写可测试的 JavaScript - [https://www.youtube.com/watch?v=OzjogCFO4Zo](https://www.youtube.com/watch?v=OzjogCFO4Zo)

* * *

现在我只是在学习这个主题，所以我可能不是 100% 正确，而且它比我在这里描述的要多，但我对单元测试的基本理解是你编写一些测试代码（它与你的代码是分开的）主代码）在主代码中调用函数，并使用该函数所需的输入（参数），然后代码检查它是否返回有效的返回值。如果它确实返回了一个有效值，那么您用于运行测试的单元测试框架会显示绿灯（一切正常）如果该值无效，您会得到一个红灯，然后您可以在您之前立即解决问题将新代码发布到生产环境中，如果不进行测试，您实际上可能没有发现错误。

因此，您为当前代码编写测试并创建代码以使其通过测试。几个月后，您或其他人需要修改主代码中的函数，因为之前您已经为该函数编写了测试代码，您现在再次运行并且测试可能会失败，因为编码器在函数中引入了逻辑错误或完全返回了某些东西与该函数应该返回的不同。同样，如果没有适当的测试，该错误可能很难追踪，因为它也可能影响其他代码并且不会被注意到。

* * *

此外，您拥有一个运行代码并对其进行测试的计算机程序，而不是您在浏览器中逐页手动执行它，这一事实可以节省时间（javascript 的单元测试）。假设您修改了网页上某个脚本所使用的函数，并且该函数运行良好且适用于其新的预期目的。但是，为了争论，我们还要说在代码中的其他地方还有另一个函数，它依赖于新修改的函数才能正常运行。由于您对第一个函数所做的更改，此依赖函数现在可能会停止工作，但是如果没有由您的计算机自动运行的测试，您将不会注意到该函数存在问题，直到它实际执行并且你'

重申一下，在开发应用程序时运行测试将在您编码时发现这些类型的问题。如果没有适当的测试，您将不得不手动检查整个应用程序，即使这样也很难发现错误，天真地您将其发送到生产环境中，过了一会儿，一位好心的用户会向您发送错误报告（其中不会像您在测试框架中的错误消息那样好）。

* * *

当你第一次听到这个主题并且你自己想，我不是已经在测试我的代码了吗？而且您编写的代码已经按预期工作，“为什么我需要另一个框架？”......是的，您已经在测试您的代码，但计算机更擅长这样做。您只需为一个函数/代码单元编写一次足够好的测试，其余的将由强大的 cpu 为您处理，而不是在您进行更改时手动检查所有代码是否仍在工作你的代码。

此外，如果您不想对代码进行单元测试，但随着引入错误的机会增加，您的项目/代码库开始变得更大，它会带来回报。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-05-03T09:33:16.003

Unit-testing and TDD in general enables you to have shorter feedback cycles about the software you are writing. Instead of having a large test phase at the very end of the implementation, you incrementally test everything you write. This increases code quality very much, as you immediately see, where you might have bugs.

# .net - 并行化 CPU 密集型 .NET 应用程序的当前最佳选择是什么？

> ID：1387
> 
> 赞同：22
> 
> 时间：2008-08-04T16:30:46.347
> 
> 标签：.net, parallel-processing

这是一个开放式问题。我应该考虑哪些方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-30T22:32:36.390

您的第一步是找到并理解问题中的并行性。编写性能并不比它所取代的单线程代码更好的多线程代码真的很容易。“并行编程模式” [（亚马逊）](https://rads.stackoverflow.com/amzn/click/com/0321228111 "亚马逊")是对关键概念的精彩介绍。

一旦您有了可行的设计，就开始阅读 MSDN 杂志档案[（链接）](http://msdn.microsoft.com/en-us/magazine/cc159269.aspx)中“并发”主题中的文章，尤其是 Jeff Richter 所写的任何文章。这些将为您提供特定于 Windows 和 .NET 的线程结构的具体细节。[（Richter 的“CLR via C# (Amazon)](https://rads.stackoverflow.com/amzn/click/com/0735621632)中的多线程部分很短，但很有见地——强烈推荐。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-04T16:41:23.410

.NET 的一些并行扩展目前正在测试中，可在 Microsoft 的[Parallel Computing Developer Center](http://msdn.microsoft.com/en-us/concurrency/default.aspx)获得。他们有一些你会期待的有趣的项目，比如 Parallel foreach 和称为 PLINQ 的 LINQ 并行版本。有关扩展的一些最佳信息位于[第 9 频道](http://channel9.msdn.com/tags/Parallel+Extensions/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-04T17:32:13.493

我认为，如果这些是要考虑的最佳选择之一，我们还可以包括非.NET 特定的并行处理方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-04T17:41:01.307

@Larsenal

如果您想在 .NET 之外进行分支，那么已经有很多关于英特尔[线程构建块](http://www.threadingbuildingblocks.org/)的讨论，它是 C++ 的并行库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-30T22:46:12.893

有很多选择，最佳解决方案将取决于您要解决的问题的性质。如果您试图解决一个令人[尴尬的并行](http://en.wikipedia.org/wiki/Embarrassingly_parallel)问题，那么划分和并行化任务将是微不足道的。在这种情况下，挑战将来自于分配和管理所使用的数据。

一些建议是：

*   具有 .Net 和其他常用语言绑定的[ICE Grid](http://www.zeroc.com/icegrid/index.html)
*   [Velocity](http://www.microsoft.com/downloads/details.aspx?FamilyId=B24C3708-EEFF-4055-A867-19B5851E7CD2&displaylang=en)是 Microsoft 版本的 Oracle (Tangersol) Coherence
*   [Microsoft Compute Cluster Server](http://www.microsoft.com/HPC/)即将推出的 HPC 产品
*   [数据突触网格服务器](http://www.datasynapse.com/)

# sql-server - Windows Server 2008 “Server Core”是否适合 SQL Server 实例？

> ID：1390
> 
> 赞同：27
> 
> 时间：2008-08-04T16:33:36.390
> 
> 标签：sql-server, windows-server-2008

本周我将在 Windows Server 2008 上设置一个专用的 SQL Server 2005 机器，并希望将其缩减为尽可能准系统，同时仍能完全正常运行。

为此，“服务器核心”选项听起来很吸引人，但我不清楚是否可以在该 SKU 上运行 SQL Server。[Microsoft 网站](http://www.microsoft.com/windowsserver2008/en/us/compare-core-installation.aspx)上提供了几项服务，但我没有看到有关 SQL Server 的任何迹象。

有人确切知道吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-08-04T16:38:03.667

不确定[这个来源的](http://www.builderau.com.au/program/windows/soa/Getting-started-with-Windows-Server-2008-Core-edition/0,339024644,339288700,00.htm)可信度如何，但是：

> Windows Server 2008 核心版可以：
> 
> *   运行文件服务器角色。
>     
>     
> *   运行 Hyper-V 虚拟化服务器角色。
>     
>     
> *   运行目录服务角色。
>     
>     
> *   运行 DHCP 服务器角色。
>     
>     
> *   运行 IIS Web 服务器角色。
>     
>     
> *   运行 DNS 服务器角色。
>     
>     
> *   运行 Active Directory 轻型目录服务。
>     
>     
> *   运行打印服务器角色。
>     
>     
> 
> Windows Server 2008 核心版不能：
> 
> *   运行 SQL Server。
>     
>     
> *   运行 Exchange 服务器。
>     
>     
> *   运行 Internet Explorer。
>     
>     
> *   运行 Windows 资源管理器。
>     
>     
> *   主持远程桌面会话。
>     
>     
> *   在本地运行 MMC 管理单元控制台。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-01T16:18:40.187

ASP.Net 将[在 R2 的服务器核心](http://blogs.technet.com/server_core/archive/2008/11/13/server-core-changes-in-windows-server-2008-r2.aspx)上启用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-18T20:52:22.470

不可以。对于某些事情，您将需要`.net`框架（如报告服务），并且您不能（以受支持的方式）将其安装在服务器核心中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-04T08:52:56.840

Server Core 2008 R2 可以运行 Sql Server，但不支持（目前）。查看[http://www.nullsession.com/2009/06/02/sql-server-2008-on-server-core-2008-r2/](http://www.nullsession.com/2009/06/02/sql-server-2008-on-server-core-2008-r2/)以获取有关如何完成的文章 + 视频。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-27T13:17:55.963

在他们获得 .Net 框架版本之前，Server Core 不会很有用（至少对我来说，而且我认为还有很多其他人）。也许是一个专门的子集，就像他们在智能手机的 Compact Framework 中所拥有的那样。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-20T09:51:16.527

以下是 Server 2008 R2 Server Core 的新功能：

*   .NET Framework – 服务器核心安装现在支持 2.0、3.0、3.5.1、4.0

*   ASP.NET – 因为现在在 Server Core R2 上支持 .NET 可以启用 ASP.NET

*   电源外壳

*   AD CS – AD 证书服务角色可以安装在 Server Core R2 系统上

# asp.net - ASP.Net 自定义客户端验证

> ID：1401
> 
> 赞同：36
> 
> 时间：2008-08-04T16:44:25.167
> 
> 标签：asp.net, javascript, validation

我在 .Net 2.0 网站的用户控件中有一个 JavaScript 自定义验证功能，用于检查支付的费用是否超过应付的费用金额。

我已将验证器代码放在`ascx`文件中，并且我也尝试过使用`Page.ClientScript.RegisterClientScriptBlock()`，在这两种情况下验证都会触发，但找不到 JavaScript 函数。

Firefox 错误控制台的输出是`"feeAmountCheck is not defined"`. 这是函数（这是直接取自 firefox->view source）

```
<script type="text/javascript">
    function feeAmountCheck(source, arguments)
    {
        var amountDue = document.getElementById('ctl00_footerContentHolder_Fees1_FeeDue');
        var amountPaid = document.getElementById('ctl00_footerContentHolder_Fees1_FeePaid');

        if (amountDue.value > 0 && amountDue >= amountPaid)
        {
            arguments.IsValid = true;
        }
        else
        {
            arguments.IsValid = false;
        }

        return arguments;
    }
</script> 
```

关于为什么找不到该功能的任何想法？如何在无需将功能添加到我的母版页或消费页的情况下解决此问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-08-04T17:02:56.237

尝试将参数名称更改为`sender`and `args`。并且，在你让它工作之后，将调用切换到`ScriptManager.RegisterClientScriptBlock`，无论 AJAX 使用如何。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-08-04T16:51:03.420

当您使用 .Net 2.0 和 Ajax - 您应该使用：

```
ScriptManager.RegisterClientScriptBlock 
```

它在 Ajax 环境中会比旧的 Page.ClientScript 版本更好地工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-04T19:13:46.177

虽然我仍然想知道为什么我的 javascript 没有被识别，但我在此期间找到的解决方案（并且应该首先完成）是使用 an`Asp:CompareValidator`而不是`Asp:CustomValidator`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-13T18:10:19.153

你也可以使用：

```
var amountDue = document.getElementById('<%=YourControlName.ClientID%>'); 
```

这将自动解析元素的客户端 ID，而无需弄清楚它是否被调用`'ctl00_footerContentHolder_Fees1_FeeDue'`。

# php - 在 htdocs 文件夹之外制作 XAMPP / Apache 服务文件

> ID：1408
> 
> 赞同：323
> 
> 时间：2008-08-04T16:54:49.293
> 
> 标签：php, apache, xampp, server-configuration

是否可以将[xampp](http://www.apachefriends.org/en/xampp.html)配置为在`htdocs`目录之外提供文件？

例如，假设我有一个文件位于以下位置：

`C:\projects\transitCalculator\trunk\TransitCalculator.php`

我的[xampp](http://www.apachefriends.org/en/xampp.html)文件通常来自：

`C:\xampp\htdocs\`

（因为这是默认配置）有没有办法让 Apache 识别并提供我的`TransitCalculator.php`文件而不将它移动到下面`htdocs`？最好我希望 Apache 提供/访问项目目录的全部内容，并且我不想将项目目录移动到`htdocs`.

编辑：编辑以将 Apache 添加到问题标题中，以使 Q/A 更“可搜索”

* * *

## 回答 #1

> 赞同：374
> 
> 时间：2008-08-04T17:05:48.680

好的，根据[pix0r](https://stackoverflow.com/questions/1408/#2471)、[Sparks](https://stackoverflow.com/questions/1408/#1413)和[Dave](https://stackoverflow.com/questions/1408/#1414)的回答，看起来有三种方法可以做到这一点：

* * *

## [虚拟主机](https://stackoverflow.com/questions/1408/#2471)

1.  打开 C:\xampp\apache\conf\extra\httpd-vhosts.conf。
2.  取消注释 ~ 第 19 行 ( `NameVirtualHost *:80`)。
3.  添加您的虚拟主机（~第 36 行）：

    ```
    <VirtualHost *:80>
        DocumentRoot C:\Projects\transitCalculator\trunk
        ServerName transitcalculator.localhost
        <Directory C:\Projects\transitCalculator\trunk>
            Order allow,deny
            Allow from all
        </Directory>
    </VirtualHost> 
    ```

4.  打开您的主机文件 (C:\Windows\System32\drivers\etc\hosts)。

5.  添加

    ```
    127.0.0.1 transitcalculator.localhost #transitCalculator 
    ```

    到文件的末尾（在 Spybot - Search & Destroy stuff 如果你已经安装之前）。

6.  保存（您可能必须将其保存到桌面，更改旧主机文件的权限（右键单击>属性），然后将新文件复制到旧文件的目录中（或重命名旧文件），如果您正在使用Vista和有麻烦）。
7.  重启阿帕奇。

现在您可以通过浏览[http://transitcalculator.localhost/](http://transitcalculator.localhost/)来访问该目录。

* * *

## [制作别名](https://stackoverflow.com/questions/1408/#1413)

1.  从`http.conf`文件的第 200 行开始，复制`<Directory "C:/xampp/htdocs">`和`</Directory>`（~第 232 行）之间的所有内容，并将其粘贴到下面并`C:/xampp/htdocs`替换为您想要的目录（在本例中`C:/Projects`），以便为您的服务器提供新目录的正确权限。

2.  找到`<IfModule alias_module></IfModule>`部分（~第 300 行）并添加

    ```
    Alias /transitCalculator "C:/Projects/transitCalculator/trunk" 
    ```

    （或与您的需求相关的任何内容）`Alias`在模块标签内的注释块下方。

* * *

## [更改文档根目录](https://stackoverflow.com/questions/1408/#1414)

1.  在 C:\xampp\apache\conf\httpd.conf 中编辑 ~line 176; 更改`DocumentRoot "C:/xampp/htdocs"`为`#DocumentRoot "C:/Projects"`（或任何您想要的）。

2.  编辑 ~line 203 以匹配您的新位置（在本例中`C:/Projects`）。

* * *

**笔记：**

*   您必须使用正斜杠“/”而不是反斜杠“\”。
*   不要在末尾包含尾随的“/”。
*   *重新启动您的服务器*。

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2008-08-04T17:00:27.693

您可以通过编辑XAMPP\apache\conf\httpd.conf 中的**DocumentRoot设置来重新定位它。**

目前应该是：

> C:/xampp/htdocs

将其更改为：

> C:/projects/transitCalculator/trunk

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2008-08-05T15:30:30.353

VirtualHost 也适用于此，并且可能更适合您，因为您可以托管多个项目而无需子目录。这是你如何做到的：

httpd.conf（或额外的\httpd-vhosts.conf 相对于httpd.conf。斜杠“\”可能会导致它不起作用）：

```
NameVirtualHost *:80
# ...
<VirtualHost *:80>  
    DocumentRoot C:\projects\transitCalculator\trunk\
    ServerName transitcalculator.localhost
    <Directory C:\projects\transitCalculator\trunk\>  
        Order allow,deny  
        Allow from all  
    </Directory>
</VirtualHost> 
```

HOSTS 文件（通常为 c:\windows\system32\drivers\etc\hosts）：

```
# localhost entries
127.0.0.1 localhost transitcalculator.localhost 
```

现在重新启动 XAMPP，您应该能够访问[http://transitcalculator.localhost/](http://transitcalculator.localhost/)，它将直接映射到该目录。

如果您尝试复制一个生产环境，在该环境中您正在开发一个位于域名根目录的站点，这会很有帮助。例如，您可以指向具有将传递到服务器的绝对路径的文件：

```
<img src="/images/logo.png" alt="My Logo" /> 
```

而在使用别名或子目录的环境中，您需要准确跟踪“图像”目录相对于当前文件的位置。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2008-08-04T17:00:08.067

您可以将 Apache 设置为不受任何限制地从任何地方提供页面，但它通常以更安全的形式分发。

编辑您的 apache 文件（http.conf 是更常见的名称之一）将允许您设置任何文件夹，以便它出现在您的 webroot 中。

编辑：

别名 myapp c:\myapp\

我已经编辑了我的答案，以包括在 http.conf 文件中创建别名的格式，这有点像 windows 中的快捷方式或 un*x 下的符号链接，其中 Apache '假装'一个文件夹位于 webroot 中。从长远来看，这可能对您更有用。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2011-01-28T03:04:36.573

如果您试图让 XAMPP 使用网络驱动器作为您的文档根目录，您必须在 httpd.conf 中使用 UNC 路径。XAMPP 将无法识别您映射的网络驱动器。

例如以下将不起作用， DocumentRoot "X:/webroot"

但这会， DocumentRoot "//192.168.10.100/webroot" （注意正斜杠，而不是反斜杠）

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2009-01-26T15:11:06.647

允许 Apache 2 在 htdocs 之外托管网站的解决方案：

在 httpd.conf 中的“DocumentRoot”指令下方，您应该会看到一个目录块。将此目录块替换为：

```
<Directory />
    Options FollowSymLinks
    AllowOverride All
    Allow from all
</Directory> 
```

***切记不要在真实环境中使用此配置***

# asp.net - 在 IIS 6 中按 IP 地址限制带宽

> ID：1409
> 
> 赞同：20
> 
> 时间：2008-08-04T16:55:31.243
> 
> 标签：asp.net, iis

我正在编写一个在后台下载大文件的应用程序。所有客户端都在本地或通过 VPN 登录。当他们在本地登录时，我不想限制下载。但是，当用户通过 VPN 连接时，我想将下载限制为 10 KBps。我可以通过 IP 地址范围区分这些用户。

由于这是一个 AIR 应用程序，我认为我将通过服务器端进行节流，因为我可以从服务器本身 (IIS 6) 或 Web 服务 (asp.net / C#) 执行此操作。

通过 IIS 6 进行节流似乎工作正常，但似乎必须在整个网站上完成。反正有没有通过IP做到这一点？还是我必须在 .NET 中安装它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-08-26T03:14:53.987

我的第一个想法是这个。我不知道它是否会起作用，但只需几分钟即可尝试。

在同一台服务器上创建**两个**IIS 网站。第一个站点绑定到公共 IP，但第二个站点绑定到私有 IP。两者都指向文件系统上的同一个文件夹。

您的 VPN 用户将通过专用 IP 访问，因此您可以在该站点上设置仅影响 VPN 用户的“站点范围”规则。这应该适用于几乎所有 IIS6 设置，包括带宽限制。

至少值得一试。

- 编辑：试过这个，它完美无缺。

# php - 如何使用纯 HTTP 身份验证和 PHP 在 Apache 下获取经过身份验证的用户名？

> ID：1417
> 
> 赞同：53
> 
> 时间：2008-08-04T17:02:31.790
> 
> 标签：php, apache, authentication, http-authentication

首先，让我们把安全考虑排除在外。我在 Apache 下使用简单的身份验证，用于一次性、仅供内部使用、非 Internet 连接的 LAN、PHP Web 应用程序。

如何在 PHP 中获取经过 HTTP 身份验证的用户名？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2008-08-04T17:08:26.037

我想你在这之后

```
$username = $_SERVER['PHP_AUTH_USER'];
$password = $_SERVER['PHP_AUTH_PW']; 
```

# sql - 处理多种权限类型的最佳方法是什么？

> ID：1451
> 
> 赞同：25
> 
> 时间：2008-08-04T17:46:28.207
> 
> 标签：sql, permissions

我经常遇到以下场景，我需要提供许多不同类型的权限。我主要将 ASP.NET / VB.NET 与 SQL Server 2000 一起使用。

**设想**

我想提供一个可以处理不同参数的动态权限系统。假设我想授予部门或特定人员访问应用程序的权限。并假设我们有许多应用程序在不断增长。

过去，我选择了以下两种我知道的方法之一。

1.  使用具有用于确定如何应用参数的特殊列的单个权限表。此示例中的特殊列是`TypeID`和`TypeAuxID`。SQL 看起来像这样。

    ```
    SELECT COUNT(PermissionID)
    FROM application_permissions
    WHERE
    (TypeID = 1 AND TypeAuxID = @UserID) OR
    (TypeID = 2 AND TypeAuxID = @DepartmentID)
    AND ApplicationID = 1 
    ```

2.  为每种类型的权限使用一个映射表，然后将它们全部连接在一起。

    ```
    SELECT COUNT(perm.PermissionID)
    FROM application_permissions perm
    LEFT JOIN application_UserPermissions emp
    ON perm.ApplicationID = emp.ApplicationID
    LEFT JOIN application_DepartmentPermissions dept
    ON perm.ApplicationID = dept.ApplicationID
    WHERE q.SectionID=@SectionID
      AND (emp.UserID=@UserID OR dept.DeptID=@DeptID OR
     (emp.UserID IS NULL AND dept.DeptID IS NULL)) AND ApplicationID = 1
    ORDER BY q.QID ASC 
    ```

**我的想法**

我希望这些例子有意义。我把它们拼凑在一起。

第一个示例需要较少的工作，但它们都不是最好的答案。有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-04T18:23:40.537

我同意约翰唐尼的观点。

就个人而言，我有时会使用标记的权限枚举。这样，您可以对枚举项使用 AND、OR、NOT 和 XOR 位运算。

```
"[Flags]
public enum Permission
{
    VIEWUSERS = 1, // 2^0 // 0000 0001
    EDITUSERS = 2, // 2^1 // 0000 0010
    VIEWPRODUCTS = 4, // 2^2 // 0000 0100
    EDITPRODUCTS = 8, // 2^3 // 0000 1000
    VIEWCLIENTS = 16, // 2^4 // 0001 0000
    EDITCLIENTS = 32, // 2^5 // 0010 0000
    DELETECLIENTS = 64, // 2^6 // 0100 0000
}" 
```

然后，您可以使用 AND 位运算符组合多个权限。

例如，如果用户可以查看和编辑用户，则操作的二进制结果是 0000 0011，转换为十进制是 3。
然后您可以将一个用户的权限存储到数据库的单个列中（在我们的例子中，它会是 3)。

在您的应用程序中，您只需要另一个按位运算 (OR) 来验证用户是否具有特定权限。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-08-04T17:56:26.643

我通常对权限系统进行编码的方式是有 6 个表。

*   用户 - 这很简单，它是您的典型用户表
*   组 - 这将是您部门的代名词
*   角色 - 这是一个具有所有权限的表，通常还包括人类可读的名称和描述
*   Users_have_Groups - 这是一个用户所属组的多对多表
*   Users_have_Roles - 另一个多对多表，其中包含分配给单个用户的角色
*   Groups_have_Roles - 每个组具有哪些角色的最终多对多表

在用户会话开始时，您将运行一些逻辑来提取他们分配的每个角色，无论是目录还是通过组。然后，您针对这些角色进行编码作为您的安全权限。

就像我说的那样，这是我通常做的，但你的米数可能会有所不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-04T18:39:56.120

除了 John Downey 和 jdecuyper 的解决方案之外，我还在位域的末尾/开头添加了一个“显式拒绝”位，以便您可以按组、角色成员执行附加权限，然后根据显式拒绝减去权限条目，很像 NTFS 作品，权限方面。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-07T02:23:18.460

老实说，ASP.NET 成员资格/角色功能非常适合您描述的场景。编写自己的表/过程/类是一个很好的练习，你可以很好地控制微小的细节，但是在我自己这样做之后，我得出结论最好只使用内置的 .NET 东西。许多现有代码旨在解决它，这很好。从头开始写作花了我大约 2 周的时间，它远没有 .NET 强大。你必须编写这么多废话（密码恢复、自动锁定、加密、角色、权限接口、大量 procs 等），而时间可以更好地花在其他地方。

抱歉，如果我没有回答您的问题，我就像有人问 vb 问题时说要学习 c# 的人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-04T18:03:57.190

我在各种应用程序中使用的一种方法是拥有一个具有可变 Value 属性的通用 PermissionToken 类。然后您查询请求的应用程序，它会告诉您需要哪些 PermissionToken 才能使用它。

例如，运输应用程序可能会告诉您它需要：

```
new PermissionToken()
{
    Target = PermissionTokenTarget.Application,
    Action = PermissionTokenAction.View,
    Value = "ShippingApp"
}; 
```

这显然可以扩展到创建、编辑、删除等，并且由于自定义值属性，任何应用程序、模块或小部件都可以定义自己所需的权限。YMMV，但这对我来说一直是一种有效的方法，我发现它可以很好地扩展。

# php - 使用对象属性作为方法属性的默认值

> ID：1453
> 
> 赞同：28
> 
> 时间：2008-08-04T17:51:13.003
> 
> 标签：php, parameters, error-handling

我正在尝试这样做（这会产生意外的 T_VARIABLE 错误）：

```
public function createShipment($startZip, $endZip, $weight = 
$this->getDefaultWeight()){} 
```

我不想在其中输入一个幻数来表示重量，因为我使用的对象有一个`"defaultWeight"`参数，如果您不指定重量，所有新货物都会获得该参数。我不能将其`defaultWeight`放入货件本身，因为它会从货件组更改为货件组。有没有比以下更好的方法？

```
public function createShipment($startZip, $endZip, weight = 0){
    if($weight <= 0){
        $weight = $this->getDefaultWeight();
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-08-04T17:53:00.410

这也好不到哪里去：

```
public function createShipment($startZip, $endZip, $weight=null){
    $weight = !$weight ? $this->getDefaultWeight() : $weight;
}

// or...

public function createShipment($startZip, $endZip, $weight=null){
    if ( !$weight )
        $weight = $this->getDefaultWeight();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-28T08:10:48.643

布尔 OR 运算符的巧妙技巧：

```
public function createShipment($startZip, $endZip, $weight = 0){
    $weight or $weight = $this->getDefaultWeight();
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-05T12:49:44.517

这将允许您传递 0 的权重并且仍然可以正常工作。请注意 === 运算符，它检查权重是否在值和类型中都匹配“null”（与 == 相反，它只是值，因此 0 == null == false）。

PHP：

```
public function createShipment($startZip, $endZip, $weight=null){
    if ($weight === null)
        $weight = $this->getDefaultWeight();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-28T01:56:13.800

您可以使用静态类成员来保存默认值：

```
class Shipment
{
    public static $DefaultWeight = '0';
    public function createShipment($startZip,$endZip,$weight=Shipment::DefaultWeight) {
        // your function
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-04T09:34:14.470

如果您使用的是 PHP 7，请改进 Kevin 的回答，您可以这样做：

```
public function createShipment($startZip, $endZip, $weight=null){
    $weight = $weight ?: $this->getDefaultWeight();
} 
```

# ajax - 修改 AJAX 应用程序中的地址栏 URL 以匹配当前状态

> ID：1457
> 
> 赞同：167
> 
> 时间：2008-08-04T17:53:32.500
> 
> 标签：ajax, url, rest, address-bar

我正在编写一个 AJAX 应用程序，但是当用户在应用程序中移动时，我希望地址栏中的 URL 能够更新，尽管没有重新加载页面。基本上，我希望他们能够在任何时候添加书签，从而返回到当前状态。

人们是如何处理在 AJAX 应用程序中维护 RESTful 的？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2008-08-04T18:04:48.547

执行此操作的方法是`location.hash`在 AJAX 更新导致您希望拥有一个离散 URL 的状态更改时进行操作。例如，如果您的页面的 url 是：

> [http://example.com/](http://example.com/)

如果客户端函数执行此代码：

```
// AJAX code to display the "foo" state goes here.

location.hash = 'foo'; 
```

然后，浏览器中显示的 URL 将更新为：

> [http://example.com/#foo](http://example.com/#foo)

这允许用户为页面的“foo”状态添加书签，并使用浏览器历史记录在状态之间导航。

有了这个机制，您需要在客户端使用 JavaScript 解析出 URL 的哈希部分，以创建和显示适当的初始状态，因为片段标识符（# 之后的部分）不会发送到服务器。

如果您使用 jQuery，[Ben Alman 的 hashchange 插件使后者变得轻而易举。](http://benalman.com/projects/jquery-hashchange-plugin/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2011-02-13T19:47:18.803

查看诸如 book.cakephp.org 之类的网站。此站点更改 URL 而不使用哈希并使用 AJAX。我不确定它是如何做到的，但我一直在试图弄清楚。如果有人知道，请告诉我。

在查看某个项目中的导航时也是 github.com。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2011-04-27T08:09:23.733

在使用 Ajax 时，作者不太可能想要重新加载或重定向他的访问者。但是为什么不使用 HTML5 的`pushState`/`replaceState`呢？

您可以随意修改地址栏。[使用 AJAX 获得看起来自然的 url。](https://www.w3.org/TR/2010/WD-html5-20100624/history.html#history)

查看我最新项目的代码：http: [//iesus.se/](http://iesus.se/)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-08-04T18:02:03.933

这与凯文所说的相似。您可以将您的客户端状态作为一些 javascript 对象，当您想要保存状态时，您可以序列化该对象（使用 JSON 和 base64 编码）。然后，您可以将 href 的片段设置为此字符串。

```
var encodedState = base64(json(state));
var newLocation = oldLocationWithoutFragment + "#" + encodedState;

document.location = newLocation; // adds new entry in browser history
document.location.replace(newLocation); // replaces current entry in browser history 
```

第一种方式会将新状态视为新位置（因此后退按钮会将它们带到上一个位置）。后者没有。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-01T13:43:36.893

SWFAddress 在 Flash 和 Javascript 项目中工作，并允许您创建可收藏的 URL（使用上面提到的哈希方法）以及为您提供后退按钮支持。

[http://www.asual.com/swfaddress/](http://www.asual.com/swfaddress/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-31T05:54:01.487

window.location.hash 方法是首选的做事方式。有关如何执行此操作的说明，请 [参阅 Ajax 模式 - 唯一 URL](http://ajaxpatterns.org/Unique_URLs)。

YUI 将这种模式实现为一个模块，其中包括 IE 特定的解决方法，用于使后退按钮与使用哈希重写地址一起工作。[YUI 浏览器历史管理器](http://developer.yahoo.com/yui/history/)。

其他框架也有类似的实现。重要的一点是，如果您希望历史记录与重写地址一起工作，不同的浏览器需要不同的处理方式。（这在第一篇链接文章中有详细说明。）

IE 需要一个基于 iframe 的 hack，Firefox 将使用相同的方法产生双重历史记录。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2011-06-23T09:20:36.013

如果 OP 或其他人仍在寻找一种方法来修改浏览器历史记录以启用状态，那么按照 IESUS 的建议，使用 pushState 和 replaceState 是现在的“正确”方法。与 location.hash 相比，它的主要优势似乎在于它创建了实际的 URL，而不仅仅是哈希。如果保存了使用哈希的浏览器历史记录，然后在禁用 JavaScript 的情况下重新访问，则应用程序将无法运行，因为哈希不会发送到服务器。但是，如果已使用 pushState，则整个路由将被发送到服务器，然后您可以构建该服务器以适当地响应路由。我看到了一个例子，在服务器端和客户端都使用了相同的胡子模板。如果客户端启用了 JavaScript，他将通过避免往返服务器来获得快速响应，但如果没有 JavaScript，该应用程序将完全正常工作。因此，应用程序可以在没有 JavaScript 的情况下优雅地降级。

另外，我相信那里有一些框架，名称类似于 history.js。对于支持 HTML5 的浏览器，它使用 pushState，但如果浏览器不支持它，它会自动回退到使用散列。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-10-13T23:18:50.833

检查用户是否在页面中，当您单击 URL 栏时，JavaScript 会说您不在页面中。如果您更改 URL 栏并在其中按带有符号“#”的“ENTER”，然后您再次进入该页面，而无需使用鼠标光标手动单击该页面，那么来自 JavaScript 的键盘事件命令 (document.onkeypress) 将能够检查它是否进入并激活 JavaScript 以进行重定向。您可以使用 window.onfocus 检查用户是否在页面中，并使用 window.onblur 检查他是否在页面外。

是的，有可能。

;)

# python - 你如何在 Python 中表达二进制文字？

> ID：1476
> 
> 赞同：384
> 
> 时间：2008-08-04T18:20:36.487
> 
> 标签：python, syntax, binary, integer, literals

如何使用 Python 文字将整数表示为二进制数？

我很容易找到十六进制的答案：

```
>>> 0x12AF
4783
>>> 0x100
256 
```

和八进制：

```
>>> 01267
695
>>> 0100
64 
```

**如何在 Python 中使用文字来表达二进制？**

* * *

***答案摘要***

*   Python 2.5 及更早版本：可以使用`int('01010101111',2)`但不能使用文字来表示二进制。
*   Python 2.5 及更早版本：*无法*表达二进制文字。
*   Python 2.6 beta：你可以这样做：`0b1100111`或`0B1100111`.
*   Python 2.6 beta：也将允许`0o27`或`0O27`（第二个字符是字母 O）表示八进制。
*   Python 3.0 beta：与 2.6 相同，但不再允许使用旧`027`的八进制语法。

* * *

## 回答 #1

> 赞同：329
> 
> 时间：2008-08-16T12:35:36.170

供参考——*未来*Python 的可能性：
从 Python 2.6 开始，您可以使用前缀**0b**或**0B**表示二进制文字：

```
>>> 0b101111
47 
```

您还可以使用新的**bin**函数来获取数字的二进制表示：

```
>>> bin(173)
'0b10101101' 
```

文档的开发版本：[Python 2.6 中的新增功能](http://docs.python.org/dev/whatsnew/2.6.html#pep-3127-integer-literal-support-and-syntax)

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2008-08-04T18:34:45.520

```
>>> print int('01010101111',2)
687
>>> print int('11111111',2)
255 
```

其他方式。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2016-05-14T11:58:03.253

> # 你如何在 Python 中表达二进制文字？

它们不是“二进制”文字，而是“整数文字”。您可以用二进制格式表示整数文字，a`0`后跟 a`B`或`b`后跟一系列 0 和 1，例如：

```
>>> 0b0010101010
170
>>> 0B010101
21 
```

在 Python 3[文档](https://docs.python.org/3/reference/lexical_analysis.html#integer-literals)中，这些是在 Python 中提供整数文字的方法：

> 整数文字由以下词法定义描述：
> 
> ```
> integer      ::=  decinteger | bininteger | octinteger | hexinteger
> decinteger   ::=  nonzerodigit (["_"] digit)* | "0"+ (["_"] "0")*
> bininteger   ::=  "0" ("b" | "B") (["_"] bindigit)+
> octinteger   ::=  "0" ("o" | "O") (["_"] octdigit)+
> hexinteger   ::=  "0" ("x" | "X") (["_"] hexdigit)+
> nonzerodigit ::=  "1"..."9"
> digit        ::=  "0"..."9"
> bindigit     ::=  "0" | "1"
> octdigit     ::=  "0"..."7"
> hexdigit     ::=  digit | "a"..."f" | "A"..."F" 
> ```
> 
> 除了可以存储在可用内存中的内容之外，整数文字的长度没有限制。
> 
> 请注意，不允许在非零十进制数中使用前导零。这是为了消除 Python 在 3.0 版之前使用的 C 风格的八进制文字的歧义。
> 
> 整数文字的一些示例：
> 
> ```
> 7     2147483647                        0o177    0b100110111
> 3     79228162514264337593543950336     0o377    0xdeadbeef
>       100_000_000_000                   0b_1110_0101 
> ```
> 
> *在 3.6 版更改:*现在允许在文字中使用下划线进行分组。

## 其他表示二进制的方式：

您可以在可以操作的字符串对象中包含零和一（尽管在大多数情况下您可能应该只对整数进行按位运算） - 只需将零和一的字符串以及您从 (2 ):

```
>>> int('010101', 2)
21 
```

您可以选择使用`0b`or`0B`前缀：

```
>>> int('0b0010101010', 2)
170 
```

如果您将其`0`作为基数传递，如果字符串未指定前缀，它将假定基数为 10：

```
>>> int('10101', 0)
10101
>>> int('0b10101', 0)
21 
```

## 从 int 转换回人类可读的二进制文件：

您可以将整数传递给 bin 以查看二进制文字的字符串表示形式：

```
>>> bin(21)
'0b10101' 
```

你可以结合`bin`和`int`来回走：

```
>>> bin(int('010101', 2))
'0b10101' 
```

如果您希望前面有零的最小宽度，您也可以使用格式规范：

```
>>> format(int('010101', 2), '{fill}{width}b'.format(width=10, fill=0))
'0000010101'
>>> format(int('010101', 2), '010b')
'0000010101' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-21T22:48:20.237

这里开头的 0 指定基数是 8（不是 10），这很容易看出：

```
>>> int('010101', 0)
4161 
```

如果您不以 0 开头，则 python 假定该数字以 10 为底。

```
>>> int('10101', 0)
10101 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-11-29T04:40:27.877

**我在 Python 3.6.9 中试过这个**

**将二进制转换为十进制**

```
>>> 0b101111
47

>>> int('101111',2)
47 
```

**将十进制转换为二进制**

```
>>> bin(47)
'0b101111' 
```

**将 0 作为第二个参数 python 假定它为十进制。**

```
>>> int('101111',0)
101111 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-07T07:45:32.383

从二进制中获取整数表示的另一个好方法是使用 eval()

像这样：

```
def getInt(binNum = 0):
    return eval(eval('0b' + str(n))) 
```

我想这也是一种方法。我希望这是一个令人满意的答案：D

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2008-08-04T18:26:13.777

据我所知，Python 直到 2.5，只支持十六进制和八进制文字。我确实找到了一些关于将二进制文件添加到未来版本的讨论，但没有确定的。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2008-08-04T18:27:26.627

我很确定这是由于 Python 3.0 中的变化之一，可能 bin() 与 hex() 和 oct() 一起使用。

编辑：lbrandy 的答案在所有情况下都是正确的。

# macos - Mac OS X 上首选的 Vim 和 Emacs 版本是什么？

> ID：1496
> 
> 赞同：35
> 
> 时间：2008-08-04T18:51:38.543
> 
> 标签：macos, vim, emacs, editor

对于我们这些喜欢使用图形版本的 Vim 或 Emacs 而不是控制台版本的人，您推荐哪个版本？

对于 Vim，有[Mac OS X Vim](http://sourceforge.net/projects/macosxvim/)、[MacVim](http://code.google.com/p/macvim/)、[Vim-Cocoa](http://code.google.com/p/vim-cocoa/)。

对于 Emacs、[CarbonEmacs](http://www.apple.com/downloads/macosx/unix_open_source/carbonemacspackage.html)、[XEmacs](http://www.xemacs.org/)和[Aquamacs](http://aquamacs.org/)。

还有更多吗？其中哪些已准备好迎接黄金时段？如果这是一个艰难的决定，那么取舍是什么？所有这些都还在维护吗？

如果您不介意的话，不要讨论 Vim 与 Emacs，也不要与其他编辑器进行比较。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-08-04T19:11:02.140

**MacVim**运行良好，当然看起来比 Vim-Cocoa 更成熟，而且 MacVim 的管道中有一个 Cocoa 插件架构（有人已经在开发一个 TextMate 风格的文件浏览器托盘插件，这是一个巨大的 ++ 恕我直言）。

还有一个碳版本的 Vim，但这并没有比终端版本提供很多。即只允许打开一个窗口，在外观上不是很 OSX...

**Aquamacs**非常好用，看起来还不错。支持传统 Mac OS 风格的键盘快捷键（command-O、command-S）和传统 Emacs 上的 Control/Meta 快捷键。它绝对比 Carbon Emacs 更像 Mac。它看起来既稳定又快速，但我不是 Emacs 大师，所以我在使用它时并没有那么强调它。我也不能谈论包含的 elisp 包的广泛性。

我认为有人每季度将 Carbon Emacs 与上游树同步。Aquamacs 的日程安排更加不规律，但在过去一年中看到了一些非常重要的更新。

**可以在[emacsformacosx.com找到适用于 OSX 的](http://emacsformacosx.com)**GNU Emacs**。除了最新的稳定版本外，还有预发布测试版本和夜间版本，并提供 Atom 提要用于跟踪所有三种版本类型。**

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-04T20:22:32.463

我试过 Aquamacs，它非常好用，而且看起来还不错。支持传统 Mac OS 风格的键盘快捷键（command-O、command-S）和传统 Emacs 上的 Control/Meta 快捷键。它绝对比 Carbon Emacs 更像 Mac。它看起来既稳定又快速，但我不是 Emacs 大师，所以我在使用它时并没有那么强调它。我也不能谈论包含的椭圆包的广泛性。

我认为有人每季度将 Carbon Emacs 与上游树同步。Aquamacs 的日程安排更加不规律，但在过去一年中看到了一些非常重要的更新。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-16T13:41:47.440

我只是从 GNU 站点下载 Emacs 源代码并自己构建它。我不喜欢太多特定于 Mac 的功能，因为我希望 Emacs 行为在我使用的所有平台上保持一致。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-06T15:36:37.263

我喜欢 Nextstep 派生的 Emacs.app，以前位于[http://emacs-app.sourceforge.net/](http://emacs-app.sourceforge.net/) ，现在集成在 Emacs-23 CVS 中（截至 2008 年 8 月）。

Emacs.app 对我来说感觉比 Aquamacs 更活泼，但它只是简单的 CVS-Emacs 并且没有提供相同数量的东西（你必须安装自己的 AucTeX 等）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T03:35:39.783

就个人而言，我一直在使用[fink](http://www.finkproject.org/)来安装[xemacs](http://www.xemacs.org)。它需要 X，但我使用 xemacs 已经很长时间了，以至于我需要它所拥有的东西。

另外，我已经安装了[gnu emacs](http://www.gnu.org/software/emacs)。这很好，因为它是一个完全集成的 mac os x 应用程序，带有停靠图标和一切。我发现在 gnu emacs 图标顶部拖动文件以打开它时它很有用。

最后，我应该提到 mac os x 到处都使用 emacs 按键。^A 表示文本的开头，^E 表示文本的结尾，^N 下一行，^P 上一行等...这些在整个操作系统中的大多数文本框中都有效。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-13T21:46:15.240

我在 Mac OS X 上使用[MacVim 。它非常非常好。](http://code.google.com/p/macvim/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-22T17:47:50.570

[我使用带有 emacs22-carbon 包的Fink](http://www.finkproject.org/)（它提供类似 Debian 的包控制）获得了我所有的 unixish/GNU 支持，这意味着我还获得了一个可点击的应用程序。它完成了我期望它做的所有事情，并自动开始使用加载了 fink 的 emacs 扩展。

美好的时光。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-27T11:06:14.097

我在 Macports 程序上使用 CarbonEmacs 版本。它只用一行安装所有依赖项：

```
sudo port install emacs 
```

对于任何对 Macports 感兴趣的人 ( [www.macports.org](http://www.macports.org) )

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-29T09:53:26.360

前段时间，我正在为我的新 Mac 寻找文本编辑器。由于这是几个月前的事情，因此在此期间可能已经更正了一些要点。
我觉得 Aquamacs 是迄今为止最好的 OSX-Emacs。但是，在某些方面感觉有点像 Mac。例如，它使用多个窗口而不是多个缓冲区，并且着色方案不是“正常”的 Emacs 风格。
如果您寻找更基本的集合，Carbon Emacs 也可能会这样做，尽管您可能想要添加一些额外的包来添加 PHP 支持或 AucTeX。
在我看来，Emacs.app 感觉很糟糕。它甚至不使用拖放打开文件。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-21T05:47:08.887

在 Mac OS X 的 emacsen 中，不得不说在 22 的控制台版本之后，CarbonEmacs 是最实用的。[Aquamacs](http://en.wikipedia.org/wiki/Aquamacs)只是在配置方面做了太多非标准的、阅读意外的事情。Aquamacs 的问题通常不会在 freenode 上的#emacs 中以任何形式及时回答，无论其价值如何。它似乎不屑一顾，仅仅是因为它在处理 .emacs 中的标准配置选项方面做得非常糟糕。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-17T18:49:30.017

我喜欢 CarbonEmacs，因为它非常接近标准的 GNU Emacs 发行版，同时仍然很好地适合 Mac 桌面。对我来说，它在我的 Ubuntu 桌面上“感觉”就像 Emacs，即使它看起来像一个 Mac 应用程序。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-19T01:34:43.980

Emacs 22 对我来说效果很好。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-10-06T17:25:04.473

我更喜欢从 Subversion 存储库构建的[Vim 。](http://en.wikipedia.org/wiki/Vim_%28text_editor%29)我在控制台中运行它，在编辑时不需要使用鼠标。**

# visual-studio - 将 Visual Studio 测试项目与 Cruise Control 集成

> ID：1503
> 
> 赞同：20
> 
> 时间：2008-08-04T19:01:14.157
> 
> 标签：visual-studio, unit-testing, continuous-integration, cruisecontrol.net

我正在考虑使用 Visual Studio 2008 的内置单元测试项目而不是 NUnit，我想知道是否有人有任何尝试将这种类型的单元测试项目与 Cruise Control.Net 集成的经验。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-04T19:09:44.717

从一些初步研究来看，它似乎不是一个超级简单的解决方案。

这样做似乎涉及在持续集成服务器上实际安装 Visual Studio 2008，这可能会破坏交易。

然后将 MSTest.exe 配置为在任务列表中运行，但首先您必须创建一个批处理文件来删除以前通过的结果文件，因为该文件的存在会导致错误。

然后创建一个 xslt 来格式化结果并将其放入dashboard.config 文件中。

我找到的代码项目文章有更多的细节。

[将 Visual Studio Team System 2008 单元测试与 CruiseControl.NET 集成](http://www.codeproject.com/KB/tips/VSTS2008_Tests_With_CCNET.aspx)

# html - 如何为我的网站添加 iPhone 图标？

> ID：1505
> 
> 赞同：31
> 
> 时间：2008-08-04T19:02:36.777
> 
> 标签：html, ios, iphone, favicon, apple-touch-icon

如何`iPhone`为我创建的网站设置正确显示的图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-07T12:32:30.753

在你的头部添加这个：`<link rel="icon" href="/your-icon-url"/>`

# version-control - 不同的分布式版本控制系统协同工作

> ID：1508
> 
> 赞同：18
> 
> 时间：2008-08-04T19:04:47.347
> 
> 标签：version-control, dvcs

我的办公室有一个中央 Source Safe 2005 安装，我们用于源代码控制。我无法更改办公室在服务器上使用的内容。

我在笔记本电脑上开发，并希望拥有一个不同的本地源代码控制存储库，该存储库可以与中央服务器（如果可用）同步，而不管中央提供者是什么。提出请求的原因是，我可以为客户演示维护一个本地稳定的分支/构建，同时继续开发，而不必跳过燃烧的箍。此外，作为顾问，我的客户可能会要求我使用他们的源代码控制提供程序，而这里的灵活性会让生活更轻松。

任何现有的分布式源代码控制客户端都可以处理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-04T19:10:29.660

您应该能够检查出代码的当前版本，然后围绕它创建一个 git 存储库。更新它并将其提交到您的本地 git 存储库应该很容易。应该克隆它。

唯一的问题是，您需要通过弄乱适当的忽略文件来让它们相互忽略（我对 SVN 做过类似的事情）。我假设 SourceSafe 让你忽略一些事情。而且您需要执行某些操作两次（例如告诉两者您正在删除文件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-04T19:13:23.197

嗯... KernelTrap 对此[有所了解](http://kerneltrap.org/mailarchive/git/2008/5/27/1952124)。看起来您可以使用[vss2svn](http://www.pumacode.org/projects/vss2svn/wiki/RunningTheMigration)将 Source Safe 存储库通过管道传输到 Subversion 存储库，然后使用非常好的 git-svn 将其拉入本地 git 存储库。

我会假设使用此方法返回到 VSS 的提交不会是一个平滑、自动的过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-18T11:59:44.290

有一天，我在一家使用 VSS 的公司（以及其他使用其他鲜为人知的[SCM](http://en.wikipedia.org/wiki/Source_Code_Management)的公司）工作，但对于我和我的团队，我更喜欢使用 SVN（总有一天我会尝试 GIT）进行积极开发。

首先，在这种情况下，如果一个月内对 VSS 的承诺很少，这是一个好主意，因为与其他 SCM（比 VSS）一起工作会给您更多的灵活性，但从 SVN 向 VSS 的提交在时间上是昂贵的。

我的解决方案是：

VSS -> SVN：我有从 VSS 的当前更新目录工作复制到当前 SVN 的 linux 脚本（或 ant 脚本或 XXX 脚本），然后刷新 SVN 客户端并更新/合并/提交到 SVN。这样，您就可以从使用 VSS 的其他公司的变化中获得更新。

SVN -> VSS：这样，您需要将所有修改文件检出到VSS，然后您可以简单地使用反向脚本从当前更新SVN目录（忽略.svn目录）复制并复制到当前更新VSS目录，更新和提交。

但请记住，在某些情况下确实值得您花时间这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-07T16:51:43.707

[HanselMinutes 的这一](http://hanselminutes.com/default.aspx?showID=126)集完全涵盖了我希望听到的内容。显然 Git 可以在本地使用，然后根据需要附加到外部 subversion/vss 存储库。他们会在 14 到 15 分钟后谈论它。

# c# - 隐藏继承的成员

> ID：1528
> 
> 赞同：45
> 
> 时间：2008-08-04T19:13:54.693
> 
> 标签：c#, wpf, silverlight, polymorphism, dependency-properties

我正在寻找某种方法来有效地隐藏继承的成员。我有一个从公共基类继承的类库。一些较新的后代类继承了已退化的依赖属性，并且在使用*IntelliSense*或在可视化设计器中使用这些类时可能会有些混乱。

这些类都是为 WPF 或 Silverlight 2.0 编译而编写的控件。我知道`ICustomTypeDescriptor`and `ICustomPropertyProvider`，但我很确定它们不能在 Silverlight 中使用。

与其说是功能问题，不如说是可用性问题。我该怎么办？

**更新**

我真正想隐藏的一些属性来自不属于我自己的祖先，并且由于我正在设计的特定工具，我无法使用`new`操作员进行成员隐藏。（我知道，这很荒谬）

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2008-08-04T20:14:30.547

[像上面](https://stackoverflow.com/questions/1528/#1533)迈克尔建议的那样覆盖它们并防止人们使用覆盖的（sp？）方法，将它们标记为过时：

```
[Obsolete("These are not supported in this class.", true)]
public override  void dontcallmeanymore()
{
} 
```

如果第二个参数设置为 true，如果有人尝试调用该方法并且第一个参数中的字符串是消息，则会生成编译器错误。如果 parm2 为 false，则只会生成编译器警告。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-08-04T19:19:33.013

据我所知，虽然您无法阻止使用这些继承的成员，但您应该能够使用[EditorBrowsableAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.editorbrowsableattribute.aspx)将它们从 IntelliSense 中隐藏起来：

```
Using System.ComponentModel;

[EditorBrowsable(EditorBrowsableState.Never)]
private string MyHiddenString = "Muahahahahahahahaha"; 
```

*编辑：*刚刚在文档评论中看到了这一点，这使得它对此目的有点无用：

> 有一个突出的注释指出此属性“不会抑制同一程序集中的类中的成员”。这是真的，但并不完整。实际上，该属性不会在同一解决方案中抑制类中的成员。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-08-04T19:22:48.903

您可以做的一件可能的事情是包含对象而不是从其他类扩展。这将在公开您想要公开的内容方面为您提供最大的灵活性，但如果您绝对需要该对象属于该类型，则它不是理想的解决方案（但是您可以从 getter 公开对象）。

因此：

```
public class MyClass : BaseClass
{
    // Your stuff here
} 
```

变成：

```
public class MyClass
{
    private BaseClass baseClass;

    public void ExposeThisMethod()
    {
        baseClass.ExposeThisMethod();
    }
} 
```

或者：

```
public class MyClass
{
    private BaseClass baseClass;

    public BaseClass BaseClass
    {
        get
        {
            return baseClass;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-08-04T19:19:34.977

我认为你最好的最简单的方法是考虑组合而不是继承。

或者，您可以创建一个具有所需成员的接口，让您的派生类实现该接口，然后针对该接口进行编程。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2010-12-08T20:54:44.970

我知道有几个答案，现在已经很老了，但最简单的方法就是将它们声明为`new private`.

考虑一个我目前正在处理的示例，其中我有一个 API，它使第 3 方 DLL 中的每个方法都可用。我必须采用他们的方法，但我想使用 .Net 属性，而不是“getThisValue”和“setThisValue”方法。因此，我构建了第二个类，继承了第一个类，创建了一个使用 get 和 set 方法的属性，然后将原始的 get 和 set 方法覆盖为私有。任何想要在其上构建不同东西的人仍然可以使用它们，但如果他们只想使用我正在构建的引擎，那么他们将能够使用属性而不是方法。

使用双类方法摆脱了无法使用`new`声明隐藏成员的任何限制。`override`如果成员被标记为虚拟，您根本无法使用。

```
public class APIClass
{
    private static const string DllName = "external.dll";

    [DllImport(DllName)]
    public extern unsafe uint external_setSomething(int x, uint y);

    [DllImport(DllName)]
    public extern unsafe uint external_getSomething(int x, uint* y);

    public enum valueEnum
    {
        On = 0x01000000;
        Off = 0x00000000;
        OnWithOptions = 0x01010000;
        OffWithOptions = 0x00010000;
    }
}

public class APIUsageClass : APIClass
{
    public int Identifier;
    private APIClass m_internalInstance = new APIClass();

    public valueEnum Something
    {
        get
        {
            unsafe
            {
                valueEnum y;
                fixed (valueEnum* yPtr = &y)
                {
                    m_internalInstance.external_getSomething(Identifier, yPtr);
                }
                return y;
            }
        }
        set
        {
            m_internalInstance.external_setSomething(Identifier, value);
        }
    }

    new private uint external_setSomething(int x, float y) { return 0; }
    new private unsafe uint external_getSomething(int x, float* y) { return 0; }
} 
```

现在 valueEnum 对两个类都可用，但只有属性在 APIUsageClass 类中可见。APIClass 类仍然可供想要扩展原始 API 或以不同方式使用它的人使用，而 APIUsageClass 可供想要更简单的人使用。

最终，我要做的是使 APIClass 成为内部的，并且只公开我继承的类。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-06-24T19:50:10.680

完全隐藏并标记不使用，包括智能感知，我相信这是大多数读者所期望的

```
[Obsolete("Not applicable in this class.")] 
[DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
[Browsable(false), EditorBrowsable(EditorBrowsableState.Never)] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-23T10:19:32.310

我测试了所有建议的解决方案，它们并没有真正隐藏新成员。

但这一个可以：

```
[DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
public new string MyHiddenProperty
{ 
    get { return _myHiddenProperty; }
} 
```

但是在代码隐藏中它仍然可以访问，所以还要添加 Obsolete Attribute

```
[Obsolete("This property is not supported in this class", true)]
[DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
public new string MyHiddenProperty
{ 
    get { return _myHiddenProperty; }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-11T15:30:28.987

虽然上面明确指出，在 C# 中无法更改继承方法和属性的访问修饰符，但我通过使用隐式转换的一种“假继承”克服了这个问题。

**例子：**

```
public class A
{
      int var1;
      int var2;

      public A(int var1, int var2)
      {
            this.var1 = var1;
            this.var2 = var2;
      }
      public void Method1(int i)
      {
            var1 = i;
      }
      public int Method2()
      {
            return var1+var2;
      }
} 
```

现在假设您想要 a`class B`继承自`class A`，但想要更改某些可访问性甚至完全更改 Method1

```
public class B
{
      private A parent;

      public B(int var1, int var2)
      {
            parent = new A(var1, var2);
      } 

      int var1 
      {
            get {return this.parent.var1;}
      }
      int var2 
      {
            get {return this.parent.var2;}
            set {this.parent.var2 = value;}
      }

      public Method1(int i)
      {
            this.parent.Method1(i*i);
      }
      private Method2()
      {
            this.parent.Method2();
      }

      public static implicit operator A(B b)
      {
            return b.parent;
      }
} 
```

通过在末尾包含隐式转换，它允许我们在需要时将`B`对象视为`A`s。定义隐式转换也很有用`A->B`。

这种方法的最大缺陷是您需要重新编写您打算“继承”的每个方法/属性。这种方法可能还有更多缺陷，但我喜欢将其用作一种“假继承”。

**笔记：**

虽然这允许更改属性的可访问`public`性，但它并不能解决将`protected`属性公开的问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-13T00:24:00.833

您可以使用接口

```
 public static void Main()
    {
        NoRemoveList<string> testList = ListFactory<string>.NewList();

        testList.Add(" this is ok ");

        // not ok
        //testList.RemoveAt(0);
    }

    public interface NoRemoveList<T>
    {
        T this[int index] { get; }
        int Count { get; }
        void Add(T item);
    }

    public class ListFactory<T>
    {
        private class HiddenList: List<T>, NoRemoveList<T>
        {
            // no access outside
        }

        public static NoRemoveList<T> NewList()
        {
            return new HiddenList();
        }
    } 
```

# c# - 减少 C# 中重复的错误处理代码？

> ID：1535
> 
> 赞同：40
> 
> 时间：2008-08-04T19:21:48.530
> 
> 标签：c#, exception, error-handling

我从来没有对异常处理的工作方式完全满意，有很多异常和 try/catch 带来的表（堆栈展开等），但它似乎在这个过程中破坏了很多 OO 模型。

无论如何，这是问题所在：

假设您有一些类包装或包含网络文件 IO 操作（例如，在某处的某个特定 UNC 路径读取和写入某些文件）。由于各种原因，您不希望这些 IO 操作失败，因此，如果您检测到它们失败，则重试它们并继续重试它们，直到它们成功或达到超时。我已经有一个方便的 RetryTimer 类，我可以实例化并使用它在重试之间休眠当前线程，并确定超时时间何时结束，等等。

问题是你在这个类的几个方法中有一堆 IO 操作，你需要将它们中的每一个都包装在 try-catch / retry 逻辑中。

这是一个示例代码片段：

```
RetryTimer fileIORetryTimer = new RetryTimer(TimeSpan.FromHours(10));
bool success = false;
while (!success)
{
    try
    {
        // do some file IO which may succeed or fail
        success = true;
    }
    catch (IOException e)
    {
        if (fileIORetryTimer.HasExceededRetryTimeout)
        {
            throw e;
        }
        fileIORetryTimer.SleepUntilNextRetry();
    }
} 
```

那么，如何避免为整个班级的每个文件 IO 操作重复大部分代码呢？我的解决方案是在执行传递给它的委托块的类中使用匿名委托块和单个方法。这让我可以用其他方法做这样的事情：

```
this.RetryFileIO( delegate()
    {
        // some code block
    } ); 
```

我有点喜欢这个，但它还有很多不足之处。我想听听其他人如何解决这类问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-05T09:43:55.000

这看起来是一个了解面向方面编程的绝佳机会。这是一篇关于[.NET 中 AOP](https://docs.microsoft.com/en-us/archive/blogs/simonince/aspect-oriented-interception)的好文章。一般的想法是您将跨功能关注点（即重试 x 小时）提取到一个单独的类中，然后您将注释任何需要以这种方式修改其行为的方法。这是它的外观（在 Int32 上有一个很好的扩展方法）

```
[RetryFor( 10.Hours() )]
public void DeleteArchive()
{
  //.. code to just delete the archive
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-04T20:07:41.840

只是想知道，你觉得你的方法有什么不足之处？您可以将匿名委托替换为..命名的？代表，类似

```
 public delegate void IoOperation(params string[] parameters);

    public void FileDeleteOperation(params string[] fileName)
    {
        File.Delete(fileName[0]);
    }

    public void FileCopyOperation(params string[] fileNames)
    {
        File.Copy(fileNames[0], fileNames[1]);
    }

    public void RetryFileIO(IoOperation operation, params string[] parameters)
    {
        RetryTimer fileIORetryTimer = new RetryTimer(TimeSpan.FromHours(10));
        bool success = false;
        while (!success)
        {
            try
            {
                operation(parameters);
                success = true;
            }
            catch (IOException e)
            {
                if (fileIORetryTimer.HasExceededRetryTimeout)
                {
                    throw;
                }
                fileIORetryTimer.SleepUntilNextRetry();
            }
        }
    }

    public void Foo()
    {
        this.RetryFileIO(FileDeleteOperation, "L:\file.to.delete" );
        this.RetryFileIO(FileCopyOperation, "L:\file.to.copy.source", "L:\file.to.copy.destination" );
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-07T11:30:38.853

您还可以使用更面向对象的方法：

*   创建一个执行错误处理并调用抽象方法来执行具体工作的基类。（模板方法模式）
*   为每个操作创建具体的类。

这具有命名您执行的每种操作类型的优点并为您提供命令模式 - 操作已表示为对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-09-13T02:25:02.620

这是我最近所做的。它可能在其他地方做得更好，但它看起来非常干净且可重复使用。

我有一个看起来像这样的实用方法：

```
 public delegate void WorkMethod();

    static public void DoAndRetry(WorkMethod wm, int maxRetries)
    {
        int curRetries = 0;
        do
        {
            try
            {
                wm.Invoke();
                return;
            }
            catch (Exception e)
            {
                curRetries++;
                if (curRetries > maxRetries)
                {
                    throw new Exception("Maximum retries reached", e);
                }
            }
        } while (true);
    } 
```

然后在我的应用程序中，我使用 c# 的 Lamda 表达式语法来保持整洁：

```
Utility.DoAndRetry( () => ie.GoTo(url), 5); 
```

这会调用我的方法并重试多达 5 次。在第五次尝试时，在重试异常中重新抛出原始异常。

# windows - IIS 上的 Linux shell 等效项

> ID：1584
> 
> 赞同：21
> 
> 时间：2008-08-04T21:04:06.407
> 
> 标签：windows, iis, shell, command-line, terminal

作为一名考虑迁移到 .Net IIS 平台的 LAMP 开发人员，我担心的一个问题是由于缺少外壳而导致生产力下降……还有其他人有过这种经验吗？是否有可能与 Windows 等效的 Linux shell？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-04T18:22:38.787

根据您正在考虑的 IIS 版本，我会支持 lbrandy 的建议来检查[PowerShell](http://www.microsoft.com/windowsserver2003/technologies/management/powershell/default.mspx)。Microsoft 正在为 IIS（特别是版本 7）开发 PowerShell 提供程序。在[http://blogs.iis.net/thomad/archive/2008/04/14/iis-7-0-powershell-provider-tech-preview-1.aspx](http://blogs.iis.net/thomad/archive/2008/04/14/iis-7-0-powershell-provider-tech-preview-1.aspx)上有一篇不错的帖子。即将推出的 PowerShell 版本还将[添加远程处理功能](http://www.microsoft.com/technet/scriptcenter/topics/winpsh/remote.mspx)，以便您可以远程管理计算机。不过，PowerShell 与 *NIX shell 完全不同，因此需要考虑这一点。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-04T21:08:24.010

您是否在询问 Linux shell 作为工作环境？对于那个 CygWin，我认为它已经存在最长并且非常强大：[http ://www.cygwin.com/](http://www.cygwin.com/)

不久前，我找到了我使用的所有流行的 linux 命令（ls、grep、diff）的 windows 端口，我只需将它们解压缩到一个文件中，将其添加到我的 PATH 环境中，然后可以从那里运行：[http://unxutils .sourceforge.net/](http://unxutils.sourceforge.net/)

或者您是在谈论从代码中执行 shell 命令？如果您在 .NET 领域，那么 Process.Start() 方法将为您提供很多选择。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-04T21:06:14.717

我假设您的意思不是[cygwin](http://www.cygwin.com/)，对吗？

那么[powershell](http://www.microsoft.com/windowsserver2003/technologies/management/powershell/default.mspx)呢？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-04T21:14:10.333

如果您指的是简单地从远程位置访问您的 IIS 服务器，远程桌面通常可以解决该问题。假设您的服务器具有可以从 Internet 访问的静态 IP 地址或主机名，远程桌面是一种简单且相对安全的解决方案。

这个答案有问题吗？现在名声不好...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-04T21:33:58.093

我能想到的最好方法是通过**OpenSSH**连接使用**Cygwin 。**这是一个解释如何做到这一点的文档：

 **[http://www.ucl.ac.uk/cert/openssh_rdp_vnc.pdf](http://www.ucl.ac.uk/cert/openssh_rdp_vnc.pdf)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-11T12:09:04.867

远程外壳不能解决生产力问题。（它只是使事情成为可能。）

据我所知，未来的 Microsoft GUI:s 所做的一切都将可能与 powershell 一起完成，因为 GUI:s 使用与 powershell 提供的 API:s 相同的 API。

就个人而言，我喜欢 cygwin，但 cygwin 无法帮助您管理 Microsoft 应用程序。

然而，当与 Window Management Instrumentation 结合使用时，您可能会惊讶于 Windows Scripting Host 的强大功能。我认为 IIS 完全可以通过 WMI 或一些可以从 JScript WSH 脚本轻松使用的 COM 对象进行管理。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-05T14:51:56.470

您应该根据整个环境来选择服务器平台，其中包括提供的管理/管理界面。

恐怕如果你不喜欢 Windows 实现 IIS 管理的方式，那就太糟糕了。话虽如此，对 WMI 接口进行一些研究通常会产生一个您应该会发现可用的解决方案。为了获得可靠的环境重建能力，我曾经编写过相当多的 WMI 脚本（主要通过 PowerShell）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-15T18:07:31.563

如果您想在 Windows 上安装 Linux shell，请在 Windows 10 上安装[适用于 Linux 的 Windows 子系统](https://docs.microsoft.com/en-us/windows/wsl/about)：

> 适用于 Linux 的 Windows 子系统允许开发人员直接在 Windows 上运行 GNU/Linux 环境（包括大多数命令行工具、实用程序和应用程序），无需修改，无需传统虚拟机或双引导设置的开销。**

# iphone - 苹果触摸图标的正确像素尺寸是多少？

> ID：1598
> 
> 赞同：74
> 
> 时间：2008-08-04T21:17:51.150
> 
> 标签：iphone, favicon, apple-touch-icon

我不确定正确的尺寸应该是多少。

许多网站似乎重复说苹果触摸图标应该是 57x57 像素，但引用了一个断开的链接作为它们的来源。

[Hanselman](http://www.hanselman.com/blog/MakeYourWebsiteMobileAndIPhoneFriendlyAddHomeScreenIPhoneIconsAndAdjustTheViewPort.aspx)和[playgroundblues](http://playgroundblues.com/posts/2008/jan/15/iphone-bookmark-iconage/)的评论建议使用不同的尺寸，包括 163x163 和 60x60。

Apple 自己的[apple.com 图标](http://www.apple.com/apple-touch-icon.png)是 129x129！

请参阅我的相关问题： [如何为我的网站提供 iPhone 图标？](https://stackoverflow.com/questions/1505/how-do-i-give-my-web-sites-an-icon-for-iphone)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2010-08-16T06:15:28.777

自 2010 年 8 月 3 日起，Apple 指南似乎现在在其“必需”图标大小中包含“高分辨率”图像（适用于 iPhone 4）。

看起来我们现在需要同时提供 57x57 和 114x114 的图像，以及 640x960 的标题图像。

请参阅作为整个文档一部分的[自定义图标和图像创建指南（需要 Javascript）：](http://developer.apple.com/iphone/library/documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW2)

*   [iOS 人机界面指南（2013；Apple Inc；PDF；26.3 MB）](https://developer.apple.com/library/ios/documentation/userexperience/conceptual/mobilehig/MobileHIG.pdf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-04T21:36:58.040

取决于您希望它拥有多少细节，它需要具有 1:1 的纵横比（基本上 - 它需要是方形的）

我会选择苹果自己的 129*129

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-15T22:04:48.603

[Apple 规范](https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)为 iOS7 指定了新尺寸：

*   60x60
*   76x76
*   120x120
*   152x152

而 iOS6 及之前的旧尺寸是：

*   57x57
*   72x72
*   114x114
*   144x144

顺便说一句，不推荐使用预先组合的图标。

因此，要支持新设备（运行 iOS7）和旧设备（iOS6 和更早版本），必须存在这 8 张图片，通用代码为：

```
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">    
<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"> 
```

此外，[您应该创建一个 152x152 的图片，名为`apple-touch-icon.png`](http://realfavicongenerator.net/faq#why_high_res_touch_icon).

您可能想知道这个[网站图标生成器](http://realfavicongenerator.net/)可以一次生成所有这些图片。完全披露：我是本网站的作者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-06T04:10:52.080

官方尺寸为 57x57。我建议使用确切的大小，因为它在加载时占用的内存更少（除非 Apple 缓存缩放的表示形式）。话虽如此，[雷克斯是对](https://stackoverflow.com/questions/1598/what-are-the-correct-pixel-dimensions-for-an-apple-touch-icon#1599)的，任何正方形都可以

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-04T21:22:50.220

我认为没有“正确的尺寸”。由于 iPhone 确实运行的是 OSX，因此图标渲染系统非常强大。只要您为其提供具有正确纵横比和至少与实际输出一样高的分辨率的高质量图像，操作系统就会非常干净地缩小比例。我的网站使用 158x158，图标在 iPhone 屏幕上看起来像素完美。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-12T16:06:59.417

**2014 年 10 月更新列表，iOS8**

带和不带视网膜的 iPhone 和 iPad 列表

```
<link rel="apple-touch-icon" href="touch-icon-iphone.png">
<link rel="apple-touch-icon" sizes="76x76" href="touch-icon-ipad.png">
<link rel="apple-touch-icon" sizes="120x120" href="touch-icon-iphone-retina.png">
<link rel="apple-touch-icon" sizes="152x152" href="touch-icon-ipad-retina.png">
<link rel="apple-touch-icon" sizes="180x180" href="touch-icon-iphone-6-plus.png"> 
```

**更新 2014 iOS 8：**

适用于 iOS 8 和 iPhone 6 plus

```
<link rel="apple-touch-icon" sizes="180x180" href="touch-icon-iphone-6-plus.png"> 
```

iPhone 6 使用与 iPhone 4 和 5 相同的 120 x 120 像素图像，其余与 iOS 7 相同

**更新 2013 iOS7：**

对于 iOS 7，推荐的分辨率发生了变化：

*   iPhone Retina 从 114 x 114 像素到 120 x 120 像素
*   适用于 iPad 视网膜从 144 x 144 像素到 152 x 152 像素

其他分辨率还是一样

*   57 x 57 像素默认
*   76 x 76 px 适用于不带视网膜的 iPad

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-20T20:43:21.523

您不必再为正确的尺寸而烦恼。如果您有图标的 iTunes 艺术文件（即 1024*1024 大小的文件），那么我创建了这个应用程序，它将根据[此处](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)提供的信息为您提供所有图标。[从这里](https://github.com/rptwsthi/AlliOSIconsWithProperName)获取应用程序，并按照自述文件中的说明创建 iOS 应用程序所需的所有图标。

# sql-server - 复制数据库的最佳方法是什么？

> ID：1600
> 
> 赞同：28
> 
> 时间：2008-08-04T21:27:53.003
> 
> 标签：sql-server, sql-server-2008

当我想复制一个数据库时，我总是创建一个新的空数据库，然后将现有数据库的备份恢复到其中。但是，我想知道这是否真的是最不容易出错、最不复杂和最有效的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-04T21:46:01.703

可以跳过创建空数据库的步骤。您可以在还原过程中创建新数据库。

这实际上是我所知道的克隆数据库的最简单和最好的方法。您可以通过编写备份和还原过程脚本来消除错误，而不是通过 SQL Server Management Studio 运行它

您可以探索其他两个选项：

1.  分离数据库，复制 .mdf 文件并重新附加。
2.  使用 SQL Server Integration Services (SSIS) 复制所有对象

我建议在必要时坚持备份和恢复以及自动化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-04T22:18:05.460

这是我过去使用过的动态 sql 脚本。它可以进一步修改，但它将为您提供基础知识。我更喜欢编写脚本以避免使用 Management Studio 可能犯的错误：

```
 Declare @OldDB varchar(100)
Declare @NewDB varchar(100)
Declare @vchBackupPath varchar(255)
Declare @query varchar(8000)

/*Test code to implement 
Select @OldDB = 'Pubs'
Select @NewDB = 'Pubs2'
Select @vchBackupPath = '\\dbserver\C$\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\Backup\pubs.bak'
*/

SET NOCOUNT ON;

Select @query = 'Create Database ' + @NewDB
exec(@query)

Select @query = '
Declare @vBAKPath varchar(256)
declare @oldMDFName varchar(100)
declare @oldLDFName varchar(100)
declare @newMDFPath varchar(100)
declare @newLDFPath varchar(100)
declare @restQuery varchar(800)

select @vBAKPath = ''' + @vchBackupPath + '''
select @oldLDFName = name from ' + @OldDB +'.dbo.sysfiles where filename like ''%.ldf%''
select @oldMDFName = name from  ' + @OldDB +'.dbo.sysfiles where filename like ''%.mdf%''
select @newMDFPath = physical_name from ' + @NewDB +'.sys.database_files where type_desc = ''ROWS''
select @newLDFPath = physical_name from ' + @NewDB +'.sys.database_files where type_desc = ''LOG''

select @restQuery = ''RESTORE DATABASE ' + @NewDB + 
' FROM DISK = N'' + '''''''' + @vBAKpath + '''''''' + 
'' WITH MOVE N'' + '''''''' + @oldMDFName + '''''''' +  
'' TO N'' + '''''''' + @newMDFPath + '''''''' +  
'', MOVE N'' + '''''''' + @oldLDFName + '''''''' +  
'' TO N'' + '''''''' + @newLDFPath + '''''''' +  
'', NOUNLOAD, REPLACE, STATS = 10''

exec(@restQuery)
--print @restQuery'

exec(@query) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-05T01:31:16.583

备份和还原是我所知道的最直接的方式。您必须在服务器之间小心，因为恢复的数据库不附带安全凭证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-05T01:11:30.540

**Publish to Provider**功能对我来说非常有用。请参阅[Scott Gu 的博客条目](http://weblogs.asp.net/scottgu/archive/2006/12/22/recipe-deploying-a-sql-database-to-a-remote-hosting-environment-part-1.aspx)。

[如果您需要一些真正强大的东西，请查看这里](http://www.red-gate.com/)的 redgate 软件工具……如果您正在执行大量 SQL，那么这些都是值得的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-13T06:59:28.853

```
::================ BackUpAllMyDatabases.cmd ============= START
::BackUpAllMyDatabases.cmd
:: COMMAND LINE BATCH SCRIPT FOR TAKING BACKUP OF ALL DATABASES 

::RUN THE SQL SCRIPT VIA THE COMMAND LINE WITH LOGGING 
sqlcmd -S localhost -e  -i "BackUpAllMyDatabases.sql" -o Result_Of_BackUpAllMyDatabases.log

::VIEW THE RESULTS
Result_Of_BackUpAllMyDatabases.log

::pause
::================ BackUpAllMyDatabases.cmd ============= END

--=================================================BackUpAllMyDatabases.sql start
DECLARE @DBName varchar(255)

DECLARE @DATABASES_Fetch int

DECLARE DATABASES_CURSOR CURSOR FOR
    select
        DATABASE_NAME   = db_name(s_mf.database_id)
    from
        sys.master_files s_mf
    where
       -- ONLINE
        s_mf.state = 0 

       -- Only look at databases to which we have access
    and has_dbaccess(db_name(s_mf.database_id)) = 1 

        -- Not master, tempdb or model
    --and db_name(s_mf.database_id) not in ('Master','tempdb','model')
    group by s_mf.database_id
    order by 1

OPEN DATABASES_CURSOR

FETCH NEXT FROM DATABASES_CURSOR INTO @DBName

WHILE @@FETCH_STATUS = 0
BEGIN
    declare @DBFileName varchar(256)    
    set @DBFileName = @DbName + '_' + replace(convert(varchar, getdate(), 112), '-', '.') + '.bak'
--REMEMBER TO PUT HERE THE TRAILING \ FOR THE DIRECTORY !!!
    exec ('BACKUP DATABASE [' + @DBName + '] TO  DISK = N''D:\DATA\BACKUPS\' + 
        @DBFileName + ''' WITH NOFORMAT, INIT,  NAME = N''' + 
        @DBName + '-Full Database Backup'', SKIP, NOREWIND, NOUNLOAD,  STATS = 100')

    FETCH NEXT FROM DATABASES_CURSOR INTO @DBName
END

CLOSE DATABASES_CURSOR
DEALLOCATE DATABASES_CURSOR

--BackUpAllMyDatabases==========================end

--======================RestoreDbFromFile.sql start
-- Restore database from file
-----------------------------------------------------------------
use master
go

declare @backupFileName varchar(100), @restoreDirectory varchar(100),
@databaseDataFilename varchar(100), @databaseLogFilename varchar(100),
@databaseDataFile varchar(100), @databaseLogFile varchar(100),
@databaseName varchar(100), @execSql nvarchar(1000)

-- Set the name of the database to restore
set @databaseName = 'ReplaceDataBaseNameHere'
-- Set the path to the directory containing the database backup
set @restoreDirectory = 'ReplaceRestoreDirectoryHere' -- such as 'c:\temp\'

-- Create the backup file name based on the restore directory, the database name and today's date

@backupFileName = @restoreDirectory + @databaseName + '-' + replace(convert(varchar, getdate(), 110), '-', '.') + '.bak'

-- set @backupFileName = 'D:\DATA\BACKUPS\server.poc_test_fbu_20081016.bak'

-- Get the data file and its path
select @databaseDataFile = rtrim([Name]),
@databaseDataFilename = rtrim([Filename])
from master.dbo.sysaltfiles as files
inner join
master.dbo.sysfilegroups as groups
on

files.groupID = groups.groupID
where DBID = (
select dbid
from master.dbo.sysdatabases
where [Name] = @databaseName
)

-- Get the log file and its path
select @databaseLogFile = rtrim([Name]),
@databaseLogFilename = rtrim([Filename])
from master.dbo.sysaltfiles as files
where DBID = (
select dbid
from master.dbo.sysdatabases
where [Name] = @databaseName
)
and
groupID = 0

print 'Killing active connections to the "' + @databaseName + '" database'

-- Create the sql to kill the active database connections
set @execSql = ''
select @execSql = @execSql + 'kill ' + convert(char(10), spid) + ' '
from master.dbo.sysprocesses
where db_name(dbid) = @databaseName
and
DBID <> 0
and
spid <> @@spid
exec (@execSql)

print 'Restoring "' + @databaseName + '" database from "' + @backupFileName + '" with '
print ' data file "' + @databaseDataFile + '" located at "' + @databaseDataFilename + '"'
print ' log file "' + @databaseLogFile + '" located at "' + @databaseLogFilename + '"'

set @execSql = '
restore database [' + @databaseName + ']
from disk = ''' + @backupFileName + '''
with
file = 1,
move ''' + @databaseDataFile + ''' to ' + '''' + @databaseDataFilename + ''',
move ''' + @databaseLogFile + ''' to ' + '''' + @databaseLogFilename + ''',
norewind,
nounload,
replace'

exec sp_executesql @execSql

exec('use ' + @databaseName)
go

-- If needed, restore the database user associated with the database
/*
exec sp_revokedbaccess 'myDBUser'
go

exec sp_grantdbaccess 'myDBUser', 'myDBUser'
go

exec sp_addrolemember 'db_owner', 'myDBUser'
go

use master
go
*/
--======================RestoreDbFromFile.sql 
```

# php - 跟踪数据库架构更改的机制

> ID：1607
> 
> 赞同：137
> 
> 时间：2008-08-04T21:31:40.390
> 
> 标签：php, mysql, database, svn, migration

跟踪和/或自动化数据库架构更改的最佳方法是什么？我们的团队使用 Subversion 进行版本控制，并且我们已经能够通过这种方式自动化我们的一些任务（将构建推送到临时服务器，将经过测试的代码部署到生产服务器），但我们仍在手动进行数据库更新。我想找到或创建一个解决方案，使我们能够在具有不同环境的服务器上高效工作，同时继续使用 Subversion 作为后端，通过该后端将代码和数据库更新推送到各种服务器。

许多流行的软件包都包含自动更新脚本，可以检测数据库版本并应用必要的更改。即使在更大规模（跨多个项目，有时跨多个环境和语言），这是否是最好的方法？如果是这样，是否有任何现有的代码可以简化流程，或者最好只是推出我们自己的解决方案？之前有没有人实现过类似的东西并将其集成到 Subversion 提交后挂钩中，或者这是一个坏主意？

虽然支持多个平台的解决方案更可取，但我们肯定需要支持 Linux/Apache/MySQL/PHP 堆栈，因为我们的大部分工作都在该平台上。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2008-08-04T22:45:11.443

在 Rails 世界中，存在迁移的概念，即在 Ruby 中对数据库进行更改的脚本，而不是特定于数据库的 SQL 风格。您的 Ruby 迁移代码最终被转换为特定于您当前数据库的 DDL；这使得切换数据库平台非常容易。

对于您对数据库所做的每一次更改，您都会编写一个新的迁移。迁移通常有两种方法：应用更改的“向上”方法和撤消更改的“向下”方法。单个命令使数据库保持最新，也可用于将数据库带入特定版本的模式。在 Rails 中，迁移保存在项目目录中自己的目录中，并像任何其他项目代码一样检查到版本控制中。

[这个 Oracle 的 Rails 迁移指南](http://www.oracle.com/technology/pub/articles/kern-rails-migrations.html "Oracle Ruby on Rails 迁移指南")很好地涵盖了迁移。

使用其他语言的开发人员已经研究了迁移并实现了自己的特定语言版本。我知道**[Ruckusing](https://github.com/ruckus/ruckusing-migrations "淘气")**，一个以 Rails 迁移为模型的 PHP 迁移系统；这可能是您正在寻找的东西。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2008-08-22T14:44:37.607

我们使用类似于 bcwood 的东西来保持我们的数据库模式在 5 个不同的安装（生产、暂存和一些开发安装）之间保持同步，并在版本控制中进行备份，它运行良好。我会详细说明一下：

* * *

为了同步数据库结构，我们有一个脚本，update.php，以及一些编号为 1.sql、2.sql、3.sql 等的文件。该脚本使用一个额外的表来存储当前版本号数据库。N.sql 文件是手工制作的，从版本 (N-1) 到版本 N 的数据库。

它们可用于添加表、添加列、将数据从旧列格式迁移到新列格式然后删除列、插入“主”数据行（如用户类型）等。基本上，它可以做任何事情，并且使用适当的数据迁移脚本，您将永远不会丢失数据。

更新脚本的工作方式如下：

> *   连接到数据库。
> *   备份当前数据库（因为*会*出错）[mysqldump]。
> *   如果不存在，则创建簿记表（称为 _meta）。
> *   从 _meta 表中读取当前版本。如果未找到，则假定为 0。
> *   对于所有编号高于 VERSION 的 .sql 文件，按顺序执行
> *   如果其中一个文件产生错误：回滚到备份
> *   否则，将簿记表中的版本更新为执行的最高 .sql 文件。

一切都进入源代码控制，每个安装都有一个脚本，只需执行一次脚本即可更新到最新版本（使用正确的数据库密码调用 update.php 等）。我们 SVN 通过自动调用数据库更新脚本的脚本来更新登台和生产环境，因此代码更新伴随着必要的数据库更新。

我们还可以使用相同的脚本从头开始重新创建整个数据库；我们只需删除并重新创建数据库，然后运行将完全重新填充数据库的脚本。我们还可以使用脚本填充空数据库进行自动化测试。

* * *

建立这个系统只花了几个小时，它在概念上很简单，每个人都得到了版本编号方案，它对于能够推进和改进数据库设计，而无需沟通或手动执行修改，这是非常宝贵的在所有数据库上。

*不过，在粘贴来自 phpMyAdmin 的查询时要小心！*这些生成的查询通常包括数据库名称，您绝对不想要它，因为它会破坏您的脚本！像 CREATE TABLE 这样的东西`mydb`。`newtable`(...) 如果系统上的数据库不称为 mydb，则会失败。我们创建了一个预先注释的 SVN 钩子，它将禁止包含该`mydb`字符串的 .sql 文件，这是一个明确的迹象，表明有人在没有适当检查的情况下从 phpMyAdmin 复制/粘贴。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-08-05T19:56:43.217

我的团队编写了所有数据库更改的脚本，并将这些脚本连同应用程序的每个版本一起提交到 SVN。这允许对数据库进行增量更改，而不会丢失任何数据。

要从一个版本转到下一个版本，您只需要运行一组更改脚本，并且您的数据库是最新的，并且您仍然拥有所有数据。这可能不是最简单的方法，但绝对有效。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-07-07T13:26:46.760

这里的问题实际上是让开发人员可以轻松地将自己的本地更改编写到源代码控制中以与团队共享。我多年来一直面临这个问题，并受到 Visual Studio for Database 专业人士的功能的启发。如果你想要一个具有相同功能的开源工具，试试这个：[http](http://dbsourcetools.codeplex.com/) ://dbsourcetools.codeplex.com/ 玩得开心，- Nathan。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2010-10-25T05:46:13.833

如果您仍在寻找解决方案：我们提出了一个名为 neXtep Designer 的工具。它是一个数据库开发环境，您可以使用它将整个数据库置于版本控制之下。您在可以跟踪每个更改的版本控制存储库上工作。

当您需要发布更新时，您可以提交您的组件，产品会自动从之前的版本生成 SQL 升级脚本。当然，您可以从任何 2 个版本生成此 SQL。

然后你有很多选择：你可以把这些脚本和你的应用程序代码一起放在你的SVN中，这样它就会被你现有的机制部署。另一种选择是使用 neXtep 的交付机制：脚本以称为“交付包”（SQL 脚本 + XML 描述符）的方式导出，安装程序可以理解此包并将其部署到目标服务器，同时确保结构一致性、依赖性检查，注册安装版本等

该产品是 GPL 并且基于 Eclipse，因此它可以在 Linux、Mac 和 windows 上运行。目前它还支持 Oracle、MySQL 和 PostgreSQL（DB2 支持正在进行中）。查看 wiki，您将在其中找到更多详细信息： http: [//www.nextep-softwares.com/wiki](http://www.nextep-softwares.com/wiki)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-08-29T04:51:30.517

Scott Ambler 撰写了一系列关于数据库重构的精彩文章（并与人合着了一[本书），其理念是您应该本质上应用 TDD 原则和实践来维护您的模式。](http://www.ambysoft.com/books/refactoringDatabases.html)您为数据库设置了一系列结构和种子数据单元测试。然后，在您更改任何内容之前，您修改/编写测试以反映该更改。

我们已经这样做了一段时间了，它似乎奏效了。我们编写代码在单元测试套件中生成基本的列名和数据类型检查。我们可以随时重新运行这些测试，以验证 SVN 签出中的数据库是否与应用程序实际运行的实时数据库匹配。

事实证明，开发人员有时也会调整他们的沙箱数据库而忽略更新 SVN 中的模式文件。然后代码取决于尚未签入的数据库更改。这种错误可能非常难以确定，但测试套件会立即将其拾取。如果您将其内置到更大的持续集成计划中，这将特别好。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-08-06T16:59:36.803

将架构转储到文件中并将其添加到源代码管理。然后一个简单的差异会告诉你发生了什么变化。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2008-08-29T05:11:38.283

K. Scott Allen 有一两篇关于模式版本控制的不错的文章，它使用了此处其他答案中引用的增量更新脚本/迁移概念；请参阅[http://odetocode.com/Blogs/scott/archive/2008/01/31/11710.aspx](http://odetocode.com/Blogs/scott/archive/2008/01/31/11710.aspx)。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2008-08-04T22:28:58.713

这是一种低技术，可能有更好的解决方案，但您可以将架构存储在可以运行以创建数据库的 SQL 脚本中。我认为您可以执行命令来生成此脚本，但不幸的是我不知道该命令。

然后，将脚本连同适用于它的代码一起提交到源代码管理中。当您需要随代码更改架构时，可以将脚本与需要更改架构的代码一起签入。然后，脚本上的差异将指示架构更改的差异。

使用此脚本，您可以将其与 DBUnit 或某种构建脚本集成，因此它似乎可以适应您已经自动化的流程。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2008-08-04T22:47:46.993

如果您使用 C#，请查看 Subsonic，这是一个非常有用的 ORM 工具，但也可以生成 sql 脚本来重新创建您的方案和\或数据。然后可以将这些脚本放入源代码管理中。

[http://subsonicproject.com/](http://subsonicproject.com/)

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2008-08-08T18:21:33.993

我们使用一个非常简单但有效的解决方案。

对于新安装，我们在存储库中有一个 metadata.sql 文件，其中包含所有 DB 模式，然后在构建过程中，我们使用该文件生成数据库。

对于更新，我们在硬编码的软件中添加更新。我们保持硬编码是因为我们不喜欢在问题真正成为问题之前解决问题，而这种事情到目前为止还没有被证明是一个问题。

所以在我们的软件中，我们有这样的东西：

`RegisterUpgrade(1, 'ALTER TABLE XX ADD XY CHAR(1) NOT NULL;');`

此代码将检查数据库是否为版本 1（存储在自动创建的表中），如果已过时，则执行命令。

要更新存储库中的 metadata.sql，我们在本地运行此升级，然后提取完整的数据库元数据。

唯一经常发生的事情就是忘记提交 metadata.sql，但这不是一个主要问题，因为它很容易在构建过程中进行测试，而且唯一可能发生的事情就是使用过时的数据库并在第一次使用时对其进行了升级。

此外，我们不支持降级，但这是设计使然，如果更新出现问题，我们会恢复以前的版本并修复更新，然后重试。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2008-08-08T18:31:25.597

我在 Visual Studio 中为几个项目使用了以下数据库项目结构，并且效果很好：

数据库

> 更改脚本
> 
> > 0.PreDeploy.sql
> > 
> > 1.SchemaChanges.sql
> > 
> > 2.DataChanges.sql
> > 
> > 3.权限.sql
> 
> 创建脚本
> 
> > 存储过程
> > 
> > 职能
> > 
> > 意见

然后，我们的构建系统通过按以下顺序执行脚本将数据库从一个版本更新到下一个版本：

> 1.PreDeploy.sql
> 
> 2.SchemaChanges.sql
> 
> 创建脚本文件夹的内容
> 
> 2.DataChanges.sql
> 
> 3.权限.sql

每个开发人员通过将他们的代码附加到每个文件的末尾来检查他们对特定错误/功能的更改。一旦主要版本完成并在源代码控制中分支，更改脚本文件夹中的 .sql 文件的内容将被删除。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2008-08-05T04:36:13.340

我创建以构建版本命名的文件夹，并将升级和降级脚本放在那里。例如，您可能有以下文件夹：1.0.0、1.0.1 和 1.0.2。每个都包含允许您在版本之间升级或降级数据库的脚本。

如果客户或客户因 1.0.1 版本的问题而打电话给您，而您使用的是 1.0.2，则将数据库恢复到他的版本不会有问题。

在您的数据库中，创建一个名为“schema”的表，您将在其中放入当前版本的数据库。然后编写一个可以为您升级或降级数据库的程序很容易。

就像 Joey 说的，如果你身处 Rails 世界，请使用 Migrations。:)

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2008-08-23T12:58:24.407

对于我当前的 PHP 项目，我们使用 rails 迁移的想法，并且我们有一个迁移目录，其中保存文件标题“migration_XX.sql”，其中 XX 是迁移的编号。目前，这些文件是在进行更新时手动创建的，但它们的创建可以很容易地修改。

然后我们有一个名为“Migration_watcher”的脚本，因为我们处于 pre-alpha 阶段，它当前在每次页面加载时运行，并检查是否有一个新的 migration_XX.sql 文件，其中 XX 大于当前迁移版本。如果是这样，它将针对数据库运行所有 migration_XX.sql 文件，直到最大数量，瞧！架构更改是自动化的。

如果您需要恢复系统的能力，则需要进行大量调整，但这很简单，并且到目前为止对于我们相当小的团队来说工作得很好。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2008-09-17T16:54:23.460

我建议将 Ant（跨平台）用于“脚本”端（因为它实际上可以通过 jdbc 与任何数据库通信）和源存储库的 Subversion。Ant 将允许您在进行更改之前将您的数据库“备份”到本地文件。

1.  通过 Ant 将现有的数据库模式备份到文件
2.  通过 Ant 对 Subversion 存储库进行版本控制
3.  通过 Ant 向 db 发送新的 sql 语句

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2011-02-05T11:08:58.650

Toad for MySQL 有一个称为模式比较的功能，可让您同步 2 个数据库。这是迄今为止我用过的最好的工具。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2011-06-25T13:18:43.990

我喜欢[Yii](http://www.yiiframework.com/)处理数据库迁移的方式。迁移基本上是一个 PHP 脚本实现[`CDbMigration`](http://www.yiiframework.com/doc/api/1.1/CDbMigration)。`CDbMigration`定义一个`up`包含迁移逻辑的方法。还可以实现一种`down`方法来支持迁移的逆转。或者，`safeUp`或`safeDown`可用于确保迁移是在事务的上下文中完成的。

Yii 的命令行工具`yiic`支持创建和执行迁移。可以逐个或批量应用或撤消迁移。创建迁移会导致 PHP 类实现的代码`CDbMigration`基于时间戳和用户指定的迁移名称唯一命名。先前已应用于数据库的所有迁移都存储在迁移表中。

有关详细信息，请参阅手册中的[数据库迁移](http://www.yiiframework.com/doc/guide/1.1/en/database.migration)文章。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2012-01-19T01:52:46.533

尝试 db-deploy - 主要是一个 Java 工具，但也适用于 php。

*   [http://dbdeploy.com/](http://dbdeploy.com/)
*   [http://davedevelopment.co.uk/2008/04/14/how-to-simple-database-migrations-with-phing-and-dbdeploy.html](http://davedevelopment.co.uk/2008/04/14/how-to-simple-database-migrations-with-phing-and-dbdeploy.html)

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2011-03-12T14:15:17.590

恕我直言，迁移确实有一个大问题：

从一个版本升级到另一个版本很好，但是如果您有数百个表和长期的更改历史（就像我们所做的那样），重新安装给定版本可能需要很长时间。

运行从基线到当前版本（数百个客户数据库）的增量历史可能需要很长时间。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-11-04T19:43:11.667

有一个命令行[mysql-diff](http://bitbucket.org/stepancheg/mysql-diff/)工具可以比较数据库模式，其中模式可以是实时数据库或磁盘上的 SQL 脚本。它适用于大多数模式迁移任务。

# sql-server - 我可以对表中的列进行逻辑重新排序吗？

> ID：1610
> 
> 赞同：97
> 
> 时间：2008-08-04T21:37:31.720
> 
> 标签：sql-server

如果我向 Microsoft SQL Server 中的表添加列，我可以控制该列在查询中的逻辑显示位置吗？

我不想弄乱磁盘上列的物理布局，但我想尽可能在​​逻辑上将列分组在一起，以便 SQL Server Management Studio 等工具以方便的方式列出表的内容。

我知道我可以通过 SQL Management Studio 执行此操作，方法是进入表的“设计”模式并拖动列的顺序，但我希望能够在原始 SQL 中执行此操作，以便我可以执行排序从命令行编写脚本。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2008-08-04T21:54:18.707

如果不创建新表，则无法以编程方式（以安全的方式）执行此操作。

当您提交重新排序时，企业管理器所做的是创建一个新表，移动数据，然后删除旧表并将新表重命名为现有名称。

如果您希望列按特定顺序/分组而不改变它们的物理顺序，您可以创建一个您想要的视图。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-02-01T00:10:53.877

我认为这里的每个人都缺少的是，虽然不是每个人都必须处理安装在全国和世界各地的相同软件系统的 10 个、20 个或 1000 个实例，但我们这些设计商业销售软件的人却这样做。因此，我们随着时间的推移扩展系统，在需要新功能时通过添加字段来扩展表，并且这些字段被确定属于现有表，因此，经过十多年的扩展、增长、添加字段等到表格，然后必须从设计、支持到有时挖掘原始数据/故障排除以调试新功能错误，在最初的少数几个中没有您想要看到的主要信息，这是令人难以置信的恶化字段，当您的表可能包含 30、40、50 甚至 90 个字段时，是的，

出于这个确切的原因，我经常希望我能做到这一点。但是没有完全按照 SQL 所做的那样，按照我想要的方式为新表构建一个创建脚本，将插入写入它，然后从现有表中删除所有现有的约束、关系、键、索引等，并重命名“新”表回到旧名称，然后读取所有这些键、关系、索引等......

这不仅乏味、耗时，而且……再过五年，它需要再次发生。

如此大量的工作几乎是值得的，但重点是，这不会是我们最后一次需要这种能力，因为我们的系统将继续增长、扩展，并在需要的驱动下以混乱的顺序获得领域/设计补充。

大多数开发人员从服务于单个公司或非常特定的硬盒市场的单个系统的角度进行思考。

“现成的”但显着进步的设计师和市场开发领导者总是不得不一遍又一遍地处理这个问题，如果有人有创造性的解决方案，他们会喜欢一个创造性的解决方案。这可以轻松地为我的公司每周节省十几个小时，而不必滚动或记住“那个”字段在源数据表中的位置。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-04T22:00:53.233

当 Management Studio 执行此操作时，它会创建一个临时表、复制所有内容、删除原始表并重命名临时表。没有简单的等效 T-SQL 语句。

如果您不喜欢这样做，您总是可以按照您想要的顺序创建一个包含列的表视图并使用它？

编辑：打！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-08-06T15:42:19.283

如果我理解您的问题，您想影响**现有**查询中首先返回的列、第二列、第三列等，对吗？

如果您的所有查询都是用`SELECT * FROM TABLE`- 编写的，那么它们将显示在输出中，因为它们是在 SQL 中布局的。

如果您的查询是用`SELECT Field1, Field2 FROM TABLE`- 编写的，那么它们在 SQL 中的排列顺序无关紧要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-06T18:08:14.190

有一种方法，但它只是暂时用于查询本身。例如，

假设您有 5 张桌子。表被称为`T_Testing`

FirstName、LastName、PhoneNumber、Email 和 Member_ID

您希望它列出他们的 ID，然后是姓氏，然后是名字，然后是电话，然后是电子邮件。

您可以按照 Select 进行操作。

```
Select Member_ID, LastName, FirstName, PhoneNumber, Email
From T_Testing 
```

除此之外，如果您出于某种原因只想将姓氏显示在名字之前，您也可以按如下方式进行：

```
Select LastName, *
From T_Testing 
```

您唯一要确定的是，如果您要使用 Where 或 OrderBy，OrderBy 或 Where 函数需要表示为 Table.Column

例子：

```
Select LastName, *
From T_Testing
Order By T_Testing.LastName Desc 
```

我希望这会有所帮助，我想通了，因为我需要自己做。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-08T14:31:08.820

1.  将现有表编写到查询窗口中。
2.  针对测试数据库运行此脚本（删除 Use 语句）
3.  使用 SSMS 进行所需的列更改
4.  单击生成更改脚本（默认情况下，按钮栏上最左侧和最底部的图标）
5.  将此脚本用于您的真实表

该脚本真正所做的只是创建具有所需列顺序的第二个表，将所有数据复制到其中，删除原始表，然后重命名辅助表以取代它。如果您需要部署脚本，这确实可以节省您自己编写的时间。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-03T10:56:11.390

如果不重新创建整个表，就不可能更改列的顺序。如果您只有几个数据库实例，您可以为此使用 SSMS（选择表并单击“设计”）。

如果您有太多手动流程的实例，您应该尝试以下脚本： [https ://github.com/Epaminaidos/reorder-columns](https://github.com/Epaminaidos/reorder-columns)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-05T20:34:05.200

可以使用 SQL 直接修改系统表来完成。例如，看这里：

[更改表 - 在两者之间添加新列](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=58912)

但是，除非绝对必要，否则我不建议使用系统表。

# ruby - 如何修改 .xfdl 文件？（更新＃1）

> ID：1615
> 
> 赞同：17
> 
> 时间：2008-08-04T21:42:37.933
> 
> 标签：ruby, language-agnostic, xfdl

`.XFDL`文件扩展名标识`XFDL`格式化文档文件。这些属于基于 XML 的文档和模板格式化标准。此格式与 XML 文件格式完全相同，但包含用于安全通信的加密级别。

我知道如何使用在[此处](http://web.archive.org/web/20170903022252/http://www.e-publishing.af.mil:80/viewerdownload.asp)找到的文件查看器查看 XFDL 文件。我还可以通过执行 File:Save/Save As 来修改和保存这些文件。但是，我想即时修改这些文件。有什么建议么？这甚至可能吗？

更新#1：我现在已经成功解码并解`.xfdl`压缩到一个 XML 文件中，然后我可以对其进行编辑。现在，我正在寻找一种将修改后的 XML 文件重新编码回 base64-gzip 的方法（使用 Ruby 或命令行）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-04T22:02:35.180

如果编码是**base64**，那么这是我在网上偶然发现的解决方案：

“解码使用 'encoding=base64' 保存的 XDFL 文件。使用以下文件保存的文件：

```
application/vnd.xfdl;content-encoding="base64-gzip" 
```

是简单的 base64 编码的 gzip 文件。通过首先解码然后解压缩它们，可以轻松地将它们恢复为 XML。这可以在 Ubuntu 上按如下方式完成：

```
sudo apt-get install uudeview
uudeview -i yourform.xfdl
gunzip -S "" < UNKNOWN.001 > yourform-unpacked.xfdl 
```

第一个命令将安装 uudeview，一个可以解码 base64 的包，等等。安装后可以跳过此步骤。

假设您的表单保存为“yourform.xfdl”，uudeview 命令会将内容解码为“UNKNOWN.001”，因为 xfdl 文件不包含文件名。'-i' 选项使 uudeview 无法交互，删除该选项以获得更多控制。

最后一个命令 gunzip 将解码的文件压缩到一个名为“yourform-unpacked.xfdl”的文件中。

**另一种**可能的解决方案 -[这里](http://www.chilkatsoft.com/p/p_531.asp)

*旁注：块引用的 <code> 不适用于长字符串*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-04T22:18:47.987

我现在唯一能想到的答案是 - 阅读 uudeview 的手册。

尽管我很想帮助你，但我不是这方面的专家，所以你必须等待更有知识的人来这里帮助你。

同时，我可以为您提供一些可能对您有所帮助的文档的链接：

*   [UUDeview主页](http://www.fpx.de/fp/Software/UUDeview/)
*   [使用 XDFL 引擎](http://xdflengine.sourceforge.net/doc_1037.html)
*   [XDFL 引擎入门](http://xdflengine.sourceforge.net/doc_1044.pdf)

抱歉，如果这对您没有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-06T13:37:41.657

您不必离开 Ruby 来执行此操作，可以使用 Ruby 中的 Base64 模块对文档进行编码，如下所示：

```
irb(main):005:0> require 'base64'
=> true

irb(main):007:0> Base64.encode64("Hello World")
=> "SGVsbG8gV29ybGQ=\n"

irb(main):008:0> Base64.decode64("SGVsbG8gV29ybGQ=\n")
=> "Hello World" 
```

您可以使用 Kernel#system 调用 gzip/gunzip：

```
system("gzip foo.something")
system("gunzip foo.something.gz") 
```

# visual-studio - Visual Studio 解决方案中的文件夹或项目？

> ID：1623
> 
> 赞同：31
> 
> 时间：2008-08-04T22:00:41.347
> 
> 标签：visual-studio, projects-and-solutions

将解决方案拆分为逻辑层时，何时最好使用单独的项目而不是仅按文件夹分组？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-08-04T22:45:32.940

默认情况下，**总是**在同一个项目中创建新文件夹

*   您将获得单个组件（无需额外的 ILMerge 体操）
*   更容易混淆（因为您将拥有更少的公共类型和方法，理想情况下根本没有）

将源代码分成多个项目只有在您...

*   将源代码的某些部分作为项目的一部分，但默认情况下或根本不可部署（单元测试、额外插件等）
*   更多的开发人员参与其中，您希望将他们的工作视为可消耗的黑匣子。（不太推荐）
*   如果您可以清楚地将您的项目分成独立的层/模块，并且您想确保它们不能交叉使用**内部**成员。（也不推荐，因为您需要决定哪个方面最重要）

如果您认为源代码的某些部分可以重用，仍然不要将其创建为新项目。等到您真的想在另一个解决方案中重用它并根据需要将其从原始项目中隔离出来。编程不是乐高积木，重用通常非常困难，而且通常不会按计划进行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-08-04T22:42:55.067

丹尼写道：

> 我个人觉得，如果将可重用代码拆分到项目中，那么在其他地方使用比仅在文件夹中更简单。

我真的同意这一点——如果你可以重复使用它，它应该在一个单独的项目中。话虽如此，有效重用也非常困难:)

在 SO，我们试图通过三个项目变得非常简单：

*   MVC Web 项目（默认情况下，它很好地将您的图层分隔到文件夹中）
*   用于我们数据库源代码控制的数据库项目
*   针对 MVC 模型/控制器的单元测试

我不能代表所有人，但我很高兴我们保持它的简单性 - 真的加快了构建速度！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-08-17T17:35:22.070

将功能分离到项目中通常是 YAGNI 架构优化。你有多少次重复使用这些单独的项目，真的吗？如果这种情况不经常发生，那么您就会使开发、构建、部署和维护复杂化，以实现理论上的重用。

当你有一个真实的重用用​​例时，我更喜欢分成文件夹（使用适当的命名空间）并重构为单独的项目。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-04T22:14:17.310

我通常为 GUI 做一个项目，为业务逻辑做一个项目，为数据访问做一个项目，为单元测试做一个项目。

但有时基于服务（如果您使用面向服务的架构）进行分离是明智的，例如身份验证、销售等。

我想我工作的经验法则是，如果您可以将其视为具有明确分离关注点的组件，那么另一个项目可能是谨慎的。但我认为文件夹与项目可能只是一种偏好或理念。

我个人觉得，如果将可重用代码拆分到项目中，那么在其他地方使用比仅在文件夹中更简单。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-15T23:45:06.280

我真的认为最好还是拆分项目，但这完全取决于项目的规模和参与项目的人数。

对于较大的项目，我有一个项目

*   数据访问（模型）
*   服务
*   前端
*   测试

我从 Rob Connery 和他的店面应用程序那里得到了模型……似乎工作得很好。

[mvc-店面](http://wekeroad.com/categories/mvc-storefront)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-17T17:19:51.993

> 将源代码分成多个项目只有在您... ... 更多开发人员参与并且您希望将他们的工作视为可消耗的黑匣子时才有意义。（不太推荐）...

为什么不推荐这个？我发现这是一种非常有用的方法来管理一个应用程序，其中有几个开发人员在不同的部分工作。主要通过几乎消除合并使签入变得更加容易。很少有两个开发人员必须同时处理同一个项目。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-10T21:36:06.883

如果您确实要创建多个项目，请确保将代码添加到解决方案的每个人都完全了解它们的意图，并尽一切可能让他们了解项目之间的依赖关系。如果您曾经尝试在有人离开并添加不应该存在的参考文献并在几周内侥幸逃脱的情况下整理混乱，您就会理解这一点

# windows - XML 编辑/查看软件

> ID：1625
> 
> 赞同：40
> 
> 时间：2008-08-04T22:01:10.317
> 
> 标签：windows, xml, linux

推荐使用什么软件来处理和编辑大型 XML 模式？我正在寻找有助于处理大型 XML 文件的 Windows 和 Linux 软件（不必是跨平台的，只需要两者的建议）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-08-06T09:30:50.297

对于 Windows，我发现 Microsoft 自己的免费[XML Notepad](https://microsoft.github.io/XmlNotepad/)是一个非常简单易用的编辑器，具有多种功能。在开发和编辑损坏的 iTunes 库时，用它来检查我的 XML 输出。;)

需要 .net 2.0

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-08-04T22:01:59.580

我可能是老式的，但我更喜欢我的文本编辑器。

我使用 emacs，它有一个相当不错的 xml 模式。

大多数优秀的文本编辑器都会有不错的语法高亮和标签匹配设施。您的 IDE 可能已经这样做了（IntelliJ 想法可以，我相信 Eclipse 也可以）。好的文本编辑器将能够处理*巨大的*文件，但一些文本编辑器可能无法处理它们。我们在谈论多大？

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-08-04T22:23:14.030

我同意您的文本编辑器可能是您最好的选择。如果您需要专门为以可视方式处理 XML 文件而定制的东西，我确实知道一些人发誓[XMLSpy 。](http://www.altova.com/products/xmlspy/xml_editor.html)我敢打赌，你可以找到一些 F/OSS 工作类似的东西，但我不知道。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-08T03:02:39.260

FirstObject XML 编辑器。 [http://www.firstobject.com/dn_editor.htm](http://www.firstobject.com/dn_editor.htm)

它是免费的，用 C++ 编写，针对处理非常大的 xml 文件进行了优化。

虽然它的功能相对有限，但它可以在几秒钟内加载 100MB 以上的未格式化文件、缩进它们并使用树视图定位特定元素。通过使用“刷新”选项，您还可以将树与文本视图同步。

UNIX 的精神就是让一个简单的工具很好地完成特定的工作。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-08-19T21:15:28.863

您至少需要一个像样的文本编辑器作为基线，前面提到的[带有 nxml 模式的 emacs是一个非常不错的选择。](http://www.emacswiki.org/cgi-bin/wiki/NxmlMode)但是，随着模式变得越来越大，您可能会失去概览，尤其是当您编写可能非常冗长的 XML 模式文档时。您将需要某种可视化：XML Spy 没问题，Oxygen 很棒但价格昂贵，但事实证明，在 Windows 上，您在免费软件[XMLPad](http://www.wmhelp.com/download.htm)中几乎拥有所有需要的功能。

当您开始编辑实例 XML 文档（甚至编辑 XML 模式）时，您需要对模式进行动态验证，并在可能的情况下自动完成属性和元素。Emacs 仅支持使用基于松弛 NG 模式的动态验证和自动完成（但任何 XSD 都可以转换为松弛 NG 模式）。

如果您对此有任何选择，请考虑使用[Relax NG](http://relaxng.org/)作为您的模式语法，它更具可读性和可维护性。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-08-04T22:30:00.537

我经常使用 XML，并且发现[Oxygen](http://www.oxygenxml.com/)是一个很棒的编辑器。它是跨平台的并且具有图形模式编辑器，但由于我使用的是 DTD 而不是模式，因此我不能保证模式编辑器的质量。编辑包的其余部分（例如 XML 编辑器和 XSLT 调试器）是可靠的，因此值得一试。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-08T03:46:51.650

Altova 的[XMLSpy](http://www.altova.com)可能是最好的。它为您的数据/模式、XPath 工具提供不同的视图，并生成良好的图表等。不过确实要花不少钱。这是一个成熟的产品，因此您不会像使用其他一些工具那样快速遇到限制。

[Liquid XML](http://www.liquid-technologies.com/)是一个相当不错但相对较新的替代方案。这是一个很好用的应用程序，甚至还有免费版本！这是一个值得关注的工具。

这两种产品都有一个方便的功能，可以根据您的模式生成示例 XML 文件。

相比之下，Oracle 的 JDeveloper（我相信是基于 Borland Jbuilder）试图提供一个体面的模式编辑器，但它有时会产生无效的模式文件。注意到这一点后，我很快就停止使用它。

我强烈推荐查看 IBM 的[XML Schema Quality Checker](http://www.alphaworks.ibm.com/tech/xmlsqc)。此命令行工具根据 WC3 的 XML Schema 语言验证您的模式。即使您已经使用其他工具构建了架构，这也是一个好主意。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-19T07:55:18.653

我在 GNU Emacs 中使用 nxml-mode 来编辑 xml，包括非常大的文件。我用了很长时间 - 它很快，提供 xml 的即时验证，并为标签和属性名称提供完成功能

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-08-04T22:26:04.227

[oXygen XML Editor](http://www.oxygenxml.com/)是一个很棒的 Windows IDE，虽然有点贵。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-08-06T09:33:16.160

Altova 的[XML Spy](http://www.altova.com/products/xmlspy/xml_editor.html)是一个很棒的编辑器，但不一定是最便宜的选择。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-08-26T10:18:16.700

如果您需要长期广泛的 XML IDE，我强烈推荐[Stylus Studio 。](http://www.stylusstudio.com)我主要将它用于 XSLT 开发，但它支持几乎所有您想要做的与 XML 相关的开发。它仅适用于*Windows*（非常烦人）。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-11-18T13:22:11.230

我正在使用[Cooktop](http://www.xmlcooktop.com/)（也可在[tucows](http://www.tucows.com/preview/350904)上获得），我对 XPath 测试功能非常满意。

*   Cooktop 是 XML、DTD 和 XSLT 文档的编辑器和开发环境
*   Cooktop 是一个 Windows 应用程序
*   最重要的是，它是免费的！

特征

*   颜色编码的 XML、DTD 和 XSLT 编辑
*   检查格式正确并验证
*   几乎所有 XSLT 引擎的样式表测试
*   XPATH 测试
*   可定制的“代码位”库
*   通过 Tidy 格式化 XML
*   下载量小，占用空间小

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-08-04T22:27:00.810

[检查了开源 XML 编辑器](http://www.linux.com/articles/43020)——不过它有点过时了。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-08-06T10:04:35.237

+1 对于 XML Spy，我使用了独立产品和 Visual Studio 插件，我印象深刻。

在 FOSS 方面，我使用[Notepad++](http://notepad-plus.sourceforge.net/uk/site.htm)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-08-16T20:22:16.930

最近我正在使用 Eclipse 编辑 XSLT 文件，但由于某种原因，Eclipse 不再执行任何自动完成功能。所以我切换到 Emacs 出色的 nxml 模式，我不确定我是否会回去。您会获得非常易于使用的自动完成功能，而且速度非常快。唯一的问题是您必须提供文档模式的 RELAX NG 版本，但是有一些工具可以从您的 DTD 或模式中为您生成一个。

查看[http://www.xmlhack.com/read.php?item=2061](http://www.xmlhack.com/read.php?item=2061)了解更多信息。

对于非自由软件，我支持 OxygenXML 的建议。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-08-16T20:25:09.920

我使用[Notepad++](http://notepad-plus.sourceforge.net/uk/site.htm)作为我的编辑器。您还可以添加专门处理 XML 的[插件。](http://sourceforge.net/projects/npp-plugins/)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2010-12-07T14:09:54.557

**XML 复制编辑器**- Windows 和 Linux

快速、免费并支持 XML 模式验证。

Official Website [http://xml-copy-editor.sourceforge.net/](http://xml-copy-editor.sourceforge.net/)

How to install in Ubuntu [http://ubuntuforums.org/showthread.php?t=1640003](http://ubuntuforums.org/showthread.php?t=1640003)

# podcast - 有哪些好的技术播客？

> ID：1644
> 
> 赞同：526
> 
> 时间：2008-08-04T22:17:08.503
> 
> 标签：podcast

是的，播客，我可以在上班路上听的那些不错的小有声读物。就目前的播客数量而言，这就像大海捞针，只是大海捞针恰好是互联网，并且充满了太多这些“热门新小工具”的东西:(

现在，即使**我**现在主要是 .NET 开发人员，也许有人知道人们关于整个软件生命周期的一些好的 Podcast？单元测试、持续集成、文档、部署……

那么 - 你们在听什么？

* * *

请注意，分类有些主观，可能不是 100% 准确，因为许多播客涵盖多个领域。根据被认为是“主要”区域的内容进行分类。

# 通用软件工程/生产力

*   [堆栈溢出] [1](https://blog.stackoverflow.com/category/podcasts/)（不活动，但仍然很好听）
*   [TekPub（需要付费订阅）](http://tekpub.com)
*   [软件工程电台](http://www.se-radio.net/)
*   [43 个文件夹](http://www.43folders.com/podcast)
*   [观点](http://perspectives.on10.net/)
*   [Dobb 博士的](http://www.drdobbs.com/tv/)（现在是视频源）
*   [务实的播客](http://www.pragprog.com/podcasts)（非活动）
*   [它很重要](http://www.thoughtworks.com/what-we-say/podcasts.html)
*   [敏捷工具包播客](http://agiletoolkit.libsyn.com/)
*   [堆栈跟踪](http://thestacktrace.libsyn.com/)（非活动）
*   [谈判](http://www.parleys.com/display/PARLEYS/Home#page=Home)
*   [技术](http://techzinglive.com/)
*   [创业成功播客](http://startuppodcast.wordpress.com/)
*   [伯克利 CS 班讲座](http://webcast.berkeley.edu/course_feeds.php)
*   [牙线周刊](http://twit.tv/FLOSS)
*   [这个开发者的生活](http://www.thisdeveloperslife.com/)

# .NET/Visual Studio/微软

*   [羊群代码](http://herdingcode.com/)
*   [汉塞尔分钟](http://www.hanselminutes.com/)
*   [.NET 摇滚！](http://www.dotnetrocks.com/)
*   [油炸字节](http://deepfriedbytes.com/)
*   [Alt.Net 播客](http://altnetpodcast.com/)（非活动）
*   [多态播客](http://www.polymorphicpodcast.com/)（不一致）
*   [闪闪发光的客户端（Silverlight 播客）](http://www.sparklingclient.com/)
*   [电视！](http://www.dnrtv.com/default.aspx)
*   [意大利面条代码](http://feeds.feedburner.com/SpaghettiCodePodcasts)
*   [ASP.NET 播客](http://aspnetpodcast.com/CS11/Default.aspx)
*   [频道 9](http://channel9.msdn.com/Media/Podcasts/)
*   [电台 TFS](http://www.radiotfs.com/)
*   [PowerScripting 播客](http://feeds.feedburner.com/powerscripting)
*   [口渴的开发者](http://thirstydeveloper.com/)
*   [优雅的代码](http://elegantcode.com/elegantcode-cast/)（非活动）
*   [连接秀](http://www.connectedshow.com/)
*   [狡猾的编码员](http://craftycoders.com/?tag=/podcast)
*   [编码质量保证](http://codingqa.com)

# jQuery

*   [耶查询](http://yayquery.com/)
*   [jQuery 官方播客](http://blog.jquery.com/2009/11/13/announcing-the-official-jquery-podcast/)

# Java/Groovy

*   [爪哇队](http://javaposse.com/)
*   [圣杯播客](http://www.grailspodcast.com/blog/list)
*   [Java 技术内幕](http://www.javaworld.com/podcasts/jtech/)
*   [地下室编码员](http://basementcoders.com/)

# 红宝石/导轨

*   [Railscasts](http://railscasts.com/)
*   [Rails 羡慕](http://railsenvy.com/podcast)
*   [Ruby on Rails 播客](http://podcast.rubyonrails.org/)
*   [鲁比宇宙](http://rubiverse.com/)
*   [红宝石5](http://ruby5.envylabs.com/)

# 网页设计 / JavaScript / Ajax

*   [网络开发电台](http://webdevradio.com/)
*   [博格世界](http://boagworld.com/)
*   [里辛顿播客](http://therissingtonpodcast.co.uk/)
*   [阿贾贤](http://ajaxian.com/by/category/podcasts)
*   [YUI 剧院](http://developer.yahoo.com/yui/theater/)

# Unix / Linux / Mac / iPhone

*   [Mac 开发者网络](http://www.mac-developer-network.com/)
*   [黑客公共广播电台](http://www.hackerpublicradio.org/)
*   [Linux 亡命之徒](http://www.linuxoutlaws.com/)
*   [Mac OS 肯](http://macosken.com/)
*   [LugRadio Linux 广播节目](http://lugradio.org/)（非活动）
*   [Linux 动作秀！](http://www.jupiterbroadcasting.com/?cat=4)
*   [Linux 内核邮件列表 (LKML) 摘要播客](http://www.kernelpodcast.org/)
*   [斯坦福的 iPhone 编程课](http://itunes.stanford.edu/)
*   [高级 iPhone 开发课程 - 麦迪逊地区技术学院](http://www.sunsetlakesoftware.com/2010/06/03/advanced-iphone-development-course-now-itunes-u)
*   [WWDC 2010 会议视频（需要 Apple Developer 注册）](http://developer.apple.com/videos/wwdc/2010/)

# 系统管理、安全或基础设施

*   [RunAs 电台](http://feeds.feedburner.com/RunasRadio)
*   [立即安全！](http://www.grc.com/securitynow.htm)
*   [Crypto-Gram 安全播客](http://crypto-gram.libsyn.com/)
*   [哈克5](http://www.hak5.org/)
*   [VMWare VMTN](http://blogs.vmware.com/vmtn/podcasts/index.html)
*   [视窗周刊](http://twit.tv/ww)
*   [PaulDotCom 安全](http://pauldotcom.com/)
*   [寄存器 - 半相干计算](http://www.theregister.co.uk/hardware/semi_coherent/podcast.rss)
*   [羽铸](http://feathercast.org/)

# 通用技术/商业

*   [泰克兹拉](http://revision3.com/tekzilla/)
*   [本周科技](http://twit.tv/twit)
*   [卫报科技周刊](http://www.guardian.co.uk/technology/series/techweekly)
*   [PCMag 广播播客](http://www.pcmag.com/category2/0,2806,2007098,00.asp)（非活动）
*   [创业角](http://ecorner.stanford.edu/)
*   [管理工具](http://www.manager-tools.com/)

# 其他/杂项。/ 播客网络

*   [IT 对话](http://itc.conversationsnetwork.org/)
*   [Retrobits 播客](http://retrobits.libsyn.org/)
*   [无议程网播](http://cagematch.dvorak.org/index.php/board,45.0.html)
*   [脾气暴躁的怪胎](http://www.crankygeeks.com/)
*   [命令行](http://thecommandline.net/)
*   [自由电台](http://www.freelanceswitch.com/podcasts/)
*   [IBM developerWorks](http://www.ibm.com/developerworks/podcast/)
*   [注册 - 开放季节](http://www.theregister.co.uk/software/open_season/podcast.rss)
*   [醉酒和退休](http://www.drunkandretired.com/thepodcast/)
*   [技术计量学](http://itc.conversationsnetwork.org/series/technometria.html)
*   [草皮这个](http://www.sodthis.com/podcast/)
*   [Radio4Nerds](http://www.radio4nerds.com/)
*   [黑客混合泳](http://hackermedley.org)

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2008-08-04T22:35:52.133

我喜欢

**通用软件**

*   [Stackoverflow](https://blog.stackoverflow.com/category/podcasts/)（可能太明显了）
*   [油炸字节](http://deepfriedbytes.com/)
*   [汉塞尔分钟](http://www.hanselminutes.com/)
*   [软件工程电台](http://www.se-radio.net/)（通过布伦登）
*   [羊群代码](http://herdingcode.com/)

**点网**

*   [Alt.NET 播客](http://altnetpodcast.com/)
*   [多态播客](http://www.polymorphicpodcast.com/)

**生产率**

*   [43 个文件夹](http://www.43folders.com/podcast)

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2008-08-13T02:30:36.237

我的列表：

[汉塞尔分钟](http://www.hanselminutes.com/)

[.NET 摇滚！](http://www.dotnetrocks.com/)

[羊群代码](http://herdingcode.com/)

[油炸字节](http://deepfriedbytes.com/)

[意大利面条代码](http://feeds.feedburner.com/SpaghettiCodePodcasts)

[闪闪发光的客户](http://www.sparklingclient.com/)

[水管工@工作](http://plumbersatwork.com/)

[多态播客](http://www.polymorphicpodcast.com/)

[ALT.NET 播客](http://altnetpodcast.com/)

[ASP.NET 播客](http://aspnetpodcast.com/CS11/Default.aspx)

[电台 TFS](http://www.radiotfs.com/)

[PowerScripting 播客](http://feeds.feedburner.com/powerscripting)

[软件工程电台](http://www.se-radio.net/)

[stackoverflow 播客](https://blog.stackoverflow.com/category/podcasts/)

[口渴的开发者](http://thirstydeveloper.com/)

[ThoughtWorks - IT 很重要的播客](http://www.thoughtworks.com/what-we-say/podcasts.html)

[敏捷工具包播客](http://agiletoolkit.libsyn.com/)

[阿贾西安播客](http://ajaxian.com/by/category/podcasts)

[务实的播客](http://pragprog.com/podcasts)

[通道 9 音频馈送](http://tinyurl.com/25l95t)

**编辑：错过了一个：** [优雅的代码演员](http://elegantcode.com/cast/)

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2008-08-05T02:21:00.463

这不是专门针对开发的，但来自 Steve Gibson 和 Leo Laporte 的[Security Now](http://www.grc.com/securitynow.htm)是对安全问题的精彩讨论。我认为几乎所有关心安全的计算机用户都必须倾听，尤其是对于同时负责其网站安全并至少部分负责其用户安全的 Web 开发人员而言。

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2008-08-06T15:44:59.433

我**爱** [牙线周刊](http://twit.tv/FLOSS)。Leo 和 Randal Schwartz 采访开源极客的另一个 Twit 播客。我最喜欢的是他们对 Dan Ingalls 的采访（Smalltalk/Squeak 声名）。我也很喜欢他们对 Richard Hipp (SQLite) 的采访。

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2008-08-05T14:51:08.623

我是否会因为暗示 Stack Overflow 播客作为播客非常糟糕而被贬低？[任何人，您都可以在itconversations.com](http://itconversations.com)上找到它，以及一些不错的播客 。

由于这个问题要求一个“好”而不是“详尽”的列表，那么这显然只是我的意见。我的观点在 .NET 和 Java 之间来回跳跃，只是极客。明显的遗漏会反映我对“好”的看法。（咳咳，DNR。）

其余的可以通过在 iTunes 中进行播客搜索轻松找到，或者只是谷歌搜索（我将在这里重复一些内容以压缩列表）：

*   [Buzz Out Loud](http://bol.cnet.com)（一般消费技术，每日）
*   本周技术（又名 TWiT。每周消费者技术。）
*   Java 团队（每周）
*   Google Developer Podcast（长期闲置，但似乎又回来了，可能更名为 Google Code Review。时间表不确定，技术各不相同。）
*   [Hanselminutes](http://hanselminutes.com)（通常但并非总是与 .NET 相关）
*   MacBreak Weekly（TWiT 的 Mac 版）
*   多态播客（所有 .NET，通常是 ASP.NET）
*   Pixel8ed（所有 .NET，专注于 UI。做多态播客的同一个人）
*   tech5（消费科技。主要是浪费 5 分钟，因为德沃夏克是如此……斯波尔斯基。）

* * *

## 回答 #6

> 赞同：29
> 
> 时间：2008-08-04T22:26:29.483

在 Stack Overflow 播客中提到了[SE-radio 。](http://www.se-radio.net/)它很深入。

[此外，如果您是一名有抱负的 JavaScript 开发人员，Douglas Crockford 在YUI Developer Theater](http://developer.yahoo.com/yui/theater/)上的“JavaScript 编程语言”和“高级 JavaScript”讲座非常棒。播客上还有一些其他的宝石。

* * *

## 回答 #7

> 赞同：26
> 
> 时间：2008-08-05T05:13:05.687

我经常听[javaposse](http://javaposse.com)，它们主要涵盖 Java，但不仅仅是。

* * *

## 回答 #8

> 赞同：24
> 
> 时间：2008-08-20T03:28:03.507

*   **JavaPosse**如果你想听听你（n）想知道的关于闭包的一切（7/2010 - 这实际上是一个很好的播客，但现在它是你（n）想知道的关于 apple 和 android 的全部）
*   **.NET Rocks**当您想听到关于从 VB6 到 VB.NET 过渡期间战壕中的数据绑定控件的第 10 亿次采访时
*   **Stack Overflow**你真的很想听听一个不懂 C 的人和一个假装发明它的人辩论，或者只是听一下对 wallee 的剧透
*   **立即安全！**你想听听有人认为他是世界上最聪明的安全架构师，因为他把一切都写在汇编程序中（不，我不是在开玩笑），同时忽略了多年来存在的问题的明显解决方案。请不要听这个以为很好
*   **雅虎！Dev Network** - 我在这里没有看到很多好东西，但是 Crockford 关于高级 JavaScript 的演讲很棒

* * *

## 回答 #9

> 赞同：20
> 
> 时间：2008-09-09T04:06:16.807

**建议：** 如果您将每个推荐的播客作为*单独*的答案发布，那么人们可以为您的“答案”投票。

顺便说一句，乔尔在 Stack Overflow 播客上讨论了这个问题（在成绩单 Wiki 中找不到参考）并提出了类似的建议： - 将您建议的“最喜欢的”（在这种情况下为技术播客）发布为一个问题：“你喜欢< > 播客并将其标记为“技术播客”。

这样做的好处是我们得到了一个简单的民意调查。*是的，实际上进行*民意调查会很好，但这还不是 Stack Overflow 功能。

* * *

## 回答 #10

> 赞同：19
> 
> 时间：2008-08-04T22:36:18.327

谷[歌开发者播客](http://google-code-updates.blogspot.com/2007/05/introducing-google-developer-podcast.html)很好。

* * *

## 回答 #11

> 赞同：15
> 
> 时间：2008-09-07T05:20:49.217

The way I understand the question, you are asking for developer centric podcast. My personal number one is *[Late Night Cocoa](http://www.mac-developer-network.com/category/shows/podcasts/lnc/)* from the ***[Mac Developer Network](http://mac-developer-network.com/)*** followed by *[Mac Developer Roundtable](http://www.mac-developer-network.com/category/shows/podcasts/mdr/)*. Although I agree that every developer should probably listen to Steve Gibson's *[Security Now!](http://www.grc.com/securitynow.htm)* (with Leo Laporte's ***[TWiT network](http://thisweekintech.com/)***).

For general tech stuff, check out other TWiT podcasts: *[This week in Tech](http://thisweekintech.com/twit)*, *[MacBreak Weekly](http://thisweekintech.com/mbw)*, *[MacBreack Tech](http://macbreaktech.com/)* (with ***[PixelCorps](http://www.pixelcorps.tv/)***), *[Windows Weekly](http://thisweekintech.com/ww)* and *[FLOSS Weekly](http://thisweekintech.com/FLOSS)*

On a side note: relevant to some developers who think about becoming a Micro-ISV in the Apple Universe: *[MacSB - Mac Software Business](http://mac-developer-network.com/podcasts/macsb/index.html)*

* * *

## 回答 #12

> 赞同：15
> 
> 时间：2008-08-05T04:59:43.607

布拉德的名单很不错。我也听：

*   [Sparkling 客户端](http://www.sparklingclient.com/)（Silverlight 特定）
*   乔恩·乌德尔的[观点](http://perspectives.on10.net/)系列
*   [Herding Code](http://herdingcode.com)（我与 Kevin Dente、Scott “lazycoder” Koon 和 K. Scott Allen 一起制作的播客的无耻插件。我们最近[就 Stack Overflow 采访了 Jeff Atwood](http://herdingcode.com/?p=36)，讨论了网站的设计方式和背后的技术。

* * *

## 回答 #13

> 赞同：14
> 
> 时间：2008-08-16T22:23:30.477

我在类似的讨论中发现了这个，我认为是在 Reddit： [UC Berkeley Webcast](http://webcast.berkeley.edu/course_feeds.php) 我发现它最有用，因为它播客了 Berkley 课程的整个课程，例如操作系统和系统编程、计算机程序的结构和解释、数据结构和编程方法论等。

* * *

## 回答 #14

> 赞同：12
> 
> 时间：2008-09-09T20:14:27.867

几乎所有我最喜欢的播客都已经被提及，但不是第一名。帮自己一个忙，收听有史以来最好的播客，[Linux 广播节目 - LugRadio](http://lugradio.org)。

* * *

## 回答 #15

> 赞同：10
> 
> 时间：2008-08-04T22:21:17.030

如果你喜欢网页设计和网站创建，那么我推荐[Boagworld](http://boagworld.com/)和[The Rissington 播客](http://therissingtonpodcast.co.uk/)，即使你不是。

* * *

## 回答 #16

> 赞同：9
> 
> 时间：2008-08-12T12:34:44.473

[我可以支持 Jon Galloway 对Herding Code](http://herdingcode.com)的提及，并且由于我与播客完全无关，没有任何收获，我的意见可能比他的更有价值:-)。

那里只有几个，因为它相对较新，但它们挤满了与当今编程范式和策略非常相关的好东西。

我也喜欢他们采用的流畅格式，因为 4 个人都在一个主题上提供意见可以与他们中的所有（大多数？）拨号进行非常生涩的对话，但无论是帖子编辑还是只是一个好的格式，无论哪种方式，它都会给最终用户带来非常舒适的聆听体验。坚持下去，伙计们！

希望有帮助，罗布·G

* * *

## 回答 #17

> 赞同：9
> 
> 时间：2008-08-05T08:43:05.667

还要确保您不会错过Carl Franklin（.NET 摇滚背后的人）发布的[dnrTV 网络广播节目。](http://www.dnrtv.com/default.aspx)即使它不是播客，并且在观看时需要更多的注意力，它也确实提供了丰富的信息，如果您熟悉 .NET 和 Microsoft 相关技术，您将学到很多东西。

* * *

## 回答 #18

> 赞同：8
> 
> 时间：2008-08-14T16:43:53.043

当然，除了 Stack Overflow，这是我的。

*   许多人已经提到[了 Hanselminutes](http://www.hanselminutes.com/hanselminutes_mp3Direct.xml)。
*   有些人已经提到了[.NET Rocks！](http://feeds.feedburner.com/netRocksFullMp3Downloads)
*   没有那么多人提到[RunAs Radio](http://feeds.feedburner.com/RunasRadio)。

我无法相信其中一些列表的大小。对于播客，我喜欢保持列表简短且质量高。因此，我倾向于跳过 ITConversations 等聚合。人。

* * *

## 回答 #19

> 赞同：8
> 
> 时间：2008-08-10T00:15:45.340

似乎还没有提到这个。

[http://thecommandline.net/——](http://thecommandline.net/ "命令行") “探索技术、社会和公共政策交汇处的粗糙边缘。”

他做每周新闻节目和每周主题节目。

来自该网站的 **背书**：“深思熟虑、信息丰富且深刻，真正深入到新闻池的极客末端。有很好的分析和反思，以及对常见操作系统的重要安全问题的详细解释等等。” ——科里·多克托罗

* * *

## 回答 #20

> 赞同：8
> 
> 时间：2008-09-09T20:34:08.927

不是硬核技术，但我真的很喜欢[Drunk and Retired](http://www.drunkandretired.com/podcast/)。这就像你在和你的程序员伙伴交谈，生活中混杂着一些东西。

* * *

## 回答 #21

> 赞同：7
> 
> 时间：2008-08-29T08:11:09.897

Ruby on Rails 世界的每周更新：[Rails Envy](http://www.railsenvy.com/)。

thestacktrace是[一个](http://thestacktrace.libsyn.com/)很好的通用编程播客，涵盖了从 git 到[Scala](http://en.wikipedia.org/wiki/Scala_(programming_language))的所有内容。

* * *

## 回答 #22

> 赞同：7
> 
> 时间：2008-08-09T03:00:11.030

*   [牙线周刊](http://twit.tv/FLOSS)
    *   [务实的播客](http://www.pragprog.com/podcasts)
    *   [Rails 羡慕](http://railsenvy.com/podcast)
    *   [网络开发电台](http://webdevradio.com/)

* * *

## 回答 #23

> 赞同：7
> 
> 时间：2008-08-19T05:25:52.057

如果您开始使用 8 位计算机，请不要忘记您的根源：
[Retrobits 播客](http://retrobits.libsyn.org/)

* * *

## 回答 #24

> 赞同：7
> 
> 时间：2008-08-05T04:49:15.030

扩展[Mike Powell的说法，我实际上是](https://stackoverflow.com/users/205/mike-powell)[http://www.twit.tv](http://www.twit.tv)上几乎所有播客的忠实粉丝。大部分内容都被淡化了一点，但一些演讲者是顶尖的思想家——尤其是在旗舰节目“科技本周”上。

哦 - 还有 NPR 上的 Car Talk，但那些人几乎从来没有进入过 SDLC！

* * *

## 回答 #25

> 赞同：6
> 
> 时间：2008-08-26T18:58:16.077

如果您对 Linux 感兴趣，[Linux Action Show](http://www.linuxactionshow.com/)是一个精彩的播客！

它是关于 Linux 新闻、发行版和软件发布以及基于 Linux 的硬件测试（如 drobo、Amazon Kindle 等）。质量非常好，主持人布莱恩和克里斯听起来很棒。

这是我的第一播客！

另外，我刚刚发现 IBM 提供了一些看起来很有趣的[开发人员播客](http://www.ibm.com/developerworks/podcast/)，顺便说一下，有些来自 Erich Gamma。当然，它更面向 Java 和 Eclipse（它是 IBM）。

* * *

## 回答 #26

> 赞同：5
> 
> 时间：2008-08-26T19:03:31.803

[http://herdingcode.com/](http://herdingcode.com/)

* * *

## 回答 #27

> 赞同：4
> 
> 时间：2008-08-21T03:05:23.427

加一为以下：

*   [爪哇队](http://www.javaposse.com "爪哇队")
*   [软件工程电台](http://www.se-radio.net "软件工程电台")
*   [圣杯播客](http://www.grails.org/Grails+Podcast "圣杯播客")

* * *

## 回答 #28

> 赞同：4
> 
> 时间：2009-01-06T18:08:28.230

我最喜欢的是[管理器工具](http://www.manager-tools.com)。从技术上讲，它是一个商业播客，但对于在公司环境中工作的程序员或其他个人贡献者来说非常有价值。听了 3 年，StackOverflow 的新手

——迈克

* * *

## 回答 #29

> 赞同：4
> 
> 时间：2009-04-15T08:08:26.530

[Linux Outlaws](http://www.linuxoutlaws.com)相当不错。他们讨论 GNU/Linux 发行版、软件和 IT 新闻。

* * *

## 回答 #30

> 赞同：3
> 
> 时间：2009-04-29T23:03:36.170

[优雅的代码演员](http://elegantcode.com/elegantcode-cast/)

* * *

## 回答 #31

> 赞同：2
> 
> 时间：2008-09-09T20:56:53.787

我将添加[Crypto-Gram 安全播客](http://crypto-gram.libsyn.com/)。基本上，Dan Henage 正在阅读[Bruce Schneier](http://www.schneier.com/crypto-gram.html)时事通讯 Crypto-Gram。

我收听的大多数其他播客都被提及（TwiT、Security Now!、Cranky Geeks）。

我的2c

* * *

## 回答 #32

> 赞同：2
> 
> 时间：2008-09-04T21:29:53.953

我非常迷恋：

*   爪哇队
*   软件工程电台

* * *

## 回答 #33

> 赞同：2
> 
> 时间：2008-08-27T20:31:06.563

我从得分为 5 或更高的答案（以及原始问题中的答案）中提取了所有播客，并将它们添加到 Cullect.com 上的聚合页面：

[http://www.cullect.com/StackOverflow-Recommended-Podcasts](http://www.cullect.com/StackOverflow-Recommended-Podcasts)

如果您赶时间或不想浏览答案中的所有重复内容，它提供了一种查看这些播客的便捷方式以及预览它们的方式。我目前被设置为“精选”的唯一策展人，但如果其他人想帮助它随着答案的变化而调整，请告诉我。

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2009-04-02T10:18:50.493

Here is my list:

*   [The Java Posse](http://javaposse.com/) - a must for Java programmers
*   [FLOSS Weekly](http://twit.tv/FLOSS) - On open source projects, usually very geekish, but Leo Laporte is very funny
*   [Stack Overflow](https://blog.stackoverflow.com/) - I believe most of the readers know what I'm talking about...
*   [Software Engineering Radio](http://www.se-radio.net/) - Very interesting interviews on various aspects
*   [FeatherCast](http://feathercast.org/) - Seldom updated, interviews on Apache projects
*   [Parleys.com](http://www.parleys.com/) - Lectures served as podcast, highly biased to the Spring project

Not strictly technical, but highly recommended

*   [Entrepreneurial Thought Leaders](http://edcorner.stanford.edu/) - Lectures who built companies or other endeavours. Very interesting.

* * *

## 回答 #35

> 赞同：2
> 
> 时间：2008-09-19T23:57:26.660

[技术计量学](http://itc.conversationsnetwork.org/series/technometria.html)

* * *

## 回答 #36

> 赞同：2
> 
> 时间：2009-01-06T18:16:16.123

[脾气暴躁的怪胎](http://www.crankygeeks.com/)

* * *

## 回答 #37

> 赞同：2
> 
> 时间：2009-07-15T19:47:03.040

[通用 Macintosh 商业主题的 MDN Show](http://itpc://feeds2.feedburner.com/TheMdnShow)。
[cocoaFusion](http://www.cocoafusion.net/)和[coreInt](http://coreint.org/)用于深入的 Cocoa 主题。

* * *

## 回答 #38

> 赞同：2
> 
> 时间：2010-03-09T00:57:04.310

我最近偶然发现了一个名为[Hacker Medley](http://hackermedley.org/)的新播客。这是一个由 Nat Friedman 和 Alex Gravely 制作的简短（约 15 分钟）播客。我觉得前三集很有趣！

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2008-08-06T18:07:16.543

这不一定是你可以在你的 iPod 上弹出然后放松的东西，但[Diggnation](http://diggnation.com)是一个与 Kevin Rose 和 Alex Albrecht 合作的视频播客。

They talk about "some of the top stories on the user-submitted news site digg.com". This doesn't really have much in the way of software development (though sometimes a story pops up with that), but is great for entertainment value.

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2008-08-09T10:34:06.527

不是技术播客，但我真的不得不提到[FreelanceRadio](http://freelanceswitch.com/podcasts/)。一个非常棒的，有时很有趣的资源。我在早上上班的路上听他们的。有时自己一个人傻笑会觉得很愚蠢：P

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2008-08-16T19:06:55.553

我确实喜欢 TWIT 网络的所有播客，尽管 FLOSS Weekly 和 Security Now 是我最喜欢的“技术”播客。我实际上从未听过 Stack Overflow 播客，但在看到这里的所有建议后肯定会试一试。

另外，我相信 Alex Lindsay（来自 Pixel Corps，经常在 TWIT 的 Macbreak Weekly 上）将开始一个关于 Mac 开发的技术性播客。我很期待这个，因为我是一名初级 Java 程序员，并且对学习 Xcode 和 Obj-C 很感兴趣。

* * *

## 回答 #42

> 赞同：1
> 
> 时间：2008-08-18T18:23:39.413

我最喜欢的是：

*   堆栈溢出
*   TWiT
*   现在的安全

我喜欢在 TWiT 上听 John C. Dvorak，尽管我从未尝试过他的其他播客。他真的很了解他的东西，而且经常很有趣，但有时他只是一个烦人的老脾气。

我曾经听过[PaulDotCom 安全周刊](http://pauldotcom.com/)，但他们谈论了很多关于渗透测试的内容，而不是关于计算机安全的其他方面的内容。

* * *

## 回答 #43

> 赞同：1
> 
> 时间：2008-09-16T05:16:57.170

[Java Technology Insider](http://www.javaworld.com/podcasts/jtech/) is what I found when I went looking for a Java equivalent of .NET Rocks! The interviewer is an enthusiastic amateur, and the guests are usually good.

* * *

## 回答 #44

> 赞同：1
> 
> 时间：2009-06-09T04:37:53.960

[Connected Show](http://www.connectedshow.com)涵盖了新的 Microsoft 技术和开发人员社区的其他有趣主题。

* * *

## 回答 #45

> 赞同：1
> 
> 时间：2008-08-12T12:06:03.157

我听《卫报》的[TechWeekly 节目](http://www.guardian.co.uk/technology/series/techweekly)，它是由记者为主流报纸做的，非常有见识。制作精良且最新。专注于英国和欧洲。

* * *

## 回答 #46

> 赞同：1
> 
> 时间：2009-05-26T10:05:38.613

我最喜爱的：

1.  口渴的开发者
2.  像素8d
3.  堆栈溢出
4.  点网岩
5.  alt.net 播客
6.  码播
7.  汉塞尔分钟

干杯

* * *

## 回答 #47

> 赞同：1
> 
> 时间：2008-08-06T10:41:16.910

Stack Overflow 播客是我现在在这里的原因。不幸的是，Jeff 在管理期望和设定时间表方面是一个糟糕的项目经理——但测试版已经到来，而且相当不错！.NET 世界对我来说是陌生的，所以我很喜欢 Stack Overflow 播客。

This Week in Tech 是我经常收听的另一个播客。不幸的是，我觉得除了 Leo Laporte 之外的其他小组成员在演出前都没有做任何功课，所以很多意见（尤其是 John C. Dvorak 的）都是不知情的。

我最近开始收听 IT Conversations 播客，并获得了足够多的好信息来捐赠。选择参差不齐，但我真的很喜欢我无法参加的各种会议的演讲。

感谢其他人回复了我没有听说过的其他播客的链接。我是新手，所以我还不能提高分数。

* * *

## 回答 #48

> 赞同：1
> 
> 时间：2008-09-09T20:19:49.897

值得订阅[Google Tech Talk YouTube 频道](http://www.youtube.com/user/googletechtalks)。这是一个视频播客，其中包含一系列非常有趣、范围广泛的演讲，但（通常）是外部演讲者。

过去的演讲者包括 Linus Torvals、Guido van Rossum、Merlin Mann 和 Larry Wall。视频通常只是幻灯片，因此（取决于演讲者）您可能不需要观看。

* * *

## 回答 #49

> 赞同：1
> 
> 时间：2008-08-14T07:15:24.600

我的列表与其他列表非常相似 - TWIT、MBW、.NET Rocks、Hanselminutes、Polymorphic Podcast，特别是针对 Mac 开发人员，[Mac 开发人员网络](http://www.mac-developer-network.com/)有一些不错的播客

* * *

## 回答 #50

> 赞同：1
> 
> 时间：2009-10-16T12:23:22.640

我发现[PC Pro Podcast](http://www.pcpro.co.uk/podcast)是一个很好的每周总结，它补充了英国的月刊纸质杂志，用于 PC、Windows 软件和小工具。

作为来自自动化测试世界的博客和意见的汇总，[本周的测试也可以提供丰富的信息和乐趣。](http://itunes.apple.com/us/podcast/this-week-in-testing/id348357035)

一些美国的节目，比如 TWiT 网络，广告太重了，不适合我的口味。

我最近还在 iTunes 上发现了 Ted 演讲（仅视频或音频），其中不少是技术性的或推测性的，具有非常高的扬声器质量。

编辑：添加了卫报的[科技周刊](http://www.guardian.co.uk/technology/series/techweekly)

* * *

## 回答 #51

> 赞同：1
> 
> 时间：2009-08-20T19:47:25.620

[Misfit Geek 播客](http://misfitgeek.com/podcast/misfit-geek-podcast/)（以前称为 JoeOn.NET）

乔·斯塔格纳。

* * *

## 回答 #52

> 赞同：1
> 
> 时间：2008-08-30T01:30:32.303

本周技术安全中的 Stack Overflow Now

当我了解更多关于编程的知识时，我会在我的列表中添加更多内容。现在添加 43 个文件夹。

* * *

## 回答 #53

> 赞同：1
> 
> 时间：2008-09-08T22:48:21.687

我的名单上最重要的是：

1.  软件工程电台
2.  Java Posse 有时我也会听：The ASP.NET podcast

我一直在关注 iTunes U，因为有些课程有来自世界各地一流大学的完美价格（免费）。例如麻省理工学院的计算机语言工程。

* * *

## 回答 #54

> 赞同：1
> 
> 时间：2009-06-05T06:17:09.683

我的前三名：

本周科技（Leo Laporte 等人）

安全现在（Leo Laporte + Steve Gibson）

Windows 周刊 (Leo Laporte + Paul Thurrott)

* * *

## 回答 #55

> 赞同：1
> 
> 时间：2009-07-15T13:47:29.830

我是 Connected Show ( [http://www.ConnectedShow.com](http://www.ConnectedShow.com) ) 的创建者，非常感谢这个帖子将我们发布在列表中。我们是新来的，希望得到更多的听众和更多的反馈。

* * *

## 回答 #56

> 赞同：1
> 
> 时间：2009-07-15T14:09:45.800

还没有看到[安全催化剂](http://www.securitycatalyst.com/)的安全性。当我真的有时间听这些东西时，我曾经更喜欢这个，而不是 leo laporte 所做的。

[Boagworld](http://boagworld.com/)对于基本的网页设计/开发来说是一个不错的选择。

* * *

## 回答 #57

> 赞同：1
> 
> 时间：2010-04-08T05:54:11.040

尚未在您的列表中找到[Code cast 。](http://www.codemag.com/codecast)

* * *

## 回答 #58

> 赞同：1
> 
> 时间：2009-07-14T13:19:22.337

[LKML 摘要播客](http://kernelpodcast.org/ "LKML 摘要播客")

* * *

## 回答 #59

> 赞同：1
> 
> 时间：2009-04-02T12:51:18.147

我刚刚开始收听不敬的[Sod 这个](http://www.sodthis.com)播客系列，由 DevExpress 的 Gary Short 和 Oliver Sturm 主持。他们是相当有趣和温和的教育与一个客人插槽，虽然有点脏。

* * *

## 回答 #60

> 赞同：1
> 
> 时间：2009-11-09T06:30:32.230

[37signals 现在有](http://37signals.com/podcast)Jason Fried 和[David Heinemeier Hansson](http://en.wikipedia.org/wiki/David_Heinemeier_Hansson)（Ruby on Rails 的创建者）的播客

* * *

## 回答 #61

> 赞同：1
> 
> 时间：2009-08-14T12:35:54.237

**PHP**

*   [PHP 文摘](http://devzone.zend.com/podcasts/phpabstract)
*   [ZendCon 会议](http://devzone.zend.com/podcasts/zendconsessions)

* * *

## 回答 #62

> 赞同：1
> 
> 时间：2009-09-25T14:23:29.897

不要忘记[Flex Show](http://www.theflexshow.com/blog/)。

* * *

## 回答 #63

> 赞同：0
> 
> 时间：2008-09-08T17:48:36.993

我最喜欢的是 Stack Overflow 播客，因为它是基于现实的。ALT.NET 有很好的内容。软件工程广播和 Hanselminutes 内容丰富。ThoughtWorks 对我来说是边缘化的。

我会试试其他的！

* * *

## 回答 #64

> 赞同：0
> 
> 时间：2008-08-06T15:32:55.433

我对[Stack Overflow](http://itc.conversationsnetwork.org/series/stackoverflow.html)很满意。

我听/看其他一些：

*   [没有议程](http://cagematch.dvorak.org/index.php/board,45.0.html)
*   [本周科技](http://twit.tv/twit)
*   [脾气暴躁的怪胎](http://www.crankygeeks.com/)

但是这些不断出现的 MS/Google/Apple/Yahoo 绒毛已经过时了。

我已经听了几个[Hanselminutes](http://www.hanselminutes.com/)并且可能会开始更经常地听。

我想找到一些处理实际软件工程问题的内容，而不仅仅是“技术八卦”。

* * *

## 回答 #65

> 赞同：0
> 
> 时间：2008-08-06T15:38:47.933

> **[布赖恩·迪肯](https://stackoverflow.com/users/409/brian-deacon)**写道：
> 
> 德沃夏克是如此……斯波尔斯基。

我无法描述原因，但我同意。

* * *

## 回答 #66

> 赞同：0
> 
> 时间：2008-08-05T14:23:59.113

建议有名气的人来修改这个问题，说“那里有什么好的技术播客？”

我有各种我可以推荐的有声小说，但是这个问题真的跑到了杂草中。

* * *

## 回答 #67

> 赞同：0
> 
> 时间：2008-08-05T14:29:33.597

我听过的所有技术播客都被提到了，但只要我们讨论视频，我想提一下[Hak.5](http://www.hak5.org/)。它更专注于使用现有程序而不是编码，但它有一些很好的硬件部分，它通常可以成为一个很好的灵感来源。

* * *

## 回答 #68

> 赞同：0
> 
> 时间：2008-08-16T09:31:43.547

多棒的答案——现在我有许多播客要添加到我的收听列表中！

我目前的列表是 StackOverflow、TWiT 和 Mac OS Ken。几个月前我尝试进入 SERadio，但无法真正参与播客 - 很棒的介绍材料，但我觉得很多节目有点“初学者”。

* * *

## 回答 #69

> 赞同：0
> 
> 时间：2008-09-06T18:52:06.797

我的列表包括：Herding Code、Deep Fried Bytes、Polymorohic Podcast、Pixel8、.Net Rocks、Hanselminutes、Powerscripting 播客。完整列表：[http ://rtipton.wordpress.com/podcasts/](http://rtipton.wordpress.com/podcasts/)

* * *

## 回答 #70

> 赞同：0
> 
> 时间：2008-08-10T21:08:36.167

我没有看到提到的是[PCMag Radio](http://www.pcmag.com/category2/0,2806,2007098,00.asp)。那是一个更面向消费者的技术节目，但他们确实经常出柜，而且聊天总是很有趣。

* * *

## 回答 #71

> 赞同：0
> 
> 时间：2008-08-18T18:25:33.967

我订阅了很多播客，但我每周尝试收听的播客是：

1.  [硒收音机](http://feeds.feedburner.com/se-radio)
2.  [汉塞尔分钟](http://feeds.feedburner.com/HanselminutesCompleteMP3)
3.  [.NET 摇滚](http://feeds.feedburner.com/netRocksFullMp3Downloads)
4.  [多态播客](http://polymorphicpodcast.com/podcast/feed/)
5.  [RunAsRadio](http://feeds.feedburner.com/RunasRadio)

我每天早上有 35 分钟的通勤时间（公共汽车），我喜欢在我的 zune 上观看[第 9 频道的节目。](http://channel9.msdn.com/Feeds/RSS/)

* * *

## 回答 #72

> 赞同：0
> 
> 时间：2008-09-04T14:34:58.413

尚未提及的另外两个是 The Register 的[开放季](http://www.theregister.co.uk/software/open_season/podcast.rss)（关于开源行业）和[半相干计算](http://www.theregister.co.uk/hardware/semi_coherent/podcast.rss)（松散地与企业硬件有关）。

不过，我不确定 Open Season 是否还有更多的腿，因为 Ashley Vance（播客的明显“驱动程序”）最近离开了 El Reg 去纽约时报。也就是说，过去一年的剧集很棒，其中包括一些著名的客人。

* * *

## 回答 #73

> 赞同：0
> 
> 时间：2010-05-08T13:10:33.357

由 Dan Benjamin 主持的[5by5 Studios有一些有趣的播客。](http://5by5.tv/)有些是特定于技术的（如 ExpressionEngine 和 Ruby），有些是针对人的（采访），还有一些是关于行业新闻的讨论。

*   [The Ruby Show](http://5by5.tv/rubyshow) née Rails Envy。
*   [管道](http://5by5.tv/pipeline)，采访节目。
*   [Dev Show](http://5by5.tv/devshow)，专注于 Web 开发，而不仅仅是 Ruby。
*   [对话](http://5by5.tv/conversation)，关于当前主题的讨论。
*   [The Big Web Show](http://5by5.tv/bigwebshow)，更多面向前端的节目（如 HTML5 和 CSS3。）

一些（或全部？）是现场录制的。您也可以在 iTunes 上找到它们。

* * *

## 回答 #74

> 赞同：0
> 
> 时间：2008-09-05T00:17:51.663

我在这里要说的是，不要沉迷于太多的播客或博客，而是深入研究技术/代码和好的技术书籍。

虽然 +1 到；

*   Thoughtworks - IT 很重要
*   软件工程电台
*   务实的播客
*   Alt.Net 播客
*   汉塞尔分钟

虽然不是严格的技术

*   来自斯坦福大学的企业思想领袖，经常有来自财富 500 强和科技初创公司的演讲者讲述他们是如何做到的。

* * *

## 回答 #75

> 赞同：0
> 
> 时间：2008-09-07T08:33:32.233

Many of the above, plus TED talks and Shareware Radio. Links here: [http://successfulsoftware.net/category/podcasts/](http://successfulsoftware.net/category/podcasts/)

* * *

## 回答 #76

> 赞同：0
> 
> 时间：2008-08-07T14:58:20.353

1.  来自[Dr.Dobbs 杂志的播客](http://www.ddj.com/mediaCenter/moreMediaCenter.jhtml?site_article_type=160901008&start=1)
    2.  [IT对话](http://itc.conversationsnetwork.org/)
    3.  [SE-电台](http://www.se-radio.net/)
    4.  [频道 9](http://channel9.msdn.com/Media/Podcasts/)

* * *

## 回答 #77

> 赞同：0
> 
> 时间：2008-08-06T22:30:28.290

我最喜欢的是：

*   汉塞尔分钟
*   .NET 摇滚
*   堆栈溢出
*   软件工程电台

如果我想笑或生气，我会听 TWiT 和 CrankyGeeks，它们太可怕了。

* * *

## 回答 #78

> 赞同：0
> 
> 时间：2009-08-20T19:12:48.747

[在Crafty Coders 观看](http://craftycoders.com/?tag=/podcast)我们的新播客。它涵盖了编程主题（主要是 .net，但也包括其他语言和主题）。

* * *

## 回答 #79

> 赞同：0
> 
> 时间：2008-08-26T15:18:51.923

我的清单包括：

```
 .NET Rocks!
  RunAs Radio
  TWiT
  Stack Overflow (but then again, we wouldn't be in Beta if we didn't)
  Channel 9
  Hanselminutes 
```

几乎和其他人一样。只是向您展示为什么播客对发展您的艺术很重要。

* * *

## 回答 #80

> 赞同：0
> 
> 时间：2008-08-12T14:10:02.017

除了列出的许多其他伟大的技术之外，这里还有一些我经常听的针对特定技术的其他技术：

*   [本周在 Django](http://blog.michaeltrier.com/tags/twid)
*   [VMware 社区圆桌会议](http://blogs.vmware.com/vmtn/podcasts/index.html)

* * *

## 回答 #81

> 赞同：0
> 
> 时间：2008-08-29T00:19:20.513

我最常听的是：

*   爪哇队
*   软件工程电台
*   堆栈溢出
*   敏捷工具包播客（间歇性）

此外，如果您还没有听过 OOPSLA 2007 播客（主题演讲/主要会议录制和播客），那么它们绝对值得一听，尽管它的运行时间很短。

* * *

## 回答 #82

> 赞同：0
> 
> 时间：2008-08-20T04:15:35.717

我收听并观看：
* 本周技术
* Cranky Geeks
* Security Now * 本周媒体 * Tech5

* * *

## 回答 #83

> 赞同：0
> 
> 时间：2010-10-13T14:07:41.070

毫无疑问，[OS News 播客](http://www.osnews.com/files/podcast.xml)是[OS](http://www.osnews.com/) News 的播客。OS News 是一个主要致力于操作系统的网站，但也涵盖了一系列通用技术、硬件和计算主题。

* * *

## 回答 #84

> 赞同：0
> 
> 时间：2010-04-25T23:26:41.803

我一直在听 Tanked Podcast。三个朋友一起闲逛，谈论科技、电影、电子游戏，他们谈论每周在网络上发生的奇怪事情。这些家伙是一个爆炸，并有很多乐趣！

* * *

## 回答 #85

> 赞同：0
> 
> 时间：2008-08-14T07:03:07.277

在这个夏天，我很享受：

*   堆栈溢出
*   SERadio - 有时这对我来说感觉太企业化了，但它绝对是最具技术性的，而且欧洲（德国？）主机很受欢迎。
*   Hanselminutes 和 DNR - 这些节目的某些方面令人讨厌，但他们经常有有趣的客人谈论有趣的事情，这就是钱的所在。

我赞同关于技术八卦（TWiT、Diggnation 等）和软件开发播客之间区别的观点；虽然前者有时很有趣，但我发现他们倾向于 Digg 的音频，而不是 Hacker News、programming.reddit 或 StackOverflow。

我将检查人们提供的其他建议。

* * *

## 回答 #86

> 赞同：0
> 
> 时间：2008-08-07T10:55:58.613

它不是软件，但我经常观看[Tekzilla](http://revision3.com/tekzilla/)播客。爱我一些 Veronica Belmont / Patrick Norton！

此外，所有其他已经提到的 - Stack Overflow、TWiT 等。

* * *

## 回答 #87

> 赞同：0
> 
> 时间：2008-08-15T22:23:14.767

我喜欢[Security Now](http://twit.tv/sn)和[Windows Weekly](http://twit.tv/ww)，它们都是[TWiT 网络](http://twit.tv/)的一部分。您可能想查看 TWiT 网络，因为他们有各种与技术相关的播客。

此外，这里似乎很常见，[Hanselminutes](http://hanselminutes.com/)非常好。

* * *

## 回答 #88

> 赞同：0
> 
> 时间：2008-08-18T06:05:15.847

有大量的技术播客。

我订阅的一些：
每日节目

*   [韦伯警报](https://miroguide.com/channels/3066)
*   [已加载](https://www.miroguide.com/channels/5651)

非日报

*   [脾气暴躁的怪胎](https://www.miroguide.com/channels/1014)
*   [DL.TV](https://www.miroguide.com/channels/1430)

正如你所看到的，我正在使用 Miro 来获取它们。（这是一个不错的 X 平台 vodcast 捕手 :-)）

干杯

* * *

## 回答 #89

> 赞同：0
> 
> 时间：2008-09-09T05:15:38.293

我提取 DNRTV 的音频并将其作为播客收听（或者将其作为视频在我的爱可视媒体播放器上运行并收听）。我没有时间看一个小时。通常我可以在不看视频的情况下跟随讨论。

* * *

## 回答 #90

> 赞同：0
> 
> 时间：2008-09-09T06:00:06.237

我听过的大部分播客都已经在上面讨论过了。

*   .NET 摇滚
*   汉塞尔分钟
*   RunAsRadio
*   星期一（当你厌倦了开发的东西时）
*   羊群代码
*   Arcast（过去）
*   AudibleAjax
*   开放网络

OOPSLA 中的一些内容也很有趣（不是长时间运行的播客，但很高兴听到）。

* * *

## 回答 #91

> 赞同：0
> 
> 时间：2008-10-13T07:57:31.903

[Hacker Public Radio](http://www.hackerpublicradio.org/)是有关广泛技术主题的播客的绝佳来源。

* * *

## 回答 #92

> 赞同：0
> 
> 时间：2008-11-30T07:43:09.417

[Web 2.0](http://web20show.com/) Show 是一个关于新兴技术的播客，通常被称为“Web 2.0”，由 Josh Owens 和 Adam Stacoviak 主持。

* * *

## 回答 #93

> 赞同：0
> 
> 时间：2010-03-15T04:52:25.027

[嗡嗡声负载-CNET](http://bol.cnet.com)

* * *

## 回答 #94

> 赞同：0
> 
> 时间：2010-04-30T15:23:38.367

[Thinkcode.tv](http://thinkcode.tv)

* * *

## 回答 #95

> 赞同：0
> 
> 时间：2010-02-16T14:22:55.903

[SitePoint 播客](http://www.sitepoint.com/blogs/category/podcast/)主持人是 Patrick O'Keefe (@ifroggy)、Stephan Segraves (@ssegraves)、Brad Williams (@williamsba) 和 Kevin Yank (@sentience)。（@％Twitter用户名％）

* * *

## 回答 #96

> 赞同：0
> 
> 时间：2010-03-15T08:55:02.187

我从不错过以下内容：-

a) 汉塞尔分钟

b) RunAsradio

c) 口渴的开发者

d) DotnetRocks

e) DeepFriedBytes

f)[像素8](http://community.infragistics.com/pixel8/default.aspx)

* * *

## 回答 #97

> 赞同：0
> 
> 时间：2010-08-20T01:30:25.213

[黑客电台](http://www.hackradiolive.org)

# compiler-construction - 学习编写编译器

> ID：1669
> 
> 赞同：697
> 
> 时间：2008-08-04T22:46:36.900
> 
> 标签：compiler-construction, language-agnostic

*首选语言*：C/C++、Java 和 Ruby。

我正在寻找一些有用的书籍/教程，介绍如何仅为教育目的编写自己的编译器。我最熟悉 C/C++、Java 和 Ruby，因此我更喜欢涉及这三者之一的资源，但任何好的资源都是可以接受的。

* * *

## 回答 #1

> 赞同：1164
> 
> 时间：2008-08-04T22:52:00.650

## 资源大清单：

*   [编译器教育的 Nanopass 框架](http://www.cs.indiana.edu/%7Edyb/pubs/nano-jfp.pdf)¶
*   [高级编译器设计和实现](http://www.amazon.com/gp/offer-listing/1558603204?tag=thecompilerconne&camp=14573&creative=327641&linkCode=am1&creativeASIN=1558603204&adid=1ZQWN5FGBA1JM6MNQ2ZV&)$
*   [编译器构建的增量方法](http://scheme2006.cs.uchicago.edu/11-ghuloum.pdf)¶
*   [ANTLR 3.x 视频教程](http://javadude.com/articles/antlr3xtut)
*   [编译器设计基础](http://www.diku.dk/%7Etorbenm/Basics/)
*   [构建 Parrot 编译器](http://web.archive.org/web/20160731061607/http://www.onlamp.com/pub/a/onlamp/2004/04/15/parrot_compiler_construction.html)
*   [编译器基础](http://www.cs.man.ac.uk/%7Epjj/farrell/compmain.html)
*   [编译器构建](https://rads.stackoverflow.com/amzn/click/com/0201403536)$
*   [编译器设计和构建](https://rads.stackoverflow.com/amzn/click/com/0442275366)$
*   用 C $[制作编译器](https://rads.stackoverflow.com/amzn/click/com/0805321667)
*   [制作口译员](http://craftinginterpreters.com/)
*   [C 中的编译器设计] [12](http://www.holub.com/software/compiler.design.in.c.html) ¶
*   [编译器：原理、技术和工具](https://rads.stackoverflow.com/amzn/click/com/0321486811)$ — 又名[“龙之书”](http://en.wikipedia.org/wiki/Compilers:_Principles%2C_Techniques%2C_and_Tools)；被广泛认为是编译器编写的“书”。
*   [工程编译器](https://rads.stackoverflow.com/amzn/click/com/012088478X)$
*   [编程语言基础](http://www.cs.indiana.edu/eopl/)
*   [Flipcode 文章存档](http://flipcode.com/archives/articles.shtml)（查找“Jan Niestadt 实施的脚本引擎”）
*   [游戏脚本精通](https://rads.stackoverflow.com/amzn/click/com/1931841578)$
*   [如何在 C# 中从头开始构建虚拟机](http://www.codeproject.com/KB/recipes/B32Machine1/VMCS.pdf)¶
*   [实现函数式语言](http://research.microsoft.com/%7Esimonpj/papers/pj-lester-book/)
*   [实现编程语言（使用 BNFC）](http://www1.digitalgrammars.com/ipl-book/)
*   [使用 C# 4.0 实现编程语言](http://www.codeproject.com/KB/recipes/programminglanguagetoools.aspx)
*   [解释器模式](http://en.wikipedia.org/wiki/Interpreter_pattern)（在[设计模式](https://rads.stackoverflow.com/amzn/click/com/0201633612)$ 中描述）指定了一种评估语言中句子的方法
*   [语言实现模式：创建自己的特定领域和通用编程语言](http://pragprog.com/titles/tpdsl/language-implementation-patterns)$
*   [Let's Build a Compiler](http://compilers.iecc.com/crenshaw/) by Jack Crenshaw — [PDF](http://www.stack.nl/%7Emarcov/compiler.pdf) ¶ 版本（示例在 Pascal 中，但信息普遍适用）
*   [链接器和加载器](http://books.google.com/books?id=Id9cYsIdjIwC&lpg=PP1&ots=IxFkFWJ-8V&dq=%22linkers%20and%20loaders%22&pg=PA215#v=onepage&q=%22linkers%20and%20loaders%22&f=false)$（Google 图书）
*   [Lisp in Small Pieces (LiSP)](https://rads.stackoverflow.com/amzn/click/com/0521562473) $
*   [LLVM 教程](http://llvm.org/docs/tutorial/)
*   [Modern Compiler Implementation in ML](https://rads.stackoverflow.com/amzn/click/com/0521607647) $ — 还有一个[Java](https://rads.stackoverflow.com/amzn/click/com/052182060X) $ 和[C](https://rads.stackoverflow.com/amzn/click/com/0521607655) $ 版本 - 被广泛认为是一本非常好的书
*   [面向对象的编译器构造](http://www.amazon.com/gp/offer-listing/013630740X?tag=thecompilerconne&camp=14573&creative=327641&linkCode=am1&creativeASIN=013630740X&adid=0JPMVBRNCAN6PDKGYSXX&)$
*   [解析技术 - 实用指南](http://www.dickgrune.com/Books/PTAPG_1st_Edition/)
*   [奥伯龙计划](http://www-old.oberon.ethz.ch/WirthPubl/ProjectOberon.pdf)¶ - 看第 13 章
*   [为个人电脑编程](https://rads.stackoverflow.com/amzn/click/com/0137302673)$
*   [编程语言：应用和解释](http://www.cs.brown.edu/%7Esk/Publications/Books/ProgLangs/)
*   [Rabbit：Scheme 的编译器](http://repository.readscheme.org/ftp/papers/ai-lab-pubs/AITR-474.pdf)¶
*   [关于信任信任](http://web.archive.org/web/20141221110345/http://cm.bell-labs.com/who/ken/trust.html)的思考——快速指南
*   [Roll Your Own Compiler for the .NET framework](http://msdn.microsoft.com/en-us/magazine/cc136756.aspx) — MSDN 的快速教程
*   [计算机程序的结构和解释](http://mitpress.mit.edu/sicp/)
*   [类型和编程语言](http://www.cis.upenn.edu/%7Ebcpierce/tapl/)
*   [想写一个编译器？](http://prog21.dadgum.com/30.html)- 快速指南
*   [用 Ruby 自下而上编写编译器](http://www.hokstad.com/writing-a-compiler-in-ruby-bottom-up-step-1.html)
*   [编译 Lisp](https://bernsteinbear.com/blog/compiling-a-lisp-0/) — 直接编译到 x86-64

传奇：

*   ¶ 链接到 PDF 文件
*   $ 链接到印刷书籍

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2009-07-20T23:01:20.580

我认为这是一个非常模糊的问题；只是因为所涉话题的深度。但是，编译器可以分解为两个独立的部分；上半部分和下半部分。上半部分通常采用源语言并将其转换为中间表示，而下半部分负责特定于平台的代码生成。

尽管如此，一个解决这个主题的简单方法（至少我们在我的编译器类中使用的方法）的一个想法是在上面描述的两个部分中构建编译器。具体来说，只需构建上半部分，您就可以很好地了解整个过程。

只做上半部分就可以让您获得编写词法分析器和解析器的经验，并生成一些“代码”（我提到的中间表示）。因此，它将获取您的源程序并将其转换为另一种表示形式并进行一些优化（如果您愿意），这是编译器的核心。然后下半部分将采用该中间表示并生成在特定架构上运行程序所需的字节。例如，下半部分将采用您的中间表示并生成一个 PE 可执行文件。

我发现一些关于这个主题特别有用的书是[编译器原理和技术](https://rads.stackoverflow.com/amzn/click/com/0321486811)（或龙书，因为封面上有可爱的龙）。它有一些很棒的理论，并且绝对以一种非常容易理解的方式涵盖了上下文无关语法。此外，为了构建词法分析器和解析器，您可能会使用 *nix 工具 lex 和 yacc。有趣的是，名为“ [lex and yacc](https://rads.stackoverflow.com/amzn/click/com/1565920007) ”的书在这部分的龙书停止的地方接续了。

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2008-08-10T07:54:32.790

我认为[ML 中的现代编译器实现](https://rads.stackoverflow.com/amzn/click/com/0521607647 "ML 中的现代编译器实现")是最好的介绍性编译器编写文本。还有一个[Java 版本](https://rads.stackoverflow.com/amzn/click/com/052182060X "Java 中的现代编译器实现")和一个[C 版本](https://rads.stackoverflow.com/amzn/click/com/0521607655 "C中的现代编译器实现")，考虑到您的语言背景，这两个版本都可能更容易访问。本书包含大量有用的基础材料（扫描和解析、语义分析、激活记录、指令选择、RISC 和 x86 原生代码生成）和各种“高级”主题（编译 OO 和函数式语言、多态性、垃圾收集、优化和单个静态分配表格）到相对较小的空间（约 500 页）。

我更喜欢现代编译器实现而不是龙书，因为现代编译器实现调查的领域较少——相反，它确实涵盖了编写一个严肃、体面的编译器所需的所有主题。读完本书后，如果需要，您将准备好直接处理研究论文以获得更深入的了解。

[我必须承认，我对 Niklaus Wirth 的Compiler Construction](https://rads.stackoverflow.com/amzn/click/com/0201403536 "编译器构造")情有独钟。它以 PDF 格式[在线提供。](http://www.ethoberon.ethz.ch/WirthPubl/CBEAll.pdf "编译器构造 (PDF)")我发现 Wirth 的编程美学很漂亮，但是有些人觉得他的风格太少了（例如，Wirth 偏爱递归下降解析器，但大多数 CS 课程侧重于解析器生成器工具；Wirth 的语言设计相当保守。）编译器构建是一个非常简洁的提炼Wirth 的基本思想，不管你喜不喜欢他的风格，我都强烈推荐阅读这本书。

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2008-08-04T23:08:18.603

我同意龙书参考；IMO，它是编译器构造的权威指南。不过，为一些核心理论做好准备。

如果您想要一本理论较轻的书，[Game Scripting Mastery](https://rads.stackoverflow.com/amzn/click/com/1931841578)可能更适合您。如果您是编译器理论的新手，它会提供更温和的介绍。它没有涵盖更实用的解析方法（选择非预测递归下降而不讨论 LL 或 LR 解析），而且我记得，它甚至没有讨论任何类型的优化理论。另外，它不是编译成机器代码，而是编译成一个字节码，该字节码应该在你也编写的 VM 上运行。

它仍然是一本不错的读物，尤其是如果您可以在亚马逊上以便宜的价格买到它。如果您只想简单介绍一下编译器，Game Scripting Mastery 是不错的选择。如果你想在前面硬核，那么你应该满足于龙书。

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2008-08-04T22:56:30.767

[“让我们构建一个编译器”](http://compilers.iecc.com/crenshaw/)很棒，但它有点过时了。（我并不是说它会降低它的有效性。）

或查看[俚语](https://www.quora.com/As-a-self-taught-programmer-how-can-I-learn-about-compilers/answer/Akhil-Kooliyatt?srid=TAGM)。这类似于“让我们构建一个编译器”，但它是一个更好的资源，尤其是对于初学者来说。这附带一个 pdf 教程，它采用 7 步方法教您编译器。添加 quora 链接，因为它具有 C++、Java 和 JS 中 SLANG 的所有各种端口的链接，还有 python 和 java 中的解释器，最初是使用 C# 和 .NET 平台编写的。

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2008-08-04T23:13:49.450

如果您希望使用功能强大、更高级别的工具，而不是自己构建*所有*东西，那么阅读[本课程](http://www.antlr.org/wiki/display/CS652/CS652+Home)的项目和阅读材料是一个不错的选择。这是 Java 解析器引擎 ANTLR 的作者的一门语言课程。[您可以从Pragmatic Programmers](http://www.pragprog.com/titles/tpantlr/the-definitive-antlr-reference)获得 PDF 格式的课程书籍。

本课程介绍了您在其他地方看到的标准编译器编译器内容：解析、类型和类型检查、多态性、符号表和代码生成。几乎唯一没有涉及的是优化。最终项目是一个[编译 C 子集的](http://www.antlr.org/wiki/display/CS652/C+subset+compiler)程序。因为您使用 ANTLR 和 LLVM 之类的工具，所以在一天内编写整个编译器是可行的（我有一个存在证明，尽管我的意思是大约 24 小时）。它在使用现代工具的实际工程方面很重，在理论上稍微轻松​​一些。

顺便说一句，LLVM 简直太棒了。在很多情况下，您通常可以编译为汇编，最好编译为[LLVM 的中间表示](http://llvm.org/docs/LangRef.html)。它更高级别，跨平台，LLVM 非常擅长从中生成优化的程序集。

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2010-08-28T23:14:41.273

如果你时间不多，我推荐[Niklaus Wirth 的“编译器构造”（Addison-Wesley. 1996）](http://www.ethoberon.ethz.ch/WirthPubl/CBEAll.pdf)，这是一本你可以在一天内阅读的小册子，但它解释了基础知识（包括如何实现词法分析器、递归下降解析器、和您自己的基于堆栈的虚拟机）。在那之后，如果你想深入了解，就像其他评论者所建议的那样，没有办法绕过《龙》一书。

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2009-07-20T22:47:04.167

您可能想研究 Lex/Yacc（或 Flex/Bison，无论您想如何称呼它们）。Flex 是一个词法分析器，它将解析和识别您语言的语义组件（“令牌”），而 Bison 将用于定义解析每个令牌时会发生什么。这可以是，但绝对不限于，打印出 C 代码，用于编译为 C 的编译器，或动态运行指令。

[此常见问题解答](http://tldp.org/HOWTO/Lex-YACC-HOWTO-5.html)应该对您有所帮助，并且[本教程](http://www.mactech.com/articles/mactech/Vol.16/16.07/UsingFlexandBison/)看起来非常有用。

* * *

## 回答 #9

> 赞同：17
> 
> 时间：2009-07-21T10:37:00.477

一般来说，编译器没有五分钟的教程，因为这是一个复杂的话题，编写编译器可能需要几个月的时间。您将不得不自己进行搜索。

通常解释 Python 和 Ruby。也许您也想从口译员开始。它通常更容易。

第一步是编写正式的语言描述，即您的编程语言的语法。然后你必须将你想要根据语法编译或解释的源代码转换为抽象语法树，这是计算机理解并可以操作的源代码的内部形式。这一步通常称为解析，解析源代码的软件称为解析器。解析器通常由解析器生成器生成，该解析器生成器将形式文法转换为源代码或机器代码。对于解析的一个好的、非数学的解释，我推荐 Parsing Techniques - A Practical Guide。Wikipedia 对解析器生成器进行了比较，您可以从中选择适合您的解析器生成器。根据您选择的解析器生成器，

为您的语言编写解析器可能非常困难，但这取决于您的语法。所以我建议保持你的语法简单（不像 C++）；LISP 就是一个很好的例子。

在第二步中，抽象语法树从树结构转换为线性中间表示。经常引用 Lua 的字节码作为一个很好的例子。但是中间表示实际上取决于您的语言。

如果您正在构建解释器，则只需解释中间表示。您也可以即时编译它。我推荐 LLVM 和 libjit 用于即时编译。为了使该语言可用，您还必须包含一些输入和输出函数，也许还有一个小型标准库。

如果你要编译语言，它会更复杂。您将不得不为不同的计算机架构编写后端，并从这些后端中的中间表示生成机器代码。我推荐 LLVM 来完成这项任务。

关于这个主题有几本书，但我不能推荐任何一本用于一般用途。他们中的大多数都过于学术或过于实际。没有“在 21 天内自学编译器写作”，因此，您必须购买几本书才能很好地理解整个主题。如果你在互联网上搜索，你会看到一些在线书籍和讲义。也许您附近有一个大学图书馆，您可以在其中借阅有关编译器的书籍。

如果您打算认真对待您的项目，我还建议您具备理论计算机科学和图论方面的良好背景知识。计算机科学学位也会有所帮助。

* * *

## 回答 #10

> 赞同：14
> 
> 时间：2010-05-17T23:38:29.353

看看下面的书。作者是[ANTLR](http://www.antlr.org/)的创建者。

[语言实现模式：创建您自己的特定领域和通用编程语言](http://pragprog.com/titles/tpdsl/language-implementation-patterns)。

![替代文字](../Images/7571dc33acc77c7acb6cd7f23b3a9fa3.png)

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2008-08-18T20:18:32.163

一本尚未推荐但非常重要的书是John Levine 的[“Linkers and Loaders”](http://books.google.com/books?id=h34d_jr2iikC&dq=%22linkers+and+loaders%22&pg=PP1&ots=IxFkFWJ-8V&sig=GSlclmkezTRL6YYguGJmZsnkM3c&hl=en&sa=X&oi=book_result&resnum=1&ct=result)。如果您不使用外部汇编程序，则需要一种方法来输出可以链接到最终程序中的目标文件。即使您使用的是外部汇编程序，您也可能需要了解重定位以及整个程序加载过程是如何工作的以制作一个工作工具。本书收集了大量关于这个过程的随机知识，适用于各种系统，包括 Win32 和 Linux。

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2008-08-05T16:16:01.150

[Dragon Book](https://rads.stackoverflow.com/amzn/click/com/0321486811)绝对是一本“构建编译器”的书，但是如果您的语言不像当前一代语言那么复杂，您可能需要查看[Design Patterns](https://rads.stackoverflow.com/amzn/click/com/0201633612)中的解释器模式。

书中的示例设计了一种类似正则表达式的语言，并且经过深思熟虑，但正如他们在书中所说，它有助于思考整个过程，但实际上只对小型语言有效。但是，使用这种模式为一种小型语言编写解释器要比学习所有不同类型的解析器、yacc 和 lex 等要快得多……

* * *

## 回答 #13

> 赞同：11
> 
> 时间：2008-08-20T10:01:17.023

如果您愿意使用 LLVM，请查看： http: [//llvm.org/docs/tutorial/](http://llvm.org/docs/tutorial/)。它教您如何使用 LLVM 的框架从头开始编写编译器，并且不假设您对该主题有任何了解。

本教程建议您编写自己的解析器和词法分析器等，但我建议您在了解后研究一下 bison 和 flex。他们让生活变得如此轻松。

* * *

## 回答 #14

> 赞同：11
> 
> 时间：2008-09-16T16:21:23.343

Fraser 和 Hanson的 LCC 编译器（[维基百科](http://en.wikipedia.org/wiki/Local_C_compiler)）（[项目主页](http://www.cs.princeton.edu/software/lcc/)）（[github.com/drh/lcc](https://github.com/drh/lcc)）在他们的书“A Retargetable C Compiler: Design and Implementation”中有描述。它非常易读，并解释了整个编译器，直至代码生成。

* * *

## 回答 #15

> 赞同：11
> 
> 时间：2010-08-09T18:33:42.603

我发现 Dragon 的书太难读了，因为过于关注语言理论，而在实践中编写编译器并不真正需要。

我会添加[Oberon](http://en.wikipedia.org/wiki/Oberon_%28programming_language%29)书，其中包含一个非常快速和简单的 Oberon 编译器[Project Oberon](http://www.amazon.de/Project-Oberon-Design-Operating-Compiler/dp/0201544288/ref=sr_1_3?ie=UTF8&s=books-intl-de&qid=1281378762&sr=8-3)的完整源代码。

![替代文字](../Images/c564a5247e33644e6c546395a05d861c.png)

* * *

## 回答 #16

> 赞同：10
> 
> 时间：2008-12-30T23:01:20.493

我正在研究同样的概念，并发现了 Joel Pobar 的这篇很有前途的文章，

[为 .NET Framework 创建一个语言编译器 - 不确定它去了哪里](http://msdn.microsoft.com/en-us/magazine/cc136756.aspx)

[为 .NET Framework 创建语言编译器 - 原始文档的 pdf 副本](http://msdn.microsoft.com/en-us/magazine/cc136756.aspx)

他讨论了编译器的高级概念，并着手为 .Net 框架发明了自己的语言。虽然它是针对 .Net 框架的，但许多概念应该能够被复制。文章涵盖：

1.  语言定义
2.  扫描器
3.  解析器（我主要感兴趣的位）
4.  针对 .Net 框架
5.  代码生成器

还有其他主题，但你得到了公正。

它面向初学者，用 C#（不是 Java）编写

高温高压

骨头

* * *

## 回答 #17

> 赞同：10
> 
> 时间：2009-08-06T22:37:05.273

我记得大约七年前我对编程还很陌生时问过这个问题。

当我问起时，我非常小心，令人惊讶的是，我并没有像你来到这里那样受到批评。然而，他们确实为我指明了“[龙之书](http://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools)”的方向，在我看来，这是一本非常棒的书，它解释了编写编译器所需的一切（你当然必须掌握一两种语言。更多你知道的语言越多越好。）。

是的，很多人说读那本书很疯狂，你不会从中学到任何东西，但我完全不同意这一点。

很多人还说编写编译器是愚蠢和毫无意义的。好吧，编译器开发有用的原因有很多：

*   因为它很有趣。
*   它具有教育意义，在学习如何编写编译器时，您将学到很多关于计算机科学和其他在编写其他应用程序时有用的技术。
*   如果没有人编写编译器，现有的语言就不会变得更好。

我没有立即编写自己的编译器，但在询问后我知道从哪里开始。而现在，学习了很多不同的语言，读了龙书之后，写作已经不是什么大问题了。（我也在学习计算机工程atm，但我对编程的大部分了解都是自学的。）

总之，《龙书》是一本很棒的“教程”。但是在尝试编写编译器之前，请花一些时间掌握一两种语言。不要期望在未来十年左右成为编译器大师。

如果您想学习如何编写解析器/解释器，这本书也很好。

* * *

## 回答 #18

> 赞同：9
> 
> 时间：2008-08-20T11:28:58.717

> “......让我们构建一个编译器......”

我第二[个](https://stackoverflow.com/questions/1669/learning-to-write-a-compiler#1678)[http://compilers.iecc.com/crenshaw/](http://compilers.iecc.com/crenshaw/) @sasb 。暂时忘记购买更多书籍。

为什么？工具和语言。

所需的语言是 Pascal，如果我没记错的话是基于 Turbo-Pascal。如果您访问[http://www.freepascal.org/](http://www.freepascal.org/)并下载 Pascal 编译器，就会发生这种情况，所有示例都可以直接从页面工作 ~ [http://www.freepascal.org/download.var](http://www.freepascal.org/download.var)关于免费的美妙之处Pascal 是您几乎可以使用任何您关心的处理器或操作系统。

一旦你掌握了课程，然后尝试更高级的*“[龙书](http://en.wikipedia.org/wiki/Dragon_book)”* ~ [http://en.wikipedia.org/wiki/Dragon_book](http://en.wikipedia.org/wiki/Dragon_book)

* * *

## 回答 #19

> 赞同：8
> 
> 时间：2008-08-20T09:56:34.367

创建编译器的一种简单方法是使用 bison 和 flex（或类似），构建树（AST）并在 C 中生成代码。生成 C 代码是最重要的步骤。通过生成 C 代码，您的语言将自动在所有具有 C 编译器的平台上运行。

生成 C 代码就像生成 HTML 一样简单（只需使用 print 或等效的），而这又比编写 C 解析器或 HTML 解析器容易得多。

* * *

## 回答 #20

> 赞同：8
> 
> 时间：2008-10-05T16:00:52.583

您应该查看 Darius Bacon 的“ [ichbins](https://github.com/darius/ichbins "我简直不敢相信这不是计划") ”，它是针对 C 的小型 Lisp 方言的编译器，代码只有 6 页多。与大多数玩具编译器相比，它的优势在于该语言足够完整，编译器是用它编写的。（tarball 还包括一个解释器来引导这个东西。）

[在我的Ur-Scheme](http://www.canonical.org/~kragen/sw/urscheme/ "一个小型自托管 Scheme 到 x86 asm 编译器")网页上，我发现了更多关于学习编写编译器的有用信息。

* * *

## 回答 #21

> 赞同：8
> 
> 时间：2010-06-26T20:17:04.560

从[comp.compilers 常见问题解答](http://www.faqs.org/faqs/compilers/faq/)：

Per Brinch Hansen Prentice-Hall 的“个人计算机编程”，1982 年 ISBN 0-13-730283-5

这本不幸的书名解释了使用名为 Edison 的类似 Pascal 的语言为 micros 设计和创建单用户编程环境。作者提供了 Edison 编译器和简单支持操作系统的逐步实现的所有源代码和解释，所有这些都是用 Edison 本身编写的（用 PDP 11/23 的符号汇编器编写的小型支持内核除外；也可以为 IBM PC 订购完整的源代码）。

这本书最有趣的地方是：1）它展示了如何创建一个完整的、自包含的、自维护的、有用的编译器和操作系统的能力，以及 2）关于语言设计和规范问题以及交易的有趣讨论。第 2 章中的关卡。

Per Brinch Hansen Prentice-Hall 的“Brinch Hansen 谈 Pascal 编译器”，1985 年 ISBN 0-13-083098-4

这是另一本轻理论重语用学的书，这是一本如何编码的书。作者介绍了 Pascal- (Pascal "minus") 的编译器和 p 代码解释器的设计、实现和完整源代码，Pascal 子集具有布尔和整数类型（但没有字符、实数、子范围或枚举类型） 、常量和变量定义以及数组和记录类型（但没有压缩、变体、集合、指针、无名、重命名或文件类型）、表达式、赋值语句、带有值和变量参数的嵌套过程定义、if 语句、while 语句、和开始-结束块（但没有函数定义、过程参数、goto 语句和标签、case 语句、repeat 语句、for 语句和 with 语句）。

编译器和解释器是用 Pascal*（Pascal “star”）编写的，Pascal 子集扩展了一些用于创建软件开发系统的 Edison 风格的特性。作者出售了用于 IBM PC 的 Pascal* 编译器，但很容易将本书的 Pascal 编译器移植到任何方便的 Pascal 平台。

这本书使编译器的设计和实现看起来很容易。我特别喜欢作者关注质量、可靠性和测试的方式。编译器和解释器可以很容易地用作更复杂的语言或编译器项目的基础，尤其是当您被迫快速启动和运行某些东西时。

* * *

## 回答 #22

> 赞同：7
> 
> 时间：2008-08-12T11:25:34.113

Python 捆绑了一个用 Python 编写的 Python 编译器。您可以看到源代码，它包括所有阶段，从解析、抽象语法树、发出代码等。Hack 它。

* * *

## 回答 #23

> 赞同：7
> 
> 时间：2009-04-25T17:23:55.193

抱歉，它是西班牙语的，但这是阿根廷一门名为“Compiladores e Intérpretes”（编译器和口译员）的课程的参考书目。

该课程从形式语言理论到编译器构建，这些是您至少需要构建一个简单编译器的主题：

> *   C. Allen I. Holub
>     
>     Prentice-Hall 的编译器设计。1990 年。
>     
>     
> *   编译器。Teoría y Consrucción。
>     Sanchís Llorca, FJ, Galán Pascual, C. 编辑 Paraninfo。1988 年。
>     
>     
> *   编译器构造。
>     尼克劳斯·沃思艾迪
>     
>     生-卫斯理。1996 年。
>     
>     
> *   Lenguajes，Gramáticas y Automatas。Un enfoque practico。
>     佩德罗·伊萨西·维努埃拉、帕洛玛·马丁内斯·费尔南德斯、丹尼尔·博拉霍·米兰。Addison-Wesley Iberoamericana（西班牙）。1997 年。
>     
>     
> *   编译器设计的艺术。理论与实践。
>     托马斯·皮特曼，詹姆斯·彼得斯。
>     
>     普伦蒂斯霍尔。1992 年。
>     
>     
> *   面向对象的编译器构造。
>     吉姆·福尔摩斯。
>     Prentice Hall，恩格尔伍德悬崖，新泽西州 1995
>     
>     
> *   编译器。概念基础。
>     B. Teufel、S. Schmidt、T. Teufel。
>     
>     艾迪生-韦斯利伊比利亚美洲。1995 年。
>     
>     
> *   自动机理论、语言和计算简介。
>     
>     约翰·E·霍普克罗夫特。Jeffref D. Ullman。
>     艾迪生-韦斯利。1979 年。
>     
>     
> *   正式语言简介。
>     György E. Révész。
>     
>     麦格劳希尔。1983 年。
>     
>     
> *   解析技术。实用指南。
>     迪克·格鲁内，塞瑞尔·雅各布斯。
>     Impreso por los autores。1995
>     [http://www.cs.vu.nl/~dick/PTAPG.html](http://www.cs.vu.nl/~dick/PTAPG.html)
>     
>     
> *   Yacc：又一个编译器-编译器。
>     Stephen C. Johnson
>     计算科学技术报告第 32 号，1975 年。贝尔实验室。新泽西州默里山
>     。
>     
>     
> *   Lex：词法分析器生成器。
>     我莱斯克，E.施密特。计算科学技术报告第 39 号，1975 年。贝尔实验室。新泽西州默里山。
>     
>     
> *   莱克斯和 yacc。
>     约翰·R·莱文、托尼·梅森、道格·布朗。
>     O'Reilly & Associates。1995 年。
>     
>     
> *   计算理论的要素。
>     Harry R. Lewis，Christos H. Papadimitriou。西贡达埃迪西翁。普伦蒂斯霍尔。1998 年。
>     
>     
> *   Un Algoritmo Eficiente para la Construcción del Grafo de Dependencia de Control。
>     萨尔瓦多诉卡瓦迪尼。
>     Trabajo Final de Grado para obtener el Título de Ingeniero en Computación。
>     Facultad de Matemática Aplicada。UCSE 2001。

* * *

## 回答 #24

> 赞同：7
> 
> 时间：2009-07-20T22:44:40.147

1.  这是一个浩瀚的课题。不要小看这一点。并且不要低估我的观点，不要低估它。
2.  我听说[龙书](http://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools)是一个（？）开始的地方，以及搜索。:) 在搜索方面做得更好，最终它将成为你的生活。
3.  构建自己的编程语言绝对是一个很好的练习！但要知道，它最终永远不会用于任何实际目的。例外情况很少，*而且相差甚远*。

* * *

## 回答 #25

> 赞同：6
> 
> 时间：2008-09-18T23:31:14.747

这里有很多很好的答案，所以我想我应该在列表中再添加一个：

十多年前，我有一本名为 Project Oberon 的书，其中有一些关于编译器的非常好的文字。这本书真的很突出，因为来源和解释非常实用和可读。全文（2005 年版）已以 pdf 格式提供，因此您可以立即下载。编译器在第 12 章中讨论：

[http://www.ethoberon.ethz.ch/WirthPubl/ProjectOberon.pdf](http://www.ethoberon.ethz.ch/WirthPubl/ProjectOberon.pdf)

尼克劳斯·沃特，于尔格·古特克内希特

（处理没有他关于编译器的书那么广泛）

读过几本编译器方面的书，可以秒龙书，花在这本书上的时间很值得。

* * *

## 回答 #26

> 赞同：6
> 
> 时间：2009-08-28T00:01:07.223

如果您想了解更多关于编译器（和元编译器）的信息，这不是一本书，而是一篇技术论文和一次非常有趣的学习体验……这个网站将引导您构建一个完全独立的编译器系统，该系统可以编译自身和其他语言：

*[教程：元编译器第 1 部分](http://www.bayfronttechnologies.com/mc_tutorial.html)*

这一切都基于一篇令人惊叹的 10 页小技术论文：

*Val Schorre* **META II：面向语法的编译器编写语言**

从 1964 年的老实人开始。我在 1970 年就学会了如何构建编译器。当你终于了解编译器如何自我再生时，这是一个令人兴奋的时刻……

我从大学时代就认识网站作者，但我与该网站无关。

* * *

## 回答 #27

> 赞同：5
> 
> 时间：2008-08-22T15:57:16.420

我也喜欢[Crenshaw 教程](http://compilers.iecc.com/crenshaw/)，因为它清楚地表明编译器只是另一个读取一些输入并写入一些输出的程序。

阅读。

如果您愿意，可以使用它，然后查看另一个参考，了解如何真正编写更大、更完整的编译器。

并阅读[On Trusting Trust](http://cm.bell-labs.com/who/ken/trust.html)，了解在这个领域可以做的不明显的事情。

* * *

## 回答 #28

> 赞同：5
> 
> 时间：2008-10-01T09:30:26.433

如果您有兴趣为函数式语言（而不是过程式语言）编写编译器，Simon Peyton-Jones 和 David Lester 的“[实现函数式语言：教程](http://research.microsoft.com/~simonpj/papers/pj-lester-book/)”是一个很好的指南。

功能评估如何工作的概念基础由称为“核心”的简单但功能强大的功能语言中的示例指导。此外，Core 语言编译器的每个部分都用 Miranda（一种与 Haskell 非常相似的纯函数式语言）中的代码示例进行了解释。

描述了几种不同类型的编译器，但即使你只遵循所谓的 Core 模板编译器，你也会对函数式编程的成功有很好的理解。

* * *

## 回答 #29

> 赞同：5
> 
> 时间：2011-07-14T15:42:33.180

您可以使用Apache 软件基金会的[BCEL](http://jakarta.apache.org/bcel/)。使用此工具，您可以生成类似汇编程序的代码，但它是带有 BCEL API 的 Java。您可以了解如何生成中间语言代码（在本例中为字节代码）。

### 简单的例子

1.  使用此函数创建一个 Java 类：

    ```
    public String maxAsString(int a, int b) {
        if (a > b) {
            return Integer.valueOf(a).toString();
        } else if (a < b) {
            return Integer.valueOf(b).toString();
        } else {
            return "equals";
        }
    } 
    ```

现在用这个类运行 BCELifier

```
BCELifier bcelifier = new BCELifier("MyClass", System.out);
bcelifier.start(); 
```

您可以在控制台上看到整个类的结果（如何构建字节码 MyClass.java）。该函数的代码是这样的：

```
private void createMethod_1() {
  InstructionList il = new InstructionList();
  MethodGen method = new MethodGen(ACC_PUBLIC, Type.STRING, new Type[] { Type.INT, Type.INT }, new String[] { "arg0", "arg1" }, "maxAsString", "MyClass", il, _cp);

  il.append(InstructionFactory.createLoad(Type.INT, 1)); // Load first parameter to address 1
  il.append(InstructionFactory.createLoad(Type.INT, 2)); // Load second parameter to adress 2
    BranchInstruction if_icmple_2 = InstructionFactory.createBranchInstruction(Constants.IF_ICMPLE, null); // Do if condition (compare a > b)
  il.append(if_icmple_2);
  il.append(InstructionFactory.createLoad(Type.INT, 1)); // Load value from address 1 into the stack
  il.append(_factory.createInvoke("java.lang.Integer", "valueOf", new ObjectType("java.lang.Integer"), new Type[] { Type.INT }, Constants.INVOKESTATIC));
  il.append(_factory.createInvoke("java.lang.Integer", "toString", Type.STRING, Type.NO_ARGS, Constants.INVOKEVIRTUAL));
  il.append(InstructionFactory.createReturn(Type.OBJECT));
  InstructionHandle ih_13 = il.append(InstructionFactory.createLoad(Type.INT, 1));
  il.append(InstructionFactory.createLoad(Type.INT, 2));
    BranchInstruction if_icmpge_15 = InstructionFactory.createBranchInstruction(Constants.IF_ICMPGE, null); // Do if condition (compare a < b)
  il.append(if_icmpge_15);
  il.append(InstructionFactory.createLoad(Type.INT, 2));
  il.append(_factory.createInvoke("java.lang.Integer", "valueOf", new ObjectType("java.lang.Integer"), new Type[] { Type.INT }, Constants.INVOKESTATIC));
  il.append(_factory.createInvoke("java.lang.Integer", "toString", Type.STRING, Type.NO_ARGS, Constants.INVOKEVIRTUAL));
  il.append(InstructionFactory.createReturn(Type.OBJECT));
  InstructionHandle ih_26 = il.append(new PUSH(_cp, "equals")); // Return "equals" string
  il.append(InstructionFactory.createReturn(Type.OBJECT));
  if_icmple_2.setTarget(ih_13);
  if_icmpge_15.setTarget(ih_26);
  method.setMaxStack();
  method.setMaxLocals();
  _cg.addMethod(method.getMethod());
  il.dispose();
} 
```

* * *

## 回答 #30

> 赞同：3
> 
> 时间：2008-08-20T11:16:20.307

作为一个起点，最好创建一个递归下降解析器 (RDP)（假设您想创建自己的 BASIC 风格并构建一个 BASIC 解释器）以了解如何编写编译器。我在 Herbert Schild 的 C Power Users 第 7 章中找到了最好的信息。本章参考了 H. Schildt 的另一本书“C The complete Reference”，他解释了如何创建计算器（一个简单的表达式解析器）。我在 eBay 上发现这两本书都很便宜。[如果您访问 www.osborne.com 或查看www.HerbSchildt.com](http://www.HerbSchildt.com)，您可以查看本书的代码 我在他的最新书中找到了相同的代码，但 C# 代码

* * *

## 回答 #31

> 赞同：3
> 
> 时间：2008-10-01T20:24:42.443

龙书太复杂了。所以忽略它作为起点。这很好，一旦你有了一个起点，你就会想很多，但对于初学者来说，也许你应该简单地尝试使用 RD、LL 或 LR 解析技术编写一个数学/逻辑表达式评估器，并编写所有内容（词法分析/解析）可能是 C/Java 中的手工。这本身很有趣，让您了解编译器中涉及的问题。然后你可以使用一些脚本语言跳到你自己的 DSL（因为在这些语言中处理文本通常更容易），就像有人说的那样，用脚本语言本身或 C 生成代码。你可能应该使用 flex/bison/antlr 等来如果要在 c/java 中进行词法分析/解析。

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2009-07-21T00:20:14.653

我很惊讶它没有被提及，但 Donald Knuth 的*计算机编程艺术*最初是作为编译器编写的一种教程而写的。

当然，Knuth 博士对主题进行深入研究的倾向导致编译器编写教程被扩展为大约 9 卷，其中只有三卷实际已出版。这是一个关于编程主题的相当完整的阐述，并且非常详细地涵盖了您在编写编译器时需要了解的所有内容。

* * *

## 回答 #33

> 赞同：3
> 
> 时间：2010-06-26T23:43:23.703

列表中缺少：垃圾收集：自动动态内存管理算法，Jones 和 Lins。

（假设您正在编写编译器*和*运行时系统，并且您正在实现一种垃圾收集语言。

* * *

## 回答 #34

> 赞同：3
> 
> 时间：2014-03-12T16:05:11.807

到目前为止，未列入清单的是这本书：

[Basics of Compiler Design (Torben Mogensen)](http://www.diku.dk/~torbenm/Basics/) （来自哥本哈根大学计算机科学系）

我也有兴趣了解编译器，并计划在未来几年进入该行业。据我所知，这本书是开始学习编译器的理想理论书。它是免费的复制和复制，干净而仔细地编写并以简单的英语提供给您，无需任何代码，但仍然通过说明和图表等方式呈现机制。值得一看 imo。

* * *

## 回答 #35

> 赞同：2
> 
> 时间：2011-04-01T19:39:19.670

最快的方法是通过两本书：

JP Bennett 的1990 年版本的[编译技术简介，使用 ANSI C、LeX 和 YaCC 的第一门课程](https://rads.stackoverflow.com/amzn/click/com/007709221X)- 示例代码、解析理论和设计的完美平衡 - 它包含一个用 C、lex 和 yacc 编写的完整编译器简单语法

[龙书](https://rads.stackoverflow.com/amzn/click/com/0201000229)（旧版） - 主要是对前一本书中未涵盖的功能的详细参考

* * *

## 回答 #36

> 赞同：2
> 
> 时间：2014-04-02T12:39:16.147

如果您不只是在寻找书籍，而且对包含有关该主题的文章的网站感兴趣，我已经在博客中介绍了创建编程语言的各个方面。大多数帖子都可以在我的博客的[“语言设计”类别中](http://web.archive.org/web/20161024215644/http://orangejuiceliberationfront.com/category/language-design/)找到。

具体来说，我将介绍手动生成 Intel 机器代码、自动生成机器码或字节码、创建字节码解释器、编写面向对象的运行时、创建简单的加载器以及编写简单的标记/清除垃圾收集器。所有这一切都以一种非常实用和务实的方式进行，而不是让你用大量的理论感到厌烦。

希望对这些提供反馈。

* * *

## 回答 #37

> 赞同：1
> 
> 时间：2009-02-05T02:55:28.197

如果你像我一样，没有受过正规的计算机科学教育，并且有兴趣构建/想知道编译器是如何工作的：

我推荐“Java 中的编程语言处理器：编译器和解释器”，这是一本适合自学成才的计算机程序员的精彩书籍。

在我看来，理解那些基本的语言理论、自动化机器和集合论并不是什么大问题。问题是如何将这些东西变成代码。上面的书告诉你如何编写解析器、分析上下文和生成代码。如果你看不懂这本书，那我不得不说，放弃编译编译器吧。这本书是我读过的最好的编程书。

还有另一本书也不错，*Compiler Design in C*。有很多代码，它告诉您有关如何构建编译器和词法分析器工具的一切。

构建编译器是一种有趣的编程实践，可以教会你大量的编程技能。

不买[龙书](http://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools#Second_edition)。这是浪费金钱和时间，不适合从业者。

* * *

## 回答 #38

> 赞同：-1
> 
> 时间：2009-07-21T00:42:47.327

每当我想尝试一种新的语言想法时，我只需编写一个简单的解析器，并让它生成一些易于获得好的编译器的语言，比如 C。

你认为 C++ 是如何完成的？

# statistics - 我如何计算这些统计数据？

> ID：1679
> 
> 赞同：16
> 
> 时间：2008-08-04T22:56:45.540
> 
> 标签：statistics, spss

我正在编写一个应用程序来帮助促进一些研究，其中一部分涉及进行一些统计计算。目前，研究人员正在使用一个名为[SPSS](http://en.wikipedia.org/wiki/Spss)的程序。他们关心的部分输出如下所示：

![[部分 SPSS 输出](../Images/b0ba59df175f787c54aa741376730e28.png)

他们真的只关心`F`和`Sig.`价值观。我的问题是我没有统计学背景，我不知道这些测试叫什么，或者如何计算它们。

我认为该`F`值可能是[F-test](http://en.wikipedia.org/wiki/F-test#Table_on_F-test)的结果，但是按照维基百科上给出的步骤后，我得到的结果与`SPSS`给出的不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-04T23:32:54.797

[该网站](http://people.richland.edu/james/lecture/m170/ch13-2wy.html)可能会为您提供更多帮助。还有[这个](http://www.unesco.org/webworld/idams/advguide/Chapt4_3.htm)。

我正在从统计课程的相当生疏的记忆中工作，但这里什么都没有：

当您进行方差分析 (ANOVA) 时，您实际上将 F 统计量计算为“组间”均方方差与“组内”均方方差的比率。上面的第二个链接似乎很适合这个计算。

这使得 F 统计量准确地衡量了您的模型的强大程度，因为“组间”方差是解释力，而“组内”方差是随机误差。高 F 意味着一个非常重要的模型。

与许多统计操作一样，您可以反向确定 Sig。使用 F 统计量。在这里，您的 Wikipedia 信息会派上用场。您要做的是 - 使用 SPSS 给您的自由度 - 找到合适的 P 值，[F 表](http://www.ento.vt.edu/~sharov/PopEcol/tables/f005.html)将为您提供您计算的 F 统计量。发生这种情况的 P 值 [F(table) = F(calculated)] 是显着性。

从概念上讲，较低的显着性值表明拒绝原假设的能力非常强（对于这些目的，这意味着确定您的模型具有解释能力）。

如果其中有任何错误，请向任何数学家道歉。我会回来检查以进行编辑！

祝你好运。统计很有趣，只是可能不是这部分。=)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T03:29:26.620

我从您的问题中假设您的研究同事希望自动化执行某些统计分析的过程（即，他们希望批处理数据集）。你有两个选择：

1) SPSS 现在可通过 python 编写脚本（从版本 15 开始） - 转到 spss.com 并搜索 python。您可以编写 Python 脚本来自动化数据分析并从数据透视表中提取关键值，然后以您喜欢的任何方式处理答案。这样做的好处是可以在你的 python 脚本的结果和你的合作者在 SPSS 中手工计算的结果之间进行精确比较。因此，您无需真正了解任何统计数据即可完成这项工作（这是一个关键优势）

2）您可以在 R 中执行此操作，这是一个免费的统计环境，可能是脚本化的。这样做的缺点是您必须学习统计数据以确保您正确地执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-18T06:01:11.973

统计很难:-)。经过一年的阅读和重新阅读书籍和论文，我只能自信地说我了解它的基本知识。

您可能希望针对您使用的任何一种编程语言调查现成的库，因为它们在一般的数学和特别是统计方面有很多陷阱（舍入错误是一个明显的例子）。

作为一个例子，你可以看看[R 项目](http://www.r-project.org/)，它既是一个交互式环境，也是一个库，你可以从你的 C++ 代码中使用，在 GPL 下分发（即，如果你只在内部使用它并且只发布结果，你不需要打开你的代码）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T23:17:17.387

简而言之：不要手动执行此操作，链接/使用现有软件。sain_grocen 的回答是不正确的。:(

这些都是参数估计的显着性检验，通常用于多元响应多元回归。在统计编程环境之外，这些都不是简单的事情。我建议要么从预先存在的统计程序中获取输出，要么使用可以链接到并使用该代码的程序。

恐怕第一个答案（sain_grocen's）会让你走错路。他的解释很可能是您实际处理的特殊情况。在他的链接中解释的方差分析是针对单一变量响应，采用平衡设计。这些不是您看到的 F 统计量。输出中的名称（Pillai's Trace、Hotelling's Trace...）是一些可用的多变量版本。在某些假设下，它们具有 F 分布。我无法在这里解释一本有价值的教科书，我建议你先看看 Johnson 和 Wichern 的“Applied Multivariate Statistical Analysis”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T13:48:44.013

你能解释一下为什么 SPSS 本身不能很好地解决这个问题吗？是不是它会生成数据透视表作为难以操作的输出？是程序的费用吗？

F 统计量可以来自任意数量的特定测试。F 只是一个分布（松散地：对一组值的“频率”的描述），如正态（高斯）或均匀分布。一般来说，它们来自方差的比率。意见：许多统计学家（包括我自己）发现基于 F 的测试不稳定（行话：非*鲁棒性*）。

特定的输出统计数据（Pillai 的轨迹等）表明原始分析是一个 MANOVA 示例，正如其他海报所描述的那样，这是一个复杂且难以正确处理的过程。

我也猜想，基于 MANOVA 和 SPSS 的使用，这是一个心理学或社会学项目……如果不是，请赐教。可能其他更简单的模型实际上可能更容易理解和更可重复。如果有的话，请咨询您当地的大学统计咨询小组。

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-12-22T01:56:52.593

以下是对 MANOVA 输出的解释，来自一个非常好的统计网站和 SPSS：

带有解释的输出： [http ://faculty.chass.ncsu.edu/garson/PA765/manospss.htm](http://faculty.chass.ncsu.edu/garson/PA765/manospss.htm)

如何以及为什么要进行 MANOVA 或多元 GLM：（与上述路径相同，但在 '/manova.htm' 中终止）

从头开始编写软件来计算这些输出既冗长又困难；有很多数值问题和矩阵求逆要做。

正如亨利所说，使用 Python 脚本或 R。如果编写脚本，我建议与了解 SPSS 的人一起工作。此外，SPSS 本身能够使用称为 OMS 的东西将输出表导出到文件中。SPSS 中的脚本可以做到这一点。

找出您的研究小组中谁知道 SPSS 并与他们一起工作。

# asp.net - ASP.NET 内置用户配置文件与旧式用户类/表

> ID：1683
> 
> 赞同：24
> 
> 时间：2008-08-04T23:06:23.443
> 
> 标签：asp.net, profile

我正在寻找有关在 ASP.NET 中使用 Profile 功能的最佳实践的指导。

您如何决定应该在内置用户配置文件中保留什么，或者是否应该创建自己的数据库表并为所需字段添加一列？例如，一个用户有一个邮政编码，我应该将邮政编码保存在自己的表中，还是应该将其添加到 web.config xml 配置文件并通过用户配置文件 ASP.NET 机制访问它？

我现在能想到的优点/缺点是，由于我不太了解个人资料（现在有点像*矩阵*），如果我走桌子路线，我可能可以做任何我想做的事情（例如， SQL 以获取与当前用户相同的邮政编码中的所有用户）。如果我使用 ASP.NET 配置文件，我不知道是否可以这样做。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-08-06T02:26:35.333

我只构建了 2 个使用配置文件提供程序的应用程序。从那以后我就不再使用它了。对于这两个应用程序，我使用它来存储有关用户的信息，例如他们的公司名称、地址和电话号码。

这一直很好，直到我们的客户希望能够通过这些字段之一找到用户。搜索涉及遍历**每个**用户配置文件并将信息与搜索条件进行比较。随着用户群的增长，我们的客户无法接受搜索时间。唯一的解决方案是创建一个表来存储用户信息。搜索速度大大提高。

我建议将此类信息存储在其自己的表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-29T23:42:37.383

用户配置文件是用于个人定制（AKA。配置文件属性）的一个很好的干净框架。（例如 iGoogle）它的问题是它不是为查询而设计的，也不适合与公共用户共享数据。（你仍然可以做到，但性能低下）

因此，如果您想增强定制的用户体验，用户配置文件将是一个不错的选择。否则，使用您自己的类和表将是一个更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-04T23:10:05.497

根据我的经验，最好将配置文件中的信息保持在最低限度，只将身份验证直接需要的必需品放入其中。地址等其他信息应该由你自己的应用程序逻辑保存在你自己的数据库中，这种方式更具可扩展性和可维护性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-04T23:10:30.207

我认为这取决于您需要多少个字段。据我所知，Profiles 本质上是一个长字符串，会在给定的字段大小处拆分，这意味着如果您有很多字段和用户，它们的扩展性不会很好。

另一方面，它们是内置的，因此这是一种简单且标准化的方式，这意味着学习曲线并不大，您也可以在未来的应用程序中使用它，而无需将其调整为新的表格结构。

滚动你自己的东西可以让你把它放在一个适当规范化的数据库中，这极大地提高了性能，但是你必须自己编写几乎所有的配置文件管理代码。

编辑：此外，配置文件没有被缓存，因此对配置文件的每次访问都会首先进入数据库（然后为该请求缓存它，但下一个请求将再次从数据库中获取它）

如果您正在考虑编写自己的东西，也许[自定义 Profile Provider](http://msdn.microsoft.com/en-us/library/0580x1f5(VS.80).aspx)可以为您提供两全其美的优势 - 无缝集成，以及您想要做的自定义内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-05T20:19:07.357

我认为最好将其用于对用户来说并不重要的补充数据，这些数据通常仅在该用户登录时才重要。想想如果全部擦除不会破坏任何重要的数据。

当然这是个人偏好，但其他人提出了其他一些重要问题。

考虑到它可以用于未经身份验证的用户，其个人资料由匿名 cookie 维护，也非常有用。

# web-services - 如何将枚举值传递给 Web 服务

> ID：1709
> 
> 赞同：24
> 
> 时间：2008-08-04T23:43:34.757
> 
> 标签：web-services, application-integration

基本上，我的困境是如何在两个应用程序之间共享枚举。

用户通过 Web 上的前端应用程序上传文档。此应用程序调用后端应用程序的 Web 服务并将文档传递给它。后端应用程序保存文档并在*Document*表中插入一行。

文档类型（7 种可能的文档类型：*发票*、*合同*等）作为参数传递给 Web 服务的*UploadDocument*方法。问题是，这个参数的类型（和可能的值）应该是什么？

由于您需要在两个应用程序中对这些值进行硬编码，我认为可以使用描述性字符串（*Invoice*、*Contract*、*WorkOrder*、*SignedWorkOrder*）。

在第一个应用程序中创建*DocumentTypes*枚举并在第二个应用程序中重现它，然后将相应的整数值传递给它们之间的 Web 服务，这可能是一种更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-04T23:54:12.817

我建议不要在它们之间传递一个整数，只是为了便于阅读和调试。假设您正在浏览您的日志，您会看到 DocumentType=4 的 500 个错误。现在您必须查找哪个 DocumentType 是 4。或者如果其中一个应用程序引用了另一个应用程序中不存在的数字，可能是由于版本不匹配。

它的代码有点多，它使大脑的静态类型部分有点生硬，但在 HTTP 之上的协议中，公认的智慧是支持易读的字符串而不是不透明的枚举。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-05T00:12:35.370

我仍然会在内部使用枚举，但希望消费者只向我传递名称，而不是数值本身。

只是一些愚蠢的例子来说明：

```
public enum DocumentType
{
  Invoice,
  Contract,
  WorkOrder,
  SignedWorkOrder
}

[WebMethod]
public void UploadDocument(string type, byte[] data)
{
  DocumentType docType = (DocumentType)Enum.Parse(typeof(DocumentType), type);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-04T23:56:54.403

我只能说.net，但如果你有一个 ASP.net Webservice，你应该可以直接向它添加一个枚举。

然后，当您在客户端应用程序中使用“添加 Web 引用”时，生成的类应包含该枚举

但这是我的想法，我很确定我过去做过，但我不能肯定。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-05T01:26:14.550

在 .NET 中，枚举值（默认情况下）被序列化为带有名称的 xml。对于可以有多个值（[标志](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)）的实例，它会在值之间放置一个空格。这是有效的，因为枚举不包含空格，因此您可以通过拆分字符串再次获取该值（即“Invoice Contract SignedWorkOrder”，使用 lubos 的示例）。

[您可以使用XmlEnumAttribute](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlenumattribute.aspx)或在使用 WCF 时使用[EnumMember](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.enummemberattribute.aspx)属性来控制 asp.net Web 服务中的值的序列化。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-05T01:34:40.900

如果您从 .NET 页面/应用程序使用 Web 服务，则在将 Web 引用添加到使用该服务的项目后，您应该能够访问该枚举。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-07T23:38:16.163

如果您不使用 .NET 到 .NET SOAP，您仍然可以定义一个枚举器，前提是两个端点都使用 WSDL。

```
<s:simpleType name="MyEnum">    
     <s:restriction base="s:string">
          <s:enumeration value="Wow"/>
          <s:enumeration value="This"/>
          <s:enumeration value="Is"/>
          <s:enumeration value="Really"/>
          <s:enumeration value="Simple"/>
     </s:restriction>
</s:simpleType> 
```

由 WSDL -> 代理生成器工具将其解析为客户端语言中的枚举等效项。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-08T12:35:03.563

`enum`在这样的接口边界上不使用 s 有一些很好的理由。考虑一下[Dare](http://www.25hoursaday.com/weblog/2005/08/31/WhyYouShouldAvoidUsingEnumeratedTypesInXMLWebServices.aspx)关于这个主题的帖子。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-07T23:21:15.860

我注意到，当使用“添加服务引用”而不是 VS.net 中的“添加 Web 引用”时，实际的枚举值和枚举名称都会出现。这真的很烦人，因为我需要同时支持 2.0 和 3.5 客户端。我最终不得不进入 2.0 生成的 Web 服务代理代码并在每次进行更改时手动添加枚举值！

# resources - 每个程序员都应该读的最有影响力的一本书是什么？

> ID：1711
> 
> 赞同：1438
> 
> 时间：2008-08-04T23:50:22.933
> 
> 标签：resources

如果你可以回到过去，告诉自己在你作为开发人员的职业生涯开始时阅读一本特定的书，那会是哪本书？

我希望这份清单是多种多样的，涵盖的范围很广。

**搜索：**使用右上角的搜索框。要搜索当前问题的答案，请使用`inquestion:this`。例如：

```
inquestion:this "Code Complete" 
```

* * *

## 回答 #1

> 赞同：1745
> 
> 时间：2008-08-04T23:51:07.737

*   *史蒂夫·麦康奈尔（Steve McConnell）的代码完成*（第 2 版）
*   *务实的程序员*
*   *计算机程序的结构和解释*
*   *Kernighan 和 Ritchie*的 C 编程语言**
**   *Cormen、Leiserson、Rivest 和 Stein*的算法简介****   *四人组的*设计模式****   *重构：改进现有代码的设计**   *神话人物月**   *Donald Knuth*的计算机编程艺术****   *编译器：* Alfred V. Aho、Ravi Sethi 和 Jeffrey D. Ullman 的原则、技术和工具*   *道格拉斯·霍夫施塔特的*哥德尔、埃舍尔、巴赫****   *清洁代码： Robert C. Martin*的敏捷软件工艺手册****   *有效的 C++**   *更有效的 C++**   *Charles Petzold 的*代码****   *Jon Bentley 的*编程珍珠****   *Michael C. Feathers*有效地使用遗留代码****   *Demarco 和 Lister 的*Peopleware****   *工作*中的编码员 Peter Seibel*   *你肯定在开玩笑，费曼先生！**   *有效的 Java*第 2 版*   *Martin Fowler*的企业应用架构模式****   *小谋士**   *经验丰富的计划者**   *为什么（辛酸）Ruby 指南**   *囚犯们正在运行庇护：为什么高科技产品让我们发疯以及如何恢复理智**   *Unix 编程的艺术**   *测试驱动开发：*以 Kent Beck为例*   *敏捷开发人员的实践**   *不要让我思考**   *Robert C. Martin 的*敏捷软件开发、原则、模式和实践****   *Eric Evans 的*领域驱动设计****   *唐纳德·诺曼*的日常用品设计****   *Andrei Alexandrescu 的*现代 C++ 设计****   *Joel Spolsky*最佳软件写作 I****   *Kernighan 和 Pike*的编程实践****   *务实的思考和学习：重构你的 Wetware* by Andy Hunt*   *软件估计：揭秘史蒂夫·麦康奈尔*的黑色艺术****   *Chad Fowler*的《热情的程序员（我的工作去了印度） 》****   *黑客：计算机革命的英雄**   *算法 + 数据结构 = 程序**   *编写可靠的代码**   *JavaScript - 好的部分**   *通过 37 个信号*变得真实****   *Karl Seguin*的编程基础****   *计算机图形学：C 语言原理与实践*（第 2 版）*   *Bruce Eckel 用 Ja​​va*思考****   *计算系统的元素**   *Joshua Kerievsky*重构模式****   *Andrew S. Tanenbaum 的*现代操作系统****   *带注释的图灵**   *让我们变得聪明的事情*唐纳德·诺曼*   *克里斯托弗亚历山大*的永恒建筑方式****   *截止日期： Tom DeMarco*的关于项目管理的小说****   *Stroustrup*的 C++ 编程语言（第 3 版）****   *企业应用架构模式**   *计算机系统——程序员的视角**   *Robert C. Martin*的 C# 中的敏捷原则、模式和实践****   *以测试*为指导的不断发展的面向对象软件****   *Brad Abrams 的*框架设计指南****   *大卫韦斯特博士的*对象思维****   *W. Richard Stevens*在 UNIX 环境中的高级编程****   *黑客和画家：计算机时代的大创意**   *Tracy Kidder*新机器的灵魂****   *CLR 通过 C#*由 Jeffrey Richter*   *克里斯托弗亚历山大*的永恒建筑方式****   *Steve Metsker*的 C# 设计模式****   *刘易斯卡罗尔*的《爱丽丝梦游仙境》****   *禅与摩托车维修艺术*Robert M. Pirsig*   *关于面子——交互设计的精髓**   *每个人都来了：没有组织的组织的力量*Clay Shirky*   *编程之道**   *自然的计算之美**   *Steve Maguire*编写可靠的代码****   *菲利普和亚历克斯的网络出版指南**   *Grady Booch*的面向对象分析和应用程序设计****   *Joshua Bloch 的《*有效的 Java 》****   *NJ Cutland 的*可计算性****   *编程大师**   *道德经**   *高效的程序员**   *凯文米特尼克*的欺骗艺术****   *职业程序员：不完美世界的游击战术*克里斯托弗·邓肯*   *人工智能编程范式：Common Lisp 中的案例研究**   *末日大师**   *Andy Hunt 和 Dave Thomas 和 Matt Hargett*在 C# 中使用 NUnit 进行实用单元测试****   *如何解决*乔治波利亚*   *Paulo Coelho*的炼金术士****   *Smalltalk-80：语言及其实现**   *Michael Howard*编写安全代码（第 2 版）****   *Philip Wadler 和 Richard Bird*的函数式编程简介****   *没有错误！*大卫·蒂伦*   *Jason Freid 和 DHH*返工****   *JUnit 在行动***********************************************

 *** * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-09-18T03:34:36.420

[极限编程解释：拥抱变化](https://rads.stackoverflow.com/amzn/click/com/0201616416)由肯特贝克。虽然我不提倡在软件开发方面采用硬核 XP 或高速公路，但我希望我在职业生涯的早期就已经了解了本书中的原则。单元测试、重构、简单性、持续集成、成本/时间/质量/范围——这些改变了我看待开发的方式。在敏捷之前，一切都是关于调试器和对变更请求的恐惧。敏捷之后，那些恶魔就没有那么大了。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-08-21T19:58:25.350

[K&R](https://rads.stackoverflow.com/amzn/click/com/0131103628)

@Juan：我知道 Juan，我知道 - 但有些东西只能通过真正投入手头的任务来学习。整天讲抽象的理想只会让你成为一名学者。正是在摘要的应用中，我们才真正了解了它们存在的原因。:P

@Keith：Alan Cooper 对“The Inmates are Running the Asylum”的大力提及——这确实让我大开眼界，自从我阅读那本书以来，任何与我合作过的开发人员都听到我提到了它所支持的想法。+1

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-09-16T13:51:00.600

[Paradigms of Artificial Intelligence Programming](http://norvig.com/paip.html): Case Studies in Common Lisp by Peter Norvig

![enter image description here](../Images/8102b0558275d02092657ee3571666ad.png)

I started reading it because I wanted to learn Common Lisp. When I was halfway, I realized this was the greatest book about programming I had read so far.

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2010-05-26T12:01:43.767

[Benjamin C Pierce 的Types and Programming Languages](http://www.cis.upenn.edu/~bcpierce/tapl/index.html)对编程语言的基础有透彻的理解。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2008-10-14T12:04:58.113

[计算机科学家的离散数学 http://ecx.images-amazon.com/images/I/51HCJ5R42KL._SL500_BO2,204,203,200_AA219_PIsitb-sticker-dp-arrow,TopRight,-24,-23_SH20_OU02_.jpg](http://ecx.images-amazon.com/images/I/51HCJ5R42KL._SL500_BO2,204,203,200_AA219_PIsitb-sticker-dp-arrow,TopRight,-24,-23_SH20_OU02_.jpg)

JK Truss[为计算机科学家提供的离散数学。](https://rads.stackoverflow.com/amzn/click/com/0201360616)

虽然这不会教你编程，但它会教你每个程序员都应该知道的基础数学。您可能还记得大学时的这些东西，但实际上，做谓词逻辑会提高您的编程技能，如果您想使用集合进行编程，则需要学习集合论。

这里确实有很多有趣的信息，可以让你以不同的方式思考问题。拥有它很方便，只是偶尔学习一些新东西。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2009-06-07T17:38:52.937

我个人的最爱之一是[Hacker's Delight](https://rads.stackoverflow.com/amzn/click/com/0201914654)，因为它既有趣又具有教育意义。

希望第二版快点出！

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2008-12-16T12:43:14.983

绝对的软件工艺

[替代文字 http://ecx.images-amazon.com/images/I/5186JKTDVWL._SL500_AA240_.jpg](http://ecx.images-amazon.com/images/I/5186JKTDVWL._SL500_AA240_.jpg)

这本书解释了很多关于软件工程、系统开发的东西。了解不同类型的产品开发之间的区别也非常有用：web VS shrinkwrap VS IBM 框架。人们在构思瀑布模型时的想法是什么？阅读本文，我们将变得清晰（希望如此）

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2010-11-18T19:27:10.800

[《数据库系统概念](https://rads.stackoverflow.com/amzn/click/com/0073523321)》是您可以阅读的关于理解良好数据库设计原则的最佳书籍之一。

![替代文字](../Images/6ff2d420dd4a5e434b08c18cf6254af2.png)

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2008-11-19T05:57:39.880

[系统学：系统如何工作，尤其是它们如何失败](https://rads.stackoverflow.com/amzn/click/com/0812906748)。便宜用就行。但是，在您参与过一些失败的项目之前，您可能无法获得幽默感。

这本书的美妙之处在于版权年。

可能是书中提出的最深刻的外卖“法则”：

*基本故障模式定理 (FFT)：复杂系统通常在故障模式下运行。*

这个想法是在任何给定的软件中都有失败的部分被其他部分的失败或其他部分的验证所掩盖。查看[Therac-25 辐射机](http://en.wikipedia.org/wiki/Therac-25)的真实示例，其软件缺陷被硬件故障保护所掩盖。当硬件故障保护被移除时，多年来一直未被发现的软件竞争状况导致机器杀死了 3 人。

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2009-09-18T13:24:32.823

编程实践。作者：Brian W. Kernighan，Rob Pike。

这里展示的风格非常好——代码不言自明，整本书都遵循 KISS 原则。就个人而言，不是我选择的语言，但对我仍然有影响。

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2009-06-28T17:55:18.897

[计算机编程的概念、技术和模型。](https://rads.stackoverflow.com/amzn/click/com/0262220695)

[替代文字 http://ecx.images-amazon.com/images/I/51YZ50ZR13L._SL500_AA240_.jpg](http://ecx.images-amazon.com/images/I/51YZ50ZR13L._SL500_AA240_.jpg)

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2010-11-23T03:15:27.000

[从头开始编程。](http://savannah.spinellicreations.com/pgubook/ProgrammingGroundUp-1-0-booksize.pdf)它在互联网上是免费的。这本书教会了我 AT&T asm。这很容易阅读。

![替代文字](../Images/cc71f01be1517de5bfcdf06cd6725e30.png)

* * *

## 回答 #14

> 赞同：9
> 
> 时间：2010-08-05T15:26:40.950

[替代文字 http://ecx.images-amazon.com/images/I/51E0Ojkz8iL._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA300_SH20_OU01_.jpg](https://rads.stackoverflow.com/amzn/click/com/0262062186)

* * *

## 回答 #15

> 赞同：8
> 
> 时间：2008-09-16T03:25:30.463

托马斯弗里德曼的《世界是平的》。

卓越的编程需要投入脑力，并致力于与医学或法律专业相媲美的持续学习。它支付的只是这些职业的一小部分，更不用说支付给那些进入金融领域的精通数学的人的工资了。*构建代码*的工资正在下降，因为在大多数经济体中，对于聪明和自律的人来说，这是一个*相对容易进入的职业。*

编程已经被侵蚀到支付少于管道的地步。管道不能“离岸”。您无需支付 2395 美元就可以每隔一年参加一次专业管道工会议，即可获得一套全新的管道技术，这将花费您一年的时间来学习。

如果你住在北美或欧洲，又年轻又聪明，那么编程就不是一个理性的职业选择。*绝对是涉及*编程的业务。学习商业，对编程有足够的了解来改进你的 BS 探测器：太棒了。但是将大部分精力用于掌握库、数据结构和算法？仅当编程对您而言比经济选择更重要时，这才有意义。

如果您*热爱*编程并因此打算将其作为您的职业，那么您应该对正在并将继续的力量形成冷眼的理解，使其成为一个越来越难谋生的职业. “世界是平的”不会教你如何命名变量，但它会让你沉浸在*已经*到来的经济现实中 6 或 8 个小时。如果您可以阅读它并且不害怕，*那就*出去购买“代码完成”。

* * *

## 回答 #16

> 赞同：8
> 
> 时间：2010-03-02T11:44:38.060

[Object Oriented Analysis and Design with Applications by Brady Booch](https://rads.stackoverflow.com/amzn/click/com/020189551X)

* * *

## 回答 #17

> 赞同：8
> 
> 时间：2010-10-24T15:01:53.620

Python 语言对我的影响很大，我希望我早在几年前就读过这本书。Python 语言的优美和简洁确实影响了我用其他语言编写代码的方式。

![替代文字](../Images/bb45014090e2cb77948cb99ed0e2a5d9.png) ![替代文字](../Images/57f1246dc365c9fef754153ac069ab4d.png)

* * *

## 回答 #18

> 赞同：8
> 
> 时间：2008-08-05T01:25:46.643

@Peter Coulton - 你不读 Knuth，你研究它。

对我和我的工作来说……*纯函数式数据结构*非常适合用函数式语言进行思考和开发。

* * *

## 回答 #19

> 赞同：8
> 
> 时间：2009-12-27T23:36:49.270

[新图灵综合 http://ecx.images-amazon.com/images/I/51HlYd-%2BRwL._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA300_SH20_OU01_.jpg](http://ecx.images-amazon.com/images/I/51HlYd-%2BRwL._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA300_SH20_OU01_.jpg)

真是好书。对计算机科学最重要的领域有高水平的品味。是的，CS != 编程，但这对每个程序员仍然有用。

* * *

## 回答 #20

> 赞同：8
> 
> 时间：2010-07-27T17:27:23.930

**编程实践**

![替代文字](../Images/3cf26196949995fd5290e2f741a9f5cf.png)

和

**电脑怎么解决**

[替代文字 http://img.infibeam.com/img/7101e0ee/496b1/05/629/PMB-9788131705629.jpg?hei=200&wid=160&op_sharpen=1](http://img.infibeam.com/img/7101e0ee/496b1/05/629/P-M-B-9788131705629.jpg?hei=200&wid=160&op_sharpen=1)

* * *

## 回答 #21

> 赞同：8
> 
> 时间：2009-07-23T01:24:27.453

![替代文字](../Images/f838216d5bd88f2f78043f9dc5f6abe1.png)

去年我上了很多课。我读

[The Innovator's Dilemma (disruptive tech)](http://books.google.com/books?id=lqKho8KWXmAC&dq=the+innovator%27s+dilemma&printsec=frontcover&source=bn&hl=en&ei=MLhnSu_-DJWHlAev4LjgCQ&sa=X&oi=book_result&ct=result&resnum=4)
[The Mythical Man Month (管理软件)](http://en.wikipedia.org/wiki/The_Mythical_Man-Month)
[Crossing the Chasm (startup)](http://en.wikipedia.org/wiki/Crossing_the_Chasm)
[Database Management Systems, The COW Book](http://pages.cs.wisc.edu/~dbbook/)
[Programming C#, The OSTRICH Book Starting](http://oreilly.com/catalog/9780596003098/)
[iPhone Developmen, The GRAPEFRUIT Book](http://www.apress.com/book/view/1430216263)

每本书都很棒，但 Clayton Christensen 的《创新者的困境》（1997 年！！！）确实是一本很棒的书，它让我真正思考了现代软件世界。解决的挑战是颠覆性技术，以及磁盘驱动器公司和非技术公司如何总是被新的、改变游戏规则的技术所破坏。在考虑可能是最大的“网络”公司 Google 时，它​​提供了一个新的视角。为什么他们在所有事情中都掌握了主动权？这是因为他们不想让自己的位置被新事物*打乱*。谷歌上的预览足以让您了解这个想法。阅读！

* * *

## 回答 #22

> 赞同：8
> 
> 时间：2009-11-26T20:04:24.463

黑客，作者 Steven Levy。

个性和生活方式必须是第一位的。其他的都可以学习。

* * *

## 回答 #23

> 赞同：7
> 
> 时间：2009-06-03T20:01:04.630

Kernighan & Plauger 的[编程风格元素](https://rads.stackoverflow.com/amzn/click/com/0070342075)。它说明了花哨的聪明和优雅的聪明之间的区别。

* * *

## 回答 #24

> 赞同：7
> 
> 时间：2008-08-21T20:02:07.680

Fred Brooks 的神话人物月 [http://en.wikipedia.org/wiki/The_Mythical_Man-Month](http://en.wikipedia.org/wiki/The_Mythical_Man-Month)

* * *

## 回答 #25

> 赞同：7
> 
> 时间：2008-09-23T05:48:04.767

[替代文字 http://ecx.images-amazon.com/images/I/61dECNkdnTL._SL500_AA240_.jpg](http://ecx.images-amazon.com/images/I/61dECNkdnTL._SL500_AA240_.jpg)

[C++ How to Program](https://rads.stackoverflow.com/amzn/click/com/0136152503)适合初学者。这是一本完整的好书，有 1500 页。

* * *

## 回答 #26

> 赞同：7
> 
> 时间：2008-09-17T07:55:51.587

Martin Fowler 的**[重构：改进现有代码的设计](http://www.amazon.co.uk/Refactoring-Improving-Design-Existing-Technology/dp/0201485672/)**已经列出。但我会详细说明为什么它会影响我。

整本书的精髓在于结构化代码，使其更易于*人类*阅读和理解。它强烈地告诉我，我编写的代码是为了让我的同事和继任者使用并可能从中学到一些*好的*东西。它激励我有意识地[编程，让人们赞美我的名字，而不是诅咒我永远被诅咒](http://icelava.net/forums/post/1040.aspx)。

* * *

## 回答 #27

> 赞同：7
> 
> 时间：2008-08-28T23:47:12.153

虽然我同意上面的许多书都是必读的（实用程序员、神话人物月、计算机编程艺术和 SICP 立即浮现在脑海中），但我想朝着稍微不同的方向前进并推荐[A Discipline Edsger Dijkstra的编程](https://rads.stackoverflow.com/amzn/click/com/013215871X "编程学科")。尽管它已有 32 年历史，但对“可验证性设计”的强调是高度相关的（即使“可验证性”意味着“证明”而不是“单元测试”）。

* * *

## 回答 #28

> 赞同：7
> 
> 时间：2008-08-27T01:42:43.217

我认为“Unix 编程的艺术”是一本优秀的书，作者是 Eric S. Raymond 的优秀黑客/聪明才智，他试图让我们理解软件设计的一些原则（主要是简单性）。这本书是每个即将在 Unix 平台下开始项目的编程人员的必备书。

* * *

## 回答 #29

> 赞同：7
> 
> 时间：2011-01-14T09:13:25.957

[TCP/IP 指南](http://nostarch.com/tcpip.htm), Charles M. Kozierok

尽管它被描述为“百科全书参考”，但它作为叙述的可读性*令人难以置信。*

这位作者提供了一个非常、非常、非常出色的、全面的网络介绍以及网络基础设施。所有程序员都应该知道的事情。

[对我来说，这是 Charles Petzold 的“代码](https://stackoverflow.com/questions/1711/what-is-the-single-most-influential-book-every-programmer-should-read/1727#1727)”的自然后续。如果“代码”向外行解释计算机如何工作，“TCP/IP 指南”则解释它们如何连接在一起。

如果你给一个 12 岁的极客一份“代码”和一份“TCP/IP 指南”的副本——他们将在 17 岁时构建下一个谷歌。

换句话说，如果我可以回到过去并告诉自己在我作为开发人员职业生涯的开始时阅读一本特定的书，那么这本书（加上*Code*）就在我的列表顶部。

* * *

## 回答 #30

> 赞同：7
> 
> 时间：2009-03-20T02:45:42.200

这是一本没有受到广泛赞誉，但充满深刻见解的优秀书籍：[Agile Software Development: The Cooperative Game](https://rads.stackoverflow.com/amzn/click/com/0321482751)，Alistair Cockburn 着。

它有什么特别之处？好吧，显然每个人都听说过“敏捷”这个词，而且现在似乎大多数人都是信徒。不过，不管你是否相信，敏捷运动的存在背后有一些深刻的原则。本书以精确、科学的方式揭示并阐明了这些原则。一些原则是（顺便说一句，这些是我的话，不是 Alistair 的）：

1.  团队软件开发最难的事情是让每个人的大脑都有相同的理解。我们正在构建庞大、精细、复杂的系统，这些系统在有形世界中是不可见的。您越善于让更多人的大脑分享更深入的理解，您的团队在软件开发方面的效率就越高。**这就是结对编程有意义的根本原因。大多数人都忽略了它（我最初也是如此），但考虑到这一原则，我强烈建议您再试一次。你最终会遇到两个深入了解你刚刚构建的子系统的人......没有很多其他方法可以如此快速地进行如此深入的信息传输。这就像瓦肯人的心灵融合。**
2.  你并不总是需要语言来快速传达深刻的理解。还有一个推论：单词太多，你超出了听众/读者的能力，这意味着你尝试的理解转移不会发生。考虑到孩子们通过“沉浸”和“吸收”来学习如何说语言。不仅仅是语言……他举了一些孩子在地板上玩火车的例子。随之而来的是另一个从未见过**火车**的孩子……但通过观察其他孩子，他掌握了游戏的要点并继续玩。这在人与人之间一直发生。这与关于太多单词的推论一起帮助您了解在旧的“瀑布”时代尝试编写 700 页的详细需求规范是多么错误。

那里还有很多东西。我现在要闭嘴了，但我强烈推荐这本书！

* * *

## 回答 #31

> 赞同：7
> 
> 时间：2008-09-13T15:53:00.083

Pete Goodliffe 的[Code Craft是一本好书！](https://rads.stackoverflow.com/amzn/click/com/1593271190)

[代码工艺 http://ecx.images-amazon.com/images/I/51WZ9AEC3GL._SL500_BO2,204,203,200_PIsitb-dp-500-arrow,TopRight,45,-64_OU01_AA240_SH20_.jpg](http://ecx.images-amazon.com/images/I/51WZ9AEC3GL._SL500_BO2,204,203,200_PIsitb-dp-500-arrow,TopRight,45,-64_OU01_AA240_SH20_.jpg)

* * *

## 回答 #32

> 赞同：7
> 
> 时间：2008-10-26T18:15:46.150

[厄运大师。](https://rads.stackoverflow.com/amzn/click/com/0812972155)就你的职业的动力和热爱而言：它不会比这本书中描述的更好，真实鼓舞人心的故事！

* * *

## 回答 #33

> 赞同：6
> 
> 时间：2008-08-21T19:54:14.437

[务实的程序员：从熟手到大师](http://www.pragprog.com/the-pragmatic-programmer)毫无疑问。其中的建议非常好，而且很简单，给人的感觉就像是“常识程序员”。爱它。

* * *

## 回答 #34

> 赞同：6
> 
> 时间：2008-08-21T20:02:28.897

[掌握正则表达式](https://rads.stackoverflow.com/amzn/click/com/0596528124)

* * *

## 回答 #35

> 赞同：6
> 
> 时间：2008-08-28T19:13:28.003

我有几本对我影响很大的好书，到目前为止我还没有在这个列表中看到：

唐纳德·诺曼（Donald Norman*[）的日常事物心理学。](https://rads.stackoverflow.com/amzn/click/com/0465067093)*为他人设计的一般原则。这似乎对 UI 非常有用，但如果你仔细想想，它几乎在任何地方都有应用程序，除了原始开发人员之外，还有其他人必须使用的界面；例如，一个 API 并以这样的方式设计接口，使其他开发人员形成正确的心理模型并从 API 本身获得适当的反馈。

Glen Myers*[的软件测试艺术。](https://rads.stackoverflow.com/amzn/click/com/0471469122)*对测试软件的全面介绍；适合程序员阅读以帮助他们像测试人员一样思考，即思考可能出现的问题并做好准备。

顺便说一句，我意识到问题是“单本最具影响力的书”，但讨论似乎已经改为列出好书供开发人员阅读，所以我希望我可以原谅我列出两本好书而不仅仅是一本。

* * *

## 回答 #36

> 赞同：6
> 
> 时间：2008-08-11T23:52:03.793

我已经有一段时间了，所以我发现有影响力的大多数书都不一定适用于今天。我确实相信了解您正在开发的平台（硬件和操作系统）是普遍重要的。我也认为从其他人的错误中学习很重要。所以我推荐的两本书是：

[计算灾难](https://rads.stackoverflow.com/amzn/click/com/0130828629)和[寻找愚蠢：二十多年的高科技营销灾难](https://rads.stackoverflow.com/amzn/click/com/1590597214)

* * *

## 回答 #37

> 赞同：6
> 
> 时间：2008-09-16T14:55:24.457

[Rapid Development](https://rads.stackoverflow.com/amzn/click/com/1556159005) by McConnell

* * *

## 回答 #38

> 赞同：6
> 
> 时间：2008-09-11T03:15:35.523

用户有没有接触过你的代码？如果你不只做后端工作，我推荐[About Face: The Essentials of User Interface Design——](https://rads.stackoverflow.com/amzn/click/com/0470084111) 现在是第三版（链接）。我曾经认为我的用户很愚蠢，因为他们没有“得到”我的界面。当然，我错了。About Face 让我转过身来。

* * *

## 回答 #39

> 赞同：6
> 
> 时间：2008-08-21T21:19:08.820

除了它们在我的书架上的排列方式外，没有特别的顺序：

*   *务实的程序员*
*   *Fowler*的重构
*   *有效地使用*Feathers 的遗留代码。这实际上是*Refactoring*的配套卷。
*   *Fowler 提炼的UML*。它的其他优点之一是简洁。
*   *Steve Maguire*调试开发过程**
**   *Gamma 等人的设计模式*（又名“四人帮”）*

 ** * *

## 回答 #40

> 赞同：6
> 
> 时间：2008-08-28T00:41:34.587

兔子先生的 ActiveX 指南

* * *

## 回答 #41

> 赞同：6
> 
> 时间：2010-07-28T16:10:48.677

[替代文字 http://ecx.images-amazon.com/images/I/51fhwR6eb3L._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA300_SH20_OU01_.jpg](http://ecx.images-amazon.com/images/I/51fhwR6eb3L._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA300_SH20_OU01_.jpg)

[替代文字 http://ecx.images-amazon.com/images/I/51PDNR3C40L._SL500_AA300_.jpg](http://ecx.images-amazon.com/images/I/51PDNR3C40L._SL500_AA300_.jpg)

* * *

## 回答 #42

> 赞同：6
> 
> 时间：2008-12-02T18:02:19.463

当我开始使用 Java 进行开发时（直到今天仍在这样做），我不得不推荐该领域的杰出作品：[Mr Bunny's Big Cup o' Java](http://www.mrbunny.com/)。

来自作者的简介：

> 学习 Java 没有比将专家 Java 程序员的松果体植入大脑更好的方法了。可悲的是，大多数 HMO 拒绝为这种职业拯救程序付费，认为 Java 过于实验性。对于我们这些迫不及待地想要彻底改革医疗保健改革的人来说，终于有了另一种治疗方法。
> 
> Mr. Bunny's Big Cup O' Java 被十位医生中的 n 位推荐，其中 n 是您希望弥补的任何整数，以打动极易上当受骗的公众。本书从对本书的概述开始，然后迅速扩展到本书本身。只需查看涵盖的主题：
> 
> *   爪哇
> 
> 简而言之，MBBCOJ 将教您在当今的兔子开发环境中获得成功职业所需的所有知识。

仅凭对像素的了解就会使我的软件开发寿命缩短数年。

* * *

## 回答 #43

> 赞同：6
> 
> 时间：2009-11-08T08:26:33.573

Brian W.Kerninghan 和 Rob Pike 的“编程实践”。

语言通俗易懂，题材也很有趣。

* * *

## 回答 #44

> 赞同：5
> 
> 时间：2008-09-10T15:07:58.423

这本书并不是真正适合初学者的书，但如果您正在寻找 SOA 设计书籍，那么[SOA in Practice: The Art of Distributed System Design](https://rads.stackoverflow.com/amzn/click/com/0596529554)适合您。

* * *

## 回答 #45

> 赞同：5
> 
> 时间：2008-08-21T20:08:21.580

[重构](https://rads.stackoverflow.com/amzn/click/com/0201485672)

* * *

## 回答 #46

> 赞同：5
> 
> 时间：2008-10-08T16:38:38.123

[Facts and Fallacies of Software Engineering by Robert L. Glass http://www.codinghorror.com/blog/images/facts-and-fallacies-of-software-engineering.jpg](http://www.codinghorror.com/blog/images/facts-and-fallacies-of-software-engineering.jpg)

[Facts and Fallacies of Software Engineering by Robert L. Glass](http://books.google.co.uk/books?hl=en&id=3Ntz-UJzZN0C&dq=facts+and+fallacies&printsec=frontcover&source=web&ots=zeNETSf0qr&sig=RoSzxFvdi7dohjf-qXGu3iDAmu8&sa=X&oi=book_result&resnum=3&ct=result) is a really excellent book. I had been a professional hacker for almost 10 years before I read it, and a I still learned a ton of stuff.

* * *

## 回答 #47

> 赞同：5
> 
> 时间：2008-09-01T08:14:50.537

Steve McConnell 的 Code Complete 获得了很多票，但是他的[软件项目生存指南](http://www.stevemcconnell.com/sg.htm)书呢？我认为它们都是必读的，但出于不同的原因。

* * *

## 回答 #48

> 赞同：5
> 
> 时间：2009-01-22T22:41:11.163

不是最有影响力但值得一看的是JMCoetzee的《 [Youth 》。](http://www.amazon.co.uk/Youth-J-M-Coetzee/dp/0436205823)

《青春》的叙述者是 1950 年代南非的一名学生，长期以来一直在策划逃离他的祖国：逃离母亲令人窒息的爱，逃离失败困扰他的父亲，逃离他确信即将发生的事情革命。学习数学、读诗、存钱，他努力确保当他到达现实世界时，无论在哪里，他都准备好充分体验生活，并将其转化为艺术。然而，他终于到达伦敦，既没有发现诗歌，也没有发现浪漫。相反，他屈从于作为一名计算机程序员的单调生活，随机、无爱的事务无法缓解这种生活。没有灵感，他停止写作。作为一个笨拙的殖民者，一个宪法外人，他开始了一段黑暗的朝圣之旅，在其中他不断地受到考验，不断地被发现缺乏。

[青年封面 http://img440.imageshack.us/img440/5140/youthgd4.jpg](http://img440.imageshack.us/img440/5140/youthgd4.jpg)

* * *

## 回答 #49

> 赞同：5
> 
> 时间：2008-09-15T18:25:04.273

Brian W. Kernighan 和 PJ Plauger 的软件工具

它对我编写软件的方式产生了深远的影响。

* * *

## 回答 #50

> 赞同：5
> 
> 时间：2009-08-18T10:20:42.863

[完美的软件：以及其他关于测试的幻想](https://rads.stackoverflow.com/amzn/click/com/0932633692)

[标题封面 http://ecx.images-amazon.com/images/I/51j3BSRspAL._SL500_AA240_.jpg](http://ecx.images-amazon.com/images/I/51j3BSRspAL._SL500_AA240_.jpg)

**完美软件：以及其他关于测试** *的幻想 Gerald M. Weinberg*

ISBN-10：0932633692

ISBN-13：978-0932633699

* * *

## 回答 #51

> 赞同：5
> 
> 时间：2010-08-09T22:18:58.387

[餐巾纸的背面](https://rads.stackoverflow.com/amzn/click/com/B0020MMBCG)，丹·罗姆（[Dan Roam](http://www.thebackofthenapkin.com/)）。

[餐巾纸的背面 http://www.coverbrowser.com/image/bestsellers-2008/302-7.jpg](http://www.coverbrowser.com/image/bestsellers-2008/302-7.jpg)

一本关于视觉思维技巧的好书。现在也有[扩展](https://rads.stackoverflow.com/amzn/click/com/1591843065)版。我不能说那个版本，因为我不拥有它；然而。

* * *

## 回答 #52

> 赞同：5
> 
> 时间：2010-11-01T02:40:53.347

[企业模式和 MDA：使用原型模式和 UML 构建更好的软件](http://www.informit.com/store/product.aspx?isbn=9780321112309&aid=3B419801-6640-4A1F-A653-6CD00295FCDD)

对于那些希望利用 ORM 和 UML 的人来说，这是一本极好的读物

![企业模式和 MDA：使用原型模式和 UML 构建更好的软件](../Images/60207dbfb0fdbccc6baf46a669d14012.png)

* * *

## 回答 #53

> 赞同：5
> 
> 时间：2010-05-26T12:06:05.690

FA Turbak[的《编程语言中的设计概念》产生了许多编程概念的详细实现，对于理解幕后发生的事情非常有用。](http://www.amazon.co.uk/Design-Concepts-Programming-Languages-Turbak/dp/0262201755/ref=sr_1_3?ie=UTF8&s=books&qid=1274875492&sr=8-3)

* * *

## 回答 #54

> 赞同：4
> 
> 时间：2008-09-16T14:33:42.853

[有效的 C++](https://rads.stackoverflow.com/amzn/click/com/0321334876)和[更有效的 C++](https://rads.stackoverflow.com/amzn/click/com/020163371X)，作者 Scott Myers。

* * *

## 回答 #55

> 赞同：4
> 
> 时间：2008-09-07T06:12:33.213

[Debugging the Development Process: Practical Strategies for Staying Focused, Hitting Ship Dates, and Building Solid Teams](https://stackoverflow.com/questions/559/what-books-would-you-recommend-for-a-beginning-software-developer#1150) by Steve Maguire.

No-non-sense, down-to-earth, entertaining, profound.

* * *

## 回答 #56

> 赞同：4
> 
> 时间：2008-09-16T14:20:05.773

[Mary 和 Tom Poppendieck 的精益软件开发](http://www.poppendieck.com/ld.htm)绝对是每个开发人员书架上的一本

* * *

## 回答 #57

> 赞同：4
> 
> 时间：2008-09-01T16:22:53.967

我最近读[了 Dreaming in Code](https://rads.stackoverflow.com/amzn/click/com/1400082471)，发现它是一本有趣的读物。自从我开始阅读 Chandler 1.0 以来，也许更是如此。阅读有关试图“改变世界”的才华横溢的项目团队的成长痛苦和错误，可以让您从中学到很多东西。斯科特还提出了许多程序员的知识和智慧，这只是一个有趣的阅读。

[Beautiful Code](https://rads.stackoverflow.com/amzn/click/com/0596510047)有一两件事让我产生了不同的想法，尤其是关于自顶向下运算符优先级的章节。

* * *

## 回答 #58

> 赞同：4
> 
> 时间：2008-08-05T17:28:24.937

Code Complete 是第一选择，但我还要引用 Gang of Four 的 Design Patterns 和 Craig Larman 的 Applying UML and Patterns。

克里斯托弗·亚历山大（Christopher Alexander）的《永恒的建筑方式》是另一个伟大的方式。尽管它是关于架构的，但它包含在我已经阅读过的许多优秀编程书籍的参考书目中。

另一个，我从中学到了很多新东西的，是 Clifton Nock 的 Data Access Patterns。

* * *

## 回答 #59

> 赞同：4
> 
> 时间：2008-09-16T14:03:32.083

Perl 编程 (O'Reilly)

* * *

## 回答 #60

> 赞同：4
> 
> 时间：2008-09-16T16:33:01.850

Bertrand Meyer 的面向对象软件构建

* * *

## 回答 #61

> 赞同：4
> 
> 时间：2009-04-27T13:02:05.697

我想到了三本书。

*   Eric S. Raymond 的 Unix 编程艺术。
*   瑞克·库克编写的《巫术》。
*   Donald Knuth 的计算机编程艺术。

我也喜欢[Paul Graham 的作品。](http://www.paulgraham.com)

* * *

## 回答 #62

> 赞同：4
> 
> 时间：2009-08-20T20:55:29.603

一本书的影响力通常取决于读者以及他们在阅读这本书时所处的职业生涯。我必须向[Head First Design Patterns](https://rads.stackoverflow.com/amzn/click/com/0596007124)大声疾呼。伟大的书和它的写作方式非常有创意，应该作为其他科技书籍作者的榜样。即它是为了促进学习和内化概念而编写的。

[头部优先设计模式 http://ecx.images-amazon.com/images/I/51LSqrgoT1L._SS500_.jpg](http://ecx.images-amazon.com/images/I/51LSqrgoT1L._SS500_.jpg)

* * *

## 回答 #63

> 赞同：4
> 
> 时间：2008-11-04T22:40:29.087

似乎没有人提到 Stroustup 的[《C++ 编程语言](http://www.research.att.com/~bs/3rd.html)》，这是一本每个 C++ 程序员都应该阅读的好书。

我还认为，[Extreme Programming Explained: Embrace Change](http://www.amazon.co.uk/Extreme-Programming-Explained-Embrace-Change/dp/0321278658)应该被每个程序员和经理阅读。本书中的许多想法现在都是常识，但本书对软件工程中的质量追求给出了明智且鼓舞人心的说明。

我会支持经典的 Knuth 和 Gang of Four 的建议。

* * *

## 回答 #64

> 赞同：4
> 
> 时间：2008-11-20T02:31:39.467

W. Richard Stevens[的 UNIX 环境中的高级编程。](https://rads.stackoverflow.com/amzn/click/com/0201433079)

* * *

## 回答 #65

> 赞同：4
> 
> 时间：2009-07-23T01:30:31.380

添加到上面提到的伟大的：

[企业应用架构模式](https://rads.stackoverflow.com/amzn/click/com/0321127420)

[企业集成模式](https://rads.stackoverflow.com/amzn/click/com/0321200683)

* * *

## 回答 #66

> 赞同：4
> 
> 时间：2010-02-22T23:13:58.367

我的投票是“如何像计算机科学家一样思考：使用 Python 学习”它既可以作为[书籍](https://rads.stackoverflow.com/amzn/click/com/0971677506)也可以作为[免费电子书获得](http://www.greenteapress.com/thinkpython/thinkCSpy/thinkCSpy.pdf)。

它真的帮助我理解了 Python 和一般编程的基础知识。尽管它使用 Python 来演示概念，但它们适用于大多数（如果不是全部）编程语言。另外：它是免费的！

* * *

## 回答 #67

> 赞同：4
> 
> 时间：2010-08-25T10:53:18.037

![替代文字](../Images/8489ac8af101e21c55dad64c84880bd7.png)

[精通：成功和长期实现的关键，乔治·伦纳德（George Leonard）](https://rads.stackoverflow.com/amzn/click/com/0452267560)

它是关于掌握任何技能需要什么样的心态，以及为什么。它太棒了，而且也很容易阅读。

* * *

## 回答 #68

> 赞同：3
> 
> 时间：2008-09-16T18:26:38.660

[http://ecx.images-amazon.com/images/I/519J3P8ANML._SL500_AA240_.jpg](http://ecx.images-amazon.com/images/I/519J3P8ANML._SL500_AA240_.jpg)

将我的编程提升到了一个全新的水平。

* * *

## 回答 #69

> 赞同：3
> 
> 时间：2009-06-09T19:59:23.053

我读了大多数在这个问题上得分很高的书——但不是所有的书（感谢上帝！），我立即将其他书添加到我的**亚马逊愿望清单**中！

（有人应该在亚马逊上为这些书创建一个列表......也许一个名为：“Stackoverflow best books ever”的列表？**有人知道该怎么做吗？**）

对我来说，最好的书是**Code Complete**。这是一个启示。我买了英文版和法文版的第二版，我仍然认为它应该是任何计算机科学学校的必读。数据结构很酷，但代码完整，不是开玩笑，更重要的是......

然后，我第二好的书是**编写**可靠的代码——在学会了如何被理解之后，知道如何编写可靠的代码真是太好了。

然后是很多很好的书，但这里没有一本书可以提及。直到 2001 年，我认为：**Framework Design Guidelines**：Conventions, Idioms, and Patterns for Reusable .NET Libraries。一颗宝石！这本书我读了很多遍，它仍然在我的桌子上，就在我的 LCD 旁边，还有 Code Complete（真的！）。我喜欢它的写作方式（喜欢这里和那里添加的评论——书都应该这样写！）

但是，我忘记了我读过的第一本好书！那些让我充满热情地*热爱*计算机科学的人：

*   **计算！**（C64 杂志 - 永远不会忘记**吉姆蝴蝶**：o）
*   **Borland C++ 用户指南**（旧的，大约 1991 年，那些试图介绍面向对象编程的人，写得非常好）。
*   大多数**Microsoft 开发工具用户指南**，大约 1990-1995 年。不知道是谁写的，但是很酷！我记得在星期六的深夜阅读它们......

好吧，很好的问题:o)

* * *

## 回答 #70

> 赞同：3
> 
> 时间：2008-09-16T16:48:53.903

Kent Beck 的极限编程

* * *

## 回答 #71

> 赞同：3
> 
> 时间：2008-09-17T07:10:06.407

对我来说最有影响力的编程书籍是Allen [Holub](http://holub.com/)[*的 Enough Rope to Shoot Yourself in the Foot*](https://rads.stackoverflow.com/amzn/click/com/0070296898)。

[这本书的封面 http://ecx.images-amazon.com/images/I/71AE90J735L._SL500_AA240_.gif](http://ecx.images-amazon.com/images/I/71AE90J735L._SL500_AA240_.gif)

哦，好吧，那是多久以前的事了。

* * *

## 回答 #72

> 赞同：3
> 
> 时间：2008-09-16T14:25:32.000

Aaron Hillegass for Mac OS X 的[Cocoa 编程](http://www.amazon.co.uk/Cocoa-Programming-Mac-OS-X/dp/0321503619/)

* * *

## 回答 #73

> 赞同：3
> 
> 时间：2008-09-16T20:32:08.407

[由 Mike Gunderloy 编写的Coder to Developer](https://rads.stackoverflow.com/amzn/click/com/078214327X)。

* * *

## 回答 #74

> 赞同：3
> 
> 时间：2008-09-16T13:51:34.967

It's not strictly a development book and I believe that I've mentioned it in another answer somewhere but it's a book I really believe all developers should read, from php to Java to assembly developers.

[Code](http://www.amazon.co.uk/Code-Language-DV-Undefined-Charles-Petzold/dp/0735611319/ref=sr_1_1?ie=UTF8&s=books&qid=1221573014&sr=8-1)

It really brings together what's under the hood in a computer, why memory shouldn't be wasted and some of the more interesting parts of the history of computing. It's an introduction to the computer and what it is. It gave me my ultimate passion for low level programming and helped me understand pointers and memory more than any other computer.

* * *

## 回答 #75

> 赞同：3
> 
> 时间：2008-09-16T13:55:06.020

我认为完整的代码将成为这个问题的一个非常受欢迎的问题，对我来说，它纠正了我的许多坏习惯并重新肯定了我的良好做法。

同样对于我的 Perl 背景，我非常喜欢 Damian Conway 的 Perl Best Practices。如果您不使用样式和最佳实践，Perl 可能是一种讨厌的语言，这就是我在阅读（有时是编写）的脚本中看到的。

我喜欢 Head First 系列，当您不想阅读更严肃的风格书籍时，它们非常好且易于阅读。

* * *

## 回答 #76

> 赞同：3
> 
> 时间：2008-09-02T07:23:09.700

这不是问题的直接答案，因为我觉得上面已经回答了，但是，对我的编码方式肯定有影响的一本书是[Code Reading, Volume 1: The Open Source Perspective](http://www.bookpool.com/ss?qs=0201799405)。

[替代文字 http://g.bookpool.com/covers/405/0201799405_140_30O.gif](http://g.bookpool.com/covers/405/0201799405_140_30O.gif)

* * *

## 回答 #77

> 赞同：3
> 
> 时间：2008-09-21T15:48:35.760

令我惊讶的是，还没有提到这本书：Leo Brodie的《[开始》。](http://home.iae.nl/users/mhx/sf.html)毕竟，作为一种基于堆栈的语言，Forth 应该适合这个网站的观众......

诚然，Forth 是一种奇怪的语言，并且现在不是很流行。但这本书读起来很愉快。它有漫画！这本书以及 Brodie 的另一本书[Thinking Forth](http://thinking-forth.sourceforge.net/)都可以在网络上免费获得。

* * *

## 回答 #78

> 赞同：3
> 
> 时间：2008-09-16T14:40:13.620

这让我开始进入真正的OOA&D。

应用 UML 和模式：面向对象分析、设计和迭代开发简介 - Craig Larman

这些也将在那里：

*   企业应用程序架构中的模式 - Fowler
*   领域驱动设计 - Eric Evans

* * *

## 回答 #79

> 赞同：3
> 
> 时间：2008-09-16T16:28:12.173

[Kernighan 和 Pike的 Unix 编程环境](http://en.wikipedia.org/wiki/The_Unix_Programming_Environment)。

![Unix 编程环境](../Images/a1c2a2476bf743f0c45afd14ab74d7b8.png)

它比任何其他书都教会了我构建小型、易于测试的工具的好处，这些工具可以组合起来做大事。

* * *

## 回答 #80

> 赞同：3
> 
> 时间：2008-09-24T23:29:29.213

一个全新的思想，丹尼尔平克。有趣地看待我们行业的未来。

我假设大多数阅读本文的人已经阅读过列表顶部的书籍。所以，我将提供一本书，从不同的角度看待我们的行业。

[替代文字 http://www.danpink.com/images/wnm.jpg](http://www.danpink.com/images/wnm.jpg)

* * *

## 回答 #81

> 赞同：3
> 
> 时间：2008-09-15T20:29:42.180

为了在 prolog 中取得进步，我喜欢这两本书：

[序言的艺术](https://rads.stackoverflow.com/amzn/click/com/0262193388)

[序言的工艺](https://rads.stackoverflow.com/amzn/click/com/0262512270)

真正为逻辑编程和递归方案打开了思路。

* * *

## 回答 #82

> 赞同：3
> 
> 时间：2008-09-18T08:07:26.977

无论您是否使用 Smalltalk 进行编码，[Smalltalk 最佳实践模式](https://rads.stackoverflow.com/amzn/click/com/013476904X "Smalltalk 最佳实践模式")都是一本不错的读物。充满了会改变你编码方式的小观察；为了更好。

* * *

## 回答 #83

> 赞同：3
> 
> 时间：2008-11-12T11:56:10.587

Craig Larman 的[《应用 UML 和模式》 。](https://rads.stackoverflow.com/amzn/click/com/0131489062)

书名有点误导；它确实处理 UML 和模式，但它涵盖的内容更多。这本书的副标题告诉你更多：面向对象分析与设计和迭代开发的介绍。

* * *

## 回答 #84

> 赞同：3
> 
> 时间：2008-12-18T16:00:28.500

对我来说，它是[Design Patterns Explained](https://rads.stackoverflow.com/amzn/click/com/0201715945)，它为我提供了一个关于设计模式的“哦，这就是它的工作原理”的时刻，并且在向其他人教授设计模式时非常有用。

* * *

## 回答 #85

> 赞同：3
> 
> 时间：2009-11-26T20:24:21.150

UNIX 环境中的高级编程 - W. Richard Stevens

* * *

## 回答 #86

> 赞同：3
> 
> 时间：2009-07-15T10:18:57.713

书中的所有**思考。**

**Bruce Eckel**是教育学的天才！很容易理解 C++ 中多态的实现。它包含您应该了解的有关 C++、基本和高级概念的所有内容。比Stroustrup的好多了。我也和他一起学习了 Java。

最后但并非最不重要的：

C++ 是免费的！

[http://www.mindview.net/Books/TICPP/ThinkingInCPP2e.html](http://www.mindview.net/Books/TICPP/ThinkingInCPP2e.html)

* * *

## 回答 #87

> 赞同：3
> 
> 时间：2009-08-05T12:03:57.817

由于我是一名 C# 程序员，并且已经提到了大多数通用书籍，我想推荐 Bill Wagner 的书[“更有效的 C#](http://srtsolutions.com/blogs/billwagner/archive/2008/10/17/more-effective-c-available-now.aspx)。

我认为大多数开发复合 WPF 应用程序的人也应该看看微软的复合应用程序指南（也称为 Prism）：

[复合应用指南](http://www.codeplex.com/CompositeWPF)

* * *

## 回答 #88

> 赞同：3
> 
> 时间：2009-08-05T21:19:33.897

[Peter Norton 的 IBM PC 汇编语言手册](https://rads.stackoverflow.com/amzn/click/com/013662149X)

![替代文字](../Images/3ce7e7122e2f3a56644f77af9ccef085.png)

我在电脑（DOS）前度过了无数个夜晚，探索未知的世界:-D

* * *

## 回答 #89

> 赞同：2
> 
> 时间：2008-08-21T19:55:25.683

[务实的程序员](https://rads.stackoverflow.com/amzn/click/com/020161622X)

* * *

## 回答 #90

> 赞同：2
> 
> 时间：2008-08-21T20:10:00.297

[《有效地使用遗留代码》](https://rads.stackoverflow.com/amzn/click/com/0131177052)是一本非常棒的书，它非常详细地介绍了如何正确地对代码进行单元测试以及它的真正好处是什么。它真的让我大开眼界。

* * *

## 回答 #91

> 赞同：2
> 
> 时间：2009-03-12T18:31:29.300

我现在正在阅读[敏捷软件开发、原则、模式和实践](https://rads.stackoverflow.com/amzn/click/com/0135974445)。对于那些对 XP 和面向对象设计感兴趣的人来说，这是一本经典读物。

[替代文字 http://ecx.images-amazon.com/images/I/519J3P8ANML._SL500_AA240_.jpg](http://ecx.images-amazon.com/images/I/519J3P8ANML._SL500_AA240_.jpg)

* * *

## 回答 #92

> 赞同：2
> 
> 时间：2008-08-25T17:02:29.013

阅读[Head First Design Patterns](http://books.google.com/books?id=LjJcCnNf92kC&dq=head+first+design+patterns&pg=PP1&ots=_9Z38Ii7uY&sig=BQOPlemSK6VvYAapjbrHzCqr434&hl=en&sa=X&oi=book_result&resnum=4&ct=result)以获得比 GoF 书籍更易于理解的介绍。我记得在每一章之后我都感觉自己升级了。

Kent Beck 的TDD[示例测试驱动开发。](http://books.google.com/books?hl=en&id=gFgnde_vwMAC&dq=Test+driven+development&printsec=frontcover&source=web&ots=enExqwUtlH&sig=UgEMnH7P4D54RuSltQctG_NiDh8&sa=X&oi=book_result&resnum=6&ct=result)

* * *

## 回答 #93

> 赞同：2
> 
> 时间：2008-09-16T14:28:03.523

由于上面提到的许多原因，它是 Head First Design Patterns 和 Perl 测试：开发人员笔记本之间的折腾，这应该是任何想要编写可维护代码的 Perl 程序员的圣经之一。

* * *

## 回答 #94

> 赞同：2
> 
> 时间：2011-01-14T16:09:12.163

一开始是命令行。尼尔斯蒂芬森。

* * *

## 回答 #95

> 赞同：2
> 
> 时间：2008-09-17T03:27:06.910

另外，我会提到Hugh Darwen 和 CJ Date[的《第三次宣言》 。](http://www.thethirdmanifesto.com/)如果您对理解*数据*感兴趣（这在程序员中似乎并不常见），这本书是必读的。当你意识到 SQL 有多么糟糕时，它也会让你难过，但它也会帮助你应对这种破碎。了解工具是如何损坏的可以让您在设计时考虑到这些缺陷。

* * *

## 回答 #96

> 赞同：2
> 
> 时间：2008-09-17T08:53:51.150

Another book that has not been mentioned yet, and SHOULD be required reading for EVERY programmer, newbies on up to gurus, in ANY programming language, is Michael Howard's Writing Secure Code (2nd Edition) from MSPress.

* * *

## 回答 #97

> 赞同：2
> 
> 时间：2008-09-16T14:55:09.183

Win32 Programming by Charles Petzold

* * *

## 回答 #98

> 赞同：2
> 
> 时间：2008-09-16T15:08:36.950

我想我们可以每隔几周问[一个评分最高的问题，然后升级所有提到](https://stackoverflow.com/questions/1711/)[代码完整](http://cc2e.com/)或[实用程序员的](http://www.pragprog.com/titles/tpp/the-pragmatic-programmer)人。

并不是说它有什么问题:-)

* * *

## 回答 #99

> 赞同：2
> 
> 时间：2008-08-27T00:50:03.843

我是 Robert C. Martin 的大多数书名的忠实粉丝，尤其是[敏捷软件开发、原则和实践](http://amazon.com/o/ASIN/0135974445)以及[干净的代码：敏捷软件工艺手册](http://amazon.com/o/ASIN/0132350882)。

* * *

## 回答 #100

> 赞同：2
> 
> 时间：2009-03-02T22:23:43.737

我在博客上看到了一篇关于[软件工厂：使用模式、模型、框架和工具组装应用程序](https://rads.stackoverflow.com/amzn/click/com/0471202843 "软件工厂：使用模式、模型、框架和工具组装应用程序")的评论，也谈到了[XI-Factory](http://www.xifactory.com)，我读了它，我必须说这本书是必读的。虽然不是专门针对程序员的，但它非常清楚地解释了编程世界中正在发生的事情，比如模型驱动架构等等。

* * *

## 回答 #101

> 赞同：2
> 
> 时间：2008-09-16T15:32:09.937

Bjarne Stroustrup 的“ C *++ 的设计与演变”*

除了提供 C++ 的大量背景知识外，它也是对大型程序所涉及的权衡和设计问题的长期研究。

[BN.com](http://search.barnesandnoble.com/The-Design-and-Evolution-of-C/Bjarne-Stroustrup/e/9780201543308/?itm=1)

* * *

## 回答 #102

> 赞同：2
> 
> 时间：2008-09-08T02:59:37.893

我发现“Prolog 的艺术”是一本非常好的读物。

* * *

## 回答 #103

> 赞同：2
> 
> 时间：2008-09-08T03:55:08.807

我想我是在与这里的大多数人不同的一代长大的......

我读过的最有影响力的书之一是[APUE](http://www.kohala.com/start/apue.html)。

或者几乎所有 W. Richard Stevens 的作品。

* * *

## 回答 #104

> 赞同：2
> 
> 时间：2008-09-16T16:36:38.877

**专家 C 编程：***Peter Van Der Linden*的深度 C 秘密

 ** * *

## 回答 #105

> 赞同：2
> 
> 时间：2008-09-16T17:10:51.120

我的高中数学老师借给我一本《[你的灯图问题》](https://rads.stackoverflow.com/amzn/click/com/0932633161)，我已经重读了很多遍。作为一名开发人员，在整个生活中，它都是无价的。

* * *

## 回答 #106

> 赞同：2
> 
> 时间：2008-09-16T15:50:14.433

虽然严格来说不是一本软件开发书籍，但我强烈建议[不要让我思考！](https://rads.stackoverflow.com/amzn/click/com/0321344758)被考虑在这个列表中。

* * *

## 回答 #107

> 赞同：2
> 
> 时间：2008-09-16T17:17:39.247

问题是，*“哪本书真正影响了你作为开发人员的工作方式？”* 毫无疑问，Jeff Prosise 所著的**Programming Windows with MFC是对我作为开发人员的工作方式影响最大的一本书。**它没有教我“编程”的基础知识，但它为我和成千上万的其他开发人员打开了 Windows 平台开发的世界。

在开发 MFC 之前，我以前曾以“Petzold 风格”编写过一些 Windows 代码。我很快就决定了我们作为开发人员不值得麻烦的 Windows 平台。当 Prosise 出版他的 MFC 书时，我意识到（与成千上万的其他非 Windows 程序员一起）我可以创建一个易于使用的界面，用户不仅可以理解，而且可以真正享受使用。我狼吞虎咽，在里面做了很多笔记，转了很多角，最后我买了第二本。

长篇大论，杰夫。*使用 MFC 第 2 版对 Windows 进行编程。* 微软出版社 1999 年国际标准书号：1-57231-695-0

* * *

## 回答 #108

> 赞同：2
> 
> 时间：2008-09-16T18:07:36.507

Eric Evans 的领域驱动设计

* * *

## 回答 #109

> 赞同：2
> 
> 时间：2008-09-10T00:42:44.307

Roger S. Pressman - 软件工程（从业者方法）。它有很多有用的信息。

* * *

## 回答 #110

> 赞同：2
> 
> 时间：2009-08-23T05:17:21.277

Domain Driven Design By Eric Evans is a wonderful book!

* * *

## 回答 #111

> 赞同：2
> 
> 时间：2010-02-08T16:31:06.470

[每个程序员都应该知道的 97 件事](https://rads.stackoverflow.com/amzn/click/com/0596809484)

[替代文字 http://ecx.images-amazon.com/images/I/51F134Q8TrL._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA240_SH20_OU01_.jpg](http://ecx.images-amazon.com/images/I/51F134Q8TrL._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA240_SH20_OU01_.jpg)

这本书汇集了世界上一些最优秀的程序员的集体经验。这是必读的。

* * *

## 回答 #112

> 赞同：2
> 
> 时间：2008-09-17T12:58:34.383

对于低级娱乐，我建议**Michael Abrash 的**
i) -Zen of Code Optimization- 和
ii) -Graphics Programming Black Book-
即使您不进行任何图形编程。

* * *

## 回答 #113

> 赞同：2
> 
> 时间：2008-09-18T05:24:32.003

我想说“[超越代码——通过 9 个简单的步骤学会区分自己](http://www.lifebeyondcode.com/)”是一本很好的励志书。我不涉及技术问题，但它描述了与人合作、专业的方式……对我来说，如果你需要一些鼓舞士气的话，这是一本你可以反复阅读的书。除此之外，它很便宜，而且在 3 到 4 小时内阅读起来非常容易和愉快。

在[我的博客上](http://www.herrodius.com/blog/54)有一个小小的评论。

* * *

## 回答 #114

> 赞同：2
> 
> 时间：2008-09-16T21:22:05.663

Amiga ROM 内核手册 :)

* * *

## 回答 #115

> 赞同：2
> 
> 时间：2008-09-17T01:11:22.790

这可能不算是一本“开发书”，但无论如何我都必须把它扔进去：斯蒂芬·利维的黑客。我发现它谈到了编程的情感方面。

* * *

## 回答 #116

> 赞同：2
> 
> 时间：2008-09-17T09:22:32.687

由于很多人列出了 Head First Design Patterns，我同意这是一本非常好的书，我想看看是否有很多人知道名为[Design Patterns Explained: A New Perspective on Object-Oriented Design](https://rads.stackoverflow.com/amzn/click/com/0201715945)的标题。

这个标题很好地处理了设计模式。本书的前半部分非常容易理解，其余章节只需要牢牢掌握已经涵盖的内容我觉得本书后半部分不太容易理解的原因是它涵盖了我作为一个年轻的开发人员公认缺乏的模式经验中，用的不多。

这个标题还介绍了设计模式背后的概念，涵盖了 Christopher Alexander 在架构方面的最初工作，以及 GoF 首次在 SmallTalk 中实现文档模式。

我认为任何喜欢 Head First Design Patterns 但仍然觉得 GoF 非常枯燥的人，都应该将 Design Patterns Explained 作为一种更具可读性（尽管不是很全面）的替代方案。

* * *

## 回答 #117

> 赞同：2
> 
> 时间：2008-09-17T09:58:14.537

Craig Larman 的*应用 UML 和模式*。虽然《四人组》一书的《*设计模式》*很有启发性，但我发现直到我在编程课上看到拉曼的书后，我才“了解”如何使用设计模式。

* * *

## 回答 #118

> 赞同：2
> 
> 时间：2008-09-17T12:04:08.807

Ray Duncan 的高级 MS-DOS。

* * *

## 回答 #119

> 赞同：2
> 
> 时间：2009-06-07T01:45:29.207

[优化软件开发生命周期的可靠代码](https://rads.stackoverflow.com/amzn/click/com/0735625921)

尽管这本书只有 300 页并且支持 Microsoft 技术，但它仍然提供了一些很好的与语言无关的花絮。

* * *

## 回答 #120

> 赞同：2
> 
> 时间：2010-12-09T06:49:10.937

Steve Macguire[编写可靠的代码](http://c2.com/cgi/wiki?WritingSolidCode)

* * *

## 回答 #121

> 赞同：2
> 
> 时间：2009-12-03T17:49:07.007

Peter Van Der Linden 的“Expert C Programming - Deep C Secrets” 发生了什么——经典而有趣的读物。应该在几年前学习 C 后立即阅读，但在学习 C 3 年后才知道！一本推荐的书，它回答了关于指针的最常见的 SO 问题（我最喜欢的主题）。生活它，吃它，呼吸它！10/10！

* * *

## 回答 #122

> 赞同：2
> 
> 时间：2010-02-06T05:16:09.673

[每个程序员都应该知道的关于内存的知识](http://people.redhat.com/drepper/cpumemory.pdf)

作者：Ulrich Drepper - 解释了现代内存子系统的结构，并提出了如何有效利用它们的建议。

PS：对不起，如果我重复发布。

* * *

## 回答 #123

> 赞同：1
> 
> 时间：2008-09-21T02:14:44.217

[Roger Kaufman 博士](http://www.seas.gwu.edu/~kaufman1/)的“ [Fortran 着色书](http://www.seas.gwu.edu/~kaufman1/FortranColoringBook/ColoringBkCover.html)” （1978 年，ISBN：0262610264）

多么愚蠢的概念——甚至比“傻瓜”书还要基本！但它适用于任何语言（当然还有一些特定于 fortran 的示例），以一种非常容易理解和“非常有趣”的方式解释逻辑、变量、I/O 等的基本概念。

这足以让一个十岁的孩子对编程感兴趣......

![替代文字](../Images/ceae2dd4b49c66dc75c0def266d91057.png)

[（在Flickr 用户帐户](http://www.flickr.com/photos/believekevin/390132231/)上找到封面照片）

* * *

## 回答 #124

> 赞同：1
> 
> 时间：2008-10-18T15:39:15.290

好的，所以问题不是“什么是最好的编程书”，而是“如果你能告诉自己在职业生涯开始时要读什么”......

可能是“On Lisp”和 SICP 之一，再加上 CLRS 或 Udi Manber 的“算法：一种创造性方法”之一。

[Udi Manber 的算法简介 http://vig-fp.prenhall.com/bigcovers/0201120372.jpg](http://vig-fp.prenhall.com/bigcovers/0201120372.jpg)

前两个将教授大量的编程技术、模式，并真正打开一个人的思维，让他/她自己的创造力；其他两个是不同的。它们更具理论性，但也非常重要，专注于设计正确和高效的算法（并且需要更多的数学）。

当“好编程书籍”的主题出现时，我看到很多人推荐前三本书，但最后一本书（Manber）是一本很棒的书，很少有人知道。这是一个耻辱！Manber 专注于通过使用归纳的定理证明算法的增量开发。

* * *

## 回答 #125

> 赞同：1
> 
> 时间：2008-10-18T15:55:53.743

如果您用 C 编写代码，那么专家 C 编程会让您大开眼界。它可以回答您想知道为什么它会以这种方式工作的所有事情。Peter Van Der Linden 具有出色的写作风格，并使晦涩难懂的概念非常易读。所有 C 开发人员必读

* * *

## 回答 #126

> 赞同：1
> 
> 时间：2009-01-14T21:35:53.433

[Object Oriented Design Heuristics](https://rads.stackoverflow.com/amzn/click/com/020163385X)是一本很好的读物。我放不下。

* * *

## 回答 #127

> 赞同：1
> 
> 时间：2009-01-14T21:46:58.263

我将添加一些我在这里没有看到的对我有影响的夫妇：

*   Yourdon 和 Constantine，“结构化设计”。如果您愿意深入挖掘，您需要了解的有关软件设计的所有信息都在这里。
*   Leonard Koren，“侘寂：艺术家、设计师、诗人和哲学家”。一种平衡美与实用主义的务实哲学。

* * *

## 回答 #128

> 赞同：1
> 
> 时间：2008-10-02T22:46:35.120

爱德华·塔夫特（Edward Tufte）的任何东西：定量信息的视觉显示；构想信息；视觉解释

* * *

## 回答 #129

> 赞同：1
> 
> 时间：2008-09-06T16:06:14.947

[Pro Spring](http://www.apress.com/book/view/1590599217)是对控制反转和依赖注入世界的极好介绍。如果您不了解这些实践及其含义 - Pro Spring 中的主题和技术细节的平衡非常好。它建立了一个很好的案例和随之而来的个人基础。

我建议的另一本书是 Robert Martin 的[敏捷软件开发](https://rads.stackoverflow.com/amzn/click/com/0135974445)(ASD)。代码味道、敏捷技术、测试驱动开发、原则……许多不同编程方面的良好平衡。

更传统的经典作品包括臭名昭著的 GoF[设计模式](https://rads.stackoverflow.com/amzn/click/com/0201633612)、Bertrand Meyer 的[面向对象软件构建](https://rads.stackoverflow.com/amzn/click/com/0136291554)、Booch 的[面向对象分析和设计](https://rads.stackoverflow.com/amzn/click/com/020189551X)、[Scott Meyer](http://www.amazon.com/s/ref=nb_ss_b?url=search-alias%3Dstripbooks&field-keywords=scott+meyers&x=0&y=0)的“ [Effective C++](https://rads.stackoverflow.com/amzn/click/com/0321334876) ”系列以及我喜欢的 Gunderloy 的鲜为人知的书，[Coder to Developer](http://www.codertodeveloper.com/)。

虽然书籍很好......不要忘记[收音机](http://www.se-radio.net/)！

...让我再补充一件事。如果您还没有发现[safari](http://safari.oreilly.com/0735619670) - 看看。它比堆栈溢出更容易上瘾 :-) 我发现根据我的谷歌类型习惯——我需要更昂贵的订阅，这样我就可以随时看任何书——但我会向任何有兴趣的人推荐试用版.

（啊，是的，今天一点 obj-C，明天可可，模式？soa？那个食谱中的那个例子是什么？史蒂夫在[第二版](http://safari.oreilly.com/0735619670)中说了什么？我应该买这本书吗？......这样的订阅很棒如果你想对你正在搜索的内容有一些连续性和上下文......）

* * *

## 回答 #130

> 赞同：1
> 
> 时间：2008-09-21T12:09:30.543

推荐给 Windows 程序员，Windows[编程](https://rads.stackoverflow.com/amzn/click/com/157231995X)

* * *

## 回答 #131

> 赞同：1
> 
> 时间：2008-08-25T16:53:33.577

Deitel 和 Deitel，“C++：如何编程”

XUnit 测试模式

* * *

## 回答 #132

> 赞同：1
> 
> 时间：2009-05-26T23:33:05.673

[C++](https://rads.stackoverflow.com/amzn/click/com/0201510596)中的算法对我学习大 O 表示法和各种排序算法的来龙去脉非常宝贵。这是在塞奇威克决定通过将其分成 5 本书来赚更多钱之前出版的。

[C++ FAQs](https://rads.stackoverflow.com/amzn/click/com/0201309831)是一本了不起的书，它真正向您展示了在 C++ 中应该做什么和不应该做什么。C++ 的向后兼容性留下了很多地雷，本书帮助人们小心地避免它们，同时很好地介绍了 OO 设计和意图。

* * *

## 回答 #133

> 赞同：1
> 
> 时间：2008-09-16T15:55:16.853

Software Tools by Brian W. Kernighan and P. J. Plauger by a wide margin had the most effect on me.

* * *

## 回答 #134

> 赞同：1
> 
> 时间：2008-09-16T22:16:55.830

Stanley Lippman[的 C++ 对象模型内部](https://rads.stackoverflow.com/amzn/click/com/0201834545)

* * *

## 回答 #135

> 赞同：1
> 
> 时间：2008-09-16T14:19:42.747

我的是[通过示例进行测试驱动开发](https://rads.stackoverflow.com/amzn/click/com/0321146530)

* * *

## 回答 #136

> 赞同：1
> 
> 时间：2008-09-17T08:58:01.280

The first book that made a real impact on me was *[Mastering Turbo Assembler](https://rads.stackoverflow.com/amzn/click/com/0672305267)* by Tom Swan.

Other books that have had an impact was *[Just For Fun](https://rads.stackoverflow.com/amzn/click/com/0066620732)* by Linus Torvalds and David Diamond and of course *[The Pragmatic Programmer](https://rads.stackoverflow.com/amzn/click/com/020161622X)* by Andrew Hunt and David Thomas.

* * *

## 回答 #137

> 赞同：1
> 
> 时间：2008-10-30T04:23:11.447

Cress、Dirkson 和 Graham 与 Watfor 和 Watfiv 的 Fortran IV。

这本书教会了我我的第一门编程语言，当时我在打孔卡上编程。3 年后，这本书全都破烂了，因为我用得太多了。

[替代文字 http://g-ecx.images-amazon.com/images/G/01/ciu/4b/83/245d9833e7a03768eaf63110._AA240_.L.jpg](http://g-ecx.images-amazon.com/images/G/01/ciu/4b/83/245d9833e7a03768eaf63110._AA240_.L.jpg)

Fortran 是一门很棒的语言！它有一个超级优化器并生成非常快的代码。它在英国仍然很受欢迎，FTN95 现在是一个功能非常齐全且功能强大的编译器。有时我希望我能继续使用它，但 Delphi 是一个绰绰有余的替代品。

* * *

## 回答 #138

> 赞同：1
> 
> 时间：2010-02-08T16:53:22.687

[兔子先生的 ActiveX 指南](http://www.mrbunny.com/)

* * *

## 回答 #139

> 赞同：1
> 
> 时间：2009-01-05T17:14:58.387

*   [游戏架构和设计：学习游戏设计和编程的最佳实践](https://rads.stackoverflow.com/amzn/click/com/1576104257)

尽管我从未编写过游戏，但这本书以一种有趣的方式帮助我理解了很多事情。

* * *

## 回答 #140

> 赞同：1
> 
> 时间：2009-01-05T17:16:13.640

*   [专业 JSP 第 2 版](https://rads.stackoverflow.com/amzn/click/com/1861004958)

当我还是一个完全的新手时，我就提出了这个问题，并让我在短时间内从只知道 Java 的存在变成了一个可靠的团队成员

* * *

## 回答 #141

> 赞同：1
> 
> 时间：2008-09-16T16:15:44.653

Stan Lippman 的 C++ 对象模型内部。它让 C++ 终于为我“点击”了，在这一切都变得“神奇”之前。这本书让我在接触一种新的编程语言时有了不同的思路。

* * *

## 回答 #142

> 赞同：1
> 
> 时间：2008-09-16T13:54:14.557

Andrei Alexandrescu 的现代 C++ 设计

* * *

## 回答 #143

> 赞同：1
> 
> 时间：2008-09-16T13:59:43.480

Steve Maguire 编写 Solid Code。

* * *

## 回答 #144

> 赞同：1
> 
> 时间：2008-09-16T14:01:49.950

Grady Booch 的“应用程序的面向对象分析和设计”。我很久以前读过这篇文章，它向我展示了开发面向对象软件的方法。从那时起，许多其他书对我产生了影响，但这本书让我开始了。

* * *

## 回答 #145

> 赞同：1
> 
> 时间：2008-08-21T21:26:41.783

Kent Beck 的实现模式。

[替代文字 http://ecx.images-amazon.com/images/I/51JHn-6oNwL._SL500_AA240_.jpg](http://ecx.images-amazon.com/images/I/51JHn-6oNwL._SL500_AA240_.jpg)

您可以学习如何通过编程与人交流。

* * *

## 回答 #146

> 赞同：1
> 
> 时间：2008-09-17T07:45:40.563

近年来，它一直是“Nicolai M. Josuttis”的“C++ 标准库”。这是我的圣经。

[替代文字 http://ecx.images-amazon.com/images/I/51BT5SKXTCL._SL500_AA240_.jpg](http://ecx.images-amazon.com/images/I/51BT5SKXTCL._SL500_AA240_.jpg)

* * *

## 回答 #147

> 赞同：1
> 
> 时间：2010-02-23T16:18:32.087

![粉红衬衫书](../Images/6b6ae5ce450da507e9dd840a7654d9e2.png)

IBM PC 程序员指南。粉红衬衫书。

……嗯，**总得有人**说。

* * *

## 回答 #148

> 赞同：1
> 
> 时间：2008-09-16T18:55:39.900

唐纳德·诺曼，“日常事物的设计”

不是关于编程本身，而是关于世界上的事情应该如何*工作*——一种可用性心理学。

在设计最终用户界面和 API 时，它对我来说非常宝贵。

* * *

## 回答 #149

> 赞同：1
> 
> 时间：2008-09-20T19:17:47.217

尽管我已经从事专业编程多年，但 Rocky Lhotka 关于他的 CSLA 框架的“Business Objects”系列是让我大开眼界的书。

他的想法让我再次对软件开发模式和理论感到兴奋。它让我对学习如何成为更好的开发人员产生了新的兴趣，而不仅仅是学习最新的 gee-whiz 控件或库。（不要误会我的意思，我仍然喜欢一本好的技术书籍——你必须跟上！）

* * *

## 回答 #150

> 赞同：1
> 
> 时间：2008-09-20T19:30:42.800

我发现[《算法设计手册](https://rads.stackoverflow.com/amzn/click/com/1848000693)》是一本非常有益的读物。我也强烈推荐[Programming Pearls](https://rads.stackoverflow.com/amzn/click/com/0201657880)。

* * *

## 回答 #151

> 赞同：1
> 
> 时间：2008-09-16T15:46:22.150

**学习 C# 2005**，作者 Jesse Liberty 和 Brian MacDonald (O'Reilly)。

国际标准书号 10：0-596-10209-7。

当我第一次在 VS2005 中从 ASP 经典过程代码跳转到面向对象的 C# 代码时，这本书让我走上了正确的道路。

* * *

## 回答 #152

> 赞同：1
> 
> 时间：2008-09-16T16:27:22.613

Donald Knuth 的 Literate Programming，这是一本关于代码结构的好书。

* * *

## 回答 #153

> 赞同：1
> 
> 时间：2010-03-03T21:13:05.017

You.Next()：将您的软件开发事业推向领导轨道 ~ Michael C. Finley（作者）、Honza Fedák（作者） [链接文本](https://rads.stackoverflow.com/amzn/click/com/1439205590)

* * *

## 回答 #154

> 赞同：1
> 
> 时间：2008-09-16T17:42:11.573

福特的高效程序员

我还没有完全完成这个，但我已经对我所掌握的一些技巧/技巧感到兴奋，这些技巧/技巧可以变得更加……嗯……富有成效。

当然，有很多我们都知道的东西（使用键盘快捷键、DRY 等）。但是有很多新东西可以搭配。细心的读者将很快开始了解如何将事物组合起来以获得更大的效果。

* * *

## 回答 #155

> 赞同：1
> 
> 时间：2008-09-16T17:45:44.857

面向对象的分析和设计 - Grady Booch

* * *

## 回答 #156

> 赞同：1
> 
> 时间：2008-09-16T17:53:25.790

**"Thinking in C++"** by Bruce Eckel

* * *

## 回答 #157

> 赞同：1
> 
> 时间：2008-12-06T00:18:05.643

Charles Wetherell 的程序员练习曲，More Programming Pearls (Jon Bently)，

* * *

## 回答 #158

> 赞同：1
> 
> 时间：2008-09-04T01:10:24.090

[代码就是法律](http://www.code-is-law.org/)- 您正在使用 [您选择的语言] 进行所有这些写作、编辑和思考，但为什么？你的代码是什么意思？它实际上会做什么？

（我本可以推荐一本关于 QA 的书，但我没有……）

* * *

## 回答 #159

> 赞同：1
> 
> 时间：2008-09-17T04:44:29.970

Ken Schwaber 和 Mike Beedle[用 Scrum 进行敏捷软件开发。](https://rads.stackoverflow.com/amzn/click/com/0130676349)

我用这本书作为理解敏捷开发的起点。

* * *

## 回答 #160

> 赞同：1
> 
> 时间：2009-04-27T13:04:38.340

GW Basic 简介。没有它，我永远不会学习如何编程，任何其他书籍都不会对我有任何好处。

* * *

## 回答 #161

> 赞同：1
> 
> 时间：2008-12-18T18:34:48.500

**Scelbi 字节入门**

我多次仔细阅读本书中的源代码清单，直到有一天，我突然摸索到了 8080 汇编语言编程。

* * *

## 回答 #162

> 赞同：1
> 
> 时间：2009-10-22T11:00:33.337

似乎大多数人已经接触过一些非常好的书籍。真正帮助我的是[有效的 C#：改进 C# 的 50 种方法](https://rads.stackoverflow.com/amzn/click/com/0321245660)。如果我不提到[维尼之道，](https://rads.stackoverflow.com/amzn/click/com/014095144X)我会失职。哲学书籍对灵魂有益，对代码有益。

* * *

## 回答 #163

> 赞同：1
> 
> 时间：2008-09-16T01:12:00.677

这里有两个我没见过的：
我希望我早点读到 Koenig 和 Moo 的“ [Ruminations on C++](https://rads.stackoverflow.com/amzn/click/com/0201423391) ”。那是一本让 OO 概念真正吸引我的书。
我向任何计划在 90 年代中期开始编程生涯的人推荐 Michael Abrash 的“代码优化之禅”。

* * *

## 回答 #164

> 赞同：1
> 
> 时间：2008-09-17T00:52:31.603

[如何像计算机科学家一样思考：用 python 学习](http://openbookproject.net/thinkCSpy/index.xhtml)

可能不是世界上最先进的书，但它让我理解了我无法理解的编程概念，尤其是面向对象的主题。

* * *

## 回答 #165

> 赞同：1
> 
> 时间：2008-09-17T05:49:22.310

务实的程序员非常好。然而，当我刚开始时，真正产生影响的是：

[Windows 95 系统编程秘诀”](https://rads.stackoverflow.com/amzn/click/com/1568843186)

我知道——它在外面听起来和看起来有点俗气，可能已经过时了——但这是基于作者 (Matt Pietrek) 使用他自己的工具进行的调查对 Win95 内部的一个很棒的解释——代码随书而来。请记住，这是在整个开源之前，微软仍然非常谨慎地发布内部文档——更不用说源代码了。那里有一些引用，比如“如果你正在解决一些问题并遇到了一些症结，那么你需要停下来，真正深入研究那篇文章，真正理解它是如何工作的”。我发现这是一个很好的建议——尤其是现在你经常有图书馆的源代码并且可以去看看。它也启发了我享受深入了解系统工作原理的过程，

哦，我还要介绍有效的 .net - Don Box 对 .Net 的内部解释。

* * *

## 回答 #166

> 赞同：1
> 
> 时间：2008-09-17T19:37:30.773

如果你在 Unix/Linux/MacOS 等中做任何事情，你必须阅读已故的 W Richard Stevens 所著的 Unix 环境中的高级编程（也称为首字母缩写词 APUE）。如果你不知道文件描述符是如何工作的，什么会话是，或者当你自己守护进程时你应该做的所有事情（承认，你不知道），那么这本书会告诉你。

之后你会感到有点业余，但如果你想在 Unix 环境中认为自己是一名专业的程序员（任何语言），你需要阅读这篇文章。

* * *

## 回答 #167

> 赞同：1
> 
> 时间：2009-12-16T09:00:39.600

这是一个非常丰富和有用的汇编，但是，我有点惊讶我在作者中没有遇到 Andrew S. Tanenbaum。IMO，他是最好的 CS 教授之一，他的天才主要与他非凡的能力有关，他可以让 CS 本科生获得相当困难的材料。[他的书](http://books.google.com/books?as_auth=Andrew+S+Tanenbaum&source=an&ei=ZqAoS_vZDJGG4QbQ1aGsDQ&sa=X&oi=book_group&ct=title&cad=author-navigational&resnum=12&ved=0CDIQsAMwCw)（现代操作系统或计算机网络可能会敲响警钟）非常出色，为我在攻读学士学位的同时打下了坚实的 CS 基础，我强烈推荐它们。Tanenbaum 上的其他一些有趣的东西，证明了他的技能超越了教学：一个名为 MINIX 的操作系统的作者——Linus 在实现 Linux 时从它那里获得了很多灵感；Amoeba - 分布式操作系统；Turtle - 免费的匿名 p2p 网络。

* * *

## 回答 #168

> 赞同：1
> 
> 时间：2009-01-13T17:50:48.940

仍然值得一提的经典是[界面耻辱堂](http://homepage.mac.com/bradster/iarchitect/shame.htm)。该网站详细介绍了非常有趣的大量界面设计失礼。原来的 iarchitect.com 已经不存在了，但是其他人已经在自己的网站上重新建立了居屋。

* * *

## 回答 #169

> 赞同：1
> 
> 时间：2008-11-14T15:12:41.837

[Windows 中的图形编程](http://allwrong.wordpress.com/2008/11/14/mini-book-review-graphics-programming-in-windows-charles-petzold/)很难出错。

* * *

## 回答 #170

> 赞同：1
> 
> 时间：2009-02-18T18:32:58.133

[如何解决它：数学方法的一个新方面](https://rads.stackoverflow.com/amzn/click/com/069111966X) 虽然与计算机编程没有直接关系，但它确实教会了你解决问题的艺术，这就是计算机编程的全部内容。

* * *

## 回答 #171

> 赞同：1
> 
> 时间：2009-11-06T21:42:33.303

我还没有在这里看到的是**[xUnit 测试模式：](http://www.assoc-amazon.com/e/ir?t=wtfnext-20&l=as2&o=1&a=0131495054)** Gerard Meszaros 的重构测试代码。这本书真的帮助我从一个全新的角度看待单元测试。

* * *

## 回答 #172

> 赞同：1
> 
> 时间：2010-05-06T07:59:34.757

[特立独行！：世界上最不寻常的工作场所背后的成功故事](http://www.amazon.co.uk/Maverick-Success-Behind-Unusual-Workplace/dp/0712678867/ref=sr_1_2?ie=UTF8&s=books&qid=1273132693&sr=8-2)

[替代文字 http://ecx.images-amazon.com/images/I/410TX7YN94L._SL500_AA300_.jpg](http://ecx.images-amazon.com/images/I/410TX7YN94L._SL500_AA300_.jpg)

**会让你意识到工作场所应该是什么样子。**

* * *

## 回答 #173

> 赞同：1
> 
> 时间：2009-11-23T18:08:25.310

任何导师/团队负责人/经理或向上述人员报告的任何人的必备读物。

[替代文字 http://ecx.images-amazon.com/images/I/316N6QYW32L._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA240_SH20_OU01_.jpg](http://ecx.images-amazon.com/images/I/316N6QYW32L._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA240_SH20_OU01_.jpg)

* * *

## 回答 #174

> 赞同：1
> 
> 时间：2010-02-04T18:36:10.137

**游戏设计的艺术 -** Jesse Schell的镜头之书

> Jesse Schell 自 2002 年以来一直在卡内基梅隆大学的娱乐技术中心教授游戏设计并领导研究项目。

纳夫说。

[游戏设计的艺术——镜头之书 http://i50.tinypic.com/iekw0l.jpg](http://i50.tinypic.com/iekw0l.jpg)

PS：对不起，如果我重复发布，我在答案中找不到这本书 - 可能是因为标题不准确或没有图片。让我知道，如果是，我会删除它。

* * *

## 回答 #175

> 赞同：1
> 
> 时间：2009-11-08T08:48:02.670

我迟到了这个问题，但显然仍然有一些独特的东西可以提供...... [Barry Boehm](http://en.wikipedia.org/wiki/Barry_Boehm)的*软件工程经济学*总而言之，它说如果你想真正提高软件生产力，那就找更好的人，因为更好的工具、硬件、语言，方法等都会产生边际影响。只有更好的人才能显着提高生产力。我强调，这是**更好**的工程师，而不是更多的工程师！

 **不是那种你会带上床睡觉的书，就像你*在工作*中可能会做的那样，而是那种让我们明白我们行业一直在努力铭记的教训的书。见证离岸外包，Boehm 的模型预测的虚假经济只会产生边际积极影响，如果有的话。一探究竟。

* * *

## 回答 #176

> 赞同：1
> 
> 时间：2009-12-14T15:59:25.543

这是每位程序员必读的书：Abraham Silberschatz 的数据库系统概念。

[替代文字 http://images.barnesandnoble.com/images/14870000/14878097.JPG](http://images.barnesandnoble.com/images/14870000/14878097.JPG)

* * *

## 回答 #177

> 赞同：0
> 
> 时间：2008-09-16T18:22:48.403

多年前，Bruce Eckel 的 Thinking in C++ 教会了我很多关于 C++ 的知识，但也教会了我将问题隔离到一个小型“沙箱”中进行研究/分析的重要性。这项技术极大地影响了我的职业生涯，并经常帮助我为自己和他人解决问题。

这些天，我指的是 Java 中的 Thinking，它是用相同的风格编写的。不知何故，这种风格不仅仅是简单的“示例”，而是深入探讨了问题的核心。

我很感激我会买 Eckel 的几乎任何东西，看不见。

* * *

## 回答 #178

> 赞同：0
> 
> 时间：2008-08-21T20:10:10.797

[重构](https://rads.stackoverflow.com/amzn/click/com/0201485672)

[企业应用架构模式](https://rads.stackoverflow.com/amzn/click/com/0321127420)

* * *

## 回答 #179

> 赞同：0
> 
> 时间：2008-08-21T20:54:54.400

[代码工艺](https://rads.stackoverflow.com/amzn/click/com/1593271190)

* * *

## 回答 #180

> 赞同：0
> 
> 时间：2008-09-17T14:34:25.323

应用 UML 和设计模式。

它帮助设计模式与我一起点击，并为 UML 提供了一个理由，这在“UML as Sketch”的措辞中对我来说是有意义的。也就是说，UML 应该用作系统的简要草图，它的额外好处是您不必向其他人解释符号（他们要么已经知道 UML，要么你给他们一本 UML 书阅读）

* * *

## 回答 #181

> 赞同：0
> 
> 时间：2008-09-16T17:00:48.600

它是一个系列，令人惊叹。Edsger Dijkstra（在 CAR Hoare 的帮助下）的小黑书[Structured Programming](http://portal.acm.org/citation.cfm?id=1243380&jmp=cit&coll=portal&dl=GUIDE&CFID=://www.acm.org/publications/&CFTOKEN=www.acm.org/publications/#CIT)，尤其是题为“On Our Inability To Do Much”的文章。

* * *

## 回答 #182

> 赞同：0
> 
> 时间：2008-09-16T19:20:14.180

Tenenbaum 的第一本操作系统书籍。我第一次看内核级编程。

* * *

## 回答 #183

> 赞同：0
> 
> 时间：2008-09-17T14:03:03.107

Michael Abrash 汇编语言之禅

* * *

## 回答 #184

> 赞同：0
> 
> 时间：2008-09-16T14:14:55.083

用 Java 思考（模式），Bruce Eckel

* * *

## 回答 #185

> 赞同：0
> 
> 时间：2008-09-16T14:16:27.013

专业 Excel 开发 这本书展示了如何在最普遍的编程平台之一中制作高质量的应用程序。

* * *

## 回答 #186

> 赞同：0
> 
> 时间：2008-08-21T21:10:00.310

我有几篇关于这个主题的（相当老的）博客文章

*   [http://www.spindriftpages.net/blog/dave/2005/11/17/c-books/](http://www.spindriftpages.net/blog/dave/2005/11/17/c-books/)
*   [http://www.spindriftpages.net/blog/dave/2005/06/06/good-oo-books/](http://www.spindriftpages.net/blog/dave/2005/06/06/good-oo-books/)
*   [http://www.spindriftpages.net/blog/dave/2005/05/11/really-great-it-books/](http://www.spindriftpages.net/blog/dave/2005/05/11/really-great-it-books/)
*   虽然是一本好书，但我发现 Code Complete 读起来相当枯燥（我承认这是一个有争议的观点）。
*   我喜欢 Jeffery Richter 和 Joel Spolksy 写的书
*   Eric Meyer CSS 书籍也非常好

* * *

## 回答 #187

> 赞同：0
> 
> 时间：2008-09-16T14:41:23.053

PHP 对象、模式和实践。 [http://www.apress.com/book/view/9781590599099](http://www.apress.com/book/view/9781590599099)

* * *

## 回答 #188

> 赞同：0
> 
> 时间：2008-09-16T20:07:28.450

我一直最喜欢的是 Matthew Telles 的 C# Back Book。

* * *

## 回答 #189

> 赞同：0
> 
> 时间：2008-09-16T20:10:22.047

[Dreaming in Code](http://www.amazon.ca/Dreaming-Code-Programmers-Transcendent-Software/dp/1400082471/ref=pd_bbs_3?ie=UTF8&s=books&qid=1221595779&sr=8-3)可能在过去 6 个月中产生了最深远的影响。

* * *

## 回答 #190

> 赞同：0
> 
> 时间：2008-09-16T20:21:42.207

Bjarne Stroustrup 的“C++ 编程语言”

* * *

## 回答 #191

> 赞同：0
> 
> 时间：2008-08-27T00:46:53.367

除了其他人的建议，我建议要么获取一份 SICP，要么[在线阅读](http://mitpress.mit.edu/sicp/full-text/book/book.html)。这是我读过的少数几本书之一，我觉得*大大*提高了我设计软件的技能，特别是在创建良好的抽象层方面。

与编程没有*直接*关系但对程序员（IMO）来说也是一本好书的书是《[具体数学](https://rads.stackoverflow.com/amzn/click/com/0201558025)》 。它中的大多数（如果不是全部）主题对程序员来说都是有用的，而且它在解释事物方面比我迄今为止读过的任何其他数学书都做得更好。

* * *

## 回答 #192

> 赞同：0
> 
> 时间：2008-08-27T00:59:15.177

Alistair Cockburn 的[敏捷软件开发](https://rads.stackoverflow.com/amzn/click/com/0201699699)

* * *

## 回答 #193

> 赞同：0
> 
> 时间：2008-09-16T14:02:17.190

Ian Craig[对面向对象编程语言](http://www.amazon.co.uk/Interpretation-Object-oriented-Programming-Languages/dp/1852335475/ref=sr_1_1?ie=UTF8&s=books&qid=1221573489&sr=8-1)的解释

因为它向我展示了 OO 比标准的 C++/Java 习语要多得多

* * *

## 回答 #194

> 赞同：0
> 
> 时间：2008-09-16T14:46:03.590

[“如何成为一名程序员：简短、全面和个人的总结”](http://samizdat.mines.edu/howto/HowToBeAProgrammer.html)，作者： *Robert L Read*

不完全是一本书，而是一篇文章，但是当我开始编码时，这本书绝对是我的灵感。喜欢进入部落的想法。值得一读。

* * *

## 回答 #195

> 赞同：0
> 
> 时间：2008-09-16T18:41:53.943

当我第一次开始时，有 Tom Swan 的“Mastering Turbo Pascal”。这本书没有什么特别深刻的地方。使用示例清晰简洁。基于这些知识，我开始了 15 年以上的软件开发生涯。

* * *

## 回答 #196

> 赞同：0
> 
> 时间：2008-09-16T18:42:22.227

C++ 黑皮书。一路亲吻

* * *

## 回答 #197

> 赞同：0
> 
> 时间：2008-09-16T19:41:58.137

Sedgewick 的“C 语言算法”（第 1 版）教会了我所有关于算法的知识，也教会了我所有关于文档和复制/粘贴代码的陷阱，因为此版本中的所有示例代码均取自“Pascal 算法”版本并且只是通过一个简单的代码翻译器传递，该翻译器没有针对不同的索引方案进行调整。

* * *

## 回答 #198

> 赞同：0
> 
> 时间：2008-08-21T21:26:53.810

[聪明人的 SQL](https://rads.stackoverflow.com/amzn/click/com/1558605762)

* * *

## 回答 #199

> 赞同：0
> 
> 时间：2008-09-16T19:04:12.313

从 Tom Swan 掌握 C++。这是最好的书，它的例子很简单，可以教授概念，但又足以解决其他问题。可读性很强，是我上大学时读的第一本书，只需要读一次。

* * *

## 回答 #200

> 赞同：0
> 
> 时间：2008-09-16T17:51:30.070

The C++ Series of programming books by Deitel and Deitel

* * *

## 回答 #201

> 赞同：0
> 
> 时间：2008-09-16T18:07:36.647

[管理千兆字节](https://rads.stackoverflow.com/amzn/click/com/1558605703)是思考繁重信息的即时经典。

* * *

## 回答 #202

> 赞同：0
> 
> 时间：2008-09-16T18:08:12.497

面向经验丰富的程序员的 C#

或者真正来自迪特尔和迪特尔的任何东西。我读过他们的几本书，一切都很棒。

* * *

## 回答 #203

> 赞同：0
> 
> 时间：2008-09-12T01:06:12.563

不是一本编程书，但仍然是每个程序员都应该阅读的非常重要的书：

[Gordon MacKenzie 环绕巨型毛球](https://rads.stackoverflow.com/amzn/click/com/0670879835)

* * *

## 回答 #204

> 赞同：0
> 
> 时间：2008-12-22T14:15:31.433

[Turbo C++ 中的面向对象编程](https://rads.stackoverflow.com/amzn/click/com/1878739069)。不是很受欢迎，但它是让我开始的一本书，也是第一本真正帮助我理解对象是什么的书。在高中读过这篇文章。它有点让我热泪盈眶……

* * *

## 回答 #205

> 赞同：0
> 
> 时间：2008-09-16T21:17:05.443

实际上，有两本书很突出。第一个是代码完成。尽管年代久远，这仍然是一本非常有用的书，而且关于过早优化的危险的章节本身就值这本书的价格。

第二个是 The Psychology of Everyday Things（我认为现在称为 The Design of Everyday Things），它改变了我在设计应用程序时对用户界面的看法。它让我更加关注用户。

* * *

## 回答 #206

> 赞同：0
> 
> 时间：2008-09-17T01:53:01.957

[“编写可靠的代码：Microsoft 开发无错误 C 程序的技术（Microsoft 编程系列）”](https://rads.stackoverflow.com/amzn/click/com/1556155514)，作者：Steve MacGuire。

有趣的是，这里提到的书籍中有很大一部分是 C/C++ 书籍。

* * *

## 回答 #207

> 赞同：0
> 
> 时间：2008-09-17T01:59:41.830

对我来说，“内存作为 C 和 C++ 中的编程概念”确实让我看到了内存管理的真正工作原理。如果您是 C 或 C++ 开发人员，我认为这是必读的。你会顽固地学习一些东西，或者记住你可能在此过程中忘记的东西。

[http://www.amazon.com/Memory-Programming-Concept-C/dp/0521520436](https://rads.stackoverflow.com/amzn/click/com/0521520436)

* * *

## 回答 #208

> 赞同：0
> 
> 时间：2008-09-17T05:56:45.070

SAP ABAP 编程？《21天自学ABAP》是最好的书！

它不包含任何巧妙的技巧或魔法，但 3 年后，我从未遇到过更全面的书

* * *

## 回答 #209

> 赞同：0
> 
> 时间：2008-09-17T06:21:04.997

Schaum 的 C++ 编程大纲，作者 John R Hubbard。

这是我开始接触 C++ 时阅读的第一本编程书籍。这是一个看到我对编程感兴趣的人送给我的礼物。这本书非常适合初学者——它从基本概念开始，到模板和向量。给出的例子非常相关。这本书让你思考和提出更多的问题，并为自己尝试一些事情。

* * *

## 回答 #210

> 赞同：0
> 
> 时间：2008-09-17T09:31:28.830

[如何通过计算机解决它 http://g-ecx.images-amazon.com/images/G/01/ciu/31/89/d4ac024128a044c186a18010._AA207_.L.jpg](http://g-ecx.images-amazon.com/images/G/01/ciu/31/89/d4ac024128a044c186a18010._AA207_.L.jpg) - RGDromey

* * *

## 回答 #211

> 赞同：0
> 
> 时间：2008-09-17T12:14:42.820

可能是 1997 年左右的“C for Dummies”第 1 卷。真的只是一个介绍，但在雅达利 ST 上的 GFA Basic 编程品味之后，这是一本很好的读物。大约在同一时间的 Coronado C 教程也有帮助。

* * *

## 回答 #212

> 赞同：0
> 
> 时间：2008-09-17T18:40:02.880

Robert Sedgewick 的算法书。应用程序开发人员必读。

有多种风格（C、C++、Java）

[http://www.cs.princeton.edu/~rs/](http://www.cs.princeton.edu/~rs/)

* * *

## 回答 #213

> 赞同：0
> 
> 时间：2009-03-11T04:06:22.753

[开始 C# 3.0：面向对象编程简介](https://rads.stackoverflow.com/amzn/click/com/0470261293)

这本书适合那些想要了解使用 C# 3.0 进行 OOP 的原因和方法的人。你不想错过它。

* * *

## 回答 #214

> 赞同：0
> 
> 时间：2009-04-27T13:14:31.547

[开始 Visual C++](http://search.barnesandnoble.com/Ivor-Hortons-Beginning-Visual-C-2008/Ivor-Horton/e/9780470225905/?itm=2)

当我第一次开始使用 OOP 语言进行编程时，我发现这本书不仅是一本关于 C++ 和 MFC 的综合性书籍，它还是我所见过的对面向对象概念的最佳解释之一。

当我与刚开始使用面向对象语言编程的开发人员交谈时，我告诉他们阅读这本书。******

# python - 有任何使用协议缓冲区的经验吗？

> ID：1734
> 
> 赞同：35
> 
> 时间：2008-08-05T00:12:55.290
> 
> 标签：python, xml, database, protocol-buffers

我只是在查看有关 Google[协议缓冲区](http://code.google.com/apis/protocolbuffers/)数据交换格式的一些信息。有没有人玩过代码，甚至围绕它创建了一个项目？

我目前在 Python 项目中使用 XML 来处理在文本编辑器中手动创建的结构化内容，我想知道关于 Protocol Buffers 作为面向用户的输入格式的一般意见是什么。速度和简洁的好处似乎确实存在，但在实际生成和处理数据时有很多因素。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-08-05T01:14:30.423

如果您正在寻找面向用户的交互，请坚持使用 xml。目前得到了更多的支持、理解和普遍接受。如果它是内部的，我会说协议缓冲区是个好主意。

也许在几年后，随着更多工具支持协议缓冲区的出现，然后开始寻找面向公众的 api。在那之前... [JSON](http://en.wikipedia.org/wiki/JSON)？

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-08-08T17:12:24.290

协议缓冲区旨在优化机器之间的通信。它们真的不适合人类互动。此外，格式是二进制的，因此在该用例中它不能替换 XML。

我还推荐[JSON](http://en.wikipedia.org/wiki/JSON)作为最紧凑的基于文本的格式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-23T19:06:08.810

从您的简短描述中，听起来协议缓冲区不合适。短语“在文本编辑器中手工创建的结构化内容”非常适合 XML。

但是，如果您希望与未在组织外部共享的数据结构进行高效、低延迟的通信，那么协议缓冲区等二进制序列化可以提供巨大的优势。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-09-13T19:15:23.647

像 PB 这样的二进制格式的另一个缺点是，如果有一点错误，整个数据文件是不可解析的，但是使用 JSON 或 XML，作为最后的手段，您仍然可以手动修复错误，因为它是人类可读的并且具有冗余内置..

# php - 在 PHP 中使用 preg_replace 时如何获得匹配项？

> ID：1746
> 
> 赞同：58
> 
> 时间：2008-08-05T00:35:17.493
> 
> 标签：php, regex, html-parsing, preg-replace

我试图抓住几个单词的大写字母并将它们包装在跨度标签中。我将[preg_replace](http://php.net/manual/en/function.preg-replace.php)用于提取和包装目的，但它没有输出任何内容。

```
preg_replace("/[A-Z]/", "<span class=\"initial\">$1</span>", $str) 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2008-08-05T00:36:08.350

您需要将模式放在括号中`/([A-Z])/`，如下所示：

```
preg_replace("/([A-Z])/", "<span class=\"initial\">$1</span>", $str) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2008-08-28T09:02:43.480

`\0`还将匹配整个匹配的表达式，而无需使用括号进行显式捕获。

```
preg_replace("/[A-Z]/", "<span class=\"initial\">\\0</span>", $str) 
```

与往常一样，您可以转到[php.net/preg_replace](http://php.net/preg_replace)或 php.net/<whatever search term> 快速搜索文档。引用文档：

> \0 或 $0 指的是整个模式匹配的文本。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-08-05T01:39:36.460

来自php.net 上的[preg_replace 文档：](http://us.php.net/manual/en/function.preg-replace.php)

> *替换* 可能包含 \n 或（自 PHP 4.0.4 起）$n 形式的引用，后一种形式是首选。每个这样的引用都将被第 n 个带括号的模式捕获的文本替换。

请参阅 Flubba 的示例。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-06-23T17:54:51.450

在您想要的捕获周围使用括号。

# c# - .NET 单元测试包

> ID：1760
> 
> 赞同：63
> 
> 时间：2008-08-05T00:51:49.177
> 
> 标签：c#, .net, unit-testing, testing

在几年没有全职使用它之后，我又回到了更多的 .NET 中，我想知道这些天好的单元测试包是什么。

我对 NUnit 很熟悉（几年前），并且曾短暂地玩过[IronRuby ，目标是让](https://en.wikipedia.org/wiki/IronRuby)[RSpec](https://en.wikipedia.org/wiki/RSpec)之类的东西继续运行，但除此之外我知道的不多。

我意识到我可以为此在谷歌上搜索并收工，但我相信在这里提出问题可能会得到更好、更明智的回应 :-)

建议？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2008-08-05T02:15:24.873

有这么多，太疯狂了。疯狂的好，我猜。

*   对于保守的类型（我），[**NUnit**](http://www.nunit.org/)仍然可用，而且功能仍然强大。
*   对于 Microsoft 类型，[**MSTest**](http://msdn.microsoft.com/en-us/vstudio/default.aspx)就足够了，但与 NUnit 相比，它又慢又笨重。它还缺乏代码覆盖率，而无需为昂贵的 Visual Studio 版本支付大笔费用。
*   还有[**MbUnit**](http://www.mbunit.com/About.aspx)。它类似于 NUnit，但它具有诸如 RowTest（使用不同参数运行相同的测试）和 Rollback（将数据库放回原处，就像您在测试后找到它一样）这样的漂亮特性。
*   最后，[**xUnit.net**](http://www.codeplex.com/xunit)是带有某种态度的时尚选择。
*   哦，[**TestDriven.NET**](http://testdriven.net/)将为您提供 NUnit 和 MbUnit 的 IDE 集成。

我相信他们都很好。不过，我会避开 MSTest，除非您只是享受将所有东西都放在一个开箱即用的 IDE 中的便利。

[Scott Hanselman](http://www.hanselminutes.com/default.aspx?showID=130)有一个关于这个主题的播客。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-08-06T16:07:06.083

我们在这里使用 NUnit 和[MbUnit](http://mbunit.com)。我们使用[TestDriven.NET](http://testdriven.net)从 Visual Studio 中运行单元测试。我们使用优秀的、强烈推荐的[RhinoMocks](http://www.ayende.com/projects/rhino-mocks/downloads.aspx)作为模拟框架。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-08-14T15:09:17.867

坚持使用 NUnit。不要去 MSTest 附近的任何地方。

使用 NUnit + ReSharper 绝对是一种乐趣。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-08-05T20:53:00.903

xUnit.net 看起来为 NUnit、MbUnit 和[MSTest](https://en.wikipedia.org/wiki/Visual_Studio_Unit_Testing_Framework)提供了一种稍微不同的方法，这很有趣。

在我寻找类似 RSpec 的解决方案时（因为我*喜欢*RSpec），我也遇到了[NSpec](http://nspec.tigris.org/)，它看起来有点罗嗦，但结合[NSpec Extensions](http://code.google.com/p/nspec-extensions/)插件使用 C# 3 扩展方法，它看起来很不错。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-08-28T03:52:44.877

我曾经使用 NUnit，但现在倾向于使用 MbUnit，因为有两个关键特性： 1\. RowTest 特性允许您轻松地对不同的参数集运行相同的测试，如果您真的想要全面覆盖，这一点很重要。2\. 回滚功能允许您对数据库运行测试，同时在每次测试后回滚更改，使您的数据库每次都保持完全相同的状态。它就像添加 [Rollback] 属性一样简单。

MbUnit 的另一个不错的方面是它的语法几乎与 NUnit 相同，因此如果您在 NUnit 下已经有一个完整的测试平台，您可以直接切换引用而无需更改任何（非常？）代码。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-10-15T14:33:01.073

我使用以下内容：

[TestDriven.NET](http://www.testdriven.net) - Visual Studio 的单元测试插件

[Typemock Isolator](http://www.typemock.com) - .NET 单元测试的模拟框架

[NUnit](http://www.nunit.org) - C# 中的开源单元测试框架。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-07-19T20:34:25.343

您可能会发现有趣的是，Gallio v3.1 现在通过[IronRuby支持](https://en.wikipedia.org/wiki/IronRuby)[RSpec](https://en.wikipedia.org/wiki/RSpec)。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-08-05T02:07:50.257

我喜欢[TestDriven.NET](http://www.testdriven.net/overview.aspx)（即使我使用 ReSharper），而且我对[XUnit.net](http://www.codeplex.com/xunit)非常满意。它使用事实而不是许多人不喜欢的测试，但我喜欢术语上的差异。考虑一组关于您的软件的可自动证明的事实并查看您在进行更改时违反了哪些事实是很有用的。

请注意，[Visual Studio 2008 Professional（及更高版本）现在带有集成的单元测试](http://blogs.msdn.com/buckh/archive/2007/03/27/orcas-unit-testing-to-be-available-in-visual-studio-professional.aspx)（它过去仅适用于 Team System 版本）并且可能适合您的需求。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-08-06T21:03:00.167

我曾经使用过 NUnit，但我改用了[MbUnit](https://en.wikipedia.org/wiki/List_of_unit_testing_frameworks#.NET_programming_languages)，因为它有更多的功能。

我喜欢行测试。它可以让你参数化你的测试。NUnit 确实有更好的工具支持。我正在使用 ReSharper 运行 MbUnit 测试。我在为 MbUnit 运行我的 SetUp 方法时遇到了 TestDriven.NET 的问题。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-08-14T15:04:08.673

NUnit、MSTest 等都做几乎相同的事情。但是，我发现 NMock 不可或缺。

NMock 或任何模拟包都不是单元测试，但它使单元测试变得更加容易，它可能也是。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-08-05T00:57:48.773

我喜欢[MbUnit](http://www.mbunit.com/)，呃，[Gallio](http://www.gallio.org/)。对我来说最重要的是在 Visual Studio 中有良好的工具支持。为此，我使用了[Resharper](http://www.jetbrains.com/resharper/index.html)，它有一个[MbUnit 测试运行器](http://code.google.com/p/mbunit-resharper/)。很多人似乎也喜欢[TestDriven.NET](http://www.testdriven.net/overview.aspx)作为他们的测试运行器。

# php - 为什么我的三元表达式不起作用？

> ID：1762
> 
> 赞同：26
> 
> 时间：2008-08-05T00:56:43.813
> 
> 标签：php, ternary-operator

我正在尝试设置一个标志来显示或隐藏页面元素，但即使表达式为假，它也始终显示。

```
$canMerge = ($condition1 && $condition2) ? 'true' : 'false';
...
<?php if ($canMerge) { ?>Stuff<?php } ?> 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2008-08-05T01:03:12.553

这被破坏了，因为作为字符串的“假”将作为布尔值计算为真。

然而，这是一个不需要的三元表达式，因为结果值是简单的真假。这将是等效的：

```
$canMerge = ($condition1 && $condition2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-05T00:57:30.863

“假”的值为真。您需要删除引号：

```
$canMerge = ($condition1 && $condition2) ? true : false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T03:15:59.343

在我看来，这是一个合理的问题，尤其是因为 PHP 工作方式的差异。

例如，以下代码将输出 'its false'

```
$a = '0';

if($a)
{
    echo 'its true';
}
else
{
    echo 'its false';
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-16T18:50:55.643

```
$canMerge = ($condition1 && $condition2); 
```

然后

```
if ($canMerge){
    echo "Stuff";
} 
```

# svn - 联合（同步）Subversion 服务器？

> ID：1790
> 
> 赞同：20
> 
> 时间：2008-08-05T01:27:34.610
> 
> 标签：svn, version-control

是否可以创建“联合”Subversion 服务器？就像位置 A 的一台服务器和位置 B 的另一台服务器一样，它们会自动同步其本地版本的存储库。这样，当任一位置的某人与存储库交互时，他们正在访问各自的本地服务器，因此响应时间更快。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-09T13:42:41.783

Subversion 1.5 在 1.4 中添加的现有 SvnSync 支持上引入了通过代理对 webdav 服务器的支持。这允许您拥有用于检索文件和历史记录的本地镜像，但提交直接提交到主存储库。如果设置正确，本地镜像会立即收到更改。

有关详细信息，请参阅[Svn 书。](http://svnbook.red-bean.com)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-05T08:22:05.943

这或多或少是[SVK](http://svk.bestpractical.com/view/HomePage)的完美用例。SVK 是一个用于颠覆的命令行前端，它与存储库的整个本地副本一起工作。因此，您的提交、更新等在本地存储库上工作，然后您可以与主存储库同步。无论如何，我通常会推荐 SVK 而不是普通的颠覆，因为它使很多事情变得更好。没有 .svn 文件夹，更好的分支和合并，更好的冲突解决。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-05T01:32:34.990

听起来你可能喜欢[Git](http://git.or.cz/)。有一个 Google Talk[解释了这一切](http://www.youtube.com/watch?v=4XpnKHJAok8)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-05T01:44:13.033

它可能不完全符合您的要求，但您可能能够实现操作系统级别的集群。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-27T19:44:48.817

有多种方法可以在不使用外部工具的情况下实现 SVN 存储库的复制`SVK`（今天似乎已被放弃）。Subversion 存储库和服务器的复制有助于解决分布式工作流的挑战，并为地理位置分散的团队带来性能改进。

Subversion 支持基于钩子脚本和工具[的直写代理。](http://svnbook.red-bean.com/nightly/en/svn.serverconfig.httpd.html#svn.serverconfig.httpd.extra.writethruproxy)`svnsync`如果你使用 VisualSVN 服务器，你可以使用[VisualSVN 分布式文件系统 (VDFS)](https://www.visualsvn.com/server/features/multisite-replication/)，它比`svnsync`. 例如，VDFS 比锁定要快得多`svnsync`并且完全支持锁定。

[![在此处输入图像描述](../Images/4625e62e687b5f11951b08948c7d21f5.png)](https://i.stack.imgur.com/4XOgs.png)

# python - 如何制作不需要用户按 [enter] 进行选择的菜单？

> ID：1829
> 
> 赞同：27
> 
> 时间：2008-08-05T02:39:23.140
> 
> 标签：python

我有一个 Python 菜单。那部分很容易。我`raw_input()`用来从用户那里获得选择。

问题是`raw_input`（和输入）要求用户`Enter`在做出选择后按下。有没有办法让程序在击键时立即行动？这是我到目前为止所得到的：

```
import sys
print """Menu
1) Say Foo
2) Say Bar"""
answer = raw_input("Make a selection> ")

if "1" in answer: print "foo"
elif "2" in answer: print "bar" 
```

有类似的东西会很棒

```
print menu
while lastKey = "":
    lastKey = check_for_recent_keystrokes()
if "1" in lastKey: #do stuff... 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-05T03:11:55.570

**在 Windows 上：**

```
import msvcrt
answer=msvcrt.getch() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-08-05T02:54:54.577

**在 Linux 上：**

*   设置原始模式
*   选择并读取击键
*   恢复正常设置

```
导入系统
导入选择
导入术语
导入 tty

定义 getkey():
    old_settings = termios.tcgetattr(sys.stdin)
    tty.setraw(sys.stdin.fileno())
    select.select([sys.stdin], [], [], 0)
    答案 = sys.stdin.read(1)
    termios.tcsetattr（sys.stdin，termios.TCSADRAIN，old_settings）
    返回答案

打印"""菜单
1) 说 Foo
2) 说吧"""

答案=getkey()

如果答案为“1”：打印“foo”
elif "2" 回答：打印 "bar"

```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-05T03:51:57.737

哇，这花了很长时间。好的，这就是我最终得到的

```
#!C:\python25\python.exe
import msvcrt
print """Menu
1) Say Foo 
2) Say Bar"""
while 1:
    char = msvcrt.getch()
    if char == chr(27): #escape
        break
    if char == "1":
        print "foo"
        break
    if char == "2":
        print "Bar"
        break 
```

使用 IDLE，python 附带的 python ......东西......它很难失败。但是，一旦我在 DOS（呃，CMD.exe）中尝试了它，作为一个真正的程序，它就运行良好。

除非您手边有任务管理器，否则没有人在 IDLE 中尝试过。

我已经忘记了我是如何使用不是超级即时响应的菜单生活的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-05T04:28:03.747

msvcrt 在 IDLE 中失败的原因是 IDLE 没有访问运行 msvcrt 的库。而当您在 cmd.exe 中本地运行程序时，它运行良好。与您的程序在 Mac 和 Linux 终端上崩溃的原因相同。

但我想如果你打算专门为窗户使用它，你会更有力量。

# c# - 晃动鼠标

> ID：1836
> 
> 赞同：40
> 
> 时间：2008-08-05T02:51:37.420
> 
> 标签：c#, winapi, mouse

好的。这是一个有点虚荣的应用程序，但我今天在工作中遇到了一种情况，我在培训班上，机器设置为每 10 分钟锁定一次。好吧，如果培训师对谈话感到兴奋——而不是更换幻灯片——机器就会锁定。

我想写一个很小的应用程序，它只有一个任务栏图标，除了每 4 分钟将鼠标移动 1 个像素之外什么都不做。

我可以用 Delphi（我的强语言）以 3 种方式做到这一点，但我正在转向 C# 工作，我想知道那里阻力最小的路径。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-08-05T03:00:24.750

**对于 C# 3.5**

没有 notifyicon 因此您需要在任务管理器中手动终止此应用程序

```
using System;
using System.Drawing;
using System.Windows.Forms;

static class Program
{
    static void Main()
    {
        Timer timer = new Timer();
        // timer.Interval = 4 minutes
        timer.Interval = (int)(TimeSpan.TicksPerMinute * 4 / TimeSpan.TicksPerMillisecond);
        timer.Tick += (sender, args) => { Cursor.Position = new Point(Cursor.Position.X + 1, Cursor.Position.Y + 1); };
        timer.Start();
        Application.Run();
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-08-17T20:29:35.697

执行此操作的“正确”方法是响应 WM_SYSCOMMAND 消息。在 C# 中，这看起来像这样：

```
protected override void WndProc(ref Message m)
{
    // Abort screensaver and monitor power-down
    const int WM_SYSCOMMAND = 0x0112;
    const int SC_MONITOR_POWER = 0xF170;
    const int SC_SCREENSAVE = 0xF140;
    int WParam = (m.WParam.ToInt32() & 0xFFF0);

    if (m.Msg == WM_SYSCOMMAND &&
        (WParam == SC_MONITOR_POWER || WParam == SC_SCREENSAVE)) return;

    base.WndProc(ref m);
} 
```

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms646360(VS.85).aspx)，如果在 Vista 或更高版本上的策略启用了屏幕保护程序密码，这将不起作用。大概以编程方式移动鼠标也被忽略了，尽管我没有对此进行测试。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2011-12-09T20:29:23.743

当我在家工作时，我将鼠标线系在一个左右摆动的桌面风扇上。它使鼠标保持移动并防止工作站进入睡眠状态。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-05T03:07:41.523

像这样的东西应该可以工作（不过，你**会**想要改变间隔）。

```
public Form1()
{
    InitializeComponent();
    Timer Every4Minutes = new Timer();
    Every4Minutes.Interval = 10;
    Every4Minutes.Tick += new EventHandler(MoveNow);
    Every4Minutes.Start();
}

void MoveNow(object sender, EventArgs e)
{
    Cursor.Position = new Point(Cursor.Position.X - 1, Cursor.Position.Y - 1);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-15T19:46:57.613

（Windows 10 / .Net 5 / C# 9.0）

而不是假装活动，你可以

> 通知系统它正在使用，从而防止系统在应用程序运行时进入睡眠或关闭显示器

使用[SetThreadExecutionState](https://docs.microsoft.com/fr-fr/windows/win32/api/winbase/nf-winbase-setthreadexecutionstate)，如[PInvoke.net](https://www.pinvoke.net/default.aspx/kernel32.setthreadexecutionstate)上所述：

```
using System;
using System.Runtime.InteropServices;
using System.Threading;

namespace VanityApp
{
    internal static class Program
    {
        [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern ExecutionState SetThreadExecutionState(ExecutionState esFlags);

        [Flags]
        private enum ExecutionState : uint
        {
            ES_AWAYMODE_REQUIRED = 0x00000040,
            ES_CONTINUOUS = 0x80000000,
            ES_DISPLAY_REQUIRED = 0x00000002,
            ES_SYSTEM_REQUIRED = 0x00000001
        }

        private static void Main()
        {
            using AutoResetEvent autoResetEvent = new AutoResetEvent(false);
            using Timer timer = new Timer(state => SetThreadExecutionState(ExecutionState.ES_AWAYMODE_REQUIRED | ExecutionState.ES_CONTINUOUS | ExecutionState.ES_DISPLAY_REQUIRED | ExecutionState.ES_SYSTEM_REQUIRED), autoResetEvent, 0, -1);
            autoResetEvent.WaitOne();
        }
    }
} 
```

Timer 是一个[System.Threading.Timer](https://docs.microsoft.com/en-us/dotnet/api/system.threading.timer)，具有方便的构造函数，它使用[AutoResetEvent.WaitOne()](https://docs.microsoft.com/en-us/dotnet/api/system.threading.waithandle.waitone)来避免立即退出。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-07T23:23:38.190

Raf 为 Win10 世界的问题提供了一个优雅的答案，但不幸的是，他的 autoResetEvent.WaitOne() 指令阻塞了线程，因此它必须在自己的单独线程中。

对我有用的东西实际上可以在主线程中运行，代码不必放在 Main() 方法中，您实际上可以有一个按钮来启用此功能，一个按钮来禁用它。

首先，您当然需要定义执行状态标志：

```
[Flags]
private enum ExecutionState : uint // options to control monitor behavior
{
  ES_AWAYMODE_REQUIRED = 0x00000040, // prevent idle-to-sleep
  ES_CONTINUOUS = 0x80000000, // allow monitor power down
  ES_DISPLAY_REQUIRED = 0x00000002, // prevent monitor power down
  ES_SYSTEM_REQUIRED = 0x00000001 // keep system awake
} 
```

现在，每当您想保持系统唤醒并阻止显示器关闭或空闲到睡眠时，您需要做的就是执行一个命令：

```
SetThreadExecutionState(ExecutionState.ES_AWAYMODE_REQUIRED | ExecutionState.ES_CONTINUOUS | ExecutionState.ES_DISPLAY_REQUIRED | ExecutionState.ES_SYSTEM_REQUIRED); 
```

然后，如果您想撤消此操作并将系统返回到其原始执行状态，只需发出以下命令：

```
SetThreadExecutionState(ExecutionState.ES_CONTINUOUS); 
```

请记住，每个命令都会返回之前的执行状态，这意味着，当您第一次更改此状态时，您可以在本地缓存返回的值，并在您想要恢复之前的状态时使用它。

# c# - 在图像中定位文本

> ID：1848
> 
> 赞同：32
> 
> 时间：2008-08-05T03:04:43.683
> 
> 标签：c#, image, image-processing, artificial-intelligence

我目前正在做一个项目，我的目标是在图像中定位文本。到目前为止，我还没有对文本进行 OCR 处理。我想基本上获得图像中文本的边界。我正在使用 AForge.Net 成像组件进行操作。在某种意义上有任何帮助吗？

2009 年 2 月 5 日更新：从那以后，我在我的项目中走上了另一条路线。但是，我确实尝试使用 MODI（Microsoft Office Document Imaging）获取文本。它允许您轻松地对图像进行 OCR 并从中提取文本。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-05T03:24:27.840

这是一个活跃的研究领域。确实有大量关于该主题的学术论文。很难给你提供帮助，尤其是没有更多细节的情况下。您在寻找特定类型的文本吗？字体？仅限英语？你熟悉学术文献吗？

“文本检测”是任何 OCR（光学字符识别）系统中的标准问题，因此在处理它的互联网上有大量代码。

我可以开始列出来自谷歌的大量链接，但我建议您搜索“文本检测”并开始阅读:)。也有充足的示例代码可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-05T06:00:46.417

[识别图像中的文本确实是该领域研究人员的热门话题，但只是在验证码](http://en.wikipedia.org/wiki/Captcha)成为防御垃圾邮件机器人的“规范”时才开始失控。为什么使用验证码作为保护？好吧，因为很难/很难在图像中找到（和阅读）文本！

我提到验证码的原因是因为最大的进步*是在那个小区域内取得的，我认为你的解决方案最好在那里找到。特别是因为验证码确实是关于在杂乱的图像中定位文本（或类似于文本的东西），然后尝试正确读取字母。

所以如果你能找到[一个很好的开源验证码破解工具](http://libcaca.zoy.org/wiki/PWNtcha)，你可能拥有继续你的任务所需的一切......
你甚至可以丢弃处理字符识别本身的最困难的代码，因为这些 OCR 用于阅读扭曲的文字，你不必做的事情。

*： “非研究人员”在可见、可用和**实用信息方面的进步**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-06-23T05:49:10.160

If you're ok with using an online API for this, the API at [http://www.wisetrend.com/wisetrend_ocr_cloud.shtml](http://www.wisetrend.com/wisetrend_ocr_cloud.shtml) can do text detection in addition to just OCR.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T14:54:49.080

[Stroke width transform](http://scholar.google.at/scholar?q=stroke%20width%20transform&hl=en&as_sdt=0&as_vis=1&oi=scholart&sa=X&ei=PVpxUZusCsfFtQbYj4GwCA&ved=0CCsQgQMwAA) can do that for you. That's at least what MS developed for their mobile phone OS. A discussion on the implementation is [here at https://stackoverflow.com/](https://stackoverflow.com/questions/4837124/stroke-width-transform-swt-implementation-java-c)

# python - Python：我在什么操作系统上运行？

> ID：1854
> 
> 赞同：808
> 
> 时间：2008-08-05T03:23:18.917
> 
> 标签：python, cross-platform, platform-specific, platform-agnostic

我需要查看什么来查看我使用的是 Windows 还是 Unix 等？

* * *

## 回答 #1

> 赞同：1071
> 
> 时间：2008-08-05T03:27:03.760

```
>>> import os
>>> os.name
'posix'
>>> import platform
>>> platform.system()
'Linux'
>>> platform.release()
'2.6.22-15-generic' 
```

的输出[`platform.system()`](https://docs.python.org/library/platform.html#platform.system)如下：

*   Linux：`Linux`
*   苹果电脑：`Darwin`
*   视窗：`Windows`

请参阅：[`platform`— 访问底层平台的识别数据](https://docs.python.org/library/platform.html)

* * *

## 回答 #2

> 赞同：202
> 
> 时间：2008-08-05T03:57:22.327

Dang -- lbrandy 击败了我，但这并不意味着我不能为您提供 Vista 的系统结果！

```
>>> import os
>>> os.name
'nt'
>>> import platform
>>> platform.system()
'Windows'
>>> platform.release()
'Vista' 
```

...而且我不敢相信还没有人为 Windows 10 发布过：

```
>>> import os
>>> os.name
'nt'
>>> import platform
>>> platform.system()
'Windows'
>>> platform.release()
'10' 
```

* * *

## 回答 #3

> 赞同：140
> 
> 时间：2008-08-05T04:13:53.870

作为记录，这是 Mac 上的结果：

```
>>> import os
>>> os.name
'posix'
>>> import platform
>>> platform.system()
'Darwin'
>>> platform.release()
'8.11.1' 
```

* * *

## 回答 #4

> 赞同：107
> 
> 时间：2014-09-16T07:42:41.593

使用 Python 区分操作系统的示例代码：

```
import sys

if sys.platform.startswith("linux"):  # could be "linux", "linux2", "linux3", ...
    # linux
elif sys.platform == "darwin":
    # MAC OS X
elif sys.platform == "win32":
    # Windows (either 32-bit or 64-bit) 
```

* * *

## 回答 #5

> 赞同：80
> 
> 时间：2019-09-23T23:28:46.173

**短篇故事**

使用`platform.system()`. 它返回`Windows`,`Linux`或`Darwin`（对于 OSX）。

**很长的故事**

在 Python 中获取 OS 有 3 种方法，每种方法都有其优缺点：

**方法一**

```
>>> import sys
>>> sys.platform
'win32'  # could be 'linux', 'linux2, 'darwin', 'freebsd8' etc 
```

这是如何工作的（[来源](https://github.com/python/cpython/blob/b82e17e626f7b1cd98aada0b1ebb65cb9f8fb184/Python/sysmodule.c#L1478)）：它在内部调用 OS API 来获取 OS 定义的 OS 名称。有关各种特定于操作系统的值，请参见[此处](https://stackoverflow.com/a/13874620/207661)。

优点：没有魔法，低等级。

缺点：取决于操作系统版本，所以最好不要直接使用。

**方法二**

```
>>> import os
>>> os.name
'nt'  # for Linux and Mac it prints 'posix' 
```

它是如何工作的（[来源](https://github.com/python/cpython/blob/3.7/Lib/os.py#L48)）：它在内部检查 python 是否具有称为 posix 或 nt 的特定于操作系统的模块。

优点：简单检查 posix OS

缺点：Linux 或 OSX 之间没有区别。

**方法三**

```
>>> import platform
>>> platform.system()
'Windows' # for Linux it prints 'Linux', Mac it prints `'Darwin' 
```

这是如何工作的（[来源](https://github.com/python/cpython/blob/3.7/Lib/platform.py#L949)）：在内部，它最终会调用内部操作系统 API，获取操作系统版本特定的名称，如“win32”或“win16”或“linux1”，然后标准化为更通用的名称，如“Windows”或“Linux”或'达尔文' 通过应用几种启发式方法。

Pro：Windows、OSX 和 Linux 的最佳便携方式。

缺点：Python 人员必须使规范化启发式保持最新。

**概括**

*   如果您想检查操作系统是 Windows 还是 Linux 或 OSX，那么最可靠的方法是`platform.system()`.
*   如果您想通过内置 Python 模块进行特定于操作系统的调用，`posix`或者`nt`使用`os.name`.
*   如果您想获取操作系统本身提供的原始操作系统名称，请使用`sys.platform`.

* * *

## 回答 #6

> 赞同：44
> 
> 时间：2008-08-26T15:41:50.557

[`sys.platform`](https://docs.python.org/library/sys.html#sys.platform)如果您已经导入`sys`并且不想导入另一个模块，您也可以使用

```
>>> import sys
>>> sys.platform
'linux2' 
```

* * *

## 回答 #7

> 赞同：36
> 
> 时间：2013-01-23T10:55:26.150

如果你想要用户可读的数据但仍然很详细，你可以使用[platform.platform()](http://docs.python.org/library/platform.html#platform.platform)

```
>>> import platform
>>> platform.platform()
'Linux-3.3.0-8.fc16.x86_64-x86_64-with-fedora-16-Verne' 
```

您可以拨打以下几种不同的电话来确定您的位置

```
import platform
import sys

def linux_distribution():
  try:
    return platform.linux_distribution()
  except:
    return "N/A"

print("""Python version: %s
dist: %s
linux_distribution: %s
system: %s
machine: %s
platform: %s
uname: %s
version: %s
mac_ver: %s
""" % (
sys.version.split('\n'),
str(platform.dist()),
linux_distribution(),
platform.system(),
platform.machine(),
platform.platform(),
platform.uname(),
platform.version(),
platform.mac_ver(),
)) 
```

该脚本的输出在几个不同的系统（Linux、Windows、Solaris、MacOS）和架构（x86、x64、Itanium、power pc、sparc）上运行：[https ://github.com/hpcugent/easybuild/ wiki/OS_flavor_name_version](https://github.com/hpcugent/easybuild/wiki/OS_flavor_name_version)

例如 Ubuntu 12.04 服务器给出：

```
Python version: ['2.6.5 (r265:79063, Oct  1 2012, 22:04:36) ', '[GCC 4.4.3]']
dist: ('Ubuntu', '10.04', 'lucid')
linux_distribution: ('Ubuntu', '10.04', 'lucid')
system: Linux
machine: x86_64
platform: Linux-2.6.32-32-server-x86_64-with-Ubuntu-10.04-lucid
uname: ('Linux', 'xxx', '2.6.32-32-server', '#62-Ubuntu SMP Wed Apr 20 22:07:43 UTC 2011', 'x86_64', '')
version: #62-Ubuntu SMP Wed Apr 20 22:07:43 UTC 2011
mac_ver: ('', ('', '', ''), '') 
```

* * *

## 回答 #8

> 赞同：33
> 
> 时间：2019-02-23T02:39:56.453

我开始更系统地列出使用各种模块可以期望的值（随意编辑和添加您的系统）：

# Linux（64 位）+ WSL

```
 x86_64            aarch64
                            ------            -------
os.name                     posix             posix
sys.platform                linux             linux
platform.system()           Linux             Linux
sysconfig.get_platform()    linux-x86_64      linux-aarch64
platform.machine()          x86_64            aarch64
platform.architecture()     ('64bit', '')     ('64bit', 'ELF') 
```

*   尝试使用archlinux和mint，得到相同的结果
*   在 python2`sys.platform`上以内核版本为后缀，例如`linux2`，其他一切都保持不变
*   Linux 的 Windows 子系统上的相同输出（尝试使用 ubuntu 18.04 LTS），除了`platform.architecture() = ('64bit', 'ELF')`

# 视窗（64 位）

（在 32bit 子系统中运行 32bit 列）

```
official python installer   64bit                     32bit
-------------------------   -----                     -----
os.name                     nt                        nt
sys.platform                win32                     win32
platform.system()           Windows                   Windows
sysconfig.get_platform()    win-amd64                 win32
platform.machine()          AMD64                     AMD64
platform.architecture()     ('64bit', 'WindowsPE')    ('64bit', 'WindowsPE')

msys2                       64bit                     32bit
-----                       -----                     -----
os.name                     posix                     posix
sys.platform                msys                      msys
platform.system()           MSYS_NT-10.0              MSYS_NT-10.0-WOW
sysconfig.get_platform()    msys-2.11.2-x86_64        msys-2.11.2-i686
platform.machine()          x86_64                    i686
platform.architecture()     ('64bit', 'WindowsPE')    ('32bit', 'WindowsPE')

msys2                       mingw-w64-x86_64-python3  mingw-w64-i686-python3
-----                       ------------------------  ----------------------
os.name                     nt                        nt
sys.platform                win32                     win32
platform.system()           Windows                   Windows
sysconfig.get_platform()    mingw                     mingw
platform.machine()          AMD64                     AMD64
platform.architecture()     ('64bit', 'WindowsPE')    ('32bit', 'WindowsPE')

cygwin                      64bit                     32bit
------                      -----                     -----
os.name                     posix                     posix
sys.platform                cygwin                    cygwin
platform.system()           CYGWIN_NT-10.0            CYGWIN_NT-10.0-WOW
sysconfig.get_platform()    cygwin-3.0.1-x86_64       cygwin-3.0.1-i686
platform.machine()          x86_64                    i686
platform.architecture()     ('64bit', 'WindowsPE')    ('32bit', 'WindowsPE') 
```

一些备注：

*   还有`distutils.util.get_platform()`与`sysconfig.get_platform相同
*   windows 上的 anaconda 与官方 python windows 安装程序相同
*   我没有 Mac 也没有真正的 32 位系统，也没有动力在网上做

要与您的系统进行比较，只需运行此脚本（如果缺少，请在此处附加结果:)

```
from __future__ import print_function
import os
import sys
import platform
import sysconfig

print("os.name                      ",  os.name)
print("sys.platform                 ",  sys.platform)
print("platform.system()            ",  platform.system())
print("sysconfig.get_platform()     ",  sysconfig.get_platform())
print("platform.machine()           ",  platform.machine())
print("platform.architecture()      ",  platform.architecture()) 
```

* * *

## 回答 #9

> 赞同：17
> 
> 时间：2017-08-14T17:00:26.833

一个新的答案怎么样：

```
import psutil
psutil.MACOS   #True (OSX is deprecated)
psutil.WINDOWS #False
psutil.LINUX   #False 
```

如果我使用 MACOS，这将是输出

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2010-06-11T07:37:56.837

我用的是weblogic自带的WLST工具，并没有实现平台包。

```
wls:/offline> import os
wls:/offline> print os.name
java 
wls:/offline> import sys
wls:/offline> print sys.platform
'java1.5.0_11' 
```

除了修补系统*javaos.py*（[在带有 jdk1.5 的 windows 2003 上出现 os.system() 问题](http://osdir.com/ml/lang.jython.devel/2006-08/msg00035.html)）（我不能这样做，我必须使用开箱即用的 weblogic），这就是我使用的：

```
def iswindows():
  os = java.lang.System.getProperty( "os.name" )
  return "win" in os.lower() 
```

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2020-10-20T12:03:31.183

使用[platform.system()](https://docs.python.org/3/library/platform.html#platform.system)

> 返回系统/操作系统名称，例如“Linux”、“Darwin”、“Java”、“Windows”。如果无法确定值，则返回空字符串。

```
import platform
system = platform.system().lower()

is_windows = system == 'windows'
is_linux = system == 'linux'
is_mac = system == 'darwin' 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2011-10-10T00:11:15.410

/usr/bin/python3.2

```
def cls():
    from subprocess import call
    from platform import system

    os = system()
    if os == 'Linux':
        call('clear', shell = True)
    elif os == 'Windows':
        call('cls', shell = True) 
```

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2013-01-09T08:47:48.920

对于 Jython，我发现获取操作系统名称的唯一方法是检查`os.name`Java 属性（在 WinXP 上尝试使用`sys`,`os`和`platform`Jython 2.5.3 的模块）：

```
def get_os_platform():
    """return platform name, but for Jython it uses os.name Java property"""
    ver = sys.platform.lower()
    if ver.startswith('java'):
        import java.lang
        ver = java.lang.System.getProperty("os.name").lower()
    print('platform: %s' % (ver))
    return ver 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2013-02-14T22:44:56.070

Windows 8 上的有趣结果：

```
>>> import os
>>> os.name
'nt'
>>> import platform
>>> platform.system()
'Windows'
>>> platform.release()
'post2008Server' 
```

**编辑：**这是一个[错误](http://bugs.python.org/issue16176)

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2015-07-08T14:46:49.300

如果您在 Windows 上使用 Cygwin，请注意 where `os.name`is `posix`.

```
>>> import os, platform
>>> print os.name
posix
>>> print platform.system()
CYGWIN_NT-6.3-WOW 
```

* * *

## 回答 #16

> 赞同：7
> 
> 时间：2020-01-22T15:30:51.670

我知道这是一个老问题，但我相信我的回答可能对一些正在寻找一种简单易懂的 Python 方法来检测代码中操作系统的人有所帮助。在python3.7上测试

```
from sys import platform

class UnsupportedPlatform(Exception):
    pass

if "linux" in platform:
    print("linux")
elif "darwin" in platform:
    print("mac")
elif "win" in platform:
    print("windows")
else:
    raise UnsupportedPlatform 
```

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2013-03-28T05:19:17.007

如果您不是在寻找内核版本等，而是在寻找 linux 发行版，您可能需要使用以下内容

在python2.6+

```
>>> import platform
>>> print platform.linux_distribution()
('CentOS Linux', '6.0', 'Final')
>>> print platform.linux_distribution()[0]
CentOS Linux
>>> print platform.linux_distribution()[1]
6.0 
```

在python2.4

```
>>> import platform
>>> print platform.dist()
('centos', '6.0', 'Final')
>>> print platform.dist()[0]
centos
>>> print platform.dist()[1]
6.0 
```

显然，这只有在你在 linux 上运行时才有效。如果您想跨平台拥有更多通用脚本，可以将其与其他答案中给出的代码示例混合使用。

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2015-01-16T18:13:11.747

试试这个：

```
import os

os.uname() 
```

你可以做到：

```
info=os.uname()
info[0]
info[1] 
```

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2016-08-20T08:03:03.770

您也可以只使用平台模块而不导入 os 模块来获取所有信息。

```
>>> import platform
>>> platform.os.name
'posix'
>>> platform.uname()
('Darwin', 'mainframe.local', '15.3.0', 'Darwin Kernel Version 15.3.0: Thu Dec 10 18:40:58 PST 2015; root:xnu-3248.30.4~1/RELEASE_X86_64', 'x86_64', 'i386') 
```

使用此行可以实现用于报告目的的漂亮整洁的布局：

```
for i in zip(['system','node','release','version','machine','processor'],platform.uname()):print i[0],':',i[1] 
```

这给出了这个输出：

```
system : Darwin
node : mainframe.local
release : 15.3.0
version : Darwin Kernel Version 15.3.0: Thu Dec 10 18:40:58 PST 2015; root:xnu-3248.30.4~1/RELEASE_X86_64
machine : x86_64
processor : i386 
```

通常缺少的是操作系统版本，但您应该知道您运行的是 windows、linux 还是 mac，平台独立的方法是使用此测试：

```
In []: for i in [platform.linux_distribution(),platform.mac_ver(),platform.win32_ver()]:
   ....:     if i[0]:
   ....:         print 'Version: ',i[0] 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2011-09-28T17:54:43.230

同理....

```
import platform
is_windows=(platform.system().lower().find("win") > -1)

if(is_windows): lv_dll=LV_dll("my_so_dll.dll")
else:           lv_dll=LV_dll("./my_so_dll.so") 
```

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2014-10-30T00:43:08.447

使用模块平台检查可用的测试并为您的系统打印答案：

```
import platform

print dir(platform)

for x in dir(platform):
    if x[0].isalnum():
        try:
            result = getattr(platform, x)()
            print "platform."+x+": "+result
        except TypeError:
            continue 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2018-01-13T21:29:45.910

如果您正在运行 macOS X 并运行`platform.system()`，您将获得 darwin，因为 macOS X 是基于 Apple 的 Darwin OS 构建的。Darwin 是 macOS X 的内核，本质上是没有 GUI 的 macOS X。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2019-01-29T13:06:52.727

此解决方案适用于`python`和`jython`。

模块*os_identify.py*：

```
import platform
import os

# This module contains functions to determine the basic type of
# OS we are running on.
# Contrary to the functions in the `os` and `platform` modules,
# these allow to identify the actual basic OS,
# no matter whether running on the `python` or `jython` interpreter.

def is_linux():
    try:
        platform.linux_distribution()
        return True
    except:
        return False

def is_windows():
    try:
        platform.win32_ver()
        return True
    except:
        return False

def is_mac():
    try:
        platform.mac_ver()
        return True
    except:
        return False

def name():
    if is_linux():
        return "Linux"
    elif is_windows():
        return "Windows"
    elif is_mac():
        return "Mac"
    else:
        return "<unknown>" 
```

像这样使用：

```
import os_identify

print "My OS: " + os_identify.name() 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2018-09-27T17:39:31.423

像下面这样的简单 Enum 实现怎么样？不需要外部库！

```
import platform
from enum import Enum
class OS(Enum):
    def checkPlatform(osName):
        return osName.lower()== platform.system().lower()

    MAC = checkPlatform("darwin")
    LINUX = checkPlatform("linux")
    WINDOWS = checkPlatform("windows")  #I haven't test this one 
```

只需您可以使用 Enum 值访问

```
if OS.LINUX.value:
    print("Cool it is Linux") 
```

PS是python3

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2019-02-07T21:10:29.867

您可以查看**pip-date****[`pyOSinfo`](https://github.com/E3V3A/pip-date)**包中的代码，以获取最相关的操作系统信息，如您的 Python 发行版所示。

 **人们想要检查其操作系统的最常见原因之一是终端兼容性以及某些系统命令是否可用。不幸的是，此检查的成功在某种程度上取决于您的 python 安装和操作系统。例如，*`uname`*在大多数 Windows python 包上不可用。上面的 python 程序将向您展示最常用的内置函数的输出，这些函数已经由`os, sys, platform, site`.

[![在此处输入图像描述](../Images/614b0133b880b1fcd2f98ad129c5c90e.png)](https://i.stack.imgur.com/3PfPS.png)

因此，仅获取基本代码的最佳方法是将*其*作为示例。（我想我可以把它贴在这里，但这在政治上是不正确的。）

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2019-05-22T13:32:36.843

我迟到了，但是，以防万一有人需要它，我用这个函数对我的代码进行调整，以便它在 Windows、Linux 和 MacOs 上运行：

```
import sys
def get_os(osoptions={'linux':'linux','Windows':'win','macos':'darwin'}):
    '''
    get OS to allow code specifics
    '''   
    opsys = [k for k in osoptions.keys() if sys.platform.lower().find(osoptions[k].lower()) != -1]
    try:
        return opsys[0]
    except:
        return 'unknown_OS' 
```**

# asp.net - 三重引号？如何在 ASP.NET 中分隔数据绑定的 Javascript 字符串参数？

> ID：1873
> 
> 赞同：47
> 
> 时间：2008-08-05T04:05:53.230
> 
> 标签：asp.net, javascript, anchor, quotes

如何在锚`OnClick`事件中分隔 Javascript 数据绑定字符串参数？

*   我在 ASP.NET 中继器控件中有一个锚标记。
*   `OnClick`锚点事件包含对 Javascript 函数的调用。
*   Javascript 函数接受一个字符串作为其输入参数。
*   字符串参数使用来自中继器的数据绑定值填充。

我需要`Container.DataItem`.
我需要`OnClick`.

而且对于 Javascript 函数调用的输入字符串参数，我还需要*一个分隔符*（三引号？）。

由于我不能再次使用“单引号”，如何确保 Javascript 函数知道输入参数是字符串而不是整数？

如果没有围绕输入字符串参数的额外引号，Javascript 函数会认为我正在传递一个整数。

锚点：

```
<a id="aShowHide" onclick='ToggleDisplay(<%# DataBinder.Eval(Container.DataItem, "JobCode") %>);' >Show/Hide</a> 
```

还有我的 Javascript：

```
<script language="JavaScript" type="text/javascript">
/* Shows/Hides the Jobs Div */
function ToggleDisplay(jobCode)
{
    /* Each div has its ID set dynamically ('d' plus the JobCode) */
    var elem = document.getElementById('d' + jobCode);

    if (elem) 
    {
        if (elem.style.display != 'block') 
        {
            elem.style.display = 'block';
            elem.style.visibility = 'visible';
        } 
        else
        {
            elem.style.display = 'none';
            elem.style.visibility = 'hidden';
        }
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2008-08-05T04:28:21.983

我最近遇到了类似的问题，解决它的唯一方法是对单`&#39;`引号 ( ) 和双引号 ( `&#34;`) 使用普通的旧 HTML 代码。

源代码当然是一团糟，但它确实有效。

尝试

```
<a id="aShowHide" onclick='ToggleDisplay(&#34;<%# DataBinder.Eval(Container.DataItem, "JobCode") %>&#34;);'>Show/Hide</a> 
```

或者

```
<a id="aShowHide" onclick='ToggleDisplay(&#39;<%# DataBinder.Eval(Container.DataItem, "JobCode") %>&#39;);'>Show/Hide</a> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-28T15:11:16.407

```
onclick='javascript:ToggleDisplay("<%# DataBinder.Eval(Container.DataItem, "JobCode")%> "); ' 
```

像上面一样使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-05T04:08:18.983

> 如果没有围绕输入字符串参数的额外引号，Javascript 函数会认为我正在传递一个整数。

你能做一些基本的字符串函数来强制 JavaScript 把它变成一个字符串吗？像

```
value = value + "" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-05T04:19:36.853

尝试将额外的文本放在服务器端脚本块中并连接。

```
onclick='<%# "ToggleDisplay(""" &  DataBinder.Eval(Container.DataItem, "JobCode") & """);" %>' 
```

编辑：我很确定您也可以在脚本块之外使用双引号。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-12T01:12:16.847

将变量传递给没有单引号或双引号的函数

```
<html>
    <head>
    </head>
    <body>
        <script language="javascript">
        function hello(id, bu)
        {
            alert(id+ bu);
        }
        </script>
        <a href ="javascript:
            var x = &#34;12&#34;;
            var y = &#34;fmo&#34;;
            hello(x,y)">test</a>
    </body>
</html> 
```

# c# - 将 CSV 文件导入 .Net 中的强类型数据结构

> ID：1898
> 
> 赞同：107
> 
> 时间：2008-08-05T04:43:22.187
> 
> 标签：c#, vb.net, file, csv, import

将 CSV 文件导入强类型数据结构的最佳方法是什么？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2009-04-01T19:58:21.967

Microsoft 的[TextFieldParser](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)是稳定的，并遵循CSV 文件的[RFC 4180](https://www.rfc-editor.org/rfc/rfc4180)。不要被`Microsoft.VisualBasic`命名空间推迟；它是 .NET Framework 中的标准组件，只需添加对全局`Microsoft.VisualBasic`程序集的引用。

如果您正在为 Windows（而不是 Mono）进行编译，并且预计不必解析“损坏”（不符合 RFC）的 CSV 文件，那么这将是显而易见的选择，因为它是免费的、不受限制的、稳定的，并积极支持，其中大部分对于 FileHelpers 来说是不能说的。

另请参阅：[如何：在 Visual Basic 中读取逗号分隔的文本文件以](http://msdn.microsoft.com/en-us/library/cakac7e6.aspx)获取 VB 代码示例。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-11-05T14:41:07.510

使用 OleDB 连接。

```
String sConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\\InputDirectory\\;Extended Properties='text;HDR=Yes;FMT=Delimited'";
OleDbConnection objConn = new OleDbConnection(sConnectionString);
objConn.Open();
DataTable dt = new DataTable();
OleDbCommand objCmdSelect = new OleDbCommand("SELECT * FROM file.csv", objConn);
OleDbDataAdapter objAdapter1 = new OleDbDataAdapter();
objAdapter1.SelectCommand = objCmdSelect;
objAdapter1.Fill(dt);
objConn.Close(); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-08-16T23:44:37.427

如果您期望 CSV 解析的场景相当复杂，*甚至不要考虑推出我们自己的 parser*。那里有很多优秀的工具，比如[FileHelpers](http://www.filehelpers.com/)，甚至是来自[CodeProject](http://www.codeproject.com/KB/database/CsvReader.aspx)的工具。

关键是这是一个相当普遍的问题，你可以打赌*很多*软件开发人员已经考虑并解决了这个问题。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-08-16T23:53:11.327

我同意[@NotMyself](https://stackoverflow.com/users/303/notmyself)。[FileHelpers](http://filehelpers.sourceforge.net/)经过了良好的测试，可以处理各种边缘情况，如果您自己动手，您最终将不得不处理这些情况。看看 FileHelpers 做了什么，只有在你完全确定以下两种情况之一时才编写自己的：（1）你永远不需要处理 FileHelpers 所做的边缘情况，或者（2）你喜欢写这种东西并且会去当你必须解析这样的东西时会大喜过望：

1、“比尔”、“史密斯”、“主管”、“无评论”

2，“德雷克”，“奥马利”，“看门人”，

糟糕，我没有被引用，而且我在换行！

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-08-08T16:20:53.863

Brian 为将其转换为强类型集合提供了一个很好的解决方案。

给出的大多数 CSV 解析方法都没有考虑转义字段或 CSV 文件的其他一些细微之处（如修剪字段）。这是我个人使用的代码。它的边缘有点粗糙，几乎没有错误报告。

```
public static IList<IList<string>> Parse(string content)
{
    IList<IList<string>> records = new List<IList<string>>();

    StringReader stringReader = new StringReader(content);

    bool inQoutedString = false;
    IList<string> record = new List<string>();
    StringBuilder fieldBuilder = new StringBuilder();
    while (stringReader.Peek() != -1)
    {
        char readChar = (char)stringReader.Read();

        if (readChar == '\n' || (readChar == '\r' && stringReader.Peek() == '\n'))
        {
            // If it's a \r\n combo consume the \n part and throw it away.
            if (readChar == '\r')
            {
                stringReader.Read();
            }

            if (inQoutedString)
            {
                if (readChar == '\r')
                {
                    fieldBuilder.Append('\r');
                }
                fieldBuilder.Append('\n');
            }
            else
            {
                record.Add(fieldBuilder.ToString().TrimEnd());
                fieldBuilder = new StringBuilder();

                records.Add(record);
                record = new List<string>();

                inQoutedString = false;
            }
        }
        else if (fieldBuilder.Length == 0 && !inQoutedString)
        {
            if (char.IsWhiteSpace(readChar))
            {
                // Ignore leading whitespace
            }
            else if (readChar == '"')
            {
                inQoutedString = true;
            }
            else if (readChar == ',')
            {
                record.Add(fieldBuilder.ToString().TrimEnd());
                fieldBuilder = new StringBuilder();
            }
            else
            {
                fieldBuilder.Append(readChar);
            }
        }
        else if (readChar == ',')
        {
            if (inQoutedString)
            {
                fieldBuilder.Append(',');
            }
            else
            {
                record.Add(fieldBuilder.ToString().TrimEnd());
                fieldBuilder = new StringBuilder();
            }
        }
        else if (readChar == '"')
        {
            if (inQoutedString)
            {
                if (stringReader.Peek() == '"')
                {
                    stringReader.Read();
                    fieldBuilder.Append('"');
                }
                else
                {
                    inQoutedString = false;
                }
            }
            else
            {
                fieldBuilder.Append(readChar);
            }
        }
        else
        {
            fieldBuilder.Append(readChar);
        }
    }
    record.Add(fieldBuilder.ToString().TrimEnd());
    records.Add(record);

    return records;
} 
```

请注意，这不处理未由双引号分隔的字段的边缘情况，但 meerley 在其中包含带引号的字符串。请参阅[这篇文章](https://stackoverflow.com/questions/6209/split-a-string-ignoring-quoted-sections)以获得更好的扩展以及一些适当库的链接。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-08-08T09:39:26.223

我很无聊，所以我修改了一些我写的东西。它尝试以 OO 方式封装解析，同时减少文件的迭代次数，它只在顶部 foreach 迭代一次。

```
using System;

using System.Collections.Generic;

using System.Linq;

using System.Text;

using System.IO;

namespace ConsoleApplication1
{
    class Program
    {

        static void Main(string[] args)
        {

            // usage:

            // note this wont run as getting streams is not Implemented

            // but will get you started

            CSVFileParser fileParser = new CSVFileParser();

            // TO Do:  configure fileparser

            PersonParser personParser = new PersonParser(fileParser);

            List<Person> persons = new List<Person>();
            // if the file is large and there is a good way to limit
            // without having to reparse the whole file you can use a 
            // linq query if you desire
            foreach (Person person in personParser.GetPersons())
            {
                persons.Add(person);
            }

            // now we have a list of Person objects
        }
    }

    public abstract  class CSVParser 
    {

        protected String[] deliniators = { "," };

        protected internal IEnumerable<String[]> GetRecords()
        {

            Stream stream = GetStream();
            StreamReader reader = new StreamReader(stream);

            String[] aRecord;
            while (!reader.EndOfStream)
            {
                  aRecord = reader.ReadLine().Split(deliniators,
                   StringSplitOptions.None);

                yield return aRecord;
            }

        }

        protected abstract Stream GetStream(); 

    }

    public class CSVFileParser : CSVParser
    {
        // to do: add logic to get a stream from a file

        protected override Stream GetStream()
        {
            throw new NotImplementedException();
        } 
    }

    public class CSVWebParser : CSVParser
    {
        // to do: add logic to get a stream from a web request

        protected override Stream GetStream()
        {
            throw new NotImplementedException();
        }
    }

    public class Person
    {
        public String Name { get; set; }
        public String Address { get; set; }
        public DateTime DOB { get; set; }
    }

    public class PersonParser 
    {

        public PersonParser(CSVParser parser)
        {
            this.Parser = parser;
        }

        public CSVParser Parser { get; set; }

        public  IEnumerable<Person> GetPersons()
        {
            foreach (String[] record in this.Parser.GetRecords())
            {
                yield return new Person()
                {
                    Name = record[0],
                    Address = record[1],
                    DOB = DateTime.Parse(record[2]),
                };
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-08-05T05:24:03.213

CodeProject 上有两篇文章为解决方案提供代码，一篇使用[StreamReader](http://www.codeproject.com/KB/database/CsvReader.aspx)，另一篇使用[Microsoft Text Driver](http://support.microsoft.com/kb/187670)[导入 CSV 数据](http://www.codeproject.com/KB/database/FinalCSVReader.aspx)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-08-05T04:49:26.480

一个很好的简单方法是打开文件，并将每一行读入数组、链表、数据结构。不过要小心处理第一行。

这可能超出您的想象，但似乎有一种直接的方法可以使用[连接字符串](http://web.archive.org/web/20040202071915/http://weblogs.asp.net:80/fmarguerie/archive/2003/10/01/29964.aspx)来访问它们。

为什么不尝试使用 Python 而不是 C# 或 VB？它有一个不错的 CSV 模块可以导入，可以为您完成所有繁重的工作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-16T22:15:51.133

今年夏天，我不得不在 .NET 中为一个项目使用 CSV 解析器，并选择了 Microsoft Jet Text Driver。您使用连接字符串指定文件夹，然后使用 SQL Select 语句查询文件。您可以使用 schema.ini 文件指定强类型。起初我没有这样做，但后来我得到了不好的结果，其中数据的类型没有立即显现出来，例如 IP 号码或像“XYQ 3.9 SP1”这样的条目。

我遇到的一个限制是它不能处理超过 64 个字符的列名。它截断。这应该不是问题，除非我处理的是设计得很糟糕的输入数据。它返回一个 ADO.NET 数据集。

这是我找到的最佳解决方案。我会谨慎使用自己的 CSV 解析器，因为我可能会错过一些最终情况，而且我没有找到任何其他适用于 .NET 的免费 CSV 解析包。

编辑：另外，每个目录只能有一个 schema.ini 文件，所以我动态地附加到它以强类型化所需的列。它只会强类型指定的列，并推断任何未指定的字段。我真的很感激这一点，因为我正在处理导入 70+ 列 CSV 并且不想指定每一列，只指定行为不端的列。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-09-09T10:02:48.543

I typed in some code. The result in the datagridviewer looked good. It parses a single line of text to an arraylist of objects.

```
 enum quotestatus
    {
        none,
        firstquote,
        secondquote
    }
    public static System.Collections.ArrayList Parse(string line,string delimiter)
    {        
        System.Collections.ArrayList ar = new System.Collections.ArrayList();
        StringBuilder field = new StringBuilder();
        quotestatus status = quotestatus.none;
        foreach (char ch in line.ToCharArray())
        {                                
            string chOmsch = "char";
            if (ch == Convert.ToChar(delimiter))
            {
                if (status== quotestatus.firstquote)
                {
                    chOmsch = "char";
                }                         
                else
                {
                    chOmsch = "delimiter";                    
                }                    
            }

            if (ch == Convert.ToChar(34))
            {
                chOmsch = "quotes";           
                if (status == quotestatus.firstquote)
                {
                    status = quotestatus.secondquote;
                }
                if (status == quotestatus.none )
                {
                    status = quotestatus.firstquote;
                }
            }

            switch (chOmsch)
            {
                case "char":
                    field.Append(ch);
                    break;
                case "delimiter":                        
                    ar.Add(field.ToString());
                    field.Clear();
                    break;
                case "quotes":
                    if (status==quotestatus.firstquote)
                    {
                        field.Clear();                            
                    }
                    if (status== quotestatus.secondquote)
                    {                                                                           
                            status =quotestatus.none;                                
                    }                    
                    break;
            }
        }
        if (field.Length != 0)            
        {
            ar.Add(field.ToString());                
        }           
        return ar;
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-08-05T05:02:37.640

如果您可以保证数据中没有逗号，那么最简单的方法可能是使用[String.split](http://msdn.microsoft.com/en-us/library/system.string.split(VS.71).aspx)。

例如：

```
String[] values = myString.Split(',');
myObject.StringField = values[0];
myObject.IntField = Int32.Parse(values[1]); 
```

可能有您可以使用的库来提供帮助，但这可能很简单。只要确保数据中不能有逗号，否则您需要更好地解析它。

# math - 如何将纬度/经度映射到扭曲的地图？

> ID：1908
> 
> 赞同：26
> 
> 时间：2008-08-05T04:55:28.683
> 
> 标签：math, maps, mapping, latitude-longitude

我有一堆纬度/经度对映射到（地理扭曲）地图上的已知 x/y 坐标。

然后我还有一对纬度/经度。我想尽可能地将它绘制在地图上。我该怎么做呢？

起初，我决定为三个最近的纬度/经度点创建一个线性方程组，并从这些点计算一个变换，但这根本不起作用。由于这是一个线性系统，我也不能使用更多附近的点。

您不能假设 North 已启动：您所拥有的只是现有的 lat/long->x/y 映射。

编辑：它不是墨卡托投影，或类似的东西。为了可读性，它被任意扭曲（想想地铁地图）。我只想使用最近的 5 到 10 个映射，以便地图其他部分的失真不会影响我尝试计算的映射。

此外，整个地图位于一个非常小的地理区域内，因此无需担心地球——平地假设就足够了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-05T05:48:22.353

关于失真的种类有更具体的细节吗？例如，如果您的纬度和经度使用墨卡托投影“扭曲”到 2D 地图上，则转换数学很[容易获得](http://www.wikipedia.org/wiki/Mercator_projection)。

如果地图真的被任意扭曲，您可以尝试很多方法，但最简单的方法可能是从现有的点映射计算[加权平均值。](http://www.wikipedia.org/wiki/Weighted_mean)您的权重可能是从新点到每个现有点的 x/y 距离的平方倒数。

一些伪代码：

```
estimate-latitude-longitude (x, y)

    numerator-latitude := 0
    numerator-longitude := 0
    denominator := 0

    for each point,
        deltaX := x - point.x
        deltaY := y - point.y
        distSq := deltaX * deltaX + deltaY * deltaY
        weight := 1 / distSq

        numerator-latitude += weight * point.latitude
        numerator-longitude += weight * point.longitude
        denominator += weight

    return (numerator-latitude / denominator, numerator-longitude / denominator) 
```

这段代码将给出一个相对简单的近似值。如果您可以更精确地了解投影扭曲地理坐标的方式，您可能会做得更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-05T15:47:51.830

好的。从理论上讲，鉴于失真是“任意的”，任何解决方案都需要您对这种任意失真进行建模，您显然无法得到“答案”。然而，任何解决方案都将涉及（通常是隐含地）强加一些可能反映或可能不反映情况现实的扭曲模型。

由于您似乎对假定失真映射的某种局部连续性的模型最感兴趣，因此最明显的选择是您已经尝试过的模型：最近点之间的线性插值。除此之外，还需要更复杂的数学和数值分析知识。

但是，您假设您不能将其扩展到更多点，这是不正确的。您可以使用最小二乘误差方法。找到最小化其他点误差的线性答案。这可能是最直接的扩展。换句话说，取最近的 5 个点并尝试提出一个线性近似值，以最小化这些点的误差。并使用它。接下来我会试试这个。

如果这不起作用，那么在 N 个点的区域上的线性假设就被打破了。此时，您需要升级到二次或三次模型。那时数学会变得很忙。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-05T05:20:55.403

问题是球体可以通过多种方式扭曲，并且假设赤道上的所有这些点都知道，不会帮助您绘制更远的点。

你需要更好的“接近”点，然后你可以假设这三个点与第四个点在一个平面上并进行插值——知道经度的距离是一个函数，而不是一个常数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-05T05:21:02.800

嗯。也许我在这里遗漏了一些关于这个问题的信息，但如果你有长/纬度信息，你也有北方的方向吗？

您似乎需要将测地坐标映射到投影坐标系。例如 osgb 到 wgs84。

涉及的数学很重要，但代码只有几行。如果我有更多时间我会发布更多但我需要淋浴所以我会很无聊并链接到[维基百科](http://en.wikipedia.org/wiki/Geographic_coordinate_system)条目这非常好。

注意：淋浴后编辑。

# c# - 如何在 ASP.NET MVC 中 RedirectToAction 而不会丢失请求数据

> ID：1936
> 
> 赞同：124
> 
> 时间：2008-08-05T05:33:41.697
> 
> 标签：c#, asp.net-mvc

在使用 ASP.NET MVC 的情况下（例如表单提交）可能需要`RedirectToAction`.

一种这样的情况是当您在提交表单后遇到验证错误并需要重定向回表单，但希望 URL 反映表单的 URL，而不是它提交到的操作页面。

由于我要求表单包含原始`POST`数据，为了用户方便以及验证目的，我如何通过`RedirectToAction()`？如果我使用 viewData 参数，我的`POST`参数将被更改为`GET`参数。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2008-08-05T05:43:27.900

解决方案是使用 TempData 属性来存储所需的 Request 组件。

例如：

```
public ActionResult Send()
{
    TempData["form"] = Request.Form;
    return this.RedirectToAction(a => a.Form());
} 
```

然后在您的“表单”操作中，您可以执行以下操作：

```
public ActionResult Form()
{
    /* Declare viewData etc. */

    if (TempData["form"] != null)
    {
        /* Cast TempData["form"] to 
        System.Collections.Specialized.NameValueCollection 
        and use it */
    }

    return View("Form", viewData);
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2008-08-07T05:12:32.283

请记住，TempData 将表单集合存储在会话中。如果您不喜欢这种行为，您可以实现新的 ITempDataProvider 接口并使用其他一些机制来存储临时数据。我不会这样做，除非您知道（通过测量和分析）使用 Session 状态正在伤害您的事实。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-04-05T09:36:53.963

看看[MVCContrib](https://mvccontrib.codeplex.com/)，你可以这样做：

```
using MvcContrib.Filters;

[ModelStateToTempData]
public class MyController : Controller {
    //
    ...
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-08-25T22:06:36.850

还有另一种避免临时数据的方法。我喜欢的模式涉及为无效表单的原始渲染和重新渲染创建 1 个操作。它是这样的：

```
var form = new FooForm();

if (request.UrlReferrer == request.Url)
{
     // Fill form with previous request's data
}

if (Request.IsPost())
{
     if (!form.IsValid)
     {
         ViewData["ValidationErrors"] = ...
     } else {
         // update model
         model.something = foo.something;
         // handoff to post update action
         return RedirectToAction("ModelUpdated", ... etc);
     }
}

// By default render 1 view until form is a valid post
ViewData["Form"] = form;
return View(); 
```

或多或少是这样的模式。有点伪君子。有了这个，您可以创建 1 个视图来处理呈现表单、重新显示值（因为表单将填充以前的值）以及显示错误消息。

当发布到此操作时，如果其有效，则将控制权转移到另一个操作。

当我们构建对 MVC 的支持时，我试图在[.net 验证框架中简化这种模式。](http://www.codeplex.com/ValidationFramework/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-30T08:39:03.603

如果要将数据传递给重定向操作，可以使用的方法是：

```
return RedirectToAction("ModelUpdated", new {id = 1});
// The definition of the action method like  public ActionResult ModelUpdated(int id); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-18T13:31:52.997

TempData 是保持数据从一个动作到另一个动作的解决方案。

```
Employee employee = new Employee
                {
                        EmpID = "121",
                        EmpFirstName = "Imran",
                        EmpLastName = "Ghani"
                };
                TempData["Employee"] = employee; 
```

# asp.net - 多个 DataContext 类是否合适？

> ID：1949
> 
> 赞同：33
> 
> 时间：2008-08-05T05:54:34.697
> 
> 标签：asp.net, .net, linq-to-sql, datacontext

为了在 ASP.net 3.5 应用程序中充分使用 LinqToSql，需要创建[DataContext](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx) [类](http://dotnetslackers.com/articles/csharp/InsideTheLINQToSQLDataContextClass.aspx)（通常使用 VS 2008 中的设计器完成）。从 UI 的角度来看，DataContext 是您希望通过 LinqToSql 公开的数据库部分的设计，并且在设置 LinqToSql 的 ORM 功能时是不可或缺的。

我的问题是：我正在建立一个使用大型数据库的项目，其中所有表都通过外键以某种方式互连。我的第一个倾向是创建一个巨大的 DataContext 类来模拟整个数据库。这样我理论上可以（尽管我不知道在实践中是否需要）使用通过 LinqToSql 生成的外键连接来轻松地在我的代码中的相关对象之间移动，插入相关对象等。

然而，经过一番思考，我现在认为创建多个 DataContext 类可能更有意义，每个类都与我的数据库中的特定命名空间或逻辑相关部分相关。我主要担心的是，始终为与数据库特定区域相关的单个操作实例化和处置一个巨大的 DataContext 类会对应用程序资源造成不必要的影响。此外，创建和管理较小的 DataContext 文件比创建一个大文件更容易。我会失去的事情是，数据库的一些遥远部分将无法通过 LinqToSql 导航（即使在实际数据库中连接它们的关系链）。此外，还会有一些表类存在于多个 DataContext 中。

关于多个 DataContexts（对应于 DB 命名空间）是否适合代替（或补充）一个非常大的 DataContext 类（对应于整个 DB）的任何想法或经验？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-08-07T21:02:30.057

我不同意约翰的回答。DataContext（或 Linq to Entities ObjectContext）更像是一个“工作单元”，而不是一个连接。它管理更改跟踪等。有关说明，请参阅此博客文章：

[LINQ to SQL DataContext 的生命周期](http://blogs.msdn.com/dinesh.kulkarni/archive/2008/04/27/lifetime-of-a-linq-to-sql-datacontext.aspx)

这篇博文的四个要点是DataContext：

1.  非常适合“工作单元”方法
2.  也是为“无状态”服务器操作而设计的
3.  不是为长期使用而设计的
4.  ```
    Should be used very carefully after
    any SumbitChanges() operation. 
    ```

考虑到这一点，我不认为使用多个 DataContext 会造成任何危害——事实上，为不同类型的工作创建不同的 DataContext 将有助于使您的 LinqToSql 实现更有用和更有条理。唯一的缺点是你不能使用 sqlmetal 来自动生成你的 dmbl。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-05T22:51:08.217

我一直在为同一个问题争论不休，同时在遗留数据库上对 LINQ to SQL 进行改造。我们的数据库有点庞大（150 个表），经过一番思考和实验，我选择使用多个 DataContext。这是否被认为是一种反模式还有待观察，但现在它使生活变得可控。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-27T01:11:45.710

我认为约翰是正确的。

“我主要担心的是，始终为与数据库特定区域相关的单个操作实例化和处理一个巨大的 DataContext 类将对应用程序资源造成不必要的影响”

你如何支持这种说法？您的哪些实验表明大型 DataContext 是性能瓶颈？拥有多个数据上下文很像拥有多个数据库，并且在类似的场景中是有意义的，也就是说，几乎没有。如果您正在使用多个数据上下文，则需要跟踪哪些对象属于哪个数据上下文，并且您无法关联不在同一数据上下文中的对象。这是一种昂贵的设计气味，没有真正的好处。

@Evan“DataContext（或Linq to Entities ObjectContext）更像是一个“工作单元”而不是一个连接“这正是你不应该拥有多个数据上下文的原因。为什么您一次需要多个“工作单元”？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-17T20:53:53.990

我不得不不同意接受的答案。在提出的问题中，系统有一个大型数据库，几乎每个表之间都有很强的外键关系（我工作的情况也是如此）。在这种情况下，将其分解为更小的 DataContext（DC）有两个直接和主要的缺点（问题都提到了）：

1.  **您失去了某些表之间的关系。**您可以尝试明智地选择 DC 边界，但您最终会遇到这样一种情况，即使用从一个 DC 中的表到另一个 DC 中的表的关系非常方便，而您将无法这样做。
2.  **一些表格可能出现在多个 DC 中。**这意味着，如果您想在部分类中添加特定于表的帮助方法、业务逻辑或其他代码，则这些类型将无法跨 DC 兼容。您可以通过从其自己的特定基类继承每个实体类来解决此问题，这会变得混乱。此外，架构更改必须在多个 DC 之间复制。

现在这些都是显着的缺点。是否有足够大的优势来克服它们？问题提到了性能：

> 我主要担心的是，始终为与数据库特定区域相关的单个操作实例化和处置一个巨大的 DataContext 类会对应用程序资源造成不必要的影响。

实际上，大型 DC 需要更多时间来实例化或在典型工作单元中使用是不正确的。事实上，[在运行进程中创建第一个实例后，几乎可以立即创建同一 DC 的后续副本](http://blogs.msdn.com/b/gisenberg/archive/2008/05/20/linq-to-sql-optimizing-datacontext-construction-with-the-factory-pattern.aspx#9904456)。

对于具有彻底外键关系的单个大型数据库，多个 DC 的唯一真正优势是您可以更好地划分代码。但是您已经可以使用部分类来做到这一点。

此外，工作单元概念与原始问题并不真正相关。工作单元通常是指单个 DC***实例***正在完成的工作量，而不是 DC***类能够******完成***的工作量。

 ** * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-05T09:57:03.333

根据我使用 LINQ to SQL 和 LINQ to Entities 的经验，DataContext 是与数据库的连接的同义词。因此，如果您要使用多个数据存储，则需要使用多个 DataContext。我的直觉反应是，您不会注意到包含大量表的 DataContext 的减速。但是，如果您这样做了，则始终可以在可以隔离与其他表集没有任何关系的表并创建多个上下文的点处逻辑拆分数据库。*

# c++ - C++ 中的 CPU 节流

> ID：1982
> 
> 赞同：49
> 
> 时间：2008-08-05T07:11:08.427
> 
> 标签：c++, performance, cpu, throttling

我只是想知道是否有一种优雅的方法可以为执行密集计算的特定线程设置最大 CPU 负载。

现在我找到了线程中最耗时的循环（它只进行压缩）并使用`GetTickCount()`硬`Sleep()`编码值。它确保循环持续一段时间，然后休眠一段最短时间。它或多或少地完成了这项工作，即保证线程不会使用超过 50% 的 CPU。
但是，行为取决于 CPU 内核的数量（巨大的劣势）和丑陋的（较小的劣势:)）。
有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-09-05T23:33:42.087

我不知道有任何 API 可以让操作系统的调度程序执行您想要的操作（即使您的线程是空闲优先级的，如果没有更高优先级的就绪线程，您的线程也会运行）。但是，我认为您可以根据您已经在做的事情即兴创作一个相当优雅的节流功能。本质上（我手边没有 Windows 开发机器）：

选择线程在每次迭代时休眠的默认时间量。然后，在每次迭代中（或在每第 n 次迭代中，这样节流函数本身不会成为显着的 CPU 负载），

1.  计算自上次调用节流函数以来线程使用的 CPU 时间量（我将称之为 dCPU）。您可以使用[GetThreadTimes()](http://msdn.microsoft.com/en-us/library/ms683237.aspx) API 来获取线程已执行的时间量。
2.  计算自上次调用节流函数以来经过的实时时间量（我将称之为 dClock）。
3.  dCPU / dClock 是 CPU 使用百分比（一个 CPU）。如果它高于你想要的，增加你的睡眠时间，如果低于，减少睡眠时间。
4.  让您的线程休眠计算的时间。

根据您的看门狗如何计算 CPU 使用率，您可能需要使用[GetProcessAffinityMask()](http://msdn.microsoft.com/en-us/library/ms683213(VS.85).aspx)来找出系统有多少 CPU。dCPU / (dClock * CPUs) 是可用总 CPU 时间的百分比。

您仍然需要为初始睡眠时间和递增/递减量选择一些神奇的数字，但我认为可以调整该算法以使线程以相当接近确定的 CPU 百分比运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-05T08:03:01.397

在 linux 上，您可以使用 nice() 更改线程的调度优先级。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-05T07:23:45.390

我想不出您想要的任何跨平台方式（或任何有保证的方式句号），但是当您使用 GetTickCount 时，您可能对跨平台不感兴趣:)

我会使用进程间通信并设置密集的进程很好的级别来获得你需要的东西，但我不确定这是否适合你的情况。

编辑：我同意[伯纳德](https://stackoverflow.com/questions/1982/#1984)的观点，这就是为什么我认为一个过程而不是一个线程可能更合适，但它可能不适合你的目的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-06T09:01:41.877

问题是当你有工作要做时想让 CPU 空闲是不正常的。通常，您将后台任务设置为空闲优先级，并让操作系统处理调度它所有未被交互任务使用的 CPU 时间。

在我看来，问题在于看门狗进程。

如果您的后台任务受 CPU 限制，那么您希望它为任务占用所有未使用的 CPU 时间。

也许你应该看看修复看门狗程序？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-03T18:06:47.430

您可能能够更改线程的优先级，但更改最大利用率将需要轮询和黑客来限制正在发生的事情的数量，或者使用可以设置进程最大利用率的操作系统工具。但是，我没有看到您想要这样做的任何情况。

# python - Python：(1,2,3) 和 [1,2,3] 有什么区别，我应该什么时候使用它们？

> ID：1983
> 
> 赞同：56
> 
> 时间：2008-08-05T07:18:55.853
> 
> 标签：python, list, tuples

在许多地方，`(1,2,3)`（元组）和`[1,2,3]`（列表）可以互换使用。

我什么时候应该使用其中一种，为什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2008-08-05T13:22:43.030

从[Python 常见问题解答](http://www.python.org/doc/faq/general/#why-are-there-separate-tuple-and-list-data-types)：

> 列表和元组虽然在许多方面相似，但通常以完全不同的方式使用。元组可以被认为类似于 Pascal 记录或 C 结构；它们是相关数据的小集合，可能是不同类型的，作为一个组进行操作。例如，笛卡尔坐标适当地表示为两个或三个数字的元组。
> 
> 另一方面，列表更像其他语言中的数组。它们倾向于持有不同数量的对象，所有这些对象都具有相同的类型并且逐个操作。

通常按照惯例，您不会仅仅根据其（不）可变性来选择列表或元组。你会为完全不同的数据片段的小集合选择一个元组，其中一个成熟的类太重了，而一个任何合理大小的集合的列表，你有一个同质的数据集。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-08-05T07:27:40.610

该列表`[1,2,3]`是动态且灵活的，但这种灵活性是以速度为代价的。

元组`(1,2,3)`是固定的（不可变的），因此速度更快。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-08-07T11:21:56.097

*元组是创建复合*数据类型的一种快速灵活的方式。列表是对象列表的容器。

例如，您将使用 List 来存储班级中学生详细信息的列表。

该列表中的每个学生详细信息可能是一个 3 元组，其中包含他们的卷号、姓名和考试成绩。

```
`[(1,'Mark',86),(2,'John',34)...]` 
```

此外，由于元组是不可变的，它们可以用作字典中的键。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-08-15T18:00:37.467

元组的概念具有很强的表现力：

*   实际上，它们非常适合打包和解包值 ( `x,y=coord`)。

*   结合字典（哈希表），它们允许映射形式，否则需要许多级别的关联。例如，考虑标记 (x,y) 已找到。

    ```
    // PHP
    if (!isset($found[$x])) {
        $found[$x] = Array();
        $found[$x][$y] = true;
    } else if (!isset($found[$x][$y])) {
        $found[$x][$y] = true;
    }

    # Python
    found[(x,y)] = True # parens added for clarity 
    ```

*   列表应该与对其内容的操作的期望一起使用（因此各种提及不变性）。人们会想用一个列表来弹出、推送、拼接、切片、搜索、插入之前、插入之后等。

*   元组应该是对象的低级表示，其中进行了简单的比较，或者以可预测的方式提取第 n 个元素或 n 个元素等操作，例如前面给出的坐标示例。

*   最后，列表不是可散列的，因此使用字典（Perl 中的哈希表，PHP 中的关联数组）完成的映射类型必须使用元组完成。

    这是元组和字典的简单示例，最后一起：

    ```
    """
    couple is a tuple of two people
    doesLike is a dictionary mapping couples to True or False
    """
    couple = "john", "jane"
    doesLike = dict()
    doesLike[couple] = True
    doesLike["jane", "john"] = False # unrequited love :'( 
    ```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-06-25T11:14:19.710

`[1, 2, 3]`是一个列表，可以在其中添加或删除项目。
`(1, 2, 3)`是一个元组，一旦定义，就不能进行修改。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-08-15T16:38:59.597

每当我需要将一组项目传递给函数时，如果我希望函数不更改传入的值 - 我使用元组。

否则，如果我想拥有改变值的功能，我使用 list.

如果您使用外部库并且需要将值列表传递给函数并且不确定数据的完整性，请使用元组。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-08T06:06:33.237

正如其他人所提到的，列表和元组都是可用于存储 python 对象的容器。列表是可扩展的，它们的内容可以通过赋值来改变，另一方面，元组是不可变的。

此外，列表不能用作字典中的键，而元组可以。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-10-10T19:30:36.093

打开控制台并运行 python。试试这个：

```
 >>> list = [1, 2, 3]     
  >>> dir(list)
    ['__add__', '__class__', '__contains__', '__delattr__', '__delitem__', '__delsli
    ce__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getit
    em__', '__getslice__', '__gt__', '__hash__', '__iadd__', '__imul__', '__init__',
     '__iter__', '__le__', '__len__', '__lt__', '__mul__', '__ne__', '__new__', '__r
    educe__', '__reduce_ex__', '__repr__', '__reversed__', '__rmul__', '__setattr__'
    , '__setitem__', '__setslice__', '__sizeof__', '__str__', '__subclasshook__', 
'append', 'count', 'extend', 'index', 'insert', 'pop', 'remove', 'reverse', 'sort'] 
```

正如您可能看到最后一行列表中的最后一个有以下方法： **'append'、'count'、'extend'、'index'、'insert'、'pop'、'remove'、'reverse'、'sort '**

现在对元组尝试相同的操作：

```
>>> tuple = (1, 2, 3)
>>> dir(tuple)
    ['__add__', '__class__', '__contains__', '__delattr__', '__doc__', '__eq__', '__
    format__', '__ge__', '__getattribute__', '__getitem__', '__getnewargs__', '__get
    slice__', '__gt__', '__hash__', '__init__', '__iter__', '__le__', '__len__', '__
    lt__', '__mul__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__'
    , '__rmul__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'count', 'index'] 
```

此处仅显示列表方法中**的“计数”和“索引”**。

这是因为元组是不可变的，它们不支持任何修改。相反，它们在内部实现中更简单、更快。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-05-20T07:30:57.350

*   一个元组可能代表字典中的一个键，因为它是不可变的。
*   如果您有一组不需要随机访问的数据，请使用列表。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-08T06:48:52.137

如果您能找到适用于元组的解决方案，请使用它们，因为它强制不变性，这会驱使您走上更实用的道路。你几乎从不后悔走功能/不可变的道路。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-10-08T06:02:42.660

`[1,2,3]`是一个列表。

`(1,2,3)`是一个元组且不可变。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-03-31T09:14:03.780

(1,2,3) 和 [1,2,3] 在极少数情况下可以互换使用。

所以 (1,2,3) 是一个元组并且是不可变的。您希望进行的任何更改都需要覆盖该对象。

[1,2,3] 是一个列表，可以添加和删除元素。

List 比元组具有更多的功能。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-02-19T02:15:31.263

`(1,2,3)`是一个元组，`[1,2,3]`而是一个列表。元组是不可变的对象，而列表是可变的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-06-27T20:48:38.110

`(1,2,3)`是一个元组，`[1,2,3]`是一个列表。两者中的任何一个都表示数字序列，但请注意元组是不可变的，而列表是可变的 Python 对象。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-02-07T10:03:33.710

(1,2,3)-tuple [1,2,3]-list 列表是可变的，可以在其上执行各种操作，而 tuples 是不可变的，无法扩展。我们不能从 tuple 中添加、删除或更新任何元素一次它被创建。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-06-21T20:14:28.640

a = (1,2,3) 是一个元组，它是不可变的，这意味着您不能将任何内容添加到 a b = [1,2,3] 是 python 中的一个列表，它是不可变的，这意味着您可以对 'b' 进行更改删除或添加数字。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-08-19T04:14:59.727

简单来说，列表是可变的，而元组不是。因此，如果您想修改程序中的元素，即添加、删除或更改元素，请使用列表。但是，如果你不希望 tat 发生，可能是为了在 for 循环中设置序列等。去一个元组

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-10-08T16:48:07.107

`(1,2,3)`是不可变的，因此您无法添加或更改其中一项。相反，`[1,2,3]`它是可变的，因此您可以添加或更改项目。

# macros - LISP 宏能走多远？

> ID：1988
> 
> 赞同：50
> 
> 时间：2008-08-05T07:32:54.437
> 
> 标签：macros, lisp

我读过很多关于 LISP 可以动态重新定义语法的内容，大概是使用宏。我很好奇这实际上能走多远？你能重新定义语言结构，让它成为另一种语言的编译器吗？例如，您是否可以将 LISP 的功能性质更改为更面向对象的语法和语义，或者说具有更接近于 Ruby 之类的语法？

特别是，是否有可能使用宏摆脱括号地狱？我已经学会了足够的 (Emacs-)LISP 来使用我自己的微功能自定义 Emacs，但我很好奇宏在自定义语言方面能走多远。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2008-09-15T15:07:21.940

这是一个非常好的问题。

我认为这很微妙，但绝对可以回答：

宏不会停留在 s 表达式中。有关使用关键字（符号）编写的非常复杂的语言，请参见 LOOP 宏。因此，虽然您可以用括号开始和结束循环，但它内部有自己的语法。

例子：

```
(loop for x from 0 below 100
      when (even x)
      collect x) 
```

话虽如此，大多数简单的宏只使用 s 表达式。你会被“卡住”使用它们。

但是，就像 Sergio 回答的那样，s 表达式开始感觉正确。语法不碍事，您开始在语法树中编码。

至于阅读器宏，是的，你可以想象这样写：

```
#R{
      ruby.code.goes.here
  } 
```

但是您需要编写自己的 Ruby 语法解析器。

您还可以使用编译成现有 Lisp 结构的宏来模仿一些 Ruby 结构，例如块。

```
#B(some lisp (code goes here)) 
```

将转化为

```
(lambda () (some lisp (code goes here))) 
```

请参阅[此页面](http://rottcodd.wordpress.com/2007/11/29/lambda-shortcut/)了解如何操作。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2008-09-16T19:28:28.607

是的，你可以重新定义语法，让 Lisp 成为编译器。您可以使用“阅读器宏”来执行此操作，这与您可能正在考虑的普通“编译器宏”不同。

Common Lisp 具有为阅读器和阅读器宏定义新语法以处理该语法的内置工具。此处理在读取时完成（在编译或评估时间之前）。要了解有关在 Common Lisp 中定义阅读器宏的更多信息，请参阅 Common Lisp Hyperspec——您需要阅读[Ch. 2，“语法”](http://www.lispworks.com/documentation/HyperSpec/Body/02_.htm)和[Ch。23、《读者》](http://www.lispworks.com/documentation/HyperSpec/Body/23_.htm)。（我相信 Scheme 具有相同的功能，但我不太熟悉它——请参阅 Arc 编程语言的Scheme[源代码](http://arclanguage.org)[）](http://arclanguage.org/install)。

举个简单的例子，假设您希望 Lisp 使用花括号而不是圆括号。这需要类似于以下读者定义的内容：

```
;; { and } become list delimiters, along with ( and ).
(set-syntax-from-char #\{ #\( )
(defun lcurly-brace-reader (stream inchar) ; this was way too easy to do.
  (declare (ignore inchar))
  (read-delimited-list #\} stream t))
(set-macro-character #\{ #'lcurly-brace-reader)

(set-macro-character #\} (get-macro-character #\) ))
(set-syntax-from-char #\} #\) )

;; un-lisp -- make parens meaningless
(set-syntax-from-char #\) #\] ) ; ( and ) become normal braces
(set-syntax-from-char #\( #\[ ) 
```

你告诉 Lisp { 就像 a ( 并且 } 就像 a )。然后，您创建一个函数 ( `lcurly-brace-reader`)，读者在看到 { 时将调用该函数，并使用`set-macro-character`该函数将该函数分配给 {。然后你告诉 Lisp ( 和 ) 就像 [ 和 ] （也就是说，没有意义的语法）。

您可以做的其他事情包括，例如，[创建新的字符串语法](http://www.weitz.de/cl-interpol/)或使用 [ 和 ] 来包含中缀符号并将其处理为 S 表达式。

您还可以远远超出此范围，使用您自己的宏字符重新定义整个语法，这些宏字符将触发阅读器中的操作，所以天空真的是极限。这只是[Paul Graham](http://www.paulgraham.com/icad.html)和[其他人](http://gigamonkeys.com/book/introduction-why-lisp.html)一直说 Lisp 是编写编译器的好语言的原因之一。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2008-08-26T09:49:02.323

我不是 Lisp 专家，哎呀，我什至不是 Lisp 程序员，但在对该语言进行了一些试验后，我得出的结论是，一段时间后括号开始变得“​​不可见”，你开始看到代码为你希望它成为。您开始更多地关注通过 s-exprs 和宏创建的句法结构，而不是列表和括号文本的词汇形式。

如果您利用有助于缩进和语法着色的良好编辑器，则尤其如此（尝试将括号设置为与背景非常相似的颜色）。

您可能无法完全替换该语言并获得“Ruby”语法，但您不需要它。多亏了语言的灵活性，如果你愿意，你可以最终拥有一种感觉就像你正在遵循“Ruby 编程风格”的方言，无论这对你意味着什么。

我知道这只是一个经验观察，但我认为当我意识到这一点时，我有过 Lisp 启蒙时刻之一。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2008-09-16T19:29:54.763

一遍又一遍，Lisp 的新手想要“摆脱所有的括号”。它持续几个星期。没有一个项目能够在通常的 S 表达式解析器之上构建一个严肃的通用编程语法，因为程序员总是更喜欢你目前认为的“括号地狱”。需要一点时间来适应，但并不多！一旦你习惯了它，你就会真正体会到默认语法的可塑性，回到只有一种方法来表达任何特定编程结构的语言真的很糟糕。

话虽如此，Lisp 是构建领域特定语言的绝佳基础。与 XML 一样好，甚至更好。

祝你好运！

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2008-10-05T15:03:31.263

我见过的对 Lisp 宏的最佳解释是

[https://www.youtube.com/watch?v=4NO83wZVT0A](https://www.youtube.com/watch?v=4NO83wZVT0A)

从大约 55 分钟开始。这是“实用通用 Lisp”的作者 Peter Seibel 的演讲视频，这是最好的 Lisp 教科书。

Lisp 宏的动机通常很难解释，因为它们真的在太长而无法在简单教程中呈现的情况下发挥作用。彼得提出了一个很好的例子。你可以完全掌握它，而且它可以很好地、正确地使用 Lisp 宏。

您问：“您能否将 LISP 的功能性质更改为更面向对象的语法和语义”。答案是肯定的。事实上，Lisp 最初根本没有任何面向对象编程，这并不奇怪，因为 Lisp 早在面向对象编程之前就已经存在了！但是当我们在 1978 年第一次了解 OOP 时，我们能够很容易地将它添加到 Lisp 中，其中包括使用宏。最终，Common Lisp Object System (CLOS) 被开发出来，这是一个非常强大的面向对象的编程系统，可以优雅地融入 Lisp。整个东西都可以作为扩展加载——没有内置的！这一切都是用宏完成的。

Lisp 有一个完全不同的特性，称为“阅读器宏”，可用于扩展语言的表面语法。使用阅读器宏，您可以制作具有类 C 或类 Ruby 语法的子语言。他们在内部将文本转换为 Lisp。大多数真正的 Lisp 程序员没有广泛使用这些，主要是因为很难扩展交互式开发环境来理解新语法。例如，Emacs 缩进命令会被新语法混淆。但是，如果您精力充沛，Emacs 也是可扩展的，您可以教它学习新的词汇语法。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2008-08-26T09:36:27.020

常规宏对对象列表进行操作。最常见的是，这些对象是其他列表（从而形成树）和符号，但它们可以是其他对象，例如字符串、哈希表、用户定义的对象等。这些结构称为[s-exps](http://en.wikipedia.org/wiki/S-expression)。

因此，当您加载源文件时，您的 Lisp 编译器将解析文本并生成 s-exp。宏对这些进行操作。这很有效，这是在 s-exps 精神内扩展语言的绝妙方式。

此外，上述解析过程可以通过“阅读器宏”进行扩展，让您自定义编译器将文本转换为 s-exp 的方式。然而，我建议你接受 Lisp 的语法，而不是把它变成别的东西。

当您提到 Lisp 的“函数性质”和 Ruby 的“面向对象的语法”时，您听起来有点困惑。我不确定“面向对象的语法”应该是什么，但 Lisp 是一种多范式语言，它*非常*好地支持面向对象的编程。

顺便说一句，当我说 Lisp 时，我的意思是[Common Lisp](http://en.wikipedia.org/wiki/Common_Lisp)。

我建议你放下偏见，[诚实地尝试 Lisp](http://gigamonkeys.com/book/)。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2008-09-16T16:23:18.287

括号地狱？我看不到括号：

```
(function toto) 
```

比在：

```
function(toto); 
```

而在

```
(if tata (toto)
  (titi)
  (tutu)) 
```

不超过：

```
if (tata)
  toto();
else
{
  titi();
  tutu();
} 
```

我看到更少的括号和';' 尽管。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2008-09-17T12:14:53.087

你所问的有点像问如何成为一名巧克力专家，这样你就可以从你最喜欢的巧克力蛋糕中去除所有地狱般的棕色东西。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2008-09-15T12:07:06.287

是的，你可以从根本上改变语法，甚至逃避“括号地狱”。为此，您需要定义新的阅读器语法。查看阅读器宏。

然而，我确实怀疑要达到 Lisp 专业水平来编写此类宏，您需要将自己沉浸在语言中，以至于您将不再考虑括号“地狱”。也就是说，当你知道如何避免它们时，你就会接受它们是一件好事。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-08-05T07:40:26.980

如果你想让 lisp 看起来像 Ruby，请使用 Ruby。

可以以非常类似于 lisp 的方式使用 Ruby（和 Python），这是它们如此迅速地获得认可的主要原因之一。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-17T00:30:43.247

请参阅此示例，了解阅读器宏如何通过 XML 模板等复杂任务扩展 lisp 阅读器：

[http://common-lisp.net/project/cl-quasi-quote/present-class.html](http://common-lisp.net/project/cl-quasi-quote/present-class.html)

这个**用户库**在编译时将 XML 的静态部分编译为 UTF-8 编码的文字字节数组，这些字节数组准备好写入到网络流中。并且它们可以在普通的 lisp 宏中使用，它们是正交的……逗号字符的位置会影响哪些部分是恒定的，哪些部分应该在运行时进行评估。

更多详细信息，请访问：[http ://common-lisp.net/project/cl-quasi-quote/](http://common-lisp.net/project/cl-quasi-quote/)

另一个用于 Common Lisp 语法扩展的项目： http: [//common-lisp.net/project/cl-syntax-sugar/](http://common-lisp.net/project/cl-syntax-sugar/)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-08-05T07:45:14.020

@sparkes

有时 LISP 是明确的语言选择，即 Emacs 扩展。如果我愿意的话，我确信我可以使用 Ruby 来扩展 Emacs，但是 Emacs 被设计为使用 LISP 进行扩展，所以在这种情况下使用它似乎是有意义的。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-08-06T12:14:12.213

这是一个棘手的问题。由于 lisp 在结构上已经非常接近解析树，因此大量宏和在解析器生成器中实现自己的迷你语言之间的区别不是很清楚。但是，除了开头和结尾的括号外，您很容易得到看起来一点也不像 lisp 的东西。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-19T10:43:32.133

让我大吃一惊的宏的用途之一是针对 DB 的 SQL 请求的编译时验证。

一旦你意识到你在编译时手头有完整的语言，它就会打开有趣的新视角。这也意味着您可以以有趣的新方式自爆（比如渲染编译不可重现，这很容易变成调试的噩梦）。

# c# - 任何非法跨线程操作异常的解决方案？

> ID：1994
> 
> 赞同：21
> 
> 时间：2008-08-05T07:45:38.310
> 
> 标签：c#, data-binding

当您在 C# 中进行数据绑定时，更改数据的线程也会导致控件发生更改。但是如果这个线程不是创建控件的那个线程，你会得到一个非法跨线程操作异常。

有没有办法防止这种情况发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-05T07:51:54.727

您应该能够执行以下操作：

```
if (control.InvokeRequired)
{
    control.Invoke(delegateWithMyCode);
}
else
{
    delegateWithMyCode();
} 
```

InvokeRequired 是 Controls 上的一个属性，用于查看您是否在正确的线程上，然后 Invoke 将在正确的线程上调用委托。

更新：实际上，在我上一份工作中，我们做了这样的事情：

```
private void SomeEventHandler(Object someParam)
{
    if (this.InvokeRequired)
    {
        this.Invoke(new SomeEventHandlerDelegate(SomeEventHandler), someParam);
    }

    // Regular handling code
} 
```

这消除了对 else 块的需要，并且收紧了代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-05T07:56:53.140

由于我没有测试用例，我不能保证这个解决方案，但在我看来，类似于用于更新不同线程中的进度条（使用委托）的场景在这里适合。

```
public delegate void DataBindDelegate();
public DataBindDelegate BindData = new DataBindDelegate(DoDataBind);

public void DoDataBind()
{
    DataBind();
} 
```

如果数据绑定需要由特定线程完成，那么让该线程完成工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-08T16:19:17.923

在 WPF 和 Silverlight 中，绑定基础结构负责切换到 UI 线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-05T08:06:42.840

如果线程调用是“非法的”（即 DataBind 调用会影响未在调用它的线程中创建的控件），那么您需要创建一个委托，以便即使 DataBind 的决策/准备没有完成控制创建线程，它们的任何结果修改（即DataBind（））都将是。

你会像这样从工作线程调用我的代码：

```
this.BindData.Invoke(); 
```

然后，这将导致原始线程进行绑定，这（假设它是创建控件的线程）应该工作。

# c# - 测试对象类型的最有效方法

> ID：1995
> 
> 赞同：23
> 
> 时间：2008-08-05T07:49:11.547
> 
> 标签：c#, .net, double, int

我将值存储为字符串，`DataTable`其中每个值都可以真正表示一个`int`, `double`, or `string`（在从外部数据源导入过程中，它们都被转换为字符串）。我需要测试并查看每个值的真正类型。

什么对应用程序更有效（或者没有实际区别）？

1.  尝试转换为`int`（然后`double`）。如果转换有效，则返回`true`. 如果抛出异常，则返回`false`。
2.  正则表达式旨在匹配`int`or的模式`double`
3.  还有什么方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-05T07:54:12.613

将使用 double.TryParse，它具有性能优势。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-05T08:04:22.093

我想说，不要太担心这样的微观表现。最好只是让一些东西工作，然后让它尽可能清晰、简洁和易于阅读。你能做的最糟糕的事情就是牺牲可读性以获得微不足道的性能。

最后，处理性能问题的最佳方法是将它们保存到当您有数据表明存在实际性能问题时……否则您将花费​​大量时间进行微优化并实际上导致更高的维护成本稍后的。

如果您发现这种解析情况确实是您的应用程序的瓶颈，那么是时候尝试找出解决问题的最快方法是什么了。我认为杰夫（和许多其他人）已经在博客上写了很多关于这类事情的文章。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-10T17:43:14.273

根据您是否使用优化进行编译，您将获得不同方法的不同结果。你基本上有几个选择：

```
object o;

//checking with is
o is int

//check type
o.GetType() != typeof( int )

//cast and catch exception
try{ int j = (int) o; } 
catch {}

//use the tryparse
int.TryParse( Convert.ToString( o ), out j ) 
```

您可以轻松地设置一个控制台应用程序，尝试这 10,000 次中的每一个并返回每个的持续时间（测试 o 何时为 int 以及何时为其他值）。

如果对象确实持有 int，则该`try-catch`方法是最快的，如果不持有 int，则该方法是迄今为止最慢的（甚至比 还要慢`GetType`）。 `int.TryParse`如果你有一个字符串，它会很快，但如果你有一个未知的对象，它会更慢。

有趣的是，在 .Net 3.5 和优化开启的情况下，检查的时间与o 实际上是 int`o is int`的时间相同。如果 o 实际上是别的东西，它只会稍微慢一点。`try-catch``o is int`

烦人的是，如果您执行以下操作，FxCop 会发出警告：

```
if( o is int )
    int j = (int) o; 
```

但我认为这是 FxCop 中的一个错误——它不知道 int 是一种值类型，因此建议您`o as int`改用它。

如果您的输入始终是字符串`int.TryParse`是最好的，否则`is`操作员是最快的。

因为你有一个字符串，我会看看你是否需要知道它是一个 int，而不是一个 double。如果`int.TryParse`通过，那么`double.TryParse`您可以减少一半的检查次数 - 返回双精度或字符串，并在您期望一个 int 时对双精度进行下限。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-23T21:38:19.677

The trouble you have is that there could be situations where the answer could be all three types.

3 could be an int, a double or a string!

It depends upon what you are trying to do and how important it is that they are a particular type. It might be best just to leave them as they are as long as you can or, alternatively, some up with a method to mark each one (if you have control of the source of the original string).

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-05T08:02:01.087

我个人会使用 int.tryparse，然后使用 double.tryparse。这些方法的性能非常快。他们都返回一个布尔值。如果两者都失败，那么根据您定义数据的方式，您有一个字符串。