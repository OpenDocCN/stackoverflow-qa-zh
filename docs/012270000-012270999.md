# StackOverflow 问答 12270000-12270999

# websphere-7 - WebSphere Application Server v6.1 中的监控工具

> ID：12270006
> 
> 赞同：0
> 
> 时间：2012-09-04T19:21:35.653
> 
> 标签：websphere-7, websphere-6.1

如何启用 PMI（性能监控基础架构）数据收集以及 WebSphere Application Server 中“PMI”的用途是什么？

什么是“核心组”WebSphere Application Server？

WebSphere Application Server 中的 JSESSION ID 和 CLONE ID 有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:23:02.677

要启用 PMI 数据收集，您应该阅读[WebSphere 文档](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/topic/com.ibm.websphere.express.doc/info/exp/ae/tprf_pmi_encoll.html)。

这`JSESSIONID`是 servlet 容器用来识别当前会话的标准 cookie（它是**Session ID**）。WebSphere 在集群环境中工作时，为该 cookie使用一个[特殊值，其中包括](https://www.ibm.com/developerworks/mydeveloperworks/blogs/Dougclectica/entry/websphere_session_ids22?lang=en)**Session ID**、**Cache ID**和**Clone/Partition ID**。该列表中的最后一个标识集群内的特定 WebSphere 服务器实例。

关于核心组：

> 核心组是一个高可用域，由同一单元中的一组进程组成，可以直接建立高可用性关系。高可用性组件只能故障转移到同一核心组中的另一个进程，并且复制只能在同一核心组的成员之间进行。

[文档](http://publib.boulder.ibm.com/infocenter/wsdoc400/v6r0/index.jsp?topic=/com.ibm.websphere.iseries.doc/info/ae/ae/crun_ha_coregroup.html)中有关它们的更多信息。

# ruby-on-rails-3 - 在从一个 S3 读取图像并写入另一个 S3 时获取 Excon::Errors::SocketError？

> ID：12270007
> 
> 赞同：6
> 
> 时间：2012-09-04T19:21:38.000
> 
> 标签：ruby-on-rails-3, amazon-s3, carrierwave

我们有一个登台服务器设置来使用与我们的生产服务器不同的 S3 存储桶，但这需要我们手动同步存储桶之间的图像，以便在登台时查看图像。由于我们有数以万计的图像（每天都在增长），这是不可行的。

无论如何配置 Carrierwave 以从我们的生产 S3 读取图像，但将任何新图像写入暂存 S3（以免污染我们的生产图像存储）？

* * *

**更新**：我已经尝试为 CarrierWave 创建一个自定义存储引擎来执行此操作（请参阅[此要点](https://gist.github.com/3672275)——除第 228 行外，与雾存储引擎基本相同），但在尝试获取时出现此错误图片：

```
 Excon::Errors::SocketError (hostname does not match the server certificate (OpenSSL::SSL::SSLError)):
   lib/carrier_wave/storage/dual_fog.rb:214:in `exists?'
   lib/carrier_wave/storage/dual_fog.rb:228:in `public_url'
   lib/carrier_wave/storage/dual_fog.rb:267:in `url' 
```

有谁知道这是为什么？正如您从 gist 中的代码中看到的那样，我希望此解决方案能够从暂存中读取，并在暂存时找不到图像时回退到生产。但是，所有写操作都应该只进入暂存阶段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-18T21:32:35.437

有几种使用 S3 的方法。如果您的存储桶中有点并且想要执行 SSL，则需要强制您的 URL 看起来像这样：`https://s3.amazonaws.com/staging.asset.domain.com/blah`. 您不能使用`https://yourdomain.com/blah`，因为亚马逊没有您的证书。您也不能使用`https://staging.asset.domain.com.s3.amazonaws.com/blah`，因为证书只能深入一级。（即如果你的桶没有点，它会工作。）

# java - 具有 4162 行的 ResultSet 仅迭代第一行

> ID：12270014
> 
> 赞同：4
> 
> 时间：2012-09-04T19:22:13.783
> 
> 标签：java, sql, resultset

ResultSet videoFilenames 应该有 4162 行（我在数据库中测试了查询），但是 while 循环“while (videoFilenames.next())”只迭代一次 - 在 ResultSet 中的第一个文件名之后，while 循环刚刚结束！谁能帮我弄清楚为什么？

```
/*
 * Run: java -cp .:ojdbc6.jar FindVideosWithoutTranscodes
 */

import java.io.*;
import java.sql.*;

public class FindVideosWithoutTranscodes {

    public static void main(String[] args) throws Exception {
        //connect to database
        Class.forName("oracle.jdbc.OracleDriver");
        String serverName = "***.***.***.***";
        String portNumber = "****";
        String sid = "*****";
        String url = "jdbc:oracle:thin:@" + serverName + ":" + portNumber + ":" + sid;
        String username = "*****";
        String password = "*****";
        Connection conn = DriverManager.getConnection(url, username, password);
        Statement stmt = conn.createStatement();

        //create output file
        BufferedWriter out = new BufferedWriter(new FileWriter("mp2_files_without_transcodes.txt"));

        //get ResultSet of mp2 filenames
        ResultSet videoFilenames = stmt.executeQuery("select filename from archivefile where filename like '%.mp2'");

        System.out.println("Making list of mp2 files without transcodes...");

        //for each mp2 file
        String filename;
        ResultSet smallTranscode;
        ResultSet largeTranscode;
        while (videoFilenames.next()) {
            filename = videoFilenames.getString(1);

            //check for -700.mov file
            System.out.println(filename.substring(0, filename.length() - 4) + "-700.mov"); //test
            smallTranscode = stmt.executeQuery("select * from archivefile where filename='" + filename.substring(0, filename.length() - 4) + "-700.mov'");
            if (!smallTranscode.next())
                out.write(filename + "\n");
            else {
                //check for -6500.mov file
                System.out.println(filename.substring(0, filename.length() - 4) + "-6500.mov"); //test
                largeTranscode = stmt.executeQuery("select * from archivefile where filename='" + filename.substring(0, filename.length() - 4) + "-6500.mov'");
                if (!largeTranscode.next())
                    out.write(filename + "\n");
                largeTranscode.close();
            }
            smallTranscode.close();
        }

        System.out.println("Done.");

        out.close();
        videoFilenames.close();

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:28:35.287

> 每个 Statement 对象只能同时打开一个 ResultSet 对象

[http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html)

因此，一旦使用相同的 Statement 实例在 while 循环中执行第二个查询，您将关闭 videoFilenames ResultSet。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T19:28:02.277

[Java 声明文档](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html)说；

> 默认情况下，每个 Statement 对象只能同时打开一个 ResultSet 对象。因此，如果一个 ResultSet 对象的读取与另一个 ResultSet 对象的读取交错，则每个对象都必须由不同的 Statement 对象生成。Statement 接口中的所有执行方法都会隐式关闭语句的当前 ResultSet 对象（如果存在打开的对象）。

换句话说，您不能循环遍历一个 ResultSet 并使用相同的`stmt`对象创建另一个，这将关闭第一个 ResultSet 并结束循环。

# c# - 如何在运行时检查应用程序当前是否正在使用对象，或者是否已被垃圾收集？

> ID：12270016
> 
> 赞同：0
> 
> 时间：2012-09-04T19:22:31.407
> 
> 标签：c#, garbage-collection, dispose, object-reference

这个问题几乎说明了一切。在我的代码中的某处，我`ObjectX`用`new`关键字实例化了一个对象。就内存和其他资源而言，现在`ObjectX`是昂贵的。我需要一种方法来在运行时检查`ObjectX`当前是否处于活动状态并被应用程序使用，或者是否已被垃圾收集。
任何使用对对象的引用的尝试都会使对象被使用。那我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:26:57.960

好吧，你可以坚持[`WeakReference`](http://msdn.microsoft.com/en-us/library/system.weakreference.aspx)下去。这不会阻止它被垃圾收集，您可以使用[`IsAlive`](http://msdn.microsoft.com/en-us/library/system.weakreference.isalive.aspx).

但是，如果您需要这种东西，通常会有点设计气味。*为什么*需要执行此检查？

# javascript - 打开浏览器而不是下载pdf

> ID：12270017
> 
> 赞同：1
> 
> 时间：2012-09-04T19:22:33.457
> 
> 标签：javascript, http, browser, download

目前我正在回应一个请求

```
Content-Type: application/pdf
Content-Disposition: attachment; filename=xxx.pdf 
```

在前端，我只是将 iframe 附加到正文，其 url 指向 pdf 端点

这会导致 chrome、ff 和 opera 下载 pdf 而不是在页面中打开它

有没有办法让浏览器打开pdf而不是下载它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:16:41.860

看起来浏览器没有我想象的那么先进！这只能在 Chrome 或其他带有相关插件的浏览器中实现。

# c# - 使用 Group By Linq 进行计数

> ID：12270018
> 
> 赞同：31
> 
> 时间：2012-09-04T19:22:37.570
> 
> 标签：c#, linq, count, group-by, distinct

我有一个看起来像这样的对象：

```
Notice 
{
    string Name,
    string Address 
} 
```

在`List<Notice>`我想输出所有不同的名称以及特定名称在集合中出现的次数。

例如：

```
Notice1.Name="Travel"
Notice2.Name="Travel"
Notice3.Name="PTO"
Notice4.Name="Direct" 
```

我想要输出

```
Travel - 2
PTO - 1
Direct -1 
```

我可以使用此代码获得不同的名称，但我似乎无法在 1 linq 语句中获得所有计数

```
 theNoticeNames= theData.Notices.Select(c => c.ApplicationName).Distinct().ToList(); 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-04T19:26:39.533

```
var noticesGrouped = notices.GroupBy(n => n.Name).
                     Select(group =>
                         new
                         {
                             NoticeName = group.Key,
                             Notices = group.ToList(),
                             Count = group.Count()
                         }); 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-09-04T19:30:00.070

Leniel 答案的变体，使用[不同的重载`GroupBy`](http://msdn.microsoft.com/en-us/library/bb549393.aspx)：

```
var query = notices.GroupBy(n => n.Name, 
                (key, values) => new { Notice = key, Count = values.Count() }); 
```

基本上它只是忽略了`Select`电话。

# php - 需要在php中添加年份、品牌、型号

> ID：12270024
> 
> 赞同：-4
> 
> 时间：2012-09-04T19:23:08.300
> 
> 标签：php, html

我有一个报价请求页面，它由 php 处理。这是我到目前为止所拥有的..

```
$e_body = "You have been contacted by $name, their additional message is as follows." . PHP_EOL . PHP_EOL;
     $e_content = "\"$comments\"" . PHP_EOL . PHP_EOL;

**---THIS IS WHERE I WANT YEAR, MAKE, AND MODEL TO BE DISPLAYED AND NOT SIDE BY SIDE--- 
     Vehicle Year: using $year
     Vehicle Make: using $make
     Vehicle Model: using $model**

     $e_reply = "You can contact $name via email, $email";
     if ($phone) $e_reply .= " or via phone $phone.";        

     $msg = wordwrap($e_body . $e_content . $e_reply,70); 
```

如果您有任何好的意见，请告诉我。我不怎么使用 php，否则我可能会很容易地将其淘汰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:00:37.970

如果您使用`$_POST`数组通过联系表单接收内容，您可以执行以下操作：

```
$year = $_POST["year"];
$make = $_POST["make"];
$model = $_POST["model"]; 
```

然后将其添加到您的其余内容中：

```
$e_content. = "Year: " . $year . "Make: " . $make . "Model: " . $model; 
```

# css - 特定于类的第 n 个类型（奇数）

> ID：12270027
> 
> 赞同：1
> 
> 时间：2012-09-04T19:23:35.827
> 
> 标签：css, css-selectors

我找到了一个 CSS 教程来设置表格的样式，但在我的页面上还有其他表格。所以我不知道如何在这里使用选择器。`tr:nth-of-type(odd)`是选择器。但我希望它仅用于具有`id`或`class`命名的表`playerslist`。

```
<table id="playerslist">
    <thead>
        <tr>
            <th>Player Name</th>
            <th>Player #</th>
            <th>Team</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Simon</td>
            <td>25</td>
            <td>Team A</td>
        </tr>
        <tr>
            <td>Richard</td>
            <td>5</td>
            <td>Team B</td>
        </tr>
    </tbody>
</table> 
```

任何想法如何定位`tr:nth-of-type(odd)`，`th`以及`td`带有 of 的表的`id`元素`playerslist`？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T19:25:09.053

在样式定义中指定表的类或 ID：

```
table#playerslist tr:nth-of-type(odd) {
   // your styles
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T19:27:02.020

要使用 a 或被调用来定位a的元素`tr:nth-of-type(odd)`，请使用`table``id``class``playerslist`

```
table#playerslist tr:nth-of-type(odd), 
table.playerslist tr:nth-of-type(odd)
 {/* styling */} 
```

要定位 have 的`th`and`td`元素`table`，请`id='playerslist'`使用

```
table#playerslist th, 
table#playerslist td {/* styling */} 
```

# .net - WCF - SignedXml.CheckSignature 在签名的肥皂体上失败

> ID：12270032
> 
> 赞同：1
> 
> 时间：2012-09-04T19:23:57.463
> 
> 标签：.net, wcf, x509certificate, xml-dsig

我正在尝试验证签名 SOAP 消息上的签名。（只是为了解决这个问题，我完全无法控制我收到的消息）消息的正文由 Java 设备签名和发送。

SignedXml.CheckSignature 方法失败，但我确定我收到的消息是正确的。

相关位：

```
 Dim sdoc As New SignedXml(doc)
        Dim nodeList As XmlNodeList = doc.GetElementsByTagName("Signature", "http://www.w3.org/2000/09/xmldsig#")
        sdoc.LoadXml(CType(nodeList.Item(0), XmlElement))
        Dim result As Boolean = sdoc.CheckSignature(cert, False)
        'Also tried sdoc.CheckSignature() 
```

签名：

```
 <E:Envelope xmlns:E="http://schemas.xmlsoap.org/soap/envelope/">
      <SOAP:Header xmlns:SOAP="http://schemas.xmlsoap.org/soap/envelope/">
         <SOAP-SEC:Signature SOAP:mustUnderstand="1" xmlns:SOAP-SEC="http://schemas.xmlsoap.org/soap/security/2000-12">
            <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
              <SignedInfo>
                <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" />
                <Reference URI="#Body">
                  <Transforms>
                    <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                  </Transforms>
                  <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
                   <DigestValue>xxxc</DigestValue>
                </Reference>
             </SignedInfo>
      <SignatureValue>xxx</SignatureValue>
            <KeyInfo>
              <X509Data>
                <X509Certificate />
                <X509IssuerSerial>
                  <X509IssuerName>OU=www.verisign.com/CPS Incorp.by Ref. LIABILITY LTD.(c)97 VeriSign, OU=VeriSign International Server CA - Class 3, OU="VeriSign, Inc.", O=VeriSign Trust Network</X509IssuerName>
                  <X509SerialNumber>xxx</X509SerialNumber>
                </X509IssuerSerial>
             </X509Data>
            </KeyInfo>
          </Signature>
      </SOAP-SEC:Signature>
    </SOAP:Header>
    <E:Body id="Body"> 
```

# java - 如何在 javascript 中触发 Spring WebFlow 转换

> ID：12270039
> 
> 赞同：0
> 
> 时间：2012-09-04T19:24:35.483
> 
> 标签：java, spring, spring-mvc, spring-webflow

我有一个 Spring WebFlow2 项目，如果用户单击“loadschools”提交按钮，我将调用我的控制器并加载状态，然后根据选中的单选按钮重新显示具有新状态的同一屏幕。如果用户单击单选按钮，我想删除“loadschool”提交按钮并运行 java 脚本。可以这样做吗？我如何告诉 webflow 过渡运行？

```
<view-state id="SchoolVisitReport" view="SchoolVisitReport.jsp" model="visit" >
 <transition on="submit" to="addVisit">
   <evaluate expression="flowActions.validateVisit(visit, messageContext)"/>
 </transition>
 <transition on="cancel" to="endState" bind="false"/>
 <transition on="loadSchools" to="SchoolVisitReport" >
    <evaluate expression="flowActions.initializeSelectableStates(visit)" result="flowScope.selectableStates"/>
 </transition>
</view-state> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:37:22.507

`onchange='window.location="${flowExecutionUrl}&_eventId=loadSchools"'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:56:02.370

对于您的第二个问题，请尝试

```
<script type="text/javascript">
                    Spring.addDecoration(new Spring.AjaxEventDecoration({
                        elementId : "radiobuttonId",
                        formId : "visitFormId",
                        event : "onChange",
                        params : {
                            _eventId : "loadSchools",
                            fragments : "body"
                        }
                    }));
                </script> 
```

并查看表单是否被提交

# orchardcms - 在 Orchard CMS 中链接内容部分

> ID：12270042
> 
> 赞同：2
> 
> 时间：2012-09-04T19:24:49.360
> 
> 标签：orchardcms

让我先说我对 Orchard 开发非常陌生。:-)

我正在为 Orchard 创建一个电子商务模块，1）在前端显示产品图像，2）在后端（管理员）允许输入产品和数据（价格、手头数量、等），客户，订单等）。

对于产品，我已经创建了 ProductCategory contentpart（名称、CreatedOn 和 Active）。我想创建一个将链接到 ProductCategory 的 ProductSubCategory 内容部分（就像数据库中的外键）。

怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T01:48:32.267

我在寻找相同答案时遇到了您的问题，我在 OrchardCMS GitHub 文档中找到了它：

[创建 1-n 和 nn 关系](https://github.com/OrchardCMS/OrchardDoc/blob/master/Documentation/Creating-1-n-and-n-n-relations.markdown)

# knockout.js - 淘汰赛 - 在集合中呈现一个单独的模型对象（在数据表中不呈现所有记录）

> ID：12270043
> 
> 赞同：1
> 
> 时间：2012-09-04T19:24:51.623
> 
> 标签：knockout.js, model

我有一个[JSFiddle](http://jsfiddle.net/JpJQE/5/)，尽管我似乎遇到了问题。在 viewModel.showDetails 中，我似乎无法调用 getter 函数来返回模型值。我在本地没有这个问题。

然而，我真正想要做和解决的问题是只呈现在“结果”面板顶部的列表中单击的单个药物的表格行。现在，它正在渲染所有药物，而我只希望它列出您单击的药物。

我已经包含了我正在处理的从服务器返回的数据。这是 JavaScript 面板顶部的数据对象。

然后我为每条记录添加一个“showModal”属性。它设置为假。理论上，这是我决定在表格中渲染这个模型对象的标志，即我们只想显示这个单独的模型对象，而不是全部。

表格的可见性与“showDetails”相关联，该“showDetails”在单个模型对象（从上面的列表中单击的药物）上切换 showModal 属性。这就是我在小提琴中遇到吸气剂错误的地方。

任何人都知道如何限制我在表格中的渲染？这是我在本地获得的一个非常减少的情况，我不确定为什么我不能如上所述调用 obj.showModal() 来检索值，但希望这能让您了解我在做什么.

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:42:40.377

**已修复**： http: [//jsfiddle.net/JpJQE/7/](http://jsfiddle.net/JpJQE/7/) （**注意**：knockout.mapping.js 可能无法在此 jsFiddle 中加载。由于某种原因，我的计算机拒绝连接到 raw.github.com。您可以替换托管资源带有工作链接）

你走在正确的轨道上，但有点过于复杂了。您不需要为数组中的每个项目添加新属性。您只需要跟踪要显示的项目。前任：

```
var viewModel = ko.mapping.fromJS(data);
viewModel.visibleDrug = ko.observable();
viewModel.showDetails = function(drug)
{
    viewModel.visibleDrug(drug.pdlId);
}

ko.applyBindings(viewModel); 
```

此外，如果您`visible`在与您的 相同的绑定中使用 a `foreach`，那么您的`visible`绑定将在父级别而**不是**项目级别的范围内。因此，这将显示或隐藏**所有**药物。要区分数组的项目，您需要将`visible`绑定放在`foreach`循环中。前任：

```
 <tbody data-bind="foreach: preferredDrugs"> 
        <!-- ko if: $root.visibleDrug() == pdlId -->
            ... repeating content ...
        <!-- /ko -->
    </tbody> 
```

​</p>`

# javascript - Onclick() 函数在工作

> ID：12270046
> 
> 赞同：-1
> 
> 时间：2012-09-04T19:24:59.573
> 
> 标签：javascript

全部！我在使用简单的 onclick 方法时遇到问题。请帮帮我。这是代码......当我点击按钮时，什么都没有发生。

```
window.onload=initall();
var xhr = false;

function initall(){

    var btn=document.getElementById('btn');

    btn.onclick=alert('hi');
}

<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">

<title>Untitled Document</title>

<script type="text/javascript" src="testjs.js"></script>
</head>

<body>
<input type="text" required name="id">
<input type="button"  id="btn" value="send">
<div id="result"></div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:27:03.697

Onclick 应该是一个函数，而不是一个语句。尝试

```
btn.onclick=function(){ 
  alert('hi');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T19:28:35.460

```
window.onload=initall(); 
```

**调用**该函数`initall`并分配作为事件处理程序的*返回值。*`initall`也就是说，`initall`立即执行而不是在`load`事件触发时执行。
类似的`btn.onclick=alert('hi');`。但在这两种情况下，返回值都不是函数。

您必须为这些属性分配**函数**，然后在事件发生时调用它们。

```
function initall(){
    var btn = document.getElementById('btn');

    btn.onclick = function() { // creates and assigns the function at once
        alert('hi');
    };
}

window.onload = initall; // assign the function reference, no `()`. 
```

我建议[阅读 quirksmode.org 上的优秀教程](http://www.quirksmode.org/js/introevents.html)以了解事件处理，当然还有[MDN JavaScript Guide](https://developer.mozilla.org/en/JavaScript/Guide) for the JavaScript basics。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-04T07:30:29.877

```
Try this for onclick javascript function call   

    function initall(){

        var btn=document.getElementById('btn');

        btn.onclick=alert('hi');
    }
    <!DOCTYPE HTML>
    <html>
    <head>
    <meta charset="utf-8">

    <title>Untitled Document</title>

    <script type="text/javascript" src="testjs.js"></script>
    </head>

    <body>
    <input type="text" required name="id">
    <input type="button"  id="btn" value="send" onclick="javascript:initall();">
    <div id="result"></div>
    </body>

    </html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T19:28:16.957

试试这个：http: [//jsfiddle.net/uxfD4/](http://jsfiddle.net/uxfD4/)

onclick 赋值接受一个函数。您的代码所做的是评估警报（'hi'），返回 null。

# tfs - 在 TFS 中，如何在签入时覆盖“签入时保持签出”设置？

> ID：12270050
> 
> 赞同：3
> 
> 时间：2012-09-04T19:25:10.630
> 
> 标签：tfs

在 Team Foundation Server 中，我想使用该设置来“在签入时保持签出项目”处于活动状态，但我最终希望在不自动签出的情况下进行签入。

如何在不每次更改设置的情况下完成此操作？有没有我可以使用的快捷键（签到时按shift键）？

当我想签入并保持文件签出时，我也愿意做相反的事情并保持关闭并做一些额外的事情。我只是不想每次都更改设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:24:19.747

我想我会把我在上面评论中的内容放在这里，以便对此有答案。不幸的是，今天在 TFS 中没有办法做到这一点。如果这是人们热衷的事情，那么我建议他们在我们的[UserVoice 网站](http://visualstudio.uservoice.com/forums/121579-visual-studio/category/30925-team-foundation-server)上投票。

# jquery - 在表中使用相同的类元素

> ID：12270051
> 
> 赞同：0
> 
> 时间：2012-09-04T19:25:15.743
> 
> 标签：jquery, html-table

我想设置它们的类匹配的`th`宽度`tbody td`。我试过这个，但它似乎不起作用：

```
$("#table th").each(function(i){
    var ClassName = $(this).attr('class');
    $(this).width( $("#table tbody td" + ClassName).outerWidth(true));
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:27:26.397

这不是您生成类选择器的方式。这是：

```
$("#table th").each(function(i){
    var ClassName = $(this).attr('class');

    // replace spaces with '.'s
    var classSelector = '.' + ClassName.replace(' ', '.');
    $(this).width( $("#table tbody td" + classSelector).outerWidth(true));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:27:56.390

将您的代码更改为：

```
$("#table th").each(function(i){
    var ClassName = $(this).attr('class');
    $(this).width( $("#table tbody td[class*=" + ClassName + "]").outerWidth(true));
}); 
```

你需要 '。' 用于类选择器。

另请注意，attr('class') 返回所有应用的类，可能不止一个，因此您需要在每个类前加上 '.'

# ruby-on-rails-3 - 如何确定缓冲区大小

> ID：12270055
> 
> 赞同：1
> 
> 时间：2012-09-04T19:25:43.423
> 
> 标签：ruby-on-rails-3, postgresql, heroku

让我解释一下我需要什么信息：

我有几个并发用户同时达到相同的记录。这意味着，在 db 端会有一些排队和锁定。这个缓冲区有多大？可以为 200 多个并发用户保留队列和锁定吗？

如何在我们的设置中确定此缓冲区的大小？有默认设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:11:14.193

数据库中没有查询队列（“缓冲区”）。

每个与数据库的并发连接都可以有一个正在运行的查询。其他查询不能在它后面排队^* .

您的应用程序可能使用内部连接池，即 Rails，因此您可以等待许多查询，因为连接池中有插槽。

如果您在应用程序和 PostgreSQL 之间有一个像 PgBouncer 代理的外部连接池，那么您可以有更多的查询排队，因为当连接到 pgbouncer 时，您可以在应用程序中拥有更大的池大小，因为 pgbouncer 连接非常轻量级。PgBouncer 将在与 PostgreSQL 的少量实际连接上为这些请求提供服务。当以这种方式使用时，这有效地使 PgBouncer 成为查询队列（尽管不一定是 FIFO 队列）。**但是**，因为这些查询在发出时实际上并没有命中 Pg，所以它们在 PgBouncer 中等待时不会锁定。这对于某些并发设计可能很重要。

* * *

^*好的，因此您可以一次发送多个分号分隔的查询，但不能像队列那样串联。

# wpf - 将内容转换为内容模板

> ID：12270058
> 
> 赞同：0
> 
> 时间：2012-09-04T19:25:47.557
> 
> 标签：wpf, wpf-controls

我有一个按钮样式，其中我在 Content 属性中有一些 Path 设置。在我显示此按钮的第二个实例之前，它工作正常。我遇到了一个例外

指定元素已经是另一个元素的逻辑子元素。先断开它。

其他类似这样的帖子：

[错误“指定元素已经是另一个元素的逻辑子元素”？](https://stackoverflow.com/questions/4024788/error-specified-element-is-already-the-logical-child-of-another-element)

引导我找到需要将内容传输到 ContentTemplate 的解决方案。

```
<Viewbox>
    <Grid Margin="0,0,30,30">
        <Path Fill="#FFFFFFFF">
            <Path.Data>
                <PathGeometry Figures="m 13.123027 65.796864 0 81.448876 133.750213 0 0 -133.778725 -67.192062 0 z" FillRule="NonZero"/>
            </Path.Data>
        </Path>
        <Path Fill="{StaticResource DataCRUDIconBrush}">
            <Path.Data>
                <PathGeometry Figures="M 79.624708 0.36218262 0 62.950511 l 0 97.411669 160 0 0 -159.99999738 -80.375292 0 z m 2.28303 16.89635038 61.172792 0 0 126.207297 -126.161061 0 0 -76.829978 0.187646 -0.156158 64.800623 0 0 -49.221161 z" FillRule="NonZero"/>
            </Path.Data>
        </Path>
        <Path Fill="#FFFFFFFF">
            <Path.Data>
                <PathGeometry Figures="m 13.123027 65.796864 0 81.448876 133.750213 0 0 -133.778725 -67.192062 0 z" FillRule="NonZero"/>
            </Path.Data>
            <Path.RenderTransform>
                <TranslateTransform X="30" Y="30"/>
            </Path.RenderTransform>
        </Path>
        <Path Fill="{StaticResource DataCRUDIconBrush}">
            <Path.Data>
                <PathGeometry Figures="M 79.624708 0.36218262 0 62.950511 l 0 97.411669 160 0 0 -159.99999738 -80.375292 0 z m 2.28303 16.89635038 61.172792 0 0 126.207297 -126.161061 0 0 -76.829978 0.187646 -0.156158 64.800623 0 0 -49.221161 z" FillRule="NonZero"/>
            </Path.Data>
            <Path.RenderTransform>
                <TranslateTransform X="30" Y="30"/>
            </Path.RenderTransform>
        </Path>
    </Grid>
</Viewbox> 
```

如何翻译此代码以适应 ContentTemplate，而不会丢失我在那里拥有的触发器？

```
<Setter.Value>
    <ControlTemplate TargetType="Button">
    ....
        <ContentPresenter x:Name="Content" Opacity="0.5" Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" />
    </ControlTemplate>
</Setter.Value> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:55:17.313

我知道你的问题。您正在为`ContentPresenter.Content` 属性使用数据绑定。在这种情况下，您需要确定您的绑定对象不是视觉元素。这非常重要。从逻辑树断开连接不是一个好的解决方案（只是“瓶颈”，换句话说）。内容只能包含非可视对象。控件的所有可视部分都应在其`ContentPresenter.ContentTemplate`属性中，而不是其他方式。

因此，我认为您所有带有图形的代码都应该放在 ContentTemplate 属性中。如果您遇到问题，请分享您的整个样品，我会尽力帮助您。

# facebook - Facebook API 好友工作和教育近期变化

> ID：12270062
> 
> 赞同：1
> 
> 时间：2012-09-04T19:26:06.950
> 
> 标签：facebook, facebook-graph-api, facebook-fql

查看 Bright 网站，我试图弄清楚他们如何实现他们的最新活动窗格。基本上，在他们的网站上用 Facebook 登录给了我所有朋友最近的工作变化，按日期排序。看看这里，看看我的意思：

![明亮的活动](../Images/7bb78cb8a333af0ec6e11330e61e1e07.png)

到目前为止，这是我目前所做的：

*   使用`friends_work_history`权限和检索工作字段`/me/friends?fields=name,work`，如 Graph API。虽然这给了我朋友的工作经历以及他们目前的职位，但我仍然无法获得他们目前工作雇主的最新变动日期。

*   查看我朋友的`feed`对象（也使用 Graph API）以及`stream`对象（这次使用 FQL），看看我是否可以过滤工作更改。仍然没有运气。我只是找不到任何与他们的工作相关的故事或活动。

现在，如果我错了，请纠正我，但在我看来，让这样的朋友随着日期的工作变化是相当不可能的。在最好的世界里，我们希望实现的是，当用户第一次使用我们的网站，并使用 Facebook 登录时，我们希望向他们展示您从 Bright 的图片中看到的“最新活动” .

如果这真的不可能，我们将忘记在朋友中查看最新工作更新历史的想法，我们将专注于对现在进行“快照”，并从那里开始工作。我们可以尝试：

*   使用我们自己的跟踪系统，该系统基本上包括在一天中的某个时间汇集 Facebook Graph API，以查看我们是否可以在用户朋友的工作历史中发现任何变化。

或者

*   [也许使用 Facebook https://developers.facebook.com/docs/reference/api/realtime/](https://developers.facebook.com/docs/reference/api/realtime/)的实时更新服务，这也许可以让我们跟踪这些变化。但我想得越多，我就越觉得它不起作用，因为它不允许我们跟踪朋友工作领域的变化。

无论如何，也许有人能够解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:28:21.690

您应该能够使用 FQL 解决此问题。我找不到最近换工作的朋友，所以我无法验证这应该是什么。

使用这样的东西：

```
SELECT post_id, message, type, attribution, description,description_tags FROM stream 
  WHERE source_id IN (SELECT uid1 FROM friend WHERE uid2 = me()) AND 
  strpos(description,"added a job") > 0 
```

应该给你那些帖子。我的猜测是这些具有独特的`type`价值，您可以在其中更有效地过滤它们。

不要忘记，该`stream`表只能返回最近 30 天的帖子。您需要执行多个查询才能获得任何重要的历史记录。

# cakephp - CakePHP 中如何处理配置文件

> ID：12270064
> 
> 赞同：9
> 
> 时间：2012-09-04T19:26:16.373
> 
> 标签：cakephp, configuration, cakephp-2.0, app-config

我知道在文件夹配置中有一个名为 core.php 的文件，我可以将应用程序选项配置为调试模式、会话、缓存等。

但我想为我的应用程序配置文件。我想例如配置主页中可以显示多少帖子，缩略图大小等。

我认为 config 文件夹中的最佳位置，但在哪里和何时解析应用程序中的 thos 文件（引导程序，AppController 另一种机制？）以及最佳扩展名 .ini 或 PHP 数组是什么（也是出于性能原因）。这样做的最佳做法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T05:22:20.397

**`DEFINE OWN CONSTANT FILE`**

创建一个文件，假设 'site_constants.php' 在 app/Config 文件夹中包含一些常量变量。在其中定义以下常量：

```
<?php    
define('HTTP_HOST', "http://" . $_SERVER['HTTP_HOST'].'/');
if(HTTP_HOST == 'localhost' || HTTP_HOST == '127.0.0.1')
{
     define('SITE_URL', HTTP_HOST.'app_folder_name/');
}
else
{
     define('SITE_URL', HTTP_HOST);
} 
```

将其包含在`app/Config/bootstrap.php`

```
require_once('site_constants.php'); 
```

现在您可以在网站的任何地方使用它。这也是一种动态。

**`DEFINE OWN CONFIGURATION FILE`**

创建一个文件，假设 'my_config.php' 在 app/Config 文件夹中包含一些常量变量。通过以下方式定义常量：

```
<?php
$config['PageConfig'] = array('PostPerPage' => 5, 'UserPerPage' => 15); 
```

然后在你`app/Controller/AppController.php`写以下行`beforeFilter() method`：

```
function beforeFilter()
{ 
     Configure::load('my_config');        
} 
```

现在在您的控制器的方法中，您想要访问要在分页列表中列出的页码。您可以通过以下代码使用它：

```
$page_config = Configure :: read('PageConfig');   
$user_per_page = $page_config['UserPerPage']; 
//or
$post_per_page = $page_config['PostPerPage']; 
```

**处理此任务可能看起来很漫长，但一旦完成，它将在许多方面为您提供帮助。**

以下是优点：

1.  您可以轻松定义更多常量（如任何文件路径等）。
2.  您可以将所有 ajax 代码放入外部 JS 文件中。
3.  您可以直接将其部署到任何服务器上，而无需更改常量，也可以在您的本地主机上完美运行。
4.  遵循标准约定等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:49:50.960

CakePHP 为此提供了 Configure 类。请参阅[文档](http://api20.cakephp.org/class/configure)。

您可以`Configure::write($key,$value)`在自己的配置文件中使用，然后通过`Configure::read($key)`. 它还允许您使用能够自动执行该过程并读取外部配置文件的阅读器。CakePHP 默认提供了一个 PHPreader 和一个 INIreader，您可以创建阅读器来扩展它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-05T12:10:39.753

使用配置变量创建一个新文件，例如：

```
Configure::write('Twitter', array(
    'consumer_key' => "OTh1sIsY0urC0n5um3rK3Y4T878676",
    'consumer_secret' => "OTh1sIsY0ur53cReT76OTIMGjEhiWx94f3LV",
    'oauth_access_token' => "12345678-OTh1sIsY0urAcc355K3YT878676Y723n4hqxSyI4",
    'oauth_access_token_secret' => "OTh1sIsY0urACC355T0KEnsdjh4T878676FPtRRtjDA29ejYSn"
)); 
```

将此文件保存在 app/Config/twitter.php

在 app/Config/bootsrap.php 中包含该文件：

```
require_once('twitter.php'); 
```

在控制器中（本例为 'app/Controller/TwitterController.php'），您可以像这样使用它：

```
$settings = Configure :: read('Twitter'); 
```

# c++ - 在 Objective-C 中前向声明 C++ 类

> ID：12270065
> 
> 赞同：0
> 
> 时间：2012-09-04T19:26:22.657
> 
> 标签：c++, objective-c

我正在编写一个需要对 C++ 类实例进行函数调用的 Objective-C 类。我找到[了这个建议](http://www.zedkep.com/blog/index.php?/archives/247-Forward-declaring-C%20%20-classes-in-Objective-C.html)，但如果我尝试它，我会收到一个错误，因为类型“struct MyCPlusPlusClass”的定义不完整

```
struct MyCPlusPlusClass;

typedef struct MyCPlusPlusClass MyCPlusPlusClass;

@interface MyBridgeClass() {
    MyCPlusPlusClass *my_CPlusPlus;
}

...

- (id)initWithMrGame:(MyCPlusPlusClass *)cPlusPlus
{
    self = [super init]; 
    if (self) {
        my_CPlusPlus = cPlusPlusClass;
        my_CPlusPlus->p_favorite_integer = 0; // Compiler error
    }
    return self;
} 
```

实际定义出现在由预编译器生成的 .mm 文件中，只是为了增加另一层挑战。

我怎样才能让它工作？

**编辑**：解释亚当的回答

```
// in MyCode.h

struct MyCPlusPlusClass;  // Forward declaration, no need for #include/#import

@interface MyBridgeClass() {
    struct MyCPlusPlusClass *my_CPlusPlus;
}

// in MyCode.m
#include MyCode.h

// in BigGenerateFile.mm
class MyCPlusPlusClass;

class MyCPlusPlusClass { ... } 
```

我的目标是能够在 MyCode.m 中使用 MyCPlusPlusClass，但我不能包含 .mm 文件，因为编译器非常不高兴。可能这个东西的架构方式会让我走一条不同的路。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T19:33:44.367

您不能访问不完整结构/类的成员变量。为此，您需要完整的定义。通常，您在头文件中使用前向声明，以便包含该头文件的任何内容都不会引入许多它不需要的不必要的其他头文件，但对于源文件，您通常需要完整的定义。

所以我建议你把代码改成这样：

```
// Header file (.h)
struct MyCPlusPlusClass;  // Forward declaration, no need for #include/#import

@interface MyBridgeClass() {
    struct MyCPlusPlusClass *my_CPlusPlus;
}

// Source file (.mm)
#include "MyCPlusPlusClass.h"
...
// Can now access my_CPlusPlus->p_favorite_integer etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:28:43.767

您可以对不完整的类型执行许多操作，但访问该类型对象的成员不是其中之一。

一个简单的可能解决方案是在完整类型可用的地方定义一个辅助函数：

```
void set_p_favorite_integer(MyCPlusPlusClass*, int);
// ...
set_p_favorite_integer(my_CPlusPlus, 0); 
```

# java - 没有为 Content-Type: application/json 定义解析器

> ID：12270066
> 
> 赞同：0
> 
> 时间：2012-09-04T19:26:23.683
> 
> 标签：java, android, google-app-engine, google-api

我正在使用 google-http-java-client-1.10.3-beta 向外部源提供的服务发出 RESTfull Json 请求。

我需要解析响应中出现的 Json，以便为我的应用程序构建一些 POJO。

为此，我使用 HttpResonse 方法“解析为”：

```
response.parseAs(SomeModel.class) 
```

但我得到了这个例外：

```
java.lang.IllegalArgumentException: No parser defined for Content-Type: application/json
    at com.google.api.client.http.HttpResponse.parseAs(HttpResponse.java:497) 
```

响应的 json 格式如下： [{"key" : {"key" : "value", "key" : "value"}}]

在处理带方括号的响应时，我已经用其他 Json 库验证了一些问题，这可能是这里的问题吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:56:54.473

回应我自己，这个api需要你手动设置一个JsonObjectParser对象到所涉及的请求。

JsonObjectParser 可能是 GsonParser 或 JacksonParser 或任何其他实现的解析器。

因此，为了为您的请求设置 GsonParser，您可以使用以下代码：

```
HttpRequest setJsonParser(HttpRequest request) {
    JsonObjectParser parser = new JsonObjectParser(new GsonFactory());
    return request.setParser(parser);
} 
```

然后你就可以做到：

```
HttpRequest request = setJsonParser(request).execute().parseAs(SomeModel.class); 
```

您的所有 POJO 都将自动生成。

**注意：**我已将我的 google-http-java-client 版本升级到 1.11.0-beta，早期版本在调用 setParser 时不会返回 HttpRequest 对象，因此在使用提供的代码时要小心，您可能需要一个 void 代替的一个功能。

# eclipse - Eclipse 的 EPIC（Perl 插件）是否仍在积极开发中？

> ID：12270071
> 
> 赞同：2
> 
> 时间：2012-09-04T19:26:51.497
> 
> 标签：eclipse, perl

根据[EPIC 在 Eclipse Marketplace 上的资料](http://marketplace.eclipse.org/content/epic-eclipse-perl-integration#.UEZUMY1lQmU)，最新版本是 0.5，最后一次更新是在 2010 年 7 月 8 日。

如果不再积极开发，Eclipse 上还有哪些其他流行的替代方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T21:21:12.620

> Eclipse 的 EPIC（Perl 插件）是否仍在积极开发中？

[sourceforge 页面](http://sourceforge.net/projects/e-p-i-c/)上有一些可用的统计信息：

*   最后一次提交：2012 年 4 月（！= 发布）
*   到目前为止，已经有 1245 次存储库提交，其中 72 次发生在 2010 年 1 月 1 日之后。
*   有可追溯到 2006 年的开放的、高优先级的错误
*   当前有 212 个未解决的错误，其中 165 个未分配给开发人员
*   有最近的错误（2012-08-31），其中一些分配给了开发人员

所以答案似乎是*“不，它没有被积极开发，但有一个孤独的开发者站在他的立场和寻找错误”*。

> 备择方案

</rational-and-abjective>

由于这种语言的动态和解释性质，我（个人且非常有争议）认为 IDE 在编写 Perl 时用途有限：您没有可编译的源代码，因此自动生成文件生成不是问题，并且许多编辑器支持某种程度的代码完成。编辑器 + 终端 + 文档的任何组合都可以。

Perl IDE 的“大牌”当然是 EPIC、Komodo 和 Padre，其次是 Emacs 和任何 *nix OS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:15:23.203

[Sourceforge 页面](http://sourceforge.net/projects/e-p-i-c/)上的最后一次更新是 2011 年 9 月 15 日的 v0.6.35

我收回之前说过的话。最新版本似乎是 v0.6.35，但*最后一次更新*以各种方式表示为 2009 年 5 月 21 日（以下载文件的名称）2011 年 9 月 15 日（在 Sourceforge 页面上表示为“最后一次更新”）和最后一次完成和关闭的功能请求是在 2012 年 3 月 25 日（根据补丁跟踪器）

# c++ - C++ 中的块是什么？

> ID：12270079
> 
> 赞同：3
> 
> 时间：2012-09-04T19:27:11.350
> 
> 标签：c++, objective-c, objective-c-blocks

> **可能重复：**
> [什么是 (double (^)(int))foofoo](https://stackoverflow.com/questions/3551999/what-is-double-intfoofoo)

我尝试在 Google 和 SO 上搜索定义，我发现了使用它们但没有明确定义的示例。“块”是指插入符号 ( `^`)。我[在他们描述的 cdecl 网站上](http://cdecl.ridiculousfish.com/?q=cast%20foo%20into%20block%28int%2C%20long%20long%29%20returning%20double)找到了它：

```
(double (^)(int, long long )) foo 
```

作为

> `cast foo into block(int, long long) returning double`

在今天之前，我从未见过使用过这个符号。任何人都可以清楚地描述块是什么并包含一个最小的工作示例吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T19:31:49.183

[块](http://en.wikipedia.org/wiki/Blocks_%28C_language_extension%29)是 Apple 对 C（不仅是 Objective-C）语言的非标准扩展。它们实现了[闭包（lambda 函数](http://en.wikipedia.org/wiki/Lambda_calculus)等，不管你怎么称呼它们）——基本上它们是未命名的类函数实体，包含可以调用的代码。它们有助于编写例如事件驱动的代码，其中回调被详尽地使用。

# android - 当用户尝试下载其他应用程序时下载一个应用程序

> ID：12270086
> 
> 赞同：0
> 
> 时间：2012-09-04T19:27:57.720
> 
> 标签：android, facebook, android-intent, android-service

当用户尝试安装我的应用程序时如何安装 facebook messenger。

例如，当用户在 android 上下载 facebook 应用程序时，它甚至会下载 facebook messenger。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:58:50.657

启动意图以使用您想要的应用程序的包名称打开 Play 商店应用程序，如下所示：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse("market://details?id=com.android.example"));
startActivity(intent); 
```

# c# - 为什么单个 Web 请求会为我的 defaultdocument 页面创建第二个单独的线程调用？

> ID：12270087
> 
> 赞同：0
> 
> 时间：2012-09-04T19:27:59.677
> 
> 标签：c#, asp.net, multithreading, iis-7, default-document

在本地调试 VS2010 中的 Web 应用程序时，我看到一些非常奇怪的行为。相同的用户旅程/页面序列发生在生产中。

调试，我看到了这个：

```
1\. request for MyPage.aspx - handled by thread_1
2\. (there is something on that page that IIS/ASP.Net doesn't like it seems) I'm slowly removing sections to pin-point exactly but there's
no JS, or anything fancy there just html content, user controls etc.
3\. Either way a separate thread_2 to begin processing the Page_Load of my defaultdocument i.e. home.aspx is executed. There is logic in
home.aspx.cs to clear some data.
4\. So when thread_1 continues processing, checks against the data above fail, resulting with the user being redirected to an error page. 
```

谁能解释为什么创建第二个线程以及为什么它开始处理我的默认文档？

请注意：

*   我检查了全局方法是否有错误，例如 session_end、app_error 等，但没有。
*   我在启用失败请求跟踪日志的情况下间歇性地看到 401 错误，但我不明白这将如何开始处理我的默认主页？
*   只是为了进行完整性检查，我在 web.config 中我的默认文档列表的开头放置了一个新的文档 test.aspx，它确实被调用了。

似乎 IIS/ASP.Net 中的某些内容被配置为在出现错误时开始处理默认页面，但这对我来说是新行为吗？

我已经尝试过对此进行研究，但似乎唯一可能与之相关的是线程敏捷性，但我不太确定..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:41:50.623

似乎有两个 HTTP 请求同时运行。由于每个请求（通常）在其 on 线程上执行，这种情况是有意义的。

默认情况下，HTTP 请求不共享状态。它们对不同的数据进行操作。因此，这不是线程安全问题。

此规则的一个例外是，如果您明确共享状态，例如使用静态变量。由于各种原因，您不应该这样做。

要调试问题，请启动 Fiddler 并检查正在执行的 HTTP 请求。也是`HttpContext.Current.Request.RawUrl`两个并发线程中的每一个的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:04:58.397

在删除了有问题的 MyPage.aspx 中的大量内容后，我遇到了有罪的代码行：（`btnShowPost.ImageUrl = SitePath + "post.png";`它从未在 if 语句后面被访问过），因此图像`<asp:Image ID="btnShowPost" runat="server" />`从未设置必要的 ImageUrl。

没有它，显然这是标准的浏览器行为：任何缺少 src= 的 img、脚本、css 等都将使用默认路径作为 url。iis 通常会重定向到 default.aspx（或任何默认值）。

[请参阅此链接的完整说明](http://iisissuebxv.blogspot.co.uk/2012/03/strange-issue-with-imagebutton-with-no.html)

# gwt - GWT 非 Java 后端应用结构

> ID：12270089
> 
> 赞同：0
> 
> 时间：2012-09-04T19:28:03.180
> 
> 标签：gwt

有谁知道具有非 Java 后端的 GWT 应用程序的一个很好的例子在哪里？类似于GWT 官方页面上的[“联系人”应用程序。](https://developers.google.com/web-toolkit/articles/mvp-architecture)我对以下主题特别感兴趣（这就是我如何*看待*应用程序的“背面”部分，但当然可能会有所不同）：

*   **DTO 序列化**。
*   **通信层**（最后一层）。它应该使用泛型并与任何抽象 DTO 一起工作吗？还有其他行之有效的方法吗？
*   **服务层**，它使用具有特定 DTO 的通信层。
*   **请求缓存**。应该在服务或通信层面实施吗？
*   **好抽象**。因此，我们可以轻松地替换任何部分以用于测试和其他目的，例如使用不同的序列化器（例如 XML、JSON）、管理用户会话时不同服务器的行为（一旦用户登录，URL 可能会更改）。

我知道，这里有很多类似的主题，但我没有找到一个，重点是客户端部分的*结构。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:25:46.840

两边都使用 REST。PHP/Python REST 服务器端。GWT 客户端。

不要使用 GWT-RPC。

下面给出了 Java-java REST 的指导方针，但是还有离开服务器端 Java 的余地。它解释了为什么 REST 是合适的。

[http://h2g2java.blessedgeek.com/2011/11/gwt-with-jax-rs-aka-rpcrest-part-0.html](http://h2g2java.blessedgeek.com/2011/11/gwt-with-jax-rs-aka-rpcrest-part-0.html)。

REST 是一个行业成熟的模式（谷歌、雅虎，实际上每一个稳定的机构都部署了 REST 服务）。

REST 被抽象为 HTTP 级别的数据结构。哪些 Java、PHP 和 Python 已经建立了库来遵守以确保 DTO 完整性。

> 通信层（最后一层）。它应该使用泛型？？？

不理解问题或问题存在的原因。只需使用 REST 模式为服务器和客户端之间的非同质语言以及 HTTP 请求/响应提供完整性。

如果您在后端使用 Java，则无法避免使用泛型。泛型保存代码。但是广泛使用泛型需要程序员具有同样广泛的视觉能力来可视化泛型。如果您的后端是 PHP 或 Python，是否有 PHP 的泛型？Python泛型？还不如留在 Java 领域或 C# 领域，忘记无 Java 服务提供商。

你的意思是DTO多态性吗？在建立服务之前不要尝试多态性或决定它。然后，如果您真的看到需要，那么自适应地并敏捷地将多态性引入您的 DTO。但是尽量避免它，因为使用 JSON 数据交换，它在服务器和客户端之间变得相当混乱。特别是如果他们不说相同的编程语言。

如果你问的是 HTTP 级别的泛型？我不知道任何框架，不是 SOAP，不是 REST，您可以在其中使用 XML 或 JSON 携带的泛型。有没有？泛型？

服务层？休息。

请求缓存？在每个适当的机会缓存。为所有会话（如菜单、菜单/下拉框选项、标签等）的通用和静态项目提供服务提供商缓存查询结果。缓存您的历史记录和地点。

在 GWT 端缓存记录，以便前进/后退按钮不会触发无意的查询。使用 MVP 模式和历史来管理可能触发重新显示信息的历史遍历。

如果您正在谈论统一信息抽象，您应该使用 JAX-RS 开始您的项目以定义/测试 API 并执行数据抽象。不执行任何业务逻辑。

然后，一旦定义了 HTTP 级别的 API 和 DTO，将服务器端转换为使用您选择的语言以继续编写更复杂的代码。

顺便说一句，我不挖掘您的术语“后端”。

我们通常将术语客户端用于服务消费者，服务器端用于服务提供者，后端用于数据存储库/持久性访问，中间层或中间件用于提供数学/科学/图形分析/综合所需的干预/辅助软件.

如果我们的术语不一致，我可能回答错了这个问题。

# java - 使用 Selenium WebDriver 和 java 检查该元素不存在的最佳方法

> ID：12270092
> 
> 赞同：31
> 
> 时间：2012-09-04T19:28:11.487
> 
> 标签：java, selenium-webdriver, assertion, verify

我正在尝试下面的代码，但它似乎不起作用......有人可以告诉我最好的方法吗？

```
public void verifyThatCommentDeleted(final String text) throws Exception {
    new WebDriverWait(driver, 5).until(new ExpectedCondition<Boolean>() {
            @Override
            public Boolean apply(WebDriver input) {
                try {
                    input.findElement(By.xpath(String.format(
                            Locators.CHECK_TEXT_IN_FIRST_STATUS_BOX, text)));
                    return false;
                } catch (NoSuchElementException e) {
                    return true;
                }
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-07-15T01:23:04.187

不做 findElement，而是做 findElements 并检查返回元素的长度是否为 0。这就是我使用 WebdriverJS 的方式，我希望在 Java 中同样可以工作

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-09-06T15:01:55.603

我通常有几种方法（成对）来验证元素是否存在：

```
public boolean isElementPresent(By locatorKey) {
    try {
        driver.findElement(locatorKey);
        return true;
    } catch (org.openqa.selenium.NoSuchElementException e) {
        return false;
    }
}

public boolean isElementVisible(String cssLocator){
    return driver.findElement(By.cssSelector(cssLocator)).isDisplayed();
} 
```

请注意，有时 selenium 可以在 DOM 中找到元素，但它们可能是不可见的，因此 selenium 将无法与它们交互。因此，在这种情况下，检查可见性的方法会有所帮助。

如果您想等待元素直到它出现，我发现的最佳解决方案是使用流利的等待：

```
public WebElement fluentWait(final By locator){
    Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
            .withTimeout(30, TimeUnit.SECONDS)
            .pollingEvery(5, TimeUnit.SECONDS)
            .ignoring(NoSuchElementException.class);

    WebElement foo = wait.until(new Function<WebDriver, WebElement>() {
        public WebElement apply(WebDriver driver) {
            return driver.findElement(locator);
        }
    });

    return foo;
}; 
```

希望这可以帮助）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-07-06T20:00:42.303

使用**findElements**而不是**findElement**。

**如果没有找到匹配的元素， findElements**将返回一个空列表，而不是异常。此外，我们可以确保元素是否存在。

例如：列表元素 = driver.findElements(By.yourlocatorsstrategy);

```
if(elements.size()>0){
    do this..
 } else {
    do that..
 } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-13T17:55:06.983

无法对流星测试手册发表评论，因为我没有代表，但我想提供一个例子，我花了很长时间才弄清楚：

```
Assert.assertEquals(0, wd.findElements(By.locator("locator")).size()); 
```

此断言验证 DOM 中没有匹配的元素并返回零值，因此当元素不存在时断言通过。如果它存在，它也会失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-19T12:39:04.453

```
int i=1;

while (true) {
  WebElementdisplay=driver.findElement(By.id("__bar"+i+"-btnGo"));
  System.out.println(display);

  if (display.isDisplayed()==true)
  { 
    System.out.println("inside if statement"+i);
    driver.findElement(By.id("__bar"+i+"-btnGo")).click();
    break;
  }
  else
  {
    System.out.println("inside else statement"+ i);
    i=i+1;
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-04T05:47:11.907

```
public boolean isDisplayed(WebElement element) {
        try {
            return element.isDisplayed();
        } catch (NoSuchElementException e) {
            return false;
        }
    } 
```

如果您不想检查该元素是否显示在页面上，您的检查应该是：

```
if(isDisplayed(yourElement){
...
}
else{
...
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-22T12:55:19.317

```
WebElement element = driver.findElement(locator);
Assert.assertNull(element); 
```

如果元素不存在，上述断言将通过。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-18T19:07:49.550

在 Python 中进行断言，我使用：

```
assert len(driver.find_elements_by_css_selector("your_css_selector")) == 0 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-24T11:32:48.440

我的答案要简单得多，它对我有用

```
while(true) {
if (driver.getPageSource().contains("Enter the text of the element you wanted to check")==false) 
{//Put your code here 
    break;
}   
else if (isElementPresent(element you are trying to find)==true)
{
                //put your code here 
                break;
} 
```

}

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2018-11-15T12:54:33.583

```
 WebElement element = driver.findElement(locator);

    Assert.assertFalse(element.isDisplayed()); 
```

如果元素不存在，则断言将通过，否则将失败。

# php - PHP正则表达式内存不足？

> ID：12270095
> 
> 赞同：0
> 
> 时间：2012-09-04T19:28:17.260
> 
> 标签：php, regex, input

我有一个正则表达式，如果输入错误，它似乎会停止工作。

我的代码：

```
function dbStr($string)
{
    private static $tag = "(script|embed)";//As it turns out, embeds have the exact same syntax as scripts, so, we can use the same regexes against those :)
    private static $tvnc = "(\\\\'|\\\\\"|[^<>\"'/])*?";//Tag Valid No Close
    private static $quoteseq = "['\"](\\\\'|\\\\\"|[^\"'])*?['\"]";
    private static $tvncq = "(".$tvnc.$quoteseq.$tvnc.")*?";//Tag Valid No Close Quotes

    $string = preg_replace_callback
    (
        "#<".$tvnc.$tag."(".$tvncq."(src=".$quoteseq.")".$tvncq.")/>#imsSX",//Pattern
        "dbStr_FilterSinglematch",//Callback
        $string//Subject
    );
    return $string;
}

function dbStr_FilterSinglematch($m)
{
    print_r($m);
    return "";
} 
```

现在，假设我称之为输入：

```
echo "\n" . dbStr
("

<script type='textjavascript' src='asdf'/>

    <script type='textjavascript' src='asdf'>
    asdfasfasdf

    uyoiyoiuyoiuy

"); 
```

它工作正常！它找到一个匹配项，并删除该匹配项。这是我从该调用发送的输出：

```
Array
(
    [0] => <script type='textjavascript' src='asdf'/>
    [1] => 
    [2] => script
    [3] =>  type='textjavascript' src='asdf'
    [4] =>  type='textjavascript' 
    [5] => =
    [6] => t
    [7] =>  
    [8] => src='asdf'
    [9] => f
)

    <script type='textjavascript' src='asdf'>
    asdfasfasdf

    uyoiyoiuyoiuy 
```

但是，如果我给它这个输入而不是......

```
echo "test" . dbStr
(
'

<embed type="application/x-shockwave-flash" src="http://picasaweb.google.com/s/c/bin/slideshow.swf" width="288" height="192" flashvars="host=picasaweb.google.com&amp;hl=en_US&amp;feat=flashalbum&amp;RGB=0x000000&amp;feed=http%3A%2F%2Fpicasaweb.google.com%2Fdata%2Ffeed%2Fapi%2Fuser%2F109941697484668010012%2Falbumid%2F5561383933745906193%3Falt%3Drss%26kind%3Dphoto%26authkey%3DGv1sRgCN2H88H41qeT6AE%26hl%3Den_US" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed>

'.

"

<script type='textjavascript' src='asdf'/>
<script  fubar=\"d\\\\\'erp\"  derp=\"dlerp\">
    //<script type='text/javascript' src='asdf'/>
    asdfasfasdf
</script>
<script>
    uyoiyoiuyoiuy
</script>
"); 
```

没有什么。什么都没有。没有找到匹配项，但我从正则表达式中得到的文本是完全空白的！

我的意思是，说真的……什么鬼？这是我运行上述代码得到的输出：

```
test 
```

对，就是那样。

如果正则表达式找到任何匹配项（例如，匹配整个文档），那么它不会从我的 print_r() 调用中输出一些内容吗？不，我认为它甚至不会调用回调。正则表达式完全失败了。

更糟糕的是，我设置了以下 headers/ini 设置：

```
header('Content-type: text/plain');
error_reporting(E_ALL);
ini_set("display_errors", 1); 
```

但是我在我的日志中或在其自身的输出中都没有看到任何错误！

所以，你有它，我的正则表达式困境。有没有人知道为什么这会失败？

编辑：

我缩小了问题的根源：

```
echo "test " . dbStr
('<embed tests="abc" tests="abc" flashvars="AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"></embed>'); 
```

似乎当我有两个这么长的属性，然后是一个很长的属性时，系统崩溃了。但是，这个输入不会崩溃......：（有更多的 A，但没有前面的标签）

```
echo "test " . dbStr
('<embed
flashvars="AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"></embed>'); 
```

话虽如此，添加了 A 的前面的标签现在只需要这么长就可以让它崩溃：

```
echo "test " . dbStr
('<embed a="b" c="d"
flashvars="AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"></embed>'); 
```

看来这是一个与内存相关的问题......有解决办法吗？这将解析的代码可能非常长。

# java - Class.newInstance() 是否遵循“抽象工厂”设计模式？

> ID：12270096
> 
> 赞同：11
> 
> 时间：2012-09-04T19:28:23.830
> 
> 标签：java, reflection, builder, java.lang.class

我已经开始阅读 Joshua Bloch 的“Effective Java”（第二版）。在阅读第 2 条时（**在面对许多构造函数参数时考虑构建器），作者在***Class.newInstance()*方法中做了一个特殊的陈述。具体来说，作者说

> Java 中的传统抽象工厂实现是“Class”对象，“newInstance”方法扮演“build”方法的一部分。

这部分让我有点困惑——我对抽象工厂设计模式的理解是它用于表示工厂的工厂。在我看来， *Class.newInstance()*方法更接近于“静态工厂方法”编码哲学（顺便说一下，这是同一本书中的第 1 项）

想法，有人吗？我一直在努力准备应对一些艰难的面试，如果我在参加此类面试之前基础扎实，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T21:48:24.757

这是我的意见。

首先，抽象工厂模式并非旨在成为工厂的工厂。这种模式的关键方面是有一个可访问的接口和一个底层的（可能不可访问的）工厂实现，通过它您可以获得（可能不可访问的）对象实现的可访问接口。我知道，对于我如何理解 Gamma 书中这种模式的一些适用条件，这是一个很长的讨厌的文字游戏：

> *   系统应该独立于其产品的创建、组合和表示方式
> *   您想提供一个产品类库，并且您只想显示它们的接口，而不是它们的实现。

最后你得到的是对象，而不是工厂。

其次，我不会在模式概念和语言关键字之间建立 1:1 的关系。“抽象工厂”不一定总是转换为 Java`abstract class`或`interface`构造。只要您以某种方式保证客户端代码独立于底层工厂和对象实现，您仍然可以拥有一个表示“抽象工厂”的常规、可扩展、可实例化的类。就是这种情况`java.lang.Class`，它既不是抽象的也不是接口，而是隐藏了它通过`newInstance()`方法表示的类型的无参数构造函数实现。如果您像这样使用它可能会更清楚：

```
Object o = Class.forName(type).newInstance(); 
```

`Class`播放“抽象工厂”，并`Object`播放“抽象产品”到类型实现。

最后，`newInstance()`不是静态工厂方法，我认为是因为这种模式旨在返回实现它的类的实例。`newInstance()`不返回`Class`nor sub-的实例`Class`。它返回它所代表的类型的实例。正如布洛赫在他的书中所说的那样，它也不是一种“工厂方法”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T20:15:37.383

我不认为有任何迹象表明抽象工厂是“工厂的工厂”。An`AbstractFactory<T>`不会创建创建`T`s 的工厂，而是`T`直接创建 s。

它是抽象的想法是允许`T`注入创建的逻辑。因此，例如，您可以：

```
public interface ConnectionFactory {
    Connection newConnection();
}

//passed to your object normally:
public class RealConnectionFactory implements ConnectionFactory {
    //...
}

//passed to your object when unit testing:
public class FakeConnectionFactory implements ConnectionFactory {
    //...
}

//...

public class MyDao {
   public MyDao(ConnectionFactory connectionFactory) {
       this.conn = connectionFactory.newConnection();
   }
} 
```

在这种情况下，`ConnectionFactory`创建`Connection`s，但它是抽象的，因为它是一个接口。

我倾向于同意您的观点，这`Class<?>.newInstance()`不是抽象工厂的典型示例，因为它*不是*抽象的，实际上它*无法***扩展**。您不能要求一个实现将新值初始化为，而另一个实现将新值初始化为。`Class`***`Class<Integer>``1``7`***

 ***但是，您可以通过说`Class<? extends InputStream>`是 s 的抽象工厂`InputStream`，具有具体实现`Class<SocketInputStream>`和`Class<FileInputStream>`. 不过，这不是“抽象”的传统含义（仍然只有一类：）`Class`。

但即便如此，它作为抽象工厂也没有用，因为实现“工厂”的新*具体*版本的方式是创建一个扩展的新类`InputStream`。这几乎不是抽象工厂的用途。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T19:47:07.823

在我看来，他指的是如下代码：

```
Integer.class.newInstance(); 
```

`Class<T>`抽象工厂在哪里。当您传递类型参数时，它变得具体，例如`Integer`. 然后，您调用了“生成器”，`newInstance()`。***

# jquery - Jquery ui-对话框标题按钮

> ID：12270097
> 
> 赞同：0
> 
> 时间：2012-09-04T19:28:27.713
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

jquery ui 对话框显示带有图标 (X) 的标题栏以关闭它。

我必须再附加一个图标。

这个新图标用于显示帮助对话框。

这是一个带有最小化图标的例子： [http ://www.droptoframe.com/demos/minimizedemo.html](http://www.droptoframe.com/demos/minimizedemo.html)

有可能这样做吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T07:13:04.903

**可能是一些小伙伴想在对话框按钮中添加标题属性。**

```
$('.ui-dialog-buttonset button > span').each(function(){
   $(this).attr('title', $(this).text());
}); 
```

**尝试这个。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:33:26.690

如果您有好奇心，您发送的页面会显示如何执行此操作。它使用 Dialog 的自定义扩展，可在[http://www.droptoframe.com/jquery.dialog.minimize.js](http://www.droptoframe.com/jquery.dialog.minimize.js)

你需要知道如何做到这一点的一切都在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:34:35.450

初始化对话框时可以执行以下操作：

```
$("#dialog").dialog({
    title: '<span class="ui-icon ui-icon-home"></span>'
}); 
```

# javascript - 将变量传递给 ajax 函数

> ID：12270099
> 
> 赞同：0
> 
> 时间：2012-09-04T19:28:33.597
> 
> 标签：javascript

我正在尝试将变量传递给 javascript 函数，但我不确定发生了什么，因为我主要是 PHP 人。

```
<script language="javascript" type="text/javascript">
<!-- 
//Browser Support Code
function ajaxFunction( str){
    var ajaxRequest;  // The variable that makes Ajax possible!

    try{
        // Opera 8.0+, Firefox, Safari
        ajaxRequest = new XMLHttpRequest();
    } catch (e){
        // Internet Explorer Browsers
        try{
            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try{
                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e){
                // Something went wrong
                alert("Your browser broke!");
                return false;
            }
        }
    }
    // Create a function that will receive data sent from the server
    ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4){
            document.getElementById("emailconfirm").innerHTML= ajaxRequest.responseText;
        }
    }

    ajaxRequest.open("GET", "Atest.php?Email="+str, true);
    ajaxRequest.send(null); 
}

//-->
</script> 
```

表格

```
<form name='myForm'>

    <input name="email"   id="email"type="text" />
    <input name="button" onclick="ajaxFunction(document.getElementById('email').value" type="button" />
</form> 
```

我希望能够在单击按钮后，将电子邮件文本输入传递给 javascript 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:31:50.620

你几乎是完美的，只有几件事：

`)`您在活动中错过了一个`onclick`。只需将其添加到末尾，它应该可以工作。

您不需要所有这些`try..catch`东西，除非您需要支持 Internet Explorer 6，因此您可以摆脱它并离开`ajaxRequest = new XMLHttpRequest()`.

# php - 如何在发送给用户之前重命名原始文件

> ID：12270107
> 
> 赞同：1
> 
> 时间：2012-09-04T19:29:18.970
> 
> 标签：php, header

实际上，我的网站上有一些下载链接，例如“http://www.example.com/somesong.mp3”。现在，当用户单击此链接时，他们会得到 somesong.mp3，但我想在下载之前对其进行更改。我发现许多脚本使之成为可能，但没有得到完全正确的脚本。因为我希望当用户点击下载链接时，文件下载应该在点击我想要使用的新文件名后立即开始。

但是在我下载的所有脚本中，首先 php 处理开始几分钟（我认为这取决于文件大小）然后重命名它。有没有办法用新文件名直接强制文件头中的文件。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:30:56.917

尝试这个

```
header("Content-Disposition: attachment; filename=whatever you want"); 
```

# css - CSS：删除通用选择器应用的边框

> ID：12270109
> 
> 赞同：0
> 
> 时间：2012-09-04T19:29:25.263
> 
> 标签：css

```
<span class="span3">
    <input type="text" class="dottedLineInput" placeholder="New milestone name"></niput>
</span>​

textarea, input[type="text"], input[type="password"], input[type="datetime"], input[type="datetime-local"], input[type="date"], input[type="month"], input[type="time"], input[type="week"], input[type="number"], input[type="email"], input[type="url"], input[type="search"], input[type="tel"], input[type="color"], .uneditable-input {
background-color: white;
border: 1px solid #CCC;
-webkit-border-radius: 3px;
-moz-border-radius: 3px;
border-radius: 3px;
-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
-moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
-webkit-transition: border linear 0.2s, box-shadow linear 0.2s;
-moz-transition: border linear 0.2s, box-shadow linear 0.2s;
-ms-transition: border linear 0.2s, box-shadow linear 0.2s;
-o-transition: border linear 0.2s, box-shadow linear 0.2s;
transition: border linear 0.2s, box-shadow linear 0.2s;
}

.dottedLineInput {
border: 0 !important;
margin-top:20px;
-webkit-box-shadow: 0;
-moz-box-shadow: 0;
box-shadow: 0;
border-bottom: 1px dotted #BBB !important;
}
.dottedLineInput:focus {
 outline: none;   
} 
```

这是代码。一般选择器样式适用于我的输入，我无法摆脱`dottedLineInput`类内的框阴影。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:33:17.210

试试`none`，这是`box-shadow`的默认值：

```
-webkit-box-shadow: none;
-moz-box-shadow: none;
box-shadow: none; 
```

如果由于某种原因仍然无法正常工作，请尝试添加`!important`：

```
-webkit-box-shadow: none !important;
-moz-box-shadow: none !important;
box-shadow: none !important; 
```

# javascript - 在 LI click 上更改课程

> ID：12270111
> 
> 赞同：1
> 
> 时间：2012-09-04T19:30:04.687
> 
> 标签：javascript, jquery

我需要动态地将 .selected 类分配给我单击的元素，并删除分配给单击元素的任何其他先前类，以便我可以更改 CSS 类。也许这段代码：

```
$(this).click(function(){
  $(this).addClass('selected');
}); 
```

有效，但如果我点击任何其他 LI 会发生什么？有什么帮助来完成这项工作吗？

编辑：好的，请参阅此代码：

```
<ul>
  <li>Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
</ul> 
```

默认情况下，没有任何类，但我单击第 2 项，然后 HTML 应该在这个上进行转换：

```
<ul>
  <li>Item 1</li>
  <li class="selected">Item 2</li>
  <li>Item 3</li>
</ul> 
```

但是如果我再次单击第 3 项，那么 HTML 应该在这个上进行转换：

```
<ul>
  <li>Item 1</li>
  <li>Item 2</li>
  <li class="selected">Item 3</li>
</ul> 
```

这就是我想要做的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:31:38.397

我建议：

```
$(selector).click(function(){
  $('.selected').removeClass('selected');
  $(this).addClass('selected');
}); 
```

关于moonwave99（下）留下的评论，如果您只想`selected`从同一元素中包含的那些元素中删除类名`parent`：

```
$(selector).click(function(){
  var that = $(this);
  that.parent().find('.selected').removeClass('selected');
  that.addClass('selected');
}); 
```

尽管值得记住您正在单击的元素以及父元素是什么，例如，单击`a`以下 HTML 中的 ：

```
<ul>
    <li><a href="#">link text</a></li>
</ul> 
```

将在 中查找`li`其他`.selected`元素，因此您应该使用：

```
$(selector).click(function(){
  var that = $(this);
  that.closest('ul').find('.selected').removeClass('selected');
  that.addClass('selected');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:01:02.090

首先从 ul 中的所有 li 中删除选定的类，然后将类应用于单击的 li。

```
$('ul li').click(function(){
 $('ul li').removeClass('selected');
  $(this).addClass('selected');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-02T10:47:32.567

在我的旅行中，我发现使用引导程序时无法添加“活动”类来列出项目。因此，如果您正在阅读本文（就像我一样）想知道为什么当类名“活动”时这不起作用，您需要选择其他东西。

# android - Android相当于UIScrollView中的UIView中的UIImageViews

> ID：12270116
> 
> 赞同：0
> 
> 时间：2012-09-04T19:30:22.637
> 
> 标签：android, uiscrollview, uiimageview

我在 iOS 中有一个很好的视图，想在 android 中做同样的事情，但不知道怎么做。

基本上它是一个大背景图像和几个较小的图像叠加，整个需要同时缩放，例如一张有汽车的地图。

我尝试使用 WebView，但无法正确配置它，因此我正在寻找更好的解决方案。而且我需要捏缩放功能，Webview -/+ 并没有真正的帮助。

工作代码也会很好，因为我尝试的大多数示例都没有按预期工作。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-04T21:44:17.253

util会将您的ImageViews放在GridView中吗？

[http://developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)

[http://developer.android.com/reference/android/widget/ImageView.html](http://developer.android.com/reference/android/widget/ImageView.html)

# html - 居中对齐 html 页面中的固定顶部菜单

> ID：12270117
> 
> 赞同：-3
> 
> 时间：2012-09-04T19:30:29.040
> 
> 标签：html, css

我正在开发一个简单的网页，在该网页上使用`div`标签中的菜单栏。当我不固定`div`标签时，可以使用以下方法在中心对齐：

```
.top .overlay{
 background-image:none;
 text-align:center;
} 
```

但是当我使用`position: fixed;`然后菜单的对齐方式不起作用

```
.top .overlay{
 background-image:none;
 position:fixed;
 text-align:center;
} 
```

如果我使用固定边距，它会起作用，但问题是行为会根据屏幕分辨率而改变。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:37:59.727

将此添加到您的 CSS 中：

```
.top .overlay {
    width: 100%;
    text-align: center;
} 
```

并且不要忘记删除该`margin-left: 18%;`部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:36:16.350

试着放进`margin:0 auto;`去`.top .overlay {}`

```
 .top .overlay{
background-image:none;
position:fixed;
text-align:center;
margin:0 auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:37:03.350

为您解决方案：设置`width`为 100%

.top .overlay{ ...位置：固定；宽度：100%；... }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T19:43:20.633

我在你的网站上用 firebug 尝试了这个 CSS 并且它有效：

```
.top .overlay {
    background-image: none;
    margin: 0 auto;
    width: 830px;
} 
```

只有设置了 a 时，CSS 属性的`auto`值`margin`才会起作用`width`。我还删除了该`position`属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T19:56:48.543

```
#container {
    position :fixed;
    margin: auto;
    top:0%;
    width: *AS_REQUIRED* px;
}

#container p {
    text-align: center;
} 
```

如上所示，我创建了两个部门：

1.  *定位菜单及其设计*
2.  *对于菜单内的文本*

***注意***`<p> </p>`：当您在标签内写入文本时，文本将居中对齐

# visual-studio - 断开 TFS 中单个文件的分支链接

> ID：12270118
> 
> 赞同：2
> 
> 时间：2012-09-04T19:30:33.140
> 
> 标签：visual-studio, tfs, merge, branch

当我们从 TFS 中的主干创建一个分支时，我们还将 web.config 更改为指向不同的数据库、Web 服务等。当我们进行错误修复时，我们在发布分支中进行并合并回主干。我想要一种方法来单击分支的根节点并将整个东西合并回主干，*除了*web.config 具有发布分支特定设置的不应合并回来。

有没有办法打破这个文件的分支链接，或者有没有其他方法可以在合并回主干时永久排除发布 web.config？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:24:04.210

您今天有两种选择：

1.  使用“tf 合并/丢弃”。当跨分支对文件执行时，它会告诉合并引擎您不希望在这两个分支之间合并此特定更改。这种方法的缺点是每次签入文件更改时都需要运行 tf merge /discard。如果您想放弃从 releasebranch 移​​动到 trunk 的更改，语法如下所示：

    tf 合并 $/releasebranch/.../web.config $/trunk/.../web.config /discard

2.  第二个选项是在执行合并时隐藏目标分支中的 web.config。也就是说，如果您要合并到主干，请将 web.config 文件隐藏在工作区的主干分支中。执行合并时，由于合并的目标是隐藏的，因此更改不会流过分支。当然，这里的缺点是您必须记住每次都使用此配置在工作区中执行合并。

奖励：我创建了这个[uservoice 建议](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3132354-allow-developers-to-indicate-that-certain-files-sh)来改善这种体验。如果您希望看到改进，请投赞成票。

# java - 使用 SAX 进行 XML 模式验证 - 它是如何工作的？

> ID：12270126
> 
> 赞同：4
> 
> 时间：2012-09-04T19:31:01.333
> 
> 标签：java, xml, schema, sax

根据[Validating a HUGE XML file](https://stackoverflow.com/questions/40663/validating-a-huge-xml-file) 同意，但我仍然感到困惑......如何使用 SAX 解析进行 XML Schema 验证。我的意思是模式验证涉及在 XML 中来回验证以验证例如 - 键引用等。不应该整个 XML 都可以在内存中使用吗？抱歉这个愚蠢的问题:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T22:27:21.417

可以使用几乎为零的内存来完成对模式的验证。UPA 约束确保针对内容模型的验证永远不需要回溯。当然，您确实需要跟踪堆栈上每个元素在内容模型的 FSM 中的状态，即内存与文档的最大嵌套深度成正比。

ID/IDREF 验证是一个例外：为此，处理器需要与遇到的 ID 和 IDREF 值的数量成比例的内存。粗略地说，处理器会记住找到的所有 ID 和 IDREF 值，当它到达文档末尾时，检查是否没有 ID 出现两次，并且每个 IDREF 都出现在这些 ID 中。类似地，为了检查 unique/key/keyref，处理器需要记住已找到哪些键值。但是这样做所需的内存比“将整个 XML 保存在内存中”要少得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:45:52.580

大多数解析器必须在开始任何验证之前在内存中构建一个 Schema/DTD 树，之后它主要是按顺序查找，有时还会进行一些推送、查看和弹出操作。

# asp.net - 验证组如何与 LinkBut ton 一起使用？

> ID：12270133
> 
> 赞同：0
> 
> 时间：2012-09-04T19:31:34.037
> 
> 标签：asp.net, validation

我的页面上有 LinkBut​​ton，每次单击其中一个时，它们都会导致验证。我知道**validationgroup**属性会阻止对每个回发进行验证。不幸的是，我没有看到 LinkBut​​ton 的任何验证组属性。有没有其他方法可以获得相同的结果？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:34:23.923

ValidationGroup 实际上是 LinkBut​​ton 的一个属性。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:44:20.273

我没有清楚地理解你的问题。

`ValidationGroup is used to organize validation controls on a page as a set.`例如，如果您想对 Web 表单上的某些控件执行验证，则为`ValidationGroup`所有验证控件分配相同的名称。阅读 MSDN 上的以下帖子，它将清楚您对 ValidationGroups 的概念。 [MSDN 链接](http://msdn.microsoft.com/en-us/library/ms227424%28v=vs.100%29.aspx)

如果要取消对链接 Button 执行的验证，请设置其`CausesValidation property to false`.

# wpf - MouseDown、PreviewMouseDown 等...以及 MVVM 中的 COMMAND 绑定

> ID：12270134
> 
> 赞同：3
> 
> 时间：2012-09-04T19:31:37.703
> 
> 标签：wpf, mvvm, binding, command, mousedown

我试图理解这个概念，但它让我难以理解。

这背后的一般概念是什么？我知道这是可能的，但我并没有完全按照我的研究/自己的测试项目来做到这一点。

我想在我的视图中不惜一切代价避免代码落后。我想从视图中分离诸如“PreviewMouseDown”之类的事件，并让它们触发 ViewModel 中的命令。

谁能给我一些有关如何完成此任务的基本指导？

概括：

查看 (PreviewMouseDown) -> 在 ViewModel (MyPreviewMouseDownCommand) 中调用命令

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-04T19:36:24.793

有被否决的风险我认为这不是世界上最糟糕的事情

```
public void PreviewMouseDown(Object sender, RoutedEventArgs e)
{
    var viewModel= (MyViewModel)DataContext;
    if (viewModel.MyCommand.CanExecute(null))
        viewModel.MyCommand.Execute(null);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T19:33:38.717

这通常通过某种形式的[Attached Property](http://msdn.microsoft.com/en-us/library/ms749011.aspx)或[(Blend) Behavior](http://blogs.msdn.com/b/expression/archive/2009/03/23/an-introduction-to-behaviors-triggers-and-actions.aspx)来处理。

例如，MVVM Light 包含一个[EventToCommand 行为](http://geekswithblogs.net/lbugnion/archive/2009/11/05/mvvm-light-toolkit-v3-alpha-2-eventtocommand-behavior.aspx)，它允许您将任何事件路由到`ICommand`XAML 中，而无需添加任何代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T19:37:15.600

这都是关于[Commanding](http://msdn.microsoft.com/en-us/library/ms752308.aspx)和[Binding](http://msdn.microsoft.com/en-us/library/ms752347.aspx)的。但我会鼓励您更好地使用为您提供管道的框架。如果您想查看第一个策略，您可以按照[Reed](https://stackoverflow.com/a/12270159/744484)的建议使用 MVVM Light。但是，如果您想要 ViewModel 第一种方法（我**个人**发现它更容易理解），那么我建议您使用[Caliburn Micro](http://caliburnmicro.codeplex.com/)。

无论如何，如果您想清理代码隐藏，您最终将使用 Event to Command 或 Interactivity Library（来自 Blend SDK）。

# sql - 引用表变量

> ID：12270136
> 
> 赞同：1
> 
> 时间：2012-09-04T19:31:41.790
> 
> 标签：sql, sql-server

我在更新语句中引用表变量时遇到问题。似乎我不能使用该`@a.id`列（编译器说它没有声明）。

下面的例子只是为了说明问题而写的，意思是我知道我可以解决当前示例中重命名列 id 并避免`@a.id`引用的问题，但这不是一个选项，我真的做不到。我看到一些解决方案使用 from 语句为正在更新的表设置别名，但在此示例中，我将 from 语句用于其他内容。有没有其他方法可以解决它？

```
declare @a table
(
    id int not null,
    name varchar(100) null
)

insert into @a (id, name) values (1, null)
insert into @a (id, name) values (2, null)
insert into @a (id, name) values (3, null)

declare @b table
(
    id int not null,
    name varchar(100) null
)

insert into @b (id, name) values (1, 'one')
insert into @b (id, name) values (2, 'two')

update @a
set
    name = f.name
from
(
    select
        id,
        name
    from @b
    where
        id = @a.id
) f
where
    @a.id = f.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:43:17.103

尝试这样的事情：

```
declare @a table 
( 
    id int not null, 
    name varchar(100) null 
) 

insert into @a (id, name) values (1, null) 
insert into @a (id, name) values (2, null) 
insert into @a (id, name) values (3, null) 

declare @b table 
( 
    id int not null, 
    name varchar(100) null 
) 

insert into @b (id, name) values (1, 'one') 
insert into @b (id, name) values (2, 'two') 

update upd
set 
    name = [@b].name 
from @a AS upd
INNER JOIN @b
    ON upd.id = [@b].id 
```

顺便说一句，以下也将起作用：

```
update @a 
set 
    name = f.name 
from 
( 
    select 
        id, 
        name 
    from @b 
) f 
where 
    [@a].id = f.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:44:04.247

对@a.id 的引用是非法的，因为此时该表超出了范围。您可以尝试以下方法：

```
Update @a
  set name = f.name
  from @b g
  join @a f
    on g.id=f.id 
```

# ruby-on-rails - Rails在ajax调用时忽略select sql

> ID：12270139
> 
> 赞同：0
> 
> 时间：2012-09-04T19:31:52.050
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, postgresql

当用户登陆页面时，我会打电话：

```
@objects = Object.select("objects.*, MAX(votes.updated_at) AS 
               mv").joins(:votes).group("objects.id").
               order("mv DESC").includes(:categories) 
```

这很好用。

但是，我有一个用于排序的 ajax 调用，当它调用完全相同的命令时，我遇到了一个错误，提示“mv 不是列”，这是查询：

```
SELECT COUNT(*) AS count_all, objects.id AS objects_id FROM "objects" 
       INNER JOIN "votes" ON "votes"."object_id" = "objects"."id" 
       GROUP BY objects.id ORDER BY mv DESC 
```

为什么相同的命令完全忽略了 select 调用。它只用 count_all 和 objects_id 替换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:32:40.640

It might be because mv is not select for 'output' so do `SELECT COUNT(*) AS count_all, mv, ...`

# c - openssl AES256 文件部分多重加密（稍后加入）

> ID：12270141
> 
> 赞同：1
> 
> 时间：2012-09-04T19:31:58.650
> 
> 标签：c, encryption, openssl, encryption-symmetric

对于部分文件上传和加密，我想从大文件（例如：100MB）中读取块（例如：10MB），使用 AES256 加密块并将块上传到服务器。在服务器上，这些块被连接到一个大文件中（然后应该代表完整的加密文件）。

我想在取出块并将它们发送到服务器之前避免对文件进行完全加密（例如：100MB！）（CPU开销，因为我首先需要复制整个文件并在整个文件上执行AES256 ）。

我尝试了以下（16MB 文件的示例 = 2 个块 = 1*10MB + 1*6MB）

第一个块约为 10MB，确保块大小是 16 的倍数（AES_BLOCK_SIZE）

```
EVP_CIPHER_CTX e_ctx;
EVP_CIPHER_CTX_init(&e_ctx);
EVP_EncryptInit_ex(&e_ctx, EVP_aes_256_cbc(), NULL, key, iv);
EVP_EncryptUpdate(&e_ctx, enc_data, &outlen, unenc_data, chunksize_to_load_from_file_unencrypted); 
```

在第一个块期间，我不调用 EVP_EncryptFinal_ex() 因为加密尚未完成（也许这是问题？）。

第二个块是~6MB，我从`&outlen`上面加密了其余的数据偏移量

```
EVP_CIPHER_CTX e_ctx;
EVP_CIPHER_CTX_init(&e_ctx);
EVP_EncryptInit_ex(&e_ctx, EVP_aes_256_cbc(), NULL, key, iv);
EVP_EncryptUpdate(&e_ctx, enc_data, &outlen, unenc_data, chunksize_to_load_from_file_unencrypted);
EVP_EncryptFinal_ex(&e_ctx, enc_data+outlen, &final_length); 
```

在服务器上，两个文件部分被加入。然后我可以“成功”解密文件，与未加密文件的大小相同。但是在偏移量 ~10MB 处，一些字节是不同的（16 字节！= `AES_BLOCK_SIZE`）

任何的想法？那可能是填充物吗？不只是在最后吗？不`EVP_EncryptFinal_ex`通过整个文件时的行为会有所不同`EVP_EncryptUpdate`吗？

如何传输加密的部分文件块并将它们加入服务器以获得正确的加密文件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:55:08.003

您对第二个块使用了错误的初始化向量。使用[CBC](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block_chaining_.28CBC.29)，`iv`后续加密的 应该是前一个密文的最后 16 个字节。这样，只需连接加密的部分即可对整体进行加密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:24:43.613

通常你会为此使用计数器模式加密，但这似乎不适用于 OpenSSL。使用 OpenSSL 块密码，您不能只在文件中间开始加密/解密。对于 CBC，您需要知道之前的加密块并将其作为 IV 插入。如果您在客户端按顺序加密它们，那么您可以在服务器上相对轻松地解密它们。

当然，您也可以单独加密每个块，然后将解密的块连接在一起。

# ruby-on-rails - Rails：如何获取创建到今天的天数

> ID：12270142
> 
> 赞同：1
> 
> 时间：2012-09-04T19:32:03.553
> 
> 标签：ruby-on-rails

> **可能重复：**
> [以最“红宝石”风格计算 ActiveSupport:TimeWithZone 天数的差异？](https://stackoverflow.com/questions/3049941/calculate-difference-in-days-activesupporttimewithzone-in-the-most-rubyish-st)

我只需要打印出从现在开始创建的天数。

我试过这样的东西，但它一直打印0。

(Date.today - p.created_at).to_i

更多示例，当某些东西被created_at（09-01-2012）时，代码应该从今天的日期（09-04-2012）打印x天前的数字3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:39:35.100

您可以`distance_of_time_in_words`在视图中使用助手。如果您想要更精确的东西，我与人合着了一个名为[dotiw](http://github.com/radar/dotiw)的 gem ，它提供了相同的辅助方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:42:16.953

我和你有类似的问题。我使用来自这个站点的 Jquery Timeago 插件：[timeago](http://timeago.yarp.com/)

您可以编辑文本并以您的语言添加自定义。

对于格式化日期，我使用这个助手：

```
def date_show(d)
        date = Date.new(d)
        return date.in_time_zone.strftime("%d.%m.%Y @ [%H:%M]")
end 
```

这是解决方案比在后台创建更便宜。如果您不能在视图中使用它，对不起我的回答。

# java - Android：addContentView() 直到屏幕状态改变才会出现

> ID：12270153
> 
> 赞同：2
> 
> 时间：2012-09-04T19:33:24.907
> 
> 标签：java, android, media-player, surfaceview

我正在在当前正在运行的活动之上添加视频。我已经设法使用以下方法实现了这一点：

```
this.surface    = new SurfaceView(getApplicationContext());
this.surface.getHolder().addCallback(this);
WindowManager.LayoutParams params = new WindowManager.LayoutParams();
params.height       = 500;
params.width        = 500;
this.activity.addContentView(surface, params); 
```

然后我将 MediaPlayer 附加到从 this.surface 获得的 SurfaceHolder。它完全按照我的需要工作，除了一件事：SurfaceView 直到屏幕状态更改后才会出现在屏幕上。我必须关闭屏幕才能将视图添加到活动中。之后，一切都按预期工作。

有人知道为什么会这样吗？

**编辑：从对 Kelvin Trinh 的评论中添加了更多信息。**

它是使用原生视频组件的 AIR Native Extension。AIR 应用程序充当主要活动，尽管我无法访问布局或类似的东西。this.activity 是主要活动，取自扩展上下文（AIR 和 Java 应用程序如何通信）。我需要视频显示在我的应用程序之上，我已经完成了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T02:20:42.563

您没有提供包装代码的类，但我想这是您主要活动中的一个视图。

`this.activity.addContentView(surface, params);`表示您在特定视图上时向您的活动添加表面视图。这只会将您的表面引用添加到 Activity 的视图层次结构中，并且**仅在**Activity**重新加载**（重新创建、重新启动或恢复）时更新。

# c# - 将控件添加到主 UI 容器

> ID：12270158
> 
> 赞同：1
> 
> 时间：2012-09-04T19:33:37.497
> 
> 标签：c#, wpf, wpf-controls

我在一个 XAML 中几乎没有扩展器。还有另一个包含 StackPanel 的主 UI 应用程序。

本地控制.XAML

```
<UserControl>
     <Expander Name="ExpA">
         <StackPanel>
           <ComboBox />
           <TextBox />
         </StackPanel>
     </Expander>

     <Expander Name="ExpB">
         <StackPanel>
             <ComboBox />
             <TextBox />
             <Button />
         <StackPanel>
     </Expander>
</UserControl> 
```

我在初始化期间在 LocalControl.xaml.cs 中为此 Expanders 和其他 UI 控件的绑定设置了 DataContext。每当某些事件触发时，我想将这些扩展器加载到 StackPanel 下的 maincontrol 中。

我有一个中间人类，它监听来自 LocalControl.xaml.cs 的加载和卸载事件。让我们称之为Manager.cs。

管理器.cs

```
public class Manager {

  public Manager(MainControl mc)
  {
     LocalControl lc = new LocalControl();
     lc.loadMe += loadControl;
  }

  private void loadControl(sender, MyEventArgs e)
  {
      foreach(var exp in e.Expanders){
          mc.SP.Add(exp);
      }
  }
} 
```

我有主控件，我需要在我的应用程序中显示 UI 控件。

```
<UserControl>
    <StackPanel Name="SP">
        <!-- Add expanders here  -->
    </StackPanel>
</UserControl> 
```

如何确保已在 MainControl StackPanel 中加载了此扩展器？

无论如何我可以在 LocalControl 中公开一些属性并按需在 MainControl 中使用该属性吗？

简而言之，我想在运行时将一个 XAML 文件下的小控件加载到另一个 XAML 文件中的 StackPanel 控件中。我不想在编译期间在 MainControl XAML 中添加这些控件。在我的应用程序中，我有许多需要添加运行时的扩展器。

我希望这个问题很清楚。

PS：请忽略所有语法问题。我的目的是给出一些想法，我想用这个做什么。

# symfony - 如何在 Symfony2 中定义一个额外的邮件服务来使用假脱机和发送即时电子邮件

> ID：12270162
> 
> 赞同：7
> 
> 时间：2012-09-04T19:33:50.100
> 
> 标签：symfony, dependency-injection, swiftmailer, spool

在我的 Symfony2 网络应用程序中，我应该发送两种电子邮件：即时和批量。即时电子邮件应立即发送，而批量电子邮件应使用假脱机发送。使用 Symfony2 中 Swiftmailer 的默认配置是不可能的，因为只有一个邮件服务。

类似的问题已经在 SO（[如何假脱机电子邮件（在任务中）并在其他控制器中发送普通电子邮件？](https://stackoverflow.com/questions/10741452/how-to-spool-emails-in-a-task-and-send-normal-emails-in-the-moment-in-the-othe)）没有运气，但根据这个 github 线程（[https://github.com/ symfony/SwiftmailerBundle/issues/6](https://github.com/symfony/SwiftmailerBundle/issues/6)）可以创建第二个邮件服务，其配置与默认服务完全不同。那里的某个人 (stof) 建议按照 SwiftmailerBundle ( [https://github.com/symfony/SwiftmailerBundle/blob/master/Resources/config/swiftmailer.xml](https://github.com/symfony/SwiftmailerBundle/blob/master/Resources/config/swiftmailer.xml) ) 中的配置创建这个新服务作为可能的解决方案，但是我不知道具体是怎么做的。

有谁知道如何创建一个额外的邮件服务，我可以将其配置为假脱机，同时让默认邮件服务发送常规（即时）电子邮件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T20:13:47.630

我在[这里找到了解决方案](http://micjohnson.com/4/use-swiftmailer-spooling-while-having-instant-fosuserbundle-emailing-in-symfony-2-0)

这就是我实现它的方式：

首先，我将默认邮件服务配置为作为假脱机来发送批量电子邮件。

(config.yml)

```
swiftmailer:
    transport: %mailer_transport%
    encryption: %mailer_encryption%
    auth_mode: %mailer_auth_mode%
    host: %mailer_host%
    username: %mailer_user%
    password: %mailer_password%
    spool:
        type: file
        path: "%kernel.root_dir%/spool" 
```

然后，在我的一个包 (CommonBundle) 中，我注册了一个名为“instant_mailer”的新服务，该服务映射到 Swiftmailer 类。

（服务.yml）

```
instant_mailer:
    class: %swiftmailer.class%
    arguments: ["@?swiftmailer.transport.real"] 
```

最后，在我的控制器中，每当我想使用线轴发送电子邮件时，我都会这样做：

```
$mailer = $this->get('mailer'); 
```

并发送即时电子邮件：

```
$mailer = $this->get('instant_mailer'); 
```

# python - Python PIL 如何将 1 位深度图像转换为 RGBA？

> ID：12270163
> 
> 赞同：4
> 
> 时间：2012-09-04T19:33:57.097
> 
> 标签：python, image, python-imaging-library, rgba

和标题一模一样。我拍摄模式“1”的单波段图像并使用

```
image = Image.open("picture.tif") 
```

然后我尝试将其转换为 RGBA

```
image.convert("RGBA") 
```

然后每当我使用它检查它的模式时

```
print(image.mode) 
```

我知道它仍然是“1”。我什至使用“L”（这是另一种单波段图像模式）尝试过这个，但仍然没有运气。无论我做什么，它都不会转换。在网上搜索似乎只显示从“RGBA”转换为“1”，但我无法找到任何关于其他方式的信息。有没有办法（甚至在 Python 之外）将 1 位深图像转换为 RGBA？

帮助？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T19:55:55.573

`image.convert`不会更改图像的模式，它会返回具有新模式的新图像。

```
image = image.convert("RGBA") 
```

从[文档中](http://www.pythonware.com/library/pil/handbook/image.htm)：

> 除非另有说明，否则所有方法都会返回 Image 类的新实例，其中包含生成的图像。

# regex - 正则表达式获取数字

> ID：12270170
> 
> 赞同：0
> 
> 时间：2012-09-04T19:34:49.350
> 
> 标签：regex

我想用正则表达式替换以下字符串：

```
No. 1. 
```

和：

```
<a name='1'></a>No. 1. 
```

其中“1”可以是一位或两位数（例如 1、2、26、99）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:43:47.373

假设所有数字都以相同的方式声明，这很容易用 JavaScript 完成：

```
foo.replace(/No\. (\d+)\./, "<a name='$1'></a>No. $1."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:45:02.393

使用 GNU sed：

```
echo "No. 1." | sed "s#No\. \(\[0-9\]\+\)\.#<a name='\1'></a>\0#" 
```

# c# - 您如何在 asp.net 中存储自定义用户数据？

> ID：12270174
> 
> 赞同：1
> 
> 时间：2012-09-04T19:34:57.780
> 
> 标签：c#, asp.net, database, user-controls

我可能忽略了这样的问题，但我找不到。我有一个带有 C# 代码隐藏的 asp.net 站点，并且我有一种创建用户帐户、密码以及将其他数据与每个用户相关联的工作方法。我通过创建一个 Web 应用程序来启动这个站点，并且登录/注册功能都包含在内并且工作正常。我还有一个数据库，用户可以在网站上搜索和显示数据（所有这些也都有效）。但是，我希望用户能够在数据库中搜索数据，然后能够返回到他们保存为“正在关注”的页面的页面。我需要存储的只是数据库中的唯一标识符，以表明该人想要关注该页面。存储这些值的最佳位置在哪里？我可以通过将数据保存在 aspnetdb 数据库中来做到这一点吗？如果是这样，如果使用 asp.net Web 应用程序，我将如何在此数据库中编写自定义值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:47:31.590

如果您使用 ASP.NET 的[Membership](http://msdn.microsoft.com/en-us/library/yh26yfzy%28v=vs.100%29.aspx)功能，您可能希望使用 [MembershipUser.ProviderKey](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.provideruserkey%28v=vs.100%29)作为@dcreight 提到的唯一 ID。使用它来访问您自己的表。我不建议直接写入 aspnetdb。

# css - 浏览器调整大小时位置中断

> ID：12270175
> 
> 赞同：0
> 
> 时间：2012-09-04T19:35:01.380
> 
> 标签：css

我有一个盒子，上面写着“全新幻灯片”，我使用 css 代码将其定位到特定位置`left: -40px;`，如下图所示：

![浏览器全屏时OK](../Images/194cafb3c5406e13943d34f287917155.png)

但是当我调整浏览器的大小时，位置会中断，如下图所示：

![在此处输入图像描述](../Images/24edfe54cc1e69d2747097330e49a2ec.png)

如何解决这个问题？这样即使我调整浏览器的大小，框的位置也会相对调整自己？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:43:18.790

当浏览器调整大小时，此 div 会自行调整：

[http://jsfiddle.net/GolezTrol/fg9kL/](http://jsfiddle.net/GolezTrol/fg9kL/)

# git - 如何允许在 gitolite 删除远程分支并禁止非快进

> ID：12270177
> 
> 赞同：3
> 
> 时间：2012-09-04T19:35:10.713
> 
> 标签：git, gitolite, remote-branch, fast-forward

我们需要允许开发人员：

1）创建主题分支并将它们保存在远程仓库中。

2）做改变。

3）合并到“开发”分支。

4）删除主题分支（git push origin :TestRemoteBranch）。

但我们宁愿禁止使用具有使用 RW 权限的非快进合并。但是这个权限也禁止删除主题分支。

有什么方法可以避免非快进合并并允许删除主题分支（不是“开发”和“主”）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T00:15:53.320

我通过 gitolite v2 解决了这个问题（在主要分支上禁用倒带 - 主分支和开发）：

```
回购文件格式
        RW 主 = @all
        - 主人 = @all
        RW 开发 = @all
        - 发展 = @all
        RW+ = @全部
        配置 gitolite-options.deny-repo = 1

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:47:20.740

当您必须检查核心 gitolite 无法进行的检查时，是时候引入[VREF 了](http://sitaramc.github.com/gitolite/vref.html)：

> 对于以适用于该用户的规则开头的每个 refex，都会触发`VREF/FOO/`对被调用程序的调用`FOO`（[此处的位置](http://sitaramc.github.com/gitolite/cust.html)）。

因此，在您的程序“ `FOO`”中，您可以检查推送是非快进（拒绝）还是分支删除（允许）。

# jquery - 引用 DOM jQuery DOM 对象时使用变量

> ID：12270179
> 
> 赞同：2
> 
> 时间：2012-09-04T19:35:30.650
> 
> 标签：jquery, variables, dom, object

我试图理解为什么你不能用字符串和变量构造一个 jQuery DOM 对象（即使变量也是一个字符串）。

```
//Works
var test1 = $('#test');
test1.addClass('success');

//Works
var test2 = '#test';
$(test2).addClass('success');

//Fails
var test3 = 'test';
$('.' + test3).addClass('success');

//Fails
var id = 'test';
var test4 = '.' + id;
$(test4).addClass('success'); 
```

这是[一个 jsFiddle](http://jsfiddle.net/QeWLu/)来演示。

我觉得我可能缺少一些基本的东西，但我在 jQuery 文档中找不到任何关于此的内容。

**编辑：** Doh，我应该注意到我在示例中使用了错误的选择器。我选择了 mcpDESIGNS 的答案，因为它确实修复了我的 jsFiddle。但是，我的代码中仍然出现错误。（“未捕获的异常：语法错误，无法识别的表达式：。”）如果有人感兴趣，下面是发生的事情：

我试图获取 URL 中的当前哈希，将字符串保存为变量，使用它来构造 jQuery DOM 对象，并将该对象传递给函数。

```
var hashTag = window.location.hash;
hashTag = hashTag.substr(1);

currentObject = $('.'+hashTag);
setSpriteX(currentObject); 
```

当 URL 中没有哈希时，我发现我没有考虑到。我需要做的就是`hashTag = 'defaulthash';`在我设置之前添加`currentObject`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:37:36.217

你需要有`$('#' + test3)`，`var test4 = '#' + id;`因为你试图通过**ID**的而不是类来选择。

`. // class selector`

`# // ID selector`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:37:49.250

这 '。' 选择器是按类别的，而上面的选择器是按 ID 的。改变 '。' 至 '＃'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:38:09.230

就 jQuery 语法而言，您所做的一切都是正确的。您的问题是`.`选择器用于类，而不是 ID。使用`#`，你应该很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T19:39:11.133

您使用的是句点而不是`#`. 这是一个id，而不是一个类。

```
//Fails no more
var test3 = 'test3';
$('#' + test3).addClass('success');

//Fails no more
var id = 'test4';
var test4 = '#' + id;
$(test4).addClass('success'); 
```

[http://jsfiddle.net/Guffa/QeWLu/2/](http://jsfiddle.net/Guffa/QeWLu/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T19:47:00.323

鹰嘴豆，

1.  这是一个最好的方法，你必须遵循，因为缓存对象正在使用 addClass

    //工作 var test1 = $('#test');

    test1.addClass('成功');

2.  这也可以，但是与第一种方法相比性能下降，因为没有缓存对象。不受欢迎

    //工作
    var test2 = '#test';

    $(test2).addClass('成功');

3.这将不起作用，因为您是根据类而不是 ID 选择元素

```
 //Fails
   var test3 = 'test';
   $('.' + test3).addClass('success'); 
```

以前犯过同样的错误，您使用的是基于类名的选择器

```
//Fails
var id = 'test';
var test4 = '.' + id;
$(test4).addClass('success'); 
```

有关更多详细信息，请查看 Stackoverflow 中 Jquery 的最佳实践

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T19:48:29.813

您的 jsFiddle 代码中只有 id，但尝试按类选择它们

# java - 将 MVC 与 Window Builder 一起应用...？

> ID：12270186
> 
> 赞同：1
> 
> 时间：2012-09-04T19:36:13.157
> 
> 标签：java, swing, model-view-controller, user-interface, windowbuilder

我发现自己不得不很快适应 Window Builder（据我所知，这是用 Java 开发 Swing 接口的最简单方法）和将 MVC 应用于此的悲惨境地。

我已经在stackoverflow上找到了以下问题和答案，但我仍然有问题......

[关联](https://stackoverflow.com/questions/7682165/is-it-possible-to-define-your-own-controller-in-window-builder-for-eclipse)

代码如下：

```
 myButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            myButtonActionPerformed(evt);
        }
    });

    private void myButtonActionPerformed(java.awt.event.ActionEvent evt) {
   if (myControl != null) {
      myControl.myButtonAction();
   }
} 
```

控制类可能类似于：

```
class MyControl {

    void myButtonAction() {
        //TODO: implement control code
    }

} 
```

例如，如果我想从我的控制器调用一个视图，一个标签（例如）并让它在我按下按钮时显示一条消息......我如何去操作 myButtonAction() 函数中的标签MyControl 类？

或者用于填充/更新 JList ...？

到目前为止，我已经找到了十几个变体，如果有人能将我指向一个完整的 Window Builder + MVC 示例或教程，或者在下面的窗口中保留一些代码片段，我将不胜感激。

非常感谢...

# jquery - jquery滚动窗格不起作用

> ID：12270189
> 
> 赞同：1
> 
> 时间：2012-09-04T19:36:18.477
> 
> 标签：jquery, jscrollpane, jquery-jscrollpane

我正在尝试应用滚动窗格 jquery 工具，这应该很容易，但我不明白为什么它没有给出任何生命迹象......我想我可能在 jquery 连接中做了一些错误的命令。这是我在 html 中的连接图像：

```
<!-- JAVASCRIPT CONNECTIONS -->
        <script type="text/javascript" src="_js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="_js/jquery.scrollTo.js"></script>
        <script type="text/javascript" src="_js/scroll_resize.js"></script>
        <script type="text/javascript" src="_js/onload.js"></script>
        <!-- <script type="text/javascript" src="script/gen_validatorv31.js" language="JavaScript"></script>  -->
        <script type="text/javascript" src="_js/jquery.mousewheel.min.js"></script>
        <script type="text/javascript" src="_js/jScrollPane.js"></script>
        <script language="javascript" src="_php/calendar/calendar.js"></script>
        <script src="_js/jquery.prettyPhoto.js"></script>
        <!-- IE upgrade for crossbrowser -->
        <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>

        <!-- CSS CONNECTIONS -->
        <link type="text/css" rel="stylesheet" href="_css/style.css" media="screen"/>
        <link type="text/css" rel="stylesheet" href="_css/prettyPhoto.css"  media="screen" />
        <link type="text/css" rel="stylesheet" href="_css/jScrollPane.css" media="screen"/>
        <link type="text/css" rel="stylesheet" href="_php/calendar/calendar.css" media="screen"/>

        <!-- JQ Initialization -->
        <script type="text/javascript" charset="utf-8">
          $(document).ready(function(){
            $("a[rel^='prettyPhoto']").prettyPhoto({
                theme: 'light_square',
                opacity:'0.70',
                counter_separator_label: ' of ',
                autoplay: false
                });
          });
        </script>

        <script type="text/javascript">
            $(function(){
                $('.scroll-pane').jScrollPane({scrollbarWidth:20, scrollbarMargin:10});
            });
        </script> 
```

正如[网站](http://jscrollpane.kelvinluck.com/)所说，我已经插入了必要的文件并在我的 html 中插入了一个带有 .scroll-pane 类的 div，并且我在 css 中插入了 overflow: auto，因为他们评论。我已经插入了溢出-y，我也不工作。

在下面你会发现我应用到 div 的 CSS，它也分配了 class=".scroll-pane"。

**CSS应用于我想要一个特殊滚动条的div：**

```
#music_box{
    height: 60%;
    width: 40%;
    overflow: auto;
    margin-top: 1%;
} 
```

我已经花了几个小时来处理这个小错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:32:26.977

亚历山德罗，感谢您的帮助，但我发现了我的问题。

基本上我在一个与原始的 javascript 信息不同的网络中。所以我混合了两个版本的javascript内容。我慢慢地复制了在源代码中找到的文件的相同内容。

我检查了其他网站，但[这个](http://jscrollpane.kelvinluck.com/index.html)似乎对我有用。它也有很好的记录。对不起，我不记得其他网站了。对不起所有的麻烦...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:40:05.923

您是否将滚动窗格的高度设置为css？

```
.scroll-pane{
height:100px; //example
} 
```

# c# - 如何在安装 Windows 窗体应用程序时自动安装 MySQL dot net 连接器

> ID：12270190
> 
> 赞同：3
> 
> 时间：2012-09-04T19:36:23.080
> 
> 标签：c#, mysql

我对 C# .net windows 窗体应用程序很陌生。我正在构建一个 Windows 窗体应用程序并使用 MySql 作为后端。

现在的问题是，当我构建安装程序时，我希望我的安装程序检查用户 PC 中是否安装了 MySQL dot net 连接器，如果没有，它应该自动安装它。

一旦完成，我将使用我的应用程序创建一个数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:47:05.683

在 .NET 中，除非您尝试将程序集安装到 GAC 中，否则它们会随应用程序一起部署。不要在 GAC 中放置任何东西，除非你必须这样做，因为它会带来一大堆挑战并使管理应用程序变得更加困难。

我建议在应用程序中包含 MySQL 连接器程序集，并将它们包含在您的 MSI 包中。这有两个部分 - 在部署项目中，确保明确引用 MySQL 库。此外，在您的应用程序项目中，将引用的 Copy Local 属性设置为 True。通过这两个步骤，MySQL 连接器将与应用程序一起安装。不要太担心磁盘大小 - 如果内存可用，MySQL 连接器真的很小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-22T19:54:35.533

来自 MySQL 手册：

> 您还可以使用 msiexec 工具的 /quiet 或 /q 命令行选项自动安装 Connector/Net 包（使用默认选项），而不通知用户。使用此方法，用户无法选择选项。此外，不会显示任何提示、消息或对话框。

```
C:\> msiexec /package connector-net.msi /quiet 
```

要在自动安装期间向用户提供进度条，请使用 /passive 选项。

# javascript - 是否有一个 javascript 库来解析简单的查询？

> ID：12270194
> 
> 赞同：0
> 
> 时间：2012-09-04T19:37:00.223
> 
> 标签：javascript, user-interface, pattern-matching, string-matching

我想根据字符串中是否包含某些单词、字符串中是否不存在或某种组合来过滤字符串列表。我希望输入简单明了，例如：

```
input: "foo AND bar"
output: All strings containing 'foo' and 'bar'

input: "foo OR bar"
output: All strings containing 'foo' or 'bar'

input: "foo AND NOT bar"
output: All strings containing 'foo' but not 'bar' 
```

这写起来相当简单，但是有没有人已经这样做了，所以我不必以不太理想的方式重新发明轮子？这将是面向用户的，我不希望用户必须学习如何使用正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:54:35.677

我不知道任何库，但您可以使用 jQuery 的 :contains 选择器轻松编写类似的内容。

[http://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

# android - Android文本的顺序相反

> ID：12270199
> 
> 赞同：0
> 
> 时间：2012-09-04T19:37:18.293
> 
> 标签：android, arrays, json

由于下面的两个 for 循环，我应该得到一个专辑名称这个词，但我得到这个名字的顺序相反。例如，如果我期望“LINK”，我会得到“KNIL”......我哪里出错了？

这是代码：

```
jsonobj = new JSONObject(param);
JSONObject datajson = jsonobj.getJSONObject("data");
JSONArray news = datajson.getJSONArray(TAG_NEWS);
JSONArray actual = datajson.getJSONArray("actual");
for(int i = 0; i < news.length(); i++){
    JSONObject c = news.getJSONObject(i);

    // Storing each json item in variable
    String id = c.getString(TAG_ID);
    String title = c.getString(TAG_TITLE);
    String album = c.getString(TAG_ALBUM);
    TextView tv = (TextView) findViewById(R.id.imgtest);
    //tv.setText(album);
    if(!(album == "null")){
        String var[] = album.split("|");
        for(int a=0;a<var.length;a++){
            String t = var[a].intern();
            String al = ((TextView) findViewById(R.id.imgtest)).getText().toString();
            String b = t+al;
            tv.setText(b);
        }
    }else{
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:44:43.583

此行将最新字母添加`t`到现有 String 的开头`al`：

```
String b = t+al; 
```

然而，与其简单地在 ( `b = al + t`) 附近切换这条线，我推荐一种*更快*的方法：

```
String album = c.getString(TAG_ALBUM).replaceAll("|", "");
TextView tv = (TextView) findViewById(R.id.imgtest);
tv.setText(album); 
```

我看起来你只想删除“|” 字符串中的字符`album`，所以只需使用[`String.replaceAll()`](http://developer.android.com/reference/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29).

* * *

如果您需要`album`拆分成一个数组，那么当您重建字符串时，不要浪费时间调用`findViewById()`您已经拥有的视图。事实上你已经有了字符串，所以没有必要使用`getText()`：

```
String var[] = album.split("|");
StringBuilder builder = new StringBuilder();
for(int a=0;a<var.length;a++)
    builder.append(a);

// use builder.toString() when you want the cleaned album name. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:58:04.973

要将最新的字母添加`t`到当前字符串的末尾`al`：

```
b = al + t 
```

# php - 搞砸 Apple 推送通知服务

> ID：12270204
> 
> 赞同：0
> 
> 时间：2012-09-04T19:37:36.797
> 
> 标签：php, ios, push-notification, apple-push-notifications, provisioning

我一直在开发一个使用推送通知的应用程序。我一直在搞乱很多试图修复愚蠢的配置的东西，我真的不知道什么是什么了。

我设法修复了整个开发推送通知。而现在，我们即将发布。但是，切换到生产通知并没有预期的那么顺利。而且我仍然不太了解整个配置的事情。

我以为我只需要用新的 .cer 和 .p12 文件生成的新文件切换 .pem 文件，并从它尝试连接的 url 中删除“沙箱”。这只是导致我的 .php 发送推送中的“连接失败：0”。

.php

```
$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'dp.pem')
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

$fp = stream_socket_client(
    'ssl://gateway.push.apple.com:2195', $err,
    $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if(!$fp)
    exit("Failed to connect: $err $errstr" . PHP_EOL); 
```

在弄乱了 .p12 和 .cer 和 .cert 和 .pem 和 .mobileprovision .ipa 之后，我真的不知道该怎么办了。为什么我们必须转换为 .pem 并合并它们？这真的是 Apple 打算让我们这样做的方式吗？还是我一直在关注一个漂亮的 redicolus 教程？

我需要什么 .cer 文件？该应用程序应使用哪个配置文件？AppID vs 配置 vs 设备 vs 证书。到底是什么.. 除了切换到新的 .pem 文件并删除“沙箱”之外，我是否还需要做任何事情。我已经从门户激活并下载了“生产推送 SSL 证书”，并从中生成了我的 .pem 文件。我已尝试阅读此内容，但它非常困难且设置愚蠢！我确定我做错了什么。但无法弄清楚是什么，在哪里以及为什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:45:00.380

[推送通知服务](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)- 很棒的教程，你会发现你所有问题的 php 脚本 + 答案。

# function - 什么是最适合实现此 DSL 的语言？

> ID：12270209
> 
> 赞同：2
> 
> 时间：2012-09-04T19:37:54.483
> 
> 标签：function, hash, lambda, language-design, dsl

我想用非常短的语法编写一个 DSL，用于我注意到对编程非常重要的两件事，函数和哈希。这是我的设计：

创建一个哈希：

```
(a:1 b:2 c:3)
Same as JavaScript's: {a:1,b:2,c:3} 
```

创建有序哈希，省略键：

```
(x y 5) 
Same as JavaScript's: {0:'x', 1:'y', 2:5} 
```

创建一个匿名函数：

```
(a?)
Same as JavaScript's: (function(x){ return x.a; })
Example application:
    ((test a? b?) (a:1 b:2 c:3))
    >> Outputs (test 1 2) 
```

嵌套函数：

```
(a? a?') 
Same as JavaScript's: (function(obj1){ return function(obj2) { return [obj1.a,obj2.a]; }; })
Example double-application:
    (((a? a?') (a:1)) (a:2))
    Is reduced to: ((1 a?) (a:2))
    Then outputs: (1 2) 
```

哪种语言适合实现这种 DSL？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T04:47:19.393

这听起来很像您想要一种具有强大宏系统的语言，例如某种 Scheme。宏恰好允许这种语法扩展，其中原始语言的代码片段可以嵌入到您提出的新形式中（我假设您希望能够说`(a:1+1 b:2*2)`，等等）。此外，宏系统不会像外部预处理器那样使构建过程复杂化或破坏错误消息位置。

但是有一个坏消息，那就是我所知道的任何（非深奥）语言都没有足够的语法空间来提供您指定的确切语法。

这是我想出的语法：

哈希：

```
(: a 1 b 2 c 3)
; or, more clearly
(: (a 1) (b 2) (c 3)) 
```

索引键哈希：

```
(:lst 'x 'y 5) 
```

（如果您允许在哈希的 RHS 上使用裸词，那么您将很难引用变量，所以我假设您不希望这样）

匿名属性访问函数：

```
(anon. a) 
```

与前者一样，但通过对它们进行柯里化然后返回一个列表来获取多个参数：

```
(anon. a a) 
```

好消息是，您不需要编写词法分析器或解析器，也不需要在构建系统中乱搞来将这种语法添加到 Scheme。就几行代码，导入语法就像导入函数一样。

第一个宏（名为`:`）写起来非常简单：

```
(define-syntax-rule (: (k v) ...)
  (make-hash `((k ,v) ...))) 
```

第二个（名为`:lst`）更难，因为您需要生成索引。它可能不到十行代码，但我懒得写......

第三个宏 ( `anon.`) 有点不平凡，但很有趣，所以它是：

```
(define-syntax anon.
    (syntax-rules ()
      ((anon. attr attrs ...) 
       (lambda (x) (cons (hash-ref x 'attr) (anon. attrs ...) )))
      ((anon.)
        empty))) 
```

（请注意，为了保持一致性，我假设您希望`anon.`始终返回一个列表；否则需要`syntax-rules`为特殊情况添加一个额外的子句。）我不确定这`anon.`是否真的是一个有用的宏，但那是在你和你的代码库之间。

如果你想用宏来破解，我建议你试试我最喜欢的 Scheme 风格，[Racket](http://racket-lang.org)。它有一个特别面向宏观的世界观（参见[这篇博](http://blog.racket-lang.org/2007/05/macros-matter.html)文，写在 Racket 被称为“PLT 方案”时）。

# c# - 如何以编程方式调整 Tab 控件的大小？

> ID：12270213
> 
> 赞同：1
> 
> 时间：2012-09-04T19:38:02.747
> 
> 标签：c#, .net, winforms, tabcontrol

我想在我的 winform 上以编程方式调整选项卡控件的大小。

```
tabCtrl.Size.Width = Convert.ToInt32(numericUpDown1.Value);
tabCtrl.Size.Height= Convert.ToInt32(numericUpDown2.Value); 
```

但我得到错误：

> **无法修改“System.Windows.Forms.Control.Size”的返回值，因为它不是变量**

知道如何以编程方式调整 Tab 控件的大小吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T19:40:06.323

用这个。请注意`(int)`强制转换，因为`NummericUpdown.Value`它是一个`decimal`值。

```
tabCtrl.Size = new Size((int)numericUpDown1.Value, (int)numericUpDown2.Value); 
```

# excel - VBA MSXML2.XMLHTTP 为相同的 url 下载不同的内容

> ID：12270216
> 
> 赞同：2
> 
> 时间：2012-09-04T19:38:17.590
> 
> 标签：excel, msxml, vba

您好我正在尝试使用以下代码在 excel VBA 中打开一个 URL

```
Public Sub downloadCode()
Dim xHttp As MSXML2.XMLHTTP
Dim hdoc As MSHTML.HTMLDocument
Dim hElem As MSHTML.HTMLGenericElement
Set xHttp = New MSXML2.XMLHTTP
URL = Sheet8.Range("U3").value

If InStr(URL, "ebay.co.uk") = 0 Then
    MsgBox ("Invalid Ebay Link. Row:" & i)
    Exit Sub
End If

xHttp.Open "GET", URL
xHttp.send

Do
    DoEvents
Loop Until xHttp.ReadyState = 4

'put into an htmldocument object
Set hdoc = New MSHTML.HTMLDocument
hdoc.body.innerHTML = xHttp.responseText
xHttp.abort
Dim MyFile1, fnum1
MyFile1 = "C:\hp\outputFromExcel1.txt"
fnum1 = FreeFile()
Open MyFile1 For Output As fnum1
Print #fnum1, hdoc.body.innerHTML
Close #fnum1
Shell "C:\WINDOWS\explorer.exe """ & MyFile1 & "", vbNormalFocus
End Sub 
```

我要下载的网址是： [http ://www.ebay.co.uk/itm/Single-Charging-Station-Dock-for-Xbox-360-Controller-White-/150723862162?pt=UK_Chargers_Docks&hash=item2317d79e92](http://www.ebay.co.uk/itm/Single-Charging-Station-Dock-for-Xbox-360-Controller-White-/150723862162?pt=UK_Chargers_Docks&hash=item2317d79e92)

我的浏览器是 IE9 和 Windows7，但是它在一台 PC 上返回正确的数据，但在另一台具有相同配置的 PC 上返回不同的数据，可能是什么问题？我在浏览器中打开了 URL，它们的 HTML 源代码是相同的。

# c# - ViewModel 和 DependencyProperties 的设计时数据？

> ID：12270220
> 
> 赞同：0
> 
> 时间：2012-09-04T19:38:38.870
> 
> 标签：c#, .net, wpf, xaml, expression-blend

我一直在使用该`d:DataContext`属性为我的视图提供我的视图模型的设计时表示，但我现在遇到了这样一种情况，即我的视图也有 XAML 绑定到`DependencyProperty`我在我还想用设计时数据填充的视图控件。

如何为我的 ViewModel（通过示例数据）和控件的依赖属性提供设计时数据？

显然，我可以将所有属性滚动到我的 ViewModel 中以避免问题，但如果可能的话，我宁愿不这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:55:18.970

如果不知道依赖属性的来源是什么，就很难告诉您如何对这些依赖属性的来源执行任何特定操作。ViewModel 很简单：只需在设计时加载数据即可。从技术上讲，答案是在设计时简单地用值填充这些属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:00:15.203

对于我的情况，一个可行的解决方案是用来`d:DataContext`提供代表我的视图模型`Binding FallbackValue`的设计时数据，并使用该属性为我的 View UserControl 的依赖属性提供设计时数据。

如果没有`DataContext`提供，这些备用值将泄漏到运行时，但对于 MVVM 视图，这应该不是问题。

```
<UserControl
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         x:Name="myView" 
         x:Class="Example.MyView" 
         mc:Ignorable="d"                        
         d:DataContext="{d:DesignData /SampleData/MyViewModelSampleData.xaml}">

        <Label Content="{Binding ElementName=myView, Path=ADependencyPropertyOnMyView}"/>

</UserControl> 
```

# c - “未声明的 ENOTEMPTY”编译错误

> ID：12270223
> 
> 赞同：0
> 
> 时间：2012-09-04T19:38:50.367
> 
> 标签：c, posix

我必须删除指向的文件/目录`path`。所以我打电话`remove(path)`，如果这失败了`ENOTEMPTY`，那么它是一个非空目录，我会相应地处理它。

```
status = remove(path);
if (status == -1 && errno == ENOTEMPTY)
    ftw(path, recursive_dir_delete, 64); 
```

在编译时，我得到`ENOTEMPTY undeclared`. `ENOTEMPTY`在 unistd.h ( `man 2 rmdir`) 中定义，我有 #included，但我仍然收到错误。检查 errno 是否设置为的正确方法是`ENOTEMPTY`什么？

gcc 4.6.3，64 位 Ubuntu。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:42:37.500

错误常量在 C 标准头文件中声明`<errno.h>`。您必须`#include`在项目中使用该文件。

# c++ - xutility(2227): 警告 C4996: 'std::_Copy_impl'

> ID：12270224
> 
> 赞同：12
> 
> 时间：2012-09-04T19:38:54.610
> 
> 标签：c++, boost, warnings, base64

我收到此警告消息.. 但我不知道问题出在什么/哪里..！

包括

```
#pragma warning(push)
#pragma warning(disable:4996) 
#include <boost/archive/iterators/base64_from_binary.hpp>
#include <boost/archive/iterators/insert_linebreaks.hpp>
#include <boost/archive/iterators/transform_width.hpp>
#include <boost/archive/iterators/ostream_iterator.hpp>
#pragma warning(pop) 
```

和警告

```
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\xutility(2227): warning C4996: 'std::_Copy_impl': Function call with parameters that may be unsafe - this call relies on the caller to check that the passed values are correct. To disable this warning, use -D_SCL_SECURE_NO_WARNINGS. See documentation on how to use Visual C++ 'Checked Iterators'
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\xutility(2212): Siehe Deklaration von 'std::_Copy_impl'
1>          c:\users\perlig\documents\visual studio 2010\projects\restmanager\restmanager\**http.cpp(257)**: Siehe Verweis auf die Instanziierung der gerade kompilierten Funktions-template "_OutIt std::copy<boost::archive::iterators::insert_linebreaks<Base,N>,boost::archive::iterators::ostream_iterator<Elem>>(_InIt,_InIt,_OutIt)".
1>          with
1>          [
1>              _OutIt=boost::archive::iterators::ostream_iterator<char>,
1>              Base=boost::archive::iterators::base64_from_binary<boost::archive::iterators::transform_width<const char *,6,8>>,
1>              N=76,
1>              Elem=char,
1>                _InIt=boost::archive::iterators::insert_linebreaks<boost::archive::iterators::base64_from_binary<boost::archive::iterators::transform_width<const char *,6,8>>,76>
1>          ] 
```

如警告消息所述，代码出现在第 257 行。但我无法修复它，因为我不知道出了什么问题..

字符串数据包含一个“用户：密码”字符串，用于通过 http 进行基本身份验证。

http.cpp(257):

```
// typdef, prepare
using namespace boost::archive::iterators;
stringstream os;
typedef 
    insert_linebreaks<         // insert line breaks every 72 characters
        base64_from_binary<    // convert binary values ot base64 characters
            transform_width<   // retrieve 6 bit integers from a sequence of 8 bit bytes
                const char *,
                6,
                8
            >
        > 
        ,76
    > 
    base64_text; // compose all the above operations in to a new iterator

// encrypt
#pragma warning(push)
#pragma warning(disable:4996)
copy( //<<<<<------ LINE 257
    base64_text(data.c_str()),
    base64_text(data.c_str() + data.size()),
    boost::archive::iterators::ostream_iterator<char>(os)
);
#pragma warning(pop) 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T20:26:46.897

我想你知道警告的含义是什么，但首先我描述了警告，然后说如何摆脱它。Microsoft 在其 CRT、STL、MFC 等中实现了一组新的启用安全功能的功能，并将这些功能的旧版本标记为已弃用，以提示您应该迁移到新的安全版本。所以它说 std::copy 不安全！如何？如下：

```
char storage[ 10 ], *p = storage;
std::copy( std::istream_iterator<int>(std::cin), std::istream_iterator<int>(), p ); 
```

现在如果用户输入超过 10 个 int 会发生什么？内存将被覆盖，你破坏了你的记忆。

使用`boost::archive::iterators::ostream_iterator`是完全安全的，但由于它不遵循 MSVC 中安全迭代器的设计，因此将被认为是不安全的。

现在您应该通过输入标志来禁用此警告，或者添加一个`-D_SCL_SECURE_NO_WARNINGS`来禁用此警告（就像您所做的那样），但是为什么 pragma 不起作用？`cl``pragma`

原因很明显，这个 pragma 作用于作用域和你在它上面使用 pragma 的作用域没有错，你必须小心`xutility`这个 pragma，一切都会按预期工作。

# jquery - 使用选择框滚动到页面上的某个位置

> ID：12270230
> 
> 赞同：2
> 
> 时间：2012-09-04T19:39:25.693
> 
> 标签：jquery, scroll, drop-down-menu

我有以下选择框：

```
 <select id="selectBox" >
 <option value="section01">section01</option>
 <option value="section02">section02</option>
 <option value="section03">section03</option>
 </select> 
```

我在页面上有以下部分：

```
 <div class="page" id="section01">
  Some text here
 </div>

 <div class="page" id="section02">
  Some text here
 </div>

 <div class="page" id="section03">
  More text here
 </div> 
```

我想做的是让用户从滚动框中选择一些东西，然后让页面自动滚动到正确的部分。

我假设我可以使用 jquery 的 scrollTo() 方法——但我不确定如何在选择框中获取选项值——然后将网页实际向下移动到正确的 DIV 部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:43:04.670

尝试这个..

```
$(function () {
    $('#selectBox').change(function () {
        window.location.hash = '#' + $(this).val();
    });
}); 
```

**演示：http:** [//jsfiddle.net/qJm5D/1/](http://jsfiddle.net/qJm5D/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:43:51.057

```
$('.selectBox').change(function() {
    $(".selectBox option:selected").val();
    // Here you can trigger your scrollto function
}); 
```

将代码放入准备好的文档中，它应该可以工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:45:54.453

```
$('select').on('change', function(){
    var theDiv = $('#'+$(this).val()).offset().top;
    $('html, body').animate({
        scrollTop: theDiv
    });
}); 
```

[jsFiddle](http://jsfiddle.net/NgQFf/)

# .net - .NET 4.0 dll 加载 4.5

> ID：12270232
> 
> 赞同：0
> 
> 时间：2012-09-04T19:39:39.043
> 
> 标签：.net

已针对 4.0 的程序集可以加载针对 4.5 的程序集吗？

例如，面向 3.5 的项目无法加载针对 4.0 构建的程序集。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T20:48:48.567

~~4.5 是对 4.0 的就地更新。所以是的。~~

针对 Fx 4.0 构建的程序集*不能*引用针对 Fx 4.5 构建的程序集。

然而

针对 Fx 4.5 构建的程序集*可以引用*针对 Fx 4.0 构建的程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:00:21.637

我认为这是一个坏主意，因为您的 .NET4 应用程序也将在仅安装 .NET4 的机器上运行（未安装 .NET4.5）。在这种情况下，您的应用可能会遇到问题，因为它可能正在尝试使用 .NET4.5 功能，但机器上不存在 .NET4.5。我强烈建议改为构建 .NET4.5 应用程序。

# javascript - Javascript更改iframe上的scr

> ID：12270235
> 
> 赞同：0
> 
> 时间：2012-09-04T19:39:56.787
> 
> 标签：javascript, iframe

我的代码有问题。单击提交按钮时，我想更改 iframe url，但它不起作用。我发现了一些关于这个的问题，我发现了 GoToGoogle 功能，它必须转发给谷歌。这就是我的所有页面代码。

```
<script>
function sendMeToGoogle(){
document.getElementId('changeme').src="http://google.com/";
}
</script>
this is test

<iframe src="test" ID="changeme" ></iframe>
<input type="submit" onclick="sendMeToGoogle();" /> 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:46:28.683

您的问题是您没有调用正确的 Javascript 函数。你应该打电话

`document.getElementById`但相反，您正在调用`document.getElementId`不存在的。

# c# - 如何在 Visual Studio 2010 中打开 WebBrowser 控件？

> ID：12270236
> 
> 赞同：2
> 
> 时间：2012-09-04T19:39:58.730
> 
> 标签：c#, visual-studio-2010, webbrowser-control

如何在 Visual Studio 浏览器中打开 WebBrowser 控制器？

**我的代码**

```
WebBrowser wb = new WebBrowser();
wb.Navigate("http://www.google.com");
wb.Show(); 
```

我使用此代码，但无法在 Visual Studio 2010 中打开浏览器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T20:00:21.190

Ajay，您需要将控件添加到表单中。这样做：

```
WebBrowser wb = new WebBrowser();
wb.Location = //suitably.
Controls.Add(wb);
wb.Navigate("http://www.google.com"); 
```

但是，如果您已经将设计器中的 Web 浏览器添加到表单中，则无需在代码中实例化新的浏览器实例。相反，您只需执行以下操作：

```
webBrowser1.Navigate("http://www.google.com"); 
```

`.Show()`除非您之前隐藏了它，否则没有必要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T11:00:59.310

将 WebBrowser 控件从工具箱拖放到您的表单中。使用此代码导航

```
WebBrowser1.Nevigate("http://www.google.com") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:20:45.190

您的意思是要在 Visual Studio IDE 本身中打开网页吗？如果是这样，您必须根据需要编写 Visual Studio 的扩展、宏或插件。

使用 IVsWebBrowsingService 接口来做到这一点

```
var service = Package.GetGlobalService(typeof(SVsWebBrowsingService)) as IVsWebBrowsingService;
IVsWindowFrame pFrame = null;
var filePath = @"file:///C:/dell/foo.html";
service.Navigate(filePath, (uint)__VSWBNAVIGATEFLAGS.VSNWB_WebURLOnly, out pFrame);
pFrame.Show(); 
```

上面的代码应该写在 Visual Studio 插件或扩展中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T19:46:29.930

WebBrowser 类是一个嵌入式 Windows 窗体控件。如果您希望自动化 Internet Explorer，您需要使用 Process.Start 或 MSHTML。

# c# - 如何通过枚举名称和值名称获取未知枚举的值？

> ID：12270238
> 
> 赞同：19
> 
> 时间：2012-09-04T19:39:59.827
> 
> 标签：c#, enums

很抱歉问这个问题，但我没有找到适合这个任务的解决方案：

我有一个名为“myEnum”的枚举（函数不知道 MyEnum）我需要获取 myEnum 的值的 int 值

示例：
程序员将其枚举命名为“myEnum”：

```
 public enum myEnum
 {
     foo = 1,
     bar = 2,
 } 
```

我的函数应该执行以下操作：通过字符串获取“myEnum”的“foo”的值

功能应通过以下方式打开：

```
 public int GetValueOf(string EnumName, string EnumConst)
 {

 } 
```

因此，当程序员 A 通过以下方式打开它时：

```
 int a = GetValueOf("myEnum","foo"); 
```

它应该返回 1

当程序员 B 有一个名为“mySpace”的枚举时，想要返回值为 5 的“bar”

```
int a = GetValueOf("mySpace","bar") 
```

应该返回 5

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-04T19:50:02.407

您可以使用[Enum.Parse](http://msdn.microsoft.com/en-us/library/essfb559.aspx)来执行此操作，但您需要 Enum 类型的完全限定类型名称，即`"SomeNamespace.myEnum"`：：

```
public static int GetValueOf(string enumName, string enumConst)
{
    Type enumType = Type.GetType(enumName);
    if (enumType == null)
    {
        throw new ArgumentException("Specified enum type could not be found", "enumName");
    }

    object value = Enum.Parse(enumType, enumConst);
    return Convert.ToInt32(value);
} 
```

另请注意，这使用`Convert.ToInt32`而不是演员表。这将处理具有非基础类型的枚举值`Int32`。`OverflowException`但是，如果您的枚举具有超出 an 范围的基础值`Int32`（即：如果它是 ulong，因为值为 > `int.MaxValue`） ，这仍然会抛出 an 。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-04T19:43:59.850

请试试

```
int result = (int) Enum.Parse(Type.GetType(EnumName), EnumConst); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T19:44:07.560

我想您正在尝试从字符串值（它的名称）中实例化枚举，然后我建议您[通过反射获取它的成员](http://www.distribucon.com/blog/GettingMembersOfAnEnumViaReflection.aspx)，然后进行比较。

请注意反射[会增加一些开销](https://stackoverflow.com/a/224245/744484)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T19:56:55.517

我不清楚枚举类型的名称是否必须指定为字符串。

您需要使用 Enum.TryParse 来获取 Enum 的值。结合通用方法，您可以执行以下操作：

```
public int? GetValueOf<T>(string EnumConst) where T : struct
{
    int? result = null;

    T temp = default(T);
    if (Enum.TryParse<T>(EnumConst, out temp))
    {
        result = Convert.ToInt32(temp);
    }

    return result;
} 
```

要调用它，请使用：

```
int? result = GetValueOf<myEnum>("bar");
if (result.HasValue)
{
    //work with value here.
} 
```

# haskell - 如果类实例是循环，GHC 可以警告吗？

> ID：12270239
> 
> 赞同：13
> 
> 时间：2012-09-04T19:40:03.500
> 
> 标签：haskell

真实世界的 Haskell 有这个例子：

```
class BasicEq3 a where
    isEqual3 :: a -> a -> Bool
    isEqual3 x y = not (isNotEqual3 x y)

    isNotEqual3 :: a -> a -> Bool
    isNotEqual3 x y = not (isEqual3 x y) 

instance BasicEq3 Bool 
```

当我在 GHCI 中运行它时：

```
#> isEqual3 False False
out of memory 
```

因此，您必须至少实现这两种方法中的一种，否则它将循环。而且您可以灵活地选择哪一个，哪个整洁。

我的问题是，如果没有覆盖足够的默认值并且默认值形成循环，是否有办法获得警告或其他东西？对我来说很奇怪，如此疯狂聪明的编译器在这个例子中很好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T19:49:57.027

不，我担心 GHC 不会做那样的事情。这通常也是不可能*的*。

你看，类型类的方法可以以一种有用的方式相互递归。这是这种类型类的人为示例。`sumOdds`不定义or是完全可以的`sumEvens`，即使它们的默认实现是相互关联的。

```
class Weird a where
    measure :: a -> Int

    sumOdds :: [a] -> Int
    sumOdds [] = 0
    sumOdds (_:xs) = sumEvens xs

    sumEvens :: [a] -> Int
    sumEvens [] = 0
    sumEvens (x:xs) = measure x + sumOdds xs 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-04T21:15:46.983

我认为 GHC 在“不间断”循环依赖的情况下发出警告是完全可以的。甚至还有一张票：http: [//hackage.haskell.org/trac/ghc/ticket/6028](http://hackage.haskell.org/trac/ghc/ticket/6028)

仅仅因为某事“无法确定”并不意味着问题的任何实例都无法有效解决。GHC（或任何其他 Haskell 编译器）已经拥有相当多的所需信息，如果用户在没有“破坏”循环依赖的情况下实例化一个类，它完全有可能发出警告。如果编译器在以前的帖子中举例说明的极少数情况下出错，那么用户可以有一个`-nowarnundefinedcyclicmethods`或类似的机制来告诉 GHC 保持安静。在几乎所有其他情况下，警告都会受到欢迎，并且会提高程序员的工作效率。避免几乎总是一个愚蠢的错误。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-04T19:59:14.273

不，没有，因为如果编译器可以做出这个决定，那就相当于解决了停机问题。通常，两个函数以“循环”模式相互调用这一事实不足以得出实际调用其中一个函数将导致循环的结论。

要使用（人为的）示例，

```
collatzOdd :: Int -> Int
collatzOdd 1 = 1
collatzOdd n = let n' = 3*n+1 in if n' `mod` 2 == 0 then collatzEven n'
                                   else collatzOdd n'

collatzEven :: Int -> Int
collatzEven n = let n' = n `div` 2 in if n' `mod` 2 == 0 then collatzEven n'
                                        else collatzOdd n'

collatz :: Int -> Int
collatz n = if n `mod` 2 == 0 then collatzEven n else collatzOdd n 
```

（这当然不是实现[Collat​​z 猜想](http://en.wikipedia.org/wiki/Collatz_conjecture)的最自然的方式，但它说明了相互递归的函数。）

现在`collatzEven`和`collatzOdd`相互依赖，但 Collat​​z 猜想指出，调用`collatz`终止于所有 positive `n`。如果 GHC 可以确定一个具有`collatzOdd`并且`collatzEven`作为默认定义的类是否具有完整的定义，那么 GHC 将能够解决 Collat​​z 猜想！（这当然不能证明停止问题的不可判定性，但它应该说明为什么确定相互递归的函数集是否定义明确并不像看起来那么简单。）

一般来说，由于 GHC 不能自动确定这一点，Haskell 类的文档将给出创建类实例所需的“最小完整定义”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T19:56:22.870

我不这么认为。我担心您期望编译器解决停止问题！仅仅因为两个函数是相互定义的，并不意味着它是一个糟糕的默认类。此外，我过去使用过类，我只需要编写`instance MyClass MyType`来添加有用的功能。因此，要求编译器警告您该类是要求它抱怨其他有效代码。

[当然，在开发过程中使用ghci，并在编写完每个功能后对其进行测试！使用[HUnit](http://hunit.sourceforge.net/)和/或[QuickCheck](http://www.haskell.org/haskellwiki/Introduction_to_QuickCheck)，只是为了确保这些东西都不会出现在最终代码中。]

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-05T13:42:34.640

在我个人看来，默认机制是不必要且不明智的。类作者很容易将默认值作为普通函数提供：

```
notEq3FromEq3 :: (a -> a -> Bool) -> (a -> a -> Bool)
notEq3FromEq3 eq3 = (\x y -> not (eq3 x y))

eq3FromNotEq3 :: (a -> a -> Bool) -> (a -> a -> Bool)
eq3FromNotEq3 ne3 = (\x y -> not (ne3 x y)) 
```

（事实上​​，这两个定义是相等的，但一般情况下不会如此）。然后一个实例看起来像：

```
 instance BasicEq3 Bool where
   isEqual3 True True = True
   isEqual3 False False = True
   isEqual3 _ _ = False

   isNotEqual3 = notEq3FromEq3 isEqual3 
```

并且不需要默认值。然后，如果您不提供定义，GHC 会警告您，并且任何不愉快的循环都必须由您明确写入代码中。

这确实消除了在不影响现有实例的情况下向具有默认定义的类添加新方法的巧妙能力，但在我看来，这并不是一个巨大的好处。上述方法原则上也更灵活：例如，您可以提供允许`Ord`实例选择*任何*比较运算符来实现的函数。

# jquery - 如何使用 jquery 在下拉列表中添加/删除值

> ID：12270243
> 
> 赞同：0
> 
> 时间：2012-09-04T19:40:33.283
> 
> 标签：jquery

我有一个具有相同值的 2 个下拉列表，这些值由数据库值填充。我要解决的问题是提交表单时 2 个下拉框不能具有相同的值。POST 值必须不同。

如果用户从下拉框 A 中选择选项 A，我想从下拉框 B 中删除选项 A。如果用户然后从下拉框 A 中选择选项 B，我希望将选项 A 放回下拉框 B 和要从下拉框 B 中删除的新值选项 B。

我尝试了几种不同的方法来做到这一点，最接近的是以下代码。当页面加载时，这个位做我想要的......

```
$(document).ready(function() {
    $.dropdownAcache = { 
        val : "",
        val1 : "",
    };

    $('#id_A').ready(function() {
        var optionval = $('#id_A').val();
        $.dropdownAcache.val = $('#id_A').val();
        $('#id_B > option[value=' + optionval + ']').remove();
    });

    $('#id_A').click(function() {
        var optionval = $('#id_A').val();
        $.dropdownAcache.val1 = $('#id_A').val();
        $('#id_B > option[value=' + optionval + ']').remove();
        $('#id_B').append$(dropdownAcache.val);
        $.dropdownAcache.val = $.dropdownAcache.val1;
    }); 
```

....但它似乎所做的只是从下拉框 B 中删除值，但从不重新添加值。这实际上很可笑，因为我最终在下拉框 B 中没有值，但严肃地说，任何人都可以帮助得到这个工作？

干杯-奥利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:47:51.417

您应该使用的事件是“更改”事件。此外，您不需要第二个`.ready()`回调，它没有任何用途（第一个`.ready()`处理）

```
$.dropdownAcache = { 
    val : "",
    val1 : ""
};

$(document).ready(function() {

    var optionval = $('#id_A').val();
    $.dropdownAcache.val = $('#id_A').val();
    $('#id_B > option[value="' + optionval + '"]').remove();

    $('#id_A').change(function() {
        optionval = $('#id_A').val();
        $.dropdownAcache.val1 = optionval;
        $('#id_B > option[value="' + optionval + '"]').remove();
        $('#id_B').append( $.dropdownAcache.val );
        $.dropdownAcache.val = $.dropdownAcache.val1;
    });
}); 
```

（至于为什么你的列表永远不会得到添加的值，你有一个不幸的错字`.append$(dropdownAcache.val);`）

# r - 在 R 中单独使用花括号来创建折叠代码块？

> ID：12270244
> 
> 赞同：3
> 
> 时间：2012-09-04T19:40:35.340
> 
> 标签：r, curly-braces, rstudio

所以，我最近一直在使用 RStudio IDE，我真的很喜欢它。在编写 R 代码时，我一直在努力使其简单易读。然而，我的一些脚本只是在视觉上有点难以接受，尤其是当我切换到在我的家用电脑上工作时（1280x1024，与 2 个 1920x1080 面板）。

我注意到 RStudio 在使用花括号时支持折叠代码块，并且我用花括号测试了不同的代码块。RStudio 迅速为我缩进了它们，然后根据要求折叠它们。它似乎根本没有影响代码 - 仍然运行相同。

我知道我可以取出有问题的代码块并从中创建函数，这可能会完成同样的事情（折叠函数），但我很好奇是否有任何理由不应该在此使用花括号方式？我知道花括号已被证明可以加速 R 计算（[如此处所述](http://radfordneal.wordpress.com/2010/08/15/two-surpising-things-about-r/)），但我不确定它会如何影响我的程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:00:54.810

创建可折叠代码块的一个好方法是使用代码段。创建代码段的热键是 CRTL + SHIFT + R。另一种方法是将较长的脚本拆分为多个函数。这些功能也可以折叠。

# perl - 在 ActivePerl 上安装 Padre (IDE)？

> ID：12270250
> 
> 赞同：2
> 
> 时间：2012-09-04T19:40:57.153
> 
> 标签：perl, strawberry-perl, activeperl, padre

当我访问 Padre 的官方下载站点：[http](http://padre.perlide.org/download.html) : //padre.perlide.org/download.html 时，我看到 Windows 中唯一的选择是下载 Strawberry Perl 附带的 DWIM Perl 5.14.2.1 (v7 **)**。如果我只想在现有的 ActivePerl 安装上使用 Padre IDE 怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:11:10.730

您阅读的标题为“ActiveState Perl”的框下方的框给出了存储库的地址，该存储库包含 ActivePerl`ppm`系统的软件包，至少对于 Perl 5.12 和更早版本。

```
ppm repo add http://www.wxperl.co.uk/repository
ppm install Padre 
```

如果您的 Perl 比 5.12 更新，或者您不想使用，您可以像往常一样`ppm`使用安装模块。`cpan`

```
cpan Padre 
```

# xamarin.ios - 如何在动画时读取视图的位置

> ID：12270251
> 
> 赞同：1
> 
> 时间：2012-09-04T19:41:01.580
> 
> 标签：xamarin.ios

我正在为一艘小型太空船（源自 UIView）制作动画，并定期（在动画中）向它发送一个 PointF 以检查它是否在太空船的当前位置附近。但是，当读出 View 的 Frame 位置时，它会一直返回动画开始之前的起始位置。

我认为这是设计使然，但它给我带来了很大的问题，因为太空船应该沿着路径独立移动，而我用手来做这件事非常棘手。

还有另一种方法 - 和/或有人有一些示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:09:45.777

不确定您的问题的解决方法，但我对 iOS 游戏开发有一些建议。

您的问题是使用 UIKit/CoreGraphics 等 GUI 框架进行游戏不是一个好主意的原因之一。出于性能原因，以及它们并非为此而设计的事实。

如果你正在寻找一个在 iOS 上制作游戏的简单框架，你看过[MonoGame](https://github.com/mono/MonoGame)吗？如果您正在制作大量动画，我们还使用[XNA Tweener](http://xnatweener.codeplex.com/)和 MonoGame 来获得一些栩栩如生的动画。

[PS-在这里](http://www.youtube.com/watch?v=j7gtAWHSadI&feature=plcp)查看我们的游戏。

# ms-access - 最终用户运行时访问缺少 msado15.dll 的数据库

> ID：12270253
> 
> 赞同：2
> 
> 时间：2012-09-04T19:41:08.917
> 
> 标签：ms-access, ms-access-2007

我有一个脚本繁重的 Access db，我最近将它发送给最终用户进行错误测试。这些脚本主要读取数据，从内部表中添加/更新/删除，以及与共享驱动器交互。

**他们立即返回报告说最重要的部分由于对“msado15.dll”6.1 版**（又名 Microsoft ActiveX 数据对象 6.1 库）的引用丢失/损坏而无法运行。这带来了两个问题：

1.  为什么这个库会存在于我的机器上而不是他们的机器上？据我所知，我们所有的机器都有相同的标准 Office 安装包。是因为我有 SQL Server 而他们没有吗？

2.  我想我找到了一个替代方案，**msado28.tlb**（又名 Microsoft ActiveX Data Objects 2.8 Library），它似乎也能正常工作，但我还没有在用户的机器上测试过。这是一个很好的替代品吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:48:03.110

你需要分布式版本的库吗？您可以使用后期绑定：

```
Dim rs As Object
Set rs = CreateObject("ADODB.Recordset") 
```

使用早期绑定进行开发并使用后期绑定进行分发通常是最容易的。

# java - 通过正则表达式使用“包含检查”

> ID：12270258
> 
> 赞同：0
> 
> 时间：2012-09-04T19:41:24.610
> 
> 标签：java, regex

我想要一些关于正则表达式的帮助。基本上，我正在寻找可以匹配任何内容但包含关键字的内容。

正则表达式应匹配不包含“bar”的任何内容

```
 String i1 = "foo";
    String i2 = "foo bar";
    String i3 = "bar foo";

    Pattern p = Pattern.compile(".*\\(!(bar)\\).*");

    Matcher matcher = p.matcher(i1);
    System.out.println(matcher.matches()); // false, should be true

    matcher = p.matcher(i2);
    System.out.println(matcher.matches()); // false

    matcher = p.matcher(i3);
    System.out.println(matcher.matches()); // false 
```

如何更改正则表达式以正确执行包含检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:52:12.403

```
^(?:(?!bar).)*$ 
```

除非我弄错了，否则正是您要找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:47:55.640

你不能只匹配你的关键字并否定匹配吗？如：

```
String i1 = "foo";
Pattern p = Pattern.compile(".*\\((bar)\\).*");

Matcher matcher = p.matcher(i1);
System.out.println(!matcher.matches()); 
```

否则我会看看前瞻/后视运算符......

# opengrok - 替代opengrok

> ID：12270260
> 
> 赞同：8
> 
> 时间：2012-09-04T19:41:26.937
> 
> 标签：opengrok

我正在使用 OpenGrok 的替代品。我无法正确配置它。我想要的是浏览代码，就像我在 Visual Studio 中一样。我想要一个菜单​​，其中包含“转到定义”、查找参考等的最小选项。如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-30T21:15:13.157

我建议看看[Woboq Code Browser](http://woboq.com/codebrowser.html)。

它像编译步骤一样工作，动态分析代码以及符号如何相互链接。

[![在此处输入图像描述](../Images/750f9d323afff9cc94d3acf01eea3872.png)](https://i.stack.imgur.com/8rpwR.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:01:21.393

您在 Windows 上配置它时遇到问题吗？

OpenGrok 通过网络服务器工作得最好。您可能会发现租一些便宜的 VPS 机器更容易，并在此类服务器上远程配置 OpenGrok（而不是尝试在 Windows 机器上本地配置它），然后使用您的网络浏览器通过网络界面。

我曾经尝试在 Windows 机器上本地使用 OpenGrok，尽管它有效，但我对非 Web 版本没有任何语法突出显示感到不高兴，而且总体而言太尴尬而无法真正使用.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T03:52:37.500

有[文本夏洛克](http://cbess.blogspot.com/2011/10/text-sherlock-opengrok-alternative.html)。还有[github 项目](https://github.com/cbess/text-sherlock)。它可以使用 Whoosh 或 Xapian 作为其后端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-18T23:52:15.583

我会推荐 Codatlas。它具有跳转到定义、交叉引用和多语言支持等功能，例如 C/C++、Java、Python、Scala 等。

# android - 访问 setter 和 getter 方法

> ID：12270267
> 
> 赞同：0
> 
> 时间：2012-09-04T19:41:42.223
> 
> 标签：android, android-custom-view

我有一个 A 活动，它使用 setContentView(R.layout.activityA) 方法来设置布局。一个activityA 布局由一个customView 组成。我的 customView 有一堆 setter 和 getter。我如何从 A 活动中访问它们？当我在活动 A 中创建 customView 的实例时，它可以工作，但 customView 被创建了两次：一次来自 setContentView，第二次是在我创建它的新实例时。还有另一种访问这些方法的方法吗？请指教。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T19:46:04.607

您是否在 Activity 的代码中尝试过这样的事情：

```
@Override
public void onCreate(Bundle state){
    super.onCreate(state);
    setContentView(R.layout.activityA);
    CustomView customView = (CustomView)findViewById(R.id.customviewId);

    Something x = customView.someGetterMethodX();
    ...etc...

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:48:45.467

您可以使用[Java 反射](http://developer.android.com/reference/java/lang/reflect/package-summary.html)来读取属性和调用方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T19:58:36.513

您不必创建两次，只需找到您的自定义视图 ID 并将其分配给 CustomView 引用。像这样的东西：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.theLayout);

 CustomView customView = (CustomView) findViewById(R.id.customViewId);

customView.setSomething(someValue);

} 
```

# java - 在 Java ME 项目上启动调试时出现“缓冲区超出最大允许大小”错误

> ID：12270268
> 
> 赞同：4
> 
> 时间：2012-09-04T19:41:44.507
> 
> 标签：java, java-me, intellij-idea

我已经安装了`IntelliJ IDEA 11.1.3`。`Java ME platform SDK 3.0.5`我从头开始创建了一个 Java ME 项目，其中唯一的类扩展了*MIDlet*。我的运行/调试配置使用*DefaultCldcPhone1*作为设备模拟器。

当我尝试运行/调试应用程序时，我得到了这个：

```
Fatal Error: Buffer exceeds maximum allowed size (4096) 
```

**任何想法为什么会发生这种情况？**

**UPD1：**到目前为止，我发现这与 IDE 无关，因为将相同的命令复制粘贴到命令提示符会产生相同的结果（当然，除非 %MY_MODULE_NAME%.jar 生成不正确）。

**UPD2：**我手动缩短了命令（完全删除了类路径，不包括我的 jar）并且它按预期工作。我不明白，这个限制来自哪里？我在 Windows 7 上，如果这很重要的话。

IDEA 生成的运行命令（我添加的换行符，总长度为**3757**个符号）：

```
"C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\bin\emulator" 
-classpath "C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\agui_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\cdc_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\cdc_1.1.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\cldc_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\cldc_1.1.1.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\cldc_1.1.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\fp_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\fp_1.1.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr082_1.1.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr120_1.1.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr135_1.2.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr172_1.0-base.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr172_1.0-xmlrpc.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr172_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr177_1.0-apdu.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr177_1.0-crypto.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr177_1.0-jcrmi.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr177_1.0-pki.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr177_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr179_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr180_1.1.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr184_1.1.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr205_2.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr211_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr226_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr229_1.1.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr234_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr238_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr239_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr253_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr256_1.2.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr257_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr258_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr280_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr281_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr287_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr293_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\jsr75_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\midp_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\midp_2.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\midp_2.1.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\pbp_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\pbp_1.1.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\pp_1.0.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\pp_1.1.jar;
C:\Program Files (x86)\Java\Java_ME_platform_SDK_3.0.5\lib\secop_1.0.jar;
%MY_PROJECT_FOLDER%\%MY_MODULE_NAME%.jar" 
"-Xdescriptor:C:\Users\%MY_USERNAME%\.IntelliJIdea11\system\caches\temp5962107910134648248.jad" 
-Xdebug 
-Xrunjdwp:transport=dt_socket,address=61127,server=y 
-Xdevice:DefaultCldcPhone1 
```

# gwt - GWT：带有自定义选项卡的 TabLayoutPanel 无法正确显示

> ID：12270271
> 
> 赞同：1
> 
> 时间：2012-09-04T19:41:55.547
> 
> 标签：gwt

我有一个 TabLayoutPanel，我在其中放置了自定义小部件，以便选项卡能够在文本旁边显示一些图像。我最初使用 TabPanel 并为选项卡文本使用自定义 HTML，但自定义选项卡小部件允许我根据需要动态修改图像。

我的标签小部件本质上是一个 Horizo​​ntalPanel、一些小图像和一行文本。我遇到的问题是标签不想像往常一样粘在标签栏的底部。选项卡位于为选项卡栏保留的空间的顶部，并且它与选项卡栏的底部之间存在间隙。我将问题的图片上传到[http://imgur.com/fkSHd.jpg](http://imgur.com/fkSHd.jpg)。

我需要将某些样式应用于自定义小部件选项卡以使其正确显示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:06:29.200

根据我的简短经验，较新的标准模式面板（它们都以“LayoutPanel”结尾）与旧的（仅以“Panel”结尾的面板）无法相处。所以你可能会考虑尝试DockLayoutPanel而不是Horizo​​ntalPanel，它可能会更加合作。

请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels)，特别是名为“什么在标准模式下不起作用？”的部分：

> Horizo​​ntalPanel 有点棘手。在某些情况下，您可以简单地将其替换为 DockLayoutPanel，但这需要您明确指定其子项的宽度。最常见的替代方法是使用 FlowPanel，并使用 float: left; 其子级的 CSS 属性。当然，您可以继续使用 Horizo​​ntalPanel 本身，只要您考虑到上述注意事项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T02:04:21.610

经过更多研究，我在这里找到了答案：[https](https://groups.google.com/d/msg/google-web-toolkit/mq7BuDaTNgk/wLqPm5MQeicJ) ://groups.google.com/d/msg/google-web-toolkit/mq7BuDaTNgk/wLqPm5MQeicJ 。我不得不使用 InlineLabel 或 InlineHTML 小部件，而不是普通的 Label 或 HTML 小部件。我已经测试了这个解决方案，它完全符合我的要求。为了完整起见，我粘贴了下面类的代码。这里注意两点：

1.  不能在最后一个元素（InlineLabel）上设置“float”属性，否则会再次出现不正确的绘制条件。
2.  通过让类直接从 FlowPanel 扩展而不是使其成为包含 FlowPanel 的组合，可以进一步清理代码。

    ```
    package com.whatever;

    import com.google.gwt.core.client.GWT;
    import com.google.gwt.dom.client.Style.Float;
    import com.google.gwt.dom.client.Style.Unit;
    import com.google.gwt.resources.client.ClientBundle;
    import com.google.gwt.resources.client.ImageResource;
    import com.google.gwt.user.client.ui.Composite;
    import com.google.gwt.user.client.ui.FlowPanel;
    import com.google.gwt.user.client.ui.Image;
    import com.google.gwt.user.client.ui.InlineLabel;

    public class StatusTab extends Composite
    {
       public interface StatusImages extends ClientBundle
       {
          public static StatusImages instance = GWT.create(StatusImages.class);

          @Source("images/status-green.png")
          ImageResource green();

          @Source("images/status-red.png")
          ImageResource red();
       }

       private final ImageResource greenImage;
       private final ImageResource redImage;

       private final FlowPanel flowPanel;

       public LinkStatusTab(String text, int numStatuses) {

          greenImage = StatusImages.instance.green();
          redImage = StatusImages.instance.red();

          flowPanel = new FlowPanel();
          initWidget(flowPanel);

          for (int i = 0; i < numStatuses; i++)
          {
             Image statusImg = new Image(redImage);
             statusImg.getElement().getStyle().setMarginRight(3, Unit.PX);
             statusImg.getElement().getStyle().setFloat(Float.LEFT);
             flowPanel.add(statusImg);
          }

          flowPanel.add(new InlineLabel(text));
       }

       /**
        * Sets the image displayed for a specific status entry.
        */
       public void setStatus(int which, boolean status)
       {
          Image image = (Image)flowPanel.getWidget(which);
          if (status)
             image.setResource(greenImage);
          else
             image.setResource(redImage);
       }
    } 
    ```

# javascript - 无论如何，是否可以使用来自客户端的 javascript 启动 Amazon EC2 实例？

> ID：12270272
> 
> 赞同：0
> 
> 时间：2012-09-04T19:42:02.057
> 
> 标签：javascript, amazon-ec2, amazon-web-services, client

问题与标题相同。

javascript 可以用来启动 ec2 实例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:20:27.763

有可用的[EC2 Javascript Scratchpad](http://aws.amazon.com/developertools/1424)。然而，它似乎有一段时间没有更新，但也许你可以开始使用它。

# php - PHP 从变量中获取年份

> ID：12270273
> 
> 赞同：3
> 
> 时间：2012-09-04T19:42:02.860
> 
> 标签：php, date, strtotime

我通常把这搞砸了，但我试图从`$date = 2011-01-01`我试图`2011`从变量中得到的变量中得到一年......我试过这个，但它没有回应任何东西......

```
date(strtotime("Y"), strtotime($date)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T19:43:17.157

```
$year = date('Y', strtotime('2011-01-01')); 
```

或者，如果您不想转换为日期，并相信您的输入格式：

```
$year = explode('-', '2011-01-01')[0]; 
```

上面需要 PHP 5.4，在旧版本上你需要两行：

```
$arr = explode('-', '2011-01-01');
$year = $arr[0]; 
```

或者，tigrang 建议的这个稍快的替代方案：

```
$year = substr($date, 0, 4); 
```

或者，正如salathe 所建议的，一种更快的方法：

```
$year = (int) $date; 
```

（第一个破折号之后的所有内容都将被忽略，因此`$year`将包含一个带有日期部分的整数（与其他选项不同，其中`$year`将是一个字符串）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T19:43:14.967

`date('Y', strtotime($date))`应该做

第一个参数是格式，第二个是时间戳。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T20:48:36.990

您可以将日期分解为列表并单独调用每个日期项。

```
$date = '2012-01-01';
list($year, $month, $day) = explode('-', $date);

echo $year; // echoes 2012 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T19:45:28.370

我可以建议使用 PHP 的[DateTime 类](http://php.net/manual/en/book.datetime.php)作为替代方案：

```
$date = '2011-01-01'; 
$dateTime = new DateTime($date);

echo $dateTime->format('Y'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T19:51:11.253

`DateTime`一切都很好，但让我们去老学校吧。

```
sscanf($date, '%d', $year);
// or
$year = strtok($date, '-');
// or
$year = substr($date, 0, 4);
// or
$year = (int) $date; 
```

**或者**，重新戴上明智的帽子，您可以使用`DateTime`或正确使用`date()`。

```
$datetime = new DateTime($date);
$year = $datetime->format('Y');
// or
$year = date('Y', strtotime($date)); 
```

# c# - 获取 Oracle 架构

> ID：12270274
> 
> 赞同：3
> 
> 时间：2012-09-04T19:42:07.623
> 
> 标签：c#, oracle, provider

有没有办法在 c# 中检索 oracle 模式？这些是我需要的：Tables_Name、Table Columns_Name、主键、唯一键、外键

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:46:36.123

[表名](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_2117.htm#i1592091)：

```
select * from user_tables 
```

[表列名称](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_2103.htm#REFRN20277)：

```
select * from user_tab_columns 
```

[主键、唯一键、外键](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_1046.htm#REFRN20047)：

```
select * from user_constraints 
```

[更一般地说](http://docs.oracle.com/cd/E11882_01/server.112/e25789/datadict.htm#CNCPT2140)：

```
select * from dictionary 
```

查看您可以使用的所有可能的系统视图。

如果您想要用于创建表等的实际 DDL，您可以使用[`dbms_metadata.get_ddl`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_metada.htm#i1019414)返回 CLOB。

例如：

```
select dbms_metadata.get_ddl('TABLE','MY_TABLE') from dual; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:45:48.510

您可以像选择任何其他表一样从 Oracle 中的数据字典表中进行选择。这是对数据字典表的讨论 -[数据字典](http://www.dba-oracle.com/concepts/data_dictionary.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:51:10.153

使用`DBMS_METADATA`包。例如，要获取`CREATE`所有表的脚本，您可以：

```
SELECT DBMS_METADATA.GET_DDL('TABLE', u.table_name)
  FROM USER_ALL_TABLES u 
```

这样，您只需稍加努力，就可以获得整个模式的 DDL 脚本。[`DBMS_METADATA`文档页面](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_metada.htm)上还有更多示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-19T11:18:28.737

我使用`OracleConnection.GetSchema`方法。我给自己写了一个帮助方法来检索每个表。

```
private class SchemaInfo
{
    public bool Mandatory { get; set; }
    public int MaxLength { get; set; }
}

private Dictionary<string, SchemaInfo> _getSchemaInfo(OracleConnection _cn, string owner, string tableName)
{
    DataTable _dt = _cn.GetSchema("Columns", new string[3] { owner, tableName, null });
    Dictionary<string, SchemaInfo> _dict = new Dictionary<string, SchemaInfo>();
    for (int x = 0; x < _dt.Rows.Count; x++)
    {
        DataRow _r = _dt.Rows[x];
        SchemaInfo _si = new SchemaInfo();
        object maxl = _r.ItemArray[10];
        if (maxl == DBNull.Value) maxl = -1;
        _si.Mandatory = (_r.ItemArray[8].ToString().Equals("N")) ? true : false;
        _si.MaxLength = Convert.ToInt32((maxl ?? 0));
        _dict.Add(_r.ItemArray[2].ToString(), _si);
    }
    return _dict;
} 
```

您将不得不查找返回的其他元素以获取密钥等。我很确定这是可用的（但可能是错误的）。

如果要获取表格，请使用`Connection.GetSchema("Tables", new string[3] { owner, null, null });`

# sql - stata odbc sqlfile

> ID：12270275
> 
> 赞同：1
> 
> 时间：2012-09-04T19:42:07.953
> 
> 标签：sql, odbc, stata

我正在尝试从数据库（MS Access 或 SQL 服务器）加载数据，`odbc sqlfile`似乎代码运行时出现任何错误，但我没有获取数据。我正在使用以下代码`odbc sqlfile("sqlcode.sql"),dsn("mysqlodbcdata")`。请注意，`sqlcode.sql`它只包含`sql`带有`SELECT`. 问题是相同的`sql`代码使用`odbc load,exec(sqlstmt) dsn("mysqlodbcdata")`. 谁能建议我如何使用`odbc sqlfile`导入数据？这对我来说将是一个很大的帮助。

谢谢乔伊

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T23:26:08.030

sqlfile 不加载任何数据。它只是执行（并在指定大声选项时显示结果），而不将任何数据加载到 Stata。这有点违反直觉，但确实如此。odbc 命令的 pdf/dead tree 手册条目中有些不透明地解释了原因。

这是一个更有帮助的答案。假设您有名为 sqlcode.sql 的 SQL 文件。你可以在Stata中打开它（只要不是*太长*，*太长*取决于你的Stata风格）。基本上，-file read- 逐行读取 SQL 代码，将结果存储在名为 exec 的本地宏中。然后将该宏作为参数传递给 -odbc load- 命令：

**更新代码以处理一些双引号问题**

将以下代码剪切并粘贴到名为 loadsql.ado 的文件中，您应该将其放在 Stata 可以看到的目录中（如 ~/ado/personal）。您可以使用 -adopath- 命令找到此类目录。

```
program define loadsql
*! Load the output of an SQL file into Stata, version 1.3 (dvmaster@gmail.com)
version 14.1
syntax using/, DSN(string) [User(string) Password(string) CLEAR NOQuote LOWercase SQLshow ALLSTRing DATESTRing]

#delimit;
tempname mysqlfile exec line;

file open `mysqlfile' using `"`using'"', read text;
file read `mysqlfile' `line';

while r(eof)==0 {;
    local `exec' `"``exec'' ``line''"';
    file read `mysqlfile' `line';
};

file close `mysqlfile';

odbc load, exec(`"``exec''"') dsn(`"`dsn'"') user(`"`user'"') password(`"`password'"') `clear' `noquote' `lowercase' `sqlshow' `allstring' `datestring';

end; 
```

/* 全部完成！*/

Stata 中的语法是

```
loadsql using "./sqlfile.sql", dsn("mysqlodbcdata") 
```

您还可以添加所有其他 odbc 加载选项，例如 clear。显然，您需要更改文件路径和 odbc 参数以反映您的设置。这段代码应该和 -odbc sqlfile("sqlfile.sql"), dsn("mysqlodbcdata") 做同样的事情——加上实际加载数据。

我还添加了指定数据库凭据的功能，如下所示：

```
loadsql using "./sqlfile.sql", dsn("mysqlodbcdata") user("user_name") password("not12345") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-25T04:53:24.737

对于“--XYZ”样式的注释，请执行以下操作（假设您的 SQL 代码中没有“--”）：

```
if strpos(`"``line''"', "--") > 0 {;
    local `line' = substr(`"``line''"', 1, strpos(`"``line''"', "--")-1);
    }; 
```

我必须将此作为答案发布，否则格式会全部搞砸，但这显然是指 Dimitriy 的代码。（您还可以定义一个本地宏来保存“--”字符串的位置，以使您的代码更简洁。）

# .htaccess - magento 自定义模块的 URL 重写

> ID：12270276
> 
> 赞同：0
> 
> 时间：2012-09-04T19:42:10.553
> 
> 标签：.htaccess, magento, mod-rewrite, url-rewriting, rewrite

我正在尝试为我的模块创建一些用户友好的 URL。

模块名称为登陆。现在，我使用索引控制器和索引操作，然后从 URL 中抓取一个字符串“page”，并以此为基础抓取我的对象。因此，我的 URL 如下所示：

```
http://www.example.com/landing/index/index/page/CoolPage 
```

我目前的想法是将这个 url 构造为 /landing/{page}，这样就可以了：

```
http://www.example.com/landing/CoolPage 
```

起初，我尝试使用 htaccess 完成此操作。我有以下内容：

```
RewriteRule ^landing/([a-z\-]+)(/)?$ landing/index/index/page/$1 [R,L] 
```

哪个有效，但会重定向而不是重写。我也试过了，最后只带`[L]`和不带 []，但我只是在我的 404 页面结束。

理想情况下，我会使用配置重写，因为它可以与我的模块一起打包，但我找不到任何关于像这样使用它们的文档。如果它按需要工作，我会很高兴使用 .htaccess 甚至基于 db 的重写。

有没有办法在 Magento 中进行这样的重写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T07:42:18.753

我想我前段时间从客户那里收到了完全相同的要求，这就是我如何管理它，我认为这是最简单和最简单的方法......

实际上，可以直接对模块的 config.xml 文件进行重写。在此示例中，所有 URL 都像

```
http://www.domain.com/landing/whatever 
```

将被改写为

```
http://www.domain.com/landingpage/page/view/whatever 
```

## 配置文件

```
<?xml version="1.0"?>
<config>
    <modules>
        <My_LandingPage>
            <version>0.0.1</version>
        </My_LandingPage>
    </modules>

    <frontend>
        <routers>
            <landingpage>
                <use>standard</use>
                <args>
                    <module>My_LandingPage</module>
                    <frontName>landingpage</frontName>
                </args>
            </landingpage>
        </routers>
    </frontend>

    <global>
        <!-- Rewrite requested routes -->
        <rewrite>
            <my_landingpage_page_view>
                <from><![CDATA[#^/landing/#]]></from>
                <to>/landingpage/page/view/</to>
                <complete>1</complete>
            </my_landingpage_page_view>
        </rewrite>
</config> 
```

## 控制器

```
<?php
class My_LandingPage_PageController extends Mage_Core_Controller_Front_Action {

    /**
     * View page action
     */
    public function viewAction() {

        // Get the requested path (/landing/whatever)
        $pathInfo = $this->getRequest()->getOriginalPathInfo();

        // Extract the requested key (whatever)
        $pathArray = explode('/landing/', $pathInfo);
        $requestedKey = $pathArray[1];

        // So, from there you can use $requestedKey to load any model using it.
        // This is also where you will load and render your layout.

    }
} 
```

## 关于布局的旁注

由于调用的真正控制器动作是“landingpage/page/view”，如果您需要此模块的一些布局，它的句柄将是`<landingpage_page_view>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:44:02.427

如果我见过的话，这是一个教科书式的定制路由器案例。您可以采用 CMS 路由器的方法并调整请求对象上的路径，以便您的控制器可以使用标准路由器进行匹配。

您的另一种选择是创建一个索引器来为您的模块实体创建重写并将它们存储在`core_url_rewrite`表中。

# php - 格式化excel文件问题

> ID：12270280
> 
> 赞同：1
> 
> 时间：2012-09-04T19:42:37.373
> 
> 标签：php, excel

我有一个程序可以将文件转换为 excel 文件，但由于某种原因，我的电话和电子邮件字段被切换了。看起来像这样 -

```
firstname   lastname    email   phone
test                            bi@gmail.com
test            d               813-767 leighmimail.com
test            Pds         888-413 Bperotects.com 
```

邮箱和电话应该换了

代码：

```
 <?php
session_start();

$num = $_SESSION['num'];
    $firstname =  $_SESSION['firstnameexport'];
    $lastname = $_SESSION['lastnameexport'];
    $email = $_SESSION['emailexport'];
    $phone = $_SESSION['phoneexport'];

    for($i =0; $i< $num; $i++){
    $data[$i] = array(
    "firstname" => $firstname[$i] , "lastname" => $lastname[$i], "email" => $email[$i], "phone" => $phone[$i]);
    }

function cleanData(&$str)
  {
    $str = preg_replace("/\t/", "\\t", $str);
    $str = preg_replace("/\r?\n/", "\\n", $str);
    if(strstr($str, '"')) $str = '"' . str_replace('"', '""', $str) . '"';
  }

// filename for download
  $filename = "website_data_" . date('Ymd') . ".xls";

  header("Content-Disposition: attachment; filename=\"$filename\"");
  header("Content-Type: application/vnd.ms-excel");

  $flag = false;
  foreach($data as $row) {
    if(!$flag) {
      // display field/column names as first row
      echo implode("\t", array_keys($row)) . "\r\n";
      $flag = true;
    }
     array_walk($row, 'cleanData');
    echo implode("\t", array_values($row)) . "\r\n";
  }

unset($_SESSION['num'],$_SESSION['firstnameexport'],$_SESSION['lastnameexport'],$_SESSION['emailexport'],$_SESSION['phoneexport']);
?> 
```

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:53:55.540

修复它 - 我所要做的就是切换一些会话变量，这样它就会为右列提供正确的值。

感谢您的时间！

# regex - 正则表达式匹配数字前的字符但

> ID：12270281
> 
> 赞同：2
> 
> 时间：2012-09-04T19:42:41.057
> 
> 标签：regex

只有在至少 3 个字符之后，并且只有其中一个字符应该匹配，例如应该匹配`lumia820`但`a8`不`aa6`应该有任何匹配。我目前的尝试是`/([a-z]{3,})([0-9])/`，但是这错误地包括了主角。对于正则表达式专家来说，这可能很容易，但我完全被困在这里..有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:45:13.363

如果您需要至少 3 个，则可以使用`{2,}`匹配 2 个或更多，然后捕获以下字符以及下一个数字：

```
/[a-z]{2,}([a-z][\d])[\d]*/ 
```

*   `[a-z]{2,}`在开头至少匹配 2 个字符。这样可以确保在您捕获的字符*之前*有 2 个或更多字符。
*   `([a-z][\d])`捕获下一个字符，后跟第一个数字
*   `[\d]*`匹配任何剩余的尾随数字。

如果这必须锚定，不要忘记`^$`。

```
/^[a-z]{2,}([a-z][\d])[\d]*$/ 
```

### JavaScript 示例：

```
// Matching example aabc9876 yields c9
"a string with aabc9876 and other stuff".match(/[a-z]{2,}([a-z][\d])[\d]*/)
// ["aabc9876", "c9"]

// Non-matching example with zx8 
"a string with zx8 should not match".match(/[a-z]{2,}([a-z][\d])[\d]*/)
// null 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T19:46:36.417

假设您处于允许后视的环境中，您可以这样做：

```
/(?<=[a-z]{2,})([a-z][0-9])/ 
```

这将在我们要捕获的内容之前查找**两个**或更多字母，确保它们在那里而不将它们包含在捕获组中，然后捕获第三个（或更多）字母后跟数字。捕获本身将确保第三个字母在那里。

@HolyMac 根据您的评论：

请注意，我使用的是 c#，我不确定与 Objective-C 的区别，但以下匹配`f9`我：

```
string testString = "abasfsdf9314";
Regex regex = new Regex("(?<=[a-z]{2,})([a-z][0-9])");
Match match = regex.Match(testString); 
```

# stack - 后进先出 (LIFO) 抽象数据类型和数据结构。堆栈最常见的用途可能是存储

> ID：12270282
> 
> 赞同：0
> 
> 时间：2012-09-04T19:42:48.653
> 
> 标签：stack

```
MyStack()
{
    Vector<Integer> v=new Vector<Integer>(10,2);
}

void push(int n)
{
    v.addElement(n);
}

void pop()
{
    if(v.isEmpty())
        System.out.println("Stack underflow!");
    else
        System.out.println(v.elementAt(0));
}

void display()
{
    for(int i=0;i<v.size();i++)
        System.out.print(v.elementAt(i) +" ");
}

}

class StackDemo
{
    public static void main(String args[])
    {
        Scanner in=new Scanner(System.in);
        MyStack s=new MyStack();
        int option=0;
        do
        {
            System.out.println("1: Push\n2:Pop\n3:Display\n4:Quit");
            System.out.println("Enter your option: ");
            option=in.nextInt();
            switch(option)
            {
                case 1:
                {
                System.out.println("Enter an integer:");
                int n=in.nextInt();
                s.push(n);break;
                }

                case 2:s.pop();break;

                case 3:s.display();break;

            }

        }

    while(option!=4);

    }

} 
```

// 抛出错误：未找到变量 v。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:48:12.347

看起来`v`是在您的构造函数中本地创建的，而不是作为您的类的成员。

尝试定义`v`为类成员，然后在构造函数中简单地分配它。

```
class MyStack {
    Vector<Integer> v;

    public MyStack() {
        v = new Vector<Integer>(10,2);
    }
} 
```

或者在定义它时分配它：

```
class MyStack {
    Vector<Integer> v = new Vector<Integer>(10,2);
} 
```

查看关于[类成员](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)的 Java 教程。

# jquery - 页面刷新后丢失点击信息

> ID：12270297
> 
> 赞同：0
> 
> 时间：2012-09-04T19:44:01.600
> 
> 标签：jquery

我为我的导航栏想出了以下内容。好吧，使用 F5 刷新当前页面后，我丢失了点击信息，根据我的 NavBar 的所有内容都恢复为默认值，就像你从未点击过链接一样：/

```
 <script>
    "use-strict";   
     $(document).ready(function()
    {
    /*
    $(".default").show();
    */

    $("#navSalon>ul>li a").click(function()
    {
        $("#navSalon>ul>li a").next().hide();
        $(this).next().show();
    });

    $("#navSalon>ul>li a").click(function()
    {
        $("#navSalon>ul>li a").children().attr("src", "dot1.png");
        $(this).children().attr("src", "dot0.png");
    });
});   
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:49:20.863

**因为 HTTP 是无状态的**。当您刷新页面时，这是一个新的 HTTP Get 请求，它会发送到服务器并获取结果。

如果您想保留所做的更改，则需要将其保存在永久性介质中。你可以考虑以下

**1）数据库**：将您的更改存储在数据库中，并在进一步请求时再次加载

**2）会话**：如果您使用服务器端语言，则将您的更改存储在 Session 变量中。其生命周期是直到用户会话结束。

**3) Cookies**：将这些存储在浏览器 cookie 中

# ruby-on-rails - test_should_get_show(CartsControllerTest): ActionController::RoutingError: 没有路线匹配 {:cart=>"1", :controller=>"carts", :action=>"show"}

> ID：12270301
> 
> 赞同：0
> 
> 时间：2012-09-04T19:44:09.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testunit

我不断收到的错误如下：

```
 test_should_get_show(CartsControllerTest):
    ActionController::RoutingError: No route matches {:cart=>"1", :controller=>"carts", :action=>"show"} 
```

当我运行以下代码时：

```
 def setup
    @cart = FactoryGirl.create(:cart)
  end

  test "should get show" do
    sign_in(FactoryGirl.create(:user, admin: true))
    session[:cart_id] = @cart.id 
    get :show, cart: @cart
    assert_response :success
    assert_not_nil assigns(:product_requests)
  end 
```

我的购物车工厂：

```
FactoryGirl.define do
  factory :cart do
    factory :cart_with_1_row do
      after(:create) do |cart|
        FactoryGirl.create(:cart_row, cart: cart)
      end
    end
  end
end 
```

但是，在我的 rake 路线中，我有：

`cart GET /carts/:id(.:format) carts#show`

我也可以`http://localhost:3000/carts/1`在开发环境的浏览器中手动进入，它工作正常。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:47:03.907

代替：

```
get :show, cart: @cart 
```

和：

```
get :show, id: @cart  # or @cart.id 
```

# jquery - 选择另一个类时停止单击功能

> ID：12270302
> 
> 赞同：0
> 
> 时间：2012-09-04T19:44:12.210
> 
> 标签：jquery, events, click

如果我在单击按钮类时执行以下代码段。应用程序中的大多数按钮都按列分组到具有 id 的父 div。

在某个选项卡式元素被突出显示或选择的事件中，我想禁用下面的单击功能以及父按钮和列中所有子元素的所有单击功能。取消选择选项卡式元素后，我想使单击功能恢复正常。发生某些事件时启用/禁用点击功能的最简单形式是什么。

```
 $('.button')on(mouseup, function(evt){
      doSomething(this);
      doSomethingElse(this)'
 }); 
```

编辑：我不想更改上面的代码片段。如果一个类存在于与按钮完全分开的其他地方，我只想完全停止点击功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:48:57.367

也许您可以对要忽略的项目使用一个类。

前任：

```
$('.button')on(mouseup, function(evt){
    if($(this).hasClass(className) {
      doSomething(this);
    }
    else {
      doSomethingElse(this);
    }
 }); 
```

# php - 如何在php中设置由imagecreate（宽度，高度）形成的图像的x和y坐标

> ID：12270305
> 
> 赞同：0
> 
> 时间：2012-09-04T19:44:43.613
> 
> 标签：php, image, coordinates

我使用 php 在 php 中创建了一个示例图像

`$image = imagecreate($width , $height);`

在 Mozilla firefox 中，它将图像显示在中心，而在 chrome 中，它显示在屏幕的左中...

我想在屏幕上的任何位置控制此图像的 x 和 y 坐标。另外，谁能告诉我屏幕的尺寸是多少？i,e max(height, width) ...请告诉我，因为我无法解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:51:27.493

您必须使用 HTML（可能还有 CSS）来控制图像的显示。

尝试这样的事情：

文件：`image.html`

```
<style>
    .top_corner_image img {
        border:0;
        margin:0;
        padding:0;
        position:absolute;
        top:0;
        left:0;
    }
</style>
<img class="top_corner_image" src="myimage.php"> 
```

文件：`myimage.php`

```
//put your PHP code to generate the image...
$image = imagecreate($width , $height); 
```

# c# - 多对多关系上的 SaveChanges 失败

> ID：12270306
> 
> 赞同：0
> 
> 时间：2012-09-04T19:44:48.323
> 
> 标签：c#, entity-framework

这是我的基地：

并且它包含一部电影（ID 来自外部 REST API）：

```
Movie movie = Movie.CreateMovie(999, "MyFirstMovie");
movie.Kinds.Add(Kind.Create(123,"Adventure"));
movie.Kinds.Add(Kind.Create(124,"Comic"));
movie.Actors.Add(Person.Create(321,"John Wayne"));
movie.Directors.Add(Person.Create(120,"John Woo"));
_context.AddToMovies(movie);
_context.SaveChanges(); 
```

现在，当我尝试插入新电影时，我经常遇到一个异常，说我正在插入一个已经存在于基础中的实体。

假设我有另一部“冒险”电影：

```
// Here all data comes from an external source and have no control over it.
using(Stream stream = myExternalStream)
{
   Movie movie = Unserialize(stream);
   _context.AddToMovies(movie);
}
// throws the exception because the kind "Adventure" already exists
_context.SaveChanges(); 
```

我怎样才能避免这个异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:29:33.217

我想你会检查`Kind`数据库中是否已经存在。如果是，则将集合中的种类替换为`movie.Kinds`从数据库加载的种类。如果不是，则保留反序列化的种类并创建一个新`Kind`实体，例如：

```
using(Stream stream = myExternalStream)
{
    Movie movie = Unserialize(stream);
    var newKindList = new List<Kind>();
    foreach(var kind in movie.Kinds)
    {
        var kindInDB = _context.Kinds
            .SingleOrDefault(k => k.KindId == kind.KindId);
        if (kindInDB != null)
            newKindList.Add(kindInDB);
        else
            newKindList.Add(kind);
    }
    movie.Kinds = newKindList;
    _context.AddToMovies(movie);
}
_context.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:54:29.263

检索电影类型，而不是每次都创建它。或者这很明显？

# jquery - 如何检测元素是否动态加载。

> ID：12270307
> 
> 赞同：0
> 
> 时间：2012-09-04T19:44:50.460
> 
> 标签：jquery

我正在尝试检查动态加载的元素是否已完全加载。

我希望用户单击按钮-> 加载元素-> 检查元素是否已加载。

我有

```
<button id='click'>click</button>

//create and append div..
$('#click').click(function(){

   var div= $('<div>').attr('id','testDiv').addClass('div');

   $('body').append(div);

})

//detect when the div is loaded...
$('#testDiv').load(function(){
    console.log('load test div')

}) 
```

如何在控制台中显示“负载测试 div”......非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:53:32.433

元素未加载，当您将它们添加到 dom 时，它们就在那里。所以在`$('body').append(div);`div 在 dom 之后。

# javascript - 谷歌地图的插值方法

> ID：12270308
> 
> 赞同：1
> 
> 时间：2012-09-04T19:44:51.223
> 
> 标签：javascript, google-maps, google-maps-api-3, statistics, kml

我想问你关于在谷歌地图 API 中进行空间插值的方法。这意味着 - 我有一个区域内某些点的值，并且想要重新计算该区域中每个点的值（并创建一个栅格叠加）。在“离线”GIS 软件中，有更多方法可以做到这一点。例如克里金法 (http://en.wikipedia.org/wiki/Kriging)。

感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:40:20.630

没有真正实用的方法来做这样的事情。空间插值是您真正需要成熟的 GIS 才能完成的事情。它需要以最适合 ArcGis 或 QGis 的方式存储、分析和呈现数据。ArcGis Online 中有一些可与 Google Maps API 配合使用的新功能，但我对此了解不多，并且不确定它是否对您有任何帮助，但[这里](http://help.arcgis.com/en/webapi/javascript/gmaps/index.html)有一个链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:01:08.123

我知道，它在地统计学上不是正确的，但我已经做到了： - 我创建了一个矩形多边形网。- 我已将我的所有点连接到它们所在的多边形，并为至少有一个点的多边形取平均值 - 我检查了每个没有点的多边形和至少 2 个带点的相邻多边形，并从这个相邻的值中取平均值 - 我根据邻居的值再次检查了我所有具有值的多边形和至少 2 个具有值和平滑原点值的相邻多边形。

# c# - LINQ Query - 2 dimensional Column

> ID：12270316
> 
> 赞同：0
> 
> 时间：2012-09-04T19:45:05.437
> 
> 标签：c#, linq, data-structures, collections

I have a data table like below. Say I have thousands of records:

```
+----------------------+
| Col1          | Col2 |
+----------------------+
| Value1        | 1    |
| Value1,Value2 | 2    |
| Value2        | 3    |
| Value3,Value1 | 4    |
+----------------------+

```

`Col1` can have a single value or value which is delimited by a special character (e.g. ",").

I would like get the distinct values from `Col1` in a single LINQ query. I can do this in two steps, but I want it to be done in one step.

Can this be done, either as a list or an array?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:48:29.440

I think this will work.

```
var array = table
    .SelectMany(t => t.Col1.Split(','))
    .Distinct()
    .ToArray(); 
```

# xslt - XSLT 1.0 将多个节点的值加在一起

> ID：12270318
> 
> 赞同：7
> 
> 时间：2012-09-04T19:45:06.640
> 
> 标签：xslt, xslt-1.0

假设我有以下 XML

```
 <A>100</A>
    <B>200</B>
    <C>300</C> 
```

和以下 XSLT

```
 <TEST>
    <xsl:value-of select="A + B + C"/>
  </TEST> 
```

它产生以下输出

```
<TEST>600</TEST> 
```

但是，当其中一个节点为空白时

```
 <A></A>
    <B>200</B>
    <C>300</C> 
```

我得到以下。

```
<TEST>NaN</TEST> 
```

我只想添加有效数字的节点。如果 xsl 允许我通过添加到已经存在的变量来动态替换变量值，我可以这样做，但即使这样也会很麻烦。我认为有一种简单的方法我错过了？

我只想要 XSLT 1.0 的答案。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T21:04:39.890

```
 <TEST>
    <xsl:value-of select="sum((A | B | C)[number(.) = .])"/>
  </TEST> 
```

也就是说，将元素 A、B、C 的子集相加，这些元素的内容可以用作数字。

请注意，`number('')`yield`NaN`和`(NaN = NaN)`是 false，因此这将不包括没有文本内容的元素。

[我们测试https://stackoverflow.com/a/3854389/423105](https://stackoverflow.com/a/3854389/423105)中讨论的数字

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T02:03:01.513

**LarsH 回答的一些变化**：

```
sum((A|B|C)[number(.) = number(.)]) 
```

谓词中的表达式在 XPath 2.0 中不会导致任何类型错误，因为 的两个参数`=`属于同一类型——xs:double。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-05T04:41:50.820

还有：

对于 XSLT 1.0：

```
sum((A|B|C)[string(number())!='NaN']) 
```

对于 XSLT 2.0：

```
sum((A,B,C)[string(number())!='NaN']) 
```

* * *

出于兴趣，这是另一个。它适用于 XSLT 1.0 和 2.0

```
sum((A|B|C)[number()>-99999999]) 
```

在上面，将 -99999999 替换为比可能值的下限小一。这是因为 NaN > any-thing 总是返回 false。这可能是迄今为止最有效的解决方案，但它可能看起来有点难看。

例如，如果您知道 A、B 或 C 都不是负值，您可以输入：

```
sum((A|B|C)[number()>0]) 
```

...看起来更干净一些，并且仍然可以安静地阅读。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T19:57:26.427

```
<xsl:value-of select="sum(/root/*[self::A or self::B or self::C][.!=''])"/> 
```

只要值不为空，这将在“根”元素下添加来自 A、B 和 C 的值。

# c# - C# 和 SQL Server CE - 不支持数据源关键字

> ID：12270326
> 
> 赞同：0
> 
> 时间：2012-09-04T19:45:44.277
> 
> 标签：c#, sql-server-ce, connection-string

我正在尝试以下解决方案，但运气不佳： [如何在 C# 中更新 app.config 连接字符串数据源值？](https://stackoverflow.com/questions/7174604/how-can-i-update-app-config-connectionstring-datasource-value-in-c#)

我的代码是：

```
Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);

// Because it's an EF connection string it's not a normal connection string
// so we pull it into the EntityConnectionStringBuilder instead
EntityConnectionStringBuilder efb = new EntityConnectionStringBuilder(
                config.ConnectionStrings.ConnectionStrings["WindowsFormsApplication1.Properties.Settings.TestDBConnectionString"]
                    .ConnectionString);

// Then we extract the actual underlying provider connection string
SqlConnectionStringBuilder sqb = new SqlConnectionStringBuilder(efb.ProviderConnectionString);

// Now we can set the datasource
sqb.DataSource = "|DataDirectory|\\TestDBa.sdf";

// Pop it back into the EntityConnectionStringBuilder 
efb.ProviderConnectionString = sqb.ConnectionString;

// And update...
config.ConnectionStrings.ConnectionStrings["WindowsFormsApplication1.Properties.Settings.TestDBConnectionString"]
            .ConnectionString = efb.ConnectionString;

config.Save(ConfigurationSaveMode.Modified, true);
ConfigurationManager.RefreshSection("connectionStrings"); 
```

我的`app.config`文件有：

```
<?xml version="1.0" encoding="utf-8" ?><configuration>
<configSections>
</configSections>
<connectionStrings>
    <add name="WindowsFormsApplication1.Properties.Settings.TestDBConnectionString"
        connectionString="Data Source=|DataDirectory|\TestDB.sdf"
        providerName="Microsoft.SqlServerCe.Client.4.0" />
</connectionStrings>
<startup> 
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
</startup></configuration> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:08:16.990

我自己只是在几天内摆弄 SQL CE，但是如果您正在使用 SqlCE 数据库做任何事情，您可能想要使用 SqlCe 类而不是 Sql 类 - 试试[SqlCeConnectionStringBuilder](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlceconnectionstringbuilder%28v=vs.100%29.aspx)？

除此之外，只要 |DataSource| 在 CE 中受支持您发布的连接字符串看起来像我见过和使用的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T14:10:33.963

我最终创建了自己的 XML 文件，该文件存储了数据库字符串，并让用户在它无效或希望连接到不同的数据库时对其进行更新。我认为它比尝试更新 app.config 效果更好。

# python - 如何在 PyQt4 中连接来自控制器的信号？（iOS 类似 PyQt4 中的 MVC 结构）

> ID：12270327
> 
> 赞同：0
> 
> 时间：2012-09-04T19:45:47.250
> 
> 标签：python, model-view-controller, pyqt4

为什么以下示例不起作用？

```
from PyQt4 import QtGui
import sys

class TestView(QtGui.QWidget):

    def __init__(self):
        super(TestView, self).__init__()
        self.initUI()

    def initUI(self):
        self.btn = QtGui.QPushButton('Button', self)
        self.btn.resize(self.btn.sizeHint())
        self.btn.move(50, 50)

class TestViewController():

    def __init__(self, view):
        view.btn.clicked.connect(self.buttonClicked)
        view.show()

    def buttonClicked(self):
        print 'clicked'

def main():
    app = QtGui.QApplication(sys.argv)
    view = TestView()
    TestViewController(view)
    app.exec_()

if __name__ == '__main__':
    main() 
```

该示例应该表示一个 MVC 结构（[如图 4](http://www.oracle.com/technetwork/articles/javase/index-142890.html)中的结构- 没有模型），其中控制器 ( `TestViewController`) 接收对视图 ( `TestView`) 的引用并将来自视图按钮的单击信号连接`view.btn`到其功能`self.buttonClicked`。

我确定该行`view.btn.clicked.connect(self.buttonClicked)`已执行，但显然它没有任何效果。有谁知道如何解决这个问题？

* * *

**更新（糟糕的解决方案）：**

在示例中，如果我替换该行

```
view.btn.clicked.connect(self.buttonClicked) 
```

和

```
view.clicked = self.clicked
view.btn.clicked.connect(view.clicked) 
```

有用。我对此仍然不满意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:15:10.553

它不工作的原因是因为控制器类在你点击任何东西之前就被垃圾收集了。

当您设置 view.clicked = self.clicked 时，您实际上正在做的是让控制器中的一个对象持续存在于视图对象上，因此它永远不会被清理 - 这并不是真正的解决方案。

如果您将控制器存储到变量中，它将保护它不被收集。

因此，如果您将上面的代码更改为：

```
ctrl = TestViewController(view) 
```

你会准备好的。

话虽这么说 - 你究竟想在这里做什么，我不确定......似乎你正在尝试为 Qt 设置 MVC 系统 - 但 Qt 已经有了一个非常好的系统，使用 Qt Designer 来分离将接口组件从控制器逻辑（QWidget 子类）转换为 UI（视图/模板）文件。同样，我不知道您要做什么，这可能是它的愚蠢版本，但我建议将其全部设为一个类，如下所示：

```
from PyQt4 import QtGui
import sys

class TestView(QtGui.QWidget):

    def __init__(self):
        super(TestView, self).__init__()
        self.initUI()

    def initUI(self):
        self.btn = QtGui.QPushButton('Button', self)
        self.btn.resize(self.btn.sizeHint())
        self.btn.move(50, 50)
        self.btn.clicked.connect(self.buttonClicked)

    def buttonClicked(self):
        print 'clicked'

def main():
    app = QtGui.QApplication(sys.argv)
    view = TestView()
    view.show()
    app.exec_()

if __name__ == '__main__':
    main() 
```

**编辑：澄清 Qt 的 MVC**

所以上面的这个例子实际上并没有动态加载用户界面并创建一个控制器/视图分离。在这里展示有点困难。最好通过一些基于 Qt/Designer 的示例/教程来工作 - 我在这里有一个[http://bitesofcode.blogspot.com/2011/10/introduction-to-designer.html](http://bitesofcode.blogspot.com/2011/10/introduction-to-designer.html)但很多都可以在网上找到。

简短的回答是，您的 loadUi 方法可以替换为 PyQt4.uic 动态加载（并且有许多不同的设置方法），这样您的代码最终会读取如下内容：

```
from PyQt4 import QtGui
import PyQt4.uic
import sys

class TestController(QtGui.QWidget):

    def __init__(self):
        super(TestController, self).__init__()

        # load view
        uifile = '/path/to/some/widget.ui'
        PyQt4.uic.loadUi(uifile, self)

        # create connections (assuming there is a widget called 'btn' that is loaded)
        self.btn.clicked.connect(self.buttonClicked)

    def buttonClicked(self):
        print 'clicked'

def main():
    app = QtGui.QApplication(sys.argv)
    view = TestController()
    view.show()
    app.exec_()

if __name__ == '__main__':
    main() 
```

**编辑 2：存储 UI 引用**

如果更容易将这个概念可视化，您还可以存储对生成的 UI 对象的引用：

```
from PyQt4 import QtGui
import PyQt4.uic
import sys

class TestController(QtGui.QWidget):

    def __init__(self):
        super(TestController, self).__init__()

        # load a view from an external template
        uifile = '/path/to/some/widget.ui'
        self.ui = PyQt4.uic.loadUi(uifile, self)

        # create connections (assuming there is a widget called 'btn' that is loaded)
        self.ui.btn.clicked.connect(self.buttonClicked)

    def buttonClicked(self):
        print 'clicked'

def main():
    app = QtGui.QApplication(sys.argv)
    view = TestController()
    view.show()
    app.exec_()

if __name__ == '__main__':
    main() 
```

# oop - 如何让用户决定通过winform注入哪个对象？

> ID：12270329
> 
> 赞同：-1
> 
> 时间：2012-09-04T19:45:47.960
> 
> 标签：oop, design-patterns, castle-windsor

如果我有使用接口 I 的 X 类，该接口由 A、B、C、... 类实现，其中一个通过 winform 用户界面根据用户选择注入到 X 中。如何让用户决定注入的类 A 或 B 或 C ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:58:44.587

我建议改用[对象工厂](http://en.wikipedia.org/wiki/Factory_%28software_concept%29)。这可能更简单和可读。不过，工厂本身可以被注入。

如果您真的想使用容器来解决这个问题，您可能可以使用[范围](http://docs.castleproject.org/Windsor.Whats-New-In-Windsor-3.ashx)

# php - 缺少网络解决方案数据和 cgi-bin 文件夹的托管

> ID：12270338
> 
> 赞同：3
> 
> 时间：2012-09-04T19:46:19.650
> 
> 标签：php, web-hosting

奇怪的问题..我的网站上出现以下错误

```
Fatal error: Unknown: Failed opening required '/data/9/1/106/108/1758271/user/1900303/cgi-bin/.php/sessions/sess_80f9a008cf3e9dee12465fb7dd902c48' (include_path='.:/usr/services/vux/lib/php') in Unknown on line 0 
```

而且我找不到数据或 cgi-bin 文件夹.. 将不胜感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:22:04.700

看起来像一个会话保存问题......

如果您正在等待托管公司的支持回复，您可以使用以下 PHP 函数为您设置会话保存路径。

[http://www.php.net/manual/en/function.session-save-path.php](http://www.php.net/manual/en/function.session-save-path.php)

或者，您可以将其设置在 .htaccess 文件中：

```
php_value session.save_path "<path here>" 
```

或者，您可以使用 ini_set 函数在 PHP 中设置它。

至于cgi-bin，你不能通过FTP制作那些文件夹，还是你的托管服务提供商不允许你在文档根目录上方看到？

# git - 如何使用全网状拓扑设置 Git 源代码控制？

> ID：12270347
> 
> 赞同：1
> 
> 时间：2012-09-04T19:46:43.000
> 
> 标签：git, topology

我有一个由几台计算机组成的本地网络，每台计算机都有一个相同代码的本地 Git 存储库，不同的开发人员在处理它们。我想找到一种方法来将每个本地存储库中的更改与所有其他存储库中的更改同步，而无需使用集中式服务器。

（如果您有兴趣，这是因为任何计算机都可能（而且经常会）遭受突然的磁盘故障，通常会导致其上的所有数据丢失，因此我无法承受单点故障.)

我见过几个工作流可能性的例子，但它们都需要设置有固定的远程系统。

我想知道的是：
如何设置一组可以与网络中所有其他计算机中的存储库同步的存储库，就像在[全网状拓扑中](http://en.wikipedia.org/wiki/Fully-connected_network "全网状拓扑")一样？

然后我将如何将计算机添加/删除到这个存储库网络？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:53:51.703

共享存储库很容易。只需在每个开发人员的系统上设置一个公共存储库。

要自动同步到每个人，您可能必须编写某种 shell 脚本来执行存储在 repo 本身中的推送和拉取操作。要添加计算机，您只需`git push new-computer`在脚本中添加一个。

但是，集中式服务器并不是 DVCS 的“单点故障”。如果它出现故障，您只需从其他人的存储库中协作，直到它恢复。您增加了很多复杂性，以避免发生相当容易解决的相对罕见的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T00:59:11.300

使用集中式服务器。如果集中式服务器上的磁盘发生故障，您不会丢失所有数据。如果他没有使用集中式服务器，每个开发人员都将拥有相同的完整存储库副本。要恢复，您的开发人员只需指定一个新的集中式服务器并推送到该服务器即可。

# sql-server - 如何向 SQL 的 Select for xml 生成的 xml 的根元素添加属性

> ID：12270348
> 
> 赞同：12
> 
> 时间：2012-09-04T19:46:53.310
> 
> 标签：sql-server

我的数据库中有许多表。这些表中的每一个都有一个触发器，该触发器在更新或删除时触发以记录对 AuditLog 表的更改。AuditLog 表包含以下内容：

Id (PK, int, not null) Action (nchar(1), not null) ActionDate (datetime, not null) ActionUser (nvarchar(100), not null) AuditData (XML(.), not null)

在我的触发器中，我正在执行以下操作：

```
DECLARE @auditBody XML
SET @auditBody = (select * from deleted as Root for xml auto, elements)
insert into dbo.AuditLog 
   (Action, ActionDate, ActionUser, AuditData)
   select Case
        When I.Id is not null then 'U'
        Else 'D'
       End as Action
     ,getdate() as ActionDate
     ,suser_name() as ActionUser
     ,@auditBody as AuditData
  From
    deleted D Left Join
    inserted I on D.Id = I.Id 
```

这很好用，但是，我想做的是向 tablename 的 Root 元素添加一个属性，以便 AuditData xml 看起来像：

```
<Root tableName = "Person">
    <Id>132</Id>
    <FirstName>Ryan</FirstName>
    ...
</Root> 
```

有什么方法可以通过 select from ... for xml 语句来实现这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-04T20:37:14.297

[在这个](http://social.msdn.microsoft.com/Forums/en/sqlxml/thread/f0b36224-5a0c-4a92-95bc-3541c4f0c194)线程的帮助下，我能够想出这个并且它似乎有效：

```
select 'Person' as "@tableName",
 (select * from deleted for xml path('DataItem'), type)
 for xml path('Root') 
```

# c++ - 计算 n 个整数之和的递归函数 C++

> ID：12270349
> 
> 赞同：0
> 
> 时间：2012-09-04T19:46:57.257
> 
> 标签：c++, recursion, sum

我必须创建一个递归函数，该函数将计算至少 n 个整数的数组中第一个 n 整数的总和。我相信我已经完成了 cout 语句的功能，但是会导致错误。任何帮助，将不胜感激。

```
#include <iostream>
using namespace std;

int n = 0;
int array[];

int sum(int array[], int n);

int main()
{
    cout << sum(array, 4)<< endl;
    return 0;
}//end main

int sum(int array[], int n)
{
    if(n <= 0) 
    {
        return 0;
    }

    else
    {
        return array[0] + sum(array + 1, n-1);
    }
}// end Compute 
```

这是错误：

> 致命错误 LNK1120：1 个未解决的外部问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:49:40.397

您的变量`array`从未在任何地方定义并且`int array[];`不是有效的语法（但由于某种原因，您的编译器将其视为`extern`声明或其他东西）。更改无效语法以定义它：

```
int array[] = { 1, 2, 3, 4 }; // for example 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:00:56.927

我的心理调试技能告诉我，未定义的外部符号是`array`，因为您从未给它指定大小或值。

由于它是一个大小不一的数组，因此它被视为外部声明而不是定义。如果初始化数组，它应该编译和链接。

```
int array[] = { 1, 1, 2, 3, 5, 8 }; 
```

# .net - Devexpress 日期范围编辑器

> ID：12270355
> 
> 赞同：2
> 
> 时间：2012-09-04T19:47:10.100
> 
> 标签：.net, winforms, devexpress

我想使用单个数据网格单元格为日期范围编辑构建一个存储库项。理想情况下，我想在弹出编辑器中并排放置 2 个日历，用于开始/结束日期。以及关闭编辑器时的简单范围文本。（即：2001 年 1 月 1 日 - 2001 年 5 月 1 日）

有人已经这样做了吗？我对存储库项目/弹出式架构的了解不够，不知道从哪里开始。我看到的所有示例都只是扩展了 TextEdit 项目，并且不显示自定义弹出窗口。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T23:10:05.977

基于[Popup Container Edit](http://documentation.devexpress.com/#WindowsForms/CustomDocument612)创建这个编辑器很容易。可以在[此处](http://www.devexpress.com/Support/Center/e/E2663.aspx)找到如何创建具有自定义功能的弹出编辑器的一个很好的示例。

# ruby-on-rails - 在创建之前检查 Rails 中是否存在记录

> ID：12270356
> 
> 赞同：0
> 
> 时间：2012-09-04T19:47:10.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试在输入记录之前搜索我的数据库，方法是：

```
Product.update_or_create_by_name_and_date_and_applicationURL_and_server_and_addi_servers(app_name, app_date,url_app,server_name,addi_servers) 
```

问题是我得到一个未定义的方法异常！

是否有另一种方法可以在输入之前搜索相同的记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:50:48.977

您应该使用两个步骤：

```
#Suggestion 1
obj = Product.find_or_create_by_...

#Suggestion 2
obj = Product.find_or_initialize_by_...

obj.update_attributes hash_here 
```

重读您的问题，如果您尝试查找具有已知属性的对象，我真的不明白您要更新什么。无论如何，如果某些字段用于识别而某些字段用于更新，您只需稍微调整我的答案即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:47:01.270

我会在你的模型中定义一个函数：类似于

```
Product.find_by_everything 
```

您在其中写出搜索的所有参数，而不是使用长命名方法。

然后，如果返回 nil，则创建产品。这似乎不是使用内置 activerecord 命名方法的好用例。

# git - 真正扁平化一个 git merge

> ID：12270357
> 
> 赞同：12
> 
> 时间：2012-09-04T19:47:13.533
> 
> 标签：git, merge, rebase, git-rewrite-history

StackOverflow 上几乎没有关于“扁平化合并”的问题，答案通常是“git rebase”。这些答案虽然错过了一个关键点——提交的顺序。

假设有一个分支 A 的提交时间为 6 月 1 日和 8 月 1 日，分支 B 的提交时间为 7 月 1 日（**更新**以恢复下面描述的用例：分支是完全独立的并且没有共同的祖先，例如来自 2 个不同的存储库）。将 B 合并到 A 时，将有以下历史记录（每个 git log）：

```
Merged branch 'B'
Aug 1
Jul 1
Jun 1 
```

现在，我正在寻找的是获得相同结果的方法，但没有合并提交（因此具有该顺序的基础线性历史，是的，这意味着重新提交提交）。git rebase 在这里没有帮助，就像它一样，您将获得以下历史记录：

```
Jul 1
Aug 1
Jun 1 
```

或者

```
Aug 1
Jun 1
Jul 1 
```

换句话说， git rebase 总是将一个分支堆叠在另一个分支之上，而我正在寻找能够散布按作者的提交日期排序的提交的解决方案。

显然，对于简单的情况，可以通过使用 git rebase -i 手动对 git rebase 进行后处理来实现所需的安排，但这对于大型历史来说并不实用，所以我正在寻找自动命令/脚本。

用例？如果 A 和 B 代表同一项目的不同部分，恰好位于不同的 repos 中，并且时间已经通过将它们合并在一起来纠正这一点，那么自然希望线性历史按照实际的发展顺序展开。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-12T19:47:34.217

经过一番思考，我想出了如何以[非交互方式运行 git rebase --interactive ？](https://stackoverflow.com/questions/12394166/git-rebase-interactive-in-non-interative-manner)，它也为这个问题提供了完全脚本化的解决方案。

**1.**将不同仓库的2个分支合并到一个仓库中（git remote add + git fetch）

**2.**将一个分支重新设置在另一个分支之上（以非交互方式）（顺序很重要，请考虑您希望将哪个分支的第一次提交作为合并分支的第一次提交）。

**3.**准备以下脚本（`rebase-reoder-by-date`）：

```
#!/bin/sh
awk '
/^pick/ {
            printf "%s %s ", $1, $2;
            system("echo -n `git show --format='%ai' -s " $2 "`");
            for (i = 3; i <= NF; i++) printf " %s", $i; printf "\n";
        }
' $1 | sort -k3 > $1.tmp
mv $1.tmp $1 
```

**4.**运行：`GIT_SEQUENCE_EDITOR=./rebase-reoder-by-date git rebase -i <initial commit>`

免责声明：所有这些操作都应该发生在原始存储库的副本上，审查/验证/测试组合分支以确保它是您所期望的并包含您所期望的，保持备份方便。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T18:52:57.750

*[有关完全自动化的解决方案，请参阅我的另一个答案。我将把它作为最终解决方案的路径示例，以防有人面临类似的不太明显的解决任务。]*

好的，这不是问题的真正答案（完全脚本化的自动化解决方案），而是思考和示例如何（基于交互式变基）处理可以自动化。

嗯，首先，最终的解决方案`git filter-branch --parent-filter`看起来正是我们所需要的。除了我的 git-fu 不允许我用它编写 1-、2- 或 3-liner 之外，编写独立脚本来解析所有修订的方法并不酷，而且比 rebase -i 更费力。

因此，如果提交的作者日期可见，则可以有效地使用 rebase -i。我的第一个想法是临时修补提交消息以使用作者日期开始`git filter-branch --msg-filter`，运行 rebase -i，然后取消修补消息。

第二个想法是：为什么要麻烦，最好修补 rebase -i 使用的 rebase 提交列表。因此，该过程将是：

1.  像往常一样，将来自不同仓库的分支 A 和 B 合并到一个仓库中。
2.  将一个分支重新设置为另一个分支（非交互式）。考虑哪个分支应该基于哪个分支，具有初始提交权（这不能轻易地用 rebase 重写）。
3.  开始`git rebase -i`
4.  在另一个控制台中，转到 $REPO/.git/rebase-merge/
5.  跑：`awk '/^pick/ {printf "%s %s ", $1, $2; system("echo -n `git show --format='%ai' -s " $2 "`"); for (i = 3; i <= NF; i++) printf " %s", $i; printf "\n"; }' git-rebase-todo > git-rebase-todo.new; mv git-rebase-todo.new git-rebase-todo`
6.  这似乎只是重新排序提交的正确位置/方式：`sort -k3 git-rebase-todo >git-rebase-todo.new; mv git-rebase-todo.new git-rebase-todo`
7.  切换到原始控制台并在编辑器中重新加载 git-rebase-todo 文件，然后退出编辑器。

瞧！`git rebase -i`实际上，如果可以在“非交互”模式下工作，这可以完全编写脚本，我提交了[如何以非交互方式运行 git rebase --interactive？](https://stackoverflow.com/questions/12394166/git-rebase-interactive-in-non-interative-manner)为了那个原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T05:30:26.767

在合并之前将单独的开发留在单独的行中会有什么问题？如果他们是分开的，那么他们就是分开的。

有很多方法可以按时间顺序查看历史记录，而无需在尝试时破解历史记录。你试过`git log --pretty --date-order`吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-22T16:09:37.317

实际上，如果我理解正确，您可以使用[git-stitch-repo](http://search.cpan.org/~book/Git-FastExport-0.106/script/git-stitch-repo)轻松实现此目的。

# python - 用于导入模块的 Python 查找文件夹

> ID：12270359
> 
> 赞同：2
> 
> 时间：2012-09-04T19:47:35.003
> 
> 标签：python, module

两个py文件：

## ./src/foo.py

```
def bar ():
    print 'bar!' 
```

## ./tests/testfoo.py

```
from foo import bar
print 'testing'
bar () 
```

在根文件夹 './' 中，调用

```
python ./tests/testfoo.py 
```

结果是

```
Traceback (most recent call last):
  File "./tests/testfoo.py", line 1, in <module>
    from foo import bar
ImportError: No module named foo 
```

运行 testfoo.py 但解释器自然找不到模块 foo。我可以给解释器提供任何参数以在文件夹“src”中查找模块吗？

# 编辑#1

还添加了两个空的**init** .py 文件。

```
./src/__init__.py
./tests/__init__.py 
```

仍然得到同样的错误。

# 编辑#2（解决方案）

我通过添加一个新的初始化 py 文件解决了问题

# 准备文件

```
import os, sys
cur = os.path.dirname (__file__)
pathtest = os.path.join (cur, 'tests')
sys.path.append (pathtest) 
```

然后调用：

```
python prep.py tests/testfoo.py 
```

有效

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:49:11.840

试试这个：

```
import sys
sys.path.append('your/path')
import testfoo 
```

您可能需要创建`./tests`一个绝对路径...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T19:54:00.137

环境变量 PYTHONPATH 保留 Python 模块的搜索路径。例如

```
$ echo $PYTHONPATH
/home/username/lib/python2.6/site-packages:/usr/local/stsci_python/lib/python: 
```

修改它以添加您的目录：

```
export PYTHONPATH="$PYTHONPATH:/your/new/path" 
```

（顺便说一下，这是在 BASH 上。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T19:50:07.643

在这些目录中放置一个`__init__.py`以向 python 表明它们应该被视为包。

```
./src/__init__.py
./tests/__init__.py 
```

这将从您运行它的位置解决问题，因为 python 将检查当前目录。但如果您从某个随机位置运行它，它不会解决问题，例如：

```
/some/other/path/ $ /projects/tests/testfoo.py 
```

您需要修改 PYTHONPATH 以包含该位置：

```
PYTHONPATH=$PYTHONPATH:/projects 
```

这可以添加到您的 shell 环境中，也可以每次手动完成。

# html - Internet Explorer 7 使用 min-width 溢出

> ID：12270360
> 
> 赞同：2
> 
> 时间：2012-09-04T19:47:36.890
> 
> 标签：html, css, internet-explorer-7

受影响的页面：[http ://adq.geantduweb.ca/](http://adq.geantduweb.ca/)

Firefox、Ie8、9 和 Google chrome 都以预期的效果运行。溢出工作...

但是 internet explorer 7 我在底部有一个水平滚动，你可以看到我的白色面具隐藏了主题蓝色条（面包屑）

有什么想法可以让它在ie7中工作吗？

我的溢出在我的#wrapper 上，它的最小宽度为 960px

这是导致问题的元素的一些 CSS。（注意这是 SASS CSS，它在解析时像普通的 CSS 一样输出。）

```
#wrapper
    min-width:960px
    overflow:hidden

#content
    background:#fff
    min-height:100px
    padding:1px 0px 0px 0px
    #component
        padding-bottom:30px
    .contentinner
        position:relative
        width:960px
        margin:0px auto
        .contentrightmask
            position:absolute
            top:-44px
            right:-10000px
            width:10000px
            z-index:900
            height:43px
            padding:0px
            margin:0px
            background:#FFF 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T02:37:03.173

1.IE6 和 7 都做到了这一点，这是由它们令人震惊的吱吱作响的布局引擎造成的——它从来没有考虑过 CSS 构建，它仍然显示，即使在 IE8(q) 中也是如此。将 float:right 元素放在首位可能是最常见的。通过[Keith](https://stackoverflow.com/users/905/keith) [更多信息](https://stackoverflow.com/questions/1820007/ie7-float-right-problems)
2.或尝试将它们设置为`display:inline`或`display:inline-block` [更多信息](http://www.sitepoint.com/give-floats-the-flick-in-css-layouts/) [其他链接](http://www.kollerat.com/cms/index.php/Web-admin/HTML/IE7-and-inline-block.html)
3.尝试进行小的更改标记：将带有浮动的项目放在没有浮动的项目之前（来自同一行）。它应该有帮助。通过[oryol](https://stackoverflow.com/users/586383/oryol) [更多信息](https://stackoverflow.com/questions/4797573/float-right-in-ie7-dropping-to-a-new-line)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:45:22.017

在你的代码中

`<div class="contentrightmask" slick-uniqueid="389"/>`在ie7中

哪个有`possision absolute`和宽度是`10000px`，甚至它不包含任何数据删除它`div`或修复你的Css

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:23:31.547

我修好了它

感谢：[http ://snook.ca/archives/html_and_css/position_relative_overflow_ie](http://snook.ca/archives/html_and_css/position_relative_overflow_ie)

我把位置：相对于我的#wrapper（具有溢出的元素：隐藏。）

感谢所有尝试过的人:)

# ruby - 使用 ruby 中的集会 REST 自动添加任务以集会

> ID：12270366
> 
> 赞同：0
> 
> 时间：2012-09-04T19:48:25.743
> 
> 标签：ruby, api, rest, rally

从下面的示例代码中，我能够测试列出项目中所有任务的工作。

我想在用户故事 US1234 下自动添加新任务。

我在 excel 中有大约 50 个用户故事可以输入任务字段（名称、描述、估计、待办事项等），我想自动化这项工作。

如何使用 ruby​​ 中的 REST api 在用户故事下使用任务字段创建任务。

此链接没有太多帮助[http://developer.rallydev.com/help/ruby-toolkit-rally-rest-api](http://developer.rallydev.com/help/ruby-toolkit-rally-rest-api)

```
require 'rubygems'
require 'rally_rest_api'

rally= RallyRestAPI.new(:base_url =>"https://rally1.rallydev.com/slm",  :username => "harsha.gowda@xyz.com",  :password => "xyz123")
projects  = rally.find(:project) { equal:name, "XYZ Engineering - Scrum Team 2"}

projects.each do |project| 
 #  puts project.name   

   tasks = rally.find(:task, :project => project, :fetch => true) {equal :State, "Defined"}

   tasks.each do |task| 
       puts task.name
   end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:21:35.543

您应该能够在这里找到您问题的大部分答案：[http](http://rally-rest-api.rubyforge.org/crud.html) ://rally-rest-api.rubyforge.org/crud.html 。

这是一个基本示例，它遍历用户故事中的每个任务：

```
require 'rubygems'
require 'rally_rest_api'

rally= RallyRestAPI.new(:base_url => url,  :username => user,  :password => pw)
project  = (rally.find(:project) { equal :name, name}).first()

rally.find(:hierarchical_requirement, :project => project) {equal :some_field, some_value}.each{ |hr|
    hr.tasks.each{ |task|
        task.update(:some_field1 => some_value1)
        task.update(:some_field2 => some_value2)
        task.update(:some_field3 => some_value3)
        task.update(:some_field4 => some_value4)
    }
} 
```

我不知道您打算如何单独更新每个内容，因此您必须使用自己的逻辑对其进行修改。

# android - 如何存储 Android 应用内计费的订阅数据？

> ID：12270367
> 
> 赞同：3
> 
> 时间：2012-09-04T19:48:27.323
> 
> 标签：android, security, in-app-purchase, in-app-billing, subscription

我正在尝试实施应用内计费，我的应用唯一销售的是每月订阅。我已经几乎复制了 Android 提供的地下城示例并且它可以工作，但是对于我必须出售的一件东西来说它似乎过于复杂（而且我知道我无论如何都不应该复制它）。

Dungeons 示例有一个 PurchaseDatabase 类，用于跟踪用户的所有购买。由于我的应用程序中只有一次购买，而不是拥有数据库，因此在我启动应用程序时使用 SharedPreference/boolean “isPurchased” 之类的东西并更新/检查似乎更有意义.. . 现在我对安全性知之甚少，但这似乎只是敲响了警钟，并且可能非常容易被破解。

那么，我应该如何存储/恢复这一数据呢？无论如何，我需要保存和跟踪什么？

**编辑：找到这个[应用内结算。如何存储用户已支付的信息？](https://stackoverflow.com/questions/12211255/in-app-billing-how-to-store-information-that-user-has-paid?rq=1). 看起来我应该使用 SharedPreference，但这个问题仍然存在：我是只保存一个布尔值“isPurchased”还是应该跟踪 orderId、developerPayload 等？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T02:04:40.647

如果您只是在共享首选项中保存一个标志，任何拥有根设备的用户都可以随意翻转标志并“订阅”而无需付费。所以你至少应该做一些混淆。这是一个[示例方法](http://developer.android.com/guide/google/play/licensing/adding-licensing.html#impl-Obfuscator)。此外，还有一个用于检查订阅状态的[API](https://developers.google.com/android-publisher/v1/)，因此您应该定期检查以确保订阅有效。

# c# - 比较两个 base64 图像字符串并删除匹配项？

> ID：12270373
> 
> 赞同：1
> 
> 时间：2012-09-04T19:48:49.037
> 
> 标签：c#, image, base64, string-matching

不确定我正在尝试做的事情是否会奏效，甚至可能。基本上我正在创建一个远程桌面类型的应用程序，它将屏幕捕获为 jpeg 图像并将其发送到客户端应用程序进行显示。
我想通过将图像与旧图像进行比较并仅发送差异来减少每次发送的数据量。例如：

```
var bitmap = new Bitmap(1024, 720);

string oldBase = "";

using (var stream = new MemoryStream())
using (var graphics = Graphics.FromImage(bitmap))
{
    graphics.CopyFromScreen(bounds.X, bounds.Y, 0, 0, bounds.Size);
    bitmap.Save(stream, ImageFormat.Jpeg);
    string newBase = Convert.ToBase64String(stream.ToArray());

    // ! Do compare/replace stuff here with newBase and oldBase !

    // Store the old image as a base64 string.
    oldBase = newBase;
} 
```

使用类似这样的东西，我可以比较两个 base64 字符串并替换任何匹配项。匹配的文本可以替换为：

> [替换的字符数]

这样，在客户端我知道在哪里替换旧数据并添加新数据。同样，我不确定这是否会起作用，因此非常感谢任何人对此的想法。:) 如果可能的话，你能指出我正确的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:59:01.657

我们目前正在研究非常相似的东西 - 基本上，您尝试实现的是视频编解码器（非常简单的运动 jpeg）。有一些简单的方法和一些非常复杂的方法。

1.  最简单的方法是比较连续帧并仅发送差异。您可以尝试比较 RGB 空间或 YCbCr 空间中帧之间的颜色差异，并仅发送随某些元数据发生变化的像素。
2.  更复杂的解决方案是比较DCT变换后熵编码前的图片。这将为您提供更好的比较并删除一些丑陋的伪影。
3.  查看有关 JPEG、Motion JPEG、H.264 的更多信息 - 您可以使用这些编解码器正在使用的某些方法，或者尽可能简单地使用现有编解码器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:32:16.717

您可以通过直接比较位图位来做到这一点。查看[Bitmap.LockBits](http://msdn.microsoft.com/en-us/library/5ey6h79d.aspx)，它将为您提供一个`BitmapData`指针，您可以从中获取像素数据。然后，您可以比较每条扫描线的像素并将它们编码为您想要用于传输的任何格式。

请注意，以字节为单位的扫描线长度始终是 4 的倍数。因此，除非您使用 32 位颜色，否则您必须考虑可能位于扫描线末尾的填充。这就是该`Stride`属性在`BitmapData`结构中的用途。

在每条扫描线的基础上做事更容易，但可能不如将位图视为一个连续的数据块那样有效（在减少发送的数据量方面）。您的传输格式应类似于：

```
<start marker>
// for each scan line
<scan line marker><scan line number>
<pixel position><number of pixels><pixel data>
<pixel position><number of pixels><pixel data>
...
// next scan line
<scan line marker><scan line number>
...
<end marker> 
```

每个`<pixel position><number of pixels><pixel data>`条目都是一系列变化的像素。如果一条扫描线没有变化的像素，您可以选择不发送。或者您可以只发送扫描线标记和编号，然后立即发送下一条扫描线。

`<pixel position>`对于字段和字段，两个字节就足够了`<number of pixels>`。因此，每个块都有四个字节的开销。在您拥有最简单的版本后，您可能会感兴趣的优化是在小运行时组合更改/未更改的像素块。例如，如果您有`uucucuc`，其中`u`是一个未更改的像素并且`c`是一个更改的像素，您可能希望将 编码`cucuc`为五个更改像素的运行。这将减少您必须传输的数据量。

请注意，这不是做事的*最佳方式，但它简单、有效且相对容易实现。*

在任何情况下，一旦你编码了东西，你就可以通过内置的`GZip`压缩​​器运行数据（尽管这样做可能没有多大帮助），然后将它向下推送到客户端，它会解压缩并解释结果.

在一台机器上构建它是最简单的，使用两个窗口来验证结果。一旦工作正常，您就可以连接网络传输部分。通过在中间放置传输步骤来调试初始剪辑可能会非常令人沮丧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:53:41.297

这不适用于JPEG。您需要使用 BMP，或者可能是未压缩的 TIFF。

我想如果是我，我会使用 BMP，扫描像素以查找更改并构建一个 PNG，其中除了更改之外的所有内容都是透明的。

首先，这会减少您的传输大小，因为 PNG 压缩非常好，尤其是对于重复像素。

其次，它使接收端的显示变得非常容易，因为您可以简单地将新图像绘制在旧图像之上。

# python - 使用 pymongo 对嵌套文档进行排序

> ID：12270374
> 
> 赞同：0
> 
> 时间：2012-09-04T19:48:55.440
> 
> 标签：python, tornado, pymongo

我如何对嵌套文档进行排序：

```
produits = self.db.users.find({"email":email}, {"produit_up":1,"_id":0}).sort(("produit_up.namep"), pymongo.DESCENDING) 
```

这行不通！

这是我的架构：

```
user={
"pseudo":pseudo,
"email":email, 
"avatar":avatar_id
"produit_up":{
"namep":namep, 
"prix":prix, 
}
} 
```

一切都没有排序，我只使用 produits = self.db.users.find_one({"email":email})["produit_up"] 在我的模板中我只是调用：

```
{% for produit in list(produits) %}
{{ produit["namep"] }}  
{{ produit["prix"] }}
....
{% end %} 
```

那么如果我使用`SORT`然后`LIMIT`返回`namep`例如或`prix`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:21:49.783

```
# find_one document with sort.
db.produit.find_one({"email": "email"}, { "produit_up" : 1,"_id" : 0 }, sort=[("produit_up.namep", 1)])

# find all document with sort and limit at last 10 document.
db.produit.find({"email": "email"}, { "produit_up" : 1,"_id" : 0 }, sort=[("produit_up.namep", 1)]).limit(10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T21:44:31.410

好的，提示是使用 python 列表，然后使用键对其进行 [排序 如何在 Python 中按字典的值对字典列表进行排序？](https://stackoverflow.com/questions/72899/in-python-how-do-i-sort-a-list-of-dictionaries-by-values-of-the-dictionary)

# git - 向现有 xcode 项目添加第二个 Git 存储库

> ID：12270375
> 
> 赞同：1
> 
> 时间：2012-09-04T19:48:56.557
> 
> 标签：git, xcode4, github

我从一位离开公司的同事那里继承了一个代码库。他设计了一个自定义库来与他放入我们公司 github 帐户的代码一起使用。但是，我不知道如何将这个库从 github 拉到我电脑上的项目中。我已经设法将项目连接到主代码存储库，但我不知道添加库的分步方法。我没有大量使用命令行 git 的经验，但如果这是唯一的方法，我愿意尝试......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T01:28:47.837

我在 XCode 中有一个项目，由 2 个独立的 git 存储库组成。一个用于主主机应用程序，另一个用于主机应用程序使用的单独的数字运算库。选择拆分是因为将库作为更轻量级和独立的代码体共享会很好。

只需将单独的库存储库拉入磁盘上的单独（非嵌套）目录，然后通过将源添加到项目中，从主 XCode 项目链接到该库。当文件浏览器中的任何一个 repo 发生更改时，XCode 会自动向您显示。项目文件布局和存储库是独立的概念。如果您愿意，您可以为每个源文件创建一个单独的存储库。

要在本地机器上提取库，首先将 repo 分叉到您自己的帐户，然后使用站点上的说明将其拉入。.

[https://help.github.com/articles/fork-a-repo](https://help.github.com/articles/fork-a-repo)

如果您修改库，请记住从库目录提交。当您推送时，您将更新您的分叉。

# jquery - XML 和 jQuery - 修改后获取 XML 代码

> ID：12270378
> 
> 赞同：0
> 
> 时间：2012-09-04T19:48:58.133
> 
> 标签：jquery, xml

我在这里尝试完成一个非常简单的任务：使用 jQuery 修改 XML 字符串并取回修改后的字符串。

我认为之前，我可以使用 .html() 函数来执行此操作，但我认为他们摆脱了解析 XML 文档的功能。

所以，这里是代码：

```
var tempXML = "<node1><node2>Content #1</node2></node1>";
var parsedXML = $.parseXML(tempXML);
$(parsedXML).find('node2').text('XXXXXX');
alert($(parsedXML).find('node2').text());  // That works, it will display XXXXXX 
```

现在，正如我所怀疑的那样， tempXML var 没有被修改。

那么，如何获得应该显示为“XXXXXX”的 XML 代码？

调用 $(parsedXML).text(); 只返回 XXXXXX 并且 .html() 没有为对象定义...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:57:34.543

这是一个技巧，但这里是：

```
var tempXML = "<node1><node2>Content #1</node2></node1>";
var parsedXML = $.parseXML(tempXML);
$(parsedXML).find('node2').text('XXXXXX');

alert($("<div>").append($(parsedXML).find('node2')).html());​ 
```

**编辑**：或者，我认为这是更可靠的解决方案：

```
function XMLToString(oXML) {   
    if (window.ActiveXObject) {     
        return oXML.xml;   
    } else {     
        return (new XMLSerializer()).serializeToString(oXML);   
    } 
}
var tempXML = "<node1><node2>Content #1</node2></node1>";
var parsedXML = $.parseXML(tempXML);
$(parsedXML).find('node2').text('XXXXXX');
alert(XMLToString($(parsedXML).find('node2')[0])); 
```

[jsFiddle](http://jsfiddle.net/hJYqe/)

# silverlight - 对于 WinCE7，Silverlight 的 Sleep() 是否有任何替代方法？

> ID：12270383
> 
> 赞同：1
> 
> 时间：2012-09-04T19:49:24.903
> 
> 标签：silverlight, windows-ce, sleep

我正在为 Windows Embedded 项目开发 Silverlight，但我的 UI 线程遇到了问题。目前，应用程序 UI 线程必须根据存储在共享内存文件中的数据不断更新其显示，然后在再次更新 UI 之前休眠指定的毫秒数。所以本质上代码是这样的：

```
while(true){
    UpdateUI();    //gets data from shared memory and updates graphics
    Sleep(250);
} 
```

但是，我相信你们中的一些人知道，不建议在主 Silverlight UI 线程中使用 Sleep()。果然，我的整个嵌入式系统在运行 20-30 分钟后会崩溃，我已经确定对 Sleep() 的调用是问题所在。

我需要的是一种替代方法来更新 UI，暂停一段时间，然后再次更新 UI，无限重复此过程。

据我所知，该项目的嵌入式特性不允许我使用一些明显的 Sleep() 替代方案，这将是 UI 线程中更好的解决方案（即 Join()）。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:08:55.467

计时器是比循环更好的路由，尤其是在 UI 线程中带有睡眠的循环。[对SetTimer](http://msdn.microsoft.com/en-us/library/aa929068.aspx)或[timeSetEvent](http://msdn.microsoft.com/en-us/library/ee485495%28v=winembedded.60%29.aspx)的简单调用可能就是您所追求的。

```
int WinMain(...)
{
    // initialize xamls stuff

    // start a timer
    SetTimer(0, 0, 250, TimerProc);
    // *OR*
    timeSetEvent(250, 0, EventProc, NULL, TIME_PERIODIC | TIME_CALLBACK_FUNCTION);

    // call StartDialog or whatever to launch your UI
}

void CALLBACK TimerProc(HWND hwnd, UINT, UINT, DWORD dwTime)
{
    // this will get called every 250ms    
    UpdateUI();
}

void CALLBACK EventProc(UINT uID, UINT uMsg, DWORD dwUser, DWORD dw1, DWORD dw2)
{
    // this will get called every 250ms    
    UpdateUI();
} 
```

# c++ - 是否可以将 PEX 与 C 一起使用？

> ID：12270385
> 
> 赞同：2
> 
> 时间：2012-09-04T19:49:29.113
> 
> 标签：c++, c, pex

我是 PEX、Visual Studio 和 .NET 世界的新手，但我为 C# 生成了一些测试。我已经读过，PEX 还可以分析用任何 .NET 语言编写的 .NET 程序，所以目前我正试图让 PEX 与 C 一起工作（我已将代码存储在 C++ 项目中。这是正确的方法吗？） . 由于没有适用于 C++ 的 Visual Studio PEX 插件，我尝试使用命令行界面。在教程“使用 Microsoft Pex 进行参数化单元测试”中说，我应该有一个以 .dll 或 .exe 结尾的“.NET 程序集”，其中包含一个用 PexClassAttribute 注释的类和用 PexMethodAttribute 注释的公共方法。由于本教程仅提供了 C# 示例，因此我尝试在 .exe 上运行 PEX，而无需任何注释。所以我在 Visual Studio 中编译了我的代码，得到了我的汇编代码。exe 并尝试在其上运行 PEX。我收到以下错误：

```
Microsoft Pex v0.94.51006.1 -- http://research.microsoft.com/pex --
v4.0.30319
Copyright (c) Microsoft Corporation 2007-2010\. All rights reserved.

unexpected error: error while loading of 'light' (currently running
with 4 bytes/pointer).
     LAUNCHER FAILED
unexpected failure: error while loading assembly (-1006 - 0xfffffc12) 
```

所以我有以下问题：

1.  是否可以将 PEX 与 C 一起使用？或者我必须将我的代码转换为 C#？
2.  看起来我的 light.exe 不是“.NET 程序集”。如何从 C 代码生成“.NET 程序集”？
3.  我收到错误消息是因为我的程序集格式错误还是因为我没有注释代码？（由于错误消息，第二个对我来说似乎不太可能。我希望类似“应用所有过滤器后未找到任何探索；您是否忘记了 [PexClass] 或 [PexMethod] 属性？”）。
4.  如果错误不是由于缺少注释或程序集格式错误，那么根本原因是什么？
5.  如何在 C++ 中使用 PexClassAttribute 注释类？我需要哪些库以及生成装配的过程如何工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:58:03.587

Pex 仅适用于 .NET 程序集。它*可以*与任何 .NET 语言一起使用，但 C 不是一种语言——即使是这样，它仍然只能在为 CLR 编写的纯 C 代码上工作，而不是在任何本机 C 代码（你的代码）上工作。

因此，将 C 代码作为 C++ 项目加载并没有帮助，因为即使 C++ 代码也无法被 Pex 分析，除非它以 CLR 为目标。

# matlab - 包含复数的图像的归一化

> ID：12270386
> 
> 赞同：1
> 
> 时间：2012-09-04T19:49:34.403
> 
> 标签：matlab, matrix, normalization, complex-numbers

在 MATLAB 中，我有一个包含复数的图像。我想标准化矩阵以使值介于 0 和 1 之间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T16:10:06.963

不确定您的意思，但假设您想对实数执行此操作：

M = 10*兰德(5)-5；M_normalized = (M-min(M(:)))/(max(M(:))-min(M(:)))

一定要检查，但总的来说应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T13:54:56.413

首先，复数从何而来，为什么需要对图像进行归一化？

具有复杂图像的情况很少见，除非它是其他图像的傅里叶变换。因此，除非您期望获得复杂的图像，否则您可能需要检查错误。

如果您需要标准化以显示带有 的图像`imshow`，那么您可能希望改为显示其幅度和相位。您可以使用该`abs`函数获取幅度，并使用该`angle`函数获取相位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T22:58:13.800

您可能还想使用[abs](http://www.mathworks.com/help/matlab/ref/abs.html)函数将虚数转换为实数。然后使用@DennisJaheruddin 的答案缩放到正确的范围

# javascript - dhtmlx 网格 - 添加新行并在单元格编辑器上开始

> ID：12270395
> 
> 赞同：1
> 
> 时间：2012-09-04T19:50:05.137
> 
> 标签：javascript, grid, dhtmlx

我想在我的 dhtmlx 网格中添加一个新行并运行 on-cell-editor。提供了一些功能，`selectCell`但对我不起作用。单元格被选中，但没有编辑器可见或被触发。

```
function addNewGridRow()
{
    // add new row with id "new" and value "New event category" as col 0 value
    editEventCategoryGrid.addRow('new','<?php echo $this->translate->_('EVT_newCategorieName'); ?>');
    // start editor on this cell
    var nameCell = editEventCategoryGrid.cells('new',0);
    nameCell.edit();
} 
```

我已经尝试过`nameCell.edit()`并且编辑器出现了，但它不会`blur`像其他“普通”单元内编辑器那样关闭。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:25:23.860

You can use

```
//add new row
editEventCategoryGrid.addRow('new','<?php echo $this->translate->_('EVT_newCategorieName'); ?>');
//select cell
editEventCategoryGrid.selectCell('new',0);
//switch selected cell to edit mode
editEventCategoryGrid.editCell(); 
```

# google-maps-api-3 - 从 google.maps.Polyline 生成 Bézier 或 Spline 的插件

> ID：12270401
> 
> 赞同：5
> 
> 时间：2012-09-04T19:50:22.603
> 
> 标签：google-maps-api-3, spline

我需要在谷歌地图上画线。目前我为此目的使用 google.maps.Polyline 并且一切正常

但是这条线看起来不太好。我想用贝塞尔曲线或样条曲线代替。

有没有人做过这样的事情或看过任何像样的插件或库？我唯一找到的是[这个链接](http://johan.karlsteen.com/2011/07/30/improving-google-maps-polygons-with-b-splines/)。

使用多边形： [![在此处输入图像描述](../Images/6bac59e1684ae6e22ebe54bfbaac4d3a.png)](https://i.stack.imgur.com/omY6T.png)

带样条： [![在此处输入图像描述](../Images/5395db831c02d81ced6218cbb020f75d.png)](https://i.stack.imgur.com/DGtUb.png)

这是一个老问题，但对于问我是否找到任何东西的人来说，答案是“没有”。

# sql - 从大型子查询中获取多列

> ID：12270412
> 
> 赞同：0
> 
> 时间：2012-09-04T19:51:15.757
> 
> 标签：sql, oracle, ansi-sql

我看到了一些关于从子查询中获取列的帖子，其中大多数建议对每列使用一个选择，但这是我的情况

```
SELECT CAST(p.idvendor AS VARCHAR(10)), CAST(p.description AS VARCHAR(50)),  
(SELECT CAST(NVL(SUM(CASE WHEN locals_sales.cantidad >=0
                           AND locals_sales.cantidad <locals_sales.pqlocals
                     THEN 1 ELSE 0 END), '0') AS VARCHAR(10)) 
   FROM locals_sales, agents, vendors, locals, locals_sales, history
  WHERE locals.idvendor = vendors.idvendor 
    AND locals_sales.IDlocals = locals.idlocals
    AND agents.codagente=vendors.codagente
    AND agents.idagent!=1
    AND locals_sales.number_n_line = locals_sales.n_line
    AND locals.estado=1
    AND vendors.idvendor = p.idvendor
    AND history.number_line(+) = locals_sales.n_line
    AND history.date(+) >= to_date('4/9/2012 00:00', 'dd/mm/yy HH24:mi:ss')
 ) AS critic, 
(SELECT CAST(NVL(SUM(CASE WHEN locals_sales.cantidad >=locals_sales.pqlocals
                           AND locals_sales.cantidad <locals_sales.media
                     THEN 1 ELSE 0 END), '0') AS VARCHAR(10))
   FROM locals_sales, agents, vendors, locals, locals_sales, history
  WHERE locals.idvendor = vendors.idvendor
    AND locals_sales.IDlocals = locals.idlocals
    AND agents.codagente=vendors.codagente
    AND agents.idagent!=1
    AND locals_sales.number_n_line = locals_sales.n_line
    AND locals.estado=1
    AND vendors.idvendor = p.idvendor
    AND history.number_line(+) = locals_sales.n_line
    AND history.date(+) >= to_date('4/9/2012 00:00', 'dd/mm/yy HH24:mi:ss')
 ) AS medium, 
(SELECT CAST(NVL(SUM(CASE WHEN locals_sales.cantidad >=locals_sales.media
                     THEN 1 ELSE 0 END), '0') AS VARCHAR(10))
   FROM locals_sales, agents, vendors, locals, locals_sales, history
  WHERE locals.idvendor = vendors.idvendor
    AND locals_sales.IDlocals = locals.idlocals
    AND agents.codagente=vendors.codagente
    AND agents.idagent!=1
    AND locals_sales.number_n_line = locals_sales.n_line
    AND locals.estado=1
    AND vendors.idvendor = p.idvendor
    AND history.number_line(+) = locals_sales.n_line
    AND history.date(+) >= to_date('4/9/2012 00:00', 'dd/mm/yy HH24:mi:ss')
 ) AS NORMAL 
 FROM vendors p, agents ag
WHERE ag.codagente=p.codagente 
```

如您所见，我每列有三个 SUM，这些列来自同一个表，不同之处在于我在每个选择的每个 CASE 中的前提条件

此外，几乎每个选择的结尾我都有这个作为条件

```
vendors.idvendor = p.idvendor 
```

p 是子查询之外的表的别名

我怎样才能避免使用三个几乎相似的选择，而是对 3 列使用单个选择以提高性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:37:08.133

您可以通过将子查询移动到 FROM 子句并进行适当的连接来处理此问题。

最终查询将如下所示：

```
select CAST(p.idvendor AS VARCHAR(10)), CAST(p.description AS VARCHAR(50)),
       s.val1, s.val2, sl.val3
from vendors p join
     agents ag 
     on p.codeagent = ag.codeagent join
     (<a variation of your subquery here with all three columns defined and idvendor in the select list>
     ) s
     on p.idvendors= s.idvendor 
```

此外，为了使您的查询更具可读性，您应该真正使用正确的连接语法。

# javascript - Ajax 提交多值

> ID：12270413
> 
> 赞同：1
> 
> 时间：2012-09-04T19:51:16.620
> 
> 标签：javascript

为什么我的 ajax 函数没有使用 get 方法提交两个值

```
<script language="javascript" type="text/javascript">
<!-- 
//Browser Support Code
function ajaxFunction( ){
    var ajaxRequest;  // The variable that makes Ajax possible!

    try{
        // Opera 8.0+, Firefox, Safari
        ajaxRequest = new XMLHttpRequest();
    } catch (e){
        // Internet Explorer Browsers
        try{
            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try{
                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e){
                // Something went wrong
                alert("Your browser broke!");
                return false;
            }
        }
    }
    // Create a function that will receive data sent from the server
    ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4){
            document.getElementById("emailconfirm").innerHTML= ajaxRequest.responseText;
        }
    }

    ajaxRequest.open("GET", "Atest.php?<?php echo $PDFPassingArray ?>?Email="+ document.getElementById("email").value, true);
    ajaxRequest.send(null); 
} 
```

我希望函数提交数组 $pdfpassingArray，这是一个 html_build_query 和表单中的电子邮件元素 id。目前我只能查看 $pdfPassingarray 值，但不能查看 Email 值。所以我的问题，我做这部分是否正确

```
ajaxRequest.open("GET", "Atest.php?<?php echo $PDFPassingArray ?>?Email="+ document.getElementById("email").value, true); 
```

我的表格

```
 <form name='myForm'>

    <input name="email"   id="email"type="text" />
    <input name="button" onclick="ajaxFunction()" type="button" />
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:53:00.360

您的 URL 字符串中有两个`?`s，

它应该是形式`url.php?a=1&b=2`

# c# - 如何在保存到 MediaLibrary 之前旋转图像

> ID：12270416
> 
> 赞同：1
> 
> 时间：2012-09-04T19:51:35.137
> 
> 标签：c#, windows-phone-7

我允许用户使用硬件相机按钮拍照，这可以在纵向或横向模式下完成。然而，我注意到，即使我的视频画笔相应地旋转，捕获的图像也没有根据图像画笔的当前旋转保存在 MediaLibrary 中。我如何能够在 cameracapturetask_completed 事件上旋转图像，以便更正此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:10:13.653

使用 WriteableBitmapEx [http://writeablebitmapex.codeplex.com/](http://writeablebitmapex.codeplex.com/)并使用扩展方法来旋转图像

# c# - 如何锁定数据类

> ID：12270417
> 
> 赞同：0
> 
> 时间：2012-09-04T19:51:39.903
> 
> 标签：c#, linq-to-sql

我正在使用 Linq to Sql 连接与数据库协作，并且我的 Windows 窗体应用程序与多个线程一起工作，这与 DataClass 不兼容。我修改了支持的连接`MultipleActiveResultSets`，我得到了这个错误`"An item with the same key has already been added."`我已经搜索了这个问题并且只有 2 个答案：

*   仅在主线程中使用您的 DataClass；
*   检索表时锁定DataClass；

我想要`lock`DataClass并且不知道在哪里锁定它，我确信有人在多线程中成功使用了Linq to Sql。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:08:37.810

为了扩展我在评论中所说的内容并回答您的问题 - 我会将所有访问视为一个工作单元，例如（在某些数据访问类中）：

```
public Order GetOrder(int id) {
    // ctx could also be instantiated via an IoC/DI framework, etc
    using(var ctx = CreateDataContext()) {
        return ctx.Orders.SingleOrDefault(x => x.Id == id);
    }
}
public void AddOrder(Order order) {
    if(order == null) throw new ArgumentNullException("order");
    // ctx could also be instantiated via an IoC/DI framework, etc
    using(var ctx = CreateDataContext()) {
        ctx.Orders.InsertOnSubmit(order);
        ctx.SubmitChanges();
    }
} 
```

等关键点：数据上下文不会无限期地打开并被竞争线程重新使用。

# c# - 将位图保存到输出流时出错 - “GDI+ 中发生一般错误”

> ID：12270418
> 
> 赞同：0
> 
> 时间：2012-09-04T19:51:49.843
> 
> 标签：c#, asp.net

我只是想将位图写入`Response.OutputStream`. 这是我所拥有的：

```
System.Drawing.Bitmap outputImage = 
    System.Drawing.Image.FromHbitmap(psd.GetHBitmap());            
Response.Clear();
Response.ContentType = "image/bmp";
Response.Flush();

// error occurs here
outputImage.Save(Response.OutputStream, System.Drawing.Imaging.ImageFormat.Bmp);

outputImage.Dispose();
Response.End(); 
```

有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:59:24.497

我在 ASP.NET 环境中遇到的许多 GDI 错误都与文件夹/文件权限问题有关，这里可能不适用。工作进程是否具有对原始文件的读取权限？您是否将临时文件写入 WP 无权访问的文件夹？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:55:42.070

从MSDN 上的[System.Drawing 命名空间文档：](http://msdn.microsoft.com/en-us/library/system.drawing.aspx)

> 不支持在 Windows 或 ASP.NET 服务中使用 System.Drawing 命名空间中的类。尝试从这些应用程序类型之一中使用这些类可能会产生意想不到的问题，例如服务性能下降和运行时异常。有关受支持的替代方法，请参阅 Windows 映像组件。

您似乎遇到了不支持它的原因之一。

这是一篇[详细的文章](http://www.asprangers.com/post/2012/03/23/Why-you-should-not-use-SystemDrawing-from-ASPNET-applications.aspx)，解释了这些问题的来龙去脉。

除了MSDN 警告中提到的[Windows 映像组件外，](http://msdn.microsoft.com/en-us/library/windows/desktop/ee719654%28v=vs.85%29.aspx)[此问题](https://stackoverflow.com/questions/1528525/alternatives-to-system-drawing-for-use-with-asp-net)中还提到了其他选择。

# ruby-on-rails - 是否可以将任意文本附加到 SimpleForm 中的复选框？

> ID：12270419
> 
> 赞同：0
> 
> 时间：2012-09-04T19:51:54.133
> 
> 标签：ruby-on-rails, ruby, twitter-bootstrap, simple-form

使用[SimpleForm](https://github.com/plataformatec/simple_form)，我想将一行文本附加到复选框。是否有可能做到这一点？我试过了，但到目前为止没有运气。

```
f.input :remember_me, label: "Remember me", # Would be nice if you could add 'append:' here 
```

例如：

`Remember me [ ] Check this box to stay signed in.`

在这种情况下，“记住我”将是标签，而“选中此框...”将是我要添加的任意文本。有没有办法做到这一点？

我预期的html是这样的：

```
<div class="control-group">
  <div class="controls">
    <label class="checkbox">
      <input type="checkbox"> Remember me
    </label>
  </div>
</div> 
```

我不知道如何传递，或者如果你*可以*传递，一个额外的参数给 SimpleForm 助手以包含附加的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:13:30.697

确保至少安装了 simple_form gem 的 2.0.2 版本，然后：

```
<%= f.input :remember_me, :label => false, :inline_label => 'Remember me' %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:23:06.043

尝试这个

```
<%= f.label :remember_me, class: 'checkbox' do %>
  <%= check_box_tag :remember_me %>
  Remember me
<% end %> 
```

# php - 用 IF 语句更新 MYSQL？

> ID：12270420
> 
> 赞同：3
> 
> 时间：2012-09-04T19:52:00.050
> 
> 标签：php, mysql

我想更新我的 MYSQL 表，但有一个条件。

我有一个状态字段和一个时间字段。如果 status=day，不要用当前时间更新时间字段。如果 status=night，则使用当前时间更新时间字段。

现在，我正在执行一个 SELECT 语句，然后在 PHP 中对返回值执行一个 if 语句，然后执行 UPDATE 并更改除时间以外的所有字段，除非 status=night。是否可以在一个命令中完成所有操作？

* * *

编辑：

对不起，只是为了澄清：

WHERE 命令只会在 status=night 时更新行。我总是希望更新行中的所有字段，但仅在状态 = 夜间时更新时间字段。如果 status=day，则更新除时间字段之外的整行。

* * *

代码：

```
if($status=="night") {
    $query = "UPDATE post SET name="$name", comment="$comment", status="$status", time="{now()}" WHERE id='$id'";
} else {
    $query = "UPDATE post SET name="$name", comment="$comment", status="$status" WHERE id='$id'"
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T19:54:22.433

```
UPDATE table
SET field1 = val1, time=IF(status="night",NOW(),time), field3= val3; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:56:29.833

这应该这样做：

```
UPDATE `table` SET `time` = NOW() WHERE `status` = `night` 
```

# java - Java 匹配循环

> ID：12270421
> 
> 赞同：0
> 
> 时间：2012-09-04T19:52:01.330
> 
> 标签：java, match

我正在尝试遍历一些字符串数组列表以匹配元素，但我收到一个错误，即我的数组长度不同。我有一个数组列表，里面有一堆样本，第二个只有几个样本。我希望搜索第一个数组列表，同时将它们与第二个数组中的值进行比较和匹配。当我找到两个数组列表匹配的位置时，我想获取第一个的索引并将其应用于第三个，它包含与样本协调的手段（作为提醒，它们存储在第一个中。）我有包含导致问题所在的代码，但已尝试使其尽可能简洁。*本质上，我希望有人可以解释我遇到的错误，或者更好的比较它们的方法。*

```
//this is how they are declared
ArrayList<String> pit = new ArrayList<String>(); int h =0;
...etc...
//a file is read in
while((sLine=inpt.readLine())!=null){
      splitn=sLine.split(delim2);
      //splits the file into two different ArrayLists, names and means
      pit.add(splitn[0]); pit2.add(splitn[2]);
}
String b="mean"; int pitn = 0;
//remove column titles from those two lists
while(pitn<pit.size()){
     if(pit2.get(pitn).equals(b)){
        pit.remove(pitn); pit2.remove(pitn);
     }
     else{
          ++pitn;
     }
}
//match a pattern to the file names that were entered
ArrayList<String> sampleNum = new ArrayList<String>();          
for(String inp : filenames) {
     Matcher matt=patt.matcher(inp);
     while(matt.find()){
           if(matt.groupCount() >= 2) {
              //match the first part of the file name
              samplenum = matt.group(1);
              //match the second grouping to paneltype
              paneltype = matt.group(2);
           }
           //add sample names to another arraylist
           sampleNum.add(samplenum);
     }
    **//I wish to search through the pit values for a place where it matches sampleNum
    //Problematically I am getting an error
    //for the length of pit** 
     for(int inx=0;inx<pit.size();inx++){
        //if the value of pit equals the value of sampleNum
        if(pit.get(inx).equals(sampleNum.get(h))){
           //add the value, of the same index, from pit2 to the mncov arraylist
           mncov.add(pit2.get(inx));
           h++;
        }
     } 
```

> java.lang.IndexOutOfBoundsException：索引：2，大小：2

我正在输入 2 个文件，所以这是有道理的，因为 sampleNum 取自文件名。2 个文件 = 2 个文件名

```
at java.util.ArrayList.RangeCheck(ArrayList.java:547)
at java.util.ArrayList.get(ArrayList.java:322)
at consistentbelow.ConsistentBelow.main(ConsistentBelow.java:**72**) 
```

第**72**行是这一行：

> (pit.get(inx).equals(sampleNum.get(h))){

所以我完全不确定这里有什么问题。我觉得我错过了一些明显的东西，但已经考虑到了盲目的程度。我认为我提供了足够的信息来获得一些帮助，但如果有帮助的话，我不会哀叹提供更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:02:20.720

我认为你的问题不是大小的问题，`pit`而是大小的问题`sampleNum`。每次找到匹配项时您都在递增`h`，但没有什么能阻止 h 递增到高于 sampleNum 的总长度（即所有内容都已匹配并且它一直在尝试匹配）。快速修复可能是这样的

```
for(int inx=0; inx<pit.size() && h < sampleNum.size(); inx++){
    if(pit.get(inx).equals(sampleNum.get(h))){
       //add the value, of the same index, from pit2 to the mncov arraylist
       mncov.add(pit2.get(inx));
       h++;
    }
} 
```

不是最优雅的修复，但应该消除我认为的错误。我还怀疑这可能与您期望的输出不完全一样，但是如果不更好地了解您要做什么，就很难说。

# sql - 使用实体框架的多对多表的 MVC 3 模型

> ID：12270425
> 
> 赞同：1
> 
> 时间：2012-09-04T19:52:24.710
> 
> 标签：sql, asp.net-mvc-3, entity-framework, model, ef-database-first

我想简单地选择数据库中的版本和模板组合。

这是数据库结构：

```
CREATE Table ProductVersion(
id int not null primary key Identity,
Product_ID int not null,
Version decimal(18,1) not null,
Active bit not null,
LicenseVersion int not null,
FOREIGN KEY (Product_ID) References Products(id)
)

Create Table CodeTemplates(
id int not null primary key Identity,
Name varchar(50) not null,
DLT_ID int not null,
QuantityRule_ID int,
SerialRule_ID int,
DurationRule_ID int,
foreign key (DLT_ID) References DisplayedLicenseTypes(id),
foreign key (QuantityRule_ID) References Rulesets(id),
foreign key (SerialRule_ID) References Rulesets(id),
foreign key (DurationRule_ID) References Rulesets(id)
)

CREATE table ProductVersion_CodeTemplate(
ProductVersion_ID int not null,
CodeTemplate_ID int not null,
CONSTRAINT PK_Restrictions Primary Key Clustered
(
    ProductVersion_ID asc,
    CodeTemplate_ID asc
),
foreign key (ProductVersion_ID) References ProductVersion(id),
foreign key (CodeTemplate_ID) References CodeTemplates(id)
) 
```

以下是用于 productversion 和 CodeTemplates 的当前模型：

```
[Table("ProductVersion")]
public class ProductVersionModel
{
    public int ID { get; set; }
    public virtual ProductModel Product { get; set; }
    [DisplayFormat(DataFormatString = "{0:F1}",ApplyFormatInEditMode=true)]
    public decimal Version { get; set; }
    public bool Active { get; set; }
    public int LicenseVersion { get; set; }
}
[Table("CodeTemplates")]
public class TemplateModel
{
    public int ID { get; set; }

    public string Name { get; set; }
    public virtual DisplayedLicenseTypeModel DLT { get; set; }
    public virtual List<LicenseFlagModel> LicenseFlags { get; set; }
    public virtual RulesetModel QuantityRule { get; set; }
    public virtual RulesetModel SerialRule { get; set; }
    public virtual RulesetModel DurationRule { get; set; }
} 
```

这是我尝试使用的：

```
[Table("ProductVersion_CodeTemplate")]
public class ProductVersionWithTemplateModel
{
    [Key, Column(Order = 0)]
    public virtual ProductVersionModel ProductVersion { get; set; }
    [Key, Column(Order = 1)]
    public virtual TemplateModel CodeTemplate { get; set; }
} 
```

弹出的第一个错误是：

> 在模型生成期间检测到一个或多个验证错误：
> 
> System.Data.Edm.EdmEntityType: : EntityType 'ProductVersionWithTemplateModel' 没有定义键。定义此 EntityType 的键。System.Data.Edm.EdmEntitySet: EntityType: EntitySet “AppliedTemplates” 基于没有定义键的类型“ProductVersionWithTemplateModel”。

我在这里缺少什么，一个 dbmodelbuilder 绑定？

回答（因为评论中的格式很糟糕）：

```
[Table("ProductVersion_CodeTemplate")]
    public class ProductVersionWithTemplateModel
    {
        [Key, Column(Order = 0)]
        public int ProductVersion_ID { get; set; }
        [ForeignKey("ProductVersion_ID")]
        public virtual ProductVersionModel ProductVersion { get; set; }
        [Key, Column(Order = 1)]
        public int CodeTemplate_ID { get; set; }
        [ForeignKey("CodeTemplate_ID")]
        public virtual TemplateModel CodeTemplate { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:56:27.783

也许您应该包括这样的参考：

```
[Table("ProductVersion_CodeTemplate")]
public class ProductVersionWithTemplateModel
{
 [Key, Column(Order = 0)]
 public int ProductVersionModelId { get; set; }
 [ForeignKey("ProductVersionModelId")]
 public virtual ProductVersionModel ProductVersion { get; set; }
 [Key, Column(Order = 1)]
 public int TemplateModelId { get; set; }
 [ForeignKey("TemplateModelId")]
 public virtual TemplateModel CodeTemplate { get; set; }
} 
```

# c# - 引用 DLL、编译、DLL 版本控制

> ID：12270427
> 
> 赞同：3
> 
> 时间：2012-09-04T19:52:36.197
> 
> 标签：c#, .net

在.NET 工作多年后，我问了一个基本问题。一个刚毕业的孩子问我这个问题，我突然很困惑！

我在我的 .NET 项目中引用了一个 IBM DATA DB2 DLL。我们最初使用的版本是 9.7.0.2。因此，在我们运行了一些测试之后，我们将 IBM DATA DLL 升级到了 9.7.6.2 版本。

现在的问题是，我应该重新编译我的代码然后运行它还是可以直接替换我的构建目录中的 IBM DATA DLL 并且它会运行良好吗？

我们什么时候应该理想地重新编译我们的代码？

谢谢索尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:58:41.543

这取决于您如何引用 DLL。在解决方案资源管理器中，选择您的项目并在其中展开引用。选择 DLL 并查看属性编辑器窗口中的属性**“特定版本”**。如果它设置为 false，那么您可以只替换输出中的二进制文件，否则如果您的应用程序找不到确切版本的 DLL，它将引发错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T19:56:02.357

[除非您专门针对某个库的版本（如使用实体框架和 mysql 适配器时](http://weblogs.asp.net/gunnarpeipman/archive/2010/12/09/getting-mysql-work-with-entity-framework-4-0.aspx)），否则不得更改库的版本，那么您需要更改版本号才能工作。其他情况发生在 API 更改时（不频繁，不理想，[但确实发生了](http://www.i-programmer.info/news/155-social-media/2501-facebook-developers-face-disruption-.html)）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T19:59:17.793

这实际上完全取决于 DLL 和生成它的第 3 方。您需要查看文档并查找已弃用和修改的函数（您是否调用它们中的任何一个？）即使文档说没有任何更改和弃用，您仍然应该进行回归测试。文档不是代码，代码才是最重要的事实。

在一个完美的世界中，公共 API 不会改变或弃用任何东西，DLL（接口）的编写者只会添加新函数。不幸的是，我们不能指望这一点。

简而言之：如果您在 DLL 中调用的任何函数被修改或弃用，您必须重新构建，否则不会。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T20:01:13.687

通常，第三方 DLL 应该是向后兼容的。但是，情况并非总是如此，您应该在升级时重新编译以确保它是。如果您在不编译的情况下交换 DLL 的版本，则可能会遇到各种运行时错误，这些错误很容易通过编译/测试检测到。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T19:53:45.587

您不需要重新编译代码。这就是动态链接库的好处。

# objective-c - “消息已收到但未处理”KVO

> ID：12270429
> 
> 赞同：23
> 
> 时间：2012-09-04T19:52:45.333
> 
> 标签：objective-c, key-value-observing

运行项目时，我在输出窗口中得到以下信息：

```
An -observeValueForKeyPath:ofObject:change:context: message was received but not handled.
Key path: connection.messageQueue
Observed object: <Client: 0x10011ddb0>
... 
```

你明白了。问题是，我不知道为什么会这样。但是，似乎一切正常。这是导致问题的代码：

```
-(id) initWithIdentifier:(NSString*)ident andClient:(Client*)chatClient {
    if(![super initWithNibName:@"ChatView" bundle:nil]) {
        return nil;
    }
    [self setTitle: ident];
    client = chatClient;
    [self setIdentifier:ident];

    inContext = false;

    [client addObserver:self forKeyPath:@"connection.messageQueue" options:NSKeyValueObservingOptionNew context:NULL];
    return self;
}

-(void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    NSAttributedString* rar = [[NSAttributedString alloc] initWithString:@"test"];
    [[textView textStorage] appendAttributedString:rar];
    [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
} 
```

我想我会展示与此相关的所有代码。该类只有几个方法，所以这就是您需要查看的全部内容。我什至没有使用更改，我只是在 KVO 事件被触发时进行“测试”。

由于消息一直在进来，堆栈跟踪变得非常快。然而，似乎一切正常。

有什么线索吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-04T19:55:24.957

`[super observeValueForKeyPath:ofObject:change:context:]`如果您处理通知，则不应致电。你应该只为你自己不处理的通知调用它。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-17T08:01:47.777

我遇到了同样的问题：**An -observeValueForKeyPath:ofObject:change:context: message was received but not processed**。我在这里用谷歌搜索过，然后我自己想出来了，所以也许它可以帮助别人。

对我来说，问题是：注册为观察者的对象（如果您有**... addObserver:self ...**那么该对象就是**self**）在值更改时已被释放。但是观察者仍然被注册，所以`-observeValueForKeyPath:ofObject:change:context:`消息被**nil**观察者接收。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-03T07:37:41.010

确保你只对你不感兴趣的东西调用 super。

```
class Layer: CALayer {

    private let key1 = "transport"
    private let key2 = "position"

    override init() {
        super.init()
        addObserver(self, forKeyPath: key1, options: [], context: nil)
        addObserver(self, forKeyPath: key2, options: [], context: nil)
    }

    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    override func observeValue(forKeyPath keyPath: String?, of object: Any?, change: [NSKeyValueChangeKey : Any]?, context: UnsafeMutableRawPointer?) {
        if keyPath == key1 || keyPath == key2 {

        } else {
            super.observeValue(forKeyPath: keyPath, of: object, change: change, context: context)
        }
    }

    deinit {
        removeObserver(self, forKeyPath: key1)
        removeObserver(self, forKeyPath: key2)
    }
} 
```

# php - facebook graph api 结果现在显示

> ID：12270430
> 
> 赞同：0
> 
> 时间：2012-09-04T19:52:56.290
> 
> 标签：php, facebook, facebook-graph-api

只是想问为什么我的 facebook graph api 没有返回任何结果，但它确实在我的本地主机中工作。它与我的托管站点（ipage）有什么关系吗？

这是代码：

```
$FBpage = file_get_contents('https://graph.facebook.com/26484009688027  /members?access_token=***&limit=300');

$FBdata = json_decode($FBpage);

foreach ($FBdata->data as $tcc_members ) {

$StatusID = explode("_", $tcc_members->id);
echo '<li>';
if (!empty($tcc_members->name)) {  

echo '<img src="https://graph.facebook.com/'.$tcc_members->id.'/picture?type=square"';
echo "$tcc_members->name";
} 
echo '</li>'; }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:28:00.470

当我在[Graph API explorer](https://developers.facebook.com/tools/explorer)上尝试查询时，我收到一条错误消息，指出您请求的 ID`26484009688027`不存在。再次检查您的身份证。

另一个问题是 URL 中的空格。这可能是个问题。

一些主机禁用了`file_get_contents`php 功能。您可以使用以下代码创建一个 php 文件以查看：

```
<?php echo ini_get('allow_url_fopen') ? "Enabled" : "Disabled"; 
```

最后，`file_get_contents`不是访问 Facebook API 的最佳方式。你真的应该使用 cURL 或[Facebook PHP SDK](https://developers.facebook.com/docs/reference/php)

# python-2.7 - Python 实验室 - 我的实验室代码卡住了

> ID：12270435
> 
> 赞同：1
> 
> 时间：2012-09-04T19:53:21.650
> 
> 标签：python-2.7

我的实验室问我“提示输入数字，接受正数或负数。使用双重替代“决策”结构并打印一条消息，指示输入的数字是正数还是负数。”

我做了我的代码，但由于某种原因它不起作用....

```
def getNumFromUser():
  num=input (“Please enter a number: “)
  if num >= 0:
      print "The number you entered  is positive"
  elif num  <= 0:
      print "The number you entered is negative"
  else:
     getNumFromUser() 
```

并且由于某种原因它不会运行我的代码，当我取出 elif 语句时，它要求我输入数字，如果我输入负数，它会要求我重新输入数字以获得正数......我只是不知道如何在代码中组合负数和正数，以便“打印出指示输入的数字是正数还是负数的消息”。****我是python编程的新手，所以我在这里迷路了，如果有人能向我解释，我将不胜感激****

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:59:02.393

python2.x 中的`input`函数将尝试评估您将其作为代码传递的字符串。这可能被认为是不可取的或危险的，通常建议使用它`raw_input`。

话虽如此，`raw_input`会给你一个字符串。您需要将其转换为 int 以与其他 int 进行比较：

```
val_str = raw_input("enter a number")
if int(val_str) >= 0:
    print "greater" 
```

请记住，如果用户不输入数字，该示例将崩溃。您可以使用以下方法检查字符串是否为数字： `val_str.isdigit()`。这适用于整数，而不是浮点数。您的部分检查可以是首先确认它是一个 int，否则再次询问。此外，`isdigit`不会正确检测到负数，这意味着您可能想学习如何捕获可能引发的异常......

至于你的整体结构，我觉得一个简单的`while`循环检查会比`getNumFromUser`每次输入错误信息时的递归调用更好：

```
def getNumFromUser():

    while True:
        num=raw_input("Please enter a number: ")
        try:
            num = int(num)
        except ValueError:
            # if the input cannot be converted into an int
            # then loop again
            continue
        else:
            # otherwise, we have an int, so stop looping
            break

    # num is now an int
    if num >= 0:
        print "The number you entered  is positive"
    else:
        print "The number you entered is negative"

    return num 
```

期望用户输入除 valid 以外的任何内容可能不是您的任务的一部分`int`，但此示例显示了如何尝试转换为 int 并处理失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T14:24:57.447

确保输入和括号之间没有空格。你写了这个： num=input (“请输入一个数字：”) 当你应该写这个的时候： num = input(“请输入一个数字：”) 这将评估一个字符串。不需要添加原始部分，至少在我使用 python 编程的经验中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:56:07.967

利用

```
num=raw_input(“Please enter a number: “) 
```

反而

# javascript - 在 js 代码中间插入内联 javascript

> ID：12270436
> 
> 赞同：0
> 
> 时间：2012-09-04T19:53:22.570
> 
> 标签：javascript, google-maps

我有通常的谷歌地图 api 启动代码：

```
function initialize() {
  var mapOptions = {
    zoom: 7,
    zoomControl : false,
    streetViewControl : false,
    panControl : false,
    scaleControl : true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
};
</script> 
```

我还有一组定义覆盖的文件，如下所示：

```
var path12coords = [
//stuff
];
   var path12 = new google.maps.Polyline({
   path: path12coords,
   strokeOpacity: 1.0,
   strokeWeight: 2
   });

  path12.setMap(map); 
```

此代码必须进入`initialize()`方法，或者在加载时以任何其他方式调用。如何将其放入我拥有的代码中？我可以`<script type="text/javascript" src="js/path12.js"></script>`，但是代码是独立的，不会在加载时调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:59:37.207

将其添加到初始化函数中。如果您的代码变得很大，您可以定义自己的函数并从初始化中调用这些函数。

是否要使用外部 js 文件取决于是否要在其他页面上重用代码。这取决于代码有多大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:03:41.250

在里面`initialize`你可以添加：

```
var s=document.createElement('script');
s.src='js/path12.js';
document.getElementsByTagName('head')[0].appendChild(s); 
```

# javascript - 带有复选框和链接的 jQuery 模态对话框

> ID：12270437
> 
> 赞同：1
> 
> 时间：2012-09-04T19:53:26.337
> 
> 标签：javascript, jquery, checkbox, submit, modal-dialog

几天来一直试图解决这个问题（我认为是新手的考验！）所以你的帮助将非常受欢迎。

jscript 小部件显示一个继续按钮。当用户单击按钮时，我需要一个模式对话框来显示一条消息（包含指向协议文档的超链接）和一个复选框，供用户确认他们已阅读协议。关闭对话框后，如果`checkbox = 0`继续按钮打开相同的对话框（循环，直到单击复选框：）`checkbox = 1`。

这是我到目前为止收集的代码......

对于对话框：

```
<a href="#" id="sdHc3" rel="simpleDialog3">Click to open dialog</a>  
<span style="display:none;" id="checkboxStatus"></span>

<div style="display:none;" id="simpleDialog3">
    <h3>Terms and Conditions</h3>
    <form id="checkboxForm">
        Please check box to confirm that you have read the <a href="assets/docs/agreement.html">agreement</a>: <input type="checkbox" class="chckbx" value="1" />
    </form>
    <p><a href="#" class="close">Close</a></p>
</div>

<script type="text/javascript">
$('#sdHc3').simpleDialog({
    showCloseLabel: false,
    open: function () {
        $('#checkboxStatus').html('');
    },
    close: function () {
        var c = [];
        $('#checkboxForm :checkbox:checked').each(function () {
            c.push($(this).val());
        });
        $('#checkboxStatus').html('Checked ' + c.join(', ') + '.').show();
    }
});
</script> 
```

并用于检测对小部件按钮的点击：

```
<script type = "text/javascript">
document.body.onmousedown = function (e) {
    var query = window.location;
    var anchor1=query.hash.substring(1); //anchor without the # character
    if( ($(event.target).hasClass("gwt-Button")) && (anchor1=="step3"))
    {
        alert("Widget button clicked");
    }
}
</script> 
```

“对话框”代码工作正常，小部件按钮点击检测代码也工作良好。尽管如何将这些结合在一起并实现目标，但目前对我来说是一个谜。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:41:07.260

因此，当单击小部件按钮时，您需要查看是否检查了输入，如果没有，请再次显示对话框，如下所示：

```
$(document).ready(function() {
    // detect button click
    $('.gwt-Button').click(function(ev) {
        ev.preventDefault();
        var anchor = window.location.hash.substring(1); // remove # character
        if (anchor != "step3") {
            return; // not step 3
        }
        if ($('#checkboxForm .chckbx').is(':checked')) {
            // checked
        }
        else {
            $('#sdHc3').click(); // trigger dialog again
        }
    });

    // setup dialog
    $('#sdHc3').simpleDialog({
        showCloseLabel: false,
        open: function () {
           $('#checkboxStatus').html('');
        },
        close: function () {
            var c = [];
            $('#checkboxForm :checkbox:checked').each(function () {
                c.push($(this).val());
            });
            $('#checkboxStatus').html('Checked ' + c.join(', ') + '.').show();
        }
    });
}); 
```

# php - 数据库中表继承的性能成本

> ID：12270441
> 
> 赞同：2
> 
> 时间：2012-09-04T19:53:43.477
> 
> 标签：php, performance, inheritance, join, database-design

我目前正在尝试找到一种创建未来网站的好方法，并且我想知道：使用数据库中的表（主要但不仅限于 MySQL）进行继承是否具有不可忽略的额外性能成本？

我的想法是将常见的东西与网站特定的东西分开。例如，让我们考虑一个用户表。常见的东西可能是：

```
User :
- Id
- Login
- Password 
```

具体的东西可能是：

```
Member :
- Id references User.Id
- Name
- Surname
- Email
- Age
- Sex 
```

也可以用于图片：

```
Image :
- Id
- Alt
- Title
- Src 
```

墙纸 ：

```
- Id references Image.Id
- DominantColor
- Author
- Uploader 
```

我的目标是为我的每个网站提供一个可重用的“核心”，以这种方式制作我的表格可能是这项工作的一部分。

此外，我非常关注性能，因为我希望我的网站非常优化。那么额外连接的成本有多大？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:40:39.660

真正了解的唯一方法是进行基准测试。通常这不会是一个问题，但如果你在非常大的表上有很多连接，你会看到性能下降。

我几乎看不出这种结构将如何节省您的开发时间，只能看到它会增加复杂性，因此会花费您额外的开发和调试时间。

# c++ - Qt 将负十六进制字符串转换为有符号整数

> ID：12270446
> 
> 赞同：5
> 
> 时间：2012-09-04T19:53:53.240
> 
> 标签：c++, qt, signed, hex

我正在读取 i2c 设备的寄存器，返回值的范围是 -32768 到 32768，有符号整数。下面是一个例子：

```
# i2cget -y 3 0x0b 0x0a w
0xfec7 
```

在 Qt 中，我得到这个值（ 0xfec7 ）并希望在 QLabel 中将其显示为有符号整数。变量 stringListSplit[0] 是一个值为 '0xfec7' 的 QString。

```
// Now update the label
int milAmps = stringListSplit[0].toInt(0,16); // tried qint32
qDebug() << milAmps; 
```

问题是无论我尝试什么，我总是得到无符号整数，所以对于这个例子，我得到的 65223 超过了指定的最大返回值。我需要将十六进制值转换为有符号整数，因此我需要将十六进制值视为用 2s 补码表示。我在 QString 文档中没有看到简单的方法。我怎样才能在 Qt 中实现这一点？

笔记：

QString::toShort 返回 0：

```
// Now update the label
short milAmps = stringListSplit[0].toShort(0,16);
qDebug() << "My new result: " << milAmps; 
```

对于等于 '0xfebe' 的 stringListSplit[0] 的输入，我使用 Keith 回答的 C 风格转换得到 -322 的输出，如下所示：

```
// Now update the label
int milAmps = stringListSplit[0].toInt(0,16);
qDebug() << "My new result: " << (int16_t)milAmps; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:59:23.147

您需要将此字符串转换为 16 位整数。您很可能可以使用`QString::toShort`方法。

```
short milAmps = stringListSplit[0].toShort(0,16); 
qDebug() << milAmps; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T19:59:55.207

将结果转换为有符号的 16 位整数。

```
qDebug() << (int16_t)milAmps; 
```

# asp.net - 如何在很长的服务器操作期间更新状态标签？

> ID：12270451
> 
> 赞同：1
> 
> 时间：2012-09-04T19:53:58.937
> 
> 标签：asp.net, ajax, webforms

我有一个服务器操作，通常需要大约 15 分钟才能完成。我想在操作过程中向用户传达操作的各个阶段。

这是我的表单代码：

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional" >
    <ContentTemplate>
        <asp:Timer ID="Timer1" runat="server" Interval="300" ontick="Timer1_Tick">
        </asp:Timer>
        <asp:Label ID="lbl_Status" runat="server" Text=""></asp:Label>
    </ContentTemplate>
</asp:UpdatePanel>

</div>

<asp:FileUpload ID="upl_UserList" runat="server" />

<p>

    <asp:Button ID="btn_Update" runat="server" Text="Update Users" 
        onclick="btn_Update_Click" />

</p>
</form> 
```

...和我的滴答事件处理程序：

```
 protected void Timer1_Tick(object sender, EventArgs e)
    {
        lbl_Status.Text = labelText;
        lbl_Status.ForeColor = labelColor;
    } 
```

在用户单击更新按钮期间，浏览器卡在等待服务器响应。这会导致标签不更新。

我应该如何解决这个问题，我应该使用 iframe 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:56:53.427

添加此代码

```
 <Triggers>
     <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
   </Triggers> 
```

您在更新面板之后放置代码并移动您的计时器：

```
 <asp:Timer ID="Timer1" runat="server" Interval="300" ontick="Timer1_Tick">
  </asp:Timer>

  <asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" runat="server">
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
        </Triggers>
        <ContentTemplate>
          <asp:Label ID="lbl_Status" runat="server" Text=""></asp:Label>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

# 32bit-64bit - 带有 Office 64 位的 MS Access 数据库引擎（32 位）

> ID：12270453
> 
> 赞同：46
> 
> 时间：2012-09-04T19:54:17.907
> 
> 标签：32bit-64bit, installshield, legacy, msde

我们目前在使用 Microsoft Access Database Engine 2010 时遇到了一个重大问题。该引擎有 64 位和 32 位两种形式，这很好。但是，如果主机进程始终是 32 位，显然您需要始终安装 32 位版本。好吧，我们可以做到这一点。

我们的软件处理许多 32 位的遗留组件，其中大部分是 VB6 代码，生成 32 位汇编。因此，我们假设驱动程序也必须安装为 32 位。事实上，当我们在 64 位机器上安装 32 位驱动程序并运行我们的 32 位应用程序时，它可以正常工作。

但是，当系统上安装了 Office 2010 64 位时，问题就开始了。相信我，我们试图让用户知道 64 位 Office 在很大程度上是不必要的，但无济于事。随着安装了 64 位版本的计算机下线，当我们的软件出现问题时，我们无法跟上支持请求。要么是 64 位 Office 破坏了我们的安装，要么我们的安装破坏了他们的 Office 版本，但这两种方式都不是很好。另一个问题是，非旧版软件有时会安装 64 位驱动程序（它们应该安装），而这两个版本根本无法以任何合理的方式共存。要么我们的软件坏了，要么他们的软件坏了。

那么，有没有人设法让 32 位驱动程序与 64 位安装共存？我已经看到使用`/passive`标志安装允许安装两者，而我们的安装程序确实使用被动。两者都在安装，但一旦进入系统，要么我们的软件不再工作，要么 Office 不断修复其安装。有什么合理的方法可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-20T14:33:02.033

以下是在安装了 32 位 MS Office 版本的系统上安装 64 位版本的 Microsoft Access Database Engine 2010 可再发行组件的解决方法：

*   在安装 64 位版本的 Microsoft Access Database Engine 2010 可再发行组件之前，请检查 64 位注册表项“HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\14.0\Common\FilesPaths”。
*   如果它不包含“mso.dll”注册表值，那么在具有 32 位版本 MS 的系统上安装 64 位版本的 Microsoft Access Database Engine 2010 可再发行组件后，您将需要重命名或删除该值办公室安装。
*   使用“/passive”命令行参数安装可再发行组件，例如“C:\directory path\AccessDatabaseEngine_x64.exe”/passive
*   删除或重命名“mso.dll”注册表值，该值包含 64 位版本的 MSO.DLL 的路径（不应由 32 位 MS Office 版本使用）。

现在您可以启动 32 位 MS Office 应用程序，而不会出现“重新配置”问题。请注意，如果安装了 64 位版本的 MS Office，则“mso.dll”注册表值已经存在。在这种情况下，不应删除或重​​命名该值。

此外，如果您不想使用“/passive”命令行参数，您可以编辑 AceRedist.msi 文件以删除 MS Office 体系结构检查：

*   下载并安装 Microsoft Orca： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa370557 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370557(v=vs.85).aspx)
*   解压 AccessDatabaseEngine.exe 或 AccessDatabaseEngine_x64.exe 文件
*   在 Orca 中打开 AceRedist.msi 文件
*   搜索包含“CheckOfficeArchitecture”操作的两个表行并删除这些行
*   保存更新的 AceRedist.msi 文件

您现在可以使用此文件在安装了“冲突”版本的 MS Office 的系统上安装 Microsoft Access 数据库引擎 2010 可再发行组件（例如，在具有 32 位 MS Office 版本的系统上安装 64 位版本）确保重命名如上所述的“mso.dll”注册表值（如果需要）。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-17T14:14:45.900

我讨厌回答自己的问题，但我终于找到了一个实际可行的解决方案（使用服务之间的套接字通信可能会解决问题，但它会产生更多问题）。由于我们的数据库是遗留的，它只需要`Microsoft.ACE.OLEDB.12.0`在连接字符串中。事实证明，这也包含在 Office 2007（和 MSDE 2007）中，其中只有 32 位版本可用。因此，我们不安装 MSDE 2010 32 位，而是[安装 MSDE 2007](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=23734)，它工作得很好。然后其他应用程序可以安装 64 位 MSDE 2010（或 64 位 Office 2010），并且与我们的应用程序不冲突。

到目前为止，这似乎是所有 Windows 操作系统环境都可以接受的解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-26T13:24:01.687

与@Peter Coppins 回答类似的方法。我认为这更容易一些，并且不需要使用 Orca 实用程序：

1.  检查“HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\14.0\Common\FilesPaths”注册表项并确保值“mso.dll”不存在。如果存在，则似乎已安装 Office 64 位，您不需要此解决方法。

2.  下载[Microsoft Access 数据库引擎 2010 Redistributable](https://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=13255)。

3.  从命令行运行：AccessDatabaseEngine_x64.exe /passive

（注意：这个安装程序对我来说默默地崩溃或失败，所以我解压缩了组件并运行：AceRedist.msi /passive 并且安装得很好。也许是 Windows 10 的东西。）

4.  删除或重命名“HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\14.0\Common\FilesPaths”项中的“mso.dll”值。

资料来源：[如何在 32 位 Microsoft Office 的同时安装 64 位 Microsoft 数据库驱动程序](https://knowledge.autodesk.com/support/autocad-civil-3d/troubleshooting/caas/sfdcarticles/sfdcarticles/How-to-install-64-bit-Microsoft-Database-Drivers-alongside-32-bit-Microsoft-Office.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-27T09:58:45.730

我有一条更具体的错误消息，指出要删除“Office 16 Click-to-Run Extensibility Component”

[我按照https://www.tecklyfe.com/fix-for-microsoft-office-setup-error-please-uninstall-all-32-bit-office-programs-office-15-click-](https://www.tecklyfe.com/fix-for-microsoft-office-setup-error-please-uninstall-all-32-bit-office-programs-office-15-click-to-run-extensibility-component/)中的步骤修复了它[运行可扩展性组件/](https://www.tecklyfe.com/fix-for-microsoft-office-setup-error-please-uninstall-all-32-bit-office-programs-office-15-click-to-run-extensibility-component/)

*   转到开始 > 运行（或 Winkey + R）
*   键入“installer”（打开 %windir%installer 文件夹），确保所有文件在 Windows 中可见（文件夹设置）
*   添加“主题”列（并使其至少 400 像素宽）– 右键单击​​列标题，单击更多，然后找到主题
*   在主题列上排序并向下滚动，直到找到错误屏幕中提到的名称（“Office 16 Click-to-Run Extensibility Component”）
*   右键单击 MSI 并选择卸载

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-16T06:42:44.717

安装2007版本，看来如果你安装与你正在使用的Office版本相反的版本就可以让它工作了。

[http://www.microsoft.com/en-us/download/details.aspx?id=23734](http://www.microsoft.com/en-us/download/details.aspx?id=23734)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-03T12:09:33.897

甚至尝试了所有建议，**就我而言**（Office x64 - Visual Studio 2017），在 Office 64x 安装上同时拥有两个访问引擎以便您可以在 Visual Studio 上使用它并使用 2016+ 版本的 Office 的唯一方法是安装2010 版引擎。

首先从这个页面安装 x64

[https://www.microsoft.com/en-us/download/details.aspx?id=54920](https://www.microsoft.com/en-us/download/details.aspx?id=54920)

然后是这个的 x86 版本

[https://www.microsoft.com/en-us/download/details.aspx?id=13255](https://www.microsoft.com/en-us/download/details.aspx?id=13255)

从这个博客：[http ://dinesql.blogspot.com/2017/10/microsoft-access-database-engine-2016-Redistributable-Setup-you-cannot-install-the-32-bit-version-You-cannot -install-the-64-bit-version.html](http://dinesql.blogspot.com/2017/10/microsoft-access-database-engine-2016-Redistributable-Setup-you-cannot-install-the-32-bit-version-You-cannot-install-the-64-bit-version.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-14T19:52:54.530

如果 Microsoft Access Database Engine 2010 的两个版本不能共存，那么您唯一的解决方案就是向 Microsoft 投诉，关于在您的 32 位应用程序中直接加载 64 位版本是不可能的，您可以做的是运行在64 位通过管道或网络套接字与另一个 32 位服务或您的应用程序通信，但这可能需要付出很大的努力。

# string - 最长公共回文子序列

> ID：12270455
> 
> 赞同：5
> 
> 时间：2012-09-04T19:54:20.620
> 
> 标签：string, algorithm, lcs

是否有任何有效的算法来计算两个给定字符串的最长公共回文子序列的长度？

例如：

字符串 1。 `afbcdfca`

字符串 2。 `bcadfcgyfka`

LCPS 为 5，LCPS 字符串为`afcfa`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T20:11:08.577

是的。

*只需对两个以上序列*使用 LCS 算法即可。

如果我没记错的话

```
 LCS( afbcdfca, acfdcbfa, bcadfcgyfka, akfygcfdacb) = afcfa 
```

由您决定字符串#2 和#4。

**更新**：不，这是一个反例：LCS(aba, aba, bab, bab) = ab, ba。LCS 不能确保子序列是回文，您可能需要添加此约束。无论如何，LCS 的递归方程是一个很好的起点。

如果您以生成器样式实现 LCS，以便它生成长度为 n、n-1、n-2 等的所有 LCS，那么您应该能够相当有效地计算 LCS-gen(string1,反向字符串1），LCS-gen（字符串2，反向字符串2）。但是我还没有检查是否有高效的 LCS-gen。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T01:20:33.903

和这个问题一样： [http ://code.google.com/codejam/contest/1781488/dashboard#s=p2](http://code.google.com/codejam/contest/1781488/dashboard#s=p2)

[http://code.google.com/codejam/contest/1781488/dashboard#s=a&a=2](http://code.google.com/codejam/contest/1781488/dashboard#s=a&a=2)

在下面的代码中，我为您提供了一个 cd(s) 方法（它返回一个 char dict，它告诉您字符串中的下一个或前一个 char 与该 char 相等的位置）。使用它来实现一个动态编程解决方案，我还为您提供了示例代码。

使用动态编程，只有 len(s1)*len(s1)/2 个状态，因此 order(N^2) 是可能的。

这个想法是要么从 s1 获取一个字符，要么不获取它。如果从 s1 上取下 char，则必须从（s1 和 s2 的）前面和后面取下它。如果你不接受它，你继续前进 1.（这意味着 s2 的状态与 s1 的状态保持同步，因为你总是从两者的外部贪婪地获取——所以你只担心 s1 可以有多少状态）。

这段代码让你大部分时间都在那里。cd1 (char dict 1) 帮助您找到 s1 中的下一个字符等于您所在的字符（向前和向后）。

在递归 solve() 方法中，您需要决定 start1、end1.. 等应该是什么。每次选择一个角色时，总数加 2（除非 start1 == end1 - 然后加 1）

```
s1 = "afbcdfca"
s2 = "bcadfcgyfka"

def cd(s):
    """returns dictionary d where d[i] = j where j is the next occurrence of character i"""
    char_dict = {}
    last_pos = {}
    for i, char in enumerate(s):
        if char in char_dict:
            _, forward, backward = char_dict[char]
            pos = last_pos[char]
            forward[pos] = i
            backward[i] = pos
            last_pos[char] = i
        else:
            first, forward, backward = i, {}, {}
            char_dict[char] = (first, forward, backward)
            last_pos[char] = i
    return char_dict

print cd(s1)
"""{'a': ({0: 7}, {7: 0}), 'c': ({3: 6}, {6: 3}), 'b': ({}, {}), 'd': ({}, {}), 'f': ({1: 5}, {5: 1})}"""

cd1, cd2 = cd(s1), cd(s2)

cache = {}
def solve(start1, end1, start2, end2):
    state = (start1, end1)
    answer = cache.get(state, None)
    if answer:
        return answer

    if start1 < end1:
        return 0
    c1s, c1e = s1[start1], s1[end1]
    c2s, c2e = s2[start2], s2[end2]

    #if any of c1s, c1e, c2s, c2e are equal and you don't take, you must
    #skip over those characters too:
    dont_take_end1 = solve(start1, end1 - 1, start2, end2)

    do_take_end1 = 2
    if do_take_end1:
        end1_char = s1[end1]
        #start1 = next character along from start1 that equals end1_char
        #end1 = next char before end1 that equals end1_char
        #end2 = next char before end2 that..
        #start2 = next char after .. that ..
        do_take_end1 += solve(start1, end1, start2, end2)

    answer = cache[state] = max(dont_take_end1, do_take_end1)
    return answer

print solve(0, len(s1), 0, len(s2)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T15:35:33.610

这是我逐行进行的万无一失的演练，因为这很常见，而且大多数时候人们解释了动态编程部分 70% 并停留在血淋淋的细节上。

1.  最优子结构：令`X[0..n-1]`为长度为 n 的输入序列，`L(0, n-1)`为最长回文子序列的长度`X[0..n-1].`

如果 X 的最后一个字符和第一个字符相同，则`L(0, n-1) = L(1, n-2) + 2`. 等等为什么，如果第二个和倒数第二个字符不一样怎么办，最后一个和第一个 bing 不一样是没用的。不，这个“子序列”不必是连续的。

```
/* Driver program to test above functions */
int main()
{
    char seq[] = "panamamanap";
    int n = strlen(seq);
    printf ("The lnegth of the LPS is %d", lps(seq, 0, n-1));
    getchar();
    return 0;
}

int lps(char *seq, int i, int j)
{   
    // Base Case 1: If there is only 1 character   
    if (i == j)     
        return 1;    

    // Base Case 2: If there are only 2 characters and both are same   
    if (seq[i] == seq[j] && i + 1 == j)     
        return 2;    

    // If the first and last characters match   
    if (seq[i] == seq[j])      
        return lps (seq, i+1, j-1) + 2;    

    // If the first and last characters do not match   
    else return max( lps(seq, i, j-1), lps(seq, i+1, j) );
} 
```

考虑到上面的实现，下面是一个长度为 6 的序列的部分递归树，其中包含所有不同的字符。

```
 L(0, 5)
             /        \ 
            /          \  
        L(1,5)          L(0,4)
       /    \            /    \
      /      \          /      \
  L(2,5)    L(1,4)  L(1,4)  L(0,3) 
```

在上面的部分递归树中，`L(1, 4)`被求解了两次。如果我们绘制完整的递归树，那么我们可以看到有很多子问题被一次又一次地解决。`L[][]`与其他典型的动态规划（DP）问题一样，通过以自下而上的方式构造临时数组，可以避免重复计算相同的子问题。

```
// Returns the length of the longest palindromic subsequence in seq
int lps(char *str)
{
   int n = strlen(str);
   int i, j, cl;
   int L[n][n];  // Create a table to store results of subproblems

   // Strings of length 1 are palindrome of length 1
   for (i = 0; i < n; i++)
      L[i][i] = 1;

    for (cl=2; cl<=n; cl++)                              //again this is the length of chain we are considering
    {
        for (i=0; i<n-cl+1; i++)                         //start at i
        {
            j = i+cl-1;                                  //end at j
            if (str[i] == str[j] && cl == 2)             //if only 2 characters and they are the same then set L[i][j] = 2
               L[i][j] = 2;
            else if (str[i] == str[j])                   //if greater than length 2 and first and last characters match, add 2 to the calculated value of the center stripped of both ends
               L[i][j] = L[i+1][j-1] + 2;
            else
               L[i][j] = max(L[i][j-1], L[i+1][j]);      //if not match, then take max of 2 possibilities
        }
    }

    return L[0][n-1];
} 
```

所以这就像逻辑上的非动态编程，只是在这里我们将结果保存在一个数组中，所以我们不会一遍又一遍地计算相同的东西

# java - 我将如何在 Hibernate HQL 查询或 Criteria API 调用中加入这些？

> ID：12270458
> 
> 赞同：0
> 
> 时间：2012-09-04T19:54:22.273
> 
> 标签：java, hibernate, hql

人.java：

```
public class Person  implements java.io.Serializable {
    private int id;
    private String fullName;

    public Person() {
    }

    public Person(int id, String fullName) {
        this.id = id;
        this.fullName = fullName;
    }

    public int getId() {
        return this.id;
    }

    public void setId(int id) {
        this.id = id;
    }

} 
```

项目组.java：

```
public class ProjectGroup  implements java.io.Serializable {
    private int id;
    private Set<Person> persons = new HashSet<Person>(0);
    private String name;

    /**
     * Get the value of name
     *
     * @return the value of name
     */
    public String getName() {
        return name;
    }

    /**
     * Set the value of name
     *
     * @param name new value of name
     */
    public void setName(String name) {
        this.name = name;
    }

    public ProjectGroup() {
    }

    public ProjectGroup(int id, String name, Set<Person> persons) {
       this.id = id;
       this.name = name;
       this.persons = persons;
    }

    public int getId() {
        return this.id;
    }

    public void setId(int id) {
        this.id = id;
    }
    public Set<Person> getPersons() {
        return this.persons;
    }

    public void setPersons(Set<Person> persons) {
        this.persons = persons;
    }

} 
```

人.hbm.xml：

```
<hibernate-mapping>
    <class name="com.mycompany.Person" table="person" schema="public">
        <id name="id" type="int">
            <column name="id" />
            <generator class="identity" />
        </id>

        <property name="fullName" type="string">
            <column name="full_name" length="128" not-null="true" />
        </property>

        <set name="projectGroups" inverse="false" lazy="false" cascade="delete" table="group_person">
            <key>
                <column name="project_id" />
            </key>
            <many-to-many entity-name="com.mycompany.ProjectGroup">
                <column name="group_id" />
            </many-to-many>
        </set>
    </class>
</hibernate-mapping> 
```

项目组.hbm.xml：

```
<hibernate-mapping>
    <class name="com.mycompany.ProjectGroup" table="project_group" schema="public">
        <id name="id" type="int">
            <column name="id" />
            <generator class="identity" />
        </id>
        <property name="name" type="string">
            <column name="name" length="32" not-null="true" />
        </property>
        <set name="persons" inverse="false" table="group_person">
            <key>
                <column name="group_id" />
            </key>
            <many-to-many entity-name="com.mycompany.Person">
                <column name="project_id" />
            </many-to-many>
        </set>
    </class>
</hibernate-mapping> 
```

我需要做的是加载具有特定组的所有用户。我知道如何使用 SQL 来做到这一点，但 Hibernate 等价物却让我望而却步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:30:44.573

首先，将`Person`在`projectGroups`您的`Person.hbn.xml`. 之后，使用此标准选择某个组的所有用户：

```
Criteria c = session.createCriteria(Person.class);
c.createAlias("projectGroups", "pg");
c.add(Restrictions.eq("pg.name", "project-name")); 
```

或者这个 HQL：

```
from Person as person 
    join person.projectGroups as pg 
        with pg.name = 'project-name' 
```

# sql - 数据库列中的位标志有什么缺点吗？

> ID：12270461
> 
> 赞同：12
> 
> 时间：2012-09-04T19:54:30.863
> 
> 标签：sql, sql-server, oracle, postgresql, database-design

考虑下表：

```
CREATE TABLE user_roles(
    pkey         SERIAL PRIMARY KEY,
    bit_id       BIGINT NOT NULL,
    name         VARCHAR(256) NOT NULL,
);

INSERT INTO user_roles (bit_id,name) VALUES (1,'public');
INSERT INTO user_roles (bit_id,name) VALUES (2,'restricted');
INSERT INTO user_roles (bit_id,name) VALUES (4,'confidential');
INSERT INTO user_roles (bit_id,name) VALUES (8,'secret');

CREATE TABLE news(
    pkey          SERIAL PRIMARY KEY,
    title         VARCHAR(256),
    company_fk    INTEGER REFERENCES compaines(pkey), -- updated since asking the question
    body          VARCHAR(512),
    read_roles    BIGINT -- bit flag 
); 
```

read_roles 是一个位标志，它指定可以阅读新闻项目的某些角色组合。因此，如果我要插入一个可以被受限和机密阅读的新闻项目，我会将 read_roles 的值设置为`2 | 4`或 6，并且当我想取回特定用户可以看到的新闻帖子时，我可以使用类似的查询。

```
select * from news WHERE company_fk=2 AND (read_roles | 2 != 0) OR  (read_roles | 4 != 0) ; 
select * from news WHERE company_fk=2 AND read_roles = 6; 
```

通常在数据库列中使用位标志有什么缺点？我假设这个问题的答案可能是特定于数据库的，所以我有兴趣了解特定数据库的缺点。

我正在为我的应用程序使用 Postgres 9.1。

**更新**我了解到数据库不使用索引进行位操作，这将需要全表扫描，这会降低性能。所以我更新了这个问题以更准确地反映我的情况，数据库中的每一行都属于一个特定的公司，所以所有的查询都将有 WHERE 子句，其中包含一个 company_fk ，它上面会有一个索引。

**更新**我现在只有 6 个角色，将来可能会更多。

**UPDATE**角色不是互斥的，它们相互继承，例如，restricted 继承了分配给 public 的所有权限。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T19:58:48.493

缺点：难以写入数据，难以读取数据，难以调试，尤其是：查询速度慢，因为数据库无法在这样的查询上使用索引。

优点是节省了几个字节。与 BIT 字段相比，您可以在一百万条记录表上节省几 MB ......几乎不值得。:)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-04T20:02:19.770

如果你只有少数几个角色，你甚至不会在**PostgreSQL中节省任何****存储**空间。一个列使用 4 个字节，一个8 个字节。两者都可能需要对齐填充：**[`integer`](http://www.postgresql.org/docs/current/static/datatype-numeric.html)[`bigint`](http://www.postgresql.org/docs/current/static/datatype-numeric.html)**

 ***   [理解 Postgres 行大小](https://stackoverflow.com/questions/13570613/making-sense-of-postgres-row-sizes/13570853#13570853)
*   [在 PostgreSQL 中计算和节省空间](https://stackoverflow.com/questions/2966524/calculating-and-saving-space-in-postgresql/7431468#7431468)

一[`boolean`](https://www.postgresql.org/docs/current/static/datatype-boolean.html)列使用 1 个字节。`integer`实际上，您可以为一列安装四个或更多布尔列，为`bigint`.

还要考虑到值仅使用[NULL 位图](http://www.postgresql.org/docs/current/static/storage-page-layout.html)`NULL`中的一位（[简化](https://stackoverflow.com/a/7383198/939860)）。

单个列更易于阅读和**索引**。其他人已经对此发表了评论。

您仍然可以使用[表达式索引](http://www.postgresql.org/docs/current/static/indexes-expressional.html)或[部分索引](http://www.postgresql.org/docs/current/static/indexes-partial.html)来规避索引问题（“non-sargable”）。广义的陈述，如：

> 数据库不能在这样的查询中使用索引

或者

> 这些条件是非 SARGable 的！

并不*完全正确*- 也许对于其他一些缺乏这些功能的 RDBMS。
但是，当您可以完全避免问题时，为什么要规避呢？

正如您所澄清的，我们正在谈论 6 种不同的类型（也许更多）。使用单个`boolean`列。与一个相比，您甚至可能会节省空间`bigint`。在这种情况下，空间要求似乎无关紧要。

* * *

**如果**这些标志是*互斥的*，您可以使用*一*列类型[`enum`](http://www.postgresql.org/docs/current/static/datatype-enum.html)或一个小型查找表和一个引用它的外键。（排除有问题的更新。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-04T19:58:16.757

这里至少有一个巨大的缺点......

**这些条件是非 SARGable 的！**

这是一件大事，对我来说将是一个交易破坏者。您需要执行的按位评估（据我所知）在任何数据库中都不可索引 - 引擎需要检查每一行才能执行评估，这意味着性能很差。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-20T16:25:09.203

添加到 SQL Server 实现的先前答案，您不会通过使用单个位域整数与一堆`BIT NOT NULL`列来节省任何空间：

> SQL Server 数据库引擎优化了**位列**的存储。如果表中有 8 个或更少的**位列**，则这些列存储为 1 个字节。如果有 9 到 16**位列**，则这些列存储为 2 个字节，依此类推。
> 
> [在 docs.microsoft.com 上位](https://docs.microsoft.com/en-us/sql/t-sql/data-types/bit-transact-sql?view=sql-server-2017)

正如 JNK 所提到的，对位域整数的部分比较不是 SARGable，因此位域整数上的索引将毫无用处，除非一次比较整个值。

SQL Server 上的磁盘索引是基于排序的，因此要访问单独设置了任何特定位的行，每个位列都需要一个单独的索引。如果您只查找 1，则一种节省空间的方法是让它们过滤列，只存储 1 值（零值根本没有索引条目）。

```
CREATE TABLE news(
    pkey          INT IDENTITY PRIMARY KEY,
    title         VARCHAR(256),
    company_fk    INTEGER REFERENCES compaines(pkey), -- updated since asking the question
    body          VARCHAR(512),
    public_role BIT NOT NULL DEFAULT 0,
    restricted_role BIT NOT NULL DEFAULT 0,
    confidential_role BIT NOT NULL DEFAULT 0,
    secret_role BIT NOT NULL DEFAULT 0
);

CREATE UNIQUE INDEX ByPublicRole ON news(public_role, pkey) WHERE public_role=1;
CREATE UNIQUE INDEX ByRestrictedRole ON news(restricted_role, pkey) WHERE restricted_role=1;
CREATE UNIQUE INDEX ByConfidentialRole ON news(confidential_role, pkey) WHERE confidential_role=1;
CREATE UNIQUE INDEX BySecretRole ON news(secret_role, pkey) WHERE secret_role=1;

select * from news WHERE company_fk=2 AND restricted_role=1 OR confidential_role=1; 
select * from news WHERE company_fk=2 AND restricted_role=1 AND confidential_role=1; 
```

这两个查询都使用我生成的随机测试数据生成了一个不错的计划： [![位计划](../Images/9a64d456e5b050e44e2cbe115005c32b.png)](https://i.stack.imgur.com/kfXh0.png)

与往常一样，索引应基于实际查询使用情况并与维护成本相平衡。**

# .net - [Delegate].CreateDelegate 设置属性性能

> ID：12270462
> 
> 赞同：2
> 
> 时间：2012-09-04T19:54:31.530
> 
> 标签：.net, reflection, delegates, propertyinfo

这是我一直在研究的一个序列化器，它基于一些映射的属性属性将数据行序列化为对象。我阅读了许多与使用 [Delegate].CreateDelegate 来提高速度相关的帖子 - 所以我试了一下。它似乎已经获得了一些性能提升，但很少（即使在所有对象类型的初始循环以缓存所有可能的属性信息对象等之后）。映射的属性信息只有一个可以分配的备用数据库列名，因为我们无法完全控制我使用的所有列名。它也只抓取我想要映射的属性。

现在，大约的序列化。1500 个对象，每个对象平均有 13 个属性，1500 个父对象（作为子对象）中的每个对象平均有 3 个对象，每个对象平均有 13 个属性 - 为了我的比较而夸耀这些时间：

手动设置 property.Name = row.Item("columnName")
785 ms

p.SetValue
1490 毫秒

GetSetMethod.Invoke
1585 毫秒

[委托].CreateDelegate
1285 毫秒

谁能建议我可以做更多的事情来提高性能？

```
 Friend Class DataSerializer(Of T As Class)

        Private Shared MappedPropertiesCache As New Dictionary(Of Type, PropertyInfo())
        Private Shared MappedColumnNameCache As New Dictionary(Of Type, List(Of String))

        Private Shared ActionCache As New Dictionary(Of String, Action(Of T, Object))

        Friend Shared Function SerializeDataRow(ByVal row As DataRow) As T

            Dim target As Object = Activator.CreateInstance(GetType(T))

            Dim targetType As Type = GetType(T)

            AnalyzeMappedCache(target, targetType)

            Dim index As Integer = 0

            Dim mappedColumns As List(Of String) = MappedColumnNameCache.Item(targetType)

            'iterate through target object properties
            For Each p As PropertyInfo In MappedPropertiesCache.Item(targetType)

                If row.Table.Columns.Contains(mappedColumns.Item(index)) Then

                    '' SLOW
                    'p.SetValue(target, CheckDbNull(row.Item(mappedColumns.Item(index))), Nothing)

                    '' SLOWER
                    'Dim methodInfo As MethodInfo = p.GetSetMethod()

                    'methodInfo.Invoke(target, New Object() {CheckDbNull(row.Item(mappedColumns.Item(index)))})

                    ''FASTER THAN PREVIOUS TWO, BUT STILL SLOW

                    'Dim key As String = String.Format("{0}:{1}", target.GetType.FullName, p.Name)

                    'If Not ActionCache.ContainsKey(key) Then

                    '    Dim methodAction As Action(Of T, Object) = MagicMethod(p.GetSetMethod())

                    '    ActionCache.Add(key, methodAction)

                    'End If

                    'Dim param As Object = CheckDbNull(row.Item(mappedColumns.Item(index)))

                    'If Not param Is Nothing Then

                    '    ActionCache(key)(target, param)

                    'End If

                End If

                index = index + 1

            Next

            Return target

        End Function

        Private Shared Function MagicMethod(method As MethodInfo) As Action(Of T, Object)
            ' First fetch the generic form
            Dim genericHelper As MethodInfo = GetType(DataSerializer(Of T)).GetMethod("MagicMethodHelper", BindingFlags.[Static] Or BindingFlags.NonPublic)

            ' Now supply the type arguments
            Dim constructedHelper As MethodInfo = genericHelper.MakeGenericMethod(GetType(T), method.GetParameters()(0).ParameterType)

            ' Now call it. The null argument is because it's a static method.
            Dim ret As Object = constructedHelper.Invoke(Nothing, New Object() {method})

            ' Cast the result to the right kind of delegate and return it
            Return DirectCast(ret, Action(Of T, Object))
        End Function

        Private Shared Function MagicMethodHelper(Of TTarget As Class, TParam)(method As MethodInfo) As Action(Of TTarget, Object)
            ' Convert the slow MethodInfo into a fast, strongly typed, open delegate
            Dim func As Action(Of TTarget, TParam) = DirectCast([Delegate].CreateDelegate(GetType(Action(Of TTarget, TParam)), method), Action(Of TTarget, TParam))

            ' Now create a more weakly typed delegate which will call the strongly typed one
            Dim ret As Action(Of TTarget, Object) = Sub(target As TTarget, param As Object) func(target, CType(param, TParam))
            Return ret
        End Function

        Private Shared Sub AnalyzeMappedCache(ByVal target As Object, ByVal targetType As Type)

            'this assumes the target object inherits from BaseProperties
            If Not MappedPropertiesCache.ContainsKey(targetType) Then

                Dim props As PropertyInfo() = target.GetMappedProperties()

                Dim mappedColumnNameList As New List(Of String)

                For Each prop As PropertyInfo In props

                    mappedColumnNameList.Add(CType(prop.GetCustomAttributes(GetType(DTO_POMGMT.MappedProperty), True).FirstOrDefault, DTO_POMGMT.MappedProperty).ColumnName)

                Next

                MappedColumnNameCache.Add(targetType, mappedColumnNameList)

                MappedPropertiesCache.Add(targetType, props)

            End If

        End Sub

        'check for a dbnull value of any object type returned from database
        Private Shared Function CheckDbNull(ByVal obj As Object) As Object

            Return If(obj Is DBNull.Value, Nothing, obj)

        End Function

    End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:03:49.987

我建议您直接看一下[FastMember](http://nuget.org/packages/FastMember)，或者只是借用和修改代码。特别是（稍微切换到 C#）：

```
var accessor = TypeAccessor.Create(targetType); 
foreach(PropertyInfo p in MappedPropertiesCache.Item(targetType))
{
    ...
    accessor[target, p.Name] = ... // newValue
    ...
} 
```

或者，看看像 dapper-dot-net 这样的东西是如何处理成员分配的。

附带说明：静态字典不是线程安全的，您可能需要小心访问它。

# java - 如何在 Google App Engine 上创建 RESTful 客户端？

> ID：12270464
> 
> 赞同：2
> 
> 时间：2012-09-04T19:54:41.717
> 
> 标签：java, json, google-app-engine, rest, client

我正在尝试在使用 Json 的 Google App Engine (Java) 上创建一个 RESTful Web 服务客户端。我试过 Sitebricks 和 Jersey，但它们似乎都不起作用。是否有任何框架可用于在 GAE 上创建 RESTful Web 服务客户端？

Sitebricks 的例外情况：

```
Caused by: java.security.AccessControlException: access denied ("java.lang.RuntimePermission" "modifyThreadGroup")
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)
    at java.security.AccessController.checkPermission(AccessController.java:555)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:283)
    at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkAccess(DevAppServerFactory.java:308)
    at java.lang.ThreadGroup.checkAccess(ThreadGroup.java:315)
    at java.lang.Thread.init(Thread.java:376)
    at java.lang.Thread.<init>(Thread.java:525)
    at com.ning.http.client.AsyncHttpClientConfig$Builder$2.newThread(AsyncHttpClientConfig.java:421)
    at java.util.concurrent.ThreadPoolExecutor$Worker.<init>(ThreadPoolExecutor.java:598)
    at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:913)
    at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1336)
    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:132)
    at com.ning.http.client.providers.jdk.JDKAsyncHttpProvider.execute(JDKAsyncHttpProvider.java:156)
    at com.ning.http.client.providers.jdk.JDKAsyncHttpProvider.execute(JDKAsyncHttpProvider.java:123)
    at com.ning.http.client.AsyncHttpClient.executeRequest(AsyncHttpClient.java:496)
    at com.google.sitebricks.client.AHCWebClient.simpleRequest(AHCWebClient.java:85)
    at com.google.sitebricks.client.AHCWebClient.get(AHCWebClient.java:133) 
```

对于泽西岛：

```
Caused by: java.security.AccessControlException: access denied ("javax.xml.bind.JAXBPermission" "setDatatypeConverter")
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)
    at java.security.AccessController.checkPermission(AccessController.java:555)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:283)
    at javax.xml.bind.DatatypeConverter.setDatatypeConverter(DatatypeConverter.java:134)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl$3.run(JAXBContextImpl.java:304)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl$3.run(JAXBContextImpl.java:303)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:302)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1170)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:145)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:248)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:235)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:432)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:637)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:584)
    at com.sun.jersey.core.provider.jaxb.AbstractJAXBProvider.getStoredJAXBContext(AbstractJAXBProvider.java:194)
    at com.sun.jersey.core.provider.jaxb.AbstractJAXBProvider.getJAXBContext(AbstractJAXBProvider.java:187)
    at com.sun.jersey.core.provider.jaxb.AbstractJAXBProvider.getUnmarshaller(AbstractJAXBProvider.java:139)
    at com.sun.jersey.core.provider.jaxb.AbstractJAXBProvider.getUnmarshaller(AbstractJAXBProvider.java:122)
    at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.readFrom(AbstractRootElementProvider.java:111)
    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:565)
    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:517)
    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:684)
    at com.sun.jersey.api.client.WebResource.get(WebResource.java:191) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:14:45.150

[google-api-java-client](http://code.google.com/p/google-http-java-client/wiki/JSON)怎么样？

在某种程度上，您所需要的只是发出 HTTP 请求并将响应解析为 JSON 的能力。除了使 Jersey/Sitebricks 对您更具吸引力之外，您还在寻找哪些功能？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-08T05:33:00.133

试试[jello-framework](http://jello-framework.com)。它允许您通过 RESTful (OData) 服务公开您的数据模型，并提供开箱即用的 UI 视图，以便您可以测试您的应用程序并立即开始与数据交互。

披露 - 我是 Jello 框架的创建者。尽管如此，我还是决定将它添加为 GAE 上 RESTful 客户端的有效答案，因为它可以为所提出的问题提供一个很好的解决方案。

# iphone - 在 ViewController 之间传递数据（再次）

> ID：12270465
> 
> 赞同：-1
> 
> 时间：2012-09-04T19:54:43.490
> 
> 标签：iphone, objective-c, ios, xcode

非常抱歉，伙计们，我知道以前有人问过这个问题。但是经过 4 个小时的搜索，我找不到一个很好的解释。

所以我想做的是：我有一个tableView，用户可以在其中选择一些东西（通过使用AccessoryCheckmark）。当 UINavigationBar 中的“返回”按钮被触摸（viewWillDisappear）时，我想将选定的行（我有一个名为“selectedRowArray”的数组正确地给我选择的值）发送回它之前的 NavigationController。我阅读了有关 AppDelegates、@propertys、委托和（正确地是“最糟糕”的方式：）NSUserDefaults 的信息。

请有人告诉我，将我的数据从 tableView2 BACK 传递到 tableView1 的最佳（最智能）方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:12:46.277

使前一个视图控制器成为选择视图控制器的委托。

从选择视图控制器调用前一个视图控制器的委托方法来告诉它选择了什么。

基本上，他们的关键是使用委托。使设置的委托成为您的选择控制器的弱属性（这意味着您的目标是 iOS 5 或更高版本，您应该是）。

协议是可选的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:59:11.743

要将数据发送到视图控制器堆栈（导航堆栈）中的前一个视图，您可以使用以下代码段：

```
int previous = self.navigationController.viewControllers.count - 2;
UIViewController *controller = [self.navigationController.viewControllers objectAtIndex:previous];
controller.arrayProperty = @[];  //array element to pass into whatever specified property
[self.navigationController popViewControllerAnimated:YES]; 
```

当然，请务必将 UIViewController 更改为之前的视图类名称，并确保在之前的视图控制器头文件中创建属性，如下所示：

```
@property(strong)NSArray *arrayProperty; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T05:34:58.933

我有类似的情况，我是 ios dev 的新手，所以我希望你能把我的回答当作一个线索。甚至在我找到一件简单的事情之前，我也不得不搜索数小时。

我与@protocol 和代表们相处得很艰难。

我找到了一个教程（我目前找不到），它基本上是在你的 nextViewController 中定义一个属性并从 prevViewController 设置它的值

```
//nextViewController.h

@interface nextViewController
@property (nonatomic, strong) NSString *searchString;
@end

// prevController.h

import "NextViewController.h"
@property (weak, nonatomic) PrevViewController *prevViewController;

// prevController.m
-someMethodFromWhereYouWantToSetTheProperty {
   prevViewController.searchString = self.yourvalue;
} 
```

编辑：

我已经指出我是 ios dev 的新手。所以，我不太确定这是否是正确的方法，或者它是否有任何缺点。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-04T20:08:07.520

Braydens 的方式确实不错，但我更喜欢做一个单例，它很好并且易于处理。使单例存储您的属性。您还可以随时检查属性是否为零。

# sql-server - SQL Server 数据库的规范化和自定义用户配置文件中的多个下拉菜单

> ID：12270466
> 
> 赞同：1
> 
> 时间：2012-09-04T19:54:52.777
> 
> 标签：sql-server, asp.net-mvc, c#-4.0, database-normalization

ASP.NET MVC 3（SQL Server 2012 数据库）中的 Web 应用程序。

数据库规范化后，我有三个用于用户配置文件和配置文件管理系统的数据库表。

**第一个表**包含用户配置文件

结构：

```
UserId      int (primary key)
Ethnicity   int
Height      int
HairColor   int
... 
```

样本数据：

```
1  1  2  1  3
2  1  3  2  4 
```

**第二个表**包含配置文件字段列表

结构：

```
FieldId     int
FieldName   nvarchar(20) 
```

样本数据：

```
1 - Ethnicity
2 - Height
3 - HairColor 
```

**第三个表**包含配置文件字段选项列表（配置文件每个字段的DropDownList选项）

结构：

```
OptionId    int
OptionName  nvarchar(30)
FieldId     int (external key to FieldId of second table) 
```

样本数据：

```
1 - Caucasian - 1
2 - Asian - 1
3 - Hispanic - 1
... 
1 - 4"5 - 2
2 - 4"6 - 2 
```

我可以向 db 发出 1 个请求以在 html 页面中形成下拉列表，一切都清楚......

但是，当我需要请求成员配置文件时，我需要在应用程序中发出两个请求并处理数据，以便将 UserProfile 表中的数字与 ProfileFieldsOptions 表的选项链接起来......

我无法使用 Inner Join 或其他选项提出一个复杂的请求。

现在，问题：

也许您知道在 SQL Server for ASP.NET MVC 3 中制作这种结构的更简单方法？

关键要求：

1.  配置文件字段和配置文件字段选项需要保存在数据库中。

谢谢，伊戈尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:10:07.680

通过将配置文件字段选项从第三个表重新定位到`Dictionary<int, string>`，删除第二个表并使用如下下拉列表来解决问题：

在控制器/类/模型中，我使用类 BaseConstants，它由公共字典组成：

```
public Dictionary<int, string> Ethnicity = new Dictionary<int, string>()
    {{1, "Caucasian"}, {2, "Black"}, ...}; 
```

并认为：

```
@Html.DropDownListFor(model => model.Item, 
    new SelectList((Dictionary<int, string>)ViewBag.Items,"Key", "Value"), 
    "--Select--") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T12:55:00.383

为每个字段的选项创建一个单独的表。所以单独的表称为种族，高度，头发颜色。让您的 ASP.Net 代码查询此表以检索您所说的字典的值。

优点是

*   没有代码，数据库将更具可读性，因为您可以将选项整数加入其描述
*   无需重新编译代码即可添加（甚至可能不推荐使用）选项
*   您可以使用外键约束强制数据的一致性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T13:41:55.543

如果选项永远不会改变，请为每个选项使用一个枚举。

*   调试时它们将具有描述性名称。
*   将键入属性，以便您保持某种形式的一致性。它将防止从一个字段意外交换到另一个字段或为字段填写无效的选项编号。

如果您希望使用它，LINQ to SQL 可以很好地处理枚举。

# java - 在标记触摸上绘制路线 - Android

> ID：12270467
> 
> 赞同：0
> 
> 时间：2012-09-04T19:54:53.187
> 
> 标签：java, android, google-maps-api-3, android-mapview, google-maps-markers

在我正在构建的应用程序中，我正在使用带有标记的 mapView，我希望每当用户触摸标记时，都会在用户和标记之间绘制一条路线。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:15:30.120

1.  查找标记的纬度和经度。
2.  [然后在您当前的地理点和标记的地理点之间绘制路线](http://asmncl.blogspot.in/2012/04/android-draw-route-map-between-two.html)

# asp.net - 在任何表插入更新或删除时跟踪数据库

> ID：12270477
> 
> 赞同：0
> 
> 时间：2012-09-04T19:55:33.513
> 
> 标签：asp.net, sql-server-2008, c#-4.0, log4net, trace

只是一个简单的问题。当任何表最近插入更新或删除时，这是跟踪数据库的任何方式吗？例如，我在我的数据库中更新了 4 个用户详细信息。将创建一个日志文件并记录用户表中已更新的 4 条记录。

有可能做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:05:22.543

您可以使用 SQL Server 审计的强大功能[https://sqlblog.org/2008/05/06/when-was-my-database-table-last-accessed](https://sqlblog.org/2008/05/06/when-was-my-database-table-last-accessed)或者您可以创建触发器来审计您的 SQL Server 数据库[http:/ /weblogs.asp.net/jgalloway/archive/2008/01/27/adding-simple-trigger-based-auditing-to-your-sql-server-database.aspx](http://weblogs.asp.net/jgalloway/archive/2008/01/27/adding-simple-trigger-based-auditing-to-your-sql-server-database.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:06:02.283

您的问题的答案就在您的标签上：使用[log4net](http://logging.apache.org/log4net/)或[elmah](http://code.google.com/p/elmah/)等日志库，并在每次插入/更新/删除发生时记录...

或者在数据库端实现一些东西，每次在审计表中插入一条记录，并在你想要的表上发生插入/更新/删除。例如，您可以使用[数据库触发器](http://msdn.microsoft.com/en-us/library/ms189799.aspx)。

底线是**您**必须编写代码/逻辑来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:09:30.210

我建议在数据库层使用触发器并将更改记录到数据库中的表而不是平面文件中，这样无论在哪里进行更改，都会记录更改。然后在你的 UI 上写一些东西来显示你的日志表中的条目。

# jquery - jQuery Lightbox Prev/Next 按钮不显示在 iPad/iPod 上

> ID：12270478
> 
> 赞同：4
> 
> 时间：2012-09-04T19:55:39.047
> 
> 标签：jquery, html, ios, lightbox

我正在设计一个[网站](http://www.aisforestry.com)，并且正在使用 jQuery [lightbox 0.5](http://leandrovieira.com/projects/jquery/lightbox/)。

在设备页面上，我使用灯箱作为画廊。一切都可以在计算机上运行，​​但在 iPad/iPod 上，上一个/下一个按钮不显示。

我知道它使用 jQuery 例程来显示它们，`:mouseover`但这些设备上没有鼠标。点击按钮的正确一侧确实有效，但我希望按钮也在那里。

代码：

```
<script type="text/javascript">
    $(function() {
        $('a.StockNumber').lightBox();
    });
</script> 
```

单位的库存号在哪里`StockNumber`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:58:23.130

尝试添加固定导航选项：

```
$('a.StockNumber').lightBox({
    fixedNavigation: true
}); 
```

# excel - 每个月的 Excel 自动填充值

> ID：12270480
> 
> 赞同：0
> 
> 时间：2012-09-04T19:55:44.363
> 
> 标签：excel, spreadsheet, autofill

我正在用 excel 创建一个电子表格来跟踪我估计的每日现金流量。我已经在一个列中自动填写了下一年的每个日期。在下一列中，我想在账单到期日自动填写账单值。例如，我的抵押贷款将于 1 日到期，所以每 1 日，每个月我都想自动填写抵押贷款的成本。

感谢任何人对此的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:45:10.293

假设您的日期在 A 列中，并且您的抵押贷款账单在 B 列中，您可以在单元格 B2 中使用以下公式并向下拖动每个日期：

```
=IF(day(A2)=1,"1500","") 
```

**笔记：**

还假设在上面的公式中您的抵押金额为 1500。上面的公式检查日期是一个月中的哪一天，并显示它的 1500 是第 1 天，如果不是第 1 天则保持空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:13:16.220

我不确定我是否在关注，但您想通过一次复制一个月来填写吗？

看看[这篇](http://support.microsoft.com/kb/291359)关于如何使用自动填充选项并选择复制单元格（而不是填充系列）来重复复制单元格的文章。

# mongodb - MongoDB：什么是可取的，在服务器上还是在客户端上处理？

> ID：12270487
> 
> 赞同：0
> 
> 时间：2012-09-04T19:56:20.743
> 
> 标签：mongodb

我使用 MongoDB 的 .NET 驱动程序。我的问题是：

什么是可取的，为什么：

在 MongoDB 服务器上使用 javascript 处理数据

或者

将数据加载到客户端并使用驱动程序方法完成所有工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T20:21:49.707

如果可能，您应该避免使用 JavaScript 在 mongodb 服务器上处理数据。原因是 JavaScript 引擎是单线程的。这意味着一次只能有一个线程运行 JavaScript 引擎。可以想象，如果您有多个客户端连接到 mongodb，这将极大地影响性能——所有这些请求都将被序列化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T20:48:07.330

您不应该像许多使用 JS 函数的人认为的那样陷入尝试使用“存储过程”的陷阱。我很好地解释了为什么您不应该在此处的查询中使用 JS：[过程是否存在于 mongodb 中](https://stackoverflow.com/questions/12197546/is-procedure-exist-in-mongodb/12197757#12197757)。

对于 MongoDB 中的数据处理，您有以下三种选择：

*   地图减少
*   客户端
*   预聚合。

所有这些方法都更可取并且更好。至于在您的情况下哪个更可取：这完全取决于您要完成的工作。

当然，从 2.2（刚刚发布）开始，您获得了绕过 JS 引擎并为您提供更多灵活性的聚合框架。

# php - CakeDC Migrations 插件无法初始化 schema_migrations 表。

> ID：12270490
> 
> 赞同：1
> 
> 时间：2012-09-04T19:56:28.680
> 
> 标签：php, cakephp, migration, cakedc

我正在尝试在我的 CakePHP 应用程序中使用[https://github.com/CakeDC/migrations](https://github.com/CakeDC/migrations)插件。安装后，第一步是运行`Console/cake Migrations.migration -p Migrations`初始化 schema_migrations 表。我收到以下错误，告诉我 schema_migrations 不存在。

```
Cake Migration Shell
---------------------------------------------------------------
Notice Error: Undefined property: Sqlite::$error in [C:\development\tds\htdocs\app\Plugin\Migrations\Lib\CakeMigration.p
hp, line 419]

Error: Table schema_migrations for model SchemaMigration was not found in datasource default.
#0 C:\development\tds\htdocs\lib\Cake\Model\Model.php(3180): Model->setSource('schema_migratio...')
#1 C:\development\tds\htdocs\lib\Cake\Model\Model.php(2631): Model->getDataSource()
#2 C:\development\tds\htdocs\app\Plugin\Migrations\Lib\MigrationVersion.php(158): Model->find('all', Array)
#3 C:\development\tds\htdocs\app\Plugin\Migrations\Lib\MigrationVersion.php(105): MigrationVersion->getMapping('Migratio
ns')
#4 C:\development\tds\htdocs\app\Plugin\Migrations\Lib\MigrationVersion.php(290): MigrationVersion->setVersion(1, 'Migra
tions', false)
#5 C:\development\tds\htdocs\app\Plugin\Migrations\Lib\MigrationVersion.php(307): MigrationVersion->run(Array)
#6 C:\development\tds\htdocs\app\Plugin\Migrations\Lib\MigrationVersion.php(277): MigrationVersion->resetMigration('Migr
ations')
#7 C:\development\tds\htdocs\app\Plugin\Migrations\Lib\MigrationVersion.php(346): MigrationVersion->run(Array)
#8 C:\development\tds\htdocs\app\Plugin\Migrations\Lib\MigrationVersion.php(68): MigrationVersion->__initMigrations()
#9 C:\development\tds\htdocs\app\Plugin\Migrations\Console\Command\MigrationShell.php(84): MigrationVersion->__construct
(Array)
#10 C:\development\tds\htdocs\lib\Cake\Console\Shell.php(382): MigrationShell->startup()
#11 C:\development\tds\htdocs\lib\Cake\Console\ShellDispatcher.php(201): Shell->runCommand('-p', Array)
#12 C:\development\tds\htdocs\lib\Cake\Console\ShellDispatcher.php(69): ShellDispatcher->dispatch()
#13 C:\development\tds\htdocs\app\Console\cake.php(33): ShellDispatcher::run(Array)
#14 {main} 
```

我正在使用带有 SQLite 的 CakePHP 2.2。

有没有其他人遇到过这个问题？谁知道怎么修它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:34:32.230

CakeDC 迁移插件主要是为 MySQL 设计的。我不相信它会在没有一些修改的情况下与 SQLite 一起工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T23:54:26.723

该错误并非来自迁移插件：

> 注意错误：未定义的属性： [C:\development\tds\htdocs\app\Plugin\Migrations\Lib\CakeMigration.p hp，第 419 行] 中的**Sqlite::$error**

AFAIR CakePHP 没有附带 SqlLite 数据源，因此您可以从哪里获得该数据源，对其进行修复并向其添加错误处理。猜测它丢失是因为缺少错误属性。

# python - 制作一个简单的 Python 字典生成器

> ID：12270492
> 
> 赞同：6
> 
> 时间：2012-09-04T19:56:31.303
> 
> 标签：python, dictionary, generator

这是一个基本上进行迭代的示例代码。

```
>>> d = {'lol': {'12': '3',  '35':''}, 'w': {'12': '3', '35':''}}

>>> def iteritems(s):
...     keys = s.keys()
...     for key in keys:
...             yield key, s[key]
... 
>>> for k, v in iteritems(d):
...     print k, v
... 
w {'12': '3', '35': ''}
lol {'12': '3', '35': ''} 
```

这是一个有效的生成器。但是生成器`iteritems`必须调用`s.keys()`缓存字典中的所有键。如果字典很大（超过 100 个项目），则内存效率不高。

但由于字典不是有序结构，我认为获取该键列表是必须的。

有人可能会争辩说：键的数量远远少于计算键和值的项目数。

有什么建议吗？或者更好的方法（当然我需要支持嵌套迭代，但这是另一回事）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T19:57:43.523

[`.iterkeys()`](http://docs.python.org/library/stdtypes.html#dict.iterkeys)在 python 2.x 中使用；在 python 3.x 中，[`.keys()`是一个视图](http://docs.python.org/py3k/library/stdtypes.html#dictionary-view-objects)而不是一个新列表。在 python 2.7 中，你也可以使用[`viewkeys()`方法](http://docs.python.org/library/stdtypes.html#dictionary-view-objects)来获得相同的东西。

有一个等效的[`.iteritems()`方法](http://docs.python.org/library/stdtypes.html#dict.iteritems)，使您的实用程序方法变得多余。:-) 同样的注释适用于 python 3.x 和 2.7，请参阅提供的文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T01:42:00.490

您正在重新发明轮子，以避免在 Python 2.x 中制作中间列表，只需使用：

```
for k, v in d.iteritems():
    print k, v 
```

在 Python 3.x 中使用：

```
for k, v in d.items():
    print(k, v) 
```

因为该`.items()`版本中的方法返回一个可迭代的[视图](http://docs.python.org/py3k/library/stdtypes.html?highlight=items#dictionary-view-objects)对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-01T22:55:11.597

这是使用生成器生成键/值对的另一种方法：

```
my_dictionary = {
    'foo': [
        1, 2, 3
    ],
    'bar': [
        4, 5, 5
    ]
}

key_values = ((key, value) for key, value in my_dictionary.items())
for key, value in key_values:
    print(key, value)

# foo [1, 2, 3]
# bar [4, 5, 6] 
```

# android - Android - 无法解析超类

> ID：12270493
> 
> 赞同：17
> 
> 时间：2012-09-04T19:56:37.563
> 
> 标签：android, eclipse

我挖出了几年前我正在研究的一个旧的 android 项目，并将其加载到一个新的 eclipse 安装（最新的 ADT 等）中。

该项目全部编译正常（经过一些小的调整），并且应用程序启动正常，但是，当我按下按钮启动主要活动时，我得到以下堆栈跟踪：

```
FATAL EXCEPTION: main
java.lang.NoClassDefFoundError: com.tmm.android.activities.GameActivity
    at com.tmm.android.activities.StartActivity.onClick(StartActivity.java:53)
    at android.view.View.performClick(View.java:2408) 
```

现在有问题的类（GameActivity）是我在应用程序中的类之一，所以我知道那不是问题 - 但我注意到 logcat 顶部有一个警告：

```
Unable to resolve superclass of Lcom/tmm/android/activities/GameActivity; (33)
Link of class 'Lcom/tmm/android/activities/GameActivity;' failed 
```

我的类 GameActivity 扩展了另一个类，该类是我包含在项目中的第三方 jar 的一部分（将其包含在“libs”目录中，并将其添加到 eclipse 中的项目构建路径中）。

谁能告诉我可能做错了什么，或者我可能需要考虑的 ADT/etc 中发生的任何变化（当我上次在 Eclipse 中使用它时它工作正常）

干杯

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-30T16:58:23.150

我有同样的问题。我有一个自定义 View 类，它调用导入库中的方法。当应用程序尝试创建我的视图时（同时尝试扩展引用该自定义视图的布局），我也收到“无法解析超类”错误。

我解决了我的问题，并尝试确定我认为的最终答案。

（在撰写本文时，我使用的是 Eclipse Android Tools R21）。

**如果您使用的是外部 jar**

*   将其复制到项目的“libs”文件夹中。Android 工具应该完成其余的工作。

**如果您要使用的库是工作区中的单独项目。**

*   在您的库项目中：进入 Properties->Android 并选中“Is Library”复选框。
*   在您的应用程序项目中：进入 Properties->Android 并在同一部分添加库项目（单击“添加..”）。不要在这里检查“是图书馆”！

这个问题的一些答案说你需要去 Properties->Java Build Path->Projects 并在那里添加库项目。对于普通的 Java 项目，您会这样做，但 Android 工具似乎不需要或使用它。

**最后，您可能需要确保该库包含在您导出的应用程序中**

*   转到 Properties->Java Build Path->Order and Export 并确保检查库。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-04T20:23:16.887

好的，最后是一个简单的问题..

将第 3 方库添加到构建路径后，导出选项卡未默认导出 jar（eclipse 正常行为）-因此 jar 未包含在部署中。

解决了这个问题。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T21:06:30.687

我遇到了同样的问题，我尝试在 Order and Export 下检查 Android Private Libraries，但它对我不起作用。所以后来我注意到我的 libs 文件夹没有在 Java 构建路径下引用，我只是将它添加到库中，就是这样......

# php - mysql查询以查找范围内具有5个或更多连续记录的行

> ID：12270496
> 
> 赞同：0
> 
> 时间：2012-09-04T19:56:45.833
> 
> 标签：php, mysql

我有一种情况，我必须在前 10 条记录中识别 5 条或更多连续记录。我在下面给出了2个例子：

示例1如下

```
SL  User       Number   Frequency
1   aaa         9.95    1
2   aaa         9.85    1
3   aaa         9.75    1
4   aaa         9.65    1
5   aaa         9.55    1
6   aaa         9.45    1
7   xxxx        9.35    1
8   bbbb        9.25    1
9   cccc        9.15    1 
```

我想要一个可以获取记录 5 和 6（属于用户 aaa 的数字 9.55 和 9.45 并将频率更新为 2 而不是 1）的查询。

示例2如下

```
SL  User    Number  Frequency
1   xxxx     9.95   1
2   aaa      9.85   1
3   aaa      9.75   1
4   aaa      9.65   1
5   aaa      9.55   1
6   aaa      9.45   1
7   xxxx     9.35   1
8   bbbb     9.25   1
9   cccc     9.15   1 
```

查询应该只获取记录 6（属于用户 aaa 的编号 9.45，并且更新频率为 2 而不是 1）。

查询应选取用户前 9 个位置的任意位置出现 5 个或更多连续记录的记录，并将第 4 个位置之后的位置的频率标记为 2。

约束：此查询通过 php.ini 中的 ajax 每 2 秒执行一次。所以我真的不想要一个使用大量cpu的复杂连接/联合查询。我可以选择在 php 中执行此操作，将其分解为 2 个或更多较小的查询，但更喜欢不加载 cpu 或数据库的单个查询。如果单个查询可能会加载 cpu，我可以使用 2-3 个查询，因为处理发生在 php.ini 中。

您能否告知如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:20:39.073

如果它只是前 10 条记录，那么 PHP 解决方案不应该那么消耗..

```
$arr= mysql result arrays;
$old_user="";
$count=0;
foreach ($arr as $a){
    if ($a['name']==$old_user){
       $count++;
    }else{
       $count=0;
    }
    if ($count > 4) {
        // run the update query here

    }
    $old_user=$a['name'];
} 
```

看看它是否适合您的需要。

# scala - Scala隐式转换以某种方式阻塞

> ID：12270507
> 
> 赞同：1
> 
> 时间：2012-09-04T19:57:27.940
> 
> 标签：scala, implicit-conversion, scala-2.9

我用 Scalatra 写了一个小服务，它做了两件事：

*   提供 JSON 数据
*   提供与 Excel 工作表相同的数据

JSON 使用 spray-json、Excel 完成 - 使用 apache POI

基本上，我在 ScalatraServlet 实现中编写了两个方法：

```
def serveJson[T: JsonWriter](data: T) = {
  contentType = "text/json"
  data.toJson.prettyPrint
}

def serveExcel[T: ExcelWriter](data: T) = {
  contentType = "application/excel"
  data.toExcel.getBytes
} 
```

这里toJson是用spray-json实现的，所以我只是提供了一个JsonWriter隐式转换。所以我决定写一个类似toExcel的转换。

```
// ExcelWriter.scala

package com.example.app.excel

import org.apache.poi.hssf.usermodel.HSSFWorkbook
import annotation.implicitNotFound

@implicitNotFound(msg = "Cannot find ExcelWriter type class for ${T}")
trait ExcelWriter[T] {
  def write(obj: T): HSSFWorkbook
}

object ExcelWriter {
  implicit def func2Writer[T](f: T => HSSFWorkbook): ExcelWriter[T] = new ExcelWriter[T] {
    def write(obj: T) = f(obj)
  }
}

// Imports.scala
package com.example.app.excel

import org.apache.poi.hssf.usermodel.HSSFWorkbook

object Imports {

  type ExcelWriter[T] = com.example.app.excel.ExcelWriter[T]
  implicit def pimpAny[T](any: T) = new AnyExcelPimp(any)
  private[excel] class AnyExcelPimp[T](any: T) {
    def toExcel(implicit writer: ExcelWriter[T]): HSSFWorkbook = writer.write(any)
  }

} 
```

现在，问题是：

如果我 import `import cc.spray.json._`，则`import excel.Imports._`scalac 会抛出错误`serveJson`（值 toJson 不是类型参数 T 的成员）

如果我导入`import excel.Imports._`，则`import cc.spray.json._`scalac 会引发类似的错误`serveExcel`（toExcel 的值不是类型参数 T 的成员）

令人惊讶的是，如果我只使用其中一个导入，一切都可以编译并正常工作（好吧，一半，因为我注释掉了一半，它使用了删除的导入）。

我的实施有什么问题？

链接到 spray-json 源，我用作参考：[https ://github.com/spray/spray-json/tree/master/src/main/scala/cc/spray/json](https://github.com/spray/spray-json/tree/master/src/main/scala/cc/spray/json)

斯卡拉版本 - 2.9.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:57:27.940

问题似乎是我使用的隐式转换名称与 spray-json: 中使用的名称相同`pimpAny`。

```
// my implicit
implicit def pimpAny[T: ExcelWriter](any: T) = new AnyExcelPimp(any)

// spray-json implicit
implicit def pimpAny[T](any: T) = new PimpedAny(any) 
```

所以一个简单的重命名解决了这个问题。

尽管如此，在编译时看不到根本问题但结果还是有点奇怪。估计要睡了...

# jquery - DatePicker 选项“changemonth”和“changeyear”在 jqGrid 的编辑表单中不起作用

> ID：12270509
> 
> 赞同：5
> 
> 时间：2012-09-04T19:57:40.503
> 
> 标签：jquery, jquery-ui, jqgrid

我已经定制了 jqGrid 的编辑表单，让一些字段使用 jQuery 的 DatePicker 来填充它们。我在 colModel 选项中对其进行了如下配置：

```
colModel: [
...
    { name: 'Column', editable: true, index: 'Column', width: width,
      align: "center", editrules: { integer: true, required: true }, 
      editoptions: { size: 5, dataInit: function (el) {
                     setTimeout(function () { 
                           SetDatepicker('input[name^="' + el.name + '"]'); 
                     }, 100);                
                   } },
      formoptions: { rowpos: 1 }
    },
...
], 
```

这是可行的，只要它在单击输入字段时部署 DatePicker 日历。

不是 SetDatepicker 函数如下所示：

```
function SetDatepicker(control) {
    $.datepicker.setDefaults($.datepicker.regional['es']);

    $(control).datepicker({
        changeMonth: true,
        changeYear: true,
        monthNamesShort: ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"]
    });
} 
```

它已将 changeMonth 和 changeYear 设置为 true，因此 DatePicker 在其标题中应该有两个选择，一个用于年份，一个用于年份，以及手动沿日历移动的箭头。问题是，无法显示选择的选项：它们只是对鼠标单击没有响应。箭头可以发挥作用，因此您可以一次向前和向后移动一个月，但使用这些选项的想法不必这样做。

我有另一个字段，在 jqGrid 的编辑表单之外，它也使用相同的函数附加了一个 DatePicker。它工作正常，这让我认为问题出在 jqGrid 的事件处理上。

有任何想法吗？

谢谢

**UPD**

它在 Firefox 中运行良好，但在 IE9-7 和 Chrome 中却不行。

**UPD2**

我创建了一个 jsFiddle 示例，其中包含 datepicker 输入的代码以及我如何设置 jqGrid 以使用该功能：http: [//jsfiddle.net/rUkyF/](http://jsfiddle.net/rUkyF/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T02:43:19.030

**模态**模式是问题所在。当您单击*模态* **jqGrid**尝试将*焦点放在***表单**的第一个*元素*上时，您可以看到**jquery-ui将***div 日历*附加到**主体**上，并将其移出*模态 div*。评论所以修复它。********`modal: true`********

 ********```
grid.jqGrid('editGridRow', rowID, {
    addCaption: "Agregar Proyecto",
    topinfo: "Introduzca los nuevos datos del proyecto.",
    viewPagerButtons: false,
    //modal: true,
    jqModal: true,
    saveicon: [true, "left", "ui-icon-disk"],
    closeicon: [true, "right", "ui-icon-close"],
    closeAfterEdit: true,
    resize: false,
    width: wWidth,
    reloadAfterSubmit: true
}); 
```

[http://jsfiddle.net/rUkyF/70/](http://jsfiddle.net/rUkyF/70/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T13:38:48.220

我想如果您使用，问题将得到解决

```
SetDatepicker(el); 
```

代替

```
SetDatepicker('input[name^="' + el.name + '"]'); 
```

**更新：您的jsFiddler**演示有一些错误。查看修改后的演示[http://jsfiddle.net/rUkyF/7/](http://jsfiddle.net/rUkyF/7/)并尝试重现问题。我看没问题。

**更新 2**：我发现**iJD**找到了问题的根源。我只想描述*为什么* `modal: true`会干扰 jQuery Datepicker 的工作。我希望**iJD**奖励赏金，我只为其他想了解他们是否应该使用选项`modal: true`或不应该使用选项的读者写了下面的文字`jqModal: false`。

如果使用`modal: true`选项，`editGridRow`则`$.jgrid.viewModal`显示表单的方法将在[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.formedit.js#L1110)使用`modal: true`选项调用，并且选项将被转发（见[行](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.common.js#L172)）到模块[jqModal.js](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/jqModal.js)`jQuery.jqm`中定义的（ ） 。结果，使用代码[行](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/jqModal.js#L42)中的参数调用函数。因此该函数将绑定（参见代码[行](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/jqModal.js#L65)），并将事件绑定[到下一行](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/jqModal.js#L66)中定义的事件处理程序`$.fn.jqm``L``'bind'``jqm``L``keypress``keydown``mousedown``document``m`

```
var m = function (e) {
    var h = H[A[A.length - 1]],
        r = (!$(e.target).parents('.jqmID' + h.s)[0]);
    if(r) f(h);
    return !r;
} 
```

其中函数`f`定义为

```
var f = function (h) {
    try {
        $(':input:visible', h.w)[0].focus();
    } catch (_) {}
} 
```

所以我们可以看到，使用`modal: true`跟随阻塞所有不是类的 div 父级的控件`'.jqmID' + h.s`（通常`'.jqmID1'`）。在这种情况下`<input>`，表单的第一个可见字段将获得焦点（因为调用 function `f`）。

众所周知，许多 jQuery UI 控件创建的元素（菜单、日期选择器等）是 的直接子级`<body>`（例如 Datepicker 创建`<div id="ui-datepicker-div">`的是 的直接子级`<body>`）。*因此，键盘和鼠标事件可能会被此类控件阻止*。

**`modal: true`因此，如果您想在 jqGrid 表单中使用一些其他控件的一些 jQuery UI 控件，则不应使用选项。**

顺便说一句，`jqModal`选项的默认值`editGridRow`已经是`true`（参见[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#properties)）。因此，可以`jqModal: true`像其他选项一样从当前代码中删除`editGridRow`. 如果要`jqModal: false`改用，则 jqModal.js 插件将*不会被使用*，`editGridRow`并且该`modal: true`选项也将被忽略。在这种情况下，整个 HTML 页面都不会被阻止。仅当前网格将被网格的相应叠加层阻挡。

在我使用的个人默认设置中，`$.extend($.jgrid.edit, {...})`已`jqModal`关闭：

```
$.extend($.jgrid.edit, {
    recreateForm: true,
    jqModal: false,
    closeAfterAdd: true,
    closeAfterEdit: true,
    ... // other less common settings
}); 
```

您应该自行决定要使用哪些默认设置。

**更新 3**：我发布[了错误报告](http://www.trirand.com/blog/?page_id=393/bugs/modal-dialog-with-modaltrue-worked-incorrect-if-the-form-contains-elements-with-positionabsolute/#p28659)，建议如何修复 jqGrid 的代码。如果[换行](https://github.com/tonytomov/jqGrid/blob/v4.4.5/js/jqModal.js#L65)

```
m=function(e){var h=H[A[A.length-1]],r=(!$(e.target).parents('.jqmID'+h.s)[0]);if(r)f(h);return !r;}, 
```

到线

```
m=function(e){
    var h=H[A[A.length-1]],
        r=(!$(e.target).parents('.jqmID'+h.s)[0]);
    if(r) {
        // e.target could be inside of element with absolute position like menu item
        // in the case parents call above will don't find the modal dialog
        // To fix the problem we verify additionally whether e.target is inside of
        // an element having the class 'jqmID'+h.s
        $('.jqmID'+h.s).each(function() {
            var $self = $(this), offset = $self.offset();
            if (offset.top <= e.pageY && e.pageY <= offset.top + $self.height() &&
                    offset.left <= e.pageX && e.pageX <= offset.left + $self.width()) {
                r = false; // e.target is do inside of the dialog
                return false; // stop the loop
            }
        });
        f(h);
    }
    return !r;
}, 
```

那么问题应该得到解决。[该演示](http://www.ok-soft-gmbh.com/jqGrid/jqm-fix-demo.htm)使用`modal: true`选项和日期选择器在编辑对话框中工作。它使用我描述的修复程序。

**更新 4 ：我在答案的****更新 3**中描述的错误修复现在包含（参见[此处](https://github.com/tonytomov/jqGrid/commit/3cdc40c2fb3349f7650cfc22fe0fe07fea098cc7)）在 jqGrid 的主代码中。所以版本 > 4.4.5 不应该有描述的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T19:18:04.500

在您的 jsfiddle 中，您在开头设置了`id`带有`#`符号的属性。据我所知，你应该只使用`a-zA-Z_`符号。至少在我的经验中，我主要在 IE 中遇到了很多问题。

在我删除它之后`#`（http://jsfiddle.net/tftd/gwC4F/1/），在最新的 FF、Chrome、Opera 和 Safari 中，一切都像魅力一样。********

# mysql - phpMyAdmin 导出中文字符问题

> ID：12270515
> 
> 赞同：5
> 
> 时间：2012-09-04T19:57:56.877
> 
> 标签：mysql, phpmyadmin

当涉及到外来字符（尤其是中文）时，我的 phpMyAdmin 导出功能存在一些问题。默认字符集是`UTF-8`. 当我通过 phpMyAdmin 浏览行时，字符是正确的。`UTF-8`我正在使用字符集 通过 PHP 将数据插入 MySQL 。

一切似乎都很好。当我使用 phpMyAdmin 执行导出时，我只会得到错误的输出，无论是 CSV、.sql、JSON 等等。在带有`UTF-8`编码的简单文本编辑器中查看导出的文件似乎结果也相同，所以我猜这可能是由于我的 phpMyAdmin 导出配置？有没有其他人经历过这种情况？

```
真棒男人酷   真棒男人酷 
```

正变成

```
çœŸæ£’ç”·äººé…· çœŸæ£’ç”·äººé…· 
```

非常感谢，所以

# c - 提高 OpenMP 程序的性能

> ID：12270517
> 
> 赞同：0
> 
> 时间：2012-09-04T19:58:07.660
> 
> 标签：c, linux, openmp

假设一个 SIZE=128Mb 的数组`arr`，其值从 0 到 128Mb-1。现在假设以下代码：

```
#pragma omp parallel num_threads(NUM_THREADS)
{
  int me = omp_get_thread_num();
  odds_local[me] = 0;
  int count = 0;

#pragma omp for 
  for (int i = 0; i < SIZE; i++)
      if (arr[i]%2 != 0)
    count++;

  odds_local[me] = count;
} 
```

最后是一个循环，迭代 的值`odds_local[me]`以获得最终结果。为此，如果我在 Linux 中计时并报告用户时间，我会得到 1 个线程和 2 个线程的 0.97 秒。也就是说，没有任何加速。

我应该在这个程序中改进什么以提高速度吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:09:01.800

我运行了您的确切代码，使用 1 个线程得到 390 毫秒，使用 2 个线程得到 190 毫秒。您的问题不在代码中。它必须是基本的东西。这些是我能想到的：

*   不与 OpenMP 链接（带`g++ filename -fopenmp`）；
*   在单核机器上运行；
*   在双核上运行，其他东西占用另一个核心；
*   计时比这个循环更多的东西，它在计算中占主导地位。

# asp.net - 将信息从网页传递到 iFrame 内的另一个 ASP.NET 页面

> ID：12270518
> 
> 赞同：0
> 
> 时间：2012-09-04T19:58:07.840
> 
> 标签：asp.net, .net, jsf, web

我在 WebLogic 应用程序服务器 (JSF) 中有一个网页。在该页面内，我有一个 iFrame，它显示一个 ASP.NET 页面（带有代码隐藏 dll）。用户在 JSF 页面中进行了身份验证，我想以某种方式将用户的用户名传递给 iFrame 内的 ASPX 页面。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:04:51.280

实现此目的的最简单（但可能不安全）的方法之一是使用 QueryString。

在 ASP.Net 端处理 QueryString 的示例

*   [使用 QueryString 在页面之间传递变量](http://www.codeproject.com/Articles/5876/Passing-variables-between-pages-using-QueryString)。

从 JSF 方面，您可以像这样传递参数

```
<h:outputLink value="aspNetPage.aspx" target="iFrameName">
    <h:outputText value="Load asp.net page" />
    <f:param name="username" value="#{sessionScope['username']}" />
</h:outputLink> 
```

JSF 代码来自：[JSF 2 Link、CommandLink 和 OutputLink 示例](http://www.mkyong.com/jsf2/jsf-2-link-commandlink-and-outputlink-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:04:52.173

您可以将其写入会话/cookie 并从 IFrame 页面中读取它。或者您可以使用 DB 路由，这取决于您希望如何实现它。

# java - 如何在嵌入式 Tomcat 上运行 JAX-RS 应用程序？

> ID：12270520
> 
> 赞同：0
> 
> 时间：2012-09-04T19:58:12.853
> 
> 标签：java, tomcat, jersey, jax-rs

我想在嵌入式 Tomcat (7) 上运行 JAX-RS 2.0 (Jersey) 应用程序。但我还没有找到关于它的示例或文档。

如何以编程方式设置 Tomcat 7 并向其添加包装 JAX-RS 应用程序的 Servlet？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:09:03.247

如果您想从 Java 环境启动/停止 Tomcat，请查看其启动脚本以查看调用了哪些类。实际上并没有那么复杂。我一直在我的 IntelliJ 上执行此操作。我的 IntelliJ 启动配置如下所示：

*主要课程*：`org.apache.catalina.startup.Bootstrap`

*虚拟机参数*：`-ea -cp $CLASSPATH:/path/to/tomcat/bin/bootstrap.jar -Dcatalina.base="/path/to/tomcat" -Dcatalina.home="/path/to/tomcat" -Djava.io.tmpdir="/path/to/tomcat/temp" -noverify -Xmx400M -XX:MaxPermSize=400M`

*程序参数*：`start`

*工作目录*：`/path/to/tomcat`

如果你想优雅地停止 Tomcat，唯一不同的是*程序参数*，即`stop`.

# javascript - javascript中网络图的大型数据集

> ID：12270522
> 
> 赞同：1
> 
> 时间：2012-09-04T19:58:24.453
> 
> 标签：javascript, data-visualization

我的目标是在 Javascript 的网络图中呈现 500,000 - 100 万条记录。首先，我想知道 Javascript 中是否有一个库可以一次性渲染如此多的数据，因为需要一次显示整个数据。然后，我还想知道 Flash（或任何其他）是否有更好的选择。

我实际上希望构建类似于 LinkedIn 的 InMap 的东西：http: [//www.fastcodesign.com/1663098/infographic-of-the-day-linkedin-maps-big-shots-in-your-social-network](http://www.fastcodesign.com/1663098/infographic-of-the-day-linkedin-maps-big-shots-in-your-social-network)

那么，在 Javascript 中以网络图表呈现大型数据集的可行性如何？有没有图书馆可以容纳这么多？如果不是，还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:03:51.560

您需要进行某种聚合。即使是桌面网络分析工具也很难绘制具有一百万个节点的节点链接图。更不用说具有这么多节点的图表将无法理解。

以下是一些关于聚合的各种示例学术文章。前两个侧重于按类别属性对节点进行分组以显示整体关系，最后一个讨论如何创建显示关键特征的“骨干”网络。

*   马丁·瓦滕贝格。2006\. 多元图的视觉探索。在 SIGCHI 会议论文集上计算系统中的人为因素 (CHI '06)，811-819。[DOI=10.1145/1124772.1124891](http://dx.doi.org/10.1145/1124772.1124891)。[PDF格式](http://hint.fm/papers/pivotgraph.pdf)

*   Cody Dunne、Nathalie Henry Riche、Bongshin Lee、Ronald Metoyer 和 George Robertson。2012\. GraphTrail：分析大型多元、异构网络，同时支持探索历史。在 2012 年 ACM 计算系统中的人为因素年会 (CHI '12) 的论文集中，1663-1672。[DOI=10.1145/2208276.2208293](http://dx.doi.org/10.1145/2208276.2208293)。[PDF格式](http://www.cs.umd.edu/~cdunne/hcil/pubs/Dunne12GraphTrail_analyzinglarge.pdf)

*   Pak Chung Wong、Harlan Foote、Patrick Mackey、George Chin、Heidi Sofia 和 Jim Thomas。2008\. 用于探索大型稀疏图的动态多尺度放大工具。信息可视化 7、2（2008 年 4 月），105-117。[DOI=10.1057/palgrave.ivs.9500177](http://dx.doi.org/10.1057/palgrave.ivs.9500177)。[PDF格式](https://www.purdue.edu/discoverypark/vaccine/assets/pdfs/publications/pdf/A%20Dynamic%20Multiscale%20Magnifying.pdf)

# android - support-library-v4 的依赖问题

> ID：12270529
> 
> 赞同：1
> 
> 时间：2012-09-04T19:58:48.457
> 
> 标签：android, eclipse

我想在 Eclipse 中将 2 个现有项目作为库导入。这两个库项目都依赖于`support-library-v4`并有一个 .jar 文件。所以当我导入它们时，我被要求修复依赖关系。我收到此错误：

```
Jar mismatch! Fix your dependencies 
```

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:16:54.263

试试这个：

1.  右键单击库的项目首选项。
2.  单击 Java 构建路径
3.  删除您在“root”中看到的 android-support-v4 jar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:44:04.120

这是一个非常常见的错误，如果您在两个或多个项目中使用不同构建的同一个库，则可能会发生这种错误。解决此问题的最佳方法是右键单击所有项目并重新安装您的 android 支持库。

注意：记得使用库源文件

# python - 如何使用 Python 格式化 pubDate

> ID：12270531
> 
> 赞同：6
> 
> 时间：2012-09-04T19:58:58.673
> 
> 标签：python, parsing, date, rss

我是 Python 的新手，我正在尝试执行以下操作。

在 PHP 中，如果我们想转换日期，我们使用如下内容：

```
$item_date  = date("Y-m-j G:i:s", strtotime($RSSitem->pubDate)); 
```

现在，我尝试使用 Python 做同样的事情，但我无法理解这样做的确切方法。

任何人都可以通过将这一行写入 python 来帮助我吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-04T20:57:05.440

根据[RSS 规范](http://cyber.law.harvard.edu/rss/rss.html) `pubDate`必须遵循[RFC822](http://asg.web.cmu.edu/rfc/rfc822.html)：

```
mytime.strftime("%a, %d %b %Y %H:%M:%S %z") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T20:20:01.813

有两个部分：

*   将 pubDate 从字符串转换为日期时间/时间对象。如果 pubDate 的格式是固定的，您可以使用`datetime.strptime()`函数，否则您可以使用[`dateutil.parser.parse()`](http://labix.org/python-dateutil/#head-a23e8ae0a661d77b89dfb3476f85b26f0b30349c)or [`feeparser._parse_date()`](http://pypi.python.org/pypi/feedparser/)（后者可能更容易安装）。
*   `.strftime()`使用方法/`time.strftime()`函数将日期时间/时间对象转换为字符串。

请参阅[strftime() 和 strptime() 行为](http://docs.python.org/library/datetime#strftime-strptime-behavior)。

# git - 添加未跟踪文件时在 GIT 中分页

> ID：12270534
> 
> 赞同：2
> 
> 时间：2012-09-04T19:59:06.020
> 
> 标签：git, git-bash

我正在尝试查看 git -add -i -> 'add untracked' 的所有结果，但我无法查看前几个结果。我知道 git 内部有一个分页功能，但我似乎找不到它。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T23:27:58.460

有两种方法可以做到这一点。

您可以将任何 Git 命令通过管道传输到寻呼程序，例如`less`：

```
git status | less 
```

这不会保留 Git（可能）通常输出的任何文本颜色。

第二种方法是使用`git`命令的两个分页选项之一。要使用特定的寻呼机命令：

```
git --pager=<pager command> status 
```

或使用默认的 Git 寻呼机命令：

```
git --paginate status 
```

# c++ - string.compare 什么时候停止比较？（标准）

> ID：12270540
> 
> 赞同：1
> 
> 时间：2012-09-04T19:59:13.667
> 
> 标签：c++, string

我知道 compare 方法将返回一个整数值，表示两个字符串之间的差异（如果匹配，则为 0）。我的问题是，如果发现不匹配，它会在不匹配时停止比较还是在指定之前结束？

它取决于编译器还是标准？我目前正在使用 gcc 4.1.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:02:53.413

好吧，标准并不关心，但比较的结果——标准只关心这一点——完全取决于第一个不匹配的字符。因此，比较其他的对于任何实现来说都是毫无意义的，如果更容易处理平台的缓存或字长，可能会增加几个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:05:39.253

未指定。

标准规定`rhs.compare(lhs)`相当于`char_traits::compare(&rhs[0], &lhs[0], min(rhs.size(), lhs.size())`. `char_traits::compare`被描述为丢弃不匹配后的字符比较值，但它是否实际读取字符不再详细说明。

# php - MYSQLI 仅返回 1 个值，而有 2 个

> ID：12270542
> 
> 赞同：0
> 
> 时间：2012-09-04T19:59:19.907
> 
> 标签：php, mysql, mysqli

我已经开始制作一个使用 MySql 加载视频的视频脚本，我正在使用 Mysqli。但是，它应该发布 2 行，但它只发布第二行，而不是第一行。它使用“品牌”加载结果，因此如果有 2 行名为“测试”，它只加载第二行，而不加载第一行。那么，是什么原因造成的呢？我试过 3 行，但它不包括第一行。代码

```
<?php
{ /* Global Data */
ini_set('display_errors', 0); 
ini_set('error_reporting', -0);
$GetPath = $_GET['b'];
$SqlUser = "root";
$SqlPass = "**Private**";
$SqlHost = "localhost";
$SqlData = "heisteknikk";
}
{ /* Mysql Connect */
$Sql = new mysqli($SqlHost, $SqlUser, $SqlPass, $SqlData);
if ($Sql->connect_error) { die("Sorry, Could not connect (".$Sql->connect_errno.") ".$Sql->connect_error);}
}
{ /* Test */

$Brand = $Sql->real_escape_string($GetPath);
$SqlData = "SELECT * FROM videos WHERE Brand = '".$Brand."'";
$SqlQuery = $Sql->query($SqlData);
if (!$SqlQuery) {
    echo $Sql->error;
}
if ($SqlQuery->num_rows == 0) {
die("Nothing was found");
}
$Data = $SqlQuery->fetch_array(MYSQLI_ASSOC);
echo "<table border='1'>";
while ($Heis = $SqlQuery->fetch_assoc()) {
echo "
<tr><td>".$Heis['Brand']."</td><td>".$Heis['Name']."</td><td>".$Heis['Location']."

";
}
echo "</table>";
$Sql->close();
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T20:01:57.597

此行导致错误：

`$Data = $SqlQuery->fetch_array(MYSQLI_ASSOC);`

使用这一行，您可以有效地丢弃结果集的第一行，因为您根本不会`$Data`在下面的代码中进行处理。只需删除它，您的脚本应该可以正常工作（我假设`</td></tr>`粘贴代码时关闭序列丢失了，对吗？）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T20:02:10.297

注释掉（或者更好的是，删除）这一行：

```
$Data = $SqlQuery->fetch_array(MYSQLI_ASSOC); 
```

它正在抓取第一行......然后你没有对**$Data**做任何事情，然后抓取第二行（和连续的行）以在你的 while 循环中显示。注释掉上面的那一行将使您的循环抓取并从第一行开始显示它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T20:02:56.430

在您的代码中

```
$Data = $SqlQuery->fetch_array(MYSQLI_ASSOC);
echo "<table border='1'>";
while ($Heis = $SqlQuery->fetch_assoc()) { 
```

您正在获取一行（使用`fetch_array`），将其丢弃，然后获取另一行（使用`fetch_assoc`）。这可能就是为什么你只看到一排而不是两排

# ios - Facebook 应用重定向到 App Store

> ID：12270543
> 
> 赞同：0
> 
> 时间：2012-09-04T19:59:22.417
> 
> 标签：ios, facebook, facebook-apps

我们的应用程序仍处于开发阶段，可以发布到玩家的墙上。我认为这并不重要，但如果确实如此，我们将为此使用 GoViral 的 showFacebookFeedDialog 方法。

尝试单击这些帖子上的链接时，我们在移动设备上遇到了一些奇怪的行为（我们现在正在测试 iOS）：

1.  单击 Safari 中的墙贴：URL 加载正常。
2.  从 Facebook 应用点击墙贴：打开 App Store。

知道为什么要加载应用商店吗？该链接是 PHP，但我只尝试了一个纯 URL (http://www.google.com)，它也打开了 App Store。显然这不是所需的行为，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:30:15.097

您是否在应用设置中启用了深度链接？也许您应该在您的应用程序仍在开发中时禁用深度链接。更多信息在这里 - [https://developers.facebook.com/blog/post/2012/02/21/improving-app-distribution-on-ios/](https://developers.facebook.com/blog/post/2012/02/21/improving-app-distribution-on-ios/)

# iis - Coldfusion java.lang.NullPointerException：使用 SOAP Web 服务的 null

> ID：12270551
> 
> 赞同：2
> 
> 时间：2012-09-04T19:59:39.383
> 
> 标签：iis, soap, service, coldfusion, web

什么可能导致 ColdFusion 在使用 Web 服务时抛出“java.lang.NullPointerException：null”错误？

对于任何其他计算机，Web 服务都存在并且可以完美运行。但是有一些关于 ColdFusion 的安装会导致错误。我尝试卸载并重新安装 IIS 和 ColdFusion，但均无济于事。

我什至在服务器上试过soapUI，效果很好。不确定这是否是 ColdFusion/IIS 问题。

使用或 CreateObject 发生

服务器操作系统：Windows Server 2008
CF 版本：9.0
IIS 版本：7.5

到目前为止，我已经用尽了所有的想法。任何帮助，将不胜感激。

任何感兴趣的人的堆栈跟踪

```
    在 cftest2ecfm526089628.runPage(C:\inetpub\wwwroot\....cfm:21) 在 cftest2ecfm526089628.runPage(C:\inetpub\wwwroot\.....cfm:21)

    java.lang.NullPointerException
    在 org.apache.axis.client.Service.getEngineConfiguration(Service.java:801)
    在 org.apache.axis.client.Service.getAxisClient(Service.java:143)
    在 org.apache.axis.client.Service.(Service.java:152)
    在 com.media.modules.ws.AcfwsServiceLocator.(AcfwsServiceLocator.java:12)
    在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    在 sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    在 java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    在 java.lang.Class.newInstance0(Class.java:355)
    在 java.lang.Class.newInstance(Class.java:308)
    在coldfusion.xml.rpc.XmlRpcServiceImpl$4.run(XmlRpcServiceImpl.java:372)
    在 java.security.AccessController.doPrivileged（本机方法）
    在coldfusion.xml.rpc.XmlRpcServiceImpl.registerWebService(XmlRpcServiceImpl.java:368)
    在coldfusion.xml.rpc.XmlRpcServiceImpl.getWebService(XmlRpcServiceImpl.java:496)
    在coldfusion.xml.rpc.XmlRpcServiceImpl.getWebServiceProxy（XmlRpcServiceImpl.java:450）
    在coldfusion.xml.rpc.WebServiceProxyFactory.getProxy(WebServiceProxyFactory.java:22)
    在coldfusion.runtime.ProxyFactory.getProxy(ProxyFactory.java:65)
    在coldfusion.runtime.CFPage.createObjectProxy（CFPage.java:4949）
    在coldfusion.runtime.CFPage.CreateObject(CFPage.java:4920)
    在coldfusion.runtime.CFPage.CreateObject（CFPage.java:4861）
    在coldfusion.runtime.CFPage.CreateObject（CFPage.java:4839）
    在coldfusion.runtime.CFPage.CreateObject(CFPage.java:4796)
    在 cftest2ecfm526089628.runPage(C:\inetpub\wwwroot\ACF\TestStreaming\test.cfm:21)
    在coldfusion.runtime.CfJspPage.invoke（CfJspPage.java:231）
    在coldfusion.tagext.lang.IncludeTag.doStartTag（IncludeTag.java:416）
    在coldfusion.filter.CfincludeFilter.invoke(CfincludeFilter.java:65)
    在coldfusion.filter.ApplicationFilter.invoke(ApplicationFilter.java:363)
    在coldfusion.filter.RequestMonitorFilter.invoke（RequestMonitorFilter.java:48）
    在coldfusion.filter.MonitoringFilter.invoke（MonitoringFilter.java:40）
    在coldfusion.filter.PathFilter.invoke(PathFilter.java:87)
    在coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:70)
    在coldfusion.filter.ClientScopePersistenceFilter.invoke（ClientScopePersistenceFilter.java:28）
    在coldfusion.filter.BrowserFilter.invoke（BrowserFilter.java:38）
    在coldfusion.filter.NoCacheFilter.invoke(NoCacheFilter.java:46)
    在coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:38)
    在coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22)
    在coldfusion.filter.CachingFilter.invoke（CachingFilter.java:53）
    在coldfusion.CfmServlet.service（CfmServlet.java:200）
    在coldfusion.bootstrap.BootstrapServlet.service（BootstrapServlet.java:89）
    在 jrun.servlet.FilterChain.doFilter(FilterChain.java:86)
    在coldfusion.monitor.event.MonitoringServletFilter.doFilter（MonitoringServletFilter.java:42）
    在coldfusion.bootstrap.BootstrapFilter.doFilter（BootstrapFilter.java:46）
    在 jrun.servlet.FilterChain.doFilter(FilterChain.java:94)
    在 jrun.servlet.FilterChain.service(FilterChain.java:101)
    在 jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:106)
    在 jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)
    在 jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:286)
    在 jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:543)
    在 jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:203)
    在 jrunx.scheduler.ThreadPool$DownstreamMetrics.invokeRunnable(ThreadPool.java:320)
    在 jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)
    在 jrunx.scheduler.ThreadPool$UpstreamMetrics.invokeRunnable(ThreadPool.java:266)
    在 jrunx.scheduler.WorkerThread.run(WorkerThread.java:66)

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:38:47.903

放弃尝试在 ColdFusion 中正确调用 Web 服务。相反，我编写了一个小型soap 调用程序组件，该组件使用正确的soap 标头/调用向目标URL 发送请求。如果有人想要代码，它在下面。我仍然觉得它不起作用真的很奇怪，我什至在同一台服务器上检查了 ASP，它没有问题。

```
<cfcomponent namespace="soapLib">
    <cffunction name="soapRequest" returnType="string" returnFormat="plain" hint="Consume a SOAP webservice from the given URL with the given function and arguments.">
    <cfargument name="wsdlUrl" type="string" hint="URL of the web service to consume including ?wsdl at the end.">
    <cfargument name="serviceNs" type="string" hint="The namespace of the web service, needed to complete a webservice properly.">
    <cfargument name="funcName" type="string" hint="The function to call when consuming the web service.">
    <cfargument name="args" type="array" hint="The arguments to parse to the web service.">
    <cfset i=0>
    <cfset soapArgs = ''>
    <cfloop array="#args#" index="arg">
        <cfset soapArgs &= '<arg#i#>#arg#</arg#i#>'>
        <cfset i++>
    </cfloop>
    <cfset soap = '<?xml version="1.0" encoding="utf-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <SOAP-ENV:Body>
        <m:#funcName# xmlns:m="#serviceNs#">
            #soapArgs#
        </m:#funcName#>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope>'>
        <cfhttp url="#wsdlUrl#" method="post">
            <cfhttpparam type="header" name="Content-Type" value="text/xml">
            <cfhttpparam type="header" name="SOAPAction" value="#funcName#">
            <cfhttpparam type="header" name="content-length" value="#len(soap)#">
            <cfhttpparam type="header" name="charset" value="utf-8">
            <cfhttpparam type="xml" name="message" value="#trim(soap)#">
        </cfhttp>
        <cfif not IsXML(cfhttp.fileContent)>
            <cfset return = false>
        <cfelse>
            <cfset xml = XmlParse(cfhttp.fileContent)>
            <cfset return = xml['S:Envelope']['S:Body']['ns2:#funcName#Response']['return']['XmlText']>
        </cfif>
        <cfreturn return>
    </cffunction>
</cfcomponent> 
```

# text - 如何根据文本内容显示浮动文本字段？

> ID：12270556
> 
> 赞同：2
> 
> 时间：2012-09-04T20:00:19.733
> 
> 标签：text, field, itext, floating

我有一个 PDF 模板（使用 Adob​​e Livecycle 设计器设计），它有一个子表单和一个文本字段。这两个对象的属性设置为`float`。并且这些对象的高度设置为`Autofit`。这些对象的所有封闭父级高度都设置为`AutoFit`。

我的目的是根据我们在文本字段中输入的文本内容来增加文本字段的高度。

当我从 Adob​​e 设计器预览模板时，生成的预览 PDF 将文本字段显示为浮动（基于我输入的测试数据）。

出于我们的应用目的，我们使用 iText。

基本上，我们加载这些预定义模板，并使用 iText API 将数据填充到这些字段中。

我们当前使用的 iText 版本是 iText 5.1.3

```
...

Document document = new Document();
document.open();
PdfReader reader = new PdfReader(<inputTemplate>);
ByteArrayOutputStream aStream2 = new ByteArrayOutputStream();
PdfStamper stamper2 = new PdfStamper(reader, aStream2);
AcroFields form = stamper2.getAcroFields();
form.setField("<fieldname>", "<fieldvalue>");

... 
```

等等。

这样生成的 PDF 只显示适合文本框大小的文本，基本上忽略溢出。

希望我已经对我遇到的问题给出了足够的描述。我想动态嵌入内容并使 PDF 的其余部分可浮动。我想知道我还能如何使用 iText 实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:17:30.813

你在混合不同的东西。

PDF 中有两种类型的表单技术： - AcroForm 技术：使用 PDF 语法描述表单，如 PDF 字典使用键/值对描述字段，如 PDF 数组存储字段坐标，以及很快。如果您使用 AcroForm 技术，则无法满足您的要求。你使用了错误的技术。通常，这些表单是使用 Adob​​e Acrobat、LibreOffice... - XML 表单架构 (XFA) 创建的：使用 XML 描述表单。PDF 充当 XML 的容器。通常，这些表单是使用 Adob​​e LiveCycle Designer 创建的。

有时，表单同时使用两种技术（混合表单），在这种情况下，表单是使用 PDF 语法和 XML 语法定义的。

实现您想要的唯一方法是使用纯粹的 dynamix XFA 表单。在这种情况下，您不能使用 setField() 方法。相反，您要么必须使用 fillXfaForm()，就像在此示例中所做的那样：http://itextpdf.com/examples/iia.php?id=165[或者](http://itextpdf.com/examples/iia.php?id=165) 您必须使用 XFA Worker，您可以在此处找到演示：[http://demo.itextsupport.com/xfademo/](http://demo.itextsupport.com/xfademo/)

# android - 无法捕获的 webview 异常？

> ID：12270561
> 
> 赞同：0
> 
> 时间：2012-09-04T20:00:37.353
> 
> 标签：android

我想从我的应用程序中清除所有 webview 数据。我正在执行以下操作：

```
WebViewDatabase wvd = WebViewDatabase.getInstance(context);
if (wvd != null) {
    try { 
        wvd.clearUsernamePassword(); <-- throws an uncatchable exception
    } catch (Exception ex) {
        Log.e(TAG, "nope!", ex);
    }
} 
```

clearUsernamePassword() 行抛出异常，上面的 try / catch 没有捕获到它：

```
native_execute (step): errno = 2, error message = No such file or directory, handle = 0x47ec78
clearUsernamePassword Storage full, abort doing SQLite operation.
android.database.sqlite.SQLiteDiskIOException: error code 10: disk I/O error
  at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
  at android.database.sqlite.SQLiteStatement.execute(SQLiteStatement.java:61)
  at android.database.sqlite.SQLiteDatabase.delete(SQLiteDatabase.java:1721)
  at android.webkit.WebViewDatabase.clearUsernamePassword(WebViewDatabase.java:1278) 
```

我们应该在这里做什么？

谢谢

- - - - 更新 - - - - -

这是导致它的方法的链接（它不是我的，它是 android 的一部分）：http: [//developer.android.com/reference/android/webkit/WebViewDatabase.html#clearUsernamePassword](http://developer.android.com/reference/android/webkit/WebViewDatabase.html#clearUsernamePassword) ()

实际上，我从 WebViewDatabase 的不同方法中得到了一些这样的例外（该应用程序有很多下载，因此我看到的量很大。我实际上最终能够在设备上重现它）。

上面的代码没有在单独的线程上运行。

# grails - 在 Grails 中检测重定向

> ID：12270564
> 
> 赞同：1
> 
> 时间：2012-09-04T20:00:47.033
> 
> 标签：grails

在我`save`的动作结束时，我重定向到这样的`show`动作：

```
redirect(action: "show", id: exampleInstance.id) 
```

在我的`show`操作中，我希望能够检测是否有人通过 url 直接进入此操作，或者他们是否从另一个操作重定向到此处。我试过`request.isRedirected()`但它总是返回`false`。

我如何检测我是否由于另一个动作的重定向而处于一个动作中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:05:13.320

我猜你想显示一条确认消息。Grails 为这种用例提供​​了一个内置功能：

[http://www.grails.org/doc/2.1.0/ref/Controllers/flash.html](http://www.grails.org/doc/2.1.0/ref/Controllers/flash.html)

看看这个例子：

```
class BookController {

    def save() { 
        flash.message = "Welcome!" 
        redirect(action: 'home') 
    }
} 
```

在视图中，您可以打印或检查`flash.message`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:04:01.647

在 Grails 源代码中看起来`isRedirected()`仅适用于`save`动作，因为它在`redirect()`方法逻辑中设置，因此不会在`show`动作中设置。

相反，这里有一些手动选项。一种是向`flash`对象添加一个标志，然后在重定向操作中对其进行测试。由于它在 flash 范围内，它将在`show`操作结束时被清除：

```
 def save() {
     // Do stuff
     flash.redirectFrom = "save"
     redirect(action:"show")
 }

 def show() {
     if (flash.redirectFrom) {
         // Respond to redirect
     }
     // Do other stuff
 } 
```

另一种选择是发出`chain()`调用而不是 a`redirect()`并测试隐式`chainModel`对象。当从外部 URL 请求操作`chainModel`时将不存在：`show`

```
 def save() {
     // Do stuff
     chain(action:"show",model:[from:'show'])
 }

 def show() {
     if (chainModel) {
         // Respond to redirect
     }
     // Do other stuff
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T20:16:22.613

理论上，isRedirect 检查请求属性。它相当于

```
import org.codehaus.groovy.grails.web.servlet.GrailsApplicationAttributes
if(request.getAttribute(GrailsApplicationAttributes.REDIRECT_ISSUED) != null){
    println "request was redirect"
} 
```

直接尝试并告诉我会发生什么。

# jquery - 使用 jQuery 修改超链接的 onclick URL 参数

> ID：12270568
> 
> 赞同：3
> 
> 时间：2012-09-04T20:01:07.430
> 
> 标签：jquery, sharepoint, attributes, onclick, href

我在 SharePoint 页面上有一系列链接，我正在尝试修改其中一个常见的 URL 参数。所有链接看起来都与此类似：

`<a href="javascript:" onclick="javascript:RefreshPageTo(event, '/dev/Pages/stPCT.aspx?Paged=TRUE&amp;p_ID=357\u0026PageFirstRow=31\u0026FilterField1=Number&amp;FilterValue1=0000123450&amp;&amp;\u0026View={FC071FA0-12AA-7854-905E-0C4429FFFD52}&amp;thisID=STRINGID');javascript:return false;" id="PagingLink" class="PagingLink"> Next</a>`

我想要发生的是重写链接以将“thisID = STRINGID”更改为“thisID = 0000123450”......到目前为止，我已经尝试（没有成功）以下。

```
$(".PagingLink").each( function(index,element) {
    url = $(element).onclick();
    console.log(url);
    newurl = url.replace(/STRINGID/gi,"0000123450");
    $(element).attr('href', newurl);                                                               
}); 
```

任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T20:08:20.893

我会这样做：

```
 $(".PagingLink").each( function(index,element) {
        url = $(element).attr('onclick');
        console.log(url);
        newurl = url.replace(/STRINGID/gi,"0000123450");
        $(element).attr('href',newurl);                                                               
    }); 
```

您的错误在**.onclick**中，您应该使用**attr()**获取它，因为它保证您获得正确的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:08:25.313

您当前的 jQuery 代码可能会遇到 JavaScript 错误，因为没有调用`onclick()`. 您可以使用如下[`attr()`](http://api.jquery.com/attr/)方法访问 onclick 值：

```
url = $(element).attr('onclick'); 
```

您的其余代码应该正确执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T20:15:09.697

```
 $(".PagingLink").each( function(index,element) {
        url = $(element).onclick();
        console.log(url);
        newurl = url.replace(/STRINGID/gi,"0000123450");
        $(element).attr('href', newurl);                                                               
    }); 
```

检查这个

```
 $(".PagingLink").each( function(index,element) {
            $(element).attr('href').replace(/STRINGID/gi,"0000123450");                                                              
    }); 
```

.attr("value").replace('0', 'Day')

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T20:12:53.283

您需要更改 onclick 属性中的文本，而不是 href 属性。看到这个小提琴：http: [//jsfiddle.net/fQEdV/2/](http://jsfiddle.net/fQEdV/2/)

更改 href 不会决定页面的去向，因为 Sharepoint 使用 javascript 在链接的单击事件中重定向用户。如果用户禁用了 javascript，那么您更新此 url 的脚本无论如何都不会为他们运行。

# c - 从 hdd ole 二进制文件中提取对象

> ID：12270569
> 
> 赞同：1
> 
> 时间：2012-09-04T20:01:11.760
> 
> 标签：c, extract, ole, lotus

我遇到了嵌入在 Lotus Notes 文档中的 OLE 对象的特定问题。

用户已将 fe Word 或 Excel 文档附加为 OLE 对象（在 Lotus Notes 文档中），我需要从 OLE 获取这些原始文档作为可以在其主机应用程序中打开的文件附件。

使用 Lotus Notes C API，我设法将 OLE 对象分离到 HDD。问题是 Word 文档嵌套在 Word.Document.8 或 Word.Document.12 目录中的 OLE 二进制文件中。仅将 OLE 二进制文件重命名为 doc 或 docx 是行不通的。

这就是我编写读取二进制文件和提取文档的 Java OLE 包的原因。这行得通，但是……有一个缺点。

我必须解析 OLE 类名，如果它是 Word.Document.8，我需要编写代码手动从 word.document.8 目录中提取所有流并将它们保存为新的 .doc OLE 对象，以便 Word 正确打开它.

这对于 Office 文档来说并不难，但所有类型的东西都可以嵌入到 OLE 中，我无法涵盖所有​​可能性。

是否有可以从 OLE 二进制文件中提取嵌入对象的 C api 函数（原始文件名不重要，但扩展名很重要）？双击 OLE 对象时，Lotus 或 Word 是如何工作的？它必须以某种方式重建嵌入式文档？我想以同样的方式做:-)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T01:40:23.457

尝试自动化 Notes 以将嵌入对象复制到剪贴板，然后从剪贴板获取 CF_EMBEDDEDOBJECT 格式，这类似于将 OLE 项目拖到 Windows 资源管理器以创建废料文件的方式。

参考资料和有用的页面：

*   [“处理 Shell 数据传输方案” [msdn.microsoft.com]](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776904(v=vs.85).aspx#scrap)

[[引用历史记录](http://bit.ly/R5rVvH)]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:10:27.230

为了在 C API 中提取文件，我会看一下 NSFNoteCipherExtractFile 函数（和 NSFNoteCipherDecrypt）。如果使用 8.x 或更高版本。

# c# - 谁能推荐一种方法来检查一个类是否可以序列化为 XML？

> ID：12270573
> 
> 赞同：6
> 
> 时间：2012-09-04T20:01:46.277
> 
> 标签：c#, .net, windows-runtime

我有一个通用类，它采用 T 类型的对象，将其序列化为 XML，然后将其保存到文件系统。但是，目前如果对象不可序列化，则序列化操作将失败。这本身不是问题，但是我认为最好在我的类构造函数中检查 T 的实例是否可序列化，如果不是，则在此时而不是稍后抛出错误。

有没有一种方法可以检查 T 的实例是否可以序列化为 XML，而不是简单地实例化它并尝试在 TRY...CATCH 中对其进行序列化？如果我能以某种方式询问类 T 以发现它是否可以序列化为 XML，那就太好了。

如果有帮助，可以在此处查看代码：[http ://winrtstoragehelper.codeplex.com/SourceControl/changeset/view/ac24e6e923cd#WinRtUtility%2fWinRtUtility%2fObjectStorageHelper.cs](http://winrtstoragehelper.codeplex.com/SourceControl/changeset/view/ac24e6e923cd#WinRtUtility%2fWinRtUtility%2fObjectStorageHelper.cs)

请注意，此代码是针对 WinRT 编译的（即，它用于 Windows 8 应用程序）但是我认为这个问题与 C# 的任何方言有关。

提前致谢

杰米

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T20:06:42.977

AFAIK，即使您检查各种属性（`Serializable`, `DataContract`）或检查`Type.IsSerializable`（我认为这只是检查`Serializable`属性存在的一种方便方法），它也不能保证实现实际上*是可*序列化的。*（编辑：如前所述，并在问题中提供的示例代码中看到，`XmlSerializer`不依赖于`Serializable`属性装饰。因此检查这些标志是没有意义的。）*

根据我的经验，最好的办法是使用单元测试来验证应用程序中使用的各种类型，并使用 try/catch 来查看它是否通过/失败。在运行时，使用 try/catch（而不是每次都预先检查）并记录/处理异常。

如果您有一个作为单元测试结果的有效兼容类型列表，您可以根据您之前从测试中确定的编译时列表进行预检查，`T`并假设任何其他类型都不好。可能想要注意已知有效类型的子类，即使它们继承自有效的可序列化类型，它们的实现也可能不是。

编辑：由于这是针对 Windows Phone 8 的，虽然我没有使用该平台的经验，但我使用过 Silverlight。在这种情况下，您可以序列化对象，即使它们没有被标记为`[Serializable]`（事实上，它甚至在 Silverlight 中都不存在）。`XmlSerializer`无论装饰如何，内置仅适用于所有公共属性。查看它是否可序列化的唯一方法是尝试序列化并尝试/捕获故障，或者编写算法来检查每个属性（并通过子对象递归）并检查每种类型是否可以序列化。

EDITx2：看看你的`ObjectStorageHelper`，我建议你简单地尝试序列化并捕捉任何失败。您不一定要直接冒泡异常。您可以使用自己的自定义异常进行包装，或者返回一个结果对象，通知 API 使用者序列化的通过/失败以及它可能失败的原因。最好*假设*调用者使用的是有效对象，而不是每次都进行昂贵的检查。

EDITx3：由于您在保存方法中做了很多其他工作，我建议您像这样重写您的代码：

```
public async Task SaveAsync(T Obj)
{
    if (Obj == null)
        throw new ArgumentNullException("Obj");

    StorageFile file = null;
    StorageFolder folder = GetFolder(storageType);
    file = await folder.CreateFileAsync(FileName(Obj), CreationCollisionOption.ReplaceExisting);

    IRandomAccessStream writeStream = await file.OpenAsync(FileAccessMode.ReadWrite);
    using (Stream outStream = Task.Run(() => writeStream.AsStreamForWrite()).Result)
    {
        try
        {
            serializer.Serialize(outStream, Obj);
        }
        catch (InvalidOperationException ex)
        {
            throw new TypeNotSerializableException(typeof(T), ex);
        }

        await outStream.FlushAsync();
    }
} 
```

*通过这种方式，您可以专门*捕获序列化问题，并且可以非常清楚地向 API 使用者报告他们提供了无效/不可序列化的对象。这样，如果您在 I/O 部分中抛出异常，那么问题出在哪里就更清楚了。实际上，您可能希望将序列化/反序列化方面分离到它们自己的离散方法/类中，以便您可以输入其他序列化程序（或者从堆栈跟踪中更清楚问题所在，或者只是让您的方法做一个一件事和一件事）但是无论如何，任何更多的重写/重构实际上都留给代码审查，并且对于手头的问题没有多大意义。

仅供参考，我还为您的输入对象设置了一个空值检查，因为如果用户传递空值，他们会认为保存成功，而实际上*没有**发生任何事情*，并且他们可能希望稍后可以加载一个值*存在*。如果您想允许空值作为有效值，则不要~~为检查~~引发错误而烦恼。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T20:13:22.357

这取决于“可以序列化”是什么意思。任何类都可以用`XmlSerializer`. 如果您所说的可以序列化是没有错误发生，那么您必须尝试捕获异常才能确定。

# javascript - Windows中的谷歌字体是锯齿状的

> ID：12270575
> 
> 赞同：0
> 
> 时间：2012-09-04T20:01:55.570
> 
> 标签：javascript, html, css, fonts

我看过很多关于这方面的帖子，但人们已经写到它只是在 Windows Chrome 中呈现不正确。就我而言，它是大多数浏览器，包括 IE。Cleartype 默认情况下是打开的，所以这不是问题。

我不敢相信 Windows 不能正确处理 Google 字体。也许，那里的某个人可能有一个可行的解决方案或一个合理的后备方案。

仅将 Arial 用于 Windows 机器是否明智？是否有检测操作系统类型的脚本，如果有，我应该实现它吗？我知道我应该只选择一种基本字体，但我还不如取悦 OSX 人群？

编辑：

我应该补充一点，我正在使用 News Cycle。在 18px 及以下的 Google 字体网站上，它甚至看起来有点糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:05:44.480

我不知道锯齿状渲染问题，但对于回退，您可以使用`navigator.userAgent`JavaScript 中的属性检测操作系统。

Windows 用户代理包含 substring `NT x.y`，例如`NT 6.1`用于 Windows 7。

**编辑：**您也可以使用该`navigator.appVersion`属性。这是一个示例：

```
if(navigator.appVersion.indexOf("Win") != -1)
    OS = "Windows";
if(navigator.appVersion.indexOf("Mac") != -1)
    OS = "MacOS";
if(navigator.appVersion.indexOf("X11") != -1)
    OS = "Unix";
if(navigator.appVersion.indexOf("Linux") != -1)
    OS = "Linux";

if(OS == "Windows") {
    //add specific styles
} 
```

要自动化该过程，您可以使用[CSS User Agent](http://cssuseragent.org/)，它根据操作系统向元素添加类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:11:51.347

明智地选择字体并始终进行测试。谷歌字体是一个了不起的资源，但并非每种字体都能在所有浏览器/平台上正确显示甚至清晰可见。

编辑：谷歌上有很多关于字体的资源。您需要研究“字体堆栈”，这将为您选择后备字体提供一些启示。恕我直言，在这种情况下，我真的不认为用户代理嗅探是必要的......

这是一篇很好的文章，虽然有点旧： [http ://coding.smashingmagazine.com/2009/09/22/complete-guide-to-css-font-stacks/](http://coding.smashingmagazine.com/2009/09/22/complete-guide-to-css-font-stacks/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T20:28:18.707

我只在 Windows 上的 Chrome 中遇到过问题。以前的解决方法是添加不可见的文本阴影或稍微旋转文本，但从版本 16 开始就停止工作了。我发现有时以下 CSS 属性可以帮助处理某些字体：

```
-webkit-text-stroke-width: .5px; 
```

# r - 在 R 的 lme 循环中跳过错误警告

> ID：12270578
> 
> 赞同：2
> 
> 时间：2012-09-04T19:55:21.627
> 
> 标签：r

我正在尝试自动化我的 R 脚本以执行包含大量分析的循环，目前我已经搁浅了让它在失败的 CI 测试期间给我一个警告并继续下一个响应变量。我已经分别尝试过“tryCatch”和“try”。有人可以告诉我我做错了什么以及如何修改它吗？这可能是一些愚蠢的事情，但我花了数周时间试图解决它。如果我概括下面的代码，它会变得混乱，所以我将其保留为原始形式。

这就是我所拥有的，这里是相关的错误 -

```
int <- try(intervals(tmpLme))
if (inherits(int, "try-error"))
    lme(tmp ~ I(log10(Body.mass..kg.)), random = ~1 | Species / CatNumber,
        data=felids, na.action=na.omit )

lower <- dim(int$fixed)[1] 
upper <- dim(int$fixed)[1] 
felidCIlower <- append(felidCIlower, int$fixed[,1],lower) 
felidCIupper <- append(felidCIupper, int$fixed[,3],upper) 
```

这是我想跳过的错误，但请注意：

```
Error in intervals.lme(tmpLme) : 
  Cannot get confidence intervals on var-cov components: Non-positive
  definite approximate variance-covariance 
```

这是我不想要的错误 - 它表明我跳过上述错误的尝试不起作用：

```
Error in int$fixed : $ operator is invalid for atomic vectors 
```

然后就是这个尝试

```
int.model <- function(tmpLme)
int <- tryCatch(intervals(tmpLme), error=function(e) NULL ) 
```

-或者-

```
int <- tryCatch(intervals(tmpLme),
                error=function(e) lme(tmp ~ I(log10(Body.mass..kg.)),
                                      random = ~1 | Species / CatNumber,
                                      data=felids,na.action=na.omit ))
lower <- dim(int$fixed)[1] 
upper <- dim(int$fixed)[1] 
felidCIlower <- append(felidCIlower, int$fixed[,1], lower) 
felidCIupper <- append(felidCIupper, int$fixed[,3], upper)  

Error in !after : invalid argument type 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:06:27.740

第一段代码中的错误是，如果`int`确实从 class 继承`"try-error"`，则适合**但**丢弃`lme()`适合。您是否打算分配它然后调用`intervals()`它并将其分配给无论如何包含模型术语间隔`int`？`int`

如果是这样，第一个代码块应该是：

```
int <- try(intervals(tmpLme))
if (inherits(int, "try-error")) {
    tmpLme2 <- lme(tmp ~ log10(Body.mass..kg.), random = ~1 | Species/CatNumber,
                   data=felids, na.action=na.omit)
    int <- intervals(tmpLme2)
} 
```

另请注意，您不需要`I(....)`围绕`log10()`公式中的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:08:35.247

`failwith()`在包装中使用怎么样`plyr`？

```
library(plyr)
# Change the NULL to whatever you want to return in case of an error.
clean_interval <- failwith(NULL, intervals)
int <- clean_interval(tmpLme) 
```

# jquery - 如何以编程方式滚动到 jQuery DataTable 中的特定元素？

> ID：12270583
> 
> 赞同：0
> 
> 时间：2012-09-04T20:02:30.967
> 
> 标签：jquery, datatables

我有一个分页的 jQuery DataTable，我想滚动到特定的行。此行可能在另一页上。我目前正在尝试以下操作：

```
var scroller = profileTable.fnSettings().nTable.parentNode;                                              
scroller.scrollTo( $('.row_selected'), 1 ); 
```

数据表在哪里`profileTable`。

我想滚动到的行有一个`<tr class="row_selected">`.

我在 Chrome 的开发者工具中看到的 Javascript 错误是：

```
Uncaught TypeError: Object #<HTMLDivElement> has no method 'scrollTo' 
```

我也试过

```
var scroller = profileTable.fnSettings().nTable.parentNode;                                              
$(scroller).scrollTo( $('.row_selected'), 1 ); 
```

有错误：

```
Uncaught TypeError: Object [object Object]> has no method 'scrollTo' 
```

我已经尝试了[ScrollTo 插件](http://archive.plugins.jquery.com/project/ScrollTo "滚动到插件") ，但没有成功。有人在 jQuery 1.7.2 或更高版本中使用这个插件吗？

任何移动到 DataTable 中指定行的示例都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T07:15:39.963

```
while(!profileTable.find($("tr.row_selected"))[0]){
    profileTable.fnPageChange( 'next' );
}
$(".dataTables_scrollBody").scrollTop( $("tr.row_selected").offset().top - $(".dataTables_scrollBody").height() ); 
```

您必须分页才能找到具有所选行的页面，然后滚动到该页面。

# android - 如何在 Android 上运行 Ruby？

> ID：12270585
> 
> 赞同：7
> 
> 时间：2012-09-04T20:02:53.047
> 
> 标签：android, ruby

我安装了一个 Ruby 代码编辑器 (DroidEdit) 我写了一个程序，但我不知道如何在我的 Android 设备上测试它。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T02:27:49.083

您可以在 Android 设备上使用名为[**Ruboto IRB**](https://play.google.com/store/apps/details?id=org.ruboto.irb&hl=en)的应用程序编写 Ruby 代码。它也需要 Ruboto Core 插件下载。希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T20:36:23.380

看看摩托罗拉开源的[Rhodes 。](http://en.wikipedia.org/wiki/Rhodes_Framework)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T05:19:10.803

还有[Scripting Layer For Android](http://code.google.com/p/android-scripting/)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-04T20:26:57.693

您可以通过 Web 浏览器使用 ruby​​ 编译器。[http://tryruby.org/levels/1/challenges/1](http://tryruby.org/levels/1/challenges/1)

# sql - 如何按节点根据版本对日期进行分组？

> ID：12270593
> 
> 赞同：1
> 
> 时间：2012-09-04T20:03:29.040
> 
> 标签：sql, grouping

我需要获取特定软件版本的开始日期和结束日期。该表有以下数据：

```
Row ID  Node_ID  logtime                          Version  
201191  121212   11-OCT-11 12.13.48.495000000 AM  v2.0.26496.311    
470128  121212   08-DEC-11 10.45.04.696000000 AM  v2.0.26496.312  
495049  121212   23-JAN-12 06.06.09.226000000 PM  v2.0.26496.313  
630076  121212   30-APR-12 03.21.12.296000000 PM  v2.1.2344.31  
643917  121212   31-MAY-12 10.59.32.655000000 AM  v2.1.2514.31 
```

预期输出：

```
Node_ID Version         logtime_start                   logtime_end  
121212  v2.0.26496.311  11-OCT-11 12.13.48.495000000 AM 08-DEC-11 10.45.04.696000000 AM
121212  v2.0.26496.312  08-DEC-11 10.45.04.696000000 AM 23-JAN-12 06.06.09.226000000 PM
121212  v2.0.26496.313  23-JAN-12 06.06.09.226000000 PM 30-APR-12 03.21.12.296000000 PM
121212  v2.1.2344.31    30-APR-12 03.21.12.296000000 PM 31-MAY-12 10.59.32.655000000 AM
121212  v2.1.2514.31    31-MAY-12 10.59.32.655000000 AM today's date 
```

如您所见，v2.0.26496.311 使用第 1 行和第 2 行的日志时间来为我提供使用此特定版本的日期范围。

你有什么想法或方向我应该使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:31:33.673

从 audit_values 中选择 node_id、
版本、
logtime 作为 logtime_start、
nvl(LEAD(logtime, 1) OVER (ORDER BY node_id, logtime), systimestamp) 作为 logtime_end；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:22:09.350

在 SQL Server 2008+ 中，您可以执行以下操作：

```
 -- Some test data
        declare @V table(ID int identity, Node_ID int, logtime datetime, Version varchar(50));
        insert @V values(121212, '2011-OCT-11 12:13:48', 'v2.0.26496.311');
        insert @V values(121212, '08-DEC-11 10:45:04', 'v2.0.26496.312');
        insert @V values(121212, '23-JAN-12 18:06:09', 'v2.0.26496.313');
        insert @V values(121212, '30-APR-12 03:21:12', 'v2.1.2344.31');
        insert @V values(121212, '31-MAY-12 10:59:32', 'v2.1.2514.31');

        -- a temporary named result set, known as a common table expression
        with CTE (ROWID, Node_ID, [Version], logtime)
        as
        (
            select ROW_NUMBER() OVER (Order by ID), Node_ID, Version, logtime 
            from @V
        )

        select 
            a.Node_ID, 
            a.Version,
            Start = min(a.logtime),
            [End] = min(b.logtime)
        from CTE a
            left join CTE b on b.ROWID = a.ROWID + 1
        group by a.Node_ID, a.Version
        order by a.Node_ID, a.Version, min(a.logtime) desc 
```

# java - 通过 HttpGet 对象检索数据时设置超时值

> ID：12270601
> 
> 赞同：3
> 
> 时间：2012-09-04T20:04:16.697
> 
> 标签：java, http

我有一些从以前的同事那里“继承”的 Java 代码。它的一部分使用 GET 方法连接到外部 URL，并检索少量 XML 进行解析。由于供应商网站挂起并用尽了我们这边的资源，我们最近一直遇到此连接使我们的网站崩溃的问题。一个问题是当我们的代码使用 HttpGet 对象时没有设置超时。有没有办法使用这个对象微调超时，或者有没有更好的方法来拉回这个 XML？

使用其他 API 会更好吗？

```
List<NameValuePair> params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair("param1","foobar"));
URI uri = URIUtils.createURI("http", "myhost.com", -1, "mypath",
URLEncodedUtils.format(params, "UTF-8"), null);

// there is no timeout here??
HttpGet httpGet = new HttpGet(uri);
HttpClient httpClient = new DefaultHttpClient();
HttpResponse httpResponse = httpClient.execute(httpGet);
String result = IOUtils.toString(httpResponse.getEntity()
    .getContent(), "UTF-8"); 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T20:22:40.117

试试这个

```
List<NameValuePair> params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair("param1","foobar"));
URI uri = URIUtils.createURI("http", "myhost.com", -1, "mypath",
URLEncodedUtils.format(params, "UTF-8"), null);

HttpGet httpGet = new HttpGet(uri);
HttpClient httpClient = new DefaultHttpClient();
// set the connection timeout value to 30 seconds (30000 milliseconds)
final HttpParams httpParams = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParams, 30000);
httpClient = new DefaultHttpClient(httpParams);
HttpResponse httpResponse = httpClient.execute(httpGet);
String result = IOUtils.toString(httpResponse.getEntity().getContent(), "UTF-8"); 
```

来自[具有定义超时的 Java HTTP 客户端请求](https://stackoverflow.com/questions/3000214/java-http-client-request-with-defined-timeout)

# .net - WPF 4.5 父子行为是否发生了变化：我们现在可以毫无例外地将一个子代添加到另一个父代？

> ID：12270603
> 
> 赞同：12
> 
> 时间：2012-09-04T20:04:20.450
> 
> 标签：.net, wpf, .net-4.5

在 .Net 4.0 中，以下代码会抛出`InvalidOperationException`消息*“指定元素已经是另一个元素的逻辑子元素。首先断开它。”*

```
var parent = new System.Windows.Controls.ContentControl();
var child = new System.Windows.Controls.Button();

parent.Content = child;

var parent2 = new System.Windows.Controls.ContentControl();
parent2.Content = child;    // throws InvalidOperationException in .Net 4.0, not in 4.5 
```

但是，在安装了 .Net 4.5 的机器上运行此代码*不会*引发异常。这似乎会导致视觉树有一些奇怪的状态，显示为不正确的 UI。

**为什么没有例外？**该`throw`声明似乎仍然存在于 .Net 4.5`FrameworkElement.AddLogicalChild`中。什么会导致它不被抛出？

我很高兴接受行为改变是有充分理由的，我必须改变我的编码，但是，就目前而言，当显式断开 `FrameworkElement`从逻辑树被遗忘了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T14:24:43.433

有时，孩子有多个逻辑父[级是有意义的，例如在布局到布局动画](http://www.codeproject.com/Articles/24982/Conceptual-Children-A-powerful-new-concept-in-WPF)中。我猜 WPF 团队决定是时候让开发人员决定何时以及如何使用它而不是禁止它。

# php - 创建无碰撞的“随机”字符串

> ID：12270604
> 
> 赞同：2
> 
> 时间：2012-09-04T20:04:31.190
> 
> 标签：php, hash, encode

我一直在编写一些软件，它使用“随机”字符串来创建用于 URL 的确认密钥哈希。试图让最终用户看不到请求的 ID 号。一段时间以来，我一直在使用 crypt 代码：[http](http://blog.kevburnsjr.com/php-unique-hash) ://blog.kevburnsjr.com/php-unique-hash ，它使用了一些黄金素数，我正在对请求的 ID 号进行哈希处理。我的问题是，自从从 32 位服务器切换到 64 位服务器后，这个 5 个字符的哈希现在被复制了。

考虑切换到 base 36 编码，但这有可能在 100 万个条目后再次复制自身。并不是说我计划有 100 万个条目，但谁知道呢。（3 年后已经有多达 9600 个条目）。

创建“哈希”以隐藏将创建无冲突环境的请求的主要 ID 号的最佳方法是什么？

在这一点上，我不担心长度，即使它是 5 个字符，它可能会与现在的内容产生冲突。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:13:27.637

请参阅少数有用的 PHP 手册注释之一：[http](http://www.php.net/manual/en/function.uniqid.php#94959) : //www.php.net/manual/en/function.uniqid.php#94959，它生成符合 UUIDv4 的标识符。

```
function v4()
{
    return sprintf('%04x%04x-%04x-%04x-%04x-%04x%04x%04x',

      // 32 bits for "time_low"
      mt_rand(0, 0xffff), mt_rand(0, 0xffff),

      // 16 bits for "time_mid"
      mt_rand(0, 0xffff),

      // 16 bits for "time_hi_and_version",
      // four most significant bits holds version number 4
      mt_rand(0, 0x0fff) | 0x4000,

      // 16 bits, 8 bits for "clk_seq_hi_res",
      // 8 bits for "clk_seq_low",
      // two most significant bits holds zero and one for variant DCE1.1
      mt_rand(0, 0x3fff) | 0x8000,

      // 48 bits for "node"
      mt_rand(0, 0xffff), mt_rand(0, 0xffff), mt_rand(0, 0xffff)
    );
} 
```

请注意，这`mt_rand`不是很好，您可能更喜欢`openssl_random_pseudo_bytes`在它的位置使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:08:16.820

这可能是你所追求的：

```
<?php
// You should create your own salt (hand-typed), and
// ideally, it should be the same length as the hash
// (e.g. for SHA512, it should be 512 chars long).
$salt = 'hi48hO*$H84hOhe8o4hnioH$*oihnO$8hOHTO84HoihOhno$i*HOIHNOh$Oh48oh$';
for($i = 0; $i < 100; $i++) {
    $random = hash('sha512', mt_rand() . microtime() . mt_rand() . $salt);
    echo $random;
}
?> 
```

这产生了非常独特的价值。例如：

```
aee73ae66f294e26f29c8ede73eb2d44a2887251b466aff7ad8aef7cd5246fd4b3b0c5a538e684deab7304144c34a6bbd591366ea375dfad75abccc606dc2b010b0d028e41d070aa74017bbd65c4391e7b0281036aebc47da68c8802b32c9cc06d9107f2dbad7cb744852bf8fe05aa082a3e80d6d41dd52039b9eb4d9e25d347515a1a1ee3e86aa64235f86da42d5e269520b6f7e3fc2974a72e02a31d5769b91b1ce70769c9bac8fc61bb365757b220812906dc9ff4990a28dc933ab726efb17a548e89c4f0618c5b4a276ebe92b60121a2308a65fa17027bacb69feba8d6e1027ca06db3eb6609226406161e50945ca7216573b17896b585bfae34bff9835eaea694a6c411721063181e19cd82fddf3320e89d832321f6fae8a4a7ece3a864696b4b23664098e497d97fce77c61f417e29b07f808341e848783ac8a800dad8ef5ee3c947fd6a103ca173e147b4af158bd61ed66602f9cf9c598e27ad78c0c65b012d5d781fb8fcd02130f3d2775cda572c7355d3676cbd4f1e81397925bb5584a624b55356ae48c215eff055bc57686527e155d347c2cac49f82327da8f679b139c5923b5dbb6ab1817dea682d8f7d50d2e5c9715f84e77736df98a98b2c23b53603eb2ea181c38f2399fba52777fbb0efd0e993ee727e815ca37e68b5f87edd8980e2244964880366a7928526840f71808f494fb341ae9beda4bd004d64ce210480eaba8487b3533063466916b8ad673928a388b87c7e130d3e5b9e9d41b0e020bb5aa939b9066d4985ccbc4b32aeb8377e41789148a9b163d71a080b8395512609e3c0ff3937d766bc7ed456f436c64ccf08e1aa2446037d6c7a624388a87beed887f9181a2e252d478e35672b87831b452e0f470afdbdc49143f0d9a6d950fb16f4714b7e3529b3ea888491f6d394fe82c0840e01fc5c5a64c36bb194b5619112b0c7a40886545d385f8ec699aa56ef7c9bbed9afec7ca5749e7e8fd4ce61b45c423113837670639665b24d3809693ff0b6e358e65e030e277b30980accf1ecae6760f585fa5d3d473cbd24f5e976899adcadd64d24aeff9c6ca28de2af51cc9540431380eda7c435fb977e14580b8769c011aa59158993c8a04708288b399c9f3d85995a1f20103d8e83e8d4f5f4ae705c5ecf49cb1972aaa8413509d579e294687c76caef5fcbe27709de1b94e8ed278e3aa8ca1639cbd92a414bdb9023b89853698dc57ea2bbae6dd6a831877249c3bba271c8c4a53bcb986a12f7a1121d4eb713673eb756a2750c4cc50421918ad95c84536e56ea71cfa8073286e840661e1bfd2c8f26fb075f98816d056c59ca7cabe352e9df4b2dae48103c040aa9e12246ab04cf3c4e2994c25a4623350286fd616040aa6914884fdb0926e1e20a1623d65347b3751c6a0b2900f70663c8391140ae0c562f5a868040500ea3f6df0f0b94d714a93d76ac98e39f00136c3e23f1240966aaf206477c457e9aa3dfc419e8cce8adb08aa926e8d270c582c930d2ba81076149eb38b8fb417e4943da2268b23adc71dd4a782e69b3eab0dd95ef3ec6fe0683515cd120a072fa3c8d3715ada41e57da61e9bbcd660ca0705c8ae10064cbdb4b8374bba3e8998f1eb0b2ae575b3eef337b1166def6909836054546abefe63399883878d015e0e2379b257ff4e491d9bfcafb109e52de36d2867df957880af651fcc1c9eb5e3790979db546247ef640e43e6910153eeee390c8d55e34f3573f1cdc5f679972cfdf2954a3f854dda90b772db8b92329068080a05c401b4313ab890532bae94a84fac3b7d6dcceb261b04d7547a9ee7c3306e008c1c75308a73812fbc83b92777df7485f5febeac55371586e973fa7a7ee61d55a5bc3515ae2873227639f0c228da5ed903c918721f4325125d2f201b9e4fffc3cbf8b938a12c0c8fa7a231817fb8e6cbc3ab8e76fa41f75ba0c4e91b044f690d72a1cc7fcfd808b0bc7940863b793debe34910348b71d4dec5053a64938de1c6b156a9ed11fe288239d5d84acb23822b092285e6b2f55b5e7b52f146715f87e0f971ad87cd1e296df6410ba8b350849837e91b2d2ec72af19ed3b0456959e4ed8db126399d014b54e6a409801a74fa52e46b0fc50620152a057082f9ef5c16e4fe8ea71f051307946d661ab9a99b94ead55a8129d40a872a2f0935d163035033997b3a65fcb5e66a0b8765c6cbff31726951503fcaa447d06713a8d3bc80fba323b215219f637636359377f2047840832d39880f1663e2aac98efdc14ef71b057241b15a88d7bbec133a26eb1d481f47b7c87b94f5d53827f8e1a9db13b9cba1cfd24a00f5897aa930f6fde2e016b8b3489da447afcb4401b036f9e046c57998be5b221c355f58a76fa8d46ab87b45f120138c51356f3fac0ecb724dc1ae72c2fbaf868c09922100a9a41a44b8fdb770a4ac7fa9fe8dacf1ff448db7a75ee0b8405fea768f3bea72cb75e813d3ef462db6784c565935d7ee546858dd1eb0f53b2fb14a543eab9113edfc9723108e9a0807bc2fe2ad3cdbb3786cfab9b0efa9ec2c65ef9cb01332a630c02ef4d13ed740fde7395cfd25f0e6430526247a422d63d0c9507528542cb611ed9d75793cab15c8441942cf1084673ea9e18b9a94728febae96c7a189c009bb8a7e6cb22e597723591c885cd9dfb65efe88268ba5ba1adea9c2f657bffe8808709279659e394b73b163778dc33233a9abe501d310e67b3fb33b95cc9b7bbafd6824631ea3462de1bbaf94d4af863c789461937228a2ec49c69dfac9efb9a063164b961946cbbed8ff9a9a3e49637a424c8f444179f028f39fb239b999075f0815519539d3ce101c6e3c38dfaac5ce570c5dec49f9e72bf6cd6c0c0002c04a7f1ceb92afff309a4b040c2e55e06f099a474e928cd8f97dd88538b58f07e5ab89a33b96325438834f1a21e54f5564bfd793acdd995872738e7c0eeefd70f925557d4d1718cfc968874fc0f3768ac0bf63a0634ba219942bb33d83e5053d8de3642852dfa15eca8896738a5d26f1978716af79158abeda54fa709a866acd31f4a049fa01f93774533ecb0989b9193ab4cdd180e6fd5ca255a395a714fa076cc912c424922dfb29fb2683e5248a6d714a36e7dfc528747dab611957501b55aaeaab0699efa262eddd554847da17631428be78600cac3c522eac43a4543b91737f23534c03d52054ee753ed6bbd50afe7a81ea2fbd3f53c3cee21b64d95b4698c16ec46f02b75425166e3a8e5f0744c84b0e47689babaf019f3e21eb763e5e7f3138943cf92a0f8557b39b592efe8eb917fb37dada3bf7cea20e54752688eb13e7ce5fe00ee25f5d436c92b414856d866d5b3b29cea35a30409744d84844730ee19fba10e9f1f2c26ca70b62312294357117cf5901643d79d726e9d2e7203a6cb6680073c6a7a579e99a9041388bab80e1efb503abbb7decabb6945024c63ebafcbf2fffe61fd4651c28bd7d6db6449a592e5d384312fd7caa0596a4bb63ecd3768c116be7c3467afafdc570eae6a6611b7387aa53c77311a149a700e09cd5e5bbc08b284f73521b75eef217694698c4e38992bbb2bfc887bd2d93ee479d638868aa8492ef08a66c0401152905eb70248b7d33731fb641e5dfc1ad5acb66fb68d9fc024d18ff49737a79385e4a10a5cfbce2e315c97f7a77300adaa395f7d1c9969926ca371bceb0ed0b11bdd4163a24d8db55ebcebe65617b9404d42ef669d6b1f47bac0d94cd5c716d52aa41697e4de24beacdeb97422f1f7fe24a976358564c9e0cae4b074cd75c082daf61514ddaa103450f27c4c7eac2f57532eec911a2e052b8bf0756f58da903a3bee80a425b8d93d3dfbb16cb9a1b65afbd30eaa1da03e6cdee7a9dd640ffb965054ccac4ebc842948080fd318f9b98d62a672bdbc9550a4d4d27cf69caaf0d3be0a78ebd18b574b0f2f101af768526e534f5b7d7d71fef6a4b6d6bd5b13eb60f21c233753c5f514d3fed51eb8ebc5ad7c2c0a2ee8f90af08e4731989a712564e11046bc12403b90cd95a40cac3cd9c458ee82b0aa3a18c8c3009a59b3f88be43bb65b6d5d27cbf5839564c898333f3ed95f849ba1e8db87701ad0999a36ab3538352cddbc8b499bb298e03acb950b7a982209287110866979e2df1850be5230c4ad895e632eda3cfa5912ee4f9c397fb008a75ec480785240dd27516a25a63d47983f2241aa293d170faa8123032b8cc0617deb676bf70df6006ada2e4fe2ed3e98f8f7273037caa1c103c98a221491cd1716ae0e1b6aea4282aedc1db1a9c739fd3fb7799a4c0e494d100af82290e63c69dbe7b5d9c65c0d84c797bf3a2f24a5f077340ffe78e933cad168ff5a39684e49dee501812e85956e39e1212e11086518b79df4d28a585519c423005cd55430b059b1fd06532b7c5d7ed16603046c8541a1446941e70396597e31db65cec2c2152e8afdd9e3afed6b25506b47cbdab03e06d33252810dcfafcf0159e1232d890d593343ad57beb657ef7997142f9790c9944f0afa9284df278fb8f2a9fe744ee0b2cc93af3f9ba5a2dfda0516533da6dd158c1cefe9e11940070d1bc5d34c6786d702a0d26f613359d2559547dcbf698833377112a4a30086c238f5bbf893af98a36477de955e8bf30a1c8c5b860d3a92f3a05638360fceef5f824d5037270220d16674920cee34c63800911f9d184db7165ae22c060e8b5c9d0abcee2f11af43052c637ce57ef6a23bb84e5153ece3f1b9bb9d82797a1f0bd15468e6ed3845907592ad4fbc2a4326ffcaf5cdba11b5eec186cda1647efcde4f90c54c2c299506af58a4235e0294d906c3b10ff0c7b599c6bfe1347d123bc2e8d7a4810bbc507645c33df534c7a98ad767972b20a29074264949d78dac9709384b6122e87b8705ac0aba78c0c0d1dbfb1fc8561486dd239546f8677f7ff55d69242a2d9789681766c2f485f2355049ba14acbaf6909e2112c4c7eef4100999290c68931988d760f8465f38c3fe1eb2af4a3eac1deab3229d0301bd5bcfbae1f6e0aad799932b9590d3042932c029a2f65540d871d8b85566aeb0a5efae6e69c8228aa541e1b712a14792bb91c46040afb7206e5355e7b2c8b2986298a36a16626ecd19b209296ce9e4e5a62f1ac9050590154c148471e74285ab8f756e798f405d17494ce526f3fa1b5099c90e09337beac3ff04fe3223c2e648853fb0157be508813ca1e209f45fa3801363a808181e5d3bc7460afec6c9be202a2bc67ae68b764381c1a5f375917e84d7b74db2a09c3011de14565a0adf30fdaac12947b84c7701b61c956142e512daeeb37cf3d5441ea4b1935b797b21e7e492942925cfcdc5012964e4d12a2f409f9d9eaf56d938450239aff5a5c886ef6c78707579727586a05166ef24de601f8cd1c6ff4fad9e2d5c4579feaba9ada14ac79c103e4da3b22c12e789aebdc3e9ce6480b31965ded0c8ac5383c179924b9f8f08d4dae30378d802b9ed13f14917d34632b10d9995c3098fa916c3d33b6e89011f0364f426bf2351733b1dda53f86329fc23a453e06cace4e044fd6de65023a79fe1504c55ee3f12b5a833197b19b38723b5aeb0da7da6a23aedd8ee335c4f533ee7555f044a30c80db732d77cb63892c524b5bf5b204ed8ba3dda8edb64a2f233d05770e7e00eb4d5da904ccb48802aa52f5b9db60c68c271ab3b7e771d4b5c8fe2b0c6e4cee957b986dff1df893c5a609f93f9167d97653e429eb751e1ecb55dce0ce24fdea7ceda8bbbee4669d917823436d4e9ac945434693ba5ff1e9505ea679a275ebe589dfba67e351b1e47d0c4cf9d0cf9ebff561d9d4fa9ef474ab52d8242b4bbf10d39842ac076b13e39666c17974cde543b5db161672dfd3e256a312e51f1e18bebae09bcf8338b8858eda6d898be718a8ef29da758977216a31701a0954672554b43b566feab52ccb1fa0f5baab1cfb054e7330c56a62d7d01568fa4efac640b441d602a5803718f8a39b01f085e2cdbe2cbf88ee102125919d31598ed44b434af6ab4e7fb61d45eba54c610d7b00b098e0cad71855f0147c721b7c1d3583d2f162c2e6df7ac788334215fff2e530376251c2c14c3047cc079c0f9155e88abc1b8c1c847eed1f0c9a80fbfe573fd32ff656a423d91c9cea72582dd3ee0de8b65edb956fbb824885c2b56fe89d761f3d3fd630223b6d4ffe1b76cd3abf681054b20e2e57613e6d3776e33bc508392a6c6671b432e857bad09d4dd769d4ca257a94b99105b684d8e1bc409be36d83da245f6b9b53bd1afb06186b148cc0eeef05bbc8d725769855b098af4b4e5232facd4afe98dd8f6d21b08fe56ec2a20fb421609d8ab694dbe685fc439ff9a7470337cf8213db5d5a86f5c42a129666b3f7c67c9832afcfc6921018cea2baa28948e175962a02168381f5199ee7d982578f1a35ed87c00dde00a7de085d22add775a8968a99853dc25a819602b745a154472c794d6284a1a0d999be245a6ab188885ff8e806be393ae2612e96ae71cd1f07d098b292751885d40c55faebb572b2c8da5c9a0fda9256d9dcce6c3eaabb0df117bfd8089ac114b0c9375ca5aa83de2f06a2d331fdc7750ed9b7654c554c21368ab1686289d4234352203089a1b5283f4544620897e7c27a229eebc8eb933899eee8a504f71c1640c7b4e92b05210ce73e79463a13942252c101252992b7b367fa8367edd472b0f5632ad16f7bb016d214029b05fb66f02e088b7fc823b0a87ff20dbd02365dd46189a70b04dd741cd0821db002cea8a34ca85fc5fa6ae47768c1e97e237d5d95f3f2e61fef6816aec87636bab8537604aeea352d822401070f4e94d3de3cb23ed8feb6cdc3e29e60ce06726c684a6f81f4e91d396317416b134e095cd5d83492f56a5b76400079942b9b8da7c93ee102a2add13426df07adaf863dba483896ae47a84817ecc8048e11491671cd9344ff40bc07169430cdb22b7d02f10bedd30dbd0fc7eabbc62255e9f252edd0c81bf47f646a38ae941b16af6cacd6d678d956c22bf3fb45b0ea37e6caf76723a13888e3019452d77b9665cd31c4b0298b5c995e5dd5a11c2807aba07ca440bc7c79f1e16920dbd9b209a19a629989ca9d799b4c087743299afba3142246c2bf52e8786618c67c3ced85cd207db230cfb754bfe9f6b95c0ad23394207d9ed4fc965339fd222a12654ba75a79ba1f242782a936afd9ad64897e201d375f0d41708e8c4e73d8bf8d0673e177f8ca7660305a9e4d288a80f0cb8e37469d27f7048aa5421d37af8603a029a4d63de0058f0d3a7e20f343a02d8d931d2cbccb487881ab174f31587fbfb59203669fb5822085c65e4104380ac60058ae7753728c0f6ed15244f170a9095173c560dc14cfc87130ffc91f504513a89aa8339ee69c67b19324a17927da212f058dae3c71d31b7d5bd98f60fced74167ed9fcfafbb9d50af9d251b941a60e2738791d2352143c4e91568b1b79539d1280e4d51ea7d20ad7bd79389c8368706c958b63e663ec79ae36d046f9787eb01e1e7aff28f19583556ca18f9bfaf4d5555f35dd3f9aabd029a58314c858deddf9f44929063a64a69cc2b6eb137e53aa81ad34f8bbc39596adb04c1b81284755a935e66867c4e04ec27b444cfd260a70d322498d7415c920bb9bf86af463c7e4fb63581ef8040438baf6396048c9aace50553d88be9c39d6dbb3f00ec6c5b2ab046374071cd77a11d9cdd627e4a5c93cf69a5b127934fe72a7850c07a69fc58d7d2b2702a7c294e00eaf412a25723e2af0b219d03a36a03ab103fb993f7785ca83328189c73ca0ab6a91b95fab8011c9b09c196f158c0067032e36beac5b4a699536a9b9ede57c40cd1d53ac53025a6d2105727cf4c48b1cdd7704730ded0d08f1ff89c13975a644d93440bc07aa7d1743569a0c5e72e6de713396fef2767e240583370498ef75152dd449852424cda852d1a3309291bfbd27466a781c7b7ce538d14e9b0a5c610f9dc7eadee137c4c3f5324d6cef230942a55cad1bc51fc6fc742cd15c6dab94d33a34b5b95e1001add22f8eb9aadb305f472d8c84785e06bcfc5dad05e53370b9035c861b9874936c22cb59b9aaf8d53f5f9a3e9c9d047463e792732192700ae9b4f2279c023ad3daaaf88c6178b13676bdb48e7cd214ba559d3b62e8263b1ebf980af0a919724bf62eb59b51c53b7c2d952fea5519b3d7058f6a3e5d276bb43a6f109d377825081b6982fc24f7acbb1e21e411e89e0f8c0e305b975524ff3b9459843bfdd22da500977176c6810e8d404f103fe6fb2f877df52b9428675862e65f78463e22745055a809c445ffcaf8ee4db70b3c2c59bb249a7102f3db075cb9ebb1a2a62fc77c6654e730efe4d04b8a8eedb0ae04b790511847ad6a9546a729598f853cfe08110b8993ed1c587867ca45c8a0a99517631b38c05c2c49b8a16bba958ecffb4d5aa9aa69d9644e5b8e427b5059eab5a66b21e4cb38036d9ee85488e354f5b462d20960594459daa2041fb2579f5f551afa14129213d03b66864b5102690d98686ea33bec9fac91c56b90ce3962877a45bf477bea100e0f0df655794cdb59e452e3cd30fb82ae4eb9127946a96e00e6a164b4d94fef2e570f7f3af2bcc1630436270e58b78b050c749c22086b70666ad621b325d2b0ddc4e0efc06914028c57678e99fbb400ff56baeb474005f9b7302bb2f231239d72cc55028dee64148916b17b9dc0376da7cd5c811aa5ee411a4bdc8ce721aa5d13d65265998723eefd26c4e32564f4cbeda3ed0f97c2f701f8e5c1bbe5b7d476cf8d0d5473c960094e91e324c583f7c2555c13c24ce60c599f815b3eb5d96af2e67cd9f56a6874f4a7b9b394a65e05ce96a29071d1c9ff0b7fb9c25cf7225a92b86139ce17360c99545b46cc3bd083e92c81644b5d50eb55ba2767c8174bacdf6995d53d6963f9d6d88ab43e8e441954cf586d9a7b706bf150d42fcc06b103040a4babaa85f2fa9ae1e8e773a0582c636cf3544fd1bdfd1ce5fdf2a818be513f0d878026c0163c2 
```

**[我在这里做了一个例子。](http://codepad.org/YFsQ0Bop)**

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-04T20:06:46.177

我用这个：

```
define('SALT', '@my#secret');
$hash = MD5( SALT . Uniqid() ); 
```

# sql - Groovy SQL 错误 - 此结果集已关闭

> ID：12270605
> 
> 赞同：2
> 
> 时间：2012-09-04T20:04:38.177
> 
> 标签：sql, postgresql, groovy

我正在使用 Groovy 的 Sql 对象对 postgres 数据库执行查询。查询执行如下：

```
List<Map> results = sql.rows("select * from my_table")
List<Map> result2= sql.rows("select * from my_second_table") 
```

我有一个 groovy 方法，它执行两个查询，然后进行一些处理以遍历数据以制作不同的数据集，但是，在某些情况下，我收到 postgres 异常`"This ResultSet is closed"`错误。

经过搜索，我最初认为这可能与这里的问题有关：[SQLException: This ResultSet is closed](https://stackoverflow.com/questions/10118129/sqlexception-this-resultset-is-closed) (running multiple queries and trying to access the data from the resultsets after the fact) - 但是，我们似乎只得到了异常相当高的负载 - 这表明它不像第一个数据集在执行第二个查询时关闭那样简单，就好像我希望它始终如一地发生的情况一样。

任何人都可以阐明 Groovy 的 Sql 对象如何处理这些情况或提出可能出现的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T03:18:05.440

Groovy SQL 有点像一只奇怪的猫。易于用于简单的东西。如果你有更复杂的场景，你可能最好使用其他东西。恕我直言

我首先建议执行一个查询，将结果存储到一个集合中，执行第二个查询并将结果存储在一个集合中，然后在两个集合而不是结果集之间进行操作。如果您的数据太大，请在开始进行聚合或其他操作之前找到某种方法在本地存储数据。

如果您不喜欢这样，您可能需要查看 GDK 源代码以更好地了解与结果集等相关的 Sql.getInstance() 做了什么。然后您可以回避您无意中踩到的任何地雷.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-07T14:10:58.577

也许

```
List<Map> results = sql.rows("select * from my_table")
List<Map> result2= sql.rows("select * from my_second_table") 
```

即使在纯 Java 中也不起作用（正如您在第二次调用时提供的答案中已经说过的那样，必须释放前一次调用期间专用的所有资源）。正如[@Todd W Crone 提到的，](https://stackoverflow.com/a/12505644/4672928) Groovy 可以优化资源，例如动态释放它们或根据特定运行不释放它们。

实际上我只尝试了一个查询。例如，我尝试获取`ResultSet`然后遍历它，就像这样（不要介意表和字段的名称，查询相当简单；结果是由于`LIMIT 1`子句而包含一列的一行）：

```
def resultSet = sql.executeQuery("SELECT age FROM person WHERE id = 12345 LIMIT 1")
resultSet.next() 
```

并得到**此 ResultSet 已关闭**错误。似乎 Groovy 优化了资源并`ResultSet`立即关闭。我没有查看 Groovy SDK 的源代码。我发现[eachRow](http://docs.groovy-lang.org/latest/html/api/groovy/sql/Sql.html#eachRow(groovy.lang.GString,%20groovy.lang.Closure))和其他带有闭包式处理程序的方法工作正常，并且不会抛出**This ResultSet is closed**错误。

也许，带有闭包式处理程序的方法可以帮助您。例如，查看[文章中的 except ，其中 rows() 方法使用了闭包](http://mrhaki.blogspot.com.by/2011/09/groovy-goodness-access.html)：

```
String query = 'select id as identifier, name as langName from languages'
def rows = db.rows(query, { meta ->
    assert meta.tableName == 'languages'
    assert meta.columnCount == 2
    // ...
}) 
```

# javascript - 监听特定端口时接收广播数据包

> ID：12270606
> 
> 赞同：6
> 
> 时间：2012-09-04T20:04:39.933
> 
> 标签：javascript, node.js, networking, udp, broadcast

当通过设置套接字`dgram.createSocket('udp4');`而不将其绑定到特定端口时，我确实收到了发送到 255.255.255.255 的广播数据包但是当我将同一个套接字绑定到我的接口的特定 IP 时，我`this.server.bind(67, host);`将不会收到这些广播数据包。这是正常行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T00:33:37.450

java.net.DatagramSocket的[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/net/DatagramSocket.html)说：

> 为了接收广播数据包，应将 DatagramSocket 绑定到通配符地址。在一些实现中，当 DatagramSocket 绑定到更具体的地址时，也可以接收广播包。

这非常清楚地表明该行为是依赖于平台的，因此 Javascript 套接字将以同样的方式受到影响。

根据我的测试，Windows Vista 64 的行为不像第二句中描述的那样（即不接收广播，除非绑定到 INADDR_ANY）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T03:23:41.843

是的，这是预期的行为，因为没有端口或接口， dgram.createSocket() 将：

> > 绑定到随机端口上的“所有接口”地址（它对 udp4 和 udp6 套接字都做了正确的事情）。
> 
> -- 来自nodejs.org 上的[dgram API 文档](http://nodejs.org/api/dgram.html#dgram_dgram_createsocket_type_callback)

它允许您将广播数据包捕获到任何可用接口上的任何端口。

向 createSocket() 证明接口和端口将限制您仅捕获已广播到绑定到指定端口上的指定接口的网络的数据包。

您应该注意，要接收到特定接口的广播，需要将它们发送到该接口所服务的网络上/用于该网络的广播地址。

因此，如果您的网络是：

```
10.1.1.0 
```

使用以下网络掩码：

```
255.255.255.252 
```

这也是：

```
10.1.1.0/29 (CIDR notation) 
```

正确的广播地址是：

```
10.1.1.7 
```

给定您的网络地址和网络掩码，tuxgraphics.org 的“[网络和 IP 地址计算器](http://tuxgraphics.org/toolbox/network_address_calculator_add.html)”是一个工具，您可以使用它来识别特定网络的正确广播地址。

# entity-framework - 数据库优先和代码优先的asp mvc混合

> ID：12270609
> 
> 赞同：0
> 
> 时间：2012-09-04T20:04:55.640
> 
> 标签：entity-framework

我有一个只有一张表的现有数据库。该表最重要的列是用户名和密码，在我的 asp mvc 项目中，我有一个模型，其中包含与特定用户相关的互补字段。我是这项技术的新手，所以我们开始吧。

第一个问题：从服务器资源管理器（Visual Studio 的左侧）添加到 sqlserver 的连接与将 .mdf 文件添加到 App_Data 是否相同。我在一些教程中都看到过，只是只有前者对我有用，而且它不会将该`<add .. />`行附加到我的 Web.config 文件中，后一种方法会抛出一个“拒绝访问”框。

你能用模型做一张桌子吗？它是否为空都没有关系，或者您必须从 sql-studio 创建。这是针对我已经编码的模型，我希望它最终与另一个表在同一个数据库中。

我想将模型映射到表，如果有一种直接的方法可以使用硬编码的配置行来做到这一点（我已经完成了与设计师一起做的 tutos），我认为这是获取此代码的更理智的方法-first-db-first 完成。

ASP MVC 3、Visual Studio 2010 专业版、Sql Server 2008 r2 Express

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:22:53.113

我不是 100% 确定这就是你要找的东西，但你为什么不只使用[实体框架电动工具](http://blogs.msdn.com/b/adonet/archive/2012/04/09/ef-power-tools-beta-2-available.aspx)并从现有数据库中对代码优先模型进行逆向工程，从那时起你就可以把所有事情都当作你正在做的事情先上代码。

另请查看此[链接](http://romiller.com/2012/05/09/customizing-reverse-engineer-code-first-in-the-ef-power-tools/)

# php - PHP/MySQLI 多重搜索

> ID：12270611
> 
> 赞同：0
> 
> 时间：2012-09-04T20:05:05.910
> 
> 标签：php, search, mysqli

我一直在尝试启动并运行 php/mysqli 简单搜索，但我似乎无法让它工作。我一直在遵循我在较早的问题（[Link](https://stackoverflow.com/a/6036084/1503704)）中找到的一些指示，但它仍然无法正常工作。

```
$sql = 'SELECT product_title FROM product ';
$where = array();
$values = array();
$types = '';

if (isset($_GET['searchText']) and $_GET['searchText'] != '') {
    $where[] = 'WHERE product_title = ?';
    $values['titel'] = $_GET['searchText'];
    $types .= 's';
}

if (isset($_GET['searchCategorySelect']) and $_GET['searchCategorySelect'] != '') {
    $where[] = 'WHERE product_categoryid = ?';
    $values['category'] = $_GET['searchCategorySelect'];
    $types .= 's';
}

$sql .= implode(' AND ',$where);
$values = array_unshift($values, $types);

$search_stmt = $mysqli->prepare($sql);
$search_stmt->bind_param($values);
$search_stmt->execute(); 
```

这会导致此错误消息：“mysqli_stmt::bind_param() in... 的参数计数错误”

一些建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:08:44.540

> mysqli_stmt::bind_param 至少需要 2 个参数，但您传递的是一个

句法：

```
bool PDOStatement::bindParam ( mixed $parameter , mixed &$variable [, int $data_type = PDO::PARAM_STR [, int $length [, mixed $driver_options ]]] ) 
```

在哪里

> **参数：**参数标识符。对于使用命名占位符的准备好的语句，这将是一个形式为 :name 的参数名称。对于使用问号占位符的预处理语句，这将是参数的 1 索引位置。
> 
> **变量：**要绑定到 SQL 语句参数的 PHP 变量的名称。
> 
> **data_type：**使用 PDO::PARAM_* 常量的参数的显式数据类型。要从存储过程返回 INOUT 参数，请使用按位 OR 运算符设置 data_type 参数的 PDO::PARAM_INPUT_OUTPUT 位。
> 
> **长度：**数据类型的长度。要指示参数是存储过程中的 OUT 参数，您必须显式设置长度。

你也可以这样做：

```
$values = array_unshift($values, $types);
call_user_func_array (array ($search_stmt, 'bind_param'), $values);         
$search_stmte->execute(); 
```

# django - 在 django-crispy 按钮名称中使用 django 模板变量

> ID：12270623
> 
> 赞同：2
> 
> 时间：2012-09-04T20:06:25.153
> 
> 标签：django, django-forms, django-templates, django-crispy-forms

我正在使用 django-crispy-forms 生成与 Bootstrap 兼容的表单。对于表单提交，我的 forms.py 中有以下代码：

```
FormActions(
    Submit('convert', 'Save changes', css_class="btn-primary"),
    HTML(' | '),
    Submit('cancel', 'Cancel'),
) 
```

我宁愿利用从我的视图传递的模板变量 {{ function }}，而不是阅读“保存更改”的提交文本。有时，此变量显示为“编辑任务”。有时它会显示“创建任务”。

有没有办法在按钮的文本中包含模板变量？我尝试了以下方法：

```
FormActions(
    Submit('convert', 
        HTML(""" {{ function }} """),
        css_class="btn-primary"),
    HTML(' | '),
    Submit('cancel', 'Cancel'),
) 
```

但按钮输出显示：

```
<crispy_forms.layout.HTML object at 0x0331C970> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:47:05.410

不，目前不支持此功能。我计划在他的周末从事这个项目，我会看看这个。

**更新 2012/9/16**

从**1.2.0**版开始，您可以执行以下操作：

```
Submit("button.name", '{{ context_var }}') 
```

# ios - 如何在应用启动时将 UITextField 设置为默认输入字段

> ID：12270626
> 
> 赞同：1
> 
> 时间：2012-09-04T20:06:31.510
> 
> 标签：ios, cursor, uitextfield, default

我正在一个视图上编写一个带有键盘和两个 TextField 的 iPhone 应用程序。用户在每个文本字段中键入。因为我想使用屏幕键盘，所以在选择每个 TextField 时我禁用了键盘启动。（我使用了这个线程中建议的方法：

> [禁用 UITextField 键盘？](https://stackoverflow.com/questions/5615806/disable-uitextfield-keyboard)

到目前为止，除了光标不会在两个 TextField 中的任何一个中闪烁之外，直到它们被选中。如果我只是开始输入而不选择，则第一个文本字段将被填充。没关系，但我想将光标设置在该字段中闪烁，以便通知用户输入将进入的位置，除非他们选择其他字段。

我没有以编程方式创建文本字段。我用界面生成器创建了它们。

1.  如何以编程方式选择所需的起始文本字段（理想情况下，选择时会显示一些突出显示）。现在我很幸运，我想成为默认值的字段是默认值。

2.  如何将闪烁的光标放在该文本字段的右侧。

...戴尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T20:10:39.067

调用[`[myTextField becomeFirstResponder];`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/UIResponder/resignFirstResponder)它会通知接收者它即将成为其窗口中的第一响应者。那应该在 UITextField 中设置光标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T20:11:37.423

要以编程方式激活一个字段并使其成为您的起始文本字段，您应该使用`UIResponder's` [becomeFirstResponder](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html)方法，该方法都`UITextFields`继承自。

```
[textField becomeFirstResponder]; 
```

# c++ - DirectX 11 (C++) 中的多个渲染目标

> ID：12270631
> 
> 赞同：3
> 
> 时间：2012-09-04T20:06:45.113
> 
> 标签：c++, directx

我想渲染一个场景并将其显示在监视器上，同时将另一个场景渲染到纹理上。我需要创建两个交换链吗？在这种情况下如何创建第二个交换链？我试图调用 CreateSwapChainForCoreWindow 但得到内存访问异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T22:47:27.637

交换链实际上只是用于显示内容。

要渲染某些东西，您必须通过 OMSetRenderTargets() 调用向设备添加渲染目标视图。您可以通过 CreateRenderTargetView() 创建渲染目标视图，它将资源作为输入。纹理也是资源……您只需使用 D3D11_BIND_RENDER_TARGET 标志创建它们。

这只是一些提示，应该能够为您指明正确的方向。

顺便说一句，交换链有缓冲区，它们也是用于创建渲染目标视图的资源。这就是你渲染到交换链的方式；它实际上与“交换链”根本没有任何关系。

# php - 在两个表之间查找匹配项，每个表有 160k+ 行

> ID：12270636
> 
> 赞同：0
> 
> 时间：2012-09-04T20:07:01.830
> 
> 标签：php, mysql, performance, refactoring

我有两个表，每个表都有 160k+ 行。两者之间共享一些 UUID。我正在“新”表上使用 foreach 循环，并使用嵌入式 foreach 搜索“旧”表。当 UUID 匹配结束时，“旧”表将使用“新”表中的数据进行更新。

两个表的 ID 都有一个索引。

我的问题是这个操作非常耗时；有谁知道一种更有效的方法来搜索匹配的 UUID？旁注：我们正在使用 PHP 5.3 的 MySQLi 扩展

进出口代码：

```
$oldCounter = 0;
$newCounter = 1;
//loop
foreach( $accounts as $accKey=>$accValue )
{
echo( "New ID - " . $oldCounter++ . ": " . $accValue['id'] . "\n" );

foreach( $accountContactData as $acdKey=>$acdValue )
{
    echo( "Old ID - " $newCounter++ . ": " . $acdValue['id'] . "    \n" );

    if( $accValue['id'] == $acdValue['id'] && (
        $accValue['phone_office'] == "" || $accValue['phone_office'] == NULL || $accValue['phone_office'] == 0 )
    ){
        echo("ID match found\n");
        //when match found update accounts with accountsContact info
        $query = '
            UPDATE `accounts`
            SET
                `phone_fax` = "' . $acdValue['fax'] . '",
                `phone_office` = "' . $acdValue['telephone1'] . '",
                `phone_alternate` = "' . $acdValue['telephone2'] . '"
            WHERE
                `id` = "' . $acdValue['id'] . '"
        ';
        echo "" . $query . "\n\n";

        $DB->query($query);

        break 1;
    }

}
}
unset($oldCounter);
unset($newCounter); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:16:07.360

这一切都在 SQL 中完成。

我在您的代码中没有看到任何需要 PHP 的内容。

`UPDATE`允许`JOIN`. *新旧*表，并让您的`JOIN`条件与*您*的描述相匹配。应该非常简单并且明显更快。**`WHERE`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:24:56.053

几个月前我写了一个函数，
你可以随意修改。

这可以提高您的搜索速度

```
public static function search($query)
{
    $result = array();
    $all = custom_query::getNumRows("bar");
    $quarter = floor(0.25 * $all) + 1;
    $all = 0;
    for($i = 0;$i<4;$i++)
    {
        custom_query::condition("", "limit $all, $quarter");
        $data = custom_query::FetchAll("bar");
        foreach ($data as $v)
            foreach($v as $_v)
                if (count(explode($query, $_v)) > 1)
                    $result[] = $v["bar_id"];
        $all += $quarter;
    }
    return $result;
} 
```

它会返回与搜索匹配的记录的 ID。

此方法将表格分为 4 个部分，每次迭代仅获得四分之一...
您可以将此数字更改为例如 10 或 20 以提高速度...
一些方法在类中，您可以轻松编写主题。 ..**

# asp.net-mvc - 使用资源存储的字符串值对提供 DataAnnotations.ValidationAttribute 错误消息

> ID：12270639
> 
> 赞同：0
> 
> 时间：2012-09-04T20:07:26.713
> 
> 标签：asp.net-mvc, visual-studio-2010, data-annotations, resx, validationattribute

我`ValidationAttributes`不访问存储在使用内置资源生成器生成的资源文件`ErrorMessages`中的值对。（添加新项目 - 资源文件）`.resx``VS2010`

我只是添加了一个名为 的文件夹`Resources`，然后添加了一个新文件夹并将其命名`Resources File`为`ErrorResources`，在资源编辑器中我添加了一个值对`StringLengthError`- Too Long**。

然后在我的 DataAnnotation.ValidationAttribute 中我写道：

```
 [StringLength(5, MinimumLength = 3, 
                    ErrorMessageResourceType = typeof(ErrorResources),
                    ErrorMessageResourceName = "StringLengthError")]
  public string Details { get; set; } 
```

我添加了一个`using`声明以包含`ErrorResources`.

但是当我运行它时，ValidationAttribute StringLength 是完全无效的。

如果我在没有 ErrorResources 的情况下使用它，如：

```
 [StringLength(5, MinimumLength = 3)]
  public string Details { get; set; } 
```

验证属性恢复生机。

我尝试访问`ErrorResources`代码其他部分中的值对，它可以工作。我只是无法让我的 ValidationAttributes 使用 ErrorResources 资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:08:50.177

尝试`Access Modifier`将资源文件的设置更改为`public`！

![在此处输入图像描述](../Images/98f8b7d8ae414ea7bb39c6638ad49d2f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T22:50:49.060

访问修饰符应该是`Public`，但这还不够。您必须将 resx 文件的属性更改为如下所示：

![特性](../Images/e97507e7e363595aa52cc039e60c93bd.png)

注意`Build Action`和`Custom Tool`

此外`Resx`，数据注释使用的应该放在`App_GlobalResources`而不是`Resources`你提到的。试试这些，看看是否可行。

希望这会帮助你。

# multithreading - 反应式扩展 OnNext 线程安全

> ID：12270642
> 
> 赞同：17
> 
> 时间：2012-09-04T20:07:46.600
> 
> 标签：multithreading, c#-4.0, thread-safety, system.reactive

使用 Rx ，从多个线程`Subject`调用是否是线程安全的？`OnNext()`

所以序列可以从多个来源生成。

合并会做同样的事情吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-05T06:50:51.330

Rx 合约要求通知是顺序的，并且对于多个运营商来说是逻辑上的必要。也就是说，您可以使用可用的`Synchronize`方法来获得这种行为。

```
var subject = new Subject<int>();
var syncedSubject = Subject.Synchronize(subject); 
```

您现在可以同时调用`syncedSubject`. 对于必须同步的观察者，您还可以使用：

```
var observer = Observer.Create<Unit>(...);
var syncedObserver = Observer.Synchronize(observer); 
```

测试：

```
Func<int, Action> onNext = i => () => syncedSubject.OnNext(i);
Parallel.Invoke
(
    onNext(1),
    onNext(2),
    onNext(3),
    onNext(4)
); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T20:44:19.920

不，序列是连续的，因此不允许重叠通知。您可以使用 Synchronize 扩展方法来强制执行正确的同步。像 Merge 这样的操作员使用锁来调用下游观察者，以确保对 On* 回调进行正确的串行调用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-05T06:13:45.900

调用`someSubject.OnNext()`与线程安全一样`someList.Add()`- 您可以从 > 1 个线程调用它，但不能同时调用。将您`OnNext`的声明包含在`lock`声明中，它将是安全的。

# python - 你能像往常一样制作一个python子进程输出stdout和stderr，但也可以将输出捕获为字符串吗？

> ID：12270645
> 
> 赞同：33
> 
> 时间：2012-09-04T20:07:56.883
> 
> 标签：python, subprocess

> **可能重复：**
> [包装子进程的 stdout/stderr](https://stackoverflow.com/questions/4335587/wrap-subprocess-stdout-stderr)

在[这个问题](https://stackoverflow.com/questions/9859446/subprocess-output-to-stdout-and-to-pipe)中，[hanan-n](https://stackoverflow.com/users/963318/hanan-n)询问是否有可能有一个 python 子进程输出到 stdout，同时还将输出保存在字符串中以供以后处理。这种情况下的解决方案是遍历每个输出行并手动打印它们：

```
output = []
p = subprocess.Popen(["the", "command"], stdout=subprocess.PIPE)
for line in iter(p.stdout.readline, ''):
    print(line)
    output.append(line) 
```

但是，此解决方案并不能推广到您希望对 stdout 和 stderr 都执行此操作的情况，同时满足以下条件：

*   stdout/stderr 的输出应该分别到父进程的 stdout/stderr
*   输出应尽可能实时完成（但我只需要访问最后的字符串）
*   不应更改 stdout 和 stderr 行之间的顺序（我不太确定如果子进程以不同的时间间隔刷新其 stdout 和 stderr 缓存，这将如何工作；让我们现在假设我们将所有内容都放在包含完整的漂亮块中线？）

我查看了[子流程文档](http://docs.python.org/dev/library/subprocess.html)，但找不到任何可以实现这一目标的东西。我能找到的最接近的方法是添加`stderr=subprocess.stdout`和使用与上面相同的解决方案，但是我们失去了常规输出和错误之间的区别。有任何想法吗？我猜这个解决方案——如果有的话——将涉及对`p.stdout`and进行异步读取`p.stderr`。

这是我想做的一个例子：

```
p = subprocess.Popen(["the", "command"])
p.wait()  # while p runs, the command's stdout and stderr should behave as usual
p_stdout = p.stdout.read()  # unfortunately, this will return '' unless you use subprocess.PIPE
p_stderr = p.stderr.read()  # ditto
[do something with p_stdout and p_stderr] 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-04T22:33:20.620

这个例子似乎对我有用：

```
# -*- Mode: Python -*-
# vi:si:et:sw=4:sts=4:ts=4

import subprocess
import sys
import select

p = subprocess.Popen(["find", "/proc"],
    stdout=subprocess.PIPE, stderr=subprocess.PIPE)

stdout = []
stderr = []

while True:
    reads = [p.stdout.fileno(), p.stderr.fileno()]
    ret = select.select(reads, [], [])

    for fd in ret[0]:
        if fd == p.stdout.fileno():
            read = p.stdout.readline()
            sys.stdout.write('stdout: ' + read)
            stdout.append(read)
        if fd == p.stderr.fileno():
            read = p.stderr.readline()
            sys.stderr.write('stderr: ' + read)
            stderr.append(read)

    if p.poll() != None:
        break

print 'program ended'

print 'stdout:', "".join(stdout)
print 'stderr:', "".join(stderr) 
```

一般来说，任何你想同时处理多个文件描述符并且你不知道哪一个有东西供你阅读的情况，你应该使用 select 或类似的东西（比如 Twisted reactor）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-05T18:25:10.807

以可移植的方式打印到控制台并在子进程的字符串 stdout/stderr 中捕获：

```
from StringIO import StringIO

fout, ferr = StringIO(), StringIO()
exitcode = teed_call(["the", "command"], stdout=fout, stderr=ferr)
stdout = fout.getvalue()
stderr = ferr.getvalue() 
```

`teed_call()`Python子进程中定义的地方是[获取孩子的输出到文件和终端？](https://stackoverflow.com/a/4985080/4279)

您可以使用任何类似文件的对象（`.write()`方法）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T20:27:54.117

如上所述创建两个阅读器，`stdout`一对一用于`stderr`并在新线程中启动每个阅读器。这将以与进程输出的顺序大致相同的顺序附加到列表中。如果需要，请维护两个单独的列表。

IE，

```
p = subprocess.Popen(["the", "command"])
t1 = thread.start_new_thread(func,stdout)  # create a function with the readers
t2 = thread.start_new_thread(func,stderr)
p.wait() 
# your logic here 
```

# ios - iCloud 无法合并：无法处理带有分数的日志：

> ID：12270646
> 
> 赞同：1
> 
> 时间：2012-09-04T20:08:00.183
> 
> 标签：ios, core-data, icloud

我在使用 CoreData 和 iCloud 时遇到了一些问题。

该应用程序过去运行良好，但一些用户报告数据不再同步。启用调试登录（设置运行时参数 -com.apple.coredata.ubiquity.logLevel 3 ）后，我设法从应用程序中收到一条错误消息：

```
2012-09-02 11:47:17.835 MyApp[29365:1a0f] -[_PFUbiquityRecordsImporter canProcessTransactionLogWithScore:afterLogWithScore:](364): CoreData: Ubiquity:  <_PFUbiquityRecordsImporter: 0xd692b60>:
    ubiquityRootLocation: <PFUbiquityLocation: 0xd6912e0>: /private/var/mobile/Library/Mobile Documents/ATCS9MGY4M~com~MyApp~MyApp/Data/4D90DDAD-FA00-49FF-9AEA-973ED3AE5A92
    localPeerID: mobile.A9EC2335-92F9-5098-BF24-48D49DD7D170

Can't process log with score: {
    "mobile.A1F36BF9-B200-57C7-9A56-B6993451AA3D" = 4;
    "mobile.A9EC2335-92F9-5098-BF24-48D49DD7D170" = "-58";
} after log with score: {
}
 It is ahead of the local peer.
2012-09-04 21:47:17.853 MyApp[29365:1a0f] -[_PFUbiquityRecordsImporter createSortedOperationsArrayForLogLocations:](317): CoreData: Ubiquity:  <_PFUbiquityRecordsImporter: 0xd692b60>:
    ubiquityRootLocation: <PFUbiquityLocation: 0xd6912e0>: /private/var/mobile/Library/Mobile Documents/ATCS9MGY4M~com~MyApp~MyApp/Data/4D90DDAD-FA00-49FF-9AEA-973ED3AE5A92
    localPeerID: mobile.A9EC2335-92F9-5098-BF24-48D49DD7D170

Giving up on operations:
(
    "<_PFUbiquityRecordImportOperation: 0x2953c0>:\n\tlocalPeerIID: mobile.A9EC2335-92F9-5098-BF24-48D49DD7D170\n\tlogScore: {\n    \"mobile.A1F36BF9-B200-57C7-9A56-B6993451AA3D\" = 4;\n    \"mobile.A9EC2335-92F9-5098-BF24-48D49DD7D170\" = \"-58\";\n}\ntransactionLog: <PFUbiquityTransactionLog: 0x293f90>\n\ttransactionLogLocation: <PFUbiquityLocation: 0x2b3b20>: /private/var/mobile/Library/Mobile Documents/ATCS9MGY4M~com~MyApp~MyApp/Data/4D90DDAD-FA00-49FF-9AEA-973ED3AE5A92/mobile.A1F36BF9-B200-57C7-9A56-B6993451AA3D/4D90DDAD-FA00-49FF-9AEA-973ED3AE5A92/ZaJyBZ6MYNgth0Eai8Icgg2c1C~09IqT5LmGkD2D56I=/779B2C07-A286-4826-98D4-91BA461645E3.1.cdt\n\ttransactionNumber: 7\n\n",
    "<_PFUbiquityRecordImportOperation: 0x292350>:\n\tlocalPeerIID: mobile.A9EC2335-92F9-5098-BF24-48D49DD7D170\n\tlogScore: {\n    \"mobile.A1F36BF9-B200-57C7-9A56-B6993451AA3D\" = 5;\n    \"mobile.A9EC2335-92F9-5098-BF24-48D49DD7D170\" = \"-58\";\n}\ntransactionLog: <PFUbiquityTransactionLog: 0x290f00>\n\ttransactionLogLocation: <PFUbiquityLocation: 0x2b11e0>: /private/var/mobile/Library/Mobile Documents/ATCS9MGY4M~com~MyApp~MyApp/Data/4D90DDAD-FA00-49FF-9AEA-973ED3AE5A92/mobile.A1F36BF9-B200-57C7-9A56-B6993451AA3D/4D90DDAD-FA00-49FF-9AEA-973ED3AE5A92/ZaJyBZ6MYNgth0Eai8Icgg2c1C~09IqT5LmGkD2D56I=/9AF49529-06D2-479D-B9D9-B43E18611172.1.cdt\n\ttransactionNumber: 8\n\n",
)
Due to incompatible operation: <_PFUbiquityRecordImportOperation: 0x2953c0>:
    localPeerIID: mobile.A9EC2335-92F9-5098-BF24-48D49DD7D170
    logScore: {
    "mobile.A1F36BF9-B200-57C7-9A56-B6993451AA3D" = 4;
    "mobile.A9EC2335-92F9-5098-BF24-48D49DD7D170" = "-58";
}
transactionLog: <PFUbiquityTransactionLog: 0x293f90>
    transactionLogLocation: <PFUbiquityLocation: 0x2b3b20>: /private/var/mobile/Library/Mobile Documents/ATCS9MGY4M~com~MyApp~MyApp/Data/4D90DDAD-FA00-49FF-9AEA-973ED3AE5A92/mobile.A1F36BF9-B200-57C7-9A56-B6993451AA3D/4D90DDAD-FA00-49FF-9AEA-973ED3AE5A92/ZaJyBZ6MYNgth0Eai8Icgg2c1C~09IqT5LmGkD2D56I=/779B2C07-A286-4826-98D4-91BA461645E3.1.cdt
    transactionNumber: 7 
```

任何人都知道如何减轻这些错误消息的影响或根本原因是什么；

*   “它领先于当地同行。”
*   “由于不兼容的操作：<_PFUbiquityRecordImportOperation:”

谢谢

# programming-languages - 是否有可能以任何语言实现影响对象的每个实例的规则？

> ID：12270654
> 
> 赞同：1
> 
> 时间：2012-09-04T20:08:16.820
> 
> 标签：programming-languages, language-design, rule

例如，我能否实现一个规则，将遵循模式 '1..4' 的每个字符串更改为数组 [1,2,3,4]？在 JavaScript 中：

```
//here you create a rule that changes every string that matches /$([0-9]+)_([0-9]+)*/
//ever created into range($1,$2) (imagine a b are the results of the regexp)
var a = '1..4';
console.log(a);
>> output: [1,2,3,4]; 
```

当然，我很有信心这在大多数语言中是不可能的。我的问题是：是否有任何语言可以做到这一点？或者有没有人提出过类似的建议？这个东西有一个“名字”，我可以用谷歌搜索更多信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:15:54.007

是的。Common Lisp（和某些其他 lisp）具有“阅读器宏”，允许用户重新编程（增量）输入流和实际语言结构之间的映射。

见[http://dorophone.blogspot.com/2008/03/common-lisp-reader-macros-simple.html](http://dorophone.blogspot.com/2008/03/common-lisp-reader-macros-simple.html)

如果您想在对象级别上进行操作，您将需要使用一个调试/内存管理框架来跟踪所有对象，并在每个评估步骤上处理规则（讨厌）。这似乎是您可以硬塞进smalltalk的那种东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T20:48:07.550

[CLOS（通用 Lisp 对象系统）](http://en.wikipedia.org/wiki/Common_Lisp_Object_System)允许重新定义活动对象。

最终，您需要两件事来实现这一点：

1.  访问正在运行的系统的[AST（抽象语法树）](http://en.wikipedia.org/wiki/Abstract_syntax_tree)，以及
2.  访问正在运行的系统的对象。

您将要研究[元对象协议](http://en.wikipedia.org/wiki/Metaobject#Metaobject_protocol)和使用它们的语言，然后是 MOP 的实现和执行这些程序的环境。

基于图像的系统将是最容易修改的（例如，Lisp，可能是 Smalltalk）。

（[基于映像的系统](http://c2.com/cgi/wiki?ImageBasedLanguage)存储正在运行的系统的快照，允许完全关闭和重新启动、重新定义整个环境，包括现有对象及其定义等。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T07:38:13.480

修改语言本身属于反射和[元编程](http://en.wikipedia.org/wiki/Metaprogramming)的范畴。它被称为*行为*反射。它不同于在应用程序级别（例如类、方法）而不是在语言级别运行的*结构反射。*对行为反思的支持因语言而异。

我们可以将语言变化大致分为两类：

1.  修改语言本身的语义（即规则）的更改（例如重新定义方法查找算法），
2.  修改语法的更改（例如，您的语法“1..4”来创建数组）。

对于案例 1，某些语言通过称为元对象的特殊对象将应用程序的结构（结构反射）及其实现的内部工作（行为反射）暴露给应用程序本身。元对象是其他隐含方面的具体化，然后变得可显式操作：应用程序可以修改元对象以重新定义其结构的一部分或语言的一部分[。](http://en.wikipedia.org/wiki/Reification_%28computer_science%29)当涉及到语言更改时，重点通常是修改消息发送/方法调用，因为它是面向对象语言的核心机制。但同样的想法也可以应用于暴露语言的其他方面，例如字段访问、同步原语、foreach 枚举等，具体取决于语言。

对于情况 2，程序必须以合适的数据结构表示，以进行修改。对于 lisp 系列的语言，程序操作列表，程序本身可以表示为列表。这被称为[同音性](http://en.wikipedia.org/wiki/Homoiconicity)，对于元编程很方便，因此类 lisp 语言的灵活性。对于其他语言，它们的表示通常是 AST。在编译或类加载期间，可以使用宏、预处理器或挂钩来转换或重写程序的表示。

然而，1 和 2 之间的界限是模糊的。句法变化可能会修改语言的语义。例如，我可以使用适当的 getter 和 setter 重写所有字段访问，并在那里执行额外的逻辑，比如实现事务内存。我是对什么是字段访问进行了语义更改，还是仅仅更改了语法？此外，还有其他的构造落在线条之下。例如，代理和`#doesNotUnderstand`陷阱是在一定程度上模拟消息发送的具体化的流行技术。

Lisp 和 Smalltalk 在元编程领域非常有影响力，我认为以下两个项目/平台对于每个项目/平台的代表都很有趣：

*   [Racket](http://racket-lang.org/)，一种类似 lisp 的语言，专注于从语言中发展语言
*   [Helvetia](http://scg.unibe.ch/research/helvetia)，一个 Smalltalk 扩展，通过利用宿主环境的 AST 将新语言嵌入宿主语言。

我希望你喜欢这个，即使我没有真正解决你的问题；）

您所需的更改需要修改创建文字的方式。这是 AFAIK 通常不暴露给应用程序。我能想到的封闭工作是[Virtual Values for Language Extension](http://dl.acm.org/citation.cfm?id=2048066.2048136)，它处理了 Javascript。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T20:19:08.460

Ruby 允许您扩展类。例如，此示例[将功能添加到 String 类](http://snipplr.com/view/23211/)。但是您可以做的不仅仅是向类添加方法。您也可以覆盖方法，但定义一个已经定义的方法。您可能希望使用[alias_method](http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-alias_method)保留对原始方法的访问。

将所有这些放在一起，您可以在 Ruby 中重载构造函数，但在您的情况下，有一个问题：听起来您希望构造函数返回不同的类型。根据定义，构造函数返回其类的实例。如果你只是想让它返回字符串“[1,2,3,4]”，那很简单：

```
class string
  alias_method :initialize :old_constructor
  def initialize
    old_constructor
    # code that applies your transformation
  end
end 
```

但是如果这是你想要的，没有办法让它返回一个数组。

# php - 给定目录时，带有 -Indexes 的 .htaccess 陷入无限重定向循环

> ID：12270660
> 
> 赞同：4
> 
> 时间：2012-09-04T20:08:43.513
> 
> 标签：php, apache, .htaccess, mod-rewrite

这是我的 .htaccess 文件：

```
# NO LISTING OF INDEXES
Options -Indexes

<IfModule mod_rewrite.c>
  RewriteEngine On

  # NIX THE www BECAUSE IT IS NO LONGER 1996 AND YOU'RE COOLER THAN THAT
  RewriteCond %{HTTPS} !=on
  RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  RewriteRule ^(.*)/$ http://%1/$1 [R=301,L]

  # NIX TRAILING SLASHES BECAUSE SEO IS A VENGEFUL GOD AND WHATNOT
  RewriteRule ^(.*)/$ $1 [R=301,L]

  # SEND ALL NON-FILE REQUESTS TO index.php FOR FIGURING OUT
  RewriteBase /
  RewriteRule ^index\.php$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.php [L]
</IfModule>

# ERROR DOCS
ErrorDocument 400 /error/400
ErrorDocument 401 /error/401
ErrorDocument 403 /error/403
ErrorDocument 404 /error/404
ErrorDocument 500 /error/500 
```

如果我尝试访问一个文件夹（`/images/`或`/images`我的站点结构中的某个其他真实文件夹），它会陷入重定向循环。

我尝试`RewriteCond %{REQUEST_FILENAME} !-d`在尾部斜杠规则之前添加，并且“修复”了重定向，因为它现在在正确的文件夹上强制使用尾部斜杠 - 但也将文件夹名称传递给我的脚本，就好像它是我的 CMS 的烘焙 URI 查询一样弄清楚。

我想我现在可以通过检查 URI 是否是某人试图非法列出的文件夹来尝试在 CMS 端解决此问题，但理想情况下，将有一个优雅的`.htaccess`解决方案将文件夹列表调用重定向到我这样的那些禁止页面之一有帮助地在那里声明。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:02:52.033

不确定它是否会有所作为，但我通常在任何条件规则之前从顶部开始

```
RewriteEngine On
Options +FollowSymlinks
RewriteBase / 
```

您的重写基础稍后开始。也许把它移上去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:10:52.650

注释掉/删除这一行：

```
RewriteRule ^(.*)/$ $1 [R=301,L] 
```

您实际上并不需要它，因为`Options -Indexes`当有人试图列出您的目录内容时，您已经在顶部显示禁止错误。除此之外，对您的代码进行一些小的调整，如下所示：

```
# NO LISTING OF INDEXES
Options +FollowSymLinks -MultiViews -Indexes

<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  RewriteCond %{HTTPS} !=on
  RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  RewriteRule ^(.*)/$ http://%1/$1 [R=301,L]

  # SEND ALL NON-FILE REQUESTS TO index.php FOR FIGURING OUT
  RewriteRule ^index\.php$ - [L,NC]

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-l
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^ index.php [L]
</IfModule>

# ERROR DOCS
ErrorDocument 400 /error/400
ErrorDocument 401 /error/401
ErrorDocument 403 /error/403
ErrorDocument 404 /error/404
ErrorDocument 500 /error/500 
```

# python - 列表索引必须是整数，而不是对象

> ID：12270663
> 
> 赞同：2
> 
> 时间：2012-09-04T20:09:15.440
> 
> 标签：python, list

作业代码有问题。基本上我要做的是获取一个对象列表并将它们传递给我的 fire 方法。

```
def fire(self,targets):
    i = 0
    for i in targets:
        x,y = targets[i].position
        tx,ty = self.position
        d = getDist(targets[i].position, self.position) 
```

每当我调用 fire 方法并传入对象时，它会将我指向第 17 行，该`x,y = targets[i].position`行显示“TypeError：列表索引必须是整数，而不是 Bomber”

Bomber 是类的名称。我这样调用 fire 方法：

```
bOne.fire([bTwo, tOne, tTwo, tThree]) 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T20:10:29.627

您正在循环列表本身，这意味着您不需要将值用作索引：

```
>>> for elem in ['a', 'b', 'c']:
...     print elem
'a'
'b'
'c' 
```

在 python 中，该`for`构造不仅仅适用于数字，它*直接*适用于您正在循环的序列的元素。

# javascript - 在 d3 中将饼图的一部分隔开？

> ID：12270665
> 
> 赞同：9
> 
> 时间：2012-09-04T20:09:23.007
> 
> 标签：javascript, d3.js

如何在 nvd3 / d3 中分隔图表的饼图？

我想按照[http://nvd3.com/livecode/#codemirrorNav中的示例饼图使用饼图](http://nvd3.com/livecode/#codemirrorNav)

任何帮助真的很受欢迎。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T21:31:24.327

有时，每个切片上的粗白色笔划都可以（实际上，他们在您链接到的页面上就是这样做的）。问题是微小的切片有时会被中风覆盖。

```
.slice {
  stroke: white;
  stroke-width: 3;
} 
```

# powershell - 使用 WshShell.Exec() 方法调用 Powershell 会挂起脚本

> ID：12270667
> 
> 赞同：3
> 
> 时间：2012-09-04T20:09:27.173
> 
> 标签：powershell, exec, blocking, wsh

我正在尝试使用 WshShell 对象的 Exec 方法调用 Powershell。我正在用 JScript 编写脚本，但我也在 VBScript 中重现了这个问题。以下两个简短的测试脚本都会导致 WSH 无限期挂起：

测试.js

```
var shell = new ActiveXObject("WScript.Shell");
WScript.Echo(shell.exec("powershell -Command $Host.Version; Exit").StdOut.ReadAll()); 
```

测试.vbs

```
dim shell

set shell = CreateObject("WScript.Shell")
WScript.Echo shell.exec("powershell -Command $Host.Version; Exit").StdOut.ReadAll 
```

我做错了什么，还是遇到了限制/不兼容？Run 方法效果很好，但我需要捕获输出，这是它无法做到的。

编辑：我忘了提到我的平台是 Windows 7 Pro，64 位的 PowerShell 3。我也用 PowerShell 1 在 Windows XP 上进行了测试。

编辑 2：我已经更新了我正在运行的测试脚本以适应 x0n 的答案。不幸的是，我仍然有麻烦。这是我目前的测试：

测试.js：

```
var shell = new ActiveXObject("WScript.Shell");
WScript.Echo(shell.exec('powershell -noninteractive -noprofile -Command "& { echo Hello_World ; Exit }"').StdOut.ReadAll()); 
```

测试.vbs：

```
dim shell

set shell = CreateObject("WScript.Shell")
WScript.Echo shell.exec("powershell -noninteractive -noprofile -Command ""& { echo Hello_World ; Exit }""").StdOut.ReadAll 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T18:13:25.997

你必须关闭标准输入：

```
var shell = new ActiveXObject("WScript.Shell");
var exec = shell.Exec('powershell -noninteractive -noprofile -Command "& { echo Hello_World ; Exit }"');
exec.StdIn.Close();
WScript.Echo(exec.StdOut.ReadAll()); 
```

[微软](http://www.vistax64.com/powershell/156786-powershell-starts-but-never-exits-when-invoked-wscript-shell.html)说：

```
StdIn is still open so PowerShell is waiting for input. (This is an
"implementation consideration" that we're hoping to fix in V2\. The
PowerShell executable gathers all input before processing.) So
objexec.StdIn.Close() needs to be added. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T22:52:03.717

利用：

```
powershell.exe -noninteractive -noprofile -command $host.version 
```

作为你的字符串。对于更复杂的命令组，请使用以下语法：

```
powershell.exe -noninteractive -noprofile -command "& { $host.version; $host.version }" 
```

# wpf - 如何使用 AddHandler 为 WPF 中的按钮上的单击事件添加事件处理程序

> ID：12270669
> 
> 赞同：1
> 
> 时间：2012-09-04T20:09:51.337
> 
> 标签：wpf, event-handling

嘿，集体大脑，

因此，我需要向控件的现有按钮添加一些额外的单击行为，我假设该控件的单击事件在其封装代码中的某处进行了处理。所以我在按钮上使用了 AddHandler()，这是一个 CalendarDayButton，我似乎找不到点击事件的处理程序。对于 AddHandler 的第一个参数，我使用了 ButtonBase.ClickEvent，第二个我只使用了 new EventHandler(button_click)，第三个是“true”。然后我得到“处理程序类型不匹配”。例外。对此的任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T20:12:05.750

问题是，在 WPF 中，[ButtonBase.Click](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.buttonbase.click.aspx#Y0)是一个[RoutedEventHandler](http://msdn.microsoft.com/en-us/library/system.windows.routedeventhandler.aspx)。您需要添加一个适当的委托（不是`EventHandler`，而是一个实现`RoutedEventHandler`）。

# hadoop - Hadoop Reducer 提供了一个可写的值。Next() 返回？

> ID：12270673
> 
> 赞同：0
> 
> 时间：2012-09-04T20:10:32.680
> 
> 标签：hadoop

在 reducer 中，MapReduce API 为您提供了可写值的迭代器。调用 next() 方法：
A. 每次返回对不同 Writable 对象的引用。
B. 从对象池返回对 Writable 对象的引用。
C. 每次都返回对同一个可写对象的引用，但填充了不同的数据。
D. 返回对 Writable 对象的引用。API 未指定这是重用对象还是新对象。
E. 如果下一个值与前一个值相同，则返回对同一可写对象的引用，否则返回新的可写对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:59:23.917

答案是 C。这样做是为了节省为每个键实例化一个新对象的开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T01:11:33.797

答案是： **C**。每次返回对同一个可写对象的引用，但填充了不同的数据。

众所周知，reducer 会将对应键的所有值与 Iterator 或 Iterable 进行分组。例如在 reduce() 方法中：

```
public void reduce(Text key, Iterable<Text> values,Context context) throws Exception{

//Code here

// for iterating through the values

    while(values.hasNext()){
               //code here

    }

} 
```

在这里，值是相同的可写对象（文本），每次迭代时都会填充不同的数据。

# ios - 如何以编程方式显示 UISegmentedControl？

> ID：12270675
> 
> 赞同：1
> 
> 时间：2012-09-04T20:10:35.113
> 
> 标签：ios

我正在查看一个 iPhone 应用程序，其中有几个由 UINavigationController 控制的 ViewController。

某个 ViewControllers 深处的某个地方正在创建一个视图，而该视图正试图弹出一个

```
UISegmentedControl *segmentedControl 
```

像这样在自身之上：

```
[self.window addSubview:segmentedControl]; 
```

“self”是UIView的一种特殊形式，设置了控件的frame

```
 segmentedControl.frame = someFrame; 
```

由于某种原因，控件没有显示在当前视图的顶部。这是否可行，如果可行，最可能造成麻烦的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:19:47.157

当您说`self`是 UIView 的一种特殊形式时，我猜您指的是 UIView 自定义子类。

如果要从此视图中添加 UISegmentedControl，则需要执行以下操作：

```
[self addSubview:segmentedControl]; 
```

你设置它的框架相对于它的超级视图，所以如果你想要它在左上角，你会这样做：

```
segmentedControl.frame = CGRectMake(0.0f, 0.0f, someWidth, someHeight); 
```

# c# - 使用派生类对象访问被覆盖的基类成员 (C#)

> ID：12270676
> 
> 赞同：4
> 
> 时间：2012-09-04T20:10:38.030
> 
> 标签：c#, inheritance

给定 2 种类型

```
class A { public virtual void Hello() { Console.WriteLine("A"); } }
class B : A { public override void Hello() { Console.WriteLine("B"); } } 
```

和“B”的一个实例 `B b = new B();`

我可以访问thru的`Hello()`方法吗？（我可以考虑将 A 暴露为 B 中的属性，但不确定是否有其他方法）`A``b`

我知道这在[c++](https://stackoverflow.com/questions/3871864/accessing-overridden-base-class-member-from-derived-class-object)中是可能的，但在 c# 中却摸不着头脑。

**PS**：请不要谈论“你为什么要这个？” 或“这是一个糟糕的设计”等。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T20:13:10.927

不是从外面。

从*内部*，实例可以通过调用它，`base.Hello()`因此您可以添加：

```
public void Foo() { base.Hello(); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:28:26.833

您可以尝试阴影：

```
class A { public virtual void Hello() { Console.WriteLine("A"); } }
class B : A { public new void Hello() { Console.WriteLine("B"); } } 
```

然后你可以这样做：

```
 A b = new B();
        b.Hello(); //prints A
       (B)b).Hello(); //prints B

       B b1 = new B();
       b1.Hello(); //prints B 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T20:14:04.713

在 c# 中是不可能的。对不起。

# regex - 在 Google Analytics 上将通用 URL 重写为真实 URL

> ID：12270678
> 
> 赞同：0
> 
> 时间：2012-09-04T20:10:41.850
> 
> 标签：regex, url-rewriting, google-analytics, replace

我有一个论坛的 iPhone 应用程序，它也有一个有限的谷歌分析报告。

此应用程序以下列形式报告页面浏览量：

```
/forum/67
/thread/29036
etc... 
```

上面的数字代表论坛和线程 ID

我正在尝试设置一个高级过滤器，它将重写/报告页面视图，如下所示：

```
http://www.mysite.com/forum-67.html

http://www.mysite.com/thread-29036.html 
```

有人可以帮助我创建一个高级谷歌分析过滤器，这将使我能够看到 URL，以便它们可以实时并发送到正确的页面。

显然需要一些`RegExp`比赛，但我无法绕过它。

# python - 创建 JSON 对象时如何使用列名，Python

> ID：12270679
> 
> 赞同：1
> 
> 时间：2012-09-04T20:10:54.090
> 
> 标签：python, mysql, database, json

为了提高代码的可读性，我想在创建 JSON 对象时使用纯单词而不是索引号：

这是我的数据库表 school_subjects：

```
mysql> DESCRIBE school_subjects;
+------------------+--------------+------+-----+---------+----------------+
| Field            | Type         | Null | Key | Default | Extra          |
+------------------+--------------+------+-----+---------+----------------+
| id               | int(11)      | NO   | PRI | NULL    | auto_increment |
| name             | varchar(500) | NO   |     | NULL    |                |
| user_id          | int(11)      | NO   | MUL | NULL    |                |
| created_by       | varchar(64)  | NO   |     | NULL    |                |
| created_time     | datetime     | NO   |     | NULL    |                |
| num_of_followers | int(11)      | NO   |     | NULL    |                |
+------------------+--------------+------+-----+---------+----------------+
6 rows in set (0.00 sec)

mysql> 
```

我的python代码：

```
serg@serg-PORTEGE-Z835:~$ python
Python 2.7.2+ (default, Oct  4 2011, 20:03:08) 
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import simplejson as json
>>> import MySQLdb
>>> import collections
>>> 
>>> mydb = MySQLdb.connect(host='localhost', user='root', passwd='', db='schooldb')
>>> cursor = mydb.cursor()
>>> cursor.execute("""
...                     SELECT id, name
...                     FROM school_subjects
...             """)
6L
>>> rows = cursor.fetchall()
>>> result = []
>>> for row in rows:
...     d = dict()
...     d['id'] = row.id        #I want something similar to this
...     d['name'] = row.name    #but it doesn't work
...     result.append(d)
... 
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
AttributeError: 'tuple' object has no attribute 'id' 
```

如您所见，我收到此错误：

```
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
AttributeError: 'tuple' object has no attribute 'id' 
```

但是这段代码工作正常：

```
>>> result = []
>>> for row in rows:
...     d = dict()
...     d['id'] = row[0]
...     d['name'] = row[1]
...     result.append(d)
... 
>>> subjects = json.dumps(result, indent=4)
>>> print subjects
[
    {
        "id": 1,
        "name": "Math 140"
    },
    {
        "id": 2,
        "name": "English 102"
    },
    {
        "id": 3,
        "name": "CS 240"
    },
    {
        "id": 4,
        "name": "CS 210"
    },
    {
        "id": 5,
        "name": "Math 140"
    },
    {
        "id": 6,
        "name": "English 102"
    }
]
>>> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T20:14:03.887

该`cursor`对象有一个`.description`属性告诉你每一列的名称，用它把一行变成一个字典：

```
cursor.execute("""
                    SELECT id, name
                    FROM school_subjects
            """)
columns = [desc[0] for desc in cursor.description]
result = []
for row in rows:
    row = dict(zip(columns, row))
    result.append(row) 
```

有关`.description`属性的详细信息，请参阅[Python DB API 2.0 规范](http://www.python.org/dev/peps/pep-0249/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-09T06:58:55.730

```
 from django.db import connection

    cursor = connection.cursor()
    cursor.execute("SELECT * FROM blog_contact")
    rows = cursor.fetchall()
    columns = [desc[0] for desc in cursor.description]
    result = []
    for row in rows:
        row = dict(zip(columns, row))
        result.append(row)
    row = {"columns": columns,"rows":rows,"results":result}
    return render(request, 'blog/contact.html', row) 
```

# hibernate - 在单元测试中使用 hsqldb 得到 sqlexception

> ID：12270682
> 
> 赞同：0
> 
> 时间：2012-09-04T20:11:14.497
> 
> 标签：hibernate, junit, hsqldb, junit4

我正在使用 hsqldb 1.8 和 hibernate 4.0 来进行单元测试。我在 hibernate.xml 中设置了：

```
<property name="hibernate.dialect">org.hibernate.dialect.HSQLDialect</property> 
```

我正在使用 hql 进行查询。通常，我使用的是 oracle db，我的程序运行良好。但我尝试使用 hsqldb 进行单元测试，总是得到：

```
 org.hibernate.exception.SQLGrammarException: could not execute query
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:92)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
at org.hibernate.loader.Loader.doList(Loader.java:2545)
at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
at org.hibernate.loader.Loader.list(Loader.java:2271)
at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:459)
at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:365)
at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)
at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1268)
at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)
at org.hibernate.impl.AbstractQueryImpl.uniqueResult(AbstractQueryImpl.java:890)
at myprogram.sgfratelimitingentities.SgfResourceDao.getTaskTypeID(SgfResourceDao.java:64)
at myprogram.UrlRoutine.getJobAndTaskType(UrlRoutine.java:186)
at myprogram.UrlRoutine.getJobTypeFromSeedFile(UrlRoutine.java:339)
at myprogram.UrlRoutineTest.testGetJobTypeFromSeedFile(UrlRoutineTest.java:114)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
**Caused by: java.sql.SQLException: Unexpected token: CROSS in statement** [select sgftaskact0_.sgf_task_action_id as col_0_0_ from SGF_TASK_ACTION sgftaskact0_ cross join SGF_RESOURCE sgfresourc1_ where upper(sgfresourc1_.SGF_RESOURCE_NAME)=? and sgfresourc1_.sgf_resource_id=sgftaskact0_.SGF_RESOURCE_ID and sgftaskact0_.SGF_RESOURCE_REMOTE_COST=(select min(sgftaskact2_.SGF_RESOURCE_REMOTE_COST) from SGF_TASK_ACTION sgftaskact2_ where sgftaskact2_.SGF_RESOURCE_ID=sgfresourc1_.sgf_resource_id)]
at org.hsqldb.jdbc.jdbcUtil.throwError(Unknown Source)
at org.hsqldb.jdbc.jdbcPreparedStatement.<init>(Unknown Source)
at org.hsqldb.jdbc.jdbcConnection.prepareStatement(Unknown Source)
at com.mchange.v2.c3p0.impl.NewProxyConnection.prepareStatement(NewProxyConnection.java:213)
at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:534)
at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:452)
at org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:161)
at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1700)
at org.hibernate.loader.Loader.doQuery(Loader.java:801)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
at org.hibernate.loader.Loader.doList(Loader.java:2542)
... 34 more 
```

# twitter-bootstrap - Twitter Bootstrap 导航栏中的文本

> ID：12270683
> 
> 赞同：0
> 
> 时间：2012-09-04T20:11:15.433
> 
> 标签：twitter-bootstrap, navbar

我正在尝试将文本添加到 Twitter Bootstrap 中的顶部固定导航栏，但由于某种原因，文本与链接不在同一行，wchich 使导航栏的高度达到应有的两倍。

这就是我正在使用的代码：

```
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <p class="navbar-text" >You are logged in as: <? echo $_SESSION['settings_users_name']; ?></p>
      <ul class="nav pull-right">
        <li><a href="?action=logout">Logout</a></li>
      </ul>
    </div>
  </div>
</div> 
```

如果我在 Web Developer 工具栏中勾勒出“块级元素”，我会看到`<p>`导航栏的 100% 长度会推动`<ul>`下面的内容。

如何将文本与 ul 对齐？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T03:38:03.697

这是你的想法吗？

[http://jsbin.com/uvonej/2](http://jsbin.com/uvonej/2)

[http://jsbin.com/uvonej/2/edit](http://jsbin.com/uvonej/2/edit)

这个 .jsbin 示例建立`.brand`在您检查**[.navbar](http://twitter.github.com/bootstrap/components.html#navbar)**组件的引导文档时可以找到的类。

**css**

```
 <style type="text/css">
    /* see the .brand styling in bootstrap .css */
    .login-blurb {
      display: block;
      float: left;
      padding: 10px 20px 10px;
      margin-left: -20px;   
      color: #e7e7e7;
    }
  </style> 
```

**html**

```
 <div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <span class="login-blurb">You are logged in as: <strong>username<strong></span>
      <ul class="nav pull-right">
        <li><a href="#action=logout">Logout</a></li>
      </ul>
    </div>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T08:43:56.060

使用`.pull-left`或`.pull-right`。导航栏上的元素必须是浮动的，这些是相应的原生类。

# html - 将帧转换为 DIV

> ID：12270685
> 
> 赞同：1
> 
> 时间：2012-09-04T20:11:29.977
> 
> 标签：html

只是一点帮助。是否可以将这些帧转换为 DIV？你能给我一些线索吗？

例如，如何将 Frame Left 转换为 DIV？

```
<frameset border="0" frameSpacing="0" borderColor="#336699" rows="14,88" frameBorder="0" onkeydown="KeyPressed();">
<frame name="Top" src="Header.aspx" scrolling="no">
<frameset border="0" frameSpacing="borderColor=#336699" frameBorder="NO" cols="17,83">
<frame name="Left" src="menu.aspx" scrolling="auto" width="100%">
<frame name="Right" src="Page1.aspx" >
</frameset>
<noframes>
</noframes>
</frameset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:25:02.407

也许使用 jQuery（或直接使用 javascript）。看看 .load() 函数： [http ://api.jquery.com/load/](http://api.jquery.com/load/)

如果您有一些 ID 为“result”的 div，您可以将当前用作给定帧内容源的内容加载到该 div 中：

```
$('#result').load('Page1.aspx'); 
```

...出于同样的原因，您也可以只加载给定页面的片段。

# c++ - C++ 使用迭代器复制文本文件

> ID：12270690
> 
> 赞同：3
> 
> 时间：2012-09-04T20:11:52.307
> 
> 标签：c++, file, text, iterator, copy

我刚刚找到了一种将带有迭代器的文件复制到另一个文件的方法：

```
ifstream ifile("file1.txt");
ofstream ofile("file2.txt");
copy(istream_iterator<string>(ifile),
     istream_iterator<string>(),
     ostream_iterator<string>(ofile, " ")); 
```

它可以工作，但不幸的是，“file1.txt”中的所有文本都只在“file2.txt”的一行中，但在“file1.txt”中最初是很多行。

我试图在迭代器的循环之间更改字符串：

```
copy(istream_iterator<string>(ifile),
     istream_iterator<string>(),
     ostream_iterator<string>(ofile, "\n")); 
```

但“file2.txt”的结果更糟 - 每个单词都在不同的行中。

我的问题：有什么方法可以使用迭代器复制文件但不会丢失任何信息，或者我应该这样做`getline()`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T20:19:34.233

`istream_iterator<T> iter(stream)`将使用格式化的输入函数，所以这`++iter`有点相当于：

```
T t;
stream >> t; 
```

对于`string`对象，这意味着丢弃任何前导空格并只读取直到下一个空格字符。

如果您想要未格式化的操作，请使用`istreambuf_iterator<char>`（如评论中所述）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T20:23:04.043

使用迭代器和的可能解决方案`std::getline()`：

```
#include <iostream>
#include <string>
#include <iterator>
#include <fstream>
#include <algorithm>

// Define a struct and operator>> for reading lines.
//
struct line
{
    std::string buf;
    operator std::string() const { return buf; }
};
std::istream& operator>>(std::istream& a_in, line& a_line)
{
    return std::getline(a_in, a_line.buf);
}

int main()
{
    std::ifstream in("main.cpp");
    std::ofstream out("copy.cpp");

    std::copy(std::istream_iterator<line>(in),
              std::istream_iterator<line>(),
              std::ostream_iterator<std::string>(out, "\n"));

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T20:28:21.833

取消设置 ifstream 上的跳过空白标志。

```
ifile.unsetf(ios_base::skipws); 
```

请参阅[http://en.cppreference.com/w/cpp/io/ios_base/unsetf](http://en.cppreference.com/w/cpp/io/ios_base/unsetf)。

# jquery - 当我将阻塞函数放入队列时，为什么 jQuery 的动画会中断？

> ID：12270692
> 
> 赞同：1
> 
> 时间：2012-09-04T20:11:54.257
> 
> 标签：jquery, jquery-animate, queue

当我`console.log(elem.queue());`第一次使用它时，它会返回一个空数组`[]`，但如果我让它更具体，也就是`console.log(elem.queue()[0]);`它会以正确的顺序为我提供各个函数。第一次之后，当我使用`console.log(elem.queue());`它时，它返回正确的长度，但它返回的函数顺序与它们应该的顺序不同，有时它返回未定义。但是当我使用`console.log(elem.queue()[0]);`它时仍然会返回预期的结果。这是我的代码以及输出的内容：

```
//The correct queue order is: animate, run, animate

console.log(elem.queue('jChain'));    //1: []
                                      //2+: [run(){}, animate(){}, undefined x 1]

console.log(elem.queue('jChain')[0]); //animate(){} 
console.log(elem.queue('jChain')[1]); //run(){}
console.log(elem.queue('jChain')[2]); //animate(){} 
```

如您所见，当我专门从队列中选择时，它是正确的。但是当我选择整个队列时，一切都搞砸了。**有人可以告诉我发生了什么，为什么？**

* * *

**更新**
*创建队列的代码：*

```
console.log(queue); /* [{args:Array[2], method:"animate"},
                     *  {args:Array[2], method:"run"}, 
                     *  {args:Array[2], method:"animate"}] */
elem.clearQueue('jChain');
$.each(queue, function(key, value){
  if(value.method == 'animate'){
    value.args[1] = {duration:value.args[1], queue:'jChain' /*,complete:function(){elem.dequeue('jChain');}*/ };
    elem[value.method].apply(elem, value.args);
  }else{
    run.apply(elem, value.args);
  }
});

function run(fn, args){
  args = args || [];
  self = this;
  self.queue('jChain', function(next){
    if(fn)
        fn.apply(self, args);
    next();
  });
} 
```

那么为什么它会出现这种奇怪的显示，我不知道。我仍在尝试调试此代码，我认为这可能是阻碍我的原因。在我的运行功能完成之前，我不希望执行第二个动画，它看起来应该可以工作，但实际上它失败了。

[**这是我的代码的 jsFiddle。**](http://jsfiddle.net/ww8QX/3/)- 确保在测试时打开控制台。如果控制台未打开，它看起来可以正常工作，因此请打开它。请注意“字幕”如何重新打开而不是淡入，并注意队列顺序的差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:01:35.293

我冒昧地尽可能多地展开以了解发生了什么。

[http://jsfiddle.net/kritzikratzi/YYwm9/1/](http://jsfiddle.net/kritzikratzi/YYwm9/1/)

如果我理解正确，您期望以下行为：

1.  消退
2.  做一些 console.log 事情（或处理数据）
3.  淡入

现在您实际上可以尝试更改 say-hello-loop 的长度，对我来说，通过`i < 5000`迭代我可以看到一半的动画，`i < 1`我可以看到整个动画并且`i < 10000`动画消失了。看起来 jQuery 在创建新动画时似乎使用了绘制最后一帧的时间。javascript是单线程的，你用你的for循环完全阻塞了浏览器，然后立即开始下一个动画，这会打乱所有的时间——动画甚至在它开始之前就结束了。

解决方案非常简单：不要立即调用 next()，而是让 jQuery 的动画赶上，只需让浏览器快速重绘，然后在下一帧开始动画。长话短说：

```
 // instead of this ... 
  next(); 
  // do this...
  window.setTimeout( next, 1 ); 
```

在这里测试它：http: [//jsfiddle.net/kritzikratzi/YYwm9/2/](http://jsfiddle.net/kritzikratzi/YYwm9/2/)

好吧，我希望这是你所要求的，有点不清楚你的实际问题是什么:)

* * *

你原来的问题：为什么console.log(queue)不能正确显示？

好吧，如果您查看 queue() 的 jQuery 源代码，您可以看到以下内容：

```
queue = jQuery._data( elem, type );
[...]
return queue; 
```

所以队列可能是一些奇怪的 jQuery 对象，而不是直接的数组，不要指望它能够正确打印。正如另一个答案中所指出的，使用 toString() 可以修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:37:20.180

这似乎是让代码隐式转换数组的产物。如果您改为在 JavaScript 数组上使用显式 toString() 方法，我发现输出是正确的，没有空数组或未定义的条目。在 jsFiddle 中，将四个 console.log 行中的第一行更改为：

console.log(elem.queue('jChain').toString());

将数组显式转换为字符串似乎可以正确返回内容。

# html - HTML/CSS 问题

> ID：12270697
> 
> 赞同：0
> 
> 时间：2012-09-04T20:12:11.313
> 
> 标签：html, css, forms, layout

我在使用 CSS 以我想要的方式对齐表单元素时遇到问题。

这就是我需要的：

*名字姓：*

电子邮件： 联系电话：

*评论：*

我得到的是它们都在彼此之下，例如：

姓名：

姓：

电子邮件：

联系电话：

评论：

我已将名称和电子邮件元素分隔到一个 div 中，将姓氏和联系号码分隔到一个 div 中，并将评论分隔到一个 div 中。再多的浮动、清理或定位都不会将它们移动到我想要的方式。

这是我的html：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>only.furniture</title>
<link href="Implement files/CSS/imdsite.css" rel="stylesheet" type="text/css" />
<script src="Scripts/swfobject_modified.js" type="text/javascript"></script>
<script type="text/javascript">
function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
</script>
</head>

<body onload="MM_preloadImages('Implement files/Images/products_rollover.png','Implement files/Images/about_rollover.png','Implement files/Images/location_rollover.png','Implement files/Images/home_rollover.png','Implement      files/Images/location_rollover.png')">

<div id="container">

        <div id="header">
            <div id="logo"> 
                <a href="home.html">
                <img src="Implement files/Images/logo.png" />
                </a>
            </div><!--HEADER CLOSING DIV-->

            <div id="navigation">
              <div id="home">
              <a href="home.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('home','','Implement files/Images/home_rollover.png',1)"><img src="Implement files/Images/home.png" name="home" width="169" height="58" border="0" id="home2" /></a></div><!--HOME CLOSING DIV-->

              <div id="about">
              <a href="about.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image11','','Implement files/Images/about_rollover.png',1)"><img src="Implement files/Images/about.png" width="158" height="57" id="Image11" /></a>          
              </div><!--ABOUT CLOSING DIV-->

              <div id="products">
                    <a href="products.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image12','','Implement files/Images/products_rollover.png',1)"><img src="Implement files/Images/products.png" width="153" height="57" id="Image12" /></a>
                    <map name="Map" id="Map">
                      <area shape="rect" coords="36,20,113,45" href="products.html" alt="products" />
                </map>                  
              </div><!--PRODUCTS CLOSING DIV-->

              <div id="location">
                    <a href="location.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image21','','Implement      files/Images/location_rollover.png',1)"><img src="Implement files/Images/location.png" name="Image21" width="152" height="57" border="0" id="Image21" /></a>
              </div><!--LOCATION CLOSING DIV-->

              <div id="contact">
                <img src="Implement files/Images/contact_rollover.png" />
            </div><!--CONTACT CLOSING DIV-->
        </div><!--HEADER CLOSING DIV-->

        <div id="banner">
          <object id="FlashID" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="970" height="195">
              <param name="movie" value="Implement files/Media/banner.swf" />
              <param name="quality" value="high" />
              <param name="wmode" value="opaque" />
              <param name="swfversion" value="11.0.0.0" />
              <!-- This param tag prompts users with Flash Player 6.0 r65 and higher to download the latest version of Flash Player. Delete it if you don’t want users to see the prompt. -->
              <param name="expressinstall" value="Scripts/expressInstall.swf" />
              <!-- Next object tag is for non-IE browsers. So hide it from IE using IECC. -->
              <!--[if !IE]>-->
              <object type="application/x-shockwave-flash" data="Implement files/Media/banner.swf" width="970" height="195">
                <!--<![endif]-->
                <param name="quality" value="high" />
                <param name="wmode" value="opaque" />
                <param name="swfversion" value="11.0.0.0" />
                <param name="expressinstall" value="Scripts/expressInstall.swf" />
                <!-- The browser displays the following alternative content for users with Flash Player 6.0 and older. -->
                <div>
                  <h4>Content on this page requires a newer version of Adobe Flash Player.</h4>
                  <p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" width="112" height="33" /></a></p>
              </div>
                <!--[if !IE]>-->
            </object>
              <!--<![endif]-->
          </object>
        </div><!--BANNER CLOSING DIV-->

        <div id="contact_tagline">
            <h4>Contact us to book an appointment to view our catalogue and collections.</h4>
        </div> <!--TAGLINE CLOSING DIV-->

  <div id="contact_second">

    <div id="contact_block1">
        <h3>Please note that our complete range and collection will not be viewable, as many of our designs are still design
        concepts. Sample <br />colours can be shown as well as examples and photos of our work.
        <p>Phone: 011-453-7530<br />
        E-Mail: <a href="#">info@onlyfurniture.co.za</a><br />
      </p></h3>
    </div><!--CONTACT_BLOCK1 CLOSING DIV-->

    <div id="contact_block2">
        <div id="contact_block2_image">
            <img src="Implement files/Images/contact_image.jpg" />
        </div><!--CONTACT_BLOCK2_IMAGE CLOSING DIV-->

        <div id="contact_block2_text">
            <h4>Questions or Queries?</h4> <h3>If you have any questions, queries, complaints or suggestions,
            give us a call, email us or fill in your details below and we’ll get 
            back to you as soon as we can.</h3>
        </div><!--CONTACT_BLOCK2_TEXT CLOSING DIV-->

       <div id="about_form">
        <div id="about_form_left">
         <form action="index.php">
              <h5> Name:<Br />
            <input type="text" name="your_name" /> 
            </h5>

          <h5> Email:<Br />
            <input type="text" name="your_name" /> 
            </h5>

            <div id="about_form_right">
            <h5> Surname:<Br />
            <input type="text" name="your_name" /> 
            </h5>

            <h5> Contact number:<Br />
            <input type="text" name="your_name" /> 
            </h5>
            </div><!--ABOUT_FORM_RIGHT CLOSING DIV-->

            <div id="about_form_comment">
             <h5> Comment:<Br />
              <textarea rows="5" cols="50"></textarea>
             </h5>

             <h5>
             <input type="submit" value="Submit" name="submit">
             </h5>
          </div><!--ABOUT_FORM_COMMENT CLOSING DIV-->

            </form>
       </div><!--ABOUT_FORM CLOSING DIV-->
    </div> <!--CONTACT_BLOCK2 CLOSING DIV-->
  </div><!--CONTACT_SECOND CLOSING DIV-->

        <div id="footer">
            <img src="Implement files/Images/footer.jpg" border="0" usemap="#Map5" />
            <map name="Map5" id="Map5">
              <area shape="rect" coords="8,17,41,50" href="www.facebook.com/only_furniture" alt="facebook" />
              <area shape="rect" coords="45,17,78,50" href="www.twitter.com/only_furniture" alt="twitter" />
              <area shape="rect" coords="623,23,662,42" href="home.html" alt="home" />
              <area shape="rect" coords="683,25,724,41" href="about.html" alt="about" />
              <area shape="rect" coords="746,26,800,40" href="products.html" alt="products" />
              <area shape="rect" coords="827,25,881,41" href="location.html" />
<area shape="rect" coords="82,17,115,50" href="feed.onlyfurniture.com" alt="rss" />
            <area shape="rect" coords="911,25,958,42" href="contact.html" alt="contact" />
          </map>
    </div><!--FOOTER CLOSING DIV-->
</div><!--CONTAINER CLOSING DIV-->

<script type="text/javascript">
swfobject.registerObject("FlashID");
</script>
</body>
</html> 
```

这是我的 CSS：

```
#container {
    background-color: #FFF;
    height: 1060px;
    width: 990px;
    margin: auto;
}
#header {
    background-color: #FFF;
    height: 57px;
    width: 990px;
}
#logo {
    background-color: #FFF;
    height: 57px;
    width: 185px;
    margin-left: 10px;
    float: left;
}
#banner {
    height: 195px;
    width: 970px;
    margin-right: 10px;
    margin-left: 10px;
    clear: both;
}
#location {
    float: left;
    height: 57px;
    width: 153px;
    clear: none;
}
#contact {
    float: left;
    height: 57px;
    width: 155px;
    margin-right: auto;
    clear: none;
}

#tagline {
    width: 970px;
    height: 90px;
    margin-right: 10px;
    margin-left: 15px;
    margin-top: auto;
}

#second {
    height: 504px;
    width: 779px;
    margin-right: 107px;
    margin-left: 107px;
    clear: none;
    border: thin solid #0fb5b1;
}

h1 {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 24px;
    color: #0fb5b1;
    text-decoration: none;
    font-weight: normal;
    margin-left: 125px;
    margin-top: 40px;
    margin-right: 125px;
    letter-spacing: 1.2px;
    text-align: left;
}
h2 {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 20px;
    font-weight: normal;
    text-decoration: none;
    color: #666666;
    margin-top: 63px;
}
h3 {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: normal;
    color: #333333;
    text-decoration: none;
}

h4 {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 24px;
    font-weight: normal;
    color: #0fb5b1;
    text-decoration: none;
}
h5 {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    font-weight: normal;
    color: #333333;
    text-decoration: none;
}
#footer {
    height: 63px;
    width: 970px;
    margin-top: 47px;
    margin-right: 10px;
    margin-bottom: 10px;
    margin-left: 12px;
    border: thin solid #0fb5b1;
    clear: both;
    float: left;
}

#block1 {
    float: left;
    height: 504px;
    width: 393px;
}
#ruet_text {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: normal;
    color: #333333;
    text-decoration: none;
    height: auto;
    width: 190px;
    margin-right: 10px;
    float: left;
    text-align: center;
    padding-top: 10px;
}
#cubes_text {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: normal;
    color: #333333;
    text-decoration: none;
    height: auto;
    width: 180px;
    float: right;
    text-align: center;
    padding-top: 6px;
}

#second a:link {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: normal;
    color: #333333;
    text-decoration: underline;
}

#second a:visited {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: normal;
    color: #333333;
    text-decoration: underline;
}

#second a:hover {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: normal;
    color: #0fb5b1;
    text-decoration: underline;
}

#block1_text {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: normal;
    color: #333333;
    text-decoration: none;
    height: auto;
    width: auto;
    text-align: center;
    padding-top: 10px;
}

#block2_image {
    height: 255px;
    width: 200px;
    float: left;
}

#block2 {
    float: right;
    height: 504px;
    width: 380px;
    clear: none;
}

#block2_text {
    float: right;
    height: 250px;
    width: 380px;
}
#home {
    float: left;
    height: 57px;
    width: 171px;
}
#about {
    float: left;
    height: 57px;
    width: 158px;
}
#products {
    float: left;
    height: 57px;
    width: 153px;
}
#text {
    height: 284px;
    width: 361px;
}
#chair {
    float: left;
    height: 221px;
    width: 152px;
}
#cubes {
    float: right;
    height: 221px;
    width: 209px;
}
#block2_chair {
    float: left;
    height: 146px;
    width: 188px;
    margin-left: 5px;
}
#block2_cubes {
    float: right;
    height: 146px;
    width: 180px;
}
#about_tag {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 24px;
    font-weight: normal;
    color: #0fb5b1;
    text-decoration: none;
    float: none;
    text-align: center;
    padding-bottom: 20px;
    margin-left: 150px;
    width: 700px;
    height: 50px;
}
#about_second {
    border: thin solid #0fb5b1;
    height: 560px;
    width: 928px;
    margin-left: 30px;
    float: none;
    margin-right: auto;
}
#about_block1 {
    height: 520px;
    width: 440px;
    float: left;
    clear: both;
}

#about_block1_text {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: normal;
    color: #333333;
    text-decoration: none;
    height: auto;
    width: auto;
    padding-left: 48px;
    padding-top: 5px;
}
#about_block2 {
    height: 550px;
    width: 500px;
    float: right;
    margin-left: 30px;
}
#about_block2_image {
    float: left;
    height: 255px;
    width: 475px;
}
#about_block2_text {
    float: left;
    height: auto;
    width: 440px;
    clear: both;
    margin-top: 10px;
    margin-left: 47px;
}
#contact_tagline {
    text-align: center;
}
#contact_second {
    border: thin solid #0fb5b1;
    height: 550px;
    width: 965px;
    margin-left: 14px;
    float: left;
    margin-right: auto;
    clear: both;
}

#contact_block1 {
    height: 114px;
    width: 948px;
    float: left;
    clear: both;
    padding-left: 30px;
}

#contact_block1 a:link {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: normal;
    color: #0fb5b1;
    text-decoration: underline;
}

#contact_block1 a:visited {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: normal;
    color: #0fb5b1;
    text-decoration: underline;
}

#contact_block1 a:hover {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: normal;
    color: #333333;
    text-decoration: underline;
}
#contact_block2 {
    float: left;
    height: 420px;
    width: 950px;
    clear: none;
}
#contact_block2_image {
    float: left;
    height: 374px;
    width: 500px;
    padding-top: 35px;
    clear: none;
}

#contact_block2_text {
    height: 125px;
    width: 415px;
    clear: none;
    float: right;
}
#about_form {
    height: 280px;
    width: 400px;
    float: right;
    clear: none;
}
#about_form_left {
    height: 120px;
    width: 150px;
    float: left;
    position: relative;
    padding-top: 35px;
}
#about_form_right {
    float: right;
    height: 150px;
    width: 150px;
    clear: right;
}

#about_form_comment {
    height: 201px;
    width: 415px;
} 
```

我设法让它们出现在彼此的下方，这是以前没有发生过的。但我似乎无法让他们成为我需要他们成为的样子。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T23:35:34.273

目前您有：

```
 <h5> Name:<Br />
            <input type="text" name="your_name" /> 
            </h5> 
```

删除`<br/>`得到：

```
 <h5> Name:
                <input type="text" name="your_name" /> 
                </h5> 
```

工作得很好：

[http://jsfiddle.net/VSRSE/](http://jsfiddle.net/VSRSE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:16:24.750

重新排列 div 和样式

```
h5
{
     display: inline-block
} 
```

应该可以正常工作，尽管您还必须增加包含它们的 div 的宽度，因为现在它们将宽度限制为单列。他们不能都适合。

更新的演示（删除了宽度）：http: [//jsfiddle.net/wFKQT/2/](http://jsfiddle.net/wFKQT/2/)

# android - 从 AlertDialog 返回字符串

> ID：12270699
> 
> 赞同：0
> 
> 时间：2012-09-04T20:12:23.220
> 
> 标签：android, android-alertdialog

我正在研究 android 项目，我试图显示一个包含`CharSequence`数组的 AlertDialog，当单击它时，它应该返回字符串。

下面是我正在使用的代码

```
String fileName = "";
        //Collect the files from the backup location
        String filePath = Environment.getExternalStorageDirectory().getPath() + "/BoardiesPasswordManager";
        File f = new File(filePath);

        File[] files = f.listFiles();
        final CharSequence[] fileNames = new CharSequence[files.length];
        if (files.length > 0)
        {
            for (int i = 0; i < files.length; i++)
            {
                fileNames[i] = files[i].getName();
            }
        }

        String selectedFile = "";
        AlertDialog.Builder builder = new AlertDialog.Builder(context);
        builder.setTitle("Choose Backup File");
        builder.setItems(fileNames, new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int item) {
                fileName = fileNames[item].toString();
            }
        });
        AlertDialog alert = builder.create();
        alert.show();

        return fileName; 
```

如您所见，我试图将文件名设置为数组中的选定项，但 Eclipse 一直说`String fileName`需要`final`输入，但显然我无法将其设置为选定字符串的值。如何设置变量以便返回字符串。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:18:36.993

这里的问题是对何时执行“return fileName”的误解。显然，只有在用户做出选择*后执行此代码才有效。*但是，它实际上会在之前执行。事实上，它会在你调用 alert.show() 后立即执行。

最好从函数范围中删除 fileName 并在单击事件中添加函数调用，例如：

```
public void onClick(DialogInterface dialog, int item){
    String fileName = fileNames[item].toString();
    doSomethingWithTheFile(fileName);
} 
```

此外，您的原始函数将不再返回任何内容，它只会设置您的对话框。

# ios - UIActivityIndi catorView 在执行 UIView 的 drawrect 函数时

> ID：12270700
> 
> 赞同：1
> 
> 时间：2012-09-04T20:12:24.667
> 
> 标签：ios, uiview, drawrect, uiactivityindicatorview

由于我必须在 UIview 中绘制很多点，我想在 UIView 上显示一个活动指示器视图。

我尝试过这样的事情，但它不起作用。

```
-(void) drawRect:(CGRect)rect
{
     [self.activityIndicatorView startAnimating];

     CGContextRef cr = UIGraphicsGetCurrentContext();
     // Lots of CG functions (take a few seconds)

     [self.activityIndicatorView startAnimating];
} 
```

如何在绘图时显示纺车？

* * *

使用解决方案进行编辑（感谢@dasblinkenlight）：

两个 UIImageView，一个用作占位符（UIActivityIndi​​catorView 运行的地方），另一个用于绘制 CG 内容，名为 Renderer。

如此[处](https://stackoverflow.com/a/12235753/335858 "这里")所述，Renderer 类编写了一个 UIImage。完成占位符后将drawrect调用放在另一个队列（背景）中可以使用要显示的图像。

那是代码：

> dispatch_queue_t myQueue = dispatch_queue_create("MyQ​​ueue", 0);
> 
> ```
> dispatch_async(myQueue, ^{
>     [self.renderer drawRect:self.placeholder.bounds];
> 
>     dispatch_async(dispatch_get_main_queue(), ^{
>         [self.placeholder setImage:[self.renderer renderedImage]];
>     });
> }); 
> ```

我仍然不明白为什么我必须直接调用 drawRect 函数，而不是 setNeedDisplay。可能是因为它在后台运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:29:33.323

你不能这样做：在你`drawRect`的执行过程中，不能对屏幕进行其他更新；旋转齿轮将没有机会被绘制或更新。

如果您`drawRect`需要几秒钟，您应该重新考虑您的策略：也许您可以将绘图密集型代码隔离在一个绘制到内存位图的函数中，显示一个`UIImageView`带有占位符图像的位置，该图像将由您的`drawRect`代码绘制，在后台线程中进行渲染，并用`UIImageView`您的代码绘制的图像替换图像。

# javascript - 查看我的 html 标记时，一个属性似乎一直被命名为其他名称

> ID：12270702
> 
> 赞同：1
> 
> 时间：2012-09-04T20:12:35.273
> 
> 标签：javascript, jquery, css, attributes

我有一个自定义属性添加到我的 html 文档中，并相应地在页面顶部定义了它。

让我感到困惑的是，即使我将它分配给一个对象，当创建对象时，它也完全是小写的。我不确定为什么。下面的例子：

```
var inputControlType = ""
var n = $("<div class = 'draggable' style='position:absolute;'>");
n.attr("id", "layer" + $('div#divControls').children().length + "new");
n.hide();
inputControlType = "checkbox";
var inputControls = $("<input type = '" + inputControlType + "' />");
inputControls.attr("id", "el" + $('#divControls').children().length + "new");
inputControls.attr("disabled", "true");
inputControls.css("font-family", "Microsoft Sans Serif");
inputControls.css("font-size", "12pt");
n.attr("elType", "3");
n.html("<span>" + inputControls.clone().wrap('<p>').parent().html() + "<label for='" + $('div#divControls').children().length + "new' style='font-size: 12pt; font-family: Microsoft Sans Serif;'>Default Text</label></span>").appendTo($("#divControls")); 
```

在上面的代码中，您会看到 --n.attr("elType","3");-- 但是当我在标记中检查它时，它是 eltype="3"。这不好，因为 elType 是未定义的。

标记：

```
<div style="left: 665px; top: 183px; display: block; position: absolute; cursor: move; background-color: pink;" id="layer37new" class="draggable ui-draggable" context="menuOne" menuid="el37new" eltype="3">
  <span>
    <input style="font-family: Microsoft Sans Serif; font-size: 12pt; cursor: move;" id="el37new" disabled="disabled" value="on" type="checkbox" context="menuOne" menuid="el37new">
    <label style="font-family: Microsoft Sans Serif; font-size: 12pt;" for="37new">
      Default Text
    </label>
  </span>
</div> 
```

我是否做错了什么，例如打印 eltype 而不是 elType？另外：不，将我对属性的引用从 elType 更改为 eltype 不是一个有效的答案。我只是不明白为什么它不会按照它写的方式行事。

# c# - 为什么编译器尝试并且无法将 Devart.Data.Oracle.OracleCommand 转换为 System.IDisposable？

> ID：12270710
> 
> 赞同：1
> 
> 时间：2012-09-04T20:13:04.620
> 
> 标签：c#, oracle, idisposable, dotconnect, oraclecommand

我编写了几个应用程序，其中我使用 Devart 的 DotConnect for Oracle 组件。在我目前的问题中，我看到了 Resharper 提出的几个新问题（如果忽略 Resharper 的输入，应用程序编译并运行良好）。

特别是我有几个（在 Resharper 的“C# 编译器错误”类别中——同样，编译器本身并没有真正抱怨这些）是：

*“无法将类型 'Devart.Data.Oracle.OracleCommand' 隐式转换为 'System.IDisposable'”*

为什么在其他项目中没有使用相同类型的代码时，现在这会成为一个问题，例如：

```
using (OracleCommand ocmd = new OracleCommand(query, oc)) { 
```

注意：如果我更改代码以使用如下隐式类型，我也会得到相同的 Resharper 批评/观察：

```
using (var ocmd = new OracleCommand(query, oc)) { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:19:34.357

根据[文档](http://www.devart.com/dotconnect/oracle/docs/Devart.Data.Oracle~Devart.Data.Oracle.OracleCommand.html)，它确实*实现*了`IDisposable`，正如我所期望的那样。（是的，它必须可以隐式转换才能`IDisposable`在 using 语句中使用。该语句的目的`using`是在其末尾处置资源，并且“一次性资源”的表示是`IDisposable`接口。 ..)

请注意，这里*真正的*C# 编译器没有问题，否则您将无法运行您的应用程序 - 这表明这是一个 ReSharper 问题。

可能性：

*   R# 可能有自己的 IL 解析，但由于某种原因在 DotConnect 库上失败
*   R# 可能以某种方式“丢失”了程序集（或未能加载它，例如）
*   您可能会以某种方式安装半身像

我会*先*卸载并重新安装 R#，然后清除所有 ReSharper 缓存目录，只是为了给事情一个相当干净的开始。尝试删除然后阅读对 DotConnect 的引用。

如果失败，我怀疑您最好与 JetBrains 支持人员交谈，因为它听起来确实是特定于 R# 的。我的经验是他们的技术支持*真的*很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:19:19.583

当你说`using (someExpresion) { ... }`，那`someExpression`一定是`IDisposable`。这就是说的全部意义`using`。

当控制离开 block`{ ... }`时，将检查是否`someExpression`是`null`，如果不是，`Dispose()`则保证在其上调用。

# delphi - 线程内访问函数结果

> ID：12270713
> 
> 赞同：0
> 
> 时间：2012-09-04T20:13:14.827
> 
> 标签：delphi, delphi-2010

我正在使用线程（再次），这总是很痛苦......我的线程类中有一个函数，它是私有的。该函数返回一个布尔结果，以检查某个 POP3 服务器是否有效。检查正在工作，我对其进行了测试，并且看起来至少可以工作，但是当我在 Thread.Execute 过程中尝试访问结果时遇到问题。我会解释更多，让我们去代码吧。 . 这里是声明：

```
type
  MyThread = class(TThread)
  public
    constructor Create(HostLine: string);
  protected
    procedure Execute; override;
    procedure MainControl(Sender: TObject);
  private
    Host: string;
    function CheckPOPHost: boolean; //this is the problematic function
  end; 
```

所以函数是这样的：

```
function MyThread.CheckPOPHost: boolean;
var
  MySocket: TClientSocket;
  SockStream: TWinSocketStream;
  Buffer: array[0..1023] of Char;
  ReceivedText: string;
begin
  Result:= false;
  FillChar(Buffer, SizeOf(Buffer), #0);
  MySocket:= TClientSocket.Create(Nil);
  MySocket.Port:= 110;
  MySocket.ClientType:= ctBlocking;
  MySocket.Host:= Host;
  MySocket.Active:= true;
  if (MySocket.Socket.Connected = true) then
    begin
      SockStream := TWinSocketStream.Create(MySocket.Socket, 1000);
      SockStream.WaitForData(10000);
      while (SockStream.Read(Buffer, SizeOf(Buffer)) <> 0) do
        ReceivedText:= ReceivedText + Buffer;
      if Length(ReceivedText) > 0 then
        ReceivedText:= PAnsiChar(ReceivedText);
      if AnsiStartsStr('+', ReceivedText) then
        Result:= true;
    end;
  SockStream.Free;
  MySocket.Free;
end; 
```

因此，如果您不想阅读，则无需阅读。但是我正在连接到某个远程主机，并接收它的文本，如果接收到的文本以“+”符号开头（POP3 服务器的默认值），我返回 true...但是当我尝试在 Thread.Execute 中执行此操作时：

```
 if CheckPOPHost = true then
    begin
      Form1.Memo1.Lines.Append('Valid HOST:: '+Host); 
```

只是不工作。我认为最好记住，如果在函数内部，而不是这样做：

```
 if AnsiStartsStr('+', ReceivedText) then
    Result:= true; 
```

我愿意：

```
 if AnsiStartsStr('+', ReceivedText) then
    Form1.Memo1.Lines.Append('Valid HOST:: '+Host); 
```

它工作正常......发生了什么？！

**编辑:: 我在 'if CheckPOPHost = true then' 行出现错误。由于某些未知原因，它给出了访问冲突错误。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T20:22:37.637

您正在从线程调用非线程安全的 VCL 方法。

```
Form1.Memo1.Lines.Append('Valid HOST:: '+Host); 
```

永远不要那样做。

将调用包装在`Synchronize( YourThread.SendString)`; 线程中的方法。

例子：

```
MyThread.SendString;
begin
  Form1.Memo1.Lines.Append('Valid HOST:: '+Host);
end; 
```

在你的线程中某处执行：

```
if CheckPOPHost = true then
  begin
    Synchronize(SendString); 
```

**更新 2：**

根据您关于在 中释放对象的评论`CheckPOPHost`：`try..finally`在这些对象周围加上块，并`try..except`在 CheckPopHost 内附加一个块。

**更新**

评论中出现了关于线程向导的讨论。如果您按照向导界面创建线程单元，这就是您所得到的：

```
unit Unit21;

interface

uses
  System.Classes;

type
  TMYTHREADTEST = class(TThread)
  private
    { Private declarations }
  protected
    procedure Execute; override;
  end;

implementation

{
  Important: Methods and properties of objects in visual components can only be
  used in a method called using Synchronize, for example,

      Synchronize(UpdateCaption);

  and UpdateCaption could look like,

    procedure TMYTHREADTEST.UpdateCaption;
    begin
      Form1.Caption := 'Updated in a thread';
    end;

    or

    Synchronize( 
      procedure
      begin
        Form1.Caption := 'Updated in thread via an anonymous method' 
      end
      )
    );

  where an anonymous method is passed.

  Similarly, the developer can call the Queue method with similar parameters as 
  above, instead passing another TThread class as the first parameter, putting
  the calling thread in a queue with the other thread.

}

{ TMYTHREADTEST }

procedure TMYTHREADTEST.Execute;
begin
  { Place thread code here }
end;

end. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T22:45:28.793

你在打电话

```
SockStream.Free 
```

即使您没有输入创建 SockStream 的块。这意味着您的代码可以在未初始化的变量上调用 Free。这是我可以看到访问冲突的唯一原因。您需要将 Free 移动到 if 块内。

顺便说一句，在创建对象时始终使用 try/finally：

```
SockStream := TWinSocketStream.Create (MySocket.Socket, 1000);
try
  ....
finally
  SockStream.Free;
end; 
```

如果你这样写，编译器不会让你把 Free 放在错误的块中。

你应该对 MySocket 做同样的事情。

并且不要从线程访问您的 GUI，但我认为其他人已经清楚地表明了这一点！

# python - 为什么输出到文件不起作用但打印语句起作用？

> ID：12270716
> 
> 赞同：0
> 
> 时间：2012-09-04T20:13:27.707
> 
> 标签：python

我有以下代码：

```
for node, value in sorted(d.iteritems()):
    outfile.write([node] + value)
    print(node, value) 
```

我阅读了一些关于此的不同 SO 帖子，但仍然有些困惑。print 语句完美运行，在解释器中正确打印键和值。但是我想不出一种让 outfile.write() 语句在这里工作的方法。非常感谢任何澄清！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:14:29.690

`print`自动将给定变量转换为字符串（使用`__repr__`方法）。`file.write`才不是。您仍然可以使用以下内容写入文件：

```
outfile.write("%s %s\n" % (node, value)) 
```

（我还添加了一个换行符）。但是，您在问题中没有明确说明`node`和的类型`value`。该表达式`[node] + value`暗示这`value`是一个列表。如果您希望列表以逗号分隔（正如您的问题标题所暗示的那样），您可以将它们组合起来并用逗号将它们连接起来，如下所示：

```
outfile.write(",".join(map(str, [node] + value))) 
```

# php - Wordpress 正则表达式匹配前缀/类别 1/类别 2/页码

> ID：12270720
> 
> 赞同：1
> 
> 时间：2012-09-04T20:13:52.410
> 
> 标签：php, regex, wordpress, rewrite

我编写了一个 Wordpress 插件，它查看品牌名称列表并转储出以它们开头的字母的有序列表，例如 ABCD ...。

当用户点击任何给定的字母时，它会列出以该字母开头的品牌名称，例如 Abus、ABike、Animal 等

然后，目的是让用户点击一个品牌名称，并显示该品牌分布在几个页面上的项目列表。

因此，url 结构将是：

[http://www.domain.com/brands/A/Abus/1](http://www.domain.com/brands/A/Abus/1)

[http://www.domain.com/brands/B/Bontrager/1](http://www.domain.com/brands/B/Bontrager/1)

ETC

因为这是在 Wordpress 中试图让我了解需要进入 add_rewrite_rule 的正则表达式。通过这样做，我可以让它与第一部分（上面示例中的 /A/ 或 /B/ ）匹配：

```
add_rewrite_rule('brands/?([^/]*)', 'index.php?pagename=brands&brand_letter=$matches[1]&brand_name=$matches[2]&page=$matches[3] 
```

但我无法让它与品牌名称本身或页码相匹配。请注意，品牌名称和编号并不总是在网址中。格式为：

/brands {always} / brand_letter {always} / brand_name {sometimes} / 页码 {occasionally}

有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:29:23.963

将您的正则表达式更改为：

```
brands/(\w)(?:/([^/]+)(?:/(\d+))?)?
       |   |   |      |   |     | |
       |   |   |      |   |     | |
       |   +---|------|---|-----|-Optional brand name and page number.
       |       |      |   |     |
       |       |      +---|-----Optional page number.
       |       |          |
       |       |          $3, the page number.
       |       |
       |       $2, the brand name.
       |
       $1, the brand letter. 
```

# ruby-on-rails - 在 Ruby on Rails 中设计 Gem 重置密码链接？

> ID：12270726
> 
> 赞同：0
> 
> 时间：2012-09-04T20:14:40.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在使用 Devise gem，并且我有一个初始化程序来设置邮件，如下所示：

```
 ActionMailer::Base.smtp_settings = {
       :enable_starttls_auto => true,
       :address            => 'smtp.gmail.com',
       :port               => 587,
       :domain             => 'mydomain.com',
       :authentication     => 'plain',
       :user_name          => 'info@mydomain.com',
       :password           => 'password' 
    } 
```

在 devise.rb 我还设置了以下内容：

```
config.mailer_sender = "info@mydomain.com" 
```

我遇到的问题是，当我尝试发送“忘记密码”电子邮件时。我的应用程序确实发送了电子邮件，但允许我重置电子邮件的链接包含 gmail 域，如下所示：

**http://gmail.com/users/password/edit?reset_password_token=JDKdSyhtDBkyq4Sgs2J3**

我显然需要该域作为我的应用程序的域，以便用户可以重置他们的密码。我需要改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:19:13.717

诡异的配置，我一般简单设置：

```
config.action_mailer.default_url_options = { :host => "example.com" } 
```

在我的生产或开发`.rb`文件中

* * *

刚刚理解，`config.mailer_sender = "info@mydomain.com"`是为了填写你的`from`字段。

# gwt - 锚标记右键单击和 listgrid 设置上下文菜单之间的冲突

> ID：12270729
> 
> 赞同：0
> 
> 时间：2012-09-04T20:15:06.263
> 
> 标签：gwt, contextmenu, anchor, smartgwt, listgrid

我必须将文档名称显示为 listgrid (smartgwt) 列中的链接。我们已经在网格上捕获了右键单击处理程序，并显示了我们自己的自定义上下文菜单，它工作正常。现在由于要求，文档名称在单击文档打开时显示为超链接（锚标记）。但是现在当用户单击超链接时，第一次出现带有打开，在新选项卡中打开的普通菜单（我不想这样做）。

单击其他地方然后右键单击超链接会显示我们自己的自定义菜单（我希望每次都来），但它不起作用。但是当右键单击列表网格的其他部分时，相同的菜单可以正常工作。我尝试了很多东西，但它不能正常工作。请帮忙。JSNI 也是可行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:11:47.447

我通过捕获右键单击并使用 JSNI 根据我的需要自定义它来解决问题。

# java - 从给定的 RDF(.ttl) 文件中查找 RDF 映射并以 JSON 格式获取输出

> ID：12270731
> 
> 赞同：0
> 
> 时间：2012-09-04T20:15:09.037
> 
> 标签：java, json, rdf, semantic-web, ontology

我是拉克什。我正在研究语义网并遇到了一个问题。我有 10 个 .ttl(Turtle) 文件。我需要从这些文件中找到映射并以 JSON 格式显示输出。整个项目必须像一个独立的应用程序。

我搜索了解决方案。我发现我需要找到 API 来进行映射。然后我想我需要编写一个 Java 程序来获取 JSON 输出。我是语义网的新手，需要你的帮助。请大家帮帮我。

拉克什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:19:53.017

您可以使用耶拿。它目前是一个 Apache 项目，为您提供了一个强大的库，用于处理 RDF 模型和图形以及更多内容。

你可以在这里找到它：http: [//jena.apache.org/](http://jena.apache.org/)

文档中的这个页面（RDF I/O）可能就是你现在所需要的：http: [//jena.apache.org/documentation/io/iohowto.html](http://jena.apache.org/documentation/io/iohowto.html)

# url-rewriting - Nginx 将 url 参数重写为子域

> ID：12270733
> 
> 赞同：2
> 
> 时间：2012-09-04T20:15:13.963
> 
> 标签：url-rewriting, nginx

有许多我希望重定向到子域的不同 url 参数。

mydomain.com/blog/title-of-the-post -> blog.mydomain.com/title-of-the-post

和

mydomain-com/taxonomy/term/id -> mydomain.com/id

所以逻辑几乎是重写，但想要抓取并使用一些 url。这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:08:16.960

是的，您可以在重写中使用反向引用，例如：

```
location /blog/ {
   rewrite ^/blog/(.*)$ http://blog.mydomain.com/$1 permanent;
} 
```

同样的事情也适用于你的其他重写

更新：

如果您想保留博客部分，则不再更改 $uri，只更改 $host，然后变得更容易：

```
location /blog/ {
  rewrite ^ http://blog.mydomain.com/$uri permanent;
} 
```

注意：nginx 标准变量列在[http://wiki.nginx.org/HttpCoreModule#Variables](http://wiki.nginx.org/HttpCoreModule#Variables)

对于多个参数，您可以使用进一步的反向引用 $2 $3 等等（只需确保您有分组，即括号，围绕您要在正则表达式中使用的部分），例如：

```
location /blog/ {
  rewrite ^/blog/([0-9]{4})/(.*)$ http://blog.mydomain.com/$1/$2 permanent;
} 
```

这将匹配您博客网址中的 4 位数年份，例如，请参阅[http://www.regular-expressions.info/brackets.html](http://www.regular-expressions.info/brackets.html)以获取有关正则表达式和反向引用的更多信息

# c# - 在 C# 中获取 NamedRange 控件的句柄

> ID：12270735
> 
> 赞同：4
> 
> 时间：2012-09-04T20:15:22.053
> 
> 标签：c#, .net, excel, user-controls, vsto

我正在使用 C# (.NET 4.0) 为 Excel 2007 开发应用程序级插件。以前有人问过类似的问题>>

[https://stackoverflow.com/questions/11374023/resizing-namedrange-throws-a-controlnotfoundexception](https://stackoverflow.com/questions/11374023/resizing-namedrange-throws-a-controlnotfoundexception)

[C# excel 插件 - 访问控件](https://stackoverflow.com/questions/7152020/c-sharp-excel-addin-accessing-controls)

但是对他们的回应（如果有的话）对我不起作用。所以我想详细描述我正在尝试做的事情，以及当我尝试这样做时会发生什么。

非常简单地说，我的问题是，在代码中的其他地方实例化和初始化它们之后，我无法获取 NamedRange 控件对象来修改它们。

请继续阅读以获得更完整的描述。

当 AddIn 启动时，它会创建一个 NamedRange 控件并将其附加到特定工作表上的某些单元格 >>

```
Worksheet worksheet = Globals.Factory.GetVstoObject(
                Globals.ThisAddIn.Application.ActiveWorkbook.ActiveSheet);
Excel.Range cell = worksheet.Range["A1"];
_configParams.HeaderNamedRange = worksheet.Controls.AddNamedRange(cell, "HeaderCells");
_configParams.HeaderNamedRange.RefersTo = "=" + worksheet.Name + "!$A$1:$A$5"; 
```

AddIn 启动后，我希望允许用户重新指定此 NamedRange 控件可以指向的单元格。为此，我让用户选择一系列单元格，然后在合适的事件处理程序方法中获取所选单元格的位置（作为字符串）。

然后，我打算以编程方式重新指定上述 NamedRange 控件指向的单元格。我尝试了以下方法，但它们都不起作用。

[方法一]

```
Worksheet controlWorksheet = Globals.Factory.GetVstoObject(Globals.ThisAddIn.Application.ActiveWorkbook.ActiveSheet);
((NamedRange)(controlWorksheet.Controls["HeaderCells"])).RefersTo = newHeaderCellsLocation; 
```

在运行上述代码时，它会引发 ControlNotFoundException，并且我收到以下消息：

```
Microsoft.VisualStudio.Tools.Applications.Runtime.ControlNotFoundException was unhandled by user code
  Message=This document might not function as expected because the following control is missing: PortfolioHeaderCells. Data that relies on this control will not be automatically displayed or updated, and other custom functionality will not be available. Contact your administrator or the author of this document for further assistance.
  Source=Microsoft.Office.Tools.Excel.Implementation
  StackTrace:
       at Microsoft.Office.Tools.Excel.NamedRangeImpl.GetObjects()
       at Microsoft.Office.Tools.Excel.NamedRangeImpl.EnsureProxy()
       at Microsoft.Office.Tools.Excel.NamedRangeImpl.get_Proxy()
       at Microsoft.Office.Tools.Excel.NamedRangeImpl.AttachSupport()
       at Microsoft.Office.Tools.Excel.NamedRangeImpl.ResetControl()
       at Microsoft.Office.Tools.Excel.NamedRangeImpl.set_RefersTo(String value)
       at ExcelListenerAddIn.Configuration.ListenerConfigManager.ActivateListenerConfiguration(ListenerConfigParams newConfiguration, Boolean cameFromConfigFile) in C:\Users\jag201\Documents\Visual Studio 2010\Projects\PoC\ExcelListenerAddIn\Configuration\ListenerConfigManager.cs:line 97
       at ExcelListenerAddIn.TaskPanes.ListenerConfigurator._activateNewConfigButton_Click(Object sender, EventArgs e) in C:\Users\jag201\Documents\Visual Studio 2010\Projects\PoC\ExcelListenerAddIn\TaskPanes\ListenerConfigurator.cs:line 131
       at System.EventHandler.Invoke(Object sender, EventArgs e)
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
  InnerException: System.Runtime.InteropServices.COMException
       Message=Exception from HRESULT: 0x800A03EC
       Source=Microsoft.VisualStudio.Tools.Office.Runtime
       ErrorCode=-2146827284
       StackTrace:
            at Microsoft.VisualStudio.Tools.Office.Runtime.Interop.IHostItemProvider.GetHostObject(String primaryType, String primaryCookie, IntPtr& hostObject)
            at Microsoft.VisualStudio.Tools.Office.Runtime.DomainCreator.ExecuteCustomization.Microsoft.Office.Tools.IHostItemProvider.GetHostObject(Type primaryType, String primaryCookie)
            at Microsoft.Office.Tools.Excel.NamedRangeImpl.GetObjects()
       InnerException: 
```

[方法二]

然后我看到[通过 C# 设置 Excel 命名范围？](https://stackoverflow.com/questions/2416727/set-excel-named-ranges-via-c)因此尝试使用那里的答案中描述的方法：

```
Worksheet controlWorksheet = Globals.Factory.GetVstoObject(Globals.ThisAddIn.Application.ActiveWorkbook.ActiveSheet);
controlWorksheet.Names.Item("HeaderCells", Type.Missing, Type.Missing).RefersTo = newHeaderCellsLocation; 
```

在运行上述代码时，我收到以下异常和消息：

```
System.Runtime.InteropServices.COMException was unhandled by user code
  Message=Exception from HRESULT: 0x800A03EC
  Source=""
  ErrorCode=-2146827284
  StackTrace:
       at System.RuntimeType.ForwardCallToInvokeMember(String memberName, BindingFlags flags, Object target, Int32[] aWrapperTypes, MessageData& msgData)
       at Microsoft.Office.Interop.Excel.Names.Item(Object Index, Object IndexLocal, Object RefersTo)
       at ExcelListenerAddIn.Configuration.ListenerConfigManager.ActivateListenerConfiguration(ListenerConfigParams newConfiguration, Boolean cameFromConfigFile) in C:\Users\jag201\Documents\Visual Studio 2010\Projects\PoC\ExcelListenerAddIn\Configuration\ListenerConfigManager.cs:line 97
       at ExcelListenerAddIn.TaskPanes.ListenerConfigurator._activateNewConfigButton_Click(Object sender, EventArgs e) in C:\Users\jag201\Documents\Visual Studio 2010\Projects\PoC\ExcelListenerAddIn\TaskPanes\ListenerConfigurator.cs:line 131
       at System.EventHandler.Invoke(Object sender, EventArgs e)
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
  InnerException: 
```

因此，在这两种方法中，来自 HRESULT 的异常是相同的：0x800A03EC。此外，在我尝试获取 NamedRange 控件并重新指定它指向的单元格的行中引发了异常。

我已经单步执行了我的代码，并且当我尝试修改 NamedRange 对象时，确实存在 NamedRange 控件。

`controlWorksheet.Controls["HeaderCells"]`然后我使用以下代码检查了对象的类型>>

```
Worksheet controlWorksheet = Globals.Factory.GetVstoObject(Globals.ThisAddIn.Application.ActiveWorkbook.ActiveSheet);
System.Windows.Forms.MessageBox.Show((controlWorksheet.Controls["HeaderCells"]).ToString()); 
```

这会产生一个包含“Microsoft.Office.Tools.Excel.NamedRangeImpl”的 MessageBox。如果我没记错的话，Excel 对象模型没有公开此类型，所以我想知道问题是否是由于我将 NamedRangeImpl 对象转换为 NamedRange 控件对象造成的。

非常感谢您的帮助。如果我可以提供任何进一步的信息，请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:13:16.297

返回的对象类型没有问题。“Microsoft.Office.Tools.Excel.NamedRangeImp”类型旨在通过“Microsoft.Office.Tools.Excel.NamedRange”接口访问。

0x800A03EC 的 COM 异常向我表明，excel 将不允许您执行请求的操作（这也是如果您尝试将字符串值发送到将超过字符限制的单元格时会得到的错误代码） .

正如我通过运行以下代码验证的那样，多次设置 RefersTo 属性没有问题：

```
 Microsoft.Office.Tools.Excel.Worksheet worksheet = Globals.Factory.GetVstoObject(
            Globals.MercuryAddIn.Application.ActiveWorkbook.ActiveSheet);
        Excel.Range cell = worksheet.Range["A1"];
        Microsoft.Office.Tools.Excel.NamedRange r = worksheet.Controls.AddNamedRange(cell, "HeaderCells");
        r.RefersTo = "=" + worksheet.Name + "!$A$1:$A$5";

        r.RefersTo = "=" + worksheet.Name + "!$C$1:$C$5"; 
```

所以问题必须出在“newHeaderCellsLocation”变量中包含的字符串中。RefersTo 必须设置为范围的有效公式。你能仔细检查字符串的格式是否正确吗？

# sql - TSQL - 将价格调整为 0.05 和 0.09。UPDATE 正在产生 NULL？

> ID：12270737
> 
> 赞同：1
> 
> 时间：2012-09-04T20:15:29.103
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2005

我有一张桌子，PriceTable，

列 UPC (int), Price (money)

我正在尝试将价格列中的所有美分四舍五入，以 .x5 或 .x9 结尾。

如果价格的最后一位是 0-5，那么最后一位应该是 5。
如果价格的最后一位是 6-9，那么最后一位应该是 9。
示例

*   1.00 变为 1.05
*   1.21 到 1.25
*   1.26 到 1.29

我正在使用以下内容，但在更新之后，我得到了一些价格被更新为 NULL 的记录，我不知道为什么。它对 95% 的数据都正常工作，但我看不出与数据不同的地方。

我的想法是 (Round(Price,1,2) 给了我价格中的美元。从整体价格中减去它以获得美分，然后使用 CASE 语句将正确的 0.05 或 0.09 添加回价格。

```
UPDATE PriceTable
SET Price = ROUND(Price,1,2) + 
CASE 
WHEN Price -(ROUND(Price,1,2)) BETWEEN .00 AND .05 THEN .05
WHEN Price -(ROUND(Price,1,2)) BETWEEN .06 AND .09 THEN .09
END; 
```

有一个更好的方法吗？我无法理解为什么当所有美分场景都应该考虑在内时我会得到一个 NULL 的价格，即使没有，我仍然应该用 ROUND(Price,1,2) 获得价格的美元金额）。我不应该需要 ELSE，因为不应该有任何其他条件。

谢谢，

马歇尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T20:18:07.870

对于以 0.05 < ThatValue < 0.06 的值结尾的所有价格，您将获得 NULL 值。将其更改为 else，0.050018 将四舍五入为 0.06，而不是 NULL。

```
UPDATE PriceTable
SET Price = ROUND(Price,1,2) + 
CASE 
WHEN Price -(ROUND(Price,1,2)) BETWEEN .00 AND .05 THEN .05
ELSE .09
END; 
```

# java - JTable：按整数排序

> ID：12270738
> 
> 赞同：3
> 
> 时间：2012-09-04T20:15:29.587
> 
> 标签：java, swing, jtable, defaulttablemodel, tablerowsorter

我有一个 JTable，有时我想按整数（大小列）对行进行排序，有时按字符串（文件路径）对行进行排序。所以我在谷歌上搜索它，我已经到了这里。我知道我必须重写**DefaultTableModel**的一个方法，称为**getColumnClass**。所以我在这里链接我的代码。

```
class Personal_model extends DefaultTableModel{

 Personal_model(String[][] s,String[] i){
      super(s,i);
 }

 @Override
 public Class<?> getColumnClass(int columnIndex){

      if (columnIndex!=2) 
              return String.class;
      else
              return Integer.class;

 }
} 
```

这里是创建表的代码，由模型'Personal_model'; 我还设置了行排序器。但这一切都行不通！！！！！！！请帮帮我

```
 modeltable = new Personal_model(data,col);   
      table = new JTable(modeltable);
      table.setRowSorter(new TableRowSorter<Personal_model>(modeltable)); 
```

通常，如果没有我的排序器，一切都可以完美地可视化，并且字符串会正确排序（很明显，因为通常它都是按字符串排序的......）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T20:37:42.253

1) 请阅读[包含 TableRowSorter 示例的 JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)教程，关于 RowSorter 的问题必须在您的代码中

2) 默认情况下，您可以对 ColumnClass 使用以下定义，

```
public Class getColumnClass(int c) {
   return getValueAt(0, c).getClass();
} 
```

3）或者你可以硬编码

```
 @Override
    public Class<?> getColumnClass(int colNum) {
        switch (colNum) {
            case 0:
                return Integer.class;
            case 1:
                return Double.class;
            case 2:
                return Long.class;
            case 3:
                return Boolean.class;
            case 4:
                return String.class;
            case 5:
                return Icon.class;
            default:
                return String.class;
        }
    } 
```

4）或覆盖`RowSorter`（注意疯狂的代码）

![在此处输入图像描述](../Images/18aa18fb4bc6b0c77d67b9803ea82d11.png) ![在此处输入图像描述](../Images/b73376e78a1dbc5bf3911739e3017ff2.png)

```
import com.sun.java.swing.Painter;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics2D;
import java.util.ArrayList;
import java.util.List;
import javax.swing.*;
import javax.swing.table.*;

public class JTableSortingIconsForNimbus extends JFrame {

    private static final long serialVersionUID = 1L;
    private JTable table;
    private JTable table1;
    private static Icon ascendingSortIcon;
    private static Icon descendingSortIcon;

    public JTableSortingIconsForNimbus() {
        Object[] columnNames = {"Type", "Company", "Shares", "Price"};
        Object[][] data = {
            {"Buy", "IBM", new Integer(1000), new Double(80.50)},
            {"Sell", "MicroSoft", new Integer(2000), new Double(6.25)},
            {"Sell", "Apple", new Integer(3000), new Double(7.35)},
            {"Buy", "Nortel", new Integer(4000), new Double(20.00)}
        };
        DefaultTableModel model = new DefaultTableModel(data, columnNames) {

            private static final long serialVersionUID = 1L;

            @Override
            public Class getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
        };
        table = new JTable(model) {

            private static final long serialVersionUID = 1L;

            @Override
            public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
                Component c = super.prepareRenderer(renderer, row, column);
                int firstRow = 0;
                int lastRow = table.getRowCount() - 1;
                if (row == lastRow) {
                    ((JComponent) c).setBackground(Color.red);
                } else if (row == firstRow) {
                    ((JComponent) c).setBackground(Color.blue);
                } else {
                    ((JComponent) c).setBackground(table.getBackground());
                }
                return c;
            }
        };
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane, BorderLayout.NORTH);
        table1 = new JTable(model) {

            private static final long serialVersionUID = 1L;

            @Override
            public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
                Component c = super.prepareRenderer(renderer, row, column);
                int firstRow = 0;
                int lastRow = table1.getRowCount() - 1;
                if (row == lastRow) {
                    ((JComponent) c).setBackground(Color.red);
                } else if (row == firstRow) {
                    ((JComponent) c).setBackground(Color.blue);
                } else {
                    ((JComponent) c).setBackground(table1.getBackground());
                }
                return c;
            }
        };
        table1.setPreferredScrollableViewportSize(table1.getPreferredSize());
        JScrollPane scrollPane1 = new JScrollPane(table1);
        //UIDefaults nimbusOverrides = new UIDefaults();
        //nimbusOverrides.put("Table.ascendingSortIcon", ascendingSortIcon);
        //nimbusOverrides.put("Table.descendingSortIcon", descendingSortIcon);
        //table1.putClientProperty("Nimbus.Overrides", nimbusOverrides);
        //UIManager.getLookAndFeelDefaults().put("Table.ascendingSortIcon", ascendingSortIcon);
        //UIManager.getLookAndFeelDefaults().put("Table.descendingSortIcon", descendingSortIcon);
        UIManager.getLookAndFeelDefaults().put("TableHeader[Enabled].ascendingSortIconPainter",
                new FillPainter1(new Color(255, 255, 191)));
        UIManager.getLookAndFeelDefaults().put("TableHeader[Enabled].descendingSortIconPainter",
                new FillPainter1(new Color(191, 255, 255)));

        SwingUtilities.updateComponentTreeUI(table1);
        add(scrollPane1, BorderLayout.SOUTH);
        TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(table.getModel()) {

            @Override
            public void toggleSortOrder(int column) {
                if (column >= 0 && column < getModelWrapper().getColumnCount() && isSortable(column)) {
                    List<SortKey> keys = new ArrayList<SortKey>(getSortKeys());
                    if (!keys.isEmpty()) {
                        SortKey sortKey = keys.get(0);
                        if (sortKey.getColumn() == column && sortKey.getSortOrder() == SortOrder.DESCENDING) {
                            setSortKeys(null);
                            return;
                        }
                    }
                }
                super.toggleSortOrder(column);
            }
        };
        table.setRowSorter(sorter);
        table1.setRowSorter(sorter);
    }

    static class FillPainter1 implements Painter<JComponent> {

        private final Color color;

        public FillPainter1(Color c) {
            color = c;
        }

        @Override
        public void paint(Graphics2D g, JComponent object, int width, int height) {
            g.setColor(color);
            g.fillRect(0, 0, width - 1, height - 1);
        }
    }

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
            ascendingSortIcon = UIManager.getLookAndFeelDefaults().getIcon("Table.ascendingSortIcon");
            descendingSortIcon = UIManager.getLookAndFeelDefaults().getIcon("Table.descendingSortIcon");
            UIManager.getLookAndFeelDefaults().put("TableHeader[Enabled].ascendingSortIconPainter",
                    new FillPainter1(new Color(127, 255, 191)));
            UIManager.getLookAndFeelDefaults().put("TableHeader[Enabled].descendingSortIconPainter",
                    new FillPainter1(new Color(191, 255, 127)));
        } catch (Exception fail) {
        }
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JTableSortingIconsForNimbus frame = new JTableSortingIconsForNimbus();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T22:33:32.587

Jimmy，正如 mKorbel 所指出的，您的数据模型由`String`s 组成。将数字排序为`String`不会按自然顺序排序（10 将落在 1 之前）。

你需要先改变你的模型

```
Personal_model(String[][] s,String[] i){ 
```

至

```
Personal_model(Object[][] s,String[] i){ 
```

然后，您需要确保放入模型中的数据是正确的。我们没有那段代码，但是不用`String`来表示里面的数字`Object[][]`

IE

```
Object[][] myData = new Object[1][2];
myData[0][0] = "This is a String value";
myData[0][1] = 1; // This is not a String value 
```

请全部归功于 mKorbel

# javascript - 动态 div 高度 jQuery.Load() 不起作用

> ID：12270740
> 
> 赞同：0
> 
> 时间：2012-09-04T20:15:38.570
> 
> 标签：javascript, jquery, height, quickbase

我正在尝试根据使用 jQuery.load() 加载到其中的内容动态更改 div 容器的高度。我尝试了许多不同的代码排列方式，在这里搜索和查看了许多帖子，并阅读了有关 jQuery 的文档。如果我在页面加载后在 firebug 控制台中运行它，但在保存代码并与页面一起加载时，我的函数将起作用。如果脚本由页面运行，控制台会为所有表格高度输出“0”，但是当我在 firebug 中运行它时，它会给出正确的高度。

代码如下。基本上，这是一个用户定义的页面，我在其中粘贴了这个脚本，并且 div #element4 位于 jQuery 一个 jQuery 选项卡中。你能在我的代码中发现错误或帮助我让它工作吗？

```
$("#element4").load("<dbid>?act=API_GenResultsTable&qid=8", function(response, status, xhr) {
 if (status == "success") {
    $('#element4 table').each( function(x, y){
    var max_height = 0;  
    var yHeight = $(y).height();
    max_height = ( yHeight > max_height) ? yHeight : max_height;
    $('#element4').height(max_height);
    console.log(max_height);
  });
  }
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:08:46.887

您正在将`max_height`每个`table`. `each`尝试将其与高度的最终设置一起移出循环：

```
var max_height = 0; // init max
// find tallest table
$('#element4 table').each(function(x, table) {
    var yHeight = $(table).height();
    max_height = (yHeight > max_height) ? yHeight : max_height;
});
$('#element4').height(max_height); // set height
console.log(max_height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:35:37.610

在使用 $("#tabs").tabs(); 创建选项卡之前，我可以通过使用 $.load() 加载外部内容来找到该问题的解决方法。然后我使用了类似于上面发布的脚本。这是最后运行的。所以加载内容，创建标签，调整 div 的大小。

```
$('#ELEMENTID table').each(function (x, y) { //find table heights in the <div> 
var max_height = 0;
var yHeight = $(y).innerHeight();
max_height = (yHeight > max_height) ? yHeight : max_height;
var compHeight = max_height + 24; //adding 24 because it was the standard height for the smallest of 3 tables.. 
$('#element3').height(compHeight);
console.log(compHeight); 
```

如果有人有更好的解决方案，将不胜感激。

# javascript - 当前命名空间/类中的 JavaScript 子命名空间/类的语法是什么？

> ID：12270744
> 
> 赞同：5
> 
> 时间：2012-09-04T20:16:20.130
> 
> 标签：javascript

我最近一直在使用 JavaScript，并创建了一些大型函数集合。我发现需要有子功能，我想从主库中分离出来，但仍然包含在主库中，但还没有找到足够优雅的方法来做到这一点。

这是我目前使用的几个示例

所以我通常像这样设置我的**主库**

```
// Main library
var animals = function(settings){
    // Main library stuff
} 
```

添加单独封装但仍属于主库的子类/子功能...

这是第一种使用对象文字表示法的方法

```
animals.prototype.dogs = {
    addDog: function(){
        // Can only access the dogs object
        var test = this;
    },
    removeDog: function(){}
}

// Usage of the whole thing
var animalsInstance = new animals({a: 1, b: 3});
animalsInstance.dogs.addDog(); 
```

虽然我真的很喜欢 this 的语法，但我永远无法真正使用它，因为无法在 dogs 对象内的任何函数中引用动物实例。所以我想出了这个符号作为替代

```
animals.prototype.dogs = function(){
    var parent = this;
    return {
        addDog: function(){
            // The animals instance
            var test = parent;
            // The dogs instance
            var test2 = this;
        },
        removeDog: function(){}
    }
}

// Usage
var animalsInstance = new animals({a: 1, b: 3});
animalsInstance.dogs().addDog(); 
```

**虽然现在我可以从狗功能的所有子功能内部访问动物实例，但我不太喜欢我所做的这种有点hacky 的方式。有没有人有更清洁的方法？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T19:44:03.800

也许你正在寻找这样的东西......

这将允许您使用以下语法 tinyFramework.Utilities.Storage.setItem() tinyFramework.Elements.Modals.createModal()

```
var tinyFramework = {

    Utilities: {
        Storage: {
            setItem: function(){
            //do stuff
            },

            getItem: function(){
            //do stuff
            }
        },
        Helpers: {

        }
    },

    Elements: {

        Modals: {

            createModal: function(){
            },
            closeModal: function(){
            }
        }
    }
} 
```

# c# - 如何绑定到用户控件的父窗口 IsActive 属性

> ID：12270745
> 
> 赞同：0
> 
> 时间：2012-09-04T20:16:19.617
> 
> 标签：c#, wpf, mvvm, user-controls, window

我有我的 WPF 控件集，因此它只有以下代码：

```
 InitializeComponent();
  DataContext = model; 
```

但是，我现在遇到了一个问题，我不希望在窗口不活动时发生某些操作，因此我在 ViewModel 上创建了一个 IsActive 标志，但由于我的代码来自用户控件，而不是窗口，如果没有用户控件中的代码，我无法做到这一点。这是我能做的最好的，还是有真正的 MVVM 方法来解决这个问题

试过这个，但遇到运行时错误，说`IsActiveProperty`不能绑定数据。

```
 Loaded += (sender, args) =>
              {
                var parentWindow = Window.GetWindow(this);
                if (parentWindow == null)
                  return;
                var isActiveWindowBinding = new Binding {Source = model.IsActive};
                parentWindow.SetBinding(Window.IsActiveProperty, isActiveWindowBinding);
              }; 
```

所以，我不这样做：

```
 Loaded += (sender, args) =>
              {
                var parentWindow = Window.GetWindow(this);
                if (parentWindow == null)
                  return;
                parentWindow.Activated += (o, eventArgs) => model.IsActive = true;
                parentWindow.Deactivated += (o, eventArgs) => model.IsActive = false;
              }; 
```

最大的问题是在控件加载和数据绑定完成之前我无法获取父窗口？我是否必须创建一个附加的行为，这对于简单的绑定来说是相当痛苦的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:29:00.437

绑定不起作用？

```
<Window IsActive="{Binding Path=IsActive, Mode=OneWayToSource}"/> 
```

这里的意思是设置了窗口的DataContext。

或者，如果您想在用户控件标记中使用窗口的状态，请尝试以下绑定：

```
PropValue="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}, Path=IsActive}" 
```

# c++ - fopen 没有完全打开文件

> ID：12270748
> 
> 赞同：2
> 
> 时间：2012-09-04T20:16:26.977
> 
> 标签：c++, file, file-io, file-structure

我正在编写一个程序，该程序从两个单独文件中的两个表创建一个查找表。当我阅读第一张表格时，一切都被正确阅读。但是，当我阅读第二个文件时，`fopen`似乎并没有打开整个文件。

我这样说是因为编译器实现了`_iobuf`文件结构，并且`_cnt`似乎`_cnt = 530`比第一次初始化时（ ）低了很多（ `_cnt ~ 4096`），并且当我从文件中读取时它会减小。

这是我的代码片段：

```
int vertical,horizontal,channels,count;
FILE *fp;

fp = fopen(filename,"r");
if(fp==NULL){
    cout << "File not found" << endl;
    return Mat();
}else{
    cout << "Opening and Reading " << filename << endl;
}

//Read header
fread(&count,4,1,fp);
cout << "ReadHistogram(): Count number is " << count;
if(count!= 5){
    cout << "Header file reads: " << count << endl;
    return Mat();
} 

//Read size
fread(&vertical,4,1,fp);
//cout << "ReadHistogram(): Vertical size:" << vertical <<endl;

fread(&horizontal,4,1,fp);
//cout << "ReadHistogram(): Horizontal size:" << horizontal <<endl;

fread(&channels,4,1,fp);
//cout << "ReadHistogram(): Channel size:" << channels<<endl;

//Create Mat array
int size[] = {vertical, horizontal, channels};
Mat histogram(3,size,CV_64F,Scalar::all(0));

//Read in array
count = 0;
for(int i=0;i<vertical;i++){
    for(int j=0;j<horizontal;j++){
        for(int k=0;k<channels;k++){
            double temp5;
            fread(&temp5,8,1,fp);
            histogram.at<double>(i,j,k) = temp5;
            if(count <= 300){
                cout << "Array(" << i+1 << "," << j+1 << "," << k+1 << ")" << "=" << histogram.at<double>(i,j,k) << endl;
                cout << "Temp5 is " << temp5 << endl;
            }
            count++;
        }
    }
}
cout << "Done reading " << filename << endl;
fclose(fp);
return histogram; 
```

PS：我一直在尝试查找结构`_cnt`中的确切内容，但`FILE`找不到任何类似的东西。我将不胜感激任何人都可以提供的任何指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:54:52.573

看起来您正在以文本模式读取二进制文件。尝试将“b”添加到 fopen 中的标志：

```
fp = fopen(filename, "rb"); 
```

还要检查 fread 的返回值，如果它的字节数比您预期的少，请检查 ferror 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:21:18.247

您的代码看起来不错，尽管您应该检查`fread`. 如果您正在研究 的内部结构`FILE`，那么您只是在寻求混淆。 `_cnt`可能与在内存中缓冲了多少文件有关。它不是 API 的一部分，因此没有记录，您不应该查看它。

究竟是什么问题？什么时候`fread`失败，它返回什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T20:38:15.487

> 是的，我可以读取值并且它们是正确的。问题在于，在某个点之后， fread 开始返回相同的值。

我将在这里提出答案而不是继续讨论；如果我不在基地，我会删除。

我希望发生的事情是您已经阅读了文件的全部内容，但是您并没有停止阅读；随后对 fread() 的调用将返回一个错误（您没有检查该错误）并且没有修改您的读取缓冲区的内容。

检查 fread() 的返回，或调用`feof()`检查您的状态，或两者兼而有之。

# javascript - 使用 javascript html 实时预览 textarea 输入

> ID：12270749
> 
> 赞同：1
> 
> 时间：2012-09-04T20:16:35.463
> 
> 标签：javascript, html, textarea, auto-update

嗨，我正在设置文本区域输入的实时预览，该输入将发布到博客。我目前有这个设置

```
<textarea name="WPcomment" id="WPComment" placeholder="Add comments:" onkeypress="document.getElementById('prevCom').innerHTML = this.value"></textarea>

<div id="prevCom"></div> 
```

问题是预览是文本区域输入后面的一个字符。例如，如果我写“我的评论”，我会看到“我的评论”

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T20:23:08.247

使用 keyup 和 keypress 事件，如果有人按住某个键并重复，则单独使用 keyup 将不起作用。

```
var wpcomment = document.getElementById('WPComment');

wpcomment.onkeyup = wpcomment.onkeypress = function(){
    document.getElementById('prevCom').innerHTML = this.value;
}​ 
```

[演示](http://jsfiddle.net/RZwmX/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T20:21:40.003

代替`onkeypress="..."`

更改为`onkeyup`。这将解决您遇到的字符未按预期更新的问题。

所以你的最终代码应该是：

```
<textarea name="WPcomment" id="WPComment" placeholder="Add comments:" onkeyup="document.getElementById('prevCom').innerHTML = this.value"></textarea>
<div id="prevCom"></div>​ 
```

[看看这个 JSFiddle](http://jsfiddle.net/VkpjP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T20:20:48.747

尝试这个

```
<textarea name="WPcomment" id="WPComment" placeholder="Add comments:" onkeyup="document.getElementById('prevCom').innerHTML = this.value"></textarea>

<div id="prevCom"></div>​ 
```

使用`onkeyup`代替`onkeypress`

这是[演示](http://jsfiddle.net/urw88/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T20:22:26.530

你可以改变`onkeyup or onchange`

```
onkeyup ="document.getElementById('prevCom').innerHTML = this.value" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T20:24:22.387

`onkeyup`javascript中的事件将在您按下它后立即接收该字母

# jquery - 单选按钮选择 - 隐藏和显示字段

> ID：12270750
> 
> 赞同：0
> 
> 时间：2012-09-04T20:16:37.613
> 
> 标签：jquery, html, css

我正在尝试做一个简单的隐藏/显示效果，具体取决于选中的单选按钮。它工作不正常，我不知道为什么。我希望在用户单击“Oui”时隐藏表格（`#reprint_oui`）`SHOW`......如果选择“Non”则隐藏。

这是我的 JS 代码：

```
$(document).ready(function(){

$("input[name$='reprint_group']").click(function(){

var radio_value = $(this).val();

if(radio_value=='Oui') {
    $("#reprint_oui").show("slow");
}
else if(radio_value=='Non') {
   $("#reprint_oui").show("slow");
   }
  });

$("#reprint_oui").hide();

});​ 
```

这是我的 HTML：

```
<h2>Fiche technique de production</h2>
      <table width="100%" border="0">
          <tr>
            <td width="80%">Avons-nous par le passé produit des affiches que vous vous apprêtez à commander?</td>
            <td width="20%"><label for="oui_reprint">Oui</label>
            <input name="reprint_group" type="radio" id="oui_reprint" value="Oui">
            <label for="non_newprint">Non</label>
            <input type="radio" name="reprint_group" id="non_newprint" value="Non"></td>
        </tr>
      </table>
      <table width="100%" border="0" id="reprint_oui">
        <tr>
          <td width="80%">S'agit-il d'une réimpression sans changement?</td>
          <td width="20%"><label for="oui_reprint">Oui</label>
            <input type="radio" name="reprint_sans_changement" id="oui_reprint" value="Oui">
            <label for="non_newprint">Non</label>
            <input type="radio" name="reprint_sans_changement" id="non_newprint" value="Non"></td>
        </tr>
      </table> 
```

这是我的[小提琴](http://jsfiddle.net/25KkU/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:22:57.723

`show`当单选值为 时，您实际上是在ing 表`Non`。改为`hide()`：

```
if (radio_value == 'Oui') {
  $("#reprint_oui").show("slow");
} else if(radio_value == 'Non') {
  $("#reprint_oui").hide("slow"); // you have show() here
} 
```

**[演示](http://jsfiddle.net/25KkU/2/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:23:24.137

if-else 的结果都显示了 reprint_oui 元素。

“非”时隐藏元素

[http://jsfiddle.net/25KkU/1/](http://jsfiddle.net/25KkU/1/)

**还要确保在 javascript 中进行比较时使用三重“=”：**

```
if(a===b)
{} 
```

# c# - 在运行时为每个层次结构添加的表创建对象

> ID：12270759
> 
> 赞同：1
> 
> 时间：2012-09-04T20:17:57.930
> 
> 标签：c#, reflection, entity-framework-4

我有一个基类，也有派生类。使用 EF4 TPH（Table-per-hierarchy）将基类映射到表。在我的应用程序中，用户可以选择许多派生类之一，然后我需要使用正确填充的“鉴别器”列来保存它们。

在 UI 上，用户仅输入 Id 和名称（基类属性），因此我将用户条目存储在基类对象列表中。因为我知道用户在运行时选择了哪种派生类型，所以我不知道该怎么做。

到目前为止，我已经尝试在基础对象上使用 Convert.ChangeType 来获取派生类对象，然后对实体进行添加。但它因“对象必须实现 IConvertible”而失败。

不知道我还能做什么。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:22:16.967

使用`var derivedEntity = Activator.CreateInstance(typeof(YourDerivedType));`然后附加它。

或者更好的是，让实体框架为您完成：

```
var entity = Context.Set<TEntity>().Create(); 
```

你`Context`的`DbContext`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:23:58.643

您可以将对象存储为基类对象的列表，但是，您应该实例化派生类对象。如果你一开始不这样做，你真的需要不同的课程吗？

# javascript - 从 ajax 请求中获取原始文本

> ID：12270764
> 
> 赞同：1
> 
> 时间：2012-09-04T20:18:34.660
> 
> 标签：javascript, jquery, json, local-storage

我正在使用 ajax 从服务器获取一个文件，该文件是 JSON 格式的字符串数组。当我执行下面的 ajax 请求时，jQuery 会自动将 JSON 字符串解析为一个数组。

```
$.ajax({
    url: "modules.php",
    success: function (data) {
                //data is an array object not text
            }
    }); 
```

但是我想将数据保存到localStorage，它只能保存字符串。与其将数组（数据）转换回字符串，我宁愿阻止 jQuery 自动解析 JSON 字符串，保存文本然后自己解析 JSON。更像：

```
$.ajax({
    url: "modules.php",
    success: function (data) {
                //jQuery hasn't parsed the JSON already, and data is a string.
                localStorage.setItem("modules", data);
                var parsedData = $.parseJSON(data);
                //use the array
            }
    }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T20:22:24.800

根据[文档](http://api.jquery.com/jQuery.ajax/)

```
success: function (data, textStatus, jqXHR) 
```

XHR 对象包含响应文本：

```
jqXHR.responseText 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T20:23:07.447

您需要使用以下`dataType`属性绕过 jQuery MIME 类型验证：

```
$.ajax({
    url: "modules.php",
    success: function (data) {
        //data is an array object not text
    },
    dataType: "html"
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T20:30:08.613

`dataType`根据文档，如果在 ajax 调用中未指定，“jQuery 将尝试根据响应的 MIME 类型推断 [数据类型]” 。

在每次调用的基础上，您可以将 添加`dataType`到 AsKaiser 所示的调用正文（但我会使用`text`而不是`html`）。如果您总是希望为每个 ajax 调用返回纯文本，您可以使用 jQuery 的[`$.ajaxSetup()`](http://api.jquery.com/jQuery.ajaxSetup).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-13T13:32:18.980

不要使用 JQuery！您可以对此请求使用纯 JavaScript。你试过[http://www.w3schools.com/ajax](http://www.w3schools.com/ajax)吗？请参阅请求和响应。您将使用更多的代码，但它会更快，并直接给您响应。这是我写的一个包装器：

```
function AJAX(url, success, async) {
    if (window.XMLHttpRequest) {
        var request = new XMLHttpRequest;
    } else {
        // IE6 and IE5 (unnecessary)
        var request = new ActiveXObject("Microsoft.XMLHttp");
    }
    if (async) request.onReadyStateChange = function() {
        if (request.readyState == 4) {
            success(request.status, request.responseText);
        }
    };
    request.open("GET", url, async);
    request.send();
    if (!async) success(request.status, request.responseText);
} 
```

该函数将 URL 作为字符串，success 函数作为函数 accepting `(status code, response string)`，以及是否异步作为布尔值。

# redis - 是 Memcached 和 Redis 类型的 NoSQL 数据库吗？

> ID：12270768
> 
> 赞同：2
> 
> 时间：2012-09-04T20:19:01.040
> 
> 标签：redis, nosql, memcached

我知道 MongoDB 和 CouchDB 属于 NoSQL 家族。但是，我想知道 Memcached 和 Redis 是否也是 NoSQL 数据库？

我看到它们是缓存系统，这就是 NoSQL 吗？还是完全不同的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T19:51:23.007

[NoSQL 数据库列表 [目前 122+]](http://nosql-database.org/)

# jquery - 已绑定多次的解除绑定事件

> ID：12270769
> 
> 赞同：2
> 
> 时间：2012-09-04T20:19:05.280
> 
> 标签：jquery

有两个 js 脚本绑定到`$(window).scroll()`. 在一个脚本（example1.js）中，当满足某些条件时，我需要取消绑定事件（或找到可接受的替代方案），但这会导致`.scroll()`事件完全解除绑定，从而删除所有功能。

我想做的是，一旦满足条件，停止为 example1.js 而不是为 example2.js 触发滚动事件。

例子1.js

```
function exampleFunction(self) {
    $(window).scroll(function () {
        if ($(window).scrollTop() >= $(document).height() - $(window).height() - 364) {
            self.start();
        }
    });

    $.ajax({
        url: self.settings.dataUrl,
        dataType: "json",
        async: false,
        cache: false,
        success: function (json) {
            if (json.data.length) {
                self.json = json;
                self.addImages();
            } else {
                $(window).unbind('scroll');
            }
        }
    });
} 
```

例子2.js

```
$(window).scroll(function () {
    someFunction();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:22:20.643

看看[命名空间事件](http://docs.jquery.com/Namespaced_Events)。这将允许您为事件命名空间，然后仅取消绑定该命名空间，而其他绑定保持不变。

例如：

```
// Create Bindings //
$(window).bind('scroll.example1', function(e){
    ...
});

$(window).bind('scroll.example2', function(e){
    ...
});

// Unbind ONLY .example1 Namespace //
$(window).unbind('scroll.example1'); 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:22:49.957

绑定事件时使用[**命名空间事件。**](http://docs.jquery.com/Namespaced_Events)

**例子：**

```
//bind click.a
$('.class').on('click.a', function(){ alert ('inside a space'); }); 
//bind click.b
$('.class').on('click.b', function(){ alert ('inside b space'); }); 

//unbind click.b
$('.class').off('click.b');

//trigger click.a
$('.class').trigger('click.a'); 
```

在你的情况下，

**例子1.js**

```
function exampleFunction(self) {
    $(window).on('scroll.e1', function () {  //bind scroll.e1
        if ($(window).scrollTop() >= $(document).height() - $(window).height() - 364) {
            self.start();
        }
    });

    $.ajax({
        url: self.settings.dataUrl,
        dataType: "json",
        async: false,
        cache: false,
        success: function (json) {
            if (json.data.length) {
                self.json = json;
                self.addImages();
            } else {
                $(window).unbind('scroll.e1'); //unbind scroll.e1
            }
        }
    });
} 
```

**例子2.js**

```
$(window).on('scroll.e2', function () { //bind scroll.e2
    someFunction();
}); 
```

# html - 如何在缩略图周围悬停时指定 CSS 边框？

> ID：12270772
> 
> 赞同：2
> 
> 时间：2012-09-04T20:19:14.873
> 
> 标签：html, css

如何在缩略图周围悬停时正确指定 .CSS 边框？我想为缩略图添加外部css，*正常：*

```
border-color: #cccccc;
border-style: solid;
border-width: 1px; 
```

并*悬停：*

```
 border-color: #0000FF;
  border-style: solid;
  border-width: 1px; 
```

html:

```
<div class="item-list"><ul id="field-slideshow-1-pager" class="field-slideshow-pager slides-4">
<li class="first"><a href="#"><img class="field-slideshow-thumbnail field-slideshow-thumbnail-1" typeof="foaf:Image" src="http://ecx.images-amazon.com/images/I/41MNf5JEQ1L._SL75_SS45_.jpg" width="80" height="80" alt="" /></a></li>
<li><a href="#"><img class="field-slideshow-thumbnail field-slideshow-thumbnail-2" typeof="foaf:Image" src="http://ecx.images-amazon.com/images/I/410ONnNmmJL._SL75_SS45_.jpg" width="80" height="80" alt="" /></a></li>
<li><a href="#"><img class="field-slideshow-thumbnail field-slideshow-thumbnail-3" typeof="foaf:Image" src="http://ecx.images-amazon.com/images/I/41lyduCW9CL._SL75_SS45_.jpg" width="80" height="80" alt="" /></a></li>
<li class="last"><a href="#"><img class="field-slideshow-thumbnail field-slideshow-thumbnail-4" typeof="foaf:Image" src="http://ecx.images-amazon.com/images/I/41VHLWxrbcL._SL75_SS45_.jpg" width="80" height="80" alt="" /></a></li>
</ul></div> 
```

thumbs img 类最后有不同的数字，只是不确定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T20:20:58.223

使用[`:hover`](http://www.w3schools.com/cssref/sel_hover.asp)选择器：

```
.field-slideshow-thumbnail {
    border-color: #cccccc;
    border-style: solid;
    border-width: 1px;
}
.field-slideshow-thumbnail:hover {
    border-color: #0000FF;
    /*no need to specify border-style and border-width again*/
} 
```

假设您将上述内容放在一个名为`style.css`（与您的网页在同一目录中）的文件中，您需要将其添加到您`<head>`的文件中以应用样式：

```
<link type = "text/css" rel = "stylesheet" href = "style.css"/> 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:10:46.900

如果原始视图没有边框并且悬停视图有边框，我的解决方案有效

```
.field-slideshow-thumbnail 
{
    float:left;
     /*NO BORDERS HERE*/
}
.field-slideshow-thumbnail:hover
{
    border:solid 1px #00f;
    /*NOTE that the negative value of margin to prevent the change in spaces */
    margin:-1px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T20:21:12.833

```
.field-slideshow-thumbnail 
{
    border:solid 1px #ccc;
}
.field-slideshow-thumbnail:hover
{
    border:solid 1px #00f;
} 
```

# objective-c - 使用发件人识别在ios中调用方法的对象

> ID：12270778
> 
> 赞同：1
> 
> 时间：2012-09-04T20:19:29.510
> 
> 标签：objective-c, cocoa-touch, ios5

我是新来的，所以提前感谢这里的任何帮助。

我只是在 iOS 中做一些小练习，我有 2 个不同的东西调用同一个例程。

这些消息调用中的每一个都通过发送者。其中一个是`UIButton`that call when `touchUpInside`，一个是`UISegmentedControl`that call when `valueChanges`。

我需要在相同的方法中稍微不同地处理初始部分，并且我知道我以某种方式使用了 sender。

我需要做的是询问 sender 是 a`UIButton`还是 sender 是`UISegmentedControl`.

我试过了

```
if  ([sender isKindOfClass:UISegmentedControl]) { ... } 
```

和

```
if ([sender isKindOfClass:UIButton]) { ... } 
```

两者都抛出一个像这样的错误：

`Unexpected interface name "UIButton": expected expression`

所以这显然是错误的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T20:21:04.893

```
[sender isKindOfClass:UISegmentedControl] 
```

应该：

```
[sender isKindOfClass:[UISegmentedControl class]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:35:26.770

请注意，您也可以简单地与`sender`链接到 UI 对象的 IBOutlet 变量进行比较。或者你可以给你的 UI 对象`tag`s 和 test `sender.tag`。

# objective-c - 如何引用数组？

> ID：12270787
> 
> 赞同：-6
> 
> 时间：2012-09-04T20:20:03.080
> 
> 标签：objective-c, ios

我已经有一段时间忘记了如何做到这一点，有人可以帮助我。我试图引用一个数组，但我记得应该完成的方式。请帮忙。

```
CGPoint point [] = {    
    CGPointMake(10,10),
    CGPointMake(20,20),    
};

self.center = point; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:25:52.597

您不需要点数组，至少在这种情况下不需要。一个中心只能是一个点：

```
self.center = CGPointMake(10,10); 
```

第一个整数是 x 坐标，第二个是 y。

**更新：**

如果我在评论中理解您的问题，您可以这样做：

```
for (int i = 0; i < ?; i++) {
    [items objectAtIndex:i].center = CGPointMake(10*i,10*i);
} 
```

# java - 是什么导致 Java（冰雹序列）在我的程序中崩溃

> ID：12270788
> 
> 赞同：3
> 
> 时间：2012-09-04T20:20:05.377
> 
> 标签：java, math, integer, sequence

**我已经制作了一个执行（通常称为）冰雹序列的程序，该程序基本上是这样做的：**

创建一个`int`(value) 并为其分配一个值。

如果 int 是偶数，则将其除以 2。

如果 int 是奇数，则将其乘以 3 并加 1。继续这个过程，直到 n 等于 1。

**它似乎适用于大多数数字，但这个数字 99888769，应用程序挂在一个负整数上。为什么会这样？，他们说没有人能够证明它停止了，我没想到我已经解决了这个问题。但是知道为什么我的应用程序停止会很有趣。-**

```
 private void hailStoneSequence(){
    int value = 99888769;
    int i = 0;
    boolean trueOrFalse = isOddOrEven (value);
    while (value != 1){
        while (trueOrFalse == true && value != 1){
            i++;
            int previousValue = value;
            value = value / 2;
            println( previousValue +" is even, so I take half: "+value);
            trueOrFalse = isOddOrEven (value); // returning true or false, and inserting the newly divided number. So that it breaks loop when nescesary.
        }
            while (trueOrFalse == false && value != 1){
                i++;
                int previousValue = value;
                value = (value * 3) + 1;
                println (previousValue +" is odd, so I make 3n+1: "+value); 
                trueOrFalse = isOddOrEven (value);  
            }
                }       
    println ("\n\nThe process took "+i+" to reach "+value);
}

private boolean isOddOrEven(int value){
    /*
     * Takes an value and returns true, if that number is even.
     * Else it returns false.
     */
    if (value % 2 != 0){
    return false;
    }else{
        return true;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T20:26:20.607

当你不断增加`int`s 时，它们最终会（看起来像是一个令人吃惊的行为）变成负数，因为你超过了 int 类型的最大值（2^31-1），即你最终改变了位（的int 的二进制表示），用于存储数字的符号。改为使用`long`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T20:34:48.387

你实际上选择了一个有趣的起始数字。从那里开始，您最终会得到这个数字：768879215。将其乘以 3 并加 1 会超过 int 可以存储的最大值 (2^31-1)，因此它“溢出”为负数。对于负数，冰雹序列并不总是收敛到 1，实际上在这种情况下，它会永远重复以下序列：

```
-122
-61
-182
-91
-272
-136
-68
-34
-17
-50
-25
-74
-37
-110
-55
-164
-82
-41
-122 
```

您可以`long`改用，您的代码最多可以工作 (2^63-1)，或者使用`BigInteger`该类，它适用于任何数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T20:27:04.370

因为你的整数溢出了。改用“long”，您的代码将运行良好，至少在您的序列甚至超过 longs 范围之前。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T20:34:03.667

你的逻辑对我来说似乎很复杂。重新编写代码以使其更清晰，您应该能够看到发生了什么：

```
public class HailStoneSequence {

    public void sequence() {
        int value = 99888769;
        int i = 0;
        while (value != 1) {
            int previousValue = value;
            if (value % 2 == 0) {
                value = value / 2;
                System.out.println(previousValue + " is even, so I take half: " + value);
            } else {
                value = (value * 3) + 1;
                System.out.println(previousValue + " is odd, so I make 3n+1: " + value);
            }
        }

        i++;
        System.out.println("\n\nThe process took " + i + " to reach " + value);
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        HailStoneSequence instance = new HailStoneSequence();
        instance.sequence();
    }

} 
```

现在，如果您运行它，您应该不会看到它停止，而是重复。因此，它产生了一个无限的系列......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T20:42:46.627

您的初始种子值导致您达到“int”数据类型的整数溢出。这会导致负值的重复序列。您可以更改为使用“长”数据类型，也可以从不同的（较小的）种子值开始。

```
public class HailStoneSequence 
{

    public static void processSequence()
    {
        long value = 99888769;   // works due to larger type range
        // int value = 99888769; // causes negative repeating sequence
        // int value = 81;       // works with smaller seed
        int i=0;

        while(value != 1)
        {
            System.out.println("The value is:" + value);
            i++;
            if(value % 2 == 0)
            {
                value /= 2;
            }
            else
            {
                value = value * 3 + 1;
            }
        }
        System.out.println("The process took " + i + " iterations to solve.");
    }

    public static void main(String[] args) 
    {
        System.out.println("Begin Hailstorm:");
        HailStoneSequence.processSequence();
        System.out.println("End Hailstorm:");
    }
} 
```

# groovy - 在 Groovy 中将 JMock2 与 Matchers 一起使用：'with' 方法的问题

> ID：12270789
> 
> 赞同：3
> 
> 时间：2012-09-04T20:20:08.537
> 
> 标签：groovy, jmock, hamcrest

我的测试方法中有一个带有 JMock 期望的以下片段：

```
context.checking(new Expectations() {{
    allowing(listener).tableChanged(with(anyInsertionEvent()));
    oneOf(listener).tableChanged(with(aRowChangedEvent(0)));
}}); 
```

在哪里`anyInsertionEvent`并`aRowChangedEventAs`返回`Matcher<TableModelEvent>`. 这摘自“[由测试引导的面向对象的软件增长](http://www.growing-object-oriented-software.com/)”一书（第 181 页）。

我尝试将此测试转换为 Groovy，但我需要的方法是：

```
org.jmock.Expectations.with(org.hamcrest.Matcher<T>) 
```

被以下阴影遮蔽：

```
org.codehaus.groovy.runtime.DefaultGroovyMethods.with(java.lang.Object, 
    groovy.lang.Closure<T>) 
```

结果，我在测试期间遇到错误，例如：

```
groovy.lang.MissingMethodException: No signature of method: $Proxy8.tableChanged() is     applicable for argument types: (java.lang.Boolean) values: [false]
Possible solutions: tableChanged(javax.swing.event.TableModelEvent)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:55)
    at org.codehaus.groovy.runtime.callsite.PojoMetaClassSite.call(PojoMetaClassSite.java:46)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
    at org.rorick.auctionsniper.ui.SnipersTableModelTest$1.<init>(SnipersTableModelTest.groovy:43)
    at org.rorick.auctionsniper.ui.SnipersTableModelTest.setSniperValuesInColumns(SnipersTableModelTest.groovy:42)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:66)
    at org.jmock.integration.junit4.JMock$1.invoke(JMock.java:37)
    at org.junit.internal.runners.MethodRoadie.runTestMethod(MethodRoadie.java:105)
    at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:86)
    at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:94)
    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:84)
    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:49)
    at org.junit.internal.runners.JUnit4ClassRunner.invokeTestMethod(JUnit4ClassRunner.java:98)
    at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:61)
    at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:54)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)
    at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:52)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

我怎样才能使用适当的`with`方法？或者，请建议任何其他方法来解决此问题。

**更新**：它不是阴影。`Expectations.with(Matcher<Boolean>)`因此，实际调用的方法是`false`堆栈跟踪中的值。因此，方法被错误地分派。有什么想法吗？

**更新**：匹配器方法如下：

```
public Matcher<TableModelEvent> anyInsertionEvent() {
    Matcher<Integer> insertMatcher = equalTo(TableModelEvent.INSERT);
    return new FeatureMatcher<TableModelEvent, Integer>(insertMatcher, "is an insertion event", "event type") {
        @Override
        protected Integer featureValueOf(TableModelEvent actual) {
            return actual.getType();
        }
    };
}

private Matcher<TableModelEvent> aRowChangedEvent(int row) {
    return samePropertyValuesAs(new TableModelEvent(model, row));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:56:56.573

最后，我找到了解决方法。请参阅下面的检查代码。`new Expectations() {{}}`Java 语法已经消失，取而代之的是闭包：

```
context.checking {
    allowing(listener).tableChanged(argThat(anyInsertionEvent()));
    oneOf(listener).tableChanged(argThat(aRowChangedEvent(0)));
} 
```

请注意，`with`替换为`argThat`（仿照 Mockito）。`context`不是`org.jmock.integration.junit4.JUnit4Mockery`原来的实例，而是以下类的实例：

```
class JUnit4GroovyMockery extends JUnit4Mockery {
    public void checking(Closure c) {
         ClosureExpectations expectations = new ClosureExpectations();
         expectations.closureInit(c, expectations);
         super.checking(expectations);
    }

    private static class ClosureExpectations extends Expectations {
        void closureInit(Closure cl, Object delegate) {
            cl.setDelegate(delegate);
            cl.call();
        }

        public Object argThat(Matcher<?> matcher) {
            currentBuilder().addParameterMatcher(matcher);
            return null;
        }
    }
} 
```

这是基于来自[http://docs.codehaus.org/display/GROOVY/Using+JMock+with+Groovy](http://docs.codehaus.org/display/GROOVY/Using+JMock+with+Groovy)的 JUnit4GroovyMockery 类。是从和`argThat`复制粘贴的。`Expectations.with(Matcher<T>)``Expectations.addParameterMatcher(Matcher<?>)`

这对我有用，虽然我对这个解决方案不太满意；我更愿意保留`with`该方法的名称。

# php - 评估存储在数组中的 PHP 逻辑

> ID：12270791
> 
> 赞同：6
> 
> 时间：2012-09-04T20:20:12.343
> 
> 标签：php, arrays, operator-keyword

## 客观的

我正在尝试将复杂的比较存储为 PHP 数组。然后我想读取数组来评估一组变量并返回语句是真还是假。

## 问题

如何存储复杂的比较，以便以后可以读取并评估当时存在的变量？这是实现这一目标的最佳方法吗？非常感谢您的帮助。

## 例如，英语

If($source = 200 OR $source = 300) AND ($age < 10 OR $age > 60) THAN 返回 true 否则返回 false

**注意：** 变量可以是代码中的任意变量，这里我以source和age为例。嵌套数组可以比示例更深或更平坦。

## 示例，代码

```
$conditions = Array
(
[relation] => AND
[0] => Array
    (
        [relation] => OR
        [0] => Array
            (
                [var] => source
                [compare] => =
                [value] => 300
            )

        [1] => Array
            (
                [var] => source
                [compare] => =
                [value] => 300
            )

    )

[1] => Array
    (
        [relation] => OR
        [0] => Array
            (
                [var] => age
                [compare] => <
                [value] => 10
            )

        [1] => Array
            (
                [var] => age
                [compare] => >
                [value] => 60
            )

    ) 
```

)

# 解决方案

根据@sam-grondahl 的回答，函数可以处理您可以扔给它的任何嵌套逻辑。接受正则表达式和数字比较

```
$source = '300';
$age = '60';

$input_variables = array('source' => $source, 'age' => $age);

$conditions = array(
                'relation' => 'and',
                array(
                        'relation' => 'and',
                        array(
                              'var' => 'source',
                              'compare' => 'regex',
                              'value' => '(200|300)+'
                              ),
                        array(
                              'relation' => 'OR',
                                array(
                                      'var' => 'age',
                                      'compare' => '=',
                                      'value' => '59'
                                      ),
                                array(
                                      'var' => 'age',
                                      'compare' => '=',
                                      'value' => '60'
                                      )
                                      )
                      ),
                array(
                        'relation' => 'or',
                        array(
                              'var' => 'age',
                              'compare' => '<',
                              'value' => '10'                                 
                              ),
                        array(
                              'var' => 'age',
                              'compare' => '>=',
                              'value' => '60'
                              )
                      ),
                     array(
                              'var' => 'source',
                              'compare' => '=',
                              'value' => '300'
                              ),

                );

function evaluateConditions($condArray, $varablesArray){

if(!$condArray || !is_array($condArray)){throw new Exception('Missing Conditions Input Array');}
if(!$varablesArray || !is_array($varablesArray)){throw new Exception('Missing Variables Input Array');}

//PULL VARIABLES FROM ARRAY
foreach($varablesArray as $key_var => $value_var){
    ${$key_var} = $value_var;
}

///PROCESS THE ARRAY THAT CONTAINS THE COMPARISON ARRAY
if (!$condArray['relation']){

 //FORMAT COMPARE INPUT
 $condArray['compare'] = strtoupper(trim($condArray['compare']));
 $condArray['compare'] = preg_replace('/^=$/','==',$condArray['compare']);

 ///ACCEPTED COMPARE VALUES
 $accepted_compare_array = array('=','==','===','<>','!=','!==','>','>=','<','<=','REGEX');

 //VERIFY REQUIRED FIELDS ARE PRESENT
 if(!$condArray['var']){throw new Exception('Missing var');}
 if(!$condArray['compare']){throw new Exception('Missing compare');}
 if(!$condArray['value']){throw new Exception('Missing value');}

 //VERIFY ALL VALUES
 if($condArray['compare'] != 'REGEX' && !is_numeric($condArray['value'])){throw new Exception('Value is Not Numeric');}
 if(!in_array($condArray['compare'], $accepted_compare_array)){throw new Exception('Invalid Compare Value');}
 if(!preg_match("/^[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/",$condArray['var'])){throw new Exception('Invalid Var');}

 if($condArray['compare'] == 'REGEX'){
    $condArray['compare'] = preg_replace('/\//','\/',$condArray['compare']);
    $eval_str = 'if(preg_match("/'.$condArray['value'].'/i", $'.$condArray['var'].')){return 1;} else{return 0;}'; 
 }
 else{   
    $eval_str = 'if($'.$condArray['var'].' '.$condArray['compare'].' '.$condArray['value'].'){return 1;} else{return 0;}';
 }

 return eval($eval_str);

 }
else{

 $condArray['relation'] = strtoupper(trim($condArray['relation']));

 //VERIFY RELATION VALUE
 $accepted_relation_array = array('AND','OR');
 if(!in_array($condArray['relation'], $accepted_relation_array)){throw new Exception('Relation Invalid');}

 //VERIFY THAT AT LEAST TWO ARRAYS
 $array_count = 0;
 foreach($condArray as $condArray_var){
    if(is_array($condArray_var)){$array_count++;} 
 }

 if($array_count < 2){throw new Exception('Missing Comparison Array');}

 }

if (strtoupper($condArray['relation']) == 'OR') {
 unset($condArray['relation']);

 $eval_str = 'if(';
 for($i=0; $i < count($condArray); $i++){
    $eval_str .= evaluateConditions($condArray[$i], $varablesArray);
    if($i != count($condArray)-1){$eval_str .= ' || ';}  
 }   
 $eval_str .= '){return 1;}else{return 0;}';

 return eval($eval_str);

 }
 if (strtoupper($condArray['relation']) == 'AND'){
 unset($condArray['relation']);
 $eval_str = 'if(';
 for($i=0; $i < count($condArray); $i++){
    $eval_str .= evaluateConditions($condArray[$i], $varablesArray);
    if($i != count($condArray)-1){$eval_str .= ' && ';}  
 }   
 $eval_str .= '){return 1;}else{return 0;}';

 return eval($eval_str);

 }
throw new Exception('General Error Occurred');
} //end of function

/////

try {
echo evaluateConditions($conditions, $input_variables);
} 
catch (Exception $e) {
echo 'Caught exception: ',  $e->getMessage(), "\n";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T03:50:12.980

处理这个问题的最简单方法是使用 PHP 的 eval() 方法（http://php.net/manual/en/function.eval.php）进行递归：

```
static function evaluateArray($inArray)
{
  if (!$inArray['relation']) return eval($inArray['var'] + $inArray['compare'] + $inArray['value']);
  if ($inArray['relation'] == 'OR') return eval(evaluateArray($inArray[0])+'||'+evaluateArray($inArray[1]));
  if ($inArray['relation'] == 'AND') return eval(evaluateArray($inArray[0])+'&&'+evaluateArray($inArray[1]));
  return false; //could throw exception here if you wanted
} 
```

这旨在与字符​​串一起使用，但可以轻松修改。此外，您可能应该检查以确保每个子数组的结构正确，但我已经忽略了这段代码。

# oop - 如何以面向对象的方式组织它（包括尝试）几乎没有丢失。

> ID：12270793
> 
> 赞同：0
> 
> 时间：2012-09-04T20:20:18.960
> 
> 标签：oop

我是面向对象编程的新手，我正在学习这些概念。现在我只需要在逻辑上组织课程方面的帮助。我能弄清楚的关于方法、属性和构造函数的部分。我被分配了以下问题。

> Holiday Travel Vehicles 销售新的休闲车和旅行拖车。当新车到达 Holiday Travel Vehicles 时，会创建一个新的车辆记录。新车辆记录中包括车辆序列号、名称、型号、年份、制造商和基本成本。当客户到达 Holiday Travel Vehicles 时，他或她会与销售人员协商购买车辆。商定购买后，销售人员会填写销售发票。发票总结了购买情况，包括完整的客户信息、以旧换新车辆的信息（如果有）、以旧换新津贴以及所购车辆的信息。如果客户要求经销商安装选件，它们也会列在发票上。发票还总结了协商价格，加上任何适用的税费和许可费。交易以销售发票上的客户签名结束。

到目前为止，我想做的是使用客户和车辆子类制作发票超类，因为发票上包含车辆信息和客户信息。但是，由于车辆在到达经销商处时会获得记录，因此我还考虑使用子类旅行拖车和 RV 将车辆作为自己的类，因为一种涉及发动机，而另一种则不涉及。但是，如果我在发票中做车辆记录和车辆信息，我不能同时将车辆作为其自己的类和发票的子类。（如果我所说的一切没有意义，对不起，我真的很困惑。）那么我应该如何安排这些课程呢？我真的迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:13:21.903

Holiday Travel Vehicles 销售新的休闲车和旅行拖车。当新车到达 Holiday Travel Vehicles 时，会创建一个新的车辆记录。新车辆记录中包括车辆序列号、名称、型号、年份、制造商和基本成本。当客户到达 Holiday Travel Vehicles 时，他或她会与销售人员协商购买车辆。同意购买后，销售人员会填写销售发票。发票总结了购买情况，包括完整的客户信息、以旧换新车辆的信息（如果有）、以旧换新津贴和所购车辆的信息。如果客户要求经销商安装选件，它们也会列在发票上。发票还总结了最终协商价格，以及任何适用的税费和许可费。

1.  识别本场景中描述的数据实体（您应该找到六个）。当客户第一次从 Holiday Travel Vehicles 购买时，他们会被分配一个客户 ID。记录客户的姓名、地址和电话号码。以旧换新车辆由序列号、品牌、型号和年份描述。经销商安装的选件由选件代码、描述和价格描述。

2.  为每个实体制定一个属性列表。每张发票将仅列出一个客户。一个人在购买车辆之前不会成为客户。随着时间的推移，客户可能会从 Holiday Travel Vehicles 购买许多车辆。每张发票只能由一名销售人员填写。一个新的销售人员可能没有卖过任何车辆，但有经验的销售人员可能已经销售了很多车辆。每张发票只列出一辆新车。如果库存中的新车尚未售出，则不会有发票。车辆售出后，只有一张发票。客户可能决定不向车辆添加任何选项，或者可以选择添加许多选项。一个选项可能在没有发票上列出，也可能在许多发票上列出。客户在购买新车时最多只能交易一辆车。以旧换新的车辆可能会出售给另一位客户，后者随后将其换到另一辆假日旅行车辆上。

3.  根据 Holiday Travel Vehicles 现行的这些业务规则，绘制 ERD 并记录具有适当基数和模态的关系

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:27:49.253

将车辆和客户作为发票的子类并没有多大意义。我认为您想要的是创建一个车辆类和一个客户类，然后在您的发票类中，您可以保存一个车辆对象的实例和它所指示的客户对象。

```
public class Invoice {
    private Vehicle MyVehicle;
    private Customer MyCustomer;
    //...etc
}

public class Customer {
    private String FirstName;
    //...etc
}

public class Vehicle{
    private String Model;
    //...etc
} 
```

对于旅行拖车和房车类，子类车辆更有意义，因为它们本质上是一种车辆，因此将与车辆共享许多共同变量。您需要问自己的问题是其他`is`东西（房车`is`和车辆）还是`points`其他东西（发票有对车辆的引用）。我希望这很清楚，这绝对是我记得第一次学习它时遇到的困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:02:14.453

我可以给你一个提示，当你注意到一些元素共享特性时，总是使用继承，虽然只共享一个特性，使用继承。现在你只能看到一个共同的特征，但也许有一天你会注意到它们共享不止一个。

我可以说的另一件重要的事情是，您不应该构建不相关的元素的层次结构，例如，您不应该构建超类车辆和两个子类 car 和 horse，也许您认为它们共享某些功能，但它们不在同一类别的元素中，在这种情况下，更深入地研究层次结构会更好。

与继承有关的另一个重要的事情是多态性和动态绑定的概念，非常有用。

希望对你有用

# android - SQLite (Android) - 选择随机行

> ID：12270802
> 
> 赞同：0
> 
> 时间：2012-09-04T20:21:03.377
> 
> 标签：android, database, sqlite, random, cursor

我有一个返回游标的方法，但不幸的是，由于某种原因它产生了 NullPointerException。

方法是这样的，有什么问题吗？：

```
public Cursor getRandom(String tableName) {
        return db.query(tableName + " Order BY RANDOM() LIMIT 1", new String[] {KEY_ID, KEY_TEXT}, null, null, null, null, null);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:41:21.127

order by 语句在错误的位置。

```
SQLiteDatabase.query(String table, String[] columns, String selection, String[] selectionArgs, String groupBy, String having, String orderBy, String limit). 
```

看看[API](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)。

# java - 日期和时区 java 的问题

> ID：12270805
> 
> 赞同：1
> 
> 时间：2012-09-04T20:21:06.650
> 
> 标签：java, date, timezone

关于显示日期，我有一个非常奇怪的问题。特别是在Windows中。我不知道为什么，当我从查询（休眠）中得到一个日期时，它给了我一天的时间。当数据到达服务器时，日期很好，但是当它到达客户端时，它会减少一天。例如：在服务器中，日期是**Fri Sep 24 00:00:00 1982**但到达客户端时是 **Thu Sep 23 23:00:00 1982**。正如你所看到的，它是一个不同的日子。

啊，我几乎忘记提到它发生在 Windows（七）上，因为它的 TimeZone 是它的 UTC 而不是 GMT。我和我的同事使用 Linux 并没有问题。

有什么解决方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T20:24:53.533

它不会提前*一天*给你一个价值。*它会提前一个小时*为您提供价值（9 月 24 日午夜对 9 月 23 日晚上 11 点）。

这几乎可以肯定是时区问题，几乎可以肯定这只是您如何格式化日期的反映。如果您使用`SimpleDateFormatter`，只需设置`TimeZone`适当的（您的实际要求将确定是哪个区域），您应该会得到相同的结果。

顺便说一句，一般来说，当涉及到 Java 中的日期/时间工作时，我建议尽可能使用[Joda Time](http://joda-time.sf.net)`Date` - 它是一个比and更干净的 API `Calendar`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-08T07:23:57.047

# javascript - 在显示 div 之前加载 CSS BG Image

> ID：12270814
> 
> 赞同：1
> 
> 时间：2012-09-04T20:21:58.213
> 
> 标签：javascript, jquery, css

我有一个不小的 CSS 背景图像，不幸的是我在 Photoshop 中尽可能地压缩了它。我有一个加载 div，它在页面加载之前隐藏页面不显示。但是它会在加载 CSS BG 之前显示 div。在加载 CSS BG 图像之前，如何防止脚本触发？

***CSS：***

```
#background-wrap{
   background: url(bg.jpg) no-repeat center center fixed;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
   /* Cover for IE 7/8 */
   filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='bg.jpg', sizingMethod='scale');
   -ms-filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='bg.jpg', sizingMethod='scale');
   /* End Cover for IE 7/8 */
   background-size: cover;
   background-color: transparent !important;
   position:fixed;
   top: 0;
   left: 0;
   width: 100%;
   height:100%;
   max-width:3000px;
   max-height:1500px;
   z-index:1;   
    } 
```

***HTML：***

```
<div id="loading">
<h2 class="textcenter">Loading...</h2>
<img id="loading-image" style="width:32px;" class="center" src="/images/ajax-loader.gif" alt="Loading..." />
</div>
<div id="content-wrap" class="hide">
<div id="background-wrap">
    <div class="img-center" style="z-index:9999;"><img  src="img.png" />
    </div>
    <p>&nbsp;</p>
 </div>
 </div> 
```

***JS：***

```
var $j = jQuery.noConflict();
   $j(window).load(function() {
        $j('#loading').fadeOut('slow', function() {
  $j("#content-wrap").fadeIn("slow");
    });
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:36:44.553

**CSS**

```
#background-wrap {
    display: none;
} 
```

**JS**

```
$(["path/bg.jpg"]).preload();
$('#background-wrap').fadeIn('slow');
$.fn.preload = function () {
  this.each(function () {
    $('<img/>')[0].src = this;
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:52:19.460

您可以通过 JavaScript 预加载图像，然后等待加载事件将图像 src 添加到`DIV#background-wrap`. 您还需要删除`bg.jpg`CSS 中的所有引用。

```
// Creates an empty image
var $img = $('<img>'),
    src = 'bg.jpg';
// Adds a listener to the image on load event
$img.load( function(e)
{
    $('#background-wrap').css('background-image', 'url('+src+')')
    .css('filter', "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+src+"', sizingMethod='scale')")
    .css('-ms-filter', "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+src+"', sizingMethod='scale')")
    .fadeIn('slow');
});
// (pre)load the image
$img.attr('src', src); 
```

或者你可以使用 jQuery 插件[imagesLoaded](https://github.com/desandro/imagesloaded)来预加载一张或多张图片：

```
var src = 'bg.jpg';
$('<img>').attr('src', src).imagesLoaded( function( $images, $proper, $broken )
{   
    $('#background-wrap').css('background-image', 'url('+src+')')
    .css('filter', "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+src+"', sizingMethod='scale')")
    .css('-ms-filter', "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+src+"', sizingMethod='scale')")
    .fadeIn('slow');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T20:32:38.917

我为预加载背景所做的（认为可能不是最好的解决方案）是将我用作背景的图像插入到 html 代码中，如下所示：

```
 <div id="img-load" class="hide">
    <img src="path.jpg" />
  </div>
<!-- Rest of Page Code --> 
```

使用以下脚本：

```
var $j = jQuery.noConflict();
   $j(window).load(function() {
        $j('#loading').fadeOut('slow', function() {
  $j("#content-wrap").fadeIn("slow");
   }); 
}); 
```

（注：`.hide`= `style="display:none;"`）

这种方法似乎没有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T20:29:28.160

您可以使用插件，它是砌体插件的一部分：

[https://github.com/desandro/masonry/blob/master/jquery.masonry.js#L390-446](https://github.com/desandro/masonry/blob/master/jquery.masonry.js#L390-446)

# ms-access - 使用 SQL 语句时，带有 MS Access 数据库的 VB.Net 中的 DATETIME 格式问题

> ID：12270816
> 
> 赞同：2
> 
> 时间：2012-09-04T20:22:11.600
> 
> 标签：ms-access, vb.net-2010, ms-access-2003

我使用 vb.net 和 ms access 2003 作为后端。当我使用下面显示的 sql 查询时，我的结果中没有任何记录。我正在尝试查找日期低于（或早于）当前日期的记录。

```
Dim Sql, CurrentDate as String

Dim TrDate as Date

Dim DataVal As Integer

TrDate=DateTime.Now

CurrentDate=Format(TrDate, "dd/MM/yyyy hh:mm:ss tt")

Sql="Select count(*) from Table1 where InvDate<=#" & CurrentDate & "#"

IF DBConOpen()=True

        cmdOledb.CommandText = sql
         cmdOledb.CommandType = CommandType.Text
         cmdOledb.Connection = ConOledb
         DataVal = cmdOledb.ExecuteScalar
         msgbox(DataVal)

End IF 
```

例如，如果我的当前日期是 01/09/2012 或 02/09/2012 或 .. 12/09/2012 并且数据库中的日期是 01/09/2012 或 02/09/2012 或 .. 12/09/ 2012 年。我应该得到相应的记录数。但在这种情况下，我得到 0 条记录。

但是如果我当前的日期是 01/09/2012 或 02/09/2012 或 .. 12/09/2012 并且数据库中的日期是 20/08/2012 或 15/06/2012 或 .. 30/05/2012 . 我得到了正确的记录数。

我在 MS 访问表中定义的日期格式是“通用日期”。有没有人能够发现什么是错的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:40:55.710

除非您需要在提交查询之前在 Dot.Net 中确定您的日期/时间值，否则您可以使用 Access db 引擎的`Now()`功能。

```
Sql="Select count(*) from Table1 where InvDate<=Now()" 
```

这种方法避免了有关格式和分隔符的问题。

如果您只想要没有当前时间的日期，请使用`Date()`而不是`Now()`. （实际上，`Date()`将返回午夜作为时间分量。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:23:50.563

你应该使用：

```
CurrentDate=Format(TrDate, "yyyy/MM/dd hh:mm:ss tt") 
```

访问需要一个明确的日期。

您可能还想删除时间元素。

# hbase - HTable.get(列表 ) 结果顺序

> ID：12270821
> 
> 赞同：2
> 
> 时间：2012-09-04T20:22:25.807
> 
> 标签：hbase

调用返回的 Result 数组的顺序是什么`HTable.get(List<Get>)`？
我的意思是，假设输入列表的顺序相同是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:06:57.697

结果数组中的顺序将与输入列表的顺序相同。与批处理方法一样，未定义操作的执行顺序，但结果将始终保持相同的顺序。由于失败的gets 的结果数组中有一个空值，因此如果不查看每个Result 实例，就很难确定哪些失败了。

# performance - 如何缓存部分 crc32 校验和，因此我不需要多次计算？

> ID：12270823
> 
> 赞同：1
> 
> 时间：2012-09-04T20:22:29.143
> 
> 标签：performance, caching, crc32

在我最近编写的一些代码中，我有这种模式：

```
from zlib import crc32

new_data = get_some_input()

crc32List['stream1'] = crc32(new_data, crc32List['stream1']) & 0xffffffffL
crc32List['stream2'] = crc32(new_data, crc32List['stream2']) & 0xffffffffL
...
crc32List['streamN'] = crc32(new_data, crc32List['streamN']) & 0xffffffffL 
```

在我看来，那里有一些冗余计算，如果我能找到一个调用的函数`magic(x, y)`来执行以下缓存，我会很高兴：

```
crc32List['cached'] = crc32(new_data, 0) & 0xffffffffL

crc32List['stream1'] = magic(crc32List['cached'], crc32List['stream1'])
crc32List['stream2'] = magic(crc32List['cached'], crc32List['stream2'])
...
crc32List['streamN'] = magic(crc32List['cached'], crc32List['streamN']) 
```

' ' 使用缓存的 'x' crc32 值并返回与 ' '`magic(x, y)`相同的结果`crc32(new_data, y) & 0xffffffffL`

当然 ' `stream[0:N]`' 以不同的值开始并在任何时间点以不同的值结束，但 crc32 计算几乎总是对所有 N 执行 (90%+) 并且总是以 ' `new_data`'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:23:50.937

您没有通过标签提供关于这是什么语言的提示，并且我不熟悉具有`crc32()`所示参数的函数版本。无论如何，我认为您正在寻找的是[zlib](http://zlib.net/)`crc32_combine()`的功能。

`crc32()`zlib（在 C 中）中实际函数的参数是`crc32(crc, buf, len)`，其中`crc`是起始 CRC-32 值，`buf`是指向要计算其 CRC-32 的字节的指针，并且`len`是字节数。该函数返回更新后的 CRC-32 值。

鉴于：

```
crc32(crc32(0, seq1, len1), seq2, len2) == crc32_combine(crc32(0, seq1, len1), crc32(0, seq2, len2), len2) 
```

请注意，`crc32_combine()`需要知道第二个序列的长度以及两个 CRC-32 值才能组合它们。

# c++ - LNK2019 错误与 Visual Studio 2012 C++ 的 main 中使用的函数

> ID：12270826
> 
> 赞同：1
> 
> 时间：2012-09-04T20:22:37.293
> 
> 标签：c++, header

我收到以下错误：

> 1>main.obj：错误 LNK2019：无法解析的外部符号“void __cdecl setup(void)”(?setup@@YAXXZ) 在函数 _main 中引用 1>main.obj：错误 LNK2019：无法解析的外部符号“void __cdecl display(void) " (?display@@YAXXZ) 在函数 _main 1>C:\code\Project1\Debug\Project1.exe 中引用：致命错误 LNK1120: 2 unresolved externals

我该如何解决这个问题？

这是使用函数的主类：

```
#include "interface.h"
using namespace std;

int main(){
    setup();
    display();
    system("pause");
    return 0;
} 
```

这是interface.cpp

```
#include <iostream>
#include <string>
#include "interface.h"
using namespace std;
class ui{
    void setup(){
        options[0][0]="Hello";
        options[1][0]="Hello";
        options[2][0]="Hello";
        options[3][0]="Hello";
        options[4][0]="Hello";
        options[5][0]="Hello";
        options[6][0]="Hello";
        options[7][0]="Hello";
        options[8][0]="Hello";
        options[9][0]="Hello";
    }
    void changeOption(int whatOption, string whatText,
                  string prop1, string prop2, string prop3, string prop4, string prop5){
        options[whatOption][0]=whatText;
        options[whatOption][1]=prop1;
        options[whatOption][2]=prop2;
        options[whatOption][3]=prop3;
        options[whatOption][4]=prop4;
        options[whatOption][5]=prop5;
    }
    void display(){
        for(int x=0;x<9;x++){
            cout<<options[x][0]<<endl;
        }
    }
}; 
```

这是interface.h

```
#include <string>
//#include <iostream>
using namespace std;
#ifndef INTERFACE_H_INCLUDED
#define INTERFACE_H_INCLUDED
    void setup();
    extern string options[10][6];
    void changeOption(int whatOption, string whatText, string prop1, string prop2, string prop3, string prop4, string prop5);
    void display();
#endif INTERFACE_H 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:26:39.223

您将它们声明为全局函数。

但是，您的实现将它们定义在`class ui{`.

您可以删除`class ui{`和匹配的右括号，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:24:59.457

您的`setup()`函数在`ui`命名空间内，但是当您尝试使用它时，您并没有指定它。试试`ui::setup();`吧。

相同的解决方案`display()`。

除此之外，您需要重新检查您的 interface.h 头文件。在这里，您在声明这些函数时没有将声明包含在它们的命名空间中。这就是您能够编译 main() 函数但无法链接它的原因。

# facebook - 当有人“点赞”我的 Facebook 应用时，“点赞”图标从何而来？

> ID：12270836
> 
> 赞同：1
> 
> 时间：2012-09-04T20:23:26.820
> 
> 标签：facebook, icons, facebook-like, facebook-apps

我实现了“喜欢”，并在设置中为我的应用程序设置了图标，但是当有人“喜欢”应用程序时，他们得到了错误的图标。（他们从 Facebook 获得默认的类似原子的图标）

这是我们看到的： http: [//twitpic.com/ar4z6e](http://twitpic.com/ar4z6e)

以下是我设置图标的设置：http: [//www.twitpic.com/ar4zsv](http://www.twitpic.com/ar4zsv)

我究竟做错了什么？

谢谢！

# jquery - 表单验证插件 HTML5FORM 的问题

> ID：12270837
> 
> 赞同：0
> 
> 时间：2012-09-04T20:23:36.367
> 
> 标签：jquery, ajax

我正在使用表单验证插件 HTML5FORM (http://www.matiasmancini.com.ar/jquery-plugin-ajax-form-validation-html5.html) 但我需要在表单被检查并且一切正常后运行一些东西好的。

我应该如何进行？

这是验证脚本：

```
$(document).ready(function(){
    $('#form_lista').html5form({
        responseDiv:'#response2',
        method: 'post',
        messages: 'br',
        colorOn:'#6b6764',
        colorOff:'#000000',
        allBrowsers:true
    });
}); 
```

我的按钮是：

```
<input class="submit" type="submit" name="submit_second" id="submit_third" value="" /> 
```

当用户单击提交按钮时，我需要检查用户是否填写了表单的所有字段，如果没问题，我需要执行更新进度条和滑动步骤的脚本：

```
$('#submit_third').click(function(){

//update progress bar
    $('#progress_text').html('100% Completo');
    $('#progress').css('width','339px');
    //slide steps
    $('#third_step').slideUp();
    $('#fourth_step').slideDown(); 
```

});

# c++ - 正十进制整数的递归函数数字以相反的顺序c ++

> ID：12270843
> 
> 赞同：2
> 
> 时间：2012-09-04T20:23:55.510
> 
> 标签：c++, variable-assignment, reverse, digits

我有一个任务要编写一个递归函数，该函数以相反的顺序写入正整数的数字。我的问题是该功能无法正确显示相反的内容。我知道在递归调用中显示数字和 / 时我应该使用 % 或 10 以及基本情况应该小于 10。这是我的代码。

```
#include <iostream>
using namespace std;

int reverse(int,int);

int main()
{
    int number;
    int n;

    cout << " Enter number to reverse." << endl;
    cin >> number;
    cout << reverse(number % 10,0);

    return 0;
}//end main

int reverse(int number,int n)
{

    if(n < 10)
    {
        return n;
    }
    else
    {
        return reverse(number/10,n);
    }
}// end reverse 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:43:47.160

我认为这就是你的功能应该是：

```
void reverse(int number){
    if(number == 0) //base/basic case i.e if number is zero the problem is already solved, nothing to do, so simply return
        return;
    else{
        cout << number % 10; // print that last digit, e.g 103%10 == 3 
        reverse(number/10); //solve the same problem but with smaller number, i.e make the problem smaller by dividing it by 10,  initially we had 103, now 10 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:56:54.940

您可以使用以下代码（如果您不介意删除前导零，或者您可以在字符串或 ostringstream 中累积字符）

```
unsigned reverse(unsigned n, unsigned acc)
{
    if (n == 0)
    {
            return acc;
    }
    else
    {
            return reverse(n / 10, (acc * 10) + (n % 10));
    }
}

unsigned reverse(unsigned n)
{
    return reverse(n, 0);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T21:03:33.913

此解决方案将省略尾随零，因为它实际上是在反转整数的内容：

```
int reverse(int number, int n = 0)
{
  if (number == 0)
  {
    return n;
  }
  else
  {
    int nextdigit = number%10;
    int nextprefix = n*10+nextdigit;
    return reverse(number/10 ,nextprefix);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T20:45:50.433

你也可以这样做：

```
int reverse(int number,int n) {
if(number > n) {
    cout << number << endl;
    reverse(number-1,n);
} 
```

但是你应该摆脱第一个数字打印两次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-08T11:11:12.917

```
int rev(int n) {
    if(n<10&&n>-10) return n;

    int length=0;
    for (int i=n; i; i/=10) length++;

    return n%10*(int)pow(10, length-1) + rev(n/10);

} 
```

这是我的解决方案。它只需要一个参数并返回一个int。也不要忘记包括 cmath。

```
int intLength(int i) {
    int l=0;
    for(;i;i/=10) l++;
    return l;
}

int rev(int n) {
    return n<10&&n>-10 ? n : n%10*(int)pow(10, intLength(n)-1) + rev(n/10);
} 
```

或者这种方式更优雅一些。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-11T23:44:47.487

构造一个 void 函数来打印是可以的，但如果你想让你的函数返回一个反转的整数，你可以试试这个：

```
int revN(int n,int y=0){
   y+=n%10;
   if (n<10) return y;
   return revN(n/10,10*y); 
} 
```

这里 y=0 表示 y 在不作为参数传递时采用默认值 0。例如：需要找到 576 的反转整数。

```
int x= revN(576); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-19T09:35:12.190

我不确定这是好还是不好。我还在学习递归。

```
int reverseNumber(int number, int mod) {
    if(number==0) return mod;

    return (mod * pow(10, floor(log10(number))+1)) + reverseNumber(number/10, number%10);
}

int main() {
    int n; cin>>n;
    cout<<reverseNumber(n,0);
} 
```

# php - 将 jquery+ajax 放入 PHP while 循环中（全部在 Ajax 内部）

> ID：12270850
> 
> 赞同：1
> 
> 时间：2012-09-04T20:24:32.343
> 
> 标签：php, jquery, ajax, while-loop

我有一个获取和回显状态更新的 while 循环。我试图在我的 while 循环中回显一个“REPOST”链接，以便它附加到任何状态更新（位于它下方），并在单击时将 ID 传递给外部 .php 文件。这个链接是 jquery+ajax。

```
<script type="text/javascript">
$(document).on('click', 'a[id^=repost]', function(){
    var thePostID = $(this).prop('id').split('-')[1];
    //this now has the id of the $row['id'] we declared earlier.
    $.ajax({
        url: 'reposthandler.php',
        type: 'POST',
        data: {'id' : thePostID},
        success: function(data){  
        }
     });
});
</script>

<?php

include ('time.php');

$query = "SELECT poster, posterpic, category, type, date, id, follow.beingfollowed 
FROM usergen LEFT JOIN follow ON follow.beingfollowed = usergen.poster WHERE   
follow.iwannafollow 
= '*".$loggedin."' ORDER BY usergen.date DESC ";
$result = mysql_query($query) or die(mysql_error()) ;

$rows = array();
while($row = mysql_fetch_array($result)) {
    $row['ago'] = ago($row['date']);
    $rows[] = $row;

    echo '<br />';
    echo '<img src="' . $row['posterpic'] . '" width="40px" height="50px">';
    echo '<font color="red" size=2px><i>';
    echo '<a>'.$row['poster'].'</a></i></font>';
    echo '<br />';
    echo $row['category'] . ' for ' . $row['type'] . ' (' . $row['ago'] . ')';
    echo '<a href="#" id="repost-',$row['id'],'">REPOST</a>';
    echo '<br /><br /><HR size="4" width="auto" color="white">';
}
echo '</div>';
?> 
```

链接是死的，不链接到任何东西。为什么是这样？我是否需要在“成功：函数（数据）”下方添加一些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:31:45.600

```
Simply add an element to the loop for the button. 

echo '<a href="#" id="repost-',$row['id'],'"> Repost This </a>'; 
```

将 click 函数绑定到静态父元素。

```
$(document).on('click', 'a[id^=repost]', function(){
    var thePostID = $(this).prop('id').split('-')[1];
    //this now has the id of the $row['id'] we declared earlier.
    $.ajax({
        url: 'path/to/my/controller.ext?postID='+thePostID,
        type: 'POST',
        success: function(){
          //do whatever with the response.
        }
    });
}); 
```

现在，您将获得要重新发布的帖子的 ID，您可以在后端 php 文件中随意处理它。

# java - SQL Developer：如何将“SQL Array Fetch Size”增加到大于最大值。500？

> ID：12270851
> 
> 赞同：1
> 
> 时间：2012-09-04T20:24:33.747
> 
> 标签：java, sql, class, jar, oracle-sqldeveloper

我正在寻找一种方法来增加在 SQL Developer 中为我的查询获取的最大记录数。我看到通过图形界面可以将其增加到 500 条记录（SQL Array Fetch Size），但我正在寻找一种将其调整为更大数字的方法。

*有没有办法通过 .jar 文件或其包含的 .class 文件来做到这一点？*

**其他重要信息：**

*   我在 SQL Server 之上使用 SQL Developer。
*   我正在使用 SQL Developer 版本 3.2.09
*   我正在使用适用于 Mac 的 SQL Developer

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-09T06:23:14.130

在 rusult 视图上，按 ctrl + end，然后您将看到查询的所有结果。而sql developer之所以将限制设置为500，是为了减少使程序繁重和用户计算机变慢的程序。

# python - 将 UUID 32 个字符的十六进制字符串转换为“YouTube 风格”的短 id 并返回

> ID：12270852
> 
> 赞同：33
> 
> 时间：2012-09-04T20:24:45.920
> 
> 标签：python, guid, uuid

我正在使用 uuid.uuid1() 为我的所有 MongoDB 文档分配一个 GUID。我想要一种可以派生 11 个字符、唯一、区分大小写的类似 YouTube 的 ID 的方法，例如

```
1_XmY09uRJ4 
```

来自 uuid 生成的十六进制字符串，看起来像

```
ae0a0c98-f1e5-11e1-9t2b-1231381dac60 
```

我希望能够动态地将缩短的 ID 与十六进制匹配，反之亦然，而无需在数据库中存储另一个字符串。有没有人有一些示例代码或者可以指出可以做到这一点的模块或公式的方向？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-09-04T20:30:02.833

将底层字节转换为 base64 值，去除`=`填充和换行符。

您可能希望使用该[`base64.urlsafe_b64encode()`函数](https://docs.python.org/3/library/base64.html#base64.urlsafe_b64encode)来避免使用`/`and `+`(`_`并`-`改为使用)，因此生成的字符串可以用作 URL 路径元素：

```
>>> import uuid, base64
>>> base64.urlsafe_b64encode(uuid.uuid1().bytes).rstrip(b'=').decode('ascii')
'81CMD_bOEeGbPwAjMtYnhg' 
```

相反：

```
>>> uuid.UUID(bytes=base64.urlsafe_b64decode('81CMD_bOEeGbPwAjMtYnhg' + '=='))
UUID('f3508c0f-f6ce-11e1-9b3f-002332d62786') 
```

要将其转换为通用函数：

```
from base64 import urlsafe_b64decode, urlsafe_b64encode
from uuid import UUID

def uuid2slug(uuidstring):
    return urlsafe_b64encode(UUID(uuidstring).bytes).rstrip(b'=').decode('ascii')

def slug2uuid(slug):
    return str(UUID(bytes=urlsafe_b64decode(slug + '=='))) 
```

这为您提供了一种以更紧凑的形式表示 16 字节 UUID 的方法。进一步压缩会丢失信息，这意味着您无法再次将其解压缩为完整的 UUID。16 个字节可以表示的所有值都不会小于 22 个 base64 字符，每三个字节的输入需要 4 个字符，每个字符编码 6 位信息。

因此，YouTube 的唯一字符串不是基于完整的 16 字节 UUID，它们的 11 个字符 id 可能存储在数据库中以便于查找并基于较小的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-29T16:18:46.907

对于那些专门寻找一种以 url 安全的方式缩短 uuid 的方法的人来说，[@MartijnPieters](https://stackoverflow.com/users/100297/martijn-pieters)的真正有用的答案可以简化一些，使用该[`base64`](https://docs.python.org/3/library/base64.html)模块来处理不是 url 安全的字符，类似于[@okoboko](https://stackoverflow.com/users/3689902/okoboko)对那个答案的评论（没有一些不必要的位）。

```
import base64
import uuid

# uuid to b64 string and back
uuid_to_b64str = base64.urlsafe_b64encode(uuid.uuid1().bytes).decode('utf8').rstrip('=\n')
b64str_to_uuid = uuid.UUID(bytes=base64.urlsafe_b64decode(f'{uuid_to_b64str}=='))

# uuid string to b64 string and back
uuidstr_to_b64str = base64.urlsafe_b64encode(uuid.UUID(str(uuid.uuid1())).bytes).decode('utf8').rstrip('=\n')
b64str_to_uuidstr = str(uuid.UUID(bytes=base64.urlsafe_b64decode(f'{uuidstr_to_b64str}=='))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T20:29:21.140

您可以查看 Python 的`base64`模型。GUID 本质上是数字的 base-16 表示，您可以去掉连字符，从 base 16 解码，然后编码到 base 64。反过来需要从 base 64 解码，在 base 16 中编码，然后插入连字符在适当的地方。

# html - HTML 字幕无法正确缩放

> ID：12270855
> 
> 赞同：0
> 
> 时间：2012-09-04T20:24:56.340
> 
> 标签：html

我有一个`<h1>`带有长文本的标题 ( )。由于文本不适合一行，浏览器会换行。但是，标题的高度不会缩放，即没有换行符的标题与有换行符的标题具有相同的高度。我使用的背景图片应始终位于标题的所有文本后面。但是由于高度没有缩放，带有隐式换行符的标题看起来很尴尬：背景仅在第一行之后，第二行根本没有背景。为什么标题不缩放，我怎样才能使它缩放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:32:39.657

它确实可以扩展：http: [//jsfiddle.net/charlescarver/uUpqL/](http://jsfiddle.net/charlescarver/uUpqL/)

我的猜测是，您要么为`<h1>`标签设置了高度，要么您的背景图像没有随着拉伸而重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:32:53.253

默认情况下，这里的背景比例是一个简单的例子

```
<html>
<style>
    h1 { width: 5em; background-color: #EFA; }
</style>
<body>
<h1>A very long title which cannot enter into only one line!</h1>
</body>
</html> 
```

现在，来帮助您：

*   您可能没有`h1 {background-repeat: y-repeat;}`在 CSS 中正确设置。或者
*   您可能已经强制使用 h1 高度：`h1 { height: 20px; }`如果您希望能够管理不同的高度，这是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T20:32:53.510

好吧，假设您希望`h1`只有一行：

```
h1 {
    white-space: nowrap;
} 
```

如果您希望`h1`只有一行*并*包含在给定宽度内：

```
h1 {
    width: 100%;
    overflow: hidden;
    white-space: nowrap;
} 
```

# cocoa-touch - UIScrollView 不响应触摸

> ID：12270856
> 
> 赞同：2
> 
> 时间：2012-09-04T20:24:56.710
> 
> 标签：cocoa-touch, ipad, uiscrollview, touches

我有一个 UIScrollView 在其中显示推文。scrollView 包含在一堆视图中，其中最后一个有 4 个手势识别器。

scrollView 填充如下：

```
- (void) createTimeLine:(NSArray*)timeline
{
    CGRect rect = CGRectMake(0, 0, 463, 150);
    NSInteger i = 0;
    NSLog(@"timeline objects: %d", timeline.count);
    self.scrollView.contentSize = CGSizeMake(463, timeline.count * 150);
    for (NSDictionary *d in timeline) {
        SingleTwitViewController *c = [[SingleTwitViewController alloc] initWithAsingleTwit:d];
        rect.origin.y = i * 150;
        c.view.frame = rect;
        [scrollView addSubview:c.view];
        [scrollView bringSubviewToFront:c.view];
        i += 1;
    }
} 
```

时间轴中有 20 个对象，前 4 个是可见的。但是，scrollView 不会滚动，并且触摸由手势识别器处理。

该`scrollEnabled`属性设置为 YES，但由于某种原因，这似乎不起作用。

contentSize 设置为 463 * 3000 这比它自己的 scrollView 小得多，但它仍然不会滚动。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T04:51:45.920

试试这些，

```
scrollView.userInteractionEnabled=YES; 
```

内容大小应该大于scrollView框架大小...所以设置内容大小更大...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-11T17:11:59.933

我还发现一个`UIScrollView`简单的视图（的一部分`UIViewController`）不响应触摸事件，即使是`scrollView.userInteractionEnabled = true`（不管scrollView.contentSize如何）。在一个干净的单视图项目中

这个问题与上面的问题并不完全一样，但我发现我的 scrollView 响应滚动触摸而不是简单的触摸很有趣。

我决定将滚动视图子类化并添加一个协议，如下所示：

```
protocol XXScrollViewDelegate {
    func scrollViewDidReportTouchesBegan()
}
class XXScrollView: UIScrollView {  
    var touchDelegate: XXScrollViewDelegate?    
    override func touchesBegan(_ touches: Set<UITouch>, with event: UIEvent?) {
        self.touchDelegate?.scrollViewDidReportTouchesBegan()
    }
} 
```

不要忘记在主视图中声明协议，并设置委托（注意我使用了不同的名称以避免覆盖 UIScrollView 的委托属性。

```
class ViewController: UIViewController, XXScrollViewDelegate {

scrollView.isUserInteractionEnabled = true
scrollView.touchDelegate = self 
```

这为我解决了这个问题，但我仍然对它没有按预期响应的原因感到好奇。

# database - DB2 UDB 服务器上文件系统和存储系统的区别

> ID：12270859
> 
> 赞同：0
> 
> 时间：2012-09-04T20:25:01.363
> 
> 标签：database, filesystems, db2, relational

我们在服务器上有一个 DB2 数据库。当 DBA 临时增加文件系统容量时，我们反复收到文件系统已满错误。

当我们安装数据库时，数据不是存储在磁盘或存储系统上吗？文件系统在安装在服务器（在 AIX OS 上）上的关系数据库中的作用是什么。我试图了解文件系统与服务器上的存储系统或 DB2 数据库服务器有何不同。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:27:38.050

简短的回答是，DB2 会自动增加它用作数据库表空间容器的文件的大小，并且它只会在底层文件系统中没有可用空间时才会抱怨。此时，DBA 扩大了文件系统（顺便说一下，这不一定是临时操作），DB2 再次高兴，因为它可以根据需要继续增加其表空间容器文件的大小以适应传入的数据。

文件系统保存 DB2 用于数据库存储的文件，但 DBA 也可以选择分配未挂载的“原始”磁盘设备/卷作为 DB2 表空间的容器。对数据库使用原始存储的最初吸引力主要是对先前由文件系统缓冲和日志记录造成的性能影响的回应，这两者都已由 DB2 执行。然而，DB2 LUW 最终获得了为数据库存储分配和使用文件的智能，而无需启用任何缓慢、冗余的文件 I/O 选项，因此如今的主要选择是使用文件而不是原始存储。

在您的 DB2 服务器上，您可以使用 AIX 中的 df 命令来主动检查每个已安装文件系统的剩余可用空间，包括包含您的 DB2 表空间的文件系统。

# php - PHP解码奇怪的json-feed

> ID：12270860
> 
> 赞同：1
> 
> 时间：2012-09-04T20:25:19.970
> 
> 标签：php, json, curl, foreach, decode

我有一个看起来像这样的 json-feed，我需要使用 cURL 进行解码。

```
"count":836,
"value":{
"title":"AW-rss",
"description":"Pipes Output",
"link":"http:\/\/pipes.yahoo.com\/pipes\/pipe.info?_id=566903fd393811762dc74aadc701badd",
"pubDate":"Tue, 04 Sep 2012 16:33:30 +0000",
"generator":"http:\/\/pipes.yahoo.com\/pipes\/",
"callback":"",
"items":[
{
"title":"Title",
"description":"Description",
"link":"http://",
"category":"Category",
"pubDate":null,
"guid":"14917809",
"author":"Author",
"y:published":null,
"y:id":{
"permalink":"false",
"value":"14917809"
},
"y:title":"title"
},
//and then it continues like that with several more items. 
```

这是我正在使用的代码，但我一辈子都无法获得 foreach 循环来给我一些实质性的东西。

```
$query = 'http://pipes.yahoo.com/pipes/pipe.run?_id=566903fd393811762dc74aadc701badd&_render=json';

    $ch = curl_init(); // open curl session

    // set curl options
    curl_setopt($ch, CURLOPT_URL, $query);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);    
    $result = curl_exec($ch); // execute curl session
    $data = json_decode($result);
    curl_close($ch); // close curl session

    **foreach($data['items'] as $item) {
        $guid['guid']}** 
```

如您所见，我正在尝试获取提要中项目的 guid。任何帮助将非常感激。

var_dump($data); 给出：

```
object(stdClass)#1 (2) { ["count"]=> int(836) ["value"]=> object(stdClass)#2 (7) { ["title"]=> string(6) "AW-rss" ["description"]=> string(12) "Pipes Output" ["link"]=> string(75) "http://pipes.yahoo.com/pipes/pipe.info?_id=566903fd393811762dc74aadc701badd" ["pubDate"]=> string(31) "Tue, 04 Sep 2012 20:34:56 +0000" ["generator"]=> string(29) "http://pipes.yahoo.com/pipes/" ["callback"]=> string(0) "" ["items"]=> array(836) { [0]=> object(stdClass)#3 (10) { ["title"]=> string(68) "Noggrann chefsassistent till vÃ¤lkÃ¤nt fÃ¶retag i centrala Stockholm" ["description"]=> string(163) "Har du tidigare erfarenhet av arbete som VD-assistent och Ã¶nskar bli en del av ett av Sveriges stÃ¶rsta fÃ¶retag? DÃ¥ Ã¤r du den som vi sÃ¶ker, ansÃ¶k redan idag!" ["link"]=> string(122) "http://www.academicwork.se/jobbannons/noggrann-chefsassistent-till-valkant-foretag-i-centrala-stockholm/stockholm/14917809" ["category"]=> string(16) "Assistent- enkel" ["pubDate"]=> NULL ["guid"]=> string(8) "14917809" ["author"]=> string(13) "Academic Work" ["y:published"]=> NULL ["y:id"]=> object(stdClass)#4 (2) { ["permalink"]=> string(5) "false" ["value"]=> string(8) "14917809" } ["y:title"]=> string(68) "Noggrann chefsassistent till vÃ¤lkÃ¤nt fÃ¶retag i centrala Stockholm" } [1]=> object(stdClass)#5 (10) 
```

等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:39:05.630

json_decode 返回一个对象，因此您需要将其与普通数组稍有不同。

```
$data = json_decode($result);

$items = $data->{'value'}->{'items'};
$GUID = array();
foreach($items as $obj)
{
  $GUID[] = $obj->{'guid'};
}

var_dump($GUID); 
```

我会注意到，如果有帮助，json_decode 方法可以将返回值转换为数组 (json_decode($result,true))。像这样：

```
$data = json_decode($result,true);

$items = $data['value']['items'];
$GUID = array();
foreach($items as $obj)
{
  $GUID[] = $obj['title'];
}

var_dump($GUID); 
```

# php - Zend_Session 丢失数据...但是为什么呢？

> ID：12270861
> 
> 赞同：0
> 
> 时间：2012-09-04T20:25:35.107
> 
> 标签：php, zend-framework, zend-session

我对 Zend_Session 很陌生。我确实有一个 Zend Framework 应用程序正在运行；现在我想为它添加一些“功能”。其中一项功能需要会话中包含的一些数据，因此它存储在用户将访问的所有站点上。

在我的引导程序中，我有

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    protected function _initSession() {
        Zend_Session::setOptions(array(
          'use_only_cookies' => 'on',
          'remember_me_seconds' => 864000
        ));
        Zend_Session::start();
    }
} 
```

在我的模型中，有一个函数可以将给定关键字的数据存储到 $_SESSION 中：

```
 $_SESSION['foo'][urlencode($keyword)] = array(   
              'data' => $base->some->foo[0]->fish->data         
            ); 
```

如果未设置会话密钥（带有关键字），则仅将新数据设置为会话。我用zend调试器检查过，一切运行良好。

现在，当我第一次调用页面时，一切都运行良好。当我重新加载页面（或移动到另一个页面）时，会话中的值消失了。所以，准确地说，*键*就在那里，$_SESSION 数组是（例如）20 个大小的条目。有一个条目，但它为空。

```
$_SESSION['foo']['my+foo']['data'] = null 
```

当我打电话时：

```
Zend_Debug::dump($_SESSION['foo']['my+foo']); 
```

我得到：

```
array (size=1)
  'data' => null 
```

所以，它就在那里，它扼杀了我的价值。

当我使用简单的 session_start() 时，让它运行的神奇巫术是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T02:20:37.533

按 Ctrl + F 并用`Zend_Session_Namespace`对象而不是超级全局 $_SESSION 替换所有内容：

```
$session = new Zend_Session_Namespace('foo');
$session->someData = array(   
    'data' => array('blah') 
); 
```

如果错误仍然存​​在，则在您更改会话数据时扩展`Zend_Session_Namespace`并放置一个`echo`（用于调试），那么您将能够知道它是否被另一段代码替换而无需您的确认。

或者更好的是，使用交互式调试器并逐行检查类（即 xDebugger）。那一个永远不会失败**；）**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:56:41.420

draw010 成功了，我必须将每一个值保存到我的会话中，所以

```
$_SESSION['foo']['bar'] = array(
 'data' => (int) $base->some->foo[0]->fish->data,
  'moredata' => (string)$base->some->foo[0]->fish->moredata
); 
```

等等。谢谢！

# java - 从 EJB 调用 shell 脚本的缺点是什么？

> ID：12270868
> 
> 赞同：2
> 
> 时间：2012-09-04T20:26:14.540
> 
> 标签：java, jakarta-ee

我们的业务案例需要我们从 Message Bean 调用 shell 脚本。除了明显的可移植性问题和标准合规性之外，从 bean 调用 shell 脚本还有什么问题？从技术上讲，容器 WebLogic 将允许我这样做，但这似乎是一种不好的做法。一个好的选择是什么？在这种情况下，它是一个同步调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T23:23:25.357

> 除了明显的可移植性问题和标准合规性之外，从 bean 调用 shell 脚本还有什么问题？

您已经介绍了最重要的内容。

我能想到的唯一其他人是：

*   维护“混合”解决方案的工程问题
*   潜在的性能问题；例如，如果使用 Java 编码并且（通常）在主 JVM 中运行，任务是否可以显着加快完成。

> 从技术上讲，容器 WebLogic 将允许我这样做，但这似乎是一种不好的做法。

不好的做法不应该等同于不优雅。好的/坏的做法是关于根据一些客观标准将/将会产生可衡量影响的事情......如果你可以衡量它们。

> 一个好的选择是什么？在这种情况下，它是一个同步调用。

一般的替代方法是用 Java 对任务进行编码。你应该能够在`awk`/的`sed`情况下做到这一点。在您`ps`用于查找外部进程的情况下，您可能根本无法在纯 Java 中完成该任务，这意味着您当前的方法是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:45:09.220

我会说没关系，我们一直都在使用它。请注意，bean 将忙于等待同步调用，因此如果您没有足够的空闲 bean 来加载，队列将停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T23:48:51.090

@Stephen C：很好的回应。

问题和响应将我的想法引向资源管理：考虑外部流程将访问的资源。

如果资源是：

*   严格的“计算”（awk/sed over stdin/stdout），这是一种利用现有工具（本着 UNIX 精神）来快速解决方案的不合理方式——但它是不可移植的。如果我正在制作原型，或者处于快速开发计划中，我会考虑这一点，仅针对更复杂的问题倾向于这样做。

*   *文件、网络等应该*考虑如何在可扩展的 Java EE 环境中管理这些资源。

*   进程，用于进程管理 - Java/Java EE 不可用，如`ps`/processes 的情况，需要转向 O/S。

*   用于并行化工作的进程/线程 - 不要试图管理并行工作流。Java EE*确实*为此目的提供了可扩展的 API。

# jquery - 当我将 iPad 方向从纵向更改为横向时，页面不断重新加载

> ID：12270880
> 
> 赞同：3
> 
> 时间：2012-09-04T20:27:39.233
> 
> 标签：jquery, css, ipad, layout, portrait

我一直在谷歌搜索几天来寻找解决问题的方法，但没有成功。所以我在这里寻求你的帮助。提前谢谢了。

该页面可以在[这里](http://www.flymedia.ro/phg/znd/ "ZND")看到！

标题和侧边栏在样式表中有*position:fixed*的值，而 left 的值是使用 jQuery 动态生成的。为了使标题和侧边栏在窗口调整大小或缩放时正确重新排列，我添加了：

```
/* Reload page on window Resize */
jQuery(window).bind('resize',function(){
    window.location.href = window.location.href;
}); 
```

对于窗口被部分占用的情况（例如按 [CTRL] + [B]，在 Firefox 中显示书签），我添加了：

```
/* Reload page if window Partially Occupied */
var screen_width = screen.width;
window.onresize = function(){
  if(window_width != screen_width) {
    location.replace(location.href);
  }    
} 
```

看看整个代码，希望你会喜欢。

问题：

在 iPad 上，当我将其方向从纵向更改为横向时，页面将*不断重新加载*（纵向方向一切正常）。我不认为 iPad 坏了，因为我测试了第二个。

谁能告诉我问题是什么？如果同样的情况发生在 Galaxy Tab 上？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:34:44.893

在调整大小时重新加载页面看起来是一种不好的做法，您可以尝试在页面调整大小时使用媒体查询来设置 CSS 更改。

要解决此问题，您可以尝试的一件事是在 iPad 上关注方向更改事件，并在客户端是 iPad 时忽略调整大小事件。

我认为您需要为此添加 JQuery Mobile (JQM)。请参阅[http://jquerymobile.com/test/docs/api/events.html上的 JQM 事件](http://jquerymobile.com/test/docs/api/events.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:18:10.323

问题：

> 在 iPad 上，当我将其方向从纵向更改为横向时，页面将不断重新加载（纵向方向一切正常）。我不认为 iPad 坏了，因为我测试了第二个。谁能告诉我问题是什么？如果同样的情况发生在 Galaxy Tab 上？

答案：

```
$(window).bind('orientationchange', function (e) {
    switch (window.orientation) {
        case 0:
            //portrait mode
            break;
        case 90:
            //turned to the right
            location.reload();
            break;
        case -90:
            //turned to the left
            location.reload();
            break;
    }
}); 
```

# php - 在循环中将值传递给 Jquery 对话框

> ID：12270882
> 
> 赞同：0
> 
> 时间：2012-09-04T20:27:44.220
> 
> 标签：php, jquery-ui

我想使用 Jquery 对话框在具有从数据库调用的多行的页面上显示注释 - 每行都有一个链接来显示一个对话框，该对话框应该显示该行的相关内容。

该对话框工作正常，但我无法从链接中获取值，因此我可以在显示对话框的 div 中查询数据库。

当有人单击图像时，我希望它显示该行的注释 - 这是我到目前为止的代码。我知道我没有发送值，因为我不知道如何发送 - 我怎样才能将行 ID 附加到每行的图像上，然后在对话框打开时使其在对话框中可用，以便显示该注释？

```
<script>
$(function() {
        $("#jui-dialog").dialog({
    autoOpen: false, 
    title: "Note", 
    modal: true, 
    width: "640", 
    buttons: [{
            text: "Close note", 
            click: function() {
                $( this ).dialog( "close" );
            }}]
});
    $("#jui-dialog-mdl-btn").bind("click", function(event) {
    $("#jui-dialog").dialog("option", {modal: true}).dialog("open");
    event.preventDefault();
});
});
</script>

<while begins>
<img src="/icons/16/note.png" title="View employee note" alt="View employee note" id="jui-dialog-mdl-btn">
<input type="hidden" value="<?=$id?>">
<while ends>

                        <div id="jui-dialog">
                            <div class="dialog-inner">
                                <?php                                   
                                $query=mysql_query("SELECT content from notes WHERE id='$id'");
                                $count=mysql_num_rows($query);
                                $row=mysql_fetch_array($query);
                                $note=$row['content'];
                                print $note;
                                ?>
                            </div>
                        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:37:22.023

首先：永远不要在while循环中使用id，因为你不能在同一页面上使用两个相同的id。你可以使用类。您可以使用您的以下代码：

```
<img src="/icons/16/note.png" title="View employee note" alt="View employee note" class="jui-dialog-mdl-btn">
<input type="hidden" value="<?=$id?>"> 
```

要获取员工的 ID：

```
$('.jui-dialog-mdl-btn').click(function() {
        var id = $(this).next('input').val();
        //process whatever you like
}); 
```

要接收您想要显示的数据，您可以使用隐藏的 div，如下所示：

```
<img src="/icons/16/note.png" title="View employee note" alt="View employee note" class="jui-dialog-mdl-btn">
<input type="hidden" value="<?=$id?>">
<div class="dialoginfo" style="display:none;"><!--code to show in your dialog--></div> 
```

然后在jquery中：

```
$('.jui-dialog-mdl-btn').click(function() {
    var id = $(this).next('input').val();
    $(this).next('.dialoginfo').dialog(/*options*/);
    //process whatever you like
}); 
```

当然你的实现可能会有所不同，但我希望你有足够的片段

# php - mysqlprepared statements中的绑定过程

> ID：12270886
> 
> 赞同：6
> 
> 时间：2012-09-04T20:27:59.670
> 
> 标签：php, mysql, pdo, sql-injection

众所周知，准备好的语句可以很好地防御 SQL 注入攻击。

有人可以解释在绑定过程中发生了什么，这使得它如此。

我的主要困惑源于语句使用占位符并且这些占位符被变量替换的事实。因此，如果变量包含恶意 sql，那么它们仍然被绑定在占位符的位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:08:27.743

首先，PDO 对 DB 引擎视为常量的内容进行清理，例如：INSERT 子句中的值、WHERE 子句中的比较值等等，但它不会清理标识符或关键字或其他内容。（附注：它也不会清理动态 SQL，因此如果您使用动态 SQL，则不能仅依赖 PDO）

关于您要问的一点，您应该注意，在任何参数绑定上，您都提供了您想要的绑定类型：字符串或数字或布尔值（或其他，我不记得了）。所以他的事实是：

*   声明的数字和布尔参数值不会注入危险代码，因为 PDO 可以轻松地检查它对其类型的约束，并生成相应的文本。
*   Null 值很容易转换为 Null 关键字。
*   冲突的值当然是字符串类型的，PDO 在这里做什么？[它以与mysqli::real_escape_string](http://php.net/manual/en/mysqli.real-escape-string.php)相同的方式进行清理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:42:02.013

不，绑定过程确保绑定值与进入数据库的值 1:1 匹配。

所以，'xxx; 删除表 yyy;' 作为值将是 varchar 字段中的实际值。不使用参数绑定时，将执行此代码。

# python - 可变数量的 With 语句

> ID：12270889
> 
> 赞同：2
> 
> 时间：2012-09-04T20:28:05.290
> 
> 标签：python, with-statement

有什么方法可以格式化 with 语句，以便我可以建立可变数量的上下文？就像，有时我想要四个 with 语句，但有时我可能只想要两个。事实上，我面临调用我可以使用但不是的所有对象的虚拟版本的前景，然后将我的代码嵌套在 16 个语句中，其中虚拟对象填充我不使用的语句。因为我使用的是 Python 2.6.6，甚至不支持压缩语法。

顺便说一句， with 语句真的是获得有效清理代码的唯一方法吗？`__del__`真的没有其他方法可以获得类似于析构方法的任何东西，但像标准方法一样使用不是错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T20:37:53.640

[`contextlib.nested`](http://docs.python.org/library/contextlib.html#contextlib.nested)是为此而生的。

文档中的示例：

```
from contextlib import nested

with nested(*managers):
    do_something() 
```

# jquery - json即时搜索

> ID：12270896
> 
> 赞同：-3
> 
> 时间：2012-09-04T20:28:44.230
> 
> 标签：jquery, ajax, json, search

我正在尝试在 json 中创建即时搜索功能。代码看起来是对的，但肯定是行不通的。请大家看看并帮我修复它好吗？提前致谢。

[http://jsfiddle.net/hMyr7/](http://jsfiddle.net/hMyr7/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:39:47.867

我必须在你的 jsfiddle 上启用 jQuery ......

一旦我这样做了，似乎服务器正在为 ajax 请求返回 500 服务器错误。

您需要调查服务器端响应，因为我们无法为您解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:03:40.973

您的 JSONP 代表您的 AJAX 调用接收的数据。[它](http://mykolaiv.cityfacts.pro/?s=city&feed=json&callback=jsonCallback)看起来像这样：

```
jsonCallback([{
    "id": 41,
    "title": "My city",
    "permalink": "http:\/\/mykolaiv.cityfacts.pro\/my-city\/",
    "content": "",
    "meta": {
        "ultimatum_layout": [""],
        "_edit_last": ["1"],
        "_edit_lock": ["1346784971:1"]
    },
    "excerpt": "",
    "date": "2012-09-04 18:26:50",
    "author": "oyeremchuk",
    "categories": [],
    "tags": [null]
}]); 
```

最外面的节点是一个数组。要访问该数组中的第一个元素，您可以使用索引器：`response[0]`。那么问题是“你想从你的数据中得到什么？”

从您的 js 来看，您可能希望循环遍历整个响应，`id`然后`title`从`permalink`每个项目中提取和提取。这应该为您的回调做：

```
 success: function(response) {
        $.each(response, function(i, item) {
            var data_id = item.id;
            var data_title = item.title;
            var data_viewCount = item.permalink;

            var final = "<div id='id'><div>" + data_id + "</div><div id='title'>" + data_title + "</div></div>";

            $("#results").append(final);

        });
    } 
```

[http://jsfiddle.net/hMyr7/15/](http://jsfiddle.net/hMyr7/15/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T20:32:31.697

你检查过你的 JavaScript 控制台吗？

`"Uncaught TypeError: Cannot read property 'items' of undefined"`-- 因为你的 JSON 中没有`data`or `data.items`。

尝试改变

```
if (response.data.items) { 
```

到

```
if (response.data && response.data.items) { 
```

它至少会优雅地失败。

[http://jsfiddle.net/mblase75/hMyr7/2/](http://jsfiddle.net/mblase75/hMyr7/2/)

# sed - 多行 sed 提取以单引号结尾的字符串

> ID：12270898
> 
> 赞同：3
> 
> 时间：2012-09-04T20:28:48.363
> 
> 标签：sed

我有许多 M4 宏文件，我希望从中提取文件路径的单个实例（如果存在）。

在每个文件中都有一行

```
define(`XSETROOT', `some_command with parameters SOME_DIR/subdir1/subdir2/filename')
```

或分布在两条线上

```
define(`XSETROOT', dnl
`some_command with parameters SOME_DIR/subdir1/subdir2/filename')
```

或根本没有条目。

所以我希望找到开始的行

```
define(\`XSETROOT',
```

然后从同一行或下一行提取以“空格”和“单引号”为界的字符串，即

```
SOME_DIR/subdir/subdir/filename
```

这可以在不诉诸多个 sed 调用的情况下完成吗？

附加信息（下面评论字段中的格式似乎不起作用）-

在最简单的情况下，当一切都在同一行时，引号的问题可以通过适当的引用/取消引用来克服，并且这个表达式有效

```
sed -ne 's|define(`XSETROOT'\'',.*`.* \(.*\)'\''.*|\1|p' file.m4
```

更多信息 -

感谢 MvG 的响应展示了如何进行多行处理，当数据分成两行时，这个表达式有效

```
sed -ne '/define(`XSETROOT/{n;s|`.* \([^'\'']*\)'\'').*|\1|p}' file.m4
```

但是问题仍然存在，是否有可能构造一个表达式来处理一两行上的数据，或者我是否必须尝试一个来查看是否有返回的字符串，如果没有，则尝试另一个来查看如果返回一个字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:09:33.227

如果您可以使用`awk`它可能对您有用：

```
awk -F "[`']" 'BEGIN { RS=")" } { print gensub(".* ","","g",$4) }' INPUTFILE 
```

[请参阅此处的实际操作](http://ideone.com/xO2hm)（几乎与 Ideone.com 不支持 CLI 参数相同）。

解释：

1.  `-F "[`']"`将字段分隔符设置为`[`']`（这两个引号字符中的任何一个）的正则表达式
2.  `RS=")"`设置记录分隔符，这样我们就可以拥有多行记录
3.  `gensub(".* ","","g",$4)`返回第四个字段中最后一个空格后的所有内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:11:31.180

尝试这个：

```
sed -n "/define(\`XSETROOT'/{/dnl/N;s/.* //;s/'.*//;p}" 
```

*   除非当前行包含`define(`XSETROOT'`.
*   如果该行还包含`dnl`，则追加下一行。
*   删除直到最后一个空格的所有内容。
*   删除最后一个单引号后的所有内容。
*   打印剩余的字符串。

将`N`命令限制为实际存在 a 的情况有`dnl`两个目的：它允许在文件末尾匹配单行定义，并且它允许两个后续定义，其中第一个仅占一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-25T11:20:21.273

正确的解决方案是使用 M4 本身。

```
m4 -D XSETROOT='some suitable value with a/path/to/a/file' file.m4 
```

# web-services - 为什么我们需要网络服务？它与普通的 Web 应用程序有何不同？

> ID：12270906
> 
> 赞同：29
> 
> 时间：2012-09-04T20:29:18.067
> 
> 标签：web-services, web-applications, soap

刚开始使用网络服务，如果我的问题听起来很愚蠢，请原谅我。

为什么我们需要网络服务？它们与普通的 Web 应用程序有何不同？

许多教程中都提到了两种用途。一是*不同机器/应用程序之间的通信*，听起来不错。但下一步是*开发可重用的应用程序组件*。我的问题是，我们是否需要为此目的使用 Web 服务？

例如：货币转换器可以实现为 Web 服务，并且可以在 url 上发布。但是，同样可以创建为 Web 应用程序。使用 Web 服务的实际优势在哪里？

此外，根据 SO 中的一些帖子，如果不涉及 UI，则应使用 Web 服务，如果需要 gui，则应使用 Web 应用程序。选择就这么简单吗？

注意：这里我指的是基于 SOAP 的 Web 服务。RESTful 可能会有所不同。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T20:37:42.023

Web 服务（尤其是 SOAP）旨在供其他程序使用/读取/使用。如果您曾经编写过“屏幕抓取”程序（即，操作一个 Web 应用程序并从所有使页面美观且对用户友好的粘性物中挑选出您需要的数据），您会喜欢这种结构。

> 此外，根据 SO 中的一些帖子，如果不涉及 UI，则应使用 Web 服务，如果需要 gui，则应使用 Web 应用程序。选择就这么简单吗？

简而言之，“是”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-04T20:38:43.333

使用 有很多优点`web services`。与常规应用程序相比，主要优势`http`在于它使用`SOAP`更高效且带宽成本更低的消息传递。

另一个优点是服务传输、`XML`消息传递、服务描述和服务发现层使用标准协议，这使得开发人员可以轻松地开发功能而无需考虑编程语言。

假设您是服务提供商，比如天气预报。为什么要让开发人员访问您`website`的`scrap`页面，然后提取他们需要的数据？`web service`开发人员可以传入一个日期并返回一个`xml`包含他们需要的所有信息的定义明确的文档，这样开发它不是更容易吗？所有类型的案件都会发生同样的情况......

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-14T05:42:58.730

资料来源：[为什么选择 Web 服务？](http://www.tutorialspoint.com/webservices/why_web_services.htm)

*   **将现有功能公开到网络上：**

    * * *

Web 服务是可以使用 HTTP 远程调用的托管代码单元，即可以使用 HTTP 请求激活它。因此，Web 服务允许您通过网络公开现有代码的功能。一旦它暴露在网络上，其他应用程序就可以使用您的程序的功能。

*   **连接不同的应用程序，即互操作性：**

    * * *

Web 服务允许不同的应用程序相互通信并在它们之间共享数据和服务。其他应用程序也可以使用 Web 服务的服务。例如 VB 或 .NET 应用程序可以与 java web 服务通信，反之亦然。因此，Web 服务被用来使应用平台和技术独立。

*   **标准化协议：**

    * * *

Web 服务使用标准化的行业标准协议进行通信。所有四个层（服务传输、XML 消息传递、服务描述和服务发现层）都使用 Web 服务协议栈中定义良好的协议。协议栈的这种标准化为企业带来了许多优势，例如选择范围广、竞争成本降低和质量提高。

*   **通信成本低：**

    * * *

Web 服务使用 SOAP over HTTP 协议进行通信，因此您可以使用现有的低成本 Internet 来实现 Web 服务。与 EDI/B2B 等专有解决方案相比，该解决方案的成本要低得多。除了 HTTP 上的 SOAP，Web 服务还可以在其他可靠的传输机制上实现，例如 FTP 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-09T09:38:01.780

1.  它通过删除后端和 UI 代码的依赖关系（如 JSP 和 JSF），在 UI 和后端代码之间提供模块化。

2.  通信效率更高，带宽成本更低。我们仅使用 xml 和 json 格式共享所需的数据。

3.  现在，一天的应用程序被其他各种设备（如移动 PDA）使用，而且，我们为大多数应用程序提供了移动应用程序。因此，在这种情况下，如果我们使用 Web 服务，那么我们不需要以不同的方式实现应用程序，只需为不同的设备和移动应用程序开发 UI 并调用所需的服务。

# objective-c - Xcode NSXMLParser 数据通过选择多个键

> ID：12270910
> 
> 赞同：0
> 
> 时间：2012-09-04T20:29:27.083
> 
> 标签：objective-c, xml, nsxmlparser

我正在使用一种`NSXMLParserDelegate`方法从 XML 文件中获取数据，但我无法获取我想要的数据。xml文件是这样的：

```
<faces>
  <bounds x='70' y='250' width='438' height='438'/>
  <right-eye x='208' y='424'/>
  <left-eye x='368' y='426'/>
  <features s-avg='0.82' s-min='0.51' s-max='0.92'>
    <point id='PR' x='223' y='425' s='0.76'/>
    <point id='PL' x='362' y='424' s='0.91'/>
</faces> 
```

从此文件中，我想获取属性`x`,的值`y`，并且仅获取属性等于`s`的点元素的值。记录值应显示。`id``"PR"``x=223`

这是我的解析过程：

```
-(void) parser:(NSXMLParser *) parser didStartElement:(NSString *) elementName namespaceURI:(NSString *) namespaceURI qualifiedName:(NSString *) qName attributes:(NSDictionary *) attributeDict {
  if ([elementName isEqualToString:@"point"]) 
  {
      NSString *idvalue = [attributeDict objectForKey:@"id"];
      if (idvalue==@"PR")
      {
          NSString *xvalue = [attributeDict objectForKey:@"x"];
          NSLog(@"%@",xvalue);
          NSString *yvalue = [attributeDict objectForKey:@"y"];
          NSLog(@"%@",yvalue);
          NSString *svalue = [attributeDict objectForKey:@"s"];
          NSLog(@"%@",svalue);   
      }
   } 
```

我会得到一个像这样的日志：

```
X=223 X=362 Y=425 Y=424 S=0.76 S=0.91 
```

所有元素的`x`、`y`和的值。`s`如何仅获取属性 ID="PR" 的元素的值？我希望有人能给我一个理由，或者如果你能指出我最终解决这个问题的方向，因为它成为背后的真正痛苦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:11:29.137

本质上，正如马蒂亚斯在评论中指出的那样，您想使用`NSString`'`-isEqualToString`方法。这样做的原因是实际上只是比较两个指针`idvalue==@"PR"`的数值，**而不是**它们的内容。该方法实际上比较了由所述指针引用的字符串的内容。`NSString`**`-isEqualToString`**

 **用作：

```
NSString *idvalue = [attributeDict objectForKey:@"id"];
if ([idvalue isEqualToString:@"PR"])
{
    NSString *xvalue = [attributeDict objectForKey:@"x"];
    NSLog(@"%@",xvalue);
    NSString *yvalue = [attributeDict objectForKey:@"y"];
    NSLog(@"%@",yvalue);
    NSString *svalue = [attributeDict objectForKey:@"s"];
    NSLog(@"%@",svalue);
} 
```**

# android - 使用 putExtra 将值传递到新活动的问题

> ID：12270915
> 
> 赞同：0
> 
> 时间：2012-09-04T20:29:54.250
> 
> 标签：android, database, sqlite

我有一个由 sqlite 数据库填充的列表。我想要做的是将单击的行的值 - 这是一个字符串（不是行 ID） - 传递到一个新的活动中。例如，如果我有这个列表......

苹果
香蕉
胡萝卜
...
等

…然后我单击“香蕉”，我希望将“香蕉”传递给新活动。我可以让它工作，但仅限于列表中的第一项。所有其他列表项也返回相同的值（即“Apples”）。这是我正在使用的代码……</p>

```
 private AdapterView.OnItemClickListener onListClick=new AdapterView.OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent,
                            View view, int position,
                            long id) 
    Intent i=new Intent(MyApp.this, MyActivity.class);

        TextView nameValue = (TextView)findViewById(R.id.ingredientText);
        String content = nameValue.getText().toString(); 

        i.putExtra(ID_EXTRA, String.valueOf(content));

        startActivity(i);

    }
}; 
```

同样，无论单击哪一行，此代码都会返回“Apples”的值。也许我在这方面采取了错误的方法，因为我对在 Android 中使用数据库还很陌生。有人可以告诉我为什么上面的代码是错误的以及我如何能够纠正它？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:32:57.257

您总是从同一个字段中获取文本：`TextView nameValue = (TextView)findViewById(R.id.ingredientText);`您所要做的就是使用`parent`并`position`获取所选项目以获取您的`content`then。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T20:33:33.383

使用该代码，您将在 TextView 中传递文本，除非您更改它（显然），否则该文本是固定的。如果您直接需要所选行的值，为什么不直接从数组中取值呢？

假设你有一个 ArrayList 水果，它会很容易：

```
i.putExtra(ID_EXTRA, fruits.get(position); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T20:35:59.297

其他答案都是正确的。但是如果你更喜欢直接从视图中获取值，你需要在传入 onItemClick 的视图上调用 findViewById：

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id){
    Intent i=new Intent(MyApp.this, MyActivity.class);

    TextView nameValue = (TextView)**view**.findViewById(R.id.ingredientText);

    String content = nameValue.getText().toString(); 
    i.putExtra(ID_EXTRA, String.valueOf(content));
    startActivity(i);
} 
```

在您的原始代码中，您似乎在 Activity 的整个视图树上调用它，这就是为什么您不断获得相同结果的原因。

# c# - ClickOnce 应用程序抛出错误“..要求首先在全局程序集缓存 (GAC) 中安装程序集 MySql.Data 版本 6.5.4.0。”

> ID：12270919
> 
> 赞同：3
> 
> 时间：2012-09-04T20:30:06.443
> 
> 标签：c#, asp.net, .net, mysql, windows

我是部署 .NET 应用程序的新手，所以如果需要更多详细信息，请告诉我。

我在 Visual Studio 中使用 MySql 开发了一个 C# 控制台应用程序。这是通过 ClickOnce 应用程序部署在 2 台 Windows 7 机器上的，并且工作正常。尝试在 Windows XP 机器上安装并得到以下错误：

> 需要系统更新：
> 
> 无法安装或运行应用程序。应用程序要求首先将程序集 MySql.Data 版本 6.5.4.0 安装在全局程序集缓存 (GAC) 中。

我已经进行了一些谷歌搜索，但我认为这不是已经提到的任何问题 - 没有防火墙，没有防病毒，在具有所有权限的管理员帐户上。我检查了 C:\Windows\Assembly 并列出了 MySql.Data.CF.dll V 6.5.4.0。

同事还挖出了以下错误日志：

> 平台版本信息 Windows：5.1.2600.196608 (Win32NT) 公共语言运行时：4.0.30319.1 System.Deployment.dll：4.0.30319.1 (RTMRel.030319-0100) clr.dll：4.0.30319.1 (RTMRel.030319-0100).dll dll : 4.0.30319.1 (RTMRel.030319-0100) dfshim.dll : 4.0.31106.0 (Main.031106-0000)
> 
> 源 部署网址：file:///C:/GearBox/app/publish/ClockworksConsoleApplication.application 应用程序网址：file:///C:/GearBox/app/publish/Application%20Files/ClockworksConsoleApplication_1_0_0_6/ClockworksConsoleApplication.exe.manifest
> 
> IDENTITIES 部署身份：ClockworksConsoleApplication.application，版本=1.0.0.6，Culture=neutral，PublicKeyToken=efa8c6cf1fc52128，processorArchitecture=msil 应用程序身份：ClockworksConsoleApplication.exe，版本=1.0.0.6，Culture=neutral，PublicKeyToken=efa8c6cf1fc52128，processorArchitecture=msil，类型=win32
> 
> 应用程序摘要 * 可安装的应用程序。
> 
> 错误摘要 下面是错误摘要，这些错误的详细信息在日志后面列出。* C:\GearBox\app\publish\ClockworksConsoleApplication.application 的激活导致异常。检测到以下失败消息： + 加载运行时失败。（来自 HRESULT 的异常：0x80131700）
> 
> 组件存储事务失败摘要未检测到事务错误。
> 
> 警告 此操作期间没有警告。
> 
> 操作进度状态 * [8/31/2012 9:56:00 AM]：C:\GearBox\app\publish\ClockworksConsoleApplication.application 的激活已开始。* [8/31/2012 9:56:02 AM]：部署清单的处理已成功完成。* [8/31/2012 9:56:02 AM]：应用程序的安装已经开始。* [8/31/2012 9:56:02 AM]：应用程序清单的处理已成功完成。* [8/31/2012 9:56:08 AM]：找到兼容的运行时版本 2.0.50727。
> 
> 错误详细信息 在此操作期间检测到以下错误。* [8/31/2012 9:56:08 AM] System.Runtime.InteropServices.COMException - 无法加载运行时。（来自 HRESULT 的异常：0x80131700）-来源：System.Deployment-堆栈跟踪：在 System.Deployment.Application.NativeMethods.IClrMetaHostPolicy.GetRequestedRuntime（MetaHostPolicyFlags policyFlags，String binaryPath，IStream configStream，StringBuilder 版本，Int32& versionLength，StringBuilder imageVersion，Int32& imageVersionLength , Int32& pdwConfigFlags, Guid interfaceId) 在 System.Deployment.Application.NativeMethods.GetAssemblyCacheInterface(String CLRVersionString, Boolean FetchRuntimeHost, CCorRuntimeHost& RuntimeHost) 在 System.Deployment.Application.PlatformDetector。
> 
> 组件商店交易详情 没有可用的交易信息。

我之前在安装时遇到了另一个错误，

> URLDownloadToCacheFile 失败，HRESULT '-2146697211' 错误：尝试下载 'http://station52/clockworksEXE/ClockworksConsoleApplication.application' 时出错。

但是，我将设置更改为从 CD 而不是网站发布，它似乎已经解决了这个问题，但我仍然收到 GAC 错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T19:37:17.250

一种解决方案是将 MySQL dll 作为应用程序的一部分。在发布应用程序设置下将 dll 设置为“包含本地”和/或“包含”。

这样，当您的 ClickOnce 应用程序部署时，该 dll 将与它一起在本地部署，并且不会在 GAC 中查找它。

通常，GAC 中的内容安装在那里以供其他应用程序共享，并且就 ClickOnce 而言，通常作为先决条件安装。当然，不必在应用程序中包含组件会减少部署的大小，同时允许应用程序使用已在 GAC 中共享的组件。

您遇到的问题显然与 ClickOnce 和 WinXP 有关，解决方案是将 MySQL 组件包含在您的应用程序中，并将其在本地用于您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-13T16:25:12.277

以为我会添加我的答案，以防它对其他人有帮助。最后发现 MySql.Data.dll 文件是子项目中的旧版本，该文件正用于解决方案中的当前项目。换句话说，我的解决方案是这样设置的：

*   项目 1 - 类库（用于其他几个项目；不经常构建），包含对`MySql.Data v6.9.4`
*   项目 2 - 主程序，参考项目 1，还包含参考`MySql.Data v6.9.7`

在编译/发布项目 2 时，GAC 中没有 v6.9.4 并不令人高兴。因此，我所要做的就是删除项目 1 中的 v6.9.4 并更改对项目 2 中使用的 MySql.Data v6.9.7 的引用。因此，每当我更新一个时，它们都会得到更新。在那之后，我只是重建了项目 1 并重新发布了项目 2，它工作得很好。

我的建议是检查您的主应用程序中的所有引用，并确保任何子项目/类库也引用您正在使用的相同版本的 DLL（如果有意义的话）。

希望这对其他人有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T20:48:43.043

*Application Files 文件*夹内是一个*.application*文件（或 .manifest - 抱歉，我现在不在机器前，所以无法检查）。该文件是内部的 XML，因此您可以打开它并对其进行编辑。它将包含对所有缺失的引用。确保它指定的版本是正确的，因为我见过如果您每次发布到同一个位置，该文​​件不会重新生成的情况。如果您确定这是正确的，那么您需要确保您的单击一次包中包含正确的 MySQL 程序集。（更多来）

# sql - SQL Case when something AND something THEN

> ID：12270921
> 
> 赞同：1
> 
> 时间：2012-09-04T20:30:10.343
> 
> 标签：sql, case

SQL CASE 子句中是否可以有 and 语句？如果是这样你怎么写？

即像这样的东西？：

```
CASE
    When ((Column < 1) AND (Column2 > 0)) THEN column4 + 1
END as Column 
```

我的代码执行但没有完成我想要的（没有负数）：

```
CASE
WHEN (((Clean_Total_Time - ActivityTimeTotalMin) < 0) AND (ActivityTimeTotalMin > 0))     
THEN (ABS(DATEDIFF(hh,Total_Time,ActivityTotalTime))-1)
END as hours 
```

我的代码确实有效并且确实完成了它应该做的，但我不想要它，因为它允许负数：

```
CASE
WHEN (Clean_Total_Time - ActivityTimeTotalMin) < 0
THEN (ABS(DATEDIFF(hh,Total_Time,ActivityTotalTime))-1)
END as hours 
```

编辑：此计算的目的如下：

它减去两列，如果结果为负，则从这两列之一中减去数字一。此外，我的 AND 部分是说，如果该列的值为零，则它不会从该列中减去 1。我不希望该列的数字低于零。

唯一没有发生的事情是，如果列等于 0，它就不会被捕获。因此，只要最初是 0，我就会得到负 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:32:22.260

根据这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms181765.aspx)，它是：

> ```
> SELECT ProductNumber, Name, "Price Range" = 
>       CASE 
>          ...
>          WHEN ListPrice >= 50 and ListPrice < 250 THEN 'Under $250'
>          WHEN ListPrice >= 250 and ListPrice < 1000 THEN 'Under $1000'
>          ELSE 'Over $1000'
>       END
> FROM Production.Product 
> ```

我只是不认为你需要括号。

**更新 1**

您可以尝试像这样使用`CASE`inside `CASE`：

```
CASE
    WHEN Column < 1
        CASE
            WHEN Column2 > 0 THEN column4 + 1
        END
END AS Column 
```

# vba - 是什么导致 Worksheet_Activate 上的“自动化错误未指定错误”？

> ID：12270922
> 
> 赞同：9
> 
> 时间：2012-09-04T20:30:11.507
> 
> 标签：vba, error-handling, excel-2007

我有一个名为“日期”（对象名称为 A_Dates）的工作表，需要在它被激活时进行计算（值得注意的是，这在我的个人宏工作簿中）。我经常打开工作簿，其中有太多的计算让我无法进行自动计算。所以我将自动计算设置为手动，并在工作表中添加以下代码：

```
Private Sub Worksheet_Activate()
   A_Dates.Calculate
End Sub 
```

在过去的 3 个月里，这一直运行良好，日复一日。昨天，它停止工作。它现在在声明行抛出这个错误：

```
Microsoft Visual Basic
Automation error
Unspecified error
[OK] [Help] 
```

我尝试使用以下方法更改引用工作表的方式：

```
Sheets("Dates").Calculate 
```

和

```
ActiveSheet.Calculate 
```

无济于事。我还包括错误处理：

```
On Error Resume Next 
```

这并不能阻止它。我什至已经做到了：

```
Private Sub Worksheet_Activate()
   On Error GoTo headache
   Sheets("Dates").Calculate
Exit Sub

headache:
   Exit Sub
End Sub 
```

它仍然出现。我完全不知所措。帮助？

# 附加信息

我有以下参考资料，并在本工作簿的各种宏中使用所有这些参考资料：

应用程序的 Visual Basic

*   Microsoft Excel 12.0 对象库
*   OLE 自动化
*   Microsoft Office 12.0 对象库
*   Microsoft 脚本运行时
*   Microsoft Forms 2.0 对象运行时
*   Microsoft HTML 对象库
*   微软互联网控制
*   Microsoft ActiveX 数据对象 2.8 库
*   Microsoft ActiveX 数据对象 Recordset 2.8 库

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T19:34:39.323

我们遇到了同样的问题，但有一点不同——我们有几个人都成功地使用了相同的宏，但是一个人遇到了“自动化错误”“未指定错误”的问题。 [另一个答案帮助我](https://stackoverflow.com/a/12274712/3195477)确定问题可能是由于“Microsoft ProgressBar Control”引起的。（非常感谢你）

但是，我没有删除表单，而是在用户的 PC 上取消注册并注册了 MSCOMCTL.OCX，该 PC 出现了问题，他又恢复了业务。我希望我知道是什么导致控件的注册向南走——这不是我第一次不得不追查这个控件的问题。

注销和注册控件：

使用“提升的命令提示符”（以管理员身份运行命令提示符），发出以下命令：

```
 Regsvr32 /u c:\windows\SysWOW64\MSCOMCTL.OCX

 Regsvr32 c:\windows\SysWOW64\MSCOMCTL.OCX 
```

注意：/u 取消注册 ocx

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-04T22:03:54.873

每当我遇到这样的奇怪错误时，我要做的第一件事就是使用[http://www.appspro.com/Utilities/CodeCleaner.htm](http://www.appspro.com/Utilities/CodeCleaner.htm)清理代码。这是一个免费的插件，但您也可以手动完成。只需将您的代码从模块中复制到文本文件中（或右键单击并导出）。然后删除模块中的代码，编译保存，再把代码放回去。

当 Excel “即时”编译时，它会创建 p 代码，然后将其编译为机器代码。有时，特别是在大量编辑的情况下，p 代码会损坏。复制代码，删除它，然后复制回来强制 Excel 重新生成 p 代码。

我用这种方法解决了一些非常奇怪的行为。希望它也适合你。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-05T04:59:00.487

我发现了这个问题。我的一个表单上有一个控件，它显然停止了工作，这产生了连锁反应。

有问题的控件是“Microsoft ProgressBar Control，版本 6.0”。我不知道为什么它停止工作，但删除表单（当然，所有对它的引用）解决了这个问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-22T23:51:39.387

我只是遇到了这个问题，删除加载控件或添加/移动引用没有运气。

`DoEvents`通过为 Internet Explorer添加一个来修复，如下所示：

```
Do
  DoEvents
Loop Until ie.readyState = READYSTATE_COMPLETE 
```

还要注意，这个值可以在“完成”和“忙碌”之间反弹，所以这里更健壮的循环可能是有益的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-04T09:25:09.387

我对这个问题的解决方法是在 VBA - 工具 - 参考中添加以下参考。

Microsoft ActiveX 数据对象 2.8 库 Microsoft ActiveX 数据对象 Recordset 2.8 库

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-19T18:46:21.680

在 Excel 停止工作之前，我看到此错误以对话框的形式弹出。我正在调试一个新脚本，它打开数百个 excel 文件并从每个文件中提取一些信息。为了解决这个问题，我添加了几个“DoEvents”命令，我的这个错误问题立即消失了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-24T07:52:18.967

只是给其他人带来“自动化错误”的注释。我也有一个，发现它是整数溢出的一种特殊情况，它会在循环中中断并给出自动化错误而不是整数溢出错误。如果您没有找到上述解决方案，请检查您是否使用了正确的尺寸。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-14T01:49:04.643

尝试将您的程序编译到较低版本的操作系统。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-21T22:35:46.167

我有两个“确切”的 VBA 代码块，一个已执行，另一个有自动化错误。我运行了调试器，它卡在了下面的代码块上：

```
Do While ie.readyState = READYSTATE_COMPLETE
Application.StatusBar = "Going to StackOverflow ..."
DoEvents
Loop 
```

因此，我将有效的代码块和无效的代码块粘贴到单独的 Microsoft Word 文档中，然后使用“审阅/比较”功能。它揭示了错误：

Do While ie.readyState *=* READYSTATE_COMPLETE（等号 - 不正确）

对比

Do While ie.readyState *<>* READYSTATE_COMPLETE（双括号 - 正确）

我强烈建议使用 Word 来帮助在视觉上不清楚的地方。

是的！

# netbeans - 如何在 NetBeans 中执行构建后命令来运行 Windows/DOS 批处理文件？

> ID：12270924
> 
> 赞同：3
> 
> 时间：2012-09-04T20:30:21.873
> 
> 标签：netbeans, makefile, post-build

我正在尝试做一些应该非常简单的事情。在 NetBeans IDE 中执行构建后，我希望运行 Windows 可执行文件进行一些后期处理。这个可执行文件需要在与项目目录不同的目录中运行，所以我需要先更改目录。所以，实际上我需要构建后步骤来运行带有这两个步骤的批处理文件。

现在大多数 IDE 都有运行构建后步骤的选项。这包括基于 NetBeans 构建的 MPLAB，我可以在其中运行上面的批处理文件，一切正常。但是 NetBeans 7.2 IDE 没有将此作为项目选项，所以我想我必须使用 Makefile。我不是 Makefile 方面的专家，但似乎我不能只从 Makefile 调用 Windows 批处理文件。当我这样做时，它会尝试将批处理命令作为 make 命令而不是 OS 命令执行。

我有三个选择 - 有谁知道是否有可能：

1.  在不使用 Makefile 的情况下在 NetBeans 中运行构建后步骤。
2.  从 Makefile 运行批处理文件。
3.  执行“cd”命令并从 Makefile 运行 exe。（所以我不需要批处理文件。）

# mysql - 创建表消息和请求

> ID：12270925
> 
> 赞同：2
> 
> 时间：2012-09-04T20:30:28.207
> 
> 标签：mysql, messages

我想创建一个消息传递和请求系统。

消息：能够在用户之间发送

请求：向用户发送好友请求并确保用户收到请求

如何放置MYSQL的表和关系？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:22:38.613

```
create table users(
  id integer,
  name  string,
  email # if needed (to send to).
  )

create table messages(
  id integer,
  message text,
  from_user_id integer,
  to_user_id  integer,
  sent_on datetime,
  received_on datetime,
  read_on datetime) 
```

在您的应用程序中适当地填充`sent_on`//由您决定。`received_on``read_on`

# django - 扩展 django 身份验证/授权的最佳方式

> ID：12270928
> 
> 赞同：4
> 
> 时间：2012-09-04T20:30:51.123
> 
> 标签：django, authentication

我正在向我们的网站添加服务条款接受要求，并试图找出在[Django 身份验证](https://docs.djangoproject.com/en/dev/topics/auth/)框架内处理此问题的最佳方法。

为简单起见，这里有一个`UserProfile`模型：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    accepted_tos_at = models.DateTimeField(default=None, editable=False, null=True) 
```

所以基本上我想要做的是检查它`accepted_tos_at`不是`None`（或者实际上大于最后一次 TOS 修订的日期）。如果它通过了这个测试，那么我们就可以正常进行身份验证，但是如果它是`None`除`login`且`tos_display`不可访问的所有视图。

我挂断的是你应该如何在全球范围内做这件事？我不想在我的每一个视图中添加`user_passes_test`装饰器，同样我想避免在我的每一个视图中测试这个权限。必须有更清洁的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T21:12:58.290

通常，当您谈论应该适用于每个视图的东西时，您就是在谈论中间件。在您的情况下，这是相对简单的：

```
class AcceptTOSMiddleware(object):
    def process_request(request):
        login_url = reverse('login')
        tos_url = reverse('tos_display')
        if request.path not in [login_url, tos_url]:
            profile = request.user.get_profile()
            if profile.accepted_tos_at is None or \
               profile.accepted_tos_at < settings.LAST_TOS_REVISION:
                return HttpResponseRedirect(tos_url)
        return None 
```

首先，这会检查请求的 URL 是否不是登录或 TOS 视图。如果需要重定向，这可以防止无限循环。然后，您检查`accepted_tos_at`. 我假设您只是将上次修订日期存储为设置，因此如果您有其他计划，则需要对其进行修改。如果需要接受 TOS，则将用户重定向到 TOS 视图，否则，中间件返回`None`，告诉 Django 继续正常处理请求。

只需添加中间件`MIDDLEWARE_CLASSES`，你就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T20:33:24.237

我最近使用基于类的视图和 mixin 完成了身份验证。以[django-braces](https://github.com/brack3t/django-braces/blob/master/braces/views.py)为例`LoginRequiredMixin`。

这确实意味着您的所有视图（您想要保护的）都需要包含一个通用的 mixin，但这是我所知道的最干净的方式。

用法（来自[文档](http://django-braces.readthedocs.org/en/latest/index.html#loginrequiredmixin)）是这样的：

```
from django.views.generic import TemplateView
from braces.views import LoginRequiredMixin

class SomeSecretView(LoginRequiredMixin, TemplateView):
    template_name = "path/to/template.html"

    def get(self, request):
        return self.render_to_response({}) 
```

您可能想要定义自己的 mixin，它可能看起来像这样（未经测试）：

```
class AcceptedTOSRequiredMixin(object):
    def dispatch(self, request, *args, **kwargs):
        profile = request.user.get_profile()

        if not profile or profile.accepted_tos_at is None:
            return HttpResponseForbidden()  # return a forbidden response.

        return super(AcceptedTOSRequiredMixin, self).dispatch(request,
                     *args, **kwargs) 
```

其他方法涉及在 URL 级别装饰它们，但在我看来这更丑陋（如果有帮助的话，我很乐意挖掘它的外观示例）。

# javascript - 有没有办法从 pyaudio 获取原始音频数据并通过 javascript 播放？

> ID：12270931
> 
> 赞同：1
> 
> 时间：2012-09-04T20:31:05.377
> 
> 标签：javascript, python, audio, pyaudio

好的，所以我想在 python 2.5 中使用带有 pyaudio 的程序来记录音频而不是将其发送到服务器。我的程序所做的是记录音频，然后将其发送到保存最新发送的声音数据的在线网页。我想要一个 javascript 程序，当访问网页时，它将向扬声器播放该数据。它将不断访问服务器，直到页面关闭，并播放新收到的声音数据。我正要这样做，但我意识到我不知道如何在接收网页上播放保存的音频块。有没有办法做到这一点？谢谢！

# mysql - 这种类型的内容的MySQL结构？

> ID：12270934
> 
> 赞同：0
> 
> 时间：2012-09-04T20:31:30.420
> 
> 标签：mysql, structure

我有几百个文本文件，其中的数据如下：

```
Capo: 77/100
Define: 0/70
Largo: 85/85
Facto: 16/75 
```

**数据库适合这个吗？**如果是这样，我想不出一种正确构建表格的方法。

有人可能会考虑为`Capo`、`Define`、`Largo`、制作列，`Facto`但是在这数百个文本文件中，大约有*200 个不同的单词*，如果要这样做的话，每个单词都需要一个列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:41:38.253

如果没有更好的解释，很难确切地知道这些数据的含义。但是将所有这些东西都放在 DBMS 表中并不难。创建显示的列

1.  单词
2.  分子
3.  分母
4.  文件名（文件来自的文本文件）。

然后，您可以使用这样的查询来处理和聚合单词。

```
SELECT word,
       SUM(numerator)   AS numerator,
       SUM(denominator) AS denominator
  FROM words
 GROUP BY word 
```

去小提琴：[http ://sqlfiddle.com/#!2/d0e4d/1/0](http://sqlfiddle.com/#!2/d0e4d/1/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:37:17.843

鉴于您的上述格式，我将创建下面的结构。主键是单词，意味着它只能出现一次。我假设这两个值不超过`100`，因此一`tinyint`列就足够了。

```
CREATE TABLE words (
  word varchar(15) NOT NULL PRIMARY KEY,
  val1 tinyint UNSIGNED DEFAULT 0,
  val2 tinyint UNSIGNED DEFAULT 0) 
```

如果您将多次出现该单词，您可以考虑添加一个代理键作为主键，例如：

```
CREATE TABLE words (
  id int AUTO_INCREMENT PRIMARY KEY
  word varchar(15) NOT NULL,
  val1 tinyint UNSIGNED DEFAULT 0,
  val2 tinyint UNSIGNED DEFAULT 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T20:43:07.427

您可以将它们存储在一种键/值结构中，如下所示；

```
Values:
Key    v1  v2
-------------
Capo    0 166
Largo  77  77
Facto  10  20 
```

如果它们相互关联，您可以给这些值一个父 id 来对它们进行分组：

```
Values:
Parent Key    v1  v2
---------------------
0      Capo    0 166
0      Largo  77  77
0      Facto  10  20
1      Capo    5  88 
```

如果单词是固定的，您可以将它们规范化为不同的表：

```
Words:
WordID  Word
------------
1       Capo
2       Largo
3       Facto
4       Define

Values:
Parent WordId v1  v2
---------------------
0      1       0 166
0      2      77  77
0      3      10  20
1      1       5  88 
```

作为替代方案，您可能希望看起来像[MongoDB](http://www.mongodb.org/display/DOCS/Schema+Design)这样的存储。它允许您存储每个具有不同属性的“文档”。

# c++ - 无法访问派生类中基类的受保护成员

> ID：12270941
> 
> 赞同：21
> 
> 时间：2012-09-04T20:32:25.843
> 
> 标签：c++, protected, access-control

我有以下代码：

```
struct A {
protected:
    A() {}

    A* a;
};

struct B : A {
protected:
    B() { b.a = &b; }

    A b;
}; 
```

它奇怪地不编译。罪魁祸首是`b.a = &b;`任务：GCC和clang都抱怨`A()`受到保护，这不应该是问题，因为B继承了A。我进入了标准的哪个黑暗角落？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-04T20:38:00.640

的含义`protected`是派生类型将可以访问*其自身基*类的成员，而不是任何随机对象^*。在您的情况下，您关心尝试修改`b`您无法控制的成员（即您可以设置`this->a`，但不能设置`b.a`）

如果您有兴趣，有一个 hack 可以让它工作，但更好的解决方案是重构代码而不依赖于 hack。例如，您可以提供一个构造函数，`A`其中接受一个`A*`as 参数（此构造函数应该是公共的），然后在初始化列表中对其进行初始化`B`：

```
A::A( A* p ) : a(p) {}
B::B() : b(&b) {} 
```

* * *

^* `protected`授予您访问您自己类型的任何实例或从您自己的类型派生的基本成员的权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T20:42:19.887

这里实际上有两个不同的问题。

首先是该行不只是进行赋值，而是尝试初始化基类（工作正常）和成员`b`。要创建`b`成员，它需要构造它，并且*作为成员*，它需要`public`访问它没有的构造函数。

然后分配也无法访问非公共成员，`b`因为再次，它不是类型`B`而是类型`A`。

请记住，这意味着您只能*通过**对象（或子对象）*`protected`访问部分内容。`A` *`B`*

在这种情况下，请告诉我们您的真正问题，我们可以尝试帮助解决它。从同一个类型继承和组合是一种设计气味。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T20:40:53.210

我测试的所有编译器都抱怨了几件事，特别是即使删除了赋值语句，受保护的构造函数也会成为问题。

您无法访问`protected`您派生的类型的任何实例的成员。这个问题在 11.4p1 的示例中得到了澄清。

```
class B {
protected:
  int i;
  static int j;
};

class D1 : public B {
};

class D2 : public B {
  void mem(B*, D1*);
};

void D2::mem(B* pb, D1* p1) {
  pb->i = 1; // ill-formed
  p1->i = 2; // ill-formed
  // ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-09T09:45:36.863

这似乎是 C++ 语言的一大局限。你会如何解决这样的问题：

```
class Node
{
public:
 void Save();
protected:
 virtual void SaveState(int type) = 0;
};

class BinaryNode : public Node
{
protected:
 Node *left;
 Node *right;

 virtual void SaveState(int type) override
 {
    left->SaveState(type);
    right->SaveState(type);
 }
}; 
```

在这个例子中，我不想让方法在层次结构`SaveState`之外可见。`Node`只有方法`Save`应该是`public`。

# mysql - 将多行合并为一个 MySQL

> ID：12270953
> 
> 赞同：0
> 
> 时间：2012-09-04T20:33:04.323
> 
> 标签：mysql

我需要帮助。我用谷歌搜索解决方案，但没有找到。

我有三张桌子：

```
langs
(int) id | (varchar) language
    1    |       English
    2    |        Latin
    3    |      Esperanto
   ...   |         ...

keys
(int) id | (varchar) keys
    1    |       dog
    2    |       cat
   ...   |       ...

value
(int) id | (int) key_id | (int) lang_id | (varchar) value
    1    |       1      |        1      |        Dog
    2    |       1      |        2      |       Canis
    3    |       2      |        1      |        Cat
    4    |       2      |        2      |       Felis
    5    |       2      |        3      |        Kato
   ...   |      ...     |       ...     |        ... 
```

我想得到结果：

```
key_id |  keys  |  English  |  Latin  |  Esperanto  
   1   |  dog   |    Dog    |  Canis  |    NULL
   2   |  cat   |    Cat    |  Felis  |    Kato
  ...  |  ...   |    ...    |   ...   |    ... 
```

用 equal 合并行`key_id`。我知道我可以尝试使用多个 JOIN 来实现，但速度很慢，我必须知道不同`langs`.

提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:48:37.380

```
SELECT CONCAT(
  ' SELECT `value`.`key_id`,'
,        '`keys`.`keys`,'
,         GROUP_CONCAT(
           'GROUP_CONCAT(IF(`value`.`lang_id`=',id,',`value`.`value`,NULL))'
          ,   ' AS `', REPLACE(language, '`', '``'), '`'
          )
, ' FROM `keys` JOIN `value` ON `value`.`key_id` = `keys`.`id`'
, ' GROUP BY `value`.`key_id`'
)
INTO @sql
FROM `langs`;

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:39:15.713

您实际上是在查看数据透视表。这是可行的，虽然代码有点麻烦。

一个来源：[http ://www.artfulsoftware.com/infotree/queries.php#78](http://www.artfulsoftware.com/infotree/queries.php#78)

最后，尽管大多数 mysql 解决方案都需要一些带有存储过程的魔法，或者......硬编码你返回的语言。

数据透视表是 mysql 不擅长的一个领域。

# python - “导入 X”和“从 X 导入 *”之间的区别？

> ID：12270954
> 
> 赞同：23
> 
> 时间：2012-09-04T20:33:08.573
> 
> 标签：python, import, difference

在 Python 中，我不太清楚以下两行代码之间的区别：

```
import X 
```

或者

```
from X import * 
```

他们不都只是从模块 X 中导入所有内容吗？有什么不同？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-04T20:35:23.347

之后`import x`，你可以参考`x`喜欢的东西`x.something`。之后，就可以直接`from x import *`引用里面的东西了。因为第二种形式将名称直接导入本地命名空间，如果您从许多模块导入内容，则可能会产生冲突。因此，不鼓励。`x``something``from x import *`

你也可以这样做`from x import something`，它只导入`something`本地命名空间，而不是`x`. 这更好，因为如果您列出您导入的名称，您就可以准确地知道您正在导入什么，并且更容易避免名称冲突。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-04T20:35:21.133

`import X`：这会将所有内容导入为`X.var1`，`X.var2`等

`from X import *`：这会导入所有内容`var1`，`var2`等等，即它会淹没本地命名空间

两次通话后查看差异：

```
>>> import math
>>> len(globals())  
5                          #no of variables in namespace
>>> globals()
{'__builtins__': <module '__builtin__' (built-in)>, '__name__': '__main__', '__doc__': None, 'math': <module 'math' from '/usr/local/lib/python2.7/lib-dynload/math.so'>, '__package__': None}
>>> 
>>>
>>> from math import *
>>> len(globals())
47                     #no of variables in namespace
>>> globals()
{'pow': <built-in function pow>, 'fsum': <built-in function fsum>, 'cosh': <built-in function cosh>, 'ldexp': <built-in function ldexp>, 'hypot': <built-in function hypot>, 'acosh': <built-in function acosh>, 'tan': <built-in function tan>, 'asin': <built-in function asin>, 'isnan': <built-in function isnan>, 'log': <built-in function log>, 'fabs': <built-in function fabs>, 'floor': <built-in function floor>, 'atanh': <built-in function atanh>, 'sqrt': <built-in function sqrt>, '__package__': None, 'frexp': <built-in function frexp>, 'factorial': <built-in function factorial>, 'degrees': <built-in function degrees>, 'pi': 3.141592653589793, 'log10': <built-in function log10>, '__doc__': None, 'math': <module 'math' from '/usr/local/lib/python2.7/lib-dynload/math.so'>, 'asinh': <built-in function asinh>, 'fmod': <built-in function fmod>, 'atan': <built-in function atan>, '__builtins__': <module '__builtin__' (built-in)>, 'copysign': <built-in function copysign>, 'cos': <built-in function cos>, 'ceil': <built-in function ceil>, 'atan2': <built-in function atan2>, 'isinf': <built-in function isinf>, 'sinh': <built-in function sinh>, '__name__': '__main__', 'trunc': <built-in function trunc>, 'expm1': <built-in function expm1>, 'e': 2.718281828459045, 'tanh': <built-in function tanh>, 'radians': <built-in function radians>, 'sin': <built-in function sin>, 'lgamma': <built-in function lgamma>, 'erf': <built-in function erf>, 'erfc': <built-in function erfc>, 'modf': <built-in function modf>, 'exp': <built-in function exp>, 'acos': <built-in function acos>, 'log1p': <built-in function log1p>, 'gamma': <built-in function gamma>} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-04T20:34:49.453

```
import X 
```

在引用模块对象的本地命名空间中创建一个标签。

```
from X import * 
```

`X`直接在本地命名空间中为模块的每个成员属性创建一个标签。

两个操作都添加`X`到`sys.modules`, true，但是对本地命名空间的影响是不同的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-04T20:35:23.070

存在差异，有些很简单，有些则需要更多解释。

`import X`只需导入整个模块（阅读：“运行模块”），并在本地范围内为其分配一个名称。该名称可以像这样使用别名：`import X as Y`

`from X import *`默认情况下，将模块的所有*属性*`X`导入本地范围。这是不同用法的示例：

```
# Assume that module `X` contains an `opendb` function
import X
X.opendb('Y')

# VS.
from X import *
opendb('Y') 
```

当*模块*定义`__all__`. 这将语义更改为`from X import *`“导入*属性**中列出的* 所有内容”。这允许模块编写者控制从他们的模块中导出哪些函数和对象。`__all__`

 ** * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-04T20:41:13.417

除非您真的知道自己在做什么，否则*永远不要*使用。`from X import *`您可以从模块 X 中获取与来自另一个模块甚至您自己的程序的符号冲突的符号。我对该规则的唯一例外是有时`from math import *`。

您可以使用表单`from X import y`从模块中获取单个内容。

如果您使用`import X`表单，您不仅可以显式使用模块，而且如果您对模块进行更改并需要重新导入它，`X.y`您现在可以使用该功能。`reload`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-04T20:36:24.250

`from X import *`将模块中的所有元素`X`导入当前命名空间。 `import X`导入 X 但不“合并”命名空间。例如：

模块 X：

```
def foo(): pass
BAR = 12 
```

你的代码：

```
from X import *
foo() # calls X.foo
print BAR # prints 12 
```

或者：

```
import X
X.foo()
print X.BAR 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-04T20:36:59.743

让我们用它作为我们模块定义的一个例子

```
def my_func():
    return 1 
```

from import 会将所有内容拉入当前命名空间

```
from X import *
print my_func() 
```

正常导入将在当前命名空间中创建一个名为 X 的模块对象

```
import X
print x.my_func() 
```

此外 from X import my_func 可用于仅导入该功能。*

# php - cakePHP 助手不工作

> ID：12270955
> 
> 赞同：0
> 
> 时间：2012-09-04T20:33:12.787
> 
> 标签：php, cakephp-2.0

我正在尝试找出为什么在我的控制器中找不到我的助手。

我收到以下错误：

```
Fatal error: Call to a member function hash() on a non-object in /home/example/public_html/cake/app/Controller/CommentsController.php on line 26 
```

这是我在视图/助手中找到的“助手”助手

```
class HelperHelper extends AppHelper {

    public function hash($hash){
        return md5(sha1($hash."sha1777")."md5888");
    }
... 
```

这是评论控制器：

```
class CommentsController extends AppController {

    public $helpers = array('Html', 'Form', 'Helper');

$chk = $this->Helper->hash($this->request->data["Comment"]["qid"].$this->request->data["Comment"]["aid"]); 
```

当我之前执行以下操作时，我可以看到列出的助手：

当我打印助手时，我可以在数组中看到它：

```
Array
(
    [0] => Html
    [1] => Form
    [2] => Helper
) 
```

我不明白为什么这不起作用......任何帮助将不胜感激。

非常感谢，蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:35:28.573

哦，我有这个！您的控制器找不到您的助手，因为助手是**视图**层的扩展。组件是**控制器**层的扩展。

因此，如果您想在尝试时在控制器中使用此帮助器，请将其改为组件。或者如果是格式化代码，则将格式化代码移动到视图中。

# django - 谷歌闭包编译器 + Django 模板标签

> ID：12270956
> 
> 赞同：1
> 
> 时间：2012-09-04T20:33:16.660
> 
> 标签：django, google-closure-compiler

> **可能重复：**
> [使用 Google Closure Compiler 部分跳过部分](https://stackoverflow.com/questions/10449195/partially-skip-sections-with-google-closure-compiler)

我正在尝试使用[http://closure-compiler.appspot.com/home](http://closure-compiler.appspot.com/home)上的闭包编译器来压缩一些 JS。但它失败了，因为我的 javascript 中有 Django 模板标签，例如：

```
{% if user.is_authenticated %} 
```

和：

```
{{ csrf_token }} 
```

闭包编译器说我的语法不正确。有没有办法告诉编译器忽略模板标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:42:36.957

您需要使用与[IE Con​​ditional Comments](http://code.google.com/p/closure-compiler/wiki/UsingConditionalCommentWithClosureCompiler)或[PHP Tags](https://stackoverflow.com/questions/10449195/partially-skip-sections-with-google-closure-compiler/)相同的技术。

# javascript - 创建不断变化的 Google 涂鸦样式标题

> ID：12270958
> 
> 赞同：0
> 
> 时间：2012-09-04T20:33:25.007
> 
> 标签：javascript, datetime, time, scheduled-tasks

我想安排一个`<div>`在午夜时分出现在用户的位置。因此，如果纽约的用户在网站上并且对他们来说是 9 月 4 日，他们将看不到它，但澳大利亚的用户会在 9 月 5 日午夜过后看到它。对于那些在澳大利亚的人来说，它也必须在 23:59 消失。

有没有办法通过 HTML/javascript 做到这一点？我想知道谷歌如何让他们的涂鸦出现在午夜，因为这与我的网站标题图像类似。我在 Blogger 平台上。

谢谢。

**编辑：**添加了仅适用于 FF 而不适用于其他浏览器的代码

```
<div class='header-inner'>
<script>
var today = new Date(),
d = today.getDate(),
m = today.getMonth() + 1,
y = today.getFullYear(),
date = d + '/' + m + '/' + y,
specialDate = '5/9/2012';

if (date == specialDate) {
document.write(<div style='text-align:center; width:968px; margin-left:auto; margin-right:auto; position:relative; top:-0px; z-index:3;'>
<img alt='' border='0' height='258' id='Image-Maps_9201209030919307' src='http://2.bp.blogspot.com/-7EbtRf3eD6k/UBfBJKNkG8I/AAAAAAAABww/FDr_YNqs6zM/s1600/freddieforadayheader.png' usemap='#Image-Maps_9201209030919307' width='968'/>
<map id='_Image-Maps_9201209030919307' name='Image-Maps_9201209030919307'>
<area alt='' coords='5,212,44,252' href='http://twitter.com/#!/freddieforaday' shape='rect' title=''/>
<area alt='' coords='51,213,90,253' href='http://www.facebook.com/FreddieForADay' shape='rect' title=''/>
<area alt='' coords='98,212,137,252' href='http://www.youtube.com/user/FreddieForADay' shape='rect' title=''/>
<area alt='' coords='238,206,724,246' href='http://www.freddieforaday.com/' shape='rect' title=''/>
<area alt='' coords='777,151,963,253' href='http://www.freddieforaday.com/' shape='rect' title=''/>
<area alt='' coords='166,79,797,151' href='http://www.freedomrequireswings.com/' shape='rect' title=''/>
</map>
</div>); 
document.write('<style>#header {display:none;}</style>'); 
}
</script>
<div class='header section' id='header'><div class='widget Header' id='Header1'>
<div id='header-inner'>
<div class='titlewrapper'>
<h1 class='title'>
<img src='http://2.bp.blogspot.com/-wlqM17mmGtI/UCwqdvlhrzI/AAAAAAAAB64/VUcGl3kFcxE/s1600/title.png' style='margin-bottom:-20px; padding-top:20px'/>
</h1>
</div>
<div class='descriptionwrapper'>
<p class='description'>
<span>
</span>
</p>
</div>
</div>
</div></div> 
```

我有的：

```
<div class='header-inner'>
<div class='header section' id='header'><div class='widget Header' id='Header1'>
<div id='header-inner'>
<div class='titlewrapper'>
<h1 class='title'>
<img src='http://2.bp.blogspot.com/-wlqM17mmGtI/UCwqdvlhrzI/AAAAAAAAB64/VUcGl3kFcxE/s1600/title.png' style='margin-bottom:-20px; padding-top:20px'/>
</h1>
</div>
<div class='descriptionwrapper'>
<p class='description'>
<span>
</span>
</p>
</div>
</div>
</div></div> 
```

我想最终得到什么：

```
 <div class='header-inner'>
<div style='text-align:center; width:968px; margin-left:auto; margin-right:auto;'>
<img alt='' border='0' height='258' id='Image-Maps_9201209030919307' src='http://2.bp.blogspot.com/-7EbtRf3eD6k/UBfBJKNkG8I/AAAAAAAABww/FDr_YNqs6zM/s1600/freddieforadayheader.png' usemap='#Image-Maps_9201209030919307' width='968'/>
<map id='_Image-Maps_9201209030919307' name='Image-Maps_9201209030919307'>
<area alt='' coords='5,212,44,252' href='http://twitter.com/#!/freddieforaday' shape='rect' title=''/>
<area alt='' coords='51,213,90,253' href='http://www.facebook.com/FreddieForADay' shape='rect' title=''/>
<area alt='' coords='98,212,137,252' href='http://www.youtube.com/user/FreddieForADay' shape='rect' title=''/>
<area alt='' coords='238,206,724,246' href='http://www.freddieforaday.com/' shape='rect' title=''/>
<area alt='' coords='777,151,963,253' href='http://www.freddieforaday.com/' shape='rect' title=''/>
<area alt='' coords='166,79,797,151' href='http://www.freedomrequireswings.com/' shape='rect' title=''/>
</map>
</div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:41:49.010

一个简单的方法是：

```
var today = new Date(),
    d = today.getDate(),
    m = today.getMonth() + 1,
    y = today.getFullYear(),
    date = d + '/' + m + '/' + y,
    specialDate = '4/9/2012';

if (date == specialDate) {
    console.log('yay!'); /* or whatever */
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Lw5yJ/)。

显示如何添加`img`到`body`：

```
var today = new Date(),
    d = today.getDate(),
    m = today.getMonth() + 1,
    y = today.getFullYear(),
    date = d + '/' + m + '/' + y,
    specialDate = '4/9/2012',
    specialImage = document.createElement('img');
specialImage.src = 'http://www.eventspianist.co.uk/wp-content/uploads/2011/08/special_occasion.jpg';

document.getElementsByTagName('body')[0].appendChild(specialImage);

if (date == specialDate) {
    document.getElementsByTagName('body')[0].appendChild(specialImage);
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Lw5yJ/1/)。

**根据评论中提供的更多信息（由 OP）进行**编辑**`src`，以下内容仅更改了已存在图像的属性：**

 **```
var today = new Date(),
    d = today.getDate(),
    m = today.getMonth() + 1,
    y = today.getFullYear(),
    date = d + '/' + m + '/' + y,
    imgToReplace = document.getElementById('header-inner'),
    specialDate = '4/9/2012',
    specialImageSrc = 'http://www.eventspianist.co.uk/wp-content/uploads/2011/08/special_occasion.jpg';

console.log(imgToReplace);

if (date == specialDate) {
    imgToReplace.src = 'http://www.eventspianist.co.uk/wp-content/uploads/2011/08/special_occasion.jpg';
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Lw5yJ/2/)。

此版本明确用新创建的图像替换旧图像：

```
var today = new Date(),
    d = today.getDate(),
    m = today.getMonth() + 1,
    y = today.getFullYear(),
    date = d + '/' + m + '/' + y,
    imgToReplace = document.getElementById('header-inner'),
    specialDate = '4/9/2012',
    specialImage = document.createElement('img');
specialImage.src = 'http://www.eventspianist.co.uk/wp-content/uploads/2011/08/special_occasion.jpg';

if (date == specialDate) {
    imgToReplace.parentNode.replaceChild(specialImage, imgToReplace);
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Lw5yJ/3/)。

**编辑**为，希望能够实现自提出问题以来添加的要求：

```
function createArea(parent, coords, href, shape) {
    if (!parent || !coords || !href) {
        return false;
    }
    else {
        var newArea = document.createElement('area'),
            shape = shape || 'rect';
        newArea.coords = coords;
        newArea.href = href;
        newArea.shape = shape;

        parent.appendChild(newArea);

        return newArea;
    }
}

var today = new Date(),
    d = today.getDate(),
    m = today.getMonth() + 1,
    y = today.getFullYear(),
    date = d + '/' + m + '/' + y,
    specialDate = '5/9/2012',
    headerInner = document.getElementsByClassName('header-inner')[0],
    childDiv = document.createElement('div'),
    newImg = document.createElement('img'),
    newMap = document.createElement('map');

if (date == specialDate) {

    // setting up attributes of the newImg:
    newImg.id = 'Image-Maps_9201209030919307';
    newImg.src = 'http://2.bp.blogspot.com/-7EbtRf3eD6k/UBfBJKNkG8I/AAAAAAAABww/FDr_YNqs6zM/s1600/freddieforadayheader.png';
    newImg.setAttribute('usemap', '#Image-Maps_9201209030919307');
    newImg.style.height = '258px';
    newImg.style.width = '968px';
    newImg.style.borderWidth = '0';

    childDiv.appendChild(newImg);

    // Setting up the imagemap:
    newMap.id = 'Image-Maps_9201209030919307';
    newMap.name = newMap.id;

    childDiv.insertBefore(newMap, newImg.nextSibling);

    // setting up the areas:
    var area1 = createArea(newMap, '51,213,90,253', 'http://www.facebook.com/FreddieForADay'),
        area2 = createArea(newMap, '98,212,137,252', 'http://www.youtube.com/user/FreddieForADay'),
        area3 = createArea(newMap, '238,206,724,246', 'http://www.freddieforaday.com/'),
        area4 = createArea(newMap, '777,151,963,253', 'http://www.freddieforaday.com/'),
        area5 = createArea(newMap, '166,79,797,151', 'http://www.freedomrequireswings.com/');

    console.log(area4);

    // emptying the headerInner div element:
    while (headerInner.firstChild) {
        headerInner.removeChild(headerInner.firstChild);
    }

    // adding the new content (all contained within the childDiv node):
    headerInner.appendChild(childDiv);
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/jVBSu/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T01:24:06.360

最后，我选择了...

```
<script type='text/javascript'>
var today = new Date(),
d = today.getDate(),
m = today.getMonth() + 1,
y = today.getFullYear(),
date = d + '/' + m + '/' + y,
specialDate = '5/9/2012';

if (date == specialDate) {
document.getElementById("doodle").style.display = "block";
document.getElementById("defaultheader").style.display = "none";
} 
else {
document.getElementById("doodle").style.display = "none";
document.getElementById("defaultheader").style.display = "block";
} 
</script> 
```

然后我把我的自定义涂鸦代码放进去

```
<div id='doodle'> 
```

和我默认的日常标题

```
<div id='defaultheader'> 
```

它适用于所有浏览器，并且易于定制。

非常感谢[大卫托马斯](https://stackoverflow.com/users/82548/david-thomas)的所有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T20:40:29.250

您可以使用`var now = new Date()`获取当前日期和时间，然后与要显示的日期进行比较`<div>.`**

# javascript - 在moderatemaps.js 中加载其他数据，如地图图块

> ID：12270961
> 
> 赞同：1
> 
> 时间：2012-09-04T20:33:32.480
> 
> 标签：javascript, maps, gis

到目前为止，我有一张地图很好地使用了moderatemaps.js。然而，在我的幼稚实现下，在每个缩放级别加载大约 200kb 的数据以呈现为标记（它在 geoJson 中，但需要相当多的客户端处理）。该单一负载代表该缩放级别的所有数据，但等待它完成变得烦人。我想切换到只为显示的地图图块加载数据的东西。

让服务器为`{x}/{y}/{z}`样式请求返回正确的数据并不难，但有没有一种简单的方法让moderatemaps 为我处理请求部分的客户端？我希望`TemplatedLayer`我可以提供一个 url 和一个回调。

有什么建议么？

# ios - iOS 中突出显示的文本（类似卡拉 OK 的应用）

> ID：12270964
> 
> 赞同：9
> 
> 时间：2012-09-04T20:33:44.893
> 
> 标签：ios, text, uitextview, highlight

我正在尝试创建一个类似卡拉 OK 的应用程序，但我遇到了一个问题。

我有一首 mp3 歌曲和 UITextView 中显示的相应歌词。我想突出显示/下划线（或类似的东西）从该 mp3 文件中听到的单词。我对每个单词都有相应的时间（开始时间、结束时间、持续时间），但我不知道如何突出显示它们。

我在 Stack Overflow 上进行了搜索，但已经发布的问题都没有解决我的问题。

我已经看到 UITextView 可能不适合我的要求，但我不知道还能使用什么。

我在 WWDC 2011 上看到过类似的东西：一个核心动画“弹跳球”演示，但我无法实现它。

请帮我找到一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T20:58:00.160

在我看来，您有两种选择：

## 1.核心文本属性

使用 Core Text，您可以在单词下划线并对其应用许多其他装饰。以下是为文本添加下划线的示例：

```
//Create a font
CTFontRef sysUIFont = CTFontCreateUIFontForLanguage(kCTFontSystemFontType,
    24.0, NULL);

//Create a string
NSString *aString = @"Random text";

//Choose the color
CGColorRef color = [UIColor blueColor].CGColor;

//Single underline
NSNumber *underline = [NSNumber numberWithInt:kCTUnderlineStyleSingle];

//Pack the attributes into a dictionary
NSDictionary *attributesDict = [NSDictionary dictionaryWithObjectsAndKeys:
    (id)sysUIFont, (id)kCTFontAttributeName,
    color, (id)kCTForegroundColorAttributeName,
    underline, (id)kCTUnderlineStyleAttributeName, nil];

//Make the attributed string
NSAttributedString *attrString = [[NSAttributedString alloc] initWithString:string
    attributes:attributesDict]; 
```

现在这适用于为文本添加下划线，但我不确定如何随着歌词的进展动画下划线从一个单词移动到另一个单词。

* * *

## 2.自定义UIView下划线

现在你的第二个选择是创建一个自定义的子类 UIView 的下划线类。这很容易制作动画。你甚至不必为下划线创建一个单独的类（尽管我推荐它）；您可以只创建一个 UIView 并使用如下动画将它从一个单词移动到另一个单词：

```
CABasicAnimation *underlineMove = [CABasicAnimation animationWithKeyPath:@"position"];
underlineMove.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
endPosition = CGPointMake((float)nextWord.x, (float)nextWord.y);
underlineMove.toValue = [NSValue valueWithCGPoint:endPosition];
underlineMove.duration = currentWord.duration;
[underlineView addAnimation:underlineMove forKey:@"animation"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T09:28:43.127

我发现最简单的方法是使用 uiwebview，以 html 格式插入文本并使用 javascript 下划线/突出显示它......希望它对每个想要这样做的人有所帮助:)

# java - 处理语言环境选择级联逻辑的 Java 库

> ID：12270967
> 
> 赞同：1
> 
> 时间：2012-09-04T20:34:07.380
> 
> 标签：java, internationalization, locale

我正在尝试为 ext.js 引入不同的语言环境翻译。大多数 ext.js 翻译只带有识别的语言 (ext-lang-fr.js)。但是，当我查看门户以决定要包含哪个翻译文件时，我的门户总是会为我提供语言/国家/地区设置。我要支持的语言有限。是否有一个现有的 java 库封装了决定列表中最具体文件的逻辑。

例如，如果我的支持语言文件被标识为：{de,en,es,fr,it,pt_PT,zh_CN} 如果 request.getLocale() 以“fr_FR”响应，那么它将以我的特定“fr”响应列表。如果我传递了一个不在列表中的值，它会以一些默认值响应。

显然我可以自己解析字符串/编写自己的字符串等，但我想知道是否有一种标准且强大的方法来做到这一点？

马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:42:49.827

如果您使用 Java 6 或更新版本，则有些东西。显然，他们必须实现这种区域设置层次结构才能从属性文件中加载字符串。您可以使用[ResourceBundle.Control](http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.Control.html)获取区域设置的分层列表：

```
Control control = Control.getControl(Control.FORMAT_DEFAULT);
List<Locale> locales = control.getCandidateLocales("messages",
Locale.forLanguageTag("zh-HK"));
for (Locale locale : locales) {
    System.out.println(locale.toLanguageTag());
} 
```

这将返回（Java 7）：

```
zh-Hant-HK
zh-Hant
zh-HK
zh
und 
```

其中“und”表示“未定义”。甚至更好，因为您实际上可以构建文件的名称：

```
Control control = Control.getControl(Control.FORMAT_DEFAULT);
List<Locale> locales = control.getCandidateLocales("messages",
Locale.forLanguageTag("pl-PL"));
for (Locale locale : locales) {
    String bundleName = control.toBundleName("messages", locale);
    System.out.println(bundleName);
    String resourceName = control.toResourceName(bundleName, "properties");
    System.out.println(resourceName);
} 
```

结果是：

```
messages_pl_PL
messages_pl_PL.properties
messages_pl
messages_pl.properties
messages
messages.properties 
```

当然，您需要知道特定文件是否存在，但这应该非常简单。

# .net - 上传损坏但文件大小正确？

> ID：12270983
> 
> 赞同：3
> 
> 时间：2012-09-04T20:35:30.617
> 
> 标签：.net, powershell, png

我正在使用 Invoke-Restmethod 尝试将 png 文件上传到 rapidshare，服务器上的文件大小是正确的，但如果我下载文件，它甚至不是图像，这绝对是一个编码问题，但我不知道我是什么做错了吗？

```
$FreeUploadServer = Invoke-RestMethod -Uri "http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=nextuploadserver"
$url = "http://rs$FreeUploadServer.rapidshare.com/cgi-bin/rsapi.cgi"
$fields = @{sub='upload';login='username';password='pass';filename='2he1re.png';filecontent=$(Get-Content C:\libs\test.png -Raw)}

Invoke-RestMethod -Uri $url -Body $fields -Method Post -ContentType "image/png" 
```

我已经尝试了各种各样的东西，有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:53:07.510

使用参数读取文件内容`-Raw`仍然返回一个`string`对象，这对于像 PNG 这样的二进制文件可能会有问题。我认为 RapidShare API 需要 URL 编码的表单发布数据。尝试这个：

```
## !! It would be nice if this worked, but it does not - see update below !!
Add-Type -AssemblyName System.Web
$fields = @{sub='upload';login='username';password='pass';filename='2he1re.png';
            filecontent=Get-Content C:\libs\test.png -Enc Byte -Raw} 
```

顺便说一句，我认为您可能想放弃设置`ContentType`. 内容类型应该是`application/x-www-form-urlencoded`- 我认为。

我发现[这篇文章](http://aspnetresources.com/blog/encoding_forms)对 HtmlEncode 和 UrlEncode 之间的区别很有用。

**更新：**当正文采用哈希表的形式时，似乎`Invoke-RestMethod`是 URL 编码 POST 的正文。那很好。但是它似乎不接受字节数组。它期望哈希表中的每个值都是一个字符串或可表示为一个字符串，即它对每个值调用 ToString()。这使得正确编码二进制数据变得具有挑战性。我对 PowerShell 团队有疑问。

好的，想出了一个合理的解决方法。还记得我之前提到的，将 Body 作为字符串传递等同于传递哈希表吗？好吧，事实证明有一个重要的区别。:-) 当您传入一个字符串时，cmdlet 不会对其进行 Url 编码。因此，如果我们传入一个字符串，我们可以绕过我认为是此 cmdlet 的限制（不支持哈希表中的 byte[] 值）。尝试这个：

```
Add-Type -AssemblyName System.Web
$png  = [Web.HttpUtility]::UrlEncode((Get-Content C:\libs\test.png -Enc Byte -Raw))
$body = "sub=upload&login=username&password=pass&filename=2he1re.png&filecontent=$png"
Invoke-RestMethod -Uri $url -Body $body -Method Post 
```

# python - python - 如何从子进程中运行的ghostscript命令中捕获错误

> ID：12270984
> 
> 赞同：1
> 
> 时间：2012-09-04T20:35:35.733
> 
> 标签：python, ghostscript, subprocess

我在一个子进程中运行 ghostscript，它运行良好，但我似乎无法捕获错误。

```
import subprocess

cmd = 'gs -dSAFER -dNOPAUSE -dBATCH -sDEVICE=jpeg -sOutputFile=img-%d.jpeg -r150 -g600x600 sample.pdf'
p = subprocess.Popen(cmd.split(), shell=False, stderr=subprocess.PIPE)

stderr = p.communicate()

print stderr 
```

我的问题是命令是否正确执行或没有标准错误总是等于：

（没有任何， ''）

我第二次尝试同时指定 stdout 和 stderr

```
p = subprocess.Popen(slide_cmd.split(), shell=False, stdin=PIPE, stdout=PIPE, stderr=STDOUT) 
```

p.stdout 给出输出，但 p.stderr 仍然返回 None

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:55:29.570

Ghostscript 似乎主要写入 STDOUT，除了致命错误的摘要，如

```
GPL Ghostscript 8.71: Unrecoverable error, exit code 1 
```

最终出现在 STDERR 上。因此，也请阅读 STDOUT，您应该能够捕获所有内容。

为了帮助调试，使用 subprocess 打印您在 python 中执行的命令，然后在 shell 中使用 IO 重定向将输出重定向到文件，以便在该流上查看 GS 输出什么。例如：`gs [args] 2>stderr.txt 1>stdout.txt`

在旁注中，您应该使用`shlex.split()`而不是`str.split()`标记参数列表，请参阅[子流程文档中的此注释](http://docs.python.org/library/subprocess.html#popen-constructor)。

在第二个站点上注意：一旦您开始使用字符串格式 ( ) 将“sample.pdf”替换为实际文件名`cmd % filename`，请确保您转义它`%d`（因为它应该由 GS，而不是 Python 解释），`%%d`而是使用。

# c# - DBConnection 连接到 SQLite 和 MySQL

> ID：12270985
> 
> 赞同：0
> 
> 时间：2012-09-04T20:35:43.443
> 
> 标签：c#, mysql, database, sqlite

我正在寻找或尝试编写一个需要能够连接到 SQLite 和 MySQL 数据库的连接类。我工作的公司同时使用这两种方法，而且他们非常投入，他们不想只换一种。所以，我需要编写一个 DBConnection 来连接两者，或者找到一个框架来做这件事。现在，我编写了自己的（在 C# 中），它具有一些重载的连接和查询函数，这些函数将根据传递的参数与适当的数据库一起使用。但我希望它尽可能通用，能够连接和查询任一 SQL 类型的数据库，而无需一堆重载函数。感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:38:27.490

考虑使用 NHibernate 或实体框架。你将从 ORM 中获得更多，而不仅仅是与数据库无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:38:39.930

由于您正在寻找框架或库来执行此操作，因此您应该查看[EnterpriseLibary](http://msdn.microsoft.com/en-us/library/ff632023.aspx)。

[链接到 CodePlex 网站](http://entlib.codeplex.com/)

# windows - dmake 中的 shell 命令添加 '/S'

> ID：12270987
> 
> 赞同：3
> 
> 时间：2012-09-04T20:35:59.803
> 
> 标签：windows, bash, makefile, mingw, porting

我正在用 MinGW 系统编译 Xindy。`dmake`总是因错误而死，我已将其缩小到 Makefile 中的几行。尝试在此运行 dmake：

```
SHELL = /bin/sh
some-target:
    target=`echo info-recursive | sed s/-recursive//`; 
```

如果您使用的是常规 Windows CMD 而不是 MinGW shell，则必须更改 SHELL 变量的位置以指向类似“C:/MinGW/msys/1.0/sh.exe”的内容。无论如何，以上失败：

```
CreateProcess failed (2).
dmake: Error executing 'bin/sh /S /c "target=`echo info-recursive | sed s/-recursive//`;"': No such file or directory
dmake: Error code -1, while making 'some-target' 
```

sed 和 sh 已安装，它们工作正常。当我尝试将给定命令作为错误消息本身的输出运行时，我得到以下信息：

```
$ /bin/sh /S /c "target=`echo info-recursive | sed s/-recursive//`;"
/bin/sh: /S: No such file or directory 
```

所以似乎dmake（或其他东西）正在将'/S /c'添加到shell参数中，而bash认为它是一个文件名，然后在找不到它时失败。

有没有人有这方面的经验或知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T23:12:57.793

*对dmake*源代码的简要检查表明问题在于`$(SHELL)`设置得太晚并且在启动时仍然为空（[macros.mk](http://code.google.com/a/apache-extras.org/p/dmake/source/browse/trunk/startup/winnt/macros.mk)，第 37 行）：

```
11  .IF $(SHELL) == $(NULL)
...
15     SHELL *:= $(COMSPEC)
...
...
35  .IF $(SHELL) == $(COMSPEC)
36  .IF $(COMSPEC:lf) == cmd.exe
37     SHELLFLAGS       *:= $(SWITCHAR)S $(SWITCHAR)c 
```

您可以通过添加`SHELL="C:/MinGW/msys/1.0/sh.exe"`到您的 dmake 命令行调用来解决此问题。

（我已经很多年没有使用过 dmake 了，所以这里可能会出错，但是如果你能得到一个看起来像自动没收的 makefile 来与 dmake 一起工作，我会印象深刻，IIRC 的风格有些不同。它可能更容易查找 GNU*品牌*或类似产品。）

# java - JPA 存储库：javax.persistence.NonUniqueResultException：结果返回多个元素

> ID：12270991
> 
> 赞同：14
> 
> 时间：2012-09-04T20:36:28.650
> 
> 标签：java, jpa, spring-data-jpa

使用下面的代码我无法得到我的查询结果。无论我使用`Map<ContentType...`还是`Map<String...`我得到相同的错误：javax.persistence.NonUniqueResultException：结果返回多个元素

JPA 似乎应该能够处理存储库中的多行。我四处寻找可能只是丢失的其他注释，并且很难得出结果。

关于我应该做些什么来解决这个问题的任何建议？

```
@Transactional
public interface ContentRepository extends JpaRepository<Content,Integer>{

    ....

    @Query(nativeQuery=true, value="SELECT content_type, COUNT(*) AS myColumn FROM dbo.content GROUP BY content_type")
    Map<ContentType, Integer> getContentCountByType();

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T15:16:46.573

似乎问题在于`Map<ContentType, Integer>`它没有唯一索引的承诺，因此 JPA 不喜欢映射到它。通过使用`List<Map<ContentType, Integer>>`，它工作得很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T11:46:12.610

**试试这个它有效**

**将您的模型保留在列表中**

```
@RequestMapping(value="/deleteDriver/{id}" , method=RequestMethod.POST)
public ResponseEntity<Object> deleteDriver(@PathVariable("id") Integer id)
{
    List<Driver> delete_driver=adminService.getDriverById(id);
    Map<String,Object> response=new HashMap<>();

    if(delete_driver==null)
    {
        response.put("status", "Failure");
        return new ResponseEntity<Object>(response,HttpStatus.NO_CONTENT);
    }
    else
    {
        response.put("status", "Success");
        adminService.delete(delete_driver);
        return new ResponseEntity<Object>(response,HttpStatus.OK);
    }

} 
```

> 然后在您的存储库中

```
@Override
public void delete(List<Driver> delete_driver) {

    driverRepository.delete(delete_driver);
} 
```

# jquery - 如何将点击事件分配给 iframe 内的元素？

> ID：12270992
> 
> 赞同：0
> 
> 时间：2012-09-04T20:36:29.183
> 
> 标签：jquery

如何将点击事件分配给 ifraem 中的元素？

我开始发帖检测 iframe 是否已加载。

[如何检测是否加载了 iframe？](https://stackoverflow.com/questions/12267010/how-to-detect-if-the-iframe-is-loaded)

我还有其他问题

如何在 iframe 中分配事件或操作元素？

我试过..

```
$(function(){
    $('#click').on('click', function(){
        var ifr=$('<iframe></iframe>', {
            id:'MainPopupIframe',
            src:'http://heera.it',
            style:'display:none',
            load:function(){
                $(this).show();
                alert('iframe loaded !');
            }
        });
        $('body').append(ifr);    

    //when I click the home page button, nothing happen...
    $('#menu-item-277').click(function(){
       alert('click!!!');
    })
    });
});
​ 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:45:23.493

由于跨域安全限制（同源策略），如果 iframe 的内容存在于父页面以外的域上，则这是不可能的。

如果您可以访问这两个域，则可以尝试使用诸如 Ben Alman 出色的[PostMessage](http://benalman.com/projects/jquery-postmessage-plugin/)之类的插件来设置跨域/跨浏览器 iframe 通信流。然后，您可以绑定到`click`本地 DOM 元素的事件并向 iframe 发送消息，其中轮询循环可以侦听它并`click`在 iframe 内触发事件。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:45:00.770

[由于相同的原产地政策](http://en.wikipedia.org/wiki/Same_origin_policy)，您不能这样做。基本上，iframe 必须与尝试修改它的脚本位于同一域中。

# android - Android布局-为什么RelativeLayout不占用平板电脑的整个屏幕？

> ID：12270995
> 
> 赞同：0
> 
> 时间：2012-09-04T20:36:48.023
> 
> 标签：android, android-layout, screen, android-relativelayout

我试图让这个布局占据我的三星 Galaxy Tab 10.1 的整个屏幕，它的屏幕尺寸大约为 800x1280。

我的 res/layout-hdpi 和 res/layout 中有以下 xml，我的 @drawable/background 位于 res/drawable 和 res/drawable-hdpi 中，其中 hdpi 中的背景图像为 800x1280 大小。

但是，当我渲染以下内容时，我无法让它占据整个屏幕。我试图摆脱 ScrollView，将 relativelayout 更改为 linearlayout 并设置它们的 layout_height="match_parent" 但没有任何改变......我试图清理项目，在重新加载之前从设备上卸载应用程序......似乎没有任何工作。有人会解释发生了什么吗？我想我错过了一些非常重要的东西。

（注意：这在我的 kindle fire 和屏幕尺寸为 600x1024 ish 的 7" 平板电脑上运行良好）

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView android:layout_width="fill_parent" android:layout_height="fill_parent"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <RelativeLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:background="@drawable/background">

        <RelativeLayout 
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/game_relativelayout_top_textview_definition_and_example"
            >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="@drawable/game_screen_image_box"
                android:id="@+id/game_linearlayout_top_textview_definition_and_example"
                android:orientation="vertical"
                >
                <TextView
                    android:id="@+id/game_textview_definition"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="@dimen/padding_double"
                    android:layout_marginLeft="@dimen/padding_quadruple"
                    android:layout_marginRight="@dimen/padding_quadruple"
                    android:gravity="center_horizontal"
                    android:textSize="@dimen/font_size_slight_larger"
                    android:textColor="@android:color/black"
                    android:text="@string/filler" />

                <ImageView 
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="@dimen/padding_double"
                    android:src="@drawable/details_page_screen_divider"
                    android:contentDescription="@string/filler" />

                <TextView
                    android:id="@+id/game_textview_example"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="@dimen/padding_double"
                    android:layout_marginLeft="@dimen/padding_quadruple"
                    android:layout_marginRight="@dimen/padding_quadruple"
                    android:gravity="center_horizontal"
                    android:textSize="@dimen/font_size_slight_larger"
                    android:textStyle="italic"
                    android:textColor="@android:color/black"
                    android:text="@string/filler" />
            </LinearLayout>         

            <ImageView
                android:id="@+id/game_imageview_thumbs_down"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_alignParentBottom="true"
                android:layout_marginRight="@dimen/padding_quadruple"
                android:layout_marginBottom="@dimen/padding_quadruple"
                android:src="@drawable/game_screen_image_thumbs_down"
                android:contentDescription="@string/filler"
                />
            <ImageView
                android:id="@+id/game_imageview_thumbs_up"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toLeftOf="@id/game_imageview_thumbs_down"
                android:layout_alignParentBottom="true"
                android:layout_marginRight="@dimen/padding_double"
                android:layout_marginBottom="@dimen/padding_quadruple"
                android:src="@drawable/game_screen_image_thumbs_up"
                android:contentDescription="@string/filler"
                />  
        </RelativeLayout>

        <ImageView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/game_imageview_timer_foreground"
            android:src="@drawable/game_screen_image_timer_foreground"
            android:contentDescription="@string/filler"
            android:layout_below="@id/game_relativelayout_top_textview_definition_and_example"
            />

        <ImageView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/game_imageview_timer_background"
            android:src="@drawable/game_screen_image_timer_background"
            android:contentDescription="@string/filler"
            android:layout_below="@id/game_relativelayout_top_textview_definition_and_example"
            />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_below="@id/game_imageview_timer_foreground"
            android:layout_marginTop="@dimen/padding_single">
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal">
                <Button
                    android:id="@+id/game_button_answer_choice_1"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:textSize="@dimen/font_size_regular"
                    android:text="@string/filler"
                    android:background="@drawable/game_screen_button_top_left"/>
                <Button
                    android:id="@+id/game_button_answer_choice_2"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:textSize="@dimen/font_size_regular"
                    android:text="@string/filler"
                    android:background="@drawable/game_screen_button_top_right"/>
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal">
                <Button
                    android:id="@+id/game_button_answer_choice_3"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:textSize="@dimen/font_size_regular"
                    android:text="@string/filler"
                    android:background="@drawable/game_screen_button_bottom_left"/>
                <Button
                    android:id="@+id/game_button_answer_choice_4"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:textSize="@dimen/font_size_regular"
                    android:text="@string/filler"
                    android:background="@drawable/game_screen_button_bottom_right"/>
            </LinearLayout>
        </LinearLayout>

    </RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:25:52.140

您应该使用其中一个`fill_parent`或`match_parent`代替`wrap_content`as，wrap_content 只占用内容所需的高度，但 fill_parent 或 match_parent 占用整个高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:51:02.113

嗯，有一些事情你应该首先处理，这可能是其他事情没有以正确的方式处理的原因。relativeLayout 没有/不需要任何“方向”参数，您应该删除它。此外，我建议使用 fill_parent 或 match_parent 而不是同时使用。（请注意， match_parent 实现了相同的结果，但仅从 API 8 开始可用）。

最终，确保您的图像具有您指向的像素数量：注意图像的分辨率 (ppi)

# entity-framework-4 - “从数据库更新模型”添加没有键的表

> ID：12270997
> 
> 赞同：0
> 
> 时间：2012-09-04T20:36:56.193
> 
> 标签：entity-framework-4

我有一组从数据库生成的实体。一个表不会添加到 EDMX 文件中，因为它没有键，甚至没有可以自动推断为键的东西。

无法重新设计 DB 表。有没有办法将此表添加到我的图表中？

我记得不久前有一个简单的技术，但细节却让我忘记了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:44:09.873

我会相信你的话，你不能改变桌子，仍然请你尝试这样做:) 只是因为这是一个多么糟糕的想法。但假设您在尝试第 n 次后对此无能为力，请尝试这篇文章，看看它是否有帮助： [http ://www.benhblog.com/2008/11/entity-framework-and-tables-with-no .html](http://www.benhblog.com/2008/11/entity-framework-and-tables-with-no.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:33:18.993

我还看到了这个更具描述性的博客条目：http: [//pratapreddypilaka.blogspot.in/2012/04/entity-framework-adding-datatable-with.html](http://pratapreddypilaka.blogspot.in/2012/04/entity-framework-adding-datatable-with.html)

由于我的模型是完全只读的，它运行得相当好。