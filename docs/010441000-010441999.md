# StackOverflow 问答 10441000-10441999

# c# - 如何以编程方式将标签的前景色设置为其默认值？

> ID：10441000
> 
> 赞同：36
> 
> 时间：2012-05-04T00:03:43.817
> 
> 标签：c#, asp.net

我正在使用 VS2010 C# ASP.NET

为了以编程方式更改名为`lblExample`“红色”的 asp:Label 的前景色，我这样写：

```
lblExample.ForeColor = System.Drawing.Color.Red; 
```

更改前景色后，如何以编程方式将标签的前景色设置为默认值（来自 css 文件）？

备注：标签没有 CSS 条目（类或 ID 特定样式）。颜色是遗传的。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-05-04T01:56:19.363

简单的

```
if (lblExample.ForeColor != System.Drawing.Color.Red)
{
    lblExample.ForeColor = System.Drawing.Color.Red;
}
else
{
    lblExample.ForeColor = new System.Drawing.Color();
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-29T09:09:51.413

您也可以使用以下格式：

```
Label1.ForeColor = System.Drawing.ColorTranslator.FromHtml("#22FF99"); 
```

和

```
HyperLink1.ForeColor = System.Drawing.ColorTranslator.FromHtml("#22FF99"); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-12-18T14:24:42.313

默认（使用设计器创建时）是：

```
label.ForeColor = SystemColors.ControlText; 
```

这应该尊重系统颜色设置（例如，这些针对视障人士的“高对比度”方案）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-07-24T08:27:35.897

你也可以使用

```
lblExamlple.ForeColor = System.Drawing.Color.FromArgb(0,255,0); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-17T13:09:45.353

例如`summer`：

```
lblSummer.foreColor = color.Yellow; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-15T09:10:51.093

```
labelname.ForeColor = Color.Colorname;   ­­­­ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-21T14:23:17.143

DefaultForeColor 足以满足此声明。此属性获取控件的默认前景色。

```
lblExample.ForeColor = DefaultForeColor; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-03T17:48:29.947

ARBG = Color(alpha,Red,Blue,Green) 你可以设置任何你想要的值，但不要忘记最大值是 255

* * *

例子 ：

`labelname.ForeColor = Color.FromArbg(100,200,30);`

# android - android在视图删除时回收视图中的所有位图

> ID：10441001
> 
> 赞同：1
> 
> 时间：2012-05-04T00:03:56.507
> 
> 标签：android, memory-management, bitmap, viewgroup, recycle

我有一个`ViewPager`Kindle Fire 应用程序，每页大约增加 30 次浏览`Activity`。一旦添加了位图，就没有对位图的*引用（在本地语句块关闭后，变量会丢失）。*

删除父视图时回收所有位图的最简单方法是什么？我需要这样做，因为在刷了几页之后，我的应用程序关闭了，因为没有更多的内存可以分配，因为显然未回收的位图不会释放它们的内存。

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T05:31:08.310

你说你在应用程序中使用了 Viewpager 然后确保你在它的 PagerAdapter 适配器中使用了下面的方法。

```
@Override
        public void destroyItem(ViewGroup container, int position, Object object) {
            // TODO Auto-generated method stub
            ((ViewPager)container).removeView((View)object);
        } 
```

此方法删除不在当前屏幕和此方法中显示的页面

```
@Override
        public Object instantiateItem(ViewGroup container, int position) {
} 
```

在此方法中有效加载图像，为此您可以参考 android 开发者网站。[显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)

# android - 列表视图在

> ID：10441004
> 
> 赞同：0
> 
> 时间：2012-05-04T00:04:36.697
> 
> 标签：android, include, android-listview, listadapter

你好，我没有代码问题，因为我仍然没有任何关于如何去做的想法。我的问题是：

我`ListView`在我`Activity`的 with上创建了一个`ListAdapter`，我希望它`Activity`用 this 显示新的布局`ListView`。

为什么同样的活动？

*   因为我想保留我的`OnItemClickListener`并拥有一份完整的工作清单。

为什么我要列出？

*   因为我想要更好地`UI`查看我的应用程序。

如果我`Activity`用包含 that 的新布局调用另一个`ListView`，那么`ListView`它将为空，因为没有获取列表内容的活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:01:30.420

我认为您误解了Android的工作原理...

您可以有多个带有多个列表视图的活动。列表视图都可以使用相同的布局，也可以使用不同的布局。他们也可以各自拥有自己的 onItemClickListener。

我的一个项目中的一个例子：

```
public class BrowseSetups extends ListActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mDBHelper = new DBAdapter(this);
        mDBHelper.open(DBAdapter.MAIN_DATABASE_NAME, DBAdapter.MAIN_DATABASE_VERSION);
        setupsCursor = mDBHelper.fetchSearchSetups(find, column);
        this.startManagingCursor(setupsCursor);
        String[] from = new String[] { DBAdapter.SETUP_PART };
        int[] to = new int[] { R.id.ListItem1 };
        SimpleCursorAdapter tools = new SimpleCursorAdapter(this,
            R.layout.listlayout, setupsCursor, from, to);
        setListAdapter(tools);
}
    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        setupsCursor.moveToPosition(position);
        Intent myIntent = new Intent(BrowseSetups.this, BrowseTools.class);
        BrowseSetups.this.startActivity(myIntent);
    }
}

public class BrowseTools extends ListActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mDBHelper = new DBAdapter(this);
    mDBHelper.open(DBAdapter.MAIN_DATABASE_NAME, DBAdapter.MAIN_DATABASE_VERSION);
    toolsCursor = mDBHelper.fetchAllTools();
    this.startManagingCursor(toolsCursor);
    String[] from = new String[] { DBAdapter.TOOL_ROWID,
            DBAdapter.TOOL_DESCRIPTION };
    int[] to = new int[] { R.id.ListItem1, R.id.ListItem2 };
    SimpleCursorAdapter tools = new SimpleCursorAdapter(this,
            R.layout.listlayoutdouble, toolsCursor, from, to);
    setListAdapter(tools);
    }
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    toolsCursor.moveToPosition(position);
    String Tool = "Tool #: " + id;
    String Description = "Description: "
            + toolsCursor.getString(toolsCursor
                    .getColumnIndex(DBAdapter.TOOL_DESCRIPTION));
    String Location = "Location: "
            + toolsCursor.getString(toolsCursor
                    .getColumnIndex(DBAdapter.TOOL_LOCATION));
    AlertDialog locationAlert = new AlertDialog.Builder(this).create();
    locationAlert.setTitle("Tool Information");
    locationAlert.setMessage(Tool + "\n" + Description + "\n" + Location);
    locationAlert.setButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            return;
        }
    });
    locationAlert.show();
} 
```

所以这是两个不同的活动，有两个不同的列表，使用两个不同的列表视图，每个都有自己的 onListItemClick 方法，它们做完全不同的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:16:25.847

所以...您希望相同的活动在用户交互后显示不同的视图？也许[ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html)可能会有所帮助。

# java - scala和java io和sockets问题

> ID：10441005
> 
> 赞同：1
> 
> 时间：2012-05-04T00:04:47.643
> 
> 标签：java, sockets, scala, io

我正在关注 java net 编程中的一个示例，并决定分别在 java-scala 中编写一个客户端-服务器，这是 scala 代码：

```
import scala.actors.Actor
import scala.actors.Actor._

import java.io._
import java.net._

class EchoActor(private val sock: Socket,
    private val id: Int) extends Actor{

    def act(){
        try{
            val in = new BufferedReader(
                new InputStreamReader(sock.getInputStream()))

            val out = new PrintWriter(
                sock.getOutputStream(), true)

            out.println("Hello! press BYE to exit")
            var done = false
            while(!done){
                var str = in.readLine()
                if (str == null) done = true
                else{
                    println(str) // debug
                    out.println("Echo (" + id + "): " + str)
                    if (str.trim().equals("BYE")) done = true
                }
            }
            sock.close()
        }
        catch{
            case e => e printStackTrace
        }
    }
}

object Main{
    def main(args: Array[String]){
        try{
            var i = 1
            val s = new ServerSocket(8189)

            while(true){
                var inc = s.accept()
                println("Spawning " + i)
                var a = new EchoActor(inc, i)
                a.start()
                i += 1
            }
        }
        catch{
            case e => e printStackTrace
        }
    }
} 
```

这是java的：

```
import java.net.*;
import java.io.*;

public class Client{
    public static void main(String[] args){

        try{
            Socket s = new Socket("127.0.0.1",8189);

            BufferedReader in = new BufferedReader(
                new InputStreamReader(System.in));

            PrintWriter out = new PrintWriter(
                s.getOutputStream(), true);

            BufferedReader socketIn = new BufferedReader(
                new InputStreamReader(s.getInputStream()));

            System.out.println("Enter: to exit");
            String resp;
            String st
            while(true){
                st = in.readLine();
                if(st.equals("exit") || st.equals("quit")) break;
                else{
                    out.println(st);
                    resp = socketIn.readLine();
                    System.out.println(resp);
                }
            }
        }
        catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

服务器的输出：

```
Spawning 1
s

s

l
l
scala

java 
```

java的输出：

```
Enter: to exit
s
Hello! press BYE to exit

Echo (1): s
s
Echo (1):

Echo (1): s
l
Echo (1):
l
Echo (1): l
scala
Echo (1): l

Echo (1): scala
java
Echo (1):

Echo (1): java 
```

如您所见，我收到`Echo (1)`的响应为空，我希望打印`Echo (1)`我刚刚发送的字符串，您必须重新键入“Enter”以获取先前发送的字符串，这就是问题所在，我只需要来自服务器的一个响应像这样只有一次：`Echo (1): some string`，我没有想法，我通过打印到控制台来跟踪它，但不知道发生了什么。

编辑：

预期客户的输出：

```
...
s
Echo (1): s
java
Echo (1): java 
```

在预期的输出中，您无需重新输入`enter`即可从服务器获取响应。

服务器的输出已经按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:43:54.530

您会感到困惑，因为您在客户端首次连接时发送“Hello！press BYE to exit”，但客户端实际上并没有专门阅读这一行。因此，当您期望读取您发送的回显消息时，您正在客户端读取它，因此您的客户端总是在您认为它取决于的地方读取一个回显。

解决方案：要么从服务器中删除“Hello！press BYE to exit”，要么在你第一次连接客户端时阅读它，然后再进入循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:39:38.707

在我看来，您向 Actor 发送了一个“”，所以他只返回“Echo (1):”+“”。如果我计算输入，我看到的“s”与“Echo (1): s”一样多。

# c# - 在 KeyPress 事件中将设置处理为 true 后返回是多余的吗？

> ID：10441006
> 
> 赞同：0
> 
> 时间：2012-05-04T00:04:49.707
> 
> 标签：c#, winforms, keypress

下面的代码中是否需要“返回”：

```
if (((e.KeyChar == '1') && (String.IsNullOrWhiteSpace(textBoxPterodactylNum1.Text))) ||
    ((e.KeyChar == '2') && (String.IsNullOrWhiteSpace(textBoxPterodactylNum2.Text))) ||
    ((e.KeyChar == '3') && (String.IsNullOrWhiteSpace(textBoxPterodactylNum3.Text)))) {
    e.Handled = true;
    MessageBox.Show(String.Format(
        "There is no corresponding value for {0} in the pterodactyl TextBox above", e.KeyChar));
    return;
}
. . .
// other code follows if gauntlet above is passed through safely; don't want to continue if it didn't, though (if handled was set to true) 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T00:11:28.130

该`Handled`属性不会停止在其轨道中执行事件，它只是告诉冒泡事件您已经处理了它并且不再需要处理其他任何东西。因此，您下面的代码`e.Handled = true`可能会将其反转为错误状态，这将允许冒泡事件继续处理事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T00:08:33.860

它本质上不是多余的。您尚未显示以下代码，但该代码可能会设置`e.Handled = false`.

# c# - 为asp.net nunit 测试httpcontext 对象的正确方法

> ID：10441007
> 
> 赞同：1
> 
> 时间：2012-05-04T00:04:58.363
> 
> 标签：c#, asp.net, tdd, nunit, moq

[通过遵循hanselman](http://www.hanselman.com/blog/ASPNETMVCSessionAtMix08TDDAndMvcMockHelpers.aspx)文章并使用 FakeHttpContext，我已经能够成功地使用上下文对象对我的 asp.net 相关方法进行单元测试。

有人告诉我，如下构造 FakeHttpContext 并在 FakeHttpContext 中设置 QueryString、服务器变量如下所示**并不是对 asp.net 上下文对象的真正**测试。正如 hanselman 文章中所提供的，这种方法和这种测试对我来说效果很好。

```
 public static HttpContextBase FakeHttpContext()
    {
        var context = new Mock<HttpContextBase>();
        var request = new Mock<HttpRequestBase>();
        var response = new Mock<HttpResponseBase>();
        var session = new Mock<HttpSessionStateBase>();
        var server = new Mock<HttpServerUtilityBase>();

        request.Setup(x => x.QueryString).Returns(new NameValueCollection
                {
                    {"blah","7"}, 
                    {"blah1","8"}
                });

        request.Setup(x => x.ServerVariables).Returns(new NameValueCollection
                {
                    {"SERVER_NAME","myserver"}, {"SCRIPT_NAME","myperfectscript"}, 
                    {"SERVER_PORT","80"}, {"HTTPS","www.microsoft.com"}
                });

        request.Setup(x => x.Form).Returns(new NameValueCollection
                {
                    {"TextBox1", "hello"},
                    {"Button1", "world"},
                    {"Label1", "yournamehere"}
                });

        request.Setup(x => x.Cookies).Returns(new HttpCookieCollection());

        HttpCookie cookie1 = new HttpCookie("userInfo");
        cookie1["username"] = "Tom";
        cookie1["password"] = "pass";

        request.Object.Cookies.Add(cookie1);

        HttpCookie cookie2 = new HttpCookie("compInfo");
        cookie2["companyname"] = "google";
        cookie2["companypassword"] = "googlepassword111";

        request.Object.Cookies.Add(cookie2);

        context.Setup(ctx => ctx.Request).Returns(request.Object);
        context.Setup(ctx => ctx.Response).Returns(response.Object);
        context.Setup(ctx => ctx.Session).Returns(session.Object);
        context.Setup(ctx => ctx.Server).Returns(server.Object);

        return context.Object;
    } 
```

我被告知通过 fiddler 捕获文件中所有响应/请求级别参数的所有页面详细信息，将文件读入测试对象，从保存的文件中读取页面级别参数（例如查询字符串），然后对其进行测试。

这种使用文件/提琴手的方法对我来说没有意义。这只是编写大量代码来读取和正则表达式文件的额外练习。

你是否同意我的观点？在这种情况下你做了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:59:23.047

我通常会将访问任何资源（如文件、数据库、流等）的测试声明为集成测试而不是单元测试。如果您将这些测试作为更大的持续集成环境的一部分运行，这些测试很容易失败，并且您会因为文件被锁定而获得红色构建......

# vb.net - 在 BindingNavigator 中禁用 PositionItem

> ID：10441008
> 
> 赞同：0
> 
> 时间：2012-05-04T00:04:59.987
> 
> 标签：vb.net, winforms

我通过使用禁用了 PositionItem 框

```
BindingNavigatorPositionItem.Enabled = False 
```

但是每次我单击下一行时，它都会再次启用。

我什至试图通过添加来强制禁用它

```
 Private Sub BindingNavigatorMoveNextItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BindingNavigatorMoveNextItem.Click
    BindingNavigatorPositionItem.Enabled = False
 End Sub 
```

我如何控制它是否启用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:49:01.260

参考：[MSDN - 禁用绑定导航器](http://social.msdn.microsoft.com/forums/en-US/vbgeneral/thread/b7701c49-801e-4940-bfeb-a2e6d17d2b05)

BindingNavigator 按钮的 Click 事件已被默认封装为基于 BindingNavigatorPosition 设置其他按钮的 Enable 属性，因此您可以设置`Me.BindingNavigator1.PositionItem.Available = False`或`BindingNavigatorPositionItem.Visible = False`。

您可以将事件的功能覆盖为：

```
Private Sub BindingNavigatorAddNewItem_Click(ByVal sender As Object, ByVal e As EventArgs) Handles BindingNavigatorAddNewItem.Click  
  BindingNavigator1.BeginInvoke(New MethodInvoker(AddressOf DisableItems))  
End Sub 

Private Sub DisableItems()  
  BindingNavigatorMoveFirstItem.Enabled = False 
  BindingNavigatorDeleteItem.Enabled = False 
  BindingNavigatorAddNewItem.Enabled = False 
  BindingNavigatorMoveLastItem.Enabled = False 
  BindingNavigatorMoveNextItem.Enabled = False 
  BindingNavigatorMovePreviousItem.Enabled = False 
  BindingNavigatorPositionItem.Enabled = False 
End Sub` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-19T07:46:04.833

您可以将`BindingNavigatorPositionItem.Enabled = False`语句放在**BindingNavigatorPositionItem的****CotFocus 事件处理程序**中， 如下所示：

 **```
Private Sub BindingNavigatorPositionItem_GotFocus(ByVal sender As Object,
                                                  ByVal e As System.EventArgs) Handles BindingNavigatorPositionItem.GotFocus
    BindingNavigatorPositionItem.Enabled = False
End Sub 
```**

# ruby-on-rails - 检查日期时间字段是否大于当天的特定小时

> ID：10441015
> 
> 赞同：0
> 
> 时间：2012-05-04T00:05:52.240
> 
> 标签：ruby-on-rails

导轨 2.3.5 / Ruby 1.8.7

对于日期时间记录字段，是否有一种 Time 方法可以在一行中说“如果这个时间是 > 早上 5 点”？

像：

```
<td>
 <% if my_data.updated_at > 5am this morning %>
   Valid
 <% else %>
  Expired
 <% end %>
</td> 
```

我想否则它会存储 now()，将它的“小时”属性更改为“05”，然后将日期时间字段与之进行比较？

谢谢 - 由于某种原因，与 Times 合作仍然让我感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:38:26.530

```
<td style="text-align:center;">
  <% if my_data.last_status_update.blank? %>
       &nbsp; - &nbsp;
  <% else %>
      <%=h my_data.last_status_update.strftime("%m-%d-%Y @ %H:%M CST") %>
  <% end %>
</td>
   <%
      if !my_data.last_status_update.blank? && my_data.last_status_update.year == Time.now.year &&
      my_data.last_status_update.day == Time.now.day && my_data.last_status_update.hour >= 5
   %>
       <td style="text-align:center;background:#90ee90">
         YES
       </td>
  <% else %>
        <td style="text-align:center;background:#ff9999">
         EXPIRED!
       </td>
  <% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:24:23.597

我从来没有玩过这个`Time`方法，但我想你可以检查 rails API：[http](http://corelib.rubyonrails.org/classes/Time.html) ://corelib.rubyonrails.org/classes/Time.html 。

你可以玩`Time.at`。

# php - 如何使用列表创建新列

> ID：10441019
> 
> 赞同：-1
> 
> 时间：2012-05-04T00:06:30.547
> 
> 标签：php, list, html-lists

这应该是一个非常简单的，但只是不能让它工作。我有一个数据库，可以说 20 个项目。我正在使用 php 来回显每个项目。我的代码是：

```
echo "<li> <a class='bodylinks' href='http://domain.co.uk/fish/$txt2/'>$txt</a> </li>"; 
```

我的问题是我的页面只有 14 个项目的高度，但是我有备用宽度。当另一列的高度达到最大值时，如何让它向右移动以创建一个新列？希望这是有道理的。

目前它只显示到第 14 项，然后因为我`overflow:hidden`在包含 DIV 上它切断了其余部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T00:14:36.440

你可以使用花车

试试这个，它会从 ltr （默认方向）水平打印出你的列表项，然后垂直下降到下一行。

```
<li style="display:inline;"> contents </li> 
```

或者，使您的循环计数 14 行，然后在第 14 行，关闭您的 UL/OL 标记并创建一个新标记，如下所示：

```
<ul style="display:block; float:left;">
<?php
for($i = 0; $i = count($results); $i++) {
    $txt = $results['txt']; // or however you do
    $txt2 = $results['txt2']; // or however you do
    if($i > 0 && $i % 14 == 0) echo '</ul><ul style="display:block; float:left;">';
    echo "<li> <a class='bodylinks' href='http://domain.co.uk/fish/$txt2/'>$txt</a> </li>";
?>
</ul> 
```

# html - 检测我在 UIWebView 中单击的元素

> ID：10441020
> 
> 赞同：5
> 
> 时间：2012-05-04T00:06:34.990
> 
> 标签：html, ios, iphone, ipad

如何检测我在 UIWebView 中单击的元素。我有简单的 html，但我想要不同的元素，所以我想从我单击的元素中获取例如“alt”。

分：

1.  用户单击 WebView 中加载的图像之一。
2.  它调用具有有关单击元素的信息的函数。

可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T00:12:25.633

您应该在 webview 和 Objective-C 之间添加一些绑定。您可以使用 javascript 执行此操作。

您几乎将 javascript 注入到 webview 中，因此当某些 HTML 元素被触摸时您会收到一个事件。然后您的 javascript 将与 Objective C 通信，以触发一些操作。

这种技术在这里描述得很好：http: [//blog.techno-barje.fr/post/2010/10/06/UIWebView-secrets-part3-How-to-properly-call-ObjectiveC-from-Javascript/](http://blog.techno-barje.fr/post/2010/10/06/UIWebView-secrets-part3-How-to-properly-call-ObjectiveC-from-Javascript/)

# php - 为什么我的网站在 FF 中可以完美运行，但在 Chrome/IE 中却不行？

> ID：10441021
> 
> 赞同：-6
> 
> 时间：2012-05-04T00:06:42.890
> 
> 标签：php, jquery, html, css

所以是的，我完全不知道，我已经比较了 DiffNow 中的不同文件。

我真的不知道任何代码可以给你，因为我不知道去哪里找了。它内置在 php/html/mysql/jquery 中。

主要问题是： -动画在 Chrome 和 IE 中工作得非常糟糕（在实时服务器上。在测试服务器上，一切都完美无缺）。- 订购在 Chrome 和 IE 中不起作用（在确认您的表单后，您应该能够进行付款） - 在实时服务器上的 Chrome 和 IE 中，字体发生了奇怪的变化。

我感谢你们的任何帮助，谢谢！

编辑：

```
Line 1, Column 2: Element head is missing a required instance of child element title.

Line 2, Column 15: Stray doctype.
<!DOCTYPE html>

Line 4, Column 43: Stray end tag html.
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

我想这些都非常关键。对如何解决这些问题有任何想法吗？

如果我给你可怕的解释，我很抱歉，但我想也许你知道这样的愚蠢错误的典型解决方案。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T00:31:01.893

由于到目前为止您还没有向我们展示任何 HTML，我只是在猜测，但这里的错误消息：

```
Line 1, Column 2: Element head is missing a required instance of child element title.

Line 2, Column 15: Stray doctype.
<!DOCTYPE html>

Line 4, Column 43: Stray end tag html.
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

强烈建议您的 HTML 输出看起来像这样：

```
 <head>
              <!DOCTYPE html>

                                           <html xmlns="http://www.w3.org/1999/xhtml"> 
```

如果您想要[HTML 5](http://www.w3.org/TR/html5-diff/#doctype)，我建议您重新编写前几行，使其看起来更像这样：

```
<!DOCTYPE html>
<html>
<head>
<title>...</title>
... 
```

有关更多选项，请参阅[w3.org 技术报告](http://www.w3.org/TR/html5-diff/#syntax)。

# ruby-on-rails - 验证时的奇怪行为：has_many 与 mongoid 的关系

> ID：10441029
> 
> 赞同：0
> 
> 时间：2012-05-04T00:08:16.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

我有这样的方法

```
 def create
    @evento = Evento.find(params[:evento_id])
    @acampante = @evento.acampantes.create(params[:acampante])
    if not @acampante.senha.eql?(@acampante.conf_senha) 
      flash[:error] = "Passwd didn't match."
      return redirect_to evento_path(@evento)
    end

    respond_to do |format|
      if @acampante.save
        format.html { redirect_to root_path, notice: 'Inscricao realizada com sucesso' }
        format.json { render json: root_path, status: :created, location: root_path }
      else
        format.html { redirect_to @evento, alert: 'Ocorreu um erro. Verifique os dados' }
        format.json { render json: @acampante.errors, status: :unprocessable_entity }
      end
    end
  end 
```

即使密码不匹配，`@acampante`也会保存。
但如果我这样做：

```
 if not @acampante.senha.eql?(@acampante.conf_senha) 
      flash[:error] = "As senhas nao conferem."
      @acampante.delete #the trick
      return redirect_to evento_path(@evento)
    end 
```

一切都按预期工作。
所以，正如我所看到的，`create`方法 from`@evento.acampantes.create`已经`acampante`在我的数据库上创建了。
这是预期的行为吗？难道我做错了什么？
在此先感谢，对我的英语感到抱歉

# java - java中的3D绘图。Java3D 或 Jmonkey

> ID：10441034
> 
> 赞同：5
> 
> 时间：2012-05-04T00:09:05.710
> 
> 标签：java, javascript, swing, data-visualization, jmonkeyengine

我想在 Java 中绘制一个 3D 点云（比如 100000 个点），能够拖动和旋转它并选择一个绘制的 3D 点并通过单击它来获取它的 x、y、z。我担心对 java3D 的持续支持，同时我看到 java3D 仍然是一个更大的社区，并且比 jme3 的稳定版本 JMonkey3 更活跃。我也想将它部署为小程序。

我应该选择什么技术？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T00:46:07.703

Java3D 并不是真正为巨大的点云设计的。它是为托管场景图设计的，而对于大点云，您通常希望执行一些非常直接的 OpenGL 调用。

你最好使用[jMonkeyEngine](http://jmonkeyengine.com/)（它有自己的点云/粒子效果子系统）或[LWJGL](http://www.lwjgl.org/)（这是 jMonkeyEngine 在引擎盖下使用的，会给你低级 OpenGL 访问）

以上所有内容都可以在 applet 中使用（用户可能必须批准解除 Applet 安全限制以允许本地 OpenGL 访问），尽管如果您尝试做更复杂的事情，我会推荐 WebStart 作为替代方案。

# windows - Cygwin：直接在 dos 批处理文件中运行 bash 脚本不起作用

> ID：10441035
> 
> 赞同：2
> 
> 时间：2012-05-04T00:09:23.947
> 
> 标签：windows, batch-file, cygwin

我在网上搜索过，仍然无法弄清楚。如果这听起来像是一种懒惰的哀求求助，我深表歉意——我真的对此无能为力。

我有一个 bash 脚本位于： `/cygdrive/k/Linux Scripts/Scripts/filter.sh`

我已将其复制`Cygwin.bat`到`filter.bat`，并将其更改如下：

```
@echo off
L:
chdir L:\Cygwin\bin
bash --login "/cygdrive/k/Linux Scripts/Scripts/filter.sh amc.txt bmo.txt" 
```

当我`filter.bat`在 Windows 资源管理器中双击它运行时，控制台会瞬间打开然后关闭。该脚本没问题，因为它是从 Cygwin 控制台中的命令行运行的。

有没有办法调试这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T00:21:48.090

尝试从已经存在的命令提示符窗口运行批处理文件，这样您就可以看到 bash 可能发送的任何错误消息。我猜它与“/cygdrive/k/Linux Scripts/Scripts/filter.sh amc.txt bmo.txt”有问题——就它而言，这是一个参数而不是三个参数。因此我会将其更改为

```
bash --login "/cygdrive/k/Linux Scripts/Scripts/filter.sh" amc.txt bmo.txt 
```

# javascript - Google maps API v3 地点搜索 - 将另一个参数传递给回调函数

> ID：10441038
> 
> 赞同：10
> 
> 时间：2012-05-04T00:09:55.583
> 
> 标签：javascript, google-maps-api-3, callback

我正在使用 Google Maps Places API v3 返回许多“类型”的地点，每个地点都由地图上的不同标记表示。

我创建了一个 google.maps.places.PlacesService 对象，然后为每个地点类型调用一次“搜索”方法。每次，我都使用不同的回调函数（“搜索”的第二个参数），因为我需要为每种类型选择不同的 MarkerImage。

```
var address = "97-99 Bathurst Street, Sydney, 2000";
geocoder.geocode({ 'address': address }, function (results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
        var location = results[0].geometry.location;

        map.setCenter(location);

        var marker = new google.maps.Marker({
            map: map,
            position: location
        });

        infowindow = new google.maps.InfoWindow();
        var service = new google.maps.places.PlacesService(map);

        // banks
        var req_bank = { location: location, radius: 500, types: ['bank'] };
        service.search(req_bank, banks);

        // bars
        var req_bar = { location: location, radius: 500, types: ['bar'] };
        service.search(req_bar, bars);

        // car parks
        var req_parking = { location: location, radius: 500, types: ['parking'] };
        service.search(req_parking, carparks);

    } else {
        alert("Geocode was not successful for the following reason: " + status);
    }
}); 
```

以下是回调函数，它们仅与 MarkerImage 不同：

```
function banks(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
        for (var i = 0; i < results.length; i++) {
            createMarker(results[i], new google.maps.MarkerImage("/images/bank.png", null, null));
        }
    }
}
function bars(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
        for (var i = 0; i < results.length; i++) {
            createMarker(results[i], new google.maps.MarkerImage("/images/bar.png", null, null));
        }
    }
}
function carparks(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
        for (var i = 0; i < results.length; i++) {
            createMarker(results[i], new google.maps.MarkerImage("/images/parking.png", null, null));
        }
    }
} 
```

此代码 100% 有效，但我想避免为每种不同的地点类型重复回调（大约有 10 个）。**有什么方法可以将标记 URL 传递给回调函数？**然后我只需要一个回调......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T01:00:39.637

以下情况如何：

```
service.search(req_bank, function (results, status) {
  locations(results, status, "bank");
});

function locations(results, status, type) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    // check the type to determine the marker, or pass a url to the marker icon
  }
} 
```

# java - 与 Jackson 和 Jax-rs 一起使用时如何关闭实体管理器

> ID：10441039
> 
> 赞同：2
> 
> 时间：2012-05-04T00:10:29.913
> 
> 标签：java, jakarta-ee, jpa, jax-rs, jackson

我正在使用 JPA (hibernate)、JAX-RS (Jersey) 和 Jackson。

构建并发送数据包后，如何关闭实体管理器？

以下不起作用并给我一个错误。它似乎在响应完成之前调用 em.close() 。

```
@GET
@Produces(MediaType.APPLICATION_JSON)
public Response getNode( @QueryParam("nodeId") long nodeId ){ 
try {
    Node node = em.find(Node.class, nodeId);        
    if (node == null) throw new WebApplicationException(Response.Status.NOT_FOUND);
    Response response = Response.ok(node, MediaType.APPLICATION_JSON).build(); 
    return response; 
 } 
finally { em.close(); }
} 
```

> 严重：servlet [JAX-RS Servlet] 的 Servlet.service() 在路径 [] 的上下文中抛出异常 org.codehaus.jackson.map.JsonMappingException：未能延迟初始化角色集合：com.company.entity.Node。 childList，没有会话或会话被关闭（通过引用链：com.company.entity.Node["childIdList"]）

我正在其他类似方法中使用事务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:42:35.783

解决方案是创建一个过滤器——它将在为您管理事务的 jaxb servlet 之前运行。网上有几个这样的例子。

该模式称为“在视图中打开会话”。在堆栈溢出中，您可以尝试[过滤器不初始化 EntityManager](https://stackoverflow.com/questions/7934447/filter-do-not-initialize-entitymanager)并在其他地方查看...

[http://www.naildrivevin5.com/daveblog5000/?p=39](http://www.naildrivin5.com/daveblog5000/?p=39)

[http://chstath.blogspot.com/2007/11/extending-transaction-boundaries-beyond.html](http://chstath.blogspot.com/2007/11/extending-transaction-boundaries-beyond.html)

但是您也可以尝试在 google 或 stack over flow 上搜索以获得更多帮助。

# iphone - iOS故事板segue推送不起作用

> ID：10441041
> 
> 赞同：1
> 
> 时间：2012-05-04T00:10:55.833
> 
> 标签：iphone, ios, xcode, storyboard

我在 Xcode 的故事板中使用 push 时遇到了一个小问题。它非常简单：即使是最简单的情况，我也无法让它工作。

设置：[http ://d.pr/i/ahCG](http://d.pr/i/ahCG)

这基本上只是一个 1-view 项目，添加了另一个视图控制器，将其嵌入到导航控制器中并进行 segue 并将模式设置为“push”。当我按下测试按钮时，绝对没有任何反应。但是，如果我使用模态进行转场，则效果很好。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T00:18:57.387

您需要将源视图（而不是目标视图）嵌入到导航控制器中以执行推送转场。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-28T18:36:57.507

您需要将模式设置为“模态”而不是“推”。

# java - 在命令行上执行命令并在 Java 中读取控制台输出

> ID：10441047
> 
> 赞同：1
> 
> 时间：2012-05-04T00:11:41.403
> 
> 标签：java, command-line, process

我需要使用 Java 程序获取服务器的 hostId。Java API 中是否有内置的东西可以帮助我做到这一点？

```
lab.com$ hostid
f9y7777j -> How can I get this using java 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:30:03.353

试试下面的代码：

`System.out.println(java.net.InetAddress.getLocalHost().getHostName());`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T00:16:07.660

以下将允许您运行控制台命令并存储结果：-

```
 ProcessBuilder pb = new ProcessBuilder("hostid");
 Process p = pb.start();
 BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));
 String line = null;
 while ((line = reader.readLine()) != null)
 {
    // Store returned string here.
 }
 reader.close(); 
```

# c++ - 在卸载 DLL 期间删除静态对象时退出线程导致死锁？

> ID：10441048
> 
> 赞同：6
> 
> 时间：2012-05-04T00:11:42.820
> 
> 标签：c++, windows, multithreading, deadlock

我的延迟加载 DLL 中有一个实例（全局/静态对象）ClassA。这个对象里面有一个“观察者”线程，它是执行正常关闭所必需的。当我调用 FreeLibrary 时，我注意到在删除此静态对象期间，我的线程请求关闭，但挂在 _endthreadex() 上并导致死锁。我是显式还是隐式调用 _endthreadex 都没有关系。对象是全局的还是静态的都没关系——结果相同。该线程包裹在 ClassB 中（由带有自定义消息循环的模板实现）。有一个关闭线程的请求（发布消息）并跟随 WaitForSingleObject，它永远不会为给定的线程句柄返回。

代码中随处使用的相同“模板线程类”和关闭效果很好。删除静态 obj 时的唯一问题。我认为 _endthreadex() 内部有一些锁，它在 dll 卸载和删除静态对象时已经被锁定。

线程以 _beginthreadex 开头。附言。当我在 App 内实例化相同的静态 obj 时 - 应用程序关闭时没有任何重大问题。

任何想法为什么 _endtreadex 会导致死锁？如何避免？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T02:28:06.740

这种特殊情况很容易解释。_endthreadex 调用需要加载程序锁，以便它可以使用 DLL_THREAD_DETACH 调用 DllMain。但是，调用 FreeLibrary 的线程已经持有加载程序锁，因为您已经在使用 DLL_PROCESS_DETACH 调用 DllMain。

另一种可能中断的方式是，如果进程在没有显式卸载库的情况下退出，您的观察者线程将在调用 DLL_PROCESS_DETACH*之前*终止，因此当您尝试发出退出信号时，它不会响应，因为它没有运行不再。

最好的方法可能是创建显式 InitializeLibrary() 和 UninitializeLibrary() 函数供用户调用。

# java - 获取列表中的最新对象

> ID：10441049
> 
> 赞同：-4
> 
> 时间：2012-05-04T00:11:43.600
> 
> 标签：java, list

如何获取列表中最新的对象？我努力了

```
int i = 5;
while(i > 0) {
    Object o = list.get(list.size() - i);
    i--;
} 
```

但无济于事，我可能做错了，但如果我做错了，我不知道如何解决我的错误：/（问题是它仍然给了我整个列表）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T00:19:32.993

您可以反转列表然后对其进行迭代：

```
// Your original list
List<Object> list = new ArrayList<Object>(); // Populated elsewhere

// Make a copy, so you don't corrupt the original list
List<Object> reverseList = new ArrayList<Object>(list);
// Reverse the order of its elements
Collections.reverse(reverseList);
// Now iteration will be in "latest added first" order - ie LIFO
for (Object o : reverseList) {
    // Do something with o
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:23:27.420

我认为您希望您的代码更改原始列表，但这是一个错误的假设，因为代码只是获取列表持有的对象并且不会删除它。然后你丢弃 o 持有的对象，所以没有办法测试你的方法是否有效。为了解决这个问题，你必须保存你的方法产生的东西来测试它是否有效。

```
int i = 5;
List savedJunk = new ArrayList();
while(i > 0) {
    Object o = list.get(list.size() - i);
    savedJunk.add(o);
    i--;
}

for (Object foo : savedJunk) {
   System.out.println(foo);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T00:48:24.993

这是一个很好的问题，你几乎有正确的答案。中心思想是列表中的项目按照您添加它们的顺序出现，因此要获取最新的项目，您需要反向浏览列表。这是使用 for 循环执行此操作的一种方法。

```
ArrayList<String> myList = new ArrayList<String>();
myList.add("one");
myList.add("two");
myList.add("three");
myList.add("four");
for (int index = myList.size() - 1; index >= 0 ; index--) {
   System.out.println(myList.get(index));
} 
```

上述代码的输出是：

```
four
three
two
one 
```

# hadoop - 如何在 Ubuntu 10.4 上配置和运行 Hadoop 管道

> ID：10441052
> 
> 赞同：0
> 
> 时间：2012-05-04T00:11:54.593
> 
> 标签：hadoop

我是 Linux Hadoop 的新手。我正在寻找指导以使 Hadoop 启动并运行以编写 C++ 任务。我尝试使用教程以伪分布式模式安装 Hadoop：

[http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)

它适用于 Java，但在运行 c++ wordcount 示例时出现此错误：

```
12/05/03 18:23:00 WARN mapred.JobClient: No job jar file set.  User classes may not be found. See JobConf(Class) or JobConf#setJar(String).
Exception in thread "main" org.apache.hadoop.mapred.InvalidInputException: Input path does not exist: hdfs://localhost/user/c1048267/books
    at org.apache.hadoop.mapred.FileInputFormat.listStatus(FileInputFormat.java:190)
    at org.apache.hadoop.mapred.FileInputFormat.getSplits(FileInputFormat.java:201)
    at org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:810)
    at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:781)
    at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:730)
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1249)
    at org.apache.hadoop.mapred.pipes.Submitter.runJob(Submitter.java:248)
    at org.apache.hadoop.mapred.pipes.Submitter.run(Submitter.java:479)
    at org.apache.hadoop.mapred.pipes.Submitter.main(Submitter.java:494) 
```

如果有特定的软件、硬件或配置要求，也请指导我。目前我使用的是 Ubuntu 10.4 64 位、Hadoop-0.20.2 和 Java_Sun_6。这个平台是否支持 Hadoop 管道？如果没有，请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T02:16:59.727

首先，您需要配置您的 HADOOP_CLASSPATH 以包含与管道相关的所有库，然后编译它们，为其创建一个 MAKEFILE：

```
CC = g++
HADOOP_INSTALL = /home/hadoop/hadoop
PLATFORM = Linux-i386-32
CPPFLAGS = -m32 -I$(HADOOP_INSTALL)/c++/$(PLATFORM)/include

wordcount: wordcount.cpp
$(CC) $(CPPFLAGS) $< -Wall -L$(HADOOP_INSTALL)/c++/$(PLATFORM)/lib -lhadooppipes \
-lhadooputils -lpthread -g -O2 -o $@ 
```

您需要在集群**libssl**和**g++**的每台机器上执行此操作。要编译并运行 wordcount 示例，您可以运行：

```
make  wordcount 
```

然后，您必须在**HDFS**中复制 /bin 目录的输出二进制文件：

```
hadoop dfs -mkdir bin                    
hadoop dfs -put  wordcount   bin/wordcount 
```

运行程序：

```
hadoop pipes -D hadoop.pipes.java.recordreader=true  \ 
               -D hadoop.pipes.java.recordwriter=true \
               -input dft1  -output dft1-out  \
               -program bin/wordcount 
```

我看到的第二件事是这样的：

```
See JobConf(Class) or JobConf#setJar(String). Exception in thread "main"    org.apache.hadoop.mapred.InvalidInputException: **Input path does not exist: hdfs://localhost/user/c1048267/books** at 
```

你确定你在 HDFS 中有那个目录吗？最好的祝愿

有关完整的指南，请参阅此[链接](http://cs.smith.edu/dftwiki/index.php/Hadoop_Tutorial_2.2_--_Running_C++_Programs_on_Hadoop)

# objective-c - Objective-C 静态内联 NSString 数组

> ID：10441053
> 
> 赞同：9
> 
> 时间：2012-05-04T00:11:55.117
> 
> 标签：objective-c, inline, init, static-array

嗨 :) 我正在尝试创建 NSStrings 的静态 C 数组。

这是我尝试过的：

```
static NSString** polygonNames = {@"Radical Isotope", @"Point", @"Line", @"Triangle", @"Square", @"Pentagon", @"Hextagon", @"Heptagon", @"Octagon", @"Nonagon", @"Decagon", @"Hendecagon", @"Dodecagon",  @"Tridecagon",  @"Tetradecagon",  @"Pentadecagon",  @"Hexadecagon",  @"Heptadecagon", @"Octadecagon", @"Enneadecagon"}; 
```

没有编译器错误，但我收到 41 个警告，所有这些都是以下三个之一：

```
"warning: initialization from incompatible pointer type"
"warning: excess elements in scalar initializer"
"warning: (near initialization for 'polygonNames')" 
```

这让我相信当我使用这个类时，我会遇到大量的 sigbarts 或其他一些内存访问错误......

初始化 NSStrings 的静态数组的正确方法是什么（最好是内联的，我想使用 C 数组，而不是 NSArrays）？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-04T00:13:24.610

试试这个：

```
static NSString *polygonNames[] = { @"Radical Isotope", @"Point", @"Line", /* etc */ }; 
```

# cocoa - NSWindow - 隐藏时停用 - isVisible

> ID：10441060
> 
> 赞同：3
> 
> 时间：2012-05-04T00:12:36.273
> 
> 标签：cocoa, hide, nswindow, visible

我有一个将“停用时隐藏”设置为 TRUE 的 NSWindow。

当我的应用程序失去焦点时，窗口会消失，但是，通过“isVisible”测试会得到 TRUE。到底是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T00:01:52.627

`isVisible == YES`意味着您的窗口仍然出现在屏幕上或小型化到 Dock。

好吧，我以前从未使用过此选项...但是，如果您真的想在应用程序失去焦点时隐藏窗口，请实现`-applicationDidResignActive:`方法`NSApplicationDelegate`并调用`-orderOut:`您的窗口。

这会给你一个稳定的结果。

# ruby-on-rails - 如何为 Rails SimpleForm 选择框设置默认选择值

> ID：10441061
> 
> 赞同：38
> 
> 时间：2012-05-04T00:12:42.077
> 
> 标签：ruby-on-rails, simple-form

我试图弄清楚如何设置[SimpleForm](https://github.com/plataformatec/simple_form)生成的选择框的选定选项。我的代码大致如下：

```
<%= simple_form_for(@user) do |f| %>
  <%= f.association :store, default: 1 %> 
```

当然，这`default: 1`部分不起作用。

TIA

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-04T08:46:43.803

使用以下内容：

```
selected: 1 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-10T00:55:23.720

您现在可以使用以下内容：

```
<%= f.association :store, selected: 1 %> 
```

# xml - XML 语法错误？

> ID：10441062
> 
> 赞同：-1
> 
> 时间：2012-05-04T00:13:07.920
> 
> 标签：xml

```
<?xml version="1.0" encoding="UTF-8"?>
    <definition assembly="Service" version="1.0">
        <structure name="Request">
            <member name="notificationEvent" target="NotificationEvent"/>
         </structure>
    </definition> 
```

我得到一个异常说“不允许匹配“[xX][mM][lL]”的处理指令目标。

没有说哪一行，也没有给出更多信息。任何想法发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T00:40:01.873

我验证了 XML，并且没有语法错误。

我怀疑是解析器不处理自闭标签。您可以尝试通过使用结束标签来规避此缺陷：

```
<member name="notificationEvent" target="NotificationEvent"></member> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:01:27.843

如果您使用的是国产解析器，则必须强烈怀疑这是解析器中的错误；您可以通过测试 XML 是否被主流解析器（如 Apache Xerces）接受来轻松确定这一点。

如果它不是解析器中的错误，那么几乎可以肯定它是 XML 声明之前的空白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T23:34:20.520

“不允许与“[xX][mM][lL]”匹配的处理指令目标。”

这听起来像是您正在使用的解析器/验证器，它被视为`xml`“处理指令”（无论您的工具中有什么......）

我认为这是导致问题的第一行。即使根据 XML 标准它应该存在，但如果没有它，请尝试一次。

```
<definition assembly="Service" version="1.0">
    <structure name="Request">
       <member name="notificationEvent" target="NotificationEvent"/>
    </structure>
</definition> 
```

**请注意，如果这确实有效，则该工具有问题**

您是否使用此工具检查过任何其他实际有效的 XML 文件？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T00:16:30.793

`<?xml`它是文件开头之前的额外空间吗？

# windows-phone-7 - Windows Phone 7 上的 VLC 实时视频流

> ID：10441071
> 
> 赞同：0
> 
> 时间：2012-05-04T00:14:28.843
> 
> 标签：windows-phone-7, video-streaming, vlc, windows-phone, live-video

我正在使用[VLC](http://www.videolan.org/vlc/index.html)从我的网络摄像头实时流式传输视频，我执行以下操作：文件 > 流 > 捕获设备 > 本地显示 > http > 激活转码 > WMV+WMA(ASF) > 添加 HTTP、端口 8080、目标 /go.wmv

所以我的流媒体的链接是这样的：`http://localhost:8080/go.wmv` 我测试了它，它在另一个 VLC 实例中工作。

现在在 Windows Phone 7 中，我只需拖放媒体元素，创建 3 个按钮 第一个按钮： `mediaElement1.Source=new URI(http://localhost:8080/go.wmv);` 第二个按钮： `mediaElement1.Play();` 第三个按钮： `mediaElement1.Stop();`

`mediaElement`应该支持这个。为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:32:32.827

`localhost`从你的手机，嗯，你的手机。您需要指定托管要连接的网络摄像头的 PC 的名称。如果它们不在同一网络上，则需要指定主机的完全限定域名。

# php - 使用 mod_rewrite 和 htaccess 重定向到 url 的子域？

> ID：10441073
> 
> 赞同：2
> 
> 时间：2012-05-04T00:14:33.760
> 
> 标签：php, html, .htaccess, mod-rewrite

我有一个当前重定向的 mod 重写

> domain.com/文件夹/用户

到

> domain.com/folder.php?username=user

使用：

> RewriteRule ^folder/(.+)$ folder.php?username=$1 [QSA,L]

但是，我需要做的是将[http://user.domain.com/](http://user.domain.com/)重定向到[http://www.domain.com/folder.php?username=user](http://www.domain.com/folder.php?username=user)。如果可能的话，我可以排除某些子域（如 www.mail.等）。

我该怎么做？任何帮助是极大的赞赏 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:22:27.783

这个怎么运作：

*   提取`user`并`http://user.domain.com/`保存对它的反向引用[`RewriteCondition`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)。
*   请求的主机名存储在**Server-Variable**中。

    > ![在此处输入图像描述](../Images/c4833742e2e837bba7e54f41dcfb2955.png) 图片 : 通过规则的反向引用流。在此示例中，请求`/test/1234`将转换为`/admin.foo?page=test&id=1234&host=admin.example.com`. [来源](http://httpd.apache.org/docs/current/rewrite/intro.html)

*   在[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)使用`RewriteCondition`' 的反向引用。

*   另请参阅本`RewriteRule`节中的注释：

    > 如果您希望匹配主机名、端口或查询字符串，请分别使用带有 %{HTTP_HOST}、%{SERVER_PORT} 或 %{QUERY_STRING} 变量的 RewriteCond。

*   配置您的（虚拟）服务器以侦听您要在其中重写的所有域，以确保所有请求都传递到服务器的同一部分/根目录中，您可以在其中进行重写。否则，您需要在内部进行代理。

# json - 在 RestKit 之前拦截 JSON

> ID：10441077
> 
> 赞同：1
> 
> 时间：2012-05-04T00:14:59.433
> 
> 标签：json, restkit

我工作的公司正在考虑使用 RestKit。但是，出于安全原因，我们的服务器返回的 JSON 是被包围的字符。这是一种痛苦。在另一个不使用 RestKit 且仅很少使用 JSON 的 iPhone 应用程序中，我解析从服务器返回的字符串，删除 JSON 字符串前后的字符。解析字符串后，我在字符串上调用 JSONValue（我们使用的是 SBJSON）并获得一个 NSDictionary。

我听说 RestKit 具有可插拔的架构。如果是这种情况，在某个地方我可以在 RestKit 进行解析之前拦截从服务器返回的字符串吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:11:40.720

我想找到一个不需要我以任何方式更改 RestKit 代码库的修复程序，我找到了它。答案是创建和注册我自己的解析器。

解析器需要符合 RKParser 协议。基本上我需要做的是修剪服务器响应而不是将响应解析为对象 - 已经有一个解析器可以做到这一点：RKJSONParserJSONKit。所以我继承了这个类并在启动时注册了我的解析器：

```
[[RKParserRegistry sharedRegistry] setParserClass:[MyJSONParser class] 
                                      forMIMEType:@"application/json"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T15:32:37.427

只是想注意，现在您可以通过子类化来实现自己的检索/映射操作

*   `RKHTTPRequestOperation` [(doc)](http://restkit.org/api/0.20.3/Classes/RKHTTPRequestOperation.html) — 用于从服务器检索文件
*   `RKObjectRequestOperation` [(doc)](http://restkit.org/api/0.20.3/Classes/RKObjectRequestOperation.html) — 用于映射
*   `RKManagedObjectRequestOperation` [(doc)](http://restkit.org/api/0.20.3/Classes/RKManagedObjectRequestOperation.html) — 用于映射到核心数据对象

`[RKObjectManager registerRequestOperationClass:]` [并使用(doc)](http://restkit.org/api/0.20.3/Classes/RKObjectManager.html#//api/name/registerRequestOperationClass:)方法注册它们。

# c# - 在 List<> 和 List2<> 之间复制一些值

> ID：10441079
> 
> 赞同：0
> 
> 时间：2012-05-04T00:15:05.903
> 
> 标签：c#, asp.net, list, ienumerable

我有 2 个列表

```
List<PrimeraVueltaFindResult> ListaPrimeraVuelta = new List<PrimeraVueltaFindResult>();
List<RutaCriticaFindResult> result = new List<RutaCriticaFindResult>();

public class PrimeraVueltaFindResult
{
    [DataMember]
    public string Descripcion { get; set; }

    [DataMember]
    public string JobNameInicio { get; set; }

    [DataMember]
    public string GroupInicio { get; set; }

    [DataMember]
    public string StartRun { get; set; }

    [DataMember]
    public string JobNameFin { get; set; }

    [DataMember]
    public string GroupFin { get; set; }

    [DataMember]
    public string EndRun { get; set; }
}

public class RutaCriticaFindResult
{
    [DataMember]
    public int RutaCriticaId { get; set; }

    [DataMember]
    public string StartRun { get; set; }

    [DataMember]
    public string EndRun { get; set; }

} 
```

我需要在 PrimeraVueltaFindResult 列表值中复制 StartRun 和 EndRun。

请问我该怎么做？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T00:21:37.607

要将所有数据复制`ListaPrimeraVuelta`到新`RutaCriticaFindResult`对象中，您可以使用 LINQ：

```
var rutaCriticaFindResults = ListaPrimeraVuelta.Select(result => 
    new RutaCriticaFindResult 
    { 
        StartRun = result.StartRun, 
        EndRun = result.EndRun 
    });

var result = rutaCriticaFindResults.ToList(); 
```

# eclipse - 如何让我的新 Eclipse 分支在我的 github 存储库中显示为新项目？

> ID：10441082
> 
> 赞同：2
> 
> 时间：2012-05-04T00:15:39.063
> 
> 标签：eclipse, git, github

我正在阅读一本编程书，我想为每一章从 master 分支，然后在章节完成后合并回 master，但是让章节特定的分支永久显示在我的 github 中。通过 eclipse gui 执行此操作的最佳方法是什么？我已经在eclipse中创建了分支，但是我无法让它在github中创建重复的项目分支。

```
Github repository
-master
-chapter1
-chapter2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:36:52.820

如果你的“ `Team => Push to Upstream`”是灰色的，你需要在你的 Eclipse Egit 配置中指定你本地 Git 仓库的上游地址：参见“ [Eclipse/Egit, Push to Remote menu option is grayed out](https://stackoverflow.com/questions/8756006/eclipse-egit-push-to-remote-menu-choice-is-grayed-out) ”。

[还要在同一个 EGit 中](https://stackoverflow.com/a/6436019/6309)检查您的SSH2 配置。

最后，单击“添加所有分支规范”以将所有本地分支推送到上游仓库：

![参考规范](../Images/03355b76e82a9364aabaccb84f79a708.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:59:10.210

你推树枝了吗？

`git push origin chapter1`

`git push origin chapter2`

...ETC...

（注意：如果您在 Eclipse 中使用 git 的图形界面，您可能会考虑将该信息添加到问题中。）

# architecture - 寻找紧耦合设计与 SOA 的支持者

> ID：10441085
> 
> 赞同：1
> 
> 时间：2012-05-04T00:15:52.487
> 
> 标签：architecture, soa, corba, decoupling, shared-nothing

这是我对自己提出的一个奇怪的问题。我们在工作中就如何实现实际上几乎是面向服务的架构 (SOA) 进行了一些辩论，其中有一些不值得讨论的问题。也就是说，它是一组用于构建 SaaS Web 应用程序的小型简单服务（大多数情况下，遗留包装器并不是那么少）。

无论如何，一个争论的问题是是否使用无共享方法并让每个服务通过该服务的 API 与其他服务进行通信，或者是否开发某种类型的共享 API 库，该库将由各种服务导入以直接通信彼此。后者可能会让人们想起 CORBA。

所以，我对团队的建议是，对于每个感觉强烈的人——我们中的一些人——去研究并为我们个人希望如何实施该系统提出一个被广泛引用的案例。然后，为了希望减少确认偏差并启发每个人，请为我们个人不希望如何实施该系统提供一个被广泛引用的案例。然后我们都重新聚在一起，把它解决掉。

我的问题是，除了 CORBA 示例之外，我发现很难搜索紧密耦合、类似 CORBA 的导入库设计的想法。是否有这样做的支持者，尤其是与解耦的 SOA 架构*相反？*或者只是这个时代这个想法的一般支持者？我赞成无共享架构，其中每个服务都有自己定义明确的 API，现在我需要为我不赞成的内容做一个演示，但我什至找不到任何支持证据或者不是来自前 SOA 时代的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T00:36:02.913

像大多数“X vs Y”问题一样，答案*取决于*.

脱钩不是灵丹妙药。虽然它有很多好处（可重用性、模块化、测试、更容易维护等......），但它可能导致解决方案的过度设计（因此可能需要更长时间来创建和增加进入/理解的更多障碍）并且通常有一些对性能的影响。避免仅仅为了它而去耦/抽象也是很好的（除非它很容易或“低垂的果实”）。否则，请确保您有一些体面的用例来支持它。

这在很大程度上取决于您的项目类型、进度和绩效目标。与其在考虑您的项目之前询问哪个*x*更好，不如询问如何以具体和有意义的方式将每个*x*应用于您的项目，并以此为基础进行判断。

# javascript - JavaScript 的分层状态机

> ID：10441086
> 
> 赞同：8
> 
> 时间：2012-05-04T00:16:00.397
> 
> 标签：javascript, state-machine

我对分层状态机非常感兴趣，尤其是在 JavaScript 中，我发现[了这个](https://github.com/jakesgordon/javascript-state-machine)框架并且喜欢它的外观。但是我不确定它是否可以执行分层操作。

有人知道层次状态机的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T00:46:56.103

如果您想要类似[本文](http://www.eventhelix.com/realtimemantra/hierarchicalstatemachine.htm)中描述的模式，看起来您链接的框架可以做到这一点：

> ## 状态机类
> 
> 您还可以通过将状态机功能应用于原型（包括原型中的回调）并将类的所有实例转换为 FSM，并在构造实例时提供启动事件：

```
MyFSM = function() {    // my constructor function
  this.startup();
};

MyFSM.prototype = {

  onpanic: function(event, from, to) { alert('panic');        },
  onclear: function(event, from, to) { alert('all is clear'); },

  // my other prototype methods

};

StateMachine.create({
  target: MyFSM.prototype,
  events: [
    { name: 'startup', from: 'none',   to: 'green'  },
    { name: 'warn',    from: 'green',  to: 'yellow' },
    { name: 'panic',   from: 'yellow', to: 'red'    },
    { name: 'calm',    from: 'red',    to: 'yellow' },
    { name: 'clear',   from: 'yellow', to: 'green'  }
  ]}); 
```

> 这应该很容易调整以适合您的对象构造的适当机制。

换句话说，此时您应该能够执行通常的 JavaScript 继承操作，例如：

```
function MyCalmFSM() {
    MyFSM.apply(this, arguments);
}

MyCalmFSM.prototype = Object.create(MyFSM.prototype);
MyCalmFSM.prototype.constructor = MyCalmFSM;

// Don't panic
MyCalmFSM.prototype.onpanic = function(event, from, to) { alert("Don't panic"); } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-31T12:37:07.293

看看：[https ://github.com/steelbreeze/state.js](https://github.com/steelbreeze/state.js)

它以与 UML 2.x 规范紧密对齐的方式支持交替状态（状态、伪状态和最终状态）和区域的层次结构。现在是该项目的早期阶段，但基础知识已经存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T15:06:09.723

我知道这是一个老问题，但你可以看看基于 jQuery 的 iFSM 库，它可以设计 HSM：[https ://github.com/intersel/iFSM](https://github.com/intersel/iFSM)

# javascript - Akamai 媒体播放器：在准备好播放时获取事件回调

> ID：10441091
> 
> 赞同：1
> 
> 时间：2012-05-04T00:16:32.497
> 
> 标签：javascript, video-streaming, media-player, akamai

我正在使用 Akamai 媒体播放器为活动流式传输视频。通常，视频流从“LIVE”位置开始，但我希望我的默认设置为视频流中的较早点，这样当用户访问我的页面时，他们总是会看到一些很酷的开始而不是空的事件场地。事件没有积极发生。

我正在尝试找到一种在视频播放器准备就绪时接收回调的方法，以便我可以告诉它返回正确的秒数。文档说有一个'loadeddata'回调，但对于我来说，我无法让它工作。我从来没有收到任何通知。我可以设置一个 1.5 秒的 javascript 超时，这将导致它回到正确的时间，但随后我创建了一个竞争条件，如果 Flash 播放器（akamai 播放器）当时没有正确加载它仍然赢了不行。

媒体播放器的文档：http: [//videotest.esmas.com.mx/avp/userGuide/AkamaiPlayer_UserGuide.pdf](http://videotest.esmas.com.mx/avp/userGuide/AkamaiPlayer_UserGuide.pdf)

有什么建议么？

# php - jQuery：提交表单之前的 Ajax

> ID：10441096
> 
> 赞同：1
> 
> 时间：2012-05-04T00:17:28.960
> 
> 标签：php, jquery, ajax

在提交表单时，但在发送之前，我在弄清楚如何执行操作时遇到了一些麻烦。问题是操作标签将用户重定向到不同的站点，当我单击提交按钮时，我需要 AJAX 发送电子邮件。即使 AJAX 失败，用户也应该被重定向。

我阅读了有关 $.ajax() 的信息，但在 jQuery 得到响应之前，我不明白如何停止表单提交。它是自动完成的吗？

在另一个线程上，我看到建议使用输入类型“按钮”而不是提交。我知道这将允许我手动执行 $(form).submit(); 后来，给了我更好的控制，但我仍然努力完全理解前面的部分。

我知道这个问题的答案很简单，而且我可能会因为让自己复杂化而绕圈子！

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T00:21:18.927

要在 ajax 请求完成之前阻止表单提交，您可以禁用该`async`选项。

```
$.ajax({
  url: 'my_url.php',
  async:false,
  .....
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T00:19:30.307

您在其他地方看到的建议正是您需要做的。

您需要立即取消提交。（通过`return false`ing 或通过调用`e.preventDefault()`）然后，当您从服务器获得回复时，您可以在 AJAX 回调中重新提交表单。
（只要确保您第二次不再执行 AJAX 请求即可）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T00:22:22.193

您可以使用表单的`onSubmit`属性。

```
<form action="./something.php" method="post" onSubmit="someFunction();"> 
```

如果函数返回`true`默认动作发生，否则默认动作被阻止。

# java - 捕获异常并重新抛出

> ID：10441097
> 
> 赞同：3
> 
> 时间：2012-05-04T00:17:41.247
> 
> 标签：java, exception, throw

我是 Java 领域的新手，但目前正在进行分配的评估。我想知道是否有办法在类函数中捕获异常并抛出另一个异常，这样调用类函数的函数就不需要知道抛出的第一个异常。

例如

```
public void foo() throws MasterException {
    try {
        int a = bar();
    } catch (MasterException e) {
        //do stuff
    }
}

public void bar() throws MasterException, MinorException {
    try {
        int a = 1;
    } catch (MinorException e) {
        throw new MasterException();
    }
} 
```

我希望这个例子能解释我想要实现的目标。基本上我希望调用函数不知道`MinorException`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T00:25:42.913

`, MinorException`从声明中删除`bar`，你就完成了。我也会这样做：

```
throw new MasterException(e); 
```

如果`MasterException`有一个支持它的构造函数（它的标准是它，`Exception`类是）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T00:24:21.807

绝对地。你想改变这一行：

```
public void bar() throws MasterException, MinorException 
```

对此：

```
public void bar() throws MasterException 
```

其他一切都应该完全按照您的编写方式工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T00:25:27.213

只需从 bar() 的 throws 子句中删除 MinorException。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T00:28:51.333

当您捕获它时，我会从 foo() 中删除 MasterException，正如其他答案所说，来自 bar() 的 MinorException。

此外，如果 MasterException 或 MinorException 是 RuntimeException 的子类，则无需声明它。参见例如[http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T04:38:21.837

1.  `throws MasterException` 从 method 的声明中删除 `foo()`，原因很明显 MasterException 已经准备好被捕获，所以无论如何都不会发生。

2.  `, MinorException`从方法的声明中删除`bar()`。

# playframework - 在 Play Framework 1.2.4 的生产环境中上传文件夹

> ID：10441100
> 
> 赞同：0
> 
> 时间：2012-05-04T00:18:00.587
> 
> 标签：playframework, tomcat7, playframework-1.x

我在如何拆分我的应用程序以在生产中执行部署时遇到了一些麻烦。

更详细地说：

在应用程序中，有一部分用户可以将其公司（徽标）的图像上传到网站，以在动态生成的热点站点上使用。

但是，每次我要执行部署时，我都会将生产中的文件夹丢失给我的开发人员。

生产中的应用程序在 tomcat7/linux 上运行。有什么办法可以将此图像目录保留在项目外部的文件夹中？像虚拟主机一样可以识别和运行？

作为，在上传到此主机时保存文件？

谢谢你。

**更新**

现在我可以将 imgs 保存在应用程序外部的目录中。但是我如何将 /logos 映射到 tomcat 中的附件文件夹？

Tnks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:07:46.580

您可以在 application.conf 中设置路径。刚设置

```
attachments.path=/some/absoute/path 
```

有关文档，请参见此处，[http://www.playframework.org/documentation/1.2.4/configuration#attachments](http://www.playframework.org/documentation/1.2.4/configuration#attachments)

# html - HTML 组织微数据仅在关于我们页面或首页上

> ID：10441101
> 
> 赞同：3
> 
> 时间：2012-05-04T00:18:15.453
> 
> 标签：html, seo, microdata

这更像是一个个人偏好问题，而不是一个正确/错误的问题......

我有一个“关于我们”的页面，里面充满了 schema.org 微数据。我们的首页也有姓名/地址/电话/等等。

包括首页上的微数据有什么意义吗？搜索引擎似乎最好只有 1 个页面指向。但与此同时，似乎 1 页应该是首页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T00:45:12.173

我会把它放在两个上。让谷歌算出排名。在“最坏”的情况下，搜索您的组织的人会看到两个带有丰富网页摘要的 Google 结果。

# html - 有没有办法强制水平导航菜单中的多字 li 保持在一行？

> ID：10441103
> 
> 赞同：4
> 
> 时间：2012-05-04T00:18:25.753
> 
> 标签：html, css, navigation

我有一些 HTML：

```
<nav>
    <ul>
        <li>Menu Item One</li>
        <li>Menu Item Two</li>
        <li>Menu Item Three</li>
    </ul>
</nav> 
```

这是一个水平菜单。我列表中的链接数量使得导航需要下降到两行。但我不希望它掉在里里的某个地方。也就是说，因为我的链接是多字的，所以它往往会落在项目的中间。有什么方法可以强制下一行始终位于`<li>`元素之间的某个位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T00:21:54.627

只需将 css 添加`white-space:nowrap;`到 li 的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:22:25.283

大概您可以尝试用不间断空格替换 li-items 中的空格，如下所示：

```
<nav>
    <ul>
        <li>Menu&nbsp;Item&nbsp;One</li>
        <li>Menu&nbsp;Item&nbsp;Two</li>
        <li>Menu&nbsp;Item&nbsp;Three</li>
    </ul>
</nav> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T00:24:51.883

```
nav li {display:block; float:left; white-space:pre;} 
```

在这里查看界面：http: [//jsfiddle.net/3h9Kw/](http://jsfiddle.net/3h9Kw/)

# opencv - 如何计算单应性？

> ID：10441104
> 
> 赞同：6
> 
> 时间：2012-05-04T00:18:35.957
> 
> 标签：opencv, geometry, computer-vision

我很难理解平面到平面单应性的工作原理。特别是我想知道 opencv 方法是如何工作的。

和光线追踪一样吗？齐次坐标与比例*矢量有何不同？

我读到的所有内容都像你一样已经知道他们在说什么，所以很难掌握！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T09:45:16.237

谷歌搜索`homography estimation`将其作为第一个链接返回（至少对我而言）： [http](http://cseweb.ucsd.edu/classes/wi07/cse252a/homography_estimation/homography_estimation.pdf) ://cseweb.ucsd.edu/classes/wi07/cse252a/homography_estimation/homography_estimation.pdf 。这绝对是一个糟糕的描述，很多都被省略了。如果你想学习这些概念，阅读一本好书[`Multiple View Geometry in Computer Vision`](https://rads.stackoverflow.com/amzn/click/com/0521540518)比阅读一些短文要好得多。这些短文往往有几个严重的错误，所以要小心。

简而言之，定义了一个成本函数，最小化这个成本函数的参数（单应矩阵的元素）就是我们正在寻找的答案。有意义的成本函数是几何的，也就是说，它具有几何解释。对于单应性情况，我们希望找到 H 使得通过将点从一个图像转换到另一个图像，所有点及其对应关系之间的距离最小。这个几何函数是非线性的，也就是说： 1-应该用迭代法求解，一般来说，2-迭代法需要一个初始起点。在这里，代数成本函数进入。这些成本函数没有有意义的/几何解释。通常设计它们更像是一门艺术，对于一个问题，通常你可以找到几个具有不同属性的代数成本函数。代数成本的好处是它们会导致线性优化问题，因此存在它们的封闭形式解决方案（即一次性/非迭代方法）。但缺点是找到的解决方案不是最优的。因此，一般的方法是首先优化代数成本，然后使用找到的解决方案作为迭代几何优化的起点。现在，如果您在谷歌上搜索这些单应性成本函数，您会发现这些成本函数通常是如何定义的。一般的方法是首先优化代数成本，然后使用找到的解决方案作为迭代几何优化的起点。现在，如果您在谷歌上搜索这些单应性成本函数，您会发现这些成本函数通常是如何定义的。一般的方法是首先优化代数成本，然后使用找到的解决方案作为迭代几何优化的起点。现在，如果您在谷歌上搜索这些单应性成本函数，您会发现这些成本函数通常是如何定义的。

如果您想知道 OpenCV 中使用了什么方法，只需查看代码： [http ://code.opencv.org/projects/opencv/repository/entry/trunk/opencv/modules/calib3d/src/ fundam.cpp#L81](http://code.opencv.org/projects/opencv/repository/entry/trunk/opencv/modules/calib3d/src/fundam.cpp#L81) 这是代数函数，DLT，在提到的书中定义，如果你谷歌`homography DLT`应该找到一些相关文件。然后在这里： [http](http://code.opencv.org/projects/opencv/repository/entry/trunk/opencv/modules/calib3d/src/fundam.cpp#L165) ://code.opencv.org/projects/opencv/repository/entry/trunk/opencv/modules/calib3d/src/fundam.cpp#L165 一个迭代过程最小化几何成本函数。似乎高斯- 牛顿法实现： [http ://en.wikipedia.org/wiki/Gauss%E2%80%93Newton_algorithm](http://en.wikipedia.org/wiki/Gauss%E2%80%93Newton_algorithm)

以上所有讨论都假设您在两个图像之间存在对应关系。如果某些点与另一张图像中的错误点匹配，那么您就有异常值，并且上述方法的结果将完全错误。稳健（针对异常值）方法进入此处。OpenCV 为您提供两种选择：1.RANSAC 2.LMeDS。谷歌是你的朋友。

希望有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-21T08:32:40.810

要回答您的问题，我们需要解决 4 个不同的问题：

```
1\. Define homography.
2\. See what happens when noise or outliers are present.
3\. Find an approximate solution.
4\. Refine it. 
```

* * *

1.  映射二维点的 3x3 矩阵中的单应性。映射在齐次坐标中是线性的：[x2, y2, 1]' ~ H * [x1, y1, 1]'，其中 ' 表示转置（将列向量写为行），~ 表示映射符合比例. 在笛卡尔坐标中更容易看到（将分母和分母乘以相同的因子不会改变结果）

    x2 = (h11*x1 + h12*y1 + h13)/(h31*x1 + h32*y1 + h33)

    y2 = (h21*x1 + h22*y1 + h23)/(h31*x1 + h32*y1 + h33)

    您可以看到在笛卡尔坐标中映射是非线性的，但现在请记住这一点。

2.  我们可以使用最小二乘线性代数方法（参见 DLT - 直接线性变换）轻松求解齐次坐标中的前一组线性方程，但不幸的是，这只会最小化单应性参数中的代数误差。人们更关心另一种误差——即在笛卡尔坐标系中移动点的误差。如果没有噪音并且没有异常值，则两个错误可能是相同的。然而，噪声的存在要求我们最小化笛卡尔坐标中的残差（残差只是笛卡尔方程左右两侧的平方差）。最重要的是，异常值的存在要求我们使用稳健的方法，例如 RANSAC。它选择最好的内点集并拒绝一些异常值，以确保它们不会污染我们的解决方案。

3.  由于 RANSAC 在多次迭代中通过随机试验和错误方法找到正确的内点，我们需要一种非常快速的方法来计算单应性，这将是一种线性近似，可以最大限度地减少参数的误差（错误的度量），但在其他方面足够接近最终解决方案（即最小化平方点坐标残差 - 一个正确的指标）。我们使用线性解作为进一步非线性优化的猜测；

4.  最后一步是使用我们的初始猜测（最小化单应性参数的线性系统解）求解非线性方程（最小化像素误差平方和）。例如，使用平方残差而不是它们的绝对值的原因是因为在高斯公式（描述噪声）中我们有一个平方指数 exp(x-mu)^2，所以（跳过一些概率公式）最大似然解需要平方残差。

为了执行非线性优化，通常采用 Levenberg-Marquardt 方法。但是在第一个近似值中，可以只使用梯度下降（请注意，梯度指向上坡，但我们正在寻找最小值，因此我们反对它，因此下面有一个减号）。简而言之，我们经历了一组迭代 1..t..N，在迭代 t 处选择单应性参数为 param(t) = param(t-1) - k * gradient，其中梯度 = d_cost/d_param。

奖励材料：为了进一步减少单应性中的噪音，您可以尝试一些技巧：减少点的搜索空间（开始跟踪您的点）；使用不同的特征（线、圆锥曲线等也通过单应性变换但可能具有更高的信噪比）；拒绝不可能的同形异义词以加速 RANSAC（例如那些对应于“不可能”点移动的同形异义词）；对可能归因于噪声的 Homographies 的微小变化使用低通滤波器。

# regex - 为什么这个正则表达式在谷歌电子表格中不起作用？

> ID：10441105
> 
> 赞同：2
> 
> 时间：2012-05-04T00:18:37.893
> 
> 标签：regex, spreadsheet, expression

我正在尝试使用 google 电子表格中的正则表达式从 url 中提取。但是，电子表格返回**`#VALUE!`**以下错误： **无效的正则表达式：无效的 perl 运算符：(?<**

这是我正在使用的正则表达式：`(?<=raid_boss=)[a-zA-Z0-9_]+`

一个示例 url 将包含一个变量，上面写着`raid_boss=name`. 此正则表达式应提取名称。它适用于我的测试程序，但不适用于谷歌电子表格。

以下是谷歌电子表格中单元格的确切内容：`=REGEXEXTRACT( B1 ; "/(?<=raid_boss=)[-a-zA-{}-9_]+" )`

任何见解或帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T00:24:02.130

听起来 Google Docs 使用的任何正则表达式引擎都不支持后向断言。它们是一个相对罕见的功能。

但是如果你使用捕获，REGEXEXTRACT 将返回捕获的文本，所以你可以这样做：

```
=REGEXEXTRACT( B1 ; "raid_boss=([a-zA-Z0-9_]+)" ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-16T02:36:05.760

Javascript 不是问题 - Google 表格使用[RE2](https://github.com/google/re2/blob/master/doc/syntax.txt)，它缺乏后向功能以及其他有用的东西。

你可以使用：

```
regexextract(B1, ".*raid_boss=(.*)") 
```

或者如果不起作用，则使用 FIND、SUBSTITUTE 等本机工作表功能

找到一个好的正则表达式测试工具是很棘手的——例如，您可以制作一些在[http://rubular.com/](http://rubular.com/)中有效但在 GSheets 中失败的东西。您需要确保您的工具支持 RE2 风格，例如：[https ://regoio.herokuapp.com/](https://regoio.herokuapp.com/)

# javascript - 如何在 node.js 中添加换行符？

> ID：10441109
> 
> 赞同：12
> 
> 时间：2012-05-04T00:19:01.750
> 
> 标签：javascript, sockets, node.js, pager

我是 node.js 的新手，我正在尝试编写一个程序来接收 http 请求并通过套接字转发内容。在套接字的另一端是一个分页系统，它需要以换行符终止的消息。到目前为止，它工作正常，除了发送了一条带有内容的额外消息：`undefined`。

当我将寻呼机消息的内容打印到客户端的浏览器时，似乎没有换行。我这样做对吗？

```
sys = require("sys"),
http = require("http"),
url = require("url"),
path = require("path"),
net = require("net");

socket = new net.Socket();
socket.connect(4000, '192.168.0.105');

var httpServer = http.createServer(function(request, response) {
    var uri = String(url.parse(request.url).query);
    var message = uri.split("=");
    var page = 'FPG,101,0,3!A' + message[0] + '\n';
    response.writeHead(200, {"Content-Type":"text/html"});
    response.write('sending message: ' + page + " to pager");
    response.end();
    socket.write(page);
}).listen(8080);

sys.puts("Server running at http://localhost:8080/"); 
```

编辑：我进一步缩小了范围。事实证明，如果我这样做：

```
var page = 'FPG,101,0,3!A' + 'hello' + '\n'; 
```

它工作正常。所以输出`uri.split("=")`一定不是我所期望的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-04T00:21:31.213

我确定新行在那里，但是当你发送你的`Content-Type`as时你不会看到它`text/html`。在 HTML 中，`\n`只是其他空格，因此被视为。改为使用`text/plain`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-12-11T13:41:43.000

由于内容类型是'text/html'，我们可以愉快地使用break语句。就像这样

```
res.write('hello'+'<br/>');
 res.write('nice to meet you'); 
```

您可以在节点中尝试此代码：

```
var http = require('http');

http.createServer(function (req, res) {

res.writeHead(200, { 'Content-Type': 'text/html' });
res.write('hello,this is saikiran'+'<br/>');
res.end('nice to meet you');

}).listen(process.env.PORT || 8080);
console.log('server running on port 8080'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-29T10:15:23.377

根据 text/plain 的内容类型，您还可以使用 \r 将返回输入发送到客户端的浏览器

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-04T22:51:08.557

I figured out what the problem was. For some reason the browser was sending an additional request to the page right after my request. I just filtered for requests with a certain format and that fixed it.

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-09T10:34:46.967

考虑使用`\\n`而不是`\n`换行。

# python - 媒体播放/暂停模拟

> ID：10441110
> 
> 赞同：5
> 
> 时间：2012-05-04T00:19:03.020
> 
> 标签：python, windows

我的键盘包含一排用于各种非标准键盘任务的按钮。这些键包含修改音量、播放或暂停、跳过曲目等功能。如何使用 Python 模拟基本的播放/暂停？顺便说一句，我在 Windows 上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T00:52:59.637

我会使用[pywin32](http://starship.python.net/crew/mhammond/win32/Downloads.html)。与安装捆绑在一起的是大量的 API 文档（通常放在类似`C:\Python32\Lib\site-packages`.）的位置。它本质上将很多东西包装在 Win32 库中，用于 Windows 中的许多低级任务。

安装后，您可以使用[keybd_event](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646304.aspx)的包装器。

*您也可以使用`SendInput`代替，`keybd_event`但它似乎没有被 PyWin32 包装。`SendMessage`也是一种选择，但比较麻烦。*

您需要查找这些特殊按钮的虚拟扫描代码，因为我怀疑字符到代码的映射功能会在这里为您提供帮助。您可以在[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731.aspx)找到参考。

那么调用函数就很简单了。下面的片段在我的电脑上暂停了 Chuck Berry。

```
>>> import win32api
>>> VK_MEDIA_PLAY_PAUSE = 0xB3
>>> hwcode = win32api.MapVirtualKey(VK_MEDIA_PLAY_PAUSE, 0)
>>> hwcode
34
>>> win32api.keybd_event(VK_MEDIA_PLAY_PAUSE, hwcode) 
```

`MapVirtualKey``keybd_event`为我们提供需要（或更可能是键盘驱动程序）的硬件扫描代码。

请注意，所有这些都是由键盘驱动程序抢购的，因此您实际上无法控制击键的发送位置。您可以将`SendMessage`它们发送到特定窗口。媒体密钥通常无关紧要，因为它们会被音乐播放器等截获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-27T13:09:40.613

您可以使用`pyautogui`. 该库包含许多键盘和鼠标模拟。安装`pip install pyautogui`在cmd中运行。

为了模拟播放/暂停按键，您应该使用`pyautogui.press("playpause")`.

[在https://pyautogui.readthedocs.io/en/latest/keyboard.html](https://pyautogui.readthedocs.io/en/latest/keyboard.html)查看他们的文档以查看支持的键和其他一些键盘功能的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-28T15:30:49.827

在安装了所有最新更新的 Windows 10 64 上，这对我不起作用。在它起作用之前我需要这个（第三个参数 2）。

```
win32api.keybd_event(0xB3,0,2,0) 
```

没有费心去研究它**为什么**起作用，而是把它扔在那里，因为这篇文章和其他类似的帖子让我很沮丧，因为某种原因不能在我的电脑上工作。

这成功地在我的电脑上暂停/播放了亚马逊音乐。

# sqlite - 插入期间 Mono + SQLite + Dapper SQLite 异常

> ID：10441113
> 
> 赞同：1
> 
> 时间：2012-05-04T00:19:19.057
> 
> 标签：sqlite, mono, dapper

我正在使用 Mono、SQLite、Dapper 和 Dapper 扩展。我可以从数据库中读取，但插入不起作用。我正在为 sqlite 使用 Mono 驱动程序。

至少对我来说，错误信息量不是很大。任何帮助都感激不尽。

错误：

```
SQLite error
near ".": syntax error
at Mono.Data.Sqlite.SQLite3.Prepare (Mono.Data.Sqlite.SqliteConnection cnn, System.String strSql, Mono.Data.Sqlite.SqliteStatement previous, UInt32 timeoutMS,    System.String& strRemain) [0x00000] in <filename unknown>:0 
at Mono.Data.Sqlite.SqliteCommand.BuildNextCommand () [0x00000] in <filename unknown>:0 
```

测试代码：

```
public void can_add_a_service_record()
    {
        var provider = new Provider { Name = "Hotmail" };
        int id = providerData.Insert(provider);         
        Assert.AreEqual("Hotmail", providerData.Get(id).Name);  
    } 
```

插入代码如下。

```
public virtual int Insert (TEntity entity)
    {
        var connection = SqlHelper.GetConnection();         
        int id = connection.Insert<TEntity>(entity);
        connection.Close();
        return id;
    } 
```

谢谢

啾啾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:54:18.700

对我来说，这看起来像是一个[Dapper 扩展](https://github.com/tmsmith/Dapper-Extensions)问题，而不是一个 Dapper 问题。特别是，我看不到实现的 Sqlite 方言：[https](https://github.com/tmsmith/Dapper-Extensions/tree/master/DapperExtensions/Sql) ://github.com/tmsmith/Dapper-Extensions/tree/master/DapperExtensions/Sql 。

要解决此问题，我建议您提交 Dapper Extensions 项目（与 Dapper 完全独立）的补丁，或者在 Dapper 之上使用不同的包装器，或者在没有包装器的情况下使用 Dapper。

例如，以下应该有效：

```
var id = cnn.Query<int>("insert cars values(@name); select last_insert_rowid()", 
   new {name = "bmw"}); 
```

# ruby-on-rails-3 - 在 Heroku 上更改为 MySQL2 时出错

> ID：10441123
> 
> 赞同：5
> 
> 时间：2012-05-04T00:20:22.567
> 
> 标签：ruby-on-rails-3, heroku, mysql2

对于我的 Heroku 应用程序（Rails 3.1.4 和 Ruby 1.9.2），我正在尝试更改为使用 MySQL2 的数据库，但我收到来自 Heroku 的错误（这使我的应用程序崩溃）：

```
3.1.4/lib/active_record/connection_adapters/abstract/connection_specification.rb:71:in `rescue in establish_connection': Please install the mysql12 adapter: `gem install activerecord-mysql12-adapter` (no such file to load -- active_record/connection_adapters/mysql12_adapter) (RuntimeError) EXCEPT 
```

在我的 gemfile 中，我有：

```
group :production do
  gem "mysql2", "~> 0.3.11"
end

group :development, :test do
  gem 'mysql', '2.8.1'
end 
```

在我的 database.yml 中，我有：

```
development:
  adapter: mysql

production:
  adapter: mysql2 
```

这是我尝试失败的方法（所有尝试在本地和 Heroku 中正确安装）：

1.  根据这个答案，我尝试了（在我的 gemfile 中）mysql2 版本[“< 0.3”](https://stackoverflow.com/questions/6141276/rails-mysql-adapter-error)

2.  根据该问题的另一个答案，我尝试了 '< 0.3.7' 但这不起作用

3.  [我根据这个答案](https://stackoverflow.com/questions/9862080/rails-3-2-2-mysql2-adapter-error)尝试了 gem "mysql2", "~> 0.3.11" ，但它没有用

4.  根据 gem 的站点，我尝试了（在我的 gemfile 中）mysql2 版本[“~> 0.2.7”](https://github.com/brianmario/mysql2)，它安装了 mysql2 0.2.18（在本地和 Heroku 中成功）

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-20T21:15:32.497

我相信你很久以前就已经解决了这个问题或继续前进，但我遇到了同样的问题，并认为我会与其他任何人分享对我有用的东西。

除了上面提到的内容，如果您使用 Heroku，您还必须在 DATABASE_URL 中指定 mysql2:// 而不是 mysql://。请参阅此处的 ClearDB 文章： [https ://devcenter.heroku.com/articles/cleardb](https://devcenter.heroku.com/articles/cleardb)

并更新他们的说明以使用 mysql2:// 而不是 mysql:// ，如下所示：

```
heroku config:add DATABASE_URL='mysql2://adffdadf2341:adf4234@us-cdbr-east.cleardb.com/heroku_db?reconnect=true' 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:51:34.897

尝试安装`ruby-mysql`gem。

# winforms - winforms和动画中的屏幕

> ID：10441139
> 
> 赞同：0
> 
> 时间：2012-05-04T00:23:19.990
> 
> 标签：winforms, animation

我想知道在 wpf 中生成类似于启动屏幕的屏幕的库 (.dll) 或类的名称？我的应用程序是一个 winforms(c#) 应用程序，我想要一些动画。我需要一些建议，尤其是如何使用 winforms 制作屏幕以及如何为我的应用程序设置动画。.net 中是否存在像 flash 这样的技术，还是存在其他技术并且可以在我的情况下使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:45:13.107

前段时间我想要一个 WinForms 启动画面，我用它作为参考让我启动并运行： http: [//www.codeproject.com/Articles/5454/A-Pretty-Good-Splash-Screen-in-C](http://www.codeproject.com/Articles/5454/A-Pretty-Good-Splash-Screen-in-C)

但是，对于动画，就像您在现代桌面应用程序初始屏幕中看到的类型一样，您需要使用 WPF。您可以混合使用 WPF 和 Winforms。

# javascript - 仅使用 JS 写入文本文件

> ID：10441143
> 
> 赞同：0
> 
> 时间：2012-05-04T00:24:00.240
> 
> 标签：javascript, text

我需要使用 JavaScript 写入文本文件。我有一台需要在其上运行一些 HTML 文件的机器，它使用 JS 来操作内容。我想在文本文件中记录用户所做的更改，而计算机没有也*永远不会有*任何服务器端脚本语言。所以我只想知道如何仅使用 JS 将文本附加到 txt 文件。或者，在 JS 调用上运行一个可以自己完成工作的批处理脚本，是一个很好的等价物，但我确信它的难度相同......

该脚本将在仅 IE 的机器上运行，但我还需要能够在其他浏览器上对其进行测试......所以我不确定 ActiveX 如何以及是否可以在 Chrome 上运行，但如果不是，我需要另一种解决方案...请帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:47:21.150

不完全是我正在寻找的解决方案，但我最终使用了 cookie，这将我可以保存的数据量限制在非常少，但没有任何效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:32:57.227

虽然新的[File](http://caniuse.com/#feat=fileapi) API 有一些承诺，但您可能需要使用服务器端语言来实现可靠的文件写入。

一些可能的替代方法是将更改“写入”到`localStorage`，或者创建`URI`下载。网上有很多教程可以设置这些。祝你好运！

# android - 谁能给我一些android加速度计示例代码？

> ID：10441149
> 
> 赞同：-4
> 
> 时间：2012-05-04T00:24:42.840
> 
> 标签：android, accelerometer

我正在开发一个应用程序，它每 10 毫秒需要一个新的加速度数据。我需要将数据保存到文件中。谁能给我一些android加速度计示例代码作为参考？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:22:06.553

阅读 SensorManager 以了解如何获取加速度计数据：

[http://developer.android.com/reference/android/hardware/SensorManager.html](http://developer.android.com/reference/android/hardware/SensorManager.html)

您可以直接从应用程序上下文访问 SensorManager。

```
SensorManager manager = (SensorManager) context.getSystemService(Context.SensorManager); 
```

然后你注册一个 SensorEventListener、你想监听的传感器和速率。SensorManager 类为刷新率提供常量。出于您的目的，SENSOR_DELAY_GAME 可能足够快，但我觉得 SENSOR_DELAY_FASTEST 是一个更安全的选择。据我所知，违约率没有硬性数字，所以看看什么最有效。

```
Sensor accel = manager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
manager.registerListener(new MySensorEventListener(), accel, SensorManager.SENSOR_DELAY_GAME); 
```

然后，每次从加速度计轮询一个新事件时，它都会调用监听器的 onSensorChanged 方法：

```
public class MySensorEventListener implements SensorEventListener {
    @Override
    public void onSensorChanged(SensorEvent event) {
        // do what you need to do with the data from event
    }
} 
```

# wpf - 如何在 ShellView 中移动 Caliburn Micro Child 视图？

> ID：10441150
> 
> 赞同：0
> 
> 时间：2012-05-04T00:24:46.110
> 
> 标签：wpf, mvvm, caliburn.micro

我将 Caliburn Micro 用于 MVVM，所以我可以打开视图，但不能移动它们。

我已经设置`WindowStyle=None`，这是我的代码。

```
private void OpenView(object ViewModel)
{
    windowManager.ShowWindow(ViewModel,
    settings: new Dictionary<string, object>
    {
        {"Background",Brushes.Transparent},
        { "WindowStyle", WindowStyle.None},
        { "ShowInTaskbar", false},  
        {"AllowsTransparency",true}
    });
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:29:16.580

从 Caliburn Micro 的 WindowManager.cs 中删除您的 CreateWindow 并添加此代码。

```
protected virtual Window CreateWindow(object rootModel, bool isDialog, object context, IDictionary<string, object> settings) {
    var view = EnsureWindow(rootModel, ViewLocator.LocateForModel(rootModel, null, context), isDialog);
    ViewModelBinder.Bind(rootModel, view, context);

    var haveDisplayName = rootModel as IHaveDisplayName;
    if (haveDisplayName != null && !ConventionManager.HasBinding(view, Window.TitleProperty)) {
        var binding = new Binding("DisplayName") { Mode = BindingMode.TwoWay };
        view.SetBinding(Window.TitleProperty, binding);
    }

    view.MouseLeftButtonDown += new System.Windows.Input.MouseButtonEventHandler(Window_MouseDown);
    ApplySettings(view, settings);

    new WindowConductor(rootModel, view);

    return view;
}

void Window_MouseDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
{
    var view = sender as Window;
    view.DragMove();
} 
```

# silverlight - Silverlight：将 ChangePropertyAction 添加到 DataTemplate

> ID：10441152
> 
> 赞同：0
> 
> 时间：2012-05-04T00:25:21.210
> 
> 标签：silverlight

在过去的一个小时里，我一直在玩，试验和谷歌搜索，但无法找出问题所在。基本上，我有一个列表框，每个项目都有文本块和复选框。我需要在选中的复选框旁边将文本块的文本更改为绿色。下面的代码是我能想到的最好的代码，但它不起作用。任何帮助表示赞赏。

```
<DataTemplate x:Key="ListBoxTemplate">
        <Grid
            Width="80">
            <TextBlock
                x:Name="textBlock"
                HorizontalAlignment="Left"
                Text="{Binding Data, Converter={StaticResource DataConverter}}"
                Foreground="#FF859FAF"
                FontSize="12"
                TextWrapping="Wrap"
                Width="50"
                Margin="0"
                Grid.Row="10" />
            <CheckBox
                x:Name="Btn6"
                IsChecked="{Binding IsSelected, Mode=TwoWay}"
                Cursor="Hand"
                Padding="0"
                HorizontalAlignment="Right"
                Height="32"
                VerticalAlignment="Bottom"
                RenderTransformOrigin="0.5,0.5"
                Width="26"
                d:LayoutOverrides="GridBox">
                <i:Interaction.Triggers>
                    <i:EventTrigger
                        EventName="textBlock">
                        <ei:ChangePropertyAction
                            TargetName="textBlock"
                            TargetObject="{Binding ElementName=textBlock}"
                            PropertyName="Width"
                            Value="100">
                        </ei:ChangePropertyAction>
                        <i:InvokeCommandAction
                            Command="{Binding SelectDataCommand, Source={StaticResource ControlViewModel}}"
                            CommandName="SelectDateRangeCommand"
                            CommandParameter="{Binding}" />
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </CheckBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:40:10.603

（对不起，我的英语不好）

这并不能完全回答您的问题，但一个简单的替代方法是绑定`IsSelected`并`TextBox.Foreground`创建一个转换器，`SolidColorBrush`当值为 true 时返回绿色

# jquery - jQuery改进全选复选框功能

> ID：10441155
> 
> 赞同：0
> 
> 时间：2012-05-04T00:25:37.930
> 
> 标签：jquery, checkbox

我有一个 checkall 脚本，通过单击复选框来选择所有复选框。目前它工作得很好，但我需要它的多个实例以相同的形式。所以我需要修改它以仅针对最近的字段集。

这是工作代码，也是小提琴，[http://jsfiddle.net/clintongreen/22w3B/](http://jsfiddle.net/clintongreen/22w3B/)

```
 $('.checkall').click(function () {
    var checked = $(this).data('checked');
    $('fieldset').find(':checkbox').attr('checked', !checked);
    $(this).data('checked', !checked);
}); 
```

这是我失败的尝试：

```
 $('.checkall').click(function () {
    var checked = $(this).data('checked');
    var next_set = $('fieldset').next();
    $(next_set).find(':checkbox').attr('checked', !checked);
    $(this).data('checked', !checked);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T00:35:13.063

与您最初的尝试相比，只需一行更改。

```
$('.checkall').click(function () {
    var checked = $(this).data('checked');
    $(this).parents('li').next().find(':checkbox').attr('checked', !checked);
    $(this).data('checked', !checked);
}); 
```

但是为什么不给字段集自己的 ID 以使其不那么脆弱呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:31:26.473

有多种方法可以做到这一点，但 IMO 最简单的方法是将“全选”复选框移动到字段集中，然后：

```
$('.select-all').change(function() {
  var new_value = this.checked;
  $(this).closest('fieldset').find('input:checkbox').each(function() {
    if (!$(this).hasClass('select-all')) {
      this.checked = new_value;
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T00:29:09.363

您是否查看过 JQUERY 中的“closest()”函数？

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T00:29:35.720

获取最接近`.parents("li").next("fieldset")`的字段集并将其选中属性设置为“已选中”：

```
$(".checkall").click(function(){
    $("input[type='checkbox']",
        $(this).parents("li")
               .next("fieldset"))
    .attr("checked","checked");
}); 
```

# oracle - Oracle 意外删除

> ID：10441158
> 
> 赞同：0
> 
> 时间：2012-05-04T00:25:47.790
> 
> 标签：oracle, restore

我在Oracle 10g 上不小心删除了很多表的记录，而且我没有备份，noarchivelog 模式，没有打开闪回。是否可以恢复数据？如果是，我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T00:31:11.643

多久前删除数据？例如，如果您在不到一个小时前删除了数据，您是否可以运行此查询并查看数据是否仍在 UNDO 中？

```
SELECT *
  FROM some_table AS OF TIMESTAMP systimestamp - INTERVAL '1' hour 
```

# scheme - 将数据写入方案中不存在的文件（通过程序创建后）

> ID：10441164
> 
> 赞同：2
> 
> 时间：2012-05-04T00:26:48.763
> 
> 标签：scheme, lisp, chicken-scheme

我制作了一个简单的程序来将文本写入现有文件：

;; 写入现有文件

```
(define write-to-a-file
  (lambda (path txt)
    (call-with-output-file path
      (lambda (output-port)
        (write txt output-port))))) 
```

但我想修改它，以便如果文件不存在，则应该创建它。如果文件存在，那么它应该写入文件而不删除文件的先前内容。我在写鸡计划。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T01:16:46.213

试试这个鸡计划：

```
(define (write-to-a-file path txt)
  (call-with-output-file path
    (lambda (output-port)
      (write txt output-port))
    #:append)) 
```

或者这个对于球拍：

```
(define (write-to-a-file path txt)
  (call-with-output-file path
    (lambda (output-port)
      (write txt output-port))
    #:exists 'append)) 
```

# php - 在 php 脚本中更新页面元素

> ID：10441166
> 
> 赞同：0
> 
> 时间：2012-05-04T00:27:30.007
> 
> 标签：php, javascript, ajax

页面元素是这样定义的。

```
<div id="readf" class="tabbertab">
<h2>First Reading</h2>

    <div id='titlefe' class='rtitle'>

    </div>
    <div id='readfe' class='rtext'>

    </div>

</div> 
```

我对 php 脚本进行 ajax 调用以将数据添加到这些页面元素。

```
<script>
    $('#readings').ready(function(){
    $.ajax({
        url: "loadenglish.php",
        type: "GET",
        data: { },
        cache: false,
        async: true,
        success: function (response) {
            if (response != '') 
            {
                alert (response);
            }
        },
        error: function (request, status, error) {
            alert ("status "+status+" error "+error+"responseText "+request.responseText);
        },
    });    

    });
</script> 
```

php 脚本获取数据并执行脚本回显以添加数据。

```
<?php
    $titlefe = 'text 1';

    $readfe = 'text 2';

    echo "<script type='text/javascript'> $('#titlefe').append('".$titlefe."');  $('#readfe').append('".$readfe."'); </script>";
?> 
```

警报语句显示 php 脚本获取了正确的信息。但是页面元素没有更新。有没有不同的方法可以添加`$titlefe`到元素 id `titlefe`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T00:30:39.753

`eval(response);`在成功回调中尝试您的警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:31:07.737

返回 javascript 方法不是一个好主意。您应该以 JSON 格式返回数据并在客户端使用 javascript 来执行实际更新。

您的 PHP 返回语句应如下所示：

```
echo "{ 'titlefe': '" + $titlefe + "', 'readfe': '" + $readfe + "' }"; 
```

您的成功回调应如下所示：

```
success: function(response) {
   $('#titlefe').text(response.titlefe);
   $('#readfe').text(response.readfe);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T00:32:17.770

如果你坚持返回 JavaScript，你应该使用[`getScript()`](http://jQuery.getScript/)而不是 Ajax get。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T00:38:28.130

除了 MK_Dev 发布的内容之外，您还可以使用 PHP 函数 json_encode();

```
<?php

//loadenglish.php
$params = array(
    'titlefe' => 'text 1',
    'readfe' => 'text 2',
);

echo json_encode($params); 
```

还有一个 jQuery 函数[$.getJSON()](http://api.jquery.com/jQuery.getJSON/)，它是像你一样使用 $.ajax() 函数的快捷方式。

# ajax - 通过 Ajax 动态加载 EditorFor 模板

> ID：10441171
> 
> 赞同：3
> 
> 时间：2012-05-04T00:28:10.970
> 
> 标签：ajax, asp.net-mvc-3, dynamic, partial-views, editorfor

我有一个带有子对象列表集合的模型对象。我需要将子对象的表单字段加载到页面，并提供一个链接来动态添加第二个对象的表单字段。所以换句话说，可以通过一个表单和一个回发来创建多个子对象。

我的第一个想法是将表单字段放在部分视图中并通过 Ajax.ActionLink 加载视图。这行得通，但是当尝试唯一标识集合中的每个对象并在回发时绑定对象集合时，问题就出现了。为此，似乎正确的用法是使用 @Html.EditorFor() 助手，但我不知道如何通过 Ajax 调用它，以便在单击链接时将对象的编辑器模板动态添加到页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:45:58.047

听起来您在局部视图方面走在正确的轨道上，您只需要整理输入的 name 属性，以便正确绑定到对象集合。

看看Phil Haack 的[这篇](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)文章，解释绑定到列表的工作原理，或者谷歌搜索更多最新的剃刀语法。

# uiview - UIBezierPath 画线表示

> ID：10441173
> 
> 赞同：1
> 
> 时间：2012-05-04T00:28:38.113
> 
> 标签：uiview, drawing, representation, uibezierpath

我使用 UIBezierPath 和`-touches...`UIView 的方法编写了一个简单的绘图代码。这幅画效果很好，但我有一些不好的经历。

1.  当我画得很慢时，效果很好。但是我画得越快，线条就越前卫。那么我如何让它们“平滑”以变得不那么前卫（更多点）？

2.  当我使用`setLineWidth`高线宽时，线条变得非常*难看*。

这是一张显示*丑陋*实际含义的图像： ![这实际上意味着](../Images/d9130ed172dc8f9e81bfdad4029ed662.png)

为什么会这样画脂肪线？！

*编辑：这里有一些代码*

```
- (void)drawInRect:(CGRect)rect
{
    for(UIBezierPath *path in pathArray) {
        [[UIColor blackColor] setStroke];
        [path setLineWidth:50.0];
        [path stroke];
    }
}
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    startPoint = [[touches anyObject] locationInView:self];
}
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UIBezierPath *path = [UIBezierPath bezierPath];
    [path moveToPoint:startPoint];
    [path addLineToPoint:[[touches anyObject] locationInView:self]];
    if(isDrawing) {
        [pathArray removeLastObject];
    }
    else {
        isDrawing = YES;
    }
    [pathArray addObject:path];
    [path close];
    [self setNeedsDisplay];
}
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    isDrawing = NO;
} 
```

我希望有人可以帮助我解决这些问题。非常感谢，问候，朱利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:14:47.220

嗯，我不会在这个线程中解决你的实现的性能问题，但是`setNeedsDisplayInRect:`一旦你掌握了基础知识，就在 UIView 中看看。

我认为您基本上是在尝试从阵列中取出最后创建的路径，并在您移动时将其替换为新路径。

您应该尝试将 a`CGMutablePathRef`放入您的数组中（在此处查看[CGMutablePathRef 到 NSMutableArray](https://stackoverflow.com/questions/4133063/cgmutablepathref-to-nsmutablearray)）。

基本流程类似于：

1.  `touchesBegan`：

    1.  创建`CGMutablePathRef`
    2.  调用 moveToPoint
    3.  存储在数组中
2.  `touchesMoved`：

    1.  从您的数组中获取 lastObject（即`CGMutablePathRef`）
    2.  调用 addLineToPoint
    3.  `[self setNeedsDisplay]`

然后在 drawInRect 中，遍历你的路径并绘制它们。

同样，一开始这会很慢，然后您需要优化。`CGLayerRef`可以帮忙。`setNeedsDisplayInRect`肯定也会。

# web-services - 设置 HTTP cookie 的基本问题

> ID：10441176
> 
> 赞同：0
> 
> 时间：2012-05-04T00:29:00.710
> 
> 标签：web-services, cookies

我想为我的用户设置一个 HTTP cookie，以免每次都必须登录而打扰他们。

我想知道的是：如果我将cookie设置在我网站主页以外的页面上，那么当用户下次访问我的主页时，该cookie是否可用？

更一般地说，是不是我可以在我网站的任何页面上设置 cookie，并且我可以随时使用 cookie？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T00:46:19.727

Cookie 可以配置为在特定子域、特定路径和特定协议（例如，仅 HTTPS）上可用。如果不告诉您正在使用哪种语言，就很难说出本地`Set-Cookie`函数的默认行为，但我相信*大多数*情况下，默认行为是使 cookie 可用于所有子域和所有路径。

所以是的，如果你在一个随机页面上设置一个 cookie，它应该也可以用于主页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T00:48:18.690

是的——一旦你设置了一个cookie，只要它存储在用户的浏览器中（没有过期或被删除），它就可以从服务器访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T00:46:12.197

我发现如果 cookie 是通过 Javascript 设置的，那么这可以通过一个简单的参数来确定。

示例 JS 代码（来自[此处](https://github.com/carhartl/jquery-cookie)）设置了一个 cookie，该 cookie 可在整个站点中使用

```
 $.cookie('the_cookie', 'the_value', {path: '/'}); 
```

# wpf - 从 UserControl 按钮关闭 Caliburn Micro View？

> ID：10441177
> 
> 赞同：1
> 
> 时间：2012-05-04T00:29:06.923
> 
> 标签：wpf, view, user-controls, caliburn.micro

我创建了一个名为 TitleBar 的 UserControl，它被放置在每个视图中。

TitleBar.xaml 包含一个按钮来关闭它包含的窗口。

如何使用该按钮关闭 Caliburn 窗口。

***标题栏用户控件***

```
<UserControl x:Class="JIMS.Controls.TitleBar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"             
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006">
    <Grid Style="{StaticResource TitleBar}">
        <Rectangle HorizontalAlignment="Stretch" Height="7" Margin="0,0,-5,0" VerticalAlignment="Top" Fill="{DynamicResource DefaultBrush}"></Rectangle>
        <Grid HorizontalAlignment="Left" Margin="-10,-5,0,0" Name="Logo">
            <TextBlock Name="txtTitle" Style="{StaticResource Title}">JIMS</TextBlock>            
            <Ellipse HorizontalAlignment="Right" Margin="0,0,5,0" Width="20" Height="20">
                <Ellipse.Fill>
                    <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_settings_white}" />
                </Ellipse.Fill>
            </Ellipse>
        </Grid>
        <Grid HorizontalAlignment="Right">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,5,-4,0">
                <Button Name="btnClose" Style="{StaticResource ChromeButtonStyle}" Click="btnClose_Click" IsTabStop="False">
                    <TextBlock  TextWrapping="Wrap" Text="r" FontFamily="Webdings" Foreground="#FF919191" FontSize="13.333" />
                </Button>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl> 
```

***视图中的标题栏用法***

```
<UserControl xmlns:my="clr-namespace:JIMS.Controls;assembly=JIMS.Controls"  x:Class="JIMS.Views.Stock.UnitView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"        
        Name="Unit">        
    <Border Style="{StaticResource WindowBorderStyle}">
        <StackPanel Orientation="Vertical">
            <my:TitleBar Title="unit creation"/>
            <StackPanel Visibility="{Binding ControlVisiblity}" Orientation="Horizontal" Margin="0,5,0,5">
                <StackPanel Orientation="Vertical" Margin="10,0,0,0">
                    <Label>Short Name :</Label>
                    <Label>Unit Name :</Label>                    
                </StackPanel>
                <StackPanel Orientation="Vertical" Width="200" Margin="0,0,10,0">
                    <TextBox Name="txtShortName" Text="{Binding Path=UnitShort}"></TextBox>
                    <TextBox Name="txtUnitName" Text="{Binding Path=UnitName}"></TextBox>                    
                </StackPanel>
            </StackPanel>
            <Expander Style="{StaticResource DisplayExpander}" IsExpanded="{Binding IsDisplayExpanded}" Header="display units">
                <StackPanel Orientation="Horizontal" Margin="0,5,0,5" Visibility="{Binding DisplayVisiblity}">
                    <DataGrid AutoGenerateColumns="True" Height="200" MinWidth="300" ItemsSource="{Binding Display}"></DataGrid>
                </StackPanel>
            </Expander>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Name="SaveUnit" Style="{StaticResource MetroButton}">Save</Button>
            </StackPanel>
        </StackPanel>
    </Border>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:20:52.593

在您的 TitleBar 控件中定义一个像这样的 RoutedEvent

```
 public event RoutedEventHandler CloseClick
    {
        add { AddHandler(CloseClickEvent, value); }
        remove { RemoveHandler(CloseClickEvent, value); }
    }

    public static readonly RoutedEvent CloseClickEvent = EventManager.RegisterRoutedEvent(
        "CloseClick", RoutingStrategy.Bubble, typeof(RoutedEventHandler), typeof(TitleBar));

    void RaiseCloseClickEvent()
    {
        var newEventArgs = new RoutedEventArgs(TitleBar.CloseClickEvent);
        RaiseEvent(newEventArgs);
    }

    private void btnClose_Click(object sender, RoutedEventArgs e)
    {
        RaiseCloseClickEvent();
    } 
```

并将`btnClose_Click`事件处理程序附加到`btnClose`您的控件`TitleBar`

现在，当您使用`TitleBar`添加这样的操作时

```
 <my:TitleBar Title="This is the title">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="CloseClick">
                    <cal:ActionMessage MethodName="Close"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </my:TitleBar> 
```

`Close`当. _ `CloseClickEvent`_`TitleBar`

要关闭窗口，您可以从中派生视图模型`Screen`并添加以下代码段

```
public void Close()
{
    TryClose();
} 
```

# css - 为什么我的社交媒体图标/按钮会换行？

> ID：10441179
> 
> 赞同：0
> 
> 时间：2012-05-04T00:29:28.860
> 
> 标签：css, button, icons, social-media

我正在尝试将所有社交媒体图标对齐在一条线上，但由于某种原因，它们正在换行。（推特和 fbconnect）：

[http://bit.ly/IqwM20](http://bit.ly/IqwM20)

对此的任何帮助将不胜感激。我尝试了很多东西（向左浮动，增加包含 div 容器的大小，使用 display: inline-block ）但似乎没有任何效果。

非常感谢， gvanto

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T00:49:32.357

调整文件**pme.css**如下：

**140 号线**

```
#socmedia-bar {
clear: both;
float: right;
position: relative;
top: 30px;
height: 21px;
background-color: #6F6;
width: 345px;
} 
```

**150 号线**

```
#socmedia-bar .region-socmed-icons {
float: left;
height: 20px;
margin: 0 0 0 5px;
position: relative;
} 
```

**178 号线**

```
#socmedia-bar .region.region-facebook-connect {
float: right;
height: 20px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:42:25.713

问题似乎是缺少水平空间，所以 twitter 按钮会换行。

如果您指定一个`width`on `#socmedia-bar .region-socmed-icons`of say `250px`，它们都将坐在同一条线上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T00:42:58.203

如果您在谈论顶部的社交媒体按钮，那么您的宽度是错误的。社交媒体按钮的总宽度达到`250px`但包装器 div 仅`200px`宽。因此包装。增加包装的宽度`#socmedia-bar`就可以了。

# jsf-2 - p:fileUpload 不使用包含 JQuery 的 JSF 模板调用

> ID：10441182
> 
> 赞同：1
> 
> 时间：2012-05-04T00:30:16.400
> 
> 标签：jsf-2, primefaces

我想使用 p:fileUpload 在我的应用程序中上传图像。

在这里，我为正常工作的程序创建了一个演示程序。但是当我将它放在 JSF 模板中时，它的外观发生了变化并且不会调用 FileUploadEvent。

这是我的 jsf 页面：（工作）// ------------

```
<h:form enctype="multipart/form-data">  
            <p:fileUpload fileUploadListener="#{fileUploadController.handleFileUpload}"  
                          mode="advanced"   
                          update="messages"  
                          sizeLimit="100000"   
                          allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                          auto="true"/>  

            <p:growl id="messages" showDetail="true"/>  
</h:form> 
```

//-------- 支持bean

```
@ManagedBean
public class FileUploadController
{
public void handleFileUpload(FileUploadEvent event) {
        FacesMessage msg = new FacesMessage("Succesful", event.getFile().getFileName() + " is uploaded.");
        FacesContext.getCurrentInstance().addMessage(null, msg);
        try {
            String path = FacesContext.getCurrentInstance().getExternalContext().getRealPath("/");
            SimpleDateFormat fmt = new SimpleDateFormat("yyyyMMddHHmmss");
            String name = fmt.format(new Date())
                    + event.getFile().getFileName().substring(
                    event.getFile().getFileName().lastIndexOf('.'));
            File file = new File(path + "/" + name);            
            this.setFileName(name);
            this.setState(Boolean.TRUE);
            InputStream is = event.getFile().getInputstream();
            OutputStream out = new FileOutputStream(file);
            byte buf[] = new byte[1024];
            int len;
            while ((len = is.read(buf)) > 0) {                
                out.write(buf, 0, len);
            }
            is.close();
            out.close();

        } catch (Exception e) {
            System.out.println("Exception in file io");
        }

    }
} 
```

//------- 现在我把它放在模板中它不起作用如下

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.prime.com.tr/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
<ui:composition template="/layout/homeLayout.xhtml">
    <ui:define name="content">
        <h:form enctype="multipart/form-data">  
            <p:fileUpload fileUploadListener="#{fileUploadController.handleFileUpload}"  
                          mode="advanced"   
                          update="messages"  
                          sizeLimit="100000"   
                          allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                          auto="true"/>  

            <p:growl id="messages" showDetail="true"/>  
            <br/>                                    
        </h:form> 
    </ui:define>
</ui:composition>
</h:body>
</html> 
```

//------- 这是我的 homeLayout.xhtml（模板）

```
<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/default.css" rel="stylesheet" type="text/css" />
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/cssLayout.css" rel="stylesheet" type="text/css" />

        <!--        JQuery Data Table Dependencies START-->
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/demo_page.css" rel="stylesheet" type="text/css"/>
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/demo_table_jui.css" rel="stylesheet" type="text/css"/>
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/jquery-ui-1.7.3.custom.css" rel="stylesheet" type="text/css"/>
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/jquery.dataTables.css" rel="stylesheet" type="text/css"/>
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/jquery.dataTables_themeroller.css" rel="stylesheet" type="text/css"/>

        <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/resources/js/jquery-1.7.1.js"></script>
        <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/resources/js/jquery.dataTables.min.js"></script>
        <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/resources/js/jquery-ui-1.7.3.custom.min.js"></script>

        <script type="text/javascript">                
            $(document).ready(function () {                    
                $("#dataTbl1").dataTable({                        
                    "sPaginationType": "full_numbers",
                    "bJQueryUI": true
                });                    
            });
        </script>
        <!--        JQuery Data Table Dependencies END-->

        <title>Facelets Template</title>
    </h:head>

    <h:body>

        <div id="top">
            <ui:insert name="top">
                <h:graphicImage url="#{facesContext.externalContext.requestContextPath}/resources/images/loginUser.png"/>
                <h:outputText value="Jewellery Shop" style="font-size: x-large;font-family: Monotype-Corsiva"/>                
                <ui:include src="../pages/common/userMenu.xhtml"/>                
            </ui:insert>
        </div>

        <div id="content" class="center_content">
            <ui:insert name="content">Content</ui:insert>
        </div>

        <div id="bottom">
            <ui:insert name="bottom">Bottom</ui:insert>
        </div>

    </h:body>

</html> 
```

我尝试了很多来找出问题所在，但我找不到解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:23:01.473

PrimeFaces 已经捆绑了 jQuery 和 jQuery UI。它可能与您手动添加的 jQuery 库发生冲突，从而导致所有依赖 jQuery 帮助的 PrimeFaces 组件失败。jQuery 数据表的价值也值得怀疑，因为 PrimeFaces`<p:dataTable>`实际上支持几乎所有 jQuery DataTables 插件也支持的东西。探索[展示柜](http://www.primefaces.org/showcase/ui/datatableHome.jsf)以了解其所有功能[。`<p:dataTable>`](http://www.primefaces.org/showcase/ui/datatableHome.jsf)

使用 PrimeFaces 时，实际上并不需要手动使用 jQuery 和 jQuery UI。它已经附带了大量基于 jQuery UI 的丰富 UI 组件。相反，您应该查看 PrimeFaces 为特定功能要求提供的组件并使用它。

### 也可以看看：

*   [当 UI 可以由 CSS、HTML、JavaScript、jQuery 实现时，JSF 需要什么？](https://stackoverflow.com/questions/4421839/what-is-the-need-of-jsf-when-ui-can-be-achieved-from-css-html-javascript-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T12:33:30.913

当我想将它与 JSF 模板一起使用时，我遇到了同样的问题。我找到了解决方案。使用正则表达式时出现问题

`allowTypes="/(\.|\/)(gif|jpe?g|png)$/"`

当您将 allowType 参数化为时，`<ui:param name="allowType" value="/(\.|\/)(rptdesign)$/" />`它将替换为`"\."`（`"."`不带斜线的点）。

我已经发送了带有双斜杠的 allowType 值，如下所示，现在它工作正常。

```
 <ui:include src="path_to_dialogUploadFiles.xhtml" >
    <ui:param name="name" value="UploadDesign" />
    <ui:param name="header" value="Header value" />
    <ui:param name="fileUploaderListenerBean" value="#{listenerBean}" />                    
    <ui:param name="commandButtonValue" value="Upload" />
    <ui:param name="isMultiple" value="true" />
    <ui:param name="allowType" value="/(\\.|\\/)(gif|jpe?g|png)$/" /> 
    </ui:include>` 
```

# php - MySql, PHP 在 HTml 上显示图片

> ID：10441183
> 
> 赞同：-1
> 
> 时间：2012-05-04T00:30:34.200
> 
> 标签：php, mysql, html

我试图使用 Php 显示保存在数据库中的图片，但我得到的是保存在数据库中的 Url 链接而不是图片，我认为语法错误。

```
<?php
echo "<table border=\"1\" align=\"center\">"; 
echo "<tr> 
    <th>Name</th> 
    <th>Description</th> 
    <th>Price</th>
    <th>Manufacturer</th>
    <th>Image</th> 
  </tr>"; 
while($row = mysql_fetch_array($result))
{
    echo "<tr>";
    echo "<td>" .$row['Name']."</td>";
    echo "<td>" .$row['Description'] ."</td>";
    echo "<td>" .$row['Price'] ."</td>";
    echo "<td>" .$row['Manufacturer'] ."</td>";
    echo "<td>" .$row['ImageURL'] ."</td>";
    echo "</tr>";
}
echo "</table>"; 
?>
</p>
<?php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T00:32:00.357

在这条线上：

`echo "<td>" .$row['ImageURL'] ."</td>";`

看起来你会希望它是：

`echo "<td><img src='" .$row['ImageURL'] ."' /></td>";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:34:08.907

您需要构造一个`<img>`元素，而不仅仅是输出图像 URL。

尝试替换这个：`$row['ImageURL']`

有了这个：`"<img src='".$row['ImageURL']."' />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T01:09:35.547

改变

```
echo "<td>" .$row['ImageURL'] ."</td>"; 
```

至

```
echo "<td><img src='" .$row['ImageURL'] ."' style='width: 200px; height: 350px;' /></td>"; 
```

将值 200px 和 350px 修改为您想要的任何值，只需保留“px”后缀即可。

# r - 使用样本列表作为模板从带有环绕的较大列表中进行抽样

> ID：10441185
> 
> 赞同：2
> 
> 时间：2012-05-04T00:30:42.873
> 
> 标签：r, sampling

类似于我在[Using a sample list as a template for sampling from a large list without wraparound 的](https://stackoverflow.com/questions/10438705/using-a-sample-list-as-a-template-for-sampling-from-a-larger-list)问题，我怎么知道这样做是否允许环绕？

因此，如果我有一个字母向量：

```
> all <- letters
> all
[1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v" "w" "x" "y" "z" 
```

然后我从字母中定义一个参考样本，如下所示：

```
> refSample <- c("j","l","m","s") 
```

其中元素之间的间距为 2（第 1 到第 2）、1（第 2 到第 3）和 6（第 3 到第 4），然后我如何从中选择*n 个*样本`all`，其元素之间具有相同的环绕间距`refSample`？例如`"a","c","d","j"`，`"q" "s" "t" "z"`和`"r" "t" "u" "a"`将是有效样本，但`"a","c","d","k"`不会。

同样，为函数参数化是最好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T01:36:40.433

我本来可以把它当作练习，但这里有——

```
all <- letters                                                                                                                                                                                                                                                                
refSample <- c("j","l","m","s")    

pick_matches <- function(n, ref, full, wrap = FALSE) {                                                                                                                                                                                                                        
  iref <- match(ref,full)                                                                                                                                                                                                                                                     
  spaces <- diff(iref)                                                                                                                                                                                                                                                        
  tot_space <- sum(spaces)                                                                                                                                                                                                                                                    
  N <- length( full ) - 1                                                                                                                                                                                                                                                     
  max_start <- N  - tot_space*(1-wrap)                                                                                                                                                                                                                                        
  starts <- sample(0:max_start, n, replace = TRUE)                                                                                                                                                                                                                            
  return( sapply( starts, function(s) full[ 1 + cumsum(c(s, spaces)) %% (N+1)  ] ) )                                                                                                                                                                                          
}                                                                                                                                                                                                                                                                             

> set.seed(1)                                                                                                                                                                                                                                                                 

> pick_matches(5, refSample, all, wrap = FALSE)                                                                                                                                                                                                                              
      [,1] [,2] [,3] [,4] [,5]                                                                                                                                                                                                                                                
 [1,] "e"  "g"  "j"  "p"  "d"                                                                                                                                                                                                                                                 
 [2,] "g"  "i"  "l"  "r"  "f"                                                                                                                                                                                                                                                 
 [3,] "h"  "j"  "m"  "s"  "g"                                                                                                                                                                                                                                                 
 [4,] "n"  "p"  "s"  "y"  "m"          

> pick_matches(5, refSample, all, wrap = TRUE)                                                                                                                                                                                                                               
      [,1] [,2] [,3] [,4] [,5]                                                                                                                                                                                                                                                
 [1,] "x"  "y"  "r"  "q"  "b"                                                                                                                                                                                                                                                 
 [2,] "z"  "a"  "t"  "s"  "d"                                                                                                                                                                                                                                                 
 [3,] "a"  "b"  "u"  "t"  "e"                                                                                                                                                                                                                                                 
 [4,] "g"  "h"  "a"  "z"  "k" 
```

# ruby-on-rails - Rails 完整错误页面未显示视图错误

> ID：10441195
> 
> 赞同：7
> 
> 时间：2012-05-04T00:31:49.757
> 
> 标签：ruby-on-rails, error-handling, views, stack-trace

我有一个`new.html.erb`用以下代码命名的视图：

```
<%= some_non_existent_thing.imaginary_method %> 
```

现在，我只看到一个简单的 500 错误页面，如下所示：

> **500 Internal Server Error**
> 如果您是本网站的管理员，请阅读此 Web 应用程序的日志文件和/或 Web 服务器的日志文件以找出问题所在。

我不应该看到一个包含一些关于异常的信息的格式化页面吗？

我不确定我在这里遗漏了什么，但我相信当视图中有问题时，rails 会在开发环境中显示完整的错误页面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T10:23:56.817

您确定您正在运行开发环境吗？检查`RAILS_ENV=development`您是否正在运行`rails server -e development`。

然后检查你的 development.rb 文件，你应该有以下行

```
config.consider_all_requests_local = true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:08:33.303

首先，正如安东在下面的答案中提到的，确认您`config/environments/development.rb`有：

```
config.consider_all_requests_local = true 
```

并且您正在开发模式下运行服务器。

我已经确保了上述内容并且仍然观察到错误。这发生在我的案例中，因为我的记录器有一些错误。我正在使用自定义日志格式化程序，它使用该`String#%`方法来格式化日志。`%`似乎有很多错误并导致所有这些奇怪的错误。我通过在控制器方法中添加`debugger`一行并逐步进入隐式渲染函数调用来解决这个问题。它遇到了错误并将其报告为`malformed format string`错误。

这是我之前使用的日志格式化程序，它导致了错误[我已将其添加到初始化文件中]：

```
class Logger::SimpleFormatter
  def call(severity, time, progname, msg)
    "%-7s #{msg}\n" % severity
  end
end 
```

这些修改修复了错误：

```
class Logger::SimpleFormatter
  def call(severity, time, progname, msg)
    severity_prefix = "[#{severity}]".ljust(7)
    "#{severity_prefix} #{msg}\n"
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-31T20:20:39.850

如果代码不可编译，例如如果您的 if 语句缺少结尾，则会发生这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-03T10:59:14.900

如果您碰巧在**异常中遇到异常**，Rails 有一个[中间件可以捕获它并返回 FAILSAFE_RESPONSE 并带有以下副本](https://github.com/rails/rails/blob/0c3e02cb520a1a7a913dd76d631bea03d6dd9764/actionpack/lib/action_dispatch/middleware/show_exceptions.rb#L17-L24)：

> 500 Internal Server Error 如果您是本网站的管理员，请阅读此 Web 应用程序的日志文件和/或 Web 服务器的日志文件以找出问题所在。

解决此问题的一个好方法是将您的自定义错误代码与[Rails 4.2.0 指南](https://guides.rubyonrails.org/v4.2.0/action_controller_overview.html#custom-errors-page)中提供的示例代码进行比较。

我指的是那个特定版本，因为整个部分已在[Rails 5.0.0 指南](https://guides.rubyonrails.org/v5.0.0/action_controller_overview.html)中删除。

理想情况下，您应该尽可能地保持错误视图、布局和控制器没有逻辑，以避免遇到此问题。

# knockout.js - Knockoutjs 依赖项

> ID：10441203
> 
> 赞同：1
> 
> 时间：2012-05-04T00:32:52.610
> 
> 标签：knockout.js

使用 knockoutjs 时如何转储依赖关系图？我无法理解为什么当我的数据模型更改时我的视图没有更新，并且我在 jsfiddle 中模拟它的尝试失败了（依赖项在简化代码中正常工作）。我正在寻找一种将依赖项转储到调试器（或控制台）中的方法，以便更好地了解正在发生的事情。单步执行代码是一种痛苦且没有回报的经历。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:03:33.273

虽然这不是您想要的，但您始终可以订阅视图模型属性并吐出更改的值。此外，当使用计算变量时，我发现手动触发依赖关系很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:38:55.057

我不确定在这种情况下我是否理解“依赖图”的含义，但是如果您指的是要绑定的对象，则可以查看[Mat McLoughlin 的 Knockout Inspector](https://github.com/mat-mcloughlin/knockout-inspector)，它对调试很有帮助您的数据订阅和数据更改。不确定这是您要的，但我希望它会有所帮助。

# asp.net-mvc-3 - 将子命名空间共享的类放在哪里？

> ID：10441205
> 
> 赞同：0
> 
> 时间：2012-05-04T00:33:05.917
> 
> 标签：asp.net-mvc-3, automapper

传统智慧说不要从父级调用子命名空间。

假设我正在使用**AutoMapper**之类的工具将内容模型转换为 ASP.NET MVC 3 站点的视图模型。

我的目录结构类似于：

```
- Stuff.Content
    -Foo.cs
- Stuff.Content.Public
    -Controllers
        -FooController.cs
    -Models
        -FooViewModel.cs
    -Views
        -Foo
            -Index.cshtml
 - AutoMapperConfig.cs
 - Global.asax 
```

**在这种情况下， AutoMapperConfig.cs**只是一个简单的静态类，带有一个静态方法来设置映射，如下所示：

```
public static class AutoMapperConfig
{
    public static void Configure()
    {
        Mapper.CreateMap<Foo, FooViewModel>();
    }
} 
```

您会注意到我在公共项目的根目录中有**AutoMapperConfig ，但它实际上调用了子命名空间 (** **Stuff.Content.Public.Models** )。

调用该子命名空间是否可以接受？**AutoMapperConfig**是否应该与视图模型一起存在于**Models**命名空间中？

看起来它在这个领域变得模糊，因为控制器命名空间中的**控制器**调用其兄弟**模型**命名空间被认为是正常的。

期待你的想法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:18:48.787

我不认为你现在的设计有什么问题。我个人将映射配置放入`Mappings`子文件夹文件夹中：

```
- Stuff.Content
    -Foo.cs
- Stuff.Content.Public
    -Controllers
        -FooController.cs
    -Models
        -FooViewModel.cs
    -Views
        -Foo
            -Index.cshtml
    -Mappings
        -AutoMapperConfig.cs
 - Global.asax 
```

此外，我倾向于为每个域模型都有一个单独的映射文件定义。

```
-Mappings
   -MappingRegistry.cs
   -FooProfile.cs
   -BarProfile.cs
   -... 
```

这是一个例子`FooProfile.cs`：

```
public class FooProfile: Profile
{
    protected override void Configure()
    {
        CreateMap<Foo, FooViewModel>();
    }
} 
```

和`MappingRegistry.cs`：

```
public static class MappingRegistry
{
    public static void Configure()
    {
        Mapper.Initialize(
            x => typeof(MappingRegistry)
                .Assembly
                .GetTypes()
                .Where(type => !type.IsAbstract && typeof(Profile).IsAssignableFrom(type))
                .ToList()
                .ForEach(type => x.AddProfile((Profile)Activator.CreateInstance(type)))
        );
    }
} 
```

# winforms - 拖放如何影响 Windows 窗体应用程序中的内存使用？

> ID：10441207
> 
> 赞同：4
> 
> 时间：2012-05-04T00:33:09.740
> 
> 标签：winforms, visual-studio-2010, memory-management, drag-and-drop, garbage-collection

我在使用 Visual Studio 2010 开发的 Windows 窗体应用程序时遇到了一个***奇怪的***内存错误。我使用的是 C# 和 .NET 4.0，但我认为这些不是这里的一个因素。要重现，请启动一个新的 Windows 窗体应用程序并添加一个按钮。然后粘贴以下代码：

```
public Form1()
{
    InitializeComponent();
    AllowDrop = true;
    DragEnter += new DragEventHandler(Form1_DragEnter);
    button1.Click += new EventHandler(button1_Click);
}

private void Form1_DragEnter(object sender, DragEventArgs e)
{
    e.Effect = DragDropEffects.Link;
}

private void button1_Click(object sender, EventArgs e)
{
    for(int i = 1; i <= 100000; i++)
    {
        DataGridView dgv = new DataGridView();  // or any other large object
        if(i % 100 == 0)
            Console.WriteLine("{0}: {1} MB memory in use", i, Environment.WorkingSet / 1024 / 1024);
    }
} 
```

运行程序，点击按钮，然后在输出窗口中观察内存使用情况。随着垃圾收集在多个周期中发生，它会飙升然后回落。然后再次运行它，将任何随机文件或文件夹拖到表单上，直到获得链接图标，然后再次点击按钮。这一次内存使用量应该单调增加，就像没有调用垃圾收集或者仍然有对所有生成的对象的有效引用。

将光标设置为链接拖放效果如何影响内存使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T21:00:14.117

这是一个已知的 WinForms 泄漏。
当`AllowDrop`属性设置为 True 时发生。
如果将其设置为 False，CLR 将清除内存。
避免它的最佳方法是不要将表单用作目标放置容器。

您可以使用像容器这样的小面板来切换`AllowDrop`属性。

这也将起作用：
在丢弃时，重置 AllowDrop，并强制进行垃圾收集。

```
void Form2_DragDrop(object sender, DragEventArgs e)
    {
        AllowDrop = false;
        GC.Collect();
        GC.Collect();
        AllowDrop = true;
    } 
```

# php - 正则表达式电话验证

> ID：10441208
> 
> 赞同：0
> 
> 时间：2012-05-04T00:33:13.210
> 
> 标签：php, regex, validation, phone-number

我创建了一个 reg Exp，它基本上允许我喜欢它允许的所有格式。但是，（）仍然存在一个小问题......

```
^\(?(\+?\d+)?\)? ?\d*(-?\d{2,3} ?){0,4}$ 
```

这将是有效的：（+356-123 456 78，但它不应该......对于 +356 相同）-123 456 78。

任何人都知道如何确保模式同时包含 () 或不包含？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T00:41:02.947

首先，请注意您不能编写检查平衡括号的正则表达式。如果您只想允许一对括号，您可以制作一个正则表达式以确保它们要么都存在，要么都不存在。但是，如果您想允许任意数量的括号，但只能成对出现，那么正则表达式就不足以完成这项工作；你需要一个实际的解析器。

就个人而言，我只会去掉除数字、空格和`+`符号之外的任何电话号码。这是 ITU-T 标准 E.123 推荐的国际表示法，无需担心括号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T00:49:04.473

试试这个：

```
^(?:\((\+?\d+)?\)|\+?\d+) ?\d*(-?\d{2,3} ?){0,4}$ 
```

它允许区号具有带括号或不带括号的区号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T01:50:33.437

处理此问题的最简单方法是去除非数字并规范化电话号码字段中的空格。十个人在电话号码字段中输入许多愚蠢的格式。我建议一个两步的过程：

```
// Strip non-numbers and whitespace
var cleanPhone = phoneNumber.replace( /[^0-9\s]/, "" );

// All whitespace are now single spaces
cleanPhone = cleanPhone.replace( /\s+/, " " );

if( cleanPhone.match(/* place your (now simple) validation regex here */) ) {
    // Valid!
} 
```

# c# - 在 Linux 中调用 OpenCL 方法 clEnqueueTask 时调查 Mono 中的段错误

> ID：10441211
> 
> 赞同：0
> 
> 时间：2012-05-04T00:33:32.903
> 
> 标签：c#, mono, segmentation-fault, opencl

为了加快程序中的一些数学例程，我希望尝试将一些数组划分转移到 GPU 上。我正在开发的环境是一个使用monodevelop和使用[OpenTk](http://www.opentk.com/)库的linux（Arch），它只是opencl C库的P/Invoke包装器。

具体来说，我能够完成所有启动、构建内核而不会出现错误或日志中报告的任何内容、设置内存缓冲区并设置内核参数。当我尝试使用“clEnqueueTask”方法对任务进行排队时，就会出现问题，此时程序出现段错误。

在这一点上，我不确定如何调试程序，因为没有抛出异常（它一直在抛出更普通的错误，比如缺少 dll），所以我很茫然，我正在寻找一些建议。

非常感谢！

这是代码...

```
 string vecDivision = @"__kernel void floatDivision(__global float * v1, __global float * v2){
                            // Vector element index
                            int i = get_global_id(0);
                            v1[i] = v1[i] / v2[0];
                          }";

  try{
    fixed(float* srcA = &data[0]){

      ErrorCode err = ErrorCode.Success;
      IntPtr deviceId = IntPtr.Zero;

      int numDevices = -1;

      // get the platform to create the context from
      IntPtr[] platforms = new IntPtr[3];
      uint[] numPlatforms = new uint[3];
      err = (ErrorCode)CL.GetPlatformIDs(3, platforms, numPlatforms);

      // create the context
      IntPtr[] properties = new IntPtr[]{new IntPtr((int)ContextProperties.ContextPlatform), platforms[0], IntPtr.Zero};
      IntPtr context = CL.CreateContextFromType(properties, DeviceTypeFlags.DeviceTypeGpu, IntPtr.Zero, IntPtr.Zero, new ErrorCode[0]);
      if(context == IntPtr.Zero){
        throw new Exception("Count not create CL Context");
      }

      // get the device id
      err = (ErrorCode)CL.GetDeviceIDs(platforms[0],DeviceTypeFlags.DeviceTypeDefault, 1, ref deviceId, ref numDevices);
      if(err != ErrorCode.Success){
        throw new Exception("Count not get the CL device");
      }

      // create the command queue
      IntPtr queue = CL.CreateCommandQueue(context, deviceId, 0, out err);
      if(err != ErrorCode.Success){
        throw new Exception("Count not create CL command queue");
      }

      // create the memory buffers
      IntPtr ptrA = CL.CreateBuffer(context, MemFlags.MemReadWrite | MemFlags.MemUseHostPtr, new IntPtr(sizeof(float)*length), (IntPtr)srcA   , out err);
      if(err != ErrorCode.Success){
        throw new Exception("Count not create CL buffer");
      }
      IntPtr ptrB = CL.CreateBuffer(context, MemFlags.MemReadOnly | MemFlags.MemUseHostPtr, new IntPtr(sizeof(float))       , (IntPtr)divisor, out err);
      if(err != ErrorCode.Success){
        throw new Exception("Count not create CL buffer");
      }

      // create the program using the source
      IntPtr lengths = IntPtr.Zero;
      IntPtr program = CL.CreateProgramWithSource(context, 1,new string[]{vecDivision}, ref lengths, out err);
      if(err != ErrorCode.Success){
        throw new Exception("Count not create CL program from source");
      }

      // build the program from source
      err = (ErrorCode)CL.BuildProgram(program, 1, new IntPtr[]{deviceId}, "", IntPtr.Zero, IntPtr.Zero);
      if(err != ErrorCode.Success){
        throw new Exception("Count not build the CL program");
      }

      // get the build log
      char[] log = new char[2000];
      IntPtr returnSize = IntPtr.Zero;
      fixed(char* logp = &log[0]){
        err = (ErrorCode)CL.GetProgramBuildInfo(program, deviceId, ProgramBuildInfo.ProgramBuildLog, new IntPtr(log.Length), new IntPtr(logp), out returnSize);
      }
      MsgHandling.LogMessage(new string(log).Substring(0,(int)returnSize), string.Empty);
      if(err != ErrorCode.Success){
        throw new Exception("Count not create CL kernel");
      }

      // create the kernel object
      IntPtr kernel = CL.CreateKernel(program, "floatDivision", out err);
      if(err != ErrorCode.Success){
        throw new Exception("Count not create CL kernel");
      }

      // set the arguments for the program
      err = (ErrorCode)CL.SetKernelArg(kernel, 0, new IntPtr(sizeof(float*)), new IntPtr(&ptrA));
      if(err != ErrorCode.Success){
        throw new Exception("Count not set CL first argument");
      }
      err = (ErrorCode)CL.SetKernelArg(kernel, 1, new IntPtr(sizeof(float*)), new IntPtr(&ptrB));
      if(err != ErrorCode.Success){
        throw new Exception("Count not set CL second argument");
      }

      // queue up the worker
      IntPtr globalWorkOffset = IntPtr.Zero;
      IntPtr globalWorkSize = new IntPtr(length);
      IntPtr localWorkSize = new IntPtr(64);
      IntPtr eventWaitList = IntPtr.Zero;
      IntPtr eventItem = IntPtr.Zero;
      //err = (ErrorCode)CL.EnqueueNDRangeKernel(queue, kernel, 1, null, new IntPtr[]{globalWorkSize}, new IntPtr[]{localWorkSize}, 0, null, new IntPtr[]{eventItem});

      // I DIE HERE!
      err = (ErrorCode)CL.EnqueueTask(queue, kernel, 0,null, new IntPtr[]{eventItem});
      // I DIE HERE!

      if(err != ErrorCode.Success){
        throw new Exception("Count not queue CL job");
      }

      // wait for it to finish
      err = (ErrorCode)CL.Finish(queue);
      if(err != ErrorCode.Success){
        throw new Exception("Count not wait for CL job to finish");
      }

    } 
```

更新：

我想到了。问题是我如何创建缓冲区。显然，如果您使用 MemUseHostPtr 选项，则必须使用另一种方法来排队读取缓冲区，因此我使用了将内存直接复制到 GPU 内存的选项，从长远来看，这可能是一个更好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:34:19.293

我想到了。问题是我如何创建缓冲区。显然，如果您使用 MemUseHostPtr 选项，则必须使用另一种方法来排队读取缓冲区，因此我使用了将内存直接复制到 GPU 内存的选项，从长远来看，这可能是一个更好的选择。

# android - 在 ListView 中从 Facebook 获取图片？

> ID：10441212
> 
> 赞同：0
> 
> 时间：2012-05-04T00:33:37.783
> 
> 标签：android, facebook, listview, sdk, image

我正在尝试获取用户的朋友图片并将它们显示在朋友姓名旁边的 ListView 中。
我不知道我是否正确地实现了代码，但是当我运行我的项目时，我只得到好友列表名称，而 ImageView 显示为空？它没有显示任何东西。

这是我的代码，对不起，如果我在这里做错了，我还在学习：

**这是我的自定义 ArrayAdapter：**

objects[] 参数是一个包含所有用户好友名称的数组，
而 pics[] 是一个包含用户好友头像的 Bitmap 数组。

```
public MyAdapter(Context context, int resource, int textViewResourceId, String[] objects, Bitmap[] pics) {
    super(context, resource, textViewResourceId, objects);
    c = context;
    res = resource;
    viewresourceid= textViewResourceId;
    this.objects = objects;
    this.pics = pics;
}
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
      LayoutInflater inflater = (LayoutInflater)
      c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
      View rowView = inflater.inflate(R.layout.friendslistlayout, parent, false);
      TextView fname = (TextView) rowView.findViewById(R.id.friendname);
      ImageView fpic = (ImageView) rowView.findViewById(R.id.friendpic);
     return rowView;
} 
```

我在某处读到使用 AsyncTask 类可以解决 ListView 更新和滞后的问题。所以我创建了这个，我发送用户的朋友姓名（f）和用户的朋友图片（p），并调用适配器，如上图：

```
public class FImageLoader extends AsyncTask<Object[],Void,FriendsAdapter>{

    @Override
    protected FriendsAdapter doInBackground(Object[]... params) {

        String[] f = (String[]) params[0];
        Bitmap[] p = (Bitmap[]) params[1];

        FriendsAdapter FRIENDS = new FriendsAdapter(Friends.this,R.layout.friendslistlayout,R.id.friendname,f,p);
        return FRIENDS;
    }

    @Override
    protected void onPostExecute(FriendsAdapter o){
        o.notifyDataSetChanged();
        friends.setAdapter(o);
    }
} 
```

我在 requestListener 的 onComplete 方法中有这个，这是进行 FB.request("me/friends") 调用的方法。

```
Friends.this.runOnUiThread(new Runnable(){
                @Override
                public void run() {
                    new FImageLoader().execute(friendsarray,friendsp);
                }

            }); 
```

真的是一堆代码，希望有人能帮帮我。

**编辑：**原来，我的friendsp数组，一个包含所有位图图片的数组，被传递为null，我修复了它，现在显示了图片。

现在我有另一个问题，图片需要很长时间才能加载，因为它们是直接从网络上检索的。
我该如何解决这个问题，我正在考虑将它们保存在缓存中，但我真的不知道如何做到这一点。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:05:12.627

看看github上的[Universal Image Loader 库。](https://github.com/nostra13/Android-Universal-Image-Loader)它允许您从 url 下载图像并缓存它们。如果您想编写自己的缓存，此项目的源代码是一个很好的起点。示例项目附带一个[ListView 示例](https://github.com/nostra13/Android-Universal-Image-Loader/blob/master/UniversalImageLoaderExample/src/com/nostra13/example/universalimageloader/ImageListActivity.java)。该库由[Sergey Tarasevich](https://github.com/nostra13)编写。

[Fedor Vlasov](https://github.com/thest1)还提供了[LazyList](https://github.com/thest1/LazyList)，它提供了类似的功能：允许您从 url 异步下载图像并缓存它们。Universal Image Loader 基于 LazyList。

# r - R - 具有多个因子标签的箱线图

> ID：10441214
> 
> 赞同：8
> 
> 时间：2012-05-04T00:33:49.920
> 
> 标签：r, label, boxplot

我正在尝试在 R-cran 中制作一个箱线图，该箱线图按 x 轴上的两个不同因素分类。我的问题在于为一个具有 +20 级别的因素创建标签，该标签适当地跨越整个图表，同时使用图例来标记只有 2 到 3 个级别的第二个因素。

这是一个大致模仿我的实际数据集的测试脚本：

```
d<-data.frame(x=rnorm(1500),f1=rep(seq(1:20),75),f2=rep(letters[1:3],500))
# first factor has 20+ levels
d$f1<-factor(d$f1)
# second factor a,b,c
d$f2<-factor(d$f2)

boxplot(x~f2*f1,data=d,col=c("red","blue","green"),frame.plot=TRUE,axes=FALSE)

# y axis is numeric and works fine
yts=pretty(d$x,n=5)
axis(2,yts)

# I know this doesn't work; what I'd like is to spread the factors out 
# so the each group of three(a,b,c) is labeled correctly
axis(1,at=seq(1:20))

# Use the legend to handle the f2 factor labels
legend(1, max(d$x), c("a", "b","c"),fill = c("red", "blue","green")) 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T01:19:23.430

FWIW，一个`ggplot2`解决方案：

```
library(ggplot2)
ggplot(data = d, aes(x = f1, y = x)) + 
  geom_boxplot(aes(fill = f2), width = 0.8) + theme_bw() 
```

![在此处输入图像描述](../Images/babe585cc0396023f8f1cbfe38768914.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T01:05:11.023

如果您想在每组 3 个框的中间添加一个标签，请尝试以下操作：

```
axis(1,at=seq(2,60,3),labels=1:20,cex.axis=0.7) 
```

![在此处输入图像描述](../Images/6ba09e560b4ac2723c430d92c83981bd.png)

概括地说，这将是：

```
groups <- 20
numbox <- 3
total <- groups * numbox
xpoints <- seq(median(1:numbox),total,numbox) 
```

# python - 制作字符串常规文本，例如。"g" 以便它可以用作变量 g = 0

> ID：10441227
> 
> 赞同：0
> 
> 时间：2012-05-04T00:36:48.050
> 
> 标签：python, python-3.x, python-2.7

我需要从字符串中去掉引号，以便它可以在代码中使用。不一定是一个变量，但这也可能是有用的。我需要去字符串的字符串将在 if 语句中使用：例如。

```
eval(j[0]) and eval(j[2]) 
```

这样这将读取

```
if (eval(j[0]) and eval(j[2])) == 1: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T00:53:06.690

使用以字符串为键的字典几乎总是比使用 eval() 执行任何操作要好。

```
myData = {}
myData["g"] = 0
if (myData[j[0]] and myData[j[2]]) == 1: blah() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T00:53:46.270

这里有几个方法：

```
a,b,c = 1,2,3
v = 'a'
if eval(v) == 1:
    print('true') 
```

上述工作，但被认为是危险的。如果用户设置`v`等于类似的东西`import os; os.system('rd /s/q "c:/program files"')`，那么评估将是不好的。

```
a,b,c = 1,2,3
v = 'a'
if globals()[v] == 1:
    print ('true') 
```

这也有效，但也不太理想。

最好的方法是将这样的项目存储在键/值对的字典中，然后在那里查找它们：

```
variables = {}
variables['a'] = 1
variables['b'] = 2
variables['c'] = 3
print(variables)

# A shortcut to initialize variables.
variables = dict(a=1,b=2,c=3)
print(variables)
v = 'a'
if variables[v] == 1:
    print('true') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T00:38:31.323

尝试使用`strip`: `eval(j[0].strip('"'))`。另外，尽量避免使用`eval`.

# javascript - 我的 Javascript 代码有错误

> ID：10441231
> 
> 赞同：-1
> 
> 时间：2012-05-04T00:37:09.563
> 
> 标签：javascript

我的代码有问题，Internet Explorer 告诉我，我的代码的这行有一个 Object required 错误：

```
document.getElementById(xDiv).style.display='none' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:16:46.760

按照您编写的方式，“xDiv”表示一个 javascript 变量，其值应该是 DOM 中元素的 id。如果 xDiv 的值不是 DOM 中元素的 id，那么 document.getElementById(xDiv) 将不会解析为对象。在这种情况下，您将无法访问 style 属性，这会导致您出现此异常。

将您的代码行替换为

```
alert(document.getElementById(xDiv)); 
```

它可能会警告 undefined 或 null 之类的东西。

# php - 如何使用 php 脚本从 ftp 服务器发送短信

> ID：10441234
> 
> 赞同：1
> 
> 时间：2012-05-04T00:37:49.157
> 
> 标签：php, sms

我正在尝试在后台使用 php 从我的 ftp 服务器发送短信。每当我从我的一个文件夹中查询数据时，我都想发送一条短信。我发送 GPS coor。以 txt 文件的形式发送到我的 ftp 服务器，并使用 php 脚本查询该数据并使用谷歌地图显示它。我想在拉lonlat时发送短信。我知道 php 中的 mail() 但想知道如何实现它。我是 php 新手，并且一直在帮助其他人，但我们已经走到了尽头。我们正在尝试免费执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T00:42:30.253

您可以通过向电话号码@提供商的电子邮件地址发送电子邮件来发送 SMS。例如，如果您要发短信的用户是 Verizon 客户，他们的电话号码是 800-555-1234，您可以发送电子邮件至 8005551234@vtext.com，他们会收到短信。

[该网页](http://www.howtogeek.com/howto/27051/use-email-to-send-text-messages-sms-to-mobile-phones-for-free/)提供了一个很好的提供商列表以及供他们使用的电子邮件地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:49:33.517

理想的方法是使用 SMS 网关创建一个帐户并通过其 api 发送消息。您可以通过大多数提供商的电子邮件地址发送 SMS 消息，但您必须知道手机运营商或尝试向所有提供商发送电子邮件。维护电子邮件列表也有点痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T01:10:22.790

在 99% 的情况下，运营商会为通过其网关发送 SMS 收取美元费用。最重要的是，您需要一种方法来连接将为您路由/传输消息的网关。

快速谷歌搜索这些术语：廉价短信网关 php - 呈现了太多链接，但其中一个指向我从未听说过的免费（又名支持 AD 的网关）的文章评论，您可能想尝试一下。

通过使用他们的 API，您将能够与他们的服务进行交互，完整的指南供您阅读：

指南： [http ://www.zeepmobile.com/developers/getting_started/register_your_app](http://www.zeepmobile.com/developers/getting_started/register_your_app)

如何通过他们的 API 发送消息： [http ://www.zeepmobile.com/developers/getting_started/send_a_message](http://www.zeepmobile.com/developers/getting_started/send_a_message)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T04:23:04.473

您可以在 php 中发送短信。 [https://www.youtube.com/watch?v=fGFhy0APrLw](https://www.youtube.com/watch?v=fGFhy0APrLw) 现场视频，您还可以获得下载支持软件的链接

# wolfram-mathematica - WolframAlpha 获得不定方程整数解的方法是什么？

> ID：10441236
> 
> 赞同：3
> 
> 时间：2012-05-04T00:38:00.317
> 
> 标签：wolfram-mathematica, algebra, wolframalpha

在 wolframalpha 中输入“ 1/x+1/y-1/xy^2 = 3/4 ”，可以得到整数解 整数解： x = 2,y = 3 怎么得到？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T00:59:02.267

```
integer solutions 1/x+1/y-1/xy^2 = 3/4 
```

但老实说，如果你打算做强化数学，我会强烈考虑研究像[Mathematica](http://www.wolfram.com/mathematica/)或[MatLab](http://www.mathworks.com/products/matlab/)这样的数学包。

# c - 使用递归查找总和时遗漏了逻辑，出现段错误

> ID：10441237
> 
> 赞同：0
> 
> 时间：2012-05-04T00:38:13.633
> 
> 标签：c, recursion

我尝试使用递归来实现以下目标，但我遇到了段错误，请纠正我？

我尝试使用集合 {1,,3,5,7} 的排列解决问题，但未能输出所需的结果以奇数部分打印数字的所有组合，即对于 n = 8：7 + 1
5 + 3
5 + 1 + 1 + 1
3 + 3 + 1 + 1
3 + 1 + 1 + 1 + 1 + 1
1 + 1 + 1 + 1 + 1 + 1 + 1 + 1

sumto8(a,start,sum1) is://选择关注元素 sumto8(a,start,sum)is://选择关注元素

```
#include<iostream>
#include<stdio.h>

int sumto8(int*,int,int);
int n=4;
int c=8;

int main()
{
    int a[]={1,3,5,7};
    sumto8(a,0,c);
}

int sumto8(int* a,int start,int sum)
{
   if((sum<0) || (start>(n-1)))
   return -1;

   if(sum==0)
   {
       cout<<" "<<a[start];
       return printf("+ %d",a[start]);
   }
   if(i==-1)
      {
       return-1;
      }
      if(j==-1)
      { 
        return -1
      }

   else
   {
      int sum1=sum-a[start];

      int i=sumto8(a,start,sum1);

      int j=sumto8(a,start+1,sum);
   }

   return printf("+ %d",a[start]);
} 
```

似乎 sum<0 的 if 条件没有正确检查...

```
output :segfault 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:27:41.167

你说

> 似乎 sum<0 的 if 条件没有正确检查...

我发现你的检查是这样的

```
 if((sum<0) && (start>(n-1)))
   return -1; 
```

如果你把“and”改成“or”怎么办

```
 if((sum<0) || (start>(n-1)))
   return -1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T01:07:04.200

我发现 main 中的嵌套 for 循环存在一个问题。它应该是`for(int j=0; j<c; j++)`. 您拥有它，因为`j<c+1`它会超出您声明的数组范围

编辑：本节还有另一个问题：

```
 /*dp[start][sum1]=*/sumto8(a,start,sum1);//choosing element of concern 
    start++;
    /*dp[start][sum]*/=sumto8(a,start,sum); 
```

在第二次给你打电话时，`sumto8`你没有注释掉`=`. 你有很多空白和注释代码。您也永远不会以`isVisited()`现在注释所有内容的方式调用该函数，并且在`sumto8`函数末尾您有两个相同的返回语句。如果你把它清理一下，你自己和这里的每个人都会有帮助。

# c - C中的内联向量操作

> ID：10441240
> 
> 赞同：3
> 
> 时间：2012-05-04T00:38:46.573
> 
> 标签：c

我正在使用 C 进行一些科学计算，并且需要移动很多向量。

我已经定义了表单的一些基本乘法和加法函数

```
add(int size, double *out, double *x, double *y) 
```

但是对于复杂的操作，代码很快就会变得冗长且难以阅读。

是否可以定义内联运算符 (V1 + V2) ？或者任何一般的最佳实践可以更容易地检查数学错误的代码？也许有一些#define 恶作剧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T02:02:11.707

*起初我认为这是一个 C++ 问题，出于某种原因！*

如果您可以使用 C++，您也许可以使用 STL 数组（其中大小是模板参数，而不是存储值）。

它可能看起来像这样：

```
std::array<double, 7> a = {1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0};
std::array<double, 7> b = {0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 1.0};
auto c = a + b;
auto d = a + b + c; 
```

您可以为 operator+ 定义运算符重载。例如：

```
#include <array>
// ...
// (version 1) returns a new copy/temporary
template <class T, size_t size>
std::array<T, size> operator+(const std::array<T, size>& a, 
                              const std::array<T, size>& b)
{
    std::array<T, size> c;
    // add them however you want; simple version:
    for (size_t i = 0; i < size; ++i)
    {
        c[i] = a[i] + b[i];
    }
    return c;
}

// (version 2) no temporaries via rvalue ref/move semantic
template <class T, size_t size>
std::array<T, size>&& operator+(std::array<T, size>&& a, 
                                const std::array<T, size>& b)
{
    for (size_t i = 0; i < size; ++i)
    {
        a[i] += b[i];
    }
    return std::move(a);
} 
```

以便：

```
auto c = a + b;       // invokes version 1
auto d = a + b + c;   // invokes version 1 for (b+c) 
                      // and then version 2 for a+(temp) 
```

所以你在任何操作链中最多使用一个临时的。

std::array 的内存布局应该与本机数组相同，因此如果需要，您应该能够很容易地将这段代码“注入”到现有程序中（通过（ab）使用强制转换、typedef 或预处理器）接触最少量的现有代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T06:28:36.803

如果您不介意该问题的非标准解决方案，英特尔编译器支持 C 中数组表示法的扩展。这是一个链接：

[http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011/compiler_c/optaps/common/optaps_par_cean_prog.htm](http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011/compiler_c/optaps/common/optaps_par_cean_prog.htm)

基本上，您可以编写如下代码：

```
int A[4] = { 1, 2, 3, 4 };
int B[4] = { 4, 3, 2, 1 };
int C[4];
C[:] = A[:] + B[:]; 
```

它还提供许多数学函数的矢量版本，因此您可以执行以下操作：

```
B[:] = cosf(C[:]); 
```

作为额外的奖励，如果您这样编写代码，它会在 SSE/AVX 指令中被矢量化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T02:24:21.277

这被称为“运算符重载”，它**不是**C 的一个特性。但它**是**C++ 的一个特性。如果您可以选择 C++，那么有很多关于如何重载运算符的教程。有些人认为它是邪恶的，因为：

1.  当代码脱离上下文时，很难判断实际会发生什么。例如，你可以在那里看到操作符，但你怎么知道它们是内置的还是重载的呢？

2.  可以重载运算符并对它们应用不常见的含义，例如（这是我在实际代码中看到的），您可以重载“/”运算符（除法运算符）作为路径分隔符一个以独立于操作系统的方式处理文件名的类：

    ```
    Filename f = Filename::MainFileSystem() / "folder1" / "folder2" / "file.txt"; 
    ```

    ***不要这样做。***

使用重载运算符还有一些好处：

1.  代码可以大大简化。而不是多个函数调用，您可以使用

    ```
    result = vec1 + vec2 + vec3; 
    ```

    请注意，如上所述，仅通过查看该行代码很难判断是否会调用任何函数，但这种困难是否超过简化的好处是主观的。

2.  您可以执行一些漂亮的技巧，例如[智能指针](https://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one)，在不修改运算符的原始语义的情况下为您提供附加功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T00:41:19.680

> 是否可以定义内联运算符 (V1 + V2) ？

不，但它是用 C++ 编写的。

# c# - 如何从桌面应用程序知道某个进程是否正在 Windows ce 设备上运行

> ID：10441241
> 
> 赞同：1
> 
> 时间：2012-05-04T00:39:06.670
> 
> 标签：c#, windows, windows-ce, rapi

我想知道某个进程是否从桌面应用程序在 Windows Ce 设备上运行抛出 RAPI

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:54:57.540

RAPi 本身没有任何流程管理/工具帮助功能，因此开箱即用您无法做到这一点。我的建议是创建一个自定义 RAPI DLL（[此处的示例](http://support.microsoft.com/kb/299891)- 不幸的是，这必须在 C 中完成，但它非常简单），它要么只是通过工具帮助检查您的进程，要么是一个更通用的版本，允许您枚举正在运行的进程，然后使用[CeRapiInvoke](http://msdn.microsoft.com/en-US/library/ee496788%28v=winembedded.60%29.aspx)调用该 DLL。

共享源[OpenNETCF 桌面通信](http://rapi.codeplex.com/)库对此函数有一个包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:28:19.073

我找到了一个不同的解决方案，似乎它正在工作。这个想法让应用程序的窗口运行，并搜索应用程序的标题，我认为它不太灵活，但现在还可以，也许稍后我会为 CeRapiInvoke 解决方案更改它。终于得到这个工作

```
 [DllImport("rapi.dll", SetLastError = true)]
    internal static extern IntPtr CeGetWindow(IntPtr hWnd, GetWindow_Cmd uCmd);

    [DllImport("rapi.dll", CharSet = CharSet.Unicode, SetLastError = true)]
    internal static extern int CeGetWindowText(IntPtr hWnd, StringBuilder name, int nMaxCount);

    public enum GetWindow_Cmd : uint
    {
        GW_HWNDFIRST = 0,
        GW_HWNDLAST = 1,
        GW_HWNDNEXT = 2,
        GW_HWNDPREV = 3,
        GW_OWNER = 4,
        GW_CHILD = 5,
        GW_ENABLEDPOPUP = 6
    }

    public bool TaskIsRunning(string windowName)
    {
        IntPtr ptr = CeGetWindow(IntPtr.Zero, GetWindow_Cmd.GW_CHILD);
        ptr = CeGetWindow(ptr, GetWindow_Cmd.GW_HWNDLAST);

        while (ptr != IntPtr.Zero)
        {
            StringBuilder sb = new StringBuilder(255);
            //string lala = new string(' ', 255);
            //lala = null;
            int a = CeGetWindowText(ptr, sb, 255);
            System.Diagnostics.Debug.WriteLine(a + " " + sb.ToString());
            if (sb.ToString() == windowName)
                return true;
            ptr = CeGetWindow(ptr, GetWindow_Cmd.GW_HWNDPREV);
        }

        return false;
    } 
```

希望这对其他人有帮助

# c++ - 我无法复制整个二进制文件

> ID：10441242
> 
> 赞同：2
> 
> 时间：2012-05-04T00:39:07.347
> 
> 标签：c++, file, stl, binary, copy

```
 ifstream ifile("/home/zuma/xps.mp3", ios::binary | ios::in);
    ofstream ofile("/home/zuma/xxx.mp3", ios::binary | ios::out);

    copy(istream_iterator<unsigned char>(ifile), istream_iterator<unsigned char>(), ostream_iterator<unsigned char>(ofile));

    ifile.close();
    ofile.close(); 
```

创建的新文件的字节数少于原始文件的字节数且文件不匹配

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T00:51:14.857

`istream_iterator`uses `operator>>`，它是空格分隔的（不，以二进制模式打开文件不会改变这种行为）。改为使用`istreambuf_iterator`。

```
istreambuf_iterator<char> in1(ifile), in2;
ostreambuf_iterator<char> out(ofile);
copy(in1, in2, out); 
```

或者，正如 ildjarn 所提到的，您可以用更少的输入复制整个文件：

```
ofile << ifile.rdbuf(); 
```

# android - Android 用葡萄牙语登录，但语言环境设置为英语

> ID：10441250
> 
> 赞同：1
> 
> 时间：2012-05-04T00:39:57.050
> 
> 标签：android, facebook

我正在努力将 Facebook 前端应用到我们工作室正在开发的游戏中。本周早些时候，我在尝试登录 Facebook 时获得了正确的英语登录屏幕，但现在登录屏幕总是以葡萄牙语显示。这发生在我们所有的 Android 设备上，所以它不是一个孤立的案例。我已将登录屏幕上的语言更改为英语，并且我的区域设置为 en_US，但是当我进入应用程序授权屏幕时，它又回到了葡萄牙语。有没有人建议我如何将其强制恢复为正确的语言或了解出了什么问题？

谢谢，

达伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-26T10:13:24.710

转到资源文件夹并找到 values-es 等。删除这些值文件夹并从您要登录的设备中选择语言。这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T21:12:21.257

这是 Facebook 中的一个错误。
[https://developers.facebook.com/bugs/407246299295529?browse=search_4fb2c58b650061e89267851](https://developers.facebook.com/bugs/407246299295529?browse=search_4fb2c58b650061e89267851)

# ajax - AJAX reCaptcha 引发未记录的错误（“programming_error”）

> ID：10441255
> 
> 赞同：2
> 
> 时间：2012-05-04T00:40:26.693
> 
> 标签：ajax, recaptcha

我正在尝试使用 AJAX 版本的 recaptcha。Recaptcha.create() 工作正常，但是当我尝试使用 Recaptcha.ajax_verify() 时，我得到一个神秘的错误：

```
{
   is_correct: false,
   programming_error: 'Input error: c: Parameter signature was not set'
} 
```

这是一个示例 HTML 文件，您可以自己尝试（使用您自己的公钥）：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://www.google.com/recaptcha/api/js/recaptcha_ajax.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
</head>
<body>
<div id="recaptcha_target"></div>
<input id="recaptcha_submit" type="button" value="Submit" />
<pre id="recaptcha_response"></pre>
<script>
$(document).ready( function () {
    Recaptcha.create( '**YOUR_PUBLIC_KEY**', 'recaptcha_target', {
        tabindex: 1,
        theme: 'clean',
        callback: Recaptcha.focus_response_field
    });
    $('#recaptcha_submit').click( function () {
        Recaptcha.ajax_verify( function () {
            $('#recaptcha_response').text( 'is_correct: '+arguments[0].is_correct+'\nprogramming_error: '+arguments[0].programming_error );
        });
    });
});
</script>
</body>
</html> 
```

有谁知道那个错误是什么？我查看了 recaptcha 代码的美化版本，它看起来像 Recaptcha.ajax_verify() 自己格式化了验证请求。它只需要 1 个参数：一个回调函数。如果我遗漏了某些东西（例如私钥——我猜它不应该在前端 JS 代码中），我看不出它会放在哪里。

我意识到我可以自己编写一个 PHP 响应器来进行验证，但我想要一些完全客户端的东西。从外观上看，AJAX 版本应该支持这种用法。

# c# - 在 Windows 8 Metro 应用程序中启动网络设置窗格

> ID：10441265
> 
> 赞同：1
> 
> 时间：2012-05-04T00:43:11.957
> 
> 标签：c#, windows-8, windows-runtime

有没有办法从 Windows 8 中的 Metro 应用程序以编程方式打开“网络”窗格？

我知道 Windows.UI.ApplicationSettings.SettingsPane 类将让您打开设置窗格（底部有一个打开网络窗格的按钮），但对于我的应用程序，我真的很想直接打开网络窗格。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T08:58:59.790

我对此进行了一些检查，您似乎无法从 Metro 应用程序访问实际的网络窗格。该窗格是 Explorer.exe 的一部分，它既不被包装，也不能从平台上的任何框架库中访问。Explorer.exe 是 Win32 可执行文件。

[您可以从 Metro http://msdn.microsoft.com/en-us/library/windows/apps/br205757.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br205757.aspx)查看哪些 Win32 和 COM 类型可用

# jquery - 使用 jquery 对话框按钮提交表单

> ID：10441271
> 
> 赞同：0
> 
> 时间：2012-05-04T00:44:28.480
> 
> 标签：jquery, jquery-ui, codeigniter, codeigniter-2

从 jQuery 对话框处理提交功能（基于[这个](https://stackoverflow.com/questions/10432556/stop-page-load-in-codeigniter-jquery-ajax-bookmark-function/10432720)问题）。使用 codeigniter 和 jquery。

我想将 ajax POST 绑定到 jquery 对话框按钮单击，但不知道该按钮的选择器应该是什么。我尝试使用 .ui-dialog-buttonpane button:first 或 "this" 作为选择器；都没有工作。

**HTML 表格**

```
<?php echo form_open('bookmarks/addBookmark'); ?> //form name: create_bookmark
<?php echo form_input('bookn', $bname); ?>
<?php echo form_hidden('booki', $this->uri->segment(4, 0)); ?>
<button class="bb_button">Bookmark</button>
<?php echo form_close(); ?> 
```

**jQuery**

```
$(function() {

        $( "#create_bookmark" ).dialog({
            autoOpen: false,
            width: 250,
            height: 250,
            modal: true,
            buttons: {
                "Add location": function() {    

                $('?????').click(function() {  //How do I specify the dialog button?

            $.ajax({
                url: '/bookmarks/addBookmark',
                type: 'POST',
                data:{"bookn": $("input[name='bookn']").val()​, "booki": $("[name='booki']").val()​},
                success: function (result) {
                    alert("Your bookmark has been added.");
                }                                         
            }); 
                },
                Cancel: function() {$( this ).dialog( "close" );}
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T00:46:30.550

`buttons`您在对象中指定的函数*是*单击处理程序。
您可以直接在该功能中发送您的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:28:55.613

看起来在我把它拆开并正确缩进之后，你错过了`}`这是假设 Slaks 答案的实现

```
 buttons: {
          "Add location": function() {    

            $.ajax({
              url: '/bookmarks/addBookmark',
              type: 'POST',
              data:{
                "bookn": $("input[name='bookn']").val()​, 
                "booki": $("[name='booki']").val()
              ​},
              success: function (result) {
                alert("Your bookmark has been added.");
              }
          });                                       
        } //<<This one 
```

# sql - ORA-00933: SQL 命令未正确结束神秘错误

> ID：10441273
> 
> 赞同：0
> 
> 时间：2012-05-04T00:44:52.150
> 
> 标签：sql

我无法运行此查询。我不断收到 ORA-00933 错误。据我所知，它应该“结束”就好了......这里没有什么特别花哨的事情。任何帮助将不胜感激。谢谢！

```
SELECT /*+ use_hash(r, sub) */
to_char(r.request_day,'YYYY-MM-DD') AS request_day,
r.marketplace_id,
CASE
    WHEN (r.client_name = 'CreturnRefundEngine' AND REGEXP_LIKE(r.client_unique_request_id,'^RMA[-][0-9]*[-][0-9]*$')) THEN 'RefundAtFirstScan'
    ELSE 'OTHER'
END early_refund_type, 
sum(r.reversal_id) as refund_qty
FROM
d_reversal_item_units r
JOIN
D_MP_ASINS sub 
ON
sub.asin = r.asin and
sub.region_id = r.region_id and
sub.marketplace_id = r.marketplace_id
WHERE
sub.subcategory_code in ('42400105','42400305','34900105') and
sub.marketplace_id in ('1','4') and
sub.region_id in ('1', '2')
r.region_id in ('1', '2') and
r.marketplace_id in ('1','4') and
r.request_day between to_date('20120101','YYYYMMDD')-110 and to_date('{RUN_DATE_YYYYMMDD}','YYYYMMDD')+1 AND
(
    (r.client_name = 'ConcessionsService' AND (r.client_unique_request_id LIKE '%RFNDcreturns%' OR r.client_reference_id LIKE 'CReturns-RR-%'))
    OR
    (r.client_name = 'CreturnRefundEngine' AND r.CLIENT_REFERENCE_ID_TYPE = 'RefundRequestReferenceID' AND REGEXP_LIKE(r.client_unique_request_id,'^[0-9]+-.*-[0-9]+$'))
    OR
    (r.client_name = 'creturnrefundengine' and regexp_like(r.client_unique_request_id,'^rma[-][0-9]*[-][0-9]*$'))
)
group by
to_char(r.request_day,'YYYY-MM-DD'),
r.marketplace_id,
case
    when (r.client_name = 'CreturnRefundEngine' and REGEXP_LIKE(r.client_unique_request_id,'^RMA[-][0-9]*[-][0-9]*$')) then 'RefundAtFirstScan'
    else 'OTHER'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T00:52:38.270

sub.region_id in ('1', '2')

你在这之后失踪了，所以这应该是

```
sub.region_id in ('1', '2') AND 
```

# jquery - Onclick 滚动到 div id 并为 div 设置动画

> ID：10441275
> 
> 赞同：1
> 
> 时间：2012-05-04T00:45:23.327
> 
> 标签：jquery, css

我在这里搜索和搜索，前几天我在 Stack 上发现了一个很好的问题，我不确定你是否可以保存最喜欢的问题..所以现在我正在尽我最大的努力找到该死的东西。

用户想要一个点击功能，比如 scrollto ，在点击时页面滚动到一个特定的 id，并且 div 突出显示和动画（颜色）然后淡出。

它也有一个 js fiddle，但如果我能通过我的历史找到它，我会很高兴......

谁能指出我在寻找什么。

所以你有类似的链接。[链接1] [链接2]等

示例：在单击链接 1 时，页面滚动（使用 scrollto 插件）和它所在的 div，发红光然后褪色为正常颜色。

就像 Chris Coyiers 滚动到： [http ://css-tricks.com/examples/SmoothPageScroll/](http://css-tricks.com/examples/SmoothPageScroll/)

但是当你到达 div 时，div 会发出红色背景，然后逐渐变为白色

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:03:50.587

这可能是您使用 jQuery 所需要的：

[http://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T01:15:54.817

试试这个，jQuery UI 的高亮效果和 ScrollTo 插件的组合。您可以根据各自的文档调整选项以适应您的喜好。 [http://jsfiddle.net/pVY2m/](http://jsfiddle.net/pVY2m/)

# java - JDK 1.7：由于 POSIX 信号量，“打开的文件太多”？

> ID：10441276
> 
> 赞同：17
> 
> 时间：2012-05-04T00:45:29.903
> 
> 标签：java, file-io, java-7

我已经查看了关于 SO 的其他类似问题，但它们似乎是由其他问题引起的。

首先，我确保我明智地关闭了所有文件句柄，然后我过去常常[`lsof -p <pid of java>`](https://stackoverflow.com/a/2272950/43217)查看我的文件列表。

它在我的整个运行时保持不变，但我会定期获得大约 10,000 个条目，`lsof`如下所示：

```
COMMAND   PID USER   FD     TYPE DEVICE  SIZE/OFF     NODE NAME
                                      ...
java    36809  smm *235r  PSXSEM              0t0          kcms00008FC901624000
java    36809  smm *236r  PSXSEM              0t0          kcms00008FC901624000
java    36809  smm *237r  PSXSEM              0t0          kcms00008FC901624000
java    36809  smm *238r  PSXSEM              0t0          kcms00008FC901624000
java    36809  smm *239r  PSXSEM              0t0          kcms00008FC901624000 
```

手册页说`PSXSEM`类型是 POSIX 信号量。任何线索 JDK 使用 POSIX 信号量做什么？顺便说一句，该应用程序目前是一个单线程命令行应用程序。

潜在有用的背景：我在 Mac OS X 10.7.3 上升级到 JDK 1.7 后首先注意到这一点：

```
java version "1.7.0_04"
Java(TM) SE Runtime Environment (build 1.7.0_04-b21)
Java HotSpot(TM) 64-Bit Server VM (build 23.0-b21, mixed mode) 
```

**更新：**重新指向`$JAVA_HOME`JDK 1.6 似乎是解决该问题的方法。

```
java version "1.6.0_31"
Java(TM) SE Runtime Environment (build 1.6.0_31-b04-415-11M3635)
Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01-415, mixed mode) 
```

JDK 1.7 有何不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T04:30:11.493

我能够将其追溯到这段代码：

```
BufferedImage image = null;
ImageInputStream stream = null;
try {
    stream = new FileImageInputStream(file);
    image = ImageIO.read(stream);

} catch (Exception ex) {
    log.error("Image could not be read: "+file.getPath());

} finally {
    // ImageIO closes input stream unless null is returned
    // http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#read(javax.imageio.stream.ImageInputStream)
    if (stream != null && image == null) {
        try {
            stream.close();
        } catch (IOException ex) {
            log.error("ERROR closing image input stream: "+ex.getMessage(), ex);
        }
    }
} 
```

JavaDocs 特别指出此方法（与其他方法不同）会自动关闭流。事实上，当您尝试手动关闭它时，它会抛出一个异常“关闭”。我正在使用这个重载，因为另一个说它`ImageInputStream`无论如何都会将它包装起来，所以我想我会节省一些工作。

更改块以使用正常`FileInputStream`修复泄漏：

```
BufferedImage image = null;
InputStream stream = null;
try {
    stream = new FileInputStream(file);
    image = ImageIO.read(stream);

} catch (Exception ex) {
    log.error("Image could not be read: "+file);

} finally {
    if (stream != null) {
        try {
            stream.close();
        } catch (IOException ex) {
            log.error("ERROR closing image input stream: "+ex.getMessage(), ex);
        }
    }
} 
```

在我看来，这似乎是 JDK 1.7 中的一个错误，因为 1.6 在这里运行良好。

**更新：**我刚刚就这个问题向 Oracle[提交了一份错误报告。](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7166379)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T20:00:20.723

我找到了另一个原因。似乎 ColorSpace 的 toRGB() 方法正在泄漏信号量。运行以下代码：

```
import java.awt.color.ColorSpace;
public class Test
{
    public static void main(String[] args) throws Throwable {
        final ColorSpace CIEXYZ = ColorSpace.getInstance(ColorSpace.CS_CIEXYZ);
        for(int i = 0; i < 10000000; i++) {
            CIEXYZ.toRGB(new float[] {80f, 100, 100});
        }
    }
} 
```

和：

```
java version "1.7.0_04"
Java(TM) SE Runtime Environment (build 1.7.0_04-b21)
Java HotSpot(TM) 64-Bit Server VM (build 23.0-b21, mixed mode) 
```

会让你离开系统文件。

**编辑：**已经向Oracle提交了[错误报告](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7167647)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-21T19:14:41.360

**更新：**正如其他用户所说，ImageIO 在 1.7.0_04 和 1.7.0_05 中泄漏了信号量。[用户juancn](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7166379)和用户[mckamey](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7167647)的错误报告已被标记为已修复并已关闭（谢谢大家！）。说明：

> 此修复报告了 macosx 上的文件处理程序泄漏。它提到了泄漏处理程序的两种方法：通过 ImageIO.read(ImageInputStream) 和通过信号量。
> 
> 我没有观察到第一次泄漏：如果找到合适的阅读器，我们会显式关闭输入流，这足以（至少在 1.7.4 上）释放文件句柄。
> 
> 但是，在信号量的情况下，我们会泄漏大量句柄：我们对 jpeg 图像的每一行执行颜色转换，并且每次创建一个信号量（因为我们看到系统上安装了 2 个或更多 CPU），然后我们减少单独的数量任务减少到 1（因为我们有单个扫描线要处理），因此永远不会取消链接信号量。
> 
> Linux 系统上也存在同样的问题，但程度较轻，因为我们为每个命名信号量占用单个文件句柄，而在 macosx 上，我们总是占用新的文件句柄。
> 
> 建议的修复只是推迟命名信号量的创建，直到我们澄清单独任务的数量，所以，现在我们不为图像读取和简单的颜色转换（如 ColorSpace.toRGB()）创建信号量。除此之外，现在我们使用 pSem 指针作为信号量销毁的触发器。

尽管他们的报告表明该修复程序在版本 8 中，但反向移植报告表明它已[在 1.7.0_06 中修复。](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=2225636)

因此，如果您在 1.7.0_04 或 05 上看到此问题，则至少更新到 1.7.0_06 即可解决此问题。

# python - 如何在 OSX 上替换 Python 中的“关于 Tkinter”菜单

> ID：10441279
> 
> 赞同：6
> 
> 时间：2012-05-04T00:46:02.010
> 
> 标签：python, menu, tkinter

编辑：我指的是 OSX 应用程序菜单，其中包含 About 和 Preference 菜单项（以及其他菜单项）。

对于知道正确搜索词的人来说，这可能是另一个简单的问题，但是在 IDLE 中花费数小时跟踪代码并搜索网络之后，我还没有完全能够连接这些点。

我正在尝试替换 Python 中的标准 About 菜单。IDLE 至少部分做到了这一点；该菜单仍然命名为“About Python”，但它显示了 IDLE About 窗口。当从 Wing IDE（在 X11 下）运行时，idle 不显示其 About 窗口，并且由于某种原因 IDLE 不想调试 idle.py ...

我已经能够用“About MyProgramName”替换“About Python”，但是我要么得到通常的“tk About”窗口，要么根本没有关于窗口。IDLE 定义了一个虚拟事件来将控制权传递给它的 About 窗口，我一直在纠结如何定义一个连接到菜单选择的虚拟事件。

所以，我有`root.bind('<<about-myprogram>>', about_dialog)`，但我该如何连接呢？tk.add_event() 需要一个序列...

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:01:59.030

如果您正在谈论在菜单上构建一个带有帮助条目的菜单栏并在帮助菜单上具有关于条目，那是非常基本的东西，并且有很好的例子。

*   [http://effbot.org/tkinterbook/menu.htm](http://effbot.org/tkinterbook/menu.htm)
*   [http://www.tkdocs.com/tutorial/menus.html](http://www.tkdocs.com/tutorial/menus.html)

其中任何一个都将清楚地解释如何为您的应用程序创建顶级菜单。如果您在谈论其他内容，请澄清。

我在我的 C:\Python27 目录下的源代码中进行了搜索，`::tk::mac::ShowPreference`并在文件 C:\Python27\Lib\idlelib\macosxSupport.py 中运行了代码，看起来它正在做你想做的事情（或至少关闭足以让你适应它）。

```
def config_dialog(event=None):
    from idlelib import configDialog
    root.instance_dict = flist.inversedict
    configDialog.ConfigDialog(root, 'Settings')

root.createcommand('::tk::mac::ShowPreferences', config_dialog) 
```

我无法在 createcommand() 方法上找到任何好的文档，但我确实确认它存在于`root`我从`root = Tk()`. 在寻找更多信息的同时，我也遇到了这个关于这个主题的[小讨论](http://mail.python.org/pipermail/tkinter-discuss/2009-April/001893.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-20T18:03:30.200

我一直在寻找有关如何制作 About 和 Preferences 菜单项的完整示例，但没有找到，所以我自己制作了。这是在 Mac OS 10.4.11 和 Mac OS 10.6.8 上测试的。

```
from Tkinter import *
from tkMessageBox import *

def do_about_dialog():
    tk_version = window.tk.call('info', 'patchlevel')
    showinfo(message= app_name + "\nThe answer to all your problems.\n\nTK version: " + tk_version)

def do_preferences():
    showinfo(message="Preferences window")

def do_button():
    print("You pushed my button")

def main():
    global app_name
    app_name = "Chocolate Rain"
    global window
    window = Tk()
    window.title("Main")

    # find out which version of Tk we are using
    tk_version = window.tk.call('info', 'patchlevel')
    tk_version = tk_version.replace('.', '')
    tk_version = tk_version[0:2]
    tk_version = int(tk_version)

    menubar = Menu(window)
    app_menu = Menu(menubar, name='apple')
    menubar.add_cascade(menu=app_menu)

    app_menu.add_command(label='About ' + app_name, command=do_about_dialog)
    app_menu.add_separator()

    if tk_version < 85:
       app_menu.add_command(label="Preferences...", command=do_preferences)
    else:
        # Tk 8.5 and up provides the Preferences menu item
        window.createcommand('tk::mac::ShowPreferences', do_preferences)

    window.config(menu=menubar) # sets the window to use this menubar

    my_button = Button(window, text="Push", command=do_button)
    my_button.grid(row=0, column=0, padx=50, pady=30)

    mainloop()

if __name__ == "__main__":
    main() 
```

# twitter-bootstrap - 如何更改 Twitter Bootstrap 中警报消息的淡入淡出速度？

> ID：10441281
> 
> 赞同：24
> 
> 时间：2012-05-04T00:46:12.463
> 
> 标签：twitter-bootstrap

我正在使用 twitter 引导程序，并且警报框上关闭的淡入淡出发生的速度比我想要的要快。有没有什么地方可以改变淡入淡出的持续时间，或者甚至可以在每个警报的基础上进行设置？

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-07T13:45:23.963

丹·赫尔曼，

如果你没有使用 less 并且你想编辑 bootstrap.css ，你可以尝试编辑这个，不要乱用 .js 文件。

编辑

```
 .fade {
   opacity: 0;
   -webkit-transition: opacity 0.25s linear;
      -moz-transition: opacity 0.25s linear;
       -ms-transition: opacity 0.25s linear;
        -o-transition: opacity 0.25s linear;
           transition: opacity 0.25s linear;
 } 
```

并把它变成...

```
 .fade {
   opacity: 0;
   -webkit-transition: opacity 1.25s linear;
      -moz-transition: opacity 1.25s linear;
       -ms-transition: opacity 1.25s linear;
        -o-transition: opacity 1.25s linear;
           transition: opacity 1.25s linear;
 } 
```

1.25s is not the default value, that's is just an example and if you apply that, you'll really notice the effect and the difference.

Now, if you want to create another variant of the fade selector, lets say, "myFade", then I think you need to modify the bootstrap-alert.js and add your new class selector or "myFade" class selector.

I don't know yet about javascript. I just thought you need to modify the bootstrap-alert.js and insert your new class.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T01:20:42.877

它实际上`.transition(opacity .15s linear);`在 component-animations.less 中使用（第 5 行）。

如果您查看 bootstrap-alert.js 的第 64 行，您可以看到它在哪里引用了该类。将 .15s 更改为您想要的样子，您应该一切顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-21T17:41:12.063

For me on bootstrap 4, just adding these lines in my custom style.css was good enough.

```
.show {
    transition: opacity 100ms; // You can play with the 1
} 
```

# excel - 需要一个宏来检测单元格值是否从当前值更改

> ID：10441286
> 
> 赞同：3
> 
> 时间：2012-05-04T00:46:21.510
> 
> 标签：excel, vba

当行中任何单元格中的值（始终为数字格式）发生变化时，我需要宏的帮助来通知我（通过将单元格背景颜色更改为红色）。如果单元格 F3:AN3 中的任何值从其当前值更改，我希望单元格 E3 的背景变为红色。

单元格 F3:AN3 中的数字将手动输入或通过复制和粘贴行输入，不会有任何公式。同样，如果单元格 F4:AN4 中的任何值发生更改，我希望单元格 E4 更改为红色背景，以此类推图表中的每一行。并非所有行都总是有一个值，所以我会寻找从“”到任何＃，或从一个＃到另一个＃，或从任何＃到“”的变化。理想情况下，这将是一个不必手动运行的事件宏。

以下是我开始使用的代码：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Not Intersect(Target, Range("F3:AN3")) Is Nothing Then KeyCellsChanged
End Sub

Private Sub KeyCellsChanged()

   Dim Cell As Object
     For Each Cell In Range("E3")
    Cell.Interior.ColorIndex = 3

   Next Cell

End Sub 
```

但是，无论单元格中的数字是否更改，此宏似乎都会运行，只要我按 Enter 键，它将 E3 突出显示为红色。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:36:49.073

根据您在评论中对我的问题的回答，此代码可能会更改。将其粘贴到相关的工作表代码区域。为此，请导航到任何其他工作表，然后导航回原始工作表。

```
Option Explicit

Dim PrevVal As Variant

Private Sub Worksheet_Activate()
    If Selection.Rows.Count = 1 And Selection.Columns.Count = 1 Then
        PrevVal = Selection.Value
    Else
        PrevVal = Selection
    End If
End Sub

Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    On Error GoTo ExitGraceFully
    If Selection.Rows.Count = 1 And Selection.Columns.Count = 1 Then
        PrevVal = Selection.Value
    Else
        PrevVal = Selection
    End If
ExitGraceFully:
End Sub

Private Sub Worksheet_Change(ByVal Target As Range)
    If Application.WorksheetFunction.CountA(Target) = 0 Then Exit Sub

    Dim aCell As Range, i As Long, j As Long

    On Error GoTo Whoa

    Application.EnableEvents = False

    If Not Intersect(Target, Columns("F:AN")) Is Nothing Then
        If Target.Rows.Count = 1 And Target.Columns.Count >= 1 Then
            Range("E" & Target.Row).Interior.ColorIndex = 3
        ElseIf Target.Rows.Count > 1 And Target.Columns.Count = 1 Then
            i = 1
            For Each aCell In Target
                If aCell.Value <> PrevVal(i, 1) Then
                    Range("E" & aCell.Row).Interior.ColorIndex = 3
                End If
                i = i + 1
            Next
        ElseIf Target.Rows.Count > 1 And Target.Columns.Count > 1 Then
            Dim pRow As Long

            i = 1: j = 1

            pRow = Target.Cells(1, 1).Row

            For Each aCell In Target
                If aCell.Row <> pRow Then
                    i = i + 1: pRow = aCell.Row
                    j = 1
                End If

                If aCell.Value <> PrevVal(i, j) Then
                    Range("E" & aCell.Row).Interior.ColorIndex = 3
                End If
                j = j + 1
            Next
        End If
    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    Resume LetsContinue
End Sub 
```

**快照**

当您在单元格中键入值时，它按预期工作。当您复制 1 个单元格并将其粘贴到多个单元格中时，它也可以工作。当您复制一块单元格并进行粘贴时它**不起作用**（我仍在努力）

![在此处输入图像描述](../Images/8c7fb34bd7d330a470cf320b8ef45d85.png)

**注意**：这没有经过广泛的测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T02:03:53.590

这是我最喜欢的检测 Excel VBA 应用程序更改的方法：

1.  在用户看到的范围下方的隐藏行中创建您正在观看的范围的精确副本。
2.  在其下方添加另一部分（也隐藏），其中使用公式减去用户范围和隐藏范围，如果差异不为 0，则使用 if 语句将值设置为 1。
3.  如果相应的更改检测行（或单元格）> 0，则在用户范围内使用条件格式来更改行的背景颜色。

我喜欢这种方法的地方：

1.  如果用户进行更改然后恢复为原始值，则该行“足够聪明”以知道没有任何更改。
2.  在用户更改某些内容时运行的代码很痛苦，并且可能导致问题。如果您按照我描述的方式设置更改检测，则您的代码仅在工作表初始化时触发。worksheet_change 事件代价高昂，而且***“可能会有效地关闭 Excel 的撤消功能。只要事件过程对工作表进行更改，Excel 的撤消堆栈就会被破坏。”*** （根据 John Walkenbach：[Excel 2010 Power Programming](https://rads.stackoverflow.com/amzn/click/com/0470475358)）
3.  您可以检测用户是否正在离开页面并警告他们所做的更改将会丢失。

# c# - 在 C# 中处理来自 SQL 的 Null 类型

> ID：10441291
> 
> 赞同：1
> 
> 时间：2012-05-04T00:46:58.000
> 
> 标签：c#, sql, null

我正在使用`SqlDataReader`从 SQL 表中获取值并将它们分配给它们各自的变量。但在我的表中，`int`类型`double`列具有空值。因此，当我尝试读取 a`null` `int`并将其分配给`int`变量时，它会崩溃。

以下是这些值的分配方式：

```
public int ID { get; set; }
public int Map { get; set; }
public int TypeID { get; set; } 
```

这就是他们被阅读的地方：

```
while (objSqlDataReader.Read())
{
    data= new data();
    emissiondata.ID = (int)objSqlDataReader["EFID"];
    emissiondata.Map = (int)objSqlDataReader["EFMappingID"];
    emissiondata.TypeID =(SqlInt32)objSqlDataReader["MobileTypeID"]; 
```

因此，如果其中任何一个是`null`，即使我正在调试它，它也会崩溃并且不会继续。我如何处理 SQL 中的值，如果是`null`，我如何为我的值分配空值？`int``null`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:43:24.120

DBNull.Value works on DataTable rows, I'm not sure with SqlDataReader:

```
bool isNull = objSqlDataReader.GetOrdinal("EFID") == DBNull.Value; 
```

If you use SqlDataReader's [GetSqlInt32,GetSqlDateTime, etc](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx) for example, they are null-aware out-of-the-box.

Instead of unboxing:

```
emissiondata.ID = (int)objSqlDataReader["EFID"]; 
```

You do this instead:

```
SqlInt32 emissionId = objSqlDataReader.GetSqlInt32(emissionIdOrdinal); 
```

Then you can test for null directly:

```
if (emissionId.IsNull) ... 
```

However, those methods need the column's ordinal to access value. You can setup those ordinals before your loop

```
int emissionIdOrdinal = rdr.GetOrdinal("EFID"); 
```

But if you really want C#'s null, you make a helper function for it instead:

```
public static int? ToNullable(this SqlInt32 value)
{
    return value.IsNull ? (int?) null : value.Value;
} 
```

To access it with your nullable variable:

```
int? emissionId = objSqlDataReader.GetSqlInt32(emissionIdOrdinal).ToNullable(); 
```

You can now test null directly:

```
if (emissionId == null) 
```

An advice, try to change your class' properties to nullable types, precluding the need for you to use another variable:

```
public int? ID { get; set; }
public int? Map { get; set; }
public int? TypeID { get; set; } 
```

Final code:

```
data= new data();
emissiondata.ID = objSqlDataReader.GetSqlInt32(emissionIdOrdinal).ToNullable();
emissiondata.Map = objSqlDataReader.GetSqlInt32(emissionMapOrdinal).ToNullable(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:39:03.767

现在无法测试它，但您可以尝试使用`int?`, 可空的`int`. 它是 的简写`Nullable<Int32>`。如果`objSqlDataReader`可以强制转换为`int?`，请将您的字段更改为`int?`并向属性设置器添加额外的逻辑，如果您必须在值为空时执行某些操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T02:09:51.607

因此，为了找到可能的答案，我查看了您正在谈论的课程的文档：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx) 有一个 IsDBNull 方法. 没有 C#，这应该可以工作：

```
while (objSqlDataReader.Read())
{
   data= new data();
   if (!objSqlDataReader.IsDBNull(objSqlDataReader.GetOrdinal("EFID")))
   {
      emissiondata.ID = (int)objSqlDataReader["EFID"];
   } else {
      // Whatever you want to do when it is null
   }
   if (!objSqlDataReader.IsDBNull(objSqlDataReader.GetOrdinal("EFMappingID")))
   {
      emissiondata.Map = (int)objSqlDataReader["EFMappingID"];
   } else {
      // Whatever you want to do when it is null
   }
   if (!objSqlDataReader.IsDBNull(objSqlDataReader.GetOrdinal("MobileTypeID")))
   {
      emissiondata.TypeID = (int)objSqlDataReader["MobileTypeID"];
   } else {
      // Whatever you want to do when it is null
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-14T16:59:03.327

我意识到这很旧，但是如果您在 2016 年 7 月 14 日之后需要这个答案：当 SQL 类型为 int 时，null 使用 int？作为数据类型。

诠释？是一个“可为空”的 int - 因此当 SQL 为列返回 NULL 时，属性值将接收到 null 值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T00:51:19.650

您可以在查询本身中执行此操作。在 Oracle 中，函数是`NVL()`. 看起来您正在使用 MS Sql Server，它使用：

```
ISNULL(YOUR_FIELD,0) 
```

其他 RDBMS 的用法和语法在这里：[http ://www.w3schools.com/sql/sql_isnull.asp](http://www.w3schools.com/sql/sql_isnull.asp)

# vb.net - 如何使用 VB.Net 在默认图像查看器中打开图像？

> ID：10441298
> 
> 赞同：1
> 
> 时间：2012-05-04T00:48:09.450
> 
> 标签：vb.net

当我传递图像的路径时，请帮助我执行默认图像查看器。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T00:49:50.937

您正在寻找`Process.Start`，它正是这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:53:03.727

进程.开始

见：http: [//visualbasic.about.com/od/usingvbnet/a/prstrt.htm](http://visualbasic.about.com/od/usingvbnet/a/prstrt.htm)

# c# - 通过反思获得自我的价值

> ID：10441303
> 
> 赞同：0
> 
> 时间：2012-05-04T00:48:45.253
> 
> 标签：c#, string, reflection

我已经看到了一些与此类似的问题，但没有一个人问过我要解决的问题。基本上，给定一个字符串，我想通过反射获取该字符串的值。

我知道这听起来很奇怪，但我正在编写一个通用方法来转储对象的所有公共属性，而字符串是一种特殊情况，因为它的值实际上与它所组成的串联字符数组相同。

所以，我的代码是这样的：

```
var obj = "foo";
var props = obj.GetType().GetProperties();

// I now have two properties -- length and a character array
foreach (var prop in props)
{
   if (prop.PropertyType.IsArray || prop.GetIndexParameters().Length > 0)
   {
      lines.Add(tabs + prop.Name + "(array)");
      lines.Add(tabs + "\t" + prop.GetValue(target, new object[] { 0 }));
   }
   else
      Console.WriteLine(prop.Name + ": " + prop.GetValue(obj, null));
} 
```

这将输出以下内容：

```
Chars(array)
        f
Length: 3 
```

这一切都很好，但是有没有办法从中获得实际的“foo”值，而无需通过数组并连接它？

谢谢！

-阿里

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T00:58:48.400

```
if (obj is string)
  Console.WriteLine(obj);
else
    ... use reflection 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:50:44.633

只需将其转换回`string`.

# lisp - LISP-简单的函数，语法错误？

> ID：10441308
> 
> 赞同：2
> 
> 时间：2012-05-04T00:49:34.850
> 
> 标签：lisp, common-lisp

我目前正在尝试学习 lisp 并在 linux 上使用 emacs。尽我所能，我写了两个函数。

*这两个函数首先删除列表的第一个元素。*

*   `series`添加给定列表中的所有元素。
*   `parallel` 1) 取列表中每个数字的倒数，然后 2) 将列表中的所有元素相加，然后 3) 取元素总和的倒数。

* * *

代码：

```
(defun series (lst)
    (apply #'+' (cdr lst)) )

(defun parallel (lst)
    (/ 1 (apply #'+' (apply #'/' (cdr 'lst ) ) ) )) 
```

* * *

我可以评估该功能，但是当我尝试使用该功能时，如下所示：

```
(series (list 3 3 4 5)) 
```

我收到错误：**值 CDR 不是预期的 NUMBER 类型。** 我看到了这一点，我想，为什么 emacs 将 cdr 视为一个数字而不是一个函数？我是 lisp 和 emacs 的新手，所以我不知道如何修复这个错误。任何帮助，将不胜感激。

* * *

更新

我在这段代码中有问题，我认为它有效......

```
(defun series (lst)
 (apply #'+ (cdr lst) ))

(defun parallel(lst)
(/ 1 (apply #'+ (mapcar #'/ (make-list (- (length lst) 1) :initial-element 1) (cdr lst)  ) ))) 
```

希望我现在尝试做的事情得到理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T01:04:01.283

您有额外的撇号使 LISP 解析器感到困惑。引用`+`函数的语法就是`#'+`; 没有“关闭报价”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T05:32:19.507

关于：

```
(defun parallel (lst)
    (/ 1 (apply #'+' (apply #'/' (cdr 'lst ) ) ) )) 
```

你为什么*要*丢弃第一个元素。这很好奇。

请注意，即使引用问题得到解决，此函数的逻辑也不起作用。

`(apply #'/ (cdr lst))`将剩余的传递`lst`给`/`函数。这个函数会产生一个数字。

这样你就可以有效地`(apply #'+ number)`，`apply`想要一个列表的问题。

您暗示的并行语义不会发生。

也许你想要这个：

```
 ;; divide the sum of the remaining elements, by the fraction of those elements
 (/ (apply #'+ (cdr lst)) (apply #'/ (cdr lst))) 
```

请注意，在 Emacs Lisp 中，整数除以整数会产生整数，而不是像 Common Lisp 中那样的有理数。

# ruby-on-rails - rails - reject_if - 仅当它不是集合中的唯一项目时才拒绝

> ID：10441311
> 
> 赞同：1
> 
> 时间：2012-05-04T00:50:05.430
> 
> 标签：ruby-on-rails

换句话说，该项目必须至少有一个有效的任务。所以不能拒绝如果它是项目集合中唯一的任务 -> 任务。

换句话说，如果项目中已经有一项任务，则应拒绝所有空白字段的任务。

```
Project 
  has_many :tasks
  accepts_nested_attributes_for :tasks
Task 
  belongs_to :project 
```

编辑：应该拒绝空白任务，但是项目中必须至少有一项任务才能使项目有效。如果参数散列中有三个空白任务，则只能拒绝其中的 2 个。第一个任务必须尝试（并且失败）验证。

有没有办法做到这一点？

# html - 在以下 CSS 布局中，如何使我的箭头右对齐？

> ID：10441312
> 
> 赞同：2
> 
> 时间：2012-05-04T00:50:15.510
> 
> 标签：html, css, twitter-bootstrap

我这里有一个模型

[http://jsfiddle.net/pJCfE/](http://jsfiddle.net/pJCfE/)

目前，向下箭头位于“所有服务”旁边。我想让它正确对齐。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T02:03:12.673

将类“pull-right”添加到插入符号

```
<span class="caret pull-right"> 
```

它是引导程序中包含的实用程序类之一：[https ://github.com/twitter/bootstrap/blob/master/less/utilities.less](https://github.com/twitter/bootstrap/blob/master/less/utilities.less)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-07T12:26:34.370

我缺乏评论最佳答案的声誉，但我有一个简单的澄清，以防“使用向右拉（浮动）时它不会垂直停留在中间”。解决方案是：

```
<span class="pull-right">
        <span class="caret"></span>
    </span> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-19T08:22:34.070

正如@Omu 所说，先前的答案并没有保持carte 的垂直对齐。相反，您应该扩展 .caret 的 css 类：

```
.caret {
  position: absolute;
  right: 1%;
  top: 45%;
} 
```

看看>> [https://jsfiddle.net/twtvcx4n/](https://jsfiddle.net/twtvcx4n/)

# android - 使用 QR 码渲染 3D 模型

> ID：10441314
> 
> 赞同：1
> 
> 时间：2012-05-04T00:50:46.710
> 
> 标签：android, qr-code, artoolkit, 3d-model

我想使用 QR 码在相机中渲染 3D 模型。我一直在使用android 4.0平台。我的问题是——

1.  如何将 3D 模型存储在 QR 码中？（因为我看到了 url、文本、位置等的生成器，但没有 3D 模型）

2.  我是否必须使用任何 AR 跟踪算法（例如 NyARToolkit - ARToolkit android 版本）？如果是，那么同步将如何发生？

我有点迷路了。请帮忙。

提前致谢！

[这是一个例子](http://www.youtube.com/watch?v=I6MiJKgtbug)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:00:55.320

一个二维码最多可以容纳 23624 位。如果您可以将 3d 模型的数据拟合到该大小限制内，则无需执行其他任何操作。只需将数据一端编码为二维码，另一端将其解码回二进制格式。从那时起，您将呈现数据，就好像它是一个 3d 文件，或者是动态生成的。

如果您需要更多空间，您可以设计用于扫描 QR 码的应用程序以读取 QR 码并在其他地方获取数据表格。这可以像将 URL 编码到 QR 码一样简单，该 URL 是具有 3d 模型的文件。或者，您可以拥有一个随应用程序一起提供的模型库，并且 QR 码只对应其中一个。

例如，您链接到的演示用于显示汽车/公共汽车的二维码解码为 QRA:3DSCar。正在读取它的软件只知道如何处理该字符串。它实际上并没有从 QR 码中获取 3d 模型数据。

# javascript - 如何从 $(document).ready(function()) 调用 javascript 函数

> ID：10441323
> 
> 赞同：1
> 
> 时间：2012-05-04T00:53:02.610
> 
> 标签：javascript, jquery, html

正如您在下面看到的，我试图在我的文档加载后调用这两个函数，但是当我运行代码时，我收到以下错误：`syntax error unexpected token: <`

编辑：我在下面添加了我的 html 代码，以便您仔细查看。谢谢

这是我的 index.php 文件：

```
<?php
require 'fb-php-sdk/facebook.php';
$app_id = '251156051648844';
$app_secret = 'be37135d238e66ddce8f4ce8db20e668';
$app_namespace = '';
$app_url = 'http://www.paulmeskers.com/rutgers/twenty/canvas/';
$scope = 'email,publish_actions';

// Init the Facebook SDK
$facebook = new Facebook(array(
'appId'  => $app_id,
'secret' => $app_secret,
));

// Get the current user
$user = $facebook->getUser();

// If the user has not installed the app, redirect them to the Auth Dialog
if (!$user) {
$loginUrl = $facebook->getLoginUrl(array(
  'scope' => $scope,
  'redirect_uri' => $app_url,
));

print('<script> top.location.href=\'' . $loginUrl . '\'</script>');
}

if(isset($_REQUEST['request_ids'])) {
  $requestIDs = explode(',' , $_REQUEST['request_ids']);
  foreach($requestIDs as $requestID) {
  try {
    $delete_success = $facebook->api('/' . $requestID, 'DELETE');
   } catch(FacebookAPIException $e) {
    error_log($e);
    }
  }
}

?>

<!DOCTYPE html>

<html>
<head>
<title>Twenty Questions</title>
<meta property="og:title" content="ttt" />
<meta property="og:type" content="activity" />
<meta property="og:url" content="https://apps.facebook.com/251156051648844/" />
</head>
<body id="yo">
<div id="fb-root"></div>
<script src="//connect.facebook.net/en_US/all.js"></script>
<script type='text/javascript' src='jquery-1.7.2.min.js'></script>
<script type='text/javascript' src='ui.js'></script>

<script>
    var appId = '<?php echo $facebook->getAppID() ?>';
    var uid;

    // Initialize the JS SDK
    FB.init({
        appId: appId,
        cookie: true,
    });

    FB.getLoginStatus(function(response){
        uid = response.authResponse.userID ? response.authResponse.userID: null;
    });

function authUser() {
    FB.login(function(response) {
    uid = response.authResponse.userID ? response.authResponse.userID : null;
    }, {scope:'email,publish_actions'});

}

</script>

    <input type="button" id="b1" value="Create Game" onClick="createGame(uid)"/>
<input type="button" id="b2" value="Share this game" onClick="shareOnTimeline()" />
    <input type="button" id="b4" value="fetch created games" onClick="fetch_creator_games(uid)" />
    <input type="button" id="b5" value="fetch joined games" onClick="fetch_joined_games()"/>
    <input type="button" id="b3" value="tewst" onClick="build_creator_ui()" />

    <p><b>Games created by me:</b></p>
    <div id="createdGames" ></div>
    <p>------------------------------------------------------</p>
    <p><b>Games created by others:</b></p>
    <div id="invitedGames" ></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T00:59:55.323

在页面执行期间的某个地方，一个`<`角色最终出现在不应该出现的地方。由于您建议在 jQuery 源文件中引发此错误，因此很可能您的选择器编写不正确。也许您正试图选择一个 HTML 元素而忘记用引号括起来，或者您正试图创建一个元素。

### 保持你的 JavaScript 干净

类似于以下内容的内容可能会引发此错误：

```
$(<input>).attr("id", "foo"); 
```

请注意，选择器没有用引号括起来，因此这会引发一个错误，类似于您收到的错误。

### 检查 AJAX 响应

我注意到您希望 JSON 能够顺利通过管道，但是在将一些 POSTS 推送到您的服务器后，我发现错误的用户 ID 会导致以下响应：

```
<br/><br/>
<label style='color:red;font-size:200%;'>
  Unable to load guessing games for user_id
</label>
<br/> 
```

这可能会导致问题。请务必将错误消息也以 JSON 格式发送。

```
{ success: 0, message: 'Unable to load guessing games for this user id' } 
```

要在 PHP 中构造这个 JSON 字符串，您可以执行以下操作：

```
$response = array( 'success' => 0, 'message' => 'Unable to...this user id' );
echo json_encode( $response ); 
```

### 保持标记干净

确保您也有正确的页面：

```
<!DOCTYPE html><!-- no whitespace or output before the doctype -->
<html>
  <head>
    <title>Title Here</title>
    <style>
      body { color: red } /* styles in the head */
    </style>
    <script>var scripts_in_the_head_tag = true;</script>
  </head>
  <body>
    <p>HTML goes within the body tags.</p>
    <script>var scripts_in_the_body_tag = true;</script>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T01:00:19.657

当我发出一个期望 JSON 响应但接收 HTML 的 ajax 请求时，我通常会看到此错误。

# php - 在 Magento 的产品视图中隐藏可配置产品所需的属性标签

> ID：10441326
> 
> 赞同：0
> 
> 时间：2012-05-04T00:53:12.843
> 
> 标签：php, magento, attributes

除了将 div 设置为 display:none 之外，如何隐藏可配置产品中所需属性的标签？我只想在产品视图中显示下拉菜单，即“选择一个选项...”下拉框，没有标签（例如颜色、尺寸），它总是在上面一行。

我通过评论尝试了这个

```
 <?php echo $_attribute->getLabel() ?> 
```

在 product/view/type/configurable.phtml 但它没有效果，所以我通过 CSS 隐藏了它。有没有更优雅的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T00:03:15.147

我发现 Magiczoomplus 模块以某种方式干扰了可配置产品。Magento 现在使用 magiczoomplus 目录中的可配置的.phtml，而不是它的“自己的”...在 Magiczoomplus 可配置的.phtml 中将其注释掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:24:17.297

注释掉您尝试过的行应该会得到您想要的结果，但是您是否碰巧清除了 magentos 缓存？自从我使用 magento 以来已经有一段时间了，但我似乎记得缓存对于这样的事情很麻烦。

```
<dt><label class="required"><em>*</em><?php echo $_attribute->getLabel() ?></label></dt> 
```

# ocaml - 如何在 AST 中的 yacc ocaml 中创建锚点

> ID：10441330
> 
> 赞同：1
> 
> 时间：2012-05-04T00:54:08.637
> 
> 标签：ocaml, yacc

我正在用 OCaml 编写解析器。我已经写了解析器；现在我正在尝试关联令牌以构建 AST。这是解析器的示例：

解析器：

```
expr: 
  | THE boiluser HAS l_ent {structural($2,$4)}
;
boiluser:
  | USER boiluser USER {}
;

l_ent: 
  boiluser {[$1]}
  | l_ent boiluser{ [$2::$1] }   ; 
```

在 AST 中，我想链接`$2`和`$4`. 我正在考虑使用哈希表，但我不知道该怎么做。当我“打电话”时`$1`，我怎么知道要与它联系起来`$4`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:19:24.883

你的问题不清楚：我很难理解英语，而且更难（一旦破译）理解你在问什么。

一般的建议是不要在解析阶段进行任何分析/处理：只需解析您的输入，并返回一个忠实地表示它的 AST（模消歧和琐碎的具体语法细节）。您将能够实现任何进一步的处理（例如在某些标识符和某些数据之间构建关联表）作为在返回的 AST 上运行的函数。这更清洁，更容易做到。

我看到您使用的是旧程序 ocamlyacc。您是否知道[Menhir](http://cristal.inria.fr/~fpottier/menhir/)是一种更易于使用并产生更好的语法描述的解析器生成器（例如使用变量名而不是`$1 $2 $3`）？如果你有机会，你应该考虑转换——如果你是学生，考虑向你的老师报告，这样他就可以通过在他的课程中使用竖石来改善每个人的生活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:50:43.690

我不知道您所说的“创建锚点”是什么意思，所以我根据您的代码进行猜测：

规则的*类型*是其*右侧*的类型，因此在您的情况下，*boiluser*的类型是*unit*（其值也是如此）：

```
boiluser:
  | USER boiluser USER {} 
```

所以当你在另一个规则中使用它时：

```
expr: 
  | THE boiluser HAS l_ent {structural($2,$4)} 
```

*2 美元*的价值始终是*单位*！规则*expr*的类型将是函数*结构*的类型，无论*结构为**$2*和*$4*的具体值返回的值。

# sql-server - 列出 SQL Server 2000 中哪些列具有全文索引

> ID：10441336
> 
> 赞同：2
> 
> 时间：2012-05-04T00:55:28.643
> 
> 标签：sql-server, sql-server-2000

如何列出我的数据库中具有全文索引的所有表/列？

寻找类似的答案：[List which columns have a full-text index in SQL Server 2005](https://stackoverflow.com/questions/949435/list-which-columns-have-a-full-text-index-in-sql-server-2005) , but for SQL Server 2000 [sighs]

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T04:52:00.780

列出表格：

```
EXEC sp_help_fulltext_tables; 
```

要列出每个表的列：

```
EXEC sp_help_fulltext_columns; 
```

请注意，如果未启用全文，这将失败。

如果要自定义输出，只需检查这两个过程的文本以查看它们在做什么（我手边没有 2000 实例，因此无法确认，但请记住，这些存储过程可能有系统无法执行或访问无法直接查询的系统表的语法）。

```
EXEC sp_helptext sp_help_fulltext_tables;
EXEC sp_helptext sp_help_fulltext_columns; 
```

sp_help_fulltext_tables：http:
[//msdn.microsoft.com/en-us/library/aa933422%28v=sql.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa933422%28v=sql.80%29.aspx)

sp_help_fulltext_columns：http:
[//msdn.microsoft.com/en-us/library/aa933445%28v=sql.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa933445%28v=sql.80%29.aspx)

# css - 将鼠标悬停在导航按钮上时侧边栏移动

> ID：10441337
> 
> 赞同：0
> 
> 时间：2012-05-04T00:55:33.380
> 
> 标签：css, html

我有一个带有按钮的导航栏，当你将鼠标悬停在它们上面时，它们会升起。问题是内容也随之而来。就好像内容不会在其容器中保持静态。我正在使用 z-index，所以很多定位必须是相对的，但玩弄其他定位似乎没有帮助。这一直让我发疯。有什么建议么？

*为了隐私或其他原因删除了链接*

我直接链接到整个页面以显示完整的问题。对不起，如果有反对的规则；我是新来的。

此外，它还没有完成，代码真的很草率所以，你知道的，不要评判。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:35:07.647

首先，导航的 HTML 无效。你有包装列表项的锚标签。由于浮动元素，您还做了很多带有负边距的技巧。最好添加溢出：隐藏；到您的`nav ul`并实际将这些元素放回视口中。

但是，为了快速解决您的问题，您需要清除您的内容，这样它就不会受到导航中正在进行的定位的影响。见下文。

```
#content {
    clear: left;
} 
```

# powerpoint - 实时编码演示的软件或技巧

> ID：10441342
> 
> 赞同：7
> 
> 时间：2012-05-04T00:56:23.270
> 
> 标签：powerpoint, presentation, keynote, livecoding

我将很快就 Ruby on Rails 进行介绍性演示/培训课程。我想让它变得有趣和引人入胜，同时看起来仍然“抛光”。由于这是一门实践课程，大多数人将与我一起构建应用程序，我希望能够显示我的终端/编辑器并显示生成的网页，但是我不想总是在窗口之间切换。Keynote 曾经有能力将网页嵌入到幻灯片中，但它被删除了，而且 PowerPoint Mac 支持似乎很不稳定。似乎没有任何方法可以嵌入终端窗口。

有没有人推荐可以提供帮助的演示软件？你最近有没有看过一个很好的现场编码演讲，我可以看看？您知道哪些技巧可以使您的演示文稿看起来更“专业”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T02:09:01.767

您可能想看看[CodeDemo](http://www.codedemo.net/)。它旨在协助演示期间的实时编码 - [http://www.codedemo.net/](http://www.codedemo.net/)

# facebook - 从个人网站使用 Facebook API

> ID：10441343
> 
> 赞同：0
> 
> 时间：2012-05-04T00:56:32.497
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

一位客户要求我创建一个 XML 文档，其中包含我可以从他的个人 Facebook 帐户收集到的所有信息。该文件应包括有关他的帐户的所有信息，以及他的帐户可以在他的朋友帐户中看到的所有信息（姓名、喜欢、评论、照片等）。这是否可以通过某些 API在**私有服务器上实现？**我是否必须制作一个 Facebook 应用程序，或者如果他只是登录，我可以获得所有这些信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:07:15.743

您可以通过图形 api 获取他所有可公开查看的信息：graph.facebook.com/ID（其中 id 是他的 facebook ID）将为您提供一个包含性别、姓名等数据的 JSON 文件。照片和评论根据您的需要而有所不同照片的 ID，我不知道你怎么能取消公共 api。

要访问未设置为公开的任何内容，您需要创建一个应用程序，他需要添加该应用程序并允许它访问他的信息。

有关更多信息，请参阅： http: [//developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)，几乎可以指导您完成任何您想做的事情。

# oracle - 使用光标引用整个表，然后根据条件插入

> ID：10441344
> 
> 赞同：0
> 
> 时间：2012-05-04T00:57:19.553
> 
> 标签：oracle, if-statement, plsql, cursor

如果我用游标引用整个表。是否可以多次使用基于其他表条件的insert语句？例如：

```
V_Name                 Emp.Name%type;
V_E_Number             Emp.Number%type;
V_Location             Emp.Location%type;
V_City                 Emp.City%type;
V_P_ID                 Emp.P_ID%type;
V_State_Code           Emp.State_Code%type;

Cursor C1 is Select emp.name, emp.number, emp.Location, emp.City, emp.P_ID, emp.State_Code
             From Employee Emp, Former_Employee Femp
             Where Emp.Number = Femp.Number
             And State_Code = '4';

Begin

Open C1;

Loop

Fetch C1 Into V_Name, V_E_Number, V_Location, V_City, V_P_ID, V_State_Code;

EXIT WHEN C1%NOTFOUND;

IF New_Emp.P_ID != V_P_ID 
Then Insert Into New_Emp
Values (V_Name, V_E_Number, V_Location, V_City, V_P_ID, V_State_Code); 

IF New_Emp.P_ID = V_P_ID,
   New_Emp.State_Code = V_State_Code
Then Insert Into Emp_Archive
VALUES (V_Name, V_E_Number, V_Location, V_City, V_P_ID, V_State_Code);  

Else Do Nothing;

End If;

End Loop;

Close C1;

End;
/ 
```

那么我可以再次打开游标并使用另一个 If 语句来填充具有不同条件的不同表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:08:47.073

您可以打开游标、从游标中获取、关闭游标，然后稍后重新打开它。再次打开游标时可能会得到不同的数据，因为基础表中的数据可能已更改。但是，查看您的代码，似乎不需要首先声明游标——您可以简单地编写两条`INSERT`语句（假设`new_emp`您的代码引用但未声明的记录是有效的）

```
INSERT INTO new_emp
  Select emp.name, emp.number, emp.Location, emp.City, emp.P_ID, emp.State_Code
    From Employee Emp, Former_Employee Femp
    Where Emp.Number = Femp.Number
      And State_Code = '4'
      AND emp.p_id   = new_emp.p_id;

INSERT INTO Emp_Archive
  Select emp.name, emp.number, emp.Location, emp.City, emp.P_ID, emp.State_Code
    From Employee Emp, Former_Employee Femp
    Where Emp.Number = Femp.Number
      And State_Code = '4'
      AND emp.p_id   = new_emp.p_id
      AND emp.state_code = new_emp.state_code; 
```

您可以通过执行单个 INSERT ALL 来进一步简化

```
INSERT ALL 
  WHEN new_emp.p_id = p_id
       THEN INTO new_emp( name, number, location, city, p_id, state_code )
              VALUES( name, number, location, city, p_id, state_code )
  WHEN new_emp.p_id = p_id AND
       new_emp.state_code = state_code
       THEN INTO emp_archive( name, number, location, city, p_id, state_code )
              VALUES( name, number, location, city, p_id, state_code )
  Select emp.name, emp.number, emp.Location, emp.City, emp.P_ID, emp.State_Code
    From Employee Emp, Former_Employee Femp
    Where Emp.Number = Femp.Number
      And State_Code = '4' 
```

# c# - Mono 的 BackgroundWorker 不在后台工作？

> ID：10441347
> 
> 赞同：4
> 
> 时间：2012-05-04T00:57:59.353
> 
> 标签：c#, .net, multithreading, mono, backgroundworker

我对 Mono 有一个困境。我试图了解`BackgroundWorker`实例如何或为什么不能同时运行，或者至少不能非常有效或快速地运行。就好像线程的数量受到了某种限制，但我不是 Mono 开发人员或 .NET 开发人员，所以我将自己置于我的兄弟们的怜悯之下。

考虑以下示例：

```
using System;
using System.ComponentModel;
using System.Threading;

namespace backgroundworkertest
{
  class MainClass
  {
    public static void foo(object sender, DoWorkEventArgs e) {
      Console.WriteLine("Start");
      Thread.Sleep(500);
      Console.WriteLine("Done");
    }

    public static void Main (string[] args)
    {
      for(int i = 0; i < 6; i++) {
        BackgroundWorker b = new BackgroundWorker();
        b.WorkerReportsProgress = false;
        b.DoWork += new DoWorkEventHandler(foo);
        b.RunWorkerAsync();
      }

      Thread.Sleep(2000);
      Console.WriteLine("Really done");
    }
  }
} 
```

当我运行上述内容时，我得到以下输出。

```
开始
开始
完毕
开始
开始
完毕
开始
完毕
真的完成了

```

首先，并非所有的`BackgroundWorker`s 都在整整两秒内完成。从循环中，很明显我正在实例化 6 个工作人员，但只有 3 个打印“完成”。如果所有 6 人同时运行，我觉得两秒钟应该足以让这些工作人员完成。

真正的内幕是我有一个运行良好的应用程序（使用大量`BackgroundWorker`通过 HTTP 在后台获取图像的 s。但是，不同之处在于这个应用程序是用 C# .NET 实现的。当我移植应用程序时对于 Mono，`BackgroundWorker`s 似乎一次只运行几个，因此 HTTP 连接很容易超时。我想看看是否是这种情况，因此上面的示例和问题......

这里发生了什么？为什么不是所有的`BackgroundWorker`s 都同时运行？我需要设置一些参数吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T02:05:46.380

我不能 100% 确定 Mono 的实现，但我对 Microsoft 版本非常了解，我只能假设 Mono 的行为方式相同或相似。

首先，澄清一下，事实上，`BackgroundWorker` *确实会*产生 .NET 线程（不同于本机线程），它与您`ThreadPool.QueueUserWorkItem`自己调用是一样的。这是一个很小的细节，可以帮助您了解为什么会看到这种行为。重要的是要记住 .NET 中的线程实际上可能并不代表本机线程。实际上，所有 6 个后台工作人员在 6 个 .NET 线程上运行时，都可以在 1-2 个本机线程上运行。在我的机器上，上面的代码实际上只生成了3 个*本机线程。*

其次，您没有考虑构建一个 new `BackgroundWorker`、设置委托、然后异步运行工作线程所花费的时间，这可能涉及也可能不涉及创建本机线程，这实际上是一项相当昂贵的操作。添加一个计时器，在我的测试中，创建全部六个总共只需要一秒钟多一点，有时会更长一些。由于调度，ThreadPool 可能需要几毫秒才能发现所有线程都饱和/阻塞（因为`Thread.Sleep`），然后创建一个新线程。这意味着，在某些情况下，您的后台工作人员可能会在 0:01:700 左右开始，此时只剩下 300 毫秒，但函数会休眠 500 毫秒。没有足够的时间完成任务。

我不认为 Mono 的实现运行速度比 Microsoft 慢一点是没有争议的，我敢肯定这就是为什么您可能没有发现您可以在它们的运行时发生相同行为的原因。

如有疑问，请归咎于您自己的代码，因为这通常是问题所在。睡多少时间你*期望*一个操作完成，并不是测试某事的好方法。如果计算机上正在运行其他程序会怎样？ `Thread.Sleep`如果其他进程的线程抢占了您的线程，则运行速度不会变慢。在这种情况下看起来会更糟。

如果您将代码更改为在方法中休眠 5ms `foo`，并在创建后台工作程序后在 main 方法中等待 20ms，您等待的比例相同，我可以看到以下内容：

```
开始
开始
完毕
完毕
开始
开始
真的做到了
按任意键继续 。. .

```

只有两个完成了，甚至都没有开始。我希望你现在看到你的测试中的缺陷。它们同时运行，我猜你的问题可能出在其他地方。你说你在后台通过 http 获取图像。请记住，如果某些事情不能正常工作，我会说只有 1% 的时间实际上是运行时发生了一些奇怪的事情，另外 99% 的时间是你的代码。您使用的是同步 I/O 还是异步 I/O？只有一个线程处理请求？我会从那里开始。

编辑：

我决定看看 Mono 的实际性能如何，而不是仅仅依赖于我在 Microsoft 实现中发现的内容。在发现Mono实际上开始了所有6个后台工作之后；他们都在 2000 毫秒的限制内完成！为了记录，这里是结果的比较。我稍微修改了代码以显示发生了什么，但我向您保证，当我按原样运行您的代码时，我得到了相同的结果。“完成创建...”消息在主线程进入 2000 毫秒睡眠之前打印，其中打印的时间戳是后台工作人员进入其工作方法的时刻。

```
Windows 单声道
完成创建...完成创建...
00:00:00.0018610 00:00:00.0088775
00:00:00.0019544 开始
开始 00:00:00.5074494
开始 开始
完成 完成
完成 00:00:00.5615083
00:00:00.5027995 开始
开始完成
00:00:00.5028008 00:00:01.0082133
开始 开始
完成时间 00:00:01.0082900
完成 开始
00:00:01.0025428 完成
开始 00:00:01.0618140
00:00:01.0026164 开始
开始完成
完成 完成
完成 完成
真的做到了 真的做到了

```

我在两个完全相同的机器上进行了测试（Dell T3400，相同的硬件），一个是 Windows 7 x64，另一个是 Ubuntu 12.04 x64。没有不同。确保您使用*没有*附加任何调试器的可执行文件的*发布版本对此进行测试。*还要确保您在相同的硬件上对其进行测试。有可能，但不太可能，这是您的 linux/mono 安装的问题（假设您在 linux 上运行 mono，而不是 windows）。就像我之前说的，我认为这些结果支持它，我认为这不是问题所在。我会在*您的*代码中的某个地方寻找其他地方。

# mysql - 我需要将许多行读入单个 SELECT 行

> ID：10441349
> 
> 赞同：-3
> 
> 时间：2012-05-04T00:58:45.263
> 
> 标签：mysql, sql, dynamic

我有一张桌子：

```
Id    FieldId   Value 
----------------------
1  -   23    -    Jhon Smith    
2  -   24    -    jhon@gmail.com    
3  -   28    -    company name    
4  -   29    -    zipcode 
```

我需要在一个 mysql 查询中从该表中获取所有数据。

我需要在查询结果的一行中所有这些数据。

因为一列：值 -> 有名称、电子邮件、公司名称和邮政编码。

这是因为此表可以为表单创建更多字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:30:32.713

这是正确的例子。你的表结构是错误的。运行这些 sql 命令

```
CREATE TABLE `test` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`name` varchar(255) DEFAULT NULL,
`email` varchar(255) DEFAULT NULL,
`zipcode` varchar(255) DEFAULT NULL,
`company_name` varchar(255) DEFAULT NULL,
PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=latin1;

insert  into `test`(`id`,`name`,`email`,`zipcode`,`company_name`) values (1,'Jhon Smith','jhon@gmail.com','0123012','ABC Company'); 
```

现在

```
SELECT * from test 
```

# javascript - 如何使信息框从链接onHover的右侧滑出？

> ID：10441355
> 
> 赞同：0
> 
> 时间：2012-05-04T00:59:20.890
> 
> 标签：javascript, css, html, slide

基本上我想要的是一些代码，所以当有人将鼠标悬停在链接上时（在我的#navigation 栏中），一个小框会滑出到它的右侧，解释链接是什么。如果可能的话，我希望它可以将其他链接一起移动到右侧，但如果这不可能，那么一个刚刚越过它的框就可以了。希望你们都明白我在问什么，并能够指导我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:20:40.607

您应该寻找[这些线程](https://stackoverflow.com/search?q=tooltip+html+)以获取使用 jQuery 等工具提示的实现帮助。但是您可以使用[title 属性来显示 tooltip](http://www.w3schools.com/tags/att_standard_title.asp)。你根本不需要 JavaScript。只需设置标题属性：'

姓名

'</p>

请注意，工具提示的视觉呈现取决于浏览器/操作系统，因此它可能会淡入，也可能不会。但是，这是执行工具提示的语义方式，它可以与屏幕阅读器等辅助功能软件一起正常工作。

看到这个[jsfiddle。](http://jsfiddle.net/MpnvA/)

如果您需要更多的工具提示功能，请使用 jQuery。Ref- [HTML 内容的工具提示](https://stackoverflow.com/questions/7664791/tooltip-for-html-content)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T01:23:20.197

试试这个，从你提到的完美：

查看左侧的蓝色联系按钮。

[http://www.building58.com/examples/tabSlideOut.html](http://www.building58.com/examples/tabSlideOut.html)

或这个：

[http://www.craigsworks.com/projects/simpletip/](http://www.craigsworks.com/projects/simpletip/)

点击演示，然后在效果标题下的第二部分下查看，第二个链接向下

希望这可以帮助

# c# - 可以使用包含参数值的 ToTraceString() 获取 ESQL？

> ID：10441356
> 
> 赞同：0
> 
> 时间：2012-05-04T00:59:32.253
> 
> 标签：c#, .net, linq, entity-framework, entity-framework-4

我将 IQueryable 转换为 ObjectQuery，然后调用 ToTraceString() 以获取实体 sql：

```
IQueryable<SomeItem> query = context.SomeItem
            .Where(x => x.Timestamp >= start
                     && x.Timestamp <= end);

string eSql = (query as ObjectQuery<SomeItem>).ToTraceString(); 
```

字符串的“WHERE”部分如下所示：

```
WHERE ([Extent1].[Timestamp] >= @p__linq__0) AND ([Extent1].[Timestamp] <= @p__linq__1)]" 
```

有没有办法以实际 DateTime 值已经填充到 ESQL 而不是这些参数占位符的方式获取跟踪字符串？

我想拦截 Entity Sql 并使用原始 EntityDataReader 自己迭代结果。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:42:58.037

我相信这不是 ESQL，而是查询被翻译成的实际 SQL，因为 Linq 查询没有被翻译成 ESQL。SQL 语句中永远不会嵌入参数，以防止 Sql 注入攻击。而不是如果有参数（对于 SqlServer），将调用 sp_executesql，因为它允许为占位符传递参数。

# javascript - MVC3 Razor 无法识别何时停止解析

> ID：10441357
> 
> 赞同：5
> 
> 时间：2012-05-04T00:59:42.620
> 
> 标签：javascript, asp.net-mvc-3, razor, conditional

这是我正在尝试做的事情：

```
$(document).ready(function () {
    @if (ViewBag.VerifyIfLoggedIn) {

        $("#needlogin-popup").dialog({
            modal: true,
            closeOnEscape: true,
            minHeight: 384,
            minWidth: 596,
            resizable: false,
            show: {
                effect: 'slide',
                duration: 500,
                direction: 'up'
            },
            hide: {
                effect: 'slide',
                duration: 250,
                direction: 'up'
            },
            title: 'Inicie Sesion'
        });
    }
}); 
```

如果某件事属实，则将此 Javascript 代码输出到页面。

但我得到了错误：

> CS1056: 意外字符“$”

如何告诉 Razor 停止解析并输出条件语句中的任何内容？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T01:15:40.213

`<text>...</text>`在代码周围使用。

在此处阅读它的工作原理：

[http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx)

> 标签是 Razor 特殊处理的元素。它导致 Razor 将块的内部内容解释为内容，并且不渲染包含标签元素（这意味着只会渲染元素的内部内容 - 标签本身不会）。
> 
> 当您要呈现未由 HTML 元素包装的多行内容块时，这很方便。

```
$(document).ready(function () { 
    @if (ViewBag.VerifyIfLoggedIn) { 
        <text>$("#needlogin-popup").dialog({ 
            modal: true, 
            closeOnEscape: true, 
            minHeight: 384, 
            minWidth: 596, 
            resizable: false, 
            show: { 
                effect: 'slide', 
                duration: 500, 
                direction: 'up' 
            }, 
            hide: { 
                effect: 'slide', 
                duration: 250, 
                direction: 'up' 
            }, 
            title: 'Inicie Sesion' 
        }); </text>
    } 
}); 
```

# python - “重载”不适用于标准错误

> ID：10441360
> 
> 赞同：1
> 
> 时间：2012-05-04T01:00:17.730
> 
> 标签：python, c, python-c-api, python-embedding

```
/*---------------stdcallbk_module.h---------------------*/
#ifndef STDCALLBK_MODULE_H
#include <Python.h>
#define STDCALLBK_MODULE_H

// Type definition for the callback function.
typedef void __stdcall(CALLBK_FUNC_T)(const char* p);

#ifdef __cplusplus
extern "C" {
#endif
  void register_callback(CALLBK_FUNC_T* callback);
  void import_stdcallbk(void);
#ifdef __cplusplus
}
#endif

#endif    /* #define STDCALLBK_MODULE_H */

/*---------------stdcallbk_module.c---------------------*/
#include "stdcallbk_module.h"

static CALLBK_FUNC_T *callback_write_func = NULL;
static FILE *fp;    /*for debugging*/
static PyObject* g_stdout;

typedef struct
{
    PyObject_HEAD
    CALLBK_FUNC_T *write;
} Stdout;

static PyObject* write2(PyObject* self, PyObject* args)
{
    const char* p;

    if (!PyArg_ParseTuple(args, "s", &p))
        return NULL;

    fputs(p, fp);    fflush(fp);
    if(callback_write_func)
        callback_write_func(p);
    else
        printf("----%s----", p);

    return PyLong_FromLong(strlen(p));
}

static PyObject* flush2(PyObject* self, PyObject* args)
{
    // no-op
    return Py_BuildValue("");
}

static PyMethodDef Stdout_methods[] =
{
    {"write", write2, METH_VARARGS, "sys-stdout-write"},
    {"flush", flush2, METH_VARARGS, "sys-stdout-write"},
    {NULL, NULL, 0, NULL}
};

static PyTypeObject StdoutType =
{
    PyVarObject_HEAD_INIT(0, 0)
    "stdcallbk.StdoutType", /* tp_name */
    sizeof(Stdout), /* tp_basicsize */
    0, /* tp_itemsize */
    0, /* tp_dealloc */
    0, /* tp_print */
    0, /* tp_getattr */
    0, /* tp_setattr */
    0, /* tp_reserved */
    0, /* tp_repr */
    0, /* tp_as_number */
    0, /* tp_as_sequence */
    0, /* tp_as_mapping */
    0, /* tp_hash */
    0, /* tp_call */
    0, /* tp_str */
    0, /* tp_getattro */
    0, /* tp_setattro */
    0, /* tp_as_buffer */
    Py_TPFLAGS_DEFAULT, /* tp_flags */
    "stdcallbk.Stdout objects", /* tp_doc */
    0, /* tp_traverse */
    0, /* tp_clear */
    0, /* tp_richcompare */
    0, /* tp_weaklistoffset */
    0, /* tp_iter */
    0, /* tp_iternext */
    Stdout_methods, /* tp_methods */
    0, /* tp_members */
    0, /* tp_getset */
    0, /* tp_base */
    0, /* tp_dict */
    0, /* tp_descr_get */
    0, /* tp_descr_set */
    0, /* tp_dictoffset */
    0, /* tp_init */
    0, /* tp_alloc */
    0, /* tp_new */
};

static struct PyModuleDef stdcallbkmodule = {
    PyModuleDef_HEAD_INIT,
    "stdcallbk",   /* name of module */
    NULL, /* module documentation, may be NULL */
    -1,       /* size of per-interpreter state of the module,
                or -1 if the module keeps state in global variables. */
    NULL,
    NULL,
    NULL,
    NULL,
    NULL
};

PyMODINIT_FUNC PyInit_stdcallbk(void)
{
    PyObject* m;

    fp = fopen("debuggered.txt", "wt");
    fputs("got to here Vers 12\n", fp);  fflush(fp);

    StdoutType.tp_new = PyType_GenericNew;
    if (PyType_Ready(&StdoutType) < 0)
        return 0;

    m = PyModule_Create(&stdcallbkmodule);
    if (m)
    {
        Py_INCREF(&StdoutType);
        PyModule_AddObject(m, "Stdout", (PyObject*) &StdoutType);
        fputs("PyModule_AddObject() Called\n", fp); fflush(fp);
    }
    g_stdout = StdoutType.tp_new(&StdoutType, 0, 0);

    /*PySys_SetObject("stdout", g_stdout)*/
    fprintf(fp, "PySys_SetObject(stdout) returned %d\n", PySys_SetObject("stdout", g_stdout));
    fflush(fp);

    /*PySys_SetObject("stderr", g_stdout)*/
    fprintf(fp, "PySys_SetObject(stderr) returned %d\n", PySys_SetObject("stderr", g_stdout));
    fflush(fp);

    return m;
}

/* called by cpp exe _after_ Py_Initialize(); */
void __declspec(dllexport) import_stdcallbk(void)
{
    PyImport_ImportModule("stdcallbk");
}

/* called by cpp exe _before_ Py_Initialize(); */
void __declspec(dllexport) register_callback(CALLBK_FUNC_T* callback)
{
    PyImport_AppendInittab("stdcallbk", &PyInit_stdcallbk);
    callback_write_func = callback;
}

/*------------- Embarcadero C++ Builder exe ---------------------*/
#include "/py_module/stdcallbk_module.h"

void __stdcall callback_write_func(const char* p)
{
    ShowMessage(p);
}
//---------------------------------------------------------------------------
void __fastcall TForm1::Button1Click(TObject *Sender)
{
    PyObject *pName, *pModule;

    register_callback(callback_write_func);

    Py_Initialize();
    import_stdcallbk();
    //PyRun_SimpleString("import stdcallbk\n");

    pName = PyUnicode_FromString("hello_emb.py");
    pModule = PyImport_Import(pName);
    Py_Finalize();

}
//---------------------------------------------------------------------------

-------------- python script - hello_emb.py ----------------
#import stdcallbk

print("HELLO FRED !")

assert 1==2

------------------------------------------------------------ 
```

上面的代码是从这里借用的：[How to redirect stderr in Python? 通过 Python C API？](https://stackoverflow.com/questions/1956407/how-to-redirect-stderr-in-python-via-python-c-api)

从 cpp exe 运行时，我收到一个消息框“HELLO FRED！” 接下来是一个空的消息框，我认为它是回车。到目前为止一切都很好，但是当引发异常时，我什么也得不到。也没有将任何内容写入文本文件。

但是......如果我从python脚本中取消注释“import stdcallbk”并从命令行运行它，我会得到这个：

```
D:\projects\embed_python3\Win32\Debug>hello_emb.py
----HELLO FRED !--------
--------Traceback (most recent call last):
--------  File "D:\projects\embed_python3\Win32\Debug\hello_emb.py", line 7, in <module>
--------    --------assert 1==2--------
--------AssertionError----------------
---- 
```

和这个：

```
D:\projects\embed_python3\Win32\Debug>type debuggered.txt
got to here Vers 12
PyModule_AddObject() Called
PySys_SetObject(stdout) returned 0
PySys_SetObject(stderr) returned 0
HELLO FRED !
Traceback (most recent call last):
  File "D:\projects\embed_python3\Win32\Debug\hello_emb.py", line 7, in <module>
    assert 1==2
AssertionError 
```

所以它确实有效，只是在从 cpp exe 运行时无效。

有人知道这里到底发生了什么吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:54:49.153

您的断言将导致`hello_emb`导入失败。模块的主体是在导入模块时执行的。在您的情况下，这发生在`PyImport_Import()`通话中。它将打印“HELLO FRED！” 很好，但随后它会到达将引发异常的断言。

`PyImport_Import()`将返回`NULL`以表明这一点。您必须检查并采取适当的措施（这可能并不总是打印回溯，这就是它留给您的原因）。

如果要将错误打印到 stderr，则必须调用`PyErr_Print()`.

```
pName = PyUnicode_FromString("hello_emb.py");
pModule = PyImport_Import(pName);
if (pModule == NULL)
    PyErr_Print(); 
```

*与代码无关的问题：*

这不是唯一缺少错误检查的地方（但只有上面一个是缺少回溯的原因）。调用`fopen`或几乎任何 Python C/API 调用都可能失败，你应该处理它。

此外，在`PyInit_stdcallbk`. 在您创建 stdout 对象后，它的引用计数为 1。然后将其设置为`sys.stdout`and使其变为`sys.stderr`3。之后您应该`Py_DECREF`将其设为 2 以便如果/当它从`stdout`and中删除时`stderr`，它将被释放记忆。现在它永远不会被释放。

# html - 如何在没有来源的情况下删除图像周围的边框？

> ID：10441362
> 
> 赞同：42
> 
> 时间：2012-05-04T01:00:27.617
> 
> 标签：html, css

我有一张图片，但我还没有定义来源。它有一个边框：/

例如：`<img src="" />`

如果我给它一个来源，边界就会消失（由于 css: `border:none`）。

当图像没有来源时，如何删除图像周围的边框？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-10T10:42:13.500

我可以建议的是，如果没有 src="" 删除它，你可以

```
img {
    display: none;
}

img[src] {
   display: block;
 } 
```

或者如果你知道 url 包含一些特殊的词，比如 http 你可以这样做：

```
img[src*="http"] {
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-05-04T01:09:20.040

```
<img src="" width=50 height=50>
```

上面显示的损坏的图像占位符和后续边框是浏览器功能，无法设置样式。

您可以通过隐藏图像来解决此限制，或者如果您需要它进行布局，您可以使用占位符图像或透明像素。

**隐藏图片**

```
img[src=""] { display: none; } 
```

**使用占位符图像或透明像素**

```
img[src=""] { content:url("data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="); } 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-06-24T18:12:23.333

带有数据的图像： URL src 属性

```
<img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="> 
```

根据您需要的浏览器支持，您还可以：

```
img[src=""] {
  content:url("data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==");
} 
```

见： http: [//probablyprogramming.com/2009/03/15/the-tiniest-gif-ever](http://probablyprogramming.com/2009/03/15/the-tiniest-gif-ever)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-02-16T10:58:45.770

我建议使用`text-indent: 100vw;`

```
.logo {
  text-indent: 100vw;
}
```

```
<img class="logo" src="" alt="my logo" />
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-05-11T15:24:11.207

`visibility: hidden;`保持图像空间为空。 `display: none;`完全隐藏图像并且没有保留空间

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-04T01:06:34.353

你可以隐藏它，直到你给它一个 src。

```
img {
 height: 200px;
 width: 200px;
 visibility: hidden;    
}​ 
```

或者给它 0 大小

```
img {
 height: 0;
 width: 0;  
}​ 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-04-21T10:20:10.507

这是我的解决方案，即使图像没有 [src] 属性（例如 lozad.js）也可以使用。使用不透明度保留的空间。

```
// prevent borders around images without [src] value/attribute
img[src=""],
img:not([src]){
  opacity: 0;
}

img[src="*"]{
  opacity: 1;
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-07-26T11:18:28.007

使用 alt 属性：如果图像无法显示，它指定图像的替代文本。如果用户由于某种原因无法查看图像，则 alt 属性提供图像的替代信息。

如果您不想在未加载图像的情况下显示任何替代文本，则将**替代属性留空**

```
img {
  width:50px;
  height:50px;
}
```

```
<img src="kansdkans" alt=" " />
```

如果您**不想在**未加载图像的情况下显示任何内容，请使用以下给定的 css 代码：

```
img {
    display: none;
}    
img[src] {
   display: block;
 } 
```

工作示例：

```
img {
    display: none;
}
img[src] {
   display: block;
 }
```

```
<img src="adfcd.png" alt=""  height="100" width="100"/>  <!--nothing will be displayed because source is not found -->
<br>
<img src="https://banner2.kisspng.com/20171210/0a9/linux-logo-vector-5a2d217764a349.8093308915129071274122.jpg" alt=""  height="100" width="100"/>
<!--image will be displayed if the source is found-->
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-24T03:47:20.973

你的 img 标签的 src 可以是 404 Err。在这种情况下，您可以使用以下方式：

```
div.menu_avatar {
    width: 50px;
    height: 50px;
    overflow:hidden;
}
div.menu_avatar img{
    width:52px;
    height:52px;
    margin-left: -1px;
    margin-top:-1px;
} 
```

# android - Sencha touch 用于移动 Web 开发

> ID：10441364
> 
> 赞同：0
> 
> 时间：2012-05-04T01:00:55.217
> 
> 标签：android

我是制作移动网站的新手。我看到了大多数人推荐的煎茶触摸。所以我只想问你们我应该从什么工具或任何专业知识开始。我已经下载了 sencha touch 2.0.1-commercial。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:24:37.677

您可以从入门指南开始。这将帮助您设置环境： [http ://docs.sencha.com/touch/2-0/#!/guide/getting_started](http://docs.sencha.com/touch/2-0/#!/guide/getting_started)

继续 Hello World： [http ://docs.sencha.com/touch/2-0/#!/guide/first_app](http://docs.sencha.com/touch/2-0/#!/guide/first_app)

在这个简短的介绍之后，您可能会开始熟悉 MVC 应用程序架构：[http ://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture](http://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture)

然后您可以继续使用 Sencha Architect： [http ://docs.sencha.com/architect/2-0/#!/guide](http://docs.sencha.com/architect/2-0/#!/guide)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:40:01.560

[http://jquerymobile.com/](http://jquerymobile.com/)

以后从这里开始，别着急

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:46:30.590

您确实需要了解 HTML、CSS 和 JavaScript-Ajax...这些是 Sencha Touch 的先决条件

# c# - 防止服务的多个实例 - 最佳方法？

> ID：10441368
> 
> 赞同：23
> 
> 时间：2012-05-04T01:01:06.800
> 
> 标签：c#, windows, multithreading, service

那么您认为防止 C# Windows 服务的多个线程同时运行的最佳方法是什么（该服务正在使用`timer`事件`OnElapsed`）？

使用`lock()`或`mutex`？

我似乎无法掌握 的概念`mutex`，但 using`lock()`似乎对我的情况很好。

我应该花时间学习如何使用这些`mutex`东西吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-05-04T03:00:26.587

使您的计时器成为一次性的，并在经过的事件处理程序中重新初始化它。例如，如果你使用`System.Timers.Timer`，你会像这样初始化它：

```
myTimer.Elapsed = timer1Elapsed;
myTimer.Interval = 1000; // every second
myTimer.AutoReset = false; // makes it fire only once
myTimer.Enabled = true; 
```

和你过去的事件处理程序：

```
void timerElapsed(object source, ElapsedEventArgs e)
{
    // do whatever needs to be done
    myTimer.Start(); // re-enables the timer
} 
```

这样做的缺点是计时器不会以一秒的间隔触发。相反，它会在最后一个滴答的处理完成后一秒触发。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-04T01:33:09.363

不要使用计时器来生成线程。只启动一个线程。当线程完成一个工作周期时，计算下一个周期应该开始之前的剩余时间。如果此时间间隔为 0 或负数，则立即循环返回并开始一个新的循环，如果为正数，则在循环返回之前休眠该时间间隔。

这通常是通过在结束滴答声和开始滴答声之间获取无符号整数减法的 int 结果来完成的，因此给出了工作所采用的经过的滴答声。从所需的时间间隔中减去这个，就得到了新的剩余时间。

不需要额外的计时器线程，不可能同时运行两个线程，简化的整体设计，没有连续的创建/启动/终止/销毁，没有 mallocs，没有 new()，没有堆栈分配/释放，没有 GC。

其他使用定时器、互斥体、信号量、锁等的设计过于复杂。如果不制作任何额外的线程更容易和更简单，为什么还要尝试用同步来停止额外的线程呢？

有时，使用计时器而不是 sleep() 循环是一个非常糟糕的主意。这听起来像是其中之一。

```
public void doWorkEvery(int interval)
{
    while (true)
    {
        uint startTicks;
        int workTicks, remainingTicks;
        startTicks = (uint)Environment.TickCount;
        DoSomeWork();
        workTicks=(int)((uint)Environment.TickCount-startTicks);
        remainingTicks = interval - workTicks;
        if (remainingTicks>0) Thread.Sleep(remainingTicks);
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-25T18:31:17.463

如果回调已被另一个计时器线程执行，您可以使用*Monitor.TryEnter()*代替*lock来返回：*

 *```
class Program
{
    static void Main(string[] args)
    {
        Timer t = new Timer(TimerCallback, null,0,2000);
        Console.ReadKey();
    }

    static object timerLock = new object();

    static void TimerCallback(object state)
    {
        int tid = Thread.CurrentThread.ManagedThreadId;
        bool lockTaken = false;
        try
        {
            lockTaken = Monitor.TryEnter(timerLock);
            if (lockTaken)
            {
                Console.WriteLine("[{0:D02}]: Task started", tid);
                Thread.Sleep(3000); // Do the work 
                Console.WriteLine("[{0:D02}]: Task finished", tid);
            }
            else
            {
                Console.WriteLine("[{0:D02}]: Task is already running", tid);
            }
        }
        finally
        {
            if (lockTaken) Monitor.Exit(timerLock);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-04T03:08:40.920

我想我知道你想做什么。您有一个定期执行回调的计时器（计时器的定义），并且该回调做了一些工作。那一点工作实际上可能需要比计时器周期更多的时间（例如，计时器周期是 500 毫秒，而给定的回调调用可能需要更长的时间 500 毫秒）。这意味着您的回调需要可重入。

如果您不能重入（可能有多种原因）；我过去所做的是在回调开始时关闭计时器，然后在结束时将其重新打开。例如：

```
private void timer_Elapsed(object source, ElapsedEventArgs e)
{
    timer.Enabled = false;
    //... do work
    timer.Enabled = true;
} 
```

如果您真的希望一个“线程”在另一个之后立即执行，我不建议使用计时器。我建议使用 Task 对象。例如

```
Task.Factory.StartNew(()=>{
    // do some work
})
.ContinueWith(t=>{
    // do some more work without running at the same time as the previous
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-04T01:05:08.107

如果您只想防止*同一进程/应用程序域中的*两个线程同时执行，那么该`lock`语句可能会为您做。

但请注意，这`lock`会使其他线程在等待访问临界区时处于*锁定状态。*它们不会被中止或重定向或任何东西；他们坐在那里，等待原始线程完成`lock`块的执行，以便他们可以运行。

A`mutex`会给你更大的控制权；包括使第二个和后续线程完全停止的能力，而不是锁定和锁定跨进程的线程。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-16T23:10:36.753

我认为其中一些方法很棒，但有点复杂。

我创建了一个包装类，它可以防止计时器重叠，并允许您选择是“每个 INTERVAL 应该调用一次 ELAPSED”还是“调用之间应该发生一个 INTERVAL 延迟”。

如果您改进了此代码，请在此处发布更新！

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace AllCommander.Diagnostics {
    public class SafeTimer : IDisposable {

        public enum IntervalStartTime {
            ElapsedStart,
            ElapsedFinish
        }

        private System.Timers.Timer InternalTimer;

        public bool AutoReset { get; set; }

        public bool Enabled {
            get {
                return InternalTimer.Enabled;
            }
            set {
                if (value) {
                    Start();
                } else {
                    Stop();
                }
            }
        }

        private double __Interval;
        public double Interval {
            get {
                return __Interval;
            }
            set {
                __Interval = value;
                InternalTimer.Interval = value;
            }
        }

        /// <summary>
        /// Does the internal start ticking at the END of Elapsed or at the Beginning? 
        /// </summary>
        public IntervalStartTime IntervalStartsAt { get; set; }

        public event System.Timers.ElapsedEventHandler Elapsed;

        public SafeTimer() {
            InternalTimer = new System.Timers.Timer();
            InternalTimer.AutoReset = false;
            InternalTimer.Elapsed += InternalTimer_Elapsed;

            AutoReset = true;
            Enabled = false;
            Interval = 1000;
            IntervalStartsAt = IntervalStartTime.ElapsedStart;
        }

        void InternalTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e) {

            if (Elapsed != null) {
                Elapsed(sender, e);
            }

            var ElapsedTime = DateTime.Now - e.SignalTime;

            if (AutoReset == true) {
                //Our default interval will be INTERVAL ms after Elapsed finished.
                var NewInterval = Interval;
                if (IntervalStartsAt == IntervalStartTime.ElapsedStart) {
                    //If ElapsedStart is set to TRUE, do some fancy math to determine the new interval.
                    //If Interval - Elapsed is Positive, then that amount of time is remaining for the interval
                    //If it is zero or negative, we're behind schedule and should start immediately.
                    NewInterval = Math.Max(1, Interval - ElapsedTime.TotalMilliseconds);
                }

                InternalTimer.Interval = NewInterval;

                InternalTimer.Start();
            }

        }

        public void Start() {
            Start(true);
        }
        public void Start(bool Immediately) {
            var TimerInterval = (Immediately ? 1 : Interval);
            InternalTimer.Interval = TimerInterval;
            InternalTimer.Start();
        }

        public void Stop() {
            InternalTimer.Stop();
        }

        #region Dispose Code
        //Copied from https://lostechies.com/chrispatterson/2012/11/29/idisposable-done-right/
        bool _disposed;
        public void Dispose() {
            Dispose(true);
            GC.SuppressFinalize(this);
        }

        ~SafeTimer() {
            Dispose(false);
        }

        protected virtual void Dispose(bool disposing) {
            if (!_disposed) {
                if (disposing) {
                    InternalTimer.Dispose();
                }

                // release any unmanaged objects
                // set the object references to null
                _disposed = true;
            }
        }
        #endregion

    }
} 
```*

# jquery - jQuery 将表单数据传递到新页面

> ID：10441371
> 
> 赞同：2
> 
> 时间：2012-05-04T01:02:16.677
> 
> 标签：jquery, forms

情况：我有两个相同的表格，在两个单独的页面上。

*   第 1 页：此页面上的表单有一个选择字段，提交时应该将您带到第二页并将另一个相同的表单设置为相同的选择

*   第 2 页：此页面有一个带有选择字段的表单（没有提交按钮）。更改选择时，我使用jQuery获取选项的内容，并显示带有Corrsponding类的DIV。使用下面的代码：

    ```
    $('.result').hide();
    $('#servicearea').change(function() {   
        $('.result').hide();

        var optionValue = $ (this).attr('value');
        $('#'+optionValue).show('fast');

    }); 
    ```

问题：

*   如何选择表单数据，
*   链接到第 2 页，
*   并将表单数据注入现有表单

我是 jQuery 的新手，所以我不知道从哪里开始。请友好一点。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-09-30T11:02:54.123

您可以尝试使用 localStorage 传输数据..认为这应该是您正在寻找的（如果您不想使用 php 或类似的东西..）。

[在此处输入链接描述](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage)

快速示例：

```
// first page
<script>
$('#submit').on('click', function (e) {
e.preventDefault();
var val1 = $('#val1').val();
var val2 = $('#val2').val();
var action = $('#form').attr('action'); // next page

window.localStorage.setItem('formData', JSON.stringify({
val1: val1,
val2: val2
}))
});

window.open(action, '_self');
</script>

// second page
<script>
$(window).on('load', function() {
var storage = window.localStorage.getItem('formData');

if (storage) {
storage = JSON.parse(storage);

$('#val1').val(storage.val1);
$('#val2').val(storage.val2)
}
})
</script> 
```

这应该抓取字段（只需更改为您的字段），存储在 localStorage 然后打开下一页（应该是表单上的操作属性）。在下一页，我们在 localStorage 中查找值并填充表单。

*   编辑：我是用手机写的，所以请原谅错别字...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:19:39.110

Personally, I use the `QueryParser()` constructor found [here](http://www.daniweb.com/web-development/javascript-dhtml-ajax/code/217357/javascript-query-parser).

This has the following advantage over the `gup()` function posted by Matthew Nie :

*   Parses the query string *once* and stores all parameters as properties of an object.

It also allows :

*   Stored parameters to be changed or cleared
*   New parameters to be added
*   A new query query string to be built from the currently stored parameters
*   Links to be built with `href` containing a query string built from the currently stored parameters.

In conjunction with jQuery, use `QueryParser()` as follows :

## Page 1

*   Submit the form as described by Maksym Kozlenko.

## Page 2

*   Install `jQuery` and `QueryParser()` on the page
*   For each form field, `$("#formID [name='fieldName']").val($q.fieldName)`.

Or to save having to hand-code each form field individually :

```
$.each($("#myform")[0].elements, function(index, element) {
    $(element).val($q[element.name]);
}); 
```

Thus, the form on the page 2 will be populated with the values entered/selected on page 1.

[DEMO](http://jsfiddle.net/sbd4c/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T03:11:39.690

使用@Maksym Kozlenko 提出的想法，即在第一页使用普通的旧 HTML 表单并使用 GET 方法提交到第二页。然后，您可以使用 javascript 来获取您使用此函数发送的 GET 数据，我已经使用了一段时间，我在[这个网站上找到了它。](http://www.netlobo.com/url_query_string_javascript.html)

```
 function gup( name )
{
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    return "";
  else
    return results[1];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T02:20:42.660

为什么不用普通的旧 HTML 让事情变得非常简单？

```
<form action="/second_page_url" method="GET">
   ... form fields ...
   <input type="submit" />
</form> 
```

*   将操作属性设置为第二页 URL。使用提交按钮或 Java 脚本提交表单。
*   如果表单使用 GET 方法，所有字段值都将在 window.location 中可用（您可以将[URL 参数字符串解析](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript/901144#901144)为 JS 对象）或在服务器上处理表单 POST 数据并添加到页面
*   使用提供的数据设置第二页控件

也可以使用 cookie、HTML5 本地存储，但您应该考虑到用户可以打开多个窗口/选项卡。

您还可以使用 jQuery 的 serialize() 方法序列化表单值，但我认为没有任何理由这样做，除非您使用 AJAX 请求发送数据。

# forms - Grails - 重复表单提交处理 - withForm{} 如何工作？

> ID：10441372
> 
> 赞同：1
> 
> 时间：2012-05-04T01:02:17.430
> 
> 标签：forms, grails, duplicates, form-submit

我正在尝试在我的 Grails 应用程序中处理重复的表单提交。所以我`useToken="true"`在我的表单中设置，这就是我尝试`withForm`在我的控制器中使用该方法的方式：

```
def myControllerAction {
    withForm {
       *my action's logic*
    }
} 
```

但是，我最终得到：`Error 310 (net::ERR_TOO_MANY_REDIRECTS): There were too many redirects.`在我的浏览器中。所以我想我没有正确使用它，我还没有在网上找到任何关于如何正确使用该方法的示例。

对此的任何帮助都会非常有帮助。提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T03:06:40.780

您的示例中并没有太多内容：简短的回答是，如果令牌无效，您必须做一些事情来导致重定向。

[Grails 手册](http://grails.org/doc/latest/guide/theWebLayer.html#formtokens)展示了如何使用它。

所有的逻辑都是在其中放置一个具有唯一值的隐藏字段。该值存储在会话中，因此您的会话必须正常工作（如果托管在集群环境中，您需要会话亲和性或共享会话）。提交表单时，它会查找该唯一值，并确定它是否已经提交。

您似乎没有处理`invalidToken`任何地方，因此您可能正在处理令牌未正确存储或传递的情况，并且您的逻辑导致重定向。如果您使用 a`get`而不是 a进行重定向`post`，这可能会导致重定向循环。（即使第一次*正确处理了令牌，这也可能导致重定向循环。）*

我会查看您的代码并找出重定向的来源。它不是由令牌直接引起的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-07T15:10:25.787

答案在问题中 - '**重复**表单提交'，您有**两个**请求被发送到服务器，因此您必须同时处理**它们**。

因此，浏览器向服务器发送了两个相同的请求，因此该操作将被调用两次。

第一个请求将成功，并使用 'withForm' 块中的代码，并且令牌将递增。

第二个请求仍然包含与第一个请求相同的令牌，但服务器已丢弃该令牌，因此第二个请求使用“invalidToken”块中的代码，或者如果您省略了“invalidToken”块，则使用默认块.

重要的一点是 - 这是第二个（错误）请求将决定浏览器上显示的内容，因为它在第一个之后到达，所以我决定在处理错误请求时将用户重定向回索引，他们应该能够看到由第一个请求创建和保存的记录。IE

```
 }.invalidToken 
 {
    println "myController: swallowing request with invalidToken (probably a double-click or due to using back button in browser.)"
    flash.invalidToken = " " // just enough to trigger the g:if in the index.gsp
    redirect action:"index", method:"GET"
 } 
```

然后在 index.gsp 中，我显示一条消息：

```
<g:if test="${flash.invalidToken}">
<ul class="errors" role="alert">
<li>
    <g:message code="error.doubleclick" 
           default="oops, the item you are creating exists already (maybe you double-clicked on the 'Save' button ?).  Click on the item in the list below to continue working with that item."
/>
</li>
</ul> 
```

这可以正常工作，并且足够通用，您可以将 n 粘贴到任何控制器和 index.gsp 中，而无需对其进行自定义。

# mysql - SQL 将数百万条虚拟记录插入 MySQL 数据库

> ID：10441374
> 
> 赞同：0
> 
> 时间：2012-05-04T01:02:30.703
> 
> 标签：mysql, sql

我有一个 MySQL 数据库，我想测试它的性能。我想将大约 500 万条记录插入到具有自动递增主键的表中。有没有一种简单的方法可以用 SQL 快速做到这一点？我知道我可以通过管道输入 .sql 文件，但我真正想做的只是插入相同的数据（但 PK 不同），500 万次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:03:29.880

您可以插入 NULL 作为 PK 的值，或者只是不在插入语句的列列表中指定它。这样它就会自动递增。

```
for ($i=0; $i<5000000; $i++) {
    "INSERT INTO table (id,name) values (NULL,'somename')"; // obviously in form of $dbh->() something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T01:43:39.013

这可能不是一个好的性能测试，因为除了 PK 之外，相同的行不会创建具有规则分布值的索引，因此大多数查询不会展示预期的性能。

我会考虑使用像 Faker 这样的测试数据生成工具（存在 ruby​​ 和 perl 品种）：

[http://faker.rubyforge.org/](http://faker.rubyforge.org/)

# java - 动态更新 JTextArea 并从中读取特定文本

> ID：10441381
> 
> 赞同：1
> 
> 时间：2012-05-04T01:03:01.060
> 
> 标签：java, swing, jtextarea

我正在构建一个带有一个 JTextArea 的 ATM 模拟器，它将显示与用户的所有交互。我希望用户输入 pin 并在欢迎消息下方的 JtextArea 星号中显示他。在我的代码中将它们作为实数读取时如何显示星号，以便我可以验证我的用户？我还希望 JTextArea 在用户从一个步骤到下一个步骤时使用不同的文本动态更新。例如，它会覆盖用于输入 pin 的文本以及关于撤回等的文本。它将继续这样做，用户将看到屏幕更新相关信息。欢迎任何有关我如何操作 JtextArea 的资源或帮助，或者如果有人可以提出更好的方法来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:09:59.897

如果您尝试使用 JTextArea，就好像它是一个控制台，它与用户逐行交互，并且不显示 PIN 号，它可能会有点棘手。一种可能的解决方案是在 JTextArea 的 Document 上使用 DocumentFilter（首先转换为 PlainDocument）并传递所有输入的文本*，除非*您的程序处于 PIN 获取模式（也许您将为此设置一个布尔变量），并且在这种情况下，您将输入的文本保存到程序本身，但仅通过 DocumentFilter 显示“*”。这可能是矫枉过正，但它可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T01:10:55.097

`JPasswordField`我认为您可能需要一个实例。

对于放置星号，

```
passwordField.setEchoChar('*'); 
```

并恢复 PIN：

```
char[] pin = passwordField.getPassword(); 
```

使用这种方法，您需要一些其他组件，例如`JLabel`向用户显示信息，欢迎消息。

# jquery - 使用 jquery mobile 播放视频并切换

> ID：10441382
> 
> 赞同：0
> 
> 时间：2012-05-04T01:03:05.060
> 
> 标签：jquery, jquery-mobile

我正在用 jquery 创建一个切换开关，但仍然不明白如何用这个切换触发任何东西。所以我有这个：

```
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script language="javascript" type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head>
<body>
<div data-role="page" id="page1">
<div data-role="content">
<div data-role="fieldcontain">
<?php
for($i=0;$i<$num_cameras;$i++)
{
?>

<select name="<?php echo "toggleswitch".$i; ?>" id="<?php echo "toggleswitch".$i; ?>" data-theme="" data-role="slider">
    <option value="off">Off</option>
    <option value="on">On</option>
</select>
<label for="<?php echo "toggleswitch".$i; ?>">
<?php echo $cameras[$i]["camera_name"]; ?> 
</label>
<?php
}
?>                              

</div>
</div>
</div>  

<?php
}
}
?>
</body> 
```

我正在从服务器获取摄像机列表，所以我不知道这是否会使事情复杂化。我想做的是当有人点击切换到“开”时开始播放视频。我不明白我需要从翻转切换开关上的[jquery 文档中做什么。](http://jquerymobile.com/test/docs/forms/switch/)

输出如下所示：

```
<select name="toggleswitch0" id="toggleswitch0" data-theme="" data-role="slider">
<option value="off">Off</option>
<option value="on">On</option>
</select>
<label for="toggleswitch0">Default camera</label>

                                               <select name="toggleswitch1" id="toggleswitch1" data-theme="" data-role="slider">
<option value="off">Off </option>
<option value="on">On</option>
</select>
<label for="toggleswitch1">test</label> 
```

基本上根据我找到的摄像机数量创建了许多切换开关，在这种情况下为 2。我真的不知道从这里到哪里去激活这些切换来做某事（在我的情况下播放视频）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T04:56:47.720

尝试使用 .change() 方法和 .val();

```
$(document).on('pageinit',function(){
    $('#toggleswitch0').change(function(){ // shortcut for .bind('change')
        if($(this).val() == 'on'){
            $('video')[0].play();
        } else {
            $('video')[0].pause();
        }
    });        
});​​​​​ 
```

这是一个示例[http://jsfiddle.net/codaniel/STLvS/1/](http://jsfiddle.net/codaniel/STLvS/1/)

**注意：** .on() 仅适用于 jQuery 1.7 + 如果您有早期版本的 jQuery，请使用 bind 或 delegate 代替。

# algorithm - 系列求和计算算法复杂度

> ID：10441385
> 
> 赞同：0
> 
> 时间：2012-05-04T01:03:32.447
> 
> 标签：algorithm, math, complexity-theory

我有一个算法，我需要计算它的复杂度。我接近答案但我有一个小数学问题：该系列的求和公式是什么

½(n ⁴ +n ³ ) 其中 n 的模式是 1, 2, 4, 8, ... 所以级数变为：

½(1 ⁴ +1 ³ ) + ½(2 ⁴ +2 ³ ) + ½(4 ⁴ +4 ³ ) + ½(8 ⁴ +8 ³ ) + ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T01:38:36.447

对于 k=0,1,2...，将 n 表示为 2^k 可能会有所帮助

将其代入原始公式以获得 (16^k + 8^k)/2 形式的项。

您可以将其分解为两个单独的总和（一个以 16 为底，一个以 8 为底），每一个都是几何级数。

S1 = 1/2(16^0 + 16^1 + 16^2 + ...)

S2 = 1/2(8^0 + 8^1 + 8^2 + ...)

几何级数的第 J 个部分和是 a(1-r^J)/(1-r) 其中 a 是初始值，r 是连续项之间的比率。对于 S1，a=1/2，r=16。对于 S2，a=1/2，r=8。

乘以它，相信你会发现前J项之和为O(16^J)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T02:31:09.137

你问的是

½Ʃ ((2 ^r ) ⁴ +(2 ^r ) ³ ) 从 r=1 到 n

（对不起，丑陋的数学；这里没有 LaTeX。）

结果是 16/15 16 ^n + 8/7 8 ^n - 232/105

请参阅[http://www.wolframalpha.com/input/?i=sum+%282%5Er%29%5E4%2B%282%5Er%29%5E3+from+r%3D1+to+n](http://www.wolframalpha.com/input/?i=sum+%282%5Er%29%5E4%2B%282%5Er%29%5E3+from+r%3D1+to+n)。

您不需要确切的公式。您只需要知道这是一个 O(16 ^n ) 算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:10:06.503

感谢你们所有人……我正在寻找的最终公式（基于您的作品）是：

```
((1/15 2^(4(log2(n)+1))  +  8^(log2(n)+1)/7  -232/105)/2) + 1 
```

这将给出与运行算法的程序相同的结果

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-04T01:33:39.470

看起来你的系列不收敛......也就是说，总和是无穷大的。也许你的公式是错误的，或者你问错了问题。

# javascript - javascript中的引用变量

> ID：10441387
> 
> 赞同：1
> 
> 时间：2012-05-04T01:03:37.720
> 
> 标签：javascript

```
var items = new Array("one", "two", "three");
var itemsRef = items;
items.push("four");
console.debug(itemRef);
console.debug(items); 
```

我真的不明白在引用后添加“四个”的项目是如何上面`items`和`itemsRef`相同的。应该只有（“一”“二”“三”）不是很合理吗？`itemsRef``items``itemsRef`

如果永远`itemsRef`指向`items`，为什么我们要使用这样一个无用的论点`items = itemsRef`？我还是不明白。谁能告诉我这是如何工作的以及为什么 JavaScript 让变量永远指向彼此？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T01:09:43.073

Javascript*通过引用*而不是*通过 value/copy*来分配对象和数组。这就是为什么你会看到这种行为。有很多关于此的网络文档。

但如果您的目标是**复制**数组，请执行以下操作：

```
var newArray = oldArray.slice(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T01:10:17.237

在这种情况下 itemsRef 不是指向项目，而是指向对象（数组）项目引用。换句话说，items 和 itemsRef 指向同一个对象，而不是彼此。

# c# - 为什么这个反序列化会引发 StackOverflow 异常？

> ID：10441391
> 
> 赞同：1
> 
> 时间：2012-05-04T01:04:31.100
> 
> 标签：c#, xml, xml-serialization, xmlserializer, ixmlserializable

当我尝试反序列化我的 FooContainer (List) 时会抛出一个错误。请只看这段代码的最后一部分。

```
public interface IFoo
{
    object Value { get; }
}

public abstract class Foo<T> : IFoo
{
    [XmlElement("Value")]
    public T Value { get; set; }
    [XmlIgnore]
    object IFoo.Value { get { return Value; } }
}

public class FooA : Foo<string> { }
public class FooB : Foo<int> { }
public class FooC : Foo<List<Double>> { }

[XmlRoot("Foos")]
public class FooContainer : List<IFoo>, IXmlSerializable
{
    public XmlSchema GetSchema()
    {
        throw new NotImplementedException();
    }

    public void ReadXml(XmlReader reader)
    {
        XmlSerializer serial = new XmlSerializer(typeof(FooContainer));
        serial.Deserialize(reader);
    }

    public void WriteXml(XmlWriter writer)
    {
        ForEach(x =>
            {
                XmlSerializer serial = new XmlSerializer(x.GetType(),
            new Type[] { typeof(FooA), typeof(FooB), typeof(FooC) });
                serial.Serialize(writer, x);
            });
    }
}

class Program
{
    static void Main(string[] args)
    {
        FooContainer fooList = new FooContainer()
        {
            new FooA() { Value = "String" },
            new FooB() { Value = 2 },
            new FooC() { Value = new List<double>() {2, 3.4 } } 
        };

        XmlSerializer serializer = new XmlSerializer(fooList.GetType(),
            new Type[] { typeof(FooA), typeof(FooB), typeof(FooC) });
        System.IO.TextWriter textWriter = new System.IO.StreamWriter(@"C:\temp\movie.xml");
        serializer.Serialize(textWriter, fooList);
        textWriter.Close();

        XmlReader reader = XmlReader.Create(@"C:\temp\movie.xml");
        var a = serializer.Deserialize(reader);
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:22:00.867

我有同样的问题：

在我看来，您`set`的 interface`IFoo`或 class中似乎缺少您`Foo`。如果没有`set`对象变为只读，您将`StackOverflowException`在尝试将 XML 反序列化为对象时收到一个。

我只是添加`set`了我的属性，事情就自行解决了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T01:22:35.810

你似乎不明白这`IXmlSerializable`是为了什么。它旨在*覆盖*. `XmlSerializer`如果您只是启动另一个以在您的/方法`XmlSerializer`中实际序列化/反序列化，那么是的，您将得到一个，因为该序列化程序将在完全相同的对象上调用完全相同的 // 方法。`WriteXml``ReadXml``StackOverflowException``WriteXml``ReadXml`

只需摆脱该`IXmlSerializable`实现，因为它实际上并没有做任何事情。或者阅读这篇CP文章：

[如何正确实现 IXmlSerializable](http://www.codeproject.com/Articles/43237/How-to-Implement-IXmlSerializable-Correctly)

基本上，您应该使用标准`Read*`和`Write*`方法来读取`XmlReader`或`XmlWriter`写入对象。

使用内部 a或方法不一定*总是*错误的- 只要您使用它来序列化/反序列化*不同*的对象，该对象既不等于也不包含对象图中声明类型的实例。`XmlSerializer``ReadXml``WriteXml`

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T01:13:16.973

我会对其进行调试以确保，但我的猜测是您的实现`ReadXml`是递归的。 `ReadXml`呼叫`Deserialize`，呼叫`ReadXml`，呼叫`Deserialize`等。

`ReadXml`应该使用传入的阅读器读取 xml，并`this`根据 Xml 数据水合对象（即）。

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.readxml.aspx)

> ReadXml 方法必须使用由 WriteXml 方法写入的信息来重构您的对象。
> 
> 调用此方法时，读取器位于包装您的类型信息的元素的开头。也就是说，就在表示序列化对象开始的开始标记之前。当此方法返回时，它必须从头到尾读取整个元素，包括其所有内容。与 WriteXml 方法不同，框架不会自动处理包装元素。您的实施必须这样做。未能遵守这些定位规则可能会导致代码生成意外的运行时异常或损坏的数据。
> 
> 实现此方法时，您应该考虑恶意用户可能会提供格式正确但无效的 XML 表示以禁用或以其他方式更改应用程序的行为的可能性。*

# linux - Linux内核中的主要页面错误处理程序

> ID：10441392
> 
> 赞同：6
> 
> 时间：2012-05-04T01:04:34.357
> 
> 标签：linux, linux-kernel, kernel, page-fault

我想知道主要的页面错误处理程序在哪里。

我写了一个算法来最小化内核中的页面错误。所以每当发生页面错误时，我都需要记录一些东西。我目前在 arch/x86/mm/fault_32.c 的 do_page_fault(...) 记录了一个页面错误

但是，似乎次要和主要页面错误都会转到 do_page_fault(...) ......并且次要页面错误一直在发生并弄乱了算法。

我想我只想在发生重大 page_fault 时记录东西。那么，内核黑客们，请你告诉我我应该把我的代码放在哪里？哪个文件和哪个功能。

顺便说一句，我正在破解内核 2.6.24

非常感谢！阿尔弗雷德

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T01:11:56.623

该`handle_mm_fault`函数处理页面错误。它的返回值是一组标志。如果`VM_FAULT_MAJOR`设置了，那么这是一个主要的页面错误。内核调用`perf_sw_event(PERF_COUNT_SW_PAGE_FAULT_MAJ, 1, 0, ...`每个主要的页面错误。

# git - 删除从 repo 分叉的本地分支

> ID：10441393
> 
> 赞同：0
> 
> 时间：2012-05-04T01:04:43.957
> 
> 标签：git, github

```
$ git branch --all
* 1.1/develop
  remotes/origin/1.0/develop
  remotes/origin/1.0/master
  remotes/origin/1.1/develop
  remotes/origin/1.1/master
  remotes/origin/HEAD -> origin/1.1/develop 
```

我试过了

`$ git branch -d remotes/origin/1.0/develop
error: branch 'remotes/origin/1.0/develop' not found.`

但它找不到它。如何删除除当前分支之外的所有分支？

__

编辑：我试过了，分支被删除了。

`$ git branch -d -r origin/1.1/master
Deleted remote branch origin/1.1/master (was 834f5e0).`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:08:13.030

如果您没有特别`pull`指定远程分支，它们将作为[远程跟踪分支](http://gitready.com/beginner/2009/03/09/remote-tracking-branches.html)存在于您的计算机上。

要从存储库中删除远程跟踪分支，请使用命令`git branch -d -r <remote-name>/<branch-name>`

# groovy - GroovyCodeVisitor 说 java 方法返回 Object 而不是实际类型。不涉及泛型

> ID：10441396
> 
> 赞同：0
> 
> 时间：2012-05-04T01:05:23.003
> 
> 标签：groovy

我正在使用 GroovyCodeVisitor 来检查和抱怨脚本中是否有禁止的类型。访问者会看到对 new Banned() 的尝试，但是当访问返回 Banned 的方法时，它只会看到 Object。这是故意的还是我错过了什么。我只是想确认该方法是一个普通的香草声明，它返回普通的旧无聊 Banned 并且不包含任何形式的泛型，这应该消除擦除作为问题的潜在来源。

在任何跳转之前，我没有使用 SecureASTCompilationCustsomer，因为我使用匹配器来禁止类，而不是简单地添加黑白列表以及 SecureASTCompilationCustomizer 支持的其他内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:19:47.720

GroovyCodeVisitor 用于访问“代码”。例如，方法的主体。方法的返回类型存储在 MethodNode 中，而不是您使用 GroovyCodeVisitor 处理的代码部分。您可以使用 ClassCodeVisitorSupport 并覆盖 visitMethod(MethodNode mn) 然后通过 mn.getReturnType() 获取返回类型并将其提供给您的检查代码。当然，如果这样声明，方法的返回类型只是例如“禁止”。例如，如果您使用“def”，则返回类型将为 Object。

# php - 在 PHP 中连接 3 个变量时出错

> ID：10441398
> 
> 赞同：-3
> 
> 时间：2012-05-04T01:06:18.147
> 
> 标签：php, mysql, variables

我正在从我正在开发的患者系统中获取当前的葡萄糖读数。我使用 java 脚本获取当前日期/时间并通过表单隐藏字段过去。在下面的脚本中，我将日期部分存储在 3 个单独的变量中，然后将它们连接为 1，以便我可以在 mysql 的插入查询中使用它。我得到的错误是

解析错误：语法错误，意外的'，'希望有人能找到错误，因为我不明白通过在变量之间放置'，'我做错了什么。这是代码：

```
<?
SESSION_START();
include("DatabaseConnection.php");
//gather form data into variables
//gather parts of the date from hidden input fields
$Day = $_POST['Day'];
$Month = $_POST['Month'];
$Year = $_POST['Year'];

$Date = $Year, "-", $Month, "-", $Day; //line with error
//get hours and minutes from hidden fields
$Minutes = $_POST['Minutes'];
$Hours = $_POST['Hours'];
//concatinate date into 1 variable
$Time = $Hours, ":", $Minutes;

$GlucoseLevel = $_POST['GlucoseLevel'];
$SBP = $_POST['SBP'];
$DBP = $_POST['DBP'];
$Comments = $_POST['Comments'];
//store current user's id
$User_id = $_SESSION['User_id'];
//query for inserting reading
$ReadingInsert = "insert into reading
(Reading_id,
User_id,
Date,
Time,
GlucoseLevel,
SBP,
DBP,
Comments)
values(null,
'$User_id',
'$Date',
'$Time',
'$GlucoseLevel',
'$SBP',
'$DBP',
'$Comments')";

//run insert query
mysql_query($ReadingInsert) or die("Cannot insert reading");
`enter code here`mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:12:15.957

`.`在用于连接字符串的PHP中，请尝试：

```
$Date = $Year . "-" . $Month  "-" . $Day; 
```

看：

[http://php.net/manual/en/language.operators.string.php](http://php.net/manual/en/language.operators.string.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T01:10:31.090

php中的字符串连接`.`不使用`,` [doc](http://php.net/manual/en/language.types.string.php#language.types.string.useful-funcs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T01:10:08.400

```
$Date = $Year, "-", $Month, "-", $Day; //line with error 
```

应该

```
$Date = $Year. "-". $Month. "-". $Day;  //<- Full "." and no "," 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T01:19:35.863

您还可以使用[sprintf](http://us3.php.net/sprintf)用变量插入字符串：

```
$Date = sprintf('%s-%s-%s', $Year, $Month, $Day); 
$Time = sprintf('%s:%s', $Hours, $Minutes); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T05:24:50.667

我真正使用转义连接的唯一一次是使用函数，否则大括号`{}`是你的朋友！

`$Date = "{$Year}-{$Month}-{$Day}";`

您不必担心忘记经期或陷入尴尬`"'"`境地。爱花括号...爱他们！

# java - HTTP 请求不会通过控制器

> ID：10441399
> 
> 赞同：0
> 
> 时间：2012-05-04T01:06:22.000
> 
> 标签：java, spring, spring-mvc, controller

我用一个简单的控制器类创建了一个简单的 Maven 项目，它只显示服务器时间，但它从不通过控制器，很高兴得到任何帮助。

*我的控制器类：*

```
@Controller
@RequestMapping(value = "/")
public class Test
{
private static final Logger logger = LoggerFactory.getLogger(StudentsController.class);

@RequestMapping(value = "/", method = RequestMethod.GET)
public String home(Locale locale, Model model) {
    logger.info("Welcome home! the client locale is "+ locale.toString());

    Date date = new Date();
    DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);

    String formattedDate = dateFormat.format(date);

    model.addAttribute("serverTime", formattedDate );
    System.out.println(formattedDate);

    return "index";
}

} 
```

web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
  <web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
     http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

 <servlet>
 <servlet-name>test</servlet-name>
 <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
 <load-on-startup>1</load-on-startup>
 </servlet>

 <servlet-mapping>
 <servlet-name>test</servlet-name>
<url-pattern>/</url-pattern>
</servlet-mapping>
 </web-a 
```

spring-servlet.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
     <beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"          
       xmlns:context="http://www.springframework.org/schema/context"
      xmlns:mvc="http://www.springframework.org/schema/mvc"
      xsi:schemaLocation="http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
      http://www.springframework.org/schema/mvc
      http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.0.xsd">

      <!-- not strictly necessary for this example, but still useful, see       
       http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference 
       /html/mvc.html#mvc-ann-controller for more information -->
       <context:component-scan base-package="test" />
       <mvc:default-servlet-handler/>

       <!-- the mvc resources tag does the magic -->
      <mvc:resources mapping="/resources/**" location="/resources/" />

        <!-- also add the following beans to get rid of some exceptions -->
       <bean        
        class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />
       <bean
         class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
        </bean>

     <!-- JSTL resolver -->
      <bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
     <property name="viewClass"
     value="org.springframework.web.servlet.view.JstlView" />
       <property name="prefix" value="/WEB-INF/jsp/" />
       <property name="suffix" value=".jsp" />
      </bean> 
```

索引.jsp

```
 <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
  <html>
<head>
    <title>Spring RESTful Example</title>
</head>
<body>
    <p>Your WebApplication is up and running....</p>

    <div>
    Server Time is:

<div>
${serverTime} 

</div>  
    </div>
</body>
  </html> 
```

当我在 Tomcat 服务器上运行它时，输出是：

```
Your WebApplication is up and running....
 Server Time is:
 ${serverTime} 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:12:50.850

您还双重映射了您的请求......路径将是 /index/index

去掉方法级别注解中的“value”参数，就可以留下“method”参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:21:55.890

问题似乎出在 Tomcat 上 - 您能否查看在 tomcat.home\conf 文件夹中是否有一个 web.xml 文件，其中包含以下条目：

```
<servlet>
    <servlet-name>jsp</servlet-name>
    <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
    ....

<servlet-mapping>
    <servlet-name>jsp</servlet-name>
    <url-pattern>*.jsp</url-pattern>
    <url-pattern>*.jspx</url-pattern>
</servlet-mapping> 
```

这是解释jsp的那个。

只是为了调试，我要尝试的另一件事是将这些条目也明确地放在您的应用程序 web.xml 文件中。

更新：@user1067665 在根据您的评论尝试了更多之后，这听起来绝对不像 Tomcat 问题，它更像是一个应用程序配置问题。我认为解决它的方法是将您对 AnnotationHandlerAdapter 和 DefaultAnnotationHandlerMapping 的定义替换为`<mvc:annotation-driven/>`，您可以试试这个，看看是否可行

# xaml - 为什么 FlipView 会忽略 SelectedItem

> ID：10441408
> 
> 赞同：5
> 
> 时间：2012-05-04T01:07:51.483
> 
> 标签：xaml, windows-runtime, winrt-xaml

我想使用 FlipView 来显示一些项目并开始显示特定项目。

为此，我定义了一个视图模型类：

```
class MyDataContext
{

    public MyDataContext()
    {
        Items = new List<MyClass>();
        Items.Add(new MyClass("1"));
        Items.Add(new MyClass("2"));
        Items.Add(new MyClass("3"));
        SelectedItem = Items[1];
    }

    public List<MyClass> Items { get; set; }
    public MyClass SelectedItem { get; set; }
} 
```

如您所见，所选项目*不是*第一项。

现在对于 XAML：

```
 <FlipView ItemsSource="{Binding Items}" SelectedItem="{Binding SelectedItem}"></FlipView> 
```

但是，当我运行应用程序时，翻转视图显示第一项，而不是第二项。

这是故意的？还是一个错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T18:12:29.650

尝试这个

```
<FlipView
    ItemsSource="{Binding Items}"
    SelectedItem="{Binding SelectedItem, Mode=TwoWay}" /> 
```

*   您的 SelectedItem 需要是 TwoWay 绑定才能工作，因为该值是由控件和视图模型设置的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-24T12:19:30.667

FlipView 遇到了同样的问题，无法让 BindableBase 或 TwoWay 选项工作。因为列表的顺序对我来说并不是一个真正的主题，所以我创建了一个重新排序 ItemsSource 的方法，从 SelectedItem 作为 Collection 中的第一个项目开始。

在底层代码中，结果是 FlipView 的新 ItemsSource，而不是之前的 List 元素。

```
 public static List<T> ReorderList(List<T> elements, T selectedElement)
    {
        var elementIndex = elements.FindIndex(x => x.Id == selectedElement.Id);
        var result = new List<T>();

        foreach (var item in elements)
        {
            if (elementIndex .Equals(elements.Count))
            {
                elementIndex = 0;
            }

            result.Add(elements[elementIndex]);

            elementIndex++;
        }

        return result;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T14:02:05.013

除了 Filip 所说的，您的类 (MyDataContext) 需要通知 UI 属性已更改。您的 ViewModel 必须实现 INotifyPropertyChanged 并且该属性需要触发 PropertyChanged 事件

```
public class ViewModel : INotifyPropertyChanged
{
    private object _selectedItem;

    public object SelectedItem
    {
        get { return _selectedItem; }
        set 
        { 
            _selectedItem = value; 
            OnPropertyChanged("SelectedItem"); 
        }
    }
} 
```

您还可以使用示例应用程序附带的 BindableBase 类

```
public class ViewModel : BindableBase
{
    private object _selectedItem;

    public object SelectedItem
    {
        get { return this._selectedItem; }
        set { this.SetProperty(ref this._selectedItem, value); }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-27T13:09:54.070

它看起来像一个错误。如果您调试您的代码，您会注意到，首先您的`SelectedItem`in VM 设置为正确的元素，然后设置为，然后设置`null`为 FlipView 的 ItemsSource 集合的第一个元素。

作为一种解决方法，我看到在引发 FlipView 的 Loaded 事件后设置 VM 的 SelectedItem。

# php - 当我在没有 ob_end_clean() 或 ob_end_flush() 的情况下使用 multi ob_start() 时发生了什么？

> ID：10441410
> 
> 赞同：15
> 
> 时间：2012-05-04T01:08:08.780
> 
> 标签：php, output-buffering

我已经查看了有关 ob_start() ob_end_clean() ob_end_flush() 的 php 手册。而且我已经看到了关于该主题的不同示例，无论如何我修改了示例，但此时我很困惑。这是脚本。

```
ob_start();
echo "Hello x, ";

ob_start();
echo "Hello y, ";

ob_start();
echo "Hello z, ";

ob_start();
echo "Hello World";
$ob_2 = ob_get_contents();
ob_end_clean();

echo "Galaxy";
$ob_1 = ob_get_contents();
ob_end_clean();

echo " this is OB_1 : ".$ob_1;
echo "<br>  and this is OB_2  : ".$ob_2; 
```

这个脚本的输出是：

**你好 x，你好 y，这是 OB_1：你好 z，银河**

**这是 OB_2：Hello World**

**------------------------------------------**

*为什么输出不是这样？*

**这是 OB_1：你好 x，你好 y，你好 z，银河**

**这是 OB_2：Hello World**

*我错过了什么？*

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-04T01:22:49.320

我将注释您的代码以解释发生了什么。所有输出缓冲区都初始化为空，这是标准的：

```
ob_start(); // open output buffer 1
echo "Hello x, "; // echo appended to output buffer 1

ob_start(); // open output buffer 2
echo "Hello y, "; // echo appended output buffer 2

ob_start(); // open output buffer 3
echo "Hello z, "; // echo appended to output buffer 3

ob_start(); // open output buffer 4
echo "Hello World"; // echo appended output buffer 4
$ob_2 = ob_get_contents(); // get contents of output buffer 4
ob_end_clean(); // close and throw away contents of output buffer 4

echo "Galaxy"; // echo appended to output buffer 3
$ob_1 = ob_get_contents(); // get contents of output buffer 3
ob_end_clean(); // close and throw away contents of output buffer 3

// at this point, $ob_2 = "Hello World" and $ob_1 = "Hello z, Galaxy"
// output buffer 1 = "Hello x," and output buffer 2 = "Hello y,"

echo " this is OB_1 : ".$ob_1; // echo appended to output buffer 2

// output buffer 2 now looks like "Hello y,  this is OB_1 : Hello z, Galaxy" 

echo "<br>  and this is OB_2  : ".$ob_2; // echo appended to output buffer 2

// output buffer 2 now looks like:
//   "Hello y,  this is OB_1 : Hello z, Galaxy<br> and this is OB_2  : Hello World"

// output buffer 2 implicitly flushed by end of script
// output from buffer 2 captured by (appended to) output buffer 1
// output buffer 1 now looks like:
//   "Hello x, Hello y,  this is OB_1 : Hello z, Galaxy<br> and this is OB_2  : Hello World"
// output buffer 1 implicitly closed by end of script. This is when your output
// actually gets printed for this particular script. 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-04T01:18:20.883

输出缓冲区像堆栈一样工作。创建一个缓冲区并在其中回显“Hello x”，然后创建另一个缓冲区并在其中回显“Hello y”，然后创建第三个缓冲区并在其中回显“Hello z”。“Hello World”进入第四个缓冲区，该缓冲区由对 的调用关闭`ob_end_clean()`，因此您回到第三个缓冲区。当您`ob_get_contents()`在回显“Galaxy”后调用时，您将获得第三个缓冲区的内容。

如果您`ob_get_contents()`在此代码末尾再次调用，您将获得第二个缓冲区中的“Hello y”。如果你`ob_end_close()`再这样`ob_get_contents()`，你会从第一个缓冲区中得到“Hello x”。

# c# - 将 ContextMenu 设置为在“点击”时打开会导致 ContextMenu 在屏幕顶部打开

> ID：10441411
> 
> 赞同：1
> 
> 时间：2012-05-04T01:08:08.783
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-7.1, silverlight-toolkit

所以我在这里遵循了解决方案：[ContextMenu on tap 而不是点击并按住](https://stackoverflow.com/questions/4913087/contextmenu-on-tap-instead-of-tap-and-hold)弹出在“tap”而不是“hold”上打开一个 ContextMenu 最终可以工作，有点......

正如另一位用户在对该答案的回复中提到的那样，ContextMenu 实际上是在屏幕顶部打开的，而不是从“点击”它的位置。

任何想法为什么会发生这种情况以及解决它的任何建议？

资源 XAML：

```
<DataTemplate x:Key="InventoryListDataTemplate">
    <StackPanel Orientation="Vertical" Margin="0,0,0,17" Tap="OpenContextMenu">
    <toolkit:ContextMenuService.ContextMenu>
        <toolkit:ContextMenu x:Name="WeaponContextMenu">
            <toolkit:MenuItem Header="Equip" />
            <toolkit:MenuItem Header="Discard" />
        </toolkit:ContextMenu>
    </toolkit:ContextMenuService.ContextMenu>
    </StackPanel>
</DataTemplate> 
```

内容 XAML：

```
<Grid>
    <ListBox ItemTemplate="{StaticResource InventoryListDataTemplate}" Name="InventoryAllListBox" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
</Grid> 
```

代码：

```
private void OpenContextMenu(object sender, EventArgs e)
{
    ContextMenu contextMenu = ContextMenuService.GetContextMenu(sender as StackPanel);

    if (contextMenu.Parent == null)
    {
        contextMenu.IsOpen = true;
    }
} 
```

# java - 我可以覆盖方法类型上的@RequestMapping 吗？

> ID：10441413
> 
> 赞同：14
> 
> 时间：2012-05-04T01:08:35.123
> 
> 标签：java, spring, spring-mvc

我有一个这样的弹簧控制器/ POJO：

```
@RequestMapping("/foo");
public class MyController {
    @RequestMapping("/bar") 
    public String MyAction() { return someSharedFunc(false); }

    @RequestMapping("/debug/ping");
    public String MyDebugPing() { return someSharedFunc(true); }

    private String someSharedFunc(boolean debug) {
      if(debug) return "FooBar"; else return "Debug!";
    }
} 
```

在这种情况下，MyDebugPing 的 URL 是`/foo/debug/ping`. 但是，我希望它`/debug/ping`有效地忽略类上的 RequestMapping。

那可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T01:19:42.307

只需`@RequestMapping`从类中删除注释并使用每个方法的完整路径。例如

```
public class MyController {
    @RequestMapping("/foo/bar") 
    public String MyAction() { return someSharedFunc(false); }

    @RequestMapping("/debug/ping");
    public String MyDebugPing() { return someSharedFunc(true); }

    private String someSharedFunc(boolean debug) {
      if(debug) return "FooBar"; else return "Debug!";
    }
} 
```

如果有很多方法，那么您可以简单地将方法移出到另一个控制器。

# ienumerable - 提升 IEnumerable.OrderBy() 后，源列表没有排序，为什么？

> ID：10441418
> 
> 赞同：0
> 
> 时间：2012-05-04T01:09:07.653
> 
> 标签：ienumerable

1.首先我为 IEnumerable.Add() 定义了一个扩展方法，如下面的代码

```
 public static IEnumerable<T> Add<T, TKey>(this IEnumerable<T> enumerable, T value, Func<T, TKey> orderBy)
    {
        if (enumerable == null)
            return null;

        if (enumerable is IList<T>)
        {
            var list = enumerable as IList<T>;
            if (!enumerable.Contains(value))
            {
                list.Add(value);
                enumerable = enumerable.OrderBy(orderBy);
            }
        }
    } 
```

2.然后，我提出了这样的扩展方法，以便在将新项目添加到列表时根据“日期”属性对项目列表进行排序：

```
 itemList.Add(item, o => o.Date); 
```

3.毕竟，“itemList”似乎没有排序。

4.我按照扩展方法，发现“enumerable”是在“enumerable = enumerable.OrderBy(orderBy)”之后的一个新实例，并且被排序了，而“list”没有。

5.然后我尝试将排序后的可枚举转换为“list=enumerable.ToList()”之类的列表，它们（“enumerable”和“list”）都已排序。

6.之后，当调用栈回到“itemList.Add(item, o => o.Date);”时，“itemList”根本没有排序！！！

任何人都可以给我一些建议吗？谢谢 looooooooooooooooooooooooooooooooot ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:24:22.630

我相信您的问题是对 enumerable 的引用是通过值而不是通过引用传递的。有关这意味着什么的更多信息，请参阅[Jon Skeet 关于按值或参考传递参数的文章。](http://www.yoda.arachsys.com/csharp/parameters.html)简而言之，C# 传递参数引用的副本，因此为参数分配新值不会更改传入对象的引用。要通过引用传递参数，请指定`ref`关键字，但我认为这不会使用扩展方法。如果您对完成这项工作已经下定决心，我建议您按排序顺序将项目插入到您的列表中，可能需要 T 实现 IComparable。

**更新：**

首先，请参阅 Skeet 的文章，它的信息量非常大，我可能只有他的一半清楚。其次，当您将对象作为参数传递给方法时，您传递的是引用的*副本*。这意味着您仍然可以访问对象的成员，但是，与通过副本传递值类型的方式相同，如果您修改引用（即为其分配新值），您将不会修改原始引用。指定`ref`意味着您正在传递对引用的引用并更改引用（为其分配值）将影响原始对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T01:25:21.287

OrderBy 或 ToList 都不会影响源列表。当您这样做时：`list=enumerable.ToList()`您将变量更改为指向一个全新的列表实例。

在我看来，这种方法做得太多了。我会继续添加和排序作为单独的操作。这扩展了 IEnumerable 但如果目标不是 IList 则无声无息地执行此操作的事实是代码异味。

# ajax - 使用圣杯

> ID：10441420
> 
> 赞同：0
> 
> 时间：2012-05-04T01:09:20.763
> 
> 标签：ajax, grails, gsp, grails-domain-class, grails-controller

我有关于使用 remoteFunction 的一般性问题。我正在使用类似

我正在打电话给控制器。我想根据控制器中的对象更新文本框。

```
<g:fieldValue bean="${ProfileDomainInstance}" field="profileDescription" id="profileDescription"/> 
```

我如何从控制器返回 profileDoaminInstance 对象，以便我可以在我的 GSP.profilenames 中使用它来自不同的对象。我试图将其作为常规模型发送。

```
def getProfileDescription(){
        println("came here")
        println(params?.profileName)
.
.
.
        [ProfileDomainInstance:ProfileDomainInstance])
    } 
```

我怎样才能将此对象发送到 gsp。我也尝试渲染视图。它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:51:16.843

为您的 profileDescription 创建模板并在您的控制器上使用[render](http://grails.org/doc/latest/ref/Tags/render.html)来呈现它

所以你的代码将是这样的

```
def getProfileDescription(){
        println("came here")
        println(params?.profileName)
.
.
.
render(template:"/profileDescriptionTemplate", model:[ProfileDomainInstance:ProfileDomainInstance ] )

       )

<div id='divForprofileDescription'>
<g:render template="profileDescriptionTemplate" model="['ProfileDomainInstance':ProfileDomainInstance]" /> 
</div>

<g:select from='${ProfileList?.profileName}' name= 'ProfileSelect' id='ProfileSelect' noSelection="['null':' SELECT Profile']" disabled="true" onChange="${remoteFunction(action:'getProfileDescription', params: '\'profileName=\' + this.value',update:[success:'divForprofileDescription'])}
    } 
```

# audiotoolbox - iOS AudioQueueNewInput 函数 - 如何链接它？

> ID：10441435
> 
> 赞同：2
> 
> 时间：2012-05-04T01:11:30.433
> 
> 标签：audiotoolbox

我正在尝试使用 AudioQueueNewInput，它应该在框架 AudioToolbox 中。当我将 AudioToolbox 添加到我的项目并尝试构建时，我收到警告说文件 /AudioToolbox.framework/AudioToolbox 被忽略，因为它缺少架构 armv6 和 armv7，并且由于引用的函数 _AudioQueueNewInput 未定义而出错。

如果我删除框架，我只会得到未定义的符号错误。

谁能建议我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:13:06.017

通过与 Apple 的“Speak Here”演示应用程序进行比较，我发现了这一点。我使用了 2009 版工具箱的路径将其添加到项目中，而我需要 2011 年 3 月 6 日版本的路径。

# c# - HttpWebRequest 点与 HOSTS 文件映射一起使用？

> ID：10441436
> 
> 赞同：0
> 
> 时间：2012-05-04T01:11:31.057
> 
> 标签：c#, .net, iis, hosts

我不认为这是[System.Net.WebRequest 不尊重主机文件](https://stackoverflow.com/questions/3480545/system-net-webrequest-not-respecting-hosts-file)的重复，因为我不认为我的问题与代理相关（并且它本质上是向 localhost 发出请求）。

所以我有一个生成 HttpWebRequest 的 C# ASP 页面。现在，在这台服务器上，我已经完成了一些开发域到服务器 IP 地址的自定义映射。

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create( "http://someproject.dev" );

ERROR: 
The remote name could not be resolved: 'someproject.dev' at System.Net.HttpWebRequest.GetResponse() 
```

我在服务器（和我的客户端）上的 Hosts 文件有 10.0.1.115 someproject.dev 我也试过在服务器上使用 127.0.0.1

另请注意，两个 .net 应用程序都在主机文件/IIS 映射下运行，即一个应用程序正在向另一个应用程序发出 x 域请求（这是允许的，我知道这不是原因，因为这在我们的生产环境中有效）。

另外，我想避免使用 System.Net.Dns，除非你们同意这是唯一可行的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:49:38.557

我会检查你的服务器。检查从服务器发出的任何 Web 调用以查看 DNS 是否在 hosts 文件中。听起来像是服务器问题而不是编程问题。

# r - 为什么在读取数据框时我的列名中出现 X.？

> ID：10441437
> 
> 赞同：71
> 
> 时间：2012-05-04T01:11:51.453
> 
> 标签：r, dataframe, read.csv, illegal-characters

[几个月前](https://stackoverflow.com/questions/9098245/r-why-are-xs-added-to-the-names-of-variables-in-my-data-frame)我问了一个关于这个的问题，我认为答案已经解决了我的问题，但我又遇到了这个问题，解决方案对我不起作用。

我正在导入 CSV：

```
orders <- read.csv("<file_location>", sep=",", header=T, check.names = FALSE) 
```

这是数据框的结构：

```
str(orders)

'data.frame':   3331575 obs. of  2 variables:
 $ OrderID  : num  -2034590217 -2034590216 -2031892773 -2031892767 -2021008573 ...
 $ OrderDate: Factor w/ 402 levels "2010-10-01","2010-10-04",..: 263 263 269 268 301 300 300 300 300 300 ... 
```

如果我`length`在第一列 OrderID 上运行命令，我会得到：

```
length(orders$OrderID)
[1] 0 
```

如果我`length`在 OrderDate 上运行，它会正确返回：

```
length(orders$OrderDate)
[1] 3331575 
```

这是 的副本/`head`粘贴`CSV`。

```
OrderID,OrderDate
-2034590217,2011-10-14
-2034590216,2011-10-14
-2031892773,2011-10-24
-2031892767,2011-10-21
-2021008573,2011-12-08
-2021008572,2011-12-07
-2021008571,2011-12-07
-2021008570,2011-12-07
-2021008569,2011-12-07 
```

现在，如果我重新运行`read.csv`，但去掉`check.names`选项，现在的第一列`dataframe`在名称的开头有一个 X.。

```
orders2 <- read.csv("<file_location>", sep=",", header=T)

str(orders2)

'data.frame':   3331575 obs. of  2 variables:
 $ X.OrderID: num  -2034590217 -2034590216 -2031892773 -2031892767 -2021008573 ...
 $ OrderDate: Factor w/ 402 levels "2010-10-01","2010-10-04",..: 263 263 269 268 301 300 300 300 300 300 ...

length(orders$X.OrderID)
[1] 3331575 
```

这可以正常工作。

我的问题是为什么`R`要在第一列名称的开头添加 X.？从 CSV 文件中可以看出，没有特殊字符。它应该是一个简单的负载。添加`check.names`，虽然会从 CSV 导入名称，但会导致数据无法正确加载，我无法对其执行分析。

我能做些什么来解决这个问题？

旁注：我意识到这是一个小问题——我对我认为我加载正确但没有得到我预期的结果感到更加沮丧。我可以使用 重命名该列`colnames(orders)[1] <- "OrderID"`，但仍然想知道它为什么不能正确加载。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-05-04T07:43:07.467

`read.csv()`是更通用`read.table()`功能的包装器。后一个函数具有参数`check.names`，记录为：

> ```
> check.names: logical.  If ‘TRUE’ then the names of the variables in the
>          data frame are checked to ensure that they are syntactically
>          valid variable names.  If necessary they are adjusted (by
>          ‘make.names’) so that they are, and also to ensure that there
>          are no duplicates. 
> ```

如果您的标头包含在语法上无效的标签，`make.names()`则将根据无效名称将其替换为有效名称，删除无效字符并可能在前面添加`X`：

```
R> make.names("$Foo")
[1] "X.Foo" 
```

这记录在`?make.names`：

> ```
> Details:
> 
>     A syntactically valid name consists of letters, numbers and the
>     dot or underline characters and starts with a letter or the dot
>     not followed by a number.  Names such as ‘".2way"’ are not valid,
>     and neither are the reserved words.
> 
>     The definition of a _letter_ depends on the current locale, but
>     only ASCII digits are considered to be digits.
> 
>     The character ‘"X"’ is prepended if necessary.  All invalid
>     characters are translated to ‘"."’.  A missing value is translated
>     to ‘"NA"’.  Names which match R keywords have a dot appended to
>     them.  Duplicated values are altered by ‘make.unique’. 
> ```

`read.table()`您看到的行为与记录在案的数据加载方式完全一致。这表明您在 CSV 文件的标题行中有语法上无效的标签。请注意上面的一点`?make.names`，什么是字母取决于您系统的语言环境；CSV 文件可能包含文本编辑器将显示的有效字符，但如果 R​​ 未在同一语言环境中运行，则该字符可能在那里无效，例如？

我会查看 CSV 文件并识别标题行中的任何非 ASCII 字符；标题行中也可能有不可见的字符（或转义序列；`\t`？）。在读取具有无效名称的文件和在控制台中显示它之间可能会发生很多事情，这可能会掩盖无效字符，所以不要认为没有`check.names`as它不会显示任何错误表示文件正常。

发布的输出`sessionInfo()`也很有用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-29T19:53:18.697

我刚遇到这个问题，原因很简单。我有以数字开头的标签，而 R 在它们前面添加了一个 X。我认为 R 与标题中的数字混淆，并应用字母来区分值。

所以，“3_in”变成了“X3_in”等等……我通过将标签切换到“in_3”来解决问题，问题就解决了。

我希望这可以帮助别人。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-11-20T10:06:36.907

当列名的格式不正确时，R 在导入期间在列名的开头放置一个“X”。例如，当您的列名以数字或某些空格字符开头时，通常会发生这种情况。它不会发生的`check.names = FALSE`原因 - 不会有“X”。但是，如果列名以数字或其他特殊字符开头，则某些功能可能不起作用。例子是`rbind.fill`函数。

因此，在应用该功能（使用“更正的 colnames”）之后，我使用这个简单的东西来摆脱“X”。

```
destroyX = function(es) {
  f = es
  for (col in c(1:ncol(f))){ #for each column in dataframe
    if (startsWith(colnames(f)[col], "X") == TRUE)  { #if starts with 'X' ..
      colnames(f)[col] <- substr(colnames(f)[col], 2, 100) #get rid of it
    }
  }
  assign(deparse(substitute(es)), f, inherits = TRUE) #assign corrected data to original name
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-11-01T11:08:12.707

我遇到了类似的问题，想分享以下代码行来更正列名。当然不是完美的，因为正手的干净编程会更好，但作为快速而肮脏的方法的起点可能会有所帮助。（我本来想将它们添加为对 Ryan 的问题/Gavin 的回答的评论，但我的声誉不够高，所以我不得不发布一个额外的答案 - 抱歉）。

在我的例子中，写入和读取数据的几个步骤产生了一个或多个名为“X”，X.1“，...的列，其中包含X-列中的内容和X.1，...-列中的行号。在我的情况下，X 列的内容应该用作行名，而其他 X.1,... 列应该被删除。

```
Correct_Colnames <- function(df) {

 delete.columns <- grep("(^X$)|(^X\\.)(\\d+)($)", colnames(df), perl=T)

  if (length(delete.columns) > 0) {

   row.names(df) <- as.character(df[, grep("^X$", colnames(df))])
   #other data types might apply than character or 
   #introduction of a new separate column might be suitable

   df <- df[,-delete.columns]

   colnames(df) <- gsub("^X", "",  colnames(df))
   #X might be replaced by different characters, instead of being deleted
  }

  return(df)
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-06-15T06:03:26.640

`row.names=FALSE`我通过在函数中包含作为参数解决了类似的问题`write.csv`。`write.csv`将行名称作为未命名列包含在 CSV 文件中，并`read.csv`在读取 CSV 文件时将该列命名为“X”。

# objective-c - 在 NSmutableArray 的每个 Objects 中搜索一个 String

> ID：10441439
> 
> 赞同：0
> 
> 时间：2012-05-04T01:12:04.273
> 
> 标签：objective-c

我有`NSmutableArray`10,000 个 NSobject，每个 NSobject 都有名称、详细信息和位置。

我想创建一个在所有对象的名称、详细信息和位置中搜索文本的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:16:29.040

您需要为此使用 NSPredicates。它很快，不需要太多工作。查看此博客文章了解实施细节： http: [//www.cocoanetics.com/2010/03/filtering-fun-with-predicates/](http://www.cocoanetics.com/2010/03/filtering-fun-with-predicates/)

# asp.net-mvc-3 - DevExpress XtraReports - 如何从自定义数据源配置字段

> ID：10441448
> 
> 赞同：0
> 
> 时间：2012-05-04T01:13:42.380
> 
> 标签：asp.net-mvc-3, linq-to-sql, xtrareport

我开始为公司项目使用 DevExpress XtraReports。我的问题如下：

我有一个提取数据的存储过程，给定三个参数：startDay、endDay 和开发人员 ID，这个 SP 位于 .dbml 文件中。

按照这个例子[http://www.devexpress.com/Support/Center/p/B223095.aspx](http://www.devexpress.com/Support/Center/p/B223095.aspx)，我们有这个方法：

> 静态无效报告_DataSourceDemanded（对象发送者，System.EventArgs e）{
> 
> ```
>  Reports.WeeklyTimesheet report = (Reports.WeeklyTimesheet)sender;
>        DataClasses1DataContext context = new DataClasses1DataContext();
>        System.Data.Linq.ISingleResult<WeeklyTimesheetUserReportResult> res = >context.WeeklyTimesheetUserReport(Convert.ToDateTime("2012/01/16"), >Convert.ToDateTime("2012/01/20"), 52);
>        var result = from orderDetail in res select orderDetail;
>        report.DataSource = res.ToList(); 
> ```
> 
> }

这是我发现（有效）将参数传递给报告的 SP 的唯一方法。

我该怎么做才能使报告附带我成功带来但不绑定到报告中的数据？附图将更好地说明这一点。

我必须指出，当我在图像中制作该报告时，最初是使用向导从数据集格式化的（因此为什么要订购），但我不知道如何使用 .dbml 文件来格式化它。

提前致谢。

[http://imgur.com/YQ7RE](http://imgur.com/YQ7RE)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:47:36.323

XtraReport 具有 xrTables、xrLabel 控件，它们将让您创建自定义报告，然后您可以绑定这些单元格等并以以下方式修改报告的 XRControl 绑定：

[C＃] ...

```
 // Original 
  //this.xrTableCell14.DataBindings.AddRange(new DevExpress.XtraReports.UI.XRBinding[] {
  // new DevExpress.XtraReports.UI.XRBinding("Text", null, "Symbols.Description")});
  // Modified
  this.xrTableCell14.DataBindings.AddRange(new DevExpress.XtraReports.UI.XRBinding[] {
    new DevExpress.XtraReports.UI.XRBinding("Text", null, "Description")}); 
```

...

请参阅这些链接和示例..

> [在运行时将报表绑定到实体框架对象](http://www.devexpress.com/Support/Center/p/Q336138.aspx) [[如何使用 LINQ to SQL 数据源创建主从报表示例](http://www.devexpress.com/Support/Center/p/E1455.aspx)

# c++ - 是否可以使用内存缓冲区（或 PE 资源）支持只读 SQLite 数据库？

> ID：10441450
> 
> 赞同：3
> 
> 时间：2012-05-04T01:14:13.433
> 
> 标签：c++, c, windows, sqlite

我想使用 Windows 的“自定义资源”功能将存储在 SQLite 数据库中的相当大的数据块嵌入到我的二进制文件中。（这是日志工具的白名单）SQLite 确实支持[内存数据库](http://www.sqlite.org/inmemorydb.html)，但看起来可能仅限于创建全新的数据库；并且似乎不支持从内存缓冲区中读取；但我并不积极。

数据库是否支持这样的东西？（由于其他原因，我必须嵌入 SQLite，所以将它用于白名单也很棒......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:09:15.797

[sqlite 文档http://www.sqlite.org/backup.html](http://www.sqlite.org/backup.html)的在线备份部分有一些代码可以做你想做的事情（即在内存数据库中转储到文件，或将文件重新加载到内存数据库中）。这应该允许您将预先索引的数据库保存到一个文件中，您可以将其添加到您的资源中并在运行时加载到内存中。

这是有问题的代码（直接从上面链接的页面复制）

```
/*
** This function is used to load the contents of a database file on disk 
** into the "main" database of open database connection pInMemory, or
** to save the current contents of the database opened by pInMemory into
** a database file on disk. pInMemory is probably an in-memory database, 
** but this function will also work fine if it is not.
**
** Parameter zFilename points to a nul-terminated string containing the
** name of the database file on disk to load from or save to. If parameter
** isSave is non-zero, then the contents of the file zFilename are 
** overwritten with the contents of the database opened by pInMemory. If
** parameter isSave is zero, then the contents of the database opened by
** pInMemory are replaced by data loaded from the file zFilename.
**
** If the operation is successful, SQLITE_OK is returned. Otherwise, if
** an error occurs, an SQLite error code is returned.
*/
int loadOrSaveDb(sqlite3 *pInMemory, const char *zFilename, int isSave){
  int rc;                   /* Function return code */
  sqlite3 *pFile;           /* Database connection opened on zFilename */
  sqlite3_backup *pBackup;  /* Backup object used to copy data */
  sqlite3 *pTo;             /* Database to copy to (pFile or pInMemory) */
  sqlite3 *pFrom;           /* Database to copy from (pFile or pInMemory) */

  /* Open the database file identified by zFilename. Exit early if this fails
  ** for any reason. */
  rc = sqlite3_open(zFilename, &pFile);
  if( rc==SQLITE_OK ){

    /* If this is a 'load' operation (isSave==0), then data is copied
    ** from the database file just opened to database pInMemory. 
    ** Otherwise, if this is a 'save' operation (isSave==1), then data
    ** is copied from pInMemory to pFile.  Set the variables pFrom and
    ** pTo accordingly. */
    pFrom = (isSave ? pInMemory : pFile);
    pTo   = (isSave ? pFile     : pInMemory);

    /* Set up the backup procedure to copy from the "main" database of 
    ** connection pFile to the main database of connection pInMemory.
    ** If something goes wrong, pBackup will be set to NULL and an error
    ** code and  message left in connection pTo.
    **
    ** If the backup object is successfully created, call backup_step()
    ** to copy data from pFile to pInMemory. Then call backup_finish()
    ** to release resources associated with the pBackup object.  If an
    ** error occurred, then  an error code and message will be left in
    ** connection pTo. If no error occurred, then the error code belonging
    ** to pTo is set to SQLITE_OK.
    */
    pBackup = sqlite3_backup_init(pTo, "main", pFrom, "main");
    if( pBackup ){
      (void)sqlite3_backup_step(pBackup, -1);
      (void)sqlite3_backup_finish(pBackup);
    }
    rc = sqlite3_errcode(pTo);
  }

  /* Close the database connection opened on database file zFilename
  ** and return the result of this function. */
  (void)sqlite3_close(pFile);
  return rc;
} 
```

# android - 比较 ImageView 对象

> ID：10441451
> 
> 赞同：1
> 
> 时间：2012-05-04T01:14:25.597
> 
> 标签：android, button, imageview

我需要通过图像资源（按钮上使用的封面图像）或图像资源的文件路径来比较两个 ImageView 对象。

类似于以下内容：

```
final ImageView button01 = (ImageView) findViewById(R.id.button01);
final ImageView button02 = (ImageView) findViewById(R.id.button02);
button01.setImageResource(R.drawable.myDogsPhoto);
button02.setImageResource(R.drawable.myDogsPhoto);
if (button01.getImageResource() == button02.getImageResource()) {
return true;
} 
```

有人可以告诉我如何比较两个 ImageView 组件吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:29:43.830

比较两个 ImageView 对象 ::

```
button01 =(ImageView)findViewById(R.id.button01 );
button02 =(ImageView)findViewById(R.id.button02 );

Drawable d=button01 .getDrawable();
Drawable d1=button02 .getDrawable();
if( d== d1){
     Toast.makeText(Example.this, "hello", Toast.LENGTH_SHORT).show();
}else {
    Toast.makeText(Example.this, "hai", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T01:29:27.957

一种可能的方法是使用[View.setTag();](http://developer.android.com/reference/android/view/View.html#setTag%28java.lang.Object%29) 存储资源值（或文件路径字符串）的方法。setTag() 和 getTag() 方法允许您将任意数据附加到 View 对象，您可以稍后根据需要调用这些数据。

例如：

```
final ImageView button01 = (ImageView) findViewById(R.id.button01);
final ImageView button02 = (ImageView) findViewById(R.id.button02);

button01.setImageResource(R.drawable.myDogsPhoto);
button01.setTag(R.drawable.myDogsPhoto);
button02.setImageResource(R.drawable.myDogsPhoto);
button02.setTag(R.drawable.myDogsPhoto);
if (button01.getTag().equals(button02.getTag())) {
    return true;
} 
```

注意我没有编译这个，它可能希望你将整数对象传递给 setTag()。

另外，我不知道这是否是完成您想做的事情的最佳方式，但这是首先想到的。

# javascript - 将 CoffeeScript 项目转换为 JavaScript（不缩小）？

> ID：10441452
> 
> 赞同：33
> 
> 时间：2012-05-04T01:14:35.480
> 
> 标签：javascript, json, node.js, coffeescript, npm

我们在工作中使用了一个用 CoffeeScript 编写的特定 jQuery*插件*，我希望我可以将项目转换为看起来有点正常的 JavaScript。该库看起来结构非常好（良好的 OOP 实践），但如果我可以探索它的源代码而无需学习 CoffeeScript 所需的所有技巧，我会非常喜欢它。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-04T01:22:29.833

将 CoffeeScript 编译成 JavaScript 通常会导致 JS 具有相当的可读性。[您可以在 CoffeeScript 主页](http://coffeescript.org)的“Try CoffeeScript”选项卡上或通过[CoffeeScript 命令行工具](http://coffeescript.org/#usage)即时转换片段。

还有像[decaffeinate](https://github.com/decaffeinate/decaffeinate)这样的工具可以将 CoffeeScript 源代码转换为现代 JavaScript。

如果您了解 JavaScript 并且只想能够读取文件的源代码，那么仔细阅读 CoffeeScript 主页可能会让您对 CoffeeScript 有足够的了解，从而相当容易地阅读 CoffeeScript 源代码。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-04T05:33:39.513

还有这个在线编译器[http://js2coffee.org/](http://js2coffee.org/)可以将 coffeescript 与 javascript 相互转换

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-03T13:50:04.373

在[http://coffeescript.org/](http://coffeescript.org/)上有一个标签 - 试试 CoffeeScript

把咖啡粘在左边，左边弹出JS

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-28T15:03:15.470

[BinaryMuse](https://stackoverflow.com/users/62082/binarymuse)将您[指向 CoffeeScript 命令行工具](http://coffeescript.org/#usage)，但我认为我为后代发布了实际命令：

*   将 src 中的 .coffee 文件的目录树编译成 lib 中的 .js 文件的并行树：

    咖啡--编译--输出库/ src/

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-05T01:21:22.853

你最好的选择是使用他们的编译器将 confeescript 转换为 JavaScript，一旦你有了它 - 你可以继续根据你的风格指南构建 JavaScript。

希望有帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-03T16:00:44.140

你也可以试试 Depercolator，它把一堆命令打包在一起（包括 decafinate、cjsx-transform、react-codemod、prettier）。

[文章： https](https://blog.bugsnag.com/converting-a-large-react-codebase-from-coffeescript-to-es6/) ://blog.bugsnag.com/converting-a-large-react-codebase-from-coffeescript-to-es6/和 GH repo：[https ://github.com/bugsnag/depercolator](https://github.com/bugsnag/depercolator)

# javascript - 使用 Javascript 将逗号分隔的列表转换为 JSON

> ID：10441458
> 
> 赞同：4
> 
> 时间：2012-05-04T01:16:04.870
> 
> 标签：javascript, jquery, json, csv

如何使用 Javascript / jQuery 将逗号分隔的列表转换为 json？

例如

转换以下内容：

```
var names = "Mark,Matthew,Luke,John,"; 
```

进入：

```
var jsonified = {
    names: [
      {name: "Mark"},
      {name: "Mattew"},
      {name: "Luke"},
      {name: "John"}
    ]
  }; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T01:35:33.573

```
var jsonfied = {
    names: names.replace( /,$/, "" ).split(",").map(function(name) {
        return {name: name};
    })
}; 
```

stringfying jsonfied 的结果：

```
JSON.stringify( jsonfied );

{
    "names": [{
        "name": "Mark"
    }, {
        "name": "Matthew"
    }, {
        "name": "Luke"
    }, {
        "name": "John"
    }]
} 
```

[现场演示](http://jsfiddle.net/gdoron/H8c4n/)

# java - 我可以将多个 URL 映射到一个操作，更改一个布尔参数吗？

> ID：10441459
> 
> 赞同：1
> 
> 时间：2012-05-04T01:16:25.027
> 
> 标签：java, spring, spring-mvc

我有一个这样的弹簧（3.1）控制器动作方法：

```
@RequestMapping(value="/{id}")
public String myAction(@PathVariable("id") long someId) { ... } 
```

我想介绍一个布尔值：

```
public String myAction(@PathVariable("id") long someId, boolean doBranch) { ... } 
```

但是，我希望根据访问该方法的 URL 来设置布尔值。换句话说，我想要

```
/foo/123 => myAction(123,false)
/debug/foo/123 => myAction(123,true) 
```

我知道我可以将多个 url 添加到 RequestMapping 注释中，但我还没有看到让映射本身影响参数的方法，除非传入参数或课程 ( `/foo/123?doBranch=true"`)。

我可以以某种方式轻松地扩展 Spring 来做到这一点吗？或者那里已经有东西可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T01:21:43.607

我知道这不是最优雅的方式，但是：

```
@RequestMapping("/foo/{id}")
public String myActionA(@PathVariable("id") long someId) {
   return myAction(someId, true);
}
@RequestMapping("/debug/foo/{id}")
public String myActionB(@PathVariable("id") long someId) {
   return myAction(someId, false);
}

public String myAction(@PathVariable("id") long someId, boolean doBranch) { ... } 
```

只需将 URL 映射到 2 个不同的方法，这些方法使用`true`或调用第三种方法`false`。

# iphone - iOS 上的企业分发应用程序，可以将 ipa 拖放到 iTunes 中吗？

> ID：10441466
> 
> 赞同：1
> 
> 时间：2012-05-04T01:16:56.510
> 
> 标签：iphone, ios, ipad, itunes, enterprise-distribution

只是好奇，如果我编译一个为企业分发配置的应用程序，我可以简单地将内置的 IPA 拖放到 iTunes 中，然后将其安装到 iDevice 上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:26:55.310

绝对有可能。这曾经是常规方式，直到 OTA 在 iOS 4.0 中出现。该应用程序可以邮寄给用户，也可以由她从 Intranet 门户下载，然后复制到 iTunes 并像应用商店应用程序一样同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T01:54:19.890

是的，您也可以将其设置为无线分发。这是假设您知道如何使用正确的配置文件构建和代码签名它。有关如何无线分发它的信息，请参阅此问题。

[iOS 4：内部应用程序的无线应用程序分发](https://stackoverflow.com/questions/3098290/ios-4-wireless-app-distribution-for-in-house-applications)

# android - 错误：Android SDK 需要 ADT 版本 17.0.0 或以上

> ID：10441469
> 
> 赞同：2
> 
> 时间：2012-05-04T01:17:34.167
> 
> 标签：android

我更新了 eclipse 中的所有内容，但是当我重新启动 eclipse 时，我收到了这个错误`'Android SDK requires android developer toolkit version 17.0.0 or above'`。

然后我在 Eclipse 中运行软件更新（帮助 > 检查更新）并更新 ADT，但它说`'No updates were found.'`。有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T04:31:28.637

您可以在 androidsdk\tools\lib\plugin.prop 中检查您的 android 版本吗？可能将其更正为您的原始 android 版本会起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T01:38:07.127

执行`Window`->`Android SDK Manager`并更新 /install 软件包。如果这不起作用，请下载 SDK 并解压缩，然后使用`Window`- `Preferences`->`Android`设置位置，然后运行`Android SDK Manager`

# ruby-1.9.3 - 用于docusign的未定义方法`gsub'...（NoMethodError）

> ID：10441471
> 
> 赞同：0
> 
> 时间：2012-05-04T01:18:37.487
> 
> 标签：ruby-1.9.3, gsub, nomethoderror, soap4r, docusignapi

通过github（git://github.com/felipec/soap4r.git）安装docusign gem和依赖soap4r gem后，我在尝试运行服务器时遇到了这个问题

```
user$ rails s
/Users/user/.rvm/gems/ruby-1.9.3-p125/bundler/gems/soap4r-5372d16ab9a9/lib/xsd/charset.rb:13: warning: variable $KCODE is no longer effective
/Users/user/.rvm/gems/ruby-1.9.3-p125/bundler/gems/soap4r-5372d16ab9a9/lib/soap/property.rb:68: warning: encoding option is ignored - u
/Users/user/.rvm/gems/ruby-1.9.3-p125/bundler/gems/soap4r-5372d16ab9a9/lib/soap/property.rb:69: warning: encoding option is ignored - u
/Users/user/.rvm/gems/ruby-1.9.3-p125/bundler/gems/soap4r-5372d16ab9a9/lib/soap/property.rb:70: warning: encoding option is ignored - u
/Users/user/.rvm/gems/ruby-1.9.3-p125/gems/docusign-0.8.0/lib/docusign/request_recipient_token_client_urls.rb:5:in `block in <class:RequestRecipientTokenClientURLs>': undefined method `gsub' for :onSigningComplete:Symbol (NoMethodError)
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/docusign-0.8.0/lib/docusign/request_recipient_token_client_urls.rb:5:in `map'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/docusign-0.8.0/lib/docusign/request_recipient_token_client_urls.rb:5:in `<class:RequestRecipientTokenClientURLs>'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/docusign-0.8.0/lib/docusign/request_recipient_token_client_urls.rb:2:in `<module:Docusign>'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/docusign-0.8.0/lib/docusign/request_recipient_token_client_urls.rb:1:in `<top (required)>'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:251:in `require'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:251:in `require'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/docusign-0.8.0/lib/docusign.rb:36:in `<top (required)>'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `require'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `each'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `block in require'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `each'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `require'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
    from /Users/user/Documents/Aptana Studio 3 Workspace/reaslo/config/application.rb:7:in `<top (required)>'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.1/lib/rails/commands.rb:53:in `require'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.1/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.1/lib/rails/commands.rb:50:in `tap'
    from /Users/user/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.1/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main> 
```

我调查了

> request_recipient_token_client_urls.rb

但只发现

> 回调 = instance_methods.select { |m| m =~ /^on/ }.reject { |m| m =~ /=/ }.map { |m| m.gsub(/^on/, '').underscore }

我不明白这里出了什么问题。我只能怀疑soap4r有问题，因为我必须通过与ruby 1.9兼容的github版本安装它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:25:20.510

该代码段不正确；它试图调用`gsub`由返回的方法名称之一`instance_methods`，它们是符号，而不是字符串。我猜git中的树顶在这里不稳定。

# android - 重新/卸载应用程序时防止 Android 设备重启

> ID：10441472
> 
> 赞同：2
> 
> 时间：2012-05-04T01:18:52.873
> 
> 标签：android, eclipse, adb

我正在 HTC 平板电脑上调试 Android 应用程序，每次卸载该应用程序时，设备都会重新启动。卸载也是尝试新版本的一部分，因此对应用程序的任何更改都需要在测试前重新启动。可以预见，这会加剧发展。

[这个问题听起来与这里描述](https://stackoverflow.com/questions/9239453/android-phone-reboots-on-uninstall)的相似，只是在我的案例中没有什么神秘之处。卸载 => 重新启动。通过 Eclipse & adb => 重新启动更改应用程序和调试。按照类似问题的唯一答案中的建议擦除设备上的所有数据是不可取的，特别是因为没有太多迹象表明即使是该海报也没有将其视为牺牲鸡的技术等价物。

谁能告诉我为什么会发生这种情况以及如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:44:57.627

*我没有提供这个作为答案（至少现在还没有），但需要更多的空间而不是评论提供的关于如何调查这个问题的集思广益*

我很想采用一个安全的“hello world”类型的应用程序并将其作为自己的活动合并到项目中。然后从 manifest 和 java 文件中注释掉所有真正的功能。那应该只留下你好世界和资源。查看设备是否在运行后卸载它 - 如果没有，猜测您可能不得不怀疑资源。

这应该做评论 - 或者你可以从树中批量删除文件

```
find  . -name "*.java" | xargs -I f sed -i 's/^/\/\//' f 
```

（一些编辑器会阻止注释/取消注释，emacs 会对文件的列进行任意操作。）

然后，我要么取消注释实际活动的框架——即所有 onCreate、onStart 等方法，其中没有任何操作，然后将该活动恢复到清单。否则我会恢复功能性 Java 代码，但将活动排除在清单之外。然后，您可以逐步添加越来越多的功能，直到崩溃。

如果你有任何 ndk 库甚至 java 库，你可以用它们玩类似的游戏。

您还可以尝试在卸载期间运行 logcat，并查看在设备挂断您之前是否有任何消息。

哦 - 还有一个主要问题，这是内核重启还是 android 运行时重启？在后一种情况下，adb & logcat 应该可以存活，并且 /proc/uptime 不会被重置为一个小数字。

如果你把它归结为一个可疑的操作，如果你能发布一个描述，那就太好了——我的测试集合中有一个类似的设备，很想看看它是否有同样的明显错误。HTC 也有许多“开发人员布道者”，他们可能是一个联系人。

# css - 如何保持图像/链接在页面上垂直可见？

> ID：10441474
> 
> 赞同：0
> 
> 时间：2012-05-04T01:19:02.033
> 
> 标签：css

如何在非常长的页面上垂直保持图像在浏览器窗口中可见？（不像现在那样居中）这是出现这种情况的页面：[http](http://designs-and-more.com/Apparel_Designs.html) ://designs-and-more.com/Apparel_Designs.html请注意，当您向下滚动时，您会看到链接，但我希望它们在一直。有人有帮助吗？如果有人知道一个示例的链接，那将是很棒的，因为我的编程技能非常非常基础。提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:30:33.927

好的，我已经检查了您的网站。您必须在声明中添加 CSS 专业。

```
vertical-aling: top;

.dsR37 {
    background-image: url("images/but_Home_BG.png");
     vertical-aling: top;
} 
```

主页链接的示例，您的其他菜单声明不同，因此您必须相互添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T01:24:33.827

老式的方法是使用框架。我相信现在大多数网站都没有这样做（通常是菜单、侧边栏等，随着页面内容滚动），因为他们认为保持框架设计不适合用户交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T01:34:32.430

您可能正在寻找 CSS 固定定位。这是来自 David Walsh 网站的演示：http: [//davidwalsh.name/dw-content/css-fixed-position.php](http://davidwalsh.name/dw-content/css-fixed-position.php)

谷歌“css 固定定位”，你会发现一些关于如何“固定”侧边导航的演示，无论用户滚动到哪里都可以看到。

# php - 防止 save() 覆盖 xml 文件中的 dtd

> ID：10441475
> 
> 赞同：1
> 
> 时间：2012-05-04T01:19:09.783
> 
> 标签：php, xml, dom, dtd

我正在编写一个将节点添加到 xml 文件的脚本。除此之外，我还制作了一个外部 dtd 来处理文件的组织。但是，我编写的脚本在完成附加节点后会不断覆盖空 xml 文件中的 dtd。我怎样才能阻止这种情况发生？

代码：

```
<?php

/*Dom vars*/
$dom = new DOMDocument("1.0", "UTF-8");
$previous_value = libxml_use_internal_errors(TRUE);
$dom->load('post.xml');
libxml_clear_errors();
libxml_use_internal_errors($previous_value);
$dom->formatOutput = true;
$entry = $dom->getElementsByTagName('entry');
$date = $dom->getElementsByTagName('date');
$para = $dom->getElementsByTagname('para');
$link = $dom->getElementsByTagName('link');

/* Dem POST vars used by dat Ajax mah ziggen, yeah boi*/
if (isset($_POST['Text'])){
$text = trim($_POST['Text']);

}
/*
function post(){
    global $dom, $entry, $date, $para, $link, 
    $home, $about, $contact, $text;
*/  
    $entryC = $dom->createElement('entry');
    $dateC = $dom->createElement('date', date("m d, y H:i:s")) ;
    $entryC->appendChild($dateC);

$tab = "\n";
$frags = explode($tab, $text);
$i = count($frags);
$b = 0;

while($b < $i){

$paraC = $dom->createElement('para', $frags[$b]);
$entryC->appendChild($paraC);
$b++;
}

$linkC = $dom->createElement('link', rand(100000, 999999));
$entryC->appendChild($linkC);
$dom->appendChild($entryC);
$dom->save('post.xml');

/*}

post();
*/echo 1;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:31:47.987

看起来为了做到这一点，你必须创建一个 DOMDocumentType 使用

```
DOMImplementation::createDocumentType 
```

然后使用DOMImplementation创建一个空文档，并传入你刚刚创建的DOMDocumentType，然后导入你加载的文档。这篇文章： http: [//pointbeing.net/weblog/2009/03/adding-a-doctype-declaration-to-a-domdocument-in-php.html](http://pointbeing.net/weblog/2009/03/adding-a-doctype-declaration-to-a-domdocument-in-php.html)，评论看起来很有用。

我猜这是因为在解析/验证之后，DTD 不再是 DOM 的一部分，因此 PHP 无法在文档序列化时包含它。

你**必须**使用DTD吗？XML Schema 可以通过属性链接（因此链接是 DOM 的一部分）。或者有RelaxNG，可以通过处理指令链接。DTD 拥有所有这些作为 SGML 遗留下来的包袱。有更好的选择。

# php - 如何在插入 MYSQL 之前删除撇号？（不仅仅是逃避它们）

> ID：10441481
> 
> 赞同：-1
> 
> 时间：2012-05-04T01:20:07.323
> 
> 标签：php, mysql

我有一个程序可以获取有时带有撇号的网页标题。我不只是想将它们注释掉并用 \s 转义它们。我怎样才能一起摆脱它们？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T01:21:23.350

[`str_replace()`](http://us3.php.net/manual/en/function.str-replace.php)应该管用：

```
$string = str_replace("'", "", $string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T02:15:20.120

您可以使用此功能从任何不需要的字符中清除标题。

```
function clean_up( $text ) {
    $unwanted = array("'"); // add any unwanted char to this array
    return str_ireplace($unwanted, '', $text);
    } 
```

像这样使用它：

```
$dirty_title = "I don't need apostrophes.";
$clean_title = clean_up($dirty_title);
echo $clean_title; // outputs: I dont need apostrophes. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-04T13:18:18.963

```
$string = str_replace("'", "&#39;", $string); 
```

此方法是 PHP 和 MySQL 安全的，并且在回显时不会改变字符串的外观。在处理像 O'Brian 这样的名字时很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-02T18:12:03.820

如果要插入包含撇号的字符串，请在代码中添加以下行以将其转义：

`$data = str_replace("'", "\'", $data);`

# c# - 精确对象到字节的转换，类似于 C# 中的 memcpy

> ID：10441486
> 
> 赞同：0
> 
> 时间：2012-05-04T01:20:40.590
> 
> 标签：c#, serialization, network-programming, cross-platform

一段时间以来，我一直在寻找解决方案，但我发现的东西都不是很匹配。C# 有一个内置的序列化库很棒，但这并不是我想要的。我需要以可以序列化它们的方式序列化对象，将标头数据附加到数据包中，即。ID 号、时间戳、对象类型等，然后能够将其发送出去，而无需记住我将其发送到的平台。换句话说，我应该能够在 C++ 或 Java 中解包我的数据包，而无需比我要转换的对象类型和标头数据的顺序更多的知识。C# 中的二进制格式化程序会产生一个问题，因为它被设计为在另一端使用相同的库进行反序列化。它还会创建我不想处理的臃肿数据包。

|========|========|=========|===|==============|

| 数据包ID | 数据类型 | 时间戳 | 等| 序列化对象 |

|========|========|=========|===|==============|

如果我可以访问 memcpy 中的某些东西来实现这一点，那就太好了，因为只要对象的数据类型顺序被反序列化为匹配项（是的，假设其他语言具有相同的数据类型字节大小)，在新平台上从服务器抓取数据很容易（比如我想抓取 Android (Java) 或 iPhone (obj.C) 的数据），几乎没有麻烦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T01:44:10.013

我使用[谷歌的协议缓冲区](http://code.google.com/p/protobuf/)效果很好。它体积小、速度快、跨平台、向后兼容并序列化为二进制格式。它不支持您正在寻找的自定义标头信息，但如果您可以构建自己的数据包，您可以将自定义标头添加到您认为合适的二进制流上。Protobuf 可以编译成[C#](http://code.google.com/p/protobuf-csharp-port/)、iOS、Java 和 C++。

# python - 使用 facebook-sdk 在用户的“新闻提要”中发布

> ID：10441493
> 
> 赞同：0
> 
> 时间：2012-05-04T01:21:25.907
> 
> 标签：python, facebook, facebook-timeline

伙计们，我正在尝试使用 facebook-sdk 向用户的“新闻提要”发布消息，但收效甚微。以下代码只能发布到用户的墙上。我想将它发布到用户的新闻提要（时间线）。

```
graph.put_object("me", "feed", message='some text') 
```

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:26:40.547

用户的墙现在被称为用户的时间线。相同的 API 调用将用于发布到时间线。根据 Facebook 算法和帖子的受欢迎程度，发布到用户时间线/新闻提要的帖子将出现在朋友的新闻提要中。

如果这不是您所追求的，请改写问题以更具体/更清楚。

# ruby-on-rails-3 - 语言环境 .yml 字符串中的下标文本

> ID：10441495
> 
> 赞同：2
> 
> 时间：2012-05-04T01:21:44.217
> 
> 标签：ruby-on-rails-3, internationalization, yaml

有什么方法可以按照以下方式设置我的 en.yml 文本的样式...

```
en:
  ...
  phosphorus:     "lbs/ac of Phosphorus (P<sub>2</sub>O<sub>5</sub>)" 
```

如您所见，我希望数字是下标文本。

此文本用作表单中的标签。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:31:04.840

要在您的翻译中包含 HTML，您的密钥应以`_html`或结尾，`.html`例如

`en.phosphorus.html`或`en.phosphorus_html`（我个人更喜欢第一个版本）。

Rails 会知道 HTML 不会转义这些字符串。

# php - 基于日期范围输入的具有 2 个表关系的 PHP 搜索数据

> ID：10441496
> 
> 赞同：0
> 
> 时间：2012-05-04T01:21:45.280
> 
> 标签：php, mysql

我的代码有问题：
错误是：`Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given in C:\xampp\htdocs\siix_dev\overtime\track_reports.php on line 333`

我认为连接表函数中的错误，但我无法分析这种情况的解决方案。

```
<?php
                    include ("config.php");

                    $bagianWhere = "";

                    if (isset($_POST['chkBadge']))
                    {
                        $badge_id = $_POST['badge_id'];
                        $status_acknowledge = "Acknowledged";
                        if (empty($bagianWhere))
                        {
                            $bagianWhere .= "badge_id = '$badge_id' order and t_submissions.submission_no=t_acknowledged.submission_no and t_acknowledged.status_acknowledge='$status_acknowledge' by time_submission DESC";
                        }
                    }

                    if (isset($_POST['chkEmp']))
                    {
                       $employee_name = $_POST['employee_name'];
                       $status_acknowledge = "Acknowledged";
                       if (empty($bagianWhere))
                        {
                            $bagianWhere .= "employee_name LIKE '$employee_name' and t_submissions.submission_no=t_acknowledged.submission_no and t_acknowledged.status_acknowledge='$status_acknowledge' order by time_submission DESC";
                        }
                        else
                        {
                            $bagianWhere .= " AND employee_name LIKE '$employee_name' and t_submissions.submission_no=t_acknowledged.submission_no and t_acknowledged.status_acknowledge='$status_acknowledge' order by time_submission DESC";
                        }
                    }

                    if (isset($_POST['chkOtdate']))
                    {
                        $date_from = $_POST['date_from'];
                        $date_to = $_POST['date_to'];
                        $status_acknowledge = "Acknowledged";

                        if (empty($bagianWhere))
                        {
                            $bagianWhere .= "ot_date between '$date_from' and '$date_to' and t_submissions.submission_no=t_acknowledged.submission_no and t_acknowledged.status_acknowledge='$status_acknowledge' order by time_submission DESC";
                        }
                        else
                        {
                            $bagianWhere .= " AND ot_date between '$date_from' and '$date_to' and t_submissions.submission_no=t_acknowledged.submission_no and t_acknowledged.status_acknowledge='$status_acknowledge' order by time_submission DESC";
                        }
                    }

                    $query = "SELECT t_submissions.submission_no, t_submissions.badge_id,
                    t_submissions.employee_name, t_submissions.ot_date, t_submissions.dept_name,
                    t_submissions.ot_from, t_submissions.ot_to,
                    t_submissions.remarks, t_submissions.submission_by, t_acknowledged.acknowledge_by,

                    FROM t_submissions, t_acknowledged WHERE ".$bagianWhere;

                    $hasil = mysql_query($query);
                                if(mysql_num_rows($hasil) > 0)
                                {
                                    ?>
                                    <div class="outer">
                                        <div id="main" class="wrapper">
                                            <div class="content-area">
                                            <table cellspacing="0" class="font">
                                                <thead>
                                                    <tr>
                                                        <th class="th">Form No</th>
                                                        <th class="th">Badge ID</th>
                                                        <th class="th">Name</th>
                                                        <th class="th">OT Date</th>
                                                        <th class="th">OT From</th>
                                                        <th class="th">OT To</th>
                                                        <th class="th">Submission By</th>
                                                        <th class="th">Status Ack.</th>
                                                        <th class="th">Status App.</th>
                                                    </tr>                                               
                                                </thead>

                                                <?php
                                                    while($submission = mysql_fetch_array($hasil))
                                                    {?>
                                                        <tbody>
                                                            <tr>
                                                                <td class="td"><?php echo $submission['submission_no'];?></td>
                                                                <td class="td"><?php echo $submission['badge_id'];?></td>
                                                                <td class="td"><?php echo $submission['employee_name'];?></td>
                                                                <td class="td"><?php echo $submission['ot_date'];?></td>
                                                                <td class="td"><?php echo $submission['ot_from'];?></td>
                                                                <td class="td"><?php echo $submission['ot_to'];?></td>
                                                                <td class="td"><?php echo $submission['submission_by'];?></td>
                                                                <td class="td"><?php echo $submission['acknowledge_by'];?></td>
                                                                <td class="td"><?php echo $submission['approval_by'];?></td>
                                                            </tr>
                                                        </tbody>
                                                    <?php 
                                                    }?>
                                            </table>
                                            </div>
                                        </div>
                                    </div>
                                    <?php
                                }
                                else
                                {
                                    echo '<p STYLE="position:absolute; TOP:170px; left:500px;">Data not found.</p>';
                                }
                    ;
                    ?> 
```

使用日期范围输入和 2 个表关系进行搜索。

请帮我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:33:07.053

SQL 查询设置不正确（例如提供`FALSE`to `mysql_num_rows`）。最有可能在您的`WHERE`条款内`$bagianWhere`。乍一看，如果同时设置`$_POST['chkEmp']`和`$_POST['chkOtdate']`，它会返回一个错误，因为后者不以 . 开头`AND`。

我建议您使用所有可能的组合自行测试查询（无论如何它们看起来很小）。

另外，这里真的需要笛卡尔积吗？

编辑：`$bagianWhere .= "badge_id = '$badge_id' order and`- 这`order`似乎不合适？

# java - 用于 ElasticSearch 的 Java HTTP 客户端

> ID：10441499
> 
> 赞同：24
> 
> 时间：2012-05-04T01:22:18.450
> 
> 标签：java, elasticsearch, elasticsearch-jest

我正在尝试从 Java 连接到 ElasticSearch，但我只能通过 HTTP 连接。我无法使用`TransportClient`. 是否有围绕 ElasticSearch REST API 的 Java 客户端包装器？如果是这样，我该如何使用它？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-25T14:18:22.280

嗨，有一个全新的项目正好符合您的需求。它基于 Java 的用于 Elasticsearch 的 Rest API

看看这个！它的名字[JEST](https://github.com/searchbox-io/Jest)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-04T01:55:01.423

从 v5.0.0-alpha4 开始，[将提供](https://github.com/elastic/elasticsearch/pull/18735)一个新的“官方”基于 REST 的 java 客户端。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-06T07:38:51.260

我们刚刚开源了[Flummi](https://github.com/otto-de/flummi)，这是一个用于 Elastic Search 的 Java HTTP/REST 客户端。它尽可能地模仿传输客户端的 API，使移植现有代码变得容易。它还提供了比 Jest 更好的抽象级别，因为它使用异常报告所有错误。试试看！

简单的使用示例：

```
Flummi flummi = new Flummi("http://elasticsearch.base.url:9200");

SearchResponse searchResponse = flummi
   .prepareSearch("products")
   .setQuery(
      QueryBuilders.termQuery("color", "yellow").build()
    )
   .execute();

System.out.println("Found " 
   + searchResponse.getHits().getTotalHits()
   + " products");
searchResponse.getHits()
  .stream().map(hit -> hit.getSource().get("name").getAsString())
  .forEach(name -> System.out.println("Name: " + name)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-18T12:30:27.533

[从 Elasticsearch Java SDK 5.6 版](https://www.elastic.co/guide/en/elasticsearch/reference/current/release-notes-5.6.0.html)开始，它们提供了一个[Java REST Client](https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/index.html)。

```
 RestClient restClient = RestClient.builder(
    new HttpHost("localhost", 9200, "http"),
    new HttpHost("localhost", 9201, "http")).build();

 // for the RestHighLevelClient
 RestHighLevelClient client =
    new RestHighLevelClient(restClient); 
```

# c++ - c++程序在打印矩阵时停止而没有错误警告

> ID：10441504
> 
> 赞同：0
> 
> 时间：2012-05-04T01:22:52.563
> 
> 标签：c++

我似乎找不到任何解决方案。

我有一个包含矩阵的“路线”类型。如果我这样做：

```
cout << route << endl; 
```

它可以打印内存但是如果我尝试

```
 cout << route[1][1] << endl; 
```

程序刚刚结束，没有任何错误或任何东西。调试说：“（暂停：信号：SIGSEGV：分段错误）”

这是代码：

```
//structure is a type I created
Structure ***route = list->searchRoute(startPoint, destination, time);
//should return a matrix
cout << "Avaible routes: \n" << endl;
    for(int i = 0; i < 5;i++)
        cout << route[1][1]->startPoint << endl; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:27:05.033

分段错误通常意味着您正在访问您不应该访问的内存。可能发生的情况是我们的“矩阵”可能太小而无法在第二行/第二列中有一个块，因此当您尝试访问该位置时会引发错误（因为您不拥有它）。确保您以正确的大小正确分配路线。

# c# - 更改使用 SOAP 的 Web 服务的 url

> ID：10441506
> 
> 赞同：0
> 
> 时间：2012-05-04T01:23:31.400
> 
> 标签：c#, asp.net, web-services, soap, asmx

对于一个学校项目，我们必须制作一个网站和一个与网络服务交互的 ipod 应用程序。网站和网络服务都在学校提供的同一台服务器上。在我的学校更换服务器之前，一切都运行良好，所以现在我们需要将端口添加到 url：

之前：xxx.com/group5网站

之后：xxx.com:81/group5网站

现在，当我们尝试调用 Web 服务时，它会将我们发送到旧页面并显示“找不到资源”。因为它仍然将我们引导到旧站点（xxx.com/group5Website/webService/AppServicev1.asmx/getLot）

问题是我们无法访问实际的服务器，只能访问您 group5Website 上存储的文件，有什么办法可以解决这个问题吗？

这是一个基于 asp.net 的网站，谢谢，希望有人知道该怎么做，因为我真的不想失败哈哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T02:22:43.780

请尝试删除旧的网络参考并添加新的网络参考。

请参阅：http: [//msdn.microsoft.com/en-us/library/d9w023sx%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/d9w023sx%28v=vs.90%29.aspx)

> 在解决方案资源管理器中，右键单击 Web 引用，然后单击删除。
> 
> 所有参考信息都将从项目和本地存储中删除。

# ruby - 我可以使用 activerecord 关系来查找嵌套属性吗？

> ID：10441508
> 
> 赞同：0
> 
> 时间：2012-05-04T01:23:55.907
> 
> 标签：ruby, ruby-on-rails-3, activerecord

抱歉，如果我的问题措辞不当。我正在努力表达它。让我们在代码中尝试一下！

我有一个拥有多个项目的客户模型。如果我有这样生成的 ActiveRecord 关系；

```
clients = Client.where(':sign_up_time < ?', Time.now) 
```

我想获得一份属于在这种关系中返回的客户的所有项目的列表，我该怎么做？我可以很容易地在 Ruby 中完成它并返回一系列项目，例如

```
projects = clients.inject([]) {|proj,cli| proj << cli.projects}.flatten 
```

这绝对没问题，但我认为在 ActiveRecord 中可能有一种很好的干净方法。

重要的是我想以`clients`对象为起点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T02:09:26.570

我相信您想要的是加入，请阅读所有相关信息：

[http://guides.rubyonrails.org/active_record_querying.html#joining-tables](http://guides.rubyonrails.org/active_record_querying.html#joining-tables)

```
Project.joins(:clients).where(:clients=>'sign_up_time < ?', Time.now) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T02:04:05.183

这不是真正的 ActiveRecord，但执行以下操作有点像这样做的习惯用法：

```
projects = Client.where(':sign_up_time < ?', Time.now).map(&:projects).flatten 
```

这与您所拥有的几乎相同，但写得更干净。不过，您也可以这样做：

```
clients = Client.where(':sign_up_time < ?', Time.now)
projects = Project.where(:client_id => clients) 
```

这导致`projects`成为一个`ActiveRecord::Relation`而不是一个数组，这可能更有用。它也是一种更加面向 SQL 的方法，可以更快。

# c++ - 让 Xcode 识别没有“.h”扩展名的 C++ 头文件 (OpenSceneGraph)

> ID：10441509
> 
> 赞同：9
> 
> 时间：2012-05-04T01:24:20.883
> 
> 标签：c++, xcode, header-files, file-extension, openscenegraph

OpenSceneGraph 使用[不带“.h”扩展名的](http://www.openscenegraph.org/projects/osg/wiki/Support/FAQ#WhydonttheOSGheaderfileshavea.hor.hppextension)头文件。有没有办法让 Xcode 将语法识别为 C++，因此允许我突出显示和跳转到定义等？

*例如：没有突出显示：*

![在此处输入图像描述](../Images/5e2bf299d2abe12825eb700ec953facd.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T01:28:21.443

是的。在选择文件的情况下切换右侧面板（工具栏“查看”部分最右侧的图标，屏幕截图中的箭头 1）。选择面板中的文档选项卡（箭头 2），然后在“身份和类型”下找到“文件类型”（箭头 3）。在下拉列表中选择“C++ 标头”。

![前面的解释的图形版本](../Images/bb744a77354fbbcf790a14bd48e3c15f.png)

您将需要重新打开文件以启动语法着色。

# windows - 在 Windows 7 上为 Python 3.2.3 安装 OpenCV

> ID：10441513
> 
> 赞同：1
> 
> 时间：2012-05-04T01:24:35.843
> 
> 标签：windows, opencv, python-3.x

> **可能重复：**
> [在 Windows 7 上为 Python 2.7 安装 OpenCV](https://stackoverflow.com/questions/4709301/installing-opencv-on-windows-7-for-python-2-7)

我正在尝试让 OpenCV 与 Python 3.2.3 一起工作。我知道 Python 3.1 的[ctypes-opencv](http://code.google.com/p/ctypes-opencv/)方法。理想情况下，我想要一个安装程序，但在任何地方都找不到。我试图通过几个教程来工作，但它们似乎都很复杂。如果有人可以向我指出通过 ctypes 使用 opencv 的教程或其他任何有用的东西，将不胜感激。

# zend-framework - 在 Zend Framework 中显示图像

> ID：10441516
> 
> 赞同：0
> 
> 时间：2012-05-04T01:24:57.967
> 
> 标签：zend-framework

我是 Zend 框架的新手，所以如果这是一个基本问题，请原谅我，但我有一段时间，显示从数据库检索到的图像。

编辑：我基本上无法访问 /public/ 文件夹中的任何资源。我猜前端控制器正在重定向`<link>`标签和`<img>`标签内的 src 请求。每次我搜索时，我都会看到人们在访问 /public/ 文件夹之外的图像时遇到问题……但只要它们存储在 /public 文件夹下，它们似乎就可以了。我究竟做错了什么？

我在部分视图中有以下代码：

```
<?php
$user = Zend_Layout::getMvcInstance()->getView()->user;

?>
<section class="one-fifth first sidebar_profile">
  <div class="one-fifth first about_img"><img src="<?php if($user->picture){echo '/public/img/users/small_thumbs/'.$user->picture;}else{echo "#";}  ?>" alt="name"/>
      <p class="name"><?php  if($user) {echo $user->username; } else { echo "Username";} ?></p> 
```

做一个转储`$user`给了我以下信息：

```
object(Zend_Db_Table_Row)[70]
protected '_data' => 
array
  'userID' => string '22' (length=2)
  'username' => string 'test' (length=4)
  'firstName' => string '' (length=0)
  'lastName' => string '' (length=0)
  'email' => string 'test@google.com' (length=18)
  'password' => string '098f6bcd4621d373cade4e832627b4f6' (length=32)
  'picture' => string '4fa3072fe09a5.jpg' (length=17)
  'verified' => string '1' (length=1)
  'confirm_key' => null
  'admin' => null 
```

它持续了很长一段时间，但关键是文件在那里。查看呈现的页面的源代码，有问题的行呈现为：

```
<img alt="name" src="/public/img/users/small_thumbs4fa3072fe09a5.jpg"> 
```

我应该使用某种视图助手来显示这个吗？我找了又找，一个也找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:33:33.777

从技术上讲，如果你使用框架，你不应该在你的视图中做逻辑。您应该在控制器和视图中执行 if/else 语句，只需执行以下操作：

```
<div class="one-fifth first about_img"><img src="$img"/></div> 
```

但是对于您的问题，如果您将 src 属性复制粘贴到浏览器中，它会显示图片吗？

这是我的.htaccess。它直接提供任何扩展匹配此正则表达式的文件，并将其他所有内容重定向到我的 index.php，这是我的引导文件。

```
RewriteEngine On
RewriteRule \.(shtml|js|ico|gif|jpg|png|css|flv|swf|swz)$ - [NC,L]
RewriteRule ^.*$ index.php 
```

# mysql - 出现错误：使用 mysql 的 Node.js 的访问被拒绝

> ID：10441517
> 
> 赞同：1
> 
> 时间：2012-05-04T01:25:01.150
> 
> 标签：mysql, node.js

我正在尝试获取一个使用 mysql 工作的 node.js 应用程序。我运行 sudo node app.js 并收到此错误：

```
Express server listening on port 80 in development mode

events.js:48
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: Access denied for user 'root'@'localhost' (using password: YES)
    at cmd.process_packet (/Users/.../Documents/Code/.../node_modules/mysql-native/lib/mysql-native/command.js:35:15)
    at SocketClient.dispatch_packet (/Users/.../Documents/Code/.../node_modules/mysql-native/lib/mysql-native/socketclient.js:105:32)
    at Socket.<anonymous> (/Users/.../Documents/Code/.../node_modules/mysql-native/lib/mysql-native/socketclient.js:59:18)
    at Socket.emit (events.js:67:17)
    at TCP.onread (net.js:362:31) 
```

我为mysql设置了一个安全的用户名和密码，但除了sudo之外，它并没有要求我输入密码。我是 node.js 尤其是 mysql 的初学者，因此将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:42:42.470

所以我联系了以前做过这件事的人，他帮助我完成了这件事。基本上我用 mysql -u root -p 连接到 mysql，输入我的密码，创建数据库并使用该数据库并输入所有数据库信息。然后在 db.auth 下的 api.js 中，我将数据库名称、我的用户名和密码放在括号中，每一个都是用逗号分隔的字符串。然后我在一个单独的终端选项卡中运行了 node.js 应用程序，它工作了。

# google-maps - 从 google map api v3 获取英文地址

> ID：10441521
> 
> 赞同：5
> 
> 时间：2012-05-04T01:26:01.587
> 
> 标签：google-maps, localization

我使用谷歌地图 api v3 从一个点获取坐标和地址，但谷歌返回法语地址。这是我用来获取地址的脚本，如何强制谷歌地图以英文返回结果。

```
 var map;
    var geocoder;
          var mapOptions = { center: new google.maps.LatLng(0.0, 0.0), zoom: 2,
            mapTypeId: google.maps.MapTypeId.ROADMAP };

  function initialize() {
        var myOptions = {
            center: new google.maps.LatLng(36.835769, 10.247693 ),
            zoom: 15,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

    geocoder = new google.maps.Geocoder();
    var map = new google.maps.Map(document.getElementById("map_canvas"),
    myOptions);
    google.maps.event.addListener(map, 'click', function(event) {
        placeMarker(event.latLng);
    });

    var marker;
    function placeMarker(location) {
        if(marker){ //on vérifie si le marqueur existe
            marker.setPosition(location); //on change sa position
        }else{
            marker = new google.maps.Marker({ //on créé le marqueur
                position: location, 
                map: map
            });
        }
        document.getElementById('lat').value=location.lat();
        document.getElementById('lng').value=location.lng();
        getAddress(location);
    }

  function getAddress(latLng) {
    geocoder.geocode( {'latLng': latLng},
      function(results, status) {
        if(status == google.maps.GeocoderStatus.OK) {
          if(results[0]) {
            document.getElementById("address").value = results[0].formatted_address;
          }
          else {
            document.getElementById("address").value = "No results";
          }
        }
        else {
          document.getElementById("address").value = status;
        }
      });
    }
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T01:52:43.187

根据[文档](https://developers.google.com/maps/documentation/javascript/basics#Localization)`language`，您可以通过添加参数来更改地图 API 的表示语言，如下所示：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&language=ja"> 
```

或者，根据[这个答案](https://stackoverflow.com/a/314312/875127)，您可以使用`google.load`命令更改使用的服务，如下所示：

```
<script type="text/javascript">
 google.load("maps", "2",{language: "de",base_domain: 'google.de'});
 ...
</script> 
```

（取自链接问题的代码）。这是google.load[文档的链接。](https://developers.google.com/loader/#GoogleLoad)我在想改变 base_domain 会达到预期的结果，但我还没有测试过。

# iphone - touchesBegan 没有被触发

> ID：10441524
> 
> 赞同：1
> 
> 时间：2012-05-04T01:26:17.107
> 
> 标签：iphone

我使用下面的代码来检测物体上的触摸

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    NSArray *allTouches = [touches allObjects];

    for (UITouch *touch in allTouches)
    {
           NSLog(@"TOUCH DETECT");

    }
} 
```

但它没有被触发

欢迎任何评论

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T01:32:04.220

什么样的对象？`touchesBegan:withEvent:`仅对 UIResponder 子类调用。

此外，如果它是 UIView，请确保`userInteractionEnabled`为 YES。

# objective-c - 在 Core Data 中处理 UISearchBar

> ID：10441526
> 
> 赞同：1
> 
> 时间：2012-05-04T01:27:06.560
> 
> 标签：objective-c, ios, database, core-data, nsfetchedresultscontroller

这是 iPad 中的应用理念：我有两个在核心数据中建模的实体。Golfer 实体与 FittingSession 具有一对多的关系，因此每个高尔夫球手都能够拥有多个试衣会话。由于我是新用户，因此无法发布数据模型的图像。但这里有详细信息：

实体：高尔夫球手的 GOLFER 和 FITTING SESSION 属性 - first_name、last_name、emailId、contactNum、picture 关系：NSSet * FittingSessions

拟合会话的属性 - session_number、日期、位置、注释。关系： Golfer * whoPlayed

我正在开发一个名为 ViewManager 的视图控制器，它里面有 2-3 个自定义 UIViews（高尔夫球手表视图和 Fitting Session 表视图）。每当我需要它们时，我都会为它们设置动画。

我正在从 NSFetchedResultsController 的 tableview 中获取我的 Golfers 列表集合。我在顶部添加了一个 UISearch 栏，以便我可以搜索任何特定的高尔夫球手并获得获得的结果。我要不要再使用一个 NSFetchedResultsController 来获取搜索栏的结果？注意：我不能使用 UISearchDisplayController，因为如果我使用它并尝试搜索特定的高尔夫球手，它会在与整个视图大小相等的表视图中显示结果，而我的表视图是内部的子视图（大小 320 * 480）主视图（1024 * 768- 横向模式 iPad）。

我该如何在这里解决问题？

# matlab - Matlab损失精度计算方差

> ID：10441527
> 
> 赞同：0
> 
> 时间：2012-05-04T01:27:13.147
> 
> 标签：matlab, statistics, variance

我有这个向量 [10000000000 10000000001 10000000002]

我尝试使用这个公式计算它的方差

[![公式](../Images/4231e1f8dbf68837022c3e0e34e02d77.png)](https://i.stack.imgur.com/CoGUL.png)

我计算它，但我得到的答案是 3.33333333466667e+19 这是错误的，因为正确答案是 1。

我做错了什么？

MATLAB代码是

```
 total=0;
    m1=data(1);
    m2=(data(2)-m1)/2;
    q1=0;
    q2=q1+(((2-1)/2)*((data(2)-m1)^2));
    q3=q2+(((3-1)/3)*((data(3)-m2)^2));
    variance=q3/(3-1) 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T02:10:40.360

M是平均计算，它应该是

```
Mk = ((k-1) M(k-1) + xk)/k 
```

因此

```
m1=data(1);
m2=(data(2)+m1)/2;
q1=0;
q2=q1+(((2-1)/2)*((data(2)-m1)^2));
q3=q2+(((3-1)/3)*((data(3)-m2)^2));
variance=q3/(3-1)
variance =
     1 
```

见鬼，我感觉很慷慨，通用尺寸数据的完整代码：

```
sizle = size(data,2);
M = zeros(1, sizle);
Q = M;
Variance = Q;
M(1)=data(1);
for i = 2:sizle
    M(i)=((i-1)*M(i-1) + data(i))/i;
    Q(i)=Q(i-1)+(i-1)*((data(i)-M(i-1))^2)/i;
    Variance(i) = Q(i)/(i-1);
end

Variance(end)
var(data) 
```

# opengl-es - 获取像素颜色不准确

> ID：10441528
> 
> 赞同：1
> 
> 时间：2012-05-04T01:27:18.667
> 
> 标签：opengl-es, colors, picking, openglcontext

我目前在我的应用程序中使用颜色选择。这适用于 PC，但是我无法让它在各种设备上运行。

这可能是由于上下文设置不同，具体取决于设备。例如，据我所知，PC 的颜色设置为 888，而设备可能默认设置为 565。

我想知道 OpenGL 中是否有办法获取当前的像素/颜色格式，以便我可以正确检索颜色数据？

这是我正在使用的功能，它在 PC 上运行良好：

```
inline void ProcessColourPick(GLubyte *out, KDfloat32 x, KDfloat32 y)
{
    GLint viewport[4];
    GLubyte pixel[3];

    glGetIntegerv(GL_VIEWPORT,viewport);

    //Read colour of pixel at a specific point in the framebuffer

    glReadPixels(x,viewport[3]-y,1,1,
        GL_RGB,GL_UNSIGNED_BYTE,(void *)pixel);

    out[0] = pixel[0];
    out[1] = pixel[1];
    out[2] = pixel[2];
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:27:30.033

是的，但它有点复杂。

在 ES 2.0 中查询当前帧缓冲区的位深度相当容易（注意：这在 Desktop GL 中也是合法的，但在 GL 3.1 核心中删除了此功能。它仍然可以从兼容性配置文件中访问）。您必须获取每个颜色分量的位深度：

GLint位深度；glGetIntegerv(GL_x_DEPTH, &bitdepth);

其中*x*是`RED`、`GREEN`、`BLUE`或中的一个`ALPHA`。

获得位深度后，您可以测试它是否为 565，并使用适当的像素传输参数和颜色值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:11:16.857

for的`format`参数`glReadPixels`必须是 GL_RGBA（始终支持）或`GL_IMPLEMENTATION_COLOR_READ_FORMAT_OES`（在不同设备上不同）。这是 OpenGL ES 的限制。

# mod-rewrite - 整洁的 URL 丢失了相关链接

> ID：10441529
> 
> 赞同：0
> 
> 时间：2012-05-04T01:27:31.097
> 
> 标签：mod-rewrite, url-rewriting

我一直在我的网站中实现整洁的 url 和查询字符串，但无法让查询字符串解析并正确显示页面 - 所有链接都与“faux”目录相关

我正在使用

```
RewriteRule ^services/([0-9]+)/?$ services.php?sv=$1 
```

在.htaccess

```
so /services/2 becomes /services.php?sv=2 
```

但结果页面显示不正确。

我只能认为在使用整洁的 url 和查询字符串时不可能使用相对链接，但我在任何地方都找不到提及这一点。

标准链接：[http](http://www.tomatedesign.com/sample-site/services.php?sv=2) ://www.tomatedesign.com/sample-site/services.php?sv= 2 与查询字符串一样正常

最后：[http://www.tomatedesign.com/sample-site/services/2](http://www.tomatedesign.com/sample-site/services/2) 带有查询字符串的整洁 URL

RewriteRule 正在完成它的工作，services/1、services/2 和 services/3 都获得了页面上包含的正确内容，只是其他所有内容都被破坏了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:08:52.737

实际上我只需要包括

```
<base href="/"> 
```

在文件中让页面适当地解析链接

# javascript - 移动重定向和完整站点到子域

> ID：10441533
> 
> 赞同：0
> 
> 时间：2012-05-04T01:28:49.650
> 
> 标签：javascript, jquery, redirect, mobile

完成网站的移动版本后，我使用[https://github.com/sebarmeli/JS-Redirection-Mobile-Site](https://github.com/sebarmeli/JS-Redirection-Mobile-Site)重定向到移动站点以及重定向到整个站点。另外我正在使用 cookie 功能使用以下代码将状态保存 1 小时：

```
 <script>
                 SA.redirection_mobile ({
                noredirection_param : "noredirection", 
                mobile_prefix : "m", 
                cookie_hours : "1"
                });
            </script> 
```

我遇到的问题是我在我的网站中使用子域，当我回到完整网站时，如果我点击一个链接，例如 news.site.com/cat1/news1 或 video.site.com/video1，重定向会返回到移动站点，因为 cookie 是为 www.site.com 站点创建的，所以重定向是 www.site.com/noredirection=true。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:51:21.043

如果您自己设置 cookie 而不使用 www，这个问题很容易解决。将 cookie 的域设置为 .site.com 将允许任何子域。[看看这个堆栈答案。](https://stackoverflow.com/questions/5671451/creating-a-javascript-cookie-on-a-domain-and-reading-it-across-sub-domains) 您可能能够修改您使用的脚本，或者只是手动设置 cookie。

# iphone - iOS - 如何调整滑块的比例

> ID：10441534
> 
> 赞同：0
> 
> 时间：2012-05-04T01:29:13.533
> 
> 标签：iphone, ios, slider, scaling

我有一个应用程序，我想在照片中放置一个对象并缩放它以反映它应该与相机的距离。在全尺寸时，我希望它在距离相机约 10 米处反射，在最小尺寸时，我希望它在 30 米外。

不幸的是，滑块似乎几乎无限地缩放它，在缩放时看起来不是很真实。完成此操作的最佳方法是什么，以便我同时获得最小和最大距离以及以逼真的方式缩放中间距离（即，每个中间步骤反映它应该与相机的实际距离）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:41:35.123

默认情况下`UISlider`和分别为 0`minimumValue`和`maximumValue`1，这可能解释了您所看到的缩放行为。您可以配置这些值以简化计算，或者将默认的 0-1 范围缩放到 10-30 米。

# google-maps - 动态标记 - Google Maps API - 标记不随循环中的 i 值递增

> ID：10441537
> 
> 赞同：1
> 
> 时间：2012-05-04T01:29:44.213
> 
> 标签：google-maps, dynamic, google-maps-markers

我在下面创建了 maps api，并有一组来自数据库的地址。地图正确加载，但是我有以下问题。

1.  动态标记不会随着“i”的值增加。所以地图显示所有标记为“1”而不是“1,2,3,4,5”

    ```
    // Define Vars
    var pinColor = "FE7569";
    var marker, i;

    // Set default map center location
    var latlng = new google.maps.LatLng(-27.79014,153.18049);

    // Create pinShadow for each marker 
    var pinShadow = new google.maps.MarkerImage("http://chart.apis.google.com        /chart?chst=d_map_pin_shadow",
        new google.maps.Size(40, 37),
        new google.maps.Point(0, 0),
        new google.maps.Point(12, 35));

    // Function to create the dynamic marker
    function pinImage(i){
        return image = new google.maps.MarkerImage("http://www.googlemapsmarkers.com/v1/"+i+"/"+pinColor+"/", new google.maps.Size(21, 34), new google.maps.Point(0,0), new google.maps.Point(10, 34));
    }

    // Function to run once page has loaded
        function initialize(){      
    // Set Default settigns for google map
    var settings = {
        zoom: 10,
        center: latlng,
        mapTypeControl: true,
        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
        navigationControl: true,
        navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
        mapTypeId: google.maps.MapTypeId.ROADMAP};

    // Start Google Maps and assign it to div on site
    var map = new google.maps.Map(document.getElementById("map_canvas"), settings);     

    // loop though total numner of address in array
    for (i = 1; i < total; i++) {  
        // Use geocoder to grab latlong for user inputed address
        geocoder.geocode( { 'address': address[i]}, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                // Redefine map center location
                if (i = 1){ map.setCenter(results[0].geometry.location); }

                // Create dynamic markers on map as per the address array
                var marker = new google.maps.Marker({
                    map: map, 
                    position: results[0].geometry.location,
                    title:address[i],
                    zIndex: i,
                    // PROBLEM CODE --- Using the function below it creates all Markers with a "1" instead of the "i" value..??  
                    icon: pinImage(i),
                    shadow: pinShadow
                });         
            }
        });
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T02:00:14.890

旧的“函数范围包装器”技巧`(function(i) {...})(i)`在这里有效。没有它，执行将采用 i 的最终值。还有，`if(i = 1)`应该`if(i == 1)`

玩：http: [//jsfiddle.net/BK8vv/](http://jsfiddle.net/BK8vv/)

```
for (var i = 1; i < total; i++) {  
   (function(i) {

    // Use geocoder to grab latlong for user inputed address
    geocoder.geocode( { 'address': address[i]}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            // Redefine map center location
            if (i == 1){ map.setCenter(results[0].geometry.location); }

            // Create dynamic markers on map as per the address array
                    alert(i);
            var marker = new google.maps.Marker({
                map: map, 
                position: results[0].geometry.location,
                title:address[i],
                zIndex: i,
                // PROBLEM CODE --- Using the function below it creates all Markers with a "1" instead of the "i" value..??  
                icon: pinImage(i),
                shadow: pinShadow
            });         
        }
       });
     })(i);
    }
} 
```

# java - 向 facebook 注册 - Java 服务器端身份验证 - 获取访问令牌

> ID：10441539
> 
> 赞同：0
> 
> 时间：2012-05-04T01:29:59.307
> 
> 标签：java, facebook, facebook-graph-api, facebook-oauth

要获取用户详细信息，facebook 文档建议进行此调用：

```
https://graph.facebook.com/me?access_token=YOUR_USER_ACCESS_TOKEN 
```

当用户使用 facebook 的“注册插件”注册时，我如何从签名请求中获取此用户 access_token。后者包含一个 oauth_token，但我找不到有关如何获取 access_token 的文档。我使用***java 服务器端身份验证***技术（我不使用 javascript 方式..）

具体来说，文档说：

```
https://graph.facebook.com/oauth/access_token?
    client_id=YOUR_APP_ID
    &redirect_uri=YOUR_REDIRECT_URI
    &client_secret=YOUR_APP_SECRET
    &code=CODE_GENERATED_BY_FACEBOOK 
```

[这个答案](https://stackoverflow.com/a/8521436/489177)建议传递一个空白的重定向 uri。但是注册流程中的“CODE_GENERATED_BY_FACEBOOK”来自哪里？我尝试将签名请求中的 oauth_token 作为“facebook 生成的代码”传递。但是验证失败。

指针会有所帮助。谢谢。

注意：我已经可以使用“使用 facebook 登录”并且我知道如何在该流程中获取 access_token。但是当用户使用 facebook 注册时，我希望有一种更直接的方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:49:49.950

您可能已经解决了您的问题，但无论如何我都会提出问题；**您必须为dialog/oauth**和**oauth/access_token**页面的“redirect_uri”参数设置完全相同的值（不幸的是，这在 Facebook 文档中没有明确说明）。就我而言，有问题的 URI 是：

*   https://www.facebook.com/dialog/oauth?client_id=23902620775&redirect_uri=http%3a%2f%2fwww.mydomain.com%2fMembership%2fLoginCheckFacebook &scope= **user_birthday** ,email

*   https ://graph.facebook.com/oauth/access_token?client_id=23902620775& **redirect_uri=http%3a%2f%2flocal.www.mydomain.com%2fMembership%2fLoginCheckFacebook** &client_secret=80a34471e31e7afa0a7a7cd3cfc7&code=AQDsrevxH_Q3-NVts8VBThXCC0z6cCIhdnTMVCE9McsjJYLLy6ZKnlibmi8tWPcP...

# wordpress - 发布自定义帖子类型时在 Wordpress 中运行函数

> ID：10441543
> 
> 赞同：0
> 
> 时间：2012-05-04T01:30:32.917
> 
> 标签：wordpress

每当发布 wordpress“工作”自定义帖子时，我都会尝试运行以下功能。代码在我的主题模板中时有效（第 2-7 行），但它仅在查看帖子时运行。我希望代码在发布帖子时运行，因此我尝试将代码添加到我的functions.php 中的函数中，但是发布每个自定义帖子时都没有发生任何事情。有什么建议么？

```
function indeedgeo(){
    $indeedgeo = get_post_meta($post>ID, indeedgeo, true);
    $indeedgeos=explode(' ',$indeedgeo);
    $_jr_geo_latitude = $indeedgeos[0];
    $_jr_geo_longitude = $indeedgeos[1];
    update_post_meta($post->ID, _jr_geo_latitude, $_jr_geo_latitude);
    update_post_meta($post->ID, _jr_geo_longitude, $_jr_geo_longitude);
    }
add_action('publish_Jobs', 'indeedgeo'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T05:45:27.257

您应该参与三个动作之一；

```
do_action('edit_post', $post_id, $post);
do_action('save_post', $post_id, $post);
do_action('wp_insert_post', $post_id, $post); 
```

在保存帖子或更新其状态时运行。像下面这样的东西应该可以解决问题。

```
function se_10441543_save_post($post_id, $post){
    //determine post type
    if(get_post_type( $post_id ) == 'your_post_type'){
        //run your code
        $indeedgeo = get_post_meta($post_id, indeedgeo, true);
        $indeedgeos=explode(' ',$indeedgeo);
        $_jr_geo_latitude = $indeedgeos[0];
        $_jr_geo_longitude = $indeedgeos[1];
        update_post_meta($post_id, _jr_geo_latitude, $_jr_geo_latitude);
        update_post_meta($post_id, _jr_geo_longitude, $_jr_geo_longitude);
    }
}

add_action('save_post', 'se_10441543_save_post', 10, 2); 
```

[http://codex.wordpress.org/Plugin_API/Action_Reference](http://codex.wordpress.org/Plugin_API/Action_Reference)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:03:46.093

不确定你的“publish_jobs”钩子是如何工作的，但马上，如果你把这个函数放在你的functions.php中，你需要给它上下文。替换`$post>ID`为帖子编号（整数）。如果这适用于许多帖子，您可能需要使用另一种查询帖子数据的方法： http: [//codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)。让我知道这是否有帮助。

# iphone - 浏览 iDevice 上的应用程序文件夹结构

> ID：10441547
> 
> 赞同：0
> 
> 时间：2012-05-04T01:31:42.247
> 
> 标签：iphone, ios, itunes

当我将 iPhone 插入计算机时，我可以访问手机上的应用程序文件夹结构吗？使用不涉及越狱的工具以编程方式或手动方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:22:30.427

你试过[iExplorer](http://www.macroplant.com/iexplorer/)吗？看看是否满足您的要求。（它不需要设备越狱）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T01:37:45.507

没有越狱就无法完成，您基本上必须使用 xcode 创建您的应用程序文件夹结构。

# excel - 如何根据一年中的月份计算值的总和

> ID：10441548
> 
> 赞同：0
> 
> 时间：2012-05-04T01:31:53.370
> 
> 标签：excel, excel-2010

我有一个使用数据透视表创建的数据集。

数据如下所示：

```
product                 01-2010        02-2010          03-2010           04-2010        .....
product1               $234              $855                $839                $834               .....
product2               $855              $839                $834                $542               .....
product3               $343              $939                $884                $839               ..... 
```

我想要做的是使用查找表将范围分组在一起

即 2010 年第一季度 = 01-2010、02-2010、03-2010

我想重新排列数据以使用将 2010 年第一季度标识为包括 01-2010、02-2010、03-2010 的查找表，然后显示一个新表：

```
product                 Q1-2010                                                               Q2-2010                                                                 .....
product1               SUM_OF(01-2010, 02-2010, 03-2010)          SUM_OF(04-2010, 05-2010, 06-2010)            .....
product2               SUM_OF(01-2010, 02-2010, 03-2010)          SUM_OF(04-2010, 05-2010, 06-2010)            .....
product3               SUM_OF(01-2010, 02-2010, 03-2010)          SUM_OF(04-2010, 05-2010, 06-2010)            ..... 
```

自动化的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:56:47.483

你在正确的轨道上：如果它没有标题，pivot 拒绝接受该列。因此，月份或季度的新列，添加标题，然后进行透视。

# ruby - Ruby方法来反转不递归单词的字符

> ID：10441550
> 
> 赞同：1
> 
> 时间：2012-05-04T01:32:25.513
> 
> 标签：ruby

“按字符反转”有效，但第三次测试“按单词”不起作用 -

```
expected: "sti gniniar"
  got: "sti" (using ==)

def reverse_itti(msg, style='by_character')

  new_string = ''
  word = ''

  if style == 'by_character'
    msg.each_char do |one_char|
      new_string = one_char + new_string
    end 
  elsif style == 'by_word'
    msg.each_char do |one_char|
      if one_char != ' ' 
        word+= one_char
      else
        new_string+= reverse_itti(word, 'by_character') 
        word=''
      end 
    end 
  else 
    msg 
  end 
  new_string
end

describe "It should reverse sentences, letter by letter" do

  it "reverses one word, e.g. 'rain' to 'niar'" do
    reverse_itti('rain', 'by_character').should == 'niar'
  end 
  it "reverses a sentence, e.g. 'its raining' to 'gniniar sti'" do
    reverse_itti('its raining', 'by_character').should == 'gniniar sti'
  end 
  it "reverses a sentence one word at a time, e.g. 'its raining' to 'sti gniniar'" do
    reverse_itti('its raining', 'by_word').should == 'sti gniniar'
  end 

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:42:29.200

问题出在这个循环中：

```
msg.each_char do |one_char|
  if one_char != ' ' 
    word+= one_char
  else
    new_string+= reverse_itti(word, 'by_character') 
    word=''
  end 
end 
```

else 块反转当前单词并将其添加到输出字符串中，但它仅在循环遇到空格字符时运行。由于字符串的最后没有空格，所以最后一个单词永远不会添加到输出中。`new_string+= reverse_itti(word, 'by_character')`您可以通过在循环结束后添加来解决此问题。

此外，您可能还想在 else 块的输出字符串末尾添加一个空格。

# asp.net-mvc - 在 ASP.NET MVC 中配置 MongoDB 连接的最佳位置是什么？

> ID：10441551
> 
> 赞同：0
> 
> 时间：2012-05-04T01:32:42.873
> 
> 标签：asp.net-mvc, mongodb, dependency-injection

我使用的另一个 MVC 框架 - Symfony2 - 使用依赖注入器来仔细配置和管理依赖关系。

ASP.NET MVC 是否有任何类似的东西可以让我配置 MongoDB 连接，然后将其传递给可以使用它的控制器逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:05:30.737

有许多不同的依赖注入库可以与 Asp.net MVC 一起使用，这里有一个（非全面的）列表：

*   结构图
*   忍者
*   自动法
*   统一
*   春天网。

如果您在 Nuget 中查找它们，通常会有一个用于容器本身的包，以及一个添加 Asp.Net MVC 插件的不同包。

看看它们，找出你喜欢的风格，然后将你的 mongo db 连接配置为每个请求，将连接添加到你的控制器构造函数，然后你就走了。如果您选择一个库并更新您的问题，我相信有人会用特定的代码等来回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T01:56:36.760

这通常在 web.config 文件中完成

```
 <appSettings>
    <add key="MONGOHQ_URL" value="mongodb://localhost/YourDBName"/>
 </appSettings> 
```

可以像这样引用该值...

```
public class ConfigEnvironment
   {
      public static string GetConnectionString()
      {
         return ConfigurationManager.AppSettings.Get("MONGOHQ_URL") ??
                "mongodb://localhost";
      }
   } 
```

使用它来创建您的数据库

```
MongoDatabase.Create(ConfigEnvironment.GetConnectionString()) 
```

# javascript - 如何使用 javascript 将静态信息分配给随机选择的数据？

> ID：10441555
> 
> 赞同：0
> 
> 时间：2012-05-04T01:33:12.277
> 
> 标签：javascript

我有一个用于项目的简单 javascript 程序。简单来说，它只是在一个html页面上显示一个来自外部js文件的随机单词，比如Car、Bus、Train、Boat等。每次选择的单词都是随机选择的。因此，在一次加载时它可能会说 Bus，然后在另一次加载时可能会说 Airplane。

我现在想为每个单词分配静态信息，我试图弄清楚，实现这一点的最简单方法是什么？例如，我仍然希望数据是随机选择的，但是如果它说 Bus 我想显示一辆公共汽车的图片或显示一些其他数据，但仅限于选择 Bus 时，其他所有单词也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:42:45.787

创建一个对象数组：

```
var wordList = [
 {
  "word" : "Bus",
  "image" : "http://www.example.com/bus.jpg"
 },
 {
  "word" : "Airplane",
  "image" : "http://www.example.com/airplane.jpg"
 }
] 
```

然后您可以通过以下方式引用它们：

```
var busWord = wordList[0].word;
var airplaneImage = wordList[1].image; 
```

获得随机数后，您可以相应地生成对：

```
var rand = Math.floor((Math.random()*wordList.length)+1);
var myWord = wordList[rand].word;
var myImage = wordList[rand].image; 
```

# scala - Scala 相当于 Haskell 的 do-notation（又一次）

> ID：10441559
> 
> 赞同：21
> 
> 时间：2012-05-04T01:33:49.460
> 
> 标签：scala, haskell, monads

我知道 Haskell 的

```
do
  x <- [1, 2, 3]
  y <- [7, 8, 9]
  let z = (x + y)
  return z 
```

可以在 Scala 中表示为

```
for {
  x <- List(1, 2, 3)
  y <- List(7, 8, 9)
  z = x + y
} yield z 
```

但是，特别是对于 monad，Haskell 经常在`do`块内有不对应于`<-`or的语句`=`。例如，下面是 Pandoc 的一些代码，它使用 Parsec 从字符串中解析某些内容。

```
-- | Parse contents of 'str' using 'parser' and return result.
parseFromString :: GenParser tok st a -> [tok] -> GenParser tok st a
parseFromString parser str = do
  oldPos <- getPosition
  oldInput <- getInput
  setInput str
  result <- parser
  setInput oldInput
  setPosition oldPos
  return result 
```

如您所见，它保存位置和输入，在字符串上运行解析器，然后在返回结果之前恢复输入和位置。

我一生无法弄清楚如何将 , 和 翻译`setInput str`成`setInput oldInput`Scala `setPosition oldPos`。我认为如果我只是把无意义的变量放进去，这样我就可以使用了`<-`，比如

```
for {
  oldPos <- getPosition
  oldInput <- getInput
  whyAmIHere <- setInput str
  result <- parser
  ...
} yield result 
```

但我不确定情况是否如此，如果它是正确的，我相信一定有更好的方法来做到这一点。

哦，如果你能回答这个问题，你能再回答一个吗：我必须盯着 Monads 多长时间才能感觉它们不像黑魔法？:-)

谢谢！托德

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-04T01:45:28.433

是的，那个翻译是有效的。

`do { x <- m; n }`等价于`m >>= \x -> n`和`do { m; n }`等价于`m >> n`。由于`m >> n`被定义为`m >>= \_ -> n`（其中的`_`意思是“不要将此值绑定到任何东西”），这确实是一个有效的翻译；与或`do { m; n }`相同。`do { _ <- m; n }``do { unusedVariable <- m; n }`

块中没有变量绑定的语句`do`只会忽略结果，通常是因为没有有意义的结果可言。例如， 的结果没有什么有趣的事情`putStrLn "Hello, world!"`，因此您不会将其结果绑定到变量。

（至于 monad 是黑魔法，你能得到的最好的认识是它们一点也不复杂；试图在它们中找到更深层次的含义通常不是学习它们如何工作的有效方式。它们只是一个接口编写碰巧特别常见的计算。我建议阅读[Typeclassopedia](http://www.haskell.org/haskellwiki/Typeclassopedia)以牢固掌握 Haskell 的抽象类型类，尽管您需要阅读一般的 Haskell 介绍才能从中学到很多东西。）

# java - 不使用任何预定义集合库的购物篮

> ID：10441561
> 
> 赞同：0
> 
> 时间：2012-05-04T01:34:33.757
> 
> 标签：java, jsp

我有以下任务：

> 在不使用任何预定义集合库的情况下实现基本购物篮。请评论您的代码以支持您的设计决策和您所做的任何假设。您的购物篮必须支持以下两种方式：-
> 
> 1.  `void add(Item i, int n) - adds n copies of i to the basket`
> 2.  `int totalPrice()` - 计算篮子的总价格。总价必须在恒定时间内返回；但是，`void add(Item i, int n)` 不需要在恒定时间内返回。

我已经实现了这样的购物类，但不知道如何实现 totalPrice 方法。

```
public class Shopping {

public void add(Item i, int n){
    int totalCost = (int) (i.getItemPrice()*n);
}

public static void main(String arg[]){
    Item item = new Item();
    item.setItemPrice(10);
    Shopping shopping = new Shopping();
    shopping.add(item,4);
}

} 
```

我在测试中被问到这个问题。有谁可以给​​我一些想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:37:10.073

您可以在类中声明一个成员变量，您可以使用它来存储篮子中的总价格。每次您将商品添加到购物篮时，您都可以更新此变量的值。假设我们添加了一个成员变量：

```
private int total; 
```

然后修改您的 add(...) 方法以将 totalCost 的值添加到 total 中，您应该在 totalPrice() 方法中做的唯一事情就是返回 total 的值。您可以在构造函数中初始化变量 total。

# ruby-on-rails - 资产管道和@font-face on rails(rails 3.2.3)

> ID：10441563
> 
> 赞同：7
> 
> 时间：2012-05-04T01:34:52.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3, font-face, asset-pipeline, assets

如何在 Rails 上使用 @font-face 嵌入字体：

我的字体位于：

> /vendor/assets/stylesheets/fonts/ **custom-font-lists-here** .eot

我的包含@font-face 的样式表在里面：

> /vendor/assets/stylesheets/fonts.css

我现在正在使用这个

```
@font-face {
    font-family: 'ArimoRegular';
    src: url('<%= asset_path('fonts/arimo-regular-webfont.eot') %>');
    src: url('<%= asset_path('fonts/arimo-regular-webfont.eot') %>'+'?#iefix') format('embedded-opentype'),
         url('<%= asset_path('fonts/arimo-regular-webfont.woff') %>') format('woff'),
         url('<%= asset_path('fonts/arimo-regular-webfont.ttf') %>') format('truetype'),
         url('<%= asset_path('fonts/arimo-regular-webfont.svg') %>#ArimoRegular') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

我想知道这是否正确，

欢迎任何建议，谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T02:17:58.280

您不需要`fonts/`文件路径的部分。该`app/assets/fonts`目录应该已经包含在 中`asset_path`，因此您应该能够使用它：

```
<%= asset_path('arimo-regular-webfont.eot') %> 
```

我不知道为什么会发生这种情况，但我听说有人遇到`assets/fonts`目录不在资产管道中的问题，因此您必须手动添加它。如果上述方法对您不起作用，请尝试通过将以下内容手动添加目录`config/application.rb`：

```
config.assets.paths << "#{Rails.root}/app/assets/fonts" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T13:56:28.273

在使用`asset_path`助手时，你应该附加`.erb`到你的`font.css`，所以它变成`font.css.erb`. 在您的情况下，更好的解决方案是使用来自`sass-rails`或`less-rails`gems 的资产助手`font-url`。

有关它的更多信息：[sass-rails 功能](https://github.com/rails/sass-rails#features)

# iphone - 单击按钮时更新 UIImageView

> ID：10441564
> 
> 赞同：0
> 
> 时间：2012-05-04T01:34:58.940
> 
> 标签：iphone, xcode, xcode4, storyboard

我正在使用情节提要功能在 XCode 4.2 中创建一个应用程序。我有 4 个基于导航控制器连接的视图。在其中一个视图中，我有一个文本框和一个按钮。我已经通过将文本框添加为代理来实现键盘隐藏。一旦我在文本框上输入完毕，我将按下按钮，它应该更新 UIImageView。

我知道我需要在 Interface Builder 上的 UIImageView 和我在接口文件上声明的 UIImageView IBoutlet 之间建立某种关系。但是我如何在情节提要的情况下做到这一点？

在`abcViewController.h`我有

```
@interface abcViewController:UIViewController {   
   IBOutlet UITextField *code;    
   IBOutlet UIImageView *qrImage;  
}  
@property (noatomic, 保留) UITextField *code;  
@property (noatomic, 保留) UIImageView *qrImage  
-(IBAction)textFieldReturn:(id)sender;  
-（IBAction）goButton：（id）发件人；

```

在`abcViewController.m`我有

```
@synthesize 代码；
 @synthasize qrImage；
-(IBAction)textFieldReturn:(id)sender{
   [发件人辞职FirstResponder]；
}
-(IBAction)goPressed:(id)sender{
   [qrImage setImage:[UIImage imageNamed:@"qr.png"]];
}

```

在 Interface Builder`MainStoryboard.storyboard`中，我已经在视图`First Responder`中为文本框`textFieldReturn`和按钮建立了`goPress`与相应事件的关系，并且我已将文本框链接为该视图的 deligate。现在我是否也必须将 UIImageViewer 连接到“First Responder”？如果是怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:46:59.530

首先，您需要确保您的视图控制器类链接到您在情节提要中创建的视图控制器。

![在此处输入图像描述](../Images/a6ec083c3f3d812d023a8f444ca00036.png)

然后将您在代码中声明的对象链接到情节提要中的对象，就像使用 xibs 一样拖放。

![在此处输入图像描述](../Images/cb11f6276bfa285404210c6ddbed0e0d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T01:56:38.647

我认为您可能错误地使用了一些术语，但是您可以在 Interface Builder 中的视图和代码之间建立两种不同类型的连接。当您说您在第一个响应者与按钮和文本字段之间“建立了关系”时，听起来您连接了他们的操作。它所做的是创建*从*视图（按钮、文本字段等）*到*您将其连接到的对象（在这种情况下，第一个响应，本质上是 abcViewController）。将其视为单向路径；它所做的只是告诉这些控件（按钮和文本字段）它们应该在何时发送消息，因为事件发生了。因此，当按钮被单击时，它具有在某处发送消息的内置行为，如果它已连接。您已将它连接到 abcViewController 上的 goPressed: 操作，这就是它的作用。

硬币的另一面是确保视图控制器可以将消息发送回控件。这就是网点的用途。听起来您没有设置任何出口，因此 abcViewController 无法向图像视图发送消息以表明它应该显示，或者更改它的图像或任何东西。

您应该做的第一件事是将您的属性也定义为 IBOutlets，例如：

```
@property (noatomic, retain) IBOutlet UITextField *code; 
```

Then when you go back to Interface Builder, if you go to the connections tab of the inspector, when the First Responder is selected, you will see it list out all of it's outlets. 您需要将第一响应者 (abcViewController) 上的插座连接（从点拖动）到相应的视图。这会创建*从*视图控制器*到*视图的路径（与您对操作所做的相反）。

一旦完成，如果你告诉对象在你的代码中做某事，当你的视图被加载时，该消息将被传送到从 XIB 创建的对象。

# java - 从内网下载JSP

> ID：10441567
> 
> 赞同：0
> 
> 时间：2012-05-04T01:35:30.217
> 
> 标签：java, jsp, servlets

我需要从 Intranet http 服务器读取二进制文件并将其下载到公共。

架构

内网文件服务器(Apache)=1 <-->公共http服务器(Apache Tomcat)=2<-->互联网授权用户=3

如何在不保存到服务器 2 上的文件系统的情况下发布它

感谢您的回答，我是 java 新手。

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T02:35:36.883

在这种情况下，我只能想到两种方法：

*   将 Internet 请求重定向到 Intranet。

在 JSP 页面中使用：

```
<% response.sendRedirect("http://intranet_address");%> 
```

或者

`<c:redirect url="http://intranet_address"/>`使用标准标签库。

在 Servlet 页面中使用：

```
response.setStatus(302);
response.setHeader("Location", "http://intranet_address"); or just  

response.sendRedirect("http://intranet_address"); 
```

*   在服务器 2 上使用一种代理从服务器 1 读取并直接发送给互联网用户，而不保存到服务器 2。

我从未在 Intranet 上尝试过第一种方法，但鉴于 Intranet 地址对 Internet 用户无效，我认为它不会起作用。

现在我们只剩下第二种方法了——使用代理层。代理功能可以通过多种方式实现：一种简单的方式可能只是 Servlet 后面的一个 bean，用于打开文件服务器 1 的 URL，读取文件并通过 Servlet 响应流将其发送给用户，或者您可以使用某种嵌入式 HTTPClient。

**编辑：**由于您要下载二进制文件，JSP 不是一个好的选择。它旨在处理文本数据。你需要 Servlet 来做二进制流。您可以在 HttpServletResponse 上设置如下内容：

```
 resp.setContentType("application/octet-stream");
 resp.setContentLength(length);
 resp.setHeader("Content-Disposition", "attachment; filename=\"" + filename + "\"" ); 
```

因此内容将以您设置的名称作为附件发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:10:58.860

使用 java.net.URL（或另一个 http 客户端）从 1 中读取，然后将其打印出来（响应 3）。

（在 Apache Http Server 或 Nginx 中，这可以使用反向代理来实现。）

# asp.net-mvc - 我是否需要在 Web 服务器上安装 MVC 3/4 才能运行 mvc 应用程序

> ID：10441568
> 
> 赞同：46
> 
> 时间：2012-05-04T01:35:33.530
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个 MVC 4 应用程序，并且在我为 VS 2010 安装 MVC 4 扩展的 DEV 机器上运行良好。

使用 IIS 7 部署到 Web 服务器时，我需要安装 MVC 4 还是我的项目中包含的 dll 就足够了？

我问的原因是我们需要向基础架构团队提供需求。

谢谢。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-05-04T01:37:50.167

您无需在服务器上安装 MVC 即可运行 MVC 应用程序。Visual Studio 中有一种叫做**可部署依赖的东西。**当您发布它时，它将在您的 bin 文件夹中发布您的 MVC DLL。

从[msdn](http://msdn.microsoft.com/en-us/library/gg286946.aspx)页面，

> 这会将程序集（DLL 文件）添加到网站项目或 Web 应用程序项目中。当您部署您的网站或应用程序时，这些文件将包含在已部署的项目中。如果您的项目所依赖的应用程序或技术尚未安装在将托管您的 Web 项目的服务器上，这将非常有用。例如，您可以使用此功能将 ASP.NET MVC 3 Web 应用程序部署到未安装 ASP.NET MVC 3 的服务器。

右键单击项目并从上下文菜单中选择添加可部署依赖项

![在此处输入图像描述](../Images/5e5f29577a6e04e89146ffadc18350e1.png)

选择要发布的所有 DLL

![在此处输入图像描述](../Images/6835066d24f70e295f29705c1712c692.png)

单击确定后，您将看到一个名为 _bin_deployableAssemblies 的新文件夹。您现在可以执行正常的发布过程，并且您将在发布输出的 bin 文件夹中拥有 dll。

![在此处输入图像描述](../Images/b12ed38317261a617915ca9d387933a6.png)

查看这篇文章了解更多详情[http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)

**你应该有 Visual Studio 2010 SP1**。否则，当您右键单击要发布的项目时，它不会显示在上下文菜单中。

**编辑：** 从 MVC4 开始，运行 MVC 应用程序所需的所有程序集都会自动添加到 bin 目录中，并且任何 MVC4 应用程序都是可 bin 部署的（意味着您可以在服务器中运行它而无需显式安装 MVC）。因此，“包含可部署程序集”对话框已从 Visual Studio 2012 中删除

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T15:14:10.467

您不再可以在 Visual Studio 2012 中选择“添加可部署的依赖项”。因此，您必须手动执行此操作，方法是对所有 MVC 程序集进行 bin 部署：

```
Microsoft.Web.Infrastructure
System.Web.Helpers
System.Web.Mvc
System.Web.Razor
System.Web.WebPages
System.Web.WebPages.Deployment
System.Web.WebPages.Razor 
```

[可在此处](http://drew-prog.blogspot.co.uk/2011/01/how-to-deploy-aspnet-mvc-3-app-to-web.html)找到分步指南。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T01:46:04.363

当您在 Visual Studio 中创建 MVCx 特定项目时，您会看到许多 MVC.* 引用被添加到您的项目中，默认情况下，所有这些引用属性“复制本地”设置为“真”意味着这些引用将成为您的一部分最终解决方案，无论何时部署到。您还可以验证这些 MVC 特定引用也是您的 BIN 文件夹的一部分。

最后，当您将此解决方案打包并发布到特定的 Web 服务器或 Windows Azure 或使用 WebDeploy 时，所有这些引用也将成为您的包的一部分。并且因为这些参考是在您的包中提供的，所以无论您在哪里部署解决方案，所有 MVC 特定参考都将在那里，因此您不需要将 MVC 部署到这些特定服务器。

我还想补充一点，当您在 Visual Studio 中添加对项目的特定引用时，将其属性“Copy Local”设置为 TRUE，这样引用将始终是您最终解决方案的一部分，并且可以让您免于遇到麻烦未来。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T01:38:55.710

您只需要将 dll 部署到项目的 bin 中。有关如何准备发布网站的示例，请查看以下博客文章：

[运行-an-asp-net-mvc-3-app-on-a-web-server-that-doesn-t-have-asp-net-mvc-3-installed.aspx](http://weblogs.asp.net/scottgu/archive/2011/01/18/running-an-asp-net-mvc-3-app-on-a-web-server-that-doesn-t-have-asp-net-mvc-3-installed.aspx)。

# sql - SQL.REQUEST Excel 函数替代方案？用 VBA 创建一个？

> ID：10441570
> 
> 赞同：0
> 
> 时间：2012-05-04T01:35:58.953
> 
> 标签：sql, excel, vba

我希望`SELECT`在 Excel 中的单个单元格内执行 SQL 语句，使用其他单元格作为`SELECT`语句的输入。经过一番搜索，我发现该`sql.request`功能完全符合我的要求。但是，该功能在 2002 年之后被弃用，我在这里运行 Excel 2007 和 2010。[引文](http://office.microsoft.com/en-us/excel-help/sql-request-function-HP010342916.aspx)

我试图创建一个做同样事情的宏/VBA 脚本，但还没有走得很远。我所有的编程都是在 LabVIEW、Mathematica 和 SQL 中完成的；我不知道 VBA 中发生了什么。这是我设法想出的：

```
Sub Test2()

' Declare the QueryTable object. I'm not actually sure why this line is here...
Dim qt As QueryTable

' Set up the SQL Statement
sqlstring = "SELECT `Substrate ID` FROM temp_table WHERE `id`=" & Range("A1").Value

' Set up the connection string, reference an ODBC connection
connstring = "ODBC;DSN=OWT_x64;"

' Now implement the connection, run the query, and add
' the results to the spreadsheet
With ActiveSheet.QueryTables.Add(Connection:=connstring, Destination:=Range("A22"), Sql:=sqlstring)
    .Refresh BackgroundQuery:=False
End With

End Sub 
```

上述代码存在三个主要问题：

1.  此代码在单元格 A22 中返回列 ID（“Substrate ID”），在单元格 A23 中返回 SQL 查询的结果。我只想要结果，我只想要它在单元格 A22 中。所有查询都被强制只返回 1 行和 1 列。
2.  我不知道如何使输出单元格 A22 成为脚本运行时处于活动状态的任何单元格。此外，输入单元格 A1 应该是直接位于活动单元格左侧（第 1 列）的单元格。
3.  我不知道如何把它变成一个 Excel 函数

    `=sql.request(connection_string,[output_ref],[driver_prompt],[query_text],[col_names_logical])`

    这是我的最终目标。这样，我可以将此代码提供给我公司的其他人，他们可以轻松使用它。

该连接是与 MySQL 5.6 数据库的 ODBC 连接。查询非常简单，大致如下：

```
SELECT column FROM table WHERE id=excel_cell_value 
```

正如您从我拥有的 VBA 代码中看到的那样。

目前，我在另一个 Excel 工作表中运行查询，该工作表返回“id”和“Substrate ID”列的所有行，然后运行`VLOOKUP`以查找感兴趣的项目。这开始成为一个问题，因为我们的数据库大小正在快速增长。

所以，我问：

1.  如何摆脱结果中的列 ID？
2.  我怎样才能把它变成一个自定义的 excel 函数？我查看了[Office.com](http://office.microsoft.com/en-us/excel-help/creating-custom-functions-HA001111701.aspx)，它似乎并不太难，但我首先需要一个工作脚本。
3.  -或者- 是否有人已经制作了他们愿意分享的自定义功能？

谢谢！

**编辑：由于蒂姆的链接，设法使某些东西起作用。**

```
Function SQLQuery(sqlString As String, connString As String, Optional TimeOut As Integer) As String

SQLQuery = Error 'Assume an error happened

Dim conn As ADODB.Connection
Dim record As ADODB.Recordset

Set conn = New ADODB.Connection
conn.ConnectionString = connString
conn.Open
Set record = New ADODB.Recordset

If TimeOut > 0 Then
    conn.CommandTimeout = TimeOut
End If

record.Open sqlString, conn

Dim cols As Long
Dim i As Long

cols = record.Fields.Count   'Count how many columns were returned
If Not record.EOF Then   'Put results into comma-delimited string
    record.MoveFirst
    s = ""
    If Not record.EOF Then
        For i = 0 To cols - 1
            s = s & IIf(i > 0, ",", "") & record(i)
        Next i
    End If
End If

SQLQuery = s

End Function 
```

但是，它很慢。关于如何加快速度的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:27:15.440

这是缓存连接的快速测试。在具有 100 次查找的测试工作表上，它将计算时间从大约 18 秒减少到大约 0.5 秒

请记住，尽管它会保持连接打开，直到您关闭 Excel（或 VB 环境被重置）。

如果你想在你的环境中测试差异，你可以注释掉标记的行（不要忘记在VBE中也按下“停止”按钮来清除静态变量）。

```
Function SQLQuery(sqlString As String, connString As String, _
                                  Optional TimeOut As Integer) As String

    Static cs As String
    Static conn As ADODB.Connection

    SQLQuery = Error 'Assume an error happened
    Dim s

    If conn Is Nothing Or connString <> cs Then
        Set conn = New ADODB.Connection
        conn.ConnectionString = connString
        conn.Open
        If TimeOut > 0 Then conn.CommandTimeout = TimeOut
        cs = connString '###comment this out to disable caching effect
    End If

    Dim record As New ADODB.Recordset

    record.Open sqlString, conn

    Dim cols As Long
    Dim i As Long

    cols = record.Fields.Count   'Count how many columns were returned
    If Not record.EOF Then   'Put results into comma-delimited string
        record.MoveFirst
        s = ""
        If Not record.EOF Then
            For i = 0 To cols - 1
                s = s & IIf(i > 0, ",", "") & record(i)
            Next i
        End If
    End If

    SQLQuery = s

End Function 
```

# android - 在 Android 中解析 RSS 提要描述

> ID：10441571
> 
> 赞同：1
> 
> 时间：2012-05-04T01:36:07.017
> 
> 标签：android, saxparser

我正在构建一个 android 应用程序，我正在尝试解析并且我正在尝试从 rss 提要中解析这个描述标签。

```
<description> 
<![CDATA[
<h1>What Do You Worship?</h1><p>This week <a href="https://twitter.com/#!/nathanielcoon">@Nathanielcoon</a> teaches on the life of Abraham.</a></p> <p><a href="http://www.esvbible.org/search/Genesis+12%3A7-8/">Genesis 12:7-8</a></p> <p><a href="http://www.esvbible.org/search/Genesis+13%3A2-4/">Genes
]]>
<![CDATA[
is 13:2-4</a></p> <p><a href="http://www.esvbible.org/search/Genesis+13%3A14-18/">Genesis 13:14-18</a></p> <p><a href="http://www.esvbible.org/search/Genesis+14%3A17-24/">Genesis 14:17-24</a></p> <p><a href="http://www.esvbible.org/search/Genesis+15%3A1-21/">Genesis 15:1-21</a></p> <p><a href="http://www.esvbible.org/search/Genesis+17%3A3/">Genesis 17:3</a></p> <p><a href="http://www.esvbible.org/search/Genesis+17%3A17/">Genesis 17:17</a></p> <p><a href="http://www.esvbible.org/search/Genesis+18%3A1-33/">Genesis 18:1-33</a></p> <p><a href="http://www.esvbible.org/search/Genesis+21%3A33/">Genesis 21:33</a></p> <p><a href="http://www.esvbible.org/search/Genesis+22%3A4-14/">Genesis 22:4-14</a></p> <p><a href="http://www.esvbible.org/search/Isaiah+44%3A1-20/">Isaiah 44:1-20</a></p> <p><a href="http://www.esvbible.org/search/Revelation+4%3A1-5%3A15/">Revelation 4:1-5:14</a></p> <p><a href="http://www.esvbible.org/search/Isaiah+45%3A20/">Isaiah 45:20</a></p> <p><a href="http://www.esvbible.org/search/Isaiah+45%3A20-22/">Isaiah 45:20-22</a></p> <p><a href="http://www.esvbible.org/search/Matthew+27%3A50-51/">Matthew 27:50-51</a></p> <p><a href="http://www.esvbible.org/search/Mark+15%3A37-38/">Mark 15:37-38</a></p> <p><a href="http://www.esvbible.org/search/Luke+23%3A45-46/">Luke 23:45-46</a></p> <p><a href="http://www.esvbible.org/search/Hebrews+10%3A19/">Hebrews 10:19</a></p> <p><a href="http://www.esvbible.org/search/Isaiah+6%3A1-13/">Isaiah 6:1-13</a></p> <p>For more resources or to contact us visit <a href="http://www.refugecf.com/resources/">RefugeCf.com</a></p> <p>Follow <a href="https://twitter.com/RefugeCF"> @RefugeCF</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> on Twitter.</p> 
```

但是，我只得到前两行。

```
<h1>What Do You Worship?</h1><p>This week <a href="https://twitter.com/#!/nathanielcoon">@Nathanielcoon</a> teaches on the life of Abraham.</a></p> 
```

是否有开关或我找不到的东西？我正在为我的 Android 应用程序使用 SAXParser。

还。我尝试解析/获取 itunes:summary 标签，但它根本不起作用。我想知道为什么。

谢谢。

编辑：这是我的 RSSHandler 代码，如果您需要更多病态发布它，但我认为这是我要修复它的地方，其余的只是将它发送到一个活动并查看它。（我在 webview 中查看它。）

```
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class RSSHandler extends DefaultHandler {

    final int state_unknown = 0;
    final int state_title = 1;
    final int state_description = 2;
    final int state_link = 3;
    final int state_pubdate = 4;
    final int state_guid = 5;
    final int state_subtitle = 6;
    int currentState = state_unknown;

    RSSFeed feed;
    RSSItem item;

    boolean itemFound = false;

    RSSHandler(){
    }

    RSSFeed getFeed(){
        return feed;
    }

    @Override
    public void startDocument() throws SAXException {
        // TODO Auto-generated method stub
        feed = new RSSFeed();
        item = new RSSItem();

    }

    @Override
    public void endDocument() throws SAXException {
        // TODO Auto-generated method stub
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        // TODO Auto-generated method stub

        if (localName.equalsIgnoreCase("item")){
            itemFound = true;
            item = new RSSItem();
            currentState = state_unknown;
        }
        else if (localName.equalsIgnoreCase("title")){
            currentState = state_title;
        }
        else if (localName.equalsIgnoreCase("subtitle")){
            currentState = state_subtitle;
        }
        else if (localName.equalsIgnoreCase("description")){
            currentState = state_description;
        }
        else if (localName.equalsIgnoreCase("link")){
            currentState = state_link;
        }
        else if (localName.equalsIgnoreCase("pubdate")){
            currentState = state_pubdate;
        }
        else if (localName.equalsIgnoreCase("guid")){
            currentState = state_guid;
        }
        else{
            currentState = state_unknown;
        }

    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        // TODO Auto-generated method stub
        if (localName.equalsIgnoreCase("item")){
            feed.addItem(item);
        }
    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        // TODO Auto-generated method stub

        String strCharacters = new String(ch,start,length);

        if (itemFound==true){
        // "item" tag found, it's item's parameter
            switch(currentState){
            case state_title:
                item.setTitle(strCharacters);
                break;
            case state_subtitle:
                item.setsubTitle(strCharacters);
                break;
            case state_description:
                item.setDescription(strCharacters);
                break;
            case state_link:
                item.setLink(strCharacters);
                break;
            case state_pubdate:
                item.setPubdate(strCharacters);
                break;  
            case state_guid:
                item.setGuid(strCharacters);
                break;  
            default:
                break;
            }
        }
        else{
        // not "item" tag found, it's feed's parameter
            switch(currentState){
            case state_title:
                feed.setTitle(strCharacters);
                break;
            case state_subtitle:
                feed.setsubTitle(strCharacters);
                break;
            case state_description:
                feed.setDescription(strCharacters);
                break;
            case state_link:
                feed.setLink(strCharacters);
                break;
            case state_pubdate:
                feed.setPubdate(strCharacters);
                break;  
            case state_guid:
                feed.setGuid(strCharacters);
                break;  
            default:
                break;
            }
        }

        currentState = state_unknown;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:03:54.373

我认为您在 CDATA 中缺少 [ 和 ] 吗？

[http://java.sun.com/webservices/reference/tutorials/jaxp/html/sax.html](http://java.sun.com/webservices/reference/tutorials/jaxp/html/sax.html)

SAX Parser 可能有点难以理解，我会在这些方法中添加一个断点，看看它是否在做你期望的事情。

# c# - 在我创建的可执行文件中打开图像文件

> ID：10441574
> 
> 赞同：0
> 
> 时间：2012-05-04T01:36:33.453
> 
> 标签：c#, winforms, visual-studio, visual-studio-2010

我刚刚在 MSDN 站点上完成了本教程 -[创建图片查看器](http://msdn.microsoft.com/en-us/library/dd492135.aspx)，根据教程规范，它一切正常（尽管我确实删除了不必要的按钮）。

目前，我可以从程序中打开一个图像文件，这很好。但是，我希望能够从 Windows 资源管理器打开图像文件，并在我的图像查看器中打开它。（使用打开方式...上下文菜单）。

我确实尝试通过 Open With.. 菜单打开它，但是当程序加载时，图像没有显示出来。该程序刚刚像往常一样启动。

我需要输入什么代码，这样我就可以通过图像文件打开程序（如果有意义的话）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:41:42.560

您可以使用：

```
Environment.CommandLine 
```

它将包含格式为“...”“...”的内容，首先是您的应用程序的路径，在您的情况下 - 其次是打开文件的路径。

然后，您可以拆分它以获得第二个“...”并像在应用程序中通常那样加载文件。

您还可以检查应用程序的参数是否包含打开文件的路径。我不确定，但它应该很容易检查：有一个打印参数的 mbox，然后尝试用你的程序打开一个文件，看看会出现什么。使用 args[0] 或 args[1] 或任何可能比拆分 Environment.CommandLine 更容易...

# c - 在库中隐藏库

> ID：10441579
> 
> 赞同：2
> 
> 时间：2012-05-04T01:37:16.460
> 
> 标签：c, interface, linker

这是情况。我有一个旧的遗留库，它在很多地方都被破坏了，但是内置了很多重要的代码（我们没有源代码，只有 lib + 标头）。该库公开的功能必须以“特殊”方式处理，一些后期和预处理或事情变糟。我在想的是创建另一个使用这个旧库的库，并公开一组“安全”的新函数。

我很快尝试创建这个新库，并将其链接到主程序中。但是，它仍然链接到旧库中通过新库公开的符号。

一件事显然是要求人们不要使用这些功能，但如果我可以通过某种方式隐藏它们，只暴露安全功能，那就更好了。

可能吗？备择方案？

（它在 ARM 微控制器上运行。文件格式是 ELF，操作系统是 Keil 的 RTOS，使用他们的编译器）

**[更新]**

这就是我最终要做的事情：我在新库中创建了虚拟函数，它们使用与旧库中相同的原型。将新库链接到主程序，如果其他开发人员尝试使用旧库中的“坏”函数，它将使用“符号 abcd 多次定义（由 old_lib.o 和 new_lib.o）”破坏构建。对于政府工作来说已经足够了...

**[update2]** 我实际上发现我可以在通过 IDE =P 链接库的组件时手动隐藏它们，这是更好的解决方案。很抱歉在这里占用空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:34:00.567

如果您使用的是 GNU binutils，`objcopy`可以在所有符号前面加上您选择的字符串。只需使用`objcopy --prefix-symbols=brokenlib_ old.so new.so`（注意：省略`new.so`会导致`old.so`被覆盖！）

现在你`brokenlib_foo()`用来调用原始版本的`foo()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T01:41:35.630

如果您使用`libtool`编译和链接库而不是`ld`，您可以提供`-export-symbols`来控制输出符号，但这只有在您的旧库可以静态链接时才有效。如果它是动态链接的（`.so`、`.dylib`或`.dll`），这将是不可能的。

# playframework - Play 应用程序测试中的 WS.URL

> ID：10441590
> 
> 赞同：1
> 
> 时间：2012-05-04T01:38:30.373
> 
> 标签：playframework

我在一个干净的游戏项目中创建了一个虚拟 POST 端点。

在我的应用程序测试中，如果我使用 POST("/")，它可以工作。如果我使用

```
 WSRequest postRequest = WS.url("http://10.0.1.105:9000/");
    response = postRequest.post(); 
```

POST 总是在 60 秒内超时……有人遇到类似问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:07:13.130

在开发模式下，您的线程池为 1。您的测试正在使用此线程，因此池中没有更多线程可以为 WS 调用提供服务。

将此添加到您的 application.conf 以在测试模式下在池中添加另一个线程

```
%test.play.pool=2 
```

# function - Matlab 基本函数

> ID：10441592
> 
> 赞同：-2
> 
> 时间：2012-05-04T01:38:32.523
> 
> 标签：function, matlab

我正在尝试阅读一些 matlab 代码，但我是新手。我如何弄清楚输入参数是什么？

```
 function [shortly, longly] = lyapunov(signal,timestep,FreqSamp,segmentapproach, duratsegmen, dodivergence)

//lots of code under here but I couldn't find out where signal, timestep, etc come from. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:41:42.897

阅读 lyapunov 的帮助。它会告诉你这些信息。

# binding - WinRT 自定义控件依赖属性设置/绑定

> ID：10441600
> 
> 赞同：5
> 
> 时间：2012-05-04T01:39:34.357
> 
> 标签：binding, custom-controls, dependency-properties, windows-runtime, winrt-xaml

我正在尝试为 WinRT/Metro 应用程序开发自定义控件。

它有一个依赖属性，我希望能够在自定义控件中设置它的值。但是，使用 SetValue 会破坏控件使用者可能已创建的任何绑定。

我发现的所有解决方案（例如 SetCurrentValue）似乎都不适用于 WinRT/Metro。有针对这个的解决方法吗？

这听起来很简单，而且 - 老实说！- 我试图在这里和其他地方找到解决方案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:30:10.437

您可以在 PropertyMetadata 中设置默认值（WPF 博士的[代码片段](http://drwpf.com/blog/2010/04/30/updated-code-snippets/)来拯救！）。

```
#region IsAvailable
private static bool DefaultIsAvailable = false;

/// <summary>
/// IsAvailable Dependency Property
/// </summary>
public static readonly DependencyProperty IsAvailableProperty =
    DependencyProperty.Register(
        "IsAvailable",
        typeof(bool),
        typeof(CustomControl1),
        new PropertyMetadata(DefaultIsAvailable, OnIsAvailableChanged));

/// <summary>
/// Gets or sets the IsAvailable property. This dependency property 
/// indicates ....
/// </summary>
public bool IsAvailable
{
    get { return (bool)GetValue(IsAvailableProperty); }
    set { SetValue(IsAvailableProperty, value); }
}

/// <summary>
/// Handles changes to the IsAvailable property.
/// </summary>
/// <param name="d">
/// The <see cref="DependencyObject"/> on which
/// the property has changed value.
/// </param>
/// <param name="e">
/// Event data that is issued by any event that
/// tracks changes to the effective value of this property.
/// </param>
private static void OnIsAvailableChanged(
    DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    var target = (CustomControl1)d;
    bool oldIsAvailable = (bool)e.OldValue;
    bool newIsAvailable = target.IsAvailable;
    target.OnIsAvailableChanged(oldIsAvailable, newIsAvailable);
}

/// <summary>
/// Provides derived classes an opportunity to handle changes
/// to the IsAvailable property.
/// </summary>
/// <param name="oldIsAvailable">The old IsAvailable value</param>
/// <param name="newIsAvailable">The new IsAvailable value</param>
protected virtual void OnIsAvailableChanged(
    bool oldIsAvailable, bool newIsAvailable)
{
}
#endregion 
```

编辑*

如果您想更改值 - 您可以，但如果您使用基本绑定`OneWay`- 即 - 它从绑定源获取值并将其设置为依赖属性 - 绑定将停止工作，因为源值和目标值获胜不再同步。

如果您设置`Mode="TwoWay"`- 当绑定目标（您的控件）修改依赖属性时，绑定源将被更新，因此绑定将保持有效并继续双向工作。

# c# - gtk# ScrolledWindow - 滚动到顶部

> ID：10441602
> 
> 赞同：1
> 
> 时间：2012-05-04T01:39:58.927
> 
> 标签：c#, gtk, gtk#

我有 ScrolledWindow（里面是 TreeView），我需要滚动到顶部。你有什么想法吗？每个答案将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T02:52:40.250

在 GTk+ 中，您基本上可以获得滚动窗口的垂直调整并使用它来设置滚动位置。我不知道 gtk# 的详细信息，但这是 c++ (gtkmm) 中的方法：

```
 scrollWin.get_vadjustment()->set_value(0); 
```

Gtk# 应该类似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-13T13:36:39.123

在 GTK# 中，用于名为`scrollWin`type的变量`GtkScrolledWindow`

```
scrollWin.Vadjustment.Value = 0; 
```

# android - 为 QA 工作备份 Android 模拟器

> ID：10441603
> 
> 赞同：3
> 
> 时间：2012-05-04T01:40:05.953
> 
> 标签：android, qa

我想脱掉我的程序员帽子，戴上我的 QA 帽子。而且由于我准备废弃旧的开发系统，并使用更新的软件进行重建，如果在学习过程中需要，我可以容忍旧系统的崩溃和烧毁。

QA 最基本的部分之一是拍摄当前开发系统（Android 模拟器）的快照并将其保存为基线。根据基线运行您当前（旧）系统，输入一些事务并查看结果，然后通过恢复基线将您的测试系统返回到起点，针对同一基线运行新软件和相同事务，以及确保你的结果是一样的。如果它们不一样，那么您要么添加了一个错误，要么添加了一个新功能。如何拍摄 Android 模拟器的快照，将其保存为基线，使用生产软件在模拟器上运行一些事务，然后将模拟器恢复到拍摄快照时的状态并使用新的运行相同的事务开发软件？- 在这一点上，链接到文档可能是最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:25:35.897

我的模拟器使用 Android X86。这意味着它在虚拟机上运行，​​这允许我拍摄快照。

为了适合您的上下文，可以将最后已知的配置保存在快照中，即使您将来没有删除它，也可以引用它。

每次测试后，您可以轻松恢复到此快照以获取最后已知的配置。

如果您可以花一些时间进行设置，这可能会满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:41:05.767

看看模拟器文档，相信你会发现它现在支持快照了。如果它没有给您很大的灵活性，您可能必须弄清楚它将快照文件放在/预期的位置，并在运行之前/之后将其从/复制到您的存档中。

我要说的是，您可以作为另一种选择构建具有导入/导出功能的程序版本。您可以安装它以导入准备好的数据库，然后安装您打算发布的版本，然后重新安装检测版本以取回数据库以进行验证。

然后我记得你在谈论 adb 以 root 身份运行的模拟器，所以你可以直接将数据库文件推送/拉取到应用程序的私有存储区域 - 尽管你可能想确保应用程序在你这样做时实际上没有运行那。与整个设备快照相比，这可能会为您提供更多的细粒度测试灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T03:14:26.707

安装原始应用程序并运行测试。然后，将**模拟器**恢复到原始状态，只需使用命令行选项

```
 -wipe-data        reset the user data image (copy it from initdata) 
```

然后你必须安装新的应用程序并再次运行测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T13:48:35.770

[模拟器快照文档](http://tools.android.com/recent/emulatorsnapshots)希望这是您想要的。

# c# - 窗口最大化后调用的事件

> ID：10441604
> 
> 赞同：5
> 
> 时间：2012-05-04T01:40:26.047
> 
> 标签：c#, winforms, event-handling

我正在从窗口最大化或最小化**后调用的表单中寻找一个事件。**

据我所知，有诸如 SizeChanged 或 WndProc 之类的事件可以处理最大化的窗口，但是在用户尝试最大化窗口后立即调用它，并且在窗口完全最大化后不会调用它。

我正在寻找像 ResizeEnd 这样的事件，但也许这个事件被称为 MaximizedEnd 或 MinimizedEnd

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T02:24:11.523

我认为这很简单：

```
protected override void OnSizeChanged(EventArgs e) {
  if (this.WindowState == FormWindowState.Maximized) {
    MessageBox.Show("Max!");
  }
  base.OnSizeChanged(e);
} 
```

在调整窗口大小*后*不确定您的意思。这也可能有效：

```
protected override void OnSizeChanged(EventArgs e) {
  if (this.WindowState == FormWindowState.Maximized) {
    this.BeginInvoke(new MethodInvoker(delegate { MessageBox.Show("Maxed"); }));
  }
  base.OnSizeChanged(e);
} 
```

`MessageBox.Show(...)`用您的代码替换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-22T11:25:40.203

使用 resize、resizeBegin 和 resizeEnd 事件有利于在 winform 调整大小后做一些事情。

```
private bool resize_flag = true;
    private void Form1_Resize(object sender, EventArgs e)
    {
        if (!resize_flag) return;
        //your code here
        resize_flag = true;
    }

    private void Form1_ResizeBegin(object sender, EventArgs e)
    {
        resize_flag = false;
    }

    private void Form1_ResizeEnd(object sender, EventArgs e)
    {
        //your code here
        resize_flag = true;
    } 
```

这段代码很简单，但它有效！resizeEnd 用于通过鼠标拖动调整大小，resize 用于更改窗口状态，例如最大化或恢复。我认为覆盖 WndProc() 很好，但是在调整 winform 大小之前它被解雇了，所以......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T02:02:07.647

这就是 Gabriel 的解决方案的详细信息。我认为 WindoStateChanged 也没有事件。

我刚刚测试了这个解决方案，当您单击最大化按钮时它正在工作。不过，它似乎被解雇了 3 次。我可能会做一些调试，并弄清楚你想要拦截的 m.Msg 到底是什么，以检查状态是否已经改变。我在这里找到了一些 WM_ 消息的快速参考[http://www.autohotkey.com/docs/misc/SendMessageList.htm](http://www.autohotkey.com/docs/misc/SendMessageList.htm)。

```
 protected override void WndProc(ref Message m)
    {
        FormWindowState previousWindowState = this.WindowState;

        base.WndProc(ref m);

        FormWindowState currentWindowState = this.WindowState;

        if (previousWindowState != currentWindowState && currentWindowState == FormWindowState.Maximized)
        {
            // TODO: Do something the window has been maximized

        }
    } 
```

如前所述，在我进行测试时，上述代码至少被触发了 3 次。下面的代码只被触发一次。它有点冗长，但也可能更直观，更全面地解决了您关于如何触发事件的问题。感谢 Yore 对您提出的这个想法的问题的评论。

```
public Form1()
{
    InitializeComponent();

    this.SizeChanged +=new EventHandler(Form1_SizeChanged);
    FormMaximized += new EventHandler(Form1_FormMaximized);

    _CurrentWindowState = this.WindowState;
    if (_CurrentWindowState == FormWindowState.Maximized)
    {
        FireFormMaximized();
    }
}

public event EventHandler FormMaximized;
private void FireFormMaximized()
{
    if (FormMaximized != null)
    {
        FormMaximized(this, EventArgs.Empty);
    }
}

private FormWindowState _CurrentWindowState;
private void Form1_SizeChanged(object sender, EventArgs e)
{
    if (this.WindowState == FormWindowState.Maximized && _CurrentWindowState != FormWindowState.Maximized)
    {
        FireFormMaximized();
    }
    _CurrentWindowState = this.WindowState;
}

void Form1_FormMaximized(object sender, EventArgs e)
{
    //TODO Put you're code here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-22T11:56:38.580

我认为我们应该覆盖 wndProc 并触发 WM_SYSCOMMAND 事件。

```
protected override void WndProc(ref Message m)
    {
        if ((UInt32)m.Msg == Constant.WM_SYSCOMMAND)
        {
            switch ((UInt32)m.WParam)
            {
                case Constant.SC_MAXIMIZE:

                case Constant.SC_RESTORE:

                default:
                    break;
            }
        }
        base.WndProc(ref m);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T01:45:08.027

这可能不是您正在寻找的答案，但在窗口最大化后调用的 Windows 窗体没有定义的事件。如果有任何事件要查找，您必须自己进入消息循环。一般来说，如果我想知道用户是否最大化了窗口但不关心大小被改变，我会保存它`windowstate`，如果它改变了，`SizedChanged`我可以说窗口被最大化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-19T12:56:36.713

我知道这是一个旧线程，但也许有人在寻找答案时会发现这个。

您可以创建自己的自定义事件来完全按照您的意愿行事。

## 声明事件：

```
Public Event Maximized(sender As Object, e As EventArgs) 
```

## 引发自定义事件：

```
Private Sub frmMain_ResizeEnd(sender As Object, e As EventArgs) Handles Me.ResizeEnd
    If Me.WindowState = FormWindowState.Maximized Then RaiseEvent Maximized(sender, Nothing)
End Sub 
```

## 处理您的自定义事件：

```
Private Sub frmMain_Maximized(sender As Object, e As EventArgs) Handles Me.Maximized

End Sub 
```

或者

```
Private Sub frmMain_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    AddHandler Me.Maximized, AddressOf MaximizedEventMethod
End Sub

Private Sub MaximizedEventMethod(sender As Object, e As EventArgs)
    'add your code here
End Sub 
```

# cocos2d-iphone - 在Cocos2d中，如果ccp是做CGPoint，有没有宏或者函数可以做CGSize？

> ID：10441606
> 
> 赞同：1
> 
> 时间：2012-05-04T01:40:38.483
> 
> 标签：cocos2d-iphone

在 Cocos2d for iPhone/iPad 中，如果`ccp`要制作 a `CGPoint`，是否有制作 a 的宏或函数`CGSize`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:31:07.080

干得好

```
#define ccs(__W__, __H__) CGSizeMake(__W__, __H__) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:53:06.663

不，但您可以轻松地制作自己的宏来执行此操作。实际上，如果您查看创建的 cocos 代码，`ccp`您会发现它确实非常基础。打开 ccmacros 文件并查看它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T02:24:30.630

我认为这有效：

```
CGSizeMake 
```

# asp.net-mvc-3 - 使用 MVSiteMapProvider 的 FluentSecurity

> ID：10441610
> 
> 赞同：2
> 
> 时间：2012-05-04T01:41:34.130
> 
> 标签：asp.net-mvc-3, mvcsitemapprovider, fluent-security

我希望将它与 MvcSiteMapProvider 一起使用来隐藏/显示菜单项，而不是在我的 mvc.sitemap 文件中加倍和定义角色。

我已经浏览了 2.0alpha1 的源代码，但似乎无法弄清楚如何执行以下操作：

```
bool hasAccess = SecurityConfiguration.Current.HasAccess(controller, action, area) 
```

谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T07:32:07.380

在实际的 github 项目页面上，我能够在[kristoffer-ahl的帮助下解决这个问题](https://stackoverflow.com/users/44085/kristoffer-ahl)

这是解决方案

```
public static bool ActionIsAllowedForUser(string area, string controllerName, string actionName)
{
    var configuration = SecurityConfiguration.Current;

    string fullControllerName = string.Format("Web.Controllers.{0}Controller", controllerName);
    if (!string.IsNullOrEmpty(area))
    {
        fullControllerName = string.Format("Web.Areas.{0}.Controllers.{1}Controller", area, controllerName);
    }

    var policyContainer = configuration.PolicyContainers.GetContainerFor(fullControllerName, actionName);
    if (policyContainer != null)
    {
        var context = SecurityContext.Current;
        var results = policyContainer.EnforcePolicies(context);
        return results.All(x => x.ViolationOccured == false);
    }
    return true;
} 
```

# r - R中的quantstrat：设置基于日期的退出信号

> ID：10441614
> 
> 赞同：8
> 
> 时间：2012-05-04T01:41:55.207
> 
> 标签：r, xts, quantmod, quantitative-finance, quantstrat

很多 quantstrat 和随附的示例似乎都是围绕通过某种技术指标进入和退出交易而设置的。

但是，假设您有一个任意指标用于触发进入交易，但是您想在第二天的开盘或收盘时平仓。你将如何最好地实现这个例子？

让我们看下面的例子：

*   两种工具：XYZ 和 ABC
*   入场信号：可以是任何东西——我们只想在我们的“信号”评估为真时进入交易。对于此示例，假设任何时候 XYZ/ABC 的比率在 T+0 从开盘到收盘的任一方向变化超过 1%
*   退出信号：市场事件，例如开盘或收盘。比方说，在这个例子中，我们想在第二天的开盘时平仓我们上面设置的交易。

例如，写这样的东西使用`blotter`会相对容易：

`ratio`假设使用列调用的 xts 对象：

1.  ABC OHLC,
2.  XYZ OHLC,
3.  以 OHLC 表示的 ABC/XYZ 之比
4.  货币 OHLC “CCY”（这是一个交叉货币对）
5.  我们的指标 (OpCl(ABC/XYZ)),
6.  “发出信号？” 如果指标 > 1%，则为 1，否则为 0
7.  “信号dn？” 如果指标 < -1%，则为 1，否则为 0

我们的代码将是：

```
for( i in 1:nrow(ratio) ) {

  ## Define the dates:

  CurrentDate <- index(ratio[i,])

  NextDate <- index(ratio[i+1,])

  ## Define the prices:

  XYZClosePrice <- as.numeric(ratio$XYZ.Close[i,])
  ABCClosePrice <- as.numeric(ratio$ABC.Close[i,])

  XYZOpenPrice <- as.numeric(ratio$XYZ.Open[i+1,])
  ABCOpenPrice <- as.numeric(ratio$ABC.Open[i+1,])

  CCYClosePrice <- as.numeric(ratio$CCY.Close[i,])
  CCYOpenPrice <- as.numeric(ratio$CCY.Open[i+1,])

  ## Define the spread:      

  SpreadOp <- ABCOpenPrice/XYZOpenPrice
  SpreadCl <- ABCClosePrice/XYZClosePrice

  ## Define the hedge ratio (let's say XYZ has a multiplier of 25 and ABC of 50)

  HedgeOp <- 25 * ((CCYOpenPrice/50)/SpreadOp)
  HedgeCl <- 25 * ((CCYClosePrice/50)/SpreadCl)

  # We want to trade 20 lots of XYZ each time with the corresponding hedge amount of   ABC
  Posn <- round(20 * HedgeCl,0)

  ## Add the trading rules (if move > 1% / else move <-1%):     

  # >= +1 % move

  if(ratio[i,'signal up?']==1){

    ## enter position on today's close

    addTxn(strat.name, Symbol='XYZ', TxnDate=CurrentDate,
           TxnPrice=XYZClosePrice, TxnQty = 20 , TxnFees=0)
    addTxn(strat.name, Symbol='ABC', TxnDate=CurrentDate,
           TxnPrice=ABCClosePrice, TxnQty = - Posn , TxnFees=0)

    ## exit position tomorrow's open

    addTxn(strat.name, Symbol='XYZ', TxnDate=NextDate,
           TxnPrice=XYZOpenPrice, TxnQty = - 20, TxnFeABC=0)
    addTxn(strat.name, Symbol='ABC', TxnDate=NextDate,
           TxnPrice=ABCOpenPrice, TxnQty = Posn , TxnFeABC=0)}

  else {

    # <= -1% move
    if(ratio[i,'signal dn?']==1){

      ## enter position on today's close

      addTxn(strat.name, Symbol='XYZ', TxnDate=CurrentDate,
             TxnPrice=XYZClosePrice, TxnQty = -20 , TxnFees=0)
      addTxn(strat.name, Symbol='ABC', TxnDate=CurrentDate,
             TxnPrice=ABCClosePrice, TxnQty =  Posn , TxnFees=0)

      # exit position on tomorrow's open

      addTxn(strat.name, Symbol='XYZ', TxnDate=NextDate,
             TxnPrice=XYZOpenPrice, TxnQty =  20, TxnFees=0)
      addTxn(strat.name, Symbol='ABC', TxnDate=NextDate,
             TxnPrice=ABCOpenPrice, TxnQty =  - Posn , TxnFees=0)}

  } 
```

这工作得很好。

但是，假设我们想在其中实现它`quantstrat`——它会变得有点棘手。假设所有投资组合、账户、指标和信号等都设置正确，然后我将添加这些交易规则以进入交易：

```
> strat <- add.rule(strat, name='ruleSignal',
+                   arguments = list(sigcol="Cl.gt.1pct", sigval=TRUE, orderqty=20,
+                                    ordertype='market', orderside='long', pricemethod='market'),
+                   type='enter', path.dep=TRUE,symbol='XYZ')

> strat <- add.rule(strat, name='ruleSignal',
+                   arguments = list(sigcol="Cl.lt.1pct", sigval=TRUE, orderqty=Posn,
+                                    ordertype='market', orderside='short', pricemethod='market'),
+                   type='enter', path.dep=TRUE,symbol='ABC') 
```

我的问题是：***我如何输入接下来`ruleSignal`的两个以在第二天的开盘时简单地平仓？***

我知道它可能与 in 的`timestamp`论点有关，`ruleSignal`但我不知道如何实现它。

这里可能有一个非常简单的解决方案，但我陷入了一个试图解决这个问题的循环中。

与以往一样，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T13:15:00.870

如手册中所述，quantstrat 是一个*基于信号的*框架。它并不是为*基于过滤器的*交易而设计的。

您可以通过在退出规则中使用*延迟*参数来做您想做的事情。将延迟设置为一天，*prefer*参数设置为首选不同的价格列。

我不会为你写它，但这是足够的信息来解决你的问题。

# git - EC2/AWS、詹金斯、Git、SSH

> ID：10441616
> 
> 赞同：5
> 
> 时间：2012-05-04T01:42:24.260
> 
> 标签：git, ssh, github, jenkins, jenkins-plugins

[Update2] 那么当我从 CLI 运行 git 时它提示我输入密码可以吗？我可以使用 ssh 私钥的密码访问 github 服务器，但在 Jenkins 中从未提示我这样做或被要求提供它。[/更新2]

[更新] 是的。我在 EC2 上的 ubuntu 实例上运行它。我在 /var/lib/jenkins/.ssh 中生成了 ssh 密钥，这是 Jenkins 创建的用户。我在 Jenkins 中设置了安全选项以使用 Unix 用户/组。[/更新]

我试图让詹金斯从 git (github) 中拉出来。我收到以下错误：

```
hudson.plugins.git.GitException: Could not clone [my personal repo]
    at hudson.plugins.git.GitAPI.clone(GitAPI.java:245)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1121)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1063)
    at hudson.FilePath.act(FilePath.java:832)
    at hudson.FilePath.act(FilePath.java:814)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1063)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1218)
    at hudson.model.AbstractBuild$AbstractRunner.checkout(AbstractBuild.java:581)
    at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:470)
    at hudson.model.Run.run(Run.java:1434)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:239)
Caused by: hudson.plugins.git.GitException: Command "git clone --progress -o origin git@github.com:bobbylo/Verbify.git /var/lib/jenkins/.jenkins/jobs/build_dev/workspace" returned status code 128:
stdout: Initialized empty Git repository in /var/lib/jenkins/.jenkins/jobs/build_dev/workspace/.git/

stderr: Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

我已经完成了 Github ssh 教程。我在 EC2 实例上生成了一个私钥。将其放入用户 jenkins 的 .ssh 目录中。将公钥放在 Github 上（尝试部署密钥 + 普通 SSH 密钥）。我已经验证我可以进行 git over-the-wire 操作（拉取、克隆等），并且它可以通过 CLI 与用户一起工作。我已经为用户正确设置了 unix 用户/组权限（事实上，当我更改它时，我在 Jenkins 的控制台日志中看到错误日志更改）。当我尝试使用 Jenkins git 插件或执行 Jenkins shell 命令时，出现上述错误。

我已经阅读了 ssh-agent 和 ssh-add 以及如何将其与 shell 启动脚本相关联，这样您就无需为每个命令输入密码——我不确定这是否与此相关。

否则我不确定我还能尝试什么。任何提示都会有所帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T20:25:19.393

弄清楚了：

-事实证明，如果您不是将它作为守护程序运行，它会使用您运行它的 shell 环境。- 事实证明，任何需要用户提示（如 ssh 释义）的 cmd 都被 Jenkins 视为错误。

目前的解决方案是：

- 在我通过 ssh-add 将 github pub 密钥添加到 ssh-agent 之后运行 Jenkins，这样它就不会提示输入释义。

如果我想将 Jenkins 作为守护进程运行，我想在运行它之前必须正确设置 ssh-agent（我不认为它使用当前的 shell 环境？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:56:02.467

您确定 Jenkins 以您期望的用户身份运行吗？如果您将 Jenkins 作为服务运行，它通常以用户“本地系统帐户”启动。

这可能会有所帮助：[https](https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin) ://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin 。请参阅“配置 Jenkins 以使用与 msysgit Windows 安装程序捆绑在一起的 OpenSSH”部分。

另外，这个帮助了我：

[http://computercamp.cdwilson.us/jenkins-git-clone-via-ssh-on-windows-7-x64](http://computercamp.cdwilson.us/jenkins-git-clone-via-ssh-on-windows-7-x64)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:32:34.633

遇到了类似的问题，我所要做的就是确保在您以用户“jenkins”身份登录后生成部署密钥，该用户是作为 jenkins 安装的一部分创建的，然后在复制公钥后重新启动 jenkins 服务器在 github 中部署密钥。

# ios - CTFrame 的第一行不遵守 kCTParagraphStyleSpecifierParagraphSpacing

> ID：10441621
> 
> 赞同：3
> 
> 时间：2012-05-04T01:43:18.933
> 
> 标签：ios, core-text

我们有一个应用程序，它严重依赖 kCTParagraphStyleSpecifierParagraphSpacing 来管理段落之间的间距，它可以在整个文本中变化。为了提高编辑性能，我们将主核心文本视图实现为 CTFrames 的集合，这些 CTFrames 在适当的时候被绘制/重绘。

我们发现，如果一个段落使用非零 kCTParagraphStyleSpecifierParagraphSpacing 作为其 CTParagraphStyleSettings 属性之一，如果该段落是 CTFrame 中的第一项，则该段落间距将被忽略，即使在提供给框架设定器。

我想如果您正在绘制一个打算打印的 PDF，这种行为是有意义的，但是鉴于我们试图将我们的文本呈现为一个单一的、可滚动的和连续的文本块，这给我们带来了问题。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T02:02:15.067

如果你不能用 a 改变行为`CTParagraphStyleSetting`，我认为这是一个错误，或者 Apple 认为这种行为是有意义的。无论如何，要获得您想要的结果，我认为最好的方法是自己使用`CTTypesetter`和处理*lineSpacing*和*paragraphSpacing*。我认为这个实现有很多错误，因为我不久前`CTFrame`遇到了[另一个。](https://stackoverflow.com/questions/9858879/space-between-the-last-2-lines-of-a-paragraph-is-larger)

为了滚动您自己的解决方案，您将需要`CTTypesetterSuggestClusterBreak`或`CTTypesetterSuggestLineBreak`计算每行的字符数。行高可以是字体大小，在绘制每条线时添加 lineSpacing。当您遇到换行符（\n）时，请在绘制下一行之前添加段落间距。

有了`CTTypesetter`，事情就更可控了，当然也增加了一些困难，因为你要处理换行和缩进。但这是我能想到的获得更理想结果的唯一方法。

祝你好运。

# spring-mvc - 为内部依赖于 ContextLoader.getCurrentWebApplicationContext() 的 Spring MVC 应用程序编写 Junit 测试

> ID：10441622
> 
> 赞同：9
> 
> 时间：2012-05-04T01:43:21.043
> 
> 标签：spring-mvc

我正在尝试为我们的 spring mvc 应用程序中的控制器编写集成测试。控制器调用一个服务类，该服务类又调用一个 dao 从存储库中读取/写入数据。DAO 需要查找一些配置。配置 bean 定义在 WEB-INF/applicationContext.xml 中。

我正在使用这样的东西：

配置 config =(Configuration)ContextLoader.getCurrentWebApplicationContext().getBean("config");
私有字符串命名空间 = config.getProperty("someproperty");

属性存储在 zookeeper 中，所以我没有使用 spring 的属性管理工件。

问题是在运行 JUnit 测试时 ContextLoader.getCurrentWebApplicationContext() 总是返回 null。

到目前为止，我已经看过以下方法：
1\. Ted Young 的方法（只是谷歌搜索 spring mvc 集成测试 ted young）
2\. [https://github.com/SpringSource/spring-test-mvc](https://github.com/SpringSource/spring-test-mvc)
3\. 这个站点.. questions/8464919/unit-testing-a-servlet-that-depends-on-springs-webapplicationcontextutils-getre
4\. 使用 Selenium/JWebunit
5\. [http://confluence.highsource.org/display/Hifaces20/Hifaces20+Testing+package+ -+测试%2C+跟踪+和+调试+web+应用程序+with+Jetty](http://confluence.highsource.org/display/Hifaces20/Hifaces20+Testing+package+-+testing%2C+tracing+and+debugging+web+applications+with+Jetty)

1 没有解决这个问题。WebApplicationContext 保持为空
2 表示对 WebApplicationContext 的支持将在 spring 3.2
3 中可用。我不明白这一点。我从哪里获得 testApplicationContext 和 getServletContext()？
4\. 我不想走这条路，因为这完全是黑盒测试。
5\. 我目前正在看 5\. 但这需要启动一个 servlet 容器。没有其他选择吗？

我将不胜感激您能提供的任何帮助。

感谢 PixalSoft

@Ted Young SO 不允许我完成我所说的话。使用 loader=MockWebApplicationContextLoader，它不应该可以作为默认上下文加载器使用，就像 Spring ContextLoader 在 webapp 由 servletcontainer 初始化时的行为一样吗？有吗？我需要做一些特别的事情来处理 MockWebApplicationContextLoader？注入配置对象适用于单例对象。但不可能都是单例的。在每个构造函数中传递一个配置对象听起来太乏味了。现在，我创建了一个具有静态配置对象的类，通过 setter 方法自动装配。我会看看 ApplicationContextAware.Many thx

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-18T04:43:37.070

您必须手动将 WebApplication 上下文添加到 ContextLoderListner。这将起作用。

```
@ContextConfiguration(locations = "classpath:module-test-beans.xml")
@WebAppConfiguration
public class SampleTest extends AbstractTestNGSpringContextTests {

    @Autowired
    private WebApplicationContext wac;

    @BeforeClass
    public void setUp() throws ServletException {
        MockServletContext sc = new MockServletContext("");
        ServletContextListener listener = new ContextLoaderListener(wac);
        ServletContextEvent event = new ServletContextEvent(sc);
        listener.contextInitialized(event);
    }

    @Test
    public void testMe() {
        Assert.assertFalse(ContextLoader.getCurrentWebApplicationContext() == null);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T11:00:03.843

在 junit 测试的开头添加以下代码：

```
MockServletContext sc = new MockServletContext("");
sc.addInitParameter(ContextLoader.CONFIG_LOCATION_PARAM,
        "/applicationContext-test.xml"); // <== Customize with your paths
ServletContextListener listener = new ContextLoaderListener();
ServletContextEvent event = new ServletContextEvent(sc);
listener.contextInitialized(event); 
```

如果您需要为上下文路径添加多个 xml，只需将它们放在以空格分隔的同一字符串中，如下所示：

```
sc.addInitParameter(ContextLoader.CONFIG_LOCATION_PARAM,
        "/applicationContext-test.xml /applicationContext-other.xml"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T00:15:27.653

ContextLoader.getCurrentWebApplicationContext 返回 null 的原因是，当您使用我的 MockWebApplicationContextLoader 时，您既没有使用 Web 应用程序上下文，也没有使用特定的 ContextLoader 实现。

既然你的存储库是由 Spring 管理的，为什么不简单地将配置对象注入到存储库中呢？注入配置对象是访问它的最合适的方式。然后，您可以在使用 @PostConstruct 注释的方法中初始化您的命名空间属性。

或者，您的 DOA 可以实现 ApplicationContextAware 以在构建期间接收应用程序上下文的副本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T09:15:34.030

将您的属性文件存储在您的类路径中。

现在在你的控制器类中访问该属性，如下所示：

```
/*to access your filename.properties file */
properties.load(Thread.currentThread().getContextClassLoader().getResourceAsStream("filename.properties"));

String  sServerLocation = properties.getProperty("key"); 
```

现在您可以访问您的属性文件。

我相信它会起作用。

# language-agnostic - 添加 pdf 表单域

> ID：10441623
> 
> 赞同：0
> 
> 时间：2012-05-04T01:43:29.077
> 
> 标签：language-agnostic

使用 iTextSharp 将表单字段添加到 pdf 文件，然后将它们保存为新文件。这行得通，但是必须获取每个表单域的位置和大小是很繁琐的。

目前，我使用反复试验来获得正确的位置和大小 - 有没有更聪明的方法？或者是否有一些（最好是免费的）PDF 工具可以让我将表单域拖放到现有的 pdf 文档中，并将它们保存为新文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:12:04.627

我知道的唯一工具是[Adob​​e Acrobat Professional](http://www.adobe.com/products/acrobatpro.html)。

# iphone - 企业 iOS 应用程序和企业配置的 iOS 设备是否有任何特殊功能？

> ID：10441624
> 
> 赞同：0
> 
> 时间：2012-05-04T01:43:31.090
> 
> 标签：iphone, ios, ipad, distribution, provisioning

只是好奇，从 API 的角度来看，一般来说，除了不必通过 iTunes 应用程序审批流程之外，与普通应用程序商店的常规应用程序相比，还有其他优势（甚至劣势）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T02:09:59.763

向标准许可证持有者公开的公共 API 与可供企业许可证持有者使用的 API 完全相同。在我看来，企业许可证的优点是：

1.  如果您愿意，您甚至可以自由使用未记录的 API。由于这些应用程序从不通过 iTunes 商店，因此 Apple 无法干预它们的分发。

2.  出于与上述相同的原因，无需遵守 HIG 指南（尽管我们总是出于明显的原因尝试遵循它们）。

3.  由于企业内部分发允许部署在任何 iDevice 上，应用程序的测试也不限于在配置门户上注册的 100 台设备。

缺点是：

1.  您不能使用应用内购买、iAd 等功能（尽管企业应用程序中没有此类功能的要求）。

2.  企业内部经销证书有效期为一年。这意味着使用新证书（每年一次又一次）再次重建和重新部署所有应用程序。

总而言之，我会说我绝对不同意 MDT 的评论。企业应用程序不适合普通大众，因此它们不需要市场知名度。考虑一个显示销售数据仪表板的企业应用程序。该使用仅与企业的内部用户相关，并想象如果它在应用商店中可用会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T02:25:39.980

Marco Arment 似乎是这么认为的。[http://www.marco.org/2012/01/06/autorenewable-subscription-restrictions](http://www.marco.org/2012/01/06/autorenewable-subscription-restrictions)

总结这篇文章，他花了一些时间尝试通过自动更新订阅支付 instapaper，但随后被应用商店拒绝，因为这不是预期用途（尽管这对他的商业模式非常有意义） .

# many-to-many - SQLAlchemy 多对多动态类集合关系

> ID：10441628
> 
> 赞同：4
> 
> 时间：2012-05-04T01:43:55.987
> 
> 标签：many-to-many, sqlalchemy

我有一个 SQLAlchemy 多对多关系——我希望这种关系是类似集合的。

也就是说，关联表不应该有重复的值。我在 MySQL 服务器上有一个唯一性约束来实现这一点。关系中的项目数很大，因此将关系配置为动态的。

问题是，我仍然希望能够使用内置工具将项目添加到关系中。但是，这会导致为关系发出“INSERT”语句。我希望它们是“INSERT IGNORE”语句，因为我不想加载所有项目来确定它们当前是否存在。

有没有人处理过这个问题？有人知道让 SQLAlchemy 为动态关系发出 INSERT IGNORE 语句的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T08:01:09.530

您可以使用SqlAlchemy 0.7.7 版本中提供的[prefix_with()函数。](http://docs.sqlalchemy.org/en/rel_0_7/core/expression_api.html#sqlalchemy.sql.expression.Insert.prefix_with)

# asp.net-mvc - 如何混合两个依赖存储库数据以在 MVC 中创建单个 UI 模型

> ID：10441629
> 
> 赞同：0
> 
> 时间：2012-05-04T01:44:00.430
> 
> 标签：asp.net-mvc, model-view-controller, repository

我正在使用存储库模式开发一个 MVC 项目，并遇到了应用程序中非常常见的情况。

我有一个显示客户信息并使用客户和帐户存储库的视图。帐户提供地址、电子邮件、电话、订单历史等数据，而客户填写个人信息和客户选择。（有时两者之间的信息重叠）。但是我无法在客户之前获取帐户数据。

现在在 View 中，我只有一个 UI 实体 [uxCustomer] 紧密地代表一个 View (MVC)。现在我们首先要调用 CustomerRepository 来

```
 => Fill Customer info (partially)
   => Get AccountID to call AccountRepository 
```

**我想到了以下选项：**

1.  从 CustomerRepository 调用 AccountRepository 以返回完整的 [uxCustomer] 而不是部分的。

2.  从控制器调用 CustomerReposioty 以获取部分 [uxCustomer]，然后调用 AccountRepository 并传递部分 [uxCustomer] ByRef，以便可以使用 CustomerRepository 中不可用的信息填充它。

3.  创建两个新实体 [BusinessCustomer] 和 [BusinessAccount]（由各自的存储库返回）并在存储库和控制器之间有一个中间层，我们称之为处理器。并让 Processor 执行 step2 并返回 [uxCustomer]

请提供您的意见。

PS：我不控制 Service/DataAccessLayer，所以必须使用我所拥有的。

# android - TabPageIndicator 和 TitlePageIndicator 的实现有什么区别？

> ID：10441631
> 
> 赞同：2
> 
> 时间：2012-05-04T01:44:14.470
> 
> 标签：android, tabs, viewpagerindicator

我查看了示例，唯一的区别似乎是名称，但是当我将应用程序中的所有名称从 TitlePageIndicator 切换到 TabPageIndicator 时，选项卡的对齐方式混乱，页脚下划线消失了。

我错过了什么吗？我需要做些额外的事情吗？我有

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MyFragmentPagerAdapter adapter = new MyFragmentPagerAdapter( getSupportFragmentManager() );
    ViewPager pager =
        (ViewPager)findViewById( R.id.viewpager );
    TabPageIndicator indicator =
        (TabPageIndicator)findViewById( R.id.indicator );
    pager.setAdapter( adapter );
    indicator.setViewPager( pager ); 
```

和

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/tabcontent"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:padding="5dp" >
            <com.viewpagerindicator.TabPageIndicator
    android:id="@+id/indicator"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />
<android.support.v4.view.ViewPager
    android:id="@+id/viewpager"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
     />
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T06:17:59.737

**TabPageIndicator 和 TitlePageIndicator 有什么区别？**

> 尝试查看该页面，看看您是否找到了答案。

我做到了，这就是我开始发布的原因。

**标题指示符**

> 将所选页面的标题与相邻页面的标题（如果可用）以更微妙的风格显示在中心。

**标签指示器**

> 类似于标题指示器，但在滚动和动画水平选项卡中显示尽可能多的标题。

**TitlePagerIndicator 示例：**

**适配器**

```
class TestFragmentAdapter extends FragmentPagerAdapter {
protected static final String[] CONTENT = new String[] { "This", "Is", "A", "Test", };

private int mCount = CONTENT.length;

public TestFragmentAdapter(FragmentManager fm) {
    super(fm);
    }

@Override
public Fragment getItem(int position) {
    return TestFragment.newInstance(CONTENT[position % CONTENT.length]);
    }

@Override
public int getCount() {
    return mCount;
    }

public void setCount(int count) {
    if (count > 0 && count <= 10) {
        mCount = count;
        notifyDataSetChanged();
        }
    }
} 
```

当你使用时，`TitlePagerIndicator`你需要`TitleProvider`在你的`Adapter`.

```
class TestTitleFragmentAdapter extends TestFragmentAdapter implements TitleProvider {
public TestTitleFragmentAdapter(FragmentManager fm) {
    super(fm);
    }

@Override
public String getTitle(int position) {
    return TestFragmentAdapter.CONTENT[position % CONTENT.length];
    }
} 
```

**把它们放在一起**

```
TestFragmentAdapter mAdapter = new TestTitleFragmentAdapter(getSupportFragmentManager());
ViewPager mPager = (ViewPager)findViewById(R.id.pager);
mPager.setAdapter(mAdapter);
PageIndicator mIndicator = (TitlePageIndicator)findViewById(R.id.indicator);
mIndicator.setViewPager(mPager); 
```

**TabPagerIndicator 示例：**

```
public class SampleTabsDefault extends FragmentActivity {
private static final String[] CONTENT = new String[] { "Recent", "Artists", "Albums", "Songs", "Playlists", "Genres" };

TestFragmentAdapter mAdapter;
ViewPager mPager;
PageIndicator mIndicator;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.simple_tabs);

    mAdapter = new GoogleMusicAdapter(getSupportFragmentManager());

    mPager = (ViewPager)findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);

    mIndicator = (TabPageIndicator)findViewById(R.id.indicator);
    mIndicator.setViewPager(mPager);
    }

class GoogleMusicAdapter extends TestFragmentAdapter implements TitleProvider {
    public GoogleMusicAdapter(FragmentManager fm) {
        super(fm);
        }

    @Override
    public Fragment getItem(int position) {
        return TestFragment.newInstance(SampleTabsDefault.CONTENT[position % SampleTabsDefault.CONTENT.length]);
        }

    @Override
    public int getCount() {
        return SampleTabsDefault.CONTENT.length;
        }

    @Override
    public String getTitle(int position) {
        return SampleTabsDefault.CONTENT[position % SampleTabsDefault.CONTENT.length].toUpperCase();
        }
    }
} 
```

所有这些示例以及更多示例都可以在[Jake Wharton 的 ViewPagerIndicator 的 Github 存储库中找到](https://github.com/JakeWharton/Android-ViewPagerIndicator/tree/master/sample/src/com/viewpagerindicator/sample)

# css - 在 a 中拉伸图像 用css IE8

> ID：10441632
> 
> 赞同：0
> 
> 时间：2012-05-04T01:44:41.363
> 
> 标签：css, internet-explorer

我想拉伸使用的图像`<li>`，因为图像大小的增加中的文本`<li>`不足以随着`<li>`. 我也不想重复这个图像。下面的代码适用于所有带有 CSS3 的最新浏览器，但我需要为 6 到 9 之间的所有 Internet Explorer 版本拉伸图像。如何做到这一点？

```
.Menu li a.active, .Menu li a.active:hover
{
    background-image: url('/images/11_MenuSelected.png');
    -moz-background-size: 100% 100%;
    -o-background-size: 100% 100%;
    -webkit-background-size: 100% 100%; 
    background-size: 100% 100%; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:45:58.407

您可以将其用于 IE6-IE8。

```
filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/images/11_MenuSelected.png', sizingMethod='scale')"; 
```

问题是 src 是相对于 HTML 文档，而不是你的样式表。因此，它的行为与典型的样式规则不同。您可能想要更改它，以便 src 是相对于根的，因此它可以与不同路径结构的文档一起使用。

# ruby-on-rails - 通过关联软删除 has_many

> ID：10441633
> 
> 赞同：4
> 
> 时间：2012-05-04T01:44:47.003
> 
> 标签：ruby-on-rails, ruby, activerecord, orm, associations

通过关联在 has_many 上实现**软删除的最简单方法是什么？**

我想要的是这样的：

```
class Company > ActiveRecord::Base
  has_many :staffings
  has_many :users, through: :staffings, conditions: {staffings: {active: true}}
end 
```

我想使用`Company#users`以下方式：

*   应该是一个正常的`Company#users`关联，以便它**与表单一起使用**并且不会破坏现有的合同。
*   将**用户**添加到公司时，会**创建**一个新`Staffing`的 with 。`active: true`
***   当从公司中**删除**用户时，现有的`Staffing`会被更新`active: false`（目前它**只是被删除**）。*   将**以前删除的用户**添加到公司时（以便`Staffing#active == false`）`Staffing`更新为`active: true`.**

 **我考虑过覆盖该`Company#users=`方法，但它确实不够好，因为还有其他更新关联的方法。

所以问题是：**如何实现对`Company#users`关联的解释行为？**

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T05:27:25.163

`has_many :through`关联实际上只是语法糖。当您需要进行繁重的工作时，我建议您拆分逻辑并提供适当的方法和范围。了解如何覆盖[回调](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)对于这类事情也很有用。

这将使您开始使用软删除并在之后`User`创建`Staffings``User`

```
class Company < ActiveRecord::Base
  has_many :staffings
  has_many :users, through: :staffings, conditions: ['staffings.active = ?', true]
end

class Staffing < ActiveRecord::Base
  belongs_to :company
  has_one :user
end

class User < ActiveRecord::Base
  belongs_to :staffing

  # after callback fires, create a staffing
  after_create {|user| user.create_staffing(active: true)}

  # override the destroy method since you 
  # don't actually want to destroy the User
  def destroy
    run_callbacks :delete do
      self.staffing.active = false if self.staffing
    end
  end
end 
```**

# c++ - C++ ftp 上传错误

> ID：10441634
> 
> 赞同：1
> 
> 时间：2012-05-04T01:44:52.853
> 
> 标签：c++, ftp, libcurl, codeblocks

我正在尝试使用 libcurl 将文件上传到 ftp 服务器，但出现错误。

代码：

```
#include <stdio.h>
#include <string.h>

#include <curl/curl.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <errno.h>
#ifdef WIN32
#include <io.h>
#else
#include <unistd.h>
#endif

#define LOCAL_FILE      "C:/AdobeRenderLog.txt"
#define UPLOAD_FILE_AS  "log.txt"
#define REMOTE_URL      "ftp://******:*******@*********.ccom"  UPLOAD_FILE_AS
#define RENAME_FILE_TO  "log.txt"

static size_t read_callback(void *ptr, size_t size, size_t nmemb, void *stream)
{

size_t retcode = fread(ptr, size, nmemb, stream);

nread = (curl_off_t)retcode;

fprintf(stderr, "*** We read %" CURL_FORMAT_CURL_OFF_T" bytes from file\n", nread);
return retcode;
}

int main(void)
{
CURL *curl;
CURLcode res;
FILE *hd_src;
struct stat file_info;
curl_off_t fsize;

struct curl_slist *headerlist=NULL;
static const char buf_1 [] = "RNFR " UPLOAD_FILE_AS;
static const char buf_2 [] = "RNTO " RENAME_FILE_TO;

/* get the file size of the local file */
if(stat(LOCAL_FILE, &file_info)) {
printf("Couldnt open '%s': %s\n", LOCAL_FILE, strerror(errno));
return 1;
}
fsize = (curl_off_t)file_info.st_size;

printf("Local file size: %" CURL_FORMAT_CURL_OFF_T " bytes.\n", fsize);

/* get a FILE * of the same file */
hd_src = fopen(LOCAL_FILE, "rb");

/* In windows, this will init the winsock stuff */
curl_global_init(CURL_GLOBAL_ALL);

/* get a curl handle */
curl = curl_easy_init();
if(curl) {
/* build a list of commands to pass to libcurl */
headerlist = curl_slist_append(headerlist, buf_1);
headerlist = curl_slist_append(headerlist, buf_2);

/* we want to use our own read function */
curl_easy_setopt(curl, CURLOPT_READFUNCTION, read_callback);

/* enable uploading */
curl_easy_setopt(curl, CURLOPT_UPLOAD, 1L);

/* specify target */
curl_easy_setopt(curl,CURLOPT_URL, REMOTE_URL);

/* pass in that last of FTP commands to run after the transfer */
curl_easy_setopt(curl, CURLOPT_POSTQUOTE, headerlist);

/* now specify which file to upload */
curl_easy_setopt(curl, CURLOPT_READDATA, hd_src);

/* Set the size of the file to upload (optional).  If you give a *_LARGE
   option you MUST make sure that the type of the passed-in argument is a
   curl_off_t. If you use CURLOPT_INFILESIZE (without _LARGE) you must
   make sure that to pass in a type 'long' argument. */
curl_easy_setopt(curl, CURLOPT_INFILESIZE_LARGE,
                 (curl_off_t)fsize);

/* Now run off and do what you've been told! */
res = curl_easy_perform(curl);

/* clean up the FTP commands list */
curl_slist_free_all (headerlist);

/* always cleanup */
curl_easy_cleanup(curl);
}
fclose(hd_src); /* close the local file */

curl_global_cleanup();
return 0;
} 
```

错误：

```
main.cpp||In function 'size_t read_callback(void*, size_t, size_t, void*)':|

main.cpp|37|error: invalid conversion from 'void*' to 'FILE*'|

main.cpp|37|error:   initializing argument 4 of 'size_t fread(void*, size_t, size_t, FILE*)'| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:57:28.490

您遇到了选角问题

```
main.cpp|37|error: invalid conversion from 'void*' to 'FILE*'| 
```

可以通过铸造为“C”阶梯来解决

```
size_t retcode = fread(ptr, size, nmemb, (FILE*) stream); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T01:48:35.677

如错误所述，的第四个参数`fread()`必须是 a `FILE*`。你已经通过了`stream`，它被声明为`void*`.

# mysql - 使用 MySQL，如何将当前时间存储为 UTC 时间？

> ID：10441635
> 
> 赞同：0
> 
> 时间：2012-05-04T01:45:05.787
> 
> 标签：mysql, datetime

当我将数据插入我的 MySQL 数据库时，很多时候我需要存储当前的日期时间。我总是想将我的日期时间存储为 UTC 时间。

如何存储当前的 UTC 时间？是否有内置函数或者我必须对 NOW() 应用偏移量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T01:50:49.853

在 MySQL 中，您可以使用`UNIX_TIMESTAMP()`可以提供各种日期和时间值并且特定于您可以使用的请求`UTC_TIMESTAMP`，`UTC_TIMESTAMP()`它返回当前 UTC 日期和时间作为值`YYYY-MM-DD HH:MM:SS`或`YYYYMMDDHHMMSS.uuuuuu`格式，具体取决于函数是在字符串中使用还是数字上下文。

例子：

```
mysql> SELECT UTC_TIMESTAMP(), UTC_TIMESTAMP() + 0;
        -> '2003-08-14 18:08:04', 20030814180804.000000 
```

此处描述了有关 MySQL 日期/时间函数的更多信息：http: [//dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_unix-timestamp](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_unix-timestamp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T01:54:24.577

您可以更新文件`timezone`中的属性`my.cnf`：

```
[mysqld_safe]
timezone = UTC 
```

# c++ - 错误：“无法访问在类 'boost::signals2::scoped_connection' 中声明的私有成员”？

> ID：10441652
> 
> 赞同：3
> 
> 时间：2012-05-04T01:48:42.593
> 
> 标签：c++, boost, boost-signals, noncopyable, boost-signals2

```
class Whatever
{
public:
    virtual ~Whatever();

protected:
    Whatever();
    virtual void SomeMethod();
    void OnEventOccurred(int x);

    std::vector<boost::signals2::scoped_connection> boostSignalConnections_;
} 
```

// .cpp

```
Whatever::SomeMethod()
{
    ...
    boostSignalConnections_.push_back(
        anObject->AddEventOccurredObserver(
            std::bind(&Whatever::OnEventOccurred,
                      this, std::placeholders::_1)));
    ...
} 
```

（注意`AddEventOccurredObserver`只是委托`boost::signals2::connect()`并返回`boost::signals2::connection`）

我收到以下错误。很难解释模板错误，但似乎错误是在成员声明中引起的`std::vector<boost::signals2::scoped_connection> boostSignalConnections_;`

```
...\vc\include\xmemory(202): error C2248:  
    'boost::signals2::scoped_connection::scoped_connection' :
    cannot access private member declared in class 'boost::signals2::scoped_connection'
...\boost_1_47\boost\signals2\connection.hpp(234) : see declaration of
'boost::signals2::scoped_connection::scoped_connection'
...\boost_1_47\boost\signals2\connection.hpp(210) :
    see declaration of 'boost::signals2::scoped_connection'
...\vc\include\xmemory(201) : while compiling class template member function
'void std::allocator<_Ty>::construct(boost::signals2::scoped_connection *,_Ty &&)'
with
[
    _Ty=boost::signals2::scoped_connection
] 
```

我已经搜索过，我认为这可能与 scoped_connection 不可复制有关？我不知道。我使用 scoped_connection 的原因是因为这个 SO 问题： [Handle connection/disconnection of many signals/slots with boost::signals2](https://stackoverflow.com/questions/6265797/handle-connection-disconnection-of-many-signals-slots-with-boostsignals2)

**更新**

仅供参考，当我从 更改`scoped_connection`为`connection`时：`std::vector<boost::signals2::connection> boostSignalConnections_;`。我使用的全部原因`scoped_connection`是它们会在破坏时自动断开连接，而我相信 a`connection`不会。但是，我可以遍历集合并手动断开每个集合。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T02:18:51.973

`boost::signals2::scoped_connection`是不可复制的，在 C++03 中，`std::vector<T>`要求它`T`既可复制构造又可复制分配（此要求在 C++11 中放宽，其中不可复制的类型只要是可移动的就可以了）。

天真的解决方案是`boostSignalConnections_`改为`std::vector<scoped_connection*>`，但这会引入不值得努力的对象生命周期和异常安全问题。相反，根据您的编译器的最新程度，我建议以下内容：

*   C++03: Use [`boost::ptr_vector<scoped_connection>`](http://www.boost.org/libs/ptr_container/)，它将为您存储指针（允许不可复制的类型），但为您提供值语义，并消除上述对象生命周期和异常安全问题。
*   C++11：上面仍然是一个有效的选项，但更惯用的方法是使用`std::vector<std::unique_ptr<scoped_connection>>`.

话虽如此，`scoped_connection`如果你不希望你的对象是词法范围的，为什么要使用呢？

# bash - bash的多字命令完成

> ID：10441654
> 
> 赞同：1
> 
> 时间：2012-05-04T01:48:59.340
> 
> 标签：bash, autocomplete, bash-completion

> **可能重复：**
> [正确处理 bash 完成中的空格和引号](https://stackoverflow.com/questions/1146098/properly-handling-spaces-and-quotes-in-bash-completion)

我想使用多字引用字符串来完成 bash。

例如，我喜欢能够做到这一点

```
$ command <tab> 
  "Long String 1"
  "Long String 2" 
```

其中“Long String 1”和“Long String 2”是按下选项卡时给出的建议。

我尝试使用它，其中`~/strings` 包含引用字符串的列表

```
function _hista_comp(){
    local curw
    COMPREPLY=()
    curw=${COMP_WORDS[COMP_CWORD]}
    COMPREPLY=($(compgen -W '`cat ~/strings`' -- $curw))    
    return 0
}
complete -F _hista_comp hista 
```

上面的函数在空格上分割字符串。有没有办法让它返回整个引用的字符串？

例如，如果`~/string`有以下几行

```
 "Long String 1"
  "Long String 2" 
```

它将给出 5 个建议而不是 2 个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:17:50.697

在尝试了各种事情后，我发现添加

```
 IFS=$'\x0a'; 
```

到函数的开头（将输入分隔符更改为新行）使函数正确处理空格。

所以功能是

```
function _hista_comp(){  
    IFS=$'\x0a';
    local curw
    COMPREPLY=()
    curw=${COMP_WORDS[COMP_CWORD]}
    COMPREPLY=($(compgen -W '`cat ~/strings`' -- $curw))    
        uset IFS
    return 0
}
complete -F _hista_comp hista 
```

这将允许

```
$ command <tab> 
  "Long String 1"
  "Long String 2" 
```

如我所愿。

# sencha-touch - store.loadData 未定义。如何将数据加载到商店 Sencha Architect

> ID：10441656
> 
> 赞同：2
> 
> 时间：2012-05-04T01:49:19.157
> 
> 标签：sencha-touch, sencha-touch-2, sencha-architect

过去，我使用 Ext.create('Ext.data.Store', ...我的数据对象）；

这不适用于您在 Sencha Architect 中定义的商店，您会收到未定义的 loadData 错误。

我有一个自定义的 Ext.Ajax 例程，用于获取不适合在商店代理中定义的数据。我的数据采用正确的 JSON 格式，但我没有找到一种方法来强制将数据加载到商店而不使用商店代理。

我能够让 MyStore.add({--json string ...}) 工作，但这只会添加一条记录。

为什么不支持 store.loadData() ？？？我可以用什么代替？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:29:58.543

假设您使用的是 Touch 项目，请使用 store.setData。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:02:25.950

我已阅读 Sencha API 文档。这里的问题是，当在 Sencha Architect 的用户定义函数中引用时，Store.loadData 似乎无效（即未定义）。我一直无法找到一种方法来获取具有有效 JSON 对象的变量并将其加载到 s 存储中。我认为唯一可行的方法是在函数中创建商店，但这会破坏架构师提供的出色 UI。

# ruby-on-rails - Rails：计算特定记录然后进行计算

> ID：10441659
> 
> 赞同：0
> 
> 时间：2012-05-04T01:49:49.543
> 
> 标签：ruby-on-rails, ruby-on-rails-3, math, records

我正在尝试进行 rails 记录计数，然后从这些记录中进行计算以给我一个最终数字：

例子

```
100 Records = A
30 Records = B
Total Records = C

A+(-B)=C 
```

我什至不会向您展示我尝试过的东西……回想起来，我对 Rails 很陌生，这没有逻辑意义！

**更新：** 进一步扩展：

在实现这一点时，我意识到可能与上面解决的问题略有不同。我有一个名为“POST”的 MVC，它是表中的一些记录，具体称为“VOTE”，投票整数将由 1 或 (-1) 组成。每个帖子都有一个代表值 1 或 (-1) 的 VOTE 列。我正在尝试创建一个包含以下内容的分析指标：

TOTAL =（值为 1 的帖子总数）+（值为 -1 的帖子总数）示例

1234 = 2000 + (-776)

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:52:48.613

一般来说，C = A.count + B.count

如果您希望 C 成为 A 和 B 的并集，则执行

```
C = A & B
C.count # Number of elements in C 
```

对于您的具体情况：

```
yes_votes = POST.where('VOTE = ?', 1)
no_votes = POST.where('VOTE = ?', -1)
total = yes_votes.count - no_votes.count 
```

# javascript - 结合javascript函数

> ID：10441660
> 
> 赞同：0
> 
> 时间：2012-05-04T01:49:56.640
> 
> 标签：javascript, html, forms, function, onclick

嗨，我正在使用 javascript 函数在单击时阻止 ma 文本框，最初文本框包含它们各自的标签名称，例如：客户名称、公司等。单击文本框时，它会使文本框为空，因此可以输入数据。为此，我使用的是 javascript 函数，对于每个文本框，我必须有一个单独的函数，谁能告诉我如何组合所有这些函数，每个函数中唯一不同的是文本框中使用的值和文本框名称.

Javascript函数

```
 function clientnameclear() {
    if(document.bunkerfrm.clientname.value=="Client Name") {
        var bunkerfrm = document.bunkerfrm.clientname.value="";
        var bunkerfrm = document.bunkerfrm.clientname.focus();
    }
    else {
        var bunkerfrm = document.bunkerfrm.clientname.focus();
    }
}

function clientnamereset() {
    if(document.bunkerfrm.clientname.value=="") {
        var bunkerfrm = document.bunkerfrm.clientname.value="Client Name";
    }
}

function vesselnameclear() {
    if(document.bunkerfrm.vesselname.value=="Vessel Name") {
        var bunkerfrm = document.bunkerfrm.vesselname.value="";
        var bunkerfrm = document.bunkerfrm.vesselname.focus();
    }
    else {
        var bunkerfrm = document.bunkerfrm.vesselname.focus();
    }
}

function vesselnamereset() {
    if(document.bunkerfrm.vesselname.value=="") {
        var bunkerfrm = document.bunkerfrm.vesselname.value="Vessel Name";
    }
}

function compclear() {
    if(document.bunkerfrm.company.value=="Company") {
        var bunkerfrm = document.bunkerfrm.company.value="";
        var bunkerfrm = document.bunkerfrm.company.focus();
    }
    else {
        var bunkerfrm = document.bunkerfrm.company.focus();
    }
}

function compreset() {
    if(document.bunkerfrm.company.value=="") {
        var bunkerfrm = document.bunkerfrm.company.value="Company";
    }
} 
```

Html 代码是

```
<form name="bunkerfrm" id="bunkerfrm" action="#" method="post"><br>
<input type="text" name="clientname" class="txtbox" value="Client Name" onmousedown="clientnameclear()" onclick="clientnameclear()" onblur="clientnamereset()" />
<br /><br>
<input type="text" name="company" class="txtbox" value="Company" onmousedown="compclear()" onclick="compclear()" onblur="compreset()" />
<br /><br>
<input type="submit" name="submitting" class="bunksubmit" value="Send Your Inquiry" /><br>
 </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:04:34.307

首先，将默认值存储在某处，例如`alt`给定输入的。

```
<form name="bunkerfrm" id="bunkerfrm" action="#" method="post"><br>
<input type="text" name="clientname" alt="Client Name" class="txtbox" value="Client Name" onfocus="clear_text(this);" onblur="reset_text(this);" />
<br /><br>
<input type="text" name="company" class="txtbox" alt="Company" value="Company" onfocus="clear_text(this);" onblur="reset_text(this);" />
<br /><br>
<input type="submit" name="submitting" class="bunksubmit" value="Send Your Inquiry" /><br>
 </form> 
```

然后将输入元素`this`作为参数传递给这些 onfocus/onblur 函数：

```
function clear_text(elem)
{
    if (elem.value == elem.alt)
        elem.value = "";
}

function reset_text(elem)
{
    if (elem.value == "")
        elem.value = elem.alt;
} 
```

`alt`如果它的值与存储在属性中的占位符相同，它将在获得焦点时清除输入。该事件`onblur`将触发该`reset_text`函数将检查该值是否为空并将其恢复为存储在`alt`属性中的默认占位符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T02:10:38.833

使用`placeholder`：

```
<input type="text" name="clientname" placeholder="Client Name" class="txtbox" />
<br /><br>
<input type="text" name="company" class="txtbox" placeholder="Company" />
<br /><br>
<input type="submit" name="submitting" class="bunksubmit" placeholder="Send Your Inquiry" /><br>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T02:01:46.680

我建议您使用和/或研究现有的库，例如：

*   现场[http://fuelyourcoding.com/scripts/infield/](http://fuelyourcoding.com/scripts/infield/)
*   ClearField [http://labs.thesedays.com/projects/jquery/clearfield/](http://labs.thesedays.com/projects/jquery/clearfield/)

# entity-framework - EF Code First 循环参考

> ID：10441662
> 
> 赞同：3
> 
> 时间：2012-05-04T01:50:08.777
> 
> 标签：entity-framework, ef-code-first

我有一系列代表文件夹和文件的对象。文件夹当然可以有一组文件，但它们也可以有子文件夹。文件夹具有对父文件夹的引用。这可能是麻烦开始的地方。一个文件夹也可以有一个与之关联的图标。

```
public class Folder
{
    [Key]
    public int FolderId { get; set; }
    public string FolderName { get; set; }
    public int ParentFolderId { get; set; }
    public virtual Folder ParentFolder { get; set; }
    public int IconId { get; set; }
    public virtual Icon Icon { get; set; }

    public virtual ICollection<FileInformation> FileInformations { get; set; }
    public virtual ICollection<Folder> Folders { get; set; }
}

public class Icon
{
    [Key]
    public int IconId { get; set; }
    public string IconUrl { get; set; }
    public string Description { get; set; }
} 
```

但是，当我运行应用程序并尝试获取图标列表时，我收到以下错误消息：

***引用关系将导致不允许的循环引用。[ 约束名称 = FK_Folder_Icon_IconId ]***

我不是 100% 在这里循环引用。文件夹只引用一次图标，图标根本不引用文件夹。

一个问题，这可能是相关的，是我不确定如何正确地将 ParentFolderId 映射回父文件夹的 FolderId。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:18:58.013

嗨更改 Id 而不是 FolderId, IconId 用 [key] 修改。因为你不使用映射流利的代码，并且 EF 只能假设与名称和类型的关系。

这是工作。

```
public class Folder
{
    [Key]
    public int Id { get; set; }

    public string FolderName { get; set; }
    public virtual int ParentId { get; set; } /*ParentFolderId*/
    public virtual Folder Parent { get; set; } /*ParentFolder*/
    public virtual int IconId { get; set; }
    public virtual Icon Icon { get; set; }

    public virtual ICollection<Folder> Children { get; set; } /*not Folders*/

   //it is out of subject 
   //public virtual ICollection<FileInformation> FileInformations { get; // set; }
}

public class Icon
{
    [Key]
    public int Id { get; set; }

    public string IconUrl { get; set; }
    public string Description { get; set; }
} 
```

# windows - 如何在VS2005监视窗口中显示变量的完整字符串值？

> ID：10441668
> 
> 赞同：3
> 
> 时间：2012-05-04T01:51:30.547
> 
> 标签：windows, visual-c++, visual-studio-2005

看起来在 VS2005 的监视窗口中显示的变量值被截断了。只有大约255？字节显示。我们可以配置 VS2005 以显示完整长度吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T09:39:52.840

如果单击文本可视化工具（值旁边的放大镜），您可以查看整个字符串

# c# - UpdatePanel 并将消息发布到其他控件

> ID：10441669
> 
> 赞同：2
> 
> 时间：2012-05-04T01:51:51.227
> 
> 标签：c#, asp.net, ajax, updatepanel, ajaxcontroltoolkit

我可以使用 ScriptManager 控件注册自定义事件以用作带有 UpdatePanel 的 AsyncPostbackTrigger 吗？

例子：

```
<Triggers>
        <asp:AsyncPostBackTrigger  ControlID="ucTest"  EventName="CustomEvent" />
</Triggers> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:30:49.830

检查这个例子：

文本控件.ascx

```
<%@ Control Language="VB" AutoEventWireup="false" CodeFile="TextControl.ascx.vb" Inherits="TextControl" %>
<asp:Button ID="button1" runat="server" Text="Text" /> 
```

文本控件.ascx.vb

```
Partial Class TextControl
    Inherits System.Web.UI.UserControl

    Public Event ButtonClick(ByVal sender As Object, ByVal e As _
     System.EventArgs)

    Private Sub button1_onclick(ByVal sender As Object, ByVal e As _
     System.EventArgs) Handles button1.Click

        RaiseEvent ButtonClick(sender, e)

    End Sub

End Class 
```

ctrlPage.aspx（使用控件的地方）

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="ctrlPage.aspx.vb" Inherits="ctrlPage" %>

<%@ Register Assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    Namespace="System.Web.UI" TagPrefix="asp" %>

<%@ Register Src="TextControl.ascx" TagName="wTextC" TagPrefix="uc1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:ScriptManager ID="scr1" runat="server">
        </asp:ScriptManager>
    <div>
    <uc1:wTextC ID="wMenu1" runat="server" />
        <asp:UpdatePanel ID="upd1" runat="server">
        <ContentTemplate>
            <asp:Label runat="server" Text="" ID="label1"></asp:Label>
        </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="wMenu1" EventName="ButtonClick" />
            </Triggers>
        </asp:UpdatePanel>
    </div>
    </form>
</body>
</html> 
```

ctrlPage.aspx.vb

```
Partial Class ctrlPage
    Inherits System.Web.UI.Page

    Protected Sub wMenu1_ButtonClick(ByVal sender As Object, ByVal e As System.EventArgs) Handles wMenu1.ButtonClick
        Me.label1.Text = ":)"
    End Sub   

End Class 
```

# linux - 可以屏蔽定时器中断吗？

> ID：10441670
> 
> 赞同：2
> 
> 时间：2012-05-04T01:52:07.397
> 
> 标签：linux, linux-kernel, scheduling, scheduler, interrupt-handling

我很想知道是否可以屏蔽定时器中断..？考虑 ppc 的情况，“kernel/timer.c”中的 run_local_timers() 函数由本地的每个 CPU 定时器中断调用。

那么这个定时器中断是否有可能被屏蔽并且在这段时间内没有调用 run_local_timers() 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:51:31.647

可以屏蔽除 NMI 之外的所有中断。这包括定时器中断。
通常，在处理硬件中断时，会禁用中断。

请注意，屏蔽中断超过很短的时间会严重影响系统。

# jquery - ASPNet WebAPI：POST 上的 JSON 反序列化错误

> ID：10441672
> 
> 赞同：0
> 
> 时间：2012-05-04T01:52:22.060
> 
> 标签：jquery, asp.net-web-api

**更新：**这个问题可能是由于我对 SPA 模板和技术缺乏了解。我试图忽略结果库，并在此错误之前对模板进行了大量手动修改。请以非建设性投票结束。

我正在尝试具有真实世界类型场景的 ASP.Net MVC4 SPA 项目。由于结果尚不存在，因此我仅在客户端使用 WebAPI 部分和带有 JQuery Ajax 方法的 Knockout。

一切都很好，直到我不得不使用任意参数发布数据：

这是我的控制器：

```
public class ProductLineController : DbDataController<WebSiteContext>
{
    [HttpPost]
    public HttpResponseMessage<Order> AddProductLine(int productId, int orderId)
    {
         [invoke logic to add the product line]
         [return the updated order]
    }
} 
```

调用此控制器的客户端代码位于 Knockout 视图模型上，如下所示：

```
this.addProduct = function (product) {
    var prodId = product.ProductId;

    var requestUrl = baseUrl + "productline";
    $.ajax({
        url: requestUrl,
        cache: false,
        type: 'POST',
        data: JSON.stringify({productId: prodId, orderId: orderId}),
        dataType:"json",
        contentType: 'application/json; charset=utf-8',
        success: function (data) {
            self.order(data);
        }
    }); 
```

非常简单。在对类似问题进行了一些调查后，我采取了预防措施来对 json 参数数据进行字符串化。

Fiddler 报告的请求标头是：

```
POST http://localhost:50045/api/orderedproduct HTTP/1.1
Host: localhost:50045
Connection: keep-alive
Content-Length: 27
Origin: http://localhost:50045
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) [snipped]
Content-Type: application/json; charset=UTF-8
Accept: application/json, text/javascript, */*; q=0.01
Referer: http://localhost:50045/Order/Create
Accept-Encoding: gzip,deflate,sdch
Accept-Language: es-ES,es;q=0.8,en-US;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

{"productId":1,"orderId":1} 
```

如您所见，JSON 格式正确。但反应是杀手500

```
System.Runtime.Serialization.SerializationException
There was an error deserializing the object of type System.Int32\. The value '' cannot be parsed as the type 'Int32'. 
```

诅咒堆栈跟踪比这更长，但这是重要的部分。

你能告诉我我的错误是什么吗？我只是迷路了。

# c++ - Eclipse 在使用 freopen 或 fopen CPP 时无法读取文件

> ID：10441674
> 
> 赞同：0
> 
> 时间：2012-05-04T01:52:29.427
> 
> 标签：c++, eclipse

我尝试使用 freopen ("inputString.txt","r",stdin); 将输入发送到标准输入。如果我在 Eclipse 中运行程序，则输出为 xxx，但如果我直接运行程序（在没有 Eclipse 的情况下编译后运行 *.exe），则输出为 goodxxx

该文本文件与 eclipse 项目中的 *.exe 位于同一目录中。我怎样才能解决这个问题。这是我的一些源代码。

```
 int main() {
int debug = 1,width,height;
char s[1000];
freopen ("inputString.txt","r",stdin);

s[0]='x';
scanf("%s",s);
printf("%s",s);
printf("xxx")for(;;);;

return 0;} 
```

inputString.txt 包含

好的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:54:31.957

检查启动配置中的当前目录，确保它是您所期望的。您还可以使用[它](https://stackoverflow.com/questions/143174/c-c-how-to-obtain-the-full-path-of-current-directory)从程序中获取和打印当前目录以查看您的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:51:13.753

只需将文件放在项目的根目录中即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-01T21:06:46.283

```
test
|___Binaries
|___Included
|___src
    |__test.cpp
    |__input.txt
|___Debug
|___Release 
```

如果这是您的 Eclipse C++ 项目结构，那么要访问**test.cpp中文件****input.txt**的内容，您需要编写

 **```
freopen("src/input.txt", "r", stdin); 
```

“测试”是根目录**

# gmail - 更改 Gmail 密码的 API

> ID：10441675
> 
> 赞同：0
> 
> 时间：2012-05-04T01:52:35.627
> 
> 标签：gmail

我一直在使用 MailSystem.NET 库来使用 C#.NET 从我的 Gmail 帐户中检索电子邮件。我想知道这个库或谷歌是否提供了一个 API 来以编程方式更改密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T02:08:07.740

应该可以通过[UserEntry](https://developers.google.com/google-apps/provisioning/#updating_a_user_account)对象。查看链接中的 .NET 选项卡。另外，请阅读此[链接](http://comments.gmane.org/gmane.org.google.api.apps/1577)，了解有关如何以编程方式进行的讨论。

# iphone - NSOperationQueueDefaultMaxConcurrentOperationCount 在野外

> ID：10441681
> 
> 赞同：14
> 
> 时间：2012-05-04T01:53:38.470
> 
> 标签：iphone, ios, nsoperationqueue

Apple 文档说，如果您将 NSOperationQueue 的 maxConcurrentOperationCount 属性设置为 NSOperationQueueDefaultMaxConcurrentOperationCount （默认值），那么它将在运行时根据“系统条件”调整该值。

> 如果指定值 NSOperationQueueDefaultMaxConcurrentOperationCount（推荐），最大操作数可以根据系统条件动态变化。

任何人都可以报告他们在不同设备上看到该值在野外设置的内容吗？我们是说 1 或 2 用于旧手机，3-4 用于新型号，还是 10 或 ?? 它没有提供对可能性集或最常见结果的任何见解。我认为让开发人员知道在生产中会发生什么是有用的，而不是我们会照顾它而不解释他们正在优化什么（UI 响应能力、操作执行速度等）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T06:08:34.097

正如它在许多不同的变体和资源（[例如](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)）中所说的那样，您永远不知道应该为应用程序的工作流程创建多少线程。

这是 CPU 时间和加载应用程序需要多少线程的问题（因为它并不孤单）。所以，答案是：

1.  优化核心数
2.  CPU架构优化
3.  当前 CPU 负载的优化

# c# - BindingSource 和复合属性

> ID：10441686
> 
> 赞同：1
> 
> 时间：2012-05-04T01:54:55.117
> 
> 标签：c#, winforms, list, data-binding, datagridview

我有一个方法，我在一个返回列表的表单中调用它，然后我将它放入 BindingSource 并将 BindingSource 放入 DataGridView。Order 类有一个名为 Items 的属性，其中包含一个 List。我的 Order 和 Item 类都实现了 INotifyPropertyChanged 接口。

我想要做的是，当在 DataGridView 中单击一行时，它会将与订单关联的项目列表从它的 Items 属性拉到另一个网格中。我想确保这些项目以 2 方式绑定到网格，但我不能以我想要的方式调用它......

```
itemsGrid.DataSource = orderBindingSource[orderGrid.CurrentRow.Index].Items; 
```

我无法从 BindingSource 中访问列表的属性（在 . 运算符之后，Items 不是可用选项）...有什么建议吗？我尝试使用 a `BindingList<Order>`，`BindingList<List<Order>>`但遇到了隐式转换错误。有什么建议么？

*编辑：好的，我已经设法让 BindingList 工作。我不知道我必须像这样添加列表

```
orderList = new BindingList<Order>(Method To Retrieve List<Order>) 
```

除此之外，显示订单的第一个网格可以完美运行和更新。包含订单项目的子网格，例如

```
itemsGrid.Datasource = orderList[ordersGrid.CurrentRow.Index].Items; 
```

它正确显示。我没有启用编辑，因为我有几个已设置的文本框，并且每个文本框都绑定到当前选择的 ordersGrid 行的 orderList 中的 Item。我可以更新子网格中所选项目的文本框中的数据，但是当我离开文本框时，该项目属性的子网格行在我离开文本框时不会更新。但是，如果我在网格中选择另一个项目，它将更新。当我离开文本框而不是单击网格中的另一行时，如何让它更新？

# jms - 推荐一个开源消息队列服务

> ID：10441688
> 
> 赞同：2
> 
> 时间：2012-05-04T01:54:58.480
> 
> 标签：jms, message-queue, zeromq, gearman, mq

谁能为我推荐一个开源消息队列？像 JMS、gearmand、zeroMq、Amazon SQS。Tt最好满足以下几点（非强制性）：

1.  分布式和可扩展的。
2.  支持异步消息。
3.  最好支持发布/订阅
4.  高可用，最好永不掉线。
5.  高性能
6.  最好支持php sdk，以及c/c++开发的mq server。
7.  便于使用
8.  该项目处于活动状态。

多谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T14:07:27.793

经典经纪人：

*   **Apache ActiveMQ——**它是来自 Apache 的 JMS 代理实现。用 Java 编写。
*   **RabbitMQ** — 用 Erlang 编写的流行 AMQP 代理实现。
*   **StormMQ** — 用 Ja​​va 编写的 AMQP 代理。RabbitMQ 的直接替换（不需要更改客户端）。
*   **Apache Qpid** — AMQP 代理，RabbitMQ 的另一种替代方案。用 Java 和 C++ 编写。

上面还提供 HTTP (REST API)、XMPP 和 STOMP 传输。

其他的东西：

*   **ZeroMQ——**这不是一个代理，而是一个库。允许[代理或无代理架构](http://www.zeromq.org/whitepapers:brokerless)。非常轻巧，用途广泛且速度非常快。用 C++ 编写。
*   **Amazon SQS** — 缺乏其他人的功能。诸如消息之类的尴尬限制不能保证按顺序进行，也不能保证只传递一次。没有发布/订阅架构。仅限与 AWS 结合使用。相当高的延迟。

* * *

> 1.  分布式和可扩展的。——**以上所有**
> 2.  支持异步消息。——**以上所有**
> 3.  最好支持发布/订阅——**除了 SQS**
> 4.  高可用，最好永不掉线。—**全部，部分取决于设置**
> 5.  高性能——**所有方面都在吞吐量方面，而在延迟方面则更少**
> 6.  最好支持 php sdk，——**以上所有**，*PHP内置了[AMQP](http://php.net/manual/en/book.amqp.php)和[STOMP](http://php.net/manual/en/book.stomp.php)客户端，[ZMQ](http://www.zeromq.org/bindings:php)和[SQS](https://aws.amazon.com/sdkforphp/)有特定的绑定。*
>     和 c/c++ 开发的 mq 服务器—— **只有 ZeroMQ，但它不是真正的服务器**
> 7.  易于使用——**以上所有**
> 8.  该项目处于活动状态。——**以上所有**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:02:18.897

ActiveMQ 符合要求。但它不是 C++

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:28:54.930

ActiveMQ 是最好的。还有对 C++ 的支持...参考[CMS](http://activemq.apache.org/cms/)

# php - Codeigniter 会话不适用于所有控制器

> ID：10441690
> 
> 赞同：1
> 
> 时间：2012-05-04T01:55:23.403
> 
> 标签：php, codeigniter, session, controller, global

允许在我的所有控制器中使用会话的最佳方法是什么？我认为有几种方法可以做到：

1）将（）会话定义为全局变量。我听说这不是最好的方法
2）设置一个通用的 MY_controller 并将所有其他控制器扩展到它。在那里设置会话，这将使它们在所有类中都可用
3) 与将 &get_instance() 添加到每个控制器顶部的 __constructor() 函数有关的
事情 什么是在所有类中设置会话的最佳方式控制器？

我无法使用任何这些方法。任何想法都会有所帮助。谢谢

**顺便说一句，问题在于 codeigniter 不喜欢同时发出 ajax 请求。它们相互干扰，会话数据被删除。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T02:19:48.483

设置会话后：

```
$this->session->set_userdata('name', 'value'); 
```

**你可以在任何地方**调用它：

```
$this->session->userdata('name'); 
```

但是，要使会话正常工作，您需要先手动初始化 Session 类！这可以通过调用此函数来完成：

```
$this->load->library('session'); 
```

或者你可以让 CodeIgniter[自动加载](http://codeigniter.com/user_guide/general/autoloader.html)它：

***应用程序/配置/autoload.php***

```
$autoload['libraries'] = array('session'); 
```

在控制器中设置会话是最佳实践。

我在这里没有看到任何并发症。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T04:22:50.010

也许您必须在`application/config/config.php`File中设置一些配置变量

`$config['cookie_domain']`并且`$config['cookie_path']`似乎导致了这个问题。如果是这样，那么只需将它们的值设置为“”并尝试一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-19T16:11:59.180

`$config['cookie_secure']`在`FALSE`开发模式下尝试设置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T17:57:56.077

对于任何在使用 codeigniter 会话时遇到问题的人，请不要打扰。它们是通过 cookie 完成的，如果您的网站上有很多 ajax，它们就会有很多错误。切换到本机会话。

# asp.net - 处理未在 Page_Load 上添加的动态控件的事件？

> ID：10441692
> 
> 赞同：2
> 
> 时间：2012-05-04T01:55:38.973
> 
> 标签：asp.net, postback, page-lifecycle, dynamic-controls

我在这里和网上阅读了几篇文章，这些文章告诉我，我不能简单地将新控件动态添加到页面，将其连接到处理程序，并期望它能够工作。

每次给出的解决方案是每次在Init上都需要在页面上添加动态控件。

我的问题是，我的控件没有添加到初始化页面，它们是在另一个回发之后添加的。

工作流程是这样的：

1.  页面加载
2.  用户填写文本框，单击按钮
3.  页面回帖，根据输入在button_click事件中创建动态链接控件
4.  用户单击其中一个链接控件以继续下一步。

所以如果这是我需要支持的行为，有没有办法做到这一点？它必须在步骤 2 的 button_click 中发生，因为动态控件基于用户在步骤 2 中输入的内容。

我把自己画到了这里的角落里吗？我还能如何处理这样的工作流程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:10:17.803

动态创建链接按钮后，在页面的视图状态中设置一个标志。在回发时，如果标志设置为视图状态，则重新创建链接按钮。这是一个演示：

标记：

```
<asp:Button runat="server" ID="button1" OnClick="button_Click" Text="Create button A" CommandArgument="A" />
<asp:Button runat="server" ID="button2" OnClick="button_Click" Text="Create button B" CommandArgument="B" />
<asp:PlaceHolder runat="server" ID="placeHolder"></asp:PlaceHolder> 
```

代码隐藏：

```
public partial class Default : System.Web.UI.Page
{
    private bool LinkButtonCreated
    {
        get { return ((bool?)this.ViewState["LinkButtonCreated"]).GetValueOrDefault(); }
        set { this.ViewState["LinkButtonCreated"] = value; }
    }

    private string LinkButtonCommandArgument
    {
        get { return (string)this.ViewState["LinkButtonCommandArgument"]; }
        set { this.ViewState["LinkButtonCommandArgument"] = value; }
    }

    protected override void LoadViewState(object savedState)
    {
        base.LoadViewState(savedState);
        if (this.LinkButtonCreated)
            this.CreateLinkButton(this.LinkButtonCommandArgument);
    }

    protected void button_Click(object sender, EventArgs e)
    {
        if (!this.LinkButtonCreated)
        {
            string commandArgument = ((Button)sender).CommandArgument;
            this.LinkButtonCreated = true;
            this.LinkButtonCommandArgument = commandArgument;
            this.CreateLinkButton(commandArgument);
        }
    }

    private void CreateLinkButton(string commandArgument)
    {
        LinkButton linkButton =
            new LinkButton
            {
                ID = "linkButton",
                Text = "Click me",
                CommandArgument = commandArgument,
            };
        linkButton.Click += this.linkButton_Click;
        this.placeHolder.Controls.Add(linkButton);
    }

    private void linkButton_Click(object sender, EventArgs e)
    {
        LinkButton linkButton = (LinkButton)sender;
        linkButton.Text = "I was clicked! Argument: " + linkButton.CommandArgument;
    }
} 
```

# android - 使用 MediaStore 将图像存储到特定文件夹

> ID：10441693
> 
> 赞同：3
> 
> 时间：2012-05-04T01:56:10.007
> 
> 标签：android, android-sdcard, android-mediascanner

我正在搜索如何使用 mediastore 添加图像，因为我目前正在手动使用

```
final String myBitmap = "MyImage_"+ mFileDate + ".png";
File fileNumber = new File(APP_FILE_PATH, myBitmap);
out = new FileOutputStream( fileNumber );
final Bitmap mBitmap =getBitmap();
mBitmap.compress( Bitmap.CompressFormat.PNG, 85, out );
out.flush(); 
```

但是我需要媒体管理器用来存储的 ID，因为它更容易管理 id 而不是路径等。我尝试以这种方式添加它：

```
ContentValues values = new ContentValues();
values.put(Images.Media.TITLE, mFileName.getName());
values.put(Images.Media.DESCRIPTION, getString(R.string.bitdraw_description));
values.put(Images.Media.MIME_TYPE, "image/png");

Uri uri = getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, values);
out = getContentResolver().openOutputStream(uri);
mBitmap.compress( Bitmap.CompressFormat.PNG, 85, out );
out.flush(); 
```

但是，这会将图像添加到保存照片的文件夹中，而不是添加到我想要的特定文件夹中。

在手册（第一部分）之后也试过这个：

```
Media.insertImage(getContentResolver(), mFileName.getPath(), mFileName.getName(), getString(R.string.description)); 
```

但这只会产生重复，因为图像首先由`outputStream`

我在这里的一个线程上找到的解决方法是调用这样的广播：

`sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse ("file://"+ Environment.getExternalStorageDirectory())));`

但这相当低效并且需要很长时间，我希望它是最快的，我很不确定这是否真的生成了 ID，如果确实如此，我怎么能让它只扫描 SD 中的特定文件夹?? 任何帮助，将不胜感激。

# java - Java Eclipse 操作系统错误

> ID：10441701
> 
> 赞同：0
> 
> 时间：2012-05-04T01:57:06.273
> 
> 标签：java, eclipse, operating-system

出于某种原因，当在 mac 或 linux 机器上编辑代码行时，Eclipse 会在代码行上抛出转换编译错误（不正确），但在运行 Eclipse 的 Windows 机器上不会导致此类问题。相关的所有 Eclipse 版本都已更新到最新版本。

```
@Override
public void mouseClicked(MouseEvent me) {
    // TODO Auto-generated method stub
    a = (me.getLocationOnScreen().x - this.getLocationOnScreen().x) / 50;
    b = (me.getLocationOnScreen().y - this.getLocationOnScreen().y) / 50;
    //System.out.println(b + "," + a); 
```

对于 getLocationOnScreen 方法，它要求在“MouseEvent me”上对 Component 进行强制转换，但不仅没有必要，在将其强制转换为 MouseEvent 以满足错误之后，它再次声称 getLocationOnScreen 对于 MouseEvent 对象是未定义的。对于使用不同操作系统的编辑器，如何忽略或修复这些类型的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:01:48.090

您确定这是操作系统错误而不是版本不匹配吗？getLocationOnScreen 存在于[Java SE 6](http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseEvent.html#getLocationOnScreen%28%29)中，但不存在于 Java [SE 5](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/event/MouseEvent.html#getLocationOnScreen%28%29)中（请注意锚无处可去）。

# ios - glReadPixels - 具有全局变量的 malloc

> ID：10441702
> 
> 赞同：0
> 
> 时间：2012-05-04T01:57:26.327
> 
> 标签：ios, memory-management, opengl-es, malloc

我只是偶然发现了一个非常棘手的问题。

在适用于 iOS 的 openGL 应用程序的上下文中，我尝试调用 glReadPixels。因此，一开始就创建/分配了一个全局缓冲区变量。我尝试在该缓冲区上使用 glReadPixel-Function，但没有成功。我没有得到任何新照片，只是废话。

所以我的问题是：为什么我需要在分配的缓冲区空间上使用 free()，当我想在最终释放它之前多次使用该内存的位置时？

参见例如：

```
int bytes = width*height*3; //Color space is RGB
if(buffer == null)
    buffer = (GLubyte *)malloc(bytes);

glReadPixels(0, 0, width, height, GL_RGB, GL_UNSIGNED_BYTE, buffer);
free(buffer); 
```

编辑：我替换了 free(bytes); 带免费（缓冲区）；

# ruby-on-rails-3 - vaccum full 和 Reindex Heroku 数据库

> ID：10441706
> 
> 赞同：1
> 
> 时间：2012-05-04T01:58:32.803
> 
> 标签：ruby-on-rails-3, postgresql, heroku

我想为托管在`Heroku`.

我不知道如何通过 heroku 命令行远程执行此操作。

我可以在我的本地 Mac osx 机器上通过以下命令在`terminal`...

```
psql database_name
>> vaccuum full;
>> \q

reindex database database_name 
```

如何在 Heroku 上为我的应用程序执行完整的 vaccuum 并重新索引我的所有表？

如果可能的话，我想在不导出数据库的情况下这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T22:50:34.377

好的，除非您付费，否则 Heroku 似乎不支持此功能。看起来我必须拉数据库，执行操作并将其推回上游！娱乐时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T03:38:34.137

您可以将 psql 交互式终端与 Heroku 一起使用。来自[Heroku PostgreSQL](https://devcenter.heroku.com/articles/heroku-postgresql#outside_connections "Heroku PostgreSQL")：

> 如果你的系统上安装了 PostgreSQL，你可以直接打开一个 psql 控制台到你的远程数据库：
> 
> `$ heroku pg:psql`
> 
> `Connecting to HEROKU_POSTGRESQL_RED... done`
> `psql (9.1.3, server 9.1.3)`
> `SSL connection (cipher: DHE-RSA-AES256-SHA, bits: 256)`
> `Type "help" for help.`
> 
> `rd2lk8ev3jt5j50=>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T21:12:46.963

您还可以在 psql 命令行或批处理文件中传入参数。第一个语句收集连接到数据库的必要详细信息。

最后的提示要求输入约束值，这将在 WHERE 列 IN() 子句中使用。记住要单引号 if 字符串，并用逗号分隔：

```
@echo off
echo "Test for Passing Params to PGSQL"
SET server=localhost
SET /P server="Server [%server%]: "

SET database=amedatamodel
SET /P database="Database [%database%]: "

SET port=5432
SET /P port="Port [%port%]: "

SET username=postgres
SET /P username="Username [%username%]: "

"C:\Program Files\PostgreSQL\9.0\bin\psql.exe" -h %server% -U %username% -d %database% -p %port% -e -v -f cleanUp.sql 
```

现在在你的 SQL 代码文件中，添加清理 SQL，vacuum full（注意拼写）。将此保存为 cleanUp.sql：

```
VACUUM FULL; 
```

在 Windows 中，将整个文件保存为 DOS BATch 文件 (.bat)，将 cleanUp.sql 保存在同一目录中，然后启动批处理文件。感谢 EnterpriseDB 的 Dave Page 提供原始提示脚本。

还有 Norto，[如果您想在脚本中添加参数，请查看我的其他帖子，这些参数可以在 SQL 中进行评估。请投票。](https://stackoverflow.com/questions/7389416/postgresql-how-to-pass-parameters-from-command-line/10337507#10337507)

# silverlight - 在 Silverlight 5 中使用 TaskSourceCompletion 时引发异常

> ID：10441709
> 
> 赞同：2
> 
> 时间：2012-05-04T01:58:46.413
> 
> 标签：silverlight, .net-4.0, wcf-ria-services, task-parallel-library

我正在尝试将 RIA 服务中使用的事件异步编程模型包装在一个任务中。

我遵循了使用 TaskCompletionSource 的标准方式并实现了以下扩展方法：

```
public static Task<IEnumerable<T>> LoadAsync<T>(this DomainContext source, EntityQuery<T> query) where T : Entity
{
    TaskCompletionSource<IEnumerable<T>> taskCompletionSource = new TaskCompletionSource<IEnumerable<T>>();

    source.Load(
        query,
        loadOperation =>
        {
            if (loadOperation.HasError && !loadOperation.IsErrorHandled)
            {
                taskCompletionSource.TrySetException(loadOperation.Error);
                loadOperation.MarkErrorAsHandled();
            }
            else if (loadOperation.IsCanceled)
            {
                taskCompletionSource.TrySetCanceled();
            }
            else
            {
                taskCompletionSource.TrySetResult(loadOperation.Entities);
            }
        },
        null);

    return taskCompletionSource.Task;
} 
```

然后我以下列方式使用它：

```
var task = _context.LoadAsync(_context.GetPlayersQuery());
task.Start();
task.Result; 
```

但问题是我收到一个 InvalidOperationException 说明“可能不会在承诺式任务上调用 Start”。我试过不启动任务，但是 loadOperation 回调永远不会触发。

谁能看到我在这里做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:34:46.397

问题解决了。在后台， DomainContext.Load() 方法已经以异步方式运行。尝试将已经异步的方法包装在任务中一定有一些冲突。

但是，即使我仍然使用下面的代码正确遵循 EAP，我仍然会收到 InvalidOperationException 的“无法在 promise 样式的任务上调用 start”

```
public static Task<IEnumerable<T>> LoadAsync<T>(this DomainContext source, EntityQuery<T> query) where T : Entity
{
    TaskCompletionSource<IEnumerable<T>> taskCompletionSource = new TaskCompletionSource<IEnumerable<T>>();

    var loadOperation = source.Load(query);
    loadOperation.Completed += (obj, args) =>
    {
        if (loadOperation.HasError && !loadOperation.IsErrorHandled)
        {
            taskCompletionSource.TrySetException(loadOperation.Error);
            loadOperation.MarkErrorAsHandled();
        }
        else if (loadOperation.IsCanceled)
        {
            taskCompletionSource.TrySetCanceled();
        }
        else
        {
            taskCompletionSource.TrySetResult(loadOperation.Entities);
        }
    };

    return taskCompletionSource.Task;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T02:26:49.177

试试这个

```
var result = await _context.LoadAsync(_context.GetPlayersQuery()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T00:30:53.933

尝试使用

`task.ContinuewWith(Action<Task<T>> continuation)`

这对我有用，因为我在使用 task.Start 时也遇到了这个异常

# java - Android，泛型和继承

> ID：10441710
> 
> 赞同：0
> 
> 时间：2012-05-04T01:58:46.700
> 
> 标签：java, android, generics

标题可能有点混乱，但这是我所面临的

我有一堂课：

```
 public abstract class BaseFragmentActivity<T> extends FragmentActivity {
    static final int PROGRESS_DIALOG = 0;
    Dialog progessDialog;

    public abstract void displayData(T output);

    @Override
    protected Dialog onCreateDialog(int id) {
        if (id == PROGRESS_DIALOG) {
            ProgressDialog progressDialog = ProgressDialog.show(this, "",
                    "Loading. Please wait...", true);
            progessDialog = progressDialog;
        }

        return progessDialog;
    }

    class PerformOPTask extends AsyncTask<Void, String, T> {
        // connector=new JSONConnector();
        Connector connector;
        String curUrl;
        Class<T> clazz;

        PerformOPTask(String url, Class<T> curClazz) {
            //connector = new UnitTestConnector();
            connector = new JSONConnector();
            curUrl = url;
            clazz = curClazz;
        }

        @Override
        protected T doInBackground(Void... params) {

            return connector.getData(URLUtils.getFormattedUrl(curUrl),clazz);
        }

        @Override
        protected void onPostExecute(T output) {
            displayData(output);

        }
    }

} 
```

然后我有一个子类：

```
public abstract class BaseListFragmentActivity<T> extends BaseFragmentActivity<T> implements OnItemClickListener, OnClickListener{

    protected ListView mList;

    /** Called when the activity is first created. */
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.table_list);
        CommonUtil.getActionBarWithBackButton(this,getLayoutInflater());
        mList=(ListView)findViewById(R.id.table_list_listView);
        mList.setOnItemClickListener(this);

    }

    public void onBackABButtonPressed(View view) {
        finish();
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

    @Override
    public abstract void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3);

} 
```

现在我正在扩展这个类，如下所示：

```
public class ListAccountsActivity<T> extends BaseListFragmentActivity<AccountData> {

    protected Acct[] mItems;
    private String[] mIcons;
    protected boolean displayHandledBySubClass=false;

    /** Called when the activity is first created. */
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);

        new PerformOPTask(getString(R.string.get_account),AccountData.class).execute();
        showDialog(PROGRESS_DIALOG);
        //.getData(URLUtils.getFormattedUrl(getString(R.string.get_account)),actData);

    }

    @Override
    public void onItemClick(AdapterView<?> lv, View view, int position, long id) {
        // super.onListItemClick(l, v, position, id);
        // Get the item that was clicked
        Acct account = (Acct) mList.getAdapter().getItem(position);
        Intent intent=new Intent(this,AccountDetailViewActivity.class);
        intent.putExtra("selectedAccount",account);
        startActivity(intent);
    }

    @Override
    public void displayData(AccountData output){

        if(displayHandledBySubClass){
            //handle display in subclass
            handleDisplayData(output);
        }
        else {
            Acct[] accountArray = new Acct[output.getAccount().size()];
            mItems = output.getAccount().toArray(accountArray);
            IWMArrayAdapter<Acct> adapter = new IWMArrayAdapter<Acct>(this, mItems);
            adapter.setIcons(mIcons);
            adapter.setArrowNeeded();
            //mList is superClassVariable
            mList.setAdapter(adapter);
            dismissDialog(PROGRESS_DIALOG);
            adapter.notifyDataSetChanged();
        }
    }

    public void handleDisplayData(T output){

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        //Toast.makeText(this, "Tapped search", Toast.LENGTH_SHORT).show();
        super.onCreateOptionsMenu(menu);
        MenuInflater menuInflater = getMenuInflater();
        menuInflater.inflate(R.menu.list_servers_menu, menu);

        // Calling super after populating the menu is necessary here to ensure
        // that the
        // action bar helpers have a chance to handle this event.
        return true;
    }

} 
```

我的问题是我可以以某种方式使**handleDisplayData**通用，以便我可以将任何类型传递给它。我要做的是尽可能重用**BaseListFragmentActivity**中的逻辑，并处理特定于**ListAccountsActivity**或其子类在该类/子类中的唯一任务。

我希望我的问题很清楚，谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:07:00.660

这是你想要的吗？

```
public abstract class ExtendedGeneric<C> extends GenericBase<DataOutput> {

boolean handleInSub;

@Override
public void displayData(DataOutput t) {
    if(handleInSub){
        handleInSubClass(getValue(t));
    }

    //handle here
    System.out.println(t);

}

protected abstract void handleInSubClass(C c);
protected abstract C getValue(DataOutput t); 
```

}

这当然只是假设数据类型 C 将来自 DataOutput t。这个想法是您还可以使 ExtendenGeneric 参数化，以便您可以使扩展它的类控制提供给 handleInSubClass 的数据类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T02:15:29.480

如果我理解正确，您希望能够使用子类中基类的特定于类型的方法，为此您需要使所有内容都通用：

```
public abstract class GenericBase<T> { ... }
public abstract class ExtendedGeneric<T> extends GenericBase<T> { ... }
public class ExtendedGenericSub<T> extends ExtendedGeneric<T> { ... } 
```

要点是，如果`ExtendedGeneric`extends `GenericBase<DataOutput>`，只有 的方法`GenericBase<DataOutput>`可以从 访问`ExtendedGeneric`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T02:14:30.797

你当然可以：

**通用父级**

```
public abstract class GenericParent<T> {

    public abstract void displayData(T t);

} 
```

**通用儿童**

```
public class GenericChild<T> extends GenericParent<GenericChild> {

    @Override
    public void displayData(GenericChild t) {
        // Do Something Here...
    }

    /**
     * Using protected better than public,
     * to prevent other class access directly to this method.
     * But make sure this the other class is not same package with this GenericChild,
     * because if it same package than the other class can access directly this method.
    **/
    protected void handleSubClass(T t){}
} 
```

**子类**

```
public class SubClass extends GenericChild<SubClass> {

    @Override
    public void handleSubClass(SubClass t){
        // Do Something Here...
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T02:36:10.890

我们在谈论这种事情吗？

```
class Vehicle {};

abstract class RoadVehicle extends Vehicle {
  abstract int getNumberOfWheels();
}

class Truck extends RoadVehicle {
  int getNumberOfWheels() {
    return 8;
  }
}

class Car extends RoadVehicle {
  int getNumberOfWheels() {
    return 4;
  }
}

abstract class GenericHandler<T extends Vehicle> {
  public abstract void displayData(T t);
}

abstract class RoadVehicleHandler<T extends RoadVehicle> 
    extends GenericHandler<T> {
  public void displayData(T t) {
    System.out.println(t.getNumberOfWheels() + " wheels");
    specialStuff();
  }

  abstract void specialStuff();
}

class CarHandler extends RoadVehicleHandler<Car> {
  void specialStuff() { /* honk horn */ }
}

class TruckHandler extends RoadVehicleHandler<Truck> {
  void specialStuff() { /* flash lights */ }
} 
```

# ios - 问题的远程排队记录（非例外）

> ID：10441714
> 
> 赞同：3
> 
> 时间：2012-05-04T02:00:08.037
> 
> 标签：ios

我们正在编写一个使用我们的 http api 的应用程序，偶尔它会遇到错误、连接失败、超时等。

我们希望，至少在测试版中，能够捕获这些事件，并以某种方式将它们转发给我们自己。由于显然许多这些问题可能是由于实际连接断开造成的，因此需要对这些事件进行排队并在连接可用时发送它们。

我尝试在谷歌上搜索答案但无济于事，遇到了一堆捕获异常的解决方案，而不仅仅是随机的“事件”（实际上可能只是我们在某处记录的字符串，我们只需将所有详细信息包含在它）。

由于没有编写自己的核心数据（或其他东西）支持的队列，我不知道解决方案可能是什么。

有谁知道任何可以帮助解决这个问题的库/服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:13:04.787

您可能想研究[Testflight](https://testflightapp.com/)，或者不那么通用的[Parse](https://parse.com/)。不太确定，但也许[HockeyKit](http://hockeykit.net/)也为此提供了解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T21:43:20.613

你可以看看 Bugfender，它是我们为解决这个问题而开发的产品。我们发现，在开发应用程序时，有很多不是崩溃的问题，所以我们决定制作自己的产品来帮助我们解决这个问题。

它易于集成，您可以获得设备日志。我们的服务可以离线和在线工作，我们花了很多时间使其可靠且易于使用。

与其他产品相比，您不需要任何崩溃即可获取日志，您可以在需要时选择它们。

# arrays - 在数字序列的末尾找到一个重复序列

> ID：10441715
> 
> 赞同：6
> 
> 时间：2012-05-04T02:00:09.273
> 
> 标签：arrays, algorithm, language-agnostic, sequence, repeat

我的问题是：我有一大串数字。我知道，在某个时间点之后，它会变成周期性的——也就是说，在序列的开头有 k 个数字，然后有 m 个数字在序列的其余部分重复。作为一个更清楚的例子，序列可能如下所示： [1, 2, 5, 3, 4, 2, 1, 1, 3, 2, 1, 1, 3, 2, 1, 1, 3 , ...]，其中 k 为 5，m 为 4，则重复块为 [2, 1, 1, 3]。从这个例子中可以清楚地看出，我可以在较大的块内有重复位，所以只寻找第一个重复实例是没有帮助的。

但是，我不知道 k 或 m 是什么 - 我的目标是将序列 [a_1, a_2, ... , a_n] 作为输入并输出序列 [a_1, ... , a_k, [a_(k +1), ... , a_(k+m)]] - 基本上通过将大部分序列列为重复块来截断较长的序列。

有没有一种有效的方法来解决这个问题？此外，在计算上可能更难但更理想 - 当我生成有问题的序列时是否可以这样做，以便我必须生成最少的数量？我在这个站点上查看了其他类似的问题，但它们似乎都处理没有开始非重复位的序列，而且通常不必担心内部重复。

如果它有帮助/有用，我还可以了解我为什么要查看它以及我将使用它的目的。

谢谢！

编辑：首先，我应该提到我不知道输入序列是否正好在重复块的末尾结束。

我正在尝试解决的实际问题是为二次无理数（实际上是负 CFE）的连分数展开式 (CFE) 编写一个很好的封闭式表达式。为这些 CFE 生成任何精确度的部分商* 非常简单 - 但是，在某些时候，二次无理数的 CFE 尾部变成了重复块。我需要处理这个重复块中的部分商。

我目前的想法是：也许我可以调整一些建议的算法来使用这些序列之一。或者，也许证明二次无理数是周期性的，这将帮助我了解它们为什么开始重复，这将帮助我提出一些简单的标准来检查。

*如果我将连分数展开式写为 [a_0, a_1, ...]，我将 a_i 称为部分商。

感兴趣的人可以在这里找到一些背景信息：[http ://en.wikipedia.org/wiki/Periodic_continued_fraction](http://en.wikipedia.org/wiki/Periodic_continued_fraction)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T04:11:02.293

您可以使用[***滚动散列***](http://en.wikipedia.org/wiki/Rolling_hash)来实现线性时间复杂度和 O(1) 空间复杂度（我认为是这种情况，因为我不相信您可以拥有两个频率不是彼此倍数的无限重复序列） .

算法：您只需保留两个滚动散列，其扩展如下：

```
 _______  _______  _______
                      /       \/       \/       \
...2038975623895769874883301010883301010883301010
                      .        .        .      ||
                      .        .        .    [][]
                      .        .        .  [ ][ ]
                      .        .        .[  ][  ]
                      .        .       [.  ][   ]
                      .        .     [  . ][    ]
                      .        .   [    .][     ]
                      .        . [      ][      ]
                      .        [       ][       ] 
```

在整个序列中继续这样做。第一遍将仅检测对于某个 n 值重复 2*n 次的重复。但这不是我们的目标：我们在第一遍中的目标是检测所有可能的周期，这就是这样做的。随着我们执行此过程的顺序，我们还跟踪我们需要稍后检查的所有相对黄金时段：

```
periods = Set(int)
periodsToFurthestReach = Map(int -> int)

for hash1,hash2 in expandedPairOfRollingHashes(sequence):
    L = hash.length
    if hash1==hash2:
        if L is not a multiple of any period:
            periods.add(L)
            periodsToFurthestReach[L] = 2*L
        else L is a multiple of some periods:
            for all periods P for which L is a multiple:
                periodsToFurthestReach[P] = 2*L 
```

在这个过程之后，我们有一个所有时期的列表以及它们已经达到了多远。我们的答案可能是范围最广的答案，但我们会检查所有其他时期的重复（很快，因为我们知道要检查的时期）。如果这在计算上很困难，我们可以通过在遍历列表时修剪掉周期（停止重复）来进行优化，就像 Eratosthenes 的筛子一样，通过保留我们下一个期望周期重复的优先级队列。

最后，我们再次检查结果以确保没有哈希冲突（即使有，也不太可能，黑名单并重复）。

在这里，我假设您的目标是最小化非重复长度，而不是给出可以进一步分解的重复元素；您可以修改此算法以查找所有其他压缩（如果存在）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T22:39:11.340

因此，ninjagecko 为我提出的问题提供了一个很好的工作答案。非常感谢！然而，我最终找到了一种更有效、基于数学的方法来处理我正在研究的特定情况——也就是说，为二次无理数的连分数展开写出一个封闭形式的表达式。显然，该解决方案仅适用于这种特定情况，而不是我询问的一般情况，但我认为将其放在这里可能会很有用，以防其他人有类似的问题。

基本上，我记得当且仅当它的连续分数展开是纯周期性的时，二次无理数会被约简——例如，它从一开始就重复，没有任何前导项。

当你计算一个数字 x 的连分数展开式时，你基本上将 x_0 设置为 x，然后你形成你的序列 [a_0; a_1, a_2, a_3, ... ] 通过定义 a_n = floor(x_n) 和 x_(n+1) = 1/(x_n - a_n)。通常，您只需继续此操作，直到达到所需的精度。然而，为了我们的目的，我们只是运行这个方法，直到 x_k 是一个简化的二次无理数（如果它大于 1 并且它的共轭在 -1 和 0 之间，就会发生这种情况）。一旦发生这种情况，我们就知道 a_k 是我们重复块的第一项。然后，当我们发现 x_(k+m+1) 等于 x_k 时，我们知道 a_(k+m) 是我们重复块中的最后一项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T02:06:22.830

从右边搜索：

*   a_n == a_n-1
*   (a_n,a_n-1) == (a_n-2,a_n-3)
*   ...

这显然是 O(m^2)。唯一可用的界限似乎是 m<n/2，所以它是 O(n^2)

这对您的应用程序是否可接受？（我们是在为您做功课，还是这里存在实际的现实问题？）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T02:46:50.763

[本页](http://www.gabrielnivasch.org/fun/cycle-detection)列出了几种良好的循环检测算法，并给出了 C 中算法的实现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T05:09:25.887

考虑重复多次后的序列。它将结束，例如 ...12341234123412341234。如果您将字符串的重复部分直到最后一个重复循环之前，然后将其滑动该循环的长度，您会发现序列末尾的子字符串和同一个子串向左滑动了一段与其长度相比很小的距离。

相反，如果你有一个字符串，其中 a[x] = a[x + k] 表示大量 x，那么你也有 a[x] = a[x + k] = a[x + 2k] = a [x + 3k]... 因此，与它的长度相比，当滑动一段短距离时匹配自身的字符串必须包含重复。

如果您查看[http://en.wikipedia.org/wiki/Suffix_array](http://en.wikipedia.org/wiki/Suffix_array)，您将看到您可以构建字符串的所有后缀列表，按排序顺序、线性时间以及一个告诉您如何操作的数组每个后缀按排序顺序与前一个后缀有许多相同的字符。如果您寻找具有最大值的条目，这将是我的字符串候选 ..1234123412341234，并且两个后缀的起点之间的距离将告诉您序列重复的长度。（但实际上某种滚动哈希搜索，如[http://en.wikipedia.org/wiki/Rabin-Karp](http://en.wikipedia.org/wiki/Rabin-Karp)可能更快更容易，尽管有相当可编码的线性时间后缀数组算法，例如 Karkkainen 和 Sanders 的“简单线性工作后缀数组构造”）。

假设当可用字符数为 8、16、32、64、....2^n 时应用此算法，并且最终在 2^p 处找到重复。你在早期阶段浪费了多少时间？2^(p-1) + 2^(p-2) + ...，总和约为 2^p，因此重复搜索只是一个恒定的开销。

# javascript - try 块中的 JavaScript 范围

> ID：10441717
> 
> 赞同：37
> 
> 时间：2012-05-04T02:00:17.700
> 
> 标签：javascript, scope

假设我正在尝试执行这个 JavaScript 片段。假设未声明的变量和方法在上面的其他地方声明，`something`并且`somethingElse`评估为 boolean-true。

```
try {
    if(something) {
        var magicVar = -1;
    }

    if(somethingElse) {
        magicFunction(magicVar);
    }
} catch(e) {
    doSomethingWithError(e);
} 
```

我的问题是：范围是什么，可以像我所做的那样`magicVar`传递它吗？`magicFunction`

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2016-09-30T19:07:20.717

关于Javascript如何处理这个问题还有很多其他好的答案`var`，但我想我会解决这种`let`情况......

`let`如果在块内定义了变量`try`，它将不在`catch`(or `finally`) 块内的范围内。它需要在封闭块中定义。

例如，在以下代码块中，控制台输出将为“Outside”：

```
let xyz = "Outside";

try {
    let xyz = "Inside";

    throw new Error("Blah");
} catch (err) {
    console.log(xyz);
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-04T02:03:57.027

Javascript具有函数范围。这意味着`magicvar`它将从它声明的函数的开头一直存在到该函数的结尾，即使该语句从未执行过。这称为**变量提升**。函数声明也会发生同样的事情，这又称为**函数提升**。

如果变量是在全局范围内声明的，那么它对*所有东西都是*可见的。这就是为什么全局变量在 Javascript 中被认为是邪恶的部分原因。

您的示例将传递`undefined`给`magicFunction`if`something`为 false，因为`magicVar`尚未分配给任何东西。

虽然这在技术上是有效的 Javascript，但它通常被认为是糟糕的风格，并且不会通过像 jsLint 这样的风格检查器。像这样极其不直观的 Javascript 将在没有任何错误的情况下执行

```
alert(a); //alerts "undefined"
var a; 
```

**POP QUIZ**：以下代码有什么作用？

```
(function() {
  x = 2;
  var x;
  alert(x);
})();
alert(x); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-04T02:03:41.533

*   在 javascript 中，只有函数会创建一个新的 context -closure。
*   变量的每个定义实际上都是在其作用域顶部的变量声明和在定义所在位置的赋值。

**变量**

*   *函数范围*
*   **提升到其功能的顶部**
*   在同一范围内重新声明同名是无操作的

您可能想阅读[**MDN 范围备忘单**](https://developer.mozilla.org/en/JavaScript/Reference/Scope_Cheatsheet)

由于`hoisting`您甚至可以执行以下操作：

```
function bar() {
    var x = "outer";

    function foo() {
        alert(x); // {undefined} Doesn't refer to the outerscope x
        // Due the the var hoising next:        
        x = 'inner';
        var x;
        alert(x); // inner

    }
    foo();
}

bar();​

bar();​ 
```

[**演示**](http://jsfiddle.net/gdoron/H8c4n/2/)

所以`foo`函数被转换成这样的：

```
function foo() {
    var x;
    alert(x); // {undefined} Doesn't refer to the outerscope x
    // Due the the var hoising next:        
    x = 'inner';
    alert(x); // inner
}​ 
```

> 我的问题是：magicVar 的范围是什么，可以像我所做的那样将它传递给 magicFunction 吗？

定义*好*...，是的，代码是有效的，但是如果变量声明在顶部，那么它的可读性就会降低，仅此而已。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-04T02:05:42.280

由于javascript“提升”（google it），您的变量声明代码被翻译为：

```
function yourFunction() {
  var magicVar;
  try {
      if(something) {
          magicVar = -1;
      }

      if(somethingElse) {
          magicFunction(magicVar);
      }
  } catch(e) {
      doSomethingWithError(e);
  }

} //end of your function 
```

“提升”将所有变量声明移动到函数的顶部。所以`magicVar`在函数中的任何地方都可用，但在你给它一个值之前它是未定义的。

您的变量具有函数范围。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T02:02:30.757

使用`var`，变量从函数的开头到结尾都存在，无论它们在哪里声明，或者即使实际上曾经到达过该语句。但是，它们将一直存在，`undefined`直到它们被分配另一个值。

因此，在您的情况下，如果`something`为假但`somethingelse`为真，您将调用`magicFunction`其第一个参数为`undefined`.

该`let`关键字在 Javascript 1.9 中创建并且仅在 Firefox 中可用（截至今天，2012 年 5 月 3^日，据我所知），声明具有您可能习惯的范围语义的变量。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-10T12:30:12.753

我同意变量提升和函数提升，我想强调两个重点。

*   在 Catch 参数中定义的标识符是 err/e(error) ，范围是 Catch 定义的块。

*   功能先吊装。例子 ：

    ```
     b(); // output : 3
        var b = 2;
        function b(){
         return 3;
        } 
    ```

# python - 在 Python 中绘制问题

> ID：10441718
> 
> 赞同：0
> 
> 时间：2012-05-04T02:00:27.320
> 
> 标签：python, graph, plot

编写代码以在 python 中绘制图形，但不断出现错误。

这是我当前的代码：

```
y = arange(1, 26, 1)
x = [4,1,8,6,18,2,1,7,11,0,0,1,2,9,12,2,0,5,8,13,1,2,5,0,2,0]
plot(y, x) 
```

打印出来的 y 是：

```
[ 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25] 
```

但是每当我尝试运行它时，我都会收到此错误：

```
raise ValueError("x and y must have same first dimension")
ValueError: x and y must have same first dimension 
```

我究竟做错了什么 ：（

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T02:03:24.140

您的列表长度不同：

```
>>> y
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25]
>>> x
[4, 1, 8, 6, 18, 2, 1, 7, 11, 0, 0, 1, 2, 9, 12, 2, 0, 5, 8, 13, 1, 2, 5, 0, 2, 0]
>>> len(x)
26
>>> len(y)
25 
```

由于这些可能代表一组`(x, y)`点，因此有一个没有 y 坐标的点是没有意义的。

# c# - Entity Framework .Any() 过滤器出错

> ID：10441720
> 
> 赞同：5
> 
> 时间：2012-05-04T02:01:25.803
> 
> 标签：c#, linq, entity-framework

**这是我的查询：**

```
var x = db
   .Users
   .Where(u => u.Locations.Any(l => searchedLocation.Counties.Any(c => c.LocationId == l.LocationId)); 
```

**语境：**

*   `Users`是`IQueryable<User>`。（EF 对象集）
*   `searchedLocation`是一个`Location`对象。
*   `Counties`是一个`ICollection<MiniLocation>`。

**我正在尝试做的事情：**

> 返回所有用户，其中这些位置的任何县都具有属于搜索位置的任何县的 locationId。

**例子：**

搜索纽约市 (LocationId = 1\. County1LocationId = 2)

用户：鲍勃。地点：苏活区。County1LocationId = 2。County2 LocationId = 3。

所以这是一场比赛。（因为 Soho 有一个 LocationId 为 2 的县，NYC 也是如此）

**我收到的错误：**

> 无法创建类型为“xxx.xxx.Locations.MiniLocation”的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:16:23.730

此[MSDN 页面](http://msdn.microsoft.com/en-us/library/bb896317.aspx#RefNonScalarClosures)声明不支持此构造。您可以[将此方法](http://blogs.msdn.com/b/alexj/archive/2009/03/26/tip-8-writing-where-in-style-queries-using-linq-to-entities.aspx)用于 .Net 3.5 Linq to Entities 以帮助替换使用`Any`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:27:57.093

您需要构建一个可以搜索的位置 ID 列表。

```
var idsToSearch = "1,2,3,4,5..."; 
```

然后你可以通过`Contains`以下方式使用：

```
var x = db
       .Users
       .Where(u => idsToSearch.Contains(u.LocationId)); 
```

# c++ - C++ 中运算符的返回类型是什么？

> ID：10441721
> 
> 赞同：6
> 
> 时间：2012-05-04T02:01:36.803
> 
> 标签：c++, operator-overloading

我在看C++ Primer，在重载操作一章，作者举了一个例子：

```
// member binary operator: left-hand operand bound to implicit this pointer
Sales_item& Sales_item::operator+=(const Sales_item&);
// nonmember binary operator: must declare a parameter for each operand
Sales_item operator+(const Sales_item&, const Sales_item&); 
```

然后，作者解释说：

> 当应用于算术类型时，这种差异与这些运算符的返回类型相匹配：加法产生一个右值，复合赋值返回对左侧操作数的引用。

我不太确定“ `compound assignment returns a reference to the left-hand operand`”。谁能详细说明一下，以及相关的事情，好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T02:08:02.087

这意味着您可以执行以下操作

```
a = 1; 
(a += 1) += 1; 
```

结果将是 a == 3。这是因为对 += 的最左侧调用修改`a`并返回对它的引用。然后下一个 += 对引用进行操作`a`并再次向其添加一个数字。

另一方面，普通的 + 运算符返回结果的*副本*，而不是对其中一个参数的引用。所以这意味着诸如此类的表达式`a + a = 3;`是非法的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T02:09:03.310

```
a = a + b; 
```

也是

```
a += b; 
```

这相当于

```
a.operator+= (b) 
```

operator += 支持复合赋值：

```
(a += b) += c; 
```

相当于

```
a.operator+= (b).operator+= (c); 
```

如果返回值而不是右值，则最后一行是不可能的。

考虑以下：

```
c = a + b; 
```

也是

```
c = a.operator+ (b); 
```

写作

```
a.operator+ (b) = c; 
```

没有效果，因为 a 的值没有改变。

# .net - 使用 MVVM 的带有超链接的 FlowDocument/RichTextBox

> ID：10441725
> 
> 赞同：1
> 
> 时间：2012-05-04T02:02:03.390
> 
> 标签：.net, c#-4.0, mvvm

我正在开发一些专门的日志查看器，其中我在列表视图中显示日志条目列表。

该应用程序由一个 Window 组成（实际上，使用[Catel](http://catel.codeplex.com/)，所以它是一个 DataWindow ），其中我有 UI。由于我使用的是 MVVM，因此我还创建了相应的 VM。我的模型是具有 LogEntrys 集合的日志。日志在用户交互时加载到 VM 中。

每个 LogEntry 都有一个 Message 属性，它是一些我想解析为 XAML 并将其部分转换为超链接的文本（字符串属性）。当用户单击超链接时，我想执行一些在主 VM 中定义的命令（必须在那里，因为它使用了一些属于 VM 的属性）。

最初我尝试使用 RichTextBox。由于 WPF 不支持绑定，因此我决定使用 Extended WPF Toolbox（[此处](http://wpftoolkit.codeplex.com/wikipage?title=RichTextBox&referringTitle=Home)）中的 RTB。

我创建了一个自定义`ITextFormatter`，它读取文本并构建一个`FlowDocument`（注意在`ITextFormatter`（`FlowDocument`文档参数）中传入）。在`SetText`：

```
foreach (var line in text.Split('\n'))
{
    //some manipulations
    Paragraph para = new Paragraph();
    para.Inlines.Add(new Run(manipulatedText1));
    para.Inlines.Add(CreateHyperLink(manipulatedText2));
    document.Blocks.Add(para);
} 
```

该`CreateHyperLink`函数应该构建`Hyperlink`并设置它的命令和参数：

```
private Hyperlink CreateHyperlink(string text)
{
    var hLink = new Hyperlink(new Bold(new Run(text)));
    hLink.TargetName = text;
    //Attach a command and set arguments (target etc)
    hLink.Command = ???
    hLink.TargetName = text;
    //Do some formatting
    return hLink;
} 
```

这使我进入了一个阶段，我在 RTB 中看到了我的格式化内容，`ListView`但它们只是带下划线，表现为常规文本并且没有任何操作。[（在这里](http://wpftoolkit.codeplex.com/discussions/354338)发布了问题，但还没有答案）。

然后，当我试图找到解决方案时，我偶然发现了`FlowDocumentScrollViewer`. 我创建了一个`IValueConverter`解析文本（消息）并使用超链接构建文档的文件。这似乎是一个稍微简单和更清洁的解决方案。使用这种方法，我得到了格式化的消息显示，并且超链接被识别为这样（以蓝色显示并作为一个“整体”单元出现），但仍然无法让命令触发。

因此我有两个问题：

1.  哪个控件是更好的选择，或者使用每个控件的优缺点是什么？`FlowDocumentScrollViewer`本质上是只读的，并且可能支持更好的格式（？），但它确实给`ListView`用鼠标滚动时带来了一些问题（当超过 a 时`FlowDocumentScrollViewer`，它不会滚动列表，也许可以修复）

2.  如何将命令从 VM 传递到超链接并让它执行？我认为应该进行一些绑定，但不确定如何/在哪里。在渲染 FlowDocument 时，我尝试在两者中创建`ITextFormatter`并`IValueConverter`使用`ICommand` `DependancyProperty`它的值，但要么它不合法（因为实例是作为静态资源创建的），要么我没有正确绑定它

我试过（在）：

```
<local:TextToFlowDocumentConverter 
         x:Key="textToFlowDocumentConverter" 
         HyperlinkCommand="{Binding NavigateDnHyperlinkCommand, 
         RelativeSource={RelativeSource FindAncestor, 
         AncestorType={x:Type catel:DataWindow}}, Path=DataContext}"/> 
```

我想我可以在 VM 上实例化格式化程序/转换器，但这不是正确的 MVVM ...

顺便说一句，我也尝试在解析时“硬编码”链接（`CreateHyperLink`上面）

```
hLink.RequestNavigate += new System.Windows.Navigation.RequestNavigateEventHandler(hLink_RequestNavigate); 
```

这对两个控件都不起作用

另外，我在 XAML 中设置了`Hyperlink.Click`and `Hyperlink.RequestNavigate`（附加属性（？））并将它们放在后面的 Window 代码中 - 这确实有效（注意：在 RTB 的情况下，您必须设置`IsDocumentEnabled="True"`and `IsReadOnly="True"`！）

谢谢，

托默

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:49:03.343

正如我上面所写，我试图通过附加行为来做到这一点。不幸的是，我无法让它工作，但我认为这是我缺少的一些细微差别，也许有人可以想出它 - 而且，也许这个答案可能有用。

所以，我试图做的是创建一个新类，该类`AttachedProperty`可用于更新`FlowDocument`Hyperlink.Command：

```
/// <summary>
/// RichTextBox helper class to allow bind command to hyperlinks in RichTextBox.Document
/// </summary>
public class RichTextBoxHyperlinkHelper
{
    /// <summary>
    /// Get the Command associated with DependencyObject
    /// </summary>
    /// <param name="obj">The DependencyObject</param>
    /// <returns>ICommand associated with this DependencyObject</returns>
    public static ICommand GetHyperlinkCommand(DependencyObject obj)
    {
        return (ICommand)obj.GetValue(HyperlinkCommandProperty);
    }

    /// <summary>
    /// Set the ICommand associated with this DependencyObject (RichTextBox)
    /// </summary>
    /// <param name="obj">The DependencyObject (RichTextBox)</param>
    /// <param name="value">The new ICommand value</param>
    public static void SetHyperlinkCommand(DependencyObject obj, ICommand value)
    {
        obj.SetValue(HyperlinkCommandProperty, value);
    }

    // Using a DependencyProperty as the backing store for HyperlinkCommand.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty HyperlinkCommandProperty =
        DependencyProperty.RegisterAttached("HyperlinkCommand", typeof(ICommand), typeof(RichTextBoxHyperlinkHelper),
        new FrameworkPropertyMetadata((RichTextBox)null, new PropertyChangedCallback(OnHyperlinkCommandSet)));

    /// <summary>
    /// A method to run when command is set initialy
    /// </summary>
    /// <param name="d"></param>
    /// <param name="e"></param>
    private static void OnHyperlinkCommandSet(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var rtb = d as RichTextBox;

        if (rtb == null)
        {
            //TODO: Throw?
            return;
        }

        FixHyperLinks(rtb);
    }

    private static void FixHyperLinks(RichTextBox rtb)
    {
        //Get the command attached to this RichTextBox
        var command = GetHyperlinkCommand(rtb);

        if (command != null && rtb.Document != null)
        {
            //Add event handler for data context changed - in which case the .Document may change as well
            rtb.DataContextChanged += new DependencyPropertyChangedEventHandler(rtb_DataContextChanged);

            //Traverse the document, find hyperlinks and set their command
            Queue<Block> blocks = new Queue<Block>();   //Use queue instead of recursion...
            rtb.Document.Blocks.ToList().ForEach(b => blocks.Enqueue(b));   //Add top level blocks

            while (blocks.Count > 0)    //While still blocks to process
            {
                var currentBlock = blocks.Dequeue();    //Get block

                //If paragraph - check inlines for Hyperlinks
                if (currentBlock is Paragraph)
                {
                    foreach (var item in (currentBlock as Paragraph).Inlines)
                    {
                        //If an Hyperlink - set its command
                        if (item is Hyperlink)
                        {
                            (item as Hyperlink).Command = command;
                        }
                        //TODO: process child inlines etc
                    }                       
                }

                //TODO: Process other types of blocks/child blocks
            }

            //Make sure document is enabled and read only so Hyperlinks work
            rtb.IsDocumentEnabled = true;
            rtb.IsReadOnly = true;
        }
    }

    //On case of data context change - rehook the command (calling FixHyperLinks)
    static void rtb_DataContextChanged(object sender, DependencyPropertyChangedEventArgs e)
    {
        var rtb = sender as RichTextBox;

        if (rtb != null)
            FixHyperLinks(rtb);
    }
} 
```

然后，据说，它是这样使用的：

```
<ext:RichTextBox Text="{Binding Message}" IsDocumentEnabled="True" IsReadOnly="True"
                 local:RichTextBoxHyperlinkHelper.HyperlinkCommand="{Binding RelativeSource=
                 {RelativeSource Mode=FindAncestor, AncestorType={x:Type ListView}},
                 Path=DataContext.NavigateDnHyperlinkCommand, NotifyOnSourceUpdated=True}">
    <ext:RichTextBox.TextFormatter>
        <local:TextDnRtfFormatter />
    </ext:RichTextBox.TextFormatter>
    <ext:RichTextBox.Resources>
        <Style TargetType="{x:Type Paragraph}">
            <Setter Property="Margin" Value="2"/>
        </Style>                                    
    </ext:RichTextBox.Resources>
</ext:RichTextBox> 
```

单步执行代码时，我确实看到超链接的命令已正确设置为从 VM 绑定的命令，但单击超链接时没有任何反应。

毫无价值的是，如果我将内部命令设置为内部`TextDnRtfFormatter`定义的命令，它确实会触发旧命令，即使它应该被设置在`RichTextBoxHyperlinkHelper`.

此外，我还尝试使用行为来解决这个`EventToCommand`问题`TextDnRtfFormatter`（`IMessageMediator`

# java - Android SQLite CursorIndexOutOfBounds

> ID：10441728
> 
> 赞同：3
> 
> 时间：2012-05-04T02:02:18.240
> 
> 标签：java, android, sqlite

由于某种原因，当找不到我输入的用户名时，应用程序崩溃了。但是，当找到用户名时，它似乎运行完美。我什至检查返回的游标是否== null。这是代码

```
 public boolean isUserAuthenticated(String username, String password) {
    // TODO Auto-generated method stub
    boolean authenticated = false;
    String[] columns = new String[] {LOGIN_USERNAME, LOGIN_PASSWORD};
    String sqlUsername = "\"" + username + "\"";
    Cursor c = ourDatabase.query(LOGIN_TABLE, columns, LOGIN_USERNAME + "="+ sqlUsername, null, null, null, null);
    if (c != null) {
        c.moveToFirst();
        String passwordAttachedToUsername = c.getString(1);
        if(passwordAttachedToUsername.equals(password)) {
            authenticated = true;
        }
    }

    return authenticated;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T02:14:27.860

您的 Cursor 对象可能不为空，但其结果集的大小为 0。而不是：

```
if (c != null) {
    ...
} 
```

尝试：

```
if (c.getCount() > 0) {
    ...
} 
```

此外，由于提到 @mu 太短，您可以在条件中使用 c.moveToFirst() 的返回值：

```
if (c.moveToFirst()) {
    String passwordAttachedToUsername = c.getString(1);
    if (passwordAttachedToUsername.equals(password)) {
        authenticated = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T02:19:50.727

首先，条件应该是：

```
if (c != null && c.getCount() > 0) 
```

二、可以重构

```
String passwordAttachedToUsername = c.getString(1);
if(passwordAttachedToUsername.equals(password)) {
    authenticated = true;
    } 
```

用这个代替：

```
authenticated = password.equals(c.getString(1)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T02:23:28.650

改变：

```
if (c != null) {
    c.moveToFirst();
    ...
} 
```

至

```
if (c != null && c.moveToFirst()) {
    ...
} 
```

`c != null`如果光标的大小大于 0 ，则返回 true 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-01T07:38:53.833

```
if (cursor != null && cursor.getCount() > 0) {
if (c.moveToFirst()) {
          String passwordAttachedToUsername = c.getString(1);
          if(passwordAttachedToUsername.equals(password)) {
           authenticated = true;
    }}
                    // your logic goes here
                } else {
                    Toast.makeText(getApplicationContext(), "No Record Found", 1000).show();
                } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T02:18:25.830

该`query`命令将始终返回一个游标，因此您对 null 的测试将始终失败。您需要检查游标包含使用的计数`cursor.getCount()`

# c# - 文本字段不显示在 PDF 中

> ID：10441729
> 
> 赞同：0
> 
> 时间：2012-05-04T02:02:23.093
> 
> 标签：c#, pdf, itextsharp

我想知道以下是否是已知问题以及是否有解决方案。在谷歌上搜索后，我找不到任何有类似问题的人。

我正在使用 c#/itextsharp 创建 PDF

我已经从我创建的 5 个不同模板中成功创建了大约 5 个 pdf；然而，这个给了我很多[tzaras](http://www.merriam-webster.com/dictionary/tsuris)。

我`text field`在模板上有一个名为`PractitionerName1`.

我正在向其中插入数据，如下所示：

```
string firstName1 = dr["my:PractitionerFirstName1"].ToString();
            string lastName1 = dr["my:PractitionerLastName1"].ToString();
string fPhysician1 = firstName1 + " " + lastName1;
 cPdf.InsertTextFieldValue("PractionerName1", fPhysician1); 
```

不起作用。

当我创建一个名为的新文本字段`Text1`并执行相同的操作但执行以下操作时：

```
cPdf.InsertTextFieldValue("Text1", fPhysician1); 
```

有用。

如果我在模板上将名称更改为`Text1`to`PractitionerName1`则它不起作用。

没有错误信息。

我究竟做错了什么？如何正确地将数据插入到我的`PractitionerName1`字段中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:36:30.633

也许这是您问题中的拼写错误，但您用于设置字段的名称看起来与字段名称不匹配。

```
cPdf.InsertTextFieldValue("PractionerName1", fPhysician1); 
```

应该

```
cPdf.InsertTextFieldValue("PractitionerName1", fPhysician1); 
```

# java - Java ME：如何擦除设备中的所有信息

> ID：10441733
> 
> 赞同：0
> 
> 时间：2012-05-04T02:03:21.670
> 
> 标签：java, mobile, java-me

我在 Java ME 中工作。我正在尝试以编程方式从我的设备中删除所有用户信息，例如消息和联系人。我不确定我可以使用哪些 API 来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:34:12.143

您可以使用[JSR-75 (PIM)](http://developers.sun.com/mobility/apis/articles/pim/index.html)管理的联系人列表。您可以使用此 API 删除联系人，但可能需要用户对每个联系人的许可。

无法访问本机消息收件箱。

# c# - 如何生成大于 bigint 大小的连续数字列表？

> ID：10441736
> 
> 赞同：2
> 
> 时间：2012-05-04T02:03:41.547
> 
> 标签：c#

这类似于使用一些嵌套的 for 循环生成一个连续数字列表，将数字加 1，然后显示该数字。我遇到的麻烦是弄清楚如何在不使用科学记数法显示数字的情况下生成介于 10^26 和 10^27 之间的连续数字列表。我正在考虑使用 int[26]，但我不知道如何将 1 添加到更高的索引（比如 i[25]）一旦我达到 10 并继续计数直到达到 10^27。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:49:44.213

如果除了增加数字之外您没有进行任何计算，请考虑将其表示为字符串并以与手动算术相同的方式加 1：

*   将字符串初始化为您想要开始的任何数字。
*   在最右边的（数字）字符上加 1。
*   如果它是 <= '9' 你就完成了。
*   否则，将其设置为“0”并将左侧的下一个字符加 1。
*   重复携带过程，直到完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:37:30.833

我不确定您所说的大于 Bigint 是什么意思，您是指[System.Uint64](http://msdn.microsoft.com/en-us/library/system.uint64.aspx)还是[System.Numerics.BigInteger](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)？如果您指的是 BigInteger，则对大小的唯一限制是在`OutOfMemory`处理非常大的数字时可能引发的异常。

请注意，BigInteger 是不可变的，因此执行类似操作`myBigInt++`会创建一个新对象，并且如果在紧密循环中可能会导致性能问题。有关更多信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx#mutability)关于该主题的注释

# python - 为什么这个 LFSR 并不总是正确移动？

> ID：10441740
> 
> 赞同：0
> 
> 时间：2012-05-04T02:04:04.047
> 
> 标签：python, bit-manipulation, bit-shift, shift

我有这个 32 位 LFSR 函数：

```
def wu32(i):
    # wrap unsigned 32 bit integer
    return long(i % pow(2,32))

def iterate_lfsr(state):
    return wu32(wu32(0x00000000L - wu32(state & 0x00000001L)) & 0xd0000001L) ^ wu32(state>>1) 
```

为了测试，我把这个函数放在一起，它对输入数字执行一定数量的 LFSR 迭代（以及位移），然后以十六进制格式打印数字。

```
def i_lfsr(state,times):
    cstate = state
    for i in range(times):
        cstate = iterate_lfsr(cstate)
    print str(hex(-1 & cstate)) 
```

* * *

我正在使用数字 0x12345678 测试这个 LFSR，并且每次将其移动一个字节：

```
>>> i_lfsr(0x12345678L,0)
0x12345678L
>>> i_lfsr(0x12345678L,8)
0x39123456L
>>> i_lfsr(0x12345678L,16)
0x2d791234L
>>> i_lfsr(0x12345678L,24)
0x87ad7913L
>>> i_lfsr(0x12345678L,32)
0x9727ad78L 
```

它几乎可以正常工作，但是字节被稍微修改了。注意 0x39 变成 0x79，0x2d 变成 0xad，0x12 变成 0x13，0x87 变成 0x27，0x79 变成 0x78。这不应该发生——按位移位最终应该将所有内容一次移动一个字节，同时从另一侧填充新字节。

我希望看到输出更接近以下序列（当然是一个例子）：

```
0x12345678
0xef123456
0xbeef1234
0xadbeef12
0xdeadbeef 
```

为什么字节被破坏，我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T02:11:41.310

```
return long(i % pow(2,32)) 
```

当需要精确结果时不要使用浮点数。使用 AND、OR 和移位。

# c# - 创建复选框检查序列

> ID：10441742
> 
> 赞同：1
> 
> 时间：2012-05-04T02:04:25.103
> 
> 标签：c#, loops, checkbox, sequence

您好，我正在尝试对一些复选框进行编程，以编程方式以特定顺序选中和取消选中。我知道这听起来很愚蠢，但这与我已经编写了检查事件的一些 LED 控件相对应。

我想选中一个复选框来启动这个序列并取消选中它来停止它。目前，我的 D2 复选框的选中和取消选中正常，但`do while`循环冻结了表单，因此我实际上无法取消选中循环框。我可能不应该使用`Thread.Sleep`任何一个。任何建议表示赞赏。

```
private void cycleCheckBox_CheckedChanged(object sender, EventArgs e)
        {
            do
            {
                D2.Checked = true;
                Thread.Sleep(1000);
                D2.Checked = false;
                Thread.Sleep(1000);    

            } while (cycleCheckBox.Checked);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:18:10.167

如果直接在选中的事件中调用该`Thread.Sleep`方法将在 UI 线程上运行，这就是 UI 冻结的原因。将工作推入[System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)（假设这是一个 WinForms 应用程序）：

> 实现一个以用户定义的时间间隔引发事件的计时器。此计时器针对在 Windows 窗体应用程序中的使用进行了优化，并且必须在窗口中使用。

基于您的问题的示例：

```
Timer _timer;

private void cycleCheckBox_CheckedChanged(object sender, EventArgs e)
{
    if(_timer == null )
    {
        _timer = new Timer();
        _timer.Interval = 1000; // 1 second
        _timer.Tick += DoTimerWork;
    }

    if(cycleCheckBox.Checked)
    {
        _timer.Start();
    }
    else
    {
        _timer.Stop();
    }
}

private void DoTimerWork(object obj, EventArgs args) 
{
    D2.Checked = !D2.Checked;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:25:34.147

我不知道这是否对你有用，但我要做的是在 1000 毫秒时拖入一个计时器控件，并使用一种方法来确定当前应该检查哪个复选框，方法是使用在某个点循环到 0 的整数并在每个滴答声中递增。

# django - 在按钮单击上添加文本字段并使用 django 打包到 jsonfield

> ID：10441743
> 
> 赞同：3
> 
> 时间：2012-05-04T02:04:28.617
> 
> 标签：django, json

我的 django 项目中有一个 jsonfield，我想知道如何使用按钮来添加文本字段

例如：

我有一个步骤列表，我想单击一个按钮来添加一个步骤（类似于在电子邮件中添加附件），然后我想将所有这些打包到一个 jsonfield

所以我的两个问题是

如何通过按钮添加文本字段以及如何将文本字段打包到 jsonfield

非常感谢没有包含代码，因为我认为没有必要

凯蒂

编辑：添加代码：

这是我为我的食谱创建一个新食谱对象的视图。这也是处理包含 jsonfields 的表单的视图：

```
def createrecipe(request):
        if request.method == 'POST':
            form = RecipeForm(request.POST)
            if form.is_valid():
                form = RecipeForm(initial = {'original_cookbook' : request.user.cookbooks.all()[0]})
                form = form.save()

                t = loader.get_template('cookbook/create_form.html')
                c = RequestContext(request, {
                'form': form,
                })

                data = {
                'replace': True,
                'form': t.render(c),
                'success': True,
                }

                json = simplejson.dumps(data)
                return HttpResponse(json, mimetype='text/plain')
            else:
                form = RecipeForm(request.POST)
                t = loader.get_template('cookbook/create_form.html')
                c = RequestContext(request, {
                    'form':form,
                })

                data ={
                    'form': t.render(c),
                    'success': False,
                }

                json = simplejson.dumps(data)
                return HttpResponse(json, mimetype='text/plain') 
```

这是我的食谱的model.py（jsonfields所在的位置）：

```
class Recipe(models.Model):
    def __unicode__(self):
        return self.name
    original_cookbook = models.ForeignKey(Cookbook)
    name = models.CharField(max_length=200)
    author = models.CharField(max_length= 100)
    picture = models.ImageField(upload_to = 'Downloads', blank=True)
    pub_date = models.DateTimeField('date published', auto_now_add=True, blank=True)
    type = models.CharField(max_length = 2, choices=TYPE_CHOICES)
    ingredients = JSONField()
    steps = JSONField()
    prep_time = models.IntegerField() 
```

这是我的帐户视图：

```
 def account(request):
        user = request.user
        if request.user.is_authenticated():

            cookbooks = user.cookbooks
            if cookbooks.all().exists():
                cookbook = cookbooks.all()[0]
                form = RecipeForm(initial = {'original_cookbook' : request.user.cookbooks.all()[0]})
                recipe_list = cookbook.recipes.all()
            else:
                raise Http404
        else:
            return HttpResponseRedirect('/accounts/login')
        t = loader.get_template('cookbook/account.html')
        c = RequestContext(request, {
            'form': form,
            'recipe_list': recipe_list
        })
        return HttpResponse(t.render(c)) 
```

这是表单的模板： create_form.html 表单的操作指向创建配方视图

```
<body>
<form action="{% url cookbook.views.createrecipe %}" method="POST" name="recipeform" id="createrecipeform">
    <table>
        {% csrf_token %}
        {{ form.as_table }}
    </table>
    <p><input type="submit" value="Submit"></p>
</form>

<form class="task-form" action="." method="POST">
    <button class=".task-add-button" value="Add Task">
    {% csrf_token %}
    {{ TaskFormSet.as_p }}
</form>
</body> 
```

这是处理 create_recipe 页面的帐户页面的模板... account.html

```
{% extends "cookbook/base.html" %}
{% load pagination_tags %}
{% load comments %}

    <h1>{{ user }}'s Cookbook</h1>

<ul>
{% block nav-cookbooks %}
<li><a class="nav-inactive" href="/cookbooks/">Cookbooks</a></li>
{% endblock %}
{% block nav-account %}
<li><a class="nav-active" href="/account/">My Cookbook</a></li>
{% endblock %}
</ul>
{% block content %}
{% autopaginate recipe_list 6 %}
    <div id="recipe_cont">
            {% for recipe in recipe_list %}
        <div class="recipe">
            <div class="button">    
            <a href="{% url cookbook.views.userrecipe recipe.id %}" style="display: none;"></a>   
            <img src="{{ STATIC_URL }}chicknbraw.jpg" alt="" height="70" width="70" style="display:inline;" />
            <h4>{{ recipe.name }}</h4>
             </div>
            <h5>{{ recipe.author }}</h5>
            <h5>Prep Time: {{ recipe.prep_time }} minutes</h5>

            <h6><a href="/addrecipe/{{ recipe.id }}">Add Recipe</a>
                <a href="/removerecipe/{{ recipe.id }}">Remove Recipe</a></h6>
        </div>
    {% endfor %}
    </div>

    <div id="popupContact" class="popup">
            <a id="popupContactClose" style="cursor:pointer;float:right;">x</a>
            <p id="contactArea">
            <h1 style="text-align:center">Create New Recipe</h1>
            {% include 'cookbook/create_form.html' %} 
            </p>
    </div>
    <div id="backgroundPopup">
    </div>  
    <div id="col2-footer">
    {% paginate %}
    <p id="recipe_order_text"> order by: <a href="/userbook/ordered/name">abc</a>|<a href="/userbook/ordered/date">date</a> 
    </div>

{% endblock %}

{% block footer %}
        <a class="create" style="cursor:pointer" >Create New Recipe</a>
{% endblock %} 
```

base.html：

```
 {% load i18n %}

    {% block doctype %}<?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE html
         PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    {% endblock %}

    {% block head %}
 <head>
        <title>{% block title %}Recipeek{% endblock %}</title>          
        <script type="text/javascript"> 
        $(document).ready(function(){
            var form = $('form#createrecipeform');
            form.submit(function(e) {
            e.preventDefault();
            console.log('ajax form submission function called successfully.');
            //form = $(this);
            console.log(form)
            var serialized_form = form.serialize();
                $.ajax({ type: "POST", 
                    url: $(this).attr('action'),
                    data: serialized_form, 
                    success: (function(data) { 
                        console.log('ajax success function called successfully.');
                        data = $.parseJSON(data);
                        if (data.success) {
                            console.log('success');
                            var newForm = data.form;
                            form.replaceWith(newForm);
                        } else {
                            console.log('failure');
                            var newForm = data.form;
                            form.replaceWith(newForm);  
                        }
                    })
                });
                return false;
            });
        });
        </script> 
    </head>
    {% endblock %}

    {% block body %}
    <body>
        {% block header %}
        <div id="header"></div>

        {% endblock %}

    <div id="left_pane">
            <div id="left_pane-container">
                <div id="logo"><img src= "/static/recipeek_logo.png" style="padding-left:10px;" /></div>
                    <div id="left_pane-items">  
                        <div id="nav_out">
                            <ul id="nav_outlist">
                                <li><a href="/aboutus">about us</a></li>
                                <li><a href="/contact">contact</a></li>
                                <li><a href="/glossary">glossary</a></li>

                            </ul>
                        </div><!--nav_out-->
                </div><!--left_pane-items-->
        </div><!--left_pane-container-->
    </div><!--left_pane-->

    {% block container %}   
    <div id="container">    
        <div id="container_header">

                    <div id="horz_nav">
                        <ol>
                            <li id="cookbook_link">{% block nav-cookbooks %}<a href="/cookbooks/">Cookbooks</a> {% endblock %}</li>
                            <li id="account_link">{% block nav-account %}<a href="/account/">My Cookbook</a>{% endblock %}</li>
                        </ol>
                    </div>
                        <div id="container_header-items">
                                <a href="{% url index %}">{% trans "Home" %}</a> | 
                                {% if user.is_authenticated %}
                                {{ user.username }} 
                                (<a href="{% url auth_logout %}">{% trans "Log out" %}</a> | 
                                <a href="{% url auth_password_change %}">{% trans "Change password" %}</a>)
                                <form action="/search/" method="get">
                                    <input type="text" name="q" id="id_q" value="Search" onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;"/>
                                </form>
                                {% else %}
                                <a href="{% url auth_login %}">{% trans "Log in" %}</a>
                                {% endif %}
                            </div><!--header-items-->

        </div><!--header-->

                <div id="col2">
                    <div id="col2-header"></div>

                            {% block content %}{% endblock %}

                </div>
            <div id="footer">
                {% block footer %}
                {% endblock %}
            </div>  
    </div>
    {% endblock %}

    </body>
    {% endblock %}  
    </html> 
```

我认为这就是所有相关代码。

我想我还应该提到我正在使用 ajax 提交表单 - 我不确定这会对如何实现这个想法产生任何影响。再次感谢汤姆的帮助：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:09:24.963

好吧，凯蒂，你要做的是在前端设置一些 JavaScript。

```
<form class="task-form" action="." method="POST">
    <button class=".task-add-button" value="Add Task">
    {{ TaskFormSet.as_p }}
</form>
<script>
var $form = $('.task-form')
  , $button = $form.find('.task-add-button')
  , template = '{{ TaskFormSet.empty_form.as_p }}'
  , num_formsets = $form.find('input[name=TOTAL_FORMS]').val();

$button.on('click', function(){
    var formset_html = template.replace('__prefix__', 'form-'+(++num_formsets);
    $(formset_html).appendTo($form); // Creates new input
    return false;
});
</script> 
```

然后，您将需要一个能够处理此列表的表单。 [https://docs.djangoproject.com/en/dev/topics/forms/formsets/](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)

```
from django.forms.formsets import formset_factory

class TaskForm(Form):
    title = CharField()
    ... any number of extra fields

TaskFormSet = formset_factory(TaskForm, can_order=True, can_delete=True, extra=1)

# In your view
instance = TaskModel.objects.get(...)

tasks_formset = TaskFormSet(request.POST, initial=instance.tasks_json)
context['TaskFormSet'] = tasks_formset

if request.method == 'POST' and tasks_formset.is_valid():
    instance.tasks_json = [task.cleaned_data for task in tasks_formset]
    instance.save() 
```

我希望这对您有所帮助，欢迎来到 StackOverflow！

# android - 如何在不单击任何按钮的情况下关闭 AlertDialog.Builder

> ID：10441747
> 
> 赞同：4
> 
> 时间：2012-05-04T02:05:38.643
> 
> 标签：android, android-alertdialog

```
AlertDialog.Builder dialog = new AlertDialog.Builder(this);
ListDialog.setPositiveButton(R.string.str_choose, new YesListener());
ListDialog.setNegativeButton(R.string.str_cancel, new NoListener());
dialog.show(); 
```

上面的代码是我的。
我可以通过单击按钮关闭对话框。
但是，如果我想在不单击任何按钮的情况下将其关闭。
我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T02:35:35.993

使用处理程序来延迟对`Dialog.dismiss()`. 这是一个例子。

在您的 中定义适当的实例变量`Activity`：

```
// number of milliseconds to wait (2 seconds, in this example).
public static final int DELAYED_RESPONSE = 2000;
// define a handler as a private instance variable in your Activity.
private Handler handler = new Handler(); 
```

使用以下代码发布一个新的，将在几毫秒`Runnable`后关闭您的对话框：`DELAYED_REPONSE`

```
handler.postDelayed(new Runnable() {
    @Override
    public void run() {
        dismissDialog();
    }
}, DELAYED_RESPONSE); 
```

请注意，此代码假定您`Activity`实现了一个方法，该方法`dismissDialog()`将相应地关闭您的对话框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T02:12:11.660

最好的方法是`Handler`在你的 UI 线程上创建一个 looper，然后发布一个延迟`Message`或`Runnable`执行的`Dialog.dismiss()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T02:14:31.510

您可以通过这样做使用设置`setCancelable(true)`，您可以按设备的 BACK 按钮。例子：

```
AlertDialog.Builder dialog = new AlertDialog.Builder(this);
dialog.setCancelable(true).show(); 
```

# forms - 是否可以使用 Google Docs Forms 创建有限的注册表单？

> ID：10441750
> 
> 赞同：4
> 
> 时间：2012-05-04T02:05:53.370
> 
> 标签：forms, google-docs, google-apps-script

我想使用 Google Docs 创建一个活动注册表单。用户可以选择他们想参加的会议，但我需要以某种方式限制每个会议可以注册的人数。

我找不到使用标准表单创建者 GUI 执行此操作的方法，但是我认为使用 Google Apps Script 可能是可行的。我需要能够自定义加载的表单，以根据对底层电子表格的查询来删除已经满的会话。

这可能吗，还是我应该查看其他 Web 表单调查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:49:09.470

The [Google Apps Script Template](https://developers.google.com/apps-script/templates) site has some good templates to help you do something like this. In particular, the [Course Registration](https://drive.google.com/previewtemplate?id=0AjbZnjlHMPF0dEtpcTYxRlQ5UlpXZWtiV3JuRDBHYUE&mode=public#) template sounds like what you should use.

# javascript - 默认情况下如何最小化 JQuery UI Portlet

> ID：10441751
> 
> 赞同：1
> 
> 时间：2012-05-04T02:06:04.747
> 
> 标签：javascript, jquery, jquery-ui

[http://jqueryui.com/demos/sortable/#portlets](http://jqueryui.com/demos/sortable/#portlets)

在上面的链接中，有一些称为 portlet 的对象。我想要的是如何让 portlet 在默认情况下以最小化方式启动。

是否有任何可能的方法使其在初始视图中最小化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T02:20:30.527

如果您直接使用他们的示例源代码，那么您只需要更新

```
.portlet-content { padding: 0.4em; } 
```

至

```
.portlet-content { display:none; padding: 0.4em; } 
```

和

```
.prepend( "<span class='ui-icon ui-icon-minusthick'></span>") 
```

至

```
.prepend( "<span class='ui-icon ui-icon-plusthick'></span>") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T02:18:59.307

你有没有尝试过这样的事情？

```
$(function() {
    $( ".portlet-header" ).each(function(){
    $(this).toggleClass( "ui-icon-minusthick" ).toggleClass( "ui-icon-plusthick" );
    $(this).parents( ".portlet:first" ).find( ".portlet-content" ).hide();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-24T13:10:05.337

受 jaredhoyt 的启发，我正在使用以下内容：

1.  进入`<style>`部分添加 `.close { display:none; padding: 0.4em; }`
2.  进入`<script>`部分添加 `$( ".closehead" ).prepend( "<span class='ui-icon ui-icon-plusthick'></span>");`
3.  将值添加到要折叠的每个 portlet 内容的类 **中**`<div class="portlet-content close" id="detailed2">`
4.  将值**closehead**添加到要设置的每个 portlet-header 的类中加上粗 `<div class="portlet-header closehead">Details</div>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-28T08:32:07.627

最大化在页面上添加；

```
<div class="portlet-widgets">
    <a data-toggle="collapse" data-parent="#accordion1" href="#portlet1"><i class="ion-minus-round"></i></a>
</div>
<div id="portlet1" class="panel-collapse collapse in"></div> 
```

尽量减少在页面上的添加；

```
<div class="portlet-widgets">
    <a data-toggle="collapse" data-parent="#accordion2" href="#portlet2" class="collapsed"><i class="ion-minus-round"></i></a>
</div>
<div id="portlet2" class="panel-collapse collapse"></div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-05T17:10:25.667

尝试这个

```
$(document).ready(function(){
    var h = $('#action').parents(".header");
    var c = h.next('.porlets-content');
    var p = h.parent();
    c.slideToggle();
    p.toggleClass('closed');
}); 
```

“action”是包含最小化portlet 按钮的HTML 元素的ID。

看看我下面的例子：

```
<div id="action" class="actions">
  <a href="#" class="minimize"><i class="fa fa-chevron-down"></i></a>
</div> 
```

# java - Apache Pig，抑制“输出位置验证失败”“输出目录......已经存在”

> ID：10441755
> 
> 赞同：3
> 
> 时间：2012-05-04T02:07:13.530
> 
> 标签：java, hadoop, apache-pig

在从 orangeoctopus 获得有关[此问题](https://stackoverflow.com/questions/10388510/writing-one-file-per-group-in-pig-latin)的帮助后，我现在需要禁止显示消息“输出位置验证失败”“输出目录......已经存在”。我知道目录存在，我想要那样。我很确定这将是覆盖我的存储 UDF 中的某些内容的问题，但我无法弄清楚是什么。对 Java 完全陌生，所以请多多包涵。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:08:48.597

as far as i know, you cannot reuse a direct output directory. Hadoop prevents it. if i understand correctly, you're dealing with daily logs, therefore, i suggest you set a parent output directory say called output, and set your output directory in the script to be output/daily_date.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T00:54:51.830

在存储操作之前删除您的输出目录：

```
rmf $outpath; 
```

# javascript - js的dust-me等价物？

> ID：10441756
> 
> 赞同：1
> 
> 时间：2012-05-04T02:07:19.380
> 
> 标签：javascript, jquery, css, optimization

**背景：**我最近发现了很棒的工具“Dust-Me Selectors”（https://addons.mozilla.org/en-US/firefox/addon/dust-me-selectors/）——它可以让我删除我所有的没有使用的不必要的 CSS 样式。

**信息：**我目前有 13x JS 文件被缩小和压缩 - 但总体上非常臃肿。我想看看我是否可以将它们剥离一点，以帮助减少我的整体 JS 大小。

**我的问题是：** Javascript 是否有“Dust-Me 选择器”的等价物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T03:50:49.310

Google Closure Compiler 的高级编译可以做到这一点。由于语言的复杂性，它不像 CSS 那样简单。

[https://developers.google.com/closure/compiler/docs/api-tutorial3](https://developers.google.com/closure/compiler/docs/api-tutorial3)

除此之外，没有像 JS 的 Dust-Me 这样的东西。

# php - 使用 print_r 或 php 中的任何其他函数打印多个数组

> ID：10441757
> 
> 赞同：7
> 
> 时间：2012-05-04T02:07:30.890
> 
> 标签：php, arrays, printf, var-dump

我需要在我的代码中打印多个数组的内容。例如

```
   函数 performOp($n, $inputArr, $workArr)
    {
        printf("输入的函数，n的值为%d", $n);
    print_r($inputArr);
    print_r($workArr);
        $宽度=0;
    }

```

现在，有没有什么办法可以写一个语句并打印两个数组，而不是写两次 print_r ？另外，如果我想在显示 Array{} 之前打印“输入数组值是”，有没有办法使用 printf 或任何其他函数来做到这一点？

我试着写

```
    printf("inputArray 的值为 %s", print_r($inputArr)
```

，但这行不通。

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T02:10:26.553

### 转储变量

您可以将多个数组传递到`var_dump()`.

```
var_dump( $array, $array2, $array3 ); 
```

例如，以下内容：

```
$array = array("Foo", "bar");
$array2 = array("Fizz", "Buzz");

var_dump( $array, $array2 ); 
```

输出这个：

```
array(2) { [0]=> string(3) "Foo" [1]=> string(3) "bar" }
array(2) { [0]=> string(4) "Fizz" [1]=> string(4) "Buzz" } 
```

请注意它如何使两个数组在输出中保持不同。

### 带有 n 参数的函数

您还可以使用一个函数，调用`func_get_args()`传入的数组：

```
function logArrays() {
  $arrays = func_get_args();
  for ( $i = 0; $i < func_num_args(); $i++ )
    printf( "Array #%d is %s", $i, print_r($arrays[$i], true) );
}

logArrays( $array, $array2 ); 
```

在这种情况下，它将输出以下内容：

```
Array #0 is Array ( [0] => Foo  [1] => bar  )
Array #1 is Array ( [0] => Fizz [1] => Buzz ) 
```

使用`json_encode()`而不是`print_r`会输出一种更易读的格式：

```
Array #0 is ["Foo","bar"]
Array #1 is ["Fizz","Buzz"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T02:10:17.523

用户[`array_merge()`](http://us3.php.net/manual/en/function.array-merge.php)组合阵列，然后您可以将它们一起打印。

# php - ajax：更新而不刷新

> ID：10441761
> 
> 赞同：1
> 
> 时间：2012-05-04T02:08:06.040
> 
> 标签：php, jquery, ajax

[http://pastebin.com/bnMaxjep](http://pastebin.com/bnMaxjep)

[http://www.vidyasocks.com/index.php](http://www.vidyasocks.com/index.php)

查看底部的代码，我想更新它，这样它就可以在不让用户刷新页面的情况下显示。我正在使用ajax来做到这一点。

我该怎么做？这是我第一次使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:24:40.493

主页会是这样的：

```
<?php session_start(); 

$_SESSION['visitcount']=0;

?>
<script>
function runcounter()
{
if (window.XMLHttpRequest)
  {
// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {
// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("counterelement").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("POST","counter.php",true);
//may need these:
var params="id=testdata";
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.setRequestHeader("Content-length", params.length);
xmlhttp.setRequestHeader("Connection", "close");
//need rest
xmlhttp.send();

setTimeout("runcounter()",1000); //refresh function every second

}
</script>
<body onload="runcounter()" >

<div id="counterelement">0</div> 
```

这将每秒更新函数（计数器）并在页面加载时运行一次。

PHP：

```
session_start();
$_SESSION['visitcount']++;
echo $_SESSION['visitcount']; 
```

# android - 通过网站上的链接将 URL 快捷方式添加到移动屏幕

> ID：10441764
> 
> 赞同：5
> 
> 时间：2012-05-04T02:08:14.903
> 
> 标签：android, iphone, asp.net, html

您知道是否可以通过网站上的链接将 URL 快捷方式添加到移动屏幕？

所以工作流程将如下所示：

1.  用户点击网站上的链接
2.  出现弹出框，要求用户命名快捷链接
3.  用户单击创建，并使用默认图标将快捷方式添加到移动设备的主屏幕。

我有兴趣知道这是否适用于 iphone 和 android 设备。我已经搜索了一段时间，但找不到任何关于此的信息...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:30:04.203

目前这是不可能的。您只能指定要添加到主屏幕的图标，但不能直接通过 javascript 添加快捷方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T02:13:33.517

在iphone中你可以这样[做](http://browsers.about.com/od/howtousemobilebrowser1/ss/iphonehomeicons.htm)

在android中你可能[会这样做](http://www.youtube.com/watch?v=cb7aCMspNUg)

# html - HTML 绝对位置是否为其子项创建新的定位系统？

> ID：10441767
> 
> 赞同：0
> 
> 时间：2012-05-04T02:08:34.763
> 
> 标签：html, css, css-position

1.  据我所知，绝对定位元素（.egspan style="position:absolute"）将根据其祖先的位置上下文进行定位，但是这个绝对定位元素不会为其子元素创建新的定位系统，对吗？ ？？？

2.  如果#1 是正确的，有人能告诉我为什么允许在本文档中将父级设置为绝对位置吗？（只需在引用中准确搜索这一行，您就会看到相关段落“将父容器指定为位置：相对或位置：绝对。” [http://phrogz.net/css/vertical-align/index.html](http://phrogz.net/css/vertical-align/index.html)

该链接中的父级必须是“相对”正确的，但不是绝对的，为什么它说绝对可以？因为只有相对创建新的定位上下文，所以在那个链接项目符号 #3 中，前 50% 不应该工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:36:32.480

(1)**不**正确。定义了定位的元素将相对于最近的 ascestor 定位，该 ascestor 的位置设置为静态以外的任何东西（默认值）。

来自：[http](http://www.w3.org/TR/CSS2/visuren.html#absolute-positioning) ://www.w3.org/TR/CSS2/visuren.html#absolute-positioning ：

> 在绝对定位模型中，一个盒子相对于它的包含块显式地偏移。....一个绝对定位的盒子为正常流子和绝对（但不是固定）定位的后代建立一个新的包含块

还要注意：相对定位和固定定位的元素也会为绝对定位的元素建立新的包含块。

# c# - 使用图片框作为按钮，如何忽略/禁用双击事件？

> ID：10441768
> 
> 赞同：0
> 
> 时间：2012-05-04T02:08:35.073
> 
> 标签：c#, winforms, visual-studio-2008, object, windows-ce

我在使用图片框作为按钮时遇到了一些困难。我想要自定义按钮图形，而不是使用普通的 Windows 窗体 Button 控件。

它工作得很好，除了快速按下单个按钮时按钮似乎滞后。我希望每次单击图片框时立即调用 OnClick 方法，但它似乎正在注册一个双击事件，即使我没有使用该事件。

简短的版本是我想：

*   （理想）禁用双击事件，因为这似乎是控件在每次交替单击图片框时等待的内容，而我从不使用它。或者，
*   （可接受）编写一个通用的 DoubleClick 事件，我可以将其用于我计划用作按钮的所有图片框。

我确实编写了一个测试程序，它表明这实际上是正在发生的事情。我编写了一个使计数器加 1 的 MouseUp 事件，并且还添加了一个 OnClick，即使它使不同的计数器加 1。当快速单击链接到这些事件的图片框时，MouseUp 计数器正好是 OnClick 计数器的两倍。

然后我添加了一个调用 OnClick 事件的 DoubleClick 事件。这虽然不理想，但很好地解决了这个问题。如果有办法编写所有按钮都可以使用的通用 DoubleClick 事件，我认为这是可以接受的。

现在我的 DoubleClick 事件只是

```
 private void pb_DoubleClick(object sender, EventArgs e)
    {
        pbOK_Click(sender, e);  //This needs to be generic
    } 
```

我想至少用类似的东西替换 DoubleClick 行

```
 private void pb_DoubleClick(object sender, EventArgs e)
    {
        (Sender.ToString)_Click(sender, e); // Doesn't work quite like this.
    } 
```

我可以为每个图片框单独编写一个特殊的 DoubleClick 事件，但这远非理想，而且看起来很麻烦，所以如果没有必要，我宁愿不这样做。

这是我第一个发布的问题，所以感谢任何花时间阅读本文的人。任何建议将不胜感激。

编辑：这个程序是为 Windows CE 开发的，所以对象的属性和事件选项非常有限。我仍然可能遗漏了一些东西，但据我所知，按钮的属性列表直接从 GenerateMember 到 Location，没有可用的 Image 选项。对于没有在原帖中说明目标平台，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:02:16.660

它是通过 Control.SetStyle() 方法完成的，如下所示：

```
using System;
using System.Windows.Forms;

class MyButton : PictureBox {
    public MyButton() {
        this.SetStyle(ControlStyles.StandardDoubleClick, false);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T02:46:13.370

好吧，我原来的答案是垃圾。我的更新：

这是有关如何获取控件方法名称的链接： [链接](http://www.codeproject.com/Questions/72040/how-to-get-method-name-of-control-event-handler)

在链接中它有一个 Control c。要获得您的控制权（发件人），请使用以下命令：

```
PictureBox picbox = (PictureBox) sender; 
```

接下来，使用字符串调用方法（您的 class.Method.Name）：[Link](http://www.codeproject.com/Articles/19911/Dynamically-Invoke-A-Method-Given-Strings-with-Met)

现在应该可以了。希望确实如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:38:33.673

为什么不创建自己的控件？这样，您无需执行任何操作即可获得所需的行为。

```
using System.Windows.Forms;
namespace WindowsFormsApplication1
{
    public class ButtonPictureBox : PictureBox
    {
        protected override void OnDoubleClick(System.EventArgs e)
        {
            OnClick(e);
        }
    }
} 
```

我不知道这在 Windows CE 上是否可行。

如果您还想`DoubleClick`在表单设计器中隐藏事件，可以将其添加到类中：

```
 [Browsable(false)]
        public new event EventHandler DoubleClick; 
```

# javascript - 在没有服务器端的情况下构建报价数据库

> ID：10441771
> 
> 赞同：1
> 
> 时间：2012-05-04T02:09:16.553
> 
> 标签：javascript, jquery, database, quotes, business-catalyst

我想建立一个可搜索的报价数据库。这个想法是我会在搜索框中输入一个关键字，然后我会用这些关键字引用。我会为引号分配关键词。我正在使用托管 CMS (Adobe Business Catalyst)，无法使用服务器端脚本。最好的方法是什么？可以用javascript和jquery做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T02:11:46.823

您可以将所有引号静态放在 JSON 对象中的页面上，或者甚至只是作为 HTML 元素，准备显示但隐藏。然后使用您的关键字搜索它们，并取消隐藏与搜索相关的关键字。

根据您拥有的报价数量，页面可能会变大并需要很长时间才能加载，但这只是为了提高性能而需要牢记的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T03:53:07.613

我这样做的方法是构建一个报价网络应用程序。然后构建一个网络应用搜索表单，只包含一个用于按关键字搜索的文本框。BC 将自动在您的网络应用程序中搜索项目的描述或自定义字段，无论您选择哪个。

与创建 JSON 对象解析 HTML 代码相比，这将花费更少的时间。这利用了服务器端逻辑，并且仅将符合您条件的结果返回给浏览器，因此这将具有更好的性能。

唯一的缺点是结果页面对 SEO 不友好。在您要创建预定义搜索的情况下，我会将 Ajax 中的搜索结果放入您的静态页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T04:04:43.783

经过更多研究后，我发现 Business Catalyst 将允许您构建[“Web 应用程序”](http://kb.worldsecuresystems.com/868/cpsid_86860.html?bc-partner)。这可以作为数据库运行，您可以将漂亮的搜索合并到 web 应用程序中，允许您搜索关键字等。

除此之外，我相信您将需要遵循@ctcherry 的方法。

# html - 使用表单创建新页面

> ID：10441774
> 
> 赞同：0
> 
> 时间：2012-05-04T02:09:28.970
> 
> 标签：html, forms

我正在尝试为用户找到一种方法来访问我的网站并填写表格，当他们提交表格时会创建一个新网页。我想让它在管理区域中创建一个新网页，这样我就可以查看他们提交的内容，而不必浏览我的数据库。我假设这是可能的，因为这个概念并不新鲜，但是数小时的扫描谷歌让我对任何远程关闭的教程或任何类似性质的东西都空手而归。也许我根本不知道如何措辞，我对表单很陌生，但我假设这与表单动作有关。有没有人可以链接我的教程，或者有人可以给我一个快速的解释？我可以自己弄清楚工作，我只需要指出正确的方向。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:00:56.997

您将需要了解 1) 持久存储（数据库），2) 服务器端编程语言（HTML 纯粹用于创建网页结构），以及......我不知道，还有很多。我建议您实际上查看 CMS（内容管理系统），看看它是否可以让您到达您想去的地方。

如果没有位于站点和数据库之间的某种应用程序，数据库就不会以这种方式与 HTML 交互。它不一定是 PHP 应用程序，但必须有一些东西来存储和从数据库中获取数据，并且必须有一些东西来动态创建你想要的这些页面。这将是某种编程语言——或者像 Drupal 这样的内容管理系统。

（另外，不要忘记安全、支持等。你编写应用程序，你必须支持它。=）

# ssh - bitami AMI & EC2 的权限被拒绝（公钥）

> ID：10441775
> 
> 赞同：2
> 
> 时间：2012-05-04T02:09:36.630
> 
> 标签：ssh, amazon-ec2

我使用 bitami AMI 创建了一个 EC2 实例。我使用 ec2-add-keypair 实用程序创建了一个 ec2 密钥对

当我尝试`ssh -i id_rsa-my-keypair bitami@<myinstance> -v`

我收到以下错误

```
debug1: ssh_ecdsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: settwo_05012012.pem
debug1: Authentications that can continue: publickey
debug1: Trying private key: id_rsa-my-keypair
debug1: read PEM private key done: type RSA
debug1: Authentications that can continue: publickey
debug1: No more authentication methods to try.
Permission denied (publickey). 
```

有趣的是，我尝试使用相同的密钥对和 ubuntu ami 创建另一个实例，我没有问题进入。我已经排除了端口 22 的问题。我真的很想用这个bitami。帮助将不胜感激。

这是 ssh 配置中的几行

```
cat ssh_config|grep -v "#"

Host *
    SendEnv LANG LC_*
    HashKnownHosts yes
    GSSAPIAuthentication yes
    GSSAPIDelegateCredentials no 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T18:39:30.903

试试这个： ssh -i id_rsa-my-keypair bitnami@myinstance -v

用户应该是**bitnami**而不是 bitami。

# php - 无法使用 google-api-php-client 库对 UserInfo 服务进行身份验证

> ID：10441787
> 
> 赞同：0
> 
> 时间：2012-05-04T02:11:53.037
> 
> 标签：php, google-api

我正在使用 google-api-php-client 库测试 OAuth2 服务，以使用他们的 Google 帐户访问登录用户的 UserInfo。该代码取自examples/userinfo/index.php，几乎没有改变以应对我的主机。运行示例时，它通过了 Google 登录表单。当它回到我的网站时，抛出如下异常。

```
Fatal error:  Uncaught exception 'apiIOException' with message 'HTTP Error: (0) couldn't connect to host' in /home/ztbmwjhd/public_html/apis/at/googleplus/google-api-php-client/src/io/apiCurlIO.php:120
Stack trace:
#0 /home/ztbmwjhd/public_html/apis/at/googleplus/google-api-php-client/src/io/apiCurlIO.php(46): apiCurlIO-&gt;makeRequest(Object(apiHttpRequest))
#1 /home/ztbmwjhd/public_html/apis/at/googleplus/google-api-php-client/src/io/apiREST.php(55): apiCurlIO-&gt;authenticatedRequest(Object(apiHttpRequest))
#2 /home/ztbmwjhd/public_html/apis/at/googleplus/google-api-php-client/src/service/apiServiceResource.php(151): apiREST::execute(Object(apiServiceRequest))
#3 /home/ztbmwjhd/public_html/apis/at/googleplus/google-api-php-client/src/contrib/apiPlusService.php(207): apiServiceResource-&gt;__call('get', Array)
#4 /home/ztbmwjhd/public_html/apis/at/googleplus/google-plus-access.php(40): PeopleServiceResource-&gt;get('me')
#5 /home/ztbmwjhd/public_html/apis/at/googleplus/index.php(2): include_once('/home/ztbmwjhd/...')
#6 {main}
  throw in /home/ztbmwjhd/public_html/apis/at/googleplus/google-api-php-client/src/io/apiCurlIO.php on line 120 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:27:08.623

错误“HTTP 错误：(0) 无法连接到主机”通常意味着您的服务器和谷歌之间存在问题。你是通过代理连接的吗？

另外，尝试从命令行运行“curl [https://www.googleapis.com/discovery/v1/apis](https://www.googleapis.com/discovery/v1/apis) ”。

# scala - 播放 2 scala 路由控制器字节码与所有其他字节码不同

> ID：10441797
> 
> 赞同：3
> 
> 时间：2012-05-04T02:13:19.013
> 
> 标签：scala, heroku, proguard, playframework-2.0

我在 Mint 12、Play 2.0 上运行，并试图让 Proguard 工作，因为我的 Heroku slug 太大了。

所以，我正在使用[xsbt proguard 插件](https://github.com/siasia/xsbt-proguard-plugin)，它会出错，因为 ProGuard 不喜欢字节码格式 51。它是 ProGuard 4.7，所以它应该与 51 一起使用，但它不：

```
[error] {file:/(some path)/*:proguard: java.io.IOException: Can't read
[/(that path)/target/scala-2.9.1/(my app)_2.9.1-1.0-SNAPSHOT.jar]
(Can't process class [controllers/routes$ref.class]
(Unsupported version number [51.0] for class format)) 
```

所以，我看看罐子里有什么，几乎所有的行都是这样的：

```
./controllers/Application.class:  compiled Java class data, version 49.0 (Java 1.5) 
```

但是路由器看起来像这样：

```
./controllers/routes.class:       compiled Java class data, version 51.0 
```

什么会使路由器选择与其他所有目标不同的目标？

如果这很重要，我正在使用 Mint 附带的 JDK7：

```
OpenJDK Runtime Environment (IcedTea7 2.0) (7~b147-2.0-0ubuntu0.11.10.1)
OpenJDK 64-Bit Server VM (build 21.0-b17, mixed mode 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:13:16.107

`routes.class`具有不同的字节码格式，因为它是由 javac 从自动生成的

```
target/scala-{version}/src_managed/controllers/routes.java 
```

而其他类文件由 scala 编译器生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T18:24:21.717

这是减少 Heroku 上 Play 2 应用程序块大小的解决方法：
[https ://groups.google.com/d/topic/play-framework/R_BbIomWsqI/discussion](https://groups.google.com/d/topic/play-framework/R_BbIomWsqI/discussion)

# java - 对象化应用程序引擎 - 使用值列表查询嵌入式实体

> ID：10441800
> 
> 赞同：0
> 
> 时间：2012-05-04T02:13:27.417
> 
> 标签：java, google-app-engine, google-cloud-datastore, objectify

我正在使用 objectify-appengine 框架进行查询。这是我的简化问题：考虑这两个类：-

```
public class Customer {
    @Id private String email;
    @Embedded private Account Account = new Account(); // note embedded annotation
} 
```

和

```
public class Account {
   private String number;  //example: 1234
} 
```

以下查询有效并给了我 1 个客户：

```
Objectify ofy = ObjectifyService.begin();
ofy.query(Customer.class).filter("account.number = ", "1234"); 
```

**问题：**

但是，如果有一个值列表（帐号）。有没有办法在 1 个查询中获取它们？我尝试传递这样的帐号列表：

```
ofy.query(Customer.class).filter("account.number = ", myAccountNumberList); 
```

但是如果失败说： **java.lang.IllegalArgumentException：不允许值的集合。**

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:47:04.997

```
filter("account.number IN", theList) 
```

请注意，IN 只会导致 GAE SDK 为您发出多个查询，合并结果：

> IN 运算符还执行多个查询，针对指定列表中的每个项目执行一个查询，所有其他过滤器都相同，IN 过滤器替换为 EQUAL 过滤器。结果按列表中项目的顺序合并。如果一个查询有多个 IN 过滤器，它将作为多个查询执行，一个查询用于 IN 列表中的每个可能的值组合。

来自[https://developers.google.com/appengine/docs/java/datastore/queries](https://developers.google.com/appengine/docs/java/datastore/queries)

# ios - 在等待连接到 IAP 商店时显示消息

> ID：10441802
> 
> 赞同：0
> 
> 时间：2012-05-04T02:13:49.093
> 
> 标签：ios, app-store, in-app-purchase

通过不稳定的蜂窝连接，连接到 App Store 并检索我的应用 IAP 的价格可能需要 5 或 10 秒。

我想显示一条很好的（非阻塞）消息，说明它正在连接，这样用户就不会想知道为什么商店是空的或没有价格。

我知道苹果会对你所说的东西非常挑剔。

我宁愿不只是说“正在连接……”

有谁知道我们可以将应用商店称为 IAP 的指南？

“正在连接到 App Store...”

有人对此有经验吗？我不想因为一个简单的措辞而被拒绝，不得不再等两周。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:10:28.170

用户可能更关心手头的任务，而不是一些关于“连接”的技术，不管那是什么。

也许更像是“哦，你想买更多的青蛙吗？让我看看有哪些青蛙可以买到......”，“请稍等，我抓到你的青蛙并称重......”，“这是你可以买的青蛙...“， ETC。

为避免常见的拒绝，请确保在没有网络的情况下进行测试。从您的 wifi 接入点拔出网线，并确保您的 IAP 不会在中途锁定 UI。

# php - Yii 搜索逗号分隔的查询字符串中的每个术语未按预期工作

> ID：10441803
> 
> 赞同：0
> 
> 时间：2012-05-04T02:13:51.403
> 
> 标签：php, activerecord, yii

我想通过在以逗号分隔的查询字符串中搜索每个术语来完成对模型的搜索。例如，如果字符串是，`"matza,red wine"`那么我想搜索与 和 匹配的`"matza"`项目`"red%20wine"`。这是我正在使用的代码：

```
 $qString = $_GET['q'];

       $criteria = new CDbCriteria();

       $queryTerms = explode(',', $qString);

       foreach ($queryTerms as $q) {

              $tCriteria = new CDbCriteria();

              $criteria->addSearchCondition('name', $q, true);
              $criteria->addSearchCondition('text_ingredients', $q, true, 'OR');

              $criteria->mergeWith($tCriteria);
       }

       $results = FoodItem::model()->findAll($criteria); 
```

它运行和所有，但结果不正确。例如，我希望搜索`"A,B"`会产生与 for 相同的结果`"B,A"`，但事实并非如此。我希望有一种方法可以记录或`echo`对结果进行某种表示`$criteria`。我感觉这和我使用的方式有关`mergeWith`。

请让我知道我哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T03:20:00.167

tCriteria 在循环结束时似乎为空。你没有合并任何东西。

也许您的意思是让两个 addSearchCondition 行在 tCriteria 上工作，而您让它们在条件上工作。

# python - 将大views.py 拆分成更小的部分

> ID：10441805
> 
> 赞同：0
> 
> 时间：2012-05-04T02:14:29.283
> 
> 标签：python, django, import, circular-dependency, code-design

我有一个很大的`views.py`文件，所以我把它分成`views.py`和`admin_views.py`. 由于函数往往依赖于另一个文件中的函数，所以我做了以下事情：

```
# views.py
from admin_views.py import a,b,c

# admin_views.py
from views.py import d,e,f 
```

我发现这会导致循环依赖，并且导入不起作用。解决此问题的最佳方法是什么？我知道我可以将 import 语句放在文件的底部，但这似乎不太优雅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T02:21:20.773

您不应该在 views.py 文件中有核心逻辑。您应该将此核心逻辑放入其他 python 文件中（某些逻辑适用于 models.py 或 forms.py）并将其导入到 views.py 中。基本上，在大多数情况下，您应该将 views.py 文件导入到 urls.py 文件中。urls.py 文件也可以采用如下格式：

```
urlpatterns = patterns('management.views',
    #url(r'^index/$', direct_to_template, {'template': 'stats/index.html'},
    #    name="index"),          
    url(r'^pay_invoices/$', 'pay_invoices', name='pay_invoices'), 
) 
```

这使得views.py 函数基本上不需要在任何地方导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T02:29:43.530

首先，制作一个视图包。

```
--view
  |_ __init__.py
  |_ main.py # previewsly view.py
  |_ admin.py # previewsly view_admin.py 
```

然后，添加一个新文件，其中将包含您需要导入的部分`main`或`admin`：

```
--view
  |_ __init__.py
  |_ main.py 
  |_ admin.py 
  |_ base.py 
```

然后移动导入，以便它们从`base`.

最终，在 中`__init__`，从 main et admin 导入您需要的东西。您导入的所有内容`__init__`都可以使用 from views import stuff 导入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T23:33:41.217

循环导入是否与外键关系有关？

如果是这样，您可以将类定义为字符串。

```
item = models.ForeignKey("SomeOtherClass") 
```

如果我通常无法将逻辑提取到第三个文件中，例如 e-satis 建议。

# ios - 为什么我的 popovercontroller 的 tableview 中没有滚动条？

> ID：10441806
> 
> 赞同：0
> 
> 时间：2012-05-04T02:14:30.527
> 
> 标签：ios, scrollbar, tableview, uipopovercontroller

我在 popoverController 的 tableview 中看不到滚动条，因此只能访问几条记录。

popovercontroller.m 中的代码：

```
self.contentSizeForViewInPopover=CGSizeMake(200.0, 320.0);
popoverTableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 200, 320) style:UITableViewStyleGrouped];

//[popoverTableView setAutoresizesSubviews:YES];
//[popoverTableView setAutoresizingMask:(UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight)];

popoverTableView.showsVerticalScrollIndicator=YES;
[popoverTableView setDataSource:self];
[popoverTableView setDelegate:self];

[[self view] addSubview:popoverTableView];  

} 
```

那么只有很少的记录可以访问： ![在此处输入图像描述](../Images/0e73936fc17e3dc05a3a92bc19cd9d2c.png)

# asp.net - 我正在尝试显示一个带有超链接的简单 div，x 如下所示： 所以，当我运行我的应用程序时，我看到了 div 但我没有 问问题 问问题 2012-05-04T02:14:59.977 939 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在尝试显示一个带有超链接的简单 div，x 如下所示： 所以，当我运行我的应用程序时，我看到了 div 但我没有看到x这[×](#)status message here... 当我查看页面的源代码时，这就是它呈现的内容：status message here...然后我尝试了<asp:hyperlink.... <div="" class="success" id="divStatus" visible="false" runat="server"><asp:hyperlink id="success" runat="server" cssclass="close" text="×"></asp:hyperlink> 而且我仍然没有看到 href 标签，这里发生了什么以及为什么我无法提供 bindingFiles = new ArrayList<string>(); File bindingFile = new File("custom.xml"); try { bindingFiles.add(bindingFile.getCanonicalPath().toString()); } catch (IoException e) { e.printStackTrace(); } Client client = factory.createClient(wsdlURL, loader, bindingFiles); 下面是custom.xml。 <bindings xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" wsdllocation="http://localhost/test?wsdl" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" jaxb:version="2.0" jaxb:extensionbindingprefixes="xjc" xmlns="http://java.sun.com/xml/ns/jaxws"><enablewrapperstyle>true</enablewrapperstyle> <jaxb:globalbindings></jaxb:globalbindings></bindings>当我在示例代码之上运行时，我得到了以下异常.. java.lang.reflect.UndeclaredThrowableException at $Proxy18.bind(Unknown Source) at org.apache.cxf.endpoint.dynamic.DynamicClientFactory.createClient(DynamicClientFactory.java:318) at org.apache.cxf.endpoint.dynamic.DynamicClientFactory.createClient(DynamicClientFactory.java:252) at DynamicWebServiceClient_test.test(DynamicWebServiceClient_test.java:93) at DynamicWebServiceClient_test.main(DynamicWebServiceClient_test.java:54) Caused by: java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.cxf.common.util.ReflectionInvokationHandler.invoke(ReflectionInvokationHandler.java:52) ... 5 more Caused by: java.lang.reflect.UndeclaredThrowableException at $Proxy20.fatalError(Unknown Source) at com.sun.tools.internal.xjc.api.impl.s2j.SchemaCompilerImpl.fatalError(SchemaCompilerImpl.java:279) at com.sun.tools.internal.xjc.util.ErrorReceiverFilter.fatalError(ErrorReceiverFilter.java:71) at com.sun.xml.internal.xsom.impl.parser.ParserContext$2.fatalError(ParserContext.java:196) at com.sun.xml.internal.xsom.impl.parser.NGCCRuntimeEx.unexpectedX(NGCCRuntimeEx.java:484) at com.sun.xml.internal.xsom.impl.parser.state.NGCCHandler.unexpectedEnterElement(NGCCHandler.java:179) at com.sun.xml.internal.xsom.impl.parser.state.Schema.enterElement(Schema.java:401) at com.sun.xml.internal.xsom.impl.parser.state.NGCCRuntime.startElement(NGCCRuntime.java:243) at org.xml.sax.helpers.XMLFilterImpl.startElement(XMLFilterImpl.java:527) at com.sun.tools.internal.xjc.util.SubtreeCutter.startElement(SubtreeCutter.java:93) at com.sun.tools.internal.xjc.reader.ExtensionBindingChecker.startElement(ExtensionBindingChecker.java:133) at org.xml.sax.helpers.XMLFilterImpl.startElement(XMLFilterImpl.java:527) at com.sun.tools.internal.xjc.reader.xmlschema.parser.IncorrectNamespaceURIChecker.startElement(IncorrectNamespaceURIChecker.java:102) at org.xml.sax.helpers.XMLFilterImpl.startElement(XMLFilterImpl.java:527) at com.sun.tools.internal.xjc.reader.xmlschema.parser.CustomizationContextChecker.startElement(CustomizationContextChecker.java:177) at org.xml.sax.helpers.XMLFilterImpl.startElement(XMLFilterImpl.java:527) at com.sun.tools.internal.xjc.reader.internalizer.DOMForestScanner$LocationResolver.startElement(DOMForestScanner.java:130) at com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:228) at com.sun.xml.internal.bind.unmarshaller.DOMScanner.scan(DOMScanner.java:111) at com.sun.tools.internal.xjc.reader.internalizer.DOMForestScanner.scan(DOMForestScanner.java:78) at com.sun.tools.internal.xjc.reader.internalizer.DOMForestScanner.scan(DOMForestScanner.java:86) at com.sun.tools.internal.xjc.reader.internalizer.DOMForestParser.parse(DOMForestParser.java:88) at com.sun.tools.internal.xjc.ModelLoader$XMLSchemaParser.parse(ModelLoader.java:251) at com.sun.xml.internal.xsom.impl.parser.NGCCRuntimeEx.parseEntity(NGCCRuntimeEx.java:326) at com.sun.xml.internal.xsom.impl.parser.ParserContext.parse(ParserContext.java:113) at com.sun.xml.internal.xsom.parser.XSOMParser.parse(XSOMParser.java:154) at com.sun.xml.internal.xsom.parser.XSOMParser.parse(XSOMParser.java:143) at com.sun.tools.internal.xjc.ModelLoader.createXSOM(ModelLoader.java:505) at com.sun.tools.internal.xjc.api.impl.s2j.SchemaCompilerImpl.bind(SchemaCompilerImpl.java:226) ... 10 more Caused by: java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.cxf.common.util.ReflectionInvokationHandler.invoke(ReflectionInvokationHandler.java:52) ... 39 more Caused by: java.lang.RuntimeException: Fatal error compiling schema from WSDL at {http://localhost/test?wsdl}: Unexpected <jaxws:bindings>appears at line 18 column 62 at org.apache.cxf.endpoint.dynamic.DynamicClientFactory$InnerErrorListener.fatalError(DynamicClientFactory.java:739) ... 44 more Caused by: org.xml.sax.SAXParseException: Unexpected <jaxws:bindings>appears at line 18 column 62 at com.sun.xml.internal.xsom.impl.parser.NGCCRuntimeEx.unexpectedX(NGCCRuntimeEx.java:477) ... 34 more asp.nethtml 4 2 回答 2 This answer is useful 1 我正在写 InnerHtml divSuccess.InnerHtml ="status message here...如果这是擦除其静态内容的情况，那么替代方案是什么？ 如果divStatus包含要保留的控件，则可以通过使用 Literal 控件并将其添加到控件集合中来附加 HTML，例如： var lit = new Literal(); lit.Text = "my text or **html**"; this.divStatus.Controls.Add(lit); 或者，您可以在内部 使用另一个控件divStatus并更改其内部 HTML：</jaxws:bindings></jaxws:bindings></string>This is the link that we don't want to be removed.于 2012-05-04T02:37:24.620 回答 This answer is useful 0 这是我如何解决我的问题 divStatus.InnerHtml = "[×](#)" + "status message here..."; 于 2012-05-04T02:55:30.300 回答 Related 1 arrays - as3 ARRAY SHIFT - 现在数组的结尾是什么？ 2 svn - 仅在 svn log -verbose 中获取文件提交信息 1 javascript - HTML5 Javascript：将文本保存到画布上？ 1 javascript - flowplayer：coverImage 作为数据属性 2 google-apps-script - 编辑特定范围时更新日期或发送电子邮件 1 c++ - C++ 11：使用 unordered_set::push 将 const int* 转换为 int* 1 java - 你能用 JAX-RS/Jersey 做传统的 Servlet 过滤吗？ 1 php - 通过 JQUERY 上传 PHP 图片 2 jquery - 使用 JS / jQuery 添加输入匹配随机器？（已编辑） 0 git - FFs Github: Permission denied (publickey) fatal: 远端意外挂断 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</asp:hyperlink....>

> ID：10441812
> 
> 赞同：2
> 
> 时间：
> 
> 标签：asp.net, html

我正在尝试显示一个带有超链接的简单 div，`x` 如下所示： ![在此处输入图像描述](../Images/fb09f312fb3d6558a5403b689475b596.png)

所以，当我运行我的应用程序时，我看到了 div 但我没有看到`x`这`<a href tag` 是我的代码：

```
<div class="success"><a href="#" class="close">&times;</a>status message here...</div> 
```

当我查看页面的源代码时，这就是它呈现的内容：

```
<div id="ctl00_ctl00_ContentMain_ContentMain_employee_status" class="success" style="display:block;">status message here...</div> 
```

然后我尝试了`<asp:hyperlink....`

```
 <div class="success" id="divStatus" visible="false" runat="server"><asp:HyperLink id="success" runat="server" CssClass="close" Text="&times;"></asp:HyperLink></div> 
```

而且我仍然没有看到 href 标签，这里发生了什么以及为什么我无法提供`<a href or <asp:hyperlnk tag`任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:37:24.620

> 我正在写 InnerHtml divSuccess.InnerHtml ="status message here...如果这是擦除其静态内容的情况，那么替代方案是什么？

如果`divStatus`包含要保留的控件，则可以通过使用 Literal 控件并将其添加到控件集合中来附加 HTML，例如：

```
var lit = new Literal();
lit.Text = "my text or <strong>html</strong>";
this.divStatus.Controls.Add(lit); 
```

*或者，您可以在内部* 使用另一个控件`divStatus`并更改其内部 HTML：

```
<div id="divStatus" runat="server">
    <a id="lnk1">This is the link that we don't want to be removed.</a>
    <asp:Literal runat="server" id="litStatusHtml" />
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T02:55:30.300

这是我如何解决我的问题

```
divStatus.InnerHtml = "<a href='#' class='close'>&times;</a>" + "status message here..."; 
```

# java - Java midi 播放质量不一致

> ID：10441814
> 
> 赞同：0
> 
> 时间：2012-05-04T02:15:06.857
> 
> 标签：java, midi, javasound

我最近在我正在开发的游戏中玩 midis 时遇到了一个奇怪的错误。我认为我的 midi 代码运行良好，因为它曾经播放 midis 而不会听起来很奇怪。现在，每当它播放 midis 时，它们听起来都很细小、回声和响亮。

我已经很长时间没有接触过我的 midi 播放器代码了，所以我想知道最近的 Java 更新是否有可能暴露了我的代码中一直存在的错误。或者我的 Java 版本中可能存在某种我不知道的 midi 错误？

每当我在游戏之外播放 midis 时，它们的声音都很好。

我正在运行 Java 6，更新 31，构建 1.6.0_31-b05。这是一个重现问题的 SSCCE（它至少在我的 JVM 上重现它）：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.io.*;
import javax.sound.midi.*;
import java.net.URL;

public class MidiSSCCE extends JFrame
{

    public MidiSSCCE()
    {
        super("Sound problem SSCCE");
        this.setSize(200,100);

        // instantiate main window panel

        JPanel screenP = new SSCCEPanel(this);
        this.add(screenP);

        // finishing touches on Game window

        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setVisible(true);

        System.out.println("Game Window successfully created!!!");
    }

    public static void main(String[] args)
    {
        MidiSSCCE gui = new MidiSSCCE();        
    }
}

/**
*   SSCCEPanel is the JPanel that manages the example's timer, painting, and logic. 
**/

class SSCCEPanel extends JPanel
{
    public Frame parentFrame;
    private Timer timer;
    public int logicLoops;
    public double prevFPS;
    boolean timerReady;

    // The MidiPlayer object is used by the example to play the midi.

    public MidiPlayer midiPlayer;

    public SSCCEPanel(Frame parent)
    {
        super(true);
        parentFrame = parent;
        this.setFocusable(true);

        Toolkit.getDefaultToolkit().sync();
        logicLoops = 0;

        midiPlayer = new MidiPlayer();

        TimerListener timerListener = new TimerListener();
        prevFPS = 0;
        timerReady = true;
        timer = new Timer(0,timerListener);
        this.setFPS(60);
        timer.start();
    }

    /** 
    *   setFPS()
    *   Preconditions: fps is a quantity of frames per second
    *   Postconditions: Sets the timer's refresh rate so that it 
    *       fires fps times per second.
    **/

    public void setFPS(int fps)
    {
        int mspf = (int) (1000.0 /fps + 0.5);
        timer.setDelay(mspf);
    }

    /**
    *   This is the JPanel's timer listener. It runs the example's logic and repaint
    *   methods each time it gets a timer signal.
    **/

    private class TimerListener implements ActionListener
    {
        long startTime = System.currentTimeMillis();
        long lastTime = this.startTime;
        int ticks = 0;

        public void actionPerformed(ActionEvent e)
        {
            Object source = e.getSource();
            if(source == timer)
            {
                // perform a loop through the game's logic and repaint.

                synchronized(this)
                {
                    if(timerReady)
                    {
                        timerReady = false;
                        runSSCCELogic();
                        repaint();
                        timerReady = true;
                    }
                }

                // Logic for Frames per Second counter

                this.ticks++;

                long currentTime = System.currentTimeMillis();

                if(currentTime - startTime >= 500) 
                {
                    prevFPS =  1000.0 * ticks/(1.0*currentTime - startTime);
                    System.out.println(prevFPS);
                    startTime = currentTime;
                    ticks = 0;
                }

                lastTime = currentTime;
            }
        }
    }

    /**
    *   repaints the SSCCE.
    *   This just shows the current FPS.
    **/

    public void paintComponent(Graphics g)
    {
            super.paintComponent(g);

            Graphics2D g2D = (Graphics2D) g;
            double roundedFPS = Math.round(prevFPS*10)/10.0;

            g2D.setColor(new Color(0x000000));
            g2D.drawString("FPS: " + roundedFPS, 20,20);
            g.dispose();
    }

    /**
    *   runSSCCEELogic()
    *   This is where the run-time logic for the SSCCE example is. 
    *   All it does is load and play a midi called "mymidi.mid" which is located in the same directory.
    **/

    public void runSSCCELogic()
    {
        if(logicLoops == 1)
        {
            midiPlayer.load("http://www.vgmusic.com/music/computer/microsoft/windows/touhou_6_stage3_boss.mid");
            midiPlayer.play(true);
        }

        logicLoops++;
    }
}

/**
*   MidiPlayer
*   A class that allows midi files to be loaded and played. 
**/

class MidiPlayer
{
    private Sequence seq;
    private Sequencer seqr;
    private Synthesizer synth;
    private Receiver receiver;
    private File midiFile;
    private String midiID;
    private boolean loaded;
    private boolean usingHardwareSoundbank;

    // CONSTRUCTORS

    public MidiPlayer()
    {
        loaded = false;
        try
        {
            seqr = MidiSystem.getSequencer();
            synth = MidiSystem.getSynthesizer();
        }
        catch(Exception e)
        {
            System.out.println("MIDI error: It appears your system doesn't have a MIDI device or your device is not working.");
        }
    }

    /**
    *   MidiPlayer(String fileName)
    *   Constructor that also loads an initial midi file.
    *   Preconditions: fileName is the name of the midi file to be loaded. 
    *   Postconditions: The MidiPlayer is created and loaded with the midi specified by fileName.
    **/

    public MidiPlayer(String fileName)
    {
        this();
        load(fileName);
    }

    // DATA METHODS

    /**
    *   load(String fileName)
    *   loads a midi file into this MidiPlayer.
    *   Preconditions: fileName is the name of the midi file to be loaded.
    *   Postconditions: fileName is loaded and is ready to be played.
    **/

    public void load(String fileName)
    {
        this.unload();
        try
        {
            URL midiURL =  new URL(fileName);
        //  midiFile = new File(fileName);
            seq = MidiSystem.getSequence(midiURL);

            seqr.open();
            synth.open();

            System.out.println("MidiDeviceInfo: ");
            for(MidiDevice.Info info : MidiSystem.getMidiDeviceInfo())
            {
                System.out.println("\t" + info);
            }
            System.out.println();

            if(synth.getDefaultSoundbank() == null)
            {
                receiver = MidiSystem.getReceiver();
                usingHardwareSoundbank = true;
                System.out.println("using hardware soundbank");
            }
            else
            {
                receiver = synth.getReceiver();
                usingHardwareSoundbank = false;
                System.out.println("using default software soundbank:" + synth.getDefaultSoundbank());
            }
            seqr.getTransmitter().setReceiver(receiver);

            seqr.setSequence(seq);
            loaded = true;
        }
        catch(IOException ioe)
        {
            System.out.println("MIDI error: Problem occured while reading " + midiFile.getName() + ".");
        }
        catch(InvalidMidiDataException imde)
        {
            System.out.println("MIDI error: " + midiFile.getName() + " is not a valid MIDI file or is unreadable.");
        }
        catch(Exception e)
        {
            System.out.println("MIDI error: Unexplained error occured while loading midi.");
        }
    }

    /**
    *   unload()
    *   Unloads the current midi from the MidiPlayer and releases its resources from memory.
    **/

    public void unload()
    {
        this.stop();
        seqr.close();
        midiFile = null;
        loaded = false;
    }

    // OTHER METHODS

    /**
    *   setMidiID(String id)
    *   associates a String ID with the current midi.
    *   Preconditions: id is the ID we are associating with the current midi.
    **/

    public void setMidiID(String id)
    {
        midiID = id;
    }

    /**
    *   getMidiID(String id)
    *
    **/

    public String getMidiID()
    {
        return new String(midiID);
    }

    /**
    *   play(boolean reset)
    *   plays the currently loaded midi.
    *   Preconditions: reset tells our midi whether or nor to begin playing from the start of the midi file's current loop start point.
    *   Postconditions: If reset is true, then the loaded midi begins playing from its loop start point (default 0). 
    *       If reset is false, then the loaded midi resumes playing from its current position.
    **/

    public void play(boolean reset)
    {
        if(reset)
            seqr.setTickPosition(seqr.getLoopStartPoint());
        seqr.start();
    }

    /**
    *   stop()
    *   Pauses the current midi if it was playing.
    **/

    public void stop()
    {
        if(seqr.isOpen())
            seqr.stop();
    }

    /**
    *   isRunning()
    *   Returns true if the current midi is playing. Returns false otherwise.
    **/

    public boolean isRunning()
    {
        return seqr.isRunning();
    }

    /**
    *   loop(int times)
    *   Sets the current midi to loop from start to finish a specific number of times.
    *   Preconditions: times is the number of times we want our midi to loop.
    *   Postconditions: The current midi is set to loop times times. 
    *       If times = -1, the current midi will be set to loop infinitely.
    **/

    public void loop(int times)
    {
        loop(times,0,-1);
    }

    /**
    *   loop(int times)
    *   Sets the current midi to loop from a specified start point to a specified end point a specific number of times.
    *   Preconditions: times is the number of times we want our midi to loop.
    *       start is our loop's start point in ticks.
    *       end is our loop's end point in ticks.
    *   Postconditions: The current midi is set to loop from tick start to tick end times times. 
    *       If times = -1, the current midi will be set to loop infinitely.
    **/

    public void loop(int times, long start, long end)
    {
        if(start < 0)
            start = 0;
        if(end > seqr.getSequence().getTickLength() || end <= 0)
            end = seqr.getSequence().getTickLength();

        if(start >= end && end != -1)
            start = end-1;

        seqr.setLoopStartPoint(start);
        seqr.setLoopEndPoint(end);

        if(times == -1)
            seqr.setLoopCount(Sequencer.LOOP_CONTINUOUSLY);
        else
            seqr.setLoopCount(times);

    }

    public void setVolume(double vol)
    {
        try 
        {
            if(usingHardwareSoundbank)
            {
                ShortMessage volumeMessage = new ShortMessage();
                for ( int i = 0; i < 16; i++ ) 
                {
                    volumeMessage.setMessage( ShortMessage.CONTROL_CHANGE, i, 7, (int)(vol*127) );
                    receiver.send( volumeMessage, -1 );
                }
            }
            else
            {
                MidiChannel[] channels = synth.getChannels();
                for( int c = 0; channels != null && c < channels.length; c++ )
                {
                  channels[c].controlChange( 7, (int)( vol*127) );
                }
            }
        } 
        catch ( Exception e ) 
        {
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T03:00:08.853

MIDI 的音质取决于生成声音的合成器。它不应该与您的代码有任何关系。

很可能是您的声卡有问题，但这并不总是产生声音的原因，尤其是现在。在 Windows 下，有一个来自 Microsoft 的软件合成器可以完成所有这些工作。无论如何，这与您的代码无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T17:26:55.080

事实证明，问题出在我的 JRE 构建上。我尝试运行这个简单的示例来播放 Andrew 将我链接到的 midis：

```
import javax.sound.midi.*;
import java.net.URL;

class PlayMidi {

     public static void main(String[] args) throws Exception {
          URL url = new URL("http://www.vgmusic.com/music/computer/microsoft/windows/touhou_6_stage3_boss.mid");

          Sequence sequence = MidiSystem.getSequence(url);
          Sequencer sequencer = MidiSystem.getSequencer();

          sequencer.open();
          sequencer.setSequence(sequence);

          sequencer.start();
     }
} 
```

并且midi的音质仍然没有改善。我使用 Java 6_31 和 Java 6_32 运行了我的 SSCCE 和上述最小示例。

总之，这是 Java 6_31 和 Java 6_32 中固有的问题。所以，我想在 Sun/Oracle 发布下一个 JRE 版本之前我很不走运，希望能解决这个问题。

编辑：

我刚刚有一个安装了 Java 6_31 的朋友在他的机器上进行了测试。当他运行我的 java 示例与在 Java 之外播放 midi 时，他没有注意到音质上有任何差异。因此，问题也可能与我的机器有关，而不是 Java 中的错误。但是，另一位朋友刚刚对其进行了测试，并且也遇到了与我相同的问题。

总之，这个问题要么是 Java 6_31 之后的版本所固有的，要么是某些机器的声音设备所固有的，要么是两者的结合。这个问题可能不值得在本机 java 中进一步研究。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T22:32:58.267

我对我的 MidiPlayer 代码进行了更改，这似乎为我解决了问题。我将加载音库和发射器接收器的代码移动到构造函数，而不是加载midi的方法中。它不再听起来很响亮。

```
 package gameEngine;

  import javax.sound.midi.*;
  import java.io.File;
  import java.io.IOException;
  import java.net.URL;

  /**
  * MidiPlayer
  * author: Stephen Lindberg
  * Last modified: Oct 14, 2011
  * 
  * A class that allows midi files to be loaded and played.
  **/

  public class MidiPlayer
  {
     private Sequence seq;
     private Sequencer seqr;
     private Synthesizer synth;
     private Receiver receiver;
     private File midiFile;
     private String midiID;
     private boolean loaded;
     private boolean usingHardwareSoundbank;
     private float defaultTempo;

     // CONSTRUCTORS

     public MidiPlayer()
     {
        loaded = false;
        try
        {
           seqr = MidiSystem.getSequencer();
           synth = MidiSystem.getSynthesizer();

           // print the user's midi device info
           System.out.println("Setting up Midi Player...");
           System.out.println("MidiDeviceInfo: ");
           for(MidiDevice.Info info : MidiSystem.getMidiDeviceInfo())
           {
              System.out.println("\t" + info.getName() + ": " +info.getDescription());
           }
           System.out.println();

           // obtain the receiver. This will be used for changing volume.

           Soundbank soundbank = synth.getDefaultSoundbank();
           if(soundbank == null)
           {
              receiver = MidiSystem.getReceiver();
              usingHardwareSoundbank = true;
              System.out.println("using hardware soundbank");
           }
           else
           {
              synth.loadAllInstruments(soundbank);
              receiver = synth.getReceiver();
              usingHardwareSoundbank = false;
              System.out.println("using default software soundbank:" + soundbank);
           }
           seqr.getTransmitter().setReceiver(receiver);

        }
        catch(Exception e)
        {
           System.out.println("MIDI error: It appears your system doesn't have a MIDI device or your device is not working.");
        }
     }

     /**
     *  MidiPlayer(String fileName)
     *  Constructor that also loads an initial midi file.
     *  Preconditions: fileName is the name of the midi file to be loaded. 
     *  Postconditions: The MidiPlayer is created and loaded with the midi specified by fileName.
     **/

     public MidiPlayer(String fileName)
     {
        this();
        load(fileName);
     }

     // DATA METHODS

     /**
     *  load(String fileName)
     *  loads a midi file into this MidiPlayer.
     *  Preconditions: fileName is the name of the midi file to be loaded.
     *  Postconditions: fileName is loaded and is ready to be played.
     **/

     public void load(String fileName)
     {
        this.unload();
        try
        {
           URL midiURL =  getClass().getClassLoader().getResource(fileName);
           seq = MidiSystem.getSequence(midiURL);

           seqr.open();
           synth.open();

           // load our sequence into the sequencer.

           seqr.setSequence(seq);
           loaded = true;
           defaultTempo = seqr.getTempoInBPM();
        }
        catch(IOException ioe)
        {
           System.out.println("MIDI error: Problem occured while reading " + midiFile.getName() + ".");
        }
        catch(InvalidMidiDataException imde)
        {
           System.out.println("MIDI error: " + midiFile.getName() + " is not a valid MIDI file or is unreadable.");
        }
        catch(Exception e)
        {
           System.out.println("MIDI error: Unexplained error occured while loading midi.");
        }
     }

     /**
     *  unload()
     *  Unloads the current midi from the MidiPlayer and releases its resources from memory.
     **/

     public void unload()
     {
        this.stop();
        seqr.close();
        synth.close();
        midiFile = null;
        loaded = false;
     }

     // OTHER METHODS

     /**
     *  setMidiID(String id)
     *  associates a String ID with the current midi.
     *  Preconditions: id is the ID we are associating with the current midi.
     **/

     public void setMidiID(String id)
     {
        midiID = id;
     }

     /**
     *  getMidiID(String id)
     *
     **/

     public String getMidiID()
     {
        return new String(midiID);
     }

     /**
     *  play(boolean reset)
     *  plays the currently loaded midi.
     *  Preconditions: reset tells our midi whether or nor to begin playing from the start of the midi file's current loop start point.
     *  Postconditions: If reset is true, then the loaded midi begins playing from its loop start point (default 0). 
     *      If reset is false, then the loaded midi resumes playing from its current position.
     **/

     public void play(boolean reset)
     {
        if(reset)
           seqr.setTickPosition(seqr.getLoopStartPoint());
        seqr.start();
     }

     /**
     *  stop()
     *  Pauses the current midi if it was playing.
     **/

     public void stop()
     {
        if(seqr.isOpen())
           seqr.stop();
     }

     /**
     *  isRunning()
     *  Returns true if the current midi is playing. Returns false otherwise.
     **/

     public boolean isRunning()
     {
        return seqr.isRunning();
     }

     /**
     *  getTempo()
     *  Returns the current tempo of the MidiPlayer in BPM (Beats per Minute).
     **/

     public float getTempo()
     {
        return seqr.getTempoInBPM();
     }

     /**
     *  loop(int times)
     *  Sets the current midi to loop from start to finish a specific number of times.
     *  Preconditions: times is the number of times we want our midi to loop.
     *  Postconditions: The current midi is set to loop times times. 
     *      If times = -1, the current midi will be set to loop infinitely.
     **/

     public void loop(int times)
     {
        loop(times,0,-1);
     }

     /**
     *  loop(int times)
     *  Sets the current midi to loop from a specified start point to a specified end point a specific number of times.
     *  Preconditions: times is the number of times we want our midi to loop.
     *      start is our loop's start point in ticks.
     *      end is our loop's end point in ticks.
     *  Postconditions: The current midi is set to loop from tick start to tick end times times. 
     *      If times = -1, the current midi will be set to loop infinitely.
     **/

     public void loop(int times, long start, long end)
     {
        if(start < 0)
           start = 0;
        if(end > seqr.getSequence().getTickLength() || end <= 0)
           end = seqr.getSequence().getTickLength();

        if(start >= end && end != -1)
           start = end-1;

        seqr.setLoopStartPoint(start);
        seqr.setLoopEndPoint(end);

        if(times == -1)
           seqr.setLoopCount(Sequencer.LOOP_CONTINUOUSLY);
        else
           seqr.setLoopCount(times);

     }

     /**
     *  resetTempo()
     *  Resets the MidiPlayer's tempo the the initial tempo of its current midi.
     **/

     public void resetTempo()
     {
        this.changeTempo(this.defaultTempo);
     }

     /**
     *  changeTempo(float bpm)
     *  Changes the MidiPlayer's current tempo.
     *  Preconditions: bpm is the MidiPlayer's new tempo in BPM (Beats per Minute).
     *  Postconditions: The MidiPlayer's current tempo is set to bpm BPM.
     **/

     public void changeTempo(float bpm)
     {
        double lengthCoeff = bpm/seqr.getTempoInBPM();

        seqr.setLoopStartPoint((long) (seqr.getLoopStartPoint()*lengthCoeff));
        seqr.setLoopEndPoint((long) (seqr.getLoopEndPoint()*lengthCoeff));

        seqr.setTempoInBPM(bpm);
     }

     public void setVolume(double vol)
     {
        System.out.println("Midi volume change request: " + vol);

        try 
        {
           if(usingHardwareSoundbank)
           {
              ShortMessage volumeMessage = new ShortMessage();
              for ( int i = 0; i < 16; i++ ) 
              {
                 volumeMessage.setMessage( ShortMessage.CONTROL_CHANGE, i, 7, (int)(vol*127) );
                 receiver.send( volumeMessage, -1 );
              }
           }
           else
           {
              MidiChannel[] channels = synth.getChannels();

              for( int c = 0; c < channels.length; c++ )
              {
                 if(channels[c] != null) {
                    channels[c].controlChange( 7, (int)( vol*127) );
                 }
              }
           }
        } 
        catch ( Exception e ) 
        {
           e.printStackTrace();
        }
     }

  } 
```

# android - android应用程序在第二次运行时强制关闭

> ID：10441819
> 
> 赞同：1
> 
> 时间：2012-05-04T02:15:34.193
> 
> 标签：android

我的应用程序在第一次运行时运行良好。然后当我终止它并再次运行它时，它只会弹出强制关闭窗口。在我强制关闭应用程序后，它再次运行良好。该应用程序在强制关闭之间交替并运行良好。

在应用程序终止之前我是否错过了一些清理工作？

以下是我的一些代码（包含三个类，foobar、actionview 和 actionthread：

foob​​ar.java：

```
public class foobar extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(new ActionView(this));
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
    }

    @Override
    protected void onPause() {
        super.onPause();
    }

    @Override
    protected void onStop() {
        super.onStop();
    }
}

public class ActionView extends SurfaceView implements SurfaceHolder.Callback {

    private ActionThread actionThread;

    public ActionView(Context context) 
    {
        super(context);
        getHolder().addCallback(this);
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) 
    {
        actionThread = new ActionThread(holder,this);
        actionThread.setRunning(true);
        actionThread.start();
        }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) 
    {
        boolean retry = true;
        while(retry)
        {
            try
            {
                actionThread.join();
                retry=false;
            }
            catch(InterruptedException e)
            {
            }
        }
    }

    protected void displayGameState(Canvas canvas) 
    {
        //code...
        }

        public void updateGameState() 
    {
        //code.. 
         if something happens then
    actionThread.setRunning(false);
    ((Activity)getContext()).finish();

        }
} 
```

ActionThread.java：

```
public class ActionThread extends Thread {

    private boolean threadIsRunning;
    private SurfaceHolder surfaceHolder;
    private ActionView actionView;
    private final static int MAX_FPS = 50;
    private final static int MAX_FRAME_SKIPS = 5;
    private final static int FRAME_PERIOD = 1000/MAX_FPS;
    private static final String TAG = ActionThread.class.getSimpleName();

    public ActionThread(SurfaceHolder holder, ActionView actionView) {
        this.actionView= actionView;
        surfaceHolder = holder;
    }

    public void setRunning(boolean running)
    {
        threadIsRunning = running;
    }

    @Override
    public void run() 
    {
        long tickCount = 0L;
        long totalFramesSkipped = 0L;
        Canvas canvas = null;
        long beginTime; //time the cycle began
        long timeDiff;  //time it took for cycle to execute
        int sleepTime; //milliseconds to sleep (< 0 if time it took to complete cycle is longer than FRAME_PERIOD
        int framesSkipped; //# of frames being skipped

        while(threadIsRunning)
        {
            tickCount++;
            try
            {
                canvas = surfaceHolder.lockCanvas();
                synchronized(surfaceHolder)
                {
                    beginTime = System.currentTimeMillis();
                    framesSkipped = 0;

                    actionView.updateGameState();
                    actionView.displayGameState(canvas);

                    //calc how long the cycle took
                    timeDiff = System.currentTimeMillis() - beginTime;
                    //calc sleep time
                    sleepTime = (int)(FRAME_PERIOD - timeDiff);

                    if(sleepTime > 0)
                    {
                        //if sleepTime > 0 , didn't fall behind. Try to sleep
                        try
                        {
                            Thread.sleep(sleepTime);
                        }
                        catch(InterruptedException e){}
                    }
                    while(sleepTime < 0 && framesSkipped < MAX_FRAME_SKIPS)
                    {   //fell behind and need to catch up (update without displaying)
                        actionView.updateGameState();
                        sleepTime+=FRAME_PERIOD; //add frame period to check if in next frame
                        framesSkipped++;
                        totalFramesSkipped++;
                    }
                }
            }
            finally
            {
                if(canvas != null)
                {
                    surfaceHolder.unlockCanvasAndPost(canvas);
                }
            }
        }
    }

} 
```

这是 logcat 错误：

```
05-03 22:47:45.449: D/dalvikvm(30596): GC_EXTERNAL_ALLOC freed <1K, 43% free 3126K/5447K, external 36955K/38794K, paused 32ms
05-03 22:47:45.488: I/dalvikvm-heap(30596): Clamp target GC heap from 43.427MB to 42.000MB
05-03 22:47:45.488: D/dalvikvm(30596): GC_FOR_MALLOC freed 0K, 43% free 3126K/5447K, external 37165K/38794K, paused 18ms
05-03 22:47:45.535: D/dalvikvm(30596): GC_EXTERNAL_ALLOC freed <1K, 43% free 3126K/5447K, external 37165K/38794K, paused 29ms
05-03 22:47:45.574: I/dalvikvm-heap(30596): Clamp target GC heap from 43.674MB to 42.000MB
05-03 22:47:45.582: D/dalvikvm(30596): GC_FOR_MALLOC freed 0K, 43% free 3126K/5447K, external 37418K/38794K, paused 18ms
05-03 22:47:45.613: D/dalvikvm(30596): GC_EXTERNAL_ALLOC freed <1K, 43% free 3126K/5447K, external 37244K/38794K, paused 30ms
05-03 22:47:45.652: I/dalvikvm-heap(30596): Clamp target GC heap from 43.804MB to 42.000MB
05-03 22:47:45.652: D/dalvikvm(30596): GC_FOR_MALLOC freed 0K, 43% free 3126K/5447K, external 37551K/38794K, paused 17ms
05-03 22:47:45.684: D/dalvikvm(30596): GC_EXTERNAL_ALLOC freed <1K, 43% free 3126K/5447K, external 37551K/38794K, paused 27ms
05-03 22:47:45.699: E/dalvikvm-heap(30596): 258908-byte external allocation too large for this process.
05-03 22:47:45.723: I/dalvikvm-heap(30596): Clamp target GC heap from 43.804MB to 42.000MB
05-03 22:47:45.723: D/dalvikvm(30596): GC_FOR_MALLOC freed <1K, 43% free 3126K/5447K, external 37551K/38794K, paused 17ms
05-03 22:47:45.723: D/GraphicsJNI(30596): Waiting for heap walker to free more memory
05-03 22:47:45.723: D/GraphicsJNI(30596): Heap walker done, retry to allocate
05-03 22:47:45.754: D/dalvikvm(30596): GC_EXTERNAL_ALLOC freed <1K, 43% free 3126K/5447K, external 37298K/38794K, paused 27ms
05-03 22:47:45.793: I/dalvikvm-heap(30596): Clamp target GC heap from 43.804MB to 42.000MB
05-03 22:47:45.793: D/dalvikvm(30596): GC_FOR_MALLOC freed 0K, 43% free 3126K/5447K, external 37551K/38794K, paused 17ms
05-03 22:47:45.832: D/dalvikvm(30596): GC_EXTERNAL_ALLOC freed <1K, 43% free 3126K/5447K, external 37551K/38794K, paused 26ms
05-03 22:47:45.840: E/dalvikvm-heap(30596): 313968-byte external allocation too large for this process.
05-03 22:47:45.871: I/dalvikvm-heap(30596): Clamp target GC heap from 43.804MB to 42.000MB
05-03 22:47:45.871: D/dalvikvm(30596): GC_FOR_MALLOC freed 0K, 43% free 3126K/5447K, external 37551K/38794K, paused 17ms
05-03 22:47:45.871: D/GraphicsJNI(30596): Waiting for heap walker to free more memory
05-03 22:47:45.871: D/GraphicsJNI(30596): Heap walker done, retry to allocate
05-03 22:47:45.902: D/dalvikvm(30596): GC_EXTERNAL_ALLOC freed <1K, 43% free 3126K/5447K, external 37551K/38794K, paused 30ms
05-03 22:47:45.910: E/dalvikvm-heap(30596): 313968-byte external allocation too large for this process.
05-03 22:47:45.941: I/dalvikvm-heap(30596): Clamp target GC heap from 43.804MB to 42.000MB
05-03 22:47:45.941: D/dalvikvm(30596): GC_FOR_MALLOC freed 0K, 43% free 3126K/5447K, external 37551K/38794K, paused 17ms
05-03 22:47:45.941: E/GraphicsJNI(30596): VM won't let us allocate 313968 bytes
05-03 22:47:45.957: D/AndroidRuntime(30596): Shutting down VM
05-03 22:47:45.957: W/dalvikvm(30596): threadid=1: thread exiting with uncaught exception (group=0x4001e560)
05-03 22:47:45.965: E/AndroidRuntime(30596): FATAL EXCEPTION: main
05-03 22:47:45.965: E/AndroidRuntime(30596): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.graphics.Bitmap.nativeCreate(Native Method)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.graphics.Bitmap.createBitmap(Bitmap.java:507)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.graphics.Bitmap.createBitmap(Bitmap.java:474)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:379)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at com.somecomany.foobar.Element.Element.resizeBitmap(Element.java:48)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at com.somecomany.foobar.Element.Element.<init>(Element.java:31)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at com.somecomany.foobar.Element.MobileElement.<init>(MobileElement.java:24)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at com.somecomany.foobar.ActionView.surfaceCreated(ActionView.java:156)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.view.SurfaceView.updateWindow(SurfaceView.java:543)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.view.SurfaceView.dispatchDraw(SurfaceView.java:348)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.view.View.draw(View.java:6883)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.view.View.draw(View.java:6883)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2106)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.view.ViewRoot.draw(ViewRoot.java:1562)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1298)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1911)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.os.Looper.loop(Looper.java:130)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at android.app.ActivityThread.main(ActivityThread.java:3821)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at java.lang.reflect.Method.invokeNative(Native Method)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at java.lang.reflect.Method.invoke(Method.java:507)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-03 22:47:45.965: E/AndroidRuntime(30596):    at dalvik.system.NativeStart.main(Native Method)
05-03 22:47:49.996: I/Process(30596): Sending signal. PID: 30596 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:50:02.683

从日志来看，您在创建位图时似乎存在内存泄漏，这种情况发生在您有一些大型对象挂起时，可能是在应用程序第二次运行时通过静态数据结构。

另一种变体场景是当您在静态变量中引用 Context 或 Activity 时，这基本上会阻止以前的 Activity 被垃圾收集。

发生这种情况是因为当您在 Android 中“退出”应用程序时，其进程不一定会终止。这样当你再次运行它时，操作系统可以跳过一些耗时的步骤，并且可以更快地启动应用程序。当您保留一些数据以供快速重用时，这很好，当您无意中保留一些（巨大的）数据然后尝试再次重新创建这些数据时，这非常糟糕，这就是事情发展的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T02:58:46.247

尝试将 Activity 的 LaunchMode 设置为 SingleTop。

并且你应该在Activity onDestroy 时释放资源。祝你好运。

# web-services - 当具有绑定文件的 DynamicClientFactory 创建 createClient() 时，发生异常

> ID：10441820
> 
> 赞同：0
> 
> 时间：2012-05-04T02:15:36.533
> 
> 标签：web-services, apache, dynamic, cxf

**有人让我知道如何通过 DynamicClientFactory 使用绑定文件创建客户端对象。**

这是我测试过的示例代码。它发生了异常。

```
String wsdlURL = "http://localhost/test?wsdl";
ClassLoader loader = Thread.currentThread().getContextClassLoader();
JaxWsDynamicClientFactory factory = JaxWsDynamicClientFactory.newInstance();
List<String> bindingFiles = new ArrayList<String>();
File bindingFile = new File("custom.xml");
try {
     bindingFiles.add(bindingFile.getCanonicalPath().toString());
} catch (IoException e) {
    e.printStackTrace();
}
Client client = factory.createClient(wsdlURL, loader, bindingFiles); 
```

下面是custom.xml。

```
<bindings xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
    wsdlLocation="http://localhost/test?wsdl"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" 
    xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" 
    jaxb:version="2.0" jaxb:extensionBindingPrefixes="xjc"
    xmlns="http://java.sun.com/xml/ns/jaxws">
    <enableWrapperStyle>true</enableWrapperStyle>
    <jaxb:globalBindings>
        <xjc:simple/> 
    </jaxb:globalBindings>
</bindings> 
```

当我在示例代码之上运行时，我得到了以下异常..

```
java.lang.reflect.UndeclaredThrowableException
    at $Proxy18.bind(Unknown Source)
    at org.apache.cxf.endpoint.dynamic.DynamicClientFactory.createClient(DynamicClientFactory.java:318)
    at org.apache.cxf.endpoint.dynamic.DynamicClientFactory.createClient(DynamicClientFactory.java:252)
    at DynamicWebServiceClient_test.test(DynamicWebServiceClient_test.java:93)
    at DynamicWebServiceClient_test.main(DynamicWebServiceClient_test.java:54)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.cxf.common.util.ReflectionInvokationHandler.invoke(ReflectionInvokationHandler.java:52)
    ... 5 more
Caused by: java.lang.reflect.UndeclaredThrowableException
    at $Proxy20.fatalError(Unknown Source)
    at com.sun.tools.internal.xjc.api.impl.s2j.SchemaCompilerImpl.fatalError(SchemaCompilerImpl.java:279)
    at com.sun.tools.internal.xjc.util.ErrorReceiverFilter.fatalError(ErrorReceiverFilter.java:71)
    at com.sun.xml.internal.xsom.impl.parser.ParserContext$2.fatalError(ParserContext.java:196)
    at com.sun.xml.internal.xsom.impl.parser.NGCCRuntimeEx.unexpectedX(NGCCRuntimeEx.java:484)
    at com.sun.xml.internal.xsom.impl.parser.state.NGCCHandler.unexpectedEnterElement(NGCCHandler.java:179)
    at com.sun.xml.internal.xsom.impl.parser.state.Schema.enterElement(Schema.java:401)
    at com.sun.xml.internal.xsom.impl.parser.state.NGCCRuntime.startElement(NGCCRuntime.java:243)
    at org.xml.sax.helpers.XMLFilterImpl.startElement(XMLFilterImpl.java:527)
    at com.sun.tools.internal.xjc.util.SubtreeCutter.startElement(SubtreeCutter.java:93)
    at com.sun.tools.internal.xjc.reader.ExtensionBindingChecker.startElement(ExtensionBindingChecker.java:133)
    at org.xml.sax.helpers.XMLFilterImpl.startElement(XMLFilterImpl.java:527)
    at com.sun.tools.internal.xjc.reader.xmlschema.parser.IncorrectNamespaceURIChecker.startElement(IncorrectNamespaceURIChecker.java:102)
    at org.xml.sax.helpers.XMLFilterImpl.startElement(XMLFilterImpl.java:527)
    at com.sun.tools.internal.xjc.reader.xmlschema.parser.CustomizationContextChecker.startElement(CustomizationContextChecker.java:177)
    at org.xml.sax.helpers.XMLFilterImpl.startElement(XMLFilterImpl.java:527)
    at com.sun.tools.internal.xjc.reader.internalizer.DOMForestScanner$LocationResolver.startElement(DOMForestScanner.java:130)
    at com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:228)
    at com.sun.xml.internal.bind.unmarshaller.DOMScanner.scan(DOMScanner.java:111)
    at com.sun.tools.internal.xjc.reader.internalizer.DOMForestScanner.scan(DOMForestScanner.java:78)
    at com.sun.tools.internal.xjc.reader.internalizer.DOMForestScanner.scan(DOMForestScanner.java:86)
    at com.sun.tools.internal.xjc.reader.internalizer.DOMForestParser.parse(DOMForestParser.java:88)
    at com.sun.tools.internal.xjc.ModelLoader$XMLSchemaParser.parse(ModelLoader.java:251)
    at com.sun.xml.internal.xsom.impl.parser.NGCCRuntimeEx.parseEntity(NGCCRuntimeEx.java:326)
    at com.sun.xml.internal.xsom.impl.parser.ParserContext.parse(ParserContext.java:113)
    at com.sun.xml.internal.xsom.parser.XSOMParser.parse(XSOMParser.java:154)
    at com.sun.xml.internal.xsom.parser.XSOMParser.parse(XSOMParser.java:143)
    at com.sun.tools.internal.xjc.ModelLoader.createXSOM(ModelLoader.java:505)
    at com.sun.tools.internal.xjc.api.impl.s2j.SchemaCompilerImpl.bind(SchemaCompilerImpl.java:226)
    ... 10 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.cxf.common.util.ReflectionInvokationHandler.invoke(ReflectionInvokationHandler.java:52)
    ... 39 more
Caused by: java.lang.RuntimeException: Fatal error compiling schema from WSDL at {http://localhost/test?wsdl}: Unexpected <jaxws:bindings> appears at line 18 column 62
    at org.apache.cxf.endpoint.dynamic.DynamicClientFactory$InnerErrorListener.fatalError(DynamicClientFactory.java:739)
    ... 44 more
Caused by: org.xml.sax.SAXParseException: Unexpected <jaxws:bindings> appears at line 18 column 62
    at com.sun.xml.internal.xsom.impl.parser.NGCCRuntimeEx.unexpectedX(NGCCRuntimeEx.java:477)
    ... 34 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:31:24.393

add this :

```
System.setProperty("javax.xml.transform.TransformerFactory",
"org.apache.xalan.processor.TransformerFactoryImpl"); 
```

and `"(xalan-2.7.1.jar" and serializer-2.7.1.jar") jar`

# ruby - ruby，如何用 gsub 删除末尾的空格？

> ID：10441826
> 
> 赞同：1
> 
> 时间：2012-05-04T02:17:16.757
> 
> 标签：ruby, regex, string

这将删除所有空格：

```
irb(main):021:0> 'gff gf ggfgfg '.gsub(' ','')
=> "gffgfggfgfg" 
```

但我只想删除最后的空间，

就像是

```
irb(main):023:0>  'gff gf ggfgfg '.gsub([*' '$],'') 
```

但我得到：

```
SyntaxError: compile error
(irb):25: syntax error, unexpected $undefined, expecting ']'
'gff gf ggfgfg '.gsub([*' '$],'')
                            ^
    from (irb):25
    from :0
                           ^
    (irb):23: syntax error, unexpected ',', expecting $end
    'gff gf ggfgfg '.gsub(^' ','')
                               ^
        from (irb):23
        from :0 
```

nb 我不能使用 truncate、trim 和其他 rails 助手。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T02:19:10.243

使用仅匹配字符串末尾空格的正则表达式：

```
'foo bar '.gsub(/\s+$/,'') # => "foo bar" 
```

还有[`rstrip`和`rstrip!`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-rstrip)：

```
'foo bar '.rstrip # => "foo bar" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T02:26:58.370

还有[`String#rstrip`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-rstrip)，这不是 Rails 的事情：

```
'  foo bar   '.rstrip # => "  foo bar" 
```

有一个自修改版本`rstrip!`，以及用于前导空格的`lstrip`( ) 和用于两者的( )。`!``strip``!`

# iphone - 从 app1 启动 app2 并传递数据

> ID：10441827
> 
> 赞同：2
> 
> 时间：2012-05-04T02:17:20.943
> 
> 标签：iphone, objective-c, cocoa-touch, ios5, uiapplication

我在同一台设备上有 2 个不同的应用程序。我想从第二个打开第一个应用程序。那怎么会发生？基本上，我想通过点击 app1 中的某个按钮将一些数据从 app1 传递到 app2。一旦被点击，app2 应该被启动并根据传入的数据在 app2 中执行一些操作。

如何实现此功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:21:54.847

制作自己的应用程序“URL Scheme”

[看这个](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

[还有这个](http://wiki.akosma.com/IPhone_URL_Schemes)

你可以从 facebook 查看代码

```
// Pre 4.2 support
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [facebook handleOpenURL:url]; 
}

// For 4.2+ support
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [facebook handleOpenURL:url]; 
} 
```

如果您的应用程序从其他应用程序打开，您可能会调用此方法

# php - 为什么我的图像名称不会在 PHP 中转换为小写？

> ID：10441832
> 
> 赞同：0
> 
> 时间：2012-05-04T02:18:46.077
> 
> 标签：php, wordpress

这是我正在使用的代码：

```
<img src="/images/<?php strtolower(the_title()); ?>.jpg" border="0" > 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T02:21:32.287

Wordpress [the_title()](http://codex.wordpress.org/Function_Reference/the_title)函数默认回显标题。您需要将 echo 参数设置为 false 并自己回显小写输出。

```
<img src="/images/<?php echo strtolower(the_title('','',false)); ?>.jpg" border="0" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T02:20:53.353

`the_title()`由于您的代码段中没有 echo 语句，因此看起来实际上是回显了标题。所以你的电话`strtolower()`基本上是什么都不做。您需要捕获的输出，`the_title()`然后您可以将其转换为小写。

```
ob_start();
the_title();
$title = $template = ob_get_clean();
<img src="/images/<?php echo strtolower($title); ?>.jpg" border="0" /> 
```

# android - 清除下载权限拒绝？

> ID：10441833
> 
> 赞同：4
> 
> 时间：2012-05-04T02:18:48.530
> 
> 标签：android, permissions, download

我想通过以下代码清除下载历史记录：

> getContentResolver().delete(Uri.parse("content://downloads/my_downloads"), null, null);

但总是失败，因为我声明了 Permission Denial ！

> E/AndroidRuntime(3278): java.lang.SecurityException: Permission Denial: 从 pid=3278 写入 com.android.providers.downloads.DownloadProvider uri content://downloads/my_downloads, uid=10081 需要 android.permission.ACCESS_DOWNLOAD_MANAGER

有人有什么建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:20:46.437

将此添加到您的 AndroidManifest.xml

```
<uses-permission android:name="android.permission.ACCESS_DOWNLOAD_MANAGER" /> 
```

就在`<manifest>`标签下面

# charts - 谷歌图表工具 - 如何创建堆积条形图

> ID：10441838
> 
> 赞同：12
> 
> 时间：2012-05-04T02:19:24.227
> 
> 标签：charts

> **可能重复：**
> [有人可以帮助我使用谷歌图表创建一个简单的垂直条形图吗？](https://stackoverflow.com/questions/4146148/can-someone-help-me-create-a-simple-vertical-bar-chart-using-google-charts)

我使用新的谷歌图表工具，我想创建堆积条形图格式。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-04T02:47:23.507

Google Developers 网站提供了有关条形图格式的一些详细信息：[https ://developers.google.com/chart/interactive/docs/gallery/barchart](https://developers.google.com/chart/interactive/docs/gallery/barchart)

要制作堆叠的普通条形图，您需要使用该`isStacked: true`选项。您可以将以下代码复制并粘贴到图表工具游乐场以查看工作示例： [http ://code.google.com/apis/ajax/playground/?type=visualization](http://code.google.com/apis/ajax/playground/?type=visualization)

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Year', 'Austria', 'Bulgaria', 'Denmark', 'Greece'],
    ['2003',  1336060,    400361,    1001582,   997974],
    ['2004',  1538156,    366849,    1119450,   941795],
    ['2005',  1576579,    440514,    993360,    930593],
    ['2006',  1600652,    434552,    1004163,   897127],
    ['2007',  1968113,    393032,    979198,    1080887],
    ['2008',  1901067,    517206,    916965,    1056036]
  ]);

  // Create and draw the visualization.
  new google.visualization.BarChart(document.getElementById('visualization')).
      draw(data,
           {title:"Yearly Coffee Consumption by Country",
            width:600, height:400,
            vAxis: {title: "Year"},
            hAxis: {title: "Cups"},
            isStacked: true}
      );
} 
```

您可能还对堆积面积图感兴趣，具体取决于您尝试显示的数据。

还有一个问题给出了使用图表工具图像 API 的堆积条形图示例：[JavaScript 中的条形图：堆积条形图 + 分组条形图](https://stackoverflow.com/questions/5043236/bar-chart-in-javascript-stacked-bars-grouped-bars)

请注意，Google Chart Tools 的 Image Charts 部分已于 2012 年 4 月 20 日正式弃用。根据 Google 的弃用政策，图像图表仍将工作一段时间，但我建议您专注于上述交互式 HTML5+SVG 实现。

# cuda - cuda 线程和块

> ID：10441840
> 
> 赞同：1
> 
> 时间：2012-05-04T02:19:48.860
> 
> 标签：cuda

我在 NVIDIA 论坛上发布了这个，我想我会得到更多的帮助。

我在尝试扩展我的代码以执行多种情况时遇到了麻烦。我一直在考虑最常见的情况进行开发，现在是测试的时候了，我需要确保它适用于不同的情况。目前我的内核是在一个循环中执行的（我们没有做一个内核调用来完成整个事情是有原因的。）以计算矩阵行中的值。最常见的情况是 512 列乘 512 行。我需要考虑大小为 512 x 512、1024 x 512、512 x 1024 和其他组合的矩阵，但最大的矩阵将是 1024 x 1024 矩阵。我一直在使用一个相当简单的内核调用：

```
launchKernel<<<1,512>>>(................) 
```

该内核适用于常见的 512x512 和 512 x 1024（分别为列、行）情况，但不适用于 1024 x 512 情况。这种情况需要 1024 个线程来执行。在我的天真中，我一直在尝试不同版本的简单内核调用来启动 1024 个线程。

```
launchKernel<<<2,512>>>(................)  // 2 blocks with 512 threads each ???
launchKernel<<<1,1024>>>(................) // 1 block with 1024 threads ??? 
```

我相信我的问题与我对线程和块缺乏了解有关

这是 deviceQuery 的输出，如您所见，我最多可以有 1024 个线程

```
C:\ProgramData\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.1\C\bin\win64\Release\deviceQuery.exe Starting...

 CUDA Device Query (Runtime API) version (CUDART static linking)

Found 2 CUDA Capable device(s)

Device 0: "Tesla C2050"
  CUDA Driver Version / Runtime Version          4.2 / 4.1
  CUDA Capability Major/Minor version number:    2.0
  Total amount of global memory:                 2688 MBytes (2818572288 bytes)
  (14) Multiprocessors x (32) CUDA Cores/MP:     448 CUDA Cores
  GPU Clock Speed:                               1.15 GHz
  Memory Clock rate:                             1500.00 Mhz
  Memory Bus Width:                              384-bit
  L2 Cache Size:                                 786432 bytes
  Max Texture Dimension Size (x,y,z)             1D=(65536), 2D=(65536,65535), 3D=(2048,2048,2048)
  Max Layered Texture Size (dim) x layers        1D=(16384) x 2048, 2D=(16384,16384) x 2048
  Total amount of constant memory:               65536 bytes
  Total amount of shared memory per block:       49152 bytes
  Total number of registers available per block: 32768
  Warp size:                                     32
  Maximum number of threads per block:           1024
  Maximum sizes of each dimension of a block:    1024 x 1024 x 64
  Maximum sizes of each dimension of a grid:     65535 x 65535 x 65535
  Maximum memory pitch:                          2147483647 bytes
  Texture alignment:                             512 bytes
  Concurrent copy and execution:                 Yes with 2 copy engine(s)
  Run time limit on kernels:                     Yes
  Integrated GPU sharing Host Memory:            No
  Support host page-locked memory mapping:       Yes
  Concurrent kernel execution:                   Yes
  Alignment requirement for Surfaces:            Yes
  Device has ECC support enabled:                Yes
  Device is using TCC driver mode:               No
  Device supports Unified Addressing (UVA):      No
  Device PCI Bus ID / PCI location ID:           40 / 0
  Compute Mode:
     < Default (multiple host threads can use ::cudaSetDevice() with device simultaneously) >

Device 1: "Quadro 600"
  CUDA Driver Version / Runtime Version          4.2 / 4.1
  CUDA Capability Major/Minor version number:    2.1
  Total amount of global memory:                 1024 MBytes (1073741824 bytes)
  ( 2) Multiprocessors x (48) CUDA Cores/MP:     96 CUDA Cores
  GPU Clock Speed:                               1.28 GHz
  Memory Clock rate:                             800.00 Mhz
  Memory Bus Width:                              128-bit
  L2 Cache Size:                                 131072 bytes
  Max Texture Dimension Size (x,y,z)             1D=(65536), 2D=(65536,65535), 3D=(2048,2048,2048)
  Max Layered Texture Size (dim) x layers        1D=(16384) x 2048, 2D=(16384,16384) x 2048
  Total amount of constant memory:               65536 bytes
  Total amount of shared memory per block:       49152 bytes
  Total number of registers available per block: 32768
  Warp size:                                     32
  Maximum number of threads per block:           1024
  Maximum sizes of each dimension of a block:    1024 x 1024 x 64
  Maximum sizes of each dimension of a grid:     65535 x 65535 x 65535
  Maximum memory pitch:                          2147483647 bytes
  Texture alignment:                             512 bytes
  Concurrent copy and execution:                 Yes with 1 copy engine(s)
  Run time limit on kernels:                     Yes
  Integrated GPU sharing Host Memory:            No
  Support host page-locked memory mapping:       Yes
  Concurrent kernel execution:                   Yes
  Alignment requirement for Surfaces:            Yes
  Device has ECC support enabled:                No
  Device is using TCC driver mode:               No
  Device supports Unified Addressing (UVA):      No
  Device PCI Bus ID / PCI location ID:           15 / 0
  Compute Mode:
     < Default (multiple host threads can use ::cudaSetDevice() with device simultaneously) >

deviceQuery, CUDA Driver = CUDART, CUDA Driver Version = 4.2, CUDA Runtime Version = 4.1, NumDevs = 2, Device = Tesla C2050, Device = Quadro 600 
```

我只使用 Tesla C2050 设备 这是我的内核的精简版本，所以你知道它在做什么。

```
#define twoPi               6.283185307179586
#define speed_of_light      3.0E8
#define MaxSize             999

__global__ void calcRx4CPP4
(  
        const float *array1,  
        const double *array2,  
        const float scalar1,  
        const float scalar2,  
        const float scalar3,  
        const float scalar4,  
        const float scalar5,  
        const float scalar6,  
        const int scalar7,  
        const int scalar8,    
        float *outputArray1,
        float *outputArray2)  
{  

    float scalar9;  
    int idx;  
    double scalar10;
    double scalar11;  
    float sumReal, sumImag;  
    float real, imag;  

    float coeff1, coeff2, coeff3, coeff4;  

    sumReal = 0.0;  
    sumImag = 0.0;  

    // kk loop 1 .. 512 (scalar7)  
    idx = (blockIdx.x * blockDim.x) + threadIdx.x;  

    /* Declare the shared memory parameters */
    __shared__ float SharedArray1[MaxSize];
    __shared__ double SharedArray2[MaxSize];

    /* populate the arrays on shared memory */
    SharedArray1[idx] = array1[idx];  // first 512 elements
    SharedArray2[idx] = array2[idx];
    if (idx+blockDim.x < MaxSize){
        SharedArray1[idx+blockDim.x] = array1[idx+blockDim.x];
        SharedArray2[idx+blockDim.x] = array2[idx+blockDim.x];
    }            
    __syncthreads();

    // input scalars used here.
    scalar10 = ...;
    scalar11 = ...;

    for (int kk = 0; kk < scalar8; kk++)
    {  
        /* some calculations */
        // SharedArray1, SharedArray2 and scalar9 used here
        sumReal = ...;
        sumImag = ...;
    }  

    /* calculation of the exponential of a complex number */
    real = ...;
    imag = ...;
    coeff1 = (sumReal * real);  
    coeff2 = (sumReal * imag);  
    coeff3 = (sumImag * real);  
    coeff4 = (sumImag * imag);  

    outputArray1[idx] = (coeff1 - coeff4);  
    outputArray2[idx] = (coeff2 + coeff3);  

} 
```

因为我每个块的最大线程数是 1024，我以为我可以继续使用简单的内核启动，我错了吗？

如何使用 1024 个线程成功启动每个内核？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T03:20:46.927

您不想改变每个块的线程数。您应该使用 CUDA 占用计算器为您的内核获得每个块的最佳线程数。获得该数字后，您只需启动获得所需线程总数所需的块数。如果给定情况所需的线程数并不总是每个块的线程数的倍数，则在内核顶部添加代码以中止不需要的线程。( `if () return;`)。然后，您可以使用额外的参数将矩阵的维度传递给内核，或者使用 x 和 y 网格维度，具体取决于内核中需要哪些信息（我还没有研究过）。

我的猜测是，您在使用 1024 个线程时遇到问题的原因是，即使您的 GPU 在一个块中支持这么多线程，根据资源使用情况，您在每个块中可以拥有的线程数量还有另一个限制因素你的内核。限制因素可以是共享内存或寄存器使用。占用计算器会告诉您哪些信息，但该信息仅在您想优化内核时才重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T11:54:13.753

如果你使用一个有 1024 个线程的块，你会遇到问题，因为 MaxSize 只有 999 会导致错误的数据。

让我们为最后一个线程模拟它 #1023

```
__shared__ float SharedArray1[999];     
__shared__ double SharedArray2[999];

/* populate the arrays on shared memory */     
SharedArray1[1023] = array1[1023]; 
SharedArray2[1023] = array2[1023];     

if (2047 < MaxSize)
{         
    SharedArray1[2047] = array1[2047];         
    SharedArray2[2047] = array2[2047];     
}                 
__syncthreads(); 
```

如果您现在在计算中使用所有这些元素，这将不起作用。（您的计算代码未显示，因此它是一个假设）

# android - Android - 如何强制画廊重绘其视图？

> ID：10441846
> 
> 赞同：1
> 
> 时间：2012-05-04T02:20:33.380
> 
> 标签：android, gallery, border, invalidation

我有一个图片库，其中我在当前选择的图片周围放置了一个红色边框（当用户第一次打开屏幕时，第一个被选中，所以我在第一个视图周围绘制边框）。

当我单击另一个项目时，我想在新项目中绘制红色边框并擦除前一个项目的红色边框。

问题是我无法更改`onClick`画廊事件内的边框。如果我改变它，什么也不会发生（我认为是因为画廊的项目没有被重绘）。我试图`postInvalidate()`在我的画廊变量和它的每个视图中调用 invalidate() ，但它不起作用！视图不会重绘（即，红色边框仅保留在图库的第一项中）。

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T03:14:13.067

在您的适配器代码中，保存一个`int`值，该值将是 selected 的位置`View`。在 的`onItemClicked`方法中，使用提供的位置`Gallery`更新变量。`int`然后，在该`getView`方法中，如果正在绘制的位置是选定位置，则绘制您的边框。您可以继续使用提供`View`的 in应用边框`onItemClicked`，或调用`notifyDataSetChanged`适配器。首选第一种方法，因为`notifyDataSetChanged`将重新创建每个可见`View`的 。

通常，您还需要检查它是否*不是*选定位置，以便您可以从重用的`View`. 但是，`Gallery`总是会创建一个新的`View`. `convertView`对于 a 始终为空`Gallery`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T02:43:51.283

尝试使用 requestLayout(); 祝你好运。

# c++ - Boost Python：导入模块时遇到问题

> ID：10441851
> 
> 赞同：6
> 
> 时间：2012-05-04T02:21:06.333
> 
> 标签：c++, python, boost, boost-python

我目前正在尝试使用Boost Python导出一个类，然后在对应的程序中使用它。

```
/**
    main.cpp
*/
#define BOOST_PYTHON_STATIC_LIB
#include <Resource\ZipResourceFile.hpp>
#include <Resource\ResourceCache.hpp>
#include <Windows.h>
#include <boost/python.hpp>
#include <iostream>

/* a simple add method, for s & g's */
int add(int a, int b)
{
    return a + b;
}

/* Foo class*/
class Foo
{
public:
    Foo(int n);
    ~Foo();
    void f();
};

/* Foo ctor, does nothingm just wanted to pass and arg */
Foo::Foo(int n)
{

}

/* destructor */
Foo::~Foo()
{
}

/* f() implementation, calls Foo!!! to cout */
void Foo::f()
{
    std::cout << "Foo!!!" << '\n';
}

/* Boost python module definition */
BOOST_PYTHON_MODULE(PyBackend)
{
    using namespace boost::python;

    def("add", add);
    class_<Foo>("Foo", init<int>())
        .def("f", &Foo::f);
}

int main(int argc, char* argv[])
{
    PyImport_AppendInittab("PyBackend", init_PyBackend);
    Py_Initialize();
    PyRun_SimpleString("import PyBackend");
    PyRun_SimpleString("foo = PyBackend.Foo(1)");

    Py_Finalize();

    {
        int n;
        std::cin >> n;
    }
    return 0;
} 
```

无论如何，我不知道在哪里可以找到函数 init_PyBackend，尽管如果我不使用 Boost.Python，这似乎是合乎逻辑的事情。

模块本身不在单独的 DLL 中，它是同时编译的。无论如何，有人对我能做什么有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T04:14:25.400

命名模块初始化函数的约定是：

*   `init***`对于 Python 2.x（无下划线）。
*   `PyInit_***`对于 Python 3.x。

Boost.Python 的`BOOST_PYTHON_MODULE`宏遵循这些约定。

由于您使用的是 Python 3.2，`PyBackend`因此将调用模块的初始化函数：

`PyInit_PyBackend`.

Note that for modules with names starting with an underscore, like `_sre`, the init functions are `init_sre`/`PyInit__sre` (notice two underscores for Python 3.x).

# .net - 用于 .net 中用于 QR 码条码的纠错的 LDPC 库

> ID：10441855
> 
> 赞同：1
> 
> 时间：2012-05-04T02:21:35.297
> 
> 标签：.net, qr-code, error-correction

我需要用于 .net 中 qr 代码的低密度奇偶校验 (LDPC) 代码库。请有人帮助我。在此先感谢。

# asp.net - WebResource.axd 抛出异常

> ID：10441863
> 
> 赞同：1
> 
> 时间：2012-05-04T02:23:27.637
> 
> 标签：asp.net, webresource.axd

我的 ASP.Net 3.5 Web 表单站点存在问题，有时请求：

> WebResource.axd?d=eIozr3loXr3APyEewE38BIDKqN_q3qvb1YMpcivEzsc8xk5zz-o6uaPkpyFICfz_9GLwnEFNScd7yKWROBOvLU4gE-Y1&t=634604893351482412

导致抛出异常。这是在 WebForms 回发 javascript 中加载的请求（例如 WebForm_DoPostBackWithOptions、WebForm_DoCallback 等）。

该错误似乎与此 SO 帖子非常相似：[WebResource.axd throwing exceptions in web farm](https://stackoverflow.com/questions/4718413/webresource-axd-throwing-exceptions-in-web-farm)，除了生产环境是单个服务器，而不是 Web 场。这排除了跨不同服务器或不同 System.Web.dll 版本的不同机器关键元素的任何问题。

还有哪些其他情况可能导致此问题偶尔发生？

**编辑：**我刚刚注意到失败的请求实际上来自：

> webresource.axd?d=73uzdnkyw4tt5-xgrmheyelsy01btqexhl8hk8myqspxxbu6krzyliy7e8-6jyofqge7m6uwfve9be3rhinncnv94v01&t=634258886654344891

这都是小写，这将导致Base64解码失败。不知道为什么有时aspx页面会以小写形式吐出这个链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:28:58.677

原来有一个 Http 模块使用 .ToLower() 重定向 URL，这意味着 WebResource.axd 中的 Base 64 编码查询字符串被修改，因此解析失败。

# .net - valueinjecter 中的 FlatLoop/UnFlatLoop 是什么意思？

> ID：10441869
> 
> 赞同：2
> 
> 时间：2012-05-04T02:24:26.530
> 
> 标签：.net, mapper, valueinjecter

这是 valueinjecter 文档（http://valueinjecter.codeplex.com/documentation），但我不是这样

清楚这些术语，flattening/unflattening ,FlatLoop/UnFlatLoop ...，我怎么能

理解这些更容易吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:27:06.030

flatloop 会这样做：

```
flat.InjectFrom<FlatLoopValueInjection>(unflat);

//same as doing
flat.HeythereHowareYou = unflat.Hey.ther.How.are.You

flat.abcde = unflat.abc.d.e 
```

反之亦然

```
unflat.InjectFrom<UnflatLoopValueInjection>(flat);

//same as doing
unflat.very.big.object.nesting = flat.verybigobjectnesting

unflat.a.b.c.d.e = flat.abcde 
```

希望你会喜欢我解释事情的方式:)

# iphone - UIPinchGestureRecognizer 需要两次触摸

> ID：10441871
> 
> 赞同：1
> 
> 时间：2012-05-04T02:24:37.633
> 
> 标签：iphone, objective-c, ipad, uigesturerecognizer

我已将以下手势识别器添加到视图中：

```
UIPinchGestureRecognizer *pch= [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(ViewPinching:)];
[[self view] addGestureRecognizer:pch];

// and

UIPanGestureRecognizer *d = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(ViewDragging:)];
[d setMinimumNumberOfTouches:4];
[[self view] addGestureRecognizer:d]; 
```

我想在拖动 4 个手指时触发事件，并且当我这样做时，会触发 Pinch 手势识别器而不是 Pan 手势识别器。我在想，如果我限制 UIPinchGestureRecognizer 仅在 touches.count=2 时被触发，也许我可以解决这个问题

## 编辑

我不知道这是否实用。也许我可以补充：

```
 UIPinchGestureRecognizer *pch= [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(ViewPinching:)];
[[self view] addGestureRecognizer:pch]; 
```

每次触摸开始时，如果有两次触摸，我将添加该事件并将其删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:56:58.510

这最终是一个坏主意。iOS 5 中的 4 指捏合将关闭您的应用程序，而 4 指平移将切换到下一个应用程序（显然不适合 UX）。如果您*绝对*必须使用 4 个手指，请创建 UIGestureRecognizer 的子类并自己执行捏合逻辑。让我提前为没有示例道歉，因为您的用例非常独特。

# javascript - 如何从 CoffeeScript 重现作为匿名函数的正确 JavaScript 对象文字属性？

> ID：10441877
> 
> 赞同：0
> 
> 时间：2012-05-04T02:25:18.387
> 
> 标签：javascript, syntax, coffeescript

我有以下有效的 javascript：

```
App.Person = DS.Model.extend({
firstName: DS.attr('string'),
lastName: DS.attr('string'),
birthday: DS.attr('date'),

fullName: function() {
    return this.get('firstName') + ' ' + this.get('lastName');
  }.property('firstName', 'lastName')
}); 
```

根据[js2coffee.org](http://js2coffee.org "js2coffee.org")这个 js 相当于下面的咖啡脚本：

```
App.Person = DS.Model.extend(
  firstName: DS.attr("string")
  lastName: DS.attr("string")
  birthday: DS.attr("date")
  fullName: ->
    @get("firstName") + " " + @get("lastName")
  .property("firstName", "lastName")
) 
```

然而，同样的咖啡脚本不会编译回有效的 javascript。它甚至不是有效的咖啡脚本，因为它会出现“意外”错误。"

如何编写有效的 Coffee Script 来创建与上面列出的相同或语法等效的 javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T02:36:38.410

`Coffeescript:`

```
App.Person = DS.Model.extend(
  firstName: DS.attr("string")
  lastName: DS.attr("string")
  birthday: DS.attr("date")
  fullName: ( ->
    @get("firstName") + " " + @get("lastName")
  ).property("firstName", "lastName")
) 
```

编译为：

```
App.Person = DS.Model.extend({
  firstName: DS.attr("string"),
  lastName: DS.attr("string"),
  birthday: DS.attr("date"),
  fullName: (function() {
    return this.get("firstName") + " " + this.get("lastName");
  }).property("firstName", "lastName")
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T01:19:41.093

反正有没有让它像这样：

```
class App.Person extends DS.Model
    name: DS.attr 
```

我知道它不适用于这种语法，但我想使用 Coffee 的类语法

# asp.net-mvc-3 - MVC 将 JSON ViewModel 传递给 View

> ID：10441878
> 
> 赞同：6
> 
> 时间：2012-05-04T02:25:18.747
> 
> 标签：asp.net-mvc-3, knockout.js, jsonp, viewmodel

我有一个 MVC 应用程序，我正在使用各种`JsonResult`端点来填充 javascript ViewModel。

我一直在使用几个 jQuery Ajax 请求来填充模型，但我希望将尽可能多的初始模型传递给服务器上的视图。

ViewModel 有 3-5 个部分（取决于用户在应用程序中的位置）：

1.  基本页面链接，这些链接不会经常更改，并且在整个用户会话中可能完全相同
2.  用户通知。
3.  用户数据。
4.  （可选）可视数据
5.  （可选）杂项数据

我目前正在使用此代码来加载前三个部分：

```
$(document).ready(function () {

    ko.applyBindings(viewModel);
    @Html.Raw(ViewBag.Script)

    // Piece 1\.  Almost always the same thing
    postJSON('@Url.Action("HomeViewModelJson", "Home")', function (data) {

        if (data == null)
            return;

        for (var i in data.Tabs) {
            viewModel.tabs.push({ name: data.Tabs[i] });
        }

        for (var i in data.Buttons) {
            viewModel.metroButtons.push({ name: data.MetroButtons[i] });
        }

        for (var i in data.Ribbons) {
            viewModel.ribbons.push(data.Ribbons[i]);
        }
        ApplyButtonThemes();
    });
});

// Piece 2\.  Changes constantly. OK as is
postJSON('@Url.Action("GetNotifications", "NotificationAsync")', function (nots) {
    viewModel.notifications.removeAll();

    ko.utils.arrayForEach(nots, function (item) {
        item.readNotification = function () {
            hub.markNotificationAsRead(this.Id);
            return true;
        };
        viewModel.notifications.push(item);
    });
});

// Piece 3\. Changes but should also be loaded at startup
postJSON('@Url.Action("GetUser", "UserAsync")', function (user) {
    viewModel.user(koifyObject(user));
});

postJSON = function(url, data, callback) {
    if($.isFunction(data)) {
        callback = data;
        data = {};
    }
    $.ajax({
        'type': 'POST',
        'url': url,
        'contentType': 'application/json',
        'data': ko.toJSON(data),
        'dataType': 'json',
        'success': callback
    });
}; 
```

我尝试做这样的事情，但我发现通过使用`@Html.Action("HomeViewModelJson", "Home")`导致 HTTP 标头发生更改，并且整个页面都像 JSON 一样发送

```
 (function (data) {

            if (data == null)
                return;

            for (var i in data.Tabs) {
                viewModel.tabs.push({ name: data.Tabs[i] });
            }

            for (var i in data.MetroButtons) {
                viewModel.metroButtons.push({ name: data.MetroButtons[i] });
            }

            for (var i in data.Ribbons) {
                viewModel.ribbons.push(data.Ribbons[i]);
            }
            ApplyMetroButtonThemes();
        })('@Html.Action("HomeViewModelJson", "Home")'); 
```

我想做的是`JsonResult`在页面发送给用户之前，使用现有的端点将 Json 数据获取到服务器端的 ViewModel 中。

是否有任何选项可以让我在不重写控制器的情况下做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T06:08:51.583

渲染主视图时，您使用的是视图模型，对吗？在此视图模型中，只需在返回视图之前填充您不希望使用 AJAX 获取的属性：

```
public ActionResult Index()
{
    MyViewModel model = ...
    model.Prop1 = ...
    model.Prop2 = ...
    return View(model);
} 
```

例如，如果您有以下用于 AJAX 请求的操作：

```
public JsonResult GetProp1()
{
    Property1ViewModel model = ...
    return Json(model, JsonRequestBehavior.AllowGet);
} 
```

您可以从主要操作中使用它来填充各个属性：

```
model.Prop1 = (Property1ViewModel)GetProp1().Data;
model.Prop2 = (Property2ViewModel)GetProp2().Data; 
```

然后在相应的视图中，您可以使用该`Json.Encode`方法将整个模型序列化为 JSON 字符串：

```
@model MyViewModel
<script type="text/javascript">
    var model = @Html.Raw(Json.Encode(Model));
    // You could use model.Prop1 and model.Prop2 here
</script> 
```

或者，如果您不需要所有属性，也可以序列化单个属性：

```
@model MyViewModel
<script type="text/javascript">
    var prop1 = @Html.Raw(Json.Encode(Model.Prop1));
</script> 
```

# c# - C# 中的菊花链方法

> ID：10441879
> 
> 赞同：2
> 
> 时间：2012-05-04T02:25:19.770
> 
> 标签：c#, c#-4.0

我是 .NET 和 C# 的新手，来自 Ruby 的背景。虽然我已经成功地用 C# 开发了几个小型应用程序，但我还有很多东西要学。不过，让我感到困惑的一件事是找到一种有效的方法来调用对象的多个方法。我将举一个使用字符串的例子。

我习惯于在 Ruby 中做这样的事情：

```
my_string = "The quick brown fox\tjumped over the lazy dog\t\n"
puts my_string.strip.split("\t") 
```

然而，要在 C# 中完成同样的事情，这就是我现在知道要做的所有事情：

```
var myString = "The quick brown fox\tjumped over the lazy dog\t\n";
var myStringTrim = myString.Trim();
var myStringSplit = myStringTrim.Split('\t');
foreach (var s in myStringSplit)
    {
        Console.WriteLine(s);
    } 
```

那么，在 C# 中是否有更有效的方法来完成此任务？

这个特殊的例子让我想知道如果我使用这种方法来读取、解析和处理一个大的文本文件或类似的东西，性能会发生什么变化。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T02:28:32.413

你可以`myString.Trim().Split('\t');`用 C#

你可以这样做，因为`Trim()`返回一个`string`对象，然后你可以调用`Split()`它，它返回一个数组。

但它不一定更“有效”。正在创建临时对象，即使您没有将它们存储在变量中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T02:29:31.273

这工作得很好......

```
var myString = "The quick brown fox\tjumped over the lazy dog\t\n".Trim().Split('\t'); 
```

这些方法是字符串对象的实例方法，它们的工作方式与您在 Ruby 中所期望的一样。

要记住的一件事是字符串是不可变的。也就是说，这些方法不会更改字符串变量的原始值，而是返回原始的修改副本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T02:29:08.330

您可以像这样将这些命令链接在一起：

```
myString.Trim().Split('\t').ForEach(s => Console.WriteLine(s)); 
```

# html - 使用 indexedDB 时出现错误“操作失败，因为找不到请求的数据库对象...”

> ID：10441882
> 
> 赞同：5
> 
> 时间：2012-05-04T02:26:30.443
> 
> 标签：html, firefox, indexeddb

我们正在构建一个应用程序，在 Firefox 上广泛使用 IndexedDB 来存储离线数据。

这在大多数情况下运行良好，但偶尔会失败并出现如下错误：

```
Exception... "The operation failed because the requested database object could 
not be found. For example, an object store did not exist but was being opened."  
code: "3" nsresult: "0x80660003 (NS_ERROR_DOM_INDEXEDDB_NOT_FOUND_ERR)" 
```

它似乎在代码的各个地方都失败了；这是罪魁祸首之一：

```
_writePage: (storeName, startIndex, endIndex, binder) ->
  writeTransaction = @connection.transaction([storeName], @idbTransaction.READ_WRITE)
  store = writeTransaction.objectStore(storeName)
  for index in [startIndex...endIndex] when (item = binder.list[index])?
    writeRequest = store.put(item)
    writeRequest.onerror = binder.failCallback()
    writeRequest.onsuccess = binder.successCallback()
  if endIndex >= binder.list.length
    binder.finishedRegisteringCallbacks()
    return
  setTimeout((=> @_writePage(storeName, endIndex, endIndex + @WRITE_EACH_PAGE_SIZE, binder)), @WRITE_EACH_PAGE_DELAY)
  null 
```

令我困惑的是，在通常有效的自动化测试期间，故障很少发生（我们每数百次执行都会看到其中一个故障）。

~~值得一提的是，我们也存储了大量数据，大约为数百兆字节。~~结果证明自动化测试只存储几兆字节，所以这不是大小问题。

有没有其他人经历过（或者更好的是，经历过并修复过！）这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T04:07:08.687

这似乎是一个 Firefox 错误。我提出了[错误 751802 - 间歇性 IndexedDB 写入失败](https://bugzilla.mozilla.org/show_bug.cgi?id=751802)，我和我的同事正忙于与 Firefox 人员合作以帮助重现它。

暂时没有解决方法或修复方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T04:29:24.257

发生这种情况时，请检查您是否打开了多个选项卡。如果其中一个在`setVersion`（旧 API）或`onupgradedneeded`（新 API）中，则可能会在另一个中引起问题。

要进行调试，请确保您在打开数据库时正在寻找`onblocked`(vs. ) 事件。`onerror`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-28T20:51:15.507

添加到@Duncan的答案：

在那个线程上是一个在数据库创建/打开中抛出一个问题的想法

[https://bugzilla.mozilla.org/show_bug.cgi?id=751802#ch-8](https://bugzilla.mozilla.org/show_bug.cgi?id=751802#ch-8)

# javascript - JS 事件未附加到加载后创建的元素

> ID：10441883
> 
> 赞同：1
> 
> 时间：2012-05-04T02:26:31.213
> 
> 标签：javascript, jquery, javascript-events

**问题：**在单击按钮时创建一个元素，然后将单击事件附加到新元素。

我已经多次遇到这个问题，我似乎总能找到解决方法，但从未找到问题的根源。看一下代码：

**HTML：**

```
<select>
  <option>567</option>
  <option>789</option>
</select>

<input id="Add" value="Add" type="button">    <input id="remove" value="Remove" type="button">   

<div id="container">
  <span class="item">123</span>
  <br/>
  <span class="item">456</span>
  <br/>
</div> 
```

**JavaScript**

```
 $(".item").click(function () {
    if ($("#container span").hasClass("selected")) {
        $(".selected").removeClass("selected");
    }
    $(this).addClass("selected");
});

$("add").click(function() {

   //Finds Selected option from the Select

   var newSpan = document.createElement("SPAN");
    newSpan.innerHTML = choice;//Value from Option
    newSpan.className = "item";
    var divList = $("#container");
    divList.appendChild(newSpan);//I've tried using Jquery's Add method with no success
   //Deletes the selected option from the select
}) 
```

以下是我已经尝试过的一些方法：

*   标准 Jquery 单击“项目”类的元素
*   包括使用 live() 和 on() 方法
*   在元素创建后设置内联 onclick 事件
*   #Container 上使用 Bind 方法绑定单击事件处理程序的 Jquery 更改事件

**警告：**我无法创建另一个选择列表，因为我们正在使用 MVC，并且在从列表框中检索多个值时遇到了问题。因此，生成了一些隐藏元素，这些元素实际上与 MVC 相关联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:28:13.207

在这种情况下使用`$.on`而不是您的标准：`$.click`

```
$("#container").on("click", ".item", function(){
  if ( $("#container span").hasClass("selected") ) {
    $(".selected").removeClass("selected");
  }
  $(this).addClass("selected");
}); 
```

在我看来，您想在元素`.selected`之间移动类。`.item`如果是这种情况，我建议这样做：

```
$("#container").on("click", ".item", function(){
  $(this)
    .addClass("selected")
    .siblings()
      .removeClass("selected");
}); 
```

另请注意，如果您希望使用“添加”ID 绑定到元素，您`$("add")`应该这样做。`$("#add")`这部分也可以重写：

```
$("#add").click(function() {
  $("<span>", { html: $("select").val() })
    .addClass("item")
    .appendTo("#container");
}); 
```

# vim - Vim：对于多个文件：复制所有文本、替换和粘贴

> ID：10441885
> 
> 赞同：5
> 
> 时间：2012-05-04T02:26:33.987
> 
> 标签：vim

我想使用 Vim 对多个文件执行以下操作：

1.  复制每个文件中的所有文本
2.  替换一些文本
3.  将复制的文本粘贴到每个文件的末尾
4.  替换一些其他文本

这是我对一个文件的命令：

```
:%y
:%s/old1/new1/g
:G
:P
:%s/old2/new2/g 
```

谁能告诉我这样做的语法？特别是我是 Vim 的新手！

我发现 argdo 可以对多个文件执行命令。我发现了许多使用 argdo 替换文本的示例，但我找不到将 argdo 与 :%y、:G 或 :P 一起使用的语法

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T08:56:37.283

就像@ib 提到的那样，我会使用 ex 命令^(1来执行此操作)

```
:argdo %y | %s/old1/new1/g | $pu | %s/old2/new2/g 
```

您也很有可能希望在独占范围上进行操作（仅在第一部分进行第一次替换，仅在第二部分进行第二次替换）：

```
:argdo $mark a | %co$ | 1,'a s/old1/new1/g | 'a,$s/old2/new2/g 
```

要允许不匹配的替换，请添加`s///e`和添加`silent!`以使操作在许多文件的情况下更快。

```
:silent! argdo $mark a | %co$ | 1,'a s/old1/new1/ge | 'a,$s/old2/new2/ge 
```

* * *

¹（*请注意，argdo 默认需要一个 Ex 命令列表。您可以使用 eg`argdo norm! ggyG`来使用普通模式命令*）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T05:30:53.277

**UPD：**我的 Vim-fu 不如 @ib 或 @sehe 的强大，所以您可能想使用他们建议的解决方案而不是我的解决方案。

但是，我的解决方案更容易为我个人（作为 Vim 学徒）编辑和调试，所以无论如何，让它在这里。

* * *

您可以在 中添加以下临时功能`vimrc`：

```
function! MyTmpFunc()
   :%y
   :%s/old1/new1/g
   normal! G
   normal! P
   :%s/old2/new2/g
endfunction 
```

然后使用您需要影响的文件（类似`vim myfile1.txt myfile2.txt myfile3.txt`）重新启动 Vim，并执行以下命令：

`:argdo call MyTmpFunc()`

这就是您在问题中所描述的：`MyTmpFunc()`将为给 Vim 的每个参数调用函数。

`MyTmpFunc()`现在你可以从 vimrc中删除了。

还要注意`:bufdo`- 它为每个打开的缓冲区调用一些命令。还有`:windo`，它为每个窗口执行命令，但我个人觉得`:bufdo`最有用。

另请注意，如果您只需要在每个缓冲区中执行一个命令，则不必创建临时函数。比如说，如果你只需要将每个缓冲区中的“”替换`old1`为“ `new1`”，那么你可以执行以下命令：

`:bufdo %s/old1/new1/g`

就是这样。

# c# - 如何在没有任何数据库连接的情况下将数据内容添加到同一页面中的数据网格？

> ID：10441892
> 
> 赞同：1
> 
> 时间：2012-05-04T02:27:13.937
> 
> 标签：c#, asp.net

说，我有一个 TextBox - 当用户在 TextBox 中输入内容并单击添加内容时，应在没有任何数据库连接的情况下在 DataGrid 中填充内容。用户可以在文本框中添加重复项并单击添加，因此每个值都会填充到网格中。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:56:07.483

您可以尝试这样的事情，首先您必须导入*System.Collection.Generic*命名空间

```
 private List<string> addContent(string content)
{
    //create a generic list of string type
    List<string> s = new List<string>();

    for (int i = 0; i < 10; i++)
    {
        s.Add(content);
    }
    return s;
}

protected void btnAdd_Click(object sender, EventArgs e)
{
   //Passed the List<> as DataSource and then bind the content in the list<> in the  DataGrid
    this.DataGrid1.DataSource = this.addContent(this.txtadd.Text);
    this.DataGrid1.DataBind();

} 
```

我希望这对你有用

# jquery - jqgrid做ajax搜索

> ID：10441893
> 
> 赞同：1
> 
> 时间：2012-05-04T02:27:25.707
> 
> 标签：jquery, jqgrid

我需要为搜索编写一个网格。请看截图。当用户单击“搜索”时，它将使用 ajax 将第一页数据加载到网格中，然后用户单击页码，它将转到第 2 页，....如何设计此 Ajax ？你有原型吗？

我正在使用 jqgrid + JQuery。

谢谢

![在此处输入图像描述](../Images/1b14672238c26f76fc3c0edb10f8b419.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:21:05.150

```
<input type="text" name="ProjectID" id="ProjectID" />
<a href="#" id="SearchBtn">Search</a> 
```

您需要编写“beforeRequest”事件处理程序以将附加参数附加到 ajax 请求：

```
...
"url": '/SearchUrl'
"beforeRequest" : function DataBrowserGridOnBeforeRequest() {
    $("#TheGrid").jqGrid('setGridParam', { 
        postData: { "searchText": $('#ProjectID').val()}    
    });
}
...

$("SearchBtn").click(function(){
    $("#TheGrid").trigger('reloadGrid');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:07:24.890

网格可以进行工具栏搜索，这是您所要求的等等。[jqGrid Demos](http://www.trirand.com/blog/jqgrid/jqgrid.html)下有在线demo | [3.7 版新功能 |](http://www.trirand.com/blog/jqgrid/jqgrid.html) [工具栏搜索](http://www.trirand.com/blog/jqgrid/jqgrid.html)。

这些帮助有用？

# javascript - 使用javascript打开一个没有地址栏的自定义弹出窗口

> ID：10441894
> 
> 赞同：0
> 
> 时间：2012-05-04T02:27:28.733
> 
> 标签：javascript

我需要打开一个没有地址栏的新弹出窗口，我需要在该窗口中显示一些数据。我应该能够修改弹出窗口中的数据，一旦我单击“确定”，弹出窗口应该会关闭，数据应该传递到打开此弹出窗口的父屏幕。此外，弹出窗口应具有与父窗口相同的 css。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:34:47.600

请考虑使用[模式窗口](http://en.wikipedia.org/wiki/Modal_window)而不是弹出窗口，以提供更体面的用户体验。[你可以使用像fancybox这样的](http://fancybox.net/)[jquery](http://jquery.com/)插件轻松地做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T02:31:12.680

`onclick="window.open('abc.php','addressbar=no')"`应该做

# watir - Watir 3 模态窗口访问

> ID：10441897
> 
> 赞同：1
> 
> 时间：2012-05-04T02:27:51.237
> 
> 标签：watir, modal-window

我尝试了 watir wiki 示例来访问模式窗口。但得到参数错误。我正在尝试使用 watir 3 版本。

```
 puts b.modal_dialog(:title, "showModalDialog Method Sample Target Page").exists?
    puts b.modal_dialog(:title, "showModalDialog Method Sample Target Page").title
    b.modal_dialog(:title, "showModalDialog Method Sample Target Page").close
    b = Watir::Browser.new()
    b.goto("http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/refs/showModalDialog.htm")
    b.button(:value,"Push To Create").click_no_wait 
```

错误信息

```
 C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/contai
    ner.rb:60:in `modal_dialog': wrong number of arguments (2 for 0) (ArgumentError) from C:/webtest/popup.rb:29:in `<main>' 
```

有人可以帮助如何使用 watir 3 访问模式窗口

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T02:13:43.783

您收到的错误是说您提供的参数比该方法实际采用的参数多。

我从来没有调用在 Watir 中使用实际的模态方法，但是在对您提供的页面进行快速试验后，我能够使用以下方法与模态交互：

```
b.goto("http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/refs/showModalDialog.htm")
b.button(:id => "dCommand").click_no_wait
puts b.modal_dialog.text 
```

在上面的示例中，我让它打印出模式的文本，但大概可以替换任何常规的 Watir 命令。

在 Watir 3.0 或更早版本中，似乎已删除了对指示与哪个模态交互的参数的要求（可能是因为您只能与一个交互？）。当我主要在 Firefox 中进行测试时，我搬到了 Watir-webdriver，所以我不确定这何时会改变，但它似乎确实不接受 3.0 中的任何参数。

# javascript - 下拉延迟不起作用

> ID：10441899
> 
> 赞同：0
> 
> 时间：2012-05-04T02:28:09.870
> 
> 标签：javascript, jquery, drop-down-menu

所以我正在处理一个下拉菜单，但我遇到了问题。如果您以某种方式将鼠标悬停在它上面，下拉菜单会不停地上下移动。这是JS：

```
$("#solar-slide").hover(function() {
    $("ul", this).slideDown(100);
},
function() {
    $("ul", this).slideUp(100);
    }
); 
```

如果您想自己尝试，请访问 mjevange.mysite.syr.edu/SE

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:43:53.743

尝试添加停止（）：

```
$("#solar-slide").hover(function() {
    $("ul", this).stop(true).slideDown(100);
},
function() {
    $("ul", this).stop(true).slideUp(100);
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T02:37:16.613

这是因为您在悬停时移动菜单项。`top: 1px;`从你的CSS 中删除`.button:hover`应该可以修复它。

# asp.net - asp.net & SQL Server + 事务回滚

> ID：10441908
> 
> 赞同：0
> 
> 时间：2012-05-04T02:29:36.203
> 
> 标签：asp.net, sql

我在下面有一部分函数，​​它从第一个 SProc 中检索 autoID 并将其作为参数传递给另一个 SProc。在这里我使用事务回滚，假设我有一个场景，第一个 SProc 成功执行了所有操作，但在第二个 SProc 中遇到问题，第一个 SProc 操作是否会与第二个 SProc 一起回滚？一直以来，我只需要处理一个 SProc 事务，但这对我来说有点不同。谢谢。

```
Public Shared Function VoucherRedemption(ByVal dbTrans As DbTransaction _
                                      , ByVal dbConnection As DbConnection _
                                      , ByVal receiptNo As String _
                                      , ByVal voucherNo As String _
                                      , ByVal customerCode As String) As Boolean
Dim dbCommand As DbCommand = Nothing

Try
            If DbConnection.State <> ConnectionState.Open Then
                DbConnection.Open()
            End If

            dbCommand = GetStoredProcedureCommand("Mem_Redeem")
            dbCommand.Connection = DbConnection
            dbCommand.Transaction = dbTrans

            AddInParameter(dbCommand, "@ReceiptNo", DbType.String, 50, DBNull.Value)
            If Not String.IsNullOrEmpty(receiptNo) Then
                dbCommand.Parameters("@ReceiptNo").Value = receiptNo
            End If

            AddOutParameter(dbCommand, "@OutAutoIDs", DbType.String, 4000, DBNull.Value)

            ExecuteNonQuery(dbCommand)

            Dim outAutoIDs As String = CType(dbCommand.Parameters("@OutAutoIDs").Value, String)

            dbCommand = GetStoredProcedureCommand("Mem_Redeem_Log_Add")
            dbCommand.Connection = DbConnection
            dbCommand.Transaction = dbTrans

            AddInParameter(dbCommand, "@VoucherNo", DbType.String, 50, DBNull.Value)
            dbCommand.Parameters("@VoucherNo").Value = voucherNo 

            AddInParameter(dbCommand, "@RedeemTransactAutoID", DbType.String, 4000, DBNull.Value)
            dbCommand.Parameters("@RedeemTransactAutoID").Value = outAutoIDs

     ExecuteNonQuery(dbCommand)

        Catch ex As Exception
            Throw New DALException(ex, dbCommand, customerCode, "VoucherRedemption")
        Finally
            If Not dbCommand Is Nothing Then
                dbCommand.Dispose()
            End If
            If Not dbTrans Is Nothing Then
                dbTrans.Dispose()
            End If
        End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:43:51.327

看起来您正在使用 2 个存储过程。使用[TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope%28VS.85%29.aspx)而不是 DbTransaction 所以，这里可能是你的代码

```
Public Shared Function VoucherRedemption(ByVal dbTrans As DbTransaction _
                                      , ByVal dbConnection As DbConnection _
                                      , ByVal receiptNo As String _
                                      , ByVal voucherNo As String _
                                      , ByVal customerCode As String) As Boolean
Dim dbCommand As DbCommand = Nothing
Using scope As New TransactionScope()
Try 
            If DbConnection.State <> ConnectionState.Open Then
                DbConnection.Open()
            End If

            dbCommand = GetStoredProcedureCommand("Mem_Redeem")
            dbCommand.Connection = DbConnection

            AddInParameter(dbCommand, "@ReceiptNo", DbType.String, 50, DBNull.Value)
            If Not String.IsNullOrEmpty(receiptNo) Then
                dbCommand.Parameters("@ReceiptNo").Value = receiptNo
            End If

            AddOutParameter(dbCommand, "@OutAutoIDs", DbType.String, 4000, DBNull.Value)

            ExecuteNonQuery(dbCommand)

            Dim outAutoIDs As String = CType(dbCommand.Parameters("@OutAutoIDs").Value, String)

            dbCommand = GetStoredProcedureCommand("Mem_Redeem_Log_Add")
            dbCommand.Connection = DbConnection

            AddInParameter(dbCommand, "@VoucherNo", DbType.String, 50, DBNull.Value)
            dbCommand.Parameters("@VoucherNo").Value = voucherNo 

            AddInParameter(dbCommand, "@RedeemTransactAutoID", DbType.String, 4000, DBNull.Value)
            dbCommand.Parameters("@RedeemTransactAutoID").Value = outAutoIDs

     ExecuteNonQuery(dbCommand)

        Catch ex As Exception
            Throw New DALException(ex, dbCommand, customerCode, "VoucherRedemption")
        Finally
            If Not dbCommand Is Nothing Then
                dbCommand.Dispose()
            End If
        End Try
    scope.Complete()
End Using 
```

# perl - 在 Perl 中模拟 tail -f

> ID：10441909
> 
> 赞同：2
> 
> 时间：2012-05-04T02:29:39.883
> 
> 标签：perl

根据[perldoc 中提供的解决方案](http://learn.perl.org/faq/perlfaq5.html#How-do-I-do-a-tail--f-in-perl-)，我正在尝试模拟`tail -f`，但它没有按预期工作。下面的代码可以第一次打印所有行，但不能打印新添加的行。如果我在这里遗漏任何东西，请您详细说明。

```
#!/usr/bin/perl
open (LOGFILE, "aa") or die "could not open file reason $! \n";

for (;;)
{
        seek(LOGFILE,0,1);  ### clear OF condition        
        for ($curpos = tell(LOGFILE); <LOGFILE>; $curpos = tell(LOGFILE)) 
        {
                print "$_ \n";
        }

        sleep 1;
        seek(LOGFILE,$curpos,0); ### Setting cursor at the EOF
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:46:05.757

对我来说很好。你怎么更新`"aa"`？如果是`buffered`写入数据，您将不会立即看到数据`"aa"`。您可以在不同的终端中尝试以下操作并检查您是否看到任何更新。

```
while ( 1 )
echo "test" >> aa
end 
```

如果您使用 perl 进行更新`aa`，请查看有关缓冲和如何禁用的 [本节。](http://docstore.mik.ua/orelly/perl/cookbook/ch07_13.htm)

# javascript - 使用 Google Prettify 显示 HTML

> ID：10441911
> 
> 赞同：8
> 
> 时间：2012-05-04T02:29:45.213
> 
> 标签：javascript, prettify

为了让 Google Prettify 正确显示 HTML 代码示例，您应该替换所有的`<`with`&lt;`和所有的`>`with `&gt;`。

您如何仅使用 JavaScript 自动执行该过程？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-04T02:38:10.773

如果将代码放在[`<xmp>`](http://www.w3.org/MarkUp/html-spec/html-spec_5.html#SEC5.5.2.1)元素中，则不需要转义 HTML 特殊字符，如[测试中所示](http://code.google.com/p/google-code-prettify/source/browse/trunk/tests/prettify_test.html#632)

> ```
>  <h1>HTML using XMP</h1>
>  <xmp class="prettyprint" id="htmlXmp"
>  ><html>
>    <head>
>      <title>Fibonacci number</title>
>    </head>
>    <body>
>      <noscript>
>        <dl>
>          <dt>Fibonacci numbers</dt>
>          <dd>1</dd>
>          <dd>1</dd>
>          <dd>2</dd>
>          <dd>3</dd>
>          <dd>5</dd>
>          <dd>8</dd>
>          &hellip;
>        </dl>
>      </noscript>
> 
>      <script type="text/javascript"><!--
>  function fib(n) {
>    var a = 1, b = 1;
>    var tmp;
>    while (--n >= 0) {
>      tmp = a;
>      a += b;
>      b = tmp;
>    }
>    return a;
>  }
> 
>  document.writeln(fib(10));
>  // -->
>      </script>
>    </body>
>  </html>
>  </xmp> 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T02:37:54.630

您可以使用 RegEx 对内容进行全局替换。

```
var regex = new RegExp("<", "g");
console.log(content.replace(regex, "&lt;")); 
```

# java - 订阅 PostgreSQL/MySql 的 Java 应用程序

> ID：10441912
> 
> 赞同：1
> 
> 时间：2012-05-04T02:29:51.533
> 
> 标签：java, mysql, postgresql

我需要创建一个**Java 代理，只要对 Mysql 或 Psql 数据库中的特定表进行任何更新，就可以知道并执行它的指令**。一切都需要自动完成。

我想知道我是Java新手，你们可以给我任何建议..

我的选择是：

1) 在提交后有一个触发器可以唤醒我的 java 应用程序。（使用 Pg_notify 等）

2）或让java应用程序订阅数据库中的特定ID（不确定这是否可以完成，因为异步更新是不可能的，我可能需要让我的代理向数据库询问xx秒以进行更改）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:46:59.973

是的，使用 NOTIFY 的触发器是在 PostgreSQL 中执行此操作的好方法。使用 JDBC 驱动时的一个重要问题是无法异步接收通知，必须轮询。这通常很好，因为 NOTIFY/LISTEN 机制非常轻量级：如果您想每秒轮询 10（100？）次，那么您可以这样做而不会导致性能问题。有关更多信息，请参阅[http://jdbc.postgresql.org/documentation/83/listennotify.html](http://jdbc.postgresql.org/documentation/83/listennotify.html)。

MySQL 的帮助不大；您需要将触发器 INSERT 行插入监控表并使用 SELECT *（然后 DELETE）重复轮询该表。这将起作用，但您更有可能最终陷入延迟/性能权衡。

# php - 301 重定向但排除子目录

> ID：10441914
> 
> 赞同：0
> 
> 时间：2012-05-04T02:30:13.513
> 
> 标签：php, .htaccess, redirect, seo, http-status-code-301

我在我的 .htaccess 文件中创建了 301 RedirectMatch 条目，我无法弄清楚如何将所有 .html 文件重定向到根文件夹中的 .php ，而不是子文件夹。这是我尝试过的，但它不起作用：

```
RedirectMatch 301 ^/([^/]+).html /$1.php
RedirectMatch 301 ^(.*).html /$1.php 
```

这些也重定向了我的子文件夹中的所有 .html，这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:21:12.970

尝试这个：

```
^/([^/]*)\.(html|php) 
```

# iphone - CGAffineTransformScale 一个 UIButton

> ID：10441916
> 
> 赞同：0
> 
> 时间：2012-05-04T02:31:00.153
> 
> 标签：iphone, xcode, animation, uiview, uibutton

我试图在主视图中放大和缩小 UIButton，当我首先按下操作按钮时，按钮会放大，当我再次按下它时它会缩小，但是当我再次按下它以放大时.. 没有任何反应..这是我的代码：

UIVIEW上的放大和缩小方法属于Objective-C类别

```
- (void)viewDidLoad
[super viewDidLoad];

//this button is being added in the storyboard
[self.viewToZoom removeFromSuperview];

}

- (IBAction)zoomButton:(id)sender {

if (isShown) {
    [self.view removeSubviewWithZoomOutAnimation:self.viewToZoom duration:1.0 option:0];
    isShown = NO;
} else {
    [self.view addSubviewWithZoomInAnimation:self.viewToZoom duration:1.0 option:0];
    isShown = YES;
}

}

UIView+Animation.m

- (void) addSubviewWithZoomInAnimation:(UIView*)view duration:(float)secs option:(UIViewAnimationOptions)option {

CGAffineTransform trans = CGAffineTransformScale(view.transform, 0.01, 0.01);

view.transform = trans; // do it instantly, no animation
[self addSubview:view];
// now return the view to normal dimension, animating this tranformation
[UIView animateWithDuration:secs delay:0.0 options:option
                 animations:^{
                     view.transform = CGAffineTransformScale(view.transform, 100.0, 100.0);
                 }
                 completion:^(BOOL finished) {
                     NSLog(@"done");
                 } ];   
}

- (void) removeSubviewWithZoomOutAnimation:(UIView*)view duration:(float)secs option:(UIViewAnimationOptions)option {

// now return the view to normal dimension, animating this tranformation
[UIView animateWithDuration:secs delay:0.0 options:option
                 animations:^{
                     view.transform = CGAffineTransformScale(view.transform, 0.01, 0.01);

                 }
                 completion:^(BOOL finished) {
                     [view removeFromSuperview];
                 }];    
} 
```

谢谢，牛顿

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T09:31:58.527

牛顿，`removeSubviewWithZoomOutAnimation`结束时`view.transform`是一个仿射变换，将视图的原始大小缩小到 0.01。问题是，当您`addSubviewWithZoomInAnimation`第二次调用时，您再次按比例缩小 0.01，但现在`view.transform`将按比例缩小到 0.0001，这不是您想要的。

只需`view.transform = CGAffineTransformIdentity;`在两个动画的开头添加如下：

```
- (void) addSubviewWithZoomInAnimation:(UIView*)view duration:(float)secs option:(UIViewAnimationOptions)option {
    view.transform = CGAffineTransformIdentity; 
    CGAffineTransform trans = CGAffineTransformScale(view.transform, 0.01, 0.01);

    view.transform = trans; // do it instantly, no animation
    [self addSubview:view];
    // now return the view to normal dimension, animating this tranformation
    [UIView animateWithDuration:secs delay:0.0 options:option
                     animations:^{
                         view.transform = CGAffineTransformScale(view.transform, 100.0, 100.0);
                     }
                     completion:^(BOOL finished) {
                         NSLog(@"done");
                     } ];   
}

- (void) removeSubviewWithZoomOutAnimation:(UIView*)view duration:(float)secs option:(UIViewAnimationOptions)option {
    view.transform = CGAffineTransformIdentity;
    // now return the view to normal dimension, animating this tranformation
    [UIView animateWithDuration:secs delay:0.0 options:option
                     animations:^{

                         view.transform = CGAffineTransformScale(view.transform, 0.01, 0.01);

                     }
                     completion:^(BOOL finished) {

                         [view removeFromSuperview];
                     }];    
} 
```

我还建议您传递`UIViewAnimationOptionBeginFromCurrentState`UIViewAnimationOptions ，它可以在快速放大和缩小时改善动画效果。

希望这可以帮助！

# python - 当我尝试绘制图表时 Python 崩溃

> ID：10441918
> 
> 赞同：1
> 
> 时间：2012-05-04T02:31:05.223
> 
> 标签：python, plot

想知道是否有人可以帮助我。

每当我尝试在 python 上运行 plot 时，我都会从窗口弹出一个错误对话框，说

“此应用程序要求以异常方式终止的运行时错误”

然后另一个窗口显示“pythonw.exe 已停止工作”，然后询问您是否要尝试找到解决方案，或关闭程序。

知道如何解决吗？

# c# - 升级到实体框架 4.3.1 后未处理的异常

> ID：10441924
> 
> 赞同：10
> 
> 时间：2012-05-04T02:31:47.767
> 
> 标签：c#, entity-framework, ef-code-first

**错误：**

未处理的异常：System.Data.SqlClient.SqlException：操作失败，因为表 'PrivateMakeUpLessons' 上已存在名称为 'IX_ID' 的索引或统计信息。

**模型（简化，构建在单独的测试项目中进行调试）：**

```
public abstract class Lesson
{
    public Guid ID { get; set; }
    public string Room { get; set; }
    public TimeSpan Time { get; set; }
    public int Duration { get; set; }
}

public abstract class RecurringLesson : Lesson
{
    public int DayOfWeek { get; set; }
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
    public string Frequency { get; set; }
}

public class PrivateLesson : RecurringLesson
{
    public string Student { get; set; }
    public string Teacher { get; set; }
    public virtual ICollection<Cancellation> Cancellations { get; set; }
}

public class Cancellation
{
    public Guid ID { get; set; }
    public DateTime Date { get; set; }
    public virtual PrivateLesson Lesson { get; set; }
    public virtual MakeUpLesson MakeUpLesson { get; set; }
}

public class MakeUpLesson : Lesson
{
    public DateTime Date { get; set; }
    public string Teacher { get; set; }
    public virtual Cancellation Cancellation { get; set; }
} 
```

**配置：**

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Lesson>().ToTable("Lessons");
    modelBuilder.Entity<RecurringLesson>().ToTable("RecurringLessons");
    modelBuilder.Entity<PrivateLesson>().ToTable("PrivateLessons");
    modelBuilder.Entity<MakeUpLesson>().ToTable("PrivateMakeUpLessons");

    modelBuilder.Entity<Cancellation>()
        .HasOptional(x => x.MakeUpLesson)
        .WithRequired(x => x.Cancellation);

    base.OnModelCreating(modelBuilder);
} 
```

**备注**：

这在 EF 4.2 中运行良好。我的模型有问题吗？实际模型要复杂得多，这就是我将所有类抽象出来的原因。此外，我正在针对现有数据库工作，因此我需要使用 Table-Per-Type 继承。

如果我将`Cancellation`to的关系`PrivateMakeUpLesson`从 1 更改为 0..1 到 0..1 到 0..1，它就可以工作。这是不可取的，因为你不能`PrivateMakeUpLesson`没有 a `Cancellation`。

此外，如果我让`PrivateMakeUpLesson`NOT 继承，`Lesson`它也可以工作，但这是一个教训，需要为现有的业务逻辑保持这种状态。

我会很感激任何指导。谢谢！

**编辑**：

开始赏金。我找不到任何关于 EF 4.2 和 EF 4.3 之间关于代码优先索引生成的变化的文档。很明显，EF 4.3 正在创建更多索引并且命名方案已更改，但我想知道 EF 中是否存在错误，或者我的模型或流畅的 API 配置是否存在根本性错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T22:33:48.067

从 EF 4.3 开始，在数据库创建期间为外键列添加索引。有一个错误可能导致索引被多次创建。这将在未来的 EF 版本中修复。

[在此之前，您可以通过使用迁移](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)而不是数据库初始化程序（或`Database.Create()`方法）创建数据库来解决此问题。

生成初始迁移后，您需要删除对`Index()`.

```
CreateTable(
    "dbo.PrivateMakeUpLessons",
    c => new
        {
            ID = c.Guid(nullable: false),
            ...
        })
    .PrimaryKey(t => t.ID)
    .ForeignKey("dbo.Lessons", t => t.ID)
    .ForeignKey("dbo.Cancellations", t => t.ID)
    .Index(t => t.ID)
    .Index(t => t.ID); // <-- Remove this 
```

要在运行时继续创建数据库，您可以使用[`MigrateDatabaseToLatestVersion`](http://msdn.microsoft.com/en-us/library/hh829293)初始化程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T12:29:47.063

在我看来，这显然是一个错误。

问题始于观察到 EF`IX_ID`完全创建索引。如果您将模型简化为以下...

```
public abstract class Lesson
{
    public Guid ID { get; set; }
}

public class RecurringLesson : Lesson
{
}

public class MyContext : DbContext
{
    public DbSet<Lesson> Lessons { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<RecurringLesson>().ToTable("RecurringLessons");
    }
} 
```

...并让 EF 创建数据库架构，您将获得两个表`Lessons`，并且`RecurringLessons`符合 TPT 继承映射的预期。但我想知道为什么它为表创建**两个**索引`RecurringLessons`：

*   具有索引列的索引`PK_RecurringLessons`（聚集的、唯一的）`ID`
*   再次使用索引列索引`IX_ID`（非聚集，非唯一）`ID`

我不知道数据库在同一列上有第二个索引是否有任何好处。但据我了解，这没有意义 1）在 PK 聚集索引中已经涵盖的**同一列**上创建索引，以及 2）在作为主键的列上创建**非唯一**索引，因此必须独特。

此外，由于一对一的关系，EF 试图在该关联的依赖表上创建一个索引，即`PrivateMakeUpLessons`. （它是依赖项（而不是委托人），因为在 entity 中`Cancellation`是**必需**`MakeUpLesson`的。）

`ID`是此关联中的外键（同时也是主键，因为在实体框架中，一对一的关系始终是共享的主键关联）。EF 显然总是在关系的外键上创建索引。但对于一对多关系，这不是问题，因为 FK 列与 PK 列不同。一对一的关系并非如此：FK 和 PK 是相同的`ID`（`IX_ID`即从数据库的角度来看也是一对一的关系）。

与上述相同的考虑在这里适用：该表`PrivateMakeUpLessons`在 column 上有一个聚集的 PK 索引`ID`。为什么根本`IX_ID`需要同一列上的第二个索引？

此外，EF 似乎并没有检查它是否已经想`IX_ID`为 TPT 继承创建一个带有名称的索引，最终导致在发送 DDL 以创建数据库模式时数据库中出现异常。

EF 4.2（及之前）根本没有创建任何索引（PK 索引除外），这是在 EF 4.3 中引入的，尤其是 FK 列的索引。

我没有找到解决方法。在最坏的情况下，您必须手动创建数据库架构并避免 EF 尝试创建它（= 禁用数据库初始化）。在最好的情况下，有一种方法可以禁用自动 FK 索引创建，但我不知道这是否可能。

您可以在此处提交错误报告：[http ://connect.microsoft.com/VisualStudio](http://connect.microsoft.com/VisualStudio)

或者，也许 EF 开发团队的某个人会在这里看到您的问题并提供解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T19:15:28.600

不久前，我在代码中遇到了与此错误非常相似的错误。尝试将取消列表放入课程课程中。这就是解决我的问题的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T10:08:11.253

下面我描述了 2 个可能出现问题的场景。请通过单击我提供的链接深入阅读以了解有关我的解释的更多信息。

* * *

**首先**
`Lesson`和`RecurringLesson`是`abstract`类（所以你想把它作为**基类**）。
您正在创建一个表`Lesson`和`RecurringLesson`实体，这将导致**[每个层次](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)**[结构](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)的表。 ***简要说明***
创建一个**基表**类将产生一个包含所有继承表的列的大表。因此 的所有属性`PrivateLesson`以及`MakeUpLesson`所有其他继承的实体都将存储在`Lessons`表中。EF 还将添加一个`Discriminator`柱子。此列的值默认为持久类名称（如“PrivateLesson”或“MakeUpLesson”），只有与该特定实体匹配的列（匹配鉴别器值）才会在该特定行中使用。

**但是**
您也在映射继承的类，如`PrivateLesson`和`MakeUpLesson`。这将强制 EF 使用**[Table per Type](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx)**[结构](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx)，这会导致每个类一个表。这可能会导致您现在面临的冲突。

* * *

**其次**
，您的示例显示您具有一对一关系（`Cancellation -> MakeUpLesson`）和一对多关系（`Cancellation -> PrivateLesson`），因为`PrivateLesson`和`MakeUpLesson`都是（间接）继承自`Lesson`与第*一个*描述的场景相结合可能会导致问题，因为它会导致 2每个实体的数据库中的外键关系。（一个使用*Table per 层次*结构，一个使用*Table per Type*结构）。

此外[，这篇文章](http://blog.bennymichielsen.be/2011/06/02/entity-framework-4-1-one-to-one-mapping/)可以帮助您定义正确的一对一定义。

* * *

请通过执行以下步骤进行验证：
*我假设您有自己的测试环境，因此您可以创建新的测试数据库*

**1.**`Cancellation`通过注释掉这个类的所有属性来 删除与 的关系：

```
public class PrivateLesson : RecurringLesson
{
    public string Student { get; set; }
    public string Teacher { get; set; }
    //public virtual ICollection<Cancellation> Cancellations { get; set; }
}

public class Cancellation
{
    public Guid ID { get; set; }
    public DateTime Date { get; set; }
    //public virtual PrivateLesson Lesson { get; set; }
    //public virtual MakeUpLesson MakeUpLesson { get; set; }
}

public class MakeUpLesson : Lesson
{
    public DateTime Date { get; set; }
    public string Teacher { get; set; }
    //public virtual Cancellation Cancellation { get; set; }
} 
```

并删除它的配置：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Lesson>().ToTable("Lessons");
    modelBuilder.Entity<RecurringLesson>().ToTable("RecurringLessons");
    modelBuilder.Entity<PrivateLesson>().ToTable("PrivateLessons");
    modelBuilder.Entity<MakeUpLesson>().ToTable("PrivateMakeUpLessons");

    //modelBuilder.Entity<Cancellation>()
    //    .HasOptional(x => x.MakeUpLesson)
    //    .WithRequired(x => x.Cancellation);

    base.OnModelCreating(modelBuilder);
} 
```

**2.** 新建一个空数据库
**3.** 让EF在这个空数据库中为你生成表结构。
**4.** 验证第一个场景。如果这是真的，这需要首先使用**[Table per hierarchy](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)** [structure](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)或**[Table per Type](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx)** [structure](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx)来解决。可能您想使用**[每个层次](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)**[结构](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)的表，因为（如果我很好地理解您的问题）已经有一个生产环境。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-05T05:34:01.213

当我的项目从EF 6.0.2更新到EF 6.1.1时，出现了这样的问题，然后回到6.0.2，返回旧版本后，错误**消失了**

# java-native-interface - 好用的jni框架？

> ID：10441926
> 
> 赞同：1
> 
> 时间：2012-05-04T02:31:55.550
> 
> 标签：java-native-interface

我们计划在我们的项目中使用 jni 来调用 .dll 进行开发，调用 .so 进行生产。

您能否让我知道哪些 jni 框架在易于开发和性能方面在这方面做得很好。

感谢和问候斯里尼瓦桑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:16:10.207

我可以推荐[这个](http://code.google.com/p/android-cpp-sdk/)。理解如何使用它有点困难，但它很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:52:55.107

JNA 在这方面做得很好。此外，您应该使用 JNAerator 来生成 poxy Javatypes。

# objective-c - 尝试调用 [super didReceiveMemoryWarning] 时崩溃

> ID：10441929
> 
> 赞同：2
> 
> 时间：2012-05-04T02:32:17.813
> 
> 标签：objective-c, ios, memory-management, segmentation-fault

我有一个应用程序，我收集了我无法重现的崩溃报告。我有一个视图控制器，它只是`[super didReceiveMemoryWarning]`在处理自己的内存警告时调用（是的，我知道我不需要这样做，但这也不能解决我现在遇到的问题）。一旦父 UIViewController 尝试调用 purgeMemoryForReason 它就会崩溃

这是相关的跟踪信息：

```
Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0x90000008
Crashed Thread:  0

Thread 0 Crashed:
0   libobjc.A.dylib                     0x361dbf78 objc_msgSend + 16
1   UIKit                               0x31fbf499 -[UIViewController purgeMemoryForReason:] + 65
2   MyApp                               0x00016f0d -[AttributesViewController didReceiveMemoryWarning] (AttributesViewController.m:76)
3   Foundation                          0x30c5b4ff __57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 19
4   CoreFoundation                      0x34d86547 ___CFXNotificationPost_block_invoke_0 + 71
5   CoreFoundation                      0x34d12097 _CFXNotificationPost + 1407
6   Foundation                          0x30bcf3eb -[NSNotificationCenter postNotificationName:object:userInfo:] + 67
7   Foundation                          0x30bd0c1b -[NSNotificationCenter postNotificationName:object:] + 31
8   UIKit                               0x31f8a271 -[UIApplication _performMemoryWarning] + 81
9   UIKit                               0x31f8a36b -[UIApplication _receivedMemoryNotification] + 175
10  libdispatch.dylib                   0x30de42e1 _dispatch_source_invoke + 517
11  libdispatch.dylib                   0x30de1b81 _dispatch_queue_invoke$VARIANT$mp + 53
12  libdispatch.dylib                   0x30de1ec1 _dispatch_main_queue_callback_4CF$VARIANT$mp + 157
13  CoreFoundation                      0x34d8d2ad __CFRunLoopRun + 1269
14  CoreFoundation                      0x34d104a5 CFRunLoopRunSpecific + 301
15  CoreFoundation                      0x34d1036d CFRunLoopRunInMode + 105
16  GraphicsServices                    0x3600c439 GSEventRunModal + 137
17  UIKit                               0x31e06e7d UIApplicationMain + 1081
18  MyApp                               0x0000243b main (main.m:15) 
```

我希望我能重现该错误，但无论我在测试设备或模拟器上触发内存警告多少次，我都无法让这种情况发生。任何关于我可能寻找的帮助将不胜感激，因为我已经尝试寻找并且没有找到任何指向我潜在问题的信息。谢谢！

**编辑**：正如我所说，我没有做任何事情`didReceiveMemoryWarning`：

```
- (void) didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
} 
```

是的，我知道我不需要这样做。我计划删除此代码（我什至不知道为什么我仍然在其中），但我想确保我已修复问题的根源。我也没有`viewDidUnload`实现`AttributesViewController`。我还应该提到我正在使用 ARC，但我不确定这是否重要。

从我收到的反馈来看，使用相机时会出现内存警告（`UIImagePickerController`使用源类型`UIImagePickerControllerSourceTypeCamera`）。`AttributesViewController`由视图控制器以模态方式呈现，比呈现的层次高两层`UIImagePickerController`，它们不共享任何对象或其他数据。我知道相机经常会引起内存警告，所以我不确定它`UIImagePickerController`是否与内存消耗有关。

我将 Xcode 设置为始终运行分析器，并且没有出现任何问题。我还通过 Zombies and Leaks 工具运行了代码，但无法重现问题或发现任何其他问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:37:58.020

你在你的 didReceiveMemoryWarning 中做什么？你在释放任何内存吗？关闭视图？什么？邮政编码！[我看到您发布了更多代码。谢谢。]

否则，导致 didReceiveMemoryWarning 的问题将无法解决，因此将来尝试分配更多内存（即分配新对象）的尝试可能会开始失败。因此，任何依赖于这些对象的代码都会失败。您的代码实际上是否在检查分配新内容的所有时间的返回值？

更重要的是，您确定收到这些内存警告的原因了吗？当然，优雅地处理低内存情况是至关重要的，但如果人为可能的话，防止它们同样（如果不是更重要的话）重要。您是否通过分析器 ( `command`++ `shift`)运行代码`B`？您是否对您的应用程序 ( `command`+ `I`) 进行了分析以识别任何泄漏源？

**更新：**

感谢您分享您的澄清。坦率地说，我的想法不足，但还有一些想法：

1.  当您无法重现问题时，很难诊断（更不用说修复）。这似乎真的是首要任务。如果您在 iPhone 4 或 4S 上进行测试，您将享受 512MB DRAM，但 3G 只有 256MB，而 3 有 128MB。您是否在较新的设备上进行测试，而用户的设备可能[功能较差](http://en.wikipedia.org/wiki/Iphone#Model_comparison)？或者您的崩溃日志是否来自具有同等装备的设备？似乎您可能会根据设备配置在不同时间收到 didReceiveMemoryWarning，因此可能会更难显示用户看到的崩溃。

2.  为什么应用程序崩溃？它可能源于`didReceiveMemoryWarning`无法为继续操作释放足够的内存（即`alloc`所需对象的后续 s 失败），但我不确定您的崩溃日志是否表明了这一点。该日志让我想知道您是否正在执行任何[键值观察](https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)或任何[NSNotificationCenter](https://developer.apple.com/library/mac/#documentation/cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/occ/cl/NSNotificationCenter)逻辑？我问是因为你可以想象在没有移除观察者的情况下释放了一个观察到的物体而引起的问题。我之所以这么问是因为我看到了`addObserver:selector:name:object:`参考资料，但不知道这是否是 Cocoa 在后台执行的操作，或者您的应用程序是否自己执行。（而且它可能不相关。）是否所有的崩溃日志都显示了类似的调用堆栈？

3.  该应用程序是否通常会检查以确保它的各种指针不为零？同样，我希望崩溃日志略有不同，但似乎在检查 nil 值时要格外谨慎，以确保它`purgeMemoryForReason`不会在你的幕后发布任何东西。

4.  而且我想唯一的其他建议是，您的所有 didReceiveMemoryWarning 和 viewDidUnload 是否都在尽可能地释放内存警告的影响，以确保应用程序能够在这种低内存情况下幸存下来。看起来标准的[didReceiveMemoryWarning](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW4)会尝试卸载不活动的视图，因此您可能希望确保这些视图正确清理内存。根据[有效管理您的内存](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html#//apple_ref/doc/uid/TP40007457-CH10-SW10)，您要确保在您的`viewDidUnload`or中释放视图的对象`didReceiveMemoryWarning`。

抱歉，我没有更具建设性的建议。希望其他人能够提出一些更好的想法。

# mysql - 您可以更改表以更改 MySQL 中的引擎类型吗？（MYISAM 到 INNODB）

> ID：10441930
> 
> 赞同：1
> 
> 时间：2012-05-04T02:33:08.610
> 
> 标签：mysql, database-design, innodb, myisam

我宁愿不完全删除我的表来创建一个新表，但我需要将`ENGINE`类型从`MYISAM`更改`INNODB`为外键约束。

*   我可以使用 动态执行此操作`Alter table`吗？还是我必须从头开始使用一张新桌子？

*   如果我已经在该表中有需要更改/删除和重新创建的数据，这有关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:35:12.443

从手册：

```
 ALTER TABLE t1 ENGINE=InnoDB; 
```

# php - 传递ajax变量

> ID：10441932
> 
> 赞同：0
> 
> 时间：2012-05-04T02:33:21.643
> 
> 标签：php, ajax, forms, jquery

我一直在环顾四周，试图弄清楚如何通过 ajax 在页面上传递 2 个变量，此时我有一个页面，其中一个复选框 dynamailcy 在单击它时将其值保存到数据库中，但我需要它能够仅在此刻编辑具有 certian id 的行，我已经走到了这一步，但我被卡住了。任何帮助将不胜感激

```
$(function()
    {

    $("input[type='checkbox']").on('click', function(){
    var chkName = $(this).attr('checked');
    if($(this).is(":checked")) {
    var checkVal = $(':checkbox[checked='+chkName+']').attr('value');
    }
    else{
    var checkVal =$("#frm input:checkbox").attr("id");  
    }
    var userid = $(':checkbox[checked='+chkName+']').attr('name');
            $.ajax({
            type: "GET",
            url: 'request.php?uname=' + checkVal '&id'= + userid ,// this is where i cant send the &id varible across but i can send the checkVal 

            success: function(data) {

        if(data == 1){//Succues 
             alert('Data was saved in db!');
          }
        if(data == 0){//Faliure 
             alert('Data was NOT saved in db!');
          }
            }
    });
  });

  });

</script>
</head><body>
    <div class="content">
    <table border="0.02px" class="mytable">
    <thead>
    <th><strong>Paid</strong></th>
    <th><strong>Repaired</strong></th>
    <th><strong>Returned</strong></th>
    </thead>
    <tr>
            <form id="frm" name="frm">
                <td><input type="checkbox"  value="Paid"          id="Waiting on Payment"  name="29" /></td>
                <td><input type="checkbox"  value="Repaired"      id="Waiting on Repairs"  name="uname" /></td>
                <td><input type="checkbox"  value="With Student"  id="Awaiting Pickup"     name="uname" /></td>
            </form>
    </tr>
    </table>    
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:09:57.977

您的代码中的以下行不正确：

```
url: 'request.php?uname=' + checkVal '&id'= + userid , 
```

应该：

```
url: 'request.php?uname=' + checkVal +'&id=' + userid, 
```

还可以考虑使用`var isChecked = $(this).prop('checked');`来获取复选框的选中状态。

在 line`var chkName = $(this).attr('checked');`中，*chkName*的值 将是“*未定义*”，而复选框未选中，因此 line
`var userid = $(':checkbox[checked='+chkName+']').attr('name');`。

如果我正确理解你的代码，那么你可以试试这个：

```
$("input[type='checkbox']").on('click', function() {

    var $this = $(this);
    var isChecked = $this.prop('checked');

    var checkVal = isChecked ? $this.attr('value') : $this.attr("id");

    var userid = $this.attr('name');

    $.ajax({
        type: "GET",

        //url: 'request.php?uname=' + checkVal '&id' = +userid,
        url: 'request.php?uname=' + checkVal +'&id=' + userid,

        // this is where i cant send the &id varible across but i can send the checkVal
        success: function(data) {

            if (data == 1) { //Succues
                alert('Data was saved in db!');
            }
            if (data == 0) { //Faliure
                alert('Data was NOT saved in db!');
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T02:55:45.517

当前，您尝试发送的 url 变量存在错误

当前的：

```
url: 'request.php?uname=' + checkVal '&id'= + userid, 
```

更正：

```
url: 'request.php?uname=' + checkVal + '&id=' + userid, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T02:44:33.180

我认为您正在寻找来自 jquery 的 .serialize 。[你可以在这里](http://api.jquery.com/serialize/)查看 api 。它也有例子。请通过示例如何传递序列化数据。

稍后在服务器端，您可能必须`$_POST['<your input name here>']`获取该值。另外，我看到你试图从服务器取回价值。您可以随时`echo json_encode(<your data object here>)`发送到服务器端。

# sql-server - 在 Where Not In 中使用 Case 语句时出现“子查询返回超过 1 个值的错误消息”

> ID：10441934
> 
> 赞同：4
> 
> 时间：2012-05-04T02:33:49.770
> 
> 标签：sql-server, sql-server-2008

如果我做

```
SELECT * FROM cte1 c
    WHERE c.GrantNumber NOT IN
    (

      SELECT t1.nai_grant_number FROM #temp t1

    ) 
```

这工作正常。

但如果我这样做

```
SELECT * FROM cte1 c
    WHERE c.GrantNumber NOT IN
    (
      CASE WHEN 
                @AutoRenewalChk = 1 THEN
                 (

                     SELECT t1.nai_grant_number FROM #temp t1
                 ) END          
    ) 
```

出错

> 消息 512，级别 16，状态 1，第 33 行子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

是什么原因？我们不能像上面那样使用 case 语句吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T03:30:52.083

```
SELECT * FROM cte1 AS c
WHERE NOT EXISTS
(
  SELECT 1 FROM #temp AS t1 
  WHERE t1.nai_grant_number = CASE @AutoRenewalChk 
    WHEN 1 THEN c.GrantNumber END
); 
```

这就是为什么 NOT IN 在这里不起作用的原因。试试这两个查询。你会期望在每种​​情况下都有相同的结果吗？

```
SELECT x FROM (SELECT x = 1) AS x WHERE x NOT IN 
    (SELECT y = 2);

SELECT x FROM (SELECT x = 1) AS x WHERE x NOT IN 
    (SELECT y = 2 UNION ALL SELECT NULL); 
```

在此处添加可能的 NULL（Dan P 在他的回答中建议将其作为 ELSE，或者如果 #temp 甚至可以包含 nai_grant_number 为 NULL 的单行）完全改变了 NOT IN 的语义。因此，几乎在您考虑编写 NOT IN 查询的任何时候，您都应该将其重新考虑为 NOT EXISTS（或 LEFT OUTER JOIN 或其他结构）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T02:44:44.697

就像错误所说的那样，您的查询返回不止一行。如果您更改您的潜艇选择以选择前 1... 它会工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T02:57:29.940

试试这个，因为其他人已经提到 CASE When works on a single column or value not a rowset。假设 c.GrantNumber 永远不会为空，这应该适合您。

```
SELECT * FROM cte1 c 
WHERE c.GrantNumber NOT IN 
( 
    SELECT DISTINCT
        CASE WHEN @AutoRenewalChk = 1
            THEN t1.nai_grant_number
            ELSE NULL
        END
    FROM #temp t1
) 
```

# php - PHP在网页上查看PDF并禁止用户下载

> ID：10441937
> 
> 赞同：7
> 
> 时间：2012-05-04T02:34:50.320
> 
> 标签：php, pdf

我打算写一个网站，让用户查看 pdf 文件，但由于版权法，我不希望他们将文件保存到自己的硬盘上。我正在研究如何使用 PHP 来查看它，但我不知道如何禁用用户不下载文件。

实际上，我想使用 JavaScript 来禁用此操作，但我收到其他人的建议不要这样做，因为这对用户来说很烦人。

因此，任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-04-02T15:40:14.047

## `opacity: 1.0`使用CSS`<div>`定位在您的内容上...

`<object>`您可以使用or输出 pdf `<iframe>`，然后使用绝对位置放置 a 并使用 z-index 覆盖您的 pdf。使用 css `opacity: 1.0`。

现在，当用户尝试单击或复制时，他们什么也得不到，因为他们实际上是在单击一个空白`<div>`！！！！

它是一个黑客，但它有效！用户将能够阅读内容，他们可以截屏，但他们将无法实际复制文本并将其粘贴到任何地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-11T06:40:18.563

**方法01**

[使用Google 图书](https://books.google.com/)实现该功能

```
<iframe frameborder="0" scrolling="no" style="border:0px" src="https://books.google.com.kh/books?id=e5MkzETNcsgC&lpg=PP1&dq=typography&pg=PA11&output=embed" width="500" height=500>
</iframe> 
```

[![在此处输入图像描述](../Images/df56ee5d77857486bc9b2ef5f6c8e5be.png)](https://i.stack.imgur.com/5Nfcq.png)

在上图中，它显示`Embed`这将是代码。并且**下载或打印选项在此不可用**。**Google dosc 可以阻止下载，但它允许`Save to Drive`选项**。然后在驱动器中**我可以下载它**。***但[谷歌图书](https://books.google.com/)不允许这样做***。

在视野中

[![02](../Images/7d09ee3830553d6146acdb39c3f67a62.png)](https://i.stack.imgur.com/B3ra2.png)

**方法02**

使用[Google 云端硬盘](https://www.google.com/drive/)

右键单击`pdf`并转到**共享**（下图）

[![03](../Images/811f34548d9705d7f179cb390cb79d8d.png)](https://i.stack.imgur.com/2cIa7.png)

然后转到左下角的**高级选项**

[![05](../Images/8e3e7ac85561eb1c49eb7243980a28b6.png)](https://i.stack.imgur.com/vMT7d.png)

勾选两个复选框。复制`embed`链接并将其粘贴到您的`src`. **不允许下载和保存驱动器选项**

> **注：*方法 01*和*方法 02*已测试**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T02:45:10.247

您无法阻止访问者下载、复制或废弃您输出到他们浏览器的任何内容。如果他们可以查看它，他们总是可以对其进行截图。这为您的问题带来了最佳解决方案：只需提供文档的图像副本，而不是实际的 PDF 文件。您可以使用 Photoshop 轻松地将 PDF 文件转换/批量转换为 JPEG。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-11T07:11:44.927

我希望我不会太迟回复。但是，您可以采取一些措施来阻止用户。使用 iFrame 显示您的 PDF 并确保您使用 Google 进行显示。我使用了以下代码：

```
 <iframe src="http://docs.google.com/gview?url=http://www.tutorialspoint.com/php/php_tutorial.pdf&embedded=true" style="width:600px; height:500px;" frameborder="0">
</iframe> 
```

在这里，您可以简单地更改`url=http://www.tutorialspoint.com/php/php_tutorial.pdf`并用您保存 PDF 的 URL 替换它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-22T18:41:16.800

试试这个：

```
<iframe  src="test1.pdf" scrolling="no" frameborder="0" height="100%" width="100%" style="position:absolute; clip:rect (190px,1100px,800px,250px);"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-30T04:19:58.787

尝试这个

```
<embed src="http://URL_TO_PDF.com/pdf.pdf#toolbar=0&navpanes=0&scrollbar=0" width="500" height="500"> 
```

# azure - 通过 VPN 连接后无法连接到 Azure SQL

> ID：10441938
> 
> 赞同：0
> 
> 时间：2012-05-04T02:35:08.267
> 
> 标签：azure, amazon-web-services, vpn

我的家用笔记本电脑确实存在接线问题。

以下是我所做的：

我已经通过 AWS 建立了自己的 VPN。我将 VPN ip 地址添加到 Azure SQL 防火墙 ip 表

由于没有 VPN，我可以轻松连接到 Azure。但是，一旦我连接到 VPN，当我尝试连接到 Azure 时就会出错。

错误信息：

> 与服务器成功建立连接，但在登录前握手期间发生错误。（提供者：TCP 提供者，错误：0 - 指定的网络名称不再可用。）

另一方面，我可以使用 VPN 并从我的办公室桌面成功连接到 Azure。

我相信这与我的家庭笔记本电脑设置有关。但即使我在 Windows 7 上禁用了防火墙，也在 azure SQL 上禁用了防火墙之后。

我仍然有同样的连接问题

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:59:07.430

尝试向所有地址开放 SQL Azure 防火墙以进行测试。也许当你进入 VPN 时，你是通过代理离开的，所以你到 Azure 的实际 IP 地址是不同的。您可以设置如下内容：

IP 范围开始：0.0.0.0

IP范围结束：255.255.255.255

如果可行，那么也许您可以通过屏蔽您的 VPN 地址来做一些事情，例如：

10.10.0.0 - 10.10.255.255

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:03:04.567

> > 由于没有 VPN，我可以轻松连接到 Azure。但是，一旦我连接到 VPN，当我尝试连接到 Azure 时就会出错。

一些 VPN 支持与正常的互联网连接共存，而另一些则不支持。我不确定 AWS VPN 是否支持。否则，当您连接到 VPN 时，您会失去 Internet 连接，因此无法连接到 SQL Azure。

> > 另一方面，我可以使用 VPN 并从我的办公室桌面成功连接到 Azure。

如果问题与防火墙设置有关，您可以尝试以编程方式更改设置，有关示例，请参阅[http://blogs.msdn.com/b/sqlazure/archive/2010/07/29/10043869.aspx](http://blogs.msdn.com/b/sqlazure/archive/2010/07/29/10043869.aspx)。

此致，

明旭。

# c# - .NET XmlSerializer 和 C# 中的嵌套类

> ID：10441940
> 
> 赞同：11
> 
> 时间：2012-05-04T02:35:18.010
> 
> 标签：c#, .net, xmlserializer, nested-class

我在 C# 中使用 XmlSerializer 遇到了一些令人惊讶的行为。考虑以下代码。

```
public class A : IEnumerable
{
    public class B
    {
        [XmlAttribute]
        public string PropA { get; set; }
        [XmlElement]
        public string PropB { get; set; }
    }

    public IEnumerator GetEnumerator ()
    {
        yield break;
    }
}

class Program
{
    static void Main (string[] args)
    {
        XmlSerializer serializer = new XmlSerializer(typeof(A.B));

        XmlTextWriter writer = new XmlTextWriter(@"E:\temp\test.xml", Encoding.Default);
        serializer.Serialize(writer, new A.B() { PropA = "one", PropB = "two" });
    }
} 
```

在这个例子中，我尝试序列化嵌套类 AB 的一个实例，它本身并没有以任何方式使用容器类 A。但是当我尝试为其构造 XmlSerializer 时，会引发以下异常：

> InvalidOperationException 未处理：
> 
> 要实现 XML 可序列化，从 IEnumerable 继承的类型必须在其继承层次结构的所有级别上都有 Add(System.Object) 的实现。Test.A 没有实现 Add(System.Object)。

XmlSerializer 正在尝试对 A 类型应用序列化约束，而我实际上是在尝试序列化类型 AB 但是我的理解是，除了对外部类型实例中的数据的特权访问之外，嵌套类型并不特殊，并且表现得好像它是在命名空间中。

这种理解是否不正确，**嵌套类型或 XmlSerializer 的语义是否证明了这种行为，或者这感觉像是 XmlSerializer 中的错误？**

具体到 XmlSerializer 语义，是否有任何书面要求在应用于嵌套类型时对所有外部类型强制执行 XmlSerializer 约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T20:38:27.490

[http://msdn.microsoft.com/en-us/library/vstudio/ms229027%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms229027%28v=vs.100%29.aspx)

> 因为嵌套类型被视为声明类型的成员，所以嵌套类型可以访问声明类型中的所有其他成员。

因此，如果序列化程序想要使用 AB，它也需要 A 的定义。IEnumerable 验证开始的地方。

没关系 B 实际上没有引用 A 中的任何内容 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:11:10.223

在这里提出约束的是 IEnumerable。如果您按照异常的建议添加 Add 方法，您的代码将正常工作。同样，这与 XmlSerialization 关系不大，更多的是与 IEnumerable 的工作方式有关。如果我不在这里，请纠正我。检查[this](https://stackoverflow.com/questions/5172757/why-does-xmlserializer-require-types-which-inherit-from-ienumerable-to-have-an-i) 以获得相同的良好讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T15:08:59.243

可能这在序列化运行时是一个非常困难的问题，但我对此行为没有任何好的解释。我觉得 IEnumerable 的限制不适用于 B 类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:01:39.350

XmlSerializer 对实现 IEnumerable 或 ICollection 的类进行特殊处理。

更多细节在这里： [XmlSerializer 和 IEnumerable：序列化可能没有无参数构造函数：错误？](https://stackoverflow.com/questions/4726095/xmlserializer-and-ienumerable-serialization-possible-w-o-parameterless-construc)

# javascript - JS Jquery 命名空间调用函数

> ID：10441945
> 
> 赞同：0
> 
> 时间：2012-05-04T02:35:59.870
> 
> 标签：javascript, jquery

好的可怕的标题，但我想不出另一种描述。

我有以下代码：

```
jQuery( document ).ready( function( $ ) 
{
    $.myNamespace = {
          init: function()
          {

             $('.button').click(function() {
                  this.anotherFunction();
             });
          },
          anotherFunction: function()
          {
               alert('insidefunction');
          }
    }
    $.myNamespace.init();
}); 
```

正如你所看到的，我试图从 init 内部调用 anotherFunction 并有两种我试过但没有奏效的方法。那么我怎么能调用那个函数或者我的概念是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:39:27.550

```
jQuery( document ).ready( function( $ )
{
    $.myNamespace = {
          init: function()
          {
             var a=this;
             $('.button').click(function() {
                  a.anotherFunction();
             });
          },
          anotherFunction: function()
          {
               alert('insidefunction');
          }
    }
    $.myNamespace.init();

}); 
```

[http://jsfiddle.net/ZpAtm/2/](http://jsfiddle.net/ZpAtm/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:14:30.890

在单击处理程序中绝对调用它会改变事情，因为`this`在任何 jQuery 事件处理程序中都设置为导致事件的元素。

相反，请尝试使用以下模式：

```
jQuery(document).ready(function($) {
    $.myNamespace = (function() {
        function init() {
            $('.button').click(function() {
                anotherFunction();
            });
        }

        function anotherFunction() {
            alert('insidefunction');
        }

        // return an object with all the functions you want 
        // available publically as properties. Don't include
        // any "private" functions.
        return {
            init: init,
            anotherFunction: anotherFunction
        };
    })();
    $.myNamespace.init();
});​ 
```

# php - 如何在 PHP 中显示上一页的 MySQL 结果？

> ID：10441947
> 
> 赞同：0
> 
> 时间：2012-05-04T02:36:08.323
> 
> 标签：php, mysql

我正在为我的任务使用 PHP 做一个航班预订网站。搜索页面从输入的关键字返回相关航班详细信息表。然后在表格中，它提供了仅选择一个航班进行预订的选项。通过单选按钮选择某个航班并单击“为所选航班进行预订”按钮后，下一页需要显示从上一页中选择的航班详细信息。

问题是：如何显示所选航班的详细信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:44:57.287

我确定您确实使用了用户表单来选择适当的选项。比方说：

```
<form action="nextpage.php" method="post">
    <input type="radio" name="flight" value="flight1" />Option 1<br />
    <input type="radio" name="flight" value="flight2" />Option 2<br />
    ......
    <input type="submit" name="booking" value="Make Booking for the Selected Flight" />
</form> 
```

然后在页面上`nextpage.php`，您可以使用以下 php 代码获取用户选择的航班：

```
<?php
     $flight = $_POST['flight'];
     //do things u need here, for example
     echo $flight;
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T02:39:32.823

通过 URL 变量将一些唯一标识符从您的航班传递到详细信息页面。要访问这些变量，只需使用 PHP`$_GET['id']`变量（在本例中访问名为 的 url 变量`id`）。

要传递“id” url 变量，只需附加`?id=value`到您的重定向：`http://page.com/details.php?id=5`

一旦你在你的第二页上有了这个，就很容易做另一个 MySQL 查询来检索航班的详细信息，比如 5 并将其显示在第二页上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-10T11:08:34.970

您可以使用以下方法在下一页发送数据。

1) 会话

2) 饼干

3) 获取方法

4）发布方法（使用隐藏字段）。

# css - IE8 没有选择“Float Left”和“Fonts”

> ID：10441951
> 
> 赞同：1
> 
> 时间：2012-05-04T02:36:26.960
> 
> 标签：css, internet-explorer-8, fonts, cross-browser, css-float

嘿，我的网站运行良好，但在 IE8 中除外。菜单栏显示不正确。我的理论是 Float Left 不起作用，但它可能是别的东西。此外，Calibri 字体也没有正确显示。有什么办法可以解决这两个问题。该网站是[eagleview.it](http://eagleview.it)

这是 index.css 的导航：

```
nav ul {
width:900px;
list-style: none; 
margin:15px;
position: relative;
}
nav ul li { display::inline;}
nav ul li a {
float:left;
display: block;
padding: 0 15px;
margin: 10px 12px;
color:#fff;
font-weight:600;
font-size:15px;
opacity:1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T02:40:30.000

ie8 不将“nav”识别为元素。

最简单的选择是更改为 div，或检查modernizr。

```
<div id="nav">
        <ul class="group">
            <li style="font-family: Trebuchet MS, Tahoma, Verdana, Arial, sans-serif"><a href="about.html" style="text-decoration:none">About</a></li>
            <li style="font-family: Trebuchet MS, Tahoma, Verdana, Arial, sans-serif"><a href="services.html" style="text-decoration:none">Services</a></li>
        <li style="font-family: Trebuchet MS, Tahoma, Verdana, Arial, sans-serif"><a href="testimonials.html" style="text-decoration:none">Testimonials</a></li>
           <li style="font-family: Trebuchet MS, Tahoma, Verdana, Arial, sans-serif"><a href="eagleview.html" style="text-decoration:none">Eagleview</a></li>
            <li style="font-family: Trebuchet MS, Tahoma, Verdana, Arial, sans-serif"><a href="contact.html" style="text-decoration:none">Contact</a></li>
          <li style="font-family: Trebuchet MS, Tahoma, Verdana, Arial, sans-serif"><a href="consulting.html" style="text-decoration:none">Consulting</a></li>
         </ul>
    </div> 
```

与 css 的

```
#nal ul li {}
#nav ul li a {} 
```

ETC

# java - Android gson.toJson() 给出带有转义引号 (\") 的结果

> ID：10441952
> 
> 赞同：1
> 
> 时间：2012-05-04T02:36:27.743
> 
> 标签：java, android, gson

我使用 Gson 序列化我的对象，但结果包含许多应该是 '"' 的 '\"'，例如：

```
{"data":"{\"calldate\":\"2012-05-03 00:12:00\",\"id\":0,\"uid\":0,\"popdbid\":0
,\"mobilesqlid\":1336025277424,\"callstatus\":2,\"checkstatus\":0,\"resultstatus
\":0,\"sequence\":0,\"subbrandstatus\":0,\"subcategorystatus\":0,\"synstatus\":1
,\"targetstatus\":0,\"trackstatus\":0,\"isfrommobile\":0}","user":{"id":11,"ente
rprise_id":1}} 
```

这是我用来序列化的代码：

```
GsonBuilder builder=new GsonBuilder();
builder.setDateFormat("yyyy-MM-dd mm:hh:ss");
builder.excludeFieldsWithoutExposeAnnotation();
Gson gson=builder.create();
String gsonString = gson.toJson(callDayPlanning); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T21:58:39.947

正如@PhilippReichart 所说，您`callDayPlanning`包含（可能）一个`String`名为的字段`data`，其中包含一个 Json 字符串。[json.parser.online.fr](http://json.parser.online.fr/)证实了这一点： ![在此处输入图像描述](../Images/431609430e22bee95b2825ffe39e8ede.png)。

将 Json 字符串作为另一个对象的有效负载并没有错，但它会被转义。但是，如果您希望这`data`将是另一个对象的序列化（其类`DayPlanning`可能被命名？），您必须将`data`类型从更改`String`为您的自定义类。

# doctrine - 原则 1.* 缓存失效

> ID：10441958
> 
> 赞同：2
> 
> 时间：2012-05-04T02:37:17.347
> 
> 标签：doctrine, doctrine-1.2

我正在使用 APC 缓存进行昂贵的查询，该查询检索具有相关文件、付款、事件等的作业。我想知道在 Doctrine 1.* 中是否有可用的缓存失效解决方案。

我想出了以下可行的解决方案，它确实有效，我只是不想发明一个轮子。

如果有更好/其他现有的解决方案，请建议我。

记录侦听器尝试清除具有给定 id`postSave`事件的缓存：

```
class My_Doctrine_Record_Listener_ClearCache extends Doctrine_Record_Listener
{
    /**
     * Clear cache by table tags
     * 
     * @param Doctrine_Event $event
     * @return null 
     */
    public function postSave(Doctrine_Event $event)
    {
        $cache = new Doctrine_Cache_Apc(); 

        /* @var $model Doctrine_Record */
        $model = $event->getInvoker();
        $name  = get_class($model);

        /* @var $table Doctrine_Table */
        $table = $model->getTable($name);
        if (method_exists($table, 'getCacheTags')) {
            foreach ($table->getCacheTags() as $tag) {
                $id = preg_replace('/%([\w]+)%/e', '$model->{\\1}', $tag);
                $cache->delete($id);
            }
        }
    }
} 
```

这就是我在表格中的内容：

```
class FileTable extends Doctrine_Table
{
   /* ... */
   public function getCacheTags()
   {
        return array(
            'job_view_%job_id%'
        );
   }
   /* ... */ 
}

class JobTable extends Doctrine_Table
{
    /* ... */
    public function getCacheTags()
    {        
        return array(
           'job_view_%id%'
        );
    }
    /* ... */ 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-24T22:46:00.357

上述解决方案已经在生产环境中使用了 7 年，所以可以肯定地说 - 它确实工作得很好。

# php - PHP如何显示基于部门的总数据

> ID：10441960
> 
> 赞同：0
> 
> 时间：2012-05-04T02:37:31.450
> 
> 标签：php, mysql

我在下面有一个代码：

```
<table>
                    <th class="th1">OT Date</th>
                    <td class="td1"><?php echo $date?></td>
                    <tr>
                    <th class="th" colspan="7">Department</th>
                    <tr>
                    <td class="td1" style="width: 100px;">Accounting</td>
                    <td class="td1" style="width: 100px;">Admin</td>
                    <td class="td1" style="width: 100px;">Facility</td>
                    <td class="td1" style="width: 100px;">IQC</td>
                    <td class="td1" style="width: 100px;">PC</td>
                    <td class="td1" style="width: 100px;">Production</td>
                    <td class="td1" style="width: 100px;">Store</td>
                    <tr>
                    <td class="td">20</td>
                    <td class="td">20</td>
                    <td class="td">20</td>
                    <td class="td">20</td>
                    <td class="td">20</td>
                    <td class="td">20</td>
                    <td class="td">20</td>
                </table> 
```

我计划显示基于部门的总数据。因此，在表格示例 Admin 中，将自动汇总数据。

这是php函数代码：

```
<?php

include ("config.php");
$dept="Admin";

$pesan = mysql_query("SELECT submission_no FROM t_submissions WHERE dept_name='$dept'");
$j = mysql_num_rows($pesan);
if($j>0)
{
    echo $j;
}
else
{
    echo "no data";
}?> 
```

如果dept=Admin，我如何设置它，然后它将总数据更新到admin表，如果dept=Accounting，它也会更新它等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:44:01.750

您可以在 MySQL 查询中使用`GROUP BY`聚合[函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)来添加或按部门组织数据，然后将其显示在您的网页中：

```
SELECT SUM(column_name) FROM t_submissions GROUP BY dept_name; 
```

显然，您将根据需要更改查询。

# jquery - 按下带有 :hover 状态的按钮时禁用 iOS 的行为

> ID：10441961
> 
> 赞同：2
> 
> 时间：2012-05-04T02:37:33.043
> 
> 标签：jquery, html, css, ios, hover

我经常在使用 iPad 时点击网站上的按钮，而 iOS 所做的实际上是切换了设计师创建的 :hover 状态，这只是一个实际的 :hover 事件。我制作了一个网站，该网站正遭受这种毫无意义的行为。例如，您可以单击不离开页面的按钮，但在 iOS 中，它将永久显示该按钮的悬停状态。如何优雅地消除这种不明智的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T19:09:50.980

这将需要一些 javascript，但这是我能想到的最佳解决方案。

基本上，您将覆盖默认样式，然后切换一个类而不是依赖悬停事件。

我想说这个解决方案非常简单，并且允许用户既可以单击顶级链接又可以展开/折叠链接

**的HTML**

```
<ul>
  <li><a href="some-url">link name <span></span></a>
       <ul>
           <li><a href="some-url">link name</a></li>
       </ul>
  </li>
  <li><a href="some-url">link name <span></span></a></li>
  <li><a href="some-url">link name <span></span></a></li>
</ul> 
```

**CSS**

```
li{width:200px;}

li a span{
    display:inline-block;
    height:10px;
    width:10px; 
    background:#000;
    float:right;
}
/* Standard menu system */
li ul{display:none}
li:hover ul {display:block}

/* Override for ios */
/* Needs to be inside some media query */
/* Something like @media(max-width:497px) */

li:hover ul{display:none;}

li.hovered ul{display:block} 
```

**Javascript (jquery)**

```
 $('nav li a span').click(function (e) {
        e.preventDefault();
        $('nav li').not($(e.target).parents('li')).removeClass('hovered');
        $(e.target).parent('a').parent('li').toggleClass('hovered');
    }) 
```

**工作 JsFiddle**

[http://jsfiddle.net/styks1987/DY6kS/2/](http://jsfiddle.net/styks1987/DY6kS/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T14:41:07.953

例如，通过添加新的 CSS 文件并为最大宽度设备使用条件注释，然后在这些新的 CSS 文件中重置悬停状态......

苹果手机

```
 <link media="only screen and (max-device-width: 480px)" rel="stylesheet" href="css/iphone.css" type="text/css" title="no title"/> 
```

iPad

```
 <link media="only screen and (device-width: 768px)" rel="stylesheet" href="css/ipad.css" type="text/css" title="no title"/> 
```

然后只需调整为这些设备输出的 css 内容。

# facebook - Facebook 中的多人游戏

> ID：10441964
> 
> 赞同：1
> 
> 时间：2012-05-04T02:38:08.440
> 
> 标签：facebook, node.js, comet

我正在开发一款多人游戏，它将成为 Facebook 应用程序。做了一些研究，我发现对于服务器端推送，我需要 Comet，它最好在 Node.js 或 Python 中实现。

但 Facebook 的 API 只用 javascript 和 PHP 编写。我知道有第三方 API，但我不想使用它们。我猜我可以在 javascript 中完成所有的 Facebook 代码客户端，但这会有点困难，尤其是在 PHP 中很容易做到的时候。

据我说，我的选择总结如下

1.  保留服务器端推送并坚持使用定期 Ajax 请求 + PHP。

2.  坚持使用 Node.js 并离开 PHP 并使用 javascript 进行所有 FB 编程（如果可能的话，我认为是的）。

3.  在 Apache 中使用服务器端推送（我听说这不是一个好方法）。

4.  使用像 Java 这样的技术，带有一些彗星支持和 FB API。（我不知道 Pyhton）。

5.  HTML5 也引入了服务器端更新，也许它可以提供帮助。（虽然没有考虑太多）

最好的方法是什么？我在 Java、PHP 和 javascript 方面有很好的经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T03:03:34.903

所有 comet 都是一个普通的 HTTP ajax 请求，如果没有结果，服务器会故意延迟响应，并继续轮询数据源服务器端，直到有结果或请求超时。如果重要事件相当稀疏（即如果连续很多秒没有更新），则它是推送技术的一个很好的近似值。

我不认为 PHP 一般是一门很棒的语言，但在 PHP 中进行彗星（也称为长轮询）应该不会比在 Python 等中更难。所以如果你没有任何其他理由不使用PHP，那就去吧。您还应该能够通过 Python 或 Javascript/Node.js 等其他语言与 Facebook 的 API 进行交互，而不会遇到太多麻烦。

HTML5 还具有 Web 套接字，它与 HTTP 请求完全不同，并且比长轮询技术具有更好的延迟，尤其是对于非常频繁的更新。Web 套接字数据更接近您可能想象的“推送”技术的含义——彗星实际上只是通过延迟拉取实现的“推送”的近似值。套接字、comet 还是普通的非延迟 ajax 请求最适合您的游戏，这完全取决于您的游戏和服务器资源的具体情况。

# asp.net-mvc-3 - 具有 PartialView 和持久路由数据问题的 MVC3 Ajax.BeginForm

> ID：10441970
> 
> 赞同：0
> 
> 时间：2012-05-04T02:39:39.493
> 
> 标签：asp.net-mvc-3, jquery, asp.net-mvc-routing, ajax.beginform

我有一个主视图，该视图的 URL 有一个 Action/Controller/Area 和 id 值，例如：

[http://localhost:56513/Incident/IncidentHome/Index/8c02a647-a883-4d69-91be-7ac5f7b28ab7](http://localhost:56513/Incident/IncidentHome/Index/8c02a647-a883-4d69-91be-7ac5f7b28ab7)

我在这个主视图中有一个局部视图，它通过 Ajax 调用控制器中的方法。这个局部视图需要知道父页面的 url 的 ID 值。我发现如何做到这一点是通过“ParentActionViewContent”。就像是：

```
 using (Ajax.BeginForm("UpdatePersonalStatusPanel", "Status", new { area = "Tools" , id = ViewContext.ParentActionViewContext.RouteData.Values["id"].ToString() }, new AjaxOptions { UpdateTargetId = "divPersStatus" }))
        {
            <p style="text-align: center;">
                <span class="editor-label">@Html.LabelFor(m => m.StatusText)</span> <span class="editor-field">@Html.EditorFor(m => m.StatusText)</span>
                <input type="submit" value="Change Current Status" />
            </p>
        } 
```

现在，这对于调用控制器方法非常有用。ID 被正确传递，以便控制器可以在路由数据中看到它。我使用 id 执行数据库调用，然后再次返回部分视图。问题在于退货。我在 ajax.beginform 的 ViewContext.ParentActionViewContext.RouteData.Values["id"].ToString() 位上得到一个“对象引用未设置为对象的实例”，并且我的 targetid 没有刷新。

显然我一定做错了什么。其他人有更好的方法通过 Ajax 查看父视图的路由数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:13:02.483

如果我对您的理解正确，则此部分视图自称。所以`ParentActionViewContext`第一次工作，因为你的主视图第一次使用这个局部视图调用一个动作。但是，稍后的 ajax 调用会直接返回这个局部视图。当直接调用局部视图时，没有父视图操作，因此对`ParentActionViewContext`.

我建议不要在局部视图的模型中包含 id，而不是处理路线数据。

```
new { area = "Tools" , id = Model.Id } 
```

# java - 单击所需的像素 - Java

> ID：10441972
> 
> 赞同：0
> 
> 时间：2012-05-04T02:40:28.850
> 
> 标签：java

我正在尝试制作一个单击屏幕上指定颜色（RGB）的程序。我知道如何按位置从像素中获取颜色。我正在使用 Robot 类，但它没有内置的方法来做我想做的事。我可以用什么来做到这一点？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:49:59.340

首先你需要做一个屏幕截图：

```
Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
Rectangle screenRectangle = new Rectangle(screenSize);
Robot robot = new Robot();
BufferedImage image = robot.createScreenCapture(screenRectangle) 
```

然后处理图像以找到您的像素：

```
// the color you want to find
// Set it to your desired value
Color myColorToMatch = new Color();
int w = bufferedImage.getWidth(null);
int h = bufferedImage.getHeight(null);
// find your pixel in the rgbs array
for(int y=0;y<h;y++) {
 for(int x=0;x<w;x++) {
  int pixel = image.getRGB(x, y);
  Color currentColor = new Color(pixel);

  if(currentColor.equals(myColorToMatch)) {
   robot.mouseMove(x, y);
   robot.mousePress(InputEvent.BUTTON1_MASK);
   robot.mouseRelease(InputEvent.BUTTON1_MASK);
  }
 }
} 
```

注意：这是未经测试的代码，但主要为您提供所需的所有部分。

# java - 向 ArrayList 添加值 每次按下按钮

> ID：10441976
> 
> 赞同：0
> 
> 时间：2012-05-04T02:40:56.677
> 
> 标签：java, arraylist, actionlistener

这是我在这里的第一篇文章，希望我能做对！

我做了什么我创建了一个带有 JButtons 的 NxN 板，指示从 [0, 0] 到 [9, 9] 的坐标。每次单击按钮时，控制台都会显示坐标，我试图将这些坐标保存在 ArrayList 中，通过在另一个窗口中按下第二个按钮将显示该坐标……没什么特别的，抱歉，只是绕着我的头基本概念...

问题是我无法将要保存的值保存到 ArrayList 中，一旦按下第二个按钮，我就无法调用它...附上我的课程的代码...每个都在不同的文件中.

**Board.java**

```
public class Board{

public Board(){

    JFrame win = new JFrame ();
    GridLayout layout = new GridLayout(10, 10);
    win.setLayout(layout);
    for (int row1 = 0; row1 < 10 ; row1 = row1+1){
        for (int col1 = 0; col1 < 10; col1 = col1+1){
            JPanel jp = new JPanel();
            JButton jb = new JButton("[" + row1 + "," + col1 + "]");
            jb.addActionListener(new ButtonEventHandler(row1, col1));
            jp.add(jb);
            win.add(jp);
        }
        win.setVisible(true);
        win.pack();
}

    JFrame win2 = new JFrame("Stored values");
    win2.setVisible(true);
    JPanel jp2 = new JPanel();
    win2.add(jp2);
    JButton jb2 = new JButton("Check Log");
    jb2.addActionListener(new Position(win2, jb2));
    jp2.add(jb2);
    win2.pack();
}} 
```

**ButtonEventHandler.java**

```
public class ButtonEventHandler implements ActionListener {

private int _row1;
private int _col1;
private ArrayList<Number> _list;

public ButtonEventHandler(int row1, int col1){

    _row1 = row1;
    _col1 = col1;
    _list = new ArrayList<Number>();
}

@Override
public void actionPerformed(ActionEvent e) {
    System.out.println("Position: " + _row1 + ", " + _col1);
    _list.add(_row1);
    _list.add(_col1);
}

public ArrayList<Number> getList(){

    return _list;
}} 
```

**位置.java**

```
public class Position implements ActionListener  {

private JFrame _win2;

private JButton _jb2;
private int _row1;
private int _col1;
private ArrayList<Number> _list;

private ButtonEventHandler beh = new ButtonEventHandler(_row1, _col1);

public Position(JFrame win2, JButton jb2){
    _win2 = win2;
    _jb2 = jb2;     
}

@Override
public void actionPerformed(ActionEvent e) {

    System.out.println(beh.getList());      
}
} 
```

非常感谢你的帮忙！！

塞布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:52:19.347

您的代码中的问题是您没有一个数组列表：您有*许多*数组列表。每个按钮处理程序都有自己的！

您应该创建一个数组列表，并通过将其传递给它们的构造函数来在所有处理程序之间共享它。

```
public Position(JFrame win2, JButton jb2, AttayList<Number> list){
    _win2 = win2;
    _jb2 = jb2;
    _list = list;
}

public ButtonEventHandler(int row1, int col1, AttayList<Number> list) {
    _row1 = row1;
    _col1 = col1;
    _list = list;
}

public Board(){
    JFrame win = new JFrame ();
    GridLayout layout = new GridLayout(10, 10);
    win.setLayout(layout);
    ArrayList myList = new ArrayList<Number>();
    // In the code below, use myList as the last parameter to the constructors of ButtonEventHandler and Position
    ... 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:02:47.223

好的，我让它工作:)

我按照建议更改了构造函数，在**Position**类中我摆脱了

```
private ButtonEventHandler beh = new ButtonEventHandler(_row1, _col1, _list); 
```

并将 ActionPerformed 更改为：

```
@Override
public void actionPerformed(ActionEvent e) {
    System.out.println(beh.getList()); //previous code, changed with the one below
    System.out.println(_list);
} 
```

这样我就不再需要**Board**`getList`类中的方法了！

 **谢谢您的帮助！！**

# visual-studio-2008 - 我是否在 VS 2008 中正确添加了 .lib 文件？C++

> ID：10441981
> 
> 赞同：1
> 
> 时间：2012-05-04T02:41:44.857
> 
> 标签：visual-studio-2008, visual-c++

为了让故事更短，我编译了 gperf2.0 项目，并将输出添加到另一个项目的“lib\Release”和“lib\Debug”文件夹中。然后，我将 libtcmalloc_minimal.lib 文件添加到发布配置的链接器输入中，并将 libtcmalloc_minimal-debug.lib 文件添加到调试配置中，附加库文件夹设置为：$(ProjectDir)lib\Release 用于发布，$( ProjectDir)lib\Debug 用于调试。我还添加了一个构建后事件：复制 "$(ProjectDir)lib\Release*. *" "$(TargetDir)" 用于发布，复制 "$(ProjectDir)lib\Debug* .*" "$(TargetDir)" 用于调试。

问题？

错误 3 致命错误 LNK1181: 无法打开输入文件 '..\lib\Debug\libtcmalloc_minimal-debug.lib' 框架框架

当我在发布配置中构建项目时，它给了我。为什么要使用调试库？我三次检查了命令行输出，它使用了正确的文件夹。那么给了什么？(/LIBPATH:"g:\licenta\Framework-transfer_RO-03may-94b4df\Framework\Framework\lib\Release")

**编辑**

我还应该补充一点，在另一台 PC 上编译成功，我手动添加了 lib 路径，没有使用 $ 关键字。但是，在这台 PC 上，即使编译了 lib 文件，它也会给我链接器错误。我讨厌链接器。

**编辑 2**

我还应该提到，lib 文件是 dll 的导入库。该dll是在两台PC上编译的。

**编辑 3**

即使手动添加了 lib 路径，它也不起作用。我一直在尝试解决这个问题一个小时，这很烦人。我真的很讨厌链接器。

**编辑 4**

我已经删除了对该 lib 文件的所有引用，包括标头、dll 等。它仍然给了我这个：

错误 3 致命错误 LNK1181: 无法打开输入文件 '..\lib\Debug\libtcmalloc_minimal-debug.lib' 框架框架

什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:57:41.070

不要使用链接器项目属性来尝试解决此问题。相反，通过右键单击解决方案资源管理器窗口中的项目名称，选择“添加现有项”，然后使用文件浏览器选择所需的`.lib`文件，将库直接添加到项目中。

这有点复杂，因为您希望同时拥有库的 Debug 和 Release 版本。要解决此问题，请使用我描述的方法将`libtcmalloc_minimal.lib`和添加到项目中。`libtcmalloc_minimal-debug.lib`然后：

1.  右键单击`libtcmalloc_minimal.lib`（在“解决方案资源管理器”窗口中），选择“属性”，将“配置”设置为“调试”并将“从构建中排除”设置为“是”。单击确定。
2.  对 执行相同的`libtcmalloc_minimal-debug.lib`操作，只是这次您将“发布”配置与“从构建中排除”= YES 的配置相同。

（所以`libtcmalloc`在Debug版本`libtcmalloc`中排除了Release，在Release版本中排除了Debug。否则它会尝试同时链接两个库。）

Visual Studio 知道，如果`.lib`项目文件中列出了某个文件，则应将其传递给具有正确相对路径的链接器。它还知道不要打扰项目中为当前配置（调试或发布）设置了“从构建中排除”的任何文件。

# asp.net-mvc - 当 asp.net mvc 应用程序将状态码 401 写入响应时，IIS7 返回 500

> ID：10441982
> 
> 赞同：1
> 
> 时间：2012-05-04T02:41:47.587
> 
> 标签：asp.net-mvc, iis-7

我们的 mvc 应用程序将响应状态代码设置为 401，并在某些情况下将 TrySkipIisCustomErrors 设置为 true。

我可以从 IIS 日志中看到它正在获取此状态代码：

```
2012-05-04 01:32:42 10.212.98.183 POST /v1.07/session - 80 - 10.24.22.26 curl/7.20.1+(i686-pc-cygwin)+libcurl/7.20.1+OpenSSL/0.9.8r+zlib/1.2.5+libidn/1.18+libssh2/1.2.5 401 0 0 48325 
```

但是我在客户端收到的响应是 500：

```
< HTTP/1.1 500 Internal Server Error
< Content-Type: text/html
< Server: Microsoft-IIS/7.0
< Date: Fri, 04 May 2012 02:31:18 GMT
< Content-Length: 75
<
* Connection #0 to host webserver left intact
* Closing connection #0
The page cannot be displayed because an internal server error has occurred. 
```

我已经在 web.config 中尝试了围绕 httpErrors 和 customErrors 的 mvc 应用程序的各种其他设置，但似乎没有任何区别。

如何配置 IIS 以返回实际响应而不是 500？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T03:51:31.177

因此，经过更多的谷歌搜索后，我更改了 applicationHost.config 文件以允许委托 httpErrors，现在我得到了正确的响应返回给客户端。

我必须将以下内容从拒绝设置为允许：

```
<section name="httpErrors" overrideModeDefault="Allow" /> 
```

我尝试按照文件中的说明使用`<location>`标签：

```
<location path="" overrideMode="Allow">
  <system.webServer>
    <httpErrors />
  </system.webServer>
</location> 
```

但这没有用。如果我在路径中指定网站，而不是所有网站，它会起作用，但是，我想允许它用于网络服务器上的所有网站。

# android - android中的彻底自定义标签

> ID：10441985
> 
> 赞同：2
> 
> 时间：2012-05-04T02:42:44.337
> 
> 标签：android, android-tabhost

我正在尝试为我的 Android 应用程序创建一个相当激进的选项卡重新设计。我希望标签在宽度和高度上的大小不同，并且让焦点标签在内容和其他标签上都有阴影。但是，我不知道如何更改选项卡的高度或焦点选项卡投射的阴影。任何人都可以帮忙吗？这是我想要实现的目标：

![在此处输入图像描述](../Images/cc9aa7f908fd1145ccb391544019b80a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:06:15.503

如果你想用你的自定义样式来自定义你的 Tabhost，你必须自定义它。对于这种情况，我们可以使用一个功能 -

1）将自定义`xml`文件膨胀到主要`TabWidget's`使用`LayoutInflater`

2) 在膨胀的 xml 文件中进行任何您需要的更改。为此，请参阅下面来自stackoverflow的现有答案。这肯定会帮助你。

[定制的 TabHost](https://stackoverflow.com/a/6992662/940096)

# java - Eclipse RCP MessageConsole：如何允许用户输入和处理这个监听器？

> ID：10441986
> 
> 赞同：2
> 
> 时间：2012-05-04T02:42:46.193
> 
> 标签：java, eclipse-plugin, console, eclipse-rcp, rcp

我正在编写一个创建新控制台的 eclipse 插件。请看我的源代码：

```
IWorkbenchPage page = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();
IConsoleView consoleView = (IConsoleView) page.showView(IConsoleConstants.ID_CONSOLE_VIEW);

MessageConsole myConsole = new MessageConsole("CLI", null);
ConsolePlugin.getDefault().getConsoleManager().addConsoles(new IConsole[] { myConsole });
consoleView.display(myConsole);

MessageConsoleStream stream = myConsole.newMessageStream();
stream.println("Hello World"); 
```

控制台“CLI”出现，但用户输入无法对其进行编辑。我想让用户可以通过在控制台中输入直接输入到控制台中。

而且我还想处理输入，但任何侦听器或键绑定。

有谁知道可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T10:17:29.617

改用一个`IOConsole`！`MessageConsole`基本上是一个只读版本`IOConsole`。

来自`MessageConsole.createPage(...)`：

```
public IPageBookViewPage createPage(IConsoleView view) {
    IOConsolePage page = (IOConsolePage) super.createPage(view);
    page.setReadOnly();
    return page;
} 
```

# objective-c - IOS中使用CG旋转后的文本中心

> ID：10441990
> 
> 赞同：0
> 
> 时间：2012-05-04T02:43:05.037
> 
> 标签：objective-c, ios, cgcontext, cgaffinetransform

我必须旋转圆圈内的文本，但我无法在圆弧绘制时使其居中。我成功使用 CGAffineTranform 旋转，但文本始终不在径向中心。注意：文本位于弧内。

```
float l_angleText=lStartAngle+((lStopAngle-lStartAngle)/2);
    CGContextSelectFont(p_contex, "Helvetica", 12.5, kCGEncodingMacRoman);

    CGAffineTransform myTransform=CGAffineTransformRotate(CGAffineTransformMakeScale(1,-1),-l_angleText);
    CGContextSetTextMatrix(p_contex, myTransform);

    CGContextSetTextDrawingMode(p_contex, kCGTextFill);
    CGContextSetRGBFillColor(p_contex, 1.0, 1.0, 1.0, 1.0); //White 

    // get x/y for an the angle. The point in which I start drawing the text.
    CGPoint lPoints = angleRToPoint(-l_angleText,[self getRadioPoint:l_angleText]);    

    //Move the point according the coords. 
    const double l_pointX = mReference.x+lPoints.x;
    const double l_pointY = mReference.y-lPoints.y;
    NSString* lText= [self getText];
    CGContextShowTextAtPoint(p_contex,  l_pointX, l_pointY, [lText UTF8String] , strlen([lText UTF8String])); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:03:51.737

我刚刚使用象限方法解决了问题，用 sin 和 cos 修复了偏移量。该解决方案提供了良好的体验。

```
-(CGPoint) getShiftToCenter:(const float) angle
{
    CGPoint lRet;
    unsigned int x = getCuadrante(angle);
    float rx,ry;
    switch (x) {
        case 1:
            rx=-sin(angle);
            ry=cos(angle);
            break;
        case 2:
            rx=cos(angle);
            ry=-cos(angle);
            break;
        case 3:
            rx=sin(angle);
            ry=-cos(angle);
            break;
        case 4:
            rx=-sin(angle);
            ry=cos(angle);
            break;
        default:
            break;
    }

    const float lFactor=4; // this is according to size of the font use it
    lRet.x=lFactor*rx;
    lRet.y=lFactor*ry;

    NSLog(@"Cuad %d , An %f ; x=%f - y=%f", x, angle, lRet.x,lRet.y);

    return  lRet;
} 
```

# android - sqlite android 备份恢复示例代码

> ID：10441991
> 
> 赞同：0
> 
> 时间：2012-05-04T02:43:34.863
> 
> 标签：android, sqlite, database-backups, android-backup-service

我正在尝试自学如何使用 Android 的`BackupRestore`服务来备份我的应用程序的 sqlite 数据库，但我找不到任何关于如何正确扩展`BackupAgent`or的示例代码`BackupAgentHelper`，所以我有点迷失了......

我查看了 [http://developer.android.com/resources/samples/BackupRestore/src/com/example/android/backuprestore/ExampleAgent.html](http://developer.android.com/resources/samples/BackupRestore/src/com/example/android/backuprestore/ExampleAgent.html)但不确定如何将此示例应用于备份 sqlite db 文件。 ..

有没有人有任何用于备份整个 sqlite 数据库（`onRestore`和`onBackup`方法）的示例代码，或者关于资源的任何想法（除了`BackupRestore`文档——我已经广泛地浏览了这些，我很难理解它们）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T02:58:48.930

这个示例代码似乎有很好的文档记录。你看过这个了吗？

[http://developer.android.com/resources/samples/BackupRestore/src/com/example/android/backuprestore/BackupRestoreActivity.html](http://developer.android.com/resources/samples/BackupRestore/src/com/example/android/backuprestore/BackupRestoreActivity.html)

# iphone - 按下 UIButton 时的随机值

> ID：10441999
> 
> 赞同：0
> 
> 时间：2012-05-04T02:44:02.903
> 
> 标签：iphone, ios

我希望能够在按下 UIButton 时随机一个值。

我尝试了 if else 语句，但它似乎崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T02:46:38.690

每次按下按钮时，这都会生成一个随机数并将其输出到控制台。

```
- (void)viewDidLoad
{
    UIButton *button = [UIButton buttonWithStyle:UIButtonStyleRoundedRect];
    [button addTarget:self withAction:@selector(random) forEvent:UIControlEventTouchUpInside];
    [button setFrame:CGRect(50,50,100,50);

    [self.view addsubview:button];
}

- (void)random
{
    NSLog(@"%i",arc4random());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T02:47:47.720

将 IBAction 添加到您的按钮，然后执行以下操作：

```
- (IBAction)buttonPress:(id)sender
{
    myValue = arc4random() % MAX_VALUE;
} 
```

这将从 [0, MAX_VALUE) 生成一个随机数，并将其存储在 (int) 变量`myValue`中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T02:50:21.517

试试这个：

```
[ButtonName addTarget:self action:@selector(randomize) forControlEvents:UIControlEventTouchUpInside];

- (void) randomize
{

    random = arc4random()%5;

    switch (random)
    {
        case 0:
                *condition*
             break;
        case 1:
                *condition*
             break;

.....

} 
```

希望这可以帮助你。