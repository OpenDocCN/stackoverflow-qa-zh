# StackOverflow 问答 10308000-10308999

# python - 显示双误差线的 matplotlib 图例

> ID：10308003
> 
> 赞同：6
> 
> 时间：2012-04-25T00:54:08.607
> 
> 标签：python, matplotlib

为什么 matplotlib 显示两个错误栏？我认为这可能与不对称误差线有关。

![在此处输入图像描述](../Images/f7f48e041a5abde8492224cf1e5179d0.png)

您可以通过以下方式重现问题：

```
>>> import matplotlib.pyplot as plt
>>> plt.errorbar([1,2,3],[3,4,2],yerr=[[1,2,0.5]]*2, label='data')
<Container object of 3 artists>
>>> plt.legend()
<matplotlib.legend.Legend object at 0x10b82f590>
>>> plt.show() 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T01:25:44.643

您可以设置图例中的点数：

```
plt.legend(numpoints=1) 
```

# cocoa - NSTableView 并从 Finder 拖放

> ID：10308008
> 
> 赞同：11
> 
> 时间：2012-04-25T00:55:05.527
> 
> 标签：cocoa, drag-and-drop, finder

我正在尝试将 Finder 拖放到我的应用程序的 NSTableView 中。该设置使用一个`NSTableView`数组控制器，它使用 Cocoa 绑定到 Core Data 存储充当数据源。

我做了以下事情，基本上是按照我在 SO 和其他网站上找到的各种博客文章：

在`awakeFromNib`我的视图控制器中，我调用：

```
[[self sourcesTableView] registerForDraggedTypes:[NSArray arrayWithObjects: NSPasteboardTypePNG, nil]]; 
```

我对 NSArrayController 进行了子类化，并将以下方法添加到我的子类中（子类化的原因是数组控制器需要被告知 drop，因为它充当表视图的数据源）：

```
- (BOOL) tableView: (NSTableView *) aTableView acceptDrop: (id < NSDraggingInfo >) info row: (NSInteger) row dropOperation: (NSTableViewDropOperation)operation 
```

我对上述内容的实现目前只写入日志，然后返回布尔值 YES。

```
- (NSDragOperation) tableView: (NSTableView *) aTableView validateDrop: (id < NSDraggingInfo >) info proposedRow: (NSInteger) row proposedDropOperation: (NSTableViewDropOperation) operation 
```

在 IB 中，我的数组控制器指向我的自定义 NSArrayController 子类。

结果：什么都没有。当我将一个 PNG 从桌面拖到我的表格视图上时，什么也没有发生，文件很高兴地弹回了它的原点。我一定做错了什么，但不明白是什么。我哪里错了？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-25T04:57:03.390

Finder 中的拖动始终是文件拖动，而不是图像拖动。您需要支持从 Finder 中拖动 URL。

为此，您需要声明您需要 URL 类型：

```
[[self sourcesTableView] registerForDraggedTypes:[NSArray arrayWithObject:(NSString*)kUTTypeFileURL]]; 
```

您可以像这样验证文件：

```
 - (NSDragOperation)tableView:(NSTableView *)aTableView validateDrop:(id < NSDraggingInfo >)info proposedRow:(NSInteger)row proposedDropOperation:(NSTableViewDropOperation)operation
{
    //get the file URLs from the pasteboard
    NSPasteboard* pb = info.draggingPasteboard;

    //list the file type UTIs we want to accept
    NSArray* acceptedTypes = [NSArray arrayWithObject:(NSString*)kUTTypeImage];

    NSArray* urls = [pb readObjectsForClasses:[NSArray arrayWithObject:[NSURL class]]
     options:[NSDictionary dictionaryWithObjectsAndKeys:
                [NSNumber numberWithBool:YES],NSPasteboardURLReadingFileURLsOnlyKey,
                acceptedTypes, NSPasteboardURLReadingContentsConformToTypesKey,
                nil]];

    //only allow drag if there is exactly one file
    if(urls.count != 1)
        return NSDragOperationNone;

    return NSDragOperationCopy;
} 
```

然后，您需要在调用该方法时再次提取 URL `tableView:acceptDrop:row:dropOperation:`，从 URL 创建图像，然后对该图像执行某些操作。

Even though you are using Cocoa bindings, you still need to assign and implement an object as the `datasource` of your `NSTableView` if you want to use the dragging methods. Subclassing `NSTableView` will do no good because the datasource methods are not implemented in `NSTableView`.

You only need to implement the dragging-related methods in your datasource object, not the ones that provide table data as you're using bindings to do that. It's your responsibility to notify the array controller of the result of the drop, either by calling one of the `NSArrayController` methods such as `insertObject:atArrangedObjectIndex:` or by modifying the backing array using Key-Value Coding-compliant accessor methods.

# javascript - 以“压缩”方式组合两个数组 - JavaScript

> ID：10308012
> 
> 赞同：4
> 
> 时间：2012-04-25T00:56:20.490
> 
> 标签：javascript, arrays

所以，我一直在想一些可以用 JavaScript 中的数组做的小练习。我遇到了以“压缩”方式组合两个数组的想法，`(arrayA[0], arrayB[0], arrayA[1], arrayB[1]...)`依此类推。任何留在可能更长的阵列中的东西都将被附加到最后。

我已经搜索了 stackoverflow - 我问的原因是我目前正在学习入门编程课程，所以我们真的不知道我们可以用 JavaScript 做的很多“事情”。如果可能的话，希望看到一个“简单”方法的解决方案！

我目前正在采用另一种方式，但我似乎无法完成将阵列的其余部分固定到最后的最后一部分。

```
function alternatingMerge(array1, array2)
//this function will merge two different arrays in an alternating fashion
//i.e = array1[0], array2[0], array1[1], array2[1], array1[2], array2[2], ... , etc
{
    var mergedArray;
    var i; // while loop counter
    var j; // 
    var k; // 
    var arrayLengths;

    arrayLengths = array1.length + array2.length;
    i = 0; // 
    j = 0; // ARRAY1 COUNTER
    k = 0; // ARRAY2 COUNTER
    mergedArray = new Array(arrayLengths);
    //window.alert(mergedArray);

    while (i < arrayLengths)
    {
        if (i%2 === 0)
        {
            mergedArray[i] = array2[j];
            j = j + 1;
        }
        else
        {
            mergedArray[i] = array1[k];
            k = k + 1;
        }
        i = i + 1;
    }
    return mergedArray;
} 
```

我觉得这很简单，但我们将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-03-09T12:59:26.297

这是一个使用 ES6（现代浏览器）的任意大小的两个数组的小而有效的编织函数：

```
const w = (a, b) => a.length ? [a[0], ...w(b, a.slice(1))] : b;

const array1 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
const array2 = ['A', 'B', 'C', 'D', 'E'];

console.log(JSON.stringify(w(array1, array2)));
```

**解释：**

变量`w`设置为这个短递归函数：

`(a, b) => a.length ? [a[0], ...w(b, a.slice(1))] : b`

由于没有评论的余地，我将逐条解释。

`(a, b) =>`- 对于两个输入数组，`a`和`b`。

`a.length`- 检查第一个数组是否不为空。

`? [___]`- 如果不为空，则返回一个数组。

`a[0],`- 使该数组中的第一项与第一个数组中的第一项相同。

`...w(b, a.slice(1))`- 使用相同函数的结果填充数组的其余部分，第一个参数使用数组，第二个`b`参数使用数组的第一项以外的所有内容`a`。

`: b`- 否则，如果第一个数组为空，则返回数组`b`。

它最终做的是在第一个和第二个数组之间切换，从该数组中删除第一项并将其递归地传递回结果数组。它这样做直到其中一个数组没有剩余的项目，此时另一个数组的其余部分被返回并添加到结果的末尾。

* * *

通过一些调整，它可以在任意数量的阵列中旋转。这个版本的运行方式基本相同，除了第一个数组有一个默认值来处理不输入的参数，第二个参数处理多个数组而不是一个。此外，在检查 array 的长度之前`a`，它会计算数组`b`以查看是否还有剩余的数组可以循环。如果没有，`a`则返回数组。如果还有数组，但`a`为空，则使用剩余数组作为其参数返回递归函数的结果。

```
const w = (a = [], ...b) => 
    b.length ? a.length ? [a[0], ...w(...b, a.slice(1))] : w(...b) : a;

const array1 = [1, 2];
const array2 = '♦♡♣♤♥♢';
const array3 = ['A', 'B', 'C'];
const array4 = ['', '', ''];
const array5 = [null, NaN, undefined];

const stringify = (o) => JSON.stringify(o, (k, v) => v === undefined ? '__undefined__' : v !== v ? '__NaN__' : v).replace(/"__undefined__"/g, 'undefined').replace(/"__NaN__"/g, 'NaN');

console.log(stringify(w()));
console.log(stringify(w(array1)));
console.log(stringify(w(array1, array2)));
console.log(stringify(w(array1, array2, array3)));
console.log(stringify(w(array1, array2, array3, array4)));
console.log(stringify(w(array1, array2, array3, array4, array5)));
```

*该`stringify`函数是我添加的用于更正`JSON.stringify`转换`NaN`和`undefined`转换为`null`. 它不会影响编织功能的工作方式。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T01:08:41.500

这个怎么样：

```
function mergeAlternating(array1, array2) {
    var mergedArray = [];

    for (var i = 0, len = Math.max(array1.length, array2.length); i < len; i++) {
        if (i < array1.length) {
            mergedArray.push(array1[i]);
        }
        if (i < array2.length) {
            mergedArray.push(array2[i]);
        }
    }
    return mergedArray;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T01:14:55.133

这是一个快速的...

```
// Takes an arbitrary number of arrays as arguments
function zip() {
   var merged = [], index = 0, cont, i;
   do {
      cont = false;
      for (var i=0; i<arguments.length; i++) {
         A = arguments[i];
         if (index < A.length) {   
            cont = true;
            merged.push(A[index]);
         }
      }
      index++;
   } while (cont);
   return merged;
}

merged = zip([1,3,5,7,9,11], [2,4,6,8]);
// [1, 2, 3, 4, 5, 6, 7, 8, 9, 11]

merged = zip([1, 4, 7], [2, 5, 8], [3, 6, 9])
// [1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-09T13:07:09.583

这是使用[`Array.from()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from),[`Array.flat()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat)和的一种简短方法[`Array.filter()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)：

```
const zip = (a, b) => Array.from( // create an array
    { length: Math.max(a.length, b.length) }, // as long as the longest of a and b
    (_, i) => [a[i], b[i]] // fill it with pairs from a and b
  ).flat().filter(x => x !== undefined); // then flatten the pairs and remove undefined entries

console.log(...zip([1, 2, 3, 4, 5, 6, 7, 8], ['a', 'b', 'c', 'd']));
console.log(...zip([1, 2, 3, 4], ['a', 'b', 'c', 'd', 'e', 'f', 'g']));
console.log(...zip([1, 2, 4, 5], []));
console.log(...zip([], ['a', 'b', 'c', 'd']));
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T06:27:21.380

我想了一会儿，这就是我想出的。它还支持任意数量的数组作为输入，就像其他一些答案一样。

```
function merge() {
  var result = [];
  for (var i = 0;;++i) {
    var temp = [];
    for (var j = 0; j < arguments.length; ++j) {
      var atPos = arguments[j].slice(i, i+1);
      if (atPos.length) {
        temp.push(result.push(atPos[0]));
      }
    }
    if (temp.length == 0) {
      return result;
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-22T11:46:58.360

```
var aOne = [1,3,5,7,9,11], aTwo = [2,4,6,8], aResult = [];
while (Math.max(aOne.length, aTwo.length) > 0)
  aResult.push(aOne.shift(), aTwo.shift());
document.writeln('aResult: ' + JSON.stringify(aResult.filter(Boolean)));
// aResult: [1,2,3,4,5,6,7,8,9,11] 
```

有`.filter(Boolean)`必要删除`null`由于其中一个数组在另一个数组之前为空而产生的值。

# c++ - 如何在 CLI 中打印表格

> ID：10308013
> 
> 赞同：-2
> 
> 时间：2012-04-25T00:56:36.337
> 
> 标签：c++, c, ansi

我使用这样的代码来打印表格

```
print "\t1%s\t2%s\t3%s\t4%s", str1, str2, str3, str4 
```

但是，有些 str 宽度有点长，它的输出是这样的

```
1blabla   2blabla   3blabla  4blabla
1blablablabla       2blabla  3blabla  4blabla 
```

有没有更好的方法来格式化这些字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T01:23:23.410

首先，对于每一列，确定显示每个元素所需的最大长度，例如通过遍历列条目并找到最大值`strlen()`。然后，对于每一行，打印相应的列条目并根据需要用空格填充。

这是一个 C 语言中的漂亮打印机，它采用指向字符串的 2D 指针数组（其中每个“行”以 -`NULL`终止，最后一行由所有`NULL`s 组成）：

```
void print_pretty(char ***arr)
{
    int i, j, cols;

    /* count columns */
    j = cols = 0;
    while (arr[0][j++]) cols++;

    /* init column sizes */
    size_t sizes[cols];
    for (j = 0; j < cols; sizes[j++]=0);

    /* 1st pass: calculate column widths */
    for (i = 0; arr[i][0]; i++)
            for (j = 0; arr[i][j]; j++)
                    if (strlen(arr[i][j]) > sizes[j])
                            sizes[j] = strlen(arr[i][j]);

    /* 2nd pass: print table */
    for (i = 0; arr[i][0]; i++) {
            for (j = 0; arr[i][j]; j++)
                    printf("%-*2$s ", arr[i][j], sizes[j]);
            puts("");
    }
} 
```

最难看的部分是 C99 可变大小数组和对`printf()`. 此外，您可以优化掉一个`strlen()`.

输出如下所示：

```
foo   bar   baz 
snafu fubar x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T02:26:43.790

如果您在编译时知道字符串的最大长度，您可以简单地使用`printf()`格式说明符指示该长度：

```
printf("%12s %12s %12s %12s\n", str1, str2, str3, str4); 
```

或者使用 C++ 流操纵器：

```
#include <iomanip>
...
cout << setw(12) << str1 << ... << '\n'; 
```

如果您想要可变宽度的列，这也允许您在运行时传递列宽。您也可以`printf()`通过更改格式说明符并在字符串之前传递长度来执行此操作：

```
printf("%*s ...\n", str1.length(), str1, ...); 
```

`stdio`在 C++ 中混合代码和代码被认为是一种糟糕的风格`iostream`，但后者通常更可取，除非它使您的代码变得难以阅读。

# javascript - javascript中数组中索引位置的字符串插入

> ID：10308014
> 
> 赞同：1
> 
> 时间：2012-04-25T00:56:58.163
> 
> 标签：javascript, arrays, object

我正在用 javascript 编写 quine mcclusky 算法。我将输入作为十进制值，例如 0、2、6、7。我的代码中可以包含 1 到 5 的变量。1 是 a 或“a”，5 是 a、b、c、d、e。

在我的代码中，我将输入转换为二进制值。例如对于 0、2、6、7。我有一个二进制等效数组 ["000"、"010"、"110"、"111"]。

我为计数 1 做了另一个逻辑。我取二进制数组的每个元素并计算 1 的数量。这些以下列方式保存在对象中：

```
{0:"000",1:"010",2:"110",3:"111"} 
```

这可能不是很困难，但是，如果我有输入**0、2、4、3、5**并且我运行一个循环，这样：

```
function onesgrp(str)
{

var tmp= str.split(""); //splits the string for example "010" into [0 1 0]
for(i=0;i<len.str;i++)
{
if(tmp[i]==1)

index++;

else 
continue;

}
}

This function will tell how many 1's each string has and index value will represent the no. of 1's. 
```

我想将此字符串插入对象中的“索引”位置。如果`index=2`，我想将数组插入索引 2，依此类推。然后，如果我有另一个字符串`index=2`，我想将它添加到 obj 位置 2，这样我就不会覆盖前一个字符串。最后，我有一个 obj，每个索引都包含 'index' 数字为 1 的字符串。但问题是我有不同的长度变量。

谁能告诉我这样做的方法？我发现了一些 quine mcclusky 算法的 javascript 版本，但我发现它们太难理解了。由于我是初学者，并且对高级 javascript 不太熟悉。有谁知道使用 quine mccluskey 进行逻辑最小化的更简单代码？我真的很感激。

我的问题的另一种描述：

> 我正在用 javascript 编写 quine mcclusky 算法。A 正在尝试编写代码，以便我为数组的每个元素都有一个二进制字符串数组。我计算字符串中 1 的数量。我最多可以有 5 个可变长度字符串，但是对于每个输入，数组中的所有字符串都将具有相同的长度。对于每个输入，我想按对象中的“1 的数量”对字符串进行分组。例如，我有一个二进制字符串`0001`，其中有一个“1”。此字符串将保存在对象的索引 1 处。其次，我有另一个字符串`0010`，它也应该添加到索引 1，但它不应该覆盖之前保存的字符串。我有例如`1010`它将转到对象中的索引 2。在我将数组的所有字符串分配给对象后，对象的每个索引都会显示该键位置的字符串中“1”的数量。我想将`obj[0]`元素与其他关键位置进行比较，如果元素仅在一个位置上有所不同，例如 `0000`并且`0001`相差一个位位置，我想保存`0000`在另一个 obj 中。遵循上述方法，直到找到所有主要蕴涵。

# c# - 使用 RestSharp 将图像上传到 WCF Api - 图像无效

> ID：10308015
> 
> 赞同：3
> 
> 时间：2012-04-25T00:57:04.657
> 
> 标签：c#, rest, azure, restsharp

我已成功制作了一个应用程序，该应用程序将来自我的 Windows Phone 的请求发送到托管在 azure Web 角色中的 WCF api。我正在使用 Restful POST 方法使用 RestSharp 来执行此操作。这一切都很好，图像出现在存储中，但图像没有像普通图像文件一样打开。

将它们与我之前上传的其他图像进行比较，在元数据信息中它说不可见的图像有一个 contentMD5 字段，该字段设置为“AKEYWqGgulwi6/9/VY2KPg==”（而其他人没有）这可能是导致的文件的问题？

我附上了我的 RestSharp 代码，也许我正在添加一些我不应该添加的东西？我怀疑的错误一定来自这里，因为这是操纵图像流的唯一地方。

```
 public void SendRequest(Stream imageStream, string imageID)
    {
        var client = new RestClient();
        client.BaseUrl = apiAddress;
        var request = new RestRequest("agerecog/{imageName}", Method.POST);
        request.AddUrlSegment("imageName", imageID);

        //convert imagestream to byte array
        var byteArray = new byte[imageStream.Length];
        imageStream.Read(byteArray, 0, (int)imageStream.Length);

        //add byteArray to request
        request.AddFile("image/jpeg", byteArray, imageID);
        var url = client.BuildUri(request).ToString();
        client.ExecuteAsync<VizageResponse>(request, response =>
            {
                //request info. to be added here
            });
    } 
```

**编辑#1** 经过一番工作，我决定将 addFile 行更改为：

```
 request.AddFile(null, byteArray, null); 
```

这改变了流的长度，也使 contentMD5 字段为空。但是，该图像仍然不是有效的图像文件。鉴于我要比较的图像都来自 Windows Phone 模拟器，它们都应该是相同的白页，角落有一个黑色的小方块 - 但文件之间的大小不同（有效图像文件的长度为 5670 ，原始代码长度为 6076，使用上面的第二个 addFile 长度为 6239）

**编辑#2** 做更多的分析，当图像流被发送之前，它的长度属性是 6116，当它到达服务器时，它是 6370。264 是从我相信的 RestSharp 方法中的某个地方添加的，或者当流数据在服务器端进行解释。WCF服务的代码：

```
 [WebInvoke(UriTemplate = "/agerecog/{imageName}", Method = "POST")]
    VizageResult analyseFace(string imageName, Stream imageStream); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T21:14:32.487

**问题解决了**

我终于解决了这个问题，最终结果是可以看到图像。发生的事情是 imageStream 还包含有关文件名称的数据，这导致它（当保存在 Azure 中时）不显示为图像文件。

我通过使用此处找到的 MultipartParser 类解决了这个问题：http: [//multipartparser.codeplex.com/](http://multipartparser.codeplex.com/)在服务器端将请求解析为文件名和文件流块。然后我使用正常过程从这个字节 [] 中保存了图像。

我将 webrequest 数据解析为其组成部分的代码如下：

```
 MemoryStream imageStream = new MemoryStream();

     MultipartParser parser = new MultipartParser(dataStream);
        if (parser != null && parser.Success)
        {
            imageName = parser.Filename;
            imageStream.Write(parser.FileContents, 0, parser.FileContents.Length);
        } 
```

当您使用内存流时，请记住将其位置设置回 0 - 我犯了一个小学生错误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:40:30.450

我不是很熟悉 RestSharp。你能确定MD5是正确的吗？尝试将 blob 中的数据与原始图像文件中的数据进行比较。例如，检查它们是否具有相同的大小，第一个/最后几个字节是否相同（并假设中间的字节也相同）。

# spring - 如何在 STS 中的 vFabric 上切换 tomcat 用户

> ID：10308016
> 
> 赞同：0
> 
> 时间：2012-04-25T00:57:14.593
> 
> 标签：spring, tomcat

我作为 vFabric 的 tomcat-users.xml 中的用户之一登录我的测试应用程序。不幸的是，我检查了“保存凭据”（或“保存密码”）选项，因此我无法更改 STS 上的用户，因为当前凭据似乎停留在服务器会话中并且似乎变得恒定，并且每次我登录应用程序时它都不会弹出打开登录访问窗口，我一直自动以同一用户身份登录。我必须运行外部 Web 浏览器来验证对其他角色的更改。

那么如何取消“自动登录”，以便我可以使用另一个用户/角色在 STS/vFabric 上工作？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:10:01.347

几个选项。

1.  在 tomcat-users.xml 文件中更改用户的密码。

2.  转到您正在使用的浏览器的选项/设置/任何菜单，然后清除为该主机保存的凭据。根据浏览器（例如某些移动浏览器），您可能只能清除所有保存的密码。然后关闭浏览器并重新打开它以确保丢弃任何会话 cookie。

# extjs - 如何在 MVC 模式中包含 UX 类？

> ID：10308018
> 
> 赞同：11
> 
> 时间：2012-04-25T00:57:20.020
> 
> 标签：extjs, gridpanel

在 MVC 模式之前，我会简单地通过在 JS 的顶部包含这个来包含 UX 类，之前`Ext.onReady`：

```
Ext.Loader.setConfig({enabled: true});
Ext.Loader.setPath('Ext.ux', 'extjs/examples/ux');
Ext.require([
    'Ext.ux.grid.FiltersFeature'
]); 
```

现在我正在使用 MVC 模式，并且我有一个需要使用相同功能的网格面板。我在视图中包含了一个 requires 语句，如下所示：

```
Ext.define('ST.view.StudentLog', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.studentlog',
    requires: [
        'Ext.ux.grid.FiltersFeature'
    ], 
```

但是该应用程序在第一次开始加载时会产生 404 错误。

有任何想法吗？

**编辑：**

我尝试将相同的代码块放在视图顶部也无济于事（参考该`Ext.Loader.setConfig / .setPath`块）。

加载器不断尝试加载 UX 类，`extjs/src/ux/`无论我如何尝试告诉它。根据[这个建议](https://stackoverflow.com/questions/8601094/changing-extjs-4-default-mvc-folder-structure)，我也尝试在我的应用程序控制器中定义一个路径属性，但似乎回答者在源代码中看到的任何内容在 4.1 rc3 中都不存在，因为我找不到它并且它不存在工作。

如果我只是将 FilterFeature.js 添加为带有`<script>`标签的 HTML 中的导入源文件，那么当我的应用程序启动时，它的所有依赖项都会出现 404 错误。

必须有一种简单的方法可以直接从 UX 文件夹将 UX 类包含在应用程序中，以便它可以链接到其他 UX 依赖项。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-25T07:03:46.367

好的，我从[这篇文章](http://www.sencha.com/forum/archive/index.php/t-151917.html?s=d627f99a601485612891fdd4b0dcf6e6)中找到了它。

只需`Ext.Loader.setPath`在应用控制器顶部使用 call 即可，例如：

```
Ext.Loader.setPath('Ext.ux', 'extjs/examples/ux');
Ext.application({
    name: 'ST',
    autoCreateViewport: true,
    ... 
```

或者你想把 ux 类放在哪里，为了浓缩，应用程序特定的 UX 类应该被拉出并放在你自己的文件夹中，就像`app/ux`帖子封面一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-14T17:32:43.670

Extjs 6，使用 MVVC 和 sencha cmd。我使用 sencha generate 应用程序来启动一个应用程序。我编码到我想使用的点`ItemSelector`，修改了`app.json`需要在 中添加一个块`ux`：

```
"requires": [
  "font-awesome",
  "ux"
], 
```

在我想要创建`ItemSelector`小部件的控制器代码中：

```
requires: [
    'Ext.ux.form.MultiSelect',
    'Ext.ux.form.ItemSelector'
], 
```

以及创建`ItemSelector`. 我遇到的一个问题是，它需要一个带有模型的真实数据存储，而我无法使用模拟数据。

然后我做了一个sencha app build

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-18T01:10:43.093

您可以将 Loader 参数组合在一起，使其易于阅读和理解应用程序/文件结构。我相信正在发生的事情是您缺少库文件和应用程序文件所在位置的定义——所有这些都与 app.js 相关。因此，当您加载时，应用程序会尝试使用基于主命名空间路径 (extjs/src) 的文件，而不是应用程序根目录。

```
Ext.Loader.setConfig({
    enabled : true,
    paths: {
        'Ext'    : 'extjs/src', // library src folder/files
        'MyApp'  : 'app',       // app namespace folder/files
        'Ext.ux' : 'ux'         // extension namespace folder/files
    }
}); 
```

同样的过程也适用于触摸——只需将“extjs”换成“触摸”。

如果使用 Architect，您需要选择 Application，添加一个 Loader（配置面板）。这将为 Loader 提供一个可以修改的路径对象。**enabled**选项是一个复选框选项，默认为 true 。

编辑：我没有说清楚的是，在大多数情况下不需要定义库源文件和应用程序文件，尤其是使用文件的默认布局。以下片段通常很充足：

```
Ext.Loader.setConfig({
    enabled : true,
    paths: {
        'Ext.ux' : 'ux'
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T01:06:17.217

这听起来像是`Ext.ux.grid.FiltersFeature`文件所在路径的问题。您能检查导致 404 的请求的 URL 是什么吗？这应该会给你一个线索，让你知道在哪里放置`Ext.ux.grid.FiltersFeature`它以使其自动加载。

这是我正在使用的目录结构以及 ux 类所在的示例。

```
js
|---app.js
|
|---app
|    |---controller
|    |---model
|    |---store
|    +---view
|
+---ux
     |---form
     +---layout 
```

基本上，命名空间将遵循目录结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-28T00:35:15.507

在我的情况下（使用`ux/DataTip.js`），使用 ext-4.2.1.883 和 sencha cmd 4.0.2.67，我能够使用`Ext.ux`提供的解决方案的类，使用：

```
Ext.Loader.setPath('Ext.ux', 'extjs/examples/ux'); 
```

但是`sencha app refresh`抱怨：

[ERR] C2008：需求没有匹配的文件 (Ext.ux.DataTip)

应对/链接`extjs/examples/ux`以`extjs/src/ux`解决我的问题。该应用程序有效，并且`sencha cmd`还能够跟踪事物。使用此复制/链接操作，无需使用`Ext.Loader.setPath`. 只需使用需求中的类：

```
Ext.define('Demo.Application', {
name : 'Demo',
requires : [ (...), 'Ext.ux.DataTip'], 
```

# iphone - UIButton 在 MapView 顶部时不可点击

> ID：10308019
> 
> 赞同：1
> 
> 时间：2012-04-25T00:57:29.323
> 
> 标签：iphone, ios, uibutton, mkmapview, clickable

我已经搜索了相当长的时间，但到目前为止我找不到确切的问题。

我在 InterfaceBuilder 中创建了一个 mapView。通过单击一个按钮，我添加了另一个视图。

```
self.buttonView = [[ButtonView alloc] init];
self.buttonView.backgroundColor = [UIColor whiteColor];
[self.view addSubview:self.buttonView]; 
```

在创建的 buttonView 中，我以编程方式创建了 5 个按钮，如下所示：

```
UIButton *button1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
button1.frame = CGRectMake(25, 275, 100, 30);
[button1 setTitle:@"button1!" forState:UIControlStateNormal];
[self addSubview:button1]; 
```

按钮显示正确，但不可点击。我已经尝试了几件事，但到目前为止似乎没有任何效果。每当我单击一个按钮时，都会单击 mapView。例如，当我双击一个按钮时，mapView 会放大。mapView 和 buttonView 都是“视图”的子视图。

我希望 buttonView 位于 mapView 的顶部（它确实如此），并且 mapView 在 buttonView 下方滚动（它确实如此），而按钮保持在它们所在的位置（它们确实如此），但它们不可点击

非常感谢您的帮助！:-)

EDIT1：尝试过`self.buttonView.userInteractionEnabled = YES;`- 不会改变任何东西。（也适用于按钮本身！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:20:56.023

非常简单的错误，我的“上”视图是不可见的，并且拒绝点击下面的按钮：S

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-12T21:39:44.137

我使用了界面生成器，但没有看到按钮。我必须将 MKMapView 设置为隐藏，直到按钮显示并位于正确的位置。然后我将 MKMapView 设置为可见。

这是我在界面构建器中必须采取的步骤才能显示我的按钮

1.  创建一个包含视图的 UIViewController
2.  添加一个 MKMapView 并设置约束

![在 IB 的视图控制器中显示 MKMapView](../Images/b52f90f71df41eba55b87a2b7d2cec8a.png)

2.  在与 MKMapView 相同的视图中添加 UIButton，设置图像和文本，无论适用。如果 MKMapView 在您尝试调整大小或移动按钮时消失，则地图视图刚刚将其宽度和高度设置为零。在地图视图的大小检查器中输入新值，它将重新调整大小。或者，您可以将按钮移出 MKMapView 的其他位置，然后将按钮移回您想要的位置。

3.  重要的部分是为 UIButton 设置约束。我将 MKMapView 设置为隐藏，直到我获得正确的大小和位置，然后将其设置回可见。

    ![在 MKMapView 顶部显示一个 UIButton，在 IB 中具有约束](../Images/26a5682a071711fefd65619e59ba1abc.png)

这是它在模拟器中的样子

![显示正在运行的应用程序，并在地图上显示按钮](../Images/dbfb32b31e81893972e6336b9f3156fd.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T03:16:11.957

不确定这是一个拼写错误：您应该将子视图添加到 self.buttonView 对吗？

```
[self.buttonView addSubview:button1] 
```

看看有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T13:19:06.923

我曾经遇到过类似的情况，解决方案是

```
[button1 setExclusiveTouch:YES]; 
```

如果控件元素下的视图也处理触摸事件，则控件可能会以意想不到的方式工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-23T19:34:24.860

使用 Cartogaphy，我还必须设置类似于@Maria 的高度和宽度约束。所以以下方法不起作用：

```
categoryButton.addTarget(self, action: "toggleCategoryDropdown:", forControlEvents: UIControlEvents.TouchUpInside)
categoryButton.backgroundColor = UIColor.purpleColor()
categoryButton.userInteractionEnabled = true

self.addSubview(categoryButton)

constrain(categoryButton) {
    categoryButton in

    categoryButton.top == categoryButton.superview!.top + 26
    categoryButton.left == categoryButton.superview!.left + globalConfig.margin
} 
```

但这确实有效

```
categoryButton.addTarget(self, action: "toggleCategoryDropdown:", forControlEvents: UIControlEvents.TouchUpInside)
categoryButton.backgroundColor = UIColor.purpleColor()
categoryButton.userInteractionEnabled = true

self.addSubview(categoryButton)

constrain(categoryButton) {
    categoryButton in

    categoryButton.top == categoryButton.superview!.top + 26
    categoryButton.left == categoryButton.superview!.left + globalConfig.margin
    categoryButton.width == 100
    categoryButton.height == 100
} 
```

# php - php中函数外的全局关键字

> ID：10308021
> 
> 赞同：12
> 
> 时间：2012-04-25T00:57:48.677
> 
> 标签：php

众所周知，global 关键字使变量（或对象、数组）在我们正在处理的当前函数中可见

```
<?php

$some_var = 'some string';

function __test(){
    global $some_var;
    echo $some_var; // some string
} 
```

但是有些开发人员乍一看仍然在函数之外使用 global 关键字，这对我来说没有任何意义。

好吧，问题是：在函数之外使用“全局”关键字是否有意义？？？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-25T01:06:52.103

从[文档](http://php.net/manual/en/language.variables.scope.php)：

> 在函数外部使用 global 关键字不是错误。如果文件包含在函数内部，则可以使用它。

本质上，您可以将函数胆量放在与函数声明不同的文件中。然后将这些胆量包含在函数中。如果您单独查看内容，这将给人一种用户`global`在函数外部使用的印象，但事实是，当解释此代码时，它将在函数*内部进行解释。*

```
$name = "Jonathan";

function doSomething () {
  include( 'functionGuts.php' );
} 
```

我们`functionGuts.php`文件的内容可能是：

```
global $name;
echo "Hello, " . $name; 
```

当单独查看时，`functionGuts.php`会给`global`人一种在函数之外使用的印象，而实际上它是这样使用的：

```
$name = "Jonathan";

function doSomething () {
  global $name;
  echo "Hello, " . $name;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T01:19:54.203

函数之外的全局关键字根本不做任何事情。但该文件可能包含在函数中。

我不使用它的另一件事是使我的代码更具可读性和结构化。我想在函数中使用 global 关键字访问的任何变量，我在主文件中使用 global 声明它，所以只需快速浏览一下，我就知道它在某处被引用为全局变量。（意味着无论如何都不要重命名，因为 other 在其他地方使用... :)）

# google-drive-api - Google Drive 是否适合用作公司文件共享？

> ID：10308032
> 
> 赞同：12
> 
> 时间：2012-04-25T00:59:33.603
> 
> 标签：google-drive-api

我不确定这是一个编程问题。例如，如果有一个 API 允许开发人员在驱动器中添加和删除用户。

Google Drive 是否仅供个人使用？有没有办法制作一个驱动器并与一组用户共享？有没有办法创建具有只读访问权限的用户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T18:21:18.943

云端硬盘共享模型基于每个文件，也基于每个文件夹。正如 Alain 所说，您现在必须使用 Document List API 以编程方式控制 ACL，通过它您可以与其他人或一群人共享 Drive 帐户的整个文件夹。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T16:02:26.623

Google Drive Web UI 与旧的 Google Docs Web UI 共享相同的功能，这意味着您可以将文档和文件夹（集合）共享给具有特定访问权限（只读、读写、所有者）的特定用户或组。[Google Drive API](http://developers.google.com/drive)不允许您控制 ACL，但您仍然可以使用Documents [List API](http://developers.google.com/google-apps/documents-list)来完成此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T09:00:04.067

满足您在访问控制方面的要求。从这个角度来看，它是相当强大的。

但我同意@Jan-Z 和@daniel-gerson 的观点，即 GDrive 具有所有文件共享系统中最繁琐和难以理解的逻辑/用户界面，而且桌面客户端存在问题。

用户发现一些“他们的”文件在不理解原因的情况下消失了，虽然它背后有一些 *逻辑*，但它只是没有人的逻辑。你不应该为了不失去工作而训练你的用户使用这种工具。

此外，“我的驱动器”文件夹背后有一个真正的文件夹结构，但其他任何地方的文件夹都只是“标签”，一组文件可以有很多。这两个逻辑永远不会正确地结合在一起，你会想知道其中一些文件在哪里，如果你在一个地方删除它们会发生什么。这是 Vespa 踏板车上法拉利发动机的动力——你永远不会安全转弯。

我们参与其中，没有人喜欢它，**我们**只是想以最低的成本（不是产品价格，而是过渡成本）摆脱它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T10:55:23.023

不，我建议不要将 Google Drive 用于公司文件共享。它仍处于测试阶段是有原因的。我的 Google 驱动器上周一直在同步 3 个小文件，一直无法完成这个简单的任务。

当它工作时，它工作得很好，但它还没有为生产环境做好准备。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T23:01:37.820

BTW, I think Stefano is spot on when he says:

"Also, the "my drive" folder has a real folder structure behind it, but everywhere else folders are just "tags" and a set of files can have many. Those two logics never correctly make sense together, and you are left wondering where some of those files are, and what happens if you delete them in one place."

This is a fundamental difference between the way Google Drive handles files and the way windows explorer handles files. There is no foolproof way to translate the two directory structures, so if you want to use the Google UI (Web or Desktop) for your corporate file share, I think that is a bust...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T22:56:26.067

我不确定我是否会使用 google drive（免费版）作为公司文件共享。但是，我们现在一直在 Google Apps for Business（Google Apps 的付费版本）上使用云端硬盘，我们发现它是一种可靠的文件存储解决方案。

但是，Google Drive 仅用于后端文件存储。文件访问是通过我们自己的软件使用 Google Drive SDK 控制的，没有人使用甚至可以通过 Web UI 或 Google Drive 桌面应用程序访问文件结构。

我最近开始使用 Google Drive Desktop 应用程序在我们的每个办公地点维护我们文件的额外备份副本，但使用它的时间还不够长来保证它。

# jython - Jython：从类路径中删除一个 jar 文件

> ID：10308037
> 
> 赞同：1
> 
> 时间：2012-04-25T01:00:01.020
> 
> 标签：jython

关于stackoverflow的第一个问题，请耐心等待:)

我正在开发一个需要在运行时添加 jar 文件的 Java 项目。我使用 Jython 是因为这样我可以轻松找到给定类和基础包的子类。到现在为止没问题，因为我只需要打电话

```
sys.path.append("myjarfilepath") 
```

查看我的新 jar 添加到类路径中。

但是如何从类路径中删除 jar 文件？简单地从 sys.path 中删除它是行不通的。从 sys.modules 中删除包也不起作用。

有任何想法吗？

提前致谢。

伊曼纽尔

# c# - 在 Visual Studio 中安装项目如何从主 exe 设置版本

> ID：10308039
> 
> 赞同：0
> 
> 时间：2012-04-25T01:00:05.983
> 
> 标签：c#, installation, version

我有一个开箱即用的标准安装项目，它安装一个程序（c#）和一个 dll。我希望从主程序本身设置安装程序版本，而不是将其输入到安装项目的属性框中。

是否可以这样做，还是我需要比标准安装程序更强大的安装程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T01:02:00.750

尝试单击一次部署：[ClickOnce 部署](http://msdn.microsoft.com/en-us/library/t71a733d%28v=vs.80%29.aspx)

# android - Android 应用上 Google Drive 的“AuthTokenType”值是什么？

> ID：10308043
> 
> 赞同：3
> 
> 时间：2012-04-25T01:01:48.670
> 
> 标签：android, google-data-api, google-drive-api

我应该使用什么作为“AuthTokenType”值来请求从 Android 应用程序访问用户的 Google Drive？

例如，以下是其他服务的一些 AuthTokenType 值： [Google 数据 API 中的“authTokenType”参数是什么？](https://stackoverflow.com/questions/4773804/what-is-authtokentype-parameter-in-google-data-api)

我打算使用提供的 Java Client API 与 Google Drive 交互，即：[http ://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API](http://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T01:34:41.107

ClientLogin 现已正式弃用，因此您应该使用 OAuth。范围在 SDK[参考](https://developers.google.com/drive/register)上列为[https://developers.google.com/drive/register](https://developers.google.com/drive/register)。但是，显然您需要在 Chrome 网上商店中注册您的应用程序，因此目前似乎只支持 Web 应用程序，而且您很可能无法从 Android 应用程序中使用它（还）。如果你设法让它工作，请在这里发帖。

# awk - awk 语法错误

> ID：10308046
> 
> 赞同：3
> 
> 时间：2012-04-25T01:01:58.670
> 
> 标签：awk

我的代码出现此语法错误 - 我尝试将引号放在不同的地方，但没有运气。有人可以帮忙吗。谢谢！

```
awk: non-terminated string  | grep Re... at source line 1
 context is
     >>>  <<< 
awk: giving up
 source line number 2 
```

```
awk '/ (TCP|UDP) / { split($5, addr, /:/); 
cmd = "/bin/geoiplookup " addr[1] | grep 'Rev 1:' | sed 's/Rev 1: //g' " | awk -F', ' '{print $4",", $3",", $2}'; 
cmd | getline rslt; 
close(cmd); 
print $1, $2, $3, $4, $5, $6, rslt }' < "$IP_PARSED" >> "$BlockedIPs" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T01:08:03.207

的论点`awk`没有终止。 `awk`正在解释您管道的其余部分并感到困惑。如果您确实打算将管道作为 awk 脚本的一部分，请考虑将`awk`脚本编写为文件（删除封闭的单引号）或用双引号替换最外层的单引号并用于`\`转义插入的双引号。不幸的是，您不能嵌套单引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T01:14:33.237

您正在尝试在单引号内嵌入单引号。这不起作用；此外，shell 无法轻松嵌入它们。有一些复杂的方法，例如

```
$ echo 'hello'"'"'world'
hello'world
$ echo 'hello'\''world'
hello'world 
```

注意：嵌入`\'`不起作用，就像双引号一样*。*

```
$ echo 'hello\'world'
hello\'world 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T04:36:35.570

我想我们以前来过这里。不要试图在`cmd`. 使用它来运行您的外部命令，然后在主 AWK 程序中进行处理。

```
awk '/ (TCP|UDP) / { split($5, addr, /:/); 
cmd = "/bin/geoiplookup " addr[1] ; 
while (cmd | getline rslt) {
    if (rslt ~ /Rev 1: /) {
        gsub(/Rev 1: /, "", rslt)
        split(rslt, r, ",")
    }
}
close(cmd); 
print $1, $2, $3, $4, $5, $6, r[4], r[3], r[2] }' < "$IP_PARSED" >> "$BlockedIPs" 
```

# c++ - c++函数代码泛化使用模板

> ID：10308049
> 
> 赞同：1
> 
> 时间：2012-04-25T01:02:21.067
> 
> 标签：c++, templates, iterator, metaprogramming, containers

我正在编写一个类似 stl 的容器类，它具有以下功能：

```
 Iterator begin(){
        return Iterator(data_.begin(), 1);
    }

    ConstIterator begin() const{
        return ConstIterator(data_.begin(), 1);
    } 
```

我想我可以用一个函数来替换两者：

```
 template <typename itr0, typename itr1>
    itr0 begin(){
        return itr1(data_.begin(), 1);
    } 
```

当我调用以下代码时，代码是在编译时生成的：

```
 Iterator it = foo.begin<Iterator, Iterator>();
    ConstIterator it = foo.begin<ConstIterator const?, ConstIterator>(); 
```

我的第一个问题是， typename 实际上是什么`ConstIterator begin() const`？

其次，有没有办法让这个元编程在课堂之外是透明的？即我仍然可以使用以下代码来调用 begin() 就好像它是以标准方式编写的一样？

```
 C foo;
    const C foo2;
    Iterator it = foo.begin();
    ConstIterator it = foo2.begin(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T01:58:39.167

不幸的是，您需要分别定义这两种方法，因为正如您所指出的，它们的签名因`const`修饰符而异。没有可用的模板魔法可以克服这个问题（至少我知道没有）。

但是，您可以使用多种不同的技术将它们的实现组合成一个方法。这是一个这样的选项，可以避免任何`const_cast`'ing：

```
struct Container
{
    template< typename I, typename C >
    friend I begin_impl( C & c ){
      return I( c.data_.begin(), 1 );
    }

    Iterator begin(){
        return begin_impl< Iterator >( *this ); // *this is "Container"
    }

    ConstIterator begin() const{
        return begin_impl< ConstIterator >( *this ); // *this is "Container const"
    }
}; 
```

有关更多选项，请参见[此处](https://stackoverflow.com/questions/856542/elegant-solution-to-duplicate-const-and-non-const-getters)。

# redirect - HTTP 303：http:// 而不是 http://www 导致 Loop / 303

> ID：10308050
> 
> 赞同：0
> 
> 时间：2012-04-25T01:02:23.173
> 
> 标签：redirect, joomla, joomla-sef-urls

我有一个 Joomla！1.5.23 网站为 SEF 网址运行[Artio 。](http://www.artio.net/joomsef/documentation)完整配置：

*   JoomSEF3 3.9.5
*   Virtuemart JoomSEF 扩展 2.1.1
*   Joomla！1.5.23
*   Virtuemart 1.1.9
*   Joomfish 2.0.4

我已经告诉 Artio（SEF 组件）只使用 www url。不知何故，当我转到没有 www 的 http:// url 时，浏览器会挂起。Firefox 11 告诉我

```
The page isn't redirecting properly
Firefox has detected that the server is redirecting the request for this address in a way that will never complete. 
```

告诉 Artio 不要处理 www 非 www 的东西并清除 url 仍然让我遇到同样的问题去非 www url。Firebug 在两种情况下（两种 Artio 设置）都向我显示状态 303 - 请参阅其他。让我觉得这是一个 .htaccess 问题或 DNS 问题。这是.htaccess：

```
##
# @version $Id: htaccess.txt 9975 2008-01-30 17:02:11Z ircmaxell $
# @package Joomla
# @copyright Copyright (C) 2005 - 2008 Open Source Matters. All rights reserved.
# @license http://www.gnu.org/copyleft/gpl.html GNU/GPL
# Joomla! is Free Software
##

#####################################################
#  READ THIS COMPLETELY IF YOU CHOOSE TO USE THIS FILE
#
# The line just below this section: 'Options +FollowSymLinks' may cause problems
# with some server configurations.  It is required for use of mod_rewrite, but may already
# be set by your server administrator in a way that disallows changing it in
# your .htaccess file.  If using it causes your server to error out, comment it out (add # to
# beginning of line), reload your site in your browser and test your sef url's.  If they work,
# it has been set by your server administrator and you do not need it set here.
#
#####################################################

##  Can be commented out if causes errors, see notes above.
# Options +FollowSymLinks

#
#  mod_rewrite in use

RewriteEngine On

# non-www to www

#RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
#RewriteRule ^(.*)$ http://www.%1/$1 [R=301,L]

#  Uncomment following line if your webserver's URL
#  is not directly related to physical file paths.
#  Update Your Joomla! Directory (just / for root)

# RewriteBase /

########## Begin - Joomla! core SEF Section
#
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/index.php
RewriteCond %{REQUEST_URI} (/|\.php|\.html|\.htm|\.feed|\.pdf|\.raw|/[^.]*)$  [NC]
RewriteRule (.*) index.php
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L]
#
########## End - Joomla! core SEF Section

########## Begin - Rewrite rules to block out some common exploits
## If you experience problems on your site block out the operations listed below
## This attempts to block the most common type of exploit `attempts` to Joomla!
#
# Block out any script trying to set a mosConfig value through the URL
RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|\%3D) [OR]
# Block out any script trying to base64_encode crap to send via URL
RewriteCond %{QUERY_STRING} base64_encode.*\(.*\) [OR]
# Block out any script that includes a <script> tag in URL
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
# Block out any script trying to set a PHP GLOBALS variable via URL
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
# Block out any script trying to modify a _REQUEST variable via URL
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
# Send all blocked request to homepage with 403 Forbidden error!
RewriteRule ^(.*)$ index.php [F,L]
#
########## End - Rewrite rules to block out some common exploits

######## Redirect to keep old site running
#
DirectoryIndex index.php index.html
#
######## End Redirect preservation

######## Fix memory issue 
php_value memory_limit 40M
php_value max_execution_time 200
php_value max_input_time 200
php_value upload_max_filesize 20M 
```

我以前从来没有303。如何使 www-less url 再次工作？

**更新 1**

当我取消注释时

```
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://www.%1/$1 [R=301,L] 
```

我得到了 301 并且无法使用 www url 访问该站点

**更新 2** 本周与 SEF 组件的制造商 Artio 一起进行一些测试。这里似乎没有人有线索，所以这似乎是最好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:26:36.050

[Artio](http://www.artio.net/)的好人为我发现了这个问题：*“......问题是由 System – Jfrouter 插件中启用的“使用 302 重定向”选项引起的。如果禁用此选项，非 www 域似乎正确重定向到 www。 "* 现在一切都好。

# svn - Cygwin 报告“-bash: /usr/bin/svn: Bad address”

> ID：10308053
> 
> 赞同：5
> 
> 时间：2012-04-25T01:02:58.143
> 
> 标签：svn, bash, cygwin

之上

```
$ svn co http://plugins.svn.wordpress.org/jetpack-easy-playlists/ jep/ 
```

或者

```
$ svn --version 
```

我得到-bash：`/usr/bin/svn: Bad address`

```
$  ls -l /usr/bin/svn 
```

给我`-rwxr-xr-x 1 JFishwick Domain Users 189966 Mar 8 15:52 /usr/bin/svn`

我试过删除 /usr/bin/cygwin1.dll 并重新安装 base，但没有运气。

编辑：此外，

```
$ type svn
svn is /usr/bin/svn 
```

和

```
$ which svn
/usr/bin/svn 
```

和

```
$ ldd $(which svn)
        ntdll.dll => /cygdrive/c/WINDOWS/system32/ntdll.dll (0x7c900000)
        kernel32.dll => /cygdrive/c/WINDOWS/system32/kernel32.dll (0x7c800000)
        cygsvn_client-1-0.dll => /usr/bin/cygsvn_client-1-0.dll (0x6f2c0000)
        cygsvn_ra-1-0.dll => /usr/bin/cygsvn_ra-1-0.dll (0x620c0000)
        cygsvn_ra_local-1-0.dll => /usr/bin/cygsvn_ra_local-1-0.dll (0x6b9c0000)
        cygsvn_repos-1-0.dll => /usr/bin/cygsvn_repos-1-0.dll (0x6b6c0000)
        cygsvn_fs-1-0.dll => /usr/bin/cygsvn_fs-1-0.dll (0x6e800000)
        cygsvn_fs_base-1-0.dll => /usr/bin/cygsvn_fs_base-1-0.dll (0x6c780000)
        cygsvn_delta-1-0.dll => /usr/bin/cygsvn_delta-1-0.dll (0x61bc0000)
        cygsvn_subr-1-0.dll => /usr/bin/cygsvn_subr-1-0.dll (0x6d680000)
        cygwin1.dll => /usr/bin/cygwin1.dll (0x61000000)
        cygz.dll => /usr/bin/cygz.dll (0x692c0000)
        cyggcc_s-1.dll => /usr/bin/cyggcc_s-1.dll (0x6bf40000)
        cygapr-1-0.dll => /usr/bin/cygapr-1-0.dll (0x69f70000)
        cyguuid-1.dll => /usr/bin/cyguuid-1.dll (0x542e0000)
        cygaprutil-1-0.dll => /usr/bin/cygaprutil-1-0.dll (0x69f50000)
couldn't open C:\cygwin\bin\svn
cannot load file 
```

我的 $PATH：

```
$ echo $PATH
/usr/local/bin:/usr/bin:/bin:/cygdrive/c/WINDOWS/system32:/cygdrive/c/WINDOWS:/cygdrive/c/WINDOWS/System32/Wbem:/cygdrive/c/PROGRA~1/IBM/CLIENT~1:/cygdrive/c/PROGRA~1/IBM/CLIENT~1/Shared:/cygdrive/c/PROGRA~1/IBM/CLIENT~1/Emulator:/cygdrive/c/Program Files/Common Files/Lenovo:/cygdrive/c/Program Files/TortoiseSVN/bin:/cygdrive/c/Program Files/Microsoft SQL Server/100/Tools/Binn:/cygdrive/c/Program Files/Microsoft SQL Server/100/DTS/Binn:/cygdrive/c/Program Files/WinSCP:/cygdrive/c/WINDOWS/system32/WindowsPowerShell/v1.0:/cygdrive/c/Program Files/QuickTime Alternative/QTSystem:/cygdrive/c/Program Files/Git/cmd:/cygdrive/c/Program Files/Google/Google Apps Sync:/cygdrive/c/Program Files/Google/Google Apps Migration:/cygdrive/c/Program Files/CVSNT: C:/Program Files/Java/jdk1.6.0_26/bin:/usr/lib/lapack 
```

对比

```
$ $PATH
-bash: /usr/local/bin:/usr/bin:/bin:/cygdrive/c/WINDOWS/system32:/cygdrive/c/WINDOWS:/cygdrive/c/WINDOWS/System32/Wbem:/cygdrive/c/PROGRA~1/IBM/CLIENT~1:/cygdrive/c/PROGRA~1/IBM/CLIENT~1/Shared:/cygdrive/c/PROGRA~1/IBM/CLIENT~1/Emulator:/cygdrive/c/Program: No such file or directory 
```

[进一步的讨论和事实调查在这里。](https://chat.stackoverflow.com/transcript/10501)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:25:53.923

可能缺少 dll。尝试从 dos 提示符 vis 运行 svn.exe：

c:> **c:\cygwin\bin\svn.exe**

我收到一个弹出窗口，表明缺少 cygproxy-1.dll。重新安装任何带有“代理”一词的东西，问题就消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:30:02.087

注意路径的不同：

```
$ type svn
svn is /usr/bin/svn

$ ldd $(which svn)
    ...
couldn't open C:\cygwin\bin\svn
cannot load file 
```

当您使用 ldd 时，有某种硬编码路径指向`C:\cygwin\bin`aka `/bin/`...您的可执行文件实际上驻留在`/usr/bin/`

只是为了咯咯笑，我会尝试将 svn 复制或移动到 /bin 中，看看这是否能解决问题。如果您复制而不是移动，请确保在 $PATH 中将 /bin 移动到 /usr/bin 之前，以便这实际上是被调用的内容。

我问的原因`$PATH`是cygwin用来在双引号之间进行转换并被双引号阻碍的机制`C:`......`/cygdrive/c`我习惯在windows侧的路径周围加上引号，这导致cygwin中的路径出现问题。当我看到一个未翻译的路径名时，它敲响了心灵的钟声……唉，这不是问题所在。

# hash - 程序解释期间的高效增量哈希计算

> ID：10308058
> 
> 赞同：3
> 
> 时间：2012-04-25T01:05:16.737
> 
> 标签：hash, lisp, scheme, interpreter, memoization

我想写一个**递归记忆的 Scheme 解释器**。在评估期间的任何时候，解释器都应该能够检测到它何时接收到它以前见过的一对表达式和环境作为参数。

**简单的记忆`eval`和`apply`是低效**的。`eval`它需要在每次调用/时查找哈希表中的参数`apply`，这将需要遍历哈希表匹配的整个（可能很大）参数。

例如，假设解释器评估程序

```
(car (list A)) 
```

其中 A 计算为一个大对象。当解释器评估应用程序`(list A)`时，它首先单独评估`list`和`A`。在应用于 之前`list`，`A`它会在其哈希表中查找它之前是否见过此应用程序，遍历整个`A`对象以计算哈希。稍后，当记忆解释器应用于`car`包含 A 的列表时，它会为该列表计算一个哈希，这再次涉及遍历整个 A 对象。

相反，我想构建一个解释器，**逐步建立近似唯一的 hashes**，尽可能避免重新计算，并保证不会发生冲突。

例如，可以使用其值的 MD5 递归扩展解释器操作的每个对象，或者，如果它是复合对象，则使用其组件散列的 MD5。环境可能会为其每个变量/值条目存储散列，并且环境的散列可以作为单个散列的函数来计算。然后，如果环境中的条目发生变化，则无需重新遍历整个环境来计算环境的新哈希。相反，只需要重新计算已更改的变量/值对的散列，并且需要更新条目散列集的全局散列。

**是否存在增量构建近似唯一哈希的相关工作，特别是在递归记忆和/或程序评估的背景下？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T01:17:05.440

请注意，如果表达式是不可变的（不允许自修改代码），那么您可以对它们使用 EQ 相等。如果环境是不可变的，您可以同样对待它们。EQ 相等很快，因为您只是将机器指针中的位作为哈希。

那么问题是分配改变环境，导致表达式值改变。如果他们被允许，如何处理。

一种方法是记下在其词法范围内包含破坏性代码的环境，并以某种方式对其进行注释，以便评估者可以识别此类“污染环境”而不为它们进行缓存。

顺便说一句，您显然需要具有弱语义的哈希表，这样任何成为垃圾的对象都不会堆积在内存中。

# vb.net - 视觉基础。NET 8：如何添加通用表达式？

> ID：10308059
> 
> 赞同：0
> 
> 时间：2012-04-25T01:05:19.840
> 
> 标签：vb.net

我希望在我的 Visual Basic 工作中加入通用表达式。

除了基本输入“Imports System.Text.RegularExpressions”之外，我不知道如何在我的 VB 项目中放置通用表达式。

但是，我可以创建表达式（因此，一切都不会丢失）。

任何帮助，包括例子，将不胜感激。

提前致谢，

肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T01:17:11.247

[在这里](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)[查看](http://www.regular-expressions.info/dotnet.html)文档和更直接的指南。

# android - myActivity 扩展 GridView 实现 OnClickListener

> ID：10308065
> 
> 赞同：2
> 
> 时间：2012-04-25T01:06:18.523
> 
> 标签：android, android-layout, gridview, onclicklistener

我不确定标题是否可以，但我会尝试更好地解释它。

我想在我的布局中显示一个网格。为此，我正在使用自定义 ArrayAdapter。我不知道如何将 onClickListener 设置为每个项目......

布局包含一个用于显示名称的标签和一个网格视图。

这是我的活动：

```
public class Sala extends Activity{
GridView gridView;
TextView label_name;

ArrayList<String> lista_opciones = new ArrayList<String>();  

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_sala);
    //Refresh the name in the label
    Bundle bundle=getIntent().getExtras();
    String name= bundle.getString("name");
    label_name= (TextView) findViewById(R.id.label_name);
    label_name.setText(name);

    //Loading array
    lista_op.add("Op 1");  
    lista_op.add("Op 2");  
    lista_op.add("Op 3");  
    lista_op.add("Op 4"); 

    //AdaptadorOpciones
    ArrayAdapterOpciones mAdapter = new ArrayAdapterOptions(this,lista_op);  

    //Set the customAdapter to the grid
    gridView = (GridView) findViewById(R.id.grid); 
    gridView.setAdapter(mAdapter);  
} 
```

}

我应该重写女巫方法以在每个项目中实现 onClickListener 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T01:25:13.350

为 gridview 项目点击实现 setOnItemClickListener：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_sala);
    //Refresh the name in the label
    Bundle bundle=getIntent().getExtras();
    String name= bundle.getString("name");
    label_name= (TextView) findViewById(R.id.label_name);
    label_name.setText(name);

    //Loading array
    lista_op.add("Op 1");  
    lista_op.add("Op 2");  
    lista_op.add("Op 3");  
    lista_op.add("Op 4"); 

    //AdaptadorOpciones
    ArrayAdapterOpciones mAdapter = new ArrayAdapterOptions(this,lista_op);  

    //Set the customAdapter to the grid
    gridView = (GridView) findViewById(R.id.grid); 
    gridView.setAdapter(mAdapter);  
    gridView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

                //Do stuff here
            }
        });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T01:25:48.153

您可以在 Adapter.getView 实现中添加侦听器：

```
 @Override       
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView button = (ImageView) convertView;
        if (button == null) {
            button = new ImageButton(); // or whatever
            button.setOnClickListener(this);
        }
        button.setId(ids_present.get(position));
        return button;
    } 
```

# php - 有人可以告诉我这些代码有什么问题吗？

> ID：10308066
> 
> 赞同：-1
> 
> 时间：2012-04-25T01:06:35.713
> 
> 标签：php, html, forms, post

我无法`$_POST`在浏览器中打印 的值。这是`form_methods.php`：

```
<html>
    <head>
        <title>Form Methods</title>
    </head>
    <body>
        <form method="post" action="formoutputpage.php">
            <p><input type="text" name="greeting" size="15"></p>
            <p><input type="text" name="name" size="15"></p>
            <p><input type="submit" name="submit" value="Salutation"></p>
        </form>
    </body>
</html> 
```

这是`formoutputpage.php`：

```
<?
    echo $_POST['greeting'];
    echo " ".$_POST['name'];
    echo "!";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T01:19:54.817

我认为这段代码没问题。检查是否有未显示的错误。
因此，将这段代码插入到 formoutputpage.php 的顶部，以准确显示所有错误。

```
<?php
  ini_set( 'display_errors', 1 );
  error_reporting(E_ALL);
?> 
```

并允许检查短标签。`<?`=>`<?php`
根据您的配置，可能不会显示解析错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T01:21:26.947

你看到“！” ?

if(false) openlink('http://www.php.net/manual/en/ini.core.php#ini.short-open-tag') else echo '我不知道'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T01:29:51.343

试试这个

```
<html>
    <head>
        <title>Form Methods</title>
    </head>
    <body>
        <form method="post" action="formoutputpage.php">
            <input type="text" name="greeting" size="15" />
            <input type="text" name="name" size="15" />
            <input type="submit" name="submit" value="Salutation" />
        </form>
    </body>
</html> 
```

表单输出页面.php

```
<?php
     if(isset($_POST['submit'])){
        echo $_POST['greeting'] . " " . $_POST['name'] . "!";
     }else{
        //do whatever you want
     }
?> 
```

# javascript - 使用 jQuery 动态切换和更改 id

> ID：10308067
> 
> 赞同：1
> 
> 时间：2012-04-25T01:06:36.057
> 
> 标签：javascript, jquery, user-interface, jquery-selectors, twitter-bootstrap

我正在使用带有 jQ​​uery 的 twitter Bootstrap

我想知道如何在“订阅/取消订阅”之间切换

每次单击它都是一个 ajax 请求，因此用户可以订阅/取消订阅

用户订阅后，我会显示一条消息“已订阅！” 如果用户后悔并想取消订阅怎么办？

我想一键同时拥有这两种功能。我正在动态更改 ID，但它不起作用！

```
button class="btn" id="subscribe" data-toggle="button" data-loading-text="Loading..." data-complete-text="Subscribed!">订阅
```

```
$(document).ready(function () {
        $('#subscribe').button();
        $('#unsubscribe').button();
    });

    $('#unsubscribe').click(function () {   
        $('#unsubscribe').button('loading');

        $.ajax({
            url: "<%= "#{root_url}unsubscribe_from/#{@collection.id}"%>" ,
            type: "GET",
            data: "",
            success: function(data) {
                $('#unsubscribe').button('complete');
                jQuery("#unsubscribe").attr("id","subscribe");
                jQuery("#subscribe").attr("data-complete-text").text("Subscribed!");
                }});
                return false;

            });

$('#subscribe').click(function () {   
    $('#subscribe').button('loading');
    // $('#subscribe').button('reset');
    $.ajax({
        url: "<%= "#{root_url}subscribe_to/#{@collection.id}"%>" ,
        type: "GET",
        data: "",
        success: function(data) {
            $('#subscribe').button('complete');
            jQuery("#subscribe").attr("id","unsubscribe");
            jQuery("#unsubscribe").attr("data-complete-text").text("Unsubscribe!");
            }});
            return false;

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T01:23:27.463

```
$(document).on('click', '#subscribe, #unsubscribe', function(){
    var url; 
    var button_id; 
    var button_text; 
    var self = $(this);  
    self.button('loading');

   if( this.id === 'subscribe' )
    {
        url = "<%= "#{root_url}subscribe_to/#{@collection.id}"%>"; 
        button_id = 'unsubscribe';
        button_text = 'Subscribed!';  
    }
    else 
    {
        url = "<%= "#{root_url}unsubscribe_from/#{@collection.id}"%>"; 
        button_id = 'subscribe'; 
        button_text = 'Unsubscribed!'; 
    }

      $.ajax({
        url: url,
        type: "GET",
        data: "",
        success: function(data) {
               self.button('complete');
               self.attr("id", button_id);
               self.attr("data-complete-text", button_text).text(button_text);
            }});
            return false;

      });
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T01:19:33.213

目前发生的是您的点击处理程序仅在开始时附加。因此，稍后更改 id 将不会附加处理程序。为此，您使用动态处理程序。

所以你应该做以下

```
$(document).on("click", "#subscribe", function(){ 
  // ...
});  

$(document).on("click", "#unsubscribe", function(){ 
  // ...
}); 
```

有关更多详细信息，请参阅[JQuery On](http://api.jquery.com/on/)。早些时候你会使用[live](http://api.jquery.com/live/)

# ruby-on-rails - 使用预先填充父项的表单创建子记录，而不更改路线？

> ID：10308071
> 
> 赞同：0
> 
> 时间：2012-04-25T01:06:53.737
> 
> 标签：ruby-on-rails, activerecord

我有一个 Makes 模型：

```
class Make < ActiveRecord::Base
  attr_accessible :name
  has_many :models, dependent: :destroy
  has_many :trims, :through => :models
end 
```

和模型模型：

```
class Model < ActiveRecord::Base
  attr_accessible :name, :year, :make_id, :trim_id
  belongs_to :make
  has_many :trims
  validates :make_id, presence: true  
end 
```

现在暂时忽略我的批量分配漏洞，我该如何完成这样的事情：一旦通过 /makes/new 创建 Make 并返回到 make/1，就会出现一个包含使用该 Make 创建模型的链接的页面。

我知道我可以定义另一个控制器来执行此操作并预填充该`make_id`字段，但这是正确的方法吗？我创建模型的路线是`/models/new`. 有没有办法预先填写该表格，并让它表现得好像没有预先填写一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T01:48:49.423

一种可靠的方法是创建一条到 model/new/:make_id 的动态路由。

在您的 make#show 页面上的“使用该 Make 创建模型的链接”中，将其设置为使用您的新路线。

然后，在模型控制器的新操作中，将其分配给它自己的实例变量：

```
@make_id = params[:make_id] 
```

在 model#new 的视图中，您可以使用该变量填充表单的 make text_field（假设它是 text_field）：

```
<%= f.text_field :make, :value => @make_id %>
```

如果您想更详细一点，您可以在视图中使用@make_id 来隐藏文本字段并设置隐藏输入 if @make.present?。由于任何人都可以通过摆弄 URL 来弄乱该页面，因此我建议验证传入的 make_id 是否有效。

# r - 如何在 R 中创建这些类型的向量以及如何进行计算均值和协方差等操作？

> ID：10308072
> 
> 赞同：-1
> 
> 时间：2012-04-25T01:06:58.530
> 
> 标签：r, vector

我对 R 非常陌生，并试图找出是否可以制作这样的向量，抱歉不确定它们叫什么。

```
X1={(1,2),(2,3),(3,4)}
X2={(0,1),(1,2),(2,3)} 
```

例如，如果我要计算 X1 的平均值，它将是

```
(1/3)[(1,2)+(2,3)+(3,4)]=((1+2+3)/3, (2+3+4)/3)=(2,3) 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T01:15:48.760

那么你可以像这样创建一个 3x2 矩阵：

```
X1 <- matrix(c(1,2,2,3,3,4), ncol=2, byrow=TRUE)
colMeans(X1) # 2 3 
```

...但是您可以看到 (2+3+4)/3 不是 3.33 ;-)

请注意，R 中的矩阵按列优先顺序排列，因此如果您逐行指定它，则需要该`byrow=TRUE`选项。

...对于协方差：

```
X1 <- matrix(c(1,2,2,3,3,4), ncol=2, byrow=TRUE)
X2 <- matrix(c(0,1,1,2,2,3), ncol=2, byrow=TRUE)
cov(X1, X2) # covariance
cor(X1, X2) # correlation 
```

# jquery - 部分回发时清除水印文本框

> ID：10308074
> 
> 赞同：1
> 
> 时间：2012-04-25T01:07:25.670
> 
> 标签：jquery, asp.net, jquery-ui, updatepanel, watermark

当我的页面第一次加载时，我在文本框中看到水印，但是如果页面上有任何回发，水印被清除，有没有办法在文本框中保留该水印？

```
<head runat="server">
    <title></title>
    <script src="scripts/jquery-1.4.2.min.js" type="text/javascript"></script>
    <script src="scripts/jquery.watermark.min.js" type="text/javascript"></script>
    <script type="text/javascript">
         $(function () {
            $("#txtEmail").watermark("Email Address");
         });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:TextBox ID="txtEmail" runat="server"></asp:TextBox>
        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="txtEmail" ErrorMessage="Email Invalid"></asp:RequiredFieldValidator>

    </div>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T01:20:04.100

```
 //for jquery ready
 $(function () {
      $("#<%= txtEmail.ClientID %>").watermark("Email Address");
 });

 //for partial postbacks 
 function pageLoad()
 {
      $("#<%= txtEmail.ClientID %>").watermark("Email Address");
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T01:38:04.823

1.  转到 Firebug 中的脚本部分。
2.  在下拉列表中选择您的 HTML 文件。
3.  在 $("txtEmail").watermark 行上添加断点。
4.  使用控制台调试（检查选择器是否成功等）

# coldfusion - Coldfusion CFIF 声明

> ID：10308075
> 
> 赞同：-4
> 
> 时间：2012-04-25T01:07:47.530
> 
> 标签：coldfusion

我正在尝试根据现有数据库实体检查 2 个表单元素的内容，然后如果它们中的任何一个是不同的，则运行一个条件选项，但我遇到了一些问题，因为以下似乎不起作用。难道我做错了什么？

```
<cfquery name="qLiveService" datasource="#application.datasource#">
 SELECT broadcastPackage, AdditonalDVDs 
 FROM dbo.tributes
 WHERE profileID = 122>
</cfquery>   

<cfif qLiveService.broadcastPackage is form.broadcastPackage and qLiveService.AdditonalDVDs is form.AdditonalDVDs >

<!--- do something -->

<cfelse>

<!--- of one was different now run the code in this area -->

</cfif> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:54:59.450

> ```
>  WHERE profileID = 122> 
> ```

去掉`>`122 之后的多余部分

如果您在变量周围使用引号 "，则需要添加井号 # 以确保对值进行评估。例如：

```
<cfset a = "bob">
<cfset b = "bob">
<cfset x = 5>
<cfset y = 5>
<cfif ( a is "#b#" ) and ( x is "#y#" )>
    Equal
<cfelse>
    Not Equal
</cfif> 
```

如果不使用引号，则不需要井号：

```
<cfif ( a is b ) and ( x is y )>
    Equal
<cfelse>
    Not Equal
</cfif> 
```

您也可以尝试`<cfset`使用变量 - 就像上面一样。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-20T05:09:12.420

更正查询“WHERE profileID = 122”中的 where 条件和 if 条件

```
<cfoutput>
<cfif #qLiveService.broadcastPackage# eq #val(form.broadcastPackage)# and   #qLiveService.AdditonalDVDs# is #val(form.AdditonalDVDs)# >
  Equal
    <cfelse>
Not Equal
</cfif>
</cfoutput> 
```

# excel - Mono 和 Excel 自动化

> ID：10308076
> 
> 赞同：0
> 
> 时间：2012-04-25T01:08:00.587
> 
> 标签：excel, mono

我有一个使用 Excel 自动化的 C# 程序。我尝试在 Windows 上单声道编译这个 VS 程序并得到以下异常。作为一个新手，我不确定如何解决这个问题。当我使用 VS 构建时，这个程序确实有效。

c:\RedLines011Test>mono bin\redlines.exe

//未处理的异常：System.IO.FileNotFoundException：无法加载文件或屁股 //embly 'Microsoft.Office.Interop.Excel, Version=14.0.0.0, Culture=neutral, Public //KeyToken=71e9bce111e9429c' 或其之一依赖关系。//文件名：'Microsoft.Office.Interop.Excel, Version=14.0.0.0, Culture=neutral, P //ublicKeyToken=71e9bce111e9429c' //[ERROR] FATAL UNHANDLED EXCEPTION: System.IO.FileNotFoundException: Could not lo / /ad 文件或程序集 'Microsoft.Office.Interop.Excel, Version=14.0.0.0, Culture=n //eutra, PublicKeyToken=71e9bce111e9429c' 或其依赖项之一。//文件名：'Microsoft.Office.Interop.Excel, Version=14.0.0.0, Culture=neutral, P //ublicKeyToken=71e9bce111e9429c'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:20:13.450

该错误消息意味着您的 Office 互操作程序集不可用。它们很可能安装在 Mono 不使用的 .NET GAC 中（它有自己的 GAC）。您可以使用 Mono 的 gacutil 来安装它们，或者简单地将它们复制到 .exe 所在的文件夹中。话虽如此，Mono 中的 COM 互操作不是很先进，它可能会在第一个障碍中失败，你绝对不能指望它在非 Windows 机器上工作。

# extjs - extjs 对象和文档对象的区别

> ID：10308078
> 
> 赞同：1
> 
> 时间：2012-04-25T01:08:07.320
> 
> 标签：extjs

标准文档对象和 extjs 对象之间有什么区别（如果有的话）？我的意思是：两者之间有区别吗？

```
<input type = "button"> 
```

和 `new Ext.Button()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T01:13:25.907

是的，有区别。HTML`<input>`元素在文档的 DOM 树中创建一个节点，可以在 JavaScript 中使用 DOM 方法访问该节点。构造`Ext.Button()`函数创建一个普通的 JavaScript 对象，*而不是*DOM 对象，但是当 ExtJS 要求它自己渲染时，它知道如何*创建DOM 对象。*

基本上，ExtJS 组件是（可能是多个）DOM 对象的包装器，与直接使用 DOM 树相比，它具有更高级别的 API。

# python - 是否有必要关闭 urllib2 中的连接？

> ID：10308079
> 
> 赞同：3
> 
> 时间：2012-04-25T01:08:09.417
> 
> 标签：python, urllib2

> **可能重复：**
> [我应该在 urllib.urlopen() 之后调用 close() 吗？](https://stackoverflow.com/questions/1522636/should-i-call-close-after-urllib-urlopen)
> [由 urllib2.urlopen() 创建的对象是否代表一个恒定的连接？](https://stackoverflow.com/questions/10308375/do-objects-created-by-urllib2-urlopen-represent-a-constant-connection)

我在 Python 文档中没有看到任何代码示例表明有必要关闭与远程服务器的连接。

```
import urllib2
handle = urllib2.urlopen('http://download.thinkbroadband.com/5MB.zip')
# ... do whatever 
```

在上面的代码中，完成后不调用感觉*不对*。这里发生了什么事？是否需要手动关闭连接，还是为我关闭？`close()``handle`

# java - 内部类的实例化

> ID：10308080
> 
> 赞同：0
> 
> 时间：2012-04-25T01:08:10.160
> 
> 标签：java, class, object, inline, instantiation

在下面的代码中，我怎样才能到达内部类“轮子”？

```
public class InstantiateClass {
public static void main(String[] args) {
    Car c = new Car();
    //not sure how to get an instance of 'Wheel' here 
}

}

class Car{
public static class Wheel{

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T01:10:09.213

```
Car.Wheel w = new Car.Wheel(); 
```

应该做的伎俩。

# android - Listview 使用 LazyAdapter 和 Thread 使用 ProgressDialog

> ID：10308081
> 
> 赞同：0
> 
> 时间：2012-04-25T01:08:15.017
> 
> 标签：android, multithreading

我正在尝试在加载作为源 xml 的列表视图之前实现一个显示进度对话框的线程，但是在线程中这样做是一个错误警告，该函数 Lazy Adapter 也需要有一个线程，想要一些建议这个问题，谢谢。

主要的：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.main);

    handler = new Handler();
    new Thread(){            
         public void run() {
             runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    progressDialog = ProgressDialog.show(MainActivity.this, "", "Loading...");                      
                }
            });             
             ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

                XMLParser parser = new XMLParser();
                String xml = parser.getXmlFromUrl(URL); // getting XML from URL
                Document doc = parser.getDomElement(xml); // getting DOM element

                NodeList nl = doc.getElementsByTagName(KEY_SONG);

                for (int i = 0; i < nl.getLength(); i++) {
                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();
                    Element e = (Element) nl.item(i);
                    // adding each child node to HashMap key => value
                    map.put(KEY_ID, parser.getValue(e, KEY_ID));
                    map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
                    map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
                    map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
                    map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

                    // adding HashList to ArrayList
                    songsList.add(map);
                }

                lista=(ListView)findViewById(R.id.list);

                adapter=new LazyAdapter(this, songsList); // ERROR APPEARS HERE 
                lista.setAdapter(adapter);

            progressDialog.cancel();
        }
     }.start();
} 
```

LazyAdapter.java

```
public class LazyAdapter extends BaseAdapter {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:13:40.457

UI界面只在主线程中

```
progressDialog = ProgressDialog.show(MainActivity.this, "", "Loading...");  in child thread 
```

所以有这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T04:24:33.503

我已尝试修复您的代码，您可以试试这个：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.main);

handler = new Handler();
progressDialog = ProgressDialog.show(MainActivity.this, "", "Loading...");
new Thread(){            
     public void run() {

         ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL); // getting XML from URL
            Document doc = parser.getDomElement(xml); // getting DOM element

            NodeList nl = doc.getElementsByTagName(KEY_SONG);

            for (int i = 0; i < nl.getLength(); i++) {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value
                map.put(KEY_ID, parser.getValue(e, KEY_ID));
                map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
                map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
                map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
                map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

                // adding HashList to ArrayList
                songsList.add(map);
            }

            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    lista=(ListView)findViewById(R.id.list);

                    adapter=new LazyAdapter(this, songsList); // ERROR APPEARS HERE 
                    lista.setAdapter(adapter);

                    progressDialog.cancel();
                }
            });             

        }
     }.start();
} 
```

# silverlight - 如何在 silverlight 4 中使用 pdfLibNet.dll？

> ID：10308095
> 
> 赞同：0
> 
> 时间：2012-04-25T01:10:38.770
> 
> 标签：silverlight

我可以在 C# 中使用 pdfLibnet.dll

但是，它不在 Silverlight 4 中使用。

如何在 silverlight 4 中使用 pdfLibnet.dll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:11:06.867

C# != 银光

它们使用不同的运行时，因此您只能使用与 Silverlight 兼容的 dll 作为 Silverlight 中的引用。

# ios - 仅当分析、归档和构建工作正常时才出现无效权利

> ID：10308096
> 
> 赞同：0
> 
> 时间：2012-04-25T01:10:52.523
> 
> 标签：ios, xcode, profiling

我在连接到设备时无法分析我的应用程序并收到可怕的“无效权利”错误。使用当前的配置文件构建和归档工作正常。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:16:48.503

无效权利基本上意味着您的配置文件中指定的权利与您的应用程序 entitlements.plist 中指定的权利不等效。

几个选项：

-将您的 plist 和配置文件作为文本文件打开并比较权利部分以查看它们是否匹配并更改您的 plist 以匹配您的个人资料或...

- 在不需要 entitlements.plist 文件的地方使用 Xcode 4.2，然后将其删除。我认为这可能是从 Xcode 4 开始的。

# php - php mysql比较数据

> ID：10308098
> 
> 赞同：-1
> 
> 时间：2012-04-25T01:11:45.657
> 
> 标签：php, mysql

好的，我有这个代码：

```
<?//admin
$host = 'localhost'; // Host name Normally 'LocalHost'
$user = 'root'; // MySQL login username
$pass = ''; // MySQL login password
$database = 'juliver'; // Database name
$table = 'admin'; // Members name

mysql_connect($host, $user, $pass);
mysql_select_db($database);
if (isset($_POST['acc']) && ($_POST['pass']))
{
$username = mysql_real_escape_string($_POST['acc']);
$password = hash('sha512', $_POST['pass']);

$result = mysql_query("SELECT * FROM admin WHERE username = '$username' AND password =     '$password'");

if(mysql_num_rows($result))
{
  // Login
echo "has been login";
}
else
{
  // Invalid username/password
  echo 'Error: Invalid username or password';
}

exit;

}
else
{
echo "not been set";
}
?> 
```

我收到了这个错误：“警告：mysql_num_rows() 期望参数 1 是资源，第 17 行的 C:\xampp\htdocs\mu2\admin.php 中给出的布尔值已登录”，这里有人可以帮助我吗请弄清楚那个错误到底是什么？..提前谢谢

无论如何，我对任何建议都持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T01:15:45.887

您对 mysql_query 的调用很简单，您可以`echo mysql_error()`在它之后查看错误是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T01:18:17.270

您的 MySQL 查询有问题，您可能正在访问不存在的内容或拼写错误的内容。回应 mysql_error() 会告诉你你的问题。我还建议消除查询中的额外空格（看起来有点奇怪）。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T01:38:29.420

这将帮助您找到错误

```
error_reporting(E_ALL);
ini_set('display_errors','On');
$host = 'localhost'; // Host name Normally 'LocalHost'
$user = 'root'; // MySQL login username
$pass = ''; // MySQL login password
$database = 'juliver'; // Database name
$table = 'admin'; // Members name

$link = mysql_connect ( $host, $user, $pass );

if (! $link) {
    die ( 'Could not connect: ' . mysql_error ());
}

$selected = mysql_select_db ( $database );

if (! $selected) {
    die ( 'Can\'t use foo : ' . mysql_error ());
}

if (isset ( $_POST ['acc'] ) && ($_POST ['pass'])) {
    $username = mysql_real_escape_string ( $_POST ['acc'] );
    $password = hash ( 'sha512', $_POST ['pass'] );

    $result = mysql_query ( "SELECT * FROM admin WHERE username = '$username' AND password =  '$password'" );

    if (!$result) {
        die('Invalid query: ' . mysql_error());
    }

    $num_rows = mysql_num_rows($result);

    if ($num_rows > 0) {
        // Login
        echo "has been login";
    } else {
        // Invalid username/password
        echo 'Error: Invalid username or password';
    }

    exit ();

} else {
    echo "not been set";
} 
```

# silverlight - ItemsSource 数据更改调用 DataTemplate 的重新创建

> ID：10308103
> 
> 赞同：0
> 
> 时间：2012-04-25T01:12:12.207
> 
> 标签：silverlight, xaml

我有一个 DataForm，我在其中为 ItemTemplate 指定了一个 DataTemplate。ItemsSource 绑定到 ViewModel 的 List 属性。每当List 属性发生变化时，DataForm 的ItemsSource 都会通过通知属性变化机制进行更新。

到现在为止还挺好。问题：每当列表属性数据更改时，模板也会重新创建。我知道这一点是因为我在模板中有一个自定义控件，所以我看到构造函数被触发了两次。第一次是在 InitializeComponent 调用期间，第二次是在 List 填充来自服务的数据时。

这是正常行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T22:23:15.990

最后的结论是，每当为 ItemsSource 分配一个新列表时，都会重新创建模板

# r - 使用 plyr 和 Barnard 的测试

> ID：10308105
> 
> 赞同：1
> 
> 时间：2012-04-25T01:12:29.120
> 
> 标签：r, plyr

我正在做一些社会科学研究，偶然发现了一篇讨论不同精确测试的文章，包括伯纳德的测试。几位作者讨论了 Fisher 精确检验和 Bernard 检验之间的差异（Lydersen 在 2009 年，Mehta 和 Senchaudhuri 在 2003 年），但我只是好奇我是否能自己看到差异（并在此过程中更多地了解 R ）。我找到了一种让费舍尔检验起作用的方法，但巴纳德检验却让我望而却步：

```
 library(plyr)
 library(Barnard)

 rook <- expand.grid(a=0:5,b=0:5,c=0:5,d=0:5)

 sums <- ddply(rook, .(a,b,c,d), sum)

 system.time(
 Fisher.l <- ddply(rook, .(a,b,c,d),function(z)
      fisher.test(matrix(unlist(z[,c(1,2,3,4)]),
      ncol=2),alternative="less")$p.value)
 ) 
```

但是，这些都不起作用……它们是尝试做同一件事的两种方式……

```
 system.time(
      Barnard <- ddply(rook, .(a,b,c,d), function(z)
      barnardw.test(unlist(z[,c(1,2,3,4)]), ncol=2))$p.value[[1]])
 )

 system.time(
      Barnard <- ddply(rook, .(a,b,c,d), function(z)
      barnardw.test(z[,1],z[,2],z[,3],z[,4]))$p.value[[1]])
 ) 
```

# ios - 更新核心动画中的飞行中动画

> ID：10308107
> 
> 赞同：2
> 
> 时间：2012-04-25T01:12:35.937
> 
> 标签：ios, core-animation

当我使用 uiscrollview 向下滚动一个大型图像库时，我一直在使用动画块使图像淡入。

图像是带有子类 calayer 的 uiview，图像是在单独的线程上绘制的，以最大限度地减少滚动粘滞。这很好，但这意味着当你向下滚动时，加载这么多图像现在没有问题，但是图像在它们准备好时就会弹出，没有任何技巧。因此，就在滚动时图像进入视野之前，我正在使用动画块对图像进行动画处理以“弹出”。显然，这会导致卡住，因为我不断地在每个图像/视图上提交动画。

我一直在考虑使用较低级别的 ca-transactions 或 ca 分组，但是有没有人直接知道是否有一种高级方法可以在滚动时将这些动画块（或块的低级替代品）添加/馈送到动画树中，而渲染正在通过（飞行中），没有任何阻塞？

每个图像都有自己的 calayer，将这些图层分组会导致动画延迟吗？

感谢我的简短理解，在苹果和论坛上对核心动画的所有高级解释中，没有人直接谈到这个问题或解决这个问题的方法（大多数讨论是关于对现有动画对象的表示树的隐式更改，而不是比一种实时动态地将动画对象添加到同一渲染树的方式）

或者我可能在性能上遗漏了一些简单的东西，有没有人在滚动时遇到类似的动画视图问题？

# javascript - 如何循环遍历多个字段集？

> ID：10308108
> 
> 赞同：0
> 
> 时间：2012-04-25T01:12:48.927
> 
> 标签：javascript, jquery, html, forms, fieldset

我有这个函数可以附加到我的表单（这是一个模式窗口）：

```
function appendAddressForm(name, line1, line2, phone, fax) {
    $("#addressForm form").append(
        "<div style='clear:both;text-align:left;padding:10;'>" +        
        "<fieldset style='width:70%;padding:5;float:left'>" +
        "<ul class='ui-helper-clearfix'>" +
            "<li class='ui-state-default ui-corner-all' title='Delete Address' id><span class='ui-icon ui-icon-minus'></span></li>" +               
        "</ul>" +           
        "<label for='addressName'  style='width:100px'>Office Name</label>" +
        "<input type='text' size='20' name='addressName' id='addressName' value='" +  name + "' /> <br>" +
        "<label for='addressOne'  style='width:100px'>Address Line 1</label>" +
        "<input type='text' size='40' name='addressOne' id='addressOne' value='" +  line1 + "' /> <br>" +
        "<label for='addressTwo'  style='width:100px'>Address Line 2</label>" +
        "<input type='text' size='40' name='addressTwo' id='addressTwo' value='" +  line2 + "'/> <br>" +
        "<label for='addressPhone'  style='width:100px'>Phone</label>" +
        "<input type='text' size='20' name='addressPhone' id='addressPhone' value='(P)" +  phone + "' /> <br>" +
        "<label for='addressFax'  style='width:100px'>Fax</label>" +
        "<input type='text' size='20' name='addressFax' id='addressFax' value='(F)" +  fax + "' />" +   
    "</fieldset>" +             
"</div>");
} 
```

这就是我访问第一个字段集的方式

```
var addressName = $.trim($("#addressName").val());
var addressOne = $.trim($("#addressOne").val());
var addressTwo = $.trim($("#addressTwo").val());
var addressPhone = $.trim($("#addressPhone").val());
var addressFax = $.trim($("#addressFax").val()); 
```

if(addressName != "" && addressOne != "" && addressPhone != "(P)" && addressFax != "(F)")

{

我有 jQuery 和一个按钮。单击此按钮后，我必须附加一个包含此字段集的部分。我最多可以在表单中添加 6 个字段集。我的问题是，我只能获得第一个字段集的值。我也想验证所有其他字段集。如何从其他字段集中获取值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T01:18:22.603

问题是您的所有输入都具有相同的名称属性和 id，`appendAddressForm(name, line1, line2, phone, fax, number)`在这种情况下，我添加了另一个变量`number`。将此变量添加到您的 id 和 name 属性，即：

```
<input type='text' size='20' name='addressName-"+number+"' id='addressName-"+number+"' value='" +  name + "' /> 
```

# node.js - 在 Node.js 跨平台中下载和解压缩文件的最简单方法？

> ID：10308110
> 
> 赞同：90
> 
> 时间：2012-04-25T01:13:06.480
> 
> 标签：node.js, zip

只是寻找一个简单的解决方案来在任何操作系统上下载和解压缩 Node.js 中的文件`.zip`。`.tar.gz`

不确定这是内置的还是我必须使用单独的库。有任何想法吗？只寻找几行代码，所以当下一个 zip 文件出现时，我想在节点中下载，这很容易。感觉这应该很容易和/或内置，但我找不到任何东西。谢谢！

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2017-10-27T04:20:26.727

现在是 2017 年（确切地说是 10 月 26 日）。

对于 unzip 等古老而普遍的技术，我希望存在一个相当流行、成熟的 node.js 解压缩库，它是“停滞的”和“未维护的”，因为它是“完整的”。

然而，大多数库似乎要么完全糟糕，要么就在几个月前最近提交。这很令人担忧……所以我浏览了几个解压缩库，阅读了他们的文档，并尝试了他们的示例以试图找出 WTF。例如，我试过这些：

*   乔什沃尔夫/[`yauzl`](https://github.com/thejoshwolfe/yauzl)
*   安特尔/[`node-stream-zip`](https://github.com/antelle/node-stream-zip)
*   佐森森/[`node-unzipper`](https://github.com/ZJONSSON/node-unzipper)
*   埃文奥克斯菲尔德/[`node-unzip`](https://github.com/EvanOxfeld/node-unzip)
*   斯图克/[`jszip`](https://github.com/Stuk/jszip)
*   克里斯科瓦尔/[`zip`](https://github.com/kriskowal/zip)

2020 年更新：尚未尝试，但也有[存档器](https://www.archiverjs.com/)

## 热门推荐：`yauzl`

非常适合完全下载的文件。不太适合流式传输。

有据可查。效果很好。说得通。

## 第二选：`node-stream-zip`

antelle的[`node-stream-zip`](https://github.com/antelle/node-stream-zip)似乎是最好的

安装：

```
npm install --save node-stream-zip 
```

用法：

```
'use strict';

var fs = require('fs');
var StreamZip = require('node-stream-zip');

var zip = new StreamZip({
  file: './example.zip'
, storeEntries: true
});

zip.on('error', function (err) { console.error('[ERROR]', err); });

zip.on('ready', function () {
  console.log('All entries read: ' + zip.entriesCount);
  //console.log(zip.entries());
});

zip.on('entry', function (entry) {
  var pathname = path.resolve('./temp', entry.name);
  if (/\.\./.test(path.relative('./temp', pathname))) {
      console.warn("[zip warn]: ignoring maliciously crafted paths in zip file:", entry.name);
      return;
  }

  if ('/' === entry.name[entry.name.length - 1]) {
    console.log('[DIR]', entry.name);
    return;
  }

  console.log('[FILE]', entry.name);
  zip.stream(entry.name, function (err, stream) {
    if (err) { console.error('Error:', err.toString()); return; }

    stream.on('error', function (err) { console.log('[ERROR]', err); return; });

    // example: print contents to screen
    //stream.pipe(process.stdout);

    // example: save contents to file
    fs.mkdir(
      path.dirname(pathname),
      { recursive: true },
      function (err) {
        stream.pipe(fs.createWriteStream(pathname));
      }
    );
  });
}); 
```

**安全警告**：

不确定这是否会检查`entry.name`会错误解析的恶意制作的路径（例如`../../../foo`或`/etc/passwd`）。

您可以通过比较轻松地自行检查`/\.\./.test(path.relative('./to/dir', path.resolve('./to/dir', entry.name)))`。

**优点**：（为什么我认为它是最好的？）

*   可以解压缩普通文件（也许不是一些带有奇怪扩展名的疯狂文件）
*   可以流式传输
*   似乎不必加载整个 zip 来读取条目
*   有普通 JavaScript 中的示例（未编译）
*   不包括厨房水槽（即 url 加载、S3 或 db 层）
*   使用流行库中的一些现有代码
*   代码中没有太多无意义的时髦或忍者富

**缺点**：

*   像饥饿的河马一样吞下错误
*   抛出字符串而不是错误（无堆栈跟踪）
*   `zip.extract()`似乎不起作用（因此我`zip.stream()`在示例中使用了）

## 亚军：node-unzipper

安装：

```
npm install --save unzipper 
```

用法：

```
'use strict';

var fs = require('fs');
var unzipper = require('unzipper');

fs.createReadStream('./example.zip')
  .pipe(unzipper.Parse())
  .on('entry', function (entry) {
    var fileName = entry.path;
    var type = entry.type; // 'Directory' or 'File'

    console.log();
    if (/\/$/.test(fileName)) {
      console.log('[DIR]', fileName, type);
      return;
    }

    console.log('[FILE]', fileName, type);

    // TODO: probably also needs the security check

    entry.pipe(process.stdout/*fs.createWriteStream('output/path')*/);
    // NOTE: To ignore use entry.autodrain() instead of entry.pipe()
  }); 
```

**优点**：

*   似乎以与 类似的方式工作`node-stream-zip`，但控制较少
*   一个更实用的分支`unzip`
*   似乎是串行运行而不是并行运行

**缺点**：

*   厨房水槽多？仅包含大量与解压缩无关的内容
*   读取整个文件（按块，这很好），而不仅仅是随机搜索

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-04-25T01:26:40.740

结帐[adm-zip](https://github.com/cthackers/adm-zip)。

ADM-ZIP 是一个纯 JavaScript 实现，用于 NodeJS 的 zip 数据压缩。

> 该库允许您：
> 
> *   将 zip 文件直接解压缩到磁盘或内存缓冲区
> *   `.zip`压缩文件并将它们以格式或压缩缓冲区存储到磁盘
> *   从现有文件中更新/添加新/删除文件的内容`.zip`

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2012-04-25T10:58:09.500

Node 通过[zlib 模块](http://nodejs.org/api/zlib.html)内置了对 gzip 和 deflate 的支持：

```
var zlib = require('zlib');

zlib.gunzip(gzipBuffer, function(err, result) {
    if(err) return console.error(err);

    console.log(result);
}); 
```

**编辑：**您甚至可以`pipe`直接通过例如数据`Gunzip`（使用[request](https://github.com/mikeal/request)）：

```
var request = require('request'),
    zlib = require('zlib'),
    fs = require('fs'),
    out = fs.createWriteStream('out');

// Fetch http://example.com/foo.gz, gunzip it and store the results in 'out'
request('http://example.com/foo.gz').pipe(zlib.createGunzip()).pipe(out); 
```

对于 tar 档案，有 Isaacs 的[tar 模块](https://github.com/isaacs/node-tar)，由 npm 使用。

**编辑 2：**更新的答案`zlib`不支持该`zip`格式。这仅适用于`gzip`.

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2016-07-04T06:00:49.337

我尝试了一些 nodejs 解压缩库，包括 adm-zip 和 unzip，然后选择了 extract-zip，它是 yauzl 的包装器。似乎是最简单的实现。

[https://www.npmjs.com/package/extract-zip](https://www.npmjs.com/package/extract-zip)

```
var extract = require('extract-zip')
extract(zipfile, { dir: outputPath }, function (err) {
   // handle err
}) 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-03-02T18:27:23.360

[yauzl](https://github.com/thejoshwolfe/yauzl)是一个强大的解压库。设计原则：

*   遵循规范。不要扫描本地文件头。读取文件元数据的中央目录。
*   不要阻塞 JavaScript 线程。使用和提供异步 API。
*   控制内存使用。不要尝试一次在 RAM 中缓冲整个文件。
*   永远不要崩溃（如果使用得当）。不要让格式错误的 zip 文件导致试图捕获错误的客户端应用程序崩溃。
*   捕获不安全的文件名条目。如果 zip 文件条目的文件名以“/”或 /[A-Za-z]:// 开头，或者它包含“..”路径段或“\”（根据规范），则 zip 文件条目会引发错误。

目前有 97% 的测试覆盖率。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-03-08T08:14:16.690

我发现以下成功，适用于.zip
（此处为发布简化：没有错误检查&只是将所有文件解压缩到当前文件夹）

```
function DownloadAndUnzip(URL){
    var unzip = require('unzip');
    var http = require('http');
    var request = http.get(URL, function(response) {
        response.pipe(unzip.Extract({path:'./'}))
    });
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-03-01T20:58:16.690

我期待了很长时间，并没有找到简单的工作示例，但是基于这些答案，我创建了该`downloadAndUnzip()`函数。

用法很简单：

```
downloadAndUnzip('http://your-domain.com/archive.zip', 'yourfile.xml')
    .then(function (data) {
        console.log(data); // unzipped content of yourfile.xml in root of archive.zip
    })
    .catch(function (err) {
        console.error(err);
    }); 
```

这是声明：

```
var AdmZip = require('adm-zip');
var request = require('request');

var downloadAndUnzip = function (url, fileName) {

    /**
     * Download a file
     * 
     * @param url
     */
    var download = function (url) {
        return new Promise(function (resolve, reject) {
            request({
                url: url,
                method: 'GET',
                encoding: null
            }, function (err, response, body) {
                if (err) {
                    return reject(err);
                }
                resolve(body);
            });
        });
    };

    /**
     * Unzip a Buffer
     * 
     * @param buffer
     * @returns {Promise}
     */
    var unzip = function (buffer) {
        return new Promise(function (resolve, reject) {

            var resolved = false;

            var zip = new AdmZip(buffer);
            var zipEntries = zip.getEntries(); // an array of ZipEntry records

            zipEntries.forEach(function (zipEntry) {
                if (zipEntry.entryName == fileName) {
                    resolved = true;
                    resolve(zipEntry.getData().toString('utf8'));
                }
            });

            if (!resolved) {
                reject(new Error('No file found in archive: ' + fileName));
            }
        });
    };

    return download(url)
        .then(unzip);
}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-06T04:10:33.610

下载并解压`.tar.gz`：

```
const https = require("https");
const tar = require("tar");

https.get("https://url.to/your.tar.gz", function(response) {
  response.pipe(
    tar.x({
      strip: 1,
      C: "some-dir"
    })
  );
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-18T05:57:52.087

结帐[gunzip 文件](https://www.npmjs.com/package/gunzip-file)

```
import gunzip from 'gunzip-file';

const unzipAll = async () => {
  try {
    const compFiles = fs.readdirSync('tmp')
    await Promise.all(compFiles.map( async file => {
      if(file.endsWith(".gz")){
        gunzip(`tmp/${file}`, `tmp/${file.slice(0, -3)}`)
      }
    }));
  }
  catch(err) {
    console.log(err)
  }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-14T22:47:56.453

如果您不需要将多个文件放入存档，而是压缩一个文件或仅压缩一个字符串内容，则可以使用`zlib.deflateRaw`/ 。`zlib.inflateRaw`

这是一个如何在 macOS/iOS 上压缩内存中的字符串并在 NodeJS 中解压缩的示例。

```
// Swift, macOS/iOS
let data = "HelloZip!".data(using: .utf8)!
let compressedData = (data as NSData).compressed(using: .zlib) as Data
let compressedDataAsBase64EncodedString = compressedData.base64EncodedString()
print(compressedDataAsBase64EncodedString)
// Prints: 80jNycmPyixQBAA= 
```

```
// JS, AWS Lambda.
import zlib from "zlib";

const compressedDataAsBase64EncodedString = "80jNycmPyixQBAA="
const compressedData = Buffer.from(compressedDataAsBase64EncodedString, "base64")
const data = zlib.inflateRawSync(compressedData)
console.log(data.toString())
// Prints: HelloZip! 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-12-20T15:29:12.257

另一个工作示例：

```
var zlib = require('zlib');
var tar = require('tar');
var ftp = require('ftp');

var files = [];

var conn = new ftp();
conn.on('connect', function(e) 
{
    conn.auth(function(e) 
    {
        if (e)
        {
            throw e;
        }
        conn.get('/tz/tzdata-latest.tar.gz', function(e, stream) 
        {
            stream.on('success', function() 
            {
                conn.end();

                console.log("Processing files ...");

                for (var name in files)
                {
                    var file = files[name];

                    console.log("filename: " + name);
                    console.log(file);
                }
                console.log("OK")
            });
            stream.on('error', function(e) 
            {
                console.log('ERROR during get(): ' + e);
                conn.end();
            });

            console.log("Reading ...");

            stream
            .pipe(zlib.createGunzip())
            .pipe(tar.Parse())
            .on("entry", function (e) 
            {    
                var filename = e.props["path"];
                console.log("filename:" + filename);
                if( files[filename] == null )
                {
                    files[filename] = "";
                }
                e.on("data", function (c) 
                {
                    files[filename] += c.toString();
                })    
            });
        });
    });
})
.connect(21, "ftp.iana.org"); 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2018-03-14T05:54:20.017

您也可以使用“解压缩”来简单地提取现有的 zip 文件。它适用于任何大小的文件，您需要将其添加为[npm](https://www.npmjs.com/package/unzip)的依赖项。

```
fs.createReadStream(filePath).pipe(unzip.Extract({path:moveIntoFolder})).on('close', function(){
        //To do after unzip
				callback();
		});
```

# android - Android Dialog标题颜色和标题按钮？

> ID：10308111
> 
> 赞同：0
> 
> 时间：2012-04-25T01:13:15.237
> 
> 标签：android, xml, dialog, styles

我有一个按钮，单击它会打开一个对话框，其中包含我的 SQLite 数据库中的信息。我已经弄清楚如何更改背景颜色和文本颜色，但我无法设置标题文本颜色。另外我想知道是否有可能将按钮放在对话框标题的一个角落？我想将关闭按钮放在那里。

这是我的 onClickHelp 按钮中设置对话框的代码

```
public void onClickHelp(View v) {
    final Dialog duDialog = new Dialog(this);
    duDialog.setContentView(R.layout.data_usage);
    duDialog.getWindow().setBackgroundDrawableResource(R.color.title_text);

    duDialog.setTitle("Data Usage"); // I would like to set the color and add button here
    ListView data = (ListView) duDialog.findViewById(R.id.DataUsage);
    duCursor = Data.getAll(db);
    startManagingCursor(duCursor);
    duAdapter = new DataAdapter(duCursor);
    data.setAdapter(duAdapter);
    duDialog.show();

} 
```

![在此处输入图像描述](../Images/d3c45188d41e2fed1f257bde0e754c91.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T01:43:57.117

您必须使用您的相关设计来​​设计您自己的自定义警报 dailog。

参考这个链接

[LINK](http://developer.android.com/guide/topics/ui/dialogs.html)对话框文档

用于自定义警报对话框的[LINK示例](http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application)

# java - Java 语法 - |= 是什么意思

> ID：10308112
> 
> 赞同：3
> 
> 时间：2012-04-25T01:13:17.247
> 
> 标签：java, syntax

> **可能重复：**
> [Java 运算符：`|= bitwise OR and assign`示例](https://stackoverflow.com/questions/10142059/java-operators-bitwise-or-and-assign-example)

|= 在 Java 中是什么意思？

例如下面;

* * *

note.flags |= Notification.FLAG_AUTO_CANCEL

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T01:14:25.617

总是先到这里： http: [//docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)。

它是按位或赋值运算符。

它与以下内容相同：

```
note.flags = note.flags | Notification.FLAG_AUTO_CANCEL; 
```

# c++ - 最小数——算法

> ID：10308114
> 
> 赞同：0
> 
> 时间：2012-04-25T01:13:36.907
> 
> 标签：c++, algorithm

这听起来可能真的很无聊，而且我可能遗漏了一些非常愚蠢的东西。但是，我正在尝试计算矩阵之间的差异，而具有最小值（结果）的是匹配数。但是，对于某些人原因我的算法似乎缺少最小的数字，我不知道为什么..

这是代码：

```
int min_val = 0;
double comp = 0;
const int ROW_BOUNDS(mat1Rows-mat2Rows+1);
const int COL_BOUNDS(mat1Cols-mat2Cols+1);

for(int i=0; (i < ROW_BOUNDS); i++) {
    for(int j=0; (j < COL_BOUNDS); j++) {
        m3.clear();
        for (int row(0); row < mat2Rows; row++){
            for (int col(0); col < mat2Cols; col++){
                //cout << matrix1[i*mat1Cols+row*mat1Cols+col+j] << ' ';
                m3.push_back( matrix1[i*mat1Cols+row*mat1Cols+col+j] );
                currentRow = i;
                currentCol = j;
            }
        }
        comp = compMatrix1(matrix2, m3);
        //printMatrix(m3, 2, 2);
        //cout << endl << " = " << comp << endl; 

        if(comp < min_val)
        {
            minRow = currentRow;
            minCol = currentCol;
            m4 = m3;
            min_val = comp;
            cout << min_val;
        }
    }
}    
//printMatrix(m4, 2, 2); 
```

这是输出：

```
0 0 
0 0 
    = 2
0 1 
0 1 
    = 4
1 0 
1 0 
    = 0
0 0 
1 1 
    = 2
0 1 
1 1 
    = 3
1 0 
1 0 
    = 0
1 1 
0 1 
    = 3
1 1 
1 0 
    = 1
1 0 
0 0 
    = 1 
```

它打印：

```
 0 0 
  0 0 
```

当实际结果应该是：

```
1 0 
1 0 
```

有人可以提供任何帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T01:22:10.963

几个问题：

```
comp = compMatrix1(matrix2, m3); 
```

compMatrix1 是什么样的？什么是矩阵2？

您还可以解释以下代码的作用吗？

```
m3.push_back( matrix1[i*mat1Cols+row*mat1Cols+col+j] ); 
```

您可能只是不正确地比较矩阵或未正确填充 m3。还，

```
int min_val = 0; 
```

将最小值初始化为低于某些值。当最小值实际上是 2 时会发生什么？那么没有矩阵会有min_val。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T01:26:37.113

你`min_val`是零，这意味着你的条件`if(comp < min_val)`只捕获负最小值。

所以，要解决这个问题，改变你的

```
int min_val = 0; 
```

到

```
int min_val = INT_MAX; 
```

这确保`(comp < min_val)`了第一个计算矩阵的条件为真。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T01:24:30.327

min_val 应初始化为大于 MAXIMUM 可能值。

# php - 警告：mysql_fetch_assoc() 期望参数 1 是资源

> ID：10308123
> 
> 赞同：-1
> 
> 时间：2012-04-25T01:15:10.703
> 
> 标签：php

> **可能重复：**
> [PHP 错误：mysql_fetch_array() 期望参数 1 是资源，给定布尔值](https://stackoverflow.com/questions/2973202/php-error-mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given)

我正在尝试在我的本地主机中执行 php 代码，它正在运行。当我将相同的代码传输到我的主机时，得到 mysql_fetch_assoc() 期望参数 1 是资源。下面是我的代码我不知道我真的错过了什么

```
 $checkQuery = "select MGUserName from MovinGalaxyLogin where MGUserName='checksan'or MGEmailID='checksan'";
   echo $checkQuery;
   $sessionUserName = mysql_query($checkQuery);

    while ($row = mysql_fetch_assoc($sessionUserName)) {
    $sessionUserName= $row["MGUserName"];
    } 
```

请帮我解决这个问题。

提前致谢， Santhosh KUmar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T01:17:07.073

你需要看看你从 MySQL 得到了什么错误。用于[`mysql_error()`](http://us2.php.net/manual/en/function.mysql-error.php)找出。

```
$checkQuery = "select MGUserName from MovinGalaxyLogin where MGUserName='checksan'or MGEmailID='checksan'";
   echo $checkQuery;
   $sessionUserName = mysql_query($checkQuery);

if (mysql_error())
{
    echo mysql_error();
}
else
{
    while ($row = mysql_fetch_assoc($sessionUserName)) 
    {
        $sessionUserName= $row["MGUserName"];
    }
} 
```

# emacs - 在 Emacs Inferior Lisp 中读取用户输入

> ID：10308124
> 
> 赞同：4
> 
> 时间：2012-04-25T01:15:24.297
> 
> 标签：emacs, lisp, common-lisp, user-input

我正在尝试通过阅读[Practical Common Lisp](http://www.gigamonkeys.com/book/)来学习 Lisp ，但在尝试阅读用户输入时，我很早就遇到了一个小绊脚石。我已经定义了提示阅读来提示用户输入：

```
(defun prompt-read (prompt)
  (format *query-io* "~a: " prompt)
  (force-output *query-io*)
  (read-line *query-io*)) 
```

当我尝试评估提示阅读时，按 [Enter] 运行该语句似乎被接受为输入，因此结果输入为空白

```
>(prompt-read "Test")
Test: 
""
NIL 
```

我完全按照这个例子，所以我假设这与我的环境有某种关系。我在 Windows 中使用 Emacs Inferior Lisp，是否需要对我的代码进行一些调整才能获得我期望的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:24:25.747

您的代码似乎没有任何问题，并且它也可以在 MS Windows 上正确运行，例如 SBCL。您为什么不尝试使用 SLIME 在 Emacs 中编辑和运行您的 CL 代码，而不是劣质的 lisp 模式（这确实是劣质的）？您可以按照以下指南快速安装它：

*   [http://www.quicklisp.org/beta/](http://www.quicklisp.org/beta/)

*   [http://common-lisp.net/project/slime/](http://common-lisp.net/project/slime/)

# wireshark - 使用 libwireshark 以编程方式获取 Wireshark 功能

> ID：10308127
> 
> 赞同：11
> 
> 时间：2012-04-25T01:15:50.567
> 
> 标签：wireshark

如果我想编写一个使用 Wireshark 功能的脚本，我会使用 tshark。我听说还有一个 libwireshark 可以在用 C 编写程序时使用，但是，就我的一生而言，我找不到*任何*文档！我尝试在wireshark源代码树中隔离库代码，但似乎代码组织得不是很好，并且这种隔离不存在（或者我没有找到它）。

我有两个问题：

1.  我是否认为 libwireshark 确实可以用于以编程方式获取我可以从 wireshark/tshark 获得的任何功能？
2.  您能否指出有关该主题的任何文档/教程/示例？即使是几个简单的例子也能起到很大的作用。如果做不到这一点，你能指出我如何在wireshark源代码树中找到自己的方式吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T18:07:39.467

# **不。**

libwireshark 不打算在 Wireshark 本身之外使用，尝试这样做会让[您自己](http://ask.wireshark.org/questions/8606#8610)试图找出问题所在。**libwireshark 实际上是 Wireshark的**数据包分析部分（称为*epan* for Ethereal **packet** an **alyzer**），您可以[在开发人员指南中看到](http://www.wireshark.org/docs/wsdg_html_chunked/ChWorksOverview.html#ChWorksFigOverview "Wireshark Developer's Guide Chapter 6.2 Figure 6.1")****不只是 Wireshark。libwireshark 实际提供的是所有内置协议解析器的主接口、插件解析器的钩子以及完整的数据包解析 API。它依赖于 Wireshark 的其余部分设置的机制，这些机制不是直接的数据包解析工具，而是使解析器能够完成它们的工作（例如，分配释放内存块、处理压缩或加密数据等）。****

 ****而是写一个解剖器。
如果您的项目是以某种方式严格分析网络流量，您可能需要考虑为 Wireshark 编写解析器，而不是重新发明 Wireshark 可以为您提供的许多轮子。如果你需要做一些更复杂的事情，比如监控网络流量，然后启动其他任务或自己发送数据，你可能最好还是`tshark`像现在一样使用 shell 脚本（请记住，你不应该让`tshark`运行非常在任何情况下很长一段时间）。

如果您真的*非常*想直接使用 libwireshark，您将需要以某种方式解决它的所有依赖项（最好将其设为真正的独立库）并提供它对 Wireshark（或 tshark）实际运行所做的假设。libwireshark 的代码组织良好，只是它由 Wireshark 源代码树下的整个 epan 目录组成，并根据 Wireshark 仍然是 Ethereal 时建立的约定进行布局。每个函数的文档在公开可见时都在头文件中提供，并且在每种情况下都在源文件中更深入地提供。还要记住[README.developer](https://code.wireshark.org/review/gitweb?p=wireshark.git;a=blob_plain;f=doc/README.developer)与您拥有的源代码版本一起分发是获得一些提示的好地方（如果您想执行此任务，您不妨阅读所有 README.* 文件）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T20:05:48.573

是的！您可以使用 libwireshark 获得该功能。我已经编写了整个代码来做同样的事情。它很好用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-06T21:08:02.650

当然可以在 Wireshark 本身之外使用 libwireshark，因为我知道[netexpect](http://netexpect.org/wiki)就是这样做的。您可以尝试在该项目的网站上查找信息，或者您可以尝试联系 netexpect 的作者 Eloy Paris 以获得进一步的帮助/指示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T08:01:08.043

甚至我也为wireshark功能编写了脚本，作为我项目的一部分，以实现某些事情的自动化。

最好的做法是使用如下的wireshark插件：

1.  tshark 添加 pcap 文件，应用过滤器，但是如果您发现那里缺少任何功能，只需在 wireshark 源代码中编辑 tshark.c。
2.  capinfos 提供详细信息，例如数据包数量或文件大小等（wireshark 源代码中有一个名为 capinfos 的脚本，如果您想要更多功能，请编辑它）

请注意，附加组件仅在 Linux 中有效，而 capinfos 是用 shell 脚本编写的。因此，您可以使用相同的 shell 脚本并创建新脚本以获得更好的功能。

即使我最初也面临很多问题，因为没有适当的文档。但是一旦你开始，它就会顺利进行。****

# c# - 使用 Android 模拟器测试来自外部应用程序的 COM 的 AT 命令

> ID：10308130
> 
> 赞同：8
> 
> 时间：2012-04-25T01:16:30.030
> 
> 标签：c#, android-emulator, serial-port, 3g, at-command

我需要将 AT 命令发送到带有 C# 的 USB GSM 调制解调器。
问题是我还没有开发 GSM 调制解调器或支持 GSM 的设备，然后我正在寻找一个模拟器。
我发现的唯一模拟 GSM 调制解调器是 Android SDK 附带的。
我现在的问题是通过 COM 端口向 Android 模拟 GSM 调制解调器发送 AT 命令，就像我在实际应用程序中需要做的那样。
有什么方法可以到达Android模拟GSM调制解调器的COM（虚拟Usb-Com）端口并发送AT命令连接到互联网？

有人告诉[这里，](https://stackoverflow.com/questions/9417438/hayes-at-command-support-on-android)但它不能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:42:04.957

也许它可以帮助：

[Android 模拟器 - PC 串口](https://stackoverflow.com/questions/5246094/android-emulator-pc-serial-port)

[http://groups.google.com/group/android-platform/browse_thread/thread/bc4919b347ce5062](http://groups.google.com/group/android-platform/browse_thread/thread/bc4919b347ce5062)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:36:26.727

为什么不用微软模拟器？

请参阅[蜂窝模拟器](http://msdn.microsoft.com/en-us/library/bb630224.aspx)部分和[此处](http://msdn.microsoft.com/en-us/library/bb840031.aspx#AccessingConnectionManagerfrom%20Managed%20Code)。

# android - 获取从 Geocoder 获得的经度和纬度值的位置更新

> ID：10308131
> 
> 赞同：0
> 
> 时间：2012-04-25T01:16:37.123
> 
> 标签：android

我制作了一个应用程序，它从数据库中获取区域和城市等详细信息，并使用地理编码器获取这些详细信息，我得到了经度和纬度值。现在我想在特定时间后向位置提供者提供位置更新。我只能使用 LocationManager 获得解决方案。请为我提供解决方案，是否可以像我期望的那样获得位置更新？并建议我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T01:55:40.217

我不太确定您想如何更新您的位置，通过使用位置 API 或从您的数据库中获取位置并将其转换为经度和纬度？以我的方式，我使用前一个。所以代码是这样的：（让你的应用程序实现`Observer`）

```
public class SFLocationManager extends Observable {

private static SFLocationManager lm;

private SFLocationManager(Context context) {
    this.context = context;
}

public static SFLocationManager getInstance(Context context) {
    if(lm == null) {
        lm = new SFLocationManager(context);
    }
    return lm;
}

private static final int minTime = 1000 * 10 * 10;
private static final float minDistance = 20.0f;

private Context context;

private LocationManager mLocationManager;

private Location mCurrentBestLocation;

private String mLocationProvider;

public String getLocationProvider() {
    return mLocationProvider;
}

public void registerLocationListener() {
    mLocationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    boolean isGPSEnabled = mLocationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    boolean isWIFIEnabled = mLocationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
    if(isGPSEnabled) {
        mLocationProvider = LocationManager.GPS_PROVIDER;
        mLocationManager.requestLocationUpdates(mLocationProvider, minTime, minDistance, mLocationListener);
    } else if(!isGPSEnabled && isWIFIEnabled) {
        mLocationProvider = LocationManager.NETWORK_PROVIDER;
        mLocationManager.requestLocationUpdates(mLocationProvider, minTime, minDistance, mLocationListener);
    } else if(!isGPSEnabled && !isWIFIEnabled) {
        mLocationProvider = null;
    }
}

public void removeLocationListener() {
    if(mLocationManager != null) {
        mLocationManager.removeUpdates(mLocationListener);
    }
}

private LocationListener mLocationListener = new LocationListener() {

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {

    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onLocationChanged(Location location) {
         if (location != null) {
                if(LocationUtil.isBetterLocation(location, mCurrentBestLocation)) {
                    mCurrentBestLocation = location;
                    notifyObservers(location);
                }
         }
    }
};

public Location getBestLocation(String provider) {
    if(mLocationManager == null) {
        mLocationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    }
    boolean isGPSEnabled = mLocationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    boolean isWIFIEnabled = mLocationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
    if(!isGPSEnabled && !isWIFIEnabled) {
        return null;
    } else {
        if(provider != null) {
            Location lastKnownLocation = mLocationManager.getLastKnownLocation(provider);
            if(lastKnownLocation != null) {
                if(LocationUtil.isBetterLocation(lastKnownLocation, mCurrentBestLocation)) {
                    mCurrentBestLocation = lastKnownLocation;
                }
            }
            return mCurrentBestLocation;
        } else {
            return null;
        }
    }
}

}

public class LocationUtil {

private static final int TWO_MINUTES = 1000 * 60 * 2;

/** Determines whether one Location reading is better than the current Location fix
  * @param location  The new Location that you want to evaluate
  * @param currentBestLocation  The current Location fix, to which you want to compare the new one
  */
public static boolean isBetterLocation(Location location, Location currentBestLocation) {
    if (currentBestLocation == null) {
        // A new location is always better than no location
        return true;
    }

    // Check whether the new location fix is newer or older
    long timeDelta = location.getTime() - currentBestLocation.getTime();
    boolean isSignificantlyNewer = timeDelta > TWO_MINUTES;
    boolean isSignificantlyOlder = timeDelta < -TWO_MINUTES;
    boolean isNewer = timeDelta > 0;

    // If it's been more than two minutes since the current location, use the new location
    // because the user has likely moved
    if (isSignificantlyNewer) {
        return true;
    // If the new location is more than two minutes older, it must be worse
    } else if (isSignificantlyOlder) {
        return false;
    }

    // Check whether the new location fix is more or less accurate
    int accuracyDelta = (int) (location.getAccuracy() - currentBestLocation.getAccuracy());
    boolean isLessAccurate = accuracyDelta > 0;
    boolean isMoreAccurate = accuracyDelta < 0;
    boolean isSignificantlyLessAccurate = accuracyDelta > 200;

    // Check if the old and new location are from the same provider
    boolean isFromSameProvider = isSameProvider(location.getProvider(),
            currentBestLocation.getProvider());

    // Determine location quality using a combination of timeliness and accuracy
    if (isMoreAccurate) {
        return true;
    } else if (isNewer && !isLessAccurate) {
        return true;
    } else if (isNewer && !isSignificantlyLessAccurate && isFromSameProvider) {
        return true;
    }
    return false;
}

/** Checks whether two providers are the same */
private static boolean isSameProvider(String provider1, String provider2) {
    if (provider1 == null) {
      return provider2 == null;
    }
    return provider1.equals(provider2);
}

public static boolean isLocationAvailable(Context context) {
    LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    boolean isGPSEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    boolean isWIFIEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
    return isGPSEnabled || isWIFIEnabled;
}

} 
```

# mysql - 使用尾随标记对 DBMS 存储值进行编码以检测截断/损坏；优点？缺点？备择方案？

> ID：10308141
> 
> 赞同：2
> 
> 时间：2012-04-25T01:18:26.817
> 
> 标签：mysql, ruby, denormalization, sentinel

最近，我支持的一个团队遇到了一个问题，他们在 MySQL 数据库中存储（和检索）一个值。他们告诉我他们将逗号分隔的值存储在 (VARCHAR(255)?) 列中。

他们报告说他们的值被默默地截断（他们的代码主要是 Ruby，其他一些处理是在 Scala 中完成的）并要求我们将该列的大小加倍。

自然地，我建议他们规范化......将这些值中的每一个（以前以逗号分隔）存储在单独的行中，并使用 SELECT 来获取集合（以前应该是单行）。他们回击并坚称他们永远不希望将这些分隔值用于任何其他类型的数据库查询，并且他们永远不需要该字段比新的 (512) 宽度更宽。

然后我建议他们至少添加一个标记字符串结尾的标记（特别是尾随分号）并在所有提取时检查它。他们已经实现了这一点，并对这种方法感到满意。

我的问题：

*   他们的数据是如何被悄悄截断的？MySQL 或他们的 Ruby 数据库驱动程序中是否有一些设置可以抑制错误？
*   与更规范化的方法相比，这种哨兵终止值的优缺点是什么？
*   这个哨兵终止值是否有一些艺术术语或昵称？
*   有什么更好的方法来解决他们的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T01:27:58.357

在 MySQL 中“错过”截断实际上很容易，但也很容易让它严厉地通知你而不是试图提供帮助。

来自 MySQL 手册：

> 如果未启用严格 SQL 模式并且您为 CHAR 或 VARCHAR 列分配的值超过了列的最大长度，则该值将被截断以适应并生成警告。对于非空格字符的截断，您可能会导致发生错误（而不是警告）并使用严格的 SQL 模式禁止插入值。请参阅第 5.1.6 节，“服务器 SQL 模式”。

如手册所示，您可以设置 MySQL 的几种“严格”模式之一，以在这种情况下引发错误（以及许多其他会导致静默截断或替换值的错误）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T01:31:27.433

如果您的数据库中没有启用[严格模式](http://dev.mysql.com/doc/refman/5.5/en/server-sql-mode.html#sqlmode_strict_all_tables)，MySQL 将截断不适合`varchar(n)`列的字符串，并仅生成有关截断的警告。如果你启用严格模式，那么在这种情况下你会得到一个错误（并且更安心）。

您的哨兵值的最大问题是他们只在读取时检查它。这意味着他们可以（并且肯定会）最终存储无效/损坏的数据，但在尝试解压缩该数据之前他们不会知道问题；但是，当他们解包数据时，要恢复丢失的数据为时已晚。

有各种更好的方法：

1.  正确规范化的表。
2.  在 MySQL 中启用严格模式。
3.  预插入或预更新长度验证。
4.  如果他们实际上在使用 Rails，那么也许他们可以使用[`serialize`](http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/Serialization/ClassMethods.html#method-i-serialize)自动将数据转换为/从 ( *cringe* ) YAML；在这种情况下，他们必须使用更大的 TEXT 列类型，并且仍然存在截断问题。

所以**2**和**3**应该立即完成，**1**是最好的，如果他们害怕（或不理解）规范化，**4**可能是一个中间选项。

# php - sql 数据库或文件系统中的照片 (2012)

> ID：10308143
> 
> 赞同：1
> 
> 时间：2012-04-25T01:19:02.383
> 
> 标签：php, mysql, sql, filesystems, storage

可能已经有几个关于这个的问题，但我想得到一个更新的答案，因为现在大多数答案都是旧的。图像、数据库或文件系统的存储哪个更好？

* * *

我认为 facebook 正在使用数据库，因为图像可以有各种扩展：| 例如，请参阅此链接：[jpeg](http://a3.sphotos.ak.fbcdn.net/hphotos-ak-snc7/292508_371212639597799_214433131942418_1157212_493691459_n.jpeg) [jpg](http://a3.sphotos.ak.fbcdn.net/hphotos-ak-snc7/292508_371212639597799_214433131942418_1157212_493691459_n.jpg) [png](http://a3.sphotos.ak.fbcdn.net/hphotos-ak-snc7/292508_371212639597799_214433131942418_1157212_493691459_n.png) [gif](http://a3.sphotos.ak.fbcdn.net/hphotos-ak-snc7/292508_371212639597799_214433131942418_1157212_493691459_n.gif)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T01:55:25.643

尽管看起来如此，但这不是品味问题，而是性能问题。对于现在活跃的项目，我已经尝试了两种方式，并在他们的开发期间吸取了教训。

将文件存储在数据库中似乎是创建易于部署、维护等的一体化设置的好方法。但是当涉及到较大的文件（例如高分辨率图像）时，它可能会显着增加加载时间。

另一方面，对于较小的图像，作为用户头像、产品缩略图、其他缩略图，它可以通过减少对服务器文件系统的请求来提高您的加载速度。在这种特定情况下，这完全取决于您可能拥有的 SQL 技能和查询的优化级别。

* * *

我会给你一个建议，我现在已经在涉及许多图像的项目中使用了它，而不仅仅是那些。

在您的数据库中创建一个表，其结构大致如下：

```
id            INT(5) AUTO_INCREMENT PRIMARY KEY
filename      VARCHAR(255)
fullsize_path CHAR(255)
image         BLOB
mime          CHAR(25)
size          INT(20) 
```

呃......你明白了，BLOB 字段是你的图像的去向。如果它是某物的缩略图，则 fullsize_path 不会留空并提及全尺寸图像的路径。

这样，当显示，例如一个有产品的页面时，所有的查询都将是基于 SQL 的，但是当访问一个特定的产品时，fullsize_path 会告诉浏览器在哪里可以找到大哥。

* * *

当然，在部署这样的东西时，你有更多的事情要担心，我将在这里概述一些：

*   SQL 服务器性能
*   SQL 托管图像的最大大小（以字节为单位）
*   要存储的图像数量

> 当然，之前做一些性能测试是非常宝贵的实践！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T01:22:19.967

我建议将文件存储在您网站上的图像/文件夹或类似文件夹中，我会使用随机数或 ID 保存它们的名称，然后将该信息存储在数据库中。那将是两者的完美结合！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T01:30:35.807

我以前做过使用两种存储方式的系统，它通常取决于上下文。

对于访问大量文件且服务器数量较少（通常为 1 台服务器）的系统，存储在文件中更易于开发和维护。

对于服务器数量较多且所有服务器都需要访问文件的系统。有时我用文件和 rsync 设置它。有时我将文件存储在数据库中并让复制处理它。

Facebook 或其他网站将其图像存储在数据库中的原因很可能是因为这个。他们需要在许多服务器中访问文件，而无需复制文件的开销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T01:30:41.643

将图像存储在数据库中比将数据存储在文件系统中要安全得多。但在性能方面，将图像存储在文件系统中效率更高。我们必须根据我们的要求选择最好的方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T18:59:28.440

您可能还想查看 Filetable 选项。优点是更简单的编程模型（可以使用 T-SQL 和 Windows API）和更简单的管理（通过 SSMS），缺点是这会使数据库更大。如果您选择此选项，您将希望将文件表放在专用文件组上，并且您将需要调整备份策略以包括文件组备份。

另一种可能性是查看 RBS（远程 BLOB 存储），它作为 SQL Server 2012 功能包的一部分（不在主要产品中）提供。

# asana - Asana API 可以将附件上传到任务

> ID：10308144
> 
> 赞同：2
> 
> 时间：2012-04-25T01:19:05.413
> 
> 标签：asana

我想以编程方式将附件上传到 Asana 中的任务。这可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-13T00:32:06.487

虽然 Greg 在撰写本文时是正确的，但我现在很高兴地说您可以通过 API 获取和上传附件：[https ://asana.com/developers/api-reference/attachments](https://asana.com/developers/api-reference/attachments)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T19:16:34.240

目前不是，但我们会确保它在我们的功能请求列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-26T16:46:29.793

实际上 Asana Api 支持附件上传，但我没有使用 java 工作。我将 multipart/form-data 与可在其他其余实现中工作的 Custom MultipartRequest 类一起使用，但 Asana 文档中的任何内容都不清楚我们需要在请求中实现哪些标头/参数才能正常工作，我得到了BadRequestError 一直都是。有人知道吗？

# vb.net - 如何在 System.Windows.Forms.Keys 中使用变量？

> ID：10308153
> 
> 赞同：1
> 
> 时间：2012-04-25T01:20:13.623
> 
> 标签：vb.net, visual-studio-2010

例如，我想将 System.Windows.Forms.Keys 与变量一起使用

```
shortcutkey = "A"
keydata = System.Windows.Forms.Keys.shortcutkey 
```

这可能吗？

这个想法是实现用户指定的自定义快捷方式来执行某些操作。

我的代码是这样的

```
 If (((BindingFunctions.IsKeyDown(Keys.ControlKey) AndAlso BindingFunctions.IsKeyDown(Keys.ShiftKey)) AndAlso BindingFunctions.IsKeyDown(keyData)) AndAlso (keyData = Keys.L)) Then
            CC.LC()
        End If 
```

这里我直接给 keyData = Keys.L 。而不是这个，我想用一个变量来做

```
 mykeydata = "L"
        If (((BindingFunctions.IsKeyDown(Keys.ControlKey) AndAlso BindingFunctions.IsKeyDown(Keys.ShiftKey)) AndAlso BindingFunctions.IsKeyDown(keyData)) AndAlso (keyData = Keys.mykeydata)) Then
            CC.LC()
        End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T01:27:36.980

```
Dim shortcutkey As String = "A"
Dim keyData As Keys

If [Enum].TryParse(Of Keys)(shortcutkey, keyData) Then
    ' keyData is now Keys.A
End If 
```

# iphone - 完成编辑后如何检查 UITextField 文本是否为空

> ID：10308154
> 
> 赞同：3
> 
> 时间：2012-04-25T01:20:23.993
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uitextfield

我目前有一个带有默认文本的 UITextField，并在编辑开始时设置为清除。我正在尝试这样做，以便在完成编辑时如果该字段为空或 nil，则文本值将再次成为默认文本。我无法检测何时完成编辑或关闭键盘。谁能告诉我我想使用哪种检测方法以及如何实现它？非常感谢！

* * *

## 编辑

* * *

`placeholder`在我的情况下不能使用A

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T06:16:38.963

您必须使用文本字段委托

```
-(void)textFieldDidEndEditing:(UITextField *)textField; 
```

在这个委托中进行这样的检查

```
if ( [textField.text length] == 0 )
{
    // the text field is empty do your work
} else {
    ///  the text field is not empty 
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-14T10:12:44.240

```
- (BOOL)textField:(UITextField*)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString*)string
{
    if (range.location == 0 && string.length == 0)
    {
        //textField is empty
    }
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T01:22:43.437

我认为您不需要自己处理“默认文本”。检查类`placeholder`的属性[`UITextField`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextField_Class/Reference/UITextField.html)。

**更新**

所以`placeholder`对你的情况不好。您是否尝试[`UITextFieldDelegate`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html#//apple_ref/occ/intf/UITextFieldDelegate)为您实现方法`UITextField`并更改文本`textViewDidEndEditing:`？

为此，`UITextFieldDelegate`请在视图控制器中实现对您的场景有用的方法，并将`delegate`您`UITextField`的设置为视图控制器（通过 Interface Builder 或以编程方式）。`textViewDidEndEditing:`在方法中设置默认文本。

您可以参考[iOS 的文本、Web 和编辑编程指南](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/ManageTextFieldTextViews/ManageTextFieldTextViews.html)的“获取输入的文本和设置文本”部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-25T02:17:26.093

当您在文本字段返回时收到委托调用时，使用`sender`参数检查文本 ( `sender.text`)，如果等于则`@""`设置您的默认文本。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-05T07:51:17.153

我使用两种方法。我的选择取决于应用程序的业务逻辑。

1）我在应用更改后检查结果文本`shouldChangeCharactersIn`：

```
func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {
        var text = textField.text ?? ""

        let startIndex = text.index(text.startIndex, offsetBy: range.location)
        let endIndex = text.index(text.startIndex, offsetBy: range.location + range.length)
        text = text.replacingCharacters(in: startIndex..<endIndex, with: string)
        if text.count == 0 {
            // textField is empty
        } else {
            // textField is not empty
        }
        return true
    } 
```

2）我使用`editingChanged`动作：

```
@IBAction private func textFieldDidChange(_ sender: UITextField) {
        if (sender.text?.count ?? 0) == 0 {
            // textField is empty
        } else {
            // textField is not empty
        }
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-27T20:25:14.203

您还需要检查删除的范围是否是文本的整个长度。

```
func textField(_ textField: UITextField, shouldChangeCharactersIn range:  NSRange, replacementString string: String) -> Bool {
    if !(range.location == 0 && string.count == 0 && range.length == textField.text?.count) {
      // Text field is empty
    }
    return true
} 
```

# visual-studio-2010 - 如何在 VC++ 中正确启动进程？

> ID：10308155
> 
> 赞同：1
> 
> 时间：2012-04-25T01:20:51.830
> 
> 标签：visual-studio-2010, c++-cli

我有一个非常简单的窗口窗体程序，我想在按下按钮时启动 notepad.exe。我得到一些预期的错误。请帮忙。

在我的代码的开头，我有

```
#pragma once
#include <windows.h>
#include <Shellapi.h> 
```

在事件处理程序中，我有

```
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {

                //memset(&ExecuteInfo, 0, sizeof(ExecuteInfo));

                ExecuteInfo.cbSize       = sizeof(ExecuteInfo);
                ExecuteInfo.fMask        = NULL;              
                ExecuteInfo.hwnd         = NULL;               
                ExecuteInfo.lpVerb       = "open";                      // Operation to perform
                ExecuteInfo.lpFile       = "C:\\Windows\\notepad.exe";  // Application name
                ExecuteInfo.lpParameters = NULL;           // Additional parameters
                ExecuteInfo.lpDirectory  = NULL;                          // Default directory
                ExecuteInfo.nShow        = SW_SHOW;
                ExecuteInfo.hInstApp     = NULL;

                ShellExecuteEx(&ExecuteInfo);

         } 
```

注意：如果我在属性页>配置属性>常规（ALT-F7）下设置为“使用 Unicode 字符集”，我会收到以下错误消息

```
1>c:\users\marco\desktop\new folder (2)\test000\test000\Form1.h(140): error C2440: '=' : cannot convert from 'const char [5]' to 'LPCWSTR'
1>          Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast
1>c:\users\marco\desktop\new folder (2)\test000\test000\Form1.h(141): error C2440: '=' : cannot convert from 'const char [23]' to 'LPCWSTR'
1>          Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast 
```

注意：如果我在属性页>配置属性>常规（ALT-F7）下设置为“使用多字节字符集”，我会收到以下错误消息

```
1>test000.obj : error LNK2028: unresolved token (0A000012) "extern "C" int __stdcall ShellExecuteExA(struct _SHELLEXECUTEINFOA *)" (?ShellExecuteExA@@$$J14YGHPAU_SHELLEXECUTEINFOA@@@Z) referenced in function "private: void __clrcall test000::Form1::button1_Click(class System::Object ^,class System::EventArgs ^)" (?button1_Click@Form1@test000@@$$FA$AAMXP$AAVObject@System@@P$AAVEventArgs@4@@Z)
1>test000.obj : error LNK2019: unresolved external symbol "extern "C" int __stdcall ShellExecuteExA(struct _SHELLEXECUTEINFOA *)" (?ShellExecuteExA@@$$J14YGHPAU_SHELLEXECUTEINFOA@@@Z) referenced in function "private: void __clrcall test000::Form1::button1_Click(class System::Object ^,class System::EventArgs ^)" (?button1_Click@Form1@test000@@$$FA$AAMXP$AAVObject@System@@P$AAVEventArgs@4@@Z)
1>C:\Users\Marco\Desktop\New folder (2)\test000\Debug\test000.exe : fatal error LNK1120: 2 unresolved externals 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T01:48:33.130

您需要在字符串周围使用 TEXT() 宏（例如 TEXT("open") 而不是 "open"）或在运行时将 ANSI 字符串转换为 UTF-16（例如，使用 mbstowcs_s() 函数）。

发生这种情况的原因是 TCHAR 是 Microsoft char 类型，它是 char 还是 wchar_t 取决于项目是否配置为 unicode。请注意，lpFile 和朋友的类型是 LPCTCHAR（指向 const TCHAR 的长指针），这意味着如果您使用（默认）unicode 配置，它最终会成为 const wchar_t*，而 char[] 不能隐式转换为它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:37:04.027

另一种解决方案：如果您使用的是 C++/CLI，您也可以使用托管方法来启动进程：

```
System::Diagnostics::Process::Start("C:\\Windows\\notepad.exe"); 
```

这也应该避免字符集问题。
这并不意味着您应该忽略它们，因为了解潜在问题是件好事。Roee Shenberg 在他的回答中提到了这一点。

# unit-testing - GWT：RemoteServiceServlet 和 HttpServletRequest：单元测试中的问题

> ID：10308156
> 
> 赞同：1
> 
> 时间：2012-04-25T01:21:04.707
> 
> 标签：unit-testing, gwt, gwt-rpc

我想对我的项目进行单元测试，特别是登录功能。我使用 HttpSession 来设置或获取会话密钥，所以我必须获取一个 HttpServletRequest

```
final HttpServletRequest request = getThreadLocalRequest(); 
```

接着

```
final HttpSession session = request.getSession(); 
```

当我从通常的入口点运行应用程序时，一切顺利。但是当我从我的 UnitTest 案例中调用类似的 RPC 时，getThreadLocalRequest() 返回 null 经过一番挖掘后，我意识到 RemoteServiceServlet 函数 service() 不是从 UnitTest 模式调用的，而当我直接调试我的应用程序时调用它。

即使在 UnitTest 模式下，是否有某种方法可以使 HttpServletRequest 正常工作？

# c - 将寄存器的内容读入 C 变量时的奇怪行为

> ID：10308159
> 
> 赞同：0
> 
> 时间：2012-04-25T01:21:26.627
> 
> 标签：c, gcc, assembly, linux-kernel, cpu-registers

我正在尝试`gdtr`使用 gcc 内联汇编读取寄存器的内容，特别是读取到 C 变量中。为此，我正在调整我在[此处](http://fixunix.com/linux/555213-reading-contents-gdt-ldt-user-mode-process.html)找到的一些代码，但这些代码是为 32 位处理器编写的。因此，在将指令调整为 64 位时，我遇到了一些奇怪的行为，我希望有人可以向我解释。

首先是`gdtr`结构，它应该对 gdtr 寄存器的结构进行建模。

```
struct gdtr64 {
    uint16_t limit;
    uint64_t addr;
}; 
```

很简单。当我尝试通过执行将寄存器的内容输出到这样的结构中时：

```
struct gdtr64 gdtr64 = {0xcccc,0xa2a2a2a2a2a2a2a2};
printf("gdtr64 limit: %x\ngdtr64 addr: %llx\n", gdtr64.limit, gdtr64.addr);
printf("<--asm call-->\n");
__asm__ volatile("sgdt %0\n" : :"m"(gdtr64));
printf("gdtr64 limit: %x\ngdtr64 addr: %llx\n", gdtr64.limit, gdtr64.addr); 
```

我得到：

```
gdtr64 limit: cccc
gdtr64 addr: a2a2a2a2a2a2a2a2
<--asm call-->
gdtr64 limit: a0
gdtr64 addr: a2a2a2a2a2a2ffff 
```

调用之前的值只是垃圾值，所以我可以知道发生了什么变化。我们可以看到 limit 从 更新`cccc`到`00a0`，最后两个字节`gdtr64.addr`也发生了变化。这对我来说没有多大意义。

作为一个实验，我运行了相同的代码，除了我传入`gdtr64.addr`了汇编部分：

```
struct gdtr64 gdtr64 = {0xcccc,0xa2a2a2a2a2a2a2a2};
printf("gdtr64 limit: %x\ngdtr64 addr: %llx\n", gdtr64.limit, gdtr64.addr);
printf("<--asm call-->\n");
__asm__ volatile("sgdt %0\n" : :"m"(gdtr64.addr));
printf("gdtr64 limit: %x\ngdtr64 addr: %llx\n", gdtr64.limit, gdtr64.addr); 
```

输出让我感到惊讶：

```
gdtr64 limit: cccc
gdtr64 addr: a2a2a2a2a2a2a2a2
<--asm call-->
gdtr64 limit: cccc
gdtr64 addr: ff8076db40000097 
```

在这种情况下，我们在 占用的内存地址之后开始写入`gdtr64.limit`，但我们看到写入的内容有本质的不同。上`00a0`一个示例中的限制已迁移到 addr 的末尾是这个。否则，我们就有了看起来像正确地址的条件。

所以，我想知道问题是否不是`struct`我使用的 s 所固有的，所以我决定尝试一串`char`s。该寄存器的长度应为 10 个字节，因此：

```
char gdtr_char[10] = "0000000000";
printf("GDTR_CHAR: %02x %02x %02x %02x %02x %02x %02x %02x %02x %02x \n",
    (unsigned char) gdtr_char[0],
    (unsigned char) gdtr_char[1],
    (unsigned char) gdtr_char[2],
    (unsigned char) gdtr_char[3],
    (unsigned char) gdtr_char[4],
    (unsigned char) gdtr_char[5],
    (unsigned char) gdtr_char[6],
    (unsigned char) gdtr_char[7],
    (unsigned char) gdtr_char[8],
    (unsigned char) gdtr_char[9]
);
printf("<--asm call-->\n");
__asm__ volatile("sgdt %0\n" : :"m"(gdtr_char[0]));
printf("GDTR_CHAR: %02x %02x %02x %02x %02x %02x %02x %02x %02x %02x \n",
    (unsigned char) gdtr_char[0],
    (unsigned char) gdtr_char[1],
    (unsigned char) gdtr_char[2],
    (unsigned char) gdtr_char[3],
    (unsigned char) gdtr_char[4],
    (unsigned char) gdtr_char[5],
    (unsigned char) gdtr_char[6],
    (unsigned char) gdtr_char[7],
    (unsigned char) gdtr_char[8],
    (unsigned char) gdtr_char[9]
); 
```

请原谅冗长，我的 C 技能正在......发展。结果是：

```
GDTR_CHAR: 30 30 30 30 30 30 30 30 30 30 
<--asm call-->
GDTR_CHAR: 97 00 00 50 dd 76 80 ff ff ff 
```

同样，初始值是垃圾，但我们可以看到，在读取寄存器后，我们已经占了所有 10 个字节，但与我们尝试第二次试验时得到的顺序相反。总结一下：

```
trial 1 limit: 00a0
trial 1 addr:  ************ffff
-------------------------------
trial 2 limit: ****
trial 2 addr:  ff8076db40000097
-------------------------------
trial 3 array: 97 00 00 40 db 76 80 ff ff ff
reversed:      ff ff ff 80 76 db 40 00 00 97 //byte-wise 
```

顺便说一句，尽管这被分解为单独的“试验”，但它们是一次性运行的。寄存器的内容似乎在执行之间发生变化（我也觉得很奇怪）。说了这么多，我无法解决以下问题：

*   为什么GDTR的内容每次执行都会改变？
*   为什么使用 struct 和 char 数组有区别？
*   GDT 的内存基址是什么（即哪个结果是正确的[如果有的话]）？

任何帮助将不胜感激。感谢您阅读本文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:32:36.180

您可能至少面临两个问题。

第一个问题是编译器为对齐添加了填充，所以您认为包含“16 位限制和 64 位地址”的结构可能是“16 位限制，CPU 不期望的 48 位填充”和 64 位地址”。大多数编译器都有一个（非标准）扩展来打包结构（例如 " `#pragma pack`" 或 " `__attribute__((packed)))`" ）。

第二个问题是字节序。80x86 是 little-endian，这意味着字节 0x12、0x34、0x45、0x67 将代表 32 位整数 0x67452312。

我假设第二次和第三次试验的限制是 0x0097，地址部分是 0xFFFFFF8076DB4000。不过，我不确定第一次试验（看起来 GDTR 在第一次和第二次试验之间发生了变化）。

编辑：另请注意，第一次试验的限制结果无论如何看起来都是错误的。限制是“GDT 的大小 - 1”，因为 GDT 条目是 8（或 16）字节，所以限制应该总是设置最低 3 位（例如“0x???7”或“0x???F ”。

# java - Tabhost中的Android FragmentActivity？

> ID：10308161
> 
> 赞同：1
> 
> 时间：2012-04-25T01:22:05.317
> 
> 标签：java, android, android-tabhost, fragment

我正在尝试实现具有以下规格的应用程序：

主 fragmentActivity 中的 tabhost。在每个选项卡中，都有一个片段。

在选项卡 B 中，我有一个 ListFragment。我希望能够单击列表元素并在列表上方的同一选项卡中打开一个新片段。但我不希望这个片段占据整个屏幕；我仍然希望能够在打开新片段的情况下切换选项卡。我还希望能够关闭新片段并再次查看列表。

我应该如何实施呢？我尝试用 fragmentActivity 替换选项卡 B 的片段，以便我可以处理片段之间的转换，但 tabhost 抱怨。

有没有办法从选项卡 B 启动另一个片段（接管当前片段在活动中的位置）？我希望能够关闭新片段并返回选项卡 B 的列表。

更新：我想通了！有一种叫做片段回栈的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:14:31.080

答：使用片段回栈！您可以从要替换的片段中执行此操作！

[http://developer.android.com/guide/topics/fundamentals/fragments.html](http://developer.android.com/guide/topics/fundamentals/fragments.html)

# regex - Hive with Regex SerDe 拆分行，每个单词成为一列

> ID：10308162
> 
> 赞同：2
> 
> 时间：2012-04-25T01:22:08.363
> 
> 标签：regex, hadoop, hive

我正在尝试使用正则表达式 SerDe 从文本文件创建配置单元表。我开始很容易，只想将文本文档中的每个单词解析成一行。每行有一列，这就是单词。

我使用的正则表达式是 ([a-zA-z]+)

这是我向 hive 发出的 create table 命令的后半部分，

ROW FORMAT SERDE 'org.apache.hadoop.hive.contrib.serde2.RegexSerDe' WITH SERDEPROPERTIES ("input.regex" = "([a-zA-Z]+)", "output.format.string" = "% 1$s" ) 存储为文本文件；

目前该表包含几乎所有 NULL。

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T13:25:35.903

反序列化输入时，RegExSerDe 期望输入行与提供的正则表达式完全匹配。如果不匹配，则该行中的所有列都将为 NULL。

要从输入中拆分所有单词，您需要采用不同的方法，首先将输入按原样加载到表中。然后对输入进行空格拆分并将其分解，以便获得单个单词。您可能需要进行一些额外的匹配和过滤以删除不需要的插播字符。

```
CREATE TABLE input (text STRING);
LOAD DATA LOCAL INPATH 'input.txt' INTO TABLE input;
SELECT word FROM input LATERAL VIEW explode(split(text, ' ')) words AS word; 
```

# c++ - 使用 stdlibc++ 4.7 启用 C++11 时，clang 错误，而 gcc 编译正常

> ID：10308167
> 
> 赞同：9
> 
> 时间：2012-04-25T01:22:54.877
> 
> 标签：c++, macos, gcc, c++11, clang

在浏览了不同的网站和 Q/A 之后，我一直在尝试让 C++11 工作，但我仍然遇到问题。我想在 libstdc++ 中使用 clang。在 clang 状态中表明它受补丁支持 - [http://clang.llvm.org/libstdc++4.7-clang11.patch](http://clang.llvm.org/libstdc++4.7-clang11.patch)。我从 macports 下载 gcc4.7 并在 gcc4.7 的标头中进行了相应的更改

我不使用 libc++ 的原因是因为 libc++ 和 libstdc++ 之间的 ABI 兼容性，由该线程指示：[Why can't clang with libc++ in c++0x mode link this boost::program_options example？](https://stackoverflow.com/questions/8454329/why-cant-clang-with-libc-in-c0x-mode-link-this-boostprogram-options-examp)

好的，一切都完成后，我用以下代码测试了我的设置：

```
#include <mutex>
#include <thread>

int main ( ) {
    std::mutex myMutext;
    return 0;
} 
```

我期望包含应该在 c++11 下工作。

所以这是我编译它的方法：with GCC

```
g++ -std=c++11 -I/opt/local/include/gcc47/c++ -L/opt/local/lib/gcc47 main.cpp -o main 
```

编译成功

与铿锵

```
clang++ -std=c++11 -I/opt/local/include/gcc47/c++ -L/opt/local/lib/gcc47 main.cpp -o main 
```

我收到此错误：

```
@work:boostTest$ clang++ -std=c++11 -I/opt/local/include/gcc47/c++ -L/opt/local/lib/gcc47 main.cpp -o main
In file included from main.cpp:1:
In file included from /opt/local/include/gcc47/c++/mutex:38:
In file included from /opt/local/include/gcc47/c++/tuple:37:
In file included from /opt/local/include/gcc47/c++/utility:70:
/opt/local/include/gcc47/c++/bits/stl_relops.h:72:3: error: unknown type name '_GLIBCXX_BEGIN_NAMESPACE_VERSION'
  _GLIBCXX_BEGIN_NAMESPACE_VERSION
  ^
/opt/local/include/gcc47/c++/bits/stl_relops.h:86:5: error: expected unqualified-id
    template <class _Tp>
    ^
In file included from main.cpp:1:
In file included from /opt/local/include/gcc47/c++/mutex:38:
In file included from /opt/local/include/gcc47/c++/tuple:37:
In file included from /opt/local/include/gcc47/c++/utility:71:
In file included from /opt/local/include/gcc47/c++/bits/stl_pair.h:61:
/opt/local/include/gcc47/c++/bits/move.h:38:1: error: unknown type name '_GLIBCXX_BEGIN_NAMESPACE_VERSION'
_GLIBCXX_BEGIN_NAMESPACE_VERSION
^
/opt/local/include/gcc47/c++/bits/move.h:45:3: error: expected unqualified-id
  template<typename _Tp>
  ^
In file included from main.cpp:1:
In file included from /opt/local/include/gcc47/c++/mutex:38:
In file included from /opt/local/include/gcc47/c++/tuple:37:
In file included from /opt/local/include/gcc47/c++/utility:71:
In file included from /opt/local/include/gcc47/c++/bits/stl_pair.h:61:
In file included from /opt/local/include/gcc47/c++/bits/move.h:57:
/opt/local/include/gcc47/c++/type_traits:41:1: error: unknown type name '_GLIBCXX_BEGIN_NAMESPACE_VERSION'
_GLIBCXX_BEGIN_NAMESPACE_VERSION
^
/opt/local/include/gcc47/c++/type_traits:55:3: error: expected unqualified-id
  template<typename _Tp, _Tp __v>
  ^
/opt/local/include/gcc47/c++/type_traits:65:11: error: unknown type name 'integral_constant'
  typedef integral_constant<bool, true>     true_type;
          ^
/opt/local/include/gcc47/c++/type_traits:65:28: error: expected unqualified-id
  typedef integral_constant<bool, true>     true_type;
                           ^
/opt/local/include/gcc47/c++/type_traits:68:11: error: unknown type name 'integral_constant'
  typedef integral_constant<bool, false>    false_type;
          ^
/opt/local/include/gcc47/c++/type_traits:68:28: error: expected unqualified-id
  typedef integral_constant<bool, false>    false_type;
                           ^
/opt/local/include/gcc47/c++/type_traits:71:36: error: expected ';' after top level declarator
    constexpr _Tp integral_constant<_Tp, __v>::value;
                                   ^
/opt/local/include/gcc47/c++/type_traits:83:14: error: expected class name
    : public false_type
             ^
/opt/local/include/gcc47/c++/type_traits:106:14: error: expected class name
    : public true_type
             ^
/opt/local/include/gcc47/c++/type_traits:126:14: error: unknown template name 'integral_constant'
    : public integral_constant<bool, !_Pp::value>
             ^
/opt/local/include/gcc47/c++/type_traits:126:38: error: expected class name
    : public integral_constant<bool, !_Pp::value>
                                     ^
/opt/local/include/gcc47/c++/type_traits:142:14: error: expected class name
    : public false_type { };
             ^
/opt/local/include/gcc47/c++/type_traits:146:14: error: expected class name
    : public true_type { };
             ^
/opt/local/include/gcc47/c++/type_traits:151:14: error: unknown template name 'integral_constant'
    : public integral_constant<bool, (__is_void_helper<typename
             ^
/opt/local/include/gcc47/c++/type_traits:151:38: error: expected class name
    : public integral_constant<bool, (__is_void_helper<typename
                                     ^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
20 errors generated. 
```

我正在使用 clang 版本：

```
Apple clang version 4.0 (tags/Apple/clang-418.2.41) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.3.0
Thread model: posix 
```

难道我做错了什么？或者这是最新的 gcc 4.7 libstc++ 的问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T13:32:52.160

你为什么说`-I/opt/local/include/gcc47/c++`？

这对于 GCC 或 Clang 都不是必需的，并且不会起作用。并非所有 libstdc++ 标头都在该路径下，其他地方有一些基本标头定义了诸如`_GLIBCXX_BEGIN_NAMESPACE_VERSION`

GCC 不会失败，因为 GCC 已经知道如何找到其他标头，因此显式使用`-I`和`-L`选项是多余的。它不适用于 Clang，因为您只是告诉它如何找到它需要的一些标头，而不是告诉它如何找到其余的标头。

停止尝试覆盖编译器的标准库路径，让它使用它已经知道的内置路径。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-23T06:28:55.510

我在 FreeBSD 9.0/AMD64 上使用 clang-3.1 和 gcc4.6 libstdc++。它适用于以下选项：

```
-I/usr/local/lib/gcc46/include/c++ \
-I/usr/local/lib/gcc46/include/c++/x86_64-portbld-freebsd9.0 \
-L/usr/local/lib/gcc46 
```

我想您的问题可以通过使用这些选项来解决：

```
-I/opt/local/include/gcc47/c++ \
-I/opt/local/include/gcc47/c++/x86_64-apple-darwin11.3.0 \
-L/opt/local/lib/gcc47 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-14T15:03:01.227

您可以使用编译 clang 时隐式设置的[特殊选项。`-gcc-toolchain`](http://clang-developers.42468.n3.nabble.com/How-can-I-make-clang-llvm-use-specific-toolchain-tp4026788p4029188.html)`--with-gcc-toolchain`当您想使用另一个 GCC 库时，它比重新编译 clang 更容易:)

像那样：

```
~/clang/trunk/bin/clang++ main.cc -gcc-toolchain ~/gcc/trunk -o main 
```

或者，在你的情况下（我知道它已经 4 岁了:)）它似乎是

```
clang++ main.cpp -o main -gcc-toolchain /opt/local 
```

“toolchain”文件夹应包含“include”和“lib”文件夹。编译器和链接器都使用此选项。注意：`--gcc-toolchain`不是一个有效的选项，使用一个破折号作为前缀（即使[llvm wiki](http://llvm.org/docs/GettingStarted.html#getting-a-modern-host-c-toolchain)另有说明——我在 clang 3.8 主干上检查过）。

# javascript - 尝试使用 Javascript 获取 h1 标签的宽度

> ID：10308168
> 
> 赞同：0
> 
> 时间：2012-04-25T01:23:02.273
> 
> 标签：javascript

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org    /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script type = "text/javascript">

var textHeadingArray = ["Bloom Defender", "Civilization Wars", "Flight", "Rebuild 2",  "Wonderputt"];

var textHeadingIndex = 0;

function changeMainImage() {

textHeadingIndex++;
        if (textHeadingIndex >= textHeadingArray.length) {
        textHeadingIndex = 0;   
}

var changeTheHeading = document.getElementById("slidehsowheading").innerHTML = textHeadingArray[textHeadingIndex];

var heading = document.getElementById("slidehsowheading").style.width;

var sizeOfHeading = heading;
alert(sizeOfHeading);

var subtraction = 75 - sizeOfHeading;

var changeTheHeadingAgain = document.getElementById("slidehsowheading").style.left = subtractionRounded + "px";
}

var mainTiming = setInterval("changeMainImage()", 5000);

</script>

</head>

<body>

<h1 id = "slidehsowheading">Bloom Defender</h1>

</body>
</html> 
```

我试图使用此代码更改幻灯片的标题，我对 javascript 有点陌生，所以我的问题是当警报弹出时它返回为 null（警报仅用于调试），所以当我尝试使用此等式中 h1 的空宽度是错误的。该等式应该在计时器更改标题后得到标题的宽度并除以 2，然后从背景宽度除以 2 即 75 中减去该宽度，使用此公式，您可以将标题居中在其背景中元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T01:29:10.773

问题是`[object].style.width`只有在 CSS 中或通过`style.width`方法明确设置宽度时才有效。

尝试使用该`offsetWidth`属性：

```
var heading = document.getElementById("slidehsowheading").offsetWidth; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T01:27:09.790

您需要在 DOM 加载后执行此操作。将您的 javascript 放在身体的末端而不是头部。此外，您应该使用 console.log 而不是警报进行调试。

# ruby-on-rails - 我是在 .find() 之前还是之后放置 .Includes() 方法？

> ID：10308174
> 
> 赞同：2
> 
> 时间：2012-04-25T01:24:24.363
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

在 find 之前或之后，我应该在哪里放置 rails 模型的 .include() 方法？

```
User.find(1).includes(:books) 
```

或者

```
User.includes(:books).find(1) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-25T01:33:35.023

您*通常*可以在 ActiveRecord 关联调用上交换顺序，但在这种情况下您不能这样做。find() 返回对象本身，而不是可链接的范围。

如果您使用 where 子句，则调用的位置无关紧要。您只需要确保在实际执行 sql 之前添加了所有需要的连接。

# jquery - jQuery 没有按预期工作，为什么？

> ID：10308178
> 
> 赞同：1
> 
> 时间：2012-04-25T01:24:56.527
> 
> 标签：jquery

我有一页用户评论。

```
$(p).click(function(){

    $(this).hide(200);
}); 
```

当用户单击某些评论时，该评论通常会消失。好的，它工作得很好。

但是当用户对服务器响应做同样的事情时，这不再起作用

服务器响应是在表中找到的一堆下一条评论（即自定义 AJAX 分页器）

服务器响应如下所示：

```
<p id="next-id1">bla bla bla 1</p>
<p id="next-id2">bla bla bla 2</p> 
```

然后此响应在特定 div 之后插入内容，该 div 包含 mysql 表中的第一条评论

像这样：

```
$("#snow-next-btn").click(function(){

$.post('/paginator.php', {}, function(response){

    $("#comment-div").after(response);

});

}); 
```

好的，正如我所说的那样完美。但是这种方法：

```
$(p).click(function){
    $(this).hide(200);
} 
```

不再适用于服务器响应（但它仍然适用于 php 在页面加载时打印的内容）。

哪里有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T01:27:32.810

事件处理程序尚未绑定到从服务器响应中插入的新元素。而不是使用`$.click()`，使用`$.on()`：

```
$(document).on("click", "p", function(){
  $(this).hide( 200 );
}); 
```

随着新元素的出现，它们会为你绑定。唯一的其他解决方案是不断地将处理程序绑定到新元素，因为它们从服务器响应中下降。放轻松，坐下来，让 jQuery 完成繁重的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T01:31:39.173

您需要使用`.on()`with`selector`参数（第二个参数）：

```
$(document).on('click', 'p', function() {
   $(this).hide(200);
}) 
```

我看不到你的标记，所以我不知道最近的父级是什么`p`，而是替换`document`为最近的父级`p`，例如你的标记是：

```
<div id="bla">
   <p>...</p>
   <p>...</p>
   <p>...</p>
</div> 
```

你会写成

```
$('#bla').on('click', 'p', function() {
   $(this).hide(200);
}) 
```

来自[文档](http://api.jquery.com/on/)：

> 当提供选择器时，事件处理程序被称为委托。当事件直接发生在绑定元素上时，不会调用处理程序，而只会调用与选择器匹配的后代（内部元素）。
> 
> **委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。**

# asp.net-mvc - Ajax.BeginForm 在 HTML 中的呈现方式不同

> ID：10308181
> 
> 赞同：1
> 
> 时间：2012-04-25T01:25:13.637
> 
> 标签：asp.net-mvc, asp.net-ajax

```
@using (Ajax.BeginForm("RespondToFollowRequest", ajaxOptions))
{
<input type="hidden" name="followerID" value="@Model.MemberIdSentFrom" />
<div>
     <input class="Acceptbutton" type="submit" value="Accept" 
     name="btnAccept" id="btnAccept" />
</div>
} 
```

它的 HTML 渲染是

```
<input type="hidden" value="68aad827-3993-4a21-9846-731486409b1a" name="followerID">
<div>
<input id="btnAccept" class="Acceptbutton" type="submit" name="btnAccept" value="Accept">
</div> 
```

虽然我在同一个局部视图中有另一个按钮，并且呈现为：

```
<form id="form1" method="post" data-ajax-update="#tblNotification" data-ajax-mode="replace" data-ajax="true" action="/Notification/RespondToFollowRequest">
<input type="hidden" value="68aad827-3993-4a21-9846-731486409b1a" name="followerID">
<div>
<input id="btnReject" class="Rejectbutton" type="submit" name="btnReject" value="Reject">
</div>
</form> 
```

谁能帮我找出为什么会这样？

# java - 如果在 catch 子句中抛出异常，最终仍然运行

> ID：10308184
> 
> 赞同：2
> 
> 时间：2012-04-25T01:25:32.180
> 
> 标签：java, exception, try-catch

考虑到下面的代码，如果 catch 子句中抛出异常，finally 是否仍然运行？

```
try {
//code here throws exception
}
catch(Exception ex) {
//code catches above exception however code here also throws another exception
}
finally {
//does this code even run considering the exception thrown in the above catch clause??
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T01:26:53.443

是的，它确实。无论 try/catch 中发生什么，它都会运行（假设 JVM 由于某种原因没有关闭）

# jquery - 试图让 Thinkglink 与 Impress.js 一起工作

> ID：10308185
> 
> 赞同：0
> 
> 时间：2012-04-25T01:25:35.883
> 
> 标签：jquery, impress.js

我正在尝试在 Impress.js 中嵌入[http://www.thinglink.com/](http://www.thinglink.com/)图像（意味着“动态” - 能够为视频提供“热点”，为静止图像提供音频）：[http://bartaz。 github.com/impress.js/#/bored](http://bartaz.github.com/impress.js/#/bored)

正常工作时，它的外观和行为应该是这样的：http: [//3bute.com/](http://3bute.com/)

问题：在 impress.js 中，当您单击嵌入式 thinglink 图像上的“热点”时，对嵌入式资产的控制会丢失。

如果我能解决这个问题，对于像我这样的图形记者来说，这将是一个展示互动和动态故事的绝佳平台。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:17:12.627

问题来自于 impress.js 提供的示例 CSS 中的几行，这使得正文无法点击。

如果您删除：

```
.impress-enabled          { pointer-events: none }
.impress-enabled #impress { pointer-events: auto } 
```

所有人都应该使用 Thinglink！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:01:49.493

“嵌入式资产的控制权丢失”是什么意思？您的意思是链接在其他窗口或其他窗口中打开？

为了进一步调查，您能否提供：

1.  可以看到问题的网页地址
2.  重现问题的步骤
3.  您的预期结果是什么，目前会发生什么？

# android - 如何从android资产目录中的本地html文件进行ajax调用？

> ID：10308192
> 
> 赞同：2
> 
> 时间：2012-04-25T01:26:13.747
> 
> 标签：android, ajax, cordova, call, local

我有一个使用 phonegap 和 jquery mobile 的 android web 应用程序，phonegap.html 文件已放入 assets 目录，它使用 $.ajax 方法从远程服务器访问数据，但它不起作用。

有什么帮助吗？

提前致谢！

例如：

ajax("login.action",....) assets/login.html ------------------------->login.action

1.  login.html 是资产内的本地文件

2.  login.action 是远程接口

3.  login.html 使用 $.ajax 方法从 login.action 获取数据，但不起作用！

对不起，我的英语很差！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:09:19.060

您可能遇到了阻止跨站点脚本的同源策略限制（请参阅[http://en.wikipedia.org/wiki/Same_origin_policy ）。](http://en.wikipedia.org/wiki/Same_origin_policy)

有两种常见的解决方案。

较旧的是 JSONP（带填充的 JSON）（参见[http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)）。

一种较新的侵入性较小的解决方案是 CORS（跨源资源共享）（参见[http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)）

希望有帮助。

# solr - Apache Solr：CDATA 中的 HTML

> ID：10308193
> 
> 赞同：0
> 
> 时间：2012-04-25T01:26:36.477
> 
> 标签：solr, jstl, cdata

我有一个包含 HTML 的带有 CDATA 的 Solr XML 文档

前任：

```
<field name="content"><![CDATA[<p>Content is here</p>]]></field> 
```

我添加了这个文档，当我运行搜索时......在输出中，CDATA 内的 HTML 标记被转义。

```
&lt;p&gt;Content is here&lt;/p&gt; 
```

我想在输出时保持 HTML 标签完好无损。有没有办法防止这种情况？

我正在使用 JSP/JSTL，这是用于输出该字段的代码：

```
<c:out value="${content}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:21:15.200

你试过`<c:out value="${content}" escapeXml="false" />`还是只是`${content}`？

# html - 如何使设置的图像左、中、右相邻并根据内容增长？

> ID：10308201
> 
> 赞同：0
> 
> 时间：2012-04-25T01:27:34.573
> 
> 标签：html, css

所以我想创建一个由三个图像组成的图像......

左、中、右。

我有一个中心图像的原因是内容可以根据父 div 的宽度增加宽度。左右图像具有图像的边框轮廓。

我正在尝试这样的事情

```
#solutionsNav div.leadgenLeft 
{
    display: inline-block; 
    background: url(/images/leadgen_left.png) no-repeat; 
}
#solutionsNav div.leadgenRight 
{
    display: inline-block; 
    background: url(/images/leadgen_right.png) no-repeat;
    float: left;
}

#solutionsNav div.leadgen {
    background: url(/images/leadgen_center.png) repeat-x;
    color: #FFF;
    cursor: pointer;
   display: inline-block;
} 
```

然后标记如下

```
<div class="leadgenLeft">&nbsp;</div>
<div class="leadgen">
    <h3>
       <asp:Literal ID="LeadGenSpotTitleLiteral" runat="server"></asp:Literal>
    </h3>        
    <asp:Literal ID="LeadGenSpotDescriptionLiteral" runat="server"></asp:Literal>        
</div> 
<div class="leadgenRight">&nbsp;</div> 
```

但有几个问题

1.  图像彼此未对齐

2.  中心图像抓住内容的高度，所以很大，但左/右保持小，它们需要根据 div 中的内容量一起增长

3.  在中心图像中，图像由 2 种绿色构成，顶部为浅绿色，底部为深绿色。但如果内容很少，则仅显示图像顶部，因此仅显示浅绿色。是否有可能无论高度是多少，即使高度小于原始图像，图像也会始终完整显示？

编辑代码：

```
.wrapped { position:relative; padding:0 20px; background:url(/Website6/Styles/leadgen_center.png); min-height: 205px; width:350px; }
.wrapped:before {
content:'';
position:absolute;
top:0; left:0; bottom:0; width:9px;
background:url(/Website6/Styles/leadgen_left.png);
}
.wrapped:after {
content:'';
position:absolute;
top:0; right:0; bottom:0; width:9px;
background:url(/Website6/Styles/leadgen_right.png)
}
</style>
<div class="wrapped">
  <h3>
     This is the title
     </h3>        
     This is the description
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T01:33:00.810

您不必使用三个图像。如果您使用[此处描述的技术](http://css-tricks.com/snippets/css/perfect-css-sprite-sliding-doors-button/)，您应该能够完成您想要做的事情并且省去很多麻烦。如果元素不够高，您可以尝试为元素设置行高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T01:44:03.513

大致如此，不需要乏味的标记元素：

```
<style type="text/css">
  .wrapped { position:relative; padding:0 20px; background:url(center.png) }
  .wrapped:before {
    content:'';
    position:absolute;
    top:0; left:0; bottom:0; width:20px;
    background:url(left.png)
  }
  .wrapped:after {
    content:'';
    position:absolute;
    top:0; right:0; bottom:0; width:20px;
    background:url(right.png)
  }
</style>
<div class="wrapped">Lots of text here</div> 
```

在行动中看到：

## [http://jsfiddle.net/3Vb7F/](http://jsfiddle.net/3Vb7F/)

*将前后宽度设置为图像的大小；根据需要设置填充宽度，至少与图像一样宽。*

# c++ - 删除 STL 向量中的重复 STL 向量

> ID：10308204
> 
> 赞同：1
> 
> 时间：2012-04-25T01:27:53.230
> 
> 标签：c++

我有一个包含整数值的 STL 向量的 STL 向量。一些内部向量是重复的，但它们的元素顺序不同。现在，我想得到一个向量的向量，而没有任何重复的内部向量。我见过以下方法：

```
std::vector<std::vector<int>> myVec;
std::sort(myVec.begin(), myVec.end());
myVec.erase(std::unique(myVec.begin(), myVec.end()), myVec.end()); 
```

问题是我想消除重复项，保持每个订单的元素顺序（原始订单或不排序），最好的方法是什么？还有其他更有效的方法吗？

例子：

```
1 6 4 5
3 1 5 2----> result of elimination: 1 6 4 5
2 1 3 5                             3 1 5 2 
```

提前致谢

放假

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:03:21.713

这个问题并不完全清楚。所以我要给出两个答案。

(1) 如果您想删除重复但保留 1 个副本同时保持`myVec`' 的顺序，则需要使用 set。

```
std::vector< std::vector<int> > myVec;
//or std::unordered_set if you expect mostly unique sorted inner vectors
std::set< std::vector<int> > exists; 
std::vector< std::vector<int> > tmpVec;

for (std::size_t i=0, N=myVec.size(); i<N; ++i)
{
    std::vector<int> key(myVec[i]);
    std::sort(key.begin(), key.end());
    if (exists.find(key) == exists.end())
    {
        exists.insert(key);
        tmpVec.push_back(std::vector<int>());
        std::swap(myVec[i], tmpVec.back());
     }
}

std::swap(tmpVec, myVec); 
```

(2) 如果您希望删除所有多次出现的元素，`myVec`您需要一张计数器图。

```
std::vector< std::vector<int> > myVec;
//or std::unordered_map if you expect mostly unique sorted inner vectors
std::map< std::vector<int>, unsigned > counters; 

// first loop to count
for (std::size_t i=0, N=myVec.size(); i<N; ++i)
{
    std::vector<int> key(myVec[i]);
    std::sort(key.begin(), key.end());
    ++counters[key];
}

// second loop to filter
std::vector< std::vector<int> > tmpVec;
for (std::size_t i=0, N=myVec.size(); i<N; ++i)
{
    std::vector<int> key(myVec[i]);
    std::sort(key.begin(), key.end());
    if (counters[key] == 1)
    {
        tmpVec.push_back(std::vector<int>());
        std::swap(myVec[i], tmpVec.back());
     }
}

std::swap(tmpVec, myVec); 
```

两种解决方案都尊重元素的顺序，`myVec`并保留内部向量元素的原始顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T01:45:04.890

您可以做的是将每个向量输入到映射中的列表中，该列表由向量的排序值作为键，然后遍历映射选择向量`.size()`为 1 的映射。

您的地图将如下所示：

```
map<vector<int>, vector<vector<int> > > m; 
```

插入如下：

```
m[/*sorted inner_vector*/].push_back(inner_vector); 
```

请注意，`inner_vector`被推送的 保持其原始顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-06T22:14:13.940

如果`int`向量中已经存在一个，这里的这个会提醒用户：

```
 using namespace std;
    int num, prev; 

    cout << "Number: "; cin >> num;

            vec.push_back(num);
            sort(vec.begin(), vec.end());
            for (size_t i = 0; i < vec.size()-1; ++i)
            {
                prev = vec[i];
                if (prev == num)
                {
                    cout << "Duplicated\n"; // or whatever.
                    vec.erase(vec.begin() + i); // Delete the duplicated value.
                }
            } 
```

# java - Java蓝牙套接字在重新启动后不接受连接

> ID：10308211
> 
> 赞同：1
> 
> 时间：2012-04-25T01:28:31.847
> 
> 标签：java, android, sockets, bluetooth, listener

我整天都在为此挠头。我有一个监听设备的蓝牙套接字。这是通过 AsyncTask 完成的。第一次尝试从远程设备连接到它时，我没有任何问题。现在我正在尝试模拟断开连接。通过超出范围，关闭远程设备的蓝牙适配器，或者只是远程关闭连接。现在，当连接丢失时，服务器套接字会抛出 IOException。我以此为线索重新启动 AsyncTask 并再次开始收听。这似乎工作正常，我所有的 logcat 消息都在重新启动时显示，所以我知道任务正在运行，但套接字不会接受连接。认为这可能是重新启动 AsyncTask 的问题，我尝试在连接被接受后立即转储连接。重置它们后，

这是我现在用来测试的一些代码：

```
boolean running = true;
        while(running){
            btAdapter = BluetoothAdapter.getDefaultAdapter();
            btServerSocket = btAdapter.listenUsingRfcommWithServiceRecord(NAME, ID);
            btSocket = btServerSocket.accept();

            btServerSocket.close();
            btSocket.close();

            btServerSocket = null;
            btSocket = null;
            btAdapter = null;

            System.gc();
            sleep(10);
        } 
```

我真的不知道我做错了什么。任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T02:05:09.397

如果您只在 Android 2.3.x 上看到此问题，您可能会遇到我刚刚在另一个问题上写过的问题。该问题还表现为 accept() 第一次工作，但随后在连续尝试中失败。有关详细信息，请参阅我的[帖子](https://stackoverflow.com/a/19128875/2833041)。

# php - MySqli 没有适当回滚

> ID：10308214
> 
> 赞同：0
> 
> 时间：2012-04-25T01:28:48.667
> 
> 标签：php, mysqli

我有一个`$db`在 mysqli 下列出的数据库。该数据库包含两个表，我在下面将它们列为`table`和`table2`（仅用于此示例）。表 2 的行需要表中的 id。这很好，但是将列添加到 table2 中可能会出现问题，因此需要回滚例程。但是，它似乎不起作用。

我从关闭自动提交开始。然后我尝试输入回滚命令，即使我正在使用该`die`命令表示失败。就我而言，交易可能会在运行中被遗忘，并且数据库应该仍然稳定。所以我不确定这里发生了什么，除非数据库完全忽略了我试图关闭自动提交的事实。

我的代码的基本结构如下：

```
function problem($str)
{
    global $db;
    mysqli_rollback($db);
    die($str);
}

mysqli_autocommit($db,false);

//Basic check if exists
$sqlstr = "SELECT * FROM table WHERE name = '$name';";
$r = mysqli_query($db,$sqlstr);
if (mysqli_num_rows($r)>0){problem("A row already exists under that id");}

//Insert the row
$sqlstr = "INSERT INTO table (name,v1,v2,v3) VALUES ('$name','$v1','$v2','$v3');";
$r = mysqli_query($db,$sqlstr);
if (!$r){problem("Could not insert into the table. $sqlstr");}

//Get the generated id part 1
$sqlstr = "SELECT id FROM table WHERE name = '$name';";
$r = mysqli_query($db,$sqlstr);
if (!$r){problem("Could not add into the table. $sqlstr");}

//Get the generated id part 2
$row = mysqli_fetch_assoc($r);
$eid = $row['id'];

//A simple loop
$count = count($questions);
for ($i=1;i<=$count;$i++)
{
    //This is where it typically could die.
    $r = mysqli_query($db,"INSERT INTO table2 VALUES (...);");
    if (!$r){problem("Could not add to the table2\. $sqlstr");}
}

mysqli_commit($db); 
```

有什么我想念的吗？我试图尽可能地遵循我为自动提交找到的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T01:29:57.487

事务只有在表引擎支持时才起作用，例如 InnoDB。

# javascript - 根据屏幕尺寸的视口值

> ID：10308217
> 
> 赞同：0
> 
> 时间：2012-04-25T01:29:12.967
> 
> 标签：javascript, jquery, css, html, viewport

我不知道这是否可能。查看此非功能性网站：

[http://imageworkz.asia/sixsensestester/](http://imageworkz.asia/sixsensestester/)

当在大屏幕上查看时，它看起来好像容器漂浮在屏幕的中心，但是当使用较小的屏幕（比如说，通过 1366x768 显示器）查看时，它会像网站一样缩放和显示。我知道屏幕分辨率很重要，因此是否可以根据屏幕大小调整网站的缩放比例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T01:31:11.073

您要查找的内容称为[Media Queries](https://developer.mozilla.org/en/CSS/Media_queries)。它使用 CSS 来检测视口大小并相应地设置样式规则。有很多关于它们的教程，所以学习它们应该很容易。

# actionscript-3 - 是否有针对 Adob e AIR 触控/移动应用程序进行优化的 ActionScript 3 组件/UI？

> ID：10308218
> 
> 赞同：1
> 
> 时间：2012-04-25T01:29:18.620
> 
> 标签：actionscript-3, flash, mobile, air, touch

我已经搜索了大约一周，发现了这样的纯 AS3 UI/组件：

我正在尝试创建的是游戏的（Adobe AIR 移动）选项/设置菜单，根据特定屏幕的大小/像素密度可能需要向下滚动选项，使用列表位置的视觉指示器模仿 Android 的滚动列表和惯性到达列表末尾时的视觉线索

MinimalComps (minimalcomps.com)

Razorberry (razorberry.com/blog/components/)

但它们都针对鼠标点击进行了优化，并使用滚动条作为交互区域（[使用](http://www.riamore.com/content/RIAmore/Rich-Internet-Applications/YouKnits-designer/YouKnits-designer-app-for-Android) 最小计算，尝试在移动触摸屏上的浏览器中使用它，使用起来非常繁琐，实际上必须放大才能通过条件屏幕（ ！！））

我没有找到任何信息或教程以在纯 AS3 中在 Adob​​e AIR 移动设备中创建菜单系统（它通常只是链接到 Flex 或 AIR 桌面应用程序）我只找到了一个游戏纯 AS3 示例，其中包含要显示的源，[http： //blogs.adobe.com/cantrell/archives/2010/05/my_presentation_on_multiscreen_development.html](http://blogs.adobe.com/cantrell/archives/2010/05/my_presentation_on_multiscreen_development.html) 但它没有向您展示如何实现基本的触摸菜单/UI或界面，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T05:25:52.597

我一直想尝试一下[疯狂的组件，](http://code.google.com/p/mad-components/)[它们看起来很有前途](http://madskool.wordpress.com/2011/03/18/madcomponents-wow/)。不确定它们是否能解决您的特定问题，但它们似乎确实优于类似配备的 Flex 应用程序（基于其他开发人员的评论；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T11:02:21.323

查看散兵坑组件： [源代码](https://github.com/joshtynjala/foxhole-starling)和[示例](http://flashtoolbox.com/foxhole-starling/examples/kitchen-sink/)

您还可以查看我正在进行的这个项目，它对 MinimalComps 的扩展，其工作方式类似于 Flex 显示系统并具有数据绑定。只需很少的样式工作和扩展很少的组件，您就可以在触摸屏上使用它。

来源：[https](https://github.com/turbosqel/Extended-MinimalComps) ://github.com/turbosqel/Extended-MinimalComps 示例：[http ://turbosqel.pl/ExMinimalComps/simple/](http://turbosqel.pl/ExMinimalComps/simple/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-28T05:05:45.887

由 Starling 提供支持的[Feathers UI （完全 GPU 渲染的 UI）](http://feathersui.com/)

它由 Adob​​e 官方支持，100% 开源且可换肤。查看将其用于 UI 的[应用和游戏。](http://feathersui.com/showcase/)文档在[这里](http://feathersui.com/help/)。

这是 2014-2015 年的推荐方法。例如，散兵坑组件现在折旧以支持 Feathers。

# php - 数值上的 REQUEST_URI

> ID：10308219
> 
> 赞同：0
> 
> 时间：2012-04-25T01:29:22.157
> 
> 标签：php

我已经在这个网站上搜索并找不到任何关于这个问题的东西，所以如果它作为重复出现，请原谅。

我有以下网址

[http://mysite.com/art/1355](http://mysite.com/art/1355)

我想在导航中编写一个 php 代码，这样如果用户在任何最后带有“数字 id”的页面上，它就会显示一个链接。

这是代码，我不确定我必须为“abc”输入什么才能使其工作。

```
if(strstr($_SERVER['REQUEST_URI'], 'abc')) { 
    echo "<a href="#"class="playing">viewing</a>"; 
} 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T02:00:00.727

使用正则表达式检查它：

```
if (preg_match('/\/[0-9]+$/', $_SERVER['REQUEST_URI']))
{
    echo '<a href="#" class="playing">viewing</a>';
} 
```

# c# - 将 div 元素发送到电子邮件时丢失样式（C# asp.net）

> ID：10308220
> 
> 赞同：0
> 
> 时间：2012-04-25T01:29:22.163
> 
> 标签：c#, asp.net, html, css

所以我正在发送一封电子邮件，其中包含他们所在页面（收据页面）的 div 元素的内容。在 Receipt 页面中，css 样式显示得很好。然而，**当对象被发送到电子邮件时，样式似乎就消失了**。它位于单独的页面上，并在标题中称为表单（如往常一样）。我可以理解为什么会发生这种情况（只是发送要呈现的 html 而不是访问 css 样式），但不知道如何解决它。

所以我的问题是，**如何在不丢失 CSS 样式的情况下发送这个 div 元素？**

这是我的参考代码：

```
 StringWriter sw = new StringWriter( );
    HtmlTextWriter w = new HtmlTextWriter( sw );
    invoice.RenderControl( w ); //invoice is the div id of the element i am sending to email
    string s = sw.GetStringBuilder( ).ToString( );

    MailMessage message = new MailMessage( );
    message.IsBodyHtml = true;
    message.To.Add( new MailAddress( Session["eMail"].ToString( ) ) );
    message.To.Add( new MailAddress( "email@email.ca" ) );
    message.Subject = "extra dimensional stack-overflow";
    message.From = new MailAddress( "email@email.ca" );
    message.Body = s;

    SmtpClient emailClient = new SmtpClient( "localhost", 8025 );
    System.Net.NetworkCredential SMTPUserInfo = new System.Net.NetworkCredential( "blargh", "blargh" );
    emailClient.UseDefaultCredentials = false;
    emailClient.Credentials = SMTPUserInfo; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T02:15:41.910

电子邮件 HTML 阅读器需要内联样式的混合，并且在某些客户端中，还需要基于 HTML 的样式标记（就像 1999 年一样摇摆不定）。这很糟糕，但有一个很好的理由：通过引用任何外部资源，您将允许跟踪用户的行为并打开潜在的安全漏洞。这就是为什么大多数电子邮件程序在用户单击按钮之前不会加载外部图像的原因。电子邮件客户端不是 Web 浏览器，不应期望其行为方式相同。

抱歉，电子邮件 HTML 只要求所有内容都包含在`<body>`（无`<head>`标签、无脚本和无外部资源）中。

顺便说一句，如果您希望您的电子邮件在包括 Outlook 和 Outlook Express 在内的所有客户端中一致显示，您还必须使用基于表格的布局。糟透了，但确实如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T21:31:56.363

要发送 html 邮件，我要做的是：

1.  创建具有内联或内页样式的 html 模板。我不喜欢外部参考，但你仍然需要，你必须将你的 css 文件存储到一些在线位置。

2.  同样，如果您的模板是丰富的图像，则将 html 的所有内容（如 css、图像）上传到远程服务器上。

3.  使用 textreader 对象读取所有行

    > ```
    > using(TextReader reader =new StreamReader(path_of_html_file))
    >   {   
    >     var stringvalue = reader.ReadAllLines()
    >     stringvalue = stringvalue.Replace("[NAME]", db.Value.SomeValue);
    >   } 
    > ```
    > 
    > // 我不确定方法，但有相同的方法。这只是为了帮助。使用数据库驱动的值搜索和替换文本。就像我通常在我的原始 html 上使用 [NAME]、[EMAIL] 类型字符串并使用 db 值替换它们。**或者您也可以使用正则表达式在大型 html 文档中进行搜索和替换。**

4.  使用设置为 true 的邮件正文的 html 属性发送邮件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-13T11:47:09.973

如下发送带有样式表的电子邮件
**// 在发票 div 中定义您的样式表 //**

```
StringWriter sw = new StringWriter( );
    HtmlTextWriter w = new HtmlTextWriter( sw );
    invoice.RenderControl( w ); //invoice is the div id of the element i am sending to email
    string s = sw.GetStringBuilder( ).ToString( );
    MailMessage message = new MailMessage( );
    message.IsBodyHtml = true;
    message.To.Add( new MailAddress( Session["eMail"].ToString( ) ) );
    message.To.Add( new MailAddress( "email@email.ca" ) );
    message.Subject = "extra dimensional stack-overflow";
    message.From = new MailAddress( "email@email.ca" );
    string a,b;
    a="<html><body>";
    b="</body></html>";
    message.Body = a + s + b;
    SmtpClient emailClient = new SmtpClient( "localhost", 8025 );
    System.Net.NetworkCredential SMTPUserInfo = new      System.Net.NetworkCredential( "blargh", "blargh" );
    emailClient.UseDefaultCredentials = false;
    emailClient.Credentials = SMTPUserInfo; 
```

# java - 如何将jar内的文件复制到jar外？

> ID：10308221
> 
> 赞同：57
> 
> 时间：2012-04-25T01:29:23.643
> 
> 标签：java, file, jar, copy, working-directory

我想从 jar 中复制一个文件。我正在复制的文件将被复制到工作目录之外。我做了一些测试，我尝试的所有方法都以 0 字节文件结束。

**编辑**：我希望通过程序而不是手动完成文件的复制。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-14T13:29:51.543

首先我想说之前贴的一些答案是完全正确的，但是我想给出我的，因为有时我们不能使用GPL下的开源库，或者因为我们懒得下载jar XD或者什么你的理由在这里是一个独立的解决方案。

下面的函数复制 Jar 文件旁边的资源：

```
 /**
     * Export a resource embedded into a Jar file to the local file path.
     *
     * @param resourceName ie.: "/SmartLibrary.dll"
     * @return The path to the exported resource
     * @throws Exception
     */
    static public String ExportResource(String resourceName) throws Exception {
        InputStream stream = null;
        OutputStream resStreamOut = null;
        String jarFolder;
        try {
            stream = ExecutingClass.class.getResourceAsStream(resourceName);//note that each / is a directory down in the "jar tree" been the jar the root of the tree
            if(stream == null) {
                throw new Exception("Cannot get resource \"" + resourceName + "\" from Jar file.");
            }

            int readBytes;
            byte[] buffer = new byte[4096];
            jarFolder = new File(ExecutingClass.class.getProtectionDomain().getCodeSource().getLocation().toURI().getPath()).getParentFile().getPath().replace('\\', '/');
            resStreamOut = new FileOutputStream(jarFolder + resourceName);
            while ((readBytes = stream.read(buffer)) > 0) {
                resStreamOut.write(buffer, 0, readBytes);
            }
        } catch (Exception ex) {
            throw ex;
        } finally {
            stream.close();
            resStreamOut.close();
        }

        return jarFolder + resourceName;
    } 
```

只需将 ExecutingClass 更改为您的类的名称，然后像这样调用它：

```
String fullPath = ExportResource("/myresource.ext"); 
```

* * *

### 为 Java 7+ 编辑（为了您的方便）

正如[GOXR3PLUS回答并由](https://stackoverflow.com/users/4970079/goxr3plus)[Andy Thomas](https://stackoverflow.com/users/202009/andy-thomas)指出的那样，您可以通过以下方式实现：

```
Files.copy( InputStream in, Path target, CopyOption... options) 
```

有关详细信息，请参阅[GOXR3PLUS 答案](https://stackoverflow.com/a/44077426/865910)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-04-25T01:43:36.717

鉴于您对 0 字节文件的评论，我不得不假设您正在尝试以编程方式执行此操作，并且根据您的标签，您正在使用 Java 进行操作。如果这是真的，那么只需使用[Class.getResource()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)获取指向 JAR 中文件的 URL，然后使用 Apache Commons IO [FileUtils.copyURLToFile()](http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/FileUtils.html#copyURLToFile%28java.net.URL,%20java.io.File%29)将其复制到文件系统。例如：

```
URL inputUrl = getClass().getResource("/absolute/path/of/source/in/jar/file");
File dest = new File("/path/to/destination/file");
FileUtils.copyURLToFile(inputUrl, dest); 
```

最有可能的是，您现在拥有的任何代码的问题是您（正确地）使用缓冲输出流写入文件但（错误地）未能关闭它。

哦，你应该编辑你的问题，以明确你想*如何*做到这一点（以编程方式，而不是语言，......）

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-05-19T19:10:42.890

**使用Java 7+**更快的方法，加上获取当前目录的代码：

```
 /**
     * Copy a file from source to destination.
     *
     * @param source
     *        the source
     * @param destination
     *        the destination
     * @return True if succeeded , False if not
     */
    public static boolean copy(InputStream source , String destination) {
        boolean succeess = true;

        System.out.println("Copying ->" + source + "\n\tto ->" + destination);

        try {
            Files.copy(source, Paths.get(destination), StandardCopyOption.REPLACE_EXISTING);
        } catch (IOException ex) {
            logger.log(Level.WARNING, "", ex);
            succeess = false;
        }

        return succeess;

    } 
```

* * *

测试它（**icon.png**是应用程序包图像中的图像）：

```
copy(getClass().getResourceAsStream("/image/icon.png"),getBasePathForClass(Main.class)+"icon.png"); 
```

* * *

关于代码行（`getBasePathForClass(Main.class)`）：->检查我在此处添加的答案:)->[在Java中获取当前工作目录](https://stackoverflow.com/questions/4871051/getting-the-current-working-directory-in-java?answertab=active#tab-top)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-04-15T20:09:38.570

Java 8（实际上是自 1.7 以来的 FileSystem）带有一些很酷的新类/方法来处理这个问题。正如有人已经提到 JAR 基本上是 ZIP 文件，你可以使用

```
final URI jarFileUril = URI.create("jar:file:" + file.toURI().getPath());
final FileSystem fs = FileSystems.newFileSystem(jarFileUri, env); 
```

（见[压缩文件](http://docs.oracle.com/javase/8/docs/technotes/guides/io/fsp/zipfilesystemprovider.html)）

然后，您可以使用一种方便的方法，例如：

```
fs.getPath("filename"); 
```

然后你可以使用 Files 类

```
try (final Stream<Path> sources = Files.walk(from)) {
     sources.forEach(src -> {
         final Path dest = to.resolve(from.relativize(src).toString());
         try {
            if (Files.isDirectory(from)) {
               if (Files.notExists(to)) {
                   log.trace("Creating directory {}", to);
                   Files.createDirectories(to);
               }
            } else {
                log.trace("Extracting file {} to {}", from, to);
                Files.copy(from, to, StandardCopyOption.REPLACE_EXISTING);
            }
       } catch (IOException e) {
           throw new RuntimeException("Failed to unzip file.", e);
       }
     });
} 
```

注意：我尝试解压 JAR 文件以进行测试

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-10-19T12:56:22.057

稳健的解决方案：

```
public static void copyResource(String res, String dest, Class c) throws IOException {
    InputStream src = c.getResourceAsStream(res);
    Files.copy(src, Paths.get(dest), StandardCopyOption.REPLACE_EXISTING);
} 
```

你可以像这样使用它：

```
File tempFileGdalZip = File.createTempFile("temp_gdal", ".zip");
copyResource("/gdal.zip", tempFileGdalZip.getAbsolutePath(), this.getClass()); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-25T02:23:00.320

使用[JarInputStream](http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarInputStream.html)类：

```
// assuming you already have an InputStream to the jar file..
JarInputStream jis = new JarInputStream( is );
// get the first entry
JarEntry entry = jis.getNextEntry();
// we will loop through all the entries in the jar file
while ( entry != null ) {
  // test the entry.getName() against whatever you are looking for, etc
  if ( matches ) {
    // read from the JarInputStream until the read method returns -1
    // ...
    // do what ever you want with the read output
    // ...
    // if you only care about one file, break here 
  }
  // get the next entry
  entry = jis.getNextEntry();
}
jis.close(); 
```

另请参阅：[JarEntry](http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarEntry.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-26T17:33:58.467

要将文件从 jar 复制到外部，您需要使用以下方法：

1.  使用获取`InputStream`jar 文件中的文件[`getResourceAsStream()`](https://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResourceAsStream(java.lang.String))
2.  我们使用`FileOutputStream`
3.  我们将字节从输入复制到输出流
4.  我们关闭流以防止资源泄漏

示例代码还包含一个不替换现有值的变量：

```
public File saveResource(String name) throws IOException {
    return saveResource(name, true);
}

public File saveResource(String name, boolean replace) throws IOException {
    return saveResource(new File("."), name, replace)
}

public File saveResource(File outputDirectory, String name) throws IOException {
    return saveResource(outputDirectory, name, true);
}

public File saveResource(File outputDirectory, String name, boolean replace)
       throws IOException {
    File out = new File(outputDirectory, name);
    if (!replace && out.exists()) 
        return out;
    // Step 1:
    InputStream resource = this.getClass().getResourceAsStream(name);
    if (resource == null)
       throw new FileNotFoundException(name + " (resource not found)");
    // Step 2 and automatic step 4
    try(InputStream in = resource;
        OutputStream writer = new BufferedOutputStream(
            new FileOutputStream(out))) {
         // Step 3
         byte[] buffer = new byte[1024 * 4];
         int length;
         while((length = in.read(buffer)) >= 0) {
             writer.write(buffer, 0, length);
         }
     }
     return out;
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-04-25T01:32:55.157

jar 只是一个 zip 文件。解压缩它（使用您喜欢的任何方法）并正常复制文件。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-04-25T01:34:39.383

```
${JAVA_HOME}/bin/jar -cvf /path/to.jar 
```

# sql - 如何编写查询，以便根据日期获取接下来 7 天的数据

> ID：10308223
> 
> 赞同：1
> 
> 时间：2012-04-25T01:29:27.190
> 
> 标签：sql, sql-server, sql-server-2008-r2

I have a Calendar from which I need to pick a date so when a date is picked, the query should show all the data for that date & also for the next 7 days.

我当前的查询如下，但它只显示所选日期的数据。

```
SELECT MailDate, Status, JobNo
FROM Table_1
WHERE MailDate=@MailDate 
```

这个你能帮我吗。我正在使用 SQL SERVER 2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T01:37:20.503

尝试这个：

SQL 服务器：

```
SELECT MailDate, Status, JobNo FROM Table_1 WHERE MailDate >= @MailDate AND MailDate < DATEADD(day,7,@MailDate) 
```

mysql：

```
SELECT MailDate, Status, JobNo FROM Table_1 WHERE MailDate >= @MailDate AND MailDate < DATE_ADD(@MailDate, INTERVAL 7 DAY) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T01:34:06.180

`Select MailDate, Status, JobNo FROM Table_1 WHERE MailDate BETWEEN @MailDate AND @MailDate + 7`

可能工作也可能不工作，你没有告诉我们我们在谈论什么 sql 引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T01:37:45.697

您需要编写查询以反映当前日期和接下来的 7 天。

为此，您在数据库中的日期格式应该是 UNIX 时间戳。

```
SELECT MailDate, Status, JobNo FROM Table_1 WHERE MailDate = @MailDate AND MailDate < (time + 7 days) 
```

# extjs - extjs 是如何独立于浏览器的

> ID：10308227
> 
> 赞同：2
> 
> 时间：2012-04-25T01:30:02.927
> 
> 标签：extjs

我听说 EXTJS 是一个独立于浏览器的 JavaScript 库。extjs 如何让自己独立于浏览器？当我打开库类时，我看不到任何类似的代码：
if (IE)//do this; else if (FF) // 做其他事情；

我对 extjs 独立于浏览器的理解是否正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T08:46:06.420

除了 sha 的观点，我知道 ExtJS 对浏览器功能使用条件检查，并选择是否使用图像或 css 之类的东西来获得特定的视觉效果。

这方面的两个例子是它设法通过图像在 IE6 中的小部件上生成圆角，但在任何支持它的东西中，它将在 CSS 中使用“border-radius”。

小部件中的渐变也是如此，它在旧浏览器中呈现为图像，但在支持的情况下使用 CSS3 渐变。

作为一项规则，据我所知，ExtJS 使用“功能检测”来确定您当前的浏览器支持什么并做出适当的响应。另一个例子是它的图表类，如果支持，它会呈现为 SVG，或者在旧浏览器上呈现为 VML。

ExtJS 中有一些类可以用来执行特征检测，如果您希望在内置操作之外执行任何特定操作。我想它会在后台使用这些来决定渲染什么。

That aside, it should be noted that every now and again, you can notice odd discrepancies between browser versions, usually annoying little visual effects, like a scrollbar being present in one browser an not in another, this could however just be a symptom of other code, but I know we've seen a few little quirks from time to time when testing accross IE8, IE9 and Chrome for example.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T01:35:47.103

它独立于浏览器。据我所知，他们对不同的浏览器有一些不同的 CSS 定义。如果您想查看 JS 代码是否有任何差异，您将不得不更深入地查看 - 可能在某些 ExtJs 核心文件中。

到目前为止，我们一直在 IE、FF、Chrome、Safari、Mobile Safari 等上使用它。

# google-app-engine - 迁移到 HRD“此应用程序无权访问该 blob”

> ID：10308229
> 
> 赞同：0
> 
> 时间：2012-04-25T01:30:18.547
> 
> 标签：google-app-engine, google-cloud-datastore

我刚刚迁移到 HRD，现在它告诉我我无法访问自己的 blob...

```
Uncaught exception from servlet
java.lang.SecurityException: This application does not have access to that blob.
at com.google.appengine.api.blobstore.BlobstoreServiceImpl.fetchData(BlobstoreServiceImpl.java:200)
at com.droidastic.telljokes.server.servlet.ServeBlobsServlet.checkBlobKeyExists(ServeBlobsServlet.java:100)
at com.droidastic.telljokes.server.servlet.ServeBlobsServlet.doGet(ServeBlobsServlet.java:64) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:51:37.163

当我迁移到 HRD 之前，这种情况发生在我身上。我将密钥作为字符串存储在数据存储中，当我迁移时，那些未重写的字符串密钥。这是一场噩梦。

无论如何，您的 blobstore 密钥可能没有被重写以指向 HRD 中新应用程序中的新密钥。这可能是因为您将它们存储为字符串或其他与 Java 中的 BlobstoreKey 等效的东西。

# jquery - jQuery 没有关注正确的 DOM 元素

> ID：10308232
> 
> 赞同：1
> 
> 时间：2012-04-25T01:30:37.617
> 
> 标签：jquery

我设置了 3 个按钮，每当单击选项卡时，第三个按钮应该是焦点，而不是行中的下一个按钮，即第一个按钮。出于某种原因，我无法让以下代码工作。关于为什么它不起作用的任何想法？

```
$("#updater").keyup(function(event) {
    var keyCode = event.keyCode || event.which;
    if(keyCode === 9) {
        $("#shareButton").focus();
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T01:32:17.527

尝试返回`false`以防止默认操作

```
$("#updater").keyup(function(event) {
    var keyCode = event.keyCode || event.which;
    if(keyCode === 9) {
        $("#shareButton").focus();
        return false;  // <- add this
    }
}); 
```

或者你也可以做[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)而不是`return false;`

编辑：

好的尝试更改`keyup`为`keydown`

## [**演示**](http://jsfiddle.net/UDrWX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T01:58:21.913

我还没有测试，但我认为这应该工作。

```
 $("#updater").bind("keydown",function(event) {
     if (event.which == 9) {
      e.preventDefault();
       $("#shareButton").focus();
       }
    }); 
```

# iphone - 计算距另一个坐标一定距离的位置坐标

> ID：10308242
> 
> 赞同：1
> 
> 时间：2012-04-25T01:31:28.097
> 
> 标签：iphone, mkmapview, mapkit, cllocation

我有一个`CLLoctionCoordinate2D`，我想弄清楚离它给定距离的点。例如，让我们使用 100 英里。所以我想计算它的北、南、东和西 100 英里的点。

东方和西方很容易。我将两个坐标都转换为`MKMapPoints`并使用了`distanceInMeters`* `MKMapPointsPerMeterAtLatitude(latitude)`。这适用于东方和西方，因为纬度是恒定的。

但是，这不适用于北方和南方。在北方，它低估了，在南方，它低估了（因为`MKMapPointsPerMeterAtLatitude`随着你的移动而变化）。我如何计算南北的这些点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T04:53:37.270

每纬度有60海里。这也适用于经度，但仅限于赤道。要计算以海里为单位的经度距离，请乘以经度度数 * 60nm * cos（以弧度为单位的纬度）的距离。

以纬度而不是 MKMapPoints 计算新点（以北 100 英里，以南 100 英里等），然后将纬度/经度（CLLocationCoordinate2D？）点转换为 MKMapPoints。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T22:57:36.767

纬度线始终是一个恒定的角度，从地球的核心测量，这有点像它们的点。所以你需要做的是计算它们之间的距离，然后用它来获得南北 100 英里，然后得到地图点。地球表面距离的公式将在某处在线，可能以米或公里为单位。

# c# - 如何使用 Structuremap 创建 Singleton WCF 代理

> ID：10308243
> 
> 赞同：3
> 
> 时间：2012-04-25T01:31:38.350
> 
> 标签：c#, wcf, dependency-injection, structuremap

> 在 WCF 中，创建代理是一项繁重的操作，因此如果您遇到性能下降的问题，您绝对应该查看该区域。解决此问题的可能解决方案之一是在应用程序线程中重用代理，实现单例或池

来自[Javi 关于使用 Castle 创建 WCF 代理作为单例的博客](http://javiercrespoalvez.com/2008/09/singleton-wcf-proxy.html)。有人可以提供使用 Structuremap 的实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:44:56.313

这对于 StructureMap 来说非常简单，即使您需要进行一些测试，它也应该可以工作：

```
ObjectFactory.Configure(
            x =>
            {
                x.For<GetFilesService.Service1Client>().HybridHttpOrThreadLocalScoped().Use(ctx =>
                    {
                        // Setup logic goes here
                        return new GetFilesService.Service1Client("NetTcpBinding_IService1", "net.tcp://localhost:8089/test");
                    });
            }
        ); 
```

这里的秘诀是使用 Thread Local scope ( `HybridHttpOrThreadLocalScoped`)

然后解决：

```
var client = ObjectFactory.GetInstance<GetFilesService.Service1Client>(); 
```

# iphone - 按字母顺序对类实例进行排序

> ID：10308255
> 
> 赞同：0
> 
> 时间：2012-04-25T01:33:08.977
> 
> 标签：iphone, objective-c, xcode

我有这个代码，它适用于数字（距离），它允许我按最近到最远排序。但是我想做类似的事情，而是按字母顺序排序。所以我需要按字母顺序对 self.names 进行排序。另外，我想最终按字母顺序对 self.names 进行排序，如果您有相同的名称，则按距离对它们进行排序。这可能吗？

```
- (NSComparisonResult)sortByDistFromVor:(radiostations *)anObject
{

    if ([self.distFromVor doubleValue] < [anObject.distFromVor doubleValue]) {
        return NSOrderedAscending;
    } else if ([self.distFromVor doubleValue] > [anObject.distFromVor doubleValue]) {
        return NSOrderedDescending;
    }
    return NSOrderedSame;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:06:55.137

String 实现了一个比较，所以 radiostations 类（它的名字应该按照惯例大写）可以像这样实现它的名字比较：

```
- (NSComparisonResult)sortByName:(radiostations *)anObject {

    return [self.name compare:anObject.name];
} 
```

并按照您的描述进行二次排序：

```
- (NSComparisonResult)sortByNameThenDistance:(radiostations *)anObject {

    NSComparisonResult result = [self sortByName:anObject];
    return (result == NSOrderedSame)? [self sortByDistFromVor:anObject] : result;
} 
```

# c - 如何转换指针的类型

> ID：10308259
> 
> 赞同：-1
> 
> 时间：2012-04-25T01:33:48.487
> 
> 标签：c

我想转换指针'p'的类型。一开始，指针 p 的类型是 void。在为其分配了四个字节的内存后，我将指针类型转换为 'int'，但是，这不起作用。也许这句话`p=(int *)p`不起作用。
请告诉我原因并解决问题。谢谢。
编码：

```
#include<stdio.h>
#include <stdlib.h>

 int main(void)
{
   void *p;
   p=malloc(sizeof(int));
   if(p == NULL)
    {
        perror("fail to malloc");
        exit(1);
    }
    p=(int *)p;
        *p=100;
    printf("the value is : %d\n",*p);

    return 0;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T01:36:55.677

您可以更轻松地将返回的 void 指针直接转换`malloc`为`int*`

```
#include<stdio.h>
#include <stdlib.h>

int main(void)
{
   int *p;
   p = malloc(sizeof(int));
   if(p == NULL)
    {
        perror("fail to malloc");
        exit(1);
    }

    *p=100;
    printf("the value is : %d\n",*p);

    return 0;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T01:37:37.577

声明变量后，您无法更改变量的类型。对于您的要求，您需要声明一个单独`int*`的变量并`p`使用类型转换将变量分配给它：

```
int *i = (int *)p; 
*i = 100; 
printf("the value is : %d\n", *i); 
```

或者，简单地声明`p`为 a`int*`开头，然后对返回的指针进行类型`malloc()`转换，就像@GWW 显示的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T01:38:38.137

您不能更改变量类型，可以进行类型转换，但这只是暂时的。你想要的会是这样的`*(int*)p = 100; printf("the value is : %d\n", *(int*)p);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T01:41:56.470

你不能。但是您可以创建一个指向 int 的新指针并指向该位置，例如：

```
void *p;
p= malloc...
int *pi;
pi= p;
*pi= 25; 
```

# php - PHP中没有守护程序的WebSocket服务器？

> ID：10308262
> 
> 赞同：6
> 
> 时间：2012-04-25T01:34:25.817
> 
> 标签：php, websocket, shared-hosting

我会尽量让我在这里的第一篇文章尽可能有趣。

最近我对在共享托管服务器上处理 WebSocket 请求的可行性很感兴趣。

请不要告诉我“升级你的计划”。至少在 VPS 上，所有这些都是微不足道的。我意识到这一点。

众所周知，共享主机将...

*   如果他们看到一个守护进程，就杀死它
*   阻止使用服务器套接字
*   拒绝您的外壳访问
*   保持 apache 不受限制（无模块安装）

这些限制完全消除了 phpwebsocket、python。需要一个伪装成网页的无守护程序解决方案。

PHP 是我最喜欢的服务器端语言，我制作了一个伪装成网页的 PHP websocket 网关。

到目前为止，我已经成功地为握手和流输出（使用输出缓冲）发送了正确的标头，但我仍然不知道如何在初始请求后继续读取数据。

简而言之，即使在 PHP 脚本启动后，我也想继续从客户端接收数据。我曾尝试阅读 php://input 伪文件，但在 GET 结束后我似乎无法再读取它。是否有任何设置或黑客可以允许这样做？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T17:51:38.370

简短版本：您尝试做的事情根本不可能。

长版本：你能得到的最好的是一个单向的通信通道，它在你的浏览器中看起来像一个 websocket 连接，但它只能在一个方向上工作。从服务器到浏览器。另一个方向根本行不通，因为网络服务器不知道您正在尝试使用与 HTTP 不同的协议，并且无法告诉它。至少在您刚刚概述的情况下不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:20:23.677

您的问题是 Apache 本身。一旦 Apache 读取了第一个 HTTP 请求（websocket 握手），它将继续从 TCP 连接中读取任何额外的 HTTP 请求。因此，在 TCP 连接上发送的任何新数据将永远不会传递到您的脚本。这是必要的，因为 HTTP/1.1 协议默认支持 Keep-Alive，这意味着在一个 TCP 连接上完成多个请求/响应周期。浏览器不会为每个请求打开 HTTP 连接（这是 HTTP/1.0 中的默认设置）。您无法更改此行为。要实现 websocket 服务器，您需要设置自己的套接字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T07:12:04.657

WebSocket 握手完成后，它的工作方式与常规套接字非常相似。Apache 没有理由允许没有标头的单向通信。

# php - What's the easiest way to re-populate a form when the page is reloaded?

> ID：10308266
> 
> 赞同：1
> 
> 时间：2012-04-25T01:35:11.217
> 
> 标签：php, jquery, input

What's the easiest way to re-populate a form when the page is reloaded? Is there a script in jquery, php, or javascript/ajax that would achieve this?

If the submitted failed, I want the user to go back. My problem is all my CSS hovers and background-changes don't work via keyup.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T01:37:23.957

If you mean reloaded before it is submitted you will need to use JavaScript to capture and store the values in a cookie, or to the server using Ajax, and then refill the form on page load.

If you mean after it is submitted then will need to use PHP to re-populate the form with the submitted form values:

```
<input type="text" name="somefield" value="<?php if (isset($_POST['somefield'])) echo htmlspecialchars($_POST['somefield'], ENT_HTML5, 'utf-8'); ?>"> 
```

# ios - 如何在 phonegap 中检查或检索备份的本地存储

> ID：10308269
> 
> 赞同：0
> 
> 时间：2012-04-25T01:35:48.267
> 
> 标签：ios, cordova, backbone.js, local-storage, requirejs

如何在 iOS 中访问和检索由 phonegap 创建的备份本地存储？在运行应用程序时，我也在查看 xcode 调试器，每次我关闭它记录的应用程序，`local storage backed up`但我不知道如何访问它。

还有本地存储的特点是什么？如果我完全关闭应用程序，它是否可用？

我正在做的是存储用户使用的 url 列表当然用户向应用程序添加一个 url 现在我想要存储它，即使我关闭应用程序，仍然应该显示 url 列表。可能吗？

# jquery - 在 iPhone 上使用带有高清背景图像的 jQuery 页面转换

> ID：10308276
> 
> 赞同：0
> 
> 时间：2012-04-25T01:37:21.940
> 
> 标签：jquery, iphone, background, transition, retina-display

我真的需要一些帮助。我正在为 iPhone 制作一个“本地外观”的 Web 应用程序，并且我正在尝试使用 jQuery 在页面之间进行转换。唯一的问题是每个页面都有一个 .PNG 图像作为其背景，该图像是 iphone 屏幕大小的两倍（因此 webkit 可以自动将其缩小以使图像高清用于 Retina 显示器）。虽然这一切都很好，但 jQuery 在转换页面之前设法将背景图像的大小加倍。有人可以帮我保持图像大小不变，这样过渡看起来不奇怪吗？

提前致谢！

```
<!DOCTYPE html>

<html>

<head>

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="viewport" content="user-scalable=no, width=device-width, height=device-         height," />
 <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-     1.1.0.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

<style type="text/css">

body.portrait

#home_bg{

position:absolute;
top:0px;
left:0px;
height:920px;
width:640px;
-webkit-background-size: 100% 100%;
background-image:url('app-design-elements/AppHome.png');

}

body.landscape

#home_bg{

position:absolute;
top:0px;
left:0px;
height:600px;
width:960px;
background-image:url('app-design-elements/AppHomeL.png');

}

body.portrait

#courses_content{

position:absolute;
top:0px;
left:0px;
height:920px;
width:640px;
background-image:url('app-design-elements/TextBG.png');
}

body.landscape

#courses_content{

position:absolute;
top:0px;
left:0px;
height:600px;
width:960px;
background-image:url('app-design-elements/TextBGL.png');
}

body.portrait

#gradhaticon{
position:absolute;
z-index:1;
width:143px;
height:131px;
top:500px;
left:500px;
background-image:url('app-design-elements/Gradhat.png');
}

</style>
 <script type="text/javascript">

document.ontouchmove = function(event){
event.preventDefault();

}

</script>

<script type="application/x-javascript">

window.addEventListener('load', setOrientation, false); 
window.addEventListener('orientationchange', setOrientation, false);
function setOrientation() { 
var orient = Math.abs(window.orientation) === 90 ? 'landscape' : 'portrait'; 
var cl = document.body.className; 
cl = cl.replace(/portrait|landscape/, orient); 
document.body.className = cl; 
}

</script>

</head>

<body class="portrait">
<div data-role="page" id="home">
<div id="home_bg"></div>
<div data-role="content">
<div id="gradhaticon" height="131px" width="143px"><a href="#courses" data-    transition="fade"><img src="app-design-elements/Gradhat.png" width="143px" height="131px"     position="absolute" z-index="1" top="100px" left="50px" /></a></div>
</div>
</div>
<div data-role="page" id="courses">
<div data-role="content">
<div id="courses_content">
<p>Hello World!</p>
<a href="#home" data-transition="fade" data-direction="reverse">BACK!!!</a></div>
</div>
</div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T01:56:11.940

尝试使用媒体查询为您的高分辨率显示器指定“@2x”图像。

[http://pugetworks.com/blog/2011/04/css-media-queries-for-targeting-different-mobile-devices/](http://pugetworks.com/blog/2011/04/css-media-queries-for-targeting-different-mobile-devices/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T15:53:32.483

尝试在 image-url 之后添加背景大小，例如：

```
background-image:url('app-design-elements/AppHome.png');
-webkit-background-size: 100% 100%; 
```

# visual-studio - TeamCity Visual Studio 插件是否支持 VS 11？

> ID：10308280
> 
> 赞同：0
> 
> 时间：2012-04-25T01:37:38.410
> 
> 标签：visual-studio, teamcity, add-in

TeamCity Visual Studio 插件是否支持 VS 11？如果没有，是否有任何支持 VS 11 的 TeamCity Addin 测试版或评估版？如果不幸的是这也不存在，正式版什么时候出来？

我在 TeamCity 的论坛上问过这个问题，但没有人回答。:(希望这里的任何人都知道答案。

谢谢，内特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:25:49.690

TeamCity 插件目前不会安装到 VS 11。当我尝试将插件与 VS11 一起使用时，它说它不兼容。截至目前，我还无法修改插件以与 VS11 一起使用。我在他们的网站上也找不到任何内容说明何时支持。我认为他们还没有宣布任何事情。

# android - 使用android库时所有R类的java.lang.NoClassDefFoundError

> ID：10308283
> 
> 赞同：5
> 
> 时间：2012-04-25T01:38:04.647
> 
> 标签：android, noclassdeffounderror

我从android库下载了一个源代码，编译它并得到一个.jar文件，我包含在我的项目中并尝试使用它，但我总是得到一个java.lang.NoClassDefFoundError，我注意到在jar文件中没有 R$XXX 文件，我读了这篇文章：[Android Library Import delete R](https://stackoverflow.com/questions/8310058/android-library-import-delete-r)并尝试了解决方案，但没有一个对我有用。

我制作了自己的简单库，并且看到 R 文件不包含在 jar 中，我必须使用 winrar 手动添加 .class 文件，但我想我缺少一些简单的东西，我正在使用带有 ADT 的 eclipse。

谢谢大家

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T02:10:42.393

如果您正在创建 jar 文件，则不应在 jar 文件中包含 r.java,manifeast 文件。

因为 jar 在编译期间不会被编译，并且在编译期间不会创建任何静态整数。

在 android 中，我们有[Android LIbrary](http://developer.android.com/guide/developing/projects/projects-eclipse.html)，它类似于 android 项目，但可以包含在其他项目中。

如果仍然需要 jar 文件，那么只需将类文件保存在 jar 中，包括应用程序中包含的所有资源，并且从 java 文件中，您可以使用以下代码在运行时引用资源。

您必须在代码中使用 getResourcesIdByName(getPackageName(), "drawable", "icon") 而不是 R.drawable.icon 。下面是 getResourceIdByName: 的代码：

```
public int getResourseIdByName(String packageName, String className, String name) {
            int id = 0;
        try {
            for (int i = 0; i < Class.forName(packageName + ".R").getClasses().length; i++) {
                if(Class.forName(packageName + ".R").getClasses()[i].getName().split("\\$")[1].equals(className)) {
                    if(Class.forName(packageName + ".R").getClasses()[i] != null)
                        id = Class.forName(packageName + ".R").getClasses()[i].getField(name).getInt(Class.forName(packageName + ".R").getClasses()[i]);
                    break;
                }
            }
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (SecurityException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (NoSuchFieldException e) {
            e.printStackTrace();
        }
        return id;
    } 
```

# sql - 用命名实例伪造默认实例？

> ID：10308285
> 
> 赞同：3
> 
> 时间：2012-04-25T01:38:13.977
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2008-r2

SQL Server（2008 或更新版本）是否有办法伪造与命名实例的连接，使其看起来像应用程序的默认实例？

我有一个应用程序，它有许多硬编码到默认实例的连接字符串，我想在命名实例上运行它。

提前感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T01:56:22.107

您可以使用别名来为可以指向不同实例的客户端创建一个通用名称：

[创建或删除供客户端使用的服务器别名](http://msdn.microsoft.com/en-us/library/ms190445%28v=sql.105%29.aspx)

# objective-c - Sparrow/Twitter 类似 UIt 选项卡栏

> ID：10308292
> 
> 赞同：1
> 
> 时间：2012-04-25T01:40:39.277
> 
> 标签：objective-c, cocoa

是否有任何可可/obj-c 库或示例来实现 Mac 客户端的 Sparrow 或 Twitter 等侧栏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T18:43:32.230

我最近编写了类似的代码，称为`ITSidebar`.

你可以在 Github 上查看：
[https ://github.com/iluuu1994/ITSidebar](https://github.com/iluuu1994/ITSidebar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T01:55:29.933

Mac 版 Twitter 使用基于 Core Animation的[Twii 框架。](https://github.com/twitter/twui)

# css - Firefox 滚动条，但不在 Chrome 上

> ID：10308302
> 
> 赞同：0
> 
> 时间：2012-04-25T01:42:49.387
> 
> 标签：css, wordpress, firefox, google-chrome

我在这个网站上找不到 CSS 错误的地方。在 Firefox 上，它显示向右滚动，但在 Chrome 上，它看起来不错。我在想`overflow:hidden;`，但我似乎找不到把它放在哪里。

这是网站：[http ://www.llmedia.co/](http://www.llmedia.co/)

欣赏它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T01:45:19.180

我在 Chrome 中看到一个滚动条，所以我猜它与您的视口大小有关。尝试在 Chrome 中缩小浏览器窗口，看看会发生什么。使用时要小心`overflow:hidden;`。无论出于何种原因，您都可能向没有大视口的用户隐藏内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:42:38.577

问题出在您的页脚中。您的整个页面宽度为 960 像素。但页脚 ul 宽度为 1100 像素。因此，在小屏幕中，您的网站右侧会有一个滚动条。同样的结果也会出现在 Firefox 浏览器中。所以将页脚宽度减小到 960px，你的滚动条就会消失！

```
#footer ul { width: 960px; } 
```

# java - 最终变量是否需要在声明它们后立即被赋予一个值

> ID：10308309
> 
> 赞同：2
> 
> 时间：2012-04-25T01:43:57.473
> 
> 标签：java, variables, instantiation, final

是否可以为程序中其他任何地方的最终变量赋值？还是必须在创建时为它们分配一个值？

```
class TestClass() {
//this won't compile but is it possible to assign str a value anywhere else in the program?
public static final String str;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T01:45:49.383

您需要在声明时分配一个值 - 如果它不是静态的，则在构造函数中分配，如果是，则在静态初始化块中。一旦设置了值，就无法修改。

像这样做：

```
public class FinalTest {
    private static final String CONSTANT;

    private final String value;

    static {
        CONSTANT = "Hello";
    }

    public static void main(String [] args) {
        FinalTest ft = ((args.length > 0) ? new FinalTest(args[0]) : new FinalTest(CONSTANT));
        System.out.println(ft);
    }

    public FinalTest(String value) {
        this.value = value;
    }

    public String toString() { return this.value; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T01:59:20.267

# 局部变量

一个`final` **变量****在被访问之前**需要被赋值一次。这意味着如果它从未被赋值并且从未被访问过，编译器不会抱怨。

```
void foo() {
    final int a; // Never assigned, but never accessed either, so no problem
    final int b = 7;

    System.out.println("b is " + b);

    // System.out.println("a is " + a);
    // Uncommenting the above line would cause a compile error
} 
```

# 静态字段

类似的逻辑适用于`final` **静态字段**，除了假定它们将在某个时间点被访问，因此它们必须在定义行或静态初始化块中进行初始化。

以下是[Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)中关于静态初始化块的内容：

> 当初始化值可用并且初始化可以放在一行时，这很有效。但是，这种形式的初始化由于其简单性而具有局限性。如果初始化需要一些逻辑（例如，错误处理或填充复杂数组的 for 循环），简单的赋值是不够的。实例变量可以在构造函数中初始化，其中可以使用错误处理或其他逻辑。为了为类变量提供相同的功能，Java 编程语言包括静态初始化块。
> 
> 注意：没有必要在类定义的开头声明字段，尽管这是最常见的做法。只需要在使用它们之前声明和初始化它们。

# 实例字段

当我们这样做时，一个`final` **实例（非静态）字段必须****在实例初始化完成时**被赋值一次。这意味着您可以在三个地方初始化一个（但您必须选择一个）：

### 1.定义线：

```
// For when you know the answer
class Foo {
    final int theAnswer = 42;
} 
```

### 2.构造函数：

```
// For when you need to have the answer passed in
class Foo {
    final int theAnswer;

    Foo(int answer) {
        theAnswer = answer;
    }
}

// Or for when you need to do some computation
class Bar {
    static final int ANSWER_COUNT = 10;
    final int[] answers;

    Foo() {
        answers = new int[ANSWER_COUNT];
        for (int i = 0; i < ANSWER_COUNT; i++) {
            answers[i] = i;
        }
    } 
```

### 3.初始化块：

```
// For when you need to do some computation and have many constructors
class Bar {
    static final int ANSWER_COUNT = 10;
    final int[] answers;

    {
        answers = new int[ANSWER_COUNT];
        for (int i = 0; i < ANSWER_COUNT; i++) {
            answers[i] = i;
        }
    }

    // I have many constructors and don't want to copy-paste 
    // the initialization logic above to all of them
    Bar() { ... }
    Bar(int i) { ... }
    Bar(String blah) { ... }
} 
```

在[教程的同一页面中](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)，关于初始化块：

> Java 编译器将初始化程序块复制到每个构造函数中。因此，这种方法可用于在多个构造函数之间共享代码块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T01:47:01.460

在您发布的代码中，该字段`static`可以从静态初始化块中获得一个值：

```
static {
    str = "my string";
} 
```

对于非`static`字段，它们可以在构造函数中初始化，也可以在实例初始化块中初始化：

```
class TestClass {
    private final String str;

    {
        str = "my string";
    }

    TestClass() {

    }
} 
```

# sharepoint - 处理 SharePoint 中的 microsoft.sharepoint.dll 版本问题

> ID：10308310
> 
> 赞同：0
> 
> 时间：2012-04-25T01:43:59.767
> 
> 标签：sharepoint

在我的应用程序中，我需要将日志写入 SharePoint，我们知道，在 SharePoint 2010 中，使用`WriteTrace()`和`WriteMethod()`方法很容易写入日志，但在 SharePoint 2007 中，我们没有直接写入日志的方法，但是我在[这里](http://msdn.microsoft.com/en-us/library/aa979522%28v=office.12%29.aspx)找到了有用的文章。

所以这是问题所在，如您所知，`WriteTrace()`和`WriteMethod()`方法在 SharePoint 2007 中无法识别，当我们编译代码时，它会抛出错误。但我不想将代码分成两部分，一个用于 2010 年，另一个用于 2007 年。有什么好的解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T01:54:31.410

您将需要分离代码。但是，作为一个好的设计，您可以只将日志跟踪代码重构到它自己的程序集中，然后在运行时使用`Factory`or`Abstract Factory`设计模式加载该程序集。

# php - PHP - date() 与 date.timezone / date_default_timezone_set()

> ID：10308315
> 
> 赞同：6
> 
> 时间：2012-04-25T01:45:06.243
> 
> 标签：php, date, warnings, php-ini

我刚买了一台新电脑，我一直在设置 PHP/MySQL/数据库等...我想我就差不多了，除了它抛出了这个曲线球。我的登录脚本工作正常，但现在它吐出以下警告（这会弄乱 JSON）。

> **警告**：date() [function.date]：依赖系统的时区设置是不安全的。您 *需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。**我们在第47**行 的**.../php/login.php**中为 'EST/10.0/no DST' 选择了 'Antarctica/Macquarie'

 **我的代码显然使用`date()`并在实时版本和旧机器上运行。我收到以下两行代码的两个警告：

```
$date = date("ymd");

$this_year = date("y"); 
```

我的研究（参见[此处](http://php.net/manual/en/datetime.configuration.php)）表明这些函数的行为取决于 php.ini。

那么我应该在新机器上更改 php.ini，还是使用某种已弃用的方法，我应该`date()`完全放弃吗？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-25T01:48:00.257

如果您使用[`date_default_timezone_set()`](http://us2.php.net/manual/en/function.date-default-timezone-set.php). 只需将其设置为您将在其中工作的时区即可。

像这样的东西应该放在配置文件或您正在处理日期的页面上（如果它只有一页）：

```
date_default_timezone_set('America/Los_Angeles'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T01:48:22.330

这也不例外，这可能是现在弹出的警告，因为您在新机器上的错误报告设置与旧机器不同。

我建议遵循警告中的建议，并使用[`date_default_timezone_set()`](http://php.net/manual/en/function.date-default-timezone-set.php)在您需要的脚本中设置时区。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T01:50:12.190

首先，您虽然可能知道，但这解决了问题。

```
date_default_timezone_set('Your/Timezone'); 
```

如果要在 php.ini 中配置，在下面修改

```
[Date]
; ...
; ...
date.timezone = Your/Timezone 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-12T19:27:06.317

您不必更改 php.ini。

但是，如果您有一个将用于大多数 php 文件的时区，则在 php.ini 中添加以下行应该可以解决问题。

```
date.timezone = "Your/Timezone" 
```

就我而言，我将以下行添加到 php.ini。就个人而言，我更喜欢将我们所有的服务器保持在 UTC 时区。

```
date.timezone = "UTC" 
```**

# c++ - 声明双 * 数组时损坏的堆错误

> ID：10308317
> 
> 赞同：1
> 
> 时间：2012-04-25T01:45:12.780
> 
> 标签：c++, matrix, double, heap-corruption

我目前正在寻找两个矩阵的平方距离之和，数据保存在 double* 数组中。它们中的第一个保持不变，而另一个通过使用返回两个索引之间的 32x32 数组的函数循环。

但是，当我尝试在“e”的第一次递增之后调用“getTile(d,e)”时，它会引发堆损坏异常：

```
double* Matrix::ssd(int i, int j, Matrix& rhs){
double sum = 0, val = 0; int g = 0, h=0;
double* bestMatch = new double[32*32]; double* sameTile = new double[32*32];    double* changeTile = new double[32*32]; 

for(int x = i-32; x <i; x++){
    for(int y = j-32; y <j; y++){
        sameTile[g*32+h] = data[x*N+y];
        h++;
    }g++; h = 0;
}

system("pause");

for(int d = 32; d<=512; d+=32){
    for(int e = 32; e<=512; e+=32){

        changeTile = rhs.getTile(d,e);

        for(int out = 0; out < 32; out++){
            for(int in = 0; in < 32; in++){
                val = sameTile[out*32+in] - changeTile[out*32+in];
                val = val*val;
                sum = sum + val;

            }       
        }
        cout << sum << endl;

        sum = 0; val = 0;

        system("pause");
    }   
} 
```

getTile(int i, int j) 函数：

```
double* Matrix::getTile(int i, int j){
double* tile = new double[32*32]; int g = 0; int h = 0;
for(int x=i-32; x<i; x++){
    for(int y=j-32; y<j; y++){
        tile[g*32+h] = data[x*N+y];
        h++;
    }
    cout << endl;
    g++;
}
return tile;
} 
```

我相信在 changeTile double* 中分配内存时会发生错误？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T02:14:19.840

您的代码中有很多问题都与不正确地访问数组元素有关。

在第一个循环中：

```
 sameTile[g*32+h] = data[x*N+y]; 
```

至少使数据数组下溢。考虑如果 i=0、j=0 和 N=512，那么您尝试在循环的第一遍中访问 data[-16416]。

第二个问题是 getTile() 方法，您忘记在内部循环结束时重置`h`为 0（就像您在 ssd() 方法中所做的那样）。这会导致 tile[] 溢出

我还会仔细检查该行：

```
 changeTile = rhs.getTile(d, e); 
```

和方法 getTile() 确保在 data[] 上不会发生数组溢出。

总的来说，我建议尽可能使用适当的 std:: 容器。正确使用它们应该可以完全消除此类错误。如果您确实需要使用原始指针/数组，那么除了在需要的地方检查边界之外，您还需要确保对它们的所有索引都尽可能清晰。

# objective-c - 为什么在替换在 Interface Builder 中创建的子视图与在代码中创建的子视图时会出现不同的行为？

> ID：10308320
> 
> 赞同：2
> 
> 时间：2012-04-25T01:45:27.823
> 
> 标签：objective-c, macos, cocoa, webview

我在其中一个可可`WebView`作为`NSSplitPane`拆分窗格的自定义视图之一的子视图。这用作某些 HTML 内容的预览。更新预览时平滑过渡

1.  我`NSImageView`从`WebView`
2.  替换`WebView`为`NSImageView`
3.  将新的 html 加载到`WebView`
4.  html完成加载后替换为`NSImageView`更新的`WebView`

这是代码的要点是：

从标题

```
NSImageView *previewImageView;
NSString *content;
@property (strong) IBOutlet NSView *previewContainer;
@property (strong) IBOutlet WebView *previewWebView; 
```

从班级

```
- (void)updatePreview
{
    previewImageView = [self imageViewFromWebView:previewWebView];
    [[previewContainer animator] replaceSubview:previewWebView
        with:previewImageView];
    [[previewWebView mainFrame] loadHTMLString:content baseURL:nil];
}

- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame
{
    [[previewContainer animator] replaceSubview:previewImageView
        with:previewWebView];
} 
```

`WebView`如果在文件中定义`xib`了引用出口设置为`previewWebView`和帧加载委托集，则此代码无法正常工作。Web 视图最初显示正确，可以交换为图像视图，但是当交换回来时不会显示。

如果我改为定义`WebView`in 代码

```
// inside of viewDidAppear
NSRect frame = [previewContainer frame];
NSRect webViewFrame = NSMakeRect(0, 0, frame.size.width, frame.size.height);
previewWebView = [[WebView alloc] initWithFrame:webViewFrame];
[previewWebView setUIDelegate:self];
[previewWebView setFrameLoadDelegate:self];
[previewWebView setAutoresizingMask:(NSViewWidthSizable | NSViewHeightSizable)];
[previewContainer addSubview:previewWebView]; 
```

而不是界面生成器，交换代码按预期工作。关于我如何定义`WebView`使其工作的代码但在界面构建器中定义时没有什么不同的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:04:06.190

在以编程方式创建对象时，Interface Builder 很有可能`WebView`使用与默认设置不同的一些设置来归档对象。`WebView`

您可能应该尝试一些事情：

```
[previewWebview setHostWindow:yourWindow]; 
```

这会将`WebView`与您的窗口相关联。如果您`WebView`从窗口中移除 ，这是必需的，否则`WebView`将停止运行。这`WebView`将保留您的窗口，因此您应确保`nil`在关闭窗口之前将主机窗口设置为。

```
[previewWebView setShouldUpdateWhileOffscreen:YES]; 
```

这将确保 Web 视图在屏幕外时实际加载内容。

```
[previewWebView setShouldCloseWithWindow:NO]; 
```

这将防止`WebView`其主机窗口关闭时“关闭”。如果您不这样做，`WebView`则将调用其`close`方法，该方法实质上将其关闭，清除所有内容和缓存并防止再次使用它。我很确定这是您`WebView`在 Interface Builder 中实例化时的默认设置，因此您要确保它不会发生。

如果您专门设置了主机窗口，您可能会发现不需要这样做。

`[previewWebView close]`请注意，如果您这样做，您将需要在实际关闭窗口时调用。

# database - 无法使用 jdbc 连接到数据库

> ID：10308321
> 
> 赞同：0
> 
> 时间：2012-04-25T01:45:31.490
> 
> 标签：database, jsp, servlets, login, connection

嗨，我对 jsp 和 servlet 很陌生，所以我很难理解为什么我不能做一个简单的查询。该代码用于登录页面，其中用户 servlet 查询用户发送的数据，然后将其与数据库匹配，然后当它找到匹配项时，它返回 login==true 并执行另一个查询以获取匹配的员工 ID 号使用用户名和密码

```
import java.sql.Connection;
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.sql.*;
import javax.servlet.*;
import java.io.*;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.sql.Driver;
import java.sql.DriverManager;
import javax.servlet.http.HttpSession;

public class Login extends HttpServlet {

    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException{
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        try {
            HttpSession session = request.getSession(); 
            Connection conn = null;
            PreparedStatement prepState = null;
            Statement state = null;
            ResultSet result = null;
            boolean login = false;
            String username = request.getParameter("username");
            String password = request.getParameter("password");                 
            String checkLogin = ("SELECT * FROM users WHERE username = ? AND password = ?");    

            try{

            Class.forName("com.mysql.jdbc.Driver");
            conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/matrix","","");

            prepState = conn.prepareStatement(checkLogin);     
            prepState.setString(1, username);
            prepState.setString(2, password);

            result = prepState.executeQuery();

            login = result.next();

            if(login){
                out.println("login");
                String id = result.getString(1);
                String getUser = ("SELECT empLastName, empFirstName FROM employees WHERE empID = ? ");
                prepState = conn.prepareStatement(getUser);
                prepState.setString(1, id);
                result = prepState.executeQuery();
                String first = result.getString(2);
                String last = result.getString(1);

                                    out.println("<html>");
                                    out.println(first + " " + last);
                                    out.println("</html>");
            }

            }catch(Exception e){      
                out.println("ERROR");
                  e.printStackTrace(System.err);
            }   
        }catch(Exception db){

        } finally {            
            out.close();
        }
    } 
```

这是我得到的错误

```
INFO: The start() method was called on component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/Matrix]] after start() had already been called. The second call will be ignored.
    java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1075)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3566)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3498)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:919)
        at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:4004)
        at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1284)
        at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2312)
        at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2122)
        at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:774)
        at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:49)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:409)
        at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:375)
        at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:289)
        at java.sql.DriverManager.getConnection(DriverManager.java:582)
        at java.sql.DriverManager.getConnection(DriverManager.java:185)
        at Login.processRequest(Login.java:57)
        at Login.doPost(Login.java:119)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:498)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:394)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T01:49:02.220

这个类在很多方面都是错误的：

1.  空捕获块。你永远不会知道是否有问题。
2.  在 servlet 中打开一个连接，而不是使用连接池。
3.  硬连线驱动程序类和连接 URL。
4.  没有用于连接数据库的凭据。
5.  一个班级什么都做。最好每个班级有一个责任。
6.  混合 UI（HTML 生成）和数据库访问。
7.  您不会关闭结果集、语句或连接。
8.  try 嵌套在另一个 try 中；我只推荐一个。

我现在累了。

我不清楚问题是什么。你收到错误了吗？如果是，您可以发布堆栈跟踪吗？如果没有，您观察到什么行为？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:59:02.410

尝试检查您的 MySQL 用户名和密码。MySQL 有默认用户名“root”

尝试将您的代码更改为此

```
Class.forName("com.mysql.jdbc.Driver");
conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/matrix","root",""); 
```

这意味着您连接到本地主机（同一台计算机）中的 MySQL 服务器，用户名“root”和密码空字符串“”（这是默认值）

# javascript - Knockoutjs observable boolean 返回奇怪的结果

> ID：10308325
> 
> 赞同：1
> 
> 时间：2012-04-25T01:46:53.920
> 
> 标签：javascript, knockout.js

在我的视图模型中，我定义了： `self.myAreasEditMode = ko.observable(false);`

在我的 html 中，我有：

```
<div>
  editing: <span data-bind="text: myAreasEditMode"></span><span data-bind="visible: myAreasEditMode">show me</span>
  <br />                  
  not editing (done): <span data-bind="text: (myAreasEditMode == false)"></span><span data-bind="visible: (myAreasEditMode == false)">show me</span>
</div> 
```

输出是：

```
editing: false
not editing (done)?: false 
```

淘汰赛是在操纵我的布尔值，还是真实性让我感到困惑？我不知道为什么`(myAreasEditMode == false)`返回假，`myAreasEditMode`实际上是假的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:01:13.987

因为`myAreasEdit`是一个函数，绑定`(myAresEdit == false)`是检查函数是否等于`false`（这是不正确的——一个函数！= false）而不是函数的值。

标记应该是：

`data-bind="text: (myAreasEditMode() == false)"`

# .net - 希望创建一个客户端应用程序 (WPF) 来对远程数据执行 CRUD 操作

> ID：10308327
> 
> 赞同：3
> 
> 时间：2012-04-25T01:47:13.467
> 
> 标签：.net, wpf, sql-server, wcf

我被交给了一个项目来开发一个我非常兴奋的应用程序。问题是我不完全确定如何实现一项特定要求。

该应用程序需要是客户端应用程序（所以我使用 WPF 来开发它）并且需要对远程服务器执行 CRUD 操作（因此其他人也可以访问此数据）。我坚持的主要障碍是，这个客户端应用程序不仅会从特定网络运行，而且核心用户之一也将在家中使用它。我不确定如何安全地将数据公开到互联网上。

我最初只使用 LINQ 2 SQL 开发应用程序，并想象我只需将端口转发到运行 SQL Server 的专用机器，但这可能是一个可怕的想法。做一些研究，看起来我*应该*使用 WCF 创建一个服务，然后在机器上运行它——并让 WPF 客户端应用程序使用它。

这感觉在这里有点额外的工作，特别是因为我正在使用这个项目来*学习*WPF。我什至还没有*研究*过WCF。我还有其他选择吗？我最初将 SQL Server 暴露在互联网上的想法*真的那么糟糕*吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:20:45.397

首先，我同意你应该避免将你的数据库暴露在互联网上......这就像把一个婴儿独自留在树林里过夜（有一些生物为了运动和利润而四处游荡）。

不过，您确实有一些选择。一方面，如果公司有网络管理员，您可能会考虑设置 VPN。这样，员工就可以在家中的防火墙内直接连接到 SQL Server。

如果做不到这一点，我认为带有 Linq-to-SQL 的 WCF 并不是一个糟糕的选择。我用这两个构建了一个应用程序，它们一起工作得很好——我将 Linq-to-SQL 表实体本身作为 WCF 数据契约。我会推荐的一件事是为您的 CRUD 操作选择一个简单的设计模式，并尽可能地坚持它——带有 Load、Find、InsertOrUpdate 和 Save 的存储库模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:04:02.333

> 我最初只是将 SQL Server 暴露在互联网上的概念真的那么糟糕吗？

是的。有[很多](https://serverfault.com/a/84558/95966) [警告](https://dba.stackexchange.com/q/11804/8409)，你根本[不应该](https://stackoverflow.com/q/425812/266143)（我想把那个句子中的每个单词都链接到另一个来源，但你明白我的意思）。

WCF 绝对是要走的路，因为它有[很多](http://msdn.microsoft.com/en-us/library/ms731925.aspx)[保护它](http://msdn.microsoft.com/en-us/library/ms732362.aspx)的选项，并且很容易[在 WPF 中使用](http://wcfguidanceforwpf.codeplex.com/)。

虽然公开数据库并直接访问它似乎是最简单的解决方案，但这几乎不是最好的解决方案。您将不得不学习一些新技术，但从长远来看，您会从中受益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T02:16:13.007

这个问题有很多不同的角度，但如果我理解你在问什么......

要解决您的远程用户问题：可以安全地将 SQL Server 配置为向 Internet 公开，以便软件即服务应用程序连接到该应用程序。或者，您可以让远程用户 VPN 进入 SQL 服务器所在的网络。

对于开发方法，我建议使用 MVVM。它与 WPF 配合得很好，并且允许您首先使用自己的自定义数据层来学习 WPF。然后，当您感到舒适时，您可以重构以使用 WCF 并交付高质量的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T09:56:12.597

为什么不使用 WCF 数据服务 - [http://msdn.microsoft.com/en-us/library/cc668772(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/cc668772(v=vs.103).aspx)。如果您需要它是安全的，那么请参阅此[http://msdn.microsoft.com/en-us/library/dd728284.aspx](http://msdn.microsoft.com/en-us/library/dd728284.aspx)

# internet-explorer - 如何让 IE 6 播放 MPEG-4 HTTP 流？

> ID：10308335
> 
> 赞同：1
> 
> 时间：2012-04-25T01:49:01.643
> 
> 标签：internet-explorer, http, video-streaming, playback, mpeg-4

[我在http://pool.amursu.ru/video.mpg](http://pool.amursu.ru/video.mpg)有 MPEG-4 视频流，我可以使用 Chrome 或 Firefox 观看它，但 Internet Explorer 6 不播放它，只是尝试永远加载它（我想想，它等待文件结束，这可能永远不会发生）。

我尝试使用 Flowplayer 和 JWplayer，但没有成功：

```
<div id="container">Loading the player...</div>
<script type="text/javascript">
  jwplayer("container").setup({
    flashplayer: "/jwplayer/player.swf",
    width: 800,
    height: 450,
    levels: [
      {
        bitrate: 300,
        file: "http://pool.amursu.ru/video.mpg",
        width: 800
      }
    ],
    provider: "http",
    "http.startparam":"starttime"
  });
</script> 
```

可在[http://pool.amursu.ru/上找到](http://pool.amursu.ru/)

视频流由 D-Link DCS-2130 网络摄像头完成并由 nginx 代理。

有什么想法让它在 IE 中工作吗？

PS> 我可以为视频流设置 video/mpeg MIME 类型，但它会破坏 Chrome 中的播放并且对 IE 没有帮助。

**更新**：

现在我做了一个不公平的解决方案：在相机的 Web 界面中找到一个 URL，我可以从中获取单个视频帧，用 Nginx 代理它，然后用 javascript 每秒刷新一次。完全不公平，但无处不在。[http://pool.amursu.ru/](http://pool.amursu.ru/)

# clojure - 为什么这个 try-catch 包装宏无法捕获异常？

> ID：10308339
> 
> 赞同：1
> 
> 时间：2012-04-25T01:49:15.373
> 
> 标签：clojure, vmware, pallet

我有这个宏来捕捉一个特别烦人的 VMware 错误（如果你重新连接它就会消失）

```
(defmacro with-mib-workaround
  "this macro exists because vCenter sometimes fails to get the
managed object reference for objects that actually do exist. Wrap
any call to vi java in this to have it retry with an incramental delay"
  [& body]
  `((fn mib-workaround# [attempt# timeout#]
      (if (> attempt# 10)
        (do (println "giving up after too many mib-not-found failures")
            (println "please complain to VMware about this bug...")
            (throw (Exception. "MIB not found for existing object")))
        (try
          ~@body
          (catch com.vmware.vim25.ManagedObjectNotFound e#
            (println "Caught VMware ManagedObjectNotFound bug ")
            (sleep timeout#)
            (mib-workaround# (inc attempt#) (+ 5 timeout#))))))
    0 5)) 
```

在 repl 中测试时，它可以工作：

```
(with-mib-workaround (throw (com.vmware.vim25.ManagedObjectNotFound.)))
Caught VMware ManagedObjectNotFound bug
Caught VMware ManagedObjectNotFound bug
Caught VMware ManagedObjectNotFound bug
Caught VMware ManagedObjectNotFound bug
Caught VMware ManagedObjectNotFound bug
Caught VMware ManagedObjectNotFound bug
Caught VMware ManagedObjectNotFound bug
Caught VMware ManagedObjectNotFound bug
Caught VMware ManagedObjectNotFound bug
Caught VMware ManagedObjectNotFound bug
Caught VMware ManagedObjectNotFound bug
giving up after too many mib-not-found failures
please complain to VMware about this bug...
nil 
```

当错误在实际运行中弹出此代码时：

```
(with-mib-workaround
      (relogin vm)
      (destroy vm)
      (clone vm)
      (start-vm vm)
      (sleep (* 4 60)))) 
```

通过捕获下降权利

```
 Caused by: java.lang.RuntimeException: com.vmware.vim25.ManagedObjectNotFound
18:15:02    at com.vmware.vim25.mo.ManagedObject.retrieveObjectProperties(ManagedObject.java:158)  <---- CAUSED HERE
18:15:02    at com.vmware.vim25.mo.ManagedObject.getCurrentProperty(ManagedObject.java:179)
18:15:02    at com.vmware.vim25.mo.ManagedEntity.getName(ManagedEntity.java:99)
18:15:02    at sun.reflect.GeneratedMethodAccessor17.invoke(Unknown Source)
18:15:02    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
18:15:02    at java.lang.reflect.Method.invoke(Method.java:597)
18:15:02    at clojure.lang.Reflector.invokeMatchingMethod(Reflector.java:92)
18:15:02    at clojure.lang.Reflector.invokeNoArgInstanceMember(Reflector.java:316)
18:15:02    at hello_pallet.vi$get_vm_by_name$fn__4253.invoke(vi.clj:51)
18:15:02    at clojure.core$filter$fn__3830.invoke(core.clj:2478)
18:15:02    at clojure.lang.LazySeq.sval(LazySeq.java:42)
18:15:02    at clojure.lang.LazySeq.seq(LazySeq.java:67)
18:15:02    at clojure.lang.LazySeq.first(LazySeq.java:82)
18:15:02    at clojure.lang.RT.first(RT.java:559)
18:15:02    at clojure.core$first.invoke(core.clj:55)
18:15:02    at hello_pallet.vi$get_vm_by_name.invoke(vi.clj:51)
18:15:02    at hello_pallet.vi$clone_vm.invoke(vi.clj:154)
18:15:02    at hello_pallet.core$clone.invoke(core.clj:136)
18:15:02    at  hello_pallet.core$fn__112$fn__113$mib_workaround__52__auto____114.invoke(core.clj:188)   <--- FALLS PAST HERE
18:15:02    at hello_pallet.core$fn__112$fn__113.invoke(core.clj:185)
18:15:02    at clojure.lang.AFn.applyToHelper(AFn.java:163)
18:15:02    at clojure.lang.AFn.applyTo(AFn.java:151)
18:15:02    at clojure.lang.AFunction$1.doInvoke(AFunction.java:29)
18:15:02    at clojure.lang.RestFn.applyTo(RestFn.java:137)
18:15:02    at clojure.core$apply.invoke(core.clj:602)
18:15:02    at pallet.action_plan$apply_action$fn__657.invoke(action_plan.clj:366) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T01:59:07.343

看来您的异常被包裹在`RuntimeException`; Clojure 不久前开始在 RTE 中包装所有已检查的异常。你必须抓住`RuntimeException`，解开原因——`(.getCause e)`检查它是否是`instance?`你的异常类，并酌情处理/重新抛出。

注意。我相信最近对异常故事进行了一些更改，但是我不太清楚地记得细节（如果您需要确切地知道发生了什么，我相信您可能想四处搜索“偷偷摸摸”-on ggroups 和 git 日志中）。*更新：在 JIRA 上查看[此提交](https://github.com/clojure/clojure/commit/25f01c8d81b2ea0b58a8e9cf07d31f7c33ed2d76)、其祖先和相关票证：[CLJ-855：catch 收到 RuntimeException 而不是预期的检查异常](http://dev.clojure.org/jira/browse/CLJ-855)。*

# python - 匹配每一行的一个元素

> ID：10308340
> 
> 赞同：0
> 
> 时间：2012-04-25T01:49:32.890
> 
> 标签：python, regex, conditional

对于我的函数，我有一个给定输入文件的规则列表。如果在给定的文件中违反了其中任何一个，我希望我的程序返回错误消息并退出。

*   文件中的每个基因都应该在同一条染色体上

因此对于诸如以下的行：

NM_001003443 CHR11 + 5997152 5927598 5921052 5926098 1 5928752,5925972，5927204,5396098，NM_001003444 CHR11 + 5925152 5926098 5925152 5926098 2 5925152,5925652，5925404,5926098，NM_001003489 CHR11 + 5925145 5926093 5925115 5926045 4 5925151,5925762，5987404,5908098等。

文件中的每一行都是这一行的变体

因此，我想确保文件中的每一行都在 chr11

然而，我可能会得到一个包含不同 chr 列表（和任意数量的数字）的文件。因此，我想编写一个函数来确保在行中的 chr 上找到的任何数字对于每一行都是相同的。

我应该为此使用正则表达式，还是应该怎么做？顺便说一句，这是在python中。

如：chr\d+ ? 我不确定如何确保每行匹配的内容都是相同的......

我目前有：

```
from re import *
for line in file:
    r = 'chr\d+'
    i = search(r, line)
    if i in line: 
```

但我不知道如何确保每一行都相同......

**关于 sajatack 的回答**

```
fp = open(infile, 'r')
for line in fp:
        filestring = ''
        filestring +=line
        chrlist = search('chr\d+', filestring)
        chrlist = chrlist.group()
        for chr in chrlist:
            if chr != chrlist[0]:
                print('Every gene in file not on same chromosome') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T02:05:15.393

只需阅读文件并使用 while 循环检查每一行以确保它包含`chr11`. 有字符串函数可以搜索字符串中的子字符串。一旦找到返回 false （不包含`chr11`）的行，就跳出循环并设置一个 flag `valid = false`。

```
import re

fp = open(infile, 'r')
fp.readline()
tar = re.findall(r'chr\d+', fp.readline())[0]
for line in fp:
    if (line.find(tar) == -1):
        print("Not valid")
        break 
```

这应该在该行中搜索一个数字并检查其有效性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T02:35:30.227

假设第一个 chr 是正确的是否安全？如果是这样，请使用：

```
import re
chrlist = re.findall("chr[0-9]+",  open('file').read())
# ^ this is a list with all chr(whatever numbers)
for chr in chrlist:
    if chr != chrlist[0]
        print("Chr does not match")
        break 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T03:28:26.943

我的解决方案使用“匹配组”从“chr”字符串中收集匹配的数字。

```
import re

pat = re.compile(r'\schr(\d+)\s')

def chr_val(line):
    m = re.search(pat, line)
    if m is not None:
        return m.group(1)
    else:
        return ''

def is_valid(f):
    line = f.readline()
    v = chr_val(line)
    if not v:
        return False

    return all(chr_val(line) == v for line in f)

with open("test.txt", "r") as f:
    print("The file is {0}".format("valid" if is_valid(f) else "NOT valid")) 
```

笔记：

*   预编译正则表达式以提高速度。

*   使用原始字符串 ( `r''`) 指定正则表达式。

*   该模式需要在字符串`\s`的任一侧都有空格 ( )。`chr`

*   `is_valid()``False`如果第一行没有合适的值，则返回`chr`。然后，如果以下所有行都与`chr`第一行的值匹配，则返回一个布尔值。

*   你的示例代码只是打印了一些类似的东西，`The file is True`所以我让它更友好一些。

# javascript - 向 jQuery Colorbox Wrapper 添加类会破坏 CSS

> ID：10308343
> 
> 赞同：0
> 
> 时间：2012-04-25T01:49:54.980
> 
> 标签：javascript, jquery-plugins, plugins, colorbox

我正在开发一个名为 PIFF（PDF 内联格式功能）的 jQuery 插件。它使您想要的任何指向 PDF 的链接在带有阅读器的漂亮窗口中打开，因此您不必下载它。我想要它，这样每个链接都可以有自己的主题，但是当我向父元素添加一个类时，CSS 会立即生效。我已经为我的工作版本 ( ~~http://nsra.tv2media.com/piff/~~ ) 提供了一个稍微改动的副本，供大家查看： http: ~~//nsra.tv2media.com/piffcopy/~~。我只是在做`$("#colorbox").addClass("THEME NAME")`并制作该类的所有适当的颜色框 CSS 选择器，但是唉。谢谢你。

**编辑：**如果您愿意，可以通过查看[https://github.com/terrasoftlabs/piff上的 GitHub 存储库来尝试解决我的问题](https://github.com/terrasoftlabs/piff)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:38:08.990

您可能会遇到这种情况，因为您正在通过使用边距、填充、宽度、高度、顶部、底部、左侧、右侧等来更改颜色框的宽度或高度。颜色框的宽度和高度是在 cbox_open 被触发之前设置的. 因此，即使您通过 cbox_open 事件添加类，颜色框的大小也将根据之前的 CSS 通过 Javascript 设置。

# php - 在 PHP 中转换大小写和去除空格的最短方法

> ID：10308348
> 
> 赞同：0
> 
> 时间：2012-04-25T01:50:37.330
> 
> 标签：php, concrete5

我正在尝试在我的 Concrete 5 主题中添加类名。去除空格并用破折号替换它然后将它们转换为小写的优雅方法是什么？

我已经尝试降低外壳，但我还需要用破折号替换空格 (-)

这是我的代码的样子：

```
<body class="<?php echo strtolower($c->getCollectionName()); echo ' '; echo strtolower($c->getCollectionTypeName()); ?>"> 
```

**应该是这样的**

```
<body class="home right-sidebar"> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:00:37.653

你可以使用这个函数......它适用于无限的参数

**功能**

```
<?php

function prepare() {
    $arg = func_get_args ();
    $new = array ();
    foreach ( $arg as $value ) {
        $new [] = strtolower ( str_replace ( array (
                " " 
        ), "-", $value ) );
    }
    return implode ( " ", $new );
}

?> 
```

**用法**

```
<body class="<?php echo prepare($c->getCollectionName(),$c->getCollectionTypeName()); ?>"> 
```

**演示**

```
<body class="<?php echo prepare("ABC CLASS","DEF","MORE CLASSES") ?>"> 
```

**输出**

```
<body class="abc-class def more-classes"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T01:55:00.840

很容易做到：

使用`$replaced = str_replace(" ", "-", $yourstring);`. Replaced 会将空格转换为破折号。

[http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T01:55:10.273

使用[trim()](http://php.net/manual/en/function.trim.php)从字符串中去除空格。

使用[str_replace()](http://php.net/manual/en/function.str-replace.php)将空格替换为另一个字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T01:57:11.210

```
strtolower(preg_replace('/\s+/','-',trim($var))); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T01:58:21.270

我会选择 preg_replace：

```
strtolower(preg_replace('_ +_', '-', $c->getCollectionName()) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T02:10:17.437

使用正则表达式并将这些空格和特殊字符替换为下划线而不是破折号

```
<?php
$name = '  name word _ word -  test ! php3# ';
$class_name = class_name( $name );
var_dump( $class_name );

function class_name( $name ){
    return strtolower( trim( preg_replace('@[ !#\-\@]+@i','_', trim( $name ) ) , '_' ) );
}
?> 
```

# exchangewebservices - MS Exchange Web 服务：如何获取设置了“标志”的项目？

> ID：10308349
> 
> 赞同：3
> 
> 时间：2012-04-25T01:51:05.787
> 
> 标签：exchangewebservices, exchange-server-2007

有谁知道如何使用 Microsoft Exchange Web 服务**获取收件箱中标记的所有项目？**

显然它们既不在 Tasks 文件夹中（即使它们出现在 Outlook 中），也没有`IsReminderSet`设置为*true*。

以下尝试要么只返回约会，要么只返回真正的任务，但不返回标记的消息：

```
var msgsView = new ItemView(100);
var msgsFilter = new SearchFilter.IsEqualTo(ItemSchema.IsReminderSet, true);
var flagged = exSvc.FindItems(WellKnownFolderName.Inbox, msgsFilter, msgsView); 
```

或者

```
var taskView = new ItemView(100);
var tasks = exSvc.FindItems(WellKnownFolderName.Tasks, taskView); 
```

既不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-06T20:20:36.000

我知道这个问题很老，但我刚刚发现列表示例代码看起来可以解决问题（我自己还没有测试过）来源：http: [//independentsoft.de/exchangewebservices/tutorial/findmessageswithflag.html](http://independentsoft.de/exchangewebservices/tutorial/findmessageswithflag.html)

```
 IsEqualTo restriction1 = new IsEqualTo(MessagePropertyPath.FlagStatus, "1"); //FlagStatus.Complete
    IsEqualTo restriction2 = new IsEqualTo(MessagePropertyPath.FlagStatus, "2"); //FlagStatus.Marked

    Or restriction3 = new Or(restriction1, restriction2);

    FindItemResponse response = service.FindItem(StandardFolder.Inbox
                 , MessagePropertyPath.AllPropertyPaths, restriction3);

for (int i = 0; i < response.Items.Count; i++)
{
    if (response.Items[i] is Message)
    {
         Message message = (Message)response.Items[i];

         Console.WriteLine("Subject = " + message.Subject);
         Console.WriteLine("FlagStatus = " + message.FlagStatus);
         Console.WriteLine("FlagIcon = " + message.FlagIcon);
         Console.WriteLine("FlagCompleteTime = " + message.FlagCompleteTime);
         Console.WriteLine("FlagRequest = " + message.FlagRequest);
         Console.WriteLine("-----------------------------------------------");
    }
} 
```

# xcode - 如何在 XCODE 中使用快捷方式结束方法？

> ID：10308351
> 
> 赞同：1
> 
> 时间：2012-04-25T01:51:16.713
> 
> 标签：xcode, xcode4, shortcuts

是否有一个键盘快捷键可以从函数的开头转到长函数定义的末尾？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:05:00.717

可以通过 Xcode 中的快捷方式完成的可能操作列表位于：**Xcode - Preferences... - Key Bindings**。通过检查包含有关选择和移动的所有内容的“选择”部分，我没有找到您想要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T01:59:23.217

看看这个博客，它列出了 Xcode 的所有快捷方式。我不相信它有你想要的。[http://cocoasamurai.blogspot.com/2011/03/xcode-4-keyboard-shortcuts-now.html](http://cocoasamurai.blogspot.com/2011/03/xcode-4-keyboard-shortcuts-now.html)

# bll - BLL 是绝对必要的吗？

> ID：10308352
> 
> 赞同：-1
> 
> 时间：2012-04-25T01:51:17.167
> 
> 标签：bll

我是.Net 世界的新手。我正在创建一个网站。它具有 DAL 和表示层。正如我之前提到的，我是新手，我不确定如何创建 BLL。所以我想知道我目前的方法是否可行？它会引起任何问题吗？它是一个查询 SQL Server 数据库、选择和更新表的简单应用程序。请帮助我更好地理解这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:15:38.920

*你真的应该更多地关注标签。请在 StackOverflow 上发布另一个问题之前，阅读[http://StackOverflow.com/FAQ、http://WhatHaveYouTried.Com](http://WhatHaveYouTried.Com)和[https://meta.stackexchange.com/questions/128548](http://StackOverflow.com/FAQ)，[谢谢](https://meta.stackexchange.com/questions/128548)！*

查找[CSLA](http://www.lhotka.net/)以了解一个好的 BLL 是什么以及做什么......

我建议您不要将您的表示层（即用户控件）直接绑定到您的 DAL，而是创建一个“对象模型”——理想情况下是一个很好的、封装的、多态的、抽象的 API——有时称为域特定语言（即 DSL）通过绑定将您的 DAL 绑定到任何（客户端、移动设备等）GUI。相信我，这将使编写测试变得更加简单。

参考您的示例，这是对 BLL 背后前提的总结。

# objective-c - 整数 objc 始终为空

> ID：10308355
> 
> 赞同：-1
> 
> 时间：2012-04-25T01:51:55.200
> 
> 标签：objective-c

我`int control;`在.h

我已经尝试了 .m 中的所有内容

```
control =0; or 1,2,3 etc
int control =0; or 1,2,3 etc
control ++;
control=control +1; 
```

无论如何，当我使用 NSLog 时它是零。我从来没有在四种语言中经历过这样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T01:56:31.957

您可能正在使用`NSLog(@"%@", control)`而不是`NSLog(@"%d", control)`.

`NSLog`需要使用格式字符串，您可以在[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/FormatStrings.html)阅读更多信息。它不允许您直接记录变量，您*必须*将变量放在格式字符串中，并在它们后面加上逗号分隔的列表。

# java - 如何获取一天的开始时间和结束时间？

> ID：10308356
> 
> 赞同：152
> 
> 时间：2012-04-25T01:53:00.857
> 
> 标签：java, date

如何获取一天的开始时间和结束时间？

像这样的代码不准确：

```
 private Date getStartOfDay(Date date) {
    Calendar calendar = Calendar.getInstance();
    int year = calendar.get(Calendar.YEAR);
    int month = calendar.get(Calendar.MONTH);
    int day = calendar.get(Calendar.DATE);
    calendar.set(year, month, day, 0, 0, 0);
    return calendar.getTime();
}

private Date getEndOfDay(Date date) {
    Calendar calendar = Calendar.getInstance();
    int year = calendar.get(Calendar.YEAR);
    int month = calendar.get(Calendar.MONTH);
    int day = calendar.get(Calendar.DATE);
    calendar.set(year, month, day, 23, 59, 59);
    return calendar.getTime();
} 
```

它不精确到毫秒。

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-10-01T19:09:46.897

## 爪哇 8

* * *

```
public static Date atStartOfDay(Date date) {
    LocalDateTime localDateTime = dateToLocalDateTime(date);
    LocalDateTime startOfDay = localDateTime.with(LocalTime.MIN);
    return localDateTimeToDate(startOfDay);
}

public static Date atEndOfDay(Date date) {
    LocalDateTime localDateTime = dateToLocalDateTime(date);
    LocalDateTime endOfDay = localDateTime.with(LocalTime.MAX);
    return localDateTimeToDate(endOfDay);
}

private static LocalDateTime dateToLocalDateTime(Date date) {
    return LocalDateTime.ofInstant(date.toInstant(), ZoneId.systemDefault());
}

private static Date localDateTimeToDate(LocalDateTime localDateTime) {
    return Date.from(localDateTime.atZone(ZoneId.systemDefault()).toInstant());
} 
```

**更新**：我已将这两种方法添加到我的 Java 实用程序类[中](https://github.com/RKumsher/utils)

*   [DateUtils.atStartOfDay](https://github.com/RKumsher/utils/blob/master/src/main/java/com/github/rkumsher/date/DateUtils.java#L47)
*   [DateUtils.atEndOfDay](https://github.com/RKumsher/utils/blob/master/src/main/java/com/github/rkumsher/date/DateUtils.java#L61)

它位于 Maven 中央存储库中：

```
<dependency>
  <groupId>com.github.rkumsher</groupId>
  <artifactId>utils</artifactId>
  <version>1.3</version>
</dependency> 
```

## Java 7 及更早版本

* * *

## 使用 Apache Commons

```
public static Date atEndOfDay(Date date) {
    return DateUtils.addMilliseconds(DateUtils.ceiling(date, Calendar.DATE), -1);
}

public static Date atStartOfDay(Date date) {
    return DateUtils.truncate(date, Calendar.DATE);
} 
```

## 没有 Apache Commons

```
public Date atEndOfDay(Date date) {
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(date);
    calendar.set(Calendar.HOUR_OF_DAY, 23);
    calendar.set(Calendar.MINUTE, 59);
    calendar.set(Calendar.SECOND, 59);
    calendar.set(Calendar.MILLISECOND, 999);
    return calendar.getTime();
}

public Date atStartOfDay(Date date) {
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(date);
    calendar.set(Calendar.HOUR_OF_DAY, 0);
    calendar.set(Calendar.MINUTE, 0);
    calendar.set(Calendar.SECOND, 0);
    calendar.set(Calendar.MILLISECOND, 0);
    return calendar.getTime();
} 
```

* * *

## 回答 #2

> 赞同：159
> 
> 时间：2013-12-12T05:54:12.993

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-04-25T02:05:01.060

在 getEndOfDay 中，您可以添加：

```
calendar.set(Calendar.MILLISECOND, 999); 
```

虽然从数学上讲，你不能指定一天的结束，只能说它是“在第二天开始之前”。

所以不要说`if(date >= getStartOfDay(today) && date <= getEndOfDay(today))`，，你应该说：`if(date >= getStartOfDay(today) && date < getStartOfDay(tomorrow))`。这是一个更可靠的定义（您不必担心毫秒精度）。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2015-11-19T18:48:38.497

# java.time

使用`java.time`Java 8 内置的框架。

```
import java.time.LocalTime;
import java.time.LocalDateTime;

LocalDateTime now = LocalDateTime.now(); // 2015-11-19T19:42:19.224
// start of a day
now.with(LocalTime.MIN); // 2015-11-19T00:00
now.with(LocalTime.MIDNIGHT); // 2015-11-19T00:00
// end of a day
now.with(LocalTime.MAX); // 2015-11-19T23:59:59.999999999 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-05-17T20:51:30.227

# Java 8 或 ThreeTenABP

### 分区日期时间

```
ZonedDateTime curDate = ZonedDateTime.now();

public ZonedDateTime startOfDay() {
    return curDate
    .toLocalDate()
    .atStartOfDay()
    .atZone(curDate.getZone())
    .withEarlierOffsetAtOverlap();
}

public ZonedDateTime endOfDay() {

    ZonedDateTime startOfTomorrow =
        curDate
        .toLocalDate()
        .plusDays(1)
        .atStartOfDay()
        .atZone(curDate.getZone())
        .withEarlierOffsetAtOverlap();

    return startOfTomorrow.minusSeconds(1);
}

// based on https://stackoverflow.com/a/29145886/1658268 
```

### 本地日期时间

```
LocalDateTime curDate = LocalDateTime.now();

public LocalDateTime startOfDay() {
    return curDate.atStartOfDay();
}

public LocalDateTime endOfDay() {
    return startOfTomorrow.atTime(LocalTime.MAX);  //23:59:59.999999999;
}

// based on https://stackoverflow.com/a/36408726/1658268 
```

我希望这对某人有所帮助。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-08-02T16:45:19.317

使用 java8 java.time.ZonedDateTime 查找一天开始的另一种方法`LocalDateTime`是简单地将输入 ZonedDateTime 截断为 DAYS：

```
zonedDateTimeInstance.truncatedTo( ChronoUnit.DAYS ); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-01-31T14:31:09.700

另一种不依赖于任何框架的解决方案是：

```
static public Date getStartOfADay(Date day) {
    final long oneDayInMillis = 24 * 60 * 60 * 1000;
    return new Date(day.getTime() / oneDayInMillis * oneDayInMillis);
}

static public Date getEndOfADay(Date day) {
    final long oneDayInMillis = 24 * 60 * 60 * 1000;
    return new Date((day.getTime() / oneDayInMillis + 1) * oneDayInMillis - 1);
} 
```

请注意，它返回基于 UTC 的时间

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-08-30T19:59:43.723

我知道这有点晚了，但在 Java 8 的情况下，如果您使用的是 OffsetDateTime（它提供了很多优势，例如 TimeZone、Nanoseconds 等），您可以使用以下代码：

```
OffsetDateTime reallyEndOfDay = someDay.withHour(23).withMinute(59).withSecond(59).withNano(999999999);
// output: 2019-01-10T23:59:59.999999999Z 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-07-31T06:30:50.800

我试过这段代码，效果很好！

```
final ZonedDateTime now = ZonedDateTime.now(ZoneOffset.UTC);
final ZonedDateTime startofDay =
    now.toLocalDate().atStartOfDay(ZoneOffset.UTC);
final ZonedDateTime endOfDay =
    now.toLocalDate().atTime(LocalTime.MAX).atZone(ZoneOffset.UTC); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-07-14T16:23:58.940

对于 java 8，以下单行语句正在工作。在此示例中，我使用 UTC 时区。请考虑更改您当前使用的 TimeZone。

```
System.out.println(new Date());

final LocalDateTime endOfDay       = LocalDateTime.of(LocalDate.now(), LocalTime.MAX);
final Date          endOfDayAsDate = Date.from(endOfDay.toInstant(ZoneOffset.UTC));

System.out.println(endOfDayAsDate);

final LocalDateTime startOfDay       = LocalDateTime.of(LocalDate.now(), LocalTime.MIN);
final Date          startOfDayAsDate = Date.from(startOfDay.toInstant(ZoneOffset.UTC));

System.out.println(startOfDayAsDate); 
```

如果与输出没有时间差。尝试：`ZoneOffset.ofHours(0)`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-02-26T17:16:01.837

最短的答案，考虑到您的时区是`TZ`：

```
LocalDateTime start = LocalDate.now(TZ).atStartOfDay()
LocalDateTime end = start.plusDays(1) 
```

比较使用`isAfter()`和方法，或使用或方法`isBefore()`转换它。`toEpochSecond()``toInstant()`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-01-31T09:35:11.230

```
private Date getStartOfDay(Date date) {
    Calendar calendar = Calendar.getInstance();
    int year = calendar.get(Calendar.YEAR);
    int month = calendar.get(Calendar.MONTH);
    int day = calendar.get(Calendar.DATE);
    calendar.setTimeInMillis(0);
    calendar.set(year, month, day, 0, 0, 0);
    return calendar.getTime();
    }

private Date getEndOfDay(Date date) {
    Calendar calendar = Calendar.getInstance();
    int year = calendar.get(Calendar.YEAR);
    int month = calendar.get(Calendar.MONTH);
    int day = calendar.get(Calendar.DATE);
    calendar.setTimeInMillis(0);
    calendar.set(year, month, day, 23, 59, 59);
    return calendar.getTime();
    } 
```

**calendar.setTimeInMillis(0);** 为您提供高达毫秒的精度

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-03-26T10:47:31.643

我认为最简单的方法是：

```
// Joda Time

DateTime dateTime=new DateTime(); 

StartOfDayMillis = dateTime.withMillis(System.currentTimeMillis()).withTimeAtStartOfDay().getMillis();
EndOfDayMillis = dateTime.withMillis(StartOfDayMillis).plusDays(1).minusSeconds(1).getMillis(); 
```

然后可以根据您的 Joda Time 要求将这些毫秒转换为日历、即时或本地日期。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-01-23T03:31:15.093

```
 //this will work for user in time zone MST with 7 off set or UTC with saving time 

 //I have tried all the above and they fail the only solution is to use some math
 //the trick is to rely on $newdate is time()     //strtotime is corrupt it tries to read to many minds
 //convert to time to use with javascript*1000

 $dnol = strtotime('today')*1000;
 $dn = ($newdate*1000)-86400000;
 $dz=$dn/86400000;      //divide into days
 $dz=floor($dz);     //filter off excess time
 $dzt=$dz*86400000;     // put back into days UTC
 $jsDate=$dzt*1+(7*3600000);     // 7 is the off set you can store the 7 in database
 $dzt=$dzt-3600000;      //adjusment for summerTime UTC additional table for these dates will drive you crazy
 //solution get users [time off sets] with browser, up date to data base for user with ajax when they ain't lookin

 <?php
 $t=time();
 echo($t . "<br>");
 echo(date("Y-m-d",$t));
 echo '<BR>'.$dnol;
 echo '<BR>'.$dzt.'<BR>';
 echo(date("Y-m-d",$dzt/1000));      //convert back for php /1000
 echo '<BR>';
 echo(date('Y-m-d h:i:s',$dzt/1000));

 ?> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-01-30T15:41:05.687

我对所有解决方案都有一些不便，因为我需要**Instant**变量的类型，而时区总是会干扰更改所有内容，然后结合解决方案我发现这是一个不错的选择。

```
 LocalDate today = LocalDate.now();
        Instant startDate = Instant.parse(today.toString()+"T00:00:00Z");
        Instant endDate = Instant.parse(today.toString()+"T23:59:59Z"); 
```

结果我们有

```
 startDate = 2020-01-30T00:00:00Z
        endDate = 2020-01-30T23:59:59Z 
```

希望对你有帮助

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-01-30T14:55:34.840

以下代码采用 OP 的原始公式，并针对 ms 不精确性进行调整：

```
 private static Date getStartOfDay() {
        Calendar calendar = Calendar.getInstance();
        int year = calendar.get(Calendar.YEAR);
        int month = calendar.get(Calendar.MONTH);
        int day = calendar.get(Calendar.DATE);
        calendar.set(year, month, day, 0, 0, 0);
        long approximateTimestamp = calendar.getTime().getTime();
        long extraMillis = (approximateTimestamp % 1000);
        long exactTimestamp = approximateTimestamp - extraMillis;
        return new Date(exactTimestamp);
    }

    private static Date getEndOfDay() {
        Calendar calendar = Calendar.getInstance();
        int year = calendar.get(Calendar.YEAR);
        int month = calendar.get(Calendar.MONTH);
        int day = calendar.get(Calendar.DATE);
        calendar.set(year, month, day, 23, 59, 59);
        long approximateTimestamp = calendar.getTime().getTime();
        long extraMillis = (approximateTimestamp % 1000);
        long exactTimestamp = approximateTimestamp - extraMillis + 999;
        return new Date(exactTimestamp);
    } 
```

与此线程上的许多其他答案不同，它与旧版本的 Java 和 Android API 兼容。

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2021-09-15T11:30:40.097

```
Date date = new Date();
LocalDateTime localDateTime = LocalDateTime.ofInstant(date.toInstant(), ZoneId.systemDefault());
LocalDateTime startOfDay = localDateTime.with(LocalTime.MIN);
LocalDateTime endOfDay = localDateTime.with(LocalTime.MAX); 
```

时间戳：

```
Timestamp startTs = Timestamp.valueOf(startOfDay);
Timestamp endTs = Timestamp.valueOf(endOfDay); 
```

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2016-11-26T06:07:12.740

```
public static Date beginOfDay(Date date) {
    Calendar cal = Calendar.getInstance();
    cal.setTime(date);
    cal.set(Calendar.HOUR_OF_DAY, 0);
    cal.set(Calendar.MINUTE, 0);
    cal.set(Calendar.SECOND, 0);
    cal.set(Calendar.MILLISECOND, 0);

    return cal.getTime();
}

public static Date endOfDay(Date date) {
    Calendar cal = Calendar.getInstance();
    cal.setTime(date);
    cal.set(Calendar.HOUR_OF_DAY, 23);
    cal.set(Calendar.MINUTE, 59);
    cal.set(Calendar.SECOND, 59);
    cal.set(Calendar.MILLISECOND, 999);

    return cal.getTime();
} 
```

# actionscript-3 - 搞砸了 Actionscript 3 中的 if 语句？

> ID：10308369
> 
> 赞同：1
> 
> 时间：2012-04-25T01:55:16.673
> 
> 标签：actionscript-3, flash, flash-cs5

所以我一直在用 Action Script 3 和 CS5.5 制作这个游戏。您要做的是在穿越太空时避开小行星。我认为让太阳系外的行星在整个游戏的背景中沿着屏幕向下移动会很酷。有点让它看起来像你飞过他们。我这样做的方法是每秒每帧在它们的 y 坐标上添加五个。一旦他们的 y 坐标达到 600（屏幕底部），我将添加一个新的行星，它会做同样的事情。由于某种原因，一旦我到达土星，一切都变得很奇怪。土星来得早，天王星也来得早。我不知道发生了什么事。我为此沮丧了一个小时。这是我认为有问题的部分。

公共函数 onTick(timerEvent:TimerEvent):void {

```
 earth.PlanetMovement(5);

        if (earth.y==600)
        {
            mars.PlanetsStart(300, -100);
            addChild( mars );
            levels=levels+5;
        }
        mars.PlanetMovement(5);
        if (mars.y==600)
        {
            jupiter.PlanetsStart(300,-150);
            addChild (jupiter);
            levels=levels+10;
        }
        jupiter.PlanetMovement(5);

        if (jupiter.y==600)
        {
            saturn.PlanetsStart(300,-155);
            addChild (saturn);
            levels=levels+20;
        }
        saturn.PlanetMovement(5);
        if (saturn.y==600)
        {
            uranus.PlanetsStart(300,-160)
            addChild ( uranus);
            levels=levels+25;
        }
        uranus.PlanetMovement(5); 
```

PlanetMovement 和 PlanetsStart 是 Planets 类中的两个函数。如果您需要更多信息，请告诉我。

编辑：我想我应该进一步解释。PlanetsStart 是一个函数，它具有每个影片剪辑的起始坐标。因此，一旦地球到达 600 的 y 坐标，火星就会从 (300, -100) 开始。然后它被添加到屏幕上。levels 是一个变量，它会提高每个 fps 的分数。PlanetMovement 是每个movieclip 将移动多少fps。如果我使用 >= 那么分数会提高太多。

这正是发生的事情。地球出现在它应该出现的地方。然后火星准时出现。然后由于某种原因土星突然出现在火星和木星的中间。在土星到达底部后，天王星出现。然后木星到达底部，一切正常。土星出现，然后是天王星

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:22:29.863

啊。不幸的是，这比您暗示的要复杂。它真的会帮助你首先编写某种代码计划，开发一些将显示基本逻辑（和逻辑错误）的伪代码，然后再编写代码。

以下是构建此想法的更好方法的示例。但是，我不认为你的想法是可怕的记忆意识。您应该只根据需要引入行星，并根据需要移除它们。研究一种称为“对象池”的技术，以帮助更好地构建它。

太阳系类：

```
package  
{
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.geom.Point;

    public class SolarSystem extends MovieClip 
    {
        private var PLANET_NAMES:Array = new Array("earth", "mars", "jupiter", "saturn", "uranus");

        // you will have to fix these values:
        private var PLANET_STARTS:Array = new Array(new Point(300, -100), new Point(300, -100),new Point(300, -100),new Point(300, -100),new Point(300, -100));

        private var planets:Array;
        private var maxY:Number = 600;
        private var speed:Number = 5;

        private var levels:Number = 0;
        private var levelIncrement:Number = 5;

        public function SolarSystem() 
        {
            super();
            addEventListener(Event.ADDED_TO_STAGE, initHnd, false, 0, true);
        }

        private function initHnd(e:Event):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, initHnd);

            runPlanets();

            addEventListener(Event.ENTER_FRAME, frameHnd, false, 0, true);
        }

        private function runPlanets():void 
        {
            for (var i:int = 0; i < PLANET_NAMES.length; i++) 
            {
                planets[i] = new Planet();
                planets[i].name = PLANET_NAMES[i];
                Planet(planets[i]).startPlanet(PLANET_STARTS[i]);
                this.addChild(planets[i]);
            }
        }

        private function frameHnd(e:Event):void 
        {
            if(planets && planets.length > 0){
                // move all the planets until they are too low, then remove them.
                // decrementing loop because planets will be being removed occasionally.
                for (var i:int = planets.length -1; i >= 0; i--) 
                {
                    if (planets[i] && Planet(planets[i]).y >= maxY) {

                        // this seems very strange to me, but it will replicate what your code says:
                        levels += (levels + levelIncrement);

                        try {
                            removeChild(Planet(planets[i]));
                            planets[i] = null;
                        }catch (e:Error) { }
                    } else if ( Planet(planets[i]).isMoving ){
                        Planet(planets[i]).movePlanet(0, speed);
                    }
                }
            } else {
                removeEventListener(Event.ENTER_FRAME, frameHnd);
            }
        }
    }
} 
```

这是行星类：

```
package
{
    import flash.display.MovieClip;

    public class Planet extends MovieClip
    {
        private var _isMoving:Boolean = false;

        public function Planet()
        {
            super();
        }

        public function startPlanet(sx:Number, sy:Object):void
        {
            this.x = sx;
            this.y = sy;

            isMoving = true;
        }

        public function movePlanet(dx:Number, dy:Number):void
        {
            if (isMoving)
            {
                this.x += dx;
                this.y += dy;
            }
        }

        public function get isMoving():Boolean
        {
            return _isMoving;
        }

        public function set isMoving(value:Boolean):void
        {
            _isMoving = value;
        }
    }
} 
```

同样，这不是最好的方法，但将概念和操作分组到类中更*易于管理。*

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T02:18:38.223

马上我可以看到一个主要问题。更改所有语句：

```
if (saturn.y==600) 
```

到

```
if (saturn.y>=600) 
```

只是说 == 意味着你只会在你的 Y 值正好是 600 的情况下触发条件。

请注意，您也可以将内容更改`levels = levels+20`为简单`levels += 20;`的 .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T02:19:47.503

当像这样移动东西时，最好使用“>=”而不是“==”来检查位置。如果你的对象从 y=1 开始呢？然后它永远不会达到 600 它将永远继续下降。

即使尚未调用 PlanetsStart，您似乎也在调用 PlanentMovement。

# python - 由 urllib2.urlopen() 创建的对象是否代表一个恒定的连接？

> ID：10308375
> 
> 赞同：2
> 
> 时间：2012-04-25T01:55:51.130
> 
> 标签：python, urllib2

在下面的代码中，与远程服务器的连接是保持打开直到`close()` 被调用还是每次`read()`被调用时都重新创建？在下面的代码中，我确实看到每次`read()`调用时都会发生新的网络通信，而不是在调用时立即缓冲远程文件`urlopen()`。

```
import urllib2

handle = urllib2.urlopen('http://download.thinkbroadband.com/5MB.zip')
while True:
    buff = handle.read(64*1024) # Is a new connection to the server created here?
    if len(x) == 0:
        break
handle.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:07:46.833

尝试运行 wireshark 或 fiddler 并查看端口 80，没有其他任何东西在运行。运行你的程序，看看你得到了什么流量。应该回答你的问题。

# java - 持久化多对多列时违反jpa主键

> ID：10308376
> 
> 赞同：0
> 
> 时间：2012-04-25T01:55:55.963
> 
> 标签：java, jpa, eclipselink

我的实体是：设备的 ID 是 deiveID 与 Lib 的 ID 是 rID 有多对多的关系

我的测试代码是：两个新设备实体想要设置相同的新自由度

问题是：如果我使用同一个实体管理器来持久化这 2 个新设备实体，那就没问题了。但是如果我使用 2 个不同的 entitymanager 实例来持久化它们，则会出现错误“主键违规”。我认为实体经理第二次尝试坚持自由，第一次已经坚持了。

--------------设备信息实体 ---------------------------------- --------------

```
@Entity
@Table(name="deviceInfo")
public class DeviceInfoEntity extends BaseEntity implements Serializable{

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private long deviceId;
....
@ManyToMany(cascade=CascadeType.ALL,fetch=FetchType.LAZY)
@JoinTable(name = "device_lib", joinColumns = @JoinColumn(name = "deviceInfo_id",
  referencedColumnName="deviceId"), 
  inverseJoinColumns = @JoinColumn(name = "lib_id", referencedColumnName="rId"))
private List<LibEntity> resourceList = null;
......
} 
```

-------------------------lib 实体 ------------------------ ----------------------

```
 @Entity
    @Table(name="lib")
    public class LibEntity extends BaseEntity implements Serializable{
           @Id
       @GeneratedValue(strategy = GenerationType.AUTO)
       private long rId;

          @ManyToMany(mappedBy = "resourceList", cascade=CascadeType.ALL,
                  fetch=FetchType.LAZY, targetEntity=DeviceInfoEntity.class)
       private List<DeviceInfoEntity> deviceInfolist = null;

           .....
    } 
```

我的测试代码是：

```
EntityManagerFactory emFactory = Persistence.createEntityManagerFactory("testPU");
          EntityManager em = emFactory.createEntityManager();

    LibEntity libEntity = new LibEntity();

    DeviceInfoEntity dEntity = new DeviceInfoEntity();
    dEntity.setName("dadadada");
    dEntity.setLibEntity(libEntity);

    DeviceInfoEntity dEntity2 = new DeviceInfoEntity();
    dEntity2.setName("dadadadadddddd");
    dEntity2.setLibEntity(libEntity);

    em.getTransaction().begin();
    em.persist(dEntity);
    em.getTransaction().commit();

    em.close();

    EntityManager em2 = emFactory.createEntityManager();
    em2.getTransaction().begin();
    em2.persist(dEntity2);
    em2.getTransaction().commit(); 
```

它会出现错误：

```
 Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.LIB(RID)"; SQL statement:
 INSERT INTO lib (RID) VALUES (?) [23505-165] 
```

但如果我使用相同的 EntityManager，则不会发生错误。有没有人知道是什么原因？这是由`cascade=CascadeType.ALL`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:39:59.057

您通过将分离的对象分配给托管对象来破坏持久性上下文。托管对象应该只引用其他托管对象。

对于 dEntity2，您应该将 libEntity 设置为 libEntity 的 find()、getReference() 或 merge() 的结果。

IE

```
dEntity2.setLibEntity(em2.find(libEntity.getClass(), libEntity.getId()); 
```

您可能还可以调用 merge() 而不是 persist() ，它应该解析分离的对象。

# c# - LINQ 是否缓存计算值？

> ID：10308381
> 
> 赞同：7
> 
> 时间：2012-04-25T01:56:26.990
> 
> 标签：c#, .net, linq, clr4.0

假设我有以下代码：

```
var X = XElement.Parse (@"
    <ROOT>
        <MUL v='2' />
        <MUL v='3' />
    </ROOT>
");
Enumerable.Range (1, 100)
    .Select (s => X.Elements ()
        .Select (t => Int32.Parse (t.Attribute ("v").Value))
        .Aggregate (s, (t, u) => t * u)
    )
    .ToList ()
    .ForEach (s => Console.WriteLine (s)); 
```

.NET 运行时实际上在这里做什么？它是每 100 次解析属性并将其转换为整数，还是足够聪明地确定它应该缓存解析的值而不是对范围内的每个元素重复计算？

此外，我将如何自己弄清楚这样的事情？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T09:23:22.920

LINQ 并且`IEnumerable<T>`是*基于拉的*。这意味着作为 LINQ 语句一部分的谓词和操作通常在提取值之前不会执行。此外，每次拉取值时都会执行谓词和操作（例如，没有秘密缓存正在进行）。

从 an中提取`IEnumerable<T>`是由语句完成的，该语句实际上是通过调用并反复调用来`foreach`获取枚举器以提取值的语法糖。`IEnumerable<T>.GetEnumerator()``IEnumerator<T>.MoveNext()`

LINQ 运算符如`ToList()`,和包装一个语句`ToArray()`，因此这些方法将执行拉取操作。对于,和等运算符也是如此。这些方法的共同点是它们产生一个必须通过执行语句创建的结果。`ToDictionary()``ToLookup()``foreach``Aggregate()``Count()``First()``foreach`

许多 LINQ 运算符产生一个新`IEnumerable<T>`序列。当从结果序列中拉出一个元素时，运算符会从源序列中拉出一个或多个元素。运算符是最`Select()`明显的例子，但其他例子是`SelectMany()`, `Where()`, `Concat()`, `Union()`, `Distinct()`,`Skip()`和`Take()`。这些操作符不做任何缓存。当从 a`Select()`中拉出第 N 个元素时，它会从源序列中拉出第 N 个元素，使用提供的操作应用投影并返回它。这里没有什么秘密。

其他 LINQ 运算符也产生新`IEnumerable<T>`序列，但它们是通过实际拉取整个源序列、完成它们的工作然后产生新序列来实现的。这些方法包括`Reverse()`和。但是，操作员完成的拉取操作仅在操作员本身被拉取时执行，这意味着在执行任何操作之前您仍然需要在 LINQ 语句的“末尾”循环。您可能会争辩说这些运算符使用缓存，因为它们会立即提取整个源序列。但是，每次迭代操作符时都会构建此缓存，因此它实际上是一个实现细节，而不是会神奇地检测到您正在对同一序列多次应用相同的操作。`OrderBy()``GroupBy()``foreach``OrderBy()`

* * *

在您的示例中，`ToList()`将进行拉动。外部的动作`Select`将执行 100 次。每次执行此操作时，`Aggregate()`都会执行另一个解析 XML 属性的拉取操作。您的代码总共将调用`Int32.Parse()`200 次。

您可以通过一次而不是在每次迭代中提取属性来改进这一点：

```
var X = XElement.Parse (@"
    <ROOT>
        <MUL v='2' />
        <MUL v='3' />
    </ROOT>
")
.Elements ()
.Select (t => Int32.Parse (t.Attribute ("v").Value))
.ToList ();
Enumerable.Range (1, 100) 
    .Select (s => x.Aggregate (s, (t, u) => t * u)) 
    .ToList () 
    .ForEach (s => Console.WriteLine (s)); 
```

现在`Int32.Parse()`只调用了 2 次。然而，代价是必须分配、存储属性值列表并最终进行垃圾收集。（当列表包含两个元素时，这不是一个大问题。）

请注意，如果您忘记了第一个`ToList()`提取属性的代码，代码仍将运行，但性能特征与原始代码完全相同。没有空间用于存储属性，但在每次迭代时都会对其进行解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T02:43:48.290

自从我研究这段代码以来已经有一段时间了，但是 IIRC 的工作方式`Select`是简单地缓存`Func`您提供的代码并一次在源集合上运行它。因此，对于外部范围内的每个元素，它将`Select/Aggregate`像第一次一样运行内部序列。没有任何内置缓存正在进行 - 您必须自己在表达式中实现它。

如果你想自己解决这个问题，你有三个基本选择：

1.  编译代码并使用`ildasm`查看IL；它是最准确的，但是，尤其是对于 lambda 和闭包，从 IL 获得的内容可能与您放入 C# 编译器的内容完全不同。
2.  使用 dotPeek 之类的东西将 System.Linq.dll 反编译成 C#；同样，您从这些工具中得到的东西可能只是与原始源代码大致相似，但至少它将是 C#（特别是 dotPeek 做得很好，而且是免费的。）
3.  我个人的偏好——下载 .NET 4.0[参考源](http://referencesource.microsoft.com/netframework.aspx)并自己寻找；这就是它的用途:) 您必须相信 MS，参考源与用于生成二进制文件的实际源相匹配，但我认为没有任何充分的理由怀疑它们。
4.  正如@AllonGuralnek 所指出的，您可以在一行内的特定 lambda 表达式上设置断点；将光标放在 lambda 主体内的某个位置，然后按 F9，它将仅在 lambda 处设置断点。（如果操作错误，它将以断点颜色突出显示整行；如果操作正确，它将仅突出显示 lambda。）

# objective-c - 可能是错误的内存访问？

> ID：10308382
> 
> 赞同：0
> 
> 时间：2012-04-25T01:56:29.040
> 
> 标签：objective-c, memory-leaks, sqlite

我目前正在使用 sqlite3 在 Objective-C 上进行开发。以下代码似乎是错误的内存访问。

```
-(sqlite3_stmt *)PrepareStmt:(NSString *)query
{
    //...
    const char *query_stmt = [query UTF8String];
    sqlite3_stmt *stmt = nil;
    int retval = 0;

    if ((retval = sqlite3_prepare_v2(db, query_stmt, -1, &stmt, nil)) == SQLITE_OK)
    {
        return stmt;
    }
    else
    {
        //Error handling...
    }
}

- (void)SomeFunc
{
    NSString *query = @""; //Assume valid SQL statement
    sqlite3_stmt *stmt = [self PrepareStmt:query];

    //Use stmt, like step, etc.

    sqlite3_finalize(stmt);
} 
```

PrepareStmt 中的 sqlite3_stmt 设置为 nil，它将是 sqlite3_prepare_v2() 的输出参数。应该在该函数中分配内存。因此，应该通过调用 sqlite3_finalize() 来释放它。

我的问题是，如果我们从 PrepareStmt() 返回 sqlite3_stmt，它应该仍然有效，对吧？PrepareStmt() 中的本地指针已经从堆栈中弹出，但 sqlite3_prepare_v2() 分配的内存应该仍然有效。

这种想法有效吗？或者我是否需要传递指向 PrepareStmt() 的指针地址？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:12:05.987

是的，在这种情况下它是有效的。但请注意 sqlite3_finalize() 不仅仅是释放内存（即 dealloc）。它还向数据库发送一条消息，告诉它删除它的预编译 SQL 语句等......

# html - “隐形”域转发未按预期工作

> ID：10308385
> 
> 赞同：1
> 
> 时间：2012-04-25T01:56:58.463
> 
> 标签：html, forwarding, cloaking

我在 www.domain101.com 注册了一个域。我们称它为 www.example.com。我在我的 heroku 应用程序上使用了他们的“隐形转发”选项，我们称之为 example.herokuapp.com。如果我想导航到帖子索引页面，我当然会去 example.herokuapp.com/posts；但是，当我使用我的隐藏域（www.example.com/posts）尝试此操作时，它会将我带到登录页面。更重要的是，网址始终设置为“www.example.com”，每个页面的标题为“EXAMPLE.COM”。我可以单击页面上的按钮并浏览我的网站，但 URL 仍严格保留在“www.example.com”。

我使用了网站上提供的转发选项。我还应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:21:15.867

域隐藏使用框架使访问者的浏览器在位置栏中显示隐藏域，同时将实际内容托管在其他地方。这就是为什么在您浏览网站时位置栏永远不会改变的原因；domain101 的伪装实现不会将路径信息转发到您的 Heroku 应用程序也就不足为奇了。

你应该做的是配置一个 DNS 服务器，将你的域的流量直接引导到 Heroku。Heroku 上最简单的选项是[Zerigo DNS Add-on](https://addons.heroku.com/zerigo_dns)，如果您托管单个域，它是免费的。如果您愿意，您还可以找到许多其他人提供的 DNS 服务器。

配置 DNS 服务器后，您还需要告诉注册商您选择的 DNS 服务器是您域的主 DNS。注册商之间的方法不同，因此您应该查看 domain101 的文档以获取详细信息。

# java - 使用 drawLine 创建一个 X

> ID：10308386
> 
> 赞同：1
> 
> 时间：2012-04-25T01:57:01.787
> 
> 标签：java

如何使用 drawline 方法绘制 x？

```
g.drawLine(getX(), getY(), getX()+getWidth(), getY()+ getHeight()); 
```

我假设我将不得不翻转这个。如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T02:00:52.063

```
g.drawLine(getX(), getY(), getX()+getWidth(), getY()+ getHeight());
g.drawLine(getX()+getWidth(), getY(), getX(), getY()+ getHeight()); 
```

# tcp - TCP 连接池

> ID：10308388
> 
> 赞同：1
> 
> 时间：2012-04-25T01:57:16.063
> 
> 标签：tcp, go

我是套接字新手，并试图通过 tcp 套接字创建连接池。我的实现发送 32 位长度，然后为每个调用发送二进制消息。但是我有时会遇到阅读器从服务器接收先前响应的问题（可能在客户端关闭并在发送错误时重新建立套接字时发生）。如何在新请求之前刷新套接字（上次调用的剩余字节）。有什么建议吗？

编辑：我了解到 tcp 总是流式传输 0，如果我在消息之前发送 byte(1) 怎么办，这样我就可以有一个刷新函数来检查套接字在新调用之前是否为空。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T05:41:26.960

您的帖子实际上提出了几个问题：

*   如何管理连接池？
*   如何处理通过套接字的通信？

这真的是两种不同的东西。连接池只是管理一组连接的一种方式。实现这一点的一个简单方法是使用一个类，例如：

```
 package netpool

    import (
        "net"
    )

    const MaxConnections = 3

    type Error string

    func (e Error) Error() string {
        return string(e)
    }

     var ErrMaxConn = Error("Maximum connections reached")

    type Netpool struct {
        name  string
        conns int
        free  []net.Conn
    }

    func NewNetpool(name string) *Netpool {
        return &Netpool{
            name: name,
        }
    }

    func (n *Netpool) Open() (conn net.Conn, err error) {
        if n.conns >= MaxConnections && len(n.free) == 0 {
            return nil, ErrMaxConn
        }

        if len(n.free) > 0 {
            // return the first free connection in the pool
            conn = n.free[0]
            n.free = n.free[1:]
        } else {
            addr, err := net.ResolveTCPAddr("tcp", n.name)
            if err != nil {
                return nil, err
            }
            conn, err = net.DialTCP("tcp", nil, addr)
            if err != nil {
                return nil, err
            }
            n.conns += 1
        }
        return conn, err
    }

    func (n *Netpool) Close(conn net.Conn) error {
        n.free = append(n.free, conn)
        return nil
    } 
```

我在这里创建了一个独立的类。它通常作为更高级别类的一部分来实现，例如 MyHTTPHost 或 MyDatabase。

在这个简单的实现中，不跟踪通过 netpool.Open() 返回的连接。有可能通过调用 Open() 来泄漏连接，然后在 netpool.Close() 之外关闭连接。例如，如果您想拥有一个活动和非活动池，则可以跟踪它们，这将解决这个问题。

您可能希望添加到池实现中的其他一些内容：

*   线程保护（例如使用sync.Mutex）
*   在闲置一段时间后关闭空闲池中的连接
*   错误检查以确保关闭的连接仍然有效

建立连接后，您可以正常调用 Read 和 Write。要刷新套接字上的所有未完成数据，您可以简单地使用 ioutil.ReadAll() 辅助函数。默认情况下，如果没有可用数据，这将无限期阻塞。为避免这种情况，请使用以下命令添加读取超时：

```
 conn.SetReadDeadline(time.Now().Add(500 * time.Millisecond))
    _, err = ioutil.ReadAll(conn)
    neterr, ok := err.(net.Error)
    if ok && neterr.Timeout() {
        err = nil // timeout isn't an error in this case
    }
    if err != nil {
        // handle the error case.
    } 
```

如果有任何未决数据，这将从给定连接读取所有数据，如果没有数据未决，则将在 500 毫秒后返回 I/O 超时错误。

类型断言是必需的，因为 ioutil.ReadAll() 返回的是 Error 接口，而不是 net.Error 接口，我们需要后者能够轻松找出调用是否由于超时而返回。

# crystal-reports - 当只有一个明细记录时如何抑制组总计

> ID：10308389
> 
> 赞同：1
> 
> 时间：2012-04-25T01:57:19.590
> 
> 标签：crystal-reports

当组中只有 1 条记录时，有没有办法不显示组页脚？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T04:58:15.113

发现我可以通过在组标题的抑制选项上使用条件格式并将其设置为

```
Count({thefield}, {thegroup}) = 1 
```

# php - MySQLI + PHP 更新/选择带有 bind_param 发布但不回显

> ID：10308390
> 
> 赞同：0
> 
> 时间：2012-04-25T01:57:42.657
> 
> 标签：php, mysqli

我整天都在努力解决这个问题，只有一个成功的“更新”来展示它。我是使用 MySQLI 的新手，并且似乎遇到了脚本的几个问题。

一名志愿者使用 html 表单输入他们的电子邮件地址，该地址已经在数据库中。然后数据库显示他们的日程安排信息并将“已确认”列从（默认）“否”更新为“是”。

更新在数据库中显示为已确认的“是”，但输出并未在页面本身上回显。

这是 PHP： http: [//pastebin.com/KSPGuuae](http://pastebin.com/KSPGuuae)

```
错误：更新失败：（）对象（mysqli_stmt）#2（0）{}
        选择失败：（）对象（mysqli_stmt）#3（0）{}
致命错误：调用未定义的方法 mysqli_stmt::get_result() in
/home/content/79/6007279/html/summerfest/display.php 在第 119 行：

119: $result = $stmt->get_result();
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:10:09.033

`$stmt->execute()`您在尝试获取结果之前忘记运行。

此外，`get_result()`仅在 PHP 5.3 中引入

对于以前的 PHP 版本，您应该使用以下查询：

```
SELECT agreeName, position, shift_times, confirmed FROM volConfirm ... etc 
```

然后在 PHP 中：

```
// bind result columns
$stmt->bind_result($agreeName, $position, $shift_times, $confirmed);
while ($stmt->fetch()) {
    // use $agreeName, $position, etc.
} 
```

我更喜欢 PDO 的工作方式，尽管使用 PHP 5.3 至少 mysqli 更可行。

# ruby - 升级 Bundler 后在 Ruby 中解析 YAML 时出现心理参数错误

> ID：10308391
> 
> 赞同：3
> 
> 时间：2012-04-25T01:57:50.247
> 
> 标签：ruby, yaml, psych

我刚刚从 1.0 升级到 Bundler 1.1。我以前工作的所有代码现在都因以下错误而中断：

```
~/.gem/gems/psych-1.3.2/lib/psych.rb:203:in `parse': wrong number of arguments(2 for 1) (ArgumentError)
  from ~/.gem/gems/psych-1.3.2/lib/psych.rb:203:in `parse_stream'
  from ~/.gem/gems/psych-1.3.2/lib/psych.rb:151:in `parse'
  from ~/.gem/gems/psych-1.3.2/lib/psych.rb:127:in `load' 
```

有没有办法解决这个问题？我所做的就是打电话`YAML.load`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:30:26.247

不是真正的修复，但我发现我可以使用以下方法删除 psych 作为 YAML 解析器：

```
YAML::ENGINE.yamler = 'syck' 
```

在调用之前执行此操作：

```
YAML.load 
```

我已经打开[了关于 psych 项目的问题](https://github.com/tenderlove/psych/issues/61)。

**更新**：问题似乎与我使用的 Ruby 版本有关。更新我的 Ruby 版本解决了这个问题。请参阅上述有关 Psych 的问题。

# html - jsp和html img按钮可以获取request.getParameter的值

> ID：10308394
> 
> 赞同：0
> 
> 时间：2012-04-25T01:58:35.080
> 
> 标签：html, jsp

这是我的代码

```
 <%
   if(request.getParameter("cart") != null)
    {
     ......
     }
    <%

   <form method="post"><input  class="auto-style2"  height="44" name="cart" 
    src="divers/panier.jpg" type="image" width="71" /> 
```

因此，当我按下按钮 name="cart" 时，我可以获得 request.getParameter("cart")。

当我点击时如何知道它的回帖`img`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:40:43.247

> *当我点击 img 时如何知道它的回帖？*

检查请求方法。

```
if ("post".equalsIgnoreCase(request.getMethod())) {
    // It's a POST request.
} 
```

或者，更好的是，让表单提交给[servlet](https://stackoverflow.com/tags/servlets/info)并在`doPost()`方法中完成工作。

* * *

**与具体问题无关**，您实质上是在滥用`<input type="image">`此处，只拥有一个带有背景图像的按钮。它不会发送请求参数`cart`，而是将鼠标光标在图像上的位置作为`cart.x`and发送`cart.y`。您需要检查这些参数。

```
if (request.getParameter("cart.x") != null) {
    // Image button is clicked.
} 
```

另请参阅[HTML Input (type=image) not working on Firefox 4](https://stackoverflow.com/questions/6402380/html-input-type-image-not-working-on-firefox-4/6402422#6402422)。

# undefined-symbol - GraphicsMagick，架构 x86_64 的未定义符号

> ID：10308398
> 
> 赞同：2
> 
> 时间：2012-04-25T01:59:06.323
> 
> 标签：undefined-symbol, graphicsmagick

我正在尝试在 Xcode4 中安装 GraphicsMagick，当我执行命令“make”时出现此错误。

```
/usr/bin/ranlib: file: magick/.libs/libGraphicsMagick.a(magick_libGraphicsMagick_la-module.o) has no symbols
/usr/bin/ranlib: file: magick/.libs/libGraphicsMagick.a(magick_libGraphicsMagick_la-PreRvIcccm.o) has no symbols
libtool: link: ranlib magick/.libs/libGraphicsMagick.a
ranlib: file: magick/.libs/libGraphicsMagick.a(magick_libGraphicsMagick_la-module.o) has no symbols
ranlib: file: magick/.libs/libGraphicsMagick.a(magick_libGraphicsMagick_la-PreRvIcccm.o) has no symbols

Undefined symbols for architecture x86_64:
  "___builtin_object_size", referenced from:
      _BlurImageScanlines.omp_fn.6 in libGraphicsMagick.a(magick_libGraphicsMagick_la-effect.o)
      _XShearImage.omp_fn.0 in libGraphicsMagick.a(magick_libGraphicsMagick_la-shear.o)
      _YShearImage.omp_fn.1 in libGraphicsMagick.a(magick_libGraphicsMagick_la-shear.o)
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make[1]: *** [utilities/gm] Error 1
make: *** [install] Error 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:04:11.257

GraphicsMagick 无法在 OS X 10.7 (Lion) 或 10.8 (Mountain Lion) 上使用默认的 LLVM GCC/G++ 编译器进行编译。解决方法是改用 Clang 编译器：

```
./configure CC=clang [...other config options...] 
```

`make check`为了安全起见，在编译后运行单元测试也是一个好主意。

这个技巧对我有用，希望它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:48:01.107

您可以在这里找到解决方案。

[http://sourceforge.net/projects/graphicsmagick/forums/forum/250738/topic/5221775](http://sourceforge.net/projects/graphicsmagick/forums/forum/250738/topic/5221775)

# ios - 如何读取我的应用程序的 CFNetwork 级用户代理？

> ID：10308402
> 
> 赞同：5
> 
> 时间：2012-04-25T01:59:26.850
> 
> 标签：ios, user-agent, cfnetwork

我想以编程方式检索我的应用程序的`User-Agent`字符串。（注意：*不是*我的应用程序中 UIWebView 的 UA；`NSURLConnection`基于 - 的 HTTP 请求的 UA。）

有很多关于如何读取应用程序的指南`UIWebView` `User-Agent`，但没有关于如何获取填充在其 HTTP 请求中的`<appname>/1.0 CFNetwork/456.23`字符串的指南。`CFNetwork`有用于`CFHTTPMessage`复制所有标头字段的 API，但我只有一个`NSURLRequest`和一个`NSURLResponse`，这些是未桥接的不透明类型。帮助！

（一些很好的背景阅读：[更改 NSURLConnection 的 userAgent](https://stackoverflow.com/questions/1532206/changing-the-useragent-of-nsurlconnection)提到了我想要获得的格式。[我的 iOS 程序将自己宣传为什么 HTTP User-Agent？](https://stackoverflow.com/questions/8030550/what-http-user-agent-does-my-ios-program-advertise-itself-as)也是如此。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:12:35.860

完全扭曲：在端口 80 上创建一个本地套接字并发出一个本地请求（对自己），读取 HTTP 标头。

# android - 新活动是否在新线程中运行？

> ID：10308405
> 
> 赞同：0
> 
> 时间：2012-04-25T02:00:05.017
> 
> 标签：android

当我创建一个新活动时，新活动是否在新线程中运行？

```
Log.d("testing", "before activity start");

intent = new Intent(CurrentActivity.this, SecondActivity.class); //I put "Log.d("testing","in secondActivity")" in SecondActivity.onCreate()
startActivity(intent);

Log.d("testing", "after activity start"); 
```

我认为执行的顺序将是“活动开始前”->“在 secondActivity”->“活动开始后”

但事实上，并非如此。有人知道原因吗？那么，新活动是否在新线程中运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:15:27.657

不，它不是在新线程中运行。它正在 UI 线程中运行。“默认情况下，单个进程中的所有应用程序代码都在主 UI 线程中运行。这也是处理 UI 事件的同一线程。唯一的例外是处理来自其他进程的 IPC 调用的代码。系统维护每个进程中有一个单独的事务线程池来调度所有传入的 IPC 调用。开发人员应该为任何长时间运行的代码创建单独的线程，以避免阻塞主 UI 线程。[http://developer.android.com/resources/faq/framework.html](http://developer.android.com/resources/faq/framework.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:44:37.323

它在同一个线程中运行（就像您的应用程序中的所有活动一样），但创建活动不是在`startActivity`调用内部完成的。在幕后，该框架为您的所有活动提供了一个循环，其中包含一个待处理操作的*消息队列*。消息队列接收有关用户输入和状态更改的消息，并且每次循环时，它都会处理来自队列的下一个输入，可能会调用其中一个`Activity`或`View`回调（例如`onTouchEvent`）。

当您调用 时`startActivity`，它会将该请求排入主线程的消息队列中。在您的函数返回后，循环稍后将从队列中获取该请求，创建活动，并调用`onCreate`和所有其他生命周期回调。这就是为什么`onCreate`在你的函数返回之后才看到被调用的原因。

顺便说一句，这就是为什么您还需要注意，您的回调不会花费太长时间来执行或阻塞：只有在它们返回之后，线程的循环才能处理来自队列的其他请求，例如用户输入。

# regex - haxe 正则表达式中的跨平台不一致

> ID：10308407
> 
> 赞同：0
> 
> 时间：2012-04-25T02:00:28.123
> 
> 标签：regex, cross-platform, markdown, pcre, haxe

我正在尝试将 Haxe Markdown 库（[http://code.google.com/p/mdown/](http://code.google.com/p/mdown/)）改编为跨平台工作的官方 haxelib。我遇到了一些奇怪的地方，有些东西适用于 flash 和 javascript，但不适用于 neko。

请参阅此示例代码：

```
var str = "<p>This is a blockquote</p>";
var out = ~/(^|\n)/g.replace(str, "$1  ");
trace(out); 
```

正如预期的那样，在 Javascript 和 Flash 上，我得到了这个：

```
 "  <p>This is a blockquote</p>" 
```

在 Neko 我得到这个：

```
"  <  p  >  T  h  i  s     i  s     a     b  l  o  c  k  q  u  o  t  e  <  /  p  >  " 
```

我现在可以解决它（不使用正则表达式）-但是谁能告诉我这个中断是什么时候？

谢谢，杰森

ps这可能有助于回答这个问题：[http ://haxe.org/doc/cross/regexp#implementation-details](http://haxe.org/doc/cross/regexp#implementation-details)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:06:23.130

如果您使用该`m`标志将其转换为多行正则表达式，则可以省略换行部分。这可能会有所帮助。

文档的相关部分位于链接页面的开头：

> m : 多行匹配，^ 和 $ 代表一行的开始和结束

至于您的问题发生的原因，似乎 Neko 的正则表达式库错误地将您的正则表达式简化为空，这将在每个字符之间匹配。你可以放一个 . 在正则表达式的末尾并将空格移动到替换字符串的前面，这可能会阻止该错误的发生，并且它应该与所有实现兼容。

# iphone - 实现小数而不是分数，Calculator Xcode App

> ID：10308413
> 
> 赞同：0
> 
> 时间：2012-04-25T02:01:06.270
> 
> 标签：iphone, objective-c, xcode, interface, decimal-point

我到处搜寻，但没有找到与我类似的情况。. Xcode/Objective C 的新手，我正在组合一个双重用途（分数/小数）计算器应用程序。我在分数上找到了一些好东西，并让它们正确计算。然而，小数是另一回事。我可以让它出现在这个：

```
 -(IBAction) pressDecimal
    {
     NSRange range = [display.text rangeOfString:@"."];
                 if ( range.location == NSNotFound ) {
                 display.text = [display.text stringByAppendingString:@"."];
    } 
```

或这个：

```
 -(IBAction) pressDecimal
 {
   [displayString appendString: @"."];
   display.text = displayString;
 } 
```

后者效果很好，可以在计算器上显示。我尝试将它作为插槽读取，双倍，我似乎无法正确读取它......这是我获取数字的方式：

```
 - (void) workNums: (int) nums 
```

{

```
currentNumber = currentNumber * 10 + nums;
[displayString appendString:
 [NSString stringWithFormat: @"%i", nums]];
display.text = displayString; 
```

}

```
 //uses tags from attribute inspector (decimal tagged 10)
  -(IBAction)pressNum:(UIButton *)sendIT
{
   int nums = sendIT.tag;
   [self workNums: nums];
} 
```

我到处寻找，尝试从浮点数更改为双精度数（当我与它们一起玩时，我可以让它显示 0.00）这也是我将分数的答案转换为小数的方法..它也很好用：

```
 - (double) convertToNum
 {
if (denominator != 0)
    return (double) numerator / denominator;
else 
    return NAN; 
```

再说一遍，清楚地说...我怎样才能让Objective C看到应用程序中输入的小数，并将答案正确地显示为小数..我搞砸了，因为我开始这个主要是一个分数计算器？感谢一个从 BASIC 转到 Objective C 的菜鸟

编辑 4/27/12 ***** **** （Stack 的新手 - 但请阅读我在下面的评论.. 我正在寻找为什么我不能将小数读入我的程序......我尝试从整数（其中我知道不会工作）和双打和浮动，但是当我把这一切都作为双打运行时，我得到的只是用户输入的 0.00：

```
 -(IBAction)pressNum:(UIButton *)sendIT
     {
         int nums = sendIT.tag;
         [self workNums: nums];
     }

        - (void) workNums: (int) nums
     {

     currentNumber = currentNumber * 10 + nums;
     [displayString appendString:
     [NSString stringWithFormat: @"%i", nums]];
     display.text = displayString;
     } 
```

因此，目标是能够计算用户输入的十进制数......关于 if/else 情况的任何建议，因为这些数字在累加器中建立 / 和 currentNumber 的双倍，并在以后变成分子/分母..（这可能是我的问题，但它不应该很难，但我很难用 BOOL 或其他东西说，嘿..这不是分数，它是小数 - 所以让这样做 - 请帮忙！！快疯了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:09:10.140

我可能认为这比它简单得多，但是：如果你已经有一个类似`@"3.14"`in的字符串，`displayString`那么你可以将它直接转换为双精度：

```
double doubleValue = [displayString doubleValue]; 
```

这还不足以获得双精度值并执行计算吗？

# iphone - 核心情节：如何在平等缩放轴的同时缩放以适应情节？

> ID：10308414
> 
> 赞同：0
> 
> 时间：2012-04-25T02:01:21.320
> 
> 标签：iphone, objective-c, cocoa, core-plot

我正在使用 Core Plot 来绘制线性方程。我有两个数据点；直线的 X 和 Y 截距。
我想缩放绘图区域以适应视图中的绘图。

我尝试使用

```
[plotspace scaleToFitPlots: [NSArray arrayWithObject:mainPlot]]; 
```

这有效，除了轴是独立缩放的：

![图片](../Images/a7fa218f4121a55ce1a087ab43395265.png)

X 轴相对于 Y 轴拉伸。为了准确显示直线的斜率，将两个轴一起缩放很重要。

**如何在保持轴之间的相等关系的同时缩放绘图区域以适应绘图？**

需要明确的是，轴的范围可以变化，但屏幕空间的物理量在 0 和 1 之间需要在两个轴上相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:45:42.693

调用后`-scaleToFitPlots:`，检查生成的绘图范围并根据需要调整它们以达到您想要的效果。将每个范围的长度与绘图区域的相应尺寸进行比较`bounds`（计算长度和边界大小之间的比率），确定一个比率是否大于另一个，并根据需要调整范围以使比率匹配。

# c++ - 从时钟获取当前日期

> ID：10308415
> 
> 赞同：6
> 
> 时间：2012-04-25T02:01:24.953
> 
> 标签：c++, boost, boost-date-time

我正在这样做

```
 boost::gregorian::date current_date(boost::date_time::day_clock::local_day()); 
```

我收到以下错误

```
‘template<class date_type> class boost::date_time::day_clock’ used without template parameters 
```

有什么我必须做的不同吗？

参考[http://www.boost.org/doc/libs/1_47_0/doc/html/date_time/gregorian.html#date_construct_from_clock](http://www.boost.org/doc/libs/1_47_0/doc/html/date_time/gregorian.html#date_construct_from_clock)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-25T02:27:18.707

你用错了`day_clock`——改用这个：

```
boost::gregorian::date current_date(boost::gregorian::day_clock::local_day()); 
```

`day_clock`in`boost::date_time`是一个通用接口（在本例中为模板），旨在与外部提供的“日期”类型一起使用，而您没有提供该类型。`day_clock`in*`boost::gregorian`*是所述接口的 typedef，`boost::gregorian::date`用作提供的“日期”类型。

# bash - 这个 bash 代码在做什么？

> ID：10308416
> 
> 赞同：1
> 
> 时间：2012-04-25T02:02:26.293
> 
> 标签：bash, libtool

这是我在一个开源项目（不在该系统上编译）中名为 libtool 的文件中找到的一些代码：

```
 case $arg in
  -*=*)
    optarg=`$echo "X$arg" | $Xsed -e 's/[-_a-zA-Z0-9]*=//'` ;;
  *) optarg= ;;
  esac 
```

我得到了案例陈述，但我不确定第一`optarg=...`行。它想达到什么目的？对于这个测试用例，让：

```
CC="arm-elf-gcc"
arg="--tag=CC"
Xsed="/usr/bin/sed -e 1s/^X//" 
```

在 OS X 中运行它让我：

```
../libtool: line 828: X--tag=CC: command not found 
```

我认为它可能试图将“arm-elf-gcc”分配给变量 optarg，但我不确定。该软件在 Ubuntu 中整体编译正确，但 libtool 文件看起来非常不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:11:10.510

对于您的示例，`arg="--tag=CC"`尝试隔离值的位置`CC`

它通过使用正则表达式删除`--tag=`. sed 命令`s/A/B/`将任何与 A 匹配的内容替换为 B。A 是一个正则表达式，用于查找字母、数字、下划线和破折号后跟等号的任意组合，而 B 为空。因此，当它看到`--tag=CC`正则表达式匹配时，将其`--tag`替换为空，因此该值是简单的`CC`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T02:12:01.557

这只是处理形式的命令行参数

```
`--option=value` 
```

在正常的 getopts 处理中，如果指定`-o value`，则变量`optarg`设置为`value`; 如果您改为指定上面的长格式（这看起来像 getopts 的一个大选项参数），则此代码可确保发生同样的事情。

# java - 如何在java中获取超级表信息？

> ID：10308418
> 
> 赞同：1
> 
> 时间：2012-04-25T02:02:27.863
> 
> 标签：java, mysql, jdbc

我的数据库有很多父表和子表。这些表包含与父表链接的外键。我想使用java获取子表的父表信息？我该如何实现？

```
For ex,consider the student and mark table,
The student table contains the information like studentID,name.
studentID-Primary key
The marks table contains the markId,studentId,Sub1,sub2,sub3 etc
markId-Primarykey
studentID-Foreignkey refers Student table 
```

我的表创建查询是，

```
CREATE TABLE `Student12` (
  `studentId` SMALLINT  NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(50)  NOT NULL,
  PRIMARY KEY (`studentId`)
)
ENGINE = InnoDB;

CREATE TABLE `Marks` (
  `markId` SMALLINT  NOT NULL AUTO_INCREMENT,
  `subject1` SMALLINT  NOT NULL,
  `subject2` SMALLINT  NOT NULL,
  `studentId` SMALLINT  NOT NULL,
  PRIMARY KEY (`markId`),
  CONSTRAINT `FK_Marks_Student` FOREIGN KEY `FK_Marks_Student` (`studentId`)
    REFERENCES `Student12` (`studentId`)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT
)
ENGINE = InnoDB; 
```

如果我将标记表名称作为输入，我怎样才能获得其父表或超级表名称学生以及有关学生表的信息？任何帮助都应该是可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T03:08:28.713

JDBC DatasetMetaData 接口提供了一些可能有所帮助的方法。（以下文本复制自 javadoc。

*   [`ResultSet getExportedKeys(String catalog, String schema, String table)`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getExportedKeys%28java.lang.String,%20java.lang.String,%20java.lang.String%29) 检索引用给定表的主键列（表导出的外键）的外键列的描述。

*   [`ResultSet getCrossReference(String parentCatalog, String parentSchema, String parentTable, String foreignCatalog, String foreignSchema, String foreignTable)`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getCrossReference%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29) 检索给定外键表中引用主键的外键列或表示父表的唯一约束的列的描述（可以是相同或不同的表）。

当然，只有在 SQL 表 DDL 中已将相关列声明为外键时，这些才能起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T03:20:07.537

您可以使用[DatabaseMetaData](http://docs.oracle.com/javase/6/docs/api/index.html?java/sql/DatabaseMetaData.html)检索有关外键和引用表的信息。我不确定它是否适用于各种 MySql 表。原理是使用以下代码（未测试）来检索有关超级表的信息

```
ResultSet rs = null;
DatabaseMetaData dm = conn.getMetaData( );

// get super tables of table marks
ResultSet rs = dm.getSuperTables( null , null, "marks" );
while( rs.next( ) ) {

   System.out.println(String.format("Table Catalog %s", rs.getString("TABLE_CAT") );
   System.out.println(String.format("Table Schema %s", rs.getString("TABLE_SCHEM") );
   System.out.println(String.format("Table Name %s", rs.getString("TABLE_NAME") );
   System.out.println(String.format("Table Name %s", rs.getString("SUPERTABLE_NAME") );
} 
```

您可以使用这些信息来获取有关被引用表以及外因和被引用主键的附加信息：

```
ResultSet rs = dm.getCrossReference( null , null , "student" , null , null , "marks" );
System.out.println(String.format("Exported Keys Info Table %s.", "marks"));
while( rs.next( ) ) {

   String pkey = rs.getString("PKCOLUMN_NAME");
   String ptab = rs.getString("PKTABLE_NAME");
   String fkey = rs.getString("FKCOLUMN_NAME");
   String ftab = rs.getString("FKTABLE_NAME");
   System.out.println("primary key table = " + ptab);
   System.out.println("primary key = " + pkey);
   System.out.println("foreign key table = " + ftab);
   System.out.println("foreign key = " + fkey);
} 
```

最后，您可以通过以下方式检索有关超级表的信息

```
ResultSet rs = dm.getTables(null,null,"student" ,null);
System.out.println("Table name:");
while (rs.next()){
     String table = rs.getString("TABLE_NAME");
     System.out.println(table);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T02:34:20.237

这完全取决于创建表的方式。外键不是必须创建的，它们可以是一个表中的一个简单列，与另一个表没有明确的关系。如果您非常确定链接是显式创建的（`foreign keys`已定义），那么您可以使用`information_schema`. 但是如果没有`foreign key`定义（在我见过的大多数数据库中都是如此），那么您就无法在数据库中找到链接。您必须查看代码（如果有的话）并尝试找到线索。

# java - 在 Java 中声明类型选项的对象

> ID：10308419
> 
> 赞同：0
> 
> 时间：2012-04-25T02:02:45.273
> 
> 标签：java, string, option

如何`option`在 Java 中声明一个类型的对象？有人告诉我，以下代码会将字符串向量转换为选项向量，但`new Option(String)`不是有效的构造函数：

```
private <T> Vector<Option> convertToOptions( Vector<T> convert )
{
     Vector<Option> options = new Vector<Option>();
     for ( T temp : convert )
          options.add( new Option( temp.toString() ) );
     return options;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:27:26.557

看起来您可能需要创建一个`AttributeSet`然后将其转换为`Option`? 像这样的东西...

```
SimpleAttributeSet set = new SimpleAttributeSet();
for ( T temp : convert ){
    set.add(temp.getName(),temp.getValue());
    }
Option option = new Option(set); 
```

否则，如果您正在创建下拉菜单，您是否使用`JComboBox`? 如果是这样，这有一个`JComboBox(Vector)`构造函数 - 可能会容易得多。否则，您使用什么类来创建下拉列表？

# javascript - 如何在文本框中输入按键时生成锚标记的单击事件

> ID：10308420
> 
> 赞同：1
> 
> 时间：2012-04-25T02:02:52.927
> 
> 标签：javascript, jsp, dom-events

我正在开发一个 JSP 页面，其中有许多锚标记。所以我放了一个文本框，我可以在其中搜索页面上的所有锚标记。我正在使用 Javascript。

现在我需要的是，当我在文本框中输入一个锚标记名称并按`Enter`Key 时，它应该`onclick`从那个特定的锚标记开始工作。

我已经尝试了以下代码，但它对我不起作用：

```
<script>
function searchkeypress(e)
{
if(typeof e=='undefined'&& window.event){e=window.event;}
if(e.keycode==13)
document.getElementById("search").click();
}
</script>

<input type="text" id="text1" onkeypress="searchkeypress(event)"/>
<a id="search" href="#Ajax" onclick="index.jsp"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T04:09:04.997

```
<input type="text" id="txtSearch" onkeydown="if (event.keyCode == 13) document.getElementById('index').click()"/>
<a id="index" href="index.jsp"/> 
```

# jasper-reports - iReport 4.5.1 抛出 ArrayIndexOutOfBoundException

> ID：10308422
> 
> 赞同：1
> 
> 时间：2012-04-25T02:03:29.073
> 
> 标签：jasper-reports, ireport

***加载iReport 4.5.1***新安装时收到以下错误消息：

```
java.lang.ArrayIndexOutOfBoundsException: 3184
at sun.awt.shell.Win32ShellFolder2.getFileChooserIcon(Win32ShellFolder2.java:748)
at sun.awt.shell.Win32ShellFolderManager2.get(Win32ShellFolderManager2.java:248)
at sun.awt.shell.ShellFolder.get(ShellFolder.java:221)
at com.sun.java.swing.plaf.windows.WindowsLookAndFeel$LazyWindowsIcon.createValue(WindowsLookAndFeel.java:1873)
at javax.swing.UIDefaults.getFromHashtable(UIDefaults.java:185)
at javax.swing.UIDefaults.get(UIDefaults.java:130)
at javax.swing.MultiUIDefaults.get(MultiUIDefaults.java:44)
at javax.swing.UIDefaults.getIcon(UIDefaults.java:411)
at javax.swing.UIManager.getIcon(UIManager.java:613)
at javax.swing.plaf.basic.BasicFileChooserUI.installIcons(BasicFileChooserUI.java:237)
at javax.swing.plaf.basic.BasicFileChooserUI.installDefaults(BasicFileChooserUI.java:219)
at javax.swing.plaf.basic.BasicFileChooserUI.installUI(BasicFileChooserUI.java:135)
at com.sun.java.swing.plaf.windows.WindowsFileChooserUI.installUI(WindowsFileChooserUI.java:126)
at javax.swing.JComponent.setUI(JComponent.java:653)
at javax.swing.JFileChooser.updateUI(JFileChooser.java:1755)
at javax.swing.JFileChooser.setup(JFileChooser.java:366)
at javax.swing.JFileChooser.<init>(JFileChooser.java:341)
at javax.swing.JFileChooser.<init>(JFileChooser.java:300)
at com.jaspersoft.ireport.designer.options.IReportPanel.jButtonAddClasspathItemActionPerformed(IReportPanel.java:2216)
at com.jaspersoft.ireport.designer.options.IReportPanel.access$2000(IReportPanel.java:84)
at com.jaspersoft.ireport.designer.options.IReportPanel$27.actionPerformed(IReportPanel.java:938)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1849)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2169)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:420)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:258)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
at java.awt.Component.processMouseEvent(Component.java:5501)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3135)
at java.awt.Component.processEvent(Component.java:5266)
at java.awt.Container.processEvent(Container.java:1966)
at java.awt.Component.dispatchEventImpl(Component.java:3968)
at java.awt.Container.dispatchEventImpl(Container.java:2024)
at java.awt.Component.dispatchEvent(Component.java:3803)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4212)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:3892)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:3822)
at java.awt.Container.dispatchEventImpl(Container.java:2010)
at java.awt.Window.dispatchEventImpl(Window.java:1778)
at java.awt.Component.dispatchEvent(Component.java:3803)
[catch] at java.awt.EventQueue.dispatchEvent(EventQueue.java:463)
at org.netbeans.core.TimableEventQueue.dispatchEvent(TimableEventQueue.java:104)
at java.awt.EventDispatchThread.pumpOneEventForHierarchy(EventDispatchThread.java:242)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:163)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:157)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:149)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:110) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T06:27:45.560

***这是在Vista***或***Windows 7***上运行的*iReport*的已知问题。

 **您可以尝试将您的 JVM 升级到 1.7（在某些情况下是 1.6）版本。

有关更多详细信息，您可以阅读[JasperForge.org](http://jasperforge.org)上的这篇文章：

*   [无法“添加文件夹”到选项 -> 类路径](http://jasperforge.org/plugins/espforum/view.php?group_id=83&forumid=101&topicid=69115)
*   [尝试打开文档时出现错误 java 3184](http://jasperforge.org/plugins/espforum/view.php?group_id=112&forumid=102&topicid=71460)

***更新：***

***`ireport.conf`***您可以通过文件夹中的文件为 iReport 设置 JDK *`iReport-x.y.z\etc`*。借助`jdkhome`属性，我们可以设置 JDK 路径。

样本：

```
jdkhome="/path/to/jdk" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:50:59.063

我刚刚发现这个问题可能是由 JDK 版本以外的其他原因引起的。我在 Windows 7 上运行 iReport 4.5.1 并尝试 JDK 1.6 和 1.7 得到相同的错误。比我发现问题与 SQL 语句检索的某些字段有关（mssql 2008 R2 中的存储过程）。问题是将 ntext 字段转换为 java.lang.String。我将字段类更改为 java.sql.Clouds 并发现生成了报告（但此列不可读）。当我弄乱不同的类型时，我发现问题出在列宽上。当我的程序检索许多参数时，我在向导生成的设计中有许多“细”列。当我在布局上调整（放大）ntext 结果列并单击“预览”时，一切都很好，当列变薄以填充数据时（一个字母宽度，因为换行是正确的）我'**

# php - 在while语句PHP中选择ID

> ID：10308424
> 
> 赞同：-1
> 
> 时间：2012-04-25T02:03:44.547
> 
> 标签：php, mysql, while-loop

我正在尝试创建一个允许用户删除他们留下的帖子的功能。基本上我正在尝试选择一个 ID，然后将其传递给另一个函数以将其删除。当前的代码正在删除每条评论，而不仅仅是像我尝试的那样链接到 ID 的评论。

这是表格值

```
Table eventUpdates
ID - unique ID. Trying to use this value to delete the post
eventID - references an eventID from another table
eventReply - the "message" or response
eventUserID -ID of the user posting the message
username -username of the person
eventTimestamp -timestamp 
```

因此，目前每个回复都被删除。我不能让它只删除我发送的 ID。

```
<table border ="1">
<?
$eventUpdates = mysql_query($sql);
while ($list = mysql_fetch_assoc($eventUpdates)) {  
        echo $updateID;
                echo '<tr><td>';
                    echo $list['username'],"</br>", $list['eventTimestamp'],'<br/>';
                        if($list['eventUserID'] == $userid){ //used for deleting posts. Checks the session to make sure it's the user who made the post
                                ?>
                                <form method="post">
                                <input type="submit" name="deleteUpdate" value="Delete Update">
                                </form>
                                <?
                                if(isset($_POST['deleteUpdate'])){
                                    $updateID = $list['ID'];
                                    $delete = new postprocessing;
                                    $delete->deleteEventUpdate($updateID);
                                    echo '<meta http-equiv="refresh" content="0;url=main.php">';
                                }
                        }
                        echo '</td><td>';
                        echo $list['eventReply'];
                        echo '</td></tr>';
} 
```

这是用于删除它的函数

```
function deleteEventUpdate($ID){
   mysql_query("delete from eventUpdates where ID = '$ID'");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:15:13.810

这是因为您没有在帖子数组中指定要删除的 ID，因此他们创建的每条评论都“匹配”删除条件。`$_POST`数组看起来像：

$_POST = array('deleteUpdate'='删除更新');

因此，当您循环浏览事件列表时，用户“拥有”（`$list['eventUserID'] == $userid`）的每条评论都符合条件“ `isset($_POST['deleteUpdate'])`”：

您需要包含一个隐藏的输入，其 ID 是您要删除的特定评论并与之匹配：

```
<form method="post">
<input type="submit" name="deleteUpdate" value="Delete Update">
<input name='post_id' value="<?php echo $list['ID'];?>" type='hidden' />
</form> 
```

然后在循环中：

```
if(isset($_POST['deleteUpdate']) && isset($_POST['post_id']) && $_POST['post_id']==$list['ID']){... 
```

# c++ - 将 std::cout 重定向到 QTextEdit

> ID：10308425
> 
> 赞同：3
> 
> 时间：2012-04-25T02:04:02.823
> 
> 标签：c++, qt, iostream

我是 Qt 应用程序开发的新手，非常感谢您的帮助。这是 [重定向 std::cout 到 QTextEdit的重新发布](https://stackoverflow.com/questions/9211298/redirect-stdcout-to-qtextedit?answertab=oldest#tab-top)

我正在尝试重定向`std::cout`到 a`QTextEdit`并且我已经看到并尝试测试以下链接中提供的示例。

参考链接1： http: [//lists.trolltech.com/qt-interest/2005-06/thread00166-0.html](http://lists.trolltech.com/qt-interest/2005-06/thread00166-0.html)

使用 Qt Creator 2.4.1 测试参考链接 1 中的示例。

直到ed1.pro

```
SOURCES += \
main.cpp
HEADERS += \
qdebugstream.h 
```

qdebugstream.h

```
 #ifndef QDEBUGSTREAM_H
#define QDEBUGSTREAM_H

#include <iostream>
#include <streambuf>
#include <string>

#include "qtextedit.h"

class QDebugStream : public std::basic_streambuf<char>
{
public:
 QDebugStream(std::ostream &stream, QTextEdit* text_edit) : m_stream(stream)
 {
  log_window = text_edit;
  m_old_buf = stream.rdbuf();
  stream.rdbuf(this);
 }
 ~QDebugStream()
 {
  // output anything that is left
  if (!m_string.empty())
   log_window->append(m_string.c_str());

  m_stream.rdbuf(m_old_buf);
 }

protected:
 virtual int_type overflow(int_type v)
 {
  if (v == '\n')
  {
   log_window->append(m_string.c_str());
   m_string.erase(m_string.begin(), m_string.end());
  }
  else
   m_string += v;

  return v;
 }

 virtual std::streamsize xsputn(const char *p, std::streamsize n)
 {
  m_string.append(p, p + n);

  int pos = 0;
  while (pos != std::string::npos)
  {
   pos = m_string.find('\n');
   if (pos != std::string::npos)
   {
    std::string tmp(m_string.begin(), m_string.begin() + pos);
    log_window->append(tmp.c_str());
    m_string.erase(m_string.begin(), m_string.begin() + pos + 1);
   }
  }

  return n;
 }

private:
 std::ostream &m_stream;
 std::streambuf *m_old_buf;
 std::string m_string;

  QTextEdit* log_window;
    };

#endif 
```

主文件

```
#include "qdebugstream.h"
#include "qtextedit.h"
#include <QtGui>

int main(int argc, char **argv)
{
    QApplication application(argc, argv);
       application.connect(&application, SIGNAL(lastWindowClosed()),
    &application, SLOT(quit()));

       QMainWindow* mainWindow = new QMainWindow();

       QTextEdit* myTextEdit = new QTextEdit(mainWindow, "myTextEdit");
       myTextEdit->setTextFormat(Qt::LogText);
       QDebugStream qout(std::cout, myTextEdit);

       mainWindow->show();
       std::cout << "Send this to the Text Edit!" << std::endl;

       return application.exec();
} 
```

我收到以下错误消息：

> C:\Documents and Settings\Administrator\untitled1-build-desktop-Qt_4_8_1_for_Desktop_-_MSVC2010__Qt_SDK__Debug..\untitled1\main.cpp:13: 错误: C2664: 'QTextEdit::QTextEdit(const QString &,QWidget *)' : 无法转换参数 1 从 'QMainWindow *' 到 'const QString &' 原因：无法从 'QMainWindow *' 转换为 'const QString' 没有构造函数可以采用源类型，或者构造函数重载决议不明确
> 
> C:\Documents and Settings\Administrator\untitled1-build-desktop-Qt_4_8_1_for_Desktop__-_MSVC2010__Qt_SDK__Debug..\untitled1\main.cpp:14：错误：C2039：'setTextFormat'：不是'QTextEdit'的成员
> 
> c:\qtsdk\desktop\qt\4.8.1\msvc2010\include\qtgui\qtextedit.h:70：参见“QTextEdit”的声明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:16:23.890

查看[文档](http://qt-project.org/doc/qt-4.8/qtextedit.html)，`QTextEdit`有两个构造函数，

```
QTextEdit::QTextEdit ( QWidget * parent = 0 ) 
```

和

```
QTextEdit::QTextEdit ( const QString & text, QWidget * parent = 0 ) 
```

尝试改变

```
QTextEdit* myTextEdit = new QTextEdit(mainWindow, "myTextEdit"); 
```

至

```
QTextEdit* myTextEdit = new QTextEdit(mainWindow); 
```

这不会解决所有问题，因为仍有一些地方使用旧的 Qt3 API。您需要根据需要进行更改。

# android - 在android中，为什么单例从不回收？

> ID：10308433
> 
> 赞同：0
> 
> 时间：2012-04-25T02:05:28.237
> 
> 标签：android

我对此感到困惑。刚开始使用 android 并且有一个很长的表单，需要多个活动来组合一个对象。我想将对象从一个活动传递到另一个活动来构建它。在阅读了许多帖子和博客以及 Android Dev 页面之后，似乎对于非持久数据，最好的选择是子类化应用程序或创建单例。我查看了这篇文章[openFileOutput 在单例类中无法正常工作 - 想法/解决方法？](https://stackoverflow.com/questions/6538955/openfileoutput-not-working-properly-inside-a-singleton-class-ideas-workarounds/6539080#6539080)现在我的问题是，**为什么单身人士没有被回收？** 如果我们在 Activity A 中 createSingleton() ，然后移动到 Activity B 并且我们永远不会传递对单例的引用，那么垃圾回收器如何知道我们将再次回到它？在我看来，当活动 A 被回收并且我们已经转移到活动 B 时，单身人士将会死去。

如果我们看下面的单例..

```
public final class SomeSingleton implements Cloneable {

    private static final String TAG = "SomeSingleton";
    private static SomeSingleton someSingleton ;
    private static Context mContext;    

    /**
     * I'm private because I'm a singleton, call getInstance()
     * @param context
     */
    private SomeSingleton(){
        // Empty
    }

    public static synchronized SomeSingleton getInstance(Context context){
        if(someSingleton == null){
        someSingleton = new SomeSingleton();
        }
    mContext = context.getApplicationContext();
    return someSingleton;
    }

    public void playSomething(){
        // Do whatever
        mContext.openFileOutput("somefile", MODE_PRIVATE); // etc...
    }

    public Object clone() throws CloneNotSupportedException {
        throw new CloneNotSupportedException("I'm a singleton!");
    }
} 
```

我们通过 getInstance() 创建它的一个实例，该类将该类的单个实例放入静态字段 someSingleton 中。为什么这个实例永远不会被回收？如果答案是，“静态字段永远不会被回收？” 如果我们有很多内存，是什么阻止我们用完所有的内存？简单的设计考虑？如果我们使用大量贡献的库，而我们不知道有多少静态字段，这似乎是有风险的。我只是有一种感觉，作为新手，我在 OOP 中缺少一些基本规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:34:47.087

一般模式是将对单例类的引用放在静态字段中。静态字段不绑定到特定实例，因此它们会一直存在，直到 JVM 进程处于活动状态。有多少活动访问它并不重要。如果您需要“回收”单例，也许您真的不需要使用单例？或提供明确的`close()/open()`等方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:36:48.903

我认为你的 Singleton 没有被回收的原因是因为你认为 Android 中的活动没有被销毁。

您提出了一个问题，例如“当我们从活动 A 转移到 B 时会发生什么”。但是当你在 Android 中这样做时，Activity A 很少**被破坏**。它通常只是进入[`onPause()`](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)状态。因此，如果用户决定点击后退按钮足够多的时间以返回活动 A，那么您的活动 A 仍然（大部分）完好无损。

# c# - 如果匿名类型对象不可枚举，它如何转换为字符串？

> ID：10308434
> 
> 赞同：1
> 
> 时间：2012-04-25T02:05:46.683
> 
> 标签：c#

假设我定义了一个这样的变量：

```
var o = new { RBI = 108, Name = "Roberto Alamar" }; 
```

我可以做类似的事情：

```
Console.WriteLine("{0}", o); 
```

但如果我尝试：

```
foreach (var i in o) {
    Console.WriteLine("{0}", o[i]);
} 
```

我收到一个错误：

```
foreach statement cannot operate on variables of type 'AnonymousType#1' because 'AnonymousType#1' does not contain a public definition for 'GetEnumerator' 
```

那么它是如何在引擎盖下工作的呢？我认为将对象转换为字符串的方法必须遍历所有属性才能完成任务。是否有一些特殊的方法可以让这种情况发生，或者我误解了它是如何工作的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T15:07:46.120

> 它是如何在引擎盖下工作的？我认为将对象转换为字符串的方法必须遍历所有属性才能完成任务。

您的假设是 ToString 的实现在所有匿名类型的所有实例之间共享；例如，有一些帮助器在逻辑上类似于你在 JavaScript 中所做的事情：

```
var s = "";
for (property in this)
   s += property + ":" + this[property]; 
```

这个假设是错误的；对于匿名类型，没有一个通用的 ToString 实现。相反，*编译器知道匿名方法的所有属性是什么，因此它会为**每个*不同的匿名类型生成一个全新的 ToString 自定义实现。

在 C# 中，循环不像 JavaScript 中`foreach`的循环那样做。`for-in`C# 循环枚举*集合的成员*。JS 循环枚举*对象的属性*。

如果你想在 C# 中枚举一个对象的属性，你可以这样做，它只需要更多的工作：

```
var s = "";
foreach (PropertyInfo propertyInfo in this.GetType().GetProperties())
   s += propertyInfo.Name + ":" + propertyInfo.GetValue(this).ToString(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T02:12:43.130

你不能这样做，因为匿名类型没有实现 IEnumerable 接口——它不是一个集合，只是一个对象。您必须显式打印这些值。

```
Console.WriteLine("{0}", o.RBI);
Console.WriteLine("{0}", o.Name); 
```

但是让自己退后一步。你需要匿名类型吗？定义您自己的自定义类型。

```
class MyType // give it more meaningful name 
{
     public int RBI { get; set;}
     public string Name { get; set;}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T02:11:34.817

所有匿名对象都有相同的方法。只要它们具有相同类型的相同命名字段，它们就可以相互比较，它们都有一个`ToString()`实现，可以提供如您所见的字符串。但是他们没有枚举器的实现。他们为什么要这样做？从某种意义上说，它不像 Javascript，您可以枚举属性名称/索引/任何东西，因为......它是 C#，但事实并非如此。为什么你会觉得有什么不同？

如果你想要一些类似的工作，幸运的是我们有隐式类型的变量和反射来帮助我们。

```
var obj = new { Foo = "asd", Bar = "add", Gar = "123" };
var adapter = PropertyAdapter.Create(obj);
foreach (var name in adapter)
    Console.WriteLine("obj.{0} = {1}", name, adapter[name]); 
```

```
public static class PropertyAdapter
{
    public static PropertyAdapter<T> Create<T>(T obj)
    {
        return new PropertyAdapter<T>(obj);
    }
}

public class PropertyAdapter<T> : IEnumerable<string>
{
    private T obj;
    public PropertyAdapter(T obj) { this.obj = obj; }

    public override string ToString()
    {
        return obj.ToString();
    }

    public object this[string name]
    {
        get
        {
            return typeof(T).GetProperty(name).GetValue(obj, null);
        }
    }

    public IEnumerator<string> GetEnumerator()
    {
        return typeof(T)
            .GetProperties()
            .Select(pi => pi.Name)
            .GetEnumerator();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-25T02:12:23.380

当你这样做

```
Console.WriteLine("{0}", o); 
```

真正发生的是对 Object.ToString() 的调用，它是继承的，并且具有用于打印属性和值的匿名类型的内置实现。

另一方面，

```
foreach (var i in o) { .. } 
```

不能工作，因为`o`必须是 IEnumerable（或 IEnumerable<>）

**编辑**：通过执行以下操作可以实现（出于解释目的，否则无用），与~~您期望~~的对使用时打印的字符串的枚举等效：`WriteLine`

```
foreach (var i in o.ToString()) { .. } 
```

然而，正如 Jeff Mercado 指出的那样，这不是您想要的（它不会遍历属性 - 只会遍历已经格式化的字符串的单个字符）

# android - http删除403错误tomcat

> ID：10308436
> 
> 赞同：3
> 
> 时间：2012-04-25T02:06:20.090
> 
> 标签：android, http, http-delete

从我的 android 应用程序中，我试图删除存储在 tomcat 的 webapps 目录中的图像。当我尝试以下代码时，它给了我 403 状态代码。我在网上查了一下，发现如果请求合法但该操作被禁止，它会给出该代码。谁能告诉我哪里出错了。我的代码是：

```
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.setRequestMethod("DELETE");
int responseCode = connection.getResponseCode(); 
```

当我尝试使用 HttpClient 时，它给了我同样的错误-HTTP/1.1 403 Forbidden

```
HttpClient httpClient = new DefaultHttpClient();
                  try {
                    httpClient.getParams().setParameter(
                            "http.socket.timeout", new Integer(90000));
                    HttpDelete delete = new HttpDelete(new URI(
                            "http://192.168.2.1:9090/LocationUpdaterServlet/images/"
                                    + userid));
                    Toast.makeText(Image.this, "Removing your picture", 5000).show();
                    HttpResponse response = httpClient.execute(delete);
                    if (response.getStatusLine().getStatusCode() != HttpStatus.SC_OK) {
                        System.out.println(response.getStatusLine());
                    } else {
                        // Here every thing is fine.
                    }
                    HttpEntity resEntity = response.getEntity();
                    if (resEntity == null)
                        System.out
                                .println("---------Error No Response !!!-----");
                }catch (Exception ex) {
                    System.out.println("---------Error----"+ ex.getMessage());
                    ex.printStackTrace();
                } finally {
                    httpClient.getConnectionManager().shutdown();

                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-27T01:30:55.837

在 web.xml 中，启用其他 http 方法：

```
<servlet>
    <servlet-name>default</servlet-name>
    <servlet-class>org.apache.catalina.servlets.DefaultServlet</servlet-class>
    <init-param>
        <param-name>debug</param-name>
        <param-value>0</param-value>
    </init-param>
    <init-param>
        <param-name>listings</param-name>
        <param-value>false</param-value>
    </init-param>
    <init-param>
        <param-name>readonly</param-name>
        <param-value>false</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

参数`debug`和`listings`默认在tomcat中加载，而默认`readonly`为true，意味着只有GET和POST可用。

其他可用的参数是：

```
     调试记录的消息的调试详细级别     
                         通过这个 servlet。[0]                          

     fileEncoding 用于读取静态资源的编码   
                         [平台默认]                             

     input 读取时的输入缓冲区大小（以字节为单位）      
                         要服务的资源。[2048]                

     Listings 是否应该产生目录列表，如果有
                         此目录中没有欢迎文件吗？[错误的]
                         警告：目录列表有很多    
                         条目可能很慢并且可能会消耗            
                         很大比例的服务器资源。   

     output 写入时的输出缓冲区大小（以字节为单位）     
                         要服务的资源。[2048]                

     readonly 这个上下文是“只读”的，所以 HTTP           
                         PUT 和 DELETE 等命令是               
                         被拒绝？[真的]                              

     readmeFile 与目录一起显示的文件    
                         内容。[无效的]                               

     sendfileSize 如果使用的连接器支持 sendfile，则此  
                         表示以 KB 为单位的最小文件大小     
                         将使用哪个发送文件。使用负数    
                         值始终禁用 sendfile。[48]        

     useAcceptRanges 是否应包含 Accept-Ranges 标头    
                         在适当的地方回应？[真的]         

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:26:25.967

Tomcat 提供了一个 servlet 初始化参数（只读），您可以设置它以启用 PUT、DELETE。

我遇到了一个不同但相关的问题，我注意到了这个参数。

在此处查看文档以获取信息：http: [//tomcat.apache.org/tomcat-7.0-doc/default-servlet.html](http://tomcat.apache.org/tomcat-7.0-doc/default-servlet.html)

# tridion - 调试 SDL Tridion 2011 自定义解析器和 GetListPublishItems() 方法

> ID：10308439
> 
> 赞同：4
> 
> 时间：2012-04-25T02:06:29.813
> 
> 标签：tridion, tridion-2011

在我的 C# 模板构建块之一中，我有以下代码行

```
publication.GetListPublishItems(uriTarget, false, false,
         TDSDefinesInterop.ListColumnFilter.XMLListDefault, listRowFilter); 
```

在实现自定义解析器之前，此代码执行得非常快。现在我的解析器是为 Publication ItemType 实现的，代码执行得非常慢。由此我得出结论，新的解析器正在由该方法在幕后调用`GetListPublishItems()`（这是有道理的）。我假设我需要以某种方式修改解析器。但是，当调用该方法时，我似乎无法在解析器中遇到断点。

我通常在调试模板时附加到“TcmTemplateDebugHost”，或者在调试解析器时直接附加到发布者进程。我的解析器似乎只在我第一次按下 Publish 时才被击中，而不是在调用 GetListPublishItems() 方法时。

所以这个问题是双重的：

1.  使用 GetListPublishItems() 方法时是否调用解析器？
2.  假设它们被调用，当我需要在这种情况下调试它时，我应该附加哪个进程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T06:55:02.170

我不确定，但我无法想象自定义解析器不会参与 GetListPublishItems() 的合理场景。您的证据似乎支持这一点，但当然，如果我们能回答您问题的第二部分，我们肯定会知道。

我想您对托管过程所做的任何正常假设都可能是正确的，例如，如果您在发布期间调用模板，那么 TcmPublisher 将是该过程。或者，如果您要在 GUI 中打开发布的发布对话框并点击“显示要发布的项目”，那么它可能是 COM 代理进程 (dllhost.exe)...等等。但是，一种确定的方法是使用 Sysinternals Process Explorer，它有一个非常方便的功能，可以让您搜索哪些进程加载了给定的 dll。（查看“查找”菜单）

断点无法执行的一个可能原因是 Visual Studio 无法正确加载符号。当您调试模板构建块时，Tridion 会从已知位置显式加载符号，您可以配置该位置（CM 配置中的 tridion.templating/debugging/@pdb 目录），这是模板上传器放置 PDB 的位置。当发布者进程加载自定义解析器时，我怀疑是否有任何此类特殊机制来定位符号，因此您必须回退到标准的 .NET 方法。我要尝试的第一件事是确保自定义解析器类的符号与程序集位于同一位置（即您的 bin 目录）。如果失败，您也许可以在 Visual Studio 中配置符号路径。

首先要做的是在 Visual Studio 中观察调试输出。如果您启动该过程然后附加到它，您将看到正在加载的各种程序集。如果 Visual Studio 可以找到符号，您将看到输出显示“已加载符号”。

# objective-c - 以编程方式关闭单个监视器

> ID：10308447
> 
> 赞同：8
> 
> 时间：2012-04-25T02:08:41.713
> 
> 标签：objective-c, macos, cocoa

是否有 API 或方法可以通过 Mac 上的 Objective-C 以编程方式关闭单个外部显示器？

我正在寻找一个可以控制辅助显示器（没有物理电源按钮）的小型菜单栏应用程序，但仍保持主显示器处于使用状态。

在 API 文档中搜寻，除了阅读状态之外，我似乎找不到任何东西。所以希望其他人可能有一个想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T04:08:46.013

您不能“以编程方式关闭单个显示器”，这在物理上是不可能的。你能做的最多就是告诉操作系统不要使用显示器，但我认为你不能像那样更改系统范围的设置，尤其是在你正在处理的级别（Obj-C）。

查看@Halley 评论中提到的Core Graphics API，尝试从该[`CGBeginDisplayConfiguration`](https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/doc/uid/TP30001070-CH202-CGBeginDisplayConfiguration)方法开始，看看您是否可以根据自己的喜好设置显示配置。

*编辑：*或者，您也可以使用，默认情况下用黑色填充捕获的显示。然后，您可以在想要重新打开它时拨打电话。[`CGDisplayCapture`](https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/doc/uid/TP30001070-CH202-F17097)`(displayID)`[`CGDisplayRelease`](https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/doc/uid/TP30001070-CH202-F17105)`(displayID)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T02:21:29.883

[通过I/O Kit](http://developer.apple.com/library/mac/#documentation/devicedrivers/conceptual/IOKitFundamentals/Introduction/Introduction.html)似乎可以休眠显示：

*   [https://web.archive.org/web/20161106204726/http://www.cocoabuilder.com/archive/cocoa/191807-sleep-display.html](https://web.archive.org/web/20161106204726/http://www.cocoabuilder.com/archive/cocoa/191807-sleep-display.html)
*   [http://explanatorygap.net/2009/01/31/a-screensaver-to-send-your-display-to-sleep/](http://explanatorygap.net/2009/01/31/a-screensaver-to-send-your-display-to-sleep/)

但我不确定它是否可以控制单个显示器。

# ios - 通过分析检测到潜在泄漏

> ID：10308451
> 
> 赞同：0
> 
> 时间：2012-04-25T02:09:34.137
> 
> 标签：ios, memory-leaks

以下是我的代码：

```
 UIImage *takePhotoImg = [UIImage imageNamed:@"add_pic.png"];
    self.takePhoto = [[UIButton alloc] initWithFrame:CGRectMake(120, 100, takePhotoImg.size.width, takePhotoImg.size.height)];
    [_takePhoto setImage:takePhotoImg forState:UIControlStateNormal];
    [_takePhoto addTarget:self action:@selector(takePhotoBtn) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:_takePhoto]; 
```

当我使用分析时，它显示以下行：

```
[_takePhoto setImage:takePhotoImg forState:UIControlStateNormal]; 
```

分配的对象的潜在泄漏。我需要添加版本，还是忽略？
先感谢您

更新：我确实在我的 dealloc 中释放了按钮 _takePhoto：

```
-(void)dealloc
{
    [_takePhoto release];
    [super dealloc];
} 
```

我的财产 ：

```
@property(nonatomic,retain)UIButton *takePhoto; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:14:02.367

如果您不使用 ARC，那么是的，您需要释放它。当您将其添加到`self.view`的子视图时，`self.view`将保留它，因此按钮不会消失。

如果您不需要访问按钮并且不需要保留引用，则可以在`addSubview:`调用后立即释放它。

但是，它看起来像是`takePhoto`您班级的一个属性。如果是这种情况，并且您想保留对按钮的引用以供以后使用，只需将`[_takePhoto release]`调用添加到您的类`dealloc`方法即可。这应该会抑制代码分析警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T03:40:46.817

更改代码：

```
 self.takePhoto = [[UIButton alloc] initWithFrame:CGRectMake(120, 100,      takePhotoImg.size.width, takePhotoImg.size.height)]; 
```

至

```
 self.takePhoto = [[[UIButton alloc] initWithFrame:CGRectMake(120, 100, takePhotoImg.size.width, takePhotoImg.size.height)] autorelease]; 
```

delloc 方法中的 [_takePhoto release] 用于 setter 方法中的 retain。每次调用 self.takePhoto = aNewTakePhote，aNewTakePhote 都会被保留一次。

# java - 如何将以下 json 字符串转换为 java 对象？

> ID：10308452
> 
> 赞同：103
> 
> 时间：2012-04-25T02:09:52.977
> 
> 标签：java, json, jackson

我想将以下 JSON 字符串转换为 java 对象：

```
String jsonString = "{
  "libraryname": "My Library",
  "mymusic": [
    {
      "Artist Name": "Aaron",
      "Song Name": "Beautiful"
    },
    {
      "Artist Name": "Britney",
      "Song Name": "Oops I did It Again"
    },
    {
      "Artist Name": "Britney",
      "Song Name": "Stronger"
    }
  ]
}" 
```

我的目标是轻松访问它，例如：

```
(e.g. MyJsonObject myobj = new MyJsonObject(jsonString)
myobj.mymusic[0].id would give me the ID, myobj.libraryname gives me "My Library"). 
```

我听说过 Jackson，但我不确定如何使用它来适应我拥有的 json 字符串，因为它不仅仅是键值对，因为涉及“mymusic”列表。我如何与杰克逊一起完成此任务，或者如果杰克逊不是最适合此任务的人，我是否有更简单的方法可以完成此任务？

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2012-04-25T21:22:57.147

无需为此使用 GSON；杰克逊可以做简单的地图/列表：

```
ObjectMapper mapper = new ObjectMapper();
Map<String,Object> map = mapper.readValue(json, Map.class); 
```

或更方便的 JSON 树：

```
JsonNode rootNode = mapper.readTree(json); 
```

顺便说一句，您没有理由不能真正创建 Java 类并更方便地执行它（IMO）：

```
public class Library {
  @JsonProperty("libraryname")
  public String name;

  @JsonProperty("mymusic")
  public List<Song> songs;
}
public class Song {
  @JsonProperty("Artist Name") public String artistName;
  @JsonProperty("Song Name") public String songName;
}

Library lib = mapper.readValue(jsonString, Library.class); 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-04-25T02:19:12.020

查看 Google 的 Gson：[http ://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

从他们的网站：

```
Gson gson = new Gson(); // Or use new GsonBuilder().create();
MyType target2 = gson.fromJson(json, MyType.class); // deserializes json into target2 
```

您只需要使用 json 字符串中的所有字段创建一个 MyType 类（当然是重命名的）。如果您更喜欢手动进行所有解析（也很容易），则在处理数组时可能会变得更复杂一些，请查看[http://www.json.org/](http://www.json.org/)并下载 Json 的 Java 源代码解析器对象。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-07-25T13:25:19.917

```
Gson gson = new Gson();
JsonParser parser = new JsonParser();
JsonObject object = (JsonObject) parser.parse(response);// response will be the json String
YourPojo emp = gson.fromJson(object, YourPojo.class); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-25T02:18:39.743

Gson 也有好处：[http ://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

" Gson 是一个 Java 库，可用于将 Java 对象转换为其 JSON 表示形式。它还可用于将 JSON 字符串转换为等效的 Java 对象。Gson 可以处理任意 Java 对象，包括您所做的预先存在的对象没有源代码。”

检查 API 示例：[https](https://sites.google.com/site/gson/gson-user-guide#TOC-Overview) ://sites.google.com/site/gson/gson-user-guide#TOC-Overview 更多示例：[http ://www.mkyong.com/java/how-do-convert-java -object-to-from-json-format-gson-api/](http://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-07T10:57:08.507

[Underscore-java](https://github.com/javadev/underscore-java)（**我是它的开发者**）可以将 json 转换为 Object。

```
import com.github.underscore.U;

    String jsonString = "{\n" +
            "        \"libraryname\":\"My Library\",\n" +
            "                \"mymusic\":[{\"Artist Name\":\"Aaron\",\"Song Name\":\"Beautiful\"},\n" +
            "        {\"Artist Name\":\"Britney\",\"Song Name\":\"Oops I did It Again\"},\n" +
            "        {\"Artist Name\":\"Britney\",\"Song Name\":\"Stronger\"}]}";
    Map<String, Object> jsonObject = U.fromJsonMap(jsonString);
    System.out.println(jsonObject);

    // {libraryname=My Library, mymusic=[{Artist Name=Aaron, Song Name=Beautiful}, {Artist Name=Britney, Song Name=Oops I did It Again}, {Artist Name=Britney, Song Name=Stronger}]}

    System.out.println(U.<String>get(jsonObject, "mymusic[0].Artist Name"));
    // Aaron 
```

# c# - 检查日期是否相交？

> ID：10308453
> 
> 赞同：-4
> 
> 时间：2012-04-25T02:09:58.727
> 
> 标签：c#

我有两个由两个 DateTime 值组成的类。开始日期和结束日期。

基本上，我需要一种方法来检查一个类的开始日期 - 结束日期范围是否与其他类相交。

是否有捷径可寻？

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T02:19:19.267

以下是时间可以重叠的可能方式（假设一个对象开始`earlier`，一个对象开始`later`）。

```
time  ----------------------------------------------------------> 

(complete overlap) 
earlier :     start |------------------------------------| end   
later   :          start |--------------------------| end

(partial overlap) 
earlier :       start |--------------------------------| end
later   :           start |--------------------------------| end   

(start date matches)
earlier :       start |----------------------------------| end
later   :       start |----------------------------------| end

(no overlap)
earlier :       start |------------| end
later   :                                start |--------| end 
```

如果是这种情况，您可以执行以下操作来检查（尽管有

```
var earlier = obj1.start < obj2.start ? obj1 : obj2;
var later   = obj2.start < obj2.start ? obj1 : obj2;

if (later.start < earlier.end)
{
    Console.WriteLine("Object 1 overlaps with Object 2");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T05:31:56.400

You can use the free [Time Period Library for .NET](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET):

```
// ----------------------------------------------------------------------
public void TimeRangeSample()
{
  // --- time range 1 ---
  TimeRange timeRange1 = new TimeRange(
    new DateTime( 2011, 2, 22, 14, 0, 0 ),
    new DateTime( 2011, 2, 22, 18, 0, 0 ) );
  Console.WriteLine( "TimeRange1: " + timeRange1 );
  // > TimeRange1: 22.02.2011 14:00:00 - 18:00:00 | 04:00:00

  // --- time range 2 ---
  TimeRange timeRange2 = new TimeRange(
    new DateTime( 2011, 2, 22, 15, 0, 0 ),
    new TimeSpan( 2, 0, 0 ) );
  Console.WriteLine( "TimeRange2: " + timeRange2 );
  // > TimeRange2: 22.02.2011 15:00:00 - 17:00:00 | 02:00:00

  // --- time range 3 ---
  TimeRange timeRange3 = new TimeRange(
    new DateTime( 2011, 2, 22, 16, 0, 0 ),
    new DateTime( 2011, 2, 22, 21, 0, 0 ) );
  Console.WriteLine( "TimeRange3: " + timeRange3 );
  // > TimeRange3: 22.02.2011 16:00:00 - 21:00:00 | 05:00:00

  // --- relation ---
  Console.WriteLine( "TimeRange1.GetRelation( TimeRange2 ): " +
                     timeRange1.GetRelation( timeRange2 ) );
  // > TimeRange1.GetRelation( TimeRange2 ): Enclosing
  Console.WriteLine( "TimeRange1.GetRelation( TimeRange3 ): " +
                     timeRange1.GetRelation( timeRange3 ) );
  // > TimeRange1.GetRelation( TimeRange3 ): EndInside
  Console.WriteLine( "TimeRange3.GetRelation( TimeRange2 ): " +
                     timeRange3.GetRelation( timeRange2 ) );
  // > TimeRange3.GetRelation( TimeRange2 ): StartInside

  // --- intersection ---
  Console.WriteLine( "TimeRange1.GetIntersection( TimeRange2 ): " +
                     timeRange1.GetIntersection( timeRange2 ) );
  // > TimeRange1.GetIntersection( TimeRange2 ):
  //             22.02.2011 15:00:00 - 17:00:00 | 02:00:00
  Console.WriteLine( "TimeRange1.GetIntersection( TimeRange3 ): " +
                     timeRange1.GetIntersection( timeRange3 ) );
  // > TimeRange1.GetIntersection( TimeRange3 ):
  //             22.02.2011 16:00:00 - 18:00:00 | 02:00:00
  Console.WriteLine( "TimeRange3.GetIntersection( TimeRange2 ): " +
                     timeRange3.GetIntersection( timeRange2 ) );
  // > TimeRange3.GetIntersection( TimeRange2 ):
  //             22.02.2011 16:00:00 - 17:00:00 | 01:00:00
} // TimeRangeSample 
```

# android - 线程不访问视图

> ID：10308455
> 
> 赞同：0
> 
> 时间：2012-04-25T02:10:24.707
> 
> 标签：android, multithreading, listview

我有一个填充列表视图的类，但它有一个错误，指出线程无法处理视图，我想知道是否有人知道在显示列表之前放置进程对话框的更好方法，谢谢。

```
public class MainActivity extends ListActivity {

// All static variables
static final String URL = "sample.com";
// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_ID = "id";
static final String KEY_NAME = "nome";
static final String KEY_END = "endereco";
static final String KEY_TEL = "telefone";
static final String KEY_BAI = "bairro";

private ProgressDialog progressDialog;
//private Handler handler;

ListAdapter adapter;
ListView lv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list);

    ActionBar actionBar = getActionBar();
    actionBar.setTitle("Test");
    actionBar.setDisplayHomeAsUpEnabled(true);
    actionBar.setIcon(R.drawable.icon);

    //handler = new Handler();

    new Thread(){            
         public void run() {
             runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    progressDialog = ProgressDialog.show(MainActivity.this, "", "loading...");                      
                }
            });             
             loadList();
            progressDialog.cancel();
        }
     }.start();

    lv = getListView();     

    lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String cost = ((TextView) view.findViewById(R.id.cost)).getText().toString();
            String description = ((TextView) view.findViewById(R.id.description)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), DescriptionActivity.class);
            in.putExtra("nome", ((TextView) view.findViewById(R.id.name)).getText().toString());
            in.putExtra("endereco", ((TextView) view.findViewById(R.id.cost)).getText().toString());
            in.putExtra("telefone", ((TextView) view.findViewById(R.id.description)).getText().toString());
            startActivity(in);
        }
    });
}

public void loadList(){

    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
        map.put(KEY_END, parser.getValue(e, KEY_END));
        map.put(KEY_TEL, parser.getValue(e, KEY_TEL));
        map.put(KEY_BAI, parser.getValue(e, KEY_BAI));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // Adding menuItems to ListView
    adapter = new SimpleAdapter(this, menuItems,
            R.layout.list_row_lojas,
            new String[] { KEY_NAME, KEY_END,  KEY_TEL, KEY_BAI }, new int[] {
                    R.id.name, R.id.description, R.id.cost, R.id.bairro });
    setListAdapter(adapter);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        Intent intent = new Intent(this, MainActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}
} 
```

> 04-24 23:03:50.871: E/AndroidRuntime(26159): android.view.ViewRootImpl$CalledFromWrongThreadException: 只有创建视图层次结构的原始线程才能触摸其视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:15:27.630

利用

```
MainActivity.this.runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    progressDialog = ProgressDialog.show(MainActivity.this, "", "loading...");                      
                }
            }); 
```

代替

```
 runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    progressDialog = ProgressDialog.show(MainActivity.this, "", "loading...");                      
                }
            }); 
```

# android - 安卓调度任务

> ID：10308465
> 
> 赞同：3
> 
> 时间：2012-04-25T02:11:21.293
> 
> 标签：android, service, scheduled-tasks, locationmanager

我有一个任务。

```
6:00 register locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                0, 0, locationListener);<br>
19:00 unregister locationManager.removeUpdates(locationListener); 
```

首先，我想使用服务，与`AlarmManager`. 但我不能发送`locationManager`和`locationListener`从活动到服务。

最后，我使用`AsyncTask`创建一个循环`doInbackground`来一直运行。如果时间是 6:00 或 19:00，则注册或注销 locationManager。

```
 protected Object doInBackground(Object... params) {
    Calendar calendar = Calendar.getInstance();
    while(flag) {
        calendar.setTimeInMillis(System.currentTimeMillis());
        calendar.set(Calendar.HOUR_OF_DAY, 19);
        calendar.set(Calendar.MINUTE, 0);
        calendar.set(Calendar.SECOND, 0);

        long now = System.currentTimeMillis();
        if(calendar.getTime().getTime() - now < 1000) {
            publishProgress(new Message(Message.REMOVE_LOCATION_MANAGER));
        }

        calendar.set(Calendar.HOUR_OF_DAY, 6);
        calendar.set(Calendar.MINUTE, 0);
        calendar.set(Calendar.SECOND, 0);
        now = System.currentTimeMillis();
        if(calendar.getTime().getTime() - now < 1000) {
            publishProgress(new Message(Message.REGISTER_LOCATION_MANAGER));
        }
    }
    return null;
}
 protected void onProgressUpdate(Object... values) {
    super.onProgressUpdate(values);

    Message msg = (Message)values[0];
    if(msg.type == Message.REMOVE_LOCATION_MANAGER) {
        lm.removeUpdates(ll);
        Toast.makeText(context, "remove locationManager", Toast.LENGTH_SHORT).show();
    }

    if(msg.type == Message.REGISTER_LOCATION_MANAGER) {
        lm.removeUpdates(ll);
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                0, 0, ll);
        Toast.makeText(context, "register locationManager", Toast.LENGTH_SHORT).show();
    }
} 
```

谁有更好的日程安排方法，谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-25T07:51:49.033

直接回答你的问题是没有意义的，你肯定需要重新考虑你的应用程序，因为在早上 6 点到晚上 19​​ 点运行 GPS 时，没有任何 Android 设备可以在一次电池充电的情况下存活。

基本上，只有在您真正需要时，您才需要请求 GPS 位置更新。这是 Android Guru Reto Meyer 撰写的一篇关于获取位置更新的好文章：[http ://android-developers.blogspot.jp/2011/06/deep-dive-into-location.html](http://android-developers.blogspot.jp/2011/06/deep-dive-into-location.html)

# android - 将页面添加到 android-viewflow

> ID：10308466
> 
> 赞同：2
> 
> 时间：2012-04-25T02:11:25.793
> 
> 标签：android

我在我的应用程序中使用 android-viewflow ( [https://github.com/pakerfeldt/android-viewflow](https://github.com/pakerfeldt/android-viewflow) )。我似乎无法弄清楚如何从代码中动态添加/删除页面。这可能吗？我需要在我的适配器中添加（覆盖？）这样的方法吗？

我知道 Jake Wharton 的 ViewPagerIndicator ( [https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator) ) 具有此功能，但我尚未成功实施。

任何帮助表示赞赏，谢谢。

# objective-c - 如何在 iOS 中的 dns_sd DNSServiceResolve 之后获取读/写流

> ID：10308469
> 
> 赞同：1
> 
> 时间：2012-04-25T02:11:45.663
> 
> 标签：objective-c, ios, sockets

目标是在使用 dns_sd API 成功解析服务后获取读/写流。我从 Apple 的 DNSSDObjects 示例项目开始，我正在编辑 DNSSDService.m 文件以在服务解决后获取读取和写入流。

这是我到目前为止所得到的。似乎它应该工作，但它没有:(

通过遵循[此线程](https://stackoverflow.com/questions/806116/is-there-anything-like-getstreamstohost-on-real-iphone-device)上的代码，我已经走到了这一步，尽管我不完全确定这应该是如何完成的。

编辑：Apple 的文档[在这里](http://developer.apple.com/library/ios/#qa/qa1753/_index.html#//apple_ref/doc/uid/DTS40011315)确认应该这样做......“所以，一旦你使用 DNSServiceResolve 解析了服务，你应该将服务的 DNS 名称（你的 DNSServiceResolveReply 回调的 hosttarget 参数）传递给连接 -按名称 API（如 CFStreamCreatePairWithSocketToHost）。”

```
// Called by DNS-SD when something happens with the resolve operation.
static void ResolveReplyCallback(
    DNSServiceRef           sdRef,
    DNSServiceFlags         flags,
    uint32_t                interfaceIndex,
    DNSServiceErrorType     errorCode,
    const char *            fullname,
    const char *            hosttarget,
    uint16_t                port,
    uint16_t                txtLen,
    const unsigned char *   txtRecord,
    void *                  context
) 
{
  CFStringRef host = CFStringCreateWithCString(kCFAllocatorDefault,
                                               hosttarget, 
                                               kCFStringEncodingUTF8);  
    DNSSDService *       obj;
    #pragma unused(interfaceIndex)

    assert([NSThread isMainThread]);  // b/c sdRef dispatches to the main queue

    obj = (__bridge DNSSDService *) context;
    assert([obj isKindOfClass:[DNSSDService class]]);
    assert(sdRef == obj->sdRef_);
    #pragma unused(sdRef)
    #pragma unused(flags)
    #pragma unused(fullname)
    #pragma unused(txtLen)
    #pragma unused(txtRecord)

    if (errorCode == kDNSServiceErr_NoError) {
        [obj resolveReplyWithTarget:[NSString stringWithUTF8String:hosttarget] 
                               port:ntohs(port)];
    } else {
      [obj stopWithError:[NSError errorWithDomain:NSNetServicesErrorDomain
                                             code:errorCode
                                         userInfo:nil]
                  notify:YES];
    }

//now let's get read&write streams?
  CFReadStreamRef   readStream = NULL;
  CFWriteStreamRef  writeStream = NULL;
  CFStreamCreatePairWithSocketToHost(kCFAllocatorDefault,
                                     host,
                                     port,
                                     &readStream,
                                     &writeStream
                                     );
  if (readStream && writeStream) {
    CFReadStreamSetProperty(readStream,
                            kCFStreamPropertyShouldCloseNativeSocket, 
                            kCFBooleanTrue);
    CFWriteStreamSetProperty(writeStream,
                            kCFStreamPropertyShouldCloseNativeSocket, 
                            kCFBooleanTrue);

    obj.inputStream =  (__bridge_transfer  NSInputStream *) readStream;
    obj.outputStream = (__bridge_transfer NSOutputStream *) writeStream;

  }
  CFRelease(host);
} 
```

# mysql - mysql 在不存在的地方插入语法错误。我不知道出了什么问题

> ID：10308472
> 
> 赞同：-2
> 
> 时间：2012-04-25T02:12:06.667
> 
> 标签：mysql

```
 insert into creditcard_info (member_id,card_type,card_number) 
 values ('1','Discover','555') 
 where not exists (
       select * from creditcard_info 
       where card_number='555' and
             card_type='Discover') 
```

我希望能够检查卡号是否已经存在。如果 card_number 存在并且 card card_type 存在则不要添加否则将这个新卡号与卡类型一起插入

我很难插入不存在某个数字的表中。

我收到此错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL
server version for the right syntax to use near 'where not exists (select * from 
creditcard_info where card_number='555')' at line 2 
```

提前谢谢大家帮助我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:19:24.563

看起来您正在尝试执行[`INSERT ... SELECT`](http://dev.mysql.com/doc/refman/5.6/en/insert-select.html)声明。

但是，在两个字段中添加唯一索引应该更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T02:22:26.733

您需要创建一个多列唯一索引。代码如下：

```
ALTER TABLE creditcard_info ADD UNIQUE idx_card_number_card_type(card_number,card_type); 
```

这应该作为单独的查询运行。而且您需要添加一次。
如果条件比简单的唯一检查更复杂，另一个可能的选项是在插入触发器之前添加。这是`create trigger`语法：

```
Create Trigger card_type_unique_card_number_exists Before Insert on creditcard_info
    FOR EACH ROW BEGIN
        DECLARE it_exists INT;
        Set it_exists=(select count(*) from creditcard_info where card_number='555' and card_type='Discover');
        If it_exists>0 Then
            #Throw a meaningful exception by let's say inserting into a table which doesn't exist or something
        END IF;
    END 
```

# c# - 添加新行时如何使 RichTextBox 滚动到末尾？

> ID：10308475
> 
> 赞同：18
> 
> 时间：2012-04-25T02:12:34.543
> 
> 标签：c#, wpf, xaml, richtextbox

我有几个用于记录输出的只读 RichTextBox。由于它们是只读的，因此在更新文本时它们似乎不会自动滚动。我*可以*使用 TextChanged 事件来强制结束滚动，但是是否有一种简单的方法可以在 XAML 中设置属性或其他内容，以便像正常一样进行滚动？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-25T04:57:31.923

我搜索了您的问题并找到[了这篇](http://msdn.microsoft.com/en-us/gg315209)文章。在“Programming the RichTextBox”部分，作者描述了如何获得你所期望的行为。

请检查并让我知道它是否有用。

* * *

我试图重现您的问题并提出以下解决方案

```
 <Window x:Class="CheckRichTextBox.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="170" Width="300">
    <StackPanel>
        <RichTextBox Height="100" Name="richTextBox1" IsReadOnly="True" VerticalScrollBarVisibility="Visible"/>
        <Button Name="btnAdd" Content="Click me to add text" VerticalAlignment="Bottom" Click="BtnAddClick" />
    </StackPanel>
</Window> 
```

相同的代码如下：

```
using System.Windows;

namespace CheckRichTextBox
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void BtnAddClick(object sender, RoutedEventArgs e)
        {
            richTextBox1.AppendText("You had Clicked the button for adding text\n");
            richTextBox1.ScrollToEnd();
        }
    }
} 
```

这解决了自动滚动的问题，请检查它并让我知道它是否有帮助。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-01-20T16:11:23.107

我使用[交互](http://msdn.microsoft.com/en-us/library/system.windows.interactivity%28v=expression.40%29.aspx)触发器和一个非常简单的操作解决了这个问题。

动作如下所示：

```
public class ScrollToBottomAction : TriggerAction<RichTextBox>
{
    protected override void Invoke(object parameter)
    {
        AssociatedObject.ScrollToEnd();
    }
} 
```

然后在我的 XAML 中我有这个：

```
<RichTextBox IsReadOnly="True" VerticalScrollBarVisibility="Auto">
     <i:Interaction.Triggers>
            <i:EventTrigger EventName="TextChanged">
                <interactivity:ScrollToBottomAction/>
            </i:EventTrigger>
     </i:Interaction.Triggers>
</RichTextBox> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-08T01:54:16.690

我想出了以下针对 wpf Richtextbox 自动滚动的解决方案

```
public partial class MainWindow
{
    private bool AutoScroll = true;

    public MainWindow()
    {
        InitializeComponent();

        yourRichTextBox.Loaded += (s, e) =>
          {
              var scrollViewer = VisualTreeHelper.GetChild(VisualTreeHelper.GetChild(yourRichTextBox, 0), 0) as ScrollViewer;
              scrollViewer.ScrollChanged += (scroller, eScroller) => ScrollViewer_ScrollChanged(scroller, eScroller);
          };
    }

    private void ScrollViewer_ScrollChanged(object sender, ScrollChangedEventArgs e)
    {
        // User scroll event : set or unset autoscroll mode
        if (e.Source as ScrollViewer != null && e.ExtentHeightChange == 0)
        {   // Content unchanged : user scroll event
            if ((e.Source as ScrollViewer).VerticalOffset == (e.Source as ScrollViewer).ScrollableHeight)
            {   // Scroll bar is in bottom
                // Set autoscroll mode
                AutoScroll = true;
            }
            else
            {   // Scroll bar isn't in bottom
                // Unset autoscroll mode
                AutoScroll = false;
            }
        }

        // Content scroll event : autoscroll eventually
        if (AutoScroll && e.ExtentHeightChange != 0 && e.Source as ScrollViewer != null)
        {   // Content changed and autoscroll mode set
            // Autoscroll
            (e.Source as ScrollViewer).ScrollToVerticalOffset((e.Source as ScrollViewer).ExtentHeight);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-05-03T23:23:44.207

```
RichTextBox.AppendText("String")
RichTextBox.ScrollToCaret() 
```

当我添加到 RichTextBox.text 时，ScrollToCaret() 不起作用。

```
RichTextBox.text = RichTextBox.text + "String"
RichTextBox.ScrollToCaret() 
```

# django - 带有redis的芹菜效果不佳

> ID：10308477
> 
> 赞同：0
> 
> 时间：2012-04-25T02:12:43.037
> 
> 标签：django, celery, django-celery

我正在开发 celery 任务来聚合来自 facebook 和 twitter 的社交内容。

任务如下

*   facebook_service_handler
*   facebook_contents_handler
*   image_resize
*   保存内容信息

'facebook_service_handler' 和 'facebook_contents_handler' 任务使用 facebook open api 和 urlopen 函数。

当 urlopen 请求不多时，它运行良好。（低于 4~5 次）但是当 urlopen 请求超过 4~5 时，worker 不再工作了。

另外，当芹菜停止时，我打破了redis和celeryd，并重新启动了celeryd和redis。最后的任务被执行

有没有人帮我解决这个问题？？

我正在mac os lion上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:32:14.993

理想情况下，您应该有两个不同的队列，一个用于网络 I/O（使用 eventlet，您可以使用它“提升”更多进程），一个用于其他任务（使用多处理）。如果您觉得这很复杂，请查看[CELERYD_TASK_SOFT_TIME_LIMIT](http://docs.celeryproject.org/en/latest/configuration.html#celeryd-task-soft-time-limit)。在 celery 任务中使用 urllib.open 时我遇到了类似的问题，因为连接可能会挂起并弄乱整个系统。

# javascript - 使用 '&&' 作为 if 语句的简写？

> ID：10308480
> 
> 赞同：17
> 
> 时间：2012-04-25T02:12:47.220
> 
> 标签：javascript

当我消磨时间查找 Javascript 速记模式时，我在这里遇到了一种表达[语句](https://stackoverflow.com/questions/9319915/what-does-this-shorthand-do)`if`的有趣方式。以下作品：

```
​var var1 = 5;
var var2 = 1;

var1 == 5 && var2++; 
```

我认为这是一种非常酷（并且更短，更简洁）的编写`if`语句的方式，只需要执行一个操作。但是，一旦我尝试了其他代码，我就遇到了以下代码的问题：

```
​var var1 = 5;
var var2 = 1;

var1 == 5 && var2 = 2; 
```

我的测试没有像第一个代码片段那样工作，而是抛出了一个错误：

> 未捕获的 ReferenceError：分配中的左侧无效

为什么这不起作用，为什么我的陈述的左侧被称为不正确而不是右侧？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-25T02:15:05.910

这不起作用，因为operator**的`&&`优先级高于`=`operator**。换句话说，您的代码解释如下：

```
(var1 == 5 && var2) = 2; 
```

如果您手动在分配周围加上括号，它将被正确解释。

```
var1 == 5 && (var2 = 2); 
```

其他人会斥责你写这样的代码，说这是一个坏主意，因为它使代码的意图更难阅读——这是事实，尤其是对于不熟悉这个习语的人——但尝试它很重要出去尝试这样的事情，亲眼看看会发生什么。您已经遇到过这种方法令人讨厌的事情之一。

无论如何，在这种情况下，我个人更喜欢使用单行`if`语句，像这样

```
if(condition) statement; 
```

虽然我相信其他人会告诉你这是不好的风格，因为当你需要更多语句时你必须手动添加括号，但这并没有真正让我和 IMO 比使用三行更干净，就像你说的那样.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-25T02:19:52.007

不要惊慌，这并没有像你期望的那样工作，事实上不到一个月前，Brendan Eich（JavaScript 的创建者）与我们分享了这种类型的使用更广为人知的是“滥用”语言，因为这个逻辑运算符并不是要执行这样的代码，而是要确定表达式的值。

> “我也同意...... && 行是一种滥用，由于 JS 的 C 遗产通过 Java 被允许，但大多数 JS 黑客不赞成；并且 if 语句会更好的风格......” [http： //brendaneich.com/2012/04/the-infernal-semicolon/](http://brendaneich.com/2012/04/the-infernal-semicolon/)

话虽如此，您可以通过包装语句来避免运算符优先级问题：

```
(var1 == 5) && (var2 = 2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T02:16:14.230

因为您在右侧使用了无效的运算符。它试图将整个语句读取为单个变量。

# php - 将不同的错误消息从 PHP 发送回 Ajax/Jquery 脚本并填充 HTML DIV ...？

> ID：10308481
> 
> 赞同：0
> 
> 时间：2012-04-25T02:12:51.237
> 
> 标签：php, jquery, html, ajax, json

我正在尝试根据 PHP 结果将不同的错误消息发送回 HTML DIV。我已经在这里和其他地方进行了搜索，但无法找到似乎适合我的情况的答案......希望其他人可以帮助我解决这个问题。

我的 HTML 页面包含一个表单，要求用户输入预订 ID #（唯一），一旦用户执行此操作并按下“搜索预订”，就会调用 Jquery 脚本以通过 AJAX 将 ID 发送到 PHP 脚本。返回数据，然后使用名为“填充”的 jquery 插件将其填充到表单中。

这是脚本：

```
<script type="text/javascript">
$(document).ready(function(){
    resetForms('reservation');
    $('#form-reservation').submit(function(event){ 
        event.preventDefault();  //the page will no longer refresh on form submit.
    var resCheck = $(this).find('input[class="reservationid"]').val(); //now we have the reservation ID, let's perform our check.
        $.ajax({ 
            url: 'inc/searchres.php', 
            type: 'POST',
            data: 'resid='+resCheck, 
            success: function(data){  //data is all the info being returned from the php file 
                resetForms('reservation');  //clear forms
                $('#reservation-id').val(resCheck);  //add res ID back into text box
                var jsonData = $.parseJSON(data);  //parse returned JSON data so we can use it like data.name, data.whatever 
                $("#res-message").html('<a>Reservation ID Located, Information is displayed below</a>');
                $('#json-reservation').populate({personal_first_name:jsonData['element_1_1'],personal_last_name:jsonData['element_1_2'],personal_phone_1:jsonData['element_7'],personal_email:jsonData['element_2'],reservation_status:jsonData['ADD THIS CELL'],reservation_date:jsonData['element_3'],reservation_time:jsonData['element_4'],reservation_party:jsonData['element_5'],reservation_special_request:jsonData['element_6'],reservation_using_coupon:jsonData['element_9'],reservation_coupon_code:jsonData['element_10'],reservation_status:jsonData['element_11']});
            },
            error: function(){
                $("#res-message").html('<a>There was an error with your request</a>');
            }
        });
    });
});
</script> 
```

这是从以下形式调用的（其中还包括我想在其中填充我的错误消息的 DIV，res-message）：

```
<form name="form_reservation" id="form-reservation">
                    <div style="padding:10px 20px 10px 10px;">
                    <label for="reservation-id">Reservation ID</label>
                        <input name="reservation_id" id="reservation-id" class="reservationid" style="width:120px !important"/>
                        <div class="res_message" id="res-message">&nbsp;</div>
                        <input type="submit" class="button" value="Search Reservation" style="width:150px !important; margin:10px 0px 0px 5px;"/>
                        <input type="button" class="button" value="Clear" style="width:150px !important; margin:10px 0px 0px 5px;" onclick="resetForms('reservation')" />
                    </div>
                </form> 
```

填充的表格对于这个问题应该不重要。最后 PHP 看起来像这样：

```
<?php
    include('config-searchres.php');

    $term = $_POST['resid'];
    $sql = mysql_query("SELECT * FROM ap_form_8 WHERE id = '$term'"); //select first name (element_1_1) from form #8
    //$sql = mysql_query("SELECT * FROM ap_form_8 WHERE element_12 = '$term'");  //real selector will look for unique number that has not been added to table yet

    if ($row = mysql_fetch_array($sql)){  //if reservation number exists
        if ($row['element_11'] != 'Cancelled'){  //if reservation has not already been cancelled
            if (strtotime($row['element_3']) >= strtotime(date("Y-m-d"))){  //if reservation has not already passed date
                echo json_encode($row);
            }
            else  //Reservation already passed (old reservation)
            {
                echo $error = "Passed"; 
                //echo 'passed';
            }
        }
        else  //Reservation already cancelled
        {
            echo 'cancelled';
        }
    }
    else  //Reservation not found
    {
        echo 'not found';
    }
    mysql_close();
?> 
```

我对 PHP 几乎一无所知，但我知道这个脚本似乎适用于填充我的表......只是在其他情况下不显示错误。3 个不同的错误，“已通过”、“已取消”和“未找到”需要在各自的情况下回传。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:30:06.240

快速而肮脏的解决方案是测试返回的结果，看它是字符串还是数组。在您的 javascript 上：

```
 (...)
                var jsonData = $.parseJSON(data);  //parse returned JSON data so we can use it like data.name, data.whatever
                if (typeof(jsonData)=='object'&&(jsonData instanceof Array)) {
                    // jsonData is an array, populate success div
                    $("#res-message").html('<a>Reservation ID Located, Information is displayed below</a>');
                    $('#json-reservation').populate({personal_first_name:jsonData['element_1_1'],personal_last_name:jsonData['element_1_2'],personal_phone_1:jsonData['element_7'],personal_email:jsonData['element_2'],reservation_status:jsonData['ADD THIS CELL'],reservation_date:jsonData['element_3'],reservation_time:jsonData['element_4'],reservation_party:jsonData['element_5'],reservation_special_request:jsonData['element_6'],reservation_using_coupon:jsonData['element_9'],reservation_coupon_code:jsonData['element_10'],reservation_status:jsonData['element_11']});

                } else {
                    // jsonData is a simple string, so PHP returned an error. populate error div
                    $("#res-message").html('<a>There was an error with your request</a>');
                }
                (...) 
```

当然，在处理错误时，如果需要，您可以打开 jsonData 内容以提供特定的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:34:01.257

似乎问题在于来自 PHP 代码的不同错误消息不是作为 JSON 字符串发送的。所以当使用 'jsonData = $.parseJSON(data);' 它给出了例外。也许您可以尝试使用以下代码。

```
 <script type="text/javascript">
    $(document).ready(function(){
     resetForms('reservation');
     $('#form-reservation').submit(function(event){ 
     event.preventDefault();  //the page will no longer refresh on form submit.
     var resCheck = $(this).find('input[class="reservationid"]').val(); //now we have the reservation ID, let's perform our check.
     $.ajax({ 
        url: 'inc/searchres.php', 
        type: 'POST',
        data: 'resid='+resCheck, 
        success: function(data){  //data is all the info being returned from the php file 
            resetForms('reservation');  //clear forms
            $('#reservation-id').val(resCheck);  //add res ID back into text box
            try 
            {
             var jsonData = $.parseJSON(data);  //parse returned JSON data so we can use it like data.name, data.whatever 
             $("#res-message").html('<a>Reservation ID Located, Information is displayed below</a>');
             $('#json-reservation').populate({personal_first_name:jsonData['element_1_1'],personal_last_name:jsonData['element_1_2'],personal_phone_1:jsonData['element_7'],personal_email:jsonData['element_2'],reservation_status:jsonData['ADD THIS CELL'],reservation_date:jsonData['element_3'],reservation_time:jsonData['element_4'],reservation_party:jsonData['element_5'],reservation_special_request:jsonData['element_6'],reservation_using_coupon:jsonData['element_9'],reservation_coupon_code:jsonData['element_10'],reservation_status:jsonData['element_11']});
            }
            catch 
            {
              $("#res-message").html('<a>There was an error with your request</a>');
              $('#json-reservation').populate({status:data});
            }
          }
        });
      });
     });
     </script> 
```

我没有测试过这段代码，但至少逻辑应该可以工作。

# c# - C# 中的属性和数组会发生什么？

> ID：10308489
> 
> 赞同：1
> 
> 时间：2012-04-25T02:14:40.590
> 
> 标签：c#, arrays, properties

好的，我有这门课和主课。我在 VS 2010 Ultimate 和 .NET 4 客户端上。

```
internal class tezt
{
    private int[] _numeros = new int[5];
    public int[] Numeros
    {
        get { return _numeros; }
    }
}
public class tezt2
{
    private int[] _numeros = new int[5];
    public int[] Numeros
    {
        get { return _numeros; }
    }
}
class tezt3
{
    private int[] _numeros = new int[5];
    public int[] Numeros
    {
        get { return _numeros; }
    }
}
internal static class Program
{
    private static void Main()
    {
        var arrNums = new tezt();
        var arrNums2 = new tezt2();
        var arrNums3 = new tezt3();
        Console.WriteLine(arrNums.Numeros[0]);
        arrNums.Numeros[0] = 5;
        Console.WriteLine(arrNums.Numeros[0]);
        Console.WriteLine(arrNums2.Numeros[0]);
        arrNums2.Numeros[0] = 6;
        Console.WriteLine(arrNums2.Numeros[0]);
        Console.WriteLine(arrNums3.Numeros[0]);
        arrNums3.Numeros[0] = 7;
        Console.WriteLine(arrNums3.Numeros[0]);
        Console.ReadKey(true);
    }
} 
```

这些行发生了什么：

```
arrNums.Numeros[0] = 5;
arrNums2.Numeros[0] = 6;
arrNums3.Numeros[0] = 7; 
```

是不是因为派生这些对象的类没有`set`参数，所以不能允许这些分配？

可以做些什么来避免这种情况，限制这种情况，这样做会`arrNums.Numeros[0] = 5;`引发错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:18:31.023

您不是在设置`Numeros`属性，而是在修改该属性内索引处的元素。您只使用该属性的*吸气剂*。

不允许的分配是为该对象的属性分配一个新值：

```
arrNums.Numeros = new int[5]; // will not compile. 
```

你可以让 getter 返回一个`IEnumerable<int>`来保护它：

```
class tezt3
{
    private int[] _numeros = new int[5];
    public IEnumerable<int> Numeros
    {
        get { return _numeros; }
    }
} 
```

您也可以使用`ReadOnlyCollection`. [在这个问题](https://stackoverflow.com/q/491375/497356)中深入讨论了使用`IEnumerable<T>`vs的优缺点。`ReadOnlyCollection<T>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T03:05:44.930

我也可以建议不要在属性上使用数组。这是来自[框架设计指南的引用](https://rads.stackoverflow.com/amzn/click/com/0321545613)

> 返回数组的属性可能非常具有误导性。通常需要返回一个内部数组的副本，以便用户无法更改内部状态。这可能导致代码效率低下。
> 
> 在以下示例中，Employees 属性在循环的每次迭代中被访问两次。对于以下短代码示例，这将是 2n + 1 个副本：

```
Company microsoft = GetCompanyData("MSFT");
for (int i = 0; i < microsoft.Employees.Length; i++)
{   
  if (microsoft.Employees[i].Alias == "kcwalina")
  {  ...  }
} 
```

本书的注释者布拉德·艾布拉姆斯 ( [Brad Abrams ) 评论了这个陷阱：](http://blogs.msdn.com/b/brada/)

> 本书中的一些指导方针经过辩论并在摘要中达成一致；其他人是在艰苦的学校里学到的。返回数组的属性的指导方针是在硬敲阵营中。当我们调查 .NET Framework 1.0 版中的一些性能问题时，我们注意到正在创建数以千计的数组并很快被丢弃。事实证明，框架本身的许多地方都遇到了这种模式。不用说，我们修复了这些实例和指南。- 布拉德艾布拉姆斯

# .net - .Net Web 参考客户端的正确多线程使用

> ID：10308494
> 
> 赞同：1
> 
> 时间：2012-04-25T02:15:22.990
> 
> 标签：.net, multithreading, soap, task-parallel-library, webservice-client

我必须使用我没有构建且无法控制的 .net 2.0 时代的 .asmx Web 服务。然而，该服务是高度可用的并且可以处理这个问题。

我需要帮助的是客户端，并从并发的角度正确使用 Visual Studio 生成的客户端代理。目前我正在使用 Web 参考，但如果需要，可以切换到服务参考。我对 WCF 一无所知。

我读得越多，我就越迷惑自己。

我的具体问题：

给定一个 Visual Studio 生成的 soap 客户端代理，它产生以下方法：

```
Foo();
FooAsync();
FooCompleted;

Bar();
BarAsync();
BarCompleted; 
```

1.  我应该/可以从多个线程中调用 Foo()，例如在 Parallel.ForEach 中吗？
2.  我应该/我可以在并行 foreach 中调用 FooAsync() 吗？这似乎是多余的，因为我已经在另一个线程上？这样做安全吗？
3.  我应该/可以在一个线程上调用 FooAsync()，同时在另一个线程上调用 BarAsync() 吗？
4.  这些生成的soap 服务类似乎实现了EAP 模式。我是 pfx/tpl 的新手，但我一直在将任务视为一种更好地管理其中一些的方法？我已经看到了如何使用 TaskCompletionSource 将 EAP 与 Task 包装的示例。这是更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:39:19.950

1.  您可以根据需要调用任意`Foo()`数量的线程（您必须自己决定是否*应该*）。它们运行（就像您建议的那样）就好像它们并行运行一样。

2.  我已经提供了一个示例，例如您想要使用下面的任务并行库[(TPL)](http://msdn.microsoft.com/en-us/library/dd460717.aspx)。`FooAsync()`如果您已经为其生成了一个线程，那么生成一个线程是多余的，`Foo()`但这取决于您正在做什么或想要做什么。通常，您会`Foo()`从 UI 线程调用，而后者又会`FooAsync()`在单独的线程上启动。

    ```
    private void Foo()
    {
        // Get TaskScheduler to facilitate manipulation of GUI on UI Thread.
        TaskScheduler uiScheduler = TaskScheduler.FromCurrentSynchronizationContext();

        // Cancellation support.
        CancellationTokenSource cancelSource = new CancellationTokenSource();
        CancellationToken token = cancelSource.Token;

        // Spin-off onto background thread.
        Task<bool> asyncFooTask = null;
        asyncFooTask = Task.Factory.StartNew<bool>(() => asyncFoo(uiScheduler, token, _dynamic), token);

        // Continuation/call-back/error-handling.
        asyncTask.ContinueWith(task =>
        {
            // Check task status.
            switch (task.Status)
            {
                // Handle any exceptions to prevent UnobservedTaskException.             
                case TaskStatus.RanToCompletion:
                    if (asyncTask.Result)
                        // Success. Do stuff.
                    else
                        // Failed. Do stuff.
                    break;
                case TaskStatus.Canceled:
                    if (task.Exception != null)
                        // Cancelled with exception.
                    else
                        // User cancelled.
                    break;
                case TaskStatus.Faulted:
                    if (task.Exception != null)
                        // AggregateException thrown by antecident.
                    else
                        // Task failed...
                    break;
            }
            return;
        }, TaskScheduler.FromCurrentSynchronizationContext());
    } 
    ```

有关TPL 及其使用的精彩介绍，请参阅此[链接。](http://www.codeproject.com/Articles/152765/Task-Parallel-Library-1-of-n)此外，有关通用线程（以及一些不同的伪装）的更多信息，请参阅[J. Albahari 的线程页面](http://www.albahari.com/threading/)。

3 这完全是主观的，取决于你想做什么。就像答案 1 建议的那样，您可以在任意数量的线程上调用这些方法中的每一个。

4 有关 EAP 模式的一个很好的示例，[请参见此处](http://msdn.microsoft.com/en-us/library/ee622454.aspx)。正如您将看到的，它基本上就是我上面提供的内容。对于上述方法，我假设您想在完成`and 'BarCompleted()`后运行 'FooCompleted() 。在这种情况下，我会说 EPL 模式正是您想要的。`FooAsync()``BarAsync()`

我希望这有帮助。

# unix - sed 错误：未终止的“s”命令

> ID：10308496
> 
> 赞同：8
> 
> 时间：2012-04-25T02:15:25.230
> 
> 标签：unix, sed

我在 sed 命令下运行

```
sed -i s/abc=.*$/abc=def ghi/g hpq_sf_attach_wf_param.txt 
```

它给了我错误：

```
sed: -e expression #1, char 17: unterminated `s' command 
```

我注意到这是由于 和 之间的`def`空间`ghi`。知道如何解决吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-25T02:17:25.017

您需要使用引号来保护特殊字符，包括空格`$`、 和`*`.

```
sed -i 's/abc=.*$/abc=def ghi/g' hpq_sf_attach_wf_param.txt 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-30T18:59:07.743

所以 geekosaur 是对的。您遇到问题的原因是因为通配符需要双引号，因为单引号将它们作为文字字符，而不是您想要的含义。

```
sed -i "s/abc=.*$/abc=def ghi/g" hpq_sf_attach_wf_param.txt 
```

此外，如果“def”和“ghi”之间的空格给您带来问题，添加“\”应该有助于将其作为文字空间读取。

```
sed -i "s/abc=.*$/abc=def\ ghi/g" hpq_sf_attach_wf_param.txt 
```

# javascript - 如何使用 jQuery 检测用户是否已接近页面末尾？

> ID：10308499
> 
> 赞同：10
> 
> 时间：2012-04-25T02:15:30.760
> 
> 标签：javascript, jquery

现在，当用户使用此功能到达页面底部时，我会触发一个事件：

```
$(window).scroll(function() {       
    if($(window).scrollTop() == $(document).height() - $(window).height()) {
        // do something
    }
}); 
```

当用户几乎到达页面末尾时，如何修改它以触发事件，假设还剩 300 像素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T02:17:41.387

```
$(window).scrollTop() >= $(document).height() - $(window).height() - 300 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T07:10:51.300

在 Angularjs 中：挣扎了很长时间后，偶然发现了这个库：[http](http://binarymuse.github.io/ngInfiniteScroll/documentation.html) ://binarymuse.github.io/ngInfiniteScroll/documentation.html 。

根据您的用例，您可以执行以下操作：

```
var myApp = angular.module('myApp', ['infinite-scroll']); 
```

在您的 HTML 中：

```
<div infinite-scroll="addMoreItems()">
  <div ng-repeat="item in items">Item number {{$index}}: {{$item}}</div>
</div> 
```

因为它允许您将它附加到任何 div - 您几乎可以在您想要的功能中做任何事情。

# c# - MVC 控制器访问

> ID：10308501
> 
> 赞同：3
> 
> 时间：2012-04-25T02:15:39.713
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我们的应用程序正在从 WebForms 迁移到 MVC。我们有不同的方式来处理授权。查询数据库视图以验证用户授权。此视图根据每个用户返回所有菜单层次结构。例如，如果 User1 试图访问名为 SecretList.aspx 的页面，则通过菜单层次结构（在 auth 后保存在 HTTP Session 中）应用搜索以检查访问权限。如果该用户存在与 SecretList.aspx 相关的菜单项，则授予访问权限。

我的问题是，如何在 ASP.NET MVC 3 中实现这种方法？

我不想为每个控制器操作放置属性，并且我已经阅读了有关**Route Constraints**和**Custom Controller**的信息。

要路由约束，我可以访问 HTTP 会话并检索我的菜单层次结构以进行授权查询吗？

对于自定义控制器，我应该考虑重载哪种方法？在控制器执行完整的操作代码之前，我可以检查授权并重定向到另一个视图吗？

还有其他更好的主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:29:15.897

我将使用全局添加到所有操作的自定义操作过滤器，它的工作方式与内置的授权属性非常相似。动作过滤器在路由解析并创建控制器后运行（因此传递给控制器​​的任何内容都必须可由任何用户构造），然后它可以检查用户是否可以执行动作，或者是否应该返回另一个 ActionResult。

我强烈建议查看 MVC 源代码（或使用 ILSpy 之类的工具）来查看授权属性的代码。

您可以使用自定义路由约束，但这实际上意味着用户不存在该路由，而不是不允许他们访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:29:35.267

如果您不想将属性应用于您的操作并使访问逻辑远离控制器和操作定义，您可以构建一个全局操作过滤器。

```
 public class MenuAccessAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuting (ActionExecutingContext filterContext)
        {
            var requestRoute = filterContext.RouteData.Route;

            var currentUser = WebWorker.CurrentUser; // Or wathever is your thing to get the current user from session

            if (currentUser != null && !MenuAccessService.UserHasAccessToRoute(currentUser, requestRoute))
            {
                filterContext.Result = new RedirectToRouteResult("MenuAccessDenied");
            }

            base.OnActionExecuting(filterContext);
        }
    } 
```

或类似的东西。

然后，在 global.asax Application_Start

```
 GlobalFilters.Filters.Add(new MenuAccessAttribute()); 
```

但是，如果我是你，我会花一些时间使用 asp.net mvc Roles 调整我的访问逻辑，实现自定义 RoleProvider 并使用正确的 Authorize 属性装饰我的控制器和操作。

# android - 如何使用 ksoap2 android 连接到 .net Web 服务

> ID：10308503
> 
> 赞同：1
> 
> 时间：2012-04-25T02:15:57.563
> 
> 标签：android, web-services, ksoap2

我正在尝试使用 ksoap2 访问 .NET Web 服务，但我不知道它为什么不起作用。

我已经阅读了很多教程，但仍然无法正常工作。总是得到错误：

```
at org.kxml2.io.KXmlParser.exception(KXmlParser.java:273)
at org.kxml2.io.KXmlParser.nextTag(KXmlParser.java:1413)
at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:126)
at org.ksoap2.transport.Transport.parseResponse(Transport.java:63)
at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:100)
at br.android.listgame.Activitys.ListSimpleActivity.onCreate(ListSimpleActivity.java:108)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1660)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1721)
at android.app.ActivityThread.access$1500(ActivityThread.java:124)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:968)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3844)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

我已经使用soapUI 测试了web 服务，它工作正常。

```
 SoapObject soap = new SoapObject(NAMESPACE, OPERATION);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    soap.addProperty("nome", "artur");
    envelope.dotNet = true;
    envelope.setOutputSoapObject(soap);

    HttpTransportSE httpTransport = new HttpTransportSE(URL);
    try {

        httpTransport.call(SOAP_ACTION, envelope);
        resposta = envelope.getResponse().toString();

    } catch (IOException ioex) {
        ioex.printStackTrace();
    } catch (XmlPullParserException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
        // TODO: handle exception
    } 
```

我已经将 .jar 添加到项目中并添加为库，并且我也设置了使用互联网的权限。

我正在使用安卓 2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:55:22.423

看起来问题出在我的连接上。代码是正确的，但是当我尝试使用 3G 连接时无法正常工作，但是当我决定使用 wi-fi 进行测试时工作正常。

我将添加一个验证和一个反馈，告诉连接到一个 wi-fi，就像已经看到一些应用程序一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:47:44.673

我认为您在以下行中有问题...

```
`resposta = envelope.getResponse().toString();` 
```

试试这个代码......它对我有用......

```
public class FinalWebServiceDemoActivity extends Activity {

// some parameters regarding your web-service to be invoked
private static final String SOAP_ACTION = "http://tempuri.org/WebServiceMethod";
private static final String METHOD_NAME = "WebServiceMethod";
private static final String NAMESPACE = "http://tempuri.org/";
private static final String URL = "http://10.0.2.2:2256/WebService.asmx";

TextView tv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tv=(TextView)findViewById(R.id.text1);
    call();
}

public void call()
{
    try {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("message","Hello");

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet=true;
        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.call(SOAP_ACTION, envelope);

        SoapPrimitive result = (SoapPrimitive)envelope.getResponse();
        String strRes = result.toString();

        tv.setText(strRes);
    } catch (Exception e) {
        tv.setText("Exception...");
        Log.i("exception", e.toString());
        StackTraceElement elements[] = e.getStackTrace();
        for (int i = 0, n = elements.length; i < n; i++) {      
            Log.i("File", elements[i].getFileName());
            Log.i("Line", String.valueOf(elements[i].getLineNumber()));
            Log.i("Method", elements[i].getMethodName());
        }
    }
}} 
```

希望这有效.. :)

# asp.net-mvc-3 - 多表查询

> ID：10308507
> 
> 赞同：0
> 
> 时间：2012-04-25T02:16:15.207
> 
> 标签：asp.net-mvc-3, linq, entity-framework-4

我在创建查询时遇到问题。

我想要实现的是创建一个符合以下条件的查询

```
 Show all records in table house where 
tbl_house.townId =tbl_town.townId 
and house.type = “3bedrooms” 
```

到目前为止我尝试过的

```
 var house = 
    From m in db.tbl_house 
    Where m.townId ==  tbl_town.townId && m.Bedrooms == "3bedrooms" 
                   Select m 
```

任何帮助或建议将不胜感激

更新

一、二、三三个地产代理 每个地产代理都有一个帐户，所以当地产代理登录时，我只想显示具有指定房屋类型的那个城镇的房屋。

所有房屋都有一个townID

示例：房屋 1 的 townId 可能为 3，其中 = town3 和 housetype = “3bedrooms”</p>

房子 2 的 townId 可能为 3，即 town3 和 housetype = “2bedrooms”</p>

房屋 3 的 townId 可能为 4，即 town4 和 housetype = “2bedrooms”</p>

因此，我要做的是选择所有 townId 为 3 且 housetype =“3bedrooms” 的房屋，并将它们展示给与 townId 相关联的房地产代理机构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T03:12:49.243

我仍然不太清楚您的要求是什么，但是您似乎在要求“表 A（'house'）中在表 B（'town'）中具有匹配记录的所有记录”。如果这不是真的，您需要解释“tbl_house.townId = tbl_town.townId”的含义，因为否则它没有任何意义。如果这*是*您想要的，那么您只需要检查外键字段是否有值：

```
var house = from m in db.tbl_house
            where m.townId.HasValue() && m.Bedrooms == "3bedrooms"
            select m; 
```

您尝试的查询的问题在于`tbl_town.townId`您将其放在哪里没有意义。`tbl_town`是一组对象，代表整个表。在这种情况下，`townId`是一个字段 *定义*，但您试图将其与`tbl_house`实体集中单个实体中的实际字段进行比较。两者不是一回事，不能直接比较。这就像说`where m.Bedrooms = String`- 它只是在语法上不正确。

编辑：

根据您更新的问题，您似乎知道您正在寻找的城镇的城镇 ID；在这种情况下，只需过滤即可。我不确定你为什么在知道你想要的 ID 时尝试使用“tbl_town.townId”，基于代理机构。

这里的语法完全取决于你的关系方向；例如，假设您有一个具有 TownId 的 Agency 对象，您只需要对其进行过滤：

```
var agency = this.GetTheCurrentAgencySomehow();
var house = from m in db.tbl_house
            where m.townId == agency.townId && m.Bedrooms == "3bedrooms"
            select m; 
```

另一方面，如果你的 Town 对象有一个 AgencyId，你可能会使用导航属性从 house -> town -> Agency 获取：

```
var agency = this.GetTheCurrentAgencySomehow();
var house = from m in db.tbl_house
            where m.town.agencyId == agency.agencyId && m.Bedrooms == "3bedrooms"
            select m; 
```

如果不了解更多关于数据模型的实际实现细节，就没有办法更具体。

# java - 一般使用 java JNI GetFieldID 和 JNI

> ID：10308512
> 
> 赞同：0
> 
> 时间：2012-04-25T02:17:00.220
> 
> 标签：java, android, c++, java-native-interface

看来我对 JNI 一点运气都没有。我正在等待我买的书到货，但现在它是试错法。

我正在使用 JNI 来实现 Lua 评估器。evaluatorNew() 只是创建一个新的 Evaluator() 对象，创建一个新的 CPtr() 类对象，如 Java 端所述，将 Evaluator() 对象的指针分配给 CPtr 的“对等”成员，并返回新的 CPtr 对象。

```
JNIEXPORT jobject JNICALL Java_com_starlon_libscriptable_UtilsEvaluator_evaluatorNew(
    JNIEnv *env, jclass clazz)
{
    int foo = 1;
    while(foo);

    Evaluator *eval = new Evaluator();

    jobject obj;
    jclass tempClass;

    tempClass = env->FindClass("com/starlon/libscriptable/CPtr");

    obj = env->AllocObject( tempClass );
    if (obj)
    {
        env->SetLongField( obj, env->GetFieldID( tempClass, "peer", "J" ), (jlong)eval);
    }
    return obj;
} 
```

这是保存指针的 Java 类。这就是 'env->FindClass()' 调用的内容。

```
public class CPtr
{
    /* Pointer value of the real C pointer. Use long to be 64-bit safe. */
    private long peer;

    protected long getPeer()
    {
        return peer;
    }

    /* No-args constructor. */
    CPtr() {}

} 
```

如下所示，没有堆栈跟踪可言。

```
(gdb) bt
#0  0xafd15ca8 in __libc_android_abort ()
   from /home/scott/workspace/StarVisuals/StarVisuals/obj/local/armeabi-v7a/libc.so
#1  0x00000008 in ?? ()
Backtrace stopped: frame did not save the PC 
```

这是 gdb 逐步执行上述 JNI 函数的转储：

```
0x80805258 in Java_com_starlon_libscriptable_UtilsEvaluator_evaluatorNew (env=0xabd8, 
    clazz=0x40715698) at jni/libscriptable//evaluator.cpp:85
85      while(foo);
Current language:  auto; currently c++
(gdb) set foo = 0
(gdb) s
[New Thread 11226]
[Switching to Thread 11226]
87      Evaluator *eval = new Evaluator();
(gdb) u
92      tempClass = env->FindClass("com/starlon/libscriptable/CPtr");
(gdb) u
94      obj = env->AllocObject( tempClass );
(gdb) u
95      if (obj)
(gdb) s
97          env->SetLongField( obj, env->GetFieldID( tempClass, "peer", "J" ), (jlong)eval);
(gdb) s
_JNIEnv::GetFieldID (this=0xabd8, clazz=0x40715910, name=0x8080a134 "peer", sig=0x8080a13c "J")
    at /opt/android-ndk-r7b/platforms/android-9/arch-arm/usr/include/jni.h:708
708     { return functions->GetFieldID(this, clazz, name, sig); }
(gdb) print functions
$1 = (const JNINativeInterface *) 0xaca9dd68
(gdb) print this
$2 = (_JNIEnv * const) 0xabd8
(gdb) print clazz
$3 = (jclass) 0x40715910
(gdb) print name
$4 = 0x8080a134 "peer"
(gdb) print sig
$5 = 0x8080a13c "J"
(gdb) print *functions
$6 = {reserved0 = 0x0, reserved1 = 0x0, reserved2 = 0x0, reserved3 = 0x0, GetVersion = 0xaca43385, 
  DefineClass = 0xaca43355, FindClass = 0xaca4773d, FromReflectedMethod = 0xaca47719, 
  FromReflectedField = 0xaca476f5, ToReflectedMethod = 0xaca476b9, GetSuperclass = 0xaca44801, 
  IsAssignableFrom = 0xaca4450d, ToReflectedField = 0xaca4767d, Throw = 0xaca43331, 
  ThrowNew = 0xaca47655, ExceptionOccurred = 0xaca447b1, ExceptionDescribe = 0xaca4761d, 
  ExceptionClear = 0xaca43315, FatalError = 0xaca44d99, PushLocalFrame = 0xaca475c1, 
  PopLocalFrame = 0xaca47561, NewGlobalRef = 0xaca44ac1, DeleteGlobalRef = 0xaca4502d, 
---Type <return> to continue, or q <return> to quit---q
SetByteFieldQuit
(gdb) print functions->GetFieldID
$7 = (jfieldID (*)(JNIEnv *, jclass, const char *, const char *)) 0xaca47435
(gdb) s

Program received signal SIGSEGV, Segmentation fault.
0xaca4cd0c in ?? ()
(gdb) bt
#0  0xafd15ca8 in __libc_android_abort ()
   from /home/scott/workspace/StarVisuals/StarVisuals/obj/local/armeabi-v7a/libc.so
#1  0x00000008 in ?? ()
Backtrace stopped: frame did not save the PC
(gdb) quit 
```

这是 jni.h 的第 708 行：

```
jfieldID GetFieldID(jclass clazz, const char* name, const char* sig)
{ return functions->GetFieldID(this, clazz, name, sig); } // 708 
```

有什么帮助吗？如果我需要澄清任何事情，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:59:48.073

您的代码需要很多东西是理所当然的。您需要通过查找异常并在遇到异常时中止来检查每个 JNI 调用的结果，我的意思是*每个JNI 调用。*您不能只是像 Lisp 风格那样堆叠函数调用，并希望它们都返回可用的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T02:26:21.860

`AllocObject`分配但不构造对象。我怀疑`SetLongField`如果你在一个未构造的物体上调用它可能会猛烈呕吐，就像你在这里做的那样。改为使用`NewObject`；首先，您必须查询无参数构造函数的methodid。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:15:01.017

您应该始终使用 CheckJNI 运行：[http ://android-developers.blogspot.com/2011/07/debugging-android-jni-with-checkjni.html](http://android-developers.blogspot.com/2011/07/debugging-android-jni-with-checkjni.html)

它会告诉您，您正在调用一个带有异常挂起的 JNI 函数，并且干净地中止了。

# heroku - Heroku Cedar 的生产环境中未定义 Gmaps

> ID：10308514
> 
> 赞同：3
> 
> 时间：2012-04-25T02:17:22.753
> 
> 标签：heroku, production, pipeline, gmaps4rails, assets

我是 RoR 的新手，所以有很多概念我还不太了解。

作为我在 Rails 上的第一个项目，我根据 Michael Hartl 的教程编写了一个站点。我的网站是在 rails 3.1.0 中完成的，它在我的 ubuntu 站上的 dev 中运行良好。在该站点中，我有 gmaps4rails 以这种方式加载到 gemfile 中：

```
gem 'gmaps4rails', "~> 1.4.8" 
```

我还有另一个名为 timeglider 的控件，它是一个 javacript 控件，位于 /public/timeglider 文件夹中的公用文件夹中。

所有这些都在开发中工作，但是当我想在 heroku 上的生产中部署它时，我的 chrome 控制台出现问题：

```
http://geojiffy.herokuapp.com/:277Uncaught ReferenceError: Gmaps is not defined
http://geojiffy.herokuapp.com/:182Uncaught ReferenceError: Gmaps is not defined 
```

我邀请你去[这里](http://geojiffy.herokuapp.com/)看看加载页面的结果。gmaps 部分中没有加载任何内容。

问题是 Gmaps 在到达第 277 行时没有定义。

当我尝试修复它时，我在 stackoverflow 中阅读了许多其他关于 sprocket 及其编译 js 文件的方式的问题。

我将 application.js 从更改 `*= require_tree .`为

```
//= require jquery-ui
//= require jquery
//= require jquery_ujs
//= require jiffies.js
//= require gmap3.min.js
//= require jquery-1.7.1.min.js
//= require jquery-ui-1.8.16.custom.min.js
//= require gmaps4rails/all_apis.js
//= require gmaps4rails/bing.js
//= require gmaps4rails/gmaps4rails.base.js.coffee
//= require gmaps4rails/gmaps4rails.bing.js.coffee
//= require gmaps4rails/gmaps4rails.googlemaps.js.coffee
//= require gmaps4rails/gmaps4rails.base.js
//= require gmaps4rails/googlemaps.js 
```

这些脚本由 heroku 在 slug 创建时编译

[您可以在此处](http://geojiffy.herokuapp.com/assets/application-a4d3485a82d7a76995c8b93a7477f17a.js)访问完整的 application.js 您可以找到 Gmaps 对象在该脚本中的定义位置。

很明显，在 rails、gmaps4rails 和 heroku 中有很多我不理解的东西会导致部署问题。我不确定问题是否来自资产管道。

我在这个错误上花了很多晚上，但我无法理解调试它的清晰方法。你能给我一些提示来找到我的错误吗？

ps：我想给你发照片和链接，但我是新手，所以有限制

这是我认为的代码：

```
 <%= gmaps({ "map_options" => { "type" => "ROADMAP",  "zoom" => 10, "detect_location" => true,"center_on_user" => true,"auto_adjust" => false}, 
                "markers" => { "data" => @json } }) %> 
<div class='timeline-div' id='placement'></div> 
```

```
$(function () { 
    var isGeoChanging = false;
    var lastGmapInfoWindowOpen = null; 
    var lastTgInfoWindowOpen = null;

    //*****************************************************
   // Code pour les évènements sur control du formulaire
   //*****************************************************
   $("#btn_change_geo").live('click', function() {
        switchGeoChanging();
    });

    switchGeoChanging = function()
    {
        if (isGeoChanging)
        { 
            $("#btn_change_geo").html("Change Jiffy's Geo");
            isGeoChanging = false;
            $("#div_change_geo_info").hide();
        }
        else
        {
            $("#btn_change_geo").html("Cancel");
            isGeoChanging = true;
            $("#div_change_geo_info").show();
        }

    }

    //************************************************
    // Code pour les évènements sur le gmap
    //************************************************
    Gmaps.map.callback = function() 
    { 
        for (var i=0; i<this.markers.length; i++)
        {                   
                var marker = Gmaps.map.markers[i].serviceObject;
                marker.set("id", Gmaps.map.markers[i].id);
                google.maps.event.addListener(marker, 'click', function()
                {   
                    //ici on cache les infowindow precedament ouvert pour garder la fenêtre à l'ordre
                    if (lastGmapInfoWindowOpen != null) { lastGmapInfoWindowOpen.infowindow.close();  }
                    lastGmapInfoWindowOpen = marker;
                    if (lastTgInfoWindowOpen != null) { lastTgInfoWindowOpen.hide();  }

                    //ici,si l'option est enclanché, on change la valeur du du geoId qui est associé au Jiffy
                    if (isGeoChanging)
                    {
                        switchGeoChanging();
                        $("#txt_geo_id").val(this.get("id"));
                        callAjaxGet("http://localhost:3000/jiffies/"+this.get('id')+"/getGeo");
                    }

                } );        
        }
        marker = null;
    };

    callAjaxGet = function(url)
    {
        $.ajax(url, {
                        type: 'GET',
                        data: {  },
                        success: function() { },
                        error: function() { alert("Impossible de charger le Jiffy."); }
                    }); 
    }

    //************************************************
    //  code pour les évènements sur le timeglider
    //************************************************
    $(".timeline-table").css({"display":"block"});

    var tg1 = $("#placement").timeline({
            "min_zoom":5, 
            "max_zoom":50, 
            "show_centerline":true,
            "data_source":"#jiffies_table",
            "show_footer":false,
            "display_zoom_level":true,
            "event_overflow":"scroll",
            "icon_folder":"http://localhost:3000/timeglider/js/timeglider/icons/"
    });

    $("#scrolldown").bind("click", function() {
        $(".timeglider-timeline-event").animate({top:"+=100"})
    });

    $("#scrollup").bind("click", function() {
        $(".timeglider-timeline-event").animate({top:"-=100"})
    });

    <%= @js_jiffies.html_safe%>

}); // end document-ready 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:20:48.893

好的，问题是初学者，谢谢大家的提示。线索来自 jquery 参考错误。在资产管道中加载脚本时，您还必须注意加载顺序。您可以在那里看到类似的问题，但在 Asset Pipeline 中看不到。
[jquery 未定义错误](https://stackoverflow.com/questions/9266657/how-to-fix-jquery-is-not-defined-error-in-jquery-library) 所以这是我的应用程序中我的 application.js 中的良好顺序：

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require jquery-1.7.1.min.js 
//= require jquery-ui-1.8.16.custom.min.js
//= require jiffies.js
//= require gmaps4rails/all_apis.js
//= require gmaps4rails/bing.js
//= require gmaps4rails/gmaps4rails.base.js.coffee
//= require gmaps4rails/gmaps4rails.bing.js.coffee
//= require gmaps4rails/gmaps4rails.googlemaps.js.coffee
//= require gmaps4rails/gmaps4rails.base.js
//= require gmaps4rails/googlemaps.js
//= require gmap3.min.js//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require jquery-1.7.1.min.js 
//= require jquery-ui-1.8.16.custom.min.js
//= require jiffies.js
//= require gmaps4rails/all_apis.js
//= require gmaps4rails/bing.js
//= require gmaps4rails/gmaps4rails.base.js.coffee
//= require gmaps4rails/gmaps4rails.bing.js.coffee
//= require gmaps4rails/gmaps4rails.googlemaps.js.coffee
//= require gmaps4rails/gmaps4rails.base.js
//= require gmaps4rails/googlemaps.js
//= require gmap3.min.js 
```

您可以看到第一个 jquery，然后是 jquery-ui，然后是 dir gmaps4rails/ 中的所有 api，最后是 gmaps.min.js

`//= require_tree .`生产也不好。 您必须写下所需的所有脚本路径：//= 需要 PATH_TO_THE_SCRIPT。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T04:31:28.883

查看网页[http://geojiffy.herokuapp.com/](http://geojiffy.herokuapp.com/)，有许多 javascript 文件的 URL 路径类似于下面的代码。[http://localhost:3000](http://localhost:3000)可以在你的开发机器上工作，但不能在 Heroku 上工作。

```
<script src="http://localhost:3000/timeglider/js/timeglider/TG_Date.js" type="text/javascript" charset="utf-8"></script> 
    <script src="http://localhost:3000/timeglider/js/timeglider/TG_Org.js" type="text/javascript" charset="utf-8"></script> 
    <script src="http://localhost:3000/timeglider/js/timeglider/TG_Timeline.js" type="text/javascript" charset="utf-8"></script> 
    <script src="http://localhost:3000/timeglider/js/timeglider/TG_TimelineView.js" type="text/javascript" charset="utf-8"></script> 
    <script src="http://localhost:3000/timeglider/js/timeglider/TG_Mediator.js" type="text/javascript" charset="utf-8"></script> 
    <script src="http://localhost:3000/timeglider/js/timeglider/timeglider.timeline.widget.js" type="text/javascript" charset="utf-8"></script> 
```

编辑。从 Chrome 的控制台

> 加载资源失败 [http://localhost:3000/timeglider/css/aristo/jquery-ui-1.8.5.custom.css](http://localhost:3000/timeglider/css/aristo/jquery-ui-1.8.5.custom.cssFailed) 加载资源 失败[http://localhost:3000/timeglider/js/timeglider/Timeglider.css](http://localhost:3000/timeglider/js/timeglider/Timeglider.cssFailed)失败加载资源 application-a4d3485a82d7a76995c8b93a7477f17a.js:315Uncaught ReferenceError: jQuery is not defined [http://localhost:3000/timeglider/js/jquery.jsFailed](http://localhost:3000/timeglider/js/jquery.jsFailed) to load resource [http://localhost:3000/timeglider/js/jquery-ui.jsFailed](http://localhost:3000/timeglider/js/jquery-ui.jsFailed)加载资源[http://localhost:3000/timeglider/js/underscore-min.js](http://localhost:3000/timeglider/js/underscore-min.jsFailed) 加载资源 失败[http://localhost:3000/timeglider/js/backbone-min.js](http://localhost:3000/timeglider/js/backbone-min.jsFailed)加载资源失败[http://localhost:3000 /timeglider/js/jquery.tmpl.jsFailed](http://localhost:3000/timeglider/js/jquery.tmpl.jsFailed)加载资源 [http://localhost:3000/timeglider/js/ba-debug.min.js](http://localhost:3000/timeglider/js/ba-debug.min.jsFailed)加载资源失败[http://localhost:3000/timeglider/js/ba-tinyPubSub.js](http://localhost:3000/timeglider/js/ba-tinyPubSub.jsFailed)加载资源 失败[http://localhost :3000/timeglider/js/jquery.mousewheel.min.jsFailed](http://localhost:3000/timeglider/js/jquery.mousewheel.min.jsFailed) to load resource [http://localhost:3000/timeglider/js/jquery.ui.ipad.jsFailed](http://localhost:3000/timeglider/js/jquery.ui.ipad.jsFailed) to load resource [http://localhost:3000/timeglider/js /raphael-min.js](http://localhost:3000/timeglider/js/raphael-min.jsFailed)加载资源 失败[http://localhost:3000/timeglider/js/jquery.global.js](http://localhost:3000/timeglider/js/jquery.global.jsFailed)加载资源 失败[http://localhost:3000/timeglider/js/timeglider/TG_Date.js](http://localhost:3000/timeglider/js/timeglider/TG_Date.jsFailed)加载资源 失败[http ://localhost:3000/timeglider/js/timeglider/TG_Org.jsFailed](http://localhost:3000/timeglider/js/timeglider/TG_Org.jsFailed)加载资源 [http://localhost:3000/timeglider/js/timeglider/TG_Timeline.js](http://localhost:3000/timeglider/js/timeglider/TG_Timeline.jsFailed)加载资源 失败[http://localhost:3000/timeglider/js/timeglider/TG_TimelineView.js](http://localhost:3000/timeglider/js/timeglider/TG_TimelineView.jsFailed) 加载资源 失败[http://localhost:3000 /timeglider/js/timeglider/TG_Mediator.js](http://localhost:3000/timeglider/js/timeglider/TG_Mediator.jsFailed)加载资源 失败[http://localhost:3000/timeglider/js/timeglider/timeglider.timeline.widget.js](http://localhost:3000/timeglider/js/timeglider/timeglider.timeline.widget.jsFailed) 加载资源 失败[http://geojiffy.herokuapp.com/assets/defaults .jsFailed](http://geojiffy.herokuapp.com/assets/defaults.jsFailed) to load resource: 服务器响应状态为 404 (Not Found) [http://geojiffy.herokuapp.com/:149Uncaught](http://geojiffy.herokuapp.com/:149Uncaught) ReferenceError: $ is not defined [http://geojiffy.herokuapp.com/:277Uncaught](http://geojiffy.herokuapp.com/:277Uncaught)ReferenceError：未定义 Gmaps

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:08:00.427

这是完全合乎逻辑的：您的`application.js`文件不会加载，因为它们是一个错误“未捕获的 ReferenceError：jQuery 未定义”。

这就是为什么后面`Gmaps`没有定义的原因。修复你的 js 依赖项。

# objective-c - NSCountedSet 在 UITableView 中重复和计数

> ID：10308518
> 
> 赞同：1
> 
> 时间：2012-04-25T02:17:38.433
> 
> 标签：objective-c, cocoa-touch, uitableview, nsmutablearray, nsset

我有一种`NSSet`方法检查重复项和每个名称的重复项计数。我想将名称与重复的数量一起放在表格视图中。在找到重复项后，我取了 100 个名称并返回 27 个单元格，但我似乎无法获得要放置在具有相应名称的表视图中的重复项的数量。这是我一直在尝试使用的屏幕截图和方法以使其正常工作。

![在此处输入图像描述](../Images/49c3b66dc58941cc7648f0561c58b9b0.png)

```
- (NSSet *)checkForDuplicateIDs {

//CHECK FOR DUPLICATES IN ARRAY
NSArray *allIDs = [tweetArray valueForKeyPath:@"sender_screen_name"];
NSArray *sortedIDs = [allIDs sortedArrayUsingSelector:@selector(compare:)];

NSString *previousID = nil;
duplicateIDs = [NSMutableSet set];
for (NSString *anID in sortedIDs) {
    if ([previousID isEqualToString:anID]) {
        [duplicateIDs addObject:anID];

    }
    previousID = anID;
}

//THEN REMOVE ANY DUPLICATES IN NEW ARRAY
NSCountedSet *countedSet = [NSCountedSet setWithArray:sortedIDs];
NSMutableArray *oneMess = [NSMutableArray arrayWithCapacity:[sortedIDs count]];
NSMutableArray *multipleMess = [NSMutableArray arrayWithCapacity:[sortedIDs count]];

for(id obj in countedSet) {
    if([countedSet countForObject:obj] == 1) {
        [oneMess addObject:obj];
    }
    for(id duplicatenames in countedSet) {
        if ([countedSet countForObject:duplicatenames]>1) {
            [multipleMess addObject:duplicatenames];
            [countedSet  countForObject:duplicatenames];

        }

    }

}

//other method.... much easier and cleaner but how do I put them into an array?
NSCountedSet *set = [[NSCountedSet alloc] initWithArray:allIDs];

for (id item in set)
{
  //  NSLog(@"Name=%@, Count=%lu", item, (unsigned long)[set countForObject:item]);
}    

//  NSLog(@"NSCountedSet ALL Objects = %@",[countedSet allObjects]);
//  NSLog(@"NSCountedSet = %@",countedSet);

[tweetArray removeAllObjects];
[tweetArray addObjectsFromArray:[countedSet allObjects]];
tweetArrayCount = [[NSMutableArray alloc] initWithObjects:countedSet, nil];

//NSLog(@"One Message = %@",oneMess);
// NSLog(@"Multiple Messages = %@",multipleMess);

//HERE I HAVE ORIGINAL ARRAY IN ALBETICAL ORDER
// NSLog(@"Messages Containing more then 1 = %@",sortedIDs);    

//HERE I HAVE DUPLICATES IN ALBETICAL ORDER
// NSLog(@"Messages Containing more then 1 = %@",duplicateIDs);

//HERE I HAVE THE MESSAGES ONLY CONTAING 1
//NSLog(@"Messages Containing only 1 = %@",oneMess);

//NSLog(@"Duplicates count = %i",[duplicateIDs count]);
// NSLog(@"Messages Containing only count = %i",[oneMess count]);

[mainTableView reloadData];

return [[duplicateIDs copy] autorelease];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T04:52:37.057

我修改了一个简单的 UITableView 示例，它列出了国家名称来做我认为你想做的事情。计数放在 detailTextLabel.text 中。

```
countedList = [[NSCountedSet alloc] initWithArray:listOfItems];//listOfItems is an array of country name strings with duplicates
    listOfItems2 = [NSMutableArray array]; // array without duplicates that's the data source for the UITableView

    for (NSString *aCountry in countedList) {
        NSMutableDictionary *dict = [NSMutableDictionary dictionary];
        [dict setValue:aCountry forKey:@"name"];
        [dict setValue:[NSString stringWithFormat:@"%lu",[countedList countForObject:aCountry]] forKey:@"count"];
        [listOfItems2 addObject:dict];
    } 
```

然后我使用以下方法为表提供数据：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle: UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier]; //
    }

    // Set up the cell...
    cell.textLabel.text = [[listOfItems2 objectAtIndex:indexPath.row]valueForKey:@"name"];
    cell.detailTextLabel.text = [[listOfItems2 objectAtIndex:indexPath.row]valueForKey:@"count"];
    return cell;
} 
```

# php - PHP服务器从android应用程序接收数据

> ID：10308519
> 
> 赞同：3
> 
> 时间：2012-04-25T02:17:40.640
> 
> 标签：php, android, json

我是通讯方面的新手。只是试图定期从 android 应用程序中获取一些数据。但不知何故它不工作.. 写了一个 php 脚本我需要添加更多的东西..？我是否需要在 androidmanifest 中添加任何权限..？还提供了我的 android 应用程序代码。当我单击获取我的位置时，它会强制关闭。

PHP 脚本

```
<?php
echo 'Hello, world!';
$json = $_GET['jsonpost'];//get the post you sent...
$data = json_decode($json); //decode the json formatted string...
print_r($data);
$id = $data->id;
$devid = $data->devid;
$latitude = $data->latitude;
$longitude = $data->longitude;
$service = $data->service;
$con = mysql_connect("","","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("a5234826_ul", $con);
$devid = $_POST['devid']; 
$latitude = $_POST['latitude'];
$longitude = $_POST['longitude'];
echo "devid" +$devid;
echo "latitude" + $latitude;
echo "longitude" + $longitude; 
$sql = "INSERT INTO  `a5234826_ul`.`locations` (
`id` ,
`devid` ,
`latitude` ,
`longitude` ,
`service`
)
VALUES (
NULL ,  '$devid',  '$latitude',  '$longitude', '$service'  
)";
if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
mysql_close($con);
echo json_encode($variable);

?> 
```

定位服务.java

```
@Override
public IBinder onBind(Intent intent) {
// TODO Auto-generated method stub
return null;
}

public int onStartCommand(Intent intent, int flags, int startId) {
PowerManager pm = (PowerManager)getSystemService(Context.POWER_SERVICE);
wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "lock");
wl.acquire();
context = this;
final String who = intent.getStringExtra("who");
final LocationManager locMan = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
final LocationListener listener = new LocationListener(){

    // start location changed

    public void onLocationChanged(Location loc) {
        double latitude = loc.getLatitude();
        double longitude = loc.getLongitude();

        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://.../serverFile.php");
        JSONObject json = new JSONObject();

        TelephonyManager telephonyManager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
        String devid = telephonyManager.getDeviceId();

        String postData = "{\"request\":{\"type\":\"locationinfo\"},\"userinfo\":{\"latitude\":\""+latitude+"\",\"longitude\":\""+longitude+"\",\"devid\":\""+devid+"\"}}";

        try {  

            json.put("longitude", longitude);//place each of the strings as you did in postData method
            json.put("latitude", latitude);

            json.put("devid", devid);

            JSONArray postjson=new JSONArray();
            postjson.put(json);
            httppost.setHeader("json",json.toString());
            httppost.getParams().setParameter("jsonpost",postjson);     
            HttpResponse response = httpclient.execute(httppost);

            // for JSON retrieval:
            if(response != null)
            { 
            InputStream is = response.getEntity().getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();
        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
            }
            } catch (IOException e) {
            e.printStackTrace();
            } finally {
            try {
            is.close();
            } catch (IOException e) {
            e.printStackTrace();
            }
            }
            String jsonStr = sb.toString(); //take the string you built place in a string

            JSONObject rec = new JSONObject(jsonStr);
            String longitudecord = rec.getString("lon");
                String latitudecord = rec.getString("lat");
            // ...
            }
            }catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            } catch (IOException e) {
                // TODO Auto-generated catch block
                } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        if (who.equals("me")){
            Intent i = new Intent(context.getPackageName()+".LocationReceived");
            i.putExtra("lat", String.valueOf(latitude));
            i.putExtra("longitude", String.valueOf(longitude));
            i.putExtra("accuracy", String.valueOf(loc.getAccuracy()));
            context.sendBroadcast(i);
            Notification notif = new Notification();
            NotificationManager nm = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
            notif.tickerText = "Location Found!";
            notif.icon = R.drawable.ic_launcher;
            notif.flags = Notification.FLAG_AUTO_CANCEL;
            notif.when = System.currentTimeMillis();
            Intent notificationIntent = new Intent(context, TestLocatorActivity.class);
            notificationIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            notificationIntent.putExtra("lat", String.valueOf(latitude));
            notificationIntent.putExtra("longitude", String.valueOf(longitude));
            notificationIntent.putExtra("accuracy", String.valueOf(loc.getAccuracy()));
            PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
            notif.setLatestEventInfo(context, "Location Found!", "Click to open.", contentIntent);
            nm.notify(0, notif);
        } else {
            SmsManager smsMan = SmsManager.getDefault();
            smsMan.sendTextMessage(who, null, "http://maps.google.com/maps?q=loc:"+latitude+","+longitude, null, null);
            smsMan.sendTextMessage(who, null, "Latitude: "+latitude+"\nLongitude: "+longitude, null, null);
        }
        locMan.removeUpdates(this);
        try {
            wl.release();
        } catch (Exception e){
            e.printStackTrace();
        }
        stopSelf();
    }

    public void onProviderDisabled(String provider){

    }

    public void onProviderEnabled(String provider) {
        //Log.i(tag, "GPS IS ON");
    }

    public void onStatusChanged(String provider, int status, Bundle extras){
        switch(status) {
            case LocationProvider.OUT_OF_SERVICE:
            case LocationProvider.TEMPORARILY_UNAVAILABLE:
            case LocationProvider.AVAILABLE:
                break;
        }
    } };

locMan.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);
locMan.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, listener);

return 2;
}

} 
```

**我试图从 LocationService 类中获取纬度和经度值到 Post 类的另一件事是 Post 类中的代码正确..请帮助我..**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T04:17:23.870

就像@Vivek Kumar Srivastava 所说。

当您使用 postData 时，您以 Json 格式发送它，所以在您的 php 端，您需要实际解码它......

代码是这样的。

像这样在你的android代码中创建一个JSON对象可能会更好......

如前所述`Vivek Kumar Srivastava`：

当您使用 postData 时，您以 Json 格式发送它，因此在您的 php 端，您需要实际解码它。

最好在您的 android 代码中创建一个 JSON 对象，如下所示。

```
private postData() throws JSONException{  
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();
HttpGet httppost = new HttpGet("http://.../serverFile.php");
JSONObject json = new JSONObject();

try {           
    json.put("longitude", longitude);//place each of the strings as you did in postData method
    json.put("latitude", latitude);
    json.put("service", service);
    json.put("devid", devid);

    JSONArray postjson=new JSONArray();
    postjson.put(json);
    post.setHeader("json",json.toString());
    post.getParams().setParameter("jsonpost",postjson);     
    HttpResponse response = httpclient.execute(httppost);

    // for JSON retrieval:
    if(response != null)
    { 
    InputStream is = response.getEntity().getContent();
BufferedReader reader = new BufferedReader(new InputStreamReader(is));
StringBuilder sb = new StringBuilder();
String line = null;
try {
    while ((line = reader.readLine()) != null) {
    sb.append(line + "\n");
    }
    } catch (IOException e) {
    e.printStackTrace();
    } finally {
    try {
    is.close();
    } catch (IOException e) {
    e.printStackTrace();
    }
    }
    String jsonStr = sb.toString(); //take the string you built place in a string

    JSONObject rec = new JSONObject(jsonStr);
    String longitudecord = rec.getString("lon");
        String latitudecord = rec.getString("lat");
    // ...
    }
    }catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
        }
    } 
```

现在你的php代码...

```
$json = $_SERVER['HTTP_JSON'];//get the post you sent...
$data = json_decode($json); //decode the json formatted string...
$longitude = $data->longitude;
$latitude = $data->latitude;
$service = $data->service;
$devid = $data->devid; 
```

`And then continue with your sql from there on.` 如果您想将它们读回 Android，您将它们编码为 JSON，如上面的代码所示...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T07:12:06.547

您的 php 代码有问题，因为在 Android 端数据以 json 格式发送，例如

```
 String postData = "{\"request\":{\"type\":\"locationinfo\"},\"userinfo\":{\"latitude\":\""+latitude+"\",\"longitude\":\""+longitude+"\",\"deviceid\":\""+deviceid+"\"}}" 
```

但是您直接尝试在不解码json的情况下获取数据。

所以需要先解码你的json然后按特定顺序获取数据

有关更多详细信息，请参阅下面的链接

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T04:25:38.243

我建议您制作一个简单的脚本，以确保您确实可以正确访问数据库。您可以在浏览器中运行脚本，这样就可以排除对数据库的任何连接/访问问题：

```
<?php
mysql_connect("localhost","user","pass");
mysql_select_db("dbName");
$sql=mysql_query("select * from TABLENAME where COLUMNNAME like 'searchparameter'");
while($row=mysql_fetch_assoc($sql))
$output[]=$row;
print(json_encode($output));
mysql_close();
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T19:20:53.120

我没有看到任何接受`POST`数据的 PHP 代码。我编写了类似的应用程序，将数据发送到服务器并将其记录到数据库中。我通常有一些脚本来接受`POST`数据并使用其中的值。您必须使用`POST`Android SDK 中的方法将数据发送到 URL。这比使用`JSON`PHP 端发送数据然后对其进行解码更容易。如果我需要从服务器接收数据，我会返回值`JSON`，然后使用 SDK 在 Android 中对其进行解码。

# spring-mvc - 在 Spring MVC 中使用 @ResponseBody 时如何处理错误

> ID：10308526
> 
> 赞同：2
> 
> 时间：2012-04-25T02:18:38.730
> 
> 标签：spring-mvc

我将@ResponseBody 用于控制器中的方法。我还在使用 HandlerInterceptorAdapter，它在 postHandle 中调用数据库 commit()。如果提交失败，我希望最终用户知道，但到那时，从错误消息看来，响应已经被写入。我想知道我应该如何构建我的代码来实现我想要的。当然，我不想在每个控制器方法中都写 commit()。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T12:26:28.320

使用下面的代码并返回我们自己的错误代码

```
 @ResponseStatus(value=HttpStatus.NOT_FOUND, reason="No such Order")  // 404
            public class OrderNotFoundException extends RuntimeException {
              // ...
             } 
```

# python - 检查网页是否有更改需要登录/cookie

> ID：10308528
> 
> 赞同：1
> 
> 时间：2012-04-25T02:19:08.890
> 
> 标签：python, cookies, login, mechanize, urllib

我正在使用我在网上找到的这段代码来检查一个网页，看看它自上次检查以来是否被修改过。但是，我现在需要它在需要通过另一个网页而不是目标完成的身份验证的站点后面工作。

通常，我将如何以非 python 方式处理这个问题是导出 cookie 并将 cookie 传递给将要访问它的程序，比如 wget。

我想我需要使用 mechanize 但是我很难找到如何导入或设置我需要的一个 cookie。希望有人能指出似乎在逃避我的事情。

```
#!/usr/bin/env python
import os, sys, urllib
savepath = '/home/.checkurls/'

errormsg = '%s: %s: No such file or directory'
urlspath = savepath + 'urls.txt'
for path in savepath, urlspath:
        if not os.path.exists(path):
                print errormsg % (__file__, path)
                sys.exit(0)
urlfile = open(urlspath, 'r').readlines(); urlstring = ''
for url in urlfile:
        if not 'http://' in url:
                url = 'http://' + url
        url = url.replace('\n', '')
        filename = url.replace('/', '%2f')
        if '-v' in sys.argv:
                print '%s: %s ...' % (__file__, url)
        if not os.path.isfile(savepath + filename):
                urllib.urlretrieve(url, savepath + filename)
        filelines = open(savepath + filename, 'r').readlines()
        urllines = urllib.urlopen(url).readlines()
        if not filelines == urllines:
                open(savepath + filename, 'w').writelines(urllines)
                urlstring += '"' + url + '" '

if urlstring:
        os.popen("echo 'Page changed!' | mailx -s \"Update:\" $user")
else:
        if '-v' in sys.argv:
                print '%s: nothing for today' % __file__ 
```

我希望只设置 cookie 或导入它，但似乎我的任何尝试都不是正确的格式，然后继续使用 mechanize.urlopen 和 mechanize.urlretrieve。

cookie 数据在这里：

```
my.college.edu        FALSE   /       FALSE   0       SUMO_REGISTRATION_AuthCo
okie    57DCC7BFF9A58C9D0 
```

# sh - 在 bash 中运行安装命令：“n”后跟“Y”，无需任何人工干预

> ID：10308533
> 
> 赞同：1
> 
> 时间：2012-04-25T02:19:31.467
> 
> 标签：sh, pacman

所以在一个全新的 arch linux 实例上，我希望能够`tzdata`从一开始就安装。

要手动这样做，我这样做： -

```
[root@myarch ~]# pacman -S tzdata
:: The following packages should be upgraded first :
    pacman
:: Do you want to cancel the current operation
:: and upgrade these packages now? [Y/n] n

resolving dependencies...
looking for inter-conflicts...

Targets (1): tzdata-2012c-1

Total Download Size:    0.13 MB
Total Installed Size:   5.41 MB

Proceed with installation? [Y/n] Y 
```

可以看出，我必须先输入`n`，然后输入`Y`。

如何在一行 bash 中运行而不需要键入`n`and `Y`？

```
yes n | pacman -S tzdata 
```

让我通过第一个提示。但我被困在第二个提示上（显然）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:23:42.993

```
{ echo n ; yes ; } | pacman ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T02:26:03.883

如果您想向这样的程序发送多个输入，一种方法是在子 shell 中使用多个 echo 命令：

```
(echo n; echo y) | pacman -S tzdata 
```

旁注：如果有更新，Pacman 确实应该首先更新。然后你可以`--noconfirm`像其他答案所说的那样使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T02:24:39.343

关于什么

```
echo -e 'n\nY' | pacman -S tzdata 
```

# c# - 检查段值是否包含“.HTML”扩展名的正则表达式。对于 ASP.NET 路由

> ID：10308535
> 
> 赞同：0
> 
> 时间：2012-04-25T02:19:43.120
> 
> 标签：c#, asp.net, regex, asp.net-mvc, asp.net-mvc-routing

产品的传入 url 将是 mydomain.com/someproductname.html 我需要限制一条路线，以便它只处理这样的 url。也使检查大小写不敏感。如果我不强制执行这样的限制，那么下面的路由也会获取 URL 请求，例如 mydomain.com/level1category/ 等，这些请求应该由不同的路由处理。

我要限制的路线（需要限制“ItemName”段）：

```
 routes.MapRoute(
     "ProductLink4", // Route name
     "{RootPointer}/{L1Cat}/{L2Cat}/{ItemName}", // URL with parameters
     new
     {
         controller = "Store",
         action = "ViewProduct",
     },
     new { controller = "Store", action = "ViewProduct" ItemName = @"[^\\s]+(\\.(?i)(html))" });

                routes.MapRoute(
    "ProductLink3", // Route name
    "{RootPointer}/{L1Cat}/{ItemName}", // URL with parameters
    new
    {
        controller = "Store",
        action = "ViewProduct",

    },
    new { controller = "Store", action = "ViewProduct" });

                routes.MapRoute(
    "ProductLink2", // Route name
    "{RootPointer}/{ItemName}", // URL with parameters
    new
    {
        controller = "Store",
        action = "ViewProduct",

    },
    new { controller = "Store", action = "ViewProduct" });

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:22:55.873

```
string path = "mydomain.com/someproductname.html".ToLower(); 
```

使用正则表达式

```
bool flag = Regex.IsMatch(path, @"^.*\.(html)$"); 
```

没有正则表达式

```
bool flag = System.IO.Path.GetExtension(path) == ".html"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T02:46:06.667

将您的路线设置为

```
 routes.MapRoute(
 "ProductLink4", // Route name
 "{RootPointer}/{L1Cat}/{L2Cat}/{ItemName}.html",
 new
 {
     controller = "Store",
     action = "ViewProduct",
 }, 
```

应该将其限制为您的 .html fakefiles。

# .net - DateTime 相交方法的单元测试

> ID：10308541
> 
> 赞同：0
> 
> 时间：2012-04-25T02:20:39.737
> 
> 标签：.net, unit-testing, date, intersection

我有以下代码来确定两个周期是否相交并想证明它是正确的：

```
public static bool Intersect(this DateTime start1, DateTime end1, DateTime start2, DateTime end2)
{
    return (start1 == start2) || (start1 > start2 ? start1 <= end2 : start2 <= end1);
} 
```

经过几次尝试，我能想到的最好的办法就是将一堆硬编码的值扔进去。

在进行这项研究的过程中，我发现了这个问题的[SO 答案](https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap)，它使用了非常简单的语法

```
return (StartA <= EndB) and (EndA >= StartB) 
```

无论哪种方式，有人可以告诉我对日期相交方法进行单元测试的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:54:44.003

根据描述，您有两个日期范围

1) 开始 1...结束 1

2) 开始 2...结束 2

你想看看它们是否重叠

那么，有哪些可能

A) 错误案例

```
End1 < Start1
End2 < Start2 
```

B) 精确重叠

```
Start1 == Start2, End1 == End2, Start1 == End1
Start1 == Start2, End1 == End2, Start1 < End1 
```

C) 没有重叠

```
Start1 < End1 < Start2 < End2
Start1 == End1 < Start2 < End2
Start1 < End1 < Start2 == End2
Start1 == End1 < Start2 == End2 
```

D) 完全重叠

```
Start1 == Start2 < End2 < End1
Start1 == Start2 == End2 < End1
Start1 < Start2 < End2 < End1
Start1 < Start2 == End2 < End1
Start1 < Start2 < End2 == End1
Start1 < Start2 == End2 == End1 
```

E) 部分重叠

```
Start1 < Start2 < End1 < End2 
```

我*认为*这是很多。它假定范围是有序的（Start1 <= Start2）。
您可能需要将案例加倍，首先传递第二个范围。答案应该仍然相同（重叠不依赖于顺序），但实现可能隐式依赖于 (Start1 <= Start2) 并且如果以其他方式输入日期则失败。

以上每一个都成为一个测试用例。
**注意：**如果不允许 0 长度（开始 == 结束）范围，它们将成为错误情况，可以从其他部分中删除。

对于一个简单的函数，有很多测试用例，但是您有 4 个变量（每个日期）以及它们之间的一组关系，并且每个关系组合都会给出不同的答案。

您需要决定是否值得为此付出努力，或者选择最常见和*“最有可能导致算法问题”*（非常主观）的案例就足够了。

我希望这是您正在寻找的并且有用的，
艾伦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T02:29:05.180

您应该使用所有可能的输入值组合来测试您的方法。这样，您不仅要测试有效输入，还要测试无效输入。使用描述有效（预期）输入以及无效（意外但可能）输入的示例输入值。这就是通常应该如何进行测试，以便人们可以证明他们的代码可以按预期工作。

# php - Codeigniter 删除 HTML 实体

> ID：10308554
> 
> 赞同：1
> 
> 时间：2012-04-25T02:22:55.570
> 
> 标签：php, forms, codeigniter, html-entities

我在 codeigniter 中有一个表单，可以将一些 html 内容保存到数据库中。以这个 HTML 为例：

```
<div style="width:400px">
  <div style="background-color:yellow">
    Header
  </div>
</div> 
```

当我保存它时，我的 html 标签被破坏了。即使我在提交表单时“打印_r”$_POST，我也会看到 html 标签被破坏。这是我得到的：

```
<div 
  <div 
    Header
  </div>
</div> 
```

但是没有codeigniter（简单代码）的相同表单可以正常工作并显示正确的html。

这在 CI 中正常吗？如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T02:32:07.820

这是一个 XSS 过滤问题。在您的 CI 安装中，您已将 global_xss_filtering 标志设置为 true，因此它会在您使用之前清理所有输入数据。在这里，问题描述和解决之前：

[Codeigniter - 在帖子的基础上禁用 XSS 过滤](https://stackoverflow.com/questions/3788476/codeigniter-disable-xss-filtering-on-a-post-basis)

此处在“安全过滤”部分进行了描述：

[http://codeigniter.com/user_guide/libraries/input.html](http://codeigniter.com/user_guide/libraries/input.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:21:52.413

尝试将“/”放在样式结束处：

```
<div style="width:400px;">
    <div style="background-color:yellow;">
       Header
    </div>
</div> 
```

# prolog - prolog 如何使用 succ 遍历递归查询？

> ID：10308557
> 
> 赞同：5
> 
> 时间：2012-04-25T02:23:21.870
> 
> 标签：prolog, successor-arithmetics

有人可以向我解释为什么这个序言查询会这样工作。定义是：

```
add(0,Y,Y). 
add(succ(X),Y,succ(Z)):- add(X,Y,Z). 
```

鉴于这种：

```
?-  add(succ(succ(succ(0))),  succ(succ(0)),  R). 
```

这是查询的跟踪：

```
Call:  (6)  add(succ(succ(succ(0))),  succ(succ(0)),  R) 

Call:  (7)  add(succ(succ(0)),  succ(succ(0)),  _G648) 

Call:  (8)  add(succ(0),  succ(succ(0)),  _G650) 

Call:  (9)  add(0,  succ(succ(0)),  _G652) 

Exit:  (9)  add(0,  succ(succ(0)),  succ(succ(0))) 

Exit:  (8)  add(succ(0),  succ(succ(0)),  succ(succ(succ(0)))) 

Exit:  (7)  add(succ(succ(0)),  succ(succ(0)), 
                                              succ(succ(succ(succ(0))))) 

Exit:  (6)  add(succ(succ(succ(0))),  succ(succ(0)), 
                                                succ(succ(succ(succ(succ(0)))))) 
```

那个教程最让我困惑的部分是，在第一个参数中，成功被剥离了，并且它递归了。虽然在递归时，R 获得了成功......如何？！另外，第一个出口 (9) 处的零是从哪里来的？我是序言的新手，我正在努力理解家庭作业的语言。非常感谢任何帮助。

注意：对于任何感兴趣的人，本教程的链接是[http://www.learnprolognow.org/lpnpage.php?pagetype=html&pageid=lpn-htmlse9](http://www.learnprolognow.org/lpnpage.php?pagetype=html&pageid=lpn-htmlse9)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T06:37:18.723

您看到`call`并且`exit`是`verbs`解释器为解决您提出的查询而采取的操作。然后，跟踪会显示已完成的实际工作的详细信息，并让您从历史角度查看它。

当 Prolog 必须选择一个规则（a `call`）时，它使用`name`你给它的（所谓的`functor`），并尝试对`unify`规则头部的每个参数。然后我们通常说，Prolog 也考虑了`arity`，即参数的数量，用于选择。

`Unification`试图“使等于”两个术语，而值得注意的结果就是所谓`bindings`的变量。您已经知道变量是那些以`Uppercase`. 此类名称标识规则中未指定的值，即`placeholders`用于参数。为了避免混淆，当 Prolog 显示跟踪时，变量被重命名以便我们可以识别它们，因为相关的细节是`identities`在证明期间建立的或绑定。

然后你会`_G648`在跟踪中看到这样的符号。它们停留在被调用目标的*尚未被实例*化的参数上，即`R`和`Z`。R 是唯一的（仅在顶级调用中出现），因此此 Prolog 友好地保留用户友好的名称，但 Z 来自程序，可能多次出现，然后被重命名。

回答这个问题

```
?-  add(succ(succ(succ(0))),  succ(succ(0)),  R). 
```

Prolog 首次尝试匹配

```
add(0,Y,Y). 
```

并失败，因为 succ(succ(succ(0)) 不能等于 0。然后尝试

```
add(succ(X),Y,succ(Z)) :- add(X,Y,Z). 
```

因此必须解决这些绑定（在左侧调用者的术语）：

```
succ(succ(succ(0))) = succ(X)
succ(succ(0)) = Y
R = Z 
```

你可以看到为什么 X 变成`succ(succ(0))`，我们有一个新的目标要证明，即`add(X,Y,Z)`带有刚刚建立的绑定的规则体：

添加（成功（成功（0）），成功（成功（0）），_G648）

依此类推...直到 X 变为`0`并且目标匹配

`add(0,Y,Y).`

`Z`那么Y就变成了succ(succ(0))，值得注意的是在调用规则中也给了一个值。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T06:14:16.877

***“第一个出口（9）处的零从哪里来？”***

该调用`add(0, succ(succ(0)), _G652)`与第一个子句统一，即如果 的第一个参数`add`为零，则第二个和第三个相同。在这种特殊情况下，变量`_G652`变为`succ(succ(0))`。

***“虽然在递归过程中，R 获得了成功……如何？！”***

这是应用第二条的结果。该子句（粗略地）表明您首先`succ`从第一个参数中剥离，然后`add`递归调用，最后，向`succ`从该递归调用返回的第三个参数添加另一个“层”。

谓词`add`只不过是 Peano 算术中加法的直接实现：[http ://en.wikipedia.org/wiki/Peano_axioms#Addition](http://en.wikipedia.org/wiki/Peano_axioms#Addition)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-31T13:19:48.103

带有更多注释的（希望）更清晰的跟踪是：

```
 (6) Call:  add(succ(succ(succ(0))),  succ(succ(0)),  R)          % R     = succ(_G648)
      (7) Call:  add(succ(succ(0)),  succ(succ(0)),  _G648)       % _G648 = succ(_G650) 
           (8) Call:  add(succ(0),  succ(succ(0)),  _G650)        % _G650 = succ(_G652) 
                (9) Call:  add(0,  succ(succ(0)),  _G652)         % _G652 = succ(succ(0))
                (9) Exit:  add(0,  succ(succ(0)),  succ(succ(0)))       
           (8) Exit:  add(succ(0),  succ(succ(0)),  succ(succ(succ(0)))) 
      (7) Exit:  add(succ(succ(0)),  succ(succ(0)), succ(succ(succ(succ(0))))) 
 (6) Exit:  add(succ(succ(succ(0))),  succ(succ(0)), succ(succ(succ(succ(succ(0)))))) 
```

如您所见，四个出口是多余的，最终答案*在*; `(9) Exit`那时只有一个出口就足够了：

```
 %     R = succ(_G648)
     %              _G648 = succ(_G650) 
     %                           _G650 = succ(_G652) 
     %                                        _G652 = succ(succ(0))
     % thus,
     %     R = succ(        succ(        succ(        succ(succ(0)) ))) 
```

这确实是尾调用优化下发生的情况，因为谓词定义*确实*是尾递归的，并且结果`R`是以自上而下的方式构建的，“洞”逐渐被逻辑变量的实例化填充。所以`succ( _ )`不是在递归调用*之后*添加的，而是在它*之前*建立的。这也是尾递归取模 cons 优化的本质。

# mysql - MySQL 语法错误 - 但我找不到

> ID：10308558
> 
> 赞同：1
> 
> 时间：2012-04-25T02:23:21.943
> 
> 标签：mysql

```
INSERT INTO mo_received 
(appid, msg, to, from, operator, keyword, smsid, udh, response, created) 
VALUES 
('13846', 'HELLO', '123456789', '987654321', 
'SKTELECOM', 'Cheese', 'MESSAGE', 'UDHSTUFF', '', NOW()); 
```

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在 'to、from、operator、keyword、smsid、udh、response、created）附近使用 VALUES（第 1 行的'13846'、'HE'

这就是我得到的错误。

奇怪的是，如果我删除“to”和“from”字段和值，插入工作正常。但我认为这些领域没有任何问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:27:23.637

列名不推荐使用“to”和“from”。它是保留的。
[http://dev.mysql.com/doc/refman/5.1/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.1/en/reserved-words.html)

如果您使用保留的列名，请用反向单引号括起来。

```
INSERT INTO mo_received (appid, msg, `to`, `from`, operator, keyword, smsid, udh, response, created) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T02:27:34.497

见[http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

# ruby-on-rails - NameError：调用 form_for 时未初始化的常量

> ID：10308560
> 
> 赞同：0
> 
> 时间：2012-04-25T02:23:46.723
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

-我的路线.rb

-resources：制造商做 -resources：vehicle_data -end

-在控制器中

*   定义创建
*   @manufacturer = 制造商.find(params[:manufacturer_id])
*   @vehicle_data = @manufacturer.vehicle_data.create(params[:vehicle_data])
*   @vehicle_data.save -结束

- 在视图中

-<%= form_for([@manufacturer, @manufacturer.vehicle_data.build]) 做 |f| %>

-尝试创建新记录时

-Vehicle_data#index 中的名称错误

- 显示 C:/Users.../app/views/vehicle_data/index.html.erb 其中第 12 行提出：

-未初始化的常量制造商：：**VehicleDatum** -提取的源（在第12行附近）：

-9: -10: -11: -12: <%= form_for([@manufacturer, @manufacturer.vehicle_data.build]) 做 |f| %> -13:
-14:

我如何使这个表格工作？？？为什么将模型名称从 VehicleData 更改为 VehicleDatum

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T02:42:55.580

Rails 期望模型是你定义的资源的单数形式，而数据的单数是数据，所以它期望你的类是一个`VehicleDatum`. 如果这不是您要使用的复数形式，请参阅[如何覆盖 Rails 命名约定？](https://stackoverflow.com/questions/1185035/how-do-i-override-rails-naming-conventions)

# php - 低容量银行软件的最佳数据库-PHP

> ID：10308563
> 
> 赞同：2
> 
> 时间：2012-04-25T02:24:07.783
> 
> 标签：php, mysql

我正在构建一个应用程序，该应用程序维护由信用卡或汇票资助的购买服务的可用现金余额。当然，作为一家小型初创公司，性能并不是什么大问题，因为一开始不会有数量。

也就是说，我的预算很小 阅读：暂时开源。使用传统的 Z 大型机我会很傻；oracle 为此事，所以我在innodb 或mysql 的myisam 引擎之间进行辩论。

对于我的大多数项目，我选择 innodb。对于第一个假设的 10 万客户来说，这可能是一个可行的选择吗？还是米萨姆？是否建议在金融交易中使用表锁定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:27:08.067

## 数据库选择

我会投票给`PostgreSQL` [http://www.postgresql.org/](http://www.postgresql.org/)它是最接近企业 RDMS 的地方，特别是如果你来自 oracle

也可以考虑`MySQl` [http://www.mysql.com/](http://www.mysql.com/)

## 引擎选择

如果您选择 MySQL，那么我建议您使用`innoDB`over， `MyIsam`因为`Database Transaction`支持对金融交易很重要

看 ：

[http://www.databasejournal.com/features/mysql/article.php/3382171/Transactions-in-MySQL.htm](http://www.databasejournal.com/features/mysql/article.php/3382171/Transactions-in-MySQL.htm)

[PHP + MySQL 事务示例](https://stackoverflow.com/questions/2708237/php-mysql-transactions-examples)

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T02:41:12.410

当数据完整性是首要问题时，InnoDB 是合乎逻辑的选择。以下是一些比较：

*   InnoDB 较新，而 MyISAM 较旧。

*   InnoDB 更复杂，而 MyISAM 更简单。

*   InnoDB 在数据完整性方面更加严格，而 MyISAM 则没有那么严格。

*   InnoDB 实现了用于插入和更新的行级锁，而 MyISAM 实现了表级锁。

*   InnoDB 有事务，而 MyISAM 没有。

*   InnoDB 有外键和关系约束，而 MyISAM 没有。

*   InnoDB 有更好的崩溃恢复，而 MyISAM 在系统崩溃时恢复数据完整性方面很差。

*   MyISAM 有全文搜索索引，而 InnoDB 没有。

在我开发的金融应用程序中，通常的布局通常从 InnoDB 上的所有内容开始，除了可能用于记录日志或类似任务的表。MyISAM 不具备的 InnoDB 最重要的特性是`transactions`. 也就是说，多个操作被视为一个。他们都成功或交易失败。

一旦应用程序需要扩展，其他非关键表将转换为 MyISAM，这会有所帮助，尤其是在您的应用程序有大量流量的情况下。

希望有帮助，加油！

# apache-flex - （flex mobile）当我按下左或右键盘时如何隐藏列表中的黑色边框

> ID：10308569
> 
> 赞同：0
> 
> 时间：2012-04-25T02:25:12.947
> 
> 标签：apache-flex, mobile, flex4, border

这是黑色边框：

![在此处输入图像描述](../Images/d2b3da684c6bbf0d7082abb1e0c8a66e.png)

这是我的代码：

```
 <s:List id="channelsPart" left="120" right="80" top="50" change="onChannelsChange(event)"
        dataProvider="{channels=new ArrayList(data.cloud.channels)}" labelField="title"
        requireSelection="true"
        fontFamily="TwinCen"
        fontSize="24"
        alternatingItemColors="[]"
        borderVisible="false"
        contentBackgroundAlpha="0"
         selectionColor="0"
        >

    <s:itemRenderer >
        <fx:Component>
            <s:ItemRenderer>
                <fx:Script>
                    <![CDATA[
                        import mx.core.UIComponent;
                        override public function set data(value:Object):void {
                            //sn.text = String(itemIndex+1);
                            txt.text = String(value.title);
                            //txt.label = String(value.title);
                        }
                    ]]>
                </fx:Script>
                 <!-- <s:BitmapImage source="assets/sohupp-login-btn-login.png" width="70" height="30" scaleMode="stretch"  /> -->
                 <s:Label id="txt" width="70" height="30"  verticalAlign="middle"  textAlign="center"   backgroundAlpha="0" />
            </s:ItemRenderer>
        </fx:Component>
    </s:itemRenderer>
</s:List> 
```

那我能做什么，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T04:59:08.117

黑色边框是当您在列表中使用键盘导航时发生变化的选择指示器。我不确定您是否需要在移动应用程序中担心这一点，但也许它也会出现在设备上？

在任何情况下，您都可以使用`autoDrawBackground`. [ItemRenderer 文档在这里](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/ItemRenderer.html)...`ItemRenderer`

试试这个，在你声明项目渲染器的那一行：

```
<s:ItemRenderer autoDrawBackground="false"> 
```

如果您仍然想要绘制背景，可以向渲染器添加一些简单的视图状态：

```
 <s:itemRenderer>
        <fx:Component>
            <s:ItemRenderer autoDrawBackground="false">
                <fx:Script>
                    <![CDATA[
                        import mx.core.UIComponent;
                        override public function set data(value:Object):void {
                            txt.text = String(value.title);
                        }
                    ]]>
                </fx:Script>
                <s:states>
                    <s:State name="normal"/>
                    <s:State name="selected"/>
                </s:states>
                <s:Rect includeIn="selected" top="0" left="0" right="0" bottom="0">
                    <s:fill>
                        <s:SolidColor color="#FF0000" alpha=".25"/>
                    </s:fill>
                </s:Rect>
                <s:Label id="txt" width="70" height="30"  verticalAlign="middle"  textAlign="center"   backgroundAlpha="0" />
            </s:ItemRenderer>
        </fx:Component>
    </s:itemRenderer> 
```

顺便说一句，Adobe 建议您使用[`LabelItemRenderer`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/LabelItemRenderer.html)or[`IconItemRenderer`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/IconItemRenderer.html)代替`ItemRenderer`移动应用程序。它们针对移动设备进行了优化，但不够灵活，因为您必须编写一些 Actionscript 来扩展它们并做一些花哨的事情。在简单的用例中，使用常规`ItemRenderer`可能没什么大不了的:)

# c# - .net 4.0 中不存在 HttpClient：我该怎么办？

> ID：10308572
> 
> 赞同：60
> 
> 时间：2012-04-25T02:25:35.260
> 
> 标签：c#, .net, webclient

好的，我编辑了我的代码我没有收到错误，但 messageBox.Show 没有返回任何空框。也许我需要在引用字符串中添加一些东西？我不明白什么是推荐人以及我应该放什么。而且我已经在我的代码中使用了一个密钥。密钥是一个长字符串，我在我的代码中使用它，我不与引用者一起使用。为什么不翻译“hi”这个词？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Globalization;
using System.IO;
using System.Net;
using System.Web;
using System.Web.Script.Serialization;

namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        private JavaScriptSerializer _Serializer = new JavaScriptSerializer();

        public Form1()
        {
            InitializeComponent();
            string f = TranslateText("hi", "English", "German", "", "");
            MessageBox.Show(f);
        }

        private void Form1_Load(object sender, EventArgs e)
        {
        }

        public string TranslateText(string inputText, string sourceLanguage, string destinationLanguage, string referrer, string apiKey)
        {
                string requestUrl = string.Format(
                    "http://ajax.googleapis.com/ajax/services/language/translate?v=1.0&q={0}&langpair={1}|{2}&key={3}", 
                    HttpUtility.UrlEncode(inputText), 
                    sourceLanguage.ToLowerInvariant(), 
                    destinationLanguage.ToLowerInvariant(), 
                    apiKey
                );

                try
                {
                    HttpWebRequest http = (HttpWebRequest)HttpWebRequest.Create(requestUrl);
                    http.Referer = referrer;
                    HttpWebResponse response = (HttpWebResponse)http.GetResponse();
                    using (StreamReader sr = new StreamReader(response.GetResponseStream()))
                    {
                        string responseJson = sr.ReadToEnd();
                        var translation = this._Serializer.Deserialize<Milkshake.Integration.Google.GoogleAjaxResponse<Milkshake.Integration.Google.Translate.TranslationResponse>>(responseJson);

                        if (translation != null && translation.ResponseData != null && translation.ResponseData.ResponseStatus == HttpStatusCode.OK)
                        {
                            return translation.ResponseData.TranslatedText;
                        }
                        else
                        {
                            return String.Empty;
                        }
                    }
                }
            catch
                {
                    return String.Empty;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-08-10T04:57:57.903

我曾多次在 .NET 4.0 应用程序中使用 HttpClient。如果您熟悉 NuGet，则可以执行 Install-Package Microsoft.Net.Http 将其添加到您的项目中。有关详细信息，请参阅下面的链接。

[http://nuget.org/packages/Microsoft.Net.Http](http://nuget.org/packages/Microsoft.Net.Http)

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-04-25T02:29:35.243

*   您可以使用[**WebClient**](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)。

*   或者（如果您需要对请求进行更细粒度的控制）[**HttpWebRequest**](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)

*   或者， System.Net.Http.dll 中的[**HttpClient**](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient%28v=vs.110%29.aspx)。

这是对 HttpWebRequest 的“翻译”（需要而不是 WebClient 来设置引荐来源网址）。（使用 System.Net 和 System.IO）：

```
 HttpWebRequest http = (HttpWebRequest)HttpWebRequest.Create(requestUrl))
    http.Referer = referrer;
    HttpWebResponse response = (HttpWebResponse )http.GetResponse();
    using (StreamReader sr = new StreamReader(response.GetResponseStream()))
    {
        string responseJson = sr.ReadToEnd();
        // more stuff
    } 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-11-05T16:37:45.753

参考上面的答案，我只是添加这个来帮助澄清事情。可以使用 .Net 4.0 中的 HttpClient，您必须从[此处安装包](http://www.nuget.org/packages/Microsoft.Net.Http/)

但是，文本非常混乱，并且自相矛盾。

> Visual Studio 2010 不支持此包，只有在使用使用此包的库时，面向 .NET Framework 4.5、Windows 8 或 Windows Phone 8.1 的项目才需要此包。

但在它下面指出这些是受支持的平台。

支持的平台：

*   .NET 框架 4

*   视窗 8

*   视窗电话 8.1

*   Windows 手机银光 7.5

*   银光4

*   便携式类库

忽略它以 .Net 4.5 为目标的方式。这是错误的。该软件包是关于在 .Net 4.0 中使用 HttpClient 的。但是，您可能需要使用 VS2012 或更高版本。不确定它是否适用于 VS2010，但这可能值得测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-25T13:01:48.410

读这个...

**用于 .NET Framework 和 Windows Phone 的便携式 HttpClient**

请参阅段落*在 .NET Framework 4.0 或 Windows Phone 7.5 上使用 HttpClient* [http://blogs.msdn.com/b/bclteam/archive/2013/02/18/portable-httpclient-for-net-framework-and-windows-phone .aspx](http://blogs.msdn.com/b/bclteam/archive/2013/02/18/portable-httpclient-for-net-framework-and-windows-phone.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-12T18:29:12.830

同意 TrueWill 对单独答案的评论，我见过的在当前 Visual Studio 下的 .NET 4 目标项目上使用 system.web.http 的最佳方式是`Install-Package Microsoft.AspNet.WebApi.Client -Version 4.0.30506`

# objective-c - 将值传递给方法参数以创建 CGRect

> ID：10308574
> 
> 赞同：0
> 
> 时间：2012-04-25T02:25:55.150
> 
> 标签：objective-c, ios, ipad

我对 Objective-C 很陌生。我正在尝试编写一种方法，在该方法中创建一个包含特定大小的图像文件的 UIImageView。

这是我的方法：

```
- (void)setImageViewElements:(UIImageView *)imageViewName : (NSString *)imageName : (NSInteger )topX : (NSInteger )topY : (NSInteger )imageWidth : (NSInteger )imageHeight
{
    imageViewName = [[UIImageView alloc] initWithFrame:CGRectMake(topX, topY, imageWidth, imageHeight)];
    [imageViewName setImage:[UIImage imageNamed:imageName]];
    [self.view addSubview:imageView];
} 
```

Xcode 为该方法抛出此警告： Conflicting parameter types in implementation of 'setImageViewElements::::::': 'CGFloat *' (aka 'float *') vs 'NSInteger' (aka 'int')

我想这样称呼它：

```
[self setImageViewElements:myImageView :@"myImage.png" :150 :532 :112 :82]; 
```

Xcode 为调用抛出此警告：不兼容的整数到指针转换将 'int' 发送到类型为 'CGFloat *' (aka 'float *') 的参数；

我尝试将参数更改为 float、CGFloat 和 int，但我得到了相同的错误变化。

任何帮助，将不胜感激。

谢谢莫里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:40:14.320

“实现中的参数类型冲突...”表明 .h 文件中的方法签名与 .m 文件中的方法签名不匹配。也许您的 .h 仍然有使用的旧版本`CGFloat`？

作为一个附带建议，为什么不传入“更大”的对象和结构而不是单独的图像名称、x、y、宽度和高度参数？就像是：

```
- (void) setImageViewElements:(UIImageView *)imageViewName
                    withImage:(UIImage *)image
                      inFrame:(CGRect)rect 
```

然后你会这样称呼它：

```
[self setImageViewElements:myImageView
                 withImage:[UIImage imageNamed:@"myImage.png"]
                   inFrame:CGRectMake(150, 532, 112, 82)]; 
```

使用命名参数通常也被认为是很好的风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T02:37:17.293

`CGFloat *`您的头文件有此方法的声明，该声明在您的定义中至少有一个`NSInteger`.

编译器在关于该冲突的第一个警告中抱怨。第二个警告是因为编译器正在使用标头中的版本来生成代码，并且它认为您希望它使用整数作为指向 a 的指针`CGFloat`，这不是一个好主意。

这里有两个问题。首先，`CGFloat`s 的参数不需要是指针。这些是原始类型，而不是对象。二是声明与定义的冲突。第三，您的方法名称缺少参数标签，这是合法的，但与既定风格完全相反，而且很难阅读。三个问题。

宣言：

```
- (void)prepareImageView:(UIImageView *)imageView withImageName:(NSString *)name originX:(CGFloat)topX originY:(CGFloat)topY width:(CGFloat)width height:(CGFloat)height; 
```

确保定义看起来相同，尤其是包括参数的类型。

您还可以通过使方法采用`CGRect`参数来使其更易于阅读：

```
- (void)prepareImageView:(UIImageView *)imageView withImageName:(NSString *)name frame:(CGRect)frame; 
```

然后你这样称呼它：

```
[self prepareImageView:myImageView withImageName:@"myImage.png" frame:(CGRect){150, 532, 112, 82}]; 
```

# asp.net - 哪个 web.config 文件应包含以下值？

> ID：10308579
> 
> 赞同：0
> 
> 时间：2012-04-25T02:27:15.133
> 
> 标签：asp.net, web-config

我已经搜索了一个关于哪个 MVC 项目/查看 web.config 文件应该包含以下值的简单答案：

```
<configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
        <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
</configSections> 
```

我目前正在使用 VS 2010 Express 在 Vista SP1 上执行此操作。还安装了 SQL ServerCE 4.0。有人可以给我一些关于去哪里的细节吗？

提前致谢 。. . 汤姆J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:36:20.033

这将`<configuration><configSections>`在您的 web.config 中进行。这是一个[例子](http://3.bp.blogspot.com/-5K1xVWSdyUA/TWnZawn0FII/AAAAAAAAALw/X0znM-5KxCQ/s1600/webconfig.png)。

# javascript - 在登台服务器中有效但在生产中失败的无效 URL

> ID：10308581
> 
> 赞同：1
> 
> 时间：2012-04-25T02:27:22.173
> 
> 标签：javascript, url, join

我花了整整一夜的时间来弄清楚为什么我们的生产服务器有一个在我们的登台服务器中遗漏的错误。而今天早上，我终于缩小了范围，把它钉在了这段代码上：

```
url = [ database.protocol, '//' + database.host, database.port, ].join(':');
url = [ url, database.db ].join('/'); 
```

是的。这到底是怎么回事？好吧，在分期中它显示：

```
http://:localhost:5984/fo 
```

但在主人它显示

```
http://:10.x.x.x:5984/fo (x is a number) 
```

前者有效，但后者无效。这就是我对 URL 的了解让我失望的地方。前者到底如何有效，而后者无效？

编辑：

需要明确的是，我认为这两个 URL 都应该是无效的，这是一个应该在我的登台服务器中捕获的错误。我只想知道为什么前一个 URL (:localhost) 被解释为有效但后者不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:30:41.027

`localhost`是（几乎总是）`127.0.0.1`。`127.0.0.1`非常不同`10.x.x.x`。

如果服务器正在侦听`localhost`，则只会接收来自服务器本身的连接。因此，即使输入服务器的 IP 也不足以从外部连接到它。

确保服务器正在侦听其网络 IP，而不是环回。

# windows - 以编程方式安装 NDIS 过滤器驱动程序

> ID：10308583
> 
> 赞同：2
> 
> 时间：2012-04-25T02:27:30.503
> 
> 标签：windows, networking, driver, ndis

我正在尝试编写 C++ 代码以编程方式安装 NDIS 6.0 轻量级过滤器驱动程序。在查看了 WinDDK、在线示例和 MSDN 文档后，我最终得到了下面的代码示例。（为清楚起见，跳过了错误处理）问题是 INetCfgClassSetup::Install 总是返回错误 0x8004a024。（我在头文件中找不到错误代码。）

使用相同的 .inf 文件手动安装驱动程序就可以了。

WinDDK 中的 Bindview 示例可以很好地安装驱动程序，只要它采用调用 INetCfgClassSetup::SelectAndInstall 的路径即可。使用 INetCfgClassSetup::Install 的替代路径不起作用。

我的机器上启用了内核调试，因此不需要驱动程序签名。

下面的代码有什么问题吗？

谢谢。

```
....
isCopied = SetupCopyOEMInfA(pathToInf, // path to inf file
                            pathToBin, // dir containing driver binary
                            SPOST_PATH,
                            0,
                            DestinationInfFileName,
                            256,
                            NULL,
                            NULL);
....
INetCfg      *pnc = NULL;
INetCfgClassSetup   *pncClassSetup = NULL;
HRESULT      hr;
OBO_TOKEN           OboToken;
....
hr = CoCreateInstance( CLSID_CNetCfg,
                       NULL, CLSCTX_INPROC_SERVER,
                       IID_INetCfg,
                       (void**)&pnc );
....
hr = pnc->QueryNetCfgClass ( &GUID_DEVCLASS_NETSERVICE,
                             IID_INetCfgClassSetup,
                             (void**)&pncClassSetup );
....
ZeroMemory( &OboToken, sizeof(OboToken) );
OboToken.Type = OBO_USER;
//
// this call fails:
hr = pncClassSetup->Install(COMPONENT_ID,
                            &OboToken,
                            0,
                            0,
                            0,
                            0,
                            NULL); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:28:27.640

错误代码 0x8004a024 代表 NETCFG_E_NO_WRITE_LOCK。安装功能需要一个写锁，所以尝试使用 INetCfg->AcquireWriteLock 获得一个。不要忘记最终释放锁，然后释放接口。

# teamcity - TeamCity AssemblyInfo Patcher 用于网站项目？

> ID：10308585
> 
> 赞同：2
> 
> 时间：2012-04-25T02:27:34.807
> 
> 标签：teamcity, assemblyinfo, teamcity-7.0

我有一个包含网站项目（不是 Web 应用程序）的 VS2010 解决方案。在`App_Code`文件夹中，我有一个`AssemblyInfo.cs`包含我的版本信息的文件。

我使用 TeamCity 7.0.2 构建此解决方案并配置了“附加构建功能”AssemblyInfo 修补程序。修补程序适用于解决方案中的类库项目，但似乎对网站项目没有影响。

TeamCity 7.x 文档指出：

> *此功能仅适用于“标准”项目，即通过 Visual Studio 向导创建的项目。*

我希望有一些方法可以在我的网站项目中利用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:26:17.960

1.  在网站的根目录中创建文件夹属性。
2.  在新文件夹中创建 AssemblyInfo.cs
3.  TC 中的第一步将 AssemblyInfo 复制到 App_Code。
4.  检查 App_Code.dll 文件 BestRegards 的版本。

PS 不要使用 WebSite，如果你长大了 TC，你必须使用 WebApp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T06:30:14.987

来自文档：

> > 此功能仅适用于“标准”项目，因此所有 AssemblyInfo 文件和内容都具有标准位置。

您是否尝试将您的 AssemblyInfo 移动到该项目的标准位置，我猜是`YourProj/Properties/AssemblyInfo`？

不管怎样，我认为你不应该这样做。您应该有一个`AssemblyInfo`文件，并且其他项目应该引用（[添加为链接](http://msdn.microsoft.com/en-us/library/9f4t9t92.aspx)）到这个 AssemblyInfo。（除非您有充分的理由让装配信息有所不同）

因此，在您的情况下，我将从您的 Web 项目*中删除*AssemblyInfo.cs，并将其作为来自 TC 的其他项目之一的链接返回。

# javascript - FancyBox 2 的回调和参数

> ID：10308586
> 
> 赞同：1
> 
> 时间：2012-04-25T02:27:35.310
> 
> 标签：javascript, html, fancybox, slideshow

斯科利斯又来了。由于客户最近要求我在他们的网站上添加多个图像幻灯片，我一直在网上寻找可以通过链接调用的免费幻灯片/图片库......而无需将幻灯片中的所有图像作为链接在页面上。我在灯箱方面取得了一些成功，我找到了fancybox。我有一个在网站上工作的 sildshow。我的问题是我试图在用户单击链接时自动启动幻灯片。下面是fancybox java脚本的代码

```
 <script type="text/javascript">
    $(document).ready(function() {

        $("#fancybox-manual-c").click(function() {
            $.fancybox.open
            ([{ autoPlay:true,
                href : '../images/BDAY 2.jpg',
                title : 'My title'
                }, 
            {
                href : '../images/horse_pic_3.jpg',
                title : '2nd title'
                }, 
            {
                href : '../images/lori.jpg'
                }],
             {'callbackOnShow':myFunc,
                helpers : {
                    thumbs : {
                        width: 75,
                        height: 50
                    },
                    buttons : {}

                }
            });
        });

    });
</script>
<style type="text/css">
    .fancybox-custom .fancybox-skin {
        box-shadow: 0 0 50px #222;
    }
</style>
<script type="text/javascript">
function myFunc() {
alert("Opened!");
}

</script> 
```

在我的 HTML 正文中

```
<a id="fancybox-manual-c" href="javascript:;">Open gallery</a> 
```

有人可以告诉我我是否应该使用回调......如果是这样，或者我应该在哪里或是否应该只使用“autoPlay：true”。谢谢 SCorliss

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:59:26.353

如果您只想让它自动播放，我会说只使用内置选项。

但在这种情况下，您可能希望将您的`autoplay:true`设置移动到 fancybox 参数的选项部分。

Fancybox 参数（来自：[http](http://fancyapps.com/fancybox/#docs) ://fancyapps.com/fancybox/#docs ）：

```
$.fancybox.open( [group], [options] ) 
```

**将`autoplay:true`设置向下移动到选项对象参数中：**

```
$.fancybox.open(
    [
        { href : '../images/BDAY 2.jpg', title : 'My title' }, 
        { href : '../images/horse_pic_3.jpg', title : '2nd title' }, 
        { href : '../images/lori.jpg' }
    ],
    {
        autoplay: true,
        helpers : {
            thumbs : { width: 75, height: 50    },
            buttons : {}
        }
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T13:43:39.517

正如您的标题所说的“FancyBox 2 的回调和参数”，您可以在选项卡回调下找到 fancybox 2 插件的回调选项的完整列表。

[http://fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)

# c++ - GetTickCount() 什么时候开始计数？

> ID：10308588
> 
> 赞同：-7
> 
> 时间：2012-04-25T02:27:52.077
> 
> 标签：c++, winapi, counter

我阅读了[GetTickCount](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408%28v=vs.85%29.aspx)或[GetTickCount64](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724411%28v=vs.85%29.aspx)的文档，我想知道它是否从系统开机或上次重新启动时开始计数？

**换句话说，当计算机重新启动时，计时器是否重置为 0？**

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-04-25T03:55:16.080

哇，这么多毫无意义的言论。我应该走自己测试的路线，而不是在这里问。谢谢，muntoo，为了改写它。有兴趣的朋友可以看看我的实际测试结果：

*   关闭系统然后重新启动，显然会重置 GetTickCount 或 GetTickCount64 API 返回的滴答计数器。
*   重新启动（或重新启动）Windows 操作系统**也会重置**这些计数器。（这就是我需要知道的。）

PS。这个问题**不是**关于重启和关机之间的区别，也不是关于哪个API更好用。

# android - 转到特定的主屏幕

> ID：10308590
> 
> 赞同：0
> 
> 时间：2012-04-25T02:28:59.980
> 
> 标签：android, homescreen

我想为需要根据所选值转到特定主屏幕的展位设计一个特定的后台应用程序...

有谁知道这样做的方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:43:24.577

实现您自己的自定义启动器。Launcher 只是另一个应用程序，主屏幕只不过是它的 UI 显示，Android 本身没有任何东西可以控制它。

# algorithm - 如何确定 x 和 y 是否存在于一组满足方程的整数 X 中

> ID：10308595
> 
> 赞同：5
> 
> 时间：2012-04-25T02:29:24.073
> 
> 标签：algorithm

我刚刚在准备考试时遇到了一个考试问题，我被困住了。问题是：

设计一个算法，给定一组正整数 X，确定方程 x ⁵ + xy - y ² = y ³是否具有 x 和 y 都属于 X 的解。

不涉及编程，只是算法设计。有人可以分享他们的想法吗？

暴力是不可接受的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:37:23.613

伪代码：

```
result = false
foreach (x in X) {
    foreach (y in X) {
        if (x^5 + x*y - y^2 == y^3) result = true
    }
} 
```

是否比预期的更复杂？如果是这样，可以像这样利用高阶项`x^5`：

```
Sort X as a list from least to greatest.
result = false
foreach (y in X) {
    v = y*y*(y+1)
    foreach (x in X) {
        x2 = x*x
        u = x2*x2 + x*y - v
        if (u == 0) {
            result = true
            goto [DONE]
        }
        if (u > 0) goto [NEXT]
    }
    [NEXT]
}
[DONE] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T02:39:44.093

对于（真的！）大量输入，您可以：

1.  对列表进行排序；
2.  [使用公式](http://en.wikipedia.org/wiki/Cubic_function#General_formula_of_roots)求解每个数字的三次方程。这里假设每个数都是`x`，所以方程变成了 的三次方程`y`，那么公式是适用的。然而，这个公式可能需要很长时间，为了避免可能的精度问题，您可以插入答案来检查它。然后对排序列表（O（logn））进行二进制搜索。

这将渐近 O(nlogn)，但常数因素是可怕的，并且被大哦很好地隐藏了（好吧，如果你正在回答问题，而不是编写程序）。当然，如果允许散列（这通常是面试的情况，但不一定是考试），这可能是 O(n)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T02:40:56.137

求解 y 作为 x 的函数：[http ://www.wolframalpha.com/input/?i=x%5E5%2B+xy+-+y%5E2+-+y%5E3](http://www.wolframalpha.com/input/?i=x%5E5%2B+xy+-+y%5E2+-+y%5E3)

```
y(x) := INSERT_EQUATION_HERE
any((y in setX) for y in y(x) for x in setX) 
```

这需要 O(|X|)，即线性时间。

或者，如果您没有使用具有`any`函数或列表操作的语言，那么您的解决方案必须更加冗长：

```
for x in setX:
    possibleYs = solveForY(x)
    for y in possibleYs:
        if y in setX:
            return SOLUTION:(x,y)
return NO_SOLUTION 
```

您实际上不必像我上面展示的那样求解 2D 多项式。相反，您可以考虑集合中的每个 x；这修复了 x 并为您提供了 y 中的多项式。然后，您在恒定时间内求解该多项式。例如，如果 x=0，我们会找到 y^2==y^3 的 3 个解；如果 x=1，我们会找到 2-y^2==y^3 的 3 个解决方案，如果 x=-0.52，我们会等等。解决方案是[http://en.wikipedia.org/wiki/ Cubic_function#General_formula_of_roots](http://en.wikipedia.org/wiki/Cubic_function#General_formula_of_roots)

问题的更一般版本：

如果您考虑任意多项式，请注意此方法只能在以下情况下提供 O(1) 效率：min(max_x_degree, max_y_degree)<5。这是因为，正如[伽罗瓦理论](http://en.wikipedia.org/wiki/Galois_theory)所证明的那样，唯一具有某些封闭形式解的多项式是 4 次或更小的多项式。而在这个问题中，我们可以把度数最高的变量变成一个常数。

这并不是说在 min(max_x_degree, max_y_degree)<5 的情况下，不能通过其他方法获得 O(1) 效率。

如果增加变量的数量，事情也会变得更有趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T02:41:34.930

如果集合 X 不是很大，那么简单的蛮力算法可以通过构造 2D 矩阵来工作。

# xml - Xml 命名空间和 C# csproj

> ID：10308598
> 
> 赞同：9
> 
> 时间：2012-04-25T02:30:01.873
> 
> 标签：xml, powershell

我正在使用 powershell 2.0 来编辑很多 csproj 文件。编辑的要求之一是添加具有不同条件的新 PropertyGroup（请查看下面的示例）

```
<PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'My-New-Env|AnyCPU'"> 
```

问题是 powershell 为我添加的所有新 PropertyGroup 标签添加了空的 xmlns。

例如：

```
<PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'My-New-Env|AnyCPU'" xmlns=""> 
```

**有没有办法在没有任何命名空间的情况下添加新的 xml 节点？**

在添加新的 PropertyGroup 之前，我尝试使用下面的代码删除命名空间属性，但它不起作用。（这意味着该属性实际上并未被删除，并且在添加新节点后我仍然可以看到空的命名空间。）

```
$content = [xml](gc $_.FullName);     

    Write-Host "Reading "$_.FullName -foregroundcolor yellow;

    $project = $content.Project;

    $content.Project.RemoveAttribute("xmlns"); 
```

**编辑：**我正在关注这篇文章以添加新节点。

[如何从 powershell 将新的 PropertyGroup 添加到 csproj](https://stackoverflow.com/questions/9991688/how-to-add-new-propertygroup-to-csproj-from-powershell)

例子：

```
$content = [xml](gc $_.FullName); 
  $importNode = $content.ImportNode($configs.DocumentElement, $true) 
  $project = $content.Project;
  $project
  $project.AppendChild($importNode);
  # $content.Save($_.FullName); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T12:07:22.060

看这个线程：[http](http://bytes.com/topic/net/answers/377888-importing-nodes-without-namespace) ://bytes.com/topic/net/answers/377888-importing-nodes-without-namespace ，似乎不容易做到，但是可以使用解决方法：

代替：

```
$content.Save($_.FullName); 
```

采用：

```
$content = [xml] $content.OuterXml.Replace(" xmlns=`"`"", "")
$content.Save($_.FullName); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-09T17:44:16.090

csproj 文档具有默认命名空间。因此，在创建元素时，您需要引用相同的命名空间，否则您会发现生成的 xmlns 设置为空字符串。

这是我找到解决方案的[链接](https://stackoverflow.com/questions/135000/how-to-prevent-blank-xmlns-attributes-in-output-from-nets-xmldocument)

```
$elem = $content.CreateElement("PropertyGroup", $content.DocumentElement.NamespaceURI);
$content.Project.AppendChild($elem); 
```

# c++ - C++ 中的玛雅历法

> ID：10308601
> 
> 赞同：3
> 
> 时间：2012-04-25T02:30:12.140
> 
> 标签：c++, class, initialization

所以我有一个任务，我应该用 C++ 编写一个玛雅日历，这样日历就具有以下功能：

```
argv[1] | argv[2]        |  argv[3]        | output
m+d     | Mayan date     |  number of days | Mayan date
m-d     | Mayan date     |  number of days | Mayan date
m-m     | Mayan date     |  Mayan date     | number of days
g=      | Gregorian date |                 | Mayan date
m=      | Mayan date     |                 | Gregorian date 
```

> 第一个操作 m+d 需要一个玛雅日期和天数。该操作将天数添加到 Mayan 日期以生成 Mayan 日期作为输出。第二个操作 md 从玛雅日期中减去天数以生成玛雅日期作为输出。第三个操作 mm 计算两个玛雅日期之间的天数。第四个操作 g= 将公历日期转换为玛雅日期。最后的操作 m= 将玛雅日期转换为公历日期。

玛雅历法单位的设置方式如下：

```
Days                  Long Count period         Long Count unit
1                                               1 Kin
20                    20 Kin                    1 Uinal
360                   18 Uinal                  1 Tun
7,200                 20 Tun                    1 Ka'tun
144,000               20 Ka'tun                 1 Bak'tun
2,880,000             20 Bak'tun                1 Pictun
57,600,000            20 Pictun                 1 Kalabtun
1,152,000,000         20 Kalabtun               1 K'inchiltun
23,040,000,000        20 K'inchiltun            1 Alautun 
```

我在初始化玛雅日历对象时遇到问题。这是我到目前为止所拥有的：

```
class MayanDate {
// Bak'tun, Ka'tun, etc stuff ...
unsigned int Kin = 1;
unsigned int Uinal = 20;
unsigned int Tun = 360;
unsigned int Katun = 7200;
unsigned int Baktun = 144000;
unsigned int Pictun = 2880000;
unsigned int Kalabtun = 57600000;
unsigned long Kinchiltun = 1152000000;
unsigned long Alautun = 23040000000;

public:

        MayanDate();
        MayanDate( unsigned int, unsigned int, unsigned int, unsigned int, unsigned int);

        void set( unsigned int, unsigned int, unsigned int, unsigned int, unsigned int);
        MayanDate &operator++();
        int operator-( const MayanDate &) const;
        MayanDate operator+( unsigned int ) const;
        MayanDate operator-( unsigned int) const;
        bool operator==( const MayanDate & ) const;
        bool operator!=(const MayanDate & m ) const;
        void get_string( char*, unsigned int) const;
}; 
```

我希望能够将单位设置为等于我初始化课程时它们所代表的天数，因此使用它们会更容易。

我上面的代码没有编译，我不知道为什么。任何指向我做错了什么的指针都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:59:54.613

我认为你应该在课堂上以玛雅风格保存数据。您必须能够将 Maya 纪元开始的天数转换为它，如下所示：

```
void toMayan(long long d)
{
  kin = d % 20; d /= 20;
  unial = d % 18; d /= 18;
  tun = d %20; d /= 20;
  //...
} 
```

反向转换很简单：`kin + 20 * (unial + 18 * (tun + 20 * (...)))`

接下来，您应该知道如何计算公历中从某个日期到另一个日期的天数。例如，您可以查看 java 的 Date 类源 ( [http://www.docjar.com/html/api/java/util/Date.java.html](http://www.docjar.com/html/api/java/util/Date.java.html) )。

最后 - 你必须知道任何以公历形式的玛雅日期来计算日历之间的天数差异。将一个日期转换为天，减去（或添加）差异，然后转换为另一个。

# android - 如何实现 Google Places API

> ID：10308604
> 
> 赞同：-1
> 
> 时间：2012-04-25T02:30:57.147
> 
> 标签：android, api, google-maps

晚上好，

我一直在尝试实现一个简单的 Android(tm) 应用程序，该应用程序利用 Google Places(tm) API 来确定当地的兴趣点（例如餐馆和酒店），但是我在确定如何实际获取时遇到了很多麻烦开始了。

我已经使用的资源如下：

- [Google Places(tm) 文档](https://developers.google.com/maps/documentation/places/ "Google(tm) Places 文档")

-[由Brain Buikema主持的Android(tm)开发博客](http://blog.brianbuikema.com/2010/08/android-development-part-1-using-googles-places-api-to-develop-compelling-location-based-mobile-applications/)

-关于异步任务的 Android(tm) 开发者文档

-来自类似情况的个人的各种其他stackoverflow帖子

我只是希望得到一些指导，以便我这种情况的任何人都可以简单地找到这篇文章，然后可能会被转发到一些非常有见地的资源。

此外，我觉得使用谷歌搜索来查找资源有些低效，还有其他我不知道的程序员经常使用的数据库吗？有推荐的文献吗？

TL;博士...

-我正在寻找一些关于使用 Places API、在 Android(tm) 平台上使用 JSON 对象和网络的权威指南。

-我希望被重定向到其他人过去发现的一些有用的资源。

- 我在下面包含了我的 Main.java 文件只是为了提供上下文 - 我不是在寻找答案:)

* * *

实现 Places API 功能的 Main.java 类的代码：

```
 Button food = (Button) findViewById(R.id.button14);

        food.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) 
        {
            type = "restaurant";

            //Constructs the urlString
            if(useCurr)
                urlString = stringConstructor(myKey, lat, lon, radius, sensor, type);
            else
            {
                //Here, you must update the lat and lon values according to the location input by the user
                urlString = stringConstructor(myKey, lat, lon, radius, sensor, type);
            }

            //DO HTTPS REQUEST HERE
            urlString = "https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AIzaSyAp24M3GU9V3kWrrezye8CyUrhtpToUhrs";

            Results res = new Results();

            JSONArray json = res.doInBackground(urlString);

            System.out.println(json);

        }
    }); 
```

处理异步任务的 Result 类的代码：

```
private class Results extends AsyncTask<String, Integer, JSONArray>
{
    protected JSONArray doInBackground(String...params)
    {
        JSONArray output = null;

        try
        {
            try
            {
                url = new URL(params[0]);   
            }
            catch(MalformedURLException e)
            {
                System.out.println("URL formed incorrectly! (" + e + ")");
            }

            output = (JSONArray) url.getContent();
        }
        catch(Exception e)
        {
            System.out.println("Exception: " + e);
        }

        return output;
    }
} 
```

每当我单击模拟器中的“食物”按钮（如上所述）时，当前都会收到 android.os.NetworkOnMainThreatException。

非常欢迎任何建议，我正在努力在 Android 平台上建立一个非常坚实的基础。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:41:20.850

你没有`AsyncTask`以正确的方式使用。android doc 明确表示不要`AsyncTask`手动调用方法。您`doInBackground`通过创建`AsyncTask` 更改代码的对象来调用：

```
 btnclicl.setOnClickListener(new View.OnClickListener() {  
                @Override  
                public void onClick(View v) {  
                    Results  dTask = new Results();  
                    dTask.execute(urlString);  
                }  
            });  

    class Results  extends AsyncTask<Integer, Integer, String>{  

            @Override  
        protected void onPostExecute(JSONObject json) {  
            Log.v("json", json);
            super.onPostExecute(json); 
        }  
        @Override  
        protected JSONObject doInBackground(String... params) { 
            JSONObject strtemp=null;            
          HttpClient httpclient = new DefaultHttpClient();
    // Prepare a request object
    HttpGet httpget = new HttpGet(urlString); 
    // Execute the request
    HttpResponse response;
    JSONObject json = new JSONObject();
    try {
        response = httpclient.execute(httpget);

        HttpEntity entity = response.getEntity();

        if (entity != null) {

            // A Simple JSON Response Read
            InputStream instream = entity.getContent();
            String result= convertStreamToString(instream);

            json=new JSONObject(result);

            instream.close();
        }
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return json;
        }  
} 
```

# paypal - 如何解决一次交易接收多条IPN消息（内容相同）

> ID：10308611
> 
> 赞同：4
> 
> 时间：2012-04-25T02:33:11.070
> 
> 标签：paypal, paypal-ipn

我正在使用 Codeigniter 测试我的购物车结账`paypal_lib`。我从沙盒消息中获得的结果：“VERIFIED”以及函数“validate_ipn”返回 true。但我在这里面临的麻烦是我的日志文件和订单数据不时包含来自贝宝的相同数据。

下面是我的ipn验证：

```
function validate_ipn(){

    $url_parsed = parse_url($this->paypal_url);       
    $post_string="cmd=_notify-validate";     
    if ($this->CI->input->post())
    {
        foreach ($this->CI->input->post() as $field=>$value)
        { 
            $this->ipn_data[$field] = $value;
            $post_string .= '&' . $field.'='.urlencode(stripslashes($value));
        }
    }

    //$fp = fsockopen($url_parsed['host'],"80",$err_num,$err_str,30); 
            $fp = fsockopen('ssl://www.sandbox.paypal.com', 443, $err_num, $err_str, 30);
    if(!$fp)
    {
        $this->last_error = "fsockopen error no. $errnum: $errstr";
        $this->log_ipn_results(false);       
        return false;
    } 
    else
    { 
        fputs($fp, "POST $url_parsed[path] HTTP/1.1\r\n"); 
        fputs($fp, "Host: $url_parsed[host]\r\n"); 
        fputs($fp, "Content-type: application/x-www-form-urlencoded\r\n"); 
        fputs($fp, "Content-length: ".strlen($post_string)."\r\n"); 
        fputs($fp, "Connection: close\r\n\r\n"); 
        fputs($fp, $post_string . "\r\n\r\n"); 

        // loop through the response from the server and append to variable
        while(!feof($fp))
            $this->ipn_response .= fgets($fp, 1024); 

        fclose($fp); // close connection
    }

    if (eregi("VERIFIED",$this->ipn_response))
    {
        // Valid IPN transaction.
        $this->log_ipn_results(true);
        return true;         
    } 
    else 
    {
        $this->last_error = 'IPN Validation Failed.';
        $this->log_ipn_results(false);  
        return false;
    }
} 
```

这是我在日志中得到的（没有什么不同）。有很多这样的消息：

```
[04/24/2012 9:31 AM] - SUCCESS!
IPN POST Vars from Paypal:
mc_gross=11.00, protection_eligibility=Eligible, address_status=confirmed
, item_number1=3, tax=0.00, item_number2=5, payer_id=T4WYEY49NUK4Y, item_number3=6, address_street=1 Maire-Victorin, payment_date=00:28:18 Apr 24, 
2012 PDT, payment_status=Pending, charset=windows-1252, address_zip=M5A 1E1, mc_shipping=0.00, mc_handling=0.00, first_name=Test, address_country_code=CA, 
address_name=Test User, notify_version=3.4, custom=292aaf2e76b586a80c20f13c5b1d6997, payer_status=verified, business=tham21_1297141093_biz@yahoo.com, 
address_country=Canada, num_cart_items=3, mc_handling1=0.00, mc_handling2=0.00, mc_handling3=0.00, address_city=Toronto, verify_sign=AQwZI3e5UUeRN1fFRRAZwba0SCKvAK5Jh7SdLhAZdWaitG4t3SzIzk6D,
payer_email=tham21_1297133813_per@yahoo.com, mc_shipping1=0.00, mc_shipping2=0.00, mc_shipping3=0.00, tax1=0.00, tax2=0.00, tax3=0.00, txn_id=19366377KU1661939, 
payment_type=instant, last_name=User, address_state=Ontario, item_name1=Test 003 Product, receiver_email=tham21_1297141093_biz@yahoo.com, item_name2=Test 005 Product, 
item_name3=Test 006 Product, quantity1=1, quantity2=1, receiver_id=C7F8469MV6QVN, pending_reason=multi_currency, quantity3=1, txn_type=cart, mc_gross_1=2.00, mc_currency=EUR, 
mc_gross_2=4.00, mc_gross_3=5.00, residence_country=CA, test_ipn=1, transaction_subject=292aaf2e76b586a80c20f13c5b1d6997, payment_gross=, ipn_track_id=95d4aa9eb8b34, 

IPN Response from Paypal Server:
 HTTP/1.1 200 OK

8
VERIFIED
0

[04/24/2012 9:33 AM] - SUCCESS!
IPN POST Vars from Paypal:
mc_gross=11.00, protection_eligibility=Eligible, address_status=confirmed
, item_number1=3, tax=0.00, item_number2=5, payer_id=T4WYEY49NUK4Y, item_number3=6, address_street=1 Maire-Victorin, payment_date=00:28:18 Apr 24, 
2012 PDT, payment_status=Pending, charset=windows-1252, address_zip=M5A 1E1, mc_shipping=0.00, mc_handling=0.00, first_name=Test, address_country_code=CA, 
address_name=Test User, notify_version=3.4, custom=292aaf2e76b586a80c20f13c5b1d6997, payer_status=verified, business=tham21_1297141093_biz@yahoo.com, 
address_country=Canada, num_cart_items=3, mc_handling1=0.00, mc_handling2=0.00, mc_handling3=0.00, address_city=Toronto, verify_sign=AQwZI3e5UUeRN1fFRRAZwba0SCKvAK5Jh7SdLhAZdWaitG4t3SzIzk6D, 
payer_email=tham21_1297133813_per@yahoo.com, mc_shipping1=0.00, mc_shipping2=0.00, mc_shipping3=0.00, tax1=0.00, tax2=0.00, tax3=0.00, txn_id=19366377KU1661939, 
payment_type=instant, last_name=User, address_state=Ontario, item_name1=Test 003 Product, receiver_email=tham21_1297141093_biz@yahoo.com, item_name2=Test 005 Product, 
item_name3=Test 006 Product, quantity1=1, quantity2=1, receiver_id=C7F8469MV6QVN, pending_reason=multi_currency, quantity3=1, txn_type=cart, mc_gross_1=2.00, mc_currency=EUR, 
mc_gross_2=4.00, mc_gross_3=5.00, residence_country=CA, test_ipn=1, transaction_subject=292aaf2e76b586a80c20f13c5b1d6997, payment_gross=, ipn_track_id=95d4aa9eb8b34, 

IPN Response from Paypal Server:
 HTTP/1.1 200 OK
Date: Tue, 24 Apr 2012 07:33:44 GMT

8
VERIFIED
0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T15:45:11.673

甚至会发生这种情况很烦人，但是在 PayPal 最终解决问题之前，您需要开发一种保护措施，这样您就不会两次处理相同的付款。

最常见的解决方案是将数据库中的事务标记为已处理，更改状态字段或添加日期。然后检查每个 IPN 消息上的这个值，如果它已经设置，则忽略 IPN（但记录它）。

# scala - 是否复制或扩展 megaprotouser 或 metaprotouser 以将 liftweb 与现有数据库集成

> ID：10308616
> 
> 赞同：1
> 
> 时间：2012-04-25T02:34:43.023
> 
> 标签：scala, lift

我正在做一个概念证明，以展示 Lift 相对于 MS MVC 的好处，因此我正在努力让 liftweb 与现有数据库集成。

我想重用我能做的，但用户对象需要修改，因为有行为变化，我需要添加和删除一些属性。

扩展 Mega 或 meta proto 用户或者只是复制类并以新名称修改它，然后在我的项目中使用它会更有意义吗？

如果我修改它，我可以添加一些新特征来改变行为，但我需要更改用于登录的内容，因为不使用电子邮件。

在java中我可以使用方面（AOP）来做到这一点，我认为scala中可能有类似的方式，但我不确定。

我正在与 MSSQL 集成，因此我希望最好使用映射器而不是记录来进行此集成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:45:20.417

Scala 在 JVM 上运行，因此 AOP 技术仍然有效。但大多数人发现，Scala 的语言特性通常提供了一种比 AOP 更清洁、更简单的方式来实现他们的目标。

您可以通过简单地扩展`MegaProtoUser`/`MetaMegaProtoUser`覆盖您希望更改的方法来完成您想要的。例如，您可以覆盖`def findUserByUserName(username: String)`以通过用户名字段而不是电子邮件地址进行搜索。原型类是为这种定制而设计的。

如果您发现自己想要更改太多以至于想要复制/粘贴整个内容，那么我建议您只编写自己的用户类，或者使用更适合您需求的东西。proto 类没有什么神奇之处。他们只是在那里给你一个起点。另外，他们所做的某些事情在生产代码中会是错误的形式（即将 HTML 放入模型代码中）。

[Tim Perret在](http://timperrett.com/)[Lift in Action](http://www.manning.com/perrett/)中说得最好：

> Proto-series 特征是一个起点，而不是一个结束解决方案。在许多方面，它们类似于 Rails 的脚手架：它们在短期内提高了生产力，但从长远来看，你会超越它们并逐渐将它们从应用程序中剔除，要么用你自己的代码替换，要么用你自己的代码替换来自某些插件或库的代码。

说到 Tim 和插件，他写了[lift-shiro](https://github.com/timperrett/lift-shiro)，它将 Lift 与[Apache Shiro](http://shiro.apache.org/)集成在一起。这也可能值得一试。

# webview - webview上的其他控件可以覆盖吗

> ID：10308618
> 
> 赞同：1
> 
> 时间：2012-04-25T02:34:49.277
> 
> 标签：webview, microsoft-metro, windows-runtime

WebView 具有不能在 WebView 之上渲染其他 UI 区域（例如控件）的特点。

这是否意味着我无法将其他控件（如 popup ）放在它上面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:00:10.757

你说的对。目前，（25.04.2012）没有办法覆盖 Windows 8 的公共 SDK 中提供的 WebView。问题基本上是 WebView 在技术上是 Internet Explorer 的一个实例，在其他 Metro Style 应用程序中运行在它自己的 HWND 中。实际上，WebView 根本不是一个合适的 XAML 控件。

如果您需要在应用中显示静态（非交互式）HTML，您可以使用 WebViewBrush。

我目前正在寻找自己的解决方案：[HTML/CSS Renderer for Metro-Style Apps](https://stackoverflow.com/questions/10297772/html-css-renderer-for-metro-style-apps)

基本上，我们现在有以下选择： - MSFT “修复” WebView 控件 - 其他浏览器供应商（Mozilla、Google、Opera 等）提供可重用的 XAML 控件 - 我们开发自己的 WebKit 端口

也许有一天，这个问题会得到解决......

在这里查看我的帖子： http: [//social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/23a235a2-b0a3-4161-bc74-c42289c61264](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/23a235a2-b0a3-4161-bc74-c42289c61264) 其他资源： http: [//nerddawg.blogspot.de/](http://nerddawg.blogspot.de/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:29:33.453

可能是一个新类，为此目的有一个名为 WebViewBrush 的类。链接在这里。 [WebViewBrush](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webviewbrush)

# jquery - JQuery 将克隆输入更改为空

> ID：10308621
> 
> 赞同：2
> 
> 时间：2012-04-25T02:35:05.490
> 
> 标签：jquery, clone

我正在尝试克隆一个包含输入和文本区域的类，并将它们的值变为空。

```
var current = $(".item").last();

  current.clone().insertAfter( current );
  current.find('input,textarea').val(''); 
```

问题不是清除克隆的对象输入和文本区域，而是清除之前的最后一个类输入和文本区域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T02:39:11.080

您的代码正在修改`current`对象，而不是克隆的对象。尝试这样的事情：

```
var current = $(".item").last();

var cloned = current.clone();
cloned.find('input,textarea').val('');
cloned.insertAfter( current ); 
```

# gwt - SmartGWT - 如何以编程方式触发 resizebar 的折叠/展开操作

> ID：10308627
> 
> 赞同：1
> 
> 时间：2012-04-25T02:36:00.203
> 
> 标签：gwt, smartgwt

我正在使用 smartgwt 3.0。

我想以编程方式访问调整大小栏以折叠或展开其目标面板。我似乎找不到任何类似的 API

> canvas.getResizeBar();

我该怎么做？

有没有办法执行类似代码：

> canvas.setCollapsed(boolean);

?

其中 true 表示折叠目标画布，false 表示展开目标画布。

我认为另一种方法是明确使用目标画布的 setWidth 来展开/折叠目标。我试图避免这样做，因为我必须复制目标画布的所有状态和记忆宽度。当目标画布的状态已经保存在某个地方时，我不应该重新发明轮子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:05:38.270

只需 hide() resizeBar 将折叠的组件，resizeBar 将反映组件的新状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:08:08.303

假设您有一个像这样的左右面板（在另一个根面板内）：

```
VLayout leftMainGUI = new VLayout();
leftMainGUI.setWidth(200);
leftMainGUI.setShowResizeBar(true);

VLayout rightMainGUI = new VLayout();
rightMainGUI.setWidth(200); 
```

如果更改 rightMainGui 的宽度，栏应该会移动。您确定将 hide() 和 show() 与 rightMainGui 一起使用不起作用吗？

# jquery-mobile - 为什么jquery mobile的数据图标没有显示？

> ID：10308638
> 
> 赞同：5
> 
> 时间：2012-04-25T02:38:21.963
> 
> 标签：jquery-mobile

我在我的代码中使用了带有按钮的数据图标，但问题是，图标没有显示。它只显示一个圆圈..

这是我的 html 代码

```
<a href="index.html" data-role="button" data-icon="delete">Remove</a> 
<a href="index.html" data-role="button" data-icon="plus">Add</a> 
<a href="index.html" data-role="button" data-icon="arrow-u">Up</a> 
<a href="index.html" data-role="button" data-icon="arrow-d">Down</a> 
```

我不是为什么会出现这个问题，对于所有使用图标或自动具有类似图标的按钮

```
data-add-back-btn="true" 
```

后退图标也不显示，只有带有文字的按钮

谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:38:26.260

您应该在项目中添加“图像”文件夹（随 jquery 移动文件夹一起提供）。您应该将此“图像”文件夹添加到保存 jquery.mobile.js 和 jquery.mobile.css 文件的同一文件夹中。

我也遇到了同样的问题，经过多次试验和错误，我找到了这个解决方案。现在图标正在显示...... :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T03:28:34.730

`data-role="button"`除非您添加属性，否则链接不会变成按钮。

表单`<input type="button" />`和`<input type="submit" />`自动变成“按钮小部件”，`<button></button>`标签也是如此。

文档：http: [//jquerymobile.com/demos/1.1.0/docs/buttons/buttons-types.html](http://jquerymobile.com/demos/1.1.0/docs/buttons/buttons-types.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T21:32:15.937

我刚刚在我的 iPad 上遇到了这个问题。我发现是滚轴页面的主题搞砸了。

如果我删除对主题的引用，一切都会出现。主题不会在 iPad 模拟器上搞砸。它只是弄乱了iPad。

编辑 - 更具体地说，它是最新的主题滚轮搞砸了。我在旧版本中创建了另一个主题，图标显示备份。我曾尝试将我的 jquery 移动脚本更新为最新的脚本，但这并没有以某种方式产生影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-22T14:50:39.453

只是为使用带有**Phonegap**的 jQuery mobile 的任何人添加，应将 jQuery mobile中的**images**文件夹复制到**css**文件夹中。css 文件夹当然在**www**文件夹内。

希望它可以帮助某人。

# numpy - 确定哪个编译器构建了我的 LAPACK

> ID：10308639
> 
> 赞同：3
> 
> 时间：2012-04-25T02:38:47.247
> 
> 标签：numpy, fortran, lapack, gfortran, g77

我想安装最新版本的`numpy`（Python 的数值库），并且版本（v1.6.1）还没有在[Ubuntu Oneiric 存储库](https://launchpad.net/ubuntu/oneiric/+source/python-numpy)中。当我继续手动安装它时，我读入了需要使用与构建相同的编译器构建的[INSTALL](https://github.com/numpy/numpy/blob/master/INSTALL.txt)文件（由 使用的 fortran 库）。不幸的是，我不知道那是哪个编译器。我没有安装自己 -当我使用. 如果我不得不猜测，我会说，但我宁愿不要把这件事搞砸。`numpy``LAPACK``numpy``LAPACK``apt-get``numpy``apt``gfortran`

如何确定哪个编译器构建了我当前的安装`LAPACK`？有什么简单的方法 - 也许运行一些使用它的 fortran 代码并检查输出？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T04:29:41.733

从您引用的同一`INSTALL`文件中...

```
How to check the ABI of blas/lapack/atlas
-----------------------------------------

One relatively simple and reliable way to check for the compiler used to build
a library is to use ldd on the library. If libg2c.so is a dependency, this
means that g77 has been used. If libgfortran.so is a a dependency, gfortran has
been used. If both are dependencies, this means both have been used, which is
almost always a very bad idea. 
```

如果我不得不猜测，我可能会猜测 gfortran 也是我所知道的仅有的两个免费 fortran 编译器是 g77 和 gfortran，据我所知，g77 开发几乎已经死了......另一件要检查的事情是 g77（由默认）在符号上附加两个下划线，而 gfortran（默认）只附加一个。这可能是 numpy 知道的最重要的事情......尽管可能存在其他细微的差异（例如，如果 numpy 正在做一些肮脏的黑客攻击以获取存储在公共块中的信息）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T03:31:46.643

我知道没有简单的方法，尽管您可能会发现有`readelf -a /usr/lib/$SHARED_OBJECT`启发性，`$SHARED_OBJECT`类似的东西在哪里`/usr/lib/atlas-base/liblapack_atlas.so.3gf.0`（您必须`/usr/lib`查看您的确切文件名是什么）。

但是，还有另一种完全不同的方式来获取信息，因为您使用的是 Ubuntu，这是 Debian 的一种风格。

1.  找出你的 Lapack 共享对象属于哪个二进制包 $BINARY_PKG`dpkg -l | grep -E '(lapack|atlas)`和/或`dpkg -S $SHARED_OBJECT`。
2.  找出二进制包 $BINARY_PKG 是从哪个源包 $SOURCE_PKG 构建的`dpkg -s $BINARY_PACKAGE`。在输出中，查找该`Source:`行。
3.  更改为一些临时工作目录。
4.  问题`apt-get source $SOURCE_PKG`。（或者，`apt-get source $BINARY_PKG`具有相同的效果。）
5.  发出`ls`并注意 Lapack 源目录。
6.  切换到 Lapack 源目录。
7.  检查文件`debian/control`，特别注意相关`Build-Depends:`行。这将说明构建包所需的内容。
8.  Issue `dpkg -s build-essential`，它将为您提供有关可用于构建发行版中每个包的编译器的附加信息（您可能必须首先安装该`build-essential`包）。

所有这一切当然是大量的工作，而且都不是一个简单公式的性质，只是给你你所寻求的答案；但它确实给了你寻找答案的地方。祝你好运。

# python - 为ubuntu linux编译python，cx_python

> ID：10308648
> 
> 赞同：0
> 
> 时间：2012-04-25T02:39:44.610
> 
> 标签：python, linux, compilation, bytecode

我需要能够分发我的 python 脚本，最好是在 linux 字节码中。它有几个依赖项位于目录中，如下所示：

```
extensions
    python  >> run.py
    python  >> protocols.py
    plugins >> Folder contains more run.py dependencies
    bash    >> Contains bash scripts needed 
```

我试过简单地 cd-ing 到 extensions/python 并运行 cxfreeze run.py。但是，这会在 dist 文件夹中创建几个文件，其中没有一个（包括“运行”是可执行的。在此目录中没有创建“制作”指令。

我该怎么做？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:30:17.180

我会使用执行 zip 文件的 Python 2.6+ 功能。查看[详细的博客文章](http://sayspy.blogspot.de/2010/03/various-ways-of-distributing-python.html)；简而言之：

1.  为所有模块创建 .pyc 文件，例如通过一次导入它们
2.  写一个`__main__.py`
3.  压缩`__main__.py`, 和所有 .pyc 文件，例如 foo.zip
4.  测试，使用`python foo.zip`
5.  `#!/usr/bin/python`在 zip 文件中添加一行（例如，使用 echo 和 cat）
6.  在结果文件上设置 x 位

# android - NFC标签检测

> ID：10308651
> 
> 赞同：1
> 
> 时间：2012-04-25T02:40:19.163
> 
> 标签：android, service, nfc

我创建了 android 应用程序来读取 NFC 标签 ID 我已经完成了，但我想要的最后一件事是我想在我的应用程序关闭时检测到标签时运行我的应用程序。例如当我关闭我的应用程序并让我的手机触摸 NFC之后，手机将检测到它并运行我的应用程序以读取 TAG id。我怎么能做到这一点？我尝试使用服务，但它不起作用。

谢谢你的 Anwser，对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:31:07.930

使用 NFC 的意图过滤器概念。

您的目标是哪种 NFC 标签？

下面是一个示例代码，当发现以文本格式存储数据的 NFC 标签时，它会启动您的活动。

```
<intent-filter>
  <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
  <data android:mimeType="text/plain"/>
  <category android:name="android.intent.category.DEFAULT"/>
</intent-filter> 
```

# php - 加入 2 个 DELETE 查询（方式和性能）

> ID：10308653
> 
> 赞同：1
> 
> 时间：2012-04-25T02:40:32.767
> 
> 标签：php, mysql, performance, sql-delete

我有 2 个具有不同数量和类型的列的 MySQL 表。但是有一个 DATETIME 类型的列在两者中被称为相同：**expires**。

我现在使用 2 个查询：

```
"DELETE FROM `table1` WHERE `expires` < UTC_TIMESTAMP()"
"DELETE FROM `table2` WHERE `expires` < UTC_TIMESTAMP()" 
```

**Q1：**我从来没有`DELETE`对没有连接的多个表使用过查询，所以我想不出创建单个查询的正确方法。不使用有可能`COMMIT`吗？

**Q2：**我在数据库中还没有很多记录，所以我无法测试使用 PHP 的 2 个查询或使用单个查询删除*过期*记录之间的性能差异。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:49:24.953

您可以使用一个查询从两个表中删除：

```
DELETE FROM table1 JOIN table2 ON (join_condition) WHERE table1.expires < UTC_TIMESTAMP() AND table2.expires < UTC_TIMESTAMP 
```

仅当 JOIN 在您的数据模型上正确时才有意义。

据我所知，多表语法没有理由更快。事实上，因为需要JOIN，所以应该慢一点（不要太多，因为从磁盘读取后，数据已经在内存中，所以只丢失了一点处理）。

多表语法不符合标准 SQL。这是一个特定于 mysql 的扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T02:58:16.513

例如，如果您担心时间问题，第一个查询将需要 1 分钟才能执行，但这对您的系统来说是个问题（第二个表值将在 1 分钟 + 第二个查询执行时间后过期），您可以一起使用它们进行如下交易：

```
begin transaction
set @ts = utc_timestamp();
delete from table_1 where expires< @ts;
delete from table_2 where expires< @ts;
commit 
```

并且它们将同时更新。

# php - 在 Symfony 2 / Doctrine 2 实体中存储空间点？

> ID：10308657
> 
> 赞同：6
> 
> 时间：2012-04-25T02:41:32.733
> 
> 标签：php, symfony, doctrine, doctrine-orm

Symfony 2 没有 MySQL 支持的空间点数据类型。我在 Doctrine 2 文档中找不到关于这种特定数据类型的任何内容，那么，有谁知道如何使用 Symfony 2 中的点？另外，如何根据半径进行查询？谢谢！:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T06:34:17.120

最简单的方法是为空间数据类型实现自定义类型，然后声明自定义 DQL 函数以简化查询。

我在这里写过这个：http: [//codeutopia.net/blog/2011/02/19/using-spatial-data-in-doctrine-2/](http://codeutopia.net/blog/2011/02/19/using-spatial-data-in-doctrine-2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-24T19:41:57.037

另一种选择是使用 djlambert/doctrine2-spatial 包，可在此处找到：[https ://github.com/creof/doctrine2-spatial](https://github.com/creof/doctrine2-spatial)

无需实现任何自定义的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T12:10:22.963

如果你说法语，你可以从这里的另一篇文章中获得一些灵感：http: [//blog.fastre.info/2012/02/doctrine2-2-2-et-types-geographiques/](http://blog.fastre.info/2012/02/doctrine2-2-2-et-types-geographiques/)

这些类是为 Postgresql + Postgis 数据库构建的。

# php - PHP，移至列表中的下一项

> ID：10308661
> 
> 赞同：0
> 
> 时间：2012-04-25T02:42:38.790
> 
> 标签：php

所以我正在制作一个脚本，用户可以在其中检查网站是否启动，我有网站检查部分，但现在我需要弄清楚它实际读取列表的部分。

用户必须一次进入一个网站很烦人，所以我想花点时间让用户可以做这样的事情，他们可以输入一长串网站，每个网站都会被单独阅读，并标记为在线或离线。

例子：

> google.com
> 
> 脸书网
> 
> 雅虎网

我唯一需要帮助的是，我怎样才能让它遍历每一行？它检查一行，然后移动到下一行。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:47:06.927

你有没有试过这个：

```
<?PHP

$string = $_POST['url_list'];

foreach(explode("\n", $string) as $line) {

    // do something

}

?> 
```

如果使用 \n 不起作用，您也可以尝试使用 \r\n 代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T02:48:30.040

```
<?php
    $sites = $_POST['listofsites'];

    // Assuming list of sites in in a textarea and separated by a new line
    $sites = explode("\n", $sites);

    foreach ($sites as $site) 
    {
        // do your thing   
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T03:41:30.057

简单的解决方案是将输入以逗号分隔，然后将字符串分解为逗号分隔符。

```
$string = "yahoo.com,google.com";
 $explode = explode(',',$string);
 foreach ($explode as $e){
 //do whatever you want to do
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T02:57:23.223

HTML

```
<textarea name="site_list">

</textarea> 
```

PHP

```
<?php
    $sites = array_filter(explode("\n", str_replace("\r","\n", $_POST['site_list'])),'trim');
    foreach($sites as $site){

         // site checking code here
    }
?> 
```

这会从 textarea 获取站点列表并清理列表，删除 URL 之前或之后的任何空行或空字符。

# html - 如何“展平” iframe 以避免带有两个垂直滚动条的窗口

> ID：10308662
> 
> 赞同：0
> 
> 时间：2012-04-25T02:42:43.983
> 
> 标签：html, css, iframe

在我的网络应用程序的页面上，我包含了一个 iframe。iframe 通常具有相当高的高度 - 比如说大约 1500 像素。最终发生的事情自然是，窗口现在有两个垂直滚动条，滚轮根据光标的位置滚动一个或另一个。起初，这可能会带来一点尴尬的体验。

我只想做的是“扁平化” iframe。我希望它可以拉伸到内容的全部高度，这样就不需要滚轮了，整个页面只有一个垂直滚轮。这样的解决方案可以仅使用 HTML+CSS 完成，还是需要一些 javascript [w/jquery]？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:26:07.467

我不相信单独使用 CSS 是可能的，但使用 jQuery 相当简单

```
var iframe = $("#my_iframe");
var iframeContents = iframe.contents()
iframe.css({
    height: iframeContents.outerHeight(),
    width: iframeContents.outerWidth()
}); 
```

工作jsfiddle：http: [//jsfiddle.net/MUQ8V/3/](http://jsfiddle.net/MUQ8V/3/)

# java - 在哈希图中获取等效元素

> ID：10308667
> 
> 赞同：0
> 
> 时间：2012-04-25T02:43:27.690
> 
> 标签：java, hashmap, equals

该应用程序将说明用户是否猜到了他介绍的两种颜色组合。

我正在使用 HashMap 来保存“TwoColors”对象和布尔值。TwoColors 类是下一个：

```
public class TwoColors{
    public MyColor color1;
    public MyColor color2;
    public TwoColors(MyColor color1, MyColor color2){
        this.color1 = color1;
        this.color2 = color2;
    }
    @Override
    public boolean equals(Object obj) {
        TwoColors o = (TwoColors) obj;
        return color1 == o.color1 && color2 == o.color2;
    }
} 
```

MyColor 是一个枚举

```
public enum MyColor{
     RED,BLUE,YELLOW,BROWN;
} 
```

我测试放置一个 TwoColor 对象键并打印它的值

```
public static void main(String[] args){
    HashMap<TwoColors, Boolean> hash = new HashMap<TwoColors, Boolean>();
    hash.put(new TwoColors(MyColor.RED,MyColor.BLUE),new Boolean(true));
    System.out.println(hash.get(new TwoColors(MyColor.RED,MyColor.BLUE)));
} 
```

上面的代码输出`null`虽然我已经覆盖了 TwoColors 的 equals 方法。知道我在这里想念什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:53:45.757

当您覆盖等于时，您应该始终覆盖哈希码，如果您在尝试通过调用 get 查找值时不这样做，您的哈希图将找不到它。

阅读[这篇](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)文章以获得理解。

您可以使用 Eclipse 获得的默认哈希码：

```
@Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((color1 == null) ? 0 : color1.hashCode());
        result = prime * result + ((color2 == null) ? 0 : color2.hashCode());
        return result;
    } 
```

此外，您的 equals 实现不是**Production Code**，这意味着它没有正确实现。您的实现是开放的，[`ClassCastException`](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassCastException.html)因为您`MyColor`盲目地将其转换为，因此您的实现也容易出现[`NullPointerException`](http://docs.oracle.com/javase/6/docs/api/java/lang/NullPointerException.html).

它应该类似于这样：

```
@Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        TwoColors other = (TwoColors) obj;
        if (color1 != other.color1)
            return false;
        if (color2 != other.color2)
            return false;
        return true;
    } 
```

在检查字段值之前检查两个引用是否相同，检查空值，检查类相等性，最后检查字段值。

虽然 Apache 也[`HashCodeBuilder`](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/builder/HashCodeBuilder.html)有[`EqualsBuilder`](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/builder/EqualsBuilder.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T03:00:53.177

从 Java 文档：

> `hashCode`请注意，当此方法 [ ] 被重写时，通常需要重写该方法`equals`，以维护 hashCode 方法的一般约定，即相等的对象必须具有相等的哈希码。

由于`MyColor`是一个枚举，因此将此代码添加到您的类中应该可以修复它：

```
@Override
public int hashCode() {
    return color1.ordinal() + 31*color2.ordinal();
} 
```

# jquery - jquery动画后事件不再起作用

> ID：10308673
> 
> 赞同：0
> 
> 时间：2012-04-25T02:44:02.063
> 
> 标签：jquery, click, hover, jquery-animate

因此，在我使用 javascript 为一些 img 或 div 设置动画后，它们不再具有可用的单击或悬停事件。（有问题的imgs是在“n”后面排列后的4个大气泡）

我确定这是一个常见的问题，我只是找不到答案。提前致谢！

实时代码：http: [//jboullion.com/nebuloid/index.html](http://jboullion.com/nebuloid/index.html)

这是我的 html div 的 3 种不同变体

```
<div >
  <a href="javascript:link()"> <img id="bubbleOne"  alt="Staff" src="images/smallbubble.png" /></a><br />
  </div>
  <div>
  <img id="bubbleTwo" onclick="link()" alt="Mission" src="images/smallbubble.png" /><br />
  </div>
  <div>
  <img id="bubbleThree" href="javascript:link()" alt="Games" src="images/smallbubble.png" /><br />
  </div> 
```

**这是我的 javascript** - 简要版本

```
$("#bubbleOne").click(function(event)
  {
  fadeLogo()
    if (iOS == true) {
      window.scroll(0,350);
    }
    $("#copy").html("<span id='purp'>WE ARE NEBULOID</span> <br/><br/>We want to make great video games.<br/> We want to stretch the boundaries that define what video gaming looks and feels like.<br/> We are new developers cutting our teeth, and we have very grand and exciting projects coming soon.<br/> Our biggest upcoming project is a subtle, human, and epic science fiction adventure.");  
    $("#mission").css("color","#8470FF");
    colorHoldM = "#8470FF";
    colorHoldG = "white";
    colorHoldS = "white";
    colorHoldC = "white";
    $("#games").css("color","white");
    $("#staff").css("color","white");
    $("#contact").css("color","white");
  });

$("#bubbleOne").hover(function(){
  $("#bubbleOne").animate({
    width: "175px"}, 500 );
    });

    $("#bubbleOne").mouseout(function(){
  $("#bubbleOne").animate({
    width: "110px"}, 500 );
    });

    function fadeLogo()
    {
      //stuff
        $('#bubbleOne').delay(1000).animate({left: '+=120', top: '-=130' }, 1000);
        $('#bubbleTwo').delay(1000).animate({left: '-=50', top: '-=130' }, 1500);
        $('#bubbleThree').delay(1000).animate({left: '-=230', top: '-=165' }, 2000);
    //stuff
    } 
```

有人知道答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T03:11:38.513

问题是您不是通过显示隐藏页面上的某些元素：无，而是通过不透明度。所以，这些看不见的元素就在你的泡泡面前。

例如，如果我`$('#eb')`在 firebug 中找到该元素并将其显示设置为无，我现在可以将鼠标悬停在前 2 个气泡上。

此外，您拼写错误的“版权”一词：P 也许您应该将其替换为`&copy;`

像这样的东西应该解决它：

```
var $shit = $('#eb,#u,#l,#oi,#d');
$shit.animate({opacity:0}, {duration: 1000, specialEasing:{duration: 1000, opacity:'easeInBounce'}, 'complete':function(){
   $shit.hide(); //function called when animation is complete. hide this shit
}}); 
```

您还应该研究代码重用...

# asp.net-mvc-3 - SSL会在我的asp.net mvc3 Web应用程序中加密查询字符串和post请求的正文吗

> ID：10308676
> 
> 赞同：5
> 
> 时间：2012-04-25T02:44:14.077
> 
> 标签：asp.net-mvc-3, security, encryption, ssl

我有一个问题，如果使用 SSL 将加密查询字符串和包含字段值的 Post 请求正文？

如果答案是肯定的，

那么这是否意味着我可以有 99% 的信心，而不是攻击者将无法同时修改查询字符串和帖子正文请求？

BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T06:53:39.037

> 那么这是否意味着我可以有 99% 的信心，而不是攻击者将无法同时修改查询字符串和帖子正文请求？

SSL 仅对第三方信息进行加密和隐藏。然而，黑客自己要求他可以对他们做任何他想做的事，即使他们是加密发送的。正如我所说，SSL 只保护第三方，而不是其他任何东西。

所有 Web 开发中的一条黄金法则是，永远不要信任**输入**数据，无论是否加密。

> 即使攻击者使用我的网站的用户名和密码进行了身份验证。

黑客可以将他认为合适的任何内容发送到服务器，他的请求将被加密并受到第三方保护，但他可以发送他想要的任何内容和您的代码，如果您不遵循从不信任输入数据的路线，他可能会侵入您的服务器是的。

所以 SSL ONLY 再次保护第三方（有时甚至不是）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T02:51:12.473

如果您使用 SSL，那么可以，您可以确定攻击者将无法修改查询字符串或发布数据。SSL 向客户端验证服务器，以防止任何人成功冒充您的服务器。它还使用服务器的私有 X.509 密钥对来回发送的每条消息进行加密，这样任何中间人都无法破译它们。

# javascript - 页面加载时提供javascript xml文件

> ID：10308677
> 
> 赞同：1
> 
> 时间：2012-04-25T02:44:21.557
> 
> 标签：javascript, html, xml, ajax

我希望在加载 html 页面时从 xml 文件中加载很多值。xml 文件是静态的，永远不会更改。它将托管在与 html 页面相同的目录中。xml 文件将用于填充 html 中的一些选择框。我想我可以使用 javascript 填充选择框。但是，我想知道如何将 xml 文件的内容传递给 javascript。ajax 是唯一的解决方案吗？或者有没有办法在页面加载时向 javascript 提供 xml 文件。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:55:15.637

如果它是静态的并且真的永远不会改变，请考虑将其转换为 JSON 并将其直接嵌入到您的 JavaScript 中。效率更高，因为 HTTP 请求更少。如果数据大小是一个问题，那么 AJAX 可能是您唯一的解决方案

# java - String[] args 值转换为单个字符串

> ID：10308678
> 
> 赞同：1
> 
> 时间：2012-04-25T02:44:53.903
> 
> 标签：java, string

> **可能重复：**
> [一种反转 java String.split() 效果的方法？](https://stackoverflow.com/questions/794248/a-method-to-reverse-effect-of-java-string-split)

如何获取 String[] args 中的所有值并将其转换为单个 String 变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T02:46:58.900

1.  遍历数组
2.  将字符串连接在一起

注意：使用 StringBuilder 对象效率更高，但这是一个更简单的示例：

```
public String concat(String[] args) {
  String result = ""
  for (String arg : args) {
    result += arg;
  }
  return result;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T02:47:55.917

我更喜欢 Apache Commons [`StringUtils`](http://commons.apache.org/lang/api/org/apache/commons/lang3/StringUtils.html)。 `StringUtils.join(Object[] array, String separator)`将使用给定的分隔符连接数组中的所有对象。

如果您想要当前数组的子数组（例如跳过前三个元素），请使用：

```
StringUtils.join(ArrayUtils.subarray(myArray, 3, myArray.length), ","); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T02:49:13.943

您可以覆盖`toString()`方法，并且在此方法中，您可以通过对字符串数组进行循环来实现，并以您想要的格式返回连接的字符串。

# php - 按等级对数组进行排序

> ID：10308679
> 
> 赞同：0
> 
> 时间：2012-04-25T02:44:56.690
> 
> 标签：php, arrays

```
 $students = array (
     256 => array ('name' => 'Jon', 'grade' => 98.5),
     2 => array ('name' => 'Vance', 'grade' => 85.1),
     9 => array ('name' => 'Stephen', 'grade' => 94.0),
     364 => array ('name' => 'Steve', 'grade' => 85.1),
     68 => array ('name' => 'Rob', 'grade' => 74.6)
     );

 function grade_sort($x,$y){
  return ($x['grade'] < $y['grade']);
  }
uasort ($students, 'grade_sort'); 
```

我是php的新手，我不能很好地理解上面的代码。如果不是，我可以将其更改 `return ($x['grade'] < $y['grade']);`为 `return $x < $y;` ，为什么？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:50:47.623

> `return ($x['grade'] < $y['grade']);`我可以把它改成`return $x < $y;`?

不`$x`，并且`$y`将是里面的数组之一`$students`。
例如，`$x`可能是`array('name' => 'Jon', 'grade' => 98.5)`
并且`$y`可能是`array('name' => 'Vance', 'grade' => 85.1)`。
所以`return $x < $y`没有意义。

该代码虽然不是很好。比较函数`grade_sort`一次接受两个元素，`0`如果两个元素相等，则返回，如果第一个较低，则返回负数，如果第二个较低，则返回正数。你的回报`true`或`false`。正确的代码是：

```
function grade_sort($x, $y){
    return $y['grade'] - $x['grade'];
}
uasort($students, 'grade_sort'); 
```

`uasort`简单地用两个不同的元素调用这个函数，直到它知道哪个元素大于哪个元素并且已经对它们进行了排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T02:48:23.093

`$x`并且`$y`是主数组中的单个`$students`数组。由于您想按他们的成绩排序，因此您需要访问`grade`密钥。删除它会告诉它比较数组，这显然是行不通的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T02:49:21.007

您传递给的比较函数`uasort`将在每次比较时提供数组元素，因此`return $x < $y`无论如何都不会有太大意义和意义，因为您正在比较数组而不是数组中的*实际值*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T03:36:39.153

首先，我想更正您的代码片段。

```
$students = array (
 256 => array ('name' => 'Jon', 'grade' => 98.5),
 2 => array ('name' => 'Vance', 'grade' => 85.1),
 9 => array ('name' => 'Stephen', 'grade' => 94.0),
 364 => array ('name' => 'Steve', 'grade' => 85.1),
 68 => array ('name' => 'Rob', 'grade' => 74.6)
 );  

 function grade_sort($x,$y){
    return ($x['grade'] < $y['grade']);
 }
 uasort ($students,'grade_sort');
 print_r($students); 
```

现在回到你的答案。您不能使用`return $x < $y`，因为 $x 和 $y 是一个数组，并且您想在定义的函数“grade_sort”中比较学生的成绩。您可以查看[http://php.net/manual/en/function.uasort.php](http://php.net/manual/en/function.uasort.php)以获得更好的理解。

# cpu-usage - windows 2003服务器cpu利用率

> ID：10308683
> 
> 赞同：0
> 
> 时间：2012-04-25T01:47:21.860
> 
> 标签：cpu-usage

我有 DELL Power Edge T410 服务器（四核双 Xeon 5500 系列，配备 16 GB 内存），安装了 Windows 2003 服务器。我在 C# 中编写了一个代码来处理大量的数字，经过某些计算，结果存储在一个 6000 x 6000 的矩阵中。最后，它将这个矩阵（3600 万个条目）写入一个文本文件（172 MB）。当我在笔记本电脑上运行这个程序时，CPU 利用率达到 100%，完成这个任务大约需要 40 个小时。当我在我的服务器上运行这个程序时，CPU 利用率只有 10%，完成这个任务几乎需要 40 个小时。现在我的问题是，很明显，服务器应该使用更多的 CPU，至少 70% 并且应该在更短的时间内完成这个任务，我该如何实现这个目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:25:20.457

重写代码以利用服务器的更大功能，例如额外的内核。

# objective-c - 为什么 performSegueWithIdentifier 在 vi ewDidLoad 中不起作用？

> ID：10308685
> 
> 赞同：12
> 
> 时间：2012-04-25T02:45:40.130
> 
> 标签：objective-c, ios, xcode, ios5

我试图在视图控制器上调用 viewDidLoad 后立即触发情节提要。segue 附加了一个标识符，并且在从链接到按钮或其他控件的方法内部调用时可以正常工作。但它在 viewDidLoad 内部不起作用。它只是默默地失败。在 viewDidLoad 中是否有一些关于 segue 被忽略的规则？

我已经尝试了这两个：

```
[self performSegueWithIdentifier: @"mySegue" 
                          sender: self]; 
```

和这个：

```
[self dismissViewControllerAnimated:YES completion:^() {
[self performSegueWithIdentifier:@"mySegue" sender:self];
}]; 
```

都不工作。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-25T03:08:28.203

您不能关闭尚未呈现的视图控制器。`didLoad`具有纯粹的内存管理功能，您可以将其用作（a 的一部分）构造函数。什么可能有效，是在 中开始一个 segue `viewDidAppear`，但是我建议从你想要的视图开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T03:04:43.257

最可能的原因可能是操作系统在一个正在进行时忽略了第二个屏幕转换调用。在您的 ViewDidLoad 中，（当前视图的）视图转换仍未完成。您在完成之前询问另一个转换并且操作系统忽略它。这一定是从不同函数调用时 segue 起作用的原因。尝试在 ViewDidAppear 内部调用（或延迟一段时间后）

# c++ - C++ 运算符重载：对我的自定义类的向量进行 stl 排序

> ID：10308686
> 
> 赞同：3
> 
> 时间：2012-04-25T02:45:42.253
> 
> 标签：c++, sorting, stl, vector, operator-overloading

我有一个非常基本的类，它存储在 STL Vector 中。我正在尝试对该向量进行排序，但遇到了神秘的 STL 错误。有人可以帮忙吗？

```
// Point.h
class Point {
public:
  Point() : x(0), y(0) {}
  Point( float x0, float y0 ) : x(x0), y(y0) {}
  float x;
  float y;
};

// Point.cpp, updated const as per given answers
bool operator< (const Point &p1,const  Point &p2)
{
    return p1.x < p2.x || (p1.x==p2.x && p1.y< p2.y);
} 
```

同样，这个 Point 类存储在一个向量中并正在排序：

```
std::vector<Point> tmp=N->points;
std::sort(tmp.begin(),tmp.end()); 
```

错误：

[http://ideone.com/WIv0u](http://ideone.com/WIv0u)

有人可以指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T02:51:46.887

`bool operator< (`**`const`**`Point &p1,`**`const`**`Point &p2 )`

# c - C用已知的MAX长度逐个字符地构建字符串

> ID：10308708
> 
> 赞同：0
> 
> 时间：2012-04-25T02:49:25.523
> 
> 标签：c, string, parsing

我正在尝试将字符一个一个地添加到字符串中。我有这样的事情：

```
void doline(char *line, char *buffer, char** tokens){
} 
```

我这样称呼它：

```
char *line = malloc(1025 * sizeof(char *));
fgets(line, 1024, stdin);
int linelength = strlen(line);
if (line[linelength - 1] == '\n'){
    line[linelength - 1] = '\0';
}

char ** tokens = (char **) malloc(strlen(line) * sizeof(char *));
char *emptybuffer = malloc(strlen(line) * sizeof(char *));

parseline(line, emptybuffer, tokens); 
```

所以 doline 会通过**line**并根据各种条件对其进行标记，并将其片段放入**标记**中。我正在变量**缓冲区**中构建临时字符串为此，我需要*逐行*遍历。

我目前正在做：

```
buffer[strlen(buffer)] = line[i]; 
```

然后在循环结束时：

```
*buffer++ = '\0'; 
```

但这是结果：

```
printf("Working on line: '%s' %d\n", line, strlen(line)); 
```

输出：在线工作：'test' 4

但是到函数结束时，缓冲区是：

```
*buffer++ = '\0';
printf("Buffer at the very end: '%s' %d\n", buffer, strlen(buffer)); 
```

输出：最后的缓冲区：'test' 7

所以输出显示字符串被弄乱了。逐个字符构建此字符串的最佳方法是什么？我的字符串操作正确吗？

任何帮助将非常感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:07:34.160

有一些基本问题，所以我重新编写了程序。

```
#include <stdio.h>
#include <stdlib.h>

#define str_len 180

void tokenize(char *str, char **tokens)
{
    int length = 0, index = 0;
    int i = 0;
    int str_i;
    int tok_i;

    while(str[length]) {
        if (str[length] == ' ') {
            /* this charecter is a space, so skip it! */
            length++;
            index++;

            tokens[i] = malloc(sizeof(char) * index);

            tok_i = 0;           
            for (str_i=length-index ; str_i<length; str_i++) {
                tokens[i][tok_i] = str[str_i];
                tok_i++;
            }

            tokens[i][tok_i] = '\0';
            i++;
            index = 0;
        }
        length++;
        index++;
    }       

    /* copy the last word in the string */
    tokens[i] = malloc(sizeof(char) * index);
    tok_i = 0;           
    for (str_i=length-index ; str_i<length; str_i++) {
        tokens[i][tok_i] = str[str_i];
        tok_i++;
    }
    tokens[i][tok_i] = '\0';
    tokens[i++] = NULL;

    return;         
}

int main()
{
    char *str = malloc(str_len * sizeof(char));
    char **tokens = malloc(100 * sizeof(char *));
    int i = 0;

    if (str == NULL || tokens == NULL)
        return 1;

    gets(str);
    printf("input string: %s\n", str);
    tokenize(str, tokens);

    while(tokens[i] != NULL) {
        printf("%d - %s \n", i, tokens[i]);
        i++;
    }

    while(tokens[i])
        free(tokens[i]);
    free(tokens);
    free(str);

    return 0;
} 
```

它的编译和执行如下：

```
$ gcc -ggdb -Wall prog.c 
$ ./a.out 
this is a test string... hello world!! 
input string: this is a test string... hello world!! 
0 - this  
1 - is  
2 - a  
3 - test  
4 - string...  
5 - hello  
6 - world!!  
$ 
```

有几个基本假设：

1.  传入字符串的长度假定为常数。这可以动态完成 - 请检查 -[如何从 C 中的控制台读取一行？](https://stackoverflow.com/questions/314401/how-to-read-a-line-from-the-console-in-c).

2.  令牌数组的长度也被假定为一个常数。这也可以改变。我会把它留给你，让你知道怎么做！

希望这可以帮助！

# android - Opening activity after clicking push notification android

> ID：10308710
> 
> 赞同：5
> 
> 时间：2012-04-25T02:49:49.977
> 
> 标签：android, push-notification

I am a huge noob to Android programming so sorry if this is a simple task. I pretty much followed the Vogella push notification tutorial for push notifications (http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html). I've read some other stack overflow questions but I'm a little confused on how to open a intent once I receive the notification.

For example, if I just wanted the notification to lead me to a website, how would that work? Would it have to go under my MessageReceivedActivity or another project/class all together?

Thanks

Here is the code I have for my C2DMMessageReceiver

```
@Override
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    Log.w("C2DM", "Message Receiver called");
    if ("com.google.android.c2dm.intent.RECEIVE".equals(action)) {
        Log.w("C2DM", "Received message");
        final String payload = intent.getStringExtra("payload");
        Log.d("C2DM", "dmControl: payload = " + payload);
        // TODO Send this to my application server to get the real data
        // Lets make something visible to show that we received the message
        createNotification(context, payload);

    }
}

public void createNotification(Context context, String payload) {
    NotificationManager notificationManager = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.ic_launcher,
            "Message received", System.currentTimeMillis());
    // Hide the notification after its selected
    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    //adding LED lights to notification
    notification.defaults |= Notification.DEFAULT_LIGHTS;

    Intent intent = new Intent(context, MessageReceivedActivity.class);
    intent.putExtra("payload", payload);

    PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
            intent, 0);
    notification.setLatestEventInfo(context, "Message",
            "New message received", pendingIntent);
    notificationManager.notify(0, notification);

} 
```

}

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T05:18:26.723

if you want to open a website on notification click try this:

```
 public void createNotification(Context context, String payload) {
        NotificationManager notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.ic_launcher,
                "Message received", System.currentTimeMillis());
        // Hide the notification after its selected
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        //adding LED lights to notification
        notification.defaults |= Notification.DEFAULT_LIGHTS;

        Intent intent = new Intent("android.intent.action.VIEW", 
         Uri.parse("http://my.example.com/"));
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
                intent, 0);
        notification.setLatestEventInfo(context, "Message",
                "New message received", pendingIntent);
        notificationManager.notify(0, notification);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T03:00:37.983

In your base receiver for c2dm or the class the that extentd base reciever you have a handleMessage()::

Below is the sample code for handle message which launches the activity::

```
@Override
    protected void handleMessage(Context context, Intent intent) {
        String regId = C2DMessaging.getRegistrationId(context);
        String logKey = this.getClass().getSimpleName();
        String title="";
        String message="";
        if (regId!= null) {
            if (intent.hasExtra(Constants.TITLE)) {
                title = intent.getStringExtra(Constants.TITLE);
            }
            if(intent.hasExtra(Constants.MESSAGE)){
                message = intent.getStringExtra(Constants.MESSAGE);
            }
            // TODO Send this to my application server to get the real data
            // Lets make something visible to show that we received the message
            if(!title.equals("") && !message.equals(""))
                createNotificationForMsg(context,title,message);
        }
    }

    @Override
    public void createNotificationForMsg(Context context,String title,String message) {
        final String logKey = this.getClass().getSimpleName();

        try {
            NotificationManager notificationManager = (NotificationManager) context
                    .getSystemService(Context.NOTIFICATION_SERVICE);
            Notification notification = new Notification(R.drawable.icon,
                    "update(s) received", System.currentTimeMillis());
            // Hide the notification after its selected
            notification.flags |= Notification.FLAG_AUTO_CANCEL;
            //adding sound to notification
            notification.defaults |= Notification.DEFAULT_SOUND;            

                Intent intent = new Intent(context, YourAlertActivity.class);

                if(Constants.LOG)Log.d(logKey, Constants.TITLE +": "+ title +" , "+Constants.MESSAGE+": "+message);
                intent.putExtra(Constants.TITLE, title);
                intent.putExtra(Constants.MESSAGE, message);

                PendingIntent pendingIntent = PendingIntent.getActivity(context, Calendar.getInstance().get(Calendar.MILLISECOND),  intent, android.content.Intent.FLAG_ACTIVITY_NEW_TASK);
                notification.setLatestEventInfo(context, "Castrol",
                        title+"update Received", pendingIntent);
                notificationManager.notify(Calendar.getInstance().get(Calendar.MILLISECOND), notification);

        } catch (Exception e) {
//          MessageReceivedActivity.view.setText("createNotificationFor Msg: "
//                  + e.toString());
        }
    } 
```

# database-design - 数据库设计：股票和期权交易

> ID：10308719
> 
> 赞同：4
> 
> 时间：2012-04-25T02:51:28.950
> 
> 标签：database-design, options, stocks, trading

一个数据库有两张表：一张用于股票（股票），一张用于期权。这些是单独的表，因为它们具有不同的信息。例如，stocks 表有一个股票代码列和一个（主要）交换列；期权表有一个股票代码列、一个指向股票表的 FK 列、一个执行价格列、一个到期日列和一个右（看跌/看涨）列。我认为将它们分成两张表是个好主意，尽管这有待商榷。

我需要在数据库中存储交易（或订单或交易）。单笔交易就像“在 2012 年 4 月 14 日以 200 美元的价格购买 100 股 IBM 股票。交易可以涉及股票或期权。应将交易存储为一张表，其中一列指定交易是否涉及股票或期权，另一列是指向股票表或期权表的 FK？还是应该有两个交易表，一个用于涉及股票的交易，一个用于涉及期权的交易？

稍后，我还需要添加一个职位表。一个简单的头寸将由两笔交易组成，例如今天买入 100 股 IBM 股票，明天卖出 100 股 IBM 股票。但是，它也可能更复杂，涉及期权和股票（例如，有担保的看涨期权）。似乎如果我为交易做两个表，那么我在设计头寸表时面临同样的困难，就像我实现一个单一的交易表一样：我需要一个指向股票交易表或期权交易的外键桌子。

这让我觉得应该有一个单一的工具表，其中包含股票和期权。然而，股票所需的信息与期权有很大的不同（见第一段），这也让人感觉不对。包含股票的行将使所有特定于期权的列都为空。

我应该如何设计这个数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T11:29:09.270

您可能应该考虑创建新表的`STOCK`s 和s 子类型： . 当您交易或记录头寸时，它将与超类型有关。`OPTION``INSTRUMENT``INSTRUMENT`

这使您可以为您的股票和期权保留不同的表格，这是明智的，因为它们具有不同的属性。同时，它可以让您以合理的方式处理一组事务。

# java - Java将日期格式从自定义日期更改为MM dd yyyy

> ID：10308720
> 
> 赞同：4
> 
> 时间：2012-04-25T02:51:29.487
> 
> 标签：java, date, parsing, formatting

我正在尝试将存储在数据库中的字符串值（例如“2012-01-20”）转换为 2012 年 1 月 20 日的格式。

我看过一些例子，但他们使用`Date`which 适用于`SimpleDateFormat`.

例如，这是我尝试过的一种方法，但“尝试”总是失败，结果为空

```
DateFormat df = new SimpleDateFormat("MM/dd/yyyy");
Date convertedDate=null;

try {

    convertedDate = df.parse(datePlayed);                   

} catch(ParseException e){
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-25T02:55:54.460

简而言之，您没有使用正确的格式进行解析。您需要使用**两个** `DateFormat`实例；一个用于解析，一个用于格式化。

```
DateFormat parser = new SimpleDateFormat("yyyy-MM-dd");
DateFormat formatter = new SimpleDateFormat("MMM dd, yyyy");
Date convertedDate = parser.parse(datePlayed);
String output = formatter.format(convertedDate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-23T16:54:05.537

```
Date da = new Date();
SimpleDateFormat ft = new SimpleDateFormat("E, dd/MM/yyyy !");
System.out.println("Update : " + ft.format(da)); 
```

您可以在以下位置更改您想要的日期样式：`E, dd/MM/yyyy !`

祝你好运 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T03:01:57.583

如果从数据库中读取日期，则将其存储为 java.sql.Date。然后您可以在其上使用 SimpleDateFormat，也许在转换为 java.util.Date 之后。从 ResultSet 对象中，您可以提取日期。

如果您的意思是给您一个文本中的日期，该日期是由其他人从数据库中提取的，而您却被它所困扰。尝试使用：

```
 DateFormat df = new SimpleDateFormat("yyyy-MM-dd");  
 df.setLenient(true);  
 convertedDate = df.parse(datePlayed.trim() ); 
```

还可以尝试在解析之前显示您正在解析的文本，以确保 datePlayed 值是您所期望的。使用`parseInt`，数据前后的多余空格会导致错误，因此调用`trim()`会删除多余的空格。

# python - 在 Pylab 中将 2D 列表表示为彩色方块的地图

> ID：10308721
> 
> 赞同：0
> 
> 时间：2012-04-25T02:51:41.750
> 
> 标签：python, matplotlib

假设我有一个如下所示的 2D 列表：

```
[
['Red','Green','Blue'],
['Red','Red','Green'],
['Red','Red','Red' ]
                   ] 
```

有没有一种方法可以在 Pylab 中将其表示为一张地图，其中正方形实际上是二维列表中给出的颜色？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:08:56.397

如果您可以将二维列表转换为数字列表，那么您可以在 python 中使用 imshow 函数

```
import numpy as np
import matplotlib.pyplot as plt

a = np.array(((1, 2, 3), (4, 5, 6)))
plt.imshow(a)
plt.show() 
```

为此，您将需要[numpy](http://numpy.scipy.org/)和[matplotlib](http://matplotlib.sourceforge.net/)包。

# c++ - 修复文件访问被拒绝问题的 CFile 复制方法

> ID：10308724
> 
> 赞同：0
> 
> 时间：2012-04-25T02:52:12.917
> 
> 标签：c++, mfc

我的应用程序遇到了 ramdon 错误。当新文件生成并且其大小为 0K 时，txt 文件访问被拒绝。

我只想复制现有文件并在关闭当前文件后重命名它。

谁能给我一个复制文件的方法？谢谢。

我的代码片段如下。

```
ofstream    m_LogFile;

CFile   logcfile;

if(dwLength > 1024*1024*10 )
        {
            string fileDate = status.m_mtime.Format("%Y%m%d%H%M%S");        
            string modulePath = Util::GetModulePath();
            string fileNewName(modulePath);
            fileNewName += "mytextlog" + fileDate + ".txt";
            m_LogFile.close();
                           // I want to insert CFile copy method before rename it.
            logcfile.Rename(m_sLogFileName.c_str(), fileNewName.c_str());
            m_LogFile.open(m_sLogFileName.c_str(), ios::out | ios::app);
            _findfile(modulePath.c_str());
        } 
```

*我假设我的应用程序错误是由上面的代码引起的。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T06:18:31.307

CFile 没有复制文件的方法。

使用 ::CopyFile() 函数可以简单地复制文件，而无需打开和关闭文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T06:35:57.217

是的 CFile 没有复制文件的方法。您可以使用之前发布的 ::CopyFile Win32 方法，或者 CFile 还有另一种（有点复杂）方法，请参见[CFile::Open](http://msdn.microsoft.com/en-us/library/aa363851%28VS.85%29.aspx)方法中的示例

# wordpress - Wordpress：您可以将常规帖子类别分配给自定义帖子类型吗？

> ID：10308727
> 
> 赞同：0
> 
> 时间：2012-04-25T02:52:47.450
> 
> 标签：wordpress, categories, custom-post-type

我今天只是第一次使用自定义帖子类型，所以请原谅我的无知。

我正在使用由插件预定义的自定义帖子类型。看起来几乎每个事件日历插件都使用自定义帖子类型来设置“事件”帖子类型。

我想知道是否有一种方法可以使用我分配给常规帖子的正常类别来分配给自定义事件帖子。

例如，我有区域类别，例如我一直用于常规帖子的“东南”，但我也希望能够将此类别分配给事件帖子，这样当人们查看“东南”类别档案时，他们可以看到与该类别相关的常规帖子和活动帖子。

这可能吗？

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-15T17:26:36.037

简单的：

```
add_action( 'init', 'myfuncxx'); function myfuncxx() {
    register_taxonomy_for_object_type( 'category', 'custom_postttt_typee' );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:42:04.397

我在这里使用了代码和说明： [http ://wp.miragearts.com/allinone-event-calendar-events-blog-home-categories-tags/](http://wp.miragearts.com/allinone-event-calendar-events-blog-home-categories-tags/)

我发现将此代码添加到functions.php中，如果我创建两个类别（一个用于常规帖子，一个用于事件自定义帖子）具有完全相同的名称和slug，那么它基本上与拥有一个类别相同。

我认为这可能会降低我的网站速度，但现在判断它是否会导致问题还为时过早。

这是functions.php的代码副本：

```
// Add this to your theme's functions.php
function edit_my_query($query) {
  // Modify category and tag listings to include ai1ec events and all uses of the same term
  //  across event and post taxonomies
  //  ie live-music or arts whether they are event or post categories
  // also include ai1ec events in blog home and feeds
  if ( ( is_home() || is_feed() || is_category() || is_tag() ) 
          &&  empty( $query->query_vars['suppress_filters'] ) ) {
    // The 'suppress_filters' test above keeps your menus from breaking
    $post_type = get_query_var('post_type');
    if($post_type && $post_type[0] != 'post') {
      $post_type = $post_type;
    } else {
      $post_type = array('post','ai1ec_event'); // add custom post types here
    }
    $query->set('post_type',$post_type);
    if (is_category() || is_tag()) {
    // Add custom taxonomies to category and tag pages
    if (is_category()) {
        $taxonomy1 = 'category';
        $taxonomy2 = 'events_categories';
      }
      if (is_tag()){
        $taxonomy1 = 'post_tag';
        $taxonomy2 = 'events_tags';
      }
      $queried_object = $query->get_queried_object();
      $slug = $queried_object->slug;
      $query->set('tax_query', array(
        'relation' => 'OR',
        array(
          'taxonomy' => $taxonomy1,  'field' => 'slug', 'terms' => $slug
        ),
        array(
          'taxonomy' => $taxonomy2, 'field' => 'slug', 'terms' => $slug
        )
      ));
    }
  }
}
add_action('pre_get_posts', 'edit_my_query'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:03:13.163

您可能想使用 WordPress 函数`register_taxonomy_for_object_type()`将以下内容放入主题的*functions.php*文件中：

```
function add_categories_to_events() {
    register_taxonomy_for_object_type( 'post_tag', 'event' );
}
add_action( 'init', 'add_categories_to_events' ); 
```

# php - XML ATOM 到 SimpleXML 对象丢失数据

> ID：10308730
> 
> 赞同：0
> 
> 时间：2012-04-25T02:53:21.650
> 
> 标签：php, xml, simplexml, atom-feed

你好，我有一个简单的问题。当我尝试将原子 XML 字符串转换为 simplexml 对象或使用 simplexml_load_data 函数时，它似乎删除了许多属性数据..

就像我原来的字符串一样

```
<?xml version="1.0" encoding="UTF-8"?>
<feed gd:kind="customsearch#search" xmlns="http://www.w3.org/2005/Atom" xmlns:cse="http://schemas.google.com/cseapi/2010" xmlns:gd="http://schemas.google.com/g/2005" xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/">
 <title>Google Custom Search - flower</title>
 <id>tag:www.googleapis.com,2010-09-29:/customsearch/v1?q=flower&amp;&amp;num=10&amp;start=1&amp;safe=off</id>
 <author>
  <name>- Google Custom Search</name>
 </author>
 <updated>1970-01-16T10:55:22.093Z</updated>
 <opensearch:Url type="application/atom+xml" template="https://www.googleapis.com/customsearch/v1?q={searchTerms}&amp;num={count?}&amp;start={startIndex?}&amp;lr={language?}&amp;safe={cse:safe?}&amp;cx={cse:cx?}&amp;cref={cse:cref?}&amp;sort={cse:sort?}&amp;filter={cse:filter?}&amp;gl={cse:gl?}&amp;cr={cse:cr?}}&amp;googlehost={cse:googleHost?}&amp;c2coff={?cse:disableCnTwTranslation}&amp;hq={cse:hq?}&amp;hl={cse:hl?}&amp;siteSearch={cse:siteSearch?}&amp;siteSearchFilter={cse:siteSearchFilter?}&amp;exactTerms={cse:exactTerms?}&amp;excludeTerms={cse:excludeTerms?}&amp;linkSite={cse:linkSite?}&amp;orTerms={cse:orTerms?}&amp;relatedSite={cse:relatedSite?}&amp;dateRestrict={cse:dateRestrict?}&amp;lowRange={cse:lowRange?}&amp;highRange={cse:highRange?}&amp;searchType={cse:searchType?}&amp;fileType={cse:fileType?}&amp;rights={cse:rights?}&amp;imgsz={cse:imgsz?}&amp;imgtype={cse:imgtype?}&amp;imgc={cse:imgc?}&amp;imgcolor={cse:imgcolor?}&amp;alt=atom"/>
 <opensearch:Query role="request" title="Google Custom Search - flower" totalResults="98800000" searchTerms="flower" count="10" startIndex="1" inputEncoding="utf8" outputEncoding="utf8" cse:safe="off" cse:cx="g"/>
 <opensearch:Query role="cse:nextPage" title="Google Custom Search - flower" totalResults="98800000" searchTerms="flower" count="10" startIndex="11" inputEncoding="utf8" outputEncoding="utf8" cse:safe="off" cse:cx="0vv1rbg"/>
 <opensearch:totalResults>98800000</opensearch:totalResults>
 <opensearch:startIndex>1</opensearch:startIndex> 
```

但是当我将它转换为 xml 使用

```
 $xml = simplexml_load_string($rs);
        print_r($xml); 
```

我的输出如下所示。搜索次数、总结果集等所有关键信息都消失了。

```
SimpleXMLElement Object
(
    [title] => Google Custom Search - flower
    [id] => tag:www.googleapis.com,2010-09-29:/customsearch/v1?q=flower&cx=&num=10&start=1&safe=off
    [author] => SimpleXMLElement Object
        (
            [name] => Search Engine - Google Custom Search
        )

    [updated] => 1970-01-16T10:55:22.093Z
    [entry] => Array
        (
            [0] => SimpleXMLElement Object
                (
                    [id] => http://en.wikipedia.org/wiki/Flower
                    [updated] => 1970-01-16T10:55:22.093Z
                    [title] => <b>Flower</b> - Wikipedia, the free encyclopedia
                    [link] => SimpleXMLElement Object
                        (
                            [@attributes] => Array
                                (
                                    [href] => http://en.wikipedia.org/wiki/Flower
                                    [title] => en.wikipedia.org
                                )

                        )

                    [summary] => A <b>flower</b>, sometimes known as a bloom or blossom, is the reproductive structure <br>  found in <b>flowering</b> plants (plants of the division Magnoliophyta, also called <b>...</b>
                ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:29:00.180

这些元素并没有消失，您只是无法在标准转储中“看到”它们，因为它们位于不同的命名空间中。您仍然可以像这样遍历它们：

```
foreach ($xml->children('opensearch', TRUE) as $element) {
    echo $element->getName(), "\n";
} 
```

Where`'opensearch'`表示命名空间前缀，`TRUE`表示您使用了文档特定的前缀而不是完整的命名空间 url。

# python - Python，在第 n 次迭代中打印 n 次字母

> ID：10308731
> 
> 赞同：0
> 
> 时间：2012-04-25T02:53:31.700
> 
> 标签：python, for-loop, while-loop, iteration

我似乎被这个难住了。不幸的是，我什至不知道如何解释我想要什么。对于循环中的 n 次迭代，我想打印一个字母 n 次。这是一些入门代码...

```
n = 1
max = 3

letters = string.lowecase
letters.split

while n <= max:
    for letter in letters:
        print letter #n times
    n = n + 1 
```

我想结束：

a b ... z aa ... zz aaa ... zzz

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T02:54:57.327

字符串可以相乘。

```
>>> 'foo' * 4
'foofoofoofoo' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T02:58:07.853

```
for i in range(1, 10):
    for j in "abcdefghijklmnopqrstuvwxyz":
        print j * i 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T03:03:19.677

```
>>> import string
>>> letters = string.ascii_lowercase

>>> print("".join( x*n for n in range(1,4) for x in letters  ))

abcdefghijklmnopqrstuvwxyzaabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzzaaabbbcccdddeeefffggghhhiiijjjkkklllmmmnnnooopppqqqrrrssstttuuuvvvwwwxxxyyyzzz 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T02:56:37.620

使用另一个循环：

```
# Prints the letters
for letter in letters:
        print letter

# Prints each letter 3 times:
for letter in letters:
    for i in xrange(3):
        print letter 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T09:09:03.167

Other way of doing

`(lambda s: ''.join([x*n for n in xrange(4) for x in s]))(letters)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T02:55:59.133

```
n = 1
max = 3

letters = string.lowecase
letters.split

while n <= max:
    for letter in letters:
        print letter * n
    n = n + 1 
```

乘以字符串

# sql - SQL 在 FTP 命令上挂起，但在命令行下工作

> ID：10308735
> 
> 赞同：2
> 
> 时间：2012-04-25T02:54:03.377
> 
> 标签：sql, sql-server, sql-server-2005, ftp, xp-cmdshell

SQL 在此命令上挂起：

```
 EXEC master..xp_cmdshell 'ftp -s:C:\FTP\connect' 
```

但不会挂在我尝试使用的任何其他命令上`xp_cmdshell`，`echo` `open` `get`并且它工作得很好，所以我知道 SQL Server 对文件夹（和下载文件夹）的权限设置正确。

...并且当`ftp -s:C:\FTP\connect`在命令行上执行时，FTP 传输开始，并成功完成。

在此特定服务器上出现问题的 SQL 命令在我的其他服务器上运行良好。我真的不确定还需要做什么。除了我经历过的其他任何事情之外，有谁知道为什么当我执行 FTP 命令时 SQL 会挂起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T03:17:07.820

很可能服务器防火墙阻止了您在第一个实例中运行的端口的命令（可能会使用命令行绕过）

# android - UI 方面的 Native Activity 与 SDK Activity

> ID：10308746
> 
> 赞同：1
> 
> 时间：2012-04-25T02:55:50.133
> 
> 标签：android, audio, user-interface, android-ndk, android-sdk-2.3

我一直在做大量的研究，甚至用 NDK for Android 进行了一些实验（而不是 SDK）。不过，我还没有真正找到一个清晰简洁的定义，说明 NDK*不能*做什么（除了缺乏异常处理和 rtti）。

我一直在为游戏和 Android 游戏引擎绘制一些代码（完全在 NDK 中编写），但它似乎没有像许多人希望的那样得到支持。不仅如此，我还希望能够为我的游戏提供一个性感的 UI，而无需在 OpenGL 中从头开始编写所有内容。

虽然我确信它在 Java 中更容易，但我想知道 NDK 的前端/UI 组件是否已经达到了在触摸屏 IO、声音和图形界面方面甚至可以与 Java 相媲美的地步. 在最坏的情况下，我可以用 Java 编写 UI，然后从中调用本机方法，但如果可能的话，我希望能够做更多的事情。

谢谢。

**编辑**

如果 C++ 甚至在某种程度上与 Java 的 UI 功能集相提并论，那么知道两者中的哪一个提供了更多的控制和定制将是很酷的。例如，虽然 Java 实现可能更易于使用，但它是否为程序员提供了很多选项来微调类似于特定事物的“外观”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T06:00:11.290

官方NDK可以做异常和rtti就好了。阅读随 Android NDK 分发的“docs/CPLUSPLUS-SUPPORT.html”文件。

在 C++ 中你唯一不能做的就是实现 Java 接口，继承 Java 类并定义新的 Java 类。否则 - 你可以做任何 Java 可以做的事情。唯一的问题是很多事情（比如访问 Java 对象成员，或调用 Java 函数）都需要使用 JNI，而且代码看起来很丑。因此，如果您需要创建/继承 Java 类的 UI，那么您可以使用 C++ 编写所有代码。

我建议仅将 JNI 用于性能关键代码。混合代码 - 用于 UI 的 Java，C/C++ 中的数学计算非常容易。或者，如果您使用 OpenGL ES 编写游戏代码，也可以。

# javascript - 如果单击复选框，防止触发 TD onclick？

> ID：10308755
> 
> 赞同：2
> 
> 时间：2012-04-25T02:57:51.783
> 
> 标签：javascript, jquery

我有一个点击事件可以做到这一点：

```
$('table tbody td').click( function (e) {
   // How to check if checkbox was clicked before doing the alert below?
   alert("td clicked");
} 
```

但是在我的表中，我有一些带有复选框的 td，当单击这些复选框时，会导致事件触发。有没有办法在 Jquery 中指定来检查 td 内的点击是否在复选框上并且不提醒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:00:07.077

您可以告诉 jQuery 停止复选框将事件从您的传播`checkbox`到您的`td`

```
$('table tbody td input[type=checkbox]').click( function (e) {
   // How to check if checkbox was clicked before doing the alert below?
   e.stopPropagation();
} 
```

基本上会发生这种情况，因为当您单击 时`checkbox`，浏览器会将该事件从您的复选框冒泡到`click`您的复选框的父级，然后一直上升到`document`，上面的代码基本上停止了从您的复选框的传播。

阅读[事件冒泡](http://www.quirksmode.org/js/events_order.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T03:04:51.807

这假设有问题的复选框与可单击单元格位于同一表格行上。

```
$('table tbody td').click( function (e) {

   if(!$(this).parent().find(':checkbox').prop("checked"))
       return;

   alert("td clicked");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T03:08:36.780

您可以使用传递给 click 函数的 eventObject 来查找目标并使用它来决定要做什么：

```
$("table tbody td").click(function(e){
    if(e.target.nodeName.toUpperCase() == "INPUT"){
        alert("It's an input!");
    }else{
        alert("It's not an input!");    
    }
}); 
```

# asp.net-mvc - MVC 控制与 nosql 数据库的数据绑定

> ID：10308757
> 
> 赞同：0
> 
> 时间：2012-04-25T02:58:16.573
> 
> 标签：asp.net-mvc, asp.net-mvc-3, calendar, nosql, ravendb

我有一个使用 RavenDB 作为主数据库构建的 MVC 应用程序

在我的应用程序中，我需要一个需要强数据绑定的日历控件（使用 RavenDB 数据）我需要日历控件将数据发布到 raven，在日历控件上显示来自 ravendb 的日期（双向数据流）等。

任何人都对我有任何建议.. 可能有人使用 ravendb、mvc 和日历控件来做这种事情。

什么日历控件最适合我在这里的需求.. Jquery 日期选择器？Telerik MVC 日历？或任何其他？

任何输入，评论，帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:54:48.840

那么 RavenDB 允许你反序列化成一个常规的 POCO 类，所以给定一个像这样的类：

```
public class User
{
    public string Id { get; set; }   
    public DateTime date { get; set; }
} 
```

然后你可以像这样加载一个文档：

```
session.Load<User>("users/1"); 
```

从那时起，您可以随意使用该对象。您可以绑定它，将其传递到视图中，向其添加属性等。

# iphone - 将对象插入 NSMutableArray

> ID：10308762
> 
> 赞同：1
> 
> 时间：2012-04-25T02:58:27.263
> 
> 标签：iphone, objective-c, cocoa-touch, nsmutablearray

目前，我已经编辑了一个将练习对象添加到 NSMutableArray 的委托函数。但是，我不想添加重复的对象，相反，如果对象已经在数组中，我想简单地访问那个特定的对象。

这是我的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *str = cell.textLabel.text; // Retrieves the string of the selected cell.

    Exercise *exerciseView = [[Exercise alloc] initWithExerciseName:str];
    WorkoutManager *workoutManager = [WorkoutManager sharedInstance];

    if (![[workoutManager exercises] containsObject:exerciseView]) {
        [[workoutManager exercises] insertObject:exerciseView atIndex:0];
        [self presentModalViewController:exerciseView animated:YES];
        NSLog(@"%@", [workoutManager exercises]); 
    }
    else {
        [self presentModalViewController:exerciseView animated:YES];
        NSLog(@"%@", [workoutManager exercises]); 
    }
} 
```

我认为这会起作用，但是，当我运行我的代码并 NSLogged 我的数组时，它表明当我单击同一个单元格时，会创建两个单独的对象。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T03:05:02.973

每次打电话

```
Exercise *exerciseView = [[Exercise alloc] initWithExerciseName:str]; 
```

它创建一个新的（不同的）executiveView 对象。因此，即使练习名称可能与练习列表中的练习对象的名称相同，它也是一个全新的对象，因此当您调用时`containsObject`，结果将始终为 false，并且您的新对象将被添加到数组中。

`exerciseName`也许您应该在锻炼管理器中存储一个 NSString 列表？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T03:17:39.913

我会说这是你的罪魁祸首：

```
Exercise *exerciseView = [[Exercise alloc] initWithExerciseName:str]; 
```

从技术上讲，您每次都在创建一个新对象，它不在数组中。**containsObject**方法只是遍历数组并在每个对象上调用**isEqual 。**我没有对此进行测试，但理论上，在您的自定义练习对象中，您可以重写**isEqual**方法来比较练习名称属性并在它们匹配时返回 true。看，当你使用**containsObject**时，一切都必须匹配，所以即使所有属性都相同，objectid 也不是。

无需查看练习实施即可轻松修复：

```
Exercise *exerciseView = nil;

For(Exercise *exercise in [[WorkoutManager sharedInstance] exercises]){
    if(exercise.exerciseName == str) {
        exerciseView = exercise;
        break;
    }
}

if(exerciseView == nil) {
    exerciseView = [[Exercise alloc] initWithExerciseName:str];
    [[workoutManager exercises] insertObject:exerciseView atIndex:0];
}

[self presentModalViewController:exerciseView animated:YES]; 
```

希望这有助于解释为什么会发生。我没有测试这段代码，因为有一些缺失的部分，但你应该明白了。玩得开心！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T03:29:03.213

```
WorkoutManager *workoutManager = [WorkoutManager sharedInstance];

Exercise *temp = [[Exercise alloc] initWithExerciseName:str];
for(id temp1 in workoutManager)
{
    if( [temp isKindOfClass:[Exercise class]])
    {
        NSLog(@"YES");
        // You Can Access your same object here if array has already same object
    }
}

 [temp release];
 [workoutManager release]; 
```

希望对你有帮助....

# ruby-on-rails - 使用 mongoid 对 ruby on rails 中的 geonear 搜索结果进行排序

> ID：10308763
> 
> 赞同：2
> 
> 时间：2012-04-25T02:58:39.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

我正在使用以下查询来获取搜索结果

```
Org.where('content.attribs.name'=>'cuisine', 'content.attribs.value'=>cuisine ).geo_near([lon,lat], :max_distance => dist, :spherical => true, num: num_results) 
```

现在我想按等级列按**降序**对这些结果进行排序

请问有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:18:33.167

该`geoNear`命令返回一个文档，而不是游标，因此您不能对其调用 sort 。您必须在应用程序代码中执行此操作。

# java - java中的十进制转二进制

> ID：10308769
> 
> 赞同：4
> 
> 时间：2012-04-25T03:00:12.603
> 
> 标签：java, binary, decimal

我在获取二进制文件时遇到了麻烦。我不知道怎么了。二进制数总是以乱码结尾。还有一些像`new int[31]`东西一样的部分来自硬件，但我无法绕过打印实际的二进制文件。

```
public class DectoBinary {
    public static void main(String[]args) {
        Scanner CONSOLE = new Scanner(System.in);
        System.out.print("Please enter a nonnegative integer: ");
        int value = CONSOLE.nextInt();
        while (value < 0) {
            System.out.print("number outside range.");
            System.out.print
                ("Please enter a nonnegative interger more than 0: ");
            value = CONSOLE.nextInt();
        }
        int[] intArray = new int[31];
        decimalToBinary(value, intArray);
        System.out.println(value + "" + intArray);
    }
    public static int[] decimalToBinary(int value, int[]intArray) {
        int i = 0;
        while (value != 0) {
            if (value % 2 == 1)
                intArray[i] = 1;

            else
                intArray[i] = 0;

            value /= 2;
            i++;
        }
        return intArray;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T03:05:26.470

我认为错误在这一行：

```
System.out.println(value + "" + intArray); 
```

您不能像这样打印整数数组：您应该将其转换为字符串，或者编写一个逐位打印数组的循环：

```
for (int i : inrArray) {
    System.out.print(intArray[i]);
}
System.out.println(); 
```

您也不需要传入输出数组：您可以在函数内部创建它。

```
public static int[] decimalToBinary(int value) {
    int count = 1;
    int tmp = value;
    while (tmp != 0) {
        tmp /= 2;
        count++;
    }
    int[] intArray = new int[count];
    // Do the conversion here...
    return intArray;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T03:05:14.587

您可以简单地使用[Integer.toBinaryString(int)](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#toBinaryString%28int%29)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T03:41:27.423

实际上这是使用 BigInteger 在 java 中获取二进制数的一种非常简单的方法

```
public String dectoBin(int num){
    String s = ""+num;
    BigInteger bi = new BigInteger(s);
    String bin = bi.toString(2);
    return bin
} 
```

`BigInteger.toString(2)`返回存储在括号内指定的数字基数上的数字。是解决此问题的一种非常简单的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T03:27:45.487

这是一个转换十进制数的程序。成二进制。

```
import java.util.Scanner;

public class decimalToBinary {

    static int howManyTerms (int n) {
        int term = 0;

        while (n != 0) {
            term ++;
            n /= 2;
        }

        return term;
    }

    static String revArrayofBin2Str (int[] Array) {
        String ret = "";
        for (int i = Array.length-1; i >= 0; i--)
            ret += Integer.toString(Array[i]);

        return ret;
    }

    public static void main (String[] args) {

        Scanner sc=new Scanner (System.in);

        System.out.print ("Enter any no.: ");
        int num = sc.nextInt();
        int[] bin = new int[howManyTerms (num)];

        int dup = num, el = -1;

        while (dup != 0) {
            int rem = dup % 2;
            bin [++el] = rem;
            dup /= 2;
        }

        String d2b = revArrayofBin2Str(bin);

        System.out.println("Binary of " + num + " is: " + d2b);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T05:14:19.953

实际上要打印数组，因为数组中的所有插槽都初始化为 0 你需要检测第一个开始的位置，所以。你需要更换

```
System.out.println(value + "" + intArray); 
```

像这样的东西；

```
System.out.println(vale + " ");
boolean sw = false;
for(int i=0;i<intArray.length;i++){
    if(!sw)
        sw = (intArray[i]==1);//This will detect when the first 1 appears
    if(sw)
        System.out.println(intArray[1]); //This will print when the sw changes to true everything that comes after
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T04:59:09.737

作为 dasblinkenlight，您需要逐项打印数组。如果您想要一个不错的选择，您可以使用值 mod 2 的递归打印（模 2 给您 1 或 0）

```
/** print directly*/
public static void decimalToBinary(int value) {

    if(value > 1){
         System.out.print(decimalToBinary(value/2) + "" + (value%2)); 
        /**recursion with implicit cast to string*/
    } else {
        System.out.print( (value==0)?"":"1");
   }
} 
```

它适用于任何基础

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-25T03:32:44.217

System.out.println(value + "" + intArray); 'intArray' 是数组的地址，所以，如果你想获得实际的二进制文件，你可以使用 Arrays.toString(intArray)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-02-11T06:29:29.870

这是仅使用原始类型 int 的十进制到二进制的简单 Java 代码，希望它可以帮助初学者。

```
import java.io.BufferedReader;
import java.io.InputStreamReader;

public class DtoB {
    public static void main(String[] args) {

        try { // for Exception handling of taking input from user.

            System.out.println("Please enter a number");

            BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
            String input = br.readLine();       
            int x = Integer.parseInt(input);

            int bin = 0;
            int p = 1;
            while (x > 0) {
                int r = x % 2;
                bin = (r * p) + bin;
                x = x / 2;
                p *= 10;
            }
            System.out.println("Binary of " + input + " is = " + bin);
        } catch (Exception e) {
            System.out.println("Please enter a valid decimal number.");
            System.exit(1);
            e.printStackTrace();
        }
    }
} 
```

# apache - Apache Webserver 配置到多个 apache tomcat 应用程序

> ID：10308777
> 
> 赞同：1
> 
> 时间：2012-04-25T03:01:10.667
> 
> 标签：apache, tomcat

我有配置为 apache webserver 的 apache tomcat 应用程序，现在我想将另一个 apache tomcat 应用程序添加到同一个 Apache web 服务器，所有这些服务器（apache tomcat 和 apache web 服务器（rhel））都在同一个网络上，请给我一些配置它的方法。

不使用 mod_jk 还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T03:20:14.753

Apache 可以使用`mod_jk`或使用标准代理模块与 Tomcat 通信，`mod_proxy`. 使用标准代理模块，很容易将多个 Tomcat 实例放在一个 Apache 实例后面。

假设您有一个 Tomcat 实例在端口 8080 上侦听，另一个在端口 8081 上侦听，您可以执行以下简单操作：

```
<Location /app1/>
  ProxyPass http://localhost:8080/
  ProxyPassReverse http://localhost:8080/
</Location>

<Location /app2/>
  ProxyPass http://localhost:8081/
  ProxyPassReverse http://localhost:8081/
</Location> 
```

这会将第一个实例放置在 处`/app1/`，将第二个实例放置在 处 `/app2/`。

[mod_proxy 文档](https://httpd.apache.org/docs/2.2/mod/mod_proxy.html)是一个很好的起点，[tomcat 文档](https://tomcat.apache.org/tomcat-6.0-doc/proxy-howto.html)简要介绍了这个主题。

# activerecord - JavaScript/SSJS 最强大、最通用的 ActiveRecord 实现是什么？

> ID：10308779
> 
> 赞同：3
> 
> 时间：2012-04-25T03:01:35.090
> 
> 标签：activerecord, serverside-javascript

虽然我对它的用法还不是很熟悉，但我对我所看到的 ActiveRecord 模式中使用的约定优于配置的强大功能很感兴趣，该模式由 Ruby-on-Rails 推广。我已经看到了一些 JavaScript 实现，但正在寻找以下建议：

1.  就适配器支持（从内存中的 JSON 存储到特定数据库）和 CommonJS 友好性（[如果相关](http://wiki.commonjs.org/wiki/RDBMS)）而言，最通用的 JavaScript 实现
2.  在优雅地利用约定以减少冗余和允许快速应用程序开发方面最强大。

结合 JavaScript 的优势，例如它在客户端和服务器端代码重用的可能性，以及从我有限的角度来看是 RoR 的主要吸引力，似乎是一个灌篮。

此外，任何关于入门的提示或好的教程，都将受到欢迎。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-05-10T20:03:09.733

我想这个答案为时已晚，但您想看看 Ember 和 Ember-Data。Ember 完全符合您的要求。[http://emberjs.com/](http://emberjs.com/)

# xml - 如何使用 xmlstarlet 合并两个 xml？

> ID：10308781
> 
> 赞同：3
> 
> 时间：2012-04-25T03:01:53.280
> 
> 标签：xml, sorting, xpath, xmlstarlet

我想对 xml 元素进行数字排序，但在最后一步失败（合并两个 xml）。
这是我尝试过的：

### xml文件的内容

```
$ cat input.xml
<root>
    <title>hello, world</title>
    <items>
        <item>2</item>
        <item>1</item>
        <item>3</item>
    </items>
</root> 
```

### 排序项目

```
$ xmlstarlet sel -R -t -m '//item' -s A:N:- 'number(.)' -c '.' -n input.xml
<xsl-select>
    <item>1</item>
    <item>2</item>
    <item>3</item>
</xsl-select> 
```

### 删除项目

```
$ xmlstarlet ed -d '//item' input.xml
<?xml version="1.0"?>
<root>
  <title>hello, world</title>
  <items/>
</root> 
```

### 如何合并输出？结果应该是：

```
<root>
    <title>hello, world</title>
    <items>
        <item>1</item>
        <item>2</item>
        <item>3</item>
    </items>
</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:43:38.980

我不熟悉 xmlstarlet，但就我在其文档中看到的内容而言，它可用于将 XSL 转换应用于 XML 文件 ( `tr`) - 您可以将该命令与此 XSLT 一起使用：

```
<xsl:stylesheet 
  version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="items">
    <xsl:copy>
      <xsl:apply-templates select="item">
        <xsl:sort select="." data-type="number"/>
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

在单个操作中生成排序和合并的输出。

# matlab - 如何在matlab中加快神经网络的性能？

> ID：10308784
> 
> 赞同：-2
> 
> 时间：2012-04-25T03:02:40.323
> 
> 标签：matlab, neural-network

使用神经网络比训练它需要更长的时间。我做错了什么可怕的事情吗？2 分钟使用 vs 14 秒训练。

```
load building_dataset % 4208 examples

inputs = buildingInputs; 
targets = buildingTargets;

% Create a Fitting Network
hiddenLayerSize = 10;
net = fitnet(hiddenLayerSize);

% Setup Division of Data for Training, Validation, Testing
net.divideParam.trainRatio = 70/100;
net.divideParam.valRatio = 15/100;
net.divideParam.testRatio = 15/100;

% Train the Network
tic
[net,tr] = train(net,inputs,targets);
training_time = toc % ~= 14 seconds

% use the neural network
time = 0;
for i = 1:4208
  test_input = buildingInputs(:,i);
  tic
  test_output = net(test_input);
  time = time + toc;
end

time % ~= 117 seconds
average_time = time / 4208 % ~= 0.028 seconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:18:44.820

您必须对输入进行矢量化。用这个替换for循环：

```
 test_input = buildingInputs(:,:);
  tic
  test_output = net(test_input);
  time = time + toc; 
```

输出将是一个结果矩阵

# javascript - Scriptaulous JS 未被调用

> ID：10308785
> 
> 赞同：1
> 
> 时间：2012-04-25T03:02:46.320
> 
> 标签：javascript

尝试使用 Scriptaculous 来显示单击事件的详细信息。

我已经调用了相关文件

```
<head>
<link rel="stylesheet" type="text/css" href="./css/main.css" />
<script src="java/scriptaculous.js" type="text/javascript"></script>
<script src="java/prototype.js" type="text/javascript"></script>
</head> 
```

我想用这个按钮来调用细节

```
<a href="#" onclick="Effect.BlindDown('eventdetails'); return false;"><img class="open" src="./img/plus.png"></a> 
```

我已经隐藏了 eventdetails div 内联

```
<div id="eventdetails" style="display:none;"> 
```

光标悬停显示链接正在工作，但没有任何形式的移动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:37:22.723

将原型线放在 scriptaculous 之上；Scriptaculous 依赖于原型。

# html - CSS/HTML - 带圆圈数字的水平线

> ID：10308787
> 
> 赞同：0
> 
> 时间：2012-04-25T03:02:49.943
> 
> 标签：html, css, geometry

[看到这个](https://stackoverflow.com/questions/4861224/how-to-css-a-number-to-be-surrounded-by-a-circle)

我正在尝试获取一串数字并在它们周围放置圆圈。如何让它们显示在一条长水平线上，而不是每条线一个圆圈？

07、06、08、02、86、05、01、03、88、87、04

```
<div class="numberCircle">07</div>, <div class="numberCircle">06</div>, <div   class="numberCircle">08</div>, <div class="numberCircle">02</div>, <div class="numberCircle">86</div>, <div class="numberCircle">05</div>, <div class="numberCircle">01</div>, <div class="numberCircle">03</div>, <div class="numberCircle">88</div>, <div class="numberCircle">87</div>, <div class="numberCircle">04</div>, <div class="numberCircle">07</div>, <div class="numberCircle">06</div>,<label><b><del>08</b></del>, <b><del>02</b></del>, <b><del>05</b></del>, <b><del>01</b></del>, <b><del>87</b></del>, <b><del>04</b></del>, </label><br> 
```

基本上我正在尝试复制 [这个](https://imgur.com/vBCMh)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:04:25.977

使用 CSS 浮动：

```
div.numberCircle {
  float: left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T03:11:21.057

简单地不要使用`div`元素，它们是块（你要求没有的）。如果数字没有意义（不太可能），您可以使用内联的`span`元素（`display: inline-block;`在这种情况下为 with）（基本上是您所要求的）。 `float: left;`也是一种选择，但 CSS（样式）决定应该在 HTML（含义）决定之后。您更有可能应该`li`在有序列表 ( `ol`) 中使用元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T03:09:00.417

尝试：

```
div.numberCircle {
    float: left;
    clear:none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T04:10:09.637

`display inline-block`嘿，现在您可以像这样定义您的 div.numberCircle属性

```
div.numberCircle {
display:inline-block;
   zoom:1; // for ie
*display:inline;  // for ie
} 
```

现场演示[http://jsfiddle.net/rohitazad/QYSvB/](http://jsfiddle.net/rohitazad/QYSvB/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-25T06:44:09.453

**嗨，您可以通过CSS3** **边框半径**属性轻松地为您的号码添加圆圈。

如果您在代码中正确使用 PIE.htc 来支持 IE 边框半径，这将在 IE 中工作。**{PIE 代表渐进式 Internet Explorer。它是一种 IE 附加行为，当应用于元素时，它允许 IE 识别和显示许多 CSS3 属性。}**

我使用[**CSS3 反增量**](http://www.w3.org/wiki/CSS/Properties/counter-increment)**属性在有序列表**中制作了代码，以根据您的演示图像获取结果。[](http://www.w3.org/wiki/CSS/Properties/counter-increment)

 ****查看演示：-** [http://jsfiddle.net/UjfBZ/10/](http://jsfiddle.net/UjfBZ/10/)**

# mysql - Ruby on Rails 是否适合我想要实现的目标？为现有 MySQL 数据库创建 CRUD 脚手架

> ID：10308788
> 
> 赞同：1
> 
> 时间：2012-04-25T03:03:02.977
> 
> 标签：mysql, ruby-on-rails, crud

我之前创建了仅限本地主机的 RoR 应用程序，其中模型是手动创建的，并为它们生成了脚手架，为数据创建了一个漂亮、快速、易于使用的 CRUD 界面。我在 Netbeans 中使用 SQLite 做到了这一点。

现在我有一个带有 MySQL 数据库的服务器，并希望创建一个快速的 CRUD 应用程序，它提供了一种快速简便的方法来查看数据库中的数据并提供一些选项，例如编辑/删除。由于我的数据库已经由 MySQL 指定，这似乎打开了大量的蠕虫，与我的 Netbeans 冒险在 RoR 中使用脚手架生成的 crud web 应用程序相比，这使得这变得不那么直接了。

我已经研究过转储我当前数据库的模式，db:raking 它，然后生成脚手架。这是正确的方法吗？我还阅读了有关魔术模型生成器的信息。这是将 MySQL 数据库转换为 RoR 模型格式的最佳方法吗？[http://magicmodels.rubyforge.org/magic_model_generator/](http://magicmodels.rubyforge.org/magic_model_generator/)

我想我要问的是，对于我的数据库结构，RoR 是否适合模拟一个快速的 CRUD Web 应用程序，以便数据可以对其执行基本操作？

下面是我的 MySQL 数据库的 schema.rb。userId 和 attachmentId 上存在 FK 关系。

```
ActiveRecord::Schema.define(:version => 0) do

  create_table "attachments", :primary_key => "attachmentId", :force => true do |t|
    t.string "attachmentName",               :null => false
    t.string "fileType",       :limit => 30, :null => false
    t.binary "content",                      :null => false
    t.string "printCode"
  end

  create_table "emails", :primary_key => "emailId", :force => true do |t|
    t.integer "userId",       :limit => 11,   :null => false
    t.integer "attachmentId", :limit => 11,   :null => false
    t.string  "body",         :limit => 1000
    t.string  "subject"
  end

  add_index "emails", ["attachmentId"], :name => "attachmentId", :unique => true
  add_index "emails", ["userId"], :name => "userId"

  create_table "printUsers", :primary_key => "userId", :force => true do |t|
    t.string "email", :null => false
  end

  add_index "printUsers", ["email"], :name => "email", :unique => true

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:22:53.113

似乎有几种方法可以将 Rails 与现有数据库一起使用。请参阅[将 rails 连接到现有的 postgres DB - 控制台和控制器看不到的模型](https://stackoverflow.com/questions/9297972/connect-rails-to-existing-postgres-db-models-not-seen-by-console-and-controlle)，尤其是其中的链接： http: [//magicmodels.rubyforge.org/magic_model_generator/](http://magicmodels.rubyforge.org/magic_model_generator/)和[http://blog.aizatto.com/2007/05/ 21/activerecord-without-rails/](http://blog.aizatto.com/2007/05/21/activerecord-without-rails/)

需要指出的是，您不需要将 ActiveRecord 与 rails 一起使用。[您的模型可以是任何对象，因此使用sequel](http://sequel.rubyforge.org/)或[arel](https://github.com/nkallen/arel)之类的东西可能更容易访问数据。

另一种方法是将数据从现有数据库迁移到您通过构建模型生成的新数据库中。

# objective-c - IBOutlet 是否暗示 __weak？

> ID：10308792
> 
> 赞同：6
> 
> 时间：2012-04-25T03:03:50.417
> 
> 标签：objective-c, ios, cocoa-touch, automatic-ref-counting

刚开始使用 ARC。Pre-ARC，我只是简单地声明我的出口，例如：`IBOutlet UIButton *button;`所以我不保留它或任何东西。对于 ARC，不指定弱或强意味着强。

因此，如果我在 ARC（即`IBOutlet UIButton *button;`）下做同样的事情，这是否意味着按钮是一个强参考？还是我必须明确将其定义为弱？

简而言之，IBOutlet 是否暗示`__weak?`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-29T20:40:30.257

这个词`IBOutlet`实际上被定义为无：

```
#define IBOutlet 
```

Xcode 只是在你的代码中使用这个词的存在来允许你在 Interface Builder 中建立连接。将变量或属性声明为`IBOutlet`：

```
IBOutlet UIButton * button;
@property (...) IBOutlet UIButton * button; 
```

因此就 ARC 而言没有任何直接影响；它不会（尽管可以想象，它可以）转化为`__weak`或类似的东西。当编译器得到它时，这个词本身已经完全从你的源代码中消失了。

另一方面，这个变量或属性是一个出口这一事实*确实对**您*需要如何考虑内存管理产生了有意义的影响。

正如您所说，对象变量声明的隐式存储限定符（如`IBOutlet UIButton * button;`在 ARC 下）是- 分配给该变量的任何对象都将被视为“拥有”。`__strong`在 MRR 下，声明只是一个指针；分配给对分配对象的引用计数/所有权没有影响——它的作用与`assign`属性相同。*因此，相同 ivar 声明的含义在两个管理系统之间发生了变化。

xib 中的对象具有由视图层次结构形成的拥有/所有者关系；也就是说，父视图拥有它们的子视图。xib 中的顶级视图由称为文件所有者的对象拥有。这种设置意味着，一般来说，您对 xib 中非顶级对象的出口*应该*是`weak`（在 ARC 下）或`assign`（如果是 MRR 下的属性）。他们不拥有关系；它们本质上是视图列表中的方便索引。这是[苹果的建议](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4-SW6)：

> ...您不需要对图中较低的对象进行强引用，因为它们归其父对象所有，并且您应该将创建强引用循环的风险降至最低。
> 
> [...]Outlets 通常应该是`weak`，除了从 File's Owner 到 nib 文件（或者，在 iOS 中，故事板场景）中的顶级对象的那些应该是`strong`. 您创建的网点应该 [原文如此] 因此通常`weak`默认为...

`IBOutlet`正如我所解释的，您的简单指针s 起作用——出于内存管理的目的——比如`weak`属性，** 这意味着它们正在做正确的事情。在 ARC 下编译时，相同的声明*可能会出错。*

总而言之：`IBOutlet`不会*翻译*成`weak`，但它确实改变了指针的含义。由于默认的内存管理语义`IBOutlet UIButton * button;`从 MRR 下的“分配”更改为 ARC 下的“拥有”，并且由于`IBOutlet`s 通常应该是非拥有的，因此存在`IBOutlet`确实**意味着**指针应该`__weak`在 ARC 下声明。^(†</sup>)

* * *

*与`weak`属性类似——唯一的区别是`weak`指针被设置为`nil`对象被释放时。

**汽车零件除外`nil`。

^(†</sup>或者，真的，它应该是一个`weak`属性。)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T03:12:53.940

不，IBOutlet 基本上在代码编译时被剥离。然而，它是 XCode 的助手，因此它可以知道什么是 InterfaceBuilderOutlet。

基本上这个词可以让你在 Interface Builder 中连接元素。

默认情况下它仍然很强大（想象一下那个词不存在）。

但是，建议您将其设置为弱，因为一旦将某些内容连接到界面构建器，该界面将保持对其的强引用，因此具有双重强引用是没有意义的，特别是如果该元素不打算当接口被卸载时保持活动状态。

阅读这个问题，这正是您正在寻找的：

[在 ARC 下，IBOutlets 应该强还是弱？](https://stackoverflow.com/questions/7678469/should-iboutlets-be-strong-or-weak-under-arc)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T03:11:55.087

IBOutlet 关键字仅用于将对象与 Interface Builder 中的元素相关联。它与弱或强或 ARC 或内存管理无关。

# httpclient - UrlRewriteFilter 和 CouchbaseClient 依赖于不同版本的 httpclient

> ID：10308793
> 
> 赞同：0
> 
> 时间：2012-04-25T03:03:50.473
> 
> 标签：httpclient, couchbase, tuckey-urlrewrite-filter

[UrlRewriteFilter](http://www.tuckey.org/urlrewrite/)依赖于 httpclient-3.1，而[Couchbase 客户端](http://www.couchbase.com/develop/java/next)依赖于 httpclient-4.0。

我想出了两个选择：

1.  一起使用两个不同版本的httpclient

2.  用其他解决方案替换 UrlRewriteFilter

我发现同时使用 httpclient 3.1 和 4.0 是可以的（[参考](https://groups.google.com/forum/?fromgroups#!topic/jets3t-users/fUzcEEEJmx4)），但这是最好的方法吗？

至于第二种选择，我使用 UrlRewriteFilter 进行代理、重定向和转发。如果我使用 Spring MVC，则可以进行重定向和转发。但我不知道如何在不使用 Apache Web 服务器或 haproxy 的情况下代理一些 URI。

欢迎对此问题提出任何建议或更正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:03:07.660

HttpClient 3.1 和 4.0 可以毫无问题地共存。我想说目前最好的解决方案就是这样做。例如，形成 UrlRewriteFilter 总是很诱人。但最终，这种解决方案只是耗时。

无论你在做什么，都不要使用 Apache 来代理 som URL，你只会生气，你永远不能只在开发中使用 Jetty，你必须维护代码库中没有的重写，这是最糟糕的解决方案。

# php - 将 php 文件从具有 php 5.1.6 的服务器迁移到具有 5.3.3 的服务器

> ID：10308795
> 
> 赞同：0
> 
> 时间：2012-04-25T03:04:16.773
> 
> 标签：php, syntax

嘿伙计们，所以我用 php 5.1.6 在我的旧服务器上一切正常，我有这个脚本：

```
<? session_start(); ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<?
$name = $_SESSION['name'];
print $name;
if (empty($name)){
print "
<link rel=stylesheet href=css/screen2.css media=screen />
<form id=contactform class=rounded method=post action=panelBackend.php>
<h3>Login</h3>

<div class=field>
<label for=name>Username:</label>
<input type=text class=input name=name id=name />
<p class=hint>Minecraft Username.</p>
</div>

<div class=field>
<label for=password>Password:</label>
<input type=password class=input name=password id=password />
<p class=hint>Free Minecraft Host Password.</p>
</div>

<input type=submit name=Login  class=button value=Login />
</form>";
} else {
header( 'Location: http://x.x.x.x/panelBackend.php' );
}
?> 
```

在它工作正常之前！现在，当我转到它时，我得到了没有样式的表单，它在底部打印出这个 php 代码：

```
"; } else { header( 'Location: http://69.64.80.200/panelBackend.php' ); } ?> 
```

PHP 版本有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:17:45.490

是的。新的没有启用短标签。全部更改`<?`为`<?php`.

# php - 我可以在 PHP 中保持 mongodb 连接吗？

> ID：10308800
> 
> 赞同：1
> 
> 时间：2012-04-25T03:04:59.700
> 
> 标签：php, mongodb

有没有办法连接mongodb并在任何地方使用它？当我想使用 mongodb 时，我必须详细输入。我`$m= new Mongo;`想知道重复连接是否会影响性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T06:16:33.920

这对于 MongoDb < 1.2 来说很重要，但在那之后，持久连接是默认的。MongoDb 的所有语言驱动程序都在内部智能地管理连接池，因此您可以安全地使用它们的默认行为。由于连接池，无论何时创建`new Mongo()`，它都会从连接池中选择一个已建立的连接，如果没有，则重新连接。

摘自： http: [//php.net/manual/en/mongo.connecting.php](http://php.net/manual/en/mongo.connecting.php)

```
In 1.2.0+, connections are always persistent and managed 
automatically by the driver. 
```

> “连接池（版本 1.2.0+）
> 
> 创建连接是驱动程序所做的最重要的事情之一。正确建立连接可能需要数百毫秒，即使在快速网络上也是如此。因此，驱动程序试图最小化通过重用池中的连接而创建的新连接的数量。
> 
> 当用户创建一个新的 Mongo 实例时，所有必要的连接都将从他们的池中获取（副本集可能需要多个连接，一个用于集合的每个成员）。当 Mongo 实例超出范围时，连接将返回到池中。当 PHP 进程退出时，池中的所有连接都将关闭。"

您可以使用测试 php 脚本尝试此操作，并观察`mongostat`形成的最大连接数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T04:56:29.100

```
private $m;
private function getMongo() {
    if ($this->m) return $this->m;
    return $this->m = new Mongo();
} 
```

该技术称为`memoization`. 现在，您通常会在任何地方创建一个新的 mongo 实例，而是调用此函数，它将为您提供现有连接而不是创建新连接。

# jquery - 输入键不提交表单

> ID：10308805
> 
> 赞同：-5
> 
> 时间：2012-04-25T03:05:21.010
> 
> 标签：jquery, dom-events, form-submit

你能看看[http://agentnet.propertyguru.com.sg/](http://agentnet.propertyguru.com.sg/)当我按 时`enter`，表格没有提交，我找不到阻止它发生的原因。

您可以从源代码中找到所有 Javascript 文件。

```
 <form action="destination" method="POST">
    <fieldset>
        <p class="instructions">Please enter your login id and password</p>
        <br />
        <label for="userid">User id:</label>
        <input type="text" name="userid" value="{$process->data.userid}" class="inputfield">
        <br />
        <label for="password">Password:</label>
        <input type="password" maxlength="32" name="password" class="inputfield">
        <br />

        <input name="submit" type="submit" class="button" value="Login" />
    </fieldset>

     </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:09:57.653

这是因为您使用的是 a`<button>`而不是`<input type="submit">`. 您可以通过添加以下内容来解决此问题：

```
<input type="submit" style="display: none" /> 
```

表格内的某处。这将“欺骗”浏览器并重新启用 Enter 作为快捷方式。

# php - 从文本文件读取时 PHP 的尴尬行为。可变读数空白

> ID：10308806
> 
> 赞同：0
> 
> 时间：2012-04-25T03:05:24.237
> 
> 标签：php, text-files

我在 PHP 中使用的一个字符串来自一个文本文件，该行显示为：

```
<Unknown> 
```

但是，当我`var_dump`将数组变量关联到这一行时，它会读取

```
string(9) "" 
```

我之前已经将相同的数据`<Unknown>`插入 MySQL 并且从未遇到过这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:07:42.743

那是因为您正在`var_dump`使用它并使用您的网络浏览器查看输出，介于`<`和之间的任何内容`>`都被您的浏览器视为 HTML 标记，因此您看不到任何输出，但`string(9)`

你可以试试：

```
echo '<pre>' . print_r($var, 1) . '</pre>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T03:20:52.997

如果你想肯定看到:)))

```
$var = "<unknown>";
var_dump(htmlspecialchars($var)); 
```

[http://php.net/manual/en/function.htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php)

# c# - 在 C# 中使用“out 参数”进行递归

> ID：10308815
> 
> 赞同：4
> 
> 时间：2012-04-25T03:06:20.463
> 
> 标签：c#, recursion

我可以使用`out`带有递归方法的参数吗？如果可能的话，我该如何使用以下代码来做到这一点？

```
private void PrepareDir(out List<_File> listFiles,string root,string dirPath) {
    DirectoryInfo dirRoot = new DirectoryInfo(dirPath);
    FileInfo [] Files = dirRoot.GetFiles();
    dirPath = dirPath.Substring(root.Length);

    foreach (FileInfo file in Files) {
        _File _file = new _File();
        _file.Name = dirPath + "\\" + file.Name;
        _file.Path = file.FullName;
        _file.Size = file.Length;
        listFiles.Add(_file);
    }

    foreach (DirectoryInfo dir in dirRoot.GetDirectories()) {
        PrepareDir(out listFiles, root, dir.FullName);
    }
}

private void btnButton1_Click(object sender, EventArgs e) {
    List<_File> Files = new List<_File>();
    PrepareDir(out Files,currAddress, currAddress);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T03:23:49.367

我决定重写我的答案，以便更直接地说明为什么`out`在这里不需要使用。我写这篇文章很长，因为我认为您问题的根源更多在于不理解按值传递、按引用传递之间的区别，以及按引用传递*的引用类型*之间的常见混淆*。*另请注意，这并不明确仅用于递归。

在 C# 中，引用类型默认按值传递。很多人可能会将引用类型与按引用传递混淆，但有一个重要的区别。为了让自己更清楚，我将按原样引用引用类型，并使用`ref`or`out`关键字通过引用传递。

按值传递引用类型，因为它是对内存中某个存储位置的引用，因此您可以进行更改并保持更改。举这个例子。

```
public class MyRefType
{
    public int Value { get; set; }
}

public void Foo() {
    MyRefType type = new MyRefType();
    AddOne(type);
}

public void AddOne(MyRefType type) {
    type.Value++;
} 
```

这里会发生的是，该类`type`现在的值为 1。这是引用类型的本质。如果`type`是 a `struct`，它在 Foo 方法中的值仍然为 0，因为创建了一个副本，而不是保存对该对象的引用。

现在我希望你理解了按值传递引用类型的语义，让我们真正谈谈*按引用*传递引用类型。这是使用`out`and`ref`关键字完成的。请立即注意，在 CLR 中，`out`技术上不存在，只有`ref`存在。`out`实际上在元数据中表示为`ref`具有应用于它的特殊属性，并且它们应该被同等对待。

现在假设我们想在`AddOne`添加之前在方法中重新分配我们的引用类型。

```
public class MyRefType
{
    public int Value { get; set; }
}

public void Foo() {
    MyRefType type = new MyRefType();
    AddOne(type);
}

public void AddOne(MyRefType type) {
    type = new MyReferenceType();
    type.Value++;
} 
```

因为我们仍然按值传递我们的引用类型，`type`所以方法中的值`Foo`仍然是 0。我们所做的只是初始化内存中的另一个存储位置，而不是重新分配原始存储位置）。但是我们想通过引用传递我们的引用类型*，*所以我们真的应该这样做：

```
public class MyRefType
{
    public int Value { get; set; }
}

public void Foo() {
    MyRefType type = new MyRefType();
    AddOne(ref type);
}

public void AddOne(ref MyRefType type) {
    type = new MyReferenceType();
    type.Value++;
} 
```

现在方法`type`中的值`Foo`将是 1。这是因为我们重用了引用指向的相同存储位置，而不是在内存中创建新位置。

那么这一切如何适用`out`呢？请记住，这与不同的使用语义`out`相同。`ref`不同之处在于，`ref`你可以在没有初始化引用的情况下离开方法，而使用`out`，你必须在方法返回之前显式地初始化它。

因此，在您在`out`这里使用的情况下，完全没有必要，因为您已经有现有的参考语义为您工作。我希望这能澄清一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T03:13:04.080

您在代码示例中滥用了关键字`out`。您`List<_File>`作为引用类型传递，对该列表所做的任何更改都会影响调用者的列表。`out`当你想重新分配调用者的标识符时，你只需要传递一个参数。

考虑：

```
public bool Foo()
{
  List<int> list = new List<int>();
  list.Add(1);
  Bar(out list);
  return list.Contains(1);
}

public void Bar(out List<int> list)
{
  list = new List<int>();
  list.Add(2);
} 
```

`Foo`将返回错误。

另一方面，如果`Bar`是这样的：

```
public void Bar(List<int> list)
{
  list = new List<int>();
  list.Add(2);
} 
```

然后`Foo`将返回true。有关[`out`](http://msdn.microsoft.com/en-us/library/t3c3bfhx%28v=vs.80%29.aspx)更多详细信息，请参阅。

您的代码可以在不使用`out`. 而且，实际上，不会编译 - 并且使其编译会增加您尝试做的事情的不必要的复杂性。不要`out`在你的情况下使用。

# cordova - PhoneGap Build + Cordova + ChildBrowser 错误

> ID：10308818
> 
> 赞同：0
> 
> 时间：2012-04-25T03:07:09.170
> 
> 标签：cordova, sencha-touch, phonegap-plugins

这是我的代码：

`<script src="include/cordova.js" type="text/javascript"></script> <script src="include/sencha-touch-all.js" type="text/javascript"></script> <script type="text/javascript" charset="utf-8" src="include/childbrowser.js"></script> <link href="include/sencha-touch.css" rel="stylesheet" type="text/css" />`

```
var childBrowser = null;
if (navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)) {
   document.addEventListener("deviceready", onDeviceReady, false);
} else {
onDeviceReady();
}
function onDeviceReady(){
  console.log("PhoneGap is Ready");
  childBrowser = ChildBrowser.install();
}
function openChildBrowser(url)
{
        try {
            //both of these should work...
            var cb = new ChildBrowser();
            console.log(cb);
            cb.showWebPage('http://www.google.com');
        }
        catch (err)
        {
            alert(err);
            console.log(err);
        }
} 
```

...

还有一些不相关的代码，但是当我打电话时，`openChildBrowser()`我收到以下错误：

`Uncaught TypeError: Object #<Object> has no method 'exec'` 我相信这是指在对象上调用 exec 的子浏览器`cordova`。

当我查看`cordvoa`对象时，我在任何地方都看不到`exec`功能......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T21:12:20.997

这是iOS版还是安卓版？此代码适用于两者。我发现使用 var cb = new ChildBrowser() 时可能会出现错误。我认为清理 ChildBrowser 的调用方式是有序的，但我现在没有时间这样做。这种方法会奏效。Promise :) ps - 如果你是为 iOS 做这个，这里有一个例子。

```
ChildBrowser.install();
window.plugins.childBrowser.showWebPage('http://www.google.com'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T03:00:25.520

据我所知，ChildBrowser 尚未与cordova 完全兼容。

在任何情况下，在您尝试与 ChildBrowser 插件进行通信之前，听起来cordova 都没有完成初始化。

尝试连接 weinre 或其他东西并测试您可以在cordova完全初始化后手动打开子浏览器。确保此代码在脚本加载顺序中位于 cordova 之后。还要确保您使用的是所有内容的最新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T00:03:01.650

如果您使用异步 java 脚本加载又名延迟加载，您可能会收到此错误。

就我而言；我在主 html 文档中使用 iframe。在 IFrame 中，我异步加载并运行所有广告脚本。在那之后，我开始得到 Uncaught TypeError: Object # has no method 'exec'。

我不知道 HOW & WHY 但我猜这种用法会导致 web-kit 被误解。

PS：使用煎茶或不使用，出现此错误。所以它与 sencha-touch-all 无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T14:24:43.720

我一直在 iOS 上的 ChildBrowser 和 Phonegap 上苦苦挣扎。我注意到只有在 deviceready 事件之后“安装”时才能让 ChildBrowser 正常工作。仅当您的 html 有效且完整时才会触发此事件。

我发现，如果您引用实际不存在的图像，则文件名或图像的拼写错误只是不存在，因为设计人员尚未给出它（我的场景），因此设备准备就绪不会触发。结果插件将无法（正确）安装。

在 onload 事件中注册 deviceready 事件是可行的方法，只要您的 html 是好的并且没有遗漏任何东西就可以工作。

希望这对其他人有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T07:40:32.883

将您的 phonegap / cordova 更新到 1.7.0 并从 github 获取 childbrowser 最新代码。它应该可以正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-12T17:37:14.290

我最终重新开始并使用 Eclipse 和 Phonegap SDK。能够在不使用构建服务的情况下以这种方式工作。

这可能会帮助一些人：

[http://phonegap.com/start#android](http://phonegap.com/start#android)

[https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T09:23:42.177

您不能将 childbrowser 插件用于桌面浏览器。它仅适用于设备或模拟器，因此您会收到此错误。

# rally - 跨工作区查询

> ID：10308826
> 
> 赞同：1
> 
> 时间：2012-04-25T03:08:29.503
> 
> 标签：rally

是否可以查询整个工作区的缺陷？

我们的客户支持门户存在缺陷，这些缺陷具有特殊的“支持 ID”字段集，但它们可以分发到我们的任何项目。我想查询我们工作区中所有项目和子项目中的任何此类开放缺陷，但我认为项目范围界定会阻止这种情况。

有没有办法做到这一点？我想我可以将我们所有的项目放在工作区中的一个“超级”项目下并这样做，但似乎这会给组织中的每个人增加更多导航麻烦来帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:52:57.073

实际上，您可以通过不在查询中指定项目（特别是将项目设置为空）来做到这一点。以下是在 App SDK 中使用 RallyDataSource 的示例：

```
var rallyDataSource = new rally.sdk.data.RallyDataSource('__WORKSPACE_OID__', 
                                              '__PROJECT_OID__',
                                               '__PROJECT_SCOPING_UP__', 
                                              '__PROJECT_SCOPING_DOWN__'); 

var queryConfig = { 
    type: 'defect',
    key: 'defects',
    fetch: 'Name,State,Severity',
    project: null //query all projects in the workspace
 };

 rallyDataSource.findAll(queryConfig, displayDefects); 
```

# java - java appengine Blobstore 上传 URL 不运行带有参数的过滤器

> ID：10308832
> 
> 赞同：0
> 
> 时间：2012-04-25T03:09:06.877
> 
> 标签：java, google-app-engine, filter, blobstore

我正在尝试将文件上传到 java appengine 中的 blobstore。在上传文件的 POST 请求中（在我创建了上传 URL 之后），我有几个额外的 post 参数。当我的 servlet 链运行时，我的过滤器无法访问这些参数（参数映射为空），但上传完成回调可以。

如何从 HTTP 过滤器访问这些 post 参数？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-25T03:48:33.223

`request.getParameter("paramName");`

和`request.getInputStream()`上传的文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-25T05:45:52.273

如果我理解正确，您想对通过创建的 url 的 POST 请求运行过滤器`blobstoreService.createUploadUrl()`？

这是不可能的，因为在 blobstore 服务上`createUploadUrl()`提供了[直接 url](https://developers.google.com/appengine/docs/java/blobstore/overview#Using_the_Blobstore)。上传完成后，您的处理程序被调用，此时您可以（正如您已经注意到的）通过过滤器检查标头。

如果您需要在上传时检查上传，[请创建您自己的文件上传处理程序](https://developers.google.com/appengine/kb/java#fileforms)并直接[将文件写入 blobstore](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)。

**更新：** OP澄清了这个问题。

上传必须是带有`multipart/form-data`内容的 HTTP POST。GAE 重写请求，删除文件主体并添加 blob 键作为表单参数。[阅读上传 Blob 文档](https://developers.google.com/appengine/docs/java/blobstore/overview#Uploading_a_Blob)的最后一段。

由于 GAE 是 Servlet API 2.5，因此您必须手动获取此参数（`getParameter()`不起作用）：[在 Servlet 中解析传入的 multipart/form-data 参数的便捷方法](https://stackoverflow.com/questions/3337056/convenient-way-to-parse-incoming-multipart-form-data-parameters-in-a-servlet)

在过滤器中检查请求内容的问题在于，通过 提供的请求正文`request.getInputStream()`只能被使用一次。如果您在过滤器中执行此操作，则在过滤器之后调用的 servlet 将不会得到它。要解决它，您需要包装请求并缓冲内容 - 请参阅示例转储过滤器如何做到这一点：[https ://github.com/leanengine/LeanEngine-Server/blob/master/lean-server-lib/src /main/java/com/leanengine/server/DumpFilter.java](https://github.com/leanengine/LeanEngine-Server/blob/master/lean-server-lib/src/main/java/com/leanengine/server/DumpFilter.java)

# php - 有没有更好的方法在 mysql 和 PHP 中查询这个

> ID：10308835
> 
> 赞同：1
> 
> 时间：2012-04-25T03:09:43.237
> 
> 标签：php, mysql, sql, database

我正在使用 postmeta 表为 wordpress 编写一些自定义代码。项目存放在这里，常见的pk1是post_id。

但是，我正在做的将有一堆 postmeta 的可点击部分，例如

*   source_site
*   来源作者
*   source_rating

或类似的东西。现在，该表将保存具有相同 source_site 或 source_author 的不同帖子的多个帖子数据。

然后，用户可以单击 source_author，他们将被带到一个新表，其中包含链接回此 source_author 的所有帖子或文章。

问题是我链接到一个 postmeta 值，而不是通过 post-id 的 pk1。

这意味着要获取其余数据，我要么必须进行额外的查询，要么必须加入同一个表。

这让我想到了我的问题。做连接或子查询会更好吗？

进一步的问题是 postmeta 表存储了所有各种数据以及键和值，因此很难查询我想要的其他部分。

所以桌子看起来像

```
 |meta_id|post_id|meta_key|meta_value|
   |1      | 2     |source_author | Dan Holmes |
   |2      | 2     |source_site   |http://somesite.com| 
```

只是寻找最干净的方法来获取这些数据，否则我能想到的就是首先为作者获取数据：

```
$the_post_ids = select post_id from postmeta where meta_key='source_author' and meta_value='Dan Holmes'

foreach($the_post_ids as $post_id) {
   select * from postmeta where post_id=$post_id;
} 
```

现在这都是非常伪代码，我想问题是一旦数据开始变得相当大，我担心这最终会导致每个可以点击的部分产生很多开销，而我有对单个数组进行多项选择。

有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T03:28:17.163

正如您所提到的，随着数据库的增长，性能成为一个问题，因此您希望尽可能少地限制到数据库的往返。我会像这个查询一样拉回给定作者的所有元表行：

```
SELECT * FROM postmeta WHERE post_id IN
    (SELECT post_id FROM postmeta
        WHERE meta_key='source_author' AND meta_value='Dan Holmes'
    ) 
```

然后在 PHP 中编写一个类似于您所拥有的*foreach循环来处理结果。*

**编辑**

这是一个不同的选项，不使用**IN**子句

```
SELECT meta1.* FROM postmeta meta1
    INNER JOIN 
        (SELECT DISTINCT postid FROM postmeta
             WHERE postmeta.meta_key = 'source_author' AND postmeta.meta_value = 'Dan Holmes'
        ) meta2 
    ON meta1.post_id = meta2.post_id 
```

# git - 如何回滚存储库的提交以及文件更改，以便它们不会出现在拉取请求中？

> ID：10308839
> 
> 赞同：1
> 
> 时间：2012-04-25T03:10:29.353
> 
> 标签：git, github

所以我开始使用 Git，我觉得我做错了什么。

我正在尝试回滚到我的 fork 上的某个提交，将所有提交历史及其更改删除回该点。我已经尝试了所有可以在这里找到的建议，但并没有什么不同。我需要向一个项目发出拉取请求，但它包括我所做的所有提交，以及大量的合并提交。其他所有参与它的人都没有我自己那么多的提交，所以我相信我做错了什么。

我想要恢复的唯一真正原因是因为我做了一个 WIP 提交，我不想包含在请求中，所以我想在此之前开始清理。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T03:13:01.927

使用`git reset --hard`回到你需要的地方，然后提交，最后推送新版本。`--force`（在推送覆盖远程分支时，您需要使用该标志。）

不过，尽量不要养成这样做的习惯，因为如果有人真的对你推的分支做了什么，覆盖它会让他们有自己的问题需要解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T03:15:12.993

`git reset --hard <commit_id>`将努力做你想做的事。如果您没有 shell 访问权限（即它是 github 存储库等），您可以在客户端上执行相同的操作，然后`git push -f`强制推送。通常，如果目标的当前 HEAD 不是新 HEAD 的祖先，则推送将失败。

但是如果你这样做，请注意任何克隆或拉取旧 HEAD 的人都会非常困惑：他们未来的拉取将因合并失败而死亡，他们将永远恨你。重写历史应该永远是最后的手段。

# centos - 在 CentOS 5 上运行 java 的可执行文件

> ID：10308840
> 
> 赞同：1
> 
> 时间：2012-04-25T03:10:53.257
> 
> 标签：centos, minecraft

我正在尝试制作一个简单的文件，这样我就可以在 SSH 中调用它，它会启动我的 minecraft 服务器。我尝试使用以下代码制作一个名为 start.bat 的批处理文件：

> java -Xmx512M -Xmx512M -jar craftbukkit-1.2.5-R1.0.jar nogui

但是，当我在 SSH 中运行它时：

> $ cd /我的世界/server_1/
> 
> $开始.bat

SSH 返回它是一个无效或未知的命令。有没有其他方法可以让我快速命令/文件来启动我的服务器？我将使用哪些文件扩展名来使其正常工作？如果我将该 java 命令粘贴到 SSH 中并运行它，它会起作用，但我宁愿有一个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:17:28.537

默认情况下，当前工作目录*不*包含在您`PATH`的目录中，因为它在多用户系统上存在安全风险。（即使在单用户机器上也有潜在的烦恼。）您将使用它`./start.bat`来启动程序。

由于您使用的是 Windows 命名约定，我想您也忘记设置执行模式位 - 而且您可能还忘记了文件顶部的[shebang 行。](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)

试试这个：

```
#!/bin/sh
java -Xmx512M -Xmx512M -jar craftbukkit-1.2.5-R1.0.jar nogui 
```

`chmod 500`在这个文件上运行。（严格来说，`555`如果您不介意机器上的其他人执行文件，也可以工作。但他们不需要，所以不要让他们。）有关`chmod(1)`模式的更多详细信息，请参见手册页 - `1`bits 表示*可执行*，`2`bits 表示*可写*，而`4`bits 表示`readable`- 因此，`5`是*可执行和可读*的。

然后，当你想运行脚本时，像这样运行它：

```
cd /Minecraft/server_1
./start.bat 
```

注意`./`-- 这意味着 shell 应该开始在当前工作目录中搜索可执行程序。（可能是`./bin/start.bat`您当前的工作目录有一个包含可执行文件的`bin`子目录。）`start.bat`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T03:17:31.877

start.bat 是可执行文件吗？确保 #!/bin/sh 作为文件的第一行。该目录也可能不在路径中，所以试试这个：

```
 $ chmod 555 start.bat
    $ ./start.bat 
```

# php - 创建多部分表单并重定向用户

> ID：10308841
> 
> 赞同：0
> 
> 时间：2012-04-25T03:11:12.473
> 
> 标签：php, html, forms, multipart

我对网页设计相当陌生，需要一些帮助来编写表单。我要做的是采用包含生日下拉部分（mm/dd/yyyy - 所以 3 个不同的选择选项卡）的 HTML 表单，并根据用户的年龄重定向用户。

如果用户未满 30 岁，请将他们发送到显示我们无法帮助他们的新页面。如果用户是 30 岁或以上，请将他们发送到第二个表单，在那里他们将能够回答后续问题......所以另一个表单。处理后，我需要显示用户从流程开始时输入的所有数据。

它基本上是 2 个表单页面，只有 30 岁或以上的用户才会出现第 2 个表单页面。我正在尝试使用 PHP 对此进行编码，但似乎无法开始。任何帮助，将不胜感激。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T03:31:14.723

```
$interval = date_diff(new DateTime(), new DateTime($_POST['year'] .'-'. $_POST['month'] .'-'. $_POST['day']));

if ($interval->y >= 30)
{
    session_start();
    $_SESSION = $_POST;
    header('Location: over30.php');
}
else
{
    header('Location: under30.php');
} 
```

* * *

在下一个表格中...

```
<?php session_start(); ?>

<html>
    <head><head>
    <body>
        <form method="post" action="xxx.php">
            <input type="text" value="<?=$_SESSION['name'];?>" />
        </form>
    </body>
</html> 
```

# html - input type="number" 是否仅从 html5 开始有效？

> ID：10308842
> 
> 赞同：1
> 
> 时间：2012-04-25T03:11:20.780
> 
> 标签：html, xhtml

我对 xhtml 和 html5 感到困惑，即使在比较了 w3schools.com 上提到的两者之后也是如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T03:13:33.080

> 输入类型=“数字”是否仅从 html5 开始有效？

是的。[http://www.w3.org/TR/html5-diff/#new-elements](http://www.w3.org/TR/html5-diff/#new-elements)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T03:16:22.657

HTML5 的美妙之处在于规范作者将其设计为尽可能向后兼容。

当浏览器处理 HTML 时，它会将属性规范化为属性。将在不提供该功能的浏览器中`number`恢复正常。`text``number`

所以是和不是。它仅在 HTML5 中有效，但您可以在 HTML4-3-2-1 浏览器上使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T03:16:27.530

我相信`type="number"`输入的属性只是 HTML5。我还不断阅读许多值得信赖的专家，他们说越来越多地使用这个资源而不是技术上不太准确的 [w3schools.com：https://developer.mozilla.org/](https://developer.mozilla.org/)

例如

[https://developer.mozilla.org/en/HTML/Element/Input](https://developer.mozilla.org/en/HTML/Element/Input)

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T03:14:43.837

是的，**数字**输入类型在 HTML5 中是新的。

[http://diveintohtml5.info/forms.html](http://diveintohtml5.info/forms.html)

# javascript - 如何强制网络浏览器单击页面上的链接？

> ID：10308851
> 
> 赞同：1
> 
> 时间：2012-04-25T03:12:09.413
> 
> 标签：javascript, jquery, click, bookmarklet

如何让网络浏览器触发对页面上#id 元素的点击？

使用`.click`in javascript 不起作用，因为虽然`.click`在函数中被调用，但是该函数不会在单击时执行*（否则它会起作用）*。

请帮忙。

```
$('#gocircus').live('click', function() {
document.getElementById('something').click();
}); 
```

![点击机器人](../Images/6f8d5443031f29cb0e927c664551b3fc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:13:32.823

```
var el = document.getElementById('id');
el.onclick(); 
```

假设您之前在 onclick 上为该元素分配了功能

```
el.onclick = function() { // your code } 
```

您的代码不像`click()`点击事件的 jQuery 扩展那样工作，您不能在 native 上使用它`DOMElement`，而是这样做：

```
$('#gocircus').live('click', function() {
   $('#something').click();
}).click(); 
```

根据我的评论，`live`自 1.7 起已弃用，请使用`on()`：

```
$(document).on('click', '#gocircus', function() {
   $('#something').click();
}).click(); 
```

## 编辑

根据您的情况，我认为您需要将点击事件绑定到`GO!`：

```
$('#go').click(function() {
   for(var i = 0; i < $('#manyTimesToClick').val(); i++) {
      $('#idToClick').click();
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T03:18:25.310

如果您对 jquery 持开放态度，您可以尝试使用触发事件来触发按钮 [http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

```
$("#gocircus").click(function () {
$("something").trigger('click');

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T03:43:38.183

您需要的方法是`dispatchEvent`或`fireEvent`，具体取决于浏览器。

这是一个示例代码片段

```
function eventFire(el, etype){
  if (el.fireEvent) {
    (el.fireEvent('on' + etype));
  } else {
    var evObj = document.createEvent('Events');
    evObj.initEvent(etype, true, false);
    el.dispatchEvent(evObj);
  }
} 
```

从这里开始：[如何使用 JavaScript 模拟点击？](https://stackoverflow.com/questions/2705583/simulate-click-javascript)

# entity-framework-4 - 更改 EF 模型并在运行时创建新实体

> ID：10308853
> 
> 赞同：0
> 
> 时间：2012-04-25T03:12:41.927
> 
> 标签：entity-framework-4, runtime, poco, updatemodel

我在模型中使用 EF4（DB First），在实体中使用 POCO，在 UI 中使用 ASP.Net。我当然有一个 Biz 层。我需要设计动态表单生成器。我决定从用户设计的表单中创建一个表，然后在运行时更新我的​​ EF 模型，在运行时生成 POCO 对象和 biz 逻辑，然后在运行时编译它们。

我有关于在运行时更新模型的问题。有什么帮助吗？

在此先感谢-哈米德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:26:29.713

EF 不是解决您问题的工具！EF 是围绕简单的概念构建的——映射和类是在设计时定义的。如果您想做其他任何事情，EF 不适合您，因为您将不打算使用 EF = 不支持/意外行为/意外挑战以及复杂性和成本的大幅增加。

您需要使用直接 SQL 来处理动态创建的表，或者您需要在设计阶段花费更多时间并构建元模型，该模型将由设计时定义的一组静态表组成，这些表能够容纳任何类型你的形式。

# api - 如何使用弹性 IP 而不是私有 IP 在亚马逊 ec2 linux 机器上制作 Apache？

> ID：10308858
> 
> 赞同：1
> 
> 时间：2012-04-25T03:13:09.623
> 
> 标签：api, amazon-ec2, centos

我已将一个网站迁移到 Amazon ec2，该网站连接到我们正在使用的服务，该服务安装在另一台服务器（而不是 Amazon）上。对该服务的 API 的访问受 IP 限制，并通过使用 PHP 中的 *http_build_query* 和 *stream_context_create* 发送 XML 数据来完成。

如果我想从新服务器连接到服务，我需要先让供应商添加新 IP。我通过向他们发送弹性 IP 来做到这一点，但它不起作用。在尝试调试时，我注意到 $_SERVER['SERVER_ADDR'] 的输出是 ec2 实例的私有 IP。我假设另一端的服务器正在接收相同的数据，因此它会尝试对私有 IP 进行身份验证。我已经要求供应商也允许从私有 IP 进行访问——它还没有实现，所以我不确定这是否能解决问题，但据我了解他们的 API 的工作方式，它会尝试将数据解析回与之联系的 IP，这应该是不可能的，因为服务器位于亚马逊云之外。

我可能会在这里错过一些非常明显的东西。*我向rc.local* （在我的 ec2 实例上运行 CENT 操作系统）添加了一个命令，该命令在启动时使用*ec2-associate-address*将弹性 IP 与服务器相关联，这似乎有助于使 MySQL 连接到另一个外部服务器工作，但是上面提到的API没有运气。

排除一件事 - API 是通过 HTTPS 访问的，在安全组中启用了端口 80 和 443（以及一个 mysql 端口）并进行了测试。域和 SSL 运行良好。

任何提示都非常感谢 - 我已经搜索了很多，但到目前为止找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T06:12:37.613

听起来两个 IP（私有和弹性）在您的 VM 中都处于活动状态。通过运行检查`ifconfig -a`。如果发生这种情况，那么用于外部流量的 IP 将取决于远程地址和 VM 的路由表。它甚至可以从一个连接到下一个连接有所不同。

如果这是正在发生的事情，那么最快的解决方法就是使用`ifconfig down`具有私有地址的接口。那应该只为所有外部连接留下弹性地址。如果这解决了问题，那么您可以编写脚本，在弹性 IP 激活后自动关闭私有 IP，或者如果弹性 IP 将永久分配给此 VM，而您确实不需要私有 IP，那么您可以永久解除私有 IP 与此 VM 的关联。

# c - 在硬件外设中设置寄存器

> ID：10308859
> 
> 赞同：0
> 
> 时间：2012-04-25T03:13:12.923
> 
> 标签：c, pointers, cpu-registers

现在我正在阅读一本名为“Programming Embedded Systems”的入门级书籍。它有一节解释如何使用 C 操作外围设备上的寄存器。

它一开始就有一个例子，我只是不明白。

```
uint32_t *pGpio0Set = (uint32_t *)(0x40E00018); 
```

我认为这是在声明一个指向 32 位无符号整数的指针。我还可以猜测的是，有问题的寄存器控制着一个 GPIO，并且该寄存器位于地址 0x40E00018。

我不明白的是 (0x40E00018) 前面的 (uint32_t *) 是什么意思以及它有什么作用。

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:15:06.287

它被称为[**类型转换**](http://en.wikipedia.org/wiki/Type_conversion#C-like_languages)。它通常将一种类型转换为另一种类型。在这种情况下，它将十六进制数转换为地址。该十六进制数字周围的括号是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T03:15:26.763

这是从整数类型转换为指向整数的指针。
如果您不这样做，编译器会抱怨您将整数分配给不同的类型。即使是指针**也**大多只是一个整数（在任何平台上都不是这样），编译器希望确定您确实打算使用该数字作为地址。

# c# - 保留从页面传递到页面的数据 - WP7 和 C#

> ID：10308861
> 
> 赞同：0
> 
> 时间：2012-04-25T03:13:26.550
> 
> 标签：c#, visual-studio-2010, windows-phone-7, navigation

我正在使用 C# 创建一个 WP7 应用程序，我需要将数据从一个页面传递到另一个页面。

我在 SO 上找到了解决方案，但我仍然遇到问题。

在“第 1 页”上，我希望显示一个列表，用户可以使用“第 2 页”的输入来填充该列表。

在导航回“第 1 页”时，我在“第 2 页”中使用了以下语句： `NavigationService.Navigate(new Uri("/MainPage.xaml?text="+WhoBox.Text, UriKind.Relative));`
`WhoBox`是一个文本框。

在“第 1 页”上，我有以下内容：
`protected override void OnNavigateTo(System.Windows.Navigation.NavigationEventArgs e)`
`{`
`base.OnNavigatedTo(e);`
`if (NavigationContext.QueryString.ContainsKey("text"))`
`ListBlock.Text = ListBlock.Text + NavigationContext.QueryString["text"];`
`}`

现在，这可行，但方式有限。如果我第二次尝试从“第 2 页”添加内容，它会`ListBlock`用新添加的文本替换（文本块）中存在的内容，而不是附加它。

不应该`ListBlock.Text = ListBlock.Text + NavigationContext.QueryString["text"];`导致附加新文本，而不是完全替换旧文本？

**编辑：我可能已经找到了解决方案。**无论出于何种原因，当我使用 F5 运行程序时，XAML 或 .cs 文件中的任何更改都不会反映出来。难道我做错了什么？例如，即使我删除了一个按钮，当我调试 (F5) 程序时它仍然会出现。我需要更改一些设置吗？还是我应该使用其他命令？我对 Visual Studio 比较陌生，所以请原谅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:03:29.337

问题是，当您再次离开第 1 页时，它基本上就被丢弃了。这意味着在列表框中设置的任何文本也将被删除。换句话说，您需要在离开之前保存该页面的状态。

这里有几种可能：

*   使用 AppSettings（参见[Windows phone 7 config / appSettings?](https://stackoverflow.com/questions/3145803/windows-phone-7-config-appsettings)）
*   将状态写入本地数据库
*   通过将文本保存在所有页面都可以使用的 App.xaml.cs 中进行快速修复：首先，您需要在 app.xaml.cs 文件中创建应用程序范围的变量（并在需要时进行初始化）。例如：

    ```
    public partial class App : Application
    {     public string myText; 
    ```

从现在开始，您可以通过 Application.Current 对象访问任何 App 变量。因此，如果您需要从应用程序中的某个页面（例如 MainPage）访问 bigVar，您只需键入：

```
string Text = (Application.Current as App).myText; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T03:39:26.913

考虑使用会话和数据表：[Storing and retrieving datatable from session](https://stackoverflow.com/questions/2288299/storing-and-retrieving-datatable-from-session)

# c# - FIFO 代码从 Java 到 C# 的转换

> ID：10308862
> 
> 赞同：0
> 
> 时间：2012-04-25T03:13:26.690
> 
> 标签：c#, java, fifo

## 几天前，我发布了一个关于 fifo 编程以及如何进行的主题，因为该主题有点宽泛和模糊，并且缺乏编码示例，所以我遵循专家的建议并搜索了代码并尝试了一些编码。我很清楚我想做什么

我想使用 C# 作为我的编程语言为 FIFO（先进先出）调度算法创建一个 DES（离散事件模拟）。

所以我在网上搜索，我在 c# 中找不到真正有用的指导，但我在 java 代码中找到了我想要的东西。我现在将发布

初始化过程

```
 Queue q = new Queue();
    EventQueue eventq = new EventQueue();
    Random rand = new Random();
    Distribution interarrivalTimeDist =
    new ExponentialDistribution(lambda, rand);
    Distribution serviceTimeDist =
    new ExponentialDistribution(mu, rand);
    double t = 0;
    // generate first arrival
    eventq.addEvent(new Event(Event.ARRIVAL,
    interarrivalTimeDist.nextRandom())); 
```

主程序

```
while (t < simLength) {
Event e = eventq.nextEvent();
t = e.getTime();
switch (e.getType()) {
case Event.ARRIVAL : {
// handle arrival
}
case Event.DEPARTURE : {
// handle departure
}
}
} 
```

到货案例

```
case Event.ARRIVAL : {
// schedule next arrival
eventq.addEvent(new Event(Event.ARRIVAL,
t + interarrivalTimeDist.nextRandom()));
double serviceTime =
serviceTimeDist.nextRandom();
q.addCustomer(new Customer(t, serviceTime));
if (q.getSize() == 1) {
eventq.addEvent(new Event(Event.DEPARTURE,
t + serviceTime));
}
break;
} 
```

离境案例

```
case Event.DEPARTURE : {
q.removeCustomer(t);
if (q.getSize() > 0) {
double serviceTime =
q.getCustomerAt(0).getServiceTime();
eventq.addEvent(new Event(Event.DEPARTURE,
t + serviceTime));
}
break;
} 
```

任何线索或指导如何将此代码转换为 c#?? 和帮助将有助于高度赞赏 PS：- 如果我的主题不像你们想象的那么专业，请对专家表现出一些宽容，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:59:28.457

你的问题听起来很像“我如何编程这个想法”，这不是一个好的问题。你应该设计很多关于你想做的事情，逐步构建它，然后带着你有的具体问题来到这里，而不是宽泛的想法或大量的代码。

仅回答 FIFO，即`queue`. 阅读[队列](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)并与他们一起练习。

# css - 用于将浏览器特定 CSS 转换为跨浏览器 CSS 的工具

> ID：10308866
> 
> 赞同：3
> 
> 时间：2012-04-25T03:13:51.230
> 
> 标签：css, cross-browser

我的一个开发团队编写了几个与 IE 完美配合的 CSS 文件。但是，当在其他浏览器上呈现时，UI 会变得一团糟。

有没有工具可以把这些 CSS 文件转换成跨浏览器版本？不幸的是，这些 CSS 文件太大，目前团队中缺乏编写跨浏览器 CSS 和测试它所需的专业知识。

需要支持所有主流浏览器的最新版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T03:26:53.917

不，因为这需要一个工具来理解你的设计意图，然后修复它。如果只需使用一个神奇的工具就可以轻松创建跨浏览器兼容的 css，我们都会使用它。

通常我看到这是相反的。让它在所有浏览器中工作，然后破解 IE 的修复程序。我的猜测是一些简单的简单的事情严重影响了布局。我会为更符合标准的浏览器（如 Firefox）修复它，然后根据需要对旧版本的 IE 进行修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:44:38.993

您可能想尝试[Prefixr](http://prefixr.com/index.php)。它确实帮助我解决了一些 CrossBrowser 问题，但我为 Chrome 编程。不知道反过来兼容性有多好。

# java - Java脚本NoSuchMethodException？

> ID：10308876
> 
> 赞同：-1
> 
> 时间：2012-04-25T03:15:35.623
> 
> 标签：java, javascript, rhino, javascript-engine, nosuchmethod

我正在努力让（JavaScript）脚本在 Java 中工作。

我有一个 JavaScript 程序，在我的 Java 程序中定义（以及所有必要的脚本引擎相关事物的实例），如下所示：

```
static ScriptEngineManager engineManager = new ScriptEngineManager();
static ScriptEngine jsengine = engineManager.getEngineByName("js");
static Invocable jsinvoke = (Invocable) jsengine;

static String program =

    "//importPackage(javax.swing);" +
    "function myMethod(x, y) {" +
        "return x+y;" +
    "}"; 
```

在程序开始时，我确实称之为，它毫无怨言地工作：

```
 try {
        jsengine.eval(program);
    } catch(ScriptException e) {e.printStackTrace();} 
```

然后，我`myMethod`用这个打电话：

```
 try {
        jsinvoke.invokeFunction("myMethod", x, y);
    } catch(ScriptException se) {
        se.printStackTrace();
    }
    catch(NoSuchMethodException nsme) {
        nsme.printStackTrace();
    } 
```

它给出了错误`java.lang.NoSuchMethodException: no such method: myMethod`。它显然存在于 JavaScript 中，所以我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T03:27:36.943

注释的代码似乎是问题的根源，因为它甚至注释掉了方法名称`myMethod`

```
//importPackage(javax.swing); 
```

删除此行并重新运行您的代码

如果您想保留您的评论，那么不要使用单行评论 (//)，而是使用多行评论 (/**/)

# editor - 像任何网络语言一样的 Google 文档编辑器

> ID：10308877
> 
> 赞同：0
> 
> 时间：2012-04-25T03:15:36.277
> 
> 标签：editor, wysiwyg, google-docs

我有一个项目，我需要在新的 googledocs 等网络编辑器中编写文档，

我知道谷歌文档不支持在我自己的服务器上编辑和保存文档。

我的问题是：

有任何类似的新 google docs 版本或任何其他许可允许我在编辑器中编辑文档，如新的 google docs，我可以在哪里将可编辑的内容保存在我自己的数据库中，用任何网络编程语言编写？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T03:29:03.773

如果我理解您的意思是说您需要与 Google Docs 完全一样？- 就像上传文档下载文档一样。

我们可以在 jquery 中做到这一点

# sencha-touch - Sencha Touch：按钮

> ID：10308881
> 
> 赞同：0
> 
> 时间：2012-04-25T03:16:22.573
> 
> 标签：sencha-touch, sencha-touch-2

我正在尝试使用 Sencha Touch 2 在弹出窗口中实现按钮。这些按钮是如何工作的？我想要一个按钮来关闭窗口，另一个按钮来调用 doSomething 函数。

```
function foo(){
    Ext.Viewport.add({
        xtype: 'panel',
        scrollable: true,
        centered: true,
        width: 400,
        height: 300,
        items:[
            {
                docked: 'bottom',
                xtype: 'titlebar',
                items:[
                    {
                        xtype: 'button',
                        ui: 'normal',
                        text: 'Do Something',
                        go: 'testsecond'
                    },  
                    {
                        xtype: 'button',
                        ui: 'normal',
                        text: 'Close',
                        go: 'testsecond',               
                    },                  
                ]
            },
        ]
    });//Ext.Viewport.add
}

function doSomething() {
    console.log('hi');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:37:37.913

只需向按钮添加一个处理程序，例如

```
{
    xtype: 'button',
    ui: 'normal',
    text: 'Close',
    go: 'testsecond',
    handler:doSomething               
} 
```

或者

```
{
    xtype: 'button',
    ui: 'normal',
    text: 'Close',
    go: 'testsecond',
    handler:function(){
        //do something.
    }               
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:27:31.580

我认为，您需要类似于 Sencha Touch 中的叠加层的东西。

由于您要弹出窗口，因此您应该将此面板设置为浮动面板。

以下是它们的工作方式：

```
Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    name: 'FloatingPanelWindow',

    launch: function() {
        overlay = Ext.Viewport.add({
            xtype: 'panel',
            scrollable: true,
            modal: true,                  // to make it floating
            hideOnMaskTap: true,          // close the window by clicking on mask outside popup window
            centered: true,
            width: 400,
            height: 300,
            items:[
                {
                    docked: 'bottom',
                    xtype: 'titlebar',
                    items:[
                        {
                            xtype: 'button',
                            ui: 'normal',
                            text: 'Do Something',
                            listeners : {
                                tap : function() {
                                    overlay.hide(); // to close this popup window.
                                    Ext.Msg.alert("Clicked on DoSomething"); //callDoSomethingMethod(); // perform your task here.                               
                                }
                            }
                        },  
                        {
                            xtype: 'button',
                            ui: 'normal',
                            text: 'Close',
                            listeners : {
                                tap : function() {
                                    overlay.hide();
                                }
                            }              
                        },                  
                    ]
                        },
                    ]
     });//Ext.Viewport.add
    }
 }); 
```

这是您将获得的示例输出。

![在此处输入图像描述](../Images/4c9c5f84db2b6b5b75efb2a74a79452b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:01:52.453

这里简单

```
 {
                    xtype: 'button',
                    ui: 'normal',
                    text: 'Do Something',
                    go: 'testsecond',
                    handler:function(){
                    //do something.
                    }
                },  
                {
                    xtype: 'button',
                    ui: 'normal',
                    text: 'Close',
                    go: 'testsecond',
                    handler:function(){
                      //popup_window.hide();
                    }               
                } 
```

# asp.net-mvc-3 - 所需的数据注释在我的 asp.net mvc3 中的 DropDownlist 上不起作用

> ID：10308891
> 
> 赞同：0
> 
> 时间：2012-04-25T03:18:01.587
> 
> 标签：asp.net-mvc-3, data-annotations

我在验证模型类中定义了以下内容

```
public class Visit_Validation
{
   [Display(Name = "Assign to Doctor")]
   [Required(ErrorMessage= "Please select a Doctor")]
   public string DoctorID { get; set; }} 
```

然后我创建了 DoctorID`Selectlist`如下： -

```
 public ActionResult Create(int patientid)
        {
            Visit visit = new Visit();
            var allusers = Membership.GetAllUsers();

           ViewBag.DoctorID = new SelectList(allusers, "Username", "Username");
return View(visit);
        } 
```

最后我`dropdownlist`在视图中定义如下： -

```
 <div class="editor-label">
            @Html.LabelFor(model => model.DoctorID)
        </div>
        <div class="editor-field">
            @Html.DropDownList("DoctorID", String.Empty)
            @Html.ValidationMessageFor(model => model.DoctorID)
        </div> 
```

但我面临的问题是，如果用户将 DoctorID 下拉列表留空，则`[Required(ErrorMessage= "Please select a Doctor")]`不会显示错误？那么可能出了什么问题？

BR

**更新：-** 这是完整的视图代码：-

```
<h2>Create</h2>
@section scripts{
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>}

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Visit</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.VisitTypeID, "VisitType")
        </div>
        <div class="editor-field">
            @Html.DropDownList("VisitTypeID", String.Empty)
            @Html.ValidationMessageFor(model => model.VisitTypeID)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Date)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.Date, new { value = "FL", disabled = "disabled" })
            @Html.ValidationMessageFor(model => model.Date)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Note)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Note)
            @Html.ValidationMessageFor(model => model.Note)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.DoctorID)
        </div>
        <div class="editor-field">
            @Html.DropDownList("DoctorID", String.Empty)
            @Html.ValidationMessageFor(model => model.DoctorID)
        </div>

        <div class="editor-label">
            Visit Status
        </div>
        <div class="editor-field">
           @Html.TextBoxFor(model => model.VisitStatu.Description, new { value = "FL", disabled = "disabled" })

        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.CreatedBy)
        </div>
        <div class="editor-field">
           @Html.TextBoxFor(model => model.CreatedBy, new { value = "FL", disabled = "disabled" })
            @Html.ValidationMessageFor(model => model.CreatedBy)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

这是 Post 操作方法代码：-

```
 [HttpPost]
        public ActionResult Create(Visit visit)
        {
            if (ModelState.IsValid)
            {
                visit.StatusID = repository.GetVisitStatusByDescription("Assinged");
                visit.CreatedBy = User.Identity.Name;
                visit.Date = DateTime.Now;
                repository.AddVisit(visit);
                repository.Save();
                return RedirectToAction("Index");  
            }

            ViewBag.DoctorID = new SelectList(Membership.GetAllUsers(), "Username", "Username");
            ViewBag.StatusID = new SelectList(repository.FindAllVisitStatus(), "StatusID", "Description");
            ViewBag.VisitTypeID = new SelectList(repository.FindAllVisitType(), "VisitTypeID", "Description");
            return View(visit);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T06:10:47.193

为了触发验证，您需要让您的 POST 控制器操作将模型作为参数：

```
[HttpPost]
public ActionResult Create(Visit visit)
{
    ...
} 
```

或使用 TryUpdateModel 方法：

```
[HttpPost]
public ActionResult Create()
{
    Visit visit = new Visit();
    if (!TryUpdateModel(visit))
    {
        // validation failed
    }
    ...
} 
```

当表单提交给这个控制器动作时，默认模型绑定器将调用包含在这个 Visit 模型中的验证规则。如果您的控制器操作永远无法与此模型一起使用，则没有任何东西可以解释您放置在其上的数据注释。

# c# - Fluent + SQLite：SetBatchSize() 上的异常

> ID：10308894
> 
> 赞同：3
> 
> 时间：2012-04-25T03:18:55.363
> 
> 标签：c#, sqlite, nhibernate, fluent

我正在尝试设置 Fluent NHibernate 以允许我进行批处理。当我尝试 session.SetBatchSize(x) 时抛出 NotSupportException，它指出“没有为会话工厂定义批处理大小，禁用批处理。设置 adonet.batch_size = 1 以启用批处理。” 但是，当我检查 SessionFactory 属性时，有一个条目 [adonet.batchsize, 1] 。有什么我在这里公然俯瞰的吗？

工厂创建：

```
factory = Fluently.Configure()
          .Database(
               SQLiteConfiguration.Standard
               .UsingFile(fileName).AdoNetBatchSize(1)
            )
           .Mappings(m => m.FluentMappings.AddFromAssemblyOf<Person>())
           .ExposeConfiguration(BuildSchema)
           .BuildConfiguration()
           .BuildSessionFactory(); 
```

插入功能：

```
 using(var session = factory.OpenSession())
 using (var transaction = session.BeginTransaction())
 {
       session.SetBatchSize(1); //Exception is being thrown here.

       session.Save(myPerson);  //myPerson uses an assigned Id (not Identity)

       transaction.Commit();
 } 
```

如果我手动设置属性本身而不是使用 AdoBatchSize 方法（即 config.Properties["adonet.batch size"] = "1"; ），也会引发异常。是否必须在 App.Config 中设置任何内容才能使用 Fluent NHibernate 进行批处理？此异常似乎来自 NonBatchingBatcher 的 BatchSize 属性的设置器，如果您尝试设置它，它会抛出参数。如果在 SessionFactory 上设置了 adonet.batch_size 的配置属性，为什么它使用 NonBatchingBatcher 而不是 SqlClientBatcher？

谢谢，配音。

# php - 将 AJAX 与 MVC 结合使用时回显响应的正确方法（CodeIgniter）

> ID：10308902
> 
> 赞同：3
> 
> 时间：2012-04-25T03:20:16.120
> 
> 标签：php, ajax, model-view-controller, codeigniter

`submit_ajax`我有一个通过 AJAX 提交时提交给该方法的表单。现在，当我收到它作为 AJAX 请求时，我想返回一个 JSON 对象。

在这种情况下，我有两个选择。遵循 MVC 模式，什么被认为是正确的做法？

**选项 1** 从控制器回显它

```
class StackOverflow extends CI_Controller 
{   
    public function submit_ajax()
    {
        $response['status'] = true;
        $response['message'] = 'foobar';
        echo json_encode($response);
    }
} 
```

**选项 2**设置从控制器接收数据并回显它的视图。

```
class StackOverflow extends CI_Controller
{
    public function submit_ajax()
    {
        $response['status'] = true;
        $response['message'] = 'foobar';
        $data['response'] = $response;
        $this->load->view('return_json',$data);
    }
}

//return_json view
echo json_encode($response); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:24:06.743

CodeIgniter 的伟大之处在于，在大多数情况下，您可以自行决定使用哪个更舒服。

如果您（和您的大学）更喜欢通过 Controller 回应，那就去吧！

我个人通过 Controller 回显 ajax 回复，因为这很容易，并且您收集了所有简单的脚本，而不必打开视图文件来确认明显的`json_encode()`.

The only time I'd see it to be logical to use view in this case is if you have 2 view files that echo's json and XML for instance. Then it can be nice to pass the same value to these views and get different outcome.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T10:14:11.033

根据 MVC 模式，正确的方法是在 View 中显示数据。控制器在任何情况下都不应该显示数据。

> MVC 经常出现在 Web 应用程序中，其中视图是应用程序生成的 HTML 或 XHTML。控制器接收 GET 或 POST 输入并决定如何处理它......

来源：[http ://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T06:01:48.133

通常，当您必须在 ajax 功能中显示成功时，您需要标志意味着一些消息。并根据您在成功功能中显示或播放的那些消息。现在不需要创建额外的视图。控制器中的一个简单的 echo json_encode() 就足够了。这很容易操纵。

# java - 查找证书是自签名的还是 CA 签名的

> ID：10308903
> 
> 赞同：23
> 
> 时间：2012-04-25T03:20:35.557
> 
> 标签：java, openssl, ssl-certificate, pki

我有一个网络应用程序，它允许用户上传 pkcs12。我将 pkcs12 作为二进制文件存储在数据库中。有什么方法可以让我知道 pkcs12 中的证书是自签名的还是 CA 签名的？

我在 tomcat 上运行 Java Web 应用程序，并且可以使用 openssl。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-25T05:26:07.657

以下电子邮件线程准确地告诉了验证 base64 编码证书（即 PEM）是否是自签名的正确方法：[http ://marc.info/?l=openssl-users&m=116177485311662&w=4](http://marc.info/?l=openssl-users&m=116177485311662&w=4)

以下是代码片段：

```
openssl verify -CAfile self_signed_cert.pem self_signed_cert.pem 
```

应该返回：

```
self_signed_cert.pem: OK 
```

或比较发行人和主题。如果它们相同，则为自签名

```
openssl x509 -in cert.pem -inform PEM -noout -subject -issuer 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-25T03:50:49.660

编辑：今天这个问题有两个更好的答案：

*   [https://stackoverflow.com/a/57927684/377270](https://stackoverflow.com/a/57927684/377270)
*   [https://stackoverflow.com/a/14515875/377270](https://stackoverflow.com/a/14515875/377270)

但是，我认为还有更重要的问题需要解决——*为什么*要了解自签名证书。目标是什么？正在解决什么问题？可能试图将证书分成两堆，自签名和非自签名，对于大多数情况来说是错误的方法。几乎可以肯定，更好的方法是验证任何给定证书是否具有来自受信任证书颁发机构的有效签名链，以及与给定证书关联的任何连接是否与证书匹配。

这是我原始答案的其余部分。这可能不是你想要的。

* * *

这有点hacky，但是该`openssl x509`命令可以报告发行者和主题。如果主题和发行者相同，则为自签名；如果它们不同，那么它是由 CA 签署的。（严格来说，很多自签名证书*也是*由 CA 签名的——他们自己。）

在测试这个理论时，我进行了一些测试；它运行类似：

```
cd /etc/ssl/certs
for f in *.0 ; do openssl x509 -in $f -issuer | head -1 > /tmp/$f.issuer ; openssl x509 -in $f -subject | head -1 > /tmp/$f.subject ; done
 cd /tmp
 sed -i -e s/issuer=// *.issuer
 sed -i -e s/subject=// *.subject
 cd /etc/ssl/certs/
 for f in *.0 ; do diff -u /tmp/$f.issuer /tmp/$f.subject ; done 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-09-13T17:01:06.450

这里接受的答案并不完全正确。老问题，但这是谷歌“如何判断证书是否为自签名”的第一个结果，因此需要清除。

如果颁发者和主题匹配，证书几乎总是自签名的，但不能保证。证书可以是“自行颁发”的，它具有相同的颁发者/主题，但由未与证书中的公钥配对的私钥签名。

NitinB上面答案的第一部分是检查自签名证书的正确方法：

`openssl verify -CAfile self_signed_cert.pem self_signed_cert.pem`

“所有自签名证书都是自签发的，但并非所有自签发证书都是自签发的。”

引用：[https ://www.rfc-editor.org/rfc/rfc5280](https://www.rfc-editor.org/rfc/rfc5280)

“自颁发证书是 CA 证书，其中颁发者和主体是同一实体。生成自颁发证书以支持策略或操作的更改。自签名证书是自颁发证书，其中数字签名可以通过以下方式验证绑定到证书中的公钥。”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T03:26:12.930

您是否尝试过 BouncyCastle 库？

[http://www.bouncycastle.org/wiki/display/JA1/Frequently+Asked+Questions](http://www.bouncycastle.org/wiki/display/JA1/Frequently+Asked+Questions)

" 有用于处理属性证书、PKCS12、SMIME 和 OpenPGP 的特定示例程序。它们可以在包中找到：

org.bouncycastle.jce.examples org.bouncycastle.mail.smime.examples org.bouncycastle.openpgp.examples 另一个有用的示例来源是测试包：

org.bouncycastle.crypto.test org.bouncycastle.jce.provider.test org.bouncycastle.cms.test org.bouncycastle.mail.smime.test org.bouncycastle.openpgp.test org.bouncycastle.cert.test org.bouncycastle。 pkcs.test org.bouncycastle.tsp.test "

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-30T02:05:03.937

Java**无法**分析`PKCS12`，因此您必须将其转换为`keystore`使用 openssl。

这里的密钥库有私钥和 X509 证书（或者您可以选择只存储证书）。然后`keystore`使用标准 JAVA API 获取颁发者并手动验证颁发者。

# android - 用于更新游戏状态的 Android SurfaceView/Thread

> ID：10308905
> 
> 赞同：0
> 
> 时间：2012-04-25T03:20:48.003
> 
> 标签：android, surfaceview

我正在Android上开发一个小游戏，我有一个问题。我希望我的主游戏循环成为从 SurfaceView 调用的线程，但每次我想从该线程调用另一个类的方法时，我都会收到“意外停止”消息。

为了更清楚：

```
@Override
public void run() { //Game Loop
   Canvas canvas = null;
   while (mRun) {               
      canvas = mHolder.lockCanvas();                
      if (canvas != null) {
         grub.updateGrubber();   //here I want to update state.                 
         mPanel.doDraw(canvas);
         mHolder.unlockCanvasAndPost(canvas);                   
      }
   }
} 
```

行 grub.updateGrubber(); 显示我之前提到的错误。我尝试了该类的不同方法，所有方法都给了我同样的错误。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:05:43.720

如果我的猜测是正确的，那么您正在尝试直接更新 UI 线程。您不能从主线程以外的线程调用 UI 方法。尝试：

```
Runnable action = new Runnable() {  
            @Override 
            public void run() {    

                grub.updateGrubber();  
                }     };
                this.post(action);
 instead of your `grub.updateGrubber();`  line. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T20:49:07.817

我实际上已经测试了你的建议，这不是一个坏主意，但我的代码中的问题是我从未真正创建过一个`Grubber`对象（我错过了这`= new Grubber();`部分）。

可能是与我在过去几周内完成的大量代码编写和测试有关的错误，对此感到抱歉。无论如何，我将使用创建的线程作为主游戏循环，以根据我在[这里](http://www.javacodegeeks.com/2011/07/android-game-development-basic-game_05.html)阅读的内容更新表面视图中的画布。

# c# - 如何通过鼠标拖动来选择多个控件

> ID：10308906
> 
> 赞同：4
> 
> 时间：2012-04-25T03:20:51.860
> 
> 标签：c#, winforms, textbox, drag

我希望能够拖动一堆控件并选择某种类型的控件（文本框）。

拖动操作完成后，我想显示一个输入框（是的，我必须引用/使用 VB .dll），提示用户输入将在每个选定的 TextBox 中输入的值。

这可以做到吗？（当然，但是如何？）

还是有另一种方法来完成同样的事情（允许用户快速选择多个控件，然后一次对所有控件执行操作）？

## 更新：

我已经完成了这种工作——“警告”或“陷阱”是我必须向用户弹出 MessageBox.Show() 才能使其工作。本质上，我：

如果选择了鼠标右键，则在容器的（在我的情况下为 FlowLayoutPanel）MouseDown 事件上将布尔值设置为 true。

如果选择了鼠标右键，则在容器的 MouseUp 事件上将相同的布尔值设置为 false。

然后，我为该表单上的所有 TextBox 提供了一个共享的 MouseHover 事件处理程序，如果布尔值为 true，则更改 BackColor（在我的情况下，从 Window 更改为 Gainsboro）。

在容器的 MouseUp 事件中，我还使用 InputBox（引用/导入/使用 VB .dll）请求用户输入“突出显示的”文本框通用的值。然后，我遍历它们，寻找具有该 BackColor 的那些，并将用户提供的值分配给它们的 Text 属性。

瞧！

不幸的是，当您以这种方式为其赋值时，TextBoxes 的 Modified 属性似乎没有改变，所以我不得不解决这个问题（明确地将“保存”按钮设置为启用），并且我不得不添加更多代码来复制我的KeyPressed 代码，用于限制用户输入的值。

所以，当然，这是可能的，尽管有点笨拙。不过，我还没有决定 MessageBox.Show() 是“错误”还是功能......

一个相关的帖子是：[为什么只有在 messagebox.show() 或断点发生之前才调用 MouseHover 事件？](https://stackoverflow.com/questions/10323824/why-does-mousehover-event-only-get-called-if-a-messagebox-show-or-breakpoint-o)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T19:08:37.467

这实际上非常简单。我假设通过拖动您的意思是您想要“选择”控件，例如您将在绘画程序中“选择”一些像素。这是我写给你的一个例子，它就是这样做的，只选择 TextBox 控件。它忽略其他控件。

```
namespace WindowsFormsApplication5
{
    using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;
    using System.Drawing.Drawing2D;

    /// <summary>
    /// Main application form
    /// </summary>
    public partial class Form1 : Form
    {
        /// <summary>
        /// Initializes a new instance of the WindowsFormsApplication5.Form1 class
        /// </summary>
        public Form1() {
            InitializeComponent();
            DoubleBuffered = true;
        }

        private Point selectionStart;
        private Point selectionEnd;
        private Rectangle selection;
        private bool mouseDown;

        private void GetSelectedTextBoxes() {
            List<TextBox> selected = new List<TextBox>();

            foreach (Control c in Controls) {
                if (c is TextBox) {
                    if (selection.IntersectsWith(c.Bounds)) {
                        selected.Add((TextBox)c);
                    }
                }
            }

            // Replace with your input box
            MessageBox.Show("You selected " + selected.Count + " textbox controls.");
        }

        protected override void OnMouseDown(MouseEventArgs e) {
            selectionStart = PointToClient(MousePosition);
            mouseDown = true;
        }

        protected override void OnMouseUp(MouseEventArgs e) {
            mouseDown = false;

            SetSelectionRect();
            Invalidate();

            GetSelectedTextBoxes();
        }

        protected override void OnMouseMove(MouseEventArgs e) {
            if (!mouseDown) {
                return;
            }

            selectionEnd = PointToClient(MousePosition);
            SetSelectionRect();

            Invalidate();
        }

        protected override void OnPaint(PaintEventArgs e) {
            base.OnPaint(e);

            if (mouseDown) {
                using (Pen pen = new Pen(Color.Black, 1F)) {
                    pen.DashStyle = DashStyle.Dash;
                    e.Graphics.DrawRectangle(pen, selection);
                }
            }
        }

        private void SetSelectionRect() {
            int x, y;
            int width, height;

            x = selectionStart.X > selectionEnd.X ? selectionEnd.X : selectionStart.X;
            y = selectionStart.Y > selectionEnd.Y ? selectionEnd.Y : selectionStart.Y;

            width = selectionStart.X > selectionEnd.X ? selectionStart.X - selectionEnd.X : selectionEnd.X - selectionStart.X;
            height = selectionStart.Y > selectionEnd.Y ? selectionStart.Y - selectionEnd.Y : selectionEnd.Y - selectionStart.Y;

            selection = new Rectangle(x, y, width, height);
        }
    }
} 
```

现在有这个目前的限制。显而易见的是，这不会选择嵌套容器控件中的 TextBox（例如，表单上包含 TextBox 的面板）。如果是这种情况，将在面板下方绘制选择，并且不会选择 TextBox，因为我编写的代码不会检查嵌套容器。

但是，您可以轻松地更新代码来完成所有这些工作，但这应该会给您一个坚实的开端。

# ruby-on-rails - Rails：什么时候使用多对多关联？

> ID：10308909
> 
> 赞同：2
> 
> 时间：2012-04-25T03:21:40.593
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我已经使用 Rails 将近一年了，我一直处于不确定何时使用多对多关联的情况。这是我目前的情况。

我有**球员**、**赛季**和**运动**。

**播放器.rb**

```
has_many :seasons, :dependent => :destroy 
```

**季节.rb**

```
belongs_to :player
has_many :sports, :dependent => :destroy 
```

**运动.rb**

```
belongs_to :season 
```

**玩家**has_many : seasons 和 season 属于玩家。然后我有属于季节和季节的运动 has_many :sports。

我希望玩家添加一个新赛季（例如 2011-2012、2012-2013、2014-2015 等），然后在赛季创建后我希望玩家添加他们目前正在玩的运动季节。在这一点上我很困惑，因为我现在这样做的方式迫使我使用像这样的 3 级深度的嵌套资源

**路线.rb**

```
resources players do 
  resources :seasons do 
    resources :sports
  end
end 
```

如果我要使用 3 级深层嵌套资源，我将不得不将玩家添加到我的表单中，它只接受 2 个选项。

**_form.html.erb**

```
<%= form_for([@season, @sport]) do |f| %> 
```

我会为此使用多对多关联还是应该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T04:23:45.340

也许这将帮助您解决一些多对多的问题：

[多对多](http://railscasts.com/episodes/47-two-many-to-many)

使用您的路线，您可能不必将路线嵌套得那么深......分离可能是更好的方法。（取决于您想要的路线）

我看到一些多对多的关系正在形成。一个运动员可以参加许多运动，而一项特定的运动可以有许多运动员。一个赛季可以有许多不同的运动，而一项运动可以有多个赛季。

一旦你弄清楚了你的模型，如果你想要一个操纵两个不同模型的表单，你应该查看nested_forms

[嵌套表单](http://railscasts.com/episodes/196-nested-model-form-part-1)

希望这将帮助您开始/为您清理一些事情！

[我也构建了一个体育应用程序（篮球），并在此处](https://stackoverflow.com/q/10239285/1211936)遇到了多对多关系和嵌套表单的一些问题。也许您可以将其用作参考/指南

# vb.net - Visual Basic 中的字符串自动换行

> ID：10308910
> 
> 赞同：0
> 
> 时间：2012-04-25T03:21:43.170
> 
> 标签：vb.net

我想将我的收件人电子邮件包含在我的字符串分配中，该字符串分配的列表很长。

**例子：**

```
Dim MailList As String

MailList = _
"Email Address 1,"
"Email Address 2,"
"Email Address 3,"
'Go on until several lines 
```

我应该在每封电子邮件之间输入什么命令？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:26:32.407

用于`&`连接字符串，并且由于您将其分成多行，因此在 & 符号后使用下划线。

# c# - 需要以连字符格式“some-product-name”的所有产品名称，但也需要在没有添加连字符的情况下正确显示

> ID：10308912
> 
> 赞同：0
> 
> 时间：2012-04-25T03:22:28.223
> 
> 标签：c#, asp.net, sql-server, asp.net-mvc

这可以通过仅使用数据库中的一个名称列来实现吗？

假设我的产品表的名称字段中有以下值：

```
Samsung Blu-Ray Writer 
```

当 html 在视图中呈现时，我将解析字符串并用连字符替换所有空格并删除所有大写字母，所以它看起来像这样：samsung-blu-ray-writer

单击此产品链接时，它将向服务器发送请求以获取名称为 samsung-blu-ray-writer 的产品。当然，在数据库中，产品名称是三星蓝光刻录机。因此，当我创建查询时，我当然需要再次用空格替换所有连字符，但这也会删除蓝光中所需的“-”。

我知道我只能使用两个字段，比如 ProductName 和 DisplayName。但这似乎是一种浪费，希望有一个简单的解决方案。

即使最初将所有产品名称保存为连字符，当我解析字符串以用空格替换它们以进行显示时，我仍然会丢失实际产品名称中的连字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:31:51.520

您不需要在第二次行程中将连字符替换为空格。看看 Stack Overflow 是如何做到的。将 ID 放在产品名称之前的 URL 中，然后在回程时按 ID 查找产品。通过这种方式，您在 URL 中如何格式化产品名称并不重要——它只是为了显示目的。

# php - PHP：默认 cURL 超时值

> ID：10308915
> 
> 赞同：67
> 
> 时间：2012-04-25T03:22:42.653
> 
> 标签：php, curl

默认的 PHP cURL 超时值是多少？我可以从编码中获得价值吗？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-04-12T23:38:31.477

这取决于您正在谈论的超时设置。

cURL 提供了各种特定于连接超时设置的选项。其中一些选项有一个设定的限制，而其他选项则允许转移花费无限的时间。为了了解哪些值具有默认设置，哪些没有，您需要查看 libcurl 的`curl_easy_setopt()`函数：[http ://curl.haxx.se/libcurl/c/curl_easy_setopt.html](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html)

libcurl 列出了以下连接超时特定设置：

*   CURLOPT_FTP_RESPONSE_TIMEOUT：无默认值（无限期）
*   CURLOPT_TIMEOUT：无默认值（无限期）
*   CURLOPT_TIMEOUT_MS：无默认值（无限期）
*   CURLOPT_CONNECTTIMEOUT：默认为 300 秒
*   CURLOPT_CONNECTTIMEOUT_MS：无默认值
*   CURLOPT_ACCEPTTIMEOUT_MS：默认为 60000 毫秒

PHP 源代码不会覆盖上述任何默认设置：[https](https://github.com/php/php-src/blob/master/ext/curl/interface.c) ://github.com/php/php-src/blob/master/ext/curl/interface.c 。PHP绑定覆盖的唯一相关参数是`CURLOPT_DNS_CACHE_TIMEOUT`，将默认值从60秒更改为120秒：[https ://github.com/php/php-src/blob/a0e3ca1c986681d0136ce4550359ecee2826a80c/ext/curl/interface.c#L1926](https://github.com/php/php-src/blob/a0e3ca1c986681d0136ce4550359ecee2826a80c/ext/curl/interface.c#L1926)

其他答案之一表明 PHP 将设置为ini 设置中`CURLOPT_TIMEOUT`指定的值。`default_socket_timeout`我无法在 PHP 源代码中找到任何内容来支持此声明，并且我无法通过下载一个`default_socket_timeout`设置为 1 秒的非常大的文件来触发 cURL 超时。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-04-26T20:41:15.613

默认值如下：

*   CURLOPT_FTP_RESPONSE_TIMEOUT：无限期
*   CURLOPT_TIMEOUT：无限期
*   CURLOPT_TIMEOUT_MS：无限期
*   CURLOPT_CONNECTTIMEOUT：300 秒
*   CURLOPT_CONNECTTIMEOUT_MS：无限期
*   CURLOPT_ACCEPTTIMEOUT_MS：60 秒

*上一个答案（供参考）：*

我的理解是 CURL 遵守 default_socket_timeout 除非用`CURLOPT_TIMEOUT`/覆盖`CURLOPT_CONNECTTIMEOUT`。

```
$socket_timeout = ini_get('default_socket_timeout'); // timeout in seconds 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-25T05:14:31.673

libcurl 中没有。[http://curl.haxx.se/mail/lib-2003-05/0097.html](http://curl.haxx.se/mail/lib-2003-05/0097.html)

# java - Maven 在 jar 中生成重复的 pom.xml 和 pom.properties 文件

> ID：10308916
> 
> 赞同：26
> 
> 时间：2012-04-25T03:22:51.047
> 
> 标签：java, maven

我将基于 Maven 的 Spring 应用程序打包为：

```
mvn install-DskipTests -Peverything. 
```

奇怪的事情出现了。在生成的 jar 的 META-INF 中，我发现重复的 pom.xml 和 pom.properties 文件。有人可以解释一下吗？谢谢。

![在此处输入图像描述](../Images/6ab3bfa2bee944d3683c65f863f9ea04.png)

这是提取的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.abc.xyz</groupId>
<artifactId>migrate-app</artifactId>
<packaging>jar</packaging>
<version>1.0-SNAPSHOT</version>
<name>migrate-app</name>
<url>http://maven.apache.org</url>
<dependencies>

..

</dependencies>

<profiles>
  <profile>
    <id>everything</id>
    <build>
      <plugins>
        <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
          <source>1.5</source>
          <target>1.5</target>          
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.5</version>
        <configuration>
          <skipTests>true</skipTests>
        </configuration>
      </plugin>            
      </plugins>
    </build>
  </profile>
  </profiles> 
```

命令的输出：

```
mvn -version 
```

> Apache Maven 3.0.4 (r1232337; 2012-01-17 15:44:56+0700) Maven 主页：C:\apache-maven-3.0.4\bin.. Java 版本：1.6.0_30，供应商：Sun Microsystems Inc . Java home：C:\Program Files (x86)\Java\jdk1.6.0_30\jre 默认语言环境：en_US，平台编码：Cp1252 操作系统名称：“windows 7”，版本：“6.1”，arch：“x86”，家庭：“窗户”

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-14T07:19:03.840

添加

```
<build>
   <plugins>
     <plugin>
       <artifactId>maven-jar-plugin</artifactId>
       <configuration>
         <archive>
           <addMavenDescriptor>false</addMavenDescriptor>
         </archive>
       </configuration>
     </plugin>
   </plugins>
</build> 
```

到你的 pom.xml

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-25T07:40:36.413

看起来这是一个由 Eclipse 中的冲突引起的常见问题，尤其是在*m2e-wtp*集成中。

有些人表示可以通过在要运行的目标列表中包含*clean*来修复它，例如`mvn clean package`.

还要尝试更新您的*m2e*安装并确保您没有安装多个版本的*m2e*或*m2eclipse*（Indigo 之前的版本）。

对面临此问题的其他人的一些参考：

*   [http://dev.eclipse.org/mhonarc/lists/m2e-users/msg01995.html](http://dev.eclipse.org/mhonarc/lists/m2e-users/msg01995.html)
*   [https://issues.sonatype.org/browse/MECLIPSEWTP-209](https://issues.sonatype.org/browse/MECLIPSEWTP-209)
*   [https://issuetracker.springsource.com/browse/STS-2349](https://issuetracker.springsource.com/browse/STS-2349)
*   [https://github.com/sonatype/m2eclipse-extras/issues/9](https://github.com/sonatype/m2eclipse-extras/issues/9)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-23T18:19:15.870

我知道这个问题有点老了，但我想我会分享一些关于这个主题的晦涩信息。我遇到了同样的问题，我发现当我在 Eclipse 打开的情况下运行 maven 并且我的工作区首选项设置为使用本机挂钩或轮询刷新工作区时，eclipse 添加了额外的 pom.xml 和 pom.properties 文件！关闭 eclipse 或删除刷新工作区选项为我解决了这个问题。这是一个很难追踪的问题，所以希望其他人能从中受益。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T15:25:46.013

跟进@Dan 的解决方法：

我尝试了您的解决方案，它*似乎*有效 - 乍一看。然而，它只是延迟了最终的失败。

它似乎比任何时候刷新工作空间时都会在 /classes 目录中创建 pom.xml 和 pom.properties 文件。之后，任何以后的“打包”目标都将在 .jar 中包含重复文件，从而破坏任何以后的签名。

如果轮询开启 - 你会“快速失败”。如果它关闭，您可能会在未来构建中的任意时间失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-07T17:08:13.010

您需要执行“mvn clean”，然后执行“mvn package”，或者只执行“mvn clean package”。如果“mvn clean”由于任何原因失败，如果你在此之后执行“mvn package”，你会再次看到这个问题。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2012-04-25T04:27:30.643

不知道你的意思是什么，`duplicate`但由 maven 创建的 jar 确实随文件夹`pom.xml`一起`pom.properties`提供`META-INF`。请参阅Maven 入门指南的[这一部分。](http://maven.apache.org/guides/getting-started/index.html#How_do_I_add_resources_to_my_JAR)

# python - 如何从嵌套列表中删除连字符？

> ID：10308919
> 
> 赞同：-4
> 
> 时间：2012-04-25T03:22:57.130
> 
> 标签：python, list, python-2.7

在嵌套列表中：

```
x = [['0', '-', '3', '2'], ['-', '0', '-', '1', '3']] 
```

如何删除连字符？

```
x = x.replace("-", "") 
```

给我`AttributeError: 'list' object has no attribute 'replace'`，和

```
print x.remove("-") 
```

给我`ValueError: list.remove(x): x not in list`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:32:08.117

`x`是列表的列表。`replace()`将用一个模式字符串替换一个字符串中的*另一个*。你想要的是从列表中删除一个项目。`remove()`将删除第一次出现的项目。一个简单的方法：

```
for l in x:
    while ("-" in l):
        l.remove("-") 
```

有关更高级的解决方案，请参阅以下内容：[从 Python 列表中删除所有出现的值](https://stackoverflow.com/questions/1157106/remove-all-occurences-of-a-value-from-a-python-list)

# xcode - 符号导航器显示 h 或 m 文件

> ID：10308920
> 
> 赞同：2
> 
> 时间：2012-04-25T03:22:58.347
> 
> 标签：xcode

在Xcode中，当我在符号导航器中单击一个方法时，有时会加载.h文件中的方法定义，有时会加载m文件，这是怎么决定的？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:07:55.617

好吧，这就是我发现的，如果方法是在.h文件中定义的，它总是加载h文件，如果一个方法不是在h文件中而是在m文件中定义的，它仍然显示在列表中，当你点击它，xcode 加载 m 文件。这很聪明……

# c - 包含 GPU 库的路径问题

> ID：10308923
> 
> 赞同：1
> 
> 时间：2012-04-25T03:24:02.777
> 
> 标签：c, cuda, gpu, nvcc, library-path

我正在尝试使用 MAGMA (http://icl.cs.utk.edu/magma/) 在 GPU 上执行一些矩阵运算。我能够成功调用 CUDA 内核，这没有问题。但是当我尝试使用 magmablas_sgemm 函数时，我遇到了错误。

这是我正在使用的编译命令：

```
nvcc -o msd msd.cu -I../../include -I/util/magma/1.1 -lmagma -lmagmablas -Xcompiler -I../../include -I/util/magma/1.1 "-O3 "

```

这是部分 printenv 输出：

```
LD_LIBRARY_PATH=/util/magma/1.1/lib:/util/cuda/4.1.28/cuda/lib64:/util/cuda/4.1.28/cuda/lib
岩浆=/util/岩浆/1.1
PATH=/util/magma/1.1:/util/cuda/4.1.28/cuda/bin:/usr/lib64/qt-3.3/bin:/util/Modules/3.2.8/bin:/usr/local/bin :/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/kerberos/bin
_LMFILES_=/util/Modules/modulefiles/null:/util/Modules/modulefiles/modules:/util/Modules/modulefiles/cuda/4.1.28:/util/Modules/modulefiles/magma/1.1
MODULEPATH=/util/Modules/versions:/util/Modules/modulefiles
LOADEDMODULES=null:modules:cuda/4.1.28:magma/1.1

```

可以清楚地看到，岩浆库包含在 LD_LIBRARY_PATH 中，但是，我收到了这个错误：

```
/usr/bin/ld: 找不到 -lmagma
collect2: ld 返回 1 个退出状态
make: *** [msd] 错误 1

```

任何帮助/指针将不胜感激！谢谢！

PS：如果相关，nvcc 用于主机代码的底层 C 编译器是 gcc。
PPS：我检查了路径“/util/magma/1.1/lib”，它确实包含 libmagma.a 和 libmagmablas.a

更新：哇..我讨厌这个..但这让它工作了

nvcc -o msd msd.cu -I../../include -I/util/magma/1.1 -L/util/cuda/4.0.17/cuda/lib64 -L/util/magma/1.1/lib -lcublas -lm -lmagma -lmagmablas -Xcompiler -I../../include -I/util/magma/1.1 "-O3"

所以我所做的只是明确地包含库路径。但我认为 LD_LIBRARY_PATH 会处理这样的事情。知道为什么那不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:25:52.690

哇..我讨厌这个..但这让它工作了

nvcc -o msd msd.cu -I../../include -I/util/magma/1.1 -L/util/cuda/4.0.17/cuda/lib64 -L/util/magma/1.1/lib -lcublas -lm -lmagma -lmagmablas -Xcompiler -I../../include -I/util/magma/1.1 "-O3"

所以我所做的只是明确地包含库路径。

# django - 计算总成本并将销售税添加到购物车

> ID：10308925
> 
> 赞同：0
> 
> 时间：2012-04-25T03:24:31.913
> 
> 标签：django, calculator, cart

我正在创建一个基本的购物车应用程序，我可以在我的购物车中添加所有物品以填充数量和成本，但我正在尝试找到一种方法来创建总成本，并在顶部添加销售税那。显然，总线是问题，但我不确定我能做些什么来填充所有产品的价格和数量并将它们相乘。

```
{% for addtocart in userCart %}
  <li>Quantity:{{addtocart.quantity}} <a href="/products/{{addtocart.product.id}}">{{addtocart.product.prodName}}</a> ${{addtocart.product.prodPrice}}(<a
href=/delItem/{{addtocart.id}}>Remove</a>)<br>
{% endfor %}
</ul>
{% else %}
<p> No products available </p>
{% endif %}
***<p>Total: {{addtocart.quantity}}"x"{{addtocart.product.prodPrice}}*** 
```

视图.py

```
def addtocart(request, prod_id):
        if (request.method == 'POST'):
                form = CartForm(request.POST)
                if form.is_valid():
                        newComment = form.save()
                        newComment.session = request.session.session_key[:20]
                        newComment.save()
                        return HttpResponseRedirect('/products/' + str(newComment.product.id))
        else:
                form = CartForm( {'name':'Your Name', 'session':'message', 'product':prod_id} )

        return render_to_response('Products/comment.html', {'form': form, 'prod_id': prod_id})

def userHistory(request):
        userCart = Cart.objects.filter(session = request.session.session_key[:20])
        return render_to_response('Products/history.html', {'userCart':userCart}) 
```

模型.py

```
from django.db import models
from django.forms import ModelForm

# Create your models here.
class prod(models.Model):
        prodName = models.CharField(max_length=100)
        prodDesc = models.TextField()
        prodPrice = models.FloatField()
        prodImage = models.ImageField(upload_to="userimages/")
        def __unicode__(self):
                return self.prodName

class Cart(models.Model):
        session = models.CharField(max_length=100)
        product = models.ForeignKey('prod')
        quantity = models.IntegerField()

        def __unicode__(self):
                return self.name

class CartForm(ModelForm):
        class Meta:
                model = Cart
                exclude = ('session') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:58:12.103

有两种方法可以做到这一点：

1.  计算视图中的总数，并将其作为单独的变量传递
2.  定义一个做乘法的自定义模板标签（Django 默认没有）

(1) 更详细：

在您看来：

```
def userHistory(request):
    userCart = Cart.objects.filter(session = request.session.session_key[:20])
    totalCost = 0
    for item in userCart:
        totalCost += item.quantity * item.product.prodPrice
    return render_to_response('Products/history.html', {'userCart':userCart,
        'totalCost': totalCost}) 
```

然后在您的模板中： `<p>{{totalCost}}</p>`

(2) 更详细：

首先新建一个文件my_app/templatetags/my_tags.py（还要在这个目录下放一个__init__.py文件，让Python知道它是一个包）

```
from django import template
register = template.Library()

@register.filter 
def multiply(arg1, arg2): 
    return float(arg1) * float(arg2) 
```

然后在你的模板`{% load my_tags %}`顶部添加，你就可以使用`{{addtocart.quantity|multiply:addtocart.product.prodPrice}}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:24:17.020

快速说明：您没有在添加到购物车时记录价格。这可能是某些购物车的问题。取决于商店。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T19:10:03.843

我不会把它放在你的视图中，而是让它成为你模型下的一个函数。这样，如果您必须在应用程序的其他地方计算总数，您就不必重用相同的代码。

真正的问题是您使用的模型不正确。用户只有一个购物车，并不多。因此，您应该改用以下模型：

```
class Cart(models.Model):
    session = models.CharField(max_length=100)

class CartItem(models.Model):
    cart = models.ForeignKey('Cart', related_name='items')
    product = models.ForeignKey('prod') 
    quantity = models.IntegerField() 
```

然后，将总函数添加到 Cart 模型：

```
class Cart(models.Model):
    session = models.CharField(max_length=100)
    items = models.ManyToManyField(prod, through="CartProduct")

    def total(self):
        total = 0.0
        for item in self.items.all():
            total += (item.product.prodPrice * item.quantity)
        return total 
```

我还强烈建议将 prod 模型重命名为 Product 并重命名字段以匹配 Django 命名约定。

# c# - 检查图像扫描类或应用程序

> ID：10308926
> 
> 赞同：1
> 
> 时间：2012-04-25T03:24:38.370
> 
> 标签：c#, image-processing, banking

我们正在寻找一种方法来扫描支票，就像银行一样，并且能够读取支票信息以发送给银行。我们想把它集成到我们的软件中，这样它就可以无缝了。

我不确定此时我要寻找什么。我知道我没有写这样的东西的知识，但我敢肯定有公司这样做。如果你知道一个类或 api，开源或付费，你能给我一些关于我应该在哪里寻找的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:38:42.340

您正在寻找扫描库、OCR 库或 MICR 库。MICR 是（曾经是？）读取支票的标准（并且有许多特定的 MICR 扫描仪，具有 VersaScan 等支票标准）......比标准 OCR 好得多。

我从来没有在 C# 中做过类似的事情，所以我无法提供任何经过验证的具体 SDK，但大多数检查扫描仪（MICR 的）应该在其制造商的网站上有可用的 SDK，所以这是一个开始的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:51:35.810

一种选择是使用具有内置 MICR 支持的扫描仪，但这些往往很昂贵，我不确定是否有任何通用库可以使用它们进行编程。

另一种选择是使用任何低成本质量的扫描仪，并使用软件识别扫描页面中的文本。有一些免费的扫描和 OCR 库，但它们往往难以使用，并且通常识别率低。我之前使用了一个 SDK 来扫描和 OCR 的常规文档（不是银行支票），并且他们有一个用于 MICR 的特殊模块。

我还没有尝试过 MICR 模块，但[在这个论坛上有一个演示项目](http://support.leadtools.com/SupportPortal/cs/forums/40882/ShowPost.aspx)。

# xcode - 带有视图控制器的 Xcode 和 alertview

> ID：10308927
> 
> 赞同：1
> 
> 时间：2012-04-25T03:24:58.643
> 
> 标签：xcode, viewcontroller, alertview

我想要实现的是在单击警报视图按钮时转到另一个视图。我的警报视图在我的 loadingView 中，这个警报视图是从另一个名为 classA 的类中调用的。

### 这就是它在 A 类中的调用方式。

```
[LoadingViewController showError]; 
```

### 这是 loadingView 类的 loadingView 中的方法。

```
+ (void)showDestinationError{
UIAlertView *alert = [[UIAlertView alloc] 
                      initWithTitle:@"Error" 
                      message:@"Error"
                      delegate:self 
                      cancelButtonTitle:@"OK" 
                      otherButtonTitles: nil];
alert.tag = DEST_ERR;
[alert show];
} 
```

### 按钮动作

```
+ (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
if(alertView.tag = DEST_ERR){

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];
    UINavigationController *secondView = [storyboard instantiateViewControllerWithIdentifier:@"NavigationController"];
    secondView.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;    
    [secondView presentModalViewController:secondView animated:YES];
}
} 
```

### 这给了我一个错误。'应用程序试图在其自身上呈现模态视图控制器。呈现控制器是 UINavigationController:..

### 注意：我的方法是'+'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T04:05:29.787

问题是这一行：

```
[secondView presentModalViewController:secondView animated:YES]; 
```

视图控制器不能呈现自己，在这种情况下甚至还不存在）。

解决此问题的最明显方法是创建`clickedButtonAtIndex`一个实例方法，因为它需要访问有关特定实例的信息。然后你会使用这个：

```
[self presentModalViewController:secondView animated:YES]; 
```

否则，您需要获取对可以呈现您的视图控制器的视图的引用。有多种方法可以做到这一点，具体取决于您的应用程序的设置方式，可能包括从您的应用程序委托获取它或引用应用程序窗口。

# backbone.js - 如何在 Backbone.Router 中使用标准 URL？

> ID：10308928
> 
> 赞同：7
> 
> 时间：2012-04-25T03:25:06.897
> 
> 标签：backbone.js

根据[Backbone.js](http://documentcloud.github.com/backbone/#Router)页面：

> 直到最近，哈希片段 (#page) 被用来提供这些永久链接，但随着 History API 的到来，**现在可以使用标准 URL (/page)**。

我尝试添加此路由器规则：

```
routes: {
  'test': function() {
     alert('ok'); }
} 
```

并调用了`Backbone.history.start({pushState: true, root: '/myroot/'})`. 我的页面中有一个链接：

```
<a href="test">test me</a> 
```

我拦截了链接的点击事件：

```
$('a[href=test]').click(function(e) {
  router.navigate('test');
  e.preventDefault(); }); 
```

当我点击链接时，没有发出请求，我相信拦截成功了。**但是没有触发事件。**

所以，请帮助我了解这是如何`History API`工作的。或者指出我哪里做错了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T03:41:13.863

你需要开启pushState：

`Backbone.history.start({pushState: true});`

您的链接将强制从您的服务器进行完全刷新，并且您的服务器必须响应该 url 的内容。

您需要拦截该链接的点击并告诉您的路由器导航到“测试”路由：

`myRouter.navigate("test");`

有关 HTML5 历史 API 的更多信息：http: [//diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)

有关将 pushState 与 Backbone 一起使用的一些介绍级别信息：

[http://lostechies.com/derickbailey/2011/09/26/seo-and-accessibility-with-html5-pushstate-part-1-introducing-pushstate/](http://lostechies.com/derickbailey/2011/09/26/seo-and-accessibility-with-html5-pushstate-part-1-introducing-pushstate/)

[http://lostechies.com/derickbailey/2011/09/26/seo-and-accessibility-with-html5-pushstate-part-2-progressive-enhancement-with-backbone-js/](http://lostechies.com/derickbailey/2011/09/26/seo-and-accessibility-with-html5-pushstate-part-2-progressive-enhancement-with-backbone-js/)

还有一个我提供的演示视频，涵盖了所有这些：

[http://lostechies.com/derickbailey/2011/10/06/seo-and-accessibility-with-html5-pushstate-part-3-the-video/](http://lostechies.com/derickbailey/2011/10/06/seo-and-accessibility-with-html5-pushstate-part-3-the-video/)

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:17:19.270

您需要将 {trigger: true} 添加到导航调用以实际触发路由事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-03T07:37:35.680

要表明您希望在应用程序中使用 HTML5 **pushState**`Backbone.history.start({pushState: true})`支持，请使用. 如果您想使用**pushState**，但浏览器本身不支持它，而是使用全页刷新，您可以添加`{hashChange: false}`到选项中。

**PS！**如果您的应用程序不是从`/`您的域的根 url 提供的，请务必告诉历史根的真正位置，作为一个选项（否则导航将不起作用！）：

```
Backbone.history.start({pushState: true, root: "/public/search/"}) 
```

# jquery-ui - 在页面上追加/添加后添加jquery ui功能可拖动/调整大小

> ID：10308931
> 
> 赞同：2
> 
> 时间：2012-04-25T03:25:23.453
> 
> 标签：jquery-ui, jquery-ui-draggable, jquery, jquery-ui-resizable

我的网页有问题，当用户单击特定按钮时，我正在文档中添加一个元素。

元素是

```
<div class="draggableResizable">
  Some text
</div> 
```

脚本.js

```
$('#button').click(function() {
  $("#pageWrap").append(element)
})

$('.draggableResizable').draggable().resizable() 
```

欢迎任何建议。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T03:31:14.730

只需重组，以便在添加元素后初始化小部件：

```
$('#button').click(function() {

    //create an element
    var $element = $('<div class="draggableResizable" />').text('some text');

    //append it to the DOM
    $("#pageWrap").append($element);

    //make it "draggable" and "resizable"
    $element.draggable().resizable();
}); 
```

这是一个演示：http: [//jsfiddle.net/ZSgBP/1/](http://jsfiddle.net/ZSgBP/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T03:37:32.793

如果您想在将对象添加到 DOM 之后将事件添加到对象，则需要使用 .on() 或 .live() 函数。如果您不想使用这些功能中的任何一个，您可以简单地将 div 添加到 HTML，然后在页面加载时将其隐藏并在其上调用 .show()。

# c++ - 用相同的值填充数组，循环重置值

> ID：10308932
> 
> 赞同：0
> 
> 时间：2012-04-25T03:25:37.707
> 
> 标签：c++, arrays, loops, numbers, constants

我正在开发一个编程项目（mancala）并且在编写数组时卡住了。我需要编写一个数组，用值 4 填充所有板箱，然后将两个箱重置为 0。到目前为止，我只有

{

```
 int i;
    int beadArray[MAX] = {4};

    for (i = 0; i < MAX; i++)
    {
           beadArray[i] = -1;
    }

    for (i = 0; i < MAX; i++)
    {
            cout<<i<<"\t";

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:28:31.860

```
int beadArray[MAX] = {4}; 
```

此行将第一个元素初始化为 4，其余元素初始化为 0，而不是全部为 4。

使用向量的东西将来会更容易处理和更好：

```
std::vector<int> beadArray (MAX, 4); //MAX elements, initialized to 4
beadArray [indexToReset1] = 0; //reset one element
beadArray [indexToReset2] = 0; //reset other element

//print array - C++11
for (int bead : beadArray)
    cout << bead << '\t';

//print array - C++03, consider using std::for_each instead
for (vector<int>::const_iterator it = beadArray.begin(); it != beadArray.end(); ++it)
    cout << *it << '\t'; 
```

* * *

**非矢量解决方案：**

如果没有向量，仍然可以使用 STL 算法：

```
int beadArray [MAX];

std::fill (beadArray, beadArray + MAX, 4);
beadArray [6] = beadArray [13] = 0; //just the two elements
std::fill (beadArray + 6, beadArray + 13, 0); //the range of elements from 6-13 
```

打印数组的一种更聪明的方法是使用 ostream 迭代器：

```
std::copy (beadArray, beadArray + MAX, std::ostream_iterator<int> (std::cout, "\t")); 
```

**只是简单的 C++：**

```
int beadArray [MAX];

for (int i = 0; i < MAX; ++i)
    beadArray [i] = 4; //set every element to 4

beadArray [6] = beadArray [13] = 0; //set elements 6 and 13 to 0

for (int i = 0; i < MAX; ++i)
    cout << beadArray [i] << '\t'; //print each element separated by tabs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T05:59:41.417

为什么指定要使用循环来填充索引 6 和 13？如果您只填写两个值，则不需要循环。

由于这仅适用于 mancala 游戏，如果您不需要使用大于 255 的数字（单个字节可以容纳的最大值），那么您可以使用 unsigned char 数组和 memset。

```
char beadArray[MAX];
memset( beadArray, 4, sizeof(beadArray));
beadArray[6] = beadArray[13] = 0;
for( int i = 0; i < sizeof(beadArray); i++)
    cout << beadArray[i] << "\t"; 
```

# php - 如何使用php检索数组值

> ID：10308935
> 
> 赞同：-1
> 
> 时间：2012-04-25T03:26:08.867
> 
> 标签：php, codeigniter

我想检索数组值。这是我的数组值：

覆盖.txt：

```
{"title":"sss","description":"sss","code":"sss"}
{"title":"trtr","description":"trtr","code":"tyrytr"}
{"title":"ret54","description":"56tr","code":"ty76"}
{"title":"rgfdg","description":"dfgdfg","code":"dfgdfg"}
{"title":"asfafdsf","description":"sdfsdf","code":"sdfsdfsdf"} 
```

这是我的代码：但这不起作用。为什么？如何从 overlay.txt 文件中检索值。我没有得到所有的标题值。我不知道如何从 overlay.txt 获取标题值 $title 显示为空。我想在我的代码中更改以获取 $title 值。

```
 $info = array();
    $folder_name = $this->input->post('folder_name');
    $info['title'] = $this->input->post('title');
    $info['description'] = $this->input->post('description');
    $info['code'] = $this->input->post('code');
    $json = json_encode($info);
    $file = "./videos/overlay.txt";
    $fd = fopen($file, "a"); // a for append, append text to file
    fwrite($fd, $json);
    fclose($fd); 
    $filecon = file_get_contents('./videos/overlay.txt', true);
    $this->load->view('includes/overlays',$filecon);

    //overlays page;
    foreach($filecon as $files)
    {
        $title=$files['title'];
        echo $title;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:50:25.100

您将数组*编码*为 JSON，因此在某些时候您需要再次将其*解码*为 PHP 数组。由于文件中实际上有多个 JSON 对象，因此您需要单独解码每个对象。*假设**每行*总是一个 JSON 对象，这将是：

```
$jsonObjects = file('overlay.txt', FILE_IGNORE_NEW_LINES);

foreach ($jsonObjects as $json) {
    $array = json_decode($json, true);
    echo $array['title'];
    ...
} 
```

如果序列化的 JSON 中有换行符，这将很快中断，例如：

```
{"title":"ret54","description":"foo
bar","code":"ty76"} 
```

这种存储数据的方式不是很可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T04:05:27.487

使 overlay.txt 完全 json 格式：

```
[
  {"title":"sss","description":"sss","code":"sss"},
  {"title":"trtr","description":"trtr","code":"tyrytr"},
  ...
] 
```

试试这个：

```
$raw = file_get_contents('./videos/overlay.txt', true);
$this->load->view('includes/overlays', array("filecon" => json_decode($raw))); 
```

叠加页面：

```
<?php
foreach($filecon as $files) {
    echo $files['title'];
}
?> 
```

如果要`$filecon`在视图文件中使用，请在第二个参数
中设置一个具有键“filecon”的数组。[http://codeigniter.com/user_guide/general/views.html](http://codeigniter.com/user_guide/general/views.html)`$this->load->view()`

# c++ - 为什么将 operator< 作为成员函数重载是不好的做法？

> ID：10308936
> 
> 赞同：1
> 
> 时间：2012-04-25T03:26:11.820
> 
> 标签：c++, algorithm, class, sorting, comparison

> **可能重复：**
> [运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading)
> [运算符重载：成员函数与非成员函数？](https://stackoverflow.com/questions/4622330/operator-overloading-member-function-vs-non-member-function)

经过多年明显滥用此构造后，有人向我指出这是不好的做法：

```
class SomeClass
{
    ...
    bool operator<(const SomeClass& other) const;
}; 
```

而这是一个很好的做法：

```
class SomeClass
{
    ...
};
bool operator<(const SomeClass& a, const SomeClass& b); 
```

但是我一生都无法弄清楚原因，也找不到任何关于差异的文档。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T04:24:27.383

首先，将操作符实现为成员函数没有任何优势，而将其作为自由函数实现可能会有优势。特别是，成员函数关于两个操作数的类型是不对称的，左侧（lhs）必须是调用它的类的确切类型，而右侧side (rhs) 可以使用隐式转换。在自由函数运算符的情况下，可以将相同的转换应用于 lhs 和 rhs。

```
struct SomeClass {
    SomeClass( int value );
    bool operator<( SomeClass const & ) const;
};
bool operator>( SomeClass const &, SomeClass const & );
int main() {
   SomeClass x( 10 );
   x < 100;             // Fine, lhs is SomeClass
   // 100 < x;          // Error, no operator< can take int as lhs and SomeClass
   x > 100;             // Fine
   100 > x;             // Also fine, lhs can take the same implicit conversions
} 
```

请注意，这里的主要区别是隐式转换，只有当您的类型可以从其他类型隐式转换时才会有所不同。如果没有隐式转换到您的类型，那么这一点将没有实际意义，但考虑到使用自由函数没有缺点并且在某些情况下有优势，我会尽可能使用自由函数。

我前段时间[在这里](http://definedbehavior.blogspot.com/2011/07/operator-overloading.html)写过关于运算符重载的文章，你可能会在那里找到一些建议。

# iis-7.5 - 无法使用 HttpClient 对 ASP.NET Web Api 服务进行身份验证

> ID：10308938
> 
> 赞同：39
> 
> 时间：2012-04-25T03:26:26.223
> 
> 标签：iis-7.5, windows-authentication, asp.net-mvc-4, asp.net-web-api, wcf-web-api

我有一个在启用了 Windows 身份验证的 Web 服务器上运行的 ASP.NET Web API 服务。

我有一个基于 MVC4 构建的客户端站点，该站点在使用 HttpClient 从服务中提取数据的同一 Web 服务器上的不同站点中运行。此客户端站点在启用身份模拟的情况下运行，并且还使用 Windows 身份验证。

Web 服务器是带有 IIS 7.5 的 Windows Server 2008 R2。

我面临的挑战是让 HttpClient 将当前 Windows 用户作为其身份验证过程的一部分传递。我以这种方式配置了 HttpClient：

```
var clientHandler = new HttpClientHandler();
clientHandler.UseDefaultCredentials = true;
clientHandler.PreAuthenticate = true;
clientHandler.ClientCertificateOptions = ClientCertificateOption.Automatic;
var httpClient = new HttpClient(clientHandler); 
```

我的理解是，在启用身份模拟的情况下运行站点，然后以这种方式构建客户端应该会导致客户端使用当前登录用户的模拟身份对服务进行身份验证。

这没有发生。事实上，客户端似乎根本没有进行身份验证。

该服务配置为使用 Windows 身份验证，这似乎工作得很好。我可以在我的网络浏览器中访问[http://server/api/shippers](http://server/api/shippers)并被提示进行 Windows 身份验证，一旦进入我就会收到请求的数据。

在 IIS 日志中，我看到在没有身份验证的情况下收到 API 请求并收到 401 质询响应。

关于这个的文档似乎很少。

我需要深入了解在此应用程序中使用 Windows 身份验证可能出现的问题或其他方式。

谢谢你，克雷格

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-25T08:14:06.997

我调查了 HttpClientHandler 的源代码（我能够得到的最新版本），这可以在 SendAsync 方法中找到：

```
// BeginGetResponse/BeginGetRequestStream have a lot of setup work to do before becoming async
// (proxy, dns, connection pooling, etc).  Run these on a separate thread.
// Do not provide a cancellation token; if this helper task could be canceled before starting then 
// nobody would complete the tcs.
Task.Factory.StartNew(startRequest, state); 
```

现在，如果您在代码中检查 SecurityContext.IsWindowsIdentityFlowSuppressed() 的值，您很可能会得到正确的结果。结果，StartRequest 方法使用 asp.net 进程的凭据（不是模拟用户的凭据）在新线程中执行。

有两种可能的方法。如果您有权访问您的服务器 aspnet_config.config，则应设置以下设置（在 web.config 中设置这些设置似乎没有效果）：

```
<legacyImpersonationPolicy enabled="false"/>
<alwaysFlowImpersonationPolicy enabled="true"/> 
```

如果您无法更改 aspnet_config.config，则必须创建自己的 HttpClientHandler 来支持这种情况。

**关于 FQDN 使用的更新**

您在此处遇到的问题是 Windows 中旨在防止“反射攻击”的功能。要解决此问题，您需要在尝试访问服务器的计算机上将您尝试访问的域列入白名单。请按照以下步骤操作：

1.  转到开始 --> 运行 --> regedit
2.  找到`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa\MSV1_0`注册表项。
3.  右键单击它，选择*New*，然后选择*Multi-String Value*。
4.  键入`BackConnectionHostNames`( *ENTER* )。
5.  右键单击刚刚创建的值并选择*Modify*。
6.  将本地计算机上站点的主机名放入值框中，然后单击*确定*（每个主机名/FQDN 需要在自己的行上，没有通配符，名称必须完全匹配） .
7.  保存所有内容并重新启动机器

[您可以在此处](http://support.microsoft.com/kb/896861)阅读有关该问题的完整知识库文章。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-01T14:25:51.803

我也有同样的问题。感谢@tpeczek 所做的研究，我开发了以下解决方案：我没有使用 HttpClient（它创建线程并异步发送请求），而是使用了在同一个线程上发出请求的 WebClient 类。这样做使我能够将用户的身份从另一个 ASP.NET 应用程序传递给 WebAPI。

明显的缺点是这不会异步工作。

```
var wi = (WindowsIdentity)HttpContext.User.Identity;

var wic = wi.Impersonate();
try
{
    var data = JsonConvert.SerializeObject(new
    {
        Property1 = 1,
        Property2 = "blah"
    });

    using (var client = new WebClient { UseDefaultCredentials = true })
    {
        client.Headers.Add(HttpRequestHeader.ContentType, "application/json; charset=utf-8");
        client.UploadData("http://url/api/controller", "POST", Encoding.UTF8.GetBytes(data));
    }
}
catch (Exception exc)
{
    // handle exception
}
finally
{
    wic.Undo();
} 
```

**注意：**需要 NuGet 包：Newtonsoft.Json，它与 WebAPI 使用的 JSON 序列化程序相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:20:08.860

The reason why this is not working is because you need double hop authentication.

The first hop is the web server, getting impersonation with Windows authentication to work there is no problem. But when using HttpClient or WebClient to authenticate you to another server, the web server needs to run on an account that has permission to do the necessary delegation.

See the following for more details:
[http://blogs.technet.com/b/askds/archive/2008/06/13/understanding-kerberos-double-hop.aspx](http://blogs.technet.com/b/askds/archive/2008/06/13/understanding-kerberos-double-hop.aspx)

Fix using the "setspn" command:
[http://www.phishthis.com/2009/10/24/how-to-configure-ad-sql-and-iis-for-two-hop-kerberos-authentication-2/](http://www.phishthis.com/2009/10/24/how-to-configure-ad-sql-and-iis-for-two-hop-kerberos-authentication-2/) (You will need sufficient access rights to perform these operations.)

Just consider what would happen if any server was allowed to forward your credentials as it pleases... To avoid this security issue, the domain controller needs to know which accounts are allowed to perform the delegation.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-11T08:24:59.203

要模拟原始（经过身份验证的）用户，请在 Web.config 文件中使用以下配置：

```
<authentication mode="Windows" />
<identity impersonate="true" /> 
```

使用此配置，ASP.NET 始终模拟经过身份验证的用户，并且所有资源访问都使用经过身份验证的用户的安全上下文执行。

# python - 列表推导拆分循环变量

> ID：10308939
> 
> 赞同：22
> 
> 时间：2012-04-25T03:26:29.673
> 
> 标签：python, split, list-comprehension

我试图找出是否有一种方法可以将列表理解的每次迭代的值拆分一次，但在输出中使用两次。

作为我要解决的问题的一个示例，我有以下字符串：

```
a = "1;2;4\n3;4;5" 
```

我想执行此操作：

```
>>> [(x.split(";")[1],x.split(";")[2]) for x in a.split("\n") if x.split(",")[1] != 5]
[('2', '4'), ('4', '5')] 
```

无需运行拆分三遍。所以是这样的（这显然是无效的语法，但希望足以传达信息）：

```
[(x[1],x[2]) for x.split(";") in a.split("\n") if x[1] != 5] 
```

在这个问题中，我**不是**在寻找花哨的方法来获取字符串的第二列和第三列。这只是提供具体示例的一种方式。对于示例，我当然可以使用：

```
[x.split(";")[1:3] for x in a.split("\n")] 
```

我想到的可能的解决方案：

1.  不使用列表理解
2.  保持原样
3.  使用`csv.DictReader`, name my columns 之类的东西`StringIO`给它输入。

这主要是一种可以使用的很好的模式，而不是特定的情况，所以很难回答“你为什么要这样做”或“这是为了什么”之类的问题

**更新：**在阅读了下面的解决方案后，我进行了一些速度测试。我在非常基本的测试中发现，提供的解决方案比上面的简单解决方案快 35%。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-25T03:31:47.163

您可以使用包含在生成器表达式周围的列表推导：

```
[(x[1],x[2]) for x in (x.split(";") for x in a.split("\n")) if x[1] != 5] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-04-27T15:41:27.757

开始`Python 3.8`，并引入[赋值表达式（PEP 572）](https://www.python.org/dev/peps/pep-0572/)（`:=`运算符），可以在列表推导中使用局部变量以避免调用两次相同的表达式：

在我们的例子中，我们可以将 的求值命名`line.split(';')`为变量`parts`，同时使用表达式的结果来过滤列表 if`parts[1]`不等于`5`; 并因此重新使用`parts`以产生映射值：

```
# text = '1;2;4\n3;4;5'
[(parts[1], parts[2]) for line in text.split('\n') if (parts := line.split(';'))[1] != 5]
# [('2', '4'), ('4', '5')] 
```

# python - 在qlayout pyqt4 python中删除项目时出错

> ID：10308943
> 
> 赞同：0
> 
> 时间：2012-04-25T03:27:11.427
> 
> 标签：python, pyqt4

self.ui.verticalLayout.addWidget(MainWindow(self)) 正在工作，但是在尝试删除小部件时收到错误消息。

TypeError：QLayout.removeWidget（QWidget）：参数 1 具有意外类型“PyQt4.QtCore.pyqtWrapperType”

以下是示例代码：

我有这个单独的 .py 文件来使用 qtableview 创建小部件

```
class MyWindow(QWidget):
    pcobject =[]
    def __init__(self, *args):
        QWidget.__init__(self, *args)
        layout = QVBoxLayout(self)
        self.tableview = QTableView()
        layout.addWidget(self.tableview)
........ 
```

并将 .py 与垂直布局分开以添加 MyWindow 类。

- 编辑

```
from tableview import MyWindow

class QTEST(QtGui.QMainWindow):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)
        self.table = MyWindow
        self.ui = Ui_MainWindow()
        self.ui.setupUi(self)

        self.ui.verticalLayout.addWidget(self.table))
        self.ui.gridLayout.addLayout(self.ui.verticalLayout, 1, 0, 1, 1)
        self.connect(self.ui.pushButton_15, QtCore.SIGNAL("clicked()"), self.table_view )

    def table_view(self):

        #import sip

        self.ui.verticalLayout.removeItem(self.table)

        #self.table.setParent(None)
        #sip.delete(self.table)
        #self.table = None

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    myapp = QTEST() 
    myapp.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T06:57:42.403

`QTEST.table`设置为`MyWindow`类，而不是实例。您需要添加括号：`self.table = MyWindow()`

作为参考，`PyQt4.QtCore.pyqtWrapperType`它是所有 PyQt4 类的基本类型，因此如果您看到此错误，通常意味着您正在使用类而不是实例进行操作。

# php - 在php foreach中连接字符串

> ID：10308948
> 
> 赞同：0
> 
> 时间：2012-04-25T03:28:02.283
> 
> 标签：php

我应该能够弄清楚这一点，但我一直在绕圈子。我有一个带有复选框的表格。当复选框被选中时，它们被标记为被删除。

我用 foreach 处理那些选中的复选框：

```
foreach (array_keys($_POST['checkboxselect']) as $k) {
    $str .= $k.',';
} 
```

这是我将视频列表放在一起的蹩脚尝试。我正在使用的 sql delete 是：

```
DELETE FROM `videos` WHERE `video_name` IN ($str) 
```

所以我在这里错过了很多东西。`$str`需要具备：

1.  只返回一个复选框，因此返回带引号的字符串（即“myvideo.mp4”）
2.  选择了多个复选框，因此使用引号和逗号构建一个字符串（即“myvideo.mp4”、“myvideo2.mp4”、“myvideo3.mp4”）

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:31:37.377

像这样使用`implode()`：

```
$str = '"' . implode('","', array_keys($_POST['checkboxselect'])) . '"'; 
```

`implode()`将采用一个数组并将数组中的每个值与“胶水”字符串连接起来。在这种情况下，“胶水”是`","`并且数组由 中的键组成`$_POST['checkboxselect']`。最后，生成的字符串被包裹在`"`.

这将产生您想要的示例字符串`"myvideo.mp4","myvideo2.mp4","myvideo3.mp4"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T03:35:57.267

尝试使用 PHP 的[implode](http://us.php.net/implode)：

```
// Init links
$mysqliLink = mysqli_connect('host', 'user', 'password') or die('Could not connect: ' . mysqli_error());

$mysqlLink = mysql_connect('host', 'user', 'password') or die('Could not connect: ' . mysql_error());

//-----
// Prep values for query
//-----

// Only pick one of the following depending upon the mysql library you are using

// If using mysql, passing the 2nd argument is not necessary, but for 
// clarity, adding it
$deleteNames = array_map('mysql_real_escape_string', array_keys($_POST['checkboxselect']), array_fill(0, count($_POST['checkboxselect']), $mysqlLink));

// If using mysqli
// This will ensure that $mysqliLink will be passed in as first arg for 
// every iteration satisfying the function signature
$deleteNames = array_map('mysqli_real_escape_string', array_fill(0, count($_POST['checkboxselect']), $mysqliLink), array_keys($_POST['checkboxselect']));
//-----

// Because you are passing strings, we need to ensure each is wrapped in quotes
$deleteNames = "'" . implode("','", $deleteNames) . "'";

// Construct query using implode
$sql = sprintf('DELETE FROM `videos` WHERE `video_name` IN (%s)', $deleteNames); 
```

**- 更新 -**

使用 Joomla API：

```
$db = &JFactory::getDBO();

// Localize and sanitize each individual value
foreach (array_keys($_POST['checkboxselect']) as $element) {
    $deleteNames[] = $db->quote($element);
}

// Because you are passing strings, we need to ensure each is wrapped in quotes
// No longer true because $db->quote taking care of quoting out each name for us
$deleteNames = implode(',', $deleteNames);

// Construct query using implode
$sql = sprintf('DELETE FROM `videos` WHERE `video_name` IN (%s)', $deleteNames); 
```

# ruby - 在 Mule Studio 中使用 jruby-openssl

> ID：10308951
> 
> 赞同：1
> 
> 时间：2012-04-25T03:28:10.537
> 
> 标签：ruby, openssl, jruby, mule, jsr223

我需要在 Mule Studio 的 Ruby 中使用 openssl。Mule Studio 预装了 JRuby。我相信您知道，JRuby 不包含 openssl。我下载了 jruby-openssl gem 并将这些文件包含在我的 Mule 项目中。我可以要求这些文件，除了 jopenssl.jar。实际上我*可以*要求它，但它似乎没有做任何事情。我看到以下错误：

```
uninitialized constant OpenSSL::Digest::OPENSSL_VERSION_NUMBER 
```

这当然是指`OpenSSL::OPENSSL_VERSION_NUMBER`.

只是为了好玩，我手动定义了它，但随后它不断发现越来越多的未初始化常量。我读过一些文章说使用 jruby-openssl 的唯一方法是解压缩并组合 jruby-complete.jar 和 jopenssl.jar。由于 Mule 使用的是自己的 JRuby 副本，所以这是不可行的，更不用说荒谬的组合了。

那么请问，有人知道如何在 Mule Studio 中使用 jruby-openssl 吗？（仅供参考，我对 Mule 和 JRuby 都是新手，但我很快就学会了不喜欢两者。）

**附录**

一点背景知识：我们需要使用 Mule 通过 FTPS 传输文件。由于不直接支持它，而且我们有一个现有的 Ruby 实现，我们决定将 Ruby 代码简单地移动到 Mule 中。但它需要openssl，这就是这个问题的开始。上面的`require 'openssl'`行是触发错误的原因。

以下是相关的 Mule/Ruby 代码：

```
<scripting:transformer name="SetData" doc:name="Set Data">
    <scripting:script engine="jruby">
        <scripting:text><![CDATA[
          require 'socket'
          require 'openssl'
          require 'net/ftp'
          require 'implicit_ftps'
          ...
        ]]></scripting:text>
    </scripting:script>
</scripting:transformer> 
```

根据您的建议，我重建了 Mule 环境库，替换为包含 jopenssl.jar 的新 JRuby 版本。但是，我现在在运行我的应用程序时收到以下错误。据我所知，除了jruby-complete.jar，其他都没有改变。

```
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/home/consolo/bin/MuleStudio/plugins/org.mule.tooling.server.3.2.1_1.0.0.201201200937/mule/boot/mule-module-logging-3.2.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/home/consolo/bin/MuleStudio/plugins/org.mule.tooling.server.3.2.1_1.0.0.201201200937/mule/boot/mule-module-logging-3.2.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation. 
```

**更新**

可悲的是，经过几天的努力，我的公司认为通过 Mule 支持 FTPS 是不值得的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:11:56.607

Mule 中的脚本语言支持是可插入的，并通过符合 JSR-223 的提供程序实现。Mule CE 仅嵌入了 Groovy，即您必须[将 JRuby 添加](http://kenai.com/projects/jruby/pages/JavaIntegration#Java_6_%28using_JSR_223%3a_Scripting%29)到 Mule，这将使您有机会选择实现目标所需的任何 JAR。

另一方面，Mule Studio 嵌入了额外的脚本提供程序，包括 JRuby。这很方便，但如果需要特定版本（这似乎是您的情况），可能会产生问题。

在 Studio 中，如果您打开 Mule Runtime 库，您会发现*jruby-engine-1.1-jdk14.jar*和*jruby-complete-1.0.jar*。不幸的是 Studio 不允许修改这个库，所以你最好的选择是创建一个新的，选择`/plugins/org.mule.tooling.server.3.2.1_1.0.0.201201200937/mule`除 jRuby 之外的所有 JAR（在 中`./user`），然后添加你真正需要的。

# android - 非常混乱，如果在上一次调用后过早调用，翻译动画不会完成

> ID：10308954
> 
> 赞同：0
> 
> 时间：2012-04-25T03:28:19.207
> 
> 标签：android, animation

**解决见下文**

我有一个类似进度条的动画。我有一个用于启动此动画的硬件脚踏板。预期的结果是：
脚下降，进度增加，直到脚松开。如果我保持脚踩进度从 0 到 100% 动画距离（屏幕宽度）下一次我这样做同样适用。
但是：
如果我在动画完成之前松开脚（比如 20%），那么下次我踩下并按住踏板时，动画将不会一直运行到最后，并且会在大约 80% 处停止（至我可以看出两者之间有关系，但可能只是睡眠不足！）
另外：如果我在短时间（20%）踩下踏板后等待几秒钟，那么下一个动画将按预期运行。我已经在下面发布了代码。

知道发生了什么吗？我在姜饼的三星 Galaxy S 上。

```
public void startPedalProgress(int color){
    pedal_down_progress.setBackgroundColor(color);
    pedal_down_progress.clearAnimation();
    Animation progressAnim = AnimationUtils.loadAnimation(this, R.anim.pedal_progress);
    progressAnim.setDuration(3000);
    pedal_down_progress.setVisibility(LinearLayout.VISIBLE);
    pedal_down_progress.startAnimation(progressAnim);
}
public void stopPedalProgress(){
    pedal_down_progress.clearAnimation();
} 
```

和我的动画

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:shareInterpolator="false">
  <translate
   android:fromXDelta="0%" android:toXDelta="100%"
   android:fromYDelta="0%" android:toYDelta="0%"
   android:duration="3000" />
</set> 
```

我尝试过声明`progressAnim`为全局并调用`progressAnim.cancel()`...仍然是完全相同的结果。我也尝试过使用动态创建的动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:43:38.227

Aargh!, apologies everyone. I finally realised what I was doing wrong! I had a timer task set to cancel the animation with the same delay as the animation but I was forgetting to cancel this on a footpedal release. Many thanks. J

# sweave - 如何在 sweave 中减小图像尺寸？

> ID：10308955
> 
> 赞同：4
> 
> 时间：2012-04-25T03:28:19.440
> 
> 标签：sweave

如何在 sweave 中减小图像尺寸？

```
\documentclass[a4paper]{article}

\title{Sweave Example 1}
\author{Friedrich Leisch}

\begin{document}

\maketitle

In this example we embed parts of the examples from the
\texttt{kruskal.test} help page into a \LaTeX{} document:

<<>>=
data(airquality)
library(ctest)
kruskal.test(Ozone ~ Month, data = airquality)
@
which shows that the location parameter of the Ozone 
distribution varies significantly from month to month. Finally we
include a boxplot of the data:

\begin{center}
<<fig=TRUE,echo=FALSE>>=
boxplot(Ozone ~ Month, data = airquality) ## reduce image size so that can fit in window.
@
\end{center}

\end{document} 
```

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T13:47:05.910

尝试[knitr](http://yihui.name/knitr/)代替 Sweave。请参阅`out.width`和`out.height` [选项](http://yihui.name/knitr/options#chunk_options)。

您的示例如下所示：

```
\documentclass[a4paper]{article}

\title{Sweave Example 1}
\author{Friedrich Leisch}

\begin{document}

\maketitle

In this example we embed parts of the examples from the
\texttt{kruskal.test} help page into a \LaTeX{} document:

<<>>=
data(airquality)
library(ctest)
kruskal.test(Ozone ~ Month, data = airquality)
@
which shows that the location parameter of the Ozone 
distribution varies significantly from month to month. Finally we
include a boxplot of the data:

<<plot,fig.align="center",out.width="0.8\\linewidth",echo=FALSE>>=
boxplot(Ozone ~ Month, data = airquality) ## reduce image size so that can fit in window.
@

\end{document} 
```

# playframework - 玩！总是加载初始数据

> ID：10308956
> 
> 赞同：1
> 
> 时间：2012-04-25T03:28:21.953
> 
> 标签：playframework, playframework-1.x

我的 Bootstrap.java 是：

```
@OnApplicationStart
public class Bootstrap extends Job {

    public void doJob() {
        // Check if the database is empty
        System.out.println("========================================================" + User.count());
        if(User.count() == 0) {
            Fixtures.loadModels("initial-data.yml");
        }
        System.out.println("========================================================" + User.count());
    }
} 
```

每次我重新启动应用程序时，数据库都会被清理，然后`User.count()`是 0，所以它重新加载了初始数据，而我所有的更改都`User`丢失了。有谁能够帮我？谢谢。

**编辑**：

在 application.conf 中，我将我的数据库设置为：

```
%server01.application.mode=PROD
%server01.db=mysql:root:secret@dbname
%server01.jpa.ddl=create
%server01.XForwardedSupport=127.0.0.1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T06:51:04.457

在您的 conf 中，尝试将 ddl 生成设置为`update`（或`validate`）而不是`create`：

```
%server01.jpa.ddl=update 
```

看看[这个文档](http://www.playframework.org/documentation/1.1.1/guide11)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T03:30:16.643

数据库可能设置在内存中。请检查 application.conf 并使用持久数据库。

如果我记得你只需要取消注释几行。

# java - 是内存泄漏吗？

> ID：10308965
> 
> 赞同：2
> 
> 时间：2012-04-25T03:29:42.367
> 
> 标签：java, memory-leaks

我构建了一个示例程序来演示 java 中的内存泄漏。

```
public class MemoryLeakTest {
     static int depth = 0;
     int number=0;
     MemoryLeakTest mobj;

     MemoryLeakTest(){
      number = depth;
      if(depth < 6500){
          depth++;
          mobj = new MemoryLeakTest();
      }
     }

     protected void finalize(){
      System.out.println(number + " released.");
     }

    public static void main(String[] args) {
        try{
             System.out.println(ManagementFactory.getMemoryMXBean().getHeapMemoryUsage());
             System.out.println("Free Memory in starting "+ Runtime.getRuntime().freeMemory());
             MemoryLeakTest testObj = new MemoryLeakTest();
             System.out.println("Free Memory in end "+ Runtime.getRuntime().freeMemory());
             System.out.println(ManagementFactory.getMemoryMXBean().getHeapMemoryUsage());
        }
        catch(Exception exp){}
        finally{
            System.out.println("Free Memory"+ Runtime.getRuntime().freeMemory());
            System.out.println(ManagementFactory.getMemoryMXBean().getHeapMemoryUsage());
        }
    }

} 
```

我通过更改 N in 的值来运行它`if(depth < N)`。这是结果；

**当深度为 1000 时**

初始化 = 16777216(16384K) 已使用 = 288808(282K) 已提交 = 16252928(15872K) 最大值 = 259522560(253440K) 开始时的可用内存 15964120 结束时的可用内存 15964120 初始化 = 16777216(16384K) 已使用 = 828 (1628829222) 15872K) 最大值 = 259522560(253440K) 可用内存 15964120 初始化 = 16777216(16384K) 已使用 = 288808(282K) 已提交 = 16252928(15872K) 最大值 = 259522560(253440K)

**当深度为 1500 时**

初始化 = 16777216(16384K) 已使用 = 288808(282K) 已提交 = 16252928(15872K) 最大值 = 259522560(253440K) 开始时的可用内存 15964120 结束时的可用内存 15964120 初始化 = 16777216(16384K) 已使用 = 828 (1628829222) 15872K) 最大值 = 259522560(253440K) 可用内存 15873528 初始化 = 16777216(16384K) 已使用 = 379400(370K) 已提交 = 16252928(15872K) 最大值 = 259522560(253440K)

**当深度为 6000**

初始化 = 16777216(16384K) 已使用 = 288808(282K) 已提交 = 16252928(15872K) 最大值 = 259522560(253440K) 开始时的可用内存 15964120 结束时的可用内存 15692784 初始化 = 16777216(16777216(16384K) 已使用 = 82145947 已提交 = 82145947 15872K) 最大值 = 259522560(253440K) 可用内存 15692784 初始化 = 16777216(16384K) 已使用 = 560144(547K) 已提交 = 16252928(15872K) 最大值 = 259522560(253440K)

**当深度为 6500 时（线程“main”java.lang.StackOverflowError 中的异常）**

初始化 = 16777216(16384K) 已使用 = 288808(282K) 已提交 = 16252928(15872K) 最大值 = 259522560(253440K) 开始时的可用内存 15964120 结束时的可用内存 15676656 初始化 = 16777216(16384K) 已使用 = 826(252562) (=576) 15872K) 最大值 = 259522560(253440K)

我的问题是；

1.  它没有调用 finalize()。是内存泄漏吗？
2.  在 N=1000 之前，可用内存没有变化。但是当 N=1500 时，程序末尾的已用内存有 2 个不同的值，即 282K 和 370K。为什么会这样？
3.  当 N=6500 时，JVM 产生错误。那么为什么要执行 try{} 的最后两条语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:40:10.267

> 它没有调用 finalize()。是内存泄漏吗？

不保证会调用 Finalize，当垃圾收集器收集给定对象时调用它，但不保证在执行结束之前收集对象。

> 在 N=1000 之前，可用内存没有变化。但是当 N=1500 时，在程序结束时有 2 个不同的值>用于已用内存，即 282K 和 370K。为什么会这样？

我认为这取决于垃圾收集器的执行以及它被执行的时刻。

> 当 N=6500 时，JVM 产生错误。那么为什么要执行 try{} 的最后两条语句。

这是因为你没有捕捉到异常，因为从`StackOverflowError`那里继承`Error`不是异常继承分支的一部分，而是 的兄弟`Exception`，无论如何你在 catch 中没有代码，你的最后两个方法没有被执行，因为异常已被抛出。

总而言之，您没有产生内存泄漏，当您在某个时刻从执行流中引用（直接或间接）可访问的对象时，Java 中会发生内存泄漏，例如，您将对象存储在可以访问的集合中，或单例。

垃圾收集器本身足够聪明，可以释放程序根本无法访问的对象图。

希望我能说清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T03:45:29.617

> 它没有调用 finalize()。是内存泄漏吗？

不，没有内存泄漏，您始终保持对对象的可访问引用，这就是永远不会在您的应用程序中调用`testObj`的原因。`finalize`

您在应用程序中所做的只是创建一个巨大的对象图。

[在这里](https://stackoverflow.com/questions/6470651/creating-a-memory-leak-with-java)您可以找到如何在 java 中创建真正的内存泄漏的说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T03:48:31.730

您的程序不会“泄漏”，因为 Java 会处理任何“悬空”的东西。这就是垃圾收集语言的好处。

但是您所拥有的是 StackOverFlow 错误。基本上，堆栈（这是您所在的函数链，以及它的深度）比堆小得多。堆“或多或少”是主内存的大小。每个线程的堆栈要小得多。基本上你通过做你的“深度”事情达到了这个极限。

如果您想测试“泄漏”（或您最终不会有任何泄漏的想法），请尝试类似这样的操作：

```
public class MemoryLeakTest {
     int number=0;
     public MemoryLeakTest mobj;

     MemoryLeakTest(int num){
        number = num;
     }

     protected void finalize(){
        System.out.println(number + " released.");
     }

    public static void main(String[] args) {
        try{
             System.out.println(ManagementFactory.getMemoryMXBean().getHeapMemoryUsage());
             System.out.println("Free Memory in starting "+ Runtime.getRuntime().freeMemory());
             MemoryLeakTest first = new MemoryLeakTest(0);  // Keep a reference to one of them
             MemoryLeakTest current = first;
             for(int i = 1; i < Int.Parse(args[0]); i++) // forgive me, Java's been a while.  This may be C#.  But parse the first arg for your number of objects
             {
                 current.mobj = new MemoryLeakTest(i);
                 current = current.mobj;
             }
             System.out.println("Free Memory in end "+ Runtime.getRuntime().freeMemory());
             System.out.println(ManagementFactory.getMemoryMXBean().getHeapMemoryUsage());
        }
        catch(Exception exp){}
        finally{
            System.out.println("Free Memory"+ Runtime.getRuntime().freeMemory());
            System.out.println(ManagementFactory.getMemoryMXBean().getHeapMemoryUsage());
        }
    }

} 
```

这将为您提供所有在内存中的对象“链”，直到`first`超出范围。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T03:52:30.370

大多数答案已经解释了 StackOverflowError 和内存泄漏之间的区别。

*   在 N=1000 之前，可用内存没有变化。但是当 N=1500 时，程序末尾的已用内存有 2 个不同的值，即 282K 和 370K。为什么会这样？

*   这是因为每次您创建新对象并且以前的 obj 变得无法访问（没有引用，覆盖引用），因此可以在需要时释放。

到目前为止，使 jvm 内存不足（不是泄漏）的最简单示例。

```
public class PrintSeries {

private static String COMMA = ",";
private StringBuilder buildStream;// = new StringBuilder();

public static void main(String[] args) {
    System.out.println(new PrintSeries().convert(10));
    System.out.println(new PrintSeries().convert(1000000000));
}

private String convert(int n) {
    buildStream = new StringBuilder();

    while (n > 1) {
        buildStream.append(n-- + COMMA);
    }
    buildStream.append(n);
    return buildStream.toString();
   }
} 
```

*   输出

    10,9,8,7,6,5,4,3,2,1 线程“主”java.lang.OutOfMemoryError 中的异常：java.util.Arrays.copyOf(Arrays.java:2882) 处的 Java 堆空间java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100) 在 java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390) 在 java.lang.StringBuilder.append(StringBuilder.java:119) 在 com.cctest.algotest .string.PrintSeries.convert(PrintSeries.java:17) 在 com.cctest.algotest.string.PrintSeries.main(PrintSeries.java:10)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T03:33:05.550

这不是内存泄漏的证据。程序抛出`StackOverflowError`不`OutOfMemoryError`。事实上，构造函数正在递归调用自身，当递归调用的数量超过某个较大的数字（6,000 到 6,500 之间）时，**堆栈**空间就会用完。

> 它没有调用 finalize()。是内存泄漏吗？

不。 finalize() 方法很可能没有被调用，因为 GC 还没有运行。它没有运行，因为你还没有填满堆。即使这不是真正的解释，也不能保证该`finalize()`方法会被调用。您拥有的唯一绝对保证是在 JVM 重用对象的内存*之前*`finalize()`将调用它。

 *> 在 N=1000 之前，可用内存没有变化。但是当 N=1500 时，程序末尾的已用内存有 2 个不同的值，即 282K 和 370K。为什么会这样？

我不确定为什么会发生这种情况，但我不认为这表明任何重要的事情。（在 JVM 的底层发生了各种各样的事情，这些事情可能是内存分配和使用模式等不确定性的来源。）

> 当 N=6500 时，JVM 产生错误。那么为什么要执行 try{} 的最后两条语句。

中的语句`finally`总是被执行，除非 JVM 突然终止。当`StackOverflowError`被抛出时，它会像任何其他异常一样传播，并且可以被捕获并从中恢复（在某些情况下）。*

# c# - 没有收到来自 SslStream.read 的响应

> ID：10308968
> 
> 赞同：3
> 
> 时间：2012-04-25T03:30:46.150
> 
> 标签：c#, asp.net, ssl, gmail

我正在尝试做一个简单的 Gmail 客户端。问题是我得到了一个非常奇怪的回应。实际上我根本没有得到回应`SslStream.read`。首先，当我作为客户端连接到 gmail 服务器时，它可以正常工作（`Connect()`方法），但是当我尝试从电子邮件中获取号码时，再次使用`SslStream.read`with`leerMensaje()`方法时，它变得很奇怪并且停止运行，并且网页卡住了加载。

这是我正在学习的课程：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Net;
using System.Net.Sockets;
using System.Net.Security;
using System.Text;
using System.Net.Mail;

namespace GmailClient
{
    public class GmailPop
    {
        private SslStream sslStream;
        private String user;
        private String pass;

        public GmailPop(String user, String pass)
        {
            this.user = user;
            this.pass = pass;
        }

        public bool Connect()
        {
            String response;
            byte[] buffer = new byte[2048];
            int bytes = -1;
            TcpClient server = new TcpClient("pop.gmail.com", 995);
            sslStream = new SslStream(server.GetStream());
            sslStream.AuthenticateAsClient("pop.gmail.com");
            bytes = sslStream.Read(buffer, 0, buffer.Length);
            response = Encoding.ASCII.GetString(buffer,0,bytes);
            sslStream.Write(Encoding.ASCII.GetBytes("USER recent:" + user+"\r\n"));
            bytes = sslStream.Read(buffer, 0, buffer.Length);
            response = Encoding.ASCII.GetString(buffer,0,bytes);
            if(response.StartsWith("+OK")){
                sslStream.Write(Encoding.ASCII.GetBytes("PASS "+pass+"\r\n"));
                bytes = sslStream.Read(buffer,0,buffer.Length);
                response = Encoding.ASCII.GetString(buffer, 0, bytes);
                return response.StartsWith("+OK");
            }
            return false;
        }
        public int numCorreos()
        {
            String res = escribirLeer("STAT");
            String[] resA = res.Split(' ');
            int num = Int32.Parse(resA[1]);
            return num;
        }
        public String leerMensaje()
        {
            int bytes = -1;
            byte[] buffer = new byte[2048];
            String msg = "";
            do
            {
                bytes = sslStream.Read(buffer, 0, buffer.Length);
                msg += Encoding.ASCII.GetString(buffer, 0, bytes);
            } while (bytes != 0);
            return msg;
        }
        public void escribirMsg(String msg)
        {
            byte[] buffer = Encoding.ASCII.GetBytes(msg);
            sslStream.Write(buffer);
            sslStream.Flush();
        }
        public String escribirLeer(String msg)
        {
            escribirMsg(msg);
            String respuesta = leerMensaje();
            return respuesta;
        }
    }
} 
```

这是调用该方法的aspx网页：

```
GmailPop client;
        protected void Page_Load(object sender, EventArgs e)
        {
            if (Session["user"] != null && Session["pass"] != null)
            {
                String user = Session["user"].ToString();
                String pass = Session["pass"].ToString();

                client = new GmailPop(user, pass);

                if (client.Connect())
                {                    
                    Session["active"] = true;
                    Response.Write(numCorreos());
                }
                else
                {
                    Session.Remove("pass");
                    Response.Redirect("login.aspx?error=login");
                }
            }
            else
            {
                Response.Redirect("login.aspx");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:19:43.123

第一个问题是您将“STAT”作为命令发送，但所有命令都必须以“\r\n”结尾，因此您需要发送“STAT\r\n”。

看来您还通过 0 from 的返回码推断消息的结尾`sslStream.Read(...)`，但是在流关闭之前，此方法不会返回 0。在没有更多数据等待读取的情况下，`Read()`将阻塞，等待更多数据到达，这解释了您所看到的挂起。

根据[POP3 协议规范](http://www.faqs.org/rfcs/rfc1939.html)，对于单行响应，您应该等待一个“\r\n”序列来指示响应的结束，以及那些导致多行响应的命令（例如检索消息数据)，响应由单个“。”终止。单独一行（即该行以“.\r\n”开头）。处理包含此终止序列的消息还有其他规则，因此我建议您自己阅读协议规范。

# python - 用Python中的正则表达式匹配日期？

> ID：10308970
> 
> 赞同：8
> 
> 时间：2012-04-25T03:31:03.897
> 
> 标签：python, regex, date, matching

我知道已经回答了与我类似的问题，但在阅读完这些问题后，我仍然没有我正在寻找的解决方案。

使用 Python 3.2.2，我需要将“月、日、年”与“月”作为字符串进行匹配，“日”是二月不超过 30、31 或 28 的两位数，闰年二月是不超过 29 的两位数。（基本上是真实有效的日期）

这是我到目前为止所拥有的：

```
pattern = "(January|February|March|April|May|June|July|August|September|October|November|December)[,][ ](0[1-9]|[12][0-9]|3[01])[,][ ]((19|20)[0-9][0-9])"
expression = re.compile(pattern)
matches = expression.findall(sampleTextFile) 
```

我仍然不太熟悉正则表达式语法，所以我可能有一些不必要的字符（逗号和空格的 [,][ ] 感觉像是错误的处理方式），但是当我尝试匹配“ 1991 年 1 月 26 日”在我的示例文本文件中，“匹配”中的项目的打印结果是 ('January', '26', '1991', '19')。

为什么最后会出现额外的“19”？

另外，我可以在我的正则表达式中添加或更改哪些内容，以使我能够正确验证日期？我现在的计划是接受几乎所有的日期，然后通过将日期分组与月份和年份分组进行比较，以查看日期是否应该小于 31、30、29、28，然后使用高级构造将它们剔除

任何帮助将不胜感激，包括对我如何设计正则表达式的建设性批评。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T04:46:07.347

Here's one way to make a regular expression that will match any date of your desired format (though you could obviously tweak whether commas are optional, add month abbreviations, and so on):

```
years = r'((?:19|20)\d\d)'
pattern = r'(%%s) +(%%s), *%s' % years

thirties = pattern % (
     "September|April|June|November",
     r'0?[1-9]|[12]\d|30')

thirtyones = pattern % (
     "January|March|May|July|August|October|December",
     r'0?[1-9]|[12]\d|3[01]')

fours = '(?:%s)' % '|'.join('%02d' % x for x in range(4, 100, 4))

feb = r'(February) +(?:%s|%s)' % (
     r'(?:(0?[1-9]|1\d|2[0-8])), *%s' % years, # 1-28 any year
     r'(?:(29), *((?:(?:19|20)%s)|2000))' % fours)  # 29 leap years only

result = '|'.join('(?:%s)' % x for x in (thirties, thirtyones, feb))
r = re.compile(result)
print result 
```

Then we have:

```
>>> r.match('January 30, 2001') is not None
True
>>> r.match('January 31, 2001') is not None
True
>>> r.match('January 32, 2001') is not None
False
>>> r.match('February 32, 2001') is not None
False
>>> r.match('February 29, 2001') is not None
False
>>> r.match('February 28, 2001') is not None
True
>>> r.match('February 29, 2000') is not None
True
>>> r.match('April 30, 1908') is not None
True
>>> r.match('April 31, 1908') is not None
False 
```

And what is this glorious regexp, you may ask?

```
>>> print result
(?:(September|April|June|November) +(0?[1-9]|[12]\d|30), *((?:19|20)\d\d))|(?:(January|March|May|July|August|October|December) +(0?[1-9]|[12]\d|3[01]), *((?:19|20)\d\d))|(?:February +(?:(?:(0?[1-9]|1\d|2[0-8]), *((?:19|20)\d\d))|(?:(29), *((?:(?:19|20)(?:04|08|12|16|20|24|28|32|36|40|44|48|52|56|60|64|68|72|76|80|84|88|92|96))|2000)))) 
```

(I initially intended to do a tongue-in-cheek enumeration of the possible dates, but I basically ended up hand-writing that whole gross thing except for the multiples of four, anyway.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T03:52:30.307

一组由括号标识`(...)`，它们从左到右计数，最外层在前。您的最终表达式如下所示：

> ((19|20)[0-9][0-9])

最外面的括号匹配整个年份，而里面的括号匹配前两位数。因此，对于像“1989”这样的日期，两个匹配组将是 1989 年和 19 年。由于您不想要内部组（前两位数），因此您应该改用非捕获组。非捕获组以 开头`?:`，使用如下：`(?:a|b|c)`

[顺便说一句，这里](http://docs.python.org/howto/regex.html)有一些关于如何使用正则表达式的好文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T03:41:53.433

以下是一些快速的想法：

每个建议你使用正则表达式以外的东西的人都在给你很好的建议。另一方面，学习更多关于正则表达式语法的信息总是一个好时机......

方括号中的表达式 -- `[...]`-- 匹配这些括号内的任何单个字符。因此`[,]`，只包含一个字符的写作与写一个简单的无修饰逗号完全相同：`,`.

该`.findall`方法返回字符串中所有匹配组的列表。一组由括号标识`(...)`————它们从左到右计数，最外层在前。您的最终表达式如下所示：

```
((19|20)[0-9][0-9]) 
```

最外面的括号匹配整个年份，而里面的括号匹配前两位数。因此，对于像“1989”这样的日期，最后两个匹配组将是`1989`和`19`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T03:57:05.363

你有这个正则表达式：

```
pattern = "(January|February|March|April|May|June|July|August|September|October|November|December)[,][ ](0[1-9]|[12][0-9]|3[01])[,][ ]((19|20)[0-9][0-9])" 
```

正则表达式的一个特征是“字符类”。方括号中的字符构成一个字符类。因此`[,]`是匹配单个字符`,`（逗号）的字符类。你不妨把逗号。

也许您想让逗号成为可选的？你可以通过在它后面加上一个问号来做到这一点： `,?`

您放入括号中的任何内容都会构成“匹配组”。我认为神秘的额外“19”来自一个你不想拥有的匹配组。您可以使用以下语法创建一个不匹配的组：`(?:`

因此，例如：

```
r'(?:red|blue) socks' 
```

这将匹配“red socks”或“blue socks”，但不构成匹配组。如果然后将其放在普通括号内：

```
r'((?:red|blue) socks)' 
```

这将创建一个匹配组，其值为`"red socks"`或`"blue socks"`

我认为如果您将这些注释应用于您的正则表达式，它将起作用。现在大部分是正确的。

至于根据月份验证日期，这超出了正则表达式的范围。您的模式将匹配`"February 31"`，并且没有简单的方法可以解决此问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T03:41:13.393

Python 有一个日期解析器作为`time`模块的一部分：

```
import time
time.strptime("December 31, 2012", "%B %d, %Y") 
```

如果日期格式始终相同，以上就是您所需要的。

因此，在实际生产代码中，我会编写一个解析日期的正则表达式，然后使用正则表达式的结果来构建一个格式始终相同的日期字符串。

既然您在评论中说这是作业，我将发布另一个答案，其中包含有关正则表达式的提示。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T03:56:55.057

首先，正如其他人所说，我认为正则表达式不是解决这个问题的最佳选择，而是回答你的问题。通过使用括号，您将字符串分解为几个子组，当您调用函数 findall 时，您将创建一个包含您创建的所有匹配组和匹配字符串的列表。

```
((19|20)[0-9][0-9]) 
```

这是您的问题，正则表达式将匹配整个年份和 19 或 20，具体取决于年份是从 19 还是 20 开始。

# c++ - 这些数据类型有什么区别？

> ID：10308976
> 
> 赞同：0
> 
> 时间：2012-04-25T03:31:31.377
> 
> 标签：c++, types, integer, int, unsigned

在 C++ 中，short int、unsigned int、signed int 和 int 有什么区别？有哪些应用？什么时候使用 short int、unsigned int 等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T03:43:49.330

看一看！你告诉我！

```
#include <iostream>
#include <cstdlib>
#include <limits>
using namespace std;

int main(){

    cout << "min_int = " << numeric_limits<int>::min() << endl;
    cout << "max_int = " << numeric_limits<int>::max() << endl;

    cout << "min_unsigned_int = " << numeric_limits<unsigned int>::min() << endl;
    cout << "max_unsigned_int = " << numeric_limits<unsigned int>::max() << endl;

    cout << "min_short = " << numeric_limits<short>::min() << endl;
    cout << "max_short = " << numeric_limits<short>::max() << endl;

    cout << "min_unsigned_short = " << numeric_limits<unsigned short>::min() << endl;
    cout << "max_unsigned_short = " << numeric_limits<unsigned short>::max() << endl;

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T03:50:17.310

在大多数情况下，int 是您想要的，如果您要严格使用非负数 unsigned 是好的。但通常标准库函数会为错误返回负值。

Short 主要用于较大数据结构中的小值作为内存优化，或用于与网络或文件格式的接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T05:50:04.073

如果你想创建一个只接受正数的函数，这可能是为了限制其他人向它传递负值或让你的函数不必检查传递的值的符号，你可以使用 unsigned int。当然，这并不能阻止任何人将负整数转换为无符号整数。这只会导致您的函数将其解释为一个巨大的数字（因为最高有效位将是 1 以表示先前的负数），但这是铸造该值的人的错。

# c# - 如何在图像标志中设置动态主页链接？

> ID：10308978
> 
> 赞同：0
> 
> 时间：2012-04-25T03:31:40.607
> 
> 标签：c#, asp.net, content-management-system, sitefinity-4

我的网站

当我单击站点徽标时，想要出现 sitefinity 主页。如何在 sitefinity 中设置 href 属性，因为 sitefinity CMS 是动态主页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T21:14:24.953

有几种方法可以实现这一点，具体取决于您在页面上设置徽标的方式。

您的主页通常设置为在您访问位于站点根目录的顶级域时加载。

如果是这种情况，并且您在 .master 页面中定义了您的徽标，您可以轻松地将链接设置为根，例如

```
<a href="/"><img /></a> 
```

另一方面，如果您在 sitefinity 页面或模板上有图像，则需要确保将图像添加到 ContentBlock 内，而不是侧边栏中的 Image 小部件。此小部件仅用于显示图像，而不是链接。

通过将图像添加到内容块，您可以选择它并将 radeditor 工具栏的链接添加到主页（或任何其他页面）

希望这是有帮助的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:22:32.323

另一种相当简单的方法是使用您的网址[http://www.mysite.com](http://www.mysite.com)作为徽标的 href，这也不错（尽管不再是动态的）

但仍然很有帮助，特别是如果您在 print.css 中使用如下所示的一些代码：

```
a:link:after,
a:visited:after {
    content: " (" attr(href) ") ";
    font-size: 90%;
} 
```

并在打印页面上的实际链接之后呈现 href 链接。

这将导致如下所示：

[贵公司标志] [http://www.mysite.com](http://www.mysite.com)

# c++ - boost::scoped_array::get() 在 return 语句中

> ID：10308984
> 
> 赞同：2
> 
> 时间：2012-04-25T03:32:14.273
> 
> 标签：c++, boost, smart-pointers

我有以下代码：

```
std::string HtmlToText( std::string const& html )
{
    boost::scoped_array<char> text( converter.toText( html.c_str() ) );
    return text.get();
} 
```

我对这段代码的担忧是对象是否会在返回之后但在构造临时返回对象之前`text`被破坏。如果当时被破坏，这将是一个问题。`text.get()``std::string`

我在 C++03 标准中搜索了关于何时销毁与函数范围内的 return 语句相关的对象的规则和细节，但我没有找到我想要的东西。谁能帮我找到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T03:53:37.403

我手头没有 C++03 草案的文本，但我似乎记得从调用创建的任何临时对象都将在`text`删除实际对象之前被破坏（块范围内自动对象的 LIFO 排序），这应该保证你永远不会遇到这个问题。

# django - Heroku 上的 Django - 损坏的管理静态文件

> ID：10308985
> 
> 赞同：17
> 
> 时间：2012-04-25T03:32:42.437
> 
> 标签：django, heroku, django-admin

我有一个在 Heroku/Cedar 上运行的 Django 应用程序，按照[https://devcenter.heroku.com/articles/django上的说明进行配置](https://devcenter.heroku.com/articles/django)

按照 Heroku 的说明使用 gunicorn 无法包含 Django 管理员运行所需的静态文件。我可以将 Procfile 更改为“manage.py run_gunicorn”以进行本地开发，但这并不适用于 Heroku。

我已经到处寻找解决方案 - 是否有某种方法可以包含管理静态文件，而不会将它们与我的其他静态文件一起扔到 S3 上？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T03:47:31.367

如果您使用 runserver 并使用 DEBUG=True 配置您的应用程序，那么它将像在您的开发机器上一样提供管理文件。但是，这绝对不是推荐的方法，我建议您将它们放在 S3 上。

使用 django-storages 应用程序很容易配置 collectstatic 以自动将所有管理文件推送到 S3。[你可以在这里](http://django_compressor.readthedocs.org/en/latest/remote-storages/)找到路线

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-25T06:52:12.813

只需添加这些

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
urlpatterns += staticfiles_urlpatterns() 
```

使用 django 1.4.1

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-25T14:49:55.603

看看这篇文章： http: [//matthewphiong.com/managing-django-static-files-on-heroku](http://matthewphiong.com/managing-django-static-files-on-heroku)

如果这对您不起作用，请尝试在正常的 url 模式元组之后将以下内容添加到您的 urls.py 中。确保你已经设置了 STATIC_ROOT 并且在推送到 heroku 之前你已经在本地环境中运行了 collect static 。

```
urlpatterns += patterns('',
    url(r'^static/(?P<path>.*)$', 'django.views.static.serve', {
        'document_root': settings.STATIC_ROOT,
    }),
 ) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-09-16T17:45:43.053

与要求的日期相比，它似乎有点晚了。但我进入了这个问题，花了 30 分钟来解决我做错了什么。因此，对于那些可能陷入这个陷阱的人来说，这是一个神奇的解决方案。

Heroku的有一些问题`django.contrib.staticfiles.urls`

**解决方案**

您需要在 Heroku 设置上 安装`dj-static`（[下载链接）。](https://pypi.python.org/pypi/dj-static)**它是一个 Django 中间件实用程序，允许使用像 Gunicorn 这样的 WSGI 服务器正确地从生产中提供静态资产。**

我希望这会对某人有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-05-25T20:00:20.977

在“project_directory”中创建“static”文件夹。

在“settings.py”文件中设置“STATIC_ROOT”路径，该路径可以为您的管理站点的静态文件提供服务。

```
STATIC_ROOT = (os.path.join(os.path.dirname(__file__), '..', 'static')) 
```

在 '/urls.py' 中添加 STATIC_ROOT

```
from django.conf import settings
    urlpatterns += patterns('',
        url(r'^static/(?P<path>.*)$', 'django.views.static.serve', {
            'document_root': settings.STATIC_ROOT,
        }),
    ) 
```

运行以下命令，将所有管理静态文件复制到项目的静态文件夹中。

```
python manage.py collectstatic 
```

现在做 git add、commit 和 push heroku master。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-21T08:36:03.647

如果您在不使用 whitenoise（我建议）的情况下部署到 Heroku，请务必使用 dj_static [https://pypi.python.org/pypi/dj-static](https://pypi.python.org/pypi/dj-static)！

在过去的 3 个小时里，我试图将我的文件提供给 heroku，而 dj_static 在 2 分钟内就工作了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-15T15:46:29.647

我让 django 管理员处理以下编辑

urls.py（最后）

```
import settings
urlpatterns += patterns('',
    url(r'^static/(?P<path>.*)$', 'django.views.static.serve', {
        'document_root': settings.STATIC_ROOT,
    }),
) 
```

档案

```
web: gunicorn hellodjango.wsgi -b 0.0.0.0:$PORT 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-31T16:56:29.103

'django.contrib.staticfiles.views.serve'

代替

'django.views.static.serve'

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-30T16:56:40.073

按照这个来修复所有与 Django 和 heroku 相关的静态问题。

在你的`settings.py`粘贴中最后

```
import os
BASE_DIR = os.path.dirname(os.path.abspath(__file__))

STATICFILES_DIRS = (
    os.path.join(BASE_DIR,'static'),
    )
TEMPLATE_DIRS = (
    os.path.join(BASE_DIR,'templates'),
    )

STATIC_URL = '/static/' 
```

您的特定应用程序模板应位于`app_name/templates/app_name/`

当您渲染模板时，这是您指定的方式`template name`

在`views.py`

```
.....
return render(request,'app_name/template_name.html',context) 
```

将您`static files`的文件放在这里：

`project_folder/app_name/static/app_name/css`

`project_folder/app_name/static/app_name/js`

`project_folder/app_name/static/app_name/img`

访问您的静态文件使用路径`app_name/css/style_name.css`

如果你遵循这个，你所有的静态文件都会在 heroku 和你的本地开发机器中正常加载。

# c++ - C++ 代码中的 C

> ID：10308988
> 
> 赞同：0
> 
> 时间：2012-04-25T03:32:57.837
> 
> 标签：c++, c, extern

我编写了一个 C++ 应用程序，在其中，我需要调用一个用 C 编写的数学函数。原型如下所示：

```
void Jacobi_Cyclic_Method(double *eigenvalues, double *eigenvectors, double *A, int n); 
```

我的问题是我似乎无法传递函数 double * （例如，特征向量和 A 都是多维数组。传递这些东西的 C++ 方式似乎是

```
double [][size] 
```

我已经阅读了有关 extern C 的信息，但我认为它不适用于这里，因为我不是与对象交互而是与源本身交互。如何发送该 C 函数我的多维数组定义如下：

```
double [100][100] A;
double [100][100] eigenvectors;
double [100] eigenvalues; 
```

试图编译我得到：

```
error: no matching function for call to ‘MathEngine::Jacobi_Cyclic_Method(double 
[100], double [100][100], double [100][100], int)’
mathEngine.h:9: note: candidates are: static void    
MathEngine::Jacobi_Cyclic_Method(double*, double*, double*, int) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:45:28.780

问题可能是您的`Jacobi_Cyclic_Method`函数要求矩阵采用列或行主要格式，其中每列/行都连续存储在单个一维数组中。例如，对于大小为*mxn*的行主矩阵，任何给定行中的元素都是连续存储的，并且行*i*和列*j*中的项目将位于位置*i*n+j*（对于从零开始的索引*i*和*j*）。如果矩阵是列优先的，它将位于*i+j*m*位置。

在 C/C++ 中使用多维数组通常不是您想要的，因为类似

```
double A[100][100]; 
```

不是二维数组，而是长度为 100 的单个数组，其中包含指向长度为 100 的数组的指针。因此，其中的行`A`不是连续存储的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T04:53:16.267

我假设您的 C 函数的某些参数需要多维数组，并且原型是用指向数组/矩阵参数的双精度数的指针编写的，其中整数参数表示每个维度的大小（我猜矩阵是正方形？）。如果是这种情况，那么您可以将指针传递给每个数组/矩阵的第一个元素，如下所示：

```
Jacobi_Cyclic_Methods(&eigenvalues[0], &eigenvectors[0][0], &A[0][0], 100); 
```

您最初的尝试不起作用，因为例如 的类型`eigenvectors`会`double[100][100]`衰减到`double (*)[100]`，而不是`double *`。

[这篇](https://stackoverflow.com/questions/3920729/in-c-c-is-char-arrayname-a-pointer-to-a-pointer-to-a-pointer-or-a-pointe)文章解决了指针和多维数组的问题。

# sql - 试图在没有 ldf 的情况下附加 ss2008 r2 dev editn Adventureworks.mdf 得到“文件可能不正确”消息

> ID：10308991
> 
> 赞同：-3
> 
> 时间：2012-04-25T03:33:32.447
> 
> 标签：sql, sql-server, ssas

我正在尝试使用下面博客条目中建议的技术（图表 2）在没有 ldf 的情况下附加 Adventureworks.mdf（许多人抱怨微软没有使用 mdf 下载 ldf - 有谁知道在哪里一起下载 mdf 和 ldf？ ) 并在查询运行十秒钟后（表明我得到了正确的 mdf 文件路径）我收到以下错误消息：

展示1：错误信息

> 文件激活失败。物理文件名“C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\AdventureWorks2008R2_Log.ldf”可能不正确。创建了新的日志文件“C:\Users\Gary\Downloads\AdventureWorks_log.LDF”。

展览2：博客条目

[http://blog-rat.blogspot.com/2009/04/how-to-attach-mdf-without-ldf-into-sql_13.html](http://blog-rat.blogspot.com/2009/04/how-to-attach-mdf-without-ldf-into-sql_13.html)

展品3：代码

```
USE master
GO
CREATE DATABASE AdventureWorks 
ON PRIMARY (FILENAME = 
N'C:\Users\Gary\Downloads\AdventureWorks2008R2_Data.mdf')
FOR ATTACH_REBUILD_LOG 
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:41:43.573

这只是一个警告，与 AdventureWorks 本身无关，只是附加一个没有日志的 mdf。尽管有消息，您是否没有发现数据库已创建并可供使用？

至于下载，为了简单起见，它是一个单独的 mdf 文件。因为创建新日志就像附加空日志文件一样容易。

# ruby-on-rails - Rails 3.2.3 ExecJS::RuntimeError

> ID：10308992
> 
> 赞同：1
> 
> 时间：2012-04-25T03:33:43.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, coffeescript, execjs

`ExecJS::RuntimeError`当我尝试启动 Rails 服务器并且服务器日志给我以下信息时，我得到了：

```
 ActionView::Template::Error (delete operand may not be argument or var
      (in /home/sergey/Perfecto/arena/app/assets/javascripts/items.js.coffee)):
        47:         <%= raw flash_messages %>
        48:     </div>
        49: 
        50:     <%= javascript_include_tag "application" %>
        51:     <%= yield :javascripts %>
        52:     <%= yield :scripts %>
        53: </body> 
```

我发现发生此错误是因为 Ubuntu 没有安装 javascript 运行时。好的。我已经`nodejs v0.6.3`从源安装并尝试按照建议添加`gem 'therubyracer'`到我`Gemfile`的，但错误仍然出现。

我错过了什么？提前致谢。

我的`items.js.coffee`样子是这样的：

```
jQuery ->
    if $('#main.items_controller.new').length > 0   
        overlay = null
        iconOffsetX = 26
        iconOffsetY = 52 

        disableDraggingFor = (el) ->
            el.draggable = false
            el.onmousedown = (event) ->
                event.preventDefault()
                return false

        $(".draggable_item, #new_items_queue").disableSelection()

        $.each $(".draggable_item"), (i, el) ->
      disableDraggingFor(el)

        showInfobox = (marker,data) ->
            boxText = document.createElement("div")
            boxText.style.cssText = "height: 100%; background: url('/images/form.png') no-repeat;"
            boxText.innerHTML = '<div id="infoboxContent">' + data + '</div>'

            myOptions =
                content: boxText
                disableAutoPan: false
                maxWidth: 0
                pixelOffset: new google.maps.Size(-79, -386)
                zIndex: 0
                boxStyle:
                    width: "650px"
                    height: "350px"
                closeBoxMargin: "10px"
                infoBoxClearance: new google.maps.Size(1, 1)
                isHidden: false
                pane: "floatPane"
                enableEventPropagation: false

            ib = new InfoBox(myOptions)
            oldDraw = ib.draw
            ib.draw = ->
                oldDraw.apply(@)
                jQuery(ib.div_).hide()
                jQuery(ib.div_).fadeIn(900)

                $("#item_name").focus()

                priceResult = $("#converted_price")
                $("#item_price").live "keydown keyup keypress focus blur paste change", ->
                    fx.base = "USD"
                    fx.rates = 
                        "KGS": 46.4
                    input = accounting.unformat $("#item_price").val()
                    result = accounting.formatMoney fx.convert(input, from: "USD", to: "KGS"), 
                        symbol: "сом"
                        precision: 0
                        thousand: " "
                        format: 
                            pos : "%v %s"
                            neg : "(%v) %s"
                            zero: "0 %s"
                    priceResult.html result

            ib.open(Gmaps.map.map, marker)

            google.maps.event.addListener marker, 'dragstart', ->
                ib.hide()

            google.maps.event.addListener marker, 'dragend', ->
                newPosition = @getPosition()
                $.ajax "/items/reverse_geocode",
                    type: 'GET'
                    dataType: 'text'
                    data: 
                        lat: newPosition.lat()
                        lng: newPosition.lng()
                    error: (jqXHR, textStatus, errorThrown) ->
                    console.log "AJAX Error: #{textStatus}"
                    success: (data, textStatus, jqXHR) ->
                        $("#item_location").val data
                        ib.show()
                $('#item_latitude').val newPosition.lat()
                $('#item_longitude').val newPosition.lng()

            google.maps.event.addListener ib, 'domready', ->
                $('#change_position').bind 'click', ->
                    ib.close()
                    marker.setAnimation google.maps.Animation.BOUNCE

                    google.maps.event.addListener marker, 'position_changed', ->
                        setTimeout (->
                                                    ib.open(Gmaps.map.map, marker)
                                                ), 300

            google.maps.event.addListener ib, 'closeclick', -> 
                marker.setMap(null)
                delete marker
                $(".draggable_item").draggable("enable")

        placeMarker = (location,icon,shadow,kind) ->
            $.ajax "/items/reverse_geocode",
                type: 'GET'
                dataType: 'text'
                data: 
                    lat: location.lat()
                    lng: location.lng()
                    onlyCountry: true
                error: (jqXHR, textStatus, errorThrown) ->
                console.log "AJAX Error: #{textStatus}"
                success: (data, textStatus, jqXHR) ->
                    if data != "Киргизия"
                        humane "Вы можете добавлять объявления только в Кыргызстане"
                    else
                        $(".draggable_item").draggable("disable")

                        marker = new google.maps.Marker
                           position: location
                           map: Gmaps.map.map
                           icon: icon
                           shadow: shadow
                           draggable: true
                           zIndex: 99

                        $.ajax "/items/new.js",
                            type: 'GET'
                            dataType: 'text'
                            data: 
                                content: kind
                                lat: location.lat()
                                lng: location.lng()
                            error: (jqXHR, textStatus, errorThrown) ->
                            console.log "AJAX Error: #{textStatus}"
                            success: (data, textStatus, jqXHR) ->
                                 showInfobox marker, data

        Gmaps.map.callback = ->
            @.map.mapTypes.set "OSM", new google.maps.ImageMapType(
              getTileUrl: (coord, zoom) ->
                "http://192.168.0.112/osm_tiles2/" + zoom + "/" + coord.x + "/" + coord.y + ".png"

              tileSize: new google.maps.Size(256, 256)
              name: "OpenStreetMap"
              maxZoom: 18
            )
            @.map.setMapTypeId("OSM")
            overlay = new google.maps.OverlayView()
            overlay.draw = ->
            overlay.setMap @.map

        $.each $(".draggable_item"), ->
            $(@).draggable 
                cursor: "move",
                revert: false,
                helper: 'clone',
                stop: (event,ui) ->
                    point = new google.maps.Point ui.offset.left+iconOffsetX,ui.offset.top+iconOffsetY
                    location = overlay.getProjection().fromContainerPixelToLatLng(point)
                    placeMarker location, $(@).data('marker'), $(@).data('shadow'), $(@).data('kind') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T04:23:39.193

你的 CoffeeScript 中有这个：

```
google.maps.event.addListener ib, 'closeclick', -> 
    marker.setMap(null)
    delete marker
    $(".draggable_item").draggable("enable") 
```

错误是这样说的：

> 删除操作数不能是参数或 var

如果您从 that 回溯 CoffeeScript `delete marker`，您会看到这`marker`是一个参数，并且您不能[`delete`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/delete)在参数上使用 JavaScript 运算符。

`delete marker`你应该能够在不引起问题的情况下摆脱它，只是`marker.setMap(null)`应该足以让它消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T04:02:15.513

尝试在您的 Gemfile 中添加 gem "execjs", "~> 1.3.0"。我想它可以解决这个问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-19T18:44:00.537

较旧的线程，但我也有同样的问题，但通过简单地重命名我的 javascript 并删除所有文件名末尾的“.coffee”来解决它。

例如：

从：

```
'name'.js.coffee 
```

至：

```
'name'.js 
```

出于某种原因，这行得通。

# jquery - jquery如何获取显示的第一个列表项：无

> ID：10308993
> 
> 赞同：1
> 
> 时间：2012-04-25T03:33:43.820
> 
> 标签：jquery, html

好的，所以我有这个包含 ul 的 div：

```
 <html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script>
<script type="text/javascript">
$(document).ready(function(){
  $("button").click(function(){
    alert($('#slider ul li[display="none"]:first').text());
  });
});
</script>
<style type="text/css">
li
{
display:inline;
margin: 20px;
}
</style>
</head>
<body>
<div id="slider" style="width:100%; overflow-x:hidden"><ul><li style="display:none">Steve 1</li><li style="display:none">Frank</li><li>Tim</li><li>Steve</li><li>Frank</li><li>Tim</li><li>Steve</li><li>Frank</li><li>Tim</li><li>Steve</li><li>Frank</li><li>Tim</li><li>Steve</li><li>Frank</li><li>Tim</li><li>Steve</li><li>Frank</li><li>Tim</li><ul>
</div>
<button type="button" style="float:left">Previous</button><div style="float:right">Next</div>
</body>
</html> 
```

我想要发生的是，当您按下上一个按钮时，它会在列表中找到第一个不显示的项目，并显示一条包含其内容的消息。在这种情况下史蒂夫1。

所以我使用`$('#slider ul li[display="none"]:first')`了这意味着它应该找到名为slider的div，它是ul中的第一个列表项，显示：无。

我在消息中得到一个空白。

任何人都知道我做错了什么。

我认为这与我构建的属性部分有关：

[http://api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T03:35:54.437

`$('#slider ul li:hidden:first')`是你要找的

[http://api.jquery.com/hidden-selector/](http://api.jquery.com/hidden-selector/)

`:hidden`符合以下条件，根据上面的链接

> 元素可以被认为是隐藏的，原因如下：
> 
> 1.  它们的 CSS 显示值为 none。
> 2.  它们是 type="hidden" 的表单元素。
> 3.  它们的宽度和高度明确设置为 0。
> 4.  祖先元素是隐藏的，因此该元素不会显示在页面上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T03:39:46.417

```
$('#slider ul li[style="display:none"]:first') 
```

方括号根据属性选择元素。没有`display`属性。但是`style`可以使用该属性。如果`style`属性有其他样式，`display:none`那么您可以使用 RegExp 选择器：

```
$('#slider ul li[style*="display:none"]:first') 
```

星号 ( `*`) 表示字符串可以存在于属性的实际值内的任何位置。

这是一个演示：http: [//jsfiddle.net/TAv3d/](http://jsfiddle.net/TAv3d/)

jQuery 选择器的文档：http: [//api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

或者，您可以使用函数进行 DOM 遍历（而且速度更快）：

```
$('#slider').children('ul').children('li').filter('[style="display:none"]').first(); 
```

# c - WinMain() 到 main() 宏中的奇怪错误

> ID：10308995
> 
> 赞同：2
> 
> 时间：2012-04-25T03:34:21.893
> 
> 标签：c, windows, winapi, macros

```
/** converts 'WinMain' to the traditional 'main' entrypoint **/
#define PRO_MAIN(argc, argv)\
    int __main (int, LPWSTR*, HINSTANCE, int);\
    int WINAPI WinMain (HINSTANCE __hInstance, HINSTANCE __hPrevInstance, \
                       LPSTR __szCmdLine, int __nCmdShow)\
    {\
        int nArgs;\
        LPWSTR* szArgvW = CommandLineToArgvW (GetCommandLineW(), &nArgs);\
        assert (szArgvW != NULL);\
        return __main (nArgs, szArgvW, __hInstance, __nCmdShow);\
    }\
    \
    int __main (int __argc, LPWSTR* __argv, HINSTANCE __hInstance, int __nCmdShow) 
```

现在，当我在这里使用此代码时：

```
PRO_MAIN(argc, argv)
{
  ...
} 
```

我得到错误：

```
error: conflicting types for '__main'
note: previous declaration of '__main' was here 
```

有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T03:44:31.013

您违反了规则：[双下划线保留用于执行](https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier)！（除其他事项外。）

您根本不能使用`__main`, `main__`,`_Main`等。您应该选择其他东西。

我建议你完成这项工作：

```
int main(int argc, char* argv[])
{
    // main like normal
}

// defines WinMain, eventually makes call to main()
PRO_MAIN; 
```

它还有一个额外的好处，即对于非 Windows 应用程序，`PRO_MAIN`可以简单地扩展为空，并且程序仍然可以使用标准的 main 函数进行编译。这就是我所做的。

# c# - 当我必须将 if 语句的条件表达式从括号中取出时，它的条件表达式有多长？

> ID：10308996
> 
> 赞同：0
> 
> 时间：2012-04-25T03:34:25.550
> 
> 标签：c#

我说的是下面的XXX

```
if(XXX)
{
} 
```

如果条件表达式太长，我想我必须这样做

```
bool IsOK = XXXXXXXXXXXXXXXXXXXXXXXXXX;
if(IsOK)
{
} 
```

或者我必须让它成为一种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:37:24.980

您不必这样做，但您可以这样做以提高可读性。条件可以放在 if 中，也可以存储在变量中并求值，然后该变量可以放在 if 中。无论哪种方式，本质上都是一样的，但是在使用变量时，您可以使代码更具可读性。

# firefox - mac 上的 firefox：另存为对话。如何让它打开文件管理器，以便我选择保存文件的位置？

> ID：10308997
> 
> 赞同：0
> 
> 时间：2012-04-25T03:34:34.057
> 
> 标签：firefox

我是一个mac新手。我在 Mac 上安装了 firefox，OS X lion 因为我更熟悉 windows 下的 firefox。

问题可能是 OS X 问题，是这样的：

当我点击一个链接时，比如说一个 PDF 文档，我告诉它保存它而不是在浏览器中打开，然后现在我得到一个新对话框，显示保存到哪里。

但是除了显示的内容外，我没有任何方法可以选择其他内容，例如在 Windows 上。

在 Windows（和 linux）上，当我做同样的事情并保存时，我可以导航到我想要保存文件的目录。在mac上，我不能。我只能从给定的列表中选择。如果我想在其他地方保存文件怎么办？

我希望能够使用文件管理器导航并选择每次保存到哪个目录。

这是 OS X 限制吗？可以在 OS X 上使用 firefox 做到这一点吗？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:37:44.010

Mac 默认为一个紧凑的保存对话框；如果您仔细观察，您会注意到一个按钮，其中包含一个向下的小三角形。单击该按钮以获取完整的文件选择器对话框。

# java - 导入无法解决？

> ID：10308998
> 
> 赞同：1
> 
> 时间：2012-04-25T03:34:48.640
> 
> 标签：java, import, enums

所以现在，我有一个 Brick.java，其中包含我想在 BreakoutCourt.java 中使用的 Levels 枚举，它包含在同一个包中，即（默认包）。

当我写 import Brick.level; 在 BreakoutCourt 中，我收到一条消息，指出无法解决导入砖。即使我写了 import static Brick.Level，我也会收到这条消息！

Brick.java 中包含的级别枚举如下所示：

```
public class Brick {
   public static final int BWIDTH = 60;
   public static final int BHEIGHT = 20;
   private int xPos, yPos; 
   private Level brickLevel;

    //This sets up the different levels of bricks.
   enum Level{
    LUNATIC (4, 40, Color.MAGENTA),
    HARD (3, 30, Color.PINK), 
    MEDIUM (2, 20, Color.BLUE),
    EASY (1, 10, Color.CYAN),
    DEAD (0, 0, Color.WHITE);
    private int hitpoints;
    private int points;
    private Color color;

    Level(int hitpoints, int points, Color color){
        this.hitpoints = hitpoints;
        this.points = points;
        this.color=color;
        }
    public int getPoints(){
        return points;
        }
    public Color getColor(){
        return color;
        }
}

//rest of brick class goes under the enum 
```

我在 BreakoutCourt 中这样使用它：

```
 //Generates the bricks.
    for(int i = 0; i < 8; ++i){
        ArrayList<Brick> temp = new ArrayList<Brick>();
        Level rowColor = null;
        switch(i){
        //There are two rows per type of brick.
            case 0:
            case 1:
                rowColor = Level.EASY;
                break;
            case 2:
            case 3:
                rowColor = Level.HARD;
                break;
            case 4:
            case 5:
                rowColor = Level.LUNATIC;
                break;
            case 6:
            case 7:
            default:
                rowColor = Level.MEDIUM;
                break;
        }
        for(int j = 0; j < numBrick; j++){
            Brick tempBrick = new Brick((j * Brick.BWIDTH), ((i+2) * Brick.BHEIGHT), rowColor);
            temp.add(tempBrick);
        } 
```

我究竟做错了什么？感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T03:37:38.943

如果要导入类的成员，则需要使用[静态导入](http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html)。所以你可以这样做：

```
import static Brick.Level; 
```

不过要小心。如该链接页面所述，应谨慎使用静态导入。另一种不使用静态导入的方法是使用外部类名。例如：`Brick.Level.LUNATIC`原因是在一个较大的项目中，您可能有多个具有 Level 枚举的类，并且您必须查看导入以查看正在使用哪个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T03:38:10.760

你是如何导入 Enum 的？

你应该有一个 import 语句，比如

```
import static Brick.Level 
```

相关[问题](https://stackoverflow.com/questions/1677037/how-can-i-reference-my-java-enum-without-specifying-its-type)