# StackOverflow 问答 11761000-11761999

# haskell - Haskell：从 Hint 包运行 eval 时需要超时

> ID：11761000
> 
> 赞同：0
> 
> 时间：2012-08-01T14:02:58.893
> 
> 标签：haskell, timeout, eval, hint

我正在创建一个小程序来与一个 irc 机器人一起使用，它应该接受一个字符串，然后评估该字符串。为此，我使用[了提示包](http://hackage.haskell.org/package/hint/)，它非常适合我的需要。我现在遇到的问题是，我希望能够防止计算需要很长时间才能计算出来的表达式，例如 2^1000000000。

我尝试使用这样的 System.Timeout 包：

```
import Data.Maybe 
import Language.Haskell.Interpreter
import System.Timeout
import System.Environment (getArgs)

main :: IO()
main = do
  r <- timeout 500000 $ runInterpreter $ hEval arg
  case r of
    Nothing -> putStrLn "Timed out!"
    Just x ->
      case x of
        Left err -> putStrLn (show err)
        Right a  -> putStrLn a

hEval e = do
  setImportsQ [("Prelude", Nothing),("Data.List",Nothing)]
  a <- eval e
  return $ take 200 a 
```

但它不起作用，除非我投入如此短的时间以至于无法评估任何东西，否则超时不会触发。我在 Timeout 包的页面上读到，它可能与某些模块有问题，必须让主题完成，但我的理解还不足以知道 Hint 是否是这样的模块。

因此，即使只是告诉我这行不通，任何对此的帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:43:36.827

GHC 线程是协作的。它们只能在执行内存分配时产生或被异步异常终止。这通常可以正常工作，但是恶意的人可以编写一个紧密的循环，在没有分配的情况下运行很长时间。

[创建 mueval](http://hackage.haskell.org/package/mueval)包是为了处理这样的事情。它是根据提示实现的，但以各种方式增加了许多额外的安全性。

# javascript - Google Maps API v3 在没有 fitbounds 的情况下无法加载，缩放导致无限循环/stackoverflow

> ID：11761004
> 
> 赞同：0
> 
> 时间：2012-08-01T14:03:07.997
> 
> 标签：javascript, google-maps-api-3, internet-explorer-8, internet-explorer-7, stack-overflow

上一个问题： [Google maps API (IE7 IE8) 的堆栈溢出](https://stackoverflow.com/questions/11724212/stack-overflow-with-google-maps-api-ie7-ie8) 我同时发现了以下问题：[Google Maps API v3: Can I setZoom after fitBounds?](https://stackoverflow.com/questions/2437683/google-maps-api-v3-can-i-setzoom-after-fitbounds)

当我在地图上有多个标记时，那里的解决方案工作得很好。但是，当我访问 groupbke.young.netaffinity.net 的子页面时，例如。[https://groupbke.young.netaffinity.net/hotels/ireland/dublin/dublin/young-testing-hotel-liege/specials/bed-and-breakfast](https://groupbke.young.netaffinity.net/hotels/ireland/dublin/dublin/young-testing-hotel-liege/specials/bed-and-breakfast) 只有在调用 map.fitBounds() 时才会加载地图。另一方面，即使地图没有加载，当我在地图画布上方滚动时，它也会抛出堆栈溢出错误。如果我尝试使用 setZoom，无论如何都会引发堆栈溢出。

有任何想法吗？

```
var hoteldata = [
['Young Testing Hotel - Liège', 53.33932, -6.261427, '<div class="nearby-hotel"> <h1><a href="/hotels/ireland/dublin/dublin/young-testing-hotel-liege">Young Testing Hotel - Liège</a></h1> <div class="star-rating-1"></div><div class="clear"></div> <div class="nearby-hotel-image l"> <a href="/hotels/ireland/dublin/dublin/young-testing-hotel-liege"><img src="http://groupbke.young.netaffinity.net/bookings/images/imagecache/3/0C9DBC143E18ED64059C1696A52D2941-60x60.jpg" border="1" class="imagetype1"/></a> </a> </div> <div class="nearby-hotel-description l">  <a class="nearby-hotel-desc" href="/hotels/ireland/dublin/dublin/young-testing-hotel-liege">Dublin\'s most luxurious design hotel is located in the heart of the city. Experience the best of both worlds when staying at this chic haven, to one side the tranquility and calm of St Stephen\'s Green and to the other, Grafton Street, Dublin\'s finest shopping avenue.    From its central location, in amongst this buzzing vibrant city it is an easy stroll to explore the leading cultural, historical and leisure attractions. Or just step out to the chic shopping, high energy bars, fine dining restaurants and chattering Cafes.</a> <a href="/hotels/ireland/dublin/dublin/young-testing-hotel-liege" class="btn-small">Book Now</a> </div> <div class="clear"></div> </div>', 4]
];
function initialize(mapid) {
var myOptions = {
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    mapTypeControl: false
};
var bounds = new google.maps.LatLngBounds();
var map = new google.maps.Map(document.getElementById(mapid), myOptions);
var infowindow = new google.maps.InfoWindow();
var markers = [];

for (i = 0; i < hoteldata.length; i++) {
    var latLng = new google.maps.LatLng(hoteldata[i][1], hoteldata[i][2]);
    bounds.extend(latLng);
    var img = '/images/hotel-marker.png';
    if (hoteldata[i][4] == 2) {
        img = '/images/country-marker.png';
    }
    if (hoteldata[i][4] == 3) {
        img = '/images/guesthouse-marker.png';
    }
    if (hoteldata[i][4] == 4) {
        img = '/images/hotel-self-marker.png';
    }
    var marker = new google.maps.Marker({
    position: latLng,
    icon: img,
    shadow: '/images/marker-shadow.png'
    });
    markers.push(marker);
    bindInfoWindow(marker, map, infowindow, hoteldata[i][3]);

}

var clusterStyles = [
  {
    opt_textColor: 'white',
    url: '/images/m3-blue.png',
    height: 65,
    width: 64
  },
 {
    opt_textColor: 'white',
    url: '/images/m3-green.png',
    height: 65,
    width: 64
  },
 {
    opt_textColor: 'white',
    url: '/images/m3-orange.png',
    height: 65,
    width: 64 
  }
];

var mcOptions = {
    styles: clusterStyles,
    maxZoom:14

};

if (markers.length>1){
    var markerCluster = new MarkerClusterer(map, markers, mcOptions);
    map.fitBounds(bounds);
    google.maps.event.addListenerOnce(map, 'zoom_changed', function() {
            var oldZoom = map.getZoom();
            map.setZoom(oldZoom + (-7)); //Or whatever
    });
} else if (markers.length == 1){
    markers[0].setMap(map);
    //google.maps.event.clearListeners(map, 'zoom_changed');
    //google.maps.event.addListenerOnce(map, 'zoom_changed', function() {
        //  var oldZoom = map.getZoom();
        //  map.setZoom(oldZoom + (-7)); //Or whatever
    //  setTimeout('roomSetter(globalmap,globalzoom)',300);
    //});
    //google.maps.event.trigger(map,'zoom_changed');
    //google.maps.event.clearListeners(map, 'zoom_changed');
    //map.fitBounds(bounds);
    //var oldZoom = map.getZoom();
    //map.setCenter(bounds.getCenter());
    //map.setZoom(oldZoom+(-7));
    //map.setZoom(3);
    //globalmap=map;
    //globalzoom=map.getZoom()+(-7);
    //setTimeout('zoomSetter(globalmap,globalzoom)',300);
}
}

var globalmap;
var globalzoom;

function zoomSetter(map, zoom){
//map.setZoom(zoom);
}

function bindInfoWindow(marker, map, infowindow, html) { 
google.maps.event.addListener(marker, 'click', function() { 
    infowindow.setContent(html); 
    infowindow.open(map, marker); 
    }); 
} 

function initmaps() {
initialize('map_canvas');
initialize('map_thumb');
}

google.maps.event.addDomListener(window, 'load', initmaps); 
```

我设置了 3 个测试页来演示这个问题：

[http://groupbke.young.netaffinity.net/maptest1.html](http://groupbke.young.netaffinity.net/maptest1.html)

这具有 setZoom() 函数并引发 stackoverflow 错误，即使这应该是正确的

[http://groupbke.young.netaffinity.net/maptest2.html](http://groupbke.young.netaffinity.net/maptest2.html)

除了将标记添加到地图之外，这没有任何作用。在地图上滚动缩放仍然会引发堆栈错误。

[http://groupbke.young.netaffinity.net/maptest3.html](http://groupbke.young.netaffinity.net/maptest3.html)

这有 fitBound()，理论上不好，但有效。之后不能调整缩放级别，否则会引发 stackoverflow 错误。滚动缩放作品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:30:01.293

我之前的问题的答案中缺少的是必须设置初始缩放级别和中心。

```
 var myOptions = {
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoom:22,
            center: new google.maps.LatLng(50.820645,-0.137376)
    }; 
```

还必须在多标记缩放调整中将事件更改为“**空闲”。**

```
if (markers.length>1){
    var markerCluster = new MarkerClusterer(map, markers, mcOptions);
    map.fitBounds(bounds);
    google.maps.event.addListenerOnce(map, 'idle', function() {
        var oldZoom = map.getZoom();
        map.setZoom(oldZoom + (-7)); //Or whatever
    });
} 
```

在那之后就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:19:32.167

当您只有一家酒店时，您将创建一个`LatLngBounds`仅包含一个点的对象：

```
for (i = 0; i < hoteldata.length; i++) {
    var latLng = new google.maps.LatLng(hoteldata[i][1], hoteldata[i][2]);
    bounds.extend(latLng);
...} 
```

但是你然后做一个`map.fitBounds(bounds)`- 这会尝试无限缩放。虽然 API 应该能够处理这个问题是有争议的，但同样有争议的是，它会尝试完全按照您告诉它的去做。IE 的行为可能与 Firefox 和其他浏览器不同。

`fitBounds()`您在问题中引用的代码中注释掉的地方，*即*在您的在线页面中。由于该行仅适用于涉及一个标记且`bounds`对象是单个点的实例，因此我将其替换为简单的`setZoom()`。

```
map.setZoom(16); 
```

# javascript - 完全由 javascript 生成的网站布局是错误的吗？

> ID：11761005
> 
> 赞同：2
> 
> 时间：2012-08-01T14:03:08.650
> 
> 标签：javascript, jquery, html

我目前正在做一个项目，并用 Javascript 编写了整个页面。

我创建了一个基本功能：

```
create_element(parent, type, style, attributes); 
```

示例用法：

```
var container = create_element(document.body, "div", {width: "100%", height: "100%"});
var header_bar = create_element(container, "div",  {width: "100%", height: "50px"});
var title_span = create_element(header_bar, "span", {fontSize: "18px", fontFamily: "arial", color: "black"});
title_span.innerHTML = "Example Website"; 
```

等等...

我将这种方法用于网站的整个布局。使用这种方法有很大的缺点吗？显而易见的事实是，可能仍然有人禁用 JS。

如果 Javascript 是创建和呈现项目而不是将它们硬编码到 HTML 中，那么页面加载时间是否存在明显差异？

谢谢！

TL;博士-

创建了一个 create_element 函数，并使用它将所有元素绘制到屏幕上。包括页面的基本布局。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T14:10:34.947

当您尝试动态生成非动态内容时，您会遇到许多问题：

1.  可维护性将变得非常困难。如果您想对您的网站进行彻底的更改，您将不得不编辑 JS，而不仅仅是更改 CSS 或一些 HTML。
2.  SEO - Google 无法索引动态数据。如果您希望通过搜索引擎找到您的网站，这并不好。
3.  你正在混合你的图层。通过不分离关注点（您的视图与您的内容与......），您再次增加了可维护性问题并为您未来的自己或将来必须接触您的代码的其他开发人员创造了一个问题。

现在，做一些动态生成并没有错——但要适当地做。我强烈建议不要为您的整个网站动态生成内容。

**根据对原始问题的评论进行更新**

你喜欢 JS 真是太好了。而且，我绝对同意 HTML 可能有点无聊。但是，如果你正确地分离了你的关注点，你真的应该只写很少的 HTML，并且可以很快回到你喜欢编码的内容。但是，请注意你不要试图将一种语言强加到它不适合的东西中当另一种语言被创造出来完美地做到这一点时。（锤子/钉子规则）

另外，不要忘记 HTML5 和 CSS3 非常强大。你可以用它做很多事情，甚至不必接触 JS（假设满足客户需求）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T14:06:55.480

一个主要问题是，如果您这样构建网站，Google 不会将您网站的任何内容编入索引。

此外，通过这种方式，您的内容、逻辑和样式不会被分离，如果您在单独的文件和服务器端脚本语言中使用 html / css，我认为这是一个巨大的好处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T14:05:20.457

如果您确保用于呈现页面的元数据没有作为一个整体进行评估，那么整个网站由 javascript 基于服务器的响应生成并没有错，因为这会导致安全问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T14:05:46.387

在我看来，如果它不是动态内容，那么直接使用 html 会更好。

此外，拥有单独的 CSS 文件比将其设置为内联更合适。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T14:17:14.270

没有理由不能完全由 javascript 生成页面内容，但我不会支持这种逐个元素的方法。您甚至没有使用任何样式规则，只使用内联样式。此外，在这种情况下，对 html 块使用某种模板机制会更易于维护，例如在 Underscore.js 中使用的。（那里有很多模板解决方案，比如 Mustache 和 Handlebars；我只是给出一个我用过的。）有几种方法可以维护 html 而无需将它放在某个 javascript 文件中，但即使它*在*javascript 文件，它会比这个元素更易于维护。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T14:09:08.500

[BackboneJS](http://backbonejs.org/)做到了这一点。您只需要确保在客户端使用 JS 来补充服务器端渲染，并且任何仅在客户端完成的渲染都能够全部或部分在服务器上进行。

# xpages - 验证单选按钮组客户端？

> ID：11761007
> 
> 赞同：0
> 
> 时间：2012-08-01T14:03:16.590
> 
> 标签：xpages

我为单选按钮组添加了必需的验证器，但它似乎不起作用。我知道这可能是单选按钮组的问题？

我在这里找到了这个解决方案

[http://www.bleedyellow.com/blogs/patpicos/entry/xpages_xp_validaterequired_not_working_on_radio_buttons_not_radio_button_groups1?lang=en_us](http://www.bleedyellow.com/blogs/patpicos/entry/xpages_xp_validaterequired_not_working_on_radio_buttons_not_radio_button_groups1?lang=en_us)

但它使用服务器端验证，而我的表单的其余部分使用客户端，两者看起来都不同。我宁愿它们看起来一样。无论如何要验证单选按钮组客户端吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:56:05.767

所需的验证将适用于 radioGroup 控件。它不适用于按 groupName 分组的无线电控件。

下面的 CSJS 代码可以帮助您查看组中的任何一个单选控件是否被选中（将其放入按钮的 onclick 事件中）。

```
 var isChecked = false;
dojo.query('input[name$=groupName]').forEach(function(node){if(!isChecked){isChecked = node.checked;}});
if (!isChecked)alert('no value checked.') 
```

# perl - 将列表中的值分配给哈希元素

> ID：11761008
> 
> 赞同：1
> 
> 时间：2012-08-01T14:03:25.340
> 
> 标签：perl, hash

本质上，我想命名列表的元素。

我可以做这个：

```
($hash{'foo'}, $hash{'bar'}, $hash{'baz'}) = listmaker; 
```

但是如果列表中有很多元素，那会变得相当冗长。

有没有更短的方法只命名哈希一次？也许对此有一些变化：

```
%hash = ("foo" => "abc", "bar" => "def", "baz" => "ghi"); 
```

但是来自函数的值`listmaker`？我在设想某种`map`咒语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:15:54.267

使用哈希切片：

```
@hash{'foo', 'bar', 'baz'} = listmaker 
```

或者

```
@hash{qw( foo bar baz )} = listmaker 
```

# javascript - 创建可拖放的 iframe？

> ID：11761010
> 
> 赞同：1
> 
> 时间：2012-08-01T14:03:29.630
> 
> 标签：javascript, jquery, html, iframe, drag-and-drop

我们如何创建可拖放的 iframe？我有一个由 4 个 iframe 组成的面板。我想将一个 iframe 拖到另一个上，并且在放置操作时 iframe 应该交换位置。例如，将 iframe 1 拖到 iframe 2 上，应该会导致 iframe 2 显示在 iframe 1 先前占用的空间中。关于如何实现此功能的任何指针？我对如何将拖放事件与 iframe 相关联一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:23:02.457

如果可能的话，我建议使用`div`elements 而不是`iframe`. iframe 通常包含单独的 HTML 页面，因此很难让它们以您正在寻找的方式进行交互。尝试检查 jQuery UI 的 droppable 操作。[http://jqueryui.com/demos/droppable/](http://jqueryui.com/demos/droppable/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T10:45:24.500

我找到了一个使用 iframe 和 jquery ui 进行简单拖放的解决方案。在这篇文章上

[jquery ui如何在我单击可拖放项目时获取可拖动项目的ID](https://stackoverflow.com/questions/23643112/jquery-ui-how-to-get-a-id-of-a-draggable-item-when-i-click-on-the-droppable-item)

它与以下内容有关：

`var itemId = $(ui.draggable).attr("id"); $(this).data('dropped', itemId);`

我也稍微调整了一下。希望这可以帮助！请享用

```
http://plnkr.co/edit/hB9xHZmCwDYfS3VxPWgt?p=preview 
```

# javascript - 防止 jQuery 中的双重动画

> ID：11761011
> 
> 赞同：3
> 
> 时间：2012-08-01T14:03:32.457
> 
> 标签：javascript, jquery, animation

当用户点击太快时，如何阻止此功能发生两次？

```
$(document).ready(function() {
    $(".jTscroller a").click(function(event) {
        event.preventDefault();
        var target = $(this).attr("href");
        $("#photo").fadeTo("fast", 0, function() {
            $("#photo").attr("src",target);
            $("#photo").load(function() {
                $("#photo").fadeTo("fast", 1);
            });
        });
    });
}); 
```

我遇到的问题是，如果用户点击太快，元素不会淡入，它只是保持隐藏状态。

问题不是我想的那样。当我点击同一个缩略图时，它会尝试加载同一个图像并永远加载。答案确实修复了双重动画，`.stop()`所以我接受了这个答案，但我的解决方案是检查最后点击的项目是否是当前显示的项目。新脚本：

```
$(document).ready(function() {
    $(".jTscroller a").click(function(event) {
        event.preventDefault();
        var last = $("#photo").attr("src");                 
        var target = $(this).attr("href");
        if (last != target) {
            $("#photo").stop().fadeTo("fast", 0, function() {
                $("#photo").attr("src",target);
                $("#photo").load(function() {
                    $("#photo").fadeTo("fast", 1);
                });
            });
        };
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:06:53.130

好吧，您在描述中使用了正确的词。使用[停止（）](http://api.jquery.com/stop/)

```
$("#photo").stop().fadeTo("fast", 0, function() { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:07:20.103

您可以使用`setTimeout`函数在点击抓取之间进行延迟。我的意思是，第二次点击只会在第一次点击之后的某个时间后处理。它设置点击之间的间隔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:07:22.220

我相信你正在寻找的是`.stop()` [http://api.jquery.com/stop/](http://api.jquery.com/stop/)

```
$("#photo").stop(false, false).fadeTo() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T14:07:26.030

```
$(document).ready(function() {
    var loaded = true;
    $(".jTscroller a").click(function(event) {
        if(!loaded) return;
        loaded = false;
        event.preventDefault();
        var target = $(this).attr("href");
        $("#photo").fadeTo("fast", 0, function() {
            $("#photo").attr("src",target);
            $("#photo").load(function() {
                $("#photo").fadeTo("fast", 1);
                loaded = true;
            });
        });
    });
}); 
```

跟踪其状态

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T14:08:48.730

我会这样阻止它：

```
var photo = $("#photo");
if (0 == photo.queue("fx").length) {
     foto.fadeTo();
} 
```

我的不同之处在于`stop`它只会在该元素上的所有动画都完成时触发。将元素存储在变量中也会节省一些时间，因为选择器只需要抓取一次元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T14:15:06.017

使用[on()](http://api.jquery.com/on/)和[off()](http://api.jquery.com/off/)：

```
$(document).ready(function() {
    $(".jTscroller a").on('click', changeImage);

    function changeImage(e) {
        e.preventDefault();
        $(e.target).off('click');
        $("#photo").fadeOut("fast", function() {
            this.src = e.target.href;
            this.onload = function() {
                $(this).fadeIn("fast");
                $(e.target).on('click', changeImage);
            });
        });
    }
}); 
```

# xml - XDocument XElement.Descendants 问题

> ID：11761015
> 
> 赞同：0
> 
> 时间：2012-08-01T14:03:45.107
> 
> 标签：xml, linq, linq-to-xml, xelement

我有一个简单的问题，但我不知道如何解决它。我有一个看起来像这样的 XML 文档

```
<hotel>
   <rooms>
   </rooms>
   <rates>
      <rooms>
      </rooms>
   </rates>
</hotel> 
```

现在，在我的代码中，我有以下内容

```
XElement hotel = xDoc.Descendants("hotel").Single();
XElement rooms = hotel.Descendants("rooms").Single(); 
```

最后一行失败，因为有两个`rooms`节点。我想要`Descendants`做的是给出当前节点的*直接*后代，而不是每个后代，无论它在文档中的什么位置。这怎么可能？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:21:10.630

要获取节点的第一`rooms`个子元素，请使用以下方法：`hotel``Element`

```
XElement rooms = hotel.Element("rooms"); 
```

此外，如果您真的使用 an`XDocument`那么该`hotel`节点将是根，并且可以使用该`xDoc.Root`属性进行访问。

# java - 无法从文本文件中读取行

> ID：11761020
> 
> 赞同：4
> 
> 时间：2012-08-01T14:03:51.487
> 
> 标签：java, android

我有这样的方法：

```
 public int getIncrement() {

    String extractFolder = "/mnt/sdcard/MyFolder";
    boolean newFolder = new File(extractFolder).mkdir();
    int counter = 0; 

    try {
        File root = new File(extractFolder); 
        if (root.canWrite()){
            File gpxfile = new File(root, "gpxfile.txt");
            FileWriter gpxwriter = new FileWriter(gpxfile);
            BufferedWriter out = new BufferedWriter(gpxwriter);

            Scanner scanner = new Scanner(new FileInputStream(gpxfile.getAbsolutePath()), "UTF-8");
            Log.i("PATH: ", extractFolder + "/gpxfile.txt");

           while(scanner.hasNextLine()) {
               String inc = scanner.nextLine(); 
               counter = Integer.parseInt(inc);
               Log.i("INSIDE WHILE: ", Integer.toString(counter)); 
           }
            counter++;
            out.write(Integer.toString(counter));
            out.close();
        }
    } catch (IOException e) {
        Log.e("GEN_PCN: ", "Could not write file " + e.getMessage());
    }
    return counter;  
} 
```

我想要完成的是返回这个文件的内容，并将`integer`1 递增。但似乎我无法进入`while`循环，因为`LogCat`没有打印出任何内容。是的，确定路径是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:14:16.220

我猜 的构造函数在创建时 `FileWriter gpxwriter`已经将文件`Scanner`清空，因此文件为空并`hasNextLine`返回`false`. 为什么要读取文件时要打开文件进行写入？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:13:39.463

据我所知，该文件不存在。尝试添加 gpxfile.createNewFile()

为了更深入地了解，创建 File 实例不会在文件系统上创建文件。

所以，这一行 -> File gpxfile = new File(path, filename);

不足以在 sd 卡上创建文件。你必须跟随它

引用[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#createNewFile%28%29)的 gpxfile.createNewFile()说：

> 当且仅当具有此名称的文件尚不存在时，以原子方式创建以此抽象路径名命名的新的空文件。检查文件是否存在以及如果文件不存在则创建文件是单个操作，相对于可能影响文件的所有其他文件系统活动而言是原子操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:07:42.440

**好的，我标记你的文件名**

**只需在 END**的 extractFolder中添加一个**BACKSLASH**

 **```
 v
                                            v
                                            v
String extractFolder = "/mnt/sdcard/MyFolder/";
                                            ^ // <---   HERE
                                            ^
                                            ^ 
```

因为**File gpxfile = new File(root, "gpxfile.txt");** 没有**BackSlash /**作为**Log**有

* * *

只需尝试一次以下：

```
while(scanner.hasNextLine()) {
      String inc = scanner.nextLine(); 
      //       //   counter = Integer.parseInt(inc);
      Log.i("INSIDE WHILE: ", inc);
      System.out.println("Next Line ::"+inc);  //  Also check this
} 
```**

# php - PHP向数组添加值

> ID：11761021
> 
> 赞同：0
> 
> 时间：2012-08-01T14:03:52.813
> 
> 标签：php, php-5.3

在 PHP 为什么这是一个语法错误：

```
$row['some_key'] = "kkkk"; 
```

加注

解析错误：语法错误，意外的 T_STRING

从文档中我了解到这是完全有效的 PHP，但它每次都会抛出相同的错误（当然错误会消失，然后我将这一行注释掉）。

编辑：经过长时间的搜索，我实际上注意到该文件确实以某种方式损坏。在 Vim（在 ubuntu 12.04 上）中，该文件看起来很正常。但是从其他计算机查看时，它已损坏。所以与PHP无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:05:29.397

> 在 PHP 为什么这是一个语法错误：

它不是。如果您得到意外的 T_STRING，则问题出在其他地方（提示：查看上面的行）。

# android - 我可以清除 ListView 中的所有视图，以免它们通过 convertView 被回收吗？

> ID：11761022
> 
> 赞同：1
> 
> 时间：2012-08-01T14:04:00.400
> 
> 标签：android, android-listview

我重复使用相同`ListView`的方法来浏览数据，同时`ListView`根据用户单击一行来更新数据。到目前为止，我一直在`View`整个活动中使用同一行，但是在用户单击一行后，我想为*所有*行更改为不同的行布局`ListView`。

更具体地说，假设`ListView`包含行使用`layout1`，并且用户单击一行。ListView 的数组适配器随后获取一组新数据，并且所有行现在都使用`layout2`.

我不想在点击后创建一个新`ListView`的或弄乱`setTag`丑陋的东西，我只想清除所有通过`getView`'s发送的缓存行视图`convertView`。我仍然想随后回收`layout2`视图。

我可以这样做，还是必须“咬紧牙关”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:13:24.170

看起来[ListView.invalidateViews()](http://developer.android.com/reference/android/widget/AbsListView.html#invalidateViews%28%29)会这样做：

`public void invalidateViews ()`

> 导致所有视图被重建和重绘。

# workflow - 如何在 JIRA 工作流程中模拟“记者撤回”？

> ID：11761023
> 
> 赞同：1
> 
> 时间：2012-08-01T14:04:03.463
> 
> 标签：workflow, jira

如何在 JIRA 工作流程中模拟“记者撤回”？它应该是一个决议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:43:41.967

取决于您的工作流程和您的需求。是否使用状态或转换的参数与[此处](https://stackoverflow.com/questions/11750190/how-do-i-simulate-wish-list-and-bug-list-in-jira-workflow)相同。

我会做的是使用导致“撤回”状态的[全局转换。](https://confluence.atlassian.com/display/JIRA/Configuring+Workflow#ConfiguringWorkflow-Usingthe%27GlobalTransitions%27panel)通过这种方式，您可以轻松访问已撤销问题的列表，并允许从其他所有状态转移到此状态。

**编辑**

这种方法的最大好处是所有问题都`Withdrawn by reporter`将处于相同的状态，这意味着它们都将具有相同的工作流路径将它们带回`open`状态，从而更容易为`Withdrawn by reporter`问题添加特定屏幕。例如，您可以添加一个`reason for re-opening`字段。

在我看来，仅更改分辨率是不够的，因为我看不到将`Withdrawn by reporter`问题与其他常规问题保持相同状态的原因，我相信将它们分开会更明智。这样就更容易获得`Withdrawn by reporter`问题的报告和查询。

`Withdrawn by reporter`购买方式，使用以下 JQL 获取处于状态的所有问题的列表：

```
status was "Withdrawn by reporter" 
```

# svn - 某些目录上 S 的 SVN 状态，但没有“svn switch”？

> ID：11761025
> 
> 赞同：1
> 
> 时间：2012-08-01T14:04:06.357
> 
> 标签：svn

[我有一个与Subversion 中的 Status "S"](https://stackoverflow.com/questions/1866504/status-s-in-subversion)类似的问题，但我从未执行过 "svn switch..." 命令。

它发生在我们的开发服务器上：我所做的是尝试升级一个非常过时的软件，方法是将旧目录复制到新目录，并将更新后的文件添加到具有旧目录名称的新目录中。我忘了做“svn move...”命令。SVN 很困惑，我尝试删除新目录并重命名旧目录。

当我仍然无法签入时，我的一位同事建议我执行“svn switch --relocate ...”，因为它认为某些目录的用户名与我登录时的开发用户不同。这修复了开发仓库。

但是现在我的本地仓库在不同的、不相关的目录上具有类似的“S”状态，并且它是正确的用户。

有没有办法修复我的本地仓库，或者我最好只是检查一个新副本并重新做我的最后一个工作？

# android - 使用按钮制作启动菜单的其他方式

> ID：11761029
> 
> 赞同：0
> 
> 时间：2012-08-01T14:04:09.970
> 
> 标签：android, button, menu

我正在考虑在进入真实页面之前做一个启动菜单，如下图所示。

![在此处输入图像描述](../Images/c37044fc3affb367ed43b5ffd59508f9.png)

我想我可以用按钮菜单来做到这一点。所以，pikpok、全明星等我使用按钮小部件制作了它。有没有其他方法可以做到这一点？

无论如何，当用户单击全明星按钮时，它会出现在下一个 xml 文件中。但随后活动似乎没有成功。

这是我的代码。此代码显示启动活动。

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity {

    Button button;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        addListenerOnButton();
    }
    public void addListenerOnButton() {

        button = (Button) findViewById(R.id.button1);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {                                
                setContentView(R.layout.about);
            }

        });

        button = (Button) findViewById(R.id.signin);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {                                
                setContentView(R.layout.report);
            }

        });

    }

} 
```

report.xml 和 about.xml 将有自己的名为 ReportActivity 和 AboutActivity 的活动，但它不起作用。

有没有更好的方法来启动菜单而不是使用按钮。如果菜单可以有动画也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:11:17.010

对于相当复杂的“按钮”，您可以使用布局/图像/其他视图定义自己的视图

查看

[http://developer.android.com/guide/topics/ui/custom-components.html](http://developer.android.com/guide/topics/ui/custom-components.html)

了解更多信息。

要调用另一个活动，您必须首先为该活动定义一个活动类，它调用布局等。关于如何启动另一个活动，请阅读

[http://developer.android.com/guide/components/activities.html#StartingAnActivity](http://developer.android.com/guide/components/activities.html#StartingAnActivity)

# objective-c - 目标 c 中的 ASCII 到字符转换对于扩展 ascii 不正确

> ID：11761033
> 
> 赞同：1
> 
> 时间：2012-08-01T14:04:34.590
> 
> 标签：objective-c, ascii, converter

我试图实现一个 ascii 到字符的转换器。代码是

```
[NSString stringWithFormat:@"%c",ascii] 
```

它适用于高达 127 的 ascii 在 127 之后它显示了苹果特殊字符的字符

从[这里](http://www.ascii-code.com/)我发现

> 8 位 ASCII 表有几种不同的变体。

我需要

> ISO 8859-1，也称为 ISO Latin-1

转换时的ASCII。除了 APPLE 的特殊字符之外，我如何将 ascii 转换为 ISO 8859-1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:35:45.117

```
[NSString stringWithCString:asciiString encoding:NSISOLatin1StringEncoding]; 
```

`asciiString`你的char在哪里，`ascii`后跟一个空字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:30:18.127

我进入了字符编码问题，我做了编码库。该库不支持 ISO Latin-1，但我认为您可以将其与“NSISOLatin1StringEncoding”一起使用。

内部代码如下：

```
+ (NSString *)encodedStringWithContentsOfURL:(NSURL *)url
{
    // Get the web page HTML
    NSData *data = [NSData dataWithContentsOfURL:url];

    // response
    int enc_arr[] = {
        NSUTF8StringEncoding,           // UTF-8
        NSShiftJISStringEncoding,       // Shift_JIS
        NSJapaneseEUCStringEncoding,    // EUC-JP
        NSISO2022JPStringEncoding,      // JIS
        NSUnicodeStringEncoding,        // Unicode
        NSASCIIStringEncoding           // ASCII
    };
    NSString *data_str = nil;
    int max = sizeof(enc_arr) / sizeof(enc_arr[0]);
    for (int i=0; i<max; i++) {
        data_str = [
                    [NSString alloc]
                    initWithData : data
                    encoding : enc_arr[i]
                    ];
        if (data_str!=nil) {
            break;
        }
    }
    return data_str;    
} 
```

[您可以从https://github.com/weed/p120801_CharacterEncodingLibrary](https://github.com/weed/p120801_CharacterEncodingLibrary)下载此库

我希望我的建议对你有所帮助。

# internet-explorer - 强制 IE9 使用浏览器模式而不是兼容模式

> ID：11761037
> 
> 赞同：2
> 
> 时间：2012-08-01T14:05:03.197
> 
> 标签：internet-explorer, cross-browser, internet-explorer-9

我 `<meta http-equiv="X-UA-Compatible" content="IE=edge">`在`head`标签中使用。但是，当我在 IE9 上运行我的应用程序时，它使用的是*Browser Mode : IE9 Compat View*。我希望我的应用程序只使用*浏览器模式：IE9*，而不是*Compat 视图。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-06T03:06:23.587

我意识到我在这方面有点晚了，但这是我用过的，它对我有用：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

确保这是文档头部的第一个元标记（我将它直接放在开始标记之后）**。**

在这里找到了这个解决方案：http: [//technicalstuffhopefullyuseful.blogspot.com/2013/09/force-internet-explorer-compatibility.html](http://technicalstuffhopefullyuseful.blogspot.com/2013/09/force-internet-explorer-compatibility.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T04:43:47.783

您还需要使用 HTML5 文档类型声明 ( `<!DOCTYPE html>`)。IE9中也有一些设置。从`Tools`-menu 打开`Compatible settings`并取消选中所有复选框以防止 IE 使用战斗视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:55:57.660

[我在这里](https://stackoverflow.com/questions/15636939/fixing-the-browser-mode-in-ie-programmatically)遇到了类似的问题，请确保您的托管服务器操作系统是最新的，对我来说有很多更新，怀疑是：

Windows Server 2008 R2 x64 版的 Internet Explorer 8 兼容性视图列表更新 (KB2598845)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T04:46:26.310

根据我对 IE 的理解，它对新事物非常过敏，但只要您添加一个 doctype 声明（如果它是 html5 并不重要），那么它应该可以正常运行。另一方面，IE 从来都不太符合标准。阅读[Quirksmode MDN](https://developer.mozilla.org/en/Mozilla%2527s_Quirks_Mode)了解更多信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-10T21:15:59.330

这主要发生在 IE 10 浏览器中。我试图将浏览器模式强制为 IE 9，但根据微软的说法，我们无法更改浏览器模式，我们只能更改兼容模式。我有同样的问题，它可以在我的本地机器上工作，但不能在 PROD 服务器上工作，这使我认为我的本地机器可能从 Microsoft 获得了更新，而 PROD 服务器尚未更新。我们正在测试的应用程序在 IE 兼容性方面做得很好模式，但在 IE 10 中得到了各种奇怪的东西。

我要求使用 Microsoft 2 年前发布的热修复程序更新产品服务器。但是我的服务器上有 2.0 框架，所以我要求他们迁移到 3.5 框架并应用此修复程序。现在该应用程序运行良好，我无需将浏览器模式更改为 IE 10 兼容模式即可使用。

这是修复的链接

[http://support.microsoft.com/hotfix/KBHotfix.aspx?kbnum=2600088&kbln=en-us](http://support.microsoft.com/hotfix/KBHotfix.aspx?kbnum=2600088&kbln=en-us)

# c# - 将 C# MinDate 与 javascript min date 进行比较失败

> ID：11761038
> 
> 赞同：1
> 
> 时间：2012-08-01T14:05:04.373
> 
> 标签：c#, javascript, datetime

当我的 sproc 返回 null 时，它会作为 MinDate 进入 C# DateTime。如果此表单的日期到达前端（MVC/Razor），我会在 JavaScript 中创建自己的“MinDate”类型以进行比较。如果它们匹配，我想从 JavaScript 函数返回一个空字符串。然而，虽然这两个日期匹配，但我的“if”语句中返回空字符串的分支永远不会被输入。我已经看过这两个日期，直到我睁一只眼闭一只眼，它们看起来很匹配。为什么我的函数返回 MinDate 而不是空字符串？（顺便说一下，“toString()”方法来自 DateJS 库。）

```
// Setup a minDate to mimic C#'s Date.MinDate constant.
var minDate = new Date();
minDate.setFullYear(1, 0, 1);
minDate.setHours(0, 0, 0, 0);

function checkDateWithConfig(d, c) {

    alert("Date: " + d);
    alert("minDate: " + minDate);

    if (d == minDate) {
        alert("dates matched");
        return "";
    }
    else
    {
        return d.toString(c);
    }
} 
```

![来自 C# 的 MinDate：](../Images/b624eb19d35c8e14c4692fc93bc61db2.png)

![我的 JavaScript](../Images/d93bac85511cb449a9cab06c6039b7c9.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T14:07:06.127

Javascript`Date`对象是引用。您不能使用它`==`来检查两个`Date`对象是否表示相同的值。

相反，比较`getTime()`两个日期的方法，它返回一个数字。

# android - Android 应用内结算：设置目标国家/地区的价格

> ID：11761040
> 
> 赞同：0
> 
> 时间：2012-08-01T14:05:05.760
> 
> 标签：android, in-app-billing

我目前正在尝试根据国家/地区为应用内产品设置不同的价格。基于谷歌的教程：

[http://developer.android.com/guide/google/play/billing/billing_admin.html](http://developer.android.com/guide/google/play/billing/billing_admin.html)

在图 4 中有一个 UI 部分，上面写着“目标国家/地区是从拥有的应用程序继承的。单击此处更改目标国家/地区！”

好吧，我在界面上看不到这部分！我查看了“编辑应用程序”页面，没有名为“目标国家/地区”的地方。我找到了国家列表，但更改它不会影响应用内产品页面。

有谁知道如何获得这个应用内产品不同的价格选项？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-15T19:43:27.210

设置应用内结算不同的价格似乎仅在某些国家/地区可用：

[https://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=1169947](https://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=1169947)

# jquery - css jquery隐藏一个div，显示另一个

> ID：11761049
> 
> 赞同：2
> 
> 时间：2012-08-01T14:05:37.747
> 
> 标签：jquery, css, hide, show

我有一个挑战。我有 2 `divs`，一个设置`display:none;`在页面加载时的 css 中，我有两个相应的链接。当用户点击`link1`我想显示`div1`和隐藏`div2`。当用户点击`link2`我想显示`div2`和隐藏`div1`。

我无法让它工作！非常感谢任何帮助。小号

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T14:14:15.643

这里有一个例子：

```
$(function () {
  $(".div1, .div2").hide();

  $(".link1, .link2").bind("click", function () {
    $(".div1, .div2").hide();        

    if ($(this).attr("class") == "link1")
    {
      $(".div1").show();
    }
    else
    {
      $(".div2").show();
    }
  });

}); 
```

这是[**演示**](http://jsfiddle.net/cEJtA/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T14:12:35.547

首先，每当您在这里提出问题时，请提供您问题的 HTML。

其次，你可以做类似..

```
<script>
$(document).ready(function(){
    $("#div1").hide();
    $("#link1").on("click",function(){
        $("#div1").show();
        $("#div2").hide();
    });
    $("#link2").on("click",function(){
        $("#div2").show();
        $("#div1").hide();
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T14:13:28.663

取决于您的 HTML 结构

如果像这样

```
​&lt;a href='#'>link1</a>
<a href='#'>link2</a>
<div> div for link 1</div>
<div> div for link 2</div> 
```

那么jQuery代码看起来像这样

```
$('a').click(function(e){
    $('div').eq($(this).index()).show();
    $('div').not($('div').eq($(this).index()).hide();
}); 
```

[http://jsfiddle.net/NXdyb/](http://jsfiddle.net/NXdyb/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T14:13:44.083

你对jquery死心了吗？这可以简单地使用普通的旧 JavsScript 来完成。

```
function switchVisible() {

if (document.getElementById['div1'].style.visibility == 'visible') {
    document.getElementById['div1'].style.visibility = 'hidden';
    document.getElementById['div2'].style.visibility = 'visible';
}
else {
    document.getElementById['div1'].style.visibility = 'visible';
    document.getElementById['div2'].style.visibility = 'hidden';
}

} 
```

然后在您的链接1中：

```
<a href="/blah" onclick="javascript:switchVisible();"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T14:11:54.800

这是一个非常简单的原理……您可以通过多种方式实现它，这只是一个示例。

[忽略选择器，我很懒。](http://jsfiddle.net/jcCRj/)

HTML ->

```
<a href="#"> Show Div 1 </a> | <a href="#"> Show Div 2 </a>
<br/><br/>
<div id="div1"> Div 1 </div>
<div id="div2"> Div 2 </div> 
```

CSS ->

```
#div1{
  display:none;   
} 
```

jQuery ->

```
$('a:eq(0)').click(function(){
  $('#div1').toggle();
  $('#div2').toggle();    
});
$('a:eq(1)').click(function(){
  $('#div2').toggle();
  $('#div1').toggle();   
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T14:13:49.197

看看这个例子，它可能会对你有所帮助：http: [//jsfiddle.net/MUtPy/2/](http://jsfiddle.net/MUtPy/2/) ^^ 在 Jquery 中有很多方法可以做到这一点，但这个例子肯定会让你开始 =）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-17T23:01:17.727

那个小提琴帮助了我，这真的可以理解：http: [//jsfiddle.net/bipen/zBdFQ/1/](http://jsfiddle.net/bipen/zBdFQ/1/)

```
$("#link1").click(function(e) {
  e.preventDefault();
  $("#div1").slideDown(slow);
  $("#div2").slideUp(slow);
});

$("#link2").click(function(e) {
  e.preventDefault();
  $("#div1").slideUp(slow);
  $("#div2").slideDown(slow);
}); 
```

# actionscript-3 - 获取 main.asc 中的错误行号（Flash Media Server）

> ID：11761051
> 
> 赞同：0
> 
> 时间：2012-08-01T14:05:40.493
> 
> 标签：actionscript-3, flash-media-server

在 Main.asc 中调试错误非常困难，因为日志仅显示文本“编译错误”。如何获取实际发生错误的行号？

日志只显示：#Version: 1.0

```
#Start-Date: 2012-08-02 00:27:48

#Software: Adobe Flash Media Server 4.0.0 r1121 x86

#Date: 2012-08-02

#Fields: date   time    x-pid   x-status    x-ctx   x-comment

2012-08-02  00:27:48    4524    (e)2641277  Sending error message: Compilation error    -

#Date: 2012-08-02 
```

五。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:06:23.123

我不相信有编译错误的方法。运行时错误将在日志/管理控制台中显示行号。

您可能有格式错误的代码 - 额​​外或缺少 { 等。

尝试通过 jslint.com（或类似的代码检查器）运行您的代码，作为清除格式错误代码错误的简单方法。

# java - 打开 SQLite 数据库连接的路径中的特殊字符

> ID：11761052
> 
> 赞同：0
> 
> 时间：2012-08-01T14:05:41.970
> 
> 标签：java, database, sqlite, classnotfoundexception, sqlitejdbc

我正在尝试连接到 SQLite 数据库（在 Windows 8 上使用 Eclipse）。只要路径名不包含任何特殊字符（如“é”），一切正常。我试图将它转换为 UTF-8（因为我在[http://www.sqlite.org/c3ref/open.html](http://www.sqlite.org/c3ref/open.html)上读到它应该是），但它没有用。我收到“内存不足”异常 (SQLException)，这意味着找不到数据库文件。

这是我所做的代码摘要：

```
public static String DB_PATH = "jdbc:sqlite:" + System.getProperty("user.home") + "<Rest of the path><databasename>.sqlite";

public static void main(String[] args) throws ClassNotFoundException
{
  // load the sqlite-JDBC driver using the current class loader
  Class.forName("org.sqlite.JDBC");

 Connection connection = null;
 try
 {
   // create a database connection
   connection = DriverManager.getConnection(DB_PATH);
   Statement statement = connection.createStatement();
   statement.setQueryTimeout(30);  // set timeout to 30 sec.

   // work with the database ...
   }
 }
 catch(SQLException e)
 {
   // if the error message is "out of memory", 
   // it probably means no database file is found
   System.err.println(e.getMessage());
 }
 finally
 {
   // try to disconnect
   // ...
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:23:28.810

[使用来自http://www.xerial.org/maven/repository/artifact/org/xerial/sqlite-jdbc/](http://www.xerial.org/maven/repository/artifact/org/xerial/sqlite-jdbc/)的最新库

# c# - C# winform，如何使轨迹栏与声音文件一起移动（增加其值）？

> ID：11761055
> 
> 赞同：1
> 
> 时间：2012-08-01T14:05:46.480
> 
> 标签：c#, winforms, trackbar

在我的表格中，我有一个小型媒体播放器，它非常基本，它具有基本的功能嵌套、上一个、播放、停止、音量增加和一个轨迹栏。我可以通过以下代码通过拖动轨迹栏来寻找歌曲:: (假设轨迹栏的最大值是声音文件的总秒数)

```
private void SeekBar_Scroll(object sender, EventArgs e)
{
   Player.Position = TimeSpan.FromSeconds(SeekBar.Value);
} 
```

但是当音乐播放时我无法让酒吧自行前进..我想出了这个想法：

假设我们有一首 90 秒时长的歌曲。现在轨迹条最大值为 100，因此：100 --> 90 1 --> X X = 0.9 秒 这是条的刻度之间的间隔，以及轨迹条值应在每个刻度中增加的值。这是我的代码：

```
while (SeekBar.Value < 100)
{
  System.Windows.Duration duration = Player.NaturalDuration;
  SeekBar.Value += duration.TimeSpan.Seconds / 100;
  Thread.Sleep(duration.TimeSpan.Seconds * 10);
} 
```

现在我认为这应该在单独的线程中运行，对吗？但是问题是，当我这样做时，我收到一条恼人的消息，说 TrackBar 正在一个线程中使用，而不是在它创建的线程中使用.. 我该如何解决这个问题？

我想把这段代码放在`MouseLeave`和`MouseEnter`事件中，但这没有意义，因为它将在同一个线程上，应用程序将冻结..

我怎样才能让酒吧自行移动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:08:58.293

您应该创建一个`Timer`间隔为 1,000 毫秒的 WinForms，并在其`Tick`事件中更新跟踪栏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T14:09:24.717

听起来您已经完成了最难的部分（将滚动条的长度映射到音频文件的长度）。其余的很容易。

您可以使用`Timer`. 将间隔设置为某个值（例如 1000 毫秒或 500 毫秒，然后在 中`Tick`，更新滚动条（调用`SeekBar_Scroll`）。对于确切的间隔，测试并查看看起来最自然的部分。

while 循环可能会占用不必要的 CPU，更不用说锁定应用程序的其余部分了。

要绕过控件更新，您需要检查[这个 SO question](https://stackoverflow.com/questions/661561/how-to-update-gui-from-another-thread-in-c)。如果是这种情况，您需要通过该方法检查`control.InvokeRequired`并设置它。`Invoke`

# c# - 将 SQL Server CE 3.5 数据库中的值添加到列表视图

> ID：11761059
> 
> 赞同：0
> 
> 时间：2012-08-01T14:05:51.947
> 
> 标签：c#, sql-server-ce

```
private void table_loader()
{
    SqlCeConnection ucon = new SqlCeConnection();
    ucon.ConnectionString = " Data Source=C:\\Documents and Settings\\laser\\My Documents\\Visual Studio 2008\\Projects\\dbtest\\dbtest\\ulist.sdf";
    ucon.Open();
    SqlCeCommand uce = new SqlCeCommand();
    SqlCeDataAdapter uced = new SqlCeDataAdapter();
    uced.SelectCommand = new SqlCeCommand("SELECT * FROM plist", ucon);
    uced.Fill(ulistDataSet, "plist");
    DataTable dplist = ulistDataSet.Tables["plist"];
    for (int i = 0; i <dplist.Rows.Count;i++)
    {
        DataRow drow = dplist.Rows[i];

            ListViewItem lvi = new ListViewItem(drow["Process"].ToString());
            MessageBox.Show(lvi.Text);
            listView2.Items.Add(lvi);

    }

} 
```

我使用上面的代码在列表视图中显示数据库（SQL Server CE 3.5）值，但列表视图没有显示任何内容！当循环执行时，消息框（）也会一一正确显示数据库值，我认为问题一定出在将值添加到列表视图中。这段代码有什么问题，有人可以解释一下吗？对不起我糟糕的英语！

在此先感谢， 乌拉加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:18:25.500

尝试使用此代码

```
listView2.Items.Add(drow["Process"].ToString()); //Verify that column's name is Process 
```

用 foreach 语法回答

```
foreach(var row in dplist.Rows)
{
  listView2.Items.Add(row["Process"].ToString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:20:40.273

很难准确地说出项目添加代码看起来不错。
您可以尝试：
1\. 将列添加到列表视图`(listView2.Columns.Add("Item Column", -2, HorizontalAlignment.Left);)`
2\. 将列表视图切换到详细信息模式`listView2.View = View.Details;`

查看来自 msdn 的示例 - [http://msdn.microsoft.com/en-us/library/system.windows.forms.listview(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview(v=vs.100).aspx)

# c# - ASP.net Linq to SQL 分组和同时添加？

> ID：11761061
> 
> 赞同：2
> 
> 时间：2012-08-01T14:05:54.560
> 
> 标签：c#, asp.net, linq, linq-to-sql

我有一张产品表

产品：

```
ProdID  | ProdName
     1  | shirt
     2  | pants 
```

尺寸表：

```
SizeID | Size
     1 | small
     2 | med
     3 | large 
```

订单表

```
OrderID   | ProdID    |  SizeID    | Qty
 1        |    1      |   1        |  4
 2        |    1      |   1        |  3
 3        |    1      |   2        |  2
 4        |    2      |   1        |  1
 5        |    2      |   3        |  1 
```

我如何得到这样的结果：

```
ProdName | Size    | Total qty ordered   (group by product and size add all quantities)
   shirt | small   |   7
   shirt | med     |   2
   pants | small   |   1
   pants | large   |   1 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T14:10:10.177

```
from o in dc.Orders
group o by new { o.Product.ProdName, o.Size.Size } into g
select new { g.Key.ProdName, g.Key.Size, Total = g.Sum(or => or.Qty))}; 
```

# xcode - 用狮子安装 xcode 插件

> ID：11761063
> 
> 赞同：0
> 
> 时间：2012-08-01T14:06:09.617
> 
> 标签：xcode, macos, plugins, osx-lion

我正在尝试为 Xcode 安装插件，但找不到文件夹 /Users/myname/Library/Application Support/Developer/Shared/Xcode 也找不到文件夹 /Users/myname/Library/Application Support/Developer

我不知道我是否遗漏了什么（Xcode 4.4 版）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:59:48.063

试试这个目录 /Applications/Xcode.app/Contents/PlugIns

# objective-c - objective-c NSUserNotification 标头标题

> ID：11761066
> 
> 赞同：3
> 
> 时间：2012-08-01T14:06:13.240
> 
> 标签：objective-c, nsusernotification

是否有人知道从应用程序发送的系统通知的标题栏中的标题使用哪个值？

假设我的应用名为“My.app Name”，标题标题只是“My”。

我说的是这个领域：

![在此处输入图像描述](../Images/6be2350f352fef7369bf9700fe73f215.png)

尝试在构建设置中更改产品名称无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:17:55.113

您尝试更改的标题与您的应用程序名称相关联，要在创建后更改其名称，您可以在项目导航器中双击（缓慢）您的应用程序。

# java - JSF 如何通过 selectOneRadio 的 onchange 提交表单

> ID：11761068
> 
> 赞同：3
> 
> 时间：2012-08-01T14:06:28.280
> 
> 标签：java, jsf, jsf-2, primefaces

我正在尝试在选择 selectOneRadio 值时提交表单。我有下面的代码，但它没有进入我的`#{contentEditorBacking.addNewsArticle}`.

有谁知道单击 selectOneRadio 时我如何进入该方法？

```
<p:panel header="News Article Title">
    <h:panelGrid columns="2">
        <h:outputLabel for="title" value="Title" style="font-weight: bold;"/>
        <p:inputText id="title" required="true" value="#{contentEditorBacking.newsTitle}" />
        <h:outputLabel value="Site" />
        <p:selectOneRadio value="#{contentEditorBacking.selectedNews}" layout="pageDirection" onchange="submit()">
            <f:selectItem itemLabel="Public" itemValue="Public" />
            <f:selectItem itemLabel="Member" itemValue="Member" />
        </p:selectOneRadio>
        <p:commandButton value="submit" action="#{contentEditorBacking.addNewsArticle}" />
    </h:panelGrid>
</p:panel> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T14:12:31.243

两个问题：

*   要拦截单选按钮（和复选框）中的“更改”，您需要该`click`事件。
*   默认情况下，它`<p:commandButton>`是一个 ajax 按钮，它没有像 JS 那样为同步提交做好准备`submit()`。

只需使用`<p:ajax>`，以便提交由 ajax 执行。请注意，您不需要指定`event`属性，它默认为`click`已经。

```
<p:selectOneRadio value="#{contentEditorBacking.selectedNews}" layout="pageDirection">
    <f:selectItem itemLabel="Public" itemValue="Public" />
    <f:selectItem itemLabel="Member" itemValue="Member" />
    <p:ajax listener="#{contentEditorBacking.addNewsArticle}" />
</p:selectOneRadio>
<p:commandButton value="submit" action="#{contentEditorBacking.addNewsArticle}" /> 
```

* * *

**根据评论更新**，您似乎想导航到带有参数的另一个页面。然后该`addNewsArticle()`方法应如下所示，以便它与`<p:ajax listener>`和兼容`<p:commandButton action>`。

```
public void addNewsArticle() throws IOException {
    ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
    ec.redirect(ec.getRequestContextPath() + "/next.xhtml?action=add");
} 
```

# java - 为您的 netbeans 应用程序的 jar 放置输入 .txt 文件的位置

> ID：11761069
> 
> 赞同：0
> 
> 时间：2012-08-01T14:06:29.023
> 
> 标签：java

我遇到的问题是相当微不足道的。我在 netbeans Java 中做了一个简单的应用程序。应用程序启动时会加载一个名为 try.txt 的输入文件，用于上传一些数据。我已将此文件放在项目文件夹中，以下代码适用于文件读取操作

```
 FileInputStream fstream = new FileInputStream("try.txt"); 
```

当我调试程序时，应用程序工作正常。但是当我构建我的项目的 jar 并通过命令提示符运行 jar 时，我收到以下错误

java.io.FileNotFoundException: try.txt (系统找不到指定的文件)

如果我使用try.txt的绝对路径，问题就解决了

C:\桌面\try.txt

但这不是我想要的，因为我也应该将 jar 分发给其他用户。我想知道我的 jar 中有没有可以放置文件的默认目录。或者有什么方法可以将文件包含到 jar 中，以便在执行时上传

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:05:06.020

1.  将文本文件放在 Jar 中最适合它的任何位置。（具体取决于所使用的 IDE 或构建工具。）
2.  [通过嵌入资源信息](https://stackoverflow.com/tags/embedded-resource/info)中提到的 URL 访问文本文件。[页](https://stackoverflow.com/tags/embedded-resource/info)..

* * *

```
URL urltoResource = this.getClass().getResource("/path/to/the.resource"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:13:12.423

你应该把你的文本文件放在你的包的顶部...ieat jar 文件的根目录。

# .net - DataTable 与 DataGrid 的双向绑定。

> ID：11761070
> 
> 赞同：1
> 
> 时间：2012-08-01T14:06:35.137
> 
> 标签：.net, wpf, data-binding, datagrid

我有数据网格：

```
<DataGrid Name="dataGrid" Grid.Row="3" ItemsSource="{Binding ResultSet, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" CanUserAddRows="False" AutoGenerateColumns="True" CellEditEnding="DataGrid_CellEditEnding">
            <DataGrid.RowStyle>
                <Style TargetType="{x:Type DataGridRow}">
                    <Setter Property="Height" Value="14"></Setter>
                </Style>
            </DataGrid.RowStyle>
        <DataGrid.CellStyle>
                <Style TargetType="DataGridCell">
                    <EventSetter Event="PreviewMouseLeftButtonDown" Handler="DataGridCell_PreviewMouseLeftButtonDown"></EventSetter>
                </Style>
            </DataGrid.CellStyle>
        </DataGrid> 
```

ResultSet 属性是一些DataTable。

当我编辑某些单元格时，此更改不会反映在 ResultSet 上。我该如何解决？谢谢！

# mdx - 选择过去 n 周的同一天

> ID：11761071
> 
> 赞同：0
> 
> 时间：2012-08-01T14:06:37.887
> 
> 标签：mdx

我需要一种优雅的方式来选择过去 13 周或更长时间内每周的同一天。我尝试了以下解决方案：

```
SELECT
{
[Date].[Year-Month-Day].[Day].&[2007]&[10]&[2],
ParallelPeriod([Date].[Year-Month-Day].[Day],7, [Order Date].[Year-Month-Day].[Day].&[2007]&[10]&[2]),
ParallelPeriod([Date].[Year-Month-Day].[Day],14, [Order Date].[Year-Month-Day].[Day].&[2007]&[10]&[2])
} ON ROWS,
{} ON COLUMNS
FROM [Adventure Works Cube] 
```

返回两个星期二。但是在 13 个月的时间里，我需要添加许多代码行。

我将日期 2007-10-02 视为示例日期，稍后我将在代码中将其替换为参数。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:16:56.763

你可以使用这样的东西：

```
 Filter([Date].[Year-Month-Day].[Day].Members, [Date].[Year-Month-Day].CurrentMember.Properties('Day of Week') = [Date].[Year-Month-Day].[Day].&[2007]&[10]&[2].Properties('Day of Week')) 
```

# java - 如何在java中获得不同的随机值？

> ID：11761081
> 
> 赞同：0
> 
> 时间：2012-08-01T14:07:08.977
> 
> 标签：java

这是我的问题：我有一个整数数组，我会以随机方式恢复 20% 的数组元素。java中是否有一个函数具有多个随机值？我只测试了一个值：

```
Random rand=new Random();
int min=0, max=10;
int valeur = rand.nextInt(max - min + 1) + min; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:49:54.050

获得随机但不同的值的最简单方法是使用 shuffle。

```
List<Integer> list = new ArrayList<>();
for(int i = min; i <= max; i++) list.add(i);
Collections.shuffle(list); 
```

您可以迭代`list`并以随机顺序获取唯一编号。

如果您想要不超过两个和三个其他东西，您甚至可以使用这种方法，方法是将您想要的数字添加到列表中。

顺便说一句：这种方法对于 n 个数字是 O(n)，而生成随机数并检查它们是否已经存在是 O(n^2 * log(n))，这要慢得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:14:36.427

如果我正确理解了您的问题，那么您正在尝试获取“随机”数组。如果是这样，您可以使用以下内容：

```
int nrOfValues = 20;
int[] values = new int[nrOfValues];
for(int i = 0; i < values.length; i++)
{
    values[i] = rand.nextInt(max - min + 1) + min;
} 
```

如果您想获得*不同的*随机值，请尝试以下操作：

```
ArrayList<Integer> values = new ArrayList<Integer>();
int nrOfValues = 20;
for(int i = 0; i < values.length; i++)
{
    int value = rand.nextInt(max - min + 1) + min;
    while(values.contains(value))
        value = rand.nextInt(max - min + 1) + min;
    values.add(value);
} 
```

当然，如果`min`和`max`选择不当，您最终可能会陷入无限循环......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:17:49.293

这将防止数字被使用两次并将获得 20%：

```
 int[] nums = new int[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10};

    Random random = new Random();

    int numsFound = 0;
    int twentyPercent = (int)(nums.length/5F);
    List<Integer> usedIndices = new ArrayList<Integer>();
    while (numsFound < twentyPercent) {
        int index = random.nextInt(nums.length);

        if (!usedIndices.contains(index)) { // not already used?
            System.out.println(nums[index]);
            usedIndices.add(index);
            numsFound++;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T14:16:59.480

试试这个。

```
import java.util.Random;
public class Dice 
{
    public static void main(String[] args)
    {
        // Initialize Variables and Array
        Random rand = new Random();
        int[] numbers = new int[10];
        int min = 0, max = 10;

        // Input Random Number Into 10 Elements Of Array
        for (int i = 0; i < numbers.length; i++)
            numbers[i] = rand.nextInt(max - min + 1) + min;

        // Output 10 Array Cells
        for (int i = 0; i < numbers.length; i++)
            System.out.println(numbers[i]);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T14:19:29.957

我不太明白这个问题。。

据我了解，你需要这样的东西

```
List<Integer> listOfRandomNumbers = new ArrayList<Integer>();
//Initialize this List with required numbers

int numberOfRandomNumbersNeeded = listOfRandomNumbers/5;
int min = 0; 
int max = listOfRandomNumbers.size() - 1;

Random rand = new Random();
Set<Integer> randomNumbers = new HashSet<Integer>();
while(randomNumbers.size() < numberOfRandomNumbersNeeded) {
int value = rand.nextInt(max - min + 1) + min;
randomNumbers.add(listOfRandomNumbers.get(value));
}

System.out.println(randomNumbers); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T16:12:58.590

```
private Integer[] recover(double percentage, Integer[] ints) {
    int numberOfElementsToRecover = (int) (ints.length*percentage);
    List<Integer> list = Arrays.asList(ints);
    Collections.shuffle(list);
    return Arrays.copyOfRange(list.toArray(new Integer[]{}), 0, numberOfElementsToRecover);
} 
```

# php - PHP：CEST 作为时区

> ID：11761082
> 
> 赞同：8
> 
> 时间：2012-08-01T14:07:09.187
> 
> 标签：php, timezone

当使用 /usr/bin/php 在命令行中调用 php 时，它担心我的时区设置。我检查了 phpinfo() 并查找了 php.ini。我想使用 CEST 作为时区并写道；

`date.timezone = CEST`

你看到一个错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-01T14:12:32.487

```
date.timezone = 'Europe/Berlin'; 
```

会给你你想要的。正如@nickb 所提到的，“CEST”不是受支持的时区。另外，不要忘记引号，它必须是有效的字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T14:10:44.767

您的问题是 CEST 时区不在[支持的时区列表中](http://us3.php.net/manual/en/timezones.others.php)。

您可以使用受支持的[CET](http://us3.php.net/manual/en/timezones.others.php)，但我不确定这会如何影响您的用例。

```
date.timezone = "CET" 
```

# sql - SQL：使用数学运算匹配表

> ID：11761084
> 
> 赞同：4
> 
> 时间：2012-08-01T14:07:15.963
> 
> 标签：sql, sas

我有一个包含 300'000 个单位的表格，其中每个单位的位置由一个坐标定义`(X,Y)`。我想知道哪些单位与每个单位都在一定距离内？

前任。

```
UnitiID   X   Y
A         10  15
B         10  25
C         25  15

proc sql;
    create table work.Test2 as
    select distinct
    a.UnitID,
    a.X,
    a.Y,
    b.UnitID as CloseUnit label="CloseUnit",
    sqrt( (a.X-b.X)**2 + (a.Y-b.Y)**2 ) as distance
    from
    work.Test as a
    left join
    work.Test as b
    on
    0<sqrt( (a.X-b.X)**2 + (a.Y-b.Y)**2 ) <=15
    ;
quit; 
```

结果：

```
UnitiID   X   Y   CloseUnit  Distance
A         10  15  B          10
A         10  15  C          15
B         10  25  A          10
C         25  15  A          15 
```

这需要整个表的大量 cpu 时间，因为我们将进行 300'000^2 比较，我该如何执行此任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:14:41.633

我想到了几个优化。首先，您可以检查沿 X 和 Y 轴的距离。如果其中一个大于 15，则这些点不能在范围内。子查询将指示数据库首先进行更快的检查：

```
select  *
from    (
        select  a.X as aX
        ,       b.X as bX
        ,       a.Y as aY
        ,       b.Y as bY
        from    Test a
        join    Test b
        on      abs(a.X - b.X) <= 15
                and abs(a.Y - b.Y) <= 15
        ) as SubQueryAlias
where   sqrt( (aX-bX)**2 + (aY-bY)**2 ) <= 15 
```

第二个优化是将`sqrt`计算向右移动：

```
where   (aX-bX)**2 + (aY-bY)**2 <= 15**2 
```

平方比生根快，尤其是在常数上进行时。

如需进一步优化，请查看[关于 Geohashing 的 Wikipedia 文章](http://en.wikipedia.org/wiki/Geohash)。

# matlab - matlab popupmenu 回调从未调用过

> ID：11761089
> 
> 赞同：0
> 
> 时间：2012-08-01T14:07:29.357
> 
> 标签：matlab, user-interface, popupmenu

我的 matlab gui 中有一个名为 listBitDepth 的弹出菜单。

我用值填充它

```
bitDepthStr{1}= ' auto detect  '; mapBitDepthToListIndex(1) = 0;
bitDepthStr{2}= ' 8 bit   (256)'; mapBitDepthToListIndex(2) = 8;
bitDepthStr{3}= '10 bit  (1024)'; mapBitDepthToListIndex(3) = 10;
bitDepthStr{4}= '12 bit  (4096)'; mapBitDepthToListIndex(4) = 12;
bitDepthStr{5}= '14 bit (16384)'; mapBitDepthToListIndex(5) = 14;
bitDepthStr{6}= '16 bit (65536)'; mapBitDepthToListIndex(6) = 16;
set(handles.listBitDepth,'String',bitDepthStr); 
set(handles.listBitDepth,'value',1); 
```

哪个有效。

我有一个回调函数

```
function listBitDepth_Callback(hObject, eventdata, handles)
val = get(hObject,'Value')
... 
```

但是，如果我从弹出菜单的列表中选择一个项目，则不会调用它。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:42:55.297

如果在代码行 set(handles.listBitDepth,'value',1); 之后运行到断点后运行以下命令会得到什么？?

```
get(handles.listBitDepth,'callback') 
```

你应该看到：

答案=

```
@(hObject,eventdata)popuptest('listBitDepth_Callback',hObject,eventdata,guidata(hObject)) 
```

# build - 在 Windows 服务器或目标产品（例如：Windows 7）上安装 Build Machine for Windows 产品的位置

> ID：11761090
> 
> 赞同：0
> 
> 时间：2012-08-01T14:07:31.097
> 
> 标签：build, jenkins, build-automation

我正在为面向 Windows 7（有一天也是 Windows 8）的 Windows 产品设置 Jenkins 构建服务器。它应该编译 C++ 和 C# 代码。我想问一下在目标平台（Windows 7）还是在 Windows Server 上部署构建服务器的最佳实践？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:03:33.397

最好在 Windows 平台上进行部署，因为将 Jenkins 构建服务器与目标机器隔离是一种很好的做法。如果目标机器出现问题，您的 Jenkins 设置将可用，这可以帮助您节省时间并再次重复工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:13:49.103

我会建议一个设置，您可以在任何合适的机器上安装 Jenkins Master（Web 界面）（我​​个人更喜欢 linux 服务器，但这只是我的意见，在您的情况下，我建议使用 Windows 服务器），然后在您的目标平台上设置一个 Jenkins 从站，执行实际构建。因此，您将构建机器与 Jenkins master 分开，然后它只负责启动构建并为 Web 界面提供所有构建统计信息。如果目标机器坏了，Jenkins 仍然可以访问，你可以通过设置另一个从机来解决这个问题。

# javascript - Javascript获取网页的最后修改

> ID：11761096
> 
> 赞同：3
> 
> 时间：2012-08-01T14:08:03.980
> 
> 标签：javascript, google-chrome-extension, xmlhttprequest, last-modified

我正在尝试创建一个 javascript 函数，该函数返回它收到的远程 url 的最后修改日期。我尝试了许多不同的方法，但似乎都没有奏效。下面的代码看起来可能很接近，但不幸的是不起作用。

```
function getlastmod(url) {
    var req = new XMLHttpRequest();
    req.open("GET", url, false);
    req.getResponseHeader("Last-Modified");
    req.send("");
    return req.responseText;
} 
```

该功能将在我正在制作的 chrome 扩展中使用。感谢您的帮助-乔希

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T14:17:05.937

一些问题：

*   您正在尝试在建立连接之前获取标头。您只能在服务器响应后读取标头。
*   你没有对结果做任何事情

试试这个：

```
function getlastmod(url, cb) {
    var req = new XMLHttpRequest();
    req.open("GET", url);
    req.send(null);
    req.addEventListener("load", function() {
        cb(req.getResponseHeader("Last-Modified"));
    }, false);
}

getlastmod("/", function(v) {
    console.log(v); //"Wed, 01 Aug 2012 14:13:22 GMT"
}); 
```

这需要您的扩展程序请求[正确的权限](http://code.google.com/chrome/extensions/xhr.html)（因为您正在执行跨域 xhr）以及服务器发送标头。

# google-maps - 路口列表

> ID：11761102
> 
> 赞同：-2
> 
> 时间：2012-08-01T14:08:35.457
> 
> 标签：google-maps, google-maps-api-3, map

我想在给定坐标周围的半径范围内获取路口坐标列表。我想应该有一种方法可以提取两条道路相交处的坐标，但是我找不到。请指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:19:56.623

该功能在 Google Maps API v3 中不可用。

# jquery - 对象没有方法 datepicker

> ID：11761105
> 
> 赞同：8
> 
> 时间：2012-08-01T14:08:47.150
> 
> 标签：jquery, jquery-ui, datepicker

我在`Uncaught TypeError: Object [object Object] has no method 'datepicker'`这里的 javascript 中遇到错误：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>
<script type='text/javascript'>
$(function() {
    $("#birthday").datepicker({changeMonth: true});
});
</script> 
```

这是我要添加到的生日项目：

```
<!--// BIRTHDAY //-->
<li class="field">
    <label for="birthday">Birthday</label>
    <div class="field"><input type="text" id="birthday" name="birthday" value="" class="" /></div>
</li> 
```

如您所见，我在尝试使用 datepicker 的位置上方包含了 jquery ui 的源代码。我从[http://jqueryui.com/docs/Downloading_jQuery_UI](http://jqueryui.com/docs/Downloading_jQuery_UI)获得了 URL，所以我很确定这是一个有效的 URL。我还尝试上传文件并链接到本地​​副本，但仍然遇到同样的错误。我还能尝试什么？

编辑：

我确实使用此加载了 jquery 库：`<script type="text/javascript" src="/includes/js/jquery-1.7.2.min.js"></script>`并使用以下脚本进行了验证：

```
if (jQuery) {
    alert("jQuery library is loaded!");
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-01T16:24:07.650

从我们的讨论中，我们发现 $ 变量（ 的别名`jQuery`）的行为不正常。通常，这是因为另一个 JS 插件已更改`$`为代表其他内容。为了解决这个问题，您可以像这样包装您的 jQuery 代码：

```
jQuery(function($){
    //all jQuery code which uses $ needs to be inside here
}); 
```

这将在函数范围内改变 $ 的含义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T04:36:52.770

您可能遇到了 jQuery 冲突。在 noConflict 模式下试一试，如下所示：

```
<script type="text/javascript">
    (function($) {
        $(document).ready(function(){
            $("#datepicker").datepicker();
        });
    })(jQuery);
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-29T17:37:33.797

$ 会像

```
$(function($) {
    $( "#dateTasted" ).datepicker({
      changeMonth: true,
      changeYear: true,
      dateFormat: "yy-mm-dd"    
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-06T19:08:13.990

```
<script type="text/javascript">
 (function($){
         var pickerOpts = {
           // minDate: new Date(),
            //maxDate: "+3m,",
            showButtonPanel: true,
            showOn: "button",
            buttonImage: "images/cal.png",
            };
    $("#birthday").datepicker(pickerOpts);
      })(jQuery);
</script> 
```

[链接源解决方案](https://stackoverflow.com/questions/11760582/why-dont-my-date-picker-and-time-picker-show-up)

# c# - HTTPClient 使用登录凭据 C# Sharepoint 请求 JSON

> ID：11761110
> 
> 赞同：0
> 
> 时间：2012-08-01T14:09:06.337
> 
> 标签：c#, asp.net, .net, sharepoint

我需要在共享点站点上对 JSON 数据发出 http 请求。通过浏览器访问数据时，首先会提示我输入用户名和密码。输入我的凭据后，我可以查看 JSON。我是 C# 新手，想知道形成请求、检索响应和解析 JSON 的最佳方法。我以前在 java 中处理过 JSON 请求，但从未处理过共享点凭据。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:25:56.507

干得好：

```
private void login_Click(object sender, EventArgs e)
{
    string username = uname.Text;
    string password = pword.Text;
    string url = "THE SITE URL HERE";
    var req = (HttpWebRequest)WebRequest.Create(url);
    req.Credentials = new NetworkCredential(username, password);
    var response = req.GetResponse();
    //Do Stuff with response
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:17:34.300

您应该能够创建一个 WebRequest 并在那里传递您的凭据，或者如果这不起作用，请查看有关设置您的共享点凭据的答案。

您应该可以创建一个 HttpWebRequest 并设置 ClientCertificates 属性以包含您的 .pfx 文件中的证书，除非您遇到其他一些权限问题，因为您不需要 ServerCertificateValidationCallback 处理程序来建立作为客户端到远程服务器的 SSL 连接。仅当您希望拦截、检查和/或覆盖远程计算机证书的默认验证行为时，才需要处理程序。

[https://stackoverflow.com/questions/5595049/servicepointmanager-servercertificatevalidationcallback-question](https://stackoverflow.com/questions/5595049/servicepointmanager-servercertificatevalidationcallback-question)

# java - Java Date after before time 在生产中没有按预期工作

> ID：11761118
> 
> 赞同：1
> 
> 时间：2012-08-01T14:09:54.490
> 
> 标签：java

这是我的代码：

```
long treatmentTimeBeginDay;
if ( effectiveBegin.after(businessClosing) ) {
    LOGGER.debug("Compute treatment time for beginDay = 0: the effective begin {} is after business closing {}",
                            config.formatLogDate(effectiveBegin),config.formatLogDate(businessClosing));
    treatmentTimeBeginDay = 0;
} else {
    LOGGER.debug("Compute treatment time for beginDay between {} and {}",config.formatLogDate(effectiveBegin),config.formatLogDate(businessClosing));
    treatmentTimeBeginDay = businessClosing.getTime() - effectiveBegin.getTime();
}
Preconditions.checkState( treatmentTimeBeginDay >= 0 , "Internal bug! treatmentTimeBeginDay="+treatmentTimeBeginDay ); 
```

EffectiveBegin 和 businessClosing 不为空，也由 Guava 前置条件检查，您可以在日志中看到它...

它在大多数情况下运行良好，但在生产中我们有以下错误：

> 引起：java.lang.IllegalStateException：内部错误！治疗时间开始日=-852

我不会给你剩下的堆栈/代码，因为它应该足够了......我的 Guava checkState 调用显式引发了异常。

我也有日志：

> DEBUG [BusinessHoursUtils.java:257] llairie - 计算 beginDay 的处理时间，介于 2012 年 7 月 19 日晚上 8:00 和 2012 年 7 月 19 日晚上 8:00 之间

（我现在不能用 Millies 记录）

* * *

我想了解的是。

如果我得到我给你的日志，这意味着测试`if ( effectiveBegin.after(businessClosing) )`是错误的，所以 EffectiveBegin 应该在或者等于 businessClosing 之前。

在这种情况下，effectiveBegin 时间戳应低于 businessClosing 时间戳。

所以当我这样做时，`businessClosing.getTime() - effectiveBegin.getTime();`我希望得到一个正数。

所以请有人告诉我为什么我的异常消息中有-852毫秒？这怎么可能？

* * *

**编辑：**我怀疑一个棘手的情况，即 after/before 方法在几毫秒内不起作用，这似乎是问题所在，因为我可以在本地重现它。

运行时的 2 个日期是：

```
businessClosing = {java.util.Date@503}"Thu Jul 19 20:00:00 CEST 2012"
fastTime = 1342720800000
cdate = null

effectiveBegin = {java.sql.Timestamp@498}"2012-07-19 20:00:00.999"
nanos = 999000000
fastTime = 1342720800000
cdate = {sun.util.calendar.Gregorian$Date@512}"2012-07-19T20:00:00.000+0200" 
```

使用这些运行时对象，`effectiveBegin.after(businessClosing) = false` 如果我在 DB 中设置有效开始 = 2012-07-19 20:00:01.000，1 毫秒后，那么测试 = true

在这两种情况下，我都希望`effectiveBegin.after(businessClosing) = true`

似乎，就像 ametren 所怀疑的那样，我的日期不同。

那么，到底有什么问题呢？我们不应该能够以毫秒精度比较 2 日期实例吗？即使它们是 java.util.Date 的子类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T16:00:17.257

这里的问题是你混合了时间戳和日期。`Timestamp.after(Date)`仅比较日期组件的毫秒数，这两个组件都`1342720800000`在您的示例中。但是，`Timestamp.getTime()`也考虑`999000000ns = 999ms`存储在时间戳中并将返回的纳秒 () `1342720800999`。所以`businessClosing.getTime() - effectiveBegin.getTime()`将`-999`作为结果返回。

要解决此问题，您可以将 if 语句修改为，也可以在 if 语句之前`if(effectiveBegin.compareTo(businessClosing) > 0)`将其转换`businessClosingDate`为 a `Timestamp`。

# machine-learning - 可以迭代地训练具有检测到误报的 SVM 吗？

> ID：11761119
> 
> 赞同：4
> 
> 时间：2012-08-01T14:09:58.623
> 
> 标签：machine-learning, svm

我正在研究图像处理中的机器学习问题。我想通过使用定向梯度直方图 (HOG) 和支持向量机 (SVM) 来获取图像中对象的位置。我已经阅读了几篇关于训练 SVM 的文章和教程。设置非常标准。我已经标记了正训练图像，现在需要生成一组负训练样本。

在文献中，经常发现通过随机选择位置来生成负训练样本的方法。我还看到了一些方法，其中在选择随机负样本的连续步骤中，检测的误报再次用作负训练样本。但是，我想知道是否不能从一开始就普遍使用这种方法。因此，我们只会随机生成一个错误的训练样本，运行检测并将误报再次放入负训练集中。这对我来说似乎是一个很明显的策略，但我想知道我是否遗漏了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:53:28.760

对我来说，听起来你想在线/增量地训练 SVM 分类器，即用新样本更新分类器。此类方法通常仅在随着时间的推移出现新数据时才使用。在您的情况下，您似乎可以生成一整套负训练样本，因此无需增量训练。我倾向于说一次训练分类器会比增量训练更好（正如 larsmans 所暗示的那样）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T10:31:31.660

该方法背后的理论在P. Felzenszwalb、R. Girshick、D. McAllester、D. Ramanan 在他们的 PAMI 论文中的[基于判别训练的基于部件的模型的目标检测中进行了阐述。](http://www.cs.brown.edu/~pff/papers/lsvm-pami.pdf)本质上，您的起始负集无关紧要，如果您迭代地添加硬样本（SVM 边距 > -1），您将始终收敛到同一个分类器。从单个否定开始只会使这种收敛速度变慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:43:01.690

（再说一次，我不是图像处理专家，所以对此持保留态度。）

> 我想知道是否不能从一开始就普遍使用这种方法。

您需要某种方法来检测分类运行中的误报。为此，您需要一个基本事实，也就是说，您需要一个人参与其中。实际上，您将进行[主动学习](https://en.wikipedia.org/wiki/Active_learning_%28machine_learning%29)。如果这就是你想要做的，你也可以从一堆手工标记的负面例子开始。

或者，您可以将其设置为[PU 学习](https://en.wikipedia.org/wiki/PU_learning)问题。我不知道这是否适用于图像，但对于文本分类，它有时会起作用。

# .net - 当 .NET 进程主线程完成时，其他当前正在执行的线程会发生什么情况？

> ID：11761125
> 
> 赞同：0
> 
> 时间：2012-08-01T14:10:15.573
> 
> 标签：.net, multithreading

当 .NET 进程主线程完成时，其他当前正在执行的线程会发生什么情况？如果他们分配了必须在停止之前处置的非托管资源怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:12:07.167

如果其他线程将[Thread.IsBackground](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx)设置为 true，它们将立即退出。否则应用程序将继续运行（如果它是 WinForms 或 WPF 应用程序，则不可见）。

如果其他线程具有非托管资源，则这些资源通常会在进程退出时由操作系统关闭/释放（文件句柄等。此规则可能存在我不熟悉的例外情况）。当您检测到应用程序正在退出时，最好手动释放这些资源。

# c# - ASP.NET 中基于智能卡的远程考勤 Web 应用程序

> ID：11761128
> 
> 赞同：1
> 
> 时间：2012-08-01T14:10:23.060
> 
> 标签：c#, asp.net, .net, winforms, web-services

我的最新项目是基于智能卡的出勤应用程序。框架将是 .NET (ASP.NET / C#)

所以场景类似于：- 客户有 3 家名为 A、B、C 的食品连锁店。所有商店都将有一个基于智能卡的员工门禁系统（这是我最初建议的，因为没有人力资源经理）

因此，当员工进入或离开商店（全部三个）时，他们的登录/注销信息、姓名、登录/退出时间将对远程位置的所有者提供（可能在所有者可以登录的网站管理面板上）进入管理面板，然后他可以检查员工的状态，或者我们可以给他发邮件）

就这样。虽然我的问题不是很具体，但我只是想要您对此的看法和建议，因为项目正处于规划阶段。

最好的方法应该是什么，例如使用基于 Windows 的软件来保存员工记录/数据，然后通过 web 服务将其发送到网站。是否有任何特定的基于 .NET 的框架来读取智能卡数据？我还需要有关智能卡的其他信息，例如是否有任何写卡器可以在他的卡上设置员工姓名和 ID。我不打算自己写员工智能卡，但如果是这种情况，那怎么办？

我感谢您的宝贵意见和指导方针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:22:10.040

我之前做过一个有类似需求的项目。

我们提出的计划如下。

1.  所有远程位置都将配备一个小型服务器，该服务器将处理侧面的智能卡部分并将所有数据传输到远程服务器。

2.  将设置一个服务器来存储所有数据并根据要求提供。

该解决方案具有可扩展性，因为所有新位置都将拥有一个服务器，该服务器再次将所有数据传输到主服务器以进行持久存储。

如果与某个位置的 Internet 连接中断，则一侧的服务器仍将能够通过 SmartCard 处理访问并存储信息，直到 Internet 连接再次可用并发送数据为止。

至于卡片：我们应该使用 RFID 卡片。我们有一个合作伙伴提供卡片以及所有终端和写入器。

# c# - 尝试在任何 CPU 上使用 TaskScheduler 时出现 BadImageFormatException

> ID：11761129
> 
> 赞同：1
> 
> 时间：2012-08-01T14:10:24.783
> 
> 标签：c#, .net, 32bit-64bit, comobject, anycpu

我们正在尝试将程序从 32 位更改为任何 CPU。该程序在 .NET 3.5 上使用 C# 编写。

我们正在使用 Windows 任务计划程序 COM 包装器。

应用程序可以编译，但是当我们尝试在 64 位平台上运行它时，我们会收到以下错误：

> **BadImageFormatException：** 无法加载文件或程序集“Interop.TaskScheduler，Version=1.0.0.0，Culture=neutral，PublicKeyToken=4b71cab8d8e4499f”或其依赖项之一。试图加载格式不正确的程序。

更新：我们在 Any CPU 中创建了一个新的 C# 项目，以 TaskScheduler 作为参考，并使用非常简单的 2 行代码（创建 TaskSchedulerClass 的实例并将一行写入控制台）。我们在同一个 64 位平台上运行它，它工作正常。但是，整个应用程序仍然无法正常工作。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:13:54.773

由于它是一个 COM 互操作程序集，可能只有 32 位。您必须将项目保持为 32 位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:42:29.050

您可以使用 WMI 通过标准托管接口安排任务，以避免使用限制您以 32 位运行的 COM 组件。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa394399(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394399(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:16:01.027

您的程序集只能工作 32 位，尝试查找 x64 版本或替代程序集

# java - Hadoop 作业在减少时失败，Java.io.IOException: Type mismatch in value from map

> ID：11761135
> 
> 赞同：0
> 
> 时间：2012-08-01T14:10:39.467
> 
> 标签：java, hadoop, mapreduce

我的`Map`课是

```
 public static class MapClass extends Mapper<LongWritable, Text, Text, LongWritable> {

        public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {
            // your map code goes here
            String[] fields = value.toString().split(",");
            String year = fields[1];
            String claims = fields[8];

            if (claims.length() > 0 && (!claims.startsWith("\""))) {
                context.write(new Text(year), new LongWritable(Long.parseLong(claims)));
            }
        }
    } 
```

我的`Reduce`课看起来像

```
 public static class Reduce extends Reducer<Text, LongWritable, Text, Text> {

        public void reduce(Text key, Iterable<LongWritable> values, Context context) throws IOException, InterruptedException {
            // your reduce function goes here
            context.write(key, new Text("hello"));
        }
    } 
```

数据集看起来像

```
3070801,1963,1096,,"BE","",,1,,269,6,69,,1,,0,,,,,,,
3070802,1963,1096,,"US","TX",,1,,2,6,63,,0,,,,,,,,, 
```

当我运行带有配置的程序时

```
 Job job = new Job();
        job.setJarByClass(TopKRecords.class);

        job.setMapperClass(MapClass.class);
        job.setReducerClass(Reduce.class);

        FileInputFormat.setInputPaths(job, new Path(args[0]));
        FileOutputFormat.setOutputPath(job, new Path(args[1]));

        job.setJobName("TopKRecords");
        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(Text.class); 
```

我看到错误为

```
java.io.IOException: Type mismatch in value from map: expected org.apache.hadoop.io.Text, recieved org.apache.hadoop.io.LongWritable
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.collect(MapTask.java:1019)
    at org.apache.hadoop.mapred.MapTask$NewOutputCollector.write(MapTask.java:691)
    at org.apache.hadoop.mapreduce.TaskInputOutputContext.write(TaskInputOutputContext.java:80)
    at com.hadoop.programs.TopKRecords$MapClass.map(TopKRecords.java:35)
    at com.hadoop.programs.TopKRecords$MapClass.map(TopKRecords.java:26)
    at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

去这里有什么问题？

我在这里看不到任何不匹配的原因

```
Mapper<LongWritable, Text, Text, LongWritable>
Reducer<Text, LongWritable, Text, Text> 
```

**更新**

设置以下内容后，事情开始起作用

```
 job.setMapOutputKeyClass(Text.class);
        job.setMapOutputValueClass(LongWritable.class); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:26:12.810

在设置过程中，您还需要以下行：

```
job.setMapOutputValueClass(LongWritable.class); 
```

来自 Hadoop 20.2 [Javadoc](http://hadoop.apache.org/common/docs/r0.20.2/api/org/apache/hadoop/mapreduce/Job.html#setMapOutputKeyClass%28java.lang.Class%29)：

> 这允许用户将映射输出值类指定为不同于最终输出值类。

为清楚起见，您还可以添加：

```
job.setMapOutputKeyClass(Text.class); 
```

但在这种情况下没有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:24:42.647

这不是很明显的错误吗？

```
context.write(new Text(year), new LongWritable(Long.parseLong(claims))); 
```

你的映射器是

```
Mapper<LongWritable, Text, Text, LongWritable> 
```

您在这里交换了键和值类型。

# jsf-2 - JSF El 表达式保留旧值（JSF 生命周期）

> ID：11761136
> 
> 赞同：0
> 
> 时间：2012-08-01T14:10:42.413
> 
> 标签：jsf-2, richfaces, page-lifecycle

我用 JSF2.0 和richfaces 创建了一个测试项目。我正在尝试绘制图表。现在，我从数据库到 bean 和数据表中获得了价值。现在，当我想将此值传递给 javascript 变量并发现The BalusC 的这个[答案非常有用时。](https://stackoverflow.com/a/11023633/591559)它工作正常，但 javascript 变量在 oncomplete="jsonDemo('#{kpilist.json}')" 之后获得的值。即#{kpilist.json} 的值不是最新的，它是最后一个。

我已经打印了#{kpilist.json} 的值。如果它是在数据表之后打印的，则该值是当前的。如果它在数据表之前打印，则它是最后一个值。自从 a4j:ajax 的 oncomplete 属性在一切完成后执行以来的任何方式，为什么 #{kpilist.json} 不显示最新值？Richfaces和jsf组件的各种listener和oncomplete属性的执行顺序是什么？

我的托管 Bean：

```
@ManagedBean(name = "kpilist")
@ViewScoped
public class KPIListController implements Serializable {

    private static final long serialVersionUID = 1L;
    boolean state = true;
    String selectedKPIType;
    String selectKPITime = "D";
    boolean renderDatatable;
    String json;

    public String getJson() {
        return json;       
    }

    public boolean isRenderDatatable() {
        return renderDatatable;
    }

    public void setRenderDatatable(boolean renderDatatable) {
        this.renderDatatable = renderDatatable;
    }

    public boolean isState() {
        return state;
    }

    public List<String> showViewList() {
        Logger.getLogger(KPIListController.class.getName()).warning("Show view List:");
        KPIDAO kpiDAO = new KPIDAO();
        try {
            Logger.getLogger(KPIListController.class.getName()).info("Into show view List ---select One");
            return kpiDAO.showViewList(selectKPITime);
        } catch (SQLException ex) {
            ex.printStackTrace();
            Logger.getLogger(KPIListController.class.getName()).log(Level.SEVERE, null, ex);
            return null;
        }
    }

    public void setState(boolean state) {
        this.state = state;
    }

    public String getSelectedKPIType() {
        return selectedKPIType;
    }

    public void setSelectedKPIType(String selectedKPIType) {
        this.selectedKPIType = selectedKPIType;
    }

    public String getSelectKPITime() {
        return selectKPITime;
    }

    public void setSelectKPITime(String selectKPITime) {
        this.selectKPITime = selectKPITime;
    }

    public List<KPI> getKPI() {
        Logger.getLogger(KPIListController.class.getName()).warning("Get KPI Values:");
        KPIDAO kpiDAO = new KPIDAO();        
         List<KPI> kpiList = new ArrayList<KPI>();

        try {
            kpiList = kpiDAO.getKPI(selectedKPIType);  
            Logger.getLogger(KPIListController.class.getName()).warning("KPI List:"+kpiList.size());            

        } catch (SQLException ex) {
            ex.printStackTrace();
            return null;
        }
         Gson gson = new Gson();
        json= gson.toJson(kpiList);
        return kpiList;
    }

    public void resetFormValues() {       
        Logger.getLogger(KPIListController.class.getName()).warning("Reset form:");
        selectedKPIType = "--";
    }
} 
```

我的观点：

```
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:rich="http://richfaces.org/rich" 
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>

    </h:head>
    <h:body>
        <ui:composition template="/contentTemplate.xhtml">
            <ui:define name="windowTitle">KPI Index</ui:define>
            <ui:define name="content" >

                <h:outputScript name="js/graphics/jquery.js"/>   
                <h:outputStylesheet name="/css/jquery-ui-1.8.22.custom.css"/>
                <h:outputScript name="js/graphics/jquery-ui-1.8.22.custom.min.js"/>
                <h:outputScript name="js/OpenLayers/OpenLayers.js"/>

                <h:outputScript name="js/graphics/raphael-min.js"/>
                <h:outputScript name="js/graphics/canvg.js"/>
                <h:outputScript name="js/graphics/paths.js"/> 
                <h:outputScript name="js/graphics/draw.js"/> 

                <h:form id="ins_sel_form">
                    <h:outputText value="KPI TIME FRAME"/>
                    <h:selectOneRadio value="#{kpilist.selectKPITime}"  >
                        <f:selectItem itemLabel="DAILY" itemValue="D"   />
                        <f:selectItem itemLabel="WEEKLY" itemValue="W"  />
                        <f:selectItem itemLabel="LAST WEEK" itemValue="LW"  />    
                        <a4j:ajax event="change" render="ins_sel_form:selectOnemenu dataPnl"  listener="#{kpilist.resetFormValues()}" /> 
                    </h:selectOneRadio>

                    <h:outputText value="Major KPI Type"/>
                    <h:selectOneMenu id="selectOnemenu" value="#{kpilist.selectedKPIType}"  >
                        <f:selectItem itemValue="--" itemLabel="--"></f:selectItem>
                        <f:selectItems itemValue="#{item.toString()}" var="item" itemLabel="#{item.toString()}" value="#{kpilist.showViewList()}"/>
                        <a4j:ajax event="change" render="dataPnl"  oncomplete="jsonDemo('#{kpilist.json}')" /> 
                    </h:selectOneMenu>

                    <h:outputText value="Show / Hide Map"/>

                </h:form>
                <rich:panel  id ="dataPnl">

                        <rich:dataTable id="kpiValueTable" value="#{kpilist.KPI}" var="kpi" style="width:100%" rows="20" rendered="#{kpilist.selectedKPIType!=null and kpilist.selectedKPIType !='--' }" >                            

                            <rich:column>
                                <f:facet name="header" >
                                    <h:outputText value ="Value"></h:outputText>
                                </f:facet>
                                <h:outputText value="#{kpi.KPIValue}"></h:outputText>
                            </rich:column>

                        </rich:dataTable>
                    JSON String :  <h:outputText  id="json" value ="#{kpilist.json}"/>   
                        <center><rich:dataScroller for="kpiValueTable" rendered="#{kpilist.selectedKPIType!=null and kpilist.selectedKPIType!='--'}"/></center>
                    </rich:panel>

                <rich:panel id="map" style="display: none;">
                </rich:panel>

            </ui:define>
        </ui:composition>
    </h:body>
</html> 
```

Javascript：

```
function jsonDemo(jsonString){

    console.log("Chart data already retrieved: " + jsonString);
    var data = $.parseJSON(jsonString);    
    $.each(data,function(i,val){
         console.log("The value of i: "+i+" The val: "+val.NCELLCLUSTER);
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:31:27.833

您的 EL 表达式在`oncomplete`JSF 生成 HTML/JS 代码时进行评估（因此，在初始 HTTP 请求中）。`oncomplete`正如您所期望的那样，目前在 JS 中执行它并没有被评估。评估 EL 表达式的不是网络浏览器，而是网络服务器。`oncomplete`顺便说一下，在 之后执行`render`。使用 HTTP 流量调试器和 JS 调试器（在 Chrome/IE9/Firebug 中按 F12），您可以轻松跟踪它。

有几种解决方法：

1.  只需在 jQuery 中调用`$.get()`or并在[普通 servlet](https://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax/4113258#4113258)中完成这项工作，或者更好的是 JAX-RS Web 服务。`$.getJSON()`

    ```
    function jsonDemo() {
        $.getJSON("servletURL", function(jsonData) {
            // ...
        });
    } 
    ```

2.  替换为您通过 ajax 呈现/更新的`oncomplete`一些。`<h:outputScript>`

    ```
    <a4j:ajax ... render="json" />
    ...
    <h:panelGroup id="json">
        <h:outputScript rendered="#{not empty bean.json}">jsonDemo(#{bean.json});</h:outputScript>
    </h:panelGroup> 
    ```

* * *

**与具体问题无关**，顺便说一句，您在传递 JSON 数据方面存在概念错误。您在像这样作为参数传递时对其进行字符串化，`jsonDemo('#{kpilist.json}')`然后使用`$.parseJSON()`. 这是没有意义的。像这样删除参数周围的那些单引号`jsonDemo(#{kpilist.json})`，然后您就不再需要该`$.parseJSON()`行了。然后数据*已经*是 JSON 格式了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:24:51.273

尝试从 更改`a4j:ajax`为`f:ajax`

不确定是否`a4j:ajax`适用于普通的 JSF 组件

# html - 如何在cfoutput中添加#？

> ID：11761137
> 
> 赞同：1
> 
> 时间：2012-08-01T14:10:42.633
> 
> 标签：html, ajax, string, coldfusion

我必须从 ajax 查询中呈现以下 html 标签。问题是 cfml 将任何以 # 为前缀的字符串视为标识符。所以我得到一个错误。

```
 <cfoutput>
                <table style="display:none;" width="100%" border="1" cellpadding="2" cellspacing="0">
                    <tr>
                        <td width="43%" bgcolor="#649DCA"><strong>Class</strong></td>
                        <td width="20%" bgcolor="#649DCA"><strong>Site</strong></td>
                        <td width="47%" bgcolor="#649DCA"><strong>Date/Time</strong></td>
                    </tr>
  </cfoutput> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T14:13:58.747

你只需要加倍你的#'s。

```
<td width="43%" bgcolor="##649DCA"><strong>Class</strong></td> 
```

就个人而言，我可能会单独使用 CSS 和样式表。

# mysql - MySQL ON DUPLICATE KEY UPDATE 问题

> ID：11761140
> 
> 赞同：0
> 
> 时间：2012-08-01T14:11:06.033
> 
> 标签：mysql

我有一张桌子

```
CREATE TABLE IF NOT EXISTS `b_sale_order_props_value` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `ORDER_ID` int(11) NOT NULL,
  `ORDER_PROPS_ID` int(11) DEFAULT NULL,
  `NAME` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `VALUE` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `CODE` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `IX_SOPV_ORD_PROP_UNI` (`ORDER_ID`,`ORDER_PROPS_ID`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1921 ; 
```

我查询

```
INSERT INTO `b_sale_order_props_value` 
    SET `ORDER_ID`=316, 
        `ORDER_PROPS_ID`=30, 
        `NAME`='ADDRES', 
        `VALUE`='Test addres' 
    ON DUPLICATE KEY UPDATE `NAME`='ADDRES',`VALUE`='Test addres'; 
```

返回错误

```
Duplicate entry '316-30' for key 'IX_SOPV_ORD_PROP_UNI' 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:17:54.487

太大而无法作为评论发布 - 您的查询在这里有效：

```
mysql> use test;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> CREATE TABLE IF NOT EXISTS `b_sale_order_props_value` (
    ->   `ID` int(11) NOT NULL AUTO_INCREMENT,
    ->   `ORDER_ID` int(11) NOT NULL,
    ->   `ORDER_PROPS_ID` int(11) DEFAULT NULL,
    ->   `NAME` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
    ->   `VALUE` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
    ->   `CODE` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
    ->   PRIMARY KEY (`ID`),
    ->   UNIQUE KEY `IX_SOPV_ORD_PROP_UNI` (`ORDER_ID`,`ORDER_PROPS_ID`)
    -> ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1921 ;
Query OK, 0 rows affected (0.11 sec)

mysql> insert into b_sale_order_props_value (ORDER_ID, ORDER_PROPS_ID, NAME, VALUE, `CODE`) values (316, 30, 'replaceme', 'replaceme', 'replaceme');
Query OK, 1 row affected (0.42 sec)

mysql> INSERT INTO `b_sale_order_props_value`
    ->     SET `ORDER_ID`=316,
    ->         `ORDER_PROPS_ID`=30,
    ->         `NAME`='ADDRES',
    ->         `VALUE`='Test addres'
    ->     ON DUPLICATE KEY UPDATE `NAME`='ADDRES',`VALUE`='Test addres';
Query OK, 2 rows affected (0.04 sec)

mysql> select * from b_sale_order_props_value;
+------+----------+----------------+--------+-------------+-----------+
| ID   | ORDER_ID | ORDER_PROPS_ID | NAME   | VALUE       | CODE      |
+------+----------+----------------+--------+-------------+-----------+
| 1921 |      316 |             30 | ADDRES | Test addres | replaceme |
+------+----------+----------------+--------+-------------+-----------+
1 row in set (0.00 sec) 
```

# vb.net - Windows 窗体 - 来自父窗体的 RaiseEvent

> ID：11761144
> 
> 赞同：0
> 
> 时间：2012-08-01T14:11:22.887
> 
> 标签：vb.net, winforms, events, logging

我现在正在 VB.NET 中修复一个 Windows 窗体项目。

我需要调用`RaiseEvent`父表单的事件，以便将日志记录路由到调用父表单的应用程序。

与此类似： [RaiseEvent from a UserControl that's put on a UserControl that's on a Form](https://stackoverflow.com/questions/6656965/raiseevent-from-a-usercontrol-thats-placed-on-a-usercontrol-thats-on-a-form)

但相反。我需要将事件向下推一级，而不是把它冒泡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:25:20.270

一个对象不能引发属于其他对象的事件。

您应该在父级中创建一个 Sub 来为您引发此事件。

[家长]

```
(...)
Friend Sub RaiseMyEvent() 
    RaiseEvent MyEvent(Me,EventArgs.Empty)
End Sub
(...) 
```

[孩子]

```
(...)
parentObject.RaiseMyEvent()
(...) 
```

# javascript - 关于 Function.prototype.bind() 的困惑

> ID：11761145
> 
> 赞同：13
> 
> 时间：2012-08-01T14:11:29.490
> 
> 标签：javascript, bind, ecmascript-5, partial-application

`Function.prototype.bind`我是 ES5和柯里化参数（基本上是为函数创建默认参数）的忠实粉丝。

我只是在胡闹，但我终其一生都无法弄清楚我自己的构造。这是我的游乐场：

```
function hello( arg1, arg2 ) {
    console.log('hello()');
    console.log('"this" is: ', this);
    console.log('arguments: ', arguments);
}

var foo = Function.prototype.call.bind( hello,{what: 'dafuq'}, 2 );
foo( 42 ); 
```

日志输出如下：

```
hello()
"this" is: Object{ what="dafuq" }
arguments: [2,42] 
```

但我不明白这个对象究竟是如何成为 inside的`{what: 'dafuq'}`参考。据我了解，我们正在*创建*对. 让我们快速检查 MDN 概要：`this``foo`*`Function.prototype.call``.bind()`*

 *```
fun.bind(thisArg[, arg1[, arg2[, ...]]]) 
```

所以，`thisArg`for`.call`是`hello`函数，后面是参数列表。基本上发生的事情是这样的

```
Function.prototype.call.call( hello, {what: 'dafuq'}, 2); 
```

...uuhhh 现在我的大脑有点疼。我想我现在知道会发生什么，但请有人找到很好的可靠词来详细解释它。

*   **怎么`{what: 'dafuq'}`变成`this reference`**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T14:14:20.430

你不是在打电话`.bind(thisArg, args)`，而是
`Function.prototype.bind.call(thisArgUsedByCall, thisArgUsedByBind, argument)`。

显示发生情况的另一种方式：

```
// thisArgUsedByCall is a function
Function.prototype.call(thisArgUsedByCall, ...)   // does the same as:
thisArgUsedByCall.bind(thisArgUsedByBind, argument); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T14:14:54.217

> 但我不明白这个`{what: 'dafuq'}`对象到底是如何成为 foo 中 this 的参考的

这是因为`foo`实际上是`call`将`hello`函数绑定为调用上下文的方法，并将该对象绑定为第一个参数。的第一个参数`.call` *设置其调用上下文的调用上下文*。由于您已绑定它，这意味着该对象始终是调用上下文。

* * *

把它这样...

你已经绑定了`.call`to的调用上下文`hello`。

这实际上与做...

```
 hello.call();
// or...
// Function.prototype.call.call(hello); 
```

您还绑定了`.call`to的第一个参数`{what: "dafuq"}`，因此这实际上与执行...

```
hello.call({what: "dafuq"});
// or...
// Function.prototype.call.call(hello, {what: "dafuq"}); 
```

最后，您已经绑定了`.call`to的第二个参数`2`，因此这实际上与执行...

```
hello.call({what: "dafuq"}, 2);
// or...
// Function.prototype.call.call(hello, {what: "dafuq"}, 2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T14:43:51.067

简短的回答是 bind 使用第一个参数并将其用作*this*，然后 call使用*它的*第一个参数（这是 bind 的第二个参数）。

绑定是这样工作的：

```
fun.bind(thisArg, argArgs...)(x, y, ...) 
```

变成

```
fun(argArgs..., x, y, ....) // this = thisArg 
```

所以

```
foo( 42 ) 
```

是

```
Function.prototype.call.bind( hello, { what: 'dafuq' }, 2 ) ( 42 ) 
```

变成

```
Function.prototype.call({ what: 'dafuq' }, 2, 42) // this = hello 
```

呼叫的工作方式如下：

```
fun.call(thisArg, argArgs) 
```

变成

```
fun(argArgs) // this = thisArg 
```

所以

```
call({ what: 'dafuq' }, 2, 42) // this = hello 
```

变成

```
hello(2, 42) // this = { what: 'dafuq' } 
```*

# php - 使用属性从多维数组中删除项目

> ID：11761146
> 
> 赞同：1
> 
> 时间：2012-08-01T14:11:34.540
> 
> 标签：php, codeigniter

我正在尝试显示从 sql 查询生成的数据数组。这很好用。但是，我现在不希望显示 id 属性 = 值的 1 个项目。代码：

```
<?php foreach($sheet_list as $key => $sheet) : ?> 
        <?php if($sheet['id'] == $selected1){unset ($sheet_list[$key]);}?>
        <tr>
            <td><?=$sheet['title'];?></td>
            <td><?php echo date('d F Y', strtotime($sheet['startDate'])); ?></td>
            <td><?php echo date('d F Y', strtotime($sheet['endDate'])); ?></td>
            <td><input type="radio" name="selected2" id="selected2" value="<?=$sheet['id'];?>" <?php 
            if ($key == 0) echo ' checked ';
            ?>/></td>
        </tr>
        <?php endforeach; ?> 
```

所以这会产生一个很好的表，但是它在 foreach 循环中，我不想显示 1 个数组项及其所有属性，其中“id”字段 = 变量`$selected1` 我在这里看到了很多问题，但是对于一维或二维数组来说很多。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:15:36.197

你很接近，你应该使用`continue;`而不是`unset()`：

```
<?php if($sheet['id'] == $selected1){ continue; } ?> 
```

[`continue`^(PHP Docs)](http://us2.php.net/continue)使循环跳到下一个迭代，有效地跳过当前迭代，这是您想要做的。

这里的好处是您永远不会为您的`$sheet_list`数组进行修改，这与`unset()`您从数组中删除该项目的位置不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:17:17.323

如果您真的想取消设置`$sheet_list[$selected1]`，为什么不在进入循环之前就这样做呢？

如果您只想跳过此项目的输出，请按照 nickb 的建议使用 continue。

# android - 从流中的android相机获取RGB数据

> ID：11761147
> 
> 赞同：1
> 
> 时间：2012-08-01T14:11:38.280
> 
> 标签：android

我有个问题。如何从相机中获取 RGB 数据流？还是来自相机的 YUV 数据并转换为 RGB？塔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T14:43:34.520

有关如何设置相机的信息，请参阅[http://developer.android.com/reference/android/hardware/Camera.html ，然后参阅](http://developer.android.com/reference/android/hardware/Camera.html)[在 Android 中从视频图像中获取帧](https://stackoverflow.com/questions/1893072/getting-frames-from-video-image-in-android)以解码 YUV 数据。

在最后一个线程中，有一个链接指向一些代码，这些代码连续地从相机读取数据，我将[在此处](http://code.google.com/p/globetrotter/source/browse/trunk/src/com/ece194/globetrotter/CameraActivity.java)粘贴。

# c# - C#中的类型相等检查

> ID：11761155
> 
> 赞同：4
> 
> 时间：2012-08-01T14:11:55.207
> 
> 标签：c#, types, equality

和

```
public abstract class CompositionPlugin { ... } 
```

和

```
public class MyCompositionPlugin : CompositionPlugin { ... } 
```

我想检查一个对象的类型是否等于给定的类型：

```
public class Framework {

    public IList<CompositionPlugin> CompositionPlugins = new List<CompositionPlugin>();

    public CompositionPlugin GetCompositionPlugin(Type ofType)
    {
        foreach (CompositionPlugin plugin in CompositionPlugins)
        {
            if (plugin.GetType().Equals(ofType))
                return plugin;
        }

        throw new ArgumentException("A composition plugin of type " + ofType.FullName + " could not be found");
    }
} 
```

该方法的调用方式如下：

```
Framework framework = new Framework();
// Adding the plugin to the framework is done by loading an assembly and
// checking if it contains plugin-compatible classes (i.e. subclasses
// of <CompositionPlugin>)
framework.RegisterAssembly("E:\\Projects\\Framework\\MyPlugin\\bin\\Debug\\MyPlugin.dll");
CompositionPlugin plugin = framework.GetCompositionPlugin(typeof(MyCompositionPlugin)); 
```

然而，在测试时，这个检查总是失败，即使我在我请求的列表中肯定有那种类型的对象。

据我了解，它应该返回在-List`MyCompositionPlugin`中找到的第一个实例。`CompositionPlugins`

我的类型检查错了吗？为什么？它是如何正确完成的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T14:16:33.880

您想[`IsAssignableFrom`](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom.aspx)在您的类型上使用：

```
if (ofType.IsAssignableFrom(plugin.GetType()) 
```

`Equals`仅处理类型*完全相同*的情况。`IsAssignableFrom`还处理`ofType`可能是插件继承的类型或实现的接口的情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T14:27:04.503

不是答案，但评论太长了...您确定问题不在于您如何调用该方法或填充您的集合吗？比较本身应该没问题，正如您的代码的简化版本所示：

```
class A {}

bool TestType(A item, Type ofType)
{       
    return item.GetType().Equals(ofType);
} 
```

现在：

```
Console.WriteLine(TestType(new A(), typeof(A))); // True
Console.WriteLine(TestType(new A(), typeof(string))); // False 
```

**编辑**

我认为@vcsjones 是对的。您正在尝试将派生类与基类进行比较。在`foreach (CompositionPlugin plugin in CompositionPlugins)`您将插件声明为 CompositionPlugin 的行中，但在客户端代码中您将其与`typeof(MyCompositionPlugin)`. （重新**编辑**不，我错了，你的情况对应于我的第 4 个`Console.WriteLine`返回 true）

在与您的情况类似的情况下，请参阅带有 Equals 真值表的示例：

```
class CompositionPlugin {}
class MyCompositionPlugin : CompositionPlugin  {}

// Define other methods and classes here
bool TestType(CompositionPlugin item, Type ofType)
{       
    return item.GetType().Equals(ofType);
} 
```

现在

```
Console.WriteLine(TestType(new CompositionPlugin(), 
            typeof(CompositionPlugin))); //True
Console.WriteLine(TestType(new CompositionPlugin(), 
            typeof(MyCompositionPlugin))); //False
Console.WriteLine(TestType(new MyCompositionPlugin(), 
            typeof(CompositionPlugin))); //False
Console.WriteLine(TestType(new MyCompositionPlugin(),
            typeof(MyCompositionPlugin))); //True 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T14:13:18.513

使用关键字`is`

```
if (plugin is ofType)
    return plugin; 
```

编辑：

我必须和@vcsjones 一起去这个。使用[isassignablefrom](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom.aspx)函数。

但如果你真的认为它应该工作，我总是做的是创建快速函数来将调试文本写入文件。

```
public class Framework {

    public IList<CompositionPlugin> CompositionPlugins = new List<CompositionPlugin>();

    public CompositionPlugin GetCompositionPlugin(Type ofType)
    {
        using(var writer = System.IO.File.CreateText(@"C:\test.log"))
        {
            writer.WriteLine("ofType: " + ofType.toString());
            foreach (CompositionPlugin plugin in CompositionPlugins)
            {
                writer.WriteLine("plugin: " + plugin.GetType().toString());
                if (plugin.GetType().Equals(ofType))
                    return plugin;
            }
        }

        throw new ArgumentException("A composition plugin of type " + ofType.FullName + " could not be found");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T07:09:19.247

事实证明，我最初忽略的信息，认为它不重要，毕竟如此。

和都定义在不同的程序集中，执行程序在运行时动态加载`MyCompositionPlugin`。`CompositionPlugin`

.NET-Runtime 现在考虑从不同程序集加载的类型，而不是执行程序集引用的类型，从而将`MyCompositionPlugin`-Type 中的 -Type`Program`视为不等于`MyCompositionPlugin`从另一个程序集加载，即使它们实际上是相同的。

比较两者是否相等（因为它们在常识中是相同的“类”）的解决方案是将其分解为定义程序集的字符串相等性，这可以说是肮脏的，但可以解决问题。

```
public CompositionPlugin GetCompositionPlugin(Type ofType)
{
    foreach (CompositionPlugin plugin in CompositionPlugins)
        if (ofType.AssemblyQualifiedName.Equals(plugin.GetType().AssemblyQualifiedName))
            return plugin;

    throw new ArgumentException("A composition plugin of type " + ofType.FullName + " could not be found");
} 
```

感谢[Paolo Falabella](https://stackoverflow.com/users/497364/paolo-falabella)指出[这个问题](https://stackoverflow.com/questions/3623358/two-types-not-equal-that-should-be)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-01T07:05:36.810

您的问题很可能是由于第二次加载程序集并因此相等失败，最好避免再次加载程序集，因此您可以使用普通类型比较而不是需要使用脏字符串比较。我有同样的问题，我的插件接口是在一个单独的程序集中定义的，这个程序集存在于启动文件夹中，但也存在于插件文件夹中，插件程序集从该文件夹中动态加载，因此接口类型相等失败。我从插件文件夹中删除了接口 dll，之后一切都按预期工作。

# java - java中的垃圾收集示例？

> ID：11761156
> 
> 赞同：4
> 
> 时间：2012-08-01T14:11:56.997
> 
> 标签：java, garbage-collection

```
class Beta { }

class Alpha {
static Beta b1  ;
Beta b2;
}

public class Tester {

public static void main(String[] args) {

    Beta b1 = new Beta();
    Beta b2 = new Beta();
    Alpha a1 = new Alpha();
    Alpha a2 = new Alpha();

    a1.b1 = b1 ;
    a1.b2 = b1 ;
    a2.b2 = b2 ;

    a1 = null ;
    b1 = null;
    b2 = null;

    System.out.println(" Line 1    " + " a1   "  + a1.b1);
    System.out.println(" Line 2    " + " a1   "  + a1.b2);
    System.out.println(" Line 3    " + " a2   " + a2.b2);
    System.out.println(" Line 4    " + " a1   " + a2.b1);
    System.out.println(" Line 5    " + " b1   " + b1);
    System.out.println(" Line 6    " + " b1   " + b2);

  }

 } 
```

我不确定为什么上述程序中只有 a1 对象可用于垃圾收集。我期待垃圾收集器收集 a1 、 b1 和 b2 。

正如您所看到的 a1 ， b1 和 b2 被设为 NULL 因此这使得对象可用于垃圾收集。如果对象为 NULL 或任何线程或引用变量都无法访问，则它应该由垃圾收集器收集。

有人可以通过很好的例子和更精确的方式帮助我理解上述程序的微妙之处吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T14:15:11.457

因为由于下面的行，仍然存在对 b1 和 b2 引用所指向的对象的引用。

```
a1.b1 = b1 ;
a1.b2 = b1 ;
a2.b2 = b2 ; 
```

假设这样：

```
 b1--->BetaObj1
    b2---BetaObj2
    a1---> AlphaObj1
    a2---> AlphaObj2 
```

a1.b1 指向 b1 表示存在对 BetaObj1 的引用 a1.b2 指向 b1 表示存在另一个对 BetaObj1 的引用

（此时有3个对BetaObj1的引用）

a2.b2 指向 b2 这意味着，有对 BetaOBj2 的引用

（此时有2个对BetaObj2的引用）

`a1=null;`使 AlphaObj1 符合 GC 条件

`b1=null;`使 BetaObj1 引用计数为 2，因此该对象不符合 GC 条件

`b2=null;`使 BetaObj2 引用计数为 1，因此该对象不符合 GC 条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:17:09.893

*   `b2`不适用于 gc，因为仍有`a2.b2`对其的引用
*   `b1`对 gc 不可用，因为`Alpha.b1`拥有对它的引用（`Alpha.b1`是静态的，不要混淆，因为它是使用设置的`a1.b1`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:18:49.120

你应该在这里得到一个`NullPointerException`：

```
System.out.println(" Line 1    " + " a1   "  + a1.b1);
System.out.println(" Line 2    " + " a1   "  + a1.b2); 
```

此时，`a1`已设置为`null`，因此无法访问其成员，`b2`因为它不再引用对象。（访问静态`b1`作品，因为这只需要类，而不是实例。）

> 正如您所看到的 a1 ， b1 和 b2 被设为 NULL 因此这使得对象可用于垃圾收集。

不，您将对这些对象的一些引用设置为`null`，而对这些对象的其他引用存在，就像 和 的情况一样`b1`，`b2`这些对象还不能被收集。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T14:43:58.360

这里有几个误解

*   GC 仅在需要时运行。比需要更频繁地执行 GC 将做它不需要的工作。
*   `a1.b1`实际上`Alpha.b1`，因为实例并不重要，甚至可以`null`使用`al.b1`，这简直令人困惑。
*   `a1.b2`应该像 a1 一样抛出 NullPointerException `null`。
*   `Alpha.b1`已设置但未在任何地方清除，因此它引用的对象不符合清除条件。可以清理其他对象，但无需`System.gc();`显式调用，它极不可能需要在您期望的位置运行。
*   `a1`被清除但`a2`不是所以它不会被清除（直到方法返回）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-30T08:44:48.970

**垃圾收集示例**

```
public class GarbageCollection {

    public static void main(String s[]) throws Exception  {
          Runtime rs =  Runtime.getRuntime();
          System.out.println("Free memory in JVM before Garbage Collection = "+rs.freeMemory());
          rs.gc();
          System.out.println("Free memory in JVM after Garbage Collection = "+rs.freeMemory());
       }
} 
```

**程序输出：**

垃圾回收前 JVM 中的可用内存 = 62767488

垃圾收集后 JVM 中的可用内存 = 62854120

# google-apps-script - 联系人应用程序性能

> ID：11761157
> 
> 赞同：2
> 
> 时间：2012-08-01T14:11:58.120
> 
> 标签：google-apps-script

对谷歌脚本的 ContactsApp 进行一些测试并加载联系人。运行 ContactsApp.getContacts() （加载所有联系人）所需的时间似乎与运行 ContactsApp.getContact('email') （特定联系人）所需的时间一样多。我的联系人的每种方法大约需要 14 秒

我的假设是这两种方法都在调用所有联系人，而第二种方法只匹配电子邮件。这拖了不少。

有没有人确认过这一点，并且无论如何都可以将加载的联系人保留在页面之间的内存中（会话变量？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:04:44.760

您有几个用于存储每个用户数据的选项：

*   如果是少量数据，可以使用[用户属性](https://developers.google.com/apps-script/class_userproperties)
*   [您可以使用ScriptDb](https://developers.google.com/apps-script/scriptdb)存储更多数据，但这将是全局的，因此您必须自己分割用户数据
*   如果您只需要短时间内的数据，例如在函数调用之间，您可以使用[缓存服务](https://developers.google.com/apps-script/service_cache)。你会想要使用[getPrivateCache()](https://developers.google.com/apps-script/class_cacheservice#getPrivateCache)

听起来对于您的用例 getPrivateCache() 是用户特定会话类数据存储的最佳选择。

（只需确保您的预期用途符合[服务条款](https://developers.google.com/terms/)。）

# c# - 多平台的asp.net web api rest服务

> ID：11761162
> 
> 赞同：-3
> 
> 时间：2012-08-01T14:12:19.673
> 
> 标签：c#, asp.net, rest, asp.net-web-api

我可以在多个平台上使用在 web api 中创建的 rest 服务吗？是否可以使用 web api 为多个平台创建文件上传和下载服务。如果可能，请提供一个示例项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:20:21.210

是的，是的，不是的。

*现在有人请关闭这个问题。*

*更新*

请允许我解释一下这个答案（在它最终被删除之前）：

看来您的要求是让我们为您提供一个完整的解决方案，这实际上不是 Stack Overflow 的目的。同样，您之前非常相似的问题：[WCF Restful service file upload with multi-platform support](https://stackoverflow.com/questions/10978961/wcf-restful-service-file-upload-with-multi-platform-support)与此问题几乎相同，并要求提供同样大量的信息。

然后是[How to add wcf service at runtime](https://stackoverflow.com/questions/10874203/how-to-add-wcf-service-at-runtime)，这显然是相关的，但是您没有包含任何有关您尝试过的信息的信息...

关于堆栈溢出的问题应该包括您想要实现的目标、您尝试过的内容以及可能的一些代码。当然，你绝对不应该要求提供样本“项目”——你可能会在回答一个表明你已经付出了一些努力的问题时得到一个——但如果你这样做了，那将是一个奖励。

在这种情况下，我认为您应该使用 google 并阅读 - 这里有一个链接：[Asp.Net Web API](http://www.asp.net/web-api) - 你真的不会出错。我知道这是您所问内容的链接；但实际上它充满了教程，是最好的起点......

# magento - 在magento'has_options'中导入可配置产品后为零

> ID：11761163
> 
> 赞同：2
> 
> 时间：2012-08-01T14:12:24.047
> 
> 标签：magento, magento-1.7

我已成功导入可配置产品（及其相关产品）。当我在后端打开可配置产品时，我会在最后一个选项卡中看到相关产品。但它们不会显示在前端。

这是因为字段`has_options`和`required_options`为零。entity_id 2 的产品已在后端手动创建，并且运行良好。

![Magento的catalog_product_entity表](../Images/5319c224d496d55e4b8eebe41119f16e.png)

当我在后端打开导入的产品时，什么都不做并保存 - 两个值都变为 1。导入中缺少什么将这些字段直接设置为 1？

我试过这个：

```
 $configurableProduct->setHasOptions(TRUE); 
```

但这没有效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-14T16:23:45.673

在尝试了几个小时的不同解决方案后，我求助于管理区域内可配置的保存过程，这使我转向了以下方法；

```
Mage_Catalog_Model_Product_Type_Configurable::save 
```

然后我发现，以编程方式保存可配置的 getConfigurableAttributesData 和 getConfigurableProductsData 时为空。这导致我创建了一个自定义 shell 脚本，我在其中加载了一组可配置产品，循环并重新保存了数据；

```
foreach($_collectionConfigurables as $_configurableProduct){

    // flag to be saved
    $_configurableProduct->setCanSaveConfigurableAttributes(1);

    // get the configurable attributes
    $_configurableAttributes = $_configurableProduct->getTypeInstance()->getConfigurableAttributesAsArray();
    $_configurableProduct->setConfigurableAttributesData($_configurableAttributes);

    // Build a collection of configurable children
    $_collectionChildren = $_configurableProduct->getTypeInstance()->getUsedProducts();

    // loop the children and save configurable attributes into an array
    $arr = array();
    foreach($_collectionChildren as $_childProduct){
        foreach($_configurableAttributes as $_attr){
            $arr[$_childProduct->getId()][] = array(
                'attribute_id' => $_attr['attribute_id'],
                'label' => $_childProduct->getAttributeText($_attr['attribute_code']),
                'value_index' => $_childProduct->getData($_attr['attribute_code'])
            );
        }
    }

    $_configurableProduct->setConfigurableProductsData($arr);
    $_configurableProduct->save();
    echo "{$_configurableProduct->getId()}\n";

} 
```

请注意，这已在 CE 1.9.2.1 上进行了尝试和测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:59:17.647

我现在用的[是Magmi](http://sourceforge.net/projects/magmi/) ……我自己进口产品好像没那么容易。

# asterisk - 如何检查星号中继的状态

> ID：11761164
> 
> 赞同：3
> 
> 时间：2012-08-01T14:12:25.830
> 
> 标签：asterisk

因此，如果我键入`sip show peers`，我会返回一个表格，告诉我中继的状态为“OK”，但我认为它不会测试验证是否有效。有没有办法测试中继线是否正常并且通话是否可以通过？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T23:29:05.513

您可以通过检查拨号计划中的变量来检查不同的文本字符串，例如`BUSY`, `CONGESTION`,`CHANUNAVAIL`等。`${DIALSTATUS}`您可能会在频道挂起后使用挂起原因创建日志。

# python - 缩进级别错误

> ID：11761169
> 
> 赞同：-3
> 
> 时间：2012-08-01T14:12:43.677
> 
> 标签：python

我浏览了这段代码并删除了所有选项卡，替换为空格。我不断收到文件“xxxx”，第 14 行，除了：IndentationError: unindent does not match any external indentation level

任何人都可以看到任何其他问题吗？

```
### colorize_svg.py

import csv
from BeautifulSoup import BeautifulSoup

# Read in unemployment rates
unemployment = {}
min_value = 100; max_value = 0
reader = csv.reader(open('unemployment09.csv'), delimiter=",")
for row in reader:
        try:
            full_fips=row[1]+row[2]
            rate=float(row[8].strip())
            unemployment[full_fips]=rate
        except:
            pass

# Load the SVG map
svg = open('counties.svg', 'r').read()

# Load into Beautiful Soup
soup = BeautifulSoup(svg, selfClosingTags=['defs','sodipodi:namedview'])

# Find counties
paths = soup.findAll('path')

# Map colors
colors = ["#D73027", "#FC8D59", "#FEE090", "#E0F3F8", "#91BFDB", "#4575B4"]

    # County style
    path_style = 'font-size:12px;fill-rule:nonzero;stroke:#FFFFFF;stroke-opacity:1; stroke-width:0.1;stroke-miterlimit:4;stroke-dasharray:none;stroke-linecap:butt;marker-start:none;stroke-linejoin:bevel;fill:'

# Color the counties based on unemployment rate
for p in paths:

    if p['id'] not in ["State_Lines", "separator"]:
        # pass
        try:
            rate = unemployment[p['id']]
        except:
            continue

        if rate > 10:
            color_class = 5
        elif rate > 8:
            color_class = 4
        elif rate > 6:
            color_class = 3
        elif rate > 4:
            color_class = 2
        elif rate > 2:
            color_class = 1
        else:
            color_class = 0

        color = colors[color_class]
        p['style'] = path_style + color

print soup.prettify() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:18:43.410

两件事情：

您的第一个 for 循环似乎在正文上有一个额外的标识级别，但这*可能*是复制/粘贴的问题。

和：

```
# Find counties
paths = soup.findAll('path')

# Map colors
colors = ["#D73027", "#FC8D59", "#FEE090", "#E0F3F8", "#91BFDB", "#4575B4"]

    # County style
    path_style = 'font-size:12px;fill-rule:nonzero;stroke:#FFFFFF;stroke-opacity:1; stroke-width:0.1;stroke-miterlimit:4;stroke-dasharray:none;stroke-linecap:butt;marker-start:none;stroke-linejoin:bevel;fill:' 
```

正如您在此处看到的，path_style 应该与颜色对齐。那可能就是您的错误所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:38:41.647

When I paste your code into Python, it only brings up one IndentationError - at:

```
 # County style
    path_style = 'font-size:12px;fill-rule:nonzero;stroke:#FFFFFF;stroke-opacity:1; stroke-width:0.1;stroke-miterlimit:4;stroke-dasharray:none;stroke-linecap:butt;marker-start:none;stroke-linejoin:bevel;fill:' 
```

Which should not be indented, and so gives a slightly different error to the one you're seeing ("unexpected indent").

This means that the IndentationError you are seeing must be caused by a mix of tabs and spaces, which won't be maintained when copying and pasting between your code and StackOverflow. Line 14 is the `except:` in the top for loop - you will find that it and the `try` associated with it have a different combination of tabs and spaces.

The are various fixes to this - for example, you could remove the indentation from the front of the `try:` and `except:` both and replace with uniform indentation (hit tab once for both of them, having made sure you have tabs-to-spaces set or unset to match the style used in the rest of the file). But the easier way would be to just copy and paste the code from your question back into the .py file.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:31:19.547

您的缩进错误很有可能是因为没有用空格替换每个制表符。这肯定经常发生在我身上 - 只需再次检查并确认没有标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T14:33:24.833

在允许您查看隐藏空格和选项卡的编辑器中检查您的代码。混合制表符和空格给我带来了很多这样的问题——只坚持一种缩进形式。

# c++ - 在 C++ 中使用管道的线程和同步

> ID：11761170
> 
> 赞同：-4
> 
> 时间：2012-08-01T14:12:47.307
> 
> 标签：c++, named-pipes, thread-synchronization

我有两个线程。一个线程生成一个数字，另一个线程将生成的数字平方。我需要使用管道或信号量或消息队列同步此操作。帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:12:10.407

这是一条错误的路。生成一个额外的线程并同步这两个线程将需要更多的 CPU 能力，而不仅仅是对生成器线程中的数字进行平方。

仅当每个步骤都需要足够的计算能力来证明额外线程的合理性时，实现管道才有效。

至于您的问题，我建议您阅读有关[生产者-消费者](http://en.wikipedia.org/wiki/Producer-consumer_problem)模式的信息。在野外有许多实现。

# sql - 如何使此查询也返回计数值为 0 的行？

> ID：11761171
> 
> 赞同：1
> 
> 时间：2012-08-01T14:12:48.720
> 
> 标签：sql, postgresql

我编写了一个小型 PostgreSQL 查询，它可以帮助我在两个特定日期内每天每小时间隔执行的作业总量 - 例如，从 2012 年 2 月 2 日到 2012 年 3 月 3 日之间每小时执行的所有作业，从给出的小时开始2 月 2 日并以 3 月 3 日给出的时间结束-我注意到此查询不会打印计数为 0 的行-在该时间间隔内没有执行作业，例如在 2012 年 2 月 21 日下午 5 点到 6 点之间-。我怎样才能使它也返回计数为 0 的结果（行）？代码如下：

```
SELECT date_trunc('hour', executiontime), count(executiontime)
  FROM mytable
 WHERE executiontime BETWEEN '2011-2-2 0:00:00' AND '2012-3-2 5:00:00' 
 GROUP BY date_trunc('hour', executiontime)
 ORDER BY date_trunc('hour', executiontime) ASC; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:42:40.350

```
 -- CTE to the rescue!!!
WITH cal AS (
        SELECT generate_series('2012-02-02 00:00:00'::timestamp , '2012-03-02 05:00:00'::timestamp , '1 hour'::interval) AS stamp
        )
, qqq AS (
        SELECT date_trunc('hour', executiontime) AS stamp
        , count(*) AS zcount
        FROM mytable
        GROUP BY date_trunc('hour', executiontime)
        )
SELECT cal.stamp
        , COALESCE (qqq.zcount, 0) AS zcount
FROM cal
LEFT JOIN qqq ON cal.stamp = qqq.stamp
ORDER BY stamp ASC
        ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:28:08.860

[看这个](https://stackoverflow.com/questions/4002029/how-to-generate-a-virtual-table-to-generate-a-sequence-of-dates-in-postgresql "看看这个")。想法是生成包含此期间日期的数组或表，并与作业执行表连接。

# ruby - 构建扩展大礼包电子商务

> ID：11761172
> 
> 赞同：1
> 
> 时间：2012-08-01T14:12:49.650
> 
> 标签：ruby, e-commerce, spree

[执行步骤 5.7](http://guides.spreecommerce.com/creating_extensions.html)时我遇到了一个问题。在我的扩展中没有遇到路径：

```
#lib/spree/flag_promotion_configuration.rb. 
```

我必须创建目录'spree'并在创建文件'flag_promotion_configuration.rb'之后？

如果我把它写在文件中，按照教程的要求：

```
#lib/spree_flag_promotions/engine.rb

module Spree::ActiveShipping; end 

.... 

module SpreeFlagPromotions
  class Engine < Rails::Engine
    initializer "spree.flag_promotions.preferences", :after => "spree.environment" do |app|
      Spree::FlagPromotions::Config = Spree::FlagPromotionConfiguration.new
    end

   ....

  end

end 
```

我执行了：

```
$ rake db:migrate 
```

返回此错误：

```
rake aborted!
uninitialized constant Spree::FlagPromotions

Tasks: TOP => db:migrate => environment
(See full trace by running task with --trace) 
```

我相信这与以下内容有关：

```
#lib/spree/flag_promotion_configuration.rb. 
```

因为他们不知道创建此文件的位置或位置。

# ios5 - IOS如何重新加载webview

> ID：11761176
> 
> 赞同：0
> 
> 时间：2012-08-01T14:12:58.290
> 
> 标签：ios5

请帮忙，

我正在将一个网络应用程序放在一起，但我遇到了一些事情。我有加载不同 uiwebviews 的 tabviewcontrollers。

每次我在应用程序上导航并重新单击选项卡时，它仍然保留在我在该页面上的位置，有没有办法重新加载它，所以它总是从原始的 ur 开始（不仅仅是刷新）？

任何有关处理此问题的最佳方法的建议将不胜感激。

谢谢

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:20:07.947

`viewWillAppear:`在视图控制器的方法中加载请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T15:22:08.103

当你想刷新时，使用

```
[webView reload] 
```

或者如果你想用特定的 url 重新加载

```
NSURL *theURL = [NSURL URLWithString:@"http://urltoreload.html"];
[webView loadRequest:[NSURLRequest requestWithURL:theURL]]; 
```

# c - Oracle Proc 如何找到 C 头文件？

> ID：11761177
> 
> 赞同：0
> 
> 时间：2012-08-01T14:13:06.517
> 
> 标签：c, oracle, include

我的`#include <stdio.h>`一个`*.pc`文件中有一个。
这`stdio.h`包括`libio.h`.

我在`libio.h`.

我想知道 Oracle proc 是如何知道在哪里可以找到这些`stdio.h`和`libio.h`文件的。

环境？一些标准路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:54:45.583

在 $ORACLE_HOME/precomp/admin/pcscfg.cfg 中找到

# javascript - 使用两个按钮（提交按钮和普通按钮）应该以不同的方式提交相同的表单

> ID：11761181
> 
> 赞同：-3
> 
> 时间：2012-08-01T14:13:24.737
> 
> 标签：javascript, jquery

我已经使用 jquery 向导插件来创建这个表单。当我使用 ID = "next" 提交按钮时，表单被提交。当我使用 ID = "quick" 按钮时，它会重定向到 Feedback.Form 但它不会正确提交。（我看不到数据库已正确更新。）

```
 $j("#quick").click(function(){
      $j('#feedbackForm').submit();
    }); 
```

* * *

`<form id="feedbackForm" method="post" action="<openmrs:contextPath/>/module/feedback/addFeedback.form" class="bbq" enctype="multipart/form-data" >`

* * *

```
<div id="bottomNavigation">
    <input id="back" value="Back" type="reset" />
    <input id="next" value="Next" type="submit" />
    <input id="quick" value="Just submit now with all the defaults!" type="button" />
</div> 
```

请问有人可以帮我吗？

谢谢，哈沙

完整来源：[https ://gist.github.com/3227043](https://gist.github.com/3227043)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:49:50.633

将“next”按钮转换为普通按钮，并将 if 或 switch 选择添加到 jquery 代码中。所以两个按钮都是正常的，Jquery 将决定提交哪些按钮来获取调用点击事件的按钮的名称。或者你可以通过一个javascript函数来做，你可以用任何你想要的方式来做，但是两个按钮都必须是“按钮”类型

# ninject - 调用者上下文绑定 NInject

> ID：11761187
> 
> 赞同：1
> 
> 时间：2012-08-01T14:13:41.363
> 
> 标签：ninject

我需要根据调用者有条件地编写一个实例。

在某些情况下，我需要一个具有“深”类型“NullService”的复合对象实例

在其他情况下，我改为注入“ConcreteService”

我期待这样的事情：

```
Get<Root>.with(NullService) 
```

或者

```
 Get<Root>.with(ConcreteService) 
```

或者更好的是，如果可以绑定构造，使其可以追溯到调用上下文

```
Bind<IService>.to(ConcreteService).
Bind<IService>.to(NullService).only.whenCallerIsTypeOf(CallerWhosNeedsANullService) 
```

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:02:08.613

有两种方法：

1.  如果您可以计算应该使用哪个条件，请使用自己的条件：

    ```
    Bind<IService>.To(NullService)
        .When(ctx => IsCallerWhosNeedsANullService(HttpContext.Current.Request)); 
    ```

2.  使用命名绑定

    ```
    Bind<Root>().ToSelf().Named("DefaultRoot");
    Bind<Root>().ToSelf().Named("NullRoot");
    Bind<IService>.To(ConcreteService);
    Bind<IService>.To(NullService).WhenAnyAnchestorNamed("NullRoot");

    Get<Root>("NullRoot"); 
    ```

# c# - 在 Visual Studio 与分析中运行站点时的性能问题

> ID：11761188
> 
> 赞同：0
> 
> 时间：2012-08-01T14:13:41.010
> 
> 标签：c#, asp.net, performance, profiling, red-gate-ants

这是我遇到的一个非常奇怪的问题，几乎与我能想到的任何合乎逻辑的事情都背道而驰。我目前正在分析我们正在构建的网站，有时加载页面需要 5 秒。这发生在 IIS 和 Visual Studio 开发服务器上。但是，当我使用 ANTS Performance Profiler 对其进行分析时，它的执行速度提高了 5 倍，并且加载时间不到一秒。

我很困惑为什么会发生这种情况，因为据我所知，分析应该增加时间，而不是减少时间。任何人都可以对此有所了解吗？

网站使用 Visual Studio 2010、ASP.Net v4.0、C# 开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:59:16.807

这很有趣，因为它非常罕见（我从事 ANTS 支持工作）。ANTS 赋予进程的主要区别是权限（因为（通常）该进程完全由 ANTS 启动并继承权限）。我们有一些优化启动过程的例程，但我从未听说过这样的加速。使用任务管理器，查看进程在 ANTS 下运行的登录帐户，然后尝试在 ANTS 使用的帐户下运行您的进程。您可能会发现这有助于解释加速。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:57:00.117

Performance testing needs to be done in carefully controlled setting. Things like system file cache, network, machine load, NGEN status, virus scanner could affect perf result.

Use Perfview to understand how 5s is spent (could be waiting for disk IO):

[http://www.microsoft.com/en-us/download/details.aspx?id=28567](http://www.microsoft.com/en-us/download/details.aspx?id=28567)

# entity-framework-4 - 如何从 Webapi Get 返回 IQueyrable DTO，以便我可以使用 Odata 过滤器

> ID：11761196
> 
> 赞同：1
> 
> 时间：2012-08-01T14:14:06.037
> 
> 标签：entity-framework-4, asp.net-mvc-4, asp.net-web-api, odata, odp.net

我正在尝试在 Web api 项目 ASP.NET MVC 4.0 RC 中使用 ODP.net 和实体框架的 Odata 过滤器。我想返回一个 IQueryable 的 OwnDTO 。我收到一个内部 500 错误，没有任何详细信息。我知道 webapi RC 存在错误生成错误，但我不认为该错误是我的问题。

```
 Get http://localhost:51744/api/Owner  called using Fiddler

    [Queryable]
    public IQueryable<OwnDTO> Get()        
    {            
        using (Entities context = new Entities())
        {
            var query = from item in context.Owners
                        select
                        new OwnDTO
                        {
                            Name = item.Name

                        };
            return query.AsQueryable();
        }
    } 
```

//非常简单的例子

```
 public class OwnDTO
    {
        public string Name;
    } 
```

我不想使用我的 Oracle EF 生成的类 (DAO) 从我的 Get 返回，但我知道如果我用更友好的界面替换 EntityObject 可以。如果我返回 IEnumerable 它可以工作，但我想要 Odata 过滤器。

* * *

更新以防有人想要一个工作示例。应该在 linq 中使用 Automapper 或类似的，并且应该注入上下文。

* * *

```
 [Queryable]
    public IQueryable<OwnDTO> Get()        
    {            
        {
            var query = from item in Hack._EFContext.Owners
                        select
                        new OwnDTO
                        {
                            Name = item.Name

                        };
            return query.AsQueryable();
        }
    } 
```

这很好用，但看起来 Odata 在 RC 之后被删除了。所以我需要寻找另一条路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:06:13.310

**它确实可以在 RC 中使用，**但在发布时可能无法在 RTM 中使用——目前还不太清楚。

你的问题是你正在处理你的上下文，因为你正在使用一个`using`块。因此，在检索数据之前会处理上下文。

因此，不要`using`在请求结束时注册您的对象以进行处置。Tugberk 在[这里](http://www.tugberkugurlu.com/archive/disposing-resources-at-the-end-of-the-request-lifecycle-in-asp-net-web-api)有一个帖子。

# forms - HTML5 的 novalidate 和 formnovalidate 属性有什么区别？

> ID：11761202
> 
> 赞同：44
> 
> 时间：2012-08-01T14:14:20.183
> 
> 标签：forms, html

从 w3c 学校，我们有以下定义：

***不验证***：

> 当存在时，它指定表单数据（输入）在提交时不应该被验证。

***表单验证***：

> 如果存在，它指定提交时不应验证元素。

在**提交按钮**中使用*formnovalidate*与在**表单**中使用*novalidate*有什么不同吗？

 *****（我真的不明白区别）

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-05T12:34:04.383

`novalidate`应用于表单，并阻止其被验证；`formnovalidate`应用于提交按钮，并覆盖`novalidate`选项（如果存在）；它的意思是“提交此表单而不进行验证，无论一般表单设置如何”。

规范中给出的示例是用户保存数据而不是发布数据时；数据可能不完整且无效，但不需要保存验证。*****

# wpf - 这些事件是什么时候提出的，它们之间有什么关系？“CommandBinding的CommandManager.CanExecute和CanExecute

> ID：11761203
> 
> 赞同：0
> 
> 时间：2012-08-01T14:14:26.420
> 
> 标签：wpf, commandbinding

这些事件是什么时候提出的，它们之间有什么关系？“CommandBinding的CommandManager.CanExecute和CanExecute？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:36:51.637

The `CanExecute` event of a `CommandBinding` is fired when the `CommandBinding` believes something changed that could affect the state of the command. This is primarily when the user interacts with the UI in some way (mouse moves, clicks, focus changes, etc.), or when a user action causes a `PropertyChanged` or `CollectionChanged` event. This event does *not* get fired when your code changes something in the UI, or causes a `PropertyChanged` event to fire.

Is there a specific situation you have in mind?

The `CommandManager.CanExecute` method is a way to attach a `CanExecute` event handler to a UI element, so that when the `CanExecute` of the `RoutedUICommand` bubbles up the visual tree, it can trigger your `CanExecute` event handler. It is just a different way to attach a `CanExecute` event to an element for different scenarios, but the end result is the same as adding a `CommandBinding` to the `CommandBindings` collection of a `UIElement`.

# javascript - flowplayer 适用于所有浏览器，但不适用于 safari... 为什么？

> ID：11761206
> 
> 赞同：0
> 
> 时间：2012-08-01T14:14:42.620
> 
> 标签：javascript, jquery, flash, flowplayer

flowplayer 不能与 safari 一起使用，那是代码......有什么问题？！:S

谢谢你的帮助！

```
<div class="pictureLayer">
                    <a id="player" style="display:block;width:636px;height:407px" href="upload/4/video/video.flv"><object width="100%" height="100%" type="application/x-shockwave-flash" data="flowplayer-3.1.5.swf" id="player_api"><param value="true" name="allowfullscreen"><param value="always" name="allowscriptaccess"><param value="high" name="quality"><param value="false" name="cachebusting"><param value="#000000" name="bgcolor"><param value="config={&quot;clip&quot;:{&quot;autoPlay&quot;:true,&quot;url&quot;:&quot;upload/4/video/video.flv&quot;},&quot;playerId&quot;:&quot;player&quot;,&quot;playlist&quot;:[{&quot;autoPlay&quot;:true,&quot;url&quot;:&quot;upload/4/video/video.flv&quot;}]}" name="flashvars"></object></a> 

    <!-- this will install flowplayer inside previous A- tag. -->
                    <script>
                        flowplayer("player", "flowplayer-3.1.5.swf", {
                                clip : {
                                    autoPlay: true
                                }
                            }
                        );
                    </script>
                </div> 
```

# android - 禁用自动下载 APK 扩展文件

> ID：11761207
> 
> 赞同：11
> 
> 时间：2012-08-01T14:14:47.407
> 
> 标签：android, apk-expansion-files

当您从 google play 下载应用程序时，是否可以禁用自动下载 APK 扩展文件？

我可以强制谷歌播放禁用下载并让应用程序自行下载扩展文件吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:03:17.260

如果您要测试的是您自己的应用程序，最好的选择是在您的设备上本地安装 .apk 文件而不使用扩展包。将应用程序和扩展包上传到 Google Play 并激活它而不发布。首次启动应用程序时，将从 Google Play 下载扩展文件。这样您就可以测试您的扩展文件下载器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T19:52:30.927

@Kai 您是否有特定的理由希望自己下载文件？是的，我们的应用程序有许多阶段（游戏），每个阶段都需要自己的特定数据（媒体），因此仅下载所需的数据将有助于通过避免不必要的付费移动数据使用来增加用户的便利性......

# json - 淘汰 js 回发视图模型到服务器性能（Request.Form 和客户端 VM 中的数据重复）

> ID：11761208
> 
> 赞同：0
> 
> 时间：2012-08-01T14:14:52.617
> 
> 标签：json, performance, knockout.js, viewmodel, knockout-mapping-plugin

我打算将knockoutjs用于大数据html表单（大约70个字段）并将其与KO映射插件结合，最后将KO视图模型的json表示反序列化为ac#类。

我担心的是发送到服务器的数据是重复的（两者都是随请求发送的表单数据，以及需要发送以在服务器上反序列化的 KO 视图模型的 json 表示）。

任何想法如何避免这种情况？

我认为也许我可以使用 MVC 4 映射器将表单字段映射到 c# 类以避免发送 KO 视图模型，但我无法提取它。

更新：

我将 json 发布回服务器，以便自动将数据映射回 POCO，这比从 Request.Form 获取值更容易和更清洁。

我确实考虑过 ajax 但这将在 SharePoint 应用程序中，我不完全确定它是否会破坏事情..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:22:36.200

为什么您一定需要对表单进行 POST？在许多情况下，特别是考虑到视图模型中 JSON 的分层性质，开发人员将使用 AJAX 将 JSON POST 回 MVC 控制器。

# ios - phonegap 2.0 与 admob/iads

> ID：11761212
> 
> 赞同：1
> 
> 时间：2012-08-01T14:15:06.223
> 
> 标签：ios, cordova, admob, iad

我一直在寻找有关如何在使用 PhoneGap 2.0 构建的 iOS 应用程序中实现 admob 或 iads 的指南/教程。到目前为止，我一直在徒劳地寻找。我得到的最接近答案的是：

[http://iphone.keyvisuals.com/iphonedev/implementing-admob-ads-in-a-phonegap-project-for-ios-no-plugins-required/](http://iphone.keyvisuals.com/iphonedev/implementing-admob-ads-in-a-phonegap-project-for-ios-no-plugins-required/)

我没有任何objective-c经验，在上面提到的链接中我可以通过第三步。我试图下载演示并查看代码，但应用程序甚至无法构建。可能是因为我使用的是 PhoneGap 2.0 而不是旧版本。

你们中的任何人都能够指导我，或者知道任何有用的链接可以成功吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:47:09.567

从 github使用这个[插件怎么样？](https://github.com/smithimage/phonegap-plugins/tree/master/iPhone/AdMob)看起来设置它应该不会太糟糕。

# android - 如何使用 SQLite 处理活动数量？

> ID：11761215
> 
> 赞同：0
> 
> 时间：2012-08-01T14:15:18.577
> 
> 标签：android, sqlite

我有一个活动，我创建了扩展 SQLiteOpenHelper 的名为 DatabaseHelper 的类，现在当我想使用它时（我在许多简单的例子中看到过）我需要有新的 SQLiteDatabase 对象并在我的活动中实现插入、更新、删除......代码。

如果我想处理具有多个活动的数据库并只创建一次 DatabaseHelper，那么正确的设计是什么，因为所有活动都可以使用它。（并且没有重复的代码。

简单地说：活动数量的正确类 SQLite 结构是什么

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:09:48.803

`DatabaseHelper`在整个应用程序的生命周期中使您成为单身人士。查看我关于该主题的博客文章：

## [正确管理 SQLite 数据库](http://www.androiddesignpatterns.com/2012/05/correctly-managing-your-sqlite-database.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:17:00.933

只需在整个应用程序中使用一个 DatabaseHelper，重复自己没有任何好处。

# ruby - 使用 ruby 发送手动编码的 http 请求时出错

> ID：11761217
> 
> 赞同：1
> 
> 时间：2012-08-01T14:15:26.343
> 
> 标签：ruby, http

想测试一下 http 的幕后发生了什么，所以我做了这样的事情：

```
socket = TCPSocket.open('localhost',4567)

request = "GET / HTTP/1.1\r\nHost:localhost\r\n\r\n"

socket.print request 
```

但是 sinatra 给了我一个错误：

```
[2012-08-01 14:04:11] ERROR bad Request-Line `'.
ec2-184-169-164-27.us-west-1.compute.amazonaws.com - - [01/Aug/2012:14:04:11 UTC] "" 400 313
- -> 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T20:47:34.057

这可能取决于 Web 服务器，一些 Web 服务器**需要**一些标头（我遇到了同样的问题并通过添加 Accept 标头解决了它），还有一些防火墙需要 User-Agent，所以试试这个：

```
socket.puts "GET / HTTP/1.1\r\n"
socket.puts "Host: localhost\r\n"
socket.puts "Accept: text/html,*/*\r\n"
socket.puts "User-Agent: Mozilla/4.0 (Windows; MSIE 6.0; Windows NT 6.0)\r\n"
socket.puts "Connection: close\r\n"
socket.puts "\r\n" 
```

还要注意后面的空间**：（**很少见）但网络服务器可能需要！

也使用 puts 可能比 print 更好。（在我看来！）

# asp.net-mvc - Roles.IsUserInRole(User.Identity.Name, "domain\group") 使用登录屏幕提示用户

> ID：11761219
> 
> 赞同：0
> 
> 时间：2012-08-01T14:15:31.473
> 
> 标签：asp.net-mvc, windows, authentication, razor, iis-7

我不确定这是否是设计使然，但对我来说似乎有点奇怪。或者充其量，行为在机器之间是不一致的。我有一个 Web 应用程序，如果网站上的人是某个广告组的一部分，它只会显示一个按钮。这是代码：

```
 <td id="search-box">
        @Using Html.BeginForm()
            @Html.TextBox("SearchString", ViewBag.CurrentFilter)
           @<input class="fancyButton" type="submit" value="Search" title="Job Name"/>
            If Roles.IsUserInRole(User.Identity.Name, "mydomain\mygroup") Or Roles.IsUserInRole(User.Identity.Name, "mydomain\mygroup2") Then
                @<input type="button" class="fancyButton" onclick="parent.location = '@Url.Action("Create")'" value="New"/>
            End If
        End Using
    </td> 
```

我的 id 是“mygroup”组的一部分。所以在我的机器上，当我打开网站时，它工作正常。按钮出现，创建记录页面正确显示。但是，当属于 mygroup2 的其他用户尝试查看该应用程序时，尽管出现了该按钮，但当他们单击它时，系统会提示他们输入用户 ID 和密码。我不确定为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:53:33.243

当您在与开发机器不同的服务器上部署到 IIS 时，此行为是否保持不变？它可能与应用程序池身份有关，而不是经过身份验证的用户帐户。部署到单独的计算机可以帮助隔离问题的原因并确定身份验证提示的来源。

# sql - SQL Server：为上个月设置两个变量月份和年份，年份翻转安全

> ID：11761220
> 
> 赞同：0
> 
> 时间：2012-08-01T14:15:32.877
> 
> 标签：sql, sql-server

我试图基本上动态地将两个变量（@month 和@year）设置为前一个月和前一年的值。

所以在今天的情况`@month = 7`下`@year = 2012`

但是我想要一些安全的东西，所以如果是的话，`1/1/2013`我会得到`@month = 12`and `@year = 2012`。

谢谢！

这就是我所拥有的。

```
declare @month              int
declare @year               int

set @month = month (getDate ())-1
set @year = 2012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:18:49.713

您可以使用[DATEADD](http://msdn.microsoft.com/en-us/library/ms186819.aspx)从当前日期中减去一个月，然后获取`MONTH`和`YEAR`部分：

```
DECLARE @monthAgo dateTime
DECLARE @month int
DECLARE @year int

SET @monthAgo = DATEADD(month, -1, GETDATE())
SET @month = MONTH(@monthAgo)
SET @year = YEAR(@monthAgo) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:18:18.950

以步骤显示。您可以修改分配给`@Now`测试的值。

```
DECLARE @Now DateTime = GETDATE();
DECLARE @Then DateTime = DATEADD(Month, -1, @Now);

DECLARE @Month Int = DATEPART(Month, @Then);
DECLARE @Year Int = DATEPART(Year, @Then);

SELECT @Month, @Year; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:18:42.507

作为单个查询，这给出了上个月的第一天：

```
select DATEADD(month,DATEDIFF(month,'20010101',CURRENT_TIMESTAMP),'20001201') 
```

如果你愿意，你可以把它分成两个独立的变量，但为什么要麻烦呢？（我假设您正在做的其他事情也是使用`datetime`s，而不是`int`s）

* * *

选择上面的两个`datetime`字符串是因为它们之间具有所需的关系——第二个字符串比第一个字符串早 1 个月开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T14:19:03.690

你能不能在你已经拥有的东西之后添加：

```
if @month = 0
begin
  set @month = 12
  set @year = @year - 1
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T14:23:36.480

试试这个

```
declare @month int
declare @year int
Declare @dt datetime=getdate()
set @month = DATEPART(mm,DATEADD(mm,-1,@dt))
select @month
set @year = DATEPART(yy,DATEADD(mm,-1,@dt))
select @year 
```

# jquery - PHP 和 Struts2 中的 Javascript/Ajax 比较

> ID：11761223
> 
> 赞同：0
> 
> 时间：2012-08-01T14:15:40.880
> 
> 标签：jquery, ajax, jquery-plugins, html, struts2

我在 PHP 中的 JavaScript + AJAX 方面有一点经验，但我在 Struts2 中从未有过。我在 PHP 中有一个习惯，其中包含一个我需要动态的 div，因此在表单中，例如有一个调用 JavaScript 函数的选择，该 JavaScript 函数可以在标题或 .js 文件中定义，因此，那些创建 ajax 对象并将参数发送到另一个 PHP 页面的 JavaScript 文件，该页面包含要在第一页中更改的 div 的相同名称。但是，我怎样才能在 Struts2 上进行投影呢？在哪里调用 JavaScript 函数和 action 函数？struts2-jquery-plugin 会更容易吗？不幸的是，我在这两种情况下都没有任何示例（本机 Ajax，或者 jQuery 插件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:20:53.557

在编写“原始”JavaScript/jQuery 时，框架并不重要。您可以像使用任何其他服务器框架一样编写 JS/JQ——客户端代码本质上是相同的。

[jQuery 插件](http://code.google.com/p/struts2-jquery/) *确实*使简单的用例变得更加简单。对于复杂的用例，它更像是一个折腾。然而，它提供了一个非常灵活的发布/订阅机制。

# objective-c - 用户滑动时重新创建自定义单元格

> ID：11761225
> 
> 赞同：0
> 
> 时间：2012-08-01T14:15:50.507
> 
> 标签：objective-c, ios, uitableview

我正在使用 iOS5 和 Xcode 4.3.3 开发应用程序。

我有一个**UserTableViewController**，它是通过使用**CustomCell创建的****TableViewController** ，它是**UITableViewCell**的子类。到目前为止，一切正常。

 ****我还实现了这两种方法来获取用户滑动。现在，我可以在用户滑动时显示删除按钮。

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {

        NSDictionary *dictionaryWithUrl = [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle]pathForResource:@"Urls" ofType:@"plist"]];
        NSString *baseUrl = [dictionaryWithUrl objectForKey:@"urlWithNews"];
        baseUrl = [baseUrl stringByAppendingFormat:@"/delete?newsId=%d",[[[self.arrayWithUserNews objectAtIndex:indexPath.row]objectForKey:@"newsId" ]intValue]];
        NSURLRequest *requestToDeleteNews = [NSURLRequest requestWithURL:[NSURL URLWithString:baseUrl]];
        [NSURLConnection sendSynchronousRequest:requestToDeleteNews returningResponse:nil error:nil];
        [self.arrayWithUserNews  removeObjectAtIndex:indexPath.row ] ;
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [tableView reloadData];
    }   
} 
```

好吧，我想要做的是重新创建一个自定义单元格，然后刷卡以获得其他功能。因为，对于我正在开发的应用程序，删除一个单元格是不够的。用户也可以编辑表格单元格。这是一个示例，我想要创建的内容。这是 Twitter iOS 应用程序示例。他们做了我所需要的。

**初始单元格**

![](../Images/f2907d8ace005a2febfcf572f026982e.png)
**用户滑动后**

![在此处输入图像描述](../Images/e29b7f7cc9338c5fab1a1df0261878b3.png)

注意，为了清楚起见，它们出现在完全相同的位置。

有没有人可以给我正确的途径来完成这个？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:33:44.017

该单元格没有被删除，它只是在其自身之上显示另一个视图。您需要创建一个自定义单元格，对其进行子类化，然后才能识别横向手势。当您检测到手势时，更改单元格显示的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:09:43.150

看看[这个项目](https://github.com/boctor/idev-recipes/tree/master/SideSwipeTableView)

它正是你想要的****

# javascript - 访问 javascript 对象的实例变量

> ID：11761229
> 
> 赞同：0
> 
> 时间：2012-08-01T14:16:04.863
> 
> 标签：javascript, jquery, tag-it

```
<!doctype html>
<html>
<head>
  <title>jQuery Tagit Demo Page (HTML)</title>
  <script src="demo/js/jquery.1.7.2.min.js"></script>
  <script src="demo/js/jquery-ui.1.8.20.min.js"></script>
  <script src="js/tagit.js"></script>

  <link href="demo/css/demo.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" type="text/css" href="css/tagit-stylish-yellow.css">

  <script>

    $(document).ready(function () {

    var list = new Array();
     var availableTags = [];

     $('#demo2').tagit({tagSource:availableTags});

     $('#demo2GetTags').click(function () {
        showTags($('#demo2').tagit('tags'))
      });

     /*
    $('li[data-value]').each(function(){
        alert($(this).data("value"));
    });*/

    function showTags(tags) {

        var list = new Array();
        console.log(tags);
        var string;
        for (var i in tags)
          string +=    new String(tags[i].value)

            console.log(string);
        }

    });
  </script>
</head>
<body>

<div id="wrap">

<div class="box">
  <div class="note">
    You can manually specify tags in your markup by adding <em>list items</em> to the unordered list!
  </div>

    <ul id="demo2" data-name="demo2">
        <li data-value="here">here</li>
        <li data-value="are">are</li>
        <li data-value="some...">some</li>
        <!-- notice that this tag is setting a different value :) -->
        <li data-value="initial">initial</li>
        <li data-value="tags">tags</li>
    </ul>

  <div class="buttons">
    <button id="demo2GetTags" value="Get Tags">Get Tags</button>
    <button id="demo2ResetTags" value="Reset Tags">Reset Tags</button>
    <button id="view-tags">View Tags on the console </button>
  </div>
</div>

</div>
<script>
</script>
</body>
</html> 
```

我对这段代码的问题是这个函数

```
function showTags(tags) {

            var list = new Array();
            console.log(tags);
            var string;
            for (var i in tags)
              string +=  tags[i].value;
                console.log(string);
            }
        }); 
```

如果我这样做了，我会返回给我一个“未定义”，然后是列表项的一些值。但如果我把那个功能改成这个

```
function showTags(tags) {

        var list = new Array();
        console.log(tags);

        for (var i in tags)
          string +=  tags[i].value;

            console.log(string);
        }

    }); 
```

它只返回“标签”这个词，为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:23:13.037

你需要初始化`string`. `+=`运算符附加一个值，但由于`string`没有值，因此没有什么可附加的。

```
var string = ""; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:27:16.960

您在`for`循环之后缺少一个括号，因此`console.log`不会为每次迭代调用该语句。

# html - 浮动外部 div 未调整大小以适应其子级

> ID：11761230
> 
> 赞同：0
> 
> 时间：2012-08-01T14:16:09.420
> 
> 标签：html, css

这是高度浓缩的代码：

```
<div style="float:left; border: 2px red solid; padding: 2px; margin: 2px;">
    <div style="width:50%; border: 2px green solid; padding: 2px;  margin: 2px;">
        <ul>
            <li>I_Would_Like_The_Outer_Div_To_Resize_To_Accomdate_This_Blob_Of_Text</li>
            <li>It's floated-ed because I'm using floating to implement a float layout.</li>
        </ul>
    </div>
</div> 
```

这是输出。我希望扩展外部 div 的宽度，以便内部 div 包含长的文本块。这是输出：

![在此处输入图像描述](../Images/c84c5e94bc1876aa178c6b79cefa1e83.png)

编辑：

哇。我的意思是说：

> 外部 div 是浮动的，因为我使用浮动来实现无表的 COLUMN 布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:20:51.367

只需添加`word-wrap:break-word`，

```
<div style="float:left; border: 2px red solid; padding: 2px; margin: 2px;">
    <div style="width:50%; border: 2px green solid; padding: 2px;  margin: 2px;word-wrap: break-word;">
        <ul>
            <li>I_Would_Like_The_Outer_Div_To_Resize_To_Accomdate_This_Blob_Of_Text</li>
            <li>It's floated-ed because I'm using floating to implement a float layout.</li>
        </ul>
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:41:21.533

尝试同时提供 DIV`width: auto`并选择设置一个`min-width`.

# wordpress - Wordpress 帖子页面未显示图库中的所有图像

> ID：11761231
> 
> 赞同：1
> 
> 时间：2012-08-01T14:16:16.047
> 
> 标签：wordpress, gallery

我希望有人可以提供帮助，因为这正在杀死我。我正在使用其他人的代码并且遇到了很多麻烦，而且我只是 wordpress 的新手。

我想要实现的是帖子在页面顶部显示来自画廊的第一张图片，然后是它下方的第二张图片（在一些文本内容旁边），然后我希望它显示所有剩余的图片在画廊。出于某种原因，它目前将画廊中的最后两张图片排除在外，就好像它们被有意排除在外一样。非常感谢您的帮助，我很感激。

这是当前代码：

```
<?php

get_header();

if (have_posts()) {
while (have_posts()) {
    the_post();
    $images = GetPostImages(); // Get Post Images
    $tags = GetPostTags(); // Get Post Tags String
    ?>                    
<div class="project">

<img src="<?php echo $images[1]->guid; ?>" class="large" width="1000" height="700" />

<div class="projectdesc">  
    <h1><?php the_title(); ?></h1>
        <p class="tags"><?php echo $tags; ?></p>

    <?php 
the_content(); ?>

</div>

<img src="<?php echo $images[2]->guid; ?>" class="right" width="600" height="400" />

 <?php
        // Additional Project Images
        for ($i = 3; $i < count($images); $i++) {
            ?>
            <img src="<?php echo $images[$i]->guid; ?>" class="large" width="1000"/>        
            <?php
        }
        ?> 

    </div>

    <?php
}
}

get_footer();
?>` 
```

functions.php 文件中的代码也在下面。我认为这控制了帖子页面处理图像的方式？

```
function GetPostImages() {
global $post;

// Get image attachments
$images = get_children('post_type=attachment&post_mime_type=image&post_parent='.$post->ID);

// Sort by menu_order
foreach ($images as $key=>$image) {
    $newImages[$image->menu_order] = $image;
}

// Return
return $newImages; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:37:44.797

use **wp_get_attachment_image_src()** to get the image source

```
$attr = wp_get_attachment_image_src(int $id,string $size); //where $id is image post id

$width  =  $attr[1];
$height =  $attr[2];
$src    =  $attr[0]; //the source

echo sprintf('<img src="%s" alt="" height="%s" width="%s"/>',$src,$height,$width); 
```

witin the functions.php file or an include file within the functions.php include...

```
function setup_images(){

//Register Image dimensions
add_image_size( 'large',1000,700,true); //'large' will be the string used in $size
add_image_size( 'med',600,400,true);  //or 'med'
}
add_action('after_setup_theme','setup_images'); //hook that function up in the right place 
```

# php - 随机 div 选择器

> ID：11761232
> 
> 赞同：0
> 
> 时间：2012-08-01T14:16:16.753
> 
> 标签：php, javascript, random, generator

```
<?php $page = $wp_query->post->ID;
switch ($page) {
case is_page (449) : 
echo "<script type='text/javascript'> var rightdivs = $('.random-right').get().sort(function(){return Math.round(Math.random())-0.5;}).slice(0,1);$(rightdivs).appendTo(rightdivs[0].parentNode).show();</script>";
break;
case is_page (7) : 
case is_page (197) : 
case is_page (214) : 
case is_page (218) : 
case is_page (11) : 
case is_page (260) : 
echo "<script type='text/javascript'> var rightdivs = $('.random-r right').get().sort(function(){return Math.round(Math.random())-0.5;}).slice(0,3);$(rightdivs).appendTo(rightdivs[0].parentNode).show();</script>";
break;
case is_page (212) : 
case is_page (216) : 
case is_page (452) : 
case is_page (226) : 
case is_page (228) : 
case is_page (230) : 
echo "<script type='text/javascript'> var rightdivs = $('.random-right').get().sort(function(){return Math.round(Math.random())-0.5;}).slice(0,4);$(rightdivs).appendTo(rightdivs[0].parentNode).show();</script>";
break;
case is_page (236) : 
case is_page (254) : 
echo "<script type='text/javascript'> var rightdivs = $('.random-right').get().sort(function(){return Math.round(Math.random())-0.5;}).slice(0,5);$(rightdivs).appendTo(rightdivs[0].parentNode).show();</script>";
break;
// Uncomment to add 6 CTA's onto long enough pages
/*case is_page () :
echo "<script type='text/javascript'> var rightdivs = $('.random-right').get().sort(function(){return Math.round(Math.random())-0.5;}).slice(0,6);$(rightdivs).appendTo(rightdivs[0].parentNode).show();</script>";
break;*/
case is_page (220) : 
case is_page (238) : 
case is_page (256) : 
echo "<script type='text/javascript'> var rightdivs = $('.random-right').get().sort(function(){return Math.round(Math.random())-0.5;}).slice(0,7);$(rightdivs).appendTo(rightdivs[0].parentNode).show();</script>";
break;
case is_page (15) :
echo "<script type='text/javascript'> var rightdivs = $('.random-right').get().sort(function(){return Math.round(Math.random())-0.5;}).slice(0,8);$(rightdivs).appendTo(rightdivs[0].parentNode).show();</script>";
break;
// Uncomment to add 8 or 9 CTA's onto long enough pages
/*case is_page () :
echo "<script type='text/javascript'> var rightdivs = $('.random-right').get().sort(function(){return Math.round(Math.random())-0.5;}).slice(0,9);$(rightdivs).appendTo(rightdivs[0].parentNode).show();</script>";
break;*/
default :
echo "<script type='text/javascript'> var rightdivs = $('.random-right').get().sort(function(){return Math.round(Math.random())-0.5;}).slice(0,2);$(rightdivs).appendTo(rightdivs[0].parentNode).show();</script>";
}
?> 
```

我正在编写一些号召性用语框，以随机显示在我的网站右侧，我已经让它工作正常，但我想更进一步，让它不显示号召性用语 div与该页面相关，即：

单击此处了解我们 - 不会显示在“关于我们”页面上。

以上是我目前所拥有的。正如您将能够看到的那样，包含用于号召性用语的文本和图像的 div 被称为“随机右”。它们都具有相同的“random-right”类别和“right-cta-1”、“right-cta-2”等对应的id；链接的格式是这样的；"" 因为我在 WP 中开发它，所以不想为了灵活性而使用绝对链接。

希望有人可以提供帮助，因为它一直让我发疯:)

# android - Android Helper Activity 及其布局应该在哪里

> ID：11761233
> 
> 赞同：0
> 
> 时间：2012-08-01T14:16:17.060
> 
> 标签：android, android-layout, code-structure

我是android和java的新手，所以请原谅我这个愚蠢的问题。

我的项目中有一个活动可以在许多其他项目中使用，因此我希望将其代码与项目中的其他所有内容分开（可能在其他一些包中）。

我有这些文件

```
MyHelperActivity
my_helper_layout 
```

我不知道如何将它们放在我的项目中。当前`MyHelperActivity`位于项目的布局文件夹中，`mypackage.helper`并且`my_helper_layout`我已将活动包含在清单文件中。

文件夹结构应该是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:19:22.020

创建一个新项目并将其定义为库项目。然后，当您创建一个需要您的活动的新项目时，您只需将其添加到您的构建路径中。

# sql - SQL Server 2000 LEN 函数只返回长度直到第一次出现回车/换行

> ID：11761234
> 
> 赞同：1
> 
> 时间：2012-08-01T14:16:25.450
> 
> 标签：sql, tsql, sql-server-2000

我遇到的问题是，`varchar`如果值包含`CR/LF`值（不是尾随），则不会正确返回 a 的长度。

例如以下查询片段：

数据类似于：

```
<xml><name>Name[CR/LF] Name</name></xml> 
```

像这样的查询：

```
DECLARE @myid as INT
DECLARE @xmldata as VARCHAR(8000)
SET @myid = 1
SELECT @xmldata = xmldata FROM mytable WHERE id=@myid

PRINT 'The length is ' + CAST(LEN(@xmldata) AS VARCHAR(6))
PRINT 'Data:'
PRINT @xmldata 
```

将输出：

```
The length is 15
Data:
<xml><name>Name[CR/LF] Name</name></xml> 
```

我希望 LEN 函数返回 35 作为长度？

这是在 SQL Server 2000 SP4 (8.00.2065) 上

有谁知道是否有设置或其他功能可以用来防止这种情况。我能想到的一个选项是删除选择中的回车符和换行符：

```
SELECT @xmldata = REPLACE(REPLACE(REPLACE(REPLACE(xmldata, CHAR(13) + CHAR(10), ''), CHAR(10) + CHAR(13), ''), CHAR(13), ''), CHAR(10), '') 
```

但希望可能有另一个功能或设置来覆盖该行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:46:17.480

以下在 SQL Server 2008 R2 中两次返回 35（不是 33）：

```
DECLARE @xmldata as VARCHAR(8000) 
SELECT @xmldata = '<xml><name>Name' + CHAR(13) + CHAR(10) + ' Name</name></xml>'
--                 000000000111111         1          1      112222222222333333
--                 123456789012345         6          7      890123456789012345
PRINT LEN(@xmldata)
print DataLength(@xmldata)
PRINT @xmldata 
```

在我看来是对的。

# windows - 在 windows 命令行中运行多个命令

> ID：11761235
> 
> 赞同：9
> 
> 时间：2012-08-01T14:16:31.083
> 
> 标签：windows, batch-file, cmd

如何从 Windows 命令行一次运行多个命令？在 *nix 环境中，我可以这样做：

```
export VAR=foo; echo $VAR 
```

我能找到的最接近的方法是：

```
set VAR=foo & echo %VAR% 
```

但是，当我“回显”时，没有设置 VAR。我需要在同一进程下执行所有命令

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T21:07:09.453

`cmd /c call set VAR=foo & echo %VAR%`- 这工作正常，即使用“调用集”调用集。您可以在每个命令之前设置调用。

# perl - Perl：命令从 shell 工作，但不是 system()

> ID：11761239
> 
> 赞同：1
> 
> 时间：2012-08-01T14:16:56.900
> 
> 标签：perl

在这里排名初学者请温柔...我正在用perl编写一个程序，它可以找到所有特定的文件类型并调用另一个名为newstack的程序来转换文件类型。

当我`newstack oldfileame newfilename`从我的外壳运行时，它工作正常。

当我的程序运行时`system("newstack oldfileame newfilename")`newstack 返回错误：

```
ERROR: NEWSTACK - NO INPUT FILE SELECTED
sh: line1: ./oldfilename: cannot execute binary file 
```

如果我编写一个执行相同操作的 shell 脚本，一次在文件上运行一个 newstack，它就可以正常工作。我在这里遗漏了什么，为什么在 perl 程序的上下文中运行时它会失败？

Newstack来自[IMOD](http://en.wikipedia.org/wiki/IMOD_%28software%29)程序套件，我不知道它是用什么写的。文件是mrc文件，它们是二进制图像文件。

编辑:: 这是所要求的实际代码：

```
print "Enter the rootname of the files to be converted: ";
my $filename = <STDIN>;
chop $filename;

my @files = qx(ls $filename*.mrc);     
open LOGFILE, (">modeconvert-log");     
foreach my $mrc (@files)           
{        
print LOGFILE "$mrc";       
system("newstack -mode 2 $mrc $mrc");     
} 
my $fileno = @files;
print "$fileno files converted\n"; 
```

我`chop $mrc`在第 8 行之后添加，它解决了问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:50:28.597

您发布的代码和您执行的代码不同。在您执行的代码中，后面有一个换行符`newstack`

```
$ perl -e'system("who\n oldfileame newfilename")'
sh: line 1: oldfileame: command not found 
```

`chomp($x)`使用或 using删除换行符`$x =~ s/\s+\z//;`。

* * *

```
my @files = qx(ls $filename*.mrc); 
```

应该

```
my @files = qx(ls $filename*.mrc);
chomp @files; 
```

或者更好：

```
my @files = glob("\Q$filename\E*.mrc"); 
```

* * *

上述和其他修复：

```
use IPC::System::Simple qw( system );                          # Replaces system with one that dies on Checks for errors.

open(my $LOGFILE, '>', 'modeconvert-log')                      # Avoids global vars.
   or die("Can't create log file \"modeconvert-log\": $!\n");  # Adds useful error checking.

print "Enter the rootname of the files to be converted: ";
my $filename = <STDIN>;
chomp $filename;                                               # chomp is safer.

my @files = glob("\Q$filename\E*.mrc");                        # Works with file names with spaces, etc.

for my $mrc (@files) {
   print $LOGFILE "$mrc\n";                                    # Was missing a newline.
   system("newstack", "-mode", "2", $mrc, $mrc);               # Works with file names with spaces, etc.
} 

print 0+@files, " files converted.\n"; 
```

# c# - SignalR，asp.net如何设置connectionId？

> ID：11761246
> 
> 赞同：3
> 
> 时间：2012-08-01T14:17:13.710
> 
> 标签：c#, asp.net, signalr

我想向用户发送私人消息。我需要在隐藏字段中设置一个connectionId，我这样做是这样的：

```
$.connection.hub.start().done(function () {
    $.connection.hub.id = $("[id$=hfLoggedUserId]").val();
}) 
```

当我在 firbug 控制台 $.connection.hub.id 中运行时，我得到了很好的价值。尽管如此，当我向客户端发送消息时，消息没有到达。

我使用如下代码从服务器端发送电子邮件：

```
public static void LogNewMessage(Bobine.Data.Message message)
    {
        var clients = GetClients();
        clients[message.ReceipientUserId.ToString()].newMessage("Serwer", Message);
    }

    private static dynamic GetClients()
    {
        return GlobalHost.ConnectionManager.GetHubContext<MessageHub>().Clients;
    } 
```

如果我改变这条线

```
clients[message.ReceipientUserId.ToString()].newMessage("Serwer", Message); 
```

至

```
clients.newMessage("Serwer", Message); 
```

然后消息会发送到所有连接的客户端。

我怎样才能只向特定客户发送消息？

PS 我读过 IConnectionIdFactory 但我不想将我自己的工厂用于所有集线器。有什么方法可以将连接工厂设置为特定的集线器？如果我将此行插入 Global.asax：

```
GlobalHost.DependencyResolver.Register(typeof(IConnectionIdGenerator), () => new MyOwnConnectionFactory()) 
```

然后我的工厂与所有集线器一起使用。

# java - 如何在android中创建队列？

> ID：11761251
> 
> 赞同：1
> 
> 时间：2012-08-01T14:17:29.900
> 
> 标签：java, android, service

```
 Uri uriSMSURI = Uri.parse("content://sms/inbox");
        Cursor cur = getContentResolver().query(uriSMSURI, null, null, null,null);
        int i=0;
        while (cur.moveToNext()) {
            Phone_no=cur.getString(2);
            Time=cur.getLong(4);
            Message_body=cur.getString(11);
            Date dateObj = new Date(Time);
            SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd:HH:mm:ss");
            String Timenew = df.format(dateObj);
            Log.d(Tag,"INSIDE OF READ SMS INBOX");

           service.setClass(getBaseContext(), Background_Service.class);
           service.putExtra("Phone_no", Phone_no);
           service.putExtra("Message_body", Message_body);
           service.putExtra("Timenew", Timenew);
           getBaseContext().startService(service);
           } 
```

上面的代码从收件箱中读取消息。我将这些消息发送到服务以进行进一步处理。这是正确的做法吗。我是否应该为服务执行创建一个队列，如果是，如何创建，为上述代码实现一个队列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:23:27.103

是的，这是适用的方式。但是，我更喜欢另一个。

您可以创建一次服务并绑定到它，然后将`Message`s 发送给它，而不是启动一个新服务并将新意图路由到它。

首先，您需要一个消息传递协议。最简单的方法是创建具有相似内容的 AIDL 文件。

```
package org.your.pkg;

interface IBackgroundService {
  void queueMsg(String phoneNo, String msgBody, String timeNew);
} 
```

然后，您必须在您的服务中实现它。

```
class BackgroundService extends Service {

  IBackgroundService.Stub binder = new IBackgroundService.Stub() {
    public void queueMsg(String phoneNo, String msgBody, String timeNew) {
      // enqueue message to service thread. Do not process msg in this method.
    }
  };

  public IBinder getBinder() {
    return binder;
  }
} 
```

然后，您必须连接到您的服务。

```
private ServiceConnection mConnection = new ServiceConnection() {
    public void onServiceConnected(ComponentName className, IBinder service) {
        IBackgroundService yourService = IBackgroundService.Stub.asInterface(service);

        // calls to yourService.queueMsg(...)
    }

    public void onServiceDisconnected(ComponentName className) {
        Log.e(TAG, "Service has unexpectedly disconnected");
    }
}; 
```

[关于这个](http://developer.android.com/guide/components/bound-services.html)话题还有更多。

# php - 如何使用 jQuery 正确获取图像的 id？

> ID：11761259
> 
> 赞同：2
> 
> 时间：2012-08-01T14:17:54.393
> 
> 标签：php, jquery

我有 3 个 PHP 页面，它们的功能是显示存储在数据库中的图像，如果您双击一个图像，则该图像的属性会显示在屏幕上。

*   更新.php
*   列表.php
*   update_list.php

*“update.php”*有 2 个选择框：主类别和子类别。如果提交，*“* list.php”通过jquery load()显示在*“update.php”中。*它也与*“list.php”*和*“update_list.php”*具有相同的关系。*“list.php”*包含图像，如果您双击一张图像，*“update_list.php”* 将显示在屏幕左侧。

这些是代码：

更新.php

```
 <?php
include('../../include/settings.php');
?>

<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../mystyle.css" />
<script src="../../include/all.js"></script>
<script type="text/javascript">
$(document).ready(function(){

    $("#buttonList").click(function(){
        var main_id=$('#selectMainProList').val();
        var sub_id=$('#selectSubProList').val();
        $('#list').load('list.php?sub_id='+sub_id+'&main_id='+main_id);
        });

    $("#selectMainProList").change(function(){
        var main_cat_id=$('#selectMainProList').val();
        $('#selectSubProList').load('update.html', function(){
            $('#spanSubProList').load('update.php?selected='+main_cat_id+' #selectSubProList');
        });
    });

});
</script>
</head>
<body>
<?php
    $posted_parent = getGet('selected'); //birbirine bağlı selectboxlar'da main selectbox'ın id'sini tutar.
?>
<form id="formProList" method="POST">
    <table align="center">
        <tr>
            <td>Ana Kategoriyi Seçiniz</td>
            <td>
                <span id="spanMainProList" name="spanMainProList">
                    <select id="selectMainProList" name="selectMainProList">
                        <option value="0">--------------------------</option>
                        <?
                            $sql="Select * from kategori where ust_kat_id='0'";
                            $result=mysql_query($sql);
                            while($row = mysql_fetch_row($result))
                            {
                                $main_pro_id=$row[0];
                                $main_pro_name=$row[1]; 

                                echo "<option value='".$main_pro_id."'>".$main_pro_name."</option>";

                            }
                        ?>
                    </select>
                </span>
            </td>
        </tr>
        <tr>
            <td>Alt Kategoriyi Seçiniz</td>
            <td>
                <span id="spanSubProList">
                    <select id="selectSubProList" name="selectSubProList">
                        <option value="0">--------------------------</option>
                        <?
                            $sql="Select * from kategori where ust_kat_id='$posted_parent'";
                            $result=mysql_query($sql);
                            while($row = mysql_fetch_row($result))
                            {
                                $sub_pro_id=$row[0];
                                $sub_pro_name=$row[1];  

                                echo "<option value='".$sub_pro_id."'>".$sub_pro_name."</option>";
                            }
                        ?>
                    </select>
                </span>
            </td>
        </tr>
        <tr>
            <td></td>
            <td><input type="button" id="buttonList" name="buttonList" value="Search"/></td>    
        </tr>   
    </table>
</form>
<div id="list"></div>
</body>
</html> 
```

列表.php

```
<?php
include('../../include/settings.php');
?>

<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../css/mystyle.css" />
<link rel="stylesheet" type="text/css" href="../../css/tooltip.css" />
<script src="../../include/all.js"></script>
<script type="text/javascript">
$(document).ready(function(){

    $("img").dblclick(function(){
        var id=$('#hiddenID').val();
        alert(id);
        $("#update_pro").slideToggle();
        $('#update_pro').load('update_list.php?id='+id);
        });

});
</script>
</head>
<body>
<?php
    $main_cat_id=getGet("main_id"); 
    $sub_cat_id=getGet("sub_id");   
?>
<form>
<table align="center">
<tr>
<td>    
    <table align="center">
        <tr>
            <?php
                $sql="SELECT * FROM urun WHERE alt_kat_id='$sub_cat_id' and ana_kat_id='$main_cat_id'";
                $result=mysql_query($sql);
                $count=mysql_num_rows($result);
                $i=0;
                while($row=mysql_fetch_assoc($result,0))
                {
                    $image_dir=$row["resim"];
                    $id=$row["id"];
                    $isim_tr=$row["isim_tr"];
                    $aciklama_tr=$row["aciklama_tr"];
                    if($i!=2)
                    {
                        echo "<td>";
                        echo "<a href='#' class='tt'><img src='$image_dir' height='150' width='150'/><span class='tooltip'><span class='top'></span><span class='middle'>$aciklama_tr--$id</span><span class='bottom'></span></span></a><br>";
                        echo "<center><input type='button' id='buttonProDelete' value='Delete' /></center>";
                        echo "<br><center>$isim_tr</center>";
                        echo "<input type='hidden' id='hiddenID' value='$id' />";
                        echo "</td>";
                        $i++;
                    }
                    else
                    {
                        echo "<tr>";
                        echo "</tr>";
                        echo "<td>";
                        echo "<a href='#' class='tt'><img src='$image_dir' height='150' width='150'/><span class='tooltip'><span class='top'></span><span class='middle'>$aciklama_tr--$id</span><span class='bottom'></span></span></a><br>";
                        echo "<center><input type='button' id='buttonProDelete' value='Delete' /></center>";
                        echo "<br><center>$isim_tr</center>";
                        echo "<input type='hidden' id='hiddenID' value='$id' />";
                        echo "</td>";
                        $i=1;

                    }
                }
            ?>
        </tr>
    </table>
</td>
<td><div id="update_pro"></div></td>
</tr>
</table>
</form>
</body>
</html> 
```

更新列表.php

```
<?php
include('../../include/settings.php');
?>

<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../css/mystyle.css" />
<script src="../../include/all.js"></script>
<script type="text/javascript">

</script>
</head>
<body>
<?php 

    $id=getGet("id");
    echo $id;

?>

</body>
</html> 
```

问题是我无法获取我双击的图像的真实 id。我总是获取第一个的 id！我想单击图像，然后，我想在同一页面中显示该图像的属性。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:25:50.157

使用`$(this)`<--get jquery 对象 jquery 功能

或`this`<-- 获取 DOM 元素 - javascript 功能

```
$("img").dblclick(function(){
    var id=$(this).val();  // <-- $(this) for current clicked image
    alert(id);
    $("#update_pro").slideToggle();
    $('#update_pro').load('update_list.php?id='+id);
}); 
```

你还说你想要 id 所以而不是像下面那样`val()`得到`id`

```
$(this).attr('id'); 
```

或者

```
this.id 
```

# regex - java文件中搜索方法名的正则表达式

> ID：11761260
> 
> 赞同：-3
> 
> 时间：2012-08-01T14:17:57.357
> 
> 标签：regex, ant

我想`calculator();`在 java 文件中获取名称 String 并替换为 String `//calculator`。我怎样才能做到这一点 ？那么，我该如何编写一个正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:21:06.950

由于您使用的是 Ant，您是否看过 < [replaceregexp](http://ant.apache.org/manual/Tasks/replaceregexp.html) > 任务？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:24:39.943

我不确定你在找什么，确切地说，但是要捕获的正则表达式`calculator();`是`calculator\(\);`

# javascript - 我可以以某种方式阻止我的代码中的返回在表单元素之间添加间距吗？

> ID：11761261
> 
> 赞同：4
> 
> 时间：2012-08-01T14:17:57.157
> 
> 标签：javascript, html, webforms

> **可能重复：**
> [忽略 HTML 中的空格](https://stackoverflow.com/questions/2628050/ignore-whitespace-in-html)

我正在创建一个荷兰食谱网站。问题是通过 Javascript 添加新表单字段时出现的视觉错误。

## 问题发生的地方

为了描述所有需要的成分，我允许用户在现有的成分表单字段中添加更多的成分表单字段，这些字段是由 HTML 预先定义的。您可以通过按下“添加另一种成分”按钮来添加这些新字段。一个名为 addIngredient() 的 JavaScript 函数被称为 onclick（为了清楚起见，它被截断，完整的代码可以在[这里](http://pastebin.com/caAqMCCD "添加新配方功能")找到）：

```
function addIngredient() {
  ingredientCount++;

  //define the elements that should be created
  var Group = document.createElement("span");
  var Quantity = document.createElement("input");
  var Unit = document.createElement("input");
  var Type = document.createElement("input");
  var lineBreak = document.createElement("br");

  //set the attributes for each element
  Group.setAttribute("id", "ingredient_" + ingredientCount);
  Quantity.setAttribute("type", "text");
  Unit.setAttribute("type", "text");
  Type.setAttribute("type", "text");

  //add the ingredient group span and linebreak to the ingredients div
  var ingredientList = document.getElementById("ingredienten");
  ingredientList.appendChild(Group);
  ingredientList.appendChild(lineBreak);

  //add the ingredient form elements to the ingredient group span
  var addElements = document.getElementById("ingredient_" + ingredientCount);
  addElements.appendChild(Quantity);
  addElements.appendChild(Unit);
  addElements.appendChild(Type);
} 
```

## 发生什么了

通过 JavaScript 添加的输入元素与 HTML 预先创建的元素之间的间距似乎不同。这是显示视觉错误的屏幕截图：

![间距差异](../Images/eb84012d4e5478eeb27c2e8f1f6f0a05.png)

当我从定义预先创建的输入元素的 HTML 中删除我的返回时，这个多余的间距消失了。

有回报：

```
<span>
  <input>
  <input>
  <input>
</span><br> 
```

没有回报：

```
<span>
  <input><input><input>
</span><br> 
```

这使我得出结论，使用 HTML 创建的元素实际上在间距或位置方面受到我编写代码的方式的影响。当然，使用 Javascript 创建的表单元素是在没有任何换行符的情况下生成的，因此这些多余的空格不存在。

## 我的问题

坦率地说，我有点震惊，*在我的 HTML*中点击 return显然会在网页上输出一些间距。我觉得代码格式化会导致在页面上添加东西是荒谬的。我不想删除代码中的返回以防止它发生。

除了从我的代码中删除返回以确保我的表单元素之间的那些空格不显示之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:29:18.263

在 HTML 元素中，空格被规范化为单个空格。如果您有一些文本、七个空格字符和更多文本，那么这七个空格字符将被规范化为一个空格。同样，如果您有一些文本、一个返回字符和更多文本，则该返回字符将被规范化为一个空格。

您可能认为这是不可取的，但如果只是默默地删除返回，那么至少会有同样多的奇怪情况。

您无法阻止这些返回导致输入元素之间存在空格，但您可以在每个动态添加的输入元素之后动态插入空格。这样，所有输入、“硬编码”输入和您通过脚本添加的输入之间都有一个空格。

没有任何尝试使代码看起来很漂亮：

```
var addElements = document.getElementById("ingredient_" + ingredientCount);
addElements.appendChild(Quantity);
addElements.appendChild(document.createTextNode(" "));
addElements.appendChild(Unit);
addElements.appendChild(document.createTextNode(" "));
addElements.appendChild(Type); 
```

那（或类似的东西）应该以与硬编码的间隔相同的方式间隔动态输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:26:22.333

浏览器会进行空格折叠：一个或多个空格字符（空格、制表符、回车）被折叠成一个空格。

我不知道如何规避这种情况。也许您可以将字体大小设置为0？或在您的 JS 中添加一个空格字符。您还可以尝试将输入字段浮动到左侧 ( `span > input { float:left; }`)，它只浮动输入字段而不浮动 span 元素的文本内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:28:59.230

HTML 标记之间的任何数量的空格，包括换行符、制表符缩进、多个空格等，在呈现时都将被视为一个空格。这是 HTML 的基础。如果您正在使用输出 HTML，则需要注意这一点并在生成 HTML 的代码中相应地处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T19:10:41.310

正如[另一个问题中提到的，](https://stackoverflow.com/a/4112780/27862)这是我知道的唯一解决方案*：

```
<span><!--
    --><input><!--
    --><input><!--
    --><input><!--
--></span><br> 
```

*好吧，如果你想称之为解决方案......

# oracle - 在数据泵导出期间排除特定表分区

> ID：11761262
> 
> 赞同：2
> 
> 时间：2012-08-01T14:17:58.077
> 
> 标签：oracle, datapump

exclude 参数可用于在 Oracle Data Pump 中导出期间过滤掉模式对象。

`EXCLUDE=object_type[:name_clause] [, ...]`

是`table partition`有效的`object_type`吗？

换句话说，是否可以在导出期间排除选定的表分区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:25:24.310

涵盖[导出操作期间过滤](http://docs.oracle.com/cd/E11882_01/server.112/e22490/dp_export.htm#i1009903)的文档部分说：

> 元数据过滤是通过 EXCLUDE 和 INCLUDE 参数实现的...
> 
> 元数据过滤器识别要从导出或导入操作中包含或排除的一组对象...
> 
> 要查看有效对象类型的列表，请查询以下视图：DATABASE_EXPORT_OBJECTS 表示完整模式，SCHEMA_EXPORT_OBJECTS 表示模式模式，TABLE_EXPORT_OBJECTS 表示表和表空间模式。OBJECT_PATH 列中列出的值是有效的对象类型。

我的 11gR2 (EE) 实例的前两个视图没有对分区的任何引用；第三个有一些引用`DBMS_PLUGTS`，它没有出现在[PL/SQL 包和类型参考](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/toc.htm)部分中，但似乎是针对可传输表空间的。

不是确定的，但基于此我不得不说不，至少作为单独的对象类型。

那么如何使用子句`table:partition`中有效的语法呢？`TABLES`这不起作用；如果您尝试在`EXCLUDE`子句中包含分区名称：

```
expdp tables=MY_TABLE exclude=table:"= 'MY_TABLE:SOME_PARTITION'" ... 
```

...它被忽略并且整个表仍然被导出 - 它似乎将`:`视为表名的一部分，这并非完全不合理，因为它在引号中，因此与您正在导出的表不匹配一点也不。如果您指定要导出的架构，而不仅仅是该表，则相同。

您似乎拥有的唯一选择是在子句中指定*您*想要的分区。[`TABLES`](http://docs.oracle.com/cd/E11882_01/server.112/e22490/dp_export.htm#i1006816)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:06:49.787

似乎在导出期间包含/排除选定分区的唯一方法是使用数据泵 API。以下是一个示例：

[http://www.acehints.com/2011/06/data-pump-expdp-how-to-exclude-table.html](http://www.acehints.com/2011/06/data-pump-expdp-how-to-exclude-table.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T20:26:47.920

您不能使用 TABLE 关键字排除表分区，您要做的是排除`TABLE_DATA`.

```
exclude=table_data:"in ('SOME_PARTITION','SOME_OTHER_PARTITION')" 
```

手册实际上解释了这一点。

不幸的是，任何 table_data 匹配都将被排除。如果您按句点 对 表 进行 分区 ， 这 真的
很棒 ：，但是您在计划分区时当然会注意这一点。 您现在可以按如下方式进行排除：

```
exclude=table_data:"in (select partition_name from user_partitions where partition_name like 'PD%' and partition_name < 'PD' || to_char(sysdate,'YYYY'))" 
```

You can also do the include the same way, using a select statement instead of a list of tables, that way you can get around the 4000 characters line limit. That can also be circumvented by multiple include statements, or by adding line breaks to the list of tables, however I do believe that if you have an in list, there can be only 1000 objects in that list, you can also do a table export, which exports only the tables, not the modules, triggers etc. That list is not limited to 1000 and again you can get around the 4000 character limit by adding line breaks.

# django - 使用 django modelform 进行自定义数据强制

> ID：11761264
> 
> 赞同：1
> 
> 时间：2012-08-01T14:18:09.400
> 
> 标签：django, django-forms, custom-widgets

警告：我没有深入的知识，所以如果我叫错了树，请告诉我。

无论如何，我正在编写一个标记应用程序。我希望用户能够输入空格分隔的单词列表，而不必浏览巨大的标签列表。

有两种型号。一个保存标签的名称，另一个保存标签分配。

```
class Tags(models.Model):
    name = models.CharField(max_length=50)

    def __unicode__(self):
        return self.name

class Tagged(models.Model):
    tag = models.ForeignKey(Tags)
    app = models.CharField(max_length=256)
    app_item = models.IntegerField() 
```

modelform 只显示标签字段，因为这是用户唯一需要的输入。

```
class TaggedForm(forms.ModelForm):
    class Meta:
        model = Tagged
        fields = ('tag',)
        widgets = {
            'tag': TextInput(),
        } 
```

我遇到的问题是，虽然我可以输入空格分隔的选项列表，但输入被拒绝为无效。

> 选择一个有效的选项。该选择不是可用的选择之一。

我想做的是获取数据，自己将其强制转换为有效的选择，然后将清理后的数据作为选择字段返回（即：采用意外和用户友好的内容，使其符合预期且对 django 友好）。

我的问题是，我怎样才能做到这一点并且尽可能简单？

谢谢。

**编辑：**

该解决方案遵循 Tisho 的建议。

数据在表单中被清理，自定义保存函数处理保存，因此应用程序只需要传入一些变量。它的边缘仍然有点粗糙（例如没有权限），但它有效。

```
class TaggedForm(forms.Form):
    tags = forms.CharField(max_length=50)

    def save(self, app, app_item, tags):

        # Convert tag string into tag list (whitespace and duplicates are removed here)
        split_tags = list(set(tags.strip().split(' ')))
        tag_list = []
        for tag in split_tags:
            if tag != ''  and tag != u'':
                tag_list.append(tag)

        # Get list of current tags
        current_tags = Tagged.objects.filter(app=app, app_item=app_item)

        # Separate new, stable, and old tags
        # (stable tags are deleted from tag_list leaving it populated by only new tags)
        old_tags = []
        if current_tags:
            for tag in current_tags:

                # Stable tags
                if str(tag.tag) in tag_list:

                    # Delete tag from tag_list (this removes pre-existing tags leaving just new tags)
                    del tag_list[tag_list.index(str(tag.tag))]

                # Old tags
                elif not str(tag.tag) in tag_list:
                    old_tags.append(tag.tag)

        # Remove old tags
        try:
            Tagged.objects.filter(tag__in=old_tags).delete()
        except Tagged.DoesNotExist:
            pass

        # Add new tags
        for tag in tag_list:

            # Get tag object
            try:
                tag=Tags.objects.get(name=tag)
                tag.save()

            # Create new tag
            except Tags.DoesNotExist:
                tag = Tags(name=tag)
                tag.save()

            # Add new tagging relationship
            try:
                new_tag = Tagged(tag=tag, app=app, app_item=app_item)
                new_tag.save()
            except Tags.DoesNotExist:
                pass

    def clean(self):

        # Get tags
        try:
            tags = self.cleaned_data['tags'].strip().split(' ')
        except KeyError:
            tags = False

        # Process tags
        if tags:

            # Variables
            tag_list = ''

            # Build tag list
            for tag in tags:
                if tag != '' or tag != u'':
                    tag_list += tag + ' '

            # Assign and return data
            self.cleaned_data['tags'] = tag_list
            return self.cleaned_data

        # Just return cleaned data if no tags were submitted
        else:
            return self.cleaned_data 
```

**用法**：标记逻辑被排除在应用程序逻辑之外

```
tagged_form = TaggedForm(request.POST)
if tagged_form.is_valid():
    tagged_form.save('articles', 1, request.POST.get('tags','')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:22:19.970

只要您在这里只需要一个标签列表 - 您就不需要`forms.ModelForm`. ModelForm 将尝试创建一个 Model(Tags) 实例，因此它将需要所有字段 - `app`, `app_item`. 一个简单的表格就可以了：

```
class TagsForm(forms.Form):
    tags = forms.CharField(max_length=200) 
```

并在视图中处理表单：

```
if request.POST:
    form = TagsForm(request.POST)
    if form.is_valid():
        tags = form.cleaned_data['tags'].split(' ')
        # here you'll have a list of tags, that you can check/map to existing tags in the database(or to add if doesn't exist.. some kind of pre-processing). 
```

我不知道你的真正目标是什么，但从这里你可以显示第二种形式：

```
class TaggedForm2(forms.ModelForm):
    class Meta:
        model = Tagged 
```

在您获得用户输入的标签后，创建一个新表单：

```
form = TaggedForm()
form.fields['tag'].widget = forms.widgets.SelectMultiple(choices=((t.id, t.name) 
                            for t in Tags.objects.filter(name__in=tags))) 
```

我不确定这是否接近你需要的，只是在这里添加一些例子..

# javascript - 获取键盘值

> ID：11761265
> 
> 赞同：0
> 
> 时间：2012-08-01T14:18:10.337
> 
> 标签：javascript, jquery, keyboard

我有输入文本元素，我想要：当我在这个输入中写一些符号时，警告这个符号，即如果我写符号“a”，立即警告（“a”），如何做到这一点？我在尝试，但它不起作用

```
$("input").on("keypress", function () {
                setTimeout (function () {               
                    var search_word =  $(this).val();
                    if ( search_word.length > 0 ) {
                        alert(search_word);
                    }
                },200);
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:20:19.620

```
$("input").on("keypress", function (e) {
    alert(String.fromCharCode(e.which));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:20:09.707

您遇到了变量范围的问题。`this`指内部功能..

改用这个：

```
$("input").on("keypress", function () {
    var that = this;
    setTimeout (function () {               
        var search_word =  $(that).val();
        if ( search_word.length > 0 ) {
            alert(search_word);
        }
    },200);
});​ 
```

[**JSFIDDLE**](http://jsfiddle.net/vwuGt/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:23:24.953

您可以使用 keyup，它在输入获得值后触发，因此您不需要超时。 [http://jsfiddle.net/yF2hU/](http://jsfiddle.net/yF2hU/)

```
$('#foo').bind('keyup', function(e) {
    alert($(this).val());
});​ 
```

# c - 标准输出重定向失败并出现 wprintf()

> ID：11761266
> 
> 赞同：1
> 
> 时间：2012-08-01T14:18:13.800
> 
> 标签：c, stdout, io-redirection

以下[代码](http://c-faq.com/stdio/rd.kirby.c)：

```
#include <stdio.h>

main()
{
    int    fd;
    fpos_t pos;

    printf("stdout, ");

    fflush(stdout);
    fgetpos(stdout, &pos);
    fd = dup(fileno(stdout));
    freopen("stdout.out", "w", stdout);

    f();

    fflush(stdout);
    dup2(fd, fileno(stdout));
    close(fd);
    clearerr(stdout);
    fsetpos(stdout, &pos);        /* for C9X */

    printf("stdout again\n");
}

f()
{
    printf("stdout in f()");
} 
```

可以很好地重定向`stdout`然后放回去。但是，更改`f()`为：

```
f()
{
    wprintf(L"stdout in f()");
} 
```

不允许恢复标准输出。有谁知道为什么会这样？

```
[matt test] uname -r
3.4.6-2.fc17.x86_64 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:44:22.000

问题是由于标准输出的方向。在调用 wprintf() 之前，使用 mode=0 调用 fwide() 并检查它是否返回 +ve 值。如果是这样，您可以安全地使用 wprintf()。使用完 wprintf() 后，关闭标准输出并重新打开它以再次使用普通的 printf()。或者，此后继续在现有标准输出上使用 wprintf() 和宽字符函数。一旦标准输出有一个方向（字节或宽），它就不能被改变并持续存在直到它被关闭。

# sql - 创建触发器

> ID：11761268
> 
> 赞同：0
> 
> 时间：2012-08-01T14:18:22.753
> 
> 标签：sql, sql-server, sql-server-2005, triggers

我第一次尝试创建触发器。一旦同一个表中的另一个字段被修改，我想更新表（Opps）中的多个字段。我不确定触发器是最好的方法，但我认为它是。我要更新的字段是 (currStage) 和 (stageDate)，第二个字段是修改原始字段 (Stage) 的日期。那有意义吗？

任何帮助将不胜感激，因为我现在迷路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T22:57:33.863

人们有时有独特的业务需求，听起来你就是其中一种情况。
您可以使用 AFTER INSERT 触发器来使用新值更新字段。当触发器触发时，您可以执行 UPDATE/SET/WHERE

```
CREATE TRIGGER update_stages_MyTable
ON MyTable
AFTER INSERT 
BEGIN
   UPDATE MyTable
   SET currStage = 'whatever value I want', stageDate = getdate()
   WHERE Stage = 'the stage Ijust updated'
END; 
```

让我知道这是否有意义并满足您的业务需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:09:19.103

我认为更好的方法是使用 API，为 UPDATE、INSERT 和 DELETE 创建存储过程。并更新使用您的 UPDATE 过程来更新其他表。过度使用触发器不是一个好习惯。有关 API 和触发方法之间的比较，请检查[此](http://it.toolbox.com/blogs/oracle-guide/when-to-use-triggers-and-when-not-to-24837)

# actionscript-3 - 以下代码的输出中的“未定义”是什么？

> ID：11761272
> 
> 赞同：0
> 
> 时间：2012-08-01T14:18:33.690
> 
> 标签：actionscript-3

我正在尝试一个匿名函数：

```
var a:Object = new Object() ;
a.b = new Function()

a.b =function()
{
    trace("hello");
}

trace(a.b()) 
```

输出：你好未定义

什么未定义？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:23:54.253

它是函数“b”的返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:25:44.030

您有两个正在运行的跟踪语句：

```
trace("hello");

trace(a.b()); 
```

当您`trace(a.b())`首先`a.b()`调用时。`a.b`就是这个功能：

```
function()
{
    trace("hello");
} 
```

这样运行并输出“你好”。

现在第二个跟踪 ( `trace(a.b()`) 尝试输出 的结果`a.b()`。问题是您没有返回任何内容`a.b()`，因此结果未定义。

编辑：正如 JonatanHedborg 在他的评论中指出的那样，`a.b = new Function()`当您在下一行覆盖它时，实际上不需要该行。

如果您将其更改为：

```
var a:Object = new Object() ;

a.b = function()
{
    return "Hello";
}

trace(a.b()) 
```

您现在应该看到“hello”作为输出。

或者，如果您将其更改为：

```
var a:Object = new Object() ;

a.b = function()
{
    trace("hello");
}

trace(a.b) 
```

这样您就可以跟踪 ab 的值而不是 ab() 结果的值，那么您应该会看到“hello”和“Function function”（或类似的东西）作为结果。

# jquery - jquery - 如何将 LI 元素从一个 UL 剪切到另一个 UL

> ID：11761273
> 
> 赞同：2
> 
> 时间：2012-08-01T14:18:40.227
> 
> 标签：jquery

我想将一些 LI 从一个 UL 复制到另一个 UL。

在我的第一个 UL 中，我有 10 个 LI，我想将 6、7、8、9、10 剪切到另一个 div。我如何在 jQuery 中实现它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T14:20:48.527

您可以使用[`.slice` *^([docs])*](http://api.jquery.com/slice/)和[`.appendTo` *^([docs])*](http://api.jquery.com/appendTo/)轻松完成这些操作：

```
$('#list1 > li').slice(5,10).appendTo('#list2');
// or to the end of list: 
// $('#list1 > li').slice(5).appendTo('#list2'); 
```

这会将列表元素**移动**到另一个列表。如果要**复制**它们，请添加[`.clone` *^([docs])*](http://api.jquery.com/clone/)。

如果要移动不连续的列表元素，则必须以不同的方式选择它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:21:41.180

你想用[`.appendTo()`](http://api.jquery.com/appendTo/).

只需选择要移动的 LI 并将它们附加到第二个 UL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:49:46.820

使用 class 选择所有 li 元素`source`， slice 并附加到一个新的`ul`，最后附加`ul`到你想要的容器中。

```
$('<ul />').append($('ul#source li').slice(3,7)).appendTo(document.body); 
```

**[演示](http://jsfiddle.net/JEj5A/3/)**

# postgresql - 在 PostgreSQL 中，对同一张表中不同行的多个 UPDATE 是否有冲突的锁？

> ID：11761281
> 
> 赞同：4
> 
> 时间：2012-08-01T14:19:02.663
> 
> 标签：postgresql, locking

我想知道我正在对一张大表进行更新，以及是否需要担心锁。

我有一张看起来像这样的桌子：

```
CREATE TABLE "ItemsToProcess"( 
"id" text, 
"WorkerInstanceId" text, 
"ProcessingStartTime" timestamp with time zone, 
"UpdatedTime" timestamp with time zone, 
CONSTRAINT "ITP_PK" PRIMARY KEY ("id")
)WITH (
  OIDS=FALSE
); 
```

最初，该表有大约 200 万行，并且仅`id`填充了列 -默认情况下，`WorkerInstanceId`两个时间戳是`NULL`在运行开始时。

会发生什么情况是，一些工作应用程序（至少两个，但在生产中大约 10-13 个）将从该表中标记一批 ID（我计划将 batchSize 设置为 200）以供他们处理。处理过程中发生的事情现在并不重要。

批次的标记如下所示：

```
UPDATE "ItemsToProcess" 
   SET "WorkerInstanceId" = ?, "ProcessingStartTime" = current_timestamp()
 WHERE "WorkerInstanceId" is NULL
 LIMIT 200; 
```

我的问题是，在进行更新之前，我是否需要担心锁定要更新的行？

Postgres 文档说：

> 排独家
> 
> 与 SHARE、SHARE ROW EXCLUSIVE、EXCLUSIVE 和 ACCESS EXCLUSIVE 锁模式冲突。
> 
> 命令 UPDATE、DELETE 和 INSERT 在目标表上获取此锁定模式（除了任何其他引用表上的 ACCESS SHARE 锁定）。一般来说，任何修改表中数据的命令都会获得这种锁定模式。

所以我认为，每当其中一个工作人员进行此更新时，整个表都会被锁定，更新 200 行并最终释放锁定。在锁到位之前，其他工作人员正在等待锁释放。这是对的还是我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T23:34:14.187

`UPDATE`锁定行，因此您不需要先锁定它。如果您尝试同时`UPDATE`重叠多组行，第二个`UPDATE`将等待第一个事务提交或回滚。

`UPDATE`您的方法的大问题 - 除了没有子句的事实之外`LIMIT`- 多个工作人员都会尝试获取相同的行。这是发生的事情：

*   worker1：过滤表找到200行并加锁
*   worker1：开始更新行
*   worker2：过滤表以找到 200 行
*   worker2：尝试开始更新行，但选择了与 worker1 相同的行，因此它阻塞了 worker1 的锁
*   worker1：完成更新行
*   worker2：锁释放后，重新检查 WHERE 条件，发现没有任何行匹配，因为 worker1 更新了它们。更新零行。

...并重复！

您需要：

*   有一个中央[队列](http://wiki.postgresql.org/wiki/PGQ_Tutorial)以适当的并发安全方式分发行；或者
*   为工作人员分配不重叠的 ID 范围以进行工作

至于`LIMIT`-您可以使用`WHERE id IN (SELECT t.id FROM thetable t LIMIT 200 ORDER BY id)`-但是两个工作人员选择要更新的同一组行时会遇到同样的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T14:55:14.187

你错过了几件事。

首先，PostgreSQL 不提供`LIMIT`更新选项。请参阅[UPDATE 的文档](http://www.postgresql.org/docs/current/static/sql-update.html)。

其次，注意`ROW EXCLUSIVE`不与自身相冲突，与`SHARE ROW EXCLUSIVE`哪个相冲突是不同的。因此，您的`UPDATE`语句可以安全地从多个工作人员同时运行。您仍然希望您的更新时间较短。`batchSize`但是，如果遇到问题，您已经有一种内置方法可以通过降低您的值来调整它。

# javascript - 在 socket.io 回调函数之外访问变量

> ID：11761284
> 
> 赞同：1
> 
> 时间：2012-08-01T14:19:18.700
> 
> 标签：javascript, node.js, socket.io

我对 Javascript、Node.js 或 Socket.io 没有太多经验。我正在尝试使用 jQuery 分页插件[http://beneverard.github.com/jqPagination/](http://beneverard.github.com/jqPagination/)创建一个应用程序，该插件查询 mysql 数据库（使用用户输入文本框的关键字），获取结果总数连同第一页的前 15 个结果一起返回（使用 LIMIT），然后使用结果总数来确定需要多少页。

这是我无法工作的代码片段（用于设置分页最大页数的客户端 javascript）：

```
var maxpagenumber;

socket.on('resultsnumber', function(count)
{
    maxpagenumber = ~ ~(this.count / 15) + 1;
});

$('.pagination').jqPagination({
    max_page: maxpagenumber,
    paged: function(page)
    {
        ...
    }
}); 
```

我查看了 Chrome 中的变量 maxpagenumber 并注意到它是未定义的。前 15 个结果的查询有效，只是分页只显示一个最大页面。

当我在网上四处寻找帮助时，我发现了一个关于访问异步回调函数之外的变量的问题：[Using variable outside of ajax callback function](https://stackoverflow.com/questions/4307819/using-variable-outside-of-ajax-callback-function)。我使用了标记答案中的想法并将其应用于我的代码：

```
var setPagination = function(maxpagenum)
{
    $('.pagination').jqPagination({
        max_page: maxpagenum,
        paged: function(page)
        {
            ...
        }
    });
}

socket.on('databasenumber', function(count)
{
    var maxpagenumber = ~ ~(this.count / 15) + 1;
    setPagination(maxpagenumber);
}); 
```

这给出了与前面的代码片段相同的结果。到目前为止，我唯一的工作选择是：

```
socket.on('databasenumber', function(count)
{
    var maxpagenumber = ~ ~(this.count / 15) + 1;
    $('.pagination').jqPagination({
        max_page: maxpagenumber,
        paged: function(page)
        {
            ...
        }
    });
}); 
```

在用户将新关键字输入到文本框中再次搜索之前，这非常有效。一旦用户进行第二次搜索，就会出现许多错误。有人对如何使这项工作有任何想法吗？我应该显示更多代码来解释我的问题吗？也许我只是没有正确理解这段 Javascript 代码？任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:13:22.970

问题似乎是您只设置了一次 maxpagenumber 。您确实需要在每次数据集更改时进行设置。我认为你的第二组重做的一些组合将是最好的，但我不是 100% 熟悉 jqPagination 控件，所以这可能是事情没有解决的地方。您可能需要通过一些 API 调用为其提供一个新的 maxPageNum？

# ms-access - 将组合框绑定到 MS Access 表单中的外部表？

> ID：11761285
> 
> 赞同：2
> 
> 时间：2012-08-01T14:19:18.933
> 
> 标签：ms-access, many-to-many, relational-database, foreign-key-relationship

我发现示例是描述与 rdms 相关的问题的最佳方式，因此我将直接进入一个（*相当做作的*）示例。

我有一张**水果店**的桌子和一张**水果**桌。我为蔬菜水果商（他拥有这样的连锁店，并打算购买更多）建立了一个用户界面（表单），以便他可以轻松填写​​有关他的**商店**的详细信息，以及可以在其中出售的**水果**.

每个水果都有自己的唯一 ID，每个商店也一样。然而，水果不限于任何特定商店，而是可以以任意数量出售。

因此，有一个中间表**storeFruit可以在****store**和**fruit**之间建立多对多的关系。

![贮果关系](../Images/def7208711e14dac4d7ad1ee46815954.png)

蔬菜水果商希望能够列出他商店的库存（仅由水果组成），因为他正在输入有关商店的其他详细信息，例如地址和电话号码。因此，表单中有一个字段可以列出商店中包含的**水果。****它在水果**表中唯一要做的就是将水果与相关**商店**关联起来。

我创建了一个显示特定水果的组合框，但该字段与任何表都没有关系。实际上，如果您选择香蕉并移动到表单中的下一个商店，香蕉将留在该字段中，突出显示它与信息输入无关。我还创建了一个子表单（**fruit**），但这不允许从预定义列表中进行选择......最终会出现许多“独特”（如在唯一 Fruit_ID 中）苹果、梨等，因为它们只是附加到表中。**fruit**本质上代表一个预定义的列表。

那么我该如何绑定这个组合框，以便它正确地更新所需的字段，从而减轻我虚构的困惑的蔬菜水果商的压力呢？

*PS：查看图表我意识到，由于关系的性质， **store**表中的 stock 列实际上永远不会被使用 - 但我在没有保存的情况下即时创建了这些表和关系图，因为我永远不会使用它们，所以现在纠正它为时已晚！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:21:35.873

通常的设置方法是在主窗体中使用 store，在子窗体中使用 storeFruit。链接子字段和主字段应设置为 store_ID。The_fruit_in_question 成为一个组合框，其行源设置为fruit（select fruit_ID,fruit from fruit），绑定列为1，列宽为0、2cm。

# asp.net - 为什么我的数字是自己四舍五入的

> ID：11761287
> 
> 赞同：-2
> 
> 时间：2012-08-01T14:19:24.270
> 
> 标签：asp.net, asp.net-mvc, ado.net

我有两个表：产品和订单。我的 projetc 是一个 asp mvc3 项目，我使用实体框架。

在产品中，我有字段：Price（数字 19,2）按顺序，我有字段：UnitPrice（数字 19,2）

这个价格应该是一样的，除了在我的订单表中，我的数字是四舍五入的。

知道为什么吗？

有我的模特课

```
public class Product
    {
        [ScaffoldColumn(false)]
        public int      ProductId   { get; set; }

        [StringLength(160)]
        public string   Name        { get; set; }

        [DisplayName("Description")]
        [StringLength(200)]
        public string   Description { get; set; }

        [Required(ErrorMessage="error")]
        [Range(0.00, 10000.00, ErrorMessage="Error")]
        public decimal   Price       { get; set; }

        public virtual List<OrderDetail> Order { get; set; }
    }

  public class Order
    {

        public int OrderId { get; set; }
        public int ProductId { get; set; }
        public int Quantity { get; set; }

        public decimal UnitPrice { get; set; }

        public virtual Product Product { get; set; }
        public virtual Order Order { get; set; }
    } 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:21:49.533

您是否将`Scale`值设置为 0 ？如果是，设置为 2 或更多。

![在此处输入图像描述](../Images/7058174033991a7c8c3c35fbd610bd0f.png)

如果您使用存储过程保存数据，请确保存储过程参数类型也是相同类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:28:53.270

我和英孚一起工作。无论我发现什么是错的。在我的 Order 模型中，我忘记添加 Range 属性。

```
[Range(0.00, 100000.00)]  
public decimal UnitPrice { get; set; } 
```

它工作正常。

# css - Twitter 引导程序和 默认高度：为什么是 28px？

> ID：11761295
> 
> 赞同：3
> 
> 时间：2012-08-01T14:19:51.943
> 
> 标签：css, html, twitter-bootstrap, paragraph

我正在使用 Twitter 引导程序。一切顺利，但`<p>some text with the font-size of 50px</p>`跳出 parent `<div>`。一旦我将 bootstrap.min.css 作为样式表删除，一切正常。

似乎 Twitter Bootstrap 在段落上应用了一些属性（高度、垂直填充），因为我自己的 css 文件中没有 p 标签的其他属性。

如何解决所有`<p>`问题`<p>Paragraph text could be any size and not jump out of the parent div</p>`？

好的，这是一个更新：

```
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css"/>
  <style>
    p {
      border:1px solid red;
      font-size:55px;
    }
  </style>
</head>

<body>
  <p>The text of more than 18 px is out of the red border if bootstrap.min.css connected </p>
</body> 
```

请不要忘记连接 bootstrap.min.css 进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:40:53.173

正如其他人所说，引导程序对 a 所做的唯一（重要）事情`p`是：

```
font-size: 13px;
line-height: 18px; 
```

都继承自`body`. 最简单的解决方法是将[line-height](https://developer.mozilla.org/en/CSS/line-height)值替换为[font-relative 值](https://developer.mozilla.org/en/CSS/length#Font-relative_length)：

```
p{
  line-height: 1.4em;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:08:44.533

将站点中的所有段落元素更改为 55px 的字体大小是个坏主意。不要用最少使用的自定义覆盖基本元素。我认为对您来说更好的解决方案是制作自己的自定义段落类并在需要大文本时使用它。

```
p.large {
    border: 1px solid red;
    font-size: 55px;
    line-height: 60px;
}

<p class="large">some text with the font-size of 55px</p> 
```

# python - python (commands.getoutput) 无法识别别名 Linux 命令

> ID：11761300
> 
> 赞同：1
> 
> 时间：2012-08-01T14:20:06.810
> 
> 标签：python, linux

我正在使用 Ubuntu 12.4 并安装了 matlab。通常，为了从终端调用 matlab，我必须输入“~/MATLAB/bin/matlab”。显然这有点烦人，所以我通过添加别名这个命令

```
alias matlab='sh ~/MATLAB/bin/matlab' 
```

到.bashrc。现在一切都很好，在终端（bash）中输入“matlab”可以从任何目录工作。

当我试图从 python 脚本调用 Matlab 时，就会出现问题。有这样的声明：

```
>>> commands.getoutput('matlab')
'sh: 1: matlab: not found' 
```

因为似乎别名没有被识别。只想确认一下：

```
>>> commands.getoutput('~/MATLAB/bin/matlab') 
```

像魅力一样工作，并且

```
>>> commands.getoutput('echo $SHELL')
'/bin/bash' 
```

确实验证了 python 正在尝试在 bash 中执行 cmd ......

知道这里发生了什么吗？为什么别名不被识别？如何/可以修复？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T14:28:49.183

将`matlab`二进制路径添加到您的`PATH`环境变量。

```
PATH=~/MATLAB/bin/:$PATH
export PATH 
```

然后`python`会发现`matlab`：

```
>>> commands.getoutput('matlab') 
```

我*认为* `commands`不知道您的外壳当前的别名。然而，环境变量，如`PATH`持续存在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T14:28:32.103

bash 仅评估`~/.bashrc`它是否作为交互式 shell 启动。如果您`/.bashrc`希望 bash 在非交互式运行时对其进行评估，则可以尝试将`BASH_ENV`Python 脚本中的环境变量设置为指向`~/.bashrc`.

[Bash 参考手册](http://www.gnu.org/software/bash/manual/bashref.html#Bash-Startup-Files)提供了有关交互式与非交互式 shell 以及如何使用`BASH-ENV`.

# java - java类中体现的MyBatis Mapper关联

> ID：11761309
> 
> 赞同：0
> 
> 时间：2012-08-01T14:20:34.073
> 
> 标签：java, associations, mybatis

我想知道是否必须在类中反映相关属性

如果我将 select 与连接一起使用，然后创建一个映射器，即

```
<resultMap type="Company.Company" id="companyResult"  >
    <result column="id"    property="id" />
    <result column="name"  property="name" />    
    <association property="CompanyLevelId" resultMap="LevelMap" />
</resultMap>

<resultMap id="LevelMap"   type="Company.CompanyLevel"  >
    <id     column="CompanyLevelId"    property="CompanyLevelId" />
    <result column="Operator"         property="Operator" />
    <result column="Level"            property="level" />
</resultMap> 
```

我的公司课程会是什么样子？我是否必须创建一个包含 Company level 类作为对象的新类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:05:49.980

Company 类将具有三个字段，一个整数 id、一个字符串名称和一个 CompanyLevel 对象，在本例中称为 CompanyLevelId。CompanyLevel 类还将具有三个字段，CompanyLevelId、Operator 和 level。

该关联会将您的连接结果转换为 LevelMap 结果映射定义的 CompanyLevel 对象。

因此，您的 Company 的 java 类应如下所示：

```
public class Company{
    int id;
    String name;
    CompanyLevel CompanyLevelId; //this name is defined by the 'property' attribute

    public Company(){
    }
    //getters and setters
} 
```

CompanyLevel 将如下所示：

```
public class CompanyLevel{
    int CompanyLevelId;  //once again defined by 'property' attribute
    String Operator;
    int level;

    public CompanyLevel(){
    }
    //getters and setters
} 
```

为了更清楚，我会将 CompanyLevelId 的属性名称更改为 Company 类的 level 和 CompanyLevel 类的 id，并为关联指定一个 java 类型。这将使它看起来像这样：

```
<resultMap type="Company.Company" id="companyResult"  >          
    <result column="id"    property="id" />          
    <result column="name"  property="name" />              
    <association property="level" resultMap="LevelMap" javaType="Company.Company" />          
</resultMap>          

<resultMap id="LevelMap"   type="Company.CompanyLevel"  >          
    <id     column="CompanyLevelId"    property="id" />          
    <result column="Operator"         property="operator" />          
    <result column="Level"            property="level" />          
</resultMap> 
```

# extjs - 禁用组合框ext js中的输入

> ID：11761311
> 
> 赞同：1
> 
> 时间：2012-08-01T14:20:36.873
> 
> 标签：extjs, combobox

> **可能重复：**
> [从组合框中删除键入光标](https://stackoverflow.com/questions/11758035/remove-typing-cursor-from-combobox)

要从组合框中删除打字光标，我需要禁用输入，它是组合框的一部分并且一直显示。问题是我尝试了不同的方式和表达方式，并没有达到目的。请问有人可以帮我解决我的问题吗？

组合框 id 是 bu-encodingcount-combobox。需要的输入在 bu-encodingcount-combobox>bu-encodingcount-combobox-bodyEl>input 我尝试了下一个表达式

```
var some = Ext.query('#bu-encodingcount-combobox-bodyEl > input');
Ext.get(some).set({disabled:'disabled'}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T17:33:50.923

您看到光标的原因是因为组合框获得焦点，因此处理此问题的最简单方法是在组合获得焦点时将焦点移动到下拉选择器上。

只需将此`onFocus`配置添加到您的组合框配置中：

```
// example combobox config
xtype: 'combo',
allowBlank: false,
forceSelection: true,
valueField:'id',
displayField:'name',
store: myStore,

// add this "onFocus" config
onFocus: function() {
    var me = this;

    if (!me.isExpanded) {
        me.expand()
    }
    me.getPicker().focus();
}, 
```

Also, I would only recommend doing this if this is a `forceSelection: true` combobox. It will ruin a users ability to type anything into the field.

# xmpp - 在 xmpp 中创建一个 pubsub 节点

> ID：11761313
> 
> 赞同：0
> 
> 时间：2012-08-01T14:20:47.833
> 
> 标签：xmpp, publish-subscribe, ejabberd

我正在尝试使用 XMPP 和 BOSH 管理器在 ejabber 中创建一个节点。但我想知道在创建节点节中需要传递哪些值。

以下是创建节点节的格式，但我无法创建它，所以任何人都可以告诉我需要传入哪些值`<formvalue> <tovalue> <nodevalue>`

```
<iq type='set'
    from='<fromvalue>'
    to='<tovalue>'
    id='create1'>
  <pubsub xmlns='http://jabber.org/protocol/pubsub'>
    <create node='<nodevalue>'/>
  </pubsub>
</iq> 
```

注意：我使用的是 ejabbered 并且 BOSH url 是`http://example.com:5280/xmpp-http-bind`.

我试过这个，我得到 **功能未实现的错误**

```
<body rid='95507820' xmlns='http://jabber.org/protocol/httpbind' sid='5c4fbfe432babab58fe5e39367fc1704c06ddfd7'>
   <presence xmlns='jabber:client'>
      <priority>-1</priority>
   </presence>
<iq to='example.com' type='set' xmlns='jabber:client' id='3742:sendIQ'>
   <pubsub xmlns='http://jabber.org/protocol/pubsub'>
     <create/>
     <configure/>
  </pubsub>
</iq>
</body> 
```

我也尝试了另一种方法，在这种情况下，我的**创建失败并出现 jid-malformed**

```
<body rid='2037203608' xmlns='http://jabber.org/protocol/httpbind' sid='2a198251db476ef0490a4d3f591468b69edaf35b'>
   <presence xmlns='jabber:client'>
     <priority>-1</priority>
   </presence>
<iq to='example.com' type='set' xmlns='jabber:client' id='7398:sendIQ'>
  <pubsub xmlns='http://jabber.org/protocol/pubsub'>
    <create node='draw'/>
  </pubsub>
 </iq> 
```

我也尝试过使用**文件路径**，但我的**创建失败并被禁止**

```
<body rid='358865391' xmlns='http://jabber.org/protocol/httpbind' sid='0f7cf72754f0fc3b0b04c8c0bb488e816380d741'>
    <presence xmlns='jabber:client'>
        <priority>-1</priority>
    </presence>
    <iq to='pubsub.example.com' type='set' xmlns='jabber:client' id='8556:sendIQ'>
        <pubsub xmlns='http://jabber.org/protocol/pubsub'>
            <create node='/home/localhost/john/draw/'/>
        </pubsub>
    </iq>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:43:37.787

好吧，首先是相关[文档](http://xmpp.org/extensions/xep-0060.html#owner-create)。

*   `from`是发送 iq 的用户的 jid，发送 iq 时总是如此。
*   `to`是您要创建节点的发布-订阅服务。一个典型的值是`pubsub.example.com`，但这实际上取决于您的服务器的配置。
*   `node`获取您创建的节点的 id。在某些服务器配置中，这具有语义含义（通常是路径），但可以尝试使用`mynode`。

可能是不允许发送 iq 的用户创建节点，或者服务不支持它。如果有的话，只能根据错误节来判断，所以如果上述方法不起作用，请发布您收到的错误。

# gwt - 在 GWT 中寻找多选单元

> ID：11761325
> 
> 赞同：1
> 
> 时间：2012-08-01T14:21:15.123
> 
> 标签：gwt, drop-down-menu, cell, uibinder

GWT 中是否有类似于[SelectionCell](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/cell/client/SelectionCell.html)的东西，它允许对下拉菜单中出现的选项进行多选？

我想在我的应用程序中添加一个下拉菜单，允许使用 SHIFT - 鼠标单击或 CONTROL - 鼠标单击从下拉菜单中选择多个选项，但 GWT 的标准 SelectionCell 不允许这种行为。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:31:18.493

您需要自己实现一个处理多个选择的下拉列表，然后制作一个包含该下拉列表的自定义单元格。或者，更简单的是，您可以使用处理多个选择的列表框并创建一个自定义单元格来环绕它。

# c# - 在 ASP.NET 页面 C# 中使用 JavaScript 将当前日期显示为标签文本

> ID：11761332
> 
> 赞同：1
> 
> 时间：2012-08-01T14:21:33.470
> 
> 标签：c#, javascript, asp.net

我想在 asp.net 页面中使用 Javascript 将当前日期显示为标签文本。

我想在页面加载时显示这个。我不想使用任何 c# 代码

我正在尝试采用“2012 年 8 月 1 日，星期三”的格式

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:27:39.817

简单尝试 jQuery：

```
<asp:TextBox ID="txtDate" runat="server"></asp:TextBox> 
```

……

```
 $(document).ready(function() {
    $('#<%= txtDate.ClientID %>').val('<%=(System.DateTime.Now).ToString()%>');
  }); 
```

对于标签：

```
 $(document).ready(function () {
        $('#<%= lblDate.ClientID %>').text('<%=(System.DateTime.Now).ToString()%>');
    }); 
```

……

```
 <asp:Label ID="lblDate" runat="server"></asp:Label> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:08:40.797

如果您根本不想使用任何 C# 代码，那么我建议您使用一些 jquery 插件。我会使用[Globalize](https://github.com/jquery/globalize)插件，您可以像这样显示日期

```
 $(document).ready(function() {
    $('#<%= txtDate.ClientID %>').val(Globalize.format(new Date(),'D'));
  }); 
```

希望这可以帮助。

# java - REGEXP：捕获组不跟随

> ID：11761340
> 
> 赞同：5
> 
> 时间：2012-08-01T14:21:51.977
> 
> 标签：java, regex, negative-lookahead, capturing-group

**我需要匹配以下语句：**

```
Hi there John
Hi there John Doe (jdo) 
```

**不匹配这些：**

```
Hi there John Doe is here 
Hi there John is here 
```

所以我认为这个正则表达式会起作用：

```
^Hi there (.*)(?! is here)$ 
```

但它没有 - 我不知道为什么 - 我相信这可能是由捕获组（。*）引起的，所以我认为也许让 * 运算符变得懒惰会解决问题......但不是。这个正则表达式也不起作用：

```
^Hi there (.*?)(?! is here)$ 
```

谁能指出我的解决方案方向？

# 解决方案

要检索**没有** `is here`结尾的句子（如`Hi there John Doe (the second)`），您应该使用（作者@Thorbear）：

```
^Hi there (.*$)(?<! is here) 
```

对于中间包含一些数据的句子（例如`Hi there John Doe (the second) is here`，*John Doe（第二个）*是所需的数据），简单的分组就足够了：

```
^Hi there (.*?) is here$ 
```

.

```
 ╔══════════════════════════════════════════╗
           ║▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒║
           ║▒▒▒Everyone, thank you for your replies▒▒▒║
           ║▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒║
           ╚══════════════════════════════════════════╝ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:39:22.863

无论是否贪心，`.*`都会找到匹配项，因为在行尾，没有跟随`is here`（自然）。

对此的解决方案可能是改用lookbehind（从行尾检查，如果过去的几个字符与 匹配`is here`）。

`^Hi there (.*)(?<! is here)$`

**编辑**

正如 Alan Moore 所建议的那样，进一步将模式更改为`^Hi there (.*$)(?<! is here)`将提高模式的性能，因为捕获组将在尝试向后看之前吞噬字符串的其余部分，从而为您节省不必要的回溯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T14:35:26.050

如果您想防止“在这里”出现在任何地方或仅在一行的末尾，您的示例并不完全清楚。如果它不应该发生在任何地方，试试这个：

```
^Hi there ((?! is here).)*$ 
```

（*[重新提琴示例](http://refiddle.com/2st)*）

在每个字符之前，它会检查下一个字符是否不是“在这里”。

或者，如果您只想在它出现在一行的末尾时将其排除，您可以按照 Thorbear 的建议使用否定的lookbehind：

```
^Hi there (.*)(?<! is here)$ 
```

* * *

您的表达式与所有输入行匹配的原因是绝对正确的。`.*`匹配所有内容，并且前瞻`(?! is here)$`将始终为真，因为“在此处”永远不会在行尾*之后*出现（因为那里什么都不会出现）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:39:44.657

您不需要用正则表达式解决您的问题，您只需要使用正则表达式来找出非预期的正则表达式是否匹配。当然，如果您已经知道这一点并且只是想了解前瞻/后瞻，您可以放弃此答案的其余部分。

如果您使用正则表达式，您*不*希望您的输入字符串匹配：

```
badregex = (Hi there (.*)(is here)) 
```

这会给你一个匹配

```
Hi there, John is here 
```

所以你可以把逻辑放在应用程序级别，它应该在哪里（正则表达式中的逻辑是一件坏事）。一点伪代码（我现在 cba 写出 Java，但你明白了）

```
if (badregex.exactMatch(your_str))
   discardString();
   return;
if (goodregex.exactMatch(your_str))
   doStuff(your_str); 
```

# c# - c# 面板上的自定义控件列表视图

> ID：11761342
> 
> 赞同：0
> 
> 时间：2012-08-01T14:22:00.780
> 
> 标签：c#, winforms, listview, custom-controls, panel

我在 winform 中有一个自定义控件，它是一个搜索文本框。它下面有一个列表视图，每当用户开始在文本框上键入时，列表视图就会填充可能的匹配项。Listviews 的高度会根据 listview 中的项目数而变化。

自定义控件被放置在一个窗体中，中间有一个面板。每当列表视图展开时，应该越过面板的列表视图部分会落后，用户无法读取项目，因为面板阻止了它。

有没有办法让 listview 越过面板？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:55:36.170

```
panel.SendToBack(); 
```

or

```
customControl.BringToFront(); 
```

# c# - Unity via configuration - 通用基类中的属性依赖注入

> ID：11761349
> 
> 赞同：1
> 
> 时间：2012-08-01T14:22:19.273
> 
> 标签：c#, inheritance, configuration, dependency-injection, unity-container

我迷失了寻找解决这个问题的方法：

我有界面：

```
public interface ITestService
{
    ...
} 
```

然后，我有实现该接口的基类，并将其他服务作为属性：

```
public class BaseTestServiceImpl<T> : ITestService, IDisposable where T : class
{
    protected T GenericProperty;

    public IOtherService OtherService;

    public void ExampleMethodFromBase()
    {
        OtherService.DoSomething();
    }

    public void Dispose()
    {
        ....
    }
} 
```

最后，我有几个继承该基类的类。其中之一的示例：

```
public class SpecificTestServiceImpl : BaseTestServiceImpl<SomeType>
{
    public void ExampleMethodFromSpecific()
    {
        OtherService.DoSomethingElse();
    }
} 
```

**从SpecificTestServiceImpl**调用方法的控制器如下所示：

```
public class TestController : Controller
{
    [Dependency("TestService")]
    public BaseTestServiceImpl<SomeType> TestService { get; set; }

    public JsonResult TestAction()
    {
        TestService.ExampleMethodFromSpecific();
    }
} 
```

Unity 配置如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

    <configSections>
    <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration"/>
    </configSections>

    <unity xmlns="http://schemas.microsoft.com/practices/2010/unity">
    <container>
        <alias alias="transient" type="Microsoft.Practices.Unity.TransientLifetimeManager, Microsoft.Practices.Unity" />
        <alias alias="MyType" type="SomeType" />
        <register name="otherService" type="IOtherService" mapTo="OtherServiceImpl">
            <lifetime type="singleton" />
        </register>
        <register type="ITestService" mapTo="BaseTestServiceImpl`1[]">
            <lifetime type="transient" />
            <property name="OtherService" dependencyName="otherService" />
        </register>
        <register name="TestService" type="BaseTestServiceImpl`1[MyType]" mapTo="SpecificTestServiceImpl">
            <lifetime type="singleton" />
        </register>
    </container>
    </unity>
</configuration> 
```

一切都解决得很好，直到调用来自**TestController的****TestAction**。然后我在这一行得到 NullPointerException：

 **```
OtherService.DoSomethingElse(); 
```

在来自**SpecificTestServiceImpl的****ExampleMethodFromSpecific**方法中。

 **看起来 Unity 跳过了子类中的父属性注入。

这可以做到吗？我尝试将其他生命周期管理器设置为**BaseTestServiceImpl**注册，但以同样的方式失败。

请帮忙。我迷路了。:(

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:42:04.703

现在我已经有一段时间没有使用统一了，而且我更喜欢将配置完全放在代码中，但是：控制器中请求的类型 `[Dependency("TestService")]`是配置为 a`SpecificTestServiceImpl`而未配置。我原以为 Unity 会告诉你`SpecificTestServiceImpl`没有配置，但也许它确实使用了映射类型，这是具体的

我只需要补充一点，这种公共成员、接口、注入的具体类型的组合是相当糟糕的封装逻辑，并且删除了很多正确设计所具有的价值。测试控制器最好请求一个接口 ISomeTypeTestService（或类似接口），该接口又可以映射到 BaseTestServiceImpl，或者它可以是一个命名的 ITestService，可以像现在这样请求****

# java - 为什么参数的私有字段对 Java 6 中的泛型方法可见但在 Java 7 中不可见？

> ID：11761358
> 
> 赞同：13
> 
> 时间：2012-08-01T14:23:02.880
> 
> 标签：java, generics, java-7, private-members, generic-method

> **可能重复：**
> [泛型类的类型参数化字段在升级到 Java 7 后变得不可见](https://stackoverflow.com/questions/7719843/type-parameterized-field-of-a-generic-class-becomes-invisible-after-upgrading-to)

```
public class Test{

    private String _canYouSeeMe = "yes";

    <T extends Test> void genericMethod(T hey){
        String s = hey._canYouSeeMe;
    }

    void method(Test hey){
        String s = hey._canYouSeeMe;
    }   
} 
```

在针对 JDK 1.6 构建时，它编译得很好，但是针对 1.7，genericMethod() 中存在编译器错误：字段 Test._canYouSeeMe 不可见

可以通过使 _canYouSeeMe 受保护而不是私有来解决该错误，但我只是想知道从 1.6 到 1.7 发生了什么变化

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T14:31:52.180

子类（`T)`类 ( `Test`)*永远*无法访问超类的私有字段。这可能是 Java 6 编译器中的一个错误，已在 Java 7 中修复。

请记住：`T extends Test`表示它`T`是 的子类`Test`。这并不*意味着*'`T`类是`Test.class`，这是拥有私有字段和方法访问的必要条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:42:03.237

回复@Joachim - 评论太长了。

这与无法编译的事实一致：

```
void method(SubTest hey) {
    String s = hey._canYouSeeMe;
} 
```

（其中 SubTest 扩展了 Test）而这将编译

```
void method(SubTest hey) {
    String s = ((Test) hey)._canYouSeeMe;
} 
```

# c# - 有关 SQL Server 2008 的断开模式的问题

> ID：11761367
> 
> 赞同：1
> 
> 时间：2012-08-01T14:23:28.410
> 
> 标签：c#, sql-server-2008

我对下面的代码有两个问题，我使用 将`Dataset`数据库复制到内存。

第一个问题：我想知道为什么我不能使用此代码进行连接：

```
connection = new SqlConnection(ConfigurationManager.ConnectionStrings["DALLayer.Properties.Settings.AnimalMotelConnectionString"].ConnectionString); 
```

我收到此错误消息：

> 你调用的对象是空的。

请解释我错过了什么。我在 app.config 中使用名称字符串。现在我的连接是硬编码的，就像下面的代码一样，它可以工作。

第二个问题：当我使用数据集时，我想我只能在我拥有的 sql 命令中读取和执行操作。当我想更改、添加或删除时，我必须使用另一个 sql 命令和一个新的数据集？

```
 public void Test()
    {
        SqlConnection connection;
        SqlCommand command;
        SqlDataAdapter adapter = new SqlDataAdapter();
        DataSet dataset = new DataSet();

        string connectionsString = null;
        string sql = null;

        connectionsString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\AnimalMotel.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
        sql = "SELECT * From Guests";

        connection = new SqlConnection(connectionsString);

        try
        {
            connection.Open();
            command = new SqlCommand(sql, connection);
            adapter.SelectCommand = command;
            adapter.Fill(dataset);
            adapter.Dispose();
            command.Dispose();
            connection.Close();

            MessageBox.Show(Convert.ToString(dataset.Tables[0].Rows[1].ItemArray[1]), "This is only a test!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
        }
        catch
        {
            throw;
        } 
    } 
```

# php - 在php中如何使用jwplayer隐藏实际路径

> ID：11761368
> 
> 赞同：3
> 
> 时间：2012-08-01T14:23:29.917
> 
> 标签：php, web-services, jwplayer

我在 html 中创建了一个上传文件和一个 php 文件，用于将音频文件名插入表中，上传到服务器中的特定文件夹。如果我使用这样的简单 php 编码，一切正常：

```
<?
require 'dbconnect.php';
$audio=basename($_FILES['file']['name']);
$audio=str_replace(' ','|',$audio);
//$date=date('YmdHis');

$audio=$audio.".mp3";
$tmppath1="audios/".$audio;
move_uploaded_file($_FILES['file']['tmp_name'],$tmppath1);
$query="INSERT INTO `tbl_audio` (`audioname`, `guid`) VALUES ('$audio', '$guid');";
$res=mysql_query($query);
if($res)
{
$message=array("message"=>"uploaded");
$query1="select * from tbl_audio order by date desc";
$res1=mysql_query($query1);
$row1=mysql_fetch_row($res1);
if($row1[1])
{
$audiopath="http://test.com/audios/".$row1[1];
/* get the short url */
$short_url = get_bitly_short_url($audiopath,'XXXXXXXXX','XXXXXXXXXXXX');
}
else
{
$audiopath="";
}
$message=array("audioid"=>$row1[0],"audiopath"=>$short_url,"key"=>"uploaded","guid"=>$row1[3],"audioname"=>$row1[1]);
}
else
{
$message=array("message"=>"failed to upload");
}
}
echo json_encode($message); 
```

但是我的上级告诉不要直接显示音频文件的实际路径和名称，而是使用**jwplayer**隐藏它。代码如下：

```
<script type='text/javascript' src='jwplayer/jwplayer.js'></script>

<div id='mediaplayer'></div>

<script type="text/javascript">
  jwplayer('mediaplayer').setup({
    'id': 'playerID',
    'width': '480',
    'height': '270',
    'file': 'http://test.com/test/audios/Testaudio.mp3',
    'modes': [
        {type: 'html5'},
        {type: 'flash', src: 'http://test.com/jwplayer/player.swf'},
        {type: 'download'}
    ]
  }); 
```

我可以在浏览器中播放音频。但是如何更改生成的 url 并将其作为对开发人员的响应？我想要的是获取没有名称的音频文件的url路径，就像`player.php?id=abc` 我使用bitly api来减少路径请帮助，谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:44:30.380

我想你需要修改标题。

在 player.php 中，您执行逻辑来查找您不想贡献的文件的物理路径。

那么你必须改变标题

这是第一个答案中的示例

[在请求 MP3 文件时设置 apache 以服务 PHP](https://stackoverflow.com/questions/1516779/setting-up-apache-to-serve-php-when-an-mp3-file-is-requested)

# c# - 在 XML 上使用二进制格式

> ID：11761371
> 
> 赞同：0
> 
> 时间：2012-08-01T14:23:42.897
> 
> 标签：c#, .net

我有这段代码来保留一些配置数据

```
XmlSerializer xmlSerializer = new XmlSerializer(typeof(Entities.Application));
TextReader textReader = new StreamReader(XMLFile);
sequences = (Entities.Application)xmlSerializer.Deserialize(textReader);
textReader.Close(); 
```

现在我想把**它隐藏**一点，并以某种方式在 XML 上使用二进制格式（无论如何都要保留 XML）。

有可能吗？（或者还有其他一些方法？）

怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:37:25.677

如果您想隐藏 XML，那么两个简单的选项是使用 Base64 编码 XML 或在 XML 元素中使用 Base64。

```
// Simple Base64 conversion (using UTF8 for simplicity)
// ========

// Assume [sequences] is variable of type [Entities.Application]
string xmlString;
var xs = new XmlSerializer(typeof(Entities.Application));
using (var sw = new StringWriter())
{
    xs.Serialize(sw, sequences);
    xmlString = sw.ToString();
}
string encoded = System.Convert.ToBase64String(
                    System.Text.Encoding.UTF8.GetBytes(xmlString));

// Converting encoded [Entities.Application] to decoded XML string,
// using some of your code for consistency.
string encoded;
using (TextReader textReader = new StreamReader(XMLFile))
{
    encoded = textReader.ReadToEnd();
    textReader.Close();
}
string decoded = System.Text.Encoding.UTF8.GetString(
                    System.Convert.FromBase64String(encoded));
XmlSerializer xmlSerializer = new XmlSerializer(typeof(Entities.Application));
using (var sr = new StringReader(decoded))
{
    sequences = (Entities.Application)xmlSerializer.Deserialize(sr);
}

// Inserting Base64 in XmlElement
// ========

// Optional: the old MSXML.DOMDocument had nodeTypedValue, and you
// can set the same attributes if you are going to use DOMDocument, although
// it is still a good idea to tag the element so you know its datatype.
node.SetAttribute("xmlns:dt", "urn:schemas-microsoft-com:datatypes");
node.SetAttribute("dt", "urn:schemas-microsoft-com:datatypes", "bin.base64");

// Assume serialized data has already been encoded as shown above
var elem = node.AppendChild(xmlDoc.CreateTextNode(encoded)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:27:33.557

您仍然需要将二进制数据编码为文本。是不是已经压缩了？如果是这样，那可能是第一步。然后您需要决定如何对二进制文件进行编码。Base91 的效率很高：http: [//base91.sourceforge.net/](http://base91.sourceforge.net/)

# linux - 在不同的 Linux 发行版上运行程序

> ID：11761372
> 
> 赞同：1
> 
> 时间：2012-08-01T14:23:46.630
> 
> 标签：linux, 32bit-64bit, binaryfiles

我有这个程序'prog'，我可以在我的服务器上毫无问题地运行。尝试在我自己的机器（64 位 Ubuntu）上运行它时，我收到以下消息：

```
 bash: ./prog: cannot execute binary file 
```

我确保所有涉及的文件的所有权限都设置为 777，以确保这不是权限问题。我相信服务器是 32 位的，这可能是原因。但是，64 位操作系统不应该能够运行 32 位程序，因为它只是架构的一个子集吗？如果没有，是否有一些我可以为 Ubuntu 下载的模拟器，如果这确实是问题，我可以运行 32 位程序？

我知道“无法执行二进制文件”错误有点包含，所以以上只是我对为什么我收到消息的猜测，但也许其他人有另一种理论？

再次感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:30:27.550

`prog`您需要64 位计算机上使用的 32 位（共享）库。否则`prog`无法执行。

尝试使用安装它们

```
apt-get install ia32-libs 
```

（如果`prog`需要更多库，也安装它们的 32 位版本）

这应该可以解决问题。

**请注意**，如果您有 的源，在您的 64 位计算机上`prog`重新编译可能更方便（较少安装 32 位库） 。`prog`

# mdm-zinc - MDM Zinc - 使窗口可调整大小

> ID：11761377
> 
> 赞同：0
> 
> 时间：2012-08-01T14:24:07.747
> 
> 标签：mdm-zinc

我正在使用 MDM Zinc 3。我想用它为 Windows 创建一个桌面应用程序。如何使最终的投影仪窗口可调整大小？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:55:38.693

您可以在 Zinc 3.0 界面（在窗口属性窗格中）将窗口类型设置为“标准可调整大小”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:06:48.120

此外，在可缩放的本机窗口中提供内容时，请确保 - 如果您在实现中管理 Flash 阶段缩放 - 在 Zinc Builder 的“窗口属性”部分右侧的“调整大小时缩放电影”未选中。
熟悉该设置，因为它管理内容在本机窗口中的缩放方式 - 您可以选中它（这是默认设置）或取消选中它并使用舞台对象功能管理内容缩放，

亲切的问候，
彼得 Blazejewicz

# c# - 可以将新类添加到现有 dll 并将其更新到源文件

> ID：11761378
> 
> 赞同：2
> 
> 时间：2012-08-01T14:24:07.447
> 
> 标签：c#, .net

```
 Collection of C# class source code file, with Microsoft.Csharp.CSharpCodeProvider.CompileAssemblyFromFile(parameters,ClassFiles) we can create an assembly dll file.

       public static string[] sourcefiles = new string[]{
                    @"D:\pro1bk\projects\WCFService.cs" ,           
                    @"D:\pro1bk\projects\Calculator.cs"            
                                 };

 public Assembly Compile()
     {
        CSharpCodeProvider provider;
        CompilerParameters parameters;
        CompilerResults results;

        parameters = new System.CodeDom.Compiler.CompilerParameters();

        AddAssemblyReference(
            typeof(System.Runtime.Serialization.DataContractAttribute).Assembly,
            parameters.ReferencedAssemblies);

        AddAssemblyReference(typeof(System.Xml.XmlElement).Assembly,
            parameters.ReferencedAssemblies);

                 ........

                 ........
        parameters.GenerateInMemory = true;
        parameters.GenerateExecutable = false;
        parameters.OutputAssembly = @"D:\pro1bk\ServiceCal.dll";
        parameters.TreatWarningsAsErrors = false;
        parameters.WarningLevel = 4;
        parameters.TempFiles.KeepFiles = false;

        if (TargetFramework == TargetFramework.Silverlight)
        {
            parameters.CompilerOptions = " /nostdlib ";

        }

        parameters.ReferencedAssemblies.AddRange(DefaultReferencedAssemblies);
        //parameters.MainClass = "App";
        try
        {
            provider = new CSharpCodeProvider();
            results = provider.CompileAssemblyFromFile(parameters, sourcefiles);
            results.PathToAssembly = "";
            List<ErrorInfo> errors = new List<ErrorInfo>(results.Errors.Count);

             ......

             ......

          }

} 
```

上面的代码用于创建 dll 文件。

我刚刚将该 DLL（例如 ClientProx.dll）复制到另一个项目中。现在，我创建了一个带有方法的新类，以及如何将这个新创建的类添加到带有旧类的现有 DLL（例如 ClientProx.dll）中。

在该 DLL 中添加新类（例如 ClientProx.dll）后，它应该在适当的文件中更新为新类。

我们如何在运行时做到这一点？是否可以在现有 DLL 中添加新类并将其更新到正确的文件位置？有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:43:03.367

更新程序集会很**危险**，不推荐！

反而，

1>将新编译的类[dll]存储在`Isolatedstorage`您想要的文件夹中或文件夹中！

2>创建一个订阅`AssemblyResolve`事件的方法。这个方法现在应该从文件夹或文件夹中返回应用程序要求的未解析的dll `IsolatedStorage`。

# vb.net - VB.Net Office 互操作 - Excel 进程未关闭

> ID：11761379
> 
> 赞同：4
> 
> 时间：2012-08-01T14:24:08.277
> 
> 标签：vb.net, excel, garbage-collection, interop

使用 microsoft.office.interop.excel 关闭 Excel 以释放范围、工作表和工作簿不会关闭 Windows 中的进程。

我可以完全关闭所有 excel 实例，但不知道用户是否同时运行另一个 excel 实例。

这是我尝试过的一切

```
Marshal.ReleaseComObject(myWorksheet)
Marshal.FinalReleaseComObject(myWorksheet)
Marshal.ReleaseComObject(xlRange)
Marshal.FinalReleaseComObject(xlRange)
Marshal.ReleaseComObject(.activeworkbook)
Marshal.FinalReleaseComObject(.activeworkbook)
Marshal.ReleaseComObject(excelApplication)
Marshal.FinalReleaseComObject(excelApplication)
MSExcelControl.QuitExcel()
GC.Collect()
GC.WaitForPendingFinalizers()
GC.Collect()
GC.WaitForPendingFinalizers() 
```

* * *

```
Friend Shared Sub QuitExcel()
    If Not getExcelProcessID = -1 Then
        If Not excelApp Is Nothing Then
            'Close and quit
            With excelApp
                Try
                    Do Until .Workbooks.Count = 0
                        'Close all open documents without saving
                        .Workbooks(1).Close(SaveChanges:=0)
                    Loop
                Catch exExcel As Exception
                    'Do nothing
                End Try
                Try
                    .ActiveWorkbook.Close(SaveChanges:=0)
                Catch ex As Exception
                    'Do nothing
                End Try

                Try
                    .Quit()
                Catch ex As Exception
                    'Do nothing
                Finally
                    myExcelProcessID = -1
                End Try
            End With
            excelApp = Nothing
        End If
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T20:02:08.667

好的解决方案亚历克斯，我们不应该这样做，但我们这样做了，EXCEL 不会结束。我采用了您的解决方案并创建了以下代码，在我的应用程序使用 Excel 导入或导出之前调用 ExcelProcessInit，然后在完成后调用 ExcelProcessKill。

```
Private mExcelProcesses() As Process

Private Sub ExcelProcessInit()
  Try
    'Get all currently running process Ids for Excel applications
    mExcelProcesses = Process.GetProcessesByName("Excel")
  Catch ex As Exception
  End Try
End Sub

Private Sub ExcelProcessKill()
  Dim oProcesses() As Process
  Dim bFound As Boolean

  Try
    'Get all currently running process Ids for Excel applications
    oProcesses = Process.GetProcessesByName("Excel")

    If oProcesses.Length > 0 Then
      For i As Integer = 0 To oProcesses.Length - 1
        bFound = False

        For j As Integer = 0 To mExcelProcesses.Length - 1
          If oProcesses(i).Id = mExcelProcesses(j).Id Then
            bFound = True
            Exit For
          End If
        Next

        If Not bFound Then
          oProcesses(i).Kill()
        End If
      Next
    End If
  Catch ex As Exception
  End Try
End Sub

Private Sub MyFunction()
  ExcelProcessInit()
  ExportExcelData() 'Whatever code you write for this...
  ExcelProcesKill()
End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-31T01:39:02.663

我知道这是一个旧线程，但如果有人回到这个问题，您实际上必须调用您在工作簿中触摸的每个 Interop.Excel 对象。如果你从 Excel 中将一个实例化的类拉入你的代码，当你完成它时，Marshal.ReleaseComObject。甚至每一个细胞。这很疯狂，但这是我能够解决相同问题的唯一方法。

并确保您没有致命异常并留下未发布的内容...... Excel 将保持打开状态。

Excel.应用程序？Marshal.ReleaseComObject。

Excel.Workbook？Marshal.ReleaseComObject。

Excel.工作表？Marshal.ReleaseComObject。

Excell.Range？Marshal.ReleaseComObject。

循环遍历行？Marshal.ReleaseComObject 您循环遍历的每一行和单元格。

超风格？Marshal.ReleaseComObject...至少这是我必须做的...

如果您计划使用 PIA 访问 Excel，从您编写的第一行代码开始，计划您将如何发布您的对象。我拥有的最佳方法是确保从 Excel 对象中提取一个 excel 值并将其加载到我自己的内部变量中。然后立即调用您访问的 Marshal.ReleaseComObject。通过应用程序、工作簿、工作表、ListObject、表格等中的列表循环遍历 excel 对象往往是最难发布的。因此，计划是相当关键的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-02T11:59:42.633

当您打开excel并随后使用相同的PID关闭它时，我发现了一个粗略的工作来获取进程ID（PID）

在打开之前获取所有 excel 进程（以防另一个已经在运行）：

```
 msExcelProcesses = Process.GetProcessesByName("Excel")
            'Get all currently running process Ids for Excel applications
            If msExcelProcesses.Length > 0 Then
                For i As Integer = 0 To msExcelProcesses.Length - 1
                    ReDim Preserve processIds(i)
                    processIds(i) = msExcelProcesses(i).Id
                Next
            End If 
```

然后在打开excel后直接重复这个过程，新的PID***应该***是你的

然后你最后需要做的就是再次迭代列表并用你的 ID 杀死一个

```
 Dim obj1(1) As Process
                obj1 = Process.GetProcessesByName("EXCEL")
                For Each p As Process In obj1
                    If p.Id = MSExcelControl.getExcelProcessID Then
                        p.Kill()
                    End If
                Next 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-01T15:08:20.463

前段时间我遇到了同样的问题，尝试在你的 excel 对象上使用 Marshal.ReleaseComObject 。它位于 System.Runtime.InteropServices 命名空间中。还记得事先关闭你的 excel 对象。

```
xlWorkbook.Close();
xlApp.Close();
Marshal.ReleaseComObject(xlWorkbook);
Marshal.ReleaseComObject(xlApp); 
```

# ios - 使用新格式将 NSString 转换为 NSDate

> ID：11761381
> 
> 赞同：0
> 
> 时间：2012-08-01T14:24:14.770
> 
> 标签：ios, nsdateformatter

这个问题被问了很多，但我找不到我的问题的解决方案。

**我想要什么**：将作为 NSString 给出的日期转换为具有完全不同格式的 NSDate。我想转换`Tue, 31 Jul 2012 10:15:00 GMT`为`2012-07-31 10:15:00 +0000`.

**我的代码**：

```
NSString *startDateString = @"Tue, 31 Jul 2012 10:15:00 GMT"; //in real from a server

NSDateFormatter *formatter = [[NSDateFormatter alloc]init];
[formatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
[formatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss"];

NSDate *startDate = [formatter dateFromString:startDateString];
[formatter setDateFormat:@"yyy-MM-dd HH:mm:ss'Z'"];

NSString *endDateString = [formatter stringFromDate:startDate];
NSDate *endDate = [formatter dateFromString:endDateString]; 
```

**问题**： `endDate`是`nil`。

**编辑**：
发现一个奇怪的行为。
当我将第一个 dateFormat 更改为`@"EEE, dd MMM yyy HH:mm:ss 'GMT'"`（添加 GMT）时，endDate 的输出是正确的，但**仅**在模拟器中。在设备上它仍然为零。
使用不带“GMT”的 dateFormat 时，模拟器和设备上的值为零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:41:51.093

这对我来说效果很好，你可以使用它：

```
NSString *startDateString = @"Tue, 31 Jul 2012 10:15:00 GMT"; //in real from a server

NSDateFormatter *formatter = [[NSDateFormatter alloc]init];
[formatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
[formatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ssZZZ"]; // SPOT the difference in this line

NSDate *startDate = [formatter dateFromString:startDateString];
[formatter setDateFormat:@"yyy-MM-dd HH:mm:ssZZZ"]; // and SPOT the difference in this line

NSString *endDateString = [formatter stringFromDate:startDate];
NSDate *endDate = [formatter dateFromString:endDateString];

NSLog(@"%@", endDate); 
```

是`endDate`：

```
2012-07-31 10:15:00 +0000 
```

**更新#1**

仅在真机上**测试过**！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-26T21:14:02.527

在转换之前添加以下内容

```
[formatter setLocale:[[NSLocale alloc]initWithLocaleIdentifier:@"en_US"]]; 
```

# java - 我的 html 超链接在我的 OSGI 包中不起作用

> ID：11761383
> 
> 赞同：0
> 
> 时间：2012-08-01T14:24:23.157
> 
> 标签：java, html, jar, osgi, html-helper

我在我的 OSGI 包中使用 Java 和 HelpGUI，并且使用的链接不起作用。当我在非 OSGI Java 项目中使用 HelpGUI 时，它们在相同的 html 文件上工作得很好。是否有一些安全设置或一些特殊的路径需要考虑？让我知道，我被卡住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:38:43.073

你应该看看HelpGui的源代码，我可以明白为什么它在OSGi中不能很好地工作（它依赖于jar文件中通常具有的特定URL格式资源）。

如果您查看 net.sourceforge.helpgui.gui.HelpView 页面，大约在第 222 行：

```
else //It's perhaps a page on the help toppic
{
//Serach the page from  
int ind = url.lastIndexOf('!');
url = url.substring(ind+1,url.length());
url = url.replaceFirst(MainFrame.helpPath+"/","");
updatePage(getLinkedPage(pageRoot.children(), url), true);
} 
```

这在 OSGi 中是行不通的，因为条目的 URL 格式确实不同。例如，在 Equinox 中，捆绑 URL 如下所示：

```
bundleresource://2.fwk1657006569:1general/features.html 
```

（其他实现可能会有所不同，重点是，你不能依赖它）

在“普通 java”中，URL 如下所示：

```
jar:file:/home/demo-helpgui/nonosgi/lib/helpgui-1.1-demo.jar!/docs/help/general/features.html 
```

它是可以修复的，应该不会太难，但您必须联系 HelpGui 作者或自己动手。

问候，弗兰克

# c# - 在javascript中访问服务器端方法

> ID：11761385
> 
> 赞同：-1
> 
> 时间：2012-08-01T14:24:24.937
> 
> 标签：c#, asp.net, html

我在aspx.cs页面中有方法，我想在selectbox之后的javaScript函数中访问此方法。当selectbox option是在selectbox optain时，selectbox之后的javaScript函数中的javaScript函数，当selectbox选项更改为“更改值”以传递到aspx.cs page的方法。并将该值绑定到另一个具有该值的选择框来自 Web 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:45:33.427

您可以访问服务器端 OnCheckChanged 方法处理程序，方法是使用 UpdatePanel 并将此控件定义为 AsyncPostBackTrigger 并使用 AutoPostback="True" 或使用[WebMethod() 属性](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)在页面中定义 Async 方法，然后使用 jQuery/执行请求的 Javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T12:15:18.573

要访问 javascript 函数中的服务器端方法，需要涵盖以下内容：

1）方法后面的代码必须具有“<strong>WebMethod”属性，并且应该是静态方法。

2) ScriptManager 必须添加到表单标签内。

3)*页面方法。*调用方法背后的代码。

代码片段背后的代码：

```
[Webmethod]
Public static IamServerMethod()
{
//Your logic goes here
} 
```

ASPX 文件片段：

添加脚本管理器：

```
<asp:ScriptManager ID="ScriptMgr" runat="server" EnablePageMethods="true">
</asp:ScriptManager> 
```

Javascript函数内部：

```
Function IamJavascriptFunction()
{
PageMethods. IamServerMethod();
} 
```

# java - AspectJ：两种教程

> ID：11761386
> 
> 赞同：10
> 
> 时间：2012-08-01T14:24:37.903
> 
> 标签：java, aspectj

根据我的研究，我知道有两种使用 AspectJ 的方法。首先是创建`A.aj`类，其次是`@Aspect`在`A.java`.

我正在为第二种寻找一个很好的教程，尤其是关于像这样的行

```
@After("call(void fooMethod())")  
@Around("call(void sendAndReceive())") 
@Before("execution(String greeting(..)) && args(context)") 
```

但我不知道他们是怎么称呼的。

你能推荐一些教程吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T14:28:54.823

这种风格称为*@AspectJ*是为了强调注解的作用。查看[官方文档](http://www.eclipse.org/aspectj/doc/next/adk15notebook/ataspectj-pcadvice.html)和[@AspectJ 备忘单](http://blog.espenberntsen.net/2010/03/20/aspectj-cheat-sheet/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T20:47:53.340

注释和 XML 方式：

**注释方式：** *最小的xml配置文件：*

```
<!-- Enable autoproxy to pick up all Java files tagged as @Aspect behave like Aspects -->
<aspectj-autoproxy/>
<!-- define bean -->
<!-- Note: MyUselessAspect.java should exist and this class must be tagged as @Aspect -->
<bean id="myUselessAspect" class="...MyUselessAspect" /> 
```

**XML方式：** *最小的XML配置：*

```
<aop:config>
   <aop:aspect ref="myUselessAspect">
        <!-- this point-cut picks all methods of any return type, from any package/class with any number of Parameters -->
    <aop:before method="doSomethingBeforeMethodCall" pointcut="execution(* *.*(..))"/>
    <aop:after method="doSomethingAfterMethodCall" pointcut="execution(* *.*(..))"/>
   </aop:aspect>        
</aop:config>
<!-- No need to Annotate this java Class as @Aspect. Neither you need to define any
 Point-cuts or Advices in the Java file. The <aop:config> tag takes care of everything -->
<bean id="myUselessAspect" class="...MyUselessAspect"></bean> 
```

无需更改代码。

*Pre-Req：* aop 命名空间必须存在于 XML 文件中

# php - sfCaptchaGDPlugin 验证

> ID：11761387
> 
> 赞同：0
> 
> 时间：2012-08-01T14:24:39.070
> 
> 标签：php, symfony-1.4, captcha

我正在尝试为 Symfony 1.4 实现 sfCaptchaGDPlugin。

我创建了一个`CommentForm`扩展`BaseForm`.

```
class CommentForm extends BaseForm
{
    public function configure()
      {
        $stars = array('star1', 'star2', 'star3', 'star4', 'star5');
        $fields = array();
        $fields['Subject'] = new sfWidgetFormInputText(array('default' => 'Bewertung'));
        $fields['Voting'] = new btRatingStars(array('choices' => $stars), array('class' => 'star'));
        $fields['Username'] = new sfWidgetFormInputText();
        $fields['Captcha'] = new sfWidgetCaptchaGD();
        $fields['Text'] = new sfWidgetFormTextarea();
        $fields['ObjectId'] = new sfWidgetFormInputHidden();
        $fields['Userid'] = new sfWidgetFormInputHidden();
        $fields['Type'] = new sfWidgetFormInputHidden();
        $this->setWidgets($fields);
      }

    } 
```

我可以看到验证码并输入代码。现在我正在尝试通过 AJAX 请求提交表单。

```
 $('.btnsmall').click(function() {
    $.post('<?php echo url_for('forum/saveComment') ?>', {
      data: $('.form').serializeArray()
    }, function(data) {
      console.log(data);
    }); 
    return false;
  }); 
```

以下动作如下所示：

```
if ($request->isXmlHttpRequest())
    {
      $data = $request->getParameter('data');
      $formdata = array();
      foreach ($data as $field)
      {
        $formdata[$field['name']] = $field['value'];
      }  
      $form = new CommentForm();    
      $form->setDefaults($formdata);  
      $form->setValidator('Captcha', new sfCaptchaGDValidator());
      $form->bind(array(
          'Captcha' => $formdata['Captcha'],
      ));
      var_dump($form->hasErrors());
      var_dump($form->valid());
    } 
```

结果如下：

```
bool(true)
bool(false) 
```

我正在关注[本教程](http://www.symfony-project.org/plugins/sfCaptchaGDPlugin/1_4_6?tab=plugin_readme)

问题是跨站点保护...必须通过 $form['_csrf_token']; 实现 csrf 令牌；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:16:19.513

问题解决了！

`Formfield`我将每个分开渲染`echo $form['fieldname']`。我忘记了`csrf`令牌。在我添加`echo $form['_csrf_token']`表单后，验证器通过了验证器，包括验证码。

谢谢你的帮助。

# php - 网站重定向 (.htaccess)

> ID：11761389
> 
> 赞同：2
> 
> 时间：2012-08-01T14:24:40.327
> 
> 标签：php, .htaccess, redirect

我需要将一个重要客户的网站置于维护模式。我希望重定向（或提供静态 html）除 2 个 IP 之外的所有访问者，以便我们在处理该网站时可以继续访问该网站。

有没有办法用 .htaccess 文件做到这一点？我知道我可以使用 php 和 headers 轻松地做到这一点，但我会经常使用 PHP 代码，所以很多时候用户会在重定向之前遇到 PHP 错误。

此外，Google bot 经常访问该网站。有没有办法告诉机器人网站暂时关闭，这样他们就不会索引“请稍后回来”按摩？（可能是标题代码？）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:28:45.363

这是SEOmoz的一篇很棒的文章

[http://www.seomoz.org/blog/how-to-handle-downtime-during-site-maintenance](http://www.seomoz.org/blog/how-to-handle-downtime-during-site-maintenance)

这是一个很好的逐步解释，我认为这正是您正在寻找的。它解决了 SEO 方面的问题，还解释了如何使用您的 htaccess 来提供正确的 HTTP 状态代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:29:42.990

```
# Redirect old file path to new file path
Redirect /olddirectory/oldfile.html http://example.com/newdirectory/newfile.html 
```

# c# - 如何将特定的 SharePoint 组添加到列表权限

> ID：11761391
> 
> 赞同：4
> 
> 时间：2012-08-01T14:24:44.037
> 
> 标签：c#, sharepoint, sharepoint-2010, sharepoint-2007

```
using (SPSite site = (SPSite)properties.Feature.Parent)
{
   using (SPWeb web = site.OpenWeb())
   {
        if (web != null)
        {
              web.AllowUnsafeUpdates = true;
              SPList list = web.Lists["Alert Status v1.0"];

              //Creates a new role assignment for a group
              SPGroup myGroup = web.SiteGroups["IKM Manager"];
              SPRoleAssignmentCollection roleAssignments = web.RoleAssignments;

              // SPRoleAssignment accepts a SPPrincipal which can be a SPUser or SPGroup
              SPRoleAssignment roleAssignment = new SPRoleAssignment(myGroup);

              //Add the new role assignment to the collection of role assignments for the site.
              roleAssignments.Add(roleAssignment);

              // Stop inheriting permissions
              list.BreakRoleInheritance(true);
              list.RoleAssignments.Add(roleAssignment);
              list.Update(); 
```

我在 RoleAssignments.Add(roleAssignment) 上有错误，例如“无法添加具有空角色定义绑定集合的角色分配”。我想停止继承权限并将特定组添加到列表权限。你能帮助我吗？请..

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-03T05:05:05.140

This should work.

```
list.BreakRoleInheritance(true);
SPGroup groupAdmin = web.SiteGroups["IKM Manager"];
SPRoleAssignment roleAssignmentAdmin = new SPRoleAssignment((SPPrincipal)groupAdmin);
SPRoleDefinition roleAdmin = web.RoleDefinitions.GetByType(SPRoleType.Administrator);
roleAssignmentAdmin.RoleDefinitionBindings.Add(roleAdmin);
list.RoleAssignments.Add(roleAssignmentAdmin);
list.Update(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T14:35:45.223

您需要将角色定义绑定添加到角色分配，例如添加贡献者角色定义

```
roleAssignment.RoleDefinitionBindings.Add(web.RoleDefinitions.GetByType(SPRoleType.Contributor)); 
```

# java - XML SAX 解析未返回所需的结果

> ID：11761393
> 
> 赞同：1
> 
> 时间：2012-08-01T14:24:56.840
> 
> 标签：java, android, xml-parsing

我的客户提供了这样的 XML：

```
<?xml version='1.0' encoding='UTF-8' ?><quizzes updatetimestamp='2012-08-01 06:24'><quiz q_id='1'>
<q_name>Airplane!</q_name >
<q_appleid>com.patelware.moviesquiz.free</q_appleid>
<q_description>"Roger, Roger"</q_description>
<q_urlicon>http://www.inall3.com/king/icons/airplane_icon.png</q_urlicon>
<q_urlmainimg>http://www.inall3.com/king/icons/airplane_main.png</q_urlmainimg>
<q_urldb>http://www.inall3.com/king/dbs/airplane.xml</q_urldb>
<q_timesofupload>2011-05-01 00:00:00</q_timesofupload>
<q_priceindollar>0.00</q_priceindollar>

<q_cattype>Comedy</q_cattype>
<q_thighscore>http://www.inall3.com/hs/highscoreairplane.php?action=gethighscores&amp;mode=1</q_thighscore>
<q_phighscore>http://www.inall3.com/hs/highscoreairplane.php?action=gethighscores&amp;mode=2</q_phighscore>
</quiz> 
```

这是我的解析代码：

```
public class DynamicXmlHandler extends DefaultHandler {

    DynamicXMLgettersetter info = new DynamicXMLgettersetter();

    boolean q_nameOn = false;
    String q_nameValue = null;

    boolean q_DescrptionOn = false;
    String q_DescriptionValue = null;

    boolean q_MainImgOn = false;
    String q_MainImgValue = null;

    boolean q_urldbOn = false;
    String q_urldbValue = null;

    boolean q_PriceOn = false;
    String q_PriceValue = null;

    boolean q_CatagoryOn = false;
    String q_CatagoryValue = null;

    boolean q_TmodeOn = false;
    String q_TmodeValue = null;

    boolean q_PmodeOn = false;
    String q_PmodeValue = null;

    // .................................................................

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

        if (localName.equals("q_name")) {

            q_nameOn = true;
        }

        if (localName.contentEquals("q_description")) {

            q_DescrptionOn = true;

        }

        if (localName.contentEquals("q_urlmainimg")) {

            q_MainImgOn = true;

        }
        if (localName.contentEquals("q_urldb")) {

            q_urldbOn = true;

        }
        if (localName.contentEquals("q_priceindollar")) {

            q_PriceOn = true;

        }
        if (localName.contentEquals("q_cattype")) {

            q_CatagoryOn = true;

        }
        if (localName.contentEquals("q_thighscore")) {

            q_TmodeOn = true;

        }
        if (localName.contentEquals("q_phighscore")) {

            q_PmodeOn = true;

        }

        super.startElement(uri, localName, qName, attributes);
    }

    // ..................................................................

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {

        if (q_nameOn == true) {

            q_nameValue = new String(ch, start, length);

        }

        if (q_DescrptionOn == true) {

            q_DescriptionValue = new String(ch, start, length);

        }

        if (q_MainImgOn == true) {

            q_MainImgValue = new String(ch, start, length);

        }
        if (q_urldbOn == true) {

            q_urldbValue = new String(ch, start, length);

        }
        if (q_PriceOn == true) {

            q_PriceValue = new String(ch, start, length);

        }
        if (q_CatagoryOn == true) {

            q_CatagoryValue = new String(ch, start, length);

        }
        if (q_TmodeOn == true) {

            q_TmodeValue = new String(ch, start, length);

        }
        if (q_PmodeOn == true) {

            q_PmodeValue = new String(ch, start, length);

        }

        super.characters(ch, start, length);
    }

    // ..................................................................

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {

        if (localName.equalsIgnoreCase("q_name")) {

            q_nameOn = false;
            info.setqname(q_nameValue);
        }

        if (localName.equalsIgnoreCase("q_description")) {

            q_DescrptionOn = false;
            info.setdescription(q_DescriptionValue);
        }

        if (localName.equalsIgnoreCase("q_urlmainimg")) {

            q_MainImgOn = false;
            info.seturlimage(q_MainImgValue);
        }
        if (localName.equalsIgnoreCase("q_urldb")) {

            q_urldbOn = false;
            info.seturldb(q_urldbValue);
        }

        if (localName.equalsIgnoreCase("q_priceindollar")) {

            q_PriceOn = false;
            info.setpriceindollar(q_PriceValue);
        }

        if (localName.equalsIgnoreCase("q_cattype")) {

            q_CatagoryOn = false;
            info.setcattype(q_CatagoryValue);
        }

        if (localName.equalsIgnoreCase("q_thighscore")) {

            q_TmodeOn = false;
            info.setthighscore(q_TmodeValue);
        }

        if (localName.equalsIgnoreCase("q_phighscore")) {

            q_PmodeOn = false;
            info.setphighscore(q_PmodeValue);
        }

        super.endElement(uri, localName, qName);
    } 
```

当我使用 SAX 解析器解析它时，一切都会正确返回。但是当我尝试解析`<q_thighscore>`or`<q_phighscore>`时，它只返回`mode=1`and `mode=2`，但我想要解析完整链接，问题出在哪里，我现在该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:11:01.043

这两个实体有一个＆符号 - 一个“&” - 正在变成一个“ & # 3 8 ;” 所以你必须以不同的方式处理代码中的那些

# html - 每个链接上悬停时的宽度变化比悬停的链接

> ID：11761394
> 
> 赞同：4
> 
> 时间：2012-08-01T14:22:07.827
> 
> 标签：html, css

正如题目所说。我想让悬停的那个改变他的`width`。但似乎每个列表元素都会改变他的`width`.

[小提琴](http://jsfiddle.net/dennym/JjMfU/)

它似乎很容易，但我不明白。有什么建议么？

**编辑**：当你将`width`at 更改`#nav li a:hover {`为`background-color: #555;` 它工作正常。现在真的很迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:43:32.910

它不会影响其他元素，只会移动它们。**[看到这个](http://jsfiddle.net/JjMfU/7/)**。

* * *

**解决方案：**添加`margin-left: -30px;`. 这将修复其他元素。
为什么是 30 像素？30px 是新旧宽度之间的差异（90 和 120px）。

```
#nav li a:hover {
    width: 120px;
    margin-left: -30px;
} 
```

**现场演示：[jsFiddle](http://jsfiddle.net/JjMfU/11/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:45:51.380

看看这里实际发生了什么：宽度仅在当前链接上更改，而不是在所有链接上更改：http: [//jsfiddle.net/JjMfU/15/](http://jsfiddle.net/JjMfU/15/)

您需要解决一个不同的问题 - 只需将链接始终放在右侧 - 这是通过将它们浮动到右侧来完成的。请注意，我添加`overflow: hidden`了`li`处理浮点数，也存在其他方法。

像这样：http: [//jsfiddle.net/JjMfU/20/](http://jsfiddle.net/JjMfU/20/)

# redmine - 纺织品：使用代码和脚注

> ID：11761395
> 
> 赞同：2
> 
> 时间：2012-08-01T14:25:00.870
> 
> 标签：redmine, textile, footnotes

嗨，我正在使用 Redmine 编写我的软件的 wiki。我需要在这样的代码部分旁边放一些注释：

```
class.method()[1] 
```

其中“一个”是指向我在页面末尾的注释的链接。我尝试使用 Textile 语法中定义的任何方法，但它似乎不起作用。事实上，当您使用代码标签“@@”时，任何其他标签都会停止工作。
即使我可以使用链接标签 [[ ]] 也很好，但前提是它是这样的[`google.com`](http://www.google.com)

谢谢你的帮助，

亚历山德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:24:31.110

Redmine 使用[Coderay](http://coderay.rubychan.de/)来解析 Wiki 中的代码部分。查看不同语言的文档。否则，我建议使用注释而不是脚注，或者在最坏的情况下对代码进行行引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-31T09:33:26.867

只有在开始方括号之前有一个字母数字字符时，脚注才有效：

```
this[1], whereas this()[2] or this [3]

fn1\. will work

fn2\. won't work.

fn3\. won't work. 
```

至少 Redmine 3.1 是这样。有关详细信息，请参阅此[问题](http://www.redmine.org/issues/20425)。

请注意，您需要在`fn1.`,`fn2.`和之间使用空行`fn3.`来获得正确的渲染。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:17:34.830

Redmine 的这个[扩展](http://www.r-labs.org/projects/r-labs/wiki/Wiki_Extensions_en)支持 wiki 中的脚注和自定义样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-19T14:19:18.680

Redmine 支持 Textile 标记语法。Textile 支持脚注。如[票证 #974](http://www.redmine.org/issues/974#note-7)所述，这是在 Redmine 中使用脚注的语法：

```
 Text with a footnote[1]

    fn1\. and here the actual footnote. 
```

# authentication - 如何使用带有 LDAP 身份验证的 gitlab 设置管理员用户？

> ID：11761396
> 
> 赞同：23
> 
> 时间：2012-08-01T14:25:11.130
> 
> 标签：authentication, ldap, gitlab

我刚刚设置了 gitlab，但是对于管理员用户我完全迷失了。wiki 似乎对这个话题保持沉默，谷歌也没有提供帮助。

那么，如何在 LDAP 身份验证中使用 gitlab 设置管理员用户？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-16T13:34:41.670

您还可以通过在 rails 控制台中执行以下操作来为用户设置管理员权限：

```
User.find_by_email("user@example.org") do |i|
    i.admin = true
    i.save
end 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-04-27T05:34:40.807

这就是我将 LDAP（或 Windows AD）用户**vikas**作为管理员所做的。

首先登录 GitLab 门户并注销，然后运行以下命令。

```
gitlab-rails console production
u = User.where(id: 1).first
u.admin = true
u.save!
exit 
```

运行上述命令后，再次登录，现在您将拥有**vikas** AD 用户的管理员权限。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-02-09T11:26:31.577

我的是已接受答案的变体，但它基于[官方文档中的示例](https://docs.gitlab.com/ce/security/reset_root_password.html)

从你的 gitlab 服务器的命令行：

打开 gitlab rails 控制台（我在这里假设您没有以 root 身份登录）：

```
sudo gitlab-rails console production 
```

然后键入以下命令：

```
 user = User.find_by(username: 'my_username')
 user.admin = true
 user.save! 
```

关闭控制台：

```
exit 
```

更新你的 gitlab 服务器：

```
sudo gitlab-ctl reconfigure 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-01T14:29:06.510

该文件`db/fixtures/production/001_admin.rb`包含用于管理的用户和密码设置，但您必须禁用 LDAP 才能使用它登录。之后，如果您通过 LDAP 登录创建了用户，您可以将其设置为管理员并重新启用 LDAP。

希望有一种更合理的方式存在......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-04T13:07:37.397

登录到 gitlab 数据库并运行：

更新用户 set admin = 't' where email like 'xxxxx@xxxxx';

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-30T00:46:23.403

如果您的 GitLab 用户名具有管理员访问权限，则 Web 界面上有一个复选框。

登录 GitLab，在 的上下文中`Admin Area > Users > the.other.user > edit > Access > Access level`，选中“Admin”。

我没有尝试 Linux 命令，因为 web GUI 更可靠。关于权限的[官方 GitLab 文档](https://docs.gitlab.com/ee/user/permissions.html)没有包含此设置，可能感觉很直观。

# javascript - Jquery 和 IE8 动画不透明度解决方案

> ID：11761401
> 
> 赞同：1
> 
> 时间：2012-08-01T14:25:25.547
> 
> 标签：javascript, jquery

我正在尝试使用 Jquery 为不透明度设置动画，它在每个浏览器中都可以正常工作，除了你猜它害怕**IE8**！
问题：在动画上我看到一些丑陋的工件:(
我知道我可以通过删除背景并将相同的背景颜色添加到我的动画 div 和我的容器 div 来解决这个问题，但在我的情况下这**不是**一个选项。
有人可以建议解决这个问题？我的代码：

```
$(document).ready(function() {
    $(".img").animate({
        opacity: 0
    });
    $(".glow").click(function() {
        $(".img").animate({
            opacity: 1
        }, 5000);
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:02:09.620

通过在我的 CSS 中添加 IE 过滤器，我已经部分解决了这个问题（**现在好多**了，没有黑晕了）。
迷失了一整天，所以我希望它能帮助比我更幸运的人:)

```
 .img{
 display:block;
 width:230px;
 height:300px;
 owerflow:hidden;
 position:relative;
 outline:none;

 /*Notice (ugly) IE filter here and Source to my PNG image */

 filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=http://www.robertpeic.com/glow/glow.png) alpha(opacity=0);
 background:none;
 margin:0px auto;
 padding-top:10px;

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:55:53.613

这就是您在 IE7 和 IE8 中更改具有 alpha 透明度的图像的不透明度时得到的结果。还有另一个关于[与 jQuery 相同的 IE GIF/PNG 透明度问题的问题](https://stackoverflow.com/questions/2634094/ie-gif-png-transparency-issue-with-jquery)

# c++ - 无法使用 openssl c++ 编译

> ID：11761405
> 
> 赞同：3
> 
> 时间：2012-08-01T14:25:42.520
> 
> 标签：c++, compilation, g++, openssl

我通过二进制文件安装了openssl，并且我在那个确切的位置有那个确切的文件。但是在编译时我遇到了这个错误。任何的想法？

```
g++ main.cpp -I /usr/local/openssl/include/openssl/ 
In file included from main.cpp:1:0:
main.h:4:25: fatal error: openssl/evp.h: No such file or directory
compilation terminated. 
```

* * *

更新：

下面的命令完成了这项工作，但我仍然面临错误。

```
g++ main.cpp -I/usr/local/openssl/include -L/usr/local/openssl/lib main.cpp -lcrypto

/usr/local/openssl/lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_globallookup':
dso_dlfcn.c:(.text+0x1d): undefined reference to `dlopen'
dso_dlfcn.c:(.text+0x33): undefined reference to `dlsym'
dso_dlfcn.c:(.text+0x3d): undefined reference to `dlclose' 
```

任何的想法？:(

* * *

解决方案 ：

```
g++ main.cpp -I/usr/local/openssl/include -L/usr/local/openssl/lib main.cpp -lcrypto -ldl 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:27:42.960

改成：

> g++ main.cpp -I /usr/local/openssl/include

因为 include 指令包含子目录的名称。

请注意，您必须添加要链接的 openssl 库。我不熟悉它，但类似`-lopenssl`并添加一个要搜索的目录以使用`-L`选项找到它。完整的命令将类似于（我猜测 openssl 的 lib 目录和库名称）：

> g++ main.cpp -I/usr/local/openssl/include -L/usr/local/openssl/lib main.cpp -lopenssl

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:27:41.183

-I 和路径之间没有空格。

# jax-ws - clientgen 生成的 webservices 客户端代码无法解析 wsdl

> ID：11761411
> 
> 赞同：0
> 
> 时间：2012-08-01T14:26:04.723
> 
> 标签：jax-ws, weblogic-10.x, webservices-client

我的要求是为用 SAP 编写的 web 服务创建一个 java 客户端，并且必须部署在 weblogic 中。以及将复杂类型作为输入参数的 Web 方法。

我已经使用 clientgen 创建了存根类。并编写了一个独立的客户端进行测试。

还在类路径 xmlbeans-1.0.jar wlfullclient.jar webserviceclient.jar webservice.jar 中添加了以下 jar

我没有将 wsdl url 提供给 Impl 对象，而是使用静态 wsdl。当我运行应用程序时，它给出了以下错误。使用相同的 wsdl 我正在创建客户端。

```
javax.xml.rpc.ServiceException: Failed to parse WSDL file:/C:/xxx-LPMS/trunk/build/classes/com/xxx/xxx/webservice/client/TestService_wsdl.wsdl weblogic.wsee.wsdl.WsdlException: Failed to read wsdl file from url due to -- java.io.IOException: Invalid index
        at weblogic.wsee.jaxrpc.ServiceImpl.throwServiceException(ServiceImpl.java:169)
        at weblogic.wsee.jaxrpc.ServiceImpl.loadWsdlDefinition(ServiceImpl.java:477)
        at weblogic.wsee.jaxrpc.ServiceImpl.<init>(ServiceImpl.java:114)
        at com.xxx.xxx.webservice.client.TestService_Impl.<init>(TestService_Impl.java:23)
        at com.xxx.xxx.webservice.client.TestService_Impl.<init>(TestService_Impl.java:13)
        at com.xxx.xxx.schnittstellen.util.StdQmCreateWSClientUtil.initServicePort(StdQmCreateWSClientUtil.java:77)
        at com.xxx.xxx.schnittstellen.util.StdQmCreateWSClientUtil.getStdQmCreateCrServiceport(StdQmCreateWSClientUtil.java:70)
        at com.xxx.xxx.schnittstellen.util.StdQmCreateWSClientUtil.StdQmCreateCr(StdQmCreateWSClientUtil.java:30)
        at com.xxx.xxx.schnittstellen.util.StdQmCreateWSClientUtil.main(StdQmCreateWSClientUtil.java:91)
    Caused by: weblogic.wsee.wsdl.WsdlException: Failed to read wsdl file from url due to -- java.io.IOException: Invalid index
        at weblogic.wsee.wsdl.WsdlReader.getDocument(WsdlReader.java:313)
        at weblogic.wsee.wsdl.WsdlDefinitions.parse(WsdlDefinitions.java:402)
        at weblogic.wsee.wsdl.WsdlDefinitions.parse(WsdlDefinitions.java:388)
        at weblogic.wsee.wsdl.WsdlFactory.parse(WsdlFactory.java:78)
        at weblogic.wsee.wsdl.WsdlFactory.parse(WsdlFactory.java:65)
        at weblogic.wsee.jaxrpc.ServiceImpl.loadWsdlDefinition(ServiceImpl.java:468)
        ... 7 more
    Caused by: java.io.IOException: Invalid index
        at weblogic.xml.domimpl.Loader.load(Loader.java:38)
        at weblogic.wsee.util.dom.DOMParser.getWebLogicDocumentImpl(DOMParser.java:168)
        at weblogic.wsee.util.dom.DOMParser.getDocument(DOMParser.java:58)
        at weblogic.wsee.wsdl.WsdlReader.getDocument(WsdlReader.java:311)
        ... 12 more
    Caused by: javax.xml.stream.XMLStreamException: Invalid index
        at weblogic.xml.stax.XMLStreamReaderBase.prime(XMLStreamReaderBase.java:80)
        at weblogic.xml.stax.XMLStreamReaderBase.setInput(XMLStreamReaderBase.java:103)
        at weblogic.xml.stax.RecyclingFactory.createXMLStreamReader(RecyclingFactory.java:35)
        at weblogic.xml.stax.XMLStreamInputFactory.createXMLStreamReader(XMLStreamInputFactory.java:49)
        at weblogic.xml.domimpl.Loader.createXMLStreamReader(Loader.java:60)
        at weblogic.xml.domimpl.Loader.load(Loader.java:34)
        ... 15 more
    Caused by: sun.misc.InvalidJarIndexException: Invalid index
        at sun.misc.URLClassPath$JarLoader.getResource(URLClassPath.java:766)
        at sun.misc.URLClassPath$JarLoader.getResource(URLClassPath.java:679)
        at sun.misc.URLClassPath.getResource(URLClassPath.java:158)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:192)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:268)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
        at weblogic.xml.babel.scanner.ScannerState.<init>(ScannerState.java:86)
        at weblogic.xml.babel.scanner.Scanner.<init>(Scanner.java:75)
        at weblogic.xml.babel.baseparser.BaseParser.baseScanner(BaseParser.java:172)
        at weblogic.xml.babel.baseparser.BaseParser.createScanner(BaseParser.java:164)
        at weblogic.xml.babel.baseparser.BaseParser.init(BaseParser.java:213)
        at weblogic.xml.babel.baseparser.BaseParser.<init>(BaseParser.java:84)
        at weblogic.xml.stax.XMLStreamReaderBase.prime(XMLStreamReaderBase.java:56)
        ... 20 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:04:02.907

我正在看一些模糊相似的东西。在我的例子中，连接到 ClassLoader 的东西正在构建一个看起来像你的无效 URL。具体来说，`file:/C:/blah/blah/blah`是不正确的语法；应该是`file:///C:/blah/blah/blah`。[资源](http://blogs.msdn.com/b/ie/archive/2006/12/06/file-uris-in-windows.aspx)

我很好奇您是否以与我相关的方式解决了您的问题。

# android - 如何使用适配器类在 ListView 中制作 ProgressBar？

> ID：11761412
> 
> 赞同：0
> 
> 时间：2012-08-01T14:26:08.447
> 
> 标签：android, android-widget, android-listview

我曾尝试使用`ProgressBar`in `ListView`，我曾使用适配器类来显示文本和`ProgressBar`in `ListView`，但我无法得到它。

```
public class ProgressBarActivity extends Activity {

    EditText edtTxt;
    Button btn;
    ListView lstExample;
    String txt;
    progressAdapter adapter;
    ArrayList<String> adap;

    protected void onCreate(Bundle icicle)
    {
        super.onCreate(icicle);

        setContentView(R.layout.main);

        edtTxt=(EditText) findViewById(R.id.edtText);
        btn=(Button) findViewById(R.id.btn);
        adap=new ArrayList<String>();
        lstExample=(ListView) findViewById(R.id.listView1);
             btn.setOnClickListener(new OnClickListener() 
             {

                @Override
                public void onClick(View arg0) 
                {
                    txt=edtTxt.getText().toString();
                    if(txt.equals(""))
                    {
                        Toast.makeText(getApplicationContext(), "Enter the text", Toast.LENGTH_LONG).show();
                    }
                    else
                    {
                        adap.add(txt);
                        String[] arr=adap.toArray(new String[adap.size()]);
                        adapter=new progressAdapter(ProgressBarActivity.this, arr);
                        lstExample.setAdapter(adapter);
                    }
                }
            });      

    } 
```

这是我的适配器类：

```
public class progressAdapter extends BaseAdapter
{
    public  Activity activity;
    String[] str;
    String comment;
    LayoutInflater inflater=null;
    int progressBarStatus=0;
    private Handler progressBarHandler = new Handler();
    TextView t1;

    public progressAdapter(ProgressBarActivity sam,String[] txt) 
    {
        activity=sam;
        str=txt;

        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() 
    {
        // TODO Auto-generated method stub
        return str.length;
    }

    @Override
    public Object getItem(int postion) 
    {
        // TODO Auto-generated method stub
        return postion;
    }

    @Override
    public long getItemId(int position) 
    {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView( int position,  View convertView, ViewGroup parent) 
    {
        View  vi=convertView;
            if(convertView==null)
                vi = inflater.inflate(R.layout.progress,null);
            t1=(TextView)vi.findViewById(R.id.textView1);
            final ProgressBar pro=(ProgressBar)vi.findViewById(R.id.progressBar1);

            comment=str[position];
            pro.setVisibility(vi.VISIBLE);

            t1.setText(comment);

        return vi;
    }
} 
```

它正在运行，但它在所有`ListView`.

# regex - Apache将单词重写为小写

> ID：11761419
> 
> 赞同：2
> 
> 时间：2012-08-01T14:26:20.823
> 
> 标签：regex, apache, mod-rewrite, url-rewriting, rewrite

如果一个特定的单词中有一个大写字母，我需要将它重写为小写，但如果它完全是小写则不需要（如果它匹配它会导致无限循环）。

我想出了这个，但对它为什么不起作用感到困惑：

```
# /MaTcHeD to matched
RewriteCond %{REQUEST_URI} ^(?i)matched(\/.*)?$
RewriteRule ^[a-z]*[A-Z]+[^\/]*(\/.*)?$ /matched$1 [R=301,L] 
```

对我来说，这表示如果 url 是“matched”或“Matched”或“mAtched”或“MAtched”等，那么如果在 url 的开头有任何小写字符 ([az]) 后跟任何一个或多个大写字母，则匹配字符 ([AZ]) 后跟任何非“/”字符，然后是 url 的其余部分（可选的“/”后跟其他任何字符）。如果这些条件为真，则重定向到小写的“/matched”。

我浏览并看到了许多匹配任何单词的解决方案，但这会导致问题，因为其他东西都是大写的。在任何情况下我都只需要“匹配”，但所有小写都需要重定向到所有小写“匹配”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:39:01.610

你可以做一些检查来解决这个问题，首先检查它根本不是小写的：

```
RewriteCond %{REQUEST_URI} !^(.*)/matched(.*)$ 
```

`[NC]`然后检查如果使用标志忽略大小写是否相同：

```
RewriteRule ^(.*)/matched(.*)$ /$1/matched$2 [R=301,L,NC] 
```

至此，你知道不区分大小写，`matched`匹配，但不是全小写，所以可以重定向到全小写。

* * *

> 我正在使用当前在 htaccess 级别的匹配，所以我不需要初始的“（。*）/”。使用它是行不通的。“匹配”是域之后的第一个路径部分

那么试试这个：

```
RewriteCond %{REQUEST_URI} !^/matched(.*)$
RewriteRule ^matched(.*)$ /matched$1 [R=301,L,NC] 
```

问题是该`%{REQUEST_URI}`变量*确实*有一个前导斜杠，但用于匹配的 URI`RewriteRule` *没有*一个（见图）。

# cakephp - 设置输入字段 Cakephp 的最小值

> ID：11761421
> 
> 赞同：1
> 
> 时间：2012-08-01T14:26:26.627
> 
> 标签：cakephp, input, minimum

如何为 type=>number 的输入表单字段设置最小值。我有一个计数字段，应该将 MINIMUM 值设置为 0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T14:32:44.940

在您的选项数组上，设置 "min" => "0"

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T14:33:36.860

您是否尝试过指定最小值和最大值，如[规范](http://www.w3.org/TR/html-markup/input.number.html)中所述？

```
echo $this->Form->input('name', array(
  'type' => 'number',
  'min' => 5
)); 
```

# php - 关于 404 不要去任何地方（PHP）

> ID：11761422
> 
> 赞同：1
> 
> 时间：2012-08-01T14:26:27.123
> 
> 标签：php, .htaccess, redirect, errordocument

我正在用 PHP 创建一个应用程序。我想做的一件事是，如果用户在 www.example.com/app/rrr.php 中键入 app 是我的应用程序的主目录并且 rrr.php 不存在，那么程序不存在去任何地方或使用 .htaccess 中的 ErrorDocuments 重定向回上一页。到目前为止，我能够做到这一点的唯一方法是将其添加到我的 .htaccess 中：

```
ErrorDocument 404 C:\Users\Chris\Desktop\wamp\www\Master\errorcode.php 
```

当我尝试访问一个不存在的页面（通过在地址区域中键入）时，程序不会尝试访问它。在一个确实存在的页面上（如果我输入我制作的 php 文件），程序会正常前进。我的问题是我怀疑这是否适用于自己安装它的用户，我想知道是否有人知道如何让每个人都可以使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:43:06.563

无法完全理解你的问题，但我认为是，

您应该将用户引导到 404 页面，在那里您将检查是否有任何引用者，然后提供一个链接以及 404 页面之类的东西`You might want to go back`，如果没有引用者，则只显示 404 页面。

# c# - Kinect 紫外线映射

> ID：11761423
> 
> 赞同：1
> 
> 时间：2012-08-01T14:26:30.327
> 
> 标签：c#, kinect, uv-mapping

对于一个项目，我需要从 Kinect 获取点云的 UV 贴图。Kinect SDK 中是否有一些功能允许我们这样做？如果没有，是否还有其他项目包含此功能？如果已经完成，我宁愿不要重新发明轮子并为此编写自己的代码。

（PS - 这必须是完全自动化的，所以我们不能使用 Blender 之类的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T00:35:43.800

AFAIK Kinect SDK 中没有任何内容可以执行此操作。

但是，点云库 (PCL) 中有执行此操作的代码，您可以在此处找到：http: [//pointclouds.org/](http://pointclouds.org/)

具体来说，我会看看[http://www.pointclouds.org/documentation/tutorials/normal_estimation.php](http://www.pointclouds.org/documentation/tutorials/normal_estimation.php)

# javascript - 将对象转换为 JSON，省略某些（私有）属性

> ID：11761424
> 
> 赞同：2
> 
> 时间：2012-08-01T14:26:34.263
> 
> 标签：javascript, json

我一直在使用 dean edwards base.js (http://dean.edwards.name/weblog/2006/03/base/) 将我的程序组织成对象（顺便说一句，base.js 很棒，如果你以前没有使用过的话！）。无论如何，我的问题是通用的，您不必知道 base.js 就可以知道我的答案。

我在一个名为的对象中有一个属性，`ref`它是对 DOM 元素的引用，并且该对象旨在使用 保存为 JSON `JSON.stringify`，但正如您可以想象的那样，由于 DOM 元素是循环结构，我将无法将对象转换为 JSON。

现在为了解决这个问题，我有一个名为的方法`html()`，该方法旨在返回`ref`属性，但我需要将其`ref`作为私有属性，该属性只能从对象内部访问，因此不会被发送到`stringify`.

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:42:34.260

你可能知道在 JavaScript 中不能有私有属性。

有趣的是，如果您传递一个`JSON.stringify`具有方法的对象`toJSON`，`JSON.stringify`将自动调用该方法以获取该对象的 JSONable 表示。所以你所要做的就是实现这个方法。

例如，您可以创建仅包含要复制的属性的对象的浅表副本：

```
MyConstructor.prototype.toJSON = function() {
    var copy = {},
        exclude = {ref: 1};
    for (var prop in this) {
        if (!exclude[prop]) {
            copy[prop] = this[prop];
        }
    }
    return copy;
}; 
```

[**演示**](http://jsfiddle.net/SRa9p/)

另一种方法是[使用自定义替换函数](https://developer.mozilla.org/En/Using_native_JSON#The_replacer_parameter)，但可能更难以控制`ref`排除哪个以及保留哪个（如果不同的对象具有`ref`属性）：

```
JSON.stringify(someInstance, function(key, value) {
     if(key !== 'ref') {
         return value;
     }
}); 
```

[**演示**](http://jsfiddle.net/SRa9p/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:34:48.343

这是设置变量可见性的示例

```
function Obj(){
       this.ref = 'public property'; // this property is public from within the object

       var ref = 'private proerty'; // this property is private.

       var self = this;

        this.showRef = function(){
            alert(ref);
            alert(self.ref);
        };
    }

var obj = new Obj();
obj.showRef(); 
```

# php - 每天使用 mySQL 获取新的表数据

> ID：11761425
> 
> 赞同：3
> 
> 时间：2012-08-01T14:26:37.993
> 
> 标签：php, mysql

我正在开发的网站提供了一项服务，只有会员才能完全访问内容。我正在尝试在主页上创建一个“样本”，每天获取新的 mysql 数据（通常仅对会员可用），并为所有用户提供网站必须提供的“免费样本”。

该数据库包含一千多个条目，我想找到一种方法来每天从数据库中获取新的 mysql 数据。

假设我的数据库如下所示：

```
id    cars
1     honda
2     volvo
3     ford
4     audi 
```

我希望“今天的汽车”是 24 小时的“本田”，然后是 24 小时的“福特”，然后是 24 小时的“奥迪”，等等......

这就是我到目前为止所拥有的：

```
<?php 
    //Create mysql connect variable
    $conn = mysql_connect('server', 'username', 'password');
    //kill connection if error occurs
    if(!$conn){
        die('Error: Unable to connect. <br/>' . mysql_error());
    }
    //connect to mysql database
    mysql_select_db("masdswe9", $conn);

    $results = mysql_query("SELECT * FROM cars");

    $name_array = Array();

    while($row = mysql_fetch_array($results)){
        $name_array[] = $row['name'];
    }
    shuffle($name_array);

   /* I would like for this to fetch NEW SQL data every 24 hours, 
   since I am shuffling names above, slot 0 will be different once I 
   come up with a way to fetch new mysql data every 24 hours */
    echo $name_array[0];
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:18:49.983

@Explosion Pills 为您的未来提供了一个很好的解决方案。在你的未来，一些汽车公司会付给你一大笔钱，让他们的产品成为你今天的汽车。

现在，假设您只想浏览您的汽车清单，然后让每一辆都成为当天的汽车。假设您的 ID 值全部存在，没有间隙，从 1 开始。

然后：

```
SELECT id, car
  FROM cars
 WHERE id >= 1+MOD(TO_DAYS(CURDATE()),(SELECT MAX(ID) FROM cars)+1)
 ORDER BY ID
 LIMIT 1 
```

每天都会从您桌子上的所有汽车中按 id 顺序为您提供一辆新车。

这里的诀窍是这个表达式：`1+MOD(TO_DAYS(CURDATE()),(SELECT MAX(ID) FROM cars)+1)`

它基本上是这样做的：

1.  将今天的日期变成一个数字
2.  从表中计算最大 ID 号
3.  取今天的日期模数
4.  查找具有该 ID 的行。

有一些猴子业务，`1+`因为`-1`模运算的工作原理是 0 - n-1 而不是 1 - n。

请注意，我使用`>=`and`LIMIT 1`而不是简单的`=`，因此如果您碰巧在 id 序列中出现间隙，您的查询不会在随机的一天崩溃。

***编辑***这假设你的表被称为“汽车”，它有列`id`和`car`。如果不是这样，您需要相应地更改查询。最好在编程之前尝试在 phpmyadmin 之类的 SQL 客户端中调试这些东西。我确实在我自己的一些虚拟数据上对此进行了测试。

[http://sqlfiddle.com/#!2/eb1bb/1/0](http://sqlfiddle.com/#!2/eb1bb/1/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T14:32:04.057

我将创建一个名为的数据库表`CarOfTheDay`，您可以从中进行选择（它只会在`Cars`表中包含汽车的 ID）。或者你可以有一个专栏`carOfTheDay`，或者改变汽车的顺序，但我认为这些更具侵入性。

创建一个每天运行一次的 cron，并将随机汽车写入`CarOfTheDay`. 然后，你可以做你在上面做的事情，但你不必担心时间，你只会选择一辆车：

```
SELECT
   cars
FROM
   CarOfTheDay
   JOIN Cars USING (id)
LIMIT 1 
```

如果`LIMIT`你坚持一个 应该没有必要`CarOfTheDay`。

顺便说一句，使用`PDO`or`mysqli`而不是`mysql_*`. 只选择您需要的列（不要`SELECT *`在生产代码中使用）......并且只选择您需要的行（您可以在查询中随机化）。

# iphone - iOS如何管理照片

> ID：11761426
> 
> 赞同：-1
> 
> 时间：2012-08-01T14:26:37.763
> 
> 标签：iphone, objective-c, ios, image, tableview

我正在创建一个适用于照片的 iOS 应用程序。

我已经构建了在 Android 上执行类似操作的应用程序，并且知道图像在存储和内存管理方面可能带来的一些痛苦。

以下是我的问题：

*   如何保存我拍摄的照片以及将其保存到哪里（以某种方式将其与核心数据一起保存是否明智？）？
*   如何从保存图片的位置加载图片？
*   对于带有图像的表格视图，我是否需要某种形式的延迟加载（您在 Android 上需要），如果需要，有人可以推荐教程或库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:51:22.263

*   如何保存我拍摄的照片以及将其保存到哪里（以某种方式将其与核心数据一起保存是否明智？）？

使用系统 imagepicker/taker`UIImagePickerController`并且不要在 CoreData 中存储图像。作为一般规则，将它们存储在系统照片库中。将资产库 URL 存储为参考。

图像也可以存储在您的 App 文档文件夹中。

*   如何从保存图片的位置加载图片？

使用`AssetsLibrary`框架中的 API 从系统存储中检索图片。

*   对于带有图像的表格视图，我是否需要某种形式的延迟加载（您在 Android 上需要），如果需要，有人可以推荐教程或库吗？

不会。延迟加载由您的`UITableViewController`实现免费完成。网上有 1001 个很棒的 UITableView 教程。

# c++ - 提升 asio 多播重新加入组

> ID：11761429
> 
> 赞同：1
> 
> 时间：2012-08-01T14:26:49.977
> 
> 标签：c++, visual-studio-2008, boost, boost-asio

我已经实现了一组成功运行的多播阅读器，但在一天中，它们中的一个或多个会周期性地随机丢失 2 分钟的数据块。我的工作理论是路由器的定期报告请求丢失或主机报告丢失。所以我想在某个时间间隔内抢先向路由器发送报告。所以问题是我该怎么做？我在 boost:asio 中没有看到用于多播的重新加入方法。任何想法将不胜感激。

```
// code snippet from the constructor method
// 
boost::asio::ip::udp::endpoint listen_endpoint(listen_address, mcPort);
socket_.open(listen_endpoint.protocol());
socket_.set_option(boost::asio::ip::udp::socket::reuse_address(true));
socket_.bind(listen_endpoint);

boost::asio::socket_base::receive_buffer_size option(65536*16);                    
socket_.set_option(option);
//
// Join the multicast group.
//    
socket_.set_option(boost::asio::ip::multicast::join_group(multicast_address));

m_TimerRejoinGroup.expires_from_now(boost::posix_time::seconds(10));
m_TimerRejoinGroup.async_wait(boost::bind(&Feed::handleRejoin, this)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:06:25.643

在回答您的直接问题时，没有重新加入选项，但您可以离开并再次加入

```
socket_.set_option(boost::asio::ip::multicast::leave_group(multicast_address));
socket_.set_option(boost::asio::ip::multicast::join_group(multicast_address)); 
```

# wordpress - wordpress中的帖子类型类别

> ID：11761430
> 
> 赞同：0
> 
> 时间：2012-08-01T14:26:50.197
> 
> 标签：wordpress

我的 wordpress 页面中有 post_type = 投资组合，通过这段代码，我得到了每个帖子的类别：

```
$terms = get_the_terms( $post->ID, 'portfolio_category' );

foreach ( $terms as $term ) {
    $draught_links[] = $term->name;
}

$on_draught = join( ", ", $draught_links ); 
```

但它不能正常工作。它显示当前帖子的类别以及之前所有帖子的类别。如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T08:25:47.357

将此代码用于特定类别

```
<?php
global $post;
$args = array( 'numberposts' => 5, 'category' => 3 );

$myposts = get_posts( $args );
foreach( $myposts as $post ) :
setup_postdata($post); ?>

<?php the_title(); ?>
<?php the_content(); ?> 
```

更改帖子数量和类别 ID....

# c# - 无法在 ApiController 上设置自定义 XML 反序列化器

> ID：11761432
> 
> 赞同：2
> 
> 时间：2012-08-01T14:26:54.973
> 
> 标签：c#, xml, binding, asp.net-mvc-4, xmlserializer

我有一个模型类，我试图从 XML 反序列化。该类用 C# 属性装饰：

```
public class Model
{
    [XmlAttribute("id")]
    public int id { get; set; }

    public DateTime time_log { get; set; }
} 
```

我有一个带动作的 ApiController：

```
public void Post(Model m)
{
    // m.time_log has correct value.
    // m.id always gets default value of 0.
} 
```

并提供以下输入：

```
<?xml version="1.0"?>
<asset id="100">
  <time_log>30 July 2012</time_log>
</asset> 
```

发生的事情（在`Post()`动作内部）`m.time_log`是绑定到正确的`DateTime`值，但`id`获得其默认值 0。

似乎 MVC API 平台不使用 XmlSerializer 来绑定`m`参数...，所以它不会以我期望的方式反序列化，这很好，但我似乎无法找到一种方法来告诉它这样做。

到目前为止，我已经尝试过（在 Global.asax.cs#Application_Start 中）：

1.  `GlobalConfiguration.Configuration.Formatters.XmlFormatter.SetSerializer<Asset>(new XmlSerializer(typeof(Asset)));`
2.  `GlobalConfiguration.Configuration.Formatters.Insert(0, new XmlFormatter());`
3.  `ModelBinderProviders.BinderProviders.Add(new XmlModelBinderProvider());`

... where`XmlFormatter`和是用于反序列化请求正文`XmlModelBindingProvider`的自定义实现。`XmlSerializer`

我在这里错过了一些非常明显的东西吗？如何强制 ApiController 让我指定我自己的反序列化 XML 的方式？

# javascript - 如何克隆带有输入和文本区域的表格？

> ID：11761433
> 
> 赞同：0
> 
> 时间：2012-08-01T14:26:55.963
> 
> 标签：javascript, jquery

下面给出的代码显示，每当单击新按钮时，都会执行此代码并克隆 .table_product_list 表的第一行，但它只会增加输入框的 ID 和名称

如何调整此代码以添加文本区域？

```
 var i=1;
    $(".table_product_list tr:first").clone().find("input").each(function() {
        $(this).attr({
         'id': function(_, id) { return id + i },
         'name': function(_, name) { return name + i },
         'value': ''               
        });
    }).end().appendTo(".table_product_list");
    i++; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T06:33:06.717

这是一个[JSfiddle 示例](http://jsfiddle.net/leslieCS/CKRPG/)，展示了我实现克隆`TR`s 的方式，其中可以在任何表行上执行它们的添加和删除操作。

希望有帮助！

# jquery - 如何改进以下语法？

> ID：11761436
> 
> 赞同：1
> 
> 时间：2012-08-01T14:27:03.880
> 
> 标签：jquery, parsing, bison, flex-lexer

我试图找出我在下面的代码中出错的地方。

弹性输入：

```
%{
        #include "jq.tab.h"
        void yyerror(char *);
%}
method          add|map|.. and other methods go here

%%

"/*"            { return CS; }

"*/"            { return CE; }

"jQuery"        {
                printf("%s is yytext\n", yytext);
                return *yytext;
                }

"args"          { return ARGUMENT; }

{method}        { return METHOD; }

[().\n]         { return *yytext; }

[ \t]+          { return WS; }

.               { return IGNORE; }

%%

int yywrap(void) {
        return 1;
} 
```

野牛输入：

```
%{
        #include <stdio.h>
        int yylex(void);
        void yyerror(char *);
%}

%token ARGUMENT METHOD IGNORE WS CS CE
%error-verbose

%%

stmts:
        stmt '\n'               { printf("A single stmt\n"); }
        | stmt '\n' stmts       { printf("Multi stmts\n"); }
        ;

stmt:
        jQuerycall                      { printf("A complete call ends here\n"); }
        | ignorechars                   { printf("Ignoring\n"); }
        | ignorechars WS jQuerycall     { printf("ignore+js\n"); }
        | jQuerycall WS ignorechars     { printf("js+ignore\n"); }
        | optionalws stmt optionalws
        | CS stmt CE                    { printf("comment\n"); }
        ;

jQuerycall:
        'jQuery' '(' ARGUMENT ')' '.' methodchain       { printf("args n methodchain\n"); }
        | 'jQuery' '(' ')' '.' methodchain              { printf("methodchain\n"); }
        | 'jQuery' '(' ARGUMENT ')'                     { printf("args\n"); }
        | 'jQuery' '(' ')'                              { printf("empty call\n"); }
        ;

methodchain:
        methodchain '.' methodcall
        | methodcall
        ;

methodcall:
        METHOD '(' ')'
        ;

ignorechars:
        IGNORE
        | IGNORE optionalws ignorechars
        ;

optionalws:
        | WS
        ;

%%

void yyerror(char *s) {
        fprintf(stderr, "%s\n", s);
}

int main(void) {
        yyparse();
        return 0;
} 
```

我的目标是识别任何 jQuery 调用及其所有元素，并忽略任何其他语句/字符串。也忽略评论。现在，这段代码做了很多假设——比如 'args' 是 jQuery() 中唯一的选择器元素。

## 编辑

我正在使用以下输入输出案例。像 10 和 12 这样的案例是我想要弄清楚的：

```
> 1.input: statement\n output: Ignoring
> 
> 2.input: statement statement\n output: Ignoring
> 
> 3.input: statement statement statement\n output: Ignoring
> 
> 4.input: jQuery()\n output: jQuery is yytext empty call A complete call ends here
> 
> 5.input: jQuery(args)\n output: jQuery is yytext args A complete call ends here
> 
> 6.input: jQuery().add()\n output: jQuery is yytext methodchain A complete call ends here
> 
> 7.input: jQuery(args).add().map()\n output: jQuery is yytext args n methodchain A complete call ends here
> 
> 8.input: /*comment*/\n output: Ignoring comment
> 
> 9.input: /*jQuery()*/\n output: jQuery is yytext empty call A complete call ends here comment
> 
> 10.input: /* comment */\n output: syntax error, unexpected CE, expecting IGNORE
> 
> 11.input: var a = b\n output: Ignoring
> 
> 12.input: var a = jQuery(args)\n output: jQuery is yytext syntax error, unexpected 'jQuery', expecting IGNORE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:47:21.440

在您的 lex 文件中，规则：

```
"jQuery"        {
                printf("%s is yytext\n", yytext);
                return *yytext;
                } 
```

`'j'`当它看到 jQuery 的输入字符串时返回令牌。由于您的野牛文件从不对令牌做任何事情，`'j'`这通常会给您一个语法错误。

您需要添加`JQUERY`到您的`%token`声明中并让此 lex 规则返回。

**编辑**

通常，注释可以出现在程序的任何位置（在任何两个其他标记之间）并且完全被忽略。所以处理它们的最简单方法是在词法分析器中：

```
%x comment
%%
"/*"           { BEGIN comment; }
<comment>.     ;
<comment>"*/"  { BEGIN 0; } 
```

这将跳过注释（根本不返回任何标记），因此语法不需要担心它们。如果您不想使用词法分析器启动状态，则可以改用复杂的正则表达式：

```
"/*"([^*]|\*+[^*/])*\*+"/"          ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:18:42.957

我想我可以给你一个解决案例 10 的修复程序，但还有一个更深层次的问题。

由于案例 8 为您提供了您期望的结果，我推断输入

```
/*comment*/ 
```

得到骄傲的认可

```
stmt: CS stmt CE 
```

也就是说，字符串“comment”被识别为`stmt`. 但是，当您在两者之间添加空格`CS`并且`stmt`解析失败时，您的情况就是 10。您可以通过将您的产品重写为

```
stmt: CS optionalws stmt optionalws CE 
```

但更深层次的问题是您的解析器无法识别其他注释，例如

```
/* This is a remarkable remark, isn't it? */ 
```

和

```
/**
 * This is a multi-line comment.
 */ 
```

# javascript - MVC 3 .NET 动态填充字段

> ID：11761440
> 
> 赞同：1
> 
> 时间：2012-08-01T14:27:12.640
> 
> 标签：javascript, .net, asp.net-mvc-3, view

我有一个邮政编码字段。我希望，当此人用邮政编码填写此字段并单击另一个字段时，会触发一个事件（onBlur）。此事件将在数据库中执行选择并获取地址并使用此信息填充其他字段。我读到从视图中执行控制器方法不是一个好主意。那么，我该如何开发呢？

我的邮政编码字段：

```
<div class="editor-field">
    @Html.Label("ZIP CODE")
    @Html.Editor("zipCodeClient")
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:42:12.300

如果您可以访问 jQuery，我会使用它的 ajax 函数来调用 wcf Web 服务，该服务以 JSON 格式返回相关地址信息。否则，您可以创建自己的 XHR 请求并解析响应。

```
$('#zipCodeClient').blur(function() {
    var zipCode = $(this).val();
    if(zipCode.length >= 5 && zipCode.length <= 10) {
        $.ajax({
            type: 'GET',
            data: { ZipCode: zipCode },
            url: 'something/ZipCodeToAddressService',
            dataType: 'json',
            contentType:  'application/json; charset=utf-8',
            success: function(data) {
               var responseObject = jQuery.parseJSON(data);
               $('#cityTextBox').val(responseObject.City);
               $('#stateTextBox').val(responseObject.State);
            }
        });
    }
    else {
        // zip code not valid
    }
}); 
```

在 WCF 中：

```
[ServiceContract()]
public interface IAddressServices
{
    [OperationContract()]
    [WebGet(ResponseFormat = WebMessageFormat.Json)]
    string ZipCodeToAddressService(string ZipCode);
}

[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall, ConcurrencyMode = ConcurrencyMode.Multiple)]
public class AddressServices : IAddressServices
{
    public string ZipCodeToAddressService(string ZipCode)
    {
        using (SqlConnection sqlConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["DB"].ConnectionString))
        {
            using (SqlCommand sqlCmd = new SqlCommand("ZipCodeToAddressStoredProc", sqlConnection))
            {
                sqlCmd.CommandType = CommandType.StoredProcedure;
                sqlCmd.Parameters.Add("@Zip", SqlDbType.NVarChar).Value = ZipCode;
                sqlConnection.Open();
                SqlDataReader sDR = sqlCmd.ExecuteReader(CommandBehavior.CloseConnection);
                DataTable tbl = new DataTable();
                tbl.Load(sDR);
                sDR.Close();
                var citystateData = from DataRow Row in tbl.AsEnumerable()
                                   select new
                                   {
                                      City = Row.Field<string>("City"),
                                      State = Row.Field<string>("State")
                                   };
                JavaScriptSerializer js = new JavaScriptSerializer();
                StringBuilder sb = new StringBuilder();
                js.Serialize(cityStateData, sb);
                string rtrnCityStateData = sb.ToString();
                return rtrnCityStateData;
            }
        }
    }
} 
```

# jquery - IE中的jquery ui对话框.load和空白对话框

> ID：11761449
> 
> 赞同：0
> 
> 时间：2012-08-01T14:27:47.263
> 
> 标签：jquery, internet-explorer, jquery-ui-dialog

我有几张被 a-tags 包围的图片，当你点击它们时，a-tag 的链接应该在一个对话框中打开，什么工作正常，除了在 IE8 中（IE9 工作正常）......

```
$('a.modal').each(function() {
    var $link = $(this);

    $link.click(function() {

       var $dialog = $('<div></div>')
        .load($link.attr('href') + ' #content')
        .dialog({
            autoOpen: false,
            modal:true,
            width: 762
        });

        $dialog.dialog('open');
        return false;
    });

}); 
```

控制台中没有可见的错误。有人可能有一个想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:54:07.487

最后，它与错误的 javascript 代码无关，而是与 ie 的无用性及其解析 url 的能力无关，因此它与起始页和原始形式的 url 一起工作，但与转换后的永久链接无关，改变了整个ajax 的帮助：

```
 $('a.modal').click(function() {

        $.ajax({url: $(this).attr('href')})
        .done(function( html ) {
            var $dialog = $('<div></div>')
            .html(html)
            .dialog({
                autoOpen: true,
                modal:true,
                width: 762
            })
        });
        return false;
    }); 
```

# gnuplot - 绘制一条平均曲线的直线

> ID：11761450
> 
> 赞同：4
> 
> 时间：2012-08-01T14:27:55.283
> 
> 标签：gnuplot, octave

我想画一条直线，使曲线的平均值。我正在绘制这样的数据：

```
plot 'dataset' u 2:4 w p smooth bezier 
```

我的数据由多列组成，我会得到类似的东西：![在此处输入图像描述](../Images/39dfcd5eb6b6223670e57c659f45f70d.png)

关于如何做的任何想法？我想这更像是一个插值而不是平均值。曲线的起伏无关紧要，用直线插值曲线会好得多......

使用直线可能或多或少容易拟合，`fit`但是，我如何拟合看起来不像众所周知的曲线的曲线？让我给你举个例子？如何在主要点组中拟合平滑曲线？请注意，图表的下部有一些我不想表示的噪音。 ![在此处输入图像描述](../Images/6dfbc2789ee6994e1cfb98e15da994e6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:58:40.520

如果你想对你的数据做一些基本的统计，gnuplot 有一个内置的命令[`stats`](http://www.gnuplot.info/demo/stats.html)可以做你想做的事。Gnuplot 在绘图后提供了一些内部变量，其中包含有关最小值、最大值等的数据。要查看这些是什么，请`show variables all`在绘制数据后键入。

否则，如果您想将数据拟合到一行，gnuplot 也会这样做：

```
f(x) = a*x + b
fit f(x) 'data.dat' using 2:4 via a,b
plot 'data.dat' using 2:4, f(x) 
```

# android - Android：FragmentActivity里面的FragmentActivity（NavigationBar中的ScrollView）

> ID：11761454
> 
> 赞同：1
> 
> 时间：2012-08-01T14:28:21.607
> 
> 标签：android, fragment, swipe

我有一个 FragmentActivity 可以通过 ViewPager 浏览多个片段，还有一个 FragmentActivity 托管一个用于导航的 ActionBar。

现在我想将带有 ViewPager 的 FragmentActivity 嵌套在另一个 FragmentActivity 的第一个片段中，该片段承载了 ActionBar。

换句话说，我喜欢有一个 ActionBar 导航，并且在它的第一个选项卡中，我希望有可滑动的片段。

我的问题是如何将一个 FragmentActivity 嵌套在另一个 FragmentActivity 中。两者都单独工作，但我不让他们一起工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T05:32:57.050

[在 Fragment 级别与 ViewPager 一起应用的滑动手势，默认滑动禁用](https://stackoverflow.com/questions/18821775/swipe-gesture-applied-at-fragment-level-along-with-viewpager-with-its-default-s/19020100#19020100)

您可以为视图寻呼机中的片段编写自己的触摸拦截器。

但是，在第二个意见中，请在问题中查看我的 moqup：

您可以拥有多个 ViewGroup 容器，最好是 FrameLayout，您可以在每个容器上使用事务添加或删除片段。导航面板的容器与 ViewPager 显示的位置不同：

将此 ViewPager 保存在一个单独的片段中，该片段在另一个 FrameLayout 中产生。在此处的 ViewPager 中，您不应使用 FragmentPageAdapter，而应使用常规 PagerAdapter（避免嵌套片段）。因此 ViewPager 是视图的父容器，而不是显示它们的片段。

导航抽屉的目标（在单击项目时）将是第二个 FrameLayout。把事情简单化！！

同样，您可以在基于选项卡的 ViewPager 的第一个选项卡中使用这个新找到的信息来拥有一个 ViewPager。

# android - 对话框布局问题

> ID：11761456
> 
> 赞同：0
> 
> 时间：2012-08-01T14:28:23.263
> 
> 标签：android, dialog, android-linearlayout

![在此处输入图像描述](../Images/2d6bbd1620a9ed5d237ade337b403091.png)

我的自定义对话框看起来不正确。Android 削减了我的按钮。

我使用下一个布局来显示此对话框：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:minWidth="280dp"
android:orientation="vertical"
android:padding="10dp">

<FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/dialog_top"
    android:padding="0dp" >

    <TextView
        android:id="@+id/title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_margin="5dp"
        android:ellipsize="end"
        android:gravity="center"
        android:maxLines="1"
        android:text="Title"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@android:color/white" />

</FrameLayout>

<FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginTop="-2dp"
    android:background="@drawable/dialog_bottom"
    android:padding="0dp" >

    <LinearLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center" 
        android:orientation="vertical">

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginBottom="10dp"
            android:text="Do you really want to close program?" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/yes"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="10dp"
                android:background="@drawable/btn_orange_normal"
                android:minWidth="100dp"
                android:text="@string/yes" />

            <Button
                android:id="@+id/no"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:background="@drawable/btn_lightgray_normal"
                android:minWidth="100dp"
                android:text="@string/no" />

        </LinearLayout>

    </LinearLayout>

</FrameLayout> 
```

要显示我的自定义对话框，我使用下一个代码：

```
 public CustomxDialog(Context context)
{
    super(context, R.style.My_Dialog);

    root = (LinearLayout) LayoutInflater.from(context).inflate(R.layout.dialog, null);
    title = (TextView) root.findViewById(R.id.title);
    super.setContentView(root);
} 
```

而 R.style.My_Dialog 是

```
 <style name="My.Dialog" parent="android:style/Theme.Dialog">
    <item name="android:textColor">@color/text_default</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowNoTitle">true</item>
</style> 
```

在布局编辑器中，一切看起来都很正常。为什么 Android 显示不正确的我的对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:33:38.313

`layout_height`为按钮设置 a ：

```
<Button
            android:id="@+id/yes"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:layout_marginRight="10dp"
            android:background="@drawable/btn_orange_normal"
            android:minWidth="100dp"
            android:text="@string/yes" />

        <Button
            android:id="@+id/no"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:layout_marginLeft="10dp"
            android:background="@drawable/btn_lightgray_normal"
            android:minWidth="100dp"
            android:text="@string/no" /> 
```

`50dp`可能太大/太小，使用这些值直到它是正确的。

# android - 安卓 2.2 还是 4.1？

> ID：11761466
> 
> 赞同：4
> 
> 时间：2012-08-01T14:28:50.073
> 
> 标签：android

创建新应用时，我应该针对 2.2 还是 4.1 构建？我知道 2.2 现在拥有 83% 的市场，但我可以针对 4.1 构建并制作 min sdk android 2.0 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:21:18.413

您的构建目标应该始终是最新的平台（即 Jelly Bean API 16）。属性->Android->构建目标

在您的清单中，您应该定义如下内容：

```
 <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" /> 
```

如果您的代码使用了以前版本中没有的东西，Lint 会告诉您。您可以在任何模拟器上测试您的代码以确保正确的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T14:36:28.813

在 AndroidManifest.xml 中设置最小值、最大值和目标 SDK，如：

```
<uses-sdk
        android:maxSdkVersion="16"
        android:minSdkVersion="8"
        android:targetSdkVersion="16" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:33:43.007

是的，您可以这样做，但有些功能在以前的 android 版本中不可用。在使用它们之前，请确保检查操作系统版本，例如：

```
if (Build.VERSION.SDK_INT > Build.VERSION_CODES.GINGERBREAD) {
 // only for android older than gingerbread
} 
```

# android - ORMLite 的 createOrUpdate 似乎很慢 - 什么是正常速度？

> ID：11761472
> 
> 赞同：9
> 
> 时间：2012-08-01T14:29:01.843
> 
> 标签：android, performance, ormlite

在我的应用程序中调用 ORMLite`RuntimeExceptionDao`的`createOrUpdate(...)`方法非常慢。

我有一个非常简单的对象 ( `Item`)，它有 2 个整数（一个是`generatedId`）、a`String`和 a `double`。我用下面的代码测试了（大致）更新数据库中的对象（100 次）所需的时间。日志语句记录：

> 更新 1 行 100 次的时间：3069

为什么在只有 1 行的表中更新对象 100 次需要 3 秒。这是正常的 ORMLite 速度吗？如果不是，可能是什么问题？

```
RuntimeExceptionDao<Item, Integer> dao =
    DatabaseManager.getInstance().getHelper().getReadingStateDao();
Item item = new Item();
long start = System.currentTimeMillis();
for (int i = 0; i < 100; i++) {
    item.setViewMode(i);
    dao.createOrUpdate(item);
}
long update = System.currentTimeMillis();
Log.v(TAG, "time to update 1 row 100 times: " + (update - start)); 
```

如果我创建 100 个新行，那么速度会更慢。

注意：我已经在使用`ormlite_config.txt`. 它记录`"Loaded configuration for class ...Item"`所以这不是问题。

谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-01T15:05:09.107

不幸的是，这可能是“预期”的速度。确保您使用的是 ORMLite 4.39 或更高版本。 `createOrUpdate(...)`正在使用一种更昂贵的方法来预先测试数据库中对象的存在。但我怀疑这将是最小的速度改进。

> 如果我创建 100 个新行，那么速度会更慢。

默认情况下，Sqlite 处于自动提交模式。要尝试的一件事是使用[ORMLite](http://ormlite.com/)方法包装您的插入（或您`createOrUpdate`的 s） 。 `Dao.callBatchTasks(...)`

在[BulkInsertsTest android 单元测试](http://ormlite.svn.sourceforge.net/viewvc/ormlite/ormliteAndroidTest/src/com/j256/ormlite/android/BulkInsertTest.java?view=markup)中，以下`doInserts(...)`方法插入 1000 个项目。当我调用它时：

```
doInserts(dao); 
```

在我的模拟器中需要 7.3 秒。如果我使用`callBatchTasks(...)`在 Android Sqlite 中围绕调用包装事务的方法调用：

```
dao.callBatchTasks(new Callable<Void>() {
    public Void call() throws Exception {
        doInserts(dao);
        return null;
    }
}); 
```

需要 1.6 秒。`dao.setSavePoint(...)`使用该方法可以获得相同的性能。这会启动一个事务，但不如该`callBachTasks(...)`方法好，因为您必须确保关闭自己的事务：

```
DatabaseConnection conn = dao.startThreadConnection();
Savepoint savePoint = null;
try {
    savePoint = conn.setSavePoint(null);
    doInserts(dao);
} finally {
    // commit at the end
    conn.commit(savePoint);
    dao.endThreadConnection(conn);
} 
```

这也需要约 1.7 秒。

# javascript - 使用 jQuery 为宽度设置动画时出现奇怪的“抖动”效果（仅在 Chrome 中！）

> ID：11761476
> 
> 赞同：7
> 
> 时间：2012-08-01T14:29:11.887
> 
> 标签：javascript, jquery, google-chrome, animation, html-lists

我`li`在一个简单的代码片段中使用 jQuery 为元素的宽度设置动画。我`hover()`用作处理程序并`.animate()`为宽度设置动画。这是我的代码。

```
$('li').each(function() {
    //store the original width of the element in a variable
    var oldWidth = $(this).width();
    $(this).hover(
        function() {
            //when the mouse enters the element, animate width to 900px
            $(this).animate({width: '900px'}, 600, 'linear')
        },
    function() {
            //when the mouse leaves, animate back to the original width
            $(this).animate({width: oldWidth}, 350, 'linear')
        }
   );
}); 
```

代码真的很简单并且可以工作**，但**在 Chrome 中有一个非常奇怪的怪癖。当动画元素进出时，`li`元素会“颤抖”，就好像它们真的很冷并且在颤抖一样。您可以在现场示例中看到此处的行为：http: [//missmd.org/](http://missmd.org/)（编辑：错误现已修复）

我之前用 jQuery 制作了很多东西，但从未见过这种行为。是否有任何解释为什么会发生以及如何解决它？我想知道是不是因为我已经将元素浮动到了右边并且动画到了左边。该错误令人抓狂，并且极大地影响了整体演示（至少对我而言）。其他人以前见过这个吗？

**编辑澄清：**它不是“颤抖”的实际`li`元素，而是其中的文本在动画运行时从左到右非常快速地轻微但明显地抖动。我难住了。

**编辑二：**在稍微摆弄 CSS 之后，我只能在**Chrome**中重现效果（对我来说是 21.0.1180.60 beta-m）。在 Firefox 中，它按预期工作。它在 IE 中也很有效。非常讽刺的是，Chrome（通常很适合这些东西）现在给我带来了麻烦。*拉出头发，检查理智*

这是我的 HTML，可帮助您深入了解这一点。我们在 ChrisFrancis 的 jsFiddle 中重现了这个问题。

```
<nav>
    <ul class="nav">
        <li class="one">
            <a href="homeandnews/">
                <span class="title">Home and News</span>
                <br/>
                <span class="subtitle">Learn more about me and read general updates!</span>
            </a>
        </li>
    </ul>
<nav> 
```

我完全被难住了。这也可能是 Chrome/V8 JS 引擎中的一个错误，我们对此无能为力。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-29T08:45:55.897

我也在寻找这个问题，并且这个：`-webkit-backface-visibility: hidden;`解决我的问题。我在 SVG 上使用 CSS3 变换时添加了这种奇怪的抖动。

更多信息可以在这里找到：[CSS3 变换旋转导致 Chrome 中的 1px 移位](https://stackoverflow.com/questions/14729492/css3-transform-rotate-causing-1px-shift-in-chrome)

希望能帮助到你

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T08:37:45.630

我更改了您的 css: `ul.nav li a`，添加`float: right`到它并修复了抖动。

无论如何，如果它有帮助，我在使用 height:auto 为另一个 div 中的 div 的高度设置动画时遇到了同样的问题。将高度更改为固定宽度解决了它。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T15:11:00.447

这似乎是 Chrome 版本 21.0.1180.60 中的一个错误，也可能存在于其他版本中。此处的代码没有任何问题，我想我们只是将其留给解决方法或现在提交错误报告。

叹。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-05T17:03:34.263

当将 CSS 转换应用于父标签时，抖动 SVG 也有类似的问题。我试图随机应用我能做的一切，这个修复终于帮助了：

```
svg {
  transform: translate3d(0, 0, 0);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T03:52:45.697

`div`当我尝试为其中的另一个 div 设置动画时，某些 s 会出现此问题。我注意到的是，如果 div 或元素具有 css 属性，就会发生这种情况`display:inline-block`。使元素浮动可以解决问题，但`inline-block`在我的情况下是必需的。

我注意到该元素也具有`vertical-align:middle`css 属性。改变它以`vertical-align:text-bottom`解决问题。**Chrome** v23中不再有抖动效果（可能是新版本中仍然存在该错误）。

# php - 如何在共享主机上的 php 中在 public_html 之外创建文件

> ID：11761484
> 
> 赞同：3
> 
> 时间：2012-08-01T14:29:42.743
> 
> 标签：php, shared-hosting

我正在尝试在 php 中的 public_html 之外创建一个文件：

`fopen("/home/sites/foo.org/backup-ticketing/asu.sql";w)`

但是我收到此错误消息。我确信我应该能够以某种方式做到这一点，我只是想不通。该文件夹的权限是`711`.

> [2012 年 8 月 1 日星期三 14:33:54] [错误] [客户端 84.3.2.16] PHP 警告：fopen（/home/sites/foo.org/backup-ticketing/asu.sql）[function.fopen]：未能开放流：第 4 行 /home/sites/foo.org/public_html/back/asu.php 中不允许操作

你能告诉我什么是正确的方法吗？

感谢您的许多建议，现在我有一个附加信息：

php.ini 是 public_html 中的问题，但是我想保持原样，但 /back/ 文件夹应该能够这样做。

这是我的设置：

```
 file_uploads = Off
 upload_tmp_dir = /var/php_tmp
 upload_max_filesize = 0M
 allow_url_fopen = Off
 allow_url_include = Off
 safe_mode = Off 
 display_errors = off
 magic_quotes_gpc = off
 magic_quotes_runtime =    off
 max_file_uploads=0 
 disable_functions=passthru,exec,phpinfo
 open_basedir  = /home/sites/foo.org/public_html/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:37:18.510

It seems as PHP's [`Safe mode`](http://www.php.net/manual/en/features.safe-mode.php) or [open_basedir](http://www.php.net/manual/en/ini.core.php#ini.open-basedir) are enabled preventing you from what you want to do - so it's simply not allowed and therefore not possible.

You could check if you are allowed to write to some other directory outside of your public directory, often `../tmp` or `../temp` are there and writable.

You might be able to find out what paths are allowed by open_basedir with

```
echo ini_get('open_basedir'); 
```

Another way around your problem: Put your files in a subdirectory of your public directory and secure it with .htaccess (User/Password, deny all IPs but your ow etc.)

EDIT:

*   Protect directory with username/password via htacces: Use a [htaccess generator](http://tools.dynamicdrive.com/password/), or
*   Allow access only from certain IPs: Create a file and name it .htaccess with the content below

    `order deny,allow`

    `deny from all`

    `allow from 888.888.888.888`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:38:14.097

You could try a shell_exec.

there you could exec a script with a different user than the webserver user

[http://php.net/manual/de/function.shell-exec.php](http://php.net/manual/de/function.shell-exec.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:53:00.177

经过研究，我找到了明显的答案：open_basedir = none in php.ini 我虽然有人会觉得有用。

感谢所有的答案，我从他们身上学到了很多。

# asp.net - 具有可选列的基于 Web 的数据项？

> ID：11761485
> 
> 赞同：1
> 
> 时间：2012-08-01T14:29:45.720
> 
> 标签：asp.net

这可能有一个简单的答案，但我一直在寻找，找不到任何适合我需要的东西。

我一直在使用网格视图来显示数据，但新的客户要求要求用户能够选择单个列、行或单元格。有谁知道一个好的选择？

谢谢。

编辑：

本质上，我显示了几行数据，每行由多列组成。使用标准的网格视图，如果不从其他列中选择数据，您就无法真正选择一列中的所有数据。我需要一种让用户选择一列数据的方法，以便他们可以将数据复制出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:34:28.353

如果您正在寻找商业解决方案，请查看 Infragistics NetAdvantage for ASP.NET。实际使用的网格示例：http: [//www.infragistics.com/products/aspnet/sample/data-grid/selection-client-events](http://www.infragistics.com/products/aspnet/sample/data-grid/selection-client-events)

# google-plus - 如何检查自定义 URL 是否使用 Google Plus API +1？

> ID：11761486
> 
> 赞同：0
> 
> 时间：2012-08-01T14:29:51.857
> 
> 标签：google-plus, google-plus-one

如果我知道用户的凭据，如何检查用户是否从我自己的页面 +1 外部页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:19:49.430

当前的 API 无法做到这一点。

但是，有一个[活动的功能请求](http://code.google.com/p/google-plus-platform/issues/detail?id=57&q=%2b1%27s&colspec=ID%20Type%20Status%20Component%20Owner%20Summary)。如果您为问题加注星标，您将在更新时收到通知。

# javascript - 快速 Jquery .load 聊天不起作用

> ID：11761497
> 
> 赞同：0
> 
> 时间：2012-08-01T14:31:00.497
> 
> 标签：javascript, jquery, chat

我有以下jQuery：

```
var msg = $("#newmessage").val();
var user = $("#userchat").val();

var filename = "/inc/chat.php?msg="+msg+"&user="+user; 
alert(filename);
$("#chatData").load(filename); 
```

当“msg”中没有空格时，#chatData 加载正常并发布变量。

当它确实有一个空间时，我只会得到一个空白的 div。里面没有任何信息。

如果我加载将数据插入数据库的 php 文件，并手动键入相同的 GET 数据，它工作正常。

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:33:05.787

尝试使用

```
encodeURIComponent(msg) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T14:36:21.960

还要考虑：

```
$("#chatData").load('/inc/chat.php', 
    { 'msg' : $("#newmessage").val(), 'user' : $("#userchat").val() }
); 
```

~~如果需要，由 jQuery 完成 URI 编码。~~

您不必担心 URI 编码，因为使用了 POST 方法，因为数据是作为对象[（源）](http://api.jquery.com/load/)提供的。

在这种情况下，无论如何 POST 可能都比 GET 好。

如果您`$_GET`在 php 文件中使用，则需要使用`$_REQUEST`或`$_POST`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:34:24.223

[您必须在使用encodeURIComponent()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)发送之前对您的消息进行编码，并使用[urldecode()](http://php.net/manual/en/function.urldecode.php)在服务器站点上进行解码。

这样做将转义/编码 url 中不允许的特殊字符，否则会破坏您的查询字符串（如`&`消息中的 a 否则会开始一个新参数）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T14:34:26.377

您可以使用`escape`,`encodeURI`或`encodeURIComponent`, 但这`escape`是*每个*浏览器都支持的唯一方法，尽管大多数现代浏览器都支持后者。

**参考**

看看[这个](http://www.javascripter.net/faq/escape.htm)文档，它很好地解释了这三个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T14:35:19.090

该空间可能会导致问题 - 尝试使用 javascript [`encodeURIComponent()`](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)：

```
var msg = encodeURIComponent($("#newmessage").val());
var user = encodeURIComponent($("#userchat").val()); 
```

# c++ - 继承：返回自身类型的函数？

> ID：11761506
> 
> 赞同：12
> 
> 时间：2012-08-01T14:31:27.087
> 
> 标签：c++

假设我有两个课程：

```
class A
{
    public:
    A* Hello()
    {
        return this;
    }
}

class B:public class A
{
    public:
    B* World()
    {
        return this;
    }
} 
```

假设我有一个这样的`B`类实例：

```
B test; 
```

如果我打电话`test.World()->Hello()`那会很好。但是由于返回类型`test.Hello()->World()`而不起作用。`Hello()``A`

我怎样才能`Hello()`返回类型`B`？我不想使用`virtual`函数，因为我们有 20 多个不同的类继承`A`.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-01T14:35:26.617

您可以使用[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)，一种奇怪重复的模板模式：

```
template<class Derived>
class A {
public:
    Derived* Hello() {
        return static_cast<Derived*>(this);
    }
};

class B : public A<B> {
public:
    B* World() {
        return this;
    }
};

int main() {
    B test;
    test.World()->Hello();
    test.Hello()->World();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:34:12.710

您可以在 B 中使用另一个 Hello 方法，即使它不是虚拟的：

```
class A
{
    public:
    A* Hello() { return this; }
}

class B:public class A
{
    public:
    B* Hello() { return this; }
    B* World() { return this; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:36:21.607

没有必要让`Hello()`return a `B*`。`Hello()`正在返回 an `A*`，您需要做的就是将您的`A*`转换为 a`B*`以便能够调用`test.Hello()->World()`。例如：

```
B* b = dynamic_cast<B*>(test.Hello());
if(b != 0) b->World(); 
```

# c# - C# best way to differentiate socket messages

> ID：11761509
> 
> 赞同：1
> 
> 时间：2012-08-01T14:31:40.620
> 
> 标签：c#, sockets

Im new to sockets, and Im creating a tictactoe online, I know how to make the connections with the clients and the server, but I will make a chat too.

Then I doing this, when a user chat I send a message with a prefix "CHAT: HELLO WORLD" and when a user make a move I send a message without the prefix... this is the best way?

THX!!!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:39:58.587

Typically you would go with a format that includes a packet length, type and payload.

In your case you could go with a Byte (type), Int16 (length), Byte[] (payload).

The type can be represented in code as an enum. Length would just represent the length of the payload.

```
public enum Byte PacketType {
  PlayerMove = 1,
  PlayerChat = 2
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T15:17:58.853

In defining a wire protocol over a stream-based protocol like TCP, you have a few options for constructing messages:

*   **Fixed-length**
    *   All messages are the same length; every sequence of `x` bytes represents a new message.
*   **Length-prefixed** (variable length)
    *   The first byte(s) of the message represent the length of the payload to follow.
*   **String-terminated** (variable length)
    *   Read bytes from the stream until you come to a specified byte-string that represents the end of a message, i.e. the newline character `\n`.

If you ever intend on changing the protocol (protip: you will, even if you don't think you will), it is crucial that you include an identifier for the protocol version in each message to prevent issues when dealing with clients using an older iteration of the protocol. Clearly, this is the first thing you must determine before deciphering the rest of the payload, so this should be the first byte(s) of the message (following any length-prefix) - how could we determine the version if we don't know where it is located in *every* message we receive?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:38:35.367

*You* need to define a protocol. Remember to allow room for additional features :-).

Eg. using regular expressions over complete lines (end with selected line terminator):

*   Matching `^:[a-c][1-3]:`: is a move (colon, position, colon user name).
*   Matching `^!.*?:`: is a chat message (exclamation point, name, colon, text).

and anything else (in V1) is an error.

Remember:

*   Data is sent in packets, you might need multiple reads from the socket to get a complete message.
*   Avoid ambiguity: resolving it might be x or y is hard.
*   Specify a text encoding (eg. UTF-8).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T14:40:48.353

I assume you're using TCP?

You need to make sure you 'frame' both messages so you can identify them and also avoid potential blocking issues (in case the client stops sending while you are still expecting to read CHAT: or whatever you define). With TCP your byte order is guaranteed but reading does not guarantee a complete 'packet' so you'll need to implement some way of building up a buffer and identifying when your 'message' is complete.

A reasonably simple way of doing this is to make sure each 'message' has a header with the type and size specified.

EG:

Enumerate your message types (move and chat currently), so say 'chat' is 0x01 and your message is 1020 bytes. You can prefix your 'message' with 0x0103FC so the server knows how many bytes to expect, and build up a buffer using async socket calls until the 1020 bytes are read (or you arbitrarily decide that the client is not sending anymore)

# iphone - 为我的精灵使用 CCLayer 或 CCSprite 类？

> ID：11761510
> 
> 赞同：0
> 
> 时间：2012-08-01T14:31:41.797
> 
> 标签：iphone, objective-c, ipad, cocos2d-iphone, sprite

我有一些精灵，我不知道要从哪个类继承。我目前使用 CCLayer 执行此操作，因为我可以将必须​​添加到 sprite 的所有子对象保留在其类中，但是所有重叠层都检测到触摸事件，这可能不是那么聪明。所以用外行的话来说，我想要一个火焰喷射器，例如当我触摸它时我必须添加火焰。我只需在 FlameThrower.h 类中添加火焰（CCLayer 的子类。如果我要对 CCSprite 进行子类化，我将不得不在我的父类中添加火焰，这也是无效的，对吧？那么，什么是这里的正确方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:18:07.697

您可能根本不需要子类化 CCSprite 或 CCLayer。

这是一个基本的 Cocos2d 游戏架构问题，我希望能经常讨论。

对于我创建的游戏，我使用 NSObject 或 CCNode 作为创建角色的基类。

这些角色控制器类运行角色 AI 的逻辑，拥有角色的物理体（如果有物理），并控制一个或多个代表角色的精灵。

如果角色控制器不需要 CCNode 提供的属性或功能，那么我将 NSObject 子类化，这通常是基于物理的角色的情况。

用户输入通常归 HUD 所有，但有时您希望将其直接添加到游戏世界中的特定角色。在这种情况下，您可能希望将 CCLayer 子类化以添加触摸和加速度计，或者将 CCNode 子类化并注册到触摸调度程序。

通常我在一个单独的类中为角色创建精灵，然后由角色控制器创建和拥有。

我创建的游戏通常有一到四个精灵表，我有一个 GameManager 类将它们作为 CCSpriteBatchNodes 加载到 CCSpriteFrameCache 中，然后当通过世界构建脚本引擎创建角色时，我将所需 CCSpriteBatchNode 的引用传递给该角色以便它可以使用批处理节点将字符精灵添加到其中。

然后角色向 GameManager 或父角色注册以进行更新、管理并最终销毁和清理。

对于基于物理的角色，通常甚至不需要子类 CCNode（更不用说 CCLayer 或 CCSprite），除非您希望物理主体直接控制节点的行为，而不是控制节点或 NSObject 将拥有的精灵。

# css - 为什么这个 CSS 选择器不起作用？

> ID：11761513
> 
> 赞同：0
> 
> 时间：2012-08-01T14:31:51.527
> 
> 标签：css, css-selectors

我有以下代码（由 Drupal 生成；我无法控制它。）

```
<div class="spacer">
    <div class="region region-home-ad-banner">
        <div id="block-views-banner-ad-block-block" class="block block-views  contextual-links-region">
            <div class="contextual-links-wrapper">
                <ul class="contextual-links">
                    <li class="views-ui-edit first">
                        <a href="/banner_ad_block/edit/block?destination=node">Edit view</a>
                    </li>
                    <li class="block-configure last">
                        <a href="/banner_ad_block-block/configure?destination=node">Configure block</a>
                    </li>
                </ul>
            </div> <!-- end contextual-links-wrapper -->

            <div class="content">
                <div class="view view-banner-ad-block view-id-banner_ad_block view-display-id-block view-dom-id-542147d83a500d1c31244e2e2a583562">
                    <div class="view-content">
                      <div class="views-row views-row-1 views-row-odd views-row-first views-row-last">
                        <div class="views-field views-field-field-ad-image">
                            <div class="field-content">
                                <a href="http://www.externallink.com" target="_blank">
                                    <img src="expo-home-page-banner.jpg" width="912" height="100" alt="" />
                                </a>
                            </div>
                        </div>
                      </div>
                    </div>
                </div>
            </div> <!-- end content -->
        </div> <!-- end block-views-banner-ad-block-block -->
    </div> <!-- end region-home-ad-banner -->
</div> <!-- end spacer --> 
```

我有这个有效的CSS：

```
.spacer img{
    background: #ffffff;
    border:5px;
    margin-left: 0px;
    padding-top: 30px; 
    padding-bottom: 20px; 
} 
```

我需要使用“region-home-ad-banner”类为 div 应用背景样式，所以我尝试了这个：

```
.spacer>div.region-home-ad-banner {
    background: #ffffff;
} 
```

根据 Firebug 的说法，该选择器根本没有被应用。它没有被具有更高优先级的东西覆盖，它根本没有发生。

为什么会`.spacer img`找到它需要的东西，即使 img 标签被埋在多个层次中，但`.spacer>div.region-home-ad-banner`没有找到 div 的直接子级`.spacer`？

**编辑添加屏幕截图**

![在此处输入图像描述](../Images/74390846b76d71a6ddea8fea77c9fa78.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:50:34.600

这可能是由于以下几个原因：

**缓存：**

在 firebug 中打开 CSS 选项卡，选择 CSS 文件，并确保该规则在您的 CSS 中可用。在这种情况下，请清除缓存（有时`CTRL`+`F5`还不够）并重试。

**错字：**

确保您没有任何拼写错误，在 firebug 中打开控制台并检查警告。或者`Error Console`在 Firefox 中打开。（工具--> Web 开发人员--> 错误控制台）这可能是上一条规则的拼写错误，例如，忘记放置右大括号 ( `}`) 将破坏您的以下规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:11:15.097

从drupal生成的HTML结构和您尝试使用的相当独特的类来看，您似乎不需要直接后代选择器“>”并且可以尝试不使用它：

```
.spacer div.region-home-ad-banner {
    background: #ffffff;
} 
```

但是，我看不出为什么该选择器不起作用。

# c++ - 将无序映射写入共享内存不起作用

> ID：11761517
> 
> 赞同：0
> 
> 时间：2012-08-01T14:32:10.763
> 
> 标签：c++, linux

我正在尝试共享一个无序映射（哈希映射），但它在尝试在映射中插入数据的行处出现浮点异常。

有人可以帮助了解我哪里出错了吗？

```
#include <iostream>
#include <string>
#include <unordered_map>

#include <sys/ipc.h>
#include <sys/shm.h>
int main ()
{
    std::unordered_map<std::string,double> *tmp;

    key_t key = 5678;
    int shmid = shmget(key, 1000, IPC_CREAT | IPC_EXCL | 644);
    if(shmid == -1){
        std::cerr << "Failed to create the shared segment." << std::endl;
        exit(-1);
    }

    void *addr = shmat(shmid, NULL, 0);
    if(addr == (void*)-1){
        std::cerr << "Failed to attach the segment to the process." << std::endl;
        exit(-1);
    }

    tmp = static_cast< std::unordered_map<std::string,double>* >(addr);
    tmp->insert (std::pair<std::string,double>("abc",1.2));

    shmdt(addr);
    return 0;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T14:40:54.250

通常，您不能在进程之间共享复杂的结构。特别是，指向一个进程的虚拟地址空间中的对象的指针在另一个进程中无效，并且大多数容器实现都将涉及指针。

您可以查看[Boost.Interprocess](http://www.boost.org/doc/libs/release/doc/html/interprocess.html)库，其中包含适合共享的各种容器和分配器；特别是，他们的版本`unordered_map` [可以放在 shared memory](http://www.boost.org/doc/libs/release/doc/html/interprocess/allocators_containers.html#interprocess.allocators_containers.additional_containers.unordered)中，只要您使用他们的共享内存分配器，所以您可以简单地使用它作为替换`std::unordered_map`（尽管您仍然需要替换`std::string`作为键） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:44:10.597

您将共享内存地址转换为指向映射的指针，但您从未调用构造函数在该地址实际创建映射。无论如何，这可能不会按照您想要的方式工作，因为映射可能会为它自己的使用分配和释放内存，这些内存将来自堆，而不是来自您的共享内存区域。

# ruby-on-rails - 在 Rails 中创建表单时，为什么我不断得到 NilClass:Class 的未定义方法“model_name”？

> ID：11761519
> 
> 赞同：0
> 
> 时间：2012-08-01T14:32:17.207
> 
> 标签：ruby-on-rails, ruby-on-rails-3

所以我试图创建一个表单让用户对电影发表评论，但 Rails 不断向我抛出未定义的方法错误。我的应用程序允许用户查看电影。所以我希望表单允许用户在该电影的上下文中创建评论。我的代码如下，任何帮助将不胜感激。我唯一的困惑是，我不确定是否应该嵌套资源，或者我只是使用为`form_for`

我的路线文件如下所示：

```
 resources :users
  resources :movies
  resources :reviews
  resources :sessions, only: [:new, :create, :destroy] 
```

我有一个看起来像这样的评论控制器：

```
class ReviewsController < ApplicationController

    def create
        movie_id = params[:review].delete(:movie_id)

        @review = Review.new(params[:review])
        @review.movie_id = movie_id

        @review.save

        redirect_to movie_path(@review.movie)
    end
end 
```

我的表格如下所示：

```
<h2>Leave a Review</h2>

<%= form_for(@review) do |f| %>
  <%= f.hidden_field :movie_id %>
  <div class="field">
    <%= f.text_area :content, placeholder: "Write a new review..." %>
  </div>
  <%= f.submit "Submit", class: "btn btn-large btn-primary" %>
<% end %> 
```

我有三个模型：

用户：

```
class User < ActiveRecord::Base

  has_secure_password
  has_many :reviews, dependent: :destroy
  has_many :movies, through: :reviews

end 
```

电影：

```
class Movie < ActiveRecord::Base

  has_many :reviews
  has_many :users, through: :reviews

end 
```

审查：

```
class Review < ActiveRecord::Base

  attr_accessible :content, :movie_id
  belongs_to :user
  belongs_to :anime

end 
```

这是错误：

```
NoMethodError in Movies#show

Showing /Users/david/Sites/Rails/Chirp/app/views/movies/show.html.erb where line #32 raised:

undefined method `model_name' for NilClass:Class
Extracted source (around line #32):

29: 
30: <h2>Leave a Review</h2>
31: 
32: <%= form_for(@review) do |f| %>
33:   <%= f.hidden_field :movie_id %>
34:   <div class="field">
35:     <%= f.text_area :content, placeholder: "Write a new review..." %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:38:53.020

您的 @review 实例变量实际上是一个电影。@review.movi​​e 将未定义

**编辑**

好的，您编辑了您的问题以修复您的 @review 变量。

所以现在发生的事情是您的 Review 控制器设置了 @review 实例变量，然后重定向到 Movies#show。重定向请求有效地抛出了您在 Review 控制器中设置的所有实例变量。

所以从 Movies#show 的角度来看，@review 是不存在的。

共享您的电影控制器显示操作的代码，以便我们可以看到发生了什么，或者只是尝试在电影#show 中重新定义 @review

```
@movie = Movie.find params[:id]
@review = current_user.reviews.build(movie: @movie) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:36:09.870

你有`@review = Review.new`你的控制器的新动作吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:38:59.297

不确定它与表单问题有关，但在`create`方法中，您创建的是 a`Movie`而不是`Review`.

也不确定为什么要删除密钥`movie_id`，然后在调用后将其添加回对象`new`

# iphone - 实施 Google OAuth 2

> ID：11761520
> 
> 赞同：0
> 
> 时间：2012-08-01T14:32:22.320
> 
> 标签：iphone, oauth, google-api

我正在尝试实施 Google OAuth 2 以访问 Google API。当我尝试通过访问令牌交换代码时，它不起作用。

我使用这种方法来做到这一点。

```
 (void)getAccessTokenwWithCode:(NSString*)code
{
      NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:[@"https://accounts.google.com/o/oauth2/token" ]];
      [request setHTTPMethod:@"POST"];
      NSDictionary *postBodyDic = [NSDictionary dictionaryWithObjectsAndKeys: 
                             code, @"code", 
                             @"my_client_id", @"client_id",
                             @"my_client_secret", @"client_secret", 
                             @"http://localhost", @"redirect_uri", 
                             @"authorization_code", @"grant_type", 
                             nil];

     NSString *postBody = [postBodyDic JSONString];
     NSData *data = [postBody dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];
     [request setHTTPBody:data];
     [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];  

     AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request                             
     success:^(NSURLRequest *request, NSURLResponse *response, id JSON) 
     {
         NSLog(@"%@", JSON);
     } 
     failure:^(NSURLRequest *request, NSURLResponse *response, NSError *error, id JSON) 
     {
        NSLog(@"ERROR \n%@", error );
     }
     ];

     [queue addOperation:operation];
} 
```

我收到 400 错误

任何人都可以帮我定位问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:37:45.927

由于您使用的是 AFNetworking 类，因此请尝试使用[AFNetworking Extension for OAuth 2 Authentication](https://github.com/AFNetworking/AFOAuth2Client)。我没有使用它，但它看起来像你需要的。

# python - 使用 Python 以正确的顺序查找一组模式的正则表达式出现

> ID：11761521
> 
> 赞同：1
> 
> 时间：2012-08-01T14:32:27.563
> 
> 标签：python, regex

我正在为某些模式解析一系列文本文件，因为我想将它们提取到其他文件中。

一种说法是，我想从文件中“删除”除匹配项之外的所有内容。

例如，如果我有 pattern1、pattern2、pattern3 作为匹配模式，我想要以下输入：

```
bla bla
pattern1
pattern2
bla bla bla
pattern1
pattern3
bla bla bla
pattern1 
```

给出以下输出：

```
pattern1
pattern2
pattern1
pattern3
pattern1 
```

我可以使用`re.findall`并成功获取任何模式的匹配列表，但考虑到每个模式的匹配都混合在文件中，我想不出一种保持顺序的方法。

谢谢阅读。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T14:35:32.087

将它们组合成一个模式。使用您的示例代码，使用以下模式：

```
^pattern[0-9]+ 
```

如果它实际上更复杂，然后尝试

```
^(aaaaa|bbbbb|ccccc|ddddd) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T14:51:01.703

这是“复制这个然后走”格式的答案。

```
import re

#lets you add more whenever you want
list_of_regex = [r"aaaa",r"bbbb",r"cccc"]

#hold the completed pattern
pattern_string = r"^("

#combines the patterns
for item in list_of_regex:
    pattern_string += "|".join(list_of_regex)

pattern_string += r")"

#open the file that you are reading
fr = open(FILE_TO_READ)

#holds the read files strings
search_string = fr.read()

#close the file
fr.close()

#open the file you want to write to
fw = open(FILE_TO_WRITE, 'w')

#write the results of findall into the file (as requested)
fw.writelines(re.findall(pattern_string,search_string))

#close the file
fw.close() 
```

# javascript - 检查嵌入式网站 URL 是否已更改

> ID：11761527
> 
> 赞同：0
> 
> 时间：2012-08-01T14:32:57.267
> 
> 标签：javascript, url, object

我正在制作一个网站，该网站在一个对象中嵌入了另一个网站（我页面中的一个小框）。我正在寻找一种解决方案，当嵌入对象中的网页发生更改时（即用户单击该网站上的链接），我可以隐藏该对象

我在下面的代码只会显示将创建嵌入对象，但一切都是静态的（即“src”不会随着对象中 URL 的变化而变化）。

```
<object data=http://www.website.com  width="600" height="400"> <embed id="test" src=http://www.website.com  width="600" height="400"> </embed> Error: Embedded data could not be displayed. </object> 
```

有没有办法查看该对象的当前 URL？我一直在考虑使用类似于 location.href 的东西，但我不确定如何实现它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:55:13.890

Sorry, due to browser policy, you can not do that, you can only get iframe url if it open a page within your domain. For more information you can search "get iframe url" within stackoverflow

If your site is in the same domain, you think you can do like this

```
var url = http://www.website.com";
function checkChange(){
   if (document.getElementBydId('test').src != url){
      alert('page change');
   }
}

setInterval(checkChange, 1000); 
```

# c++ - 阈值图像和噪声

> ID：11761536
> 
> 赞同：0
> 
> 时间：2012-08-01T14:33:21.037
> 
> 标签：c++, image-processing, opencv

我正在使用opencv对图像进行二进制阈值处理，在移动或动画例如二进制图像上的圆圈时，可移动对象周围出现的噪声很少。附上一张图片来说明我的意思。我怎样才能摆脱那些文物？ ![在此处输入图像描述](../Images/e91dea1e8be211b75f4838d7e768b19d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:27:29.280

如果您想摆脱非圆形的对象，您可以根据几个指标过滤轮廓，[这](http://en.wikipedia.org/wiki/Shape_factor_%28image_analysis_and_microscopy%29)似乎是一个很好的开始链接。在您的情况下，您可以找到所有轮廓并仅保留具有高圆形度和小纵横比的轮廓。您可以更进一步并计算诸如 area/area_of_the_convex_hull 之类的指标。这个应该适合你的圈子。

祝你好运

ps：[这个](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CEAQFjAA&url=http://morse.cs.byu.edu/650/lectures/lect08/regions.slides.printing.6.pdf&ei=6nUZUJWsPMj80QWHvYDIBg&usg=AFQjCNF9saSnoN6Jshllf-5MpgioXxDhMw)pdf似乎更详尽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:32:51.463

您可以尝试应用几个循环的腐蚀算法（直到只剩下一个对象），然后应用相同数量的膨胀算法循环（腐蚀/膨胀对称为打开）

见这里：[http ://en.wikipedia.org/wiki/Mathematical_morphology](http://en.wikipedia.org/wiki/Mathematical_morphology)

# shell - 在 shell 中调用并启动

> ID：11761537
> 
> 赞同：0
> 
> 时间：2012-08-01T14:33:22.560
> 
> 标签：shell

如果我想从批处理脚本中调用另一个批处理脚本，我可以使用

```
CALL File.bat 
```

暂停当前​​批处理文件的执行并等待 CALLed 脚本完成。

我可以用

```
START File.bat 
```

如果我希望它们同时运行。

如何在 shell 脚本中实现这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:40:42.300

通过“shell”，我假设您的意思是 *NIX sh。

要执行另一个脚本并等待它完成，请执行

```
sh file.sh 
```

要在后台启动它，请执行

```
(sh file.sh) & 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:40:56.793

如果你想等待：

```
#!/bin/bash
# do some stuff
/path/to/other/script
# do other stuff 
```

同时运行它（即“在后台”）：

```
#!/bin/bash
# do some stuff
/path/to/other/script &
# do other stuff, then optionally:
wait
# this will wait for all background jobs to finish 
```

如果您想提供特定的输入和/或捕获输出或错误，还有其他方法，您应该考虑有关后台进程的输入和输出重定向的某些事情，但这是基础。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:41:36.863

对于 bash（和其他 Bourne shell 兼容的 shell）：

*   你不需要`CALL`；调用另一个脚本或程序会同步执行它。`someprog.sh`
*   您附加`&`到命令以异步运行它；请注意，如果程序在后台尝试从标准输入读取，它将停止。`someprog.sh &`

# javascript - 如何提前结束 node.js http 请求

> ID：11761542
> 
> 赞同：16
> 
> 时间：2012-08-01T14:33:41.090
> 
> 标签：javascript, node.js

我正在使用`https.request`in node.js请求远程文件。我对接收整个文件不感兴趣，我只想要第一个块中的内容。

```
var req = https.request(options, function (res) {
    res.setEncoding('utf8');

    res.on('data', function (d) {
         console.log(d);
         res.pause(); // I want this to end instead of pausing
    });
}); 
```

我想在第一个块之后完全停止接收响应，但我没有看到任何关闭或结束方法，只有暂停和恢复。我担心使用 pause 是对该响应的引用将无限期地徘徊。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-01T23:27:39.680

在文件中弹出它并运行它。如果您看到来自 google 的 301 重定向答案（我相信它是作为单个块发送的），您可能必须适应您的本地 google。

```
var http = require('http');

var req = http.get("http://www.google.co.za/", function(res) {
  res.setEncoding();
  res.on('data', function(chunk) {
    console.log(chunk.length);
    res.destroy(); //After one run, uncomment this.
  });
}); 
```

要查看它`res.destroy()`确实有效，请取消注释它，并且响应对象将继续发出事件，直到它自己关闭（此时节点将退出此脚本）。

我也尝试过用`res.emit('end');`代替`destroy()`，但在我的一次测试运行期间，它仍然触发了一些额外的块回调。`destroy()`似乎是一个更迫在眉睫的“终结”。

销毁方法的文档在这里：[http ://nodejs.org/api/stream.html#stream_stream_destroy](http://nodejs.org/api/stream.html#stream_stream_destroy)

但是你应该从这里开始阅读：[http](http://nodejs.org/api/http.html#http_http_clientresponse) ://nodejs.org/api/http.html#http_http_clientresponse （它声明响应对象实现了可读流接口。）

# c++ - 什么是用 C++ 编写的好的 UV 映射库？

> ID：11761545
> 
> 赞同：-1
> 
> 时间：2012-08-01T14:34:07.593
> 
> 标签：c++, blender, uv-mapping

我目前正在编写 Blender 脚本，但对于大型模型来说速度非常慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:26:52.180

从头开始构建东西时，我通常使用[OpenGL](http://www.opengl.org/)和[freeImage 。](http://freeimage.sourceforge.net/)但是，如果你想使用现有的框架来节省时间，我推荐[OGRE](http://www.ogre3d.org/)。还有一个为 Ogre 编写的转换器，用于从搅拌机转换模型，称为[blender2Ogre](http://code.google.com/p/blender2ogre/)。但是，它处于测试阶段。您还可以在 Ogre wiki 上找到[教程。](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Blender%20to%20Ogre)

# node.js - 无法在 nodejs 中获得正确的路由值？

> ID：11761550
> 
> 赞同：1
> 
> 时间：2012-08-01T14:34:26.097
> 
> 标签：node.js

由于我无法获得“qkey”值，我在这里的代码中做错了什么？

如果我在浏览器中测试 '/search/firstname/daniel'，我的响应是：{"qkey":"daniel"}

```
app.get('/search/:qkey/:qvalue', function(req, res){
    var qkey = req.params.qkey;
    var qvalue = req.params.qvalue;
    var query = {qkey:qvalue}
    console.log(query);
    res.send(query);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:49:31.620

问题是您创建`query`对象的方式。您不能使用大括号语法为属性名称分配动态值。你应该做的是；

```
var query = {};
query[qkey] = qvalue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:04:13.913

您可以发送数据以查看如下：

```
//in the server side ...
 app.get('/search/:qkey/:qvalue', function(req, res){
    res.write(JSON.stringify({
      qkey:req.params.qkey;
      qvalue:req.params.qvalue;
    }));
 }); 
```

在客户端......调用ajax

```
$.ajax({
  type:"POST",
  url:"/search/"+qkey+"/"+qvalue,
  success: function(data){
    var string = eval("(" + data + ")");
    //you access to server response with
    console.log(string.qkey+" and "+ string.qvalue);
  }
}); 
```

# java - volatile关于可见性及时性的详细语义

> ID：11761552
> 
> 赞同：23
> 
> 时间：2012-08-01T14:34:35.207
> 
> 标签：java, volatile, java-memory-model

考虑一个`volatile int sharedVar`. 我们知道 JLS 为我们提供以下保证：

1.  写入线程的每个操作在`w`其写入值之前`i`按`sharedVar`程序顺序`happens-before`写入操作；
2.  `i`通过读取线程`w` `happens-before`成功读取来`i`写入值；`sharedVar``r`
3.  读取线程成功读取`i`程序顺序中的所有后续操作。`sharedVar``r` `happens-before``r`

但是，对于读取线程何时会观察到该值**，**仍然没有给出挂钟时间保证`i`。一个根本**不会**让读取线程看到该值的实现仍然符合此合同。

我已经考虑了一段时间，我看不出有任何漏洞，但我认为一定有。请指出我推理中的漏洞。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T18:52:09.357

事实证明，答案和随后的讨论只是巩固了我最初的推理。我现在有一些东西可以证明：

1.  以读线程在写线程开始执行之前完全执行的情况为例；
2.  请注意此特定运行创建的*同步顺序；*
3.  现在在挂钟时间移动线程，以便它们并行执行，但保持相同的*同步顺序*。

由于 Java 内存模型没有参考挂钟时间，因此不会有任何障碍。您现在有两个线程与读取线程并行执行，**观察到写入线程没有执行任何操作**。QED。

## 示例 1：一写一读线程

为了使这一发现最大程度地尖锐和真实，请考虑以下程序：

```
static volatile int sharedVar;

public static void main(String[] args) throws Exception {
  final long startTime = System.currentTimeMillis();
  final long[] aTimes = new long[5], bTimes = new long[5];
  final Thread
    a = new Thread() { public void run() {
      for (int i = 0; i < 5; i++) {
        sharedVar = 1;
        aTimes[i] = System.currentTimeMillis()-startTime;
        briefPause();
      }
    }},
    b = new Thread() { public void run() {
      for (int i = 0; i < 5; i++) {
        bTimes[i] = sharedVar == 0?
            System.currentTimeMillis()-startTime : -1;
        briefPause();
      }
    }};
  a.start(); b.start();
  a.join(); b.join();
  System.out.println("Thread A wrote 1 at: " + Arrays.toString(aTimes));
  System.out.println("Thread B read 0 at: " + Arrays.toString(bTimes));
}
static void briefPause() {
  try { Thread.sleep(3); }
  catch (InterruptedException e) {throw new RuntimeException(e);}
} 
```

就 JLS 而言，这是一个合法的输出：

```
Thread A wrote 1 at: [0, 2, 5, 7, 9]
Thread B read 0 at: [0, 2, 5, 7, 9] 
```

请注意，我不依赖`currentTimeMillis`. 报道的时间是真实的。然而，实现确实选择了仅在读取线程的所有操作之后才使写入线程的所有操作可见。

## 示例2：读写两个线程

现在@StephenC 争辩说，许多人会同意他的观点，即使没有明确提及， *happens-before仍然***意味着**时间排序。因此，我提出了我的第二个程序，它展示了这种情况的确切程度。

```
public static void main(String[] args) throws Exception {
  final long startTime = System.currentTimeMillis();
  final long[] aTimes = new long[5], bTimes = new long[5];
  final int[] aVals = new int[5], bVals = new int[5];
  final Thread
    a = new Thread() { public void run() {
      for (int i = 0; i < 5; i++) {
        aVals[i] = sharedVar++;
        aTimes[i] = System.currentTimeMillis()-startTime;
        briefPause();
      }
    }},
    b = new Thread() { public void run() {
      for (int i = 0; i < 5; i++) {
        bVals[i] = sharedVar++;
        bTimes[i] = System.currentTimeMillis()-startTime;
        briefPause();
      }
    }};
  a.start(); b.start();
  a.join(); b.join();
  System.out.format("Thread A read %s at %s\n",
      Arrays.toString(aVals), Arrays.toString(aTimes));
  System.out.format("Thread B read %s at %s\n",
      Arrays.toString(bVals), Arrays.toString(bTimes));
} 
```

只是为了帮助理解代码，这将是一个典型的真实结果：

```
Thread A read [0, 2, 3, 6, 8] at [1, 4, 8, 11, 14]
Thread B read [1, 2, 4, 5, 7] at [1, 4, 8, 11, 14] 
```

另一方面，您永远不会期望看到这样的事情，但**按照 JMM 的标准，它仍然是合法的**：

```
Thread A read [0, 1, 2, 3, 4] at [1, 4, 8, 11, 14]
Thread B read [5, 6, 7, 8, 9] at [1, 4, 8, 11, 14] 
```

JVM 实际上必须**预测**线程 A 在时间 14 将写入什么，以便知道让线程 B 在时间 1 读取什么。这样做的合理性甚至可行性都值得怀疑。

由此，我们可以定义JVM 实现可以采取的以下**现实自由：**

### *线程的任何不间断释放*操作序列的可见性可以安全地推迟到中断它的*获取操作之前。*

术语*发布*和*获取*在[JLS §17.4.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.4)中定义。

这条规则的一个推论是，一个只写而从不读任何东西的线程的动作可以**无限期地推迟**，而不会违反*之前发生的*关系。

# 清除易变概念

`volatile`修饰符实际上是关于两个不同的概念：

1.  **硬保证**对它的操作将尊重*发生前的*顺序；
2.  运行时尽最大努力及时发布写入的**软承诺。**

请注意，JLS 并未以任何方式指定第 2 点，它只是出于普遍预期。显然，违背承诺的实现仍然是合规的。随着时间的推移，随着我们转向大规模并行架构，这一承诺可能确实被证明是相当灵活的。因此，我希望将来将保证与承诺的合并证明是不够的：根据要求，我们将需要一个没有另一个，一个具有不同风格的另一个，或者任何数量的其他组合。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T14:50:51.577

你是部分正确的。我的理解是，这将是合法的，尽管当且仅当 thread`r`不参与任何其他与 thread 具有发生前关系的操作时`w`。

所以不能保证挂钟时间是*什么时候。*但是程序中的其他同步点有保证。

（如果这让您感到困扰，请从更基本的意义上考虑，不能保证 JVM 会真正及时地执行*任何*字节码。一个永远停止的 JVM 几乎肯定是合法的，因为它基本上不可能提供执行时的硬时间保证。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T14:44:58.910

请参阅[本节 (17.4.4)](http://docs.oracle.com/javase/specs/jls/se5.0/html/memory.html#17.4.4)。您稍微扭曲了规范，这让您感到困惑。volatile 变量的读/写规范没有说明*具体值*，特别是：

*   对 volatile 变量（第 8.3.1.4 节）v 的写入与任何线程对 v 的所有后续读取同步（其中后续是根据同步顺序定义的）。

更新：

正如@AndrzejDoyle 所提到的，您可以想象让线程`r`读取一个陈旧的值，只要该线程在该点之后*没有其他任何事情*在执行的稍后时间点与线程建立同步点`w`（因为那样您将违反规范） . 所以是的，那里有一些回旋的空间，但是线程在它可以做的事情上`r`会受到*很大的限制*（例如，写入 System.out 会建立一个稍后的同步点，因为大多数流 impl 都是同步的）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-17T21:22:52.793

我不再相信以下任何内容。这一切都归结为“后续”的含义，除了 17.4.4 中的两次提及外，它是未定义的，其中重复地“根据同步顺序定义”。）

我们真正需要做的唯一事情是在第 17.4.3 节中：

> 顺序一致性是对程序执行中的可见性和顺序的非常强大的保证。在顺序一致的执行中，所有单独的操作（例如读取和写入）都有一个与程序顺序一致的总顺序，并且每个单独的操作都是原子的，并且**对每个线程都是立即可见的。**（重点补充）

~~我认为有这样的实时保证，但你必须从[JLS 第 17 章](http://docs.oracle.com/javase/specs/jls/se5.0/html/memory.html#61803)的各个部分拼凑起来。~~

 ~~1.  根据第 17.4.5 节，“happens-before 关系定义了何时发生数据竞争”。它似乎没有明确说明，但我认为这意味着如果一个动作*a*发生在另一个动作*a'*之前，它们之间就没有数据竞争。
2.  根据 17.4.3：“一组动作是顺序一致的，如果......变量*v的每个读取**r*看到写入*w*到*v*的值，使得 w 在执行顺序中位于 r 之前......如果程序没有数据竞争，那么程序的所有执行将看起来是顺序一致的。”~~ 

***~~如果您写入 volatile 变量`v`并随后在另一个线程中读取它，这意味着写入发生在读取之前。这意味着写入和读取之间没有数据竞争，这意味着它们必须是顺序一致的。这意味着读取*r*必须看到写入*w*（或后续写入）写入的值。~~***

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-19T21:49:09.447

我认为`volatile`Java中的表达方式是“如果你看到A，你也会看到B”。

更明确地说，Java 承诺当您线程读取 volatile 变量`foo`并看到值 A 时，您可以保证稍后在同一线程上读取其他变量时会看到什么。如果将 A 写入的同一线程`foo`也将 B`bar`写入（在将 A 写入之前`foo`），那么您可以保证至少在`bar`.

当然，如果你永远看不到A，也不能保证你能看到B。如果你看到 B in `bar`，那说明 A in 的可见性没有任何意义`foo`。此外，不能保证写入 A 的线程`foo`和看到 A 的另一个线程之间经过的时间。`foo`**

# sql - SQL使用多个/依赖列计算项目频率？

> ID：11761557
> 
> 赞同：5
> 
> 时间：2012-08-01T14:34:50.453
> 
> 标签：sql, oracle

我对 SQL 完全陌生，并且已阅读有关 SQL 的 StackOverflow 帖子以尝试解决此问题，以及其他来源，但无法在 SQL 中执行此操作。开始...

我有一个 3 列和数千行的表，其中包含前 2 列的数据。第三列当前为空，我需要根据第一列和第二列中已有的数据填充第三列。

假设我在第一列中有状态，在第二列中有水果条目。我需要编写一个 SQL 语句来计算**每个水果来自的不同状态的数量**，然后将这个受欢迎程度数字插入每一行的第三列。该行中的流行数字 1 表示水果仅来自一个州，流行数字 4 表示水果来自 4 个州。所以我的桌子目前是这样的：

```
state     fruit     popularity

hawaii    apple     
hawaii    apple     
hawaii    banana       
hawaii    kiwi      
hawaii    kiwi      
hawaii    mango        
florida   apple      
florida   apple        
florida   apple        
florida   orange      
michigan  apple     
michigan  apple     
michigan  apricot   
michigan  orange    
michigan  pear      
michigan  pear      
michigan  pear      
texas     apple     
texas     banana    
texas     banana    
texas     banana    
texas     grape 
```

我需要弄清楚如何计算然后更新第三列，名为流行度，它是出口该水果的州的数量。目标是产生（对不起双关语）下表，根据上表，“苹果”出现在所有 4 个州，橙子和香蕉出现在 2 个州，猕猴桃、芒果、梨和葡萄只出现在 1 个州状态，因此它们相应的流行度数。

```
state     fruit     popularity

hawaii    apple     4
hawaii    apple     4
hawaii    banana    2   
hawaii    kiwi      1
hawaii    kiwi      1
hawaii    mango     1   
florida   apple     4 
florida   apple     4   
florida   apple     4   
florida   orange    2  
michigan  apple     4
michigan  apple     4
michigan  apricot   1
michigan  orange    2
michigan  pear      1
michigan  pear      1
michigan  pear      1
texas     apple     4
texas     banana    2
texas     banana    2
texas     banana    2
texas     grape     1 
```

我的小程序员大脑说要尝试找出一种在某种脚本中循环遍历数据的方法，但是稍微阅读一下 SQL 和数据库，似乎您不会在 SQL 中编写又长又慢的循环脚本。我什至不确定你是否可以？但相反，在 SQL 中有更好/更快的方法来做到这一点。

任何人都知道如何在 SQL 语句中计算和更新每一行的第三列，这里称为流行度，对应于每个水果来自的状态数？感谢阅读，非常感谢任何帮助。

到目前为止，我已经在下面尝试了这些 SQL 语句，这些语句的输出但并不能完全满足我的需求：

```
--outputs those fruits appearing multiple times in the table
SELECT fruit, COUNT(*)
  FROM table 
 GROUP BY fruit
HAVING COUNT(*) > 1
 ORDER BY COUNT(*) DESC

--outputs those fruits appearing only once in the table
SELECT fruit, COUNT(*)
  FROM table 
 GROUP BY fruit
HAVING COUNT(*) = 1

--outputs list of unique fruits in the table
SELECT COUNT (DISTINCT(fruit))
  FROM table 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:45:06.370

如果您想简单地使用优先级更新您的表，它看起来像：

```
update my_table x
   set popularity = ( select count(distinct state) 
                        from my_table
                       where fruit = x.fruit ) 
```

如果要选择数据，则可以使用分析查询：

```
select state, fruit
     , count(distinct state) over ( partition by fruit ) as popularity
  from my_table 
```

这提供了每个水果的不同状态的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:48:57.933

我跑了这个，得到（我认为）是你想要的：

```
WITH t
  AS (SELECT 'hawaii' as STATE, 'apple' as fruit FROM dual
      UNION ALL
      SELECT 'hawaii' as STATE, 'apple' as fruit FROM dual
      UNION ALL
      SELECT 'hawaii' as STATE, 'banana' as fruit FROM dual
      UNION ALL
      SELECT 'hawaii' as STATE, 'kiwi' as fruit FROM dual
      UNION ALL
      SELECT 'hawaii' as STATE, 'kiwi' as fruit FROM dual
      UNION ALL
      SELECT 'hawaii' as STATE, 'mango' as fruit FROM dual
      UNION ALL
      SELECT 'florida' as STATE, 'apple' as fruit FROM dual
      UNION ALL
      SELECT 'florida' as STATE, 'apple' as fruit FROM dual
      UNION ALL
      SELECT 'florida' as STATE, 'apple' as fruit FROM dual
      UNION ALL
      SELECT 'florida' as STATE, 'orange' as fruit FROM dual
      UNION ALL
      SELECT 'michigan' as STATE, 'apple' as fruit FROM dual
      UNION ALL
      SELECT 'michigan' as STATE, 'apple' as fruit FROM dual
      UNION ALL
      SELECT 'michigan' as STATE, 'apricot' as fruit FROM dual
      UNION ALL
      SELECT 'michigan' as STATE, 'orange' as fruit FROM dual
      UNION ALL
      SELECT 'michigan' as STATE, 'pear' as fruit FROM dual
      UNION ALL
      SELECT 'michigan' as STATE, 'pear' as fruit FROM dual
      UNION ALL
      SELECT 'michigan' as STATE, 'pear' as fruit FROM dual
      UNION ALL
      SELECT 'texas' as STATE, 'apple' as fruit FROM dual
      UNION ALL
      SELECT 'texas' as STATE, 'banana' as fruit FROM dual
      UNION ALL
      SELECT 'texas' as STATE, 'banana' as fruit FROM dual
      UNION ALL
      SELECT 'texas' as STATE, 'banana' as fruit FROM dual
      UNION ALL
      SELECT 'texas' as STATE, 'grape' as fruit FROM dual)
SELECT state,
       fruit,
       count(DISTINCT state) OVER (PARTITION BY fruit) AS popularity
  FROM t; 
```

回来

```
florida     apple   4
florida     apple   4
florida     apple   4
hawaii      apple   4
hawaii      apple   4
michigan    apple   4
michigan    apple   4
texas       apple   4
michigan    apricot 1
hawaii      banana  2
texas       banana  2
texas       banana  2
texas       banana  2
texas       grape   1
hawaii      kiwi    1
hawaii      kiwi    1
hawaii      mango   1
florida     orange  2
michigan    orange  2
michigan    pear    1
michigan    pear    1 
```

显然，您只需要运行：

```
SELECT state,
       fruit,
       count(DISTINCT state) OVER (PARTITION BY fruit) AS popularity
  FROM table_name; 
```

希望能帮助到你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:45:19.450

另外的选择：

```
SELECT fruit
,      COUNT(*)
FROM
(
SELECT state
,      fruit
,      ROW_NUMBER() OVER (PARTITION BY state, fruit ORDER BY NULL) rn
FROM   t
)
WHERE rn = 1
GROUP BY fruit
ORDER BY fruit; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T15:08:07.283

尝试这个

```
create table states([state] varchar(10),fruit varchar(10),popularity int)
INSERT INTO states([state],fruit) 
VALUES('hawaii','apple'),
('hawaii','apple'),     
('hawaii','banana'),       
('hawaii','kiwi'),      
('hawaii','kiwi'),      
('hawaii','mango'),        
('florida','apple'),      
('florida','apple'),        
('florida','apple'),        
('florida','orange'),      
('michigan','apple'),     
('michigan','apple'),     
('michigan','apricot'),   
('michigan','orange'),    
('michigan','pear'),      
('michigan','pear'),      
('michigan','pear'),      
('texas','apple'),     
('texas','banana'),    
('texas','banana'),    
('texas','banana'),
('texas','grape')

update t set t.popularity=a.cnt
from states t inner join
(SELECT fruit,count(distinct [state]) as cnt
  FROM states
  group by fruit) a
on t.fruit =a.fruit 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T14:42:59.233

如果你的桌子是`#fruit`...

计算每种水果的不同状态

```
select fruit, COUNT(distinct state) statecount from #fruit group by fruit 
```

所以用这些值更新表

```
update #fruit
set popularity
    = statecount
from
 #fruit
    inner join 
      (select fruit, COUNT(distinct state) statecount from #fruit group by fruit) sc
        on #fruit.fruit = sc.fruit 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T14:43:09.217

这应该能让你大部分时间到达那里。基本上，您想获得水果所处的不同状态的计数，然后使用它连接回原始表。

```
update table
set count = cnt
from 
  (
    select fruit, count(distinct state) as cnt 
    from table
    group by fruit) cnts
  inner join table t
    on cnts.fruit = t.fruit 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-01T14:49:07.260

尝试这个：

```
select a.*,b.total
from [table] as a
left join 
(
SELECT fruit,count(distinct [state]) as total
  FROM [table]
  group by fruit
) as b
on a.fruit = b.fruit 
```

请注意，这是 SQL Server 代码，如有必要，请自行调整。

# linux - 合并和汇总来自多个文件的数据

> ID：11761561
> 
> 赞同：2
> 
> 时间：2012-08-01T14:34:59.560
> 
> 标签：linux, shell

我有 2 个看起来像这样的文件：

文件 1

```
aaa 5
bbb 2
ccc 9
ddd 46
eee 89
fff 56 
```

文件 2

```
aaa 54
bbb 8
ccc 16
ddd 4
eee 66
fff 9 
```

我想要特定列的总和（例如两个文件中 aaa 的总和以及 ccc 的总和 + ddd 的总和和 bbb 的总和 + eee 的总和 + fff 的总和）

例如，有没有一种简单的方法可以用 awk 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:41:27.103

如果您只是想要总和，这可以在纯 bash 中完成（在此处使用关联数组，因此需要 bash 4）：

```
declare -A sums
while read name val1 val2; do
  sums[$name]=$(( val1 + val2 ))
done < <(join -j 1 file1 file2)

echo "Sum of aaa: ${sums[aaa]}"
echo "Sums of ccc and ddd: $(( ${sums[ccc]} + ${sums[ddd]} ))"
echo "Sums of bbb, eee, and fff: $(( ${sums[bbb]} + ${sums[eee]} + ${sums[fff]} ))" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:48:17.717

aaa总和的示例：

```
kent$  awk 'NR==FNR{a[$1]=$2;next;}{a[$1]+=$2}END{print "sum of aaa:",a["aaa"]}' file1 file2
sum of aaa: 59 
```

您可以更改`END{xxx}`零件以获得不同类型的“总和” :) 例如`a["bbb"]+a["eee"]`会给您 bbb+eee 的总和

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-21T09:04:38.517

我也在做同样的事情，但是由于我有很大的文件，我不认为使用 awk 数组连接和求和是一个好主意。

我实际上正在使用这个：

```
join -t$'\t' --check-order -a 1 -a 2 -e 0 -1 1 -2 1 file1 file2 > joined.tmp
awk 'BEGIN{FS="\t"; OFS="\t"}{print $1, $2+$3}' joined.tmp > merged.txt 
```

我一直在寻找一种更快的方法，但我认为，对于大文件，这个解决方案比之前的答案中提出的解决方案要好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T14:48:41.843

连接成一个文件并使用：

```
awk '{a[$1]+= $2;}END{for(i in a){print i,a[i];}}' file 
```

您可以通过管道将输出从 cat 传输到 awk：

```
cat file1 file2 | awk '... 
```

如果要对输出进行排序，请将其通过管道排序。

# jquery - 在 JQGrid 上应用 jScrollPane - 水平滚动问题

> ID：11761562
> 
> 赞同：1
> 
> 时间：2012-08-01T14:35:04.137
> 
> 标签：jquery, jqgrid, jquery-jscrollpane

我正在尝试将[jScrollPane](http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html)与我的 JQGrid 一起使用。我需要使用 jScrollPane 在网格上进行水平和垂直滚动。我想要实现的行为是，

*   垂直滚动条必须只滚动 Grid 的主体
*   水平滚动条应该滚动正文和标题。

这可以使用默认滚动条来实现。但是当我应用 jScrollPane 时，水平滚动条只滚动网格的主体，而标题保持固定。下面是我的代码示例。

```
<body>
<table id="list4"></table>
<script type="text/javascript" language=javascript>
var mydata = [
    { id: "1", invdate: "2007-10-01", name: "test", note: "note", amount: "200.00",  tax: "10.00", total: "210.00" },
    { id: "2", invdate: "2007-10-02", name: "test2", note: "note2", amount: "300.00", tax: "20.00", total: "320.00" },
    { id: "3", invdate: "2007-09-01", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" },
    { id: "4", invdate: "2007-10-04", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00" },
    { id: "5", invdate: "2007-10-05", name: "test2", note: "note2", amount: "300.00", tax: "20.00", total: "320.00" },
    { id: "6", invdate: "2007-09-06", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" },
    { id: "7", invdate: "2007-10-04", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00" },
    { id: "8", invdate: "2007-10-03", name: "test2", note: "note2", amount: "300.00", tax: "20.00", total: "320.00" },
    { id: "9", invdate: "2007-09-01", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" },
    { id: "10", invdate: "2007-10-01", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00" },
    { id: "12", invdate: "2007-10-02", name: "test2", note: "note2", amount: "300.00", tax: "20.00", total: "320.00" },
    { id: "13", invdate: "2007-09-01", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" },
    { id: "14", invdate: "2007-10-04", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00" },
    { id: "15", invdate: "2007-10-05", name: "test2", note: "note2", amount: "300.00", tax: "20.00", total: "320.00" },
    { id: "16", invdate: "2007-09-06", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" },
    { id: "17", invdate: "2007-10-04", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00" },
    { id: "18", invdate: "2007-10-03", name: "test2", note: "note2", amount: "300.00", tax: "20.00", total: "320.00" },
    { id: "19", invdate: "2007-09-01", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" },
    { id: "11", invdate: "2007-10-01", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00" },
    { id: "20", invdate: "2007-10-02", name: "test2", note: "note2", amount: "300.00", tax: "20.00", total: "320.00" },
    { id: "23", invdate: "2007-09-01", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" },
    { id: "24", invdate: "2007-10-04", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00" },
    { id: "25", invdate: "2007-10-05", name: "test2", note: "note2", amount: "300.00", tax: "20.00", total: "320.00" },
    { id: "26", invdate: "2007-09-06", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" },
    { id: "27", invdate: "2007-10-04", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00" },
    { id: "28", invdate: "2007-10-03", name: "test2", note: "note2", amount: "300.00", tax: "20.00", total: "320.00" },
    { id: "29", invdate: "2007-09-01", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" }
    ];
    jQuery("#list4").jqGrid({
        datatype: "local",
        data: mydata,
        width: 200,
        height: 250,
        colNames: ['Inv No', 'Date', 'Client', 'Amount', 'Tax', 'Total', 'Notes'],
        colModel: [
    { name: 'id', index: 'id', width: 60, sorttype: "int" },
    { name: 'invdate', index: 'invdate', width: 90, sorttype: "date" },
    { name: 'name', index: 'name', width: 100 },
    { name: 'amount', index: 'amount', width: 80, align: "right", sorttype: "float" },
    { name: 'tax', index: 'tax', width: 80, align: "right", sorttype: "float" },
    { name: 'total', index: 'total', width: 80, align: "right", sorttype: "float" },
    { name: 'note', index: 'note', width: 150, sortable: false }
],
        multiselect: true,
        caption: "Manipulating Array Data",
        shrinkToFit: false,
        loadComplete: function () {
            $('#gview_list4>div.ui-jqgrid-bdiv').jScrollPane();
        }
    });

</script>
</body> 
```

我在 bDiv 上的 loadcomplete 期间设置 jSrollPane。我还尝试将它应用于包含 hdiv 和 bdiv 的外部 div 元素。但这不起作用。任何人都可以提出解决这个问题的方法吗？我能做些什么来获得所需的行为吗？

提前致谢 ：） ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:31:31.550

[这里](https://stackoverflow.com/questions/13505536/how-to-use-jscrollpane-with-jqgrid?answertab=votes#tab-top)提到的解决方案解决了 我的问题。我必须将网格标题绑定到网格体的滚动事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:18:03.187

我认为这可能是错误：`$('#gview_list4>div.ui-jqgrid-bdiv').jScrollPane();`

尝试更改为：

```
$('div.summaries .ui-jqgrid-bdiv').jScrollPane({ 
    scrollbarWidth: 15, scrollbarMargin: 0 
}); 
```

在 HTML 上，一个这样的结构：

```
 <div id="summaries" style="text-align: center;" class="summaries">
    <div id="summaries_container">
          <table id = "gview_list4"></table>
    </div>
</div> 
```

# javascript - 用于将文本拆分为句子并保留分隔符的 Javascript RegExp

> ID：11761563
> 
> 赞同：30
> 
> 时间：2012-08-01T14:35:18.187
> 
> 标签：javascript, regex, sentence

我正在尝试使用 javascript 的拆分从字符串中获取句子，但保留分隔符，例如！？。

到目前为止我有

```
sentences = text.split(/[\\.!?]/); 
```

哪个有效，但不包括每个句子的结尾标点符号 (.!?)。

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-08-01T14:43:34.433

您需要使用匹配而不是拆分。

尝试这个。

```
var str = "I like turtles. Do you? Awesome! hahaha. lol!!! What's going on????";
var result = str.match( /[^\.!\?]+[\.!\?]+/g );

var expect = ["I like turtles.", " Do you?", " Awesome!", " hahaha.", " lol!!!", " What's going on????"];
console.log( result.join(" ") === expect.join(" ") )
console.log( result.length === 6); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-01-10T00:30:29.003

以下是拉里答案的一个小补充，它也将匹配副句：

```
text.match(/\(?[^\.\?\!]+[\.!\?]\)?/g); 
```

应用于：

```
text = "If he's restin', I'll wake him up! (Shouts at the cage.) 
'Ello, Mister Polly Parrot! (Owner hits the cage.) There, he moved!!!" 
```

给予：

```
["If he's restin', I'll wake him up!", " (Shouts at the cage.)", 
" 'Ello, Mister Polly Parrot!", " (Owner hits the cage.)", " There, he moved!!!"] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-01T14:38:38.057

Try this instead:-

```
sentences = text.split(/[\\.!\?]/); 
```

`?` is a special char in regular expressions so need to be escaped.

Sorry I miss read your question - if you want to keep delimiters then you need to use `match` not `split` see [this question](https://stackoverflow.com/questions/11230178/javascript-split-regular-expression-keep-the-delimiter)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-04-07T04:38:36.087

对 mircealungu 的回答略有改进：

```
string.match(/[^.?!]+[.!?]+[\])'"`’”]*/g); 
```

*   开头不需要左括号。
*   句中包含诸如`'...'`,`'!!!'`等标点符号。`'!?'`
*   包括任意数量的方括号和右括号。[编辑：添加了不同的右引号]

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-06-22T18:13:08.807

在这里改进 Mia 的答案是一个版本，其中还包括没有标点符号的结尾句子：

```
string.match(/[^.?!]+[.!?]+[\])'"`’”]*|.+/g) 
```

# msbuild - 无法从程序集“Microsoft.Data.Schema.Tasks.Sql”加载错误“SQLBuildTask”任务

> ID：11761565
> 
> 赞同：4
> 
> 时间：2012-08-01T14:35:22.973
> 
> 标签：msbuild, dbproj

我正在尝试使用 msbuild.exe 构建一个 db 项目，该项目在具有 Windows Server 2008 R2 Enterprise 的 64 位操作系统的 VM 上运行。我的大多数应用程序都成功构建，这个数据库项目给我带来了问题。.NET Framework 2 和 4 已安装。

`error MSB4062: The "SqlBuildTask" task could not be loaded from the assembly Microsoft.Data.Schema.Tasks.Sql, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a. Could not load file or assembly 'Microsoft.Data.Schema.Tasks.Sql, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified. Confirm that the <UsingTask> declaration is correct, that the assembly and all its dependencies are available, and that the task contains a public class that implements Microsoft.Build.Framework.ITask.`

我已经在这个站点上查看了一个可能的解决方案：[Getting MSBuild and CruiseControl .NET to build and deploy VS2010 database projects](https://stackoverflow.com/questions/3988879/getting-msbuild-and-cruisecontrol-net-to-build-and-deploy-vs2010-database-proje)

但是我确实在我的构建机器上安装了 VS2010，但我仍然收到此错误

我已经做过的事情：

*   检查带有DB项目的解决方案在VS2010中是否成功构建
*   使用 msbuild MyDBtest.dbproj 运行 msbuild 命令 - 这给了我同样的错误。

为了让它发挥作用，我还能缺少什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T07:21:09.897

原来我为 dbproj 执行了错误版本的 MSbuild，我需要使用 C:\Windows\Microsoft.NET\Framework64\v4.0.30319 而不是 C:\Windows\Microsoft.NET\Framework64\v2.0.50727 中的那个. 早期版本不支持 .dbproj 类型。

# cakephp - ajax拉一个php文件

> ID：11761569
> 
> 赞同：0
> 
> 时间：2012-08-01T14:35:26.770
> 
> 标签：cakephp, jquery

我正在使用 cakephp。我有一个 ajax 请求，它正在拉一个要显示的 php 文件。
我遇到的问题是被拉取的 php 文件需要在拉取之前执行 php 代码。它是创建表单的 cakephp 代码。目前，如果我直接通过浏览器查看它，则显示 php 文件是因为它在文件中而不是 html 中。

我不确定如何克服这一点。有任何想法吗？
非常感谢

**代码**
Jquery -

```
var request = $.ajax({
        url: "/files/Users/"+name+".ctp",
        type: "GET",
        dataType: "html",
        error: function(jqXHR, textStatus) {
            $('#pageLoading p').html('We have experienced a problem. Please try again later.');
            return false;
        },
        success: function(msg) {
            sortData(msg);
        } 
```

php 文件的一部分（实际上是一个 .ctp 文件，但其中包含 .php 代码） -

```
<?php
echo $this->Form->create();
$options = array(
'label' => ' ',
'id' => 'formSubmit',
'class' => 'userSubmit',
'div' => FALSE
);
echo $this->Form->end($options);
?> 
```

使用 cakephp，这个 php 显示为 html，但是当我使用 ajax 抓取它并在屏幕上打印它时，它会显示为如图所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:15:13.783

您的基本想法似乎是错误的：不要`.ctp`直接获取文件，而是坚持控制器/视图的想法。所以改为在你的控制器
中创建一个控制器方法`Users`

```
public function show_form($name){
} 
```

确保您已准备好包含表单代码的匹配视图文件。例如`View/Users/show_form.ctp`。

下一步：确保您的脚本调用：`http://example.com/users/show_form/the_name`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:08:10.437

`url: "/files/Users/"+name+".ctp",`

在我看来不对。

您需要传入 ，`controller/action`以便 Cake 正确执行和解析视图文件。

也`$this->layout = 'ajax';`可能很方便；所以你不会在响应中得到你的“主要”布局html代码。

# php - 将配置保存到数据库 - 键值存储

> ID：11761573
> 
> 赞同：0
> 
> 时间：2012-08-01T14:35:42.057
> 
> 标签：php, mysql, zend-framework

> 我们的应用程序有许多配置指令。诸如*“是否启用了多种语言？”之类的东西。*或*“应该使用哪个 CSS 模板？”* 或*“每页应显示多少项？”* .

我们需要将配置指令存储在 DB 中。目前，我们**为配置的每个“区域”**都有一个表，并且该表只有**一行包含 columns 中的值**。这种方法允许我们对值施加约束——让它成为 ENUM、INT、VARCHAR 等。但是当我们需要添加新的配置指令时它是巨大的 PITA——我们需要更新和重新部署 DB 模式。它还污染了许多`setup_something`表的表空间。

我的想法是用基于 MySQL 的键值存储替换表（我们使用共享主机，配置选项很少，所以我们不能使用 NoSQL）。某些值可能取决于语言环境或其他变量，但我认为它可以通过诸如回退之类的方法来解决（查找以“lang:fr”开头的键，如果找不到，请尝试以“lang:default”开头的键（这将时刻准备着）。

约束只能在 PHP 中使用具体的设置类进行检查，但不会进行数据库检查。

1.  是否有任何现成的解决方案（最好与 Zend Framework 配合使用）。
2.  这个解决方案的缺陷是什么（除了显而易见的——我不能一次获取整个“行”或一次获取多行——这不是问题）
3.  [你使用过|你会使用] 类似的解决方案还是完全不同的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:43:53.480

您可以简单地拥有一个包含所有配置设置的 MySQL 表。也许是这样的：

```
config_id (INT autoincrement)
config_group (VARCHAR) this gives you something to group your configuration setting with
config_key (VARCHAR) this would be the key name by which you would reference the value
data_type (VARCHAR) you can use this to tell your application how you want to treat this data within the application (i.e. treat it as integer, float, string, etc.)
value (VARCHAR) the value 
```

当然，您随后需要获取字符串值并在代码中对其进行操作，以将其视为整数、浮点数、字符串等。

也许请注意最干净的做事方式，但已经多次看到这种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T14:49:33.987

Wordpress 系统（当然使用 MySQL）有一个 wp_options 表。它包含以下列：

```
 option_id    (autoincrement pk)
 blog_id      (parameter grouping number)
 option_name  (text of option name)
 option_value (text of option value)
 autoload     ('yes' or 'no') 
```

option_value 可以是简单的数字（0、1、42），也可以是需要的文本字符串。一些 option_value 项是可解析的类似 JSON 的序列化参数集。

如果需要，自动加载列允许您的系统跳过很少使用的设置。

这工作得很好，并提供了很大的灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:57:17.200

将您的键/值存储在 php 数组中，对其进行序列化，然后将结果字符串存储在数据库表的文本列中。很大的灵活性和易于实施。唯一真正的缺点是您无法查询单个属性。

# iphone - 快速的用户输入搞砸了 UIViewAnimation

> ID：11761574
> 
> 赞同：0
> 
> 时间：2012-08-01T14:35:43.223
> 
> 标签：iphone, uiviewanimation

我正在制作一个自定义 ImagePicker，类似于通常的 UIImagePickerController，除了您可以点击以选择最多 3 张照片。当您点击选择第一张照片时，一个小的 UIView 托盘将从底部滑入，所选缩略图将出现在那里。当您点击以选择第二张和第三张照片时，它们将被添加到选定的照片托盘中。如果您在选择器中点击同一张照片，它将从托盘中移除。（为代码中的神奇数字道歉；我现在仍在测试）

我在下面附上了一张裁剪过的照片，以了解正确选择了 3 张照片后托盘的外观。

[http://dl.dropbox.com/u/762437/screen1.jpg](http://dl.dropbox.com/u/762437/screen1.jpg)

如果以正常速度点击照片，一切正常。但是，如果用户以某种方式决定以随机方式快速点击照片，它偶尔会弄乱动画和照片在托盘上的位置。

我在下面附上了一个例子。在下面的示例中，实际上只选择了 2 张照片，但不知何故，第 3 张照片仍然部分可见。

[http://dl.dropbox.com/u/762437/screen2.jpg](http://dl.dropbox.com/u/762437/screen2.jpg)

当用户决定只是“捣碎按钮”时，我不确定如何减轻这种行为，可以这么说。

我认为使用 @synchronized(self) 并包装 assetsWasTapped 函数的内部可能会很好，但它似乎没有做任何事情（从主线程调用assetsWasTapped）。

有时，我可能会看到两张照片被添加到托盘中的同一位置，这让我认为我的 NSMutableArray 计数 (selectedPhotos) 存在时间问题，我用它来确定每个缩略图的位置。

对于具体问题，我深表歉意，但也许更通用的版本是如何处理动画和快速用户输入。

任何帮助将不胜感激。谢谢！

```
- (void)assetWasTapped:(CustomAsset*)tappedAsset
{
    // The asset thumbnail was tapped.  Check if the count is < 3 and add to the tray
    if([selectedAssets count] < 3)
    {
        NSMutableDictionary *dataToAdd = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                          tappedAsset, @"selectedAsset",
                                          [[tappedAsset.asset defaultRepresentation] url], @"selectedAssetURL",
                                          tappedAsset.indexPath, @"selectedAssetIndexPath",
                                          [NSNumber numberWithInt:[tappedAsset tag]], @"selectedAssetTag", nil];
        [selectedAssets addObject:dataToAdd];
        [self addAssetToSelectedTray:tappedAsset];
    }
}

- (void)addAssetToSelectedTray:(CustomAsset*)tappedAsset
{
    UIView *existingButton;
    int xPos = 30;

    CustomAsset *tempCustomAsset = [[[CustomAsset alloc] initWithAsset:tappedAsset.asset] autorelease];

    // Switch to deal with 1~3 selected assets
    switch ([selectedAssets count]) 
    {  
        case 1:
            tempCustomAsset.frame = CGRectMake(125, 8, 73, 73);
            [selectedPhotosTray addSubview:tempCustomAsset];
            break;
        case 2:
            for(existingButton in [selectedPhotosTray subviews])
            {

                [UIView animateWithDuration:0.1
                                      delay:0.0
                                    options:UIViewAnimationOptionCurveEaseOut 
                                 animations:^{ 
                                     existingButton.frame = CGRectMake(70, 8, 73, 73);
                                 }

                                 completion:^(BOOL  completed){

                                 }
                 ];
            }
            tempCustomAsset.frame = CGRectMake(180, 8, 73, 73);
            [selectedPhotosTray addSubview:tempCustomAsset];
            break;
        case 3:
            for(existingButton in [selectedPhotosTray subviews])
            {

                [UIView animateWithDuration:0.1
                                      delay:0.0
                                    options:UIViewAnimationOptionCurveEaseOut 
                                 animations:^{ 
                                     existingButton.frame = CGRectMake(xPos, 8, 73, 73);
                                 }

                                 completion:^(BOOL  completed){

                                 }
                 ];
                xPos += 95;
            }

            tempCustomAsset.frame = CGRectMake(220, 8, 73, 73);
            [selectedPhotosTray addSubview:tempCustomAsset];
            break;
        default:
            break;
    }
}

- (void)removeAssetFromSelectedTray:(CustomAsset*)tappedAsset
{
    // If the asset was removed, remove from the tray
    [UIView animateWithDuration:0.2
                          delay:0.0
                        options:UIViewAnimationOptionCurveEaseInOut 
                     animations:^{ 
                         tappedAsset.transform = CGAffineTransformMakeScale(0.3, 0.3);
                         tappedAsset.alpha = 0.0;
                     }

                     completion:^(BOOL  completed){
                         [tappedAsset removeFromSuperview];

                         if([selectedAssets count] == 0)
                         {
                             [self closeSelectedPhotosTrayWithAnimation:YES];
                         }

                         int xPos = 70;
                         UIButton *existingButton;
                         switch ([selectedAssets count]) 
                         {
                             case 1:
                                 for(existingButton in [selectedPhotosTray subviews])
                                 {
                                     [UIView animateWithDuration:0.1
                                                           delay:0.0
                                                         options:UIViewAnimationOptionCurveEaseOut 
                                                      animations:^{ 
                                                          existingButton.frame = CGRectMake(125, 8, 73, 73);
                                                      }

                                                      completion:^(BOOL  completed){

                                                      }
                                      ];
                                 }
                                 break;
                             case 2:

                                 for(existingButton in [selectedPhotosTray subviews])
                                 {
                                     [UIView animateWithDuration:0.1
                                                           delay:0.0
                                                         options:UIViewAnimationOptionCurveEaseOut 
                                                      animations:^{ 
                                                          existingButton.frame = CGRectMake(xPos, 8, 73, 73);
                                                      }
                                                      completion:^(BOOL  completed){
                                                      }
                                      ];

                                     xPos += 110;
                                 }            
                                 break;            
                             default:

                                 break;
                         }
                     }
     ];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:48:55.093

当我遇到类似的事情时，答案往往是使用 the`UIViewAnimationOptionBeginFromCurrentState`或任何它的名字。这里没有代码完成哈哈。

但这可能取决于您如何走自己的路。如果它有一个最终的安息之地，那么应该可以解决它。

您可以做的另一件事是在动画开始时将其设置`userInteractionEnabled`为，然后在完成块`NO`中将其设置回，以确保一次只播放一个动画。`YES`

# validation - 操作按钮后的消息“丰富：notifyMessages”

> ID：11761577
> 
> 赞同：0
> 
> 时间：2012-08-01T14:35:49.830
> 
> 标签：validation, jsf, richfaces

我使用“丰富：notifyMessages”在验证问题后显示错误，但我现在需要的是在操作按钮后显示相同类型的消息，例如，使用“onComplete”标签？我需要显示的消息是这样的：“恭喜操作成功完成”...... tnx ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:24:14.667

您可以使用 oncomplete 触发一个 jsFunction 设置一个面孔消息，然后呈现该消息。我用它来确认按下发送按钮后确实发送了一封新撰写的电子邮件。

```
public static void addInfoMessage(String message) {
    FacesContext.getCurrentInstance().addMessage("info", new FacesMessage(FacesMessage.SEVERITY_INFO, message, message));
} 
```

# c# - 使用具有多个端点的相同 wcf 的多个 Windows 服务？

> ID：11761579
> 
> 赞同：0
> 
> 时间：2012-08-01T14:35:55.680
> 
> 标签：c#, wcf, windows-services, endpoints, base-address

需要一些帮助，了解某人过去可能针对以下问题采取的最佳方法......

通过调用第三方 COM 的 Windows 服务托管 WCF。不幸的是，COM 是 STAThead，这意味着它在一个进程范围内运行时只使用一个内核。

为了解决这个问题，我想复制 Windows 服务（我在安装过程中使用不同的服务名称很容易完成）创建另一个进程范围，以便 COM 互操作将使用另一个核心。

问题：如何将每个服务托管在不同的地址下，以便客户端可以调用他们想要使用 WCF 方法的任何服务？

如果我使用不同的端点并将每个 Windows 服务指向不同的端点，我会收到一条错误消息，指出每个基地址只允许一个主机。

我可以为同一个协议添加多个基地址（可能是不同的端口）并且仍然将它们链接到不同的主机服务吗？

例子会很棒:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:26:03.570

在我看来，您真的希望 WCF 服务使用此 COM 对象的多个实例。您可以启动新线程（每个 STA）来实例化并使用它们自己的 COM 对象，这样您就可以一次使用多个这些 COM 对象。当然，您必须将任何结果传回 WCF 线程。

如果要托管多个 WCF 服务实例，则取决于您的托管方式。在 ii6 中，您可以简单地创建另一个 .svc 文件。这将在与该应用程序池中的所有其他内容相同的进程中运行该服务。您可以通过为其分配不同的应用程序池来让服务在不同的进程中运行。我不确定您是否可以在每个 .svc 的基础上执行此操作。如果您使用的是 IIS 7，您可以执行 .svc 或使用 IIS7 中的 Windows 进程激活服务 (WAS) 支持，在这种情况下，您基本上可以在配置中创建另一个元素。我相信您可以在 Windows Server 2008 R2 中使用 WAS，而无需真正使用 IIS...

# jsf - 如何更新 通过 ajax

> ID：11761580
> 
> 赞同：0
> 
> 时间：2012-08-01T14:35:56.723
> 
> 标签：jsf, jsf-2

我正在使用 primefaces 3.2

当用户分页时，我想更新 globalFiler 值

附加代码不起作用：

```
 rowsPerPageTemplate="5,10,15"
                 rows="10"
                 widgetVar="objectTable">
        <p:ajax event="page" listener="#{bean.onPaginate}" update="globalFilter"/>
        <f:facet name="header">  
            <p:outputPanel style="float: right">  
                <h:outputText value="Search all fields:" />  
                <p:inputText id="globalFilter" 
                             value="#{bean.globalFilter}" 
                             onkeypress="if (event.keyCode == 13) {objectTable.filter()}" 
                             style="width:150px"/>
            </p:outputPanel>  
        </f:facet> 
```

豆代码：

```
public void onPaginate(PageEvent event){
     globalFilter = "test";
} 
```

知道为什么输入文本值没有更新吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:05:00.707

看起来像是[PFS（PrimeFaces 选择器）](http://www.primefaces.org/showcase/ui/selectors.jsf)的工作，我认为它从 3.3 开始（不确定）

而不是`update="globalFilter"`尝试 update="@(.mySpecialFilter)"

并添加到您的`<p:inputText id="globalFilter"....` `styleClass="mySpecialFilter"`

它应该工作（至少在理论上......）

# c# - 使用 touchtarget 时保持关闭

> ID：11761581
> 
> 赞同：0
> 
> 时间：2012-08-01T14:35:57.817
> 
> 标签：c#, visual-studio-2010, xna

我正在使用 C#、XNA 和 Surface.Core 库为 Microsoft Surface 2.0 开发应用程序。当我实例化 TouchTarget 然后立即处理它。

```
 protected override void Initialize()
    {
        TouchTarget touchTarget = new TouchTarget(this.Window.Handle);
        touchTarget.Dispose();
        touchTarget = null;
        base.Initialize();
    } 
```

当我退出 Visual Studio 2010 调试器时，它会挂起约 3-5 秒。挂起发生在代码退出 Main 方法的 using 部分之后。

```
 public static void Main()
    {
        using (mainGame game = new mainGame())
        {
            game.Run();
        }
    } 
```

# wpf - 将按钮添加到每个数据网格行

> ID：11761582
> 
> 赞同：0
> 
> 时间：2012-08-01T14:35:58.577
> 
> 标签：wpf

在 WPF 数据网格中，我想在每行的每个第一个单元格中显示一个按钮。它将在弹出窗口中显示该行 ID (contactId)。到目前为止，我有这个代码。

弹出窗口不显示。以及如何在该行中获取 ContactId ？

谢谢

```
<DataGrid AutoGenerateColumns="True" IsReadOnly="False"  Height="186" HorizontalAlignment="Left" Margin="12,41,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="479" >
            <DataGrid.Columns>
                <DataGridTemplateColumn>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Name="EditBtn" >Edit</Button>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <Popup IsOpen="{Binding Click, ElementName=EditBtn}" Margin="0,0,-101,0">
            <Border Background="LightYellow">
                <TextBlock> I'M the popup</TextBlock>
            </Border>
        </Popup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:56:10.470

You can set the Button's Tag Property to the ContactID

```
<Button Name="EditBtn" Tag={Binding ...} >Edit</Button> 
```

# moodle - quickforms和moodle

> ID：11761583
> 
> 赞同：2
> 
> 时间：2012-08-01T14:35:59.260
> 
> 标签：moodle, quickform

请帮助我，有人知道我哪里出错了，这开始让我烦恼。

我正在使用moodle 2.2和快速表单，它会在提交时保存到数据库中，但随后会返回错误的表单。

mysqli::real_escape_string() 期望参数 1 是字符串，数组在**/$root/lib/dml/mysqli_native_moodle_database.php中给出**

我还尝试将表单中的文档上传到课程上下文中以进行大规模挣扎。

```
<?php

require_once("../../config.php");

$courseid=2;      

if (!$course = $DB->get_record('course', array('id'=>$courseid))) {
    error('Site is misconfigured');
}

$context = get_context_instance(CONTEXT_COURSE, $course->id);

require_login($courseid);

/// Otherwise fill and print the form.
$thetitle = 'Edit Vacancy';

$PAGE->set_title($thetitle);
$PAGE->set_heading($thetitle);
$PAGE->set_pagelayout('base');
$PAGE->navbar->add($thetitle);
$PAGE->set_url('/systems/phones/index.php');

require_once('create_form.php');

//Instantiate simplehtml_form 
$mform = new simplehtml_form();

//Form processing and displaying is done here
if ($mform->is_cancelled()) {
//Handle form cancel operation, if cancel button is present on form
redirect('view.php');

} else if ($fromform = $mform->get_data()) {
//In this case you process validated data. $mform->get_data() returns data posted in form.
$toform = new stdClass();
$toform->title = $fromform->title;
$toform->refno = $fromform->refno;
$toform->closedate = $fromform->closedate;
$toform->hours = $fromform->hours;

$options = array('subdirs'=>1, 'maxbytes'=>$CFG->userquota, 'maxfiles'=>-1, 'accepted_types'=>'*', 'return_types'=>FILE_INTERNAL);

$toform = file_postupdate_standard_filemanager($toform, 'files', $options, $context, 'user', 'private', 0);

$DB->insert_record('systems_jobs', $toform);

} else {
// this branch is executed if the form is submitted but the data doesn't validate and the form should be redisplayed
// or on the first display of the form.

//Set default data (if any)

$mform->set_data();
//displays the form
}

echo $OUTPUT->header();
$mform->display();
echo $OUTPUT->footer();
?> 
```

使用我的表格：

```
<?php

if (!defined('MOODLE_INTERNAL')) {
    die('Direct access to this script is forbidden.');    ///  It must be included from a Moodle page
}

require_once($CFG->libdir.'/formslib.php');

class simplehtml_form extends moodleform {
//Add elements to form
function definition() {
global $CFG;

$mform = $this->_form; // Don't forget the underscore! 

$mform->addElement('text', 'refno', 'Post Number:'); // Add elements to your form
$mform->setType('refno', PARAM_NOTAGS);//Set type of element

$mform->addElement('text', 'title', 'Post Title:'); // Add elements to your form
$mform->setType('title', PARAM_NOTAGS);//Set type of element

$mform->addElement('filepicker', 'reference', 'Specification:', null, array('maxbytes' => $CFG->maxbytes, 'accepted_types' => '*'));
if (empty($entry->id)) {
    $entry = new stdClass;
    $entry->id = null;
}

$mform->addElement('date_selector', 'closedate', 'Close Date:', array(
    'startyear' => 2012, 
    'stopyear'  => 2020
));

$mform->addElement('editor', 'hours', 'Info:');
$mform->setType('hours', PARAM_RAW);

$this->add_action_buttons();
}

//Custom validation should be added here
function validation($data, $files) {
    $errors = parent::validation($data, $files);

    $mform = $this->_form;

    $errors = array();

    if ($mform->elementExists('refno')) {
            $refno = trim($data['refno']);
            if ($refno == '') {
                $errors['refno'] = get_string('required');
            }
    }

    if ($mform->elementExists('title')) {
            $title = trim($data['title']);
            if ($title == '') {
                $errors['title'] = get_string('required');
            }
    }

        return $errors;
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T12:48:20.713

我刚刚加入了这个网站，刚刚浏览了关于moodle的帖子，偶然发现了这个帖子。我认为您现在可能已经解决了这个问题，但是对于其他任何人：

当您在任何页面上显示 moodle 表单时，您应该这样做：

```
if($form->is_cancelled()) {
    //Write the code to handle the event where user clicks the cancel 
    //button on the form
    //This is where (generally) you would use the redirect function
} else if($data = $form->get_data(true)) {
    //This is where you can process the $data you get from the form
} else {
    //This is where you should add the commands that display the page when 
    //displaying the form for first time (when page loads)
    echo $OUTPUT->header();
    echo $OUTPUT->heading();
    //Add other commands
    echo $OUTPUT->footer();
} 
```

干杯桑迪普

# c - 如何在我的 GTK 应用程序中隐藏光标（用 C 编写）

> ID：11761584
> 
> 赞同：1
> 
> 时间：2012-08-01T14:36:00.343
> 
> 标签：c, ubuntu, gtk

我正在尝试创建一个全屏应用程序，它将隐藏光标以显示视频文件。目前，除了隐藏光标的能力之外，一切都运行良好（将光标卡在视频上并导致演示效果不佳是令人讨厌的）。

我的项目是用 C 而不是 C++ 编写的，并且使用 GTK+-3.0 库以及 WebKitGtk。如果有人可以帮助隐藏光标（我认为这真的很简单，但也许我正在削弱它）。最后，这是在 Ubuntu 12.04 上运行和编译的。

那么有没有办法隐藏这个烦人的光标呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T19:29:05.803

[`gdk_window_set_cursor()`](http://developer.gnome.org/gdk/stable/gdk-Windows.html#gdk-window-set-cursor)与 一起使用`GDK_BLANK_CURSOR`。

# android - Android大PNG不显示问题

> ID：11761586
> 
> 赞同：1
> 
> 时间：2012-08-01T14:36:04.553
> 
> 标签：android, png, large-files

这是我刚刚遇到的一个问题。

我使用的是 3000 px h 和 1 px 宽的 png，然后在 xml 中向下挤压和拉伸。在 Eclipse 的 xml 布局设计器视图中，它显示得很好，但在设备上却没有。

这很奇怪！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:36:04.553

我不知道为什么，但似乎 android 编译器/渲染器中的最大图像高度为 2000px 或其他什么？我的解决方法是使图像高度为 2000 像素。

# log4j - 如何使用自定义的 log4j.xml 在 netty 中配置记录器？

> ID：11761587
> 
> 赞同：2
> 
> 时间：2012-08-01T14:36:05.017
> 
> 标签：log4j, netty

我的项目中使用了 Netty 和 Hibernate。我在源文件夹中有 log4j.xml 和 commons-logging.properties。commons-logging.properties 中的代码是

```
org.apache.commons.logging.Log=org.apache.commons.logging.impl.Log4JLogger 
```

Hibernate 可以使用 log4j.xml 中的配置成功登录，但 netty 不能。

没有这样的用户手册可以教我如何在netty中配置记录器。所以请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T12:10:19.520

You can set the logger in Netty via

```
InternalLoggerFactory.setDefaultFactory(new Log4JLoggerFactory()); 
```

Hope this is what you were looking for.

# java - 支持 DTD 的 Java ValidationAPI 库

> ID：11761590
> 
> 赞同：5
> 
> 时间：2012-08-01T14:36:12.137
> 
> 标签：java, validation, dtd

我使用多个 xsd 模式来验证 XML 文档。这是我用来执行此操作的一段代码：

```
public static Schema createSchemaXSD(InputStream inputXSD, LSResourceResolver resolver) throws SAXException {
    SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
    factory.setResourceResolver(resolver);
    Source schemaSource = new StreamSource(inputXSD);
    Schema schema = factory.newSchema(schemaSource);
    return schema;
} 
```

`LSResourceResolver`是用于开发一个类的接口，该类可以解决根模式包含在其 xsd 中的 xsd 模式的加载。我编写了一个从类路径加载包含文件的实现，因为我的模式被打包在那里（不在文件系统上）

突然，我需要切换到针对多个 DTD 进行验证，所以我将代码更改为：

```
public static Validator createValidatorDTD(InputStream inputDTD, LSResourceResolver resolver) throws SAXException {
    SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.XML_DTD_NS_URI);
    factory.setResourceResolver(resolver);
    Source schemaSource = new StreamSource(inputDTD);
    Schema schema = factory.newSchema(schemaSource);
    Validator validator = schema.newValidator();
    return validator;
} 
```

不幸的是，这不起作用。它在为 SchemaFactory 创建工厂时抛出异常：

```
No SchemaFactory that implements the schema language specified by: http://www.w3.org/TR/REC-xml could be loaded 
```

我根据文章进行了研究：[Java XML Validation API](http://www.ibm.com/developerworks/xml/library/x-javaxmlvalidapi/index.html)和[java.xml.validation 文档](http://docs.oracle.com/javase/6/docs/api/javax/xml/validation/package-summary.html)。他们都指定`XMLConstants.XML_DTD_NS_URI`支持，但未在 Sun 的 JDK 5 中实现（据我所知，在 JDK 6 中），我应该使用其他一些支持 DTD 验证的库。

我试图在谷歌上搜索，但没有找到任何东西（或者我不知道如何搜索）。我知道您可以使用 DOM 和 TrAX 针对 DTD 验证文档，但是这些要求您的文件系统上有 DTD。我的 DTD 和模式位于类路径中，因此我需要为我的 DTD 自定义加载。这就是我使用`javax.xml.validation.SchemaFactory`and`javax.xml.validation.Schema`首先的原因，因为它们提供了更大的灵活性。

所以我的问题是：是否有一个（或多个库）支持通过 java 验证 API（`XML_DTD_NS_URI`）进行 DTD 验证，我可以使用。我对不同类型的解决方案持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-15T23:34:28.013

一种解决方法是连接您的 DTD 和 XML，并在没有 .schema 的情况下解析或验证。一个例子：

```
String dtd;
String xml;
....
....

src = new InputSource( new ByteArrayInputStream( (dtd + xml).getBytes()) );
try {
    factory = DocumentBuilderFactory.newInstance();
    factory.setValidating(true);
    factory.setIgnoringComments(true);
    builder = factory.newDocumentBuilder();
    partnersDoc = builder.parse(src);
} catch ( ParserConfigurationException ex ){
    ex.printStackTrace(System.err);
} 
```

# jquery - 加载存储在 xml 文件中的外部数据

> ID：11761596
> 
> 赞同：0
> 
> 时间：2012-08-01T14:36:31.807
> 
> 标签：jquery, spring, model-view-controller, jsp

我有一个使用 jquery、jsp、spring mvc 的应用程序。目前我加载存储在 /WEB-INF/resources/data/...xml 中的 xml 文件中的数据：为此，在 JQuery 中我正在这样做：$('#contents').load(contextPath+'/resources /data/data1.xml', ...)

之后，我的 jsp 被提供了 xml 内容。美好的。

现在：我想把 xml 文件放在我服务器的磁盘上。所以它将通过一个路径可用：比如 /myWorkPlace/data/data1.xml

原因是：我想在不重新部署应用程序的情况下更改 XML 内容。

那我怎么能加载这些xml内容呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:46:28.347

在 UNIX 系统中，您可能会尝试创建指向应用程序范围之外的文件的符号链接。但是只在单机上开发是可以的，如果使用多台服务器至少会变得困难，如果要使用不同的托管平台则不可能。

正确的方法是将用于处理静态文件的 Apache 与应用程序服务器（例如 jBoss）绑定，以便使用 AJP 处理其他所有内容（您可能想在谷歌上搜索有关特定 AS 的详细信息）。对于运行示例，请查看 Bitnami jBoss 堆栈 (http://bitnami.org/stack/jboss) - 它是这样构建的。

# jquery - 在jQuery中悬停突出显示div

> ID：11761601
> 
> 赞同：0
> 
> 时间：2012-08-01T14:36:49.010
> 
> 标签：jquery, triggers, hover

我之所以要`<div>`突出显示您的选择是因为效果需要在多种类型的元素上。

我想要发生的是突出显示 div 将被鼠标事件完全忽略。

据我所知，唯一的方法是使用`trigger()`.

```
$('#hover').mouseenter(function(){
    // that refers to the element below it.
    $(that).trigger('mouseenter');
}); 
```

然而，悬停高亮 div 本身也被 mouseenter 激活：

```
$('.item').bind('mouseenter.hover', function() {
    hoverEffect(this);      
}) 
```

这是一个[jsfiddle](http://jsfiddle.net/uMjGg/)。

如何触发除 mouseenter.hover**之外**的所有 mouseenter 事件？

或者，如何使所有鼠标事件**完全忽略div？**所以它只会听它下面的那个。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:42:21.700

您可以尝试像这样使用[Pointer-Events](https://developer.mozilla.org/en/CSS/pointer-events/) css 属性：

```
#hover{
   pointer-events: none;
} 
```

这将教会#hover 忽略鼠标事件，并将它们通过自身传播到底层元素。

这在某些浏览器中存在问题，并且可能会产生意想不到的副作用。请在查阅文档后负责任地使用。

# asp.net-mvc - 在 ASP.NET MVC 的 UI 中为用户打开附件

> ID：11761603
> 
> 赞同：1
> 
> 时间：2012-08-01T14:36:56.720
> 
> 标签：asp.net-mvc, ravendb, attachment

我正在尝试做什么 - 当用户单击链接时，从 RavenDB 获取附件并自动为用户打开它。

单击链接时 - 我通过视图/ajax 将附件的附件 ID（已保存在 RavenDB 中）传递给控制器​​方法。一旦进入控制器方法，我想获取附件并为用户显示/打开附件。

看法 ：

```
<a href onclick="GetAttachment('<%= Model.Id %>');"> See attachment </a> 
```

阿贾克斯/JS

```
function GetAttachment(id) {   

$.ajax({
    type: 'POST',
    url: '/ControllerName/GetMethod',
    data: id,
    contentType: 'application/json; charset=utf-8',
    success: function (msg) {
        if (msg.Success) {               
        }
        else {               
        }
     }       
  });
} 
```

控制器 ：

```
 public string GetMethod(string id)
    {          
        var dbCommands = session.Advanced.DatabaseCommands;
        var attachment = dbCommands.GetAttachment(id);
       //Here - How do I use above lines of code to get hold of the 
       // attachment and open it for the user.
    } 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T05:08:19.503

The RavenDB `Attachment` class has a `Data` property of type `Func<Stream>` which is a [thunk](http://en.wikipedia.org/wiki/Thunk_%28functional_programming%29) to the byte stream for the attachment. The stream is what you need to return in your MVC controller:

```
public FileResult GetMethod(string id)
{          
    var dbCommands = session.Advanced.DatabaseCommands;
    var attachment = dbCommands.GetAttachment(id);
    return File(attachment.Data(), "fileName");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:52:16.010

像这样的东西：控制器：

```
public FileResult GetMethod(string id)
{          
    var name = "filename.extension";
    var dbCommands = session.Advanced.DatabaseCommands;
    var attachment = dbCommands.GetAttachment(id);
    var stream = new MemoryStream(attachment.Data);
    return new FileStreamResult(stream, name);
} 
```

看法：

> @Html.ActionLink("见附件", "GetMethod", "ControllerName", new {id = ModelId}, null)

您需要从数据库中获取文件的 MemoryStream 或将文件传输到 MemoryStream

# wcf - 在 WF 4.0 中，有没有办法让通过服务引用导入的活动使用 Azure 端点发现？

> ID：11761604
> 
> 赞同：0
> 
> 时间：2012-08-01T14:37:00.357
> 
> 标签：wcf, azure, workflow-foundation

使用 WF、WCF 和最新的 Azure SDK，我有一个简单的顺序活动，我添加了一个服务引用并重建了项目，因此我的服务方法都作为活动导入。到目前为止，一切都很好，但是我的服务将在模拟器上运行或在具有内部端点的云中运行，因此我需要使用 RoleEnvironment 在运行时发现端点。

有什么办法可以让导入的活动来做到这一点，还是我只需要编写一个自定义活动？我看不到方法，因为活动公开的唯一属性是端点配置值。

如果我必须编写一个自定义活动，我可以将端点传递给我生成的活动（所以我的自定义活动可以是它的包装器）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:24:11.273

简而言之，整理一下：我认为这是不可能的。我最终编写了一个自定义活动来完成它，这很简单。

# c# - 我可以为众多字符串分配 1 个值吗

> ID：11761606
> 
> 赞同：0
> 
> 时间：2012-08-01T14:37:05.413
> 
> 标签：c#, string, .net-2.0

> **可能重复：**
> [C#：在单个语句中为多个变量分配相同的值](https://stackoverflow.com/questions/1419252/c-assign-same-value-to-multiple-variables-in-single-statement)

如果我有一个声明为的字符串，

```
string a,b,c,d......,z; 
```

我想将它们全部赋值为“69”，那么**最好的方法**是什么。

例如

```
a = b = .... = y = z = "69"; 
```

我不想使用任何数组或列表。

**编辑**

想知道最好的方法:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:38:57.293

试试“”

```
 a = b = .... = y = z = "69"; 
```

或者

```
int a,b,c,d......,z;
a = b = .... = y = z = 69; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:39:37.090

它应该是一个字符串：

```
a = b = .... = y = z = "69"; 
```

或者如果它来自一个变量：

```
a = b = .... = y = z = myIntVar.ToString(); 
```

# django - 在 django 中登录后检测浏览器类型

> ID：11761614
> 
> 赞同：-1
> 
> 时间：2012-08-01T14:37:33.287
> 
> 标签：django

我只使用 django 6 个月，我对登录过程的流程并不是很清楚。

我有一个客户端，它有一个由模板创建的自定义登录屏幕。它有一个提交按钮：

在他们的 urls 文件中，他们有：

(r'^accounts/login/$', 登录)

在他们的视图文件中，他们调用 login(request)

他们想要的是，在用户成功登录后，我需要检测他们使用的是哪个浏览器，并根据它可能会弹出一个对话框。我无法弄清楚该代码将存在于何处。我不是在问如何检测浏览器类型，而是在问该 javascript 代码将去哪里，以及如何在登录后调用它。

我可以在登录屏幕中检测浏览器类型并将其传回服务器，但是如果我确实需要弹出对话框，我将如何在登录后将控制权交还给浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:59:16.870

在您的登录视图中，使用[请求对象](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.META)来获取浏览器类型。

您可以创建自己的[登录视图](https://docs.djangoproject.com/en/dev/topics/auth/#authentication-in-web-requests)或操作（您不应该这样做 - 但这是可能的）django-default。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:23:56.267

您应该检查 request.META['HTTP_USER_AGENT']。您可以根据此字符串进行操作，但请注意可以更改浏览器信息。

可能会编写您自己的模板上下文处理器，它将填充所有模板并将 class='firefox-12' 设置为 body 标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:31:01.730

我想你要做的事情必须用 Django 和 HTML 来完成。您将自定义您的登录，在其中选择浏览器类型，然后根据您刚刚收集的结果在模板中使用它来显示您需要的弹出窗口。Django 文档将帮助您处理模板代码，因为它有很多示例可以帮助您。它还有更多示例展示了如何使 Django 与浏览器交互，但当然仅限于 HTML、CSS、Javascript、Jquery 代码。

# sitecore - 从 URL 中删除站点核心/内容

> ID：11761619
> 
> 赞同：2
> 
> 时间：2012-08-01T14:37:55.813
> 
> 标签：sitecore, sitecore6

这里有没有人从 Sitecore 生成的 URL 中成功删除了 sitecore/content。

我正在使用 Sitecore 链接管理器生成 URL。我有一个多站点设置，并且已将 Siteresolving 选项启用为 true。但是，似乎没有办法使用链接管理器使其工作。

GetFriendlyUrl 方法似乎生成没有 sitecore/content 的 URL，但不幸的是它已被弃用，所以这里不是一个选项。

我见过有人建议覆盖 LinkProvider 并编写自定义逻辑以从 URL 中删除站点核心/内容。这确实有效，但不是一个好的解决方案。

我很想在这里向其他 Sitecore 专家学习。

仅供参考：我使用的是 Sitecore 6.4。

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T17:59:31.660

请确保您的网站在此博客文章中正确配置：[您的 URL 中有“/sitecore/content”吗？是时候修复它了。](http://sitecoreblog.alexshyba.com/2012/02/have-sitecorecontent-in-your-link-time.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T04:51:43.670

我找到了解决方案。根据 Mark 的参考，我的多站点配置是正确的。我为解决这个问题所做的是指定生成链接时要使用的站点上下文。

```
Sitecore.Links.UrlOptions URLOptions = new Sitecore.Links.UrlOptions();
URLOptions.Site = Sitecore.Configuration.Factory.GetSite(Your_Site_Name);
return Sitecore.Links.LinkManager.GetItemUrl(ThisItem, URLOptions); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-14T01:30:23.173

仅供参考，我发现以下代码段可用于为我的场景识别正确的上下文站点，其中一个站点上下文的内容是从另一个站点上下文引用的。我计划更新规范链接以通知谷歌正确的网址。

```
public static Sitecore.Web.SiteInfo GetSite(this Sitecore.Data.Items.Item itemYouNeedToCheck)
{
return Sitecore.Configuration.Factory.GetSiteInfoList()
    .OrderByDescending(x=> x.RootPath.Length)
    .FirstOrDefault(x => x.Database!="core" &&    itemYouNeedToCheck.Paths.FullPath.StartsWith(x.RootPath));
} 
```

# transactions - Spring AOP 是否保证了原子性？

> ID：11761623
> 
> 赞同：1
> 
> 时间：2012-08-01T14:38:06.880
> 
> 标签：transactions, spring-aop, atomic

我有以下用例：

我的应用程序中有许多标准实体。当我的应用程序执行这些实体之一的实例的 JPA 保存/合并时，我希望对特殊`Event`实体的实例进行另一次保存。因此，对于标准实体上的每个操作，都会将一个事件插入到数据库中。

我正在考虑使用 AOP 来实现这个横切关注点。但是，**我们要不惜一切代价避免创建标准实体而没有创建事件，**反之亦然：**在插入标准实体和正在创建的事件时发生回滚**。

**那么如何使用 Spring AOP 确保操作的原子性呢？**

欢迎任何线索或提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:52:59.503

只需确保创建事件的方面与创建标准实体的事务在同一事务中运行。一种方法是确保事务方面的顺序将其置于事件保存方面之外。

编辑：根据[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations)确保应用事务方面非常简单在任何其他方面之前。

在您的 tx 定义中包含一个 order 属性...

```
<tx:annotation-driven order="-1"/> 
```

因此，只要您的其他方面的顺序大于 -1，事务方面就会首先运行。有关方面排序的更多信息，请参阅[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-ataspectj-advice-ordering](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-ataspectj-advice-ordering)。

# file - make batch file that creates a folder with today's date then moves files from a folder in to that newly created folder

> ID：11761624
> 
> 赞同：4
> 
> 时间：2012-08-01T14:38:06.547
> 
> 标签：file, batch-file, directory, move

I need to make a batch file that will make a folder with today's date in month day year format (example 080112). Then once it's created i need to move files from a set folder in to the folder it just created. To be honest i don't know how to make a batch file.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:44:22.497

[这将向您展示如何在变量中设置日期。](http://home1.gte.net/res0psau/date-and-time-variable/date-and-time-variable.html)

其余的只是使用 copy/xcopy 到该文件夹​​:)

告诉我您是否需要详细说明如何操作。

干杯!

[编辑]：这是完整的解决方案：

使用记事本创建文件 -> 另存为“something.bat”或使用 CMD -> 复制 con something.bat（完成后按 Ctrl-Z）并粘贴以下代码：

```
@echo off
IF "%1"=="" GOTO MissingArgument
for /f "tokens=2-4 delims=/ " %%a in ('date /T') do set year=%%c
for /f "tokens=2-4 delims=/ " %%a in ('date /T') do set month=%%a
for /f "tokens=2-4 delims=/ " %%a in ('date /T') do set day=%%b
set TODAY=%month%%day%%year%
md %TODAY%
MOVE %1\*.* %TODAY%
GOTO end
:MissingArgument
echo Incorrect Syntax: Source Folder Name Required!
:end 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T23:18:46.587

```
set TODAY=%date:~10,4%%date:~7,2%%date:~4,2% 
```

是将日期部分放入 shell 变量的另一种方法

来自：[http ://stevesgeekspeak.com/2010/01/howto-get-variable-substrings-in-batcmd-scripts/](http://stevesgeekspeak.com/2010/01/howto-get-variable-substrings-in-batcmd-scripts/)

Jony ... FTW，当然，因为有完整的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-24T10:05:05.637

```
FOR /f "tokens=2-4 delims=/ " %%i in ('DATE/T') do SET today_fname=%%i%%j%%k
cd c:\myfolder\%today_fname%
REM This creates a folder named 05242016 in c:\myfolder 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-08T12:36:23.783

```
@echo on

:: Use date /t and time /t from the command line to get the format of your date and
:: time; change the substring below as needed.

:: This will create a timestamp like yyyy-mm-dd-hh-mm-ss.
set TIMESTAMP=%DATE:~10,4%-%DATE:~4,2%-%DATE:~7,2%-%TIME:~0,2%-%TIME:~3,2%-%TIME:~6,2%

@echo TIMESTAMP=%TIMESTAMP%

:: Create a new directory
md e:\example\"%1\%TIMESTAMP%"
xcopy /y c:\windows E:\windows\%TIMESTAMP% /e

@echo on 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-10T15:16:33.240

我自己遇到了这个问题，但不用多说，将您的源文件夹放在文件后面`.bat`：

```
yourscript.bat c:\users\myname\Desktop\sourcefolder 
```

希望对其他人有所帮助，花了我几秒钟的时间：D

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-27T00:59:46.960

Just rename the folder with Erik's suggestion:

```
move FolderName FolderName_%date:~7,2%%date:~4,2%%date:~12,4% 
```

# c# - Word VSTO 覆盖 CTRL+Z / CTRL+Y

> ID：11761633
> 
> 赞同：4
> 
> 时间：2012-08-01T14:38:42.300
> 
> 标签：c#, ms-word, vsto

我正在寻找一种方法来覆盖 Word 2010 (C# + VSTO) 中的撤消 ( `Ctrl``Z`) / 重做 ( `Ctrl``Z`) 命令。是否可以 ？

我设法捕获了复制/粘贴命令，但似乎撤消/重做不是 RibbonUI 中的命令，如复制/粘贴。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T22:23:13.013

如果您想控制撤消/重做的操作，请查看 Microsoft.Office.Interop.Word.UndoRecord。这是我学会正确使用它[的线程！](http://social.msdn.microsoft.com/Forums/is/vsto/thread/275d275f-c569-445a-8d9c-631e01bd1f46)

如果您想捕捉实际的击键，那么您就处于 Windows API 领域。所以一般来说，谷歌术语与此相关。但是[附加组件中的消息挂钩](http://blogs.msdn.com/b/andreww/archive/2009/02/24/message-hooks-in-add-ins.aspx)可能对您有用。

# python - Issues with Selenium running after a long period of time

> ID：11761634
> 
> 赞同：0
> 
> 时间：2012-08-01T14:38:46.670
> 
> 标签：python, firefox, selenium, web-scraping

I've been using Selenium as a scraper/crawler, because I need a page's content after JS is evaluated. I have five EC2 machines that are each running selenium and a couple instances of the scraper I wrote.

However, I'm noticing some really odd behavior. After a couple hours, selenium stops on all the machines at around the same time. Given that I start selenium and the scrapers at the same time on all servers, this leads me to believe that there's some issue with selenium that pops up after long periods of time.

Here's selenium's log:

```
14:34:58.628 INFO - RemoteWebDriver instances should connect to: http://127.0.0.1:4444/wd/hub
14:34:58.629 INFO - Version Jetty/5.1.x
14:34:58.630 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver]
14:34:58.631 INFO - Started HttpContext[/selenium-server,/selenium-server]
14:34:58.631 INFO - Started HttpContext[/,/]
14:34:58.753 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@6a669053
14:34:58.753 INFO - Started HttpContext[/wd,/wd]
14:34:58.764 INFO - Started SocketListener on 0.0.0.0:4444
14:34:58.765 INFO - Started org.openqa.jetty.jetty.Server@2ef36617
21:24:41.031 INFO - Shutting down... 
```

Another interesting thing I noticed: on each cluster, I always have at one scraper instance with this error:

```
File "SiteScraper.py", line 238, in _add_rendered_html
    self.browser.get(url)
  File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/remote/webdriver.py", line 168, in get
    self.execute(Command.GET, {'url': url})
  File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/remote/webdriver.py", line 156, in execute
    self.error_handler.check_response(response)
  File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/remote/errorhandler.py", line 147, in check_response
    raise exception_class(message, screen, stacktrace)
WebDriverException: Message: u'Modal dialog present' 
```

I think this means that selenium or firefox (the browser that I'm using with web driver) is popping up a modal after a certain period of time.

Has anyone had a similar problem/any insight on how to fix this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:32:22.663

当您在机器上启动 selenium 独立服务器时，请尝试使用 java 命令的 -timeout 选项。首先尝试将其设置为非常小的值，以验证它是否导致了问题。比可能将其增加到非常高的值。

# php - How do I correctly call the $_SESSION variable in PHP?

> ID：11761639
> 
> 赞同：0
> 
> 时间：2012-08-01T14:39:10.913
> 
> 标签：php, session, session-variables

I am trying to call the `$_SESSION` `username` variable so that It will show in a URL like

```
/users/USERNAME/ 
```

I know there's a way to do this, but I must be doing it wrong because here's the error I get: Parse error: syntax error,

```
unexpected T_ENCAPSED_AND_WHITESPACE, expecting T_STRING or 
T_VARIABLE or T_NUM_STRING 
```

What am I doing wrong to get this, and how can I fix it?

Here's the code I'm using:

```
move_uploaded_file( $_FILES['md']['tmp_name'], 
"users/'.$_SESSION['username'].".$_FILES['md']['name'] ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T14:41:02.427

错误的混合`"`和`'`一个`"`缺失

```
 move_uploaded_file( $_FILES['md']['tmp_name'], "users/".$_SESSION['username']."/".$_FILES['md']['name'] ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:41:26.590

你有一个解析错误。

```
"users/" 
```

不是

```
"users/' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:41:58.663

你没有在连接之前关闭你的字符串。

```
 move_uploaded_file( $_FILES['md']['tmp_name'], "users/" . $_SESSION['username'] . $_FILES['md']['name'] ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T14:42:33.860

你的代码有错误，试试这个

```
 move_uploaded_file( $_FILES['md']['tmp_name'],"users/".$_SESSION['username'].$_FILES['md']['name'] ); 
```

或者

```
move_uploaded_file( $_FILES['md']['tmp_name'],"users/".$_SESSION['username']."/".$_FILES['md']['name'] ); 
```

# c# - 验证空文本框

> ID：11761644
> 
> 赞同：2
> 
> 时间：2012-08-01T14:39:35.157
> 
> 标签：c#, wpf, validation, multidatatrigger

我的 wpf 应用程序上有三个文本框。当用户在这些文本框中输入值并单击 时`Add`，这些值将添加到列表中并显示在数据网格中。

文本框本身并没有绑定到任何东西，我将这些文本框值添加到绑定到数据网格的观察集合中。我想防止用户在文本框中输入空值。这是怎么做的？

我看到了一些示例，但这些示例都将文本框绑定到值，然后使用`Binding.Validation`. 当绑定到文本框时，这将如何完成？

我还有一个按钮，在输入空值时必须冻结该按钮。为此，我通过创建一个类并以下列方式绑定该类来实现以下方法；

```
<Button.Style>
                <Style TargetType="{x:Type Button}">
                    <Setter Property="IsEnabled" Value="false" />
                    <Style.Triggers>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding ElementName=textBox1, Path=(Validation.HasError)}" Value="false" />
                                <Condition Binding="{Binding ElementName=textBox2, Path=(Validation.HasError)}" Value="false" />
                                <Condition Binding="{Binding ElementName=TextBoxAge, Path=(Validation.HasError)}" Value="false" />                                
                            </MultiDataTrigger.Conditions>
                            <Setter Property="IsEnabled" Value="true" />
                        </MultiDataTrigger>
                    </Style.Triggers>
                </Style>
            </Button.Style> 
```

**.cs 类**

```
 public class TextBoxNotEmptyValidationRule : ValidationRule
    {
        public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
        {
            string str = value as string;
            if (str != null)
            {
                if (str.Length > 0)
                    return ValidationResult.ValidResult;
            }
            return new ValidationResult(false, Message);
        }
        public string Message { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:26:03.257

如果我理解正确，您正在寻找这样的东西：

```
<Button.Style>
    <Style TargetType="{x:Type Button}">
        <Setter Property="IsEnabled" Value="True" />
        <Style.Triggers>
            <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                    <Condition Binding="{Binding Text, ElementName=textBox1}" Value="{x:Static s:String.Empty}" />
                    <Condition Binding="{Binding Text, ElementName=textBox2}" Value="{x:Static s:String.Empty}" />
                    <Condition Binding="{Binding Text, ElementName=TextBoxAge}" Value="{x:Static s:String.Empty}" />
                </MultiDataTrigger.Conditions>
                <Setter Property="IsEnabled" Value="False" />
            </MultiDataTrigger>
        </Style.Triggers>
    </Style>
</Button.Style> 
```

添加此命名空间

```
xmlns:s="clr-namespace:System;assembly=mscorlib" 
```

**更新**

然后这将起作用：

```
<Button.Style>
    <Style TargetType="{x:Type Button}">
        <Style.Resources>
            <local:MyTextValidationConverter x:Key="MyTextValidationConverter" />
        </Style.Resources>
        <Setter Property="IsEnabled">
            <Setter.Value>
                <MultiBinding Converter="{StaticResource MyTextValidationConverter}">
                    <Binding Path="Text" ElementName="textBox1" />
                    <Binding Path="Text" ElementName="textBox2" />
                </MultiBinding>
            </Setter.Value>
        </Setter>
    </Style>
</Button.Style> 
```

而这个转换器代码

```
public class MyTextValidationConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        string text1 = values[0] as string;
        if (string.IsNullOrEmpty(text1)) return false;

        string text2 = values[1] as string;
        if (string.IsNullOrEmpty(text2)) return false;

        return true;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# c# - 动态创建一列作为超链接的数据表

> ID：11761650
> 
> 赞同：2
> 
> 时间：2012-08-01T14:40:01.147
> 
> 标签：c#, asp.net, gridview, hyperlink, datatable

首先：我知道这里已经有一些模糊的类似请求，但是没有一个可以完整地解决我的问题，我正在努力拼凑一个解决方案。

无论如何，所以我正在编写一个 Web 界面来从 RESTful API 获取一些信息。我正在生成一个数据表，我通过这样的 gridview 显示它：

```
DataTable table = new DataTable();
table.Columns.Add("entry name");
table.Columns.Add("col1");
table.Columns.Add("col2");
table.Columns.Add("etc");

foreach(string name in GetNames())
{
    DataRow row = table.NewRow();
    row["name"] = name;
    row["col1"] = SomeMethod(name);
    row["col2"] = SomeOtherMethod(name);
    row["etc"] = YouGetTheIdea(name);
    table.Rows.Add(row);
}

GridView1.DataSource = table;
GridView1.DataBind(); 
```

到目前为止一切顺利。我真正想要的是“名称”列是超链接，这样它们要么调用一个以名称作为参数的方法；或链接到一个网站，名称作为 URL 的一部分，例如：

```
"<a href:'www.example.com/" + name + ".csv'>" + name + "</a>" 
```

我一生都无法弄清楚如何像我想要的那样动态地做这些事情。您的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:46:43.403

一种解决方案是将您的列值设置为 URL，然后对于绑定列，设置`HtmlEncode = false`. 这意味着，在你的`foreach`你会做类似的事情`row['link'] = "<a href='..'>..</a>"`。当它被绑定时，它应该输出为 HTML。

或者，您可以挂钩到 gridview 上的 OnRowDataBound 事件并在后面的代码中操作值。

或者，最后，您可以创建一个适当绑定的 ItemTemplate 列：

```
<asp:TemplateField HeaderText="Seniority">
    <ItemTemplate>
        <a href='example.com/<%# Eval("name")) %>'><%# Eval("name")) %></a>
    </ItemTemplate>
</asp:TemplateField> 
```

# asp.net - 任何类型的文件以及 .aspx 文件的表单身份验证

> ID：11761651
> 
> 赞同：0
> 
> 时间：2012-08-01T14:40:02.537
> 
> 标签：asp.net, forms-authentication, iis-7.5

我有一个为表单身份验证 + 匿名访问设置的网站。

当用户请求任何页面（托管资源，例如 .aspx 页面）时，他会被重定向到 Logon.aspx

如果资源不受管理，例如 .html 、 .png 、 .jpg 等文件，则会出现问题。当用户尝试使用 URL 直接访问这些资源时，他无需任何身份验证即可查看这些资源。他没有被重定向到 LogOn.aspx 页面。

我试过以下：

**通过更改模块中的设置来更改 IIS 7.5 中的设置来编辑 DefaultAuthentication 和 FormsAuthentication 的托管模块。

当我取消选中“仅为对 ASP.NET 应用程序或托管处理程序的请求调用”复选框并保存时，我收到如下所示的警告消息。

“在此应用程序的引用程序集中找不到指定的类型。请确保该程序集已添加到此应用程序的 web.config 的 system.web/compilation 部分中的程序集列表中。您还想继续吗？ "

我在博客上读到我们可以忽略此警告消息，然后单击警告消息中的“是”选项以保存设置。

保存更改后，这会在 Web.config 中添加以下行：

```
<remove name="DefaultAuthentication" />
        <remove name="FormsAuthentication" />
<add name="FormsAuthentication" type="System.Web.Security.FormsAuthenticationModule" preCondition="" />
  <add name="DefaultAuthentication" type="System.Web.Security.DefaultAuthenticationModule" preCondition="" /> 
```

在这些更改之后，用户仍然能够在没有任何身份验证的情况下查看非托管资源。

我在这里有什么遗漏吗？有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:03:43.967

您可以强制 Web 服务器运行静态文件的所有托管模块（包括表单模块），方法是在 web.config 的 system.webServer 部分的 modules 部分中将 runAllManagedModulesForAllRequests 设置为 true。

缺点是为静态数据运行模块会减慢您的服务器速度，但您肯定会获得预期的效果。

# javascript - 使用复选框过滤结果

> ID：11761655
> 
> 赞同：0
> 
> 时间：2012-08-01T14:40:06.310
> 
> 标签：javascript

我正在使用以下代码通过复选框过滤我的结果。它显示具有共同检查项目的结果：

```
$('input').change(function() {

    var room_array = new Array(),
        loc_array = new Array();
    $('.br').each(function() {
        if ($(this).is(':checked')) {
            room_array.push($(this).data('bedrooms'));
        }
    });
    $('.loc').each(function() {
        if ($(this).is(':checked')) {
            loc_array.push($(this).data('location'));
        }
    });
    //console.log(loc_array, room_array);
    $('li').each(function() {
        if ($.inArray($(this).data('location'), loc_array) > -1 && $.inArray($(this).data('bedrooms'), room_array) > -1) {
            $(this).show();
        } else {
            $(this).hide();
        }
    });
}); 
```

```
<input data-bedrooms="1" class="br" type="checkbox">1 bedroom<br>
<input data-bedrooms="2" class="br" type="checkbox">2 bedrooms<br>
<input data-bedrooms="3" class="br" type="checkbox">3 bedrooms<br><br>

<input data-location="london" class="loc" type="checkbox">london<br>
<input data-location="new-york" class="loc" type="checkbox">new york<br>
<input data-location="paris" class="loc" type="checkbox">paris<br><br>    

<ul>
    <li data-bedrooms="1"  data-location="paris">1 bedroom apartment paris</li>
    <li data-bedrooms="1" data-location="paris">1 bedroom apartment</li>
        <! -- similar combinations -->
    <li data-bedrooms="2" data-location="new-york">2 bedroom apartment new yor</li>
</ul> 
```

**[JSFiddle](http://jsfiddle.net/YEtgM/13/)**

问题是，当仅选择一种类型的复选框时，该复选框的结果不会显示。

但是，我希望只允许选择一种类型，例如卧室数量或位置。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:51:49.893

代替

```
if ($.inArray($(this).data('location'), loc_array) > -1 && $.inArray($(this).data('bedrooms'), room_array) > -1) { 
```

和

```
if (($.inArray($(this).data('location'), loc_array) > -1 || !$('.loc:checked').length) && ($.inArray($(this).data('bedrooms'), room_array) > -1 || !$('.br:checked').length)) { 
```

当该组没有选中的复选框时，接受该组的任何值。

顺便说一句，你的小提琴有两个条目

```
<li data-bedrooms="2" data-location="paris">2 bedroom apartment paris</li> 
```

我将其中一个更改`london`为您的第一个示例所建议的。

# [*jsFiddle*](http://jsfiddle.net/YEtgM/17/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:50:58.293

这条线

```
if ($.inArray($(this).data('location'), loc_array) > -1 && $.inArray($(this).data('bedrooms'), room_array) > -1) 
```

应该

```
if ($.inArray($(this).data('location'), loc_array) > -1 || $.inArray($(this).data('bedrooms'), room_array) > -1) 
```

# jquery - 单击单选按钮更改下拉值

> ID：11761656
> 
> 赞同：1
> 
> 时间：2012-08-01T14:40:19.430
> 
> 标签：jquery, jsp, spring-mvc

我正在使用带有 ibatis 和 jsp 页面的 spring 进行演示。我的问题是我有一个jsp页面和一个下拉列表的值，我通过model属性渲染，如下图。

```
<select id="describe" style="width: 500px;">
    <c:forEach var="aff" items="${droplist}">
        <option name="category" value="${aff.community_category_id}">
            ${aff.category}
        </option>
    </c:forEach>
</select> 
```

这是我的单选按钮：

```
<input type="radio" id="class" name="type" value="1" checked>Class
<input type="radio" id="Club" name="type" value="2">Club
<input type="radio" id="Course" name="type" value="3">Course
<input type="radio" id="Community" name="type" value="4">Community 
```

单击任何单选按钮时，它需要更改下拉列表的内容。

我没有得到任何想法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:33:54.277

```
 <head>
            <title>prova</title>
            <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
            <script>
                    var listA=[{name:'name1a', value:'value1a'}, {name:'name2a', value:'value2a'}, {name:'name3a', value:'valuea3a'}];
                    var listB=[{name:'name1b', value:'value1b'}, {name:'name2b', value:'value2b'}, {name:'name3b', value:'valuea3b'}];
                    var listC=[{name:'name1c', value:'value1c'}, {name:'name2c', value:'value2c'}, {name:'name3c', value:'valuea3c'}];
            </script>
            <script>
            $(document).ready(
                    function() {
                            $(':radio').bind('click',function(){
                                    $('#describe')
                                            .find('option')
                                            .remove()
                                            .end();
                                    $.each(listA, function(index, value) {
                                            $('#describe').append('<option value="'+value.value+'">'+value.name+'</option>');
                                    });

                            });
                    });
            </script>
    </head>
    <body>
            <div>
            <select id="describe">
                    <option name="name" value="1">a</option>
                    <option name="name" value="2">b</option>
            </select>
            </div>
            <div>
                    <input type="radio" id="class" name="type" value="1" checked>Class <br/>
                    <input type="radio" id="Club" name="type" value="2" >Club<br/>
                    <input type="radio" id="Course" name="type" value="3">Course<br/>
                    <input type="radio" id="Community" name="type" value="4">Community<br/>
            </div>
    </body> 
```

每次单击其中一个单选按钮并加载从 listA 对象中获取的新值/名称时，这只会更改描述选择的内容

# android - 究竟什么被认为是“视图”？

> ID：11761657
> 
> 赞同：3
> 
> 时间：2012-08-01T14:40:26.677
> 
> 标签：android, terminology, android-view

只是通过入门教程，虽然我的应用程序运行良好，但我只是想确保我的 Android 术语是正确的。

例如，我经历的第一个应用程序教程让您修改了 activity_main.xml 以包括：

```
<EditText android:id="@+id/edit_message"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message"
    android:layout_weight="1" />

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send"
    android:onClick="sendMessage" /> 
```

我是否正确理解这些（EditText，Button）元素本身是单独的视图？换句话说，上面的代码包含两个“视图”，而不是两个“控件”？后来在代码中我们遇到了一个叫做 TextView 的东西，它直接有“View”这个词，而其他的没有，这有点让我失望。

我唯一的其他经验是 ASP.Net 和 C# Web 开发，所以我想我的问题可以表述为，Android“视图”是否等同于 ASP.Net Web 控件（asp:DropDownList、asp:Button 等）？如果我想在上面的代码中添加更多的控件，比如更多的按钮，我会说，“我要在这个布局中添加更多的视图吗？” 或者是，“我要向这个视图添加更多控件？” 或者...？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T14:52:23.480

视图基本上是屏幕上显示的任何内容，无论是按钮、文本、列表......

您的完整布局是一个视图，其中包含的每个项目也是一个视图。

```
<RelativeLayout>
    <TextView/>
    <EditText/>
    <LinearLayout>
        <Button>
        <Button>
    </LinearLayout>
</RelativeLayout> 
```

上面的RelativeLayout、LinearLayout、TextView、EditText和Buttons都是“视图”。LinearLayout 和 RelativeLayout 是容器视图，但它们仍然可以作为视图引用，以便在它们上执行某些功能。

# pixels - 如何在 Paint.Net 中复制选择左上角的像素值

> ID：11761658
> 
> 赞同：0
> 
> 时间：2012-08-01T14:40:31.903
> 
> 标签：pixels, paint.net

特别是当我为我的 html 模型制作 css sprites 时，我使用 Paint.Net 专注于选定的图标并读取左侧和顶部以及宽度和高度像素值。所以我可以在我的 CSS 类中使用它们。

有没有简单的方法可以将左侧和顶部的值复制到我的剪贴板中，并且我不需要每次都手动输入？

这是我的问题的SS；

![在此处输入图像描述](../Images/fafdddffdec91026e4c41dd021e08ea0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:22:59.187

抱歉，目前不可以。

我尝试为您编写一个插件，将鼠标坐标复制到剪贴板，或显示适当的消息框，但这是不可能的，因为插件不能使用 C# 'using' 关键字。

您可以写信给paint.net作者您的功能请求 - 他们很容易添加到程序中

无论如何，代码看起来像：

```
#region UICode
bool Amount1 = true; // [0,1] Copy to clipboard
bool Amount2 = false; // [0,1] Show popup
#endregion

void Render(Surface dst, Surface src, Rectangle rect)
{
    Rectangle selection = EnvironmentParameters.GetSelection(src.Bounds).GetBoundsInt();

    int a = System.Windows.Forms.Cursor.Position.X;
    // or int a = Selection.Left;
    int b = System.Windows.Forms.Cursor.Position.Y;
    // or int b = Selection.Top;

    if (Amount1)
    {
        Clipboard.SetText(a.ToString() + ", " + b.ToString());
    }

    if (Amount2)
    {
        MessageBox.Show(a.ToString() + ", " + b.ToString());
    }
} 
```

# php - Ajax 响应处理在 Firefox 下不起作用

> ID：11761663
> 
> 赞同：0
> 
> 时间：2012-08-01T14:40:49.857
> 
> 标签：php, jquery, ajax, firefox

嗯，这是一个很奇怪的问题：

我正在向一些 php 脚本发送 Ajax POST 请求并等待响应：

```
var data = $('#'+frm).serialize();
$.ajax({
    type: "POST",
    url: url,
    data: data
}).done(
function(r){
   alert("Process ID :"+r);
}
); 
```

问题是：它**在**Chrome 下可以工作，但**在 Firefox 下**不行。

有什么问题？

* * *

*（**提示：**我已经用 FireBug 进行了检查，响应似乎完全没有问题；它应该出现）*

* * *

**更新**：

*   尝试添加错误处理程序 ( `.fail()`) 但成功
*   还在**Safari**下对其进行了测试：它也可以在那里工作。

* * *

非常感谢你们！这个问题可能与缓存有关：/ - 在我删除最近的历史记录后，它确实有效。- 结案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:28:15.513

这个问题可能与缓存有关：/ - 在我删除最近的历史记录后，它确实有效。-

结案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:49:51.683

试试 jQuery 的`$.post()`方法。无论如何你都在做，只是用`$.ajax()`

```
$.post(url, {
    data: data
    }, function(r) {
        alert("Process ID: " + r);
    }
); 
```

# python - 使用 Pyqt 绘图并使用 mysql 中的数据

> ID：11761667
> 
> 赞同：0
> 
> 时间：2012-08-01T14:40:59.193
> 
> 标签：python, matplotlib, pyqt

我想使用 mysql 表中的数据在 pyqt 中制作实时图表，但我不确定如何。该表将每秒更新一次，并具有 CPU 百分比（例如 2.5、3.5、4.5）。我不确定如何使用来自 mysql 的数据制作实时图表。

我在下面制作了一个简单的 matplotlib 图。我试图合并 mysql 数据，但我无法满足这个实时图表的需求。

```
import sys
from PyQt4 import QtGui
from matplotlib.figure import Figure
from matplotlib.backends.backend_qt4agg \
import FigureCanvasQTAgg as FigureCanvas
import psutil as p

# Total number of iterations
MAXITERS = 2000
class CPUMonitor(FigureCanvas):
    """Matplotlib Figure widget to display CPU utilization"""
    def __init__(self):
        # save the current CPU info (used by updating algorithm)
        self.before = self.prepare_cpu_usage()
        # first image setup
        self.fig = Figure()
        self.ax = self.fig.add_subplot(111)
        # initialization of the canvas
        FigureCanvas.__init__(self, self.fig)
        # set specific limits for X and Y axes
        self.ax.set_xlim(0, 2000)
        self.ax.set_ylim(0, 100)
        # and disable figure-wide autoscale
        self.ax.set_autoscale_on(False)
        # generates first "empty" plots
        self.user, self.nice, self.sys, self.idle =[], [], [], []
        self.l_user, = self.ax.plot([],self.user, label='User %')
        self.l_nice, = self.ax.plot([],self.nice, label='Nice %')
        self.l_sys, = self.ax.plot([],self.sys, label='Sys %')
        self.l_idle, = self.ax.plot([],self.idle, label='Idle %')
        # add legend to plot
        self.ax.legend()
        # force a redraw of the Figure
        self.fig.canvas.draw()
        # initialize the iteration counter
        self.cnt = 0
        # call the update method (to speed-up visualization)
        self.timerEvent(None)
        # start timer, trigger event every 1000 millisecs (=1sec)
        self.timer = self.startTimer(1000)
    def prepare_cpu_usage(self):
        """helper function to return CPU usage info"""
        # get the CPU times using psutil module
        t = p.cpu_times()
        # return only the values we're interested in
        if hasattr(t, 'nice'):
            return [t.user, t.nice, t.system, t.idle]
        else:
            # special case focr Windows, without 'nice' value
            return [t.user, 0, t.system, t.idle]
    def get_cpu_usage(self):
        """Compute CPU usage comparing previous and current measurements"""
        # take the current CPU usage information
        now = self.prepare_cpu_usage()
        # compute delta between current and previous measurements
        delta = [now[i]-self.before[i] for i in range(len(now))]
        # compute the total (needed for percentages calculation)
        total = sum(delta)
        # save the current measurement to before object
        self.before = now
        # return the percentage of CPU usage for our 4 categories
        return [(100.0*dt)/total for dt in delta]
    def timerEvent(self, evt):
        # get the cpu percentage usage
        result = self.get_cpu_usage()
        # append new data to the datasets
        self.user.append(result[0])
        self.nice.append(result[1])
        self.sys.append( result[2])
        self.idle.append(result[3])
        # update lines data using the lists with new data
        self.l_user.set_data(range(len(self.user)), self.user)
        self.l_nice.set_data(range(len(self.nice)), self.nice)
        self.l_sys.set_data( range(len(self.sys)), self.sys)
        self.l_idle.set_data(range(len(self.idle)), self.idle)
        # force a redraw of the Figure
        self.fig.canvas.draw()
        if self.cnt == MAXITERS:
            # stop the timer
            self.killTimer(self.timer)
        else:
           #else, we increment the counter
           self.cnt += 1
# create the GUI application
widget = CPUMonitor()
widget.setWindowTitle("30 Seconds of CPU Usage Updated in RealTime")
widget.show()

sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:48:10.237

一种选择是在无限循环中运行它。循环每秒都会检查表格，然后每次都重新绘制 matplotlib 图。

虽然这不是一个非常有效的解决方案。

# html - 提交时运行脚本的 HTML 表单

> ID：11761671
> 
> 赞同：1
> 
> 时间：2012-08-01T14:41:10.217
> 
> 标签：html, forms, vbscript

我有一个带有一些参数（姓名、电子邮件等）的 VBScript，我创建了一个 HTML 表单。

当用户键入数据时，我想执行 VBScript 并将表单数据作为参数传递。

问题是如何从 HTML 表单运行 VBScript（没有服务器，因此客户端执行 HTML 并在他们的机器上运行 VBscript）。

VBScript 是一个外部文件。让我们称之为 myScript.vbs

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:49:53.107

我不知道 HTML 表单在没有与服务器的 HTTP 连接的情况下“提交”数据的任何方式。以下是一些可能解决您的问题的选项：

1.  [VBScript 与Classic ASP](http://www.w3schools.com/asp/default.asp)基本相同。您当然可以在 Windows 7 上托管[IIS，](http://www.dotnetfunda.com/articles/article1247-how-to-host-aspnet-application-on-the-web-server-iis.aspx)并将您的 Web 浏览器指向“localhost”。
2.  您可以修改表单以包含[ActiveX 控件](http://www.microsoft.com/security/resources/activex-whatis.aspx)或其他非浏览器安全的可执行文件，这可能会触发您的 VBScript 任务的执行。
3.  [您可以编写一个嵌入 Internet Explorer](http://objectmix.com/dotnet/114005-how-embed-ie-c-net-windows-application.html)并在用户单击提交时触发您的任务的独立程序。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:53:10.837

巧合的是，我昨天刚刚发布了一个如何在 Ruby 中执行此操作的问题，并提供了一个 vbscript 脚本作为示例，所以在这里你有它。但事实上最好反过来，你最好从你的脚本启动浏览器。

```
Set web = CreateObject("InternetExplorer.Application") 
If web Is Nothing Then 
  msgbox("Error while loading Internet Explorer") 
  Wscript.Quit 
Else 
  with web 
    .Width = 300 
    .Height = 175 
    .Offline = True 
    .AddressBar = False 
    .MenuBar = False 
    .StatusBar = False 
    .Silent = True 
    .ToolBar = False 
    .Navigate "about:blank" 
    .Visible = True 
  end with 
End If 

'Wait for the browser to navigate to nowhere 
Do While web.Busy 
  Wscript.Sleep 100 
Loop 

'Wait for a good reference to the browser document 
Set doc = Nothing 
Do Until Not doc Is Nothing 
  Wscript.Sleep 100 
  Set doc = web.Document 
Loop 

'Write the HTML form 
doc.Write "Give me a name<br><form><input type=text name=name ><input type=button name=submit id=submit value='OK' onclick='javascript:submit.value=""Done""'></form>" 
Set oDoc = web.Document 
Do Until oDoc.Forms(0).elements("submit").Value <> "OK" 
  Wscript.Sleep 100 
  If web Is Nothing or Err.Number <> 0 Then 
    msgbox "Window closed" 
    Wscript.Quit 
  End If 
Loop 
name = oDoc.Forms(0).elements("name").value 
oDoc.close 
set oDoc = nothing 
web.quit 
set web = nothing 
Wscript.echo "Hello " & name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:49:12.140

这是我的 HTML 代码

```
<form id="myform">
<input type="radio" name="formradio" id="yes" />
<input type="radio" name="formradio" id="no" />
<select name="formemail" size="1">
<option value="someone@example.com" selected="selected">someone@example.com</option>
</select>
<button type="submit" id="sendReport">Send Status Report</button> 
```

这是我在 HTML 页面中的 VBscript 代码

```
<script language="VBScript" type="text/vbscript">
<![CDATA[
    Sub sendReport_onclick()
        'Logic to process the form goes in here.
        MsgBox myform.formradio.value
        MsgBox myform.formemail.value            
        'Run: wscript "{path}externalVBScript.vbs" "{path}"
        WSHShell.Run "wscript """ & Path & "externalVBScript.vbs"" """ & Path & """"
        window.status = "Script has been run via WScript"
    End Sub
]]>
</script> 
```

# arrays - 获取第二维的数组长度

> ID：11761678
> 
> 赞同：4
> 
> 时间：2012-08-01T14:41:33.697
> 
> 标签：arrays, coldfusion

我有一个二维数组：

```
ProductAndCompanyHourArray[ProductLoopIndex][CompanyLoopIndex] = getCompanyHourTime; 
```

到目前为止，我正在尝试遍历每个维度的二维数组：

```
ArrayLen(ProductAndCompanyHourArray) - ProductIndex 
```

我将如何循环第二位？（不工作并获得长度）

```
ArrayLen(ProductAndCompanyHourArray[ProductIndex]) ?? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:15:54.750

要获取第二维的数组长度，只需使用[**ArrayLen**](http://cfdocs.org/arraylen)函数：

```
<cfset DD = [[1,2,3],[4,5,6,7],[8,9],[10]] />

<cfoutput><pre>
DD Length is #ArrayLen(DD)#

<cfloop index="i" from=1 to=#ArrayLen(DD)#>
    DD[#i#] Length is #ArrayLen(DD[i])#
</cfloop>

</pre></cfoutput> 
```

该代码有效。如果您没有，请提供完整的相关代码和任何错误消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T14:43:47.367

响应使用冷融合：

*关于 ColdFusion 阵列 ColdFusion 阵列与传统阵列不同，因为它们是动态的。例如，在传统数组中，数组大小是恒定且对称的，而在 ColdFusion 数组中，您可以根据添加或删除的数据拥有不同长度的行。传统的二维数组就像一个由单个单元格组成的固定大小的表格。ColdFusion 2D 数组实际上是一个包含一系列附加 1D 数组的一维数组。组成一行的每个数组都可以独立于任何其他列扩展和收缩。*

我将链接到类似问题的答案，应该可以解决您的问题。

[https://stackoverflow.com/a/4111400/967977](https://stackoverflow.com/a/4111400/967977)

该链接指出 **“您可以将任何二维数组的长度设为 z[n].length，其中 0 <= n < z.length。”**

# jquery - 如何更改点击事件的类别

> ID：11761680
> 
> 赞同：0
> 
> 时间：2012-08-01T14:41:39.000
> 
> 标签：jquery, jquery-plugins, jquery-selectors

我试图在点击事件中更改分配给元素的 CSS 类，但看不到在我的情况下我必须使用哪个选择器。看到我有一个 DL 里面有一些 DD，第一个 DD 有 class="active"，当我选择任何其他 DD 并将该类分配给拾取的 DD 时，我需要删除这个类，明白吗？一个小例子：

```
<dl>
  <dd class="active">DD1</dd>
  <dd>DD2</dd>
  <dd>DD3</dd>
</dl> 
```

如果我选择 DD2，那么 class="active" 应该从 DD1 消失并移至 DD2 等等。我认为在使用 :eq() 但虽然不起作用。有什么建议或帮助吗？

编辑：样品准备好了！！转到[http://comvivem.treswd.com/net/](http://comvivem.treswd.com/net/)并以 demo/demo123 登录，然后转到“Directorio”，您将看到过滤器，在字母“A”、“B”等旁边，您可以看到 A是默认的并且有活动的类，但是选择“B”或任何其他的，看看发生了什么，这就是我之前提到的！

干杯和感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:43:28.137

```
$('dd').on('click', function() {
    $(this).addClass('active').siblings().removeClass('active');
}); 
```

[**小提琴**](http://jsfiddle.net/58yFW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:44:10.253

此 JavaScript 确实会更改点击链接，但这在您的场景中不是必需的：

```
$("dd").click(function(){
    $("dd").removeClass("active");
    $(this).addClass("active");
}); 
```

你应该做这样的事情：

```
$(document).ready(function(){
    var letter = window.location.pathname.slice(-1);
    $("dd").removeClass("active");
    $("dl.sub-nav dd a:contains("+letter+")").parent().addClass("active");
}); 
```

它仍然很hacky，最好将类设置为服务器端脚本中当前选择的字母。

# wpf - 隧道 CommandBinding.previewcanexecute 事件有什么用？

> ID：11761685
> 
> 赞同：1
> 
> 时间：2012-08-01T14:42:00.733
> 
> 标签：wpf, commandbinding, routedcommand

隧道 CommandBinding.previewcanexecute 事件有什么用？

并冒泡 CommandBinding.canexecute 事件？？有什么用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:50:16.497

隧道和冒泡事件允许处理程序在多个元素之间共享，并被层次结构中更高的控件拦截。例如，给定以下 Xaml：

```
<StackPanel>
   <Button Command="MyCommand" />
   <Button Command="MyCommand" />
   <Button Command="MyCommand" />
   <Button Command="MyCommand" />
</StackPanel> 
```

如果我想定义一个`CommandBinding`会`MyCommand`影响所有按钮的，我可以在`StackPanel`. 当每个按钮尝试执行其命令时，事件将向上冒泡到`StackPanel`- 这意味着我们只需要一个处理四个按钮的处理程序。如果我在根`Window`级别放置一个处理程序，它将应用于我的应用程序中的*每个*按钮。

相反，隧道事件允许您在它到达触发它的控件之前拦截它。因此，例如，如果我想为*整个*.`Window``CanExecute``false`

# cookies - 跨多个子域设置 GoSquared 跟踪

> ID：11761688
> 
> 赞同：0
> 
> 时间：2012-08-01T14:42:05.933
> 
> 标签：cookies, tracking, subdomain

我一直在浏览 GoSquared 网站，并且正在努力了解如何设置跟踪以跨同一站点的多个子域工作。我的网站基本上是这样工作的：

```
auth.mysite.com
store.mysite.com
community.mysite.com 
```

这些站点区域彼此紧密相连，用户可以很容易地从一个站点移动到另一个站点。

现在我注意到 GoSquared 创建的 cookie`'gs_u'`已将其域设置为`store.mysite.com`这让我想到用户何时点击`auth.`或`community.`不会在那里跟踪它们，甚至可能为每个子域创建额外的 cookie。

是否有可能让 GoSquared 干净地跨多个子域工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:44:34.643

如您所见，跟踪代码将访问者 cookie 上的域设置为与位置域相同。当访问者导航到不同的子域时，cookie 不会被转移，访问者会显示为新访问者。

我们的 TODO 允许开发人员指定用于设置 cookie 的域，但目前跟踪代码不支持此功能。一旦我们实施它，我将尝试在此处发布。

感谢您使用 GoSquared！

杰夫·瓦格斯塔夫

首席技术官

GoSquared

# android - 如何使用 NDK 为 Android 构建带有配置脚本的开源程序？

> ID：11761690
> 
> 赞同：2
> 
> 时间：2012-08-01T14:42:18.103
> 
> 标签：android, build, android-ndk, configure, cyanogenmod

我有一个关于如何使用 NDK 为 Android 构建带有配置脚本的开源程序的问题？

我在[这里](http://warpedtimes.wordpress.com/2010/02/03/building-open-source-libraries-with-android-ndk/)看到了一些东西，但它似乎不是很有帮助。

这是另一个[问题](https://stackoverflow.com/questions/8277330/how-to-configure-for-building-open-source-library-with-ndk)，但它也没有提供太多信息。

是否有关于如何使用 NDK 为 Android 构建带有配置脚本的开源程序的更多详细信息？

* * *

我有一个带有终端模拟器的 CyanogenMod，所以我想在我的 Android 上安装一个类似 Linux 的环境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:34:40.083

[此 makefile](http://dev.laptop.org/git/users/cscott/android-libs/tree/jni/Makefile.devel)使用 warpedtimes 博客文章中的信息传递正确的参数来配置脚本以构建 Android NDK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:48:24.083

似乎可以使用支持交叉编译 GNU 工具链的配置脚本。

但是谷歌的NDK似乎缺少很多东西，虽然通过使用谷歌的NDK作为一个独立的工具链可以完成一些事情。使用我已`binutils`成功构建的 NDK 尚未测试二进制文件是否真的有效。[这里](https://stackoverflow.com/questions/11747734/why-does-arm-linux-androideabi-gcc-give-iostream-error)有一些相关信息。

我不确定是否还有其他预构建的 GNU 工具链。

# ios - iPhone模拟器在哪里保存sqllite数据库

> ID：11761695
> 
> 赞同：6
> 
> 时间：2012-08-01T14:42:23.983
> 
> 标签：ios, sqlite, core-data, ios-simulator, file-location

我已经看到这个问题在 SO 上被问了几次 - 但答案似乎总是大致相同：

```
 /Users/myName/Library/Application Support/iPhone Simulator/4.2/ ... 
```

查看相关问题：

[iOS 4.2 模拟器文件？](https://stackoverflow.com/questions/4287005/ios-4-2-simulator-files)

[iPhone 模拟器在哪里存储它的数据？](https://stackoverflow.com/questions/1108076/where-does-the-iphone-simulator-store-its-data)

[iphone模拟器中的数据库存储在哪里（对于Mac OS）？](https://stackoverflow.com/questions/9393367/where-database-store-in-iphone-simulator-for-mac-os)

然而 - 当我的机器上似乎没有这条路径时。我的用户文件夹中没有“库”文件夹

我可以在驱动器的根目录中找到一个库文件夹，其中有一个 Application Support 文件夹 - 但那里没有 iPhone Simulator 子文件夹。我唯一能找到 iPhone Simulator 文件夹的地方是存储实际模拟器可执行文件的地方——但那里似乎也没有任何数据文件。

我有 Mac OS X 10.7.4 和 Xcode 4.2

一切似乎都运行良好——我可以运行模拟器并使用数据库——我只是找不到它在主机上的存储位置。

是否有任何其他标准文件夹可以保存这些数据？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-01T14:49:27.520

您是通过 Finder 还是在命令行上查找 Library 目录？默认情况下，从 Lion 开始，图书馆是隐藏的。您可以通过键入取消隐藏它

```
/usr/bin/chflags nohidden ~/Library 
```

在终端，或者只是通过命令行导航到那里，例如：

```
open ~/Library/Application\ Support/iPhone\ Simulator/ 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-01T14:51:51.590

由于 OS X Lion 默认情况下隐藏用户文件夹中的库文件夹。在 Finder 中打开“Go”菜单并按下选项 (alt)，您会注意到“Library”文件夹的外观。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T14:52:40.750

图书馆隐藏在您的标准查找器中。

为了能够找到它，请导航到您的顶级用户目录 (~/)，然后按`Cmd-Shift-G`。

出现一个文本框，输入`Library`，然后沿着黄砖路走。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-14T11:39:25.647

出于类似目的，我推荐一个名为[Musical Chairs](https://github.com/orta/chairs)的命令行工具。安装后，您可以使用`chairs open`. 它是一个易于安装的 ruby​​ gem `sudo gem install chairs`，. 它的主要目的实际上是缓存应用程序数据实例，更多[here](http://artsy.github.io/blog/2013/03/29/musical-chairs/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T14:49:02.247

我认为 4.2 是你的 iOS 模拟器版本，因为在那个路径上你必须选择你的模拟器版本。在此之下，必须有一个名为 Applications 的文件夹，在此之下有一些有趣的命名文件夹（这些名称是 MD5 或其他名称），每个文件夹代表一个单独的应用程序。找到与您要查找的应用程序相关的文件夹，在 Documents 文件夹下必须有数据库文件

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-22T16:47:26.823

所以，目前最好的是 SimPholder。它将图标保存在顶部。运行该应用程序后，单击 Simpholer 图标，它将显示您正在运行的应用程序并带您进入

# php - 使用 jquery autosuggest 从多个表中选择

> ID：11761696
> 
> 赞同：1
> 
> 时间：2012-08-01T14:42:24.327
> 
> 标签：php, jquery, mysql, mysqli

我正在编写一个网站以了解有关 PHP 的更多信息，并正在制作 JQuery Autosuggest。这里的脚本[。](http://papermashup.com/jquery-php-ajax-autosuggest/)

这是我的 autosuggest.php 代码：

```
<?php
 $db = new mysqli('localhost', 'root' ,'***********', '**********');

if(!$db) {

    echo 'Could not connect to the database.';
} else {

    if(isset($_POST['queryString'])) {
        $queryString = $db->real_escape_string($_POST['queryString']);

        if(strlen($queryString) >0) {

            $query = $db->query("SELECT * FROM company WHERE name LIKE '$queryString%' LIMIT 10");
            if($query) {
            echo '<ul>';
                while ($result = $query ->fetch_object()) {
                    echo '<li onClick="fill(\''.addslashes($result->name).'\');">'.$result->name.'</li>';
                }
            echo '</ul>';

            } else {
                echo 'OOPS we had a problem :(';
            }
        } else {
            // do nothing
        }
    } else {
        echo 'There should be no direct access to this script!';
    }
}
?> 
```

现在，我不只是在 company 表中搜索名称，而是想在不同的表（称为 cat）中搜索**cat字段，并在不同的表中搜索****subcat**字段（在名为 subcat 的表中）

我的表结构：

[这里](http://i.stack.imgur.com/dU9NQ.png)（我还不能发布图片）

所以我想从三个表中搜索。这可能吗？我该如何使用我的代码来做到这一点？

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:44:30.253

您应该`UNION`在 3 个表中的每一个之间执行 a 并将数据规范化为`Name`,`ID`和`Type`列。

# java - ByteBuffer.asCharArray().array() 上的 UnsupportedOperationException

> ID：11761700
> 
> 赞同：3
> 
> 时间：2012-08-01T14:42:34.263
> 
> 标签：java, nio, java-6

有人可以这么好心地解释为什么在下一行我有 UnsupportedOperationException 吗？

> System.out.println(ByteBuffer.wrap(new byte[] {'t', 'e', 's', 't', '\n'}).asCharBuffer().array());

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:45:45.970

asCharBuffer 不包装 a`char[]`所以你无法获得它`array()`

看来您正在尝试做的是。

```
System.out.println(Arrays.toString("test\n".toCharArray())); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T14:49:44.197

您阅读 Javadoc 了[`CharBuffer.array()`](http://docs.oracle.com/javase/6/docs/api/java/nio/CharBuffer.html#array%28%29)吗？

并非所有`CharBuffer`s 都由 a 支持`char[]`。 `ByteBuffer.asCharBuffer()`返回 a 的视图*，*因此其结果由 a 支持。`ByteBuffer``CharBuffer``byte[]`

`array()`只返回`char[]`实际支持缓冲区的，如果不存在，则抛出 UOE。你能得到的最接近的选择是

```
char[] result = new char[charBuf.remaining()];
charBuf.get(result); 
```

# c - 在参数数量上重载宏

> ID：11761703
> 
> 赞同：220
> 
> 时间：2012-08-01T14:42:42.357
> 
> 标签：c, macros, c-preprocessor

我有两个宏`FOO2`和`FOO3`：

```
#define FOO2(x,y) ...
#define FOO3(x,y,z) ... 
```

我想定义一个新的宏`FOO`如下：

```
#define FOO(x,y) FOO2(x,y)
#define FOO(x,y,z) FOO3(x,y,z) 
```

但这不起作用，因为宏不会在参数数量上超载。

在不修改`FOO2`and`FOO3`的情况下，是否有某种方法可以定义宏`FOO`（使用`__VA_ARGS__`或以其他方式）以获得与调度`FOO(x,y)`到`FOO2`和`FOO(x,y,z)`to相同的效果`FOO3`？

* * *

## 回答 #1

> 赞同：318
> 
> 时间：2012-08-01T16:08:22.890

简单如：

```
#define GET_MACRO(_1,_2,_3,NAME,...) NAME
#define FOO(...) GET_MACRO(__VA_ARGS__, FOO3, FOO2)(__VA_ARGS__) 
```

因此，如果您有这些宏，它们会按照描述进行扩展：

```
FOO(World, !)         // expands to FOO2(World, !)
FOO(foo,bar,baz)      // expands to FOO3(foo,bar,baz) 
```

如果你想要第四个：

```
#define GET_MACRO(_1,_2,_3,_4,NAME,...) NAME
#define FOO(...) GET_MACRO(__VA_ARGS__, FOO4, FOO3, FOO2)(__VA_ARGS__)

FOO(a,b,c,d)          // expands to FOO4(a,b,c,d) 
```

自然，如果您定义`FOO2`,`FOO3`和`FOO4`，输出将被定义的宏替换。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2014-01-27T00:58:45.280

要添加到[netcoder 的答案](https://stackoverflow.com/a/11763277)，您实际上可以在 GCC`##__VA_ARGS__`扩展的帮助下使用 0 参数宏来执行此操作：

```
#define GET_MACRO(_0, _1, _2, NAME, ...) NAME
#define FOO(...) GET_MACRO(_0, ##__VA_ARGS__, FOO2, FOO1, FOO0)(__VA_ARGS__) 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2014-10-16T15:25:53.780

这是一个更通用的解决方案：

```
// get number of arguments with __NARG__
#define __NARG__(...)  __NARG_I_(__VA_ARGS__,__RSEQ_N())
#define __NARG_I_(...) __ARG_N(__VA_ARGS__)
#define __ARG_N( \
      _1, _2, _3, _4, _5, _6, _7, _8, _9,_10, \
     _11,_12,_13,_14,_15,_16,_17,_18,_19,_20, \
     _21,_22,_23,_24,_25,_26,_27,_28,_29,_30, \
     _31,_32,_33,_34,_35,_36,_37,_38,_39,_40, \
     _41,_42,_43,_44,_45,_46,_47,_48,_49,_50, \
     _51,_52,_53,_54,_55,_56,_57,_58,_59,_60, \
     _61,_62,_63,N,...) N
#define __RSEQ_N() \
     63,62,61,60,                   \
     59,58,57,56,55,54,53,52,51,50, \
     49,48,47,46,45,44,43,42,41,40, \
     39,38,37,36,35,34,33,32,31,30, \
     29,28,27,26,25,24,23,22,21,20, \
     19,18,17,16,15,14,13,12,11,10, \
     9,8,7,6,5,4,3,2,1,0

// general definition for any function name
#define _VFUNC_(name, n) name##n
#define _VFUNC(name, n) _VFUNC_(name, n)
#define VFUNC(func, ...) _VFUNC(func, __NARG__(__VA_ARGS__)) (__VA_ARGS__)

// definition for FOO
#define FOO(...) VFUNC(FOO, __VA_ARGS__) 
```

定义你的功能：

```
#define FOO2(x, y) ((x) + (y))
#define FOO3(x, y, z) ((x) + (y) + (z))

// it also works with C functions:
int FOO4(int a, int b, int c, int d) { return a + b + c + d; } 
```

现在您可以使用`FOO`2、3 和 4 个参数：

```
FOO(42, 42) // will use makro function FOO2
FOO(42, 42, 42) // will use makro function FOO3
FOO(42, 42, 42, 42) // will call FOO4 function 
```

## 限制

*   最多只能有 63 个参数（但可扩展）
*   仅在 GCC 中可能没有参数的函数

## 想法

将其用于默认参数：

```
#define func(...) VFUNC(func, __VA_ARGS__)
#define func2(a, b) func4(a, b, NULL, NULL)
#define func3(a, b, c) func4(a, b, c, NULL)

// real function:
int func4(int a, int b, void* c, void* d) { /* ... */ } 
```

将它用于可能具有无限个参数的函数：

```
#define SUM(...) VFUNC(SUM, __VA_ARGS__)
#define SUM2(a, b) ((a) + (b))
#define SUM3(a, b, c) ((a) + (b) + (c))
#define SUM4(a, b, c) ((a) + (b) + (c) + (d))
// ... 
```

PS：`__NARG__`这里是从 Laurent Deniau 和 Roland Illig 复制的：[https ://groups.google.com/group/comp.std.c/browse_thread/thread/77ee8c8f92e4a3fb/346fc464319b1ee5?pli=1](https://groups.google.com/group/comp.std.c/browse_thread/thread/77ee8c8f92e4a3fb/346fc464319b1ee5?pli=1)

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-08-01T16:04:07.317

我自己只是在研究这个，我在[这里](http://gustedt.wordpress.com/2010/06/03/default-arguments-for-c99/)遇到了这个。作者通过宏添加了对 C 函数的默认参数支持。

我将尝试简要总结这篇文章。基本上，您需要定义一个可以计算参数的宏。此宏将返回 2、1、0 或它可以支持的任何参数范围。例如：

```
#define _ARG2(_0, _1, _2, ...) _2
#define NARG2(...) _ARG2(__VA_ARGS__, 2, 1, 0) 
```

有了这个，您需要创建另一个宏，它接受可变数量的参数、计算参数并调用适当的宏。我采用了您的示例宏并将其与文章的示例相结合。我有 FOO1 调用函数 a() 和 FOO2 调用函数 a 和参数 b （显然，我在这里假设 C++，但你可以将宏更改为任何内容）。

```
#define FOO1(a) a();
#define FOO2(a,b) a(b);

#define _ARG2(_0, _1, _2, ...) _2
#define NARG2(...) _ARG2(__VA_ARGS__, 2, 1, 0)

#define _ONE_OR_TWO_ARGS_1(a) FOO1(a)
#define _ONE_OR_TWO_ARGS_2(a, b) FOO2(a,b)

#define __ONE_OR_TWO_ARGS(N, ...) _ONE_OR_TWO_ARGS_ ## N (__VA_ARGS__)
#define _ONE_OR_TWO_ARGS(N, ...) __ONE_OR_TWO_ARGS(N, __VA_ARGS__)

#define FOO(...) _ONE_OR_TWO_ARGS(NARG2(__VA_ARGS__), __VA_ARGS__) 
```

所以如果你有

```
FOO(a)
FOO(a,b) 
```

预处理器将其扩展为

```
a();
a(b); 
```

我肯定会阅读我链接的文章。这是非常有用的，他提到 NARG2 不适用于空参数。[他在这里](http://gustedt.wordpress.com/2010/06/08/detect-empty-macro-arguments/)跟进。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-06-01T05:23:31.837

这是[上述答案](https://stackoverflow.com/a/26408195/1143274)的更紧凑版本。举个例子。

```
#include <iostream>
using namespace std;

#define OVERLOADED_MACRO(M, ...) _OVR(M, _COUNT_ARGS(__VA_ARGS__)) (__VA_ARGS__)
#define _OVR(macroName, number_of_args)   _OVR_EXPAND(macroName, number_of_args)
#define _OVR_EXPAND(macroName, number_of_args)    macroName##number_of_args

#define _COUNT_ARGS(...)  _ARG_PATTERN_MATCH(__VA_ARGS__, 9,8,7,6,5,4,3,2,1)
#define _ARG_PATTERN_MATCH(_1,_2,_3,_4,_5,_6,_7,_8,_9, N, ...)   N

//Example:
#define ff(...)     OVERLOADED_MACRO(ff, __VA_ARGS__)
#define ii(...)     OVERLOADED_MACRO(ii, __VA_ARGS__)

#define ff3(c, a, b) for (int c = int(a); c < int(b); ++c)
#define ff2(c, b)   ff3(c, 0, b)

#define ii2(a, b)   ff3(i, a, b)
#define ii1(n)      ii2(0, n)

int main() {
    ff (counter, 3, 5)
        cout << "counter = " << counter << endl;
    ff (abc, 4)
        cout << "abc = " << abc << endl;
    ii (3)
        cout << "i = " << i << endl;
    ii (100, 103)
        cout << "i = " << i << endl;

    return 0;
} 
```

跑：

```
User@Table 13:06:16 /c/T
$ g++ test_overloaded_macros.cpp 

User@Table 13:16:26 /c/T
$ ./a.exe
counter = 3
counter = 4
abc = 0
abc = 1
abc = 2
abc = 3
i = 0
i = 1
i = 2
i = 100
i = 101
i = 102 
```

请注意，同时拥有`_OVR`和`_OVR_EXPAND`可能看起来多余，但预处理器有必要扩展该`_COUNT_ARGS(__VA_ARGS__)`部分，否则将被视为字符串。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-11-22T01:03:04.253

这是从 Evgeni Sergeev 的回答中衍生出来的。这个也支持**零参数重载**！

我用 GCC 和 MinGW 对此进行了测试。它应该适用于新旧版本的 C++。请注意，我不能保证它适用于 MSVC ......但是通过一些调整，我相信它也可以与它一起使用。

我还将其格式化为粘贴到头文件（我称之为macroutil.h）中。如果你这样做了，你可以在任何你需要的特性中包含这个标题，而不是查看实现中所涉及的肮脏。

```
#ifndef MACROUTIL_H
#define MACROUTIL_H

//-----------------------------------------------------------------------------
// OVERLOADED_MACRO
//
// used to create other macros with overloaded argument lists
//
// Example Use:
// #define myMacro(...) OVERLOADED_MACRO( myMacro, __VA_ARGS__ )
// #define myMacro0() someFunc()
// #define myMacro1( arg1 ) someFunc( arg1 )
// #define myMacro2( arg1, arg2 ) someFunc( arg1, arg2 )
//
// myMacro();
// myMacro(1);
// myMacro(1,2);
//
// Note the numerical suffix on the macro names,
// which indicates the number of arguments.
// That is the REQUIRED naming convention for your macros.
//
//-----------------------------------------------------------------------------

// OVERLOADED_MACRO
// derived from: https://stackoverflow.com/questions/11761703/overloading-macro-on-number-of-arguments
// replaced use of _COUNT_ARGS macro with VA_NUM_ARGS defined below
// to support of zero argument overloads
#define OVERLOADED_MACRO(M, ...) _OVR(M, VA_NUM_ARGS(__VA_ARGS__)) (__VA_ARGS__)
#define _OVR(macroName, number_of_args)   _OVR_EXPAND(macroName, number_of_args)
#define _OVR_EXPAND(macroName, number_of_args)    macroName##number_of_args
//#define _COUNT_ARGS(...)  _ARG_PATTERN_MATCH(__VA_ARGS__, 15,14,13,12,11,10,9,8,7,6,5,4,3,2,1)
#define _ARG_PATTERN_MATCH(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15, N, ...)   N

// VA_NUM_ARGS
// copied from comments section of:
// http://efesx.com/2010/07/17/variadic-macro-to-count-number-of-arguments/
// which itself was derived from:
// https://gustedt.wordpress.com/2010/06/08/detect-empty-macro-arguments/
#define _ARG16(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, ...) _15
#define HAS_COMMA(...) _ARG16(__VA_ARGS__, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0)
#define HAS_NO_COMMA(...) _ARG16(__VA_ARGS__, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1)
#define _TRIGGER_PARENTHESIS_(...) ,

#define HAS_ZERO_OR_ONE_ARGS(...) \
    _HAS_ZERO_OR_ONE_ARGS( \
    /* test if there is just one argument, eventually an empty one */ \
    HAS_COMMA(__VA_ARGS__), \
    /* test if _TRIGGER_PARENTHESIS_ together with the argument adds a comma */ \
    HAS_COMMA(_TRIGGER_PARENTHESIS_ __VA_ARGS__), \
    /* test if the argument together with a parenthesis adds a comma */ \
    HAS_COMMA(__VA_ARGS__ (~)), \
    /* test if placing it between _TRIGGER_PARENTHESIS_ and the parenthesis adds a comma */ \
    HAS_COMMA(_TRIGGER_PARENTHESIS_ __VA_ARGS__ (~)) \
    )

#define PASTE5(_0, _1, _2, _3, _4) _0 ## _1 ## _2 ## _3 ## _4
#define _HAS_ZERO_OR_ONE_ARGS(_0, _1, _2, _3) HAS_NO_COMMA(PASTE5(_IS_EMPTY_CASE_, _0, _1, _2, _3))
#define _IS_EMPTY_CASE_0001 ,

#define _VA0(...) HAS_ZERO_OR_ONE_ARGS(__VA_ARGS__)
#define _VA1(...) HAS_ZERO_OR_ONE_ARGS(__VA_ARGS__)
#define _VA2(...) 2
#define _VA3(...) 3
#define _VA4(...) 4
#define _VA5(...) 5
#define _VA6(...) 6
#define _VA7(...) 7
#define _VA8(...) 8
#define _VA9(...) 9
#define _VA10(...) 10
#define _VA11(...) 11
#define _VA12(...) 12
#define _VA13(...) 13
#define _VA14(...) 14
#define _VA15(...) 15
#define _VA16(...) 16

#define VA_NUM_ARGS(...) VA_NUM_ARGS_IMPL(__VA_ARGS__, PP_RSEQ_N(__VA_ARGS__) )
#define VA_NUM_ARGS_IMPL(...) VA_NUM_ARGS_N(__VA_ARGS__)

#define VA_NUM_ARGS_N( \
    _1, _2, _3, _4, _5, _6, _7, _8, _9,_10, \
    _11,_12,_13,_14,_15,_16,N,...) N

#define PP_RSEQ_N(...) \
    _VA16(__VA_ARGS__),_VA15(__VA_ARGS__),_VA14(__VA_ARGS__),_VA13(__VA_ARGS__), \
    _VA12(__VA_ARGS__),_VA11(__VA_ARGS__),_VA10(__VA_ARGS__), _VA9(__VA_ARGS__), \
    _VA8(__VA_ARGS__),_VA7(__VA_ARGS__),_VA6(__VA_ARGS__),_VA5(__VA_ARGS__), \
    _VA4(__VA_ARGS__),_VA3(__VA_ARGS__),_VA2(__VA_ARGS__),_VA1(__VA_ARGS__), \
    _VA0(__VA_ARGS__)

//-----------------------------------------------------------------------------

#endif // MACROUTIL_H 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-01T15:55:23.220

也许你可以使用这个宏来[计算参数的数量](http://efesx.com/2010/07/17/variadic-macro-to-count-number-of-arguments/)。

```
#define VA_NUM_ARGS(...) VA_NUM_ARGS_IMPL(__VA_ARGS__, 5,4,3,2,1)
#define VA_NUM_ARGS_IMPL(_1,_2,_3,_4,_5,N,...) N 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-08-09T20:59:11.420

这似乎在 GCC、Clang 和 MSVC 上运行良好。这是这里一些答案的清理版本

```
#define _my_BUGFX(x) x

#define _my_NARG2(...) _my_BUGFX(_my_NARG1(__VA_ARGS__,_my_RSEQN()))
#define _my_NARG1(...) _my_BUGFX(_my_ARGSN(__VA_ARGS__))
#define _my_ARGSN(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,N,...) N
#define _my_RSEQN() 10,9,8,7,6,5,4,3,2,1,0

#define _my_FUNC2(name,n) name ## n
#define _my_FUNC1(name,n) _my_FUNC2(name,n)
#define GET_MACRO(func,...) _my_FUNC1(func,_my_BUGFX(_my_NARG2(__VA_ARGS__))) (__VA_ARGS__)

#define FOO(...) GET_MACRO(FOO,__VA_ARGS__) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-11-12T15:24:20.440

根据[@netcoder 的回答](https://stackoverflow.com/a/11763277/372164)和[@vexe](https://stackoverflow.com/questions/11761703/overloading-macro-on-number-of-arguments/69945225#comment53159302_11763277)关于Visual Studio 编译器支持的建议，我发现这段代码在各种平台上运行良好：

```
#define FOO1(a) func1(a)
#define FOO2(a, b) func2(a, b)
#define FOO3(a, b, c) func3(a, b, c)

#define EXPAND(x) x
#define GET_MACRO(_1, _2, _3, NAME, ...) NAME
#define FOO(...) EXPAND(GET_MACRO(__VA_ARGS__, FOO3, FOO2, FOO1)(__VA_ARGS__)) 
```

, `func1()`, `func2()`,`func3()`只是接受不同数量参数的普通函数。

# magento - Magento TopLink 缓存我的购物车 (#)

> ID：11761705
> 
> 赞同：5
> 
> 时间：2012-08-01T14:42:56.120
> 
> 标签：magento, magento-1.12

**我对标题和缓存上的“我的车（#）”有一些问题。**

我正在使用 Magento Enterprise 1.12。问题是当我在标题中的购物车中添加或删除某些项目时，我有“我的车（＃）”并且每次我从购物车中添加或删除项目时都不会更新，那是因为缓存，我不知道如何解决它...

**脚步：**

1）从管理员清理缓存

2）进入首页（在标题出现“我的购物车”）

3）去一些产品页面

4）添加一些产品到购物车

5）重定向到我的购物车页面（在标题中出现“我的购物车（1项）”）

6) 再次转到主页（在标题中仍然出现“我的购物车”），没有“1 项”

如果我转到管理站点并清理主页上的缓存，则会出现“我的购物车（1 项）”。当我有 1 件商品然后我从购物车中删除该商品时，我遇到了同样的问题。

我需要有活力的黑色，我不知道该怎么做。

Tnks 阅读！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-18T21:54:16.763

好的，这里可能有很多问题，但也许调试这个问题的一个不错的方法是覆盖 JavaScript **Minicart**方法以查看它在哪里出错。

在您的模块的 layout.xml 文件[中，按照此帖子添加自定义脚本](https://magento.stackexchange.com/questions/42623/adding-js-file-in-head-phtml)

接下来，Minicart.prototype 有很多功能，**console.log(Minicart.prototype)；**查看它们。

我冒险猜测**updateItem**方法出了点问题。通过在您的 JS 文件中添加它来覆盖它：

```
if (typeof Minicart != "undefined") {
    Minicart.prototype.updateItem = function(el) {
        var cart = this;
        var input = $j(this.selectors.quantityInputPrefix + $j(el).data('item-id'));
        var quantity = parseInt(input.val(), 10);
        cart.hideMessage();
        cart.showOverlay();
        $j.ajax({
            type: 'POST',
            dataType: 'json',
            url: input.data('link'),
            data: {qty: quantity, form_key: cart.formKey}
        }).done(function(result) {
            cart.hideOverlay();
            if (result.success) {
                cart.updateCartQty(result.qty);
                if (quantity !== 0) {
                    cart.updateContentOnUpdate(result);
                } else {
                    cart.updateContentOnRemove(result, input.closest('li'));
                }
            } else {
                cart.showMessage(result);
            }
        }).error(function() {
            cart.hideOverlay();
            cart.showError(cart.defaultErrorMessage);
        });
        return false;
    };
} 
```

并开始注销它失败的部分。如果这不是导致错误，请尝试另一种方法。

快乐编码！

# php - 选中复选框时仅重新加载一个 DIV

> ID：11761706
> 
> 赞同：1
> 
> 时间：2012-08-01T14:42:58.040
> 
> 标签：php, javascript, html, checkbox, reload

我一直试图让脚本工作，但没有机会！

基本上，我希望复选框表单在选中一个框时自动提交，然后在我的站点上仅重新加载一个特定的 DIV (indexMain)。我想要实现的是在左侧按颜色进行过滤，因此当用户检查 RED 时，只会显示 RED 项目（通过重新加载 Items DIV）。

这是我到目前为止的代码（不工作，因为检查颜色框没有任何效果）：

```
<script>
$(function() {
      $(".regularCheckbox").change(function() {
      console.log("changed...");
      var data = $(this).serialize();
      console.log(data);
      $("#indexMain").load("index.php?data="+data)
               })
    })
</script>
<div class="bgFilterTitles">
<h1 class="filterTitles">COLOR</h1>
</div><div class="colors">

<form id ="colors" method="post" action="index.php">

<?php
$colors = mysql_query("SELECT DISTINCT color_base1 FROM item_descr ORDER BY color_base1");
while ($colorBoxes = mysql_fetch_array($colors))
{
echo "<input type='checkbox' id='checkbox-1-1' class='regularCheckbox' name='color' value='".$colorBoxes[color_base1]."' /><font class='similarItemsText'>   ".$colorBoxes[color_base1]."</font><br />";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:58:16.170

看看[Jquery 在 AJAX 成功上通过 .submit() 提交表单...怎么样？](https://stackoverflow.com/questions/6675936/jquery-submit-a-form-via-submit-on-ajax-success-how)

您“调用”的 .load() 函数实际上是一个事件处理程序，因此它不会对提交表单做任何事情。

如果您的 PHP 返回和 HTML 片段，那么您可以使用 jquery（或标准 DOM）将 html 片段添加为目标 div 的 innerHTML。

更新：我的初始输入速度太快了，$(ele).load() 函数确实可以工作，所以请在 Firebug 或其他开发人员工具中检查您的请求和响应。

# c++ - 替代 System() 在程序中运行批处理文件

> ID：11761708
> 
> 赞同：1
> 
> 时间：2012-08-01T14:42:59.593
> 
> 标签：c++, gcc, system

我想制作一个系统，我可以在一个程序中运行一个 make 文件和其他几个与 gcc 相关的东西，基本上是在程序中使用 gcc 和编译东西。如果我把我想做的所有事情都写到一个批处理文件中，那么我需要从程序中运行那个批处理文件。

现在每个人都说`System()`，由于安全性和其他各种原因，通话非常糟糕。因此，考虑到我正在使用 c++`System()`来运行批处理文件，这将是一个不错的选择。如果更可取，我想要跨平台的替代方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:02:36.107

You could look to use the `fork` and `execl` family of calls although these are tied down to Unix / Linux and, depending on how you use them, are arguably no safer than system.

I doubt very much that you'll find a common, cross platform way of doing this if only because all platforms will have different and unique ways of doing this. Also, the scripts you're trying to run will no doubt have to be different on different platforms and there may be different ways of specifying things such as directory paths etc.

My suggestion would be to first ask yourself how you'll take the following questions - which would be my main concerns:

*   How am I going to prevent accidental / intentional misuse?
*   How am I going to detect errors or success status within the scripts I'm running?
*   How am I going to provide for dependencies? E.g. script A must run completely and correctly before script B runs.
*   How am I going to report the success and failure state.

My final question would be why do you want to do this in C++? Is there a specific reason? Naturally I'm a C++ evangelist although I would have thought this would be better tackled by a scripting language such as Perl, Python or possibly Bash unless you're embarking on something far more radical.

# jquery - 手风琴在使用 jquery 回发时保持面板打开

> ID：11761711
> 
> 赞同：0
> 
> 时间：2012-08-01T14:43:05.167
> 
> 标签：jquery

我有以下手风琴的例子。

[http://jsfiddle.net/zidski/NU7Gp/14/](http://jsfiddle.net/zidski/NU7Gp/14/)

如果您单击第一个面板，您应该会看到一个编辑放置-一旦您单击编辑按钮，面板就会关闭-当您有回发时，我会尝试保持此面板打开-如何使用 jquery 来实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:51:50.450

您必须使用 AJAX 进行回发。如：

```
$('#myFormId').submit(function(event){
    event.preventDefault();
    $.post($(this).attr('action'), function(response){
        // ... handle response from post here ...
    });
}); 
```

现在，您只是按照一条评论的建议重新加载页面。我假设您这样做是为了模拟回发表单。基本上，这样想。当您第一次加载一个页面时，它就“诞生”了。如果您以任何方式重新加载，您将“杀死”该页面以及所有已完成的 javascript 状态和设置。保持该状态的唯一方法是通过使用异步请求和 DOM 操作来保持页面“活动”。祝你好运，欢迎来到网络 :)

# devexpress - DevExpress XtraScheduler 挂起将约会添加到存储

> ID：11761713
> 
> 赞同：0
> 
> 时间：2012-08-01T14:43:07.260
> 
> 标签：devexpress

我有一个 XtraScheduler SchedulerControl 配置如下：

```
private DevExpress.XtraScheduler.SchedulerControl _SchedulerControl;
public DevExpress.XtraScheduler.SchedulerControl ConvSchedulerControl
{
    get
    {
        if (_SchedulerControl == null)
        {
            _SchedulerControl = new DevExpress.XtraScheduler.SchedulerControl();

            _SchedulerControl.Storage = new SchedulerStorage();
            _SchedulerControl.Storage.Appointments.Mappings.Subject = "StandingOrderIDString";
            _SchedulerControl.Storage.Appointments.Mappings.Start = "ScheduledDate";
            _SchedulerControl.Storage.Appointments.Mappings.RecurrenceInfo = "RecurrenceInfo";
            _SchedulerControl.Storage.Appointments.Mappings.Type = "Type";

            _SchedulerControl.Storage.Appointments.CustomFieldMappings.Add(new DevExpress.XtraScheduler.AppointmentCustomFieldMapping("Inactive", "Inactive"));
            _SchedulerControl.Storage.Appointments.CustomFieldMappings.Add(new DevExpress.XtraScheduler.AppointmentCustomFieldMapping("StandingOrderKEY", "StandingOrderKEY"));

            BindingSource bs = new BindingSource();
            bs.DataSource = new List<StandingOrder>();
            _SchedulerControl.Storage.Appointments.DataSource = bs;
        }
        return _SchedulerControl;
    }
} 
```

我正在尝试以编程方式添加带有重复信息的约会，如[http://help.devexpress.com/#WindowsForms/CustomDocument6201](http://help.devexpress.com/#WindowsForms/CustomDocument6201)中给出的示例所示。但是，当方法执行到达将创建的约会添加到存储的最后一行（已指示）时，它“挂起”。从来没有抛出异常；我让它运行了 15 分钟以上，没有任何变化：

```
public void SetRecurrence(DateTime startDate, DateTime? endDate)
{
    Appointment appointmentObj = ConvSchedulerControl.Storage.CreateAppointment(AppointmentType.Pattern);

    if (endDate != null &&
        endDate != DateTime.Parse("12/31/2999"))
    {
        appointmentObj.End = (DateTime)endDate;
    }
    else
    {
        appointmentObj.RecurrenceInfo.Range = RecurrenceRange.NoEndDate;
    }

    appointmentObj.Start = startDate;
    appointmentObj.RecurrenceInfo.Type = RecurrenceType.Weekly;
    appointmentObj.RecurrenceInfo.WeekDays = WeekDays.Monday;
    appointmentObj.AllDay = true;

//Program execution reaches this line, but never proceeds past it.
    ConvSchedulerControl.Storage.Appointments.Add(appointmentObj);
} 
```

我可以想象配置有问题导致存储无法成功添加约会，但我无法找到有关该主题的任何其他信息。有谁知道为什么这种方法不适合将约会添加到存储中，以及如何纠正它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:25:11.867

您未能为“结束”字段提供映射。这是必需的映射。老实说，我只是在设计师中创建了一个日历才知道这一点。当您将 SchedulerControl 放置到窗体/控件上时，设计器为您提供的其中一件事是“映射向导”。“开始”和“结束”字段在向导中标记为必填项。

# ios - RestKit 递归映射

> ID：11761718
> 
> 赞同：2
> 
> 时间：2012-08-01T14:43:30.817
> 
> 标签：ios, restkit

我已经定义了一个非常简单的映射，具有一些普通属性，但是现在我遇到了我在服务器上的数据结构是一棵树的问题，所以我得到了一个“CustomObject”列表，其中包含一些属性和一个“CustomObject”列表“ 哪个 ...

所以在代码中它看起来像这样（简化）

```
+ (RKObjectMapping*)getCustomObjectMapping
{
    RKObjectMapping* customObjectMapping = [RKObjectMapping mappingForClass:[CustomObject class]];
    [customObjectMapping mapKeyPath:@"title" toAttribute:@"title"];
    [..]

    // Define the relationship mapping
    //[customObjectMapping mapKeyPath:@"nextLevel" toRelationship:@"nexLevel" withMapping:[self getCustomObjectMapping]];

    return customObjectMapping;
} 
```

这显然会导致无休止的递归。

有没有一种聪明的方法来做这个映射？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T21:03:14.883

它非常简单，最近的 RestKit 库支持它就好了。您需要引用正在构建的映射对象，而不是递归引用 +getCustomObjectMapping。以下是您需要执行的操作：

```
+ (RKObjectMapping*)getCustomObjectMapping
{
    RKObjectMapping* customObjectMapping = [RKObjectMapping mappingForClass:[CustomObject class]];
    [customObjectMapping mapKeyPath:@"title" toAttribute:@"title"];
    [..]

    // Define the relationship mapping
    [customObjectMapping mapKeyPath:@"nextLevel" toRelationship:@"nexLevel" withMapping:customObjectMapping];

    return customObjectMapping;
} 
```

# algorithm - 计算VBA中所选（大）范围内不同值的数量？

> ID：11761723
> 
> 赞同：5
> 
> 时间：2012-08-01T14:43:38.417
> 
> 标签：algorithm, vba, excel, mergesort

如何计算 VBA 中所选（大）范围内不同值（数字和字符串混合）的数量？

我是这样考虑的：
1\. 将数据读入一维数组。
2.排序数组（快速或合并排序）需要测试哪个
3.如果排序数组，只需计算不同值的数量：`if(a[i]<>a[i+1]) then counter=counter+1`。

这是解决这个问题的最有效方法吗？

编辑：我想在 Excel 中进行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T15:15:35.957

这是一个VBA解决方案

你不需要一个数组来完成这个。您也可以使用集合。例子

```
Sub Samples()
    Dim scol As New Collection

    With Sheets("Sheet1")
        For i = 1 To 100 '<~~ Assuming the range is from A1 to A100
            On Error Resume Next
            scol.Add .Range("A" & i).Value, Chr(34) & _
            .Range("A" & i).Value & Chr(34)
            On Error GoTo 0
        Next i
    End With

    Debug.Print scol.Count

    'For Each itm In scol
    '   Debug.Print itm
    'Next
End Sub 
```

**跟进**

```
Sub Samples()
    Dim scol As New Collection
    Dim MyAr As Variant

    With Sheets("Sheet1")
        '~~> Select your range in a column here
        MyAr = .Range("A1:A10").Value

        For i = 1 To UBound(MyAr)
            On Error Resume Next
            scol.Add MyAr(i, 1), Chr(34) & _
            MyAr(i, 1) & Chr(34)
            On Error GoTo 0
        Next i
    End With

    Debug.Print scol.Count

    'For Each itm In scol
    '   Debug.Print itm
    'Next
End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T15:13:16.567

Instead of steps 2 and 3, perhaps you could use a `Scripting.Dictionary` and add each value to the dictionary. Any duplicate entries would cause a runtime error which you could either trap or ignore (`resume next`). Finally, you could then just return the dictionary's `count` which would give you the count of unique entries.

Here's a scrap of code I hurriedly threw together:

```
Function UniqueEntryCount(SourceRange As Range) As Long

    Dim MyDataset As Variant
    Dim dic As Scripting.Dictionary
    Set dic = New Scripting.Dictionary

    MyDataset = SourceRange

    On Error Resume Next

    Dim i As Long

    For i = 1 To UBound(MyDataset, 1)

        dic.Add MyDataset(i, 1), ""

    Next i

    On Error GoTo 0

    UniqueEntryCount = dic.Count

    Set dic = Nothing

End Function 
```

I know that `resume next` can be considered a 'code smell', but the alternative could be to use the `exists` function of the dictionary to test whether the specified key already exists and then add the value if did not. I just have a feeling that when I did a similar thing in the past that it was faster to just ignore any errors raised for duplicate keys rather than using `exists` YMMY. For completeness, here's the other method using `exists`:

```
Function UniqueEntryCount(SourceRange As Range) As Long

    Dim MyDataset As Variant
    Dim dic As Scripting.Dictionary
    Set dic = New Scripting.Dictionary

    MyDataset = SourceRange

    Dim i As Long

    For i = 1 To UBound(MyDataset, 1)

        if not dic.Exists(MyDataset(i,1)) then dic.Add MyDataset(i, 1), ""

    Next i

    UniqueEntryCount = dic.Count

    Set dic = Nothing

End Function 
```

Whilst the above code is simpler than your proposed method, it would be worth to test the performance of it against your solution.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T15:20:32.780

[基于i_saw_drones](https://stackoverflow.com/a/11762259/698590)提出的想法，我强烈推荐`Scripting.Dictionary`. 但是，这可以在没有`On Error Resume Next`如下所示的情况下完成。此外，他的示例需要链接`Microsoft Scripting Runtime`库。我的示例将演示如何在不需要进行任何链接的情况下执行此操作。

此外，由于您在 Excel 中执行此操作，因此您根本不需要在步骤 1 中创建数组。下面的函数将接受一系列单元格，这些单元格将被完全迭代。

（即`UniqueCount = UniqueEntryCount(ActiveSheet.Cells)`或`UniqueCount = UniqueEntryCount(MySheet.Range("A1:D100")`）

```
Function UniqueEntryCount(SourceRange As Range) As Long
    Dim MyDataset As Variant
    Dim MyRow As Variant
    Dim MyCell As Variant
    Dim dic As Object
    Dim l1 As Long, l2 As Long

    Set dic = CreateObject("Scripting.Dictionary")
    MyDataset = SourceRange

    For l1 = 1 To UBound(MyDataset)
        ' There is no function to get the UBound of the 2nd dimension 
        ' of an array (that I'm aware of), so use this division to 
        ' get this value. This does not work for >=3 dimensions!
        For l2 = 1 To SourceRange.Count / UBound(MyDataset)
            If Not dic.Exists(MyDataset(l1, l2)) Then
                dic.Add MyDataset(l1, l2), MyDataset(l1, l2)
            End If
        Next l2
    Next l1

    UniqueEntryCount = dic.Count
    Set dic = Nothing
End Function 
```

可能还需要注意的是，上述内容会将空字符串计`""`为不同的值。如果您不希望出现这种情况，只需将代码更改为：

```
 For l1 = 1 To UBound(MyDataset)
        For l2 = 1 To SourceRange.Count / UBound(MyDataset)
            If Not dic.Exists(MyDataset(l1, l2)) And MyDataset(l1, l2) <> "" Then
                dic.Add MyDataset(l1, l2), MyDataset(l1, l2)
            End If
        Next l2
    Next l1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T14:53:24.870

抱歉，这是用 C# 编写的。我就是这样做的。

```
// first copy the array so you don't lose any data
List<value> copiedList = new List<value>(yourArray.ToList());

//for through your list so you test every value
for (int a = 0; a < copiedList.Count; a++)
{
  // copy instances to a new list so you can count the values and do something with them
  List<value> subList = new List<value>(copiedList.FindAll(v => v == copiedList[i]);

  // do not do anything if there is only 1 value found
  if(subList.Count > 1)
                        // You would want to leave 1 'duplicate' in
    for (int i = 0; i < subList.Count - 1; i++)
        // remove every instance from the array but one
        copiedList.Remove(subList[i]);
}
int count = copiedList.Count; //this is your actual count 
```

没有测试过，请尝试。

你应该把它包装在一个方法中，这样就不会弄乱垃圾了。否则，您只会在以后丢失数组的副本。（返回计数）

编辑：你需要一个列表才能工作，使用 Array.ToList();

# jquery - 具有多个类的 CSS 选择器

> ID：11761724
> 
> 赞同：-1
> 
> 时间：2012-08-01T14:43:45.747
> 
> 标签：jquery, css-selectors

当一个元素可以有一个或多个类时

```
<div class="questionItem format"/> 
```

或者

```
<div class="questionItem"><div> 
```

`questionItem`无论其他类如何，您如何找到所有带有 div 的 div ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:44:40.393

在 jQuery 中，我猜？

```
var qItems = $('.questionItem'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T14:47:33.870

这很简单，

```
$('.questionItem') 
```

将返回所有具有该类的元素`questionItem`

尽管：

```
$('.questionItem.format') 
```

将返回具有 BOTH 类`questionItem`和`format`

在 jQuery 文档中阅读有关[选择器](http://api.jquery.com/category/selectors/)和[类选择器的信息](http://api.jquery.com/class-selector/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T14:45:48.393

如果你想要所有的div： `$('div.questionItem')`

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-01T14:48:30.550

找到了解决方案：

```
filter(".questionItem") 
```

我一直在使用：

```
filter("[class='questionItem']") 
```

# c# - Silverlight identifyTask w/fieldsToDisplay 不显示多项功能

> ID：11761730
> 
> 赞同：0
> 
> 时间：2012-08-01T14:43:53.940
> 
> 标签：c#, silverlight, xaml, arcgis

我正在尝试创建一个从 identifyTask 填充的 ComboBox（该任务来自 ArcGIS Silverlight API）。我遇到了两个事件的问题。一个创建一个列表，而另一个将该列表推送到 ComboBox。我似乎无法正确创建列表。现在，ComboBox 只是空白。

**这是一个 XAML 片段：**

```
<ComboBox x:Name="IdentifyComboBox" SelectionChanged="cb_SelectionChanged"
                     Margin="5,1,5,5" Grid.Row="0">
                </ComboBox> 
```

**这是一个 C# 片段：**

```
public void ShowFeatures(List<IdentifyResult> results)
        {
            _dataItems = new List<DataItem>();

            if (results != null && results.Count > 0)
            {
                var fieldsToDisplay = new List<string>() { "OBJECTID", "Projekt", "Laufzeit", "Ansprechpa" };
                foreach (IdentifyResult result in results)
                {
                    Graphic feature = result.Feature;
                    string title = result.Value.ToString() + " (" + result.LayerName + ")";
                    var attributesToDisplay = new Dictionary<string, object>();
                    foreach (var item in feature.Attributes)
                        if (fieldsToDisplay.Contains(item.Key))
                            attributesToDisplay[item.Key] = item.Value;

                    _dataItems.Add(new DataItem()
                    {
                        Title = title,
                        Data = attributesToDisplay
                    });
                }
                IdentifyComboBox.SelectedIndex = 0;
            }
        }

        void cb_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            int index = IdentifyComboBox.SelectedIndex;
            if (index > -1)
                IdentifyDetailsDataGrid.ItemsSource = _dataItems[index].Data;
        } 
```

# c# - 将 log4net 与 asp.net 网络表单一起使用

> ID：11761731
> 
> 赞同：4
> 
> 时间：2012-08-01T14:43:54.233
> 
> 标签：c#, asp.net, log4net, error-logging

我正在尝试将 log4net 合并到我的 Web 应用程序中。我已经使用基于 .net mvc 的较新部分这样做了，但是在将其合并到我的应用程序的基于 Web 表单的部分时遇到了麻烦。我环顾四周找了一个例子，但没有遇到过。

为了缩小我的问题范围，假设我知道如何配置我的 web.config 文件。我的问题是：

(1) 我考虑过将对 log4net 的实际调用放在“Global.asax”文件中，并将其放在我的基本页面中（所有其他页面都在该页面上构建）。我应该将实际代码放在这些地方，如果不是，我应该把代码放在哪里？

（2）我对代码的理解是我需要实例化一个日志，然后在我想要的时候有那个日志日志的东西（日志的细节由web.config处理），但我不知道该代码实际上应该是什么样子。那么，我应该在我的文件中实际放置什么代码？（示例将不胜感激）

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T15:10:32.990

只需将代码放在您需要的地方。

开始我只是在我需要的每一页中使用这条线......

```
static Logger log = LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType); 
```

所以记录器获取当前类的名称，包括完整的命名空间。我还使用 global.asax 中的记录器，例如错误记录

```
protected void Application_Error(object sender, EventArgs e)
    {
        StringBuilder sb = new StringBuilder();
        sb.Append("Unhandled error occured in application. Sender: ");
        sb.AppendLine(Request.RawUrl);
        sb.Append("Query: ");
        sb.AppendLine(Request.QueryString.ToString());

        Exception ex = Server.GetLastError().GetBaseException();

        log.Error(sb.ToString(), ex);
        Server.ClearError();

        Response.Redirect("~/Error.aspx");
    } 
```

但我将日志配置与 web.config 分开。这对我来说更容易，你不必处理这么大的文件。我还认为，当您更改日志配置文件时，该应用程序没有重新启动。据我所知，如果您更新 web.config 应用程序总是重新启动。

要做到这一点，您只需在 add 中将以下内容添加到 web.config

```
<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/> 
```

而不是在 web.config 中的某处添加这一行

```
<log4net configSource="log.config"/> 
```

然后文件“log.config”配置了所有侦听器。但不要忘记将文件复制到您的生产/测试环境。否则您可能会收到奇怪的错误消息。

hth

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:56:46.193

将它放在基本页面中听起来是个好主意，然后在使用 GetLogger 进行实例化时，您可以传入您正在登录的页面（尽可能具体地说明您的日志调用来自哪里确实有助于调试）。您还需要在实例化后调用 .Configure ，这总是让我感到困惑（需要为此导入 Log4Net.Configure）

将您的侦听器配置放在 web.config 中，并通过 LevelRangeFilter 定义最小/最大级别（DEBUG 最低，FATAL 最高）。

用法非常简单 - 您只需使用所需的级别进行日志记录，例如：log.Info、log.InfoFormat、log.Error、log.ErrorFormat（格式就像 String.Format 一样工作） - 低于最低配置日志级别的任何内容都将是忽略，因此您可以根据需要进行尽可能多的登录。

你也检查过Elmah吗？这允许您跟踪未处理的异常。[http://code.google.com/p/elmah/](http://code.google.com/p/elmah/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:01:00.443

分享一下我使用logger的经验。通常我将它与 IOC 容器一起使用，即 Windsor。因此，我在 Global.asax 文件中进行了记录器的初始化，因为它每个应用程序运行一次，并且处理所有请求。这是初始化记录器的合适位置。至于应该调用日志的地方，没有任何建议。你应该打电话到你需要的地方。如果您根据页面生命周期记录一些事件，当然您应该在页面代码隐藏文件中使用记录器。但是如果你想跟踪你的组件，最好在单独的库中提取逻辑并在其中使用记录器。

# jquery-ui - JQueryUI sortable connectWith数组数据

> ID：11761732
> 
> 赞同：0
> 
> 时间：2012-08-01T14:43:56.370
> 
> 标签：jquery-ui, jquery-ui-sortable

我正在使用 jQueryUI Sortable 和 connectWith 来允许在 3 个无序列表之间拖放项目。

每个列表项都包含一个字符串和一个值，并分配了一个 ID。拖放完成后，我想对每个列表中每个项目的值求和，并在每个列表的底部显示总计。

我可以通过 AJAX 调用来做到这一点，但目前，我无法从列表中以我想要的格式获得所需的数据。

理想情况下，我想获得一个包含 UL ID 的数组，该数组又包含一个关联数组，其中包含列表项的 ID 作为键和其中的数值。我希望通过为包含每个 LI 中数值的 div 分配一个 ID，我可以以某种方式提取它。

非常感谢任何建议或指示。

谢谢你。

[jsFiddle在这里](http://jsfiddle.net/tametech/HNxZU/)

Fiddle 输出到控制台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:10:38.460

我已经调整了那个小提琴并让它为你完成了所有事情：http: [//jsfiddle.net/HNxZU/32/](http://jsfiddle.net/HNxZU/32/)

它不做任何数组的东西，但希望你可以用 selected 获取总数`('li.ui-state-disabled')`。让我知道你是怎么办的。

# jsp - 多个上传文件 JSP servlet 总是失败

> ID：11761736
> 
> 赞同：1
> 
> 时间：2012-08-01T14:44:08.067
> 
> 标签：jsp, servlets, file-upload

作为标题，我想在我的jsp项目中使用servlet进行多个上传文件。我正在新项目中对其进行测试，并且没有问题。然后我试图将它实现到我的项目中，它有代码：

```
boolean isMultipart = ServletFileUpload.isMultipartContent(request);
        if (!isMultipart) {
        } else {
            FileItemFactory factory = new DiskFileItemFactory();
            ServletFileUpload upload = new ServletFileUpload(factory);
            List items = null;
            try {
                items = upload.parseRequest(request);
            } catch (FileUploadException e) {
                e.printStackTrace();
            }
            Iterator itr = items.iterator();
            while (itr.hasNext()) {
                FileItem item = (FileItem) itr.next();
                if (item.isFormField()) {
                } else {
                    try {
                        String itemName = item.getName();;
                        File savedFile = new File("D://uploadedFiles");
                        item.write(savedFile);
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
            }
        }

    } 
```

但我总是收到这样的错误：

```
HTTP Status 500 -

type Exception report

message

descriptionThe server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: PWC1392: Error instantiating servlet class servlet.ManagementProdukServlet

root cause

java.lang.NoClassDefFoundError: org/apache/commons/fileupload/FileUploadException

root cause

java.lang.ClassNotFoundException: org.apache.commons.fileupload.FileUploadException

note The full stack traces of the exception and its root causes are available in the GlassFish Server Open Source Edition 3.1.2 logs. 
```

但我已经在我的 servlet 中导入了这个：

```
import controller.Produk;
import dao.DataAksesAdmin;
import java.io.File;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;
import java.util.List;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.annotation.MultipartConfig;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.apache.commons.fileupload.FileItem;
import org.apache.commons.fileupload.FileItemFactory;
import org.apache.commons.fileupload.FileUploadException;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.servlet.ServletFileUpload; 
```

谁能告诉我我的代码有什么问题导致我的上传表单在我的项目中不起作用，但它在新项目中起作用？有时我没有收到错误代码，但我的浏览器出现错误：“连接重置”。它会影响我的项目吗？是什么导致了我的两个问题？

抱歉英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T08:58:52.200

阅读此链接，解释得很好。Servlet 3.0 不能与 apache fileupload 1.3 一起工作。[如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T18:11:39.907

即使您在源文件中导入，jar 也应该在类路径中。如果您从 ide 运行，请确保您进行了干净的构建，一旦没有错误，部署并启动项目。如果您要部署为战争，请确保您的战争包含所需的 jar 文件。

# javascript - 如何制作 Google Maps API v3 六边形平铺地图，最好是基于坐标的？

> ID：11761738
> 
> 赞同：6
> 
> 时间：2012-08-01T14:44:09.320
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-api-2

[http://econym.org.uk/gmap/example_eshapes.htm](http://econym.org.uk/gmap/example_eshapes.htm)有一个如何平铺六边形的 Google Maps API v2 示例，尽管实现的扩展很痛苦：它有一个中心六边形，然后在适当的方向上相邻有六个六边形，然后（在准递归中）与与原始六边形相邻的六边形之一相邻的三个六边形。它有一个带有透明填充的漂亮边框。

如何创建类似的效果，但最好使用平铺，以便我指定（没有递归土堆）我想要在原点以东六个六边形和四个六边形从六个六边形到东？

我正在寻找基于坐标的东西，最好是简单的。我查看了[http://www.rootmetrics.com/check-coverage/](http://www.rootmetrics.com/check-coverage/)的源代码，它可以工作，但是代码与他们的特定页面、标记等耦合，所以模仿他们的代码需要一些时间解开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-03T19:34:27.907

以下示例演示了如何渲染*水平六边形网格*：

```
function initialize() {
    var mapOptions = {
        zoom: 7,
        mapTypeId: google.maps.MapTypeId.TERRAIN
    };

    var map = new google.maps.Map(document.getElementById('map-canvas'),mapOptions);
    var startPosition = new google.maps.LatLng(33.748589, -84.390392);  //Atlanta, GA, USA 
    var radius = 40 * 1000; //radius in meters
    drawHorizontalHexagonGrid(map,startPosition,radius,6);
    map.setCenter(startPosition);
}

function drawHorizontalHexagonGrid(map,startPosition,radius,count){
    var curPos = startPosition;
    var width = radius * 2 * Math.sqrt(3)/2 ; 
    for(var i = 0;i < count; i++){
        drawHorizontalHexagon(map,curPos,radius);
        curPos = google.maps.geometry.spherical.computeOffset(curPos, width,90);   
    }
}

function drawHorizontalHexagon(map,position,radius){
    var coordinates = [];
    for(var angle= 0;angle < 360; angle+=60) {
       coordinates.push(google.maps.geometry.spherical.computeOffset(position, radius, angle));    
    }

    // Construct the polygon.
    var polygon = new google.maps.Polygon({
        paths: coordinates,
        strokeColor: '#FF0000',
        strokeOpacity: 0.8,
        strokeWeight: 2,
        fillColor: '#FF0000',
        fillOpacity: 0.35
    });
    polygon.setMap(map);
    map.setCenter(position);
}

google.maps.event.addDomListener(window, 'load', initialize);
```

```
html, body, #map-canvas {
    height: 100%;
    margin: 0px;
    padding: 0px;
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&libraries=geometry"></script>
<div id="map-canvas"></div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:06:01.873

我将 eshapes（和[http://econym.org.uk/gmap/example_eshapes.htm](http://econym.org.uk/gmap/example_eshapes.htm)）移植到 Google Maps API v3

[http://www.geocodezip.com/v3_MW_example_eshapes.html](http://www.geocodezip.com/v3_MW_example_eshapes.html)

不清楚这是否是您要查找的内容，但这似乎来自您问题的标题。

[概念证明小提琴](http://jsfiddle.net/geocodezip/etL21cfn/)

**代码片段：**

```
var map = null;

function initMap() {
  var myOptions = {
    zoom: 8,
    center: new google.maps.LatLng(43, -79.5),
    mapTypeControl: true,
    mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    },
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map"),
    myOptions);

  // === Hexagonal grid ===
  var point = new google.maps.LatLng(42, -78.8);
  map.setCenter(point);
  var hex1 = google.maps.Polygon.RegularPoly(point, 25000, 6, 90, "#000000", 1, 1, "#00ff00", 0.5);
  hex1.setMap(map);
  var d = 2 * 25000 * Math.cos(Math.PI / 6);
  var hex30 = google.maps.Polygon.RegularPoly(EOffsetBearing(point, d, 30), 25000, 6, 90, "#000000", 1, 1, "#00ffff", 0.5);
  hex30.setMap(map);
  var hex90 = google.maps.Polygon.RegularPoly(EOffsetBearing(point, d, 90), 25000, 6, 90, "#000000", 1, 1, "#ffff00", 0.5);
  hex90.setMap(map);
  var hex150 = google.maps.Polygon.RegularPoly(EOffsetBearing(point, d, 150), 25000, 6, 90, "#000000", 1, 1, "#00ffff", 0.5);
  hex150.setMap(map);
  var hex210 = google.maps.Polygon.RegularPoly(EOffsetBearing(point, d, 210), 25000, 6, 90, "#000000", 1, 1, "#ffff00", 0.5);
  hex210.setMap(map);
  hex270 = google.maps.Polygon.RegularPoly(EOffsetBearing(point, d, 270), 25000, 6, 90, "#000000", 1, 1, "#ffff00", 0.5);
  hex270.setMap(map);
  var hex330 = google.maps.Polygon.RegularPoly(EOffsetBearing(point, d, 330), 25000, 6, 90, "#000000", 1, 1, "#ffff00", 0.5);
  hex330.setMap(map);
  var hex30_2 = google.maps.Polygon.RegularPoly(EOffsetBearing(EOffsetBearing(point, d, 30), d, 90), 25000, 6, 90, "#000000", 1, 1, "#ff0000", 0.5);
  hex30_2.setMap(map);
  var hex150_2 = google.maps.Polygon.RegularPoly(EOffsetBearing(EOffsetBearing(point, d, 150), d, 90), 25000, 6, 90, "#000000", 1, 1, "#0000ff", 0.5);
  hex150_2.setMap(map);
  var hex90_2 = google.maps.Polygon.RegularPoly(EOffsetBearing(EOffsetBearing(point, d, 90), d, 90), 25000, 6, 90, "#000000", 1, 1, "#00ff00", 0.5);
  hex90_2.setMap(map);
}
google.maps.event.addDomListener(window, 'load', initMap);

// EShapes.js
//
// Based on an idea, and some lines of code, by "thetoy" 
//
//   This Javascript is provided by Mike Williams
//   Community Church Javascript Team
//   http://www.bisphamchurch.org.uk/   
//   http://econym.org.uk/gmap/
//
//   This work is licenced under a Creative Commons Licence
//   http://creativecommons.org/licenses/by/2.0/uk/
//
// Version 0.0 04/Apr/2008 Not quite finished yet
// Version 1.0 10/Apr/2008 Initial release
// Version 3.0 12/Oct/2011 Ported to v3 by Lawrence Ross
// subset of EShapes.js

google.maps.Polygon.Shape = function(point, r1, r2, r3, r4, rotation, vertexCount, strokeColour, strokeWeight, Strokepacity, fillColour, fillOpacity, opts, tilt) {
  var rot = -rotation * Math.PI / 180;
  var points = [];
  var latConv = google.maps.geometry.spherical.computeDistanceBetween(point, new google.maps.LatLng(point.lat() + 0.1, point.lng())) * 10;
  var lngConv = google.maps.geometry.spherical.computeDistanceBetween(point, new google.maps.LatLng(point.lat(), point.lng() + 0.1)) * 10;
  var step = (360 / vertexCount) || 10;

  var flop = -1;
  if (tilt) {
    var I1 = 180 / vertexCount;
  } else {
    var I1 = 0;
  }
  for (var i = I1; i <= 360.001 + I1; i += step) {
    var r1a = flop ? r1 : r3;
    var r2a = flop ? r2 : r4;
    flop = -1 - flop;
    var y = r1a * Math.cos(i * Math.PI / 180);
    var x = r2a * Math.sin(i * Math.PI / 180);
    var lng = (x * Math.cos(rot) - y * Math.sin(rot)) / lngConv;
    var lat = (y * Math.cos(rot) + x * Math.sin(rot)) / latConv;

    points.push(new google.maps.LatLng(point.lat() + lat, point.lng() + lng));
  }
  return (new google.maps.Polygon({
    paths: points,
    strokeColor: strokeColour,
    strokeWeight: strokeWeight,
    strokeOpacity: Strokepacity,
    fillColor: fillColour,
    fillOpacity: fillOpacity
  }))
}

google.maps.Polygon.RegularPoly = function(point, radius, vertexCount, rotation, strokeColour, strokeWeight, Strokepacity, fillColour, fillOpacity, opts) {
  rotation = rotation || 0;
  var tilt = !(vertexCount & 1);
  return google.maps.Polygon.Shape(point, radius, radius, radius, radius, rotation, vertexCount, strokeColour, strokeWeight, Strokepacity, fillColour, fillOpacity, opts, tilt)
}

function EOffsetBearing(point, dist, bearing) {
  var latConv = google.maps.geometry.spherical.computeDistanceBetween(point, new google.maps.LatLng(point.lat() + 0.1, point.lng())) * 10;
  var lngConv = google.maps.geometry.spherical.computeDistanceBetween(point, new google.maps.LatLng(point.lat(), point.lng() + 0.1)) * 10;
  var lat = dist * Math.cos(bearing * Math.PI / 180) / latConv;
  var lng = dist * Math.sin(bearing * Math.PI / 180) / lngConv;
  return new google.maps.LatLng(point.lat() + lat, point.lng() + lng)
}
```

```
html,
body,
#map {
  height: 100%;
  width: 100%;
  margin: 0px;
  padding: 0px
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?libraries=geometry&key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="map"></div>
```

# xquery - 如何在 Marklogic Server 中获得突出显示的文本

> ID：11761741
> 
> 赞同：-1
> 
> 时间：2012-08-01T14:44:20.597
> 
> 标签：xquery, marklogic

我想搜索上传到 Marklogic Server 的文档（doc、docx 或 pdf）中的文本，并且我想用颜色突出显示该搜索词。假设一个文档包含一行“这是一个测试文档”并且我正在搜索“测试”，那么应该返回“这是一个测试文档”这一行，并用颜色突出显示“测试”这个词。如果有多个包含单词“test”的句子，那么所有这些行都应该返回，并用颜色（例如蓝色）突出显示单词“test”。我想显示所有这些行，它们之间有一些空格或句号，或者所有结果都应该出现在新行中。

如果句子很长，那么我不想在结果中显示完整的句子。我想截断句子（在匹配词之前说 100 个词）。我知道我可以使用 cts:highlight 来做到这一点。但我无法让它工作。我想要工作的 xquery 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:51:30.460

您可以通过 cts:highlight() 执行此操作。请参阅[http://developer.marklogic.com/pubs/5.0/apidocs/SearchBuiltins.html#cts:highlight](http://developer.marklogic.com/pubs/5.0/apidocs/SearchBuiltins.html#cts:highlight)

# php - Zend 表单视图助手

> ID：11761745
> 
> 赞同：0
> 
> 时间：2012-08-01T14:44:24.313
> 
> 标签：php, zend-framework, zend-form, zend-form-element

我已经构建了一个 View 助手，它将构建一个复选框标签和输入。我遇到的问题是填充复选框值被忽略。

我的表单元素如下所示：

```
require_once 'Zend/Form/Element/Xhtml.php';

class Core_Form_Element_Other extends Zend_Form_Element_Xhtml
{

    public $helper = 'formOther';

    public function isValid ($value, $context = null)
    {
        return parent::isValid($value, $context);
    }

    public function getValue()
    {
        return parent::getValue();
    }
} 
```

视图助手是：

```
class Core_View_Helper_FormOther extends Zend_View_Helper_FormElement
{

    public function formOther($name, $value = null, $attribs = null)
    {
        $labelStyle = '';
        $label = '';
        $checkboxAttrib = array('checked' => 1,'unchecked' => 0);
        $textAttrib = array('size' => 10);

        foreach ($attribs as $k => $v)
        {
            $a = str_replace(array('text-', 'checkbox-'), '', $k);
            if (strpos($k, 'text-') !== false)
            {
                $textAttrib[$a] = $v;
            }
            if (strpos($k, 'checkbox-') !== false)
            {
                $checkboxAttrib[$a] = $v;
            }
        }

        $textValue = '';
        $checkboxValue = $checkboxAttrib['unchecked'];
        if (!empty($value))
        {
            $checkboxValue = $checkboxAttrib['checked'];
            $textValue = $value;
        }

        if (isset($attribs['checkboxLabel']))
        {
            $label = $attribs['checkboxLabel'];
        }
        if (isset($attribs['checkboxLabelStyle']))
        {
            $labelStyle = $attribs['checkboxLabelStyle'];
        }

        return $this->view->formCheckbox($name.'_check', $checkboxValue, null, $checkboxAttrib)
            . ' <label style="'. $labelStyle .'">'. $label .'</label> '
            . $this->view->formText($name, $textValue, $textAttrib);
    }
} 
```

最后它被调用：

```
$other = $this->createElement('Other', 'otherElem')
            ->setAttrib('checkboxLabel', 'Other')
            ->setAttrib('checkbox-checked', 'yes')
            ->setAttrib('checkbox-unChecked', 'no')
            ->setAttrib('checkboxLabelStyle', 'font-weight:normal;padding-right:0px;')
            ->setAttrib('text-size', 20)
            ->setDecorators(array(
                'ViewHelper',
                array('Errors', array('class' => 'error small', 'placement' => Zend_Form_Decorator_Abstract::PREPEND)),
                array('htmlTag', array('tag' => 'div', 'class' => 'span-8 last'))
            ));
        $this->_telements[] = $other; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:31:48.830

'on populate' 到底是什么意思？如果在未选中复选框的情况下提交表单时缺少您的值，则这是默认的 html 行为。

在任何时候，您是否使用属性'checked="checked"'设置复选框本身？复选框的值和选中状态是不同的东西。

在我看来，使用自定义装饰器是最错误的 Zend 表单样式。从 zend 输出默认的 html，用 jQuery 让你的表单标签漂亮。Zend 形式对很多事情都有好处，但风格和安排不是其中之一。

# apache - Apache Mod Rewrite - 仅最后一个参数？

> ID：11761750
> 
> 赞同：0
> 
> 时间：2012-08-01T14:44:52.543
> 
> 标签：apache, mod-rewrite

我想仅基于最后一个参数重写一些 URL。例如：

```
http://www.site.com/some-param/some-param/THIS-param 
```

我想抓住`THIS-param`并使用它进行重写。它始终是最后一个参数，但不一定是第三个。可能是第 2、第 3、第 4 或第 5。

我正在接近这个：

```
RewriteRule ([^/]+)$ index.php?url_title=$1 [NC,L,QSA] 
```

使用这个作为 url（例如）。

```
http://www.test.com/param1 
```

问题是，一旦我添加了“param2”，网站就会停止工作。我认为这是因为 param1 似乎是一个目录。

```
http://www.test.com/param1/param2 
```

知道为什么吗？这是我的全套规则：

```
Options +FollowSymlinks -MultiViews

RewriteEngine on

RewriteCond %{REQUEST_FILENAME} -f [NC,OR] 
RewriteCond %{REQUEST_FILENAME} -d [NC] 
RewriteRule .* - [L]

RewriteRule ([^/]+)$ index.php?url_title=$1 [NC,L,QSA]
RewriteRule .* index.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:50:12.877

You nearly had it. You need to capture everything that comes after the last `/`, and optionally capture what comes before it if needed. You said it coudld be 2nd through 5th, but didn't mention 1st, so that assumes *something* comes before it with a `/`, as in `^.+/`.

This also allows for a trailing `/`

### Edited to incorporate existing rules:

```
RewriteEngine On

# Real existing files not rewritten
RewriteCond %{REQUEST_FILENAME} -f [NC,OR] 
RewriteCond %{REQUEST_FILENAME} -d [NC] 
RewriteRule .* - [L]

#Inelegant hack to permit one param only
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/?$ index.php?url_title=$1 [L,QSA]
RewriteRule ^.+/([^/]+)/?$ index.php?url_title=$1 [L,QSA]
# Anything not matching above goes to index.php
RewriteRule .* index.php [L] 
```

# php - 字符串到整数的转换 - 在 PHP 和 Javascript 中相同

> ID：11761751
> 
> 赞同：1
> 
> 时间：2012-08-01T14:44:54.230
> 
> 标签：php, javascript, jquery, css, hash

我有一个使用 PHP 脚本动态显示的 URL。该 URL 成为 CSS 类的名称。在 Ajax 调用响应之后，我需要在 jQuery 脚本中使用这个类名（必须隐藏这个特定类的所有 HTML）。

URL 包含`/`and`.`和`:`- 为了在我的 jQuery 脚本中更容易，我想将 URL 转换为带有 PHP 函数的整数（如`hash("md5",)`）......并在我的 JavaScript 中，再次将 URL 转换为整数，这将是显然是一样的。

我读到[如何使用 javascript 计算文件的 md5 哈希，](https://stackoverflow.com/questions/768268/how-to-calculate-md5-hash-of-a-file-using-javascript) 但它看起来不是最好的解决方案。有没有人有更智能的解决方案？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:50:11.813

您可能正在寻找编码而不是散列，因为您想读回 URL。我会尝试在服务器端使用 base64：http: [//php.net/manual/en/function.base64-decode.php](http://php.net/manual/en/function.base64-decode.php)和[http://php.net/manual/en/function.base64-encode。 php](http://php.net/manual/en/function.base64-encode.php)

在客户端（JavaScript）端：[http](http://www.webtoolkit.info/javascript-base64.html) ://www.webtoolkit.info/javascript-base64.html ，[如何在 JavaScript 中将字符串编码为 Base64？](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript)

# r - 如何手动指定外结以在 gam 中更平滑（mgcv 包）

> ID：11761752
> 
> 赞同：0
> 
> 时间：2012-08-01T14:44:54.900
> 
> 标签：r, gam

我正在使用 R 中的 mgcv 包将 GAM 模型拟合到数据。我的一些预测变量是圆形的，所以我使用的是周期性平滑器。我在交叉验证中遇到了一个问题，我的保留数据集可能包含训练数据范围之外的值。由于 gam 包自动为平滑选择结，这会导致错误（请参阅我的相关问题[-](https://stackoverflow.com/questions/11749713/error-returned-predicting-new-data-using-gam-with-periodic-smoother)感谢@nograpes 和 @DWin 对那里错误的解释）。

如何手动指定周期性平滑的外部结？

**示例代码**

第一个块生成一些数据。

```
library(mgcv)

set.seed(223) # produces error.
# set.seed(123) # no error.

# generate data:
x <- runif(100,min=-pi,max=pi)
linPred <- 2*cos(x) # value of the linear predictor
theta <- 1 / (1 + exp(-linPred)) # 
y <- rbinom(100,1,theta)
plot(x,theta)
df <- data.frame(x=x,y=y) 
```

下一个块用周期性平滑拟合 GAM 模型：

```
gamFit <- gam(y ~ s(x,bs="cc",k=5),data=df,family=binomial())
summary(gamFit)
plot(gamFit) 
```

它将在更平滑术语的规范中的某个地方，`s(x,bs="cc",k=5)`我相信你将能够设置一些结，但这对我来说在谷歌搜索的帮助下并不明显`gam`。

如果您按上述方式设置种子，此块将适合一些保留数据并产生错误：

```
# predict y values for new data:
x.2 <- runif(100,min=-pi,max=pi)
df.2 <- data.frame(x=x.2)
predict(gamFit,newdata=df.2) 
```

理想情况下，我只会设置外部结，然后`gam`选择其余的。

如果这个问题对于 CrossValidated 来说比 SO 更好，我们深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:25:54.757

尝试这个：

```
gamFit <- gam(y ~ s(x,bs="cc",k=5), 
              knots=list( x=seq(-pi,pi, len=5) ), 
              data=df, family=binomial()) 
```

您将在以下位置找到一个工作示例：

```
?smooth.construct.cr.smooth.spec 
```

我在测试此代码时了解到，'k' 参数`s()`需要匹配 'x'-`seq()`传递给的值中的 'len' 参数`knots()`。我错误地认为节点参数会传递给`s()`.

# compiler-warnings - Xcode 4.4 警告：案例值不在枚举类型“MessageComposeResult”（又名“枚举 MessageComposeResult”）中

> ID：11761756
> 
> 赞同：0
> 
> 时间：2012-08-01T14:45:11.223
> 
> 标签：compiler-warnings, xcode4.4

还有其他人在 Xcode 4.4 中收到此警告吗？

案例值不在枚举类型“MessageComposeResult”（又名“枚举 MessageComposeResult”）中

MFMailComposeResultFailed 包含在文档中关闭邮件撰写界面时返回的结果代码中。但是，文档列出了它，但 GCC 警告它不是 MessageComposeResult 中的枚举。为什么？

```
 case MFMailComposeResultFailed:{
        //do something here
    }
        break; 
```

这是调用这种情况的扩展方法（我已将此枚举注释掉以禁用警告）：

```
- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result {

UIAlertView *errormsg = nil;
// Notifies users about errors associated with the interface
switch (result)
{
    case MFMailComposeResultCancelled:
    {
        //Do something, If you need to
        NSString *msgtitle = @"Cancelled Mail";
        NSString *Bodymsg = @"Email Has been Cancelled by USER. You may continue to make modifications to the current attendance data at this point.";
        errormsg = [[UIAlertView alloc] initWithTitle:msgtitle message:Bodymsg delegate:self cancelButtonTitle:@"Close" otherButtonTitles:nil];
    }
        break;
    case MFMailComposeResultSaved:{/*Do nothing at this point*/}
        break;
         //NOTE: MFMailComposeResultFailed is included in Result codes returned when the mail composition interface is dismissed. However the documentation lists it but the GCC warns it is NOT an enum within MessageComposeResult. May be an Apple Bug.
    /*case MFMailComposeResultFailed:{
        NSString *title = @"Unable to Send Mail";
        NSString *msg = @"Failed:\nmessage was not saved or queued, possibly due to an error.\nCheck your mail sent or draft items.";
        errormsg = [[UIAlertView alloc] initWithTitle:title message:msg delegate:self cancelButtonTitle:@"Close" otherButtonTitles:nil];
    }
        break;
       */  
    case MFMailComposeResultSent:{
        NSString *title = @"Mail Sent";
        NSString *msg = @"Attendance Email has been sent. Thank you.";

        errormsg = [[UIAlertView alloc] initWithTitle:title message:msg delegate:self cancelButtonTitle:@"Close" otherButtonTitles:nil];
        //clean up data
        //code here irrelevant
        //set a completed flag for sent email in system

        //display Alert and dismiss the mail composer view here
        UIAlertView *alertView = nil;

        if (result) {
            alertView = [[UIAlertView alloc] initWithTitle:@"AttendanceViewController: viewDidLoad" message:@"updateProgressOfClassInstance FAILED" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        }
        if (alertView != nil) {
            [alertView show];
        }

    }
        break;
    default:
        break;
}
//dismiss view and display any errors here.
[self dismissModalViewControllerAnimated:YES];
if (errormsg != nil) {
    [errormsg show];
} 
```

我希望这可以为你们澄清。谢谢！

（更新）好的，我的代码有几个我没有意识到的问题。我修复了它们，下面是正确的 switch 语句。

```
switch (result)
{
    case MessageComposeResultCancelled:
    {
        //Do something, If you need to!
    }
        break;

    case MessageComposeResultFailed:{
        //Do something else, If you need to!!
    }
        break;

    case MessageComposeResultSent:{
        //Do something user friendly, If you need to!

    }
        break;

    default:
        break;
} 
```

在自由世界和 stackoverflow 上继续摇滚！哇！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:13:05.707

您正在混淆错误代码。结果枚举具有您看到的三个值。

在此委托方法的错误中返回“MFMailComposeResultFailed”值：

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
```

查看此 deocumentation 页面的底部：

```
MFMailComposeViewController Class Reference 
```

# linux - 如何使用 tcpdump 获取网络中的设备信息？

> ID：11761767
> 
> 赞同：-2
> 
> 时间：2012-08-01T14:45:53.107
> 
> 标签：linux, networking, tcp

我可以通过 tcpdump 获取网络中的数据包。我想获取设备信息，例如计算机名称、型号名称、在其上运行的操作系统等。是否可以使用 tcpdump 数据包。

我得到了mac地址（通过arp），IP但是哪个层协议给出了我想要的上述信息。

你能告诉我如何使用这些转储的数据来获取我需要的数据吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:48:44.057

> 但是哪个层协议提供了我想要的上述信息

您提到的详细信息不存在于网络数据中 - 例如，在 TCP 段中宣传“Windows XP 发出了这个”是没有意义的。您最多可以使用类似`nmap`的工具尝试根据细微的网络引擎实现差异来猜测操作系统。

# javascript - 使用 javascript 向页面动态添加元素时 CSS 不起作用

> ID：11761771
> 
> 赞同：2
> 
> 时间：2012-08-01T14:46:10.750
> 
> 标签：javascript, html, css

我想动态地将新闻更新添加到页面。登录后，您将获得 20 条新闻。向下滚动到底部，有一个“更多”按钮。单击它，一些 ajax 从服务器获取 20 多个 json 格式。Javascript 将 json 解析为名称、日期、评论、图片等。

好消息是它确实有效。我可以为每个名称日期注释等创建文本节点，并将它们添加到 id="more" div，这一切都在一个简介中出现。

如何将其转换为与周围 div 相同的格式？我会尽量简短...

三栏布局，内三栏布局...

```
<div class="wrapper threecol">
<div class="colmid">
    <div class="colleft">
        <div class="col1">
            <div class="friends">   
            <div class="colwrap st-leftmenu">
                <c:forEach var="st" items="${news}">
                <div class="st-colleft">
                <div class="st-col1">
                <div class="statusName">
                    ${st.name}
                </div>
                        <%-- date, comment, pic etc. omitted --%>

                </div> <%-- end st-col2 --%>
                </div> <%-- end div class st-colleft --%> 
                </c:forEach>
                </div> <%-- end div class colwrap st leftmenu --%>

                        <%-- add new stuff here dynamically --%>
                <div id="showExtra"></div>

                <a href="javascript:void(0)" onclick="moreStatus()">get more</a>
            </div> <%-- end div class friends --%>
            </div> <%-- end col1 --%> 
```

我正在尝试添加到 id="showExtra" div，其部分工作如上。我尝试在 js 中创建一个复杂的嵌套 div 结构。这让我成功了，但这不可能是这样做的……有点乱，抱歉……

```
function showMoreStatus(){
var moreDiv = document.getElementById('showExtra'); 

var moreJSON = new Array();

if(request.readyState == 4) {
    if (request.status == 200) {
        moreJSON = eval('(' + request.responseText + ')');
        for(var i=0; i<moreJSON.length; i++) {              
            //get values from JSON
            var JSONName = moreJSON[i][2];
                            // and others...

            //create text nodes, a href and img
            var nameTextNode = document.createTextNode(JSONName);
                            // and other nodes, imgs, hrefs etc...

                            // surely this is NOT the way to do it!             
            //column divs
            var outColDiv = document.createElement("div");
            outColDiv.setAttribute("class", "col1");
            var friendsDiv = document.createElement("div");
            friendsDiv.setAttribute("class", "friends");
            var colLeftDiv = document.createElement("div");
            colLeftDiv.setAttribute("class", "st-colleft");
            var col1Div = document.createElement("div");
            col1Div.setAttribute("class", "st-col1");
            var col2Div = document.createElement("div");
            col2Div.setAttribute("class", "st-col2");
            colLeftDiv.appendChild(col1Div);
            colLeftDiv.appendChild(col2Div);
            friendsDiv.appendChild(colLeftDiv);
            outColDiv.appendChild(friendsDiv);

            var nameDiv = document.createElement("div");
            nameDiv.setAttribute("class", "statusName");
                            // and others...

            // append nodes to divs
            nameDiv.appendChild(nameTextNode);

            col1Div.appendChild(nameDiv);
            col1Div.appendChild(dateDiv);
            col1Div.appendChild(contentDiv);

            // append the page
            moreDiv.appendChild(outColDiv);
        }
    }
} 
```

}

呸！感谢您阅读本文。

嗯，这根本不是简短的。事实上，这可能是不必要的。

这里的正确方法是什么？我怎样才能让 nameTextNode 和他所有的朋友和 ${st.name} 坐在同一个地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:53:11.627

你没有展示你的 CSS，所以很难准确地说出什么是破坏性的。我的猜测是，因为您将新元素嵌套在这个“showExtra”div 中，所以您破坏了 CSS 选择器。您可能应该只添加与现有元素相同级别的新元素，即在此元素内

```
<div class="colwrap st-leftmenu"> 
```

此外，您可能需要查看标签中 id 属性的使用情况。Id 应该是唯一值，并且根据您的循环结构，看起来您将获得具有相同 id 的“statusNameDiv”的多个项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:35:25.753

一般概念是，如果 HTML 元素与给定的 CSS 选择器匹配，则 CSS 应该被适当地应用。即使您通过 AJAX 动态添加它们。

我建议确保你的 CSS 是防弹的。我认为这可能是您遇到的第一个痛点。如果您有一个新闻列表，请设置一个 HTML 列表，如下所示：

```
<ul id="news">
    <li><!-- News Block 1 --></li>
    <li><!-- News Block 2 --></li>
    <li><!--     ...      --></li>
    <li><!-- News Block N --></li>
</ul> 
```

在每个新闻“块”中，您可以根据需要构建一些 HTML。例如：

```
<li>
    <h2>News title 1</h2>
    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</p>
    <p>Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</p>
    <a href="#" class="read-more">Read More about News 1</a>
</li> 
```

然后，您可以为所有块设置“新闻块”的样式。

```
#news h2{
    font-weight:600;
    font-family:Arial, Sans-Serif;
}
#news .read-more{
    text-decoration:none;
    color:#FF00FF;
} 
```

从那里，您需要做的就是使用 JavaScript/AJAX 获取和格式化您的数据并附加 LI“块”。使用 jQuery 可以帮助简化此操作。

这是一些粗略的伪代码：

```
// get news items from AJAX
var newsList = $.ajax().getNews(10);
// loop through all new news items
for(i=0;i<newsList.size;i++) {
    // get a formatted LI block
    var block = formatNewsBlock(newsList[i]);
    // append news block to end of news list
    $('#news').append(block);
} 
```

一个好的结构可以帮助使事情更容易实现。

我希望这会有所帮助！

干杯!

# php - 清算资源

> ID：11761779
> 
> 赞同：4
> 
> 时间：2012-08-01T14:46:40.843
> 
> 标签：php, performance

是否可以清除PHP中的所有资源？

我知道您可以使用未设置的[get_defined_vars](http://php.net/manual/en/function.get-defined-vars.php)获取所有已定义的函数， 您可以轻松清除这些资源。

但这对我来说还不够。我有一个运行很长时间（~1h 30m）的脚本来执行许多功能..但是在执行时脚本收集了不再重要的信息..脚本导出产品并获得大约 0.2MB - 0.5MB 每个产品（3200 个产品）

那是超过 600mb 的内存使用量。我尽可能地优化了脚本，但我没有把它变小。

[我可以使用get_included_files](http://php.net/manual/en/function.get-included-files.php)或[get_declared_classes](http://php.net/manual/en/function.get-declared-classes.php)获取所有包含的文件；是否可以清除这些信息？删除类（除了一些需要的类，如自动加载器类）或其他包含的文件，以便我可以释放更多 RAM？

或者您知道在执行时优化服务器使用的其他方法吗？

也许这是一个愚蠢的问题，但我会很高兴每个提示都可以提高 PHP 脚本的性能。

脚本环境信息：脚本运行在旧的 Magento 1.4 版本上，缓存和性能存在很大问题；目前无法更新到较新版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:59:54.467

你有很多清除资源/内存的功能：

`unset()`对于变量

`mssql_free_result`对于 SQL

`memory_get_usage()`对于当前分配给 PHP 脚本的内存量（以字节为单位）。

ETC...

如果你混合所有东西，你可以减少内存/资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:00:58.680

我们有一个脚本消耗了高达 2GB 的内存，并且疯狂地泄露了内存（它使用了 Doctrine 1.1）。

`unset()ing`尽我们所能，然后我们添加`gc_enable()`到脚本的顶部，并在`gc_collect_cycles()`战略位置。

这确实有助于回收一些已使用的内存，但确实使脚本减慢了一小部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:56:50.943

问题不依赖于变量，而是依赖于算法。

在 think 脚本将所有值累积到一个大的“产品对象”数组中，该数组将在导出的文件中序列化。

为了精通内存，最好在构建后序列化每个产品，而不是在序列化之前累积所有产品以导出到数组中。

# javascript - javascript数组查询

> ID：11761782
> 
> 赞同：0
> 
> 时间：2012-08-01T14:46:45.077
> 
> 标签：javascript, arrays

我正在尝试循环并从此数组中获取名称的值，但我无法......真的对 javascript 感到沮丧

任何人都可以请帮助并指导我执行此操作以及更复杂的数组.. 我似乎无法找到很好的教程来展示这个示例

谢谢，这是代码

```
 var object={name:'angelos',name:'nick',name:'maria'};
    var i;
    for (i = 0; i < object.length; i += 1) {
        document.writeln(object[name][i]);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T14:48:41.450

那是一个对象，而不是数组。你可以把它变成一个简单的数组：

```
var arr = ['angelos', 'nick', 'maria'];
for (var i = 0; i < arr.length; i++) {
    document.writeln(arr[i]);
} 
```

或者，如果您想在数组中包含对象（如果每个对象只有一个键，则不需要）：

```
var arr = [{name: 'angelos'}, {name: 'nick'}, {name: 'maria'}];
for (var i = 0; i < arr.length; i++) {
    document.writeln(arr[i].name);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T14:49:47.710

首先，您的对象有重复的键`name`。这是糟糕的代码，在严格模式下会抛出错误。

我也会使用`for ... in`循环或`Array.forEach`此处，因为实现所需效果所需的代码要少得多。

好像你需要使用一个数组：

```
var arr = ["nick", "maria", "chaz"];

arr.forEach(function (name) {
    document.writeln(name);
}); 
```

您可以使用`Array.forEach`，它将每个索引传递给匿名函数。

**或者**，如果您希望每个人都成为`Object`：

```
var people = [{name: 'chaz', title: 'mr'}, {name: 'nick', title: 'mr'}, {name: 'maria',title: 'ms'}];

for (i in people) {
    if (!people.hasOwnProperty(i)) { continue; }

    var person = people[i];
    document.writeln(person.name);
} 
```

**参考**

*   看看[`Array.forEach`这里](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)
*   关于[`for ... in`循环的一个很好的参考here](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T14:53:06.830

首先，那是一个对象，而不是一个数组。您可能打算拥有一组对象。我这么说是因为你有三个键都叫`name`. 键必须是唯一的。像这样：

```
var people = [{name: 'angelos'}, {name:'nick'}, {name:'maria'}]; 
```

在这种情况下，您将像这样循环：

```
for (var i = 0; i < people.length; i++) {
    document.writeln(people[i].name);
} 
```

示例：http: [//jsfiddle.net/lbstr/cMqaH/](http://jsfiddle.net/lbstr/cMqaH/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T14:55:09.897

您可以将数据放入数组中，并用包含名称属性的对象填充它（如果您愿意，还可以使用其他对象，例如地址等）

[http://jsfiddle.net/5NK6x/](http://jsfiddle.net/5NK6x/)

```
var obj=[{name:'angelos'}, {name:'nick'}, {name:'maria'}],
    i;
for (i = 0; i < obj.length; i += 1) {
    document.write(' ' + obj[i]['name']);
}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T14:56:10.640

这是数组和 JSON 的混合。如果您的数据如下所示：

```
var object = [{"name":"angelos"},{"name":"nick"},{"name":"maria"}]; 
```

您可以像这样访问元素：

```
for(var i=0,i<object.length,i++)
{
    alert(object[i].name);
 } 
```

# python - 使用 mod_wsgi 维护（单例）进程？

> ID：11761785
> 
> 赞同：1
> 
> 时间：2012-08-01T14:46:58.047
> 
> 标签：python, apache, mod-wsgi, web.py

我有一个*启动时间很长（几分钟）*`web.py`的 python应用程序，我想在 Apache 中使用.*`mod_wsgi`*

 *长期的答案可能是“重写应用程序”。但**在短期内**，我想配置`mod_wsgi`为：

1.  使用单个进程来为应用程序提供服务（我可以使用 来执行此操作`WSGIDaemonProcess processes=1`）， *并且*
2.  继续使用该进程而不定期将其终止

#2可行吗？或者，我可以使用其他权宜之计解决方案来托管此应用程序吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:18:27.320

简单的。不要重新启动 Apache，不要设置最大请求数，也不要更改 WSGI 脚本文件中的代码。

您是说即使您完全不改动 Apache 也会看到重新启动？

是的，听起来你应该重新设计你的系统。需要这么长时间才能启动的 Web 进程太疯狂了。*

# php - 如何在 php 5.3.x 中生成 JSON - 未转义的 unicode

> ID：11761786
> 
> 赞同：0
> 
> 时间：2012-08-01T14:47:05.273
> 
> 标签：php, json, serialization, unicode

> **可能重复：**
> [Json_encode 字符集问题](https://stackoverflow.com/questions/3035462/json-encode-charset-problem)

如何在 php 5.3.x 中生成 JSON 未转义的 unicode？

**例子：**

`array("name"=>"some unicode chars");`

将像这样被 JSON 化：

`{"name":"\Uxxx\Uyyy\Uzzz\Usss \U123......."}`

其中`xxx`和`yyy`是原始数组中字符的等效 unicode 值。

现在我需要 JSON 像这样输出：

`{"name":"some unicode chars"}`

# ruby - 如果记录重复和求和值，如何删除它：val

> ID：11761788
> 
> 赞同：2
> 
> 时间：2012-08-01T14:47:23.153
> 
> 标签：ruby, arrays

给定以下哈希数组：

```
list=[
  {:cod => "0001", :name => "name1", :val => 10},
  {:cod => "0001", :name => "name1", :val => 12},
  {:cod => "0002", :name => "name2", :val => 13},
  {:cod => "0002", :name => "name2", :val => 14},
  {:cod => "0002", :name => "name2", :val => 14},
  {:cod => "0004", :name => "name4", :val => 16},
  {:cod => "0004", :name => "name4", :val => 16},
  {:cod => "0004", :name => "name4", :val => 17},
  {:cod => "0005", :name => "name5", :val => 17},
  {:cod => "0005", :name => "name5", :val => 17},
  {:cod => "0005", :name => "name5", :val => 17},
  {:cod => "0006", :name => "name6", :val => 110},
  {:cod => "0006", :name => "name6", :val => 10},
] 
```

如何删除重复记录？

另外，我怎样才能找到 key 的值的总和`:val`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:27:49.803

您可以将一个块传递给`uniq`Array 的方法来确定唯一性。

```
list.uniq { |h| h[:val] }

=> [{:cod=>"0001", :name=>"name1", :val=>10},
 {:cod=>"0001", :name=>"name1", :val=>12},
 {:cod=>"0002", :name=>"name2", :val=>13},
 {:cod=>"0002", :name=>"name2", :val=>14},
 {:cod=>"0004", :name=>"name4", :val=>16},
 {:cod=>"0004", :name=>"name4", :val=>17},
 {:cod=>"0006", :name=>"name6", :val=>110}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T02:46:57.587

根据到目前为止的答案，您对“删除重复记录”的实际含义有些困惑。我对您的意思的解释是您希望只删除完全重复的记录。如果是这样，那么它比提出的其他解决方案要简单得多：

```
list.uniq 
```

这将返回：

```
[{:cod=>"0001", :name=>"name1", :val=>10},
 {:cod=>"0001", :name=>"name1", :val=>12},
 {:cod=>"0002", :name=>"name2", :val=>13},
 {:cod=>"0002", :name=>"name2", :val=>14},
 {:cod=>"0004", :name=>"name4", :val=>16},
 {:cod=>"0004", :name=>"name4", :val=>17},
 {:cod=>"0005", :name=>"name5", :val=>17},
 {:cod=>"0006", :name=>"name6", :val=>110},
 {:cod=>"0006", :name=>"name6", :val=>10}] 
```

如果你想要`:val`唯一记录的字段总和，你可以这样做：

```
list.uniq.map{|h| h[:val]}.reduce(:+) 
```

获取唯一元素（如上），然后`:val`从每个元素中获取值，最后`:+`对它们应用（加法）以获得总和。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:39:12.217

```
list.map do |a|
  list.select { |b| b[:cod] == a[:cod] && b[:name] == a[:name] } \
       .reduce { |res, c| {:cod  => c[:cod], :name => c[:name], :val => ((res[:val] + c[:val]) || c[:val])} }
end.uniq { |h| h[:cod]}.each {|c| puts c.inspect} 
```

输出：

```
{:name=>"name1", :cod=>"0001", :val=>22}
{:name=>"name2", :cod=>"0002", :val=>41}
{:name=>"name4", :cod=>"0004", :val=>49}
{:name=>"name5", :cod=>"0005", :val=>51}
{:name=>"name6", :cod=>"0006", :val=>120} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T14:14:27.330

```
list.uniq.group_by { |e| [e[:cod], e[:name]] }.map do |k, v|
  {k => v.map { |h| h[:val] }.reduce(:+)}
end

=> [{["0001", "name1"]=>22}, {["0002", "name2"]=>27}, {["0004", "name4"]=>33}, {["0005", "name5"]=>17}, {["0006", "name6"]=>120}] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T01:23:13.177

使用 group_by：

```
list.group_by{|x| x[:cod]}.map{|k, v| v[0].merge({:val => v.map{|x| x[:val]}.reduce(:+)})} 
```

# logging - log4net 全局上下文

> ID：11761789
> 
> 赞同：1
> 
> 时间：2012-08-01T14:47:29.693
> 
> 标签：logging, log4net

我试图弄清楚如何使用 ThreadContext.Properties 设置每个用户的会话。

当用户登录网站时，用户 ID 存储在会话中。然后我想在成功登录后将此值附加到 ThreadContext.Properties["UserID"] 。

我正在使用 adonetappender 将日志条目保存到 db，并使用 %property{userid} 来检索值。但有时这个值读取为空。

所以基本上我想要的是：

1) 创建

`private static readonly ILog log = LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);`

在我要登录的那些页面上。

2) 成功登录后，我需要在 ThreadContext.Properties["UserID"] 中存储一个在整个用户会话中始终存在的值，并且可以从我登录的页面以及 global_asax 中的 Application_Error(...) 中使用. 无论如何，这个 ThreadContext 的寿命是多少？据我所知，我不能真正使用 GlobalContext。

3）我不想重新分配每个日志语句的值。

希望你能明白我要去哪里。

//丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:26:31.177

在这里查看我的答案：

[使用 log4net 捕获用户名](https://stackoverflow.com/questions/4813242/capture-username-with-log4net/4819145#4819145)

对于一些可能对您有所帮助的想法。一直读到最后，因为最后一个想法可能是最简单的并且可能满足您的需求。

总而言之，我首先建议编写一个自定义 PatternLayoutConverter，HttpContextPatternLayoutConverter，它允许记录存储在 HttpContext 中的值。

在我的回答即将结束时，我提出了一个基于另一篇博客文章（链接在我的原始答案中）的解决方案，该解决方案展示了如何编写一个可以存储在 GlobalDiagnosticContext （或 ThreadDiagnosticContext ）中的类。当您告诉 log4net 记录 GlobalDiagnosticContext 参数时，log4net 访问该对象并调用其 ToString 方法。对象本身只是从 HttpContext 中提取一个值。

因此，如果您能够使用 HttpContext 来存储要记录的信息，那么我的链接答案可能对您有用。如果您无法使用 HttpContext 来存储信息，那么我的回答可能没有用。

祝你好运！

# android - 钛按钮.背景渐变焦点

> ID：11761795
> 
> 赞同：2
> 
> 时间：2012-08-01T14:47:52.627
> 
> 标签：android, iphone, titanium, appcelerator

我正在开发 Titanium 移动应用程序，但在使用 backgroundRadient 时出现按钮聚焦问题。

我使用 touchstart 事件取得了成功（changeBackgroundGradient 很简单，可以避免在此处显示）：

```
authButton.addEventListener('touchstart', function(e) {
    changeBackgroundGradient(authButton);
}); 
```

但是 touchend 事件不是我想要的。它仅在用户结束**对元素**的触摸时触发（表现为单击事件）。Touchmove 也不是我想要的，因为它会在用户移动时触发。

```
authButton.addEventListener('touchmove', function(e) {
    revertBackgroundGradient(authButton);
}); 
```

我想要的是：只要用户触摸按钮，按钮就会成为焦点。诸如“ontap”和“onrelease”之类的东西。我知道有 backgroundFocusedColor 和 backgroundFocusedImage，但没有 backgroundFocusedGradient。

**使用 backgroundGradient 属性时如何处理按钮焦点？** 我想要默认行为，但它似乎在我使用 backgroundGradient 属性后立即停止。

谢谢。

- 编辑：

这是完整的代码：

```
 // Authenticate Button
    var authButton = Ti.UI.createButton({
        width : '50%',
        height : '60',
        top : '15',
        bottom : '15',
        title : L('LoginView_authButton'),
        font: {
            fontSize: 20,
            fontFamily: 'TrebuchetMS-Bold'
        },
        color : '#FFFFFF',
        textAlign : 'center',
        borderColor : '#3D86A9',
        borderWidth : '2',
        borderRadius : '5',
        backgroundGradient : {
            type : 'linear',
            startPoint : {
                x : '0%',
                y : '0%'
            },
            endPoint : {
                x : '0%',
                y : '100%'
            },
            colors : [{
                color : '#a2d6eb',
                offset : 0.0
            }, {
                color : '#67afcf',
                offset : 0.5
            }, {
                color : '#3591bc',
                offset : 0.5
            }, {
                color : '#1e83b1',
                offset : 1.0
            },
            ]
        }
    });

    authButton.addEventListener('touchstart', function(e) {
        changeBackgroundGradient(authButton);
    });

    authButton.addEventListener('touchend', function(e) {
        revertBackgroundGradient(authButton);
    });

    function changeBackgroundGradient(AuthButton)
{
    AuthButton.backgroundGradient = {
        type : 'linear',
        startPoint : {
            x : '0%',
            y : '0%'
        },
        endPoint : {
            x : '0%',
            y : '100%'
        },
        colors : [{
            color : '#f5bd8b',
            offset : 0.0
        }, {
            color : '#e59a57',
            offset : 0.5
        }, {
            color : '#da7a23',
            offset : 0.5
        }, {
            color : '#c35211',
            offset : 1.0
        },
        ]
    };
}

function revertBackgroundGradient(AuthButton)
{
    AuthButton.backgroundGradient = {
        type : 'linear',
        startPoint : {
            x : '0%',
            y : '0%'
        },
        endPoint : {
            x : '0%',
            y : '100%'
        },
        colors : [{
            color : '#9FD3E9',
            offset : 0.0
        }, {
            color : '#63AAC9',
            offset : 0.5
        }, {
            color : '#348BB8',
            offset : 0.5
        }, {
            color : '#2081B2',
            offset : 1.0
        },
        ]
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:25:17.420

哦，好的，我现在明白了，它按预期工作，这不是错误，因为您将事件侦听器添加到按钮，因此它仅适用于按钮。

您可能希望向 authButton 添加一个名为 isFocused 或类似的属性。在 touchstart 事件中，添加：

```
authButton.isFocused:true; 
```

然后在包含具有恢复功能的 authButton 的视图/窗口上添加 touchend 事件。

你明白为什么吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:00:27.460

我使用 touchCancel 成功了

```
authButton.addEventListener('touchstart', function(e) {
    changeBackgroundGradient(authButton);
});

authButton.addEventListener('touchcancel', function(e) {
    revertBackgroundGradient(authButton);
}); 
```

我首先误解了文档：

**touchcancel** *当触摸事件被设备中断时触发*

如果您在元素**外部**结束触摸，则触摸事件确实会被设备中断。所以它按预期工作：只要你按下屏幕，按钮就是橙色的，一旦你在按钮外松开，按钮就会变回蓝色。

感谢您的提示 Sismetic，它让我弄清楚了。

# url - 获取 Grails 在其相对 URL 中生成相对路径

> ID：11761796
> 
> 赞同：1
> 
> 时间：2012-08-01T14:48:01.467
> 
> 标签：url, grails, gsp

我有一个 Web 应用程序，可以直接作为[http://host.foo.loc:8080/foo/](http://host.foo.loc:8080/foo/)访问，也可以通过安全反向代理作为[http://www.company.com/apps/foo/ 访问](http://www.company.com/apps/foo/)

默认情况下，Grails 会生成带有相对路径的相对 URL，例如：

```
<g:form action="bar"> 
```

将产生：

```
<form action="/foo/bar" method="post" > 
```

这在本地可以，但反向代理将不接受[http://www.company.com/foo/bar](http://www.company.com/foo/bar)（它缺少 /apps/）

如果我做：

```
<g:form action="bar" base="."> 
```

没关系。但我真的不想在生成链接的每个标签上都指定它。

处理这个问题的最好方法是让 Grails 在其相对 URL 中生成相对路径。或者，我可以将全局“baseUrl”设置为“。” 但我也不知道该怎么做。

任何想法 ？

[编辑] 事实上，将“base”设置为“.” 不起作用。第一个页面“/foo/controller/action”将生成链接为“./controller/nextaction”，浏览器将其翻译为“/foo/controller/controller/action”=> 404。我想这就是他们的原因重新使用绝对路径：它们不是路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:33:40.197

我从来没有能够使这种场景工作，所以我总是保持代理和未代理的上下文路径相同，即我会将应用程序放在`http://host.foo.loc:8080/apps/foo`. 通过命名 WAR 文件，您可以在 Tomcat 中拥有像这样的多级上下文路径`apps#foo.war`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:39:25.830

添加`grails.app.context = "/foo/bar"`到您的`Config.groovy`.

# javascript - JavaScript：在 MVC3 的 PartialView 中确认没有关闭

> ID：11761797
> 
> 赞同：1
> 
> 时间：2012-08-01T14:48:07.693
> 
> 标签：javascript, asp.net-mvc-3, confirm

我的 PartialView 中的 JS 确认有问题。如果页面不是 PartialView，下面的代码可以正常工作，但是，如果页面是 PartialView，如果我在该确认对话框上单击“确定”，它不会关闭。为什么 ？

```
$("input.del-file-cb").live('click',function () {
      if ($(this).is(':checked')) {
          var ans = confirm('Are You sure ?');

          if (ans) {
                   ....             
          } else {
                 $(this).attr("checked", false);
          }
      }
 }); 
```

## 编辑

看起来这是一个双重确认......就像这里[jQuery/Javascript 确认出现两次](https://stackoverflow.com/questions/1801164/jquery-javascript-confirm-coming-up-twice)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:31:26.037

解决方案：

```
$("input.del-file-cb").live('click',function (e) {
      if ($(this).is(':checked')) {
         e.preventDefault();

... the rest of the code ... 
```

# ios - 如何截断 tabbarcontroller 项目的标题

> ID：11761800
> 
> 赞同：2
> 
> 时间：2012-08-01T14:48:14.907
> 
> 标签：ios

我正在动态创建 tabbaritem，有时项目的标题超出了项目的空间，它占用了下一个 tabbaritem 的空间。

有人知道如何预防吗？如何截断名称？

抱歉，我还不能发布照片。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:14:27.683

实际上没有简单的方法可以做到这一点。

在将其设置为标题之前，您可以将 NSString 截断为某个定义的宽度（例如 "TestBarTitle"->"TestB.." ）：

```
- (NSString*)stringByTruncatingStringWithFont:(UIFont *)font forWidth:(CGFloat)width lineBreakMode:(UILineBreakMode)lineBreakMode {
    NSMutableString *resultString = [[self mutableCopy] autorelease];
    NSRange range = {resultString.length-1, 1};

    while ([resultString sizeWithFont:font forWidth:FLT_MAX lineBreakMode:lineBreakMode].width > width) {
        // delete the last character
        [resultString deleteCharactersInRange:range];
        range.location--;
        // replace the last but one character with an ellipsis
        [resultString replaceCharactersInRange:range withString:truncateReplacementString];
    }
    return resultString;
} 
```

或者您可以手动实现 UITabBar ( UIImageView + UIButtons 和 UILabels )，这样您就可以 100% 控制这个 UI 元素；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-28T08:04:12.703

Swift 4.2 的解决方案：

```
var resultString = title

var attributedText = NSAttributedString(string: resultString, attributes: [NSAttributedStringKey.font: font])

while attributedText.boundingRect(with: CGSize(width: CGFloat.greatestFiniteMagnitude, height: 15), options: .usesLineFragmentOrigin, context: nil).size.width > availableWidth {
    // delete last character
    resultString.removeLast(2)
    resultString.append(".")
    attributedText = NSAttributedString(string: resultString, attributes: [NSAttributedStringKey.font: font])
} 
```

# php - 在 PHP 中解析 GeoJson 字符串

> ID：11761802
> 
> 赞同：2
> 
> 时间：2012-08-01T14:48:28.070
> 
> 标签：php, postgresql, geojson

我想从字符串下方获取多边形坐标。

```
{"polygon":{"type":"Feature","properties":[],"geometry":{"type":"Polygon","coordinates":[[[-7302732.4720101,6527844.6333235],[-3193477.8319711,6606116.1502766],[-5111129.9973226,5001550.0527375],[-6637424.5779086,4884142.7773079],[-7772361.5737289,5158093.0866438],[-7302732.4720101,6527844.6333235]]]},"crs":{"type":"name","properties":{"name":"urn:ogc:def:crs:OGC:1.3:CRS84"}}}} 
```

这是我使用以下代码解码为数组的 GeoJson 字符串：

```
$polygon = CJSON::decode($str); 
```

当我想获得多边形时，我得到了错误！

```
$var= $polygon->polygon; 
```

或使用以下代码：

```
$polygon = CJSON::decode($str,true);
$var = $polygon['polygon']; 
```

虽然为了获取坐标：

```
foreach($polygon as $key=>$value)
$coordinates = $value['coordinates'];
or
$coordinates = $value[coordinates]; 
```

如何从我从 javascript 发送到 php 的 geojson 获取坐标，以便使用 postgis 保存在 postgresql 上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:08:16.520

```
$polygon->polygon->geometry->coordinates[0] 
```

或者

```
$polygon['polygon']['geometry']['coordinates'][0] 
```

你所拥有的是一个多维数组/对象，不确定在你的情况下它被解码时输出到哪个，因为看起来你有一个类在做它我本来只是使用 json_decode，但无论如何。是的，从外观上看，多边形是主要对象，然后是几何，它是具有类型和坐标的对象，然后坐标中有多个对象/数组。

如果我输入正确，上面的示例将显示该对象中的第一组坐标。当然，您可以通过循环运行它，即：

如果它是一个对象，则假设您的 Class 解码为对象而不是数组。不完全确定是什么`$polygon = CJSON::decode($str,true);`。但如果它有任何类似的东西，`json_decode()`那么你应该已经准备好了。

这是我在此处介绍的分解对象的方法，值得注意的是，您可能需要检查计数，并查看是否首先设置了对象，或者该属性是否存在于对象中以防止代码分解的其他方式马路。但是我在这里所拥有的只是其核心的纯粹示例，尽管它会服务于它的目的。但是不会处理错误，这就是为什么我说您可能想进一步详细说明它进行这些检查的原因。

无论如何继承我的代码：

```
<?php
$str = '{"polygon":{"type":"Feature","properties":[],"geometry":{"type":"Polygon","coordinates":[[[-7302732.4720101,6527844.6333235],[-3193477.8319711,6606116.1502766],[-5111129.9973226,5001550.0527375],[-6637424.5779086,4884142.7773079],[-7772361.5737289,5158093.0866438],[-7302732.4720101,6527844.6333235]]]},"crs":{"type":"name","properties":{"name":"urn:ogc:def:crs:OGC:1.3:CRS84"}}}}';

$polygon = json_decode($str);
echo'<pre>';print_r($polygon);echo'</pre>';

$set = 1;
foreach($polygon->polygon->geometry->coordinates[0] as $coordinates)
{
    echo 'Set '.$set.': ';$set++;
    echo $coordinates[0].','.$coordinates[1].'<br>';
}
?> 
```

看看它在行动[http://7pz.net/geojson-parse.php](http://7pz.net/geojson-parse.php)（滚动到底部）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:11:51.803

This should give you an array of all the coordinates and print them out line by line:

```
$string = '{"polygon":{"type":"Feature","properties":[],"geometry":{"type":"Polygon","coordinates":[[[-7302732.4720101,6527844.6333235],[-3193477.8319711,6606116.1502766],[-5111129.9973226,5001550.0527375],[-6637424.5779086,4884142.7773079],[-7772361.5737289,5158093.0866438],[-7302732.4720101,6527844.6333235]]]},"crs":{"type":"name","properties":{"name":"urn:ogc:def:crs:OGC:1.3:CRS84"}}}}';

$json = json_decode($string);

$coords_array = $json->polygon->geometry->coordinates[0];

foreach($coords_array as $c_a) {
        echo $c_a[0] . "," .$c_a[1] . "<br>"; 
    } 
```

Access with:

```
$coords_array[0];
$coords_array[1];
$coords_array[2]; 
```

etc.

Basically you can turn the JSON string into an object and access each element with the `->` notation.

I usally use a site called [http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/) to decode JSON and find the path I need, then simply write them out as they appear, as in as in the above - `$json->polygon->geometry->coordinates;`.

Try it out yourself on the site.

# asp.net - 如何从 asp.net regex.match 中提取结果？

> ID：11761805
> 
> 赞同：1
> 
> 时间：2012-08-01T14:48:32.933
> 
> 标签：asp.net, regex

来自 perl，我对 asp.net 正则表达式类有点困惑。

我有一个要匹配的简单模式：“数字文本数字”

我的代码如下所示：

```
 Match results = Regex.Match(mystring, @"(\d+)\s+(Highway|Hwy|Route|Rte)\s+(\d+)",RegexOptions.IgnoreCase);

     foreach (Group g in results.Groups)
     {
        string token = g.Value;
     } 
```

问题是这些组似乎包含 4 个结果，而不是我期望的 3 个 - 第一个是匹配的整个字符串，而接下来的 3 个是我期望的。

有没有一种简单的方法可以直接访问我的 3 个结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:55:46.197

You could use [`Matches`](http://msdn.microsoft.com/en-us/library/e7sf90t3.aspx):

```
// Define a test string.        
string text = "The the quick brown fox  fox jumped over the lazy dog dog.";

// Find matches.
MatchCollection matches = rx.Matches(text);

// Report the number of matches found.
Console.WriteLine("{0} matches found in:\n   {1}", 
                      matches.Count, 
                      text);

// Report on each match.
foreach (Match match in matches)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:53:37.763

```
var results = Regex.Match("55 Hwy 66", @"(\d+)\s+(Highway|Hwy|Route|Rte)\s+(\d+)", RegexOptions.IgnoreCase).Groups.OfType<Group>().Select((name, index) => new {name, index}).Where(x => x.index > 0).Select(x => x.name).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T10:19:43.767

这只是它被设计为如何工作的一个例子，它只是一个忽略第一个匹配的例子。我确实同意这是一个奇怪的实现，而不是我期望它的工作方式。

> 如果正则表达式引擎可以找到匹配项，则 Groups 属性返回的 GroupCollection 对象的第一个元素包含与整个正则表达式模式匹配的字符串。

取自[这里](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.groups.aspx)

我知道这是一个老问题，但我最终通过搜索确认了自己的想法，但没有明确的答案。

# javascript - 在 Javascript 变量（和 googlemaps 地理编码器）上使用 split()

> ID：11761807
> 
> 赞同：1
> 
> 时间：2012-08-01T14:48:39.470
> 
> 标签：javascript, split, google-geocoder

我认为我在这里错过了一些真正愚蠢的东西......基本上我试图通过使用这个来通过postocde（有点无关紧要）获取位置的坐标：

```
 geocoder.geocode({address: address}, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                onPostcodeLocation(results[0].geometry.location);
            } else {
                alert(address + ' not found');
            } 
```

所以这会将纬度/经度值传递给 OnPostcodeLocation()：

```
 function onPostcodeLocation(position) { 
          var positionVar = position;
          positionArray = position.split(",");
          alert(positionArray[0]);
      } 
```

现在，如果我在 onPostcodeLocation() 的第一行中警告（）“位置”，我会得到正确的警告值，但如上所示，我试图将值拆分为单独的变量。试图发出警报（positionArray [0]）；什么都没做...我做错了什么？？？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:00:16.387

快速查看[文档](https://developers.google.com/maps/documentation/geocoding/)后，我注意到该`location`属性不是字符串或数组，而是对象：

```
location : {
    "lat" : 37.42291810,
    "lng" : -122.08542120
} 
```

所以很明显，分裂是行不通的。只是`alert(position.lat)`或`alert(position.lng)`。另外：对隐含的全局变量感到厌烦，在函数中使用变量时，总是先声明它，声明太多总比不声明好。

# eclipse - 如何在 Eclipse 中突出显示当前方法体？

> ID：11761814
> 
> 赞同：3
> 
> 时间：2012-08-01T14:48:46.227
> 
> 标签：eclipse

Eclipse 中有一个很好的特性，叫做“仅显示选定的元素”。当它打开时，单击大纲窗格中的方法将仅在编辑器中显示此方法，允许仅关注此方法，特别有用，因为您无需担心滚动困难和过度使用此方法时里面有很多嵌套的括号。

但有时我想看看这里更多的代码，所以必须关闭它，然后一次又一次地返回，这很不方便。所以我想知道是否有更好的机制？

我知道一个名为“范围指示器”的内置功能（http://stackoverflow.com/questions/7049098/how-to-forbid-eclipse-to-highlight-current-method-class-in-the-margin），但我总是倾向于忽略这一点，因为它太薄了。

我可以想象的一种更好的解决方案是为当前研究的方法体使用不同的**背景颜色**，当将光标移动到其他方法时，背景突出显示相应地转向它们（类似于范围指示器，但呈现更明显）。这样，既获得了导航灵活性，又获得了阅读帮助。

这个解决方案可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T14:57:37.087

看看[Editbox](http://editbox.sourceforge.net/)插件。

您可能需要对颜色进行一些调整才能进行设置。这是一个示例屏幕截图：

![在此处输入图像描述](../Images/55ff0c34ae418d9bf7ecd70cb1c80b74.png)

这是你想要的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T02:42:40.263

是的，使用编辑框和以下设置可能适合您的需要。

![在此处输入图像描述](../Images/cd84fe852a50e673db791ecc1986fcc1.png)

![在此处输入图像描述](../Images/c2bce6f257c3f8dba3bad2519c8b71e2.png)

# mongoose - Mongoose JobSchema.pre('update', function(n){n()}) throws: TypeError: Cannot read property 'numAsyncPres' of undefined

> ID：11761819
> 
> 赞同：4
> 
> 时间：2012-08-01T14:49:06.880
> 
> 标签：mongoose, pre

我在猫鼬中有这个模式，当我使用带有更新的 pre 时，我得到了这个错误。

```
JobSchema.pre('update', function(n){n()}) 
```

完全错误

```
C:\web\production01_server\node_modules\production\node_modules\mongoose\lib\utils.js:413
        throw err;
              ^
TypeError: Cannot read property 'numAsyncPres' of undefined
    at Model._lazySetupHooks (C:\web\production01_server\node_modules\production\node_modules\mongoose\node_modules\hooks\hooks.js:149:49)
    at Model.pre (C:\web\production01_server\node_modules\production\node_modules\mongoose\node_modules\hooks\hooks.js:113:10)
    at Model.doQueue (C:\web\production01_server\node_modules\production\node_modules\mongoose\lib\document.js:1116:41)
    at Model.Document (C:\web\production01_server\node_modules\production\node_modules\mongoose\lib\document.js:55:8)
    at Model.Model (C:\web\production01_server\node_modules\production\node_modules\mongoose\lib\model.js:26:12)
    at Model.model (C:\web\production01_server\node_modules\production\node_modules\mongoose\lib\model.js:910:11)
    at new Model (C:\web\production01_server\node_modules\production\node_modules\mongoose\lib\connection.js:418:15)
    at cb (C:\web\production01_server\node_modules\production\node_modules\mongoose\lib\query.js:804:16)
    at C:\web\production01_server\node_modules\production\node_modules\mongoose\lib\utils.js:408:16
    at C:\web\production01_server\node_modules\production\node_modules\mongoose\node_modules\mongodb\lib\mongodb\cursor.js:133:9 
```

笔记：

*   pre('保存' WORKS
*   post('update' 不会抛出错误并且不起作用

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-06-07T18:50:27.650

Mongoose 4.0 通过 Query 中间件支持预更新挂钩。 [http://mongoosejs.com/docs/middleware.html](http://mongoosejs.com/docs/middleware.html)

```
schema.pre('update', function() {
  console.log(this instanceof mongoose.Query); // true
  this.start = Date.now();
});

schema.post('update', function() {
  console.log(this instanceof mongoose.Query); // true
  console.log('update() took ' + (Date.now() - this.start) + ' millis');
}); 
```

注意事项：

> "**查询**中间件与**文档**中间件有一个微妙但重要的区别：在文档中间件中，this 指的是正在更新的文档。在查询中间件中，mongoose 不一定有对正在更新的文档的引用，所以**this**指的是**查询对象**而不是正在更新的**文档。”**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T22:16:12.220

根据[Mongoose 文档](http://mongoosejs.com/docs/middleware.html)，pre 和 post 中间件功能支持：

*   在里面
*   证实
*   节省
*   消除

不支持更新。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-22T23:05:34.280

It's true that Mongoose doesn't support hooks on Model APIs other than those Greg listed above. However, an update hook can be done via Monkey-patch. The [Hooker NPM](https://www.npmjs.org/package/hooker) package is a good way of doing this cleanly.

The [RESTeasy](https://www.npmjs.org/package/hooker) project which is a Boilerplate for Node REST APIs has code that demonstrates how to do it:

```
var hooker = require('hooker');

var BaseSchema = new mongoose.Schema({
  sampleString: {
    type: String
  }
});

var BaseModel = mongoose.model('Base', BaseSchema);

// Utilize hooks for update operations. We do it in this way because MongooseJS
// does not natively support update hooks at the Schema level. This is a way
// to support it.
hooker.hook (BaseModel, 'update', {
  pre: function () {
    // Insert any logic you want before updating to occur here
    console.log('BaseModel pre update');
  },
  post: function () {
    // Insert any logic you want after updating to occur here
    console.log('BaseModel post update');
  }
});

// Export the Mongoose model
module.exports = BaseModel; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T15:28:27.873

我发现了这个：[https](https://github.com/LearnBoost/mongoose/issues/538) ://github.com/LearnBoost/mongoose/issues/538 所以没有更新前...

# html - 由于绝对位置，未水平居中

> ID：11761823
> 
> 赞同：0
> 
> 时间：2012-08-01T14:49:33.727
> 
> 标签：html, css

我做的：

HTML：

```
<body>
<div id="header" >
</div>
<div id="main" >
</div>
<div id="footer" >
</div>
</body> 
```

CSS：

```
body
{
    margin:0px;
}
#header
{
    width:100%;
    background-color:black;
    height:60px;
}
#main
{
    width:300px;
    border:1px dotted black;
    margin:0 auto;
}
#footer
{
    width:100%;
    background-color:black;
    height:40px;
    position:absolute;
    bottom:0px;
} 
```

[http://jsfiddle.net/VpwQQ/2/](http://jsfiddle.net/VpwQQ/2/)

但正如你所见，`main`div 没有高度。

然后我用那个替换了我的css：

```
body
{
    margin:0px;
}
#header
{
    width:100%;
    background-color:black;
    height:60px;
}
#main
{
    width:300px;
    border:1px dotted black;
    position:absolute;
    margin:0 auto;
    bottom:60px;
    top:80px;
}
#footer
{
    width:100%;
    background-color:black;
    height:40px;
    position:absolute;
    bottom:0px;
} 
```

[http://jsfiddle.net/VpwQQ/1/](http://jsfiddle.net/VpwQQ/1/)

但是，水平中心不起作用。

我该如何进行这种设计（div 居中，并且在页眉和页脚之间以 20 px 的大小占据所有页面的高度）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:57:50.427

我不确定你要做什么，但我会解释你的代码会发生什么：

您的#main div 没有高度，因为它没有高度 CSS 属性，也没有任何内容。

您应该添加 a`height: 100px`或仅添加一些内容，您会看到它得到一个高度。

我问你想做什么的原因是因为你不太清楚你想要你的最终产品是什么样子。

您将遇到页脚的另一个问题。如果您使用绝对位置，它现在会粘在底部。将#main div 的高度设置为高得离谱的高度，您会看到当您必须向下滚动页面时，页脚会停留在原来的位置。见[http://jsfiddle.net/VpwQQ/3/](http://jsfiddle.net/VpwQQ/3/)

您应该使用`position: fixed`，但这会将其保留在窗口的底部而不是文档的底部。因此，您会遇到必须使用 Javascript 来测量文档高度和适当设置位置的问题。不知道你想做什么，但如果你只是想布局一个网站，那么使用标准的相对定位将页脚自然地推到 #main div 下方。

**编辑：**

如果您只是尝试设置正常的网站布局，请参阅[http://jsfiddle.net/VpwQQ/4/ 。](http://jsfiddle.net/VpwQQ/4/)

如果您希望页脚一直“粘”在页面底部，那么您将需要使用`position: fixed`，但我认为这不适用于所有浏览器。见[http://jsfiddle.net/VpwQQ/6/](http://jsfiddle.net/VpwQQ/6/)

最后，要让页脚和页眉都“粘贴”，请参阅[http://jsfiddle.net/VpwQQ/8/](http://jsfiddle.net/VpwQQ/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:02:43.820

我在#main 中添加了一个div。

Main 现在有 100% 的宽度。

在里面，放一个 300px 的 div，没有绝对位置。

我叉了你的小提琴：http: [//jsfiddle.net/8U9P6/](http://jsfiddle.net/8U9P6/)

就我个人而言，我更喜欢 javascript 解决方案，而不是使用绝对位置。但这个解决方案似乎有效。

添加并溢出以包含内部 div 中的内容：http: [//jsfiddle.net/M2nZc/](http://jsfiddle.net/M2nZc/)

请注意，页面不会增长，因为它是绝对位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:05:49.957

您不能在绝对定位的元素上使用自动边距，因为它不再在文档流中。

`width: 100%`在div 上使用`#main`，然后在其中放置另一个元素，使用自动边距居中。

演示：http: [//jsfiddle.net/Guffa/VpwQQ/9/](http://jsfiddle.net/Guffa/VpwQQ/9/)

注意：您可能需要`height: 100%`在`body`和`html`元素上使用`bottom`尺寸才能对`#main`元素起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T15:11:31.463

一旦你用内容填充你的#main div，它会根据内容自动增加高度。您可以简单地用几段[lorem ispum](http://en.lipsum.com/ "定理")填充它来模拟内容。您现在可以删除绝对位置和定位 CSS。

仅当父元素（对于#main div 是主体元素）具有定义的宽度时，使用“0 auto”简写使 div 居中。为此，请尝试为您的 body 元素设置 100% 的宽度。这样做是您可能希望在 CSS 中养成的习惯。

要让你的#main div 总是比 #header div 低 20px，只需在 #header div 中添加 20px 的 margin-bottom 即可。在#main div 下方执行相同操作以分隔页脚。

总结一下（暂时没有底部的页脚）你的 CSS 可能会是这样的：

```
body {
  width: 100%
  margin: 0px;
}

#header {
  width: 100%;
  height: 60px;
  margin-bottom: 20px; /*here we space the header 20px from the next element*/
  background-color: black;

}

#main {
  width: 300px;
  margin: 0 auto 20px auto; /*we append the margin to include 20px of spacing at the bottom*/
  border:1px dotted black;
}

#footer {
  width:100%;
  height:40px;
  background-color:black;
} 
```

示例：http: [//jsfiddle.net/WEx3j/](http://jsfiddle.net/WEx3j/)

如果您希望页脚具有“粘性”（始终位于网站的最底部），我建议您采用[这种](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/ "粘性页脚")方法。

我希望这能澄清一些事情。

# c# - 如何通过 HttpWebRequest 访问外部实时会议 URL

> ID：11761834
> 
> 赞同：1
> 
> 时间：2012-08-01T14:50:04.740
> 
> 标签：c#, .net, httpwebrequest

我正在尝试使用 Httpwebrequest 访问外部实时会议 URL，并收到 401 未经授权的错误。相同的代码在我的本地系统中工作。

代码：

```
 HttpWebRequest myReq = (HttpWebRequest)WebRequest.Create(PostingUrl);
     CredentialCache CredMCCache = new CredentialCache();
        myReq.PreAuthenticate = true;
        CredMCCache.Add(new System.Uri(PostingUrl),"Basic",new    System.Net.NetworkCredential("username","password")
 myReq.Credentials = CredMCCache;
        myReq.KeepAlive = true;
        myReq.UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.04506.30; .NET CLR 3.0.04506.648; .NET CLR 3.5.21022)";
        myReq.Accept = "*/*";
        myReq.Headers.Add("Accept-Language", "en-us");
        myReq.Headers.Add("Accept-Encoding", "gzip, deflate");
        WebProxy proxyObject = new WebProxy("proxy url with port", false);
        myReq.Proxy = proxyObject;
        myReq.Proxy.Credentials = CredentialCache.DefaultNetworkCredentials;
        myReq.Method = "GET";
        HttpWebResponse myResp = null;

            // Get the response from the conference center
            myResp = (HttpWebResponse)myReq.GetResponse(); 
```

我在上面的行中收到错误。任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:27:19.420

你为什么要设置代理，例如

> myReq.Proxy = 代理对象；

你需要这样做吗？如果您确实要通过公司代理，则不需要设置代理，`HttpWebRequest`因为它将从 IE 中获取设置（如果有）。

其次，您是否尝试使用基本身份验证与远程服务器进行身份验证？看起来你是，所以使用它来设置标题中的身份验证详细信息

```
string authInfo = userName + ":" + userPassword;
authInfo = Convert.ToBase64String(Encoding.Default.GetBytes(authInfo));
myReq.Headers["Authorization"] = "Basic " + authInfo; 
```

# xml - 使用前同级和后同级分组节点/内容

> ID：11761850
> 
> 赞同：0
> 
> 时间：2012-08-01T14:50:36.800
> 
> 标签：xml, xslt, xpath, xslt-2.0

我有：

XML

```
<TestCases>
   <TestCase>
       <TestCaseElement>
                    <Name><![CDATA[Start]]></Name>
                    <Role><![CDATA[TESTSTEP]]></Role>
       </TestCaseElement>
       <TestCaseElement>
                    <Name><![CDATA[Content]]></Name>
                    <Role><![CDATA[TESTSTEP]]></Role>
                    <Code>
                       <Line><![CDATA[some Content]></Line>
                       <Line><![CDATA[some Content]></Line>
                    </Code>

       </TestCaseElement>
       <TestCaseElement>
                   <Name><![CDATA[End]]></Name>
                   <Role><![CDATA[TESTSTEP]]></Role>
       </TestCaseElement>
     **n of these Start-Content-Stop Triplets are in the XML Document**
  </TestCase>
</TestCases> 
```

我想用 XSLT 将这些元素“分组”。

每个组都应以**Start**开头，并应 以**End**[结尾](https://stackoverflow.com/questions/3388923/combining-the-use-of-preceding-and-following-sibling-in-the-same-xpath-query)

这将是：

```
<xsl:for-each select="/TestCases/TestCase/TestCaseElement[../TestCaseElement[Name='Step-Start'] << . and . >> ../TestCaseElement[Name='Step-End']]"> 
```

但我认为我应该与***key***和/或***generate-id***分组并使用***following-sibling***和***previous-sibling***

> 我想要的输出：我希望所有内容都被开始和结束元素精确覆盖。

目前尚不清楚如何要求名称**开始**，因为这是我想“分组”的*TestCaseElement*下的一层？

如果有一天它们可用，我如何访问每个组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:04:08.517

这些方面的东西：

```
<xsl:template match="TestCase">
  <xsl:for-each-group select="TestCaseElement" group-starting-with="*[Name='Start']">
    <group>
      <xsl:apply-templates select="current-group()"/>
    </group>
  </xsl:for-each-group>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:00:22.163

**这个 XSLT 2.0 样式表...**

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xsl xs">
<xsl:output method="xml" indent="yes" />
<xsl:strip-space elements="*" />

<xsl:template match="TestCase">
 <xsl:copy>
  <xsl:apply-templates select="@*" />
  <xsl:for-each-group select="TestCaseElement" group-starting-with="*[Name='Start']">
   <xsl:apply-templates select="current-group()
     [not(. >> current-group()/self::*[Name='End'])]"/>
  </xsl:for-each-group>
 </xsl:copy>
</xsl:template>

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()" />
 </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

**...将采用此输入文档，稍微调整以使您的示例输入更加清晰，并扩展以增加测试覆盖范围...**

```
<TestCases>
    <TestCase>
        <TestCaseElement>
            <Name>Start</Name>
            <Role>TESTSTEP 1</Role>
        </TestCaseElement>
        <TestCaseElement>
            <Name>Content 1</Name>
            <Role>TESTSTEP</Role>
            <Code>
                <Line>some Content 1</Line>
                <Line>some Content 1</Line>
            </Code>
        </TestCaseElement>
        <TestCaseElement>
            <Name>End</Name>
            <Role>TESTSTEP 1</Role>
        </TestCaseElement>
        <TestCaseElement>
            This content is dropped because it is
            not between a Start and End TestCaseElement.
        </TestCaseElement>
        <TestCaseElement>
            <Name>Start</Name>
            <Role>TESTSTEP 2</Role>
        </TestCaseElement>
        <TestCaseElement>
            <Name>Content 2</Name>
            <Role>TESTSTEP</Role>
            <Code>
                <Line>some Content 2</Line>
                <Line>some Content 2</Line>
            </Code>
        </TestCaseElement>
        <TestCaseElement>
            <Name>End</Name>
            <Role>TESTSTEP 2</Role>
        </TestCaseElement>
    </TestCase>
</TestCases> 
```

**...并根据规定的要求产生此输出...**

```
<TestCases>
   <TestCase>
      <TestCaseElement>
         <Name>Start</Name>
         <Role>TESTSTEP 1</Role>
      </TestCaseElement>
      <TestCaseElement>
         <Name>Content 1</Name>
         <Role>TESTSTEP</Role>
         <Code>
            <Line>some Content 1</Line>
            <Line>some Content 1</Line>
         </Code>
      </TestCaseElement>
      <TestCaseElement>
         <Name>End</Name>
         <Role>TESTSTEP 1</Role>
      </TestCaseElement>
      <TestCaseElement>
         <Name>Start</Name>
         <Role>TESTSTEP 2</Role>
      </TestCaseElement>
      <TestCaseElement>
         <Name>Content 2</Name>
         <Role>TESTSTEP</Role>
         <Code>
            <Line>some Content 2</Line>
            <Line>some Content 2</Line>
         </Code>
      </TestCaseElement>
      <TestCaseElement>
         <Name>End</Name>
         <Role>TESTSTEP 2</Role>
      </TestCaseElement>
   </TestCase>
</TestCases> 
```

## 笔记

请注意，仅保留由划分的 Start 和 End 界定的 TestCaseElement 元素。此分组之外的其他节点将被删除。也可以通过放入一个变量来获得一些效率......

```
current-group()/self::*[Name='End'] 
```

...因此不需要为 current-group() 的每个成员重新计算此表达式。

# c# - c#中的多个配置文件

> ID：11761852
> 
> 赞同：0
> 
> 时间：2012-08-01T14:50:50.850
> 
> 标签：c#, app-config

我有一个包含 1 个控制台应用程序和 2 个库的解决方案。

在库中，我有两个不同的 app.config，例如我的 data.config

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="OutputFileFolder" value="c:\\log" />
    <add key="OutputIndexFile" value="c:\\log\index.xml" />
  </appSettings>
</configuration> 
```

在这个库类中，我在构造函数中

```
_indexPath = ConfigurationManager.AppSettings["OutputIndexFile"]; 
```

但是我应该如何`Data.config`从我的主控制台应用程序加载文件（这应该是主配置文件）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:53:03.560

dll 项目中的配置文件在运行时不相关。您的控制台应用程序项目中的配置文件（如果有）将被使用。

如果您想在两个单独的项目中使用配置文件，您可以将其[作为链接](http://msdn.microsoft.com/en-us/library/9f4t9t92%28VS.80%29.aspx)添加到您的第二个项目，或者您可以使用[构建后事件](http://msdn.microsoft.com/en-us/library/ke5z92ks.aspx)将其复制过来。然而，这两个似乎有点hacky。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T14:53:32.363

库实际上并没有相关的配置文件 - 它们在可执行文件（在您的情况下为控制台应用程序）下运行。

您应该将*所有*配置放在`app.config`应用程序的文件中，以便库中的代码可以访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:57:10.830

您可以通过[`Configuration`](http://msdn.microsoft.com/en-us/library/system.configuration.configuration.aspx)多次调用来加载多个配置文件[`ConfigurationManager.OpenMappedExeConfiguration`](http://msdn.microsoft.com/en-us/library/ms134269.aspx)（将您的配置文件添加到文件映射中，全局文件将自动添加并指定一个[`ConfigurationUserLevel.None`](http://msdn.microsoft.com/en-us/library/system.configuration.configurationuserlevel.aspx).

就像是：

```
var fileMap = new ExeConfigurationFileMap {
                    ExeConfigFilename = Path of dll's config file
             };

var cfg = ConfigurationManager.OpenMappedExeConfiguration(fileMap, ConfigurationUserLevel.None);
var result = cfg.AppSettings["OutputIndexFile"]; 
```

# angularjs - 为什么是filter和orderBy的优势呢？

> ID：11761858
> 
> 赞同：7
> 
> 时间：2012-08-01T14:51:12.540
> 
> 标签：angularjs, angularjs-orderby

看来 AngularJS 确实非常重视在视图中使用过滤器和其他 ng 指令来过滤和排序数据，而不是在模型中手动执行。有什么理由吗，即它更快，缓存还是什么？

例如，我想显示一个排序列表，但我也想访问排序列表以用于与视图无关的其他目的。如果列表直接在模型中排序，这很容易，所以我试图了解这样做是否有缺点。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T06:46:03.473

如果对您有意义，我认为对数据进行预排序没有任何问题，但这里有一些使用 Angular 过滤器的优点和缺点。

**优点：**

*   视图和模型的清晰分离。模型/控制器不需要了解或包含与如何显示/排序/过滤数据相关的代码
*   由于过滤器在模型更改时执行，因此[orderBy 过滤器](http://docs.angularjs.org/api/ng.filter:orderBy)可以在通过 UI 将项目添加到数组时自动排序
*   过滤器可用于格式化数据以供显示（例如[货币过滤器](http://docs.angularjs.org/api/ng.filter:currency)）以及修改 DOM 添加/删除项目（例如[过滤器过滤器](http://docs.angularjs.org/api/ng.filter:filter)），而无需修改底层模型数据
*   促进重用常用的内置或[自定义](http://docs.angularjs.org/guide/dev_guide.templates.filters.creating_filters)过滤器功能

**缺点：**

*   编写不当的过滤器函数可能会导致性能问题。您可以在 4:30 开始的[AngularJS Batarang 视频](http://blog.angularjs.org/2012/07/introducing-angularjs-batarang.html)中看到一个故意设计的示例。任何代码（不仅仅是过滤器）都可能写得很糟糕，但最初调用过滤器的频率并不明显。
*   一些过滤器作用于单个数字/字符串（货币过滤器）和一些数组（orderBy 过滤器）有点令人困惑
*   传递参数的语法和过滤器的链接也可能有点混乱

我敢肯定还有更多的优点/缺点，但希望这会有所帮助！

# android - 使用 layoutinflator 增加了什么价值

> ID：11761860
> 
> 赞同：0
> 
> 时间：2012-08-01T14:51:18.927
> 
> 标签：android, android-layout

下面是2段代码。每个都有一个名为 IconicAdapter 的内部类。在 getView 方法中，我们创建了一个名为 row 的 View 实例。我的问题是......我们实例化行的方式有什么区别，即。使用布局充气机并使用 super.getview()。如果这个例子没有让区别变得清晰，那么请解释一个我将使用布局充气机的具体例子：

样品 1：

```
public class DynamicDemo extends ListActivity {
  TextView selection;
  private static final String[] items={"lorem", "ipsum", "dolor",
          "sit", "amet",
          "consectetuer", "adipiscing", "elit", "morbi", "vel",
          "ligula", "vitae", "arcu", "aliquet", "mollis",
          "etiam", "vel", "erat", "placerat", "ante",
          "porttitor", "sodales", "pellentesque", "augue", "purus"};

  @Override
  public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
    setListAdapter(new IconicAdapter());
    selection=(TextView)findViewById(R.id.selection);
  }

  public void onListItemClick(ListView parent, View v,
                              int position, long id) {
    selection.setText(items[position]);
  }

  class IconicAdapter extends ArrayAdapter<String> {
    IconicAdapter() {
      super(DynamicDemo.this, R.layout.row, items);
    }

    public View getView(int position, View convertView,
                        ViewGroup parent) {
      LayoutInflater inflater=getLayoutInflater();
      View row=inflater.inflate(R.layout.row, parent, false);
      TextView label=(TextView)row.findViewById(R.id.label);

      label.setText(items[position]);

      ImageView icon=(ImageView)row.findViewById(R.id.icon);

      if (items[position].length()>4) {
        icon.setImageResource(R.drawable.delete);
      }
      else {
        icon.setImageResource(R.drawable.ok);
      }

      return(row);
    }
  }
} 
```

样本 2：

```
public class DynamicDemo extends ListActivity {
  TextView selection;
  private static final String[] items={"lorem", "ipsum", "dolor",
          "sit", "amet",
          "consectetuer", "adipiscing", "elit", "morbi", "vel",
          "ligula", "vitae", "arcu", "aliquet", "mollis",
          "etiam", "vel", "erat", "placerat", "ante",
          "porttitor", "sodales", "pellentesque", "augue", "purus"};

  @Override
  public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
    setListAdapter(new IconicAdapter());
    selection=(TextView)findViewById(R.id.selection);
  }

  public void onListItemClick(ListView parent, View v,
                              int position, long id) {
    selection.setText(items[position]);
  }

  class IconicAdapter extends ArrayAdapter<String> {
    IconicAdapter() {
      super(DynamicDemo.this, R.layout.row, items);
    }

    public View getView(int position, View convertView,
                        ViewGroup parent) {
      LayoutInflater inflater=getLayoutInflater();
      View row=super.getView(position, convertView, parent);
      TextView label=(TextView)row.findViewById(R.id.label);

      label.setText(items[position]);

      ImageView icon=(ImageView)row.findViewById(R.id.icon);

      if (items[position].length()>4) {
        icon.setImageResource(R.drawable.delete);
      }
      else {
        icon.setImageResource(R.drawable.ok);
      }

      return(row);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:07:19.610

理论上完全没有区别，但在实践中是有区别的。

你忽略了`convertView`争论，但`ArrayAdapter`不要。convertView 是用于平滑滚动的棘手优化。滚动时，listview 会定期调用`getView`提供的适配器上的方法。在您的情况下（示例 #2），您创建了许多垃圾 GC 堆的对象。此外，您每次都在从 XML 中扩充您的布局。`ArrayAdapter.getView`而不是创建新对象重用旧的，只需调用 textView.setText （顺便说一句，你调用 label.setText 两次：第一次在 super.getView 中，第二次`label.setText(items[position])`）

此外，您`View`每次都`getView`通过调用来查询 s 实例`findViewById`。而不是尝试使用[`ViewHolder`模式](http://developer.android.com/training/improving-layouts/smooth-scrolling.html#ViewHolder)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:10:05.520

在第一种情况下，`LayoutInflater`您使用 a 膨胀布局文件，该文件将`View`用于`ListView`' 行。这让您完全覆盖在方法`View` 中构建行的`getView`方式。您通常会希望使用它，因为它非常灵活并且可以让您完全控制（但您还必须注意和优化`getView`方法，不像您在提供的示例中所做的那样）。

在第二种情况下，您使用的`View`是超类`getView`方法返回的。在这种情况下，你让`ArrayAdapter`超类实现`View`它想要的，然后使用这个简单`View`的来进一步更新/修改它。当您对超类构建行视图的方式感到满意并且只打算对已经构建的`View`. 例如，假设您构建了一个扩展的自定义适配器，`ArrayAdapter`并且在此适配器中您希望为行视图提供备用背景颜色。然后你会实现这样的`getView`方法：

```
public View getView(int position, View convertView, ViewGroup parent) {
      // let the superclass build the View and set the data on it 
      View row=super.getView(position, convertView, parent);
      // we want to modify the View's background so we do
      if (position % 2 == 0) {
          row.setBackgroundColor(Color.RED);
      } else {
          row.setBackgroundColor(Color.GREEN);
      } 
      return row;
} 
```

我们本来可以使用的，`LayoutInflator`但是对于外观的微小变化是没有用的。

# javascript - 如何制作一个 javascript 新闻垂直自动收报机？

> ID：11761862
> 
> 赞同：-2
> 
> 时间：2012-08-01T14:51:22.677
> 
> 标签：javascript, html

我想要一个垂直的新闻提要代码，其中每个元素显示几秒钟，然后仅使用 javascript 替换为下一个元素（因为 jQuery 似乎导致我正在处理的页面中使用的其他库出现问题）。

有什么推荐的 JS 库可以使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:53:40.517

如果 jQuery.noConflict() 与其他库发生冲突，您可以使用它。

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

# android - 如何定义网站屏幕快捷图标？

> ID：11761864
> 
> 赞同：17
> 
> 时间：2012-08-01T14:51:45.280
> 
> 标签：android, icons, desktop-shortcut

我找不到如何让 Android 使用自定义图标（例如 iOS 使用的 favicon 或 app-touch 图像）作为网站快捷方式。

你能给我一个提示吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T19:52:50.880

Android 使用主屏幕图像和“快捷方式图标”（如网站图标）。如果您只指定主屏幕图标，则网页不会在 Web 浏览器中的 URL 旁边显示图标。

“快捷方式图标”必须单独列出，即使它可以是同一个文件。

```
<link rel="shortcut icon" href="http://yourdomain.com/path/icon57.png" />
<link rel="apple-touch-icon" href="http://yourdomain.com/path/icon57.png" />
<link rel="apple-touch-icon" sizes="72x72" href="http://yourdomain.com/path/icon72.png" />
<link rel="apple-touch-icon" sizes="114x114" href="http://yourdomain.com/path/icon114.png" />
<link rel="apple-touch-icon" sizes="144x144" href="http://yourdomain.com/path/icon144.png" /> 
```

相对 URL 适用于许多设备，但大多数消息来源说您需要使用绝对 URL。

单独列出尺寸允许设备仅下载满足其需求的最小图像。对于“ `shortcut icon`”，您不能列出不同的大小，但您可以使用一个 ICO 文件，该文件可能包含在文件中编码的多个大小。许多图像程序（如**GIMP**）可以保存多种大小的 ICO 文件。

注意，如果要在 IE 中显示快捷方式图标，必须是真实的 ico 文件。

显然，Android 2.1 及更早的版本只识别“预组合”图像链接，但如果您包含预组合图标，那么每个能够“幻想”图标的设备都会跳过它们的过程，而只使用预组合的。我测试的机器人可以做自己的幻想，所以我不使用预先组合的图标链接。这将取决于您的兼容性需求。

```
<link rel="apple-touch-icon-precomposed" href="http://yourdomain.com/custom_icon.png"/> 
```

有关使用主屏幕图标的更多信息...

[http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-12T23:17:46.113

Android 和 iOS 似乎对主屏幕上的图标使用相同的引用。

**对于 HTML 链接图标：**

```
<!-- These two are what you want to use by default -->
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<link rel="apple-touch-icon-precomposed" href="apple-touch-icon-precomposed.png">

<!-- This one works for anything below iOS 4.2 -->
<link rel="apple-touch-icon-precomposed apple-touch-icon" href="apple-touch-icon-precomposed.png"> 
```

这两种类型的区别在于前两种没有空格。底部的包括两者之间的空间。iOS 4.2+ 无法识别该空间。你最好的选择是使用这三个。如果空间有限，请仅使用前两个。

**对于尺寸：**

iPad Retina 显示屏为 144 × 144 像素。

iPhone Retina 显示屏为 114 × 114 像素。

57 × 57 像素，几乎适用于其他任何东西

**需要注意的一件事**是 iOS 4.2+ 将简单地忽略 size 属性，因此您可以将它们链接起来。出于组织目的，我建议将大小放在图标的文件名中。

**要注意的另一件事**是，您甚至不需要包含“apple-touch-icon”的链接。如果 html 中没有定义图标，iOS 将在根文件夹中按顺序搜索以下名称的文件。Android*确实*需要定义它们，所以无论如何都要将它们放在代码中。

```
apple-touch-icon-57x57-precomposed.png
apple-touch-icon-57x57.png
apple-touch-icon-precomposed.png
apple-touch-icon.png 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T03:15:38.643

[这看起来是一个很好的解释](http://www.mollerus.net/tom/blog/2010/06/web_app_homescreen_icons_in_android.html)。

如果您放置：

```
<link rel="apple-touch-icon" href="/path/to/some.png"/>
<link rel="apple-touch-icon-precomposed" href="/custom_icon.png"/> 
```

在书签页面的 HTML 中，它会自动出现在桌面上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T17:14:16.647

此[Android 和 iPhone 图标](http://www.iconsberlin.com/faq.php#tabbar-icons-as-webicons)页面建议Android 的**绝对 URL**。

所以只需将 KenY-N 的标签修改为

```
<link rel="apple-touch-icon" href="http://yourdomain.com/path/to/some.png"/>
<link rel="apple-touch-icon-precomposed" href="http://yourdomain.com/custom_icon.png"/> 
```

# javascript - YUI3 - 具有相同类的链接的 Onclick 事件处理

> ID：11761871
> 
> 赞同：5
> 
> 时间：2012-08-01T14:52:04.533
> 
> 标签：javascript, yui, yui3

问题：YUI3 - 具有相同类的链接的 Onclick 事件处理

我们在具有相同类的页面中的链接很少。当我单击其中一个链接时，会根据单击的链接采取一些不同的操作，例如

```
<a href="?page=1" data="test1" class="sample">One</a>
<a href="?page=2" data="test2" class="sample">two</a>
<a href="?page=3" data="test3" class="sample">three</a> 
```

处理程序代码：

```
Y.all('.sample').on('click', function(e){
    e.preventDefault();
    alert(this.getAttribute("data"));
}); 
```

当我单击任何链接时，我会得到所有“数据”属性的列表。我们只需要点击链接的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:16:11.413

您还可以使用`e.target`而不是`this`访问被单击的元素：

```
Y.all('.sample').on('click', function(e){
  e.preventDefault();
  alert(e.target.getAttribute("data"));
}); 
```

为了获得更好的性能，您可以使用[事件委托](http://yuilibrary.com/yui/docs/event/#delegation)：

```
Y.one('body').delegate('click', function(e){
  e.preventDefault();
  alert(this.getAttribute("data"));
}, '.sample'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:32:36.103

`all`为您提供匹配元素的列表。您可以使用它`each`来遍历列表并为单个节点做一些事情。有关更多信息，请参阅他们的[节点类 API](http://yuilibrary.com/yui/docs/api/classes/NodeList.html#method_each)。

这是代码，以及[jsfiddle 上的示例](http://jsfiddle.net/RPQsm/)。

```
Y.all('.sample').each(function(node) {
    node.on('click', function(e) {
        e.preventDefault();
        alert(node.getAttribute("data"));
    });
});​ 
```

在 yuilibrary.com (http://yuilibrary.com/yui/docs/event/#nodelist-this) 上的事件用户指南中也有此问题的常见问题解答条目。通常最好使用事件委托。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:31:38.213

这里事件委托是更好的解决方案，同意@juandopazo

如果您不想使用委托，可以使用 Y.all('.sample').each(...) （来自@user322896 的解决方案）或 e.target （来自@juandopazo 的解决方案），但我通常会这样做其他方式：

```
Y.on('click', function(e){
    e.preventDefault();
    alert(this.getAttribute("data"));
}, '.sample'); 
```

这不是委托语法（侦听器将直接附加在链接上）并且没有 NodeList 对象，因此`this`指的是特定的链接节点。与此相比，这种方式也具有性能优势`Y.all('.sample')`，请阅读：[Why would I use Y.on() or Y.delegate() instead of node.on() and node.delegate()?](http://yuilibrary.com/yui/docs/event/#y-on-vs-node-on)

# networking - 局域网中的带宽控制

> ID：11761875
> 
> 赞同：4
> 
> 时间：2012-08-01T14:52:16.840
> 
> 标签：networking, bandwidth, lan

我想控制局域网中每个用户使用的带宽。我们正在使用带有 wifi 的摩托罗拉电缆调制解调器来共享互联网。在调制解调器中没有执行此操作的选项。请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-07T12:03:14.603

您可以在其中一个系统中设置热点，并通过系统重定向所有流量。现在你可以在这个系统中实现 QOS 来做你想要的所有控制。

# c# - 即使调用应用程序关闭，删除功能也会删除

> ID：11761877
> 
> 赞同：6
> 
> 时间：2012-08-01T14:52:22.867
> 
> 标签：c#, file, delete-file

我遇到了一个奇怪的问题（这可能是我缺乏知识），我提出了有问题的代码：

```
try
{
    f.Delete();
    fTemp.MoveTo(f.FullName);
    Console.WriteLine("INFO: Old file deleted new file moved in > {0}", f.FullName);
}
catch (IOException ex)
{
    Console.WriteLine("ERROR: Output file has IO exception > {0}", f.FullName);
    Environment.ExitCode = 1;
} 
```

f 和 fTemp 是 FileInfo 对象。因此，如果我使用其中 f 是在媒体播放器中播放的视频文件的代码运行它，则会引发异常。这工作正常且符合预期。现在，当我关闭媒体播放器时，它会删除文件！？即使我的应用程序早已关闭。即使我关闭了 Visual Studio，当我关闭媒体播放器时，它仍然会删除文件。好像在某处设置了一些回调以确保文件在某个时候被删除。这是不受欢迎的行为。但我无法弄清楚到底出了什么问题......

现在的结果：

```
if (!IsFileLocked(f))
{
    try
    {
        f.Delete();
        fTemp.MoveTo(f.FullName);
        Console.WriteLine("INFO: Old file deleted new file moved in > {0}", f.FullName);
    }
    catch (IOException ex)
    {
        Console.WriteLine("ERROR: Output file has IO exception > {0}", f.FullName);
        Environment.ExitCode = 1;

    }

    catch (UnauthorizedAccessException ex)
    {
        Environment.ExitCode = 2;
        Console.WriteLine("ERROR: Output file is locked > {0}", f.FullName);

    }
}
else
{
    Environment.ExitCode = 3;
    Console.WriteLine("ERROR: Couldn't delete file was locked");

} 
```

我知道我仍然可以在 Delete 和 MoveTo 之间做得更好，但我现在将进行更改，shotgun 编码......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:01:41.403

你得到了`IOException`因为文件不能立即被删除或写入。但是，当您调用 时`Delete()`，似乎正在调用该文件以进行删除。

尽管媒体播放器会在文件打开时阻止文件被删除，但文件在关闭时仍会被标记为删除，无论您的程序是否正在运行。因此，当媒体播放器关闭时，文件将被删除。

您可以使用以下代码检查文件是否正在使用中，取自[此处](https://stackoverflow.com/questions/876473/is-there-a-way-to-check-if-a-file-is-in-use)。以它不被锁定为条件`Delete`，`Copy`你应该很好。

```
try
{
    if(!IsFileLocked(f))
    {
        f.Delete();
        fTemp.MoveTo(f.FullName);
        Console.WriteLine("INFO: Old file deleted new file moved in > {0}", f.FullName);
    }
}

protected virtual bool IsFileLocked(FileInfo file)
{
    FileStream stream = null;

    try
    {
    stream = file.Open(FileMode.Open, FileAccess.ReadWrite, FileShare.None);
    }
    catch (IOException)
    {
    //the file is unavailable because it is:
    //still being written to
    //or being processed by another thread
    //or does not exist (has already been processed)
    return true;
    }
    finally
    {
    if (stream != null)
        stream.Close();
    }

    //file is not locked
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:05:03.260

从 Windows SDK：

DeleteFile 函数将文件标记为在关闭时删除。因此，在文件的最后一个句柄关闭之前，不会发生文件删除。随后调用 CreateFile 以打开文件失败并显示 ERROR_ACCESS_DENIED。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:10:24.517

据我了解，您希望您的程序等到可以删除文件然后删除它并移动另一个文件。

为此，您可以检查文件上是否打开了句柄，但这需要非托管代码。另一种方法是使用这个问题的答案中的方法：[有没有办法检查文件是否正在使用？](https://stackoverflow.com/questions/876473/is-there-a-way-to-check-if-a-file-is-in-use)

```
protected virtual bool IsFileLocked(FileInfo file) 
{ 
    FileStream stream = null; 

    try 
    { 
        stream = file.Open(FileMode.Open, FileAccess.ReadWrite, FileShare.None); 
    } 
    catch (IOException) 
    { 
        //the file is unavailable because it is: 
        //still being written to 
        //or being processed by another thread 
        //or does not exist (has already been processed) 
        return true; 
    } 
    finally 
    { 
        if (stream != null) 
            stream.Close(); 
    } 

    //file is not locked 
    return false; 
} 
```

在开始删除文件之前，您可以

A）循环直到可以删除文件

```
while(IsFileLocked(f)) { Thread.Sleep(100); } 
```

或 B) 取消

```
if (IsFileLocked(f)) { return; } 
```

选择 A 还是 B 取决于您的要求。

# javascript - JavaScript DOM：在容器中查找元素索引

> ID：11761881
> 
> 赞同：90
> 
> 时间：2012-08-01T14:52:43.613
> 
> 标签：javascript, html, dom, parent-child

我需要通过对象引用在其容器内找到元素的索引。奇怪的是，我找不到简单的方法。请不要使用 jQuery - 只有 DOM。

```
UL
 LI
 LI
 LI - my index is 2
 LI 
```

是的，我可以为每个元素分配 ID 并遍历所有节点以匹配 ID，但这似乎是一个糟糕的解决方案。没有更好的东西吗？

所以，假设我有一个对第三个 LI 的对象引用，如上例所示。我怎么知道它是索引 2？

谢谢。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-08-01T15:01:28.867

你可以利用`Array.prototype.indexOf`. 为此，我们需要在某种程度上将其“投射”`HTMLNodeCollection`成一个真正的`Array`. 例如：

```
var nodes = Array.prototype.slice.call( document.getElementById('list').children ); 
```

然后我们可以调用：

```
nodes.indexOf( liNodeReference ); 
```

例子：

```
var nodes = Array.prototype.slice.call( document.getElementById('list').children ),
    liRef = document.getElementsByClassName('match')[0];

console.log( nodes.indexOf( liRef ) );
```

```
<ul id="list">
    <li>foo</li>
    <li class="match">bar</li>
    <li>baz</li>    
</ul>
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2018-04-04T08:59:56.700

这是我的做法**（2018 版？）**：

```
const index = [...el.parentElement.children].indexOf(el); 
```

塔达阿姆。而且，如果你也想考虑原始文本节点，你可以这样做：

```
const index = [...el.parentElement.childNodes].indexOf(el); 
```

我将孩子分散到一个数组中，因为它们是 HTMLCollection（因此它们不适用于 indexOf）。

请注意，您正在使用 Babel，或者浏览器覆盖范围足以满足您的需要（考虑扩展运算符，它基本上是幕后的 Array.from）。

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2012-08-01T15:37:03.637

**2017 年更新**

下面的原始答案假设 OP 希望包含非空文本节点和其他节点类型以及元素。我现在似乎不清楚这是否是一个有效的假设。

相反，假设您只想要元素索引，`previousElementSibling`现在得到了很好的支持（2012 年不是这种情况）并且现在是显而易见的选择。以下（与此处的其他一些答案相同）将适用于除 IE <= 8 之外的所有主要内容。

```
function getElementIndex(node) {
    var index = 0;
    while ( (node = node.previousElementSibling) ) {
        index++;
    }
    return index;
} 
```

**原始答案**

只需使用`previousSibling`直到您击中`null`. 我假设您想忽略纯空格文本节点；如果要过滤其他节点，请进行相应调整。

```
function getNodeIndex(node) {
    var index = 0;
    while ( (node = node.previousSibling) ) {
        if (node.nodeType != 3 || !/^\s*$/.test(node.data)) {
            index++;
        }
    }
    return index;
} 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2016-01-18T21:41:56.347

```
Array.prototype.indexOf.call(this.parentElement.children, this); 
```

或使用`let`语句。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-12-17T08:49:49.503

仅对于元素，这可用于在其兄弟元素中查找元素的索引：

```
function getElIndex(el) {
    for (var i = 0; el = el.previousElementSibling; i++);
    return i;
} 
```

请注意，`previousElementSibling`IE<9 不支持。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-08-01T14:55:16.693

您可以使用它来查找元素的索引：

`Array.prototype.indexOf.call(yourUl, yourLi)`

例如，这会记录所有索引：

```
var lis = yourList.getElementsByTagName('li');
for(var i = 0; i < lis.length; i++) {
    console.log(Array.prototype.indexOf.call(lis, lis[i]));
}​ 
```

[**JSFIDDLE**](http://jsfiddle.net/B5Gvu/1/)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-04-02T23:47:41.930

现代本机方法可以使用 'Array.from()' - 例如：`

```
const el = document.getElementById('get-this-index')
const index = Array.from(document.querySelectorAll('li')).indexOf(el)
document.querySelector('h2').textContent = `index = ${index}`
```

```
<ul>
  <li>zero
  <li>one
  <li id='get-this-index'>two
  <li>three
</ul>
<h2></h2>
```

`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-09-29T17:07:02.450

**从 HTMLCollection 创建数组的示例**

```
<ul id="myList">
    <li>0</li>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
</ul>

<script>
var tagList = [];

var ulList = document.getElementById("myList");

var tags   = ulList.getElementsByTagName("li");

//Dump elements into Array
while( tagList.length != tags.length){
    tagList.push(tags[tagList.length])
};

tagList.forEach(function(item){
        item.addEventListener("click", function (event){ 
            console.log(tagList.indexOf( event.target || event.srcElement));
        });
}); 
</script> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-01T15:01:44.170

您可以遍历`<li>`s 中的 s`<ul>`并在找到正确的时停止。

```
function getIndex(li) {
    var lis = li.parentNode.getElementsByTagName('li');
    for (var i = 0, len = lis.length; i < len; i++) {
        if (li === lis[i]) {
            return i;
        }
    }

} 
```

[演示](http://jsfiddle.net/fNtFu/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-10-04T20:37:35.833

如果你想紧凑地写这个，你需要的是：

```
var i = 0;
for (;yourElement.parentNode[i]!==yourElement;i++){}
indexOfYourElement = i; 
```

我们只是循环遍历父节点中的元素，当我们找到您的元素时停止。

您还可以轻松地做到：

```
for (;yourElement.parentNode.getElementsByTagName("li")[i]!==yourElement;i++){} 
```

如果这就是您想要查看的全部内容。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-05-13T08:52:03.393

```
 const nodes = Array.prototype.slice.call( el.parentNode.childNodes );
    const index = nodes.indexOf(el);
    console.log('index = ', index); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-08-01T15:08:29.370

另一个仅使用基本循环和索引检查的示例

**HTML**

```
<ul id="foo">
    <li>0</li>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
</ul> 
```

**JavaScript** *在加载/就绪或 ul 渲染后运行*

```
var list = document.getElementById("foo"),
    items = list.getElementsByTagName("li");

list.onclick = function(e) {
    var evt = e || window.event,
    src = evt.target || evt.srcElement;
    var myIndex = findIndex(src);
    alert(myIndex);
};

function findIndex( elem ) {
    var i, len = items.length;
    for(i=0; i<len; i++) {
        if (items[i]===elem) {
            return i;
        }
    }
    return -1;
} 
```

**运行示例**

[jsFiddle](http://jsfiddle.net/qmV4c/)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-08-01T15:08:55.883

只需将对象引用传递给以下函数，您将获得索引

```
function thisindex(elm) 
{ 
    var the_li = elm; 
    var the_ul = elm.parentNode; 
    var li_list = the_ul.childNodes; 

    var count = 0; // Tracks the index of LI nodes

    // Step through all the child nodes of the UL
    for( var i = 0; i < li_list.length; i++ )
    {
        var node = li_list.item(i);
        if( node )
        {
        // Check to see if the node is a LI
            if( node.nodeName == "LI" )
            {
            // Increment the count of LI nodes
                count++;
            // Check to see if this node is the one passed in
                if( the_li == node )
                {
                    // If so, alert the current count
                    alert(count-1);
                }
            }
        }
    }
} 
```

# python - pandas concat('outer') 不做联合？

> ID：11761884
> 
> 赞同：3
> 
> 时间：2012-08-01T14:52:59.143
> 
> 标签：python, join, pandas

它看起来`pandas.concat`是在做“左外”连接，而不是仅仅联合索引。对我来说似乎是一个错误，但也许我错过了一些明显的东西。

```
 import pandas
    import pandas.util.testing as put
    ts1 = put.makeTimeSeries()
    ts2 = put.makeTimeSeries()[::2]
    ts3 = put.makeTimeSeries()[::3]
    ts4 = put.makeTimeSeries()[::4]

    ## to join with union
    ## these two are of different length!
    pandas.concat([ts1,ts2], join='outer', axis = 1) 
    pandas.concat([ts2,ts1], join='outer', axis = 1) 
```

知道如何获得完整的联合（正如他们在 pandas 文档中使用 join='outer' 声称的那样）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:25:38.990

这是一个错误。在这里打开一个问题：

[http://github.com/pydata/pandas/issues/1719](http://github.com/pydata/pandas/issues/1719)

（请使用 GitHub 获取 pandas 错误报告）

# python - 从 Base64 字符串获取图像文件大小

> ID：11761889
> 
> 赞同：12
> 
> 时间：2012-08-01T14:53:02.740
> 
> 标签：python, image

我正在开发一个 python web 服务。它调用另一个 Web 服务来更改配置文件的图片。

它连接到另一个 Web 服务。此 Web 服务只能接受 4 MB 或更小的图片。

我将检查放在第一个 Web 服务中。它使用 PIL 检查 base64 字符串是否为有效图像。但是，如何检查 base64 字符串是否会创建 4 MB 或更小的图像？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-01T14:54:05.530

将数据的长度乘以 3/4，因为编码会将 6 个字节变成 8 个字节。如果结果在 4MB 的几个字节内，那么您需要计算最后的数量`=`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-02T13:32:41.780

我正在使用这个：

```
def size(b64string):
    return (len(b64string) * 3) / 4 - b64string.count('=', -2) 
```

我们删除了填充的长度，它要么是 no，要么是一个或两个字符`=`，如此[处所述](https://en.wikipedia.org/wiki/Base64)。

可能不是最优的。我不知道 str.count(char) 的效率如何。另一方面，它只对长度为 2 的字符串执行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-05-13T02:23:23.030

图像大小可以从字符串长度计算。由于每个字符代表 6 位，每个“=”符号表示缺少 8 位。 [参考](https://en.wikipedia.org/wiki/Base64)

```
file_size = (len(base64_string) * 6 - base64_string.count('=') * 8) / 8 
```

或者

```
file_size = len(base64_string) * 3 / 4 - base64_string.count('=') 
```

将以字节为单位给出文件大小，并将其划分为兆（= 1000000）将以兆字节为单位给出文件大小

# objective-c - NSJSONSerialization 解析特殊字符

> ID：11761894
> 
> 赞同：2
> 
> 时间：2012-08-01T14:53:19.737
> 
> 标签：objective-c, ios, cocoa-touch, nsjsonserialization

我正在使用`NSJSONSerialization`. 解析后，我得到类似的字符串`&auml ;`，`%#339;`我认为这与编码有关。但`NSJSONSerialzation`不要求它需要什么编码，我猜它自己检测到它。所以我的问题是，我怎样才能得到正确的字符串而不是这些奇怪的`&auml ;`和`%#339;`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:09:23.977

`NSJSONSerialization`假定编码是 Unicode 编码之一。确保您传递给它的数据采用 UTF-8（或 UTF-16）格式。ä 是 UTF-8 中的 C3 A4 或 UTF-16 中的 E4。

请注意，如果未指定 HTTP，则默认编码为 ISO-8859-1，因此您可能传递的是 ISO-8859-1 数据而不是 UTF-8。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T15:02:19.600

In `options` try NSJSONReadingMutableLeaves, it must return NSMutableString.. For more take a look at the [docs](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html).

# windows - 在 Windows 中隐藏 Vim .ext~ 文件

> ID：11761897
> 
> 赞同：2
> 
> 时间：2012-08-01T14:53:28.937
> 
> 标签：windows, vim

当我在 Windows 上使用 vim 时，我意识到 vim 会保存文件并关闭 vim 窗口会删除一个 .ext.swp 文件和一个 .ext~ 文件

当我在主机上工作时，如何禁用或删除这些文件，因为重复项会导致我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:55:36.153

关闭 vim 交换文件和备份文件以禁用这些文件的创建：

`:set noswapfile`和`:set nobackup`。

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/821902/disabling-swap-files-creation-in-vim)。

# sharepoint - 在 SharePoint 2010 中运行 Move-SPSite 以移动网站集时出错

> ID：11761903
> 
> 赞同：3
> 
> 时间：2012-08-01T14:53:43.233
> 
> 标签：sharepoint, powershell, sharepoint-2010, filestream

我在新服务器上全新安装了 SharePoint 2010。我正在尝试将网站集重新组织到多个内容数据库中以便于管理。尝试使用 PowerShell 移动网站集时出现以下错误：

Move-SPSite：由于对象的当前状态，操作无效。在 line:1 char:12 + Move-SPSite <<<< [https://xxxxx.xxx/test/test-erick/](https://xxxxx.xxx/test/test-erick/) + CategoryInfo : InvalidData: (Microsoft.Share...PCmdletMoveSite: SPCmdletMoveSite) [Move-SPSite] , InvalidOperationException + FullyQualifiedErrorId : Microsoft.SharePoint.PowerShell.SPCmdletMoveSite

源内容数据库和目标内容数据库都启用了文件流。我不想做浅拷贝，但不知道文件流设置是否导致问题。

更新：我尝试创建一个没有启用文件流并且能够移动网站集的内容数据库。所以问题是试图将网站内容移动到启用文件流的数据库。

更新 2：我无法再次移动这些站点，因此它毕竟与文件流无关。我尝试重新创建数据库，但这次我遇到了错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:01:25.360

发现了问题。我试图从中复制网站集的原始内容数据库来自我们的旧服务器场，它是 SP1 之前的服务器场，而新服务器场安装了 SP1。

内容数据库的架构发生了变化，move-spsite cmdlet 可能引用了旧内容数据库中不存在的表（例如，allsites）。

# iphone - cocos2d 2.x iphone 4 帧率下降

> ID：11761904
> 
> 赞同：0
> 
> 时间：2012-08-01T14:53:57.887
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我最近将一个项目从 Cocos2d 1.1 移植到 2.0。到目前为止一切正常，但我注意到 iPhone 4 和 iPod Touch 4 的帧速率从 60 fps 下降到 40-50 fps 左右。我尝试过的其他设备（iPad 1 和 3、iPhone 4s）仍然跑到60。

起初我以为我有太多的绘图调用，但在将调用从 54 减少到 17 之后，我在两个设备上仍然有相同的 fps。我应该注意，我在默认的 Hello World 模板上没有这个问题，控制台中也没有任何 openGL 错误。我的内存占用大约是 50mb，所以我认为这也不是问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:31:35.410

看起来你有一个简单的性能问题。以 60 fps 运行的其他设备（至少是 iPad 3 和 iPhone 4S）比 iPhone 4 和 iPod Touch 4 具有更强的计算能力和更好的图形处理器。

由于这发生在从 cocos2d 1.1 升级到 2.0 之后，第 4 代 iPhone 设备运行 OpenGL ES 2.0 代码（着色器）的速度可能不如其他设备快。这也可能是 cocos2d 2.0 本身的问题。除非你真的需要使用 cocos2d 2.0 的特性（即着色器），否则最简单的方法就是回到 cocos2d 1.1。如果您不编写着色器，cocos2d v1.1 在功能方面与 2.0 相同（此时）。

最后，仅使用发布版本测试性能。如果您运行 Debug 构建，诸如日志记录和断言之类的东西可能会完全扭曲任何性能结果。

# vba - 如何使用 VBA 读取在自定义功能区选项卡上的编辑框中输入的文本？

> ID：11761907
> 
> 赞同：2
> 
> 时间：2012-08-01T14:54:08.670
> 
> 标签：vba, ribbon, ms-project, ribbonx

我已经使用 SetCustomUI VBA 方法在 MS Project 2010 的功能区中添加了一个选项卡，详情如下：http: [//msdn.microsoft.com/en-us/library/ee767705](http://msdn.microsoft.com/en-us/library/ee767705)。

选项卡 XML 加载正常，布局设置正确。问题是在执行与我的按钮和编辑框关联的 VBA 回调时，Project 似乎没有使用此处定义的标准方法签名：http: [//msdn.microsoft.com/en-us/library/aa722523.aspx#a16c7df5 -93f3-4920-baa8-7b7290794c15_Ribbon](http://msdn.microsoft.com/en-us/library/aa722523.aspx#a16c7df5-93f3-4920-baa8-7b7290794c15_Ribbon)。

这些签名在 Excel 2010 等“更标准”的 Office 程序中工作，但是当我在 Project 中编写具有相同参数的方法时，除非我从方法中删除所有参数，否则会弹出异常。这对于按钮（在第一篇 MSDN 文章中进行了演示）是可以的，但是对于 editBoxes 的“onChange”回调，在回调中没有提供任何参数，我无法读取在 editBox 中输入的文本，使得他们没用。应该如何在 Project 中访问功能区编辑框的内容？项目中是否忽略了对该字符串的 VBA 访问？只能通过托管代码访问吗？

这是我尝试过的 XML / VBA 对的示例：

```
<customUI  xmlns="http://schemas.microsoft.com/office/2006/01/customui">
    <ribbon >
        <tabs >
            <tab 
                id="NavHelper"
                label="Nav Helper">
                <group 
                    id="Group1"
                    label="Search">
                    <box  id="Box1" >
                        <editBox 
                            id="DateBegin"
                            label="Dates from"
                            sizeString="11/11/1111"
                            onChange="DateBegin_onChange"/>
                        <editBox 
                            id="DateEnd"
                            label="to"
                            sizeString="11/11/1111"
                            onChange="DateEnd_onChange"/>
                    </box >
                    <button 
                        id="doSearch"
                        imageMso="InstantSearch"
                        label="Search"
                        size="large"
                        onAction="doSearch_onAction"/>
                </group >

            </tab >
        </tabs >
    </ribbon >
</customUI > 
```

和 VBA：

```
Public Sub DateBegin_onChange(control As IRibbonControl, text As String)
    MsgBox text
End Sub

Public Sub doSearch_onAction(control As IRibbonControl)
    MsgBox "pressed!"
End Sub 
```

因此，对于这个示例，该设置在 Excel 中完美运行，但如果我将它带到 Project 中，除非我从方法定义中删除所有参数，否则回调将不会运行，此时它们运行，但无用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:43:15.710

您是否尝试过 Microsoft Office 的自定义 UI 编辑器？

请参阅[http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2009/08/06/7293.aspx](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2009/08/06/7293.aspx)

我没有在 MS Project 中工作过，但在其他办公程序中，您可以输入 customUI XML 并对其进行验证，并获得相应的 VBA 函数签名。

如果我在 Excel 中尝试您的 customUI XML 并尝试验证（我没有 Project...），我会收到一条错误消息，指出命名空间错误。

# wcf - WCF - 从不同机器运行应用程序时通道超时

> ID：11761908
> 
> 赞同：1
> 
> 时间：2012-08-01T14:54:11.083
> 
> 标签：wcf

我正在尝试解决我的应用程序在客户站点上运行的问题。该应用程序使用 WCF 发送和检索文件。它运行完美，但在客户端从同一网络中的另一台机器开始运行后开始显示以下错误：

> **00:00:57.6797680 后等待回复时请求通道超时。增加传递给 Request 调用的超时值或增加 Binding 上的 SendTimeout 值。分配给此操作的时间可能是较长超时的一部分。**

配置中的所有超时都已增加到 10 分钟，没有任何区别。

不幸的是，我无法使用 VS 在本地运行它来调试它。

这是绑定：

```
<customBinding>
  <binding name="MyServiceSoap12">
    <textMessageEncoding maxReadPoolSize="64" maxWritePoolSize="16"
        messageVersion="Soap11WSAddressingAugust2004" writeEncoding="utf-8">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
          maxBytesPerRead="4096" maxNameTableCharCount="16384" />
    </textMessageEncoding>
    <security authenticationMode="UserNameOverTransport" >
      <localClientSettings maxClockSkew="00:10:00"/>
      <localServiceSettings maxClockSkew="00:10:00"/>
      <secureConversationBootstrap>
        <localClientSettings maxClockSkew="00:30:00"/>
        <localServiceSettings maxClockSkew="00:30:00"/>
      </secureConversationBootstrap>
    </security>
    <httpsTransport manualAddressing="false" maxBufferPoolSize="200000000"
        maxReceivedMessageSize="200000000" allowCookies="false" authenticationScheme="Anonymous"
        bypassProxyOnLocal="false" decompressionEnabled="true" hostNameComparisonMode="StrongWildcard"
        keepAliveEnabled="true" maxBufferSize="200000000" proxyAuthenticationScheme="Anonymous"
        realm="" transferMode="Buffered" unsafeConnectionNtlmAuthentication="false"
        useDefaultWebProxy="true" requireClientCertificate="false" />
  </binding>
</customBinding> 
```

更新：与服务的连接正常 - 该应用程序从同一服务运行其他服务操作而没有问题。一项特定操作（检索文件）导致错误。

你会从哪里开始寻找？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:16:20.763

你要发送一个大文件吗？

您是否增加了 SendTimeout 属性？（我没有在你的配置中看到它）

# paypal - 如何防止重复 PayPal 付款？

> ID：11761909
> 
> 赞同：5
> 
> 时间：2012-08-01T14:54:17.250
> 
> 标签：paypal, paypal-sandbox

我有一个简单的“立即付款”按钮，这是通过按钮制造商创建的代码，并添加了一个“自定义”隐藏字段来识别它。我想知道是否可以添加一些额外的隐藏字段来告诉 PayPal“此交易不应进行两次”。

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">

    <input type="hidden" name="cmd" value="_s-xclick">
    <input type="hidden" name="custom" value="{MYUNIQUEID}">
    <input type="hidden" name="hosted_button_id" value="{MYHOSTEDBUTTONID}">
    <input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_paynowCC_LG.gif" 
    border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
    <img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">

</form> 
```

因为现在客户不太可能支付两次，但我注意到当沙盒出现故障时，我成功地两次支付了同一笔交易。我绝对想避免的事情。不仅对于客户，这可以得到退款，当然，而且因为我不希望我的数据库搞砸了，我想避免大量编码来捕获重复付款......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T16:39:52.510

您可能希望为“invoice”参数添加一个唯一标识符；`<input type="hidden" name="invoice" value="your unique invoice ID">`并在您的帐户 www.paypal.com 的“个人资料”>“我的销售工具”部分中启用“阻止重复付款”

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-01T22:07:55.927

谢谢罗伯特！（以上帖子）

实际上，我已经走了这么远，以至于我打算向 PayPal 商家技术支持咨询，就在提交我的问题之前，我发现了一个带有答案的页面 -

避免重复付款： [https ://ppmts.custhelp.com/app/answers/detail/a_id/165](https://ppmts.custhelp.com/app/answers/detail/a_id/165)

不确定您是否必须登录才能看到上面的页面，所以为了方便起见，我在此处引用该页面：

> 您可以通过将发票编号传递给 PayPal 系统来避免重复交易。此功能适用于网站支付标准和网站支付专业版（SOAP 和 NVP）。只要您已将个人资料配置为阻止重复的发票编号，PayPal 系统就会检查以确保您传递的发票编号尚未在您的帐户中支付。
> 
> 示例：发票 001 已支付，因此如果 001 再次传递到 PayPal 帐户，它将被拒绝。
> 
> 要在您的个人资料中阻止此操作：
> 
> 阻止意外付款：您可以通过阻止重复的发票 ID 来防止意外付款
> 
> 1.  登录[https://www.paypal.com](https://www.paypal.com)
>     
>     
> 2.  单击“个人资料”子选项卡
>     
>     
> 3.  在“销售偏好”下点击“收款偏好”
>     
>     
> 4.  如果您希望在传递“发票”变量时使用此功能，请选择“是，阻止每个发票 ID 多次付款”
>     
>     
> 5.  滚动到底部并单击“保存”按钮
>     
>     
> 
> 要传递网站付款标准的发票编号，您需要在现有按钮代码中添加一行代码。您不能将此代码添加到最初创建为加密的按钮。下面的例子：
> 
> 对于 Website Payments Pro，您传递的参数取决于您进行的 API 调用的类型。
> 
> 对于 SOAP：InvoiceID
> 
> 对于 NVP：INVNUM
> 
> 使用 Pro 时，如果检测到重复的发票编号，将返回错误 10412。有关 API 错误代码的完整列表以及有关 10412 错误的详细信息，请[单击此处](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_errorcodes)

# sql - 与带有左连接的 select 语句不同

> ID：11761914
> 
> 赞同：0
> 
> 时间：2012-08-01T14:54:27.320
> 
> 标签：sql, database

如何从带有 LEFT JOINS 的选择语句中选择不同的值？我追求的值是来自 trainingTbl 的 s_id 或来自 setsTbl 的 setName 之一。

下面提供了完整的字符串。

```
Dim strQuery As String = 
  "SELECT * 
     FROM userAssessmentTbl 
     LEFT JOIN trainingTbl ON userAssessmentTbl.tt_id = trainingTbl.tt_id 
     LEFT JOIN setsTbl ON trainingTbl.s_id = setsTbl.s_id
     LEFT JOIN outcomesTbl ON userAssessmentTbl.o_id = outcomesTbl.o_id 
    WHERE UserId = @UserId
    ORDER BY t_date DESC " 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:01:44.747

try this

```
SELECT DISTINCT  trainingTbl.s_id  FROM  
userAssessmentTbl LEFT JOIN trainingTbl ON userAssessmentTbl.tt_id = trainingTbl.tt_id 
LEFT JOIN setsTbl ON trainingTbl.s_id = setsTbl.s_id 
LEFT JOIN outcomesTbl ON userAssessmentTbl.o_id = outcomesTbl.o_id 
WHERE UserId = @UserId ORDER BY t_date DESC 
```

or this (not sure what exactly you need)

```
SELECT DISTINCT  trainingTbl.s_id, setsTbl.setName  FROM  
userAssessmentTbl LEFT JOIN trainingTbl ON userAssessmentTbl.tt_id = trainingTbl.tt_id 
LEFT JOIN setsTbl ON trainingTbl.s_id = setsTbl.s_id 
LEFT JOIN outcomesTbl ON userAssessmentTbl.o_id = outcomesTbl.o_id 
WHERE UserId = @UserId ORDER BY t_date DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:52:11.983

首先，您的问题是您使用的是 select * （一种 SQL 反模式，并且不应出现在生产代码中），因此每条记录都是唯一的，因此添加 distinct 或 group by 将不起作用。

导致问题的不是左连接，内连接也会有同样的问题。问题是表之间存在一对多的关系，因此在加入它们时会有多条记录。如果您只希望第一个表中的每个 id 有一条记录，那么您必须指定您想要的其他表中的哪个记录或单个数据字段 - 使用聚合函数来获取您想要匹配的记录，或者在加入以确保您拥有一对一的关系。在不了解您的数据和业务规则的情况下，我无法建议最好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:58:07.557

尝试使用[GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)以获得唯一性

```
SELECT * 
FROM  userAssessmentTbl 
LEFT JOIN trainingTbl ON userAssessmentTbl.tt_id = trainingTbl.tt_id LEFT JOIN setsTbl ON trainingTbl.s_id = setsTbl.s_id 
LEFT JOIN outcomesTbl ON userAssessmentTbl.o_id = outcomesTbl.o_id 
WHERE UserId = @UserId 
GROUP BY trainingTbl.s_id
ORDER BY t_date DESC 
```

# php - Using hidden "form" to pass variables

> ID：11761926
> 
> 赞同：0
> 
> 时间：2012-08-01T14:55:13.210
> 
> 标签：php, variables

Just learning about passing variables from page to page in php, and trying to find the best way to do so for me, as I have to pass ~10 variables between 5 pages. On the first page, does it make sense to have a form:

```
<form method="post">
    <input type="hidden" name="test" value="<?php $test ?>" />
</form> 
```

Then on the next page could I receive this variable using `POST`? I would not like to have an ACTUAL form, just use it as a storage area for my variables. Also, what do I use for `action=` if the second page is called second.php.

Any help is appreciated, thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T14:57:02.533

简短回答：表单仅在提交时才有效。您可能想使用**[会话](http://il.php.net/sessions)**。

更长的答案：

*   没有用户输入的表单是没有意义的。这就是它存在的目的。
*   表单上的`action=`属性反映了表单的提交位置。如果处理页面是，`second.php`那么`action=`属性应该指向那里。
*   会话不是唯一的可能性。PHP也可以**[设置cookies](http://php.net/cookies)**，如果服务器不关心数据（仅作为媒介），可以使用HTML5的**[localStorage](http://diveintohtml5.info/storage.html)**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T14:57:22.750

[确实，如果您需要在所有五个页面中传递 10 个变量，那么使用session](http://www.php.net/manual/en/book.session.php)可能会更好。`$_SESSION`只要会话保持活动状态，您就可以将它们全部存储为变量的一部分并从任何页面访问它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:08:48.983

如果我正确理解了您的问题，您可以尝试以下方法来发布您的值，而无需表单出现在页面上或实际上根本不在页面上。您需要引用 jQuery 库才能使用此代码。

```
 function hiddenPost(param1) {
        $('<form />')
        .hide()
        .attr({ method: "post" })
        .attr({ action: "http://my-URL-here.com/SomePage.php" })
        .append($('<input />')
            .attr("type", "hidden")
            .attr({ "name": "post_data" })
            .val(param1)
        )
        .append('<input type="submit" />')
        .appendTo($("body"))
        .submit();
    } 
```

您可以在您发布到的页面上检索 POST 值，就像它是带有表单标签的常规 POST 一样。

对于 PHP： var postData = $_POST["post_data"];

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T14:58:21.563

您不能使用 $_POST 变量在用户会话中存储数据。

你应该使用：

*   会话
*   饼干
*   HTML5 存储

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T14:59:51.113

这取决于您想做什么，您有多种选择： 1\. 使用您概述的表格和帖子。在这种情况下，在第 1 页上，您的 action="second.php" 2\. 使用 GET 通过 URL 传递数据 3\. 会话，如前两篇文章所述 4\. Cookie

# mysql - 更改排序规则时，UTF8 编码的文本被错误地更改

> ID：11761936
> 
> 赞同：0
> 
> 时间：2012-08-01T14:55:38.323
> 
> 标签：mysql, utf-8, character-encoding, collation

我们有一个带有字段的 MySQL 表，`latin1_swedish_ci`但是那里有一些 UTF-8 编码的数据。

当我将排序规则从 更改为 时`latin1_swedish_ci`，`utf8_general_ci`它可以很好地转换 ISO-8859-1 的内容，但是 UTF-8 数据会被破坏，看到类似......你的东西。

有任何想法吗？

**编辑：**我们将 InnoDB 与 MySQL 5.1 一起使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:43:19.440

那么，您的“latin1”列有一些以 UTF-8 编码的数据，但不是全部，现在您有一些以 UTF-8 双重编码的数据？

您可以这样做来修复双重编码的值：首先转换回 latin1，将字符串重新解释为二进制，并告诉 MySQL 该二进制字符串实际上是用 UTF-8 编码的文本。在 MySQL 中，这可以写成：

```
convert(binary convert(mycolumn using latin1) using utf8) 
```

现在的问题是检测哪些字符串是双重编码的，以便您只能更新那些。这可以通过比较以字符为单位的原始字符串的长度与以字节为单位的新字符串的长度来完成；对于双重编码的文本，它们应该是相等的。这就是你最终的结果：

```
update mytable set mycolumn = @str where char_length(mycolumn) = 
    length(@str := convert(binary convert(mycolumn using latin1) using utf8)); 
```

# sql - 如何在 PostgreSQL 中获取星期开始和结束日期字符串？

> ID：11761938
> 
> 赞同：46
> 
> 时间：2012-08-01T14:55:43.793
> 
> 标签：sql, postgresql, timestamp

我正在使用**PostgreSQL 8.3**。我有一张这样的桌子：

```
id        regist_time        result
-----------------------------------
1     2012-07-09 15:00:08      3
2     2012-07-25 22:24:22      7
4     2012-07-07 22:24:22      8 
```

`regist_time`的数据类型是`timestamp`。

我需要找到一个星期的时间间隔（开始到结束）和总和（结果）作为 num。

我想得到结果：

```
 week                    num    
---------------------------------
7/1/2012-7/7/2012              10
7/8/2012-7/14/2012              5
7/15/2012-7/21/2012             3
7/22/2012-7/28/2012            11 
```

我可以得到今年的周数：

```
SELECT id,regis_time, EXTRACT(WEEK FROM regis_time) AS regweek
FROM tba 
```

关键部分是

```
EXTRACT(WEEK FROM regis_time) 
```

提取函数只能获取今年的周数，如何获取一周内的开始时间到结束时间？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-08-01T15:02:34.607

您可以使用[`date_trunc('week', ...)`](http://www.postgresql.org/docs/8.3/static/functions-datetime.html).

例如：

```
SELECT date_trunc('week', '2012-07-25 22:24:22'::timestamp);
-> 2012-07-23 00:00:00 
```

然后，如果您对开始时间不感兴趣，可以将其转换为日期。

要获得结束日期：

```
SELECT    date_trunc('week', '2012-07-25 22:24:22'::timestamp)::date
   || ' '
   || (date_trunc('week', '2012-07-25 22:24:22'::timestamp)+ '6 days'::interval)::date;

-> 2012-07-23 2012-07-29 
```

（我在这里使用了默认格式，您当然可以将其调整为使用 MM/DD/YYYY。）

请注意，如果您想对时间戳进行比较，而不是使用`(date_trunc('week', ...) + '6 days'::interval`，您可能希望添加一整周并在一周结束时使用严格比较。

这将排除`y`一周最后一天的时间戳（因为截止时间是当天的午夜）。

```
 date_trunc('week', x)::date <= y::timestamp
AND y::timestamp <= (date_trunc('week', x) + '6 days'::interval)::date 
```

这将包括他们：

```
 date_trunc('week', x)::date <= y::timestamp
AND y::timestamp < (date_trunc('week', x) + '1 week'::interval) 
```

（在极少数情况下，您不能直接使用`date_trunc`on `y`。）

* * *

如果您的一周从星期日开始，则替换`date_trunc('week', x)::date`为`date_trunc('week', x + '1 day'::interval)::date - '1 day'::interval`应该可以。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-01T15:09:35.423

```
select date_trunc('week', regist_time)::date || ' - ' ||
       (date_trunc('week', regist_time) + '6 days') ::date as Week,
       sum(result) Total
from YourTable
group by date_trunc('week', regist_time)
order by date_trunc('week', regist_time) 
```

请参阅 SQLFiddle 上的概念证明：[http ://sqlfiddle.com/#!1/9e821/1](http://sqlfiddle.com/#!1/9e821/1)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-18T10:52:25.723

这可以帮助查询获取当前一周的所有天数。

```
select cast(date_trunc('week', current_date) as date) + i
from generate_series(0,6) i 
```

> 2015-08-17
> 2015-08-18
> 2015-08-19
> 2015-08-20
> 2015-08-21

获取星期的开始和结束日期（星期一为 0，星期五为 4）：

```
select cast(date_trunc('week', current_date) as date) + 0 || '-->' ||  cast(date_trunc('week', current_date) as date) + 4; 
```

> 2015-08-17-->2015-08-21

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-11T21:10:28.717

这是

```
select to_date('2015-07', 'IYYY-IW'); 
```

在 postgres 中使用它

它会回来

```
2015-02-09 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-15T10:10:20.293

如果您想获得一周的开始和结束日期，一周的开始日是一周中的任何一天（星期一，星期二，...）。你可以这样使用：

**`day_of_week_index`映射：**

```
{
    'monday': 1,
    'tuesday': 2,
    'wednesday': 3,
    'thursday': 4,
    'friday': 5,
    'saturday': 6,
    'sunday': 7
} 
```

**查询模板：**

```
SELECT 
concat(
    CASE
        WHEN extract(ISODOW FROM datetime_column) < day_of_week_index THEN cast(date_trunc('week', datetime_column) AS date) - 8 + day_of_week_index
        ELSE cast(date_trunc('week', datetime_column) AS date) - 1 + day_of_week_index
    END, ' - ', 
    CASE
        WHEN extract(ISODOW FROM datetime_column) < day_of_week_index THEN cast(date_trunc('week', datetime_column) AS date) - 8 + day_of_week_index + 6
        ELSE cast(date_trunc('week', datetime_column) AS date) - 1 + day_of_week_index + 6
    END) 
FROM table_name; 
```

**例子：**

获取星期开始和结束日期，星期开始日是**星期二**：

```
SELECT 
concat(
    CASE
        WHEN extract(ISODOW FROM TIMESTAMP '2021-12-01 03:00:00') < 2 THEN cast(date_trunc('week', TIMESTAMP '2021-12-01 03:00:00') AS date) - 8 + 2
        ELSE cast(date_trunc('week', TIMESTAMP '2021-12-01 03:00:00') AS date) - 1 + 2
    END, ' - ', 
    CASE
        WHEN extract(ISODOW FROM TIMESTAMP '2021-12-01 03:00:00') < 2 THEN cast(date_trunc('week', TIMESTAMP '2021-12-01 03:00:00') AS date) - 8 + 2 + 6
        ELSE cast(date_trunc('week', TIMESTAMP '2021-12-01 03:00:00') AS date) - 1 + 2 + 6
    END); 
```

=> 结果：

```
2021-11-30 - 2021-12-06 
```

**注意**：您可以更改`day_of_week_index`以下上述映射以确定一周的开始日期（星期一，星期二，...，星期日）

# codeigniter - Backbone.js - 默认路由器，从 URL 获取数据

> ID：11761940
> 
> 赞同：0
> 
> 时间：2012-08-01T14:55:45.950
> 
> 标签：codeigniter, backbone.js

我有一个这样的路由器设置：

```
var AppRouter = Backbone.Router.extend({
    routes: {
        "/agents/:id": "getAgent",
        "/orders/:id": "getOrders",
        "/users/:id": "getUsers",
        '*path':  'defaultRoute'

    },
    getAgent: function(id) {
        ticketList.url = "/index.php/tickets/viewJSON/a"+id;
    },
    getOrders: function(id) {
        ticketList.url = "/index.php/tickets/viewJSON/o"+id;
    },
    getUsers: function(id) {
        ticketList.url = "/index.php/tickets/viewJSON/u"+id;
    },
    defaultRoute: function() {
        //(here needs to be  the code)   
    }

}); 
```

我正在使用 codeigniter，所以当我访问时，`/index.php/agents/view/1103`我需要强制`ticketList.url`-`/index.php/tickets/viewJSON/a1103`取自`a`（`/agent/`这将分别在`user`、`agent`和`order`、和之间变化`u`，然后从URL 部分的任何路径中获取 ID 。`a``o``view`

获取从 URL 获取这些参数的默认路由的最佳方法是什么？从字面上拆分document.URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:52:42.533

如果您将三个自定义路由合并到一个自定义路由，而不是将它们全部放在默认值中，那么阅读起来会更容易。

```
var AppRouter = Backbone.Router.extend({
    routes: {
        "/:resource/:id": "getResource"
    },

    getResource: function(resource, id) {
        ticketList.url = "/index.php/tickets/viewJSON/" + resource[0] + id;
    }
}); 
```

但请注意，这将匹配许多不同的 URL，可能比您真正想要的更多。为每个资源设置单独的路由，并将它们映射到相同的功能可能是一个更好的主意。

# javascript - Custom fusion table maps

> ID：11761955
> 
> 赞同：0
> 
> 时间：2012-08-01T14:56:38.550
> 
> 标签：javascript, html, google-maps, iframe

I have a number of fusion tables, each of which can be viewed in the form of maps. There iframe representation is along the following lines:

```
<iframe width="100%" height="400" scrolling="no" frameborder="no" src="https://www.google.com/fusiontables/embedviz?viz=MAP&amp;q=select+col0+from+1w5Ksc0GqzFKgf91tyauCbnhymszbsNlQay8scLs&amp;h=false&amp;lat=58.3&amp;lng=19.1&amp;z=11&amp;t=1&amp;l=col0"></iframe> 
```

How I use javascript to replace the src so as to switch between maps?

How can I use a search box so as to center the map based on a user inputted address?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:58:38.583

如果 iframe 有一个 ID，您只需获取新的 src 并替换它...

`$('#iframeIDwhateveritis').attr('src', 'newhttpSrchere');`

您必须在使用的任何地图上查找文档的搜索框...

# clearcase - clearcase：如何检查流 A 中的代码是否已传递到流 B

> ID：11761957
> 
> 赞同：3
> 
> 时间：2012-08-01T14:56:43.500
> 
> 标签：clearcase

如何使用命令行检查流 A 中的代码是否已传递到流 B。在内部，我们使用 Clearcase UCM。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:32:30.463

您需要检查流 A 和流 B 之间的区别，使用[**`cleartool diffbl`**](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_diffbl.htm)：

```
cleartool diffbl -act stream:Stream1@\aPVob stream:StreamB@\aPVob 
```

您正在寻找的是未标记的基线（由 ClearCase 设置的技术基线），由名为的**活动**（因此）创建：`-act``deliver.xxx`

```
Differences:
<< deliver.java_dev.19990917.140443 "deliver java_dev on 09/17/99 14:04:43."
<< deliver.java_dev.19990917.141046 "deliver java_dev on 09/17/99 14:10:46." 
```

如果您描述了这些活动，您将知道已经交付了哪些*版本。*

```
cleartool descr activity:deliver.java_dev.19990917.140443@\aPVob 
```

问题是：一旦交付，您进入的`streamB`是一项巨大的活动（“ `deliver.xxx`”），其中包含所有交付的*版本*。
您没有直接的贡献活动列表，这些活动在 上`StreamA`，并且是交付的一部分。

要查看这些贡献活动，您可以查看技术说明“[自上次基线以来交付的活动](http://www-01.ibm.com/support/docview.wss?uid=swg21136012)”：

> 上面的输出将显示**与该流的交付操作相关的集成活动**。
> 如果您想获取相关集成活动的贡献活动列表，可以分别为每个集成活动发出以下命令：
> 
> 例子：

```
%> cleartool lsact -contrib activity:deliver.development_steam.20010824.080503@/vobstore/pvob

ACT0000435 
```

# c# - C# - 多台服务器的 WMI 查询太慢

> ID：11761958
> 
> 赞同：1
> 
> 时间：2012-08-01T14:56:45.590
> 
> 标签：c#, multithreading, windows-server-2008, wmi

我正在尝试从远程 win2008 服务器返回所有启用的功能。这根本不是问题——只要我知道到底要查询什么。

然而，我遇到的问题是，当我的查询没有找到结果时，验证该功能是否已安装需要很长时间 - 有时长达 2 分钟。（查询超过 600 个节点时不够好）。

以下代码是我发现的最快的方法，但是正如我所说：返回false需要永远：

```
 public bool serverFeatureEnabled(string machineName, Win32_ServerFeature_ID id)
    {
        ManagementClass serviceClass = new ManagementClass("Win32_ServerFeature");
        string strScope = string.Format(@"\\{0}\root\cimv2", machineName);
        ConnectionOptions conOpt = new ConnectionOptions();
        serviceClass.Scope = new ManagementScope(strScope, conOpt);

        foreach (ManagementObject obj in serviceClass.GetInstances())
        {
            if ((UInt32)obj["ID"] == (uint)id)
            {
                return true;
            }

        }
        return false;
    } 
```

有没有人对此有更好的想法，我不介意它是否根本不使用 WMI 查询。

我想做的就是加快速度。

我希望我有点道理！

任何帮助表示赞赏。

**编辑：**

我曾尝试按照 Sergrey V.

它确实加快了第一个 false 的返回，但是大约需要 14 秒才能完成，所有在集群中查询的所有服务器总共需要 140 分钟。

**编辑2：**

我尝试使用 WBEMTEST（Windows Management Instrumentation Tester）对 Win32_ServerFeature 运行测试，与远程计算机的连接似乎是问题 - 对其中一台远程计算机运行测试大约需要 12 秒才能连接，大约需要 2 秒才能返回数据。

所以 Sergrey V 提出的解决方案似乎是迄今为止 WMI 查询最快的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:57:06.607

尝试使用 ManagementObjectSearcher 类直接从服务器功能中选择所需的功能：

```
 string serverName = "serverName";
            string className = "Win32_ServerFeature";
            string propertyName = "ID";
            int propertyValue = 144;
            string query = string.Format("SELECT * FROM {0} WHERE {1} = {2}", className, propertyName, propertyValue);
            ManagementObjectSearcher searcher = new ManagementObjectSearcher(query);
            string scopePath = string.Format(@"\\{0}\root\cimv2", serverName);
            searcher.Scope = new ManagementScope(string.Format(scopePath));
            ManagementObjectCollection mCollection = searcher.Get();

            bool featureEnabled = mCollection.Count > 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T11:10:52.610

不要连续运行该操作。我不知道 WMI 内部是否存在瓶颈，但最明显的优化是并行运行整个事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T10:32:02.547

所以这就是我最终要做的事情：首先，按照 M Afifi 的建议，我为列表中的每个节点启动了一个新任务。然后使用**'Task.Factory.StartNew()'**并行执行 WMI 查询。（使用 System.Threading.Tasks；）

列表中所有节点的完整执行现在大约需要 12 秒！

```
 referenceList.connectionNodes().ForEach(x =>
            {
                var genericTask = Task.Factory.StartNew(() =>
                    {
                        regkeyFactory.testParallelExecution(x);
                    });
            }); 
```

谢谢你们的帮助！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-10-28T08:13:18.320

更快的方法是一体扫描，我使用 ManagementClass 创建了一个 HWID 类，只需 0.07 秒即可获得机器的唯一硬件 ID

# c# - 将 EF 代理对象转换为原始 POCO 对象的最佳方法是什么？

> ID：11761961
> 
> 赞同：5
> 
> 时间：2012-08-01T14:56:47.653
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api, entity-framework-5

我有一些在 EF Code First 上下文中使用的 POCO 对象。因此，当我用数据填充它们时，我实际上是在处理 EF 代理对象而不是 POCO 本身。

我有一个 ASP.NET MVC4 ApiController，它返回我的 POCO 对象，我将在我的客户端应用程序中使用这些对象。

我的“GET”方法看起来像这样：

```
 // GET api/Clients/5
    public Client GetClient(int id)
    {
        Client client = db.Clients.Find(id);
        if (client == null)
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
        }

        return client;
    } 
```

这实际上不起作用，因为当序列化程序尝试序列化 Client 对象时，它实际上是在处理 EF 代理版本，这会导致它打嗝。请参阅[ApiController 可以返回带有其他对象集合的对象吗？](https://stackoverflow.com/questions/11600734/can-an-apicontroller-return-an-object-with-a-collection-of-other-objects)

所以，我可以通过这样做来关闭代理生成`DbContext`：

```
 db.Configuration.ProxyCreationEnabled = false; 
```

这确保我正在处理 POCO 而不是代理。但是，现在我的 Client 类的大多数成员都没有填充，因为是 EF 代理为我延迟加载这些成员。

所以我真正想要的是使用 EF 代理类来获取数据，然后在最后一刻从我的方法中返回原始 POCO。

如果不在代码中从头开始手动创建整个对象（包括任何嵌套对象），我该如何做到这一点？当然必须有一个简单的方法 - 或者至少是某种帮助类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:29:31.527

您的问题涉及如何为应用程序设计架构。从技术上讲，一个应用程序中有多个模型：领域模型、数据传输对象或不同层的视图模型：业务逻辑层、分发层和表示层。

在 ASP.NET MVC 中滥用模型，我经常看到使用域模型（来自 EF）作为视图模型，因为在某些情况下，域模型作为视图模型足以满足您的 UI 是正确的。但实际上它完全不同，对于复杂的 UI，例如：网格，可能需要将多个域模型组合到一个视图模型中来为您的 UI 提供数据。

与分发层、asp.net web api 类似，消费者可能需要多个域模型来做某事。它通常不是 100% 的域模型作为数据传输对象。

因此，为了关注点分离，建议您创建 DTO 对象并将其与域对象（来自 EF 的 POCO 对象）分开，即使它在属性中是 1:1 映射的。

例如，如果您有 Customer 域模型，则需要有 CustomerDto。

您可以手动映射或使用[AutoMapper](http://automapper.codeplex.com/)等工具将您的域模型映射到 DTO 模型。

通过这种方式，你也可以避免你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T11:35:16.950

我知道你得到了答案，但是，你可能想看看这个：

> POCO 代理类型不能由 Windows Communication Foundation (WCF) 直接序列化或反序列化，因为 DataContractSerializer 序列化引擎只能序列化和反序列化已知类型。代理类型不是已知类型。有关更多信息，请参阅使用 POCO 实体主题中的序列化 POCO 代理部分。要将 POCO 代理序列化为 POCO 实体，请在序列化期间使用 ProxyDataContractResolver 类将代理类型映射到 POCO 类型。

[http://msdn.microsoft.com/en-us/library/vstudio/ee705457(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ee705457(v=vs.100).aspx)

# php - 将注销添加到密码保护页面

> ID：11761964
> 
> 赞同：1
> 
> 时间：2012-08-01T14:56:52.230
> 
> 标签：php, password-protection

我有一个想要密码保护的页面。我已经尝试了下面的代码，但我无法注销页面。还有其他快速（简单）的方法吗？谢谢！

如何将注销添加到此受密码保护的页面，如下所述

```
$username = "the_username_here";
$password = "the_password_here";
$nonsense = "supercalifragilisticexpialidocious";

if (isset($_COOKIE['PrivatePageLogin'])) {
if ($_COOKIE['PrivatePageLogin'] == md5($password.$nonsense)) {

LOGGED IN CONTENT HERE

  exit;
} else {
  echo "Bad Cookie.";
  exit;
}
}

if (isset($_GET['p']) && $_GET['p'] == "login") {
if ($_POST['user'] != $username) {
  echo "Sorry, that username does not match.";
  exit;
 } else if ($_POST['keypass'] != $password) {
  echo "Sorry, that password does not match.";
  exit;
 } else if ($_POST['user'] == $username && $_POST['keypass'] == $password) {
  setcookie('PrivatePageLogin', md5($_POST['keypass'].$nonsense));
  header("Location: $_SERVER[PHP_SELF]");
 } else {
  echo "Sorry, you could not be logged in at this time.";
}
} 
```

页面上的登录表单...

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>?p=login" method="post">
<label><input type="text" name="user" id="user" /> Name</label><br />
<label><input type="password" name="keypass" id="keypass" /> Password</label><br />
<input type="submit" id="submit" value="Login" />
</form> 
```

关于如何解决这个问题的任何线索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:11:55.237

在任何页面上

```
<?php if(isset($_COOKIE['PrivatePageLogin'])):?>
   <a href="logout.php">Logout</a>
<?php endif?> 
```

注销.php

```
if(isset($_COOKIE['PrivatePageLogin'])){
    // delete cookie
    setcookie('PrivatePageLogin', null, time() - 1);
    // if you use sessions delete session variables as well
}
header('Location: index.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:38:47.443

只需提供一个指向清除您设置的 cookie 的页面的链接。

作为旁注，将密码`md5`单独保存在客户端是不安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T14:17:44.530

这并不能回答 user1561466 的问题。通过这个答案，我向您展示了如何使用带有注销按钮（不带插件）的 WP 的密码保护功能：

`logout.php:`

```
<?php

if (isset($_SERVER['HTTP_COOKIE'])) {
    $cookies = explode(';', $_SERVER['HTTP_COOKIE']);
    foreach($cookies as $cookie) {
        $parts = explode('=', $cookie);
        $name = trim($parts[0]);
        setcookie($name, '', time()-1000);
        setcookie($name, '', time()-1000, '/');
    }
}
header('Location: index.php');

?> 
```

也许您只能删除一个 cookie，但这就是我可以独立于 WP 删除 cookie 的方式。

在`page.php`我有这个：

```
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>

    <?php
        if (!empty($post->post_password)) { // if there's a password

            if (isset($_COOKIE['wp-postpass_' . COOKIEHASH]) && wp_check_password( $post->post_password, $_COOKIE['wp-postpass_' . COOKIEHASH])) {
                echo '<a href="/logout.php">Logout</a><br /><br />';
            }
        }
    ?> 
```

资料来源：[如何在 php 中删除我网站的所有 cookie](https://stackoverflow.com/questions/2310558/how-to-delete-all-cookies-of-my-website-in-php)，[http://wordpress.org/support/topic/check-in-the-loop-if-a-post-is-password-protected](http://wordpress.org/support/topic/check-in-the-loop-if-a-post-is-password-protected)

# php - Retrieving numeric characters from a string

> ID：11761967
> 
> 赞同：0
> 
> 时间：2012-08-01T14:56:59.923
> 
> 标签：php, regex

I have a string like this -

```
[ [ -2, 0.5 ], 
```

I want to retrieve the numeric characters and put them into an array that will end up looking like this:

```
array(
  [0] => -2,
  [1] => 0.5
) 
```

What is the best way of doing this?

**Edit:**

An more thorough example

```
[ [ -2, 0.5, 4, 8.6 ],
  [ 5,  0.5, 1, -6.2 ],
  [ -2, 3.5, 4, 8.6 ],
  [ -2, 0.5, -3, 8.6 ] ] 
```

I am going through this matrix line by line and I want to extract the numbers into an array for each line.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T14:59:49.453

最容易使用的是正则表达式和[`preg_match_all()`](http://php.net/preg_match_all)：

```
preg_match_all( '/(-?\d+(?:\.\d+)?)/', $string, $matches); 
```

结果`$matches[1]`将包含您正在搜索的确切数组：

```
array(2) {
  [0]=>
  string(2) "-2"
  [1]=>
  string(3) "0.5"
} 
```

正则表达式是：

```
(         - Match the following in capturing group 1
 -?       - An optional dash
 \d+      - One or more digits
 (?:      - Group the following (non-capturing group)
   \.\d+  - A decimal point and one or more digits
 )
 ?        - Make the decimal part optional
) 
```

[您可以在演示](http://viper-7.com/MJP5eA)中看到它的工作原理。

**编辑：**由于OP更新了问题，矩阵的表示可以很容易地解析[`json_decode()`](http://php.net/json_decode)：

```
$str = '[ [ -2, 0.5, 4, 8.6 ],
  [ 5,  0.5, 1, -6.2 ],
  [ -2, 3.5, 4, 8.6 ],
  [ -2, 0.5, -3, 8.6 ] ]';
var_dump( json_decode( $str, true)); 
```

这里的好处是不需要不确定性或正则表达式，它将正确键入所有单个元素（根据其值作为整数或浮点数）。因此，上面的代码[将输出](http://viper-7.com/FkUqnu)：

```
Array
(
    [0] => Array
        (
            [0] => -2
            [1] => 0.5
            [2] => 4
            [3] => 8.6
        )

    [1] => Array
        (
            [0] => 5
            [1] => 0.5
            [2] => 1
            [3] => -6.2
        )

    [2] => Array
        (
            [0] => -2
            [1] => 3.5
            [2] => 4
            [3] => 8.6
        )

    [3] => Array
        (
            [0] => -2
            [1] => 0.5
            [2] => -3
            [3] => 8.6
        )

) 
```

# java - android中的线程没有输出

> ID：11761974
> 
> 赞同：0
> 
> 时间：2012-08-01T14:57:32.393
> 
> 标签：java, android

我创建了一个 android 应用程序，用户在其中输入一个字符串和一个数字，其中该数字将被计算为其阶乘。一切正常，但是当我将代码包含在线程中时，没有输出。

这是我的源代码：

```
package com.inputandfactorial;

import android.app.Activity;
import android.os.Bundle;
import android.text.Editable;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

    Button chkCmd;
    EditText input1, input2;
    TextView display1, display2;
    int res = 1,factint;
    String fact;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        chkCmd = (Button) findViewById(R.id.bProcess);
        input1 = (EditText) findViewById(R.id.etString);
        input2 = (EditText) findViewById(R.id.etFactorial);
        display1 = (TextView) findViewById(R.id.tvString);
        display2 = (TextView) findViewById(R.id.tvFactorial);

        chkCmd.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                Thread t1 = new Thread(){
                    public void run(){
                        String change = input1.getText().toString();
                        fact = input2.getText().toString();
                        factint = Integer.parseInt(fact);
                        for (int i = 1; i <= factint; i++) {
                            res = res * i;
                        }
                        try {
                            display2.setText("The factorial of " + fact + " is " + res);
                            display1.setText("The string value is " + change);
                        } catch (Exception e) {

                        }
                    }
                };
                t1.start();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

我知道我不需要把它放在一个线程中，我只是在做实验，看看这是否可行，但它没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:00:12.527

您不能从线程对 UI 进行更改。UI 上的所有更改都需要在 UIThread 上完成。要轻松做到这一点，请使用 AsyncTask ：

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:01:15.600

我同意上面关于您不需要线程的评论但是为了回答您的问题...

You need to look at [AsyncTasks](http://developer.android.com/reference/android/os/AsyncTask.html). I wrote a previous answer that should provide you with a working example [AsyncTask Android example](https://stackoverflow.com/questions/9671546/asynctask-android-example/9671602#9671602)

It goes on to explain you can only affect the UI from the original GUI thread therefore your code above will not work.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:04:02.407

You can only manipulate `View`s on the UI thread. Wrap your code in a `Runnable` and execute it on the main thread with `Activity#runOnUiThread(Runnable action)`:

```
runOnUiThread(new Runnable() {
    @Override
    public void run() {
        display2.setText("The factorial of " + fact + " is " + res);
        display1.setText("The string value is " + change);
    }
} 
```

That said, simple arithmetic doesn't warrant the use of a `Thread` in the first place...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T16:50:10.243

**1.** Its always a good practice to keep the **UI work on the UI thread, and Non-UI work on the Non-UI thread**. That became a **law** with the release of `HoneyComb` Android Version.

**2.** An **android** application **starts on the UI thread**, creating any **other thread will drop you out of the Android thread**, and this thread will be the Non-UI thread.

**3.** To post the work **from** the `Non-UI` thread **back on** the `UI` thread, we need to use these **2 ways:**

**-** `Thread` along with `Handler`.

**-** `AsyncTask`, which is specially introduced in Android **to sync UI and Non-UI thread**, Its also known as `Painless threading`.

# c# - MessageSource.MessageSink 为空

> ID：11761979
> 
> 赞同：1
> 
> 时间：2012-08-01T14:57:51.060
> 
> 标签：c#, message, postsharp

这就是我所拥有的：

```
Message msg = new Message(SeverityType.Error,"xx","xx", "xx");
IMessageSink sink = MessageSource.MessageSink;
sink.Write(msg);   // NullReferenceException (sink == null) 
```

当我在网上进行一些挖掘时，似乎每个示例都使用 MessageSource.MessageSink.Write(msg)，我很困惑为什么我的代码不起作用。

任何帮助都会受到重视。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:27:41.580

您应该使用`Message.Write`.

# hadoop - 如何通过sqoop从sql server导入表到hdfs

> ID：11761986
> 
> 赞同：2
> 
> 时间：2012-08-01T14:58:33.717
> 
> 标签：hadoop, hive, sqoop

我已经安装了hadoop、hive、sqoop。我将表从我的数据库导入到 hdfs 但无法将其导入配置单元。我需要在 hive 中配置任何文件吗？此外，当我浏览网页时，会显示 MySQL 的配置，但我使用的是驱动程序 jdbc:sqlserver。任何人都请帮助我，因为我坚持了很多天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-08T14:46:50.933

jdbc:mysql 用于 mysql，它不适用于 sqlserver，我尝试使用它，但它给出了错误。我试过下面的命令，效果很好。

命令——导入

将数据从数据库表复制到 HDFS 文件系统

在下面的示例中，我们的数据库和 hdfs 配置为：

*   服务器名称：-labDB
*   数据库名称：- 演示
*   SQL 用户名：- sqoop
*   SQL 密码：- simp1e
*   驱动程序类名称：- com.microsoft.sqlserver.jdbc.SQLServerDriver
*   表：- dbo.customers
*   目标目录：/tmp/dbo-customer（HDFS 文件夹名称）

句法：

```
 sqoop import --connect jdbc:sqlserver://sqlserver-name \
      --username <username> \
      --password <password> \
      --driver   <driver-manager-class> \
      --table    <table-name> \
      --target-dir  <target-folder-name> 
```

样本：

```
 sqoop import --connect "jdbc:sqlserver://labDB;database=demo" \
       --username sqoop  \
       --password simp1e \
       --driver   com.microsoft.sqlserver.jdbc.SQLServerDriver \
       --table    "dbo.customer" \
       --target-dir  "/tmp/dbo-customer" 
```

[https://danieladeniji.wordpress.com/2013/05/06/hadoop-sqoop-importing-data-from-microsoft-sql-server/](https://danieladeniji.wordpress.com/2013/05/06/hadoop-sqoop-importing-data-from-microsoft-sql-server/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:46:38.683

您应该能够使用 --hive-import 标志导入表并在 Hive 中查看它 检查您是否已定义所有全局变量 HADOOP_HOME、SQOOP_HOME 和 HIVE_HOME 如果它不适合您，同时您可以始终使用 CREATE EXTERNAL TABLE 语法来利用 Hive 中的导入数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T07:47:11.200

您是否在 sqoop 命令行中使用了特定的 --hive-import 开关？

Sqoop import --connect 'jdbc:sqlserver://sqlservername.mycompany.com;username=hadoop;password=hadoop;database=hadoop' --table dataforhive **--hive-import**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-02T07:06:44.073

只需在 hdfs 的路径上创建一个外部配置单元表。或使用 --hive-import

两者中的任何一个都应该适合你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-05T08:19:30.683

我也有同样的问题，我可以将我的 MYSQL 表存储在 HDFS 中，但不能将它存储在 hive 中。我使用以下命令简单地将表导入配置单元中，而无需再次将其存储在 HDFS 中，它对我有用。

```
sqoop import --connect jdbc:mysql://ipAddress:portNo/mysqldatabase --table mysqltablename --username mysqlusername --password mysqlpassword --hive-import --hive-table hivedatabase.hivetablename 
```

# php - 在 drupal 7 中增加 cron 脚本的持续时间

> ID：11761987
> 
> 赞同：0
> 
> 时间：2012-08-01T14:58:35.053
> 
> 标签：php, drupal, drupal-7, cron

我有模块，需要一些时间来执行，但是 cron 给了我空白页（我不知道到底是什么，但我认为它超时了）。如何在 drupal 7 中增加 cron 执行的持续时间？

# python - Python 练习 +=

> ID：11761991
> 
> 赞同：-5
> 
> 时间：2012-08-01T14:58:46.007
> 
> 标签：python

```
k = 0
for z in xrange(x,y,2):  
    k += 1
print (k == 3) 
```

所以我试图找到满足这一点的 x & y 值。我得到 x = 1 和 y =2，因为 1+2=3=k。但是 += 部分让我失望了。谁能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:02:50.613

So the question is asking you, what are the first and second values needed in that `xrange` call so that k, having been incremented by one each time through, will end up with the value 3.

You should look up `xrange` in the documentation, paying attention to what each of the parameters does (not forgetting the third parameter which is set to 2 here).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:01:58.990

In order to see what `+=` actually does, try the following:

```
a = 0
a+=1  # (0+1)
print (a) # 1 
a += 3 # (1+3)
print (a) # 4 
```

Hopefully you can use that knowlege in conjuction with the documentation for the [range](http://docs.python.org/library/functions.html#range) function to figure out your problem (for this problem, you can view `xrange` and `range` as equivalent).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:08:32.540

因此，您实际上要做的是构造一个`xrange`将准确返回 3 个数字的对象。

前两个参数`xrange`是起始值（对于您的示例来说可以是任何值）和结束值（实际上是永远不会在范围内的最小值。）给定您选择的任何起始值，您需要选择一个结束值，以便从起始值开始的范围，每次递增 2，将包含 3 个值。

解决方案留给读者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T15:09:00.790

解释：xrange(a,b,c); a是开始，b是结束，c是步骤。例如，xrange(0,10,1) 表示从 0 开始，然后按 1 计数，直到达到 10，然后停止

解释：+=; a += b: 是说取值 a 并将 b 添加到它。

x = 1 和 y = 2 对您不起作用，因为您从 1 开始，然后将 2 添加到它，得到 3。这高于 y (2) 所以它停止了。因此，循环只发生一次，所以 k 的值为 1。

# r - 如何从工作区中只清除几个特定对象？

> ID：11761992
> 
> 赞同：175
> 
> 时间：2012-08-01T14:58:54.820
> 
> 标签：r

我想从工作区中删除一些数据。我知道“清除所有”按钮将删除所有数据。但是，我只想删除某些数据。

例如，我在数据部分中有这些数据框：

```
data
data_1
data_2
data_3 
```

我想删除`data_1`,`data_2`和`data_3`, 同时保留`data`.

我试过`data_1 <- data_2 <- data_3 <- NULL`了，它确实删除了数据（我认为），但仍将其保留在工作区中，所以这不是我想要做的。

* * *

## 回答 #1

> 赞同：264
> 
> 时间：2012-08-01T15:00:45.427

您将通过键入找到答案`?rm`

```
rm(data_1, data_2, data_3) 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-08-01T16:11:45.107

删除一整套类似名称的对象的有用方法：

```
rm(list = ls()[grep("^tmp", ls())]) 
```

从而删除名称以字符串“tmp”开头的所有对象。

编辑：遵循 Gsee 的评论，利用`pattern`论点：

```
rm(list = ls(pattern = "^tmp")) 
```

编辑：回答 Rafael 评论，仅保留对象子集的一种方法是使用特定模式命名要保留的数据。例如，如果您想删除名称不以您开头的所有对象，`paper`请发出以下命令：

```
rm(list = grep("^paper", ls(), value = TRUE, invert = TRUE)) 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-06-04T09:52:45.710

以下命令会做

```
rm(list=ls(all=TRUE)) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-07-30T23:55:06.500

使用以下命令

```
remove(list=c("data_1", "data_2", "data_3")) 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-10-27T20:35:14.553

您可以使用`apropos`用于使用部分名称查找对象的功能。

```
rm(list = apropos("data_")) 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-10-14T19:15:26.857

1.  在 RStudio 中，确保`Environment`选项卡处于`Grid`（不是`List`）模式。

2.  勾选要从环境中移除的对象。

3.  单击扫帚图标。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-03-02T12:41:24.040

如果您只想删除一组变量中的一个，那么您可以创建一个列表并仅保留您需要的变量。rm 函数可用于删除除“数据”之外的所有变量。这是脚本：

```
0->data
1->data_1
2->data_2
3->data_3
#check variables in workspace
ls()
rm(list=setdiff(ls(), "data"))
#check remaining variables in workspace after deletion
ls()

#note: if you just use rm(list) then R will attempt to remove the "list" variable. 
list=setdiff(ls(), "data")
rm(list)
ls() 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-06-09T00:50:02.943

```
paste0("data_",seq(1,3,1)) 
# makes multiple data.frame names with sequential number
rm(list=paste0("data_",seq(1,3,1))
# above code removes data_1~data_3 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-11-28T14:07:52.137

如果您使用的是 RStudio，请考虑*永远不要使用该`rm(list = ls())`方法！**相反，您应该围绕经常使用 ++ 快捷方式重新启动 R 会话来构建您的`Ctrl`工作流程`Shift`。`F10`这是核对当前用户定义变量集和清除加载的包、设备等的最快方法。通过采用这种习惯，您的工作的可重复性将显着提高。

请参阅(h/t @kierisi) 的 Rstudio 社区上的[这个出色的帖子](https://community.rstudio.com/t/first-line-of-every-r-script/799?u=jessemaegan)，以进行更彻底的讨论（主要要点已被我已经陈述过）。

我必须承认我自己最初几年的 R 编码特色脚本以`rm`“技巧”开头——我写这个答案是为了给其他可能开始 R 职业生涯的人提供建议。

*当然，这有合法的用途——很像`attach`——但新手用户将在以后越过这座桥得到更好的服务（IMO）。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-04-22T13:53:25.963

清除所有数据：

点击`Misc>Remove all objects`。

你很高兴。

要清除控制台：

点击`edit>Clear console`。

不需要任何代码。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-04-29T01:31:01.800

你也可以使用 tidyverse

```
# to remove specific objects(s)
rm(list = ls() %>% str_subset("xxx")) 
# or to keep specific object(s)
rm(list = setdiff(ls(), ls() %>% str_subset("xxx"))) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-03T01:31:28.043

添加另一种方式，使用 ls() 和 remove()

ls() 返回一个字符串向量，给出指定环境中对象的名称。

使用 ls() 创建要从环境中删除的对象列表，然后使用 remove() 将其删除。

```
remove(list = ls()[ls() !=  "data"]) 
```

# php - 同一域上的 php 和 .net 站点之间的共享登录

> ID：11761993
> 
> 赞同：0
> 
> 时间：2012-08-01T14:59:01.393
> 
> 标签：php, .net

我们正在为客户开发一个网站，我们正在使用 PHP 开发前端产品网站，并且有一个名为“store”的子域用于在线订购功能。但是商店子域是用 .net 构建的。

用户去商店时如何保持登录状态？前端和商店都使用相同的身份验证服务，所以这不是问题。但是我没有使用 .net 的经验，所以我可以弄清楚哪些是会话 cookie 值。所以我会将它们设置为特定于域的并且它会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:04:03.250

我会将会话存储在数据库中，并且两个实例都将使用同一个数据库，通过从 www.site.com 和 store.site.com 之间的共享 cookie 读取的会话 ID 读取会话数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:02:36.503

Either store information about login on the server somewhere.

Or you can just add a cookie to the user's browser and read that in both placed.

# c# - 格式错误的 TCP 请求

> ID：11761999
> 
> 赞同：0
> 
> 时间：2012-08-01T14:59:21.497
> 
> 标签：c#, windows, wcf, tcp

我使用 C# 中的 WCF 服务从我的 Windows 计算机建立到 Apple 服务器的 TCP 连接，我收到一个成功的响应并且服务器执行必要的操作。

但是，当 Mac 在我连接到它、收到我的成功响应并关闭连接后尝试连接到同一个 TCP 服务器时，就会出现问题。当 Mac 跟踪我的请求时，它会显示我的“格式错误的请求”，并且 Mac 无法执行连接。我仍然能够执行 TCP 连接并收到成功的响应；但是，根据 Mac 跟踪与该服务器的连接，我的所有请求都“格式错误”。

如何正确格式化我的请求以从 Windows 连接到 Apple 服务器？任何建议将不胜感激。