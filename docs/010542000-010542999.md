# StackOverflow 问答 10542000-10542999

# php - 如何从具有不同操作的混合表单中“获取”正确的值？

> ID：10542007
> 
> 赞同：1
> 
> 时间：2012-05-10T20:56:26.367
> 
> 标签：php, html, forms

当我写这样的表格时：

```
<table>
  <form>
  <tr>
    <td><input name="newText" type="text" .../></td>
    <td><input type="submit" .../></td>
  </tr>
  </form>
  (repeat the above row several times for dynamically generated content)
</table> 
```

那是不正确的 HTML（在 IDE 中生成警告错误），我不确定它是否能在所有浏览器中正常工作。

我不能将它们放在单独的表格中，因为那只会破坏所有格式；td 的宽度根据内容在每个表中有所不同。

因此，我将整个表格从表格中取出，如下所示：

```
<form>
<table>
  <tr>
    <td><input type="text" name="newText"/></td>
    <td><input type="submit" name="action" value="action1"/></td>
  </tr>
  (repeat rows several times with different values for the 'action' button)
</table>
</form> 
```

现在的问题是，最后生成的记录超出了`newText`值，因此当从第一行提交表单时，提交的参数如下所示：

> 新文本 = 文本
> 1 动作 = 动作 1新文本
> =文本 2 新文本 = 文本 3 新文本 =
> 文本 4

所以我知道我需要表现`action1`，但我得到的只是`text4`价值！

我如何获得正确的价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:35:52.887

你有没有尝试过：

```
newText2 = text2
newText3 = text3
.
.
. 
```

或者`name="newText[]"`

# android - 跟踪触摸计数

> ID：10542008
> 
> 赞同：1
> 
> 时间：2012-05-10T20:56:28.703
> 
> 标签：android, android-widget

感谢您花时间看这个问题。我正在尝试一些 android 编程，但我碰壁了；不知道如何解决它。我尝试仅在触摸计数为奇数时为特定实体激活动画。那就是`touchCount%2 != 0`。

```
public boolean onTouch(View v, MotionEvent event){

    ArrayList<TextView> textToDance = new ArrayList<TextView>();
    textToDance.add((TextView)findViewById(R.id.CAD5));
    textToDance.add((TextView)findViewById(R.id.CAD10));
    textToDance.add((TextView)findViewById(R.id.CAD20));
    textToDance.add((TextView)findViewById(R.id.CAD50));
    textToDance.add((TextView)findViewById(R.id.CAD100));

    switch (event.getAction()){
        case MotionEvent.ACTION_DOWN:
            for(TextView txtAnimate: textToDance){

                if(event.getRawX()<= txtAnimate.getX()+txtAnimate.getMeasuredWidth() && event.getRawX()>=txtAnimate.getX()){
                    if(event.getRawY()<= txtAnimate.getY()+105+txtAnimate.getMeasuredHeight() && event.getRawY()>=txtAnimate.getY()+105){
                        helpAnimate(txtAnimate, 0);
                    }
                }

            }

        break;

        case MotionEvent.ACTION_MOVE:
            Log.d("MOVE","MOVE");
        break;

        case MotionEvent.ACTION_UP:
            Log.d("UP","UP");
        break;

        default:
            break;
    }
    return true;
} 
```

我试图实现一个 HashMap 但该地图被重置所有 onTouch 被调用。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:30:54.893

首先，你想在`onTouch`方法之外初始化你的数组。

```
ArrayList<TextView> textToDance = new ArrayList<TextView>();
textToDance.add((TextView)findViewById(R.id.CAD5));
textToDance.add((TextView)findViewById(R.id.CAD10));
textToDance.add((TextView)findViewById(R.id.CAD20));
textToDance.add((TextView)findViewById(R.id.CAD50));
textToDance.add((TextView)findViewById(R.id.CAD100)); 
```

然后你可以创建一个地图并用零计数值初始化它并注册一个 onTouchListener （假设它是你的`Activity`）

```
HashMap<TextView,Integer> myMap = new HashMap<TextView,Integer>();
for (TextView tv : textToDance){
    tv.setOnTouchListener(this);
    myMap.put(tv,0);

} 
```

然后在`onTouch`你会有类似的东西......

```
public boolean onTouch(View v, MotionEvent event){
    switch (event.getAction()){
       case MotionEvent.ACTION_DOWN:
          if (myMap.contains(v)){
              myMap.put(v, myMap.get(v) + 1;
          }
       break; 
```

这可能不是最理想的方式，但它应该足以让您开始实现您想要做的事情。

# c++ - 为什么 Glibmm/Gtkmm 不包含 Glib::RefPtr 的一元解引用运算符 *？

> ID：10542009
> 
> 赞同：11
> 
> 时间：2012-05-10T20:56:29.557
> 
> 标签：c++, gtk, smart-pointers, glib, gtkmm

Glib::RefPtr 允许通过 ' `->`' 而不是通过 ' `*`' 取消引用。为什么是这样？

我当然可以：

```
 class Foo {};
 Glib::RefPtr<Foo> fooPtr;

 fooPtr.operator->(); 
```

文档特别提到他们将 operator*() 排除在外。但他们没有就原因提供任何指导。

***为了清楚起见，编辑了示例***：

我已经看到它争辩说“*你永远不需要取消引用”一个*~~RefPtr~~ ，但是 IMO 这似乎是*违反直觉*的，因为任何想要与动态和堆栈分配的对象一起使用的函数都需要最低公分母接口，即通过-引用。

举个例子：

```
struct Foo 
{ 
    void print() { printf( "Success" ); } 
};

void myFunc( const Foo & foo ) { foo.print(); }

int main()
{
    Foo               foo0;
    Glib::RefPtr<Foo> foo1Ptr( new Foo );

    myFunc(  foo0    );
    myFunc( *foo1Ptr ); // error, no operator*()

    return 0;
} 
```

有人知道 Glib 团队为什么要担任这个职位吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T10:22:55.987

> 某些函数可能将对象或对象引用作为参数。

不，如果一个对象应该通过 RefPtr 使用，那么在没有 RefPtr 的情况下，任何函数都不会（或任何函数都不应该）使用它。没有 operator* 可以避免人们这样做，这意味着 API 被迫正确，这意味着由于不使用 RefPtr 而导致的内存管理错误更少。它不存在是因为人们会滥用它，而且人们已经很难掌握智能指针的窍门了。

如果你有一个你认为可以通过 RefPtr::operator*() 解决的真正问题，那么你可能会提到实际问题，以便我们可以（可能）展示你不想在那里使用 operator*() .

# sql - 表属性中的外键检查约束

> ID：10542011
> 
> 赞同：0
> 
> 时间：2012-05-10T20:56:31.800
> 
> 标签：sql

我正在尝试在 SQL 表中设置一个属性，该属性由用户输入和部分外键指定的部分 id 组成。例如：员工将有一个 8 字符长的 id，前 4 位是用户将输入的部分，后 4 个字符将引用分支表以使用分支 id。

看起来我需要使用 CHECK 约束来执行此操作，但我不确定如何强制执行属性值的第二部分以确保它在另一个表中。

我希望问题的措辞正确，因为我仍在学习 SQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:53:57.653

> 看起来我需要使用 CHECK 约束来执行此操作，但我不确定如何强制执行属性值的第二部分以确保它在另一个表中。

为了“查看”另一个表，您需要在 CHECK 约束中使用 SELECT 语句。据我所知，大多数 SQL dbms 不会让你这样做。（否则，标准 SQL 将使用断言；我不确定是否*有任何*SQL dbms 支持断言。）

相反，使用两列——一列用于用户提供的四个字符，另一列用于表示分支的最后四个字符。您可以（并且应该）使用

*   对存储用户提供的值的列的 CHECK 约束，以保证它是四个字符而不是更少，
*   对branches.branch_id 列的 CHECK 约束，以保证它是四个字符且不少于，并且
*   branch_id 上的外键约束，引用表分支。考虑一下这是否应该级联更新和删除。

外键约束为您提供的行为保证很重要。他们保证您在新表中为 branch_id 使用的任何值都将存在于分支表中，并且如果使用的 branch_id 发生更改，该更改也将记录在您的新表中。（如果您级联更新。）如果您将两个值捆绑到单个列中，您将不会获得这些保证。

> 最后 4 个字符将引用分支表以使用分支 ID。

您可以通过这种方式*复制*分支 id，但不能引用它。*引用*是数据库设计中的一个技术术语；它与外键引用有关。

# php - PHP 命名空间和“使用”

> ID：10542012
> 
> 赞同：130
> 
> 时间：2012-05-10T20:56:40.080
> 
> 标签：php, namespaces

我在命名空间和`use`语句方面遇到了一些麻烦。

我有三个文件`ShapeInterface.php`：`Shape.php`和`Circle.php`.

我正在尝试使用相对路径来执行此操作，因此我已将其放入所有类中：

```
namespace Shape; 
```

在我的圈子课程中，我有以下内容：

```
namespace Shape;
//use Shape;
//use ShapeInterface;

include 'Shape.php';
include 'ShapeInterface.php';    

class Circle extends Shape implements ShapeInterface{ .... 
```

如果我使用这些`include`语句，我不会出错。如果我尝试`use`我得到的陈述：

> 致命错误：在第 8 行的 /Users/shawn/Documents/work/sites/workspace/shape/Circle.php 中找不到类“Shape\Shape”

有人可以就这个问题给我一些指导吗？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-05-10T21:17:29.757

[`use`运算符](http://uk3.php.net/manual/en/language.namespaces.importing.php)用于为类、接口或其他名称空间的名称提供别名。大多数`use`语句引用您想要缩短的命名空间或类：

```
use My\Full\Namespace; 
```

相当于：

```
use My\Full\Namespace as Namespace;
// Namespace\Foo is now shorthand for My\Full\Namespace\Foo 
```

如果`use`运算符与类或接口名称一起使用，则它具有以下用途：

```
// after this, "new DifferentName();" would instantiate a My\Full\Classname
use My\Full\Classname as DifferentName;

// global class - making "new ArrayObject()" and "new \ArrayObject()" equivalent
use ArrayObject; 
```

不要将操作符与[自动加载](http://php.net/autoload)`use`混淆。通过注册一个自动加载器（例如使用）来自动加载一个类（不需要）。您可能想阅读[PSR-4](http://www.php-fig.org/psr/psr-4/)以了解合适的自动加载器实现。`include``spl_autoload_register`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-02-24T17:16:18.530

如果您需要将代码排序到命名空间中，只需使用关键字`namespace`：

文件1.php

```
namespace foo\bar; 
```

在文件 2.php

```
$obj = new \foo\bar\myObj(); 
```

您也可以使用`use`. 如果在 file2 你把

`use foo\bar as mypath;`

您需要使用`mypath`而不是`bar`文件中的任何位置：

```
$obj  = new mypath\myObj(); 
```

使用`use foo\bar;`等于`use foo\bar as bar;`。

# spine.js - Spine 没有代理事件处理程序

> ID：10542017
> 
> 赞同：1
> 
> 时间：2012-05-10T20:56:57.000
> 
> 标签：spine.js

我一直在关注我发现的 javascript[示例代码。](http://addyosmani.com/resources/spinebitly/)看起来示例和当前版本的 Spine 有点不同，因为我的代码几乎完全相同。上涨是我的电话之一没有得到代理。

```
exports.UrlsList = Spine.Controller.create({
  elements: {
      ".items": "items",
      "form": "form",
      "input": "input"
  },
  events: {
    "submit form": "create"
  },

  proxied: ["render", "addAll", "addOne"],

  init: function(){
    Url.bind("create",  this.addOne);
    Url.bind("refresh", this.addAll);
  },

  addOne: function(url){
    var view = Urls.init({item: url});  // The is another controller
    this.items.append(view.render().el); //This is where the error occurs
  },

  addAll: function(){
    Url.each(this.addOne);
  },

  create: function(e){
    e.preventDefault();
    var value = this.input.val();

    if (value) {
      Url.create({content: value});
    }

    this.input.val("");
    this.input.focus();
  }
}); 
```

当 addOne 函数被调用时，它是在 Url 的上下文中调用的，而不是在当前类的上下文中。即使 addOne 在代理列表中，它似乎也没有代理任何内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:15:05.433

Spine`proxied`最近不再使用阵列。

相反，您应该能够删除数组并使用该`proxy`函数：

```
init: function(){
    Url.bind("create", this.proxy(this.addOne));
    Url.bind("refresh", this.proxy(this.addAll));
},

addAll: function(){
    Url.each(this.proxy(this.addOne));
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:12:17.530

这就是我最近喜欢 CoffeeScript 的原因，因为您可以使用粗箭头来获得相同的效果：

```
init: ->
    Url.bind("create", @addOne)

addOne: (item) =>
    # do your stuff with item in the context of the @ you would expect 
```

# python - python：函数参数更新问题

> ID：10542019
> 
> 赞同：1
> 
> 时间：2012-05-10T20:57:09.243
> 
> 标签：python, numpy

我有一个 python 函数`func(A)`。`A`是一个`numpy.array`并且可能很大，以至于我会犹豫一遍又一遍地复制它。这`func(A)`想改变A的内容。我知道这是一个python新手问题。我以前用C编程，它可以通过指针来完成。如何更改 的内容，`A`以便更改在 的范围之外也有效`func(A)`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T21:00:26.473

tl; dr 在你的情况下，它基本上已经是。除非您在方法中为标签 A 分配新值，否则 A 将是对您传递的对象的引用，这意味着对 A 的任何修改都会在您使用它的其他任何地方更改原始对象。

前任：

```
>>> def foo(A):
...     print A[0]
...     A[0] = 2
...     print A[0]
...
>>> a = [0, 1, 2]
>>> foo(a)
0
2
>>> a
[2, 1, 2]
>>> def bar(A):
...     print A[0]
...     A = [0, 1, 2]
...     A[0] = 2
...     print A[0]
...
>>> a = [0, 1, 2]
>>> bar(a)
0
2
>>> a
[0, 1, 2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:00:18.873

如果传递给 A 的参数是全局参数，则可以更改参数 A 的值。另一种方法是将变量从函数传递到函数。根据我在 python 中的理解，这样做时不会复制对象。

# sql - 可以在 ms sql server 中创建唯一约束。在表达式字段中获取错误

> ID：10542020
> 
> 赞同：1
> 
> 时间：2012-05-10T20:57:14.240
> 
> 标签：sql, unique-constraint

我需要创建一个唯一约束，因为我在数据库中的列必须由唯一值组成。类型是 varchar。下面是我的表达：

```
 ALTER TABLE Visit ADD CONSTRAINT constr1 UNIQUE NONCLUSTERED (time) 
```

但是得到一个错误，这个表达式是错误的

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:00:29.313

根据这个[SQL Server 2005 如何创建唯一约束？](https://stackoverflow.com/questions/64981/sql-server-2005-how-create-a-unique-constraint)第一个答案说你需要一个列名，但我看到你写`time`了哪个是关键字。如果您有一个名为 的列`time`，请改写`[time]`:)

# android - 如何在移动设备上使用 http-equiv 刷新？

> ID：10542021
> 
> 赞同：0
> 
> 时间：2012-05-10T20:57:23.953
> 
> 标签：android, html, jquery-mobile, refresh, meta-tags

如何在移动浏览器中刷新 HTML5 页面？我在桌面版本中使用它并且工作正常：

```
<meta http-equiv="refresh" content="60;url=http://www.example.com" /> 
```

有什么方法可以在移动浏览器中使用这样的东西吗？如果这是相关的，我也使用 jquery mobile。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:34:58.633

我已经使用 JavaScript 来解决这个问题。它在 Android 上运行良好，我想我已经在 Opera Mobile 中对其进行了测试（我不确定）。

我的代码是这样的：

```
setTimeout(function() {
location.replace('./order_list');
}, 5000); 
```

# c++ - 将 QSetting 值转换为 StdString

> ID：10542026
> 
> 赞同：1
> 
> 时间：2012-05-10T20:57:44.883
> 
> 标签：c++, string, qt, ini

目前，我在 ini 文件中保存了一个数据，它用于 QSetting 类。我想知道，如何在不使用 qt 的情况下将其转换为 std::string。有谁知道如何确定代码以及如何解码？

我的数据：

```
 dataID="\x1\0\0\0\xd0\x8c\x9d\xdf\x1\x15\xd1\x11\x8cz\0\xc0O\xc2\x97\xeb\x1\0\0\0Z\xa3\xa3\xc9\x18\xb5>M\xa9=)\xb4\xda\xfb{\xfe\x4\0\0\0\x2\0\0\0\0\0\x3\x66\0\0\xc0\0\0\0\x10\0\0\0|\x16>\x17\x96\xda\xc4-O\xe9\x1f!\\\aAW\0\0\0\0\x4\x80\0\0\xa0\0\0\0\x10\0\0\0\x45\xf4K\x9e\xc2k$\f\xd2\xcbK\b\xf4\xd3\xdf}(\0\0\0\xb2\xb2\xf1\x13[sy\r\xeb\xa7\x96l\x8d\xd7\xa4\xccJ\xf6M\xc1\xf3U3W\xe4\xf7\xa6\x1a\x86s`v\xc2\x8d\x99\xdf!8\xd0G\x14\0\0\0\x35\x93\xeb\xcb\xa9\x16\xadXI\xe6\x46wY\x7f\x32\xb8\xd9\xec\xfb*" 
```

我想要做

```
std::string data = convert(dataID); 
```

其中 convert 是一个纯 c++ 函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:12:24.627

> 有谁知道如何确定代码以及如何解码？

是的，你可以做到。[阅读这份文件](http://doc.qt.nokia.com/4.7/datastreamformat.html)。

请记住，QT 以 UTF16 编码将字符串数据存储在数据流中，而 std::string 存储 8 位字符串。因此，您要么需要一些编码转换例程（UTF16->8bit），要么只删除所有非 ASCII 字符。

# c# - 错误地排除了 Visual Studio 中的二进制引用

> ID：10542030
> 
> 赞同：0
> 
> 时间：2012-05-10T20:58:07.667
> 
> 标签：c#, visual-studio-2010

我错误地在我的 Visual Studio 项目的 bin 中点击了“从项目中排除”。有什么办法可以恢复吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T21:00:09.317

在解决方案资源管理器的顶部，单击“显示所有文件”，找到您排除的重影文件，然后右键单击它并选择“包含在项目中”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T21:01:26.090

在最顶部的解决方案资源管理器中，第二个按钮将切换“显示所有文件”。之后您可能必须点击刷新按钮。无论如何，这将向您显示所有文件，即使是那些未包含在您的项目中的文件。右键单击该文件并从上下文菜单中选择包含在项目中以将其添加回您的项目。

# javascript - 使用流水线处理的服务器端处理

> ID：10542041
> 
> 赞同：4
> 
> 时间：2012-05-10T20:58:43.520
> 
> 标签：javascript, jquery, ajax, datatables, pipeline

默认情况下，此功能适用于`$_GET`. 基于[这个讨论](http://datatables.net/forums/discussion/691/pipeline-post/p1)，我修改了[这个函数](http://datatables.net/release-datatables/examples/server_side/pipeline.html)并得到了类似下面的东西。现在的问题是，Firebug 给出了错误信息

> json.aaData 未定义@第 99 行

这是行（位于代码末尾）：

```
json.aaData.splice( 0, iRequestStart-oCache.iCacheLower ); 
```

PHP 端响应，此表 100% 工作，无需流水线。但是当我启用流水线时会收到此错误：

[http://screencast.com/t/GOJzPHq3kg](http://screencast.com/t/GOJzPHq3kg)

```
function fnDataTablesPipeline ( sSource, aoData, fnCallback ) {
    var iPipe = 5; /* Ajust the pipe size */

    var bNeedServer = false;
    var sEcho = fnGetKey(aoData, "sEcho");
    var iRequestStart = fnGetKey(aoData, "iDisplayStart");
    var iRequestLength = fnGetKey(aoData, "iDisplayLength");
    var iRequestEnd = iRequestStart + iRequestLength;
    oCache.iDisplayStart = iRequestStart;

    /* outside pipeline? */
    if ( oCache.iCacheLower < 0 || iRequestStart < oCache.iCacheLower || iRequestEnd > oCache.iCacheUpper )
    {
        bNeedServer = true;
    }

    /* sorting etc changed? */
    if ( oCache.lastRequest && !bNeedServer )
    {
        for( var i=0, iLen=aoData.length ; i<iLen ; i++ )
        {
            if ( aoData[i].name != "iDisplayStart" && aoData[i].name != "iDisplayLength" && aoData[i].name != "sEcho" )
            {
                if ( aoData[i].value != oCache.lastRequest[i].value )
                {
                    bNeedServer = true;
                    break;
                }
            }
        }
    }

    /* Store the request for checking next time around */
    oCache.lastRequest = aoData.slice();

    if ( bNeedServer )
    {
        if ( iRequestStart < oCache.iCacheLower )
        {
            iRequestStart = iRequestStart - (iRequestLength*(iPipe-1));
            if ( iRequestStart < 0 )
            {
                iRequestStart = 0;
            }
        }

        oCache.iCacheLower = iRequestStart;
        oCache.iCacheUpper = iRequestStart + (iRequestLength * iPipe);
        oCache.iDisplayLength = fnGetKey( aoData, "iDisplayLength" );
        fnSetKey( aoData, "iDisplayStart", iRequestStart );
        fnSetKey( aoData, "iDisplayLength", iRequestLength*iPipe );

        jQuery.post( sSource, aoData, function (data) { 
            /* Callback processing */
            oCache.lastJson = jQuery.extend(true, {}, data);

            if ( oCache.iCacheLower != oCache.iDisplayStart )
            {
                data.aaData.splice( 0, oCache.iDisplayStart-oCache.iCacheLower );
            }
            data.aaData.splice( oCache.iDisplayLength, data.aaData.length );

            fnCallback(data)
        },"json" );
    }
    else
    {
        json = jQuery.extend(true, {}, oCache.lastJson);
        json.sEcho = sEcho; /* Update the echo for each response */
        json.aaData.splice( 0, iRequestStart-oCache.iCacheLower ); // <- this line
        json.aaData.splice( iRequestLength, json.aaData.length );
        fnCallback(json);
        return;
    }
} 
```

我错过了什么？有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T22:58:59.263

`json`获取其属性 inside `fnDataTablesPipeline()`，`oCache.lastJson`但仅当`bNeedServer`为真时。

如果`fnDataTablesPipeline()`从未调用过或已调用过但`bNeedServer`仍然为 false，则该行将`oCache.lastJson = jQuery.extend(true, {}, data);`不会被执行并且`json.aaData.splice()`会失败。

您需要处理`oCache.lastJson`未填充（或仅部分填充）的情况：

*   `oCache.lastJson`通过使用默认属性初始化
*   通过在尝试使用属性之前测试属性的存在并采取相应的行动，

例如：

```
else{
    if(oCache.lastJson.aaData) {
        json = jQuery.extend(true, {}, oCache.lastJson);
        json.sEcho = sEcho; /* Update the echo for each response */
        json.aaData.splice( 0, iRequestStart-oCache.iCacheLower );
        json.aaData.splice( iRequestLength, json.aaData.length );
        fnCallback(json);
    }
} 
```

我无法判断这是否 100% 正确。您可能需要将 less 放在`if`子句中，例如，仅禁止开头的两行可能是合适的`json.aaData.splice...`。

# html - 为什么我的背景图片不显示在 IE 中？

> ID：10542043
> 
> 赞同：0
> 
> 时间：2012-05-10T20:58:52.273
> 
> 标签：html, css

我一直在用 Wordpress 设计一个网站，并开始在不同的浏览器中进行测试，但令人沮丧的是，我发现我的标题的主要背景图像没有在 IE9、IE8 或 IE7 中显示——而且很可能在 IE6 中也没有.

我对 CSS 比较陌生，无法弄清楚问题所在。我一直在搜索*许多*帮助主题和论坛，并没有找到我的特定问题的答案，所以如果有人愿意帮助我，我将非常感激。

提前致谢！

这是该网站的链接：[http ://www.godlygirlhood.org/sandbox](http://www.godlygirlhood.org/sandbox)

这是标题的 CSS 代码：

```
#branding {
    width: 1015px;
    height: 559px;
    margin: auto;
    background-color: #f2e9b3;
    background-image: url(http://godlygirlhood.org/sandbox/wp-content/uploads/2012/01/GG-header_1015px.png);
    background-repeat: no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:03:55.813

看起来您使用的是 HTML5 标头标记，该标记在 9 之前的 IE 版本中不受支持。您可以使用诸如 Modernizr 之类的 polyfill 脚本来添加对标记的支持，或者将标头标记更改为 div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:04:15.983

它在 IE9 中显示对我来说很好。尝试清除缓存，看看是否可以解决问题。这可能只是一个缓存问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T17:31:44.943

根据@GeoffWarren 的建议和随后的研究，我发现了一个 Wordpress 插件，可以轻松处理 IE8 及更低版本不支持的所有 HTML5 标签：[http](http://wordpress.org/extend/plugins/html5shiv/) : //wordpress.org/extend/plugins/html5shiv/正在使用 WP 并且在使用 header 标签时遇到类似的困难，这将很快解决问题。

谢谢@GeoffWarren 和@JamesJohnson 的建议和帮助。

# linux - 为什么这是语法错误？

> ID：10542044
> 
> 赞同：1
> 
> 时间：2012-05-10T20:59:02.097
> 
> 标签：linux, bash, shell

我有一个bash函数如下：

```
function folderSize{
    du -hs | awk '{print $1}'
}
folderSize 
```

当我运行它时，我收到以下错误：

```
./size.sh: line 2: syntax error near unexpected token `du' ./size.sh:

line 2: `   du -hs | awk "{print $1}"' 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T21:03:02.133

{ 之前需要空格。

```
function folderSize {
  du -hs | awk '{print $1}'
} 
```

此外，您调用该函数的方式只是`folderSize`，没有美元符号，没有括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:03:51.690

我不确定您的变体的语法是否正确。我通常这样做有点像这样：

```
folderSize() {
  du -hs | awk '{print $1}'
}
folderSize 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T21:04:25.527

```
function folderSize {
    du -hs $1 | awk '{print $1}'
}

folderSize '.' 
```

# python - 在 python 排序列表中匹配并插入

> ID：10542051
> 
> 赞同：2
> 
> 时间：2012-05-10T20:59:36.920
> 
> 标签：python, list, sorting, insert

我有一个排序列表，如果它与列表中的模式匹配，我想插入一个字符串。

```
Example :

Sorted List
['Amy Dave', 'Dee Waugh', 'Eva A', 'Gin', 'Joy Kola', 'Kay Min', 'Mae', 'Pam Deing'] 
```

以上列表按排序顺序排列。我需要按排序顺序插入一个名称，如果该名称已经存在，那么它应该插入到现有名称之前。

```
Example 
Name  'Eva Henry' 
```

由于 Eva 已经在列表中，因此在匹配模式后，应将其插入“Eva A”之前。如果名称不匹配，则应按排序顺序将其插入列表中。输出应该是这样的：

```
 Sorted List
    ['Amy Dave', 'Dee Waugh', 'Eva Henry', 'Eva A', 'Gin', 'Joy Kola', 'Kay Min', 'Mae', 'Pam Deing'] 
```

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T21:41:21.030

在我看来，没有愚蠢的问题。如果名字是全名，只有名字是排序的关键，总有一些有趣的想法和解决问题的需要。您可以这样使用 bisect：

```
>>> fullnames = ['Amy Dave', 'Dee Waugh', 'Eva A', 'Gin', 'Joy Kola', 'Kay Min', 'Mae', 'Pam Deing']
>>> names = [full.split()[0] for full in fullnames]
>>> names
['Amy', 'Dee', 'Eva', 'Gin', 'Joy', 'Kay', 'Mae', 'Pam'] 
```

因此，我们有一个平行的名字列表，将用于查找另一个全名的位置`xx`（名字的提取`x`方式与前一种情况相同）：

```
>>> xx = 'Eva Henry'
>>> x = xx.split()[0]
>>> x
'Eva' 
```

现在，使用 bisect 在名字列表中找到想要的位置：

```
>>> import bisect
>>> pos = bisect.bisect_left(names, x) 
```

然后更新两个列表：

```
>>> fullnames.insert(pos, xx)
>>> names.insert(pos, x) 
```

结果如下：

```
>>> fullnames
['Amy Dave', 'Dee Waugh', 'Eva Henry', 'Eva A', 'Gin', 'Joy Kola', 'Kay Min', 'Mae', 'Pam Deing']
>>> names
['Amy', 'Dee', 'Eva', 'Eva', 'Gin', 'Joy', 'Kay', 'Mae', 'Pam'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:14:50.283

这是我的解决方案，我认为它很容易

：

```
#spliting against whitespace
first_name = name.split()

#Stroting the first name of the user
first_name = first_name[0]

#Matching the pattern 
match = re.compile(first_name,re.IGNORECASE)
ind = ''

for i in sort_names:
        if re.match(match, i):
                ind = sort_names.index(i)
                break
                #If name matches for the first time end the loop and do insert name in the sorted list

if ind != '':
        sort_names.insert(ind, val)
        print ""
        print sort_names
else:
        bisect.insort(sort_names, val)
        print sort_names 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T21:35:17.397

好的，我会对此投反对票，但我不能让它站起来。这是一个糟糕的设计模式，如果这是家庭作业，你应该强烈抱怨。

我会将名称存储为具有频率（'Fred Bloggs'，2）的元组，或者使用 dict() 或其他东西：只是任何东西，但请不要这个。谷歌'python dict（）'。

编辑：实际上没有订购 dict() 是吗？哦，好吧，我在生活中失败了。耸耸肩。

编辑：我的意思是元组列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T21:24:42.707

这是一个完整的答案，可以满足您的要求，无论多么荒谬。我没有测试任何边缘情况。

```
sorta_sorted_list = ['Amy Dave', 'Dee Waugh', 'Eva A', 'Gin', 'Joy Kola', 'Kay Min', 'Mae', 'Pam Deing']

print sorta_sorted_list

def insert_kinda_sorted(name, sorta_sorted_list):
    new_list = []
    fname = name.split()[0]
    inserted = False
    for index in range(len(sorta_sorted_list)):
        if not inserted:
            if sorta_sorted_list[index].split()[0] == fname:
                new_list.append(name)
                inserted = True
            if sorta_sorted_list[index] > name:
                new_list.append(name)
                inserted = True
        new_list.append(sorta_sorted_list[index])

    return new_list

sorta_sorted_list = insert_kinda_sorted('Eva Henry', sorta_sorted_list)
print sorta_sorted_list

sorta_sorted_list = insert_kinda_sorted('Joe Blow', sorta_sorted_list)
print sorta_sorted_list 
```

输出是：

```
['Amy Dave', 'Dee Waugh', 'Eva A', 'Gin', 'Joy Kola', 'Kay Min', 'Mae', 'Pam Deing']
['Amy Dave', 'Dee Waugh', 'Eva Henry', 'Eva A', 'Gin', 'Joy Kola', 'Kay Min', 'Mae', 'Pam Deing']
['Amy Dave', 'Dee Waugh', 'Eva Henry', 'Eva A', 'Gin', 'Joe Blow', 'Joy Kola', 'Kay Min', 'Mae', 'Pam Deing'] 
```

# c# - 从具体化的“System.Guid”类型到“System.Int32”类型的指定转换无效

> ID：10542055
> 
> 赞同：15
> 
> 时间：2012-05-10T20:59:48.217
> 
> 标签：c#, wcf, sql-server-2008, sql-server-2005, entity-framework-4

`The specified cast from a materialized 'System.Guid' type to the 'System.Int32' type is not valid.`

我们有几个 WCF 服务具有 Multiple 和`InstanceContextMode`Single 的并发模式。我们的架构专注于使用基于构造函数的依赖注入的松散耦合模型。这又是使用 Unity 2.0 实现的（每个服务的 web.config 具有在统一容器部分中定义的接口和类型之间的映射）。我们的依赖项之一是使用 Entity Framework 4 与 MSSql Server 通信的 DAL 程序集（数据访问层）。与数据库对话的类也包含在统一映射中。

当我们运行集成测试时，一切都很好。但是当我们转移到我们的性能环境来运行负载测试（2、3、4 个并发用户）时，我们开始看到以下错误：

`System.InvalidOperationException: The 'auth_token' property on 'Session' could not be set to a 'Int32' value. You must set this property to a non-null value of type 'Guid'.`

使用以下堆栈：

```
at System.Data.Common.Internal.Materialization.Shaper.ErrorHandlingValueReader`1.GetValue(DbDataReader reader, Int32 ordinal)
at System.Data.Common.Internal.Materialization.Shaper.GetPropertyValueWithErrorHandling[TProperty](Int32 ordinal, String propertyName, String typeName)
at lambda_method(Closure , Shaper )
at System.Data.Common.Internal.Materialization.Shaper.HandleEntityAppendOnly[TEntity](Func`2 constructEntityDelegate, EntityKey entityKey, EntitySet entitySet)
at lambda_method(Closure , Shaper )
at System.Data.Common.Internal.Materialization.Coordinator`1.ReadNextElement(Shaper shaper)
at System.Data.Common.Internal.Materialization.Shaper`1.SimpleEnumerator.MoveNext()
at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
at System.Linq.Queryable.First[TSource](IQueryable`1 source)
at MISoa.DataAccessLayer.Authentication.AuthenticationDB.RetrieveSession(Guid authToken)
at MISoa.DataAccessLayer.Authentication.AuthenticationAccess.RetrieveSession(String sessionToken) 
```

这是罪魁祸首方法：

```
public Session RetrieveSession(Guid authToken)
    {
        CheckDBContext();
        var sessions = (from r in _dbContext.Sessions
                where r.auth_token == authToken
                select r);
        return sessions.Count() > 0 ? sessions.First() : null;
    } 
```

`CheckDBContext`方法只是检查数据库上下文是否为空，如果是，则抛出自定义异常。

emdx 会话实体对象具有以下公共属性：

```
Guid auth_token
DateTime time_stamp
String user_id
String app_id 
```

所以，看起来有时上面的 linq 从数据库中返回一些其他对象，其中第一列是 an`int`而不是 a `guid`？如果是这样 - 为什么？我是否有多个线程覆盖彼此的数据库上下文的问题？顺便说一句 - 我们将实例化数据库上下文的代码抽象为一个单独的类（BaseDB），该类也由统一处理。所以，因为服务是单例的，所以我为每个人都有一个 BaseDB 实例，对吧？这是这里的问题吗？

哦，还有一件事。我们被告知我们将拥有 MSSql 2005，因此在 edmx 文件中我们拥有`ProviderManifestToken="2005"`. 但是我刚查了一下，我们性能数据库的服务器是2008版的。这是个问题吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:19:21.510

> 我是否有多个线程覆盖彼此的数据库上下文的问题？

是的。见这里：http: [//msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx)

引用上面链接中的大黄色框：

> 该类`ObjectContext`不是线程安全的。`ObjectContext`多线程场景下无法保证数据对象的完整性。

您可能需要考虑投入`[ThreadStaticAttribute]`您的`_dbContext`领域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:22:52.323

我怀疑当没有结果时会出现您的问题，并且在生成的 SQL 中的某处将 null value==0 用于 Guid 字段比较。尝试将比较作为字符串（两者都为 .ToString() ），看看是否能发现导致问题的情况。

# css - 浮动 div 不会完全展开

> ID：10542057
> 
> 赞同：1
> 
> 时间：2012-05-10T20:59:55.797
> 
> 标签：css, html, css-float

我正在尝试设计一个带有两个浮动的页面布局`divs`，我想将其用于我的内容区域和侧边栏。我的布局问题是我测试了其中一个浮动`divs`有很多文本内容，但它没有扩展以显示所有内容。最后一段似乎与我的页脚重叠

我已经添加`overflow: auto`到包含`div`但它似乎不起作用。有任何想法吗？

```
<body>

<div id="header">
</div><!--ends header-->

<div id="navbar">
</div><!--ends navbar-->

<div id="wrapper">

    <div id="content">

        <div class="post">
         <p> Long content tested here</p>
        </div><!--ends post-->

    </div><!--ends content-->

    <div id="sidebar">
    </div><!--ends sidebar-->

    <div id="footer">
    </div><!--ends footer-->

</div><!--ends wrapper-->

</body> 
```

这里的 CSS：

```
html{
    height:100%;
    background:url(images/green-bamboo2.jpg);
    background-attachment:fixed;
}

body{
    height:100%;
    width:80%;
    margin: 0 auto;
    padding:0;
    background:#FFFFFF;
}

#header, #navbar, #content, #sidebar, #footer{
    display:block;
}

#header{
    height:100px;
}

#navbar{
    height:50px;
    background:#CCCCCC;
}

#wrapper{
    min-height:100%;
    background:#FFFFFF;
    position:relative;
    overflow:auto;
}

#content{
    float:left;
    width:60%;
    height:auto;
    background:#99CC00;
}

#sidebar{
    float:right;
    width:40%;
    height:200px;
    background:#09F;
}

#footer{
    clear:both;
    height:150px;
    background:#339933;
    position:absolute;
    bottom:0;
    width:100%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:09:41.670

您在 div 上的高度设置为自动；这很好，但是您的页脚 div 是绝对定位的，这意味着当另一个 div 开始重叠时它不会移动。如果你让它 position: relative 那么它应该随着你的 div 变大而移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:10:13.593

你的css有问题。

您同时使用`clear`和`position:absolute`on `#footer`。因此，它不使用 clear 属性。

**编辑：**请参阅[http://jsfiddle.net/WTpAx/1/](http://jsfiddle.net/WTpAx/1/)以查看如果`position:absolute`从.`#footer``min-height:100%``#content`

# javascript - ProcessingJS 不在 3D 模式下绘制图像

> ID：10542059
> 
> 赞同：0
> 
> 时间：2012-05-10T21:00:05.230
> 
> 标签：javascript, processing

我正在尝试使用 ProcessingJS 将图像绘制到画布上。它可以在 2D 模式下完美运行，但不能在 3D 模式下运行。代码如下所示：

```
PImage img;

void setup(){
    size(600, 400, OPENGL);
    strokeWeight(1);
    noFill();
    frameRate(60);
    imageMode(CENTER);
    img = loadImage("img.png");
}

void draw(){      

     image(img, 20, 20);

} 
```

任何想法可能导致问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:32:07.390

如果您使用的是早于 1.3.0 的 Processing.js 版本，那么此链接可能会解释为什么它不起作用：

[https://processing-js.lighthouseapp.com/projects/41284/tickets/1511-image-doesnt-work-in-opengl-mode](https://processing-js.lighthouseapp.com/projects/41284/tickets/1511-image-doesnt-work-in-opengl-mode)

否则，您可以尝试将图像映射为多边形上的纹理，如下例所示：

[http://processing.org/learning/3d/texture1.html](http://processing.org/learning/3d/texture1.html)

# objective-c - AVAssetExportSession 不会导出 AVAudioRecorder 录制的音频

> ID：10542063
> 
> 赞同：0
> 
> 时间：2012-05-10T21:00:22.657
> 
> 标签：objective-c, ios, avassetexportsession

我的应用程序中有一个控件，可以记录音频并保存它。我使用 AVMutableComposition 将新录音附加到旧录音，当用户准备好保存时，我正在尝试使用 AVAssetExportSession 将所有内容写入新文件。当我这样做时，我没有收到任何错误并且写入了一个文件。但是，该文件无法播放，并且我的完成块永远不会被调用。有谁知道可能是什么原因造成的？

这是代码：

```
 AVAssetExportSession *exportSession = [AVAssetExportSession exportSessionWithAsset:composition presetName:AVAssetExportPresetAppleM4A];
        exportSession.outputURL = URL;
        exportSession.outputFileType = AVFileTypeAppleM4A;
        exportSession.shouldOptimizeForNetworkUse = YES;
        [exportSession exportAsynchronouslyWithCompletionHandler:^{
           NSLog(@"Export Complete");
        }]; 
```

该变量`composition`是一个 AVMutableComposition，它添加了一个或多个 AVURLAssets（以前的或当前的记录）。

**更新**

我不知道这是否有帮助，但我正在使用 AVAudioRecorder 来录制音频，并且我正在使用以下设置：

```
[recordSetting setObject:[NSNumber numberWithInt:kAudioFormatMPEG4AAC] forKey:AVFormatIDKey];
[recordSetting setObject:[NSNumber numberWithFloat:44100.0] forKey: AVSampleRateKey];
[recordSetting setObject:[NSNumber numberWithInt:1] forKey:AVNumberOfChannelsKey];
[recordSetting setObject:[NSNumber numberWithInt:64000] forKey:AVEncoderBitRateKey];
[recordSetting setObject:[NSNumber numberWithInt: AVAudioQualityMedium] forKey: AVEncoderAudioQualityKey]; 
```

**更新 2**

我已经尝试使用从记录文件生成的 AVURLAsset 相同的代码，基本上删除了 AVMutableComposition 以确保它不是问题。它仍然无法正常工作。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T19:28:38.353

好吧，我想通了。当我录制音频时，我使用的是文件扩展名 .aac。但是，当我将音频导出时，我使用的是文件扩展名 .m4a。我无法将导出文件扩展名设置为 .aac（导出失败），但是当我将录制扩展名设置为 .m4a 时，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-06T16:59:56.530

您可以使用[SDAVAssetExportSession](https://github.com/rs/SDAVAssetExportSession)使用 AAC 编码器录制到 m4a，然后在完成时将其重命名为 AAC。

# wpf - Wpf 如何管理静态资源？

> ID：10542070
> 
> 赞同：0
> 
> 时间：2012-05-10T21:01:09.677
> 
> 标签：wpf, staticresource

我试图弄清楚 wpf 如何在后台管理静态资源。例如，如果我在后面的代码中获得一个静态资源并将其设置为 null 或为其定义一个新对象，则不会反映更改。但是，如果我获得静态资源并更改它的属性，则会反映更改。wpf 如何理解我是否更改了属性或设置对象引用并以这种方式运行？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:08:56.423

实际上，这只是对象在 .NET 中的行为方式的标准方式。某处有物体。你得到一个对象的引用，如果你将本地引用设置为`null`，任何其他持有该引用的对象都不会注意到——毕竟，它们有自己的引用！

但是如果你改变了引用“指向”的东西，你现在就改变了实际数据，所以每个人都看到了！

例子：

```
class MyObject { public int i; }

MyObject ref1 = new MyObject() { i = 100 };
MyObject ref2 = ref1; // ref2 is just another reference to the object
ref1 = null;
Console.WriteLine(ref2.i); // prints 100, the object is still alive
ref1 = ref2;
ref1.i = 50;
Console.WriteLine(ref2.i); // prints 50, the object is changed 
```

与静态资源相同的方式：您获得对对象的引用，因此如果您取消引用，其他人不会提及它：他们只是有另一个引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:10:52.487

WPF 绑定的资源需要包含在`ResourceDictionary`. 当您在代码隐藏中获得对资源的引用时，您将获得对已包含在某处字典中的资源的引用，然后对其进行更改。因此，您会看到这些变化。

如果您通过代码从头开始创建一个，那么除非您将它添加到现有字典或创建一个新字典并将其添加到`MergedDictionaries`应用程序中，否则 WPF 不知道它存在。有关更多信息，请参阅此 SO 问题：[Programmatically add to Window.Resources in WPF](https://stackoverflow.com/questions/3269565/programmatically-add-to-window-resources-in-wpf)

# linux - 如何从两个服务器上都存在的 rsync 中排除目录？

> ID：10542073
> 
> 赞同：2
> 
> 时间：2012-05-10T21:01:20.540
> 
> 标签：linux, bash, rsync

这是我的文件结构：

```
Server_A                  Server_B
==============            ==============
/path/dir1/               /path/dir1/
           logA.txt                  logA.txt
           logB.txt                  logB.txt
/path/dir2/               /path/dir2/
           fileC.txt                 fileC.txt
           fileD.txt                 fileC.txt 
```

我需要从服务器 A 到 B 的 rsync path/dir2，但不是 path/dir1。

我的 rsync 命令如下所示：

```
rsync -arv --exclude '/dir1' /path/ root@server_b:/path 
```

但是每次我运行它时，结果都会在打印输出中显示 dir1：

```
sending incremental file list
./
dir1/
dir1/logA.txt
dir1/logB.txt
sent 52147 bytes  received 23342 bytes  14405.50 bytes/sec
total size is 215619123  speedup is 2851.02 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T01:12:59.603

我不相信你已经准确地转录了你正在运行的命令。如果我有一个`/tmp/src`如下所示的目录：

```
/tmp/src/
/tmp/src/dir1
/tmp/src/dir1/file1
/tmp/src/dir1/file2
/tmp/src/dir2
/tmp/src/dir2/file1
/tmp/src/dir2/file2 
```

我可以将它同步到另一台服务器 - 并排除`/tmp/src/dir1`- 像这样：

```
rsync -av --exclude=/dir1 /tmp/src/ server:/tmp/dst/ 
```

运行看起来像这样：

```
sending incremental file list
created directory /tmp/dst
./
dir2/
dir2/file1
dir2/file2 
```

这似乎与您在问题中描述的完全匹配。我正在使用 rsync 版本 3.0.8。我建议仔细检查您的实际 rsync 命令行和文件系统。如果您没有看到任何明显的内容，您能否发布您正在运行的*实际*命令以及顶级目录列表（除非它很大）？

# haproxy - HA 代理在 10 分钟后关闭 TCP 套接字？

> ID：10542074
> 
> 赞同：1
> 
> 时间：2012-05-10T21:01:23.987
> 
> 标签：haproxy

我刚刚开始在我的应用程序前尝试使用 HA 代理进行热故障转移。我注意到它在从 Web 客户端打开到服务器大约 10 分钟后关闭了一个 Websocket。

如何禁用超时以保持 websocket 处于打开状态？我可以确认两个盒子*确实*一直都在。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T06:57:59.210

You need to change "timeout server" and "timeout client" to fit your needs. You must never ever run without timeouts, because from time to time you'll have some users disconnect from the net, and these fantom connections will slowly accumulate until you have to restart haproxy, which makes no sense. Better use large timeouts (eg: one day).

# http - 注册页面上的 SSL 重定向，其他页面上的非 SSL

> ID：10542076
> 
> 赞同：0
> 
> 时间：2012-05-10T21:01:25.707
> 
> 标签：http, .htaccess, redirect, ssl, https

我有一个小问题，这里是：

我想将我的所有页面重定向到 http（https 到 http 重定向）。我只希望一页（register.php）从http重定向到https。

主要问题是，当我在论坛上重定向除 register.php 之外的所有内容时，https 无效！（http://i.stack.imgur.com/qvVI4.jpg）因为像我的图像（例如徽标）这样的所有资源都被重定向到正常的 http（所以在我的 https 页面上它无法获得有效的 https，因为我的由于重定向将所有内容重定向到http，因此图像和资源未编码）。

这是代码：

```
RewriteCond %{SERVER_PORT} ^443$
RewriteCond %{REQUEST_URI} !^/register\.php$
#RewriteCond %{REQUEST_URI} !^/logo.png
RewriteRule (.*) http://mywebsite.com/$1 [R=301,L] 
```

向所有人致以最诚挚的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:46:38.157

你这样做是错的。您根本不想重定向注册页面，您希望它*直接*发布到 HTTPS，您可以直接从页面内完成。如果您重定向，页面首先以纯文本形式发布，然后以 HTTPS 形式发布。你当然不希望这种情况发生，它破坏了练习的全部意义。这同样适用于您的登录和更改密码页面，以及您传输密码或其他敏感数据的任何其他页面。事件后的重定向是不安全的。

# c# - 服务器端第二个 HTTP 请求

> ID：10542078
> 
> 赞同：1
> 
> 时间：2012-05-10T21:01:33.417
> 
> 标签：c#, asp.net, httprequest, server-side, httpresponse

有没有办法从 C# 中的服务器端代码发送 HTTP 请求并收集结果？我想做的是：

1.  从客户端浏览器发送到页面的 HTTPRequest
2.  服务器端 C# 代码进行一些布尔检查
3.  如果检查成功，发送 HTTPRequest 到另一个页面
4.  获取 HTTPResponse 并填充到 div 的 innerHTML
5.  将自身的HTTPResponse发送到客户端浏览器查看

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:12:29.240

您也可以使用在服务器端的“普通”（即客户端）应用程序中使用的相同库。`HttpWebRequest`, `WebClient`, 等等，它们应该可以正常工作。

不过需要注意的是：如果您发出同步请求（`HttpWebRequest.GetResponse`、`WebClient.DownloadData`等），这些请求将阻塞服务器线程，因此如果您需要扩展服务器以服务大量客户端，这可能会成为一个问题。如果发生这种情况，您可以考虑使您的操作异步。但是除非您遇到（当前或可预见的）问题，否则您不应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:12:43.903

如果我理解正确，这是可能的。您可以查看 HttpWebRequest 和 HttpWebResponse 类。 [http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.getresponsestream.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.getresponsestream.aspx)

# module - 如何定义模块签名，其模块实现由仿函数参数化

> ID：10542079
> 
> 赞同：6
> 
> 时间：2012-05-10T21:01:37.663
> 
> 标签：module, functional-programming, ocaml, functor

假设我有一个由模块`M`参数化的模块`F`：

```
module M (F : sig type id type data end) =
struct
 type idtype = F.id
 type datatype = F.data
 type component = { id : idtype; data : datatype }
 let create id data = { id; data }
 let get_comp_data comp = comp.data
 let get_comp_id comp = comp.id
end 
```

所以我这样使用它：

```
module F1 = struct type id = int type data = float end
module MF1 = M(F1)

let comp = MF1.create 2 5.0
let id = MF1.get_comp_id comp 
```

现在，如果我想`M`匹配签名`S`：

```
module type S = 
sig
  type idtype
  type datatype 
  type component
  val create : idtype -> datatype -> component
  val get_comp_data : component -> datatype
  val get_comp_id : component -> idtype
end

module F1 = struct type id = int type data = float end
module MF1 = (M(F1) : S)

let comp = MF1.create 2 5.0
let id = MF1.get_comp_id comp 
```

这里困扰我的是，为了定义`get_comp_data`and `get_comp_id`，我需要在 module中指定`idtype`and ；现在想象一下我有其他记录类型和他们自己的类型，我将有十几种类型来指定？有没有更简单的方法来避免这种情况？`datatype``S``M``S`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T10:07:10.747

这样做的自然方法是在定义站点而不是使用站点密封模块。然后你只需要表达一次类型共享：

```
module M (F : sig type id type data end) :
  S with type idtype = F.id and datatype = F.data
  = struct ... end 
```

如果您的函子参数更复杂，那么您也可以只共享整个模块而不是单个类型。例如：

```
module type TYPES = sig type id type data (* ...and more... *) end

module type S = 
sig
  module Types : TYPES
  type component
  val create : Types.id -> Types.data -> component
  val get_comp_data : component -> Types.data
  val get_comp_id : component -> Types.id
end

module M (F : TYPES) : S with module Types = F
  = struct ... end 
```

或者您甚至可以通过将签名嵌套到另一个函子中来参数化签名本身：

```
module type TYPES = sig type id type data (* ...and more... *) end

module S (F : TYPES) =
struct
  module type S =
  sig
    type component
    val create : F.id -> F.data -> component
    val get_comp_data : component -> F.data
    val get_comp_id : component -> F.id
  end
end

module M (F : TYPES) : S(F).S
  = struct ... end 
```

# html - 为什么我的 div 内的无序列表无法正确呈现？

> ID：10542080
> 
> 赞同：1
> 
> 时间：2012-05-10T21:01:37.760
> 
> 标签：html, css, internet-explorer-8, html-lists

我在 div 中有一个无序列表，每个列表项都有一个背景图像。但是，该列表未在 Internet Explorer 8 中正确显示。

> [渲染输出 http://img694.imageshack.us/img694/7204/screenshotjv.jpg](http://img694.imageshack.us/img694/7204/screenshotjv.jpg)

问题是列表的左侧和顶部有太多空间。以及每个列表项之间。我希望列表与其上方的图像部分完全齐平，因此左侧、顶部或每个项目之间没有空白。

**HTML：**

```
<div id="top">
    <div id="topimage">
        <center>
            <img src="image.jpg" alt="image"/>
        </center>
    </div>
    <ul class="list">
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
    </ul>
</div> 
```

**CSS：**

```
#top { 
    width: 255px; 
    float:left; 
    margin:3px; 
}

#topimage {
    width: 245px;
    border:1px solid #bcc5c8;
    padding:3px;
}

.list li {
    background-image:url(../images/list_sub.jpg);
    width: 245px;
    height:23px;
    list-style:inside;
    list-style-image:url(../images/listarrow.gif);
    margin:0px;
    padding:0px;
} 
```

我尝试将边距和填充设置为零，但这不起作用。我还检查以确保图像周围没有多余的空间。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:19:00.270

以下是您可以调整的一些内容：

1.  将列表项内容包装在跨度中，并将列表项箭头应用于跨度，给跨度一个比箭头 gif 的宽度稍大的 padding-left 值。

2.  不要使用 list-style-image 属性，只需指定一个 list-style: none; 获得左对齐 x 浏览器。通常，您应该只对列表项使用背景图像属性而不是列表样式图像，但是由于您也有 li 的背景图像，因此您需要额外的跨度。

3.  不要将填充应用于应用宽度和高度的相同元素。它们不会跨浏览器呈现。而是在父元素上指定宽度/高度并在内部包装元素上指定填充。

4.  通常你应该避免 id 规则，它们非常具体，并导致不可重用的样式定义。它们使覆盖样式定义变得困难。

5.  要使列表项相互接触，请确保在它们上指定的 line-height 等于或小于元素的高度。我认为列表项样式会修复它，但也要仔细检查此设置。

如果这不能解决您的问题，请发布指向背景图像的链接，我将模拟一个小示例。

# java - 用 Java 编写的编译器：Peephole 优化器实现

> ID：10542082
> 
> 赞同：21
> 
> 时间：2012-05-10T21:01:39.007
> 
> 标签：java, compiler-construction, compiler-optimization

我正在为 Pascal 的一个子集编写一个编译器。编译器为制造的机器生成机器指令。我想为这种机器语言编写一个窥孔优化器，但我在替换一些更复杂的模式时遇到了麻烦。

### 窥孔优化器规格

我研究了几种不同的方法来编写窥视孔优化器，并确定了一种后端方法：

*   `emit()`每次生成机器指令时，编码器都会调用函数。
*   `emit(Instruction currentInstr)`检查窥视孔优化表：
    *   如果当前指令匹配模式的尾部：
        1.  检查先前发出的匹配说明
        2.  如果所有指令都与模式匹配，则应用优化，修改代码存储的尾部
    *   如果没有找到优化，照常发出指令

### 当前的设计方法

该方法很简单，这是我遇到问题的实现。在我的编译器中，机器指令存储在一个`Instruction`类中。我写了一个`InstructionMatch`类存储正则表达式，用于匹配机器指令的每个组件。如果模式匹配某些机器指令，它的`equals(Instruction instr)`方法就会返回。`true``instr`

但是，我无法完全*应用*我拥有的规则。首先，我觉得鉴于我目前的方法，我最终会得到一堆不必要的东西。鉴于窥视孔优化数字的完整列表可以包含大约 400 个模式，这将很快失控。此外，我实际上无法使用这种方法获得更困难的替换（请参阅“我的问题”）。

### 替代方法

我读过的一篇论文将以前的指令折叠成一个长字符串，使用正则表达式进行匹配和替换，并将字符串转换回机器指令。这对我来说似乎是一个不好的方法，如果我错了，请纠正我。

### 示例模式，模式语法

```
x: JUMP x+1; x+1: JUMP y  -->  x: JUMP y
LOADL x; LOADL y; add     -->  LOADL x+y
LOADA d[r]; STOREI (n)    -->  STORE (n) d[r] 
```

请注意，这些示例模式中的每一个都只是以下机器指令模板的人类可读表示：

```
op_code register n d 
```

（n 通常表示字数，d 表示地址位移）。语法`x: <instr>`指示指令存储在`x`代码存储中的地址处。

因此，当操作码为 5时，该指令`LOADL 17`相当于完整的机器指令（并且在该指令中未使用）`5 0 0 17``LOADL``n``r`

### 我的问题

因此，鉴于这种背景，我的问题是：当我需要在替换中包含先前指令的部分作为变量时，如何有效地匹配和替换模式？例如，我可以简单地用`LOADL 1; add`增量机器指令替换所有实例——我不需要前面指令的任何部分来执行此操作。但是我不知道如何在替换模式中有效地使用我的第二个示例的“x”和“y”值。

**编辑**：我应该提到一个`Instruction`类的每个字段只是一个整数（对于机器指令来说是正常的）。模式表中任何使用 'x' 或 'y' 的变量都是代表任何整数值的变量。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-11T03:17:06.307

一个简单的方法是将窥视孔优化器实现为有限状态机。

我们假设您有一个*生成*指令但不*发出*指令的原始代码生成器，以及一个将实际代码发送到对象流的*发出例程。*

状态机捕获您的代码生成器生成的指令，并通过在状态之间转换来记住 0 个或多个生成的指令序列。因此，一个状态隐含地记住了一个（短）生成但未发出的指令序列；它还必须记住它捕获的指令的关键参数，例如寄存器名称、常量值和/或寻址模式和抽象目标内存位置。一个特殊的开始状态会记住空的指令串。在任何时候，您都需要能够发出未发出的指令（“flush”）；如果你一直这样做，你的窥视孔生成器会捕获下一条指令，然后发出它，不会做任何有用的工作。

为了做有用的工作，我们希望机器捕获尽可能长的序列。由于机器指令通常有很多种，实际上您不能连续记住太多，否则状态机将变得庞大。但是对于最常见的机器指令（加载、添加、cmp、分支、存储），记住最后两个或三个是很实用的。机器的大小实际上将由我们关心的最长窥视孔优化的长度决定，但如果该长度为 P，则整个机器不需要 P 个状态深度。

每个状态都根据我由您的代码生成器生成的“下一个”指令转换到下一个状态。想象一个状态代表 N 条指令的捕获。过渡选择是：

*   刷新此状态表示的最左边的 0 条或更多（称为此 k）指令，并转换到下一个状态，表示 N-k+1，表示额外捕获机器指令 I 的指令。
*   刷新此状态表示的最左边的 k 条指令，转换到表示剩余 Nk 条指令的状态，并重新处理指令 I。
*   完全刷新状态，并发出指令 I。[您实际上可以在刚开始的状态下执行此操作]。

在刷新 k 指令时，实际发出的是那些 k 的窥视孔优化版本。您可以在发出此类指令时计算任何您想要的东西。您还需要适当地记住“移位”剩余指令的参数。

这一切都可以通过窥视孔优化器状态变量以及代码生成器生成下一条指令的每个点的 case 语句轻松实现。case 语句更新窥视孔优化器状态并实现转换操作。

假设我们的机器是一个增强堆栈机器，有

```
 PUSHVAR x
 PUSHK i
 ADD
 POPVAR x
 MOVE x,k 
```

指令，但原始代码生成器仅生成纯堆栈机器指令，例如，它根本不发出 MOV 指令。我们希望窥视孔优化器能够做到这一点。

我们关心的窥视孔案例有：

```
 PUSHK i, PUSHK j, ADD ==> PUSHK i+j
 PUSHK i, POPVAR x ==> MOVE x,i 
```

我们的状态变量是：

```
 PEEPHOLESTATE (an enum symbol, initialized to EMPTY)
 FIRSTCONSTANT (an int)
 SECONDCONSTANT (an int) 
```

我们的案例陈述：

```
GeneratePUSHK:
    switch (PEEPHOLESTATE) {
        EMPTY: PEEPHOLESTATE=PUSHK;
               FIRSTCONSTANT=K;
               break;
        PUSHK: PEEPHOLESTATE=PUSHKPUSHK;
               SECONDCONSTANT=K;
               break;
        PUSHKPUSHK:
        #IF consumeEmitLoadK // flush state, transition and consume generated instruction
               emit(PUSHK,FIRSTCONSTANT);
               FIRSTCONSTANT=SECONDCONSTANT;
               SECONDCONSTANT=K;
               PEEPHOLESTATE=PUSHKPUSHK;
               break;
        #ELSE // flush state, transition, and reprocess generated instruction
               emit(PUSHK,FIRSTCONSTANT);
               FIRSTCONSTANT=SECONDCONSTANT;
               PEEPHOLESTATE=PUSHK;
               goto GeneratePUSHK;  // Java can't do this, but other langauges can.
        #ENDIF
     }

  GenerateADD:
    switch (PEEPHOLESTATE) {
        EMPTY: emit(ADD);
               break;
        PUSHK: emit(PUSHK,FIRSTCONSTANT);
               emit(ADD);
               PEEPHOLESTATE=EMPTY;
               break;
        PUSHKPUSHK:
               PEEPHOLESTATE=PUSHK;
               FIRSTCONSTANT+=SECONDCONSTANT;
               break:
     }  

  GeneratePOPX:
    switch (PEEPHOLESTATE) {
        EMPTY: emit(POP,X);
               break;
        PUSHK: emit(MOV,X,FIRSTCONSTANT);
               PEEPHOLESTATE=EMPTY;
               break;
        PUSHKPUSHK:
               emit(MOV,X,SECONDCONSTANT);
               PEEPHOLESTATE=PUSHK;
               break:
     }

GeneratePUSHVARX:
    switch (PEEPHOLESTATE) {
        EMPTY: emit(PUSHVAR,X);
               break;
        PUSHK: emit(PUSHK,FIRSTCONSTANT);
               PEEPHOLESTATE=EMPTY;
               goto GeneratePUSHVARX;
        PUSHKPUSHK:
               PEEPHOLESTATE=PUSHK;
               emit(PUSHK,FIRSTCONSTANT);
               FIRSTCONSTANT=SECONDCONSTANT;
               goto GeneratePUSHVARX;
     } 
```

#IF 显示了两种不同风格的转换，一种使用生成的指令，另一种不使用；要么适用于这个例子。当你最终得到几百个这样的 case 语句时，你会发现这两种类型都很方便，“不使用”版本可以帮助你保持代码更小。

我们需要一个例程来刷新窥视孔优化器：

```
 flush() {
    switch (PEEPHOLESTATE) {
        EMPTY: break;
        PUSHK: emit(PUSHK,FIRSTCONSTANT);
               break;
        PUSHKPUSHK:
               emit(PUSHK,FIRSTCONSTANT),
               emit(PUSHK,SECONDCONSTANT),
               break:
      }
      PEEPHOLESTATE=EMPTY;
      return; } 
```

有趣的是考虑这个窥视孔优化器对以下*生成*的代码做了什么：

```
 PUSHK  1
      PUSHK  2
      ADD
      PUSHK  5
      POPVAR X
      POPVAR Y 
```

整个 FSA 方案所做的是隐藏您在状态转换中的模式匹配，以及在案例中对匹配模式的响应。您可以手动编写代码，而且代码和调试速度快且相对容易。但是当案例数量变大时，您不想手动构建这样的状态机。你可以编写一个工具来为你生成这个状态机；很好的背景是 FLEX 或 LALR 解析器状态机生成。我不会在这里解释这个:-}

# codeigniter - 如何在上传期间调试浏览器挂起

> ID：10542086
> 
> 赞同：1
> 
> 时间：2012-05-10T21:02:13.823
> 
> 标签：codeigniter, file-upload, php

我正在 CodeIgniter 2.0.2 中编写一个简单的文件上传器。下面粘贴代码。在*特定条件下*浏览器在此上传期间挂起，我在浏览器状态栏中得到“等待本地主机”（FF 和 Chrome 中的行为相同）。我已经验证该文件正在上传到 Windows 临时文件夹（完整文件），但之后该过程卡住了。似乎该错误的条件是文件大小。但是我的 php.ini 具有上传文件的所有正确设置，而且我仍然可以使用 700k 文件。仅当我在 Windows 7 Apache 上运行它时才会出现此错误，而不是在 Ubuntu 机器上运行。向我建议 php.ini 中的某些路径可能设置不正确。Apache 日志文件在这里没有太大帮助，因为没有抛出错误。我曾尝试使用 Chrome 开发者面板进行调试，但没有发现任何有用的东西。我目前正在尝试让 XDebug 工作，但由于没有抛出错误并且该过程没有完成，我的期望很低。有关如何跟踪此错误的任何建议？如果您想查看特定的 php.ini 设置，请告诉我，不要做大转储。

控制器：

```
function do_upload_sql(){
    // create directory
    if (! is_dir(BACKUP_DIR)) {
        mkdir(BACKUP_DIR, 0777);
    }
    // or if it exists and has restricted file permissions, change them
    elseif(fileperms(BACKUP_DIR)!=0777){
        chmod(BACKUP_DIR, 0777);
    }

    $config['upload_path'] = BACKUP_DIR;
    $config['allowed_types'] = 'backup'; // an SQL backup file type
    $config['overwrite'] = TRUE;
    $this->load->library('upload', $config);
    if ( ! $this->upload->do_upload()) // this is the native CI function, probably where the problem is. I can provide some of that code if anyone wants.
    {
        $data['action'] = 'c_backup_restore/do_upload_sql';
        $tab_error = array('error' => $this->upload->display_errors());
        $data['error'] = $tab_error['error'];
        $this->load->view('common/header');
        $this->load->view('v_upload_sql', $data);
    }
    else
    {
        echo "success"; // yes it's getting here, but i get no file!
        $data = array('upload_data' => $this->upload->data());
        $file_upload = $data["upload_data"];
        $this->restore_backup($file_upload); // go do something useful with the file
    }
} 
```

看法：

```
<p>Select the backup file</p>
<div class="not_success"><?php echo $error;?></div>
<?php echo form_open_multipart($action);?>
<input type="file" name="userfile" size="30" />
<input type="submit" value="Upload" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T20:05:52.760

如果您的错误仅发生在 windows 7 apache 上，我认为您的问题可能与“is_dir()”、“mkdir()”和“chmod()”命令有关——这些终端命令是 linux 特定的，不会很好用在windows系统上。

我在 PHP.net 手册中查找了有关 mkdir() 函数的文档：

[http://us.php.net/manual/en/function.mkdir.php](http://us.php.net/manual/en/function.mkdir.php)

我在评论部分找到了这个：

> kendsnyder at gmail dot com 04-May-2007 08:17 在 Windows 中创建目录时，将忽略尾随句点 (".")。例如：

```
<?php

mkdir('c:/Buck Jr.',0755);    // on Windows creates "c:/Buck Jr"
mkdir('c:/Elipses...',0755);  // on Windows creates "c:/Elipses"
mkdir('c:/php.com',0755);     // on Windows creates "c:/php.com"

?>

This is a Window's quirk, not a php shortcoming--meaning that you get the same results  from a Window's command prompt. 
```

所以看起来它会起作用......但你可能不得不用它来找到 Windows 系统更喜欢的味道。此外，您似乎必须指定创建目录的根驱动器，例如：'c:\somedir'

同样有趣的是，我进行了一次快速的谷歌搜索，发现 PHP 已经发布了一个关于您正在使用的功能的错误，特别是与 windows 和 linux 系统的正斜杠和反斜杠有关：

[https://bugs.php.net/bug.php?id=29797](https://bugs.php.net/bug.php?id=29797)

这是与您的问题相关的 StackOverflow 帖子：

[PHP mkdir()、chmod() 和 Windows](https://stackoverflow.com/questions/739891/php-mkdir-chmod-and-windows)

所以总结一下：

*   在基于 Windows 的 Web 服务器上，包括将放置目录的驱动器

*   Windows 上的文件权限与 Linux 不同（Windows 没有像 Linux 那样的 chmod 或文件权限结构！）虽然据我所知，Windows 应该给一个文件夹相当于 777 权限级别——但这个功能似乎有问题并且容易出错。但这也意味着在windows系统上使用chmod()函数，会得到不可预知的结果。有关更多信息，请参阅 PHP 手册： http: [//php.net/manual/en/function.chmod.php](http://php.net/manual/en/function.chmod.php)

*   请记住在目录路径中使用反斜杠而不是正斜杠，因为 Windows 系统使用反斜杠，而 Linux 使用正斜杠。

*   当 PHP 创建一个目录时，它使用授予运行 PHP 的用户帐户的权限，这意味着您可能必须深入 Windows 以找到运行 Windows 7 Apache/PHP 的用户权限级别并进行在那里改变。我知道，多么痛苦，对吧？

*   最后一件事：如果目录创建成功，mkdir() 函数返回 true，否则返回 false——您可能希望在继续执行其余代码之前测试该条件，因为如果目录没有正确创建，依赖于该目录的所有其余代码都将失败。最终，我认为您的浏览器在提交时挂起，因为它试图通过 PHP 访问一个在 Windows 上不支持的函数（chmod）。在“Try/Catch”块中执行函数调用以捕获发生的任何异常，以便您可以在必要时将它们打印到屏幕或日志文件：

    ```
    $proceed = false;
    try
    {
         // create directory
         if (! is_dir(BACKUP_DIR)) {
             $proceed = mkdir(BACKUP_DIR, 0777);
         }
         // or if it exists and has restricted file permissions, change them
         elseif(fileperms(BACKUP_DIR)!=0777){
             $proceed = chmod(BACKUP_DIR, 0777);
         }
    }
    catch(Exception $e)
    {
        echo $e->message;
    }

    if($proceed == TRUE)
    {
        /*Proceed with your code*/
    }
    else
    {
       /*Gracefully fail*/
    } 
    ```

    祝你好运，这就是为什么我更喜欢 Linux Boxes 用于 Web 服务器！

    干杯!

# ruby-on-rails - rails admin_data 显示开发数据库而不是生产数据库

> ID：10542088
> 
> 赞同：0
> 
> 时间：2012-05-10T21:02:23.953
> 
> 标签：ruby-on-rails, database, heroku, administration

我成功地将 admin_data 部署到 heroku 上。

我可以参观

myapp.herokuapp.com/admin_data

并显示 admin_data 页面。但是它显示了我的开发数据库。更糟糕的是它实际上显示了我的旧条目（不再存在）。

admin_data 是否可以显示生产数据库？

我有一个包含以下内容的 admin.rb 文件...

```
AdminData.config do |config|
    config.is_allowed_to_view = lambda {|controller| return true if (Rails.env.development? || Rails.env.production?) }
end 
```

我错过了什么吗？

我查看了[https://github.com/bigbinary/admin_data/wiki](https://github.com/bigbinary/admin_data/wiki)但似乎找不到任何关于使生产数据库出现的信息

谢谢你！

更新：

抱歉，我一定是弄错了，但是...不是访问 myapp.herokuapp.com 我的生产站点吗？如果我在那里创建一个用户，它不是存储在 herokus pg 数据库中吗？我试图查看那个数据库，我想去 myapp.herokuapp.com/admin_data 会显示，而去 localhost:3000/admin_data 会显示来自我本地机器上的数据库的用户。

如何查看使用 admin_data 存储从 heroku 创建的用户的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:26:12.597

Heroku 应用程序只有一个附加的数据库。如果您正在通过 Heroku URL 查看页面，那么您正在查看该应用程序正在使用的任何数据库。您没有多个开发/登台/生产数据库。

# php - 何时使用 session_start()？

> ID：10542089
> 
> 赞同：4
> 
> 时间：2012-05-10T21:02:29.563
> 
> 标签：php, session

我一直在经历一些`$_SESSION`例子，我有点困惑，我应该`session_start()`在访问或设置之前每次都使用还是应该每页`$_SESSION['variable']`只使用一次还是只在用户成功登录后使用？`session_start()`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T21:03:00.240

在您计划使用任何 $_SESSION 变量之前，每页使用一次，在最顶部

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T21:04:06.607

如果你想访问所有会话，你应该总是`session_start()`在你的 PHP 页面上使用一次`First Line``$_SESSION`

# javascript - 造型 Facebook Likebox

> ID：10542090
> 
> 赞同：0
> 
> 时间：2012-05-10T21:02:35.783
> 
> 标签：javascript, jquery, html, css, facebook

有没有办法在没有插件的情况下设置 facebook likebox 的样式？我的likebox 是深色背景，蓝色链接表示我的facebook 页面名称没有很好地融合，我想更改likebox 内的所有文本颜色，我必须使用javascript 来执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:07:21.737

您可以使用 HTML5 实现，然后使用 css 设置样式。纯 css 会比 iframe 方法更好，您必须将 css 注入 iframe。编写自己的javascript代码会更好，这样您就可以控制整个框而不仅仅是文本颜色。如果您在这方面需要任何帮助，请立即发布您所在的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:39:29.627

我建议不要更改 facebook 插件的样式，原因有两个：

1.  这是用户习惯的，如果他们想要喜欢这个页面，就是他们搜索的那个蓝色的按钮/框。如果您更改它，用户可能会错过它。

2.  Facebook 经常改变事物，如果你破解他们的风格，你需要不断跟踪他们的变化，这样盒子仍然看起来不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T00:21:02.410

这应该可以解决您的问题：- [http://fitzhughweb.com/2011/06/how-to-style-a-facebook-like-box-with-css/](http://fitzhughweb.com/2011/06/how-to-style-a-facebook-like-box-with-css/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T22:21:24.250

不是在 Facebook 的 TnC 中不改变盒子的颜色吗？我敢肯定，如果情况与您的情况相似，您必须在白色背景上使用它？

# javascript - Drop-Down Menu on :hover to tap twice for Mobile

> ID：10542096
> 
> 赞同：1
> 
> 时间：2012-05-10T21:03:04.470
> 
> 标签：javascript, jquery, mobile, css, responsive-design

**UPDATE:** Fri 9:12:13 AM

```
<div id="containerdropdown">
  <a class="mainNav navLink" href="" id="mainLink" onmouseover="rolloverMenu(1, 'mainMenu');" onmouseout="rolloverMenu(0, 'mainMenu');">ALL CATEGORIES</a>
  <div class="rolloverMenu" id="mainMenu" style="display: none;" onmouseover="rolloverMenu(1, 'mainMenu');$('.navLink').on('tap', function(){
   rolloverMenu(1, 'mainMenu');})" onmouseout="rolloverMenu(0, 'mainMenu');">

    <a href="#">Test</a><br />
    <a href="#">Test</a><br />
    <a href="#">Test</a><br />
    <a href="#">Test</a><br />
    <a href="#">Test</a><br />
    <a href="#">Test</a><br />
    <a href="#">Test</a><br />
    <a href="#">Test</a><br />
    <a href="#">Test</a>

  </div></div> 
```

I've just tried the above code via the answered suggestion of calling on tap within the event handler. It still doesn't allow **Tap > Drop-down > Double Tap > Visit Parent Link** as the demo reference link below renders. Am I inserting the tap event in the wrong place? On my Android HTC Incredible 2, the parent link remains a standard link navigating to that page without the drop-down appearing?

I'm also loading this in the head: `http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js`

* * *

***Original Question:***

I have a website that I'm very close to publishing.

I have drop-down menus implemented across coded like:

```
<div id="containerdropdown">
  <a class="mainNav navLink" href="" id="mainLink" onmouseover="rolloverMenu(1, 'mainMenu');" onmouseout="rolloverMenu(0, 'mainMenu');">ALL CATEGORIES</a>
  <div class="rolloverMenu" id="mainMenu" style="display: none;" onmouseover="rolloverMenu(1, 'mainMenu');" onmouseout="rolloverMenu(0, 'mainMenu');">
    <a href="#">Test</a><br />
    <a href="#">Test</a><br />
    <a href="#">Test</a><br />
    <a href="#">Test</a><br />
    <a href="#">Test</a><br />
    <a href="#">Test</a><br />
    <a href="#">Test</a><br />
    <a href="#">Test</a><br />
    <a href="#">Test</a> 
```

They work fine on Desktop, OK (*But still pretty bad on iOS*), and absolutely terrible on Android and everywhere else on mobile.

**I want this:** [http://suan.github.com/make_dropdown/demo.html](http://suan.github.com/make_dropdown/demo.html)

But I really don't want to recode all of my drop-downs. **Could anyone suggest a code tweak that could allow my drop-downs to function on tap rather then on hover for mobile as the sample above??**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-24T01:09:02.427

Okay, I know I'm totally necro-posting but I had a similar problem and came across this question trying to solve my own. Now that I've got an answer I might as well share :D

What I did, using regular jQuery and not jQuery mobile, was I wrote a class to display the submenu, then just toggled that class on and off using on touchstart and prevented its default. Then I used the setTimeout technique to detect double tap and go to the parent link. Here's a CodePen of it in action. [http://codepen.io/StuffieStephie/pen/QbZjJP](http://codepen.io/StuffieStephie/pen/QbZjJP)
Note: Ctrl+Shift+I if you're on a PC in Chrome to get to the developers' tools, then click the mobile device icon to emulate various touch devices.

```
 //Tap and double tap function for large touch screens
var tapped=false;
$("nav li.gotsMenus h3").on("touchstart", function(e){
    var theOne = $(this);
    if((!tapped)){
      tapped=setTimeout(function(){
//single tap function
            $("nav li.gotsMenus").not(theOne.parent()).removeClass("showSub");
        theOne.parent().toggleClass("showSub");
            e.preventDefault();
          tapped=null;
      },300); //wait 300ms
    } else {
//double tap function
      clearTimeout(tapped);
      tapped=null;
      window.location = $(this).find("a").attr("href");
    }
    e.preventDefault();
}); 
```

And here's the class we're toggling.

```
nav li ul{
overflow: hidden;
max-height:0;
transition: max-height .5s ease-in; 
width: 200px;
position: absolute;
font-size: .8em;
}
nav li.showSub ul {
 max-height: 1000px;
} 
```

I'm animating the max-height property for a slide effect, but you could just as easily toggle between display: none and display: block.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:07:00.773

you can use `jQuery Mobile` `tap` event:

```
$('.navLink').bind('tap', function(){
   rolloverMenu(1, 'mainMenu');
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T21:05:26.527

```
.rolloverMenu { display:none; } /* You should hide this with CSS instead of inline; */
.navLink:hover + .rolloverMenu,
.navLink:focus + .rolloverMenu { display:block; } 
```

Should work for keyboard navigation as well (although tabbing to the secondary menu would be tough). Might want to JS bind to focus as well as hover.

# ios - 在 iOS 5 上实现快速高效的核心数据导入

> ID：10542097
> 
> 赞同：101
> 
> 时间：2012-05-10T21:03:06.057
> 
> 标签：ios, core-data, nsfetchedresultscontroller, nsmanagedobjectcontext

**问题**：如何让我的子上下文看到父上下文中持续存在的更改，以便它们触发我的 NSFetchedResultsController 来更新 UI？

*这是设置：*

您有一个应用程序，它下载并添加大量 XML 数据（大约 200 万条记录，每条记录大致相当于一段普通文本的大小）。.sqlite 文件的大小约为 500 MB。将此内容添加到 Core Data 需要时间，但您希望用户能够在数据以增量方式加载到数据存储时使用该应用程序。大量数据在四处移动，因此用户必须不可见且无法察觉，因此不会出现挂起和抖动：像黄油一样滚动。尽管如此，应用程序更有用，添加的数据越多，所以我们不能永远等待数据被添加到核心数据存储中。在代码中，这意味着我真的很想在导入代码中避免这样的代码：

```
[[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:0.25]]; 
```

该应用程序仅适用于 iOS 5，因此它需要支持的最慢设备是 iPhone 3GS。

以下是我迄今为止用于开发当前解决方案的资源：

[Apple 的核心数据编程指南：高效导入数据](https://web.archive.org/web/20150420154157/https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html)

*   使用自动释放池来降低内存
*   关系成本。导入平面，然后在最后修补关系
*   不要询问您是否可以帮助它，它会以 O(n^2) 的方式减慢速度
*   批量导入：保存、重置、排空和重复
*   导入时关闭撤消管理器

[iDeveloper TV - 核心数据性能](http://ideveloper.tv/video/coredataperformancecourse.html)

*   使用 3 个上下文：主上下文类型、主要上下文类型和限制上下文类型

[iDeveloper TV - 适用于 Mac、iPhone 和 iPad 的核心数据更新](http://ideveloper.tv/video/coredataupdatecourse.html)

*   使用 performBlock 在其他队列上运行保存会使事情变得更快。
*   加密会减慢速度，如果可以，请关闭它。

[Marcus Zarra 在 Core Data 中导入和显示大型数据集](http://www.cimgf.com/2011/08/22/importing-and-displaying-large-data-sets-in-core-data/)

*   您可以通过为当前的运行循环留出时间来减慢导入速度，从而让用户感觉顺畅。
*   示例代码证明可以进行大量导入并保持 UI 响应，但不如使用 3 个上下文和异步保存到磁盘快。

## 我目前的解决方案

我有 3 个 NSManagedObjectContext 实例：

**masterManagedObjectContext** - 这是具有 NSPersistentStoreCoordinator 并负责保存到磁盘的上下文。我这样做是为了让我的保存可以是异步的，因此非常快。我在启动时创建它，如下所示：

```
masterManagedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
[masterManagedObjectContext setPersistentStoreCoordinator:coordinator]; 
```

**mainManagedObjectContext** - 这是 UI 到处使用的上下文。它是 masterManagedObjectContext 的子级。我这样创建它：

```
mainManagedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
[mainManagedObjectContext setUndoManager:nil];
[mainManagedObjectContext setParentContext:masterManagedObjectContext]; 
```

**backgroundContext** - 这个上下文是在我的 NSOperation 子类中创建的，它负责将 XML 数据导入核心数据。我在操作的主要方法中创建它并将其链接到那里的主上下文。

```
backgroundContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSConfinementConcurrencyType];
[backgroundContext setUndoManager:nil];
[backgroundContext setParentContext:masterManagedObjectContext]; 
```

这实际上非常非常快。只需执行这 3 个上下文设置，我就能将导入速度提高 10 倍以上！老实说，这很难相信。（这个基本设计应该是标准核心数据模板的一部分......）

在导入过程中，我保存了 2 种不同的方式。我在后台上下文中保存的每 1000 个项目：

```
BOOL saveSuccess = [backgroundContext save:&error]; 
```

然后在导入过程结束时，我保存主/父上下文，表面上，它将修改推送到其他子上下文，包括主上下文​​：

```
[masterManagedObjectContext performBlock:^{
   NSError *parentContextError = nil;
   BOOL parentContextSaveSuccess = [masterManagedObjectContext save:&parentContextError];
}]; 
```

**问题**：问题是我的 UI 在我重新加载视图之前不会更新。

我有一个简单的 UIViewController 和一个 UITableView，它使用 NSFetchedResultsController 提供数据。导入过程完成后，NSFetchedResultsController 看到父/主上下文没有任何变化，因此 UI 不会像我以前看到的那样自动更新。如果我将 UIViewController 从堆栈中弹出并再次加载它，所有数据都在那里。

**问题**：如何让我的子上下文看到父上下文中持续存在的更改，以便它们触发我的 NSFetchedResultsController 来更新 UI？

我尝试了以下只是挂起应用程序的方法：

```
- (void)saveMasterContext {
    NSNotificationCenter *notificationCenter = [NSNotificationCenter defaultCenter];    
    [notificationCenter addObserver:self selector:@selector(contextChanged:) name:NSManagedObjectContextDidSaveNotification object:masterManagedObjectContext];

    NSError *error = nil;
    BOOL saveSuccess = [masterManagedObjectContext save:&error];

    [notificationCenter removeObserver:self name:NSManagedObjectContextDidSaveNotification object:masterManagedObjectContext];
}

- (void)contextChanged:(NSNotification*)notification
{
    if ([notification object] == mainManagedObjectContext) return;

    if (![NSThread isMainThread]) {
        [self performSelectorOnMainThread:@selector(contextChanged:) withObject:notification waitUntilDone:YES];
        return;
    }

    [mainManagedObjectContext mergeChangesFromContextDidSaveNotification:notification];
} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-11T02:37:11.527

您可能也应该大步保存主 MOC。让 MOC 等到最后保存是没有意义的。它有自己的线程，也有助于减少内存。

你写了：

> 然后在导入过程结束时，我保存主/父上下文，表面上，它将修改推送到其他子上下文，包括主上下文​​：

在您的配置中，您有两个孩子（主 MOC 和后台 MOC），它们都是“主”的父级。

当您保存孩子时，它会将更改推送到父母身上。该 MOC 的其他子节点将在下次执行提取时看到数据......他们没有被明确通知。

所以，当 BG 保存时，它的数据被推送到 MASTER。但是请注意，在 MASTER 保存之前，这些数据都不在磁盘上。此外，在 MASTER 保存到磁盘之前，任何新项目都不会获得永久 ID。

在您的场景中，您通过在 DidSave 通知期间从 MASTER 保存合并将数据拉入 MAIN MOC。

这应该可行，所以我很好奇它在哪里“挂”。我会注意到，您没有以规范的方式在主 MOC 线程上运行（至少对于 iOS 5 来说不是）。

此外，您可能只对合并来自主 MOC 的更改感兴趣（尽管您的注册看起来只是为了那个）。如果我要使用 update-on-did-save-notification，我会这样做......

```
- (void)contextChanged:(NSNotification*)notification {
    // Only interested in merging from master into main.
    if ([notification object] != masterManagedObjectContext) return;

    [mainManagedObjectContext performBlock:^{
        [mainManagedObjectContext mergeChangesFromContextDidSaveNotification:notification];

        // NOTE: our MOC should not be updated, but we need to reload the data as well
    }];
} 
```

现在，关于挂起的真正问题可能是什么……您显示了两个不同的调用来保存主控。第一个在它自己的 performBlock 中得到很好的保护，但第二个不是（尽管您可能在 performBlock 中调用 saveMasterContext ...

但是，我也会更改此代码...

```
- (void)saveMasterContext {
    NSNotificationCenter *notificationCenter = [NSNotificationCenter defaultCenter];    
    [notificationCenter addObserver:self selector:@selector(contextChanged:) name:NSManagedObjectContextDidSaveNotification object:masterManagedObjectContext];

    // Make sure the master runs in it's own thread...
    [masterManagedObjectContext performBlock:^{
        NSError *error = nil;
        BOOL saveSuccess = [masterManagedObjectContext save:&error];
        // Handle error...
        [notificationCenter removeObserver:self name:NSManagedObjectContextDidSaveNotification object:masterManagedObjectContext];
    }];
} 
```

但是，请注意 MAIN 是 MASTER 的子项。因此，它不应该合并更改。相反，只需注意 master 上的 DidSave，然后重新获取！数据已经存在于您的父母中，等待您请求。这是首先将数据放在父级中的好处之一。

另一种需要考虑的选择（我很想听听你的结果——这是很多数据）......

与其让背景 MOC 成为 MASTER 的孩子，不如让它成为 MAIN 的孩子。

得到这个。每次 BG 保存时，它都会自动推送到 MAIN 中。现在，MAIN 必须调用 save，然后 master 必须调用 save，但所有这些都在移动指针......直到 master 保存到磁盘。

该方法的美妙之处在于数据从后台 MOC 直接进入您的应用程序 MOC（然后通过以保存）。

传递会受到*一些*惩罚，但是当 MASTER 击中磁盘时，所有繁重的工作都会在 MASTER 中完成。如果你用 performBlock 将这些保存踢到主线程上，那么主线程只会发送请求，并立即返回。

请告诉我进展如何！

# c# - 将带有 Eval 参数的方法放入 DataList

> ID：10542098
> 
> 赞同：1
> 
> 时间：2012-05-10T21:03:14.800
> 
> 标签：c#, asp.net, data-binding, webforms

我想使用以下技术更改数据列表中字段的前景色。但我不确定如何结合 Eval 调用方法。

此代码创建错误：'_Default.RowColor(string)' 的最佳重载方法匹配有一些无效参数

**ASPX**

```
<ItemTemplate>
<a href='<%# "http://cc.lookup.aspx?Quotenum=" + Eval("quote") %>'>
    <asp:Label ID="Label2" runat="server" ForeColor='<%# RowColor(Eval("status")) %>' Text='<%# Bind("quote") %>'></asp:Label>
    </a>
</ItemTemplate> 
```

**C＃**

```
public System.Drawing.Color RowColor(string rowType)
{
    System.Drawing.Color retval = System.Drawing.Color.Black;
    if (rowType == "Quote") retval = System.Drawing.Color.Gray;
    return retval;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:08:10.200

您需要将其转换或转换为字符串。因为您的`public System.Drawing.Color RowColor(string rowType)`方法采用`string`类型参数。

试试这个。

```
 ForeColor='<%# RowColor(Eval("status").ToString()) %>' 
```

或者

```
ForeColor='<%# RowColor((string) Eval("status")) %>' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T21:09:20.180

您需要转换`Eval("Status")`为字符串。

```
'<%# RowColor(Eval("Status").ToString()) %>' 
```

# asp.net - 为什么我要使用 devexpress gridview 而不是 asp.net 的？

> ID：10542099
> 
> 赞同：-3
> 
> 时间：2012-05-10T21:03:18.773
> 
> 标签：asp.net, devexpress

我相信需要购买许可证（？）才能使用 devexpress。我目前正在实现一个gridview，并希望排序箭头出现在列标题中。我知道 devexpress 网格具有该功能，而且我相信更多？谁能指出为什么有人会为使用 devexpress 网格付费的任何具体原因，或者我猜 devexpress 套件附带的不仅仅是网格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:05:29.157

这是一个原因。因为他们想要在列标题中排序箭头。此外，这些产品还提供了默认网格不提供的数百种其他功能。

关键是，额外的功能是特定的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:36:53.347

> **谁能指出为什么有人会为使用 devexpress 网格付费的任何具体原因，或者我猜 devexpress 套件附带的不仅仅是网格？**

*[这是您](http://blog.beleringenierie.com/2011/06/interet-des-controles-tierce-partie/?lang=en)为第三方控件付费的原因，简而言之，功能优先使用这些控件而不是标准控件。*

对于默认控件或第 3 方控件都无法满足的某些用户界面组件，客户端不太可能提出特定请求。许多便利方面，如详细视图、排序、自动完成、过滤和改变视角，已经由第 3 方公司通过多个版本的控件解决。

当需要一些 UI 功能时，最好在公司的网站上搜索合适的东西，而不是尝试从头开始开发。它肯定也会比翻阅文档、开发、调试、测试和部署周期无数次更便宜。

通过使用第 3 方控件，您可以更轻松地专注于项目的实际业务功能，花时间为应用程序开发可见功能，而不是解决与开发每个功能请求相关的许多背景技术难题。

另一方面，如果您得出的结论是，该控件需要进行一些认真的修改才能满足您的需求，那么最好在内部进行整个开发，最终基于 .NET Framework 附带的简单默认控件.

> 例如，我确实使用 devexpress 控件，在我正在工作的项目上，他们特别需要具有 DevExpress 控件知识的开发人员，因为这将减少开发时间（项目完成时间），而不是使用标准控件。正如那些人在此 SO 线程中评论的那样，具体要求使他们为控件付费。

检查这些以进行功能比较 - [Standard GridView](http://msdn.microsoft.com/en-gb/magazine/cc163933.aspx) vs [DevExpress GridView](http://devexpress.com/Products/NET/Controls/ASP/Grid/)。我喜欢它的客户端功能..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-27T19:21:25.160

它不仅负责排序和搜索等操作。它实际上非常有用，可以通过将字段快速映射到 IQueryables（如果您使用 C# 而不是 DevExtreme）来帮助您轻松地从数据库中填充数据。如果您在平台的许多页面上使用网格，您可以从一个点（主题、功能、配置等）轻松配置所有这些网格。它还提供了额外的安全措施来防止某些注入攻击。最后，它总是通过不断发布的新功能和改进进行更新。还有一件非常重要的事情是 DevExpress 帮助中心和论坛非常丰富，您几乎可以找到遇到的任何问题或问题的答案。

# android - AsyncTask 清理和使用 Android 的技巧

> ID：10542101
> 
> 赞同：0
> 
> 时间：2012-05-10T21:03:22.007
> 
> 标签：android, performance, webview, android-asynctask

这是我第一次使用 AsyncTask 并且它可以工作，但是它很脏，因为我只是复制并粘贴了一些代码。我想以正确的方式并尽可能干净。那么任何人都可以帮助我清理我的代码并告诉我如何以正确的方式去做吗？你会帮我一个很大的忙，帮助我，让我在未来的 Android 开发中获得更多经验。我想从一开始就以正确的方式学习它；）

**编辑：** 在阅读了一堆教程并观看了视频之后，我认为我取得了巨大的进步！我很高兴我做到了！但是只剩下一个小问题了。在应用程序启动时，它不会加载页面。在我单击一个链接后，shouldOverrideUrlLoading 效果很好，但在启动时它只显示一个空白屏幕。有什么问题？

```
public class WebviewActivity extends MainActivity {

    private WebView myWebView;
    private ProgressDialog progressDialog;
    private boolean mConnection = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final ScrollView mainScrollView = (ScrollView)findViewById(R.id.ScrollView01);

        myWebView = (WebView)findViewById(R.id.webview);
        WebSettings webSettings = myWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);

        myWebView.setWebViewClient(new WebViewClient(){
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                new checkConnection().execute();
                if (mConnection == true){
                    view.loadUrl(url);
                }           
                return true;                
            }
            @Override
            public void onPageFinished(WebView view, String url) {
                mainScrollView.fullScroll(ScrollView.FOCUS_UP);
            }
        });

        myWebView.requestFocus(View.FOCUS_DOWN);
        myWebView.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                    case MotionEvent.ACTION_UP:
                        if (!v.hasFocus()) {
                            v.requestFocus();
                        }
                        break;
                }
                return false;
            }
        });
    }

    @Override
    public void onResume() {
        super.onResume();       
        new checkConnection().execute();
        if (mConnection == true){
            myWebView.loadUrl(webLink);
        }
    }

    //------------------------------------------------------
    //-----DOING THE CONNECTION CHECK IN ANOTHER THREAD-----
    //------------------------------------------------------

    public class checkConnection extends AsyncTask<Void, Void, Void>{

        int mStatusCode = 0;
        Exception mConnectionException;

        @Override
        protected void onPreExecute(){
            super.onPreExecute();           
            progressDialog = ProgressDialog.show(WebviewActivity.this, "", "Loading...", true);
            progressDialog.show();
        }

        @Override
        protected Void doInBackground(Void... params) {
            try {
                ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

                if (cm.getActiveNetworkInfo().isConnectedOrConnecting()) {
                    URL url = new URL(webLink);
                    HttpURLConnection urlc = (HttpURLConnection) url.openConnection();
                    urlc.setConnectTimeout(1000 * 5); // mTimeout is in seconds
                    urlc.connect();

                    mStatusCode = urlc.getResponseCode();

                    if (mStatusCode == 200){
                        //Nothing to do.
                    }
                }
            } catch (IOException e) {
                e.printStackTrace();
                mConnectionException = e;
            }
            return null;
        }   

        @Override
        protected void onPostExecute(Void param){
            progressDialog.dismiss();

            if (mStatusCode  == 200){
                mConnection = true;
            }
            else if (mStatusCode  == 404){
                myWebView.loadUrl("file:///android_asset/errorpage404.html");
            }
            else {
                myWebView.loadUrl("file:///android_asset/errorpage.html");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T04:17:09.303

请不要`progressDialog.dismiss();`从调用`doInBackground()`，`onPostExecute()`而是使用。`doInBackground()`不是 UI 线程，因此尝试操作 UI 元素可能会给您带来严重的后果。

这就是为什么您在第一次尝试时没有加载页面的原因：

```
 public boolean shouldOverrideUrlLoading(WebView view, String url) {
            new checkConnection().execute();  <- (1)
            if (mConnection == true){         <- (2)
                view.loadUrl(url);
            }           
            return true; 
```

(1) 启动异步任务，该任务将在未来某个时间完成 (2) 尝试立即检查 (1) 的结果**，**所以还没有结果。

* * *

这是你的修改版本`AsyncTask`，它接受 url 作为参数：

```
public class checkConnection extends AsyncTask<String, Void, String>{     <------ change this

    int mStatusCode = 0;
    Exception mConnectionException;

    @Override
    protected void onPreExecute(){
        super.onPreExecute();           
        progressDialog = ProgressDialog.show(WebviewActivity.this, "", "Loading...", true);
        progressDialog.show();
    }

    @Override
    protected Void doInBackground(String... params) {     <------ change this
        try {
            ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

            if (cm.getActiveNetworkInfo().isConnectedOrConnecting()) {
                URL url = new URL(webLink);
                HttpURLConnection urlc = (HttpURLConnection) url.openConnection();
                urlc.setConnectTimeout(1000 * 5); // mTimeout is in seconds
                urlc.connect();

                mStatusCode = urlc.getResponseCode();

                if (mStatusCode == 200){
                    //Nothing to do.
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
            mConnectionException = e;
        }
        return params[0];     <------ change this
    }   

    @Override
    protected void onPostExecute(String param){     <------ change this
        progressDialog.dismiss();

        if (mStatusCode  == 200){
            myWebView.loadUrl(param);     <------ change this
        }
        else if (mStatusCode  == 404){
            myWebView.loadUrl("file:///android_asset/errorpage404.html");
        }
        else {
            myWebView.loadUrl("file:///android_asset/errorpage.html");
        }
    }
} 
```

# audio - 音频工具开发

> ID：10542102
> 
> 赞同：3
> 
> 时间：2012-05-10T21:03:28.283
> 
> 标签：audio

我需要一些关于从哪里开始音频工具开发的有效建议。我从事图形编程已有好几年了，我认为将我的知识扩展到另一个完全不同的方向将是一次令人耳目一新的经历。对于像我这样的新手来说，你认为哪里有一个好的起点？一开始，一些产生刺耳声音的代码行已经让我很高兴了。在针对跨平台支持时，您会推荐什么音频 API？我一般要考虑什么？

我很可能错过了向您提供重要信息以明确我的意图，所以问吧！

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:21:32.893

图形需要你对几何投影、渲染、纹理等有很多了解。

音频要求您对信号发生器、滤波器等有很多了解。[我显然不是专家]。但是就像图形的东西一样，阅读一本好书，信号处理的基础知识可能会对你有很大帮助。此外，像图形一样，获取别人的工具并玩弄以了解他们认为问题是什么以及他们可以做什么样的事情是有意义的。

然后，也只有到那时，我才会尝试编写一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T22:15:08.213

你没有提到任何特定的语言，但无论如何我建议先尝试一些更高级别的探索性工具来进行分析/综合。如果你想探索合成器、振荡器、滤波器等，那么你可以试试[SynthMaker 之](http://synthmaker.co.uk/index.html)类的东西。如果您想尝试音频分析，请尝试使用[Marsyas](http://marsyas.info/)等工具。如果您想处理流式音频和播放列表，请查看[Echo Nest API](http://the.echonest.com/platform/)。一旦您探索了这些更高级别的工具，那么它将为您提供深入研究算法的起点。鉴于您有图形方面的背景，那么您应该熟悉信号处理和滤波方面的大部分内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T23:26:58.507

讨论音频处理和编程的好地方是 KVR 音频网站上的[dsp 和插件开发论坛](http://www.kvraudio.com/forum/viewforum.php?f=33)。虚拟乐器和插件是尝试音频编程的好方法，因为音频 I/O 通常由主机软件处理。这会让你快速制造噪音。学到的技能使插件很好地转移到其他音频应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T07:09:22.607

假设您对 c 非常熟悉，我认为最好的起点是 C Sounds [http://www.csounds.com/](http://www.csounds.com/) 它是一个跨平台的音频处理环境，适用于包括算法组成在内的任意数量的音频任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-17T18:41:42.070

[制作音频插件](http://www.martin-finke.de/blog/tags/making_audio_plugins.html)提供了一个非常温和的开始，无需过多的 DSP 数学。

这些教程从一开始就展示了如何创建合成器。使用的框架是跨平台的（Win/Mac），可以编译成独立的应用程序以及所有主要的插件格式。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-11-24T20:42:25.713

如果有人偶然发现这个问题并喜欢使用 Python，请尝试使用[Nsound](http://nsound.sourceforge.net/users_guide/intro/getting_started.html)：

```
$ pip install nsound 
```

介绍视频[在这里](https://www.youtube.com/watch?v=j4uLvl68PtI)。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-11-24T21:12:41.680

你没有提到语言。我一直在用 Java 进行音频开发，利用核心语言函数和 javax.sound.sampled 库。对于“真实世界”的工具，C 语言可能要好一些。但是在 Java 中有一些用途，例如游戏。如果你想看看我做了什么，有两个链接可以查看：

[主页 web 应用程序](http://adonax.com/main/musicapps.htm)

[正在进行中的音频库演示](http://www.java-gaming.org/topics/audio-library-demos/36682/msg/348918/view.html#msg348918)

这主要是如果你想自己动手。您可以做很多事情，而无需使用像滤波器​​这样的重型 DSP。您仍然可以播放回声、合唱、镶边、FM 合成、波表合成、各种混音等效果。

如果您想使用库，我认为可以尝试的好方法是 Processing、PD、CSound，还有一些我很难记住。

此外，也许可以查看[Praxis-live](http://www.java-gaming.org/topics/audio-library-demos/36682/msg/348918/view.html#msg348918)以获取实时编码音频。

# android - 在 Sherlock 操作栏中显示不确定的进度

> ID：10542103
> 
> 赞同：20
> 
> 时间：2012-05-10T21:03:30.560
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在尝试通过以下代码在 ABS v. 4.0.2 中显示不确定的进度条

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);

    setContentView(R.layout.main);

    getSherlock().setProgressBarIndeterminateVisibility(true);
} 
```

在 ICS 虚拟设备上它工作正常，但在 Android 2.1 的设备中不显示进度。我做错了什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-16T09:46:24.750

确保您导入`com.actionbarsherlock.view.Window`，而不是`android.view.Window`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-11T02:36:40.227

尝试`setSupportProgressBarIndeterminateVisibility(boolean)`获得向后兼容性。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-18T23:48:24.867

做这个：

```
requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
setContentView(R.layout.section_one1);
setSupportProgressBarIndeterminateVisibility(false); 
```

在任何可点击的东西上，比如通过意图或适配器开始一个活动，或者在点击时显示你的进度条

```
setSupportProgressBarIndeterminateVisibility(true); 
```

但是当用户返回活动时使用此方法，进度对话框仍然可见。有很多方法可以阻止它，但最简单的方法就是使用

```
 @Override
    public void onBackPressed()
    { 
    NavUtils.navigateUpFromSameTask(this);
        super.onBackPressed();
    } 
```

# visual-studio - 在没有适当的 Visual Studio 的情况下拥有 BizTalk Server Developer Edition 有什么意义吗？

> ID：10542104
> 
> 赞同：1
> 
> 时间：2012-05-10T21:03:39.323
> 
> 标签：visual-studio, biztalk

Microsoft 提供了[免费的 BizTalk Server 开发人员版](http://www.microsoft.com/biztalk/en/us/developer.aspx)。我想做一些 BizTalk 开发，以深入了解我认为有趣的企业技术。现在，[BizTalk Server 系统要求](http://www.microsoft.com/biztalk/en/us/system-requirements.aspx)列出了 Visual Studio 的完整版本，作为 BizTalk 开发人员工具的先决条件：

> Microsoft Visual Studio 2010 为快速构建以任何设备为目标并与任何平台集成的应用程序提供了一个开发环境。这是 BizTalk Server 和 BizTalk RFID 的开发人员工具和 SDK 组件所必需的。开发人员工具和 SDK 组件不能安装在 Visual Studio 2010 速成版上。

有一个编排 (BizTalk) 的视频[示例，](http://www.youtube.com/watch?v=NLEvSF0Bpzw)可让您了解 VS 开发工具的外观。

是否可以在没有开发工具的情况下进行 BizTalk 开发？是否有意义？在没有非 Express 版本的 Visual Studio 的开发人员机器上安装 BizTalk Server 有什么意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T02:48:27.013

您应该能够安装 BizTalk Server 运行时，这将允许您在 BizTalk Server 管理控制台中进行挖掘。您可以使用它来创建发送和接收消息的端口，而无需 Visual Studio。

但是，这大约是您在没有 Visual Studio 的情况下所能达到的程度。您将需要它来编译模式、构建映射以转换数据以及创建编排。

# android - 如何在线性布局中使用 java 代码将 textView 居中

> ID：10542105
> 
> 赞同：1
> 
> 时间：2012-05-10T21:03:45.283
> 
> 标签：android, textview, android-linearlayout

所以我想在线性布局中居中文本视图，其中我有 2 个其他对象填充线性布局。我有一个 imageView 和另一个 textView。我将如何将 textView 居中以使文本位于屏幕中间？这就是我到目前为止所拥有的。

```
View linearLayout = findViewById(R.id.rockLayout);
        ImageView mineralPicture = new ImageView(this);
        TextView mineralName = new TextView(this);
        TextView mineralProperties = new TextView(this);
        mineralProperties.setText("The properties are: " + Statics.rockTable.get(rockName).getDistinctProp());
        mineralProperties.setId(2);
        mineralName.setText("This mineral is: " + rockName);
        mineralName.setGravity(Gravity.CENTER);
        mineralName.setId(1);
        mineralName.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
        mineralProperties.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
        mineralPicture.setId(3);
        mineralPicture.setImageResource(R.drawable.rocks);
        mineralPicture.setAdjustViewBounds(true);
        mineralPicture.setMaxHeight(100);
        mineralPicture.setMaxWidth(200);
        mineralPicture.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

        ((LinearLayout)linearLayout).addView(mineralName);
        ((LinearLayout)linearLayout).addView(mineralProperties);
        ((LinearLayout)linearLayout).addView(mineralPicture); 
```

我应该提一下，我已经尝试过诸如 MineralName.setGravtiy(Gravity.CENTER); 之类的事情。它没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:15:59.240

a）让textview`match_parent`在宽度上并使用重心

b）在 textview 布局参数上设置`layout_gravity`为中心（对不起，我通常在 XML 中这样做）！

# java - 将 xml 中的键/值对列表读取到数组或列表中的最快方法是什么

> ID：10542110
> 
> 赞同：0
> 
> 时间：2012-05-10T21:04:02.080
> 
> 标签：java, android, xml

我有一个 XML/Xcode plist 文件。

```
<array>
<dict>
  <key>notes</key>
     <array>
        <string>C3</string>
        <string>C3</string>
        <string>D3♭&lt;/string>
        <string>F4</string>
     </array>
     <key>tuneName</key>
        <string>My Melody</string>
   </dict>
  <dict>
     <key>notes</key>
     <array>
        <string>C</string>
        <string>A</string>
        <string>G</string>
        <string>F4</string>
     </array>
     <key>tuneName</key>
        <string>My Other Melody</string>
   </dict>
</array> 
```

在 Objective-C 中，它就像`NSMutableArray *defaultData = [[[NSMutableArray alloc]initWithContentsOfFile:pathToDefaultPlist] autorelease];`

并保存它：`[defaultData writeToFile:pathToDefaultPlist atomically:NO];`

这将自动创建一个带有字典子对象的可变数组，其对象又可以是数组。

有没有一种简单的方法可以在 Java 中做到这一点，还是我必须自己解析文件？此外，Java 中的 NSMutableDictionary 等效类型是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:13:18.833

我不认为你可以在资源文件中创建哈希，你只能创建数组。

最好的方法是创建一个字符串数组资源，在加载它们时需要对其值进行解析。

例如

```
<string-array name="my_hash_hack">
   <item>"KEY1:VALUE1,VALUE2,VALUE3"</item>
   <item>"KEY2:VALUE1,VALUE2,VALUE3"</item>
</string-array> 
```

我敢肯定还有其他方法可以实现相同的目标，但这为您提供了总体思路。

# javafx - ARM 的 JavaFx (Raspberry Pi / BeagleBoard)

> ID：10542116
> 
> 赞同：4
> 
> 时间：2012-05-10T21:04:25.023
> 
> 标签：javafx, raspberry-pi

我在将应用程序移植到 ARM 平台时遇到了很多问题。我尝试了适用于简单应用程序但适用于音频播放器的 Java Embedded SE。

我读了这个 [https://blogs.oracle.com/oslab/entry/javafx_application_on_the_ai](https://blogs.oracle.com/oslab/entry/javafx_application_on_the_ai)

和

[http://www.i-programmer.info/news/91-hardware/4167-javafx-runs-on-raspberry-pi.html](http://www.i-programmer.info/news/91-hardware/4167-javafx-runs-on-raspberry-pi.html)

是否有计划在 ARM 上开发/支持 JavaFX。从博客看来，某个地方似乎有一个测试版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T21:24:34.620

Oracle 发布了[JavaFX for ARM 的公共开发人员预览版，该预览版针对 Beagleboard 进行了测试](http://www.oracle.com/technetwork/java/javafx/downloads/supportedconfigurations-1506746.html)。

**更新**

现在还有一个[用于 Raspberry Pi 的 JavaFX 的公共 JDK8 早期访问版本](http://jdk8.java.net/fxarmpreview/javafx-arm-developer-preview.html)。

# iphone - 从地图视图中添加和删除 MKAnnotation

> ID：10542117
> 
> 赞同：0
> 
> 时间：2012-05-10T21:04:25.433
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios5

我有一个使用 MapView 的应用程序，并且我有 4 种类型的 MKAnnotation。我在屏幕上也有 4 个按钮。每个按钮都应该显示或隐藏一种 MKannotation 类型。我能够跟踪类型并删除它们。但是当我尝试添加任何 MKannotation 时，我收到一条错误消息。经过搜索，我发现了一个类似的问题，但尚未得到解答。

```
An instance 0x6ec5750 of class MapPoint was deallocated while key value observers were    still registered with it. Observation info was leaked, and may even become mistakenly attached  to some other object. 
```

[ios5从地图视图中删除注释](https://stackoverflow.com/questions/8597441/ios5-removing-annotation-from-a-mapview)

首先，我在调用 Web 服务后添加 MKAnnotation：

```
for (int x=0; x<PromotionsArray.count; x++) 
{
    Promotion *pr = [PromotionsArray objectAtIndex:x];
    CLLocationCoordinate2D newCoord ={ pr.promotionLatitude, pr.promotionLongitude};
    MapPoint *mp= [[MapPoint alloc] initWithCoordinate:newCoord];
    mp.currentTitle=pr.PromotionTitle;
    mp.currentSubTitle=pr.RetailerName;
    mp.currentPromotionArrayID=[NSString stringWithFormat:@"%d",x];
    mp.currentRetailerID = pr.RetailerID;
    mp.currentPromotionType = pr.PromotionType;
    [mapView addAnnotation:mp];
} 
```

现在我在人视图上有 4 个按钮。Type1、Type2、Type3 和 Type4 按钮。如果我单击 Type1 按钮，它将使用以下完美运行的代码删除 Type1 的所有 MKAnnotation：

```
for (id <MKAnnotation>  myAnnot in [mapView annotations])
    {
        if (![myAnnot isKindOfClass:[MKUserLocation class]])
        {
            if([(MapPoint *)myAnnot currentPromotionType]==PromotionType1)
            {
                NSLog(@"Hiding All Type1 Annotations");
                [mapView removeAnnotation:myAnnot];
            }
        }
    } 
```

现在，如果我想再次显示 Type1，我使用以下导致问题的代码：

```
 for (int x=0; x<PromotionsArray.count; x++) 
    {
        Promotion *pr = [PromotionsArray objectAtIndex:x];
        if (pr.promotionType==PromotionType1) 
        {
            CLLocationCoordinate2D newCoord ={ [pr.promotionLatitude doubleValue],[pr.promotionLongitude doubleValue]};
            MapPoint *map= [[MapPoint alloc] initWithCoordinate:newCoord];
            map.currentTitle=pr.PromotionTitle;
            map.currentSubTitle=pr.RetailerName;
            map.currentPromotionArrayID=[NSString stringWithFormat:@"%d",x];
            [mapView addAnnotation:map];
        }
    } 
```

问题出现在这一行 [mapView addAnnotation:map]; 这导致了我提到的错误消息 relier（又是这里）

```
An instance 0x6ec5750 of class MapPoint was deallocated while key value observers were    still registered with it. Observation info was leaked, and may even become mistakenly attached  to some other object. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:00:47.920

现在工作，问题完全是另一种方法。我试图通过这样做将双精度值转换为 NSString：

```
[Nsstring stringWithFormat:@"%d",doubleVal]; 
```

%d 应该是 %f !!!! 这是一个愚蠢的小错误。感谢所有人的帮助和@AnnaKarenina 的提示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T10:09:47.303

```
// REMOVING ALL ANNOTATION
    for (id <MKAnnotation>  myAnnot in [objMapView annotations])
    {
        if (![myAnnot isKindOfClass:[MKUserLocation class]])
        {
            [objMapView removeAnnotation:myAnnot];
        }
    } 
```

# php - 短信控制的PHP

> ID：10542119
> 
> 赞同：0
> 
> 时间：2012-05-10T21:04:40.477
> 
> 标签：php, sms, voice

我正在寻找创建一个基于接收和文本内容运行的脚本。所以我给一个电话号码（谷歌语音号码）发短信。脚本读取它并根据内容执行。有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:27:53.163

我们使用一个名为 textmagic 的 SMS 提供商，但很多都是一样的，因为它们提供了一个 API 供使用和/或电子邮件通知。您可以设置您的帐户，以便在收到短信时向您发送电子邮件或调用包含客户参数的网页（实际上反过来也可以发回短信）。

我们曾经做的一件事是将手机连接到 COM 端口并使用我们自己的 SIM 卡，但这非常hacky，应该作为最后的手段使用。

# php - 从字符串中删除 < 的 htmlspecialchars() 问题

> ID：10542122
> 
> 赞同：1
> 
> 时间：2012-05-10T21:04:46.147
> 
> 标签：php, html

我正在从表中提取一些类别名称，并且正在使用 htmlspecialchars() 来处理我为类别名称返回的字符串。问题是数百个类别名称中的一个正在以错误的结束标记进行回显。这是我正在回显的字符串的简化版本：

```
$value['CATNAME'] = htmlspecialchars($value['CATNAME']);

echo '<a href="somepage.php?parms=foo">'. $value['CATNAME']. '</a>'; 
```

除了坏的链接外，所有链接都正确显示。它被回应为

```
<a href="somepage.php?parms=foo">AR North/a> 
```

如果没有注释掉 htmlspecialchars() 行，它的输出会带有正确的结束标记。我查看了表中的字符串，也没有任何问题。这似乎是一个 PHP 问题，还是我应该在别处寻找？我怀疑可能有一些 javascript 弄乱了标签，这就是我接下来打算看的地方。

谢谢。

编辑：更新

我现在正在尝试的更详细的代码：

```
 // Convert characters with special HTML significance
        $value['CATNAME'] = utf8_encode($value['CATNAME']);
        $value['CATNAME'] = htmlspecialchars($value['CATNAME']);
        // Print the list item. If the currently selected Id is equal to the category being listed indicated so by marking it

        if ($selectedCat === $value['CATID'])
            echo '<li id="catSel"><a href="page.php?id=' . $value['parm1'] . '&amp;pl=' . $_SESSION['parm2'] . '">' . $value['CATNAME'] . '</a>';
        else
            echo '<li><a href="page.php?id='. $value['parm1']. '&amp;pl='. $_SESSION['parm2']. '">'. $value['CATNAME']. '</a>'; 
```

还在给我

```
<li><a href="somepage.php?id=185&amp;pl=10">AR North/a></li> 
```

但是如果我将最后一行更改为

```
$value['CATNAME']. '</a>'; to $value['CATNAME']. ' </a>'; 
```

我明白了

```
<li><a href="catview.php?id=185&amp;pl=10">AR North </a></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:17:50.473

该字符串可能隐藏了一个隐藏的删除字符 (ASCII 127)。尝试以十六进制回显字符串，看看你是否能找到不寻常的东西。有时这是一个简单的编码问题，在运行 htmlspecialchars 之前将字符串编码为 utf-8 可能会修复它。

# python - Python：保存列表并为 AI 学习应用程序恢复它

> ID：10542126
> 
> 赞同：2
> 
> 时间：2012-05-10T21:05:21.647
> 
> 标签：python, artificial-intelligence

我有一个应用程序需要在列表增长时保存它。这是朝着做人工智能学习的方向迈出的一步。无论如何，这是我的代码：

```
vocab = ["cheese", "spam", "eggs"]

word = raw_input()

vocab.append(word) 
```

然而，当代码运行时，finished`vocab`将恢复为*cheese、spam*和*egg*。
即使关闭 Windows CMD 并返回代码编辑阶段，我如何才能使添加到列表中的任何内容永久保留在那里。这够清楚了吗？？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T21:08:23.670

您正在研究更普遍的对象持久性问题。有无数种方法可以做到这一点。如果您刚刚开始，在 Python 中保存/恢复数据结构的最简单方法是使用 pickle 模块。随着您变得更先进，有不同的方法，它们都有自己的取舍……您将在需要时学习。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T21:07:55.143

看看[泡菜](http://docs.python.org/library/pickle.html)

有了它，你可以序列化一个 Python 数据结构，然后像这样重新加载它：

```
>>> import pickle
>>> vocab =["cheese", "spam", "eggs"]
>>> outf=open('vocab.pkl','wb')
>>> pickle.dump(vocab,outf)
>>> outf.close()
>>> quit() 
```

Python 解释器现已退出，重启 Python 并重新加载数据结构：

```
abd-pb:~ andrew$ python
Python 2.7.1 (r271:86882M, Nov 30 2010, 10:35:34) 
[GCC 4.2.1 (Apple Inc. build 5664)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import pickle
>>> pklf=open('vocab.pkl','rb')
>>> l=pickle.load(pklf)
>>> l
['cheese', 'spam', 'eggs'] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-10T21:13:31.283

您可以使用[json](http://docs.python.org/library/json.html)和文件，如下所示：

```
import json

#write the data to a file
outfile = open("dumpFile", 'w')
json.dump(vocab, outfile)

#read the data back in
with open("dumpFile") as infile:
    newVocab = json.load(infile) 
```

这具有作为纯文本文件的优点，因此您可以轻松查看存储在其中的数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T21:14:07.410

您可以使用 pickle，但作为一种技术，它仅限于 python 程序。处理持久性数据的常规方法是将其写入文件。只需从常规文本文件（每行一个单词）中读取您的单词列表，然后写出更新的单词列表。稍后您可以学习如何将此类信息保存在数据库中（比文件更强大但灵活性较低）。

你可以愉快地编程多年而不需要 pickle，但你不能没有文件 i/o 和数据库。

PS。保持简单：除非您需要结构，否则您不需要弄乱 json、pickle 或任何其他结构化格式。

# php - 如何在mongodb中找到数组的最后一项？

> ID：10542128
> 
> 赞同：6
> 
> 时间：2012-05-10T21:05:28.197
> 
> 标签：php, mongodb, mongodb-query, aggregation-framework

我想找到数组中最后一个元素等于某个值的文档。数组元素可以通过特定的数组位置访问：

```
// i.e. comments[0].by == "Abe"
db.example.find( { "comments.0.by" : "Abe" } ) 
```

但是我如何使用最后一项作为条件进行搜索？IE

```
db.example.find( { "comments.last.by" : "Abe" } ) 
```

顺便说一句，我正在使用 php

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-22T11:21:07.703

我知道这个问题很老，但我在回答了一个[类似的新问题](https://stackoverflow.com/a/21952273/2313887)后在谷歌上找到了它。所以我认为这应该得到同样的待遇。

您可以通过使用[聚合](http://docs.mongodb.org/manual/reference/method/db.collection.aggregate/)来避免[$where](http://docs.mongodb.org/manual/reference/operator/query/where/)的性能损失：

```
db.example.aggregate([

    // Use an index, which $where cannot to narrow down
    {$match: { "comments.by": "Abe" }},

    // De-normalize the Array
    {$unwind: "$comments"},

    // The order of the array is maintained, so just look for the $last by _id
    {$group: { _id: "$_id", comments: {$last: "$comment"} }},

    // Match only where that $last comment by `by.Abe`
    {$match: { "comments.by": "Abe" }},

    // Retain the original _id order
    {$sort: { _id: 1 }}

]) 
```

这应该在*$where*附近运行，因为我们能够首先缩小**具有**“Abe”评论的文档的范围。正如警告的那样，*$where*将测试集合中的每个文档，并且即使有要使用的索引，也从不使用索引。

当然，您也可以使用[此处描述的技术](https://stackoverflow.com/a/21721480/2313887)维护原始文档，因此一切都可以像`find()`.

对于任何发现这一点的人来说都是值得深思的。

* * *

## 现代 MongoDB 版本的更新

现代版本添加了[`$redact`](https://docs.mongodb.com/manual/reference/operator/aggregation/redact/)管道表达式以及（后者从 3.2 开始，因此这将是这里的最小版本），这将允许逻辑表达式在不处理阶段[`$arrayElemAt`](https://docs.mongodb.com/manual/reference/operator/aggregation/arrayElemAt/)的情况下检查数组的最后一个元素：[`$unwind`](https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/)

```
db.example.aggregate([
  { "$match": { "comments.by": "Abe" }},
  { "$redact": {
    "$cond": {
      "if": {
        "$eq": [
          { "$arrayElemAt": [ "$comments.by", -1 ] },
          "Abe"
        ]
      },
      "then": "$$KEEP",
      "else": "$$PRUNE"
    }
  }}
]) 
```

这里的逻辑是通过比较在哪里[`$arrayElemAt`](https://docs.mongodb.com/manual/reference/operator/aggregation/arrayElemAt/)获取数组的最后一个索引完成的`-1`，它被转换为属性中的值的数组`"by"`via [`$map`](https://docs.mongodb.com/manual/reference/operator/aggregation/map/)。这允许将单个值与所需参数 进行比较`"Abe"`。

或者更现代一点的使用[`$expr`](https://docs.mongodb.com/manual/reference/operator/query/expr/)MongoDB 3.6 及更高版本：

```
db.example.find({
  "comments.by": "Abe",
  "$expr": {
    "$eq": [
      { "$arrayElemAt": [ "$comments.by", -1 ] },
      "Abe"
    ]
  }
}) 
```

这将是迄今为止匹配数组中最后一个元素的最高效的解决方案，并且实际上有望取代[`$where`](http://docs.mongodb.org/manual/reference/operator/query/where/)在大多数情况下的使用，尤其是在这里。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T22:22:43.483

使用此架构设计，您无法一次性完成此操作。您可以存储长度并执行两个查询，或者将最后一条评论另外存储在另一个字段中：

```
{
    '_id': 'foo';
    'comments' [
        { 'value': 'comment #1', 'by': 'Ford' },
        { 'value': 'comment #2', 'by': 'Arthur' },
        { 'value': 'comment #3', 'by': 'Zaphod' }
    ],
    'last_comment': {
        'value': 'comment #3', 'by': 'Zaphod'
    }
} 
```

当然，您将复制一些数据，但至少您可以将这些数据`$set`与`$push`.`comment`

```
$comment = array(
    'value' => 'comment #3',
    'by' => 'Zaphod',
);

$collection->update(
    array( '_id' => 'foo' ),
    array(
        '$set' => array( 'last_comment' => $comment ),
        '$push' => array( 'comments' => $comment )
    )
); 
```

现在很容易找到最后一个！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-05T01:23:14.613

您可以使用操作员执行此[`$where`](http://docs.mongodb.org/manual/reference/operators/#_S_where)操作：

```
db.example.find({ $where: 
    'this.comments.length && this.comments[this.comments.length-1].by === "Abe"' 
}) 
```

应用程序通常的缓慢性能警告`$where`。但是，您可以通过`"comments.by": "Abe"`在查询中包含以下内容来提供帮助：

```
db.example.find({
    "comments.by": "Abe",
    $where: 'this.comments.length && this.comments[this.comments.length-1].by === "Abe"' 
}) 
```

这样，`$where`只需要针对包含 Abe 评论的文档进行评估，新术语就可以在`"comments.by"`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-05-09T11:58:02.993

我只是在做：

```
db.products.find({'statusHistory.status':'AVAILABLE'},{'statusHistory': {$slice: -1}}) 
```

这让我知道数组中`products`的最后一项包含属性。`statusHistory``status='AVAILABLE'`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T23:17:52.990

我不确定为什么我上面的答案被删除了。我正在重新发布它。我很确定在不更改架构的情况下，您应该可以这样做。

```
db.example.find({ "comments:{$slice:-1}.by" : "Abe" } 
```

// ... 或者

```
db.example.find({ "comments.by" : "Abe" } 
```

默认情况下，这采用数组中的最后一个元素。

# sql - 如何对跨数据库使用的主键 ID 进行大量搜索，其中这些主键 ID 在列中具有相似的值

> ID：10542131
> 
> 赞同：0
> 
> 时间：2012-05-10T21:05:39.723
> 
> 标签：sql, database, reporting, analytics

BackDrop：我们正在研究为什么在一个过程中遗漏了许多帐户。我们已经回到我们有数据的地方。我们现在有一个相当大的帐户列表，无论出于何种原因，这些帐户都被遗漏了。现在这个过程没有过多的细节是非常非常复杂的，我们需要知道为什么这些账户并且只有这些账户被遗漏了。与任何数据库一样，我们有许多一直在运行的自动化程序，所以在这一点上真的不知道到底发生了什么导致这些帐户被遗漏。我认为解决这个问题的唯一办法是找到这些帐户之间的相似之处。显然，我们已经尝试查看更常见的地方，但此后一无所获。

问题：我想使用 SQL 返回我们数据库中的所有表名和列名，其中这些帐户列表在表的一列或多列中具有相同的值。我创建了一个查询来查找表名、列等，但不知道如何将它们组合在一起以创建一个查询，该查询将为我提供我想要的所有结果。我确信需要使用游标并进行大量内部连接，但我只是不确定应该如何完成。
再说一遍：假设我有帐号 123456 和 654321，并且我知道我们的数据库有 3,000 个表，其中列引用了帐号，名称为 AccountNumber、AccountNum 或 Account。我想搜索并查找具有名称为 AccountNumber、AccountNum 或 Account 的列的所有表，其值为 123456 或 654321。然后对于这些表，对于每个表，我要获取行 Where 列是否名称是 AccountNumber、AccountNum 或 Account 的值是 123456 和 654321，然后对于这些行中的每一行，我想检查每一行的每一列，以查看帐号 123456 的行上的列是否等于 a 上的列帐号 654321 的行，如果是，那么我希望它返回列名和表名。通过这种方式，我可以看到这些帐户的共同点。

高级部分：

如果某个可怜的灵魂能够做到以上几点，那么我还想创建一个查询，该查询将返回表名及其更新时间。我将通过检查每个表中的每一列来获得更新的值，如果该列具有“时间戳”类型或“GetDate()”的默认值，那么该列将被用作更新。在最终结果集中，显示所有更改都发生在那些将按更新排序的帐户编号上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:34:29.887

第一种方法，质朴的（我不习惯 T-SQL，我做了更多的 PL/SQL），但这可能会帮助你走得更远，并在 SQL SERVER 2008 中测试。希望它在 2005 年有效......）

所以，我们创建了两个过程，一个调用另一个

提供的代码只能一次检查 - 2 个不同的 ID - 所有相关字段（Account、AccountNum、AccountNumber）

这个想法（检查 AccountNumber 列）

查找表（在表 INFORMATION_SCHEMA.columns 中，其中列出了您的数据库表），其中的列具有提供的 3 个名称之一

对于找到的每个表：创建一个动态查询：

```
select count(*) from <THE_TABLE> where <Account_column_name> IN (123456 654321); 
```

如果我们有 2 个结果（意味着我们的 Id 都存在于表中），我们启动第二个过程，参数为 : `@TableName = <THE_TABLE>`, `@FieldName = <Account_column_name>`, `@FirstId = 123456`,`@SecondId = 654321`

`<THE_TABLE>`我们找到了（同样在 INFORMATION_SCHEMA.columns 中）的列名。对于找到的每一列：创建一个动态查询

```
select count(*) from <THE_TABLE> as T1
inner join <THE_TABLE> as T2 on T1.<COLUMN_NAME> = T2.<COLUMN_NAME>
where T1.<Account_column_name>= 123456
and T2.<Account_column_name>= 654321 
```

如果`count(*) = 1`，则表示对于给定的 id，相同的值存在于同一张表的同一列中。

在这种情况下，我们打印`<THE_TABLE>`并`<THE_COLUMN>`

要启动搜索，在 sql management studio 中，只需

```
EXEC GetSimilarValuesForFieldAndValue  123456, 654321 
```

在“消息”部分，您应该有一个“结果”列表。

```
CREATE procedure [dbo].[GetSimilarValuesForFieldAndValue](@FirstId int, @SecondId int)
AS

DECLARE @sql nvarchar(MAX);
DECLARE @params NVARCHAR(MAX);
DECLARE @Count int;
DECLARE @Name NVARCHAR(MAX);
DECLARE @FieldName NVARCHAR(MAX);

DECLARE db_cursor CURSOR for
select TABLE_NAME, COLUMN_NAME FROM INFORMATION_SCHEMA.columns
where COLUMN_NAME IN('Account', 'AccountNumber', 'AccountNum');

OPEN db_cursor
FETCH next from db_cursor into @Name, @FieldName
while @@FETCH_STATUS = 0
 begin
     select @sql = 
     N' SELECT @Count=Count(*) FROM ' + @Name +
     N' WHERE ' +@FieldName+' IN (@FirstId,@SecondId)'
     SELECT @params = N'@FieldName NVARCHAR(MAX), @FirstId int, @SecondId int, @Count int out'
     EXEC sp_executesql @sql, @params, @FieldName, @FirstId, @SecondId, @Count OUT
     if (@Count = 2)
     begin
      exec dbo.CompareFields @Name, @FieldName, @FirstId, @SecondId
     end
     FETCH NEXT FROM db_cursor INTO @Name, @FieldName    
 end
 close db_cursor
 DEALLOCATE db_cursor
GO 
```

第二个 ：

```
CREATE procedure [dbo].[CompareFields](@TableName NVARCHAR(MAX), @FieldName NVARCHAR(MAX), @FirstId int, @SecondId int)  
as

DECLARE @ColumnName NVARCHAR(MAX)
DECLARE @Sql NVARCHAR(MAX)
DECLARE @Params NVARCHAR(MAX)
DECLARE @Count int

DECLARE cfCursor CURSOR FOR
SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS
where TABLE_NAME = ''+@TableName+' '
AND COLUMN_NAME <> ' '+@FieldName+''

OPEN cfCursor
  FETCH next from cfCursor into @ColumnName
  while @@FETCH_STATUS = 0

    begin
    select @Sql = 
    N' SELECT @Count = count(*) from ' +@TableName + ' T1 '+
    N' INNER JOIN ' + @TableName + ' T2 ON T1.' +@ColumnName + ' = T2.' + @ColumnName +
    N' WHERE T1.' +@FieldName + ' = '+ CAST(@FirstId as varchar) +
    N' AND T2.' + @FieldName + ' = '+CAST(@SecondId as varchar)
    SELECT @Params = 
    N'@TableName VARCHAR(MAX), @ColumnName VARCHAR(MAX), '+
    N'@FieldName VARCHAR(MAX), @FirstId int, @SecondId int, @Count int out'
    exec sp_executesql  @sql, @Params, @TableName, @ColumnName, @FieldName, @FirstId, @SecondId, @Count OUT
    if @Count = 1
    begin
    --print tableName and column Name if value is identic
     print 'Table : ' + @TableName + ' : same value for ' + @ColumnName
    end
    FETCH NEXT FROM cfCursor INTO @ColumnName    
    end
 close cfCursor

 DEALLOCATE cfCursor
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:14:07.503

实际上，我曾经一度不得不为 Guids 做这件事。这是使用 Guids 的脚本。一秒钟，我将根据您的需要对其进行修改：

```
DECLARE @table VARCHAR(100)
DECLARE @column VARCHAR(100)
DECLARE @value INT

SET @value = '06B8BD6C-A8EC-4EB3-9562-6666EE86952D'

DECLARE table_cursor CURSOR
FOR select tbl.Name, cols.name as TableName  FROM sys.columns cols  JOIN 
    sys.tables tbl on cols.object_id = tbl.object_id
    where system_type_id = 36

OPEN table_cursor 
FETCH NEXT FROM table_cursor 
INTO @table, @column;

WHILE @@FETCH_STATUS = 0
BEGIN
DECLARE @SQL NVARCHAR(1000)

SET @SQL = 'SELECT ''' + @Table + '''  AS TBL,''' + 
@column + ''' AS COL FROM [' + @table + '] 
WITH(NOLOCK) WHERE ' + @column + ' = ''' + CAST(@value AS VARCHAR(50)) + ''''

    print @sql
EXEC sp_executesql @Sql

FETCH NEXT FROM table_cursor 
INTO @table, @column;

END

CLOSE table_cursor
DEALLOCATE table_cursor 
```

**更新以处理搜索字段名称：**

```
DECLARE @table VARCHAR(100)
DECLARE @column VARCHAR(100)
DECLARE @value UNIQUEIDENTIFIER

SET @value = --ENTER YOUR ACCOUNT NUMBER HERE

DECLARE table_cursor CURSOR

select tbl.Name, cols.name as TableName  FROM sys.columns cols  JOIN 
    sys.tables tbl on cols.object_id = tbl.object_id
    where cols.Name = 'AccountNumber' 
    OR cols.Name = 'AccountNum' OR cols.Name = 'Account'

OPEN table_cursor 
FETCH NEXT FROM table_cursor 
INTO @table, @column;

WHILE @@FETCH_STATUS = 0
BEGIN
DECLARE @SQL NVARCHAR(1000)

SET @SQL = 'SELECT ''' + @Table + '''  AS TBL,''' + @column + 
    ''' AS COL FROM [' + @table + '] WITH(NOLOCK) 
WHERE ' + @column + ' = ''' + CAST(@value AS VARCHAR(50)) + ''''
    print @sql
    EXEC sp_executesql @Sql

FETCH NEXT FROM table_cursor 
INTO @table, @column;

END

CLOSE table_cursor
DEALLOCATE table_cursor 
```

# jquery - 使用 .detach() + .appendTo() 进行 jQuery 复选框过滤

> ID：10542133
> 
> 赞同：0
> 
> 时间：2012-05-10T21:05:58.527
> 
> 标签：jquery, html

我可能遗漏了一些非常简单的东西，但情况如下：

我有一排复选框和一个列表项网格。我希望复选框根据检查的内容切换列表项的可见性（只是标准过滤）。

我已经确定我必须使用 jQuery .detach() 和 .appendTo() 函数，因为当列表项消失/重新出现时，这将使我的所有 :nth-child 属性保持不变。

这是我的 HTML：

```
<div id="filter">
  <input type="checkbox" id="print" rel="print">Print</label>
  <input type="checkbox" id="web" rel="web">Web</label>
  <input type="checkbox" id="identity" rel="identity">Identity</label>
</div> 
```

然后我在类字段中有大量带有各种标签名称的 LI——

```
<ul>
  <li class="print">
    // stuff
  </li>
  .
  .
  .
</ul> 
```

现在对于我的 jQuery（它在您第一次单击过滤器复选框时起作用，但在那之后它什么也不做......）

```
$('#filter').delegate('input:checkbox', 'change', function() {  
   var $lis = $('#grid-wrap > li').detach();        

   //For each one checked
   $('input:checked').each(function() {
     $lis.filter('.' + $(this).attr('rel')).appendTo('#grid-wrap');
    });  
}); 
```

任何帮助将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:12:49.170

如果我理解正确，那么您正在尝试`li`根据选择显示/隐藏 's 。如果我这不是你想要的，让我知道，

[**演示**](http://jsfiddle.net/skram/W2LRg/4/)

```
var $lis;

$('#filter').delegate('input:checkbox', 'change', function() {

    if (!$lis) $lis = $('#grid-wrap > li').detach();
    $('#grid-wrap').empty();

    if ($('input:checked').length == 0) {
        $lis.appendTo('#grid-wrap');
        $lis = null;
    } else {
        $('input:checkbox').each(function(i, chk) {
            if (chk.checked) {
                $lis.filter('.' + $(chk).attr('rel')).appendTo('#grid-wrap');
            }
        });

    }
}); 
```

# java - 避免未经检查的强制强制转换为事件发布者的 Java 中的通用接口集合

> ID：10542140
> 
> 赞同：3
> 
> 时间：2012-05-10T21:06:38.043
> 
> 标签：java, generics

我正在尝试为我正在构建的 Android 应用创建一个轻量级、线程安全的应用内发布/订阅机制。我的基本方法是跟踪`IEventSubscriber<T>`每个事件类型 T 的列表，然后能够通过传递类型 T 的有效负载将事件发布到订阅对象。

我使用泛型方法参数（我认为）确保以类型安全的方式创建订阅。因此，我很确定，当我从订阅映射中获取订阅者列表时，需要发布一个我可以将其转换为 列表的事件`IEventSubscriber<T>`，但是，这会生成未经检查的转换警告。

我的问题：

1.  未经检查的演员在这里真的安全吗？
2.  我如何才能真正检查订阅者列表中的项目是否实现`IEventSubscriber<T>`？
3.  假设（2）涉及一些令人讨厌的反思，你会在这里做什么？

代码（Java 1.6）：

```
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.ConcurrentMap;
import java.util.concurrent.CopyOnWriteArraySet;

public class EventManager {
  private ConcurrentMap<Class, CopyOnWriteArraySet<IEventSubscriber>> subscriptions = 
      new ConcurrentHashMap<Class, CopyOnWriteArraySet<IEventSubscriber>>();

  public <T> boolean subscribe(IEventSubscriber<T> subscriber,
      Class<T> eventClass) {
    CopyOnWriteArraySet<IEventSubscriber> existingSubscribers = subscriptions.
        putIfAbsent(eventClass, new CopyOnWriteArraySet<IEventSubscriber>());
    return existingSubscribers.add(subscriber);
  }

  public <T> boolean removeSubscription(IEventSubscriber<T> subscriber, 
      Class<T> eventClass) {
    CopyOnWriteArraySet<IEventSubscriber> existingSubscribers = 
        subscriptions.get(eventClass);
    return existingSubscribers == null || !existingSubscribers.remove(subscriber);
  }

  public <T> void publish(T message, Class<T> eventClass) {
    @SuppressWarnings("unchecked")
    CopyOnWriteArraySet<IEventSubscriber<T>> existingSubscribers =
        (CopyOnWriteArraySet<IEventSubscriber<T>>) subscriptions.get(eventClass);
    if (existingSubscribers != null) {
      for (IEventSubscriber<T> subscriber: existingSubscribers) {
        subscriber.trigger(message);
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T21:40:47.060

> 未经检查的演员在这里真的安全吗？

相当。您的代码不会造成堆污染，因为订阅的签名确保您只将正确编译时类型的 IEventSubscribers 放入映射中。它可能会在其他地方传播由不安全的未经检查的强制转换导致的堆污染，但您对此无能为力。

> 我如何才能真正检查订阅者列表中的项目是否实现了 IEventSubscriber？

通过将每个项目转换为`IEventSubscriber`. 您的代码已在以下行中执行此操作：

```
for (IEventSubscriber<T> subscriber: existingSubscribers) { 
```

如果`existingSubscribers`包含不可分配给的对象`IEventSubscriber`，则此行将引发 ClassCastException。迭代未知类型参数列表时避免警告的标准做法是显式转换每个项目：

```
List<?> list = ...
for (Object item : list) {
    IEventSubscriber<T> subscriber = (IEventSubscriber<T>) item;
} 
```

该代码明确检查每个项目是否为`IEventSubscriber`，但无法检查它是否为`IEventSubscriber<T>`。

要实际检查 的类型参数`IEventSubscriber`，`IEventSubscriber`需要帮助您。这是由于擦除，特别是考虑到声明

```
class MyEventSubscriber<T> implements IEventSubscriber<T> { ... } 
```

以下表达式将始终为真：

```
new MyEventSubscriber<String>.getClass() == new MyEventSubscriber<Integer>.getClass() 
```

> 假设（2）涉及一些令人讨厌的反思，你会在这里做什么？

我会保持原样的代码。很容易推断强制转换是正确的，而且我认为不值得花时间重写它以在没有警告的情况下进行编译。如果你确实想重写它，下面的想法可能有用：

```
class SubscriberList<E> extends CopyOnWriteArrayList<E> {
    final Class<E> eventClass;

    public void trigger(Object event) {
        E event = eventClass.cast(event);
        for (IEventSubscriber<E> subscriber : this) {
            subscriber.trigger(event);
        }
    }
} 
```

和

```
SubscriberList<?> subscribers = (SubscriberList<?>) subscriptions.get(eventClass);
subscribers.trigger(message); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T22:12:25.717

不完全是。*如果*类的所有客户端`EventManager`总是使用泛型而不是原始类型，那将是安全的；即，如果您的客户端代码在没有泛型相关警告的情况下编译。

`IEventSubscriber`但是，客户端代码忽略这些并插入一个期望错误类型的代码并不难：

```
EventManager manager = ...;
IEventSubscriber<Integer> integerSubscriber = ...; // subscriber expecting integers

// casting to a rawtype generates a warning, but will compile:
manager.subscribe((IEventSubscriber) integerSubscriber, String.class);
// the integer subscriber is now subscribed to string messages
// this will cause a ClassCastException when the integer subscriber tries to use "test" as an Integer:
manager.publish("test", String.class); 
```

我不知道防止这种情况的编译时方法，但是*如果*泛型类型*在编译时*绑定到类，您可以`IEventSubscriber<T>`在运行时检查实例的泛型参数类型。考虑：*`T`*

 **```
public class ClassA implements IEventSubscriber<String> { ... }
public class ClassB<T> implements IEventSubscriber<T> { ... }

IEventSubscriber<String> a = new ClassA();
IEventSubscriber<String> b = new ClassB<String>(); 
```

在上面的示例中， for `ClassA`,在编译时`String`绑定到参数。`T`的所有实例都`ClassA`将`String`具有`T`in `IEventSubscriber<T>`。但是在`ClassB`,在运行时`String`是必然的。`T`的实例`ClassB`可能对 有任何价值`T`。如果您在编译时`IEventSubscriber<T>`绑定参数的实现与上面一样，那么您可以通过以下方式在运行时获取该类型：`T``ClassA`

```
public <T> boolean subscribe(IEventSubscriber<T> subscriber, Class<T> eventClass) {
    Class<? extends IEventSubscriber<T>> subscriberClass = subscriber.getClass();
    // get generic interfaces implemented by subscriber class
    for (Type type: subscriberClass.getGenericInterfaces()) {
        ParameterizedType ptype = (ParameterizedType) type;
        // is this interface IEventSubscriber?
        if (IEventSubscriber.class.equals(ptype.getRawType())) {
            // make sure T matches eventClass
            if (!ptype.getActualTypeArguments()[0].equals(eventClass)) {
                throw new ClassCastException("subscriber class does not match eventClass parameter");
            }
        }
    }

    CopyOnWriteArraySet<IEventSubscriber> existingSubscribers = subscriptions.putIfAbsent(eventClass, new CopyOnWriteArraySet<IEventSubscriber>());
    return existingSubscribers.add(subscriber);
} 
```

这将导致在订阅者注册时检查类型`EventManager`，使您可以更轻松地跟踪错误代码，而不是在发布事件时才检查类型。但是，它确实做了一些 hokey 反射，并且只能检查类型是否`T`在编译时绑定。如果您可以信任将订阅者传递给 EventManager 的代码，我会保持原样，因为它更简单。但是，如上所述使用反射检查类型将使您在IMO 中更安全*一些。*

另一个注意事项，您可能希望重构初始化`CopyOnWriteArraySet`s 的方式，因为该`subscribe`方法当前正在每次调用时创建一个新集合，无论是否需要。试试这个：

```
CopyOnWriteArraySet<IEventSubscriber> existingSubscribers = subscriptions.get(eventClass);
if (existingSubscribers == null) {
    existingSubscribers = subscriptions.putIfAbsent(eventClass, new CopyOnWriteArraySet<IEventSubscriber>());
} 
```

这避免了`CopyOnWriteArraySet`在每个方法调用上创建一个新的，但是如果你有一个竞争条件并且两个线程尝试一次放入一个集合，`putIfAbsent`仍然会将创建的第一个集合返回给第二个线程，因此没有覆盖它的危险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T21:32:57.047

由于您的`subscribe`实现确保映射中的每个`Class<?>`键都`ConcurrentMap`正确，因此在从映射中检索时`IEventSubscriber<?>`使用它是安全的。`@SuppressWarnings("unchecked")``publish`

只需确保正确记录警告被禁止的原因，以便将来对类进行更改的任何开发人员都知道发生了什么。

另请参阅这些相关帖子：

[具有相关类型的通用键/值的通用映射](https://stackoverflow.com/questions/2208317/generic-map-of-generic-key-values-with-related-types)

[值受键的类型参数限制的 Java 映射](https://stackoverflow.com/questions/416540/java-map-with-values-limited-by-keys-type-parameter)**

# java - 如何将大文件保存在数据库中。？

> ID：10542141
> 
> 赞同：0
> 
> 时间：2012-05-10T21:06:40.650
> 
> 标签：java, mysql, database, servlets, file-upload

我正在使用 JSP 表单上传和 Servlet 将大型文件存储在 MySQL 数据库中。而且因为我一般是 Java 新手，所以我需要一个非常紧急的帮助。我试图将文件存储在字符串值中，但出现字符串索引超出边界的错误。

我有数据库表 Files 它有 (varchar File_Name, Blob File_data, Varchar File_Date) 。我需要将上传的文件存储在

我在servlet中有这段代码：**顺便说一句：我不知道为什么“DiskFileUpload，parseRequest”有删除线？

```
 try {
         InputStream uploadedFile = null;

         <strike>DiskFileUpload</strike> fu = new </strike>DiskFileUpload</strike>();
        // If file size exceeds, a FileUploadException will be thrown
        fu.setSizeMax(10000000);

        List fileItems = fu.<strike>parseRequest</strike>(request);
        Iterator itr = fileItems.iterator();

        while (itr.hasNext()) {
            FileItem fi = (FileItem) itr.next();

            //Check if not form field so as to only handle the file inputs
            //else condition handles the submit button input
            if (!fi.isFormField()) {  // If the form fiel is a file
                uploadedFile = fi.getInputStream();
            } 
```

我应该转换什么类型的数据 uploadFile cvariable 能够将其存储在 Blob 属性中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:15:52.657

删除意味着 API 已被弃用，这些类/方法可能无法按预期工作。

将文件存储到数据库中，您需要将内容作为字节存储在 blob 文件中。请参阅此[讨论](https://stackoverflow.com/questions/9065687/store-java-object-as-blob-in-mysql-strange-error)。即使它与某些错误有关，OP 也发布了有关如何执行此操作的代码。

# android - Android 自定义图库

> ID：10542142
> 
> 赞同：0
> 
> 时间：2012-05-10T21:06:43.873
> 
> 标签：android, gallery

我有一个大小为 1299 * 625 的图像。我想在画廊视图中显示图像，比如前半部分是一页，第二部分是另一页。对不起，我的英语不好..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:08:30.190

使用[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)并向其中添加两个 ImageView。将图像分成两半并将每一半分配给一个 ImageView。

# android - 在 asynctask 中加载视图

> ID：10542147
> 
> 赞同：1
> 
> 时间：2012-05-10T21:07:08.200
> 
> 标签：android

我的应用程序中有很多视图，这在启动过程中需要很多时间。我正在使用模拟器，显示屏幕大约需要 15 秒。之后应用程序运行良好。

我尝试实现 asynctask 来进行视图加载，但出现错误。Android 文档指出我不应该在 UI 线程之外设置视图。但它没有说，我不能。

如何实现加载视图的加载屏幕。删除视图不是一种选择，因为应用程序正在绘制应用程序并且需要这些视图来快速选择工具。

或者我应该在 onPostExecute() 中设置我的所有视图，然后再调用对话框关闭。但这仍然会冻结 UI 线程。我将处于同样的位置。

我没有在设备上测试过，但我知道如果 UI 线程被阻塞超过 5 秒，它会显示应用程序没有响应对话框。我想阻止它。

我的目标是 SDK 10。此外，它在实际设备上运行时是否需要相同的时间。应用程序适用于三星 Galaxy Note，非常活泼。

PS我的互联网仍然从3天下来。我正在使用我的移动客户端并参考离线 SDK 文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:11:13.830

直接来自文档：

“在任何视图上调用任何方法时，您**必须**始终在 UI 线程上。如果您在其他线程上工作并希望从该线程更新视图的状态，您应该使用处理程序。”

您的视图逻辑必须在 UI 线程上。

[http://developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)

至于“加载”屏幕：

如果可以，尝试分离出与视图无关的逻辑并在后台线程中执行。您可以使用 更新进度条`AsyncTask`。覆盖`onProgressUpdate(`) 并`doInBackground()`在您想要更新进度时调用 publishProgress()。或者你可以只使用不确定的进度。由你决定。

# webforms - 回发在应用程序根目录不起作用 [ASP.NET 4.0]

> ID：10542150
> 
> 赞同：3
> 
> 时间：2012-05-10T21:07:20.793
> 
> 标签：webforms, iis-7, postback, asp.net-4.0

我在一个站点下有许多虚拟应用程序，所有这些都有相同的问题。每当您位于应用程序的根目录 (~/) 时，回发不会触发，页面只会刷新。

以下是一些示例（所有他们自己的虚拟应用程序）：

单击“登录”链接不会重定向到 Login.aspx 页面

*   [http://designbyssi.com/designbyssi.com/projects/air-savings/02/](http://designbyssi.com/designbyssi.com/projects/air-savings/02/)
*   [http://www.designbyssi.com/designbyssi.com/projects/life-furniture/06/](http://www.designbyssi.com/designbyssi.com/projects/life-furniture/06/)

输入用户名/密码，然后单击“login”/“go”不会让用户登录

*   [http://designbyssi.com/designbyssi.com/support/](http://designbyssi.com/designbyssi.com/support/)
*   [http://www.designbyssi.com/](http://www.designbyssi.com/)

出于某种原因，如果您将“Default.aspx”添加到上述任何页面的末尾，则回发将按预期工作（例如[http://designbyssi.com/designbyssi.com/projects/air-savings/02/Default .aspx](http://designbyssi.com/designbyssi.com/projects/air-savings/02/Default.aspx)）。我已经在谷歌上搜索了一段时间，我发现了一些文章，尽管它们都没有帮助。以下是我设法找到的文章：

*   [为什么回发不能在我的域根上工作？](https://stackoverflow.com/questions/916258/why-wont-postbacks-work-on-my-domain-root)
*   [http://forums.asp.net/t/1735380.aspx/1](http://forums.asp.net/t/1735380.aspx/1)
*   [http://forums.asp.net/t/1482960.aspx](http://forums.asp.net/t/1482960.aspx)

我没有使用任何类型的 URL 重写，它们都是 Web 表单应用程序，而且我使用的是 Godaddy 共享主机帐户。

关于可能发生的事情或我需要做些什么来解决它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:04:41.697

我最近遇到了同样的问题，我的开发环境是在集成模式下设置的，而生产是在经典模式下的。dev 中的回发在转到站点的根目录时不起作用，但在转到 Default.aspx 时会起作用。

我现在只是将我的开发环境更改为使用经典模式。此外，此问题不一定与 URL 重写有关。

由于您使用的是共享主机，因此您可能无法这样做，但这些链接可能会有所帮助。

[回发不适用于 aspx 页面作为默认文档](https://stackoverflow.com/questions/7228344/postback-doesnt-work-with-aspx-page-as-default-document)

[在 IIS 7 或 IIS 7.5 集成模式下的默认文档中可能不会引发事件处理程序？](https://stackoverflow.com/questions/4673291/event-handlers-might-not-be-not-raised-in-a-default-document-in-iis-7-or-iis-7-5)

# ruby-on-rails - 如何添加新的控制器来设计控制器结构？

> ID：10542155
> 
> 赞同：1
> 
> 时间：2012-05-10T21:07:28.630
> 
> 标签：ruby-on-rails, devise

我有一个具有设计商家模型的功能应用程序，并且我已经覆盖了注册控制器，所以我有一个文件夹结构，如

```
app/controllers/merchants/registrations_controller.rb 
```

现在我正在尝试添加一个名为 products 的新控制器，以便拥有类似的东西

```
app/controllers/merchants/registrations_controller.rb
app/controllers/merchants/products_controller.rb 
```

当我表演时

```
rails g controller 
```

我得到了所有需要的文件，但由于某种原因，我无法执行 rake 或生成器，因为这个错误

```
undefined method `devise' for #<Class:0x007f929f5b5408> 
```

当我将新控制器添加到设计文件夹时会发生这种情况，在这种情况下是商家文件夹......是否有我不能或我不应该这样做的原因？

我怎样才能做到这一点？也许有更好的方法来做到这一点......如果是这样的话，可能会很好知道它;）

更新：目标是将与商家相关的所有控制器分组到商家文件夹下，我还发现问题是由 app/helpers/merchants/products_helper.rb 中生成的帮助文件生成的，因此删除此文件异常消失.. 。 但为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:56:57.713

为什么将 products_controller 添加到您的设计商家文件夹中？如果目标是为产品控制器验证商家，则可以使用以下方法：

像往常一样将您的 product_controller.rb 放在 app/controller/ 中，并在其中包含此过滤器：

```
before_filter authenticate_merchant! 
```

检查你的 route.rb 中是否有这个（用于自定义注册控制器）：

```
devise_for :merchants, :controllers => {:registrations => "merchants/registrations"} 
```

# php - 你如何在远程服务器上进行自动 git pull？

> ID：10542158
> 
> 赞同：16
> 
> 时间：2012-05-10T21:07:53.487
> 
> 标签：php, git

在开始之前，我知道有很多类似于这个问题的问题，但我真的很难找到一个简洁、安全、最佳实践，因为关于它们的反馈如此广泛。

### 我想做的事：

1.  在我的本地机器上的开发分支上完成工作。
2.  将更改推送到 git。Git 发布到 webhook URL 并自动让我的远程服务器在开发站点上拉取更改。
3.  一旦 QA'd 并确认在开发站点上是正确的，将主分支推送到生产站点（在与开发站点相同的服务器上）。

### 我在哪里：

我在本地机器和远程服务器上安装了 git。我可以将 mod 推送到开发分支到 git。在远程服务器上，我可以拉取更新，它就像一个魅力。问题是当从本地机器推送更改时，我无法让远程服务器自动更新。

### 我的问题是：

1.  对于远程服务器开发站点目录，我应该`git init`还是`git init --bare`？我不打算在服务器本身上进行更新。我希望我的开发团队在本地工作并将模组推送到服务器。我相信我需要使用 git init 因为需要工作树来为 git 存储库设置远程别名，但我想确认一下。
2.  我很确定来自 git 问题的 webhook 帖子是由于用户权限引起的。我怎样才能*安全地*解决这个问题？我已经阅读了许多建议更新 git hook 文件的教程，但我觉得这比我需要采取的措施更加激烈。我希望能够让 webhook 访问一个安全地提取文件的 URL，而无需添加大量代码（如果可能的话）。

我天生就是一名 Web 开发人员，所以 git 和 sysadmin 任务通常是我存在的祸根。同样，我知道这个问题与其他问题相似，但我还没有找到一种全面、简洁、安全和最合乎逻辑的方法来解决这个问题。我大约 16 个小时，并正式达到了“没有进展的循环”点。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-08-05T07:48:38.110

您可以使用 GitHub 服务挂钩轻松完成此操作。

您需要再创建一个文件来处理执行 git pull 的过程。添加一个名为 github.php 的新文件（或任何您想要的文件），然后添加：

```
<?php `git pull`; 
```

保存该文件，并将其上传到服务器上的存储库目录。然后，转到`Services Hooks -> Post-Receive URL`并将 URL 复制到该文件，并将其粘贴到“Post-Receive URL”中，例如`http://demo.test.com/myfolder/github.php`

所以，当你推送的时候，GitHub 会自动访问这个 URL，从而导致你的服务器执行一个`git pull`.

要查看更多详细信息，请参阅[本教程](http://net.tutsplus.com/tutorials/other/the-perfect-workflow-with-git-github-and-ssh/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T22:58:17.093

我有同样的问题，代码和开发技能很强，系统管理员技能很弱。当我终于准备好推送代码时，我不得不询问[GitHub](https://github.com/)代表他们建议的方法是什么，他们用 Capistrano 回应。它是一个[Ruby](http://www.ruby-lang.org/en/)应用程序，可以在远程服务器上运行命令（例如 git pull），以及您可以想象的几乎任何其他命令。

您可以阅读以下几篇文章以获取更多信息：

*   [GitHub - 使用 Capistrano 进行部署](http://help.github.com/deploy-with-capistrano/)

*   [如何在 *nix 系统上编译 Capistrano 堆栈](http://melikedev.com/2011/01/31/linux-centos-64-ruby-rubygems-capistrano/)

*   [如何使用 Capistrano 部署代码的另一个示例](http://guides.beanstalkapp.com/deployments/deploy-with-capistrano.html)

不会说谎，学习曲线非常陡峭，但是一旦您开始使用 Capistrano，您就会发现它非常适合推送代码。我在 Symfony 中开发我的应用程序，并且我有我的 Capistrano 设置来提取代码、清除缓存和清除日志文件，所有这些都来自我的本地机器的一个命令。

# firefox - css3 转换在 Firefox 中不起作用

> ID：10542162
> 
> 赞同：0
> 
> 时间：2012-05-10T21:08:14.743
> 
> 标签：firefox, css

我正在尝试在 Firefox 中处理一些项目符号的过渡，但我没有运气。它适用于 chrome、safari、opera 和 ie。这是我的CSS。我只想将背景图像调整到我的 y 位置。

```
#slideshow-nav a {
    display: block;
    width: 10px;
    height: 10px;
    padding: 3px;
    background: url('images/bullets.png');
    background-position-y: 17px;
    -webkit-transition:all 0.2s ease-in-out;
    -moz-transition:all 0.2s ease-in-out;
    -o-transition:all 0.2s ease-in-out;
    -ms-transition:all 0.2s ease-in-out;
    transition:all 0.2s ease-in-out;
}

#slideshow-nav a:hover {
    display: block;
    width: 10px;
    height: 10px;
    padding: 3px;
    background: url('images/bullets.png');
    background-position-y: 0px;
    -webkit-transition:all 0.2s ease-in-out;
    -moz-transition:all 0.2s ease-in-out;
    -o-transition:all 0.2s ease-in-out;
    -ms-transition:all 0.2s ease-in-out;
    transition:all 0.2s ease-in-out;
}

#slideshow-nav li.activeSlide a { 
    display: block;
    background: url('images/bullets.png');
    background-position-y: 0px;
    width: 10px;
    height: 10px;
    -webkit-transition:all 0.2s ease-in-out;
    -moz-transition:all 0.2s ease-in-out;
    -o-transition:all 0.2s ease-in-out;
    -ms-transition:all 0.2s ease-in-out;
    transition:all 0.2s ease-in-out;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T21:54:58.760

据我所知（这肯定是不完整的）`background-position-y`不是一个有效的财产。我的猜测是 Firefox 无法识别它。尝试：

```
background-position: 0 17px; 
```

即将

```
background-position: 0 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T12:36:23.583

```
a.menuhvr { background-image:url('images/bullets.png'); background-repeat:no-repeat; background-position:left; padding-right: 0px; padding-left: 20px; color: #FFFFFF; text-decoration: none; font-family: "Trebuchet MS", Arial, Helvetica, sans-serif; font-size: 14px; font-weight:lighter; text-transform: none; border: 0px; display: block; -webkit-transition: all .5s ease-in-out 0s; -o-transition: all .5s ease-in-out 0s; -moz-transition: all .5s ease-in-out 0s; transition: all .5s ease-in-out 0s; height: 25px; line-height: 25px; }

a.menuhvr:hover { background-image: url(images/bullet1.png); background-repeat:no-repeat; background-color: #104595; background-position: right; margin: 0px; padding-right: 0px; padding-left: 25px; color: #FFFFFF; text-decoration: none; font-family: "Trebuchet MS", Arial, Helvetica, sans-serif; font-size: 14px; font-weight:lighter; background-color: #104595; border: 0px; display: block; height: 25px; line-height: 25px; } 
```

如果您希望可以更改两个不同的子弹图像或可以使用单个

# android - 安卓 ICS 4.0 操作系统

> ID：10542163
> 
> 赞同：2
> 
> 时间：2012-05-10T21:08:17.353
> 
> 标签：android

我是一名刚起步的新 Android 开发人员。

我希望androids开发团队的人能回答这个问题：如果我有一个android ICS 4.0操作系统的平板电脑，鉴于这个操作系统是基于UNIX的，我可以在上面安装Android Developer Kit和相关的平台+包，这样我可以在旅途中带着平板电脑学习开发吗？

我了解 android 开发工具包的必要操作系统之一是 UNIX - GNU C Library ( `glibc`) 2.7 或更高版本。ICS 4.0 是否与此兼容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T21:11:25.947

您可能对[AIDE 项目](https://plus.google.com/101304250883271700981/about)感兴趣，可以[在这里](https://play.google.com/store/apps/details?id=com.aide.ui)下载他们的应用程序。

> 使用 AIDE 在 Android 上开发 Android 应用程序 - Android Java IDE AIDE 是一个集成开发环境 (IDE)，用于直接在 Android 设备上开发真正的 Android 应用程序。AIDE 支持完整的编辑-编译-运行周期：使用功能丰富的编辑器编写代码，提供代码完成、实时错误检查、重构和智能代码导航等高级功能，单击即可运行您的应用程序。AIDE 将把你的带键盘的安卓平板变成一个真正的开发盒子。我们使用运行 Ice Cream Sandwich 的 Transformer Prime 来使用 AIDE 进行编码。AIDE 会将您的 Android 手机变成一台小型开发计算机，以便随时随地浏览和触摸您的代码。AIDE 与 Eclipse 项目完全兼容。您只需将源代码复制到您的设备并在 AIDE 中打开 Eclipse 项目即可开始编码。或者，您可以将源代码保存在 Dropbox 上 - AIDE 与 Dropbox 集成，可以轻松地从 Dropbox 下载并同步您的更改。AIDE 支持 GIT 进行专业发展

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T21:11:35.620

> 我可以在上面安装 android 开发者工具包和相关的平台+ 包，这样我就可以在旅途中带着我的平板电脑学习开发吗？

不完全是。[AIDE](https://play.google.com/store/apps/details?id=com.aide.ui&hl=en)提供应用程序的设备上开发，但我认为您需要让它安装工具。

> 我了解 android 开发工具包的必要操作系统之一是 unix - GNU C Library (glibc) 2.7 或更高版本

仅当您使用 NDK 构建固件或构建本机代码时才需要这样做，设备本身都不支持这两者。

# perforce - 有没有办法撤消 p4 标签同步？

> ID：10542166
> 
> 赞同：0
> 
> 时间：2012-05-10T21:08:26.893
> 
> 标签：perforce

我不小心打了个标签：

```
p4 labelsync -l foobar-rc3 
```

如何将标签的文件恢复到标签同步之前的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T02:13:42.777

我不确定这是否容易撤消。当然，您可以锁定标签以防止意外修改。如果这很重要，您应该询问 Perforce 支持，因为他们可能有一个我没听说过的技巧。

# castle-windsor - 基本 Windsor 构造函数注入

> ID：10542172
> 
> 赞同：0
> 
> 时间：2012-05-10T21:08:56.477
> 
> 标签：castle-windsor, windsor-3.0

我是 Windsor 的新手，正在尝试实现最基本的构造函数注入。显然，API 在最近的版本中发生了很大变化，以至于当前版本的文档似乎假设您已经知道如何操作，而旧版本的文档已经过时。

我有一个简单的测试组件：

```
public class ConstructorInjectedComponent
{   
    public IMyComponent Component { get; set; }

    public ConstructorInjectedComponent(IMyComponent component)
    {
        Component = component;
    }
} 
```

IMyComponent 有一个简单的实现：

```
public class AMyComponent : IMyComponent
{
    public string Name { get; set; }

    public AMyComponent()
    {
        Name = Guid.NewGuid().ToString("N");
    }
} 
```

而且我想以某种方式向 Windsor 注册我的类型，以便我可以取回包含其依赖项实例的 ConstructorInjectedComponent 实例：IMyComponent。

我已经像这样注册了 AMyComponent ：

```
_container.Register(Component.For(typeof(AMyComponent))); 
```

我已经像这样注册了 ConstructorInjectedComponent：

```
_container.Register(Component.For(typeof(ConstructorInjectedComponent))); 
```

并试图解决它

```
_container.Resolve(typeof(ConstructorInjectedComponent)); 
```

但这失败了“无法创建组件 ConstructorInjectedComponent 因为它具有需要满足的依赖项。

所以我尝试为 ConstructorInjectedComponent 传递一个依赖项的 IDictionary ...这就是文档让我失败的地方。

我不知道如何定义该字典。我找不到任何解释它的文档。我试过这个：

```
var d = new Dictionary<string, string>() {{"IMyComponent", "AMyComponent"}};
_container.Register(Component.For(typeof(ConstructorInjectedComponent))
                    .DependsOn(dependencies)); 
```

但这会失败并出现相同的“具有需要解决的依赖项”错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T03:32:29.520

首先，确保您了解基本概念至关重要，即什么是组件、什么是服务以及什么是依赖项。

[关于它的文档非常好](https://github.com/castleproject/Windsor/blob/master/docs/services-and-components.md)。

[有关如何使用注册 API](https://github.com/castleproject/Windsor/blob/master/docs/registering-components-one-by-one.md)的文档应该可以帮助您入门。

tl;dr asnwer 是：*因为`ConstructorInjectedComponent`取决于`IMyComponent`确保您注册`AMyComponent`以公开 `IMyComponent`为服务*。

```
_container.Register(Component.For<IMyComponent>().ImplementedBy<AMyComponent>()); 
```

# php - 将字符添加到 PHP 中的项目数组

> ID：10542173
> 
> 赞同：2
> 
> 时间：2012-05-10T21:08:58.223
> 
> 标签：php

我正在尝试使用类似...的字符串

`php,mysql,css` 并把它变成..`#php #mysql #css`

我目前所拥有的...

```
$hashTagStr  = "php,mysql,css";
$hashTags = explode(",", $hashTagStr);

foreach($hashTags as $k => $v){
    $hashTagsStr = '';
    $hashTagsStr .= '#'.$v.' ';
}
echo $hashTagsStr;

?> 
```

问题是它只打印`#css`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T21:10:37.463

这个怎么样：

```
$hashTagStr  = "php,mysql,css";
$hashTags = explode(",", $hashTagStr);
$hashTagStr = '#' . implode( ' #', $hashTags ); 
```

...或者：

```
$hashTagStr  = "php,mysql,css";
$hashTagStr = '#' . str_replace( ',', ' #', $hashTagStr ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T21:10:14.430

那是因为每次循环运行时，您都会通过以下方式清除 $hashTagsStr：

```
$hashTagsStr = ''; 
```

将其更改为：

```
$hashTagStr  = "php,mysql,css";
$hashTags = explode(",", $hashTagStr);
$hashTagsStr = '';
foreach($hashTags as $k => $v){
    $hashTagsStr .= '#'.$v.' ';
}
echo $hashTagsStr; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-10T21:10:07.767

通过引用传递您的值：

```
$hashTags = array("php","mysql","css");

foreach ( $hashTags as &$v ) $v = "#" . $v; 
```

然后敲出结果：

```
// #php #mysql #css
echo implode( " ", $hashTags ); 
```

演示：[http ://codepad.org/zbtLF5Pk](http://codepad.org/zbtLF5Pk)

让我们检查一下您在做什么：

```
// You start with a string, all good.
$hashTagStr = "php,mysql,css";

// Blow it apart into an array - awesome!
$hashTags = explode( "," , $hashTagStr );

// Yeah, let's cycle this badboy!
foreach($hashTags as $k => $v) {

    // Iteration 1: Yeah, empty strings!
    // Iteration 2: Yeah, empty...wait, OMG!
    $hashTagsStr = '';

    // Concat onto an empty var
    $hashTagsStr .= '#'.$v.' ';
}

// Show our final output
echo $hashTagsStr; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-10T21:13:31.560

看起来像是一份工作`array_walk`

```
$hashTagStr  = "php,mysql,css";
$hashTags = explode(",", $hashTagStr);
array_walk($hashTags, function(&$value){ $value = "#" . $value ;} );
var_dump(implode(" ", $hashTags)); 
```

输出

```
 string '#php #mysql #css' (length=16) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-10T21:10:09.373

您应该将`$hashTagsStr = ''`行移到 foreach 循环之外，否则每次都重置它

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-10T21:16:50.313

您正在`$hashTagsStr`循环内定义变量。

```
<?php

$hashTagStr  = "php,mysql,css";
$hashTags = explode(",", $hashTagStr);

$hashTagsStr = '';
foreach($hashTags as $k => $v){
    $hashTagsStr .= '#'.$v.' ';
}
echo $hashTagsStr; 
```

无论如何，我认为这会更简单：

```
<?php

$hashTagStr  = "php,mysql,css";
$hashTagStr = '#' . str_replace(',', ' #', $hashTagStr);

echo $hashTagStr; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-10T21:20:32.177

在循环的每次迭代中，您正在执行`$hashTagsStr = '';`. 这是将变量设置为`''`，然后附加当前标记。因此，完成后，`$hashTagsStr`将只包含最后一个标签。

此外，循环似乎在这里工作太多，您可以更轻松地将 替换`,`为`#`. 无需将其分解为数组，无需循环。尝试这个：

```
$hashTagStr  = "php,mysql,css";
$hashTagStr = '#'.str_replace(',', ' #', $hashTagStr); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-25T07:46:53.523

```
function prepend( $pre, $array )
{
    return array_map(
        function($t) use ($pre) { return $pre.$t; }, $array
    );
} 
```

您在字符串中的*语义*是一个数组。➪ 所以最好尽快爆炸，并尽可能长时间地使用你的阵列。

[所示的闭包和匿名函数](http://dhorrigan.com/post/29209695084/anonymous-functions-vs-closures)在 PHP 5.4+ 中工作。

# matlab - matlab从文本文件中提取数据

> ID：10542174
> 
> 赞同：0
> 
> 时间：2012-05-10T21:09:08.923
> 
> 标签：matlab, file-io

我想从下面的文本文件中提取灰色区域的数据，我想使用 matlab。无法计算标题中的行数，因为每次生成文本文件时都会发生变化。

它应该是这样的：

```
%open the file        
fin = fopen('panair.out');

buffer = fgetl(fin)    
if buffer(2:17)=='totals for column'
j=1
for i=1:3
    tmp=fgetl(fin)
end
    buffer=fgetl(fin);
    temp = strread(38:44);
    wingsection.area(j,k)= strread(temp, '%7.4f');
    temp = strread(38:44);
    wingsection.fx(j,k)= strread(temp, '%7.4f');
    temp = strread(38:44);
    wingsection.fy(j,k)= strread(temp, '%7.4f');
    temp = strread(38:44);
    wingsection.fz(j,k)= strread(temp, '%7.4f');
    temp = strread(38:44);
    wingsection.mx(j,k)= strread(temp, '%7.4f');
    temp = strread(38:44);
    wingsection.my(j,k)= strread(temp, '%7.4f');
    temp = strread(38:44);
    wingsection.mz(j,k)= strread(temp, '%7.4f');
    j=j+1;
  else
end

%close file
fclose(fin); 
```

或者也许 textscan 更快？

312 245 0.3625 0.4312 -0.0967 0.0862 0.1299 -0.7494 0.3114 -0.5276 0.0011 0.0011 0.0023 0.4088 0.9159 -0.9661 0.0415 0.0431 0.9091 -0.9661 0.0415 0.1949 -0.7522 -0.7608 -0.7487 0.3000 0.9848 0.0000 0.1736 -0.0431 0.9848 0.0000 0.1736 0.0000 0.0000 0.0000 0.0000 -0.0050 0.5227 - 0.5276 0.0000 1.3273 0.8525 0.8218 0.0000 0.1949 -0.7522 -0.7608 -0.7487

313 246 0.2859 0.4577 -0.0762 0.0604 0.1983 -0.8678 0.4854 -0.5023 0.0008 0.0012 0.0018 0.4795 0.9985 -1.1277 0.2626 0.0302 0.9998 -1.1277 0.2626 -0.0605 -1.3393 -1.3402 -1.3003 0.3000 0.9848 0.0000 0.1736 -0.0302 0.9848 0.0000 0.1736 0.0000 0.0000 0.0000 0.0000 -0.0117 0.4906 -0.5023 0.0000 1.5297 0.8714 1.0139 0.0000 -0.0605 -1.3393 -1.3402 -1.3003

314 247 0.1572 0.4842 -0.0419 0.0224 0.4594 -1.1558 1.2420 -0.3774 0.0005 0.0012 0.0010 0.8019 1.3070 -1.4401 1.1865 0.0112 1.3389 -1.4401 1.1865 -1.0491 -3.9991 -4.2495 -3.8789 0.3000 0.9848 0.0000 0.1736 -0.0112 0.9848 0.0000 0.1736 0.0000 0.0000 0.0000 0.0000 0.0002 0.3776 - 0.3774 0.0000 2.2966 0.9260 1.7576 0.0000 -1.0491 -3.9991 -4.2495 -3.8789

315 247 0.0724 0.4974 -0.0192 -0.0052 0.5621 -1.6209 1.7536 -0.3154 0.0005 0.0012 0.0010 1.2086 1.4161 -1.8573 1.7344 -0.0026 1.4587 -1.8573 1.7344 -1.4755 -7.0415 -7.5368 -6.3779 0.3000 0.9848 0.0000 0.1736 0.0026 0.9848 0.0000 0.1736 0.0000 0.0000 0.0000 0.0000 0.0636 0.3789 -0.3154 0.0000 2.9292 0.9254 2.4532 0.0000 -1.4755 -7.0415 -7.5368 -6.3779 1 0*b*for-mom-net#- 1 网络 1 的力/力矩数据

```
 totals for column      1          area           fx            fy            fz            mx            my            mz

                                 0.03774      -0.08047       0.04658       0.22649       0.09508       0.03271       0.02334
                                 0.03774       0.00000       0.00000       0.00000       0.00000       0.00000       0.00000
                                 0.03774      -0.08047       0.04658       0.22649       0.09508       0.03271       0.02334

 totals for column      2          area           fx            fy            fz            mx            my            mz

                                 0.03099       0.00955       0.01410       0.12176       0.05164       0.01277      -0.00630
                                 0.03099       0.00000       0.00000       0.00000       0.00000       0.00000       0.00000
                                 0.03099       0.00955       0.01410       0.12176       0.05164       0.01277      -0.00630

 totals for column      3          area           fx            fy            fz            mx            my            mz

                                 0.03050       0.01257       0.00796       0.06866       0.03008       0.00319      -0.00604
                                 0.03050       0.00000       0.00000       0.00000       0.00000       0.00000       0.00000
                                 0.03050       0.01257       0.00796       0.06866       0.03008       0.00319      -0.00604

 totals for column      4          area           fx            fy            fz            mx            my            mz

                                 0.03042       0.01116       0.00600       0.04510       0.02068      -0.00067      -0.00499
                                 0.03042       0.00000       0.00000       0.00000       0.00000       0.00000       0.00000
                                 0.03042       0.01116       0.00600       0.04510       0.02068      -0.00067      -0.00499 
```

312 245 0.3625 0.4312 -0.0967 0.0862 0.1299 -0.7494 0.3114 -0.5276 0.0011 0.0011 0.0023 0.4088 0.9159 -0.9661 0.0415 0.0431 0.9091 -0.9661 0.0415 0.1949 -0.7522 -0.7608 -0.7487 0.3000 0.9848 0.0000 0.1736 -0.0431 0.9848 0.0000 0.1736 0.0000 0.0000 0.0000 0.0000 -0.0050 0.5227 - 0.5276 0.0000 1.3273 0.8525 0.8218 0.0000 0.1949 -0.7522 -0.7608 -0.7487

313 246 0.2859 0.4577 -0.0762 0.0604 0.1983 -0.8678 0.4854 -0.5023 0.0008 0.0012 0.0018 0.4795 0.9985 -1.1277 0.2626 0.0302 0.9998 -1.1277 0.2626 -0.0605 -1.3393 -1.3402 -1.3003 0.3000 0.9848 0.0000 0.1736 -0.0302 0.9848 0.0000 0.1736 0.0000 0.0000 0.0000 0.0000 -0.0117 0.4906 -0.5023 0.0000 1.5297 0.8714 1.0139 0.0000 -0.0605 -1.3393 -1.3402 -1.3003

314 247 0.1572 0.4842 -0.0419 0.0224 0.4594 -1.1558 1.2420 -0.3774 0.0005 0.0012 0.0010 0.8019 1.3070 -1.4401 1.1865 0.0112 1.3389 -1.4401 1.1865 -1.0491 -3.9991 -4.2495 -3.8789 0.3000 0.9848 0.0000 0.1736 -0.0112 0.9848 0.0000 0.1736 0.0000 0.0000 0.0000 0.0000 0.0002 0.3776 - 0.3774 0.0000 2.2966 0.9260 1.7576 0.0000 -1.0491 -3.9991 -4.2495 -3.8789

315 247 0.0724 0.4974 -0.0192 -0.0052 0.5621 -1.6209 1.7536 -0.3154 0.0005 0.0012 0.0010 1.2086 1.4161 -1.8573 1.7344 -0.0026 1.4587 -1.8573 1.7344 -1.4755 -7.0415 -7.5368 -6.3779 0.3000 0.9848 0.0000 0.1736 0.0026 0.9848 0.0000 0.1736 0.0000 0.0000 0.0000 0.0000 0.0636 0.3789 -0.3154 0.0000 2.9292 0.9254 2.4532 0.0000 -1.4755 -7.0415 -7.5368 -6.3779 1 0*b*for-mom-net#- 1 网络 2 的力/力矩数据

```
 totals for column      1          area           fx            fy            fz            mx            my            mz

                                 0.03774      -0.08047       0.04658       0.22649       0.09508       0.03271       0.02334
                                 0.03774       0.00000       0.00000       0.00000       0.00000       0.00000       0.00000
                                 0.03774      -0.08047       0.04658       0.22649       0.09508       0.03271       0.02334

 totals for column      2          area           fx            fy            fz            mx            my            mz

                                 0.03099       0.00955       0.01410       0.12176       0.05164       0.01277      -0.00630
                                 0.03099       0.00000       0.00000       0.00000       0.00000       0.00000       0.00000
                                 0.03099       0.00955       0.01410       0.12176       0.05164       0.01277      -0.00630

 totals for column      3          area           fx            fy            fz            mx            my            mz

                                 0.03050       0.01257       0.00796       0.06866       0.03008       0.00319      -0.00604
                                 0.03050       0.00000       0.00000       0.00000       0.00000       0.00000       0.00000
                                 0.03050       0.01257       0.00796       0.06866       0.03008       0.00319      -0.00604

 totals for column      4          area           fx            fy            fz            mx            my            mz

                                 0.03042       0.01116       0.00600       0.04510       0.02068      -0.00067      -0.00499
                                 0.03042       0.00000       0.00000       0.00000       0.00000       0.00000       0.00000
                                 0.03042       0.01116       0.00600       0.04510       0.02068      -0.00067      -0.00499 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:15:20.457

试试[`fscanf`](http://www.mathworks.com/help/techdoc/ref/fscanf.html)。特别：

> `A = fscanf(fileID, format, sizeA)``sizeA`将元素读入`A`，并将文件指针定位在读取的最后一个元素之后。`sizeA`可以是整数，也可以是`[m,n]`.

# ruby - 使用 ruby 在同一个 excel 文件上读写

> ID：10542180
> 
> 赞同：1
> 
> 时间：2012-05-10T21:09:42.507
> 
> 标签：ruby, excel

我正在寻找一种在 ruby​​ 中读取和写入同一个 excel 文件的方法。我看到了这个[主题](https://stackoverflow.com/questions/5898449/how-to-read-from-and-write-to-the-same-excel-file)，但这些建议对我不起作用。

我尝试使用 Roo gem，但这不允许写。我也尝试使用电子表格 gem，但这不会读取 Xlsx 文件。

有没有办法在 ruby​​ 中读取和写入同一个 excel 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:29:42.540

试试[ruby​​XL](https://github.com/gilt/rubyXL)

用于读取/写入/修改 .xlsx 和 .xlsm 文件的 Ruby 库

# sharepoint - Sharepoint 2007 中的自定义公告板

> ID：10542185
> 
> 赞同：1
> 
> 时间：2012-05-10T21:10:14.093
> 
> 标签：sharepoint, sharepoint-2007, sharepoint-designer

首先，请多多包涵。我的问题更具体地涉及自定义列表、Sharepoint 2007 中的自定义代码。我的经验更多的是在外部工作但在 Sharepoint 2010 中访问数据（客户端对象模型）的应用程序。

在工作中，我最近接到了以下请求：

*   创建一个自定义公告板，每个人都可以在其中创建公告，但只有管理员和创建者可以编辑它。

*   主列表页面将提供详细信息摘要、标题和描述公告类型的图标（如果是婴儿出生公告，则为婴儿的 gif）。

*   点击公告后，将显示包含更多公告详情和最多 4 张图片的详细页面。

*   输入数据时，图片只能是最大尺寸。

这就是我要如何攻击它。我打算创建一个自定义列表，允许添加图片列和我需要的所有其他列。然后我会修改 NewForm、EditForm 和 DispForm 页面以满足我们的要求。图片大小将通过页面上的 Jquery 的 Javascript 进行控制。我向各位专家提出的问题是，这听起来可行吗？有没有更好的办法？

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T04:23:22.567

我不会编辑列表表单——至少在这种情况下不会。您可以构建它的一种方法是作为发布站点。您可以创建自定义页面布局以适应公告的设计。将其构建成一个完善的解决方案需要做一些工作。取决于你想走多远。

# github - Sublime Text 2 不生成 github 令牌

> ID：10542188
> 
> 赞同：0
> 
> 时间：2012-05-10T21:10:24.547
> 
> 标签：github, sublimetext2

我正在尝试[为 Sublime Text 2 安装 GitHub:Gist 插件](https://github.com/bgreenlee/sublime-github)。但我无法生成 GitHub 令牌。手动方式不适用于 Windows，因为我无法在 cmd 中运行 cURL。由于某种原因，自动化方式也不起作用。它说我必须输入我的用户名和密码。这样做之后，什么也没有发生，当我尝试执行另一个命令时，它又说了一遍。有谁知道我做错了什么或我应该做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-08T22:52:26.787

您还可以使用 GitHub Web 界面来创建令牌。

1.  登录 GitHub
2.  转到帐户设置（右上角）
3.  从左侧导航栏中选择应用程序
4.  单击个人访问令牌旁边的“创建新令牌”
5.  按照说明操作，然后复制新创建的令牌
6.  在 Sublime 的 Preferences 中，导航到“Package Settings”->“Gist”->“Settings - User”并将令牌粘贴到“token”旁边的引号中：key

可以在此处找到与 Sublime 中 Gists 相关的此操作和其他操作的良好参考：[https ://github.com/condemil/Gist](https://github.com/condemil/Gist)

# php - 如何根据 MySQL 数据在 HTML 中创建条件按钮？

> ID：10542197
> 
> 赞同：0
> 
> 时间：2012-05-10T21:11:18.847
> 
> 标签：php, javascript, html

我正在尝试创建一个按钮，该按钮将显示“关注”或“取消关注”，具体取决于当前用户是否关注另一个用户。

如果 John 关注了 Tim，但没有关注 Sarah，那么根据 John 的观点，Web 视图将如下所示：

```
_________________________________
|                |              |
|       Tim      |   (unfollow) |       
|________________|______________|
|                |              |
|       Sarah    |    (follow)  |       
|________________|______________| 
```

其中 (" ") 表示一个按钮。

我有一个数据库，指示谁跟随谁，但是如何根据对所述数据库的验证显示正确的按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:41:31.243

假设您有三个字段“name_id”、“name”和“followed”，其中“name_id”是人的 id，“name”是表示人名的字符串，“followed”是布尔值：

```
<script type="text/javascript">
function toggleFollowing(name_id) {
  window.location = 'toggleFollowing.php?name_id='+name_id;
}
</script>
...
<?php
  ...
  while ($row = $result->fetch_assoc()) {
    echo '<tr>';
    echo '<td>'.$row['name'].'</td><td><a href=""><button type="button" onclick="toggleFollowing('.$row['name_id'].')">'.($row['followed']==1 ? 'Unfollow':'Follow').'</button></td>';
    echo '</tr>';
  }
  ...
?> 
```

您将让 toggleFollowing.php 接收变量 $_GET['name_id'] 以切换数据库并返回此页面。我假设您将当前用户的 ID 存储为会话变量或通过其他方式，因为您需要将其作为更新记录的主要参考。如果您通过其他方式在页面之间传递它，那么您也希望传递该变量。

显然，这是更截断的代码，但更好的方法是使用 AJAX 在 DB 上执行切换，并使用 DOM 操作（JQuery？）进行“实时”更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:17:05.413

如果没有您的代码示例，很难回答，但是像这样？

```
<?php

  if(follow){
    echo '<input type="button" value="Follow" />';
  } else {
    echo '<input type="button" value="Unfollow" />';
  }

?> 
```

# ios - 保存：在 NSManagedObjectContext 上不起作用

> ID：10542198
> 
> 赞同：0
> 
> 时间：2012-05-10T21:11:21.273
> 
> 标签：ios, core-data

在导航控制器中，我从视图控制器 1 转到视图控制器 2。

View Controller 1 是一个绑定到 FetchedResultsController 的表视图控制器。它从特定的上下文中获取数据并显示它。然后，如果点击了一行，我会继续查看控制器 2。在 segueing 时，我使用视图控制器 1 中的数据设置了视图控制器 2 的特定 NSManagedObject 属性。

现在，在视图控制器 2 中，我可以使用 NSManagedObject 属性显示数据，然后对其进行更改并执行保存：。当我返回查看控制器 1 时，会反映更改。但是，如果我重新启动应用程序，它不会再反映在任何视图控制器中。

这就是我进行保存的方式。

```
- (void)hiddenAttributeSwitchSlid:(UISwitch *)sender
{
    [self.workoutType.managedObjectContext performBlock:^{
        self.workoutType.workoutHiddenByDefault = [NSNumber numberWithBool:sender.isOn];
        NSError *error = nil;
        if (![self.workoutType.managedObjectContext save:&error]) {
            NSLog(@"There was an error in saving to context - %@", [error localizedDescription]);
        }
        else {
            NSLog(@"No error");
        }
    }];
} 
```

FitnessType 是一个 NSManagedObject，它在 prepareForSegue: 中设置，然后再转到这个视图控制器。

即使我不使用 performBlock:，它也不起作用。

PS - 我知道以前有人问过这类问题。我浏览了它们，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:11:13.620

您是否在模型中为该属性设置了默认值？

Core Data 中有一个已识别的错误，在某些情况下（我没有一直缩小范围），在应用程序的后台处理期间，具有默认值的属性会被重置几次。

对此进行测试的方法是侦听通过 KVO 更改的值并记录更改，然后复制您的测试。如果您看到一些更改，那么您就知道您遇到了该错误。

我见过的唯一可靠的已知解决方案是删除默认值。如果需要默认值，那么我会将其添加到方法中的`NSManagedObject`子类中`-awakeFromInsert`，然后更新验证方法以检查它。糟透了我知道。

## 更新#2

你有多少上下文？

您是否使用父子上下文？

如果是这样，您是否正在保存最顶层的父母？

## 更新#3

好的，a里面`UIManagedDocument`有两个`NSManagedObjectContext`实例。您使用 a 有什么原因`UIManagedDocument`吗？您的申请中是否有多个文件？如果您不这样做，那么我强烈建议您切换回传统的 Core Data 堆栈。`UIManagedDocument`并不是真的要在单个堆栈应用程序中。

至于直接保存的问题，`UIManagedDocument`在退出应用程序时尝试在后台保存。如果可能需要一些时间，而且个人而言，不是很可靠。您可以在退出时请求保存，这将有助于确保保存速度很快，但即便如此，它也可能不可靠。

你是如何退出应用程序的？

你在 Xcode 中杀死它吗？

你是在后台处理它然后恢复它吗？

你是在后台处理它，然后从 iOS 设备上杀死它吗？

您可以侦听`UIManagedDocument`要保存的内容，然后打印一条日志语句，这样您就可以查看保存实际发生在磁盘上的时间。这可能有助于缩小准确的范围，何时保存和不保存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T19:52:10.900

我认为你不应该在上下文中使用保存，文档会自动保存。

保存文档时可能会出现数据一致性错误。我建议您不要使用保存上下文的`[self.workoutType.managedObjectContext save:&error]`方法，而是使用以下继承自该类的类，该类`UIManagedDocument`会在自动保存时添加日志记录：

LoggingManagedDocument.h：

```
@interface LoggingManagedDocument : UIManagedDocument

@end 
```

LoggingManagedDocument.m：

```
#import "LoggingManagedDocument.h"

@implementation LoggingManagedDocument

- (id)contentsForType:(NSString *)typeName error:(NSError *__autoreleasing *)outError
{
    NSLog(@"Auto-Saving Document");
    return [super contentsForType:typeName error:outError];
}

- (void)handleError:(NSError *)error userInteractionPermitted:(BOOL)userInteractionPermitted
{
    NSLog(@"error: %@ userInfo: %@", error, error.userInfo);
}

@end 
```

此类应该可以帮助您识别问题，为什么您的数据没有保存。更改属性后，让应用程序运行并等待 15-30 秒，然后自动保存就会发生。

日志记录基于：http: [//blog.stevex.net/2011/12/uimanageddocument-autosave-troubleshooting/](http://blog.stevex.net/2011/12/uimanageddocument-autosave-troubleshooting/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:05:36.247

从 UIManageDocument 文档：

> UIManagedDocument 架构有几个考虑因素：
> 
> 您通常应该使用标准的 UIDocument 方法来保存文档。如果您直接保存子上下文，您只会将更改提交到父上下文而不是文档存储。如果您直接保存父上下文，您将回避文档执行的其他重要操作。

最简单的选择是使用无保存模型，这意味着使用文档的 NSUndoManager。我通常会

```
[self.workoutType.managedObjectContext.undoManager beginUndoGrouping];
```

在添加更改之前

```
[self.workoutType.managedObjectContext.undoManager endUndoGrouping];
```

编辑后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-11T03:29:22.183

**您需要保存文档：**

```
[document saveToURL:document.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL]; 
```

# perl - 在字段中解析带有引号字符的字符串

> ID：10542204
> 
> 赞同：0
> 
> 时间：2012-05-10T21:11:43.083
> 
> 标签：perl, csv, tokenize

假设我要解析文件

```
$ cat toParse.txt
1 2 3 4 5
1 "2 3" 4 5
1 2" 3" 4 5

```

前两行很容易解析： `Text::CSV`可以处理。例如，我试过：

```
使用严格；
使用文本::CSV；
尽管（） {
    咀嚼$_;
    我的 $csv = Text::CSV->new({ sep_char => ' ', quote_char => '"' , binary => 1});
    $csv->解析($_);
    我的@fields = $csv->fields();
    我的 $badArg = $csv->error_input();
    打印“字段[1] = $fields[1]\n”；
    print "错误参数：$badArg\n\n";
}

```

但是，如果引号字符包含*在*标记化字段中，CSV 会变得非常混乱。

上面的程序打印出来：

```
字段[1] = 2
不好的论点：

字段[1] = 2 3
不好的论点：

字段[1] =
错误参数：1 2" 3" 4 5

```

有没有人有什么建议？我希望最后`fields[1]`填充`2" 3 "`... 换句话说，我想在引号字符串中不包含的任何空格上拆分行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:02:20.253

您想要的不是 CSV，因此您需要编写自己的解析代码。

这应该适用于您的特定情况：

```
use strict;

while (<DATA>) { 
    chomp $_;
    my @fields = /([^\s"]+|(?:[^\s"]*"[^"]*"[^\s"]*)+)(?:\s|$)/g;
    print "$_\n" for @fields;
    print "\n";
}

__DATA__

1 2 3 4 5
1 "2 3" 4 5
1 2" 3 " 4 5 
1 2" 3 "4 5 
1 2" 3 "4" 5" 6
1 2" 3 "4"" 5"" 6 
```

...它的输出是：

```
1
2
3
4
5

1
"2 3"
4
5

1
2" 3 "
4
5

1
2" 3 "4
5

1
2" 3 "4" 5"
6

1
2" 3 "4""
5""
6 
```

单击[此处](http://ideone.com/LRV3p)进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:27:41.197

将 quote_char 更改为 " 和第三行将是其他内容

```
1
2"
3
"
4
5 
```

然而，第二行现在将是

```
1 
"2
3"
4
5 
```

因此，您似乎有一行，其中 " 是引号分隔符，而另一行则不是。

因此，您正在解析的文件已损坏，您将不得不变得聪明。

# c# - 如何通过 foreach 循环获取 FileInfo？

> ID：10542205
> 
> 赞同：4
> 
> 时间：2012-05-10T21:11:45.827
> 
> 标签：c#, foreach, asp.net-2.0, code-conversion

试图将一些 VB 转换为 C#...（也学习 C#）。我有一些代码循环遍历目录中的文件并检索它们的文件信息。我最初在 VB 中有这个，但我正在尝试学习 C#，并且在线转换器不给我将通过 .net 2.0 的代码。

这是错误： `Type and identifier are both required in a foreach statement`

这是我的代码：

```
DirectoryInfo dirInfo = new DirectoryInfo(currentDir);
FileInfo[] files = null;
files = dirInfo.GetFiles();

FileInfo f = default(FileInfo);
foreach (f in files) {  ...
} 
```

我试过把，`foreach(FileInfo f...` 但它给了我一个不同的错误： `A local variable named 'f' cannot be declared in this scope because it would give a different meaning to 'f', which is already used in a 'parent or current' scope to denote something else`

我如何解决它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T21:13:53.577

```
DirectoryInfo dirInfo = new DirectoryInfo(currentDir);
FileInfo[] files = null;
files = dirInfo.GetFiles();

// I removed the declaration of f here to prevent the name collision.
foreach (FileInfo f in files)
{  ...
} 
```

这是代码的更简单版本：

```
DirectoryInfo dirInfo = new DirectoryInfo(currentDir);
foreach (FileInfo f in dirInfo.GetFiles())
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:13:13.210

您应该提供循环内使用的变量类型。在您的情况下，它将是`FileInfo`. 但是使用 C# 3.0 或更高版本，您只需编写`var`代码，编译器就会为您推断类型：

```
foreach (FileInfo f in files) 
{  
   // ...
} 
```

[在此处](http://msdn.microsoft.com/en-us/library/aa664754%28v=vs.71%29.aspx)阅读有关 foreach 语句的更多信息。

完整的解决方案（您不需要初始化迭代变量和文件数组）：

```
DirectoryInfo dir = new DirectoryInfo(currentDir);
foreach (FileInfo file in dir.GetFiles()) 
{
   // use file  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T21:22:31.497

这就是你看起来出错的地方：

```
FileInfo f = default(FileInfo);
foreach (f in files) {  ...
} 
```

您在循环外定义 f ，然后尝试在循环内定义它。

如果您需要默认为 f，请尝试以下操作：

```
FileInfo f = default(FileInfo);
foreach (FileInfo file in files)
    {
         relevant code here
    } 
```

否则删除声明变量“f”的语句

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T21:19:41.687

这应该有效：

```
 DirectoryInfo dirInfo = new DirectoryInfo(currentDir);
        FileInfo[] files = null;
        files = dirInfo.GetFiles();
        foreach (FileInfo f in files)
        {
        } 
```

编辑：

在我看来，这会更干净：

```
 foreach (FileInfo f in new DirectoryInfo(currentDir).GetFiles())
            {
            } 
```

# java - 交换内容后构建新字符串的更好方法

> ID：10542208
> 
> 赞同：0
> 
> 时间：2012-05-10T21:11:50.150
> 
> 标签：java, string, thread-safety, char, stringbuilder

我正在操纵ssn。输入="123456789" 输出="896745123"

您从输入中取出前 3 位数字（即 123）并将其与后两位数字“89”交换，然后将“45”与“67”交换。下面是我使用 toCharArray 的代码。但我不喜欢它。这个方法（不是测试）可以同时被很多用户访问。我一直在寻找性能、可读性和贸易安全性更好的解决方案。

我感谢您的帮助。

```
@Test
    public void testSSNString(){

        String original="123456789";
        String result="896745123";
        char[] charResult=original.toCharArray();

        char temp=charResult[6];
        charResult[6]=charResult[0];
        charResult[0]=charResult[7];
        charResult[7]=charResult[1];
        charResult[1]=charResult[8];
        charResult[8]=charResult[2];
        charResult[2]=charResult[5];
        charResult[5]=charResult[4];
        charResult[4]=charResult[3];
        charResult[3]=temp;

        assertEquals(original.toCharArray(),charResult);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:18:36.450

就性能而言，您给出的方式本质上是您在 Java 中可以做到的最好的方式。使用数组比使用`StringBuilder`.

为了提高可读性，我只做一些小的改动，比如为置换输出创建一个新数组：

```
@Test
public void testSSNString() {
  String original = "123456789";
  String expected = "896745123";

  char[] in = original.toCharArray();
  char[] out = new char[9];
  out[0] = in[7];
  out[1] = in[8];
  out[2] = in[5];
  out[3] = in[6];
  out[4] = in[3];
  out[5] = in[4];
  out[6] = in[0];
  out[7] = in[1];
  out[8] = in[2];

  assertEquals(expected.toCharArray(), out);
} 
```

# asp.net-mvc-3 - 如何在实体框架中更新实体的导航属性

> ID：10542209
> 
> 赞同：9
> 
> 时间：2012-05-10T21:12:09.777
> 
> 标签：asp.net-mvc-3, entity-framework, ef-code-first, dbcontext, navigation-properties

在带有实体框架的 ASP .NET MVC 3 中，我有一个域对象，它具有引用另一个对象的导航属性，如下所示：

```
public class Person
{
    public String Name {get;set;}

    public Guid CompanyID{get;set;}

    [ForeignKey(CompanyID)]
    public virtual CompanyType Company{ get; set; }
} 
```

当我创建 Person 的实例并尝试将其添加到数据库时，DBContext 会保留此实体“Person”的缓存并将其发送到数据库。因此，稍后在同一上下文实例的生命周期中，当我尝试访问此实体时，Company 字段始终为 null，因为导航属性从未更新。

有没有办法用数据库中存在的内容更新导航属性？

延迟加载已打开。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T23:05:53.047

如果打开了延迟加载，并且您想通过延迟加载加载导航属性，则必须创建一个 new 的代理`Person`，而不是用 实例化它`new`，如下所示：

```
using (var context = new MyDbContext())
{
    var person = context.People.Create(); // creates a lazy loading proxy
    person.CompanyID = 123;
    context.People.Add(person);
    context.SaveChanges();

    var company = person.Company; // lazy loading query happens here
} 
```

如果没有延迟加载，您可以使用显式加载：

```
using (var context = new MyDbContext())
{
    var person = new Person();
    person.CompanyID = 123;
    context.People.Add(person);
    context.SaveChanges();

    context.Entry(person).Reference(p => p.Company).Load(); // explicit loading

    var company = person.Company; // no query anymore, Company is already loaded
} 
```

# backbone.js - 动态或 xhr 模板

> ID：10542217
> 
> 赞同：0
> 
> 时间：2012-05-10T21:12:38.203
> 
> 标签：backbone.js, underscore.js

我刚刚开始将backbone.js 用于我正在从事的项目。

我目前已经按照我想要的方式设置了模型、集合和视图。我正在从服务器上的 REST 应用程序获取数据。

客户可以登录应用程序；目前我正在将该信息输入 underscore.js 模板，但我希望模板是动态的。根据客户的不同，一些选项会有所不同。

我的感觉是，让模板进行特定的 ajax 调用以获取动态信息会完全违背使用backbone.js 的目的。是否可以让主干和下划线从 xhr 请求中加载模板？还是有更好的方法来做到这一点？

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:23:12.397

就下划线而言，模板只是一个字符串，因此您可以从任何您想要的地方获取该字符串。所以你可以这样做：

```
render: function() {
    var that = this;
    $.get('/some_template', function(tmpl) {
        that.$el.html(_.template(tmpl, that.model.toJSON()));
    });
    return this;
} 
```

在现实生活中，您可能希望将其隐藏在一个仅从服务器获取特定模板一次的简单缓存对象后面。

或者，您可以让您的服务器代码找出需要哪组模板并将它们嵌入到`<script>`元素中：

```
<script id="tmpl1" type="text/template">
    Some template code...
</script>
<script id="tmpl2" type="text/template">
    Some template code...
</script>
... 
```

并将模板从`<script>`s 中拉出：

```
render: function() {
    var tmpl = _.template($('#tmpl1').html());
    this.$el.html(tmpl(this.model.toJSON()));
    return this;
} 
```

再一次，您可能希望在`tmpl`某处缓存已编译的模板，或者甚至在定义视图类时对其进行编译（当然，假设 DOM 已经准备就绪）：

```
var V = Backbone.View.extend({
    template: _.template($('#tmpl1').html()),
    //...
    render: function() {
        this.$el.html(this.template(this.model.toJSON()));
        return this;
    }
}); 
```

# php - 如何使用 PHP 从 XML 和/或 JSON 中提取/会话数据

> ID：10542219
> 
> 赞同：0
> 
> 时间：2012-05-10T21:12:41.230
> 
> 标签：php, xml, json, yql

我在 developer.yahoo.com/yql/console/ 中插入了以下命令

```
yql = select * from yahoo.finance.quotes where symbol in ("XAUUSD=X","XAGUSD=X") 
```

但显示所有对我来说不需要的数据。 [Yahoo YQL生成的XML代码和Yahoo YQL](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20yahoo.finance.quotes%20where%20symbol%20in%20%28%22XAUUSD=X%22,%22XAGUSD=X%22%29&diagnostics=true&env=http://datatables.org/alltables.env)生成[的Json代码](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20yahoo.finance.quotes%20where%20symbol%20in%20%28%22XAUUSD=X%22,%22XAGUSD=X%22%29&format=json&diagnostics=true&env=http://datatables.org/alltables.env&callback=cbfunc)

我只想提取 Ask、Bid、AskRealtime、BidRealtime、LastTradeRealtimeWithTime、LastTradeWithTime、LastTradePriceOnly。通过使用 php session，我想将抓取的数据插入同一页面的 html table/div 中。

不知道 XML 会更容易提取数据还是 Json。这对我来说更容易获取字段数据并将其粘贴到 html 表中。

并且还希望在雅虎中刷新数据时将抓取的数据流式传输或自动刷新..
找到此链接
streamerapi.finance.yahoo.com

但不知道如何工作请帮忙

我试过了，但什么也没打印

```
<script type='text/javascript'>  
  function forex(o){  
    var items = o.query.results.item;  
    var output = '';  
    var no_items=items.length;  
    for(var i=0;i<no_items;i++){  
      var Ask = items[i].Ask;
      var AskRealtime = items[i].AskRealtime;
      var BidRealtime = items[i].BidRealtime;
      var LastTradeDate = items[i].LastTradeDate;
      var LastTradePriceOnly = items[i].LastTradePriceOnly;
      var LastTradeTime = items[i].LastTradeTime;
      output += Ask + AskRealtime + BidRealtime + LastTradeDate + LastTradePriceOnly+ LastTradeTime;  
      +title + desc ; 
    }  
    // Place news stories in div tag  
    document.getElementById('results').innerHTML = output;    
  }  
</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T01:45:49.720

查看 json_decode(); ！完美运行。

```
$x = json_decode($json_string);         // gives back an array
$x = json_decode($json_string, true);   // gives back an object 
```

这件事帮助了我很多次...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T22:01:26.043

利用

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

并将其放在计时器上。如果您记录响应 (console.log)，您将看到它是一个对象，您可以遍历该对象以获得所需的内容。

它也需要是一个有效的 json，所以请确保它使用 JSON Lint：

[http://jsonlint.com/](http://jsonlint.com/)

如果不是（我认为通常人们用字符串作为有效 json 的前缀），那么您将不得不使用 PHP 来获取 json（file_get_contents 或 CURL）并将响应切碎，直到它是一个有效的 json。

# sql - 使用分析函数选择具有 2 个日期列的记录的高性能查询

> ID：10542226
> 
> 赞同：0
> 
> 时间：2012-05-10T21:12:50.113
> 
> 标签：sql, oracle10g, analytic-functions

我正在寻找一种编写 SQL 查询的高性能方法。

我有一个包含列 ( `id`, `fname`, `lname`, `accountid`, `creation_date`, ) 的表，`update_date`我必须在该表中查找具有相同`fname`,并且最近日期基于的记录（注意可以为空）`lname``accountid``greatest(max(creation_date),max(update_date))``update_date`

我希望我需要使用分析函数

我有这些情况：

```
(id,fname,lname,accountid,creation_date,update_date)
(1,'a','a','2','07/01/2010 10:59:43','07/01/2010 10:59:43')
(2,'a','a','2','07/01/2010 10:59:43','07/01/2010 10:59:43')
(3,'a','a','2','07/01/2010 10:59:43','07/01/2010 10:59:43') 
```

我想选择最后插入的：这条记录 (3,'a','a','2','07/01/2010 10:59:43','07/01/2010 10:59:43' )

```
(id,fname,lname,accountid,creation_date,update_date)
(3,'b','a','2','07/01/2009 10:59:43','07/01/2010 10:59:43')
(4,'b','a','2','07/01/2011 10:59:43',null)
(5,'b','a','2','07/01/2009 10:59:43','07/01/2009 10:59:43') 
```

我想在两列 (creation_date,update_date) 上选择最新的一个，即 (4,'b','a','2','07/01/201110:59:43',null)

```
(id,fname,lname,accountid,creation_date,update_date)
(6,'c','g','4','07/01/2010 10:59:43',null)
(7,'c','g','4','07/01/2011 10:59:43',null)
(8,'c','g','4','07/01/2009 10:59:43',null) 
```

我想在两列 (creation_date,update_date) 上选择最新的一个，即 (7,'c','g','4','07/01/2011 10:59:43',null)

```
(id,fname,lname,accountid,creation_date,update_date)
(9,'k','t','2','07/01/2009 10:59:43','07/01/2012 10:59:43')
(10,'k','t','2','07/01/2011 10:59:43',null)
(11,'k','t','2','07/01/2009 10:59:43','07/01/2009 10:59:43') 
```

我想在两列 (creation_date,update_date) 上选择最新的一个，即 (9,'k','t','2','07/01/2009 10:59:43','07/01 /2012 10:59:43')

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:35:31.620

您应该使用分析函数[`rank()`](http://psoug.org/reference/rank.html)或[`row_number()`](http://psoug.org/snippet/ROW_NUMBER_483.htm). 我自己的特别偏好是，`rank()`但只有在按唯一索引分区时它才能真正有效。像下面这样，假设有一个唯一的索引`fname, lname, accountid, creation_date`

```
select *
  from ( select a.*
              , rank() over ( partition by fname, lname, accountid 
                      order by creation_date desc
                              , update_date desc ) as rnk
           from my_table a )
 where rnk = 1 
```

这对,的每个组合进行`fname, lname, accountid`排序。使用, 使您可以选择最大值。`creation_date``update_date``where rnk = 1``creation_date, update_date`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T20:54:07.003

听起来你想要类似的东西

```
SELECT *
  FROM (SELECT a.*,
               rank() over (partition by fname, lname, accountid
                                order by coalesce( update_date, creation_date ) desc,
                                         id desc) rnk
          FROM your_table)
 WHERE rnk = 1 
```

*   我猜想为什么您希望`id`返回 3 的行而不是`id`1 或 2 的行，因为所有 3 行都具有相同的`update_date`and `creation_date`。我的猜测是，您想通过选择具有最大值的行来选择平局`id`。如果您想实施不同的规则，您需要告诉我们这是什么规则。
*   我还假设`update_date`，如果存在，将始终大于或等于`creation_date`。如果在创建行之前更新了行，那就太奇怪了。

# c# - 密封类中没有主体的虚拟方法

> ID：10542228
> 
> 赞同：0
> 
> 时间：2012-05-10T21:12:53.467
> 
> 标签：c#, .net, virtual, abstract, sealed

当我尝试运行以下代码时，它会出错。

```
private sealed class ReqHandler 
{
    public ReqHandler(object @object, IntPtr method);

    public virtual IAsyncResult BeginInvoke(object[] args, AsyncCallback callback, object @object);

    public virtual d0 EndInvoke(IAsyncResult result);

    public virtual d0 Invoke(object[] args);
} 
```

我得到的错误是。

> HB_Auth.AuthImpl.ReqHandler.ReqHandler(object, IntPtr)' 必须有一个主体，因为它没有标记为抽象、外部或部分 (CS0501) (HB_Auth.Patched)
> 
> 新虚拟成员`HB_Auth.AuthImpl.ReqHandler.BeginInvoke(object[], AsyncCallback, object)' is declared in a sealed class`HB_Auth.AuthImpl.ReqHandler' (CS0549) (HB_Auth.Patched)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T21:15:00.753

编译器错误说明了一切：您已声明方法，但它们没有主体。所以，要么给他们一个身体，要么把他们标记为抽象的。但是，正如我看到的那样，您的类是私有的和密封的，使它们抽象是不行的，因为您的类是密封的，所以没有人可以继承它。

但是，您粘贴的代码看起来像反编译代码？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T21:14:51.393

*   密封类中不能有虚拟成员。

**CS0549 错误：**

> 密封类不能作为基类，而虚方法必须在派生类中实现，这是矛盾的。

[**MSDN**](http://msdn.microsoft.com/en-us/library/exaxze9s%28v=vs.71%29.aspx)

*   需要实现的功能：

**CS0501 错误：**

> 非`abstract`方法必须有实现。

[**MSDN**](http://msdn.microsoft.com/en-us/library/fwze7c55%28v=VS.71%29.aspx)

您可能想要制作课程`protected`和`virtual`功能`abstract`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T21:17:01.987

第一个问题：构造函数需要一个主体。你不能只声明一个构造函数，你需要定义它。如果需要，可以使用空构造函数：

```
public ReqHandler(object @object, IntPtr method) {} 
```

第二个问题：你做了一个密封类，但有虚方法。虚拟方法仅用于在扩展此类的类中进行覆盖，但您不能扩展密封类，因此会出现错误。您需要定义这些方法，或者解封类（在这种情况下，您需要扩展它以做任何有用的事情）。

# java - 接近警报意图不放置或返回额外内容

> ID：10542235
> 
> 赞同：1
> 
> 时间：2012-05-10T21:13:28.377
> 
> 标签：java, android, android-intent, gps, broadcastreceiver

我正在做的是添加具有唯一ID的不同接近警报作为额外的并且它不起作用 -

```
 for (int i = 0; i < latArray.size(); i++) 
    {   

        Bundle extra = new Bundle();
        extra.putInt("UID", i);
        Intent intent = new Intent(IntentToFire);  
        intent.putExtra("Blob", extra);
        PendingIntent proximityIntent = PendingIntent.getBroadcast(this,-1 , intent, 0);
        LocationManager locationManager = 

        Log.i("Picture:","Location img:"+GetLocation.imgArray.get(i));
        Log.i("Potatoo:", "Lat :"+latArray.get(i)+" Lng :"+lngArray.get(i));
        locationManager.addProximityAlert(Double.valueOf(latArray.get(i)), Double.valueOf(lngArray.get(i)), radius,expiration,proximityIntent);
    } 
```

然后在广播接收器上我把这段代码 -

```
flag = intent.getBundleExtra("blob").getInt("UID"); 
```

每次我要打印标志时，我都会收到一个错误。一个想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T10:14:23.447

尝试使用 FLAG_UPDATE_CURRENT：

`PendingIntent.getBroadcast(this,-1 , intent, PendingIntent.FLAG_UPDATE_CURRENT);`

我发现最简单的方法是对 data-uri 中的数据进行编码，`Intent`并在未决意图中包含接近警报，例如：

`geo:<lat>,<lon>?id=<your id>`

您可以使用自己的协议部分（`geo`谷歌地图 AFAIK 使用）。对我来说没有缓存问题（似乎你得到了一个缓存/旧/错误的 PendingIntent）。

# mysql - MySQL，如何将多条记录加入一条记录

> ID：10542236
> 
> 赞同：3
> 
> 时间：2012-05-10T21:13:30.890
> 
> 标签：mysql, sql, wordpress

我正在尝试从 wordpress 数据库中获取信息；我需要的数据分布在 3 个表之间：

*   wp_em_events
*   wp_em_locations
*   wp_postmeta

简化图：

```
wp_em_events
+-----+--------+-----+
| id  | loc_id | a   |
+-----+--------+-----+
|   1 | 3      | foo |
|   2 | 4      | bar |
+-----+--------+-----+

wp_em_locations
+--------+----+
| loc_id | b  |
+--------+----+
|    3   | x  |
|    4   | y  |
+--------+----+

wp_postmeta
+-------+------+------+
|post_id| key  |value |
+-------+------+------+
|    1  | name | dave |
|    1  | age  | 14   |
|    2  | name | rob  |
|    2  | age  | 20   |
+-------+------+------+

$querystr = "
    SELECT *
    FROM wp_em_events
    LEFT JOIN wp_em_locations ON wp_em_events.loc_id = wp_em_locations.loc_id
    LEFT JOIN wp_postmeta ON wp_em_events.id = wp_postmeta.post_id
    WHERE wp_em_events.id = 1
    GROUP BY wp_em_events.location_id, wp_em_events.id
"; 
```

**这将返回：**

```
+-----+--------+-----+----+-----+-------+
| id  | loc_id | a   |  b | key | value |
+-----+--------+-----+----+-----+-------+
|   1 | 3      | foo |  x | age |  20   |
+-----+--------+-----+----+-----+-------+ 
```

我的 GROUP BY 破坏了**我想收到的名字->戴夫：**

```
+-----+--------+-----+----+-----+-----+
| id  | loc_id | a   |  b | name| age |
+-----+--------+-----+----+-----+-----+
|   1 | 3      | foo |  x | dave|  14 |
+-----+--------+-----+----+-----+-----+ 
```

我需要捕获所有元记录，并以某种方式将它们与父记录相关联，最好是它们的键->值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T21:39:33.253

嗯，你可以这样做..

```
SELECT e.id, 
       e.loc_id, 
       e.a, 
       l.b, 
       p_name.Value `Name`, 
       p_age.Value  Age 
FROM   wp_em_events e 
       INNER JOIN wp_em_locations l 
         ON e.loc_id = l.loc_id 
       INNER JOIN wp_postmeta p_name 
         ON e.id = p_name.Post_id 

       INNER JOIN wp_postmeta p_age 
         ON e.id = p_age.Post_id 

WHERE  e.id = 1 
            AND p_name.`key` = 'name' 
            AND p_age.`key` = 'age' 
```

[演示](http://sqlfiddle.com/#!2/1a7ac/21)

但是您需要动态构建查询。特别是列名和别名以及 WHERE 子句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:27:31.737

做一个动态数据透视表。这里有一个例子，我一直在我的一个项目中使用。它与您的案件没有直接关系，但您会明白的。

```
create table testowy_pivot
            (
             name varchar(255),
             color varchar(255),
             quantity int
            )

insert into testowy_pivot (name, color, quantity) values ('road frames','black',null)
insert into testowy_pivot (name, color, quantity) values ('road frames','red',null)
insert into testowy_pivot (name, color, quantity) values ('helmets','red',288)
insert into testowy_pivot (name, color, quantity) values ('helmets','black',324)
insert into testowy_pivot (name, color, quantity) values ('helmets','blue',216)
insert into testowy_pivot (name, color, quantity) values ('socks','white',180)
insert into testowy_pivot (name, color, quantity) values ('socks','white',216)

DECLARE @columns VARCHAR(8000)

SELECT
@columns = COALESCE(@columns + ',[' + cast(color as varchar) + ']','[' + cast(color as varchar)+ ']')
FROM testowy_pivot
GROUP BY color

DECLARE @query VARCHAR(8000)

SET @query = '
           SELECT *
                     FROM testowy_pivot
                               PIVOT
                                  (
                           sum(quantity) --sum, max, etc.
                               FOR [color]
                               IN (' + @columns + ')
                                  )
                     AS p'

EXECUTE(@query)

select * from testowy_pivot 
```

问候，米。

# python - 测试numpy数组中的每个元素是否位于两个值之间的简单方法？

> ID：10542240
> 
> 赞同：65
> 
> 时间：2012-05-10T21:13:50.097
> 
> 标签：python, numpy

我想知道是否有一种语法上简单的方法来检查 numpy 数组中的每个元素是否位于两个数字之间。

换句话说，就像`numpy.array([1,2,3,4,5]) < 5`return一样`array([True, True, True, True, False])`，我想知道是否有可能做类似这样的事情：

```
1 < numpy.array([1,2,3,4,5]) < 5 
```

……获得……

```
array([False, True, True, True, False]) 
```

我知道我可以通过布尔测试的逻辑链接来获得这一点，但是我正在处理一些相当复杂的代码，并且我正在寻找一个语法上干净的解决方案。

有小费吗？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-05-10T21:23:11.607

一种解决方案是：

```
import numpy as np
a = np.array([1, 2, 3, 4, 5])
(a > 1) & (a < 5)
# array([False,  True,  True,  True, False]) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-04-04T19:03:08.717

另一种是使用`numpy.any`，这是一个例子

```
import numpy as np
a = np.array([1,2,3,4,5])
np.any((a < 1)|(a > 5 )) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-27T08:14:08.393

您还可以将矩阵居中并使用距离为 0

```
upper_limit = 5
lower_limit = 1
a = np.array([1,2,3,4,5])
your_mask = np.abs(a- 0.5*(upper_limit+lower_limit))<0.5*(upper_limit-lower_limit) 
```

要记住的一件事是比较在两边都是对称的，所以它可以做`1<x<5`or `1<=x<=5`，但不能`1<=x<5`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-06T22:16:33.023

在多维数组中，您可以使用`np.any()`选项建议或比较运算符，而使用`&`and`and`会引发错误。

### 使用比较运算符的示例（在多维数组上）

```
import numpy as np

arr = np.array([[1,5,1],
                [0,1,0],
                [0,0,0],
                [2,2,2]]) 
```

现在使用`==`如果您想检查数组值是否在范围内，即 A < arr < B，或者`!=`如果您想检查数组值是否在范围外，即 arr < A 和 arr > B：

```
(arr<1) != (arr>3)
> array([[False,  True, False],
         [ True, False,  True],
         [ True,  True,  True],
         [False, False, False]])

(arr>1) == (arr<4)
> array([[False, False, False],
         [False, False, False],
         [False, False, False],
         [ True,  True,  True]]) 
```

# php - 为什么呼应 nbsp 会有所作为？(PHP)

> ID：10542243
> 
> 赞同：0
> 
> 时间：2012-05-10T21:13:54.603
> 
> 标签：php, echo, fread

我有一个脚本，它打开一个文件然后打印它的内容（因为一个漫长而愚蠢的原因，不值得解释）。我遇到的问题是，它经常拒绝工作，除非我先回显其他一些文本。下面的代码不起作用，但如果我把 `echo "a";` or `echo "&nbsp;";`放在首位，它会起作用。更奇怪的是，`echo " ";`还不够。

回显某些文本有什么作用？

```
//...a bunch of code to get the file name
if(file_exists($file))
    {
        $fp=fopen($file, "r");
        $temp = fread( $fp, filesize($file));
        echo $temp;
    } 
else 
    { 
    echo $file." not found<br /><br />";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:21:34.610

```
$filelen = @readfile($file);
if ($filelen===FALSE) {
    echo "{$file} not found <br /><br />";
} 
```

# powershell - 点源不以 .ps1 结尾的 PowerShell 脚本

> ID：10542245
> 
> 赞同：3
> 
> 时间：2012-05-10T21:14:00.677
> 
> 标签：powershell, dot-source

从一个 PowerShell 程序，我可以“点源”另一个 PowerShell 程序。即我可以执行它，就好像它写在第一个里面一样。
例子：

```
Write-Host 'before'
. MyOtherProgram.ps1
Write-Host 'after' 
```

MyOtherProgram 在主程序中的“包含”中，就像它的内容已被复制/粘贴一样。

问题是：我只能点源一个文件名以`.ps1`
我不能`MyOtherProgram.lib`或`MyOtherProgram.whatever`

任何人都有一种方法来点源不以结尾的 PowerShell 脚本`.ps1`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T07:52:00.667

另一种方法是使用`Invoke-Expression`：

```
$code = Get-Content ./MyOtherProgram.lib | Out-String
Invoke-Expression $code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T23:43:15.723

我不知道这是否被编译到 PowerShell 中，或者它是否是可配置的，但一种方法是让你的脚本暂时重命名它，导入它然后重命名它。

```
Rename-Item C:\Path\MyScript.whatever C:\Path\MyScript.ps1
. C:\Path\MyScript.ps1
Rename-Item C:\Path\MyScript.ps1 C:\Path\MyScript.whatever 
```

# image - ImageMagick 裁剪大图像

> ID：10542246
> 
> 赞同：5
> 
> 时间：2012-05-10T21:14:03.280
> 
> 标签：image, bash, image-processing, imagemagick

我正在尝试从一个巨大的图像创建瓷砖，比如 40000x40000

我在网上找到了一个用于 imagemagick 的脚本，他裁剪了瓷砖。它适用于像 10000x5000 这样的小图像

一旦我变得更大，它最终会使用大量内存并且计算机会死机。

我添加了限制选项，但它们似乎没有生效

我在那里有监视器，但它没有帮助，因为脚本只会减慢速度并锁定机器

它似乎只是吞噬了 50gig 的交换磁盘然后杀死了机器

我认为问题在于，当它裁剪每个图块时，它会将它们保存在内存中。我认为我需要的是它在创建时将每个图块写入磁盘，而不是将它们全部存储在内存中。

这是到目前为止的脚本

```
 #!/bin/bash
 file=$1
 function tile() {
 convert -monitor -limit memory 2GiB -limit map 2GiB -limit area 2GB $file -scale ${s}%x -crop 256x256 \
 -set filename:tile "%[fx:page.x/256]_%[fx:page.y/256]" \
 +repage +adjoin "${file%.*}_${s}_%[filename:tile].png"
 }
 s=100
 tile
 s=50
 tile 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T12:15:28.653

经过更多的挖掘和[ImageMagick 论坛](http://www.imagemagick.org/discourse-server/)上的人的一些帮助后，我设法让它工作。

**让它工作的诀窍是`.mpc`格式**。由于这是 ImageMagick 使用的本机图像格式，因此它不需要转换初始图像，它只是剪切出它需要的部分。我设置的第二个脚本就是这种情况。

假设您有一个`50000x50000` `.tif`名为`myLargeImg.tif`. 首先使用以下命令将其转换为本机图像格式：

```
 convert -monitor -limit area 2mb myLargeImg.tif myLargeImg.mpc 
```

然后，运行将创建瓷砖的波纹管 bash 脚本。`tiler.sh`在与 mpc 图像相同的文件夹中创建一个文件，并放入以下脚本：

```
 #!/bin/bash
 src=$1
 width=`identify -format %w $src`
 limit=$[$width / 256]
 echo "count = $limit * $limit = "$((limit * limit))" tiles"
 limit=$((limit-1))
 for x in `seq 0 $limit`; do
   for y in `seq 0 $limit`; do
     tile=tile-$x-$y.png
     echo -n $tile
     w=$((x * 256))
     h=$((y * 256))
     convert -debug cache -monitor $src -crop 256x256+$w+$h $tile
   done
 done 
```

在您的控制台/终端中运行以下命令，然后观察图块一次出现一个到您的文件夹中。

```
 sh ./tiler.sh myLargeImg.mpc 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-08T12:20:39.417

[libvips](https://libvips.github.io/libvips/)有一个运算符，可以非常快速地完成您想要的操作。文档中有一章[介绍了 dzsave 并解释了它的工作原理](https://libvips.github.io/libvips/API/current/Making-image-pyramids.md.html)。

它也可以在相对较少的内存中完成：我经常使用不到 1GB 的内存来处理 200,000 x 200,000 像素的幻灯片图像。

请参阅[此答案](https://stackoverflow.com/questions/10853119/chop-image-into-tiles-using-vips-command-line/15293104#15293104)，但简要说明：

```
$ time convert -crop 512x512 +repage huge.tif x/image_out_%d.tif
real    0m5.623s
user    0m2.060s
sys     0m2.148s
$ time vips dzsave huge.tif x --depth one --tile-size 512 --overlap 0 --suffix .tif
real    0m1.643s
user    0m1.668s
sys     0m1.000s 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T22:46:44.527

您可以尝试使用[GDAL](http://gdal.org/)项目中的[gdal_translate](http://gdal.org/gdal_translate.html)实用程序。不要被项目名称中的“地理空间”吓到。GDAL 是一个高级库，用于访问和处理各种格式的栅格数据。它专用于地理空间用户，但也可用于处理常规图像，没有任何问题。

`in.tif`这是从40000x40000 像素的大文件生成 256x256 像素图块的简单脚本：

```
#!/bin/bash
width=40000
height=40000
y=0
while [ $y -lt $height ]
do
   x=0
   while [ $x -lt $width ]
   do
      outtif=t_${y}_$x.tif
      gdal_translate -srcwin $x $y 256 256 in.tif $outtif
      let x=$x+256
   done
   let y=$y+256
done 
```

GDAL 二进制文件可用于大多数类 Unix 系统以及可[下载](http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries)的 Windows 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T21:23:50.600

ImageMagick 根本不适合这种任务。在像你这样的情况下，我建议使用 VIPS 库和相关的前端 Nip2

VIPS 专门设计用于处理*非常*大的图像。

[http://www.vips.ecs.soton.ac.uk/index.php?title=VIPS](http://www.vips.ecs.soton.ac.uk/index.php?title=VIPS)

# .net - 3D 位置的正则表达式

> ID：10542247
> 
> 赞同：-1
> 
> 时间：2012-05-10T21:14:05.840
> 
> 标签：.net, regex

我希望在 .NET 中验证空间中的一个点作为输入`DataGridView`。的输入`DataGridViewTextBoxCell`应采用以下形式：

```
[1.0, 1.0, 1.0] 
```

以上`1.0`代表 X,Y,Z 轴（也可以是`0.1`或只是`.1`）。它还必须包含左括号和右括号。
因为它是一个位置，它可以是负数或正数，并且在小数点后有 n 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:31:34.950

If you are looking for a RegEx, it should be something like that:

```
^ // The string should start with the left bracer
\[ // left bracer

([-+]?[0-9]*\.?[0-9]+), // first float value followed by a virgule, this is matched
([-+]?[0-9]*\.?[0-9]+), // second float value followed by a virgule, this is matched
([-+]?[0-9]*\.?[0-9]+) // third float value, this is matched

\] // right bracer
$ // The string should end with the right bracer 
```

Without comments this give you:

```
^\[([-+]?[0-9]*\.?[0-9]+),([-+]?[0-9]*\.?[0-9]+),([-+]?[0-9]*\.?[0-9]+)\]$ 
```

If you want the regex to ignore any spaces you can add \s* between each element.

```
^\s*\[\s*([-+]?[0-9]*\.?[0-9]+)\s*,\s*([-+]?[0-9]*\.?[0-9]+)\s*,\s*([-+]?[0-9]*\.?[0-9]+)\s*\]\s*$ 
```

# perl - 使用 IO::Event 检测目录中的新文件

> ID：10542252
> 
> 赞同：3
> 
> 时间：2012-05-10T21:14:18.820
> 
> 标签：perl

我正在尝试使用[IO::Event](http://search.cpan.org/perldoc?IO%3a%3aEvent)来检测何时将新文件添加到目录中。我是 IO::Event 库的新手，想知道它是否可以轻松实现。

我尝试了下面的代码，看看我是否可以让它做一些没有运气的事情。当我尝试使用`opendir`而不是`open`.

我只是想看看这个图书馆是否可以为我提供我正在寻找的东西。我不需要普通 Perl 的解决方案，因为我可以自己编写代码。我看这个的唯一原因是因为我想使用[Proc::JobQueue::EventQueue](http://search.cpan.org/perldoc?Proc%3a%3aJobQueue%3a%3aEventQueue)。我可以只使用[Proc::JobQueue](http://search.cpan.org/perldoc?Proc%3a%3aJobQueue)编写解决方案，但认为这可能更干净。

```
#!perl

use warnings;
use strict;
use IO::Event;

open my $dirhandle,'/some/path/here/';

my $event = IO::Event->new($dirhandle);

Event::loop();

close $dirhandle;

sub ie_input{
    print "ie_input called\n";
}

sub ie_read_ready{
    print "ie_read_ready called\n";
}

sub ie_werror{
    print "ie_werrory called\n";
}

sub ie_output{
    print "ie_output called\n";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T23:07:55.203

我建议您为此使用[File::ChangeNotify](http://search.cpan.org/perldoc?File%3a%3aChangeNotify)和[File::ChangeNotify::Watcher](http://search.cpan.org/perldoc?File%3a%3aChangeNotify%3a%3aWatcher)。

```
use File::ChangeNotify;

my $watcher =
    File::ChangeNotify->instantiate_watcher
        ( directories => [ '/my/path', '/my/other' ],
          regex       => qr/\.(?:pm|conf|yml)$/,
        );

if ( my @events = $watcher->new_events() ) { ... }

$watcher->watch($handler); 
```

# c# - 检查浏览器是否存在于 ASP.NET 中

> ID：10542254
> 
> 赞同：1
> 
> 时间：2012-05-10T21:14:31.843
> 
> 标签：c#, asp.net, httprequest, user-agent

我正在尝试编写一个 Web 应用程序，如果请求来自浏览器，则会生成一个文件，但如果它来自另一个来源（例如，Windows 服务访问该站点以检索响应），它只会返回生成的响应。

这行得通吗？

```
if (Request.Browser == null)
{
    Response.Write(response);
}
else
{
    Response.Write("You're in a browser. Go Away.");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:24:17.440

这取决于您希望它有多安全/可靠。假设您可以控制 Windows 服务，一个简单的方法是让它指定一个特定的用户代理字符串。然后像这样的简单检查就足够了：

```
if (Request.UserAgent == "MyWindowsService")
{
    Response.Write(response);
}
else
{
    Response.Write("You're in a browser. Go Away.");
} 
```

# postgresql - 在 Postgresql 9.1 中正确排序

> ID：10542256
> 
> 赞同：2
> 
> 时间：2012-05-10T21:14:39.167
> 
> 标签：postgresql, collation, postgresql-9.1

我已经使用 lc_collat​​e、lc_ctype = es_PE.UTF-8 安装了 Ubuntu 12.04 和 PG 9.1，但它没有按预期进行整理（u = ü = ú = U = Ú = Ü）。

如果我：

```
CREATE TABLE testing (id integer PRIMARY KEY, dad text, mum text, name text);
INSERT INTO testing VALUES
  (1, 'león','valencia', 'josé'),
  (2, 'leon', 'mendoza', 'juan'),
  (3, 'león', 'valárd', 'jose'),
  (4, 'león','válencia', 'jos'),
  (5, 'león', 'mendoza', 'jua'),
  (6, 'leon', 'valencia', 'josie'),
  (7, 'león', 'valencia', 'josie'),
  (8, 'leo','zara', 'juan'),
  (9, 'león','Valencia', 'jos');
SELECT * FROM testing ORDER BY dad, mum, name; 
```

然后我得到：

```
 id | dad  |   mum    | name
----+------+----------+-------
  8 | leo  | zara     | juan
  2 | leon | mendoza  | juan
  6 | leon | valencia | josie
  5 | león | mendoza  | jua
  3 | león | valárd   | jose
  1 | león | valencia | josé
  7 | león | valencia | josie
  9 | león | Valencia | jos
  4 | león | válencia | jos
(9 rows) 
```

我必须如何配置它才能获得：

```
 id | dad  |   mum    | name
----+------+----------+-------
  8 | leo  | zara     | juan
  5 | león | mendoza  | jua
  2 | leon | mendoza  | juan
  3 | león | valárd   | jose
  9 | león | Valencia | jos
  4 | león | válencia | jos
  1 | león | valencia | josé
  7 | león | valencia | josie
  6 | leon | valencia | josie
(9 rows) 
```

这是在 MySQL 中完成的，没有任何问题。但我不能在 PG 9.1 中配置它

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:15:00.047

PostgreSQL 使用操作系统的排序规则；但是，它永远不会使不同值的顺序随机化——如果两个字符串根据排序规则相等，则它本质上会退回到 C 排序规则作为决胜局。

您有两种可能性：您可以对没有重音的字符串进行排序，或者您可以对字符串列的串联进行排序。

对于第一个选项，您需要在数据库中安装 unaccent 功能，如下所示：

```
CREATE EXTENSION unaccent; 
```

完成后，您可以运行以下命令：

```
SELECT * FROM testing ORDER BY unaccent(dad), unaccent(mum), unaccent(name); 
```

对于第二个选项，您不需要安装其他任何东西，但您可以运行如下内容：

```
SELECT * FROM testing ORDER BY dad || ', ' || mum || ' ' || name; 
```

在我们的商店中，我们做了类似的事情，但我们使用“生成的列”来确保一致性。这些方面的东西：

```
CREATE FUNCTION search_name(rec testing)
  RETURNS text
  LANGUAGE SQL
AS $$ SELECT $1.dad || ', ' || $1.mum || ' ' || $1.name; $$; 
```

这允许像这样更简单的选择：

```
SELECT * FROM testing t ORDER BY t.search_name; 
```

# php - 在同一台服务器上具有 1 个 kohana 核心的多个站点

> ID：10542262
> 
> 赞同：1
> 
> 时间：2012-05-10T21:15:18.103
> 
> 标签：php, kohana, kohana-3, widget, hmvc

我认为它必须是可能的，但还没有发现任何有用的东西......

是否可以使用 1 个 Kohana 核心运行多个网站？基本上所有的网站都是一样的，只是布局不同。（只是一个不同的视图文件夹，（作品））和内容有点不同。（这是基于从数据库中提取它的常量 SITE_ID，（也有效））

唯一的两件事是，如何在我的 bootstrap/index.php 中配置它？我想检查网址。使用该 url 对表 'websites' 执行查询（选择 where url = '$url'）并获取正确的 SITE_ID 并从该查询中查看。这样，x.com y.com 和 z.com 都会提取相同的 index.php 文件。在定义 SITE_ID 并使用该 ID 加载正确的内容并使用正确的视图之后。

另外，我怎样才能结合小部件来做到这一点。我有 8 个不同的小部件，每个网站在不同的页面上显示这 8 个中的 3 个。因此 x.com/a 将显示小部件“widget_1”和“widget_2”，x.com/b 将显示“widget_2”和“widget_3”。但是 y.com/a 必须显示“widget_6”和“widget_7”，而 y.com/b 必须显示“widget_3”和“widget_4”。有没有办法可以管理？以前我没有经常使用小部件，现在我想将它与多个站点结合使用......

可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T03:04:46.583

对于在单个实例中通过数据库处理的多个站点；您所做的类似于多站点 CMS。我有开发 CMS 的经验，包括单站点和多站点排序；我可以通过经验告诉您，开发多站点 CMS 比开发单个 CMS 的多个实例要复杂得多。如果客户不需要多站点并且实施取决于我，我通常会选择后者。

您是否考虑过具有单独文件夹的多个网站实例？

对于单个站点的多个实例，我建议阅读[http://kohanaframework.org/3.2/guide/kohana/tutorials/sharing-kohana](http://kohanaframework.org/3.2/guide/kohana/tutorials/sharing-kohana)以更好地了解如何使用单个（甚至多个核心）拥有多个站点.

# python - numpy 数组中的 ndim 加载了 scipy.io.loadmat？

> ID：10542263
> 
> 赞同：2
> 
> 时间：2012-05-10T21:15:20.023
> 
> 标签：python, matlab, numpy, scipy, mat-file

使用 SciPy 和 MATLAB，我无法重建数组以匹配使用 scipy.io.loadmat() 加载的 MATLAB 单元数组给出的内容。

例如，假设我在 MATLAB 中创建了一个包含一对双精度数组的单元格，然后使用 scipy.io 加载它（我正在使用 SPM 与 pynifti 等进行成像分析）

MATLAB

```
>> onsets{1} = [0 30 60 90]
>> onsets{2} = [15 45 75 105] 
```

Python

```
>>> import scipy.io as scio
>>> mat = scio.loadmat('onsets.mat')
>>> mat['onsets'][0]
array([[[ 0 30 60 90]], [[ 15  45  75 105]]], dtype=object)

>>> mat['onsets'][0].shape

(2,) 
```

我的问题是：**为什么这个 numpy 数组的形状是 (2,) 而不是 (2,1,4)**？在现实生活中，我正在尝试使用 Python 解析日志文件并构建这些起始单元格数组，因此我希望能够从头开始构建它们。

当我尝试从打印输出构建相同的数组时，我得到了不同的形状：

```
>>> new_onsets = array([[[ 0, 30, 60, 90]], [[ 15,  45,  75, 105]]], dtype=object)
array([[[0, 30, 60, 90]],

       [[15, 45, 75, 105]]], dtype=object)

>>> new_onsets.shape
(2,1,4) 
```

不幸的是，形状（单元格数组中的双精度向量）是在上游规范中编码的，所以我需要能够以这种格式准确地保存它。当然，这没什么大不了的，因为我可以在 MATLAB 中编写解析器，但是弄清楚发生了什么并增加我对 numpy 的[微不足道] 知识会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T15:44:45.540

来自 scipy 邮件列表的 Travis 回应说，构建它的正确方法是首先创建结构，然后填充数组：

[http://article.gmane.org/gmane.comp.python.scientific.user/31760](http://article.gmane.org/gmane.comp.python.scientific.user/31760)

```
> 您可以使用以下方法构建您之前看到的内容：
>
> new_onsets = empty((2,), dtype=object)
> new_onset[0] = 数组（[[0, 30, 60, 90]]）
> new_onsets[1] = 数组（[[15, 45, 75, 105]]）

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T22:51:21.033

这是我个人觉得在 python 中有点烦人的事情之一。这是因为`loadmat`自动“挤压”尺寸。

默认情况下，squeeze_me=True 所以你已经看到你得到这个：

```
>>> x = sio.loadmat('mymat.mat',squeeze_me=True)
>>> y = x['onsets']
>>> y.shape
(2,) 
```

如果您使用 loadmat 并将squeeze_me 设置为False，那么您不会挤出一维：

```
>>> a = sio.loadmat('mymat.mat',squeeze_me=False)
>>> a
>>> b = a['onsets']
>>> b.shape
(1, 2) 
```

也就是说，我一生都无法弄清楚如何让另一个维度显示（即`b.shape = (1,2,4)`）对于像“onsets”这样的单元格数组。我只能为非细胞普通的香草 MATLAB 数组获得它

```
onset_array = [onsets{1}; onsets{2}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T15:42:52.750

我认为这里的问题是单元数组并不是真正的数组，这就是`scio.loadmat`加载`onsets.mat`到`object`数组的原因。

在这里，您的元胞数组可以简化为一个普通的 shape 数组`(2,1,4)`，但是如果您的数据看起来像：

```
>> onsets{1} = {0 30 60 'bob'}
>> onsets{2} = {15 45 75 'fred'} 
```

我不确定最好的解决方案是什么，但如果你知道你的数据是一个数组，你应该在保存到 Matlab 之前或在使用 Scipy 加载之后转换为普通数组。

**编辑：**理论上，上面的示例单元格数组可以转换为 numpy[结构化数组](http://docs.scipy.org/doc/numpy/user/basics.rec.html)，但请注意，单元格数组通常不是这样，因为列不必是相同的数据类型。表示任意数据类型列表的逻辑方法是使用 Python 列表（或此处的列表数组），这就是`loadmat`返回的内容。

**编辑 2：**按照 Erik Kastman 的建议，修复元胞数组语法。

# jquery - jQuery .animate() marginLeft 在 IE8 及更低版本中不起作用 - 参数无效

> ID：10542265
> 
> 赞同：0
> 
> 时间：2012-05-10T21:15:24.403
> 
> 标签：jquery, internet-explorer-8, internet-explorer-7, jquery-animate, margin

我有一个特定于 IE 的问题。从好的方面来说，它适用于所有其他浏览器。

单击`.close_button_page`应该执行简单动画功能的图像时会出现问题，`div`将 向左移动。

在 IE 8 及更低版本中，它只是在控制台中显示*无效参数。*我在网上发现了类似的问题，但没有解决问题。

注意：目前还有许多其他 IE 错误（`z-index`等），因此请忽略。

**HTML：**

```
<div id="content-left">
    <img class="close_button_page" height="13" width="14" src="assets/images/close_button.png"/>
    <h2>Our process</h2>
    <h3>Even smaller title to this section</h3>
    <p>Dummy text to show that this is the home of Dukelease and that this site is of the utmost quality and will provide hours of fun by flicking through images.</p>
</div> 
```

**CSS：**

```
#content-left {
  -webkit-box-shadow:#000000 1px 1px 5px;
  border-top-color:#FFFFFF;
  border-top-style:solid;
  border-top-width:3px;
  box-shadow:#000000 1px 1px 5px;
  float:left;
  padding-bottom:10px;
  padding-left:10px;
  padding-right:10px;
  padding-top:10px;
  position:relative !important;
  width:230px;
  z-index:10;
}
style.css (line 562)
#content-left, .bg_white {
  background-color:rgba(255, 255, 255, 0.949219);
} 
```

**JavaScript：**

```
$(".close_button_page").click(function(){   

    $('#content-left').animate({
        marginLeft: '-260px'
    }, 1300, function(){
        $('.open_button_page').fadeIn(1000);
    });             
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:58:23.263

Try replacing this:

```
$(".close_button_page").click(function(){   

    $('#content-left').animate({
        marginLeft: '-260px'
    }, 1300, function(){
        $('.open_button_page').fadeIn(1000);
    });             
}); 
```

with this:

```
$(".close_button_page").click(function(){ 
    $('#content-left').toggle('slide');
}); 
```

Tested here [http://jsfiddle.net/ollie101/RuVZ3/5/](http://jsfiddle.net/ollie101/RuVZ3/5/)

# php - 在 php 与 mysql 中对数据进行多少排序？

> ID：10542266
> 
> 赞同：1
> 
> 时间：2012-05-10T21:15:35.887
> 
> 标签：php, mysql, arrays, foreach, group-by

我想对从 mysql 数据库返回的数组进行分组。我已经命名了数组`$item_info`，我想将它分组`folder_id`。

首先，两个相关的问题：

1.  正在执行单个查询以获取下面的数据并始终（或很可能）比 2 个单独的查询（一个涉及所需`GROUP BY`的查询，另一个不涉及）更快地创建新的数组键。
2.  从我在 SO 上读到的内容看来，最好让 MySQL 查询保持简单并使用 PHP 整理数据。对一般哲学的评论？

这是我的数据库返回的内容：

```
$item_info=array(
 array("id"=>"1", 'folder_id'="1", "img"=>"/images/button_01.gif"),
 array("id"=>"2", 'folder_id'="1", "img"=>"/images/button_02.gif"),
 array("id"=>"3", 'folder_id'="2",  "img"=>"/images/button_03.gif"),
 array("id"=>"4", 'folder_id'="2", "img"=>"/images/button_04.gif"),
 array("id"=>"5", 'folder_id'="3", "img"=>"/images/button_05.gif"),
 array("id"=>"6", 'folder_id'="3", "img"=>"/images/button_06.gif")
); 
```

这是我想排列的方式：

```
$item_info=array(
 array(
   array("id"=>"1", 'folder_id'="1", "img"=>"/images/button_01.gif"),
   array("id"=>"2", 'folder_id'="1", "img"=>"/images/button_02.gif")
 ),
 array(
   array("id"=>"3", 'folder_id'="2",  "img"=>"/images/button_03.gif"),
   array("id"=>"4", 'folder_id'="2", "img"=>"/images/button_04.gif")
 ),
 array(
   array("id"=>"5", 'folder_id'="3", "img"=>"/images/button_05.gif"),
   array("id"=>"6", 'folder_id'="3", "img"=>"/images/button_06.gif")
 )); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T21:21:37.473

由于您已经在 RAM 中拥有数据，因此在 PHP 中进行分组似乎非常合理，因为它不需要太多的处理。

你可能想试试

```
$item_info_tmp=array();
foreach ($item_info as $ii) {
    if (!isset($item_info_tmp[$ii['folder_id']]))
        $item_info_tmp[$ii['folder_id']]=array();
    $item_info_tmp[$ii['folder_id']][]=$ii;
}
$item_info=array_values($item_info_tmp); 
```

# django - 如果记录不活动，则阻止 url

> ID：10542269
> 
> 赞同：0
> 
> 时间：2012-05-10T21:15:46.657
> 
> 标签：django

我有一个具有默认为 False 的活动字段的业务模型。当用户提交付款时，此字段设置为 True。

商业模式有一个“个人资料”页面。`active`我想知道如果该字段未设置为 True ，是否有任何方法不允许访问该配置文件页面。

```
urlpatterns = patterns('listings.views',
    # other patterns here...
    url(r'^profile/(?P<slug>[A-Za-z0-9-]+)/$', 'business_profile', name="business_profile"),
    # other urls here...
) 
```

我应该只检查方法中的这个字段`view.business_profile`吗？或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:20:38.230

一种更好的方法*可能*是将`business_profile`视图设置为[返回 404](https://docs.djangoproject.com/en/dev/topics/http/views/#the-http404-exception)，以防“业务模型”实例具有`active=False`.

# schemabinding - 无法在视图上创建索引，因为视图不是架构绑定错误 1939

> ID：10542273
> 
> 赞同：16
> 
> 时间：2012-05-10T21:15:59.257
> 
> 标签：schemabinding

我正在处理的这个作业的第三部分是“基于 OrderID 和 EmployeeID 列创建并索引名为“dbo.Orders Qry”的现有 Northwind 视图。”

预计我会收到错误消息；然而，我的导师只告诉我们谷歌它。我做到了，但是在本周的课程或任何其他课程中都没有方案绑定，而且我发现的东西太深入以至于我无法理解。

这是我没有选中一个框或在某处更改设置的问题吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-28T18:41:35.137

听起来这是在描述**索引视图，您可以在**[此处](http://msdn.microsoft.com/en-us/library/ms191432.aspx)的 Microsoft 网站上阅读它们。Microsoft 从 SQL 2005 开始启用此功能。

在视图定义的文本中，您需要`WITH SCHEMABINDING`在语句之后添加单词`CREATE VIEW`，例如：

```
CREATE VIEW dbo.MyView
WITH SCHEMABINDING

AS

SELECT a, b, c
FROM dbo.MyTable 
```

要添加索引，您需要在视图定义中添加类似于以下内容的语句：

```
-- Create an index on the view.
CREATE UNIQUE CLUSTERED INDEX IDX_MyView_ClusteredIndex
ON dbo.MyView(a, b, c)

GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-08T22:29:59.800

我正在寻找达斯大陆发布的确切内容。这就像一个魅力，然而，这是一个完全不同的情况。我相信上面的答案至少应该被认为是解决方案，如果没有跟进会很好。

# c# - 如何将虚拟滑块创建为将 Button 与 TextBox 组合在一起的 WPF-CustomControl

> ID：10542278
> 
> 赞同：3
> 
> 时间：2012-05-10T21:16:33.797
> 
> 标签：c#, wpf, xaml, user-controls, custom-controls

我想实现一个 WPF CustomControl，即...

1.  通常看起来像一个按钮并将浮点值显示为字符串
2.  拖动按钮时，浮动值像虚拟滑块一样被操纵
3.  单击该按钮时，它会被一个 TextBox 替换，并用当前值作为字符串预填充。可以编辑此文本。在 TextBox 外部单击或按回车键会将控件更改回 Button 并将编辑后的文本用作新值。

我们需要在高度简化的界面中使用此控件。虽然描述听起来有点奇怪，但对我们来说效果非常好。但出于性能原因，我们现在必须将当前实现作为 UserControl 重构为 CustomControl。

我让控件的滑块部分运行并设法显示附加到 Content DependencyProperty 的 TextBox。然而，遗憾的是，我无法从 ControlTemplate 访问这个 TextBox，它看起来大致如下：

```
<Style TargetType="{x:Type local:FloatEditButton}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:FloatEditButton}">
                <Grid Margin="0">
                    <Viewbox VerticalAlignment="Center" HorizontalAlignment="{Binding RelativeSource={RelativeSource TemplatedParent},Path=HorizontalContentAlignment}" Margin="0">
                        <ContentPresenter Name="content" Margin="2"  VerticalAlignment="Center" />
                    </Viewbox>
                    <TextBox  x:Name="XTextBox" Visibility="Collapsed" Text="{Binding Content}"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="EditingAsTextBox" Value="True">
                        <Setter TargetName="XTextBox" Property="Visibility" Value="Visible"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

任何想法，如何将其实现为 CustomControl？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:10:53.040

你的想法真的很不寻常。从可用性的角度来看，您不应该提供像 Button 这样的知名控件的“令人惊讶”的行为。也许组合框会更好地控制这样做。它有一个可以编辑的文本部分，甚至还有一个下拉菜单，您可以在其中提供预定义的值。为拖动部分使用不可见的（背景#01ffffff）拇指）。

我不确定我是否正确理解您的问题。您不应该将您的依赖属性命名为“内容”。如果您从 Button 派生控件，则内容已全部定义为按钮内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T22:26:17.750

经过一番摸索，我找到了以下解决方案：

Generic.xaml 中的模板如下所示...

```
<Style TargetType="{x:Type local:FloatEditButton}">        
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:FloatEditButton}">
                <Grid Margin="0">
                    <TextBlock x:Name="PART_TextBlock" Grid.Row="1"
                               VerticalAlignment="Center" 
                               HorizontalAlignment="Center"
                               Margin="0"
                               FontSize="{TemplateBinding FontSize}"                                   
                               ></TextBlock>
                    <Canvas x:Name="SliderCanvas" Grid.Row="1"  IsHitTestVisible="False" Margin="0,3,0,2">
                        <Rectangle x:Name="PART_SliderDefaultRectangle" Width="1" Height="3" Canvas.Bottom="0"  Fill="Black"/>
                        <Rectangle x:Name="PART_SliderMarkerRectangle" Width="1" Canvas.Top="0" Canvas.Left="20" Fill="#30ffffff" Height="{Binding ElementName=SliderCanvas, Path=ActualHeight}" />
                        <Rectangle x:Name="PART_SliderFillRectangle" Width="10"  Fill="#10ffffff" Height="{Binding ElementName=SliderCanvas, Path=ActualHeight}"  />
                    </Canvas>
                    <TextBox  x:Name="PART_TextBox" 
                              Visibility="Collapsed" 
                              FontSize="{TemplateBinding FontSize}"                                   
                              VerticalAlignment="Center" />
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

初始化函数大致如下： 重要的部分是覆盖 OnApplyTemplate 并使用 GetTemplateChild()。

```
/**
 * Since we're using a CostumControl, we need to get the relevant UI children for the current instance
 * for changing their properties later and assigning eventhandlers.
 */
public override void OnApplyTemplate() {
    base.OnApplyTemplate();
    _textBox = GetTemplateChild("PART_TextBox") as TextBox;  // NOTE: FindName("PART_TextBox");  does NOT work here

    MouseLeftButtonDown+= MouseLeftButtonDownHandler;
    MouseLeftButtonUp+= MouseLeftButtonUpHandler;
    MouseMove+= MouseMoveHandler;
    MouseWheel+= MouseWheelHandler;
    LayoutUpdated+=LayoutUpdatedHandler;

    if (_textBox !=null) {
        _textBox.TextChanged += TextChangedHandler;
        _textBox.KeyUp += KeyUpHandler;
        _textBox.LostFocus += LostFocusHandler;
    }

    _sliderFillRectangle =    GetTemplateChild("PART_SliderFillRectangle") as Rectangle;
    _sliderDefaultRectangle = GetTemplateChild("PART_SliderDefaultRectangle") as Rectangle;
    _sliderMarkerRectangle =  GetTemplateChild("PART_SliderMarkerRectangle") as Rectangle;
    _textBlock = GetTemplateChild("PART_TextBlock") as TextBlock;
} 
```

内部成员变量稍后会像......

```
private void LostFocusHandler(object sender, RoutedEventArgs e) {
    if (!UpdateValueFromTextEdit())
        _textBox.Text = Value.ToString();

    _textBox.Visibility = Visibility.Collapsed;
    e.Handled= true;
} 
```

从 UserControl 到 CustomControl 的重构加快了 50% 的实例化速度；

# python - RawConfigParser.get().endswith('/') 为 False，当结果返回 '/images/' 时？应该是真的

> ID：10542280
> 
> 赞同：0
> 
> 时间：2012-05-10T21:16:48.873
> 
> 标签：python, django

我将 Django 与我自己的配置文件加载器一起使用，继承自 Python 的内置 ConfigParser 并使用 get() 方法。

它做这样的事情：

```
from ConfigParser import RawConfigParser
config = RawConfigParser()
config.read(os.path.dirname(__file__) + '/settings.ini') # read the settings file
MEDIA_URL = config.get('SETTINGS', 'media_url') # which is verified to contain '/images/'

# then I expect this to return True, but get false?

print MEDIA_URL.endswith('/')
print type(MEDIA_URL) # get's "str"

# however this returns True
MEDIA_URL = '/images/'
print MEDIA_URL.endswith('/')
print type(MEDIA_URL) # get's "str" 
```

现在，为什么两者都是字符串类型，但返回不同的值？

它搞砸了我的 django 设置，在 django.conf 中抛出错误。**初始化**第 70 行！

有什么线索吗？

# parallel-processing - MPI Internals：进程之间的通信实现

> ID：10542284
> 
> 赞同：6
> 
> 时间：2012-05-10T21:17:02.690
> 
> 标签：parallel-processing, mpi, openmpi

我试图弄清楚实际的进程通信是如何在 MPI 通信器内部发生的。我有 8 个节点，每个节点有 12 个核心（运行 96 个实例）。每个进程都分配了唯一的等级，并且进程能够相互通信。那么进程如何获得唯一的排名并设法发送实际消息呢？根据一些幻灯片，有开放运行时环境 (ORTE)，它“位于在该单元上启动进程的机器上。（例如，集群的前端）。负责在单元上启动进程。监控单元健康（节点、进程）。将单元状态报告给宇宙的其余部分。在单元之间路由通信。” 我还没有找到任何 MPI 实现的开发人员文档和/或架构论文。任何人都知道如何实现 MPI 进程之间的实际通信，即他们如何设法找到自己并获得分配的等级？是否有一个中央或多个中央 MPI 内部流程用于路由（例如，每个节点）？

谢谢，大卫

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-10T21:47:44.997

您正在谈论的机制严格依赖于实现。MPI 是一个中级标准，它位于硬件和操作系统提供的通信机制之上。

ORTE 是 Open MPI 的一部分——当今流行的通用 MPI 实现之一。还有 MPICH 和 MPICH2 及其变体（例如 Intel MPI）。大多数超级计算机供应商都提供他们自己的 MPI 实现（例如，IBM 为 Blue Gene/Q 提供了修改后的 MPICH2）。

Open MPI 的运作方式是它被划分为多个层，每一层的功能由大量动态加载的模块提供。有一种评分机制应该在特定条件下选择最佳模块。

所有 MPI 实现都提供了一种机制来执行所谓的 SPMD 启动。本质上，MPI 应用程序是一种特殊的 SPMD（单程序多数据）——运行单个可执行文件的多个副本，并采用消息传递作为通信和协调的机制。SPMD 启动器获取执行节点列表，远程启动进程并建立它们之间的关联和通信方案（在 Open MPI 中，这称为 MPI Universe）。它是创建全局 MPI 通信器 MPI_COMM_WORLD 并分配初始等级分配的一个，它可以提供诸如将进程绑定到 CPU 内核之类的选项（在 NUMA 系统上非常重要）。一旦进程启动，一些识别机制就可用（例如 等级和 IP 地址/TCP 端口之间的映射）可能会采用其他寻址方案。例如，Open MPI 使用`ssh`，`rsh`或者它可以使用不同资源管理系统（例如PBS/Torque、SLURM、Grid Engine、LSF...）提供的机制。一旦进程启动并且它们的 IP 地址和端口号被记录并在 Universe 中广播，这些进程就可以在其他（更快的）网络（例如 InfiniBand）上找到彼此，并在它们上建立通信路由。

路由消息通常不由 MPI 本身完成，而是留给底层通信网络。MPI 只负责构建消息，然后将它们传递到网络以传递到它们的目的地。对于驻留在同一节点上的进程之间的通信，通常使用共享内存。

如果您对技术细节感兴趣，我建议您阅读 Open MPI 的源代码。您可以在项目的[WEB 站点](http://www.open-mpi.org/)上找到它。

# c++ - C++ 代码风格，清晰与简单

> ID：10542286
> 
> 赞同：-2
> 
> 时间：2012-05-10T21:17:29.007
> 
> 标签：c++, struct, namespaces

昨天我试图让我的全局变量看起来更好，我想出了这个。

// 事件.hpp

```
namespace GEngine{
    namespace Event{
        struct _Mouse{
            int mouse_x;
            int mouse_y;
        };
        extern GEngine::Event::_Mouse Mouse; // Inside
    }
} 
```

// Main.cpp

// 放

```
GEngine::Event::Mouse.mouse_x = 100;
GEngine::Event::Mouse.mouse_y = 50; 
```

// 得到

```
int foo = GEngine::Event::Mouse.mouse_x; 
```

---- 对 -----

```
namespace GEngine{
    namespace Event{
        struct _Mouse{
            int mouse_x;
            int mouse_y;
        };
    }
}

extern GEngine::Event::_Mouse Mouse; // Outside 
```

......

// Main.cpp

// 得到

```
Mouse.mouse_x = 100;
Mouse.mouse_y = 50; 
```

// 放

```
int foo = Mouse.mouse_x; 
```

你会选择哪种编码风格？简单明了还是相反？

并且更准确一点。你会选择命名你的全局变量 GEngine::Event::Mouse.mouse_x 还是 Mouse.mouse_x ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:35:10.703

**简短的回答。**

这两种解决方案都没有显示出良好的 C++ 代码风格。虽然要回答这个问题，但您正在访问的成员应该完全符合存储它们的命名空间层次结构。

**长答案。**

*   全局变量应该是常量。
*   如果具有访问器方法的私有成员可以工作，那么应该使用它。
*   在大多数情况下，全局变量是一个坏主意。
*   公开全局常量的公认方法未在您的任何一个解决方案中表示。

几个很好的风格指南

*   [http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml)
*   [http://geosoft.no/development/cppstyle.html](http://geosoft.no/development/cppstyle.html)

# css - 导航菜单 - 下拉菜单 z-index？

> ID：10542297
> 
> 赞同：1
> 
> 时间：2012-05-10T21:18:38.037
> 
> 标签：css, drop-down-menu, nav

一直在开发网站构建软件，并且有一个让我发疯的错误：

当你去

[http://dalarandaily.com/home-and-auto](http://dalarandaily.com/home-and-auto)

并且您将鼠标悬停在导航上，下拉菜单会出现在内容的后面。

我想不通。我已经尝试了我所知道的所有内容以及我在研究中发现的其他内容，但似乎没有任何工作正常。

我只需要确保导航菜单显示在内容的顶部，而不是像它所做的那样显示在它的下方。

如果有人可以查看css并提出建议，将不胜感激。可以在这里看到 css [http://dalarandaily.com/main.css](http://dalarandaily.com/main.css)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T21:20:42.327

在 的规则中`ul.nav`，将其相对定位并将 z-index 从 -1000 更改为正 1000。这适用于检查器工具`ul.nav`：

```
z-index: 1000;
position: relative; 
```

# asp.net - Request.Content.ReadAsMultipartAsync（提供者）

> ID：10542301
> 
> 赞同：2
> 
> 时间：2012-05-10T21:19:00.617
> 
> 标签：asp.net, file, http, asp.net-web-api

我正在使用 ASP.NET Web API。我有以下代码保存传入的文件，然后获取文件名。

```
MultipartFormDataStreamProvider provider = new MultipartFormDataStreamProvider(HttpContext.Current.Server.MapPath("~/Files"));
Task<IEnumerable<HttpContent>> task = Request.Content.ReadAsMultipartAsync(provider);

return task.ContinueWith<string>(contents =>
{ 
    string filename = provider.BodyPartFileNames.First().Value; 
```

当我在托管时运行它时，我得到了正确的文件名，但似乎没有保存文件。

*File.Exists(filename)*返回 false。

不过，这在本地工作得很好。任何想法将不胜感激（一整天都在这……）

如果您想了解更多信息，请告诉我。

谢谢。

# javascript - javascript 如果 cookie 存在执行

> ID：10542304
> 
> 赞同：0
> 
> 时间：2012-05-10T21:19:13.143
> 
> 标签：javascript, html, cookies

如果cookie存在执行，我怎么能做一个javascript，例如，如果我设置一个cookie“facebookpopchek”，其值为“NOpop”

我需要一个 javascript 来查找 cookie，例如：如果存在值“NOpop”的 cookie“facebookpopchek”，如果不执行弹出脚本，则什么也不做。

弹出脚本：

```
<script type='text/javascript'>
//<![CDATA[Fans='*****'//]]></script>
<style>#fblikepop{background-color:#fff;display..............</style>
<script src='http://www.*****.com/facebookpop/jquery.js' type='text/javascript'></script>
<script src='http://connect.facebook.net/en_US/all.js#xfbml=1' type='text/javascript'></script>
<script src='http://www.*****.com/facebookpop/mbtlikebox2.js' type='text/javascript'></script>
<script language='javascript'>
//<![CDATA[
    $(document).ready(function(){                       
        $().Fans({
            timeout: 30,
            wait: 0,
            url: 'http://www.facebook.com/*****',
            closeable: true     });
    });
//]]></script><div id='fbtpdiv'></div> 
```

如果有人知道如何做到这一点或有一个例子请告诉我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:37:13.647

你不会只看饼干吗？

```
function n__readCookie(n__name)
{
    var n__nameEQ = n__name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++)
    {
        var c = ca[i];

        while (c.charAt(0)==' ') 
        {  c = c.substring(1,c.length);  }

        if (c.indexOf(n__nameEQ) == 0) 
        {  return c.substring(n__nameEQ.length,c.length);  }
    }
    return false;
} 
```

然后：

```
if(n__readCookie('facebookpopchek') != 'NOpop')
{
    //do popup
} 
```

# php - 如何获取 PHP 字符串的最后 7 个字符？

> ID：10542310
> 
> 赞同：354
> 
> 时间：2012-05-10T21:19:45.530
> 
> 标签：php, string

我将如何获取下面字符串的最后 7 个字符？

例如：

```
$dynamicstring = "2490slkj409slk5409els";
$newstring = some_function($dynamicstring);
echo "The new string is: " . $newstring; 
```

这将显示：

```
The new string is: 5409els 
```

* * *

## 回答 #1

> 赞同：730
> 
> 时间：2012-05-10T21:21:21.737

使用[`substr()`](http://us.php.net/manual/en/function.substr.php)负数作为第二个参数。

```
$newstring = substr($dynamicstring, -7); 
```

从[php 文档](http://us.php.net/manual/en/function.substr.php)：

> `string substr ( string $string , int $start [, int $length ] )`
> 
> **如果 start 为负数，则返回的字符串将从字符串末尾的第 start 个字符开始。**

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2012-05-10T21:20:56.460

嗯..这样吗？

```
$newstring = substr($dynamicstring, -7); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-10-22T23:14:01.780

使用多字节字符代码的更安全的结果，总是使用 mb_substr 而不是 substr。UTF-8 示例：

```
$str = 'Ne zaman seni düşünsem';
echo substr( $str, -7 ) . ' <strong>is not equal to</strong> ' .
  mb_substr( $str, -7, null, 'UTF-8') ; 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-05-13T18:45:19.323

最好在获取字符串之前进行检查。

```
$newstring = substr($dynamicstring, -7); 
```

如果字符大于 7，则返回最后 7 个字符，否则返回提供的字符串。

或者如果长度小于 7 时需要返回消息或错误，请执行此操作

```
$newstring = (strlen($dynamicstring)>=7)?substr($dynamicstring, -7):"message"; 
```

[子文档](http://us.php.net/manual/en/function.substr.php)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-04-18T19:45:40.090

为简单起见，如果您不想发送消息，请尝试此

```
$new_string = substr( $dynamicstring, -min( strlen( $dynamicstring ), 7 ) ); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-08-09T13:23:43.790

最后 7 个字符

```
$newstring = substr($dynamicstring, -7); 
```

$newstring : 5409els

前 7 个字符

```
$newstring = substr($dynamicstring, 0, 7); 
```

$新字符串：2490slk

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-14T17:26:12.727

这里有多个正确答案。但是，如果您想要一个“安全”版本的 , 需要什么并不明显`substr`，

同`substr`，当字符串“足够长”时，但如果字符串太短，则返回原始字符串（而不是返回`false`）。

```
/** Unlike substr, handles case where $string is too short.
 * @param $string
 * @param $nChars - negative to return at end of string.
 */
function safe_substr($string, $nChars) {
    if ($nChars == 0 || !isset($string))
        return "";

    if (strlen($string) <= abs($nChars))
        // $string is too short (or exactly the desired length). Return the string.
        return $string;

    return substr($string, $nChars);
} 
```

注意：对于 UTF-8 字符，请定义`safe_mb_substr`，将`substr`上面替换为`mb_substr`. 并替换`strlen`为`mb_strlen`.

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-04-13T11:07:31.087

字符串的最后 7 个字符：

```
$rest = substr( "abcdefghijklmnop", -7); // returns "jklmnop" 
```

# powershell - Powershell 和 schtask 与具有空间的任务

> ID：10542313
> 
> 赞同：14
> 
> 时间：2012-05-10T21:20:09.100
> 
> 标签：powershell, windows-task-scheduler

我正在使用`schtask`带有 PowerShell 的命令。出现的问题是，当程序/脚本参数包含`C:\Program Files\`时，它认为路径是公正`C:\Program`的，路径的其余部分是一个参数。我试图通过使用`"`前场​​和后场来逃避它，但这并没有什么不同。我怎样才能做到这一点？我无法对路径进行硬编码，因为它可以在用户安装时更改。

我在 Windows 7 x64 中创建了这个。它创建任务 OK 并且脚本返回。但是，当我在任务计划程序中查看它时，任务的属性，然后是操作，然后是 hit `edit`，它将程序显示为 C:\Program ，然后将其余的作为参数。

![在此处输入图像描述](../Images/6746103ea840bd11d37f287f579ccd2d.png)

脚本：

```
$folder = Split-Path $MyInvocation.MyCommand.Path -Parent
$app = "\Demon.DatabasePurge.exe"
$exe = $app.Insert(0, $folder)
schtasks /create /tn "Demon Purge Job" /sc daily /st 00:00:00 /tr $exe 
```

这是我尝试过的：

```
$folder = Split-Path $MyInvocation.MyCommand.Path -Parent
$app = "\Demon.DatabasePurge.exe`""
$exe = $app.Insert(0, $folder)
$exe2 = $exe.Insert(0, "`"")
schtasks /create /tn "Demon Purge Job" /sc daily /st 00:00:00 /tr $exe2 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-13T04:49:41.327

我也遇到了这个问题..其他有这个问题的人的答案是包含单引号

```
/TR "'C:\Program Files (x86)\etc\test.exe'" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-16T08:46:06.910

我在 Windows Server 2008 R2 上遇到了同样的问题。虽然[Microsoft 支持](http://support.microsoft.com/kb/823093)表明您应该能够用 \" 将命令括起来，但我从来没有这样做过，但是单引号可以工作。此外，带空格的参数也可以用单引号括起来：

```
schtasks /create /f /tn "Test" /tr "'c:\program files\test.bat' arg1 'arg 2 with spaces' arg3" /sc Daily /st 00:00 
```

或者在构建要执行的字符串时（并使用您的 $folder 变量）：

```
$createTask = "schtasks /create /f /tn `"Demon Purge Job`" /tr `"'$folder\Demon.DatabasePurge.exe' arg1 'arg 2 with spaces' arg3`"" /sc daily /st 00:00
Invoke-Expression $createTask 
```

第一个示例生成以下任务操作屏幕： ![在此处输入图像描述](../Images/ae3e22fcd6b8905a47f9ba21f8d61492.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-22T01:57:56.290

要解决此问题，请将任务的路径部分（不包括参数或开关）括在反斜杠`\`和引号`"`字符组合之间，例如`\"`. 当您创建包含空格的路径或命令时，像往常一样将任务的完整路径（包括参数或开关）括在引号之间。

代码：

```
schtasks /create /f /tn "Test" /tr "'c:\program files\test.bat' arg1 'arg 2 with spaces' arg3" /sc Daily /st 00:00 
```

代替：

```
schtasks /create /f /tn "Test" /tr "\"c:\program files\test.bat\" arg1 'arg 2 with spaces' arg3" /sc Daily /st 00:00 
```

# javascript - 未捕获的 SyntaxError：意外的标识符

> ID：10542314
> 
> 赞同：0
> 
> 时间：2012-05-10T21:20:19.197
> 
> 标签：javascript, syntax, error-handling

当我在 chrome 上运行 javascript 控制台时，它出现了未捕获的语法错误：意外标识符，我希望有人能帮助我弄清楚为什么这个错误不断出现，不胜感激

这是代码行：

```
while( ship1[Y][X]=="#" || ship1[Y+1][X]=="#" || ship2[Y][X]=="#" || ship2[Y+1][X] =="X" ship3[Y][X]=="#" || ship3[Y+1][X] =="X"); 
```

未捕获的 SyntaxError：意外的标识符

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T21:22:13.750

你在and`||`之间缺少一个运算符`ship2[Y+1][X] =="X"``ship3[Y][X]=="#"`

# jsf-2 - 当另一个字段更改时更新一个字段

> ID：10542315
> 
> 赞同：0
> 
> 时间：2012-05-10T21:20:28.027
> 
> 标签：jsf-2, primefaces

我确信有不止一种方法可以做到这一点，但是当另一个 JSF/PrimeFaces 组件发生更改时，有什么好的方法可以更新？

我有一个滑块，可以正确更新输入字段的值（包括支持 bean 中的值）。但是该值是一个数字，我想将其显示为文本值，例如，如果它是 1，我想显示“简单”，如果它是 4，则显示“困难”。

我通过隐藏存储数值的输入字段来部分工作。然后我添加了另一个“可见”的 outputLabel，它链接到我的支持 bean 中的一个 getter，它将数字转换为文本值。

但是我不确定如何说“当隐藏字段的值发生变化时，刷新 outputLabel 中显示的值”。

当然这与 valueChangeListeners 或“更新”属性有关，但很难将它们放在一起。

任何人都可以模糊地指出我正确的方向吗？尽管我已经尝试过，但我什至不太确定谷歌是什么。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-08T14:35:08.703

我认为使用基于 PrimeFaces 的解决方案比使用基于 JavaScript 的解决方案要容易得多。所以，就我而言，我使用了它，它对我有用。

滑块豆：

```
package ma.klagrida;

import javax.faces.bean.ManagedBean;

import org.primefaces.event.SlideEndEvent;

@ManagedBean
public class SliderBean {

    private int number;

    private String category = "Start";

    public int getNumber() {
        return number;
    }

    public void setNumber(int number) {
        this.number = number;
    }

    public String getCategory() {
        return category;
    }

    public void setCategory(String category) {
        this.category = category;
    }

    public void onSlideEnd(SlideEndEvent event) {
        int value = event.getValue();
        if(value > 0 && value <= 50) {
            category = "Easy";
         } else if(value > 50 && value <= 100) {
            category = "Difficult";
         } else {
                category = "Start";
         } 
    }

} 
```

索引.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">
<h:head><title>PrimeFaces Slider</title>
</h:head>
<h:body>

<h:form> 
    <h:inputText id="number" value="#{sliderBean.number}" />
    <p:slider for="number">
        <p:ajax event="slideEnd" listener="#{sliderBean.onSlideEnd}" update="category" />
    </p:slider>
    <h:inputText id="category" value="#{sliderBean.category}" />
</h:form>

</h:body></html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T21:27:16.603

使用 Javascript`onchange`事件并使用所需的标签更新标签。

或者..您可以使用 primefaces`onSlideEnd`事件。

valueChangeListeners 将一直到 backing bean，然后返回到客户端

基于此

> 我有一个滑块，可以正确更新输入字段的值（包括支持 bean 中的值）。但是该值是一个数字，我想将其显示为文本值，例如，如果它是 1，我想显示“简单”，如果它是 4，则显示“困难”。

您只需要一个 JavaScript onchange 事件并更新标签。

这是一个例子（我没有测试或检查语法，但它应该给你一个想法）用户第一次进入你可以从服务器或客户端初始化标签，就像你设置默认值一样滑块。

```
 <script>
      var labelElement = document.getElementById('output');
      var sliderElement = document.getElementById('txt2');

      function updateSliderLabel(){
         if(sliderElement.value > 75){
              labelElement.value = "Large";
         } else if(sliderElement.value > 50){
              labelElement.value = "Avg";
         } else {
              labelElement.value = "Small";
         }

      }
  </script>

  <h:form id="form">
    <h:panelGrid columns="1" style="margin-bottom:10px">  
        <h:panelGroup>  
            <h:outputText value="Set ratio to "/>  
            <h:outputText id="output" value="#{sliderBean.number2}"/>  
        </h:panelGroup>   

        <h:inputHidden id="txt2" value="#{sliderBean.number2}" />  
        <p:slider onSlideEnd="updateSliderLabel()" for="txt2" display="output" style="width:200px" />  
    </h:panelGrid>
  </h:form> 
```

# mysql - mysql服务器日期差异

> ID：10542320
> 
> 赞同：0
> 
> 时间：2012-05-10T21:20:51.767
> 
> 标签：mysql, date

嗨，我的脚本和服务器有问题：

我需要从最后 3 分钟开始查询。

这是我当前的查询：

```
SELECT *, now() as date FROM data WHERE created > date_sub( NOW(), INTERVAL 3 MINUTE) LIMIT 0,100 
```

我懂了：

```
+----------------------------+---------------------+
| ID |       created         |         date        |
+----+-------+---------------+---------------------+
| 1  |  2012-05-10 14:14:33  | 2012-05-10 16:14:38 |
+----+-----------------------+---------------------+ 
```

请注意日期行还有 2 个小时。

我怎么能告诉mysql这些区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:36:11.680

我非常怀疑这是一个 MySQL 问题，因为它不会在您的日期字段中存储时区。

似乎这个问题出在处理管道的其他地方。

# r - 在 x 轴上的日期之间提供阴影

> ID：10542326
> 
> 赞同：7
> 
> 时间：2012-05-10T21:21:11.237
> 
> 标签：r, ggplot2

我在 R 中有一个绘图，X 轴上有日期/时间（POSIXct），Y 轴上有一些数据。
我想在 x 轴上每个日期的下午 3 点到 6 点之间在 x 轴上提供阴影

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-13T23:06:01.303

或多或少遵循了[Brian Diggs 上面的建议](https://stackoverflow.com/questions/10542326/how-can-i-provide-shades-between-dates-on-x-axis-in-r-plot/10542696#10542696)，

```
#sample data
set.seed(666)
dat <- data.frame(x = seq(as.POSIXct('2011-03-27 00:00:00'), 
len= (n=24), by="1 hour"), y = cumsum(rnorm(n)))
#Breaks for background rectangles
rects <- data.frame(xstart = as.POSIXct('2011-03-27 15:00:00'), 
xend = as.POSIXct('2011-03-27 18:00:00'))

library(ggplot2)
ggplot() + 
  geom_rect(data = rects, aes(xmin = xstart, xmax = xend, 
            ymin = -Inf, ymax = Inf), alpha = 0.4) + 
  geom_line(data = dat, aes(x,y)) 
```

会给你这个， ![米](../Images/11c8945973562f8a2d96a2b6c0537796.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-10T21:53:51.297

制作一个 data.frame，其中包含每天下午 3 点和 6 点的列，涵盖数据。将其用于`geom_rect`图层（使用`Inf`和`-Inf`用于y）。将该层放在您的数据层之前（因此它在它们下方）并给填充一个 alpha 以便可以通过它看到网格。

更详细，可重复的问题可能会提供更详细的答案。

# jquery - 无法在 jQuery UI 模态对话框中选择或取消选择复选框

> ID：10542327
> 
> 赞同：3
> 
> 时间：2012-05-10T21:21:11.973
> 
> 标签：jquery, jquery-ui

我正在使用 jQuery UI 的对话框来显示一些选项，每个选项都表示为复选框。现在，当我打开对话框并单击复选框时，什么也没有发生，复选框没有被选中。我使用的是 jQuery UI 的最新版本。

谁能告诉我怎么了？

这是代码

```
$('div#attachedDocuments').dialog({
        autoOpen: false,
        height: 300,
        width: 350,
        modal: true,
        title: "Select files",
        buttons: {
            "Ok": function () {
                    $(this).dialog("close");
            },
            Cancel: function () {
                $(this).dialog("close");
            }
        }
    }); 
```

这是对话框

```
<div id="attachedDocuments">
    <asp:Repeater ID="rptAttachments" runat="server"
                  OnItemDataBound="AttachedDocumentsDataBound">
        <ItemTemplate>
            <asp:CheckBox ID="checkBoxDocument" runat="server" />
        </ItemTemplate>
    </asp:Repeater>    
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T21:28:46.853

我有一个类似的问题。这是我的想法：`z-index`当你调用`.dialog()`. 如果您在那之后向页面添加更多元素，您的对话框（或其内容）可能会位于其他内容（甚至是不可见的内容）之下。但是后来我看到了[这个错误报告](http://bugs.jqueryui.com/ticket/6267)，所以我不确定原因了......

`z-index`解决方案：在你的 CSS 文件中给你的对话框一个非常高的值，比如`99999`.

# ajax - onclick 执行不起作用

> ID：10542333
> 
> 赞同：-1
> 
> 时间：2012-05-10T21:21:38.137
> 
> 标签：ajax, onclick

这段代码无法正常工作，你看到任何缺陷吗？

```
 $('#button').click(function(){
   $.ajax({
      type: 'POST',
      url: 'action.php'
      }
   });
}); 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:24:01.133

你有一个无与伦比的}

```
$('#button').click(function(){
   $.ajax({
      type: 'POST',
      url: 'action.php'
      // } <--- Not necessary
   });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T21:33:42.733

这更容易：

```
$('#button').click(function(){
    $.post("test.php");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T21:24:06.067

将其更改为：

```
$('#button').click(function(){
   $.ajax({
      type: 'POST',
      url: 'action.php'
   });
}); 
```

请注意，您有一个额外的`}`

# scala - Play 2.0.1 - Scala 模板字符串连接 + 可重用代码块

> ID：10542340
> 
> 赞同：3
> 
> 时间：2012-05-10T21:22:35.483
> 
> 标签：scala, playframework, playframework-2.0

虽然只是一个小问题，但基于文档，我应该能够创建一个可重用的块。可能是我缺乏 Scala 经验让我在这里榨汁......

我有一个传递给`.scala.html`文件的字符串列表。字符串是不带“.js”的 javascript 文件引用。

```
@jsFileWithExtension(file: String) = @{
  val newFile = file + ".js
}
@for(jsFile <- headJs) {
   <script src="/assets/javascripts/@jsFileWithExtension("@jsFile")"></script>
} 
```

它当前正在加载没有扩展名的 jsFile。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T04:28:24.933

试试这个：

```
@jsFileWithExtension(file: String) = @{ file + ".js" }

@for(jsFile <- headJs) {
   <script src="/assets/javascripts/@jsFileWithExtension(jsFile)"></script>
} 
```

您`jsFileWithExtension`需要返回一个值。现在它返回`Unit`。然后正如丹尼尔指出的那样，函数的参数不需要引号或魔法`@`字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T17:06:52.377

为什么不简单地附加一个 .js ？

```
@for(jsFile <- headJs) {
   <script src="/assets/javascripts/@(jsFile).js"></script>
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T23:00:40.397

这不是工作吗：

```
@jsFileWithExtension(jsFile) 
```

如中，没有引号和`@`for`jsFileWithExtension`参数，鉴于这已经是 Scala 代码？

# python - CGI Python 操作系统

> ID：10542342
> 
> 赞同：0
> 
> 时间：2012-05-10T21:22:41.003
> 
> 标签：python, apache, cgi

我只是想知道是否可以从 Apache 上的 CGI 脚本运行系统调用。以下是部分代码：

```
print "<input type = 'submit' value = 'Launch Job!'>"
print "</form>"
print "</body>"
print "</html>"
system('command') 
```

我正在尝试在托管网页的同一台计算机上运行此命令。问题是当这个函数执行时，命令没有成功运行。我已经尝试添加`sudo`到开头，尝试`os.system('command')`了所有无济于事。

那么，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:27:15.193

命令将以用户身份运行`nobody`，并且权限很少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-30T03:23:17.803

尝试**子进程**：

```
#!/usr/bin/python
import subprocess
a = subprocess.check_output(["date"]) # this is your command
#print os_date
print "Content-type:text/html\r\n\r\n"
print '<html>'
print '<head>'
print '<title>Hello Word!</title>'
print '</head>'
print '<body>'
print '<h2>Hello Word! Today is: %s</h2>' % a
print '</body>'
print '</html>' 
```

如果服务器给出 500 错误，请尝试**cgi**：

```
#!/usr/bin/python

try:
    import cgitb; cgitb.enable()
except:
    pass
import sys, cgi, os
sys.stderr = sys.stdout
from time import strftime
import traceback
from StringIO import StringIO
from traceback import print_exc

if __name__ == '__main__':
    print "Content-type: text/html"         
    print                                   
    form = cgi.FieldStorage()
    thecmd = "python yourscript.py" # this is your command
    if thecmd:
        print '<HR><BR><BR>'
        print '<B>Command : ', thecmd, '<BR><BR>'
        print 'Result : <BR><BR>'
        try:
            child_stdin, child_stdout = os.popen2(thecmd)
            child_stdin.close()
            result = child_stdout.read()
            child_stdout.close()
            print result.replace('\n', '<BR>')

        except Exception, e:                
            print errormess
            f = StringIO()
            print_exc(file=f)
            a = f.getvalue().splitlines()
            for line in a:
                print line 
```

# javascript - 如何防止 JavaScript 在构建过程中中断？

> ID：10542343
> 
> 赞同：0
> 
> 时间：2012-05-10T21:22:50.750
> 
> 标签：javascript, build-automation

我正在开发一个 PHP 类，该类采用我的 JS 资产并将缩小和连接的版本构建到一个脚本文件中，其中所有资产都准备好用于生产。我唯一担心的是它可能会破坏某些东西。例如，如果构建在需要后连接文件（例如，jQuery 插件后的 jQuery 核心）。我打算让它成为我能做到的最自动化的（我正在考虑阅读脚本目录），但这可能会导致一些问题。

我还看到了[Buildr](https://github.com/balupton/buildr.npm)，这似乎也是一个很好的解决方案。它做同样的事情，构建它在目录中的所有内容，但也许它有同样的问题？

有什么解决办法吗？为此以某种方式包装JS代码之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:29:12.780

你为什么担心串联顺序？如果事实上（例如 jQuery）在文件中被正确定义，那么它们以什么顺序连接并不重要（假设它们构成一个文件）。这是因为 Javascript 允许您在当前文件中运行解释器尚未评估的代码。而是在调用全局对象时在全局对象中查找任何未解析的符号（这可能发生在解析代码之后）

考虑以下：

```
做一点事（）;

函数做某事（）{
 console.log('是的');
}

```

dosomething 在调用它之前没有被评估，但是解释器仍然可以看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:31:04.337

你需要的是依赖管理。您的一种可能性是使用[Google Closure Compiler](https://developers.google.com/closure/compiler/)。当您压缩脚本时，它会提供依赖性检测（[请参阅this](http://code.google.com/p/closure-compiler/wiki/ManageClosureDependencies)）。但是，要使其正常工作，您需要使用他们的库，如果您正在使用具有良好尺寸且尚未使用它的项目，这可能会很烦人。

# windows - 调用更改 C++ 中的 UI (WindowsForms) 元素以在 BackgroundWorker 中使用它，我在这里有 C# 中的代码，我想要 C++ 中的等价物

> ID：10542344
> 
> 赞同：0
> 
> 时间：2012-05-10T21:23:00.670
> 
> 标签：windows, winforms, c++-cli, backgroundworker

好吧，我有这段代码来更改 C# 中的 UI 元素，我在 StackOverflow 中找到了它，但我在 C++ 中找不到一个等效项，因为我想在 BackgroundWorker 中更改它

```
label4.Invoke(new Action(() =>
{
  label4.Text = "Hello";
}
)); 
```

这是 ac# 工作示例。

我尝试使用这个示例制作一个示例以将项目添加到 CheckList Box 中，这就是我所拥有的，但它在 C++ 中不起作用，我显然使用了错误的方法来更改它。

```
clb_contas->Invoke(new Action(() => {
                clb_contas->Items->Add(System::String("testeCheckBox"),item), CheckState::Checked); 
            }
            )); 
```

我必须在此处更改此代码以使其在 C++ 中工作？

提前致谢。

# asp.net - 使用 FormsAuthentication 从文件夹拒绝经过身份验证的用户

> ID：10542346
> 
> 赞同：1
> 
> 时间：2012-05-10T21:23:10.440
> 
> 标签：asp.net, formsauthentication

我正在使用 FormsAuthentication 来防止匿名用户访问我网站上的任何内容，除了 /pages/security 中的页面 - 此文件夹包含登录页面、忘记的密码等。

```
<authorization>
    <deny users="?" />
</authorization>
</system.web>
<location path="pages/security">
    <system.web>
        <authorization>
            <allow users ="?" />
        </authorization>
    </system.web>
</location> 
```

这工作正常，但我也想拒绝 AUTHENTICATED 访问 /pages/security 页面，以便经过身份验证的用户无法访问登录页面或其他相关页面。

以上不起作用，所以一旦登录我仍然可以访问登录页面 - 我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:30:01.540

您可以使用这种方法。

当用户通过身份验证并且您想阻止他访问登录页面等时。然后您可以使用这些页面`Page_Load`事件来检查用户的真实性，如果他们是真实的，则将他们重定向到其他页面。例如

```
if(IsUserAuthentic())
{
     Response.Redirect("Home.aspx"); 
} 
```

`IsUserAuthentic()`是您的自定义方法，它将检查用户的真实性。

# ruby - Ruby 中方法名称的限制是什么？

> ID：10542354
> 
> 赞同：49
> 
> 时间：2012-05-10T21:23:49.053
> 
> 标签：ruby

例如，我`bundler?`在下面的代码片段中找到了方法名称，不知道该`?`字符是专门的关键字还是只是方法名称的一部分。

```
# This is a predicate useful for the doc:guides task of applications.
def bundler?
  # Note that rake sets the cwd to the one that contains the Rakefile
  # being executed.
  File.exists?('Gemfile')
end 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-05-10T21:44:33.813

Ruby 中的方法名称可以包含大小写字母、数字、下划线`_`和标点符号`!`, `?`, `=`。

方法名不能以数字和字符开头，只能`!`出现在末尾。`?``=`

方法名称中可以使用非 ASCII 字符，但这可能会导致非常混乱的情况，不应该成为常见的做法。

以小写字符开头的方法名称虽然不是强制性的，但这是一种很好的做法，因为以大写字母开头的名称在 Ruby 中是常量。仍然可以为方法使用常量名称，但是如果没有括号，您将无法调用它，因为解释器将查找名称作为常量：

```
def Capital
    nil
end

Capital    # NameError: uninitialized constant Capital
Capital()  # => nil 
```

在定义方法名称时，一些非常广泛且一致使用*的约定是：*

1.  方法名称是全小写的，下划线`_`作为名称中单词的分隔符（例如`Math::sqrt`，，`Array#each_index`...）。

2.  *谓词*有一个问号`?`作为最后一个字符（例如`Array#empty?`, `Hash#has_key?`, ...）。虽然谓词通常返回布尔值，但情况并非总是如此：这些方法只需要返回`nil`，或者`false`如果谓词评估为假，则返回任何其他值（例如，如果文件不存在则`File::size?`返回，文件大小作为否则返回）。`nil``Integer`

3.  修改调用它们的对象的状态或具有异常行为的方法`!`在最后一个字符中带有感叹号；这种方法有时被称为*mutators*，因为它们通常是其他方法的破坏性或就地版本（例如`Array#sort!`, `Array#slice!`, ...）。

4.  *设置器*的最后一个字符是等号`=`（例如`Array#[]=`，...）；Ruby interpeter为调用 setter 方法提供了*语法糖：*

    ```
    a = [4, 5, 6]
    a[0] = 3    # Shorthand for a.[]=(0, 3) 
    ```

Ruby 还允许使用运算符符号作为方法名称来定义运算符：

```
╔═══════════════════════════╦═════════════════════════════════════════════╦═══════╗
║ Operators (by precedence) ║                 Operations                  ║ Arity ║
╠═══════════════════════════╬═════════════════════════════════════════════╬═══════╣
║ ! ~ +                     ║ Boolean NOT, bitwise complement, unary plus ║     1 ║
║                           ║ (define with method name +@, Ruby 1.9+)     ║       ║
║                           ║                                             ║       ║
║ **                        ║ Exponentiation                              ║     2 ║
║                           ║                                             ║       ║
║ -                         ║ Unary minus (define with method name -@)    ║     1 ║
║                           ║                                             ║       ║
║ * / %                     ║ Multiplication, division, modulo            ║     2 ║
║                           ║                                             ║       ║
║ + -                       ║ Addition, subtraction                       ║     2 ║
║                           ║                                             ║       ║
║ << >>                     ║ Bitwise shift                               ║     2 ║
║                           ║                                             ║       ║
║ &                         ║ Bitwise AND                                 ║     2 ║
║                           ║                                             ║       ║
║ | ^                       ║ Bitwise OR, Bitwise XOR                     ║     2 ║
║                           ║                                             ║       ║
║ < <= => >                 ║ Ordering                                    ║     2 ║
║                           ║                                             ║       ║
║ == === != =~ !~ <=>       ║ Equality, pattern matching, comparison      ║     2 ║
╚═══════════════════════════╩═════════════════════════════════════════════╩═══════╝ 
```

一元运算符方法不传递参数；二元运算符方法被传递一个参数，并对它和 on 进行操作`self`。

重要的是要严格遵守运营商的严谨性；虽然可以定义具有不同数量的运算符方法（例如，一个带有`+`两个参数的方法），但 Ruby 不允许您使用运算符语法调用该方法（但它可以使用点语法）。

最好的做法是尽可能地遵守运算符的原始语义：对于知道运算符的原始含义的人来说，它应该是直观的，它如何与用户定义的类一起工作。

该语言还为通常用于访问数组和哈希值的特殊*非运算符*方法提供语法糖。`[]`该`[]`方法可以任意定义。

对于表中的每个二元运算符，除了排序、相等、比较和模式匹配，Ruby 还提供缩写赋值的简写（例如`x += y`扩展为`x = x + y`）；您不能将它们定义为方法，但您可以更改它们的行为，定义它们所基于的运算符。

这些字符都不能在普通方法名称中使用（例如`do&print`，或者`start-up`不是有效的方法名称）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-09T20:42:27.363

其他人所说的内置语法是正确的，但是如果您使用`define_method`+之类的方法，似乎对可以使用的内容没有后端限制`send`：

```
define_method(:'$% ^&') { 0 }
define_method(:'你好') { 1 }

send(:'$% ^&') == 0 or raise
send(:'你好') == 1 or raise 
```

这个事实可能很有用：例如 Rails 的[ActiveSupport::Testing::Declarative.test](http://api.rubyonrails.org/classes/ActiveSupport/Testing/Declarative.html#method-i-test)方法使用它以避免对以下内容进行复杂的转换：

```
test 'Some Controller#Method' do 
```

到一个更健全的名称，这可能与另一个名为的测试冲突：

```
test 'Some Controller_Method' do 
```

[测试指南](http://guides.rubyonrails.org/testing.html#unit-testing-your-models)中提到了这一点。

好奇心：类似的事情发生在 Java 中，字节码方法名称比 Java 语言提供了更多选择：[为什么 JVM 允许我们以字节码中的数字开头命名函数？](https://stackoverflow.com/questions/26791204/why-does-the-jvm-allow-us-to-name-a-function-starting-with-a-digit-in-bytecode)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T21:43:30.867

方法名称可以以`!`,`?`或`=`. 也允许使用下划线。除此之外，您还可以为自己的类定义一些看起来像运算符的方法（例如`+`, `*`, `>>`, ）。`[]`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-12T16:46:36.020

添加一件事：您还可以告诉对象运行一个*根本没有名称*的方法，它会尝试调用一个名为的方法`call`：

```
#!/usr/bin/env ruby

class Foo

=begin
  def call(*args)
    puts "received call with #{args.join(' ')}"
  end
=end

  def method_missing(m, *args, &block)
    puts "received method_missing on `#{m}(#{args.join(', ')})`"
  end

end

f = Foo.new
f.('hi')             # Not a syntax error! method_missing with m of :call
f.send :'', 'hmm'    # method_missing with m set to :''
f.send nil, 'bye'    # raises an error 
```

实际上并没有`call`在 上定义任何名为的方法`Object`，但在`Method`和`Proc`类上有一个。

在某些语言`()`中是用于函数调用的运算符，这似乎与这里发生的情况非常相似。

这在 Rails 的 JBuilder 中使用：

[https://github.com/rails/jbuilder](https://github.com/rails/jbuilder)

它记录在 O'Reilly Ruby 书的第 196 页：

> Ruby 1.9 提供了另一种调用`Proc`对象的方法。作为方括号的替代方法，您可以使用以句点为前缀的括号：
> 
> ```
> z = f.(x,y) 
> ```
> 
> `.()`看起来像缺少方法名称的方法调用。这不是一个可以定义的运算符，而是调用该`call`方法的语法糖。它可以与定义`call`方法的任何对象一起使用，并且不限于`Proc`对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T21:43:26.050

允许的字符是：`a-Z,`，`0-9`只要不在开头，`_`和`?`（对于布尔函数）和`!`（对于破坏性函数）和`=`（对于 setter）。

# java - 从 MapView 的 overlayList 中删除 Overlay 时出现 ConcurrentModificationException

> ID：10542355
> 
> 赞同：0
> 
> 时间：2012-05-10T21:23:49.337
> 
> 标签：java, android

我正在尝试搜索包含某些数据的自定义 ItemizedOverlay ...当我尝试遍历 MapView 的所有叠加层时，我不断在 for 循环中收到 ConcurrentModificationException。

我希望有人知道这个问题的答案...

这是代码：

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);
    Log.d("Activityresult", "voor ok");
    if(resultCode == RESULT_OK){
        GeoPoint point = new GeoPoint(touchedPoint.getLatitudeE6(), touchedPoint.getLongitudeE6());
        Car car = data.getExtras().getParcelable("car");
        PinpointItem pinpoint = new PinpointItem(point, car, DropHostCarActivity.this);
        CustomPinpointOverlay custom = new CustomPinpointOverlay(d, DropHostCarActivity.this);
        custom.insertPinpoint(pinpoint);
        List<Overlay> mapOverlays = mapView.getOverlays();
        if (mapOverlays.size() > 1) {
            removeSameCar(mapOverlays,car);
        }
        overlayList.add(custom);
        mapView.invalidate();
    }
}

private void removeSameCar(List<Overlay> mapOverlays, Car car) {
    for(Overlay overlay: mapOverlays){
        if(overlay instanceof CustomPinpointOverlay && 
                ((CustomPinpointOverlay) overlay).getItem(0).getCar().getNumberPlate().equals(car.getNumberPlate())){
            overlayList.remove(overlay);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:43:18.403

如果 List 实现支持，您只能在迭代时使用 Iterator 的方法 remove 修改列表。您需要明确使用迭代器：

```
private void removeSameCar(List<Overlay> mapOverlays, Car car) {
    Iterator<Overlay> it = mapOverlays.iterator();
    while (it.hasNext()) {
        Overlay overlay = it.next();
        if(overlay instanceof CustomPinpointOverlay && 
                ((CustomPinpointOverlay) overlay).getItem(0).getCar().getNumberPlate().equals(car.getNumberPlate())){
            it.remove();
        }
    }
} 
```

# c# - 设计 API (C#) 的正式原则和流程

> ID：10542359
> 
> 赞同：4
> 
> 时间：2012-05-10T21:24:07.083
> 
> 标签：c#, .net, architecture, api-design

虽然我有一些开发经验，但我还没有设计 API 或更大规模的项目。

我的一般过程通常涉及以下内容：

1.  提出一些建议的设计。
2.  列出他们的优点和缺点。
3.  给定一组场景（X 更改、添加的新功能等）——设计如何对其做出反应。

这是我自己的“风格”；我想知道在哪里可以阅读更多关于做这些事情的**正式流程和方法的信息？**（在线、书籍等）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T17:47:13.030

[框架设计指南](http://www.amazon.co.uk/Framework-Design-Guidelines-Conventions-Libraries/dp/0321246756)是一本很好的书。此外，[.NET Framework Standard Library Annotated Reference](http://www.amazon.co.uk/Framework-Standard-Library-Annotated-Reference/dp/0321154894)是另一本很棒的书。

以下是我遵循的一些原则：

*   **少即是多**：去掉功能可以让用户更快地提高工作效率，因为要学习的概念更少。少即是多导致...
*   **进入门槛低**：用户希望快速学习新框架/API 的基础知识。他们想通过实验而不是通过阅读文档来学习。大多数人只有在特别有趣或超出基本场景的情况下才会花时间完全理解一个功能
*   **类型名称应该是名词短语**：它们代表系统的实体。名称也应该代表***场景***。最**容易识别的名称**应该用于**最常用的类型**，即使更适合不太常用的类型。FDG 书中给出的示例是`Printer`和`PrintQueue`，这`Printer`将是最容易识别但`PrintQueue`更能描述概念的地方。这导致...
*   **专注于抽象而不是概念**。使用的示例是`File`.NET 中的基类和派生的`NtfsFile`. 大多数开发人员会自动尝试实例化 a `File`，结果发现它是`abstract`. *像这样的继承在实现*中效果很好，但是......
*   **框架设计与 OO 设计不同**：例如，在 .NET 中存在对象层次结构；`Stream`, `StreamReader`, `TextReader`,`StringReader`和`FileStream`. 有一个清晰的层次结构，但是在考虑一个***场景***时会让人感到困惑，例如读取文件。
*   **程序集代表打包和部署边界**。最佳实践（无论如何在 .NET 中）通常说名称空间应该匹配程序集，例如`MyCompany.MyTechnology.dll`具有名称空间`MyCompany.MyTechnology`和其他名称空间，例如`MyCompany.MyTechnology.MyFeature`. 这不一定适用于框架/API；这里的程序集应该代表开发人员的逻辑分组，并考虑到性能（加载时间）、易于部署和易于版本控制。这是一种平衡行为；当只有 1 个程序集时，没有人喜欢引用超过 1 个程序集。如果程序集太大并且逻辑分组很差，没有人喜欢依赖他们不需要的东西（例如，即使您在 API 中使用的功能与 ADFS 无关，也必须额外依赖 ADFS ）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T21:29:45.020

我喜欢 The Clean Coder 一书，以及 C# 中的敏捷原则、模式和实践，最后是 Robert C. Martin 编写的 Clean Code。我喜欢他的写作方式，我喜欢他的编码风格，它给了我很多思考和应用到我自己作为程序员的职业生涯的机会。你可以在亚马逊上以相当便宜的价格买到所有这些书。Robert C. Martin 也有自己的网站来处理这类事情。[http://www.objectmentor.com/omTeam/martin_r.html](http://www.objectmentor.com/omTeam/martin_r.html)这是在“关于我们的团队部分”中以他为特色的网站。在那里四处寻找，看看你是否找不到他的其他网站，以及他编写的一个名为 Fitnesse 的程序。

尽管您的风格对于业余爱好者倾向于在较大规模上进行的正常大小的项目看起来不错，但可能涉及更多步骤。你想写什么在线服务？我目前正在为 Zoho 编写另一个，但我一直忘记将我的代码从工作中导入到我的程序中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T07:15:20.950

我刚刚为我们工作中的一个项目编写了一个 API，我确实有几点意见。

方法论原则上很好，但请考虑您的要求。您是否会有多个开发人员来推进和维护 API，或者您主要负责开发？如果是前者，那么架构的结构化方法和流程将在未来发生（可怕但不可避免的）变化时带来好处。

如果是后者，那么您将拥有更大的灵活性。每个 API 都在尝试实现不同的东西，无论是插件框架，还是服务的“公共”入口点——我建议您收集一些需求并确定遵循其中一种方法是否会使您受益。

# flash - 如何收听所有传入和传出的基于 Flash 的网络聊天的数据？

> ID：10542360
> 
> 赞同：0
> 
> 时间：2012-05-10T21:24:12.437
> 
> 标签：flash, listen

我有一个基于 Flash 的网络聊天，我想制作聊天聚合器。要做到这一点，我需要连接到聊天服务器，为此我必须知道格式。这就是为什么我必须听服务器的闪存会话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T22:15:58.267

使用 http 调试代理，例如 Charles： http: [//www.charlesproxy.com/](http://www.charlesproxy.com/)

它将监视您计算机上的所有传入和传出流量。从那里很容易检查找到闪存通信。

在 firefox 浏览器中，您还可以使用：篡改数据 [https://addons.mozilla.org/en-US/firefox/addon/tamper-data/](https://addons.mozilla.org/en-US/firefox/addon/tamper-data/)

它对 Firefox 做同样的事情。不确定 Tamper Data 是否会捕获套接字信息。但查尔斯会。

# javascript - PhantomJS 使用返回 null 的基本身份验证进行评估

> ID：10542361
> 
> 赞同：1
> 
> 时间：2012-05-10T21:24:14.220
> 
> 标签：javascript, basic-authentication, phantomjs

我正在尝试在具有基本始终身份验证的页面上使用 PhantomJS，例如，此页面

[http://alexturpin.net/auth](http://alexturpin.net/auth) ( `test:rosebud`)

使用以下代码

```
var webpage = require('webpage');

page = webpage.create();
page.settings = {
    userName: "test",
    password: "rosebud"
};

page.open("http://alexturpin.net/auth/", function(status) {
    console.log(status);
    var retval = page.evaluate(function() {
        return "test";
    });
    console.log(retval);
}); 
```

我得到这个输出

```
$ phantomjs test.js
success
null 
```

无论我尝试什么，`evaluate`都会继续返回`null`，即使页面似乎因为`status`包含而打开得很好`"success"`。

如果我决定打开一个没有基本身份验证的页面，例如[http://alexturpin.net/noauth](http://alexturpin.net/noauth)，我仍然会得到相同的结果。只有当我最终在打开页面之前完全删除身份验证设置时，它才会起作用。

身份验证设置的使用似乎与`evaluate`. 这是 PhantomJS 中的错误，还是我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T11:22:22.447

使用该语法，您将清除设置对象，仅将其替换为`userName`and `password`。使用该代码设置它们：

```
page.settings.userName = "test";
page.settings.password = "rosebud"; 
```

可能 PhantomJS 应该处理得更好，即不依赖`settings`对象作为默认值。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-10T21:34:57.000

这是一个关闭问题，请尝试将您的 console.log 放入回调中

# c++ - 是什么导致字符串输出中出现笑脸？

> ID：10542362
> 
> 赞同：1
> 
> 时间：2012-05-10T21:24:14.780
> 
> 标签：c++

该程序基本上将中缀转换为后缀。问题是，`-`and`/`变成了这样的笑脸:)

问题是，它显示不同的字符而不是预期的减号或除号。

```
// the program is used to convert a infix expression to a postfix expression

#include<iostream>
#include<stdio.h>
#include<conio.h>
#include<string.h>
#include<stdlib.h>
#include<string>

using namespace std;

const int size =50;
char infix[size],postfix[size],stack[size];
int top=-1;

int precedence(char ch);   // function to get the precedence of the operator
char pop();  //function to pop an element from the stack
char topelement();  // returns the top element of the stack
void push(char ch);  // pushes an element into the stack

int main()
{
     char ele,elem,st[2];
     int prep,pre,popped,j=0,chk=0;
     char strr[50];
     cout<<"Enter infix notation : "<<endl;
     cin>>infix;
     strcpy(postfix," ");

     //gets(infix);

     for(int i=0;infix[i]!=0;i++)
          {
                  if(infix[i]!='('&&infix[i]!=')'&&infix[i]!='^'&&infix[i]!='*'&&infix[i]!='/'&&infix[i]!='+'&&infix[i]!='-')     
                       postfix[j++]=infix[i];
                  else if(infix[i]=='(')
                      {
                         elem=infix[i];
                         push(elem);
                      }
                  else if(infix[i]==')')
                      {
                         while(popped=pop() != '(')
                             postfix[j++]=popped;
                      }
                  else
                      {
                         elem=infix[i];
                         pre=precedence(elem);//stores the precedence of operator coming frm infix
                         ele=topelement();
                         prep=precedence(ele);//stores the precedence of operator at the top of the stack

                         if(pre > prep)
                           push(elem);                                         

                         else
                           {
                                while(prep >= pre)
                                  {
                                     if(ele=='#')
                                       break;
                                     popped=pop();
                                     ele=topelement();
                                     postfix[j++]=popped;
                                     prep=precedence(ele);
                                   }
                                   push(elem);
                            }
                         }
             } 

          while((popped=pop())!='#')
              postfix[j++]=popped;
          postfix[j]='\0';

          cout<<"\n post fix :"<<postfix<<endl;

           system("pause");
           return 0;
}

int precedence(char ch)
{
       switch(ch)
          {
               case '^' : return 5;
               case '/' : return 4;
               case '*' : return 4;                                            
               case '+' : return 3;
               case '-' : return 3;
               default  : return 0;
          }
}

char pop()                  //function to pop the element from the stack
{
     char ret;
     if(top!=-1)
       {  ret =stack[top];
          top--;
          return ret;
       }
     else
        return '#';
}

char topelement()          // function to return top element from the stack without popping
{     
      char ch;
      if(top!=-1)
        ch=stack[top];
      else
         ch='#';
       return ch;
}

void push(char ch)          // function to push an element in the stack
{
     if(top!=size-1)
         {
            top++;
            stack[top]= ch;
         }
} 
```

![在此处输入图像描述](../Images/fb8771ee70e583a7f83a6cfbd2a40962.png)

在代码中看起来`-`不错`/`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T21:31:30.667

# tridion - SDL Tridion 组件和页面模板的工作流程用于什么？

> ID：10542363
> 
> 赞同：8
> 
> 时间：2012-05-10T21:24:16.727
> 
> 标签：tridion, tridion2009, tridion-2011

我在 SDL Tridion 2009 和 2011 中都注意到，在发布对话框的工作流选项卡上，有一个用于关联页面模板流程和关联组件模板流程的字段。

这是否意味着可以在生产中进行模板/代码更改并通过工作流程发布？这是一个好习惯吗？如果是这样，为什么他们没有模板构建块的工作流过程关联？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T21:43:14.360

这样做的目的不是在生产中使用，但您可以在开发阶段使用它。我认为此功能有利于代码/模板设计审查流程，其中开发人员开发模板并启动工作流程，然后团队负责人对其进行审查并批准/拒绝更改。

对于生产/UAT/QA，NO.NO.NO. （只想强调这一点：））恕我直言，这不是一个好习惯。您应该使用典型的 DTAP 内容移植程序包导出/导入来完成更改管理过程。

为什么 TBB 上没有工作流程？无论如何，TBB 都将成为 CT/PT 的一部分，因此当您审查 CT/PT 时，它们会明确包含在审查中。但是，我明白您的观点，在某些情况下您可能只更新 TBB 而没有启动工作流。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T21:38:49.530

这是在 Tridion 5.3 版中出现复合模板之前可以与非复合 VB 模板一起使用的遗留功能。但是，今天这不会有太大用处，因为 TBB 不会包含在工作流中，因此您可以通过工作流控制的只是页面/组件模板块，而不是内部的 TBB。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T21:42:27.777

据我所知，模板的工作流程按照您的建议工作。但是上次我检查时（在 2009 版中），`Minimal Level of Approval`发布项目时不尊重状态。不幸的是，这意味着当有人发布时，您的模板更改将始终立即可供所有目标使用。因此，我始终建议在开发环境而不是生产环境中进行模板更改，并使用 Content Porter 管理模板的发布。

您关于 TBB 的观点很好——从 R5.3 开始，模块化模板已广泛使用 TBB，因此我认为此功能可能被忽略了。如果 TBB 问题和`Minimal Level of Approval`问题得到修复，您可以创建一些非常有趣的发布场景来启动新设计的站点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T17:26:11.997

正如其他人所建议的那样，您发布模板的方法应该利用开发-测试-验收-生产 (DTAP) 环境。此设置的复杂性将取决于您的具体要求。

使用工作流进行开发工作很可能没有帮助。很大程度上取决于不同开发人员在哪里集成他们的工作。如果您有多个 DEV 环境，那么每个单独的开发人员不太可能希望在自己的系统上运行工作流。假设您在其中一台 DEV 机器上集成，或者可能在 TEST 上集成，您也不希望那里有工作流，因为当开发人员提交更改时，它主要由多个资产组成，每个资产都必须单独通过工作流，在发生这种情况时，其他部分可以看到更改，而其他部分则不可见。如果您的所有开发人员都在同一台服务器上工作，那么工作流程的这些方面将受到更大的伤害。

工作流对于一次管理单个不相关资产的发布非常有用。典型的开发工作不是这样的，坦率地说，额外步骤的数量只是开销，并且不会消除对正常开发规则的需要。正如 Quirijn 所说，人们不会这样做。我也从未见过，我很高兴这么说。

# linux - 在 Linux 中观察文件的变化

> ID：10542366
> 
> 赞同：3
> 
> 时间：2012-05-10T21:24:20.177
> 
> 标签：linux, file, search, inotify

# 问题：

有什么方法可以跟踪 Linux 中文件的进度（即新文件/保存文件）？

# 细节：

我知道[inotify](http://en.wikipedia.org/wiki/Inotify)可用于跟踪整个文件夹以进行文件创建、删除和修改。然而，这些都是非常低的水平。文本编辑器通常在保存文件时，将修改后的缓冲区写入临时位置，然后移动它并覆盖原始文件。当我想要的是 a 时，inotify 会将其视为 a`CREATE`和a 。`MOVE``MODIFY`

在我看来，每次保存文件时都会将其解释为新文件，这似乎与直觉相反。我可以使用文件的任何标识值来区分创建新文件和保存现有文件吗？提出这个问题的另一种方法是：“ [Beagle](http://en.wikipedia.org/wiki/Beagle_%28software%29)、[Spotlight](http://en.wikipedia.org/wiki/Spotlight_%28software%29)、[Windows Search](http://en.wikipedia.org/wiki/Windows_Search)和[Google Desktop](http://en.wikipedia.org/wiki/Google_Desktop)等程序如何解决这个问题”？

# 目标：

这是描述我想要的东西的好方法：使用`Vim`，如果我打开一个文件并保存它`:w`（`inotify`已创建，然后用于覆盖原始文件。但是，如果将文件添加到 subversion ( `svn`)，然后使用打开该文件`Vim`并保存 ( `:w`)，`svn`将知道保存的文件实际上是修改后的文件，而不是新文件。这怎么`svn`知道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:37:15.160

我将尝试解释，而在 Linux 中 new 或 save 可能看起来相同。linux与windows的一大区别是inode不存储文件创建时间，只存储访问、修改（文件内容更改）和更改（inode更改）时间。因此，除非您将信息保存在其他地方，例如文件本身作为元数据，否则您无法判断文件是刚刚创建还是刚刚更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:45:54.110

johnshen64 回答了你为什么你没有看到它被修改过。关于 SVN（或 Git），他们会将文件识别为已修改，因为他们保留了已管理文件的“密钥”。

所以对于你的数据库，你需要做同样的事情。例如，您可以使用文件名中的简单数字哈希（或文件名本身，但字符串比较很慢），并在添加文件之前快速查询文件是否已被管理。

# python - 蟒蛇泡菜：它是什么？我什么时候用？

> ID：10542367
> 
> 赞同：0
> 
> 时间：2012-05-10T21:24:25.437
> 
> 标签：python, pickle, data-persistence

我知道pickle是一个对象持久性库，它可以让我将数据结构写到磁盘上，然后重新加载它。

与使用文本文件的“传统”方法相比，我为什么/何时会这样做？

编辑：实际上这不是表达问题的有用方式。我的意思是在什么情况下泡菜会更容易/更方便，什么时候会给我带来麻烦？什么样的数据或设计模式适合泡菜？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T21:26:47.730

当您想要存储非文本的 Python 对象时，不容易使用其他库（JSON、msgpack 等）进行序列化，并且不想编写自己的序列化和反序列化代码。

一般来说，pickle 应该是最后的序列化和反序列化方法：速度不快（msgpack*更快*更紧凑），不安全（永远不要使用 pickle 作为 cookie 或其他客户端的存储格式-可访问的数据！），不可互操作（不存在非 Python 语言的实现）......但它适用于其他地方通常不支持的对象和数据类型（尽管不是*所有*Python 对象）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:26:45.643

使用 pickle 或类似工具，您可以获得可用于重构这些对象的对象的文本表示。如果没有像 pickle 这样的东西，你就不能不编写自己的持久性代码。

# proxy - Nginx 代理设置

> ID：10542372
> 
> 赞同：0
> 
> 时间：2012-05-10T21:24:50.210
> 
> 标签：proxy, nginx, request, sinatra

嘿伙计们，我在使用 nginx 代理时遇到了问题。

我想将其设置为将所有请求重定向到一个外部站点（已经有了）。

但是除了域 hg.mydomain.com 上的请求之外，这些请求我想重定向到 localhost:4567（sinatra 应用程序就在那里）

但这不起作用

```
user www-data;
worker_processes  1;

error_log  /var/log/nginx/error.log;
pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
    # multi_accept on;
}

http {
    include       /etc/nginx/mime.types;

    access_log  /var/log/nginx/access.log;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;
    tcp_nodelay        on;

    gzip  on;
    gzip_disable "MSIE [1-6]\.(?!.*SV1)";

    server {
       listen       80;
       server_name  *.hg.mydomain.com;

       location / {
            proxy_pass http://127.0.0.1:4567/;
       }
    }

    server {
        listen 80;

        location / {
            proxy_pass http://sb.mydomain.com;
            proxy_set_header X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $remote_addr;
            proxy_set_header X-Shoebox-Host $host;
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:06:11.837

If you'd want [http://hg.mydomain.com](http://hg.mydomain.com) to point to the Sinatra app you would want to change the line

```
 server_name  *.hg.mydomain.com; 
```

to

```
 server_name  .hg.mydomain.com; 
```

or

```
 server_name  hg.mydomain.com; 
```

Also, you might want to add `default_server` to your `listen` for the default server. Read more about that here: [http://wiki.nginx.org/HttpCoreModule#listen](http://wiki.nginx.org/HttpCoreModule#listen)

# c# - 莫名其妙的 MissingFieldException

> ID：10542373
> 
> 赞同：5
> 
> 时间：2012-05-10T21:24:51.133
> 
> 标签：c#, debugging, exception, compilation, release

在以下代码片段中，它会引发 MissingFieldException: Field Not Found: DepthBidLevels 异常，但仅在下面描述的某些奇怪情况下。

```
for(int i=DomSize-1; i>=0; i--) {
    fixed( ushort *p = binary.DepthBidLevels) {
    if( i!=DomSize-1) {
        builder.Append( ",");
    }
    builder.Append( *(p + i));
} 
```

二进制变量的类型是一个在单独的程序集中定义的结构：

```
unsafe public struct TickBinary
{
    public const int DomLevels = 5;
    public const int SymbolSize = 8;
    public const int minTickSize = 256;

    public long Symbol;
    public byte contentMask;
    public long Id;
    public long UtcTime;
    public long UtcOptionExpiration;
    public long Strike;
    public long Bid;
    public long Ask;
    public byte Side;
    public long Price;
    public int Size;
    public fixed ushort DepthAskLevels[DomLevels];
    public fixed ushort DepthBidLevels[DomLevels];
} 
```

好的，上面的代码的工作方式取决于它的编译位置和方式。只要两个程序集（片段程序集和 TickBinary 程序集）都在同一台机器上编译，它们就可以正常工作。

但是，如果代码片段程序集在与 TickBinary 程序集不同的机器上构建，然后一起运行，则会引发 MissingFieldException。

您可能想知道，为什么它们建立在不同的机器上？该项目将部分代码提供为开源代码，将项目的其他部分提供为预编译的二进制文件。所以用户自己编译一部分并简单地引用预编译的程序集。

注意：片段总是使用发布配置编译，这意味着它启用了优化。

但对我来说似乎莫名其妙的是它如何为 DepthBidLevels 字段提供缺失字段异常。这似乎没有使用任何类型的反射，或者 fixed 关键字是否在幕后使用反射？我对此表示怀疑，因为代码片段的性能正在快速下降。

编辑：我缩小了关键因素是程序集是由 msbuild 从命令行编译还是通过 Visual Studio 2008 编译。如果所有程序集都是由命令行编译的，它可以工作。如果所有都是通过 Visual Studio 编译的，它就可以工作。但是使用 MSBuild 构建的 TickZoomEngine 并使用通过 Visual Studio 2008 构建的 TickZoomAPI1.0 运行它会失败。在进行这些实验时，代码更改为零。为什么 Visual Studio 编译会与 MSBuild 编译不兼容？

编辑：由于下面的想法，这里是所有程序集及其引用的转储。一切似乎都井然有序。具体来说，最后一个程序集 TickZoomEngine 是具有引用 TickZoomAPI1.0 程序集中的结构类型的代码片段的程序集。

```
Listing all assembly references...
mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
Microsoft.VisualStudio.HostingProcess.Utilities, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: Microsoft.VisualStudio.HostingProcess.Utilities.Sync, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: Microsoft.VisualStudio.Debugger.Runtime, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Security, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: Accessibility, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Runtime.Serialization.Formatters.Soap, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Deployment, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
Microsoft.VisualStudio.HostingProcess.Utilities.Sync, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
Microsoft.VisualStudio.Debugger.Runtime, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
vshost, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: Microsoft.VisualStudio.HostingProcess.Utilities.Sync, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Security, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Security, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: Microsoft.VisualC, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Transactions, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.EnterpriseServices, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
System.Deployment, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Security, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Data.SqlXml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
TickZoomGUI, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomAPI1.0, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: TickZoomCharting, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: TickZoomPresentation, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: WindowsFormsUtil, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
TickZoomPresentation, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomAPI1.0, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
TickZoomAPI1.0, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
WindowsFormsUtil, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomPresentation, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomAPI1.0, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
PluginLoader, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomAPI1.0, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: ICSharpCode.SharpZipLib, Version=0.85.5.452, Culture=neutral, PublicKeyToken=1b03e6acf1164f73
TickZoomLogging, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomAPI1.0, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821
    Reference: System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
TickZoomCharting, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomAPI1.0, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: ZedGraph, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: WindowsFormsUtil, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Web.Services, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.DirectoryServices, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.DirectoryServices.Protocols, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.EnterpriseServices, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.ServiceProcess, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Web.RegularExpressions, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
Accessibility, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
TickZoomPluginCommon, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomAPI1.0, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System.ServiceProcess, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Configuration.Install, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
System.ServiceProcess, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Configuration.Install, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
System.Configuration.Install, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Runtime.Serialization.Formatters.Soap, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
TickZoomPluginExamples, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: TickZoomPluginCommon, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomAPI1.0, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
    Reference: System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
ProviderCommon, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomAPI1.0, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
ProviderUtilTests, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomAPI1.0, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: nunit.framework, Version=2.5.1.0, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77
    Reference: ProviderUtil, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
TickZoomLoaderTests, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomAPI1.0, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: nunit.framework, Version=2.5.1.0, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77
    Reference: PluginLoader, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
ExamplesTest, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: TickZoomPluginCommon, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: nunit.core, Version=2.5.1.0, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77
    Reference: nunit.core.interfaces, Version=2.5.1.0, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77
    Reference: TickZoomAPI1.0, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: TickZoomCharting, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: TickZoomPresentation, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: WindowsFormsUtil, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: TickZoomPluginExamples, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomGUI, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomStarters, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: nunit.framework, Version=2.5.1.0, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77
    Reference: TickZoomTickUtil, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: ZedGraph, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
nunit.core, Version=2.5.1.0, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: nunit.core.interfaces, Version=2.5.1.0, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
nunit.core.interfaces, Version=2.5.1.0, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
LimeProviderUnitTests, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
TickZoomTesting, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomPluginCommon, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: TickZoomPluginExamples, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: TickZoomAPI1.0, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomCharting, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: TickZoomStarters, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: nunit.framework, Version=2.5.1.0, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77
    Reference: TickZoomTickUtil, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: tzdata, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
TickZoomEngine, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomAPI1.0, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Reference: TickZoomTickUtil, Version=1.4.8.8462, Culture=neutral, PublicKeyToken=null
    Reference: System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:46:30.070

通过简单地将失败的方法移动到另一个dll中来解决它。所以现在它引用的字段在同一个 DLL 中。

这仅仅意味着加载器逻辑在运行时绑定到固定结构字段时是不稳定的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T22:44:19.510

比较引用的程序集（依赖项）的两个二进制文件清单（您编译的程序集）。

```
System.Reflection.Assembly::GetReferencedAssemblies() 
```

并比较..它们编译的框架之间可能存在版本差异。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-18T21:42:22.907

我也有这个问题。转身我的项目是引用两个 .dll，调用它们`A.dll`和`B.dll`.

`A.dll`也参考了`B.dll`。`B.dll`自从我上次构建我的项目以将一些字段更改为属性以来已经更新。再次构建项目后，我遇到了此处描述的问题。

原来，自从更新后就`A.dll`没有重建，期待with 字段，但是我的项目正在使用的新构建的属性。`B.dll``A.dll``B.dll``B.dll`

# java - 依赖于maven中的模块

> ID：10542374
> 
> 赞同：2
> 
> 时间：2012-05-10T21:24:52.907
> 
> 标签：java, maven, pom.xml

我有以下maven项目的树结构：

```
Root/pom.xml
Root/moduleA/pom.xml
Root/moduleA/src/main/java/moduleA/MyClass.java 
```

我想通过 exec-maven 插件在 Root pom.xml 中使用类 moduleA.MyClass。问题是：如果我将 ModuleA 定义为 pom xml 的模块

**`Root/pom.xml`**

```
<modules>
    <module>moduleA</module>
</modules> 
```

我不能将它声明为 Root 的依赖项

**`Root/pom.xml`**

```
<dependencies>
    <dependency>
        <groupId>Root</groupId>
        <artifactId>moduleA</artifactId>
        <version>1.0</version>
        <scope>install</scope>
    </dependency>
</dependencies> 
```

因为它会导致这样的循环依赖：

```
[INFO] The projects in the reactor contain a cyclic reference: Edge between 'Vertex{label='Root:moduleA'}' and 'Vertex{label='Root:moduleA'}' introduces to cycle in the graph Root:moduleA --> Root:moduleA 
```

问题是：如何保持`install`在 Root pom 上执行目标构建的 moduleA**并**能够使用 exec-maven-plugin 执行 moduleA 的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:03:01.033

我认为您的问题类似于先有鸡还是先有蛋的问题。您的根 POM 是您项目的聚合器，它生成您想要使用的工件。在制作工件之前，它们不能被使用。如果你的根 POM（又名聚合器）中需要你的 moduleA 的类，你应该在一个单独的项目中构建它。但是可能您的构建过程允许稍后执行 MyClass（而不是在根 POM 中），您可以将此执行移动到另一个模块并将依赖项设置为 moduleA。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:56:56.410

您尚未发布完整的 pom.xml，但我知道默认情况下安装目标不使用 exec 插件。您可以在插件声明中将 moduleA 声明为依赖项，我认为这可以解决您的问题。

另一方面，如果您需要在安装目标中执行模块 A 的一部分，那么如果没有第三个 pom.xml，您将无法使用此设置，它只会执行您的类。

# javascript - 禁用下拉列表

> ID：10542377
> 
> 赞同：0
> 
> 时间：2012-05-10T21:25:15.180
> 
> 标签：javascript, jquery

这是我的代码 -

```
var obj = $('[id$=ddlInsert4]')
obj.disable = true; 
```

obj 是一个下拉列表，但 disable 调用不会禁用下拉列表。

```
alert(obj.val()) //this returns the correct value 
```

由于我的警报返回正确的值，我知道我的 jQuery 语法是正确的。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T21:26:16.527

尝试使用`.prop`如下，

```
$('[id$=ddlInsert4]').prop('disabled', true); 
```

您可以使用`.prop`上面的 jQuery 函数

或者

`$('[id$=ddlInsert4]')`返回一个 jquery 对象（选择器总是返回 jQuery 对象的数组）所以你不能像这样在 jQuery 对象上设置 DOM 属性..

您需要循环迭代并设置属性 ex: `$('[id$=ddlInsert4]')[i].disabled = true`where `i`is the index.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T21:27:25.097

`obj`是一个 jQuery 对象，而不是一个 DOM 元素。你需要做`$(obj).prop('disabled', true);`。或者更好的是，如果您不需要`obj`其他地方的变量，只需执行以下操作：

```
$('[id$=ddlInsert4]').prop('disabled', true) 
```

要与原生 DOM 元素交互，您可以执行`[0]`（或`.get(0)`）。然后你可以这样做：

```
obj[0].disabled = true; 
```

（请注意，该属性`disabled`不是`disable`）

注意：`$('[id$=ddlInsert4]')`可以返回多个元素，并且`[0]`只会得到第一个。如果有多个，您需要遍历所有这些。不过我建议使用 jQuery`.prop`方法，因为它会为您循环遍历所有元素。

# jndi - 如何获取 Weblogic 数据源的活动/空闲连接总数？

> ID：10542378
> 
> 赞同：0
> 
> 时间：2012-05-10T21:25:23.737
> 
> 标签：jndi, connection-pooling, jmx, weblogic-10.x, spring-jdbc

在我们的 WebLogic 应用程序（Spring 2.5x）中，我想通过 Java 代码确定我们在服务器上打开的活动和空闲数据库连接的数量。

应用程序的 WL 域具有已注册的 JDBCSystemResource。该应用程序使用 JNDI 访问它，例如：

```
<bean id="dataSource"
    class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="myJDBC.tx.ds" />
</bean> 
```

但是，DataSource 不会公开有关连接池状态的任何信息。

在 WL 控制台中，我已将连接池配置为跟踪活动连接的数量。我可以看到正在收集信息；但是，我不知道如何在我的应用程序代码中获取此信息。我必须做什么才能从 WebLogic 获取有关连接池的诊断信息？我对使用应用程序代码而不是通过 WL 控制台感兴趣。

我们小组花了一些时间试图弄清楚如何通过 JMX 获取信息，但到目前为止我们还没有运气。任何指导将不胜感激。

**更新：**

我确定 JDBCDataSourceRuntimeMBean（如 +JoseK 所述）提供了我需要的详细信息。我可以在禁用 JMX 身份验证的情况下连接；但是，当我启用 JMX 身份验证时，我得到：

```
Error: Password file not found: C:\bea\JROCKI~1\jre\lib\management\jmxremote.password
[JRockit] Failed to start the management agent. Note that the management agent requires that you either explicitly disable security or that you configure and enable security. Please see the documentation for details.
java.lang.RuntimeException: Password file not found 
```

# ajax - 使用 asp.net mvc 获取自请求 ajax 以来的数据

> ID：10542379
> 
> 赞同：0
> 
> 时间：2012-05-10T21:25:29.163
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-ajax

我想使用请求 ajax 将所有数据放入一个对象中。

这些数据通过功能进入我的控制器。在我的数据标题中，我有以下信息：

我有 4 个对象 allPly 创建，但所有数据（gramme、乳液和其他）都等于 null 或零。但是数据评论和OtherData没关系，这行得通。

谢谢你的帮助

我的请求：

```
var params={};
var allStep21 ={allData..}
$.extend(params,allStep21);
 $.ajax({
    type: "POST",
    url: "Request",
    data: params,
}); 
```

在标题 html 中：

```
allPly[0][Gramme]:10
allPly[0][Toto]:White
allPly[0][Test]:None
allPly[0][Lotion]:1
allPly[1][Grammage]:11
allPly[1][Toto]:White
allPly[1][Test]:Fine
allPly[1][Lotion]:0
OtherData : 585
Comment: all it's ok 
```

在我的控制器中：

```
[HttpPost]
public ActionResult Request(AllStep21 allStep21)
{
} 
```

在我的模型中：

```
public class AllStep21
{
    public String OtherData { get; set; }
    public String Comment { get; set; }
    public List<allPly> allPly { get; set; }
}
public class allPly
{
    public int Gramme { get; set; }
    public String Toto { get; set; }
    public String Test { get; set; }
    public int Lotion { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T05:57:30.823

您可以使用 JSON 请求，该请求允许您将任意复杂对象发送到控制器操作：

```
var params = { 
    allStep21: { 
        comment: 'some comment', 
        otherData: 'some other data',
        allPly: [
            { toto: 'toto 1', test: 'test 1', lotion: 1, gramme: 1 },
            { toto: 'toto 2', test: 'test 2', lotion: 2, gramme: 2 }
        ]
    } 
};

$.ajax({
    url: 'Request',
    type: 'POST',
    contentType: 'application/json; charset=utf-8',
    data: JSON.stringify(params),
    success: function(result) {
        alert('successs');
    }
}); 
```

此处显示的`JSON.stringify`方法本机内置于所有现代浏览器中。但是如果您需要支持旧版浏览器，则需要包含[json2.js](https://github.com/douglascrockford/JSON-js)脚本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T21:55:13.933

您需要的是实现自己的模型绑定器。看看这些链接：

[http://odetocode.com/blogs/scott/archive/2009/05/05/iterating-on-an-asp-net-mvc-model-binder.aspx](http://odetocode.com/blogs/scott/archive/2009/05/05/iterating-on-an-asp-net-mvc-model-binder.aspx) [http://buildstarted.com/2010/09/12 /custom-model-binders-in-mvc-3-with-imodelbinder/](http://buildstarted.com/2010/09/12/custom-model-binders-in-mvc-3-with-imodelbinder/)

我希望它有所帮助。

# java - Java Servlet 中的数字格式异常

> ID：10542385
> 
> 赞同：1
> 
> 时间：2012-05-10T21:25:50.530
> 
> 标签：java, web

我在 Eclipse 中制作了一个在 Tomcat 服务器上运行的简单 servlet。

我正在运行一个简单的 java 应用程序，它将一个字符串传递`message=20`给 servlet。servlet 获取数据。我在用

```
String name= request.getParameter("message"); 
```

获取传递的字符串。当我将名称值返回给应用程序时，我可以取回它。但是当我尝试处理字符串名称时：

```
int val=Integer.parseInt(name); 
```

我明白了`NumberFormatException`。我无法弄清楚问题是什么。我已经能够从 servlet 中取回 name 变量的值，但为什么我不能使用它呢？

我使用的代码如下：

**客户端代码**

```
URL url = new URL("http://localhost:8080/DemoServer/demoservelet");

URLConnection conn = url.openConnection();

conn.setDoOutput(true);

BufferedWriter out = new BufferedWriter( new OutputStreamWriter( conn.getOutputStream() ) );

out.write("message=20"); 
```

**服务代码**

```
String username = request.getParameter("message").toString();

int val=Integer.parseInt(username);  //get error msg on this line

response.setContentType("text/html");

PrintWriter out = response.getWriter();

out.println("Passed val :"+ username+username.length());

} 
```

我在转换时遇到错误。返回的另一件事我得到的长度值为 4 这也没有任何意义？

请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:47:11.817

您是否尝试使用 GET 样式的参数传递或 PUSH 样式的参数传递？

GET 样式的传递在 URL 的末尾添加参数，如下所示：

```
http://localhost:8080/DemoServer/demoservelet?value=20 
```

像这样的 URL 可以相当容易地组装。您只需要更改您的 URL-creation 行，并且可以删除与打开 BufferedWriter 相关的两行：

```
URL url = new URL(String.format("http://localhost:8080/DemoServer/demoservelet?value=%d", 20)); 
```

POST 样式的传递必须遵守 HTTP 协议，这与您目前使用的非常相似，除了所有参数必须有一个尾随换行符这一事实。使用您的示例：

```
BufferedWriter out = new BufferedWriter(new OutputStreamWriter(conn.getOutputStream()));

out.writeln("message=20"); 
```

您还可以使用 PrintStream，如果您需要更改参数，这将使格式化参数更容易处理：

```
PrintStream out = new PrintStream(conn.getOutputStream());

out.printf("message=%d\n", 20); 
```

使用 GET 样式还是 PUSH 样式取决于您，但这取决于您传递的数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T23:43:02.233

我相信您必须将参数写为参数才能将其检测为一个。

```
out.write("<param name=\"message\" value=\"20\">"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T21:43:16.550

您必须检查名称是否为有效数字。name.match("^-?\d+$"); 如果是数字则返回 true

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T05:23:33.443

你有输出名称的值，确定名称是一个数字，调试时检查值。

# c - 从标准C中的字符串中删除字符

> ID：10542390
> 
> 赞同：5
> 
> 时间：2012-05-10T21:26:12.213
> 
> 标签：c, linux, string, std

我在一个（ubuntu 精确的）linux 系统上，我想从 C 中的字符串中删除前导字符（制表符）。我认为下面的代码在我以前的安装（ubuntu oneric）上工作，但我现在发现它不起作用不再（请注意，这是通用 UTF-8 字符代码的简化版本）：

```
#include <math.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main()
{

    int nbytes = 10000;
    char *my_line, *my_char;

    my_line = (char *)malloc((nbytes + 1)*sizeof(char));

    strcpy(my_line,"\tinterface(quiet=true):");
    printf("MY_LINE_ORIG=%s\n",my_line);

    while((my_char=strchr(my_line,9))!=NULL){
        strcpy(my_char, my_char+1);
    }
    printf("MY_LINE=%s\n",my_line);

    return 0;
} 
```

我愿意

```
gcc -o removetab removetab.c 
```

执行 removetab 时，我得到

```
MY_LINE_ORIG=   interface(quiet=true):
MY_LINE=interfae(quiet==true): 
```

注意“=”的重复和缺少的“c”！出了什么问题，或者我该如何实现这一目标。代码应支持 UTF-8 字符串。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T21:28:11.847

```
strcpy(my_char, my_char+1); 
```

`strcpy`字符串不能重叠。

来自 C 标准（强调我的）：

> (C99, 7.21.2.3p2) “strcpy 函数将 s2 指向的字符串（包括终止空字符）复制到 s1 指向的数组中。**如果复制发生在重叠的对象之间，则行为未定义。** ”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T21:31:25.183

如果你看`man strcpy`：

```
DESCRIPTION
The  strcpy()  function  copies the string pointed to by src, including
the terminating null byte ('\0'), to the buffer  pointed  to  by  dest.
The  strings  may  not overlap, and the destination string dest must be
large enough to receive the copy. 
```

该代码在同一个数组上调用`strcpy()`，这会导致字符串损坏。

# java - 如何格式化 SQL DATETIME 以将其与给定日期进行比较并检索一条记录？

> ID：10542393
> 
> 赞同：0
> 
> 时间：2012-05-10T21:26:23.703
> 
> 标签：java, sql, format

您好必须检索数据库的一条记录，该记录应尽可能接近我的参数（日期（YYYY-MM）），请记住数据库（sql server）中的列是DATETIME，所以我需要格式化它以便我可以比较它，这是我一直在做的：

```
public Document findByDate(String date) throws GeneralException{
    Document docs = new Document();
    String d1 = date;
    String delimiter = "-";
    String[]temp = d1.split(delimiter);     
    try{
        String sql = "SELECT TOP(1) *  FROM Document  WHERE issueDate >= '" +   temp[1]+ temp[0] +"'  AND issuedate < '"+ temp[1]+ temp[0] +"'  ORDER BY issueDate DESC ";
        ResultSet rs = this.executeQuery(sql);
        while(rs.next()){
            docs = (Document) this.build(rs);
        }
        if(docs != null){
            return docs;
        } else {
            return docs = null;
        }
    } catch (SQLException ex){
        throw new GeneralException(ex);
    }
} 
```

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:34:11.733

您不应该使用字符串连接将参数传递给查询。这很容易出错，依赖于数据库和语言环境，并使您的代码容易受到 SQL 注入攻击。相反，使用[准备好的语句](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)，并将您的日期参数作为 java.sql.Date 传递，而不是将其作为字符串传递：

```
String sql = 
    "SELECT TOP(1) * FROM Document WHERE issueDate >= ? AND issuedate < ? ORDER BY issueDate DESC";
PreparedStatement stmt = connection.prepareStatement(sql);
stmt.setDate(1, date);
stmt.setDate(2, date);
ResultSet rs = stmt.executeQuery(); 
```

也就是说，我看不出您的查询可能如何工作。数据库中的日期如何既小于或等于给定日期又大于同一日期？也许您应该使用您的日期作为最低界限，而您的日期 + 1 个月作为上限？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:53:23.917

试试这个查询

```
SELECT TOP(1) *  FROM Document  WHERE convert(date,issueDate) >= ' datevalue ' AND convert(date,issuedate) < ' datevalue '  ORDER BY issueDate DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T21:54:46.430

所以你想要的是同一个月或上个月的最新记录，当然我们必须记住，12月之前的月份是去年......

您可能会在比较月份和年份时搞砸，但如果不是在 YYYY-MM 中传递，而是在该月底传递，那么它只是

```
Select Top(1) * from Documents Where IssueDate <= ? Order By IssueDate Desc 
```

在哪里 ？是月底

# jodatime - Joda DateTime 与 PeriodFormat 的差异如 1:30

> ID：10542394
> 
> 赞同：3
> 
> 时间：2012-05-10T21:26:23.953
> 
> 标签：jodatime

我正在使用 Period 来获取两个 DateTimes 之间的时间差。

```
 Period p = new Period(startDate, endDate,
                PeriodType.standard().withSecondsRemoved().withMillisRemoved());

        return PeriodFormat.getDefault().print(p); 
```

这给了我“1小时30分钟”的形式。

我怎样才能得到像“1:30”或“:15”这样的东西？

我想我可以做类似的事情：

```
public static int getHoursDifference(DateTime startDate, DateTime endDate) {
        Period p = new Period(startDate, endDate);
        return p.getHours();
    } 
```

同样持续几分钟，然后连接......？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T21:52:52.547

您可以使用[PeriodFormatterBuilder](http://joda-time.sourceforge.net/api-release/org/joda/time/format/PeriodFormatterBuilder.html)。

类似于以下内容：

```
PeriodFormatter formatter = new PeriodFormatterBuilder()
    .minimumPrintedDigits(2)
    .printZeroAlways()
    .appendHours()
    .appendSeparator(":")
    .appendMinutes()
    .toFormatter(); 
```

会给你一个格式化程序，然后你可以使用它而不是你当前使用的默认格式化程序，我认为它会给你一些类似于你正在寻找的格式的东西。如果您对它们感兴趣，当然可以附加其他字段。

并更改或跳过对的调用，`minimumPrintedDigits`如果`printZeroAlways`它为零，则可能使其不显示小时部分和/或在没有前导零的情况下显示它。

# .htaccess - htaccess 不会在 Kohana 中重写 index.php

> ID：10542399
> 
> 赞同：0
> 
> 时间：2012-05-10T21:26:52.907
> 
> 标签：.htaccess, kohana

我在 google 中搜索了我的问题，但没有找到任何有用的信息。

所以在我将网站移到其他主机之前一切都很好。这很好用

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /

# Protect hidden files from being viewed
<Files .*>
    Order Deny,Allow
    Deny From All
</Files>

# Protect application and system files from being viewed
RewriteRule ^(?:application|modules|system)\b.* index.php/$0 [L]

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php/$0 [PT] 
```

但是当我将该站点移至其他主机时， index.php 不再重写。

主机上的 apache 版本是 2.2.22

我登录 ftp 时的文件结构是 /htdocs/ 和站点文件。

当我在浏览器上写

```
    http://verana.ge/index/page

```

它给了我 404 错误

但是在

```
    http://verana.ge/index.php/index/page/

```

效果很好

引导配置是这样的：

```
     'base_url' => '/',
     'index_file' => 假，

```

所以请帮助我并告诉我是我做错了什么还是apache配置问题还是Kohana的问题

先感谢您

添加

还有一个细节

我联系了主机的系统管理员，他给了我日志文件，上面写着

```
     /var/www/virtual/verana.ge/htdocs/.htaccess：此处不允许 RewriteLog

```

在同一台主机上，我有 wordpress 站点，它的 htaccess 文件就像这样并且可以工作

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /college/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /college/index.php [L]
</IfModule>

# END WordPress 
```

你能告诉我在哪里，有什么问题吗

添加

重写日志说

```
    [verana.ge/sid#21cbdd98][rid#21e0ad78/initial] (3) [perdir /var/www/virtual/verana.ge/htdocs/] 去除每个目录前缀：/var/www/virtual/verana。 ge/htdocs/->

```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:48:13.583

我解决了这个问题。

所以我的 apache 服务器版本是 2.2.22，我做了如下的 htaccess 文件：

```
 IfModule mod_rewrite.c>    
    重写引擎开启
    RewriteBase /
    重写规则 ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    重写规则。/index.php [L]
 /如果模块>

```

现在这个 apache 2.2.22 的 htaccess 配置运行良好

# ssrs-2008 - 我可以在 .Net 2 网站中显示 SSRS 2008 报告吗？

> ID：10542400
> 
> 赞同：0
> 
> 时间：2012-05-10T21:26:54.477
> 
> 标签：ssrs-2008, reportingservices-2005

我们有一个 asp.net 2.0 Web 表单应用程序，客户端托管在他们的 Extranet 上。该站点显示来自 SQL Server 2005 数据库（以及因此 SSRS 2005）的一些报告。我们使用 ReportViewer 控件 (v9) 执行此操作。

客户刚刚告诉我们，他们正在将数据库迁移到安装了 SQL Server 2008 R2 的新服务器。

我们之前开发过 SSRS 2008 报告，但仅用于 .Net 4 网站。我们应该能够在 .Net 2 网站上显示 2008 年的报告，还是需要将网站升级到 3.5？

我知道 SSRS 2008 是一个与 2005 完全不同的工具，但我们想要做的就是将 2005 报告部署到 2008 服务器，理想情况下，只需更改网站连接到的 URL。唉，我觉得我有点乐观！我在网上做了很多搜索，但只是对 SSRS、VS、ReportViewer 控件等版本感到困惑。非常感谢任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:58:28.313

答案是肯定的！

我们使用 BIDS 2008 打开了 .rptproj (2005)，并允许它升级项目文件。然后我们依次打开每个报告并进行预览（因此报告升级到 2008 年）。这些已部署到 2008 年的 SSRS 实例，我们只需要更改 .net 2 网站中的连接字符串，无需其他任何东西。有一次我不乐观！

# c# - 在 WCF 中传递 FileStream

> ID：10542408
> 
> 赞同：0
> 
> 时间：2012-05-10T21:27:26.207
> 
> 标签：c#, wcf, filestream

在我将文件流的引用从客户端传递给服务，并且服务开始将流下载给他之后，我如何从客户端确定到目前为止读取了多少字节（当我使用文件流对象时）？

我的目标是仅**计算此文件的客户端上传速度**，我能想到的唯一方法就是这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T21:31:59.187

扩展 FileStream 或为其创建包装器。覆盖读取方法并让计数器计算读取的字节数。

扩展（没有正确实施，但应该足以解释）

```
 public class CountingStream : System.IO.FileStream {

      // provide appropriate constructors

      // may want to override BeginRead too

      // not thread safe

      private long _Counter = 0;

      public override int ReadByte() {
         _Counter++;
         return base.ReadByte();            
      }

      public override int Read(byte[] array, int offset, int count) {
         // check if not going over the end of the stream
         _Counter += count;
         return base.Read(array, offset, count);             
      }

      public long BytesReadSoFar {
         get {
            return _Counter;
         }
      }
   } 
```

# php - CKEditor 的 SetData 时 和 文本前面的标签

> ID：10542410
> 
> 赞同：0
> 
> 时间：2012-05-10T21:27:35.230
> 
> 标签：php, ckeditor

当我的 CKEditor 的 setData 时出现问题，当数据在它的开头有一个`<p>`标签或标签时。`<br>`如果它没有这些数据看起来很好，就像它的意思一样，但如果有，什么都不会出现。

有任何想法吗？

我尝试将我的 setData 更改为 insertHtml 但仍然存在同样的问题。我还尝试在编辑器中的 setData 之前剥离数据的标签，这成功地剥离了标签但不插入数据。

通过 php 从数据库中检索数据。干杯。

Java的代码：

```
 <script type="text/javascript">
 CKEDITOR.instances.contents.setData( '<?php echo strip_tags($text) ?>');
 </script> 
```

# android - 如何使用 Dao.setAutoCommit()？

> ID：10542413
> 
> 赞同：0
> 
> 时间：2012-05-10T21:27:41.957
> 
> 标签：android, ormlite

我正在从服务器解析 JSON，在读取对象时使用 ORMLite 将对象持久保存到数据库中。这些文件可能会变得非常大，所以我的想法是在读取对象时一次提交一个对象，而不是将数百个对象读入内存并进行大规模提交（毕竟智能手机上的内存稀缺）。但是，每个对象都将包含一个具有多个值的集合（我试图将`ForeignCollection`这些值用于这些值，因此每个值都需要被视为一个单独的对象）并且认为最好一次提交对象集合中的所有项目，而不是提交每个单独的字符串或整数。

我相信要批量进行一组提交，我只需调用`dao.setAutoCommit(false)`，`dao.create()`为每个项目调用`dao.commit()`，然后调用，然后调用`dao.setAutoCommit(true)`返回到零碎的提交。

我有三个问题：

1.  提交是正确的，还是应该批量提交——即使这意味着一次提交多达一千个对象？
2.  是一次提交一个项目的集合，还是批量提交项目集合？
3.  我从哪里获得`databaseConnection`价值`dao.setAutoCommit()`并`dao.commit()`要求？也许我错过了它，但我在文档或示例中找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:34:51.750

> 提交是正确的，还是应该批量提交——即使这意味着一次提交多达一千个对象？

如果您有大量项目，最好一次提交几个 100 个对象而不是 1000 个。这在很大程度上取决于对象的大小，因此以各种不同的批量大小运行它并对它们进行计时将是一件好事。正如您所提到的，您需要平衡内存和数据库性能。我会对结果感到好奇，所以请用您的时间数据发表评论。

> 是一次提交一个项目的集合，还是批量提交项目集合？

*分批*做事当然更好。这对我曾经工作过的几乎每个数据库都是如此。

如果您谈论的是外部集合，那么外部对象集合与您要创建的大量对象列表之间实际上没有区别。两者都将从批处理中受益。

在创建每个外部对象后，我不会提交。我宁愿批量处理 100 个（比方说）外部对象以及它们拥有的任何相关外部对象。然后提交 100 的更改并执行下一个 100。然后将 100 更改为 200，然后尝试 50，等等。您应该看到拐点。

我回答对了吗？

> 我从哪里获得 databaseConnection 值`dao.setAutoCommit()`并`dao.commit()`要求？也许我错过了它，但我在文档或示例中找不到它。

**编辑#2：**

正如@Chad 指出的那样，我在Android 下推荐使用自动提交是错误的。尽管 Sqlite 驱动程序通常通过启动事务并在完成后提交来支持自动提交。然而，Android 似乎并不支持这一点。在 Android 数据库连接中，代码是无操作的。

在 Android 下，使用 ORMLite 执行批处理任务的正确方法是使用该[`dao.callBatchTasks(Callable)`方法](http://ormlite.com/docs/batch)。就像是：

```
accountDao.callBatchTasks(connectionSource,
  new Callable<Void>() {
    public Void call() throws SQLException {
        // insert a number of accounts at once
        for (Account account : accountsToInsert) {
           // update our account object
           accountDao.create(account);
        }
        return null;
    }
}); 
```

# mongodb - 查询以在嵌入对象中搜索

> ID：10542415
> 
> 赞同：0
> 
> 时间：2012-05-10T21:27:48.310
> 
> 标签：mongodb

我需要查询嵌入对象中包含的数据。问题是嵌入对象的结构未知。
例子：

```
{"field_1": "val_1", "embedded": {"random1": "someA" }}
{"field_1": "val_2", "embedded": {"random2": "someB" }}
{"field_1": "val_3", "embedded": {"random3": "someC" }} 
```

搜索“someB”时，我需要能够获得第二个文档

任何想法如何在具有未知结构的嵌入式文档中搜索？

ps 对于硬编码对象，我使用正则表达式查询：

```
{'$regex': '.*%s.*' % search_for} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T21:33:37.337

你将如何查询未知结构？您可能采用无模式方法太过分了。

您可能想自己创建和维护反向索引。也就是说，在单独的集合存储文档中，如下所示：

```
{value: 'someB', stored_in_object:"object id here", path:'embedded.random2'} 
```

或者也许全文搜索引擎可以在这里提供帮助。

或者您应该重新考虑您的架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T04:08:34.207

您不能将正则表达式应用于架构字段。您始终必须指定要查询的文档/子文档的完整虚线名称。否则，您需要将要搜索的内容聚合到可以查询的知名字段中。但是 MongoDB 并不是查找 all-my-crap-stored-within-my-horrible-crap-data-schema 的解决方案。

# c++ - 如何将 Windows 进程重置为以前的状态？

> ID：10542424
> 
> 赞同：4
> 
> 时间：2012-05-10T21:28:48.163
> 
> 标签：c++, c, windows, winapi, process

我有一个带有很多线程和很多复杂静态对象的大型应用程序。目前，当用户注销时，应用程序会重新启动以强制将应用程序重置为其初始状态。

此过程正在更改为 Windows 服务，因此这种方法不再可行。同样，代码太混乱了，无法正确实现在用户注销时重置状态的方法。

我在想可能有一种方法可以将整个进程的初始内存写入磁盘，然后在请求重置时加载它，但这有很多问题，例如无法保存内核模式状态。

我需要一种方法（无论多么肮脏）将此过程重置为其初始状态，而无需实际重新启动该过程。winapi 是否提供任何可以为我完成此任务的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T04:26:12.907

没有什么可以阻止 Windows 服务在一个单独的进程中完成它的实际工作，尽管承认它有点混乱。所以我建议你有两个可执行文件：一个作为服务实现的父进程和一个子进程，当你需要重置应用程序的状态时，它可以退出（并由父进程重新启动）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T21:35:51.897

Windows 在这里帮不了你。您将不得不在自己的代码中解决问题，而不是寻找灵丹妙药。你说

> 代码太乱了，无法在用户注销时正确实现重置状态的方法。

您将不得不重新考虑这一点，因为这是您唯一的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T21:56:04.370

无需重写所有内容（您应该这样做），您只需将所有当前逻辑移动到工作线程中，然后服务可以在需要时生成、终止和重新生成该线程。服务进程本身将保持运行。

# javascript - jQuery 和嵌套可选

> ID：10542426
> 
> 赞同：0
> 
> 时间：2012-05-10T21:29:06.377
> 
> 标签：javascript, jquery-ui, jquery-ui-sortable

我想创建一个包含更多嵌套列表的页面。

使用*jQueryUI selectable()*，我想选择一些容器，然后选择一些列表项。

在我的情况下，选择一个项目似乎无法正常工作。

1.  包含 div 的同时获得*ui-selecting*和*ui-selected*。
2.  单击列表项*有时有效*，但并非一直有效
3.  在主视图上禁用选择它再次正常工作。

这是 jQuryUI 的行为问题还是我的问题？

谢谢！

```
 <script src="Scripts/jquery-1.7.1.js" type="text/javascript"></script>
    <script src="Scripts/jquery-ui-1.8.18.custom.js" type="text/javascript"></script>
    <style>

    #selectable .ui-selecting { background: #FECA40; }
    #selectable .ui-selected { background: #F39814; color: white; }
    #selectable { list-style-type: none; margin: 0; padding: 0; width: 60%; }
    #selectable li { margin: 3px; padding: 0.4em; font-size: 1.4em; height: 18px; }
    </style>
    <script>
        $(function ()
        {
            $("#mainview").selectable({ filter: '.card' });
            $("#selectable").selectable();
        });

    </script>
</head>
<body>
    <div id='mainview'>
        <div id='container1' style="width: 200px; height: 250px; background-color: yellow;top=100; left=100;">
            <ol id="selectable">
                <li>Item 1</li>
                <li>Item 2</li>
            </ol>
        </div>         
    </div> 
```

# javascript - 双异步 AJAX 函数

> ID：10542429
> 
> 赞同：4
> 
> 时间：2012-05-10T21:29:21.087
> 
> 标签：javascript, jquery, ajax, asynchronous

所以我正在尝试编写一个 javascript 脚本来在我的网站上动态加载页面而不刷新页面。基本上我有一个函数可以淡出内容 div，加载新内​​容，切换内容，然后淡入。使用异步 AJAX 请求加载内容，成功时调用淡入内容的函数。淡入在加载函数和淡出函数都完成之前，函数不应运行。我希望页面在内容淡出的整个过程中都在加载，但现在我的淡出动画被冻结了。我已经尝试了很多不同的方法来解决这个问题，但到目前为止没有任何效果......

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:31:52.930

这只是等待两个事件完成并在它们都完成时采取行动的问题。请参阅[我对其他问题的回答](https://stackoverflow.com/a/10469314/157247)。基本上：

每个事件都有一个标志，最初是错误的。挂钩有问题的两个事件（动画的完成回调和 ajax 成功）。每个事件设置它的标志并调用一个函数。该函数检查标志：如果两者都设置，它会做一些事情（在你的情况下，设置新内容）。请参阅链接以获取代码示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:37:13.393

我有一个做类似事情的网站。滑出、替换内容、滑入的功能如下：

```
var loadAnAjaxArticle = function (url) {
    var removeParentArticle = function () {
        // I don't like doing this, but so far haven't found a
        // particularly elegant way to replace the article
        // when calling load(), only append it.
        $('article').first().html($('article').last().html());
    };

    var showArticle = function (response, status, xhr) {
        if (status == "error") {
            $('article').first().html('<h2>There was an error processing your request.</h2>');
            $('article').first().slideDown('slow');
        } else {
            removeParentArticle();
            $('article').first().slideDown('slow');
        }
    };

    var loadArticle = function () {
        $('article').first().load(url + ' article', showArticle);
    };

    $('article').first().slideUp('slow', loadArticle);
} 
```

基本上，它调用`.slideUp`隐藏内容，提供对另一个函数的回调。该函数调用`.load`以刷新内容，提供对另一个函数的回调。 *该*函数对 DOM 进行了一些操作以使其看起来正确（它处于开发早期，我还没有使它更优雅），并调用`.slideDown`以再次显示内容。

在这种情况下这很容易做到，因为我使用的每个函数都接受一个回调。如果您使用的功能具有相同的功能，您应该能够以这种方式链接它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T21:44:33.813

您只需要设置一个标志并让两个完成函数检查两个事件是否都已完成。无论哪个完成函数发现两者都已完成，都会触发下一个动作。

您没有向我们提供您的代码的任何细节，但总体思路如下：

```
function loadNewPage(args) {

    var fadeDone = false;
    var ajaxData;

    function processAjaxDataWhenReady() {
        // if both have completed, then process the ajaxData and start the fadeIn
        if (fadeDone && ajaxData) {
            // process the ajaxData here
            $("#myContent").fadeIn();
        }
    }

    // start the fadeOut
    $("#myContent").fadeOut(function() {
        fadeDone = true;
        processAjaxDataWhenReady();
    });

    // start the ajax call
    $.ajax({...}, function(data) {
        ajaxData = data;
        processAjaxDataWhenReady();
    })

} 
```

# .htaccess - .htaccess 替换网址？

> ID：10542434
> 
> 赞同：0
> 
> 时间：2012-05-10T21:29:49.507
> 
> 标签：.htaccess

我有一个这样的网址：

```
localhost/site/index.php?option=com_cust&tool=edit 
```

我想替换`index.php?option=com_cust&tool=edit`为`edit`. 这可能吗？我所做的尝试不起作用，例如：

```
RewriteEngine On
RewriteRule ^index.php?option=com_cust&tool=edit localhost/site/edit [L,QSA,R=301] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:51:49.307

```
RewriteRule ^site/edit site/index.php?option=com_cust&tool=edit [L] 
```

你把它倒过来了 - 重写模块所做的是它接受用户输入的内容（在本例中为“编辑”）并将其转换为您的服务器可以理解的内容（加载 index.php 并将一堆变量传递给它）。

此外，您绝对不想要外部重定向，更不用说 301 重定向了。'L' 应该是您在这里需要的唯一标志。

# javascript - 主干触发错误的路由器方法

> ID：10542441
> 
> 赞同：0
> 
> 时间：2012-05-10T21:31:09.630
> 
> 标签：javascript, json, backbone.js

我有 2 个不同的内容场景：

1.  显示带有动态网址的帖子，例如： http: [//xyz.com/my-post-title-here](http://xyz.com/my-post-title-here) http://xyz.com/2012/04/15/whatever .. 等等基本上它可以是任何东西

2.  显示一个预定义的页面，例如 [http://xyz.com/contact](http://xyz.com/contact) ，也可以是：http: [//xyz.com/contact/contact-form](http://xyz.com/contact/contact-form) <-- /contact 之后的任何内容都是要在页面上执行的操作。

我的路由器配置看起来像这样，

```
{
""                 : "pageRoute" // homepage
"*post"            : "postRoute" //<--catchall for dynamic urls
"about*action"     : "pageRoute" // these
"contact*action"   : "pageRoute" // are
"gallery*action"   : "pageRoute" // all
"home*action"      : "pageRoute" // predefined
} 
```

**问题** 唯一的问题是似乎只有 postRoute 方法被解雇了？

我也试过：“contact/:action”“contact/*action”

但没有运气。我已阅读文档，但看不到我的问题。

**编辑：回答**下面的@asawyer，使动态后路由成为配置列表中的最后一个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T21:32:31.157

使动态路由成为列表中的最后一个。

# java - Java / Android 中的 |= 是什么意思？（按位或赋值）

> ID：10542446
> 
> 赞同：0
> 
> 时间：2012-05-10T21:31:36.157
> 
> 标签：java, android, bitwise-operators

> **可能重复：**
> [Java 中的快捷方式“或赋值”（|=）运算符](https://stackoverflow.com/questions/2486472/shortcut-or-assignment-operator-in-java)

我在 Android SDK 文档中找到了以下示例代码：

```
 boolean retValue = false;
    retValue |= mActionBarHelper.onCreateOptionsMenu(menu);
    retValue |= super.onCreateOptionsMenu(menu); 
```

谁能给我看等效的代码，以演示它的作用？

注意：我假设方法调用返回一个布尔值，所以我想看一个例子，它看起来像一个 if-else 构造。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T21:32:49.660

| 应用于布尔值只是一个简单的布尔值 OR。

```
boolean retValue = false;
retValue = retValue | mActionBarHelper.onCreateOptionsMenu(menu);
retValue = retValue | super.onCreateOptionsMenu(menu); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T21:36:04.340

我自己的速记`or`并分配给我，尽管它是非短路`or`而不是逻辑`or`。因为它可以作为赋值和或：ing 的简短版本，有时与布尔值一起使用，因为没有 ||=。但重要说明：在这种情况下，即使 retValue 可能已经是，它*也会调用这两种方法*`true`

所以等效（逻辑明智）语句可以是多个，但有些是：

```
boolean a = mActionBarHelper.onCreateOptionsMenu(menu);
boolean b = super.onCreateOptionsMenu(menu);
boolean retValue =  a || b; 
```

或者

```
boolean retValue = mActionBarHelper.onCreateOptionsMenu(menu);
retValue = super.onCreateOptionsMenu(menu) || retValue; 
```

# ios - AVPlayerStatusFailed 和错误代码“无法解码”

> ID：10542448
> 
> 赞同：3
> 
> 时间：2012-05-10T21:31:43.837
> 
> 标签：ios, c4

我正在使用 C4 Alpha，遇到了两个我似乎无法解决的错误。我的代码设置如下：

```
-(void)setup {    
[self setupFrames];

m1 = [[MyMovie alloc] initWithMovieName:@"d3.mov" andFrame:iPadLandscape];
[m1 addGesture:PAN name:@"panGesture" action:@"move:"];
[self.canvas addMovie:m1];

m2 = [[MyMovie alloc] initWithMovieName:@"e2.mov" andFrame:iPadLandscape];
[m2 addGesture:PAN name:@"panGesture" action:@"move:"];
[self.canvas addMovie:m2];

m3 = [[MyMovie alloc] initWithMovieName:@"e1.mov" andFrame:iPadLandscape];
[m3 addGesture:PAN name:@"panGesture" action:@"move:"];
[self.canvas addMovie:m3];

m4 = [[MyMovie alloc] initWithMovieName:@"d4.mov" andFrame:iPodPortrait];
[m4 addGesture:PAN name:@"panGesture" action:@"move:"];
[self.canvas addMovie:m4];

m5 = [[MyMovie alloc] initWithMovieName:@"o1.mov" andFrame:iPodLandscape];
[m5 addGesture:PAN name:@"panGesture" action:@"move:"];
[self.canvas addMovie:m5];

m6 = [[MyMovie alloc] initWithMovieName:@"o2.mov" andFrame:iPodLandscape];
[m6 addGesture:PAN name:@"panGesture" action:@"move:"];
[self.canvas addMovie:m6]; 
```

}

我遇到的两个错误是：- C4 上的“AVPlayerStatusFailed”和-“无法解码，此媒体所需的解码器正忙。” 在我的画布上，加上画布中的一些视频显示为黑色方块。

我试图按照上一篇文章中给出的答案进行操作，但我不知道将其应用于 C4。

[https://stackoverflow.com/a/8621889/1362038](https://stackoverflow.com/a/8621889/1362038)

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T04:10:18.827

我研究了这个问题。

最佳答案其实是：[https ://stackoverflow.com/a/9933853/1218605](https://stackoverflow.com/a/9933853/1218605)

起初我认为这可能是 C4Movie 类的构造方式有问题，或者是因为您正在播放的媒体的种类/大小。

但是，上面的链接描述了这个问题（直接来自 Apple 的开发人员支持）：

由于硬件限制，AVFoundation 仅限于 4 个视频管道。这意味着在任何给定时间只能初始化 4 个视频播放器。

# api - 身份验证调用的 REST 设计

> ID：10542449
> 
> 赞同：0
> 
> 时间：2012-05-10T21:31:47.000
> 
> 标签：api, rest, authentication

在我的“REST API”中，我想使用一些基于令牌/基于 cookie 的身份验证。这意味着，在消费者可以使用 API 之前，消费者需要通过使用用户名/密码调用一些身份验证 URL 来获取此令牌。

只返回一个 Set-Cookie Header 可以吗？

我认为它实际上违反了 REST 原则，但是如果没有 HTTP Basic Auth（这意味着在每个请求中发送用户名/密码），你将如何做到（或设计 uris 和动词）？

也许像这样？

```
GET api/authentication/signin/?username=abc&pwd=123
GET api/authentication/signout 
```

或者？

```
GET    api/user/authtoken/?username=abc&pwd=123    (signin)
DELETE api/user/authtoken/     (signout)
GET    api/user/               (returning details of the current user) 
```

那么注册呢？

```
POST    api/user/   (which would also return an authtoken) 
```

或者？

```
GET    api/user/abc/authtoken/?pwd=123    (signin of user abc)
DELETE api/user/abc/authtoken/     (signout)
GET    api/user/abc/               (returning details of user abc) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:50:28.747

对于用户名/密码身份验证，我将使用 HTTP 基本身份验证

[http://en.wikipedia.org/wiki/Basic_access_authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)

优点是大多数 HTTP 客户端库开箱即用地支持它。如果您需要，可以使用更高级的方法（摘要、oauth 等）。我会尽量不发明自己的东西，我会避免使用饼干。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:17:41.973

我会将会话视为资源：

```
POST /sessions 
```

创建一个会话并返回一个 cookie。

```
DELETE /sessions/:sessionid 
```

删除 cookie 并注销。

```
GET /session/:sessionid 
```

检查会话是否有效（例如 Cookie 未过期或以其他方式无效）。

但我认为您还应该实现基本身份验证或其他一些标准方案，并要求您的自定义会话内容通过它进行身份验证，而 API 的其余部分也可以通过 cookie 使用会话数据。

# c# - LINQ 中的时区转换

> ID：10542450
> 
> 赞同：4
> 
> 时间：2012-05-10T21:31:47.733
> 
> 标签：c#, sql, linq, entity-framework

我已经在谷歌上搜索了一段时间，试图找到某种解决方案，但运气不佳。

我正在尝试获取一组与一天的数据相对应的记录。一天的数据价值是 4:00:00EST-3:59:59EST。当我向用户显示我的一组结果时，我希望结果显示在用户的本地时间（在我的情况下为 CST）。这通常不会那么难，除了：

*   我数据库中的时间戳都是格林威治标准时间。
*   数据库的本地时间是 EST。
*   我的当地时间是 CST。

由于数据库的时间在 EST 但记录保存在 GMT 我不能简单地调用 GETDATE() 并对其进行调整。

还值得注意的是，我在 C# 中使用 LINQ/Entity Framework 4.1 Code-First，而我正在使用的数据库是 Sybase。

那么，考虑到上述信息，什么是我将数据从 GMT 转换为用户当地时间的可靠方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T23:56:04.670

事实证明，我对此想得太多了，解决方案实际上很简单。以下链接非常有帮助：

[http://iamacamera.org/default.aspx?section=develop/code%20snippets&id=76](http://iamacamera.org/default.aspx?section=develop/code%20snippets&id=76) [http://msdn.microsoft.com/en-us/library/ms973825.aspx](http://msdn.microsoft.com/en-us/library/ms973825.aspx)

在查询数据库之前，我设置了以下变量：

```
DateTime utcBeginDateTime = DateTime.UtcNow.Date.AddHours(8);
DateTime utcEndDateTime = utcBeginDateTime.AddDays(1); 
```

这给了我**5/10/2012 8:00:00 AM 到 5/11/2012 8:00:00 AM的****UTC**时间。将其转换为 EST 相当简单：

 **```
TimeZoneInfo estZone = TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time");
DateTime cstTime = TimeZoneInfo.ConvertTimeFromUtc(utcBeginDateTime, estZone); 
```

这将给我**EST**时间**5/10/2012 4:00:00 AM**。

* * *

在我的 LINQ 查询中使用它：

```
var timeQuery = from p in db.cl_contact_event
                where p.time_of_contact >= utcBeginDateTime && p.time_of_contact < utcEndDateTime
                select new
                {
                    time = TimeZoneInfo.ConvertTimeFromUtc(p.time_of_contact.Value, estZone),
                    id = p.id
                }; 
```

除非您使用.AsEnumerable () 在客户端上运行查询，否则**TimeZoneInfo.ConvertTimeFromUtc()**可能不起作用，这毫无价值。我知道它绝对不适用于我们的 Sybase 版本。因此，我被迫尽可能多地过滤结果，调用 .AsEnumerable()，然后进行时区转换/其他逻辑。**

# android - Button color change on hover

> ID：10542451
> 
> 赞同：9
> 
> 时间：2012-05-10T21:31:51.860
> 
> 标签：android, button, colors

I'm just a beginner with Android. I want the button to change its color on mouseover.
I don't know how to do that in android. Can it be done?

View for a button:

```
<Button 
  android:id="@+id/b8"
  android:text="click me"
  style="?android:attr/buttonStyleSmall"
  android:textSize="20dp" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T10:58:29.203

我们所知道的特定鼠标悬停功能在 Android OS 4.0 及更高版本上受支持。视图有 onHoverListeners()。最后是不是很棒

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T21:39:41.480

您需要使用所谓的 a `selector`。

您可以阅读它们并从[该站点获取教程。](http://www.mkyong.com/android/android-imagebutton-selector-example/)

请记住，Android 中确实没有“悬停”的概念，因为您不能将手指悬停在显示屏上。但是您可以创建选择器，例如，当按钮具有焦点时。通常一个按钮可以具有三种状态：正常、聚焦和按下。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-17T11:18:51.217

这是xml-- hover.xml --

```
<item android:drawable="@drawable/image__hover" android:state_focused="false" android:state_pressed="true"/>
<item android:drawable="@drawable/normalimage"/> 
```

以及我如何在 Button 中使用它来更改悬停时的颜色

```
<Button
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:background="@drawable/hover"
                        ></Button> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T21:47:24.620

在 Android 上可以进行悬停：所有具有轨迹球或方向键或 QWERTY 键盘箭头键的设备都可以将“悬停”或焦点移动到任何可按下（可点击）的位置。然后，以我的 G1 为例，您按下轨迹球将其按下进入`android:state_pressed`状态。

# vba - How can I fix my "database not found" ODBC connection error when re-loading my workbook?

> ID：10542454
> 
> 赞同：1
> 
> 时间：2012-05-10T21:31:56.493
> 
> 标签：vba, excel, odbc, quickbooks

Using primarily the macro recorder, I created a VBA macro that sets up a Vendor list connection between Excel and a QuickBooks file.

```
Sub RefreshVendorList()
'
' RefreshVendorList Macro

'DatabaseName=3ae39a3bfa964f61a6f974654c1ddbe9;

Columns("C:E").Select
Selection.Delete Shift:=xlToLeft

With ActiveSheet.ListObjects.Add(SourceType:=0, Source:=Array(Array( _
    "ODBC;Driver={QB SQL Anywhere};UID=Purchasing;;ServerName=QB_data_engine_21;AutoStop=NO;" _
    ), Array("Integrated=NO;Debug=NO;DisableMultiRowFetch=NO")), Destination:= _
    Range("$C$1")).QueryTable
    .CommandText = Array( _
    "SELECT v_lst_vendor.name AS 'Vendor Name', v_lst_vendor_type.name AS 'Type', v_lst_vendor.is_hidden" & Chr(13) & "" & Chr(10) & "FROM QBReportAdminGroup.v_lst_vendor v_lst_vendor, QBReportAdminGroup.v_lst_vendor_type v_lst_vendo" _
    , _
    "r_type" & Chr(13) & "" & Chr(10) & "WHERE v_lst_vendor_type.id = v_lst_vendor.vendor_type_id AND ((v_lst_vendor.is_hidden=0) AND (v_lst_vendor_type.name='MBO'))" & Chr(13) & "" & Chr(10) & "ORDER BY v_lst_vendor.name, v_lst_vendor_type.name" _
    )
    .RowNumbers = False
    .FillAdjacentFormulas = False
    .PreserveFormatting = True
    .RefreshOnFileOpen = False
    .BackgroundQuery = True
    .RefreshStyle = xlInsertDeleteCells
    .SavePassword = False
    .SaveData = True
    .AdjustColumnWidth = True
    .RefreshPeriod = 0
    .PreserveColumnInfo = True
    .ListObject.DisplayName = "Table_PA_Vendor_List"
    .Refresh BackgroundQuery:=False
End With

'delete the "ishidden" column
Columns("E:E").Delete

End Sub 
```

I attached the code to a button so the user can update the vendor list. With the QuickBooks file open, this snippet works most of the time. This is what I would like to change, and there are two way I think it could be accomplished:

Option 1\. Every time the button is pressed (and the ODBC connection is re-created), it asks the user for the password. I would like to pass the password instead of asking the user. Changing .SavePassword to True doesn't do it.

Option 2\. I think there is a better way to set up the ODBC connection so it doesn't have to be "re-created" by a macro just to refresh it. As long as QuickBooks and this Excel file stay open, I am able to use the built-in refresh button in Excel (under Data -> Refresh All). However, if I close the Excel file and the QuickBooks file, re-open them and try pressing refresh, I get the following error, which is the reason I created a macro to re-create the ODBC connection:

![Database not found ODBC error](../Images/b469de6a45b383aec7be7c410051aa8c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T05:21:20.467

您正在使用自定义报告 ODBC 驱动程序。这由 QuickBooks 提供，仅用于报告目的。您只能在公司文件打开时使用此功能，并且每次连接时都必须输入报告用户的密码。这就是 Intuit 设计它的工作方式。

可以编写 VBA 代码来创建并保持打开 ODBC 连接，这样您就不必在每个会话中多次完成登录过程。但是，这不仅仅是要复制的代码片段；您必须有一个用于连接的全局变量并正确管理它。

一个更简单的解决方案是使用[QODBC 驱动程序](http://qodbc.com/default.htm)而不是自定义报告驱动程序。我相信您会得到一份与 QuickBooks Enterprise 捆绑在一起的副本。我假设你有企业版，因为你有自定义报告。QODBC 需要一些设置，但是一旦设置好，您应该能够避免登录提示并获得与数据库的一致连接。

# c# - 我应该如何构建我的应用程序以支持移动应用程序的

> ID：10542462
> 
> 赞同：3
> 
> 时间：2012-05-10T21:32:37.053
> 
> 标签：c#, wcf, mobile, architecture, asp.net-web-api

我正在寻求有关我的系统架构的帮助。让我概述一下：

我有一个通过一组 wcf 服务访问的 sql server 和 oracle 数据库。

这些 wcf 服务端点被许多 Web 应用程序使用。

所有应用程序都是用 .net c# 4.0 编写的。

现在需要移动应用程序（iphone 应用程序、android 应用程序）访问数据库提供的数据。

我的第一个问题是，向移动应用程序提供数据的最佳媒介是什么？我相信的选项包括通过我现有的 wcf 服务或一个包装器项目（调用现有的 wcf 服务）公开移动应用程序可以访问的 WebApi 或 MVC 控制器。针对移动应用程序消费的最佳方法的建议。考虑到移动应用程序需要小负载，并且还需要采取安全措施来防止未经授权的移动应用程序访问服务/包装器项目。

我的下一个问题是关于 WCF 服务的版本控制。我希望能够在不影响潜在包装器项目的情况下无缝更新 wcf 服务，反之亦然。由于第三方移动应用程序将处于不同的发布周期，因此需要支持多个版本。我预计这可能涉及部署应用程序的多个版本，但想知道通常如何处理这种做法？

所有应用程序都部署在 IIS 7.0 中的 Windows 服务器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:06:11.933

嗯......我很想听听其他答案，但这是我对你的问题的看法。

首先，我认为您应该将业务逻辑与 WCF 服务分离，如果您还没有这样做的话。这使您能够将 ASP.NET Web Api 服务与 WCF 服务并排设置。与其让一些 MVC 或 Web Api 调用您的 WCF，不如将其作为替代方案并排放置。

你也可以在你的 WCF 服务中创建 Json 端点，尽管我更喜欢同时拥有 WCF 和 Web Api 的想法，因为最新版本更具互操作性。如果您将所有逻辑与服务分离，它们应该变得相当简单，共享所有业务逻辑。

对于您的手机 iphone 和 android 应用程序，使用 Web Api 服务可能更容易。我在维护多个版本的服务 Api 方面经验不足，但如果您将移动应用程序连接到 Web Api 服务，则可以通过为每个 api 版本创建多个文件夹来进行版本控制。这将导致业务逻辑的重复......

正如我所说，我对其他意见很感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T12:50:05.503

如有疑问，请插入抽象。我会想象您已经构建的服务作为域服务。这些服务通过模型 (DTO) 和更新 (API) 为具有不同需求的多个客户提供服务。为了实现您可以轻松版本化并能够灵活地减少网络上的内容，请为您想要支持的屏幕引入一个层。

我建议构建一个“移动服务”，它只能依赖于域服务，并且有办法将 DTO 转换为移动消耗块。该层可以在 ASP.NET WebAPI 中，也可以在 vert.x 或 node.js 之外，以便您可以根据需要启动功能。最后，你想要的是域和消费者之间的服务契约，并在它们之间引入一个层，从长远来看，你可以利用它来替换任何一端，而不会产生巨大的成本。它允许您根据任一需要对 API 进行版本控制，而无需重新修改整个堆栈。

当然，您需要考虑一种方法，让客户端设备提前告诉您，它们需要您的服务提供哪些功能，以便您可以确定要达到的逻辑端点。这将允许您为客户端和域之间的版本协商开辟道路。

我建议查看 LinkedIn 基础架构，了解他们如何构建他们的移动应用程序（是的，他们不使用 ASP.NET，但架构模式仍然是合理的）。

我的2c。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T22:40:05.567

如果您想要移动支持，最好避免使用 WCF 并使用 Web API。原因是，虽然所有**本机**移动平台都可以使用 XML，并且在 WCF 中，您可以使用基本 HTTP 绑定来模拟旧式 Web 服务，但 Web API 提供了通过 HTTP 进行的精简和平均通信，这些平台的**浏览器**也可以使用，并且不仅仅是本机代码。

如果是移动性和互操作性，我会毫不犹豫地使用 Web API。

我只会在[某些条件下](http://byterot.blogspot.co.uk/2012/03/aspnet-web-api-series-part-0-why-not.html#wcf-vs-rest)使用 WCF 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T22:36:10.533

正如 Dante 所说，我肯定会将 JSON 视为我的数据格式。也按照建议分成 n 层。

在授权方面...

你有多少第三方应用程序？听起来您拥有的资源并不多，但如果您拥有（并且它们是真正的第三方，即不受您控制），那么您可能需要为此查看 OAUTH 解决方案。

如果您只有少数并且您可以控制，那么 IMO 就太过分了，相反，我只需要一个每个应用程序都知道的简单密钥。每个调用都会传递密钥，服务会对此进行检查。显然，所有传输都应该通过 SSL 进行，因此没有人可以窃听密钥或数据是什么。

在检查密钥方面，您需要使用方面或自定义属性来避免在每个函数上编写样板文件。

# java - 识别手势 Android

> ID：10542464
> 
> 赞同：0
> 
> 时间：2012-05-10T21:32:47.617
> 
> 标签：java, android

嗨我正在构建一个应用程序，其中用户在屏幕上绘制一个手势，然后比较 imageview 中的图像是否与绘制的手势相同并显示一条消息，如做得好或现在重试我的问题是每当图像出现并且用户绘制的内容与它在图像中显示的内容不同，它说做得很好我该如何解决这个问题？...无论如何这里是代码

```
package draw.letters;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Random;

import android.app.Activity;
import android.content.Context;
import android.gesture.Gesture;
import android.gesture.GestureOverlayView;
import android.media.AudioManager;
import android.media.SoundPool;
import android.os.Bundle;
import android.widget.ImageView;
import android.widget.Toast;
import android.gesture.GestureLibraries;
import android.gesture.GestureLibrary;
import android.gesture.Prediction;
import android.gesture.GestureOverlayView.OnGesturePerformedListener;

public class DrawlettersActivity extends Activity implements OnGesturePerformedListener {
    private SoundPool soundPool;
    private HashMap<Integer, Integer> soundsMap;
    private GestureLibrary gestureLib;
    int soundOk=1;
    int soundNot=2;

    ImageView ShowImage;

    public Integer[] showLetters={R.drawable.a,R.drawable.b,R.drawable.c,R.drawable.d,
        R.drawable.e,R.drawable.f,R.drawable.g,R.drawable.h,R.drawable.i
       ,R.drawable.j,R.drawable.k,R.drawable.l,R.drawable.m,R.drawable.n,
R.drawable.o,R.drawable.p,R.drawable.q,R.drawable.r,R.drawable.s,R.drawable.t
       ,R.drawable.u,R.drawable.v,R.drawable.w,R.drawable.x,R.drawable.y,R.drawable.z};

    Random r = new Random();
    public int index = 0;
    public String idGesture;

/** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        soundPool = new SoundPool(4, AudioManager.STREAM_MUSIC, 100);
        soundsMap = new HashMap<Integer, Integer>();
        soundsMap.put(soundOk, soundPool.load(this, R.raw.htc_notify_weight, 1));
        soundsMap.put(soundNot,soundPool.load(this, R.raw.buzzybuz, 1));
        gestureLib = GestureLibraries.fromRawResource(this, R.raw.gestures);

        //Loads the gesture library
        if (!gestureLib.load()) 
        {
            finish();
        }
        GestureOverlayView gestures = (GestureOverlayView) findViewById(R.id.gestures);
        gestures.addOnGesturePerformedListener(this);
    }//end of OnCreate() 

    //Method to create the sounds

    public void playSound(int sound) {
        AudioManager mgr = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
        float streamVolumeCurrent = mgr.getStreamVolume(AudioManager.STREAM_MUSIC);
        float streamVolumeMax = mgr.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
        float volume = streamVolumeCurrent / streamVolumeMax; 
        soundPool.play(soundsMap.get(sound), volume, volume, 1, 0, 1);
    }

    public String idImage (ImageView compara) {
    String letterGesture = null;
    switch(compara.getId()) {
    case R.drawable.a:
        letterGesture="A";
    case R.drawable.b:
        letterGesture="B";
    case R.drawable.c:
        letterGesture="C";  
    }
    return letterGesture;
    }

    public void malEscrito() {
    Toast.makeText(this, "Wrong Try Again", Toast.LENGTH_SHORT).show();
    playSound(soundNot);
    }

    public void onGesturePerformed(GestureOverlayView overlay, Gesture gestures) {
    //Calls the image to be displayed
        index= r.nextInt(26);
        ShowImage = (ImageView) findViewById(R.id.imageView1);
        ShowImage.setImageResource(showLetters[index]);
        idGesture=idImage(ShowImage);

    ArrayList<Prediction> predictions = gestureLib.recognize(gestures);
    if (predictions.size() > 0 && predictions.get(0).score > 1.0)  
        {  
            String prediction = predictions.get(0).name; 
            //compares the letters with the name of the gesture  
    if ("A".equals(prediction)) {  
                Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                //index = r.nextInt(3);
                ShowImage.setImageResource(showLetters[index]);
                playSound(soundOk);
            } else if ("B".equals(prediction)) {  
                Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                //index = r.nextInt(3);
                ShowImage.setImageResource(showLetters[index]);
                playSound(soundOk);
            } else if ("C".equals(prediction)) {  
                Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                //index = r.nextInt(3);
                ShowImage.setImageResource(showLetters[index]);
                playSound(soundOk);
            } else if ("D".equals(prediction)) {  
                Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                //index = r.nextInt(3);
                ShowImage.setImageResource(showLetters[index]);
                playSound(soundOk);
            } else if ("E".equals(prediction)) {  
                Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                //index = r.nextInt(3);
                ShowImage.setImageResource(showLetters[index]);
                playSound(soundOk);
            } else if ("F".equals(prediction)) {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("G".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("H".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("I".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("J".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("K".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("L".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("M".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("N".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
              else if ("~n".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("O".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("P".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("Q".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("R".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("S".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("T".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("U".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("V".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("W".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("X".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }
             else if ("Y".equals(prediction))  
             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }  else if ("Z".equals(prediction))  

             {  
                 Toast.makeText(this,"Well Done",Toast.LENGTH_SHORT).show();
                 //index = r.nextInt(3);
                 ShowImage.setImageResource(showLetters[index]);
                 playSound(soundOk);
             }

             else 
                {
                 malEscrito();
                }

           }
         }

} 
```

我有一些你不太明白的事情，请提前告诉我谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T23:04:19.240

我相当肯定这句话`"I".equals(prediction)`是不正确的，因为你在一个完全独立的对象类型上调用一个字符串等于`android.gesture.Prediction`。

我挖掘了一些我为与此有关的日历编写的一些代码，并且能够将其提取出来：

```
 public void onGesturePerformed(GestureOverlayView overlay,
            Gesture gesture) {
        ArrayList<Prediction> predictions = mLibrary.recognize(gesture);

        // We want at least one prediction
        if (predictions.size() > 0) {
            Prediction prediction = predictions.get(0);
            // We want at least some confidence in the result
            if (prediction.score > 1.0) {
                if (prediction.name.equals("gest_right")) {
                    // Toast.makeText(this, "previous month",
                    // Toast.LENGTH_SHORT).show();

                    userMonth.set(Calendar.DAY_OF_MONTH, 1);
                    userMonth.add(Calendar.DATE, -1);

                    // goingForward = false;
                } else {
                    // Toast.makeText(this, "next month",
                    // Toast.LENGTH_SHORT).show();

                    userMonth.set(Calendar.DAY_OF_MONTH, 1);
                    userMonth.add(Calendar.DATE, userMonth
                            .getActualMaximum(Calendar.DAY_OF_MONTH));

                    // goingForward = true;
                }
                updateCalendarUI();
            }
        } 
```

我实际上使用了谷歌的一个示例应用程序来创建我加载到 mLibrary 中的手势库；我希望这在某种程度上有所帮助......

# ios - 标题未出现在 ViewControllers 导航栏上

> ID：10542466
> 
> 赞同：13
> 
> 时间：2012-05-10T21:32:51.620
> 
> 标签：ios, uinavigationcontroller, storyboard

我目前正在使用故事板界面构建器来设计我的 GUI。

我的结构看起来像在故事板中

```
-> Navigation Controller -> Tab Bar Controller -> SomeViewController
                                               -> AnotherViewController 
```

Navigation Bar 和 Tab Bar 在 ViewControllers 中显示良好，并且标题已设置并在编辑器中可见，但在模拟中标题*消失了*。

我该如何解决这个问题？

仅供参考：`Navigation Controller`并且`Tab Bar Controller`不受任何自定义类的约束。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-10T22:11:06.437

```
self.navigationController.navigationBar.topItem.title = @"YourTitle"; 
```

只需将其放在 ViewControllers 中的 viewDidAppear 中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-02T21:47:51.560

您也可以使用此代码。

```
self.navigationController.topViewController.title=@"YourTitle"; 
```

放入 viewDidAppear 或 viewWillAppear

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-18T17:32:16.283

你只需要在 viewController 上调用它：

```
override func viewDidLoad() {
    super.viewDidLoad()
    self.title = "My Title"
} 
```

# java - 将 XML 发送到 REST WS 时出现错误 415

> ID：10542469
> 
> 赞同：2
> 
> 时间：2012-05-10T21:33:24.230
> 
> 标签：java, xml, web-services, rest

我正在尝试模拟 WS。我在 WS 中创建了以下方法

```
@POST
@Consumes (MediaType.APPLICATION_XML)
public void dataIn (InputStream inXml){
    System.out.println ("data received");

    BufferedReader br = new BufferedReader(new InputStreamReader(inXml));
    String xml = null;
    try {
        while ((xml = br.readLine())!=null){
            System.out.println(xml);
        }
    } catch (IOException e) {
        System.out.println ("ouch");
    }

} 
```

我正在通过此代码使用我的 Java 客户端发送 XML

```
 String xml = "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><rootElem name=\"xml_type\"><info>this_is_test</info></rootElem>";
    service.accept(MediaType.APPLICATION_XML).post(xml); 
```

但我得到了这个例外

`Exception in thread "main" com.sun.jersey.api.client.UniformInterfaceException: POST http://localhost:8080/project/ws/services/1.0/savedata returned a response status of 415`

我很确定我没有正确发送我的 XML。在做了几个谷歌搜索之后，我无法弄清楚我在做什么错。由于我在网上找到的大多数教程/帮助都是使用 OBJ > JAXB > XML > JAXB > OBJ 从客户端到服务器的翻译。我想发送原始 xml 并读取原始 xml。有人可以建议我在这里做错了什么吗？

* * *

我不确定回答自己的问题是否会导致 -ve 声誉。但是在偶然发现并弄清楚事情之后，我使用 Apache httpclient 发送请求并且它工作正常。我会要求结束这个问题。

```
DefaultHttpClient dhc = new DefaultHttpClient();
HttpPost postRequest = new HttpPost("http://localhost:8080/project/ws/services/1.0/savedata");
StringEntity se = new StringEntity("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><rootElem name=\"xml_type\"><info>this_is_test</info></rootElem>");
se.setContentType("application/xml");
postRequest.setEntity(se);
HttpResponse response = dhc.execute(postRequest);
System.out.println (response.getStatusLine().getStatusCode()); 
```

# php - PHP确定距离

> ID：10542472
> 
> 赞同：4
> 
> 时间：2012-05-10T21:33:39.327
> 
> 标签：php

我有一个巨大的 30x100 数组，代表一个足球场。我让玩家在里面移动。但是，当球被扔出时，我需要确定其他球员是否在轨迹的 +/-1 范围内以可能拦截传球。

由于一些（和大多数）传球是对角线抛出的，我很难弄清楚如何确定一个算法来评估这样的事情。

我的领域看起来像

```
1 2 3 4 5 6 7 ...
2
3
4
5
6
7
... 
```

字符只能从整数中移动（因此每个时刻都有一组坐标，例如 (3,2) 或 (20,90)。

找出球员是否在我的传球轨迹的某个范围内（比如传球从（2,4）到（30,15））的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T21:38:44.303

所以你有一个传球手`($x0, $y0)`，一个如果没有人接住传球就会掉下来的地方`($x1, $y1)`，还有一个潜在的接球手`($x, $y)`。您想找出接收器 at`($x, $y)`和从`($x0, $y0)`到的线之间的距离`($x1, $y1)`。

这是由这个等式给出的：

```
$d = abs( ( $x1 - $x0 ) *  ( $y0 - $y ) - ( $x0 - $x ) * ($y1 - $y0 ) ) / 
    sqrt( pow( $x1 - $x0, 2 ) + pow ($y1 - $y0, 2 ) ); 
```

[你可以在这里](http://mathworld.wolfram.com/Point-LineDistance2-Dimensional.html)找到一个推导。

但是，这只会让您到达（无限长）*line*的距离，这可能在包含 pass的*线段之外。*要获得正确答案，请在此处查看 Grumdrig 的答案：[点与线段之间的最短距离](https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T21:40:32.273

将传球者平移到原点，将球的轨迹旋转到X轴，然后检查路径附近的球员（即相同的x坐标符号）的y坐标是否在-1和1之间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T21:35:57.347

[极坐标系](http://en.wikipedia.org/wiki/Polar_coordinate_system)是要走的路。

# sencha-touch - 如何将 JavaScript 代码转换为 sencha touch 2

> ID：10542475
> 
> 赞同：2
> 
> 时间：2012-05-10T21:34:11.340
> 
> 标签：sencha-touch, sencha-touch-2

我正在使用 sencha touch 2 查找商店，我点击此链接[https://developers.google.com/maps/articles/phpsqlsearch_v3](https://developers.google.com/maps/articles/phpsqlsearch_v3)

现在我有一些 Javascript + html 文件代码如下所示：-

```
 <script type="text/javascript">
    //<![CDATA[
    var map;
    var markers = [];
    var infoWindow;
    var locationSelect;

    function load() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(40, -100),
        zoom: 4,
        mapTypeId: 'roadmap',
        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU}
      });
      infoWindow = new google.maps.InfoWindow();

      locationSelect = document.getElementById("locationSelect");
      locationSelect.onchange = function() {
        var markerNum = locationSelect.options[locationSelect.selectedIndex].value;
        if (markerNum != "none"){
          google.maps.event.trigger(markers[markerNum], 'click');
        }
      };
   }

   function searchLocations() {
     var address = document.getElementById("addressInput").value;
     var geocoder = new google.maps.Geocoder();
     geocoder.geocode({address: address}, function(results, status) {
       if (status == google.maps.GeocoderStatus.OK) {
        searchLocationsNear(results[0].geometry.location);
       } else {
         alert(address + ' not found');
       }
     });
   }

   function clearLocations() {
     infoWindow.close();
     for (var i = 0; i < markers.length; i++) {
       markers[i].setMap(null);
     }
     markers.length = 0;

     locationSelect.innerHTML = "";
     var option = document.createElement("option");
     option.value = "none";
     option.innerHTML = "See all results:";
     locationSelect.appendChild(option);
   }

   function searchLocationsNear(center) {
     clearLocations(); 

     var radius = document.getElementById('radiusSelect').value;
     var searchUrl = 'phpsqlsearch_genxml.php?lat=' + center.lat() + '&lng=' + center.lng() + '&radius=' + radius;
     downloadUrl(searchUrl, function(data) {
       var xml = parseXml(data);
       var markerNodes = xml.documentElement.getElementsByTagName("marker");
       var bounds = new google.maps.LatLngBounds();
       for (var i = 0; i < markerNodes.length; i++) {
         var name = markerNodes[i].getAttribute("name");
         var address = markerNodes[i].getAttribute("address");
         var distance = parseFloat(markerNodes[i].getAttribute("distance"));
         var latlng = new google.maps.LatLng(
              parseFloat(markerNodes[i].getAttribute("lat")),
              parseFloat(markerNodes[i].getAttribute("lng")));

         createOption(name, distance, i);
         createMarker(latlng, name, address);
         bounds.extend(latlng);
       }
       map.fitBounds(bounds);
       locationSelect.style.visibility = "visible";
       locationSelect.onchange = function() {
         var markerNum = locationSelect.options[locationSelect.selectedIndex].value;
         google.maps.event.trigger(markers[markerNum], 'click');
       };
      });
    }

    function createMarker(latlng, name, address) {
      var html = "<b>" + name + "</b> <br/>" + address;
      var marker = new google.maps.Marker({
        map: map,
        position: latlng
      });
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
      markers.push(marker);
    }

    function createOption(name, distance, num) {
      var option = document.createElement("option");
      option.value = num;
      option.innerHTML = name + "(" + distance.toFixed(1) + ")";
      locationSelect.appendChild(option);
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request.responseText, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function parseXml(str) {
      if (window.ActiveXObject) {
        var doc = new ActiveXObject('Microsoft.XMLDOM');
        doc.loadXML(str);
        return doc;
      } else if (window.DOMParser) {
        return (new DOMParser).parseFromString(str, 'text/xml');
      }
    }

    function doNothing() {}

    //]]>
  </script>
  </head>
  <body style="margin:0px; padding:0px;" onload="load()"> 
    <div>
     <input type="text" id="addressInput" size="10"/>
    <select id="radiusSelect">
      <option value="25" selected>25mi</option>
      <option value="100">100mi</option>
      <option value="200">200mi</option>
    </select>
    <input type="button" onclick="searchLocations()" value="Search"/>
    </div>
    <div><select id="locationSelect" style="width:100%;visibility:hidden"></select></div>
    <div id="map" style="width: 100%; height: 80%"></div>
  </body>
</html> 
```

我转换了几乎所有代码都在 sencha touch 但它不起作用。到目前为止，这是我的代码

```
 var map;
    var markers = [];
    var infoWindow;
    var locationSelect;

    function load() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(40, -100),
        zoom: 4,
        mapTypeId: 'roadmap',
        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU}
      });
      infoWindow = new google.maps.InfoWindow();

      locationSelect = document.getElementById("locationSelect");
      locationSelect.onchange = function() {
        var markerNum = locationSelect.options[locationSelect.selectedIndex].value;
        if (markerNum != "none"){
          google.maps.event.trigger(markers[markerNum], 'click');
        }
      };
   }

   function searchLocations() {
     var address = document.getElementById("addressInput").value;
     var geocoder = new google.maps.Geocoder();
     geocoder.geocode({address: address}, function(results, status) {
       if (status == google.maps.GeocoderStatus.OK) {
        searchLocationsNear(results[0].geometry.location);
       } else {
         alert(address + ' not found');
       }
     });
   }

   function clearLocations() {
     infoWindow.close();
     for (var i = 0; i < markers.length; i++) {
       markers[i].setMap(null);
     }
     markers.length = 0;

     locationSelect.innerHTML = "";
     var option = document.createElement("option");
     option.value = "none";
     option.innerHTML = "See all results:";
     locationSelect.appendChild(option);
   }

   function searchLocationsNear(center) {
     clearLocations(); 

     var radius = document.getElementById('radiusSelect').value;
     var searchUrl = 'phpsqlsearch_genxml.php?lat=' + center.lat() + '&lng=' + center.lng() + '&radius=' + radius;
     downloadUrl(searchUrl, function(data) {
       var xml = parseXml(data);
       var markerNodes = xml.documentElement.getElementsByTagName("marker");
       var bounds = new google.maps.LatLngBounds();
       for (var i = 0; i < markerNodes.length; i++) {
         var name = markerNodes[i].getAttribute("name");
         var address = markerNodes[i].getAttribute("address");
         var distance = parseFloat(markerNodes[i].getAttribute("distance"));
         var latlng = new google.maps.LatLng(
              parseFloat(markerNodes[i].getAttribute("lat")),
              parseFloat(markerNodes[i].getAttribute("lng")));

         createOption(name, distance, i);
         createMarker(latlng, name, address);
         bounds.extend(latlng);
       }
       map.fitBounds(bounds);
       locationSelect.style.visibility = "visible";
       locationSelect.onchange = function() {
         var markerNum = locationSelect.options[locationSelect.selectedIndex].value;
         google.maps.event.trigger(markers[markerNum], 'click');
       };
      });
    }

    function createMarker(latlng, name, address) {
      var html = "<b>" + name + "</b> <br/>" + address;
      var marker = new google.maps.Marker({
        map: map,
        position: latlng
      });
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
      markers.push(marker);
    }

    function createOption(name, distance, num) {
      var option = document.createElement("option");
      option.value = num;
      option.innerHTML = name + "(" + distance.toFixed(1) + ")";
      locationSelect.appendChild(option);
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request.responseText, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function parseXml(str) {
      if (window.ActiveXObject) {
        var doc = new ActiveXObject('Microsoft.XMLDOM');
        doc.loadXML(str);
        return doc;
      } else if (window.DOMParser) {
        return (new DOMParser).parseFromString(str, 'text/xml');
      }
    }

    function doNothing() {}

Ext.Loader.setConfig({
    enabled:true
});
    Ext.application({
        name: 'sencha',
        launch: function(){
            var formPanel = Ext.create('Ext.form.Panel', {
            fullscreen: true,

            items: [{
                    xtype: 'fieldset',
                    title: 'Search Stores',

                    items: [
                        {
                            xtype: 'textfield',
                            name : 'name',
                            label: 'Adress',
                            id: 'addressInput',
                            placeHolder: 'Enter City & State or ZIP code'
                        },
                       {
                            xtype: 'selectfield',
                            label: 'Radius:',
                            options: [
                                {text: '25mi',  value: '25'},
                                {text: '100mi', value: '100'},
                                {text: '200mi',  value: '200'}
                            ]
                        },
                        {
                            xtype: 'selectfield',
                            hidden:true,
                            id:'locationSelect',
                            label: 'Radius:',
                        },
                        {
                              xtype: 'button',
                              text: 'Search',
                              ui: 'confirm',
                              listeners : {
                                  tap : function() {
                                    searchLocations()
                                  }
                              }
                        } 
                    ]
            }]
            });

        }
}); 
```

所以，请让我建议我能做什么？非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T02:42:06.663

请让地图示例正常工作：[地图示例](http://docs.sencha.com/touch/2-0/#!/example/maps "地图示例")

从那个起点你应该能够添加你需要的功能。

您需要使用 Sencha-Touch 地图对象设置地图。

# sql - 如何优化以下 SQL 函数

> ID：10542482
> 
> 赞同：0
> 
> 时间：2012-05-10T21:34:37.863
> 
> 标签：sql, sql-server

我正在尝试编写一个可以根据某些日期返回 true 或 false 或 0 或 1 的函数。因此，假设您要检查开始和结束日期，例如“2010 年 3 月 1 日”和“2010 年 3 月 2 日”是否在日期范围内。因此，如果您的日期范围是“2012 年 1 月 1 日 - 2012 年 12 月 30 日”，它将返回 true，否则如果日期范围是“2011 年 1 月 1 日”至 2011 年 12 月 30 日，那么它将返回 false。

目前我使用以下，我觉得它没有优化，当你多次调用它时需要一些时间。

```
CREATE FUNCTION dbo.tmpfnIsDateInRange (@rangeStart    DATETIME, 
                                     @rangeEnd      DATETIME, 
                                     @chkStart      DATETIME, 
                                     @chkEnd        DATETIME) 
   RETURNS TINYINT 
AS 
   BEGIN 
      RETURN CASE 
                WHEN @chkStart BETWEEN @rangeStart AND @rangeEnd 
                     OR @chkEnd BETWEEN @rangeStart AND @rangeEnd 
                THEN 
                   1 
                WHEN @chkStart <= @rangeStart AND @chkEnd >= @rangeEnd 
                THEN 
                   1 
                ELSE 
                   0 
             END; 
   END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:39:08.293

如果您正在寻找范围重叠，正确的测试将是：

```
return case when @chkStart <= @rangeEnd 
             and @chkEnd >= @rangeStart
            then 1
            else 0
            end 
```

如果两个范围以任何方式重叠，则此表达式返回 true。

编辑：[这里的讨论写得比我做的好得多](https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap/325964#325964)。

但最大的收获是完全删除函数，并直接使用这个表达式（保存案例部分）作为查询中的过滤器，因为这将使查询优化器能够按照其名称进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T22:08:01.843

千万不要在这种情况下使用该功能！！直接在您的 sql 中执行并查看差异，这是因为 sql 索引不适用于 sql 函数！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T22:16:37.280

我要看的一件事是您实际上是在查看“完全”重叠还是部分重叠。

例如：如果您检查范围为 3 月 2 日至 3 月 4 日，3 月 1 日至 3 月 3 日是否会返回 true？

如果是这种情况，您必须对“部分”重叠进行更多检查。

无论哪种情况，您都应该删除该功能。

# php - 如果目录包含不同的文件类型，请检查 php

> ID：10542484
> 
> 赞同：2
> 
> 时间：2012-05-10T21:34:52.937
> 
> 标签：php, glob

检查给定目录是否包含 *.png 和 *.mp4 等的最佳方法是什么？如果所有这些文件类型都在目录中，我只想要一个真正的返回。

这是我当前的代码，它不起作用。如果我只使用一种文件类型，它可以工作，但不会返回错误：

```
var_dump(glob($video_dir.'*.txt,.jpg', GLOB_BRACE)); 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T21:51:53.997

```
// function to find files with specified extensions in a folder
function has_the_files( $dir, $extensions = array() ) { 
    if ( empty( $extensions ) || ! is_array( $extensions ) || ! is_dir( $dir ) ) return false;
    foreach ( $extensions as $ext ) if ( count( glob( $dir . '/*.' . $ext ) ) > 0 ) $found[$ext] = 1;
    return ( count( $found ) == count( $extensions ) ) ? true : false;
}

// use it like
$dir = dirname(__FILE__) . '/images'; //absolute path to the directory you wanna test
$extensions = array('jpg','png'); // an array containing the file extensions you seek for
var_dump( has_the_files( $dir, $extensions ) ); // outputs: bool(false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:46:17.047

使用`GLOB_BRACE`时必须使用方括号`{}`。以下代码应该可以工作：

```
var_dump(glob($video_dir.'{*.txt,*.jpg}', GLOB_BRACE)); 
```

# plone - archetypes.schemaextender：可能有 default_method

> ID：10542486
> 
> 赞同：2
> 
> 时间：2012-05-10T21:34:58.530
> 
> 标签：plone

Archetypes API 提供`default_method()`以编程方式填充初始值。

然而，由于这是一个类方法，它不适合archetypes.schemaextender。扩展器的等效方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T05:18:15.927

如果没有 field.default 或 field.default_method，您可以使用 IFieldDefaultProvider 适配器。请参阅 Archetypes.Field.Field 类中的这段代码，getDefault 方法：

```
if not self.default:
    default_adapter = component.queryAdapter(instance, IFieldDefaultProvider, name=self.__name__)
    if default_adapter is not None:
        return default_adapter() 
```

还有 IFieldDefaultProvider：

```
class IFieldDefaultProvider(Interface):
    """Register a named adapter for your content type providing
    this interface, with a name that is equal to the name of a
    field. If no default or default_method is set on that field
    explicitly, Archetypes will find and call this adapter.
    """

    def __call__():
        """Get the default value. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-13T10:52:38.700

这是使用 Mixin 类处理 archetypes.schemaextender 时 default_method() 的解决方案。字段初始值的代码应该在这样一个 mixin 类中名为“ *getDefault* ”的方法中，您将其放在扩展字段的声明之前：

```
class ProvideDefaultValue:
""" Mixin class to populate an extention field programmatically """

    def getDefault(self, instance):
        """ Getting value from somewhere (in this ex. from same field of the parent) """
        parent = aq_parent(instance)
        if hasattr(parent, 'getField'):
            parentField = parent.getField(self.__name__)
            if parentField is not None:
                return parentField.getAccessor(parent) 
```

现在您可以将此方法包含在相应的扩展类声明中：

```
class StringFieldPrefilled(ExtensionField, ProvideDefaultValue, atapi.StringField):
    """ Extention string field, with default value prefilled from parent. """ 
```

注意：您不需要在扩展模式字段定义中添加 default_method。

# python - Python编程内存泄漏？也许？文件搜索和销毁脚本

> ID：10542490
> 
> 赞同：-2
> 
> 时间：2012-05-10T21:35:20.527
> 
> 标签：python, memory, memory-leaks

我有一个 python 脚本，可以搜索目录中的文件，并在计算机运行时无限执行。这是代码：

```
import fnmatch
import os
import shutil
import datetime
import time
import gc
# This is a python script that removes the "conflicted" copies of
# files that dropbox creates when one computer has the same copy of
# a file as another computer. 
# Written by Alexander Alvonellos
# 05/10/2012

class cleanUpConflicts:
    rootPath = 'D:\Dropbox'
    destDir = 'D:\Conflicted'
    def __init__(self):
        self.removeConflicted()
        return

    def cerr(message):
        f = open('./LOG.txt', 'a')
        date = str(datetime.datetime.now())
        s = ''
        s += date[0:19] #strip floating point
        s += ' : '
        s += str(message)
        s += '\n'
        f.write(s)
        f.close()
        del f
        del s
        del date
        return

    def removeConflicted(self):
        matches = []
        for root, dirnames, filenames in os.walk(self.rootPath):
            for filename in fnmatch.filter(filenames, '*conflicted*.*'):
                matches.append(os.path.join(root, filename))
                cerr(os.path.join(root, filename))
                shutil.move(os.path.join(root, filename), os.path.join(destDir, filename))
        del matches
            return

def main():
    while True:
        conf = cleanUpConflicts()
        gc.collect()
        del conf
        reload(os)
        reload(fnmatch)
        reload(shutil)
        time.sleep(10)
    return

main() 
```

反正。有一个内存泄漏，每十秒左右增加近 1 兆。我不明白为什么没有释放内存。到最后，这个脚本会不断地吃掉内存，甚至不用尝试。这令人沮丧。有人有任何提示吗？我什么都试过了，我想。

这是进行此处建议的一些更改后的更新版本：

```
import fnmatch
import os
import shutil
import datetime
import time
import gc
import re
# This is a python script that removes the "conflicted" copies of 
# files that dropbox creates when one computer has the same copy of
# a file as another computer. 
# Written by Alexander Alvonellos
# 05/10/2012

rootPath = 'D:\Dropbox'
destDir = 'D:\Conflicted'

def cerr(message):
    f = open('./LOG.txt', 'a')
    date = str(datetime.datetime.now())
    s = ''
    s += date[0:19] #strip floating point
    s += ' : '
    s += str(message)
    s += '\n'
    f.write(s)
    f.close()
    return

def removeConflicted():
    for root, dirnames, filenames in os.walk(rootPath):
        for filename in fnmatch.filter(filenames, '*conflicted*.*'):
            cerr(os.path.join(root, filename))
            shutil.move(os.path.join(root, filename), os.path.join(destDir, filename))
return

def main():
    #while True:
    for i in xrange(0,2):
        #time.sleep(1)
        removeConflicted()
        re.purge()
        gc.collect()
    return
main() 
```

我已经对这个问题进行了一些研究，似乎 fnmatch 中可能存在一个错误，它有一个使用后不会清除的正则表达式引擎。这就是我调用 re.purge() 的原因。我已经修改了几个小时了。

我还发现这样做：

```
print gc.collect() 
```

每次迭代返回 0。

谁对我投了反对票，显然是错误的。我真的需要一些帮助。这是我正在谈论的链接：[为什么我用这个 python 循环泄漏内存？](https://stackoverflow.com/questions/2184063/why-am-i-leaking-memory-with-this-python-loop)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:58:55.223

猜测一下，有些东西会保留对每次主迭代创建的实例的引用。

建议：

1.  放下课程并制作1-2个功能
2.  丢火柴；不使用？
3.  查看 inotify (Linux) 或类似的 Windows；它可以监视目录并仅在需要时采取行动；没有连续扫描

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T22:44:00.320

您的代码可以缩短为：

```
import fnmatch
import os
import shutil
import datetime
import time

ROOT_PATH = r'D:/Dropbox'
DEST_DIR = r'D:/Conflicted'

def cerr(message, log):
    date = str(datetime.datetime.now())
    msg = "%s : %s\n" % (date[0:19], message)
    log.write(msg)

def removeConflicted(log):
    for root, dirnames, filenames in os.walk(ROOT_PATH):
        for filename in fnmatch.filter(filenames, '*conflicted*.*'):
            # 1: comment out this line and check for leak
            cerr(os.path.join(root, filename), log)
            # 2: then comment out this line instead and check
            shutil.move(
                os.path.join(root, filename), 
                os.path.join(DEST_DIR, filename))

def main():
    with open('./LOG.txt', 'a') as log:
        while True:
            print "loop"
            removeConflicted(log)
            time.sleep(10)

if __name__ == "__main__":
    main() 
```

如果没有要处理的文件，请查看是否发生内存泄漏。也就是说，将其指向空目录并确定在移动时是否发生泄漏。
您不需要`re.purge()`or 来弄乱`gc`模块。

# python - 使用 Flask 蓝图，如果指定了子域，如何修复 url_for 中断？

> ID：10542493
> 
> 赞同：10
> 
> 时间：2012-05-10T21:35:33.443
> 
> 标签：python, routes, flask

在烧瓶蓝图中，我有：

```
frontend = Blueprint('frontend', __name__) 
```

我的索引函数的路径是：

```
@frontend.route('/')
def index():
  #code 
```

这工作正常，但我正在尝试向路由添加一个子域，如下所示：

```
@frontend.route('/', subdomain='<var>')
def index(var): 
```

但这会破坏应用程序并且浏览器会吐出（除其他外）：

```
werkzeug.routing.BuildError
BuildError: ('frontend.index', {}, None) 
```

我的代码在*url_for('frontend.index')的几个地方调用了 frontend.index*

当我包含子域时，如何让 url_for 工作？我能找到并且我认为可能相关的文件中唯一的内容是[http://flask.pocoo.org/docs/api/](http://flask.pocoo.org/docs/api/)下的内容：

> 为了集成应用程序，Flask 有一个钩子，可以通过 Flask.build_error_handler 拦截 URL 构建错误。当当前应用程序没有给定端点和值的 URL 时，url_for 函数会导致 BuildError。当它这样做时，current_app 调用它的 build_error_handler 如果它不是 None，它可以返回一个字符串以用作 url_for 的结果（而不是 url_for 的默认值以引发 BuildError 异常）或重新引发异常。一个例子：

```
def external_url_handler(error, endpoint, **values):
    "Looks up an external URL when `url_for` cannot build a URL."
    # This is an example of hooking the build_error_handler.
    # Here, lookup_url is some utility function you've built
    # which looks up the endpoint in some external URL registry.
    url = lookup_url(endpoint, **values)
    if url is None:
        # External lookup did not have a URL.
        # Re-raise the BuildError, in context of original traceback.
        exc_type, exc_value, tb = sys.exc_info()
        if exc_value is error:
            raise exc_type, exc_value, tb
        else:
            raise error
    # url_for will use this result, instead of raising BuildError.
    return url

app.build_error_handler = external_url_handler 
```

但是，我是 python（和编程）的新手，无法理解我将把这段代码放在哪里，或者当发生构建错误时我将如何调用该函数。

任何见解将不胜感激:)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T19:08:12.203

首先，要使用子域，您需要为 SERVER_NAME[配置](http://flask.pocoo.org/docs/config/)设置一个值：

```
app.config['SERVER_NAME'] = 'example.net' 
```

你有这样的看法：

```
frontend = Blueprint('frontend', __name__)
@frontend.route('/', subdomain='<var>')
def index(var):
    return ... 
```

为了重建这个视图的 URL，Flask 需要一个*var*的值。`url_for('frontend.index')`将失败，因为它没有足够的值。使用上面的 SERVER_NAME，`url_for('frontend.index', var='foo')`将返回`http://foo.example.net/`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-16T10:55:49.070

在 中添加蓝图名称`url_for`。例子：

```
url_for('pay_sermepa.sermepa_cancel', _external=True) 
```

*   `pay_sermepa`: 蓝图名称
*   `sermepa_cancel`： 路线

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-16T22:27:56.347

我不认为这是 Flask 的问题。

您提供了两个具有相同方法名称的函数：

```
@frontend.route('/')
def index():
  #code 
```

和

```
@frontend.route('/', subdomain='<var>')
def index(var): 
```

它们的包装方式不同，但是当调用 flask.build_url 时，由于函数名重载而抛出异常。乍一看，这似乎是不正确的。

尝试为第二个提供不同的函数名称，例如

```
@frontend.route('/', subdomain='<var>')
def index_var(var): 
```

这可能会解决您的问题。不过我还没有测试过。

# ios - UIColor colorWithPatternImage：在 JPG 文件上失败 - 但 UIImage 可以正常加载 JPG？

> ID：10542494
> 
> 赞同：0
> 
> 时间：2012-05-10T21:35:35.603
> 
> 标签：ios, uiimage

带文件：

```
file1.JPG
file2.png 
```

加载 JPG 作为背景失败：

```
(UITextfield).backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:"file1"]]; 
```

加载PNG作品：

```
(UITextfield).backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:"file2"]]; 
```

将 JPG 拖放到 Interface Builder UIView 中即可。

但是初始化 UIImageView 失败：

```
[[UIImageView alloc] initWithImage:[UIImage imageNamed:"file1"]]; 
```

嗯？这对我来说毫无意义:(。这是在 iPad3 / iOS 5.1 上。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:47:57.907

自我回答...... Xcode 中的一些错误与区分大小写有关，再加上 UIImage 不支持“jpg”作为自动文件扩展名。

1.  Xcode 将“a.JPG”和“a.jpg”视为同一个文件——即使它们不是（Mac 有区分大小写的文件系统）
2.  如果您尝试重命名文件并仅更改其大小写，Xcode 就会崩溃。哎哟。

更远：

1.  “file1”只会检查“.png”（和@2x等）......而不是“.jpg”（哎呀，我忘记了！）

最后：

1.  出于某种奇怪的原因，我的 UIImageView 不再显示任何图像。我认为 Interface Builder 存在一个单独的问题:(

# opengl - 制作平滑的 OpenGL 鼠标相机

> ID：10542498
> 
> 赞同：0
> 
> 时间：2012-05-10T21:36:03.060
> 
> 标签：opengl, camera, mouse

所以我浏览了一些相机类，但它们似乎都没有解决这样一个事实，即即使你的鼠标碰到屏幕边缘，你也应该能够继续旋转。过去我一直在做一项黑客工作以使其工作，但我想知道实际做这件事的正确方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:37:11.210

最好的方法是在实际鼠标光标移动时将其重新定位到屏幕中心，并且显然也将其隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T00:13:00.437

最好的方法是使用鼠标 api，它可以为您提供相对和绝对的鼠标移动。“绝对”是当前光标位置，“相对”是指当前位置与前一个位置之间的差异。对于旋转相机（当光标位于边缘时），您应该使用“相对”鼠标移动。

SDL 可以做到这一点（但前提是它“抓取”了鼠标），而 DirectInput 也可以做到这一点。不过，我不记得是否可以通过标准系统 API 获得“相对光标移动”数据。

# .net - 为不同网站创建可重用模板的最佳方法

> ID：10542499
> 
> 赞同：0
> 
> 时间：2012-05-10T21:36:03.413
> 
> 标签：.net, templates

我已经使用 TSQL 和库创建了应​​用程序。现在我正在库中生成客户端内容（带有值的硬编码 html），但我想只保留数据库逻辑。

创建可根据返回的 DB 值动态运行的可重用 .net 组件的最佳方法是什么？我还没有找到任何正常的方法来做到这一点，只需手动跨站点复制组件即可。

有没有办法创建将处理模板的库，它将从数据库逻辑导入数据并将最终结果返回到客户端？所以我不必将 html 布局硬编码到库中。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:39:52.070

我认为您正在寻找的是自定义服务器控件。这些是您可以放入单独的程序集中并在多个项目中使用的控件。学习曲线有点陡峭，但绝对值得花时间学习。

这应该可以帮助您入门：[开发自定义 ASP.NET 服务器控件](http://msdn.microsoft.com/en-us/library/zt27tfhy.aspx)

# iphone - 持续报告用户位置和谷歌纵横的最佳实践

> ID：10542503
> 
> 赞同：1
> 
> 时间：2012-05-10T21:36:11.743
> 
> 标签：iphone, ios

我需要制作将用户位置报告给后端服务器的应用程序。我有两个选择：

*   重大变化：我试过这个，但准确性低于我正在寻找的。
*   背景位置更新：准确度还可以，但是会消耗电池，Apple 不推荐，仅适用于少数应用程序。

我想知道是否有一种方法可以提供良好的准确性但不会耗尽电池电量。例如，我注意到谷歌纵横应用程序具有良好的准确性，但对电池没有明显影响。

任何想法？

# java - 忽略反序列化中的计算字段

> ID：10542504
> 
> 赞同：3
> 
> 时间：2012-05-10T21:36:16.083
> 
> 标签：java, json, jackson, pojo

我有一堂课：

```
class MyClass {
  @Getter
  @Setter
  int a;

  @Getter
  @Setter
  int b;

  public int getADivB() {
    return a / b;
  }
} 
```

序列化时，我需要序列化所有三个属性。但是，如果另一个 java 进程正在反序列化消息，我希望杰克逊忽略计算的字段。（不要像@JSONIgnore 一样忽略它）

反序列化代码为：

```
String json = ... //get json from message
JsonNode root = this.mapper.readTree(json);
MyClass abdiv = this.mapper.readValue(root, MyClass.class); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T22:58:26.317

你需要的是注释计算的属性，`@JsonProperty` 所以它看起来像这样：

```
class MyClass {
  @Getter
  @Setter
  int a;

  @Getter
  @Setter
  int b;

  @JsonProperty
  public int getADivB() {
    return a / b;
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T11:27:49.907

你可以用注释你的类

```
@JsonIgnoreProperties(ignoreUnknown = true) 
```

在反序列化期间让杰克逊忽略该属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T21:56:25.927

序列化不会序列化方法中的a/b，只会序列化成员字段

# java - UserType / Hibernate / JodaTime - 在哪里设置 UserType 全局属性？

> ID：10542507
> 
> 赞同：6
> 
> 时间：2012-05-10T21:37:10.370
> 
> 标签：java, hibernate, jodatime, usertype

我正在使用`org.jadira.usertype.dateandtime.joda.PersistentDateTime` UserType 3.0.0.RC1 中的类将 JodaTime 映射`DateTime`到 Hibernate。[该类的 Javadocs](http://usertype.sourceforge.net/apidocs/org/jadira/usertype/dateandtime/joda/PersistentDateTime.html)提到我想设置“databaseZone”和“jvmZone”属性，但我在 UserType 文档中找不到任何指示如何执行此操作的内容。我发现[这个线程](https://forum.hibernate.org/viewtopic.php?f=1&t=1003520)似乎暗示这些是由 XML 设置的，类似于以下内容：

```
<prop key="jadira.usertype.autoRegisterUserTypes">true</prop>
<prop key="jadira.usertype.databaseZone">jvm</prop> 
```

我尝试将这些添加到我的休眠配置中，但这只是给出了一个错误。有谁知道这个配置需要去哪里？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T11:17:33.243

这些设置确实可以放在休眠配置中，如下所示：

```
<session-factory>

    <!-- Database connection settings -->
    <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="connection.url">jdbc:mysql://localhost:3306/SOME_DATABASE</property>
    <property name="connection.username">root</property>
    <property name="connection.password">password</property>

    ...

    <property name="jadira.usertype.databaseZone">UTC</property>
    <property name="jadira.usertype.javaZone">UTC</property>

</session-factory> 
```

结果我实际上错误地引用了旧版本的 UserType 库，它不支持这些属性。哦！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:23:03.600

这些设置需要进入您的`persistence.xml`.

[此处](https://stackoverflow.com/a/10239179/59015)显示了一个示例

# node.js - npm 模块测试

> ID：10542512
> 
> 赞同：1
> 
> 时间：2012-05-10T21:37:14.973
> 
> 标签：node.js, npm

我计划在野外发布一个 Node 模块，并且想知道我是否应该包括专门为与测试框架（即 mocha）一起使用而编写的测试或使用常规节点运行的测试（即 node test.js）。

对此有何共识？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:46:04.450

跟随生态系统中一些最大的项目，你不能走得太远

[https://github.com/visionmedia/express/tree/master/test](https://github.com/visionmedia/express/tree/master/test) https://github.com/senchalabs/connect/tree/master/test [https://github.com/LearnBoost/websocket.io/tree/主/测试](https://github.com/LearnBoost/websocket.io/tree/master/test)

# html - 为什么这个 HTML 表单无效？

> ID：10542517
> 
> 赞同：1
> 
> 时间：2012-05-10T21:37:35.737
> 
> 标签：html, forms, validation

嗨，最近我开始了一门课程，我已经能够解决我所有其他验证错误，但我不明白为什么这不会用 w3 验证？

```
<div id="conform">
<form method="post" action="" id="form1">
 Name:  <input type="text" name="first_name" /><br></br>
Subject: <input type="text" name="department" id="department"/><br></br>
    Department:
     Sales  <input type="radio" name="red" id="red"/>
     Support    <input type="radio" name="amber" id="amber"/>
     Other  <input type="radio" name="red" id="green"/><br></br>
     Content:   <textarea name="details" id="messagedetails" cols="30">
     </textarea><br></br>
     <input type="submit"  value="Submit"/>
</form>
</div> 
```

如果有人可以向我解释这个..谢谢

嗨，我应该补充一下，这些是我遇到的主要错误；[http://puu.sh/u1Oo](http://puu.sh/u1Oo)

他们都与此相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:49:09.190

如果你想知道*为什么*它不能通过 w3c 验证，我建议你访问这个网站：

[http://validator.w3.org/check](http://validator.w3.org/check)

他们非常清楚为什么这是错误的。另外，看到他们的报告，我很惊讶浏览器完全可以理解 HTML =p

**编辑**您留下的错误是因为在 HTML 中您应该使用块级元素（例如 div、p 等）将文本和输入字段括起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:43:23.140

break 是一个自闭合标签，也就是说，`<br></br>`你可以只使用`<br/>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T21:47:10.397

您没有发布文档类型，所以我将假设 HTML5。

1.  它缺少语义标记，例如元信息和必需的属性。
2.  结果没有位置（如果这是在做遗留回发，则可能不适用）
3.  见原因 1 和 2

*更新*

有关上述要点，请参阅以下链接：

[http://www.html5rocks.com/en/tutorials/forms/html5forms/](http://www.html5rocks.com/en/tutorials/forms/html5forms/)

[http://www.w3schools.com/html5/html5_form_attributes.asp](http://www.w3schools.com/html5/html5_form_attributes.asp)

[http://www.w3schools.com/html5/html5_reference.asp](http://www.w3schools.com/html5/html5_reference.asp)

[http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-cross-browser-html5-forms/](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-cross-browser-html5-forms/)

[http://www.video2brain.com/en/videos-13589.htm](http://www.video2brain.com/en/videos-13589.htm)

[https://developer.mozilla.org/en/HTML/Forms_in_HTML](https://developer.mozilla.org/en/HTML/Forms_in_HTML)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T21:47:12.497

@Keith 所说的，使用`<br/>`而不是`<br></br>`. 另外，`form[action]`不能为空；即使你不使用它（即如果你拦截了 JS 的提交），你也需要有一些东西在里面。通常是`"#"`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T21:47:28.920

您的单选按钮应该具有相同的名称

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T21:48:11.540

这是我从验证器中看到的，除了上面列出的其他问题

> 元素表单上属性操作的错误值：必须为非空。IRI 引用的语法：任何 URL。例如：/hello、#canvas 或[http://example.org/](http://example.org/)。字符应在 NFC 中表示，空格应转义为 %20。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-11T04:48:01.410

[有效性是非常相对](http://www.cs.tut.fi/~jkorpela/html/validation.html)的：它意味着符合称为文档类型定义 (DTD) 的形式化语法定义，至少在包括 XHTML 在内的经典 HTML 中（HTML5 草案对有效性有自己的想法）。

您的代码片段主要对应的已发布 DTD 是 XHTML 1.0 Transitional。使用它，验证器报告的唯一错误是这个（而且不言自明）：

未指定必需的属性“行”

```
 Content:   <textarea name="details" id="messagedetails" cols="30"> 
```

这并不意味着标记会很好。有效性是一种形式的东西，并不意味着正确性，更不意味着质量。一方面，使用`<br></br>`，虽然在 XHTML 中正式有效，但违反了（不）著名的 XHTML 1.0 规范[附录 C ：](http://www.w3.org/TR/xhtml1/#guidelines)

“C.2\. 空元素

在空元素的尾随 / 和 > 之前包含一个空格，`<br />`例如`<hr />`和`<img src="karen.jpg" alt="Karen" />`。此外，对空元素使用最小化的标记语法，例如，因为XML 允许 `<br />`的替代语法在许多现有用户代理中会给出不确定的结果。”</p>`<br></br>`

# php - PHP - 获取数组中对象的属性？

> ID：10542521
> 
> 赞同：4
> 
> 时间：2012-05-10T21:38:26.677
> 
> 标签：php

我有一个包含对象的多数组（$result）。该数组是从一个函数返回的（由我现在无法沟通的人制作）。

当我用 print_r($result[0]) 测试数组时，结果发现有嵌入的对象。

```
ABC Object ( 
    [p1] => P1 Object ( 
        [p1-1] => P1_property1 
        [p1-2] => P1_property2 
        [p1-3] => P1_property3
    ) 
    [p2] => ABC_property2 
    [p3] => ABC_property3 
    [p4] => ABC_property4
) 
```

如何获取字符串`"P1_property1"`to`"P1_property3"`和`"ABC_property2"`to `"ABC_property4"`？

我是 PHP 新手，等待帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T21:45:27.720

听起来像你想要[`get_object_vars()`](http://php.net/manual/en/function.get-object-vars.php)的，它将返回一组可访问的属性。

```
class foo {
  public $bar = "foo";
  private $bor = "fizz";
}

$properties = get_object_vars( new foo() );

print_r( $properties ); 
```

哪个输出：

```
Array
(
    [bar] => foo
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:52:34.700

尝试使用它来找出这些变量的内容是什么：

```
var_dump(get_object_vars($result[0])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-23T01:46:55.197

```
This function return all the properties in a class

function get_object_public_vars($object) {
    return get_object_vars($object);
} 
```

# android - 在 Runnable 中膨胀资产

> ID：10542522
> 
> 赞同：0
> 
> 时间：2012-05-10T21:38:34.010
> 
> 标签：android, android-layout

我在 Runnable 中运行以下代码。

```
LinearLayout assets = (LinearLayout)StaticRefernceToMyActivity.instance.getLayoutInflater().inflate(R.layout.assets, null); 
```

我要回来了

```
05-10 15:44:59.911: W/System.err(10163): android.view.InflateException: Binary XML file line #110: Error inflating class <unknown> 
```

** 编辑 **

这段代码一切正常，但我已经把它全部移到了`doInBackground`an`AsyncTask`中，那时我开始遇到像上面这样的奇怪问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:47:52.667

要回答较新的问题：

- 您在该 assets.xml 文件中有自定义视图或片段吗？如果是这样，它需要有一个无参数的构造函数供充气器使用。

-仅供参考，如果在 UI 线程之外执行 UI 操作可能会导致崩溃。我不确定只是运行充气是否合格，但如果你得到一个 CalledFromWrongThreadException，那就是那里发生的事情。

# android - 当固定位置的文本输入表单字段获得焦点时，如何防止疯狂滚动？

> ID：10542525
> 
> 赞同：14
> 
> 时间：2012-05-10T21:38:39.627
> 
> 标签：android, html, css, forms

我有一个移动网络应用程序，它在一个位置显示一个对话框：覆盖整个屏幕的固定元素。无论显示多少内容或页面滚动了多远，覆盖元素都会使页面内容变暗，并且对话框会出现在所有内容之上。对话框中有一个`<input type="search />`字段。

在 Android 上，当用户点击输入字段以使其获得焦点时，通常（但并非总是）会出现一些非常不稳定的行为：

*   软键盘出现，然后立即消失。
*   底层页面（被覆盖层覆盖）滚动几十个像素，有时向上，有时向下，有时双向，有时重复。当输入字段失去焦点时也会发生这种情况。
*   覆盖元素会瞬间向下和向右移动几个像素，显示屏幕顶部和左侧边缘的底层内容。（它在不到一秒后返回原位。）

这是在带有内置浏览器的 Android 2.3.4 上。它也可能出现在其他 Android 版本上。

页面构造如下：（请记住，其中一些怪癖仅在页面包含足够的内容以允许滚动时才会出现。）

```
<head>
  <style type="text/css">
    #menuoverlay {
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 10;
    background-color: rgba(0,0,0,.75);
    text-align: center;
    }
    #menu {
    display: inline-block;
    margin-top: 1em;
    border: 3px solid #02b;
    border-radius: 8px;
    padding: 1ex;
    background-color: black;
    color: silver;
    }
  </style>
</head>

<body>
  <div id="menuoverlay">
    <div id="menu">
      ...menu items...
      ...menu items...
      <form action=""><input type="search"/></form>
    </div>
  </div>

  <div id="content">
    ...lots of stuff...
    ...lots of stuff...
    ...lots of stuff...
  </div>
<body> 
```

有没有其他人看到过这种行为？你找到预防的方法了吗？

* * *

在网上搜索让我看到了一些类似问题的报告。以下是我到目前为止所读内容的摘要：

*   在许多 Android 设备上，内置浏览器显然没有像人们期望的那样使用 WebKit 的输入字段。相反，当 html 定义的字段获得焦点时，浏览器会尝试用它单独创建的新文本小部件覆盖它们。
*   这些重复的文本字段通常会忽略 css 样式，从而产生一种效果，即字段看起来是样式化的，直到它们获得焦点，然后突然恢复为系统默认样式。
*   Android 浏览器经常无法正确定位这些重复字段。当错位时，它们有时是可见的，但有时仅移动焦点目标而没有任何视觉指示它们已移动。
*   `transform: translate3d()`当输入字段的祖先元素具有、`-webkit-backface-visibility`或等样式时，通常会出现这些问题`position: fixed`。

以下是一些相关链接：

[Android浏览器textarea到处滚动，无法使用](https://stackoverflow.com/questions/4489809/android-browser-textarea-scrolls-all-over-the-place-is-unusable)

[如何设置 HTML INPUT 标记的样式，以便在专注于 Android 2.2+ 时保持 CSS？](https://stackoverflow.com/questions/3910708/how-can-i-style-an-html-input-tag-so-it-maintains-css-when-focused-on-android-2)

[Android 2.2/2.3 的原生浏览器和固定定位](https://github.com/scottjehl/Device-Bugs/issues/3)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T22:23:01.180

我设法通过设置`outline: none`我的`input`元素来防止瞬时覆盖偏移。

`overflow: hidden`通过在显示对话框时设置html `body`，然后在隐藏对话框时再次删除它，我得到了狂野的页面滚动和消失的键盘。这对重置页面的滚动位置有一个令人讨厌的副作用，所以我保存它并在必要时恢复它，并将所有这些hackery 包装在条件中，因此它只能在 Android 上运行。（我希望我的 Android 用户在对话框打开时看到半透明覆盖下的页面内容发生变化时不会太分心。）

有趣的是，我还能够通过`touchstart`在我的覆盖元素上捕获事件并调用 preventDefault() 来防止疯狂的页面滚动。这让我想知道所有这些疯狂是否是由这样的一系列事件引起的：

*   `touchstart`冒泡到文档根目录
*   浏览器查看`touchstart`重复输入字段的放置位置
*   浏览器将焦点放在输入字段上
*   软键盘似乎允许在输入字段中输入
*   视口调整大小以适应软键盘
*   在触摸事件期间调整大小的视口看起来像是对浏览器的触摸拖动
*   虚假拖动导致页面滚动并关闭键盘

我最终没有`touchstart`解决这个问题，因为它阻止了输入字段获得焦点，并且`focus()`从 javascript 调用只是不起作用。我已经读到 Android 浏览器禁用了`focus()`输入字段上的方法，这可以解释这种行为。也许它这样做是因为它不能与它在 html 定义的字段上创建的重复文本小部件一起工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T14:23:14.497

就我而言，“位置：固定；” 不是问题，“vertical-align:center;” 或“-webkit-box-align:center;” 推回并关闭软键盘，使用“-webkit-box-align:start;” 解决了我的问题。

# c++ - 傻程序中的堆栈溢出异常

> ID：10542529
> 
> 赞同：6
> 
> 时间：2012-05-10T21:39:11.277
> 
> 标签：c++, visual-studio-2010, visual-c++, stack-overflow

我正在使用 VS 2010。
当我在调试模式下运行此程序时，它会引发堆栈溢出异常，并在第 99 行的文件 chkstk.asm 中显示断线。
但是当我在发布模式下运行它时，它就可以了。
此外，如果我将其中一个数组的大小减小到 10000，它在 Debug 中运行良好。是什么原因？

```
#include <iostream>

using namespace std;
int main()
{
    char w[1000001], temp[1000001];
    cout<<"Why?"<<endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T21:42:40.140

因为堆栈非常小，在大多数系统上大约为 1MB，所以你的大缓冲区溢出了它。要解决这个问题，只需像这样在堆上分配：

```
#include <iostream>

using namespace std;
int main()
{
    char* w = new char[1000001];
    char* temp = new char[1000001];
    cout<<"Why?"<<endl;
    delete[] w;
    delete[] temp; 
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T21:41:02.973

堆栈非常小（~1MB）。您正在用这些数组中的大量元素填充它。

如果您需要更多空间，请尝试在堆上分配（指针会这样做）。

实现这一点的一个好方法是使用向量，它在内部将东西存储在堆上：

```
std::vector<char> w (1000001);
std::vector<char> temp (1000001); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-10T21:41:59.907

你在堆栈上分配了太多东西；可能在调试模式下，堆栈由于各种安全检查而被占用更多，或者故意变小以帮助您更早地检测到此类问题。无论如何，即使在释放模式下，使数组更大一点也会触发堆栈溢出（除非编译器完全优化它们）。

这里问题的根源是您不应该在堆栈上分配大的东西，它的大小非常有限（在使用 VC++ 的 Windows 上默认为 1 MB）并且应该只用于小缓冲区/对象。如果您需要进行大分配，请在堆上进行（使用`new`/ `malloc`），最好使用智能指针以避免内存泄漏。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-10T21:41:37.853

自动存储中的数组在堆栈上分配。堆栈空间有限。当堆栈空间不足以分配自动变量时，会发生堆栈溢出异常。

如果您需要那么大的数组，请改用静态或动态分配。

对于静态分配，将声明移到外部`main()`。

对于动态分配，请使用以下代码：

```
char *w = new char[1000001], *temp = new char[1000001];
// Work with w and temp as usual, then
delete[] w;
delete[] temp; 
```

最后，考虑使用标准容器而不是普通数组：[`std::array`](http://en.cppreference.com/w/cpp/container/array)如果不需要调整大小是一个更好的数组（它是在堆栈上分配的，不会解决这个问题）；[`std::string`](http://www.cplusplus.com/reference/string/string/)也是替换`char`数组的好选择。

# tinymce - TinyMCE 版本 3.12 转换为

> ID：10542538
> 
> 赞同：0
> 
> 时间：2012-05-10T21:39:52.257
> 
> 标签：tinymce

好的...

我们刚刚升级了安装了 TinyMCE 3.12 版的 CMS。

我们迁移了所有现有数据。

之前的平台使用了一个相当老的 Ektron 可视化编辑器。

在我们大多数页面的 HTML 中，我们的代码片段如下所示：

```
<p><font size='1'>Font Size 1</font></p>
<p><font size='2'>Font Size 2</font></p>
<p><font size='3'>Font Size 3</font></p>
<p><font size='4'>Font Size 4</font></p>
<p><font size='5'>Font Size 5</font></p>
<p><font size='6'>Font Size 6</font></p>
<p><font size='7'>Font Size 7</font></p> 
```

TinyMCE 的版本正确地将此代码转换为：

```
<p><span style="font-size: xx-small;">Font Size 1</span></p>
<p><span style="font-size: x-small;">Font Size 2</span></p>
<p><span style="font-size: small;">Font Size 3</span></p>
<p><span style="font-size: medium;">Font Size 4</span></p>
<p><span style="font-size: large;">Font Size 5</span></p>
<p><span style="font-size: x-large;">Font Size 6</span></p>
<p><span style="font-size: xx-large;">Font Size 7</span></p> 
```

哪个好...

然而，在我们旧的可视化编辑器中，我的内容贡献者会设置`<font size='2'>`，因为它看起来像是 12pt 字体......所以看起来很正常......

TinyMCE 转换`<font size='2'>`为 x-small，看起来像 10pt 字体。

所以..在 TinyMCE 中，有没有一种方法可以关联`<font size='2'>`而`<span style="font-size:small">`不是 x-small 字体？

说得通？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:22:45.080

config 选项`font_size_style_values`允许您控制字体大小为 1-7 的样式。有关详细信息，请参阅[http://www.tinymce.com/wiki.php/Configuration:font_size_style_values](http://www.tinymce.com/wiki.php/Configuration:font_size_style_values)。

因此，对于您的用例，您需要从一开始就删除 xx-small 选项并将所有内容向下移动（在末尾添加一个附加值）：

```
font_size_style_values: "x-small,small,medium,large,x-large,xx-large,xx-large" 
```

我刚刚在 TinyMCE（版本 3.4.9）的本地副本中对此进行了测试，这似乎工作除了字体大小 1，无论配置如何，它总是转换为 xx-small。但是这个错误可能在新发布的 3.5 中得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T21:40:44.990

您可以尝试设置： convert_fonts_to_spans : false

# silverlight - 用 silverlight 阅读俄语字符

> ID：10542541
> 
> 赞同：0
> 
> 时间：2012-05-10T21:40:13.120
> 
> 标签：silverlight

我解析 XML 文件。我需要阅读俄文字母。

但是没有一个受支持的编码（BigEndian、UTF8、Unicode）可以做到这一点。

```
FileStream f = new FileStream(filename, FileMode.Open);
StreamReader s = new StreamReader(f, Encoding.?); 
```

该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:58:11.340

您需要使用与您尝试解析的文件匹配的编码。如果编码不是 Silverlight 原生支持的编码之一，您将必须提供自己的 System.Text.Encoding 子类来处理文件；它必须将文件中的字节转换为正确的 Unicode 字符。如果您确定了编码的标准名称，您可能会进行搜索并发现已经存在一个实现；否则，您必须自己编写。

# asp.net - 使用 javascript 验证 ASP.NET 用户会话

> ID：10542543
> 
> 赞同：2
> 
> 时间：2012-05-10T21:40:17.763
> 
> 标签：asp.net, asp.net-mvc-3, jquery, asp.net-authentication

ASP.NET MVC 3 网站用户管理的标准演示包括以下登录过程：

1.  用户输入身份验证数据。
2.  数据发布到服务器。
3.  处理身份验证尝试的代码检查提供的数据与 DB。
4.  如果一切正常 - 调用`FormsAuthentication.SetAuthCookie`为来自浏览器的即将到来的会话请求设置 cookie。
5.  并将用户重定向到任何地方。

我想实现一个纯粹的 jQuery.Ajax - ASP.NET 登录机制。

我可以毫无问题地从 js 调用 MVC 站点操作。但是如何`FormsAuthentication.SetAuthCookie`手动获取这些 cookie 数据，从 JS 代码将它们放入浏览器 cookie 存储中？如何在服务器或 jQuery.ajax 成功代码中提取它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T22:27:50.283

使用 MVC 3，您可以为登录按钮设置 onclick 事件，然后将 ajax POST 发送到登录操作。让登录操作返回 JSON 结果并控制从您的 javascript 函数发送用户的位置。

```
[HttpPost]
public JsonResult LogOn(LogOnModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        //Do your authentication
        FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
        return Json(true);
    }

// If we got this far, something failed, redisplay form
    return Json(false);
} 
```

在您的视图中添加一个 Id 到您的表单并在按钮上放置一个点击处理程序。

```
<% using (Html.BeginForm("LogOn", "Account", FormMethod.Post, new { Id = "frmLogOn" }))
   { %>
    <%: Html.ValidationSummary(true, "Login was unsuccessful. Please correct the errors and try again.")%>
    <div>
        <fieldset>
            <legend>Account Information</legend>

            <div class="editor-label">
                <%: Html.LabelFor(m => m.UserName)%>
            </div>
            <div class="editor-field">
                <%: Html.TextBoxFor(m => m.UserName)%>
                <%: Html.ValidationMessageFor(m => m.UserName)%>
            </div>

            <div class="editor-label">
                <%: Html.LabelFor(m => m.Password)%>
            </div>
            <div class="editor-field">
                <%: Html.PasswordFor(m => m.Password)%>
                <%: Html.ValidationMessageFor(m => m.Password)%>
            </div>

            <div class="editor-label">
                <%: Html.CheckBoxFor(m => m.RememberMe)%>
                <%: Html.LabelFor(m => m.RememberMe)%>
            </div>

            <p>
                <input type="submit" value="Log On" onclick="clicked(); return false;" />
            </p>
        </fieldset>
    </div>
<% } %>
<script type="text/javascript">
    function clicked() {
        var form = $('#frmLogOn');
        $.ajax({
            type: 'POST',
            url: '/Account/LogOn',
            data: form.serializeObject(),
            success: function (result) {
                if (result == true) {
                    alert("success");
                    window.top.location = "/Home/Index";
                }
                else {
                    alert("failure");
                }
            },
            error: function (data) {
                alert("error");
            }
        });
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:43:53.270

安装 MVC4 测试版，默认的 Internet 模板提供了一种 Ajax 身份验证机制，您可以窃取并放入您的 MVC3 应用程序中。

或者只使用 MVC4，因为 MVC4 很可能会在接下来的几个月内发布。当前的 MVC4 测试版还有一个上线许可证，因此如果您愿意，您甚至可以使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T23:03:17.027

不是 jQuery - 在[**Microsoft Ajax**](http://msdn.microsoft.com/en-us/library/bb398896%28v=vs.100%29.aspx)[中使用表单身份验证](http://msdn.microsoft.com/en-us/library/bb398896%28v=vs.100%29.aspx)

# sql-server-ce - 在一个查询中进行大量更新（同一列），如何进行此动态查询？

> ID：10542544
> 
> 赞同：0
> 
> 时间：2012-05-10T21:40:18.747
> 
> 标签：sql-server-ce

我有这样的疑问：

```
update table1 set quantity=(quantity)+3 where productsid=1
update table1 set quantity=(quantity)+4 where productsid=2
update table1 set quantity=(quantity)+5 where productsid=3
update table1 set quantity=(quantity)+6 where productsid=4
update table1 set quantity=(quantity)+1 where productsid=5
update table1 set quantity=(quantity)+3 where productsid=6
update table1 set quantity=(quantity)+2 where productsid=7 
```

但我正在研究 sqlce，我无法发送所有查询，并且一对一发送需要很长时间，所以我需要一个动态查询，它得到一个与这些查询一样工作的唯一查询。也许使用案例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:46:05.530

问题已通过 2 个查询和一个循环解决

```
string query1 = " UPDATE table1  SET  quantity = CASE productsid  ";
string query_where = "END  WHERE productsid IN "; 
```

在for循环之后，查询是它

```
UPDATE table1  SET  quantity= CASE productsid  
When '1' Then quantity  - 2.0000000000 
When '2' Then quantity  - 2.0000000000 
When '3' Then quantity  - 1.0000000000 
When '4' Then quantity  - 1.0000000000 
When '5' Then quantity  - 1.0000000000 
When '6' Then quantity  - 5.0000000000 
When '7' Then quantity  - 1.0000000000 
When '8' Then quantity  - 1.0000000000 
When '9' Then quantity  - 1.0000000000 
END  WHERE productsid IN 
(  
'1',
'2',
'3',
'4',
'5',
'6',
'7',
'8',
'9'
) 
```

我可以使用`ExecuteNonQuery();`它的全部！只有一个查询..

# web-services - 无法使用 wsgen 生成 Web 服务客户端

> ID：10542553
> 
> 赞同：0
> 
> 时间：2012-05-10T21:41:16.643
> 
> 标签：web-services, wsdl, wsimport

原帖在[这里](https://stackoverflow.com/questions/10537471/wsimport-giving-parsing-error/10537686#10537686)

我有一个由 Jax WS 2.1.5 创建并作为 HTTPS 服务公开的第三方 Web 服务（WSDL：- [https://somedomain.com/location/soap/locationfinderservice?wsdl](https://somedomain.com/location/soap/locationfinderservice?wsdl)）我正在尝试使用创建客户端wsimport。我正在使用 jdk1.6.0_04 以实现兼容性（我切换了我在上一篇文章中解释过的 JDK 版本）现在我收到了新错误

```
 javax.xml.stream.XMLStreamException: Invalid WSDL expected {http://schemas.xmlsoap.org/wsdl/}definitions found   {https://schemas.xmlsoap.org/wsdl/}definitions at (lineLine number = 1 
```

问题是[https://schemas.xmlsoap.org/wsdl/](https://schemas.xmlsoap.org/wsdl/)不存在。在这种情况下如何生成客户端存根？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:13:20.803

您可以通过 http 而不是 https 访问 Wsdl 吗？

如果没有，请使用浏览器获取 Wsdl 并将其保存在本地，然后稍微修改以更正它。然后将 wsimport 指向调整后的 Wsdl 文件。

要应用的轻微修改：在文档顶部找到命名空间声明（可能看起来像`xmlns:wsdl="https://schemas.xmlsoap.org/wsdl/"`）并更改为`xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/`“（注意 http 而不是 https）。

# c# - C# / asp.Net 3.5 中没有缓存和注销

> ID：10542558
> 
> 赞同：1
> 
> 时间：2012-05-10T21:41:36.583
> 
> 标签：c#, asp.net, .net, caching, disable-caching

我在我的 masterpage.page_load 中有一个注销，我在其中禁用了缓存，如下所示：

```
Response.ExpiresAbsolute=DateTime.Now.AddDays(-1d);
Response.Expires =-1500;
Response.CacheControl = "no-cache";

Response.Redirect("Login.aspx"); 
```

如果页面刷新并且您已注销，则注销功能可以正常工作，然后转到登录页面。但是，如果您注销并点击返回按钮，您仍然可以转到上一页。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:53:58.443

`Page_Load`你可以在活动中试试这个。

```
Page.Response.Cache.SetCacheability(HttpCacheability.NoCache);
Page.Response.Cache.SetExpires(DateTime.Now.AddSeconds(-1));
Page.Response.Cache.SetNoStore(); 
```

有关更多信息，您可以阅读此内容。[设置页面的可缓存性](http://msdn.microsoft.com/en-us/library/w9s3a17d%28v=vs.71%29.aspx)

# sql-server - SQL Server 2005 事务日志不会截断

> ID：10542560
> 
> 赞同：0
> 
> 时间：2012-05-10T21:41:52.210
> 
> 标签：sql-server, transactions, database-backups, ssms

我有一个`.mdf`138 GB 的数据库文件和一个 55 GB 的事务日志文件。

恢复模式设置为*完全*（不需要）。我运行了数据库和事务日志的完整备份。事务日志仍然是 55 GB，没有可用空间来收缩文件。

我通过 SQL Server Management Studio GUI 运行该备份。然后我运行以下命令来尝试强制 trans log 缩小：

```
BACKUP LOG database WITH TRUNCATE_ONLY
DBCC SHRINKFILE (logfile, TRUNCATEONLY ) 
```

日志文件仍为 55 GB。然后我将恢复模式更改为`Simple`并让它静置几天，但它仍然是 55 GB。我再次尝试了上面的这两个命令，但它仍然没有截断任何内容。

无论我尝试什么，这个日志文件都不会缩小。由于我们根本不需要事务日志，我什至尝试分离数据库、重命名日志文件并重新附加。这也不起作用，因为实际上有 2 个事务日志，并且在尝试在没有日志的情况下重新附加时出现错误。另一个日志文件只有 1 MB，我也尝试将其删除，但也会收到错误消息，说它不是空的。

有什么我想念的，还是我可以尝试的其他东西？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:19:48.830

在我必须缩小事务日志的极少数情况下，我在 SQL Server 2005 上使用的命令与您尝试的命令略有不同：

```
backup log database with no_log
dbcc shrinkfile (logfile,1) 
```

（`...with no_log`而不是`...with truncate_only`, 的第二个参数`dbcc shrinkfile`必须是所需的日志文件的新大小）

为了确保我得到正确的日志文件的名称（并且因为我懒得输入数据库的名称），我使用这个脚本来自动获取数据库和日志文件的名称：

```
declare @dbname varchar(255)
declare @logfile varchar(255)

select @dbname = db_name()
select @logfile = name from sysfiles where filename like '%.ldf'

backup log @dbname with no_log
dbcc shrinkfile (@logfile,1) 
```

您需要直接在要收缩日志文件的数据库中运行它。
免责声明：我从来没有在一个有多个日志文件的数据库上使用它，比如你的。如果默认情况下发现错误的日志文件，也许您必须更改它。

`Simple`如果您仍然不需要恢复模式，则可以在运行脚本之前将恢复模式设置为`Full`。

并且您应该在缩小日志后立即进行完整备份。**如果您让数据库处于恢复模式**
**，这一点非常重要`Full`**！
（因为收缩日志会破坏日志链，这意味着后续的日志备份是没有用的，直到你进行下一次完整备份）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:52:41.693

尝试设置`checkpoint` [http://msdn.microsoft.com/en-us/library/ms188748.aspx](http://msdn.microsoft.com/en-us/library/ms188748.aspx)

这会将所有脏页写入磁盘，从当前数据库的缓冲区缓存中刷新日志页，最大限度地减少恢复期间必须前滚的修改数量。它创建一个新的最小恢复日志序列号 (lsn) 并删除该 lsn 之前的所有记录，从而缩小文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T21:56:28.250

“我什至尝试分离数据库，重命名日志文件并重新附加”：日志不是可选组件！立即运行 DBCC CHECKDB 以查看是否导致损坏。如果由于某种原因有未刷新的页面，您*将导致损坏。*即使不是，你也是在赌博。

SQL Server 日志文件不是信息性文本日志。

如果您不需要日志，请切换到简单模式并缩小日志文件（您已经这样做了）。[TRUNCATE_ONLY 已过时](http://sqlserverpedia.com/blog/sql-server-backup-and-restore/backup-log-with-truncate_only-like-a-bear-trap/)，我不知道它是否有任何作用。

查看**sys.databases**并查看 log_reuse_wait_desc 列中的值。它会告诉你是什么保留了日志。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T21:57:52.047

首先，您可以将日志文件的初始大小设置得更低吗？如果有人以 55GB 启动它，它可能不会低于这个值。

其次，您可能[不需要两个事务日志](http://social.msdn.microsoft.com/Forums/en-US/sqldatabaseengine/thread/396d5d52-57b9-484d-ad6f-8b3030db30f6)。第二个将是“活动的”，但在第一个已满之前不会使用。如果您没有限制增长并且仍然有剩余磁盘空间，第一个可能永远不会被填满。

第三，正如@JohnNolan 建议的那样（正如我即将建议的那样），尝试一个检查点，因为这应该允许在简单恢复模型下截断日志。

此外，建议您[避免使用`TRUNCATE_ONLY`](http://msdn.microsoft.com/en-us/library/ms189085(v=sql.90).aspx).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T02:23:46.273

这是 ms sql 服务器的问题，但这是解决方案....

要强制截断数据库，请执行以下操作：

1.  在收缩之前运行完整的数据库备份
2.  将恢复从完全设置为简单
3.  dbcc 收缩文件
4.  将恢复设置为完全
5.  缩小后运行完整的数据库备份

这是强制收缩的代码

```
 use master
 Alter database dbname set Recovery simple; 

 use dbname
 DBCC SHRINKFILE (dbname_log, 0, TRUNCATEONLY)
 Alter database dbname set Recovery full; 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T03:08:07.287

我将如何解决这个问题：

1) 从 sys.databases 中选择 log_reuse_wait_desc 其中 name = 'your_db_name'

这将为您提供阻止 VLF 被重用的原因。在缓慢的时期（即当日志没有被大量使用时，这应该是'NONE'）。如果您看到其他值，您可能需要进行故障排除。

2）看一下dbcc loginfo的输出。它为您在日志文件中的每个 VLF 返回一行。状态栏告诉您 VLF 是否在使用中。为了缩小日志，您需要将未使用的 VLF 放在文件末尾。您可能必须等待自然活动才能做到这一点。由于 VLF 被用于一种环中，因此未使用的 VLF 最终应该位于文件的末尾。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-27T09:12:37.740

使用以下查询：

```
backup log [dbname] with truncate_only
go
DBCC SHRINKDATABASE ([dbname], 10, TRUNCATEONLY)
go 
```

# c# - 如何将具有反斜杠的连接字符串传递给SqlConnection？

> ID：10542565
> 
> 赞同：6
> 
> 时间：2012-05-10T21:42:14.570
> 
> 标签：c#, sql, sql-server, ado.net

我正在尝试使用 C# 调用存储过程。

我在以下行中遇到问题。

```
SqlConnection("Server=DB2\XPT;DataBase=SCFHP_EDI_P1;Integrated Security=SSPI"); 
```

我无法使用的部分是 server `DB2\XPT`。

我需要做什么才能将服务器名称用作`DB2\XPT`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-10T21:44:12.430

```
("Server=DB2\\XPT;DataBase=SCFHP_EDI_P1;Integrated Security=SSPI"); 
```

或者

```
(@"Server=DB2\XPT;DataBase=SCFHP_EDI_P1;Integrated Security=SSPI") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T21:44:33.673

如果要避免转义字符串中的字符，则需要转义连接字符串中的反斜杠`\` 或使用该符号。`@`

[**在 MSDN 上阅读有关它的更多信息。**](http://msdn.microsoft.com/en-us/library/362314fe%28v=vs.100%29.aspx)

### 使用 @ 符号更正了语法 1：

```
SqlConnection(@"Server=DB2\XPT;DataBase=SCFHP_EDI_P1;Integrated Security=SSPI"); 
```

### 使用转义更正了语法 2：

```
SqlConnection("Server=DB2\\XPT;DataBase=SCFHP_EDI_P1;Integrated Security=SSPI"); 
```

# internet-explorer - Internet Explorer 8 的语音识别

> ID：10542570
> 
> 赞同：0
> 
> 时间：2012-05-10T21:42:37.183
> 
> 标签：internet-explorer, voice-recognition

我有一个项目，我想在网站中实现语音识别。想象一下，用户正在打一个视频电话，也没有空闲的手来进行交互。如果它只识别一些关键字（如“快照”或“菜单”）就足够了。

我让它在 chrome (x-webkit-speech) 中工作，但它必须在 IE8 中。

其他条件：

*   如果可能的话，应该一直录音（就在打开主页的时候）。因此，即使用户正在与另一个人交谈，它也应该在听到关键字时做出反应。我不想要像 SIRI 这样你按下按钮开始录制的东西
*   电话非常保密。我正在做这件事的公司不想将整个对话发送给谷歌，在那里可能会对其进行分析并保存内容。

我不希望有人给我一个完整的解决方案，但是由于我对此很陌生并且很着急，如果有人能指出我正确的方向，我将不胜感激:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:51:18.340

我只是偶然发现了我自己的问题......这是我的解决方案：

我们用闪光灯录制了声音。将其转换为 .wav。连接到 ac#-server 的套接字并将文件作为字节数组发送。问题：由于您只接收字节，客户端必须先发送大小并用某种字符终止它，以便您知道它何时结束。您不能只取一个随机字符并用它终止 wav 文件。如果你没有得到大小拳头，你永远不会知道传输何时完成。

c#-server 使用 .NET 4 运行。？具有语音识别功能。分析 .wav 文件并将字符串发送回客户端。flash 可以调用 javascript 中的方法 => 问题解决了！

当然这很丑，但我们的客户仍然对它非常满意，因为它有效并满足了他要求的所有条件。

# vb.net - 如何更改 WinForm 的颜色？

> ID：10542571
> 
> 赞同：1
> 
> 时间：2012-05-10T21:42:38.603
> 
> 标签：vb.net, winforms

我正在开发 WinForms 项目。我需要将表单的颜色从白色更改为黑色。

VB代码：

```
Dim g As Graphics, Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load 

g= Me.CreateGraphics 

End Sub 
```

任何想法如何在**g**实例的方法的帮助下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:48:02.787

将 form1.backColor 或类似的设置为您选择的颜色

Form1.backColor = 颜色.黑色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:47:52.597

就这么简单...

```
 g.FillRectangle(New SolidBrush(Color.Black), MyBase.ClientRectangle) 
```

# css - 如何更改列表的字体大小（不是初始视图）

> ID：10542576
> 
> 赞同：5
> 
> 时间：2012-05-10T21:43:06.630
> 
> 标签：css, google-chrome

我为下拉列表的初始视图设置了自定义字体和背景（选择一个选项）。这`font-size`是 20 像素，使用自定义字体看起来很棒。但是，当我单击列表时，选项本身不使用自定义字体并且看起来很正常，除了`font-size`似乎可以延续。这似乎只是 Chrome 的情况（我也测试过 Safari 和 Firefox）。

```
@font-face {
    font-family: 'Averia Libre';
    font-style: normal;
    font-weight: 400;
    src: local('Averia Libre Regular'), local('AveriaLibre-Regular'),
    url('http://themes.googleusercontent.com/static/fonts/averialibre/v1/rYVgHZZQICWnhjguGsBspHhCUOGz7vYGh680lGh-uXM.woff') format('woff');
}
select {
    font-size: 20px;
    font-family: 'Averia Libre', cursive;
    background: url(http://www.greenriverworks.com/elements/borders/green_button_background_over.jpg) repeat-x;
    width: 400px;
    font-family: 'Averia Libre';
}
```

```
<link href='http://fonts.googleapis.com/css?family=Averia+Libre' rel='stylesheet' type='text/css'>
<select>
    <option value="">I'm a custom font.</option>
    <option value="">Hey me too!</option>
    <option value="">Averia Libre</option>
</select>
```

我尝试为选项本身创建一个单独的类，但这似乎没有任何效果。

为了进一步说明，这里有一个[JSFiddle](http://jsfiddle.net/bumpy009/wpHKe/7)。

铬合金：

![在此处输入图像描述](../Images/4bf31254736b449e83f6f298b2c76c76.png)

火狐：

![在此处输入图像描述](../Images/5587aad483e3658257d94822f95258aa.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T22:12:50.323

我同意彼得的观点，但使用的是：

```
select {
  font-size: 20px;
  font-family: 'Averia Libre', cursive;
} 
```

在 css 上会改变所有的下拉字体，所以他应该使用类而不是总选择

CSS

```
.selectClass {
   font-size: 25px;
   font-family: 'Impact', cursive;
}​ 
```

和 HTML

```
<link href='http://fonts.googleapis.com/css?family=Averia+Libre' rel='stylesheet' type='text/css'>

<select class="selectClass">
<option value="">I'm a custom font.</option>
<option value="">Hey me too!</option>
<option value="">Averia Libre</option>
</select>​ 
```

[或者您可以直接在http://jsfiddle.net/sNkDW/](http://jsfiddle.net/sNkDW/)上看到小提琴

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T22:52:44.473

看起来下拉列表正在由 Mac OS X 的“本机 UI”呈现。

如果设置字体和/或大小实际上并没有改变任何东西，那么您无能为力。

（除了用`<select>`自[定义 JavaScript 版本](http://harvesthq.github.com/chosen/)替换）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-05T13:46:46.950

在 chrome 中尝试添加`background: white;`到类 Select。通过将背景设置为白色，Chrome 也遵循了我的其他规范，例如高度和字体。

```
.yourselectclass select {
    background: white;
    font-size: 16px;
    margin-left: 5px;
    font-family: 'Cabin', sans-serif;
    height: 30px;
    width: 88px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T21:52:27.420

我已经在 Chrome 上成功完成了这项工作。这是 Google Fonts 自定义字体的示例。

**小提琴：http:** [//jsfiddle.net/simple/wpHKe/](http://jsfiddle.net/simple/wpHKe/)

您的**HTML**代码：

```
<select>
<option value="">I'm a custom font.</option>
<option value="">Hey me too!</option>
<option value="">Averia Libre</option>
</select>​ 
```

**当然，CSS：**

```
select {
    font-size: 20px;
    font-family: 'Averia Libre', cursive;
}​ 
```

**以及来自 Google 的 Font Face：**

您可以看到这个链接为外部样式表，但这是其中的代码。

```
@font-face {
  font-family: 'Averia Libre';
  font-style: normal;
  font-weight: 400;
  src: local('Averia Libre Regular'), local('AveriaLibre-Regular'),
  url('http://themes.googleusercontent.com/static/fonts/averialibre/v1/rYVgHZZQICWnhjguGsBspHhCUOGz7vYGh680lGh-uXM.woff') format('woff');
} 
```

**编辑：**

**正如@Jhilom**所指出的，如果您不希望这影响您网站上的所有 DropdDowns，请确保在 Select 中包含一个 CSS 类，如下所示：

HTML：

```
<select class="yourSelectClass">
<option>1</option>
<option>2</option>
<option>3</option>
</select> 
```

CSS：

```
.yourSelectClass
{
/* Your Dropdown CSS here */
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-20T16:56:09.887

在 Firefox 中无法更改选项标签内文本的 CSS 样式。

在 Firefox 中：只有下拉组合框中的“selected”元素才会考虑您应用的任何 CSS 样式。该样式不会级联到选项标签。为每个选项标签添加 CSS 样式没有任何效果。

在 Chrome 中：Chrome 尊重您添加到 select 和 option 标签的 CSS 样式。样式不会从选择标签级联到选项标签，但您可以将样式应用于每个选项标签。

我读过“标准”不需要选择和选项标签是可样式化的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-15T04:20:48.043

我遇到了同样的问题。其实这不是问题。选择菜单大小根据**列表项文本长度**显示。检查您的选项标签

例如：如果选项标签中有很长的文本，那么选择菜单的字体会很小。

# actionscript-3 - Flash Player 未连接到套接字策略文件服务器 - 给出 SecurityError #2048

> ID：10542577
> 
> 赞同：0
> 
> 时间：2012-05-10T21:43:11.387
> 
> 标签：actionscript-3, flash, websocket

我有一个在[http://192.168.0.179](http://192.168.0.179)运行的服务器。它提供一个 Flash 文件 WebSocketMain.swf（来自[https://github.com/gimite/web-socket-js](https://github.com/gimite/web-socket-js)），它尝试与 192.168.0.179:5000 建立套接字连接。我还有一个运行在 192.168.0.179:843 的套接字策略文件服务器。

这在服务器运行的机器上运行良好（运行 OS X）。在该机器上，Flash 连接到策略文件服务器，然后连接到端口 5000 的 WebSocket 服务器。但是，在同一网络 (192.168.0.175) 上的 Windows（64 位）机器上，运行 Flash 10.3/11.2/11.3 (在 IE9/Chrome 中），我在 JS 控制台中收到以下错误消息：

> 日志：[WebSocket] 调试已启用
> 
> 日志：[WebSocket] 策略文件：xmlsocket://192.168.0.179:843
> 
> [WebSocket] 无法连接到位于 ws://192.168.0.179:5000/websockettest 的 Web Socket 服务器（安全错误：错误 #2048：安全沙箱违规：`http://192.168.0.179/assets/flash/WebSocketMain.swf`无法从 192.168.0.179:5000 加载数据。）确保服务器正在运行并且正确放置 Flash 套接字策略文件
> 
> 日志：[WebSocket] 关闭

根据服务器机器上的 tcpdump 和 policy server 日志，Flash Player 甚至没有连接到位于 192.168.0.179 的 policy server。192.168.0.179:843是从.175机器打开的，所以FP连接应该没有问题。我可以从 .175 机器通过终端客户端（例如 PuTTY）连接到它，并毫无问题地接收策略文件。只是为了确保我也禁用了 Windows 防火墙，也没有任何效果。

我尝试将 WebSocketMain.swf 修改为显式调用 Security.loadPolicyFile() 而根本不调用它，但没有任何效果。我也尝试在代码中添加 Security.allowDomain("*") 。依然没有。我什至尝试将 FP 将连接的 URL（由 Web 服务器提供）修改为 192.168.0.179:80。没有。192.168.0.179:10000 也不起作用。即使 127.0.0.1 和 localhost 也不起作用，给出相同的错误消息

这可能是什么原因造成的？为什么 FP 甚至不尝试连接到策略服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T01:51:46.727

发现问题：设置的机器上有一个全局配置文件mms.cfg `DisableSockets=1`。这导致了 SecurityError 并阻止了 Flash Player 连接到策略文件服务器。将其设置为 0（这是默认值）并且一切正常。有关此文件的详细信息，请参阅[http://www.adobe.com/content/dam/Adobe/en/devnet/flash/articles/flash_player_admin_guide/flash_player_admin_guide.pdf](http://www.adobe.com/content/dam/Adobe/en/devnet/flash/articles/flash_player_admin_guide/flash_player_admin_guide.pdf)第 4 章。

# mysql - 保存查询结果以在 IN 比较中使用

> ID：10542580
> 
> 赞同：0
> 
> 时间：2012-05-10T21:43:16.937
> 
> 标签：mysql, sql, tsql

是否可以将查询结果保存到变量中并能够在 IN 语句中使用它

例子：

```
...

declare @ListOfValues ?DATA TYPE? = select Values from tblValueList

while exists (select top 1 RecordID From @tblResults)
begin
    If @variable in (@ListOfValues)
    begin
        ... 
```

由于在循环内部查询是不好的做法（前端开发的假设），那么在后端开发中做这样的事情的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:55:40.250

好吧，您的问题的答案是“否”。另外，我不完全理解你的伪 SQL。@variable 来自哪里？

无论如何，您的问题有三个答案：

(1) 最简单的是将值列表存储在临时表中。然后你可以在while循环中删除每一个。

(2) 您可以使用光标浏览元素。

(3) 您可以将这些值连接成一个字符串，并在 while 循环中进行复杂的字符串操作。

# jquery - jQuery 动画在 Firefox 中不起作用

> ID：10542587
> 
> 赞同：1
> 
> 时间：2012-05-10T21:43:46.250
> 
> 标签：jquery, firefox

此动画在 IE、Chrome 和 Safari 中有效，但为什么在 FF 中无效？

[http://jsfiddle.net/DRMgQ/1/](http://jsfiddle.net/DRMgQ/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:52:11.283

`background-position-x`并且`-y`不是标准的一部分（请参见[此处](http://www.w3.org/Style/CSS/Tracker/issues/9)）并且显然在 FF 中不受支持： http: [//snook.ca/archives/html_and_css/background-position-xy](http://snook.ca/archives/html_and_css/background-position-x-y)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:55:53.363

`background-position-x`是 MSIE 特有的属性。`background-position`在标准属性中设置两个坐标

# tfs - Tfs 查询以检索与给定的其他 WorkItems 列表链接的特定类型的 WorkItems

> ID：10542592
> 
> 赞同：0
> 
> 时间：2012-05-10T21:44:14.380
> 
> 标签：tfs, workitem

因此，我有一个特定类型（“测试用例”）的 tfs 工作项列表，我想找到与第一个列表中的至少一个链接的另一种类型（“审查”）的所有工作项。

我将如何进行和定义这样的查询（或多个查询..但如果需要多个，显然越少越好）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:55:28.453

`Work Item Type`使用 for的子句创建您的查询`Test Case`。

将 更改`Type of Query`为`Work Items and Direct Links`，然后在第二个 Filter 控件中为链接的工作项设置所需的子句。

它应该看起来像这样（取自 Dev11，但在 VS2010 中几乎相同）：

![TFS 查询](../Images/5e43a939ca76aa6dc2b0c9c088a1342e.png)

# javascript - 从另一个 JavaScript 函数中调用 jQuery（模式弹出）函数

> ID：10542596
> 
> 赞同：0
> 
> 时间：2012-05-10T21:44:32.603
> 
> 标签：javascript, jquery, jquery-tools

我正在尝试调用一个 facebox 模态框（流播放器的 jQuery 工具）。
我有一个选择菜单`onChange`正在调用我的`sub_debt`脚本。该`sub_debt`脚本评估选择菜单的值 - 如果`value == 1`（对于“是”），我想调用标题中定义的 facebox 模式。

目前，下面的代码“有点”调用了 facebox modal - 它正在将选择菜单“移出”它在页面上的位置，就好像它是 facebox-modal 弹出窗口本身的唯一部分，并将变暗的背景蒙版应用于页面的其余部分。

（注意：例如，当从锚标签调用时，facebox 模态脚本确实可以正常工作）

```
 <head>

    <script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>

    <!-- Popups : Facebox -->
    <script>
    function popup(choosebox) {
            var $choosebox = $("#" + choosebox);

            if ($choosebox.hasClass("init")) {
                    $choosebox.overlay().load();
            }
            else {
                    $choosebox.addClass("init");
                    $choosebox.overlay({

             // custom top position
             top: 260,

             mask: { color: '#838383',
                     loadSpeed: 200,
                     opacity: 0.5
             },  
             closeOnClick: true,
             load: true
            });
    }
    }
    </script>

    </head>
    <body>

    <script type="text/javascript">
    function subdebt(choosebox){
        var myField = document.getElementById('subordinate_debt');
        if(myField.value == "1") {
            popup(choosebox); // Calls above function from defined in header
        } else {
            alert("Do not fire popup - you entered: " + myField.value);
        }   
    }
    </script>

    <select name="subordinate_debt" id="subordinate_debt" onchange='subdebt("subordinate_debt");'>
        <option value="" selected="selected"></option>
        <option value="0">No</option>
        <option value="1">Yes</option>
    </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:10:21.693

这是因为您确实将 select 的 id 设置为 facebox 的内容。您想将另一个 div 的 / 元素的 id 传递为 facebox 的内容。

例如：

```
...
<div id="SHOWME" style="display: none;">
Inside facebox
</div>

<select name="subordinate_debt" id="subordinate_debt" onchange='subdebt("SHOWME");'>

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T14:01:28.320

以下更改有效。（感谢“Amit Soni” - oDesk.com 承包商）

```
<script type="text/javascript">
function subdebt(choosebox){
    var myField = document.getElementById('subordinate_debt');
if(myField.value == "1") {
    popup("subordinate_debt_Popup");
} else {
alert("Do not fire popup - you entered: " + myField.value);
}   
}
</script> 
```

并将“subordinate_debt”DIV ID 更改为“subordinate_debt_Popup”

```
<div id="subordinate_debt_Popup" class="facebox">.....</div> 
```

# java - 有哪些好的资源（你推荐）来改进编码风格？

> ID：10542600
> 
> 赞同：1
> 
> 时间：2012-05-10T21:44:35.513
> 
> 标签：java, coding-style

我想知道是否有经验丰富的 Java 程序员可以指出一些资源（可以是网站、书籍、电子书、视频等），这些资源向程序员展示了良好的编程风格。

我查看我的代码并将其与一些在线示例源进行比较，我的只是看起来臃肿、格式不正确，而且不像其他代码那样可读。我知道每个程序员都有自己的风格，但我想改掉我养成的任何不良编程习惯。我希望我的代码能够被一个从未接触过源代码的人阅读。

我知道那里有很多资源，但老实说，我不知道主题的名称是什么。（好的编程结构？好的编程约定？）

我想如果有一些我可以拿起并阅读有关该主题的书籍。

我很感激任何和所有的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:45:46.363

[Clean Code](https://rads.stackoverflow.com/amzn/click/com/0132350882)是一本很棒的书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:48:02.960

您应该查看[完整的代码](http://cc2e.com/)（第 2 版）。

> Code Complete 是一本软件开发书籍，由 Steve McConnell 撰写并由 Microsoft Press 出版，敦促开发人员克服代码并修复编程和“预先设计大”瀑布模型。它也是软件构造技术的概要，从命名变量到决定何时编写子程序。

# c# - WPF MVVM 阻止 SelectedValue 上的绑定以在某些情况下更改值

> ID：10542605
> 
> 赞同：1
> 
> 时间：2012-05-10T21:44:57.970
> 
> 标签：c#, wpf, mvvm

我有一个具有 SelectedDocument 属性和 Documents 属性的视图模型。

Ui 有一个自定义 ListView 控件，其中 ItemsSource 绑定到 Documents，SelectedValue 绑定到 Viewmodel 上的 SelectedDocument。

现在，在某些情况下，在所选文档的设置器中的视图模型中，我需要提出一个对话服务消息来询问某些内容，并且在取消的情况下，我需要防止更改 SelectedDocument。

我可以这样做，但是当我不更改视图模型中的属性值时，我的 UI 和视图模型不同步。

它可能有一些事情要做，因为当双向绑定更新源时调用了属性的设置器。

如何解决？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T22:09:46.950

您必须撤消更改，但您不能直接在 Setter 中执行此操作，而必须使用[此处](https://web.archive.org/web/20171014041337/http://blog.alner.net/archive/2010/04/25/cancelling-selection-change-in-a-bound-wpf-combo-box.aspx)描述的 Dispatcher 。

至于在 MVVM 中使用 Dispatcher，有各种关于为此使用`IDispatcher`接口的帖子，可以在[此处](http://www.mckelt.com/post/2010/05/26/WPF-UI-Thread-Dispatcher.aspx)或[此处](https://stackoverflow.com/questions/3628477/update-a-observablecollection-with-a-background-worker-in-mvvm)或[此处找到](http://mefedmvvm.codeplex.com)（查看 MEFedMVVM.Services.Contracts 命名空间下）。你必须看看其中哪一个适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T03:33:09.557

我假设您使用.Net 3.5？它是一个“已知问题”，并且已在 .Net 4 中进行了更改（注意我说更改不一定是固定的！）

这里有一篇关于更改的博客文章，它还指出了一些关于如何处理 3.5 中的问题的建议

[https://web.archive.org/web/20150925210516/https://karlshifflett.wordpress.com/2009/05/27/wpf-4-0-data-binding-change-great-feature/](http://karlshifflett.wordpress.com/2009/05/27/wpf-4-0-data-binding-change-great-feature/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T21:47:58.817

如果对话框被取消，您应该调用 PropertyChange 事件。这样，UI 层将通过重置 SelectedDocument 来响应。

# jquery - 用jQuery隐藏除第一行之外的所有表行

> ID：10542606
> 
> 赞同：2
> 
> 时间：2012-05-10T21:45:00.587
> 
> 标签：jquery

我在第一行有一个带有下拉 html 选择器的表。第一个选项为空白。

我需要隐藏表中的所有行，除了匹配选择器值的行。如果选择了第一个选项 - 隐藏下面的所有行。我将类用于 TR 的原因，因为某些匹配的选项可能有多行。

**JS**

```
$("#mySelector").change(function(){
    opt = $(this).val();
    if(opt != "") {
        $("." + opt).show();
    } else {
        $("#myTbl tr:not(first-child)").hide(); 
    }
}); 
```

**HTML**

```
<table id="myTbl">
<tr>
   <td>
    <select id="mySelector">
    <option> select one
    <option value="val1"> v1
    <option value="val2"> v12
    <option value="val3"> v3
    </selector>
   </td>
</tr>
<tr class="val1">
   <td>
    asdasd 1
   </td>
</tr>

<tr class="val2">
   <td>
    asdasd 2
   </td>
</tr>

<tr class="val3">
   <td>
    asdasd 3
   </td>
</tr>
</table> 
```

似乎它应该工作，但它没有。我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T21:46:57.517

你错过了`:`以前`first-child`

```
$("#myTbl tr:not(:first-child)").hide(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T21:46:44.140

```
$("#myTbl tr:not(:eq(0))").hide(); 
```

或者：

```
$("#myTbl tr:not(:first)").hide(); 
```

您需要向第一个添加 value 属性`<option>`：

```
<select id="mySelector">
<option value=""> select one // <<<<======
<option value="val1"> v1
<option value="val2"> v12
<option value="val3"> v3
</select> // Not </selector> 
```

[**现场演示**](http://jsfiddle.net/gdoron/qyTpf/)

* * *

请注意，它`opt = $(this).val();`
应该是`this.value` 好的、清晰的、干净的和更快的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T21:48:12.633

试试下面的东西，

```
$("#mySelector").change(function(){
    var opt = $(this).val();
    if(opt != "") {
        $("." + opt).show();
    } else {
        $("#myTbl tr:gt(0)").hide(); 
    }
}); 
```

# amazon-ec2 - 无法连接到 aws 机器：操作超时

> ID：10542607
> 
> 赞同：5
> 
> 时间：2012-05-10T21:45:19.967
> 
> 标签：amazon-ec2, amazon-web-services

我是 AWS 新手并正确创建了密钥对

```
@air~/.ec2 - 14:25:10$ ec2-add-keypair mykey > mykey.pem 
```

并使用相同的密钥运行实例

```
@air~/.ec2 - 14:25:15$ec2-run-instances ami-a29243cb -k mykey -t t1.micro 
```

当尝试连接到机器时，我看到

```
@air~/.ec2 - 14:25:22$ ssh  -v -i mykey.pem ec2-user@ec2-21-20-42-115.compute-1.amazonaws.com
OpenSSH_5.6p1, OpenSSL 0.9.8r 8 Feb 2011
debug1: Reading configuration data /etc/ssh_config
debug1: Applying options for *
debug1: Connecting to ec2-user@ec2-21-20-42-115.compute-1.amazonaws.com [21.20.42.185] port 22.
ssh: connect to host ec2-user@ec2-21-20-42-115.compute-1.amazonaws.com port 22: Operation timed out 
```

我什至尝试过`root@ec2-21-20-42-115.compute-1.amazonaws.com`但没有运气

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T22:45:23.197

这已解决。

**原因**

*   安全组是默认的，而不是我创建的。用命令固定

> ec2-run-instances ami-a29243cb -k mykey -t t1.micro **-g worker**

*   以 ubuntu 而不是 ec2-user 身份登录

> ssh -v -i ~/.ec2/mykey.pem ubuntu@ec2-13-24-2-39.compute-1.amazonaws.com

它就像一个魅力:)

# c# - 在 LINQ 语句的调用中使用变量是否安全？

> ID：10542610
> 
> 赞同：5
> 
> 时间：2012-05-10T21:45:32.417
> 
> 标签：c#, linq

我以前从未这样做过，虽然我想不出它会中断的具体原因，但我想验证使用 out 变量是否有效，如下所示：

```
void Main()
{
    var types = new [] { typeof(A), typeof(B) };
    bool b = false;
    var q = from type in types
            from property in type.GetProperties()
            let propertyName = GetName(property, out b)
            select new {
                TypeName = type.Name,
                PropertyName = propertyName,
                PropertyType = property.PropertyType.Name,
                IsNullable = b
            };
    q.Dump();
}

private string GetName(PropertyInfo property, out bool isNullable)
{
    string typeName;
    isNullable = false;
    var type = property.PropertyType;
    if (type.IsGenericType && type.GetGenericTypeDefinition() == typeof(Nullable<>))
    {
        isNullable = true;
        typeName = type.GetGenericArguments().First().Name;
    }
    else
    {
        typeName = property.Name;
    }
    return typeName;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T21:50:08.490

这将起作用 - 前提是您实际上完全评估了查询。

但是，这种行为会很奇怪，我会强烈避免。由于在查询中直接使用了 out 参数，因此这里的行为将是相当正常的（前提是您不对此做任何其他事情），但这是特定于这个用例的，而不是使用 out 的一般“规则”与LINQ混合。

问题是 LINQ 的延迟执行将导致设置 out 参数，但仅在您*使用*生成的可枚举时，而不是在您声明它时。这可能会导致非常意外的行为，并导致难以维护和理解软件。

我个人只是编写一个单独的方法，并使用它来允许您将查询编写为：

```
var q = from type in types 
        from property in type.GetProperties() 
        let propertyName = GetName(property)
        let nullable = GetIsNullable(property)
        // ... 
```

这更清楚，更不容易出错和错误。`.AsParallel()`如果有人稍后尝试更改它，它也可以与并行化（即：PLINQ via ）和其他技术一起使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T21:52:22.623

这样做在语义上是合法的，但它是否安全在很大程度上取决于你如何做到这一点。这里的基本危险是您将本地的赋值与延迟执行的表达式结合起来，并且可能永远不会执行。

如果集合为空，在这种情况下，调用`GetName`实际上可能永远不会发生。因此，它可能始终保持其原始值`false`（这也是 C# 编译器强制您在此处声明默认值的原因）。如果您的程序可以使用此语义，那么 out 的使用`b`就很好了。实际上，它似乎在这种情况下，因为`b`仅在调用方法后使用。

但是，这是我通常会避免的事情。很容易出错，以至于它只会在极端情况下失败。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T21:52:32.560

这几乎可以工作，**但是**出于各种错误的原因（这是一个坏习惯，因为在更一般的情况下它是不安全的）。一个更安全的想法是一个元组：

```
 let info = GetInfo(property)
        select new {
            TypeName = type.Name,
            PropertyName = info.Item1,
            PropertyType = property.PropertyType.Name,
            IsNullable = info.Item2
        };

....

private Tuple<string,bool> GetInfo(PropertyInfo property)
{
    string typeName;
    bool isNullable = false;
    ...
    return Tuple.Create(typeName, isNullable);
} 
```

For more complex scenarios, a type with sensibly named properties would be even better.

# android - 解析json时出错

> ID：10542611
> 
> 赞同：1
> 
> 时间：2012-05-10T21:45:32.533
> 
> 标签：android, json, parsing, twitter, arrays

我想构建一个基于 android 的 twitter feed 阅读器应用程序。我在解析 json 响应时遇到问题。这是我的代码：

`公共类 HttpClientActivity 扩展 Activity {

```
class Tweet{
    public String username;
    public String message;
}

ArrayList<Tweet> tweets = new ArrayList<Tweet>();

static ArrayList<String> resultRow;

@Override
public void onCreate(Bundle savedInstanceState) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    public class Getdata {

public String getInternetData() throws Exception{

    String data = null;

    try {
        URI website = new URI("http://search.twitter.com/search.json?q=blue%20angels&rpp=5&include_entities=true&result_type=mixed&include_rts=5");
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet();
        request.setURI(website);
        HttpResponse response = client.execute(request);
        HttpEntity entity = response.getEntity();
        data = EntityUtils.toString(entity);

    }catch(Exception e){
        Log.e("log_tag", "Error in http connection: " +e.toString());
    }

    return data;
    }

    }

    Getdata getdata = new Getdata();
    String returned = null;
    try {
        returned = getdata.getInternetData();
    } catch (Exception e) {
        e.printStackTrace();
    }

    try{
        JSONArray jarray = new JSONArray(returned);
        for(int i=0; i<jarray.length(); i++){
            JSONObject jo = jarray.getJSONObject(i);
            Tweet tt = new Tweet();
            tt.username = jo.getString("from_user");
            tt.message = jo.getString("text");
            tweets.add(tt);
        }
    }
    catch(JSONException e){
        Log.e("log_tag", "Error parsing data: "+e.toString());
    }

    ListView lv = (ListView) findViewById(R.id.listView1);

    class FancyAdapter extends ArrayAdapter<Tweet> {

        public FancyAdapter() {
            super(HttpClientActivity.this, android.R.layout.simple_list_item_1, tweets);
        }

        public View getView(int position, View convertView, ViewGroup parent){
            ViewHolder holder;
            if(convertView == null){
                LayoutInflater inflater = getLayoutInflater();
                convertView = inflater.inflate(R.layout.listitem, null);
                holder = new ViewHolder(convertView);
                convertView.setTag(holder);
            }
            else
            {
                holder = (ViewHolder)convertView.getTag();
            }
            holder.populatefrom(tweets.get(position));
            return(convertView);
        }

        class ViewHolder {
            public TextView username = null;
            public TextView message = null;

            ViewHolder(View listitem){
                username = (TextView)listitem.findViewById(R.id.username);
                message = (TextView)listitem.findViewById(R.id.message);
            }

            void populatefrom(Tweet t){
                username.setText(t.username);
                message.setText(t.message);
            }
        }
    }

    FancyAdapter ar = new FancyAdapter();
    lv.setAdapter(ar);

} 
```

}

现在我得到了味精：

> org.json.JSONException：java.lang.String 类型的值无法转换为 JSONArray

我不知道如何修复它：

```
try{
            JSONArray jarray = new JSONArray(returned);
            for(int i=0; i<jarray.length(); i++){
                JSONObject jo = jarray.getJSONObject(i);
                Tweet tt = new Tweet();
                tt.username = jo.getString("from_user");
                tt.message = jo.getString("text");
                tweets.add(tt);
            }
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:52:04.697

要获得 JSONArray，您首先需要一个[JSONObject](http://developer.android.com/reference/org/json/JSONObject.html)：

[http://www.json.org/](http://www.json.org/)

包含数组的示例 JSON 对象：

```
 String returned = "{ "myArray" : [item1, item2] }"

 JSONObject jsonObj = new JSONObject(returned);

 JSONArray jarray = jsonObj.getJSONArray("myArray"); 
```

使用您的示例：[http ://search.twitter.com/search.json?q=blue%20angels&rpp=5&include_entities=true&result_type=mixed&include_rts=5](http://search.twitter.com/search.json?q=blue%20angels&rpp=5&include_entities=true&result_type=mixed&include_rts=5)

```
 JSONObject jsonObj = new JSONObject(returned);
 JSONArray jarray = jsonObj.getJSONArray("results");
 JSONObject firstResult = jarray.getJSONObject(0); // loop if you want more
 String username = firstResult.getString("from_user");
 String message = firstResults.getString("text"); 
```

如果你把它通过这样的格式化程序：http: [//jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)它的 100000x 更容易阅读

# javascript - 强制浏览器发送图片的 http 请求

> ID：10542612
> 
> 赞同：5
> 
> 时间：2012-05-10T21:45:38.487
> 
> 标签：javascript, image, http-headers, browser-cache

我有一个应用程序可以使用 JavaScript 动态加载图像并将它们绘制到画布上。图像可以更改，但我也想利用缓存，因此我使用最后修改的 http 标头并在未修改图像时发送 304 响应。这一切都很好，而且似乎正在工作......

但是发生了一件奇怪的事情（目前只在 OSX 上的 Chrome 和 Safari 中测试过），浏览器偶尔会忽略发送图像请求！在脚本中，我做了一个`new Image()`，并且`onload`函数触发了，但是当我使用网络检查器时，永远不会发出请求。我也可以在服务器端确认没有收到请求。

具有空缓存响应的原始请求具有以下标头：

```
Connection:keep-alive
Content-Length:25937
Content-Type:image/png
ETag:Thu, 10 May 2012 20:48:13 GMT
Last-Modified:Thu, 10 May 2012 20:48:13 GMT 
```

浏览器不应该每次都对该图像发出新请求，因为它具有最后修改的标头吗？当我运行测试时，浏览器似乎每分钟左右只发出一个新请求（无论我尝试加载多少相同图像的副本）......这是预期的行为吗？是否有一些标题组合会强制浏览器每次检查图像是否被修改？或者也许一些 JavaScript 魔法可以解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:59:17.740

我不知道您是否找到了解决问题的方法，但我一直在努力解决完全相同的问题，我想我现在有了解决方案。我所做的是使用 ajax 调用来发出请求，而不是将图像作为 image/jpeg 类型的文件返回，而是将数据作为 base64_encoded 数据返回，并在客户端通过将 src 设置为数据来呈现 img乌里。使用 jQuery，它看起来像这样：

```
jQuery.ajax({
    url: imageURL,
    headers: {'Max-Age':0},
    success: function(d){
                jQuery(imgElement).attr('src','data:image/jpeg;base64,'+d);
             },
    error: function(){/*handle error*/},
    complete: function(){/* handle complete*/}
 }); 
```

这对我有用。我希望这对你有帮助。

# xcode4.3 - Xcode 4.3.2 安装在哪里？

> ID：10542617
> 
> 赞同：3
> 
> 时间：2012-05-10T21:46:17.687
> 
> 标签：xcode4.3

我从 iOS 开发者网站下载了 xcode_432_lion.dmg。我双击它并通过安装程序。这似乎将 .dmg 文件挂载为卷。Xcode.app 可从虚拟设备获得。有没有其他人看到过这种行为？如何从普通硬盘设备运行 Xcode？这整件事让我很困惑，我还没有看到任何安装指南。

![在此处输入图像描述](../Images/4a91b4c5f0e77aa5acf06c1e63d759d4.png)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:31:41.583

好吧，这是像我这样无知的人的答案。要安装 Xcode 4.3.2，请双击 .dmg 文件。然后将 Xcode 图标拖放到硬盘上的某个位置，最好放在 /Applications 文件夹中。

我之前所做的是直接从 .dmg 文件（由 OS X 作为设备安装）中运行 Xcode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:48:36.973

检查你的主目录，应该有一个名为 Developer 的文件夹，它是 XCode 的安装位置。

# ubuntu - 为 x86 构建 FreeRTOS

> ID：10542618
> 
> 赞同：6
> 
> 时间：2012-05-10T21:46:17.753
> 
> 标签：ubuntu, operating-system, x86, freertos

我在网上看到可以在 Windows 上为外部设备构建 FreeRTOS。你可以在 ubuntu 上为 x86 构建它吗？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-11T08:10:16.553

您可以在带有 FreeRTOS 的 X86 上做几件事。

第一个是将 FreeRTOS 作为 CPU 上的操作系统运行。FreeRTOS 适用于微控制器，因此仅（官方）支持实模式（16 位）。如果您在基于 186 的微控制器上运行，例如以前由 AMD 和然后（现在？）RDC 制造的微控制器，这是有效的。您还可以在任何 X86 上运行代码，但只能在实模式下运行，它曾经是使用 Open Watcom 等工具的核心 FreeRTOS 代码的开发平台。我不确定是否有等效的 Linux 托管 16 位编译器，但可能有一个。

在 X86 上使用 FreeRTOS 的另一种方法是运行 FreeRTOS 模拟器。完成后，FreeRTOS 不是运行 CPU 的内核，而是 Windows 或 Linux 运行 CPU，但 Windows 或 Linux 线程运行 FreeRTOS 代码。那是现在做核心开发工作的首选方式——但它只是一个模拟器，这意味着时间到处都是，模拟时间比实时低得多（因为与 Windows 中的时间分辨率和准确性相比是如此之低到实时系统）。

Windows 模拟器可以与 Visual Studio（免费版）一起运行，并且该端口得到维护。您也可以将它与 MingW 和 Eclipse 一起使用，尽管演示功能较少，而且我相信更高版本的 Eclipse 存在一些问题。

Linux FreeRTOS 模拟器是一个贡献的端口，所以我不能真正评论它。

Windows 模拟器页面： [http ://www.freertos.org/FreeRTOS-Windows-Simulator-Emulator-for-Visual-Studio-and-Eclipse-MingW.html](http://www.freertos.org/FreeRTOS-Windows-Simulator-Emulator-for-Visual-Studio-and-Eclipse-MingW.html)

Linux 模拟器页面： [http ://www.freertos.org/FreeRTOS-simulator-for-Linux.html](http://www.freertos.org/FreeRTOS-simulator-for-Linux.html)

问候。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T21:55:36.013

根据[FreeRTOS 端口页面](http://www.freertos.org/RTOS_ports.html)，x86 构建支持的工具是：

*   Visual Studio 2010 速成版
*   明文
*   打开沃通
*   博兰
*   范例

所以你的问题的答案似乎是否定的。

由于以上都是基于 Windows 的工具，我猜您需要一台 Windows PC 来构建 x86 版本的 FreeRTOS，尽管您可能能够在 Ubuntu 下使用诸如 WINE 之类的模拟器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-07-22T19:48:07.817

我不知道如何构建 FreeRTOS 以在基于 x86 的成熟计算机上*作为操作系统运行，但我真的很想了解自己！*

## 如何在 Linux 上构建和运行 freertos

但是，我可以说我能够非常轻松地在 Linux 上运行 FreeRTOS*模拟器。*我不能真正评论它是多么“实时”，据说（它明确指出它不是实时的，因为它运行在非实时 Linux 内核之上），但是构建和运行它非常容易.

在此处获取源代码：[https](https://github.com/FreeRTOS/FreeRTOS) ://github.com/FreeRTOS/FreeRTOS 。以下是如何在 Linux 上构建和运行模拟器：

```
git clone https://github.com/FreeRTOS/FreeRTOS.git --recurse-submodules
cd FreeRTOS/FreeRTOS/Demo/Posix_GCC
make 
```

现在它已建成。要运行它，请执行以下操作：

```
./build/posix_demo 
```

而已！效果很好！这是演示项目：[https](https://github.com/FreeRTOS/FreeRTOS/tree/main/FreeRTOS/Demo/Posix_GCC) ://github.com/FreeRTOS/FreeRTOS/tree/main/FreeRTOS/Demo/Posix_GCC 。

然后，您可以自己修改该项目，以根据您的确切需求和目的对其进行自定义。只需从该演示开始作为基线即可开始。这是一个很棒的小演示，有 2 个任务（线程）和一个线程安全队列（多生产者/多消费者兼容）在它们之间传递数据。

## 参考

1.  主要的 FreeRTOS Linux 模拟器参考页面：[https](https://www.freertos.org/FreeRTOS-simulator-for-Linux.html) ://www.freertos.org/FreeRTOS-simulator-for-Linux.html 。您也可以在那里查看他们的构建和运行说明。

# asp.net-mvc - 如果 asp.net MVC 的 for 循环中的逻辑

> ID：10542619
> 
> 赞同：0
> 
> 时间：2012-05-10T21:46:18.667
> 
> 标签：asp.net-mvc, razor

我有以下代码，当我看到项目中的剃刀语法被丢在我的腿上时，我担心这是一场噩梦。它不明白什么是代码，什么是 HTML。

```
@for (int i = 0; i < Model.Instructor.Classes.Count;i++ )
        {
            var c = Model.Instructor.Classes[i];
            var mod = (i%2);
            if (mod==1)
            {
                <tr>
                   }

                    <td>
                        @c.Subject @c.CatalogNumber -  @c.Section
                    </td>
                    if (mod==0)
                    {
                </tr>
            }

        } 
```

我只是想做一个简单的多列表，因为页面上的项目列表太长。它打印出我的 if 逻辑，就好像它是文本一样。如果我在它前面放一个@，它会给我一个语法错误。似乎应该有一个控件，但我看到的所有控件都担心 alt 样式，而不是放置数据的列数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T21:54:26.117

对于初学者，删除分号。Razor 语法不使用它们。更重要的是，你不应该在你的观点中写东西`var c = Model.Instructor.Classes[i];`。视图应该只绑定到应该从控制器构建/返回的视图模型。

您可以在控制器中设置`ViewBag`映射到您想要的这些值的属性。像这样的实际逻辑不应该出现在视图中。

最后，如果 Razor 在解析需要解析的哪些术语时遇到问题（正如您在问题开头提到的那样，这是一个潜在的陷阱），您可以使用[标签`<text>`明确](http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx)概述哪些部分应该是文本。

# jquery - jQuery Validate 不评估所有字段

> ID：10542620
> 
> 赞同：5
> 
> 时间：2012-05-10T21:46:25.270
> 
> 标签：jquery, validation, jquery-validate

我正在为一个页面设计一个新的布局，它是一个基于向导的客户订购系统。他们订购材料组，但这些材料可以在订购过程中组合在一起，以便他们可以订购 10 个小部件，例如红色、蓝色和/或绿色的任意组合。字段的总和不能超过预先计算的最大值。大多数材料是每组简单的单一选择。

我在其他页面中使用了 jQuery 验证，并且我使用了 addClassRules 方法来验证页面上的所有输入元素，它工作得很好。我正在处理的当前示例让我感到困惑，因为它仅在表单提交时捕获第一个验证失败，但在提交后它通常会捕获其他验证失败，但不会捕获验证失败的完整列表。

这是我的 jsfiddle 示例，因此您可以看到我放在一起的内容：http: [//jsfiddle.net/brianmat/2nV5u/](http://jsfiddle.net/brianmat/2nV5u/)

我使用了一个错误计数片段，该片段在多个站点上都没有问题。在此示例中，即使所有 7 个文本框都留空，我也只会收到 1 个错误。

我在这里唯一的主要区别是我正在做一个行跨度来对我的项目进行分组，但我看不出哪里会出现问题。我知道这最终会变得非常简单，但此时我只是碰壁了。

jQuery 验证代码没有什么花哨的：

```
 $.validator.addClassRules({
    NumericInput: {
        required: true
    }
});

$("#theForm").validate({
    invalidHandler: function(e, validator) {
        var errors = validator.numberOfInvalids();
        if (errors) {
            var message = errors == 1 ? 'You missed 1 field. It has been highlighted below' : 'You missed ' + errors + ' fields.  They have been highlighted below';
            $("div.error span").html(message);
            $("div.error").show();
        } else {
            $("div.error").hide();
        }
    },
    errorPlacement: function(error, element) {},
    submitHandler: function(form) {
        $("div.error").hide();
        form.submit();
    }
}); 
```

其余代码仅处理小计和仅数字数据输入。

我完全愿意用不同的方法来处理这个问题，所以废弃我当前的代码并找到可以正常工作的东西不是问题。如果那是我最终要做的事情，我宁愿不要尝试将方形钉子放入圆孔中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T12:46:17.373

不要忘记那个讨厌的`name`属性：

```
<input id="Text1" name="Text1" type="text" class="NumericInput group1" materialgroup="1" />
<!--              ^^ --> 
```

**更新示例：http:** [//jsfiddle.net/2nV5u/6/](http://jsfiddle.net/2nV5u/6/)

此外，请考虑使用`data-*`属性而不是向元素添加您自己的属性（即`data-materialgroup`，而不是`materialgroup`）。

# spotify - 在后台捕获 Spotify 应用程序事件

> ID：10542621
> 
> 赞同：2
> 
> 时间：2012-05-10T21:46:30.183
> 
> 标签：spotify

我正在观察 Player 模型和 console.logging 当前播放的歌曲的变化。

当我离开应用程序时，它工作正常 - 但只有一分钟左右。

有没有办法让应用程序保持活力？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:01:04.640

目前，在取消选择上下文后，应用程序对象仅存在 60 秒。

# ruby-on-rails - 如何在每个请求中修改 ActiveAdmin 中的“标头”部分？

> ID：10542630
> 
> 赞同：1
> 
> 时间：2012-05-10T21:47:13.460
> 
> 标签：ruby-on-rails, activeadmin

我是 ActiveAdmin 的新手，当某些情况出现时，我试图显示大而大胆的警告。

阅读文档后，我不知道该怎么做。

我设法做的最好的事情是根据某些条件选择性地注册页面或不注册它们。这样做的目的是有选择地添加菜单元素。这在开发中有效，但在生产中失败，因为代码不会在每个请求中重新加载。

```
if warnings
  main_menu_title = fatal ? "Fatal Warnings" : "Warnings"

  ActiveAdmin.register_page main_menu_title do
    menu :priority => 99
  end
  ActiveAdmin.register_page "Warnings_job_count" do
    menu :label => "#{delayed_job_count} delayed jobs", :parent => main_menu_title, :priority => 1
  end
  ActiveAdmin.register_page "Warnings_job_errors" do
    menu :label => "#{delayed_job_error_count} delayed jobs with errors", :parent => main_menu_title, :priority => 2
  end
end 
```

所以，简而言之，问题是......是否可以在某处声明一个块，它将在每个请求，所有页面中执行，并且能够向菜单添加元素，或者以某种方式修改标题部分？

非常感谢！
丹尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T22:26:41.757

您可以按照此处的说明使用此[内容 https://stackoverflow.com/a/7218598/807442](https://stackoverflow.com/a/7218598/807442)

```
# app/admin/views/header_renderer.rb  
module ActiveAdmin
    module Views
      class HeaderRenderer
        def to_html
          title + custom_block + global_navigation + utility_navigation
        end

        def custom_block
          # Your custom block
        end
      end
    end
  end 
```

您还可以像这样将项目添加到菜单中：

```
current_menu.add(main_menu_title , url_symbol, priority)

# For sub-items
main_menu = current_menu[main_menu_title]
main_menu.add(sub_item_title, url_symbol, priority) 
```

但是，如果您添加这些，它们将在以后的请求中保留在那里。因此您可能还需要在每个请求中删除它们，然后只添加必要的。为此，请添加以下内容：

```
module ActiveAdmin
  class Menu
    def remove(name)
      item = self[name]
      return if item.nil?
      @items.delete(item)
    end
  end
end 
```

您可以按名称删除。

# actionscript-3 - Flex 4 - 添加动态透明蒙版

> ID：10542633
> 
> 赞同：1
> 
> 时间：2012-05-10T21:47:38.100
> 
> 标签：actionscript-3, flex4, masking

我试图实现的是一个简单的 flex 掩码，但我没有得到正确的方法或正确的方法。我什至不确定是否可以仅使用屏蔽方法。

我需要屏蔽整个 mc 并允许用户仅查看特定的矩形点。

我使用下面的代码完成了它（与原始代码略有不同）

```
 var s:Sprite = new Sprite();
  var g:Graphics = uc.graphics;         
  g.beginFill(0xff000,0.5);
  g.drawRect(0,0,100,100);
  g.endFill();
  s.x = 50;
  s.y = 50;
  obj.addChild(s);
  obj.mask = s; 
```

上面的代码创建了一个 100x100 的矩形，并作为蒙版应用到另一个影片剪辑 obj 上。

这很好用，在这里我稍微想改变掩蔽的正常行为。这是通过使蒙面区域（不可访问区域）透明而不是完全隐藏它。

可能吗？

**更新**：

根据 Baris Uskli 的建议添加完整的修改后的 flex 代码：

**掩码视图.mxml**

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx" left="0" top="0" width="100%" height="100%" creationComplete="showMask()"
         blendMode="layer">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <!--<s:Rect width="100%" height="100%">
        <s:fill>
            <s:SolidColor color="0x00aabb" alpha="0.5" />
        </s:fill>
    </s:Rect>-->
    <fx:Script>
        <![CDATA[
            import mx.core.UIComponent;

            //public static var app:Object;
            //private var
            public var conf:LightBoxConfiguration;

            public function showMask():void{

                this.graphics.beginFill(0x000000,0.6);
                this.graphics.drawRect(0,0,stage.stageWidth,stage.stageHeight);
                this.graphics.endFill();

                var uc:UIComponent = new UIComponent();
                uc.mouseEnabled = false;

                var g:Graphics = uc.graphics;

                g.beginFill(0xff000,0.5);

                if (conf.shape == "box"){

                    uc.width = conf.width;
                    uc.height = conf.height;
                    //TODO:need to fix this
                    g.drawRect(0,0,conf.width,conf.height);

                }else{

                    uc.width = conf.radius*2;
                    uc.height = conf.radius*2;

                    g.drawCircle(0,0,conf.radius);
                }
                g.endFill();

                uc.x = conf.x;
                uc.y = conf.y;
                uc.blendMode = BlendMode.ERASE;
                this.addElement(uc);
            }
        ]]>
    </fx:Script>
</s:Group> 
```

呼叫者

```
 var lbc:LightBoxConfiguration = new LightBoxConfiguration("box",100,100);

            lbc.height = 200;
            lbc.width = 300;

            var msk:MaskView = new MaskView();

            msk.conf = lbc;
            FlexGlobals.topLevelApplication.addElement(msk); 
```

这给出了预期的效果，但不幸的是我无法点击矩形区域。我已设置 mouseEnabled = false; 也，但它没有用。我想我离实现它还差几步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:00:39.803

可以使用 BlendModes。这是一些绘制全屏透明精灵并在其中遮盖矩形区域的代码。

```
private function mask():void
{
   this.graphics.beginFill(0x000000, 0.6);
   this.graphics.drawRect(0, 0, stage.stageWidth, stage.stageHeight);
   this.graphics.endFill();

   var maskSprite:Sprite = new Sprite();
   maskSprite.graphics.beginFill(0xffffff, 1);
   maskSprite.graphics.drawRect(x,y,width,height);
   maskSprite.graphics.endFill();

   addChild(maskSprite);

   this.blendMode = BlendMode.LAYER;
   maskSprite.blendMode = BlendMode.ERASE;
} 
```

希望有帮助。

编辑：一些只使蒙版区域可点击的魔法，并不完美，但也许有人可以改进。您可以将整个内容粘贴到一个空的 Flex 4 应用程序中，然后尝试通过蒙版或灰色区域单击按钮，蒙版区域将起作用。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark"
           xmlns:mx="library://ns.adobe.com/flex/mx"
           creationComplete="showMask()"
           addedToStage="onAddedToStage()"
           >

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<s:Button label="test" x="140" y="120" click="onButtonClicked(event)"></s:Button>

<s:Group id="maskGroup" blendMode="layer"  width="800" height="600" ></s:Group>

<fx:Script>
    <![CDATA[
        import flash.display.DisplayObject;
        import flash.display.Sprite;
        import flash.events.MouseEvent;
        import flash.geom.Point;
        import mx.controls.Alert;
        import mx.core.UIComponent;

        private var uc:UIComponent = new UIComponent();

        private function onAddedToStage():void
        {
            this.addEventListener(MouseEvent.CLICK, onMouseClicked, true);
        }

        private function onButtonClicked(e:MouseEvent):void
        {
            Alert.show("clicked button");
        }

        private function onMouseClicked(e:MouseEvent):void 
        {
            var objects:Array = getObjectsUnderPoint(new Point(stage.mouseX, stage.mouseY));
            var clickedInMask:Boolean = false;
            for each (var dp:DisplayObject in objects) 
            {
                if (dp == uc)
                {
                    clickedInMask = true;
                    break;
                }
            }               
            if(!clickedInMask)
                e.stopImmediatePropagation();

        }

        private function showMask():void
        {
            maskGroup.mouseEnabled = false;
            maskGroup.mouseChildren = false;

            var sp:Sprite = new Sprite();
            sp.graphics.clear();
            sp.graphics.beginFill(0x000000,0.6);
            sp.graphics.drawRect(0,0,800,600);
            sp.graphics.endFill();

            var spC:UIComponent =  new UIComponent();
            spC.addChild(sp);
            maskGroup.addElement(spC);

            uc.x = 100;
            uc.y = 100;
            maskGroup.addElement(uc);

            var g:Graphics = uc.graphics;

            g.beginFill(0xffffff,1);

            g.drawRect(0,0,100,100);

            g.endFill();                

            uc.blendMode = BlendMode.ERASE;

        }
    ]]>
</fx:Script> 
```

# ios - 获取 UINavigationBar 委托以允许“返回”，并带有漂亮的动画

> ID：10542635
> 
> 赞同：9
> 
> 时间：2012-05-10T21:47:49.800
> 
> 标签：ios, cocoa-touch, uinavigationcontroller, uinavigationbar

iPhone上的场景：

用户点击后退按钮，`UINavigationBar`委托方法（在 的子类中实现`UINavigationController`）返回`YES`，如下所示：

```
- (BOOL)navigationBar:(UINavigationBar *)navigationBar shouldPopItem:(UINavigationItem *)item
{
    // Verify stuff...

    return YES;
} 
```

现在，根据[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBarDelegate_Protocol/Reference/Reference.html)，保持导航栏和内容同步是应用程序的责任，而这样做的地方是在委托方法中

```
- (void)navigationBar:(UINavigationBar *)navigationBar didPopItem:(UINavigationItem *)item 
```

问题是，`didPopItem`只有在导航栏的弹出动画序列完成后才会调用，所以如果我`[self popViewControllerAnimated: NO]`在那里调用，最终结果是导航栏首先滑回，然后是内容。

这看起来是错误的。

`pop...`如果我在委托方法中调用导航控制器`shouldPop...`，我会收到一条错误消息，表明我正在重叠动画，并且最终状态不干净。

所以我的问题是，是否有另一种方法可以让 UINavigationController 更改内容，最好使用与导航栏同步的漂亮动画，但不会在导航栏和导航控制器之间造成混淆？

目标操作系统是 iOS 4.2 及更高版本。

我知道我可以创建另一个左按钮来代替后退按钮，但我发现使用委托更简洁，另外，我得到了一个“真正的”后退按钮，这正是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T05:53:59.870

如果您使用的是 UINavigationController，则不需要自己管理它。只需使用 UINavigationController，您就可以省去很多麻烦。它将负责弹出内容视图以及导航栏项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:38:29.880

尝试这个：

想象一下，你有 viewControllerA 和 viewControllerB。viewControllerA 是第一个，不需要导航栏，而 viewControllerB 需要。

在 viewControllerA中的方法`viewWillAppear`上放代码：

```
[self.navigationController setNavigationBarHidden:YES animated:YES]; 
```

当弹出 viewControllerB 时，您会使用动画。两个动画将自动同步。

不知道这对iOS4.2是否有效

# python - 在 Python 中构建时如何包含 3rd 方包？

> ID：10542638
> 
> 赞同：1
> 
> 时间：2012-05-10T21:47:53.167
> 
> 标签：python, python-2.7

我正在编写一个程序，该程序依赖于已安装第三方软件包的用户。有什么方法可以将这些软件包包含在我的安装程序中，还是必须单独安装它们？如果重要的话，我在 2.7 中使用 distutils。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:51:57.193

这取决于第 3 方包的复杂性。如果它是纯 python，您可以简单地将它与您的其余代码捆绑在一起。如果它需要更复杂的安装过程，您可能需要用户自己安装。

# apache - Apache 返回 Content-Type text/plain 而不是 text/html

> ID：10542639
> 
> 赞同：2
> 
> 时间：2012-05-10T21:47:57.073
> 
> 标签：apache, content-type

我正在将应用程序从 HP-UX 迁移到 Solaris

Apache 1.3.27 HP-UX B.11.11 U 9000/800 Solaris SunOS 5.10 Generic_147440-10 sun4u sparc SUNW,SPARC-Enterprise

在 solaris 中，我的整个应用程序运行良好，除了一个没有被解释的页面。我的网络服务器向我的网页发回了错误的内容类型。它不是发送 text/html，而是发送 text/plain。我已经用 Fiddler 进行了检查。当我访问资源时，我只看到 html 代码，作为纯文本。CGI 脚本没问题。我已经在 httpd.conf 文件中将 DefaultType 更改为 text/html。mime.types 文件还具有内容类型 .html 和 .htm 扩展名 我可以在 httpd.conf 文件中设置一些其他参数以发送正确的内容类型吗？

PS。我无法升级 apache，因为我无权这样做。我必须在这种环境下工作。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-20T22:23:03.367

豪尔赫，你可能已经找到了解决方案，因为它是一年前的帖子。无论如何我都会发布它，因为现在“duckduckgo-ing”并没有给出答案（或者我是一个糟糕的duckduckgoer）。这是我对我经常使用的惊人知识库的微小（也是第一次）贡献。

**解决方案：**

`mime`应添加和配置模块。

我发现如果模块已加载（内置到 Apache 中或作为 mod_mime.so）但文件`mime.types`不存在（或位于其他地方，而不是我“说”它在我的 TypesConfig 中的位置）然后 Apache 不会启动产生错误信息。如果模块未加载（或未编译），那么我将使用*text/plain 而不是 text/html*与主题启动器描述的完全一样。

检查模块是否被编译成 Apache 可执行文件（检查该类型

`#httpd -l`

或者

`#apache2 -l`

取决于它在您的系统上的调用方式）。如果没有编译进去，那么你需要在httpd.conf中手动添加（或者apache2.conf，同样取决于你的系统）

```
LoadModule mime_module {full path to your mod_mime.so without the braces} 
```

[您可以使用命令find 找到](http://linux.die.net/man/1/find "find")它的确切位置

```
#find / -name mod_mime.so 
```

然后，在 httpd.conf 下面的某处添加以下行

```
# mime
TypesConfig conf/mime.types
DefaultType text/plain 
```

并重新启动您的 Apache。请注意，文件输入的路径不是文件`mime.types`的`TypesConfig`完整路径，而是与您的`ServerRoot`路径相关，因此请进行相应调整（如果需要）。

**警告！**

要检查它是否有效，首先清除您的浏览器缓存！我花了一段时间才发现服务器已经修复，但我的两个浏览器都提供了页面的旧副本，即使我确实按下了“重新加载页面”按钮。仅在我明确清除缓存后才起作用。

**附言**

我认为它应该在*serverfault*上，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-06T16:22:15.307

我有一个类似的问题，Apache 返回 Content-Type text/plain 而不是 text/html。

我为解决这个问题所做的是：

第 1 步：查找文件 mime.types 的位置。在我的 Ubuntu 框中，它是 /etc/mime.types，它应该包括以下行：

```
文本/html html htm shtml
```

第 2 步：在 apache2.conf 中，将“TypesConfig conf/mime.types”替换为“TypesConfig /etc/mime.types”。

第3步：重新启动apache，它就可以工作了。

我的 Apache 版本是：

```
$ /usr/sbin/apache2 -V
服务器版本：Apache/2.2.22 (Ubuntu)

```

# mysql - 在用户供稿中对连续帖子进行分组

> ID：10542647
> 
> 赞同：4
> 
> 时间：2012-05-10T21:48:44.550
> 
> 标签：mysql, database-design, grouping, feed

我有一个图片帖子的用户供稿。每个用户都可以发布单个图像，但是，他可以经常重复该动作。比如说，在一小时内上传几张图片。

我如何有效地设计数据库表，以便当用户在一小时内发布多张图片（一张一张）时——我可以轻松地将这些*连续*帖子组合在一起，例如在 INSERT 或 SELECT 上？

* * *

不建议多上传表单。事实并非如此：我刚刚用更常见的术语描述了这项任务:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T21:58:12.313

您可以为每个帖子存储一个时间戳，然后从下一个中选择时间戳小于某个阈值的每个项目吗？

另一个想法是在每个帖子中存储时间戳和“组号”。在存储帖子之前，执行 a以查找在最后几分钟`SELECT`内提交的帖子。`n`如果您找到一个，请为新帖子使用相同的组号。如果您不这样做，则增加新帖子的组号。然后您可以按组号选择以找到您想要的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T11:50:08.837

我想数据模型看起来像这样：

![在此处输入图像描述](../Images/7bf560e25a958bb2ee80efa023b30743.png)

只需注意确保帖子之间的时间差异大于 TIMESTAMP 的分辨率（或准备好优雅地处理 PK 违规）。

在支持分析功能的 DBMS 中，您可以相当轻松地将时间上接近的帖子分组。例如，Oracle 查询分组的帖子（对于给定的用户）在一个小时内，看起来像这样：

```
SELECT T.*, SUM(DIFF) OVER (ORDER BY TIMESTAMP) GROUPING
FROM (
    SELECT
        IMAGE.*,
        CASE
            WHEN TIMESTAMP <= LAG(TIMESTAMP) OVER (ORDER BY TIMESTAMP)
                + INTERVAL '1' HOUR
            THEN 0
            ELSE 1
            END DIFF
    FROM IMAGE
    WHERE USER_ID = :user_id
) T; 
```

生成的 GROUPING 字段将识别 TIMESTAMP “足够接近”的各个行组。这个查询也非常有效——它只是对 PK 索引的范围扫描。您可以在[SQL Fiddle](http://sqlfiddle.com/#!4/811df/72)中使用它。

不幸的是，MySQL 不支持分析功能，但在应用程序级别上做基本相同的功能应该没有问题。只是`SELECT ... ORDER BY TIMESTAMP`，线性遍历结果，看看当前行和上一行有什么区别。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T19:41:55.510

那是操场：

```
CREATE TABLE `feed`(
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `tm` INT UNSIGNED NOT NULL COMMENT 'timestamp',
  `user_id` INT UNSIGNED NOT NULL COMMENT 'author id',
  `image` VARCHAR(255) NOT NULL COMMENT 'posted image filename',
  `group` INT UNSIGNED NULL DEFAULT NULL COMMENT 'post group',
  PRIMARY KEY(`id`),
  INDEX(`user_id`),
  INDEX(`tm`,`group`)
  ); 
```

我们想将时间上接近的帖子组合在一起。

首先，声明所需的粒度：时间接近度的阈值：

```
SET @granularity:=60*60; 
```

每行形成一个组，组 ID 与行 ID 匹配（也可以是时间戳）：

```
SELECT `g`.`id` AS `group`
FROM `feed` `g`; 
```

每个组包含来自同一用户的行，发布时间早于 group-former：

```
SELECT `g`.`id` AS `group`, `f`.*
FROM `feed` `g`
    CROSS JOIN `feed` `f`
    ON (`f`.`user_id` = `g`.`user_id` 
        AND `f`.`tm` BETWEEN `g`.`tm`-@granularity AND `g`.`tm`
    ) 
```

每行属于多个组。对于每一行，我们选择最“广泛”的组：它具有最大的 rowId

```
SELECT MAX(`g`.`id`) AS `group`, `f`.*
FROM `feed` `g`
    CROSS JOIN `feed` `f`
    ON (`f`.`user_id` = `g`.`user_id` 
        AND `f`.`tm` BETWEEN `g`.`tm`-@granularity AND `g`.`tm`
    )
GROUP BY `f`.`id` 
```

最近更新的组总是跳到顶部（如果您按`group`DESC 排序）。但是，如果您希望这些组是持久的（例如，这样项目不会从一个组移动到另一个组），请使用`MIN`代替`MAX`：

```
SELECT MIN(`g`.`id`) AS `group`, `f`.*
FROM `feed` `g`
    CROSS JOIN `feed` `f`
    ON (`f`.`user_id` = `g`.`user_id` 
        AND `f`.`tm` BETWEEN `g`.`tm` AND `g`.`tm`+@granularity
    )
GROUP BY `f`.`id` 
```

现在，我们将更新表格的`group`列。首先，MySQL 无法更新您正在读取的同一张表。我们需要一个临时表。第二：我们只更新列为`group`NULL 的行，或者发布晚于的行`UNIX_TIMESTAMP()-2*@threshold`：

```
CREATE TEMPORARY TABLE `_feedg`
SELECT MAX(`g`.`id`) AS `group`, `f`.`id`
FROM `feed` `g`
    CROSS JOIN `feed` `f`
    ON (`f`.`user_id` = `g`.`user_id` 
        AND `f`.`tm` BETWEEN `g`.`tm`-@granularity AND `g`.`tm`
    )
WHERE `f`.`group` IS NULL 
    OR `f`.`tm` >= (UNIX_TIMESTAMP()-2*@granularity)
GROUP BY `f`.`id`; 
```

并更新`group`列：

```
UPDATE `feed` `f` CROSS JOIN `_feedg` `g` USING(`id`)
SET `f`.`group` = `g`.`group`; 
```

这是 SQLFiddle：[http ://sqlfiddle.com/#!2/be9ce/15](http://sqlfiddle.com/#!2/be9ce/15)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T13:20:35.203

“o_O Tync”的解决方案不会在 1 小时内对添加的项目进行分组，例如：1:00、1:40、2:30。只有最后两个将被分组。

这是没有临时表和连接（同一张表）的超快 Mysql 解决方案。

```
创建表`饲料`（
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `tm` INT UNSIGNED NOT NULL COMMENT 'timestamp',
  `user_id` INT UNSIGNED NOT NULL COMMENT 'author id',
  `image` VARCHAR(255) NOT NULL COMMENT '发布的图像文件名',
  `group` INT UNSIGNED NULL DEFAULT NULL COMMENT 'post group',
  主键（`id`），
  索引（`user_id`），
  索引（`tm`，`组`）
  );

SET @粒度:=60*60;
更新提要 f CROSS JOIN (
  选择
    g.id,
    @id:=COALESCE(IF(ISNULL(@prev_date) OR (user_id!=@prev_user_id) OR NOT(@prev_date-tm BETWEEN 0 AND @granularity), g.id, NULL), @id)
    +最少（0，@prev_date:=tm）
    +least(0, @prev_user_id:=user_id) 作为 group_id    
  FROM (SELECT @prev_date:=null, @id:=null, @user_id:=null) r, feed g
  ORDER BY user_id DESC, tm DESC
) z 使用 (id)
SET f.group = z.group_id;

```

[http://sqlfiddle.com/#!2/02a98/1/0](http://sqlfiddle.com/#!2/02a98/1/0)

# python - python：无法使用 Popen 调用 sudo？

> ID：10542648
> 
> 赞同：2
> 
> 时间：2012-05-10T21:48:56.463
> 
> 标签：python, centos, nagios

我正在尝试调试使用 NRPE 的 nagios 插件（check_aacraid.py）。有问题的系统是一个新设置的 CentOS 6.2 文件服务器。

似乎给我带来麻烦的命令是：

```
for line in Popen(["/usr/bin/sudo", "/usr/bin/arcconf", "GETCONFIG", "1", "LD"],
                  stdin=PIPE, stdout=PIPE, close_fds=True).stdout: 
```

如果我以“nagios”用户身份运行脚本，它工作正常。如果从 NRPE/XINETD 调用它会失败（NRPE 报告“无法读取输出” - usu 表示错误）。

我用 strace 观察了 xinetd 的输出，发现了这个：

```
7706  execve("/usr/bin/sudo", ["/usr/bin/sudo", "/usr/bin/arcconf", "GETCONFIG", "1", "AD"], [/* 15 vars */]) = -1 EACCES (Permission denied) 
```

我试图弄清楚它是否有问题：
-python
-sudo
-nagios
-xinetd
-other

我已经解决了 sudo 的问题并完成了 std 的事情（注释掉 'requiretty'，设置路径，使用 'NOPASSWD' 添加 nagios 用户）。还没发现问题。

其他命令通过 NRPE（'check_user' 等）运行良好。

注意：这是一个已发布的、已建立的 nagios 插件。我在这个系统上做错了什么，导致它无法正常工作。

建议？

问题解答：
1) 如果我以“nagios”身份登录，我可以运行该应用程序。
2) 使用 'visudo' 我有这个条目：'nagios ALL=(ALL) NOPASSWD:ALL'
- 是的，它是一个安全漏洞。当我得到这个东西时，我会收紧它。
3) /usr/bin/sudo 的权限是---s--x--x。2 根 215144 5 月 9 日 23:59 /usr/bin/sudo

看来 SELinux 是问题所在。当我 'echo 0 > /selinux/enforce' 时，应用程序运行正常。现在要弄清楚如何使用它而不是绕过它。@Josh - 将此作为答案发布，我很乐意接受！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:00:47.220

听起来 SELinux 是个问题。如果从 xinetd 执行 sudo 得到一个权限被拒绝错误并且在 xinetd 之外执行它成功，那么似乎 SELinux 之类的东西可能正在执行拒绝它的策略。

# java - Java GUI：文档对象模型

> ID：10542652
> 
> 赞同：7
> 
> 时间：2012-05-10T21:49:35.603
> 
> 标签：java, swing, dom, defaultstyleddocument

HTML 有一个文档对象模型，然后 Javascript 可以对其进行操作/移动。

当我在 Swing 中创建 GUI 时——模型看起来非常不同（我不知道模型的名称），因为我正在创建布局管理器，并将对象粘贴在其中。

我的问题：有没有办法以类似 DOM 的方式操作 Java GUI？

[例如，我希望能够删除/添加节点、移动孩子等...]

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T22:07:10.807

对于 Swing 组件，一切都从一组 JFrame 开始（您也可以有 JWindow 和 JDialog，但通常至少有一个根框架）。最有可能的是，您只关心该 JFrame 的 contentPane（但您也可以关心它的ownedWindows 等...）。

因此，从 JFrame 中，您可以获得如下内容窗格：

```
Container contentPane = frame.getContentPane(); 
```

从那里，您可以开始使用以下组件树：

```
Component[] children = contentPane.getComponents(); 
```

从一个孩子，你可以得到它的父母：

```
Container parent = child.getParent(); 
```

要将组件添加到容器：

```
container.add(someComponent);
container.validate(); 
```

从容器中移除组件：

```
container.remove(someComponent);
container.validate(); 
```

要将组件从一个容器移动到另一个容器，只需将其从一个容器中移除并将其添加到另一个容器中即可。

我不确定这是否能回答您的问题。如果您可以发布您正在尝试做的事情的真实示例，那就更容易了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T22:22:00.600

我不确定这是否解决了您的顾虑，但有[XML 驱动的 Java UI 工具包](http://java-source.net/open-source/xml-user-interface-toolkits)。

# java - 如何将完整的 H2 源包含到 Java 项目中？

> ID：10542654
> 
> 赞同：2
> 
> 时间：2012-05-10T21:49:37.240
> 
> 标签：java, h2

我想在我的 Java 项目中使用 H2 数据库，但不幸的是我不能使用任何外部`.jar`或`.class`文件。（这是一个我无法控制的构建系统，我只能向它提交*源*文件，这很愚蠢。）所以我想简单地下载 H2 Java 源并将所有这些 Java 包和 Java 文件直接添加到我的项目源文件夹中.

但是，在这样做之后，我在 Eclipse 中遇到了 H2 代码库中的一些 Java 文件的几个构建错误。例如，文件“org.h2.jdbc.JdbcStatement”有以下错误：“JdbcStatement 类型必须实现继承的抽象方法 Wrapper.unwrap(Class)”。还有其他几个错误。

所以我的问题是：我怎样才能或应该正确地将 H2 源文件添加到我的 Java 项目中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T05:10:18.240

H2 的源 jar 文件在 Maven 存储库中可用，如[docs 的下载部分所述](http://h2database.com/html/download.html)。当前版本是：

[http://repo2.maven.org/maven2/com/h2database/h2/1.3.166/h2-1.3.166-sources.jar](http://repo2.maven.org/maven2/com/h2database/h2/1.3.166/h2-1.3.166-sources.jar)

但是，您可能必须将 H2 的源代码“切换”到目标 Java 版本。（这是必需的，因为源代码不能同时用于 Java 5 和 Java 6 - 例如 Java 6 中的 JDBC API 必须支持该方法`ResultSet.updateNClob(int columnIndex, NClob x)`，但该接口`NClob`在 Java 5 中不可用。 ) 这就是为什么你得到异常“JdbcStatement 类型必须实现继承的抽象方法 Wrapper.unwrap(Class)”的原因。

要切换源代码，可以使用[H2 的构建脚本](http://h2database.com/html/build.html#building)，也可以使用 find / replace 自己：启用 Java 6，将源代码中的字符串`/*## Java 1.6 ##`替换为。`//## Java 1.6 ##`

# wordpress - 如何在 Wordpress 中仅关闭 *tags* 的永久链接？

> ID：10542655
> 
> 赞同：1
> 
> 时间：2012-05-10T21:49:55.417
> 
> 标签：wordpress, url, tags, permalinks

有没有办法只为WordPress中的*标签*关闭“永久链接” ？我想保留`?tag=`结构并显示不带斜线的标签，但也要保留带有漂亮永久链接的帖子和页面 URL。

例如：有了永久链接，我想像这样链接标签：`?tag=carrot`而不是`/tag/carrot/`

这样做的原因有点冗长和复杂，但如果您认为它相关，我可能会将其包含在回复中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T21:17:27.477

您可以`term_link`在 WordPress 中使用过滤器，它过滤任何术语链接（标签、类别、自定义分类法）的 URL，以仅更改标签的链接以使用查询而不是永久链接。将以下内容添加到插件或主题`functions.php`文件中应该可以解决问题。

```
function filter_tag_link($taglink, $tag, $taxonomy) {
    if ('post_tag' == $taxonomy) {
        $taglink = '?tag='.$tag->slug;
    }  
    return $taglink;
}

add_filter('term_link', 'filter_tag_link', 10, 3); 
```

[WordPress Codex](http://codex.wordpress.org/Plugin_API/Filter_Reference#Link_Filters)`term_link`上的过滤器还没有有用的文档，但是如果您想进一步探索，[查看源代码可能会有所帮助。](http://core.trac.wordpress.org/browser/tags/3.3.2/wp-includes/taxonomy.php#L2980)

# ruby-on-rails - Rails 3 条件验证（信用卡）：语法错误

> ID：10542656
> 
> 赞同：1
> 
> 时间：2012-05-10T21:49:58.433
> 
> 标签：ruby-on-rails, validation, model, e-commerce

看起来很奇怪，对吗？

```
validates_presence_of [:visa, :mc, :discover, :amex], :if => :credit_card => true 
```

任何输入表示赞赏，在浏览器中出现语法错误。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:59:19.797

试试这个

```
validates :visa, :mc, :discover, :amex, :presence => true, :if => :credit_card? 
```

如果信用卡是一个布尔字段。

否则定义一个方法

```
def credit_card?
    credit_card.present?
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T22:05:38.133

你也可以用proc来做

```
validates :visa, :mc, :discover, :amex, :presence => true, :if => Proc.new{|model| model.credit_card.present?} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:54:57.310

明白了，虽然很痛苦。而且无论如何都不完美。下一步将是用户只能选择信用卡或支票。jQuery？

模型.rb

```
validate :check_if_at_least_one_credit_card, :if => "credit_card=='1'"
validate :check_if_check_is_clicked, :if => "check=='1'"

private

  def check_if_at_least_one_credit_card
    unless mc=="1" || visa=="1" || amex=="1" || discover=="1"
      errors.add(:base, "You need to choose at least one credit card type")
    end
  end

  def check_if_check_is_clicked
    unless check=="1"
      errors.add(:base, "You need to choose check or credit card")
    end
  end 
```

然后这需要一些清理但按预期工作。

模板.html.haml

```
%p{ :style => "font-size: 13px; color: #848687;" }= @bulk_order.check=="1" ? 'Check' : ''
%p{ :style => "font-size: 13px; color: #848687;" }= @bulk_order.credit_card=="1" ? 'Credit Card' : ''
%ul
  %li{ :style => "font-size: 13px; color: #848687;" }= @bulk_order.discover=="1" ? 'Discover' : ''
  %li{ :style => "font-size: 13px; color: #848687;" }= @bulk_order.amex=="1" ? 'American Express' : ''
  %li{ :style => "font-size: 13px; color: #848687;" }= @bulk_order.mc=="1" ? 'Mastercard' : ''
  %li{ :style => "font-size: 13px; color: #848687;" }= @bulk_order.visa=="1" ? 'Visa' : '' 
```

# php - htaccess .. SE 友好的 URL

> ID：10542660
> 
> 赞同：0
> 
> 时间：2012-05-10T21:50:10.083
> 
> 标签：php

好的，我已经阅读了其他问题，并尝试了提供的选项，但似乎没有一个对我有用。所以，我们开始吧，这就是我目前拥有的

[http://www.desmoinesdrinks.com/?view=ads&catid=2&subcatid=6&cityid=1&lang=en](http://www.desmoinesdrinks.com/?view=ads&catid=2&subcatid=6&cityid=1&lang=en)

这就是我想要的

[http://www.desmoinesdrinks.com/1/posts/2_Clive/6_Down_Under/](http://www.desmoinesdrinks.com/1/posts/2_Clive/6_Down_Under/)

我的 htaccess 文件很大，但如果有人想看，我可以把它贴出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:01:06.327

尝试这个：

```
RewriteRule ^(.*)/posts/(.*)_(.*)/(.*)_(.*)/$ ?view=ads&catid=$2&subcatid=$4&cityid=$1&lang=en [L] 
```

# python - Python：需要帮助从文本文件创建字典和拆分列表

> ID：10542661
> 
> 赞同：0
> 
> 时间：2012-05-10T21:50:24.967
> 
> 标签：python, file, list, dictionary

我想将数据保存在文本文件中，并从这些文件中创建字典，稍后将其传递给函数。

这是我的代码：

```
def lesson_dictionary(filename):
    print "Reading file ", filename
    with open(filename) as f:
        mylist = f.read().strip().split() 
        dictionary = OrderedDict(zip(mylist[::2], mylist[1::2])) #keep keys/values in same order as declared in mylist
        print dictionary
    return dictionary 
```

使用名为 sample.txt 的示例文件，其中包含由空格分隔的两列键/值对，它可以正常工作。例如，

抗体

光盘

英夫

产生一个像这样的列表：

```
OrderedDict([('a', 'b'), ('c', 'd'), ('e', 'f')]) 
```

但是，如果我更改 .txt 文件的代码和内容，它就会中断。例如，如果 sample2.txt 包括：

甲：乙

光盘

e:f

我的代码是

```
def lesson_dictionary(filename):
    print "Reading file ", filename
    with open(filename) as f:
        mylist = f.read().strip().split(':') #CHANGED: split string at colon!
        dictionary = OrderedDict(zip(mylist[::2], mylist[1::2]))
        print dictionary
    return dictionary 
```

我得到以下输出：

```
OrderedDict([('a', 'b \nc'), ('d\ne', 'f')]) 
```

发生了什么？为什么 strip() 对第一个 .txt 文件有效，而对第二个文件无效？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T22:06:29.240

原始`split()`拆分为空白，并被`\n`视为空白。通过更改为`split(':')`您已删除行尾的拆分，因此一行的结尾与下一行的开头合并，中间有一个额外的换行符。除了一次读取一行文件之外，我认为没有一种简单的方法可以修复它。

编辑：一些代码来演示。

```
dictionary = OrderedDict()
with open(filename) as f:
    for line in f:
        key, value = line.split(':')
        dictionary[key.strip()] = value.strip() 
```

或者更符合您原作的精神：

```
with open(filename) as f:
    mylist = [line.strip().split(':') for line in f]
    dictionary = OrderedDict(mylist) 
```

第二种形式的缺点是不会自动去除单词周围的空格。根据您的示例，您可能需要它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T22:11:13.817

`split()`没有分隔符会在空格上拆分，空格是换行符和制表符/空格。当您`split`使用冒号时，该算法不再适用，因此换行符会显示在您的输出中。尝试：

```
dictionary = Ordereddict(l.strip().split(':') for l in f) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T21:56:29.157

如果您自己创建输入文件，我相信[json](http://docs.python.org/library/json.html)会更适合这个问题。

你可以像这样使用它：

```
import json

#write the dictionary to a file
outfile = open(filename, 'w')
json.dump(someDictionary, outfile)

#read the data back in
with open(filename) as infile:
    newDictionary = json.load(infile) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T21:57:56.357

您是否尝试过打印 的内容`myList`？

```
myList = ["a", "b c", "d e", "f"] 
```

如果您希望冒号的行为相同，请先将冒号替换为空格：

```
myList = f.read().replace(":", "").split() 
```

或者，如果您想将它们拆分为键值对，只需使用字符串切片将偶数和奇数元素压缩在一起：

```
s = f.read().split()
myDict = dict(zip(s[::2], s[1::2])) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-04T16:49:10.900

如果您希望您的代码是**分隔符中性**的，即`a:b`,`a-b`等`a#b`。而不是经常`split()`使用`re.split()`。

```
import re
pattern = re.compile(r"[^\w]")     # non-w char
with open(filename, "rt") as fr:
    return OrderedDict(pattern.split(l.strip()) for l in fr) 
```

# hibernate - Hibernate：如何设置自定义 UserType 的值

> ID：10542663
> 
> 赞同：0
> 
> 时间：2012-05-10T21:51:03.950
> 
> 标签：hibernate, blob, hibernate-mapping, clob, usertype

我有一个 ClobType，它扩展了 Hibernate 的 UserType 并按照您的期望做：将在数据库中找到的 clob 转换为字符串。我将我的 clob 列映射到 ClobType，当我在我的 JSP 页面中访问它们时，这些列可以很好地呈现。

但是现在我正在尝试设置值，我很难过。因为我可以写`${myObject.longField}`在我的 JSP 页面告诉我我大概可以说

```
String s = myObject.getLongField().toString(); 
```

并获取字符串，尽管 LongField 是 ClobType 类型。

我不知道如何使用setter。我可以轻松地实例化 ClobType，但是如何给它提供它需要作为 blob 持久存在的字符串数据？

```
ClobType clobType = new ClobType();
String s = "... a really REALLY long string ...";
/* a miracle occurs */
myObject.setLongField( clobType );
myObjectDAO.saveOrUpdate( myObject ); 
```

为了给 ClobType 一个字符串值，我需要什么奇迹？

或者，有没有更好（或更合适）的方法让我的两个设置器返回字符串而不是 ClobTypes？是否有特殊的映射可以做到这一点？我的业务逻辑不需要知道给定的列是作为 blob 实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:23:32.267

我认为，如果您使用的是当前合理的休眠模式，则可以将 java 字符串映射到数据库 CLOB，而无需使用自定义`UserType`。

尝试

```
@Lob
public String getLongField() { return longField; } 
```

longField 只是一个`String`.

如果这行得通，它会比你正在做的简单得多。

# java - 在最新的 jdk7 中使用 java 获取主机名失败

> ID：10542664
> 
> 赞同：10
> 
> 时间：2012-05-10T21:51:19.963
> 
> 标签：java

我一直在获取机器的主机名，如下所示：

```
InetAddress.getLocalHost().getHostName(); 
```

但是，当我放入最新的 JDK（jdk1.7.0_04）时，上面的代码只是返回 LOCALHOST。我检查了 /etc/hosts （它的 linux ），它在那里说：

```
127.0.0.1    localhost    redbull 
```

它一直在返回 REDBULL 直到升级。所以我改变了周围的推杆

```
127.0.0.1    redbull    localhost 
```

相反，它开始毫无问题地返回 REDBULL。

有没有更好的方法来完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T22:23:53.147

好吧，我考虑过将此标记为 dup，但我发现的唯一答案建议您使用 `InetAddress.getLocalHost().getHostName()`. 坦率地说，我认为在这种情况下*应该*返回“localhost”。我想，这些答案是正确的，因为实际上没有纯 Java 方法可以做到这一点（至少没有一种方法可以移植回旧的 JRE。）

我们使用 JNI 来实现这一点。我们调用`SCPreferencesGetHostName()`Mac OS 10.4+、`SCDynamicStoreCopyLocalHostName()`旧版 Mac OS、`GetComputerName()`Win32 以及`gethostname()`其他任何地方。

当然，您可以简单地调用`/bin/hostname`Unix 机器或查看`COMPUTERNAME`Windows 上的环境变量。这是一种判断，您是否觉得调用 JNI 或`exec`ing 另一个程序更好。

对于它的价值，我们不调用`gethostname()`Mac OS 的原因是因为 Mac 做了一个奇怪的动态主机名事情，`gethostname()`它将返回你的主要以太网设备的反向 DNS。如果我将我的 Mac 直接插入我的电缆调制解调器，我会得到一个主机名，`customer-10-42-21-42`或者我的电缆提供商决定在他们的 DNS 中设置为我的 PTR 记录的任何内容。相反，转到首选项将为您提供由用户确定的稳定主机名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-08T19:14:34.553

如果你不反对使用来自 maven Central 的外部依赖，我写了 gethostname4j 来为自己解决这个问题。它只是使用 JNA 调用 libc 的 gethostname 函数（或在 Windows 上获取 ComputerName）并将其作为字符串返回给您。

[https://github.com/mattsheppard/gethostname4j](https://github.com/mattsheppard/gethostname4j)

@edward-thomson 上面的回答让我觉得我可能需要做更多的工作才能让它在 MacOS 上运行良好:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-11T21:50:00.507

我遇到了同样的问题，当以下所有内容排成一行时，它就起作用了。主机名必须附加 DOT local

```
$ scutil --get HostName
drums
$ scutil --get LocalHostName
drums
$ scutil --get ComputerName
drums

$ sudo hostname drums.local
$ hostname
drums.local

$sudo vim /etc/hosts
192.168.x.IP drums
127.0.0.1 localhost drums
255.255.255.255 broadcasthost
::1 localhost
fXXX::1XXX localhost

$networksetup -setv6off Ethernet

$ sw_vers
ProductName: Mac OS X
ProductVersion: 10.9

$ java -version
java version "1.7.0_45"
Java(TM) SE Runtime Environment (build 1.7.0_45-b18)
Java HotSpot(TM) 64-Bit Server VM (build 24.45-b08, mixed mode) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T21:01:16.327

这是 JDK7u4 的 macosx 端口中的一个已知问题。

[http://java.net/jira/browse/MACOSX_PORT-564](http://java.net/jira/browse/MACOSX_PORT-564)

# uml - 设计 - 有时对象是-a，有时不是

> ID：10542665
> 
> 赞同：0
> 
> 时间：2012-05-10T21:51:39.353
> 
> 标签：uml

我意识到这个主题不是很清楚，所以我会尝试解释一下。我正在尝试设计一个版本控制系统。用户分为 3 种类型：简单用户、所有者和操作员。操作员绝不是简单的用户/所有者，但是，他可以在特殊模式下运行系统，这将允许他充当简单的用户或所有者来测试系统的正确性。

问题：您如何描述系统操作员和简单用户/所有者之间的关系（UML）？我一直在思考一个简单的继承关系，但我的同事不同意..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T22:03:47.500

我也不同意你，用户/所有者/管理员，只是具有不同权限的同一个对象。因此，您应该将您的用户与权限属性相关联。当然使用继承是可能的，但还不够。用户/超级用户/管理员的含义没有什么不同，它们都是例如一个人。您可以将用户更改为超级用户或管理员，反之亦然，这就是为什么我不会在这里使用继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T22:12:57.870

鉴于您要求用户冒充所有者或用户。

我想我会尝试

用户实体名称、密码类型等来管理登录等常见内容。

然后三个实体 Operator、Owner 和 User 都有一个用户。

可能（可能会有）更多的东西你可以通用，但我肯定会选择 Has a 而不是 is a。

即使没有模拟要求，我也很想这样做，因为继承会暗示说所有者可以做用户可以做的所有事情，并操作所有者可以做的所有事情，这不太可能是真的。

# android - Android 用户访问 Internet 的权限

> ID：10542667
> 
> 赞同：6
> 
> 时间：2012-05-10T21:51:46.407
> 
> 标签：android, xml

我正在尝试连接到 Internet 以从我的 android 应用程序访问我的服务器，但它似乎无法正常工作。上网查了一下，发现要加

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

就在之前`</manifest>`。但是当我这样做时，编译器会显示警告：

```
<uses-permission> tag appears after <application> tag   AndroidManifest.xml 
```

不确定此警告是否导致我的代码无法工作。我尝试将其放在`<user-permission>`之前，`<application>`但它仍然显示相同的警告。这意味着什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-10T21:58:10.833

我把它放在 and 之间`uses-sdk`，`application`对我有用。

尝试清理您的项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T21:56:45.857

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

据我所知，应该追求`uses-sdk`和元素。`application`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T21:57:53.450

将 uses-permission 标记移到 application 标记之前应该会删除警告。如果您使用的是 Eclipse，请尝试清理您的项目。

当您运行您的应用程序时，您是否收到有关互联网权限的运行时错误？什么不完全有效？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T21:59:10.713

`manifest`在标签内使用它：

```
<manifest 
    xmlns:android="http://schemas.android.com/apk/res/android">
    ...
    <uses-permission
    android:name="android.permission.INTERNET"/>
    ...
 </manifest> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-10T22:25:14.810

您还需要此权限：android.permission.ACCESS_WIFI_STATE

# c# - 在不破坏页面的情况下捕获所有页面级错误

> ID：10542668
> 
> 赞同：-1
> 
> 时间：2012-05-10T21:51:46.787
> 
> 标签：c#, asp.net, exception-handling, try-catch

我有一个 ac#asp.net 项目，其中一个 ascx 继承自基本 ascx。在这个基础 ascx 中，我想放置一个记录错误的 page_error 方法。

我希望如果派生类中的某些内容发生故障，例如空引用异常，它不会向用户显示错误屏幕。实际上，我希望每一行代码都像封装在它自己的 try catch 中一样，因此如果发生此 null ref 异常，它只会记录该行的错误，然后跳到下一行并继续。

这可能吗，我将如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T21:57:19.830

不，这是不可能的。如果 UnhandledException 不可避免地被抛出，您的 Page_Error 事件将获取异常并中断正常的页面执行。总的来说，我认为您正在尝试做的是不好的做法。我不会走那条路。

# google-sheets - 使用 Zend 检索 Google 电子表格的 URL

> ID：10542669
> 
> 赞同：0
> 
> 时间：2012-05-10T21:51:48.420
> 
> 标签：google-sheets, zend-gdata, google-spreadsheet-api

我们有一个使用 Zend Gdata 向各种 Google 电子表格提交数据的表单。我希望能够在提交过程完成后显示提交数据的电子表格的 URL。不过，我似乎无法找到检索文档的 URL。看起来这应该是一个简单的功能，但我似乎无法在任何地方找到有关如何执行此操作的任何信息。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T03:26:36.717

根据您实际连接并将数据提交到电子表格的方式，您应该从该提交过程中获取电子表格条目。在该条目上，您可以获得所有链接或任何链接。

```
$entry->getLink(); this will give you all links, bear in mind a link is an internal "Google" link reference its not always a link as we know it.

//the link you will want for distributing is probably something like:
$entry->getLink('self'); 
```

# jquery - 使用 jquery 进行 ajax 表单操作

> ID：10542672
> 
> 赞同：0
> 
> 时间：2012-05-10T21:51:52.093
> 
> 标签：jquery, json

类似于[jQuery 如何将一些 json 记录加载到表单字段中？](https://stackoverflow.com/questions/5604729/jquery-how-to-load-some-json-records-into-a-form-fields)，我有一个相当复杂的表单，其中字段相互交互，需要重新计算（一些复杂的数学）以及在某些条件下禁用字段。服务器上的类，可以输出 JSON 或类似内容。

calc-request 由 jquery 在任何字段 onchange 上触发，并且应该获取类响应并采取相应的行动。关于对 ajax 响应采取行动：

*   是否可以对响应进行格式化，以便在不迭代 JSON 结果的情况下更新/淡化字段？

*   请为此类功能提供最先进的 json 响应示例。

我试图不重新发明轮子，但热衷于尽可能简单，插件往往会中断。

编辑：

在本质上：

```
$.ajax({
  url: "theCalcClass.php",
  context: document.body
  }).done(function() { 
    //use the json data to update fields w/o foreach...
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:54:31.033

不是 100% 确定您的意思，但我相信像[Backbone.js](http://documentcloud.github.com/backbone/)这样的 MVC 框架可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T22:23:12.523

我不确定我是否理解你的问题。如果您正在寻找类似的内置单线`form.repopulateWith(json)`，它不存在。您的选择是：

1.  循环 JSON 并重新填充每个字段，或

2.  不循环地一一设置字段值。

任何其他解决方案（如插件）都必须使用其中一种方法，没有其他方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T21:14:33.463

有一些东西可以做到这一点（包括处理子对象数组）：[https ://github.com/corinis/jsForm](https://github.com/corinis/jsForm)

# java - 在玻璃窗格上设置等待光标在对话框中不起作用

> ID：10542682
> 
> 赞同：2
> 
> 时间：2012-05-10T21:52:30.407
> 
> 标签：java, swing, jdialog, glasspane, busy-cursor

我有一个应用程序有时会在后台线程中启动一个长时间运行的进程。如果它从主应用程序执行此操作，我将等待光标设置如下：

```
oldCursor = App.getInstance().getGlassPane().getCursor();
App.getInstance().getGlassPane().setVisible(true);
App.getInstance().getGlassPane().setCursor(waitCursor); 
```

这行得通，我像这样关闭光标：

```
App.getInstance().getGlassPane().setCursor(oldCursor);
App.getInstance().getGlassPane().setVisible(false); 
```

所以，现在我有时会从`JDialog`. （它有`setModal(true)`）在`JDialog`永不更改光标中执行此操作：

```
oldCursor = getGlassPane().getCursor();
getGlassPane().setVisible(true);
getGlassPane().setCursor(waitCursor); 
```

所以，我尝试为应用程序设置它，但这也不起作用。

有没有办法让这个工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-10-28T21:50:12.027

我知道这个问题很老了。但是，我有同样的问题，我花了一段时间在许多网站上搜索旧线程，然后才能找到解决方案。将其张贴在这里以帮助我（也许还有其他人）将来找到它。

作为参考，[https://www.javaspecialists.eu/archive/Issue065-Wait-Cursor-Wait.html](https://www.javaspecialists.eu/archive/Issue065-Wait-Cursor-Wait.html)解释了为什么 OP 的代码不起作用。不幸的是，该文章中提出的解决方案并不理想（例如，在对话框打开之前设置光标，然后在关闭后更改回来）。

但是，由于`JDialog`是顶级 Swing 容器，您可以`GetRootPane()`直接调用它来访问更改光标：

```
getRootPane().setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));
// long running code here
getRootPane().setCursor(Cursor.getDefaultCursor()); 
```

另一个改进是在 try 块中设置等待光标，并在 finally 中恢复默认光标，因此如果出现异常，您不会留下永远等待光标：

```
try {
    getRootPane().setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));
    // long running code here
} finally {
    getRootPane().setCursor(Cursor.getDefaultCursor());
} 
```

# javascript - 无法在 jQuery 中访问 IFRAME 的内容

> ID：10542689
> 
> 赞同：2
> 
> 时间：2012-05-10T21:53:03.420
> 
> 标签：javascript, jquery, iframe

我在`contents()`通过 jQuery 遇到 IFRAME 时遇到了困难。它实际上是我试图访问的框架中的一个框架。这些帧都来自相同的源（相同的域、相同的根路径等）。

我目前正在通过以下方式访问框架：

```
var $frame = $(window.top.frames[1].document).find('#innerFrameName'); 
```

这很好用，如果我`console.log`是 $frame 的值，我会看到它是一个 jQuery 数组：

```
[<frame src=​"mypage.htm" id=​"innerFrameName" frameborder=​"1" border=​"1" scrolling=​"auto" title=​"My Inner Frame" name=​"bsscright">​] 
```

但是，当我尝试调用以下内容时（如本[StackOverflow 问题](https://stackoverflow.com/a/1639342/107277)中所述），我得到一个空数组。

```
var $contents = $frame.contents();
console.log($contents);       // => [] 
```

即使我尝试访问文档本身，我也做不到。

```
var innerDocument = $frame.get(0).document;
console.log(innerDocument);   // => undefined 
```

我什至尝试在不使用 jQuery 的情况下进行操作，并且得到与上述相同的结果。

```
var innerFrame = window.top.frames[1].frames['innerFrameName'];
var innerDocument = innerFrame.document;
console.log(innerFrame);     // => the DOM object representing the IFRAME
console.log(innerDocument);  // => undefined 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-10T23:28:23.983

这是未经测试的，您应该在访问框架时使用内容。我会假设它是：

```
var someDivs = $("#outerIframe").contents().find("#innerIframe").contents().find("div"); 
```

# php - 如何将 jQuery AJAX JSON 对象从 PHP 渲染到 KnockoutJS

> ID：10542690
> 
> 赞同：1
> 
> 时间：2012-05-10T21:53:10.237
> 
> 标签：php, ajax, json, knockout.js

想知道是否有人可以在 Jsfiddle 上做一个快速演示，以展示如何执行以下操作。

假设我有一个 mysql 表，其中包含以下列：product_name、product_price、product_id；我使用 AJAX 调用执行 mysql 选择并返回数组。如何使用 Knockout 在页面上呈现它？

我可以进行 AJAX 调用并获取数据。它作为对象返回。我在 PHP 中使用 json_encode 在 getJSON 调用中返回数据。

接下来我该怎么做才能渲染它？这就是我所坚持的。我只想呈现一个循环产品名称、产品 ID 和价格的表格。

```
 var allData = $.getJSON("ajax.php?request=getresults", data, function(response) {
        return (response);
    }) 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:03:15.607

哦..我找到了一个例子，它有效！[从 .ajax() 调用加载一个 knockout.js observableArray()](https://stackoverflow.com/questions/9730496/loading-a-knockout-js-observablearray-from-ajax-call)

[http://jsfiddle.net/madcapnmckay/EYueU/](http://jsfiddle.net/madcapnmckay/EYueU/)

# angularjs - 如何观察指令的嵌入元素？

> ID：10542691
> 
> 赞同：2
> 
> 时间：2012-05-10T21:53:13.940
> 
> 标签：angularjs

我试图写一个分页指令，但要做到这一点，我需要知道有多少元素被嵌入，所以 HTML 看起来像这样

```
<pagelister>
    <div ng-repeat="name in searchResults">{{name}}</div>
</pagelister> 
```

（这是一个简单的例子——被嵌入的代码可能是任意复杂的。）

该指令必须注意……某些东西，因此它可以重新计算页数。

**编辑**对不起，代码没有被*称为*代码。我希望上面的代码将列表中的名称分解为 10 长的页面，并添加一些不错的下一个/上一个按钮。

问题是当`link`指令的函数被调用时，div 还没有被展开。我通过推迟对 DOM 的更改来“修复”该问题——但这仅在*第*一次有效。如果 $scope.searchResults（或嵌入代码观察到的任何其他内容）发生变化，我需要重新调整 DOM。我只需要知道那是什么时候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:19:13.760

使用指令范围绑定将 nessasry 信息传递给指令怎么样？

有点儿：

```
<pagelister pages="searchResults"> ... transcluded template</pagelister>
...
scope: { pages: '=' },
link: function(scope, element, attrs) { 
  scope.$watch('pages', ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T04:19:49.223

如果您的指令没有创建自己的子范围或自己的隔离范围，则该指令将有权访问 searchResults 数组。链接功能可以简单的看长度：

```
link: function(scope, element, attrs) {
    scope.$watch('searchResults.length', function(newLength) { ... } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T13:18:39.120

我通过在指令上设置一个属性来告诉它要观察什么来实现这一点 - 因此指令中没有依赖项（除了 attr）。

```
 :parent controller
 $scope.searchResultsLength = searchResults.length (or anything you choose || or an empty object)

:html
 <pagelister pages="searchResults" watch="searchResultsLength">

:inside directive controller
return {        
    replace: false,
    transclude: true,
    scope: true, //important
    controller: function($scope, $element) {
            $scope.$watch($element[0].getAttribute("watch"), fn);
 ... 
```

这远非想法，但这意味着我可以在任何地方删除这个指令，它会包装我的 ng-repeat 并管理自动更新

# python - Bash 或 vim 别名/命令在创建 Python 文件时使用某个模板？

> ID：10542694
> 
> 赞同：9
> 
> 时间：2012-05-10T21:53:26.523
> 
> 标签：python, bash, vim

我想知道是否可以在其中插入一些东西，`.bashrc`以便`.vimrc`每当我通过`vim`它创建一个新的 Python 文件时，它会在我编辑它之前自动创建一个已经插入的文件：

```
#!/usr/bin/env python

import sys

if __name__ == '__main__': 
```

我的绝大多数 Python 脚本都使用这些行，如果有办法为我创建的每个新创建的 Python 文件包含这些行，那就太好了。

谢谢！-kstruct

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T21:59:02.793

或者，如果您想避免使用插件：

```
autocmd bufnewfile *.py 0r /path/to/python_default.py 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T21:58:24.373

[*template*](http://www.vim.org/scripts/script.php?script_id=2834)是一个 Vim 插件，用于在新开始编辑文件时自动读取模板文件。选择模板文件以匹配要打开的文件名。此外，您可以在打开后运行任何命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T23:20:44.740

[Snipmate](http://www.vim.org/scripts/script.php?script_id=2540)是 TextMate 功能的更好版本。它有一个非常可扩展的模板语言，允许您插入 shell 命令的结果。

# delphi - 在Delphi XE2中，上传到天蓝色永远卡住，如何解决？

> ID：10542700
> 
> 赞同：-1
> 
> 时间：2012-05-10T21:54:07.223
> 
> 标签：delphi, azure, delphi-xe2, azure-storage

我正在将图像从 Delphi XE2 上传到 azure。

这就是我所做的：

```
var
  RespInfo: TCloudResponseInfo;
  Headers: TStringList;
  FileName: String;
  Content : TBytes;
begin
      FHost.PutBlockBlob(FContainer,FileName, Content, EmptyStr, Headers,
        nil, RespInfo); 
```

在 PutBlockBlob 中，当上传一些文件有点大（即 > 1mb）时会永远卡住。

我可以做什么？

PD：一张卡住的示例图片（是随机的，有时它会上传其他不是。大多数时候不是。）

[http://bestseller.blob.core.windows.net/superventas/122021.jpg](http://bestseller.blob.core.windows.net/superventas/122021.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:55:55.367

我对德尔福不熟悉。为解决此问题，您可以尝试使用 Visual Studio 和 C# 上传 blob，如果正常，则问题可能与 Delphi 端有关。如果它也无法在 Visual Studio 中工作，我建议您使用 Fiddler 来监控请求以查看可能不正确的地方。有关使用 C# 上传 blob 的说明，请参阅[http://msdn.microsoft.com/en-us/library/windowsazure/gg651129.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg651129.aspx)。

此致，

明旭。

# orchardcms - 将 Orchard 重置为全新安装

> ID：10542701
> 
> 赞同：19
> 
> 时间：2012-05-10T21:54:10.500
> 
> 标签：orchardcms

几个自定义模块无法正常工作。我禁用/删除了它们并尝试再次启用/安装。它不起作用。我决定从头开始。所以我删除了所有的数据库表（我使用的是 SQL Server 2008）。这还不够吗？

如果我运行该项目，我会看到 /orchardlocal/ 的目录列表。

我还需要做什么？

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-10T22:54:04.817

只需删除appdata文件夹，就这么简单。这将是一个全新的安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-25T16:22:09.003

除了从项目中删除`App_Data`文件夹`Orchard.Web`之外，您还可以通过一次删除一个表来重置数据库，或者您可以通过运行此脚本快速删除所有表

```
USE [myorcharddb]
GO

EXEC sp_MSforeachtable @command1 = "DROP TABLE ?" 
```

> 注意：数据库中的所有表都将被删除。您无法撤消此操作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:50:08.237

如果您运行的是标准 Orchard，则清除 AppData 文件夹即可。

但是，如果您部署在 Azure/Azure 模拟器上，则不会。然后，您必须从 Azure blob 存储（它不是真正的文件夹，因为 blob 存储中没有真正的文件夹，但您知道我的意思是说）。

如果要在 Azure 模拟器上进行测试，最快的方法是从存储模拟器 UI 重置 blob 存储。

# ruby-on-rails - 如何为 Ruby on Rails 应用程序启用 Trace

> ID：10542714
> 
> 赞同：0
> 
> 时间：2012-05-10T21:55:28.813
> 
> 标签：ruby-on-rails

是否有能力在 Ruby on Rails 控制器类的方法中启用某种类型的系统跟踪？很难找到正在执行的源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:04:12.393

最好的办法是使用 ruby​​ 调试器。

假设您使用的是 Ruby 1.9.3（如果不是，请回复），您暗示执行以下操作：

*   在您的 Gemfile 中，包括以下内容`gem 'debugger'`
*   `bundle`保存后运行
*   在您的控制器（或您想使用它的任何地方）中放置`debugger`您希望代码执行停止的位置。

不要通过浏览器点击您的应用程序并查看您启动服务器的位置，您应该会看到调试提示。

您可能必须在调试模式下启动服务器，您可以执行以下操作：

```
rails server --debugger 
```

有关此调试步骤和其他调试步骤的更多信息，请查看出色的[Rails 指南 - 调试 Rails 应用程序](http://guides.rubyonrails.org/debugging_rails_applications.html)这是调试 Rails 应用程序的精彩介绍。

# c# - .NET OpenXML 性能问题

> ID：10542719
> 
> 赞同：9
> 
> 时间：2012-05-10T21:55:54.813
> 
> 标签：c#, .net, asp.net-mvc-3, openxml, openxml-sdk

我正在尝试使用 OpenXML 从 ASP.NET Web 服务器中写出 Excel 文件。我有大约 2100 条记录，它需要大约 20-30 秒才能完成。有什么办法可以让它更快吗？从数据库中检索 2100 行只需要几分之一秒。不知道为什么在内存中操作它们会花费更长的时间。

注意：ExcelWriter 是我们的自定义类，但它的所有方法都直接来自此链接中的代码， http: [//msdn.microsoft.com/en-us/library/cc861607.aspx](http://msdn.microsoft.com/en-us/library/cc861607.aspx)

```
 public static MemoryStream CreateThingReport(List<Thing> things, MemoryStream template)
    {
        SpreadsheetDocument spreadsheet = SpreadsheetDocument.Open(template, true);
        WorksheetPart workSheetPart = spreadsheet.WorkbookPart.WorksheetParts.First();

        SharedStringTablePart sharedStringPart = spreadsheet.WorkbookPart.GetPartsOfType<SharedStringTablePart>().First();

        Cell cell = null;
        int index = 0;

        //create cell formatting for header text
        Alignment wrappedAlignment = new Alignment { WrapText = true };
               uint rowOffset = 2;

  foreach (Thing t in things)
        {
            //Received Date
            cell = ExcelWriter.InsertCellIntoWorksheet("A", rowOffset, workSheetPart);
            index = ExcelWriter.InsertSharedStringItem(t.CreateDate.ToShortDateString(), sharedStringPart);
            cell.CellValue = new CellValue(index.ToString());
            cell.DataType = new DocumentFormat.OpenXml.EnumValue<CellValues>(CellValues.SharedString);

            //Car Part Name
            cell = ExcelWriter.InsertCellIntoWorksheet("B", rowOffset, workSheetPart);
            index = ExcelWriter.InsertSharedStringItem(t.CarPart.Name, sharedStringPart);
            cell.CellValue = new CellValue(index.ToString());
            cell.DataType = new DocumentFormat.OpenXml.EnumValue<CellValues>(CellValues.SharedString);

  rowOffset++; 
   }

 workSheetPart.Worksheet.Save();

        spreadsheet.WorkbookPart.Workbook.Save();
        spreadsheet.Close();

        return template; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T15:46:15.753

所以看起来 MSDN 社区文档中的某个人遇到了类似的性能影响。下面的代码效率很低。有人建议使用哈希表。

对于我们的解决方案，我们只是完全删除了共享字符串的插入，下载时间从 1:03 秒变为 0:03 秒。

```
//Old: (1:03)
            cell = ExcelWriter.InsertCellIntoWorksheet("A", rowOffset, workSheetPart);
            index = ExcelWriter.InsertSharedStringItem(thing.CreateDate.ToShortDateString(), sharedStringPart);
            cell.CellValue = new CellValue(index.ToString());
            cell.DataType = new DocumentFormat.OpenXml.EnumValue<CellValues>(CellValues.SharedString);

 //New: (0:03)
             cell = ExcelWriter.InsertCellIntoWorksheet("A", rowOffset, workSheetPart);
             cell.CellValue = new CellValue(thing.CreateDate.ToShortDateString());
              cell.DataType = new DocumentFormat.OpenXml.EnumValue<CellValues>(CellValues.String); 
```

MSDN Docs（缓慢的解决方案，他们应该改用哈希表）

```
 private static int InsertSharedStringItem(string text, SharedStringTablePart         shareStringPart)
  {
// If the part does not contain a SharedStringTable, create one.
if (shareStringPart.SharedStringTable == null)
{
    shareStringPart.SharedStringTable = new SharedStringTable();
}

int i = 0;

// Iterate through all the items in the SharedStringTable. If the text already exists, return its index.
foreach (SharedStringItem item in shareStringPart.SharedStringTable.Elements<SharedStringItem>())
{
    if (item.InnerText == text)
    {
        return i;
    }

    i++;
}

// The text does not exist in the part. Create the SharedStringItem and return its index.
shareStringPart.SharedStringTable.AppendChild(new SharedStringItem(new DocumentFormat.OpenXml.Spreadsheet.Text(text)));
shareStringPart.SharedStringTable.Save();

return i;
 } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-19T20:36:57.553

@互联网

请注意，String 数据类型实际上是用于公式的，对于文本应使用 InlineString。请参阅 17.18.11 ST_CellType（小区类型）：

*   inlineStr（内联字符串）- 包含（内联）富字符串的单元格，即不在共享字符串表中的单元格。如果使用此单元格类型，则单元格值在 is 元素中，而不是单元格中的 v 元素（c 元素）。
*   str (String) - 包含公式字符串的单元格。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-12T10:43:02.773

最大的改进是更多的 Save() 函数在循环之外

```
 //Save data
        shareStringPart.SharedStringTable.Save();
        worksheetPart.Worksheet.Save(); 
```

对于 500 条记录，对我来说，它从 10 分钟变为 1 分钟。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-19T20:30:26.777

@kunjee

如果您想要性能，请预先创建所有必需的对象，以便在每次调用此方法时不检查。这就是为什么 SharedStringTable 作为参数而不是部分传入的原因。

字典用于快速索引查找，比 for 循环具有更好的性能。比哈希表快一点，因为它是强类型的，所以不需要装箱。无论如何，强类型化是一个很大的好处。

```
private static int InsertSharedStringItem(string sharedString, SharedStringTable sharedStringTable, Dictionary<string, int> sharedStrings)
{
    int sharedStringIndex;

    if (!sharedStrings.TryGetValue(sharedString, out sharedStringIndex))
    {
        // The text does not exist in the part. Create the SharedStringItem now.
        sharedStringTable.AppendChild(new SharedStringItem(new Text(sharedString)));

        sharedStringIndex = sharedStrings.Count;

        sharedStrings.Add(sharedString, sharedStringIndex);
    }

    return sharedStringIndex;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-25T07:12:29.143

正如 Internet 所提到的，他们应该使用 Hashtable，并且按照 zquanghoangz 的建议，他们应该将 Save() 移出循环。

InlineString 确实有效，但在打开生成的文件时，它让 MS Excel 头疼，其中包含可以修复的无信息错误消息，但仍然会弹出烦人的窗口。

```
static Cell AddCellWithSharedStringText(
    [NotNull]string text, 
    [NotNull]Hashtable texts, 
    [NotNull]SharedStringTablePart shareStringPart
)
{
    if (!texts.ContainsKey(text))
    {
        shareStringPart.SharedStringTable.AppendChild(new SharedStringItem(new Text(text)));
        texts[text] = texts.Count;
    }
    var idx = (int)texts[text];
    Cell c1 = new Cell();
    c1.DataType = CellValues.SharedString;
    c1.CellValue = new CellValue(idx.ToString());
    return c1;
} 
```

该解决方案将 [9880 x 66] 网格上的导出时间从约 5 分钟缩短到 6 秒。

# sencha-touch - Ext.createDelegate() 迁移 sencha touch 2 应用程序

> ID：10542721
> 
> 赞同：1
> 
> 时间：2012-05-10T21:56:03.170
> 
> 标签：sencha-touch, sencha-touch-2

这行代码就是我在 Sencha TOuch 1.1 应用程序中的代码：

```
var a=Ext.createDelegate(photoSuccess,this,[],true); 
```

我怎么能在 Sencha Touch 2 中做同样的事情？我试过这个没有运气：

```
var a=Ext.bind(photoSuccess,this); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T05:32:35.977

的有效表示

```
var a=Ext.createDelegate(photoSuccess,this,[],true); 
```

是

```
var a=Ext.bind(photoSuccess,this,[],true); 
```

要不就

```
var a=Ext.bind(photoSuccess,this); 
```

这是一个工作示例

```
var photoSuccess = function(foo) {
    console.log('foo', foo);
}

var a = Ext.bind(photoSuccess, window); 

a(1) //outputs: foo 1 
```

换句话说，你的电话应该有效

# php - usort() 警告虽然提交数组

> ID：10542724
> 
> 赞同：1
> 
> 时间：2012-05-10T21:56:18.067
> 
> 标签：php, sorting, usort

为什么不对`usort()`数组进行排序？

```
if ( is_array( $tables ) ) {
    usort( $tables, 'sort' );
} else {
    echo "no array";
} 
```

我总是收到这个警告：

> sort() 期望参数 1 是数组，给定字符串

所以php认为它是一个数组但`usort()`不是

继承人排序功能：

```
function sort( $a, $b ) {
    return strlen( $b ) - strlen( $a );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T22:06:24.593

注意错误说`sort() expects`，不是`usort() expects`。那是因为 PHP 将回调解释`usort`为内置[`sort()`](http://php.net/sort)方法（它期望第一个参数是一个数组），而不是您的`sort()`方法。

尝试将您的方法重命名为其他名称，例如`my_sort`.

```
function my_sort( $a, $b ) {
    return strlen( $b ) - strlen( $a );
}

if ( is_array( $tables ) ) {
    usort( $tables, 'my_sort' );
} else {
    echo "no array";
} 
```

# css - 包含具有相对路径的文件时更少

> ID：10542729
> 
> 赞同：2
> 
> 时间：2012-05-10T21:56:34.297
> 
> 标签：css, less

我有以下较少的文件：

**WebApp/Content/less/main.less**

```
@import "src/test.less"; 
```

**WebApp/Content/less/src/test.less：**

```
body { 
     background-image: url("../img/abc.png");
} 
```

当我通过 less.js-windows 运行 less 1.3.0

**> less.js-windows\lessc.cmd WebApp\Content\less WebApp\Content\css -compress**

...我明白了：

```
body{background-image:url("src/src/../img/abc.png");} 
```

“src/src/..”对我来说看起来不正确。

我花了大约一个小时在上面，但我无法从它的 github 页面上的 less 项目中确定这个问题的状态。有许多问题、回归以及应用和未应用的拉取请求似乎可以解决它： [https](https://github.com/cloudhead/less.js/issues/search?q=relative) ://github.com/cloudhead/less.js/issues/search?q=relative 。

在这种情况下，我不能使用绝对路径。是否有针对此问题的简单修复或解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:28:55.617

请执行下列操作：

```
body
{
    background-image : ~"url( '../img/abc.png' )";
} 
```

# iphone - 检查单词在数组中是否有效

> ID：10542731
> 
> 赞同：0
> 
> 时间：2012-05-10T21:56:44.040
> 
> 标签：iphone, objective-c, ios, xcode

我正在使用代码来检查一个单词是否在我的数组中，如果是我希望它提交它并且我有它的代码。如果不是，我希望它弹出一个屏幕。现在这一切正常，唯一的事情是屏幕弹出 2 次，因为我的数组中有 2 个单词。这是更好地解释它的代码。

```
NSArray *searchContacts = [NSArray arrayWithObjects:
                           @"CADEAU",
                           @"KADERZ",nil];
NSString *myContact = labelsText.text;

for (NSString *contact in searchContacts) {
    if ([contact isEqualToString:myContact]) { 
```

这就是我所说的，在这种情况下，CADEAU & KADERZ。当我将其中一个词放入 labelsText.text 时，它完全符合我的要求。但是对于 else 语句，如果标签 text.text 单词不是 CADEAU 或 KADERZ，它会弹出一个屏幕：

```
else {
 UIAlertView *alert = [[UIAlertView alloc] 
```

这个屏幕现在会弹出 2 次，所以我必须按 2 次关闭，我将如何解决这个问题，只需要按一次关闭，而不是数组中有多少字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T22:00:26.240

使用 an 会更有效`NSSet`，但即使您使用 an `NSArray`，您也可以简单地调用`containsObject:`而不是自己循环遍历集合。

```
if (![searchContacts containsObject:myContact]) {
   //show alert...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T21:58:55.513

在显示警报`break;`的代码后面加上：

```
for (NSString *contact in searchContacts) {
    if ([contact isEqualToString:myContact]) {
        // do something
    } else { 
        // show screen
        break;
    }
} 
```

这将“打破”循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T22:03:25.427

在您的 UIAlertView 之后使用休息时间。

例如：

```
for (NSString *contact in searchContacts) {
        if ([contact isEqualToString:myContact]) {
            //do what you want to do      
        }
        else{
            UIAlertView *alert = [[UIAlertView alloc] init];
            [alert show];
            break; //leave for()
        }
    } 
```

或者使用它：

```
searchContacts enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    if ([contact isEqualToString:myContact]) {
        //do what you want to do      
    }
    else{
        UIAlertView *alert = [[UIAlertView alloc] init];
        [alert show];

        *stop = YES; //stop enumeration
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T22:04:17.850

我想你想要这样的东西：

```
 BOOL contactFound = NO;
    for (NSString *contact in array)
    {
        if ([contact isEqualToString:myContact])
        {
            contactFound = YES;
            break;
        }
    }

    if (!contactFound)
        UIAlertView *alert = [[UIAlertView alloc]... 
```

# xcode - NSBundle 不工作

> ID：10542734
> 
> 赞同：0
> 
> 时间：2012-05-10T21:56:50.753
> 
> 标签：xcode, path, directory, nsbundle

NSBundle 输出我的应用程序的旧名称：“/var/mobile/Applications/0E1638D2-5B9C-4A1F-8ED2-5F8ADF55D3F6/distributedLCA.app”但我重命名了项目，但它仍然打印出旧的 .app 名称。有没有办法解决这个问题？

我的代码：

```
[[NSBundle mainBundle] resourcePath] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:05:16.673

您可能没有在构建设置中更改产品名称。在 Project Explorer 视图中，单击您的项目。然后单击编辑器视图顶部的 Build Settings 选项卡。确保在左侧编辑器视图中选择了您的产品。向下滚动直到看到产品名称，然后更改产品名称。清洁和重建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:41:40.790

经过长时间的谷歌搜索，我发现了这段代码解决了我的问题。我没有写入 .app，而是写入设备的文档：

```
NSArray *searchPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docStorePath = [searchPaths objectAtIndex:0];
NSString *filePath = [docStorePath stringByAppendingPathComponent:@"/YOUR_FILE.txt"];`` 
```

# objective-c - 如何使用 CFSocket 修复幼稚的服务器实现以允许多个连接

> ID：10542739
> 
> 赞同：0
> 
> 时间：2012-05-10T21:57:42.540
> 
> 标签：objective-c, network-programming, client-server, nsstream, cfsocket

从 2010 年冬天开始，我一直在研究 iTunes U 上斯坦福 CS193p 课程（iOS 编程）第 17 讲课中的 bonjour/NSStream 示例代码。示例代码可[在此处](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2010-winter)获得。

简而言之，示例代码创建一个套接字并绑定到端口 0，以便为它提供一个空闲端口。`NSNetService`然后它使用(bonjour)发布具有该端口的服务。应用`NSNetServiceBrowser`程序启动时也会启动。可用的服务放在一个`UITableView`. 当一个cell被选中时，对应的service就被解析，一个an`NSOutputStream`被创建，就可以发送数据了。

这是一个幼稚的实现，因为如果连接已经存在，连接将被拒绝。我的问题是，处理多个连接的正确方法是什么？一旦多个客户端连接到服务器，服务器如何区分它们？即如何将数据专门发送给一个客户而不是其他客户？

```
- (void) _acceptConnection:(int)fd
{
    int     junk;

// If we already have a connection, reject this new one.  This is one of the 
// big simplifying assumptions in this code.  A real server should handle 
// multiple simultaneous connections.

    if ( self.isReceiving ) {
        junk = close(fd);
        assert(junk == 0);
    } else {
        [self _startReceive:fd];
    }
}

// Called by CFSocket when someone connects to our listening socket.  
// This implementation just bounces the request up to Objective-C.
static void AcceptCallback(CFSocketRef s, 
                           CFSocketCallBackType type, 
                           CFDataRef address, 
                           const void *data, 
                           void *info)

{
    ReceiveServer *  obj;

    assert(type == kCFSocketAcceptCallBack);

    assert(data != NULL);

    obj = (ReceiveServer *) info;
    assert(obj != nil);

    assert(s == obj->_listeningSocket);

    [obj _acceptConnection:*(int *)data];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:51:02.427

我并不特别熟悉该课程或示例代码，但是：将用于处理连接的代码与接受新连接的代码分开到不同的类中。因此，在发布的代码中，您`-startReceive:`会将方法及其调用的所有内容移至另一个类。

然后，每次接受连接时，创建另一个类的实例。该实例将负责处理该连接上的所有通信。它会在初始化期间获得有关连接（主要是 fd）的信息。服务器的主控制器对象可以将这些实例保存在一个数组中。

事情从何而来将取决于您的服务器实际执行的操作。至少，您的连接对象需要在它们关闭时通知主控制器对象，以便主控制器可以将它们从数组中删除。您可以为此使用通知或委托模式。

# django - Django：/logout 切换语言

> ID：10542741
> 
> 赞同：2
> 
> 时间：2012-05-10T21:57:47.457
> 
> 标签：django, django-authentication

我知道这听起来很愚蠢，但我找不到问题所在。我正在为用户身份验证使用内置视图，登录和注销分别将语言切换为当前会话的非默认语言。

我有两种语言，根据 Djangoproject 站点上的文档进行设置，即在语言环境文件夹中，并且有 .mo 文件和所有内容。美好的。

我有一个基于表单的语言切换，可以为发布到 /i18n/setlang 的任何用户启用语言切换

所以，我的问题是，当我注销或登录时（我猜这也是 POST 也是），为什么似乎“POST”来切换语言。

感谢您对此提供任何可能的信息。

编辑：我应该补充一点，它永远不会切换回来。它只在一个方向上切换语言，即非默认语言。

EDIT2：并不是说我认为它会吸引更多答案，但这是我的语言切换器的代码（它通过 jQuery 即时切换。问题仍然是它会转到 Deutch 语言并在我注销时停留在那里（注销由Django 中的注销视图）。

```
<ul>            
    <li>
        <form name="setLangen" action="/i18n/setlang/" method="POST"><div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='871Y71JyfG9WcieiKr8jjwe4j37IkIfq' /></div>
        <input name="next" type="hidden" value="/" />
        <input type="hidden" name="language" value="en" />
        <a href="#" onclick="document.setLangen.submit();return false;">English</a>
        </form>
    </li>

    <li>
        <form name="setLangde" action="/i18n/setlang/" method="POST"><div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='871Y71JyfG9WcieiKr8jjwe4j37IkIfq' /></div>
        <input name="next" type="hidden" value="/" />
        <input type="hidden" name="language" value="de" />
        <a href="#" onclick="document.setLangde.submit();return false;">Deutch</a>
        </form>
    </li>

</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:08:35.987

我猜你在会话中保留语言设置，当用户注销时，会话消失了，你又回到了默认语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:06:59.573

好的。所以这就是答案。我想我会把它写下来，因为其他人可能会遇到这种情况。

问题是我已经在 django 语言环境中间件和我自己的中间件之间切换了顺序，这带走了浏览器选择的语言。需要在 Django 接管它并将语言设置为浏览器告诉它的任何内容之前保持自己的拦截（无论如何这都是一个非常奇怪的默认行为）。

希望它可以帮助某人。

```
'myapp.middleware.ForceDefaultLanguageMiddleware',   # <-- BEFORE django locale!!
'django.middleware.locale.LocaleMiddleware', 
```

# javascript - 写入 element.style.visibility 对页面没有影响（相同的 ID 有不同的地址？）

> ID：10542745
> 
> 赞同：0
> 
> 时间：2012-05-10T21:57:58.973
> 
> 标签：javascript

我当然验证了该元素的存在。

我什至已经验证您可以读取该元素值。

但就页面的输出而言，没有任何效果（元素不可见）。

```
// debug verificatoin
alert('debug on: domMenu.drop_down_element.style.visibility: ' + domMenu.drop_down_element.style.visibility );

// write action 
domMenu.drop_down_element.style.visibility = 'visible'; 
```

这是代码......它在第一次运行时工作......但之后失败......这是我相信的javaScript中的逻辑问题......这是旧代码......并且有一种奇怪的风格。

```
var domMenu = 
{
    TIME_DELAY:             1000,
    time_out_id:            0,
    drop_down_element:      0,
    top_mouse_over:  function ( id ) 
    {
        if( !domMenu.drop_down_element )
        {
            domMenu.drop_down_element = document.getElementById( 'wrap_drop_down_new' );
            domMenu.top_element = document.getElementById( 'top_new' );
        }
        clearTimeout( domMenu.time_out_id );
        domMenu.show_menu();
    },
    bottom_mouse_over: function() 
    {
        clearTimeout( domMenu.time_out_id );
    },
    mouse_out: function()
    {
        domMenu.time_out_id = setTimeout( domMenu.hide_menu, domMenu.TIME_DELAY );
    },
    hide_menu:function()
    {
        domMenu.drop_down_element.style.visibility = 'hidden';
        domMenu.top_element.style.border = '1px solid #faf7f7';
    },
    show_menu:function()
    {    
alert('debug on: domMenu.drop_down_element.style.visibility: ' + domMenu.drop_down_element.style.visibility );
        domMenu.drop_down_element.style.visibility = 'visible';
        domMenu.top_element.style.border = '1px solid #cfcaca';
        domMenu.top_element.style.borderBottom = '3px solid #cfcaca';
    }
}; 
```

**回答**

这是状态问题，所以我一直拉菜单元素。这是对我不明白的问题的 hack 修复。

```
var domMenu = 
{
    TIME_DELAY:             1000,
    time_out_id:            0,
    drop_down_element:      0,
    top_mouse_over:  function ( id ) 
    {
        domMenu.drop_down_element = document.getElementById( 'wrap_drop_down_new' );
        domMenu.top_element = document.getElementById( 'top_new' );

        clearTimeout( domMenu.time_out_id );
        domMenu.show_menu();
    },
    bottom_mouse_over: function() 
    {
        clearTimeout( domMenu.time_out_id );
    },
    mouse_out: function()
    {
        domMenu.time_out_id = setTimeout( domMenu.hide_menu, domMenu.TIME_DELAY );
    },
    hide_menu:function()
    {
        domMenu.drop_down_element.style.visibility = 'hidden';
        domMenu.top_element.style.border = '1px solid #faf7f7';
    },
    show_menu:function()
    {    
        // alert('debug on: domMenu.drop_down_element.style.visibility: ' + domMenu.drop_down_element.style.visibility );
        domMenu.drop_down_element.style.visibility = 'visible';
        domMenu.top_element.style.border = '1px solid #cfcaca';
        domMenu.top_element.style.borderBottom = '3px solid #cfcaca';
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:00:08.830

> 元素不可见

除非您向我们展示您的标记和 CSS，否则我唯一能想到的是：

1.  它有一个不可见的祖先元素（要么`visibility: hidden`要么`display: none`）

2.  它有`display: none`.

3.  它不在页面上。（或者至少，它在任何可见框之外；如果它的父级或其他祖先有`overflow: hidden`并且它位于该父级/祖先的尺寸之外......）

4.  它没有尺寸（例如，宽度和高度都为零），所以它是可见的，你只是看不到它。

5.  Michael Sazonov 指出它的父母（或其他祖先）可能有`opacity: 0`. （或者元素本身可以拥有它。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T22:34:23.290

至于你的最后评论 - 这解释了一切。一旦您使用`getElementById`- 浏览器通过其 ID 检索元素，但将其称为 DOM 对象。所以抓取元素后，ID就没有意义了。一旦那个 DOM 元素被删除 - 浏览器失去了它的引用，所以你需要再次抓住它（通过任何你发现最好的方法）。关于`innerHTML`- 如果你不想一次又一次地跟踪和抓取每个 DOM 元素 - 你最好不要通过`innerHTML`. 更好的使用`element.appensChild()`功能。它将元素添加到父元素而不重写其`innerHTML`.

# iphone - 如何在服务器上编译 iOS 项目

> ID：10542746
> 
> 赞同：0
> 
> 时间：2012-05-10T21:58:02.790
> 
> 标签：iphone, ios, xcode

我希望能够为我的 iOS 项目自动构建最新代码。例如，有什么方法可以在 linux 服务器的服务器端这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T22:01:12.230

您必须使用基于 OS X 的机器来编译 iOS 项目。这可以使用命令行 Xcode 工具（特别是 xcodebuild）自动完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T22:11:47.193

唯一受支持的工作流程需要 OSX，但如果您宁愿花费精力而不是花钱，也有一些替代方案：[在 Linux 中开始 iPhone 应用程序开发？](https://stackoverflow.com/questions/276907/starting-iphone-app-development-in-linux)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T22:19:47.750

您可以使用 Jenkins [http://jenkins-ci.org/](http://jenkins-ci.org/)。一旦有人向 SVN 提交了某些内容，我们就会在工作中使用它来构建项目。它真的很方便。您还可以使用许多插件。

# mysql - 如果没有找到行，则查询失败

> ID：10542747
> 
> 赞同：2
> 
> 时间：2012-05-10T21:58:06.933
> 
> 标签：mysql, inner-join

如果用户没有匹配的问题或答案，我有以下查询，它为每个字段返回 NULL。请你能告诉我如何防止这种情况发生吗？

谢谢！

```
SELECT u.id, u.first_name, u.last_name, u.email, u.username, COUNT( DISTINCT q.id ) AS  `q_count` , COUNT( DISTINCT a.id ) AS  `a_count` 
FROM  `users` AS u
INNER JOIN  `questions` AS q ON u.id = q.uid
INNER JOIN  `answers` AS a ON u.id = a.uid
WHERE u.username =  'max'
LIMIT 0 , 30 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T21:59:59.437

使用`left join`s 代替`inner join`s

# c# - 具有自动关闭功能的 HTML Javascript 模态弹出窗口

> ID：10542763
> 
> 赞同：0
> 
> 时间：2012-05-10T22:00:07.267
> 
> 标签：c#, javascript, jquery, asp.net, html

主要想法是复制我们在银行或美国运通网站上看到的内容，其中出现一个 MODAL 弹出窗口，他们告诉我们会话“即将”到期。

为此，我想添加一个“自动关闭”弹出事件，该事件将在 XX 秒后发生，然后我想调用一个按钮事件 Onclick 以“自动保存”当前工作，然后将用户重定向到注销页面。

所以主要我想知道执行以下操作的最佳方法是什么：

1) 假设 1 分钟后显示 MODAL 消息（用于测试目的）。这可能是出现在当前页面顶部的 DIV，或者是 MODAL 对话框消息框。

2) 显示一条消息和一个反向计时器，例如“请在会话到期之前保存您的工作”

3) XX 秒后自动关闭（或隐藏）该消息对话框

4）调用按钮onclick事件。

后端是使用 C# 的 ASP.NET

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:06:45.643

这样的事情会让你开始：

```
setTimeout(WarnTheUser,10000);//fires after 10 seconds

function WarnTheUser()
{
     document.getElementById('warningDiv').innerHTML="<H1>This page will auto save in 1 minute</H1>"; //or whatever
     setTimeout(saveData,60000);
}

function saveData()
{
   form.submit();//adjust accordingly
} 
```

[jsfiddle。](http://jsfiddle.net/R7QaS/)

# javascript - javascript函数参数作为私有变量

> ID：10542764
> 
> 赞同：0
> 
> 时间：2012-05-10T22:00:08.703
> 
> 标签：javascript, function, variables

我记得在某处读到函数参数变成了函数中的私有变量，所以我尝试了这个：

```
var node = function(nParent,nName,nContent){
    this.init = function(){
        alert(nName+" "+nParent+" "+nContent);
    }
};

var a = new node("A - parent","A - name","A - content");
var b = new node("B - parent","B - name","B - content");

a.init();
b.init(); 
```

它会提醒正确传入的参数，所以可以使用它来代替这样的东西：

```
var node = function(nParent,nName,nContent){
    var parent = nParent;
    var name = nName;
    var content = nContent;
    this.init = function(){
        alert(name+" "+parent+" "+content);
    }
}; 
```

我知道如果我想在将参数分配给私有变量之前对参数进行任何形式的额外验证检查，我将不得不使用第二个版本，如果参数已经是私有变量，我只是不想浪费空间永远不要去任何地方，这是合理的做法吗？谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T22:01:11.243

当然没关系。这些参数是实例化变量，与您设置的其他变量没有明显区别。

Now, if you didn't use *any* named parameters, and used `arguments` instead, then there would be a difference: in code readability, in even performance (there's a penalty for using `arguments`).

Only downside to all of this is that your variable definitions won't all be in the same place. (Assuming that there would be any more variable definitions and assignments in this function, beyond the params passed.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T22:00:51.040

是的; 这很好。

# c - 在eclipse上用c编码

> ID：10542766
> 
> 赞同：0
> 
> 时间：2012-05-10T22:00:14.670
> 
> 标签：c, eclipse

下面的代码在我输入一个整数后打印出“输入一个整数：”。我在 Eclipse 上用 C 编写代码，我知道这是一个新手问题，但有人能告诉我为什么会这样吗？

```
#include<stdio.h>

int main()
{
   int n;

   printf("Enter an integer: \n");
   scanf("%d",&n);

   if ( n%2 == 0 )
      printf("Even\n");
   else
      printf("Odd\n");

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-09T11:56:02.383

你不能在 Eclipse 中读取整数值试试这个代码

```
#include<stdio.h>
int main()
{
   int n;
   printf("Enter an integer: \n");
   fflush( stdout );
   scanf("%d",&n);
   if ( n%2 == 0 )
      printf("Even\n");
   else
  printf("Odd\n");
  return 0; 
```

}

# javascript - js contenteditable - 防止写入新插入的元素

> ID：10542769
> 
> 赞同：2
> 
> 时间：2012-05-10T22:00:24.780
> 
> 标签：javascript, selection, range, contenteditable

我正在研究一个简单的语法荧光笔，用类替换带有 dom 元素的文本。

说，我有一个

```
<div contenteditable="true">
  Some text. | And some other text.
</div> 
```

光标位于 | 管道

//如果用户输入`foo`

```
<div contenteditable="true">
  Some text. foo| And some other text.
</div> 
```

// 然后我替换它，然后在插入的元素之后设置选择

```
<div contenteditable="true">
  Some text. <span class="highlight-foo">foo</span>| And some other text.
</div> 
```

但如果你输入，你输入跨度..无论如何。

//类型条

```
<div contenteditable="true">
  Some text. <span class="highlight-foo">foobar|</span> And some other text.
</div> 
```

我不希望这样，但我不能在新插入的元素之后设置选择。

```
<div contenteditable="true">
  Some text. <span class="highlight-foo">foo</span>bar| And some other text.
</div> 
```

这是执行突出显示和替换的js..

```
...
// chunk is the variable that holds foo, if we stick the the above example..
// select it
range.setStart(range.startContainer, range.startOffset-chunk.length);

// add it to the range
sel.addRange(range);

// replace it..then set the range to the textNode after the span
// because after the injection selection.anchorNode is the textNode inside the span..
// in chrome, however, this below sets the range correctly.
range.setStart(sel.anchorNode.parentNode.nextSibling, 0);

// and it's all good until now, but adding the range to the selection does nothing..
sel.removeAllRanges();
sel.addRange(range)

// the selection is still inside the span.. 
```

如何解决？oO 我已经阅读了很多关于它的内容，甚至在这里查看了很多问题，但没有关于这个特定问题的内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T08:22:48.383

我假设您正在 WebKit 中对此进行测试。WebKit 的插入符号处理可防止您将插入符号放置在文本节点的开头：[https](https://bugs.webkit.org/show_bug.cgi?id=23189) ://bugs.webkit.org/show_bug.cgi?id=23189 。在 Firefox 中，您的代码应该没问题。

解决方法都是可怕的。一种是插入一个零宽度空格（例如`\u200B`）并选择它，但是您必须添加特殊代码来处理箭头键和删除零宽度空格的代码。

**更新**

另一种解决方法是使用 WebKit 对链接有特殊情况的事实，它强制插入符号在链接之后：

[http://jsfiddle.net/RfMju/](http://jsfiddle.net/RfMju/)

因此，您可以做的（虽然不愉快但可行）是`<span>`在您希望插入符号进入突出显示的元素时使用 a ，否则将其更改为链接。

# shell - 使用 ASObjC Runner 中止 Applescript 中的 shell 脚本命令

> ID：10542771
> 
> 赞同：1
> 
> 时间：2012-05-10T22:00:33.760
> 
> 标签：shell, applescript

我的 AppleScript 中有[ASObjC Runner](http://www.macosxautomation.com/applescript/apps/runner.html)代码，一旦`do shell script`运行 a 就会显示进度窗口。如何使进度窗口上的按钮终止 shell 脚本？

这是我的代码示例：

```
tell application "ASObjC Runner"
    reset progress
    set properties of progress window to {button title:"Abort", button visible:true, indeterminate:true}
    activate
    show progress
end tell

set shellOut to do shell script "blahblahblah"
display dialog shellOut

tell application "ASObjC Runner" to hide progress
tell application "ASObjC Runner" to quit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:40:03.823

答案有几个部分：

1.  **异步`do shell script`：**通常`do shell script`只在 shell 命令完成后返回，这意味着你不能对 shell 内的进程进行操作。但是，您可以通过[后台](http://mywiki.wooledge.org/ProcessManagement?highlight=%28background%29#How_do_I_run_a_job_in_the_background.3F)`do shell script`执行它执行的shell命令来获得一个异步执行的命令，即

    ```
    do shell script "some_command &> /target/output &" 
    ```

    – 将在启动 shell 命令后立即返回。由于它不会返回命令的输出，因此您必须自己捕获它，例如在文件中（或者`/dev/null`如果您不需要它，则重定向到）。如果追加`echo $!`到命令，`do shell script`将返回后台进程的PID。基本上，做

    ```
    set thePID to do shell script "some_command &> /target/output & echo $!" 
    ```

    请参阅[Apple 的技术说明 TN2065](http://developer.apple.com/library/mac/technotes/tn2065/_index.html#//apple_ref/doc/uid/DTS10003093-CH1-SECTION5)。停止该过程是一件简单的事情`do shell script "kill " & thePID`。

2.  **挂钩*ASObjC Runner*的进度对话框**只需轮询其`button was pressed`属性并继续`true`：

    ```
    repeat until (button was pressed of progress window)
        delay 0.5
    end repeat
    if (button was pressed of progress window) then do shell script "kill " & thePID 
    ```

3.  **决定何时完成 shell 脚本以关闭进度对话框：**这是有趣的部分，因为 shell 命令是异步操作的。您最好的选择是`ps`使用您检索到的 PID 来检查进程是否仍在运行，即

    ```
    if (do shell script "ps -o comm= -p " & thePID & "; exit 0") is "" 
    ```

    `true`当进程不再运行时将返回。

剩下的代码如下：

```
tell application "ASObjC Runner"
    reset progress
    set properties of progress window to {button title:"Abort", button visible:true, indeterminate:true}
    activate
    show progress

    try -- so we can cancel the dialog display on error
        set thePID to do shell script "blahblahblah &> /file/descriptor & echo $!"
        repeat until (button was pressed of progress window)
            tell me to if (do shell script "ps -o comm= -p " & thePID & "; exit 0") is "" then exit repeat
            delay 0.5 -- higher values will make dismissing the dialog less responsive
        end repeat
        if (button was pressed of progress window) then tell me to do shell script "kill " & thePID
    end try

    hide progress
    quit
end tell 
```

如果您需要捕获后台 shell 命令的输出，则必须将其重定向到文件并在完成后读出该文件的内容，如上所述。

# jboss - ICEpush 3.0.1 在 JBoss 7.1.1 中没有响应

> ID：10542773
> 
> 赞同：0
> 
> 时间：2012-05-10T22:00:41.330
> 
> 标签：jboss, icepush, icefaces-3

我在 JBoss 和 Icesoft 上都发过帖子，但无济于事。我希望这里有人可以提供帮助。

我有一个相对复杂的 EAR 部署，其中一个模块是一个 Web 应用程序。它适用于 ICEfaces 3.0.1。我的界面工作正常。但是，如果我添加 icepush.jar 和 web.xml 条目，则 Web 应用程序无法响应浏览器请求。浏览器只是“旋转”并且永远不会得到响应。

是否有一些配置可以发布以获得一些帮助，或者是否有一些日志记录我可以打开以查看发生了什么？

谢谢。

```
<servlet> 
<servlet-name>icepush</servlet-name> 
<servlet-class>org.icepush.servlet.ICEpushServlet</servlet-class> 
<load-on-startup>1</load-on-startup> 
</servlet> 
<servlet-mapping> 
<servlet-name>icepush</servlet-name> 
<url-pattern>*.icepush</url-pattern> 
</servlet-mapping> 
```

环境：Java 1.6.0_26 JBoss 7.1.1（独立）ICEfaces 3.0.1（内部版本号：7，修订版：28541）ICEpush 3.0.1（内部版本号：2，修订版：28519）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:16:16.750

我也遇到过这个问题。根据我的发现，我可以看到它只发生在 jboss 和 icepush 存在时。

在您的standalone.xml 中，将 javax.enterprise.resource.webcontainer.jsf.lifecycle 的日志级别设置为 INFO，如下所示：

```
<logger category="javax.enterprise.resource.webcontainer.jsf.lifecycle">
    <level name="INFO"/>
</logger> 
```

我在 icesoft 论坛中解释了根本原因，这里：http: [//jforum.icesoft.org/JForum/posts/list/20819.page#74038](http://jforum.icesoft.org/JForum/posts/list/20819.page#74038)

# c++ - 如何实现动态线程Boost::Barrier？

> ID：10542774
> 
> 赞同：1
> 
> 时间：2012-05-10T22:00:46.010
> 
> 标签：c++, multithreading, boost, synchronization, boost-thread

通常，线程屏障（即 boost::barrier）用一个整数初始化，该整数表示必须调用 boost::barrier::wait 的线程数——所有线程在该点等待，直到满足条件，然后所有线程继续。

是否可以实现一个线程屏障，它可以在初始化后设置其“waitCount”？

还是有一种等效的方法可以提供相同的行为？

即在我们完成之后：

```
int numWaiting = 2;
boost::barrier b( numWaiting ); 
```

没有设置新的 numWaiting 值的方法；

想要这样做的原因基本上是在屏障被初始化但在等待条件满足之前，进程可用的线程数可能会增加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:13:10.970

您可以将此类行为添加到基于 boost::mutex 的简单屏障实现中。在那里查看代码：[http ://code.google.com/p/fengine/source/browse/trunk/src/engine/misc/barrier.hpp](http://code.google.com/p/fengine/source/browse/trunk/src/engine/misc/barrier.hpp)

# sql - 检索与两个子对象具有特定关系的核心数据对象

> ID：10542777
> 
> 赞同：0
> 
> 时间：2012-05-10T22:01:05.363
> 
> 标签：sql, core-data, nspredicate

我有一个核心数据实体 OrderItem，它与另一个实体 OrderItemOption 有一对多的关系。我想找到一个与两个特定 OrderItemOptions 有关系的特定 OrderItem。我如何在核心数据中做到这一点？

OrderItemOptions 有一个 typecode 和 optioncode，本质上是一个键/值。我正在寻找一个带有选项（typecode=OptionSet1，optionCode=BT）和另一个选项（typecode=OptionSet2，optionCode=CT）的 orderItem。

问题是如何区分查询中的第一个 OrderItemOption 对象和第二个。

我能够想出一个 SQL 查询来做我想要的。它使用别名来执行表与自身的连接。我如何在 Core Data 中做同样的事情？

sql语句为：

```
 select * from zorderItem, zorderItemOption one, zorderItemOption two where 
 one.zorderitem = zorderItem.z_pk and 
 one.zoptiontypecode='OptionSet1' and one.zoptioncode='BT' and 
 two.zorderitem =zorderitem.z_pk and
 two.zoptiontypecode='OptionSet2' and two.zoptioncode='CT'; 
```

我不认为我完全遵循谓词中“ANY”关键字背后的语义。我能够接近，

```
NSPredicate *pre = [NSPredicate predicateWithFormat:
            @"order == %@ and 
            (any options.optionTypeCode == %@ and any options.optionCode == %@)
            and 
            (any options.optionTypeCode == %@ and any options.optionCode == %@)",
            order, @"OptionSet1", @"BT", @"OptionSet2", @"CT"]; 
```

但是当逆转的选件代码倒置时，它也匹配。

我尝试在每个括号表达式之外考虑“ANY”，但这导致了解析异常。

也许一个更简单的例子也会很有趣。如果我有一个与 Books 有一对多关系的 Author 实体怎么办。我将如何创建一个谓词来表示，找到同时写了名为“Book1”的书和名为“Book2”的书的作者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:16:03.633

有人在苹果开发者论坛上回答，[https://devforums.apple.com/message/659752#659752](https://devforums.apple.com/message/659752#659752)

在这里重复发帖，

听起来您正在寻找的是一个子查询。子查询的解释之一：http: [//funwithobjc.tumblr.com/post/2726166818/what-the-heck-is-subquery](http://funwithobjc.tumblr.com/post/2726166818/what-the-heck-is-subquery)

我想它会是这样的

```
order == %@ AND
subquery(orderItemOptions, $one, $one.typeCode = %@ && $one.optionCode = %@).@count >0 AND
subquery(orderItemOptions, $two, $two.typeCode = %@ && $two.optionCode = %@).@count >0 
```

为谓词。虽然我不确定你为什么在尝试中使用 order == %@ 子句，但我只是将它保留在带有子查询的版本中以保持一致......

# python - python中不完整的伽马函数？

> ID：10542780
> 
> 赞同：9
> 
> 时间：2012-05-10T22:01:08.610
> 
> 标签：python, scipy

第`scipy.special.gammainc`一个参数不能取负值。在 python 中还有其他实现吗？我可以肯定地进行手动集成，但我想知道是否已经存在好的替代方案。

```
Correct result: 1 - Gamma[-1,1] = 0.85

Use Scipy: scipy.special.gammainc(-1, 1) = 0 
```

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T22:27:46.077

每当我需要特殊功能并且我不太关心性能时，我通常会使用[mpmath 。](http://code.google.com/p/mpmath/)（尽管它在许多情况下的性能还是相当不错的。）

例如：

```
>>> import mpmath
>>> mpmath.gammainc(-1,1)
mpf('0.14849550677592205')
>>> 1-mpmath.gammainc(-1,1)
mpf('0.85150449322407795')
>>> mpmath.mp.dps = 50 # arbitrary precision!
>>> 1-mpmath.gammainc(-1,1)
mpf('0.85150449322407795208164000529866078158523616237514084') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T10:24:42.603

我刚刚遇到了同样的问题，最终在 a<0 时使用了函数的递归关系。 [http://en.wikipedia.org/wiki/Incomplete_gamma_function#Properties](http://en.wikipedia.org/wiki/Incomplete_gamma_function#Properties)

另请注意，scipy 函数 gammainc 和 gammaincc 给出正则化形式 Gamma(a,x)/Gamma(a)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-28T22:14:10.037

在 2021 年仍然是一个问题，他们仍然没有在 scipy 中对此进行改进。尤其令人沮丧的是，`scipy`甚至不提供上下不完全 Gamma 函数的非正则化版本。我也最终使用了`mpmath`，它使用自己的数据类型（这里`mpf`是 mpmath 浮点数 - 支持任意精度）。为了快速为适用于数组的上下不完全 Gamma 函数制作一些东西`numpy`，并且其行为类似于评估这些积分时所期望的那样，我想出了以下内容：

```
import numpy as np
from mpmath import gammainc

"""
In both functinos below a is a float and z is a numpy.array.
"""

def gammainc_up(a,z):
    return np.asarray([gammainc(a, zi, regularized=False)
                       for zi in z]).astype(float)

def gammainc_low(a,z):
    return np.asarray([gamainc(a, 0, zi, regularized=False)
                       for zi in z]).astype(float) 
```

再次注意，这是针对非正则化函数（[DLMF](https://dlmf.nist.gov/8.2)中的 Eq. 8.2.1 和 8.2.2 ），正则化函数（Eq. 8.2.3 和 8.2.4）可以`mpmath`通过设置关键字来获得`regularized=True`。

# grails - Grails 如何将多个动作指向同一个视图？

> ID：10542783
> 
> 赞同：2
> 
> 时间：2012-05-10T22:01:22.580
> 
> 标签：grails

我在 grails 控制器上有以下导航设置，List_X 和 List_Y 是否可以执行不同的操作，然后映射到同一个 gsp 文件？

```
subItems: [ 
    [ action: 'list_X',title: 'Something', order:1 ],                                                           
    [ action: 'error_X',title: 'Something',order:2 ],
    [ action: 'list_Y', title: 'Something', order:3 ],
    [ action: 'error_Y',title: 'Something', order:4 ],
] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T22:35:19.357

您可以手动指定应该呈现哪个 gsp 文件。在您的控制器中执行以下操作：

```
def list_X() {
    // ... some code
    render(view : "listView", model : [name : "bob", items : []])
}

def list_Y() {
    //... some code
    render(view : "listView", model : [name : "bob", items : []])
} 
```

这样，相同的 gsp 模板将用于呈现两个操作的结果。

# wcf - 一个只接受一个字符串的数据合约

> ID：10542790
> 
> 赞同：0
> 
> 时间：2012-05-10T22:01:55.263
> 
> 标签：wcf

WCF的新手，我要定义一个restful接口来接收xml中的请求。xml 可以属于任何类型的模式，而不是定义描述每个数据成员的数据协定，我想将我的数据协定转换为一个简单的字符串，它基本上说你可以向我发送任何东西，理想情况下，它看起来如下，

```
[OperationContract]
void SubmitESBMessage(string data); 
```

试图将合同定义为

```
[DataContract]
public class OnRampData
{
    [DataMember]
    public string Data { get; set; }
} 
```

但我不想告诉我的用户转义他们的 xml 并放入 OnRampData。

任何人请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:09:14.423

如果您想将任何 XML 作为输入，那么您可以使用`XmlElement`or`XElement`作为参数类型。WCF 将这些类型视为“请求正文中的所有 XML”。

```
[OperationContract]
void SubmitESBMessage(XElement data); 
```

# python - 在遍历列表时如何有效地删除元素？

> ID：10542792
> 
> 赞同：1
> 
> 时间：2012-05-10T22:02:09.803
> 
> 标签：python, arrays, algorithm, simulation

我正在使用 Python 制作一个简单的进化模拟器。

有一个名为 的列表`engine.All`，其中存储了单位/动物和食物。我遍历它，如果我遇到一只动物，我会再次遍历它，看看它是否与任何食物块发生碰撞。

如果是这样，那么我会增加他的能量，将食物标记为已吃，并将其添加到`toRemove`列表中，稍后我会使用该列表从`engine.All`.

这是代码，但删除了所有多余的东西：

```
def remove(l, who): #This should remove all the elements contained in who from the list l
    offset = 0

    for i in who:
        l.pop(i + offset)
        offset -= 1

    return l

for ob in engine.All:
    if ob.skip:
        continue;

    if ob.drawable:
       ob.draw()

    if isinstance(ob, Flatlander): #If it is an animal
        #Do speed stuff
        ob.energy -= decay #Lower its energy

        for i in range(len(engine.All)): #Iterate through the list again
            if collides(ob.pos, ob.r, engine.All[i].pos, engine.All[i].r) and isinstance(engine.All[i], Food) and ob.energy + engine.All[i].r < ob.r**2*3.14 and not engine.All[i].skip: #If it collides with a food piece, the food piece isn't about to be deleted and it can take the energy in (their maximum is defined by their radiuses)
                ob.energy += engine.All[i].r #Increase the his energy
                toRemove.append(i) #Add the food piece to the toRemove list
                engine.All[i].skip = True #Flag it as skipped

        if ob.energy < 0 and not ob.skip: #If its energy is 0 and if it isn't already about to be deleted
            toRemove.append(engine.All.index(ob)) #Add it to the toRemove list
            ob.skip = True #Flag it as skipped

engine.All = remove(engine.All, toRemove) 
```

我几乎可以肯定这不起作用，并且有更好的方法来做到这一点。我如此确定的原因是，有时，我看到屏幕上的东西只是“闪烁”——突然消失又出现。此外，似乎有“幽灵”动物（在代码中称为 Flatlanders），我得出结论是因为有时食物会永久消失。

请推荐一种更有效的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T22:14:30.530

将其作为生成器函数执行并产生您想要的结果会更容易，而不是弹出您不想要的元素。

```
def valid_engines():
    for ob in engine.All:
        if should_use_engine(ob):
            yield ob

engines_to_use = valid_engines() 
```

should_use_engine() 当然会替换为您上面的逻辑，以确定是否包含引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T22:30:31.520

如果该`skip`属性只为那些需要删除的对象设置，只需使用它：

```
import math
import itertools

for ob in engine.All:
    if isinstance(ob, Flatlander):
        ob.energy -= decay

for pair in itertools.combinations(engine.All, 2):
    fooditems = [x for x in pair if isinstance(x, Food) and not x.skip]
    animals = [x for x in pair if isinstance(x, Flatlander) and not x.skip]
    if not (fooditems and animals):
        continue
    animal = animals[0]
    food = fooditems[0]
    if collides(animal.pos, animal.r, food.pos, food.r):
        # This seems an odd calculation to me but I think it follows your code.
        if animal.energy + food.r < animal.r ** 2 * math.pi:
            # eating is feasible; the animal always eats the food if it can
            food.skip = True
            animal.energy += food.r # Not the area?

for ob in engine.All:
    if isinstance(ob, Flatlander) and ob.energy < 0:
        ob.skip = True # dead

# Remove dead things
engine.All = [ob for ob in engine.All if not ob.skip]

# Draw everything (no dead things remain)
for ob in engine.All:
    if ob.drawable:
      ob.draw() 
```

一般来说，我可能更愿意将食品和平地人放在单独的列表中。

有几种技术可以更有效地进行碰撞检测（例如将世界划分为正方形，并仅检查相同或周围正方形中的那些动物）但是如果您只有少数（比如少于几百个）动物/食物这将不需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T22:13:53.930

我不熟悉进化游戏，但我想你有某种 2D 地图（mb 3D）和一些移动并吃掉它们碰撞的第一个食物的动物？或者它是一种生活游戏？这基本上是一样的：p

如果是这样，我会在正方形中添加一个内容字段。当动物移动到一个方格时，您检查相邻的方格，如果存在食物，您只需将该方格的内容字段设置为 Null。这是对存储 2D 游戏中每个元素的位置的常见优化，可以根据需要进行调整。

您可以使用计时器字段添加已删除项目的列表，以告知每个项目应何时重新生成。此列表将按重新生成时间排序，以便您可以轻松检测是否需要重新插入项目。

# data-structures - 制作拼写检查实用程序

> ID：10542795
> 
> 赞同：-2
> 
> 时间：2012-05-10T22:02:15.777
> 
> 标签：data-structures, spell-checking

这个想法突然出现在我的脑海中，所以我没有任何代码可以显示它，但我很想知道答案。大多数主要的文字处理器是如何实现拼写检查的？我很想知道在创建这样一个实用程序时会使用什么样的数据结构。此外，对算法的引用也是很好的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:05:37.203

有关 python 的基本指南，请查看[此处](http://norvig.com/spell-correct.html)。

你也可能想看看[这个过去的问题](https://stackoverflow.com/questions/2294915/what-algorithm-gives-suggestions-in-a-spell-checker)

# android - Proguard Retrace 不适用于 E/AndroidRuntime(10237) 等堆栈跟踪运行时信息：

> ID：10542797
> 
> 赞同：15
> 
> 时间：2012-05-10T22:02:29.723
> 
> 标签：android, proguard

我需要从我的 proguard.trace 文件中删除行，例如 E/AndroidRuntime(10237): 以便回溯工作。基本上我正在查看日志文件，需要删除此行或回溯不起作用。我是否遗漏了什么，或者我需要为每个堆栈跟踪执行此操作？基本上它之前的信息出现在堆栈跟踪行的开头，例如

```
 E/AndroidRuntime(10237):  at com.test.a.b.c(UnnownSource) :134 
```

这是整个堆栈跟踪：

```
E/AndroidRuntime(10237): FATAL EXCEPTION: main
E/AndroidRuntime(10237): java.lang.ArithmeticException: divide by zero
E/AndroidRuntime(10237):    at ub.a(SourceFile:180)
E/AndroidRuntime(10237):    at wp.getView(SourceFile:290)

E/AndroidRuntime(10237):    at android.app.ActivityThread.main(ActivityThread.java:4627)
E/AndroidRuntime(10237):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(10237):    at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(10237):    at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
E/AndroidRuntime(10237):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
E/AndroidRuntime(10237):    at dalvik.system.NativeStart.main(Native Method)
      etc
E/        ( 2623): Dumpstate > /data/log/dumpstate_app_error 
```

所以我正在运行 ./retrace.sh mapping.txt proguard.retrace 上面的内容。除非我删除 E/AndroidRuntime(10237)，否则它不会回溯：我是否缺少一些回溯选项。需要如何准备跟踪文件才能使其正常工作？我不认为它是映射文件，因为它在我删除该行的第一部分后才起作用。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-07-26T14:47:48.167

Proguard 希望每个“at”在单独的行上，并且前面只有空格。如果它在 at 之前看到除空白之外的任何内容，则不会对其进行模糊处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-28T10:20:04.933

最新版本的 ReTrace 可以使用诸如“E/AndroidRuntime(10237):”之类的 logcat 前缀解析堆栈跟踪，因此它应该不再是问题。

如果您有 ReTrace 无法解析的堆栈跟踪格式，您始终可以使用选项[-regex](http://proguard.sourceforge.net/manual/retrace/usage.html)指定您自己的正则表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-09T19:40:02.820

尝试[recat](https://github.com/EverythingMe/recat)。它是一个基于 logcat-color 的 python 脚本，专门为这种场景制作，即时 logcat 去混淆（虽然在 Windows 上不起作用）。主要思想是它分别对日志的每个部分（标签/消息）进行去混淆处理。

# php - 在一个 php 文件中运行多个 php 文件

> ID：10542798
> 
> 赞同：0
> 
> 时间：2012-05-10T22:02:30.393
> 
> 标签：php, html

我想从一个文件一个接一个地运行三个 php 脚本。所有函数都已在每个文件中定义，因此当它们被调用（也称为运行）时，它们将执行操作。我认为下面的代码会运行所有 3 个，但它会在第一个文件完成运行后立即停止。有谁知道为什么？

谢谢

```
<?
error_reporting(E_ALL);ini_set('display_errors', 1);

require_once ("file1.php");
require_once ("file2.php");
require_once ("file3.php");
?> 
```

**在脚本结束前使用最后一个函数运行进行编辑**

```
function sendPush ($date)
 {

$username='xxxx';
$password='xxxxx';
$database='xxxxx';

$device="";

$db= new mysqli('localhost', $username, $password, $database);

if (mysqli_connect_errno())
{
    echo 'Error: Could not connect';
    //exit;

}

$query = "SELECT * FROM `DataTokens`";

$result = $db->query($query);
if ($result) {
    $num_results = $result->num_rows;

while($row = $result->fetch_assoc())
{

        if (!$row)
        {
            echo "No Token, insert into database";

        }

    $device= $row['Number'];

        // Put your device token here (without spaces):
        $deviceToken = $device;

        // Put your private key's passphrase here:
        $passphrase = 'XXXXXX';

        // Put your alert message here:
        $message = 'This is a test and its working';

        $i=1;
        $number= $i++;

        $ctx = stream_context_create();
        stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
        stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

        // Open a connection to the APNS server
        $fp = stream_socket_client(
            'ssl://gateway.sandbox.push.apple.com:2195', $err,
            $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

        if (!$fp)
            exit("Failed to connect: $err $errstr" . PHP_EOL);

        echo 'Connected to APNS' . PHP_EOL;

        // Create the payload body
        $body['aps'] = array(
            'alert' => $message,
            'sound' => 'default',
            'badge' => +1,
            'loc-key' => 'australia1'
            );

        // Encode the payload as JSON
        $payload = json_encode($body);

        // Build the binary notification
        $msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

        // Send it to the server
        $result = fwrite($fp, $msg, strlen($msg));

        if (!$result)
            echo 'Message not delivered' . PHP_EOL;
        else
            echo 'Message successfully delivered' . PHP_EOL;

        // Close the connection to the server
        fclose($fp);
    }

        } 
```

**新代码**

更换

```
 $result = $db->query($query);
if ($result) {
    $num_results = $result->num_rows; 
```

和

```
//$result = $db->query($query);
if ($result = $db->query($query)) {

echo "we have a problem";

}

else
{

 $num_results = $result->num_rows;

while($row = $result->fetch_assoc())
{

         //blah blah
    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:08:11.347

在代码的不同部分使用`echo`语句来确定失去控制的位置或程序退出的位置。

确保每当您从可能引发异常的命令中分配给变量时，在异常发生时捕获异常，或对其进行处理。或者至少在使用该对象之前验证非空性 (!is_null())。

# knockout.js - KnockoutJS 选择选项和选择的值

> ID：10542801
> 
> 赞同：19
> 
> 时间：2012-05-10T22:03:07.913
> 
> 标签：knockout.js

类似的问题：[选择元素的初始值](https://stackoverflow.com/questions/7516089/knockoutjs-select-initial-value)

我在设置选择元素的初始值时遇到问题。我基本上有一个来自服务器的种子数据列表来填充下拉列表，我希望所选值代表应该从实体中选择的内容。

因为数据模型的选择值不等于种子数据中的对象引用，所以没有选择任何内容。

现在，我正在遍历每个实体，找到正确的选定值，将其设置为等于种子数据的等效值，然后 Knockout 知道如何连接它。

有没有更优雅的解决方案？我用更多细节摆弄了一个简化的例子...... [http://jsfiddle.net/hbrYM/14/](http://jsfiddle.net/hbrYM/14/)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-10T23:40:39.877

正如您正确猜测的那样， selectedValue 引用不匹配，因此 KO 没有选择该项目。使其工作的方法是不将复杂对象保存在所选值中，而是选择 ID，因为原始类型相等可以成功并选择正确的值。

[http://jsfiddle.net/VLTFB/3/](http://jsfiddle.net/VLTFB/3/)

您需要在选项绑定上使用 optionsValue 选项（如果有意义的话：）

```
<select data-bind="options: seedData,
                    optionsText: 'firstName',
                    optionsValue: 'ID',
                    value: data.selectedValue"> 
```

**编辑**

如前所述，您可以使用计算（未经测试）重新选择正确的项目。

```
vm.currentlySelected = ko.computed(function () { 
   for (var i = 0; i < this.seedData().length; i += 1) {
       var data = this.seedData()[i];
       if (data.ID === this.selectedValue()) {
           return data;
       }
   }
   return null;
}, vm); 
```

希望这可以帮助。

# jquery - iFrame 刷新和一些设计？

> ID：10542804
> 
> 赞同：0
> 
> 时间：2012-05-10T22:03:34.403
> 
> 标签：jquery, asp.net, visual-studio-2010, pdf, iframe

我正在使用 Microsoft.NET Framework 4 学习 Web 应用程序。在阅读本书时，我正在编写我公司想要的网站原型。我的公司向客户销售报告。他们希望有一个网站，当客户登录时，他们可以查看所有购买的报告（目前没有商店）。

我的设计是： - 一个包含多个用户名、报告名称和报告文件路径的数据库表。- 服务器将有权访问的包含实际文件 (PDF) 的文件存储。- 用户登录后将查询数据库的网站，获取属于用户的所有报告行，列出它们，并有一个点击事件，将 iframe src 更改为所选报告的文件路径。

我有大部分工作。我有数据库查询工作，报告图标根据查询的内容填充，点击事件将 iFrame 的 src 属性更改为文件路径。

我没有工作的是，我无法让 iFrame 显示报告。如果我在 wesite 中包含的文件夹中有一份报告并对其进行了硬编码，则它显示得很好。如果我将硬编码值更改为`U:\\somefolder\someusername\somereport1.pdf`它不会显示（U：是映射驱动器）。`U:\\somefolder\someusername\somereport2.pdf`当我基于单击报告图标将源更改为时，它肯定不起作用。

这是声音设计吗？看来我已经很接近让它工作了。src属性改变时iFrame会自动刷新吗？

任何帮助将不胜感激，莱昂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:19:34.363

当您更改`src`iframe 时，您是在告诉浏览器去获取该 URL 中的任何内容。由于浏览器无法访问文件存储，只有 Web 服务器，它无法下载文件。如果您使用浏览器开发工具查看网络流量，您会看到每次更新 iframe 时都会返回 404。

浏览器要么需要直接访问 PDF 的位置，尽管这没有安全性，要么网站必须代理它们，允许它首先检查用户权限。

# c# - 在 JSON.Net 4.0 中使用 JObject 和 JProperty

> ID：10542810
> 
> 赞同：6
> 
> 时间：2012-05-10T22:03:55.970
> 
> 标签：c#, asp.net, json, json.net, deserialization

我正在尝试以这种格式反序列化 JSON：

```
{
   "data": [
      {
         "installed": 1,
         "user_likes": 1,
         "user_education_history": 1,
         "friends_education_history": 1,
         "bookmarked": 1
      }
   ]
} 
```

到一个像这样的简单字符串数组：

```
{
    "installed",
    "user_likes",
    "user_education_history",
    "friends_education_history",
    "bookmarked"
} 
```

使用`JSON.NET 4.0`

我已经使用“CustomCreationConverter”让它工作了

```
public class ListConverter : CustomCreationConverter<List<string>>
{
public override List<string> Create(Type objectType)
{
    return new List<string>();
}

public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
{
    var lst = new List<string>();

    //don't care about the inital 'data' element
    reader.Read();

    while (reader.Read())
    {
        if (reader.TokenType == JsonToken.PropertyName)
        {
            lst.Add(reader.Value.ToString());
        }
    }
    return lst;
}
} 
```

但这似乎有点过头了，特别是如果我想为许多不同的 json 响应创建一个。

我试过使用`JObject`，但似乎我做得不对：

```
List<string> lst = new List<string>();
JObject j = JObject.Parse(json_string);
foreach (JProperty p in j.SelectToken("data").Children().Children())
{
    lst.Add(p.Name);
} 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T22:25:22.217

有很多方法可以做到这一点，而且你所拥有的一切都很好。其他一些替代方案如下所示：

*   获取数组的第一个元素，而不是所有子元素
*   用于`SelectToken`通过一次调用转到第一个数组元素

    ```
     string json = @"{
          ""data"": [
            {
              ""installed"": 1,
              ""user_likes"": 1,
              ""user_education_history"": 1,
              ""friends_education_history"": 1,
              ""bookmarked"": 1
            }
          ]
        }";

        JObject j = JObject.Parse(json);

        // Directly traversing the graph
        var lst = j["data"][0].Select(jp => ((JProperty)jp).Name).ToList();
        Console.WriteLine(string.Join("--", lst));

        // Using SelectToken
        lst = j.SelectToken("data[0]").Children<JProperty>().Select(p => p.Name).ToList();
        Console.WriteLine(string.Join("--", lst)); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-13T13:08:39.057

您也可以使用此解决方案来获取键和值：

```
string key, value;
var propertyList = (JObject)j["data"];
foreach (var property in propertyList)
{
   key = property.Key;
   value = property.Value.ToString();
} 
```

# wcf - 为什么我的 WCF 响应传输 1MB 数据这么慢

> ID：10542814
> 
> 赞同：1
> 
> 时间：2012-05-10T22:04:22.300
> 
> 标签：wcf, protobuf-net

我已经为此工作了好几个小时，但没有找到任何解决我遇到的问题的方法。

我正在通过带有 basicHttpBinding 的 protobuf 序列化 3000 个 DTO 的列表。我可以看到 WCF 确实在发送带有编码数据的节点。问题是，这个响应的大小约为 1 MB，一旦我逐步完成调用中的最后一个方法，它需要 30 秒才能完成。如果我在列表上执行 .take(100) 响应大约需要 1-2 秒，并且 .take(1) 是即时的。

我尝试使用 protobuf 手动将 3000 条记录列表序列化为内存流，它几乎是瞬时的，这让我相信它与数据传输有关。

这可以在运行服务和站点的任何机器上复制。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:57:01.157

在制作原型以将 WCF 与其他一些技术进行比较时，我们遇到了类似的问题。我们认为我们已将 WCF 配置为使用 protobuf-net 进行序列化，但它无法正常工作。最让我头疼的*是没有错误*，WCF 只是默默默认了 DataContractSerializer。DataContractSerializer 将以二进制或 XML 序列化，具体取决于使用的 WCF 绑定。对于 basicHTTPBinding，它将序列化为 XML，这当然会导致响应大而慢。

我建议您验证 WCF 是否真的使用 protobuf-net 进行序列化。您应该能够通过使用wireshark（或类似工具）查看数据包内部来查看是否发生这种情况。

希望这有帮助 <333

# mysql - 执行此 MySQL 查询的更好方法？

> ID：10542815
> 
> 赞同：1
> 
> 时间：2012-05-10T22:04:30.767
> 
> 标签：mysql

这就是我现在正在做的事情，如何在不诉诸子查询且不使用 php.ini 的情况下做到这一点。我可以直接在 phpmyadmin 中运行它：

```
 <?php

    $query = mysql_query(" SELECT node_id FROM embeds ");
    while($row = mysql_fetch_assoc($query)) {
        $node_id = $row['node_id'];
        mysql_query(" INSERT INTO node_teaser(node_id, content) VALUES('$node_id', 'This is the teaser!') ");
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T22:07:17.420

```
INSERT INTO node_teaser(node_id, content)
SELECT node_id, 'This is the teaser!' FROM embeds; 
```

# java - 在 Java 的 for 循环中创建几个新对象

> ID：10542818
> 
> 赞同：1
> 
> 时间：2012-05-10T22:04:38.960
> 
> 标签：java

我想在 for 循环中从一个类创建几个对象。但我不知道如何编码。我所写的内容创建了一个新对象，但它覆盖了以前的对象。

```
package assginment1_version4;

import java.util.*;

public class Client {

public static void main (String[] args) {
    System.out.println ("this is a bill database");
    System.out.println ("add a user?(Y/N)");

    Scanner input = new Scanner(System.in);
    String answer = input.nextLine ();
    ArrayList ary = new ArrayList ();

    for (int i=1 ; i < 100; i++) {
        if (answer.equalsIgnoreCase("y")) {
            Bill bill1 = new Bill();
            System.out.println("user first name:");
            bill1.setFname (input.nextLine());
            System.out.println("user Last name:");
            bill1.setLname (input.nextLine());
            System.out.println ("add a user?(Y/N)");
            answer = input.nextLine ();
        } else if (answer.equalsIgnoreCase ("n")) {
            if (Bill.getBillCounter () == 0) {
                System.out.println ("the Database is empty");
                break;
            } else {
                System.out.println ("Number of Users:  "
                        + Bill.getBillCounter ());
                break;
            }
        } else {
            while (!answer.equalsIgnoreCase ("n")
                    && !answer.equalsIgnoreCase ("y")) {
                System.out.println ("add a user?(Y/N)");
                answer = input.nextLine ();
                }
            }
        }
    }
} 
```

请帮我完成这段代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T22:11:35.047

您正在覆盖它们，因为您`Bill`在每个循环上都创建了一个新的并且永远不会将它们保存在任何地方。我相信您想将它们添加到您的`ArrayList`：

首先，您应该向您的`ArrayList`:

```
ArrayList<Bill> ary = new ArrayList<Bill>(); 
```

然后，在您从用户那里获得关于是否添加新的输入之前`Bill`，您应该将当前的添加到此列表中：

```
...
System.out.println("user Last name:");
bill1.setLname(input.nextLine());
ary.add(bill1);
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T22:11:34.150

您还没有使用`ArrayList`，您需要在循环`Bill's`末尾添加对象。`for`

```
ary.add(bill1); 
```

并将类型添加到您的 ArrayList

```
ArrayList<Bill> ary = new ArrayList<Bill>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:21:06.230

这是比尔类......

```
package assginment1_version2;

public class Bill {

/**
 *  Attributes of a bill
 */
private String firstName;
private String lastName;
private int paymentDeadline;
private int paymentCode;
private int billCode;

/**
* Attribute of Bill Class
*/

      private static int BillCounter=0;

/**
 *  Methods of Bill class
 * @return number of users
 */
/*public static int getBillCounter(){
    return BillCounter;
}*/

/**
 * Class Constructor
 * @param Fname is the first name of user
 * @param Lname is the last name of user
 * @param Pdeadline is the deadline of paying the bill
 * @param Pcode introduces the payment uniquely 
 * @param Bcode introduces the bill uniquely
 */
    public Bill (){
        BillCounter++;
    }

/**
 *  FirstName methods 
 *  method to set FirstName
 * @param n is the input of setname method as a user name
 */
public void setFname (String n){
    firstName=n;
}
// method to get FirstName
public String getFname (){
    return firstName;
}

/**
 *  LastName methods
 *  method to set LastName
 */
public void setLname (String m){
    lastName=m;
}
// method to get LastName 
public String getLname(){
    return lastName;
}

/**
 * PaymentDeadline methods
 * method to set PaymentDeadline     
 */
public void setPaymentDeadline(int m){
    paymentDeadline= m;
}
//method to get PaymentDeadline
public int getPaymentDeadline(){
    return paymentDeadline;
}

/*
 * PaymentCode methods
 * Method to set PaymentCode
 */
public void setPaymentCode (int m){
    paymentCode=m;
}
//method to get PaymentCode
public int getPaymentCode(){
    return paymentCode;
}

/*
 * Methods of BillCode
 * method to set BillCode 
 */
public void setBcode(int Bcode){
    billCode=Bcode;
}
//method to get BillCode
public int getBcode(){
    return billCode;
}
} 
```

# javascript - JS/HTML5 从 url 中删除 url 参数

> ID：10542820
> 
> 赞同：1
> 
> 时间：2012-05-10T22:04:51.330
> 
> 标签：javascript, html, url, url-parameters

我有一个这样的网址

```
/users/?i=0&p=90 
```

我怎样才能在js中删除部分

```
? to 90 
```

谁能给我看一些代码？

编辑

我的意思是用 window.location.href 做这个（所以直接在浏览器 url 栏中）

我试过了

```
function removeParamsFromBrowserURL(){
    document.location.href =  transform(document.location.href.split("?")[0]);
    return document.location.href;
} 
```

我也不想进行重定向，所以只需从 ? 结束

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T22:07:56.593

```
function removeParamsFromBrowserURL(){
    return window.location.href.replace(/\?.*/,'');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T22:07:54.463

如果您只想要该`/users/`部分：

```
var newLoc = location.href.replace( /\?.+$/, '' ); 
```

您还可以拆分字符串，并返回第一部分：

```
var newLoc = location.href.split("?")[0]; 
```

或者您可以将所有内容与问号匹配：

```
if ( matches = location.href.match( /^(.+)\?/ ) ) {
  alert( matches[1] );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T22:08:05.480

一种方法是`leftside = whole.split('?')[0]`，假设没有？在所需的左侧

[http://jsfiddle.net/wjG5U/1/](http://jsfiddle.net/wjG5U/1/)

这将从 url 中删除 ?... 并自动将浏览器重新加载到剥离的 url（无法使其在 JSFiddle 中工作）我将以下代码放在一个文件中，然后手动放置一些 ?a=b 内容然后单击按钮。

```
<html>
  <head>
    <script type="text/javascript">
function strip() {
  whole=document.location.href;
  leftside = whole.split('?')[0];
  document.location.href=leftside;
}

    </script>
  </head>
  <body>
    <button onclick="strip()">Click</button>
  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T22:11:10.563

如果您只想要 /users/ 部分，那么您可以将其子串化：

```
var url = users/?i=0&p=90;
var urlWithNoParams = url.substring(0, url.indexOf('?') - 1); 
```

这会将字符串从索引 0 提取到 '?' 之前的字符。特点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T12:53:10.477

无论我使用哪个 url 重定向，我都遇到了 #page 来回引用粘在 url 中的问题。这解决了一切。

我使用这样的脚本：

```
<script type="text/javascript">

function strip() {
  whole=document.location.href;
  leftside = whole.split('#')[0];
  document.location.href=leftside;
}
</script>
<a onclick="strip()" href="http://[mysite]/hent.asp" >Click here</a> 
```

# twitter-bootstrap - 媒体查询、引导程序和 css3-mediaqueries-js - 媒体类型（屏幕、手持设备等）是可选的吗？

> ID：10542823
> 
> 赞同：2
> 
> 时间：2012-05-10T22:04:53.563
> 
> 标签：twitter-bootstrap, media-queries, responsive-design

我已经开始了一个基于 twitter 引导框架的新响应式 Web 项目（同时开始了 LESS 学习曲线），并且遇到了 IE 和媒体查询的问题。由于 IE7 和 8 不支持媒体查询，我获取了一份[css3-mediaqueries-js polyfill](http://code.google.com/p/css3-mediaqueries-js/)脚本的副本，以便 IE 开始响应。它没有用:-(

经过一番摸索后，我将问题缩小到媒体查询语法。Bootstrap 的媒体查询是：

```
@media (max-width: 480px) { ... }                         // Landscape phones and down
@media (max-width: 767px) { ... }                         // Landscape phone to portrait tablet
@media (min-width: 768px) and (max-width: 979px) { ... }  // Portrait tablet to landscape and desktop
@media (min-width: 1200px) { ... }                        // Large desktop 
```

`@media`事实证明，css3-mediaqueries-js 无法正确解析这些内容，因为脚本期望在和表达式之间存在媒体类型 - 屏幕、手持设备、全部等`(...)`，例如：

```
@media all and (max-width: 480px) { ... } 
```

问题是，哪个是正确的，bootstrap 还是 css3-mediaqueries.js？W3C 规范 (http://www.w3.org/TR/css3-mediaqueries/#media0) 说 css3-mediaqueries.js 是正确的，而 bootstrap 是错误的：

> 媒体查询由媒体类型和零个或多个检查特定媒体功能条件的表达式组成。

[一个稍微不那么权威的消息来源（Russ Weakly）](http://www.slideshare.net/maxdesign/css3-media-queries)则相反：

> 可以在没有媒体类型或关键字的情况下使用媒体功能。媒体类型假定为“全部”。（幻灯片 42）

更重要的是，这就是原生支持媒体查询的浏览器的行为方式。

那么哪个需要修复，bootstrap 还是 css-mediaqueries-js？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T14:28:10.760

类似（已回答）的问题：[Twitter Bootstrap 320andup Implementation](https://stackoverflow.com/questions/9976613/twitter-bootstrap-320andup-implementation)

我放弃了 css-mediaqueries-js 转而使用对没有媒体类型感到满意的[respond.js 。](https://github.com/scottjehl/Respond)

我关于哪种方法“正确”的问题仍然存在，尽管它更多的是标准问题而不是实施问题。我认为当前非强制性媒体类型的浏览器方法可能会赢得胜利。这意味着 css3-mediaqueries-js 需要一些更新来处理这个问题。

感谢 Christian Müller 对此的投入。

# c# - 使用 Lambda 表达式进行字符串连接

> ID：10542829
> 
> 赞同：10
> 
> 时间：2012-05-10T22:05:17.480
> 
> 标签：c#, linq, lambda

如果我有一个这样的类的列表：

```
class Info {
    public string Name { get; set; }
    public int Count { get; set; }
}

List<Info> newInfo = new List<Info>()
{
    {new Info { Name = "ONE", Count = 1 }},
    {new Info { Name = "TWO", Count = 2 }},
    {new Info { Name = "SIX", Count = 6 }}
}; 
```

可以使用 Lambda 表达式将类列表中的属性进行字符串连接，如下所示：

`"ONE(1), TWO(2), SIX(6)"`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T22:08:07.493

```
string.Join(", ", newInfo.Select(i => string.Format("{0}({1})", i.Name, i.Count))) 
```

您还可以覆盖 ToString。

```
class Info
{
   ....
   public override ToString()
   {
        return string.Format("{0}({1})", Name, Count);
   }
} 
```

...然后调用很简单（.Net 4.0）：

```
string.Join(", ", newInfo); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-10T22:07:38.270

```
String.Join(", ", newInfo.Select(i=>i.Name+"("+i.Count+")") ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-23T09:27:16.817

您可以使用如下

您可以像这样返回特定类型

```
Patient pt =  dc.Patients.Join(dc.PatientDetails, pm => pm.PatientId, pd => pd.PatientId,
                         (pm, pd) => new
                         {
                             pmm = pm,
                             pdd = pd
                         })
                         .Where(i => i.pmm.PatientCode == patientCode && i.pmm.IsActive || i.pdd.Mobile.Contains(patientCode))
                         .Select(s => new Patient
                         {
                             PatientId = s.pmm.PatientId,
                             PatientCode = s.pmm.PatientCode,
                             DateOfBirth = s.pmm.DateOfBirth,
                             IsActive = s.pmm.IsActive,
                             UpdatedOn = s.pmm.UpdatedOn,
                             UpdatedBy = s.pmm.UpdatedBy,
                             CreatedOn = s.pmm.CreatedOn,
                             CreatedBy = s.pmm.CreatedBy
                         }) 
```

或者您可以像这样检索匿名类型

```
var patientDetails = dc.Patients.Join(dc.PatientDetails, pm => pm.PatientId, pd => pd.PatientId,
                 (pm, pd) => new
                 {
                     pmm = pm,
                     pdd = pd
                 })
                 .Where(i => i.pmm.PatientCode == patientCode && i.pmm.IsActive || i.pdd.Mobile.Contains(patientCode))
                 .Select(s => new 
                 {
                     PatientId = s.pmm.PatientId,
                     PatientCode = s.pmm.PatientCode,
                     DateOfBirth = s.pmm.DateOfBirth,
                     IsActive = s.pmm.IsActive,                     
                     PatientMobile = s.pdd.Mobile,
                     s.pdd.Email,
                     s.pdd.District,
                     s.pdd.Age,
                     s.pdd.SittingId

                 }) 
```

# c++ - 未知 HZ 值

> ID：10542830
> 
> 赞同：5
> 
> 时间：2012-05-10T22:05:24.233
> 
> 标签：c++, linux, glibc, libc

我收到一条从 ARM 平台上运行的 Linux 应用程序 (Qt C++) 打印出来的消息：

> 未知 HZ 值！(108) 假设为 100。

此输出会定期显示在不同的应用程序中，括号中的值不同。

当我从 glibc 切换到基于 eglibc 的工具链来构建应用程序、内核和文件系统时，它就开始发生了。

似乎没有造成任何不良影响，至少不是直接的。

谁能解释这意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T02:31:22.577

[该帖子](http://www.bigismore.com/web-server-security/unknown-hz-value-assume-100-youve-been-hacked/)声称这意味着您已被黑客入侵。这是一个更详细的[说明](http://www.tediosity.com/2010/09/23/unknown-hz-value-assume-100/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:36:23.847

对于我的 Linux CentOS 5 机器，这表明服务器已被黑客入侵。[看看这里是怎么回事。](https://serverfault.com/questions/434776/hacked-centos-5-server-possible-rootkit-installed)

# c++ - 如何使用 fontconfig 获取字体列表（C/C++）？

> ID：10542832
> 
> 赞同：10
> 
> 时间：2012-05-10T22:05:29.277
> 
> 标签：c++, c, truetype

我听说 fontconfig 是在 linux 中获取字体的最佳选择。不幸的是，我一直在查看他们的开发人员文档，但我完全不知道自己在做什么。似乎没有简单的函数来获取系统字体列表。我必须改为执行模式搜索......对吗？

简而言之，使用 fontconfig 获取真实字体列表（它们的系列、字体和目录）的最佳方法是什么？当然，如果有比 fontconfig 更好的东西，我当然愿意接受其他解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T19:55:07.383

我有一个类似的问题，并找到了这篇文章（fontconfig 文档有点难读）。MindaugasJ 的响应很有用，但请注意调用类似`FcPatternPrint()`或打印结果的额外行`FcNameUnparse()`。此外，您需要在`FC_FILE`传递给的参数列表中添加一个参数`FcObjectSetBuild`。像这样的东西：

```
FcConfig* config = FcInitLoadConfigAndFonts();
FcPattern* pat = FcPatternCreate();
FcObjectSet* os = FcObjectSetBuild (FC_FAMILY, FC_STYLE, FC_LANG, FC_FILE, (char *) 0);
FcFontSet* fs = FcFontList(config, pat, os);

printf("Total matching fonts: %d\n", fs->nfont);
for (int i=0; fs && i < fs->nfont; ++i) {
   FcPattern* font = fs->fonts[i];
   FcChar8 *file, *style, *family;
   if (FcPatternGetString(font, FC_FILE, 0, &file) == FcResultMatch &&
       FcPatternGetString(font, FC_FAMILY, 0, &family) == FcResultMatch &&
       FcPatternGetString(font, FC_STYLE, 0, &style) == FcResultMatch)
   {
      printf("Filename: %s (family %s, style %s)\n", file, family, style);
   }
}
if (fs) FcFontSetDestroy(fs); 
```

我有一个稍微不同的问题要解决，因为我需要在`FC_New_Face()`给定一些字体“名称”的情况下找到要传递给 freetype 函数的字体文件。此代码能够使用 fontconfig 找到与名称匹配的最佳文件：

```
FcConfig* config = FcInitLoadConfigAndFonts();

// configure the search pattern, 
// assume "name" is a std::string with the desired font name in it
FcPattern* pat = FcNameParse((const FcChar8*)(name.c_str()));
FcConfigSubstitute(config, pat, FcMatchPattern);
FcDefaultSubstitute(pat);

// find the font
FcResult res;
FcPattern* font = FcFontMatch(config, pat, &res);
if (font)
{
   FcChar8* file = NULL;
   if (FcPatternGetString(font, FC_FILE, 0, &file) == FcResultMatch)
   {
      // save the file to another std::string
      fontFile = (char*)file;
   }
   FcPatternDestroy(font);
}

FcPatternDestroy(pat); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T07:36:38.493

这不完全是您所要求的，但它会为您提供可用字体列表。

```
#include <fontconfig.h>

FcPattern *pat;
FcFontSet *fs;
FcObjectSet *os;
FcChar8 *s, *file;
FcConfig *config;
FcBool result;
int i;

result = FcInit();
config = FcConfigGetCurrent();
FcConfigSetRescanInterval(config, 0);

// show the fonts (debugging)
pat = FcPatternCreate();
os = FcObjectSetBuild (FC_FAMILY, FC_STYLE, FC_LANG, (char *) 0);
fs = FcFontList(config, pat, os);
printf("Total fonts: %d", fs->nfont);
for (i=0; fs && i < fs->nfont; i++) {
    FcPattern *font = fs->fonts[i];//FcFontSetFont(fs, i);
    FcPatternPrint(font);
    s = FcNameUnparse(font);
    if (FcPatternGetString(font, FC_FILE, 0, &file) == FcResultMatch) {
        printf("Filename: %s", file);
    }
    printf("Font: %s", s);
    free(s);
}
if (fs) FcFontSetDestroy(fs); 
```

# php - Github API v3 POST 与 PHP

> ID：10542835
> 
> 赞同：0
> 
> 时间：2012-05-10T22:05:49.357
> 
> 标签：php, github, github-api

我正在尝试使用 Github v3 API 并发布 JSON 来更新配置文件（或其他调用）并从 Github 获得以下响应；

```
Array
(
    [message] => Body should be a JSON Hash 
) 
```

我已经浏览了 API Docs 上的相关页面：http: [//developer.github.com/v3/users/](http://developer.github.com/v3/users/)

这个页面： http: [//developer.github.com/v3/#http-verbs](http://developer.github.com/v3/#http-verbs)涵盖了 POST/PATCH

这是我正在使用的代码

```
$data = array("bio" => "This is my bio" );
$data_string = json_encode($data); 

function curl($url) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$url);
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST"); 
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);  

    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1); 
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT,1);
    curl_setopt($ch, CURLOPT_USERPWD, "USERNAME:PASSWORD");
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);   
    $content = curl_exec($ch);
    curl_close($ch);
    return $content;
}

$result = json_decode(curl('https://api.github.com/user'),true); 
```

我也尝试`CURLOPT_CUSTOMREQUEST`过`'POST'`，`'PATCH'`但两者都得到了相同的错误响应。

谁能指出我将数据发布到 API 的正确方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:10:55.663

您必须将变量传递给`global $data_string`或传递给以实现可重用性。`$data_string``curl()`

例子：

```
function curl($curl, $data)
{
    $data_string = json_encode($data);
    // your code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T22:12:41.863

您应该像这样指定标题：

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json')); 
```

# background-image - 如何消除下拉菜单中的虚边距？

> ID：10542836
> 
> 赞同：0
> 
> 时间：2012-05-10T22:05:57.300
> 
> 标签：background-image, css-float, css

我有一个运行良好的垂直下拉菜单。不过，我有一个无法处理的错误。

你可以在这里找到我的菜单：[test Page](http://rpmmachine.com/testfolder/index.html)

该菜单在 Internet Explorer 中运行良好（除了第一个子菜单上有一点点下降，我可以忍受（如果你知道那是什么的话，可以加分），但在其他浏览器中，我的背景从子菜单流回主菜单. “保证金”从何而来？

到目前为止，我发现这与我给`li:hover`孩子们的风格有关

我的 CSS 中可能有用的片段

```
ul#menu3{
display:block;
left:20px;
margin:0;
width:10em;
padding:0;
position:absolute;
list-style:none;
}
ul#menu3 li{
color:#000000;/*
float:left;*/
position:relative;
margin:0;/*
margin-bottom:-1px;*/
line-height:31px;
text-align:center;
width:10em;
padding:0;
font-weight:bold;
display:block;
vertical-align:middle;
background-image:url(../../../menu4/awmdata/button-tile.gif);
}
ul#menu3 li:hover ul{
text-align:center;
vertical-align:bottom;
background-image:url(../../../menu4/awmdata/button-tile.gif);
background-repeat:repeat;
left:auto;
margin-top:-31px;
}
ul#menu3 li ul{
position:absolute;
left:-999em;
margin-left:10em;
margin-top:-31px;
}
ul#menu3 li ul li{
color:#000000;
margin:0;
left:auto;
padding:0;
font-weight:bold;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:43:39.020

把它贴在你的styles.css的顶部

```
ul, li {
    margin: 0;
    padding: 0;
} 
```

当为菜单使用无序列表时，删除边距和填充总是一个好主意，这样您就可以从一开始就更好地控制布局

# actionscript-3 - AS3 文本字段白名单

> ID：10542847
> 
> 赞同：0
> 
> 时间：2012-05-10T22:06:55.060
> 
> 标签：actionscript-3, flash, actionscript, adobe

所以我有这个聊天应用程序，它只允许用户说出数组中的特定单词（白名单）。我真的需要一些帮助来创建一个检查每个单词的函数，并将那些不在白名单中的单词替换为“###”。我有一个外部 Dictionary.txt 文件，但我还在代码中设置了一个数组（白名单）。

请帮帮我！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:34:46.267

这是我能想象的简单方法

```
var words:Array = ["test", "fu--"];
//
function dicionary(word:String) {
    for (var i:Number = 0; i < words.length; i++) {
        if (words[i] == word) {
            trace ("####");
        }
    }
}
//
dicionary("fu--");
dicionary("Hello"); 
```

希望能帮助到你

**已编辑**

像这样更好，因为现在它可以替换句子中的单词

```
var words:Array = ["test", "fu--"];
//
function dicionary(word:String) {
    for (var i:Number = 0; i < words.length; i++) {
        word = word.split(words[i]).join("####");
    }
    return(word);
}
//
trace(dicionary("fu-- I was wrong!"));
trace(dicionary("Hello")); 
```

# ruby-on-rails - 在 Rails POST 请求中查找表单字段

> ID：10542848
> 
> 赞同：0
> 
> 时间：2012-05-10T22:06:56.803
> 
> 标签：ruby-on-rails, http-headers, http-post, ruby-on-rails-3.2

我正在使用普通的旧 HTML 表单向 Rails 应用程序发送发布请求。在应用程序内部，我想获取一些输入字段。我无法在请求中找到它们。

试试这个：

```
logger.debug "Request Headers #{request.headers.inspect}" 
```

吐出大量数据，但我在其中找不到我的表单字段。有谁知道我在哪里可以找到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:08:49.493

您可以使用以下方式获取提交的请求参数：

```
logger.debug params.inspect 
```

这将显示所有提交的表单数据。

# android - 表行划分

> ID：10542852
> 
> 赞同：2
> 
> 时间：2012-05-10T22:07:22.627
> 
> 标签：android, android-layout, tablelayout, tablerow

好吧，我的应用程序有一个包含很多表格行的表格布局，但是我怎样才能在它们之间进行划分呢？例如：一个 tablerow，之后是一行，之后是另一个 tablerow，依此类推。有什么财产吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T23:30:27.957

在 Android 3.0 及更高版本中有。在您的 TableLayout 上：

```
android:divider="?android:attr/dividerHorizontal"
android:showDividers="middle" 
```

在 Android 3.0 之前，您应该能够使用虚拟视图作为每行之间的分隔符，如下所示：

```
<View android:layout_width="match_parent"
      android:layout_height="1dp"
      android:background="?android:attr/listDivider" /> 
```

# mysql - 如何清除/刷新 mysql innodb 缓冲池？

> ID：10542853
> 
> 赞同：7
> 
> 时间：2012-05-10T22:07:33.337
> 
> 标签：mysql, sql, innodb

我正在调整一个大型查询，并希望在之前和之后从相同的基线运行它，以进行比较。

我知道 mysql 查询缓存，但它与我无关，因为这 2 个查询无论如何都不会被缓存。

正在缓存的是缓冲池中的 innodb 页面。有没有办法清除整个缓冲池，以便我可以从同一起点比较两个查询？

虽然在运行每个查询后重新启动 mysql 服务器无疑会起作用，但如果可能的话，我想避免这种情况

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T22:25:24.860

警告：以下仅适用于 MySQL 5.5 和 MySQL 5.1.41+（InnoDB 插件）

使用以下设置调整 InnoDB 缓冲池中条目的持续时间：

```
// This is 0.25 seconds
SET GLOBAL innodb_old_blocks_time=250; 
SET GLOBAL innodb_old_blocks_pct=5;
SET GLOBAL innodb_max_dirty_pages_pct=0; 
```

完成测试后，将它们设置回默认值：

```
SET GLOBAL innodb_old_blocks_time=0;
SET GLOBAL innodb_old_blocks_pct=37;
SET GLOBAL innodb_max_dirty_pages_pct=90;
// 75 for MySQL 5.5/MySQL 5.1 InnoDB Plugin 
```

查看这些设置的定义

*   MySQL 5.5
*   [**innodb_old_blocks_time**](http://dev.mysql.com/doc/refman/5.1/en/innodb-parameters.html#sysvar_innodb_old_blocks_time)
*   [**innodb_old_blocks_pct**](http://dev.mysql.com/doc/refman/5.1/en/innodb-parameters.html#sysvar_innodb_old_blocks_pct)
*   [**innodb_max_dirty_pages_pct**](http://dev.mysql.com/doc/refman/5.1/en/innodb-parameters.html#sysvar_innodb_max_dirty_pages_pct)
*   MySQL 5.1.41+
*   [**innodb_old_blocks_time**](http://dev.mysql.com/doc/refman/5.1/en/innodb-parameters.html#sysvar_innodb_old_blocks_time)
*   [**innodb_old_blocks_pct**](http://dev.mysql.com/doc/refman/5.1/en/innodb-parameters.html#sysvar_innodb_old_blocks_pct)
*   [**innodb_max_dirty_pages_pct**](http://dev.mysql.com/doc/refman/5.1/en/innodb-parameters.html#sysvar_innodb_max_dirty_pages_pct)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-01T21:33:09.823

简单得多... **运行两次**

```
SELECT SQL_NO_CACHE ...; 
```

看看*第二个*时机。

第一个预热buffer_pool；第二个通过`SQL_NO_CACHE`. （在 MySQL 8.0 中，离开`SQL_NO_CACHE`; 它消失了。）

因此，第二个时间很好地表明了在具有热缓存的生产系统中需要多长时间。

此外，**查看处理程序计数**

```
FLUSH STATUS;
SELECT ...;
SHOW SESSION STATUS LIKE 'Handlers%'; 
```

给出了触摸多少行的相当清晰的图片。这反过来又让您对查询花费了多少精力有一个很好的感觉。请注意，这可以在小型数据集上非常成功（并且快速）地运行。然后，您可以（通常）外推到更大的数据集。

“Handler_read”可能正在读取索引行或数据行。它可能是“下一个”行（因此可能缓存在为前一行读取的块中），也可能是随机的（因此可能会受到另一个磁盘命中）。也就是说，该技术对“需要多少块”没有多大帮助。

这种 Handler 技术不受其他情况的影响；它给出了一致的结果。

“Handler_write”表示需要一个 tmp 表。

近似于表中行数（或这样的倍数）的数字*可能*表示表扫描。与 相同的数字`LIMIT` *可能*意味着您构建了一个很好的索引，以至于它消耗了它`LIMIT`本身。

如果您确实刷新了 buffer_pool，您可以观察更改以给出在*冷*系统**`Innodb_buffer_pool_reads`**中读取的页面数的精确（？）计数。这将包括几乎总是被缓存的非叶索引页。如果系统中发生其他任何事情，则不应信任此值，因为它是“全局”的，而不是“会话”。*`STATUS`*

# perl - 有选择地将数组的元素连接到新数组的较少元素中

> ID：10542856
> 
> 赞同：0
> 
> 时间：2012-05-10T22:07:39.233
> 
> 标签：perl, sequence, bioinformatics, fasta, bioperl

我在处理 .fasta 格式的 DNA 序列数据数组时遇到了一些麻烦。我特别想做的是获取一个包含几千个序列的文件，并将文件中每个序列的序列数据连接到文件中的一行。[Fasta 格式是这样的：序列 ID 以 > 开头，之后该行的所有内容都是描述。在下一行中，存在与此 ID 对应的序列。这可以无限期地持续到以 > 开头的下一行，这是文件中下一个序列的 id] 所以，在我的特定文件中，我的大部分序列都在多行上，所以我想做的基本上是删除换行符，但仅删除序列数据之间的新行，而不是序列数据和序列 ID 行（以 > 开头）之间的新行。

我这样做是因为我希望能够获得每个序列的序列长度（通过长度，我相信是最简单的方法），然后获得整个文件中所有序列的平均序列长度。

到目前为止，这是我的脚本，似乎不想工作：

```
#!/usr/bin/perl -w

##Subroutine
sub get_file_data1 { 
    my($filename) = $_[0];
    my @filedata = ();
    unless( open(GET_FILE_DATA, $filename)) {
    print STDERR "Cannot open file \"$filename\"\n\n";
    exit;
    }
    @filedata = <GET_FILE_DATA>;
    close GET_FILE_DATA;
    return @filedata;
}

##Opening files
my $fsafile = $ARGV[0];
my @filedata = &get_file_data1($fsafile);

##Procedure
my @count;
my @ids;
my $seq;

foreach $seq (@filedata){
        if ($seq =~ /^>/) {push @ids, $seq;
                                 push @count, "\n";
    }
        else {push @count, $seq;
    }
}

foreach my $line (@count) {
    if ($line =~ /^[AGTCagtc]/){
         $line =~ s/^([AGTCagtc]*)\n/$1/;
    }
}

##Make a text file to have a look
open FILE3, "> unbrokenseq.txt" or die "Cannot open output.txt: $!";

foreach (@count)
{
    print FILE3 "$_\n"; # Print each entry in our array to the file
}
close FILE3;

__END__
##Creating array of lengths
my $number;
my @numberarray;
foreach $number (@count) {
                push @numberarray, length($number);
                }
print @numberarray;

__END__
use List::Util qw(sum);

sub mean {
    return sum(@numberarray)/@numberarray;
} 
```

程序部分的第二行**foreach**有问题，我似乎无法弄清楚它是什么。请注意，我什至还没有尝试过 END 行之后的代码，因为我似乎无法在过程步骤中获取代码来执行我想要的操作。知道如何获得一个包含完整序列元素的漂亮数组（我选择只从新数组中删除序列 ID 行..）吗？当我可以得到一个长度数组，然后我可以平均？

最后我很遗憾地承认我无法让 Bio::Perl 在我的计算机上工作，我已经尝试了几个小时，但这些错误超出了我的修复能力。我将与希望能帮助我解决 Bio::perl 问题的人交谈。但现在我只需要在没有它的情况下继续前进。

谢谢！抱歉这篇文章的长度，我很感激帮助。

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T02:10:53.917

The problem with your second loop is that you are not actually changing anything in `@count` because `$line` contains a copy of the values in `@count`.

But, if all you want to do in the second loop is to remove the newline character at the end, use the `chomp` function. with this you wouldn't need your second loop. (And it would also be faster than using the regex.)

```
# remove newlines for all array elements before doing anything else with it
chomp @filedata;

# .. or you can do it in your first loop
foreach $seq (@filedata){
    chomp $seq;
    if ($seq =~ /^>/) {
    ...
} 
```

An additional tip: Using `get_file_data1` to read the entire file into an array might be slow if your files are large. In that case it would be better to iterate through the file as you go:

```
open my $FILE_DATA, $filename or die "Cannot open file \"$filename\"\n";
while (my $line = <$FILE_DATA>) {
    chomp $line;
    # process the record as in your Procedure section
    ...
}
close $FILE_DATA; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T02:09:13.977

Be careful with the '*' or 'greedy' modifier to your character groups in s///. You usually want the '+' instead. '*' will also match lines containing none of your characters.

A Search expression with a 'g' modifier can also count characters. Like this:

```
$perl -e '$a="aggaacaat"; $b = $a =~ s/[a]//g; print $b; '
5 
```

Pretty cool huh! Alternately, in your code, you could just call length() against $1.

I was taken aback to see the escaped '/n' in your regex. While it works fine, the common 'end-of-line' search term is '$'. This is more portable and doesn't mess up your character counts.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-10T23:34:24.557

您的正则表达式专门捕获 $1 但您正在将 $_ 打印到文件中。结果很可能不是您想要的。

# android - 寻找另一部智能手机的笛卡尔坐标？

> ID：10542857
> 
> 赞同：4
> 
> 时间：2012-05-10T22:07:43.377
> 
> 标签：android, iphone, bluetooth, gps, smartphone

考虑到我有两部智能手机 A 和 B。如果我拿着智能手机 A，有没有办法确定 B 相对于我自己的位置？

所以如果我们有这个图像的情况：

![笛卡尔坐标](../Images/e27691f1463b0e2b5e2022d75253b831.png)：

它会告诉我 B 在位置 (2, 1)。

使用 wifi 信号强度来获取位置等创造性方法更受欢迎。我是否也可以确定两部手机之间是否有墙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T22:34:34.967

据我了解，蓝牙和 Wi-Fi 信号都以径向波向各个方向移动 - 所以虽然你可以测量两个终端之间的距离，但我怀疑这会给你一个正确的读数，因为它可以要么在圆形区域的“一侧”，要么与信号源等距。

虽然 GPS 可能是显而易见的解决方案，因为它提供了您正在寻找的东西，但我不确定您是否将其作为一个选项。一旦获得设备的两个坐标集，就可以计算设备 1 的偏移量（N/S 和 E/W）。

这让我想到了 GPS 给出的准确性，考虑到您在问题中包含了标签蓝牙，并且由于蓝牙的范围约为 15-30 英尺（类型 2-3），而 GPS 的误差范围为 25 -35 英尺，这也可能不好。

如果您**确实**设法在两个设备之间建立连接（蓝牙），那么您已经知道您在那个范围内，但不知道在哪个方向。您可以从 Android 2.1 获得信号强度测量[：如何轮询现有蓝牙连接的 RSSI 值？](https://stackoverflow.com/questions/2149295/android-2-1-how-do-i-poll-the-rssi-value-of-an-existing-bluetooth-connection)但是我再次不确定如何检测用户相对于你的方向，无论他在任何方向上有多近。该死的其他设备可能在您的上方或下方，并且在相同距离的情况下，您将获得与您旁边的读数几乎相同的读数。

这都是“静态”方法，这意味着两个设备都是固定的。但是，如果您测量该值，然后向左迈出一步并重新测量，您可以判断您是离源更近还是更远，因此通过对其中一个设备的移动进行一些试验和错误，您可以确定一个相对位置，但这可能对您没有用，因为您要么需要手动告诉手机您向左移动并重新测量，要么使用更复杂的东西，例如监控手机的加速度计，它可以告诉手机的方向手机移动并映射信号强度。

我失去理智了吗？**大概**。

暂时还没有答案，只是想一想。根据应用程序将执行的操作，可能还有其他可行的方法。这是我的脑残答案，因此希望其他人可以阅读并提出更详尽的答案，而不是胡思乱想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T03:04:29.503

如果从 A 到 B 的距离超过几米，那么如果您可以获取 A 和 B 的 GPS 位置，您可以使用 Location.distanceTo() 和 Location.bearingTo() 轻松计算它们之间的距离和方位方法。

根据物理环境，物理上靠得很近的两个 GPS 很可能使用相同的卫星进行计算，并且两者的误差相似。所以在某些情况下，使用 GPS 可能适用于小距离。

# emacs - Emacs 文件编辑历史

> ID：10542858
> 
> 赞同：5
> 
> 时间：2012-05-10T22:07:43.857
> 
> 标签：emacs, diff

是否有一个 emacs 扩展程序在文件被编辑时对文件进行定期快照（每分钟一次，每 x 击键一次，等等），类似于 Eclipse 中的更改历史记录或 Google Docs 和其他程序中的编辑历史记录？

我希望有一些东西可以让我轻松浏览我每天所做的更改 - 是否已经写过类似的东西？

**编辑**

我应该更具体 - 我不是在寻找 VCS。我正在寻找一种次要模式或类似的东西，我可以打开并在磁盘上保存修订的硬拷贝。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T15:54:52.953

有一个称为自动保存的内置功能，可以在 N 次击键后保存（也许在 M 秒后，我不确定）。如果 Emacs 崩溃，我通常会使用它，而不是查看我所做的编辑；撤消更好。这是我的配置：

```
(setq autosave-dir (concat user-emacs-directory "autosaves/")
      auto-save-list-file-prefix (concat emacs-persistence-directory
                                         "autosave-list"))
(if (not (file-exists-p autosave-dir))
    (make-directory autosave-dir t))
(add-to-list 'auto-save-file-name-transforms
             `("\\`/?\\([^/]*/\\)*\\([^/]*\\)\\'" ,(concat autosave-dir "\\2") t))
;; tramp autosaves
(setq tramp-auto-save-directory (concat user-emacs-directory "tramp-autosaves/"))
(if (not (file-exists-p tramp-auto-save-directory))
    (make-directory tramp-auto-save-directory)) 
```

还有一个备份系统，可以在每次保存后创建一个副本（不是自动保存）。我将它用于我认为您所要求的 - 查看自我上次 VCS 提交以来的历史记录。这是我的配置：

```
(setq make-backup-files t
      vc-make-backup-files t
      version-control t
      kept-new-versions 256
      kept-old-versions 0
      delete-old-versions t
      backup-by-copying t)
(setq backup-dir (concat user-emacs-directory "backup/"))
(if (not (file-exists-p backup-dir))
    (make-directory backup-dir))
(add-to-list 'backup-directory-alist
             `(".*" . ,backup-dir))
(defun force-backup-of-buffer ()
  (setq buffer-backed-up nil))
(add-hook 'before-save-hook 'force-backup-of-buffer)
;; this is what tramp uses
(setq tramp-backup-directory-alist backup-directory-alist)

(add-to-path "backup-walker")
(autoload 'backup-walker-start "backup-walker"
  "start walking with the latest backup" t) 
```

我使用出色的[备份漫游器](https://github.com/lewang/backup-walker)来浏览备份。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-23T21:22:31.167

我为此找到的最佳解决方案是[`undo-tree`](http://www.emacswiki.org/emacs/UndoTree)，它是与 vim 等效的 Emacs `gundo`：它使您可以可视化撤消/重做树，浏览更改并在不同版本之间来回切换。

`undo-tree`可以使用 ELPA 安装；安装后，将以下内容添加到`.emacs`：

```
(require 'undo-tree)
(global-undo-tree-mode) 
```

然后可以使用`Ctrl`- `x` `u`( `undo-tree-visualize`) 可视化撤消树。可以使用箭头键以非常直观的方式导航不同的“版本”。

历史也可以使用`undo-tree-save-history`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-10T22:24:42.787

如果您真的很重视保留更改，我强烈建议您开始使用 git。它适用于您的 windows 和 linux 编码环境。我用它来来回移植代码中的更改。它在修复所有小行尾和合并更改方面做得很好。

如果您真的只是希望它保留旧版本，那么 emacs 可以在您每次保存时创建一个新备份。它只是在您当前文件旁边创建另一个文件。这样您就可以控制它创建新备份的频率（每次保存时）。

这是一个讨论选项的好页面：

[ftp://ftp.gnu.org/pub/old-gnu/Manuals/emacs-20.7/html_chapter/emacs_18.html#SEC109](ftp://ftp.gnu.org/pub/old-gnu/Manuals/emacs-20.7/html_chapter/emacs_18.html#SEC109)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T15:31:39.613

试试[http://www.emacswiki.org/emacs/BackupEachSave](http://www.emacswiki.org/emacs/BackupEachSave)

它救了我很多次，让我可以回溯。

# apache - Apache 与您自己的服务器的优缺点？

> ID：10542861
> 
> 赞同：0
> 
> 时间：2012-05-10T22:07:56.023
> 
> 标签：apache, ssl

几周以来，我一直在自己的基于 ssl 的多进程多文件描述符线程服务器上工作，不用说它可以处理大量的惩罚。我正在以面向对象的方式用 C++ 编写它，它几乎完成了信号处理（包括原子访问）和异常/errno.h 处理。

目标是使用服务器为 Android/iOS 制作多人应用程序和游戏。我实际上非常接近完成，但最近我突然想到我可以使用 Apache 来完成它。

我尝试做一些研究，但找不到任何东西，所以也许有人可以帮助我决定天气我应该完成我的服务器并使用它或使用 apache 或其他什么。apache 与自己​​的服务器相比有哪些优缺点？

感谢愿意参与本次讨论的各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:05:00.450

即使存在经过充分验证的替代方案，您也始终可以编写自己的软件，但您应该意识到这样做的原因以及成本是多少。

例如，您的原因可能是：

*   现有软件太慢/高延迟/难以同步
*   现有的软件无法为我的目的而扩展
*   您的需求不会与软件强加的架构重叠 - 例如，如果您需要 P2P 网络，那么基于客户端/服务器的 HTTP 协议不是您的最佳选择
*   您只是想在探索低级协议的过程中获得乐趣

我相信上述任何一项都可能适用于您的案件，但您没有提供太多细节，所以如果我错了，我深表歉意。

成本可能是：

*   您的架构可能会变得混乱 - 例如，您可能会陷入让您的服务器忙于计算是否有枪击中敌人的陷阱，当 10 个客户端试图启动 TCP 连接时，或者您的持久存储例程中的缓冲区溢出时关闭整个服务器
*   当您应该处理游戏引擎时，您会花时间在较低级别的东西上
*   安全性*很难*做到正确，需要多年的入侵测试和正式证明（*即使*您使用的是 openSSL）
*   制定自己的协议意味着制造自己的错误
*   您自己的协议意味着您必须制作自己的调试器（例如，您不能使用 curl 进行测试或使用 HTTP 代理进行跟踪）
*   您必须解决现有解决方案已经解决的许多问题。例如缓存、身份验证、重定向、日志记录、多节点扩展、资源分配、代理
*   对于你自己的东西，你只能向自己寻求帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T22:13:48.843

我们需要有关您打算完成的工作的更多详细信息，但如果它符合您的需求，无论如何我都会选择 Apache：

*   它经过了各种案例和负载的实战测试
*   您可以从所有可用的模块中受益（参见[http://httpd.apache.org/docs/2.0/mod/](http://httpd.apache.org/docs/2.0/mod/)）
*   您可以从定期的安全补丁中受益
*   你不必自己维护它！

希望这可以帮助！

# css - 镀铬边框问题

> ID：10542868
> 
> 赞同：4
> 
> 时间：2012-05-10T22:08:20.213
> 
> 标签：css, google-chrome, border

我只在chrome中遇到这个问题。如何去除图像周围的边框？请看 chrome 中的小提琴。

```
<form>
    <input type="image" class="searchbox_submit search_btn" value="">
</form> 
```

```
form input[type=text]:focus, form input[type=password]:focus, textarea:focus {
    outline: none;
}

.search_btn {
    background: url("http://static.ak.fbcdn.net/rsrc.php/v1/yu/r/yo348KDuskF.png") no-repeat scroll 0px -200px transparent;
    height: 25px;
    width: 30px;
    outline: none;
    border: none;
    outline-width: 0;
    -webkit-appearance: none; 
}​ 
```

**演示：http:** [//jsfiddle.net/TXYg6/](http://jsfiddle.net/TXYg6/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T22:24:54.143

您正在使用`<input type="image" />`，因此[需要一个`src`属性](http://developers.whatwg.org/states-of-the-type-attribute.html#image-button-state-%28type=image%29)。您还没有指定一个，因此 Chrome 显示一个灰色边框，与没有属性的[情况`img`](http://jsfiddle.net/thirtydot/fNbF6/)相同`src`。

如果你想坚持使用`<input type="image" />`和使用 CSS sprite，你将不得不指定*一些东西*，比如`src`1x1 透明的“blank.gif”。

[http://jsfiddle.net/thirtydot/TXYg6/14/](http://jsfiddle.net/thirtydot/TXYg6/14/)

然而，这似乎很可怕。相反，我建议切换到`<input type="submit" />`，这样[可以解决问题](http://jsfiddle.net/thirtydot/TXYg6/25/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T22:31:45.380

用提交类型替换它

```
<input type="submit" class="searchbox_submit search_btn" value=""> 
```

更正你的 CSS 高度和宽度

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T22:28:20.163

给它一个空白图像作为`src`使用`data:`URI。由于您只关心 Chrome，因此没有问题：

```
<input type="image" class="searchbox_submit search_btn" value="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAAAA1JREFUGFdj+P//PwMACPwC/ohfBuAAAAAASUVORK5CYII="> 
```

[http://jsfiddle.net/TXYg6/23/](http://jsfiddle.net/TXYg6/23/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T22:28:53.070

Chrome 为没有 src 的任何图像提供边框/轮廓，您可以将输入类型设置为“提交”，这将消失。

或者，使用带有 src 的 an 并由此触发提交，但您也可以只使用 type="submit"

[不需要的镀铬边框](https://stackoverflow.com/questions/4108983/input-type-image-shows-unwanted-border-in-chrome-and-broken-link-in-ie7)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T22:21:01.773

你真的需要那个att type="image"吗？因为这就是导致问题的原因...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T22:37:30.067

从语义上讲，我会说使用 a`button`因为您实际上没有关联的输入值，因此它*不是*输入：

```
<button type="submit" class="searchbox_submit search_btn"></button> 
```

从[文档](http://www.w3.org/TR/html4/interact/forms.html#h-17.5)：

> 使用 BUTTON 元素创建的按钮功能与使用 INPUT 元素创建的按钮一样，但它们提供了更丰富的呈现可能性：BUTTON 元素可能具有内容。例如，包含图像的 BUTTON 元素的功能类似于并且可能类似于类型设置为“图像”的 INPUT 元素，但 BUTTON 元素类型允许内容。

干杯

# visual-studio - 如何处理“由于命令行无效导致连接失败”错误？

> ID：10542871
> 
> 赞同：2
> 
> 时间：2012-05-10T22:08:29.773
> 
> 标签：visual-studio, windows-phone-7

我已经安装了所有必要的组件：*sdk、工具包、Windows7 SP1、Visual Studio 2010 SP1*，但它不起作用。它在运行时给了我一个无效的命令行参数错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:07:59.740

Please install Media Format Feature Pack for Windows and retry. It worked for me.

# java - EL表达式中的字符比较

> ID：10542875
> 
> 赞同：6
> 
> 时间：2012-05-10T22:08:45.447
> 
> 标签：java, jsp, comparison, char, el

我想做这样的事情：

```
<c:if test="${somestring.charAt(0)=='1'}">
tadaaaam
</c:if> 
```

当 somestring 是“11011”但它不起作用。我可以用它打印

```
${somestring.charAt(0)} 
```

它是“1”，但上面的比较失败了。以下对比：

```
if(somestring.charAt(0)=='1') 
```

纯Java中的worx（条件为真）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T04:59:25.483

EL 似乎对 char 有问题。这是我可以使它工作的唯一方法。

```
<c:if test="${somestring.charAt(0)  == '1'.charAt(0)}" >
     tadaaaam
</c:if> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-11T07:27:19.667

该行为完全符合 EL 规范的预期和要求。如果您采用 EL 规范的 2.2 版，则需要查看 1.8.2 节，该节提供了 '==' 运算符的规则。

在这种情况下，操作数是`somestring.charAt(0)`which is a`char`和`'1'`which is a `String`(NOT a char)，因为字符串可以由 EL 中的单引号或双引号分隔。

鉴于我们有 Character == String，那么 1.8.2 的第六个项目符号适用并且两者都被强制为 Long 值。该字符将被强制为 49（1 的 ASCII 代码），而 1 被强制为 1。这些不相等，因此您会看到结果。

我明白这不是您所期望的，但这是规范要求的行为，并且是由 EL 中的单引号分隔字符串而不是字符这一事实触发的。

# asp.net - WCF 远程调试的符号位置

> ID：10542880
> 
> 赞同：2
> 
> 时间：2012-05-10T22:09:23.137
> 
> 标签：asp.net, wcf, visual-studio-2010, remote-debugging

这更像是一个“为什么这样工作”而不是“我如何使这个工作”之类的问题。

我有一个正在远程调试的 WCF Web 服务。它被部署到安装了 VS 2010 远程调试器并作为 Windows 服务运行的登台服务器。权限是正确的，我可以毫无问题地附加到进程。我遇到的问题是我无法始终如一地加载符号。

我将 WCF 服务部署到 C:\Webs\MyService，并在 C:\Webs\MyService\bin 中包含各种 DLL。它被设置为具有自己的应用程序池的单独站点。我发现即使 bin 文件夹中有必要的 .pdb 文件，当我从本地计算机附加到 w3wp.exe 进程时，Visual Studio 也不会加载任何符号。发生的事情是当 IIS 启动并生成工作进程时，我的服务 DLL 将被复制到临时 ASP.NET 文件目录下的深处，例如 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP .NET 文件\root\19f82539\e55fff8f\assembly\dl3\2926a261\f625d158_f62ecd01。我发现如果我手动将 .pdb 文件复制到此文件夹，则会加载符号并且我可以进行调试。

我想知道为什么它会这样工作，以及如何避免将符号文件手动复制到另一个目录。更糟糕的是，如果我必须进行更改并重新部署，工作进程将无法识别它们。我不得不重新启动 IIS，这导致创建了一个不同的临时目录，需要我再次复制 .pdb。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T16:46:20.680

我有类似的问题，Web 应用程序。显然微软知道这一点：http: [//go4answers.webhost4life.com/Example/remote-debugging-symbols-not-loaded-207525.aspx](http://go4answers.webhost4life.com/Example/remote-debugging-symbols-not-loaded-207525.aspx)

希望他们很快就会发布修复程序。

BrianR 还有一个相关问题的建议，[为什么远程调试时没有加载符号？](https://stackoverflow.com/questions/151966/why-are-no-symbols-loaded-when-remote-debugging)，说要创建一个包含调试文件的文件夹，并在远程服务器上将环境变量 _NT_SYMBOL_PATH 指向它。

# logging - Ubuntu 终端中的音频反馈

> ID：10542883
> 
> 赞同：2
> 
> 时间：2012-05-10T22:10:02.933
> 
> 标签：logging, ubuntu, terminal, tail, beep

我想找到一种方法让我的终端在新输入传送到终端时提供音频反馈。

这是场景。在我的办公桌上，我设置了一台监控机器，上面有各种 Munin 和 NewRelic 仪表板。我还在终端中跟踪了一些日志，其中一些带有特定的 grep。我想找到一种方法让终端在更新这些尾部日志之一时播放声音。

例如：

```
tail -f /var/log/myservice.log | grep "CRITICAL" | beep 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:26:26.630

大多数终端（可以配置）在`^G`显示字符时发出哔声；那是ASCII`BEL`字符。

您可以使用命令或类似的东西生成`BEL`角色。`echo -e '\a'`稍微改变一下你的脚本，你应该可以很容易地做到这一点：

```
tail -f /var/log/myservice.log | sed 's/CRITICAL/CRITICAL\a/' 
```

大多数终端也会*在*相关窗口上设置紧急标志，这样即使在另一个桌面上也可以轻松发现需要注意的特定终端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T22:25:36.163

在`konsole`您可以告诉它监视终端的活动，并且您可以配置要使用的通知（声音、弹出窗口、运行命令...）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T22:29:12.380

这是每次某些文件更改时播放声音的方法：

`while true; do inotifywait /var/log/myservice.log && mplayer /usr/share/sounds/ubuntu/stereo/bell.ogg; done`

按 Ctrl+C 中断。您需要安装包`inotify-tools`和`mplayer`（可以替换为任何其他控制台播放器）。

如果您仍想查看尾部输出，请在另一个选项卡中运行 tail。

# search - CouchBase 范围搜索

> ID：10542885
> 
> 赞同：5
> 
> 时间：2012-05-10T22:10:23.097
> 
> 标签：search, nosql, couchbase

我正在考虑将 CouchBase 用于读取繁重和写入繁重的应用程序。我还需要支持基于文档的不同属性的搜索以及范围查询。

CouchBase 具有允许搜索超出键值搜索的视图，但似乎这主要是为了获取特定范围内的文档，例如。获取在两个指定键之间索引的所有文档，而不是“给我所有具有 'adventure' 的流派属性的文档”或“给我所有创建日期在 1/1/1 和 2/1/1 之间的文档”

有没有办法在没有外部索引的情况下实现我想要的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:31:43.290

你绝对可以做你在那里描述的事情。您可以在 Couchbase Server 2.0 中同时使用视图。

例如，当需要搜索日期范围时，一种常用技术是从视图中的地图函数发出 JSON 数组。这会给你类似的东西：[2012, 5, 11, 16, 27, 41]

因为当您查询视图时，JSON 数组是开始键和结束键的有效位置，您可以指定该范围。

同样，使用 doc _id 从 map 函数中提取您要发出的所有属性。然后使用[Couchbase SDK](http://www.couchbase.com/develop)之一，您可以在查询时设置包含文档选项，并且将自动获取文档。

# asp.net - 我的 ASP.NET 网站发生了什么，导致 MasterPage 控件的代码中出现 NullReferenceException？

> ID：10542886
> 
> 赞同：1
> 
> 时间：2012-05-10T22:10:38.853
> 
> 标签：asp.net, master-pages, nullreferenceexception, pageload, app-offline.htm

我有一个最奇怪的问题！我有一个 ASP.NET 网站应用程序（幸运的是还没有上线）。昨天和之前的每一天，我都可以毫无错误地运行该应用程序。当我昨晚深夜关闭计算机时，它工作正常。今天运行应用程序时，收到一条奇怪的消息，告诉我我的网站已离线，我应该`app_offline.htm`从根目录中删除该页面以使其重新上线。

我以前从未见过此消息或页面，因此我在网上搜索发现显然 SQL Server 可以在忙于停止任何传入请求（或类似的东西）时将其暂时放在那里。它的正确用途是在您更新或进行维护时停止请求访问您的站点。我按照建议继续删除它。我清理并构建了解决方案，然后尝试运行它。它不再运行。

现在，我的`MasterPage`代码后面出现错误，我通常`MasterPage`在`Page_Load`事件处理程序中访问控件（如下所示）。

```
protected void Page_Load(object sender, EventArgs e)
{
    breadCrumb.BreadCrumbs = BreadCrumbs;
    header.MenuItems = MenuItems;
    footer.Footers = Footers;
    head.Controls.Add(CreateCssLink("~/Stylesheets/main.css", "screen"));
    head.Controls.Add(CreateJavaScriptLink("~/Scripts/site.js"));
    if (Context.Session != null && Session["layout"] == null) Session["layout"] = "single";
    if (!ArePreferencesVisible) preferences.Visible = false;
} 
```

我想在这里澄清一下……这段代码没有错误。中有正确命名的元素`MasterPage`与此代码中的元素相对应。直到今天它一直按预期工作，自上次工作以来我没有更改任何代码。我现在`NullReferenceException`在第一行得到一个，因为`breadCrumb`元素是`null`. 实际上，此处引用的页面中的所有元素都是`null`.

`Page_Load`通常，页面元素在引发事件时已经初始化。是什么导致这种情况停止发生？

我已经仔细检查了 MasterPage 及其文件后面的代码是否仍然连接并且它们是。我还尝试将此代码移至`Page_LoadComplete`事件处理程序，但控件仍未初始化，即使在那个阶段也是如此。我真的不必更改代码，因为它以前工作得很好。

我还注释掉了这段代码，网站运行了，尽管没有任何样式。有趣的是，当我将原始代码返回给事件处理程序并刷新页面时，它实际上又像以前一样工作了。我成功加载了许多不同的页面，我认为它已经修复了，所以我重新启动了应用程序，然后又遇到了同样的错误。再多的清理、构建、更改解决方案配置或重新启动应用程序和 Visual Studio 都不会产生任何影响。

我不确定这是否`app_offline.htm`是一条红鲱鱼，但我以前从未见过它，所以它可能以某种方式连接。从我读到的，似乎只是删除它会导致服务器自动重新启动应用程序域，所以我看不到连接。

我真的希望有人以前遇到过这种奇怪的情况，因为我完全没有想法，在解决这个问题之前我无法运行我的网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T22:17:38.857

好的，所以我终于找到了问题所在。几天前我有一个网站的较早备份，所以我加载了它并且它工作了，尽管错过了最后几天的工作。我将最新的项目代码复制到 Visual Studio > Projects 文件夹中，将旧代码留在 Visual Studio > Website 文件夹中。我加载了解决方案，它再次运行良好。

我基本上比较了网站文件，依次更新每个文件并定期运行应用程序。最终，应用程序停止工作。我更新的最后一个文件是一个`MasterPage`扩展`MasterPage`有问题的文件。

我所做的是`Page_Load`在`MasterPage`. 我不明白为什么会导致这个问题，所以任何解释这一点的评论都会有所帮助和赞赏。

这`MasterPage`仅在主页和其他一些页面上使用，所以这解释了为什么我在更改它的那天晚上没有遇到问题。`MasterPage`（进行更改后，我没有查看任何使用该功能的页面）。我希望我有，因为那时追踪起来会容易得多，但生活就是这样。

所以我替换了我所有的最新代码，再次添加了空`Page_Load`事件处理程序，`MasterPage`最后，一切都恢复了。

# jquery - Jquery UI 自动完成 - 选择值

> ID：10542887
> 
> 赞同：1
> 
> 时间：2012-05-10T22:10:41.467
> 
> 标签：jquery, jquery-ui

我有一些创建自动完成表单的 PHP 和 JQuery：

```
<?
mysql_select_db($database_database_connection, $database_connection);
$query = "SELECT * FROM Device_tbl";
$result=mysql_query($query, $database_connection) or die(mysql_error());
$findrow = array();
while($row = mysql_fetch_assoc($result)){
    $manufac = $row['Manufacturer'];
    $mod = $row['Model'];
    $string = $manufac.' '.$mod;
    $findrow[] = $string;
}

?>

<script type="text/javascript">
$(document).ready(function() {
  $("#search_input").watermark("Begin Typing to Search");

  var availableTags = <? echo json_encode($findrow);?>;
  $( "#search_input" ).autocomplete({
            source: availableTags
            });

    $("#search_input").bind("autocompleteselect", function() {
        var search_input = $(this).val();
        if (search_input =='') search_input ='*';
        var dataString = 'keyword='+search_input;

        if (search_input.length > 2 || search_input=='*') {
           $.ajax({
                type: "GET",
                url: "core/functions/searchdata.php",
                data: dataString,
                success: function(server_response) {
                    $('#searchresultdata').empty();
                    $('#searchresultdata').append(server_response);
                    $('span#category_title').html(search_input);
                }
            });
        }

        return false;
    });
    $("#search_input").trigger('keyup');
});
</script> 
```

**搜索数据.php**

```
mysql_select_db($database_database_connection, $database_connection);
$query = "SELECT Image, Manufacturer, Model FROM Device_tbl WHERE Manufacturer LIKE '%$keyword%' OR Model LIKE '%$keyword%'";
if ($keyword=='*') $query = "SELECT Image, Manufacturer, Model FROM Device_tbl";
$result=mysql_query($query, $database_connection) or die(mysql_error());

if($result){
    if(mysql_affected_rows($database_connection)!=0){
          while($row = mysql_fetch_object($result)){
?>
     <div class="hold-cont">
        <div class="holder">
            <div class="image-hold" >
                <img class="image-icon" src="<? echo $deviceimg.($row->Image); ?>"/>
</div>
        </div>
        <div class="device-name devicename-txt"><? echo($row->Manufacturer. ' ' .$row->Model);  ?></div>
    </div>
     <?
    }
    }else {
        echo 'No Results for :"'.$_GET['keyword'].'"';
    }

}
else {
    echo 'Parameter Missing'; 
```

自动完成部分工作正常，但是我无法工作的是在所选值上运行 .ajax。例如，如果我开始输入“Apple iMac”并且只输入“Ap”。建议将是 Apple iMac，但是当我单击建议时，它会在“Ap”上运行查询 - 即，它只运行关于输入内容的查询，而不是点击的内容。

当用户单击建议或点击输入时，我有什么想法可以使这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:24:49.823

```
$( "#search_input" ).autocomplete({
    source: availableTags,
    select: function(event, ui) {
        sendSelected(ui.item.value);
        }
    });

function sendSelected(_val){
    var search_input = _val;
    if (search_input =='') search_input ='*';
    var dataString = 'keyword='+search_input;

    if (search_input.length > 2 || search_input=='*') {
       $.ajax({
            type: "GET",
            url: "core/functions/searchdata.php",
            data: dataString,
            success: function(server_response) {
                $('#searchresultdata').empty();
                $('#searchresultdata').append(server_response);
                $('span#category_title').html(search_input);
            }
        });
    }
} 
```

搜索数据.php：

```
$splitKeyword = explode(" ", $keyword);
if(sizeof($splitKeyword)==3){
    $splitKeyword[1] = $splitKeyword[1]." ".$splitKeyword[2];
 }
$query = "SELECT Image, Manufacturer, Model FROM Device_tbl WHERE Manufacturer LIKE '%".$splitKeyword[0]."%' OR Model LIKE '%".$splitKeyword[1]."%'"; 
```

# php - 如何按照 php 脚本创建用户？

> ID：10542901
> 
> 赞同：0
> 
> 时间：2012-05-10T22:12:31.967
> 
> 标签：php

我想要做的是在我的脚本中添加一个用户关注系统（类似推特）。

这是 db 结构的样子：

```
CREATE TABLE IF NOT EXISTS `user_follow` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `follower` int(11) NOT NULL,
  `following` int(11) NOT NULL,
  `subscribed` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `follow_unique` (`follower`,`following`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 ; 
```

如果我想创建我应该使用这个代码：

```
mysql_query(" INSERT INTO `user_follow` (`follower`, `following`, `subscribed`) VALUES ('$follower', '$following', CURRENT_TIMESTAMP); "); 
```

对于取消订阅，它应该如下所示：

```
mysql_query(" DELETE FROM `user_follow` WHERE `follower` = '$follower' AND `following` = '$following'; "); 
```

.

```
$follower = $_SESSION[user_id]; // the user_id for the one who is currently logged id 
$following = $user_id; // the user_id for the user profile where the script will be on 
```

在个人资料页面上，我有一个这样的表格：

```
<?php if (isset($_SESSION[user_id]) && $_SESSION[user_id] != $user_id) { ?>
<form action="" method="post">
<input name="action" type="hidden" value="<?php echo $subscribe_status; ?>"/>
<button name="subject" type="submit" value="<?php echo $subscribe_text.' '.$username; ?>"><?php echo $subscribe_text.' '.$username; ?></button>
</form>
<?php } ?> 
```

我不知道如何链接所有这些代码......

编辑：

`$subscribe_status`应该更改为`follow`或`unfollow`取决于用户是否已经关注该用户（通过我认为的查询进行检查）。

也`$subscribe_text`应该是`Follow`或`Unfollow`取决于当前登录的用户 ( `$follower`) 是否已经在关注该用户。

有人可以帮我吗？

编辑 2（基于 Mihir Singh 的回答）

```
$user_follow = dbquery(" SELECT * FROM `user_follow` WHERE `follower` = '$follower' AND `following` = '$following'; ");
$check_status = dbrows($user_follow);

$sub = false; //Boolean var which states if subscribed or not

if ( $check_status !== 0 ){ //Pseudo code
    $sub = true; //If row is found, they are subscribed, so set $sub to true
}

if($sub){
     $subscribe_status = "follow";
     $subscribe_text = "Follow";
}

else{
     $subscribe_status = "unfollow";
     $subscribe_text = "Unfollow";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:26:08.193

这是一些代码：

```
$sub = false; //Boolean var which states if subscribed or not

if (row in table exists --> subscribed ){ //Pseudo code
    $sub = true; //If row is found, they are subscribed, so set $sub to true

if($sub){
     $subscribe_status = "Follow";
     $subscribe_text = "Unfollow";
}

else{
     $subscribe_status = "Unfollow";
     $subscribe_text = "Follow";
} 
```

编辑：

因此，这是您正在使用的表单代码：

```
<?php if (isset($_SESSION[user_id]) && $_SESSION[user_id] != $user_id) { ?>
<form action="" method="post">
<input name="action" type="hidden" value="<?php echo $subscribe_status; ?>"/>
<button name="subject" type="submit" value="<?php echo $subscribe_text.' '.$username; ?>">       
<?php echo $subscribe_text.' '.$username; ?></button>
</form>
<?php } ?> 
```

基于此，我会改变

```
<form action="" method="post"> 
```

到

```
<form action="handler.php" method="post"> 
```

然后用这个创建一个处理程序文件：

```
<?
    if ($_POST['action'] == "Follow")
        //Perform Unfollow Query to Database
    else
        //Perform Follow Query to Database
?> 
```

那是准系统....但应该可以解决。怎么样？

# c# - 可重用控制

> ID：10542904
> 
> 赞同：-3
> 
> 时间：2012-05-10T22:12:45.007
> 
> 标签：c#, asp.net, user-controls, parameter-passing

我一直想创建一个用户控件，但在我这样做之前，我需要知道如何做一些事情，或者即使它可能。我知道可以将方法传递给函数（[Link](https://stackoverflow.com/questions/2082615/pass-method-as-parameter-using-c-sharp)）。是否可以设置函数类型的变量？例如，我有一个用户控件，我需要在一个函数中调用 GetData 函数。每个 GetData 例程都不同，所以我想知道是否可以从 aspx.cs 页面传递该函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:21:09.447

.NET Framework 库定义了方便的泛型委托（或称为“函数类型”）。有返回值的函数委托

```
Func<Ret>
Func<Arg, Ret>
Func<Arg1, Arg2, Ret>
... 
```

没有返回值的函数委托

```
Action<>
Action<Arg>
Action<Arg1, Arg2>
... 
```

您可以定义一个接受这样的委托的方法

```
void DrawFunction(Func<double, double> function, double x0, double x1)
{
    const double step = 0.1;

    for (x = x0; x <= x1; x += step) {
        double y = function(x);
        DrawPointAt(x, y);
    }
} 
```

* * *

您可以通过向其传递适当的方法或使用 lambda 表达式来调用它。

使用此声明

```
public double Square(double x)
{
    return x*x;
} 
```

您可以进行调用（请注意，括号 () 后面缺少，`Square`因为我们不想在这里调用此方法）

```
DrawFunction(Square, 0.0, 10.0); 
```

使用 lambda 表达式得到相同的结果

```
DrawFunction(x => x*x, 0.0, 10.0); 
```

# sql - 如何创建用于从两个表报告的 sql 过程

> ID：10542914
> 
> 赞同：0
> 
> 时间：2012-05-10T22:13:22.240
> 
> 标签：sql, sql-server, visual-studio, crystal-reports

我有两张表，分别是装运和付款表，其中包含以下列

运输

```
1.Executivename
2.shipername
3.shiperaddress
4.acountno
5.invoiceno 
6.shipdate  
etc. 
```

支付

1.InvoiceNo
2.accountno
3.Date
4.Discount
5.ReceivedAmount 6.MoneyReceiptNo

现在我想用“付款”表的字段按执行名称生成报告。我尝试通过以下存储过程来做到这一点-

```
CREATE PROCEDURE [dbo].[rptexecutivepayment] @executivename varchar(20) AS 
BEGIN 
    select Executivename,[shipment].accountno,[date],discount,receivedamount,moneyreceiptno
    from shipment 
    full join payment on shipment.accountno=payment.accountno and shipment.invoiceno=payment.invoiceno 
    where Executivename=@executivename order by Executivename 
END
GO 
```

但是，报告 r 生成数据重复。我现在能做什么？请有人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:53:01.557

糟糕的架构...

** 发货表必须有
发货
无发票无其他发货
详情。

**发票表必须有
InvoiceNo
AccountNo otherInvoiceDetails
..

**AccountMaster 表必须有
AccountNo
AccountDetails...

这是一个规范化的模式，不会妨碍你做报告。

# netbeans - 更改 LWUIT 中的启动表单

> ID：10542916
> 
> 赞同：0
> 
> 时间：2012-05-10T22:13:33.843
> 
> 标签：netbeans, java-me, lwuit

当您第一次从 LWUIT (1.5) 生成 netbeans 项目时，您可以设置一个启动表单，但在开发的后期，当您决定需要将其更改为另一个时该怎么办。如何在 LWUIT 资源编辑器中或通过 netbeans 中的代码更改启动表单？我想知道重新生成应用程序，但我现在太害怕覆盖和应用程序损坏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T07:19:01.560

您需要编辑项目根目录中的属性文件以指向新的表单名称。

# python - 通过python程序从FASTA文件中按顺序排序

> ID：10542918
> 
> 赞同：2
> 
> 时间：2012-05-10T22:13:40.327
> 
> 标签：python

我试图创建一个读取fasta文件“seqs.fa”的python程序，并让程序按名称对序列进行排序。

Fasta 文件如下所示：

```
>seqA - human
GCTGACGTGGTGAAGTCAC
>seqC - gorilla
GATGACAA
GATGAAGTCAG
>seqB - chimp
GATGACATGGTGAAGTAAC 
```

我的程序如下所示：

```
import sys

inFile = open(sys.argv[1], 'r')
a = inFile.readlines()
a.sort()
seq = ''.join(a[0:])
seq = seq.replace('\n', "\n")
print seq 
```

预期结果：

```
>seqA - human
GCTGACGTGGTGAAGTCAC
>seqB - chimp
GATGACATGGTGAAGTAAC
>seqC - gorilla
GATGACAAGATGAAGTCAG 
```

我的结果：

```
>seqA - human
>seqB - chimp
>seqC - gorilla
GATGACAA
GATGAAGTCAG
GATGACATGGTGAAGTAAC
GCTGACGTGGTGAAGTCAC 
```

最后四行是大猩猩、黑猩猩和人类序列，大猩猩序列分为前两行。

谁能给我一些关于如何排序或解决问题的方法的提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T02:36:09.413

不要自己实现 FASTA 阅读器！像大多数情况一样，有一些聪明的人已经为你做了这件事。改为使用例如[BioPython](http://biopython.org)。像这样：

```
from Bio import SeqIO
handle = open("seqs.fa", "rU")
l = SeqIO.parse(handle, "fasta")
sortedList = [f for f in sorted(l, key=lambda x : x.id)]
for s in sortedList:
   print s.description
   print str(s.seq) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T22:34:48.050

您的代码存在一些问题。主要是在`readlines()`您的描述和序列返回的列表中都是单独的行，因此当您对列表进行排序时，它们是相互分离的。此外，所有描述都在序列之前，因为它们`'>'`在开头。

二、`a[0:]`同理`a`。

第三，`seq.replace('\n', "\n")`什么都不做。单引号和双引号的意思是一样的。您用自己替换换行符。

读取 fasta 文件对于 Python 来说并不是一项非常复杂的任务，但我仍然希望能够原谅我提供使用我正在研究的包 - [pyteomics](https://pypi.python.org/pypi/pyteomics)。

这是我要使用的代码：

```
In [1]: from pyteomics import fasta

In [2]: with fasta.read('/tmp/seqs.fa') as f:
   ...:     fasta.write(sorted(f))
   ...:     
>seqA - human
GCTGACGTGGTGAAGTCAC

>seqB - chimp
GATGACATGGTGAAGTAAC

>seqC - gorilla
GATGACAAGATGAAGTCAG 
```

要将其保存到新文件，请将其名称[`fasta.write`](https://pyteomics.readthedocs.io/en/latest/api/fasta.html#pyteomics.fasta.write)作为参数：

```
fasta.write(sorted(f), 'newfile.fa') 
```

通常，`pyteomics.fasta`是针对蛋白质序列，而不是 DNA，但它确实可以完成这项工作。也许您可以使用它返回元组中的描述和序列的事实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T22:38:20.467

```
file = open("seqs.fa")    
a = file.readlines()
i = 0
ar = []
while True:
    l1=file.readline()
    l2=file.readline()
    if not (l1 and l2):
        break;
    l = l1.strip('\n') + '////////' + l2
    ar.append(l)
ar = ar.sort()
for l in ar:
    l1 = l.split('////////')[0]+'\n'
    print l1
    l2 = l.split('////////')[1]
    print l2 
```

# c - 如何检查 C 中的联合是否尚未“初始化”？

> ID：10542925
> 
> 赞同：4
> 
> 时间：2012-05-10T22:14:42.010
> 
> 标签：c, null, unions

我可以检查c中的联合是否为空吗？例如：

```
union{ char * name, struct Something * something ... }someUnion; 
```

有没有办法检查是否没有元素被初始化，而不做元素虎钳检查？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T22:15:49.077

不，不是没有为此目的添加特定标志。例如：

```
struct someStruct {
    int initialized;
    union {
        char *name;
        struct Something *something;
    };
}; 
```

您甚至可以存储一个标志来代替`initialized`指示联合包含哪种数据的标志。这通常称为[标记联合](https://en.wikipedia.org/wiki/Tagged_union)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T22:35:55.293

是的，在联合的所有成员都是指针类型或整数类型的条件下，并且初始化意味着已分配了一个非 NULL 的值，检查*一个*元素是否为 NULL 就足够了。

```
union { 
    char * name;
    struct Something * something; } someUnion;

if (someUnion.name != 0) {
    // here you know that someUnion.something is not NULL too.
    // You don't know if it has been initialized as char*
    // or as struct something* though. Presumeably since
    // it is a unionboth interpretations make some sense. 
} 
```

# android - DialogFragment 方向更改崩溃与 getActivity()

> ID：10542926
> 
> 赞同：5
> 
> 时间：2012-05-10T22:14:48.640
> 
> 标签：android, orientation

我目前在使用 DialogFragments 时遇到一些问题。我正在使用最新的 v.4 支持包（我相信是修订版 8） 我的问题是，如果我的手机的方向在对话框打开时发生变化，则应用程序开始表现得很奇怪。

目前我的应用程序是这样工作的：有一个 FragmentActivity，它调用一个 Fragment。然后这个 Fragment 调用一个 DialogFragment（通过 getActivity().getSupportFragmentManager()。

如果在打开对话框时方向发生变化，则 Fragment 中的 getActivity() = null。如果我想完成活动等，这会导致问题。

为此，您打开对话框，更改方向并按下按钮。只有按下按钮后它才会崩溃

我的 DialogFragment 称为 AlertDialogFragment：

```
public class AlertDialogFragment extends DialogFragment {
private static Builder mBuilder;
private static DialogInterface.OnClickListener mListener;

public static AlertDialogFragment newInstance(Context context, DialogInterface.OnClickListener listener) {
    mBuilder = new AlertDialog.Builder(context);
    mListener = listener;       
    return new AlertDialogFragment();
}

//... some functions to set Icons etc

public void setButton(int whichButton, CharSequence buttonText) {
    final DialogInterface.OnClickListener listener = mListener == null ? null : mListener;      
    mBuilder.setPositiveButton(buttonText, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                listener.onClick(dialog, whichButton);
            }
    });
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    return mBuilder.create();
}
} 
```

这是片段：

```
public class TestBedFragment extends Fragment implements DialogInterface.OnClickListener   {
// onCreateView Stuff  

private void showCrashDialog() {
    FragmentTransaction ft = getActivity().getSupportFragmentManager().beginTransaction();
    AlertDialogFragment newDialog = AlertDialogFragment.newInstance(getActivity(), this);
    newDialog.setTitle("Test");     
    newDialog.setIcon(android.R.drawable.ic_dialog_alert);
    newDialog.setMessage("Testing testing testing... 1, 2, 3... Just press Ok.");
    newDialog.setButton(DialogInterface.BUTTON_POSITIVE, "Ok");
    newDialog.show(ft, "dialog");

    // Cause the problem. Simulate the user turning the screen
    getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
}

@Override
public void onClick(DialogInterface dialog, int which) {

    /*
     * hexnumber = a hex number
     * Normally equals: TestBedFragment{hexnumber #0 id=hexnumber}
     * With crash equals: TestBedFragment{hexnumber}
     */
    Log.e("TestBedFragment", "this = " + this);

    /*
     * hexnumber = a hex number
     * Normally equals: com.example.TestBed.TestBedActivity@hexnumber
     * With crash equals: null
     */
    Log.e("TestBedFragment", "getActivity() = " + getActivity()); // Will equal null... ???

    getActivity().finish();
}
} 
```

我不太确定这是什么原因造成的？对不起，如果这是一个愚蠢的问题。我在其他地方读过有关“Windows 泄漏”的信息，但我没有在 logcat 中看到任何提及这些内容的内容。

任何人都可以帮助我:) 非常感谢

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T00:25:36.093

您必须了解 Activity 生命周期。每次旋转设备时，都会重新创建活动。这意味着该类的新实例正在执行。

在您的代码中发生的情况是，在旋转之后，侦听器在前一个对话框实例上调用 getActivity，引用前一个活动。但是这个活动已经失效了，轮换之后就被“销毁”了，又出现了一个新的。

您调用 getActivity 不再有效。

您不能在片段 onDestroy 方法期间关闭打开的对话框吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:12:52.180

您可以在 onPause() 中关闭对话框并使用条件检查并在 onCreate() 中显示（）对话框。根据您的特定用例，这可能更适合 onStop() 或 onDestroy() 。

```
@Override
protected void onPause() {
    if (myDialog != null && myDialog.isVisible())
        myDialog .dismiss();
    super.onPause();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T22:27:35.527

您正在重新创建所有内容，而不是使用捆绑包。将一个添加`if`到您的 onCreateDialog 以检查空包。如果它为 null，则执行您的创建工作，否则什么也不做，Android 将从包中恢复所有内容。

我认为这将解决您的问题。

```
if(SavesIinstanceState == null); {
    // your code
} 
```

# c++ - 如何将文件读入数组然后对数据进行排序？

> ID：10542930
> 
> 赞同：3
> 
> 时间：2012-05-10T22:15:02.820
> 
> 标签：c++, arrays, sorting

到目前为止，我已经找到了几种将文本文件读入数组的方法，并且能够成功地将其显示在屏幕上。我有一个问题是我如何从那里对数组进行排序。对文本文件进行排序很简单，但是当我尝试将两者结合起来时，我无法让它工作。这是我到目前为止所得到的：

```
int main()
{
   string players[30];
   ifstream inData("chessplayers.txt");
   if (inData.is_open())
   {
     for (int i = 0; i < 30; i++)
     {
       sort( players, players+i);       
       if (getline(inData, players[i]))
       {        
         cout << players[i] << endl;
       }
       else
       {
         break;
       }
    }
    inData.close();
  }
  else
  {
    cerr << "Failed to open file.\n";
  }
  system("pause");    
  return 0;
} 
```

谁能帮我指出正确的方向？我的任务是能够将文本读入一个数组，然后对该数组进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:42:40.427

将不同的动作分成函数是个好主意。这使您的代码更清晰、更易于阅读且更模块化。

例如，在这个问题中，您要进行三件不同的事情：将数据读入文件、排序和打印。编写自己的函数来读取数据并打印。你知道已经有一个函数可以排序，所以使用它。

这是一个示例（使用一点 C++11），它使用了您可能不被“允许”使用的技术，但它为您提供了一个很好的起点来了解您需要在自己的代码中修改什么。

请注意，在 main 中，代码是自记录的：它表示从文件中读取播放器，对它们进行排序，然后打印它们。

```
#include <algorithm>
#include <deque>
#include <fstream>
#include <iostream>
#include <string>

typedef std::deque<std::string> PlayerContainer;

PlayerContainer getPlayersFromFile(std::string filename)
{
  PlayerContainer players;

  std::ifstream ifs(filename.c_str());

  std::string player;
  while (getline(ifs, player))
    players.push_back(player);

  return players;
}

void printPlayers(PlayerContainer const& players)
{
  // (this is the only part that depends on C++11)
  // for each player in players
  for (auto const& player : players)
    std::cout << player << '\n';
}

int main()
{

  std::string filename("chessplayers.txt");

  PlayerContainer players = getPlayersFromFile(filename);

  sort(players.begin(), players.end());

  printPlayers(players);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T22:39:31.610

读取数据时不要排序。将排序功能放在阅读之外：

排序（玩家，玩家+30）；

如果您想知道重载 dont，请导致 std::string 提供它自己的重载 <、>、= 等。

# python - 用python分割路径

> ID：10542935
> 
> 赞同：0
> 
> 时间：2012-05-10T22:15:21.137
> 
> 标签：python, split, urlparse

我试图在最后一个小数点后切断所有内容并将“html”添加到末尾

html

```
<a href="http://www.youversion.com/bible/gen.1.ceb">http://www.youversion.com/bible/gen.1.ceb</a> 
```

当前代码返回“gen.1.ceb”

```
name = urlparse.urlparse(url).path.split('/')[-1] 
```

我想让名字得到“gen.1.html”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:17:07.463

你可以这样做：

```
filename = urlparse.urlparse(url).path.split('/')[-1]  # get file name
name = filename.rsplit('.', 1)[0] + '.html'  # change the extension 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T22:23:41.600

```
import re
re.sub(r'\.[A-Za-z]+$','.html',url) 
```

# nlp - 什么是 Oracle 实验？

> ID：10542937
> 
> 赞同：8
> 
> 时间：2012-05-10T22:15:26.037
> 
> 标签：nlp, machine-learning

我读过一篇关于机器学习的论文，其中包含一个 Oracle 实验来比较他的研究和另一项研究？但似乎不太清楚什么是 Oracle 实验？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-10T22:17:36.090

“神谕”是一个总能给出正确答案的虚构实体。oracle 实验用于将您的实际系统与系统的某些组件始终执行正确操作时的行为进行比较。

例如，在 NLP 领域，假设您构建了一个解析器，它将词性 (POS) 标记的句子作为输入。在现实世界中，您必须通过实际的词性标注器运行真实的句子。这个标注器可能会产生精度高于 90% 但低于 100% 的结果。由于您的解析器的准确性取决于传入标签的准确性，因此您的解析器的性能将受到这种损失的负面影响。

*如果 POS 标记器是完美的*，为了查看解析器的性能如何，您可以使用 oracle 标记器运行实验。在这个实验中，您将用一个知道句子的实际 POS 标签的程序替换真正的 POS 标签器，因此总是以 100% 的准确率返回标签结果。

因此，如果您的解析器在使用真实标注器的实验中获得 85% 的准确率，而在使用 oracle 标注器的实验中获得 90% 的准确率，那么您知道 5% 的性能损失直接归因于标注器的错误。

# asp.net-mvc-3 - 使用 LINQ to Entities 连接 2 个表

> ID：10542942
> 
> 赞同：0
> 
> 时间：2012-05-10T22:15:55.943
> 
> 标签：asp.net-mvc-3, linq, entity-framework, razor

我有两张表，分别用于用户和歌曲。我需要在 UserID 列上加入它们并将列表返回到视图。我尝试编写匿名类型，但出现以下错误：

“LINQ to Entities 中仅支持无参数构造函数和初始化程序。”

如何加入并返回列表？

```
 public class User
    {
        [Key]
        public virtual Guid UserId { get; set; }

        [Required]
        public virtual String Username { get; set; }

        [Required]
        public virtual String Email { get; set; }

        [Required, DataType(DataType.Password)]
        public virtual String Password { get; set; }

}

 public class Song
    {
        public int SongId { get; set; }

        public virtual Guid UserId { get; set; }

        public string SongTitle { get; set; }

    } 
```

我尝试在这里实现这样的方法：

[我的 linq 查询的返回类型是什么？](https://stackoverflow.com/questions/5013472/what-is-the-return-type-of-my-linq-query)

我最终得到的查询是：

```
var query = from u in db.Users
                        join s in db.Songs
                        on u.UserId equals s.UserId
                        select new HomeSongList(s.SongId, s.UserId, u.Username);

            return View(query.ToList()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:27:26.577

那么错误信息很清楚，不是吗？

您尝试在 linq2entity 查询中创建一个新的 HomeSongList（这将在 sql 中翻译：不可能）

通过“用户属性”更正，您应该

```
var query = db.Songs.Select(s => new{
                       songId = s.SongId, 
                       userId = s.User.UserId, 
                       userName = s.User.Username})
                     .ToList()
                     .Select(x => new HomeSongList(x.songId, x.userId, x.userName); 
```

或使用您的实际代码

```
var query = (from u in db.Users
                        join s in db.Songs
                        on u.UserId equals s.UserId
                        select new {
                          songId = s.SongId, 
                          userId = s.UserId, 
                          userName = u.Username
                         })//new anonymous object is possible in linq2entities
                        .ToList()
                        .Select(x => new HomeSongList(x.songId, x.userId, x.userName); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T23:16:15.837

您不能使用参数化构造函数，但可以使用初始化程序，如果您将选择更改为以下内容，它应该可以工作。

```
select new HomeSongList{SongId=s.SongId, UserId=s.UserId, Username=u.Username}; 
```

请注意，这将需要`HomeSongList`具有无参数构造函数和可写属性。

# uml - Doxygen：没有协作图的类图（灰色框）

> ID：10542944
> 
> 赞同：0
> 
> 时间：2012-05-10T22:16:00.950
> 
> 标签：uml, doxygen

我想为没有协作数据的类图（UML 样式）创建图像。

我已经有了 Doxywizard，但是没有协作关系，我不知道该怎么做。我应该使用什么选项组合？

这是我想要的 ASCII 表示：

```
----------
| Foo    |
----------
| -bar1  |
| -bar2  |
----------
| +Foo() |
| +~Foo()|
---------- 
```

这是我目前得到的：

```
----------        -----------------
| Foo    |        | OtherClass    |
----------        -----------------
| -bar1  |        | -test1        |
| -bar2  |        | -test2        | 
---------- -----> -----------------
| +Foo() |        | +OtherClass() |        
| +~Foo()|        | +~OtherClass()|
----------        ----------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:49:26.760

您是否尝试将 COLLABORATION_GRAPH 设置为 NO？

> COLLABORATION_GRAPH 如果 COLLABORATION_GRAPH 和 HAVE_DOT 标签设置为 YES，那么 doxygen 将为每个文档类生成一个图表，显示该类与其他文档类的直接和间接实现依赖关系（继承、包含和类引用变量）。

# vb.net - 2 个组合框和二维数组

> ID：10542946
> 
> 赞同：0
> 
> 时间：2012-05-10T22:16:21.770
> 
> 标签：vb.net, arrays, combobox

我一直在做一个 VB 项目，我使用**第一个**下拉列表选择电影类别，然后在**第二个**下拉菜单中，将显示该类别的电影。电影按类别存储在二维数组中。

在人们的帮助下，我已经能够编辑我的数组，但是我的 .AddRange() 函数出现了问题。在选择类别时，我将在列表中放入那些括号（对于每个类别）出现在我的**第二**组合框中的括号？

我试过：

*   .AddRange (movie_list_combobox)
*   .AddRange (movie_category_combobox)
*   .AddRange (Array(movie_list_combobox))
*   .AddRange (Array(movie_category_combobox))

没有任何效果。

更改的项目：

1.  更新数组
2.  我没有使用 if/else 语句，而是使用 for/next（也不再使用 Select Case）
3.  添加了 addRange()

我在下面附上了我的代码：

```
Public Class Video_Form

Private Sub count_textbox_TextChanged(ByVal sender As Object, ByVal e As EventArgs) Handles count_textbox.TextChanged

End Sub

Private Sub Count_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Count.Click

  count_textbox.Text = Me.movie_list_combobox.Items.Count

End Sub

Private Sub movie_categories_combobox_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Handles movie_categories_combobox.SelectedIndexChanged

End Sub

Private Sub movie_list_combobox_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles movie_list_combobox.SelectedIndexChanged

  Dim Movies(,) As String = {{"Meet", "Oxford", "Sterilite"}, {"Sunflower", "Seeds", ""}, {"Black Box", "", ""}, {"Dancing ", "", ""}, {"Dictionary", "", ""}, {"Glue", "Flight", ""}}

  Dim row As Integer
  Dim column As Integer

  For movie_categories_combobox.SelectedIndex = 0 Then
    row = 0 To 2
    column = 0 To 0
    movie_list_combobox.Items.Clear()
    movie_list_combobox.Items.AddRange()
  Next

  For movie_categories_combobox.SelectedIndex = 1 Then
    row = 0 To 1
    column = 1 To 1
    movie_list_combobox.Items.Clear()
    movie_list_combobox.Items.AddRange()
  Next

  For movie_categories_combobox.SelectedIndex = 2 Then
    row = 0 To 0
    column = 2 To 2
    movie_list_combobox.Items.Clear()
    movie_list_combobox.Items.AddRange()
  Next

  For movie_categories_combobox.SelectedIndex = 3 Then
    row = 0 To 0
    column = 3 To 3
    movie_list_combobox.Items.Clear()
    movie_list_combobox.Items.AddRange()
  Next

  For movie_categories_combobox.SelectedIndex = 4 Then
    row = 0 To 0
    column = 4 To 4
    movie_list_combobox.Items.Clear()
    movie_list_combobox.Items.AddRange()
  Next

  For movie_categories_combobox.SelectedIndex = 5 Then
    row = 0 To 1
    column = 5 To 5
    movie_list_combobox.Items.Clear()
    movie_list_combobox.Items.AddRange()
  Next

  '//End If
  '//End Select

End Sub 
```

请让我知道我的代码的哪些部分是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:39:14.213

在我看来，你的问题不是很清楚......顺便说一句，也许我可以告诉你如果我在你身边我会做什么来帮助你。我将以这种方式声明一个二维数组....例如。有趣的电影在索引 0 和 kolossal 在索引 1....

```
 Dim array as new string(1,2) ={{"Scary movie", "Ace ventura", "American pie"},   {"Titanic", "avatar", "quo vadis"}} 
```

然后，填充电影类别组合框：

```
 movie_category_combobox.items.addRange(new string(){"Funny movies", "Kolossal"}) 
```

最后，当movie_category_combobox.SelectedIndexChanged 抛出时，您只需要：

```
 'clear the movie combobox
 movie_list_combobox.items.clear() 

 'fill the movie combobox with the index at the selected position 
 movie_list.combobox.items.addrange(array(movie_category_combobox.selectedIndex) ) 
```

希望能帮助到你....

# c# - 从 ASP.NET C# 中的 URL 中提取子目录名称

> ID：10542947
> 
> 赞同：5
> 
> 时间：2012-05-10T22:16:22.287
> 
> 标签：c#, asp.net, string, url, path

我希望能够提取 URL 的子目录的名称，并将其保存到 ASP.NET C# 中服务器端的字符串中。例如，假设我有一个如下所示的 URL：

```
http://www.example.com/directory1/directory2/default.aspx 
```

如何从 URL 中获取值“directory2”？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T22:22:19.933

Uri 类有一个名为[segments](http://msdn.microsoft.com/en-us/library/system.uri.segments)的属性：

```
var uri = new Uri("http://www.example.com/directory1/directory2/default.aspx");
Request.Url.Segments[2]; //Index of directory2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:47:12.960

这是一个分拣机代码：

```
string url = (new Uri(Request.Url,".")).OriginalString 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T22:22:30.380

我会使用 .LastIndexOf("/") 并从那里向后工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T22:36:16.597

您可以使用 System.Uri 提取路径段。例如：

```
public partial class WebForm1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        var uri = new System.Uri("http://www.example.com/directory1/directory2/default.aspx");
    }
} 
```

那么属性“uri.Segments”是一个字符串数组（string[]），它包含如下4个段：[“/”、“directory1/”、“directory2/”、“default.aspx”]。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T22:18:54.237

您可以使用类的`split`方法`string`将其拆分`/`

如果您想选择页面目录，请尝试此操作

```
string words = "http://www.example.com/directory1/directory2/default.aspx";
string[] split = words.Split(new Char[] { '/'});
string myDir=split[split.Length-2]; // Result will be directory2 
```

这是来自 MSDN 的示例。如何使用`split`方法。

```
using System;
public class SplitTest
{
  public static void Main() 
  {
     string words = "This is a list of words, with: a bit of punctuation" +
                           "\tand a tab character.";
     string [] split = words.Split(new Char [] {' ', ',', '.', ':', '\t' });
     foreach (string s in split) 
     {
        if (s.Trim() != "")
            Console.WriteLine(s);
     }
   }
 }
// The example displays the following output to the console:
//       This
//       is
//       a
//       list
//       of
//       words
//       with
//       a
//       bit
//       of
//       punctuation
//       and
//       a
//       tab
//       character 
```

# django - 多台计算机上的 Django-celery

> ID：10542950
> 
> 赞同：1
> 
> 时间：2012-05-10T22:17:09.623
> 
> 标签：django, celery, django-celery

`django-celery`在我的开发机器上工作时，我得到了我想做的一切。更具体地说，该应用程序接受照片网址，然后将其转换为同一台机器下载的任务。

现在我想做的是把 django 代码放在 heroku 上，把 celery`tasks`放在一台专用的电脑上，这台电脑会放在办公室里。

我不知道下一步是什么。如何告诉 django 应用程序连接到办公室计算机？设置办公室计算机以接受来自 django 应用程序的任务的过程是什么？如何将本地计算机登录凭据提供给 django 应用程序，以便它可以连接到数据库以更新模型？

理想情况下，我希望在我的 setting.py 文件中添加这样的内容：

```
remote_worker = '123.2.4.23:1234' 
```

在办公室电脑上

```
tasks = 'photos/tasks.py'
remote_app = 'herokuapp123.com/myapp'
username = 'me'
password = 'pw' 
```

我知道有很多问题。任何帮助或指示将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:49:59.413

这在很大程度上取决于您用于 celery 的 AMQP 后端。如果您使用的是默认 (RabbitMQ)，则需要执行以下操作之一：

1.  在 Heroku 服务器上安装 RabbitMQ，通过防火墙将其端口暴露给您的业务 IP，并配置您的办公室计算机以连接到它
2.  在您的业务计算机上本地安装 RabbitMQ 并在 Heroku 上配置 celery 以连接到它
3.  在两侧安装 RabbitMQ 并桥接它们。

或者，您可以使用 VPN 解决方案将 heroku 服务器集成到您自己的业务网络中，并让它们直接相互通信（因为毕竟您可能不想通过 interwebz 传输 AMQP 数据包）。

场景 1 可能是最容易设置的，因为 Heroku 已经为您提供了这样做的插件基础设施。场景 2 可能不是您想要的，因为您必须为此在业务防火墙上打一个洞。场景 1 和 2 都将存在延迟和可靠性问题，因为通过 Internet 路由 AMQP 流量将不方便或不可靠。您将丢弃消息，并且 celery 将继续重试，直到它成功或达到最大失败次数。但是，AMQP 旨在处理网络问题，如果这很关键，它们可能会无意中影响您的性能。但是在这种情况下，您应该重新考虑将芹菜工人放在商务桌面上。

方案 C 在可靠性方面可能是最好的，但也更难设置。根据您的需要进行选择。

# ravendb - 更新数组中的对象通常会导致 RavenDB 失败

> ID：10542951
> 
> 赞同：0
> 
> 时间：2012-05-10T22:17:11.460
> 
> 标签：ravendb

遍历结果集和更新通常无法持久化更新

```
if (actionObject.ActionType==ActionType.TradeComplete)
        {
            var results = _session.Query<Model.ActionObject>().Where(x => x.ActionType == ActionType.TradeRequest && x.ActionObjectId==actionObject.ActionObjectId);
            foreach (var result in results)
            {
                result.State = State.Closed;
            }
        }

        _session.Store(actionObject);
        _session.SaveChanges(); 
```

通常，对象没有将其状态设置为 state.closed..

我看到有关补丁命令的讨论，但是几乎没有文档说明如何使用具有多个参数的查询来做到这一点。

知道为什么它不持久吗？

编辑：我的对象没有 ID，这可能是问题吗？似乎 Raven 应该跟踪这些物体，而且经常是……

# jquery - CGridView - 将自定义功能添加到删除行按钮

> ID：10542952
> 
> 赞同：2
> 
> 时间：2012-05-10T22:17:27.657
> 
> 标签：jquery, yii, cgridview

默认情况下，删除按钮将自己分配给此功能：

```
jQuery('#main-orders-details-grid a.delete').live('click',function() {
    if(!confirm('Are you sure you want to delete this item?')) return false;
    var th=this;
    var afterDelete=function(){};
    $.fn.yiiGridView.update('main-orders-details-grid', {
        type:'POST',
        url:$(this).attr('href'),
        success:function(data) {
            $.fn.yiiGridView.update('main-orders-details-grid');
            afterDelete(th,true,data);
        },
        error:function(XHR) {
            return afterDelete(th,false,XHR);
        }
    });
    return false;
}); 
```

有没有办法覆盖这个函数并添加一个用户定义的？

我在使用一些嵌套网格时遇到了一些问题 - 当我从子网格中删除一行时，它会更新主网格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T07:00:07.993

Of course you can :). I assume that you already have a CButtonColumn class column defined. You can do it like so:

```
 array(
            'class'=>'CButtonColumn',
            'template'=>'{view}{delete}',
            'buttons'=>array(
                'view'=>array(
                    'url'=>'Yii::app()->createUrl("controller/action",array("id"=>$data>id))',
                 ),
                'delete'=>array(
                    'url'=>'#',
                    'click'=>'js:function(evt){
                        evt.preventDefault();
                        /*Your custom JS goes here :) */
                        }',                        
                ),                    
            ),
        ), 
```

Also check out Yii's doc here: [http://www.yiiframework.com/doc/api/1.1/CButtonColumn#buttons-detail](http://www.yiiframework.com/doc/api/1.1/CButtonColumn#buttons-detail)

# delphi - Delphi 7：int64 大小的错误？

> ID：10542957
> 
> 赞同：1
> 
> 时间：2012-05-10T22:18:03.350
> 
> 标签：delphi, delphi-7

我写了一个小函数来将 MB 转换为字节，但是 int64 中似乎有一个错误。根据文档，int64 的范围从 -9223372036854775808 到 9223372036854775807，但我的结果不同......很多：

```
Const FreeSpace = 67100;

var FreeSpaceConverted :int64;
.
.
.

FreeSpaceConverted := FreeSpace shl 20; 
```

对 FreeSpace 使用 67100 的值会得到 1639972864 而不是 70359449600 的值。很明显，转换用完了空间并回绕。int64 的实际大小似乎是 70359449600 - 1639972864 = 68719476736 = 2^36 而它应该是 2^63-1。36 的指数看起来很奇怪。这可能是编译器本身的数字扭曲吗？

此外，使用以下替代方法会给出错误“转换或算术运算溢出”，即使它不应该：

```
FreeSpaceConverted := FreeSpace * 1024 * 1024; 
```

另一方面，以下替代方法确实有效：

```
FreeSpaceConverted := FreeSpace * 1024;
FreeSpaceConverted := FreeSpaceConverted * 1024; 
```

这是正常行为吗？如果是这样，这一切的原因是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T22:25:31.197

您在问题中包含的所有代码在 Delphi 7 中都可以正常工作。

```
program Int64Test;

{$APPTYPE CONSOLE}

var
  FreeSpaceConverted, FreeSpace: Int64;

begin
  FreeSpace := 67100;
  FreeSpaceConverted := FreeSpace shl 20;
  Writeln(FreeSpaceConverted);
  FreeSpaceConverted := FreeSpace * 1024 * 1024;
  Writeln(FreeSpaceConverted);
  Readln;
end. 
```

**输出**

```
70359449600
70359449600 
```

* * *

您的实际代码与您在问题中所述的不同。实际上，`FreeSpace`在您的代码中被声明为 32 位类型，可能是`Integer`. 例如，我不得不在这里猜测一下：

```
program Int64Test;

{$APPTYPE CONSOLE}

var
  FreeSpace: Integer;
  FreeSpaceConverted: Int64;

begin
  FreeSpace := 67100;
  FreeSpaceConverted := FreeSpace shl 20;
  Writeln(FreeSpaceConverted);
  FreeSpaceConverted := FreeSpace * 1024 * 1024;
  Writeln(FreeSpaceConverted);
  Readln;
end. 
```

**输出**

```
1639972864
1639972864 
```

如果我们启用溢出检查，那么乘法代码会导致溢出异常，正如您报告的那样。

* * *

现在考虑`FreeSpace shl 20`when`FreeSpace`是一个整数。编译器将此解释为 32 位整数运算，并将更高有效位移出 32 位寄存器的末尾。您分配给 64 位整数的事实无关紧要。重要的是表达式中的数据类型。`Int64`您可以通过在右侧包含强制转换来使代码按照您想要的方式运行。

```
program Int64Test;

{$APPTYPE CONSOLE}

var
  FreeSpace: Integer;
  FreeSpaceConverted: Int64;

begin
  FreeSpace := 67100;
  FreeSpaceConverted := Int64(FreeSpace) shl 20;
  Writeln(FreeSpaceConverted);
  FreeSpaceConverted := Int64(FreeSpace) * 1024 * 1024;
  Writeln(FreeSpaceConverted);
  Readln;
end. 
```

**输出**

```
70359449600
70359449600 
```

如需更全面的讨论，请参阅[Barry Kelly 对另一个问题的回答](https://stackoverflow.com/questions/4959032/file-size-calculation-int64-and-differences-between-32bit-and-64bit#answer-4960100)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T22:27:45.713

我碰巧在这个系统上没有 D7，但我确实有 Delphi 2007，其中，这段代码：

```
var
  FreeSpaceConverted, FreeSpace:int64;
begin
  try
     FreeSpace := 67100;
     FreeSpaceConverted := FreeSpace shl 20;
     writeln(FreeSpaceConverted);
     readln;
  except
    on E:Exception do
      Writeln(E.Classname, ': ', E.Message);
  end;
end. 
```

产生“70359449600”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-31T04:24:50.237

我正在使用德尔福 XE7。我认为问题在于将 32 位整数转换为 64 位整数。如果我使用您的代码，我会得到与您相同的结果。但如果我首先将 FreeSpace 类型转换为 int64，即

常量自由空间：int64 = 67100；

我得到正确的结果。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-02T01:49:03.463

好的，所以这条线不起作用 -> FreeSpaceConverted := FreeSpace shl 20;

也许你应该看这部分 -> FreeSpace shl 20;

是的，FreeSpace shl 20，你可能想看看这个 -> const -> FreeSpace = 67100;

也许 D7 将 FreeSpace 视为 Integer 32 常量？如果是这样，您可能希望将代码更改为这样的 -> const -> FreeSpace: Int64 = 67100;

你不需要无类型的常量，除非你想做这样的事情 var A: array [0..FreeSpace] of Integer 除此之外你不需要无类型的常量。

更多信息 在 Pascal 中，无类型常量就像是文本编辑器的替代品。您可以在使用数字的地方使用无类型常量。它不需要任何内存引用，它只是一个文本编辑器替换。您不能在该示例中进行任何操作： const A: Integer = 10; B = 20;

开始公司（A）；// 它工作 Inc(B); // 不仅不会工作，还会产生编译错误 end;

比较无类型常量有类型常量 C #define A 20 long a = 20;
帕斯卡常数 A = 20; 常量 A：整数 = 20；
装配 A equ 20 添加 20 ; 双字，整数 32 ；组装等效

# php - PHP错误弄乱了网站的外观

> ID：10542966
> 
> 赞同：2
> 
> 时间：2012-05-10T22:19:54.067
> 
> 标签：php, codeigniter, error-handling

我有一个主要用 php 构建的网站。我遇到的问题是在顶部我有一个带有背景图像的 div。它必须在一个非常具体的地方。每次出现 PHP 错误时，div 都会向下移动，从而使页面看起来很糟糕。

我可以想到两种可能的解决方案，但我不知道如何去做，而且在网上搜索是徒劳的。

*   做到这一点，以便 php 错误不会将 div 向下推（我试过浮动，但 div 中有其他东西需要在左侧，而图像在右侧）

*   使 php 错误出现在别处。（我不知道该怎么做，也找不到任何东西）

我使用codeigniter。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T22:24:30.877

您使用什么平台并不重要，但来自后端的错误应始终写入日志文件而不是生产中的输出。这就是你在 PHP 中的做法：

*   [PHP 将所有错误记录到日志文件以获取详细信息（NIXCRAFT 2007/2008）](http://www.cyberciti.biz/tips/php-howto-turn-on-error-log-file.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T23:01:23.047

答案是您**永远不会**在生产服务器上显示 PHP 错误。您应该只在您的实时服务器上显示它们。

因此，当您测试和构建应用程序时，错误出现在哪里并不重要。

但是在您的实时服务器上，您需要隐藏 php 错误，同时仍在记录。Codeignitier 提供了这种能力。

首先，在您的 index.php 更改

```
define('ENVIRONMENT', 'development'); 
```

到

```
 if ($_SERVER['SERVER_NAME'] == 'localhost')
 {
define('ENVIRONMENT', 'development');
 }
 else
 {
define('ENVIRONMENT', 'production');
 } 
```

当您在本地主机上时，这将自动设置开发模式，并在部署时自动设置生产模式（即没有代码更改）。

现在您根据需要配置一些东西：

```
inside Index.php also change the error reporting to:
if (defined('ENVIRONMENT'))
{
    switch (ENVIRONMENT)
    {
        case 'development':
            error_reporting(-1);
        break;

        case 'testing':
        case 'production':
            error_reporting(0);
        break;

        default:
            exit('The application environment is not set correctly.');
    }
 }

 Config.php
 // Set logs to show Debug + Error messages on your development
 // But only error messages on your production server
 $config['log_threshold'] = (ENVIRONMENT == 'development' ? '2' : '1');

 Database.php (config)
 $active_record = TRUE;
 $active_group = (ENVIRONMENT == 'development' ? 'localdev' : 'production');
 // Now define the two different groups here, making sure production has:
 $db['production']['db_debug'] = FALSE; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T23:19:19.687

以上所有答案都是生成 PHP CodeIgniter 代码的正确方法。

但要回答您的问题，如果您有个人偏好，您可能想在定义图像 css 时尝试使用 z-index 属性。

它不会降低您的错误，但如果您的图像的 z-index 高于包含您的错误的 div 的 z-index，您的图像将始终位于您修复的位置。

[https://developer.mozilla.org/en/CSS/Understanding_z-index](https://developer.mozilla.org/en/CSS/Understanding_z-index)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T22:23:33.733

最明显的答案是确保没有错误。如果无法做到这一点，请将以下行添加到您的 PHP 脚本中：

```
error_reporting ('E_NONE'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-07T17:06:02.020

快速修复将在`<?php`开始标签下方的代码下方插入

```
<?php

error_reporting(0); // this will prevent the errors from showing

ini_set('log_errors', 1); // this will log the errors in the log file. 
```

希望这可以帮助。

# silverlight - 完成对服务器的异步调用调用后的按钮 IsEnabled 绑定

> ID：10542971
> 
> 赞同：0
> 
> 时间：2012-05-10T22:20:22.180
> 
> 标签：silverlight, silverlight-4.0, wcf-ria-services, ria

我尝试使用 InvokeOperation 从 ViewModel 中的 DomainContext 获取布尔值。

由于对服务器的调用是异步的，包括调用。我需要等待调用完成（即 ctx.epidemicContext().Completed += [an event handler]）。在调用完成事件中，我正在检索布尔值并设置属性。

```
_context.IsChangeLogStarted(OnInvokeCompleted, null); 
```

//OnInvoke 完成设置属性

```
private void OnInvokeCompleted(InvokeOperation<bool> invOp)
        {           
            IsChangeLogExist = invOp.Value;
        } 
```

//财产

```
 public bool IsChangeLogExist
        {
            get { return this._IsChangeLogExist; }
            set { this._IsChangeLogExist = value; }
        } 
```

在我看来，我正在尝试将“IsChangeLogExist”绑定到按钮的 IsEnabled 属性。//看法

```
<Button IsEnabled="{Binding IsChangeLogExist}" Command="{Binding Source={StaticResource ProxyViewModel}, Path=StartChangeLogCommand}" CommandParameter="{Binding}" /> 
```

但问题是当我运行应用程序时，Button 的 IsEnabled 属性与 IsChangeLogExist 的默认值 (false) 绑定，由于 Invoke 的异步操作，没有从 domaincontext 设置其属性值。在调用回调调用 OnInvokeCompleted 之前，按钮的 Isenabled 属性已经在获取值。值总是假的（因为我们没有设置值并且调用仍然在服务器上）

有人可以建议我在从服务器获取 bool 值并将其设置为 OnInvokeCompleted 方法后如何绑定按钮的 IsEnabled 属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T05:38:24.810

您需要在视图模型中实现 INotifyPropertyChanged，然后在属性“IsChangeLogExists”的设置器中引发此 PopertyChanged 事件。这将刷新 UI，并在回调完成后使用 IsChangeLogExist 的新值。

```
public bool IsChangeLogExist
{
    get { return this._IsChangeLogExist; }
    set 
    { 
        this._IsChangeLogExist = value;
        if(PropertyChanged != null)
              PropertyChanged(this, "IsChangeLogExists")
    }
} 
```

# android - 如何以编程方式检查我的活动菜单是否在特定时刻显示？

> ID：10542973
> 
> 赞同：8
> 
> 时间：2012-05-10T22:20:47.323
> 
> 标签：android, menu

Android 设备配置更改（例如“将硬键盘滑回”）将始终调用`PhoneWindow.onConfigurationChanged()`，而后者又会调用`reopenMenu()`. 这将导致当前正在运行的活动的菜单重新打开，以防它显示。

`onPrepareOptionsMenu()`我在我的覆盖中实现了我的菜单锁定。用户每次想要查看菜单时都必须输入代码。我不希望用户被要求再次输入代码，而菜单仍然因为配置更改而出现。因此，我想知道，有什么方法可以检查当前前台活动的菜单是否已经显示？知道了这一点，如果菜单已经打开，我可以绕过询问访问代码。

我的自定义解决方法实现是使用我自己的标志，如果单击后退按钮`menuShowing`，我会在其中设置`onPrepareOptionsMenu`和重置。`onOptionsItemSelected``onKeyDown`

`EDIT:`似乎屏幕方向配置更改不会触发此行为。但是，硬键盘幻灯片可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T22:29:31.793

在有人提出更好的“一次通话”答案之前，这是我在问题中提到的自定义解决方法实现，在 Sam 的提示的帮助下，以防有人需要相同的功能：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    if (showingMenu) {
        // The menu button was clicked or the hard keyboard was
        // slid open/closed while the menu was already showing
        return true;
    }
    // Otherwise, either the menu was clicked or openOptionsMenu() was called
    if (codeEntered) {
        // Code was entered and then openOptionsMenu() was called
        showingMenu = true;
        // Menu will now be shown
        return true;
    } else {
        // The menu button was clicked, ask for code
        askForCode();
        // Don't show menu yet
        return false;
    }
}    

@Override
public void onOptionsMenuClosed(Menu menu) {
    showingMenu = false;
    codeEntered = false;
}

private void askForCode() {
    codeEntered = getUserInput();
    if (codeEntered)
        openOptionsMenu();
} 
```

`getUserInput()``AlertDialog`实际上是在 an和 an`EditText`的帮助下发生的，`TextWatcher`但实施细节超出了这个问题的范围，除非有人感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T09:45:51.707

在我的情况下

```
 @Override
  public void onPanelClosed(int featureId, Menu menu) {
    showingMenu = false;
    super.onPanelClosed(featureId, menu);
} 
```

# php - 复杂报表需要最优结构的连接查询

> ID：10542975
> 
> 赞同：1
> 
> 时间：2012-05-10T22:20:57.763
> 
> 标签：php, mysql, join, pivot-table, multiple-tables

我正在为我的 SaaS 构建一个自定义报告模块，并且需要关于我正在构建的查询（MySQL 和 PHP）的一些建议。我正在动态构建一个表，返回的每条记录都将是该表上的一行。它动态地连接了许多不同的表，除了我需要加入的 3 个表之外，它都运行良好。

所有其他表都是 1-1 LEFT JOIN。例如，如果我正在查询员工表并试图找到部门 ID，它只会加入 hunky dory。它会像这样加入：

```
First | Last  | Dept
John  | Smith | Toy Department 
```

让这件事变得复杂的是那些额外的 3 个表有一个 1-many 连接。还需要指出的是，当我进行此连接时，它可能会提取 2-50 行数据中的任何位置，这可能也很重要。例如，如果我正在查询员工表并需要加入时钟输入/输出表，它最终看起来像这样：

```
First | Last  | Time
John  | Smith | 8:00 am
John  | Smith | 12:00 pm
John  | Smith | 1:00 pm
John  | Smith | 5:00 pm 
```

如果我进行了正确的连接，名字/姓氏将为空，但我仍然会有多行。

我想将它们保留在一行中的原因是因为在拉取报告时我正在设置的表格，当它遇到需要使用 3 个 1-many 表格之一的表格时，它需要保留在同一个数据单元中（这是我无法控制的，它必须发生）：

```
<table>
    <tr>
        <td>John</td>
        <td>Smith</td>
        <td>8:00 am<br />12:00 pm<br />..... </td>
    </tr>
</table> 
```

我真的真的很想避免必须点击该单元格然后运行另一个查询来提取所有数据。原因是我可以运行包含 25 列以上的数千行的报告，并且它会运行 25x1000 行的相同查询。

当数据返回时，我希望是这样的：

```
First | Last  | Time_1  | Time_2   | Time_3  | Time_4
John  | Smith | 8:00 am | 12:00 pm | 1:00 pm | 5:00 pm 
```

我的一些想法是在 PHP 中运行一个 while 循环并动态构建 MySQL 的联接，但我遇到了一个问题，即我需要提供加入表的次数才能使该列正确. 我可以在技术上做到：

```
for($i = 1; $i < 50; ++$i) {
    $sql_fields .= "time_clock_{$i}.time AS Time_{$i},";
    $joins .= "LEFT JOIN time_clock AS time_clock_{$i} ON time_clock_{$i}.employee_id = emp.id";
}
$sql_fields = rtrim($sql_fields,',');

mysql_query("SELECT emp.field_blah, emp.field_blah2, {$sql_fields} FROM employees AS emp {$joins} WHERE condition = blah"); 
```

我只是担心这真的会导致 MySQL 的一些性能问题以及我在那里的所有疯狂连接。有人有更好的主意吗？在这一点上，我会招待任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:25:57.483

不。

构建两个查询。一个以所有1：1的元素拉动所有的人；然后另一个拉你所有的时间。然后在 PHP 中循环遍历时间，将它们填充到人们的时间数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T22:47:53.840

```
<?php
    $query = mysql_query("SELECT .... FROM employees LEFT JOIN.... LEFT JOIN..."); //even include the one-many tables
    $i = 0;
    while($rs = mysql_fetch_array($query)) { //note I'm using array not assoc
        // echo the 1:1 table data
        // when I hit the 1:many field do something like this, yes $j will get reset when the pointer hits the next row....I need more time to think....
        $j = 1;
        while($j) {
            if($rs[$i + $j]['id'] == $rs[$i]['id']) {
                echo $rs[$i + $j]['Time'];
                ++$skip_fields;
            } else {
                $j = 0;
            }
            ++$j;
        }
        // then use $skip_fields to skip $j number of rows that the duplicate employee ids are on and decrement the value as the pointer moves on.
        ++$i;
    }
?> 
```

没关系......使用数值只击中列而不是行......哦，好吧。:)

# javascript - 使用 jquery 对第三方站点进行身份验证？

> ID：10542977
> 
> 赞同：0
> 
> 时间：2012-05-10T22:21:15.860
> 
> 标签：javascript, jquery

我有一个简单的登录表单，可让用户登录我的网站。登录后，我会链接一个第 3 方站点，用户可以访问该站点并在其上运行搜索（它是我们合作的数据库资源）。问题是为了访问第 3 方数据库，他们首先必须使用简单的密码（每个用户都相同）登录到该站点并获取 cookie。

当用户登录我的网站时，我想通过运行 jquery $get 调用该第三方网站来简化整个过程，以便他们使用该第三方 cookie 进行身份验证并可以无缝访问第三方数据库。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:23:54.340

由于阻止从第三方站点加载（“同源策略”），这样的调用将不起作用，但是一个简单的隐藏 iframe 呢？既然您说您将使用`get`呼叫，您应该能够在隐藏的 iframe 中从他们的浏览器发出相同的请求。

# javascript - Android WebView：并行加载、布局和 Javascript

> ID：10542981
> 
> 赞同：2
> 
> 时间：2012-05-10T22:21:32.467
> 
> 标签：javascript, android, webview, load, parallel-processing

我有许多（5-10）个同时显示的 WebView（例如，作为类似于库存画廊的“轮播”）。远程网站被加载到这些 WebViews（不是本地 html 文件）中。这些网站非常复杂——它们有很多 javascript、图像，可能还有一些 flash ......

当应用程序启动时，所有 WebView 开始加载/布局其内容并运行 javascript - 所有这些都需要相当长的时间。另一方面，当 WebView 加载时，应用程序的响应速度非常快——滚动和其他 UI 内容非常流畅——CPU 绝对没有压力。

1.  那么是否有可能使这些视图并行加载？我认为我的应用程序将从并行加载 WebViews 中受益匪浅。
2.  另外，也许有一种方法可以通过重用 WebView 源代码来手动执行 javascript、加载和布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:00:06.883

回答我自己的问题：

1.  是不可能的 - 所有 web 视图（以及因此布局）上的 javascript 都是在同一个共享线程上完成的。
2.  也不起作用 - 它使用大量非公共 API。

相反，我使用 WebChromeClient#shouldInterceptRequest 来缓存尽可能多的资源，这大大缩短了加载时间。

# c# - 如何将 Windows 窗体 GUI 中字段的值保存到文件中，然后恢复它们？

> ID：10542988
> 
> 赞同：1
> 
> 时间：2012-05-10T22:22:31.413
> 
> 标签：c#, windows, forms, streamreader, streamwriter

我想将存储在文件中的内容加载到 WinForms GUI 的字段中。

我现在的方法：我有一个流写入器，它将每个文本框写入 .txt 文件中的一行。我有流式阅读器设置，但我不知道如何让它将每一行加载到单独的文本框中。例如：Task1_name（第 1 行）和 task1_desc（第 2 行）需要在单独的文本框中，我怎样才能将它加载到框中？

谢谢

代码：

保存按钮：

```
void Save_buttonClick(object sender, EventArgs e)
{
    DialogResult dialogResult = MessageBox.Show("Do you want to save?", "Save", MessageBoxButtons.YesNo);
    if (dialogResult == DialogResult.Yes)
    {
        FileStream file = new FileStream("test.txt", FileMode.OpenOrCreate, FileAccess.Write);
        StreamWriter sw = new StreamWriter(file);
        sw.WriteLine(task1_name.Text);
        sw.WriteLine(task1_desc.Text);
        sw.WriteLine(task1_date.Value);
        sw.WriteLine(task1_check.Checked);
        sw.Close();
    }
} 
```

加载按钮：

```
void Load_buttonClick(object sender, EventArgs e)
{
    DialogResult dialogResult = MessageBox.Show("Do you want to load?", "Load",     MessageBoxButtons.YesNo);
    if (dialogResult == DialogResult.Yes)
    {
        FileStream file = new FileStream("test.txt", FileMode.OpenOrCreate, FileAccess.Write);
        StreamReader sr = new StreamReader(file);
        sr.Close();
    }           
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:38:54.440

使用 XML 序列化。它看起来像这样：

```
public class MySettings 
{
  public String name {get;set;}
  public String name {get;set;}
  public DateTime date {get;set;}
  public bool checked {get;set;}
}

void Save() 
{
  var s = new MySettings 
  {
    name = this.task1_Name.Text,
    desc = this.task1_Desc.Text,
    date = this.task1_Date.Value,
    checked = this.task1_Check.Checked
  };
  var ser = new XmlSerializer(typeof(MySettings));
  using (var fs = new FileStream(path, FileMode.Create))
  {
      using (var tw = new StreamWriter(fs, new UTF8Encoding()))
      {
          var ns = new XmlSerializerNamespaces();
          ns.Add("", "");
          ser.Serialize(tw, this, ns);
      }
  }
} 
```

加载它看起来像这样：

```
 static MySettings Load()
    {
        var ser = new XmlSerializer(typeof(MySettings));
        MySettings settings = null;

        try
        {
            using (var s = File.OpenRead(path))
            {
                settings = (MySettings) ser.Deserialize(s);
                // optionally validate here
            }
        }
        catch (Exception ex1)
        {
            MessageBox.Show("Cannot read settings. " + ex1.Message,
                            "error");
            settings = null;
        }
        return settings;
    } 
```

然后当然重置你的表格是这样的：

```
 var settings = Load();
 this.task1_Name.Text = settings.name;
 this.task1_Desc.Text = settings.desc;
 this.task1_Date.Value = settings.date;
 this.task1_Check.Checked = settings.checked; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T22:38:46.223

您可以将每一行添加到列表中并通过索引访问它们：

```
//...
List<string> lines = new List<string>();

using (StreamReader sr = new StreamReader(file))
{
    while(!sr.EndOfStream)
    {
        lines.Add(sr.ReadLine());
    }
}

task1_name.Text = lines[0];
task1_desc.Text = lines[1];
//... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T22:42:11.553

只需阅读这些行并按照您编写它们的顺序填充表单：

```
if (dialogResult == DialogResult.Yes)
{
    FileStream file = new FileStream("test.txt", FileMode.OpenOrCreate, FileAccess.Write);
    StreamReader sr = new StreamReader(file);
    task1_name.Text = sr.ReadLine();
    task1_desc.Text = sr.ReadLine();
    task1_date.Value = DateTime.Parse(sr.ReadLine());
    task1_checked.Checked = bool.Parse(sr.ReadLine());
    sr.Close();
} 
```

# .net - Web 应用程序设计器文件中缺少 UserControl 声明

> ID：10542991
> 
> 赞同：0
> 
> 时间：2012-05-10T22:22:44.910
> 
> 标签：.net, user-controls, wap

我刚刚将我的网站转换为一个 Web 应用程序项目，该项目为每个 .aspx 文件生成了一个设计器文件。不幸的是，设计器文件在页面上没有我的用户控件的声明，并且构建失败。如果我手动将声明添加到设计器文件或用户控件背后的代码中，它就可以工作。我已经在 web.config 和页面级别声明了用户控件。

错误：

```
'acEditStaffName' is not declared. It may be inaccessible due to its protection level. 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-15T08:37:18.263

我想我找到了解决这个问题的方法。

1.  删除设计器文件
2.  移除 html 文件中的 <%@ 注册元素
3.  转换为 webapplicaion --> 将重新创建设计器文件
4.  再次添加寄存器元素..
5.  在设计器文件中将用户控件的命名空间编辑到正确的命名空间

在挣扎了一个多小时后，这对我有用..

# c++ - 为什么调用recv系统调用时会调用sigprocmask？

> ID：10542993
> 
> 赞同：6
> 
> 时间：2012-05-10T22:22:54.723
> 
> 标签：c++, linux

我有一些`recv()`定期调用的代码（带有`MSG_DONTWAIT`标志）。我很好奇，因为在 vtune 中分析我的代码时，我看到一个`sigprocmask()`与 关联的调用`recv()`，并且它占用了总时间的很大一部分来执行。我很好奇为什么`recv()`打电话`sigprocmask()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:51:28.027

在 linux 下使用 TCP 套接字时，如果对方意外关闭，您将收到 SIGPIPE。

既然你可以屏蔽这个信号（大多数时候，你会自己处理返回值 0，你不关心这个信号），我*猜*系统库会检查信号状态，如果被屏蔽，使用更快的代码路径。

如果不是，则无法优化。

顺便说一句，你知道 pselect() 对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:48:58.120

可能这样 recv 可以判断是否生成了相关信号，否则如果所述信号被阻塞，则不会看到这些信号。想到 EAGAIN/EWOULDBLOCK 作为 errno 的值，有时使用可能被阻塞的信号生成。你看过[`sigprocmask`手册页](http://pubs.opengroup.org/onlinepubs/7908799/xsh/sigprocmask.html)吗？

# android - 不幸的是，android应用程序已停止

> ID：10542998
> 
> 赞同：0
> 
> 时间：2012-05-10T22:23:11.330
> 
> 标签：android

```
05-10 22:12:43.572: E/dalvikvm(566): Could not find class 'com.commonsware.cwac.merge.MergeAdapter', referenced from method FXPAL.Unity.Android.UnityMain.updateView
05-10 22:12:43.862: E/dalvikvm(566): Could not find class 'com.xtify.android.sdk.PersistentLocationManager', referenced from method FXPAL.Unity.Android.ReportingService.onCreate
05-10 22:12:44.182: E/AndroidRuntime(566): FATAL EXCEPTION: main
05-10 22:12:44.182: E/AndroidRuntime(566): java.lang.NoClassDefFoundError: com.xtify.android.sdk.PersistentLocationManager
05-10 22:12:44.182: E/AndroidRuntime(566):  at FXPAL.Unity.Android.ReportingService.onCreate(ReportingService.java:240)
05-10 22:12:44.182: E/AndroidRuntime(566):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2253)
05-10 22:12:44.182: E/AndroidRuntime(566):  at android.app.ActivityThread.access$1600(ActivityThread.java:123)
05-10 22:12:44.182: E/AndroidRuntime(566):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1201)
05-10 22:12:44.182: E/AndroidRuntime(566):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-10 22:12:44.182: E/AndroidRuntime(566):  at android.os.Looper.loop(Looper.java:137)
05-10 22:12:44.182: E/AndroidRuntime(566):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-10 22:12:44.182: E/AndroidRuntime(566):  at java.lang.reflect.Method.invokeNative(Native Method)
05-10 22:12:44.182: E/AndroidRuntime(566):  at java.lang.reflect.Method.invoke(Method.java:511)
05-10 22:12:44.182: E/AndroidRuntime(566):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-10 22:12:44.182: E/AndroidRuntime(566):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-10 22:12:44.182: E/AndroidRuntime(566):  at dalvik.system.NativeStart.main(Native Method)
05-10 22:12:55.702: E/dalvikvm(589): Could not find class 'com.xtify.android.sdk.PersistentLocationManager', referenced from method FXPAL.Unity.Android.ReportingService.onCreate
05-10 22:12:55.992: E/AndroidRuntime(589): FATAL EXCEPTION: main
05-10 22:12:55.992: E/AndroidRuntime(589): java.lang.NoClassDefFoundError: com.xtify.android.sdk.PersistentLocationManager
05-10 22:12:55.992: E/AndroidRuntime(589):  at FXPAL.Unity.Android.ReportingService.onCreate(ReportingService.java:240)
05-10 22:12:55.992: E/AndroidRuntime(589):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2253)
05-10 22:12:55.992: E/AndroidRuntime(589):  at android.app.ActivityThread.access$1600(ActivityThread.java:123)
05-10 22:12:55.992: E/AndroidRuntime(589):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1201)
05-10 22:12:55.992: E/AndroidRuntime(589):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-10 22:12:55.992: E/AndroidRuntime(589):  at android.os.Looper.loop(Looper.java:137)
05-10 22:12:55.992: E/AndroidRuntime(589):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-10 22:12:55.992: E/AndroidRuntime(589):  at java.lang.reflect.Method.invokeNative(Native Method)
05-10 22:12:55.992: E/AndroidRuntime(589):  at java.lang.reflect.Method.invoke(Method.java:511)
05-10 22:12:55.992: E/AndroidRuntime(589):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-10 22:12:55.992: E/AndroidRuntime(589):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-10 22:12:55.992: E/AndroidRuntime(589):  at dalvik.system.NativeStart.main(Native Method)
05-10 22:13:01.262: E/dalvikvm(605): Could not find class 'com.commonsware.cwac.merge.MergeAdapter', referenced from method FXPAL.Unity.Android.UnityMain.updateView
05-10 22:13:01.502: E/dalvikvm(605): Could not find class 'com.xtify.android.sdk.PersistentLocationManager', referenced from method FXPAL.Unity.Android.ReportingService.onCreate
05-10 22:13:01.722: E/AndroidRuntime(605): FATAL EXCEPTION: main
05-10 22:13:01.722: E/AndroidRuntime(605): java.lang.NoClassDefFoundError: com.xtify.android.sdk.PersistentLocationManager
05-10 22:13:01.722: E/AndroidRuntime(605):  at FXPAL.Unity.Android.ReportingService.onCreate(ReportingService.java:240)
05-10 22:13:01.722: E/AndroidRuntime(605):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2253)
05-10 22:13:01.722: E/AndroidRuntime(605):  at android.app.ActivityThread.access$1600(ActivityThread.java:123)
05-10 22:13:01.722: E/AndroidRuntime(605):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1201)
05-10 22:13:01.722: E/AndroidRuntime(605):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-10 22:13:01.722: E/AndroidRuntime(605):  at android.os.Looper.loop(Looper.java:137)
05-10 22:13:01.722: E/AndroidRuntime(605):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-10 22:13:01.722: E/AndroidRuntime(605):  at java.lang.reflect.Method.invokeNative(Native Method)
05-10 22:13:01.722: E/AndroidRuntime(605):  at java.lang.reflect.Method.invoke(Method.java:511)
05-10 22:13:01.722: E/AndroidRuntime(605):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-10 22:13:01.722: E/AndroidRuntime(605):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-10 22:13:01.722: E/AndroidRuntime(605):  at dalvik.system.NativeStart.main(Native Method) 
```

我是 android 开发新手。我正在将 android 应用程序从 2.2 Android 升级到 4.0.3。该应用程序没有启动并说“不幸的是**myUnity**应用程序已停止”，但以前该应用程序很好。上面是我在调试应用程序时得到的错误日志。我还在下面粘贴我的清单文件。请帮助我，因为我多年来一直面临这个问题。提前致谢。

Android清单文件是-->

在此先感谢....我也是stackflow的新手...如果我以错误的格式发布问题，我真的很抱歉。

问候，拉克什。

* * *

**LogCat** 05-15 06:52:35.898: E/dalvikvm(1436): 找不到类 'com.commonsware.cwac.merge.MergeAdapter'，引用自 FXPAL.Unity.Android.UnityMain.updateView 05-15 06 方法： 52：36.187：E/dalvikvm（1436）：找不到类“com.xtify.android.sdk.PersistentLocationManager”，从方法 FXPAL.Unity.Android.ReportingService.onCreate 引用

以上是我的logcat。期待您的帮助。下面是我的android清单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:51:19.740

好吧，我已经在我的 Android 环境中进行了更改。我正在使用一些外部库（JAR），我也收到了这个“NoClassDef”错误。我创建了一个名为“libs”的文件夹，将库复制到其中。右键单击“libs”然后构建路径-> 添加为源文件夹。

我希望这有帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T22:39:34.097

你的问题是`

```
java.lang.NoClassDefFoundError: com.xtify.android.sdk.PersistentLocationManager 
```

`

从文档复制：

> 如果 Java 虚拟机或 ClassLoader 实例尝试加载类的定义（作为正常方法调用的一部分或作为使用 new 表达式创建新实例的一部分）并且找不到类的定义，则抛出此异常。搜索到的类定义在编译当前执行的类时已经存在，但无法再找到该定义。

NoClassDefFoundError 的原因是特定类在 Classpath 中不可用，因此您需要将其添加到 Classpath 中。尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T22:26:36.453

无需道歉，发布 logcat 是正确的做法。第一行说“找不到类 'com.commonsware.cwac.merge.MergeAdapter'，从方法 FXPAL.Unity.Android.UnityMain.updateView 引用”。确保您仍在将该包链接到您的应用程序中。

顺便说一句，我看不到您的清单文件。